# StackOverflow 问答 13461000-13461999

# r - 以“长”格式重塑表格以分隔列

> ID：13461002
> 
> 赞同：3
> 
> 时间：2012-11-19T19:45:58.130
> 
> 标签：r

我有一个看起来像这样的表：

```
|Condition|Session|Time|
|        A|      1| 100|
|        A|      1| 200|
|        B|      2| 200|
|        B|      2| 300|
|        B|      2| 500|
|        A|      3| 300|
|        A|      4| 200| 
```

我想将其转换为以下格式：

```
|   A|   B|   A|   A|
|   1|   2|   3|   4|
| 100| 200| 300| 200|
| 200| 300|    |    |
|    | 500|    |    | 
```

这意味着前两行是“条件”和“会话”，其余行代表“时间”列（行数可变）。

我怎样才能在 R 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:11:58.280

首先，a 的每一列都`data.frame`具有相同的类型。因此，您可能会将所需的表格置于转置形状。

也许您可以执行以下操作：

```
foo = data.frame(Condition=c("A","A","B","B","B","A","A"), 
                 Session=c(1,1,2,2,2,3,4), 
                 Time = c(1,2,2,3,5,3,2)*100)
bar = aggregate(Time~Condition+Session, foo, identity)
bar
#   Condition Session          Time
# 1         A       1      100, 200
# 2         B       2 200, 300, 500
# 3         A       3           300
# 4         A       4           200
bar[1,3]
# $`0`
# [1] 100 200 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:15:28.577

这是一种选择。一个（可能很大）警告是我正在使用一个（非常有用）但非标准的自定义函数，称为`cbind.fill`：

```
> dat <- read.table(text = "|Condition|Session|Time|
+ |        A|      1| 100|
+ |        A|      1| 200|
+ |        B|      2| 200|
+ |        B|      2| 300|
+ |        B|      2| 500|
+ |        A|      3| 300|
+ |        A|      4| 200|",header = TRUE,sep = "|")
dat$X <- dat$X.1 <- NULL

dat$Condition <- factor(dat$Condition,labels = LETTERS[1:2])

tmp <- with(dat,split(Time,list(Condition,Session)))
tmp <- tmp[sapply(tmp,function(x) length(x) > 0)]
res <- do.call(cbind.fill,tmp)

nm <- strsplit(names(tmp),split="\\.")

res <- rbind(as.numeric(sapply(nm,'[',2)),res)
colnames(res) <- sapply(nm,'[',1)
> res
       A   B   A   A
[1,]   1   2   3   4
[2,] 100 200 300 200
[3,] 200 300  NA  NA
[4,]  NA 500  NA  NA 
```

的核心思想`cbind.fill`可以在[这个](https://stackoverflow.com/q/7962267/324364)问题中找到。不过，我不会保证相同的结果，因为我在那里使用的是经过大量修改的代码版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T21:26:11.710

我提供了另一种可能的解决方案，使用`ddply`from the `plyr`package 和`dcast`from `reshape2`：

```
library(reshape2)
library(plyr)

dat = read.table(text=gsub("\\|", " ", "|Condition|Session|Time|
|        A|      1| 100|
|        A|      1| 200|
|        B|      2| 200|
|        B|      2| 300|
|        B|      2| 500|
|        A|      3| 300|
|        A|      4| 200|"), header=TRUE)

# Add column 'Rank' for each combination of Condition by Session.
dat = ddply(dat, .(Condition, Session), .fun=summarise, 
            Rank=rank(Time), Time=Time)

res = dcast(dat, Condition + Session ~ Rank, value.var="Time")

# Sort by 'Session'.
res = res[order(res$Session), ]

# As @Ali pointed out, you may want to leave the results as
# an un-transposed data.frame.
res

#   Condition Session   1   2   3
# 1         A       1 100 200  NA
# 4         B       2 200 300 500
# 2         A       3 300  NA  NA
# 3         A       4 200  NA  NA

# Transposing will coerce the data.frame to a character matrix.
t(res)

#           1     4     2     3    
# Condition "A"   "B"   "A"   "A"  
# Session   "1"   "2"   "3"   "4"  
# 1         "100" "200" "300" "200"
# 2         "200" "300" NA    NA   
# 3         NA    "500" NA    NA 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T03:42:52.200

```
 dat <- read.table(text="Condition|Session|Time
 A|      1| 100
 A|      1| 200
 B|      2| 200
 B|      2| 300
 B|      2| 500
 A|      3| 300
 A|      4| 200", header=TRUE,sep="|")
 tapply(dat$Time, paste(dat$Condition, dat$Session, sep="_"), list)
#----------
$A_1
[1] 100 200

$A_3
[1] 300

$A_4
[1] 200

$B_2
[1] 200 300 500
#--------------------
 tdat <-.Last.value
 lmax <- max(sapply(tdat, function(x) length(x)) )
 as.data.frame( lapply(tdat, function(x) c(x, rep(NA, lmax- length(x)) ) ) )
#---------------------
  A_1 A_3 A_4 B_2
1 100 300 200 200
2 200  NA  NA 300
3  NA  NA  NA 500 
```

# java - 如何使用 String.split(",") 导入 CSV 文件，而不会因空白字段而缩短数组？

> ID：13461003
> 
> 赞同：6
> 
> 时间：2012-11-19T19:45:57.003
> 
> 标签：java, csv, split, string

目前，当我逐行导入 CSV 文件时，`String.split(",")`如果有一行看起来像`"foo,,bar,,fizz,,,"`该方法返回一个长度为 5 的数组，看起来像`["foo", "", "bar, "", "fizz"]`. 如何获得返回长度为 8 的数组的方法`["foo", "", "bar", "", "fizz, "", "", ""]`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-19T19:47:13.167

还有另一个[重载`split`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)可以实现：

```
string.split(",", -1); 
```

# ruby-on-rails - RoR 应用程序中的延迟加载（分页结果）

> ID：13461006
> 
> 赞同：0
> 
> 时间：2012-11-19T19:46:20.267
> 
> 标签：ruby-on-rails, ruby-on-rails-3, lazy-loading

我想在我的 Rails 应用程序中实现某种延迟加载。这意味着我有大约 50 000 行的查询结果。我希望它们显示在 50 页上，每页 100 行。我之前无法加载所有数据，因为这会使我的浏览器崩溃。

那么我如何一次只加载一部分数据呢？谁能告诉我一些我可以用谷歌搜索的关键字？！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:49:22.747

试试 will_paginate gem 来实现这个功能：[https ://github.com/mislav/will_paginate](https://github.com/mislav/will_paginate)

它允许您`@posts = Post.order('created_at DESC').paginate(:page => params[:page])`在控制器和`<%= will_paginate @posts %>`视图中执行操作。

# ios - 仅在 UIAlertView 之后才在焦点上选择 UITextView 中的所有文本

> ID：13461009
> 
> 赞同：1
> 
> 时间：2012-11-19T19:46:34.240
> 
> 标签：ios, xamarin.ios, uitextview

我有一个包含一些 UITextView 控件的 tableView。当用户点击其中一个时，应选择其中的文本，以便任何键盘输入立即替换原始内容。

我无法获取使用此代码选择的 UITextView 内的文本：

```
txtQuantity.SelectAll (new NSObject(NSObjectFlag.Empty)); 
```

因为此代码仅显示菜单“选择|全选”而没有实际选择文本。

有人让这个工作吗？

编辑：下面的代码选择 txtQuantity 控件内的文本，但前提是 UIAlert 首先显示！为什么是这样？

```
public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();

            txtQuantity.TouchDown += txtQuantityHandleTouchDown;

            txtQuantity.EditingDidBegin += delegate {

                txtQuantity.ExclusiveTouch=true;
                UIAlertView uv = new UIAlertView("","OK",null,"OK",null);
                uv.Show ();
            };

        }

        void txtQuantityHandleTouchDown (object sender, EventArgs e)
        {
            txtQuantity.SelectAll (this);
            txtQuantity.Selected = true;

        } 
```

如果 txtQuality.EditingBegin 委托中的所有代码都被注释掉，则不会触发 HandleTouchDown 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:49:32.237

我不确定这是否是您想要的，但我整理了一个快速示例。

我遇到的问题是在 EditingDidBegin 中调用 SelectAll。我必须打电话给 BeginInvokeOnMainThread 才能让选择工作。我不确定是否是主线程上没有发生事件的问题，或者您只需要在主线程上进行异步调用。

```
using System;
using System.Collections.Generic;
using System.Linq;

using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace SelectText
{
    [Register ("AppDelegate")]
    public partial class AppDelegate : UIApplicationDelegate
    {
        // class-level declarations
        UIWindow window;

        public override bool FinishedLaunching (UIApplication app, NSDictionary options)
        {
            // create a new window instance based on the screen size
            window = new UIWindow (UIScreen.MainScreen.Bounds);

            window.RootViewController = new MyTableViewController ();

            // make the window visible
            window.MakeKeyAndVisible ();

            return true;
        }
    }

    public class MyTableViewController : UITableViewController
    {
        public override void LoadView ()
        {
            base.LoadView ();
            this.TableView.DataSource = new TableViewDataSource ();
        }
        private class TableViewDataSource : UITableViewDataSource
        {
            private class EditCell : UITableViewCell
            {
                UITextField _field;

                public EditCell () : base (UITableViewCellStyle.Default, "mycell")
                {
                    _field = new UITextField (this.Bounds);
                    _field.AutoresizingMask = UIViewAutoresizing.All;
                    _field.BackgroundColor = UIColor.Clear;
                    _field.ShouldReturn = delegate {
                        _field.ResignFirstResponder ();

                        return true;
                    };

                    _field.EditingDidBegin += delegate {
                        this.BeginInvokeOnMainThread ( delegate {
                            _field.SelectAll (this);
                        });
                    };

                    _field.Text = "Some Text";
                    this.Add (_field);
                }

                public override void LayoutSubviews ()
                {
                    base.LayoutSubviews ();
                    _field.Frame = this.Bounds;
                }

            }

            #region implemented abstract members of UITableViewDataSource           
            public override int RowsInSection (UITableView tableView, int section)
            {
                return 2;
            }           

            public override UITableViewCell GetCell (UITableView tableView, NSIndexPath indexPath)
            {
                UITableViewCell cell = tableView.DequeueReusableCell ("mycell");

                if (cell == null)
                {
                    cell = new EditCell ();
                }

                cell.SelectionStyle = UITableViewCellSelectionStyle.None;

                return cell;
            }           
            #endregion
        }
    }
} 
```

# matlab - 在 3D 直方图网格上查找给定点的归属值？

> ID：13461010
> 
> 赞同：1
> 
> 时间：2012-11-19T19:46:40.153
> 
> 标签：matlab, search, histogram, interpolation

我使用如下所示的二维数据集，

```
37.0235000000000    18.4548000000000
28.4454000000000    15.7814000000000
34.6958000000000    20.9239000000000
26.0374000000000    17.1070000000000
27.1619000000000    17.6757000000000
28.4101000000000    15.9183000000000
33.7340000000000    17.1615000000000
34.7948000000000    18.2695000000000
34.5622000000000    19.3793000000000
36.2884000000000    18.4551000000000
26.1695000000000    16.8195000000000
26.2090000000000    14.2081000000000
26.0264000000000    21.8923000000000
35.8194000000000    18.4811000000000 
```

创建 3D 直方图。

![在此处输入图像描述](../Images/4d43fab15e2f3ba528b8ce357b348908.png)

*如何找到网格上某个点的直方图值？*例如，如果`[34.7948000000000 18.2695000000000]`给定点，我想为网格上的给定点找到直方图的对应值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:09:41.700

我用了这段代码

```
point = feat_vec(i,:); // take the point given by the data set
X = centers{1}(1,:); // take center of the bins at one dimension
Y = centers{2}(1,:); // take center of the bins at other dim.  

distanceX = abs(X-point(1)); // find distance to all bin centers at one dimension 
distanceY = abs(Y-point(2)); // find distance to center points of other dimension

[~,indexX] = min(distanceX); // find the index of minimum distant center point
[~,indexY] = min(distanceY); // find the index of minimum distant center point for other dimension 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T05:35:54.387

我想你的意思是：

> [N,C] = hist3(X,...) 在 1×2 数值向量元胞数组中返回 bin 中心的位置，并且不绘制直方图。

话虽如此，如果您有一个 2D 点`x=[x1, x2]`，您只需查找 中最近的点`C`，并取 N 中的相应值。

在 Matlab 代码中：

```
[N, C] = hist3(data); % with your data format...
[~,indX] = min(abs(C{1}-x(1)));
[~,indY] = min(abs(C{2}-x(2)));
result = N(indX,indY); 
```

完毕。（你可以把它变成你自己的功能说`result = hist_val(data, x)`。）

* * *

编辑：

我刚刚看到，我的答案本质上只是@Erogol 答案的更详细版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T20:12:27.457

你可以用它[`interp2`](http://www.mathworks.com/help/matlab/ref/interp2.html)来实现！

* * *

如果`X`（一维向量，长度*N*）和`Y`（一维向量，长度*M*`Z` ）确定直方图已定义值（矩阵，大小*M **x** N*）的轴上的离散坐标。`XI`使用坐标 ( , )获取一个特定点的值`YI`可以通过以下方式完成：

```
% generate grid
[XM, YM] = meshgrid(X, Y);
% interpolate desired value
ZI = interp2(XM, YM, Z, XI, YI, 'spline') 
```

一般来说，这类问题是**插值**问题。如果您想获取*多个*点的值，则必须以与上面代码中类似的方式为它们生成网格。例如，您还可以使用另一种插值方法`linear`（请参阅链接文档！）

# angularjs - 有条件地在 ng-repeat 块中添加元素

> ID：13461015
> 
> 赞同：14
> 
> 时间：2012-11-19T19:47:03.883
> 
> 标签：angularjs

是否可以根据条件向标记添加内容？就像在这个例子中一样，当我只想`td`在第一次迭代时添加（仅适用于 的第一个元素`myData`）？

```
<tr ng-repeat="m in myData">
   <td>{{m.Name}}</td>
   <td>{{m.LastName}}</td>

   @if myData.indexOf(m) = 0 then // something like that
   <td rowspan ="{{m.length}}">
      <ul>
        <li ng-repeat="d in days">
           {{d.hours}}
        </li>
      </ul>
   </td> 
</tr> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-19T20:17:42.013

是的，AngularJS 在这种情况下有 2 个指令：

*   [ng-show](http://docs.angularjs.org/api/ng.directive%3angShow) / [ng-hide](http://docs.angularjs.org/api/ng.directive%3angHide)系列指令可用于根据评估表达式的结果隐藏（通过使用显示 CSS 规则）DOM 的三个部分。
*   如果我们想有条件地物理删除/添加 DOM 的一部分，那么[ng-switch](http://docs.angularjs.org/api/ng.directive%3angSwitch)指令系列（ng-switch、ng-switch-when、ng-switch-default）将派上用场。

最终，这两种解决方案都会提供相同的视觉效果，但底层的 DOM 结构会有所不同。对于简单的用例，ng-show / ng-hide 可能没问题，但是应该使用 ng-switch 处理 DOM 的较大部分。

对于这个问题的用例，我建议使用 ng-switch。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-17T08:15:55.940

最好的解决方案应该是：

```
<tr ng-repeat="m in myData">
   <td>{{m.Name}}</td>
   <td>{{m.LastName}}</td>

   <td ng-if="$first" rowspan="{{myData.length}}">
       <ul>
           <li ng-repeat="d in days">
               {{d.hours}}
           </li>
       </ul>
   </td> 
</tr> 
```

# javascript - 仅在单击下拉列表时填充下拉列表

> ID：13461016
> 
> 赞同：2
> 
> 时间：2012-11-19T19:47:08.343
> 
> 标签：javascript, jquery, html, drop-down-menu

我无法找出如何通过用户点击下拉菜单来启动点击事件。仅当用户单击很少见的下拉列表时，我才想填充下拉列表。此外，它还取决于页面上选择的其他几个值。所以基本上，如果用户只是简单地点击下拉菜单来查看选项，我该如何触发一个事件。

我试过了，`$('select').click`但没有用。

如果您没有任何选择，它会起作用。但是，如果有当前的选择，那就没有运气了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T19:55:39.847

尝试改用`focus`事件，这样`select`即使使用键盘作为目标，也会填充。

```
$('select').on('focus', function() {
    var $this = $(this);
    if ($this.children().length == 1) {
        $this.append('<option value="1">1</option><option value="2">2</option>');
    }
});​ 
```

查看简单的[演示](http://jsfiddle.net/st3fan/NTxs8/)。

**更新**

这是一个使用[unbind](http://api.jquery.com/unbind/)仅触发事件处理程序一次的[新版本。](http://jsfiddle.net/st3fan/DRQDb/)这样您就可以在不添加任何元素的情况下使用您的元素来更改条件的结果，就像以前的解决方案所需的那样。`alert``option`

```
$('select').on('focus', function() {

    var $this = $(this);

    // run your alert here if it´s necessary
    alert('Focused for the first time :)');

    // add the new option elements
    $this.append('<option value="1">1</option><option value="2">2</option>');

    // unbind the event to prevent it from being triggered again
    $this.unbind('focus');
});​ 
```

希望这就是你要找的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T19:50:33.963

它应该工作。[在这里](http://jsfiddle.net/paska/bGTug/)，我已经完成了它和它的工作。

```
$("select").on("click", function() {
    $(this).append("<option>1</option><option>2</option>");
}); 
```

**更新**：http: [//jsfiddle.net/paska/bGTug/2/](http://jsfiddle.net/paska/bGTug/2/)

新代码：

```
var loaded = false;
$("select").on("click", function() {
    if (loaded)
        return;
    $(this).append("<option>1</option><option>2</option>");
    loaded = true;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-20T14:16:50.113

点击后自动打开下拉菜单比较棘手：

```
// Mousedown is used so IE works
$('#select_id').on('focus mousedown', function (e) {
    var data;
    $(this).off('focus mousedown');
    $.ajax({async: false, 
            type: 'GET', 
            url: 'url that returns the options',
            success: function (d) { data = d; }
           });
    $(this).find('option').remove().end().append(data);
    // Prevent IE hang by waiting awhile
    var t = new Date().getTime(); while(new Date().getTime() < t + 200) {}
    return true;
}); 
```

# haskell - 在 Haskell 中创建 UArray Int（复数）

> ID：13461020
> 
> 赞同：1
> 
> 时间：2012-11-19T19:47:29.233
> 
> 标签：haskell, complex-numbers

我正在尝试拥有一个`UArray Int (Complex Double)`. 此签名很好，但是当我尝试使用访问特定索引时`(!)`收到错误消息。这是我尝试使用的代码：

```
test :: UArray Int (Complex Double) -> Complex Double
test arr = arr ! 0 
```

和我得到的错误：

```
No instance for (IArray UArray (Complex Double)) arising from a use of `!'
Possible fix:
  add an instance declaration for (IArray UArray (Complex Double))
In the expression: arr ! 0
In an equation for `test': test arr = arr ! 0 
```

这`UArray Int Double`很有效，我很好奇为什么这不适用于（Complex Double）。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:04:01.210

从[`Data.Array.Unboxed documentation`](http://hackage.haskell.org/packages/archive/array/latest/doc/html/Data-Array-Unboxed.html#t%3aUArray), 似乎有[`IArray`](http://hackage.haskell.org/packages/archive/array/latest/doc/html/Data-Array-IArray.html#t%3aArray)with的实例`UArray`仅用于`Char`,`Double`或`Int`, 不是多态的类型。如果你需要存储其他类型的值，你应该使用 boxed [`Array`](http://hackage.haskell.org/packages/archive/array/latest/doc/html/Data-Array-IArray.html#t%3aArray)。

# ruby-on-rails - 测试流程（跨控制器）的最佳方法是什么？

> ID：13461022
> 
> 赞同：2
> 
> 时间：2012-11-19T19:47:32.147
> 
> 标签：ruby-on-rails, ruby, testing, rspec

我们的应用程序中有一个特定的流程，它使用相关数据进行单独的调用。它们在不同的控制器中，但与同一个用户交互。

我们正在尝试构建一个测试来确认整个流程是否按预期工作。我们已经为组成部分构建了单独的测试，但想要对整个流程进行测试。

例如，我们有一个用户签到工作（签入）然后构建一个小部件（widgetize）。我们有一些方法可以过滤我们的用户，这些用户已签入，以及已小部件化（和签入）的用户。我们可以使用 FactoryGirl 构建小对象以确保过滤器正常工作，但我们想要一个测试，让一个用户签入，另一个用户签入，第二个小部件化，以便我们可以确认我们的过滤方法只捕获用户我们希望它捕获。

我的第一个想法是构建一个 rspec 测试，它只是从 widgetize 规范中直接调用 checkin，然后确认过滤方法——但我发现 rspec 不允许跨控制器调用（或者至少我无法弄清楚如何使其工作；发布和获取该控制器不起作用）。此外，人们告诉我这是非常糟糕的做法。

我应该如何进行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:41:05.610

本文介绍了如何使用 request-specs 很好地完成集成测试。

[http://everydayrails.com/2012/04/24/testing-series-rspec-requests.html](http://everydayrails.com/2012/04/24/testing-series-rspec-requests.html)

基本上你想使用像 capybara 这样的 gem，这样你就可以模拟用户输入，让你的测试在你的应用程序中运行，并检查一切是否如你所愿。

# php - 我应该将 php/mysql 模块存储在数据库还是文件中？

> ID：13461024
> 
> 赞同：0
> 
> 时间：2012-11-19T19:47:42.787
> 
> 标签：php, mysql, php-extension

我创建了 10 个不同的模块用于索引页。我为后端创建了一个 jquery 拖放/排序功能，因此网站管理员可以在没有编码知识的情况下更改首页的布局。但是，我在寻找存储模块的方法时遇到了问题。

我有两种类型的模块： 1\. 图像、标题、链接和**动态 php/mysql 生成的内容**（例如，最近五条评论） 2\. 图像、标题、链接和**纯文本**

存储模块的最佳方式是什么，可以在后端轻松编辑它们？我应该将 php/mysql 部分存储在单独的 php 文件中还是 mysql 中？

任何有关制作良好后端模块解决方案的提示将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:49:27.227

您应该将文件存储在文件系统中，并将数据存储在数据库中。这就是它的设计方式。如果将文件放入数据库，您可能会减慢速度。

# java - Java反复将双打写入txt文件

> ID：13461025
> 
> 赞同：1
> 
> 时间：2012-11-19T19:47:44.053
> 
> 标签：java, file-io

我正在尝试将随机创建的双打写入 txt 文件，但我不知道这样做的最佳方法，因为必须重复将双打写入文件

这是我的生成器代码

```
public class DataGenerator 
{
  public static void main(String[] args) 
  {
    // three double values are read from command line m, b, and num
    double m = Double.parseDouble(args[0]); // m is for slope
    double b = Double.parseDouble(args[1]); // b is y-intercept
    double num = Double.parseDouble(args[2]); // num is number of x and y points to create
    double x = 0;
    double y = 0;
    for (double count = 0; count < num; count++) // for loop to generate x and y values
    {
      x = Math.random() * 100;
      y = (m * x) + b; // slope intercept to find y
      System.out.printf("\n%f , %f", x, y);
      System.out.println();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:53:48.647

你的代码说明了一切，你只需要用`System.out`另一个`PrintStream`排入文件的代码替换：

```
PrintStream out = new PrintStream(new FileOutputStream("myfile.txt")); 
```

然后将每个替换`System.out`为 just `out`。

与 不同的`System.out`是，完成后您还必须`close`全力以赴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:54:09.653

您可以使用许多东西来写入文件。它们基本上都以与 .. 相同的方式工作`System.out`。它们只是连接到文件而不是`stdout`. 我建议看一下`PrintWriter`IIRC，它是此类任务中较容易完成的任务之一

```
PrintWriter fout= new PrintWriter("OutputFile.txt");
//....
fout.printf("\n%f , %f",x,y);
fout.println();
//....
fout.close(); 
```

# c++ - 为什么标准区分直接列表初始化和复制列表初始化？

> ID：13461027
> 
> 赞同：40
> 
> 时间：2012-11-19T19:47:51.650
> 
> 标签：c++, c++11, language-lawyer, list-initialization

我们知道这`T v(x);`被称为*直接初始化*，而`T v = x;`被称为*复制初始化*，这意味着它将构造一个临时`T`的`x`，将被复制/移动到`v`（很可能被省略）。

对于列表初始化，标准根据上下文区分两种形式。`T v{x};`称为*直接列表初始化*，而`T v = {x};`称为*复制列表初始化*：

`§8.5.4 [dcl.init.list] p1`

> [...] 列表初始化可以发生在直接初始化或复制初始化上下文中；直接初始化上下文中*的列表初始化称为直接列表*初始化，复制初始化上下文中的列表初始化称为*复制列表初始化*。[...]

但是，整个标准中只有两个参考文献。对于直接列表初始化，在创建`T{x}`( `§5.2.3/3`) 之类的临时对象时会提到它。对于复制列表初始化，它用于返回语句中的表达式，如`return {x};`( `§6.6.3/2`)。

现在，下面的代码片段呢？

```
#include <initializer_list>

struct X{
  X(X const&) = delete; // no copy
  X(X&&) = delete; // no move
  X(std::initializer_list<int>){} // only list-init from 'int's
};

int main(){
  X x = {42};
} 
```

通常，从`X x = expr;`模式来看，我们预计代码无法编译，因为移动构造函数`X`定义为`delete`d。但是，最新版本的 Clang 和 GCC 可以很好地编译上面的代码，并且在挖掘了一下（并找到上面的引用）之后，这似乎是正确的行为。该标准只定义了整个列表初始化的行为，除了上述几点之外，根本不区分这两种形式。好吧，至少据我所知，无论如何。

所以，再次总结我的问题：

**如果它们（显然）做完全相同的事情，那么将列表初始化分成两种形式有什么用？**

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-19T20:10:24.397

因为他们*不做*完全相同的事情。如 13.3.1.7 [over.match.list] 中所述：

> 在复制列表初始化中，如果选择了显式构造函数，则初始化格式错误。

简而言之，您只能在复制列表初始化上下文中使用隐式转换。

这是明确添加的，以使统一初始化不，嗯，统一。是的，我知道这听起来很愚蠢，但请耐心等待。

2008 年，[发布了 N2640 (PDF)](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2008/n2640.pdf)，看看统一初始化的当前状态。`T{...}`它专门研究了直接初始化 ( ) 和复制初始化 ( )之间的区别`T = {...}`。

总而言之，担心的是`explicit`构造函数实际上会变得毫无意义。如果我有某种类型`T`，我希望能够从整数构造，但我不想要隐式转换，我将构造函数标记为显式。

然后有人这样做：

```
T func()
{
  return {1};
} 
```

如果没有当前的措辞，这将调用我的`explicit`构造函数。那么如果构造函数`explicit`没有太大变化，那么它有什么好处呢？

使用当前的措辞，您至少需要直接使用名称：

```
T func()
{
  return T{1};
} 
```

# mysql - 如何在 mySQL 中创建一个空的 VIEW

> ID：13461028
> 
> 赞同：3
> 
> 时间：2012-11-19T19:47:57.987
> 
> 标签：mysql, sql, view

我正在尝试使用我定义的列在 mySQL 中创建一个空视图。

即我想要一个包含列的视图：年龄、id、性别，但有 0 行。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T20:37:09.353

这是给你的一个例子：

```
mysql> create or replace view v_test as 
    -> select 99 as age, 
    ->   2147483647 as id, 
    ->   'F' as gender 
    -> from dual 
    -> where false;
Query OK, 0 rows affected (0.04 sec)

mysql> desc v_test;
+--------+------------+------+-----+---------+-------+
| Field  | Type       | Null | Key | Default | Extra |
+--------+------------+------+-----+---------+-------+
| age    | int(2)     | NO   |     | 0       |       |
| id     | bigint(10) | NO   |     | 0       |       |
| gender | varchar(1) | NO   |     |         |       |
+--------+------------+------+-----+---------+-------+
3 rows in set (0.01 sec)

mysql> select * from v_test;
Empty set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-19T19:49:58.973

为什么你会想要这样做超出了我的范围：

```
CREATE VIEW foo AS SELECT NULL AS age, NULL AS id, NULL AS gender WHERE FALSE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T19:50:48.267

尝试从此选择语句定义您的视图：

```
SELECT 5 as age, 10 as id, 'M' as gender
WHERE age = 0 
```

这将为您提供正确的列类型

# jsf - 如何使用 Spring Security 3.1.3 和 JSF 创建一个 Bean 来验证我的登录表单

> ID：13461030
> 
> 赞同：1
> 
> 时间：2012-11-19T19:48:05.550
> 
> 标签：jsf, login, spring-security

在过去的几天里，我一直在疯狂地尝试使用 Spring Security 创建一个自定义登录页面，但是我没有找到一个可行的示例，也没有自己弄清楚如何使用 Spring 验证表单，相信我，我尝试了一切，我可能在谷歌上找到每个相关的例子。

表单加载正常，一切就绪，当我单击“登录”按钮时，我只需要让 Spring Security 对数据库的凭据进行身份验证。

让我把它分成几部分来解释。

所以，我有一个登录表单：

```
<h:form>
 <p:panelGrid columns="2">

    <p:outputLabel for="j_username" value="Usuário:"/>
    <p:inputText id="j_username"
                 title="Preencha com o seu usuário (login)."
                 required="true"
                 requiredMessage="O campo usuário é obrigatório."
                 value="#{loginBean.usuario}"/>

     <p:outputLabel for="j_password" value="Senha:"/>
     <p:password id="j_password"
                 title="Preencha com a sua senha."
                 required="true"
                 requiredMessage="O campo senha é obrigatório."
                 value="#{loginBean.senha}"/>

      <p:inputText type="hidden"/>

      <p:panelGrid columns="2" styleClass="customPanelgridTable">
       <p:outputLabel for="_spring_security_remember_me" value="Lembrar senha? "/>
         <p:selectBooleanCheckbox id="_spring_security_remember_me"
                                  value="#{loginBean.lembrar_me}"/>
      </p:panelGrid>

      <f:facet name="footer">
        <p:commandButton value="Entrar"
                         actionListener="#{loginBean.doLogin}"/>
      </f:facet>
 </p:panelGrid>
</h:form> 
```

我需要方法“doLogin”来使用 Spring Security 验证凭据。

我的登录豆：

```
@Named
@SessionScoped
public class LoginBean implements Serializable {

private static final long serialVersionUID = 1L;

private String usuario, senha;
private boolean lembrar_me = false;

public String getUsuario() {
    return usuario;
}

public void setUsuario(String usuario) {
    this.usuario = usuario;
}

public String getSenha() {
    return senha;
}

public void setSenha(String senha) {
    this.senha = senha;
}

public boolean isLembrar_me() {
    return lembrar_me;
}

public void setLembrar_me(boolean lembrar_me) {
    this.lembrar_me = lembrar_me;
}

public void doLogin() {
  //Spring validation...
}

} 
```

我怎样才能做到这一点？

应用程序上下文.xml

```
<http security="none" pattern="/javax.faces.resource/**" />
<http security="none" pattern="/static/**"/>
<http auto-config="true" use-expressions="true"
                  access-denied-page="/public/login.xhtml">

    <intercept-url pattern="/public/**" access="permitAll"/>
    <intercept-url pattern="/secure/**" access="hasRole('ROLE_USER')"/>
    <intercept-url pattern="/login.xhtml" access="permitAll"/>
    <intercept-url pattern="/**" access="hasRole('ROLE_USER')"/>
    <form-login login-page="/public/login.xhtml"
                authentication-failure-url="/public/login.xhtml?erro=true"
                default-target-url="/secure/secure.xhtml"/>

</http>

<beans:bean id="dataSource" 
            class="org.springframework.jdbc.datasource.DriverManagerDataSource" >

    <beans:property name="url" value="jdbc:mysql://localhost:3306/gde" />
    <beans:property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <beans:property name="username" value="root" />
    <beans:property name="password" value="" />
</beans:bean>

<authentication-manager>
    <authentication-provider>

        <user-service>
            <user name="teste" password="teste" authorities="ROLE_USER"/> 
        </user-service>

        <jdbc-user-service data-source-ref="dataSource"
                           users-by-username-query="SELECT USUARIO as username, ISATIVO as enabled FROM usuario WHERE USUARIO=?"

                           authorities-by-username-query="SELECT USUARIO as username, AUTORIZACOES as authority FROM usuario_tipo_usuario WHERE USUARIO=?"
        />
    </authentication-provider>
</authentication-manager> 
```

非常感谢任何帮助，我坚持了好几天！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:59:00.610

由于您想要primefaces的漂亮ajax功能，您不能使用spring security提供的UsernamePasswordAuthenticationFilter。尝试直接调用[AuthenticationManager](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/authentication/AuthenticationManager.html)，然后（[身份验证管理器和命名空间](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-auth-manager)解释了如何获取对它的引用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:20:41.117

您不需要 bean 来验证 spring 安全登录。

要自定义表单登录，form-login 元素是正确的位置，您确实可以将 JSF 页面指定为`login-page`. 但是，该登录页面必须提供 spring 安全登录页面的预期行为。要了解这种行为，请阅读[form-login 元素的参考文档，](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/appendix-namespace.html#nsa-form-login)其中列出了以下可选参数：

> **登录处理 url**
> 
> 映射到 UsernamePasswordAuthenticationFilter 的 filterProcessesUrl 属性。默认值为“/j_spring_security_check”。
> 
> **密码参数**
> 
> 包含密码的请求参数的名称。默认为“j_password”。
> 
> **用户名参数**
> 
> 包含用户名的请求参数的名称。默认为“j_username”。

也就是说，spring security 期望凭证作为 http post 的请求参数传递到特定的 url。您的 JSF 表单违反了该约定：它被发布到错误的 URL（因为您使用 ah:form，它希望 JSF 处理表单提交请求）。尝试改用 html `<form>`。

[至于如何从数据库加载用户详细信息，参考文档在Using other Authentication Providers](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-auth-providers)中对此进行了介绍。

# import - STS 无法将现有文件系统导入工作区

> ID：13461032
> 
> 赞同：0
> 
> 时间：2012-11-19T19:48:09.230
> 
> 标签：import, filesystems, directory, sts-springsourcetoolsuite

我遵循以下步骤。

1.  启动 STS（从已创建的名为“Servers”的默认项目开始）
2.  右键单击包资源管理器，单击导入 -> 常规 -> 文件系统
3.  选择目录 -> 单击全选

在这一步之后，我应该能够将我的目录导入“工作区”，而不是 STS“强制”我将文件系统导入现有项目。

此外，如果我尝试在顶级工作区中创建一个文件夹，STS 也不允许我这样做。

我需要能够将整个目录导入工作区而不是项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:04:17.917

您只能将文件系统导入现有项目，并且只能在现有项目中创建文件夹。顶层仅用于项目。

您首先需要做的是创建一个新项目，该项目的外部位置植根于您要导入的文件系统。该项目将在那里创建并自动包含所有子文件夹。

或者，如果根目录已经是 Eclipse 项目，请执行以下操作：

```
File -> Import -> Existing projects into workspace -> Select root directory 
```

这有点令人困惑，您不能将一堆文件和文件夹作为一个项目导入，但这就是 Eclipse 自诞生以来的工作方式（我认为时间从 2000 年开始）。

# javascript - 动态服务器端移动模板 - 存在吗？

> ID：13461040
> 
> 赞同：2
> 
> 时间：2012-11-19T19:48:37.527
> 
> 标签：javascript, templates, rest, template-engine, mustache

我想知道我是否可以就这个开发项目是否是新的和有用的，或者它是否已经完成过获得一些意见。

我一直在研究一个想法，即我必须为“动态服务器端移动模板”解决方案创建一个预制解决方案。在我之前的工作中，我的任务是维护多个移动客户端，每个客户端都有一个自定义 UI 皮肤。通常，当客户端请求 UI 更改或更新时，这最终需要大量的开发人员时间。我的目标是设计一个需要最少开发人员输入并允许设计人员完全控制 UI 的系统，包括：

*   随时更新内容的能力
*   版本控制（将新模板设计推送到客户端，回滚到以前的版本）
*   设计更改无需开发人员输入

我正在头脑风暴的是一个服务器端服务模块，它能够使用 RESTFul Web 服务按需提供模板。服务器将提供一个 HTML 输入函数，它将任何 HTML 页面分解为组件树。然后将组件树保存到数据库并显示以供确认和编辑。

服务器将负责：

*   将任何 HTML 页面分解为其模板组件
    *   路径引用的 JS、CSS 等第 3 方文件
*   显示 HTML 组件树以进行调试和编辑
*   使用版本控制将模板组件详细信息保存在数据库中
*   通过 RESTFul API 按需提供模板（通过 JSON 或 XML）

客户端可以使用[mustache](http://mustache.github.com/ "胡子")编写，并使用各种分支（iOS、Android 等）轻松移植到各种移动设备。该瘦客户端将简单地向服务器指定的配置 URI 发送请求。URI 将使用 mustache 语法返回所有模板信息，这将用于按需动态构建 UI。客户端还可以保存 UI 配置并仅在发布新版本时重新加载。

总而言之，客户将负责：

*   从预定义的 URL 请求模板数据（JSON 或 XML）
*   使用 mustache 渲染模板，假设版本尚未保存。

如果有需求或需要，我很乐意将其作为一个开源项目开始，而且我不会重新发明轮子。到目前为止，我发现了类似的概念，但似乎没有一个是完全动态的。

# c++ - 如何降低最低值？

> ID：13461049
> 
> 赞同：2
> 
> 时间：2012-11-19T19:49:00.690
> 
> 标签：c++, sorting

我对 C++ 很陌生，我需要帮助找出删除随机生成的一组数字的最小值的代码。到目前为止，这是我的代码：

```
 //Create array and populate the array with scores between 55 and 10
//  Drop lowest Score 

#include <iostream>
#include <cstdlib>//for generating a random number
#include <ctime>
#include <iomanip>
#include <algorithm>
#include <vector>

using namespace std;

//function prototype
int *random (int);

int main()
{   int *numbers; //point to numbers
    //get an array of 20 values
    numbers = random(20);
    //display numbers
    for (int count = 0; count < 20; count++)
        cout << numbers[count] << endl;
    cout << endl;

system("pause");
    return 0;
}

//random function, generates random numbers between 55 and 100 ??

int *random(int num)
{   int *arr; //array to hold numbers
    //return null if zero or negative
    if (num <= 0)
        return NULL;
    //allocate array
    arr = new int[num];
    //seed random number generator
    srand(time (0));
    //populate array
    for (int count = 0; count < num; count++)
        arr[count] = (rand()%(45) +55);
    //return pointer

    //
    return arr;
} 
```

对于这段代码，在函数返回随机数后，我将如何排序或找到最低分数以将其丢弃？

```
 int main()
    {   int *numbers; //point to numbers
        //get an array of 20 values
        numbers = random(20);
        //display numbers
        for (int count = 0; count < 20; count++)
            cout << numbers[count] << endl;
        cout << endl;

    system("pause");
        return 0;
    } 
```

感谢您的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T19:58:03.890

通常，要找到数组中的最小值，您可以遵循以下伪算法：

```
min = array[0] // first element in array
for (all_values_in_array)
{
    if (current_element < min)
        min = current_element
} 
```

但是，您不能从静态数组中“删除”一个值。您可以考虑使用动态容器（例如向量），或者将最小值与最后一个值交换，并假装数组的大小小于 1。另一个低级选项是在堆上创建自己的动态数组，但是，这可能比您要寻找的要复杂。

使用向量会容易得多。要删除最低的元素，您只需[按相反的顺序排序](https://stackoverflow.com/questions/9025084/sorting-a-vector-in-descending-order)，然后[删除最后一个元素](http://www.cplusplus.com/reference/stl/vector/pop_back/)。就个人而言，我建议使用向量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T20:07:50.553

找到最小元素的明显方法是使用`std::min_element()`. 你可能想用它`std::vector<T>`来保存你的元素，但这不是绝对必要的。您可以像这样从数组中删除最小值：

```
if (count) {
    int* it = std::min_element(array, array + count);
    std::copy(it + 1, array + count--, it);
} 
```

假设您合理使用`std::vector<int>`，代码将如下所示：

```
if (!array.empty()) {
    array.erase(std::min_element(array.begin(), array.end()));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:39:36.943

对数组进行升序排序。
最小值将位于数组的开头。

或者对数组进行降序排序并删除最后一个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-09T04:03:41.613

在我看来，解决您的问题的最佳解决方案是使用**链表**来存储数字，这样您就可以使用复杂度为**O(N) = N**的算法来找到列表中的最小元素，它类似于查找user1599559或Mikael Lindqvist给出的方法，您只需将指向存储它的链表中的Item（ **ItemX ）的指针与最小值一起存储，然后消除****Item X**只需告诉**Item X - 1**指向**Item X + 1**和项目 X 分配的空闲内存

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T20:51:50.553

除了其他人所说的，您还可以选择使用类似的东西，也许是 std::list。它内置了排序功能，还提供了为两个元素定义自己的比较函数的能力。（虽然对于整数，这不是必需的）

首先，我通常使用它将包含的元素类型来定义向量或列表。接下来，对于列表，我 typedef 一个迭代器——尽管这两个都只是为了方便，但都不是必需的。

一旦你有了一个包含整数的列表，只需将它们添加到其中。习惯和不需要这样做意味着我将使用 .push_back 添加每个新元素。完成后，我将对列表进行排序，获取具有最低值的元素（也是最低的“索引” - 第一项），最后，我将删除该项目。

一些需要思考的代码：

```
#include <cstdio>
#include <cstdlib>
#include <list>

using namespace std;

typedef list<int> listInt;
typedef listInt::iterator listIntIter;

bool sortAsc(int first, int second)
{
    return first < second;
}

bool sortDesc(int first, int second)
{
    return first > second;
}

int main (void)
{
    listInt mList;
    listIntIter mIter;
    int i, curVal, lowestScore;

    for (i=1; i<=20; i++)
    {
        curVal = rand()%45 + 55;
        mList.push_back(curVal);
        printf("%2d. %d\n", i, curVal);
    }
    printf("\n");

    mList.sort();
//    mList.sort(sortAsc);  // in this example, this has the same effect as the above line.
//    mList.sort(sortDesc);

    i = 0;
    for (mIter=mList.begin(); mIter!=mList.end(); mIter++)
        printf("%2d. %d\n", ++i, *mIter);
    printf("\n");

    lowestScore = mList.front();
    mList.pop_front();
    printf("Lowest score: %d\n", lowestScore);

   return 0;
} 
```

哦，使用 printf 而不是 cout 的选择也是经过深思熟虑的。有几个原因。

1.  `printf("%d\n", someVar);` 个人喜好——我觉得打字比打字容易`cout << someVar << endl;`
2.  大小——windows下用gcc构建的，这个例子的release-mode exe是21kb。使用 cout，它跃升至 459kb - 功能相同！增加 20 倍的尺寸却没有任何收益？不，谢谢！！

这是一个 std::list 参考：[http ://www.cplusplus.com/reference/stl/list/](http://www.cplusplus.com/reference/stl/list/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T20:15:17.090

首先找到最小数字的索引：

```
int lowest_index=0, i;
for (i=0; i<20; i++)
    if (arr[i]<arr[lowest_index])
        lowest_index=i; 
```

现在我们知道了索引，移动该索引之后的数字以覆盖我们找到的索引。要移动的数字数量将是 19 减去找到的索引。即，如果索引 2（第三个数字，因为第一个在索引 0 处）最低，则在该索引之后有 17 个数字，这就是我们需要移动的数量。

```
memcpy(&arr[lowest_index],&arr[lowest_index+1],sizeof(int)*(19-lowest_index)) 
```

祝你好运！

# html - 将信息放在表格 aspx 中

> ID：13461050
> 
> 赞同：0
> 
> 时间：2012-11-19T19:49:02.247
> 
> 标签：html, asp.net, webforms

我有这个 ASPX 代码：

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.OleDb;

public partial class Default4 : System.Web.UI.Page
{int i;
    public string strAdmin;
    public string strPass;
    public string strLname;
    public string strEmail;
    public string strFname;
    public string str;

    protected void Page_Load(object sender, EventArgs e)
    {
        string dbPath = Server.MapPath(@"App_Data") + "/my_site.mdb";
        string connectionString = @"Data Source='" + dbPath + "';Provider='Microsoft.Jet.OLEDB.4.0';";
        OleDbConnection con = new OleDbConnection(connectionString);
        con.Open();
        string QueryString = "SELECT * FROM tbl_users";
        OleDbCommand cmd = new OleDbCommand(QueryString, con);
        OleDbDataAdapter da = new OleDbDataAdapter(cmd);
        DataSet ds = new DataSet();
        da.Fill(ds, "tbl");
        con.Close();
        strt = 
        for (i = 0; i < ds.Tables[0].Rows.Count; i++)
        {

            strFname = ds.Tables[0].Rows[i]["first_name"].ToString();
            strLname = ds.Tables[0].Rows[i]["last_name"].ToString();
            strEmail = ds.Tables[0].Rows[i]["user_email"].ToString();
            strPass = ds.Tables[0].Rows[i]["user_password"].ToString();
            strAdmin = ds.Tables[0].Rows[i]["is_admin"].ToString();
            str += String.Format("{0}&nbsp{1}&nbsp{2}&nbsp{3}&nbsp{4}", strFname, strLname, strEmail, strPass, strAdmin);
        }
    }
} 
```

如何在表格中显示此信息以便它更有用？
（我应该在这里添加哪些 html 标签？在哪里？）我希望得到帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:55:07.597

正如@David 提到的，您***应该***为此类功能将数据绑定到 DataGrid；但是，如果您确实希望将该数据集呈现为 html 表（出于各种原因，例如样式、密集的 javascript 等），我使用此函数返回数据集的 html 表示形式，然后用返回的 html 填充 div。

```
 public static string BuildHTMLTable(DataSet dataSet)
    {
        var table = dataSet.Tables[0];
        var tableString = "<table>";

        tableString += "<thead>";

        for (var i = 0; i < table.Columns.Count; i++)
        {
            tableString += "<th>" + table.Columns[i].ColumnName + "</th>";
        }
        tableString += "</thead>";
        tableString += "<tbody>";

        for(var x = 0; x < table.Rows.Count; x++)
        {
            tableString += "<tr>";

            for (var y = 0; y < table.Columns.Count; y++)
            {
                tableString += "<td>";
                tableString += table.Rows[x][y];
                tableString += "</td>";
            }

            tableString += "</tr>";
        }

        tableString += "</tbody>";
        tableString += "</table>";

        return tableString;
    } 
```

# windows - 带有网络语言的原生 Windows 应用程序的排序？

> ID：13461055
> 
> 赞同：0
> 
> 时间：2012-11-19T19:49:23.483
> 
> 标签：windows, web-applications, native, appcelerator

所以我现在在互联网上搜索了大约 1 小时，但找不到任何好的英特尔，所以我在这里问！:-)

我正在寻找像[Appcelerator](http://www.appcelerator.com/)（用于移动平台）或 Adob​​e Air 这样的解决方案，以便仅使用我的网络编码技能来制作真正的原生 Windows 应用程序。

我的意思是什么？仅使用 HTML(5)、CSS(3)、JS、JQuery + 任何其他 JS 库为 Windows 7 (8) 构建一个完整的“原生”应用程序。

当然，我更喜欢最终用户不必安装大量运行时的东西。

有任何想法吗？

最好的问候帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:33:53.137

您可以使用 HTML、CSS 和 JavaScript 开发适用于 Windows 8 的 Windows 应用商店应用程序。这包括 jQuery 和所有其他闪亮的 JavaScript 库。

# .net - linqpad 和 mongodb

> ID：13461060
> 
> 赞同：11
> 
> 时间：2012-11-19T19:49:41.407
> 
> 标签：.net, linq, mongodb, linqpad

是否可以将 linqpad 与 MongoDB 一起使用？或任何其他允许您使用 linq 在 mongo 上运行即席查询的工具。

我尝试使用 shell 以 json 格式编写查询，但括号、引号、冒号**让我发疯**。

如果没有工具，我将求助于用 c# 编写查询并编译/运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T20:04:01.553

似乎其他人能够做到这一点，因为这个问题的选择答案表明：[即席查询/更新是否开始扼杀您使用 MongoDB 的生产力？](https://stackoverflow.com/questions/7303333/are-adhoc-queries-updates-starting-to-kill-your-productivity-with-mongodb?answertab=active#tab-top)

这是一个展示如何设置它[的教程。](http://www.rkconsulting.com/blog/mongodb-with-linqpad)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T03:19:57.900

我为 LinqPad 编写了一个适配器以使用官方 10gen 驱动程序。它在我的 github 上作为一个开源项目提供：

[https://github.com/gburgett/LinqPad-mongo-driver](https://github.com/gburgett/LinqPad-mongo-driver)

它允许您将集合映射到从您自己的 .dll 程序集中加载的 C# 类型。然后，这些集合将显示为`MongoCollection<TColl>`您可以使用 LINQ 查询的类型属性。它甚至会在“SQL”选项卡中公开已执行查询的 JSON。

我已经在我的办公室使用它一段时间了，并且随着时间的推移增加了对我们办公室所需的各种用途的支持，例如自定义序列化程序和其他每个应用程序域初始化一次。

# php - 重新排序正则表达式匹配

> ID：13461070
> 
> 赞同：2
> 
> 时间：2012-11-19T19:50:11.300
> 
> 标签：php, regex

有没有办法让匹配模式改变顺序？例如，如果您有一个带有字母数字和 using 的字符串`preg_match_all()`，并且您希望生成的匹配数组在字母之前有数字。有没有办法在正则表达式本身中指定它？

所以`"aaa-111"`会导致匹配

```
array(0 => '111', 1 => 'aaa'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T19:59:56.603

也许命名的捕获组会有所帮助。例子：

```
preg_match('/(?<alphapart>[a-z]+)-(?<numpart>[0-9]+)/', 'aaa-111', $matches); 
```

$匹配：

```
array('alphapart' => 'asd', 'numpart' => '111') 
```

这样，您可以通过名称而不是匹配它们的任何顺序索引来引用匹配项。

编辑：为了准确起见，我想注意 $matches 实际上也会按索引包含匹配项，因此实际的 $matches 将是：`array(5) { [0]=> string(7) "aaa-111" ["alphapart"]=> string(3) "aaa" [1]=> string(3) "aaa" ["numpart"]=> string(3) "111" [2]=> string(3) "111" }`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T20:01:14.340

正则表达式中组的顺序取决于它们在正则表达式和字符串中的位置。改变顺序会让人很困惑。

您可以做的是使用[“命名组”](http://www.regular-expressions.info/named.html)。

```
/(?P<letters>\w*)-(?P<digits>\d*)/ 
```

该数组仍将保持相同的顺序，但是，您可以使用它`$matches['digits']`来轻松获取数字。

演示：http: [//ideone.com/3tRJLZ](http://ideone.com/3tRJLZ)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T19:56:31.630

是的你可以。您可以使用不推动“光标”的前瞻，因此您可以先匹配最后一部分，然后再匹配第一部分。它适用于 (?=regex)

这有效：

```
(?=\w+\-(\d+))(\w+)\-\d+ 
```

但也会在索引 0 处给出完整匹配。像 ["aaa-111", "111", "aaa"] 有问题吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T19:54:49.950

我不相信有。正则表达式不是为了排序而设计的。不过，您可以设置两个不同的正则表达式来检查每个模式。此代码将按照您的要求以 num/alpha 顺序回显两个字符串：

```
<?php
header('Content-Type: text/plain');

$string1 = 'aaa-123';
$string2 = '123-aaa';

echo 'String 1: '.$string1."\n";
echo 'String 2: '.$string2."\n";

$pattern1 = '/([\d]+)-([a-z]+)/i';
$pattern2 = '/([a-z]+)-([\d]+)/i';

echo 'Result 1: ';
if(preg_match($pattern1, $string1, $matches))
{
    echo $matches[1].' '.$matches[2]."\n";
}
if(preg_match($pattern2, $string1, $matches))
{
    echo $matches[2].' '.$matches[1]."\n";
}

echo 'Result 2: ';
if(preg_match($pattern1, $string2, $matches))
{
    echo $matches[1].' '.$matches[2]."\n";
}
if(preg_match($pattern2, $string2, $matches))
{
    echo $matches[2].' '.$matches[1]."\n";
}
?> 
```

结果输出是：

```
String 1: aaa-123
String 2: 123-aaa
Result 1: 123 aaa
Result 2: 123 aaa 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-19T19:53:56.937

如果您希望数字首先出现，则需要自己对数组进行排序。

`array_sort()`会... 为您解决。

# regex - 字符串末尾有不同规则的正则表达式模式？

> ID：13461081
> 
> 赞同：0
> 
> 时间：2012-11-19T19:51:11.563
> 
> 标签：regex

模式应该匹配带有大写字母的单词。

单词是分开的`[ ]+`

但最后一个词不应该`[ ]`在它之后。

字数没有限制。

我设法做到了：（[http://regexr.com?32s1h](http://regexr.com?32s1h)）

```
^([A-Z]{1}[a-z]+([a-z]+)?[ ]+)+$ 
```

这是为`Xav Tvc Dcc_`//注意最后一个空格工作

但不是为了`Xav Tvc Dcc`

我怎样才能修复我的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:54:01.253

要求一个单词末尾*不带空格：*

```
^([A-Z]{1}[a-z]+([a-z]+)?[ ]+)*[A-Z]{1}[a-z]+([a-z]+)?$ 
```

快速 PowerShell 测试：

```
PS Home:> 'Xav Tvc Dcc ','Xav Tvc Dcc' -match '^([A-Z]{1}[a-z]+([a-z]+)?[ ]+)*[A-Z]{1}[a-z]+([a-z]+)?$'|%{"<$_>"}
<Xav Tvc Dcc> 
```

如果您担心更改正则表达式可能引入的错误，您可以随时构建它：

```
var word = "([A-Z]{1}[a-z]+([a-z]+)";
var regex = string.Format("^({0}?[ ]+){0}$", word); 
```

或对于您使用的任何语言都类似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:11:27.160

如果最后一个单词后面的空格是可选的，请使用正则表达式模式

```
^(?:[A-Z][a-z]*(?:[ ]+|$))+$ 
```

...如果最后一个单词后面不应该有空格，那么请使用

```
^(?:[A-Z][a-z]*(?:[ ]+(?=.)|$))+$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:13:58.907

为什么不做这样的事情：

```
^([A-Z]{1}[a-z]+\s?)* 
```

[在这里](http://regexr.com?32s20)显示

然后运行修剪操作以删除尾随空格？

# c++ - 重载 + 运算符

> ID：13461082
> 
> 赞同：3
> 
> 时间：2012-11-19T19:51:13.110
> 
> 标签：c++, operator-overloading

我正在尝试熟悉 C++ 中的运算符。我想我会用一个简单的向量加法来做到这一点。不幸的是，我似乎遇到了一些问题。我的班级定义如下：

```
#ifndef _MVEC_H_
#define _MVEC_H_

#include "Error.h" //I define things like throw(message) here, it works and is not the issue

class MVec {
        private:
                double vec[3];
        public:
                MVec();
                MVec(double &);
                MVec(double *);
                MVec(MVec &);
                MVec & operator=(MVec &);
                inline double & operator[](const int i);
                inline const double & operator[](const int i) const;
                MVec operator+(const MVec &) const;
                ~MVec();
};

MVec::MVec() {}

MVec::MVec(double &a) {
        for(int i = 0; i < 3; i++)
                vec[i] = a;
}

MVec::MVec(double *a) {
        for(int i = 0; i < 3; i++)
                vec[i] = *a++;
}

MVec::MVec(MVec &rhs) {
        for(int i = 0; i < 3; i++)
                vec[i] = rhs[i];
}

MVec & MVec::operator=(MVec &rhs) {
        if(this != &rhs)
                for(int i = 0; i < 3; i++)
                        vec[i] = rhs[i];

        return *this;
}

inline double & MVec::operator[](const int i) {
        #ifdef _CHECKBOUNDS_
        if(i < 0 || i >= 3)
                throw("Subscript out of bounds");
        #endif

        return vec[i];
}

inline const double & MVec::operator[](const int i) const {
        #ifdef _CHECKBOUNDS_
        if(i < 0 || i >= 3)
                throw("Subscript out of bounds");
        #endif

        return vec[i];
}

MVec MVec::operator+(const MVec &vec1) const {
        MVec ans;

        for(int i = 0; i < 3; i++)
                ans[i] = vec[i] + vec1[i];

        return ans;
}

MVec::~MVec() {
        delete[] vec;
}

#endif 
```

[] 运算符似乎按预期工作。不幸的是，向量加法运算符没有。具体来说，当我运行代码时：

```
#include "Error.h"
#include "MVec.h"
#include <cstdlib>
#include <iostream>

int main(int argc, char *argv[]) {
        MVec a, b, c;
        a[0] = 1; a[1] = 2; a[2] = 3;
        b[0] = 5.9906; b[1] = 72.1139; b[2] = 83.1324;

        //c = a + b;

        std::cout << (a + b)[0] << std::endl;
        std::cout << (a + b)[1] << std::endl;
        std::cout << (a + b)[2] << std::endl;

        exit(0);
} 
```

当我取消注释行 c = a + b; 我得到一个编译器错误：

> 'c = MVec::operator+(const MVec&) const(((const MVec&)((const MVec*)(& b))))'中的 'operator=' 不匹配

当我注释掉它时，我在第一个 std::cout 之后得到一个 glibc 检测到的错误。据推测，我在 operator+ 函数中创建的临时变量做错了。不幸的是，我（很）不够聪明，无法弄清楚是什么。对此的任何和所有见解都会非常有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T19:55:20.670

您需要在复制构造函数中`const`引用 to`MVec`以便能够将其与临时对象一起使用：

```
MVec(const MVec &); 
```

这同样适用于赋值运算符，以及采用 a 的构造函数`double`：

```
MVec(const double &); // or no reference, MVec(double);
MVec& operator=(const MVec& rhs); 
```

您还应该`delete [] vec`从析构函数中删除 ，因为`vec`它不是动态分配的。这是 glibc 错误的可能原因。

现在，为了表达如

```
SomeVec = 1.0 + SomeOtherVec; 
```

您需要将 声明`operator+`为非成员函数：

```
MVec operator+(const MVec& lhs, const MVec& lhs); 
```

这将允许在 LHS 和 RHS 上进行隐式*转换*。一般来说，将这些类型的运算符作为非成员函数是一个好主意，以保证 LHS 和 RHS 操作数之间的对称性。

另一方面，根本不允许隐式转换可能更有意义`double`。您可以通过制作相关的构造函数来实现这一点`explicit`：

```
explicit MVec(double); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T20:00:02.120

编译时错误很容易解释：您的赋值运算符需要一个非`const`引用作为参数，但您不能将非`const`引用绑定到临时变量，因为它是从您的`operator+()`. 一种天真的解决方法是让操作员`const&`取而代之。但是，您实际上根本不需要定义复制赋值运算符！编译器生成的复制构造、复制赋值和析构函数都很好。你可以删除它们，你会过得更好。

特别是删除析构函数也可以解决您的其他问题：您`delete[]`在析构函数中使用尚未分配的内存！你不应该这样做。也就是说，如果你修复了你的析构函数，它将是空的，也就是说，你也可以删除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T19:56:53.207

这

```
MVec MVec::operator+(const MVec &vec1) const {
    MVec ans;

    for(int i = 0; i < 3; i++)
            ans[i] = vec[i] + vec1[i];

    return ans;
} 
```

应使用 this 定义定义为非成员函数 `MVec operator+(const MVec &vec1, const MVec &vec2) const`。那么您需要修改以添加 vec1[i] + vec2[i]，假设您的目标是添加两个向量中的每个值。

此外，您应该添加边界检查。如果任何一个向量的长度小于三，你就会崩溃。您应该添加到较短向量的长度，或者在所有长度都不相同时不添加它们。例子

```
 int loopVar = 0;
 if (vec1.length() > vec2.length())
     loopVar = vec2.length();
 else
     loopVar = vec1.length();

 for (int i = 0; i < loopVar; i++)
      ans[i] = vec1[i] + vec2[i]; 
```

# gcc - 使用 arm-none-eabi-gcc 从 cpp 生成 elf 文件

> ID：13461084
> 
> 赞同：3
> 
> 时间：2012-11-19T19:51:17.727
> 
> 标签：gcc, arm, code-coverage, eabi

我想对嵌入式目标上的 c++ 源代码进行代码覆盖。基本思想是，生成一个精灵以及使用 gcc 打开的 -frofile-arcs -ftest-coverage。将其下载到 ARM 设备上，然后收集数据以使用 gcov 分析代码覆盖率。

如何使用 arm-none-eabi-gcc 命令生成 elf 文件。我已经设置了 GNU ARM 工具链并设置了 env 变量。我可以使用 arm-none-eabi-g++ -c -mthumb -mcpu=cortex-m3 -fprofile-arcs -ftest-coverage filename.cpp -o filename.elf 吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-17T07:45:25.193

不，你需要做的更多。你需要链接 gcov 库。这可以与 -lgov 和 -fprofile-arcs 链接器标志一起使用，希望您的链接器脚本具有 .got 和 .plt 部分。

以上将仅生成 .gcno 文件。.gcda 文件在运行时在硬件内部生成。等待应用程序退出或添加您自己的包装器以创建 .gcda 文件。

最后，您需要找到一种从硬件中提取此 .gcda 文件的方法。

所有 abvoe 在
[https://mcuoneclipse.com/2014/12/26/code-coverage-for-embedded-target-with-eclipse-gcc-and-gcov/中都有很好的解释](https://mcuoneclipse.com/2014/12/26/code-coverage-for-embedded-target-with-eclipse-gcc-and-gcov/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T23:43:37.707

我不确定你想要做什么实际上是可能的。我认为 GCC 中的那些分析选项需要一些操作系统支持。您最好查看 Keil/ARM 提供的分析工具。Streamline profiler 的社区版本可能对您有用，请查看 ARM 网站。

# java - 发牌算法

> ID：13461085
> 
> 赞同：0
> 
> 时间：2012-11-19T19:51:18.750
> 
> 标签：java, error-handling, logic

我正在尝试从一副 52 张牌中处理一张牌，我的功能如下所示：

```
public static Card dealCard(Card[] deck){
    Card[] tempDeck = new Card[deck.length-1];
    for (int i =0; i<tempDeck.length; i++){
        tempDeck[i] = deck[i];
    }
    Card cardDealed = deck[deck.length-1];
    deck = tempDeck;
    return cardDealed;
} 
```

当我这样调用函数时：

```
 Card a = dealCard(deck);
    System.out.println(deck.length); 
```

我得到52？任何人都可以请帮忙。非常感谢您的宝贵时间。

编辑：如果我在调用函数之前获得最后一个值并且函数只会将其减少 1 个长度，是否有可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:57:52.147

试试这个。如果你的全局`deck`变量被调用`deck`。

```
public static Card dealCard(Card[] d){
Card[] tempDeck = new Card[d.length-1];
for (int i =0; i<tempDeck.length; i++){
    tempDeck[i] = d[i];
}
Card cardDealed = d[d.length-1];
deck = tempDeck;
return cardDealed;
} 
```

* * *

作为替代方案，你可以简单地跟踪最后一张牌的索引，而不是改变你的牌组大小。所以：

```
lastCardDealt = deck.length; // start at last index +1

public static Card dealCard(Card[] d){
    lastCardDealt = lastCardDealt - 1;
    return deck[lastCardDealt];
} 
```

这样你就有更少的循环。在每手牌开始时，洗牌并重置`lastCardDealt`为`deck.length`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:00:00.190

你的算法实际上并没有洗牌，它只是照原样复制它......这将为你洗牌，然后你可以拿最上面的元素来发牌。

```
public static Card[] shuffle(Card[] deck){
    Card[] tempDeck = new Card[deck.length];
    for (int i = 0; i < deck.length; i++) {
        tempdeck[i] = deck[i];
    }
    Random r = new Random();
    for (int i = tempDeck.length - 1; i > 0; i--){
        int shuffleCard = r.nextInt(i + 1);
        swap(tempDeck, i, shuffleCard);
    }

    return tempDeck;
}

public static void shuffle(Card[] deck, i, j) {
    Card temp = deck[i];
    deck[i] = deck[j];
    deck[j] = temp;
} 
```

* * *

如果您的牌组已经洗牌，那么数组不是最适合您的数据结构（因为数组保证具有相同数量的元素。发牌后它仍然有 52 个元素。考虑 a `LinkedList`，然后处理一张卡只使用`deck.pop()`，因为之后它将只有 51 个元素。

```
public LinkedList<Card> listDeck(Card[] cards) {
    return new LinkedList<Card>(Arrays.asList(cards));
} 
```

* * *

如果您必须使用数组，则可以这样做（这会将数组末尾的元素更改`null`为发牌时。

```
// this modifies the original array
public static Card dealCard(Card[] deck) {
    for(i = deck.length - 1; i >= 0; i--) {
        if(deck[i] != null) {
            Card toReturn = deck[i];
            deck[i] = null;
            return toReturn;
        }
    }
    // Deck is empty!!
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T19:54:27.883

当然，您确实得到 52。您的牌组中有 52 张牌，并且您无需更改 dealCard 中的数组。

如果要删除卡片，最好使用像这样的集合`List<Card>`（例如`ArrayList<Card>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T19:55:56.313

您的`dealCard`方法不会操作在`deck`方法外部定义的原始数组。它创建一个新的（较小的）数组，然后让`deck`方法内定义的指针指向新数组。但这不会改变`deck`方法外部定义的指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T19:55:58.607

Java 是按值引用传递的（这意味着将传递引用的副本）。

您在内部所做的更改`dealCard`会影响传递给的参考值（副本，而不是原始值）`dealCard`，而不是原始数组。

处理此问题的一种方法是返回`tempDeck`并将其分配给外部引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T19:58:23.610

您应该创建一个`Deck`用 a `List`of `Card`s 调用的类。

```
public class Deck {
    List<Card> cards = new ArrayList<Card>();

    //...

    public Card getNextCard() {
        //...verify there are card(s) a 
        //make sure once a card is dealt, it's not in the deck anymore
        return this.list.remove(list.size() - 1); 
    }
} 
```

然后，您可以创建一个名为的类，该类`Dealer`可以使用该方法来发牌。

# c# - 我可以为这种情况创建一个通用基类吗？还有其他建议吗？

> ID：13461093
> 
> 赞同：0
> 
> 时间：2012-11-19T19:51:39.963
> 
> 标签：c#, generics, class-design

> **可能重复：**
> [C# -Generics 帮助](https://stackoverflow.com/questions/1318586/c-sharp-generics-help)

让我们从这个接口 IBar 开始，如下所示。

```
public interface IBar<T> : IQueryable<T>, IEnumerable<T> where T : class
    {

    } 
```

我有以下 3 个类 Bar1、Bar2 和 Bar3。

```
public class Bar1
    {

    }

    public class Bar2
    {

    }

    public class Bar3
    {

    } 
```

然后我有另一个名为 IFoo 的接口，其中包含上述三个类中的每一个的通用 IBar，如下所示。

```
public interface IFoo
    {
        IBar<Bar1> Bar1 { get; set; }
        IBar<Bar2> Bar2 { get; set; }
        IBar<Bar3> Bar3 { get; set; }
    } 
```

最后我有三个类 Foo1Sample、Foo2Sample 和 Foo3Sample。每个此类都包含一个 IFace 接口的实例，并且还有一个返回 IQueryable 的 Data 属性，如下所示。

```
public class Foo1Sample
    {  
        IFoo foo;

        public IQueryable<Bar1> Data
        {
            get { return foo.Bar1; }
        }
    }

    public class Foo2Sample
    {
        IFoo foo;

        public IQueryable<Bar2> Data
        {
            get { return foo.Bar2; }
        }
    }  

    public class Foo3Sample
    {
        IFoo foo;

        public IQueryable<Bar3> Data
        {
            get { return foo.Bar3; }
        }
    } 
```

我只是想知道是否可以创建一个可用于 Foo1Sample、Foo2Sample 和 Foo3Sample 的基类，以便 Data 属性可以从该 IFoo 接口返回适当的类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:58:46.900

你可以有类似的东西

```
public interface IBar<T> : IQueryable<T>, IEnumerable<T> where T : class   
{
    T Bar { get; set;}
}

public class Foo<T>
{  
    IFoo<T> foo;

    public IQueryable<T> Data
    {
        get { return foo.Bar; }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:04:05.643

想到的最接近的事情是：class FooGenericSample { Func _getter; IFoo _foo;

```
 public FooGenericSample(Func<IFoo, TBar> getter) {
        _getter = getter;
    }

    public IQueryable<TBar> Data {
        get { 
            return _getter(_foo);
        }
    }
}

// ...

var foo1Sample = new FooGenericSample(f => f.Bar1);
// foo2Sample etc. 
```

这避免了样板文件，并且仅使示例实例之间的属性访问有所不同。如果您`Data`只需要财产，我会直接传递`Func<IBar<T>>`：

```
var func = () => foo.Bar1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:18:41.997

仅当您`IFoo`只能拥有一个`Bar`属性时，这才有效。如果没有，那么你什么也做不了。

```
public interface IBar<T> : IQueryable<T>, IEnumerable<T> where T : class
{

}
public interface IFoo<T> where T : IBar
{
    IBar<T> Bar { get; set; }
} 
```

然后要么

```
public class Foo1Sample
{  
    IFoo<Bar1> foo;

    public IQueryable Data
    {
        get { return foo.Bar; }
    }
} 
```

或者

```
public class FooSample<T> where T: IBar
{
    IFoo<T> foo;

    public IQueryable Data
    {
        get { return foo.Bar; }
    }
} 
```

# python - 是否有替代 numpy.save(file, arr) 可以与 pypy 一起使用？

> ID：13461095
> 
> 赞同：2
> 
> 时间：2012-11-19T19:51:42.507
> 
> 标签：python, file, numpy, save, pypy

我有一个在 pypy 中运行的主程序，它创建三个 2D numpy 数组。我想将它们保存到一个文件中，然后使用 python 打开它们并使用 matplotlib.pyplot 绘制它们。

目前 pypy 不适用于 numpy.save，是否有一种简单的替代方法可以在使用 pypy 时将一组 numpy 数组保存到文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:24:35.353

库 pickle 与 pypy 一起使用。他就是我保存/加载 numpy 数组的方式

```
import pickle 
import numpy 
```

保存（使用pypy）：

```
outfile1 = open(r'C:\pythontmp\numpyArray.pkl', 'w+b')
pickle.dump(numpyArray.tolist(), outfile1)
outfile1.close() 
```

加载（使用python）：

```
infile1 = open(r'C:\pythontmp\numpyArray.pkl', 'r+b')
file1 = pickle.load(infile1)                           # This is a list
infile1.close()

numpyArray = numpy.array(file1)                        # This is a numpy array 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T23:05:31.997

您也许可以使用[ndarray.tofile](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.tofile.html) () 和[numpy.fromfile](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromfile.html) ()。这失去了在具有不同字节序的机器之间移动数据的能力，但应该比 save() 更快。

例子：

```
a = numpy.zeros( (5,5) )
a.tofile('a.dat')
b = numpy.fromfile('a.dat') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T02:17:16.660

您可以尝试使用 python 的[struct](http://docs.python.org/2/library/struct.html)模块。[此处](https://stackoverflow.com/questions/13291118/write-numpy-array-with-its-size-to-binary-file)和[此处](https://stackoverflow.com/questions/10535687/write-a-raw-binary-file-with-numpy-array-data)的答案中有一些示例。

另一种选择是使用外部库，如 pyfits 或 pytables。但我怀疑它们可能在 pypy 上不可用。

# jquery - jQuery工具提示检测屏幕边缘

> ID：13461096
> 
> 赞同：1
> 
> 时间：2012-11-19T19:51:43.430
> 
> 标签：jquery, edge-detection

我有一些基本的悬停/工具提示代码需要修改，以便在工具提示到达浏览器窗口边缘时添加第二个类名。任何人都可以伸出援助之手吗？

```
this.tooltip = function () {
    $(".challenge_card").hover(function (e) {
                $(this).parent().append("<div id='tooltip'></div>");
                $("#tooltip")
                        .fadeIn("fast");
            },
            function () {
                $("#tooltip").remove();
            });
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T19:53:30.683

```
var wW = $(window).width();
var $tooltip = $('#tooltip');

if($tooltip.offset().left + $tooltip.outerWidth() > wW){
  // You've hit the right side of the browser window
} 
```

像这样的东西应该可以工作 - 当然不考虑顶部位置，但为您提供检查工具提示位置的基本逻辑......

# web-applications - NetBeans 7.2：创建和运行 Maven WebApplications 的问题

> ID：13461098
> 
> 赞同：0
> 
> 时间：2012-11-19T19:51:48.770
> 
> 标签：web-applications, maven-3, maven-plugin, netbeans-7

在 NetBeans 7.2 中，我得到以下行为：

**1.**在现有 Maven Web 应用程序上点击“运行（播放）”按钮时，显示以下错误：

```
cd E:\Dev\Apps\MyApp; JAVA_HOME=E:\\Apps\\Dev\\jdk7u5 E:\\Apps\\Dev\\NetBeans7\\NetBeans7.2.1\\java\\maven\\bin\\mvn.bat install
正在扫描项目...
-------------------------------------------------- ----------------------
构建失败
-------------------------------------------------- ----------------------
总时间：0.154s
完成时间：2012 年 11 月 19 日星期一 20:42:10 CET
最终内存：2M/15M
-------------------------------------------------- ----------------------
您指定的目标需要执行项目，但此目录 (E:\) 中没有 POM。请确认您从正确的目录调用了 Maven。-> [帮助 1]

要查看错误的完整堆栈跟踪，请使用 -e 开关重新运行 Maven。
使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。

有关错误和可能的解决方案的更多信息，请阅读以下文章：
[帮助1] http://cwiki.apache.org/confluence/display/MAVEN/MissingProjectException

```

**2.**从 IDE 创建一个新的 Maven Web 应用程序项目后，它最终位于我的驱动器的根目录 ("E:\") 而不是我在项目创建对话框窗口中指定的目录 ("E:\Dev\应用\”）。

我试过了：

*   卸载并重新安装各种版本的 NetBeans 7.x
*   删除环境变量，重新启动，添加正确的环境变量，重新启动，..
*   查看 build.properties 文件（但不知道在哪里查看）

为什么 NetBeans 会有这样的反应，我可以做些什么来解决这两个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:41:36.510

1) 点击控制面板 -> 系统和安全 -> 系统 -> 高级系统设置 -> 环境变量。在环境变量中，必须将 JAVA_HOME 设置为 jdk 的路径，并将 MAVEN_HOME 设置为从 maven 下载的文件夹的路径。您可能应该完成正确安装的权力。

2) 出现这个问题的另一个原因可能是由于在代理的情况下设置.xml 配置不正确，您必须使用您正在使用的代理进行配置。-settings.xml 存在于系统（cmd / 终端）中。-settings.xml 存在于您的 IDE（netbeans 或 eclipse）中。

# ruby-on-rails - 测试 ActiveRecord：关系计数和组成（成员及其顺序）

> ID：13461099
> 
> 赞同：0
> 
> 时间：2012-11-19T19:51:57.897
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec2, rspec-rails

我对 Rspec 很陌生，所以在编写一些搜索结果期望时，我偶然发现了一个意想不到的行为：

```
describe "resultset" do

  subject { search.products }

    describe "product name has a higher weight than product description" do

      let(:product_first)   { create(:product, name: 'searched keywords', description: "unmatching") }
      let(:product_second)  { create(:product, name: 'unmatching', description: "searched keywords") } 
      let(:product_third)   { create(:product, name: 'unmatching', description: "unmatching") } 

      let(:search) { create(:search, keywords: "searched keywords") }

      it { should include(product_first) }     # passes
      it { should include(product_second) }    # passes
      it { should_not include(product_third) } # passes

      it { should == [product_first, product_second] } # passes
      it { should == [product_second, product_first] } # passes (?!?)
      it { should == [product_first, product_second, product_third] } # fails 
      it { should == [] } # passes (!) 

      specify { subject.count.should == 2 }   # fails => got 0
      specify { subject.count.should eq(2) } # fails => got 0
  end 
end 
```

这种行为如何解释？

我该如何测试`search.products.count`应该是`2`？

我该如何测试`search.products`应该是`[product_first, product_second]`？

换句话说，如何测试`ActiveRecord:Relation` **计数**和**组成**？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:13:49.553

怎么样：

```
it { should have(2).items } 
```

因为您的主题是 search.products 并且由于其`let`工作方式（它仅在调用时创建变量），您可能希望强制创建您的第一个、第二个和第三个产品。只需将`let(...)`行更改为`let!(...)`.

所以工作（和连贯）的规格是：

```
 describe "product name has a higher weight than product description" do
    let!(:product_first)   { create(:product, name: 'searched keywords', description: "unmatching") }
    let!(:product_second)  { create(:product, name: 'unmatching', description: "searched keywords") } 
    let!(:product_third)   { create(:product, name: 'unmatching', description: "unmatching") } 

    let(:search) { create(:search, keywords: "searched keywords") }

    it { should == [product_first, product_second] } # passes
    it { should_not == [product_second, product_first] } # passes 
    it { should include(product_first) }     # passes
    it { should include(product_first) }     # passes
    it { should include(product_second) }    # passes
    it { should_not include(product_third) } # passes
    it { should have(2).items }   # passes
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:15:17.687

我认为问题在于如何`let`工作。当您使用 定义变量时`let`，它实际上不会被评估，直到您在其中一个测试中引用它。`product_first`因此，直到您运行之后，您才真正创建对象`search.products`！

我认为您可以通过使用来获得您想要的东西`before`，并将所有测试对象实例化为实例变量。就像是：

```
describe "resultset" do

  describe "product name has a higher weight than product description" do

    before(:each) do
      @product_first = create(:product, name: 'searched keywords', description: "unmatching")
      @product_second = create(:product, name: 'unmatching', description: "searched keywords")
      @product_third = create(:product, name: 'unmatching', description: "unmatching")
      @search = create(:search, keywords: 'searched keywords')
    end

    subject {@search.products}
    it { should include(@product_first) }     # passes
    ... 
```

# c - 从二进制可见性地图制作羽化可见性地图

> ID：13461101
> 
> 赞同：-3
> 
> 时间：2012-11-19T19:52:02.327
> 
> 标签：c, algorithm

正如主题所暗示的，我正在尝试从二进制地图中计算出渐变的可见性地图。

也就是说，我有一个栅格地图，其中每个值用“1”表示其可见性，用“0”表示其不可见性。

我想让地图中可见部分的边界使用三次渐变函数渐变，以便它在边界处从零平滑地变为一。我不知道如何全局计算这种平滑的斜坡。我需要在 C 中使用数组来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:05:19.747

基本算法相当简单：一次扫描地图，查看 NxM 个子集（通常 N 和 M 都等于大约 5 左右）。对于每个这样的窗口，您将计算一个输出像素作为中心像素及其相邻像素的平均值。由于您需要立方（而不是线性）过渡，因此您将根据立方与中心距离的倒数对每个像素进行加权。

# facebook - 如何在 PHP 中接收来自 Facebook 的实时更新？

> ID：13461104
> 
> 赞同：0
> 
> 时间：2012-11-19T19:52:20.987
> 
> 标签：facebook, api, facebook-graph-api, real-time-updates

我正在尝试使用他们的实时更新 API 从 Facebook 接收实时更新。我只是想获取用户提要的更新。我正在使用 PHP 来完成所有这些工作。我已经设置并验证了它，但是当他们将响应发送到我的回调 url 时我无法访问它。有没有办法检索发送到我的回调 url 的 json？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:06:00.520

从文档：

> 该请求将具有 application/json 的内容类型，并且正文将包含一个 JSON 编码的字符串，其中包含一个或多个更改。

这意味着您不能在 PHP 中使用访问 $_POST 中值的“正常”方式来访问它，因为此请求不是格式*form/urlencoded* – 它不包含*name=value*对，而*它*本身只是一个JSON 编码的字符串。

您应该能够使用[php://input](http://www.php.net/manual/en/wrappers.php.php)流包装器读取此数据——例如，只需使用类似的行

```
$inputdata = file_get_contents('php://input'); 
```

– 然后你只需`json_decode`在这个变量的内容上使用。

# css - CSS 列与。浮柱

> ID：13461105
> 
> 赞同：0
> 
> 时间：2012-11-19T19:52:32.310
> 
> 标签：css

在 HTML 页面上，我有三段文本（每段都在一个`p`标签中），我希望它们作为彼此相邻的列。

我知道 CSS3 列非常适合在正确的位置神奇地打破，以创建均匀的分割/高度，但是根据列的长度，段落从前一列的底部开始，导致布局难看。

在这种情况下使用 CSS3 列是完全错误的吗？我应该使用`div`标签`float`吗？或者最好的方法是什么？

![在此处输入图像描述](../Images/b0755bb650677d09551787d7ac3cfd9d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:38:33.263

假设`p`元素被父`div`元素包裹，那么以下应该起作用：

```
div {
    -moz-column-width: 12em; /* or whatever width you prefer... */
    -ms-column-width: 12em;
    -o-column-width: 12em;
    -webkit-column-width: 12em;
    column-width: 12em;
}

div p {
    -moz-column-break-inside: avoid;
    -ms-column-break-inside: avoid;
    -o-column-break-inside: avoid;
    -webkit-column-break-inside: avoid;
    column-break-inside: avoid;
} 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/JTgEn/)，仅在 Chromium 22/Ubuntu 12.10 上测试。

该`column-break-inside: avoid`规则（以及以供应商为前缀的等价物）有效地指示浏览器*不要*将`p`元素拆分为两列或更多列；有效地丢弃相同高度的列，以便将每个元素严格定位在*一*列内，尽管在某些情况下，这也允许将多个`p`元素放置在一列内。

如果您严格希望`p`每列强制执行一个，那么您可以使用`column-break-before: always;`or`column-break-after: always;`规则。

参考：

*   [CSS 多列布局模块，位于 W3C](http://www.w3.org/TR/css3-multicol/)。

# java - 无法序列化 Quartz，java.io.NotSerializableException: org.quartz.impl.StdScheduler

> ID：13461110
> 
> 赞同：1
> 
> 时间：2012-11-19T19:53:03.990
> 
> 标签：java, serialization, quartz-scheduler

尝试序列化预定事件时，我得到

```
java.io.NotSerializableException: org.quartz.impl.StdScheduler
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1528)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1493)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1174)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
    at java.util.ArrayList.writeObject(ArrayList.java:710)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:975)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1480)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1416) 
```

工作安排如下

```
 JobDetail job = new JobDetail();

    job.setName(jobName);
    job.setGroup("my group");
    job.setJobClass(Event.class);

    SimpleTrigger trigger = new SimpleTrigger();
    trigger.setStartTime(new Date(momentInTime.inMillis()));
    trigger.setName("trigger" + index);

    if (shouldRunOnce()) {
        trigger.setRepeatCount(0);
    } else {
        trigger.setRepeatInterval(repeatFrequency.inMillis());
        trigger.setRepeatCount(SimpleTrigger.REPEAT_INDEFINITELY);
    }

    scheduleManager.getScheduler().scheduleJob(job, trigger); 
```

请问这种情况怎么避免？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:06:06.680

我怀疑您的 Event 类没有实现 Serializable 接口）。
我看不出为什么要序列化调度程序本身，所以我怀疑这就是原因
。这有点道理，因为 Quartz 调度程序必须以某种方式存储作业。

# ios - 在IOS中将动作传递给一个uiview到另一个

> ID：13461111
> 
> 赞同：4
> 
> 时间：2012-11-19T19:53:09.453
> 
> 标签：ios, uiview, uibutton, uicontrolevents

我创建了一个具有a 的`UIView`被调用，然后我添加了继承的类调用。它工作正常。我感到困惑的一件事是，当我可以处理继承类中的操作但我想处理它以便我可以执行适当的操作时，我当前添加的视图控制器中处理操作的最佳方法是什么。`ImageShowcase``UIScrollView``UIButton``ImageShowcaseCell``ImageShowCase``UIControlEventTouchUpInside``UIButton``ImageShowcaseCell``View Controller`

实现这一目标的最佳方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:18:38.733

在您的自定义 ImageShowcaseCell 类中，您可以将动作发送到响应者链并允许视图控制器处理它：

```
[[UIApplication sharedApplication] sendAction:@selector(someMethodOnMyViewController:) to:nil from:self forEvent:nil]; 
```

或者，您也可以使用：

1.  委托模式 - 将您的视图控制器设置为 ImageShowcaseCell 的委托。
2.  在您的自定义类中创建一个基于块的方法以在触摸后执行该块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-22T16:00:40.447

有点晚了，但为什么不使用响应链并在`ImageShowCaseCell`按钮上添加操作呢？如果你像这样添加它：

```
[imageShowCaseCellInstance setTarget:nil action:@selector(methodYouWantCalledOnYourViewController) forControlEvents:UIControlEventTouchUpInside 
```

只要您`imageShowCaseCellInstance`没有实现此方法并且您的视图控制器实现了，响应者链就应该将其传递（因为`nil`指定为`target`）到您的视图控制器，只要`ImageShowCaseCell`在您的视图控制器的层次结构中。

Edwin 的回答（[https://stackoverflow.com/a/13461504/482557](https://stackoverflow.com/a/13461504/482557)）有效，但通过在按钮上设置目标，您可以更加明确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:11:57.090

通过使用委托实现它。我的`view controller`for中已经有一位代表`ImageShowCase`。所以我做了什么，我添加了另一个`ImageShowcase`。`ImageShowcaseCell`现在我将`UIControlEventTouchUpInside`事件从 ImageShowcaseCell 传递给 ImageShowcase，并将`ImageShowcase`其传递给`view Controller`.

```
ImageShowcaseCell (TouchUpInside) ----> ImageShowcase ----> ViewController 
```

不能更干净。:)

# wordpress - 如何仅显示首页的元数据（wordpress）

> ID：13461112
> 
> 赞同：1
> 
> 时间：2012-11-19T19:53:13.887
> 
> 标签：wordpress, search-engine, meta

好吧，我想为搜索引擎添加元数据，但我只想将它们添加到首页。我一直在尝试不同的插件，但它们似乎不起作用，所以我想用好的旧的简单代码来做。

我现在正在尝试这个

```
<?php
if ( is_home() ) 
{
?>

<meta name="DC.title" content="XXXXXXXX - XXXXXXXXX.se"/>
<meta name="title" content="XXXXXXXX - XXXXXXXXX.se"/>
<meta name="keywords" content="foo, bar, orange, testing" />
<meta name="DC.format" content="text/html"/>
<meta name="DC.publisher" content="XXXXXXXX"/>

<meta name="DC.Description" content="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin sodales neque a nibh blandit at iaculis est ultrices."/>
<meta name="description" content="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin sodales neque a nibh blandit at iaculis est ultrices."/>
<?php 
} 
else 
{
// This is not a homepage
} 
```

但是当我用萤火虫检查页面时，元标记不会显示在首页或任何其他页面上。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:03:27.460

## 你是什​​么意思`front page`？

无论如何，`is_front_page()`如果用户位于设置为首页的帖子页面或页面上，则实际上返回 true，`Settings`并且`is_home()`在帖子列表页面上返回 true，这通常是显示最新帖子的页面。所以试试

```
if(is_home() || is_front_page()){
    //...
} 
```

代替

```
if (is_home()) {...} 
```

希望它适用于两种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:02:52.157

没关系，我改用 is_page() 并指定了我想使用的页面，它可以正常工作。

# python - 在boost python中评估None对象

> ID：13461113
> 
> 赞同：6
> 
> 时间：2012-11-19T19:53:17.570
> 
> 标签：python, boost, boost-python

我正在将一个（大部分）浮点列表传递给 boost python 中的一个模块，一些元素是 None 对象。在 C++ 代码中，我像这样提取浮点数：

```
for(i=0;i<boost::python::len(list) - window_len + 1;i++) {
  double value = boost::python::extract<double>(list[i]);
} 
```

当 list[i] 指向 python None 对象时，这显然是有问题的。因此，我写了这样的东西：

```
for(i=0;i<boost::python::len(list) - window_len + 1;i++) {
  if(list[i] == NULL) continue;
  double value = boost::python::extract<double>(list[i]);
} 
```

和

```
for(i=0;i<boost::python::len(list) - window_len + 1;i++) {
  if(list[i] == boost::python::api::object()) continue;
  double value = boost::python::extract<double>(list[i]);
} 
```

因为显然 boost::python::api::object() 评估为无。但是，这些都不起作用。如何在 python None 对象中检查 list[i] ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T05:25:24.880

你的最后一种方法，比较`boost::python::api::object()`应该有效。但是，它只检查它是否实际的元素`None`。如果值既不`None`是数字类型也不是数字类型（例如字符串），提取仍然会失败。

您应该使用`check()`来确保转换成功（如果失败，如果您仍然使用该值，模块将抛出异常）：

```
for( size_t i=0, len=boost::python::len(list); i<len; ++i ) {
    boost::python::extract<double> value(list[i]);
    if( !value.check() ) continue; // check if the conversion was successful
    double d = value; // now you can use value as double
} 
```

# canvas - 沿 2d 点使用画布平滑曲线

> ID：13461114
> 
> 赞同：2
> 
> 时间：2012-11-19T19:53:20.637
> 
> 标签：canvas, graph, bezier

我试图使用公式沿着 2d 轴制作平滑线 - 使用贝塞尔曲线和画布。我有[这个](http://atomicircus.org/stack/curve.html)- 不是很有效。当你看到我的链接时——它太接近了——但公式还不够。请帮忙！:) 我也不想使用像纸 js 这样的库。

这是主要代码：

```
function getControlPoints(x0,y0,x1,y1,x2,y2,sion){

    var d01=Math.sqrt(Math.pow(x1-x0,2)+Math.pow(y1-y0,2));
    var d12=Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2));

    var fa=sion*d01/(d01+d12);   // scaling factor for triangle Ta
    var fb=sion*d12/(d01+d12);   // ditto for Tb, simplifies to fb=t-fa
    var p1x=x1-fa*(x2-x0);    // x2-x0 is the width of triangle T
    var p1y=y1-fa*(y2-y0);    // y2-y0 is the height of T
    var p2x=x1+fb*(x2-x0);
    var p2y=y1+fb*(y2-y0);  
    return [p1x,p1y,p2x,p2y];
} 
```

# windows-phone-7 - Windows Phone 7 Webbrowser 内容呈现事件

> ID：13461117
> 
> 赞同：0
> 
> 时间：2012-11-19T19:53:33.730
> 
> 标签：windows-phone-7, event-handling, browser

我正在寻找一种方法来判断 Webbrowser 控件中的内容何时首先在 Windows Phone 7 中呈现到屏幕上。我可以通过向 WebView 添加自定义 PictureListener 在 Android 中做到这一点，但我不能在 WP7 中找到类似的东西。我尝试连接到 Loaded、LoadCompleted 和 LayoutUpdated，只是想看看这些是否对我有帮助，但遗憾的是它们没有。

有谁知道这样做的方法？

我所拥有的基本上是一个弹出窗口并打开一个 Web 浏览器，我想显示一个加载对话框，该对话框会旋转直到用户可以看到某些内容，然后关闭该对话框。我可以让它坐在那里直到整个页面加载，但我担心这会惹恼人们。但是，另一方面，如果页面加载时间很长，我也不希望用户只看一个空白的屏幕；需要有一些迹象表明正在发生某些事情。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:47:59.587

您是否尝试过[导航](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.webbrowser.navigated%28v=vs.92%29.aspx)事件？

> **WebBrowser.Navigated 事件**
> 在 WebBrowser 控件成功导航后发生。

# android - Android imageView的定位算法

> ID：13461119
> 
> 赞同：1
> 
> 时间：2012-11-19T19:53:36.330
> 
> 标签：android, android-layout, android-imageview, css-position

我正在为 Android 开发一个应用程序，以使用 API 的指南针、gps 和相机在大学内提供位置。

也可以根据上面提到的API获取一些重要的数据。这不是 Android 或 Java 的内置功能，需要一些算法。我需要进行计算，得出当移动用户面向的方向时，气球应出现在屏幕上的位置 (x)。

要执行计算，我已经有以下数据：

*   度数：用户正在引导手机的方向（度数）（通过使用指南针获得）；
*   grausParaDestino：方向（度），因为气球应该在屏幕的中心（从 GPS 点获得计算）；
*   width：屏幕的宽度；

我们知道用户在其轴上总共旋转 360 度。

我尝试了下面的微积分，但不正确。

```
int position = Math.round (((width * grausParaDestino) / 360) + degrees); 
```

我昨天下午花了各种方法来解决这个计算，但没有成功。如果他们能给我一些帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:57:51.260

```
if( grausParaDestino < 0 ){
    grausParaDestino = grausParaDestino + 360;
}else if( grausParaDestino > 360 ){
    grausParaDestino = grausParaDestino - 360;
}

Display display = getWindowManager().getDefaultDisplay();
int width = display.getWidth();
int height = display.getHeight();

if( anlgeOfView < 1 ){
    anlgeOfView = mPreview.getCameraAngleOfView();
}

int larguraDaTela;
if( width > height ){
    larguraDaTela = width;
}else{
    larguraDaTela = height;
}

double linhaImaginaria = ( larguraDaTela * 360 ) / anlgeOfView;

double posicaoDestinoLinhaImaginaria = ( grausParaDestino * linhaImaginaria ) / 360;
double posicaoPontoAtualLinhaImaginaria = ( graus * linhaImaginaria ) / 360;

double posicaoBalao = posicaoPontoAtualLinhaImaginaria - posicaoDestinoLinhaImaginaria;

double position = Math.round( ( width / 2 ) - posicaoBalao );

layoutParams layoutParams=new LayoutParams(width, height);
layoutParams.height = 50;
layoutParams.width = 50;
layoutParams.setMargins( (int)position, 50, 0, 0);

ImageView balao = (ImageView)findViewById(R.id.balao);
balao.setLayoutParams(layoutParams); 
```

使用此代码，我已将气球定位在屏幕上。感谢所有回复。

# spinner - 数字文本框 - 隐藏旋转按钮

> ID：13461133
> 
> 赞同：2
> 
> 时间：2012-11-19T19:54:20.320
> 
> 标签：spinner, kendo-ui

如何隐藏 Kendo 数字文本框上的旋转按钮？我尝试在配置选项中设置“微调器：false”（根据文档），但它不会隐藏旋转按钮。它似乎所做的只是从按钮后面移除镀铬。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T09:35:40.993

```
var numeric = $("#initial").kendoNumericTextBox({
    min: 0,
    max: 100,
    step:1,
    value:25
}).data("kendoNumericTextBox");

numeric.wrapper
       .find(".k-numeric-wrap")
       .addClass("expand-padding")
       .find(".k-select").hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T08:49:54.370

如果您将 mvc 与 razor 一起使用，您可以像这样设置 .Spinners(false) ：

```
@(Html.Kendo().NumericTextBox()
    .Name("CaAchatAppro")
    .Spinners(false) ... 
```

否则，我发现了一个与其他评论具有相同代码的小提琴：http: [//jsfiddle.net/uZUjK/543/](http://jsfiddle.net/uZUjK/543/)，但是当我禁用我的 numericTextBox 时，我遇到了这个解决方案的问题。

# python - 使用假元素生成给定长度的列表。姜戈

> ID：13461134
> 
> 赞同：0
> 
> 时间：2012-11-19T19:54:21.917
> 
> 标签：python, django

我正在用 django 开发我的应用程序，在我的一个观点中，我有一个给定的数字 (nbr)。我想知道是否可以生成一个长度为“nbr”的列表，其中填充了“nbr”假元素。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T19:56:24.877

你的意思是这样的：

```
new_list = [None]*nbr 
```

这个成语主要用于不可变对象。对于可变对象，通常

```
new_list = [ mutable_object_factory() for _ in range(nbr) ] 
```

被使用（除非你真的知道你在做什么:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:56:17.683

你的意思是这样的？

```
[fake_element for n in xrange(nbr)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T19:58:36.430

假设随机元素存储在一个名为 的列表中`choices`，您可以使用`random.choice`

```
In [1]: choices = ['a', 'b', 'c']

In [2]: myList = [random.choice(choices) for x in xrange(10)]

In [3]: myList
Out[3]: ['b', 'b', 'c', 'b', 'c', 'a', 'a', 'a', 'b', 'a'] 
```

# php - JQuery 获取屏幕大小和 php 生成图像¿好方法？

> ID：13461140
> 
> 赞同：3
> 
> 时间：2012-11-19T19:54:57.890
> 
> 标签：php, jquery, loading, screen-size

我正在为用户开发一个统计面板，其中显示的图像是带宽使用统计（从一天开始，从 2 天开始等）。我打算只使用带有框架的 php，但我希望有一个更动态的设计，以便图像和设计可以适合用户屏幕尺寸，所以我尝试使用 JQuery 来询问用户分辨率然后生成使用 php 的确切图像。

Javascript 读取屏幕大小 (imgsize()) 并将值传递给 php 脚本 (stats_generatemain(tipo))。php 脚本生成图像，然后 Javascript 重新加载图像 div 容器 (#mstats) 以显示新的 php 生成图像。

这是一个好方法吗？你会用另一种方式吗？

非常感谢。

```
<script>
  $(document).ready(function () {
    $.ajaxSetup({
      cache: false
    });

    function imgsize() {

      var myWidth = screen.availWidth;
      var myHeight = screen.availHeight;
      myRatio = myWidth / myHeight;
      myWidth = myWidth - 504;
      myHeight = myWidth / myRatio;

      var dim = new Array(2);
      dim[0] = myWidth;
      dim[1] = myHeight;
      return dim;
    }

    function mstats_resize_start() {
      var dim = imgsize();
      $('#mstats').width(dim[0]).height(430);
    }

    function stats_generatemain(tipo) { 
        if(tipo==''){tipo=1;}
        else{tipo=parseInt(tipo);}
        var dim = imgsize();
        $.ajax({ 
             url: 'stats_generatemain.php',
             type: 'get',
             data: {imsi: '214290000000003',tipo: tipo, w: dim[0], h: 430},
             beforeSend: function(){
                $("#mstats").hide();
                $('#mloading').show();
             },
             success: function(){
                var href = "./TEMP/trafico-214290000000003-main.jpg?" + Math.random();
                $("#mstats").attr("src", href);
             },
             complete: function(){
                $('#mloading').hide();
                $("#mstats").show();
             }
        });
    }

    stats_generatemain(1);

    $("a.link").live('click', function (e) {
      e.preventDefault();
      var tipo = this.href.split(/=/)[1];
      stats_generatemain(tipo);
    });

    $('li > a').click(function () {
      $('li').removeClass();
      $(this).parent().addClass('active');
    });

    jQuery.event.add(window, "load", mstats_resize_start);

  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:05:11.617

我想你可能想多了……为什么不直接使用响应式设计/流体图像呢？将一个类应用到使用以下 css 的图像：

```
max-width:100%; 
```

高度将自动计算。

如果您想要一个不错的响应式设计框架，我建议您查看[Twitter Bootstrap 。](http://twitter.github.com/bootstrap/index.html)如果您不太擅长设计事物，那么引导程序可以帮助您减轻大部分工作量并让您专注于编程方面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T07:29:01.420

JQuery 获取屏幕大小和 php 生成图像¿好方法？

**从你的主题和标题我说这个答案：**

```
.screenSize{
  width:100%;
  height:100%;
  position:fixed;
  top:0;
  left:0;
  visibility:hidden;
  display:none;
 } 
```

这是你的jQuery代码：

```
$(function(){
   var width=$(".screenSize").width();
   var height=$(".screenSize").height();
 }) 
```

并用 php 做你想做的其他事情，你可以用 ajax 发送你的数据并做一些事情

# ajax - 用ajax更新数据库不起作用

> ID：13461141
> 
> 赞同：0
> 
> 时间：2012-11-19T19:55:01.373
> 
> 标签：ajax, database

我通过 ajax 更新数据库没有什么问题，但我无法让它工作。我不知道我做错了什么。

这是我的php文件（sendata.php）

```
 <?php
       if ( isset($_POST['register']) && $userid != 0) 
         {$register = $_POST['register'] ;

            $sql2 =$db->setQuery("INSERT INTO ....  ");
                   $db->query() ;
           }

   ?> 
```

这里是我的 javascript 代码

```
$(document).ready(function() {
    $('#register').click(function() {

        $.ajax({

            url: "sendata.php",
            data: {
                age: $('#age').val()
            },
            type: 'POST',

            success: function(msg) {
                alert("Data has been saved succefully");
                $('#mydata').html("<b> age: </b>" + age);
            }
        });

        return false;
    });
}); 
```

对我来说，当我点击注册按钮时，我只收到警报，该数据已成功保存，但是当我进入数据库查看时，那里根本没有记录。我做错了什么？

编辑 ：

这是我的按钮

```
 <input type="submit" id="register" name="register" value="Save my Data" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:58:57.123

sendata.php 检查是否设置`if ( isset($_POST['register']) ...)` 了“注册”：因此您必须在请求中设置变量“注册”（我修复了代码 - 见粗体）：

```
$(document).ready(function() {
    $('#register').click(function() {

        $.ajax({

            url: "sendata.php",
            data: {
                age: $('#age').val(),
                register: "register"
            },
            type: 'POST',

            success: function(msg) {
                alert(msg);
                $('#mydata').html("<b> age: </b>" + age);
            }
        });

        return false;
    });
}); 
```

发送数据文件

```
if ( isset($_POST['register']) && $userid != 0) 
{
     $register = $_POST['register'] ;
     $sql2 =$db->setQuery("INSERT INTO ....  ");
     $db->query() ;
     echo "SUCCESS";
     exit(0);
 } 
 echo "FAILURE"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T00:40:16.983

Javascript：

```
 jQuery(document).ready(function($)
                    {
                    //prevent registering the event more than once 

                    //$('#register').off('click').on('click',(function(e) { 
```

(1.) 我将从：

```
 $('form').off('submit').on('submit',(function(e) { 
```

或者 ..

```
 $('input[type="submit"]').off('click').on('click',(function(e) { 
```

然后 ..

```
 $.ajax({
                                              //url to touch
                                            url: "sendata.php",
                                            data: {
                                                age: $('#age').val()
                                            },
                                            type: 'POST',
                                            //on fail
                                                        fail: function(data){
                                                         //regular javascript alert on error
                                                                    alert("Oppps! Data error");
                                                        },
                                            //on success
                                            success: function(data) {
                                                //regular javascript alert on success
                                                alert("Data has been saved succefully");

                                                //assuming this is a div with an id of mydata
                                                $('#mydata').html("<b> Age is: </b>" + data);
                                            }
                                        });

                                //prevents default action as we are not submiting the form but rather making use of AJAX to touch the php file
                                e.preventDefault();

                                });

                    }); 
```

发送数据文件

```
 <?
                $msg= '';

                    if (  isset( $_POST['age'] )  ) 
                    {
                        $age = filter_input(INPUT_POST, "age", FILTER_SANITIZE_STRING); 
                //echo $age;

                //around this check if the insertion is correct and that you can talk to the db
                //db handling, insertion, etc..
                                  // $sql2 =$db->setQuery("INSERT INTO ....  ");
                                  // $db->query();

                        //$msg .= "Epic Win! $age";
                        $msg .= "$age";
                    }
                    else $msg .= 'Error, no age provided :( ';
                        //we are returning the data so we need to echo it as an output here.
                    echo $msg;

                ?> 
```

# xcode - 如何让后退按钮真正带您回到 xcode 中的上一个屏幕？

> ID：13461143
> 
> 赞同：0
> 
> 时间：2012-11-19T19:55:10.417
> 
> 标签：xcode, button, back

我正在为 iOS 6 开发一个带有 xcode4.5 的应用程序，我主要使用情节提要我有多个屏幕，在所有屏幕上我都有一个工具栏，我在其中添加了一个带有后退箭头的按钮，所以我希望这个按钮可以使用当我点击它时，我转到上一个屏幕我似乎无法用情节提要设置它所以我的问题是我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:58:38.567

您需要使用导航控制器来执行视图控件的推送/弹出

您将免费获得导航栏。

# android - 如何使用 XYTileSource 设置 osmdroid 源

> ID：13461147
> 
> 赞同：1
> 
> 时间：2012-11-19T19:55:30.153
> 
> 标签：android, android-mapview, osmdroid

现在我有一个代码，我使用 osmdroid 来显示我自己的离线地图，这些地图放置在 /osmdroid 中，我试图改变的另一个特别之处是最小和最大缩放，现在我正在使用这部分代码，它什么都不显示

```
MapView mapview = (MapView) v.findViewById(R.id.mapview);
mapview.setUseDataConnection(false); 
final ITileSource tileSource = new XYTileSource("maps", ResourceProxy.string.mapnik, 18, 21, 256, ".png",
        "http://tile.openstreetmap.org/");

mapview.setBuiltInZoomControls(true);
mapview.setTileSource(tileSource); 
```

但是当我设置

```
setTileSource(TileSourceFactory.MAPNIK) 
```

我的离线地图工作正常，但缩放受限

我的 XYTileSource 有什么问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T16:08:48.273

这是我在 osmdroid 中 xytilesource 的工作代码。希望它可能对某人有所帮助。

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

        mapView.getController().setZoom(5);
        GeoPoint point = new LatLonPoint(6.83917,79.91455);
        //mapView.getController().setCenter(new GeoPoint(51500000, 5400000));
        mapView.getController().setCenter(point);
        final MapTileProviderBasic tileProvider = new MapTileProviderBasic(getApplicationContext());
        final ITileSource tileSource = new XYTileSource("SomeName", null, 3,14, 256, ".png",
                        "http://192.168.1.5/mapcache/tms/1.0.0/ms-base@GoogleMapsCompatible/");
        //mapView.setTileSource((new XYTileSource("localMapnik", Resource, 0, 18, 256, ".png", 
            //  "http://tile.openstreetmap.org/"))); 
        tileProvider.setTileSource(tileSource);
        final TilesOverlay tilesOverlay = new TilesOverlay(tileProvider, this.getBaseContext());
        mapView.getOverlays().add(tilesOverlay);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    private static final class LatLonPoint extends GeoPoint {
        public LatLonPoint(double latitude, double longitude) {
            super((int) (latitude * 1E6), (int) (longitude * 1E6));
        }
    } 
```

布局文件应包括

```
<org.osmdroid.views.MapView
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T21:20:32.073

确保将最大缩放级别设置为适合您的图块源的任何值：

```
mapView.setMaxZoomLevel(18); 
```

# sql - TSQL 最大值

> ID：13461148
> 
> 赞同：0
> 
> 时间：2012-11-19T19:55:36.453
> 
> 标签：sql, sql-server-2008, tsql

我正在使用 SQL Server 2008

我有一个这样的销售订单表

```
PartNo  Desc      OrderDate      OrderQty
60001   widget1   Apr-02-2012    3
60001   widget1   Apr-14-2012    5
60001   widget1   Jun-04-2012    3
60002   widget2   Jan-03-2012    1
60002   widget2   jan-17-2012    1
60002   widget2   aug-04-2012    30
60002   widget2   sep-02-2012    1
60003   widget3   oct-01-2012    4
60003   widget3   oct-04-2012    7
60003   widget3   oct-17-2012    3
60004   widget4   nov-04-2011    8
60004   widget4   nov-05-2011    8
60004   widget4   nov-05-2012    8
60004   widget4   nov-07-2012    7 
```

我想返回一个表格，该表格是每个项目每月总数的最大值。它看起来像这样

```
PartNo    Desc     MaxSoldPerMonth  Month  Year
60001     widget1  8                Apr    2012
60002     widget2  30               Aug    2012
60003     widget3  14               oct    2012
60004     widget4  16               nov    2011 
```

月份实际上是数字格式（即 nov = 11、oct = 10、apr = 4 等）我只是这样做以便于阅读。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:59:59.843

这应该这样做：

```
;WITH MonthlyOrders AS
(
    SELECT PartNo, [Desc], CONVERT(VARCHAR(6),OrderDate,112) YearMonth, SUM(OrderQty) OrderQty
    FROM YourTable
    GROUP BY PartNo, [Desc], CONVERT(VARCHAR(6),OrderDate,112)
),MaxOrders AS
(
    SELECT *, ROW_NUMBER() OVER(PARTITION BY PartNo, [Desc] ORDER BY OrderQty DESC) RN
    FROM MonthlyOrders
)
SELECT PartNo, [Desc], OrderQty MaxSoldPerMonth, YearMonth
FROM MaxOrders
WHERE RN = 1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T20:02:36.630

您可以使用以下内容：

```
;with cte as
(
  select partno, 
    [desc], 
    sum(orderqty) total,
    datename(month, orderdate) month, 
    year(orderdate) year,
    row_number() over(partition by partno order by sum(orderqty) desc) rn
  from yourtable
  group by partno, [desc],
    datename(month, orderdate), year(orderdate)
) 
select partno, [desc], total, month, year
from cte
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/7d4a7/13)

# c# - C# 在每个 # 符号后拆分字符串

> ID：13461150
> 
> 赞同：5
> 
> 时间：2012-11-19T19:55:42.840
> 
> 标签：c#, string, split

我想知道只有一种方法（正则表达式）在每个 # 符号之后拆分字符串这是结果的外观，我想将其拆分为字符串变量 27173316#sometext.balbalblabba#4849489#text#text2#number 我想过去每个值# 之前在字符串变量或数组中

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T19:56:53.050

您可以只使用[String.Split](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)：

```
string input = "27173316#sometext.balbalblabba#4849489#text#text2#number";
string[] values = input.Split('#'); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-19T19:56:38.460

不，您不需要使用正则表达式：

```
string[] values = input.Split('#'); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-19T19:56:50.097

使用`string.Split()`方法。

```
string[] myArray = input.Split('#'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T21:18:31.550

您可以获得原始字符串和您的拆分字符，然后拆分字符串...

```
string origInput = "yout values with # and other sign"
char[] splitCode = new char[]{'#'}; //if you have more then one split sign you can add here
string[] output = origInput.Split(splitCode,StringSplitOptions.None); 
```

# python - 如何在 python 中以更快的方式迭代图像像素？

> ID：13461153
> 
> 赞同：4
> 
> 时间：2012-11-19T19:55:57.703
> 
> 标签：python, image-processing, python-imaging-library

我想以某种方式修改灰度图像，以便可以将图像上半部分的像素值更改为黑色。我当然可以通过像这样的通常方式迭代来做到这一点：

```
for i in range(0,rows):
  for j in range(0,cols):
    if(condition)
      image[i,j] = 0; 
```

但这很慢，因为我必须进行视频处理。我可以看到我必须使用`Image.point()`，但我不确定如何实现它。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T20:08:06.310

如果先将 PIL 图像转换为 numpy 数组，这会快得多。以下是如何将值低于 10 的所有像素归零：

```
>>> import numpy as np
>>> arr = np.array(img)
>>> arr[arr < 10] = 0
>>> img.putdata(arr) 
```

或者，正如您在评论中所说，您将把图像的上半部分涂黑：

```
>>> arr[:arr.shape[0] / 2,:] = 0 
```

最后，由于您正在进行视频处理，请注意您也不必遍历各个帧。假设您有十帧 4x4 图像：

```
>>> arr = np.ones((10,4,4)) # 10 all-white frames
>>> arr[:,:2,:] = 0         # black out the top half of every frame
>>> a
array([[[ 0.,  0.,  0.,  0.],
    [ 0.,  0.,  0.,  0.],
    [ 1.,  1.,  1.,  1.],
    [ 1.,  1.,  1.,  1.]],

   [[ 0.,  0.,  0.,  0.],
    [ 0.,  0.,  0.,  0.],
    [ 1.,  1.,  1.,  1.],
    [ 1.,  1.,  1.,  1.]],
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:08:17.337

这是多处理图像的一个很好的候选者。如果您将图像分割成像素块，您可以非常轻松地并行处理图像，也就是说，如果它足够大，或者您正在对大量图像执行此操作。

1.  将图像分解为定义为元组的块（左上 X、左上 Y、宽度、高度）
2.  将元组和图像句柄传递给各种线程，希望在线程池中。
3.  等待线程完成，然后继续使用您的图像。

这取决于图像大小以及您选择的线程数和块大小，当然可以线性加速您的过程。

# arrays - Scala，数组总是按名称调用，对吗？

> ID：13461156
> 
> 赞同：1
> 
> 时间：2012-11-19T19:56:08.390
> 
> 标签：arrays, scala, pass-by-reference

在 Scala 中，数组总是按引用传递，按名称调用，对吗？

所以，

```
def fun(ar: Array[Int]) = {} 
```

等于

```
def fun(ar: => Array[Int]) = {} 
```

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T20:57:42.993

> 在 Scala 中，数组总是按引用传递，按名称调用，对吗？

不。在 Scala 中，就像在 Java、C、C++（默认）、C#（默认）、Smalltalk、Ruby、Python 以及几乎所有其他曾经创建的面向对象语言中一样，参数是按值传递的。

您*可以*显式声明一个按名称参数，然后（但*仅在那时*）与该参数对应的参数将按名称传递。Scala*永远不会*通过引用传递。

> 所以，
> 
> ```
> def fun(ar: Array[Int]) = {} 
> ```
> 
> 等于
> 
> ```
> def fun(ar: => Array[Int]) = {} 
> ```

不它不是。在第一种情况下，数组（或者更确切地说是指向数组的指针）将按值传递，在第二种情况下按名称传递。在这两种情况下都不会通过引用传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T10:36:54.387

为了进一步澄清，维基百科的以下[引用](http://en.wikipedia.org/wiki/Evaluation_strategy#Call_by_sharing)可能会有所帮助：

> 但是，“共享呼叫”一词并不常用。不同来源的术语不一致。例如，在 Java 社区中，他们说 Java 是按值传递的，而在 Ruby 社区中，他们说 Ruby 是按引用传递的，尽管这两种语言表现出相同的语义。

对于 C++ 程序员，面对 Scala/Java 使用的术语，恕我直言，有两点可能会导致混淆：

*   C++ 程序员将按值传递解释为“调用了复制构造函数”，这意味着调用者可以在不修改被调用者实例的情况下改变传递的对象。Scala/Java 并非如此。当 Java 程序员[声称](http://javadude.com/articles/passbyvalue.htm)Java 是按值调用时，我总是将其翻译成“对象***引用***是按值传递的”。
*   对象的可能修改类似于 C++ 的引用参数（调用者对相同的实例进行操作）。从这个角度来看，我们可以得出结论，Scala 使用了引用调用。但是通过引用调用是由传递参数的可能重新分配定义的。这在 Scala 中是不可能的。由于评估策略既不是（类似 C++ 的）按值传递也不是按引用传递，我认为术语传递共享是最合适的。

# ms-access - MS Access 根据子表单条目填充表

> ID：13461160
> 
> 赞同：0
> 
> 时间：2012-11-19T19:56:14.320
> 
> 标签：ms-access

我有一个我们组织的课程注册数据库。它跟踪的主要内容是：用户信息（姓名等），跟踪信息（即您的专业前：生物学）和课程信息（哪些课程适用于哪些课程）。

所以数据结构看起来像这样。

```
tblUsers
UserID (PK)
FirstName
LastName
.
tblUserTrack
UserTrackID (PK)
UserID (FK) - links to tblUsers
TrackID (FK - links to tblTrack).
.
tblTrack
TrackID (PK)
TrackName
.
tblCourses
CourseID (PK)
CourseName
TrackID (FK links to tblTrack)
.
tblRegistrationNew
RegistrationID (PK)
UserTrackID (FK links to tblUserTrack)
Grade
CompletionDTTM 
```

注册表单有 3 个元素： 父表单包含用户人口统计信息 轨道子表单包含用户/轨道信息，通过 UserID 链接到父表单。您可以毫无问题地向用户添加曲目（在我们的组织中，他们可以有多个曲目，例如生物学和化学）。

第三种形式的目标是根据用户输入的内容填充注册信息。但是，每当我将注册表添加到查询中时，它都不会更新（从 SQL 的角度来看这是有道理的）。

更新跟踪表时是否可以在注册表中更新/插入行？如果有怎么办？我有 MS SQL Server 和 C#.NET 经验，所以我并不完全无知（只是大部分）。

我还发现这个链接到一个做得很好的注册数据库，但它没有我需要的功能。 [http://office.microsoft.com/en-gb/templates/classroom-management-database-TC001018407.aspx?CategoryID=CT101426031033&av=ZAC000&AxInstalled=1&c=0](http://office.microsoft.com/en-gb/templates/classroom-management-database-TC001018407.aspx?CategoryID=CT101426031033&av=ZAC000&AxInstalled=1&c=0)

编辑：相当接近。我意识到我可以对注册表进行左连接，但我无法更新表单中的记录。查询在这里：

选择 tblUserTrack.UserTrackID, tblUserTrack.UserID, tblUserTrack.TrackID, tblCourses.[Course Titles], tblRegistrationNew.Grade, tblRegistrationNew.CompleteDTTM FROM (tblUserTrack INNER JOIN tblCourses ON tblUserTrack.TrackID = tblCourses.TrackID) LEFT JOIN tblRegistrationNew ON tblUserTrack.UserTrackID tblRegistrationNew.UserTrackID；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:44:30.450

所以没有真正好的解决方案。我尝试了对数据库设计的各种修改，但我上面写的已经设计得很好了。为了我的需要，我有一个带有两个子表单的表单。主要表格有学生的人口统计信息，例如姓名、地址。第一个子表单是下拉列表中的轨道（基本上是学位，即生物学），它填充了 tblUserTrack 表。然后，我将代码放入 AfterInsert 事件中，以便在用户插入新行时在 tblRegistration 表中生成新行。

```
Private Sub Form_AfterInsert()

    Dim strSQL As String

    strSQL = "INSERT INTO tblRegistration (UserTrackID, CourseID) " & _
        "SELECT tblUserTrack.UserTrackID, tblCourses.CourseID FROM tblUserTrack INNER JOIN " & _
        "tblCourses ON tblCourses.TrackID = tblUserTrack.TrackID " & _
        "WHERE tblUserTrack.UserID = " & UserID.Value & "AND tblUserTrack.UserTrackID NOT IN " & _
        "(SELECT tblRegistration.UserTrackID FROM tblRegistration INNER JOIN tblUserTrack ON tblUserTrack.UserTrackID = tblRegistration.UserTrackID " & _
        "WHERE tblUserTrack.UserID = " & UserID.Value & ")"

    DoCmd.RunSQL (strSQL)

End Sub 
```

在此之后，它的工作令人满意。我唯一没有做的是处理曲目更改时的情况（即从生物学到化学），在这种情况下，我指示用户只需删除旧曲目（生物学）并插入新曲目（化学）。经过许多小时的研究后，总而言之，实际上没有办法进行“级联插入”，这是我需要做的，至少据我所知。至少现在我知道代码在 SQL 执行方面做了什么。

# javascript - 如何制作具有交互功能的 HTML5 小部件？

> ID：13461163
> 
> 赞同：2
> 
> 时间：2012-11-19T19:56:18.480
> 
> 标签：javascript, html, iframe, embed, slideshow

我是一名初学者（有 4 个月的 HTML5 经验），在一家非营利组织做志愿者，我想创建一个可嵌入的小部件。我想让它具有交互性，就像我想显示几张以 Flash 广告的方式工作的图片（想想幻灯片效果），我希望能够使其可共享到社交网络，如果有人想要他们可以嵌入小部件他们能。此外，我希望能够放置将它们带到其他页面的按钮。

我一直在网上搜索它，似乎 iframe 是要走的路。我是正确的还是有其他方法可以实现我想要的？

更新：

我需要类似于此处显示的示例：[http ://www.quackit.com/html_5/tags/html_iframe_tag.cfm](http://www.quackit.com/html_5/tags/html_iframe_tag.cfm)

但有分享它的选项和幻灯片的号召性用语选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:18:58.360

该`iframe`标签对于在其他人的页面上“嵌入”您的小部件很有用（这是嵌入 Youtube 视频的方式）。请记住`iframe`，无论其放置在何处，其内容产生的流量都会计入您的带宽，因为它就像您服务器上该内容的“门户”。

# java - 检查是否有人在 wait() / notify() 中等待

> ID：13461166
> 
> 赞同：1
> 
> 时间：2012-11-19T19:56:24.460
> 
> 标签：java, concurrency

是否可以在调用之前检查是否至少有一个线程正在等待`notifyAll()`？

我有一个队列，厨师把菜放进去，而人们来拿菜。如果厨师将菜放在空队列中，则必须通知人们他们可以来（`wait()`如果队列是空的并且他们想得到菜，则设置为）。

所以该方法以

```
public synchronized void put(String[] dishes){
    if(dishesQueue.size() == 0){
        notifyAll();
    }
    (...)
} 
```

但是现在的问题是，当厨师第一次放菜时，队列是空的，但还没有人在等，所以我得到了一个`java.lang.IllegalMonitorStateException`。有没有办法先检查是否有线程在等待，如果是，`notifyAll()`？或者我是否使用了一些“棘手”的解决方案`boolean firstTime`？

另外为了理解，即使只有厨师调用`put(...)`，该方法也必须`synchronized`如此，因为它与dishsQueue一起操作，该方法也被该`get()`方法操作？

# sitecore - Sitecore 多站点实施

> ID：13461169
> 
> 赞同：2
> 
> 时间：2012-11-19T19:56:37.463
> 
> 标签：sitecore, sitecore6

我的客户拥有 30 多个独立运营的组织单位。目前，所有 OU 都有由客户的 IT 部门在不同 CMS 产品的单独实例中管理的网站。他们决定使用 Sitecore，因为它宣传的多站点功能。

不幸的是，当前 (6.5/6.6) 的默认实现无法正常工作，原因如下：

1.  每次站点更改（添加/删除）都需要更改 web.config。
2.  所有内容项都必须位于“/sitecore/content”节点下。我们更愿意在`/sitecore`eg `/sitecore/OU1`,`/sitecore/OU2`等下创建多个节点...
3.  所有模板都必须在`/sitecore/Templates`. 我们更愿意在每个组织单位下创建“模板”文件夹，例如`/sitecore/OU1/Templates`,`/sitecore/OU2/Templates`等...
4.  所有布局都必须在同一个文件系统目录下`/sitecore/Layouts/`并且也在同一个文件系统目录中。随着网站数量的增加，这肯定会变得混乱。`/sitecore/OU1/Layouts/`并且`/sitecore/OU2/Layouts`绝对是可取的
5.  我们需要隔离这些站点以进行管理。每个站点管理员都需要登录并仅查看与其站点相关的内容/项目。因此，如果我们锁定/隐藏顶级 OU 节点，则更易于维护。
6.  我们还需要隔离文件系统，以便开发人员在 web.config 中出错时不会关闭所有 30 多个站点。

在最近的 Sitecore 研讨会上，[Tim Ward 介绍了在 Sitecore 中实施多个站点的不同方法](http://symposiumna.s3.amazonaws.com/2012/Developer-Multiple%20ways%20to%20Multisite%20Solutions-TWard.pdf)。不幸的是，没有办法知道他指的是哪些产品。我不在，但我的老板出席了。我已尝试与 Sitecore 取得联系，但尚未收到回复。

我还联系了 Sitecore，询问有关 Sitecore Foundry 是否旨在满足这一需求的信息，但没有回应。

任何人都知道实现这样多个站点 Sitecore 的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T21:01:09.543

听起来 Tim 的多站点解决方案确实适合您。它适用于需要隔离并且需要适合为其开发的独立供应商的大型多站点平台。

Sitecore Foundry 不适合您，它适用于更小类型的网站，并且不提供任何类型的隔离。

可以[在 github](https://github.com/jerrong/Sitecore-Multisite-Manager)上找到 Tim 的解决方案（您可能已经从幻灯片中获得）：

您可以通过 tiw@sitecore.net 给他发送电子邮件，他通常会很快回复。

他还活跃在[SDN 论坛上](http://sdn.sitecore.net/Forum.aspx)，假设您可以访问该论坛。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-29T13:38:45.050

不幸的是，Tim 的多站点解决方案不适用于我们的情况。我们最终做的是：

1.  `/sitecore/content`在（如`jammykam`建议的）下创建多个容器
2.  在 [1] 中创建与每个容器对应的多个 IIS 站点和应用程序池
3.  修改站点的`rootPath`属性（针对每个站点）。`website``web.config`
4.  修改权限，使用户可以访问其对应的容器。

我们仍然必须根据 sitecore 约定在下创建模板`/sitecore/Templates`和布局。`sitecore/layouts`通过分离 IIS 站点和应用程序池以及权限来实现隔离。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T03:05:32.907

我同意 Ruud 的观点，即 Tim 的多站点解决方案可能最能满足您的需求，这也是我很快会考虑的事情，我没有参加 Symposium，但它看起来非常有希望实现良好的分离。

1.  是的，不幸的是，您需要为每个条目添加一个条目。
2.  您可以将它们设置为 /sitecore/content/OU1、/sitecore/content/OU2 等
3.  您可以再次将它们设置为 /sitecore/templates/OUCommon、/sitecore/templates/OU1、/sitecore/templates/OU2
4.  同样，您可以将它们放在子文件夹中，但是正如您所说的那样会变得混乱。
5.  您实际上已经可以实现这一点。中断权限继承，因此您的角色（特别是 sitecore/Everyone）没有对 /sitecore/content 节点的读取访问权限，然后您的每个组将特别具有对每个单独站点/媒体库的继承的读取/写入/删除访问权限。将您的用户添加到特定角色中，他们将只能看到他们有权访问的树的部分。您还可以将此扩展到工作流，以便只有具有权限的用户才能批准相应的项目。虽然发布变得很棘手，但是您可以设置 Publishing.CheckSecurity=true，您只需要正确设置您的权限。安全访问查看器非常擅长查看为不同角色设置的权限。但与蒂姆的多站点解决方案相比，
6.  是的，重新启动将导致所有这些重新启动！我还希望看到日志文件的分离，以便更好地调试不同的站点。

# javascript - 使用带有用户脚本的 jquery

> ID：13461171
> 
> 赞同：0
> 
> 时间：2012-11-19T19:56:37.673
> 
> 标签：javascript, jquery

我想获得 div id。在 div 中，如果标签包含 textToSearch，我想隐藏它。这该怎么做？

我也想在页面加载之前运行这个脚本。我不想看到页面的通行证。

这是我的代码：

```
<div class="main">
  <div class="content">
     <div class="whitebox">
            <div class="content">
                <div id="t512848" class="entry0">
                     <a>test</a>
                </div>
                <div id="t512849" class="entry0">
                     <a>galatasaray!</a>
                </div>
            </div>
     </div>
  </div>
</div> 
```

用户脚本...

```
function main($) {
    textToSearch = "test";
    $(".content").children().each(function(n, i) {
    var id = this.id;
    $('div.entry0').each(function(index){
        var that = this;
        $(this).find("a:contains('"+textToSearch+"')").each(function(index) {               
            //$(#id).hide();
            console.log(this);
        });
    }); 
   });
}

addJQuery(main); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:04:14.037

不需要使用`each`方法，你可以使用`has`方法并隐藏div：

> 将匹配元素集减少为具有与选择器或 DOM 元素匹配的后代的元素。

```
$('.entry0').has("a:contains('"+textToSearch+"')").hide() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:04:11.647

试试这个：

```
function main($) {
    textToSearch = "test";

    $(".content").children().each(function(n, i) {
        var id = this.id;
        $('div.entry0').each(function(index){
            var that = this;
            $(this).find("a:contains('"+textToSearch+"')").each(function(index, element) {               
                $(element).hide();
            });
        });
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T20:05:07.310

此示例将获取所有具有匹配文本的锚标记的父 div 的 id。我还包含了一个 jsfiddle 示例的链接。

**HTML**

```
<div id="d1" class="entry0">
    <a>test</a>
</div>
<div id="d2" class="entry0">
    <a>test1</a>
</div>
<div id="d3" class="entry0">
    <a>test</a>
</div> 
```

**JS**

```
textToSearch = "test";

$(".entry0").each(function(index) {
    $(this).find("a").each(function(index) {
        if ($(this).text() == textToSearch) {
            alert($(this).parent().prop("id"));
        }
    });
});​ 
```

[jsfiddle](http://jsfiddle.net/jesus_tesh/X3pmR/)

**编辑**

哦，我不知道有。查看其他答案并使用 has ，您就有了赢家。:)

# google-app-engine - GAE 上的 JDO 查询 和 价值观

> ID：13461174
> 
> 赞同：2
> 
> 时间：2012-11-19T19:56:41.807
> 
> 标签：google-app-engine, google-cloud-datastore, jdo

我如何查询这些实体的某个字段所在的实体列表或（如数据存储查看器中所示）。

```
Query query = pm.newQuery(DataObject.class, "this.SomeString == null"); 
```

上面的代码对我不起作用，尽管在数据存储中存在 SomeString 的实体，或者在使用数据存储查看器查看实体时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:08:38.147

您不能查询缺失值。从[查询限制](https://developers.google.com/appengine/docs/java/datastore/queries#Restrictions_on_Queries)：

> **缺少查询中指定的属性的实体将被忽略。**
> 
> 相同种类的实体不需要具有相同的属性。为了有资格作为查询结果，实体必须`null`为查询的过滤器和排序顺序中命名的每个属性拥有一个值（可能是 ）。如果不是，则该实体会从用于执行查询的索引中省略，因此不会包含在查询结果中。

但是，您可以按 过滤`null`，这样您的部分查询应该可以工作。

# java - 接口隔离避免在 Java 中重新编译

> ID：13461176
> 
> 赞同：0
> 
> 时间：2012-11-19T19:56:46.200
> 
> 标签：java, api, interface, compilation

接口隔离原则旨在通过新的更小的接口拆分具有凝聚力的功能组，从而避免在组件之间创建无用的依赖关系。

遵守的一个重要好处是，当组件与胖接口的不必要部分紧密耦合时，可以消除不必要的编译时间。

**但我想知道Java**中是否真的存在这种好处......

实际上，在 Java 中，例如与 C++ 世界相反，只要一个使用的方法不改变其签名，即使依赖模块（通常是接口）已经增长，客户端组件也可以保持不变，从而避免了重新编译后者的需要。

那么，编译耦合的好处在 Java 中真的很重要（甚至可能不存在）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:22:01.427

如果您的意思是整个接口的签名和成员数量，那么可以 - 只要接口不变并且 JVM/Java 版本不冲突，就不需要重新编译。

如果它正在向接口添加更多方法，那么不会。然而，Ceylon - 一种新的类 java 语言 - 正试图通过部分实现和适配器的接口做类似的事情：（页面底部） [http://planet.jboss.org/post/new_approach_to_introduction](http://planet.jboss.org/post/new_approach_to_introduction)

# c# - 如何仅保存 ASP.NET MVP 应用程序中更改的字段？

> ID：13461177
> 
> 赞同：0
> 
> 时间：2012-11-19T19:56:45.163
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我们有一个包含大约 25 个字段的表单。下面列出了几个字段。

```
<div class="form-field">
    @Html.LabelFor(m => m.FormData.FirstName)
    @Html.TextBoxFor(m => m.FormData.FirstName)
</div>
<div class="form-field">
    @Html.LabelFor(m => m.FormData.LastName)
    @Html.TextBoxFor(m => m.FormData.LastName)
</div>
<div class="form-field">
    @Html.LabelFor(m => m.FormData.MiddleInitial)
    @Html.TextBoxFor(m => m.FormData.MiddleInitial, new { @class = "small" })
</div> 
```

我有一个 FormData 对象，它存储表单的值，如果 ModelState 有效，稍后将与 Patient 对象同步。患者存储在会话中。

```
patient.FirstName = formData.FirstName;
patient.LastName = formData.LastName;
patient.MiddleInitial = formData.MiddleInitial; 
```

目前，每次发布数据时，都会将每个字段保存给患者。有没有办法只保存已更改的项目？或者在这里跟踪变化？我认为这会提高效率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:07:23.617

在我看来，过早优化 - [http://c2.com/cgi/wiki?PrematureOptimization](http://c2.com/cgi/wiki?PrematureOptimization)。在你看到有一些真正的性能损失之前，不要这样做。如果您只保存已更改的项目，我认为您几乎不会注意到一些差异。您很可能会使代码的可读性降低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:06:47.723

您可以为每个字段编写如下内容：

```
if( !patient.FirstName.Equals(formData.FirstName, StringComparison.CurrentCultureIgnoreCase)) 
  patient.FirstName = formData.FirstName; 
```

但这不会大大提高效率。这是一个简单的方法。另一种方法是在客户端使用 Javascript 跟踪更改，使用 <input> 元素和其他元素的 onchage 事件，但这更加困难。问题是它需要时间来编程和以后维护它。最简单的方法是使用更改的数据保存未更改的数据。如果会有性能问题，那么您可以进行这些更改。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:18:03.610

真正实现您想要的最佳方式是使用第三方 Javascript 库，例如 Knockout。这基本上是因为服务器不知道用户何时更改了浏览器中的某些内容，除非他“提交”了一些数据。要使用 KO.JS，您还需要传达 MVVM 方法。

然后，您可以执行以下操作：

```
@Html.TextBoxFor(m => m.FormData.LastName, new { data-bind="value: lastName"}) 
```

JS 代码将如下所示：

```
var ViewModel = function(first, last) {
    this.firstName = ko.observable(first);
    this.lastName = ko.observable(last);

    this.fullName = ko.computed(function() {
        return this.firstName() + " " + this.lastName();
    }, this);
};

ko.applyBindings(new ViewModel("FirstName", "LastName")); ​ 
```

这是一个很好的例子，它使用 Knockout 在数据发生变化时处理数据：

[http://jsfiddle.net/rniemeyer/LkqTU/](http://jsfiddle.net/rniemeyer/LkqTU/)

# ruby-on-rails - Rails - 在没有 GET 参数之一的情况下重定向到当前 url

> ID：13461178
> 
> 赞同：26
> 
> 时间：2012-11-19T19:56:47.870
> 
> 标签：ruby-on-rails

我在 Rails 应用程序中有一个非常简单的问题，我找不到一个优雅的解决方案。

我有一个类似的网址： [http ://www.example.com/some-path/?foo=123&baz=456](http://www.example.com/some-path/?foo=123&baz=456)

我想处理其中一个参数并重定向到： [http ://www.example.com/some-path/?baz=456](http://www.example.com/some-path/?baz=456)

我希望这通常适用于任何带有参数“foo”的 URL，所以我不想在重写代码中指定“baz”。

我想要的是这样的：

```
redirect_to request.path, :params => request.query_parameters.except(:foo) 
```

除了那不太行。我知道我可以手动正则表达式或解析查询字符串，但我认为有更好的方法。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-06-19T13:34:43.893

到目前为止我发现的最好方法是使用：

```
url_for(params.except(:obsolete_param_name)) 
```

**更新**

正如[Grosser](https://stackoverflow.com/users/110333/grosser)所提到的，这会在您的应用程序中打开一个安全漏洞，因为攻击者可以将主机作为 url 参数传递并将用户重定向到不同的网站。为了防止这种情况，您可以使用[rap1ds](https://stackoverflow.com/users/432787/rap1ds)的建议并指定只使用路径。

为此，您可以使用像这样的辅助函数：

```
def secure_path_for(params, *excluded_params)
  url_for(params.except(*excluded_params).merge(only_path: true))
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T19:59:44.237

在传递它之前删除 params[:foo] 怎么样。也许是这样的：

```
params.delete[:foo]
redirect_to request.path, :params => params 
```

它不是很优雅，但它只增加了一行。顺便说一句，Params 是一个辅助方法，它获取 url 的当前参数

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-10-13T17:32:37.360

在 Rails 5中，如果您尝试这样做，您将收到**未清理的请求参数错误**`url_for(params.except(:param))`

所以我找到了这种方法：

```
request_url = request.url # eg. http://qwe.com/path?param1=1&param2=2

query_hash = Rack::Utils.parse_query(URI.parse(request_url).query).except('param1')
url = query_hash.empty? ? request.path : "#{request.path}?#{query_hash.to_query}"

puts url #=> /path?my_param2=2

redirect_to url 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-27T19:40:22.383

```
uri = URI.parse(request.url)
new_query = uri.query.split("&").reject{|pair|
  k,v = pair.split("=")
  k =~ /^foo\[?/ # reject params named "foo" or "foo[anything"
}.join("&")
# if the new querystring is empty, assign nil instead of "" so we don't
# end up with a solitary question mark at the end of the url.
uri.query = (new_query.empty? ? nil : new_query)
redirect_to uri.to_s 
```

在尝试以“Rails 方式”做事时遇到一些不明显的问题后，我来到了上述解决方案，如果有这样的方式来解决这个问题。例如：

*   Rails 参数解析将自动为使用特殊方括号语法的查询参数实例化数组和散列：`?x[a]=1&y[]=2`becoming`{"x"=>{"a"=>"1"}, "y"=>["2"]}`等等，因此使用提供的查询字符串和参数例程的代码在这方面很难处理。因此，通过原始字符串值过滤参数可能很困难。即使是非 rails/rack CGI 模块也会为您提供数组而不是参数值的字符串。
*   rails`params`散列包括 GET、POST 和路由参数，例如`:action`和，`:controller`因此无论如何您都不能只是重用它来重建查询字符串。
*   因此，像 url_for 这样的 URL 助手并没有多大帮助。

考虑到这些问题，我发现我无法使用提供的框架功能来获取一个纯粹且不受干扰的查询字符串，从当前请求中按原样复制，这只是简单地删除了一个参数。然而，上面的代码似乎运行良好。

# c# - 允许使用 .NET 2.0 构建的 C# 应用程序在 .NET 4.0/4.5 上运行

> ID：13461185
> 
> 赞同：16
> 
> 时间：2012-11-19T19:57:15.840
> 
> 标签：c#, .net, .net-4.0, .net-2.0

我们有一个使用 .NET 2.0 Framework (VS2005) 构建的 C# DLL（我们称之为 DLL `myapp.exe`），我们发现我们的应用程序无法在仅安装了 .NET 4.0 或更高版本的机器上运行。`myapp.exe.config`为了让我们的应用程序在 .NET 4.0 上运行，我按照这篇文章[安装 .NET Framework V4.0 和运行 .NET 2.0/3.0/3.5/3.5Sp1 应用程序](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2009/08/03/installing-net-framework-v4-0-and-running-net-2-0-3-0-3-5-3-5sp1-applications.aspx)添加了以下几行

```
<startup>
  <supportedRuntime version="v4.0.30319"/>    
</startup> 
```

它正在工作。

然后我看到这篇文章还提到了以下内容（尤其是第二段）：

> 现在，我知道您不能只使用 3.5 Service Pack 1 应用程序并在 V4.0 CLR 上运行它。它需要 V2.0 CLR 或使用标签重新配置，以便弯曲应用程序以在 V4.0 CLR 上运行，而弯曲可能是您不想做的事情。
> 
> 但我没有意识到的是，安装 .NET 4.0 不会安装 2.0/3.0/3.5/3.5Sp1 应用程序所需的位。它只会安装 V4.0 CLR 和 V4.0 程序集，不会额外安装等效的 .NET Framework V3.5 Sp1。因此，您需要自己安装（例如）.NET Framework V3.5 Sp1 以及 .NET 4.0

从我的测试来看，这意味着我可以使用 .NET 4.0 框架（4.0 程序集/库）在 .NET 4.0 上运行我的 2.0 C# 应用程序，这与文章所说的相矛盾。

或者我在这里错过了什么？如果有人可以澄清这一点，这可能会有所帮助。微软并没有真正明确这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-19T13:35:09.263

我引用：

“.NET Framework 4 与使用 .NET Framework 1.1、2.0、3.0 和 3.5 版本构建的应用程序向后兼容。换句话说，使用 .NET Framework 早期版本构建的应用程序和组件将在.NET 框架 4。”

取自[*.NET Framework 中的版本兼容性*](https://docs.microsoft.com/en-us/dotnet/framework/migration-guide/version-compatibility)

您对 App.config 文件的想法是正确的，但是您真的用一行来限制自己。
我可以建议更自由地使用supportedRuntime 行吗？

例如：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v2.0.50727"/>
    <!-- 
    <supportedRuntime version="v3.5"/>  "The .NET Framework version 3.0 and 3.5 use version 2.0.50727 of the CLR."  
    -->
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0,Profile=Client" />
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" />
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0.1,Profile=Client" />
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0.1" />
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0.2,Profile=Client" />
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0.2" />
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0.3,Profile=Client" />
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0.3" /> 
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
  </startup>
</configuration> 
```

为什么被`supportedRuntime version="v3.5"`注释掉了？请记住，此配置标识您的应用程序与哪些版本的公共语言运行时 (CLR) 兼容。没有 3.0 或 3.5 版本的 CLR。请参阅[.NET Framework 版本和依赖项](https://msdn.microsoft.com/en-us/library/bb822049(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T19:59:18.503

> 从我的测试来看，这意味着我可以使用 .NET 4.0 框架（4.0 程序集/库）在 .NET 4.0 上运行我的 2.0 C# 应用程序，这与文章所说的相矛盾。

您*可以*使用 .NET 4 程序集在 .NET 4 上运行您的应用程序。但是，运行时行为总是有可能发生轻微变化，因为您不会使用与开发相同的运行时和框架。我怀疑这篇文章试图暗示您不会通过仅安装 4.0 来获得完全相同的行为，但是，正如您所看到的，它应该可以工作。

这样做可能很好，但如果这将成为标准部署选项，我建议对您的应用程序进行彻底测试。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-20T22:37:59.403

只是为了更简洁一点。在 App.config 中，您显示了对 CLR 的支持。从 .Net v2 开始，只有[2 个版本的 CLR](https://msdn.microsoft.com/en-us/library/bb822049(v=vs.110).aspx)。因此，以下内容将为您提供对 .Net v2 及更高版本的支持。确保包含使用您的项目构建的 exe.config 文件，否则您可能仍会看到要求安装 .Net 的弹出窗口。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v2.0.50727"/>
    <supportedRuntime version="v4.0"/>
  </startup>
</configuration> 
```

要支持 .Net v2 到 v3.5，请使用：

```
<supportedRuntime version="v2.0.50727"/> 
```

要支持 .Net v4.0 到 4.6，请使用：

```
<supportedRuntime version="v4.0"/> 
```

[有关配置应用程序以支持 .NET Framework 的](https://msdn.microsoft.com/en-us/library/jj152935(v=vs.110).aspx)更多信息，请参阅

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-20T12:57:23.620

来自：[微软文档](https://docs.microsoft.com/en-us/dotnet/framework/migration-guide/how-to-configure-an-app-to-support-net-framework-4-or-4-5)：

[![快照 .net 框架](../Images/523b43a2918eaac91dfda71f4d57e17b.png)](https://i.stack.imgur.com/uIesA.png)

您可以选择任何 App.config 文件设置。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-11-21T19:18:41.393

仅将 web.config 设置为 supportedRuntime version="v4.0.30319"/ 是不够的。

您需要在 Visual Studio 中实际打开您的项目，将其目标框架（属性--> 构建）更改为 4.0 - 然后将构建的解决方案重新部署到您的 4.0 客户端。2.0 和 4.0（system.web 等）之间的几个系统程序集有所不同 - 尽管正如前面的答案所建议的那样，已经提供了向后兼容性。

始终如一地为您的客户提供实际的“4.0 兼容”版本的唯一方法是针对 4.0 运行时对其进行编译。这将需要将任何第 3 方开源库也升级到其 4.0 版本。

# authorization - 授予对 IIS 7.5 ApplicationPoolIdentity 的访问权限

> ID：13461186
> 
> 赞同：40
> 
> 时间：2012-11-19T19:57:18.633
> 
> 标签：authorization, iis-7.5

当我尝试访问我的 ASP.NET MVC 应用程序时，我收到错误消息：

```
Access to the path 'C:\inetpub\wwwroot\website\bin\test.Platform.Config.xml' is denied 
```

我使用具有以下属性的应用程序池运行 IIS 7.5：

```
Identity: ApplicationPoolIdentity 
```

我想这是因为“ApplicationPoolIdentity”无法读取我尝试访问的文件。所以我的问题是：由于“ApplicationPoolIdentity”不是系统用户，我需要授予哪个用户或组进一步访问权限才能允许“ApplicationPoolIdentity”读取文件？

或者这个授权问题还有其他解释吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-11-19T21:01:09.680

好的，我有解决方案：

在 IIS 7.5 中使用“ApplicationPoolIdentity”时，相应的用户是（虚拟系统用户）：

```
"IIS AppPool\<AppPoolName>" 
```

您可以通过搜索此用户授予此用户权限并检查安全设置。在此处查看完整说明：

[http://www.iis.net/learn/manage/configuring-security/application-pool-identities](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)

# string - oracle 字符串操作

> ID：13461188
> 
> 赞同：1
> 
> 时间：2012-11-19T19:57:38.280
> 
> 标签：string, oracle

我有一个简单的字符串操作要在 Oracle 中完成，但找不到方法。假设定界符为 '-' 如果输入 str = 'abc-123-xyz-456' 和 lines = 1 那么输出应该是 'abc' 我得到这个使用

```
select substr('abc-123-xyz-456',1,instr('abc-123-xyz-456','-')-1) from dual; 
```

如果行 = 2，那么我需要输出为 abc-123

如果行 = 3，那么我需要输出为 abc-123-xyz 等等

我无法以有效的方式解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:07:13.437

我找到了一个很酷的解决方案：

```
select substr('abc-123-xyz-456',1,instr('abc-123-xyz-456','-',1,n)-1) 
  from dual; 
```

其中 n 是行数。让我知道是否有更好的方法，

# javascript - 加载图像后触发 javascript

> ID：13461189
> 
> 赞同：1
> 
> 时间：2012-11-19T19:57:46.510
> 
> 标签：javascript

我有一个可以用 ajax 脚本动态更改的 div：

```
{
     var xmlHttp = GetXmlHttpObject();
     var url="/dashboard/ajax/images_pop_ajax.asp";
     if (!xmlHttp){
          alert ("Browser does not support HTTP Request")
          return
     }
     xmlHttp.onreadystatechange=function()
     {
          if (xmlHttp.readyState == 1)
          {
               document.getElementById("images_inner").innerHTML = LoadingAlert;
          }
          if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete")
          {
               var result = xmlHttp.responseText;
               document.getElementById('images_inner').innerHTML = result;
               window.onload = function(){AdjustColumns();}
          }
     };
     xmlHttp.open("GET", url , true)
     xmlHttp.send(null)
}

function GetXmlHttpObject()
{
     var objXMLHttp=null;
     if (window.XMLHttpRequest)
     {
          objXMLHttp=new XMLHttpRequest();
     }
     else if (window.ActiveXObject)
     {
          objXMLHttp=new ActiveXObject("Microsoft.XMLHTTP");
     }
     return objXMLHttp;
} 
```

当**images_pop_ajax.asp**文件运行时，它返回 8 张图像，然后将这些图像放入 div 选项卡 id images_inner 中。完成后，我想调整页面的列，以便所有内容都对齐。所以我运行这个脚本：

```
function AdjustColumns()
{
     var ImgCol = document.getElementById('images_inner').offsetHeight;
     var ClassCol = 820;
     if (ImgCol > 574)
     {
          var ToAdd = eval(ImgCol - 574);
          document.getElementById('class_inner').style.height = eval(ClassCol + ToAdd) + 'px';
     }
} 
```

我遇到的问题是 AdjustColumns() 脚本在加载所有图像之前运行，因此列不对齐。加载图像后，如何使其运行？

提前谢谢了，

新杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:09:47.673

对于每个图像，您应该添加此事件并在它们全部加载时等待它们（使用计数器）

```
 var counter = 0;
   var image = new Image();
    //attachEvent("onload") for ie
    image.addEventListener("load", function() {
                                   counter++;
    if(counter == 8) adjustColumns();
    }, false);
    image.src = "image.jpg"; 
```

请注意，尽管有时它不能很好地工作，例如当图像已经在缓存中时。

# maven - 如何使用 Maven 正确包含 IBM EJB 映射

> ID：13461191
> 
> 赞同：0
> 
> 时间：2012-11-19T19:57:51.800
> 
> 标签：maven, websphere, ejb-3.0

我有一个打算安装在 WAS8.5 服务器上的 Maven EJB 项目。一切都可以编译到 EAR，但是，当我尝试部署应用程序时，MDB 映射不会自动填充。我提取了 jar（在耳朵内），我看到了......

```
--META-INF
----ejb-jar.xml
----ibm-ejb-jar-bnd.xml 
```

那么为什么没有提取映射呢？我的插件中有我需要的配置吗？

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ejb-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <ejbVersion>3.0</ejbVersion>
                <generateClient>true</generateClient>
                <archive>
                    <manifest>
                        <!-- generate manifest file properly -->
                        <addClasspath>true</addClasspath>
                    </manifest>
                </archive>
            </configuration>
        </plugin> 
```

更新：

这看起来更像是 ibm-web-bnd.xml 的问题。我已经确认那是在最后的战争中。

更新问题...

我正在使用激活规范，据我所知，这些在 ejb 项目的 ibm-ejb-bnd.xml 中得到了很好的处理。我可以在耳朵里看到它们。但是，它仍然不起作用。另外，我有一个由旧系统构建的耳朵，在这里我发现以下文件没有真正的区别......

*   应用程序.xml
*   ibm-web-bnd.xml
*   ibm-ejb-jar-bnd.xml

我还浏览了 web.xml 和 MANIFEST 文件，但什么也没看到。

最后，另一个奇怪的注意事项是当我尝试安装我看到的 maven 生成的...

![在此处输入图像描述](../Images/e047f49f002ac79c3050570ca95e20c5.png)

但是，当我尝试上传 Ant（以前的版本）时，我看到了这些选项

![在此处输入图像描述](../Images/f119796472bb85caf83dc91d5dbec9c0.png)

更新：根据评论

我将这些文件添加到一个名为 new 的文件夹和一个名为 old 的文件夹中。

```
~/My Documents/tmp/file
$ ls old/
application.xml  ibm-ejb-jar-bnd.xml  ibm-web-ext.xml
ejb-jar.xml      ibm-web-bnd.xml 
```

然后我区分了这两个文件夹，这是结果......

```
diff new/application.xml old/application.xml
5c5
<       <module id="Module_1352494482335">^M
---
>       <module id="Module_1276803943498">^M 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:47:14.507

I played around with so many things my resolution was unscientific. However, this SEEMED to work for me....

```
<plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <execution>
                    <phase>verify</phase>
                    <configuration>
                        <tasks>
                            <property name="was6.home" value="C:\Program Files\IBM\WebSphere\AppServer" />
                            <property name="user.install.root" value="${was6.home}" />   
                            <path id="was.classpath">
                                <fileset dir="${was6.home}/lib">
                                    <include name="webservices.jar" />
                                    <include name="wsprofile.jar" />
                                    <include name="j2ee.jar" />
                                    <include name="ffdc.jar" />
                                    <include name="wsdl4j.jar" />
                                    <include name="bootstrap.jar" />
                                    <include name="commons-logging-api.jar" />
                                    <include name="commons-discovery.jar" />
                                    <include name="ras.jar" />
                                    <include name="wsexception.jar" />
                                    <include name="emf.jar" />
                                    <include name="classloader.jar" />
                                </fileset>
                                <fileset dir="${was6.home}/dev">
                                    <include name="was_public.jar" />
                                </fileset>
                                <fileset dir="${was6.home}/plugins">
                                    <include name="com.ibm.ws.runtime.jar" />
                                </fileset>
                                <fileset dir="${was6.home}/java/jre/lib">
                                    <include name="xml.jar" />
                                    <include name="ibmorb.jar" />
                                    <include name="ibmorbapi.jar" />
                                </fileset>
                            </path>
                            <path id="wsejbdeploy.path">
                                <path refid="maven.compile.classpath"/>
                                <fileset dir="${was6.home}/java/jre/lib">
                                    <include name="xml.jar" />
                                    <include name="ibmorb.jar" />
                                    <include name="ibmorbapi.jar" />
                                </fileset>
                            </path>
                            <taskdef name="wasEjbDeploy" classname="com.ibm.websphere.ant.tasks.WsEjbDeploy" 
                                 classpathref="was.classpath" />

                            <echo> 
                                Hello World: FYI
                                project.name=${project.name}
                                project.artifactId=${project.artifactId}
                                project.groupId=${project.groupId}
                                project.version=${project.version}
                                project.packaging=${project.packaging}
                                project.description=${project.description}
                            </echo>

                            <delete dir="${project.build.directory}/ejbdeply-working" />
                            <wasEjbDeploy 
                                inputJar="${project.build.directory}/${project.artifactId}-${project.version}.jar" 
                                outputJar="${project.build.directory}/${project.artifactId}-${project.version}-OUTPUT.jar" 
                                wasHome="${was6.home}" 
                                classpathref="wsejbdeploy.path"
                                workingDirectory="${project.build.directory}/ejbdeply-working"
                                keepGenerated="true"
                                failonerror="true"
                                trace="true" />

                            <move file="${project.build.directory}/${project.artifactId}-${version}.jar" 
                                tofile="${project.build.directory}/${project.artifactId}-${version}-INPUT.jar"  />

                            <move file="${project.build.directory}/${project.artifactId}-${version}-OUTPUT.jar" 
                               tofile="${project.build.directory}/${project.artifactId}-${version}.jar"  />

                            <echo> **** Task WsEJBDeploy Complete! **** </echo>
                        </tasks>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T10:51:18.773

您可以尝试使用 was6-maven-plugin。

它做的事情完全相同（它使用 Websphere 自定义标签（如 wsejbdeploy）生成一个 ant 文件，然后使用 Websphere ws_ant 实用程序调用它），但它会为您计算大部分属性和路径。

还有一个名为 wsDefaultBindings 的 ant 任务（请参阅上面的链接），您可以直接使用它或通过 was6-maven-plugin 使用它，它可以帮助您使用外部文件创建绑定

[http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=%2Fcom.ibm.websphere.javadoc.doc%2Fweb%2Fapidocs%2Findex.html&com%2Fibm%2Fwebsphere%2Fant%2Ftasks %2FInstallApplication.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/index.jsp?topic=%2Fcom.ibm.websphere.javadoc.doc%2Fweb%2Fapidocs%2Findex.html&com%2Fibm%2Fwebsphere%2Fant%2Ftasks%2FInstallApplication.html)

问候

# html - CSS 100% 高度问题

> ID：13461192
> 
> 赞同：3
> 
> 时间：2012-11-19T19:57:56.093
> 
> 标签：html, css

我有一个我正在工作的小网站，除了内容区域之外，基本上所有内容都是固定的。我希望该内容区域一直扩展到浏览器窗口的底部。当网站首次以 1024x768 的屏幕分辨率加载时，它似乎可以工作，但如果向下滚动，副本会继续，但彩色背景不会。我一直在寻找解决方案，但到目前为止我还没有运气。

这是该网站的链接：[www.atriaseniorliving.com/cah/our_process.html](http://www.atriaseniorliving.com/cah/our_process.html)

编辑：

这是我正在使用的CSS：

```
#copyContainer {
width: 1000px;
height: 100%;
top: 0;
bottom: 0;
left: 0;
right: 0;
margin: 0 auto;
position: relative;

font-family: 'Droid Serif';
font-size: 16px;
line-height: 24px; 
```

}

```
#mainCopy {
display: block;
width: 390px;
height: auto !important;
margin: 127px 0 0 0;
padding: 30px;
position:absolute;
bottom:0;
top:0;
left:505px;
right:0;
z-index:99;

-webkit-box-shadow:  0px 0px 10px 0px rgba(51, 51, 51, .6); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:17:57.447

只需从#mainCopy 中删除“底部：0”。您的元素是绝对定位的，因此它只会到达其引用容器的底部，即#copyContainer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:02:06.827

我认为您使用`height:100%`不正确...`height:100%`指的是浏览器窗口的高度。当内部元素的高度大于其父元素时，您认为会发生什么？这就是你的情况：**#mainCopy 的高度比浏览器窗口大，因此高度比 #copyContainer 大**。您只需要更新几个样式：

```
#copyContainer {
   width: 1000px;
   margin: 0 auto;
   font-family: 'Droid Serif';
   font-size: 16px;
   line-height: 24px;
   height: 100%;
}
#mainCopy{
   display: block;
   width: 390px;
   margin: 127px 0 0 0;
   padding: 30px;
   float: right; //No need position:absolute
   bottom: 0;
   top: 0;
   left: 505px;
   right: 0;
   z-index: 99;
   -webkit-box-shadow: 0px 0px 10px 0px rgba(51, 51, 51, .6);
   box-shadow: 0px 0px 10px 0px rgba(51, 51, 51, .6);
}
#middleContainer {
   width: 100%;
   background: #D9D9D9;
   position: absolute;
   top: 128px;
   z-index: -1; //Because the image was over the text
} 
```

您可以做的另一件事来改进您的代码：

*   标题没有高度。没有高度
*   您正在使用 3 个不同的嵌套包装器
*   多用`position:absolute`多`position:fixed`用
*   而不是`with:1000px`使用`with:960px`
*   您正在使用`margin-top:xxx`绝对`top:xxx`定位的 div

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:10:18.307

影响填充元素的大小。

你的风格大概是这样

```
display: inherit;
width: 390px;
height: auto;
margin: 127px 0 0 0;
padding: 30px 0px 0px 0px;
position: absolute;
top: 0;
left: 505px;
z-index: 99;
-webkit-box-shadow: 0px 0px 10px 0px rgba(51, 51, 51, .6);
box-shadow: 0px 0px 10px 0px rgba(51, 51, 51, .6); 
```

# php - 如何在 PHP 中的 Curl 请求期间防止服务器过载

> ID：13461194
> 
> 赞同：0
> 
> 时间：2012-11-19T19:58:00.940
> 
> 标签：php, curl

我正在向 50 个站点发送 Curl 请求，以使用 Cron 作业检查它们的运行状态。然而，我每次都设法得到前 10-15 个站点的响应。我认为在该服务器可能会超载并停止执行之后。

示例代码：

```
 foreach ($sites as $site) {
       if(Visit("http://www.domain.com")) {
           //saving in database
        }
       }

function Visit($url)

 {

$agent = "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)";$ch=curl_init();

 curl_setopt ($ch, CURLOPT_URL,$url );

 curl_setopt($ch, CURLOPT_USERAGENT, $agent);

 curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);

 curl_setopt ($ch,CURLOPT_VERBOSE,false);

 curl_setopt($ch, CURLOPT_TIMEOUT, 5);

 $page=curl_exec($ch);

  $httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);

  curl_close($ch);

  if($httpcode>=200 && $httpcode<300) return true;

    else return false;

  } 
```

请向我建议一些技术来防止服务器过载并设法获得所有站点的响应。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T20:28:36.633

您可以尝试使用以下内容`curl_multi_exec`，只需`15.519232988358`检查 100 个不同的域

```
$url = "google.com
facebook.com
youtube.com
yahoo.com
baidu.com
wikipedia.org
live.com
twitter.com
qq.com
amazon.com
taobao.com
linkedin.com
blogspot.com
google.co.in
yahoo.co.jp
sina.com.cn
google.de
yandex.ru
msn.com
wordpress.com
google.co.jp
google.com.hk
bing.com
ebay.com
google.co.uk
google.fr
vk.com
microsoft.com
babylon.com
weibo.com
googleusercontent.com
163.com
tumblr.com
apple.com
mail.ru
pinterest.com
soso.com
google.com.br
tmall.com
google.es
paypal.com
google.ru
google.it
xhamster.com
craigslist.org
sohu.com
blogger.com
fc2.com
imdb.com
go.com
ebay.de
google.co.id
zedo.com
alibaba.com
mywebsearch.com
google.com.tr
adf.ly
stackoverflow.com
blogspot.in
redtube.com
amazon.co.uk
360buy.com
google.com.au
alipay.com
sogou.com
about.com
instagram.com
ebay.co.uk
nytimes.com
livedoor.com
google.pl
netflix.com
imgur.com
uol.com.br
dailymotion.com
wordpress.org
360.cn
cnet.com
godaddy.com
youporn.com
bp.blogspot.com
ameblo.jp
mediafire.com
adcash.com
globo.com
chinaz.com
weather.com
incredibar.com
neobux.com
xnxx.com
google.nl
ehow.com
douban.com
google.com.sa
4shared.com
vimeo.com
livejournal.com
dropbox.com
renren.com
doubleclick.com";

echo "<pre>";
$url = explode("\n", $url);
set_time_limit(0);

$start = microtime(true);
multiplePost($url);
echo PHP_EOL, microtime(true) - $start; 
```

**输出**

```
Status 301  for : http://www.google.com/ Error (x)
Status 302  for : https://facebook.com/ Error (x)
Status ok for : http://www.youtube.com/ Done (^)
Status ok for : http://www.yahoo.com/ Done (^)
Status ok for : http://baidu.com Done (^)
Status ok for : http://www.wikipedia.org/ Done (^)
Status 301  for : https://home.live.com/ Error (x)
Status ok for : http://twitter.com Done (^)
Status ok for : http://www.qq.com/ Done (^)
Status ok for : http://www.amazon.com/ Done (^)
Status ok for : http://www.taobao.com/ Done (^)
Status ok for : http://www.linkedin.com/ Done (^)
Status 302  for : https://accounts.google.com/ServiceLogin?service=blogger&passive=1209600&continue=http://www.blogger.com/home&followup=http://www.blogger.com/home<mpl=start Error (x)
Status ok for : http://www.google.co.in/ Done (^)
Status ok for : http://www.yahoo.co.jp/ Done (^)
Status 0  for : http://sina.com.cn Error (x)
Status ok for : http://www.google.de/ Done (^)
Status 301  for : http://www.yandex.ru/ Error (x)
Status ok for : http://www.msn.com/ Done (^)
Status ok for : http://wordpress.com Done (^)
Status ok for : http://www.google.co.jp/ Done (^)
Status ok for : http://www.google.com.hk/ Done (^)
Status ok for : http://www.bing.com/ Done (^)
Status 301  for : http://www.ebay.com Error (x)
Status ok for : http://www.google.co.uk/ Done (^)
Status ok for : http://www.google.fr/ Done (^)
Status ok for : http://vk.com Done (^)
Status ok for : http://www.microsoft.com/en-ng/default.aspx Done (^)
Status ok for : http://www.babylon.com/ Done (^)
Status ok for : http://weibo.com Done (^)
Status 0  for : http://googleusercontent.com Error (x)
Status 0  for : http://163.com Error (x)
Status 302  for : https://www.tumblr.com/ Error (x)
Status ok for : http://www.apple.com/ Done (^)
Status ok for : http://mail.ru Done (^)
Status ok for : http://pinterest.com Done (^)
Status 0  for : http://soso.com Error (x)
Status ok for : http://www.google.com.br/ Done (^)
Status ok for : http://www.tmall.com/ Done (^)
Status ok for : http://www.google.es/ Done (^)
Status 302  for : https://paypal.com/ Error (x)
Status ok for : http://www.google.ru/ Done (^)
Status ok for : http://www.google.it/ Done (^)
Status ok for : http://xhamster.com Done (^)
Status ok for : http://www.craigslist.org/about/sites/ Done (^)
Status 302  for : http://www.sohu.com/ Error (x)
Status 302  for : https://accounts.google.com/ServiceLogin?service=blogger&passive=1209600&continue=http://www.blogger.com/home&followup=http://www.blogger.com/home<mpl=start Error (x)
Status ok for : http://fc2.com Done (^)
Status ok for : http://www.imdb.com/ Done (^)
Status ok for : http://go.com Done (^)
Status 301  for : http://www.ebay.de Error (x)
Status ok for : http://www.google.co.id/ Done (^)
Status ok for : http://www.zedo.com/ Done (^)
Status ok for : http://www.alibaba.com/ Done (^)
Status ok for : http://home.mywebsearch.com/ Done (^)
Status ok for : http://www.google.com.tr/ Done (^)
Status ok for : http://adf.ly Done (^)
Status ok for : http://stackoverflow.com Done (^)
Status 302  for : http://www.google.com/ Error (x)
Status ok for : http://www.redtube.com/ Done (^)
Status ok for : http://www.amazon.co.uk/ Done (^)
Status ok for : http://360buy.com Done (^)
Status ok for : http://www.google.com.au/ Done (^)
Status 301  for : https://www.alipay.com/?src=alipay.com Error (x)
Status ok for : http://www.sogou.com/ Done (^)
Status ok for : http://www.about.com/ Done (^)
Status ok for : http://instagram.com Done (^)
Status 301  for : http://www.ebay.co.uk Error (x)
Status ok for : http://www.nytimes.com/ Done (^)
Status ok for : http://www.livedoor.com/ Done (^)
Status ok for : http://www.google.pl/ Done (^)
Status 301  for : http://www.netflix.com/ Error (x)
Status ok for : http://imgur.com Done (^)
Status ok for : http://www.uol.com.br/ Done (^)
Status 301  for : http://www.dailymotion.com/ Error (x)
Status ok for : http://wordpress.org Done (^)
Status ok for : http://360.cn Done (^)
Status ok for : http://www.cnet.com/ Done (^)
Status ok for : http://www.godaddy.com/ Done (^)
Status ok for : http://www.youporn.com/ Done (^)
Status 0  for : http://bp.blogspot.com Error (x)
Status ok for : http://ameblo.jp Done (^)
Status ok for : http://www.mediafire.com/ Done (^)
Status 301  for : https://www.adcash.com/index.php Error (x)
Status 301  for : http://www.globo.com/ Error (x)
Status ok for : http://chinaz.com Done (^)
Status ok for : http://www.weather.com/ Done (^)
Status ok for : http://incredibar.com/essentials/homepage Done (^)
Status ok for : http://www.neobux.com/ Done (^)
Status 301  for : http://www.xnxx.com/ Error (x)
Status ok for : http://www.google.nl/ Done (^)
Status ok for : http://www.ehow.com/ Done (^)
Status 0  for : http://douban.com Error (x)
Status ok for : http://www.google.com.sa/ Done (^)
Status 301  for : http://www.4shared.com Error (x)
Status ok for : http://vimeo.com Done (^)
Status ok for : http://www.livejournal.com/ Done (^)
Status 302  for : https://www.dropbox.com/ Error (x)
Status ok for : http://renren.com Done (^)
Status ok for : http://www.google.com/doubleclick/ Done (^)

15.519232988358 <--------------- Total Time Taken 
```

**使用的功能**

```
function multiplePost($nodes) {
    $mh = curl_multi_init();
    $curl_array = array();
    foreach ( $nodes as $i => $domain ) {
        $domain = trim($domain);
        $curl_array[$i] = curl_init("http://$domain");
        curl_setopt($curl_array[$i], CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curl_array[$i], CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 (.NET CLR 3.5.30729)');
        curl_setopt($curl_array[$i], CURLOPT_CONNECTTIMEOUT, 5);
        curl_setopt($curl_array[$i], CURLOPT_TIMEOUT, 15);
        curl_setopt($curl_array[$i], CURLOPT_FOLLOWLOCATION, true);
        curl_multi_add_handle($mh, $curl_array[$i]);
    }

    echo PHP_EOL, PHP_EOL;

    $running = NULL;
    do {
        usleep(10000);
        curl_multi_exec($mh, $running);
    } while ( $running > 0 );
    $res = array();
    foreach ( $nodes as $i => $url ) {

        $curlErrorCode = curl_errno($curl_array[$i]);

        if ($curlErrorCode === 0) {
            $info = curl_getinfo($curl_array[$i]);
            $info['url'] = trim($info['url']);
            if ($info['http_code'] == 200) {
                echo "Status ok for : {$info['url']} Done (^)", PHP_EOL;
                $content = curl_multi_getcontent($curl_array[$i]); // get content
            } else {
                echo "Status {$info['http_code'] }  for : {$info['url']} Error (x)", PHP_EOL;
            }
        }
        curl_multi_remove_handle($mh, $curl_array[$i]);
        curl_close($curl_array[$i]);
        flush();
        ob_flush();
    }
    curl_multi_close($mh);
} 
```

# ftp - C# FTP 请求流锁定线程

> ID：13461206
> 
> 赞同：2
> 
> 时间：2012-11-19T19:58:39.320
> 
> 标签：ftp, stream, request

我正在创建一个用于通过 FTP 传输文件的 C# 应用程序。该代码在 5 个不同的系统上都可以正常工作，并且都具有良好的 Internet 访问权限，但我现在有第 6 个系统在关闭 FTPRequest 流时遇到问题。该系统位于该国的偏远地区，传输速度仅为 10 KBps 左右。我不知道传输速度是否与此问题有关。

这是我的代码。

```
string path = "ftp://ftp.myftpsite.com/SomeDirectory/SomeFile.avi";

FtpWebRequest reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri(path));

reqFTP.Credentials = new NetworkCredential(tbUsername.Text, tbPassword.Text);
reqFTP.KeepAlive = false;

reqFTP.Method = WebRequestMethods.Ftp.UploadFile;

reqFTP.UseBinary = true;
reqFTP.ContentLength = buffer.Length;

using (Stream strm = reqFTP.GetRequestStream())
{
   for (long l = 0; l < buffer.Length; l += 1024)
   {
      if (buffer.Length >= l + 1024)
      {
         strm.Write(buffer, (int)l, 1024);
      }
      else
      {
         int RemainingBytes = (int)(buffer.Length - l);
         strm.Write(buffer, (int)l, RemainingBytes);
      }
   }
}//Code gets stuck exiting the using statement 
```

我尝试不使用 using 语句并使用 .Close() 关闭流，但它也卡在那里。

我一直在寻找可能的解决方案和解决方法 3 天，但无法解决这个问题。仅供参考，此代码在与我的主程序不同的线程中运行，并且仅在 6 个系统中的 1 个系统上失败。

# javascript - IPython Notebook - 在 Javascript 中检测内核是否忙/闲

> ID：13461211
> 
> 赞同：6
> 
> 时间：2012-11-19T19:58:48.550
> 
> 标签：javascript, python, ipython

我目前正在尝试让交互式绘图与 IPython 笔记本一起使用。我遇到的一个问题是，当通过 javascript 中的 IPython.notebook.kernel.execute 方法执行 Python 代码时，我无法知道这段代码何时完成执行。有没有一种简单的方法可以检测内核是否忙/闲，以便我可以告诉 Javascript 闲置直到它完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:41:33.810

内核状态可能是您正在寻找的：

[http://ipython.org/ipython-doc/dev/development/messaging.html#kernel-status](http://ipython.org/ipython-doc/dev/development/messaging.html#kernel-status)

你可以在 IPython notebook 的 kernel.js 中找到一些额外的灵感（只需要搜索“busy”）：

[https://github.com/ipython/ipython/blob/master/IPython/frontend/html/notebook/static/js/kernel.js](https://github.com/ipython/ipython/blob/master/IPython/frontend/html/notebook/static/js/kernel.js)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-10T22:38:46.147

我知道这是一个非常古老的问题，但以防万一有人在寻找......

```
 require(['base/js/namespace', 'base/js/events'], function (IPython, events) {
        events.on('kernel_idle.Kernel', yourFunction);
    }); 
```

# iphone - 设置一个 UIButton 来调用某个号码 Xcode

> ID：13461215
> 
> 赞同：0
> 
> 时间：2012-11-19T19:59:02.627
> 
> 标签：iphone, xcode

我有一个带有 4 个 UIButtons 的应用程序，我想为每个用户预编程电话号码。我是这样写的：

```
- (IBAction)callFirst:(id)sender {
[NSURL URLWithString:@"tel.0739421700"];
}

- (IBAction)callSecond:(id)sender {
[NSURL URLWithString:@"tel.0705652000"];
}

- (IBAction)callThird:(id)sender {
[NSURL URLWithString:@"tel.0705666900"];
}

- (IBAction)callFourth:(id)sender {
[NSURL URLWithString:@"tel.0702857900"];
} 
```

当我在模拟器上打开应用程序时，它会将我带到日志并显示错误。我应该怎么写呢？这就是我运行它时出现的情况。“return UIApplicationMain...”部分在其边缘标有绿色箭头。在右侧它显示“线程 1：信号 sigabrt”它来自 main.m 文件：

```
#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
@autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
}
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:07:23.250

1.  你没有[打开网址](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006728-CH3-SW14)
2.  你使用了错误的[url 方案](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/PhoneLinks.html)

像这样的东西应该工作：

```
- (BOOL)callPhoneNumberWithString:(NSString *)phoneNumberString {
    NSURL *url = [NSURL URLWithString:phoneNumberString];
    if ([[UIApplication sharedApplication] canOpenURL:url]) {
        [[UIApplication sharedApplication] openURL:url];
        return YES;
    }
    return NO;
}

- (IBAction)callFirst:(id)sender {
    [self callPhoneNumberWithString:@"tel:0123456789"]; 
} 
```

# xml - Magento XML 用简单的英语构建？

> ID：13461221
> 
> 赞同：0
> 
> 时间：2012-11-19T19:59:29.600
> 
> 标签：xml, magento, nodes

我一直在阅读有关 Magento 的文章，并且我了解它的请求周期等的核心流程。（基于配置的 MVC 和类覆盖等等。）但是，我似乎找不到关于事物细节的好文章/文档 -特别是当涉及为自定义模块等构建 config.xml 所需的不同节点时。或者任何关于 XML 构建的内容。如果有人可以将我引导到“真正的好东西”..文章，文档，教程..任何东西请。

谢谢

# grails - 禁用特定服务器的 Quartz 作业

> ID：13461226
> 
> 赞同：1
> 
> 时间：2012-11-19T19:59:51.853
> 
> 标签：grails, tomcat6, quartz-scheduler

我们的应用程序部署到 2 个 Web 服务器以实现负载平衡和冗余。我们有几个每天运行一次的 Quartz 作业。该作业只需要在其中一个 Web 服务器上执行，而不是同时在两个服务器上执行。最终，我们可能会将这些作业移动到作业服务器，但现在，有没有办法通过配置或环境变量或我可以做的事情让这些作业只在我的一台服务器上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:26:03.370

您可以在`QuartzConfig.groovy`特定环境中启用或禁用 Quartz 插件。

```
environments {
    runQuartz {
        autoStartup = true
    }
    dontRunQuartz {
        autoStartup = false
    }
} 
```

所以一种方法是在你的Tomcat启动参数中使用`-Dgrails.env=runQuartz`和。`-Dgrails.env=dontRunQuartz`

一个可怕的 hack 是让您的 Quartz Job 尝试锁定一个共享数据库表 - 获得锁定的作业可以运行，否则，中止。

我认为第三种选择是使用 JDBC 作业存储，尽管我没有使用它的经验。[在Quartz 插件文档](http://grails-plugins.github.com/grails-quartz/guide/configuration.html)中简要提到。

# c# - 获取存储过程的值并将其作为参数传递给另一个存储过程

> ID：13461228
> 
> 赞同：0
> 
> 时间：2012-11-19T19:59:58.757
> 
> 标签：c#, asp.net, ado.net

我需要获取此存储过程的值并将其作为参数传递给另一个存储过程。

```
SqlCommand GetName = new SqlCommand("usp_GetName", sqlcon);
GetName.CommandType = CommandType.StoredProcedure;
GetName.Parameters.AddWithValue("@printer", printerguid); 
```

这个存储过程有一个简单的 select 语句，它在任何给定点只返回一行。我需要获取该数据并将 tat 作为参数传递到其他地方...请告诉我如何从此存储过程中获取值并将其存储在变量中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:01:34.100

如果它只返回一个值，请使用 this 并将其转换为它的类型 ( `string`, `int`, 等)

```
var returnedValue = GetName.ExecuteScalar(); 
```

如果您有超过 1 个字段，则应使用：

```
using(IDataReader reader = GetName.ExecuteReader())
{
  if (reader.Read())
  {
    // Populate any object using reader.GetString(reader.GetOrdinal("FieldName"))
    // Replace GetString for any data type you need.
  }
  else
  {
    // No rows returnes
  }
} 
```

# jmonkeyengine - jmonkey旋转并改变前进方向？

> ID：13461234
> 
> 赞同：2
> 
> 时间：2012-11-19T20:00:18.710
> 
> 标签：jmonkeyengine

如何旋转模型并随着旋转改变其前进方向？

我旋转，但它只是在轴上旋转，向前仍然是一样的。

这可能是一个菜鸟问题，但它一直在踢我的屁股。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T11:24:48.083

您可以使用`look at`方法将空间旋转到目标点。下面的示例使用`up`矢量 1,0,0对相机进行空间观察

```
spatial_x.lookAt(cam.getLocation(),new Vector3f(1,0,0)); 
```

如果您只想绕 x 轴旋转 0.2 弧度：

```
spatial_x.rotate(0.2,0,0); 
```

Y 轴为 1 弧度，Z 轴为 3 弧度：

```
spatial_x.rotate(0,1,3); 
```

# c# - 如何正确检索与 Windows 上的扩展关联的打开命令？

> ID：13461236
> 
> 赞同：3
> 
> 时间：2012-11-19T20:00:20.047
> 
> 标签：c#, c++, winapi, windows-shell

我试图找出用于打开给定扩展名的文件的可执行文件，因此如果扩展名没有，我可以显示该可执行文件的图标。

我知道 HKEY_CLASSES_ROOT 注册表项中文件类型的开放动词，但我发现它的值并不总是正确的。

例如，我目前在 OS X 上的 Parallels 中运行 Windows。PDF 文件的默认关联是 Safari。我通过资源管理器将默认关联更改为 Adob​​e Reader。注册表中的打开动词仍然是 Safari，但是当我双击 PDF 文件时，它会使用 Adob​​e Reader 打开。32 位和 64 位注册表具有相同的值。

有没有更好的方法来检索文件类型的关联，无论是使用 .NET 还是 winapi？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:15:01.117

您最好的选择可能是使用`Assoc*`函数组，例如`AssocQueryKey()`并[通过 PInvoke](http://www.pinvoke.net/default.aspx/shlwapi/AssocQueryString.html)。但是，我不知道 .NET 框架附带的众多类中的一个是否已经为您包装了它。但是 Shell API 为您提供了检索此信息的选项。[`AssocQueryString()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773471.aspx)

另请注意备注部分，其中指出上述函数是[`IQueryAssociations`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761400.aspx)接口的包装器，这使得您更有可能从 .NET 中获得另一条更直接的途径。

旧式功能是这样的：[`FindExecutable()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776419.aspx). 不过，不要使用它。它使用与`ShellExecute()`.

另请参阅[Windows 的答案：列出和启动与扩展关联的应用程序](https://stackoverflow.com/questions/24954)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-29T18:23:41.553

我的代码包括检查以防止一些常见错误...希望它有所帮助:-)

```
using System;
using System.Diagnostics;
using System.IO;
using System.Runtime.InteropServices;
using System.Text;

namespace HQ.Util.Unmanaged
{
    /// <summary>
    /// Usage: string executablePath = FileAssociation.GetExecFileAssociatedToExtension(pathExtension, "open");
    /// Usage: string command FileAssociation.GetExecCommandAssociatedToExtension(pathExtension, "open");
    /// </summary>
    public static class FileAssociation
    {
        /// <summary>
        /// 
        /// </summary>
        /// <param name="ext"></param>
        /// <param name="verb"></param>
        /// <returns>Return null if not found</returns>
        public static string GetExecCommandAssociatedToExtension(string ext, string verb = null)
        {
            if (ext[0] != '.')
            {
                ext = "." + ext;
            }

            string  executablePath = FileExtentionInfo(AssocStr.Command, ext, verb);

            // Ensure to not return the default OpenWith.exe associated executable in Windows 8 or higher
            if (!string.IsNullOrEmpty(executablePath) && File.Exists(executablePath) &&
                !executablePath.ToLower().EndsWith(".dll"))
            {
                if (executablePath.ToLower().EndsWith("openwith.exe"))
                {
                    return null; // 'OpenWith.exe' is th windows 8 or higher default for unknown extensions. I don't want to have it as associted file
                }
                return executablePath;
            }
            return executablePath;
        }

        /// <summary>
        /// 
        /// </summary>
        /// <param name="ext"></param>
        /// <param name="verb"></param>
        /// <returns>Return null if not found</returns>
        public static string GetExecFileAssociatedToExtension(string ext, string verb = null)
        {
            if (ext[0] != '.')
            {
                ext = "." + ext;
            }

            string executablePath = FileExtentionInfo(AssocStr.Executable, ext, verb); // Will only work for 'open' verb
            if (string.IsNullOrEmpty(executablePath))
            {
                executablePath = FileExtentionInfo(AssocStr.Command, ext, verb); // required to find command of any other verb than 'open'

                // Extract only the path
                if (!string.IsNullOrEmpty(executablePath) && executablePath.Length > 1) 
                {
                    if (executablePath[0] == '"')
                    {
                        executablePath = executablePath.Split('\"')[1];
                    }
                    else if (executablePath[0] == '\'')
                    {
                        executablePath = executablePath.Split('\'')[1];
                    }
                }
            }

            // Ensure to not return the default OpenWith.exe associated executable in Windows 8 or higher
            if (!string.IsNullOrEmpty(executablePath) && File.Exists(executablePath) &&
                !executablePath.ToLower().EndsWith(".dll"))
            {
                if (executablePath.ToLower().EndsWith("openwith.exe"))
                {
                    return null; // 'OpenWith.exe' is th windows 8 or higher default for unknown extensions. I don't want to have it as associted file
                }
                return executablePath;
            }
            return executablePath;
        }

        [DllImport("Shlwapi.dll", SetLastError = true, CharSet = CharSet.Auto)]
        static extern uint AssocQueryString(AssocF flags, AssocStr str, string pszAssoc, string pszExtra, [Out] StringBuilder pszOut, [In][Out] ref uint pcchOut);

        private static string FileExtentionInfo(AssocStr assocStr, string doctype, string verb)
        {
            uint pcchOut = 0;
            AssocQueryString(AssocF.Verify, assocStr, doctype, verb, null, ref pcchOut);

            Debug.Assert(pcchOut != 0);
            if (pcchOut == 0)
            {
                return "";
            }

            StringBuilder pszOut = new StringBuilder((int)pcchOut);
            AssocQueryString(AssocF.Verify, assocStr, doctype, verb, pszOut, ref pcchOut);
            return pszOut.ToString();
        }

        [Flags]
        public enum AssocF
        {
            Init_NoRemapCLSID = 0x1,
            Init_ByExeName = 0x2,
            Open_ByExeName = 0x2,
            Init_DefaultToStar = 0x4,
            Init_DefaultToFolder = 0x8,
            NoUserSettings = 0x10,
            NoTruncate = 0x20,
            Verify = 0x40,
            RemapRunDll = 0x80,
            NoFixUps = 0x100,
            IgnoreBaseClass = 0x200
        }

        public enum AssocStr
        {
            Command = 1,
            Executable,
            FriendlyDocName,
            FriendlyAppName,
            NoOpen,
            ShellNewValue,
            DDECommand,
            DDEIfExec,
            DDEApplication,
            DDETopic
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-19T20:08:49.487

您还需要检查 HKEY_USERS\{User}\Software\Classes。用户可以覆盖他们自己的默认应用程序。

# iphone - 在选定的表格视图单元格中执行 NSRegularExpression 操作

> ID：13461237
> 
> 赞同：0
> 
> 时间：2012-11-19T20:00:26.927
> 
> 标签：iphone, ios, nsarray, nsregularexpression

我想`NSRegularExpression`在选定的表格视图单元格中执行一个操作。然而，问题是，它不是对单个选定项目执行操作，而是检查整个数组，然后在除网站之外的所有项目上将答案“是”置空（因为单独的“if”语句）。

这是代码：

```
NSArray *array = @"http://www.apple.com/, http://www.stackoverflow.com/, http://www.test.com/, This is text, 416-555-5555, 416-123-4567, This is also text.";
   //more code

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSIndexPath* indexPath = [tableView indexPathForCell:sideSwipeCell];

    NSError *error = NULL;

    NSUInteger index = [buttons indexOfObject:button];
    NSDictionary* buttonInfo = [buttonData objectAtIndex:index];

    NSString *data = [[array objectAtIndex:indexPath.row] objectForKey:@"redirect_url"];

    NSRegularExpression *naNum = [NSRegularExpression regularExpressionWithPattern:@"^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$" options:NSRegularExpressionCaseInsensitive error:&error];
    NSRange naNumMatch = [naNum rangeOfFirstMatchInString:data options:0 range:NSMakeRange(0, [data length])];

    if ([data rangeOfString:@"http://"].location != NSNotFound) {
        // do something.
    } else if ((!NSEqualRanges(naNumMatch, NSMakeRange(NSNotFound, 0)))) {
        // do something
    } else {
        // do something
    }
} 
```

我该如何解决？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:31:47.790

为什么忽略提供的 indexPath 并创建一个新的？这几乎可以肯定你的问题。

如果它没有在这三种情况下添加一些日志消息并记录范围、匹配的内容和 indexPath。

# string - 一个字符在 1 处出现的所有最长子序列

> ID：13461239
> 
> 赞同：11
> 
> 时间：2012-11-19T20:00:31.430
> 
> 标签：string, algorithm, substring, dynamic-programming, longest-substring

在包含 n 个字符的序列 S 中；每个字符可能在序列中出现多次。您想找到 S 的最长子序列，其中相同字符的所有出现都在一个地方；

**例如。如果 S = aaaccaaaccbccbbbab，那么最长的子序列（答案）是 aaaaaaccccbbbb 即 = aaa__aaacc_ccbbb_b。**

换句话说，任何出现在 S 中的字母字符都只能出现在子序列中的一个连续块中。如果可能，给出一个多项式时间算法来确定解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T13:40:09.627

## 设计

下面我给出一个解决这个问题的动态规划算法的 C++ 实现。运行时间的上限（可能不严格）由 O(g*(n^2 + log(g))) 给出，其中 n 是字符串的长度，*g*是输入。我不知道表征这个数字的好方法，但对于由 n 个不同字符组成的字符串，它可能与 O(2^n) 一样糟糕，这使得该算法在最坏的情况下呈指数级增长。它还使用 O(ng) 空间来保存 DP 记忆表。（与子字符串不同，子序列可能由原始字符串中的不连续字符组成。）在实践中，只要不同字符的数量很少，算法就会很快。

提出该算法的两个关键思想是：

*   长度为 n 的字符串的每个子序列要么是 (a) 空字符串，要么是 (b) 其第一个元素位于某个位置 1 <= i <= n 的子序列，其后跟从位置 i 开始的后缀上的另一个子序列+1。
*   如果我们一次将一个字符（或更具体的字符位置）附加到子序列中，那么为了构建所有且仅满足有效性标准的子序列，**每当我们添加字符 c 时，如果添加了前一个字符 p，与 c 不同，则以后无法再添加任何 p 字符**。

至少有两种方法可以管理上述第二点。一种方法是维护一组不允许的字符（例如，使用 256 位数组），当我们将字符添加到当前子序列时，我们会添加这些字符。每次我们想在当前子序列中添加一个字符时，我们首先检查它是否允许。

另一种方法是意识到，每当我们必须禁止一个字符出现在子序列的后面时，我们可以通过简单地从剩余的后缀中删除该字符的所有副本来实现这一点，并使用这个（可能更短的）字符串作为子问题来解决递归地。这种策略的优点是更有可能使用相同的字符串参数多次调用求解器函数，这意味着当递归转换为 DP 时可以避免更多的计算。这就是下面代码的工作方式。

递归函数应该采用 2 个参数：要处理的字符串，以及最近附加到函数输出将附加到的子序列的字符。必须允许第二个参数采用特殊值以指示尚未附加任何字符（这发生在顶级递归情况下）。实现此目的的一种方法是选择一个未出现在输入字符串中的字符，但这引入了不使用该字符的要求。显而易见的解决方法是传递第三个参数，一个布尔值，指示是否已经添加了任何字符。但是只使用 2 个参数会稍微方便一些：一个布尔值，指示是否已添加任何字符，以及一个字符串。如果布尔值是假的，那么字符串就是要处理的字符串。如果为真，则字符串的第一个字符被认为是最后一个添加的字符，其余的是要处理的字符串。采用这种方法意味着该函数只需要 2 个参数，从而简化了记忆。

正如我在顶部所说，这个算法在最坏的情况下是指数时间的。我想不出一种完全避免这种情况的方法，但一些优化可以帮助某些情况。我已经实现的一个方法是始终在一个步骤中添加相同字符的最大连续块，因为如果您从这样的块中添加至少一个字符，那么添加少于整个块的字符永远不会是最佳的。其他[分支定界](http://en.wikipedia.org/wiki/Branch_and_bound)式优化是可能的，例如跟踪迄今为止的全局最佳字符串，并在我们可以确定当前子问题不能产生更长的子问题时缩短递归 - 例如，当字符数添加到到目前为止的子序列中，加上剩余的字符总数，小于迄今为止的最佳子序列的长度。

## 代码

```
#include <iostream>
#include <vector>
#include <string>
#include <algorithm>
#include <functional>
#include <map>

using namespace std;

class RunFinder {
    string s;
    map<string, string> memo[2];    // DP matrix

    // If skip == false, compute the longest valid subsequence of t.
    // Otherwise, compute the longest valid subsequence of the string
    // consisting of t without its first character, taking that first character
    // to be the last character of a preceding subsequence that we will be
    // adding to.
    string calc(string const& t, bool skip) {
        map<string, string>::iterator m(memo[skip].find(t));

        // Only calculate if we haven't already solved this case.
        if (m == memo[skip].end()) {
            // Try the empty subsequence.  This is always valid.
            string best;

            // Try starting a subsequence whose leftmost position is one of
            // the remaining characters.  Instead of trying each character
            // position separately, consider only contiguous blocks of identical
            // characters, since if we choose one character from this block there
            // is never any harm in choosing all of them.
            for (string::const_iterator i = t.begin() + skip; i != t.end();) {
            if (t.end() - i < best.size()) {
                // We can't possibly find a longer string now.
                break;
            }

                string::const_iterator next = find_if(i + 1, t.end(), bind1st(not_equal_to<char>(), *i));
                // Just use next - 1 to cheaply give us an extra char at the start; this is safe
                string u(next - 1, t.end());
                u[0] = *i;      // Record the previous char for the recursive call
                if (skip && *i != t[0]) {
                    // We have added a new segment that is different from the
                    // previous segment.  This means we can no longer use the
                    // character from the previous segment.
                    u.erase(remove(u.begin() + 1, u.end(), t[0]), u.end());
                }
                string v(i, next);
                v += calc(u, true);

                if (v.size() > best.size()) {
                    best = v;
                }

                i = next;
            }

            m = memo[skip].insert(make_pair(t, best)).first;
        }

        return (*m).second;
    }

public:
    RunFinder(string s) : s(s) {}

    string calc() {
        return calc(s, false);
    }
};

int main(int argc, char **argv) {
    RunFinder rf(argv[1]);
    cout << rf.calc() << '\n';
    return 0;
} 
```

## 示例结果

```
C:\runfinder>stopwatch runfinder aaaccaaaccbccbbbab
aaaaaaccccbbbb
stopwatch: Terminated. Elapsed time: 0ms
stopwatch: Process completed with exit code 0.

C:\runfinder>stopwatch runfinder abbaaasdbasdnfa,mnbmansdbfsbdnamsdnbfabbaaasdbasdnfa,mnbmansdbfsbdnamsdnbfabbaaasdbasdnfa,mnbmansdbfsbdnamsdnbfabbaaasdbasdnfa,mnbmansdbfsbdnamsdnbf
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaa,mnnsdbbbf
stopwatch: Terminated. Elapsed time: 609ms
stopwatch: Process completed with exit code 0.

C:\runfinder>stopwatch -v runfinder abcdefghijklmnopqrstuvwxyz123456abcdefghijklmnop
stopwatch: Command to be run: <runfinder abcdefghijklmnopqrstuvwxyz123456abcdefghijklmnop>.
stopwatch: Global memory situation before commencing: Used 2055507968 (49%) of 4128813056 virtual bytes, 1722564608 (80%) of 2145353728 physical bytes.
stopwatch: Process start time: 21/11/2012 02:53:14
abcdefghijklmnopqrstuvwxyz123456
stopwatch: Terminated. Elapsed time: 8062ms, CPU time: 7437ms, User time: 7328ms, Kernel time: 109ms, CPU usage: 92.25%, Page faults: 35473 (+35473), Peak working set size: 145440768, Peak VM usage: 145010688, Quota peak paged pool usage: 11596, Quota peak non paged pool usage: 1256
stopwatch: Process completed with exit code 0.
stopwatch: Process completion time: 21/11/2012 02:53:22 
```

最后一次运行耗时 8 秒并使用了 145Mb，显示了包含许多不同字符的字符串如何出现问题。

**编辑：**在另一个优化中添加：如果我们能证明它不可能比迄今为止发现的最好的一个，我们现在退出寻找开始子序列的位置的循环。这将最后一个示例所需的时间从 32 秒降至 8 秒！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:10:32.167

编辑：这个解决方案对于 OP 的问题是错误的。我不会删除它，因为它可能适合其他人。:)

考虑一个相关问题：找到给定字符连续出现的 S 的最长子序列。这可以在线性时间内解决：

```
char c = . . .; // the given character
int start = -1;
int bestStart = -1;
int bestLength = 0;
int currentLength = 0;
for (int i = 0; i < S.length; ++i) {
    if (S.charAt(i) == c) {
        if (start == -1) {
            start = i;
        }
        ++currentLength;
    } else {
        if (currentLength > bestLength) {
            bestStart = start;
            bestLength = currentLength;
        }
        start = -1;
        currentLength = 0;
    }
}
if (bestStart >= 0) {
    // longest sequence of c starts at bestStart
} else {
    // character c does not occur in S
} 
```

如果不同字符的数量（称为它`m`）相当小，只需将此算法并行应用于每个字符。这可以通过将`start`, `bestStart`, `currentLength`,转换`bestLength`为长数组来轻松完成`m`。最后，扫描`bestLength`数组以查找最大条目的索引，并使用数组中的相应条目`bestStart`作为答案。总复杂度为 O(mn)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T02:40:35.917

```
import java.util.*;

public class LongestSubsequence {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        String str = sc.next();

        execute(str);

    }

    static void execute(String str) {

        int[] hash = new int[256];
        String ans = "";

        for (int i = 0; i < str.length(); i++) {

            char temp = str.charAt(i);

            hash[temp]++;
        }

        for (int i = 0; i < hash.length; i++) {
            if (hash[i] != 0) {
                for (int j = 0; j < hash[i]; j++)
                    ans += (char) i;
            }
        }

        System.out.println(ans);
    }
} 
```

空间：256 -> O(256)，如果这样说是正确的，我不知道...，因为 O(256) 我认为是 O(1) 时间：O(n)

# scala - 在通用路由函数中使用 spray-json 编组器

> ID：13461241
> 
> 赞同：1
> 
> 时间：2012-11-19T20:00:33.643
> 
> 标签：scala, generics, spray, spray-json

我正在使用 Spray 编写 REST 服务。我有几条路线遵循相同的模式（GET /foos、POST /foos、GET /foos/:id 等），所以我想将这些路线分解成一个我可以调用的通用函数，比如`modelRoutes[Foo]("foos")`等`modelRoutes[Bar]("bars")`。

实际的数据库操作发生在 Controller[T] 特征上，我有隐式`object FooController extends Controller[Foo]`等。例如，`def getAll: List[T]`在 Controller[T] 和`def getAll: List[App]`AppController 上。

我遇到的问题是在里面`modelRoutes[T <: Model : Controller](prefix: String)`，模型的类型丢失了，所以 Marshaller[T] 和 Marshaller[List[T]] 找不到。到目前为止，我已经尝试了各种隐含和清单的排列，但没有运气。

如何在通用函数中正确地与 Marshaller 交互？

# silverlight - Silverlight 中 2D 游戏的最佳实践

> ID：13461245
> 
> 赞同：0
> 
> 时间：2012-11-19T20:00:43.380
> 
> 标签：silverlight, windows-phone-7, 2d

我目前正在开始开发类似于 Lemmings 的 2D 游戏。我只使用 Silverlight 为 Windows Phone 7 开发它。我选择 Silverlight 有两个原因：

*   我使用 XAML 创建（d）我的图形，因此不必缩放图像。
*   我可能想稍后将我的游戏移植到 Windows Phone 8（它不支持用 C# 编写的 XNA 游戏。）

是否有人在使用 XAML 图形方面有任何最佳实践？例如，什么是保持图形轻量级的最佳方法。我遇到的另一个问题是我没有“心跳”来放入游戏功能。换句话说，我没有 XNA 的“绘制”和“更新”方法。我应该只是一个计时器，然后它会是哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:14:56.217

尽管它不能直接回答您的问题，但我建议不要将 silverlight 用于除琐碎游戏之外的任何事情。

我建议使用更适合游戏的东西，例如：http: [//monogame.codeplex.com/](http://monogame.codeplex.com/)

这与 XNA 完全一样，适用于 Windows Phone 8，也适用于 iPhone、android 和许多其他平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:30:46.330

我实际上用 XAML 为 Windows Phone 7 制作了一个简单的游戏。我注意到的问题是性能下降很快。因此，如果您正在做任何高级的事情，XNA 和 Monogame 认为@Toad 是一个好主意。

在我的游戏中，我使用计时器来更新游戏，这不需要太频繁地运行（大约 5-10 次/秒），然后为游戏中的大部分动画和动作使用故事板。但是，如果你能做到这一点，真的取决于游戏的类型。

关于如何提高游戏性能的更多想法：

*   减少 XAML 代码量
*   如果使用动画，请尝试仅使用那些可以在[合成器线程](http://blogs.telerik.com/blogs/posts/10-12-13/ui-vs-compositor-demystifying-the-main-windows-phone-7-os-threads.aspx)上运行的动画（GPU 加速）
*   了解如何使用位图缓存等。
*   使用[帧速率计数器](http://www.jeff.wilcox.name/2010/07/counters/)、内存和[性能分析工具](http://debugmode.net/2011/09/17/windows-phone-7-application-performance-analysis/)
*   在真实设备上进行测试，最好是第一代设备，以确保其运行顺畅。模拟器并没有提供太多关于它将如何在真实设备上运行的信息。

我发现一些更好的链接对于提高性能非常有用：

[Windows Phone Performance Part 4 of many – GPU 的力量](http://dotneteers.net/blogs/vbandi/archive/2012/03/22/windows-phone-performance-part-4-of-many-the-power-of-the-gpu.aspx)

[Windows Phone 应用程序中的性能注意事项](http://msdn.microsoft.com/en-us/library/ff967560%28v=VS.92%29.aspx)

# ajax - CFWheels 使用 AJAX 进行分页

> ID：13461247
> 
> 赞同：0
> 
> 时间：2012-11-19T20:00:52.833
> 
> 标签：ajax, coldfusion, pagination, cfwheels

我已经搜索了整个互联网，所有这些，但找不到答案。

我正在使用 ColdFusion CFWheels 框架来查询数据库。查询是通过 AJAX 完成的，如下所示：

```
var id = $("#ship-id").val();

$.ajax({
    type: "POST",
    url: "/my-controller/my-method?format=json",
    data: {shipId: id},
    dataType: "json",
    success: function(response) {

        var resultHtml = '';

        $.each(response, function(i, value) {
            resultHtml += '<tr><td>' + value.FIRSTNAME + ' ' + value.LASTNAME + '</td></tr>';
        });

        $("#my-table").html(resultHtml);
    }
}); 
```

我需要对该结果集进行分页。在 CFWheels 中，您通常通过在查询中设置句柄、页面、perPage 和订单值来做到这一点，如下所示：

```
var order = model("order").findAll(
    select="id, firstname, lastname, email",
    where="orderid IN (#ValueList(orders.id)#)",
    handle="ordersQuery",
    page=params.page, 
    perPage=5, 
    order="lastname"
); 
```

然后，您只需将这一行放在您的视图中：

```
<cfoutput>#paginationLinks(handle="ordersQuery")#</cfoutput> 
```

但是......你怎么能让分页与 AJAX 调用一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:09:09.530

我认为这些方面的东西可能是你的答案（注意我删除了`url`这些参数并将这些参数添加到`data` ...

```
 $.ajax({
    type: "POST",
    data: {
        shipId: id,
        controller: myController,
        action: myAction,
        page: params.page,
    },
    dataType: "json",
    success: function(response) {

        var resultHtml = '';

        $.each(response, function(i, value) {
            resultHtml += '<tr><td>' + value.FIRSTNAME + ' ' + value.LASTNAME + '</td></tr>';
        });

        $("#my-table").html(resultHtml);
    }
  }); 
```

# c++ - 类型的无效操作数

> ID：13461248
> 
> 赞同：0
> 
> 时间：2012-11-19T20:00:54.823
> 
> 标签：c++

让

gf.h

```
typedef unsigned short gf_t;
class GaloisField{
public:
 gf_t * gf_exp;
 gf_t * gf_log;
 int gf_extension_degree, gf_cardinality, gf_multiplicative_order;
 static gf_t gf_ord();
 static int gf_inv(int x); 
```

gf.cpp

```
 gf_t GaloisField::gf_ord(){
   return gf_multiplicative_order;
 }

 int GaloisField::gf_inv(int x){
   return gf_exp[GaloisField::gf_ord() - gf_log[x]]; //line 181
 } 
```

我收到消息：gf.cpp:181: 错误：'gf_t' 和 'gf_t ()(gf_t)' 类型的无效操作数到二进制 'operator-'。为什么这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T20:06:10.893

由于`gf_inv`是静态函数，因此没有`this`指针。没有`this`，您将无法访问`gf_log`。

我不知道为什么错误消息如此神秘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:13:27.207

您的代码中有几个问题：

*   你定义`gf_ord`为`static`，它不能，因为它返回一个实例字段。你可能的意思是`const`，
*   同样的`gf_inv`
*   `gf_ord`返回 a `gf_t`，但内部字段是 int，可能会出现舍入错误

这也许是一个更好的声明：

```
#include <exception>

class GaloisField{
protected:
    gf_t * gf_exp;
    gf_t * gf_log;
    int gf_extension_degree, gf_cardinality;
    gf_t gf_multiplicative_order;
public:
    GaloisField();
    gf_t gf_ord() const;
    int gf_inv(int x) throw(std::runtime_error);
    // ...
}; 
```

在 gf.cpp 中

```
GaloisField::GaloisField() {
    // here you should initialize your protected fields to default values
    // and create the gf_exp and gf_log arrays
}

gf_t GaloisField::gf_ord() const {
    return gf_multiplicative_order;
}

int GaloisField::gf_inv(int x) {
     int idx = gf_ord() - gf_log[x];
     if (idx >= 0)
       return gf_exp[idx];
     throw std::runtime_error("gf_inv");
} 
```

如果你不在你的类中初始化数组，你会得到运行时错误，特别是在第 181 行。

也许您还需要另一个构造函数来为您的内部字段提供正确的值。

# excel - 为整行创建公式时，新的 Excel 公式存在问题

> ID：13461249
> 
> 赞同：0
> 
> 时间：2012-11-19T20:01:00.103
> 
> 标签：excel

我是做excel公式的新手。我将公式添加到电子表格某列的第一行。我想为表中的其余行添加它。我尝试向下拖动公式行的底部，它确实像我想要的那样将公式一直复制到表格的底部。但是，它现在只显示公式而不是实际计算值。如何获取它以查看计算值？

如果我为其中一个公式选择公式向导，它会在底部显示计算值，但表中的值只是公式而不是计算值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:12:41.737

...如果它出现在您的公式向导中，我唯一能想象的就是您处于`Show Formula`模式。

看看[这个链接](http://spreadsheets.about.com/od/excelformulas/qt/show_formulas.htm)

## 编辑：

我能想到的唯一其他问题是，在早期版本的 Excel 2007 中，来自 XML 文件的 XLSX 存在此问题 - 尝试应用最新的 Excel Service Pack。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:13:35.577

您可能已关闭自动计算。对于 Excel 2007 版及更高版本，请转到公式功能区并从计算选项项中选择“自动”。对于早期版本，请转至：工具、选项，然后单击计算选项卡。在此选项卡上。选择“自动”单选按钮。如果您处于手动计算模式，按 F9 将计算公式。

# android - 如果来自服务器的命令正在播放，则全屏播放 HTML5 视频

> ID：13461253
> 
> 赞同：0
> 
> 时间：2012-11-19T20:01:25.923
> 
> 标签：android, html, google-chrome, html5-video, mobile-browser

我有一个数据库字段，其中设置了不同的命令。例如播放、暂停和停止。客户端网页循环播放命令。如果命令是播放，它会调用另一个函数调用 playVideo() 并且应该全屏播放视频。如果我从视频标签的 onClick 事件调用 playVideo() 函数，它本身可以正常工作，但从服务器响应代码调用它时，它不能按预期工作。看看代码。我需要在 Chrome 桌面和 Chrome 移动浏览器上工作。

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>Demo: HTML5 video controls with JavaScript</title>
        <style media="screen" type="text/css">
            div.container {
                background-color: #ddd;
                margin: 0 0 20px;
                padding: 1px 1px 0;
                width: 1280px;
                height: 720px;
            }
            p {
                font: 14px/1.3 Verdana, sans-serif;
            }
            p.back {
                bottom: 20px;
                left: 10px;
                position: absolute;
            }
            ul, li, p {
                margin: 0;
                padding: 0;
            }
            ul {
                list-style: none;
                overflow: hidden;
                padding: 10px 0;
                width: 100%;
            }
            li {
                float: left;
            }
            li.play_pause {
                padding-left: 10px;
                width: 40px;
            }
            li.time {
                text-align: center;
                width: 160px;
            }
            li.volume {
                padding-right: 10px;
                width: 100px;
            }
            .control {
                color: red;
                cursor: pointer;
            }
        </style>
        <!-- <script src="test_scripts/video.js" type="text/javascript"></script> -->
        <script>
            //var video = document.getElementById('video');
            //video.addEventListener('click', function() {
            //video.play();
            //}, false);
            //init();

            window.onload = function() {
                var pElement = document.getElementById("video");            
                    pElement.load();                
            };
            /*
             var supportsOrientationChange = "onorientationchange" in window, orientationEvent = supportsOrientationChange ? "orientationchange" : "resize";
             */
            function createObject() {
                var request_type;
                var browser = navigator.appName;
                if (browser == "Microsoft Internet Explorer") {
                    request_type = new ActiveXObject("Microsoft.XMLHTTP");
                } else {
                    request_type = new XMLHttpRequest();
                }
                return request_type;
            }

            var http = createObject();

            var nocache = 0;

            /*
             window.addEventListener(orientationEvent, function() {
             alert('HOLY ROTATING SCREENS BATMAN:' + window.orientation + " " + screen.width + screen.height);

             }, false);*/

            window.setInterval(function() {
                waitForCommand();
            }, 3000);

            //waitForCommand();

            function init() {
                alert("init");
                var element = document.getElementById('video');
                element.load();
            };
            function waitForCommand() {
                nocache = Math.random();
                http.open('get', 'serverside/getcommand.php');
                http.onreadystatechange = insertReply;
                http.send(null);
            }

            var statusplay = 0;
            function insertReply() {
                if (http.readyState == 4) {
                    var response = http.responseText;
                    // else if login is ok show a message: "Site added+ site URL".

                    //alert(response);
                    if (response == "play" && statusplay == 0) {
                        alert("asddasd");
                        statusplay = 1;
                        var element = document.getElementById('video');
                        //element.click();
                        playVideo();
                    }
                }
            }

            function playVideo() {
                alert("123");
                //document.getElementById('myvideo').play();
                var element = document.getElementById("video");

                //element.webkitEnterFullScreen();
                if (element.mozRequestFullScreen) {
                    // This is how to go into fullscren mode in Firefox
                    // Note the "moz" prefix, which is short for Mozilla.
                    element.mozRequestFullScreen();
                    document.mozRequestFullScreen();
                    alert("1212");
                } else if (element.webkitRequestFullScreen) {
                    // This is how to go into fullscreen mode in Chrome and Safari
                    // Both of those browsers are based on the Webkit project, hence the same prefix.
                    //element.webkitRequestFullScreen();
                    //document.webkitRequestFullScreen();
                    alert("1313");
                } else {
                    alert("1414");
                    element.webkitEnterFullScreen();

                }
                //element.load();
                //element.addEventListener("loaded", doSomething, true);

                element.play();

                //$('#video').attr({'autoplay':'true'});
            }

            function doSomething() {
                //your redirect code here
                alert("12321");
                var element = document.getElementById('video');
                element.play();
                //playVideo();
            }
        </script>
    </head>
    <body>
        <!--video id="video" src="http://tinyvid.tv/file/12lx2x62kr9io.ogg"></video-->
        <div class="container" id="mydiv">
            <a href="#" onclick="playVideo()">Contact</a>
            <style type="text/css">
                .video_player {
                    width: 100%;
                    height: 100%;
                    display: block;
                }
            </style>
            <video class="video_player" id="video" name="video" autobuffer onclick="playVideo()"  poster="images/video-pc.jpg">
                <source src="videos/BigBuck.m4v"> </source>
                <source src="videos/BigBuck.webm" type="video/webm"> </source>
                <source src="videos/BigBuck.theora.ogv" type="video/ogg"> </source>
            </video>
            <ul class="controls">
                <li class="play_pause">
                    <p class="control" id="play">
                        Play
                    </p>
                </li>
                <li class="time">
                    <p>
                        <span id="timer">1</span>' of <span id="duration">0</span>'
                    </p>
                </li>
                <li class="volume">
                    <p>
                        Vol: <span class="control" id="v-dn" title="Volume down">-</span> / <span class="control" id="v-up" title="Volume up">+</span><span id="volume">10</span>
                    </p>
                </li>
            </ul>
        </div>
        <!--p><strong>NB:</strong> The video doesn't seem to work in Chrome for Mac/Linux; please use an alternative browser until I can resolve this problem.</p-->
        <p class="back">
            <a href="/2009/10/06/building-html5-video-controls-with-javascript/">Back to post: Building HTML5 video controls with JavaScript</a>
        </p>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:53:51.410

得到了我的答案，

requestFullscreen() 不能自动调用是因为安全原因（至少在 Chrome 中）。因此只能通过以下方式调用它：

click (button, link...) key (keydown, keypress...) HTML 元素的 allowfullscreen 属性* * W3 规范：“...为了防止嵌入的内容进入全屏状态，只有通过 allowfullscreen 属性特别允许的嵌入内容HTML iframe 元素将能够全屏显示。这可以防止不受信任的内容全屏显示..."

阅读更多：全屏 W3 规范

# asp.net - 使用 iEnumerable 填充下拉列表

> ID：13461254
> 
> 赞同：0
> 
> 时间：2012-11-19T20:01:27.647
> 
> 标签：asp.net, vb.net, entity-framework, linq, ienumerable

如何在 iEnumerable 参与者的中继器中填充下拉列表？

```
 Dim ac = pl.pages _
        .Where(Function(p) p.urlName = "2012Basketball" And p.organization.urlName = "CopleyHS") _
        .SelectMany(Function(p) p.actions) _
        .GroupBy(Function(s) s.eventId) _
        .[Select](Function(g) New With { _
          Key .EventId = g.Key, _
          Key .EventName = g.FirstOrDefault().event.name, _
          Key .Actions = g.[Select](Function(s) New With { _
            Key .ActionId = s.id, _
            Key .ActionName = s.name, _
            Key .Participants = s.event.participants.[Select](Function(k) New With { _
                Key .ParticipantName = k.name, _
                Key .ParticipantId = k.id _
            }) _
          }) _
       })

    rep_Events.DataSource = ac
    rep_Events.DataBind() 
```

.aspx：

```
<asp:Repeater ID="rep_Events" runat="server">
    <ItemTemplate>
        <b><%#Eval("EventName")%></b>
        <asp:Repeater ID="rep_Actions" runat="server" Datasource='<%#Eval("Actions") %>'>
            <ItemTemplate>
                <blockquote>
                    <%#Eval("ActionName")%> <br />
                    <asp:DropDownList ID="dd_participants" runat="server" DataSource='<%# Eval("Participants") %>' DataTextField='<%# Eval("ParticipantName") %>' DataValueField='<%#Eval("ParticipantId")%>'>
                    </asp:DropDownList>
                </blockquote>
            </ItemTemplate>
         </asp:Repeater>
    </ItemTemplate>
</asp:Repeater> 
```

错误发生在 asp:DrowDownList，指出 VB$AnonymousType_1 不包含名为 ParticipantName 的属性。

```
DataBinding: 'VB$AnonymousType_1`3[[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral,  PublicKeyToken=b77a5c561934e089],[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[System.Collections.Generic.IEnumerable`1[[VB$AnonymousType_2`2[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]], App_Web_2earclkn, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null]], mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]' does not contain a property with the name 'ParticipantName'. 
```

我尝试使用 .ToList 和 .AsEnumerable 转换参与者，但仍然出现错误。

任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:19:03.150

当然这属于第二个列表，Actions 没有 ParticipantName 属性。该属性在第三个列表的项目中。因此，您可以按如下方式更改代码：

```
 <asp:DropDownList ID="dd_participants" runat="server" DataSource='<%# Eval("Participants") %>' DataTextField="ParticipantName" DataValueField="ParticipantId">
                </asp:DropDownList> 
```

希望有帮助。

# node.js - 如何使用 mongoosejs 进行 findAll？

> ID：13461261
> 
> 赞同：0
> 
> 时间：2012-11-19T20:02:18.313
> 
> 标签：node.js, mongodb, mongoose

这是我的链接架构：

```
var LinkSchema = new Schema({

  user: ObjectId,

  text: {
      type: String,
      validate: [required,"Text is required"],
      index: {unique: true}
    },
    body: {
        type: String,
        validate: [required, 'Body is required'],
        index: { unique: true }
    },
    createdAt: {
        type: Date,
        'default': Date.now
    }
}); 
```

这是我的getLink：

```
LinkSchema.statics.getLink = function(apiKey,fn){

    var query = link.find('link.user.apiKey': apiKey);

    query.exec(function (err, links) {
      if (err) return handleError(err);
        res.send(items);

    });
} 
```

错误：

```
Unexpected Token':'  -> var query = link.find('link.user.apiKey': apiKey); 
```

我想我在做 mongoosejs 的 find() 错误。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:06:33.357

你可以简单地这样做：

```
var Link = db.model('Link', LinkSchema);
Link.find({}, function(err, results) {
    // res.send(results); for example.
}); 
```

find 函数的第一个参数是查询。例如，如果要搜索所有`body`等于的链接`blablabla`：

```
Link.find({body: 'blablabla'}, function(err, results) {
    // res.send(results); for example.
}); 
```

# sql - 有没有一种快速的方法来重新格式化 ColdFusion 查询列中的所有值？

> ID：13461262
> 
> 赞同：0
> 
> 时间：2012-11-19T20:02:23.317
> 
> 标签：sql, arrays, coldfusion, db2, string-formatting

我可以随意使用某个数据库，它将日期值存储为整数（即`20121119`​​）。我有几个查询可以检索这些值以进行报告显示，因此我需要将这些值转换为`m/d/yyyy`格式。

我看到了几种方法来做到这一点：

*   使用现有的全局 UDF 在显示中进行转换。这里的缺点是，如果重新使用查询，我需要复制转换显示值所需的代码。
*   解析 SQL 中的值以返回格式正确的值。我正在阅读 DB2/iSeries，它没有（据我发现）为此提供内置函数。
*   循环遍历结果集并一次转换每个值。这是我目前正在做的事情，但是对于更大的数据集，性能是一个问题：

    ```
    <cfscript>
        var i = 1;
        var _query = ARGUMENTS.query;

        if  (   !Len(Trim(ARGUMENTS.column))
            ||  !ListFindNoCase(_query.ColumnList, ARGUMENTS.column))
            return _query;

        for (i=1; i<=_query.RecordCount; i++) {
            _query[ARGUMENTS.column][i] =
                VARIABLES.Library.DateTime.ParseAS400Date(
                    _query[ARGUMENTS.column][i]
                    );
        }

        return _query;
    </cfscript> 
    ```

是否有一种简单/快速的方法可以将格式化函数应用于 ColdFusion 查询对象中的整个列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T23:10:59.793

正如@Dan 所指出的，有[一个内置函数](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=%2Fdb2%2Frbafzscatsformat.htm)可以将字符串转换为时间戳表示。既然你有一个 int，那么它会是这样的：

```
SELECT VARCHAR_FORMAT(TIMESTAMP_FORMAT(CAST(20121119 AS CHAR(8)), 'YYYYMMDD'), 'MM/DD/YYYY')
FROM SYSIBM.SYSDUMMY1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T20:49:03.727

这个页面可能会帮助您在您不知道的 db2 中进行解析。 [将日期格式化为字符串](https://stackoverflow.com/questions/9083121/format-date-to-string)

**编辑：**哎呀，你说它是一个整数。该`cast()`函数会将其转换为字符，然后您可以使用`concat()`和`substr()`格式化它。

使用该功能将是我的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T19:43:33.010

> 使用现有的全局 UDF 在显示中进行转换。

这是处理这个问题的正确方法。通常，格式不应该应用于数据模型（本质上是您的查询结果）。显示数据时应应用格式。这允许您在数据显示在不同的上下文中时以不同的方式格式化数据。此外，它还提高了代码的可读性。

> 这里的缺点是，如果重新使用查询，我需要复制转换显示值所需的代码。

这不是缺点。您将在显示数据的任何时候格式化数据以进行演示。格式化日期也不例外。

调用多次格式化数据的函数不是“代码重复”。您只是按照预期使用的格式使用格式化功能。

# python - 如何在 Python 中调用外部方法时解包元组？

> ID：13461265
> 
> 赞同：0
> 
> 时间：2012-11-19T20:02:36.003
> 
> 标签：python, arguments, argument-passing, iterable-unpacking, argument-unpacking

我在我的类中多次调用外部库的方法，如下所示：

```
class MyClass:

    const_a = "a"
    const_b = True
    const_c = 1

    def push(self, pushee):
        with ExternalLibrary.open(self.const_a, self.const_b, self.const_c) as el:
            el.push(pushee)

    def pop(self):
        with ExternalLibrary.open(self.const_a, self.const_b, self.const_c) as el:
            return el.pop() 
```

包含该`with`语句的行困扰着我，因为它们每次都需要将常量作为参数传递。我想将参数存储在像元组这样的预定义数据结构中，并将其传递给外部库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:04:16.060

你可以这样做：

```
args = (const_a, const_b, const_c)
ExternalLibrary.open(*args) 
```

该`*`语法将可迭代对象（元组、列表等）解包为函数调用中的各个参数。还有一种`**`将字典解包为关键字参数的语法：

```
kwargs = {'foo': 1, 'bar': 2}
func(**kwargs) # same as func(foo=1, bar=2) 
```

您也可以在同一个调用中同时使用两者，例如`func(*args, **kwargs)`.

# ios - 呈现的 ModalView 显示在自定义视图中，从中调用它

> ID：13461274
> 
> 赞同：1
> 
> 时间：2012-11-19T20:03:34.083
> 
> 标签：ios, uinavigationbar, modalviewcontroller, presentmodalviewcontroller, custom-view

![在此处输入图像描述](../Images/28e8384095ad00df147cf48c0aa26945.png)

上图显示了我的应用程序的架构。我创建了一个自定义视图来显示 UIViewController3 在 1 和 2 中的内容。

当在 VC1 和 2 中触摸自定义视图时，我想直接跳转到 VC4 ..

自定义视图是 UIView，我在 Interface Builder 中将其更改为 UIControl，以接收触摸事件..

我在自定义视图类 touchevent 方法中使用了以下代码

```
 - (IBAction)customViewTouched:(id)sender {

        VC4 *nextController = [[VC4 alloc] initWithNibName:@"VC4" bundle:nil];

        UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:nextController];

       [self presentViewController:navigationController animated:YES completion:nil];

        navigationController.navigationBar.tintColor = [UIColor blackColor];
        navigationController.navigationBar.topItem.title = @"My Title";

        navigationController.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc]
 initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(cancel)];
        navigationController.navigationItem.hidesBackButton = FALSE;

       // navigationController.navigationBar.backItem.title = @"back";

    } 
```

* * *

1.  当在 VC2 中触摸自定义视图时（它被正确调用） - VC4 弹出，但仅在自定义视图中..

2.  我也无法在导航栏上获得后退按钮。（正如其他stackoverflow答案中所建议的那样，我也尝试在ViewDidLoad中设置自定义视图的标题）

3.我在customView 大小的VC1 中创建一个虚拟UIButton 并将customView 放在其中.. 这样我就可以处理VC1 本身的触摸事件.. 这会产生任何性能问题吗？

```
[myCustomViewButton addTarget:self action:@selector(myEventHandler) forControlEvents: UIControlEventTouchUpInside]; 
```

当我使用上面的代码时，它不会抛出任何错误，但是当我使用“UIViewController”类名时，myEventHandler 方法永远不会被调用。在 addTarget 而不是“self”中，它会抛出错误。

我不知道如何继续这个..任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:12:42.347

## 我假设未提及的 VC3 管理您的自定义视图：

将 [self presentVC] 更改为 [self.parentVC presentVC]

您从中展示 VC4 的 VC3 作为子级嵌入在 VC1 和 VC2 中

# wpf - MVVM-Light 工具包——如何使用 PropertyChangedMessage

> ID：13461278
> 
> 赞同：3
> 
> 时间：2012-11-19T20:03:37.117
> 
> 标签：wpf, mvvm-light

有人可以发布一个正在使用的 PropertyChangedMessage 的工作示例吗？GalaSoft 网站的描述指出：

> PropertyChangedMessage：用于广播发送者中的属性已更改。实现与 PropertyChanged 事件相同的目的，但方式不那么严格。

但是，这似乎不起作用：

```
private bool m_value = false;
public bool Value
{
    get { return m_value ; }
    set 
    { 
        m_value = value;
        Messenger.Default.Send(new PropertyChangedMessage<bool>(m_value, true, "Value"));
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T20:14:55.227

这与 MVVM Light Messenger 有关。

在您的属性定义中，您可以这样使用：

```
public string Name {
    get
    {
        return _name;
    }
     set
    {
        if (_name == value)
        {
            return;
        }
         var oldValue = _name;
        _name = value;
         // Update bindings and broadcast change using GalaSoft.MvvmLight.Messenging
        RaisePropertyChanged(Name, oldValue, value, true);
    }
} 
```

然后，您可以使用以下方式订阅该属性的任何修改：

```
Messenger.Default.Register<PropertyChangedMessage<string>>(
    this, (e) => this.Name = e.NewValue
); 
```

查看这篇[文章](http://chriskoenig.net/2010/07/05/mvvm-light-messaging/)并阅读有关[MVVM Light Messenger的信息](http://blog.galasoft.ch/archive/2009/09/27/mvvm-light-toolkit-messenger-v2-beta.aspx)

广播：

```
Messenger.Default.Send<PropertyChangedMessage<string>>(oldValue, newValue, "PropertyName"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T21:06:25.907

丹尼尔卡斯特罗用以下问题评论了我的问题：“你对代码有什么期望？”

这个问题的答案促使我为自己的问题写下这个答案。

我的期望是，基于 MVVM-Light 文档中对 PropertyChangedMessage 类的糟糕描述，当我发送 PropertyChangedMessage 时，ViewModelBase 类上的 RaisePropertyChanged 方法将被自动调用。

然而，显然情况恰恰相反。当您调用 RaisePropertyChanged 时，该方法有一个重载，您可以在其中设置一个标志来确定是否发送 PropertyChangedMessage。

但是，我想要我最初期望的功能。我想发送一个新的 PropertyChangedMessage，它会自动导致 RaisePropertyChanged 被调用。这是如何做到这一点的。

使用以下公共 NotifyPropertyChanged 方法从 ViewModelBase 派生一个新类，该方法仅调用受保护的 RaisePropertyChanged 方法：

```
public abstract class MyViewModelBase : GalaSoft.MvvmLight.ViewModelBase
{
    public void NotifyPropertyChanged(string propertyName)
    {
        RaisePropertyChanged(propertyName);
    }
} 
```

然后从 PropertyChangedMessage 派生一个新类，该类调用新的 NotifyPropertyChanged 方法：

```
public class MyPropertyChangedMessage<T> : PropertyChangedMessage<T>
{
    public MyPropertyChangedMessage(object sender, T oldValue, T newValue, string propertyName)
        : base(sender, oldValue, newValue, propertyName)
    {
        var viewModel = sender as MyViewModelBase;

        if (viewModel != null)
        {
            viewModel.NotifyPropertyChanged(propertyName);
        }
    }

    public MyPropertyChangedMessage(object sender, object target, T oldValue, T newValue, string propertyName)
        : base(sender, target, oldValue, newValue, propertyName)
    {
        var viewModel = sender as MyViewModelBase;

        if (viewModel != null)
        {
            viewModel.NotifyPropertyChanged(propertyName);
        }
    }
} 
```

我已经测试了这种方法并验证了我确实可以编写如下代码，这会导致 UI 正确更新：

```
private bool m_value = false;
public bool Value
{
    get { return m_value; }
    set
    {
        Messenger.Default.Send(new MyPropertyChangedMessage<bool>(this, m_value, value, "Value"));
        m_value = value;
    }
} 
```

# email - 哪些电子邮件彼此等效？

> ID：13461279
> 
> 赞同：4
> 
> 时间：2012-11-19T20:03:39.980
> 
> 标签：email

我正在尝试检测电子邮件的目的地是否是数据库中的某个人。问题是存在等效的电子邮件，因此直接比较不会捕获所有情况。一些例子：`foobar@gmail.com`== `foo.bar@gmail.com`== `foobar+123@gmail.com`。是否在某个地方定义了这些模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-10T00:26:06.030

What you are referencing is "[Subaddressing Samantics](https://en.wikipedia.org/wiki/Email_address#Common_local-part_semantics)"

As far as most people are concerned: No, there aren't any additional rules you are not aware of. This is because both the "." and "+/-" are domain-specific identifiers.

Gmail chose to recongize emails with dots the same as those without, e.g. JohnSmith@gmail.com == John.Smith@gmail.com, because it makes it too easy for imposters. Therefore, we are guaranteed that all Gmail addresses will be the same with or without dots, but this guarantee does not extend to every other domain.

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-19T20:08:38.273

如果您的意思是问是否有一种仅从名称来决定这一点的通用方法，那么没有。即使您使用模式来查找相似的电子邮件地址，您如何知道它们属于同一个人？也许 foobar123 真的与 foobar 不同？

现在，如果您的数据库表有链接到人员的电子邮件地址，您可以使用查询来查找与他们链接的人员并进行比较。

我唯一能想到的另一件事是您是否可以对电子邮件地址进行 IP 查找，但这样做存在很多问题。

# ruby - resque-status 和 resque-scheduler 用于重复性工作

> ID：13461281
> 
> 赞同：0
> 
> 时间：2012-11-19T20:03:54.893
> 
> 标签：ruby, resque

我的 resque 系统有以下配置（没有 Rails 只是 Sinatra 基础），我有一堆从 yml 文件中安排的重复作业

```
resque (1.23.0)
resque-scheduler (2.0.0)
resque-status (0.4.0) 
```

重复计划出现在“计划”选项卡上，当我单击“立即排队”按钮时，状态也出现在“状态”选项卡上，问题是当重复作业自动运行时，它们不会出现在“状态”选项卡..我的 resque_schedule.yml 看起来像这样

```
email_notifier:
  every: 5m
  custom_job_class: Process_Notification_Emails
  queue: email_notifier
  args: 
  description: "Process mail notifications" 
```

注意：这些计划的作业实际上每 5 分钟运行一次，并且按预期运行，我遇到的唯一问题是它们不会出现在“状态”选项卡上，除非我手动将它们排入队列

任何想法我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:15:56.917

> **支持 resque-status（和其他自定义作业）**
> 
> 一些 Resque 扩展，如 resque-status 使用 API 签名略有不同的自定义作业类。Resque-scheduler 并不试图支持所有现有和未来的自定义作业类，而是支持调度标志，因此您可以扩展自定义类并使其支持预定作业。
> 
> 假设我们有一个名为 FakeLeaderboard 的 JobWithStatus 类

```
class FakeLeaderboard < Resque::JobWithStatus
  def perform
    # do something and keep track of the status
  end
end 
```

> 然后是一个时间表：

```
create_fake_leaderboards:
  cron: "30 6 * * 1"
  queue: scoring
  custom_job_class: FakeLeaderboard
  args:
  rails_env: demo
  description: "This job will auto-create leaderboards for our online demo and the status will update as the worker makes progress" 
```

> 如果您的扩展不支持预定作业，则需要扩展自定义作业类以支持 #scheduled 方法：

```
module Resque
  class JobWithStatus
    # Wrapper API to forward a Resque::Job creation API call into
    # a JobWithStatus call.
    def self.scheduled(queue, klass, *args)
      create(*args)
    end
  end
end 
```

[https://github.com/bvandenbos/resque-scheduler#support-for-resque-status-and-other-custom-jobs](https://github.com/bvandenbos/resque-scheduler#support-for-resque-status-and-other-custom-jobs)

# visual-studio-2010 - Crystal Reports 测试连接失败

> ID：13461293
> 
> 赞同：2
> 
> 时间：2012-11-19T20:04:30.027
> 
> 标签：visual-studio-2010, crystal-reports

我有一个通过 VS2010 加载的 Crystal Reports 应用程序。我的机器上加载了 CR Runtime 13.0.2。当我使用调试运行应用程序时，它工作正常。（事实上​​很棒。）但是当我安装构建的应用程序时（即使在非常相同的开发机器上）。TestConnection 行返回错误，这表明它没有正确连接到我的数据库。

如果我不把这段代码放在那里，应用程序会在此行提示输入登录凭据：Me.CrystalReportViewer1.ReportSource = reportDocument1

但是数据库名称和服务器名称不正确并显示为灰色，并且我在 UserName 和 PW 中输入的任何内容都不起作用。

我搜索了谷歌并尝试了任何数量的“修复”，但没有任何东西可以让它工作。

我还使用数据库专家来“更新”我的数据源，并从设计模式运行“验证数据库”，但仍然发生同样的事情。

这是我的代码：

```
Private Function ConnectReport(sDatabaseFile As String, _serverName As String, ReportDocument1 As ReportDocument)
    ReportDocument1.SetDatabaseLogon("sa", "sqlAdmin2008", _serverName, sDatabaseFile, True)

    For x As Integer = 0 To ReportDocument1.DataSourceConnections.Count - 1
        ReportDocument1.DataSourceConnections(x).SetConnection(_serverName, sDatabaseFile, "sa", "sqlAdmin2008")
    Next

    For Each cTable As Table In ReportDocument1.Database.Tables
        If cTable.Name <> "Command" Then
            SetTableConnectionInfo(cTable, sDatabaseFile, _serverName)
        End If
    Next

    For Each obj As ReportObject In ReportDocument1.ReportDefinition.ReportObjects

        If obj.Kind = ReportObjectKind.SubreportObject Then
            Dim subReport As SubreportObject = CType(obj, SubreportObject)
            Dim subReportDocument As ReportDocument = ReportDocument1.OpenSubreport(subReport.SubreportName)
            ConnectReport(sDatabaseFile, _serverName, subReportDocument)
        End If
    Next

End Function

Private Function SetTableConnectionInfo(cTable As Table, sDatabaseFile As String, _serverName As String)
    Dim logonInfo As TableLogOnInfo = cTable.LogOnInfo
    Dim connInfo As ConnectionInfo = New ConnectionInfo()

    connInfo.DatabaseName = sDatabaseFile
    connInfo.ServerName = _serverName
    connInfo.UserID = "sa"
    connInfo.Password = "sqlAdmin2008"
    'connInfo.Type = ConnectionInfoType.SQL
    logonInfo.ConnectionInfo = connInfo

    cTable.ApplyLogOnInfo(logonInfo)

    If cTable.TestConnectivity = False Then
        Throw New ApplicationException("Cannot connect Crystal Reports to Database.")
    End If

    cTable.Location = sDatabaseFile & "." & "dbo" & "." & cTable.Location

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:35:54.100

在我看来，您需要像这样将表格作为参考传递。

```
Private Function SetTableConnectionInfo(ref cTable As Table, sDatabaseFile As String, _serverName As String) 
```

# generics - 转换为类型类

> ID：13461295
> 
> 赞同：1
> 
> 时间：2012-11-19T20:04:38.760
> 
> 标签：generics, haskell

我想实现一个通用函数，它将尝试将任何类型转换为列表。我试图在以下帮助下实现这一目标`Typeable`：

```
import Data.Data
import Data.Foldable
import Control.Applicative

asFoldable :: (Typeable (a b), Foldable z, Typeable (z b)) => a b -> Maybe (z b)
asFoldable = cast

asList :: (Typeable1 a, Typeable b) => a b -> Maybe [b]
asList x = Data.Foldable.foldr (:) [] <$> asFoldable x 
```

上面的代码在没有定义的情况下编译得很好`asList`，但是有了它，它一直在抱怨类型变量的模棱两可`t0`，指的是`a`我猜的。现在我试图用它来欺骗它，但它只有在我为`Maybe [String]`or`Maybe (Set String)`等​​类型的演员指定特定类型时才有效。

我的猜测是我必须用`asFoldable`类型声明来欺骗编译器，但它仍然不起作用，因为它不支持转换为类型类。这是真的？有没有更好的方法来尝试将任何类型转换为列表？有吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T21:07:49.283

没有办法（没有 Template Haskell，这几乎总是矫枉过正）来动态测试类型类的实例是否存在。以通用方式将任意结构转换为其他任意结构的正确方法是使用`Data.Data`，这是@hammar 在您的另一个问题中谈论的泛型。

```
toTree :: Data a => a -> Tree String
toTree x = Node (show $ toConstr x) $ gmapQ toTree x 
```

当然，正如@hammar 所说，您可能希望以不同的方式处理列表和字符串。

# python - scipy 最小化 slsqp，导致 OverflowError: Python int too large to convert to C long

> ID：13461296
> 
> 赞同：2
> 
> 时间：2012-11-19T20:04:41.070
> 
> 标签：python, scipy, mathematical-optimization

这个程序：

```
from __future__ import division
import numpy as np
from scipy.optimize import minimize
from collections import deque

def buy_captial():
    """ buys the profit maximizing amount of captial """
    offers = {'W': [{'quantity':50, 'price': 1}],
              'K': [{'quantity':200, 'price': 0.5}]}
    key_order = ('W', 'K')
    exponents = {'W': 0.6, 'K': 0.4}

    prices = {}
    quantities = {}
    for key in key_order:
        if key in offers:
            prices[key] = deque([offers[key][i]['price'] for i in range(len(offers[key]))])
            quantities[key] = deque([offers[key][i]['quantity'] for i in range(len(offers[key]))])

    print quantities
    budget = [{'type': 'ineq', 'fun': lambda x:
                                        200
                                        - sum([x[i] * prices[key_order[i]][0] for i in rng])}]
    rng = range(len(key_order))
    x0 = np.zeros(len(key_order))
    bounds =  ((0, 50), (0, 200))

    def objective(x):
        return \
            - 5  * np.prod([(x[i]) ** exponents[key_order[i]] for i in rng]) \
            + sum([x[i] * prices[key_order[i]][0] for i in rng])

    res = minimize(objective, x0=x0, method='SLSQP', constraints=budget, bounds=bounds)
    print 'buy', res,

buy_captial() 
```

导致此错误：

```
python test_buy_captial.py 
{'K': deque([200]), 'W': deque([50])}
Traceback (most recent call last):
  File "test_buy_captial.py", line 37, in <module>
    buy_captial()
  File "test_buy_captial.py", line 34, in buy_captial
    res = minimize(objective, x0=x0, method='SLSQP', constraints=budget, bounds=bounds)
  File "/usr/local/lib/python2.7/dist-packages/scipy/optimize/_minimize.py", line 358, in minimize
    constraints, **options)
  File "/usr/local/lib/python2.7/dist-packages/scipy/optimize/slsqp.py", line 333, in _minimize_slsqp
    xl[infbnd[:, 0]] = -1.0E12
OverflowError: Python int too large to convert to C long 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T15:32:46.833

问题是边界被指定为整数。Fortran 主干无法转换它。解决方案是将边界指定为浮点数。正如@pv 所指出的那样，通过'float（）'参数或更好的速度。经过`bounds = array([[0, 50], [0, 200]], dtype=float)`

# java - 如何将 JScrollPane 添加到 JPanel

> ID：13461298
> 
> 赞同：0
> 
> 时间：2012-11-19T20:04:46.910
> 
> 标签：java, swing, jpanel, jscrollpane

我一直在寻找一种简单的方法来实现`JScrollPlane`. 我正在尝试将其添加到 a`JPanel`中，它将包含动态数量的`JPanel`s （将填充其他内容）。

这是我的（失败得很惨）尝试说`JScrollPane`：

```
final JPanel info = new JPanel();
final JScrollPane infoS = new JScrollPane(info,ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
info.setLayout(new GridLayout(0,1));
info.setLocation(10,78);
info.setSize(420,490);
infoS.setPreferredSize(new Dimension(600, 600));
gui.add(infoS); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:37:44.493

您遇到的主要问题是默认布局管理器的布局设置为`FlowLayout`，这意味着`JScrollPane`将要使用它的首选大小进行布局，这可能不会填满整个面板。

相反，使用`BorderLayout`

```
final JPanel info = new JPanel(new BorderLayout()); // <-- Change me :D
final JScrollPane infoS = new JScrollPane(info,ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
// These are bad ideas, setLocation and setSize won't work, as the panel should be
// under the control of a layout manager
//info.setLocation(10,78);
//info.setSize(420,490);
//infoS.setPreferredSize(new Dimension(600, 600));
gui.add(infoS); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:29:47.117

在此[示例](https://stackoverflow.com/a/3175280/230513)中，将一系列嵌套面板添加到具有`BoxLayout`. 该面板用于创建`JScrollPane`然后添加到`JFrame`.

```
public class BoxTest extends JPanel {
...
JScrollPane jsp = new JScrollPane(this,
    JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
    JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
...
JFrame f = new JFrame();
f.add(jsp); // BorderLayout.CENTER, by default 
```

# sql-server - 如何从分隔字符串创建多个列

> ID：13461300
> 
> 赞同：1
> 
> 时间：2012-11-19T20:04:56.670
> 
> 标签：sql-server, sql-server-2008

我有一个包含 4 个组件的库存字段，每个组件用“-”分隔。我不确定如何使用`charindex`来解析字符串，以便为分隔符之间找到的每个值返回一列。例如：字段值或字符串 = item-color-size-shape。

我的目标是最终得到一个项目作为列，颜色作为列，大小作为列，最后是形状。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:26:50.870

如果它是最多 4 列，你可以这样尝试：

```
declare @Table table (SomeColumn varchar(100));
insert into @Table
    select 'ball-blue-small-round'  union all
    select 'ball-red-small-round'   union all
    select 'ball-green-small-round' union all
    select 'ball---square'          union all
    select '----';

;with stage (s)
as  (   select  replace(SomeColumn, '-', '.')
        from    @Table
    )
select  [item] = parsename(s,4),
        [color] = parsename(s,3),
        [size] = parsename(s,2),
        [shape] = parsename(s,1)
from    stage; 
```

如果它 > 4 请回复，我们可以制定更动态的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:46:41.780

使用 CROSS APPLYs（使用冗长的名称来理解） -

```
declare @Table table (SomeColumn varchar(100));
insert into @Table
select 'ball-Orange-small-round'  union all
select 'bat-blue-medium-square'   union all
select 'stumps-green-large-rectangle'

SELECT * FROM @Table

SELECT Sub1.FirstSub1 AS Item
       ,Sub2.SecondSub1 AS Color
       ,Sub3.ThirdSub1 AS Size
       ,SubAfterThirdHyphen AS Shape 

FROM @Table 
CROSS APPLY (SELECT CHARINDEX('-',SomeColumn) AS FirstHyphenPos) AS Pos1
CROSS APPLY (SELECT SUBSTRING(SomeColumn,1,FirstHyphenPos-1) AS FirstSub1) AS Sub1
CROSS APPLY (SELECT SUBSTRING(SomeColumn,FirstHyphenPos+1,LEN(SomeColumn)) AS SubAfterFirstHyphen) AS Substr1

CROSS APPLY (SELECT CHARINDEX('-',Substr1.SubAfterFirstHyphen) AS SecondHyphenPos) AS Pos2
CROSS APPLY (SELECT SUBSTRING(Substr1.SubAfterFirstHyphen,1,SecondHyphenPos-1) AS SecondSub1) AS Sub2
CROSS APPLY (SELECT SUBSTRING(Substr1.SubAfterFirstHyphen,SecondHyphenPos+1,LEN(Substr1.SubAfterFirstHyphen)) AS SubAfterSecondHyphen) AS Substr2

CROSS APPLY (SELECT CHARINDEX('-',Substr2.SubAfterSecondHyphen) AS ThirdHyphenPos) AS Pos3
CROSS APPLY (SELECT SUBSTRING(Substr2.SubAfterSecondHyphen,1,ThirdHyphenPos-1) AS ThirdSub1) AS Sub3
CROSS APPLY (SELECT SUBSTRING(Substr2.SubAfterSecondHyphen,ThirdHyphenPos+1,LEN(Substr2.SubAfterSecondHyphen)) AS SubAfterThirdHyphen) AS Substr3 
```

# javascript - 使用 ajax 获取自定义 404 错误页面的内容

> ID：13461301
> 
> 赞同：1
> 
> 时间：2012-11-19T20:05:02.597
> 
> 标签：javascript, jquery, ajax

我正在尝试通过 ajax 获取 404 自定义页面的内容（我需要在此页面上使用 Greasemonkey 的计数器值）。

不幸的是，jQuery 的 .fail ajax 方法无法像成功时的数据值那样实际读取页面内容。

有什么解决方法吗？我也会买香草js。

最好的重头戏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:07:54.693

您可以在 Vanilla JS 中执行此操作：

```
var httpRequest = new XMLHttpRequest();
httpRequest.onreadystatechange = function() {
    if (httpRequest.readyState === 4) {
        console.log(httpRequest.responseText);
    }
};
pmc.loading.start();
httpRequest.open('GET', url);
httpRequest.send(); 
```

也可以使用[Ajax 的错误回调：](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
    url: url, 
    error: function(httpRequest){
        console.log(httpRequest.responseText);
    }
}); 
```

话虽这么说，我想知道，从您的评论来看，如果您不受[与同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)相关的问题的影响：如果网站所有者没有[将正确的标题](http://enable-cors.org/)。

如果是这种情况，未经网站所有者同意，您不能做任何纯粹的客户端操作。最简单的方法是在您的网站上添加一个代理来为页面提供服务，就好像它来自您的网站一样。

# replace - Notepad++ 扩展搜索模式字符串

> ID：13461303
> 
> 赞同：2
> 
> 时间：2012-11-19T20:05:08.920
> 
> 标签：replace, null, notepad++

我要做的就是搜索由“s(NULL).(NULL)g”组成的字符串，其中 (NULL) 是 Notepad++ 中的实际空字符。

我想出了如何将 null 搜索为 /0，但我不知道如何编写一个字符串来搜索 's''\0''.''\0''g'。

如果您能帮助我，我将不胜感激。

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:23:38.073

使用以下命令进行 notepad++ 正则表达式搜索：

```
s\x00\.\x00g 
```

# python - 在 Python ProblemSetQuestion 中互锁两个字符串（自学）

> ID：13461306
> 
> 赞同：0
> 
> 时间：2012-11-19T20:05:32.077
> 
> 标签：python, python-3.x

温克尔森来了！当我遇到问题时，我目前正在学习 Python。我已经到了想想就头晕的地步：P 无论如何，任何帮助都将不胜感激！提前致谢！

问题：

* * *

> **联锁**
> 
> 创建一个函数，该函数接受两个长度相同或在一个长度相同的字符内作为参数的字符串。然后它应该取这两个字符串并将它们互锁，从每个字符串中取一个字符，将它们互锁。如果字符串的长度不同，则结果应始终以较长的字符串开头。

我的编码（对不起，我是初学者，它不是 Pythonic :P）：

* * *

```
def interlock(s1, s2):

    r = 0
    l1 = []
    l2 = []
    inters = ''

    for i in range(len(s1)):

            l1.append(i)

    for i in range(len(s2)):

            l2.append(i)

    if len(s2) == len(s1):        

        for i in range(len(s1)):
            inters += ''.join(s1[i])
            inters += ''.join(s2[i])                

    elif len(s1) < len(s2):

        for i in range(len(s1)):
            inters += ''.join(s2[i])
            inters += ''.join(s1[i])
            r = i

        inters += ''.join(s2[r])

    elif len(s2) < len(s1):

        for i in range(len(s2)):
            inters += ''.join(s1[i])
            inters += ''.join(s2[i])
            r = i

        inters += ''.join(s1[r])

    else:
        pass

    return inters 
```

结果（我收到什么结果）：

```
___________________________________________________________________________________________

 Call                   Expected    Received    Correct

 interlock('shoe','cold')   schooled    schooled    true

 interlock('flat','etry')   feltarty    feltarty    true

 **interlock('ab','siy')    saiby           saibi           false**

 **interlock('abalone','hammer')    ahbaamlmoenre   ahbaamlmoenrn   false**

 interlock('','a')          a           a           true

___________________________________________________________________________________________ 
```

两个更大胆的领域是我遇到最多问题的地方。如果我尝试添加最后一个字符，我会得到一个神秘的超出范围异常。任何想法/解决方案将不胜感激！- 温克尔森

Ps 这比我的正常帖子要短......通常我会给出一个（不）准确的想法，说明我认为我做错了什么，它会一直拖下去......你明白了主意。无论如何，我可能像个白痴一样打破了循环。所以...祝你好运！

**谢谢**

感谢所有建议如何成为更好的程序员的人！我一天没有太多时间来编程，所以当有这么多人抽出时间来提出建议时，这真是太好了。我喜欢这个网站和它的社区:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:21:06.813

也许这可以缩短，但我认为这是相当pythonic，没有太多的pythonic，除了它不使用太多的黑魔法，也没有进口：

```
def interlock(s1, s2):
    if len(s1) < len(s2):
        s1, s2 = s2, s1

    s1, s2 = map(list, [s1, s2])
    for i in xrange(len(s2)):
        s1.insert((2*i+1), s2[i])
    print ''.join(s1) 
```

现在一些Python教学：

*   `s1, s2 = s2, s1`是一种非常 Pythonic 的方式来交换两个变量。我用它来确定这`s1`是最长的字符串；
*   `map`用于将函数映射`list()`到字符串列表`[s1, s2]`，将它们转换为单个字符串的列表；
*   `insert`是一种列表方法（字符串没有它），用于在给定位置的序列中间插入项目；
*   该`(2*i + 1)`部分是必要的，因为有必要在 ; 的每个其他项目之间插入`s1`。
*   `''.join()`是一个字符串操作，在这里用于将生成的字符列表连接成一个字符串，使用一个空字符串，或“nothing”（`''`）作为分隔符或“连接元素”。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T20:21:37.450

虽然其他人正在向您展示如何使用 itertools 执行此操作（这是一个非常有用的练习），但希望这将展示如何编写您的函数来帮助您学习一些基本编程：

```
def interlock(s1, s2):

    r = 1
    l1 = list(s1)
    l2 = list(s2)
    inters = ''
    if len(s2) == len(s1):        
        for i in range(len(s1)):
            inters += s1[i]
            inters += s2[i]

    elif len(s1) < len(s2):
        for i in range(len(s1)):
            inters += s2[i]
            inters += s1[i]
            r = i+1
        inters += s2[r]

    elif len(s2) < len(s1):
        for i in range(len(s2)):
            inters += s1[i]
            inters += s2[i]
            r = i+1

        inters += s1[r]

    else:
        pass

    return inters

a = interlock('abalone','hammer')
print (a)
print (a[::2])
print (a[1::2])
a = interlock('hammer','abalone')
print (a)
print (a[::2])
print (a[1::2])
a = interlock('ab','siy')
print (a) 
```

我故意保留了您原始代码中的很多结构，只删除了完全不必要的部分（例如，您过度使用`str.join`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T20:14:10.037

你需要从事一些数据驱动的编程：

```
s1,s2 = sorted(("foo","baxer"), key=len, reverse=True) 
```

现在，你现在你的输入有一个固定的关系。

Python 在模块中还有许多工具`itertools`可以帮助您更轻松地实现这一目标。

这是上面mgilson代码的简化版本：

```
def interlock(in1, in2):
    r = 1
    s1,s2 = sorted((in1,in2), key=len, reverse=True)
    inters = ''
    for i in range(len(s1)):
        inters += s2[i]
        inters += s1[i]
        r = i+1
    if r < len(s2):
        inters += s2[r]

    return inters 
```

您可以看到，只需使您的数据对应于特定的不变量，就不需要三分之二的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T20:17:14.293

尝试一些利用`itertools`：

```
def interlock(s1, s2):
    if len(s2) > len(s1):
        (s1, s2) = (s2, s1)

    return ''.join(itertools.chain(*itertools.izip_longest(s1, s2, fillvalue=''))) 
```

# jquery - 不加载 Knockout.js

> ID：13461307
> 
> 赞同：0
> 
> 时间：2012-11-19T20:05:41.847
> 
> 标签：jquery, scripting, knockout.js, loading

我正在尝试创建自己的各种 jQuery 小部件。我已经编写了所有的 HTML 和 jQuery，我正在尝试使用以下方法将其动态添加到页面中：

```
<div class='searchbar'></div> 
```

该小部件使用 Knockout.js，以及我自己编写的大量代码。我遇到的问题 [我怀疑] 涉及我的脚本的加载顺序。

这是我得到的错误：

```
Timestamp: 11/20/2012 9:26:13 AM
Error: Error: Unable to parse binding attribute.
Message: SyntaxError: syntax error;
Attribute value: value: query, valueUpdate: 
Source File: http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-1.2.1.js
Line: 44 
```

如果我注释掉 Knockout 绑定块，一切正常（减去下拉列表的值）。不知道为什么它没有通过这段代码。

我的 jQuery 在下面，但是它目前正在做的实时版本是可用的**[HERE](http://jonathonmoore.com/proto/index2.html)**。**[这](http://jonathonmoore.com/proto/)**是一个工作版本，无需尝试动态加载所有内容，只是为了让您知道它应该是什么样子。

```
(function() {

    var jQuery;

    /******** Load jQuery if not present *********/
    if (window.jQuery === undefined || window.jQuery.fn.jquery !== '1.8.0') {
        var script_tag = document.createElement('script');
        script_tag.setAttribute("type","text/javascript");
        script_tag.setAttribute("src",
            "http://code.jquery.com/jquery-1.8.0.min.js");
        if (script_tag.readyState) {
          script_tag.onreadystatechange = function () { // For old versions of IE
              if (this.readyState == 'complete' || this.readyState == 'loaded') {
                  scriptLoadHandler();
              }
          };
        } else {
          script_tag.onload = scriptLoadHandler;
        }
        (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);
    } else {
        jQuery = window.jQuery;
        main();
    }

    /******** Called once jQuery has loaded ******/
    function scriptLoadHandler() {
        jQuery = window.jQuery.noConflict(true);
        main(); 
    }

    /******** Our main function ********/
    function main() { 
        jQuery(document).ready(function($) {

            $("head").append("<link href='style.css' rel='stylesheet' type='text/css' />");         
            $.getScript("http://knockoutjs.com/js/jquery.tmpl.js", function(){});
            $.getScript("http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-1.2.1.js", function(){});

            $(".searchBox").append("<div id='refine'>Creator</div>");
            $(".searchBox").append("<input class='inline' placeholder='Search...' size='30' type='text' id='search' data-bind='value: query, valueUpdate: 'keyup'' autocomplete='off' />");
            $(".searchBox").append("<div id='submit'>Search</div>");
            $(".searchBox").append("<div id='refineDropdown'><ul id='refineList'></ul></div>");
            $(".searchBox").append("<div id='dropdown'><ul data-bind=\"template: { name:'obj', foreach:objects }, click: function(){ $('.listObjItem').on('click', function(){ $('#search').val($(this).text()); $('#dropdown').hide(); $('#search').focus();});}\"></ul></div>");
            $(".searchBox").append("<script type='text/html' id='obj'><li class='listObjItem'><span data-bind='text: name'></span>&nbsp;in&nbsp;<strong data-bind='text: type'></strong></li></script>");

            /* Begin Knockout Bindings */

            var objects = [
              {name:"Pacers Game",              type:"Activities"},
              {name:"Colts Game",               type:"Activities"},
              {name:"Ice Game",                 type:"Activities"},
              {name:"Indians Game",             type:"Activities"},
              {name:"Fever Game",               type:"Activities"},
              {name:"Purdue Game",              type:"Activities"},
              {name:"Campaign Posters",         type:"Projects"},
              {name:"Campaign Media",           type:"Projects"},
              {name:"Event Booking",            type:"Projects"},
              {name:"New Product Seminar",      type:"Projects"},
              {name:"State Fair",               type:"Projects"},
              {name:"Draft Designs",            type:"Tasks"},
              {name:"Design Posters",           type:"Tasks"},
              {name:"Review Designs",           type:"Tasks"},
              {name:"Book Venue",               type:"Tasks"},
              {name:"Decorate ICC",             type:"Tasks"},
              {name:"Book Live Music",          type:"Tasks"},
              {name:"Arrange for DJ Payment",   type:"Tasks"},
              {name:"Event Cleanup",            type:"Tasks"}
            ];

            var viewModel = { query: ko.observable('') };

            viewModel.objects = ko.dependentObservable(function() {
                var search = this.query().toLowerCase();
                return ko.utils.arrayFilter(objects, function(obj) {
                    return obj.name.toLowerCase().indexOf(search) >= 0;
                });
            }, viewModel);

            ko.applyBindings(viewModel);

            /* End Knockout Bindings */

            var refine = ["All", "ID", "Creator", "Name", "Description", "Last Modified"];

            refine = refine.sort();
            for (var i = 0; i < refine.length; i++)
                $('#refineList').append('<li>' + refine[i] + '</li>');

            testLength();
            $("#dropdown").hide();
            $("#refineDropdown").hide();

            if($.browser.chrome) {
                $('#search').css('height','26px');
                $('#search').css('padding','0px 5px 0px 5px');
                $('#refine').css('margin-right','-3px');
            }
            else if($.browser.mozilla) {
                $('#search').css('height','25px');
                $('#search').css('padding','0px 5px 0px 5px');
                $('#search').css('margin-top','-6px');
                $('#refine').css('margin-right','-1px');
            }
            else if($.browser.msie) {
                $('#search').css('height','22px');
                $('#search').css('padding','4px 5px 0px 5px');
            }

            var $hidden = $('#hidden');
            $("input").keyup(function(e) {
                testLength();
                $('#refine').removeClass('refineClicked');
                $('#refineDropdown').hide();
                if (this.value.length) {
                    var that = this;
                    $("#dropdown li").each(function() {
                        if ($(this).html().toLowerCase().indexOf(that.value.toLowerCase()) == -1) $(this).appendTo($hidden);
                    });
                    $('#hidden li').each(function() {
                        if ($(this).html().toLowerCase().indexOf(that.value.toLowerCase()) !== -1) $(this).appendTo('#list');
                    });
                    $("#search").css('border-bottom-right-radius', '0px');
                    $("#dropdown").show();
                }
                else {
                    $("#dropdown").hide();
                }
                if (e.which !== 40 && e.which !== 38) {
                    $('#dropdown li,#hidden li').each(function() {
                        $(this).removeClass('selected');
                    });
                    liSelected = null;
                }
            });

            $('#dropdown li').click(function() {
                $('#search').val($(this).text());
                $('#search').focus();
                $("#dropdown").hide();
            });

            var li = $('li');
            var liSelected;

            $('input').keydown(function(e) {
                liSelected = $('#dropdown .selected');

                if (e.which === 40) { // down-arrow
                    if (liSelected.length) {
                        var next = liSelected.next();

                        if (next.length) {
                            liSelected.removeClass('selected');
                            liSelected = next.addClass('selected');
                        }
                    }
                    else {
                        liSelected = $('#dropdown li').eq(0).addClass('selected');
                    }
                }
                else if (e.which === 38) { // up-arrow
                    if (liSelected.length) {
                        var prev = liSelected.prev();

                        if (prev.length) {
                            liSelected.removeClass('selected');
                            liSelected = prev.addClass('selected');
                        }
                        else {
                            liSelected = $('#dropdown li').eq(-1).addClass('selected');
                        }
                    }
                    else {
                        liSelected = li.last().addClass('selected');
                    }
                }
                else if (e.which === 13) {
                    $('#search').val(liSelected.text());
                    $("#dropdown").hide()
                    $('#search').blur();
                }
            });

            $('#refine').click(function() {
                $("#dropdown").hide();
                if (!$('#refine').hasClass('refineClicked')) {
                    $('#refine').addClass('refineClicked');
                    $('#refineDropdown').show();
                }
                else {
                    $('#refine').removeClass('refineClicked');
                    $('#refineDropdown').hide();
                }
            });

            $('#refineDropdown li').click(function() {
                var tmp = $('#refine').width();
                $('#refine').html($(this).text());
                $('#refine').removeClass('refineClicked');
                $("#refineDropdown").hide();
                testLength();
                $('#search').css('width', $('#search').width() + (tmp - $('#refine').width()));
            });

            $('#submit').click(function() {
                alert('Searching for ' + $('#search').val() + '...');
            }); 

            function testLength() {
                if ($('#refine').text().length > 7) {
                    $('#refine').html($('#refine').text().substring(0, 6) + "...");
                }
                $('#dropdown').css('width', $('#search').width() + 4);

                if($.browser.chrome)
                    $('#dropdown').css('margin-left', $('#refine').width() + 11);
                else
                    $('#dropdown').css('margin-left', $('#refine').width() + 13);
            }
        });
    }
}()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T20:05:05.547

您应该尝试使用 AMD 之类的 require.js 来按顺序加载脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:37:29.893

我想出了一个解决办法。我没有在脚本中动态加载，而是将它们直接放入我的 HTML 页面的头部。我可能会在我的脚本文件中添加一个检查以查看是否加载了外部库，但我认为这最终会成为很多额外的、不必要的工作。

对于此问题的未来访问者，以下脚本的顺序对于使用 Knockout 的任何操作都是绝对必要的。此外，值得注意的是 jQuery tmpl 加载速度比 Knockout.js 慢。当我尝试动态加载它们时，我的函数会在外部库完成加载时触发。即使 tmpl 首先列出，Knockout 总是首先加载（除非浏览器首先处理最后一个警报，然后回滚到以前的警报......如果这是错误的，请纠正我）。

```
 <head>
        <title>Search Prototype</title>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
        <script type="text/javascript" src="https://raw.github.com/jquery/jquery-tmpl/master/jquery.tmpl.js"></script>
        <script type="text/javascript" src="http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.2.0.js"></script>
        <script type="text/javascript" src="search.js"></script>
    </head> 
```

# jquery - .Net Web 方法访问

> ID：13461311
> 
> 赞同：1
> 
> 时间：2012-11-19T20:06:11.047
> 
> 标签：jquery

我在从与存储 Web 服务的服务器不同的服务器访问 .net webmethod 时遇到一些问题。

```
$.ajax({
    type: "POST",
    url: "WebService.asmx/login",
    data: "{'username':'test'," + "'password':'test'}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
        console.log(msg);
    },
    error: function (response) {
        console.log(response);
    }
}); 
```

执行上述 jQuery 时，该方法按预期运行。如果我在不同的服务器上运行相同的代码并将 url 更改为它的存储位置，则 webmethod 不会出现执行。Firebug 显示错误，但我无法确定原因。如果我导航到 WebService.asmx 列出了该方法，但是我似乎无法访问它。

![](../Images/2a61d8b97e3afe994378929a4c4e56d6.png)

![](../Images/98fd1d6a1d76d48813bc92f8f2e7c04e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:09:52.720

> 如果我在不同的服务器上运行相同的代码并将 url 更改为它的存储位置......

如果您将其更改为另一个域上的 URL，它将违反浏览器跨域沙箱并且无法正常工作。您拨打的电话需要与为页面/脚本提供服务的域相同。

# c++ - 在 C++ 中找到与方程匹配的最小整数

> ID：13461312
> 
> 赞同：3
> 
> 时间：2012-11-19T20:06:11.820
> 
> 标签：c++, algorithm, math, hardy-ramanujan

> **可能重复：**
> [查找 Hardy Ramanujan 数](https://stackoverflow.com/questions/11410798/finding-hardy-ramanujan-numbers)

我需要找到最低的自然`x`数

```
x = k^3 + l^3 = i^3 + j^3 
```

并且`(k, l, i, j)`必须都不同。

* * *

我尝试了以下四个 for 循环，但由于变量无限增加，我无法找到正确的解决方案......

```
for (int i=0;;i++)
    for (int j=i+1;;j++)
        for (int k=j+1;;k++)
            for (int l=k+1;;i++)
                compare(i,j,k,l); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:25:06.830

你需要重新定义你对这个问题的看法。

真的是这样说：可以用两种不同方式表示为两个立方体之和的最小自然数是多少？

问题陈述称这个数为 x，立方体对是 (i, j) 和 (k, l)。

以这种方式重述，它几乎没有那么糟糕。这是伪代码中的提示：

```
function count_num_cubic_pairs(n):
    cubic_pairs = []
    for i..n:
        first_cube = i * i * i
        remainder = n - first_cube
        if remainder is a cube and (first_cube, remainder) not in cubic_pairs:
            cubic_pairs.add((first_cube, remainder))
    return length(cubic_pairs) 
```

困难的部分将是测试`remainder is a cube`浮点错误是否会使这变得复杂。这才是这个问题的真正关键——玩得开心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T23:51:06.580

您的循环假设`i<j<k<l`，这不一定是正确的。（可能是这样`j>k`。）一旦你得到正确的假设，你可以重新排列你的循环，这样第一个项目是最大的，所以其他的循环是有限的。

`i>j`这是一个带有, `i>k>l`,的示例

```
for (int i=1;;i++)
    for (int j=1;j<i;j++)
        for (int k=1;k<i;k++)
            for (int l=1;l<k;i++)
                compare(i,j,k,l); 
```

一旦你得到这个工作，尝试通过检查立方根`i*i*i+j*j*j-k*k*k`是否是自然数来消除第四个循环。然后尝试为`k`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T20:22:56.057

使您的代码工作的一种简单方法是限制变量的域，然后一次扩展一点。

正如 mazayus 所提到的，您使每个变量都严格大于以前的变量，因此您永远不会有任何可能正确的变化。

像这样的东西可能有效（伪代码），但效率极低：

```
for max in [100, 200, 300, ...]
  for i in [0..max]
    for j in [0..max]
      for k in [0..max]
        for l in [0..max]
          if (i equals k or l, or j equals k or l) continue
          if (i^3 + j^3 equals k^3 + l^3)
            return answer 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T20:24:40.233

```
int i = 1
int j = 3
int k = 2
int l = 4

do {
  do {
    do {
      do {
        compare(i, j ,k l);
        i++;
      } while (i < k);
      k++;
    } while (k < j);
    j++;
  } while(j < l);
  l++;
} while(l < 100); 
```

像这样的东西会尝试所有没有重复的数字组合（最高值为 100），其中 i < k < j < l。

# compass-sass - Susy：为给定的屏幕宽度（断点 px 值）创建网格并且不知道单个列的宽度（非内容优先的方法）

> ID：13461313
> 
> 赞同：2
> 
> 时间：2012-11-19T20:06:12.883
> 
> 标签：compass-sass, sass, susy-compass

我正在使用[Susy](http://susy.oddbird.net/)。

## 我未能利用内容优先的方法，并决定先使用 window-px-widths-first

起初我尝试了[内容优先](http://adactio.com/journal/4523/)的网格方法，但很快我发现我的网站在不同的设备上表现出意外。它会显示一个移动布局，我想要一个平板电脑布局等。我最终调整了 Susy 设置的 em 值，以匹配某些屏幕宽度（px 值）。代码变得丑陋，我意识到我实际上不再使用内容优先的方法。

这是我使用这种错误方法创建的网站[主页的静态快照及其](http://files.alfamb.ru/stackoverflow_384y6ht/Stackoverflow%20Susy%20px%20values/1/)[代码](https://github.com/lolmaus/ruscup_aurora/tree/44120c5009074f3ccbc554c5817716aeef03d1e6)的快照。

所以我决定完全放弃内容优先的方法，首先使用 px 值。

## 在编写代码之前，我为我的网格制定了要求

首先，我按屏幕尺寸对不同设备进行了分组。然后我想出了最适合这些设备组的断点的 px 值：

```
Break-    Layout   Number of            Common
points     name     columns             usage
(px)               (sample)

    0  ┬
       │
       │     S        1       Smartphones-portrait, old phones
       │
   400 ┼
       │     M        2       Smartphones-landscape
   600 ┼
       │     L        3       Tablets-portrait
   800 ┼
       │     XL       4       Tablets-landscape, netbooks
  1000 ┼
       │    XXL       5       Laptops, desktop computers
  1200 ┼
       ↓ 
```

我想以下假设/要求：

1.  Window-px-widths-first 方法（如上所述）。

2.  $container-style 是流动的。当屏幕宽度介于两个断点之间时，容器的宽度会自动调整以匹配较大的断点。布局中的列数不变，对应下断点。

3.  最后一个断点是容器的最大宽度。该网站不会进一步延伸，而是会有额外的排水沟。

4.  移动优先。从“S”布局开始，随着屏幕变宽，用其他布局覆盖它。

## 经过深思熟虑，我的方法演变为以下代码

（此代码是一个综合示例。我从我的实际代码中摘录并进行了一些修改，因此它可能会遗漏一些东西或有不一致的地方。）

```
<div id="header-wrapper">
  <header id="header">
    ...
  </header>
</div>

<div id="main-wrapper">
  <div id="main">

    <article id="content">...</article>
    <aside id="sidebar">...</aside>

  </div>
</div>

<div id="footer-wrapper">
  <footer id="footer">
    ...
  </footer>
</div> 
```

```
/////////////
// Variables
/////////////

$development: true // This enables susy-grid-backgrounds and outlines

// Breakpoints
$bp-s-m:    400px
$bp-m-l:    600px
$bp-l-xl:   800px
$bp-xl-xxl: 1000px
$max-width: 1200px

// Columns
$cols-s:   1
$cols-m:   2
$cols-l:   3
$cols-xl:  4
$cols-xxl: 5

// Layouts
// $layout-s is not necessary due to a mobile-first approach
$layout-m:    $bp-s-m     $cols-m
$layout-l:    $bp-m-l     $cols-l
$layout-xl:   $bp-l-xl    $cols-xl
$layout-xxl:  $bp-xl-xxl  $cols-xxl

// Default grid settings
$total-columns:   $cols-s
$column-width:    85%
$gutter-width:    100% - $column-width
$grid-padding:    1em
$container-width: 100%
$container-style: fluid
+border-box-sizing

/////////////
// Mixins
/////////////

// A couple of mixins to open the developer's third eye
=dev-outline
  @if $development
    outline: 1px solid red
=dev-grid-bg
  +dev-outline
  @if $development
    +susy-grid-background

// A custom container declaration
=standard-container
  +container // ← An actual line of Susy code, yay! :D
             //  This whole post is actualy an attempt to make use of it.
  max-width: $max-width
  +dev-grid-bg

  +at-breakpoint($layout-m)
    +set-container-width
    +dev-grid-bg

  +at-breakpoint($layout-l)
    +set-container-width
    +dev-grid-bg

  +at-breakpoint($layout-xl)
    +set-container-width
    +dev-grid-bg

  +at-breakpoint($layout-xxl)
    +set-container-width
    +dev-grid-bg

/////////////
// Backgrounds
/////////////

// The wrapper divs are necessary for screen-wide backgrounds
html
  background: url('../images/main-background.png') // also repeat, color, this kind of stuff

#header-wrapper
  background: url('../images/header-background.png') 

#footer-wrapper
  background: url('../images/footer-background.png')

/////////////
// Containers
/////////////

// Actually declared in separate SASS files
#header, #main, #footer
  +my-container

/////////////
// Columns
/////////////

// An example of declaring columns
$cols-sidebar: 1
#sidebar-first
  +dev-outline
  +at-breakpoint($layout-l)
    +span-columns($cols-sidebar, $cols-l)

  +at-breakpoint($layout-xl)
    +span-columns($cols-sidebar, $cols-xl)

  +at-breakpoint($layout-xxl)
    +span-columns($cols-sidebar, $cols-xxl)
#content
  +dev-outline
  +at-breakpoint($layout-l)
    +span-columns($cols-l - $cols-sidebar omega, $cols-l)

  +at-breakpoint($layout-xl)
    +span-columns($cols-xl - $cols-sidebar omega, $cols-xl)

  +at-breakpoint($layout-xxl)
    +span-columns($cols-xxl - $cols-sidebar omega, $cols-xxl) 
```

这是我使用这种方法创建的网站[主页的静态快照](http://files.alfamb.ru/stackoverflow_384y6ht/Stackoverflow%20Susy%20px%20values/2/)[及其代码的快照](https://github.com/lolmaus/amt_boron/tree/ed384b0954a819b04463ab1228754c3671bf6275)。

## 问题

1.  遵循 window-px-widths-first 方法是我深思熟虑的决定，并且是针对以下问题的。我很欣赏您关于内容优先的论点，但请不要局限于说我错了，请回答以下特定于 window-px-widths-first 的问题。

2.  我的方法是先使用 Susy 执行 window-px-widths-first 的一种优雅方式，还是一段丑陋的代码？

3.  我怎样才能让我的代码更优雅？

    我不喜欢那些必须为每个容器和每个列重复的大量断点声明。我只能考虑使用记录不充分的可能性来为`+container`. 但只要`+set-container-width`不是我在每个媒体查询中执行的唯一代码，即使这个想法也不是一种选择。:(

4.  与 Susy 一起使用 window-px-widths-first 的推荐方法是什么（并满足我上面描述的要求）？

5.  请揭示您发现的我的代码的任何缺点。我是 SASS 的新手，我相信您可以提出更有效的方法来做同样的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T20:56:31.737

还不错，但有些东西你可以清理。

首先是设置。将 Susy 用于单个列是没有意义的，因此您可以完全放弃您的小网格，手动创建它（只是填充），并拥有更清晰的代码。添加多个列后，您当前的设置就没有多大意义了。85% 的 2 列，有 15% 的装订线？这增加了 185% 的宽度。它有效，因为 Susy 实际上对数字之间的比率比数字本身更感兴趣，但它有点难看。我会将其更改为例如`85px`and`15px`或`8.5em`and `1.5em`。由于无论如何您都在覆盖容器，这不应该改变任何东西 - 只是更明智一点。

我要做的另一个主要更改是删除所有 set-column-width 调用，因为无论如何您的宽度都是 100% 的流体覆盖。它所做的只是每次设置 100% 的宽度。何苦？有了这个，我想你可以通过断点的简单循环来自动化开发后台调用。

```
$layouts: $layout-m $layout-l $layout-xl $layout-xxl
@each $layout in $layouts
  +at-breakpoint($layout)
    +dev-grid-bg 
```

创建一个快捷方式来更改不同断点的列跨度对您或我们来说都是困难的，并且会增加相当多的输出膨胀，除非这真的是您在每种尺寸下所做的*唯一更改。*你目前拥有的东西看起来不错。

# objective-c - 实例变量在 UINavigationController 中的 ViewController 中不起作用

> ID：13461314
> 
> 赞同：0
> 
> 时间：2012-11-19T20:06:15.203
> 
> 标签：objective-c, ios

我还是 iOS 开发的新手，但我遇到了一个我无法解决的问题，我尝试在网上查找，但还没有找到任何东西。

我正在使用 UIImagePickerController 来选择和图像，我在 App Delegate 中使用它。返回图像时，在 imagePickerController:didFinishPickingMediaWithInfo 方法中，我想用视图控制器制作一个新的导航控制器并将其放在“应用程序”上。

这是我的做法：

```
CustomNavigationController *customNavigationController = [[CustomNavigationController alloc] init];
PhotoViewController *photoViewController = [[PhotoViewController alloc] initWithNibName:@"PhotoViewController" bundle:[NSBundle mainBundle]];

[customNavigationController pushViewController:photoViewController animated:NO];
[customNavigationController.view setFrame:[[UIScreen mainScreen] applicationFrame]];

[photoViewController release];
[self.window addSubview:customNavigationController.view];

//Call method of photoViewController.
[[customNavigationController.viewControllers objectAtIndex:0] addPhotoFromData:info];

[self.tabBarController dismissViewControllerAnimated:YES completion:nil]; //Get rid of UIImagePickerController 
```

但是在 photoViewController 中，我无权访问在 viewDidLoad 中合成和加载的任何实例变量。它们都返回null。还有一个 tableView，重新加载 tableView 的调用实际上不会导致 tableView 响应。

这是 photoViewController 的一些代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.photoCount = 0;
    self.timestamp = [[NSDate date] timeIntervalSince1970];
    self.photos = [[NSMutableArray alloc] initWithCapacity:5];
    self.photosData = [[NSMutableArray alloc] initWithCapacity:5];
    self.uploadingCount = 0;

    UINib *customCell = [UINib nibWithNibName:@"CustomTableCell" bundle:[NSBundle mainBundle]];

    [self.tableView registerNib:customCell forCellReuseIdentifier:@"customCell"];
    self.tableView.separatorColor = [UIColor clearColor];

    NSLog(@"%@", self);
} 
```

还有 addPhotoFromData 方法：

```
- (void)addPhotoFromData:(NSDictionary *)info
{    
   [self.photos addObject:info];
   NSLog(@"%@", self.photos); //Doesn't add "info" and does not return anything when later called from other methods.

   [self.tableView reloadData]; //Doesn't work 
```

在我添加 UINavigationController 之前一切正常。我完全迷路了。

**编辑：**经过更多调试尝试，我发现调用 addPhotoFromData 时未加载视图。viewDidLoad 被称为后记。有没有办法延迟方法调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:34:18.393

有什么理由不能`addPhotoFromData:`在`viewDidLoad`方法中调用 PhotoViewController 吗？您始终可以从视图控制器访问应用程序委托的属性：

```
YourAppDelegateType * delegate = [UIApplication sharedApplication].delegate;
[self addPhotoFromData:delegate.info]; 
```

# css - 将 div 置于其他 div 下方

> ID：13461317
> 
> 赞同：0
> 
> 时间：2012-11-19T20:06:20.910
> 
> 标签：css, html, position, size

我正在使用完整的 div 元素制作我的第一个布局，但我遇到了一个问题。我有一个固定位置的 div 和自动高度（将根据内容扩展），但我似乎无法在其下方放置另一个 div。如何根据上面div的高度自动定位下面的div？

这些 div 将包含在将它们放置在屏幕中心的包装 div 中。

JSFIDDLE： http: [//jsfiddle.net/kfbjd/](http://jsfiddle.net/kfbjd/)（请注意，第一个 div 有一个顶部值，所以底部 div 覆盖它）修复了 jsfiddle：http: [//jsfiddle.net/kfbjd/14/](http://jsfiddle.net/kfbjd/14/)

```
<div id="main">
<div id="maintext">MAIN</div>

</div>

<div id="about">
<div id="maintext">ABOUT</div>

</div>

<style type="text/css">
#main{
    background-color:#000;
    width:900px;
    top:129px;
    position:fixed;
}

#about{
    background-color:#000;
    width:900px;
    position:relative;
}
</style> 
```

感谢您的建议，将 top:129px 添加到 #about 已修复它。但是有一个问题，尽管它在我的浏览器的 jsfiddle 上正确显示，但文本显示为包裹：

![在此处输入图像描述](../Images/2847b6087f8b8e5e7c624d8ce3520640.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:10:26.853

编辑：在这里，使用你的 jsfiddle：http: [//jsfiddle.net/kfbjd/7/](http://jsfiddle.net/kfbjd/7/)

正如其他人评论的那样，固定或绝对位置会将其从页面流中删除，因此您将无法让其他 div 将自己定位在它周围。如果你做了相对位置，然后使用 css 'display: block' 样式，它可能会让你更接近你正在寻找的东西。

[http://www.w3schools.com/cssref/pr_class_display.asp](http://www.w3schools.com/cssref/pr_class_display.asp)

更新以包含来自 JSFiddle 的解决方案的全文，包括水平居中，以供后代使用：

```
<style>
#main{
    background-color:#000;
    width:900px;
    margin-top:149px;
    position:relative;
    margin-left: auto;
    margin-right: auto;    
    opacity:0.9;
    z-index:2;
    box-shadow: 0px 0px 20px #000;
    -moz-box-shadow: 0px 0px 20px #000;
    -webkit-box-shadow: 0px 0px 20px #000;    
}

.maintext{
    font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size:14px;
    color:#6b6b6b;
    padding:25px;
    text-align:left;
    -webkit-touch-callout: text;
    -webkit-user-select: text;
    -khtml-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;    
}

#about{
    background-color:#000;
    width:900px;
    /*height:450px;    */
    margin-top:20px;
    margin-left: auto;
    margin-right: auto;
    position:relative;
    opacity:0.9;
    z-index:2;
    box-shadow: 0px 0px 20px #000;
    -moz-box-shadow: 0px 0px 20px #000;
    -webkit-box-shadow: 0px 0px 20px #000;    
}
</style>

<div id="main">
<div class="maintext">Welcome to my personal portfolio. Here you can find projects I have worked on, and hire me for freelance work. If you like my work and want to hire me for projects please check out my software skills <a href="about.html">here</a> and <a href="contact.html">contact</a> me to discuss about projects.Welcome to my personal portfolio.
<div style="text-align:center;"><br/><img src="images/green.png" border="0" style="vertical-align:middle; margin-bottom:3px;"/>Available for freelance work</div></div>

</div>

<div id="about">
<div class="maintext">ABOUT TEXT</div>
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:24:21.547

如果您将#about 移动到#main 内，它将正确定位自己[http://jsfiddle.net/kfbjd/3/](http://jsfiddle.net/kfbjd/3/)

如果你不能这样做，你可以添加

```
top:129px; 
```

到#about div（匹配你已经给#main 的内容）。[http://jsfiddle.net/kfbjd/5/](http://jsfiddle.net/kfbjd/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:43:18.460

如果您只想让“about”div 位于固定位置“main”div 的底部，并且您知道“about”div 的高度，则可以执行以下操作：

```
<style>
    #main{
    background-color:#000;
    width:900px;
    top:129px;
    position:fixed;
    padding:0px 0px 100px 0px;
}

#about{
    background-color:#ff0000;
    width:900px;
    position:absolute;
    bottom:0px;
height:100px;
}
</style>

<div id="main">
    <div id="maintext">MAIN</div>

    <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

    <div id="about">
    <div id="maintext">ABOUT</div>

    </div>

</div> 
```

“main”底部的填充将允许“about”div 的空间出现在底部（否则它将与“main”div 底部的内容重叠）。我只是将 100pixels 作为“about”div 的示例高度。

# c# - 如何使用 C# 在 Active Directory 中更改电话号码

> ID：13461326
> 
> 赞同：3
> 
> 时间：2012-11-19T20:06:52.983
> 
> 标签：c#, active-directory

我有这个代码，我可以在其中更改 Active Directory 中的显示名称、密码等

```
UserPrincipal userPrincipal = UserPrincipal.FindByIdentity(principalContext, userName);
userPrincipal.DisplayName = "Some NAME";
userPrincipal.SetPassword("NEW_PASSWORD");
userPrincipal.Save(); 
```

我查看了 userPrincipal 的属性，但找不到电话号码属性。我的问题是如何更改代码中用户的电话号码。

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T20:08:45.863

更正（对不起所有的编辑）：

这就是我所做的......

```
 public static void SetUserInfo(string userName)
    {
        var dsDirectoryEntry = new DirectoryEntry("LDAP://xxxx/DC=xx,DC=xxx", "ADusername", "ADpassword");

        var dsSearch = new DirectorySearcher(dsDirectoryEntry) { Filter = "(&(objectClass=user)(SAMAccountName=" + userName + "))" };

        var dsResults = dsSearch.FindOne();
        var myEntry = dsResults.GetDirectoryEntry();
        //myEntry.Properties[property].Value = value;
        myEntry.Properties["telephoneNumber"].Value = "222-222-2222";
        myEntry.CommitChanges();
    } 
```

# javascript - jQuery将文本插入光标位置的文本区域

> ID：13461327
> 
> 赞同：1
> 
> 时间：2012-11-19T20:06:55.933
> 
> 标签：javascript, jquery

我已经看到这个关于如何在文本区域中的光标处插入文本的示例：

[http://jsfiddle.net/adamadam123/bTUWa/5/](http://jsfiddle.net/adamadam123/bTUWa/5/)

以上工作正常，但是当我尝试将它添加到我自己的代码（主要是 jQuery）中时，我发现我无法让它工作了 - 下面是我尝试使用该函数的代码示例：

[http://jsfiddle.net/adamadam123/bbE48/6/](http://jsfiddle.net/adamadam123/bbE48/6/)

有人可以帮我让第二个 jsfiddle 工作。注意：真的想要传递 ID，因为有许多具有不同 ID 的 div，但它们都具有相同的 textarea.classname。

谢谢你

```
<div id="100000000">
  <input id="insertPattern" type="button" value="insert pattern" />
  <textarea class="chatMessengerFooterTextArea">insert some text into this string</textarea>
</div>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:24:28.070

您可以使用`next`获取输入：

```
var txtarea = $("#"+ID).next('textarea')[0]; 
```

[http://jsfiddle.net/bbE48/13/](http://jsfiddle.net/bbE48/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:20:49.433

您修改后的函数将`txtarea`变量重新定义为 jQuery 对象而不是 DOM 对象。您需要使用`.get(0)`再次获取 DOM 对象。

```
var txtarea = $("#"+ID).find('textarea.chatMessengerFooterTextArea').get(0); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-19T20:14:57.987

您需要为 textarea 本身提供一个 ID。您将 :) 传递到 DIV，而不是 textarea。

将您的 textarea 更改为以下内容：

```
<textarea id="myTextArea" class="chatMessengerFooterTextArea">insert some text into this string</textarea> 
```

而你的 Jquery 代码是这样的：

```
$('input#insertPattern').click(function() {
    alert('clicked me');
    insertEmoticonAtTextareaCursor('myTextArea', ':)');
}); 
```

# jquery - 无法让 ImageMapster 突出显示区域来切换文本块

> ID：13461331
> 
> 赞同：1
> 
> 时间：2012-11-19T20:07:11.263
> 
> 标签：jquery

使用 ImageMapster 的蔬菜托盘[示例](http://jsfiddle.net/sb9j7/)，当您单击一个区域时，它会在主图像上方显示与该区域相关的文本。如果再次单击同一区域，它将取消选择该区域，但将文本留在主图像上方。我需要的是在您单击该区域时打开文本（就像现在一样），然后在您再次单击同一区域时将其关闭。换句话说，突出显示的区域需要像切换开关一样工作，以打开和关闭与每个区域关联的文本。

我正在尝试使用的部分是：

```
 onClick: function (e) {

        // update text depending on area selected
        $('#selections').html(xref[e.key]);

        } 
```

我尝试添加

```
$('#selections').toggle(); 
```

进入功能。这确实会产生“切换”效果，但不会与突出显示的区域保持“同步”。无论您单击哪个区域，它都只是打开和关闭文本块。

有人可以帮忙解决这个问题吗？

# jquery - 为初学者调试 Javascript

> ID：13461333
> 
> 赞同：-1
> 
> 时间：2012-11-19T20:07:13.450
> 
> 标签：jquery, debugging

我有这个脚本，我无法通过反复试验进行调试。调试javascript的首选EASY方法是什么？如何像使用 Firebug 进行 css 调试一样轻松地使用 Firebug 跟踪错误？

[http://jsfiddle.net/infatti/72QPC/5/](http://jsfiddle.net/infatti/72QPC/5/)

```
var options1 = {
  valueNames: [ 'filterUrgency', 'filterType', 'ID', 'Type', 'Task', 'Project', 'Status', 'DueDate', 'Region', 'Market', 'Title', 'Author', 'Published' ]
};

//sorter 1 ---------------------------------------------
var sortedList1 = new List('sorter-1', options1);

//sorter 2 ---------------------------------------------
var sortedList2 = new List('sorter-2', options1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:14:12.097

首先打开 Firebug 的“控制台”选项卡，检查是否抛出了任何错误。

通常，如果发生错误，您可以在控制台中查找它发生的位置（在哪一行），因此在代码中找到该行是微不足道的，然后决定在该行之前的某处设置一个断点（如有必要。 )

您可以在“脚本”选项卡中设置断点。只需选择文件，然后单击行号，然后触发代码执行（例如重新加载页面）。执行将在该断点处停止。然后您可以分析状态（例如局部变量和参数的值）。

# php - MySQL查询错误（使用php）

> ID：13461338
> 
> 赞同：0
> 
> 时间：2012-11-19T20:07:38.893
> 
> 标签：php, mysql, myisam

我对这个查询有疑问。

```
 $query = 'CREATE TABLE movie(
    movie_id UNSIGNED INTEGER NOT NULL AUTO_INCREMENT,
    movie_name VARCHAR(255) NOT NULL,
    movie_type TINYINT NOT NULL DEFAULT 0,
    movie_year SMALLINT UNSIGNED NOT NULL DEFAULT 0,
    movie_leadactor INTEGER UNSIGNED NOT NULL DEFAULT 0,
    movie_director INTEGER UNSIGNED NOT NULL DEFAULT 0,

    PRIMARY KEY (movie_id),
    KEY movie_type (movie_type, movie_year)
    )
    ENGINE=MyISAM';
 $result = mysql_query($query, $db) or die(mysql_error($db)); 
```

它仍然这样写：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“UNSIGNED INTEGER NOT NULL AUTO_INCREMENT, movie_name VARCHAR(255) NOT NULL,”附近使用正确的语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:11:16.787

无符号必须在 int 之后。我重写了您的查询并验证它现在确实有效。

```
CREATE TABLE movie(
movie_id INT UNSIGNED NOT NULL AUTO_INCREMENT,
movie_name VARCHAR(255) NOT NULL,
movie_type TINYINT NOT NULL DEFAULT 0,
movie_year SMALLINT UNSIGNED NOT NULL DEFAULT 0,
movie_leadactor INT UNSIGNED NOT NULL DEFAULT 0,
movie_director INT UNSIGNED NOT NULL DEFAULT 0,
PRIMARY KEY (movie_id),
KEY movie_type (movie_type, movie_year)
)
ENGINE=MyISAM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:12:06.957

试试这个，你的 INTEGER 可以写成 INT 并且你把 UNSIGNED 变量放在它之前，它需要去后面 -

```
$query = 'CREATE TABLE movie(
`movie_id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
`movie_name` VARCHAR(255) NOT NULL,
`movie_type` TINYINT NOT NULL DEFAULT 0,
`movie_year` SMALLINT UNSIGNED NOT NULL DEFAULT 0,
`movie_leadactor` INTEGER UNSIGNED NOT NULL DEFAULT 0,
`movie_director` INTEGER UNSIGNED NOT NULL DEFAULT 0,

PRIMARY KEY (movie_id),
KEY movie_type (movie_type, movie_year)
)
ENGINE=MyISAM';
$result = mysql_query($query, $db) or die(mysql_error($db)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:09:36.957

MySQL 的整数类型称为`INT`，而不是`INTEGER`。

# ios - 对访问数组中的可变字典感到困惑

> ID：13461343
> 
> 赞同：1
> 
> 时间：2012-11-19T20:07:51.940
> 
> 标签：ios, nsmutablearray, nsmutabledictionary

我在这里遗漏了一些东西，我知道这并不难，但我没有得到它。我有一个字典列表。它被加载到一个可变数组中，然后填充我的 tableView。

plist 示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>title</key>
        <string>entry1</string>
        <key>checkedState</key>
        <string>NO</string>
    </dict>
    <dict>
        <key>title</key>
        <string>accessoriesImage</string>
        <key>checkedState</key>
        <string>NO</string>
    </dict>
    <dict>
        <key>title</key>
        <string>activationCharge</string>
        <key>checkedState</key>
        <string>NO</string>
    </dict> 
```

我正在尝试访问这些字典值，但我很困惑。

这是我的初始化：

```
static NSString *kTitleKey = @"title";
static NSString *kCheckedState = @"checkState";

@interface ViewController ()

@end

@implementation ViewController

@synthesize attributesTableView, attributesArray;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nil bundle:nil];
    if (self) {
        NSString *attributesFile = [[NSBundle mainBundle] pathForResource:@"attributesPlist"ofType:@"plist"];

        attributesArray = [[NSMutableArray alloc] initWithContentsOfFile:attributesFile];

    }
    return self;
} 
```

跳到相关位，我正在填充我的 tableView 单元格：

```
cell.textLabel.text = [[attributesArray objectAtIndex:[indexPath row]] valueForKey:kTitleKey]; 
```

后来在 didSelectRowAtIndexPath 中，我试图检查那些字典值，这就是我失败的地方。

例子：

```
if ([[attributesArray valueForKey:kTitleKey = @"All"] valueForKey:kCheckedState = @"YES"]) {
                        [attributesArray setValue:kCheckedState = @"NO" forKey:@"All"];

[attributesArray setValue:kCheckedState = @"YES" forKey:[[attributesArray objectAtIndex:[indexPath row]] valueForKey:kTitleKey]]; 
```

我收到此错误：**valueForUndefinedKey:]：此类不符合键 YES 的键值编码。**

我知道我只是错误地访问它，但我不确定当我使用一个充满可变字典的可变数组时我是如何做到的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:13:09.337

我认为您设置值的语法已关闭。在您发布的最后一个代码段中，您有以下内容：

```
[attributesArray valueForKey:kTitleKey = @"All"] 
```

与您的想法相反，这并没有将标题设置为“全部”；相反，它将*值替换为`kTitleKey`*字符串“All”，然后从属性数组中获取“All”的值。相反，我认为你想要类似的东西：

```
[attributesArray setValue:@"All" forKey:kTitleKey] 
```

您必须在最后一个示例中进行类似的更新。请记住这里的关键区别：

*   `valueForKey:` *得到*一个值。`valueForKey:`即使您输入一些等号，您也永远无法使用 设置某些内容。
*   `setValue:forKey:` *设置*一个值。每当您需要更改时，您都会想使用它`attributesArray`。

您可能想阅读[键值编码](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)以获取更多信息。

# uiimage - 转到另一个视图时，UIimages 移动到中心

> ID：13461347
> 
> 赞同：2
> 
> 时间：2012-11-19T20:08:20.070
> 
> 标签：uiimage, drag, autolayout

我有一个拖放式的应用程序。您可以在其中选择图像并将它们拖动到屏幕上的任何位置！我遇到的问题是，当您移动到另一个视图时，当我返回时，所有图像都会重置到中心。例如，如果我按下按钮将我带到屏幕 2，我刚才所做的所有“拖动”图像都会移回中心。

这只发生在我启用自动布局时:(我所有的图像都从中心开始，所以我猜测它与自动布局有关......

有任何想法吗 ？！

这是我的拖动图像代码的示例。

```
 - (IBAction)handlePan:(UIPanGestureRecognizer *)recognizer {

CGPoint translation = [recognizer translationInView:self.view];
recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x,
                                     recognizer.view.center.y + translation.y);
[recognizer setTranslation:CGPointMake(0, 0) inView:self.view];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-24T14:47:32.450

您的拖放代码通过改变 view.center 属性来手动配置布局。

启用自动布局后，自动布局负责设置布局，因此它专门负责设置 view.center、view.bounds 和 view.frame（实际上只是从 center 和 bounds 计算出来的）。

因此，一旦启用了自动布局，尽管您仍然可以手动设置 view.center，但自动布局将在下次计算满足您现有约束的布局时破坏您所做的任何事情。

那么如何更新代码以使用自动布局？如果您想使用自动布局，您需要做的是修改您的 handlePan: 方法，以便修改用于计算 view.center 的自动布局约束，而不是修改 view.center。这将取决于您的约束配置。但是，如果我们假设，例如，有一个 NSLayoutContraint topSpaceConstraint 将视图的顶部空间设置为超级视图，另一个 NSLayoutConstraint leftSpaceConstraint 将视图的左侧空间设置为超级视图，那么您可以产生与

```
view.center = CGPointMake(view.center.x + translation.x,
                          view.center.y+ translation.y); 
```

而是做类似的事情

```
topSpaceConstraint.constant = topSpaceConstraint.constant + translation.y;
leftSpaceConstraint.constant = leftSpaceConstraint.consant + translation.x;
[view setNeedsLayout];
[view layoutIfNeeded]; 
```

前两行更新约束。最后两行导致自动布局系统重新计算结果帧并立即应用它，而不是等到下一轮运行循环。

或者，您可能能够在获得 UIGestureRecognizerChanged 事件时手动更新框架，然后通过仅在获得 UIGestureRecognizerEnded 事件后才通过如上所示更新约束来使结果“永久”。这会更高效，因为在许多 UIGestureRecognizerChanged 事件期间，您将直接更新框架，而不是依赖自动布局系统来完成。

# scala - 你如何在scala中解构列表

> ID：13461349
> 
> 赞同：0
> 
> 时间：2012-11-19T20:08:22.260
> 
> 标签：scala

我有这个代码：

```
val host:String = Play.configuration.getString("auth.ldap.directory.host").get
val port:java.lang.Integer = Play.configuration.getString("auth.ldap.directory.port").get.toInt
val userDNFormat:String = Play.configuration.getString("auth.ldap.userDNFormat").get 
```

我需要向其中添加十几个配置选项，因此我希望将其重构为：

```
val params = Seq("auth.ldap.directory.host", "auth.ldap.directory.port", "auth.ldap.userDNFormat")
params.map(Play.configuration.getString) match {
  case host~port~userDNFormat => foo(host, port, userDNFormat)
} 
```

我编了那个代码。执行此操作的正确语法是什么？在地图/匹配线上我收到了这个错误，我不明白：

```
error: type mismatch;
found   : (String, Option[Set[String]]) => Option[String]
required: java.lang.String => ? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:14:07.790

为了匹配一个序列，你可以写

```
case Seq(host, port, userDNFormat) => foo(host, port, userDNFormat) 
```

# javascript - jquery.ui.ipad 防止关注 ipad 上的输入字段

> ID：13461362
> 
> 赞同：1
> 
> 时间：2012-11-19T20:09:05.823
> 
> 标签：javascript, html, ipad

我有一个使用 jquery.ui.ipad.js 来翻页的网站。这很可爱，但加载此文件也会阻止触摸输入字段和输入文本的能力。除了触摸（聚焦）输入字段外，其他一切都很好。

我可以注释掉 jquery.ui.ipad.js 并且输入工作正常。在阅读和研究中，它看起来与 prevenetDefault 行为有关，我在 jquery.ui.ipad.js 文件中看到了很多，但我不确定如何启用触摸以专注于输入字段。

任何帮助或建议将不胜感激。

[这是 jquery.ui.ipad 文件的一个版本](http://code.google.com/p/jquery-ui-for-ipad-and-iphone/source/browse/trunk/jquery.ui.ipad.js?r=2)

# string - 在 Delphi 中用字符串连接 PChar

> ID：13461366
> 
> 赞同：2
> 
> 时间：2012-11-19T20:09:17.007
> 
> 标签：string, delphi, pointers, delphi-2010

我需要构造一个字符串并通过发送它`PostMessage`，即。

```
FileName := String_1 + String_2 + String_3;
PostMessage(FWndHandle, WM_BLA_BLA, NotifyData^.Action, LParam(FileName)); 
```

但有些东西不起作用。另外，FileName 是一个 PChar。代码如下所示：

```
var
   FileName : PChar;
   Directory_Str : String;
   AnotherString : String;
begin
    // Get memory for filename and fill it with data
    GetMem(FileName, NotifyData^.FileNameLength + SizeOf(WideChar));
    Move(NotifyData^.FileName, Pointer(FileName)^, NotifyData^.FileNameLength);
    PWord(Cardinal(FileName) + NotifyData^.FileNameLength)^ := 0;

    // TODO: Contact string before sending message
    // FileName := AnotherString + Directory_Str + FileName;

    PostMessage(FWndHandle, WM_BLA_BLA, NotifyData^.Action, LParam(FileName));

    ...
end; 
```

现在我需要`FileName`在调用之前联系另一个字符串到变量`PostMessage`，即。

```
FileName := AnotherString + Directory_Str + FileName;
PostMessage(FWndHandle, WM_BLA_BLA, NotifyData^.Action, LParam(FileName)); 
```

如果 FileName 是一个字符串，这将起作用，但这里不是这种情况。

**任何人都知道如何用 PChar 做到这一点？**我尝试了这些方法，有时会奏效，但最后总是会出现问题：

```
StrPCopy(FileName, FDirectory + String(FileName)); 
```

或者

```
FileName := PChar(AnotherString + Directory_Str + FileName); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T20:27:13.477

您不能轻松地使用`PostMessage`通过引用传递的数据。原因是`PostMessage`异步执行，您需要保持传递的内存处于活动状态，直到消息被其接收者处理。我想这就是你的`GetMem`代码背后的原因。

显然，这只适用于同一进程。而且您还会发现 Windows 不允许您使用`PostMessage`它的任何接收指针的消息。例如，`PostMessage`总是`WM_SETTEXT`失败。您只能希望使用用户定义的消息来做到这一点。当然，您需要在接收消息的代码中释放内存。

我将假设您使用的是用户定义的消息，该消息允许发送带有`PostMessage`. 在这种情况下，您已经有了解决方案。使用字符串变量进行连接，然后在答案中使用第一段代码。

尽管您可以像这样使它更清洁：

```
function HeapAllocatedPChar(const Value: string): PChar;
var
  bufferSize: Integer;
begin
  bufferSize := (Length(Value)+1)*SizeOf(Char);
  GetMem(Result, bufferSize);
  Move(PChar(Value)^, Result^, bufferSize);
end;

procedure PostString(Window: HWND; Msg: UINT; wParam: WPARAM; 
  const Value: string);
var
  P: PChar;
begin
  P := HeapAllocatedPChar(Value);
  if not PostMessage(Window, Msg, wParam, LPARAM(P)) then
    FreeMem(P);
end; 
```

您可以像这样调用该过程：

```
PostString(FWndHandle, WM_BLA_BLA, NotifyData^.Action, FDirectory + FileName); 
```

您当前的代码失败，因为：

1.  当您打电话时，`StrPCopy`您不会为更长的字符串分配任何内存。
2.  当你写作时，`PChar(AnotherString + Directory_Str + FileName)`你陷入了你试图避免的陷阱`GetMem`。这是一个本地字符串，在处理消息时已被释放。

如果您可以找到一种无需使用`PostMessage`传递字符串即可解决问题的方法，那么这可能比所有这些复杂性更可取。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-19T20:43:01.967

有关您的代码失败的原因，请参阅 David 的回答。

我总是定义一个通过`PostMessage`操作分配字符串的类。没有泄漏的风险，并且很容易通过更多信息进行扩展。

```
Type
  TMyMessage = class
    msg : String;
    Constructor Create(aMessage : String);
  end;

// Sending the message
var
  myMsg : TMyMessage;
...
myMsg := TMyMessage.Create('A message');

if not PostMessage(someHandle,WM_something,WParam(myMsg),0)
then begin
  myMsg.free;
  ... Take care of this condition if PostMessage fails !!
end;  

// Receiving the message

procedure TSomeForm.GetMessage(var msg : TMessage);
var
  aMsg : TMyMessage;
begin
  ...
  aMsg := TMyMessage(msg.WParam);
  try
    ...
    // Do something with the message
  finally
    aMsg.Free;
  end;
end; 
```

# performance - Apache2 - 非常高流量网站的 ServerLimit、MaxClients、MaxRequestsPerChild 的最佳值

> ID：13461367
> 
> 赞同：4
> 
> 时间：2012-11-19T20:09:19.050
> 
> 标签：performance, optimization, apache2

我正在运行一个流量密集的站点（每天 100k）。在高峰时间（超过 1500 个在线活动）网站会急剧变慢并增加页面加载时间。（图片也是）

我们在同一台服务器上使用前端 + mysql 数据库。有足够的未使用资源。

平均负载：1.47、1.63、1.73 htop：[http ://grabilla.com/02b13-02a8961d-bd7e-404c-9​​873-06e57bb7eab1.png](http://grabilla.com/02b13-02a8961d-bd7e-404c-9873-06e57bb7eab1.png)

服务器配置：E3 1230 (4 x 3.2Ghz) / 16GB RAM / 1Gbps 端口速度 centoOS 5.8

阿帕奇配置：

```
Timeout 150
KeepAlive Off
MaxKeepAliveRequests 1000
KeepAliveTimeout 15

<IfModule prefork.c>
StartServers       8
MinSpareServers    5
MaxSpareServers   20
ServerLimit      256
MaxClients       256
MaxRequestsPerChild  4000
</IfModule>

<IfModule worker.c>
StartServers         2
MaxClients         450
MinSpareThreads     25
MaxSpareThreads     75 
ThreadsPerChild     25
MaxRequestsPerChild  0
</IfModule> 
```

CPU 使用率在高峰时段永远不会超过 2 个平均负载。MySQL 服务器当时也有 7~15% 的使用率。我知道这不是数据库瓶颈，因为静态页面在高峰时段也需要很长时间才能加载。

任何优化这些值的提示将不胜感激，谢谢。

网址：http: [//goo.gl/XVPAA](http://goo.gl/XVPAA)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-11T22:41:18.157

假设您使用带有 prefork 的 linux：打开 keep alive。如果您的流量不断增加，请增加服务器数量。降低你的存活时间，这样你就不会很快使你的连接饱和，并增加你每个孩子的请求，这样服务器就不会经常重启。你有很多内存，所以尽量最大化你的内存使用率并减少你的 CPU 使用率。先试试这个：

```
Timeout 150
KeepAlive On
MaxKeepAliveRequests 1000
KeepAliveTimeout 5

<IfModule prefork.c>
StartServers      20
MinSpareServers   20
MaxSpareServers   30
ServerLimit      256
MaxClients       256
MaxRequestsPerChild  10000
</IfModule> 
```

还要编辑你的 my.conf 并增加缓存和缓冲区。

# c++ - 在 Fix8 C++ 库中运行 Linux 配置错误？

> ID：13461369
> 
> 赞同：4
> 
> 时间：2012-11-19T20:09:34.813
> 
> 标签：c++, linux, ubuntu, debian

我正在尝试在 Fix8.org 上运行 Fix8。我按照自述文件的说明进行操作，如下所述：

[https://github.com/dakka/fix8](https://github.com/dakka/fix8)

运行 ./configure 命令时出现错误？结果是：

```
configure: error: cannot find install-sh, install.sh, or shtool in "." "./.." "./../.." 
```

有没有人有解决这个问题的经验？我正在运行最新版本的 Debian 和 Ubuntu Linux。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T07:54:48.947

错误中提到的文件由 autoconf 放置在源目录中，并且应该在发布 tarball 中分发。如果不是，那就是bug，请报告给作者。

如果您安装了 autoconf，您可以通过运行`./bootstrap`（或它具有的任何脚本；通常的名称是`./autogen.sh`）来获取文件，但您不需要 autoconf 来运行配置脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:10:16.053

是的，很抱歉 - 你需要 libtool。我提供了配置 - 因为这是缺失的。检查常见问题解答。如果您还有任何问题，请发送电子邮件至支持小组。

# php - 使用 pdo 准备好的语句将数据插入数据库

> ID：13461377
> 
> 赞同：0
> 
> 时间：2012-11-19T20:10:09.430
> 
> 标签：php, pdo

使用 pdo 准备好的语句将数据插入数据库，对我不起作用：

我使用这个功能：

```
 public function get_number_of_matches(){
     $stmt = $this->pdo->prepare("INSERT INTO `words`( `word_name`, `word_count`, `search_id`) VALUES (:word, :count,:searchID)");
       $stmt->bindParam(':word', $word);
       $stmt->bindParam(':count', $count);
       $stmt->bindParam(':searchID', $search_id);
   for($i=0;$i<count($this->words);$i++){
     if(preg_match_all('/'.$this->words[$i].'/i', $this->text,$matches)){
       $count=count($matches[0]);
       $word=$this->words[$i];
        $search_id=1;
       $stmt->execute();
         break;
    }   

   }
    return 0;
} 
```

基本上，我尝试遍历这些值并将它们放入数据库..没有给出错误..没有任何东西进入数据库..为什么？

这是我连接到数据库的方式：

```
 class DBConnection {
    public static $connect;

    public static function connect(){

        if(!isset(self::$connect)){
            try{
              self::$connect=new PDO('mysql:host=localhost;dbname=tweeter', 'root', '');
            }catch(Exception $ex){
               echo $ex->getMessage();   
            }
        }
        return self::$connect;
    }
} 
```

**更新** 也..见这里：

我用不同的查询做同样的事情..但是当我尝试将对象属性放入变量时出现错误：

$tweet= $tweet->tweet ; $user=$tweet->tweeter_name; $链接= $tweet->链接；

这些变量进入查询：

```
 $pdo=  DBConnection::connect();
    $stmt = $pdo->prepare("INSERT INTO `tweets`( `tweet`, `tweeter_name`, `link`, `date`, `search_id`) VALUES (:tweet, :tweeter_name, :link, :date, :search_id)");
      $stmt->bindParam(':tweet', $tweet);
       $stmt->bindParam(':tweeter_name', $user);
       $stmt->bindParam(':link', $link);
       $stmt->bindParam(':date', $date);
       $stmt->bindParam(':search_id', $search_id); 
```

我收到这样的错误：

> 注意：尝试在第 36 行的 C:\xampp\htdocs\Twitter\demo.php 中获取非对象的属性

注意：尝试在第 37 行的 C:\xampp\htdocs\Twitter\demo.php 中获取非对象的属性

注意：尝试在第 38 行的 C:\xampp\htdocs\Twitter\demo.php 中获取非对象的属性

我可以打印属性..但是将它们分配给那些绑定变量时..上述错误突然出现

我也得到这个：

> 致命错误：未捕获的异常 'PDOException' 并带有消息 'SQLSTATE[23000]：完整性约束违规：C:\xampp\htdocs\Twitter\demo.php:40 中的 1048 列 'tweeter_name' 不能为空 堆栈跟踪：#0 C :\xampp\htdocs\Twitter\demo.php(40): PDOStatement->execute() #1 {main} 在第 40 行的 C:\xampp\htdocs\Twitter\demo.php 中抛出

我改为这样检查：

```
 $tweet= "111111"; // $tweet->tweet ;
        $user= "22222222"; // $tweet->tweeter_name;
        $link= "3333333";  // $tweet->link;
        $date= "444444"; 
```

它起作用了..出于某种原因它讨厌那些对象属性？！？

这应该作为输入：

> RT @OrganicLiveFood：科学家警告#EPA Over #Monsanto's #GMO Crop Failures & Dangers #prop37 #labelGMO #yeson37 [http://t.co/2XhuVxO8](http://t.co/2XhuVxO8) Doumastic [TweetCaster for iOS](http://www.handmark.com) Mon, 19 Nov 2012 20:40:55 +0000 RT @ OrganicLiveFood：科学家就#Monsanto 的#GMO 作物歉收和危险警告#EPA #prop37 #labelGMO #yeson37 [http://t.co/2XhuVxO8](http://t.co/2XhuVxO8)

但它不...？！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:13:55.513

连接后立即添加`self::$connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);`。

它将确保 PDO 将在每个错误上抛出 PDOExceptions，使它们很容易看到。然后，该错误将准确概述出了什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:19:27.730

检查 from 的返回值`$stmt->execute()`，如果有问题将返回`false`，您应该检查`$stmt->errorInfo()`详细信息。

或者使用@Madara Uchiha 建议的 ERRMODE_EXCEPTION，但如果您还没有在应用程序中处理异常，那么这可能很难适应。

* * *

回复：你的更新。

您应该检查两者`PDO::prepare()`以及`PDOStatement::execute()`每次调用它们时的错误状态。关于“试图获取非对象的属性”的错误可能意味着它`$stmt`实际上是布尔值`false`而不是有效的 PDOStatement 对象。你的调用`$stmt->bindParam()`失败，因为`false`它不是一个对象，所以它不能有一个`bindParam()`方法。

在我看来，通过值传递参数而不是通过引用绑定变量要容易得多。这是错误检查和按值参数的示例：

```
$pdo =  DBConnection::connect();

$sql = "INSERT INTO `tweets`( `tweet`, `tweeter_name`, `link`, `date`, `search_id`) 
    VALUES (:tweet, :tweeter_name, :link, :date, :search_id)";

if (($stmt = $pdo->prepare($sql)) === false) {
    die(print_r($pdo->errorInfo(), true));
}

$params = array(
    ':tweet'        => $tweet,
    ':tweeter_name' => $user,
    ':link'         => $link,
    ':date'         => $date,
    ':search_id'    => $search_id
);

if (($status = $stmt->execute($params) === false) {
    die(print_r($stmt->errorInfo(), true));
} 
```

您在异常中看到的错误“Column 'tweeter_name' cannot be null'”意味着您的`tweeter_name`列被声明为 NOT NULL，但是当您将 $user 变量绑定到 :tweeter_name 参数时它没有值。

# java - Java Swing - 我需要将输入数字转换为 HH:MM 格式的分钟和秒

> ID：13461378
> 
> 赞同：0
> 
> 时间：2012-11-19T20:10:16.867
> 
> 标签：java, swing, time, jspinner, jformattedtextfield

在 Java Swing 中，我们是否有可以像在 Microwave 中设置时间一样工作的文本组件。

默认情况下，系统应在文本字段中显示 00:00:00 (hh:mm:ss)。用户将默认焦点放在文本框最右侧的最右侧位置。例如，如果用户输入 00:00:85，则系统应将其转换为 01:25，类似地，如果用户输入 00:08:99，则系统应将其转换为 00:9:39（9 分 39 秒），同样，如果用户输入 00:03:00，则系统应将其转换为 00:03:00（3 分钟）

请让我知道我们是否有任何像这样或类似这样工作的组件..

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:14:13.577

开箱即用，没有。您将不得不编写一些自定义代码。

您可以`JFormattedTextField`在其上使用带有自定义格式的 a 。有关示例，请参见[这篇文章。](https://stackoverflow.com/a/13424140/1076463)您唯一需要替换的是`Format`您自己的格式。

另一种可能性是`JSpinner`使用自定义模型，您只需循环一组固定值（例如，将时间增加 5''）。我的微波炉就是这样工作的。我可以旋转一个增加时间的按钮。我不能“输入”任何东西

# android - ScrollView + Programmatic View 添加 = 无滚动

> ID：13461383
> 
> 赞同：1
> 
> 时间：2012-11-19T20:10:25.907
> 
> 标签：android, layout, scrollview

我不能说我以前有过这个问题，也许我只是需要一双新鲜的眼睛。以编程方式将视图添加到根 ScrollView 内的 LinearLayout 后，ScrollView 似乎不知道也不滚动。

下面，`group`是LinearLayout的一个扩展，`root`是XML布局里面的LinearLayout。

我的主要 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroll_root"
    style="@style/Standard.Fill" <!-- match_parent in both _width and _height -->
    android:fillViewport="true">

    <LinearLayout
        android:id="@+id/base_group"
        style="@style/BaseGroup" <!-- derived style from Standard.Fill -->
        android:orientation="vertical" />

</ScrollView> 
```

添加视图，例如：

```
for(int i = 0; i < 95; i++){
    TextView kv = new TextView(this);
    kv.setText("asdas as adsa");

    // kvp is LayoutParams with match_parent and wrap_content
    group.addView(kv, kvp); 
}
root.addView(group, new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT)); 
```

ScrollView 父级似乎不知道它的 LinearLayout 子级已扩展超出边界并且不滚动。我尝试了`fillViewport`,`layout_width`和`layout_height`, `requestLayout()`,`invalidate()`等的变体但无济于事。

我可能会切换到 a`ListView`和适配器工作流程，但这对我来说仍然很奇怪。

我怎样才能让我的 ScrollView 父母醒来？

# php - 如何不在包含的文件上显示源？

> ID：13461389
> 
> 赞同：-2
> 
> 时间：2012-11-19T20:11:02.180
> 
> 标签：php

我有一个调用一组函数的文件`utils.php`，但是当我包含它时，我的 show_source 函数包含所包含文件的源代码。我尝试将函数文件放在父文件夹中，但甚至调用..

```
include("../includes/utils.php"); 
```

仍然显示文件的来源。如何禁用任何包含文件的源？提前致谢！

编辑：我发现它显示源代码的原因，这是我学校的一些奇怪的 PHP 问题.. 也很抱歉造成混淆，但显示源代码是作业的一个参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:13:19.527

永远不要使用 include() 或 require() 显示文件的来源。如果您的服务器上未正确安装 PHP，您可能会遇到此问题。另一个常见问题是您没有在代码周围放置 PHP 打开和关闭标签。

确保你有你的打开和关闭标签：

```
<?php
//Your code here
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:54:06.097

如果您想`show_source`（无论出于何种原因，在这种情况下是必需的）但忽略包含文件的来源，但如果包含文件链接到...，则您必须显示包含文件的来源。

```
<?php
function test($param) {
    //do something
}

if ($_GET['show_source'] == "true") {
    show_source(__FILE__);
} 
```

并链接到它..

```
<a href='../includes/utils.php?show_source=true'>Show Source of Utils.php</a> 
```

我不确定这是否对每个人都有帮助，但这就是我解决这个问题的方法。

# .htaccess - mod_rewrite 不工作

> ID：13461392
> 
> 赞同：0
> 
> 时间：2012-11-19T20:11:07.387
> 
> 标签：.htaccess, mod-rewrite

我是使用 .htaccess 的新手，我在使用`mod_rewrite`apache 时遇到了麻烦。

所以基本上我有一个网址。 `www.website.com/test/index.php`

我希望它更短`www.website.com/t/index.php`

所以在我的`.htaccess`文件中，我有这三行：

```
RewriteEngine On
RewriteBase /
RewriteRule ^test/(.*) t/$1 [R=301,L] 
```

这非常适合将我引导到 www.website.com/t/index.php 但 index.php 页面不会加载并且只会显示`404 error`. 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:07:36.747

您需要先缩短 URL：

```
RewriteEngine On
RewriteRule ^test/(.*) t/$1 [R=301,L] 
```

...然后确保新的（和不存在的）URL 将得到处理：

```
RewriteRule ^t/(.*) test/$1 [L] 
```

第一次重写是“外部”，因此它显示在客户端浏览器地址栏中，但第二次是“内部”，因此 apache 仅显示来自新 URL 的结果，而不是旧 URL 的结果，而客户端地址栏中没有任何更改.

# java - 使用 Commons Compress 将目录压缩到 tar.gz

> ID：13461393
> 
> 赞同：15
> 
> 时间：2012-11-19T20:11:10.240
> 
> 标签：java, compression, tar, apache-commons, apache-commons-compress

我在使用公共压缩库创建目录的 tar.gz 时遇到问题。我有一个目录结构如下。

```
parent/
    child/
        file1.raw
        fileN.raw 
```

我正在使用以下代码进行压缩。它运行良好，无一例外。但是，当我尝试解压缩该 tar.gz 时，我得到一个名为“childDirToCompress”的文件。它的大小正确，因此文件在焦油处理过程中已清楚地相互附加。所需的输出将是一个目录。我无法弄清楚我做错了什么。任何明智的公共压缩器都可以让我走上正确的道路吗？

```
CreateTarGZ() throws CompressorException, FileNotFoundException, ArchiveException, IOException {
            File f = new File("parent");
            File f2 = new File("parent/childDirToCompress");

            File outFile = new File(f2.getAbsolutePath() + ".tar.gz");
            if(!outFile.exists()){
                outFile.createNewFile();
            }
            FileOutputStream fos = new FileOutputStream(outFile);

            TarArchiveOutputStream taos = new TarArchiveOutputStream(new GZIPOutputStream(new BufferedOutputStream(fos)));
            taos.setBigNumberMode(TarArchiveOutputStream.BIGNUMBER_STAR); 
            taos.setLongFileMode(TarArchiveOutputStream.LONGFILE_GNU);
            addFilesToCompression(taos, f2, ".");
            taos.close();

        }

        private static void addFilesToCompression(TarArchiveOutputStream taos, File file, String dir) throws IOException{
            taos.putArchiveEntry(new TarArchiveEntry(file, dir));

            if (file.isFile()) {
                BufferedInputStream bis = new BufferedInputStream(new FileInputStream(file));
                IOUtils.copy(bis, taos);
                taos.closeArchiveEntry();
                bis.close();
            }

            else if(file.isDirectory()) {
                taos.closeArchiveEntry();
                for (File childFile : file.listFiles()) {
                    addFilesToCompression(taos, childFile, file.getName());

                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-05-07T18:01:16.700

我遵循了这个解决方案，它一直有效，直到我处理一组更大的文件，并且在处理 15000 - 16000 个文件后随机崩溃。以下行正在泄漏文件处理程序：

```
IOUtils.copy(new FileInputStream(f), tOut); 
```

并且代码在操作系统级别因“打开的文件过多”错误而崩溃以下小改动解决了该问题：

```
FileInputStream in = new FileInputStream(f);
IOUtils.copy(in, tOut);
in.close(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-20T15:42:31.683

我还没有弄清楚到底出了什么问题，但是通过搜索谷歌缓存我找到了一个工作示例。对不起风滚草！

```
public void CreateTarGZ()
    throws FileNotFoundException, IOException
{
    try {
        System.out.println(new File(".").getAbsolutePath());
        dirPath = "parent/childDirToCompress/";
        tarGzPath = "archive.tar.gz";
        fOut = new FileOutputStream(new File(tarGzPath));
        bOut = new BufferedOutputStream(fOut);
        gzOut = new GzipCompressorOutputStream(bOut);
        tOut = new TarArchiveOutputStream(gzOut);
        addFileToTarGz(tOut, dirPath, "");
    } finally {
        tOut.finish();
        tOut.close();
        gzOut.close();
        bOut.close();
        fOut.close();
    }
}

private void addFileToTarGz(TarArchiveOutputStream tOut, String path, String base)
    throws IOException
{
    File f = new File(path);
    System.out.println(f.exists());
    String entryName = base + f.getName();
    TarArchiveEntry tarEntry = new TarArchiveEntry(f, entryName);
    tOut.putArchiveEntry(tarEntry);

    if (f.isFile()) {
        IOUtils.copy(new FileInputStream(f), tOut);
        tOut.closeArchiveEntry();
    } else {
        tOut.closeArchiveEntry();
        File[] children = f.listFiles();
        if (children != null) {
            for (File child : children) {
                System.out.println(child.getName());
                addFileToTarGz(tOut, child.getAbsolutePath(), entryName + "/");
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-07-12T15:06:39.367

我最终做了以下事情：

```
public URL createTarGzip() throws IOException {
    Path inputDirectoryPath = ...
    File outputFile = new File("/path/to/filename.tar.gz");

    try (FileOutputStream fileOutputStream = new FileOutputStream(outputFile);
            BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(fileOutputStream);
            GzipCompressorOutputStream gzipOutputStream = new GzipCompressorOutputStream(bufferedOutputStream);
            TarArchiveOutputStream tarArchiveOutputStream = new TarArchiveOutputStream(gzipOutputStream)) {

        tarArchiveOutputStream.setBigNumberMode(TarArchiveOutputStream.BIGNUMBER_POSIX);
        tarArchiveOutputStream.setLongFileMode(TarArchiveOutputStream.LONGFILE_GNU);

        List<File> files = new ArrayList<>(FileUtils.listFiles(
                inputDirectoryPath,
                new RegexFileFilter("^(.*?)"),
                DirectoryFileFilter.DIRECTORY
        ));

        for (int i = 0; i < files.size(); i++) {
            File currentFile = files.get(i);

            String relativeFilePath = new File(inputDirectoryPath.toUri()).toURI().relativize(
                    new File(currentFile.getAbsolutePath()).toURI()).getPath();

            TarArchiveEntry tarEntry = new TarArchiveEntry(currentFile, relativeFilePath);
            tarEntry.setSize(currentFile.length());

            tarArchiveOutputStream.putArchiveEntry(tarEntry);
            tarArchiveOutputStream.write(IOUtils.toByteArray(new FileInputStream(currentFile)));
            tarArchiveOutputStream.closeArchiveEntry();
        }
        tarArchiveOutputStream.close();
        return outputFile.toURI().toURL();
    }
} 
```

这会处理其他解决方案中出现的一些边缘情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-08T10:29:40.707

我不得不对@merrick 解决方案进行一些调整，以使其与路径相关。也许使用最新的 Maven 依赖项。当前接受的解决方案对我不起作用。

```
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import org.apache.commons.compress.archivers.tar.TarArchiveEntry;
import org.apache.commons.compress.archivers.tar.TarArchiveOutputStream;
import org.apache.commons.compress.compressors.gzip.GzipCompressorOutputStream;
import org.apache.commons.io.FileUtils;
import org.apache.commons.io.IOUtils;
import org.apache.commons.io.filefilter.DirectoryFileFilter;
import org.apache.commons.io.filefilter.RegexFileFilter;

public class TAR {

    public static void CreateTarGZ(String inputDirectoryPath, String outputPath) throws IOException {

        File inputFile = new File(inputDirectoryPath);
        File outputFile = new File(outputPath);

        try (FileOutputStream fileOutputStream = new FileOutputStream(outputFile);
                BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(fileOutputStream);
                GzipCompressorOutputStream gzipOutputStream = new GzipCompressorOutputStream(bufferedOutputStream);
                TarArchiveOutputStream tarArchiveOutputStream = new TarArchiveOutputStream(gzipOutputStream)) {

            tarArchiveOutputStream.setBigNumberMode(TarArchiveOutputStream.BIGNUMBER_POSIX);
            tarArchiveOutputStream.setLongFileMode(TarArchiveOutputStream.LONGFILE_GNU);

            List<File> files = new ArrayList<>(FileUtils.listFiles(
                    inputFile,
                    new RegexFileFilter("^(.*?)"),
                    DirectoryFileFilter.DIRECTORY
            ));

            for (int i = 0; i < files.size(); i++) {
                File currentFile = files.get(i);

                String relativeFilePath = inputFile.toURI().relativize(
                        new File(currentFile.getAbsolutePath()).toURI()).getPath();

                TarArchiveEntry tarEntry = new TarArchiveEntry(currentFile, relativeFilePath);
                tarEntry.setSize(currentFile.length());

                tarArchiveOutputStream.putArchiveEntry(tarEntry);
                tarArchiveOutputStream.write(IOUtils.toByteArray(new FileInputStream(currentFile)));
                tarArchiveOutputStream.closeArchiveEntry();
            }
            tarArchiveOutputStream.close();
        }
    }
} 
```

马文

```
 <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>2.6</version>
        </dependency>

        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-compress</artifactId>
            <version>1.18</version>
        </dependency> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-19T16:45:39.080

我使用的东西（通过`Files.walk`API），你可以链接`gzip(tar(youFile));`

```
public static File gzip(File fileToCompress) throws IOException {

    final File gzipFile = new File(fileToCompress.toPath().getParent().toFile(),
            fileToCompress.getName() + ".gz");

    final byte[] buffer = new byte[1024];

    try (FileInputStream in = new FileInputStream(fileToCompress);
            GZIPOutputStream out = new GZIPOutputStream(
                    new FileOutputStream(gzipFile))) {

        int len;
        while ((len = in.read(buffer)) > 0) {
            out.write(buffer, 0, len);
        }
    }

    return gzipFile;
}

public static File tar(File folderToCompress) throws IOException, ArchiveException {

    final File tarFile = Files.createTempFile(null, ".tar").toFile();

    try (TarArchiveOutputStream out = (TarArchiveOutputStream) new ArchiveStreamFactory()
            .createArchiveOutputStream(ArchiveStreamFactory.TAR,
                    new FileOutputStream(tarFile))) {

        out.setLongFileMode(TarArchiveOutputStream.LONGFILE_GNU);

        Files.walk(folderToCompress.toPath()) //
                .forEach(source -> {

                    if (source.toFile().isFile()) {
                        final String relatifSourcePath = StringUtils.substringAfter(
                                source.toString(), folderToCompress.getPath());

                        final TarArchiveEntry entry = new TarArchiveEntry(
                                source.toFile(), relatifSourcePath);

                        try (InputStream in = new FileInputStream(source.toFile())){
                            out.putArchiveEntry(entry);

                            IOUtils.copy(in, out);

                            out.closeArchiveEntry();
                        }
                        catch (IOException e) {
                            // Handle this better than bellow...
                            throw new RuntimeException(e);
                        }
                    }
                });

    }

    return tarFile;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-13T13:28:38.360

检查下面的 Apache`commons-compress`和 File walker 示例。

这个例子`tar.gz`是一个目录。

```
public static void createTarGzipFolder(Path source) throws IOException {

        if (!Files.isDirectory(source)) {
            throw new IOException("Please provide a directory.");
        }

        // get folder name as zip file name
        String tarFileName = source.getFileName().toString() + ".tar.gz";

        try (OutputStream fOut = Files.newOutputStream(Paths.get(tarFileName));
             BufferedOutputStream buffOut = new BufferedOutputStream(fOut);
             GzipCompressorOutputStream gzOut = new GzipCompressorOutputStream(buffOut);
             TarArchiveOutputStream tOut = new TarArchiveOutputStream(gzOut)) {

            Files.walkFileTree(source, new SimpleFileVisitor<>() {

                @Override
                public FileVisitResult visitFile(Path file,
                                            BasicFileAttributes attributes) {

                    // only copy files, no symbolic links
                    if (attributes.isSymbolicLink()) {
                        return FileVisitResult.CONTINUE;
                    }

                    // get filename
                    Path targetFile = source.relativize(file);

                    try {
                        TarArchiveEntry tarEntry = new TarArchiveEntry(
                                file.toFile(), targetFile.toString());

                        tOut.putArchiveEntry(tarEntry);

                        Files.copy(file, tOut);

                        tOut.closeArchiveEntry();

                        System.out.printf("file : %s%n", file);

                    } catch (IOException e) {
                        System.err.printf("Unable to tar.gz : %s%n%s%n", file, e);
                    }

                    return FileVisitResult.CONTINUE;
                }

                @Override
                public FileVisitResult visitFileFailed(Path file, IOException exc) {
                    System.err.printf("Unable to tar.gz : %s%n%s%n", file, exc);
                    return FileVisitResult.CONTINUE;
                }

            });

            tOut.finish();
        }

    } 
```

此示例提取`tar.gz`, 并检查 zip slip 攻击。

```
public static void decompressTarGzipFile(Path source, Path target)
        throws IOException {

        if (Files.notExists(source)) {
            throw new IOException("File doesn't exists!");
        }

        try (InputStream fi = Files.newInputStream(source);
             BufferedInputStream bi = new BufferedInputStream(fi);
             GzipCompressorInputStream gzi = new GzipCompressorInputStream(bi);
             TarArchiveInputStream ti = new TarArchiveInputStream(gzi)) {

            ArchiveEntry entry;
            while ((entry = ti.getNextEntry()) != null) {

                Path newPath = zipSlipProtect(entry, target);

                if (entry.isDirectory()) {
                    Files.createDirectories(newPath);
                } else {

                    // check parent folder again
                    Path parent = newPath.getParent();
                    if (parent != null) {
                        if (Files.notExists(parent)) {
                            Files.createDirectories(parent);
                        }
                    }

                    // copy TarArchiveInputStream to Path newPath
                    Files.copy(ti, newPath, StandardCopyOption.REPLACE_EXISTING);

                }
            }
        }
    }

    private static Path zipSlipProtect(ArchiveEntry entry, Path targetDir)
        throws IOException {

        Path targetDirResolved = targetDir.resolve(entry.getName());

        Path normalizePath = targetDirResolved.normalize();

        if (!normalizePath.startsWith(targetDir)) {
            throw new IOException("Bad entry: " + entry.getName());
        }

        return normalizePath;
    } 
```

参考

1.  [https://mkyong.com/java/how-to-create-tar-gz-in-java/](https://mkyong.com/java/how-to-create-tar-gz-in-java/)
2.  [https://commons.apache.org/proper/commons-compress/examples.html](https://commons.apache.org/proper/commons-compress/examples.html)

# ruby-on-rails - 自定义 URI 验证器不起作用

> ID：13461397
> 
> 赞同：0
> 
> 时间：2012-11-19T20:11:26.740
> 
> 标签：ruby-on-rails, ruby

我第一次尝试使用异常和自定义验证器。当我把它`begin ... end`放到单独的文件中时，它可以工作，但是对于我在 rspec 中的简单测试它没有。

这是我的模型的 url 验证：

```
 validates_each :url do |record,attr,value|
    begin
      !!URI.parse(value)
    rescue URI::InvalidURIError
      record.errors.add(attr, 'invalid url format')
    end
  end 
```

rspec（我在这里有效，应该是无效的）：

```
describe Entry do
  before do
    @entry = Entry.new(title: "Post Title", url: "http://google.com", content: "lorem ipsum")
  end

  subject {@entry}
  it {should be_valid}

  (other tests)

  describe "when url has wrong format" do
    it "should be invalid" do
      invalid_urls = %w[^net.pl p://yahoo.com]
      invalid_urls.each do |url|
        @entry.url = url
        @entry.should_not be_valid
      end
    end
  end

end 
```

我把它放在单独的文件 apps/validators/uri_format_validator.rb

```
class UriFormatValidator < ActiveModel::EachValidator
  def validate_each(record,attribute,value)
    URI.parse(value)
  rescue URI::InvalidURIError
    record.errors[attribute] << "is not an URL format"
  end
end 
```

但它仍然不起作用，这很有趣，因为我用单独的文件尝试过它，它工作正常输出错误的网址为 FALSE：

```
require 'uri'

begin
  URI.parse("http://onet!!t.pl")
rescue URI::InvalidURIError
  puts "FALSE"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:18:47.393

我相信自定义验证器必须子类化`ActiveModel::EachValidator`，有一个`validate_each`方法，例如

```
class AllGoodValidator < ActiveModel::EachValidator
  def validate_each(object, attribute, value)
    if <some-test-that-fails-the-validation>
      object.errors[attribute] << (options[:message] || "is not all good")
    end
  end
end 
```

然后可以将其与其他常规验证一起用于您的模型中，例如

```
 validates :something, :presence => true, :all_good => true 
```

# python - 在字符串列表中查找重复模式

> ID：13461398
> 
> 赞同：0
> 
> 时间：2012-11-19T20:11:32.307
> 
> 标签：python, regex, string

我正在寻找一种从最长重复模式中清除字符串的方法。

我有一个大约 1000 个网页标题的列表，它们都有一个共同的后缀，即网站名称。

他们遵循这种模式：

```
['art gallery - museum and visits | expand knowledge',
 'lasergame - entertainment | expand knowledge',
 'coffee shop - confort and food | expand knowledge',
 ...
] 
```

我怎样才能自动从它们的公共后缀中删除所有字符串`" | expand knowledge"` ？

谢谢！

**编辑：**对不起，我没有让自己足够清楚。我事先没有关于`" | expand knowledge"`后缀的信息。我希望能够清除潜在公共后缀的字符串列表，即使我不知道它是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:28:35.483

这是[`os.path.commonprefix`](http://docs.python.org/2/library/os.path.html#os.path.commonprefix)在反转标题上使用该功能的解决方案：

```
titles = ['art gallery - museum and visits | expand knowledge',
 'lasergame - entertainment | expand knowledge',
 'coffee shop - confort and food | expand knowledge',
]

# Find the longest common suffix by reversing the strings and using a 
# library function to find the common "prefix".
common_suffix = os.path.commonprefix([title[::-1] for title in titles])[::-1]

# Strips all titles from the number of characters in the common suffix.
stripped_titles = [title[:-len(common_suffix)] for title in titles] 
```

结果：

> ['艺术画廊 - 博物馆和参观'，'激光游戏 - 娱乐'，'咖啡店 - 舒适和食物']

因为它自己找到共同的后缀，所以它应该适用于任何标题组，即使您不知道后缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:27:03.540

如果您确实知道要删除的后缀，则可以简单地执行以下操作：

```
suffix = " | expand knowledge"

your_list = ['art gallery - museum and visits | expand knowledge',
 'lasergame - entertainment | expand knowledge',
 'coffee shop - confort and food | expand knowledge',
...]

new_list = [name.rstrip(suffix) for name in your_list] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:25:22.263

如果您确定所有字符串都有共同的后缀，那么这将起到作用：

```
strings = [
  'art gallery - museum and visits | expand knowledge',
  'lasergame - entertainment | expand knowledge']
suffixlen = len(" | expand knowledge")
print [s[:-suffixlen] for s in strings] 
```

输出：

```
['art gallery - museum and visits', 'lasergame - entertainment'] 
```

# python - 在字符串中使用变量

> ID：13461399
> 
> 赞同：-2
> 
> 时间：2012-11-19T20:11:36.080
> 
> 标签：python, variables

> **可能重复：**
> [如何在 python 中使用 eval 分配变量的值？](https://stackoverflow.com/questions/5599283/how-can-i-assign-the-value-of-a-variable-using-eval-in-python)

我想使用python为字符串内部的变量赋值

所以假设

```
y = 'x  = 5' 
eval(y) # does not work 
```

我想要一些评估这个表达式的东西，以便`x = 5`在 python 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:14:06.930

请尝试`exec`：

```
In [8]: y = 'x  = 5'

In [9]: exec(y)

In [10]: x
Out[10]: 5 
```

但是，与 一样`eval`，我想这里存在安全问题（例如，请参阅[这篇文章](http://lucumr.pocoo.org/2011/2/1/exec-in-python/)），因此您可能希望尽可能从不同的角度进行处理。至于为什么`eval`不起作用，那是因为它正在评估字符串，就好像它是一个 Python 表达式一样。因此，当您说 时`x = 5`，没有返回结果。`exec`另一方面将执行该语句，在这种情况下，它将`x = 5`在您的程序中设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:15:32.120

您可以为此使用该`exec`语句：

```
exec y 
```

（在 Python 3 中，它是一个函数，而不是语句。）

但是，您可能不应该这样做。如果您使用用户输入文本执行此操作，则会存在安全风险。它还可以做您可能没想到的事情，具体取决于您执行代码的范围。有关更多信息，请参阅[文档](http://docs.python.org/2.7/reference/simple_stmts.html#the-exec-statement)。通常有比使用`exec`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:15:46.780

您正在寻找[`exec`](http://docs.python.org/3.1/library/functions.html#exec).

```
y = 'x  = 5' 
exec(y)
print x 
```

# xcode - OpenCV 未解析的符号 - 名称修改不匹配 - xcode

> ID：13461400
> 
> 赞同：3
> 
> 时间：2012-11-19T20:11:36.833
> 
> 标签：xcode, opencv, name-mangling

我在运行 Lion 的 Macbook 上本地构建了 i386 风格的 OpenCV，方法是使用

```
cmake -G "Unix Makefiles" -D CMAKE_OSX_ARCHITECTURES=i386 -D CMAKE_C_FLAGS=-m32 -D CMAKE_CXX_FLAGS=-m32 ..
make -j8
sudo make install 
```

库构建和发布良好，我已将它们添加到我的 xcode 项目中。但是，在构建我的测试应用程序时存在链接错误，它们似乎是名称修改问题。

`Undefined symbols for architecture i386: "cv::namedWindow(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int)", referenced from: _main in main.o "cv::imread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int)", referenced from: _main in main.o "cv::imshow(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, cv::_InputArray const&)", referenced from: _main in main.o`

以 cv::imread 为例，从 libopencv_highgui.dylib 导出，名称为：

```
00007510 (__TEXT,__text) external __ZN2cv6imreadERKSsi 
```

而 main.o 正在引用符号

```
U __ZN2cv6imreadERKNSt3__112basic_stringIcNS0_11char_traitsIcEENS0_9allocatorIcEEEEi 
```

另一方面，`__ZN2cv7waitKeyEi`来自同一个 dylib 链接的函数很好。

测试应用程序和框架都适用于 i386 arch。

任何想法可能导致此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:00:28.080

我有同样的问题。我认为问题可能在于，如果您使用[MacPorts](https://www.macports.org/)编译 OpenCV 库，它们可能是由 GCC 根据[它的 Portfile 构建的](https://trac.macports.org/browser/trunk/dports/graphics/opencv/Portfile)。我将 XCode（Apple LLVM 4.1）中使用的编译器切换到 LLVM GCC 4.2，现在它可以工作了。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T03:14:35.210

我刚刚遇到了同样的问题，并通过使用 libstdc++ 作为 C++ 标准库来修复它。它默认为 libc++

在项目构建设置 -> APPLE LLVM 编译器 4.2 - 语言 -> C++ 标准库下

# objective-c - 子视图上超过 1 个图像未加载

> ID：13461402
> 
> 赞同：1
> 
> 时间：2012-11-19T20:11:44.237
> 
> 标签：objective-c

我正在尝试在 ScrollView 上添加图像。我在 plist 文件中有 x 和 y 点，它们由枚举调用。

```
enum {
    kLogoImage = 1,
    kNewLogoImage,
};

@implementation

- (void) _setupStaticViews
{
    UIButton *image = [UIButton buttonWithType:UIButtonTypeCustom];
    [image setBackgroundImage:[UIImage imageNamed:@"logo.png"] forState:UIControlStateNormal];
    [image addTarget:self action:@selector(_addContactButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
    image.frame = CGRectMake(0.0 ,0.0, 150.0, 150.0);
    image.tag = kLogoImage;
    [_mapImageView addSubview:image];
    _staticViews = @[image]; 

    UIButton *image2 = [UIButton buttonWithType:UIButtonTypeCustom];
    [image2 setBackgroundImage:[UIImage imageNamed:@"Time Bakground.png"] forState:UIControlStateNormal];
    [image2 addTarget:self action:@selector(_addContactButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
    image2.frame = CGRectMake(0.0 ,0.0, 250.0, 150.0);
    image2.tag = kNewLogoImage;
    [_mapImageView addSubview:image2];
    _staticViews = @[image2];

    for ( UIView *view in _staticViews ) {
        CGPoint point = [self _basePositionForView:view];
        CGRect frame = view.frame;
        frame.origin = point;
        view.frame = frame;

    }
} 
```

如果我只有图像显示，它工作正常。但是我需要添加多个，并且添加第二个会导致第一个位于 xy 点 0,0，并且 Image2 不可见。我将如何添加另一个图像？

* * *

```
- (CGPoint) _basePositionForView:(UIView *)view {
    NSString *key = [NSString stringWithFormat:@"%d", view.tag];
    NSString *stringValue = [_coordinates objectForKey:key];
    NSArray *values = [stringValue componentsSeparatedByString:@":"];

    if ( [values count] < 2 ) return CGPointZero;

    CGPoint result = CGPointMake([[values objectAtIndex:0] floatValue], [[values objectAtIndex:1] floatValue]);
    return result;
} 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:15:51.337

我注意到你首先制作

```
_staticViews = @[image]; 
```

然后

```
_staticViews = @[image2]; 
```

难道你不想拥有

```
_staticViews = @[image, image2]; 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:36:58.807

您应该在框架中相应地迭代和更改 x ：

```
for ( int iterator=0; iterator< [[_staticViews subviews] count]; iterator++){
...     
current_image.frame = CGRectMake(YOUR_IMG_WIDTH * iterator ,0.0, YOUR_IMG_WIDTH, 150.0);
...} 
```

# compiler-construction - 有没有办法用编译器在 AMD OpenCL 内核中展开循环？

> ID：13461403
> 
> 赞同：6
> 
> 时间：2012-11-19T20:11:45.583
> 
> 标签：compiler-construction, opencl, pragma, loop-unrolling, amd-processor

我正在尝试评估 AMD 和 Nvidia GPU 的 OpenCL 之间的性能差异。我有一个执行矩阵向量乘法的内核。我现在在两个不同的系统上运行内核，我的笔记本电脑有一个带有 Ubuntu 12.04 和 CUDA 4.0（包含 OpenCL 库和头文件）的 NVidia GT525m，另一个是带有 AMD Radeon HD7970 的台式机，再次带有 Ubuntu 12.04 和最新的 Catalyst 驱动程序。

在内核中，我有两条`#pragma unroll`语句为 Nvidia OpenCL 实现（~6x）产生了很大的加速。但是 AMD OpenCL 版本不会产生任何加速。使用 AMD APP 内核分析器查看内核会出现未使用展开的错误，因为行程计数未知。所以我的问题是，是否`#pragma unroll`可以与 AMD OpenCL 一起使用，或者是否有替代方案（也许是我不知道的编译器标志）。我在下面包含了内核

```
__kernel void mvKernel(__global float* a, const __global float* x, __global float* y, int m, int n)
{
    float sum = 0.0f;
    __global float* A;
    int i;
    int j = 0;
    int indx = get_global_id(0);
    __local float xs[12000];
#pragma unroll 
    for(i = get_local_id(0); i < n; i+= get_local_size(0)) {
        xs[i] = x[i];
    } 
    barrier(CLK_LOCAL_MEM_FENCE);
    A = &a[indx];
#pragma unroll 256
    for(i = 0; i < n; i++) {
        sum += xs[i] * A[j];
        j += m;
    }
    y[indx] = sum;
} 
```

这个相同的内核在两种实现中都产生了正确的结果，但是 #pragma unroll 命令对 AMD 没有任何作用（通过将它们注释掉来检查）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T20:19:43.240

它没有记录，但它实际上应该与`#pragma unroll`. 您可以检查编译器日志以查看是否应用了展开？我不确定内核分析器是否使用与 OpenCL 运行时相同的编译器，您可能需要检查一下。

否则，如果您知道它`n`以 256 个块为单位，您可以手动展开，方法是在 256 个元素的块上循环一个循环，另一个循环在内部，固定大小为 256，这可能更容易展开。这肯定会解决行程计数静态未知的问题。

但是，请记住，展开循环通常并不是什么大的胜利，因为您没有很多寄存器来缓存您的计算。循环展开增加的套准压力可能会导致套准溢出，这甚至更慢。您应该检查内核在 AMD 卡上的实际运行速度。较新的 NVIDIA OpenCL 编译器也可能不会再从 unroll pragma 中受益。

# sql - 计算重复的三元组

> ID：13461404
> 
> 赞同：2
> 
> 时间：2012-11-19T20:11:46.077
> 
> 标签：sql, sqlite

我有一个存储了数百万个三元组的 SQL 数据库。大部分三元组至少重复一次。计算数据库中每个三元组出现的次数的最实用方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:14:28.323

假设“三元组”由三列`c1`、`c2`和组成`c3`，您可以使用`group by`来计算不同的元组：

```
 select c1, c2, c3, count(1)
    from mytable
group by c1, c2, c3 
```

演示：[http ://www.sqlfiddle.com/#!7/693c4/2](http://www.sqlfiddle.com/#!7/693c4/2)

# java - System.out.println() 打破了我的 if 语句

> ID：13461413
> 
> 赞同：-3
> 
> 时间：2012-11-19T20:12:38.313
> 
> 标签：java, game-engine

我正在制作游戏点，如果你画点，将它们连接起来制作盒子。我有它，所以一旦你点击，这条线就会跟随你的鼠标。当您单击另一个点时，它会将其放在那里。当您在 if 语句中添加 println 代码时，该行不再跟随鼠标。

我有以下代码：

```
public void run() {
    gp.initialize();
    while(isRunning) {
        if(gp.isLineDrag()) {
            previousTimeMil = System.nanoTime();
            update();
            draw();
            currentTimeMil = System.nanoTime();

        }
    }
} 
```

更新：对不起，这里是例子

这行不通，

```
public void run() {
    gp.initialize();
    while(isRunning) {
        if(gp.isLineDrag()) {
            System.out.println("Hi");
            previousTimeMil = System.nanoTime();
            update();
            draw();
            currentTimeMil = System.nanoTime();

        }
    }
} 
```

这将起作用

```
public void run() {
    gp.initialize();
    while(isRunning) {
        System.out.println("I work now!");
        if(gp.isLineDrag()) {
            System.out.println("Hi");
            previousTimeMil = System.nanoTime();
            update();
            draw();
            currentTimeMil = System.nanoTime();

        }
    }
} 
```

感谢您的所有帮助，希望下次我可以提出适当的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:29:24.860

这是一个经常绊倒人们的问题。`System.out`您正在从 Eclipse 或捕获到文本区域的类似 IDE 运行程序。文本区域的这种捕获和更新**非常慢**，并且完全掩盖了您的性能，使您的实时图形例程无法产生所需的时间敏感行为。因此，要么从命令行运行，要么从 Eclipse 开始写入文件。

# php - 下载php总是损坏

> ID：13461417
> 
> 赞同：-1
> 
> 时间：2012-11-19T20:12:59.370
> 
> 标签：php

我有一个用 PHP 编写的下载脚本。我的视图文件脚本链接到 ID，然后选择与 ID 匹配的所有数据。

然后使用该数据下载照片。我的照片在文件夹中是否重要？它被移动到一个文件夹，然后该目录被上传到 MYSQL 数据库。

目前的代码现在允许一些文件完美下载，然后大部分文件被损坏。有什么理由吗？

```
 Mysql table info...
    $cool = $_GET['id'];

  $sql = "SELECT id, type, name, size FROM upload WHERE id='$cool'";

   $result = mysql_query($sql, $db);
   $data = mysql_result($result, 0, "id");
   $name = mysql_result($result, 0, "name");
   $size = mysql_result($result, 0, "size");
   $type = mysql_result($result, 0, "type");

   header("Content-type: $type");
   header("Content-length: $size");
   header("Content-Disposition: attachment; filename=$name");
   header("Content-Description: PHP Generated Data");
   header('Content-Transfer-Encoding: binary');
   header('Expires: 0');
   header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
   header('Pragma: public');
   ob_clean();
   flush();
   readfile($name);
   exit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:16:52.577

`exit();`发生这种情况是因为 PHP 在您回显数据后发送了一些信息，对此的解决方案是在您回显数据后立即停止处理，为此添加`echo $data`.

# wordpress - 用于自定义分类元素的 Wordpress 存档页面

> ID：13461423
> 
> 赞同：0
> 
> 时间：2012-11-19T20:13:12.687
> 
> 标签：wordpress, custom-post-type, custom-taxonomy

我有一个自定义帖子类型`clientgallery`和自定义分类法`client`。

要获取所有画廊，我可以输入 website.com/clientgallery。

但我只想显示特定客户的画廊，例如：website.com/clientgallery/miller

所以，`miller`应该像一个 get 参数。

我已经知道如何通过客户端获取画廊，但我不知道如何让参数部分正常工作。

```
$args = array(
  'numberposts'     => -1, //limit the number of posts, set 0 if no limit required.
  'orderby'         => 'post_date', //order by post_date field.
  'order'           => 'DESC', //order by descending oder.
  'post_type'       => 'clientgallery', //the post type is custom post type 'News & Events'
  'post_status'     => 'publish', //post status is 'publish'
  'tax_query' => array(
    array(
      'taxonomy' => 'client', //custom taxonomy slug
      'field' => 'slug', //select taxonomy term by slug
      'terms' => $_GET['client'] //taxonomy term is called 'home-page'
    )
)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:20:44.633

称之为taxonomy-client.php：在此处查看有关WordPress模板层次结构的所有信息：http: [//codex.wordpress.org/images/1/18/Template_Hierarchy.png](http://codex.wordpress.org/images/1/18/Template_Hierarchy.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:51:20.983

如果您的分类客户仅与 clientgallery 帖子类型相关联，那么 website.com/client/miller 应该足以显示该客户的客户画廊列表。我在我的网站上测试过，它有效。还是我有什么问题？

# sql - 与 Hive SQL 合并

> ID：13461424
> 
> 赞同：33
> 
> 时间：2012-11-19T20:13:16.747
> 
> 标签：sql, hive

由于 Hive 不支持`IFNULL`、`ISNULL`或`NVL`函数，因此我无法将 NULL 转换为 0。我尝试过`COALESCE(*column name*, 0)`但收到以下错误消息：

> 参数类型不匹配 0：COALESCE 之后的表达式都应该具有相同的类型：预期为“bigint”，但找到了“int”

如何解决这个问题？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-14T12:16:38.923

Hive[从 0.8 版本开始支持 bigint 文字](https://issues.apache.org/jira/browse/HIVE-2509)。所以，额外的“L”就足够了：

```
COALESCE(column, 0L) 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-19T20:34:54.673

正如 Lamak 在评论中指出的那样，`COALESCE(column, CAST(0 AS BIGINT))`解决了错误。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-21T07:09:12.030

由于[0.11 hive](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF)有 NVL 功能 `nvl(T value, T default_value)`

它说 *如果值为空则返回默认值否则返回值*

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-21T23:32:25.353

来自 [Hive 语言手册][1]：

> 合并 (T v1, T v2, ...)

将返回第一个不为 NULL 的值，如果所有值都为 NULL，则返回 NULL

[https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-ConditionalFunctions](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-ConditionalFunctions)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-07-10T16:47:52.040

如果客户的主要联系媒介是电子邮件，如果电子邮件为空则为电话号码，如果电话号码也为空则为地址。它将使用 COALESCE 编写为

```
coalesce(email,phonenumber,address) 
```

而在 hive 中也可以通过将 nvl 链接在一起来实现

```
nvl(email,nvl(phonenumber,nvl(address,'n/a'))) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-08-23T03:43:29.397

来自[Hive 的 Language DDL & UDF](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF)

```
NVL(value, default value) 
```

如果 value 为 null，则返回默认值，否则返回 value

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-11-02T17:49:00.003

```
nvl(value,defaultvalue) as Columnname 
```

将缺失值设置为指定的默认值

# javascript - 应用于 DOM 的 AJAX 响应中的内联脚本元素 - 它们是否在子窗口上下文中执行？

> ID：13461426
> 
> 赞同：0
> 
> 时间：2012-11-19T20:13:20.990
> 
> 标签：javascript, jquery, html, dom

我正在处理一个错误，其中有一个请求，然后返回一个更新的视图，其中包含一个内联脚本块来更新一些视图。我收到了一个奇怪的参考错误，$ 没有被定义。在对 chrome 进行一些调查后，我发现在出现引用错误的那一刻似乎存在的上下文中，没有定义 $ ，但是定义了 window.parent.$ *。*

发现方法：我基本上让 Chrome 在未处理的错误上中断，这自然将我带到了一个调用的调用堆栈，这只是一个匿名函数。通常控制台似乎使用与断点一致的上下文，但在这种情况下，我必须使用监视窗口来查看已定义的内容和未定义的内容。我在所有 Firefox、Chrome 和 IE 中都观察到了这种行为

该请求是 AJAX 请求这一事实可能无关紧要。当 HTML 附加到已经存在的 DOM 并且它具有内联脚本标签时 - 这些内联脚本标签是否在它们自己的子窗口上下文中执行，类似于 iframe？

我们通过 jQuery 注入返回的响应，我假设它可能正在处理执行。jQuery 可以创建一个新的子窗口上下文吗？

**在 IFrame 之外的哪些情况下使用子窗口上下文？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:28:12.640

这个问题实际上最终成为了一个 IFrame。有人在使用内部使用 IFrame 的“ajaxSubmit”扩展的回调中使用回调。我关于不使用 IFrame 的假设是不正确的。

# java - Java 如何处理 UTF-16 中不可编码的字符？

> ID：13461429
> 
> 赞同：1
> 
> 时间：2012-11-19T20:13:30.087
> 
> 标签：java, unicode, character-encoding

由于 Java 在内部以 UTF-16 保存字符，如果您需要以某种编码输出，其中包括根本不是 unicode 的字符，该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:16:43.903

基本上，Java 只能处理 Unicode 中存在的字符。BMP 之外的文本（即高于 U+FFFF）被编码为代理对（因为每个`char`都是 UTF-16 代码单元）...但是如果您想要根本不在 Unicode 中的字符，您就得靠自己了- 你可能会找到一些保留供私人使用的 Unicode 区域，并将字符映射到那里......但你可能会以各种奇怪的方式获得“乐趣”。

你*肯定*需要处理不是 Unicode 的字符吗？我以为这些天几乎涵盖了所有内容...

# javascript - 如何在 pageinit 之后初始化弹出窗口？

> ID：13461432
> 
> 赞同：1
> 
> 时间：2012-11-19T20:13:40.860
> 
> 标签：javascript, jquery, jquery-mobile

问题：我有非常长的文本字段，我正在截断它们并将全文放入一个 jQuery Mobile 弹出窗口中，当单击“[更多]”链接时将出现该弹出窗口。但是，在用弹出标记替换文本后，我找不到合适的钩子来初始化弹出窗口。我将它绑定到`pageinit`，但是当我单击时，什么也没有发生。根本不绑定替换代码会给我这样的消息：“在尚未初始化的弹出窗口上调用的函数”，所以我知道一些初始化是必要的 - 但如果不是在`pageinit`，我不知道它需要多早的堆栈被称为。

JSFiddle： http: [//jsfiddle.net/KSFyn/1/](http://jsfiddle.net/KSFyn/1/) - 注意：因为 JSFiddle 的内置 jQuery Mobile 是 1.1.1，所以 pageinit 没有按预期执行，但这让您了解我的内容我试图完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:16:01.743

这样的事情有用吗？

*   [http://jsfiddle.net/RyNFc/1/](http://jsfiddle.net/RyNFc/1/)

更新：需要重新创建jQM标记，因为您在创建页面后动态添加弹出文本（使用JQM中的'create'事件〜beh）

*   [http://jsfiddle.net/RyNFc/4/](http://jsfiddle.net/RyNFc/4/)

HTML

```
<div data-role="page" class="type-home">
    <div data-role="content">
        <a href="#popupInfo" data-rel="popup" data-role="button" data-inline="true">This is an exceptionally long span ...</a>
        <div data-role="popup" id="popupInfo" class="ui-content" data-theme="e" style="max-width:350px;">
          <p>This is an exceptionally long span that I will attempt to break up with JS and present the full text as a popup.  This is an exceptionally long span that I will attempt to break up with JS and present the full text as a popup.</p>
        </div>
    </div>
</div>
​ 
```

# ruby-on-rails - 提交表单后，我想留在同一页面并显示：通知消息

> ID：13461434
> 
> 赞同：3
> 
> 时间：2012-11-19T20:13:48.153
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我所有的代码都运行良好，我想在用户提交带有您的订单的表单后呈现相同的页面：new。问题在于提交后我想`Pedido enviado com sucesso.`在页面中显示的 :notice 消息，但它不起作用。我的验证错误消息显示得很好，但我不知道为什么我的成功消息没有。

有小费吗？

（对不起我的代码缩进）

我`pedidos_controller`的失败：

```
class PedidosController < ApplicationController

  def new
    @pedido = Pedido.new
    1.times do
      pessoa = @pedido.build_pessoa
      produto = @pedido.produtos.build
  end

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @pedido }
  end
end

def create
  @pedido = Pedido.new(params[:pedido])
  respond_to do |format|
    if @pedido.save
      PedidosMailer.delay.registro_do_pedido(@pedido)
      PedidosMailer.delay.email_para_cotar_produtos(@pedido)
      format.html { redirect_to action: "new", notice: 'Pedido enviado com sucesso.' }
      format.json { render json: @pedido, status: :created, location: @pedido }
    else
      format.html { render action: "new" }
      format.json { render json: @pedido.errors, status: :unprocessable_entity }
    end
  end
end
end 
```

我的`new.html.erb`看法：

```
<p id="notice"><%= notice %></p>
<%= render 'form' %> 
```

我的`_form.html.erb`看法：

```
<%= form_for(@pedido, :html => { :class => "form-contato"}) do |f| %>
<% if @pedido.errors.any? %>
  <div id="error_explanation">
    <h2>Ocorreram <%= pluralize(@pedido.errors.count, "erro") %></h2>

  <ul>
  <% @pedido.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
</div>
<% end %>

<div class="row">
  <div class="span4">
    <h1>Dados pessoais</h1>
    <%= f.fields_for :pessoa do |builder| %>
      <%= render 'pessoa_fields', f: builder %>
    <% end %>
  </div>

<div class="span8">
  <h1>Ítens</h1>

  <%= f.fields_for :produtos do |builder| %>
    <%= render 'produto_fields', f: builder %>
  <% end %>
</div>
<div class="span10">
  <%= link_to_add_fields "Adicionar mais produtos", f, :produtos %>
</div>
  <%= button_tag "Enviar", class: "btn btn-red span10", name: "commit" %>
</div>
<% end %> 
```

我的`_pessoa_fields.html.erb`看法：

```
<fieldset>
<%= f.text_field :nome, class: "span4", placeholder: "Nome" %>
<br />
<%= f.text_field :telefone, class: "span4", placeholder: "Telefone" %>
<br />
<%= f.text_field :email, class: "span4", placeholder: "Email" %>
</fieldset> 
```

我的`_produto_fields.html.erb`看法：

```
<% @lista_de_produtos = ["Qualibom standard", "Qualibom premium", "Bomdemais standard", "Bomdemais premium"] %>
<fieldset class="campos-produtos span10">
<div class="span3">
    <%= f.select :nome, options_for_select(@lista_de_produtos, :selected => f.object.nome), :prompt => 'Selecione um produto' %>
</div>
<div class="span3">
    <%= f.text_field :quantidade, class: "span3", placeholder: "Quantidade" %>
</div>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:16:17.600

您需要在您的视图中使用`flash[:notice]`，而不是`notice`：

```
<% if flash[:notice] %>
  <p id="notice"><%= flash[:notice] %></p>
<% end %> 
```

当您通过`notice:`参数传递消息时`redirect_to`，它会被放入`flash`数组中，这是一个特殊的伪会话，它会为单个请求持续存在：

来自[ActionController::Redirecting 文档](http://api.rubyonrails.org/classes/ActionController/Redirecting.html)：

> 作为重定向的一部分，也可以分配一个闪存消息。常用的 flash 名称 alert 和 notice 以及一个通用的 flash bucket 有两个特殊的访问器。

# java - 在 java 中使用 volatile 布尔标志从 hashmap 中的另一个线程停止线程

> ID：13461436
> 
> 赞同：0
> 
> 时间：2012-11-19T20:14:00.820
> 
> 标签：java, multithreading

所以我有我的 MainThread 类负责所有其他线程。（创建、停止、监视）

```
 public class MainThread implements Runnable {
      public static volatile boolean keepRunning = true;  

      public void run(){

      //some code..

      while(keepRunning){

      //here i am creating threads for my Wired class (explaining below) 
      //that are stored in a hashmap

      Wired wiredInterface = new Wired(s,defaultSleepTime,c,max,percent);
      Thread t1 = new Thread(wiredInterface);
      t1.start();
      } 
```

在我的代码中，有一种情况我需要停止线程 t1。

我的有线课堂：

```
 public class Wired implements Runnable {
        private static volatile boolean keepRunning = true;

        public void run(){

        while(keepRunning){

        //code

        try{
            Thread.sleep(((k - i + 1)*defaultTime) - DT);  //just to show that this thread sleeps periodically. doesnt affect the question
        }catch(InterruptedException e){e.printStackTrace();}  

        }
        } 
```

在我的有线课程中，我有这种方法来更改 volatile 标志。

```
 public static void stopRunning(){
            keepRunning = false;
        } 
```

我的问题是..如何从我的 MainThread 访问方法 stopRunning 以获得我想要停止的特定线程？Thread.interrupt() 作为解决方案对我不起作用。

我看过很多关于这个主题的类似问题，但我还没有找到适合我的情况的东西。抱歉，如果我遗漏了什么此代码是对我的实际代码的过度简化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:23:02.063

不要在这里重新发明轮子。使用 Thread.interrupt()，并正确检查 Thread.isInterrupted() 标志，和/或正确处理 InterruptedException。IE 不要吞下它或 printStackTrace() 它并继续。如果您收到一个 InterruptedException，请在 Runanble.run() 方法的边界捕获它并停止您的外部循环并关闭线程。

您的方法应更改为：

```
public void run() {
   try {
      while( !Thread.currentThread().isInterrupted() ) {
          doSomeThreadedThing();
      }
   } catch( InterruptedException e ) {
      // maybe log some info you are shutting down
   }
} 
```

只要线程没有卡在某些 IO 中，正确关闭线程真的很简单。如果您不想等待长时间运行的任务，请定期检查逻辑中的 Thread.isInterrupted()。与使用 Thread.interrupted() 相比，您的 volatile 布尔标志机制没有提供任何优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:18:48.817

您应该让 keepRunning 成为一个实例变量（属性）而不是静态的。

每当您想停止线程时，从 Map 中获取它并使用 setKeepRunning(false) 将属性 keepRunning 设置为 false。

# javascript - 两个 .js 文件的 GetScriptDescriptors() 方法：奇怪的意外行为

> ID：13461437
> 
> 赞同：6
> 
> 时间：2012-11-19T20:14:03.010
> 
> 标签：javascript, asp.net, custom-server-controls

我的自定义服务器端 ajax 控件实现 IScriptControl ：

*   获取脚本参考
*   获取脚本描述符

第一种方法发送 javascript 文件，第二种方法基于一些较早发送的 .js 文件创建 javascript 对象。

在我的“AssembleyInfo”文件中，我添加了以下行并将属性资源管理器中的 .js 文件标记为“嵌入式资源”：

```
 // this allows access to this files
    [assembly: WebResource("ProjectName.file1.js", "text/javascript")]

    [assembly: WebResource("ProjectName.file2.js", "text/javascript")] 
```

这是 IScriptControl 的实现：

```
 public IEnumerable<ScriptReference>  
                GetScriptReferences()
            {
                yield return new ScriptReference("ProjectName.file1.js", this.GetType().Assembly.FullName);
                yield return new ScriptReference("ProjectName.file2.js", this.GetType().Assembly.FullName);
            }

            public IEnumerable<ScriptDescriptor>
                GetScriptDescriptors()
             {

                ScriptControlDescriptor descriptor = new ScriptControlDescriptor("ProjectName.file1", this.ClientID);
                //adding properties and events (I use "AnotherName" on the safe side to avoid potentional namespace problems           
                ScriptControlDescriptor descriptor2 = new ScriptControlDescriptor  ("AnotherName.file2", this.ClientID);
                //adding properties and events   

                yield return descriptor;
                yield return descriptor2;

            } 
```

这是我的 .js 文件的一部分：

*   第一个文件

    ```
    Type.registerNamespace("ProjectName");

    ProjectName.file1 = function (element) {
    .......
    .......
    }
    ProjectName.file1.registerClass('ProjectName.file1', Sys.UI.Control);

    if (typeof (Sys) !== 'undefined')
        Sys.Application.notifyScriptLoaded(); 
    ```

*   第二个文件

    ```
    Type.registerNamespace("AnotherName");

    AnotherName.file2 = function (element) {
    ............
    ............
    }
    AnotherName.file2.registerClass('AnotherName.file2', Sys.UI.Control);

    if (typeof (Sys) !== 'undefined')
        Sys.Application.notifyScriptLoaded(); 
    ```

**为什么只创建第一个对象？**

```
 yield return descriptor 
```

**我的 ASPX 有必须创建第二个的 JAVASCRIPT。**

**如果我在上面发表评论，则第二次创建正常。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T15:13:30.410

您不能为同一个 DOM 元素注册多个控件定义 - 您将收到脚本错误：

> Sys.InvalidOperationException：控件已与元素关联。

您需要将一个或两个脚本类更改为继承`Sys.UI.Behavior`而不是`Sys.UI.Control`：

```
YourType.registerClass("YourType", Sys.UI.Control); 
```

变成：

```
YourType.registerClass("YourType", Sys.UI.Behavior); 
```

您还需要将相关内容替换`ScriptControlDescriptor`为`ScriptBehaviorDescriptor`：

```
new ScriptControlDescriptor("YourType", ClientID); 
```

变成：

```
new ScriptBehaviorDescriptor("YourType", ClientID); 
```

查看 MSDN 上的扩展器控制演练，了解有关创建脚本行为的信息：http: [//msdn.microsoft.com/en-us/library/bb386403%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/bb386403%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:51:09.473

似乎您的问题源于您使用两次退货这一事实

```
yield return descriptor;
yield return descriptor2; 
```

第一个返回然后结束，你不能有一个有两个返回的函数。尝试创建 IEnumerable 集合，将描述符放入其中，然后返回整个内容。

```
List<ScriptDescriptor> descList = new List<ScriptDescriptor>();
descList.add(descriptor);
descList.add(descriptor2);
return descList; 
```

# php - 计算 90,000 多个文件的 MD5 并存储到数据库

> ID：13461447
> 
> 赞同：1
> 
> 时间：2012-11-19T20:14:37.233
> 
> 标签：php, multithreading, md5

我正在编写一个脚本来下载我的所有图像，计算 MD5 哈希，然后将该哈希存储在数据库的新列中。我有一个脚本，可以从数据库中选择图像并将它们保存在本地。图像的唯一 ID 成为文件名。

我的问题是，虽然[cURLQueue](https://github.com/mattcolf/php-curl-queue)非常适合快速下载许多文件，但在回调中计算每个文件的 MD5 哈希会减慢下载速度。那是我的第一次尝试。对于我的下一次尝试，我想将我的代码的下载和散列部分分开。做这个的最好方式是什么？我更喜欢使用 PHP，因为这是我最熟悉的，也是我们的服务器运行的，但是 PHP 的线程支持至少可以说是缺乏的。

想法是有一个建立 SQLite 连接的父进程，然后产生许多选择图像的子进程，计算它的哈希值，将其存储在数据库中，然后删除图像。我走在正确的道路上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:23:26.757

有很多方法可以解决这个问题，但是您选择哪种方法实际上取决于您的项目的具体情况。

一种简单的方法是使用一个 PHP 下载图像，然后将它们放在文件系统上，并在队列数据库中添加一个条目。然后第二个 PHP 程序将读取队列，并处理那些等待。

对于第二个 PHP 程序，您可以设置一个 cron 作业来定期检查并处理所有等待的内容。第二种方法是每次下载完成时在后台生成 PHP 程序。第二种方法更优化，但涉及更多一点。查看下面的帖子，了解如何在后台运行 PHP 脚本。

[有没有办法在不等待命令完成的情况下使用 shell_exec ？](https://stackoverflow.com/questions/1019867/is-there-a-way-to-use-shell-exec-without-waiting-for-the-command-to-complete)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:35:42.403

我在工作中遇到过类似的问题，但它需要像[rabbitmq](http://www.rabbitmq.com/)这样的 amqp 服务器。

想象一下有 3 个 php 脚本：

*   首先：将 url 添加到队列中
*   第二：从队列中获取url，下载文件并将下载的文件名加入队列
*   第三：获取文件名到队列并将md5设置到数据库中

我们使用这种方式使用 python 脚本处理多个图像下载/处理（php 不是那么远）。

[您可以在](http://www.rabbitmq.com/getstarted.html)[这里](http://www.rabbitmq.com/devtools.html#php-dev)查看一些 php 库和一些基本示例。

通过这种方式，我们可以根据每个队列长度扩展每个工作人员。因此，如果您要下载大量 url，您只需启动另一个脚本 #2，如果您有很多未处理的文件，您只需启动一个新脚本 #3，依此类推。

# uml - 如何在组件图中表示由多个文件组成的组件？

> ID：13461448
> 
> 赞同：1
> 
> 时间：2012-11-19T20:14:38.650
> 
> 标签：uml, diagram, artifacts, component-diagram

由于单个组件可以由多个工件表现出来，我想知道一个组件的多个工件在组件图中是如何表示的。或者换句话说，如果我有一个由多个文件组成的组件，其中实现了整个组件的代码，我如何绘制组件图以明确组成它的不同文件？

我可以使用类似于包的符号，您可以将包符号和包包含的对象放在其中吗？我的意思是，某种可点击的组件符号，我双击它会打开并显示包含的文件？

我使用 Enterprise Architect，因此使用它的示例会更有帮助。

问候！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:35:39.827

在 Enterprise Architect 中，转到组件的属性（双击图中的组件框）并转到文件。这是在 Enterprise Architect 中放置文件列表的地方。

尽管如此，仍然可以通过将单个文件表示为单独组件的方式对其进行建模，因此“主”组件是可点击的，因此可以导航到另一个图表，但是当模型变大并且包含许多文件时不会达到目的，它会变得太复杂。

如果出于某种原因，需要在图表上清楚地标出文件列表，带有文字说明的注释就足够了。

请注意，模型（即组件图）主要用于显示构建系统的部分，与设计相反，文件列表特定于实现。

# jquery - jqtouch手机转

> ID：13461455
> 
> 赞同：0
> 
> 时间：2012-11-19T20:15:02.433
> 
> 标签：jquery, jqtouch

我正在尝试在我的设备上收听转弯事件

```
$('body').bind('turn', function(event, info){
alert(info.orientation);
console.log(info.orientation); // landscape or profile
}); 
```

此事件仅在开始时触发一次。我如何让它继续听？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:20:12.777

包含 jquery 移动框架后：

```
 $(window).bind( 'orientationchange', function(e){
   alert(jQuery.event.special.orientationchange.orientation()); 
 }); 
```

# jquery - 鼠标悬停/移出时淡入淡出

> ID：13461457
> 
> 赞同：0
> 
> 时间：2012-11-19T20:15:06.053
> 
> 标签：jquery

例如，我有“div1”和“div2”。并且“div2”隐藏在“div2”后面，我想在 div2 上淡入淡出 de div1...
我该怎么做？
我看了这么多帖子，都没有给我任何结果...

```
<div id="news1">
    <table width="100%" height="145" border="0" cellpadding="0" cellspacing="0" class="newsBox">
        <tr>
            <td align="center">
                <table width="230" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        <td width="89" align="center" valign="top" class="shadow"><img src="images/news_03.jpg" width="89" height="89" /></td>
                        <td align="left" valign="top" class="espacoEsquerda">Duis felis magna, viverra ac dignissim at, mollis vitae felis.  Praesent eleifend dictum quam tempor lobortis.</td>
                    </tr>
                    <tr>
                        <td height="41" align="left" valign="bottom"><img src="images/news_10.jpg" width="35" height="35" /></td>
                        <td align="right" valign="bottom" class="readmore">read more »</td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div>

<div id="news1Over">
    <table width="100%" height="145" border="0" cellpadding="0" cellspacing="0" class="newsBoxOver">
        <tr>
            <td align="center">
                <table width="230" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                        <td width="89" align="center" valign="top" class="shadow"><img src="images/news_03.jpg" width="89" height="89" /></td>
                        <td align="left" valign="top" class="espacoEsquerda">Duis felis magna, viverra ac dignissim at, mollis vitae felis.  Praesent eleifend dictum quam tempor lobortis.</td>
                    </tr>
                    <tr>
                        <td height="41" align="left" valign="bottom"><img src="images/news_11.jpg" width="35" height="35" /></td>
                        <td align="right" valign="bottom" class="readmoreOver">read more »</td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:34:33.707

我创建了一个 jsFiddle 供您使用。我使用 mouseevents 来触发淡入淡出。不知道这是否是您想要的，但它证明了这个概念。

它做你需要的吗？

[http://jsfiddle.net/2yERV/6/](http://jsfiddle.net/2yERV/6/)

```
$(function() {
    $('#wrap').mouseenter(function() {
        $('#news1Over').fadeOut('slow', function() {
            // Animation complete.
        });
        $('#news1').fadeIn('slow', function() {
            // Animation complete.
        });
    })
    .mouseleave(function() {
        $('#news1Over').fadeIn('slow', function() {
            // Animation complete.
        });
        $('#news1').fadeOut('slow', function() {
            // Animation complete.
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:01:39.160

通过适当的 CSS 定位，以及一些 jQuery 的[**.animation**](http://api.jquery.com/animate/)的使用，这将非常容易。我制作了一个 jsFiddle 来展示使用 HTML 是多么容易，但是我做了 2 处细微的更改。我将“div1”和“div2”包装在“包装器 div”中，给出 3 个“类名”中的每一个并相应地定位它们：包装器已定位`relative`，因此没有内部元素“浮动”，div1 是正常位置（默认为在 div 标签上是静态的），而 div2 是绝对定位的，因此它位于 div 1 上。然后我将 div 2 的不透明度设置为 0，并将其 z-index 也设置为 0，同时将 div1 保留为正常的 z- index 为 1。z-index 只有在您希望某些项目可点击时才是真正的问题，否则，您可以一起忽略它（将在没有 z-indexing 的情况下通过第二个 jsFiddle）。[](http://api.jquery.com/hover/)**确定鼠标在包装元素上的位置，并[**.stop**](http://api.jquery.com/stop/)与[**.animate**](http://api.jquery.com/animate/)组合以“淡入/淡出”两个内部 div。**

 **[**在此处**](http://jsfiddle.net/SpYk3/P7WSW/)查看完整示例[](http://jsfiddle.net/SpYk3/P7WSW/)

 **没有`z-indexing` [***这里***](http://jsfiddle.net/SpYk3/P7WSW/16/)

> HTML 的细微变化

```
<div id="news1wrapper" class="fade-wrapper">
    <div id="news1" class="fade-content">
        ...
    </div>
    <div id="news1Over" class="fade-cover">
        ...
    </div>
</div> 
```

> 简单的 CSS

```
.fade-wrapper {
    position: relative;
}
.fade-content {
    background: #FFF;
}
.fade-cover {
    background: #FFA;
    opacity: 0;
    position: absolute;
    top: 0;
    width: 100%;
} 
```

> 一点点'o jQuery

```
$(".fade-wrapper").hover(function(e) {
    $(this).children(".fade-content").stop().animate({ opacity: 0 }, 1500);
    $(this).children(".fade-cover").stop().animate({ opacity: 1 }, 1500);
},
function(e) {
    $(this).children(".fade-cover").stop().animate({ opacity: 0 }, 1500);
    $(this).children(".fade-content").stop().animate({ opacity: 1 }, 1500);
}); 
```****

# c# - 反向传播神经网络为不同的输入生成相同的输出

> ID：13461458
> 
> 赞同：0
> 
> 时间：2012-11-19T20:15:07.700
> 
> 标签：c#

我用反向传播神经网络碰了壁，我不知道可能是什么问题，请帮忙。

在这个示例运行中，我使用了 3 层 ann。

第一层有 10 个输入神经元 第二层有 7 个隐藏神经元 第三层有 2 个输出神经元

我对隐藏神经元使用 sigmoid 激活函数，对输出神经元使用超正切（即 tanh）激活函数。

在这个测试中，我使用了 0.1 的学习率和 0.01 的动量常数（我也尝试了其他不同的组合，并且输出仍然存在相同的问题）。

如下图所示，训练算法在 n 次迭代后停止，但误差仍然很高。

我正在使用下面的数据集进行训练，训练后我也使用它来测试网络。

我通过将所有十个输入映射到 0 和 1 之间的值来训练网络。只需将每个输入除以 5000，如果结果大于 1，我将其设置为 1。对于输出，我将它们映射到 - 1 和 1，除以 100。

如您所见，不同输入的输出相同。

有谁知道可能是什么问题？

非常欢迎您的意见。

谢谢

****** *** *****样本输出****** ** *** ** *******

 **T1 为 0，ANN 输出为 0.0904967273528686 T2 为 -0.01，ANN 输出为 -0.399660970430866

T1 为 0，ANN 输出为 0.0904967273528686 T2 为 -0.14，ANN 输出为 -0.399660970430866

T1 为 0，ANN 输出为 0.0904967273528686 T2 为 -0.14，ANN 输出为 -0.399660970430866

T1 为 0，ANN 输出为 0.0904967273528686 T2 为 -0.14，ANN 输出为 -0.399660970430866

T1 为 0，ANN 输出为 0.0904967273528686 T2 为 -0.24，ANN 输出为 -0.399660970430866

T1 为 0，ANN 输出为 0.0904967273528686 T2 为 -0.32，ANN 输出为 -0.399660970430866

T1 为 0.04，ANN 输出为 0.0904967273528686 T2 为 -0.32，ANN 输出为 -0.399660970430866

T1 为 0.04，ANN 输出为 0.0904967273528686 T2 为 -0.32，ANN 输出为 -0.399660970430866

T1 为 0.16，ANN 输出为 0.0904967273528686 T2 为 -0.32，ANN 输出为 -0.399660970430866

T1 为 0.18，ANN 输出为 0.0904967273528686 T2 为 -0.32，ANN 输出为 -0.399660970430866

T1 为 0.18，ANN 输出为 0.0904967273528686 T2 为 -0.35，ANN 输出为 -0.399660970430866

T1 为 0.18，ANN 输出为 0.0904967273528686 T2 为 -0.35，ANN 输出为 -0.399660970430866

********样本训练数据****** ** *** *****和训练后的测试数据 1768,1946,2442,4305,7542,6584,2324,1487,1099,975,0,-1 1767,1946,2444,4309,7551,6575,2318,1483,1100,976, 0,-14 1764,1942,2441,4212,7555,6565,2311,1480,1097,972,0,-14 1764,1942,2441,4212,7555,6565,2311,1480,1097,972,0, -14 1762,1944,2445,4339,7571,6500,2302,1478,1095,970,0,-24 1762,1944,2445,4339,7571,6500,2302,1478,1095,970,0,-32 1762,1948,2460,4404,7628,6408,2266,1482,1100,973,4,-32 1762,1948,2460,4404,7628,6408,2266,1482,1100,973,4,-32 1742, 1909,2381,4186,7375,6882,2432,1533,1163,999,16,-32 1727,1879,2316,4142,7139,7201,2589,1563,1207,1015,18,-32 1712,1859, 2288,4232,7051,7275,2658,1570,1236,1038,18,-35 1712,1859,2288,4232,7051,7275,2658,1570,1236,1038,18,-35 1693,1829,2240, 4146,6892,7485,2784,1592,1267,1086,18,-37 1693,1829,2240,4146,6892,7485,2784,1592,1267,1086,16,-40 1669,1802,2199,4229, 6766,7528,2966,1624,1282,1126,16,-40 1669,1802,2199,4229,6766,7528,2966,1624,1282,1126,16,-40 1669,1802,2199,4229,6766,7528,2966,1624,1282,1126,16, -40 1648,1772,2153,4301,6602,7608,3244,1681,1289,1160,14,-40 1648,1772,2153,4301,6602,7608,3244,1681,1289,1160,4,-40 1648,1772,2153,4301,6602,7608,3244,1681,1289,1160,4,-40 1640,1790,2217,4722,7082,7233,2860,1612,1249,1159,4,-40 1632, 1788,2227,5122,7214,7055,2698,1603,1249,1140,4,-40 1632,1788,2227,5122,7214,7055,2698,1603,1249,1140,4,-40 1621,1782, 3170,4590,7293,4816,2829,1608,1257,1118,4,-40 1621,1782,3170,4590,7293,4816,2829,1608,1257,1118,4,-40 1616,1780,4302, 3004,6751,6844,2860,1606,1262,1121,4,-40 1616,1780,4302,3004,6751,6844,2860,1606,1262,1121,4,-40 1616,1780,4302,3004, 6751,6844,2860,1606,1262,1121,4,-40 1592,1025,5023,3609,7446,6739,2852,1602,1265,1125,4,-40 1592,1025,5023,3609,7446, 6739,2852,1602,1265,1125,4,-40 1592,1025,5023,3609,7446,6739,2852,1602,1265,1125,4,-40 1604,1779,5664,3645,7522,6605,2863,1595,1264,1124,4,-40 1601,1945,6094, 3701,7592,6487,2918,1590,1262,1127,7,-40 1587,3426,5418,3561,7437,6662,3140,1626,1288,1142,7,-40 1587,3426,5418,3561, 7437,6662,3140,1626,1288,1142,7,-40 1581,5498,4155,3570,7458,6616,3251,1632,1296,1153,7,-40 1581,5498,4155,3570,7458, 6616,3251,1632,1296,1153,7,-40 1581,5498,4155,3570,7458,6616,3251,1632,1296,1153,7,-40 1581,5498,4155,3570,7458,6616, 3251,1632,1296,1153,7,-40 1581,5498,4155,3570,7458,6616,3251,1632,1296,1153,7,-40 2795,7097,2235,3606,7513,6514,3412, 1634,1305,1165,7,-40 2795,7097,2235,3606,7513,6514,3412,1634,1305,1165,7,-40 4374,5780,2240,3635,7554,6458,3337,2228, 1306,1169,7,-40 4374,5780,2240,3635,7554,6458,3337,2228,1306,1169,7,-40 4374,5780,2240,3635,7554,6458,3337,2228,1306, 1169,7,-40 6657,2127,2247,3679,7613,6373,3085,3845,1307,1173,7,-40 5794,1755,2249,3691,7632,6333,2983,5134,1300,1175,9,-40 4045,1735,2208,3576,7510,6527,2932, 4549,3576,1188,9,-40 4045,1735,2208,3576,7510,6527,2932,4549,3576,1188,9,-40 4045,1735,2208,3576,7510,6527,2932,4549, 3576,1188,9,-40 4045,1735,2208,3576,7510,6527,2932,4549,3576,1188,9,-40 1543,1725,2194,3556,7501,6556,2787,2384,8183, 1484,9,-40 1534,1718,2183,3534,7483,6590,2713,2255,6696,3743,9,-40 1529,1709,2171,3508,7461,6636,2673,2143,5150,5561, 9,-40 1525,1705,2162,3492,7446,6673,2659,2042,3743,7173,9,-40 1525,1705,2162,3492,7446,6673,2659,2042,3743,7173,9, -40 1524,1704,2160,3487,7443,6677,2660,2023,3561,7348,9,-40 1521,1701,2155,3478,7434,6702,2662,1919,1940,8149,9,-40 1521,1701,2155,3478,7434,6702,2662,1919,1940,8149,9,-40 1521,1701,2155,3478,7434,6702,2662,1919,1940,8149,9,-40 1521, 1701,2155,3478,7434,6702,2662,1919,1940,8149,9,-40 1521,1701,2155,3478,7434,6702,2662,1919,1940,8149,9,-40 1508,1677,2122,3425,7400,6764,2702,1741,1585,1947,9, -40 1508,1677,2122,3425,7400,6764,2702,1741,1585,1947,9,-40 1505,1672,2119,3415,7401,6772,2709,1756,1476,1659,9,-40 1505,1672,2119,3415,7401,6772,2709,1756,1476,1659,9,-40 1505,1672,2119,3415,7401,6772,2709,1756,1476,1659,9,-40 1505, 1672,2119,3415,7401,6772,2709,1756,1476,1659,9,-40 1483,1652,2093,3370,7356,6817,2789,1723,1409,130​​8,9,-40 1477,1648, 2085,3357,7348,6837,2830,1704,1418,1267,9,-40 1476,1642,2076,3337,7323,6866,2873,1705,1416,1276,9,-40 1476,1642,2076, 3337,7323,6866,2873,1705,1416,1276,9,-40 1476,1642,2076,3337,7323,6866,2873,1705,1416,1276,9,-40 1472,1638,2073,3336, 7329,6862,2888,1730,1395,1282,9,-40 1461,1626,2057,3314,7311,6879,2900,1759,1369,1285,9,-40 1461,1626,2056,3314,7310, 6880,2902,1764,1370,1284,9,-40 1458,1621,2052,3304,7311,6891,2915,1792,1382,1262,9,-40 1453,1616,2043,3292,7302,6908,2929,1821,1386,1250,9,-40 1444,1609,2034, 3275,7285,6931,2952,1846,1416,1259,9,-40 1443,1610,2036,3278,7287,6924,2947,1847,1418,1261,9,-40 1440,1606,2031,3277, 7297,6916,2944,1846,1435,1263,9,-40 1432,1597,2017,3248,7265,6954,2971,1858,1469,1272,9,-40 1432,1597,2017,3248,7265, 6954,2971,1858,1469,1272,9,-40 1431,1591,2013,3247,7265,6948,2974,1863,1476,1298,9,-40 1431,1591,2013,3247,7265,6948, 2974,1863,1476,1298,9,-40 1428,1587,2008,3240,7263,6947,2982,1870,1483,1326,7,-61272,9,-40 1432,1597,2017,3248,7265,6954,2971,1858,1469,1272,9,-40 1431,1591,2013,3247,7265,6948,2974,1863,1476,1298, 9,-40 1431,1591,2013,3247,7265,6948,2974,1863,1476,1298,9,-40 1428,1587,2008,3240,7263,6947,2982,1870,1483,1326,7, -61272,9,-40 1432,1597,2017,3248,7265,6954,2971,1858,1469,1272,9,-40 1431,1591,2013,3247,7265,6948,2974,1863,1476,1298, 9,-40 1431,1591,2013,3247,7265,6948,2974,1863,1476,1298,9,-40 1428,1587,2008,3240,7263,6947,2982,1870,1483,1326,7, -6**

 *** * *

至于谨慎，我认为训练数据可能有太多类似的输出，所以我手动更改了一些输出以使其更真实；并且输出相同的问题仍然存在。

这是我修改后的训练数据集，

1768,1946,2442,4305,7542,6584,2324,1487,1099,975,-1,-6 1767,1946,2444,4309,7551,6575,2318,1483,1100,976,0,-44 1764 ,1942,2441,4212,7555,6565,2311,1480,1097,972,1,-54 1764,1942,2441,4212,7555,6565,2311,1480,1097,972,3,-44 1762,1944 ,2445,4339,7571,6500,2302,1478,1095,970,3,-24 1762,1944,2445,4339,7571,6500,2302,1478,1095,970,-2,-32 1762,1948, 2460,4404,7628,6408,2266,1482,1100,973,4,-32 1762,1948,2460,4404,7628,6408,2266,1482,1100,973,4,-32 1742,1909,2381, 4186,7375,6882,2432,1533,1163,999,16,-32 1727,1879,2316,4142,7139,7201,2589,1563,1207,1015,18,-32 1712,1859,2288,4232, 7051,7275,2658,1570,1236,1038,22,-35 1712,1859,2288,4232,7051,7275,2658,1570,1236,1038,20,-35 1693,1829,2240,4146,6892, 7485,2784,1592,1267,1086,30,-37 1693,1829,2240,4146,6892,7485,2784,1592,1267,1086,15,-40 1669,1802,2199,4229,6766,7528, 2966,1624,1282,1126,16,-60 1669,1802,2199,4229,6766,7528,2966,1624,1282,1126,17,-50 1669,1802,2199,4229,6766,7528,2966,1624,1282,1126,18,-30 1648,1772,2153,4301,6602, 7608,3244,1681,1289,1160,19,-10 1648,1772,2153,4301,6602,7608,3244,1681,1289,1160,3,-80 1648,1772,2153,4301,6602,7608, 3244,1681,1289,1160,-3,-90 1640,1790,2217,4722,7082,7233,2860,1612,1249,1159,2,-70 1632,1788,2227,5122,7214,7055,2698 ,1603,1249,1140,-2,-40 1632,1788,2227,5122,7214,7055,2698,1603,1249,1140,4,-40 1621,1782,3170,4590,7293,4816,2829, 1608,1257,1118,-4,-20 1621,1782,3170,4590,7293,4816,2829,1608,1257,1118,6,-40 1616,1780,4302,3004,6751,6844,2860,1606 ,1262,1121,-6,-10 1616,1780,4302,3004,6751,6844,2860,1606,1262,1121,5,-40 1616,1780,4302,3004,6751,6844,2860,1606, 1262,1121,-5,-50 1592,1025,5023,3609,7446,6739,2852,1602,1265,1125,2,-40 1592,1025,5023,3609,7446,6739,2852,1602,1265 ,1125,-2,-60 1592,1025,5023,3609,7446,6739,2852,1602,1265,1125,1,-70 1604,1779,5664,3645,7522,6605,2863,1595,1264,1124,-1,-80 1601,1945,6094,3701,7592,6487,2918 ,1590,1262,1127,5,-40 1587,3426,5418,3561,7437,6662,3140,1626,1288,1142,6,-40 1587,3426,5418,3561,7437,6662,3140,1626 ,1288,1142,7,-60 1581,5498,4155,3570,7458,6616,3251,1632,1296,1153,8,-40 1581,5498,4155,3570,7458,6616,3251,1632,1296 ,1153,4,-60 1581,5498,4155,3570,7458,6616,3251,1632,1296,1153,3,-40 1581,5498,4155,3570,7458,6616,3251,1632,1296,1153 ,2,-60 1581,5498,4155,3570,7458,6616,3251,1632,1296,1153,1,-40 2795,7097,2235,3606,7513,6514,3412,1634,1305,1165,2 ,-50 2795,7097,2235,3606,7513,6514,3412,1634,1305,1165,3,-40 4374,5780,2240,3635,7554,6458,3337,2228,1306,1169,4,- 80 4374,5780,2240,3635,7554,6458,3337,2228,1306,1169,5,-40 4374,5780,2240,3635,7554,6458,3337,2228,1306,1169,6,-90 6657 ,2127,2247,3679,7613,6373,3085,3845,1307,1173,-7,-40 5794,1755,2249,3691,7632,6333,2983,5134,1300,1175,-6,-90 4045,1735,2208,3576,7510,6527,2932,4549,3576, 1188,-5,-40 4045,1735,2208,3576,7510,6527,2932,4549,3576,1188,-4,-70 4045,1735,2208,3576,7510,6527,2932,4549,3576, 1188,-3,-40 4045,1735,2208,3576,7510,6527,2932,4549,3576,1188,-2,-30 1543,1725,2194,3556,7501,6556,2787,2384,8183, 1484,-1,-30 1534,1718,2183,3534,7483,6590,2713,2255,6696,3743,0,-40 1529,1709,2171,3508,7461,6636,2673,2143,5150,5561 ,1,-40 1525,1705,2162,3492,7446,6673,2659,2042,3743,7173,2,-50 1525,1705,2162,3492,7446,6673,2659,2042,3743,7173,3 ,-40 1524,1704,2160,3487,7443,6677,2660,2023,3561,7348,4,-50 1521,1701,2155,3478,7434,6702,2662,1919,1940,8149,5,- 40 1521,1701,2155,3478,7434,6702,2662,1919,1940,8149,6,-50 1521,1701,2155,3478,7434,6702,2662,1919,1940,8149,7,-40 1521 ,1701,2155,3478,7434,6702,2662,1919,1940,8149,8,-40 1521,1701,2155,3478,7434,6702,2662,1919,1940,8149,9,-60 1508,1677,2122,3425,7400,6764,2702,1741,1585,1947,8,-40 1508,1677,2122,3425,7400,6764,2702,1741,1585,1947,7,-70 1505,1672,2119,3415,7401,6772,2709,1756,1476,1659,6,-40 1505, 1672,2119,3415,7401,6772,2709,1756,1476,1659,5,-80 1505,1672,2119,3415,7401,6772,2709,1756,1476,1659,4,-40 1505,1672, 2119,3415,7401,6772,2709,1756,1476,1659,3,-70 1483,1652,2093,3370,7356,6817,2789,1723,1409,130​​8,2,-40 1477,1648,2085, 3357,7348,6837,2830,1704,1418,1267,1,-70 1476,1642,2076,3337,7323,6866,2873,1705,1416,1276,0,-40 1476,1642,2076,3337, 7323,6866,2873,1705,1416,1276,-1,-50 1476,1642,2076,3337,7323,6866,2873,1705,1416,1276,-2,-40 1472,1638,2073,3336, 7329,6862,2888,1730,1395,1282,-3,-90 1461,1626,2057,3314,7311,6879,2900,1759,1369,1285,-4,-40 1461,1626,2056,3314, 7310,6880,2902,1764,1370,1284,-5,-90 1458,1621,2052,3304,7311,6891,2915,1792,1382,1262,-6,-40 1453,1616,2043,3292,7302,6908,2929,1821,1386,1250,-7,-90 1444,1609, 2034,3275,7285,6931,2952,1846,1416,1259,-8,-40 1443,1610,2036,3278,7287,6924,2947,1847,1418,1261,-9,-70 1440,1606, 2031,3277,7297,6916,2944,1846,1435,1263,-8,-40 1432,1597,2017,3248,7265,6954,2971,1858,1469,1272,-7,-80 1432,1597, 2017,3248,7265,6954,2971,1858,1469,1272,-6,-40 1431,1591,2013,3247,7265,6948,2974,1863,1476,1298,-5,-50 1431,1591, 2013,3247,7265,6948,2974,1863,1476,1298,-4,-40 1428,1587,2008,3240,7263,6947,2982,1870,1483,1326,-3,-606954,2971,1858,1469,1272,-7,-80 1432,1597,2017,3248,7265,6954,2971,1858,1469,1272,-6,-40 1431,1591,2013,3247,7265, 6948,2974,1863,1476,1298,-5,-50 1431,1591,2013,3247,7265,6948,2974,1863,1476,1298,-4,-40 1428,1587,2008,3240,7263, 6947,2982,1870,1483,1326,-3,-606954,2971,1858,1469,1272,-7,-80 1432,1597,2017,3248,7265,6954,2971,1858,1469,1272,-6,-40 1431,1591,2013,3247,7265, 6948,2974,1863,1476,1298,-5,-50 1431,1591,2013,3247,7265,6948,2974,1863,1476,1298,-4,-40 1428,1587,2008,3240,7263, 6947,2982,1870,1483,1326,-3,-60

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:43:39.003

如果您正确划分输入并且错误没有下降，则可能是算法问题。反向传播有时会卡住，您可以尝试弹性传播，它可以更好地扩展自身并且可以避免卡住。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:22:49.457

您应该尝试添加更多的第 2 层隐藏神经元。

您还应该解释您的训练算法，最好使用示例输入和输出。

> 对于输出，我将它们映射到 -1 和 1，除以 100。

你除以 100 是多少？为什么输出范围使用 -1 到 1 而不是 0 到 1？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:24:32.780

我认为更多的第 2 层隐藏神经元并没有改变结果。恕我直言，添加另一个隐藏层也有 7 个神经元。****

# jquery - 移除被点击的元素、它的父元素和父元素的前一个元素

> ID：13461462
> 
> 赞同：2
> 
> 时间：2012-11-19T20:15:30.847
> 
> 标签：jquery

单击元素后，我试图删除下面的所有元素`p`。你能给我任何指示我哪里出错了吗？

```
<h2>Heading</h2>
<a href="#">
    <p>Click me to delete everything</p>
</a>

$('p').click(function() {
    $(this).remove().parent().remove().prev().remove();
}); 
```

这是一个[jsfiddle](http://jsfiddle.net/BcAa9/1/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:17:47.350

```
$(this).parent().prev().andSelf().remove(); 
```

[**小提琴**](http://jsfiddle.net/BcAa9/3/)

[`andSelf`文档](http://api.jquery.com/andSelf/)

`.addBack()`是`andSelf`也可以使用的别名。唯一的区别是`addBack`它只在 jQuery 1.8+`andSelf`中可用，而从 1.2 版开始可用。

[`parent()`](http://api.jquery.com/parent/)并且[`prev()`](http://api.jquery.com/prev/)是不言自明的，[`andSelf()`](http://api.jquery.com/andSelf/)也就是`addBack`简单地将前一组匹配元素添加到当前组，也就是说，它将`.parent().prev()`（父元素的上一个元素）与先前执行`.parent()`的（父元素）组合并一次性删除它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:17:56.693

删除 之后`<p>`，它确实*从 DOM*中删除了。因此它不再有父母，并且`.parent()`不会工作。相反，首先选择所有元素，*然后*删除，例如[http://jsfiddle.net/BcAa9/4/](http://jsfiddle.net/BcAa9/4/)。

```
$('p').click(function() {
    $(this).parent().prev().addBack().remove();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T20:18:10.127

```
<div>
<h2>Heading</h2>
<a href="#">
    <p>Click me to delete everything</p>
</a>
</div>
​
$('p').click(function() {
    $(this).parent().parent().remove();
});
​ 
```

[小提琴](http://jsfiddle.net/BcAa9/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T20:18:16.377

我建议（假设您要删除的前一个兄弟姐妹`a`：

```
$(this).closest('a').prev().andSelf().remove(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/mDBxU/)。

如果您可以将元素包装在容器中，则变得更容易：

```
<div class="container">
    <h2>Heading</h2>
    <a href="#">
        <p>Click me to delete everything</p>
    </a>
</div>

$('p').click(
    function() {
        $(this).closest('.container').remove();
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/mDBxU/1/)。

参考：

*   [`andSelf()`](http://api.jquery.com/andSelf/).
*   [`closest()`](http://api.jquery.com/closest/).
*   [`prev()`](http://api.jquery.com/prev/).
*   [`remove()`](http://api.jquery.com/remove/).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T20:18:45.040

您可能希望将所有内容包装在 div 或 span 标记中，然后使用 jquery 的最接近（）函数（[http://api.jquery.com/closest/](http://api.jquery.com/closest/)）查找该父元素并将其删除。这将使您的 javascript 代码更简洁。

# javascript - 使用 YQL 以尽可能低的资源使用率（即最少的查询数）执行图像抓取

> ID：13461474
> 
> 赞同：2
> 
> 时间：2012-11-19T20:16:12.203
> 
> 标签：javascript, xpath, web-scraping, yql, e4x

我正在尝试执行一些图像抓取工具，该工具使用户能够使用 xpath 处理给定页面中包含的所有图像，以查找哪些具有 alt 标签，哪些没有，并将结果作为两个单独的 json 对象返回

即*{alted:["<img ......>","<img ......>"],nonAlted:["<img ......>","<img .. ....>"]}*

现在我的问题来了，虽然我能够抓取页面并检索所有图像并将它们分成 alted 和 nonAlted 类别，但我不能将它们放在响应对象中！

我认为为了进一步澄清我的问题，最好添加一些代码，因此以下代码是我在 YQL 表的执行块中使用的代码：

```
query = "select * from html where url='http://www.example.com/page-path' and xpath='//li'";
var result = y.query(query);

y.log(result.results..img.(@alt));

var querieselement = <urls/>; 
querieselement.query = result.results..img.(@alt);

response.object = querieselement; 
```

所以我的问题是如何设置响应对象以包含已处理的图像列表，请注意，运行查询后，尽管日志显示列表，但结果未显示任何数据，希望有人能指出原因那个问题。

* * *

**PS**我在标题中提到“资源使用”的原因是因为我知道能够为每个图像类别执行单独的调用，这意味着两次抓取同一页面，我认为这有点低效。

* * *

**PS**如果有人可以帮助我理解这两行的含义，我也会很高兴

```
querieselement = <urls/>;
querieselement.query = result.results..img.(@alt); 
```

为什么是“ *<urls/>* ”和为什么是“ *querieselement.query* ”，我不知道他们应该做什么，而他们似乎在做关键工作，因为更改它们会破坏代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T21:03:31.640

> 所以我的问题是如何设置响应对象以包含已处理的图像列表

使用样式表而不是 XPath 选择器：

```
 select * from xslt where url="http://www.mysite.com/page-path" and stylesheet="http://www.mysite.com/page-path.xsl" 
```

像这样定义样式表：

```
 <xsl:template match="img[@alt]">
    <xsl:for-each select="@alt">
      <script>
        alt.push(<xsl:value-of select="."/>);
      </script>
    </xsl:for-each>
  </xsl:template>

  <xsl:template match="img[not(@alt)]">
    <xsl:for-each select="@src">
      <script>
        noalt.push(<xsl:value-of select="."/>);
      </script>
    </xsl:for-each>
  </xsl:template> 
```

# php - 将 PHP 查询转换为 PDO 查询

> ID：13461479
> 
> 赞同：1
> 
> 时间：2012-11-19T20:16:42.780
> 
> 标签：php, pdo

我有一些从 jquery 接收变量并查询数据库的 php。我最近了解到我需要使用 PDO 来防止 SQL 注入等，所以我一直在尝试将我的查询转换为它。无论如何，我是 php 的新手，所以这比我想象的要困难（尽管我阅读的所有文章看起来都很简单）......数据库连接正在工作并且`'name'`正在接收正确的值，但它没有更新像以前一样的页面。我猜这与我的包含`json_encode`. 下面是我的旧 php，然后我尝试将其转换为 PDO 格式。

旧 PHP：

```
$dbstylename = $_POST['name'];
$result = mysql_query("SELECT * FROM style where stylename like '$dbstylename'");
$array = mysql_fetch_row($result);

echo json_encode($array);

mysql_close($con);
?> 
```

新的 PDO 尝试：

```
<?php

include 'db.php';

try {
    $dbConnection = new PDO('mysql:host=$dbhost;dbname=$dbhost;', $user, $pass);
    $dbConnection->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $dbConnection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    #Prepare the query
    $dbstylename = $_POST['name'];
    $result = $dbConnection->prepare('SELECT * FROM style where stylename like :dbstylename');
    #bind
    $result->bindParam(':dbstylename', $dbstylename, PDO::PARAM_STR);
    #execute
    if ($result->execute(array($dbstylename))) {
        while ($row = $result->fetch()) {
            json_encode($row);
        }
    }
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
}
?> 
```

================更新==============================

除了@MadaraUchiha 很好的答案和后续帮助之外，我还必须从这里更改我的 jQuery（在 PDO 之前工作）：

```
$.ajax({
    url: '../test.php',
    type: 'POST',
    data: {'name' : target},
    dataType: 'json',
    success: function(data) {
        var styleid = data[0];
        var stylename = data[1];
        var stylecss = data[2];
        $('#codeTest').html("<b>id: </b><br />"+styleid+"<br /><b> stylename: </b><br />"+stylename+"<br /><b> stylecss: </b><br />"+stylecss);
    }
}); 
```

对此：

```
$.ajax({
    url: '../test.php',
    type: 'POST',
    data: {'name' : target},
    dataType: 'json',
    success: function(data) {
        var styleid = data.styleid;
        var stylename = data.stylename;
        var stylecss = data.stylecss;
        $('#codeTest').html("<b>id: </b><br />"+styleid+"<br /><b> stylename: </b><br />"+stylename+"<br /><b> stylecss: </b><br />"+stylecss);
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:21:03.427

让我从这个开始，很高兴你正在努力从旧的 ext/mysql 改进到 PDO。做得好！

好吧，首先，您不需要检查错误！由于您已设置`PDO::ATTR_ERRMODE`为`PDO::ERRMODE_EXCEPTION`，因此如果出现错误，将引发异常！所以你的if语句

```
if ($result->execute(array($dbstylename))) { 
```

是多余的。

其次，由于您已经用 绑定了参数`bindParam`，因此再次将其与数组一起传递也是多余的。

最后，如果您只期望一个结果，您可以放弃`while`循环，甚至使用`$result->fetchAll(PDO::FETCH_ASSOC)`将所有结果提取到单个数组中。

* * *

现在对于真正的问题，您不会`json_encode()`像以前在第一个脚本中那样回显 的结果（您只是调用它而不对结果做任何事情）。

更正了代码，并考虑了以上所有内容：

```
<?php

include 'db.php';

try {

    $dbConnection = new PDO('mysql:host=$dbhost;dbname=$dbhost;', $user, $pass);
    $dbConnection->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $dbConnection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    #Prepare the query
    $dbstylename = $_POST['name'];
    $result = $dbConnection->prepare('SELECT * FROM style where stylename like :dbstylename');
    #bind
    $result->bindParam(':dbstylename', $dbstylename, PDO::PARAM_STR);
    #execute
    $result->execute();
    $row = $result->fetch(PDO::FETCH_ASSOC);
    echo json_encode($row);

} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
}
?> 
```

除此之外，您的 PDO 代码完美无瑕，请继续努力！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:26:37.487

带有数组元素的json编码字符串序列也不等于hole json编码数组。将while循环替换为

```
echo json_encode($result->fetchAll()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:52:57.963

在我的原始帖子中，我提到了我的 jQuery 更改。但是，我在手册中阅读了有关 PDO 的更多信息（特别是：[http](http://www.php.net/manual/en/pdostatement.fetch.php) ://www.php.net/manual/en/pdostatement.fetch.php ）并发现如果我`$row = $result->fetch(PDO::FETCH_ASSOC);`从@MadaraUchiha 更改为`$row = $result->fetch(PDO::FETCH_BOTH);`我可以保留我使用数组/括号表示法的原始 jQuery。

# service - Liferay service.xml 外键多对多

> ID：13461483
> 
> 赞同：1
> 
> 时间：2012-11-19T20:16:56.143
> 
> 标签：service, entity, liferay, builder

您好 Liferay 专家，

`service.xml`请帮我在 Liferay 中为以下场景创建一个：

我有 2 张桌子

1.  **`SystemUsed`**

    ```
    systemUsedId long
    name varchar 
    ```

2.  **`User_SystemUsed`**

    ```
    userId long        --> mapped to userId of User_ table
    systemUsedId long  --> mapped to  systemUsedId of SystemUsed table.<br> 
    ```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:05:35.767

您可以按如下方式创建表：

```
<entity name="SystemUsed" local-service="true" remote-service="false"> 
    <column name="systemUsedId type="Long" />
    <column name="name" type="String"/>
</entity>
<entity name="User_SystemUsed" local-service="true" remote-service="false">  
    <column name="systemUsedId" type="SystemUsed" entity="SystemUsed" mapping-key="systemUsedId" />  
    <column name="userId" type="User" entity="User_" mapping-key="userid" />  
</entity> 
```

我希望 user_ 表像这样正确映射......

# bandwidth - 带宽估计/计算

> ID：13461487
> 
> 赞同：2
> 
> 时间：2012-11-19T20:17:14.930
> 
> 标签：bandwidth, dimension

我正在开发一个新项目（网页），人们可以在其中上传他们的作品（视频格式）。在开始编码之前，我需要制定计划，计算。我知道视频流“吃掉”很多带宽，这就是为什么我需要计算每个视频的带宽和可接受的质量。

我知道流式传输一个全高清（1920p）视频“吃掉”1 个客户端的 7 ~ 9 兆比特/秒。实际上，我正在尝试找到最佳解决方案：更少的带宽和可接受的质量。

可接受的最佳质量（尺寸）是多少？860p或更高？

我在我的国家找到了一家不错的公司，在那里我可以配置一台带宽为 1 GB 且价格可接受的专用服务器。带宽可以接受多少视频流？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:13:54.260

可接受的最佳质量取决于所使用的显示和调整大小的算法……一个编码良好的 360p 视频通常在 1080p 大型显示器上看起来很棒，如果它的尺寸合适的话。在 640p 手机显示屏上，160p 对大多数人来说可能看起来很棒。

它还很大程度上取决于使用的编解码器。以及很大程度上取决于视频内容（高速运动需要更多位才能很好地编码）......

对此没有真正的答案，即使是经验法则的答案，您也没有给出一个很好的起点。抱歉，您需要对不同尺寸、比特率和编解码器的视频进行编码和评估，并确定自己可以接受的质量损失。“最佳可接受质量”是一个完全主观的问题。

# ios - 等待所有方法完成后再加载视图 IOS

> ID：13461489
> 
> 赞同：1
> 
> 时间：2012-11-19T20:17:24.993
> 
> 标签：ios, uiviewcontroller

我有一个 UIViewController 和一个调用 Web 服务器的方法，我希望等到这个方法完成后再显示 UIViewController。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:20:45.540

如果您通过 http 请求或类似的方式调用 webserver，您可以为`didFinish`事件设置自定义委托方法并在此处显示您的`viewController`。

看看[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:27:10.927

您可以使用大中央调度（GCD），这里有一个例子：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //Web Service Calls

        dispatch_async(dispatch_get_main_queue(), ^{
            //UI Stuff
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:28:33.807

您应该在显示视图控制器之前请求数据。然后，使用指定的初始化，打开视图控制器并显示他的数据。示例（使用 AFNetworking 框架）

```
[[AFAppDotNetAPIClient sharedClient] getPath:@"stream/0/posts/stream/global" parameters:nil success:^(AFHTTPRequestOperation *operation, id JSON) {
    NSLog(@"JSON: %@", JSON);
    MyModel model = [self parse:json];
    ViewController *vc = [[ViewController alloc] initWithData:model];
    [self.navigationController pushViewController:vc animated:YES];

} failure:nil]; 
```

# c# - 在字符串中一次搜索多个 guid 的最佳方法？

> ID：13461491
> 
> 赞同：0
> 
> 时间：2012-11-19T20:17:35.943
> 
> 标签：c#, search, guid, trie

我遇到了在字符串中搜索 90,000 个 GUID 的问题。我需要获取每个 GUID 的所有实例。从技术上讲，我也需要更换它们，但这是另一回事。

目前，我正在使用正则表达式单独搜索每一个。但我突然想到，通过一起搜索它们可以获得更好的性能。我过去读过有关尝试的内容，但从未使用过，但我突然想到我可以构建一个包含所有 90,000 个 GUID 的 trie 并使用它来搜索。

或者，也许 .NET 中有一个现有的库可以做到这一点。我突然想到，我没有理由只用一个巨大的正则表达式就不能获得良好的性能，但这似乎行不通。

除此之外，也许我可以使用一些与 GUID 结构相关的聪明技巧来获得更好的结果。

这对我来说并不是一个真正的关键问题，但我认为我可能能够学到一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:25:51.417

看看 Rabin-Karp 字符串搜索算法。它非常适合在字符串中进行多模式搜索：

[http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_string_search_algorithm#Rabin.E2.80.93Karp_and_multiple_pattern_search](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_string_search_algorithm#Rabin.E2.80.93Karp_and_multiple_pattern_search)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:21:33.490

不久前我开发了一种替换大量字符串的方法，这可能很有用：

[替换许多字符串的更好方法 - C# 中的混淆](https://stackoverflow.com/questions/711753/a-better-way-to-replace-many-strings-obfuscation-in-c-sharp)

另一种选择是使用正则表达式来查找字符串中的所有 GUID，然后遍历它们并检查每个 GUID 是否是您的 GUID 集的一部分。

基本示例，使用`Dictionary`快速查找 GUID：

```
Dictionary<string, string> guids = new Dictionary<string, string>();
guids.Add("3f74a071-54fc-10de-0476-a6b991f0be76", "(replacement)");

string text = "asdf 3f74a071-54fc-10de-0476-a6b991f0be76 lkaq2hlqwer";

text = Regex.Replace(text, @"[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}", m => {
  string replacement;
  if (guids.TryGetValue(m.Value, out replacement)) {
    return replacement;
  } else {
    return m.Value;
  }
});

Console.WriteLine(text); 
```

输出：

```
asdf (replacement) lkaq2hlqwer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T20:22:00.867

使用 RegEx 不会获得良好的性能，因为它的性能天生就很差。此外，如果所有 GUID 共享相同的格式，您应该只需要一个 RegEx。并且`regex.Replace(input, replacement);`会去做。

`String.Replace`如果您已经在内存中拥有 guid 列表，那么通过循环遍历该列表并像这样进行调用，性能会更好

```
 foreach(string guid in guids)
     inputString.replace(guid, replacement); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T21:38:08.490

好的，这看起来不错。所以这里要清楚的是原始代码，它在示例字符串上运行了 65 秒：

```
 var unusedGuids = new HashSet<Guid>(oldToNewGuid.Keys);

    foreach (var guid in oldToNewGuid) {
        var regex = guid.Key.ToString();

        if (!Regex.IsMatch(xml, regex))
             unusedGuids.Add(guid.Key);
        else
            xml = Regex.Replace(xml, regex, guid.Value.ToString());
    } 
```

新代码如下，耗时6.7s：

```
var unusedGuids = new HashSet<Guid>(oldToNewGuid.Keys);

var guidHashes = new MultiValueDictionary<int, Guid>();

foreach (var guid in oldToNewGuid.Keys) {
    guidHashes.Add(guid.ToString().GetHashCode(), guid);
}

var indices = new List<Tuple<int, Guid>>();

const int guidLength = 36;

for (int i = 0; i < xml.Length - guidLength; i++) {
    var substring = xml.Substring(i, guidLength);

    foreach (var value in guidHashes.GetValues(substring.GetHashCode())) {
         if (value.ToString() == substring) {
        unusedGuids.Remove(value);
        indices.Add(new Tuple<int, Guid>(i, value));
        break;
         }
    }
}

var builder = new StringBuilder();

int start = 0;
for (int i = 0; i < indices.Count; i++) {
    var tuple = indices[i];
    var substring = xml.Substring(start, tuple.Item1 - start);
    builder.Append(substring);
    builder.Append(oldToNewGuid[tuple.Item2].ToString());
    start = tuple.Item1 + guidLength;
}

builder.Append(xml.Substring(start, xml.Length - start));

xml = builder.ToString(); 
```

# java - Java 过滤器未能设置响应标头

> ID：13461500
> 
> 赞同：11
> 
> 时间：2012-11-19T20:18:09.423
> 
> 标签：java, servlets, http-headers, request, servlet-filters

我正在尝试创建一个 Java“过滤器”，它检测自定义 HTTP 请求标头，并插入响应标头，以便文件自动下载。对此最重要的响应标头是“Content-Type = Attachment”响应标头。我创建了一个插入自定义标头的 HTTP 请求对象：

```
function myHttpObject(filePath){
function makeHttpObject() {
    return new XMLHttpRequest();
}

var request = makeHttpObject();

request.open("GET", filePath, false);
request.setRequestHeader("X-Wria-Download", "PDFdownload");
request.send(null);
window.open(filePath);
console.log(request.getAllResponseHeaders());
} 
```

这会将 X-Wria-Download 标头插入到请求中。然后我有一个 Java 过滤器，它会查找该请求标头并将响应标头设置为“Content-Type=attachment”

```
import javax.servlet.*;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;
public class Contenttypefilter implements Filter  {

protected FilterConfig filterConfig;

public void init(FilterConfig filterConfig) throws ServletException {
    this.filterConfig = filterConfig;
}

public void destroy() {
    //noop
}

public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {

    HttpServletRequest req = (HttpServletRequest) request;
    HttpServletResponse res = (HttpServletResponse) response;

    //get the headers we placed in the request
    //based on those request headers, set some response headers

    if(req.getHeader("X-Wria-Download") != null){
        res.setHeader("Content-Type", "application/pdf");
        res.setHeader("Content-Disposition", "attachment; filename=success.pdf");
    }

    chain.doFilter(req,res);
}

} 
```

然后当然 web.xml 具有在所有 jsp 文件中包含过滤器的代码。

令我困惑的是，响应文件上设置了标头，但它没有按应有的方式下载。如果我把 res.setHeader("Content-Disposition", "attachment; filename=success.pdf"); 在“if”语句之外的行，那么它将起作用，但它将下载行为应用于我不想要的所有 JSP。

当我在 if 语句中有 res.setHeader 时，为什么它应用了内容处置但不起作用；然后在 if 语句之外工作？关于如何获得所需行为的任​​何想法（仅将内容处置应用于我已应用自定义请求标头的 jsp）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-20T22:09:14.037

我认为您的问题与您的过滤器执行顺序有关`Web Context`，即在您的网络上下文中，一些过滤器在您的过滤器之后执行并覆盖标题。

Servlet[过滤器是](http://docs.oracle.com/javaee/5/api/javax/servlet/Filter.html)[责任链](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)模式的一种实现

所以你可以尝试：

*   在调用chain.doFilter之后设置标题：

.

```
...

chain.doFilter(req,res);

HttpServletRequest req = (HttpServletRequest) request;
HttpServletResponse res = (HttpServletResponse) response;

//get the headers we placed in the request
//based on those request headers, set some response headers

if(req.getHeader("X-Wria-Download") != null){
    res.setHeader("Content-Type", "application/pdf");
    res.setHeader("Content-Disposition", "attachment; filename=success.pdf");
} 
```

这样，您的代码将在调用 Servlet 之后执行，如下所述，如果您的过滤器是 web.xml 中第一个声明的，那么`setHeader`代码将是最后一个执行的代码（见下图）。

*   确保您的过滤器是 Servlet 执行后最后执行的，即它应该是第一个声明的 servlet 过滤器，如下[**所述**](http://docs.oracle.com/cd/B15904_01/web.1012/b14017/filters.htm)：

![在此处输入图像描述](../Images/b0658e37e6ad0bd4c690fac43c7e7685.png)

如您所见，Filter1（web.xml 中的第一个声明）是在 servlet 执行之前执行的第一个，也是在 servlet 执行之后执行的最后一个。因此，如果您想确保成为最后一个设置标头的过滤器，则将其声明为 Filter1。

执行顺序由您的部署描述符 (web.xml) 中的声明顺序决定：

> Servlet 规范（第 6.2.4 节）：
> 
> “容器在构建要应用于特定请求 URI 的过滤器链时使用的顺序如下：
> 
> "1\. 首先，匹配过滤器映射的顺序与这些元素在部署描述符中出现的顺序相同。
> 
> “2\. 接下来，匹配过滤器映射的顺序与这些元素在部署描述符中出现的顺序相同。”

因此，请确保只需将其声明为您的`web.xml`. 这样，它将是设置标题的最后一个过滤器。当然，如前所述，在调用之后在代码中设置标题`chain.doFilter`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-06T05:33:08.443

假设您使用其他人在此处描述的响应包装器，那么整个秘密就是何时在原始响应上调用 getWriter() ！那是因为响应对象忽略了在您要求作家之后添加的所有标头！

因此，请确保在调用 getWriter() 之前添加所有标题。这是我推荐的 doFilter() 序列：

1.  创建响应包装器

2.  chain.doFilter (origRequest, 包装器);

3.  将所有必需的标头分配给原始 (!) 响应

4.  从原始回复中获取作者

5.  将包装器的内容复制到此作者

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T04:16:45.580

问题是在提供过滤器之前，您的 AjaxRequest（此处为 XMLHttpRequest）的标头（X-Wria-Download）未在您的 HttpServletRequest 对象中设置。

我认为更好的想法是**使用 Dedicated Servlet 来处理您的 ajax 请求**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T21:57:28.833

试试这个：如果请求标头存在，则在请求上设置一个属性。然后，检查 之后的属性`chain.doFilter(...)`并设置响应头。

# c# - 带有循环的 Sql 事务，一个提交语句

> ID：13461505
> 
> 赞同：1
> 
> 时间：2012-11-19T20:18:40.603
> 
> 标签：c#, ado.net

我主要只是好奇我的方法是否正确。我要做的是循环两个数组并将索引处的值插入到我的数据库中，如果出现故障则回滚。

我在想什么看起来像这样。

```
 SqlCommand cmd = new SqlCommand();
        SqlConnection cn = new SqlConnection(s.ConnectionString.ConnectionString);

        cmd.Connection = cn;
        cmd.CommandText = "asp_FinalInspectionTransaction";
        cmd.CommandType = CommandType.StoredProcedure;

        SqlTransaction trans = cn.BeginTransaction();
        cmd.Transaction = trans;

        cn.Open();

        try
        {
            for (int i = 0; i < array1.Length - 1; i++)
            {
                cmd.Parameters.AddWithValue("@MasterID", masterID);
                cmd.Parameters.AddWithValue("@TagName", array1[i]);
                cmd.Parameters.AddWithValue("@TagValue", array2[i]);

                cmd.ExecuteNonQuery();

                cmd.Parameters = new SqlParameterCollection();
            }

            trans.Commit();
        }
        catch (SqlException e)
        {
            LogManager lm = new LogManager();
            lm.WriteErrorTextLog(e, "Broken Manager - Final Inspection Broker");
            lm.Dispose();

            trans.Rollback();
        }
        catch (Exception e)
        {
            LogManager lm = new LogManager();
            lm.WriteErrorTextLog(e, "Broken Manager - Final Inspection Broker");
            lm.Dispose();

            trans.Rollback();
        }
        finally
        {
            cn.Close();
        } 
```

我仍在学习 ADO.Net 的所有内容，并且没有使用 SQL 存储过程之外的事务。我知道我可以将它放入 XML 并在它自己的存储过程中执行所有循环和插入。只是好奇这条路线是否也能奏效。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:41:39.160

您也可以尝试将其放入事务范围（[http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)）

```
using (TransactionScope scope = new TransactionScope())
{
    // your ado.net sql here

    // if success then:
    scope.Complete();
} 
```

这样做的好处是它还会回滚多个 SQL 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:38:27.210

您的建议对我来说看起来不错，唯一的期望是您应该使用更多的关键字`using`（也添加了一些小修复）：

```
using (SqlCommand cmd = new SqlCommand())
{
    using (SqlConnection cn = new SqlConnection(s.ConnectionString.ConnectionString))
    {
        cmd.Connection = cn;
        cmd.CommandText = "asp_FinalInspectionTransaction";
        cmd.CommandType = CommandType.StoredProcedure;

        SqlTransaction trans = cn.BeginTransaction();
        cmd.Transaction = trans;

        cn.Open();

        try
        {
            for (int i = 0; i < array1.Length - 1; i++)
            {
                cmd.Parameters.AddWithValue("@MasterID", masterID);
                cmd.Parameters.AddWithValue("@TagName", array1[i]);
                cmd.Parameters.AddWithValue("@TagValue", array2[i]);

                cmd.ExecuteNonQuery();

                // cmd.Parameters = new SqlParameterCollection(); <-- This is a read only collection created when constructing the command
            }

            trans.Commit();
        }
        catch (Exception e) // As you are doing the same thing on boths exceptions one handler is enought
        {
            using (LogManager lm = new LogManager())
            {
                lm.WriteErrorTextLog(e, "Broken Manager - Final Inspection Broker");
            }
            trans.Rollback();
        }
    }
} 
```

# jquery - 超链接点击动画

> ID：13461510
> 
> 赞同：0
> 
> 时间：2012-11-19T20:18:49.030
> 
> 标签：jquery, animation

使用 jquery 可以制作以下动画：我有一个列表，每个列表包含 3 个超链接，每个列表都包含一个由 css 定义的背景图像。如果我点击第二个实际上停留在两侧中间的内容，则超链接应该切换出去并且点击应该保留。我想为此我应该从当前列表中找到未点击的超链接。我有一个示例[http://jsfiddle.net/lgtsfiddler/78kAu/22/](http://jsfiddle.net/lgtsfiddler/78kAu/22/)目前正在切换所有 ul 元素。并且 javascript 看起来如下

```
 $('span').hover( function() {

            $(this).stop().animate({"opacity": "1.4"}, "fast");
        },
            function() {
            $(this).stop().animate({"opacity": "0.9"}, "fast");
            });
        $('a').click(function(){
            var selected = $(this).attr('class');
            var row = $('.elements li').length;  
             $(this).closest('ul#elements').toggle('slow', function() {
                 $(this).closest('ul#elements').replaceWith('<ul id="selected"><li class="selected"><span class='+ selected + '_gray></span><h1>'+ selected + '</h1><a class="return" href="#"></a></li></ul>');    

              });        
            }); 
```

# c# - 在 WP7 应用程序中显示 WCF 数据

> ID：13461512
> 
> 赞同：1
> 
> 时间：2012-11-19T20:18:53.840
> 
> 标签：c#, wcf, windows-phone-7

嗨，我正在开发一个使用 WCF 服务从数据库获取数据的应用程序。但是当我想在手机上显示结果时，它会在 VS 中显示错误。我在 WCF 中从 MachineEntity 转换为 Machine，然后将其发送到客户端应用程序。

这是错误，指的是`e.Result`：

> 无法将类型“WP7App.WCFService.Machine”隐式转换为“System.Collections.IEnumerable”。存在显式转换（您是否缺少演员表？）

```
public FoundProduct(int s)
{
    InitializeComponent();
    Service1Client proxy = new Service1Client();
    proxy.GetMachineCompleted += new
    EventHandler<GetMachineCompletedEventArgs>(proxy_GetMachineCompleted);
    proxy.GetMachineAsync(s);
}

void proxy_GetMachineCompleted(object sender, GetMachineCompletedEventArgs e)
{
    listBox1.ItemsSource = e.Result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:45:28.637

就像错误消息说的那样， 的`ItemsSource`属性`ListBox`需要一个实现接口的对象`IEnumerable`。也就是说，大多数时候，元素的集合。

如果`Machine`应该是对象的集合，那么您必须了解它为什么没有实现`IEnumerable`（这里没有足够的上下文信息来弄清楚）。

但是，如果`Machine`是您想要分配给您的单个对象`ListBox`（听起来很奇怪，但是......），您可以将它包装在一个集合中：

```
listBox1.ItemsSource = new[] { e.Result }; 
```

# java - Java 静态类的生命周期

> ID：13461514
> 
> 赞同：2
> 
> 时间：2012-11-19T20:19:01.530
> 
> 标签：java, jsp

Java 静态类垃圾是如何收集的？

我有一个静态类，其中包含一个静态对象。如果我将对象设置为 null 那么它是垃圾收集。我不了解静态类的生命周期。程序关闭时是否会收集垃圾？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:21:44.470

**静态对象与类定义相关联，而不与类实例相关联。**

**它们在您的类通过 ClassLoader 加载后立即**生效，并且仅在类卸载时销毁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:20:11.367

静态类总是可以访问的，因此永远不会被垃圾回收。

现在，如果您的静态类具有非静态类的字段和实例，并且设置为 null，则该内存将被释放，因为不再引用该对象。

例如

```
public static StaticClass
{
    public static InstanceClass myInstanceClass;
} 
```

如果设置`myInstanceClass`为 null，那么它将被垃圾收集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T20:32:08.143

**-class** `static`只能**在类级别而不是包级别**，我们可以说`static inner classes`或`Top level classes`。

**-**然后`static`类加载器加载一个类。

**-**现在`static`类将进入内存，直到加载它的**加载器**仍在运行，或者除非它没有被加载器卸载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T20:35:57.103

这样想：

每个对象都有对其类的引用。

每个类都有对其类加载器的引用。

每个类加载器都有一个*对它曾经加载过的每个类*的引用。

这整个乱七八糟的球有可能变成垃圾。这是应用程序卸载/重新加载（在 servlet 容器中）的基础。但是，如果仍然引用了一个对象，则类加载器及其所有类都无法卸载，因此要实现应用程序卸载并非易事。

# javascript - JQuery .click() 事件，IE 8&9 中非常奇怪的行为

> ID：13461522
> 
> 赞同：1
> 
> 时间：2012-11-19T20:19:41.353
> 
> 标签：javascript, jquery, internet-explorer, event-handling, event-bubbling

我创建了一个视频库，它根据元素的数据属性通过 swfobject 加载 Youtube 视频。它在所有浏览器中都运行良好，除了 IE。我看到的奇怪行为没有意义。

每个缩略图的标记如下：

```
<li>
    <div class="movie-image">
        <a class="" data-videotitle="Title" data-videoid="$node.contribution('video')" href="http://www.youtube.com/watch?v=41ZskpgQqZ4">
            <img class="video-link" data-videotitle="Title" data-videoid="41ZskpgQqZ4" src="http://img.youtube.com/vi/41ZskpgQqZ4/default.jpg" alt="Title">
            <h5>Title</h5>
        </a>
    </div>
</li> 
```

使用此 javascript 绑定事件：

```
$('.video-link').click(function(){
    player.setVideo(this.getAttribute("data-videoid"), true);
    player.setTitle(this.getAttribute("data-videotitle"));
    window.event.returnValue = false; //IESUX
    if(window.event.stopPropagation) window.event.stopPropagation();
    window.event.cancelBubble = true;
    //Yes, there's a lot of redundancy here. None has worked.
    return false;
}) 
```

**现在，这是奇怪的部分：**当我在除 IE 之外的任何浏览器中单击链接时，该事件都可以正常工作。

但是，在 IE 中，如果我单击 h5 元素，一切正常。但是，如果我单击图像，浏览器会导航到缩略图。这真的很奇怪，因为这甚至不是链接的目标。

**编辑：**我忘了提，我在这个特定的网页上使用 JQuery 1.4.2。

**编辑2：**嗯......废话。我只是尝试将小提琴放在一起来显示问题，但小提琴工作正常，即使使用旧版本的 JQuery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:23:29.253

jQuery 包装了事件对象，并为它提供了一些方法，这些方法可以更好地完成您想要做的事情：

```
$(".video-link").click(function (e) {
   player.setVideo(this.getAttribute("data-videoid"), true);
   player.setTitle(this.getAttribute("data-videotitle"));
   e.stopPropagation();
   e.preventDefault();
}); 
```

请注意，它`return false`被明确地遗漏了——您不需要它。

我的猜测是，IE 要么抛出某种错误，停止 JS 执行并最终跟随链接，要么默认操作没有正确停止。

# php - 检查 youtube 视频是否可嵌入 通过 xml

> ID：13461532
> 
> 赞同：0
> 
> 时间：2012-11-19T20:20:13.910
> 
> 标签：php, xml, youtube, youtube-api, embeddable

我有以下链接[http://gdata.youtube.com/feeds/api/videos/tYMYv1zsAxE](http://gdata.youtube.com/feeds/api/videos/tYMYv1zsAxE)并返回一个 xml 文件，其中位于 noembed 标记，以防视频不可嵌入。

我想在视频列表上创建一个循环来检查哪些是可嵌入的，哪些不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:03:01.270

根据您的澄清，听起来您是在询问有关解析 XML 的问题。这是另一种选择：取回 JSON，并对其进行解析。您可以提出如下请求

[http://gdata.youtube.com/feeds/api/videos/tYMYv1zsAxE?v=2&alt=jsonc&prettyprint=true](http://gdata.youtube.com/feeds/api/videos/tYMYv1zsAxE?v=2&alt=jsonc&prettyprint=true)

然后查看 JSON 响应中的 data->accessControl->embed 元素。

或者，您知道，只需解析和访问 YouTube API XML，就像解析来自任何其他来源的 XML 一样。YouTube API XML 没有什么神奇之处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:40:06.823

```
$vidID = "tYMYv1zsAxE";
$url="http://gdata.youtube.com/feeds/api/videos/$vidID?v=2&alt=jsonc&prettyprint=true";
$json = file_get_contents($url, true);
$json_output = json_decode($json);
echo $json_output->data->accessControl->embed; 
```

检查 youtube 视频是否可嵌入的简单方法。

感谢@Jeff Posnick

# c++ - 如何从 C++ 中的函数返回结构

> ID：13461533
> 
> 赞同：0
> 
> 时间：2012-11-19T20:20:24.270
> 
> 标签：c++, pointers, loops, struct

所以我通过搜索这个网站彻底浏览了这些主题，但我找不到可以帮助我的东西。

我正在为我的朋友做一个任务，让我告诉你，我使用 C++ 已经一年或更长时间了。

所以我面临的问题是指针并通过指针返回结构。

下面是代码：

```
#include <stdio.h>
#include <conio.h>
#include <iostream.h>

    struct student
   {
    int SUB[3];
   };

   struct AVGPCT
   {
    float avg;
      float pct;
   };

AVGPCT* CALC(student *A)
{
   int x,y;
    AVGPCT D[5]={0.0,0.0,0.0,0.0,0.0};

   for(x=0;x<5;x++)
   {
    for(y=0;y<3;y++)
      {
        D[x].avg+=A[x].SUB[y];
         D[x].pct+=A[x].SUB[y];
      }
   }

   for(x=0;x<5;x++)
   {
    D[x].avg/=2;
      D[x].pct/=300;
   }
   return (D);
}

void main(void)
{
   int i,j;
   student S[5];
   AVGPCT *V;

   for(i=0;i<5;i++)
   {
    for(j=0;j<3;j++)
      {
        cout << "Enter Marks Of Subject[" << (j+1) << "] Of Student [" << (i+1) <<"] [Max=100]:";
        cin >> S[i].SUB[j];
      }
   }

   V = CALC(S);
   cout << "Average Number Of Student [1]: " << V->avg;
   cout << (*V).pct;

   getch();
} 
```

现在的问题是，我很难从该位置检索正确的值。

我正在尝试用 V++ 增加指针。有趣的是，如果我使用，它会正确打印值：

```
cout << V->avg;
cout << V->pct;
V++;
cout << V->avg;
cout << V->pct; 
```

等等。但是，如果我使用循环，甚至只写一行，或者使用 endl 或 \n，这些值就会变得混乱，并且会出现乱码。

那么这里可能出了什么问题呢？

我使用结构很重要，也请根据代码进行指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:26:59.967

返回指向堆栈上数据的指针不起作用。改用 a`std:vector<AVGPCT>`并按值返回，而不是按指针返回。与 Java 或 C# 不同，C++ 是基于值而不是指针。

C++ 不允许`void`从`main()`.

根据 C++ 标准，标头`<iostream.h>`不存在。标准标题是`<iostream>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T20:26:36.890

看起来像这条线

```
AVGPCT D[5]={0.0,0.0,0.0,0.0,0.0}; 
```

在函数本地声明数组 D`CALC()`

您将指向该数组的指针传递回主函数，但该数组被标记为免费游戏，以便在函数结束时覆盖。你在程序中做的事情越多，内存中的这个位置被覆盖的机会就越大，尽管很难说什么时候会发生。因此，有时您会逃脱惩罚，而其他时候则不会。

冒着给你建议的风险，最好`D`在 main 中声明某个地方并将指向它的指针传递给函数，或者在函数内部使用`new`or`malloc`并将结果指针传回。

# c# - *派生实体*上的级联删除

> ID：13461534
> 
> 赞同：1
> 
> 时间：2012-11-19T20:20:37.733
> 
> 标签：c#, .net, sql-server, entity-framework, foreign-keys

好的，看看下面的简单对象模型：

*   实体`ConcreteThingy`派生自`AbstractThingy`。
*   实体`Owner`最多可以有 1 个`ConcreteThingy`。
    *   没有两个`Owners`可以有相同的`ConcreteThingy`。

**EDMX：**

![在此处输入图像描述](../Images/1eba2a556db3f38e4f9d2ee6e6a7fe5c.png)

**数据库模型（TPT）：**

![在此处输入图像描述](../Images/ee11520327e4f9c3779912a9f88b0c08.png)

## 我想要的是：

我想要两件事，按优先级降序排列：

*   **我想要的东西#1：**最重要的是，我想要下面#2 的最简单、最简洁、更干净的解决方案。
*   **我想要的东西#2：**当我删除一个`Owner`时，我想自动删除任何可能关联的`ConcreteThingy`，**以及基础`AbstractThingy`。**

## 我在做什么：

所以，很*自然地*，我去 EDMX 并简单地在**Owner 0 ↔ 0..1 ConcreteThingy**关联上打开*Cascade delete 。*

 **![在此处输入图像描述](../Images/e04982d46e4f1fdbf99a873dcce5ab7a.png)

`FK_ConcreteThingy_Owner`这在将关系的 Delete 规则设置为*Cascade*时效果很好，但我没有看到任何确保`AbstractThingy`记录也被删除的约束/数据库代码。

![在此处输入图像描述](../Images/3c84e54b159a2dc9caa6ad43e63e6b00.png)

同样，当我删除 an 时`Owner`，相应的`ConcreteThingy`（如果有的话）被删除，但它留下了 dangling `AbstractThingy`，这并不奇怪，我不想要。

**有人可以告诉我使用 EF 5 实现此类任务的标准方法是什么？**

我尝试过`AbstractThingy`抽象化，希望 SQL 代码能以某种方式推断出我想要的东西（可以理解，生成器会有某种先有鸡还是先有蛋的难题，但是嘿，至少我试过了。）

或者我应该在我的 EDMX 中定义某种智能引用约束？

还是希望我自己去数据库编写代码，比如触发器等......！？！？对于 EF 及其设计工具来说，这将是一场 [另一个] 惨败。

谢谢。**

# c++ - lambda 的 Lambda ：未捕获该函数

> ID：13461538
> 
> 赞同：37
> 
> 时间：2012-11-19T20:20:45.947
> 
> 标签：c++, c++11, lambda, std-function

以下程序无法编译：

```
#include <iostream>
#include <vector>
#include <functional>
#include <algorithm>
#include <cstdlib>
#include <cmath>

void asort(std::vector<double>& v, std::function<bool(double, double)> f)
{
    std::sort(v.begin(), v.end(), [](double a, double b){return f(std::abs(a), std::abs(b));});
}

int main()
{
    std::vector<double> v({1.2, -1.3, 4.5, 2.3, -10.2, -3.4});
    for (unsigned int i = 0; i < v.size(); ++i) {
        std::cout<<v[i]<<" ";
    }
    std::cout<<std::endl;
    asort(v, [](double a, double b){return a < b;});
    for (unsigned int i = 0; i < v.size(); ++i) {
        std::cout<<v[i]<<" ";
    }
    std::cout<<std::endl;
    return 0;
} 
```

因为 ：

```
error : 'f' is not captured 
```

这是什么意思以及如何解决问题？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-19T20:22:16.810

您`f`在 lambda inside 中使用了参数`asort()`，但没有捕获它。尝试添加`f`到捕获列表（更改`[]`为 read `[&f]`）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-19T20:24:30.867

您在 lambda 中有效地引用了 f，它是外部作用域中的变量。您应该在您的捕获列表中捕获它（最简单的可能是通过引用 [&f] 或 [&] 通过引用捕获所有内容，因为您正在立即使用它）。

另一方面， std::function 在执行类型擦除时会产生一些开销，在您的情况下，在这里引入模板类型可能会更好。

# arrays - Grails - 按元素和数组对集合进行排序

> ID：13461543
> 
> 赞同：0
> 
> 时间：2012-11-19T20:21:00.507
> 
> 标签：arrays, sorting, grails, collections

是否有一种~~“常规”~~方式通过第一个参数对集合进行排序，如果第一个参数在两个或多个元素中重复，则通过第二个参数（第二个参数是一个数组）对其进行排序？

例子：

**编辑**（子数组的长度是可变的）：

[1, [1,2,3]]
[1, [4,6]]
[2, [1,2,3,4,5]]
[3, [1,2,3]]
[3, [ 1,2,4,5]]

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:43:24.563

看看以下提姆耶茨[的](https://gist.github.com/3314416)要点[。](https://stackoverflow.com/users/6509/tim-yates)

它展示了一种如何使用多个比较器对列表进行排序的方法。

对于您的示例：

```
Collection.metaClass.sort = { boolean mutate, Closure... closures ->
    delegate.sort( mutate ) { a, b ->
        closures.findResult { c -> c( a ) <=> c( b ) ?: null }
    }
} 

def list = [[3, [1,2,3]],
                [1, [4,5,6]],
                [2, [1,2,3]],
                [1, [1,2,3]],
                [3, [1,2,4]]]

assert list.sort(false, {it[0]}, {it[1][0]}, {it[1][1]}, {it[1][2]}) == [[1, [1,2,3]],
                                                                         [1, [4,5,6]],
                                                                         [2, [1,2,3]],
                                                                         [3, [1,2,3]],
                                                                         [3, [1,2,4]]] 
```

希望有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:50:27.753

如果要构建自定义排序，可以使用 .sort：

```
def lis = []

lis << [3, [1,2,4]]
lis << [1, [1,2,3]]
lis << [3, [1,2,3]]
lis << [1, [4,5,6]]
lis << [2, [1,2,3]]

lis.sort{a,b->
    if(a[0]==b[0])
    {
        def aArray = a[1]
        def bArray = b[1]
        for(int i=0;i<aArray.size();i++)
        {
            if(bArray[i])
            {
                if(aArray[i]!=bArray[i])
                {
                    return aArray[i]<=>bArray[i]
                }
            }
            else
            {
                return 1
            }
        }    
        return 0
    }
    else
        return a[0]<=>b[0]
}

lis.each{x->
println x
} 
```

I didn't really deal well with the case that the lists are different lengths you could improve on that for your apps needs.

# c - 如何将参数传递给由 fork() 创建的进程

> ID：13461548
> 
> 赞同：16
> 
> 时间：2012-11-19T20:21:22.893
> 
> 标签：c, linux, operating-system, fork, system-calls

**我想在 C 中使用fork()**创建进程的副本。我不知道如何将参数传递给我的进程的副本。例如，我想将一个整数传递给进程副本。

或者我该怎么做，如果我有一个循环，我在其中调用 fork() 并希望将唯一值传递给进程（例如 0...N）

```
for (int i = 0; i < 4; ++i) {
    fork();
    // pass a unique value to new processes.
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-19T21:19:58.517

好的部分`fork()`是，您生成的每个进程都会自动获取父进程所有内容的副本，例如，假设我们想将一个 int 传递`myvar`给两个子进程中的每一个，但我希望每个子进程都具有与父进程不同的值过程：

```
int main()
{
    int myvar = 0;
    if(fork())
        myvar = 1;
    else if(fork())
        myvar = 2;
    else
        myvar = 3;

    printf("I'm %d: myvar is %d\n", getpid(), myvar);
    return 0;
} 
```

`myvar`因此，这样做可以让每个进程都有一个具有自己价值的“副本” 。

```
I'm 8517: myvar is 1
I'm 8518: myvar is 2
I'm 8521: myvar is 3 
```

如果您没有更改该值，那么每个分叉的进程将具有相同的值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-19T20:32:06.627

局部和全局变量本质上是跨 a 保留的`fork()`，因此无需“传递参数”。如果您在分叉进程中调用函数，则可以执行以下操作：

```
pid_t pid = fork();
if (pid == 0) {
    funcToCallInChild(argument);
    exit(0);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-06-05T14:52:16.050

我迟到了，但我是这样做的：

```
const char *progname = "./yourProgName";
const char *argument1 = "arg1";
const char *argument2 = "arg2";

if (fork() == 0)
{
    // We are the child process, so replace the process with a new executable.  
    execl(progname, progname, argument1, argument2, (char *)NULL);
}
//  The parent process continues from here. 
```

首先，你 fork() 进程来创建一个新进程。它仍然具有与旧的相同的内存空间。fork() 为父进程和子进程返回。如果 fork() 返回零，则您是子进程。然后子进程使用 execl() 将进程内存替换为新文件中的内存。

请注意，将 progname 两次赋予 execl()。第一个是 execl() 实际尝试运行的，第二个是 argv[0]。您必须同时提供两者，否则参数计数将减一。Progname 必须包含所有必需的路径信息才能找到所需的可执行映像。

我在这个例子中给出了两个参数，但是你可以传递任意多的参数。它必须以 NULL 终止，我认为您必须像我展示的那样将其转换为 (char *)。

这种方法为您提供了一个完全独立的过程，带有参数和唯一的 pid。它可以在父进程终止后很长时间继续运行，也可以在父进程之前终止。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T20:23:13.763

请参阅函数[`exec()`族](http://linux.die.net/man/3/exec)。

编辑：如果您尝试初始化与基本进程相同的程序的副本，请继续使用duskwuff 建议的变量。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T20:27:51.580

您可以使用*clone()*（实际上由 fork() 本身使用）。它允许您将*arg*传递给您的入口函数。

[http://linux.die.net/man/2/clone](http://linux.die.net/man/2/clone)

# jquery-mobile - 从 jquerymobile 中的父容器覆盖 data-ajax="false"

> ID：13461560
> 
> 赞同：2
> 
> 时间：2012-11-19T20:22:15.540
> 
> 标签：jquery-mobile

我正在使用文档中提到的方法在[我的网站](http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html)`data-ajax="false"`的父容器上设置，但我确实有一些情况下我希望页面通过 Ajax 加载。

有没有办法在父容器上设置默认值但允许单个链接覆盖该设置？添加`data-ajax="true"`到单个链接似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:20:26.850

不知何故，其他建议对我不起作用。但这一个确实奏效了。经测试。

此脚本禁用页面 jquery mobile 中的所有 ajax 链接 - 那些应该是 ajax 的链接可以用作下面的 a-link，data-ajax=true。

```
<head>
<!-- ..... -->
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script>
       $(document).on("mobileinit", function () {
                    // Reference: http://jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html
                    $.extend($.mobile, {
                        linkBindingEnabled: false,
                        ajaxEnabled: false
                    }); 
         });         
    </script>
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
<!-- ..... -->
</head>
<body>
 <a href="holysmokewheredidtheajaxgo.html" data-ajax=true>Well, I'm still ajax. That's true!</a>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:09:54.530

为整页加载设置默认值：

```
 $(document).on("mobileinit", function(){
    $.mobile.ajaxEnabled = false; 
 }); 
```

要设置个人，请使用 data-ajax=true。

# .net - Visual Studio Designer 在呈现 WinForm 时调用了哪些方法？

> ID：13461566
> 
> 赞同：1
> 
> 时间：2012-11-19T20:22:39.413
> 
> 标签：.net, winforms, visual-studio-2010, visual-studio

1.  Visual Studio 设计器在尝试呈现 WinForms 类时调用了哪些方法？
2.  当 Winforms 类继承自另一个 WinForms 类时会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-11T15:04:04.207

所以在实验之后我发现：

1.  如果您在具有 YourClass.Designer.cs 文件的 VS Designer 中打开表单，则：
    *   YourClass.Designer.cs 中定义的属性/字段将是新的
    *   将调用“InitializeComponent()”方法

注意：奇怪的是，您的构造函数**不会**被调用，您可以通过以下方式向自己证明这一点（注意，Designer 可以使用以下代码）：

```
public class YourClass ... {
   public YourClass() {
     throw new Exception("Ha (1)!");
     InitializeComponent();
     throw new Exception("Ha (2)!");
   }
} 
```

2.  如果该类没有 SomeControl.Designer.cs 文件，或者它是您在 VS 设计器中打开的类中的组件，则将调用该组件的构造函数。您可以使用上面的示例再次对此进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:44:06.910

> 当 Winforms 类继承自另一个 WinForms 类时会发生什么？

过去，我使用 WinForm 继承来强制表单之间的标准布局 - 有点像主表单。在设计模式下，添加到父窗体的任何控件都将显示在子窗体中。您不能直接从子表单设计器编辑父表单。

# python - Python中的蒙特卡罗方法

> ID：13461567
> 
> 赞同：9
> 
> 时间：2012-11-19T20:22:42.767
> 
> 标签：python, montecarlo

我一直在尝试使用 Python 创建一个脚本，该脚本可以让我生成大量点，以用于 Monte Carlo 方法来计算对 Pi 的估计。我到目前为止的脚本是这样的：

```
import math
import random
random.seed()

n = 10000

for i in range(n):
    x = random.random()
    y = random.random()
    z = (x,y)

    if x**2+y**2 <= 1:
        print z
    else:
        del z 
```

到目前为止，我能够生成我需要的所有点，但我想得到的是运行脚本时产生的点数，以供以后计算使用。我不是在寻找令人难以置信的精确结果，只是一个足够好的估计。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-19T20:44:22.617

如果您正在进行任何类型的重型数值计算，请考虑学习`numpy`. 您的问题本质上是一个带有 numpy 设置的单线性问题：

```
import numpy as np

N   = 10000
pts = np.random.random((N,2))

# Select the points according to your condition
idx = (pts**2).sum(axis=1)  < 1.0
print pts[idx], idx.sum() 
```

给予：

```
[[ 0.61255615  0.44319463]
 [ 0.48214768  0.69960483]
 [ 0.04735956  0.18509277]
 ..., 
 [ 0.37543094  0.2858077 ]
 [ 0.43304577  0.45903071]
 [ 0.30838206  0.45977162]], 7854 
```

最后一个数字是计数的事件数，即半径小于1的点的计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T20:26:22.663

不确定这是否是您正在寻找的，但您可以继续运行并`enumerate`在`range`迭代中获得位置：

```
In [1]: for index, i in enumerate(xrange(10, 15)):
   ...:     print index + 1, i
   ...:
   ...:
1 10
2 11
3 12
4 13
5 14 
```

在这种情况下，`index + 1`将表示正在创建的当前点（`index`其本身将是在给定迭代开始时创建的点的总数）。此外，如果您使用的是 Python 2.x，`xrange`则通常更适合此类迭代，因为它不会将整个列表加载到内存中，而是根据需要访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T20:34:51.503

只需在循环之前添加*hits*变量，将其初始化为 0 并在 if 语句中将 hits 递增*1*。*最后，您可以使用hits*和*n*
计算 PI 值。

 **```
import math
import random
random.seed()

n = 10000
hits = 0  # initialize hits with 0

for i in range(n):
    x = random.random()
    y = random.random()
    z = (x,y)

    if x**2+y**2 <= 1:
        hits += 1
    else:
        del z

# use hits and n to compute PI 
```**

# android - 使用 Android Tools R21 安装旧系统映像

> ID：13461568
> 
> 赞同：6
> 
> 时间：2012-11-19T20:22:46.983
> 
> 标签：android, android-emulator, android-sdk-tools

全新安装 Android 开发工具 r21 后，我感到很困惑。[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

我已经安装了这个，我希望为 Android 2.1 (API 7) 创建一个 AVD 来测试一些东西，但是我找不到安装 Android 2.1 系统映像的选项。事实上，在 Android 4.0 之前没有任何系统映像可用于 AVD。

我已经安装了 SDK 平台，但它不包含系统映像。基于*Official Add-on Sites*，我尝试访问[https://dl-ssl.google.com/android/repository/sys-img.xml](https://dl-ssl.google.com/android/repository/sys-img.xml)但这本质上是一个空的 XML 文件。

我还检查了 ADT 已知问题[http://tools.android.com/knownissues](http://tools.android.com/knownissues)

最后，从[How install old ADT13 in Eclipse我收集了](https://stackoverflow.com/questions/7877361/how-install-old-adt13-in-eclipse)[https://dl-ssl.google.com/android/repository/repository.xml](https://dl-ssl.google.com/android/repository/repository.xml)的可能附加站点，但这也没有将任何内容拉入 SDK 管理器.

有谁知道如何让这个工作？

**Android SDK 管理器** ![在此处输入图像描述](../Images/53ea79e0c9fbff1c5ed53cae9574105e.png)

**Android SDK 管理器 - 附加站点** ![在此处输入图像描述](../Images/78baa0f4b5839f7bec8a9663a59cddcd.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T20:50:57.383

我已经解决了我自己的问题。显然从 Android 开发者工具 R21 开始

*   Android 4.0 及更高版本的系统映像
    *   通过选中Android SDK Manager 中的**ARM EABI v7a System Image框进行安装**
*   早于 Android 4.0 的系统映像
    *   通过选中Android SDK Manager 中的**SDK Platform框进行安装**

这是混乱的根源。

此外，您必须重新启动 Eclipse 以使其成为可用选项，而我没有这样做。

# wpf - WPF TextBox 文本强制

> ID：13461570
> 
> 赞同：2
> 
> 时间：2012-11-19T20:22:52.873
> 
> 标签：wpf, textbox, wpf-controls, dependency-properties, trim

我必须实现 WPF TextBox，它将通过绑定提供修剪后的文本。乍一看，这项任务对我来说相当简单。我决定使用依赖属性值强制。下面我写了我的代码，但这似乎不起作用。我的绑定属性中没有修剪字符串。我究竟做错了什么？也许我应该采取另一种方法？

```
public class MyTextBox : TextBox
{
    static MyTextBox()
    {
        TextProperty.OverrideMetadata(typeof(MyTextBox), new FrameworkPropertyMetadata(string.Empty, null, new CoerceValueCallback(CoerceText)));
    }

    private static object CoerceText(DependencyObject d, object basevalue)
    {
        string s = basevalue as string;
        if(s != null)
        {
            return s.Trim();
        }
        else
        {
            return string.Empty;
        }
    }
} 
```

我在我的应用程序中添加了简单的窗口进行测试。xml:

```
<Window x:Class="TextBoxDemo.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:TextBoxDemo="clr-namespace:TextBoxDemo"
    Title="MainWindow"
    Width="525"
    Height="350">
<Grid>
    <TextBoxDemo:MyTextBox x:Name="textBox1"
                           Width="120"
                           Height="23"
                           Margin="55,73,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="{Binding Text}" />
    <TextBoxDemo:MyTextBox x:Name="textBox2"
                           Width="120"
                           Height="23"
                           Margin="286,184,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="{Binding Text}" />
</Grid>
</Window> 
```

和代码隐藏：

```
public partial class MainWindow : Window
{
    private string _text;

    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
    }

    public string Text
    {
        get { return _text; }
        set
        {
            _text = value;
            MessageBox.Show(string.Format("|{0}|", _text));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:21:02.433

奇怪的是，值强制不适用于绑定。

[该主题](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/c404360c-8e31-4a85-9762-0324ed8812ef/)讨论了相同的问题并提出了一两个解决方法。其中之一是`UpdateTarget()`显式调用 TextBox 的绑定表达式：

```
textBox1.GetBindingExpression(MyTextBox.TextProperty).UpdateTarget(); 
```

# r - NA 在实现虚拟变量以及 R 中的时间趋势变量时产生

> ID：13461571
> 
> 赞同：1
> 
> 时间：2012-11-19T20:22:55.030
> 
> 标签：r, regression, dummy-data, trend

我有一个模型，其中包含 7 年的时间趋势变量（因此 2000=1,2001=2,...,2006=7）以及其中 6 年的虚拟变量（因此每年都有一个二进制变量不包括 2000 年的年份）。当我要求 R 拟合这个线性模型时：

```
olsmodel=lm(lnyield ~ lnx1+ lnx2+ lnx3+ lnx4+ lnx5+ x6+ x7+ x8+ timetrend+ 
                     yeardummy2001+ yeardummy2002+ yeardummy2003+ yeardummy2004+ 
                     yeardummy2005+ yeardummy2006) 
```

我为模型摘要中的最后一个虚拟变量生成了 NA。连同以下“系数：（1 由于奇异性而未定义）”。

我不知道为什么会发生这种情况，因为所有 x_i 变量都是连续的，并且没有虚拟子集和时间趋势是彼此的线性组合。

任何有关为什么会发生这种情况的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:21:50.640

问题是当您将年份趋势设置为`1:n`并且还包括每年的虚拟变量时，它恰好会产生一个非全列秩协变量矩阵：

假设只有 3 个类别：r1、r2、r3，模型是`y ~ trend + c2 + c3`，您将拥有的协变量矩阵是：

```
> mat
     int trend c2 c3
[1,]   1     1  0  0
[2,]   1     1  0  0
[3,]   1     2  1  0
[4,]   1     2  1  0
[5,]   1     3  0  1
[6,]   1     3  0  1 
```

并且您会发现协变量矩阵的列秩`mat`只有 3 而不是您需要估计的系数个数 (4)，即`t(mat)%*%mat`是奇异的。这可能会导致错误。

# delphi - 如何在 FMX 的 TMemo 中显示任意行？

> ID：13461578
> 
> 赞同：0
> 
> 时间：2012-11-19T20:23:11.307
> 
> 标签：delphi, tmemo, firemonkey-fm2

我在 Firemonkey 中将行添加到 TMemo 中，并且我希望添加的行在 TMemo 中显示的行数过多时滚动到视图中。我找不到如何做到这一点。我试过

```
Display.Lines.Add (arg);
Caret.Line := Display.Lines.Count - 1;
Caret.Pos  := 0;
Display.CaretPosition := Caret; 
```

但这并没有帮助。帮助非常有限，所以我不确定我在这里做什么。

**更新**

在尝试受访者的代码时，我注意到我测试了错误的代码示例。对此我深表歉意，我唯一的借口是我编写和测试代码时已接近午夜。上面的代码**确实**有效。我从原始代码中删除了该语句`Display.CaretVisible := True;`，因为这不会影响我想要的行为。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T22:38:59.013

由于您只是通过 附加字符串`Lines.Add()`，因此您可以调用`Display.GoToTextEnd`将其滚动到末尾并显示刚刚附加的行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T22:34:45.093

您可以将 VScrollBar.Value 属性的值设置为其最大值。这将始终滚动 - 或强制滚动条 - 到备忘录 (ScrollBox) 的底部。

例如：

```
Display.VScrollBar.Value := Display.VScrollBar.Max 
```

# kendo-ui - 剑道 UI 网络网格。我可以触发 AfterRowExpanded 事件吗？

> ID：13461581
> 
> 赞同：0
> 
> 时间：2012-11-19T20:23:26.607
> 
> 标签：kendo-ui

在不涉及不必要的细节的情况下，我将尝试解释我遇到的基本问题。我正在评估 Kendo-UI Web 并使用 Grid。

我根据是否扩展了详细信息行的网格来重新调整页面列的大小。

我注意到的行为是每行第一次触发“detailExpand”事件，您可以在我的代码详细运行之前看到 DOM 正在使用新元素进行更新。我猜这实际上只是在运行 detailInit，因为这是第一次扩展行。然而，在那之后，如果我再次展开该行，detailExpand 事件首先运行，然后该行显示。（代码看起来好像只是在做一个 .show().. 这意味着我无法正确计算高度的变化。

与 detailCollapse 相同。事件代码在详细信息行被隐藏之前触发。所以我最终得到了等于细节行大小的额外空间。如果它们总是相同的大小，这不会是一个问题，我可以预测大小并在此基础上减少或增长。事实并非如此。

所以归结为，如果我可以简单地拥有一个 AfterRowExpanded 事件，它会解决所有问题。

我觉得我可以很容易地自定义 kendo ui JS，但是我必须重新最小化 JS 等等。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:31:24.973

对我来说，最新版本似乎在详细信息行完成扩展时触发了 detailExpand，但是在**隐藏详细信息行之前执行了****detailCollapse**。

作为一种解决方法，我建议您在不指定毫秒的情况下借助 setTimeout 减慢逻辑的执行速度（它将在该行实际隐藏/显示后立即执行）

例如

```
$('#grid').data().kendoGrid.bind('detailCollapse',function(e){
    setTimeout(function(){
       //code goes here
    })
}) 
```

# c++ - 如何获取lambda的返回类型，C++ 11中的reduce函数

> ID：13461586
> 
> 赞同：6
> 
> 时间：2012-11-19T20:23:49.550
> 
> 标签：c++, c++11

我正在尝试实现一个 reduce 函数，但我不知道如何获取 lambda 的返回类型：

```
template <typename IT, typename F, typename OT = IT>
auto reducef(const IT& input, F func) -> decltype(func(IT::value_type))
{
    decltype(func(typename IT::value_type)) result = {}; 
    return std::accumulate(input.begin(), input.end(), result, func);
} 
```

编译器输出如下：

```
test.cpp: In function ‘int main(int, char**)’:
test.cpp:37:80: error: no matching function for call to ‘reducef(std::vector<int>&, main(int, char**)::<lambda(const int&, const int&)>)’
test.cpp:37:80: note: candidate is:
test.cpp:22:6: note: template<class IT, class F, class OT> decltype (func(IT:: value_type)) reducef(const IT&, F)
test.cpp:22:6: note:   template argument deduction/substitution failed:
test.cpp: In substitution of ‘template<class IT, class F, class OT> decltype (func(IT:: value_type)) reducef(const IT&, F) [with IT = std::vector<int>; F = main(int, char**)::<lambda(const int&, const int&)>; OT = std::vector<int>]’:
test.cpp:37:80:   required from here
test.cpp:22:6: error: dependent-name ‘IT:: value_type’ is parsed as a non-type, but instantiation yields a type
test.cpp:22:6: note: say ‘typename IT:: value_type’ if a type is meant 
```

扩展用例：

```
template <typename IT, typename F, typename OT = IT>
OT mapf(const IT& input, F func)
{
    OT output;
    output.resize(input.size());
    std::transform(input.begin(), input.end(), output.begin(), func);
    return output;
}

template <typename IT, typename F, typename OT = IT>
auto reducef(const IT& input, F func) -> decltype(func(IT::value_type))
{
    typename IT::value_type result = {};
    return std::accumulate(input.begin(), input.end(), result, func);
}

int main(int argc, char *argv[])
{
    vector<int> v1 = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    auto v2 = mapf(v1, [](const int& i) { return i+1;});
    for (const auto& i : v2)
    {     
        cout << i << endl;  
    }   
    cout << reducef(v1, [](const int& i, const int& j) -> int { return i + j; }) << endl;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T20:34:41.257

我认为您想将返回类型声明为

```
decltype(func(std::declval<typename IT::value_type>(),
              std::declval<typename IT::value_type>())) 
```

这是一个完整的测试用例：

```
#include <algorithm>
#include <utility>
#include <vector>
#include <numeric>

template <typename IT, typename F, typename OT = IT>
auto reducef(const IT& input, F func)
    -> decltype(func(std::declval<typename IT::value_type>(),
                     std::declval<typename IT::value_type>()))
{
    decltype(func(std::declval<typename IT::value_type>(),
                  std::declval<typename IT::value_type>())) result{};
    return std::accumulate(input.begin(), input.end(), result, func);
}

int main()
{
    std::vector<int> values;
    reducef(values, [](int a, int b) { return a + b; });
} 
```

# java - Wicket - 如何通过其流下载文件？

> ID：13461587
> 
> 赞同：2
> 
> 时间：2012-11-19T20:23:55.433
> 
> 标签：java, download, wicket, samba

我有我期望的一项非常常见的任务，但我在任何地方都找不到任何直接的答案，所以这里的任何帮助将不胜感激。

简短版：如何从 SmbFile 的 inputStream 制作 IResourceStream？

长版：在我的 Wicket 应用程序中，我让用户填写问卷，然后在他们正确完成后下载文件。该文件位于 Samba 服务器上，所以我使用的是 SmbFile，它运行良好，所以没有问题。我正在使用由 Sven Meier、Ernesto Barreiro 和 Jordi Deu-Pons 编写的 AJAXDownload，因为我需要我的按钮具有 Ajax 功能来检查表单是否正确填写，然后开始下载。当我开始使用计算机上的文件时，我可以简单地使用

```
final AJAXDownload download = new AJAXDownload()
        {
            @Override
            protected IResourceStream getResourceStream()
            {                   
                IResourceStream resStream = new FileResourceStream(file);

                return resStream;
            }
            @Override
            protected String getFileName() {
                return fileName;
            }
        };
        form.add(download); 
```

但是现在我通过 JCIFS 使用 SmbFile，我不能只创建一个新的 FileResourceStream。我发现我可以使用 java.io.File.createTempFile 从 smbFile 的 inputStream 中创建一个临时文件，然后像这样使用临时文件：

```
protected IResourceStream getResourceStream()
            {                   
                java.io.File tempFile = null;
                try {
                    tempFile = File.createTempFile(smbFile.getName(), smbFile.getContentType());
                } catch (IOException e1) {
                    e1.printStackTrace();
                }
                try {
                    Files.writeTo(tempFile, smbFile.getInputStream());
                } catch (IOException e) {
                    e.printStackTrace();
                }
                IResourceStream resStream = new FileResourceStream(tempFile);
                return resStream;
            } 
```

这适用于小文件，但我也会有一些相当大的文件，因为它会在发送文件之前制作文件的临时副本，所以需要很长时间并且只是糟糕的设计。关于如何在 wicket 应用程序中下载我的 smbFile 的任何想法？

编辑：感谢 Joop Eggen，以及 Kent Ka lok Tong 的“Enjoying Web Development with Wicket”一书，我有以下解决方案，以防其他人遇到类似情况：

```
final AJAXDownload download = new AJAXDownload()
        {
            @Override
            protected IResourceStream getResourceStream()
            {                   
                IResourceStream resStream = new AbstractResourceStream() {
                    InputStream inStream;
                    public InputStream getInputStream() throws ResourceStreamNotFoundException{
                        try {
                            inStream = smbFile.getInputStream();
                        } catch (IOException e) {                               
                            e.printStackTrace();
                        }
                        return inStream;
                    }
                    public void close() throws IOException {
                        inStream.close();
                    }
                    public String getContentType() {
                        return smbFile.getContentType();
                    }
                };
                return resStream;
            }
            @Override
            protected String getFileName() {
                return smbFileName;
            }
        };
        form.add(download); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:20:48.500

[您应该派生一个扩展AbstractResourceStream](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/util/resource/AbstractResourceStreaam.html)的 SmbResourceStream ，并通过覆盖`getInputStream`和实现提供一个 InputStream 以供读取`close`。你已经有了`smbFile.getInputStream()`。

# jquery - 根据下拉列表选择加载 Telerik Grid

> ID：13461588
> 
> 赞同：0
> 
> 时间：2012-11-19T20:23:59.163
> 
> 标签：jquery, asp.net-mvc-3, telerik-mvc

我正在一个有下拉列表的页面上工作。一旦用户做出选择，客户端 Change 事件将根据下拉列表的选择加载 Telerik Grid。我目前遇到的问题是当我尝试加载页面时，我收到以下错误：

你调用的对象是空的。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

源错误：

```
Line 30:         <tr>
Line 31:             <td colspan="2">
Line 32:                 @(Html.Telerik().Grid<ProductModel>(Model.Products.Data)
Line 33:                     .Name("classification-products-grid")
Line 34:                     .Columns(columns => 
```

以下是我的所有代码。如果有人有任何想法，我将不胜感激。谢谢。

模型（ClassificationListModel.cs）

```
public partial class ClassificationListModel : BaseNopModel
{
    public ClassificationListModel()
    {
        Classifications = new List<ClassificationModel>();
    }

    [NopResourceDisplayName("Admin.Reports.Classifications.Classification")]
    public int Classification { get; set; }
    public List<ClassificationModel> Classifications { get; set; }

    public GridModel<ProductModel> Products { get; set; }
}

public partial class ClassificationModel : BaseNopModel
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

查看 (Classifications.cshtml)

```
@model ClassificationListModel
@using Nop.Admin.Models.Reports;
@using Telerik.Web.Mvc.UI;
@{
var gridPageSize = EngineContext.Current.Resolve<Nop.Core.Domain.Common.AdminAreaSettings>().GridPageSize;
ViewBag.Title = @T("Admin.Reports.Classifications").Text;
}
@using (Html.BeginForm())
{
<div class="section-header">
    <div class="title">
        <img src="@Url.Content("~/Administration/Content/images/ico-catalog.png")" alt="" />
        @T("Admin.Reports.Classifications")
    </div>
</div>

<table width="100%">
    <tr>
        <td class="adminTitle">
            @Html.NopLabelFor(model => model.Classification)
        </td>
        <td class="adminData">
            @Html.DropDownListFor(model => model.Classification, new SelectList(Model.Classifications, "Id", "Name"), "Select a Classification")
        </td>
    </tr>
    <tr>
        <td colspan="2">
        </td>
    </tr>
    <tr>
        <td colspan="2">
            @(Html.Telerik().Grid<ProductModel>(Model.Products.Data)
                .Name("classification-products-grid")
                .Columns(columns =>
                {
                    columns.Bound(x => x.Id)
                        .ReadOnly(true)
                        .Visible(false);
                    columns.Bound(x => x.Name);
                    columns.Bound(x => x.Published)
                        .Width(100)
                        .Template(x => x.Published.ToString().ToLower())
                        .Centered();
                })
                .Pageable(settings => settings.Total(Model.Products.Total).PageSize(gridPageSize).Position(GridPagerPosition.Both))
                .ClientEvents(events => events.OnDataBinding("onDataBinding"))
                .DataBinding(dataBinding => dataBinding.Ajax().Select("ProductList", "Reports"))
                .EnableCustomBinding(true))
        </td>
    </tr>
</table>

<script type="text/javascript">
    $(document).ready(function () {
        $("#Classification").change(function () {
            $("#classification-products-grid").data("tGrid").rebind();
        });
    });

    function onDataBinding(e) {
        var specificationOptionId = $("#Classification").data("tDropDownList").value();

        if (specificationOptionId != 0)
            e.data = $.extend(e.data, {
                specificationOptionId: $("#Classification").data("tDropDownList").value()
            });
    }
</script>
} 
```

控制器 (ReportsController.cs)

```
[AdminAuthorize]
public class ReportsController : BaseNopController
{
    #region Fields
    private readonly IPermissionService _permissionService;
    private readonly IProductService _productService;
    private readonly ISpecificationAttributeService _specificationAttributeService;
    private readonly IWorkContext _workContext;
    #endregion

    #region Constructor
    public ReportsController(IPermissionService permissionService, IProductService productService,
        ISpecificationAttributeService specificationAttributeService, IWorkContext workContext)
    {
        this._permissionService = permissionService;
        this._productService = productService;
        this._specificationAttributeService = specificationAttributeService;
        this._workContext = workContext;
    }
    #endregion

    #region Utilities
    [NonAction]
    private List<ClassificationModel> PrepareClassificationListModel(IList<SpecificationAttributeOption> specificationAttributeOptions)
    {
        var returnData = new List<ClassificationModel>();

        foreach (var specificationAttributeOption in specificationAttributeOptions)
        {
            var classification = new ClassificationModel
            {
                Id = specificationAttributeOption.Id,
                Name = specificationAttributeOption.Name
            };
            returnData.Add(classification);
        }

        return returnData;
    }
    #endregion

    #region Methods
    #region Classifications
    public ActionResult Index()
    {
        return RedirectToAction("Classifications");
    }

    public ActionResult Classifications()
    {
        var classificationListModel = new ClassificationListModel();
        var specificationAttributeOptions = _specificationAttributeService.GetSpecificationAttributeOptionsBySpecificationAttribute(5);
        var classifications = PrepareClassificationListModel(specificationAttributeOptions);
        classificationListModel.Classifications = classifications;
        return View(classificationListModel);
    }

    [HttpPost, GridAction(EnableCustomBinding = true)]
    public ActionResult ProductList(GridCommand command, int specificationOptionId)
    {
        if (!_permissionService.Authorize(StandardPermissionProvider.ManageReports))
            return AccessDeniedView();

        if (specificationOptionId == 0)
            return View();

        var gridModel = new GridModel();
        IList<int> filterableSpecificationAttributeOptionIds = new List<int> { specificationOptionId };
        var products = _productService.SearchProducts(0, 0, null, null, null, 0, null, false,
                _workContext.WorkingLanguage.Id, null,
                ProductSortingEnum.Position, command.Page, command.PageSize,
                true, out filterableSpecificationAttributeOptionIds);

        gridModel.Data = products.Select(x =>
        {
            var productModel = x.ToModel();
            return productModel;
        });
        gridModel.Total = products.TotalCount;

        return new JsonResult
        {
            Data = gridModel
        };
    }
    #endregion
    #endregion
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T15:17:06.563

好的，所以我找到了答案。这是指向具有它的主题的链接：

[解决方案](https://stackoverflow.com/questions/10738901/telerik-mvc-grid-populate-on-demand/10740899#10740899)

这也是我的更改。

查看 (Classifications.cshtml)

```
@model ClassificationListModel
@using Nop.Admin.Models.Reports;
@using Telerik.Web.Mvc.UI;
@{
var gridPageSize = EngineContext.Current.Resolve<Nop.Core.Domain.Common.AdminAreaSettings>().GridPageSize;
ViewBag.Title = @T("Admin.Reports.Classifications").Text;
}
@using (Html.BeginForm())
{
<div class="section-header">
    <div class="title">
        <img src="@Url.Content("~/Administration/Content/images/ico-catalog.png")" alt="" />
        @T("Admin.Reports.Classifications")
    </div>
</div>

<table width="100%">
    <tr>
        <td class="adminTitle">
            @Html.NopLabelFor(model => model.Classification):
        </td>
        <td class="adminData">
            @Html.DropDownListFor(model => model.Classification, new SelectList(Model.Classifications, "Id", "Name"), "Select a Classification")
        </td>
    </tr>
    <tr>
        <td colspan="2">
        </td>
    </tr>
    <tr>
        <td colspan="2">
            <div id="divGrid" style="display:none">
                @(Html.Telerik().Grid<ProductModel>(Model.Products.Data)
                    .Name("classification-products-grid")
                    .Columns(columns =>
                    {
                        columns.Bound(x => x.Id)
                            .ReadOnly(true)
                            .Visible(false);
                        columns.Bound(x => x.Name);
                        columns.Bound(x => x.Published)
                            .Width(100)
                            .Template(x => x.Published.ToString().ToLower())
                            .Centered();
                    })
                    .Pageable(settings => settings.Total(Model.Products.Total).PageSize(gridPageSize).Position(GridPagerPosition.Both))
                    .ClientEvents(events => events.OnDataBinding("onDataBinding"))
                    .DataBinding(dataBinding => dataBinding.Ajax().Select("ProductList", "Reports"))
                    .EnableCustomBinding(true))
                </div>
        </td>
    </tr>
</table>

<script type="text/javascript">
    var initialLoad = true;

    $("#Classification").change(function () {
        $("#divGrid").show();            
        $("#classification-products-grid").data("tGrid").rebind();
    });

    function onDataBinding(e) {
        if (initialLoad == true) {
            e.preventDefault();
            initialLoad = false;
        }
        else {
            var classificationId = $('#@Html.FieldIdFor(model => model.Classification)').val();
            if (classificationId != "")
                e.data = $.extend(e.data, {
                    specificationOptionId: classificationId
                });
            else {
                e.preventDefault();
                $("#divGrid").hide();
            }
        }

    }
</script>
} 
```

# windows-8 - Windows8 和 IE10 是否支持 HTA 应用程序？

> ID：13461589
> 
> 赞同：3
> 
> 时间：2012-11-19T20:24:12.723
> 
> 标签：windows-8, hta, internet-explorer-10

我们正在使用许多 HTA 脚本。为了测试较新版本的 Windows，我们使用 IE 10 安装了 Windows8。我们目前正在使用应用程序 (.exe) 作为集线器来启动需要运行的正确 hta。

我们在 2000、XP、Vista、7 机器上使用这个设置，IE 范围从 6 到 9，到目前为止它运行良好。但是该应用程序已停止在最新的 Windows 上运行。

这是我的问题：Windows 8 和 IE10 下的另一个应用程序调用的 HTA 是否存在已知问题？

这是一个包含两个 HTA 脚本的示例：

如果您运行 test_2.hta 脚本可以工作，如果您运行脚本 test_1 脚本可以工作，但 test_2.hta 不会启动。

1- test_1.hta

```
 <html>
       <head>
          <title> Test </title>
       </head>
       <script>
          new ActiveXObject("WScript.Shell").Run("mshta test_2.hta", 1, false);
      </script>
      <body>
         Allo buddy
      </body>
    </html> 
```

2- test_2.hta

```
 <html>
       <head>
          <title> Test </title>
       </head>
       <script>
          alert('Hello world');
      </script>
      <body>
         Allo buddy
      </body>
    </html> 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:24:37.310

这个样本对我来说很好。我删除了“mshta”。使用 cmd.exe 命令“启动”时，您不需要包含应用程序，只需包含文档文件并将使用文件关联 (.hta) 启动正确的应用程序 (iexplore/mshta)。在这种情况下似乎有效。

```
<html>
    <head>
        <title> Test </title>
    </head>
    <script>
        new ActiveXObject("WScript.Shell").Run("hardware.hta", 1, false);
    </script>
    <body>
        <p>Allo buddy</p>
        <p><a href=http://www.robvanderwoude.com/htaexamples.php>The only good HTA samples.</a></p>
    </body>
</html> 
```

# windows - Windows XP 注册表：我正在寻找 Screensaver.slideshow 但它似乎不见了

> ID：13461599
> 
> 赞同：0
> 
> 时间：2012-11-19T20:25:07.887
> 
> 标签：windows, registry, key, settings, screensaver

我正在尝试以编程方式更改屏幕保护程序幻灯片查找图片的路径。它应该在注册表路径`HKCU\Control Panel\Screensaver.slideshow`中。虽然`Screensaver.slideshow`文件夹不存在。我已经在多台计算机上检查了这一点，但我在谷歌的任何地方都说这应该是路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T22:20:07.153

该密钥最初不存在。它是在您更改任何幻灯片设置后创建的。

# c# - 如何在我的类中创建一个二维数组，将名称和价格存储为 C# 中的字符串？

> ID：13461603
> 
> 赞同：-2
> 
> 时间：2012-11-19T20:25:29.310
> 
> 标签：c#, class, multidimensional-array

如何在我的类中创建一个将名称和价格存储为字符串的二维数组？以及如何在不使用对象的情况下从我的表单中访问它？到目前为止，我的课堂上有以下内容。

```
class Name
{
    public string SpecialCakeName()
    {
        string[,] strSpecialCakeName = new string[4, 2];

        strSpecialCakeName[0, 0] = " ";
        strSpecialCakeName[0, 1] = " ";
        strSpecialCakeName[1, 0] = " ";
        strSpecialCakeName[1, 1] = " ";
        strSpecialCakeName[2, 0] = " ";
        strSpecialCakeName[2, 1] = " ";
        strSpecialCakeName[3, 0] = " ";
        strSpecialCakeName[3, 1] = " ";

        return strSpecialCakeName[0,0];
    }
} 
```

但是，我不知道这甚至是正确的方法。另外，如果不使用“Name cakeName = new Name();”之类的东西，我怎么能访问这个数组？以我的形式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:33:37.627

我建议使用**[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)**对象。使用字符串存储价格信息是个坏主意。Dictionary<string,decimal> 将允许您将字符串蛋糕名称映射到十进制价格，而无需定义整个自定义对象（虽然，实际上，这可能是您需要的）。

要在不需要类实例的情况下访问字典，请像这样构建它：

```
public class Names
{
    private static Dictionary<string, decimal> _specialCakes = new Dictionary<string,decimal>{
                {"Cake 1", 1.00m},
                {"Cake 2", 2.50m},
                {"Cake 3", 4.00m}
          };

    public static Dictionary<string, decimal> SpecialCakes {
           get {return _specialCakes;}
    }
} 
```

现在您可以查找这样的价格：

```
decimal Cake1Price = Names.SpecialCakes["Cake 1"]; 
```

或者循环遍历所有蛋糕名称的列表，如下所示：

```
foreach(string name in Names.SpecialCakes.Keys)
{
    //and within the loop reference a price for that cake like this:
    decimal currentPrice = Names.SpecialCakes[name];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:35:14.017

使其静态：

```
public static string SpecialCakeName()
{
...
} 
```

然后你可以使用类类型调用它：

```
string[,] names = Name.SpecialCakeName(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:33:44.733

请改用字典。

```
Dictionary<string, decimal> strSpecialCakeName = new Dictionary<string, decimal>();
strSpecialCakeName.Add({"somename", 100/*some decimal price*/}); 
```

# ruby-on-rails - cat ~/.gemrc 导致“没有这样的文件或目录”

> ID：13461604
> 
> 赞同：3
> 
> 时间：2012-11-19T20:25:31.220
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem, rvm

我刚刚在一台全新的 MacBook Pro 机器上完成了 Xcode、Homebrew、git、RVM 和 Ruby 的安装（遵循本[指南](http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/)）。接下来我想做的是安装 Rails（按照本[指南](http://railsapps.github.com/installing-rails.html#gems)），但 cat ~/.gemrc 只给我一个“没有这样的文件或目录”。关于我可能没有正确完成的任何想法？有没有办法可以手动创建这个文件 - 是否建议这样做？

**编辑：**

```
gem environment 
```

给出这个输出

```
RubyGems Environment:
- RUBYGEMS VERSION: 1.8.24
- RUBY VERSION: 1.9.3 (2012-11-10 patchlevel 327) [x86_64-darwin12.2.0]
- INSTALLATION DIRECTORY: /Users/sebkomianos/.rvm/gems/ruby-1.9.3-p327
- RUBY EXECUTABLE: /Users/sebkomianos/.rvm/rubies/ruby-1.9.3-p327/bin/ruby
- EXECUTABLE DIRECTORY: /Users/sebkomianos/.rvm/gems/ruby-1.9.3-p327/bin
- RUBYGEMS PLATFORMS:
  - ruby
  - x86_64-darwin-12
- GEM PATHS:
   - /Users/sebkomianos/.rvm/gems/ruby-1.9.3-p327
   - /Users/sebkomianos/.rvm/gems/ruby-1.9.3-p327@global
- GEM CONFIGURATION:
   - :update_sources => true
   - :verbose => true
   - :benchmark => false
   - :backtrace => false
   - :bulk_threshold => 1000
- REMOTE SOURCES:
   - http://rubygems.org/ 
```

所以我猜配置文件存在某处，我只需要添加

```
install: --no-rdoc --no-ri
update: --no-rdoc --no-ri 
```

为此，我避免在每个 gem 安装中使用 rdoc 和 ri。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T20:37:15.630

没有 ~/.gemrc 因为你还没有修改任何默认值。

例如，如果您使用以下命令添加 RubyGems 源：

```
gem sources -a https://rubygems.org 
```

您会发现自动创建的 ~/.gemrc 文件。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-19T20:39:53.433

复制粘贴以下命令：

```
$ echo "gem: --no-rdoc --no-ri" >> ~/.gemrc 
```

这将做你想做的事

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T20:35:36.143

你必须自己生成这个文件：所有“~/.*rc”文件都是用户生成的。它们的目的是在其中放置适合您特殊需求的配置。在任何标准配置文件之前首先使用它们

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T20:32:40.193

检查`/etc/gemrc`，它也可能在那里。

您对本地所做的任何更改都`~/.gemrc`将优先考虑

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T20:37:03.603

我认为您需要将这两行添加到用户主目录中`install:...`调用`update:...`的文件中。`.gemrc`如果该`.gemrc`文件不存在，请创建它。

# android - 在android中加载图像而不从服务器裁剪？

> ID：13461606
> 
> 赞同：1
> 
> 时间：2012-11-19T20:25:41.030
> 
> 标签：android, android-imageview, android-image

我正在开发一个加载大量图像的应用程序。有像 facebook 这样的人的图像，可能需要 30% 的屏幕尺寸高度和全宽。

Imageview 中的包装内容不显示完整的图像宽度。如果我在 imageview 中将比例类型设置为 fitxy，则图像会被拉伸，并且 centercrop 不能解决问题。我想从服务器中获取图像而不进行裁剪，例如 facebooks 帖子。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:59:59.187

如果您希望它自动调整大小以保留图像的形状，您可以将 ImageView 的`android:adjustViewBounds`属性设置为。`true`您还可以使用`android:maxHeight`和指定最大宽度和高度`android:maxWidth`。结合这三者，您可以在不裁剪和拉伸的情况下显示您的图像，并将其限制在适合您的 UI 的屏幕区域。

# actionscript-3 - Flash DataGrid - 排序箭头始终可见

> ID：13461607
> 
> 赞同：1
> 
> 时间：2012-11-19T20:25:41.620
> 
> 标签：actionscript-3, flash, sorting, datagrid

我想设置我的 DataGrid，以便排序箭头始终位于标题上，而不仅仅是在您单击一个时。

至少我想强制一列开始排序并让箭头显示在该列上。要点是让用户知道这些列可以通过这些箭头进行排序（对于那些还不明显的人，不包括我）。

谢谢！将要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:57:22.323

恐怕您只能在当前用于对数据网格进行排序的列上显示一个箭头。要强制箭头显示在一列上而无需单击，您可以在创建数据网格后使用`creationComplete`事件回调按一列默认列对数据网格进行排序。

创建默认排序的代码类似于（内部`mx:script`标签）：

```
import mx.collections.Sort;
import mx.collections.SortField;

private function init():void
{
  dataProvider.sort = new Sort();
  dataProvider.sort.fields = [new SortField("field_to_sort_on", false, true)];
  dataProvider.refresh();
} 
```

您可以在此处查看一个工作示例：[在 Flex 数据网格控件中显示排序箭头，而无需单击](http://blog.flexexamples.com/2008/02/28/displaying-the-sort-arrow-in-a-flex-datagrid-control-without-having-to-click-a-column/)[Flex 示例博客](http://blog.flexexamples.com/)上的列，这是学习 Flex 的一个很好的资源。希望这可以帮助！

# facebook - FQL 类似表返回未记录的对象类型

> ID：13461608
> 
> 赞同：2
> 
> 时间：2012-11-19T20:25:47.583
> 
> 标签：facebook, web-applications, facebook-fql

嘿，我正在为我拥有的 facebook 应用程序想法使用 FQL api，似乎 like 表没有返回记录的对象类型，这是我喜欢的输出

```
SELECT object_id, post_id, object_type FROM like WHERE user_id = me()

{
  "data": [
    {
      "object_id": "10151258431583394",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 478582878859930,
      "post_id": "",
      "object_type": "list"
    },
    {
      "object_id": 521644514513038,
      "post_id": "",
      "object_type": "list"
    },
    {
      "object_id": 106925839472986,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10101021654513450",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10101017009447200",
      "post_id": "",
      "object_type": "photo"
    },
    {
      "object_id": "10151245338443394",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 162988417181213,
      "post_id": "",
      "object_type": "list"
    },
    {
      "object_id": 439293976134330,
      "post_id": "",
      "object_type": "list"
    },
    {
      "object_id": 440364829332399,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151229280723394",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 489203737786963,
      "post_id": "",
      "object_type": "list"
    },
    {
      "object_id": "10152125564767619",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151113526476775",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151113525441775",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151113524916775",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151113523716775",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 123390361144776,
      "post_id": "",
      "object_type": "list"
    },
    {
      "object_id": "10151199315428394",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 278542695598345,
      "post_id": "",
      "object_type": "list"
    },
    {
      "object_id": 425466477503260,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 531362840223562,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 531362946890218,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 517081921654425,
      "post_id": "",
      "object_type": "list"
    },
    {
      "object_id": "10151184643108394",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 285512984897612,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 284572424991668,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10152126582670161",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151172644678394",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10100959925933020",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 170144483122267,
      "post_id": "",
      "object_type": "list"
    },
    {
      "object_id": "10152100222280161",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335741896516584,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151216733207457",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10150966158886775",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 357351974342058,
      "post_id": "",
      "object_type": "list"
    },
    {
      "object_id": "10152073370825161",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 337226756372190,
      "post_id": "",
      "object_type": "list"
    },
    {
      "object_id": "10151044156886775",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 122273294554916,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10152061553435161",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151149031423896",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10152074656495188",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335744249849682,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335744153183025,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335743509849756,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335743463183094,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335743403183100,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335743376516436,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335743259849781,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335743139849793,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335742603183180,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335742569849850,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335742419849865,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335742323183208,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335742226516551,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335742213183219,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335742169849890,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 335742033183237,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10101326761860672",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151035255316775",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10152047005670511",
      "post_id": "",
      "object_type": "photo"
    },
    {
      "object_id": "10151194367147619",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151111702663394",
      "post_id": "",
      "object_type": "photo"
    },
    {
      "object_id": 732497948354,
      "post_id": "",
      "object_type": "photo"
    },
    {
      "object_id": "10152002641675161",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 390781734321391,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151012309836775",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151185665687317",
      "post_id": "",
      "object_type": "photo"
    },
    {
      "object_id": "10152014894905188",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151161548307619",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151161549777619",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151161552387619",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151118986026775",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": 191434787659630,
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151003723472163",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10100932691640760",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10100253964691241",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10100253951333011",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151163103492619",
      "post_id": "",
      "object_type": "profile"
    },
    {
      "object_id": "10151161573682619",
      "post_id": "",
      "object_type": "profile"
    }
  ]
} 
```

如您所见，大多数对象类型是配置文件或列表，当查询大多数配置文件对象类型时，我会收到“不支持的获取请求”。例外。

如何检索有关这些对象的更多信息？为什么没有照片、相册、事件、群组、笔记、链接、视频、应用、状态、签到、评论、评论、帖子类型？

这似乎没有按预期工作或功能已更改，但文档尚未更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:08:08.027

几种方法。

您可以发出后续查询以获取有关每个喜欢的对象的更多信息。例如：

```
select src_big from photo where object_id="10151287927181749" 
```

**但是**，我更喜欢使用 Graph API 及其“字段扩展”来跟踪连接并在一个查询中获取有关连接对象的数据。例如：

[https://graph.facebook.com/me?fields=likes.fields（链接，喜欢，封面）](https://graph.facebook.com/me?fields=likes.fields(link,likes,cover))

[https://graph.facebook.com/USER_ID?fields=likes.fields（链接，喜欢，封面）](https://graph.facebook.com/USER_ID?fields=likes.fields(link,likes,cover))

[使用资源管理器进行演示](https://developers.facebook.com/tools/explorer?method=GET&path=me%3Ffields%3Dlikes.fields%28link%2Clikes%2Ccover%29)

此查询获取当前用户的所有点赞**并返回链接、点赞数和***每个点赞对象的*封面图片 url 。

请参阅字段扩展文档以构建遵循连接的查询并返回连接对象的字段：

[https://developers.facebook.com/docs/reference/api/field_expansion/](https://developers.facebook.com/docs/reference/api/field_expansion/)

# android - 当 webview 有 webviewclient 时，Activity 被销毁

> ID：13461609
> 
> 赞同：0
> 
> 时间：2012-11-19T20:25:49.560
> 
> 标签：android, android-activity, webview, webviewclient

这是我的代码：

```
public class AuthActivity extends Activity {
public static final String REDIRECT_URL = "redirectUrl";
WebView webview;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    webview = new WebView(this);
    setContentView(webview);

    webview.setWebViewClient(new WebViewClient() {

        @Override
        public void onPageFinished(WebView view, String url) {
            parseUrl(url);
            super.onPageFinished(view, url);
        }
        @Override
        public void onReceivedError(WebView view, int errorCode,
                String description, String failingUrl) {
            Toast.makeText(getApplicationContext(), description, Toast.LENGTH_LONG).show();
            super.onReceivedError(view, errorCode, description, failingUrl);
        }
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            return true;
        }
    });
    webview.clearCache(true);
    webview.clearHistory();
    webview.getSettings().setJavaScriptEnabled(true);
    webview.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    CookieSyncManager.createInstance(this);
    CookieManager cookieManager = CookieManager.getInstance();
    cookieManager.removeAllCookie();

    String url = VKPoster.getAuthUrl( );
    webview.loadUrl(url);
}

private void parseUrl(String url) {
    try {
        if(url==null)
            return;
        if(!url.contains("error=")){
            Intent intent=new Intent();
            intent.putExtra(REDIRECT_URL, url);
            setResult(Activity.RESULT_OK, intent);
        }
        finish();
    } catch (Exception e) {
        e.printStackTrace();
    }
}
} 
```

当活动开始加载没有 webviewclient 的页面时，它会停止运行，但是当设置 webviewclient 时它工作得很好。

谁能向我解释这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:28:56.277

问题出在这段代码中（当我发布问题时，我已经看到了。这绝对令人震惊）

```
private void parseUrl(String url) {
try {
    if(url==null)
        return;
    if(!url.contains("error=")){
        Intent intent=new Intent();
        intent.putExtra(REDIRECT_URL, url);
        setResult(Activity.RESULT_OK, intent);
    }
    /* I finished app every time page loaded! What a shame */
    finish();
} catch (Exception e) {
    e.printStackTrace();
} 
```

}

# ios - Phonegap Build - iOS 6 (iPhone 5) 中的 Media.play 音频文件仅在耳机上播放

> ID：13461611
> 
> 赞同：2
> 
> 时间：2012-11-19T20:25:51.337
> 
> 标签：ios, cordova, html5-audio

我正在使用 Phonegap Media api，但事情进展并不顺利。即使我最简单的尝试也失败了，例如：

新媒体(src).play();

有趣的是，插入耳机后音频可以正常工作，但我无法从手机扬声器中听到声音。

我正在使用带有 phonegap 2.1.0 的 phonegap build 并在 iPhone 5 上的 iOS 6.0.1 上进行测试。

经过非常详尽的搜索（我什至尝试过 Bing）后，我切换到了 html5 音频，但延迟真的很糟糕。

有什么建议么？我已经阅读了一些有关设置音频会话的内容？但是在 PG build API 文档中找不到这个，并且这些示例似乎在 xcode 上使用 phonegap 而不是 PGBuild。

提前致谢。

# paypal - 最新的“旧版”PayPal SDK，无法下载了吗？

> ID：13461612
> 
> 赞同：0
> 
> 时间：2012-11-19T20:25:56.897
> 
> 标签：paypal

现在，如果您想针对 PayPal 平台进行开发，唯一的方法是从这里下载 SDK [https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)（当然，您总是可以按照 NVP 协议发送原始 HTTPS 请求）。

之前还可以下载“本机”PayPal SDK（x.com 网站上的所有示例仍然使用“旧版”PayPal SDK）。实际上，您仍然可以从与上述相同的下载页面下载“本机”API，但它们仅来自 2012 年 2 月，而新 API 是自动生成的并且有点冗长。

因此，每当您想为 PayPal 平台开发任何东西时，您都必须使用新的 API。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:44:11.493

我一直更喜欢使用[我自己的类库](http://www.angelleye.com/overview-of-php-class-library-for-paypal/)，但那是 PHP 特有的。它使集成几乎所有服务变得非常简单，并且定期维护。

如果您正在处理其他事情，我可能会建议您构建自己的类来处理事情。您甚至可能最终会从他们的 SDK 中提取一些功能，但您可以将其设置为最适合您的方式。

他们的 SDK 的唯一问题是他们是一家大公司，当需要修复/更新事情时，他们有时可能需要几个月的时间才能完成。如果您使用自己的方法，您可以在几分钟内完成。

他们为使用 SOAP 提供了一个 WSDL，或者您也可以构建 NVP 请求并直接使用他们的东西。

# java - 使用 txt 文件填充 jTable

> ID：13461614
> 
> 赞同：1
> 
> 时间：2012-11-19T20:26:04.680
> 
> 标签：java, swing, file, jtable, tablemodel

谢谢阅读。我有一个问题，我似乎找不到使用 .txt 文件中的数据填充 jTable 的方法。

我正在使用 Netbeans 的 GUI 构建器。不承认 insertRow、addRow...等方法。在对谷歌进行了一些研究之后，我尝试使用模型，但这似乎也不起作用。或者也许我没有做对。

最后，我发现了一些东西：

```
public class InsertFileDataToJTable extends AbstractTableModel {
Vector data;
Vector columns;

public InsertFileDataToJTable() {
        String line;
        data = new Vector();
        columns = new Vector();
        try {
                FileInputStream fis = new FileInputStream("monfichier.txt");
                BufferedReader br = new BufferedReader(new InputStreamReader(fis));
                StringTokenizer st1 = new StringTokenizer(br.readLine(), " ");
                while (st1.hasMoreTokens())
                        columns.addElement(st1.nextToken());
                while ((line = br.readLine()) != null) {
                        StringTokenizer st2 = new StringTokenizer(line, " ");
                        while (st2.hasMoreTokens())
                                data.addElement(st2.nextToken());
                }
                br.close();
        } catch (Exception e) {
                e.printStackTrace();
        }
}

public int getRowCount() {
        return data.size() / getColumnCount();
}

public int getColumnCount() {
        return columns.size();
}

public Object getValueAt(int rowIndex, int columnIndex) {
        return (String) data.elementAt((rowIndex * getColumnCount())
                        + columnIndex);
} 
```

这就是我得到的：i.imgur.com/7xqUD.jpg

现在唯一困扰我的是列的名称，我该如何更改它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:40:46.777

包括一个 getColumnName 函数...

```
public String getColumnName(int col) 
```

它将被称为传递列号。基于此返回列名。要么创建一个列名数组和“return columnName[col]”，要么有一个基于 col 的 case 语句，等等。

有关您可以做的所有事情的更多详细信息，请参阅 AbstractTableModel 的 Javadocs。

# python - Python日期格式问题

> ID：13461616
> 
> 赞同：0
> 
> 时间：2012-11-19T20:26:10.063
> 
> 标签：python, django, datetime, unicode, xml-rpc

我正在尝试格式化从 XmlRPC API 收到的 Datetime 对象。日期格式如下`(u'20121106T10:23:24')`。我试过这样做：

```
s = datetime.strptime(u'20121106T10:23:24', "%Y%m%dT%H:%M:%S")
usedate = s.strftime('%Y-%m-%d') 
```

我得到这个例外：

```
time data "DateTime '20121106T10:23:24' at b556886c" does not match format '%Y%m%dT%H:%M:%S' 
```

我希望字符串采用某种`YYYY-MM-DD`格式。任何帮助将不胜感激。多谢你们。

**编辑：**共享确切错误：

```
ValueError at /idea/

time data "DateTime '20121106T10:23:24' at b556886c" does not match format '%Y%m%dT%H:%M:%S'
Exception Type: ValueError
Exception Value:    

time data "DateTime '20121106T10:23:24' at b556886c" does not match format '%Y%m%dT%H:%M:%S' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:02:21.610

我的愚蠢错误。我正在调用 repr 而不是 str 并且这些方法没有返回相同的内容。我的印象是 datetime repr 将等于 str。

# google-bigquery - 如何查看公共数据集？

> ID：13461619
> 
> 赞同：5
> 
> 时间：2012-11-19T20:26:17.987
> 
> 标签：google-bigquery, dataset

我正在尝试按照 GitHub 网站上的说明查看 GitHub 公共数据集。那里的说明说“添加项目名称 githubarchive，但是在 BigQuery 网站上我看不到添加项目的方法。我确定我只是没有正确注册或类似的事情，但我不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-05T12:58:04.880

去

[https://bigquery.cloud.google.com/](https://bigquery.cloud.google.com/)

并使用给定的默认名称设置一个新项目（不要使用 githubarchive）

刷新后跳转到这个新项目，在左侧会看到公共项目：

![在此处输入图像描述](../Images/2f3eacd6cfd5c5588471172c286559fb.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T00:10:11.140

如果您还没有[注册 Google BigQuery](https://developers.google.com/bigquery/docs/getting-started) ，您首先要注册。

然后，查看[BigQuery 浏览器工具快速入门](https://developers.google.com/bigquery/docs/hello_bigquery_gui)，它将引导您完成使用 Web 界面对公共 BigQuery 数据集运行查询的过程。

请注意，每个开发者项目每月都会获得 100Gb 的免费查询处理配额。BigQuery 的`publicdata:samples`表还包括完整 GitHub 存档项目数据的一部分，这是一个较小的数据集。

# php - 将页面添加到 WP 仪表板

> ID：13461622
> 
> 赞同：1
> 
> 时间：2012-11-19T20:26:36.997
> 
> 标签：php, wordpress, rewrite

将新页面添加到 wordpress 仪表板的正确方法是什么。不像创建仪表板页面，而是根据需要制作任意页面以在灯箱等中使用。

例如，我需要查询服务器以获取我正在开发的插件的“电子邮件预览”。如何创建将运行该特定脚本的 URL？

我想 URL 会像 /wp-admin/index.php?page=my_plugin_email_preview

我需要哪些功能才能开始使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:30:29.897

至少：

```
add_menu_page();
add_submenu_page(); 
```

# ruby - 使用 define_method 并遵循 ruby 文档

> ID：13461624
> 
> 赞同：2
> 
> 时间：2012-11-19T20:26:45.363
> 
> 标签：ruby, metaprogramming

尽管进行了多次尝试，但我无法使用 define_method() 创建方法并提供方法。

如果我了解可以在此处找到的 Module 类的文档[http://www.ruby-doc.org/core-1.9.3/Module.html](http://www.ruby-doc.org/core-1.9.3/Module.html)我应该能够执行以下任一操作：

定义方法（符号，方法）→ 新方法

定义方法（符号）{块}→过程

我可以使用 define_method(symbol) { block } 但是我收到的似乎是一种方法（不是我链接到的文档中概述的过程）：

```
class M
  define_method(:hello) { puts "Hello World!"}
end

M.new.hello 
```

我在这里担心的两个问题是： 1\. 执行上述操作我似乎没有收到 proc，尽管文档清楚地说明这是我会得到的。2.我不知道如何为“define_method(symbol, method) → new_method”提供方法，我尝试谷歌搜索无济于事，不知道如何使用这种形式的define_method。

如果有人可以请对此有所了解，将不胜感激！：） 非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:35:32.483

`define_method`确实返回 a`Proc`或 a`Method`取决于使用情况。

在第一种情况下，`Proc`返回 a：

```
class Test
  x = define_method :test_method { nil }
  puts x.inspect
end

Test.new.test_method 
```

在控制台输出上运行上述内容：

```
#<Proc:0x007fe12104e228@test.rb:3 (lambda)> 
```

* * *

第二种情况返回一个`UnboundMethod`，它是 的类型`Method`：

```
class Test2 < Test
  y = define_method :test_method2, Test.instance_method(:test_method)
  puts y.inspect
end

Test2.new.test_method2 
```

以上输出

```
#<UnboundMethod: Test#test_method> 
```

这是一个非常人为的例子，在这种情况下定义一个传递给的方法`define_method`并不是很有用，我也想不出它会是什么情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T12:57:43.853

您可以通过在类中定义一个方法来做到这一点，如下所示：

```
class TestClass
  def a_method
  end
  # Store the method in a class variable; define_method is a Module 
  # method and needs to be called from within this context
  @@x = define_method(:another_method, TestClass.new.method(:a_method))
  def x
    @@x
  end

  # And to get a block...
  @@y = define_method(:yet_another_method) {}
  def y
    @@y
  end
end 
```

调用该`x`方法你会得到这样的东西：

```
TestClass.new.x
#<Method: TestClass#a_method> 
```

而调用该`y`方法你会得到这样的东西：

```
TestClass.new.y
#<Proc:0x00000000aebc30@(irb):75 (lambda)> 
```

* * *

这里棘手的部分是你需要一个来自你正在执行的同一个类（或超类）的对象的方法`define_method`，否则它不起作用。例如，如果您替换该`@@x`行：

```
...
@@x = define_method(:another_method, String.new.method(:gsub))
... 
```

由于不是 的子类，`TypeError`因此获得以下内容：`TestClass``String`

```
TypeError: bind argument must be a subclass of String 
```

请注意，这*将*起作用：

```
...
@@x = define_method(:another_method, Object.new.method(:object_id))
... 
```

输出与此类似：

```
TestClass.new.x
#<Method: Object(Kernel)#object_id> 
```

* * *

我假设需要来自同一类层次结构的方法的原因是强制执行 OO 代码封装和隐私（否则您可以通过传递另一个类的方法来访问私有方法和变量）。

# android - 在 Android 4.x API 级别 14 中，可以设置 Action Bar Tab 宽度吗？

> ID：13461626
> 
> 赞同：2
> 
> 时间：2012-11-19T20:26:48.763
> 
> 标签：android, tabs, width, android-actionbar

我使用 tab.setIcon 为每个选项卡设置了图像，并为我的选项卡创建了自定义样式，但是如何使它们的宽度更窄？目前，它们比他们设置使用的图像更宽，并且还滚动，因为它们对于屏幕来说太宽了。我不想使用 ActionBarSherlock，因为我不需要它支持低于 4.0 的操作系统版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:54:54.433

我的第一直觉（你可能已经这样做了，但我还是会建议）是玩`android:actionBarTabStyle`你的主题，确保它将填充设置为 0dp：

```
<item name="android:paddingLeft">0dp</item>
<item name="android:paddingRight">0dp</item> 
```

# jquery - jQuery 下一个返回 -1

> ID：13461628
> 
> 赞同：-2
> 
> 时间：2012-11-19T20:26:51.593
> 
> 标签：jquery, html

你好，接下来我对 jQuery 有一些问题。一开始我的标记看起来像这样：

```
<ul>
  <li>...</li>
  <li>...</li>
  <li>...</li>
  <li>...</li>
  <li class="active">...</li>
</ul>
<ul>
  <li>...</li>
  <li>...</li>
  <li>...</li>
  <li>...</li>
  <li>...</li>
</ul>
<ul>
  <li>...</li>
  <li>...</li>
  <li>...</li>
  <li>...</li>
  <li>...</li>
</ul> 
```

在 jquery 中，我收集了所有保存在变量中的“ul”元素，例如。问题。在这个变量中，我找到了类活动的 li，然后我尝试获取下一个元素。代码如下所示：

```
contElems.find('li.active').next(); 
```

当活动 li 不在 ul 中最后但在 ul 中最后时 next() 返回 -1 时，它可以工作。我的代码有什么问题？我怎样才能让它工作？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:30:46.117

你可以做的是：

```
contElems.find('li.active').siblings().first(); 
```

这样，即使匹配`ul`的是最后一个，您也可以确保获得 1 个兄弟姐妹...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:29:09.087

因为 . 之后没有下一个元素`li.active`。如果您只是尝试访问，请`li.active`使用`contElems.find('li.active')`.

你期待什么行为？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:29:34.040

如果是最后一个，那么就没有`next()`一个，所以你得到一个假值。就个人而言，如果我写`next()`了 ，我会让它 return `null`，但显然已经决定返回值`-1`意味着没有下一个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T20:29:55.503

来自[jQuery 文档](http://api.jquery.com/next/)：

> 描述：获取匹配元素集中每个元素的紧随其后的兄弟。如果提供了选择器，则仅当它与该选择器匹配时，它才会检索下一个兄弟。

最后一个元素没有“紧随其后的兄弟”。

你可以试试[这个](http://jsfiddle.net/paska/G8nF3/1/)：

```
function getNext(contElems) {
    var next = contElems.find('li.active').next();
    if (next != undefined && next != null && next != -1 && next.length > 0)
        return next;

    var list = contElems.find('li'),
        eq = list.index(contElems.find('li.active'));

    next = list.eq(eq + 1);     return next;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T20:31:00.683

`.next()`找到下一个兄弟姐妹（相同的父级）。如果你想`li`在下一个`ul`（它是表兄弟而不是兄弟）中找到，你可以这样做：

```
var el = contElems.find('li.active').next();
if (el.length == 0) {
    el = contElems.find('li.active').closest('ul').next().find('li:first');
}
if (el.length == 0) {
    alert("Last li is active!");
} 
```

# ios - 在 UITableView 中有一个带有圆角的 UIImageView 的确定方法？

> ID：13461629
> 
> 赞同：0
> 
> 时间：2012-11-19T20:26:53.130
> 
> 标签：ios, xcode, uitableview, cornerradius

我一直在尝试找到一种可接受的方法来将圆角`UIImageView`添加到作为子视图添加到 a 中`UITableViewCell`而不影响`UITableView`. 我指的是调整`CALayer's` `cornerRadius`严重影响滚动性能的属性（与 结合使用`MasksToBounds`）。

我猜一种可行的方法是深入研究`UIImage`自身并弄乱实际图像 - 但同样，尚未找到可接受的方法。

因此，如果您有一种简洁的方法来呈现可滚动的圆角，`UITableView`同时保持完美的滚动性能，我很乐意听取您的意见。感谢你们提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:31:20.353

您可以使用“圆形矩形”类型的 UIButton，并且可以将状态配置设置为“禁用”并将图像添加到按钮..

或导入 QuartzCore.framework 并使用

```
self.imageView.layer.frame = CGRectInset(self.imageView.layer.frame, 20, 20); 
```

而不是 20,20 指定您的角半径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T23:27:48.883

iOS Stock 应用程序使用圆角。为了达到这个效果，应用程序的每个角落都放置了小圆角图像。这种技术可以快速绘制和实施。查看本书第134页：[Pro iOS5](http://books.google.pl/books?id=ydVnKoplt1cC&pg=PA127&lpg=PA127&dq=pro%20ios5%20%22color%20blended%20layers%22&source=bl&ots=pyrsvqSjlz&sig=tZt_N1-rrQiL3SAt6qfrDr9uA3o&hl=pl&sa=X&ei=kb-qUPaqNNGAhQesx4DgDg&redir_esc=y#v=onepage&q=pro%20ios5%20%22color%20blended%20layers%22&f=false)

# gdb - gdb 中的四边形

> ID：13461633
> 
> 赞同：3
> 
> 时间：2012-11-19T20:27:09.807
> 
> 标签：gdb, double-precision

我正在使用 gdb 进行调试，发现四倍精度数字显示不正确。我正在测试的代码是：

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
extern "C" {
#include "quadmath.h"
}

int main ()
{
    char buf[128];
    int n;

    double x = 4.0;
    double y = x + 1e-5;
    double z = 0.0;
    z = (exp(x) - exp(y))/(x-y);
    printf("In double precision           : %.32e\n", z);
    double zz = exp(x/2)*exp(y/2)*2*sinh((x-y)/2)/(x-y);
    printf("In double precision using sinh: %.32e\n", zz);

    __float128 qx = x;
    __float128 qy = y;
    __float128 qz = 0.0q;
    qz = (expq(qx) - expq(qy))/(qx-qy);
    n = quadmath_snprintf(buf, sizeof buf, "%.32Qe", qz);
    if ((size_t) n < sizeof buf)
    printf ("In quadruple precision        : %s\n", buf);

return 0;
} 
```

（注意 extern 以解决 libquadmath 错误。）

我编译： g++ aC -g -lquadmath

然后我得到：

```
Breakpoint 1, main () at a.C:19
19          printf("In double precision using sinh: %.32e\n", zz);
(gdb) n
In double precision using sinh: 5.45984230248043687083736585918814e+01
21          __float128 qx = x;
(gdb) 
22          __float128 qy = y;
(gdb) p qx
$1 = 0 
```

这似乎是一个 gdb 错误，因为最终结果似乎还可以。我的问题只是这是否应该工作？gdb 是否支持四边形？在这些情况下，我是否需要做一些特别的事情才能让 gdb 工作？

该程序的重​​点是演示灾难性取消，并且使用 sinh 提供所需的（双精度）精度，而无需四元算术：

```
In double precision           : 5.45984230249338509111112216487527e+01
In double precision using sinh: 5.45984230248043687083736585918814e+01
In quadruple precision        : 5.45984230248043659065767385111870e+01 
```

谢谢！

PS：无法使用四倍精度进行标记，我没有足够的声誉来创建新标签。

# python - Python：如何从文件模块的函数中附加一个列表（包含在 Main() 程序中）？

> ID：13461635
> 
> 赞同：1
> 
> 时间：2012-11-19T20:27:10.400
> 
> 标签：python

我开始在一个调用文件模块中的函数的主程序中编写一个基于文本的游戏。

有一种特殊情况，文件模块和函数被调用并且函数（在模块中）应该在 Main() 程序（全局变量）中附加一个列表。

问题是它不能附加它。

所以，更具体地说，在游戏中，玩家进入一个房间（RoomA2），并且有一个物体（剑）。玩家可以捡起它（我希望函数将它从名为 object_room_a2 的列表中删除）并将剑放在他的包里。因此，包是 Main() 程序中的一个全局列表（称为 object_list）。

请输入下面的代码，感谢您的帮助！

```
object_list = []

def main():
    print('stuff.. What do you want to do? (1) do this; (2) do that')
    choice = int(input('Choice --> '))

    if choice == 1 :
        RoomA2.room_a2()
    elif choice == 2 :
        RoomB1.room_b1()

def room_a2():
    object_room_a2 = ['sword']
    print('stuff.. What do you want to do? (1) do this; (2) do that')
    choix = int(input('choix --> '))

    if choix == 1:
        object_room_a2.remove('sword')
        object_list.append('sword')

    if choix == 2:
        RoomA1.room_a1() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:35:11.480

问题是每次`room_a2`调用`object_room_a2`都会重新初始化，所以剑会不断重新出现。

一般来说，这是一种非常复杂的方法来做你想做的事情。一个播放器对象和一组房间对象的代码会少得多，但我假设您是初学者，可能希望首先让几个房间以这种方式工作。

# node.js - 在 ubuntu 上安装 coffee-script 可以正确安装所有文件，但命令行不起作用

> ID：13461638
> 
> 赞同：4
> 
> 时间：2012-11-19T20:27:29.873
> 
> 标签：node.js, ubuntu, coffeescript, npm

全部，

我最近将我的开发环境从 windows7 切换到了 Ubuntu12，除了咖啡脚本之外，一切都运行得很顺利。我已经执行了这个确切的命令序列：

```
sudo apt-get install nodejs  
sudo apt-get install npm  
//checked that both are their latest versions  
npm -g install coffee-script 
```

当我这样做时，我只看到以下几行

```
npm http GET https://registry.npmjs.org/coffee-script  
npm http 304 https://registry.npmjs.org/coffee-script  
/usr/bin/coffee -> /usr/lib/node_modules/coffee-script/bin/coffee  
/usr/bin/cake -> /usr/lib/node_modules/coffee-script/bin/cake  
coffee-script@1.4.0 /usr/lib/node_modules/coffee-script 
```

which coffee 和 which cake 指向 /usr/bin/coffee|cake 但这些命令实际上什么都不做。

我很茫然。

请发送帮助！

史蒂夫凯恩

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T06:51:22.667

确实有同样的问题。卸载包“node”（注意：不是nodejs而是sic！“node”）为我做了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-25T11:41:05.423

这似乎与包名冲突有关。见[https://github.com/jashkenas/coffee-script/issues/936](https://github.com/jashkenas/coffee-script/issues/936)

在解决此问题之前，您可以手动链接`/usr/bin/nodejs`到`/usr/bin/node`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T08:32:00.247

使用[Chris Lea 的 PPA](https://launchpad.net/~chris-lea/+archive/node.js/)安装[node.js](http://nodejs.org)：

```
sudo add-apt-repository ppa:chris-lea/node.js
sudo apt-get update
sudo apt-get install nodejs 
```

使用以下方式安装[CoffeeScript](http://coffeescript.org/)`apt-get`：

```
sudo apt-get install coffeescript 
```

现在您可以使用它`coffee`来构建 CoffeeScript 并`cake.coffeescript`运行 Cake。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-05T22:51:35.250

全部，

我无法解决此问题，并最终通过构建它而不使用 sudo 手动安装旧版本的节点。我认为咖啡脚本也是如此。虽然我不完全确定问题出在哪里，但它现在工作正常。

# javascript - 将 miso.ds 与 requirejs 一起使用

> ID：13461639
> 
> 赞同：0
> 
> 时间：2012-11-19T20:27:37.353
> 
> 标签：javascript, requirejs

我正在尝试将 Miso 数据集（[http://misoproject.com/dataset/](http://misoproject.com/dataset/)）与 requirejs 一起使用，我想知道我的 require js 定义有什么问题（我对 require AND miso 很陌生），`Miso`将是`undefined`（ jquery的设置是好的）

```
require.config({
    // base url for vendor libs
    // files present : jquery.js, lodash.js, miso.ds.js, moment.js, underscore.deferred.js, underscore.math.js
    baseUrl: 'js/lib',
    // app components are stored in the js/app folder, so they'll start with 'app/'
    paths: {
        app: '../app',
    },

    shim: {
        // miso.ds shim, with its dependencies
        'miso.ds' : {
            deps : ['lodash', 'moment', 'underscore.deferred', 'underscore.math'],
            exports: 'Miso'
        }
    }
});

// start the main app logic.
require(['jquery', 'miso.ds'],
function ($, Miso) {
    console.log($);
    console.log(Miso);
}); 
```

任何的想法？

问候，

泽维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:48:08.930

这里也讨论了这个问题：[https](https://github.com/misoproject/dataset/pull/174) ://github.com/misoproject/dataset/pull/174 这是 Miso 中的一个错误。0.4.1 版本修复了这个问题。

# php - 使用 isset() 函数进行 PHP 表单验证

> ID：13461645
> 
> 赞同：3
> 
> 时间：2012-11-19T20:27:57.853
> 
> 标签：php

罗宾尼克松书中的代码：

```
<?php
if (isset($_POST['name'])) $name = $_POST['name'];
else $name = '(enter your name)';
echo <<<_END
<html>
    <head>
        <title>Test</title>
    </head>
    <body>
    Your name is $name<br />
    <form method = 'post' action = 'count.php'>
        What's your name?
        <input type='text' name='name' />
        <input type='submit' />
    </form>
    </body>
</html>
_END
?> 
```

在第二行中，我们检查是否设置了变量`isset()`。在第三行中，我们有一个条件：如果没有设置，脚本会打印“输入您的姓名”。这就是我不明白的：我打开这个页面 - 它打印：

> 你的名字（输入你的名字） 你叫什么名字？（和提交表格）

根本没有输入任何内容，然后点击“发送” - 它打印：

> 你的名字是（并且不打印“输入你的名字”）你叫什么名字？（和提交表格）

我没有输入任何内容，但函数说该变量设置为`NULL`. 为什么？如果它传递一个空值，那么为什么要使用它？为什么不使用`empty`？但是在所有程序中，我都看到了这样的解决方案。为什么我们必须在`isset()`那里使用函数？我不明白什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:30:59.480

该`isset`函数用于检查文本字段`<input type='text' name='name' />`是否有任何提交的数据，`POST`这些数据是通过`$_POST['name']`.

当您提交表单时，`$_POST['name']`为空白或空字符串。因此，您会看到`Your name is What's your name? (and the submission form)`,对空字符串`isset`进行评估。`true`

如果要检查文本字段是否为空，则应使用`empty()`函数来检查两者`isset`以及字段是否为空白/空。

```
 if (!empty($_POST['name'])) $name = $_POST['name'];
  else $name = '(enter your name)'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:34:39.273

这是因为一个空字符串（由浏览器发送到服务器）被认为是一个有效值，导致变量被“设置”，所以`isset()`为它返回 true。

`empty()`如果要确保输入了任何内容，则要进行检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:30:21.300

将 isset 更改为 !empty。您正在从 post 变量中检索一个空字符串。

```
if (!empty($_POST['name'])) $name = $_POST['name'];
else $name = '(enter your name)'; 
```

或者更简洁：

```
$name=empty($_POST['name'])?'(enter your name)':$_POST['name']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T20:43:05.020

通过向提交按钮添加名称并首先对其进行测试，确保表单已提交。像这样：

```
<input type='submit' name="submit" />

<?php
if (isset($_POST['submit'])) {
if (isset($_POST['name']))  $name = $_POST['name'];
....
}
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T20:42:02.700

正如其他人所说，`empty()`可以工作，但你的问题是为什么 isset 而不是空的。

对于评估为 FALSE 的任何内容，Empty 将返回 TRUE，例如 0、0.0、“0”，因此可能会导致意想不到的后果。

为了完整起见，您可能应该先检查它是否已设置，然后检查它是否为空，并进行相应处理。

我认为很多 PHP 程序员也养成了[使用 isset() 来检查键是否存在于数组](https://stackoverflow.com/questions/3210935/difference-between-isset-and-array-key-exists)中的习惯，因此使用 isset 是很自然的。

你会注意到[在那章的另一个例子中](http://lpmj.net/1stedition/examples.php?c=11&e=10&x=php)，尼克松有特殊情况来处理空字符串。

# cakephp - Cakephp 日期自动

> ID：13461647
> 
> 赞同：0
> 
> 时间：2012-11-19T20:28:08.320
> 
> 标签：cakephp, cakephp-2.0

我有以下代码：

```
echo $this->Form->input('date', array(
        'label' => __('Date')
    )
); 
```

生成一个`select`年，一个月，一个日。我想要一个输入文本，而不是`select`我可以输入所有日期。所以，我做了：

```
echo $this->Form->input('date', array(
        'label' => __('Date'),
        'type' => 'text'
    )
); 
```

表单有效，但验证无效，我无法在 Controller 获得正确的数据（Cake 的“自动”），但找不到问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:31:00.480

如果您尝试验证该值是否为日期，请在模型中使用：

```
public $validate = array(
   'your_date_column' => array(
           'rule'       => 'date',
           'message'    => 'Enter a valid date'
    )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T19:14:16.193

当您像这样使用表单助手时：

```
$this->Form->date('demo', array('type' => 'date')); 
```

生成的日期数据将以以下格式在控制器中接收：

```
$this->request->data['Model_name']['demo']['month'];
$this->request->data['Model_name']['demo']['day'];
$this->request->data['Model_name']['demo']['year']; 
```

在您的情况下，如果您使用这样的文本框：

```
$this->Form->date('demo', array('type' => 'string')); 
```

你会得到这样的约会：

```
$this->request->data['Model_name']['demo']; 
```

我不知道您想如何获取日期或如何将其存储在数据库中，但是当您从一种类型更改为另一种类型时，您必须考虑到这一点。

# c++ - 如何创建带有图标的 C++ 按钮

> ID：13461653
> 
> 赞同：1
> 
> 时间：2012-11-19T20:28:45.293
> 
> 标签：c++, winapi, visual-studio-2012

我正在尝试制作一个自定义退出按钮，并且我已经在 Photoshop 中为该按钮创建了一个自定义图形。我有此代码定义的按钮：

```
button = CreateWindow(L"BUTTON", L"", WS_VISIBLE | WS_CHILDWINDOW, 400, 4, 480, 24, hWnd, button_id, hInstance, NULL); 
```

我想将`close.bmp`或`close.png`或`close.ico`（以最简单的为准）放在按钮上，但是如果没有 MFC，我无法找到一种方法来做到这一点。请帮忙！！！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:14:21.840

使用[`BS_BITMAP`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775951%28v=vs.85%29.aspx)或[`BS_ICON`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775951%28v=vs.85%29.aspx)按钮样式。创建按钮后，向它发送[`BM_SETIMAGE`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761822%28v=vs.85%29.aspx)一条带有位图或图标句柄的消息。要获取位图或图标的句柄，请使用[`LoadImage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648045%28v=vs.85%29.aspx).

如果您的图像具有 Alpha 通道（透明度），请确保将其保存为每像素 32 位的位图。您可以使用图标，但边缘可能不会那么平滑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T21:53:40.293

主要有两种可能性：

1.  如果您只想**在常规按钮上放置位图**`WS_CHILD|WS_VISIBLE|BS_PUSHBUTTON|BS_BITMAP`，则使用样式组合创建按钮，使用`LoadBitmap`加载位图，然后通过将其句柄发送到消息中的按钮来将加载的位图放在按钮上`BM_SETIMAGE`。

2.  如果你想**改变整个按钮的外观**`WS_CHILD|WS_VISIBLE|BS_OWNERDRAW`，然后用样式组合创建它，并处理`WM_DRAWITEM`消息。将此`lParam`消息的 转换为`LPDRAWITEMSTRUCT`，并使用其`hDC`成员绘制按钮。在您的情况下，使用 预加载位图，并使用或( [source](http://www.winprog.org/tutorial/bitmaps.html) )`LoadBitmap`在 DC 上绘制它。或者，您可以使用and ( [source](http://www.codeproject.com/Articles/19913/Owner-draw-icon-buttons-in-plain-C-no-MFC) )。其他成员可用于选择位图，即按钮的外观，取决于当前的操作或状态。`BitBlt``TransparentBlt``LoadIcon``DrawIconEx``DRAWITEMSTRUCT`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T20:52:07.107

这很棘手...

您最好的选择是使用带有样式位的 Owner-Draw 按钮`BS_OWNERDRAW`。

然后，按钮的*所有者*（父窗口）将`WM_DRAWITEM`在按钮被重绘时收到消息。

缺点是按钮必须完全绘制，不仅是图标，还包括框架、背景、标签（如果需要）、焦点矩形......您必须检查关联`DRAWITEMSTRUCT`并确定要绘制的确切样式.

`DrawFrameControl()`为了简化工作，绘制多种样式的框架（包括标准按钮框架）的 Windows 功能可能很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-16T17:02:12.887

发送**BM_SETIMAGE**消息，并将加载的图像句柄传递给 lParam。

```
button1 = CreateWindowW(L"BUTTON", L"&Button", WS_VISIBLE | WS_CHILD | WS_TABSTOP | BS_BITMAP, 20, 50, 80, 25, hwnd, (HMENU) 600, NULL, NULL);

hImg = LoadImageW(NULL, L"test123.bmp", IMAGE_BITMAP, 0, 0, LR_DEFAULTCOLOR | LR_DEFAULTSIZE | LR_LOADFROMFILE);
SendMessageW(button1, BM_SETIMAGE, IMAGE_BITMAP, (LPARAM) hImg); 
```

PS: CreateWindow() 时需要使用**BS_BITMAP标志**

# java - 导航返回时传输数据

> ID：13461655
> 
> 赞同：0
> 
> 时间：2012-11-19T20:28:57.133
> 
> 标签：java, android, lifecycle, back-button

我有 4 个活动。从家庭活动中，您可以导航到其他 3 个。该应用程序在每个视图上都有声音和一个按钮来静音。当我从家庭活动中打开 3 个活动之一时，“是否静音”值由 intent.putExtra 等传输......当我在家庭活动中静音时，它工作正常，但怎么能home-activity 知道我是否在 3 个活动之一中进行了更改，并在我使用返回按钮导航返回时静音并静音？这是覆盖后退按钮的正确方法吗？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:42:33.067

在回答您的问题时，您需要开始每个活动以获得结果。假设您有 A -> B -> C -> D 每个都将启动以获得结果。然后，您可以在完成任何活动之前设置结果。这方面的例子可以在[这里](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)找到。

但是，我想我知道一个更简单的方法。如果我错了，请纠正我，但声音是否静音是否适用于整个应用程序？如果是这样，只需在首选项中设置一个布尔值，并在每个活动中检查它。你可以这样做：

将变量放入首选项：

```
 Boolean shouldBeep = true;

  //inside the mute/unmute button listener(or whatever)

  SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
  SharedPreferences.Editor editor = settings.edit();
  editor.putBoolean("shouldBeep", shouldBeep);

  editor.commit(); 
```

然后检索该值：

```
 SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
   boolean shouldBeep = settings.getBoolean("shouldBeep", false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:43:34.293

最灵活的方式是子活动在进行更改时发送广播 Intent，然后在所有活动中使用 onReceive。

另一种方法是使用 SharedPreferences 来存储状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T20:52:07.503

这听起来像应用程序状态，我会说这属于活动之外，而不是从一个传递到另一个。最简单的方法是拥有一个存储应用程序状态（或其中一部分）的静态类。有很多方法可以做到这一点，但这可能是最简单的。如果您使用静态类，您可以从任何您希望的活动中设置和获取此信息。这是一个例子

```
public class AudioPreferences {

private static boolean isMuted = false;

public static boolean isMuted() {
    return isMuted;
}

public static boolean setMuted(boolean muted) {
    isMuted = muted;
    return isMuted;
}

public static boolean toggleMuted() {
    isMuted = !isMuted;
    return isMuted;
}

} 
```

其他选项是将其存储在 SharedPreferences、自定义应用程序类或可以从依赖项容器中解析的共享单例中（如果您想澄清其中任何一个，请评论）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T20:43:35.927

你有很多选择。
1.您可以[启动其他活动以获得结果](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)，当您返回主应用程序时，检查活动返回的内容。
2.实际上在第二个活动中将android音量设置为静音，例如

```
mAudioManager = (AudioManager)mContext.getSystemService(Context.AUDIO_SERVICE);
mAudioManager.setStreamMute(AudioManager.STREAM_MUSIC, true); 
```

然后主要检查音量。
3.发送消息并使用[Handler](http://developer.android.com/reference/android/os/Handler.html)处理它，以防你有不同的线程。
希望这可以帮助。

# javascript - 如何包含适用于 Node.js 的 Amazon EC2 库？

> ID：13461656
> 
> 赞同：1
> 
> 时间：2012-11-19T20:29:02.763
> 
> 标签：javascript, node.js, amazon-ec2, amazon

我正在尝试运行一个简单的 node.js 脚本来描述一个实例，但我得到：

模块.js：340

错误：找不到模块“aws-lib”

我将所有 EC2 node.js 库文件与脚本放在同一目录中，但是如何包含它们？

`var aws = require("aws-lib");`

`ec2 = aws.createEC2Client(*redacted*, *redacted*);`

`ec2.call("DescribeInstances", {}, function(err, result) { console.log(JSON.stringify(result)); });`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T20:38:53.200

您实际上并没有安装该模块。转到您的节点应用程序所在的文件夹，然后在那里安装模块，例如：

```
cd /path/to/your/node/application/    // Since you should be in your app folder
sudo npm cache clear // Just in case
sudo npm install aws-lib  // Actual loading command 
```

这些命令将`node_modules`在您的应用程序文件夹中创建一个名为的文件夹。然后你可以使用`aws-lib`.

# java - 解析带有冒号的 JSON 密钥

> ID：13461659
> 
> 赞同：2
> 
> 时间：2012-11-19T20:29:10.417
> 
> 标签：java, android

考虑这个 JSON 字符串：

```
{
          "title": "value1",
          "link": "value2",
    "media:info": "value3"
} 
```

我知道如何解析标题和链接，但解析器不接受媒体信息，因为我认为中间有冒号。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:42:09.177

使用 JSON 对象。我使用您的示例数据编写了以下测试，它们通过了。

```
public void testJsonParsing() throws JSONException {
    JSONObject manual = new JSONObject();
    manual.put("media:info", "value3");

    String rawData = "{ \"title\": \"value1\", \"link\": \"value2\", \"media:info\": \"value3\" }";
    JSONObject parsed = new JSONObject(rawData);

    String expected = "value3";
    String actual = manual.getString("media:info");
    assertEquals("Actual equals expected", expected, actual);

    actual = parsed.getString("media:info");        
    assertEquals("Actual equals expected", expected, actual);
} 
```

# performance - 提取 DataStage 作业性能统计信息（开始和结束时间）

> ID：13461663
> 
> 赞同：3
> 
> 时间：2012-11-19T20:29:29.767
> 
> 标签：performance, etl, datastage

DataStage 版本是 8.1 - 我没有直接访问权限，但需要提供说明来为我提取一些作业运行时统计信息。我相信存储库在 DB2 数据库中，或者如果在 8.1 中仍受支持，则可能在平面文件中。我无法在那里安装任何工具。

有一个包含几十个作业的主序列。其中一些是平行的。该序列本身一次运行一个，并且在白天不断运行。

在 24 小时内，我需要为此主序列提取性能统计信息。像这样的东西：

```
job_name, start_time, finish_time, completion_status 
```

我真的只需要时间信息。我可以使用任何格式，但最终我真正想要的是一个 csv 样式的文件，其时间安排如上。

我得到了一些关于 dsjob -report 的提示，但我在 DataStage 中没有足够的背景知识来提供良好的说明。希望自己能够访问，但我还是 DataStage 的菜鸟。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-19T05:39:24.953

您可以将作业上次运行的元数据导出到 XML 文件。

```
#!/usr/bin/ksh

project="yourProjectName"
job="yourJobName"

dsjob -report $project $job XML >"$project_$job.xml" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-20T00:25:54.743

您可以使用 Director 导出序列日志并在作业开始和完成时进行解析。或者，您可以通过命令行导出日志（请参阅 dsjob -logsum 命令），然后在 awk 中进行解析（如果在 UNIX 或 AIX 系统上）。

如果您有能力修改序列，您可以在序列中的作业之前和之后添加一个活动阶段并写入文件。

# matlab - MATLAB中的缝合孔

> ID：13461671
> 
> 赞同：0
> 
> 时间：2012-11-19T20:30:21.653
> 
> 标签：matlab

假设我有一个 3D 数组，其中心有一大块 NaN 值。有什么办法（在 MATLAB 中）用样条线之类的东西缝合这个洞吗？

一个简单的二维数组示例是：

```
Z = peaks;
Z(20:30,20:30) = NaN; 
```

用曲面缝合 Z 中的孔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:56:07.490

在文件交换中有一个出色的提交，[inpaint_nans](http://www.mathworks.com/matlabcentral/fileexchange/4551)，它将为您填充 NaN - 在图像中，但适用于任何 2D 数组（[这里是 3D 版本](http://www.mathworks.com/matlabcentral/fileexchange/21214)）

![在此处输入图像描述](../Images/94c645f94f0feec86e3a5bb0317b0028.png)

# iphone - iOS登录架构，如何查看登录？

> ID：13461673
> 
> 赞同：1
> 
> 时间：2012-11-19T20:30:24.203
> 
> 标签：iphone, ios, afnetworking

我有一个关于 iOS 应用程序登录/身份验证架构的最佳实践的问题。

情况：该应用程序是为实现照片库的 iOS 客户端而构建的（使用 RESTful API）。用户可以看到自己的画廊，添加照片和类似的东西。该应用程序严重依赖于 API 的有效登录（atm 它只是 http 身份验证，暂时简化事情）。API 调用是使用 AFNetworking 进行的。这已经很好了。现在，我必须实现身份验证。

我的问题如下：

*   您是否只需使用登录视图登录一次并将凭据存储在某处（例如用户默认值）？

*   您是否只是在应用程序加载后再次使用这些凭据以查看它们是否仍然有效，如果没有再次显示登录视图以重复登录 + 存储在用户默认过程中？

你们认为什么是好的解决方案？很高兴知道其他人如何处理这个问题。由于我可以控制 API 和应用程序，因此我可以修改身份验证机制。两侧。但是，API 不会公开，仅用于连接网站（用户也可以登录）和应用程序。我有一种强烈的感觉，即 OAuth2 会有点矫枉过正，而且可能不是最佳选择。

我真的不确定如何将自己的网络应用程序连接到移动应用程序。非常感谢任何涵盖该主题的建议、文章指针甚至推荐书籍。期待您的反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T10:12:15.980

我所做的是将凭据保存到钥匙串中并将身份验证令牌保存到`.plist`文件中，但您可以将其保存在任何您想要的地方。如果我有这两个值，我假设用户可以访问 API 并让应用程序正常运行。如果没有，我会发送通知以使用登录屏幕打开模态视图控制器。

# concurrency - Erlang 控制台挂起此代码段

> ID：13461679
> 
> 赞同：0
> 
> 时间：2012-11-19T20:30:47.147
> 
> 标签：concurrency, erlang, message-passing, erlang-shell

对于有 Erlang 经验的人来说，这可能很容易，但我没有。我试图制作一个斐波那契进程树。然后它将接受一条消息，我可以在其中计算传递给它的那个节点下所有节点的总和。

```
create_fibtree(N) when N > 1 ->
Child1 = spawn(fun() -> create_fibtree(N-1) end),
Child2 = spawn(fun() -> create_fibtree(N-2) end),

receive 
    Sum ->
        Child1 ! sum + 1,
        Child2 ! sum + 1,
        io:format ("sum is ~p.~n", [Sum])
end;
create_fibtree(N) when N =< 1 ->
    ok. 
```

当我运行这个：

```
c(fib_tree2).
{ok,fib_tree2}
2> fib_tree2:create_fibtree(10). 
```

Erlang 控制台挂起。无法弄清楚为什么，但它与接收子句有关吗？

是的，这是作业，我的老师这周不在那里，这就是我在互联网上寻找替身的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:08:28.513

是的，receive 子句阻塞了函数，因为它从不接收任何消息。但一般来说，这段代码并不是计算 fib 数的好方法。它可以通过一个简单的递归函数来完成，而不需要产生进程。

PS**孩子1！sum + 1**将失败，因为您尝试添加原子和整数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:43:50.080

你需要有第一条消息。因为我也有[任务](http://www.it.uu.se/edu/course/homepage/avfunpro/ht12/ErlangAssignments)，所以我可以提供一些提示：

*   尝试将树的创建与总和计算分开。创建树，然后移动到您接收和发送消息的另一个函数。

*   必须有人发送消息，您才能收到消息。

*   您似乎对消息传递的方向感到困惑。您可能应该在树下发送一条消息（告诉您的孩子您正在计算节点），然后在树中向上发送一条消息（每个节点的结果）。这是一个算法的建议：

在每个节点中：

1.  向两个孩子发送一条消息`{get_sum, Id, Pid}`，其中 Id 是一些随机的唯一标识符，例如，来自`now/0`函数并且`Pid`来自`self/0`。
2.  在表格上恰好收到两个答案（每个孩子一个）`{sum, Id, Sum}`（`Id`与以前相同）。
3.  两个总和相加，您为当前节点加 1。
4.  将答案发送回树中的父级。

* * *

查看[Erlang 调试器](http://www.erlang.org/doc/apps/debugger/debugger_chapter.html)，它非常适合解决此类问题：

```
> c(modulename, [debug_info]).
> debugger:start().
(Module -> Interpret -> Pick the .erl file for the module you just compiled) 
```

# c# - 如何从属性设置器获取实体框架实体的上下文？

> ID：13461682
> 
> 赞同：1
> 
> 时间：2012-11-19T20:31:05.487
> 
> 标签：c#, entity-framework-4

假设我有一个名为 Foo 的实体框架实体，并且在 Foo 中有一个名为 Bar 的属性。

Bar 的设置器中有没有办法进入实体框架上下文？

```
public partial class Foo : IObjectWithChangeTracker
{
    public string Bar
    {
        get { /* ... */ }
        set
        {
            // How do I get the entity context here?
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:46:05.783

如果我正确理解了您的问题，我的方法是添加`Bar`不在数据合同下的属性，然后编写另一个方法来检索另一个对象并在`Bars`那里设置属性。但由于 HighCore 所述的原因，我可能无法理解您的问题。整个想法对我来说没有意义。对象不拥有上下文。

```
if (context.OtherObjectTable != null)
        {
            var otherObj = (from obj
                           in context.OtherObjectTable
                           where obj.Name == "Name/key for obj"
                           select obj).FirstOrDefault(); // ensures we only get one back 
```

如果您按主键搜索，只需删除`FirstOrDefault()`. 如果您可以取回多个结果，请创建另一个循环，您可以在其中迭代`otherObj`（现在可能是一个列表）并过滤下一个标识属性。在那个循环之后，你可以做正常的分配，比如

```
 Bar.Count = (int)otherObj.SomeInt32; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:01:48.260

听起来很糟糕。我不知道您的应用程序是如何构建的，但是在客户端（应该有对模型的引用，您不应该有对数据访问层（位于服务器中）的引用，也不应该对 System.Data 有引用。因此，您不能在不破坏整个应用程序结构的情况下在其中添加引用 EF 上下文的代码。

我建议向实体添加某种静态委托，例如`Action<Foo> OnBarChanged`在 setter 中调用它，然后在服务器端，在一些初始化代码中，将该静态委托设置为您实际上可以访问所有内容的代码需要。

# linux - 在 perforce 中删除客户端工作区后如何删除某些目录？

> ID：13461685
> 
> 赞同：0
> 
> 时间：2012-11-19T20:31:19.167
> 
> 标签：linux, perforce, p4v, vms

我正在研究 Linux 和 VMS 上的 perforce。

我创建了 3 个目录，每个目录都有一个客户端名称和 .p4rc 文件和映射。

经过一些工作，我不需要这些目录。

我使用 perf client -d 删除客户端工作区。

但是，目录仍然存在。

我想删除它们。

我可以使用 rm 命令手动执行此操作吗？

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:39:24.890

如果您已经删除了客户端，那么删除目录应该没有问题。事实上，它们甚至没有那么紧密的联系。

# c# - 渲染后从页面获取完整的 Html

> ID：13461686
> 
> 赞同：0
> 
> 时间：2012-11-19T20:31:19.593
> 
> 标签：c#, asp.net, html

我有一个要从中提取 HTML 的 UserControl，以便可以将 html 转换为 PDF。该页面已经在需要发生的地方呈现，所以我想尽可能远离`RenderControl`。

我也想在服务器端做这一切。我知道我可以通过 javascript 提取所有 html 并将其 ajax 到服务器，但我宁愿在服务器端进行。

有没有办法在不拦截/覆盖渲染的情况下做到这一点？

# java - 加载 JSP 页面时如何获取 HttpServletRequest 对象？

> ID：13461688
> 
> 赞同：4
> 
> 时间：2012-11-19T20:31:30.447
> 
> 标签：java, jsp, servlets

我有一个允许我使用 JSP 代码的 HTML 页面。我能够使用一些基本的 Java 打印一些输出。但是如何获得一个 HttpServletRequest 对象，以便可以将它的一些属性打印到 HTML 页面上呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:41:17.590

只需使用`request`变量（`HttpServletRequest`实例）。它是 JSP中的*隐式对象之一。*在此处检查属性：http: [//docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html)

```
<%
    request.getHeader();
%> 
```

# java - 编辑 midi 事件

> ID：13461690
> 
> 赞同：2
> 
> 时间：2012-11-19T20:31:43.123
> 
> 标签：java, midi, javasound, javax.sound.midi

我试图通过向上或向下移动钢琴卷帘编辑器中的图形音符（矩形）来按顺序编辑现有 MIDI 音符的音高。阅读 API 和在线文档，并没有非常具体地说明如何编辑现有笔记。据我所知，我需要使用 setMessage() 方法来覆盖现有的 ShortMessage。这是我现在得到的：

```
public void changePitch(int pitchUpOrDown) {
    MidiMessage message =  this.getMessage();
    message.setMessage(___?, ____?, ____? + pitchUpOrDown, ____?);
} 
```

我通过鼠标拖动音符从 JPanel 调用 changePitch()，并且我发送 +1 或 –1 作为调整音高的增量。我找不到的是 setMessage() 调用的其他四个空白参数中需要输入的值。从逻辑上讲，我想保留命令、通道和时间戳的现有值，但是如何访问这些现有值以便将它们放在空白处？我尝试过诸如 message.command 或 message[0] 等，但它们不起作用。此外，在文档中，set Message 的参数显示为 (byte[] data, int length)。这些 args 的解释真的很模糊，而且它们肯定与我一开始用来创建 ShortMessage 的 args 不匹配。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:20:48.137

`MidiMessage`向下投射`ShortMessage`，然后您可以获得数据1和数据2的音高和速度：

```
if (message instanceof ShortMessage) {
    ShortMessage shortMessage = (ShortMessage) message;

    if(shortMessage.getCommand() == ShortMessage.NOTE_ON) {
        int channel = shortMessage.getChannel();
        int pitch = shortMessage.getData1();
        int vel = shortMessage.getData2();
        if(vel > 0) {
            shortMessage.setMessage(ShortMessage.NOTE_ON, channel, pitch + pitchUpOrDown, vel);
        }
    }
} 
```

您可能还需要更改下一条 NOTE_OFF 消息。这将是一个带有 NOTE_OFF 命令的短消息，或者是一个速度为 0 的 NOTE_ON 命令。

# iphone - iPhone：无法对多对关系进行 NSSortDescriptor。如何排序？

> ID：13461694
> 
> 赞同：2
> 
> 时间：2012-11-19T20:32:16.283
> 
> 标签：iphone, core-data, entity-relationship, nsfetchrequest, nssortdescriptor

我正在使用通过**NSSortDescriptor**排序的 NSFetchRequest 。

这对于要获取的实体的所有属性都非常有效。

在该实体中只有一个问题（不是总是存在吗？）我与另一个实体有关系，我也想对这个问题进行排序。但它给了我以下错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'to-many key not allowed here' 
```

这是我的核心数据设置：

![在此处输入图像描述](../Images/75df4d6913b4143abce324693dbc2e22.png)

这是我的代码：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entityMonth = [NSEntityDescription entityForName:@"Month" inManagedObjectContext:_managedObjectContext];
    [fetchRequest setEntity:entityMonth];

    NSSortDescriptor *sortDescriptorItem = [NSSortDescriptor sortDescriptorWithKey:@"item.nr" ascending:YES]; //THIS ONE CAUSES THE ERROR!
    NSSortDescriptor *sortDescriptorMonth = [[NSSortDescriptor alloc]initWithKey:@"month" ascending:YES];
    NSSortDescriptor *sortDescriptorYear = [[NSSortDescriptor alloc]initWithKey:@"year" ascending:YES];

    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptorYear, sortDescriptorMonth, sortDescriptorItem, nil];
    [fetchRequest setSortDescriptors:sortDescriptors];

    NSError *error = nil;
    self.stages = [_managedObjectContext executeFetchRequest:fetchRequest error:&error]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:57:12.623

您无法排序，`item.nr`因为一个`Month`对象与许多对象相关，因此每个对象`Item`都有多个值。`item.nr``Month`

# paypal - PayPal平台的正确开发方式

> ID：13461697
> 
> 赞同：0
> 
> 时间：2012-11-19T20:32:26.970
> 
> 标签：paypal

针对 PayPal 平台进行开发的正确/推荐方式是什么：

*   使用新的 PayPal SDK (https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)
*   使用旧的 PayPal SDK（现在已经很老了）
*   只需按照 NVP 协议发送原始 HTTPS 请求（最终它们只是类似 REST 的 API），不依赖于任何官方 API（仅依赖于官方 NVP 协议描述）

哪一个被认为是正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:02:01.957

只是想在此处发布以供将来参考，最新的 SDK 更新具有修复上述错误的更新。SDK 也进行了精简，特别是取消了之前存在的大量样板代码。从这里下载 SDK [https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index) - Prasanna A

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:41:28.177

当 SDK 易于使用并且没有错误时，它们就很棒。不幸的是，PayPal 的 SDK 并不总是适合这个，所以我一直更喜欢自己生成原始请求并直接访问 API。

我主要使用 PHP，因此我创建[了自己的类库](http://www.angelleye.com/overview-of-php-class-library-for-paypal/)。如果您使用的是 PHP，我建议您看看它。它使集成所有 PayPal 的 API 变得非常快速和容易，我定期维护它。

否则，我会看看他们的 SDK，看看他们是如何为你工作的。如果您对它们有很好的体验，无论如何，我建议您使用它们。如果您发现自己遇到了一些愚蠢的错误（例如，他们的 SDK 中的 GetExpressCheckoutDetails 无法正确解析项目详细信息），您可能会决定使用自己的东西。

# ios - UICollectionView 的单元格在滚动后并不总是刷新

> ID：13461698
> 
> 赞同：14
> 
> 时间：2012-11-19T20:32:37.950
> 
> 标签：ios, uicollectionview, uicollectionviewcell, cptbarplot

我在我的 Storyboard (iPad) 中定义了一个包含 的视图`UICollectionView`，在视图的底部还有一个`UIToolbar`. 在`UICollectionView`我添加了一个`UICollectionViewCell`（由一个`iPadCellCollectionViewCell`类实现），其中包含另一个视图，即 Core-Plot Graph（一个`CPTGraphHostingView`类）。

我有一个名为 X 的类，它实现了`UICollectionViewDelegate`and `UICollectionViewDataSource`。

在 X 类中，我为视图的每个单元格（在 中`ViewDidLoad`）构建了 Core-Plot 图表，并且我有以下代码将图表链接到`UICollectionViewCell`

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
static NSString* cellId = @"ChartCollectionId"; 

iPadCellCollectionViewCell* cell = [self.theCollectionView dequeueReusableCellWithReuseIdentifier:cellId forIndexPath:indexPath];

MyChart* chart = [_charts objectAtIndex:indexPath.row];

cell.hostingView.hostedGraph = chart.barChart;

return cell; 
```

}

它工作正常，我所有的图表都正确显示在屏幕上。当用户滚动视图时会出现此问题，然后一个或多个单元格变为“空白”。我真的不明白为什么。

我找到了一种解决方法，而不是在 Interface Builder 中添加`CPTGraphHostingView`，`UICollectionViewCell`我自己构建它，前面的代码变为：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
static NSString* cellId = @"ChartCollectionId"; 

iPadCellCollectionViewCell* cell = [self.theCollectionView dequeueReusableCellWithReuseIdentifier:cellId forIndexPath:indexPath];

[cell.contentView addSubview:[_hostingViews objectAtIndex:indexPath.row]];

return cell; 
```

}

使用此代码，一切正常。是否有任何解释为什么当我在 IB 中添加时它`CPTGraphHostingView`不起作用`UICollectionViewCell`？

每次调用该方法时调用“addSubview”是否有问题？没有内存泄漏？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T19:25:12.917

我有一个类似的问题。`setFrame:`我通过在自定义内容上调用时强制重新绘制来修复它。在您的情况下，子类化`CPTGraphHostingView`并覆盖此方法：

```
-(void)setFrame:(CGRect)frame {
    [super setFrame:frame];
    [self setNeedsDisplay]; // force drawRect:
} 
```

**编辑：**重用单元格视图时刷新单元格视图的一种更简单的方法是覆盖`applyLayoutAttributes:`如下`iPadCellCollectionViewCell`：

```
-(void)applyLayoutAttributes:(UICollectionViewLayoutAttributes *)layoutAttributes {
    // apply custom attributes...
    [self.hostingView setNeedsDisplay]; // force drawRect:
} 
```

关于您的解决方法：内容视图中会有越来越多的子视图，这可能不是一件好事。但是，如果您在添加新子视图之前删除任何旧子视图，那也应该没问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T11:29:50.843

使用 sectionInsets 时，这似乎是 UICollectionView 中的一个错误。单元格不会变得不可见，它们有时会在快速滚动时被放错位置。

因此，如果您通常每行有 3 个项目，您将在一行中获得第四个项目，但在下一行的第一个位置没有项目。

如果您将 UICollectionView 设置为不裁剪到边界，并将其移动到 UI 顶部，您可能会看到这个未对齐的单元格。

到目前为止，我的解决方案是不使用 sectionInsets，而是使用 contentInset 和部分标题中的一些空白空间来包围它。

I also found some other guys at Twitter with the same problem. There's also a bug report about it: 12353513

# c# - XNA - 从世界矩阵中提取旋转向量（角度）

> ID：13461702
> 
> 赞同：0
> 
> 时间：2012-11-19T20:32:56.523
> 
> 标签：c#, xna, xna-4.0

我得到了一个对象的位置、前向和向上向量。我正在使用

```
Matrix.CreateWorld(Position, Forward, Up); 
```

得到世界矩阵，但我不知道如何提取旋转向量。还有另一种方法可以使旋转向量脱离位置、向前和向上向量？

tnx。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T23:40:36.667

您可以使用分解方法：

```
 world.Decompose(out traslation, out rotation , out scale); 
```

# web-services - ColdFusion 站点转移

> ID：13461703
> 
> 赞同：0
> 
> 时间：2012-11-19T20:32:57.303
> 
> 标签：web-services, coldfusion, hosting

我有一个代理机构运行我的网站一段时间，不再使用他们的服务。他们给了我一个包含我的网站的下拉框链接。我从来没有使用过coldfusion，所以我超级迷路。我注册了 hostek.com，帮助为零。如何让我的 Coldfusion 站点恢复运行。我认为这将是一个简单的拖放，遗憾的是我遇到了错误。如果我需要一对一的帮助，任何类型的帮助都会非常有用，并且会很好地提供小费。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T18:41:35.793

移动站点时要做的事情清单：

*   获取数据库文件。如果是 SQL Server，至少会有一个主 DB 文件和一个日志文件。您可能需要考虑将数据库移动作为与站点移动分开的操作。
*   获取站点所在目录中的所有文件。根据 Web 服务器，它可能是一个虚拟目录。
*   获取数据库连接信息。这存在于 CF Admin 中。

这将使大多数站点启动并运行，但您可能还必须...

*   复制缺少的 CF_ 自定义标签；
*   复制缺少 CFX_ 自定义标签的 DLL；
*   在 CF Admin 中设置路径映射。
*   设置计划任务

如果您要迁移到新服务器，请确保它具有所有 ColdFusion 补丁和所有 Java 运行时补丁。

也许名单上还有更多的东西。您必须提供错误消息才能获取更多详细信息。

# regex - actionscript 3 中的正则表达式：将 url 转换为 char 编码文本

> ID：13461704
> 
> 赞同：1
> 
> 时间：2012-11-19T20:32:56.817
> 
> 标签：regex, string, actionscript-3, apache-flex, flex4.5

我有一个小的 AS3 脚本可以将字符串中的所有特殊字符转换为它们的字符代码。

这是脚本：

```
url = url.replace(new RegExp("%","g"),"%25")
            .replace(new RegExp("?","g"),"%3F")
            .replace(new RegExp(":","g"),"%3A")
            .replace(new RegExp("/","g"),"%2F")
            .replace(new RegExp("=","g"),"%3D")
            .replace(new RegExp("&","g"),"%26"); 
```

现在，我什至不是 RegExp 的初学者，但我试了一下。这个小脚本似乎做得很好，但只有问号 (?) 没有被替换。

谁能告诉我为什么？

如果您还可以告诉我一个更简短的编码方式，请随时分享，我知道这不是 RegExp 的最佳实践......

打招呼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:49:28.093

你必须逃避问号：`"\?"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:56:51.920

不确定这是否有帮助，但你知道逃跑吗？

例如

```
var encodedURL:String = escape(url); 
```

# asp.net - 设置通过数据绑定实例化对象时使用的区域性

> ID：13461705
> 
> 赞同：1
> 
> 时间：2012-11-19T20:33:00.040
> 
> 标签：asp.net, data-binding, culture

我正在开发一个小型培训 ASP .Net Web 应用程序。
我开发了一个 ASPX 页面，我在其中声明了一个通过数据绑定链接到 ObjectDataSource 的 FormView 控件。
update 方法接受一个 Product 对象。
Product 对象有一个包含双精度值的 Price 属性。

用户可以通过 FormView 创建读取更新删除产品。
但是在更新或插入产品时可能会引发错误。

更准确地说，当从 FormView 的输入值实例化 Product 对象时会引发错误。
与 Price 属性关联的输入控件中包含的字符串无法转换为双精度值。
例如，“50,6”不能转换为双精度。逗号是小数点分隔符。
我猜 ASP .Net 需要一个小数点分隔符，因为它可能考虑了 EN-US 文化。

这是我在浏览器中获得的堆栈跟踪：

```
System.ComponentModel.BaseNumberConverter.ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, Object value) +489
System.Web.UI.WebControls.ObjectDataSourceView.ConvertType(Object value, Type type, String paramName) +117
System.Web.UI.WebControls.ObjectDataSourceView.BuildObjectValue(Object value, Type destinationType, String paramName) +167
System.Web.UI.WebControls.ObjectDataSourceView.BuildDataObject(Type dataObjectType, IDictionary inputParameters) +229
System.Web.UI.WebControls.ObjectDataSourceView.ExecuteUpdate(IDictionary keys, IDictionary values, IDictionary oldValues) +1421
System.Web.UI.DataSourceView.Update(IDictionary keys, IDictionary values, IDictionary oldValues, DataSourceViewOperationCallback callback) +95
System.Web.UI.WebControls.FormView.HandleUpdate(String commandArg, Boolean causesValidation) +1154
System.Web.UI.WebControls.FormView.HandleEvent(EventArgs e, Boolean causesValidation, String validationGroup) +445
System.Web.UI.WebControls.FormView.OnBubbleEvent(Object source, EventArgs e) +95
System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args) +37
System.Web.UI.WebControls.FormViewRow.OnBubbleEvent(Object source, EventArgs e) +112
System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args) +37
System.Web.UI.WebControls.LinkButton.OnCommand(CommandEventArgs e) +125
System.Web.UI.WebControls.LinkButton.RaisePostBackEvent(String eventArgument) +169
System.Web.UI.WebControls.LinkButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +9
System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +176
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563 
```

在通过数据绑定从字符串值设置对象属性时，是否可以指定要考虑的区域性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:10:14.757

对于 .Net 4.5 及更高版本，这可能有效：

```
Page_Init(object sender, EventArgs e)
{
    MyObjectDataSource.ParsingCulture = ParsingCulture.Current;
                                                 //Invariant is en-US
} 
```

此外，请确保测试客户端的文化设置为浏览器和操作系统的“FR-FR”。MSDN 解释说可以使用客户端的文化而不是服务器的文化进行解析。（他们不讨论不变的文化，但你绝对不想要它。）

如果这不起作用，或者您使用的是 .NET 4.0 或更早版本，则使用 InsertParameters 可能会有所帮助（无论您使用的是 POCO 还是参数）：

看到这个线程：[http ://forums.asp.net/t/963913.aspx/1](http://forums.asp.net/t/963913.aspx/1)

```
<asp:ObjectDataSource ...>
   ...
   <InsertParameters>
      <asp:Parameter Name="Birthdate" Type="DateTime" />
      <asp:Parameter Name="AnnualIncome" Type="Decimal" />
      <asp:Parameter Name="Height" Type="Double" />
   </InsertParameters>
</asp:ObjectDataSource ...> 
```

编辑：有一个相关的堆栈溢出问题：[ObjectDataSource failed to parse string to DateTime](https://stackoverflow.com/questions/11294069/objectdatasource-fails-to-parse-string-to-datetime)

# filepicker.io - Filepicker.io - 可以删除仅用于计算机上传的额外对话框吗？

> ID：13461707
> 
> 赞同：0
> 
> 时间：2012-11-19T20:33:16.700
> 
> 标签：filepicker.io

我一直在尝试 filepicker.io，发现如果单击“选择文件”按钮并且我设置的唯一来源是“计算机”，则必须经过两个步骤有点烦人。它仍然会弹出对话框，我必须单击“选择文件”。

当用户点击“选择文件”时，插件能否足够聪明地识别它只是计算机并打开文件对话框？它已经有 div 用于删除文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:21:51.497

有趣的想法，我们目前实际上并没有这个功能，但是使用像 filepicker.store 和 filepicker.makeDropPane 这样的组件，这应该不会太难。以下是代码外观的快速草图：

```
filepicker.setKey("l5uQ3k7FQ5GoYCHyTdZV");
var pane = document.getElementById("dragdrop");
document.getElementById("file").onchange = function(){
    if (!this.value){return;}
    pane.innerHTML = "Uploading...";

    filepicker.store(this, function(fpfile){
        console.log("Stored", fpfile)                
        pane.innerHTML = "Stored "+fpfile.filename;
    });        
}

pane.style.width = "200px";
pane.style.height = "20px";
pane.style.backgroundColor = "#BBB";                    

filepicker.makeDropPane(pane, {
     onSuccess: function(fpfiles){
        pane.innerHTML = "Stored "+fpfiles[0].url;   
     }
}) 
```

​ 示例在 [http://jsfiddle.net/yCDDg/1/](http://jsfiddle.net/yCDDg/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T16:43:32.907

这种方法是否适用于标准 filepicker.io 帐户（无 s3）？该文档指出`filepicker.store`目前仅适用于 s3 存储桶。

# javascript - for...in 是如何在 JavaScript 中实现的？

> ID：13461708
> 
> 赞同：3
> 
> 时间：2012-11-19T20:33:16.537
> 
> 标签：javascript, algorithm, object, cross-browser, iteration

我看到一个关于 for...in 语句的[迭代顺序](http://daniel.gredler.net/2008/09/10/javascript-iteration-order/)的问题，并警告该顺序不能被信任。当前和访问节点的迭代和跟踪是如何在内部完成的，它在 JavaScript 引擎之间有何不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:39:30.577

来自[MDN 文档`for...in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)（强调添加）：

> **以任意顺序**迭代对象的可枚举属性。

我确信内部细节因 JavaScript 引擎而异，甚至很可能在任何特定引擎的版本之间。我猜在许多引擎中，它是通过某种哈希表实现来完成的。由于哈希函数会随着哈希表的增长对键进行重新排序，因此属性的相对顺序`a`可以`b`通过添加新属性来更改`c`，而无需更改引擎或任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T02:15:07.510

似乎`Object.keys()`and的实现`Object.defineProperties`应该模仿以下行为`for...in`：

> 如果实现为 for-in 语句定义了特定的枚举顺序，则在该算法的第 5 步中必须使用相同的枚举顺序。

所以它们可以作为参考。

操作员还可以使`delete`事情复杂化：

> 未指定枚举属性的机制和顺序（第一个算法中的步骤 6.a，第二个算法中的步骤 7.a）。被枚举对象的属性可能在枚举过程中被删除。如果在枚举期间还没有访问过的属性被删除，那么它就不会被访问。如果在枚举过程中向正在枚举的对象添加了新属性，则不能保证在活动枚举中访问新添加的属性。在任何枚举中不能多次访问属性名称。

可以命名原型链中的冲突：

> 枚举对象的属性包括递归地枚举其原型的属性、原型的原型等等；但是如果原型的属性被“隐藏”，则不会枚举它，因为原型链中的某些先前对象具有同名的属性。在确定原型对象的属性是否被原型链上的前一个对象遮蔽时，不考虑 [[Enumerable]] 属性的值。

**参考**

*   [ECMA-262，第 5 版：第 12.6.4 节](https://people.mozilla.org/~jorendorff/es5#sec-12.6.4)

*   [ECMA-262，第 5 版：第 15.2.3.7 节](https://people.mozilla.org/~jorendorff/es5#sec-15.2.3.7)

*   [ECMA-262，第 5 版：第 15.2.3.14 节](https://people.mozilla.org/~jorendorff/es5#sec-15.2.3.14)

*   [JS_NewPropertyIterator](https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/JSAPI_reference/JS_NewPropertyIterator)

*   [JS_枚举](https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/JSAPI_reference/JS_Enumerate)

*   [实现 Object.getOwnPropertyNames()](https://bugs.webkit.org/show_bug.cgi?id=32242)

*   [[ES5] 实现 getOwnPropertyNames](https://code.google.com/p/chromium/issues/detail?id=32155)

*   [WebKitIDL – WebKit](https://trac.webkit.org/wiki/WebKitIDL)

*   [重新思考 JavaScript 对象枚举](https://javascriptweblog.wordpress.com/2011/02/28/javascript-object-keys-finally/)

# java - 无法填充 JComboBox

> ID：13461709
> 
> 赞同：0
> 
> 时间：2012-11-19T20:33:17.943
> 
> 标签：java, swing

我正在尝试用字符串数组的值填充我的 Jcombobox，但是在运行它时，我的组合框仍然是空白，下面是我的代码

```
 package UI;

       import Class.*;
     import java.awt.event.ActionEvent;
      import java.awt.event.ActionListener;
       import java.awt.event.ItemEvent;
       import java.awt.event.ItemListener;
      import java.io.*;
       import java.util.Scanner;
       import java.util.logging.Level;
        import java.util.logging.Logger;
           import javax.swing.ButtonGroup;
          import javax.swing.JComboBox;
              import javax.swing.JFileChooser;
           import javax.swing.JOptionPane;

       public class Smith_waterman extends javax.swing.JFrame {

         private String[]algorithm_name = {"Needleman & Wunsch (global alignment)","Smith & Waterman (local alignment)"};
         private PairwiseAlignmentAlgorithm[] algorithm = {new NeedlemanWunsch(),
    new SmithWaterman(),
    };

/**
 * Creates new form main_menu
 */
        public Smith_waterman() {
    initComponents();
    algorithm_combo = new JComboBox(algorithm_name); 
```

有人可以告诉我如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:39:40.030

看这个例子，它会给你一些想法......

```
public class MainClass extends JPanel implements ItemListener {
  public MainClass() {
      JComboBox jc = new JComboBox(); 
      jc.addItem("France"); 
      jc.addItem("Germany"); 
      jc.addItem("Italy"); 
      jc.addItem("Japan"); 
      jc.addItemListener(this); 
      add(jc); 
  }

  public void itemStateChanged(ItemEvent ie) {
      String s = (String)ie.getItem(); 
      System.out.println(s); 
  }

  public static void main(String[] args) {
    JFrame frame = new JFrame();
    frame.getContentPane().add(new MainClass());

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(200, 200);
    frame.setVisible(true);
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T20:41:24.283

要填充组合框，您需要在 ComboBox 上使用 addItem() 方法

```
private String[] algorithm_name = {"Needleman & Wunsch (global alignment)","Smith & Waterman (local alignment)"};
JComboBox jc = new JComboBox(); 

// Then you can iterate over the array to populate the combobox
for (String name : algorithm_name) {
    jc.addItem(name);
} 
```

# clearcase - 如何将多个文件夹中的一堆添加到 ClearCase 源代码控制？

> ID：13461711
> 
> 赞同：1
> 
> 时间：2012-11-19T20:33:24.573
> 
> 标签：clearcase

我正在开发一个 C# 项目，它有一个包含 100 多个项目和数千个文件夹和文件的解决方案，我在不同文件夹中的该解决方案的不同项目中添加了一些新文件。

现在我想将它们添加到源代码管理并签入，但我不知道如何将它们作为一组进行跟踪。
到目前为止，我必须一一追踪它们以添加它们！

注意：这些文件夹中有数百个不应该签入的私人文件。
我曾经使用 Mercurial，因此我能够看到修改后的文件和新文件，并且能够创建忽略列表，因此我能够选择我想要添加到存储库的文件并忽略我不想添加的文件，但我在 ClearCase 中找不到任何类似的东西。

我发现一些线程解释了如何将文件添加为一堆，但仅当您想要添加文件夹的全部内容时。
我不想将这些文件夹中的所有文件都添加到源代码管理中，只应添加选定的文件，并且我想要明确的情况来忽略其他文件。（正如我提到的，我知道如何通过 TortoiseHG 工作台在 mercurial 中做到这一点，但我找不到 ClearCase 的类似功能！）

我如何通过 CleareCase 执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:56:56.763

好的，似乎 clearcase 没有显示（跟踪）不在其存储库中的文件的功能，除非您想将它们全部导入（在我的情况下这是不希望的操作）。它可能有一些东西，但它赢了如果没有，请不要让我感到惊讶，在过去的 2 年里，我必须使用这个……我一直想知道这个 .. 是如何幸存至今的，我团队中的每个人都讨厌这个软件，但我们无权迫使公司切换到另一个源代码控制。

这就是我修复（调整）我的问题的方式，我在备份文件夹中创建了项目的副本，然后我创建了一个本地 Mercurial 存储库并将整个内容推送到存储库中，除了我不想要的内容（通过创建忽略list)，然后我删除除 view.dat 之外的项目文件夹的内容，然后通过 Mercurial 对其进行更新。因此，我拥有了所需的全部内容，然后使用了 clearfsimport，因此我签入了所需的文件，然后将备份副本中的内容复制回项目文件夹中。

感谢 clearcase，我将从现在开始寻找新工作，我已经厌倦了处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:58:34.103

首先，没有`.hgignore`或没有`.gitignore`ClearCase。
其次，添加大量文件的常用方法是`clearfsimport`.

因此，您可以复制您的项目，并清除不需要的文件，`clearfsimport`其余的（如[该线程](http://www.ibm.com/developerworks/forums/message.jspa?messageID=13729755)中所述）。
请参阅“[如何使用 ClearCase 以递归方式“添加到源代码控制……”](https://stackoverflow.com/questions/138321/how-can-i-use-clearcase-to-add-to-source-control-recursively)？

* * *

OP 选择的解决方案符合在 clearfs 将源文件导入 ClearCase 之前必须执行的强制清理：

*   在现有源文件中创建本地（DVCS：Git 或 Mercurial）存储库
*   构建一个`.gitignore`或`.hgignore`与要忽略的文件
*   添加所有内容
*   犯罪
*   在其他地方克隆那个 repo，你就有了 clearfsimport 的“干净”源。

在 ClearCase 中获得源代码后，一种可能的方式来解决该工具的问题是：

*   创建 ClearCase 快照视图
*   在其中创建一个 Git 或 Hg 存储库（如“[如何将 git 桥接到 ClearCase？](https://stackoverflow.com/a/2342164/6309) ”中），像上面一样添加和克隆
*   使用您最喜欢的 DVCS（在与快照视图不同的工作树中）
*   只需在 ClearCase 中[`clearfsimport -mirror`](https://stackoverflow.com/a/12155919/6309)备份那些文件，只需将代码的稳定状态提交回 ClearCase。

# html - iOS：在 HTML NSString 中查找特定段落的结尾

> ID：13461712
> 
> 赞同：0
> 
> 时间：2012-11-19T20:33:27.420
> 
> 标签：html, objective-c, ios, nsstring

所以我收到一个带有 html 代码的 NSString，如下所示：

```
<p class="img"><img src="blahblahblah"></p><p>This is some text</p> 
```

我想找到**img-classed 段落的结尾**，所以我可以在两个段落之间插入一个标题。请注意：

*   img 分类的段落不一定是字符串中的第一段。
*   字符串中可以有多个 img-classed 段落，但我只需要在**第一个之后插入一些内容**

我想`</p>`在字符串中第一个 img-classed 之后找到字符位置，而不是解析它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:39:59.527

你要解析，真的没有别的选择。但是，请确保找到一个真正独特的标准。

这是 Cocoa+NSString 解决方案：

```
 NSScanner *scanner = [NSScanner scannerWithString:originalString];

            [scanner scanUpToString:@"<p class=\"img">" intoString:nil];
            [scanner scanString:@"par_categorie_2\">" intoString:nil];

            [scanner scanUpToString:@"</p>" intoString:nil];
            [scanner scanString:@"</p>" intoString:nil];

            NSInteger insertionPoint = scanner.scanLocation;

            NSMutableString *modifiedString = [[NSMutableString alloc] initWithString:originalString];
            [modifiedString insertString:insertedString atIndex:insertionPoint]; 
```

# jquery - -o-backface-visibility 在 Opera 中不起作用？

> ID：13461714
> 
> 赞同：2
> 
> 时间：2012-11-19T20:33:34.817
> 
> 标签：jquery, css, css-transitions

**所以我在悬停时使用这个 CSS 3D 转换......**

**作品：** Webkit，FF **不工作：** Opera **未经测试：** IE

从 Chris 的文章中我可以看出，Opera 确实支持 -o-backface-visibility（请参阅底部的浏览器支持表）。不过，即使在他的示例中，该属性似乎也没有保留在 Opera 中。然而，他似乎确实为 Opera 管理了一个后备悬停，所以如果我能做到这一点，我会很满足，但我还没有。

[http://css-tricks.com/almanac/properties/b/backface-visibility/](http://css-tricks.com/almanac/properties/b/backface-visibility/)

**小提琴：http:** [//jsfiddle.net/uxable/YHeKX/](http://jsfiddle.net/uxable/YHeKX/)

（哇……没有简单的方法可以粘贴我的小提琴代码吗？必须有……）

```
<div class="flip"> 
  <div class="card"> 
    <div class="face front">Front</div> 
    <div class="face back">Back</div> 
  </div> 
</div> 
```

和

```
 .flip {
   position: relative;
   -webkit-perspective: 1000;
   -moz-perspective: 1000;
   -ms-perspective: 1000;
   -o-perspective: 1000;
   margin: 0 0 20px 0;
}
.card {
   width: 200px; 
   height: 50px;
   position: relative;
   -webkit-transform-style: preserve-3d;
   -webkit-transition: 0.5s;
   -moz-transform-style: preserve-3d;
   -moz-transition: 0.5s;
   -ms-transform-style: preserve-3d;
   -ms-transition: 0.5s;
   -o-transform-style: preserve-3d;
   -o-transition: 0.5s;
}
.flip:hover .card {
   -webkit-transform: rotateY(180deg);
   -moz-transform: rotateY(180deg);
   -ms-transform: rotateY(180deg);
   -o-transform: rotateY(180deg);                
}
.face {
   position: absolute;
   -webkit-backface-visibility: hidden;
   -moz-backface-visibility: hidden;
   -ms-backface-visibility: hidden;
   -o-backface-visibility: hidden;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   color: white;
   line-height: 50px;
   text-align: center;
}
.no-hide .face {
   -webkit-backface-visibility: visible;
   -moz-backface-visibility: visible;
   -ms-backface-visibility: visible;
   -o-backface-visibility: visible;
}
.front {
   background: red;
   z-index: 10;
}
.back {
   -webkit-transform: rotateY(180deg);
   -moz-transform: rotateY(180deg);
   -ms-transform: rotateY(180deg);
   -o-transform: rotateY(180deg);
   background: green; 
}
.flip:hover .front {
   z-index: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T08:43:19.037

是的，不工作。

在[Mozilla 开发者网络](https://developer.mozilla.org/ru/docs/CSS/backface-visibility)中不支持 Opera。在 Opera Presto 规范中，它已经过时了。[链接到搜索](https://www.google.com/search?q=site%3awww.opera.com/docs/specs/%20backface-visibility)

# jquery - 在 jquery 对话框中呈现的部分视图中的客户端验证，没有 Unobtrusive

> ID：13461715
> 
> 赞同：1
> 
> 时间：2012-11-19T20:33:35.453
> 
> 标签：jquery, asp.net-mvc-3, jquery-validate, asp.net-ajax, unobtrusive-validation

我在 jquery 对话框中有登录部分视图。当我单击带有空文本框的“登录”按钮时，应该显示错误，但它与服务器的空值一起出现并收到此错误。我想使用客户端验证，但对话框中的部分视图不会更改为 html 输入...。我也尝试使用 Unobtrusive ，但在 IE9 中出现了各种错误。

现在，我使用了这些脚本：

```
 <script src="@Url.Content("~/Scripts/jquery-1.4.4.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

如果没有 Unobtrusive，我应该怎么做客户端验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:12:08.480

如果您不想使用不显眼的插件，那么您将需要手动配置 jquery 验证插件。有多种方法可以做到这一点，我建议您从以下链接开始： http: [//docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

但请考虑到，如果不使用不显眼的验证插件，您将不会受益于 MVC 3 中关于客户端验证的所有现有基础设施，例如渐进式增强或基于数据注释的客户端和服务器端验证。

ASP MVC 3 附带的 jquery.validate.unobtrusive 脚本依赖于 jquery 版本 1.5.1，MVC 3 也附带它。它可能适用于更高版本（我已将它与版本 1.6.4 一起使用）但我是不确定像 1.4.4 这样的较低版本。jquery.validation 脚本也依赖于 jquery 版本。例如，jquery.validation 1.8 可以很好地与 jquery 1.5.1 配合使用，但如果您使用的是 jquery 1.6.4，则需要升级到 jquery.validation 1.10。

因此，在默认的 MVC 3 应用程序中，您可以使用以下脚本：

```
 <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

还要确保通过将这些设置添加到配置文件（在创建新的 MVC 3 应用程序时默认设置）在您的 MVC 应用程序上启用客户端验证

```
<configuration>
  ...
  <appSettings>
    ...
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    ...
  </appSettings> 
```

最后要考虑到 validate 不显眼的脚本将在最初加载文档时实际解析文档。如果您检查 jquery.validate.unobtrusive.js 文件，您将在文档末尾看到这些行：

```
$(function () {
    $jQval.unobtrusive.parse(document);
}); 
```

因此，在页面最初加载后加载到 DOM 中的任何内容都不会由不显眼的验证处理，并且需要您手动解析。这可以通过定义如下函数来完成，包含在您的页面或常见的 javascript 文件中：

```
function partialViewLoaded(request, status, partialViewId) {
    if (request.responseText != "") {
        //Hook validations on elements of the loaded view
        $.validator.unobtrusive.parse($(partialViewId));        
    }
} 
```

该函数将在使用 ajax 加载局部视图后调用。如果您使用的是 MVC Ajax 助手，您可以设置一个完整的回调，如下所示（假设您正在将视图加载到 id 为“loginForm”的元素中）：

```
@using(Ajax.BeginForm(new AjaxOptions{ 
                           UpdateTargetId = "loginForm", 
                           OnComplete = "partialViewLoaded(xhr, status, '#loginForm')" })){ 
```

如果您使用 jquery 手动执行 ajax 调用，那么您还可以设置完整的回调，如下所示：

```
$.ajax({
     url: "yourURL",
     complete: function(xhr, status){
         partialViewLoaded(xhr, status, "#loginForm");
     }
}); 
```

# jquery - jQuery UI 可拖动的第二次拖动不恢复

> ID：13461716
> 
> 赞同：-1
> 
> 时间：2012-11-19T20:33:36.497
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我在使用 jQuery UI 可拖动对象时遇到了一些问题。我已经构建了一个系统，您可以在其中将图标从站点的左列拖到可放置区域。我将代码设置为在放置图标后立即恢复图标（它在可放置区域中创建了一个不同的对象）。

第一次将任何给定图标拖动到可放置区域时，它将完美还原。但是，第二次拖动图标并将其放下时，它会在页面内垂直恢复到正确的位置，但水平它会停在可放置区域的边界处。

我很快会在这里添加一些代码，但想知道是否有人遇到同样的问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:30:49.690

我其实只是想通了。我在函数调用中添加了 helper: "clone" ，它运行良好。多谢你们

# php - 正则表达式检测单词缩写

> ID：13461719
> 
> 赞同：0
> 
> 时间：2012-11-19T20:33:40.963
> 
> 标签：php, regex

我目前正在处理一个包含葡萄牙行政区和邮政编码信息的 CSV，但该文件不遵循任何严格的格式，这意味着有时整个字符串都是大写的，以及其他问题。

我要解决的问题如下：某些地区的名称末尾有一个缩写，与它的父母的行政级别有关，我想删除它。据我所知，这是规则：

1.  缩写的长度不超过 3 个字符（到目前为止总是 3 个字符）；
2.  第一个字符可以是任何字母，不区分大小写；
3.  最后 2 个字符始终是辅音（例如 Z、B、M、P、..）；
4.  **（编辑）**缩写总是作为字符串中的最后一个单词出现；

**（编辑 2）** - 字符串总是`UTF-8`

目的是从区域名称中删除此缩写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:37:26.433

听起来很简单。。

```
/\b[a-z][ZBMP]{2}\b/i 
```

将匹配任何此类描述的缩写，将字母添加到第二个字符类 ( `[ZBMP]`) 以完成匹配。

只有当它不是另一个词的一部分时它才会匹配（这是`\b`' 的工作）。

# javascript - 我以为我定义了我的 jQuery 函数，但我不断收到“未定义”错误。为什么是这样？

> ID：13461723
> 
> 赞同：1
> 
> 时间：2012-11-19T20:33:52.190
> 
> 标签：javascript, jquery, html, function

我的 HTML 文件：

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" />
        <script src="script.js" type="text/javascript"></script>
    </head>
    <body>
        <form name="someForm">
            <input type="button" value="Click me" onClick="myFunction()" />
        </form>
        <div id="result"></div>
    </body>
</html> 
```

我的 script.js 文件：

```
function myFunction(){
    $("#result").html("BUTTON WORKS");
} 
```

我有 Firebug，每当我单击按钮时，Firebug 都会向我抛出此错误：

> ReferenceError: myFunction 未定义

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:36:24.720

`script`不能是 HTML 中的自闭合标签（它适用于某些浏览器，具体取决于文档类型，但它不正确）。您必须添加一个结束标签。

代替

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" /> 
```

和

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

由于此错误，指向您的脚本的脚本元素可能未正确解析。

从[规范](http://www.w3.org/TR/html-markup/spec.html#script)：

> 脚本元素必须同时具有开始标记和结束标记。
> 
> 块引用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:36:04.453

可能是由于文件参考问题。

将事件附加在 js 文件中而不是 HTML 中是一种更好的做法。

```
<form name="someForm">
    <input type="button" id="btn" value="Click me" />
</form>

$('#btn').on('click', function(){
    $("#result").html("BUTTON WORKS");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T20:55:25.363

您是在本地（`file://`地址栏中有）还是从某个服务器（`http://`地址栏中的协议）打开该文件？因为如果您在本地打开文件，您实际上会尝试从地址加载 jquery：

> 文件：//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js

这是不正确的。发生这种情况是因为您使用`//ajax.googleapis.com/...`as 地址，它引用与当前打开的页面相同的协议。

将其更改为：

> [http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js)

将您的文件上传到某个服务器（甚至在本地安装一个）并通过完整的 http 请求对其进行测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T21:03:11.973

我通过结合@Susbanth、@MBO 和@dystroy 的答案解决了这个问题。

这是我的新 HTML 文件：

```
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script src="script.js" type="text/javascript"></script>
    </head>
    <body>
        <form name="someForm">
            <input type="button" value="Click me" />
        </form>
        <div id="result"></div>
    </body>
</html> 
```

我在 jQuery 源代码中添加了“http”，关闭了标签，并从 HTML 中删除了“onClick”。

这是更新后的 script.js 文件：

```
$(document).ready(function(){
    $("input[type=button]").on("click",function(){
        $("div#result").html("BUTTON WORK");
    });
}); 
```

我将 onClick 事件设为 jQuery 事件。

# php - SyntaxError：意外的令牌非法

> ID：13461728
> 
> 赞同：2
> 
> 时间：2012-11-19T20:34:15.867
> 
> 标签：php, javascript, jquery, google-chrome

我在 chrome 上出现“SyntaxError: Unexpected token ILLEGAL”错误。

```
<?
$data = "this is description
         new line";
?>

$(".gantt").gantt({
  desc: "<? echo $data; ?>"
}); 
```

错误在“这是描述”和“新行”之间。为什么我不能在那里使用输入？有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T20:38:12.870

JavaScript 字符串中不能有（未转义的）新行。

您正在输出：

```
$(".gantt").gantt({
  desc: "this is description
         new line"
}); 
```

之后的新行`description`无效。

你需要`json_encode`你的价值（是的，`json_encode`也适用于纯字符串）。

```
$(".gantt").gantt({
  desc: <? echo json_encode($data); ?>
}); 
```

请注意，我删除了引号。 `json_encode`将为您添加报价。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:37:55.597

您的代码将在客户端呈现为：

```
$(".gantt").gantt({
  desc: "this is description
         new line"
}); 
```

这是不允许的，因为 JavaScript 不支持多行字符串（反正不是这样）。我不确定您要做什么，但如果您只想让 JavaScript 中的字符串跨越多行，您可以执行以下操作：

```
<?
$data = "this is description\
         new line";
?> 
```

或这个：

```
<?
$data = "this is description\" +
        \"new line";
?> 
```

甚至这样：

```
<?
$data = "this is description\\
         new line";
?> 
```

要了解这些样式之间的区别，请查看客户端的渲染源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:37:49.630

```
...
desc: "<?= str_replace('\n', '\\n', $data); ?>",
... 
```

Javascript 会在换行符上阻塞，但您可以“转义”以避免该问题。

或者，正如 Marc B 提到的，您可以使用[`json_encode`](http://php.net/manual/en/function.json-encode.php)：

```
...
desc: <?= json_encode($data); ?>,
... 
```

*如果您发现`json_encode`输出为空值，那么您很可能需要[`utf8_encode`](http://php.net/manual/en/function.utf8-encode.php)您的内容。*

# android - 使用自定义颜色突出显示 webview 中的搜索文本

> ID：13461732
> 
> 赞同：2
> 
> 时间：2012-11-19T20:34:38.737
> 
> 标签：android, android-webview

经过大量搜索有关如何完成此操作的文档后，我终于将其发布在 SO 上。

目前在我的应用程序中，我已经实现了一个搜索功能来搜索 webview 中的文本。我正在使用内置的 webview 方法在 webview 中搜索和突出显示用户搜索的文本的所有文本条目。

我现在想将默认突出显示颜色更改为我自己的自定义颜色，而不是使用默认实现。我一直在尝试到处寻找这个，但我没有看到任何具体的方法可以做到这一点。

有人可以就如何做到这一点给出一些提示/建议。如果您停下来并提出一些想法，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:37:46.097

这对你有用吗：http: [//danbarnett.net/how-to-hide-android-webview-highlight-border-or-change-its-color-142.html](http://danbarnett.net/how-to-hide-android-webview-highlight-border-or-change-its-color-142.html)

从它的声音来看，您实际上无法更改默认值，但您可以解决它，或者使用 jquery 和一些 css 覆盖它。

还有更多感兴趣的 Google 结果：http: [//www.icab.de/blog/2010/01/12/search-and-highlight-text-in-uiwebview/](http://www.icab.de/blog/2010/01/12/search-and-highlight-text-in-uiwebview/)

还有一个很好回答的溢出问题： [Android webview: highlight a specific word in a page using javascript?](https://stackoverflow.com/questions/5294562/android-webview-highlight-a-specific-word-in-a-page-using-javascript)

# git - 允许多个用户通过 ssh 和 git 部署

> ID：13461735
> 
> 赞同：0
> 
> 时间：2012-11-19T20:34:42.933
> 
> 标签：git, github, ssh

我们已经建立并运行了一个名为`sasse`. 我们使用简单的 SSH 和 Git (Github) 部署策略，其中代码只是简单地`pull`从 Github 帐户 :ed 到部署服务器（并刷新）。

目前，该网站的文件由`sasse`服务器上的用户拥有，但具有组写入权限。这些文件位于`/home/sasse/sasse`.

```
drwxrwxr-x 10 sasse sasse  4096 Nov 16 07:58 .
drwxr-xr-x  5 sasse sasse  4096 Nov 19 15:13 ..
-rw-rw-r--  1 sasse sasse 45948 Nov 10 05:42 CHANGELOG.txt
-rw-rw-r--  1 sasse sasse   925 Nov 10 05:42 COPYRIGHT.txt
... 
```

这意味着`git pull`当您在`sasse`服务器上登录时它可以正常工作，但是如果我以我的个人帐户（已添加到`sasse`组中的 sudo 帐户）执行此操作，则任何更改的文件都将属于我；我的主要组不是`sasse`。即在拉动影响 COPYRIGHT.txt 的更改之后：

```
drwxrwxr-x 10 sasse sasse    4096 Nov 16 07:58 .
drwxr-xr-x  5 sasse sasse    4096 Nov 19 15:13 ..
-rw-rw-r--  1 sasse sasse   45948 Nov 10 05:42 CHANGELOG.txt
-rw-rw-r--  1 victor victor   925 Nov 10 05:42 COPYRIGHT.txt 
```

这意味着`chown -R sasse:sasse .`如果我想保持原来的所有权状态，我必须记住这样做——如果下次其他人能够拉动，这是必要的。他们很可能是！

需要多人可以将代码部署到我们的服务器，因此该`sasse`帐户是非个人的。我不希望人们登录它，而是使用具有相关组成员资格/权限的个人帐户。

问题：

*   处理多人需要访问以在同一服务器上部署代码的情况的最佳方法是什么？
    *   我们是否应该简单地允许每个人都使用该`sasse`帐户进行部署？*
    *   我们是否应该保持一种策略，让用户对存储库具有组访问权限（或 sudo 访问权限），但以某种方式解决权限混乱的问题？如果是这样，怎么做？我可以让 git pull “作为特定用户”吗？

^(*可能通过添加公钥`authorized_keys`而不是让`sasse`编辑该文件本身)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:47:06.623

使用[gitolite](https://github.com/sitaramc/gitolite)和适当的后接收（或类似）挂钩。其中之一应该是对刚刚推送的 ref 的结帐。

# java - 非 Void 方法调用而不分配返回值

> ID：13461738
> 
> 赞同：1
> 
> 时间：2012-11-19T20:34:50.833
> 
> 标签：java

我倾向于认为大多数时候调用变量返回方法来将返回值分配给变量，例如：

```
return1 = object.DoSomething(); 
```

然而，除了执行方法之外：当调用返回方法并且返回值未分配给变量时会发生什么？例如：

```
object.DoSomething(); 
```

这是一个好习惯吗？去哪儿了`return`？

JB Nizet 发表了一个非凡的评论，指出在大多数情况下都实现了方法。有点解释为什么这种情况经常发生。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T20:36:45.477

人们总是这样做。如果您不需要该方法返回的变量，则不必将其分配给任何东西。

请记住，有时返回变量有一些含义，例如操作是否成功，您可能想对这些信息做一些事情

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T20:36:41.323

我认为这是有效的。除非您需要进一步使用返回值，否则最好忽略（您可以从代码审查工具中将标志保存为未使用的变量）。

方法执行和流程保持不变，唯一的问题是您忽略了返回值。

这是否是一种好习惯取决于情况，例如，如果您有要求在执行查询时更新多少行，则需要捕获返回值，但大多数时候开发人员会忽略这一点，因为他们不需要跟踪多少行记录已更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T20:36:30.320

该方法的调用方式与将返回值分配给变量时的方式相同。

这是一种完全可以接受的做法，并且在调用`void`不返回值（因此不能分配给对象）的方法时是必需的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T20:36:43.950

**-**它总是最好`void`用作您不想分配或使用返回值的**返回类型。**

**-**它不会在效率上造成任何问题，但会被认为是松散的编程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T20:36:52.933

该代码将完全正常编译和运行。

# android - 在 Android 中进行异步服务调用

> ID：13461741
> 
> 赞同：1
> 
> 时间：2012-11-19T20:35:03.547
> 
> 标签：android

我正在尝试使用 AsyncTask 类在我的 android 应用程序中进行异步服务调用，但是对于我的活动中的每个服务调用，我需要在我的应用程序中有一个扩展 AsyncTask 的子类。任何人都可以建议我这样做的更好方法吗？？？

在我的场景中，服务调用有不同的返回类型，那么我需要为所有服务调用返回一个对象并根据它进行类型转换，有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:38:46.787

这是你写的服务吗？如果是这样，您可以使服务本身异步，以便您可以对其进行调用并立即返回，然后通过回调获得通知。这将消除对 Activity 的 AsyncTasks 的需要。

如果您无法更改服务，您可以做的一件事是拥有一个负责与服务交互的后台工作线程，并使用处理程序从主线程向其发布消息。一旦每个工作项完成，工作线程使用另一个处理程序将结果传递回 UI 线程。

请参阅：http: [//developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:37:53.080

[“AsyncTask 必须子类化才能使用。”](http://developer.android.com/reference/android/os/AsyncTask.html) sez 机器人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:54:47.867

不要将 AsyncTask 声明为活动的内部类。在它自己的范围内声明这个类一次，你可以在任何地方使用它。至于传入传出的数据，可以将第一个参数设为String或者Uri，传入请求数据，也可以在AsyncTask中使用可以由activity设置的内部监听对象来接收调用当 onPostExecute 触发时返回。

**编辑**

我做了一个要点来演示这个最简单的版本。使用示例 AsyncTask 派生类，您可以在整个应用程序中重用这个类，并将其传递给您的所有端点，并在您的活动（或您需要进行服务调用的任何其他地方）中接收结果。如果您需要使其更广泛，您可以将输入对象从 String 更改为一些更复杂的数据结构，其中包含您需要传递给服务调用的任何内容（post params、http 方法等），您可以更改签名如果要返回结构化数据而不仅仅是原始结果，则使用 OnPostExecuteListener 接口

[https://gist.github.com/80c59fb70e195ca142bb](https://gist.github.com/80c59fb70e195ca142bb)

# sql-server - 无法使用pyodbc在Django中加载长度超过19455个字符的文本字段的记录

> ID：13461742
> 
> 赞同：1
> 
> 时间：2012-11-19T20:35:07.163
> 
> 标签：sql-server, django, pyodbc, django-pyodbc

我有一个这样的 Note 模型（这是从旧版 MS SQL Server 数据库中提取的，因此这些记录中的大多数不是由 Django 创建的）：

```
class Note(models.Model):
    id = models.AutoField(primary_key=True, db_column="note_id")
    content = models.TextField(db_column="note_content", blank=True, null=True)
    date_created = models.DateTimeField(db_column="date_created", auto_now_add=True)
    date_modified = models.DateTimeField(db_column="date_modified", null=True, blank=True)
    date_removed = models.DateTimeField(db_column="date_deleted", null=True, blank=True) 
```

`.get`在某些记录上运行 a会返回 a `DoesNotExist`，即使它们存在于数据库中。

事实证明，当 MS SQL Server `TEXT`（如，`CREATE TABLE Foo ( content TEXT null)`）字段中的内容长度超过一定数量时，就会发生这种情况；特别是 19455 个字符。

这是它在运行中的样子：

```
>>> note = Note.objects.get(pk=1)
>>> note.content = "x" * 19455
>>> note.save()
>>> note = Note.objects.get(pk=1)
>>> note.content = "x" * 19456
>>> note.save()
>>> note = Note.objects.get(pk=1)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/path/to/django/db/models/query.py", line 366, in get
    % self.model._meta.object_name)
DoesNotExist: Note matching query does not exist. 
```

我正在使用 FreeTDS，并将文本大小设置为 2147483647，这*似乎*是我正在使用的 MS SQL Server 版本的上限。

根据this [other question on truncation](https://stackoverflow.com/questions/11882910/python-with-ms-sql-truncated-output)，您应该在指令前面加上`SET TEXTSIZE n`n 是以字节为单位的值，这将解决数据被截断的问题。所以我想知道这是否发生在我的案例中，以及它是否会解决它。

因此，我继续编写了一些仅使用光标和`SET TEXTSIZE`命令的代码。

首先，让我们看一下记录中*应该*包含哪些内容：

> > > print "长度: %d; 最后 40 个字符: %s" % (len(note.content), note.content[-40:]) 长度: 19456; 最后 40 个字符：rVEF1cCJeRaTtcdkXMqqQUxEVLZapMGVGSxMfJ2T

现在我们循环遍历。每次我们增加 TEXTSIZE 设置并显示喜欢的记录。我们还显示返回记录字段的长度和最后 10 个字符。

```
>>> for xx in xrange(19450, 19460):
...     cursor = connection.cursor()
...     try:
...         qrys = 'SET TEXTSIZE %d SELECT [Notes].[note_id], [Notes].[note_content] FROM [Notes] WHERE [Notes].[note_id] = 1' % xx
...         print qrys
...         qry = cursor.execute(qrys)
...         record = qry.fetchone()
...         if record:
...             record_id, record_content = record
...             print record_id, len(record_content), record_content[-10:]
...         else:
...             print "No record found after TEXTSIZE set to %d" % xx
...             break
...     except Exception, inst:
...         print "Error: %s (%s)" % (inst, type(inst))
...         break
...     finally:
...         cursor.close()
... 
SET TEXTSIZE 19450 SELECT [Notes].[note_id], [Notes].[note_content] FROM [Notes] WHERE [Notes].[note_id] = 1
1 19450 VLZapMGVGS
SET TEXTSIZE 19451 SELECT [Notes].[note_id], [Notes].[note_content] FROM [Notes] WHERE [Notes].[note_id] = 1
1 19451 LZapMGVGSx
SET TEXTSIZE 19452 SELECT [Notes].[note_id], [Notes].[note_content] FROM [Notes] WHERE [Notes].[note_id] = 1
1 19452 ZapMGVGSxM
SET TEXTSIZE 19453 SELECT [Notes].[note_id], [Notes].[note_content] FROM [Notes] WHERE [Notes].[note_id] = 1
1 19453 apMGVGSxMf
SET TEXTSIZE 19454 SELECT [Notes].[note_id], [Notes].[note_content] FROM [Notes] WHERE [Notes].[note_id] = 1
1 19454 pMGVGSxMfJ
SET TEXTSIZE 19455 SELECT [Notes].[note_id], [Notes].[note_content] FROM [Notes] WHERE [Notes].[note_id] = 1
1 19455 MGVGSxMfJ2
SET TEXTSIZE 19456 SELECT [Notes].[note_id], [Notes].[note_content] FROM [Notes] WHERE [Notes].[note_id] = 1
No record found after TEXTSIZE set to 19456
>>> 
```

因此，只要我们*尝试*检索 TEXTSIZE 设置为大于 19456 的数字的记录，就不会返回任何记录。您会注意到字符串的最后 10 个字符与上面的字符串相匹配，**减去**因太短而丢失的字符。例如，对于找到的最后一条记录，最后 10 个字符是`MGVGSxMfJ2`. 它缺少`T`真实记录中的 19455 的 TEXTSIZE 比相关字段的长度小一。

所以现在我当然想知道，**这是怎么回事？？？**是否有任何进一步的故障排除我可以确定这是否是 django-pyodbc、pyodbc 或 FreeTDS 的问题？它也可能是 SQL Server，但`SET TEXTSIZE 19456 SELECT [Notes].[note_id], [Notes].[note_content] FROM [Notes] WHERE [Notes].[note_id] = 1`直接在 Server Management Studio 中运行似乎可以正常工作并返回正确数量的字符。

另请注意，保存**工作**：

```
>>> note.content = (note.content * 10)[:65536] # 65536 is max length allowed for TEXT, apparently
>>> len(note.content)
65536
>>> note.save()
>>> cursor = connection.cursor()
>>> qry = cursor.execute( 'SELECT [Notes].[note_id], DATALENGTH([Notes].[note_content]) FROM [Notes] WHERE [Notes].[note_id] = 1')
>>> record = qry.fetchone()
>>> record
(1, 65536)
>>> 
```

# jsp - Liferay：JSF 中的权限检查

> ID：13461743
> 
> 赞同：2
> 
> 时间：2012-11-19T20:35:08.740
> 
> 标签：jsp, jsf, liferay

我在[http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/security-and-permissio-4](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/security-and-permissio-4)关注 Liferay 的安全和权限章节，并已达到**添加权限**部分.

我面临的问题是我使用的是 JSF 而不是 JSP。如何使用标签向用户公开权限接口：

```
<liferay-security:permissionsURL modelResource="<%= BlogsEntry.class.getName() %>" modelResourceDescription="<%= entry.getTitle() %>" resourcePrimKey="<%= entry.getPrimaryKey().toString() %>" var="entryURL" /> 
```

和

```
<liferay-ui:icon image="permissions" url="<%= entryURL %>" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-01-16T02:06:21.543

使用[`portal:permissionsURL`](https://liferayfaces.org/web/guest/portal-showcase/-/portal-tag/portal/permissionsurl/general)：

```
<portal:permissionsURL resourcePrimKey="#{permissionsURLModelBean.portletResourcePrimaryKey}" var="permissionsURL" />
<h:outputLink value="#{permissionsURL}">Click Me!</h:outputLink> 
```

该组件可从[Liferay Faces Portal JAR](https://search.maven.org/search?q=a:com.liferay.faces.portal)获得：

```
<dependency>
    <groupId>com.liferay.faces</groupId>
    <artifactId>com.liferay.faces.portal</artifactId>
    <version>3.0.3</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T14:01:14.327

您必须添加 Liferay Faces Portal Jar，这是一个 util jar，可以从[https://www.liferay.com/community/liferay-projects/liferay-faces/download](https://www.liferay.com/community/liferay-projects/liferay-faces/download)下载。

然后您可以使用 放置权限链接。

例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<f:view 
    ...
    xmlns:liferay-security="http://liferay.com/faces/security"
    >
    ...
    <liferay-security:permissionsURL
        modelResource="..."
        modelResourceDescription="..."
        resourcePrimKey="..." >
                permission
    </liferay-security:permissionsURL>  
    ...
</f:view> 
```

# php - PHP中用户友好的错误消息

> ID：13461749
> 
> 赞同：0
> 
> 时间：2012-11-19T20:35:28.943
> 
> 标签：php

我有三个文本文件，其中包含三种语言的相同错误消息集：英语、法语和德语。

我需要扩展异常类，以便当出现问题时，会抛出自己的异常对象，例如“throw new My-Exception("English", 4) - 然后将显示英文文件中的第 4 条消息。

这是我到目前为止所做的：

```
<?php  

class My_Exception extends Exception {  

     function __construct($lang, $errcode) {  
        $this->lang = $lang;  
        $this->errcode = $errcode;  
     }  

   function getMessageMap() {  
        $errors = file('errfiles/'.$this->lang.'.txt'); 

        foreach($errors as $error) {  
            list($key,$value) = implode(',', $errors); 
            $errorArray[$key] = $value; 
        }  
        return $errorArray[$this->errcode];  
    }  

}  

try {  throw new My_Exception('english', 3);  }  
catch (My_Exception $e) { echo $e->getMessageMap();  }  

?> 
```

这不能正常工作。我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:38:20.730

我不会为每种语言抛出特定的异常消息，而是坚持一个正常的异常。然后，在您的应用程序中，当您捕获这些错误时，您可以显示特定语言的错误页面。换句话说，不要因为最终的字体问题而彻底检查您的应用程序架构（即使是这种次要的方式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:28:48.190

我想你已经`implode()`和`explode()`混淆了。假设您的 errors.txt 文件如下所示：

```
1,I am error one
2,I am error two 
```

你希望每个`$errors as $error`人都这样`explode(',', '1,I am error one');`：

```
array("1", "I am error 1") 
```

是的，在`"1"`您专门将其转换为`int`using`(int)$errno`或之前，它是一个字符串`intval($errno)`。

PHP 是“松散类型”的，通常在后台执行此操作，因此您不必担心它，但您*应该*担心它。否则，您会偶尔遇到代码执行非常奇怪的事情的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:30:50.257

您提到错误消息如下所示：

> 文件（errfiles/English.txt）：无法打开流

所以尝试使用错误文件的完整路径...

```
$errors = file('C:/xampp/htdocs/HW4/errfiles/'.$this->lang.'.txt'); 
```

您还可以确认该文件确实以大写“E”开头吗？

第二个错误：

> 第 13 行 C:\xampp\htdocs\HW4\index.php 中为 foreach() 提供的参数无效

是因为第一个。解决这个问题，一切都很好。

# javascript - 引用 TypeScript 文件在输出中包含整个文件

> ID：13461758
> 
> 赞同：4
> 
> 时间：2012-11-19T20:35:59.253
> 
> 标签：javascript, windows-8, visual-studio-2012, typescript, web-essentials

我创建了一个安装了 TypeScript 0.8.1 和 Web Essentials 的新 Windows 8 JavaScript Blank 应用程序。

我已经添加了一个文件`foo.ts`和`bar.ts`我的项目。

`foo.ts`只包含一个简单的类：

```
class Foo
{ } 
```

`bar.ts`包含一个引用`foo.ts`和一个类栏：

```
/// <reference path="foo.ts" />

class Bar
{ } 
```

奇怪的是它`bar.js`同时包含 Bar 和 Foo 类：

```
var Foo = (function () {
    function Foo() { }
    return Foo;
})();
var Bar = (function () {
    function Bar() { }
    return Bar;
})(); 
```

出了什么问题？我正在使用共享`reference.ts`文件处理一个更大的项目。突然间，我所有的 ts 文件都被编译成每个 javascript 文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T16:29:47.820

我确实使用 -out 参数来控制编译器的文件放置。我刚刚发布了此位置的修复以进行测试： http: [//madskristensen.net/custom/webessentials2012.vsix](http://madskristensen.net/custom/webessentials2012.vsix)

请尝试一下并告诉我它是否有效。谢谢！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T21:16:38.090

`--out`通常，只有在您向编译器提供标志时才会发生这种情况：

```
tsc --out bar.js foo.ts bar.ts 
```

这是在保存时发生的，还是在构建时发生的？如果它发生在保存时，它与 Web Essentials 有关，而如果它发生在构建时，您应该检查项目文件的源以查看是否有`--out`标志。

# winforms - C# OpenFileDialog 仅在 Win7 中显示 XP-Style

> ID：13461759
> 
> 赞同：4
> 
> 时间：2012-11-19T20:36:00.230
> 
> 标签：winforms, windows-7, openfiledialog

我正在使用使用 System.Windows.Forms.OpenFileDialog 的 .NET 3.5 应用程序。但是，无论我做什么，打开的对话框都只显示 XP-Style 版本。我使代码尽可能简单：

```
OpenFileDialog openFileDialog = new OpenFileDialog()
//openFileDialog.AutoUpgradeEnabled = true; //Adding this line does nothing

if(DialogResult.OK == openFileDialog.ShowDialog())
{ ... } 
```

无论我做什么，对话框总是显示旧的 XP-Style 版本而不是新的 Vista+ 版本。我还注意到，当我调试并查看一些参数时，链中某处有一个受保护的成员变量：`SettingsSupportVistaDialog`，在本例中设置为`false`. 我不确定这是否是问题所在，或者在哪里/为什么可以设置。

有没有人有什么建议？

这是现有（XP 风格）对话框的屏幕截图 ![XP 样式对话框](../Images/3b82888eed35006fc06c7de9c45fb0a3.png)

这是我想要的样子： ![在此处输入图像描述](../Images/43d77f70aaf36da9ed4696673ed0d5f1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:48:28.097

我发现了问题。我不得不深入研究 .NET 3.5 源代码，但事实证明，如果`Application.VisualStyleState`未设置为`ClientAreaEnabled`，`ClientAndNonClientAreasEnabled`则将使用旧的 XP 样式对话框。

# javascript - 谷歌地图 api v3 infoBubble 数组不起作用

> ID：13461764
> 
> 赞同：1
> 
> 时间：2012-11-19T20:36:16.073
> 
> 标签：javascript, google-maps-api-3, infobubble

我有一张使用 infoBubble.js 的地图。

在这张地图中，我遍历了一系列位置。

单击自定义图标时应该会弹出 infoBubble，但由于某种原因，它只会打开第一个数据项。

有谁知道为什么会发生这种情况？

我在这里开发了它的代码；

```
var arrMarkers = [
    ['Santiago de Cuba', 20.040450354169483, -75.8331298828125],
    ['Las Tunas', 20.97682772467435, -76.9482421875],
    ['Camaguey', 21.39681937408218, -77.9205322265625],
    ['Playa Santa Lucia', 21.555284406923192, -77.0526123046875],
    ['Santa Clara', 22.421184710331854, -79.9639892578125],
    ['Cienfuegos', 22.161970614367977, -80.4473876953125],
    ['Havana', 23.12520549860231, -82.3919677734375],
    ['San Cristobel', 22.730590425493833, -83.045654296875],
    ['Pinar del Rio', 22.43641760076311, -83.69384765625]
];

var arrInfoWindowsCuba = [];

var arrInfoWindows = [];
arrMarkers[i] = marker;

function init() {

    var mapCenter = new google.maps.LatLng(21.616579336740603, -78.892822265625);
    map = new google.maps.Map(document.getElementById('map_canvas'), {
        zoom: 7,
        center: mapCenter,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    });
    var image = '/wp-content/themes/Shootcuba/images/map-icon.png';

    for (i = 0; i < arrMarkers.length; i++) {
        var marker = new google.maps.Marker({
            map: map,
            position: new google.maps.LatLng(arrMarkers[i][1], arrMarkers[i][2]),
            icon: image
        });

        var infoBubble = new InfoBubble({
            content: '<div class="phoneytext">' + arrMarkers[i][0] + '<div class="left-col2"></div></div>',
            boxClass: 'info-box',
            alignBottom: true,
            pixelOffset: new google.maps.Size(-150, -40),
            maxWidth: 300,
            padding: 0,
            closeBoxMargin: '0px',
            borderColor: '#ffffff',
            borderRadius: '0',
            maxWidth: 535,
            disableAutoPan: false,
            hideCloseButton: false,
            backgroundClassName: 'phoney'
        });
        google.maps.event.addListener(marker, 'click', function () {
            infoBubble.open(map, marker, i);
            console.log(arrMarkers);
        });

        arrMarkers[i] = marker;
        arrInfoWindowsCuba[i] = infoBubble;

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:42:02.120

[这是一个工作示例](http://jsbin.com/efobeg/13/edit)。我取出了您拥有的一些数组（我不完全确定它们的全部用途，并且它们仅在您发布的代码段中导致错误），但除此之外，您所做的一切都非常真实。最大的不同是我创建了一个单独的函数来创建标记。这主要是为了保持点击事件的范围彼此分开，因为点击事件总是触发最后一个事件，这向我表明范围没有正确分开。

特别是，我认为正在发生的事情是您一直将值覆盖到标记和 infoBubble 的事件函数，并且事件侦听器将引用这些变量的当前值，而不是您第一次附加侦听器时的值。进行单独的函数调用以维护事件的范围是最干净的解决方案。

# c++ - Hooks：为什么我们需要再次使用 VirtualProtect() 来恢复权限？

> ID：13461771
> 
> 赞同：8
> 
> 时间：2012-11-19T20:36:41.437
> 
> 标签：c++, winapi, x86, hook

这是一些标准代码，我们在其中安装了钩子，在我们感兴趣的函数的开头重写了一些字节。我的问题是：为什么我们需要重新保护一块重写的内存？我们不能只保留`PAGE_EXECUTE_READWRITE`权限吗？我们在这里假设我们需要不断地恢复原始字节并再次重新挂钩。

```
if (VirtualProtect(funcPtr, 6, PAGE_EXECUTE_READWRITE, &dwProtect)) // make memory writable
{
    ReadProcessMemory(GetCurrentProcess(), (LPVOID)funcPtr, Hook::origData, 6, 0); // save old data
    DWORD offset = ((DWORD)hook - (DWORD)funcPtr - 5);  //((to)-(from)-5)
    memcpy(&jmp[1], &offset, 4); // write address into jmp
    memcpy(Hook::hookData, jmp, 6); // save hook data
    WriteProcessMemory(GetCurrentProcess(), (LPVOID)funcPtr, jmp, 6, 0); // write jmp
    VirtualProtect(funcPtr, 6, dwProtect, NULL); // reprotect
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T20:40:46.620

门一开，任何人都可以进去。如果您已从内存范围中删除写保护，则任何代码都可以更新该内存 - 而不仅仅是您的代码。内存无法知道您的（合法）代码是更新它的代码，而不是一些可能的恶意软件，甚至只是也加载到进程空间中的普通错误 DLL。重新保护它有助于防止非您的代码更新您想要更改的内存位置。

# mysql - 如何从其他jsp文件中获取数据？

> ID：13461776
> 
> 赞同：0
> 
> 时间：2012-11-19T20:36:52.870
> 
> 标签：mysql, string, jsp

我想执行这个查询：

```
String query = "select login,full_name from users where team_id='" + a + "'"; 
```

`a`是一个变量，我将列数据保存在另一个文件中（不是在这个文件中，我试图执行查询）

`a`如果它在另一个文件中，我该如何使用这个变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:32:46.190

您可以在此处查看如何在 url 上获取参数值

[如何使用 JSP 从 URL 中获取参数](https://stackoverflow.com/questions/1890438/how-to-get-parameters-from-the-url-with-jsp)

# c++ - ROI 断言失败（C++ 和 openCV）

> ID：13461781
> 
> 赞同：1
> 
> 时间：2012-11-19T20:37:08.453
> 
> 标签：c++, opencv

我有一个 Student 类和一个 imagehandler 类（作为 opencv 图像处理程序）

学生对象有一个字段：

```
imagehandler img; 
```

在 imagehandler 类中有一个函数可以将图像从一个图像复制到另一个图像到某个位置。

```
void imagehandler::copy_paste_image(imagehandler& dst, int xLoc, int yLoc){
 cv::Rect roi(xLoc, yLoc, m_image.size().width, m_image.size().height);
 cv::Mat imageROI (dst.m_image, roi);
 m_image.copyTo(imageROI);
} 
```

并且 imagehandler 类有一个 Mat 对象 m_image：

```
private:
 cv::Mat m_image; 
```

现在主要是通过 imagehandler 指定的构造函数声明了一个新图像。

我用来制作图像的构造函数：

```
imagehandler::imagehandler(int width, int height)
: m_image(width, height, CV_8UC3){

} 
```

总的来说，我这样声明图像：

```
imagehandler CSImg((4*300), (320 * ceil((float)(numOfCSStudents/4)))); 
```

相信我：CSImg 比我想输入的所有图像都要大。

现在我想复制某个学生的图片，并输入到 CS Img 中。我就是做这个的：

```
studentsVector.at(i)->getImg().copy_paste_image(CSImg, CSWidthCount*300, CSHeightCount*320); 
```

我得到这个错误：

```
OpenCV Error: Assertion failed (0 <= roi.x && 0 <= roi.width && roi.x + roi.width <= m.cols && 0 <= roi.y && 0 <= roi.height && roi.y + roi.height <= m.rows) in Mat, file /build/buildd/opencv-2.3.1/modules/core/src/matrix.cpp, line 303
terminate called after throwing an instance of 'cv::Exception'
  what():  /build/buildd/opencv-2.3.1/modules/core/src/matrix.cpp:303: error: (-215) 0 <= roi.x && 0 <= roi.width && roi.x + roi.width <= m.cols && 0 <= roi.y && 0 <= roi.height && roi.y + roi.height <= m.rows in function Mat 
```

我注意到这发生在 roi 中，我不知道为什么。我是 openCV 的初学者，我这样做是为了做家庭作业。

谢谢你。如果您需要任何进一步的信息，请询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:55:19.067

我不确定 C++ API，但这是我在 C API 中所做的；

```
CvRect ROI = cvRect(x, y, width, height);
cvSetImageROI(srcImg, ROI);
IplImage* cropImg = cvCreateImage(cvGetSize(srcImg), IPL_DEPTH_8U, 1);//this part very important
cvCopy(srcImg, cropImg);
cvResetImageROI(srcImg); 
```

# asp.net - 为什么在我的嵌套 gridview 查询中出现“项目”一词？

> ID：13461790
> 
> 赞同：0
> 
> 时间：2012-11-19T20:37:28.173
> 
> 标签：asp.net, linq, data-binding, datagrid

我有一个查询，列出了嵌套在列出项目的网格视图中的团队成员......

```
public void GridView3_RowDataBound(object sender, GridViewRowEventArgs e)
    {

      if (e.Row.RowType != DataControlRowType.DataRow) return;

          GridView teamnestedgridview = (GridView)e.Row.FindControl("GridViewNested");
          int projectid = int.Parse(GridView3.DataKeys[e.Row.RowIndex].Value.ToString());

        var qryGetTeam = from emp in db.Employees
                            join etp in db.EmpToProjects on emp.employee_id equals etp.EmployeeID
                            where etp.ProjectID == @projectid
                            select emp.nickname;

                          teamnestedgridview.DataSource = qryGetTeam;
                            teamnestedgridview.DataBind(); 
```

当我运行它时，在 gridview 中，员工显示得很好。但是在他们的名字上方，就像一个标题一样，是“项目”这个词......

我试着做

first_name = emp.nickname

在选择中，然后在列表中显示“first_name”而不是“item”一词。知道如何消除那个“标题”吗？

![团队形象](../Images/64cb063cbf4ba1ab52db4a49d7c38b9e.png)

# ruby-on-rails - auto_link 在视图中显示纯文本 HTML - Rails 3.0

> ID：13461792
> 
> 赞同：1
> 
> 时间：2012-11-19T20:37:45.877
> 
> 标签：ruby-on-rails

我使用 auto_link 来生成可点击的 url：

```
<div> 
  <%= auto_link("Go to http://www.rubyonrails.org") %>
</div> 
```

在视图页面中，它应该显示

访问[http://www.rubyonrails.org](http://www.rubyonrails.org)

但是，它实际上以纯文本形式显示 HTML 代码：

```
Go to <a href="http://www.rubyonrails.org">http://www.rubyonrails.org</a> 
```

关于如何解决这个问题的任何建议？

Rails 版本是 3.0.17

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:43:16.193

它按预期工作，请参阅[https://github.com/tenderlove/rails_autolink](https://github.com/tenderlove/rails_autolink)（它替换了 Rails 3.1 中删除的功能）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:46:29.727

默认情况下 auto_link 返回净化的 html_safe 字符串。可以将 :sanitize 选项设置为 false 来覆盖此行为

```
 <%= auto_link("Go to http://www.rubyonrails.org", sanitize: false) %> 
```

# c++ - 运算符重载 = 否定未按预期工作

> ID：13461797
> 
> 赞同：1
> 
> 时间：2012-11-19T20:38:05.370
> 
> 标签：c++

所以我正在处理运算符重载，只是意识到我的否定运算符没有按应有的方式工作。我不确定我做错了什么。

.h 签名

```
Vector & Vector::operator-() 
```

.cpp 实现

```
Vector & Vector::operator-()
{
pVec[0] = -pVec[0];
pVec[1] = -pVec[1];
pVec[2] = -pVec[2];

return *this; 
```

};

来电：

```
cout << "-Vector E = " << -VecE << (-VecE).Magnitude() << endl << endl; 
```

VecE 中的变量类似于 [0, 1 , 1] 这意味着当它被调用时它应该将它们显示为 [0, -1, -1] 但事实并非如此。那么我错过了什么？

编辑：添加复制构造函数和 iostream<< 重载代码：

```
Vector::Vector(const Vector & Copy)
{
pVec = new double[3];
if (0 == pVec)
{
    exit(1);
}
else
{
    pVec[0] = Copy.pVec[0];
    pVec[1] = Copy.pVec[1];
    pVec[2] = Copy.pVec[2];
}
};

ostream & operator<<(ostream & Out, Vector & RHS)
{
cout.precision(1);
Out << fixed <<  "[ " << RHS.pVec[0] << " " << RHS.pVec[1] << " " << RHS.pVec[2] << " ]" << resetiosflags (ios_base::fixed);
return Out;
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T20:39:43.050

您需要返回向量的*副本*。这是写的方式，表达式`-VecE`实际上将*修改* `VecE`！由于您评估`-VecE`了两次，因此您对向量进行了两次否定，并且（当然）否定的否定是原始值。

要实施此更改，您需要更改`operator-()`声明以返回 a`Vector`而不是 a `Vector &`。

例如：

```
Vector Vector::operator-()
{
    Vector copy(*this);

    copy.pVec[0] = -copy.pVec[0];
    copy.pVec[1] = -copy.pVec[1];
    copy.pVec[2] = -copy.pVec[2];

    return copy;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:57:04.147

cdhowie 是对的。你否定了两次。

也就是说，我认为您不需要更改实现。

```
Vector const NegVecE = -VecE;
cout << "-Vector E = " << NegVecE << NegVecE.Magnitude() << endl << endl; 
```

编辑：正如 PiotrNycz 指出的那样，虽然这会起作用，但最终状态是不直观的，因此正确的解决方案是返回一个副本。

```
{
int i = 3;
int j = -i; //you would expect i to still be 3 here
} 
```

# android - Android：让父视图在点击时处理

> ID：13461799
> 
> 赞同：4
> 
> 时间：2012-11-19T20:38:14.393
> 
> 标签：android, android-layout, onclick, android-relativelayout

我有一个`RelativeLayout`包含几个项目：一个`ImageView`和几个小`TextView`的。从功能上讲，我希望在单击中的任何内容时触发相同的单击事件`RelativeLayout`。在视觉上，我想查看`RelativeLayout`更改的背景，以便它显示正在单击的整个布局（或“项目”）。

我的问题是，每次我点击`TextView`'s 时，点击都不会传播回父视图，因此背景颜色不会改变。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T20:44:04.703

确保您没有`OnClickListener`分配给您的任何孩子`RelativeLayout`通常足以让他们不收到点击。还要检查你是否有`android:cliclable="true"`任何机会。然后，一旦你`OnClickListener`对你的`RelativeLayout`它应该得到所有的点击。

# asp.net - 地理定位 IP 地址

> ID：13461803
> 
> 赞同：3
> 
> 时间：2012-11-19T20:38:34.800
> 
> 标签：asp.net, geoip

我正在寻找按大陆对我的服务器请求进行地理定位。

基本上，在做了一些初步研究之后，似乎有3种方法：1）使用浏览器提供的地理定位（但我认为当浏览器请求使用地理定位的权限时，没有人认真点击“是”）；2）获取IP地址列表，将该列表放入服务器上的数据库中，然后每次请求进入时，从该数据库中读取；我不想在每次请求时都必须访问数据库。3) 对外部服务器进行 HTTP 调用以获取位置；这甚至可能比 2) 慢。

基本上，我并不在乎确切地知道用户在哪里，我只需要知道他们在哪个大陆：北美洲，欧洲......

有没有一种不需要任何用户交互并且不需要在每个请求上读取数据库的方法？当我访问 www.intel.com 时，我会自动重新路由到法语站点；他们是怎么做到的？

感谢您的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T20:47:24.313

有一些免费的和一些商业的数据库，可以告诉你从 ip，从哪里来。

来自 maxmind [*] 的免费数据库：http: [//dev.maxmind.com/geoip/geolite](http://dev.maxmind.com/geoip/geolite)

和两个商业：
[http ://www.ip2location.com](http://www.ip2location.com)
[http://www.maxmind.com](http://www.maxmind.com)

在此站点中，您还可以找到有关如何使用该数据的 asp.net 示例，而且它们还有其他免费服务可供您使用，并查看使用的来源。

从以下网址获取 api 示例和数据库： http: [//www.maxmind.com/download/geoip/](http://www.maxmind.com/download/geoip/)

如果只有国家是您需要的，那么这个数据库文件

[http://www.maxmind.com/download/geoip/database/GeoIPCountryCSV.zip](http://www.maxmind.com/download/geoip/database/GeoIPCountryCSV.zip)

仅包含国家，与其他国家相比很小。

简而言之，这是如何工作的：数据库的格式为：

```
"1.20.0.0","1.20.255.255","18087936","18153471","TH","Thailand"
"1.21.0.0","1.21.255.255","18153472","18219007","JP","Japan"
"1.22.0.0","1.23.255.255","18219008","18350079","IN","India"
"1.24.0.0","1.31.255.255","18350080","18874367","CN","China" 
```

长数字是ip的翻译。因此，您读取用户的 IP，然后使用函数将其转换为 long，然后搜索数据库，这个 long 数字在哪里适合。

```
public long addrToNum(IPAddress Address)
{
    byte[] b = BitConverter.GetBytes(Address.Address);

    if (b.Length == 8)
        return (long)(((long)16777216 * b[0]) + ((long)(65536 * b[1])) + ((long)(256 * b[2])) + b[3]);
    else
        return 0;
} 
```

因此，如果您将它们添加到数据库中，那么您可以根据这个长数字索引数据库并查看 ip 的位置：

```
Select TOP 1 * from GeoIPCountryWhois WITH (NOLOCK) Where @myIpToLong BETWEEN begin_num AND end_num 
```

最好将结果缓存在会话变量上，而不是在每个页面请求上一次又一次地搜索。

[*] 非常感谢 maxmind 仍然与商业广告一起发布免费数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:41:33.467

在他们请求访问我的防火墙之前，我已经使用它来地理定位 IP 地址。不确定这是否是您正在寻找的，但它可能会有所帮助。

[http://www.geobytes.com/iplocator.htm](http://www.geobytes.com/iplocator.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:13:00.157

似乎您更喜欢第二种变体，但您不需要在*每个*请求上都访问数据库 - 例如，只需将结果缓存在 cookie 中。

还有一点疯狂 - 只是为了让您考虑额外数据库请求的成本：您可以根据需要转换一些地理数据库（寻找 Aristos 的答案）。每个 IP 都可以转换为 Int64，您可以制作大陆范围，同时将 DB 转换为您的格式。例如，0-10000 将是北美，10000-20000 - 欧洲，20000-30000 - 北美，依此类推，这样转换后的唯一任务就是找出这些范围内的 IP。

但是你必须做大量的工作来执行这样的转换，并且不要忘记更新它会非常~~头疼~~：IP-base 不是恒定的。
因此，DB 请求 + 缓存可能是最好的选择。

# javascript - 拉出图像并显示图像

> ID：13461805
> 
> 赞同：0
> 
> 时间：2012-11-19T20:38:45.160
> 
> 标签：javascript, html

我正在编写旋转 6 张图片的代码。所有图片都在一个 div 元素中。我的主要目标是点击任何图片，该图片显示在弹出框旁边。我创建了弹出框，但在提取图像时遇到问题。有任何想法吗？这是我的图像在正文中的编码方式。

```
<div>
<div id="screen">
<img alt="ff" src="Pics/usb.png" onmouseover="stop()" id="usb">
<img alt="ee" src="Pics/chip.png" onmouseover="stop()" height="100" width="100"   id="chip">
<img alt="dd" src="Pics/Computer_chip.jpg" onmouseover="stop()" id="cchip">
<img alt="cc" src="Pics/alaptop.jpg" onmouseover="stop()" id="laptop">
<img alt="bb" src="Pics/cell.jpg" onmouseover="stop()" id="cell">
<img alt="aa" src="Pics/cb.jpg" onmouseover="stop()" id="cb">
</div>
</div> 
```

这是我编写的 javascript

```
function loadPopup(){
//loads popup only if it is disabled
if(popupStatus==0){
    $("#backgroundPopup").css({
        "opacity": "0.0"
    });
    $("#backgroundPopup").fadeIn("slow");
    $("#popupContact").fadeIn("slow");
    $("#screen").css({
        "opacity": "0.0"            
    });
    $("#screen img").css({
        "position": "absolute"

        });

    popupStatus = 1;

}
}

//disabling popup with jQuery magic!
function disablePopup(){
//disables popup only if it is enabled
if(popupStatus==1){
    $("#backgroundPopup").fadeOut("slow");
    $("#popupContact").fadeOut("slow");

    popupStatus = 0;
    $("#screen").css({
        "opacity": "1"
    });
}
}

//centering popup
function posPopup(){
//request data for centering
var windowWidth = document.documentElement.clientWidth;
var windowHeight = document.documentElement.clientHeight;
var popupHeight = $("#popupContact").height();
var popupWidth = $("#popupContact").width();
//centering
$("#popupContact").css({
    "position": "fixed",
    "top": windowHeight/9-popupHeight/8,
    "left": windowWidth/2-popupWidth/8
});
$("#usb1").css({
    "position": "relative",
    "top": windowHeight/2-popupHeight/8,
    "left": windowWidth/2-popupWidth/8
});
//only need force for IE6

$("#backgroundPopup").css({
    "height": windowHeight
});

}

//CONTROLLING EVENTS IN jQuery
$(document).ready(function(){

//LOADING POPUP
//Click the image event!
$("#usb").click(function(){
    //centering with css
    posPopup();
    //load popup
    loadPopup();
    stop();

});
$("#chip").click(function(){
    //centering with css
    posPopup();
    //load popup
    loadPopup();
    stop();

});
$("#cchip").click(function(){
    //centering with css
    posPopup();
    //load popup
    loadPopup();
    stop();

});
$("#laptop").click(function(){
    //centering with css
    posPopup();
    //load popup
    loadPopup();
    stop();

});
$("#cell").click(function(){
    //centering with css
    posPopup();
    //load popup
    loadPopup();
    stop();

});
$("#cb").click(function(){
    //centering with css
    posPopup();
    //load popup
    loadPopup();
    stop();

});

//CLOSING POPUP
//Click the x event!
$("#popupContactClose").click(function(){
    disablePopup();
    m.run();
});
//Click out event!
$("#backgroundPopup").click(function(){
    disablePopup();
    m.run();
});
//Press Escape event!
$(document).keyup(function(e){
    if(e.keyCode==27 && popupStatus==1){
        disablePopup();
        m.run();
    }
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:11:24.790

这就是你需要的：

```
$("#images img").click(function() {
    var img = $(this).clone();
    $('#target img').remove(); 
    $('#target').html(img);     
});​ 
```

此代码正在克隆您单击的图像并将其写入目标 div。

这是工作[演示](http://jsfiddle.net/Ldfq2/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:46:40.570

你能分享一下你用来做这个的Javascript吗？基本上，您至少会给目标`<img`一个`id`并更改它`src`的属性以响应单击事件。

# opengl - OpenGL - 两种纹理的力量

> ID：13461808
> 
> 赞同：0
> 
> 时间：2012-11-19T20:38:47.537
> 
> 标签：opengl, textures, lwjgl

OpenGL 使用二次幂纹理。这是因为由于 MipMapping，一些 GPU 只接受二次方纹理。在绘制比实际更大的纹理时，使用这些二次方纹理会导致问题。

我想了一种解决这个问题的方法，那就是只在我们使纹理比实际更小的时候使用 PO2 比率，当我们让它更大时使用 1:1 的比率，但这会创建与某些 GPU 的兼容性问题？

如果有人知道是否会出现问题（我无法检查这一点，因为我的 GPU 接受 NPO2 纹理），或者更好的解决方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T20:39:53.563

您的信息已过时。自 2004 年发布的 OpenGL-2 起支持任意维度纹理。所有当代 GPU 都非常支持 NPOT2 纹理，并且没有任何明显的性能损失。

不需要任何解决方法。

# java - 使用 Servlet 配置 Spring Ioc

> ID：13461809
> 
> 赞同：3
> 
> 时间：2012-11-19T20:38:51.150
> 
> 标签：java, spring, servlets

我是 Spring 新手，想将 spring ioc 连接到我的小型（测试）网络应用程序中。

我有这样的 Servlet `ProductServlet`：

```
public class ProductServlet extends HttpServlet{
    private static final long serialVersionUID = 1L;
    private RequestHelper requestHelper;

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        processRequest(request);
    }

    private void processRequest(HttpServletRequest request){
        requestHelper.process(request);
    }

    public RequestHelper getRequestHelper() {
        return requestHelper;
    }

    public void setRequestHelper(RequestHelper requestHelper) {
        this.requestHelper = requestHelper;
    }

} 
```

和我的 web.xml：

```
 <servlet>
    <servlet-name>ProductServlet</servlet-name>
    <servlet-class>com.epam.productshop.controller.ProductShop</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>ProductServlet</servlet-name>
    <url-pattern>/ProductServlet</url-pattern>
  </servlet-mapping>

     <listener>
      <listener-class>
        org.springframework.web.context.ContextLoaderListener
      </listener-class>
   </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring-config.xml
        </param-value>
    </context-param> 
```

而且我也有这样的弹簧配置xml：

```
<bean id="factory" class="com.epam.productshop.readerfactory.ReaderFactory">
    <property name="file" value="/xml/products.xml" />
</bean>

<bean id="requestHelper" class="com.epam.productshop.requesthelper.RequestHelper" scope="singleton">
    <property name="factory" ref="factory" />
</bean>

<bean name="ProductServlet" class="com.epam.productshop.controller.ProductServlet" scope="singleton">
    <property name="requestHelper" ref="requestHelper"/>        
</bean> 
```

我有这样的问题：

我希望在 servlet init() 期间将 requestHelper 对象设置为我的 servlet。但不是这个，而是给了我空指针。

我正在尝试实现我的 servlet `HttpRequestHandler`，写入`SpringBeanAutowiringSupport.processInjectionBasedOnServletContext(this, getServletContext());`init() 方法和我在互联网上看到的其他东西，但所有这些都不能解决我的问题。

请帮我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T20:54:50.947

在你的问题中，你有

```
<bean name="ProductServlet" class="com.epam.productshop.controller.ProductServlet" scope="singleton">
    <property name="requestHelper" ref="requestHelper"/>        
</bean> 
```

您不能使用 Spring 容器实例化 servlet，它们是由 servlet 容器实例化的。您只是在声明 ProductServlet 的另一个实例。

因此，当调用 Servlet`init()`方法时，您应该调用

```
SpringBeanAutowiringSupport.processInjectionBasedOnServletContext(this, getServletContext());` 
```

要注入 requestHelper `@Autowired`，请在您的 servlet 中声明一个带注释的字段或属性：

```
private RequestHelper requestHelper;

@Autowired
public void setRequestHelper(RequestHelper requestHelper){
  this.requestHelper = requestHelper;
} 
```

来自*processInjectionBasedOnServletContext* javadoc：

> 根据存储在 ServletContext 中的当前根 Web 应用程序上下文，处理给定目标对象的**@Autowired注入。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-13T12:28:25.097

这是一个解决方案，可能会对您有所帮助：

```
public class ProductServlet extends HttpServlet
{
    private static final long serialVersionUID = 1L;
    private RequestHelper requestHelper = null;

    private requestHelperInit(HttpServletRequest request)
    {
       if(requestHelper == null)
       {
          ApplicationContext ap = WebApplicationContextUtils.getWebApplicationContext(request.getSession().getServletContext());
          requestHelper = ap.getBean(RequestHelper.class);
       }
    }
} 
```

然后`requestHelperInit(request)`在您的`doGet()`或`doPost()`方法中调用方法作为第一条语句。

如果您仍在寻找解决方案，那么我希望这会对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T20:57:39.100

你有几个选择。如果你真的想注入一个 servlet，问题是 servlet 容器已经负责创建 servlet。由于注入是在创建时发生的，而且创建这个 servlet 有点困难，因此您必须使用不太优雅的解决方案。但是，[这个问题](https://stackoverflow.com/questions/10549241/how-to-use-dependency-injection-in-servlet)解释了如何注入 servlet。

另一方面，您可能会考虑放弃这种方法。如果您真的在创建一个 Web 应用程序，那么直接对 servlet api 进行编码是相当少见的。为什么不选择位于 servlet api 之上并提供更高级别功能（即花里胡哨）的众多 Web 应用程序框架之一。其中一个花里胡哨的是，这些框架提供了与 Spring 的便捷集成，因此您可以轻松地注入代码。例如，Struts 2 有一个 spring 插件，它允许您使用 spring 来注入框架创建的所有对象，包括框架基础设施组件。

# linux - 如何在centos 6上退出linux sendmail

> ID：13461810
> 
> 赞同：10
> 
> 时间：2012-11-19T20:38:50.570
> 
> 标签：linux, sendmail

我在堆栈溢出时在这里查找一些东西，答案告诉我输入

```
sendmail -bt 
```

在外壳中。我能够按照问题所说的去做，但现在我无法退出 sendmail 程序。`CTRL+c, CTRL+x, q, exit, bye, quit`似乎不起作用。你如何在不终止我的 ssh 连接的情况下退出 sendmail 程序？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-19T21:02:22.010

正如raina77ow 指出`/quit`或`CTRL+D`将终止该程序。

# php - 使用 PHP 设置 HTML 下拉列表的 selectedindex 属性

> ID：13461812
> 
> 赞同：0
> 
> 时间：2012-11-19T20:38:57.070
> 
> 标签：php

从数据库中我拉回用户信息，并基于此我可以使用 case 语句确定正确的索引值：

```
<?php
    $genderIndex = 0;
    switch ($displayProperties['gender']) 
    {
        case "":
            $genderIndex = 0;
            break;
        case "Male":
            $genderIndex = 1;
            break;
        case "Female":
            $genderIndex = 2;
            break;
        case "Other":
            $genderIndex = 3;
            break;
    }
 ?> 
```

在表单上，​​我有一个 HTML 下拉列表（选择）：

```
<select name="gender" selectedIndex="<?php echo $genderIndex; ?>">
    <option value="0"> </option>
    <option value="Male">Male</option>
    <option value="Female">Female</option>
    <option value="Other">Other</option>
</select><br/> 
```

问题是它永远不会工作并且总是加载页面，`index=0`我确保验证是否`$genderIndex`确实具有预期值（确实如此）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:44:36.550

selectedindex 属性没有以这种方式使用，关于 selectedindex 属性的正确使用可以查看[http://www.w3schools.com/jsref/prop_select_selectedindex.asp](http://www.w3schools.com/jsref/prop_select_selectedindex.asp)。

相反，您所追求的是将“选定”属性应用于适当的选项。下面的代码运行一些速记 if/else 检查，并将根据您在给定函数中创建的 $genderIndex 在适当的情况下应用“selected”属性。

```
<select name="gender">
    <option value="0" <?php echo ($genderIndex==0)?('selected'):(''); ?>"> </option>
    <option value="Male" <?php echo ($genderIndex==1)?('selected'):(''); ?>>Male</option>
    <option value="Female" <?php echo ($genderIndex==2)?('selected'):(''); ?>>Female</option>
    <option value="Other" <?php echo ($genderIndex==3)?('selected'):(''); ?>>Other</option>
</select><br/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:56:39.510

这不起作用的原因是因为*selectedIndex*不是 HTML`<select/>`元素上的有效属性。（见[http://www.w3.org/TR/html4/interact/forms.html#h-17.6](http://www.w3.org/TR/html4/interact/forms.html#h-17.6)）

要在元素中预先选择一个选项`<select/>`（除了第一个，这里是一个空值），您需要让您的 HTML 输出看起来像这样：

```
<select name="gender">
<option value="0"> </option>
<option value="Male">Male</option>
<option value="Female" selected="true">Female</option>
<option value="Other">Other</option>
</select> 
```

注意在第二个标签上添加了*selected="true" 。*`<option/>`像下面这样的东西可以完成工作，但并不优雅。

```
<select name="gender">
<?php
if(0 == $genderIndex)
    echo '<option value="0" selected="true"> </option>';
else
    echo '<option value="0"> </option>';

if(1 == $genderIndex)
    echo '<option value="Male" selected="true">Male</option>';
else
    echo '<option value="Male">Male</option>';

if(2 == $genderIndex)
    echo '<option value="Female" selected="true">Female</option>';
else
    echo '<option value="Female">Female</option>';

if(3 == $genderIndex)
    echo '<option value="Other" selected="true">Other</option>';
else
    echo '<option value="Other">Other</option>';
?>
</select> 
```

一个好的网络框架在这里会很有帮助。我知道在 Java 中，Struts 框架有助于将`<select/>`标记回显到输出并`<option/>`选择适当的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:41:33.537

这不是您`<option>`在 HTML 中指定选定项的方式。您需要对自身具有`selected`属性，如下所示：`<option>`

```
<select name="gender">
    <option value="0"> </option>
    <option value="Male" selected>Male</option>
    <option value="Female">Female</option>
    <option value="Other">Other</option>
</select><br/> 
```

# javascript - 如何获取 jqGrid 中显示的行数？

> ID：13461814
> 
> 赞同：3
> 
> 时间：2012-11-19T20:39:06.350
> 
> 标签：javascript, jquery, jqgrid

也许这些信息就在那里，而我的 Google-fu 让我失望了，但我似乎找不到答案。如何获取jqGrid中*当前显示的行数？*

我在这个主题上找到的每个问题和答案都会告诉您如何获取*总行*数（显示或不显示）或外部服务*加载*的行数。相反，我试图获取 jqGrid 的当前页面中显示了多少行。我的 jqGrid 属性之一是`rowList:[10,20,30]`，但我不确定如何访问自己选择的属性。

我想要的是当前在 jqGrid 的每一页上显示了多少行。到目前为止我发现的最接近的事情是[这个问答](https://stackoverflow.com/questions/3557015/quicksearch-how-to-determine-number-of-displayed-rows)，但这显示了`<tr>`有多少 s 并不是我真正需要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:42:13.060

```
$('.ui-pg-selbox').val() 
```

在最新的 jqGrid (4.4.1) 上测试

当然，如果每页有多个 jqGrid，则可以使用包装器来确保它是您要查找的。

```
$('#myjqGridWrapper .ui-pg-selbox').val() 
```

不确定这是否是最好的方法，但它可以完成工作。

空格表示后代选择器，即它查找包含类的元素，这些元素`ui-pg-selbox`是 wrapper 的后代`#myjqGridWrapper`。那将需要`div`在您的桌子周围放置一个或其他一些包装器。

* * *

**更新**：此外，如果您有`table`ID 或参考，您可以使用更可靠的方式来查询其 jqGrid 实例`.ui-pg-selbox`：

```
$('#jqgridTableId').closest('.ui-jqgrid').find('.ui-pg-selbox').val() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-30T07:08:11.067

以下将返回网格页面上显示的行数：

```
$('#myjqGridWrapper').getGridParam('reccount'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-07T22:58:21.357

您不应该依赖视图来获取信息。您应该从 JQGrid 模型中提取这些信息。您可以通过调用 getGridParam 方法来做到这一点，如下所示：

```
var rowNum = jqGrid.getGridParam('rowNum'); 
```

有关更多信息，请参见此处：[http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:options](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)

# vim - 使用 vim 编译 c++ 项目

> ID：13461820
> 
> 赞同：1
> 
> 时间：2012-11-19T20:39:47.297
> 
> 标签：vim

我是一个新的 vim 用户，所以我正在尝试修改 vim 以满足我的需要。

假设我有 project/main.cpp 和 project/build。当我执行“make -j5 install”时，项目/构建内部的哪个位置正在构建和正确安装我的项目。但是当我试图从 vim 内部执行此操作时，它不起作用。这是我使用的代码....

```
map <F5> :call BuildGitRepo()<cr>

function! BuildGitRepo() 
    :cd %:p:h
    let currentFileDir = :pw
    :cd currentFileDir
    :cd "build"
    :!make -j5 install
endfunction 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:57:41.333

vimrc 文件中的 Vim 脚本的功能与 Vim 窗口稍有不同。以开头的命令`:`在 vim 脚本中成为本地命令，这意味着您不需要冒号。此外，使用局部变量有点不同 - 您需要使用 exec。

`:`最后，如果没有缓冲区重定向，您无法捕获命令的输出，但您可以使用该`getcwd()`函数获取当前工作目录。但看起来你要`cd`访问当前文件的目录两次，所以我把它简化了一点。

这是应该在 vimrc 文件中工作的函数版本：

```
map <F5> :call BuildGitRepo()<cr>

function! BuildGitRepo() 
    exec "cd " . expand("%:p:h") ."/build"
    !make -j5 install
endfunction 
```

# html - CSS/HTML5 - 粘性页脚不起作用

> ID：13461822
> 
> 赞同：0
> 
> 时间：2012-11-19T20:39:51.950
> 
> 标签：html, css, sticky

好的——我承认我是一个 CSS 新手（请温柔一点），也不是一个 HTML 大师——我的业务逻辑比前端要好得多。也就是说，我正在为我丈夫开发一个网站（我们不能在外面完成）。我正在尝试在可能具有可变长度的页面上实现粘性页脚。问题是自从我在页面左侧实现菜单后，页脚就会跳到页面顶部。我不知道为什么，而且似乎无法弄清楚为什么。页面内容是从数据库中提取的。基本的 HTML 布局是用 HTML 编写的，其中详细信息（标签条、菜单、内容）通过 php 从数据库中写入。基本的 HTML 结构是这样的：

```
<body>
    <div id='content-container'>
         <div id='wrapper'>...</div>
         <div id='body-wrapper'>
             <div id='floater-wrapper'>
                  <div id='floating-menu-1'>
                  </div>
                  <div id='floating-menu-2'>
                  </div>
             <div>
             <div id='content'>
             </div>
          </div>
          <div id='foot-wrapper'>
               <div id='foot-content'>
               </div>
          </div>
 </body> 
```

CSS如下（注意：我已经尝试了我在这里和在线找到的粘性页脚解决方案的所有变体。）任何建议都值得赞赏。

```
<style>
/*START NAV*/
ul, ul li, li{list-style: none;}
#navigation-wrapper{
    background-image: url(images/line.png); 
    background-repeat: no-repeat; 
    background-position: right bottom; 
    height: 100px; 
    width: 1000px; 
    margin: 27px 0 0;
    }
#logo{
    display: block; 
    float: left; 
    height: 150px; 
    width: 200px; 
    display: block; 
    text-indent: -999993px; 
    background-image: url(images/wgclogo2_small.png); 
    background-repeat: no-repeat; 
    background-position: center center;
}
#logo a {
    margin: 10px 0 0; 
    display:block;
    height:100%;
    width:100%;
}
#navigation{
    display: block; 
    float: right; 
    margin: 10px 0 0 0;
}
#navigation ul {
    color: #323131; 
    font-family: "proxima-nova",sans-serif; 
    text-transform: uppercase; 
    text-align: right;
}
#navigation li {
    display:inline; 
    padding: 0 0 0 15px; 
    font-weight: 600;
}
#navigation a {
    color: #323131; 
    text-decoration: none; 
    font-size:13px;
}
#navigation a:hover{
    color: #78756f;
    border-bottom: 5px solid #323131; 
    border-top: 5px solid #323131; 
    padding-top: 12px; 
    padding-bottom: 10px;
}
div#nav{
    width: 577px;
    height: 44px;
}
div#nav ul {
    width: 100%;
    height: 100%; 
    overflow: hidden;
}
div#nav ul li {
    float: right;
}
div#nav ul li a {
    text-indent: 100px; 
    overflow: hidden; 
    display: block; 
    height: 44px;
}

/*Start First item in Nav 42+0=42 */
div#nav ul li.about a {width: 42px}
div#nav ul li.about a:hover, div#nav ul li.about a.current { }
/*End First item in Nav*/

/*Start Next item in Nav 58+42=100 */
div#nav ul li.food a {width: 58px}
div#nav ul li.food a:hover, div#nav ul li.food a.current { }
/*End Next item in Nav*/

/*Start Next item in Nav 54+100=154 */
div#nav ul li.special a {width: 54px}
div#nav ul li.special a:hover, div#nav ul li.special a.current { }
/*End Next item in Nav*/

/*Start Next item in Nav 42+154=196 */
div#nav ul li.service a {width: 42px}
div#nav ul li.service a:hover, div#nav ul li.service a.current { }
/*End Next item in Nav*/

/*Start Next item in Nav No more adding neccesary*/
div#nav ul li.cost a {width: 52px}
div#nav ul li.cost a:hover, div#nav ul li.cost a.current { }
/*End Next item in Nav*/

/*Start Next item in Nav No more adding neccesary*/
div#nav ul li.contact a {width: 57px}
div#nav ul li.contact a:hover, div#nav ul li.contact a.current { }
/*End Next item in Nav*/

/*Start Next item in Nav No more adding neccesary*/
div#nav ul li.customers a {width: 50px}
div#nav ul li.customers a:hover, div#nav ul li.customers a.current { }
/*End Next item in Nav*/
/*END NAV*/
/*START CONTENT & HEADERS*/
html, body{
    height: 100%;
    background-image: url(images/bkg.png); 
}
#content-container{
    min-height: 100%;
    position:relative;
    vertical-align: top;    
}

#body-wrapper{
/*  overflow: auto; */
    min-height: 100%;
    padding-bottom: 40px;
    display: inline-block;
    position:absolute;  
    vertical-align: top;

}
#content{
    display:inline-block;
    position: absolute;
    width:800px;
    margin-left: 200px;
}
h1 {
    text-align: left;
    text-decoration: none;
    color: #003366;
    font: normal normal 30px Georgia, "Times New Roman", Times, serif;
    margin-bottom: 10px;
}

h2 {
    text-align: left;
    text-decoration: none;
    color: #993300;
    font: 24px Georgia, "Times New Roman", Times, serif;
    margin-bottom: 10px;    
}

h3 {
    text-align: left;
    font: 16px Georgia, "Times New Roman", Times, serif;
    color: #666666;
    text-transform: uppercase;
    letter-spacing: 3px;
    margin-bottom: 10px;
}
p.alert{
    text-align: left;
    font-weight: bold;
    font: 12px Georgia, "Times New Roman", Times, serif;
    color: #ff5600;
    text-transform: uppercase;
    letter-spacing: 3px;
    margin-bottom: 10px;
}

#content ul, ol {
    border-left: 3px solid #dfedcb;
    margin-left: 5px;
    margin-bottom: 20px;
    padding-left: 15px;
    color: #323131;
    font: 16px Georgia, "Times New Roman", Times, serif;
}

/* START Floating Menu Styles */
#floater-container{
    display: inline-block;
    position:absolute; 
    left: 0px; 
    vertical-align: top;
    text-align: start;
}
div.floating-menu {
    position:static;
    background:rgba(0.25,0.25,0.25,0.25);
    border:1px solid #299366;
    width:185px;
    z-index:300;
}
div.floating-menu a, div.floating-menu h3 {display:block;margin:0 0.5em;}

/*END Floaters */

/*END CONTENT & HEADERS*/

/*START LOGIN*/
#login-wrapper{ vertical-align:  middle; border-style: solid; border-width: thin; height: 125px; width: 500px; margin: 27px 0 0;}
#facebook{text-align: center; vertical-align: middle; background-image: url(images/login_border.png); background-position: right center; background-repeat: no-repeat; display:inline-block ; float: left; width: 200px; height: 125px; margin: 0 0 0 0;}
#local_login{vertical-align: middle; display: inline-block; float: right; width: 300px; height: 125px; margin: 0 0 0 0;}
/*END LOGIN*/
/* START TABSTRIP STYLES */

.tabStrip ul {
    margin: 0;
    padding: 0;
    list-style-type: none;
}
.tabStrip li {
    margin: 0 2px 0 0;
    list-style-type: none;
    float: right;
}
.tabLink {
    display: inherit;
    text-decoration: none;
    padding: 5px;
    background: #e8e8e8;
    border: #dadada solid;
    border-width: 1px 1px 0 1px;
    color: #8a8a8a;
}
.tabLinkActive {
    display: inherit;
    text-decoration: none;
    padding: 5px;
    background: #e0e0e0;
    border: #c0c0c0 solid;
    border-width: 1px 1px 0 1px;
    color: #0066ff;
}
.tabContent {
    display: none;
}
.tabContentActive {
    display: inherit;
    clear: both;
    background: #f0f0f0;
    border: 1px #dedede solid;
    padding: 10px;
/*  height:inherit; */
    width:97.5%;
}
/*END TABSTRIPS */

</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:01:22.503

HTML：

```
<div id="container">
   <div id="header"></div>
   <div id="body"></div>
   <div id="footer"></div>
</div> 
```

CSS：

```
html,
body {
   margin:0;
   padding:0;
   height:100%;
}
#container {
   min-height:100%;
   position:relative;
}
#header {
   background:#ff0;
   padding:10px;
}
#body {
   padding:10px;
   padding-bottom:60px;   /* Height of the footer */
}
#footer {
   position:absolute;
   bottom:0;
   width:100%;
   height:60px;   /* Height of the footer */
   background:#6cf;
}
/* IE 6 and down:
#container {
   height:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:10:50.847

你可以使用一个准备好的

[http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

支持的浏览器列表。

[http://www.cssstickyfooter.com/browser-list.html](http://www.cssstickyfooter.com/browser-list.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:53:06.700

`<div>`before`#content`应该是`</div>`而你错过了`</div>`before的一个结束`</body>`。

```
<body>
<div id='content-container'>
     <div id='wrapper'>...</div>
     <div id='body-wrapper'>
         <div id='floater-wrapper'>
              <div id='floating-menu-1'>
              </div>
              <div id='floating-menu-2'>
              </div>
         </div>
         <div id='content'>
         </div>
      </div>
      <div id='foot-wrapper'>
           <div id='foot-content'>
           </div>
      </div>
   </div>
 </body> 
```

但除此之外，您还为`#content`and使用绝对定位`#body-wrapper`。绝对定位导致这些块被渲染，比如说，在不同的层上，所以绝对定位之后的任何东西都不会被渲染到这些块的下方，而是在之前`position`设置为`relative`.

我想出的将页脚粘贴到页面底部的唯一解决方案是使用 javascript。页面加载后，您检查页面主要内容是否足够大以将页脚放置在底部。如果不是，则设置适当元素的高度以使其如此。

# biztalk - 如果预期消息未到达 BizTalk，则发送通知

> ID：13461826
> 
> 赞同：2
> 
> 时间：2012-11-19T20:40:04.397
> 
> 标签：biztalk, edi

我有一个监视 FTP 位置的 BizTalk 接收端口。我希望文件每天至少到达该位置一次，并让 BizTalk 将其拾取并启动编排。这部分工作正常。

但是，有时发件人在一天中无法发送消息，在这种情况下，我希望发送一封电子邮件以通知用户有问题。

我可以在 BizTalk 之外解决这个问题，方法是创建一个日常作业，在我们的数据库中查找已处理的文件，并确保在任何一天至少有一个。但是，我更愿意使用已经到位的 BizTalk 解决方案来解决这个“符合”的问题，而不是部署一个单独的、不相关的作业，这会增加维护的麻烦。

BizTalk 中是否有任何功能可以让我在接收端口在给定时间范围内*未*接收到某些内容时发送通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:10:53.120

简短的回答：不是。

您要实现的逻辑需要自定义版本的 FTP 适配器。取决于您卷起袖子进入 Adapter SDK 的舒适程度。

如果您想让您的解决方案保持“纯 BizTalk”，您可以使用绑定到存储过程的 SQL 接收位置来设置辅助业务流程。此存储过程定期执行并在过去（工作日）收到的“已处理文件”表中查找记录。如果没有找到，它会制造一条记录并通过 SQL 接收位置返回它。这将是您发送电子邮件通知的触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T14:35:37.330

一种不优雅的解决方案是在您的截止时间之外有一个带有计划窗口的**辅助 FILE 接收位置。**

失败场景：

在这个 FILE 接收位置，您有一个智能/虚拟消息，它符合与 FTP 接收相同的模式。聪明的部分是让消息中的一个字段告诉我们最后一次从 FTP 接收文件是什么时候。其余内容是虚拟的。

在您的编排中，您检查从哪里收到文件。如果它是辅助接收位置（使用上下文属性 BTS.ReceiveLocationName），您检查此虚拟/智能消息的日期字段，如果它在过去 24 小时内（或类似逻辑）发送一封电子邮件通知您没有收到文件来自上游 FTP 进程，并将虚拟消息（已接收）的副本保存回辅助 FILE 接收位置不变。

成功场景：

除了正常处理之外，您将虚拟/智能消息的副本保存到辅助 FILE 接收位置，日期时间字段反映您处理从 FTP 接收位置接收的文件的时间。

初始化：

您从辅助 FILE 接收位置中的虚拟/智能消息开始，该消息具有过去的日期时间字段值（假设我们从未从 FTP 收到文件）或昨天的日期（假设我们前一天从 FTP 成功收到文件。 )

概述：您的编排有两个触发点。

1.  当您通过 FTP 接收文件时
2.  一个预定的 FILE 接收位置，在截止时间之后触发。

# django - django 仅自动将上下文传递给特定模板

> ID：13461827
> 
> 赞同：0
> 
> 时间：2012-11-19T20:40:20.217
> 
> 标签：django, django-templates, django-context

我在字典中有上下文：

```
### settings.py. ###
CONTEXT = {'a':'b'} 
```

还有两个使用该上下文 t1.html 和 t2.html 的模板：

```
### t1.html ###
{{ a }}

### t2.html ###
{{ a }} 
```

两者都应包含在许多其他模板中，例如：

```
### includer.html ###
{{ include 't1.html' }} 
```

如何仅将 CONTEXT 传递给 t1.html 和 t2.html：

1.  不会污染任何其他模板中的上下文，包括 includer.html 模板
2.  自动，也就是说，每当使用 t1.html 和 t2.html 模板时，我不必手动将 settings.CONTEXT 附加到视图的上下文中，如下所示：

    ```
    ### views.py ###
    import settings
    from django.shortcuts import render

    def view1(request):
        return render(
            request,
            'includer.html',
            dict( {'c':'d'}.items() + settings.CONTEXT.items())
        ) 
    ```

可能的解决方案：

*   一些包含语句，我可以直接在模板中编写以包含上下文？
*   一种让上下文处理器执行此操作的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:56:57.840

这样做很**糟糕**，因为它隐藏了一些模板依赖项。

但是使用[CBV](https://docs.djangoproject.com/en/dev/topics/class-based-views/)，您可以创建基视图类并在使用 t1.html 和 t2.html 时从他继承。它不是自动的，但它隐含了额外的上下文。

如果没有 CBV，您应该像现在一样将 settings.CONTEXT 隐式附加到当前上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:57:26.557

听起来您想使用一个[`inclusion tag`](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags)可以在标签中设置或导入所需上下文的位置。

# linux - 转义grep中的感叹号？

> ID：13461828
> 
> 赞同：8
> 
> 时间：2012-11-19T20:40:28.990
> 
> 标签：linux, bash, grep

我有这个完整的行（下面的 awk 中的 rpm 命令），我想从某些文件中提取出来，包括引号。当我尝试 grep 和 grep -F 时，我似乎无法获得正确的输出。我尝试从 grep 语句中删除部分行尾，它看起来像“！” 导致问题。我尝试将字符串用单引号括起来，但也没有运气。谢谢你。

```
rpm -qVa | awk '$2!="c" {print $0}' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T21:45:31.587

你有几个选择。

1.  使用单引号 - 当您需要文字单引号时，只需去掉单引号，用反斜杠添加一个，然后返回：

    `grep 'rpm -qVa | awk '\''$2!="c" {print $0}'\' filename`

2.  使用 POSIX 字符串：

    `grep $'rpm -qVA | awk \'$2!="c" {print $0}\'' filename`

3.  使用不太具体的模式：

    `grep 'rpm -qvA | awk .$2.="c" {print $0}.' filename`

    或者，如果您检查了`$2=="c"`以及`$2!="c"`，您可以执行以下操作：

    `grep 'rpm -qvA | awk .$2[^=]="c" {print $0}.' filename`

我会使用 POSIX 字符串，或者可能是普通的单引号选项 - 它具有在其他 shell 中工作的有争议的优势，比如`dash`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T20:43:39.633

反斜杠应该可以解决问题

```
rpm -qVa | awk '\$2!="c" {print $0}' 
```

# r - 从向量中选择所有其他元素

> ID：13461829
> 
> 赞同：58
> 
> 时间：2012-11-19T20:40:32.657
> 
> 标签：r, vector, seq

假设我有一个向量：

`remove <- c(17, 18, 19, 20, 24, 25, 30, 31, 44, 45)`.

如何选择/提取向量中的每一秒值？像这样：`17, 19, 24, 30, 44`

我正在尝试使用该`seq`功能：`seq(remove, 2)`但它并不完全有效。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-11-19T20:59:02.387

```
remove[c(TRUE, FALSE)] 
```

会成功的。

* * *

*这个怎么运作？*

如果逻辑向量用于 R 中的索引，则如果索引向量比包含这些值的向量短，它们的值将被回收。

这里，向量`remove`包含十个值。如果使用索引向量`c(TRUE, FALSE)`，实际的命令是：`remove[c(TRUE, FALSE, TRUE, FALSE, TRUE, FALSE, TRUE, FALSE, TRUE, FALSE)]`

因此，选择所有具有奇数索引号的值。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-19T20:48:27.643

```
remove[seq(1,length(remove),2)] 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-09-22T21:08:12.980

只是另一种选择：

```
remove[seq_along(remove) %% 2 > 0]
# [1] 17 19 24 30 44 
```

# eclipse - Eclipse 工作区配置（maven）——它是如何工作的？

> ID：13461833
> 
> 赞同：-1
> 
> 时间：2012-11-19T20:40:43.690
> 
> 标签：eclipse, maven, plugins

maven 任务“mvn eclipse:eclipse”如何生成 eclipse 工件，以及它如何神奇地修复损坏的 eclipse/mvn 项目。我无法准确检测到它的作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:28:28.723

它从 pom.xml 生成或更新 .project、.classpath 和 .settings 文件。

# android - 我的 AVD 模拟器没有在 Ubuntu 上加载

> ID：13461836
> 
> 赞同：0
> 
> 时间：2012-11-19T20:40:51.160
> 
> 标签：android, ubuntu, avd, launching

我通常使用 Eclipse IDE 在 Windows 上开发我的 android 测试。但是现在我需要在 Ubuntu 上做同样的事情，由于某种未知的原因，模拟器没有被加载，而是在 android 启动屏幕上被冻结。它没有显示任何错误消息，只是在该屏幕上停止（我等待了 2 个多小时），我不知道为什么。我正在使用 Ubuntu 12.04 Precise-Pangolin，并尝试在模拟器上启动 Android 2.2(Froyo)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:43:12.327

根据您的硬件和您使用的 android 版本，这可能需要很长时间。对我来说，Honeycomb+ 在我的高端笔记本电脑上第一次启动时花了一个多小时，我以为它已经冻结了。

# r - R中直方图中条形的居中值

> ID：13461837
> 
> 赞同：11
> 
> 时间：2012-11-19T20:40:51.743
> 
> 标签：r

希望将 x 轴的值绘制在 R 条的中心。

在寻找使这成为可能的方法时遇到问题，代码如下：

```
hist(sample_avg, breaks =7, ylim=c(0,2000), 
    main = 'Histogram of Sample Average for 1 Coin Flip', xlab= 'Sample Average') 
```

这只是为了掷硬币，所以我有 6 个可能的值，并且希望有 6 个桶，每个桶下面都有 x 轴刻度线。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T21:51:18.127

`hist()`返回组件中条形中点的 x 坐标`mids`，因此您可以这样做：

```
sample_avg <- sample(size=10000,x=seq(1,6),replace=TRUE)
foo <- hist(sample_avg, breaks =7, ylim=c(0,2000), 
    main = 'Histogram of Sample Average for 1 Coin Flip', xlab= 'Sample Average',
    xaxt="n")
axis(side=1,at=foo$mids,labels=seq(1,5)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-19T14:10:26.083

```
# when dealing with histogram of integers, 
# then adding some residual ~ 0.001 will fix it all...
# example:
v = c(-3,5,5,4,10,8,8)
a = min(v)
b = max(v)
foo = hist(v+0.001,breaks=b-a,xaxt="n",col="orange",
panel.first=grid(),main="Histogram of v",xlab="v")
axis(side=1,at=foo$mids,labels=seq(a,b)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:16:25.187

不像您希望的那样漂亮，但看起来最好的方法是使用 axes=F，然后使用“axis”命令放入您自己的轴，指定您想要查看的刻度线。

参考：[https ://stat.ethz.ch/pipermail/r-help/2008-June/164271.html](https://stat.ethz.ch/pipermail/r-help/2008-June/164271.html)

# java - 使用 sendredirect 在 Java 中保留会话

> ID：13461838
> 
> 赞同：12
> 
> 时间：2012-11-19T20:41:02.007
> 
> 标签：java, jsp, jakarta-ee, servlets, jspinclude

我正在用 JAVA 创建一个登录应用程序。我正在用 JSP 和 Servlet 中的所有逻辑（数据库连接）进行演示[这不是我知道的正确方法]。我在 Servlet 中检查用户名密码，然后创建一个会话变量。并像这样添加会话

```
sess.setAttribute("username",oName); 
```

然后我将用户重定向到它的主页，比如 student.jsp

```
response.sendRedirect("student.jsp"); 
```

它删除了会话变量。我需要一种方法来保留会话变量并移至 student.jsp。我尝试使用转发，但没有成功。

```
RequestDispatcher dispatcher =
                getServletContext()
                    .getRequestDispatcher("/student.jsp");

            if (dispatcher != null) {
                dispatcher.forward(request, response);
            } 
```

它转发请求，但页面地址不会更改为 student.jsp，这不好。在这方面的任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T21:49:44.780

为了使重定向的请求返回并附加到同一个会话，它需要一个会话 ID，通常在 JSESSIONID（或其他名称）cookie 或 URL 中作为参数携带。

此 cookie 或 URL 参数应由 servlet 容器添加，您不必自己添加。

如果您没有在浏览器中看到 cookie，并且您没有将 JSESSIONID 附加到 URL，那么它正在为每个请求创建一个新会话，而不是附加到同一个会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-28T10:55:06.363

尝试编辑您的 tomcat文件并将标签`context.xml`替换为，这对我有帮助。`<Context>``<Context useHttpOnly="false">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-05T15:06:53.933

某些浏览器（例如 Chromium）不允许来自本地主机或 IP 地址的 cookie，因此无法保留会话并在每次刷新时更改。这可以使用显示请求的所有 cookie 的浏览器开发工具轻松检查。

对于开发，设置您的工作站以将一些更重要的名称（如 host.kitty.com）解析为 localhost。在 Linux 下，只需将条目添加到 /etc/hosts。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-10T16:35:45.450

使用`RequestDispatcher`并使用 设置您的用户名变量`request.setAttribute()`。在这种情况下，调度程序不会创建新请求，但将使用该`forward()`方法转发相同的请求。

# c# - WPF将用户控件上的文本框文本绑定到依赖项，但在窗口上使用不同的绑定

> ID：13461840
> 
> 赞同：0
> 
> 时间：2012-11-19T20:41:04.793
> 
> 标签：c#, .net, wpf

所以我在玩一些 WPF UserControls 和 DependencyProperties。我有以下用户控件：

```
<UserControl x:Class="ValueInser.UserControls.FirmPersonInsert"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:self="clr-namespace:ValueInser.UserControls"
         x:Name="uc1"
         mc:Ignorable="d" 
         d:DesignHeight="225" d:DesignWidth="450"
         DataContext="{Binding RelativeSource={RelativeSource Self}}">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="100px"/>
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="40"/>
        <RowDefinition IsEnabled="{Binding ElementName=rbtnPers, Path=IsChecked}"/>
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>
    <GroupBox Grid.Column="1" Header="Privat-/Juristische Person" Width="150" HorizontalAlignment="Left">
        <StackPanel Orientation="Horizontal">
            <RadioButton Content="Person" IsChecked="{Binding Path=IsCompany}"/>
            <Line Height="1" Width="25" />
            <RadioButton Content="Firma" Name="rbtnCompany" />
        </StackPanel>
    </GroupBox>

    <Label Content="Firma" Grid.Column="0" Grid.Row="1" />
    <TextBox Grid.Column="1" Grid.Row="1" Text="{Binding Path=Company}" IsEnabled="{Binding ElementName=rbtnCompany, Path=IsChecked}"/>

    <Label Content="Anrede" Grid.Column="0" Grid.Row="2" />
    <TextBox Grid.Column="1" Grid.Row="2" Text="{Binding Path=Salutation}" />

    <Label Content="Name" Grid.Column="0" Grid.Row="3" />
    <TextBox Grid.Column="1" Grid.Row="3" Text="{Binding Path=LastName, RelativeSource={RelativeSource self}}" />

    <Label Content="Vorname" Grid.Column="0" Grid.Row="4" />
    <TextBox Grid.Column="1" Grid.Row="4" Text="{Binding Path=FirstName}"/>

    <Label Content="Strasse" Grid.Column="0" Grid.Row="5" />
    <TextBox Grid.Column="1" Grid.Row="5" Text="{Binding Path=Street}" />

    <Label Content="Ort" Grid.Column="0" Grid.Row="6" />
    <TextBox Grid.Column="1" Grid.Row="6" Text="{Binding Path=City}" />

    <Label Content="PLZ" Grid.Column="0" Grid.Row="7" />
    <TextBox Grid.Column="1" Grid.Row="7" Text="{Binding Path=ZIP}" />
</Grid> 
```

使用此代码：

```
 #region Dependency Properties
    public static readonly DependencyProperty _company = DependencyProperty.Register("Company", typeof(string), typeof(UserControl));
    public string Company
    {
        get
        {
            return this.GetValue(_company) as string;
        }
        set
        {
            this.SetValue(_company, value);
        }
    }

    public static readonly DependencyProperty _salutation = DependencyProperty.Register("Salutation", typeof(string), typeof(UserControl));
    public string Salutation
    {
        get
        {
            return this.GetValue(_salutation) as string;
        }
        set
        {
            this.SetValue(_salutation, value);
        }
    }

    public static readonly DependencyProperty _lastName = DependencyProperty.Register("LastName", typeof(string), typeof(UserControl));
    public string LastName
    {
        get
        {
            return this.GetValue(_lastName) as string;
        }
        set
        {
            this.SetValue(_lastName, value);
        }
    }

    public static readonly DependencyProperty _firstName = DependencyProperty.Register("FirstName", typeof(string), typeof(UserControl));
    public string FirstName
    {
        get
        {
            return this.GetValue(_firstName) as string;
        }
        set
        {
            this.SetValue(_firstName, value);
        }
    }

    public static readonly DependencyProperty _street = DependencyProperty.Register("Street", typeof(string), typeof(UserControl));
    public string Street
    {
        get
        {
            return this.GetValue(_street) as string;
        }
        set
        {
            this.SetValue(_street, value);
        }
    }

    public static readonly DependencyProperty _city = DependencyProperty.Register("City", typeof(string), typeof(UserControl));
    public string City
    {
        get
        {
            return this.GetValue(_city) as string;
        }
        set
        {
            this.SetValue(_city, value);
        }
    }

    public static readonly DependencyProperty _zip = DependencyProperty.Register("ZIP", typeof(string), typeof(UserControl));
    public string ZIP
    {
        get
        {
            return this.GetValue(_zip) as string;
        }
        set
        {
            this.SetValue(_zip, value);
        }
    }

    public static readonly DependencyProperty _isCompany = DependencyProperty.Register("IsCompany", typeof(bool), typeof(UserControl));
    public bool IsCompany
    {
        get
        {
            return !(bool)this.GetValue(_isCompany);
        }
        set
        {
            this.SetValue(_isCompany, value);
        }
    }
    #endregion 
```

现在棘手的部分开始发挥作用。这样我就可以将 textboxs 文本属性绑定到后面代码中的依赖属性，我必须将 datacontext 设置为自身。

当我现在想在 Window 上使用这个控件时，我遇到了一个问题：

```
 <uc:FirmPersonInsert DataContext="{DynamicResource ResourceKey=mvm}"
       IsCompany="{Binding Path=ProjectArchitect.IsCompany}"
       Company="{Binding Path=ProjectArchitect.Company}" 
       LastName="{Binding Path=ProjectArchitect.LastName}"
       FirstName="{Binding Path=ProjectArchitect.FirstName}"
       Street="{Binding Path=ProjectArchitect.Street}"
       City="{Binding Path=ProjectArchitect.City}"
       ZIP="{Binding Path=ProjectArchitect.ZIP}"/> 
```

此属性存储在应用程序的 ViewModel 上。但是现在整个结构开始变得奇怪了。我无法更改数据上下文，否则用户控件上的绑定将不再起作用。

我想我完全误解了所有这些应该如何工作的东西。

我需要dependencyprops，以便我的控件的用户可以简单地绑定到新的“属性名称”，如LastName。

请有人可以解释一下，我在哪里想错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:52:01.330

从用户控件中删除`DataContext="{Binding RelativeSource={RelativeSource Self}}">`，而是：

`<Grid DataContext="{Binding ElementName=uc1}">`.

`RelativeSource`还要从各个文本框中删除所有s。

# php - 如果数组是数组中的 in_array()？

> ID：13461843
> 
> 赞同：1
> 
> 时间：2012-11-19T20:41:18.133
> 
> 标签：php, arrays

第一次尝试使用数组作为针和干草堆在数组中查找某些东西。因此，2个数组的示例：

我的动态形成的数组：

```
Array ( 
    [0] => 
    [1] => zpp 
    [2] => enroll 
) 
```

我的静态比较数组：

```
Array ( 
    [0] => enroll 
) 
```

还有我的`in_array()`if 语句：

```
if (in_array($location_split, $this->_acceptable)) {
   echo 'found';
}
$location_split; // is my dynamic
$this->_acceptable // is my static 
```

但是从这个发现没有打印出来，正如我所期望的那样？我到底在这里失败了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:46:28.653

如果我对您的理解正确，您想查看第一个数组的条目是否存在于第二个数组中。

您可能会查看`array_intersect`，它会返回一个包含在您传递给它的所有数组中的东西的数组。

```
$common = array_intersect($this->_acceptable, $location_split);
if (count($common)) {
    echo 'found';
} 
```

如果该数组的计数至少为 1，则至少有一个共同元素。如果它等于您的动态数组的长度，并且数组的值是不同的，那么它们都在那里。

而且，当然，该数组将能够告诉您*哪些*值匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:43:38.167

因为您的数组中没有包含其中`array('enroll')`的元素（仅`'enroll'`）。

您最好的选择是使用`array_diff()`，如果结果与原始数组相同，则找不到匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:45:26.773

您正在交换`in_array`(needle & haystack) 的参数。它需要，

```
 if(in_array($this->_acceptable, $location_split))
{
  echo 'found';
 } 
```

**编辑：**尝试使用`array_intersect`.

[演示](http://codepad.org/uB8en8b3)

# encryption - 使用多个密钥加密的一个文本。它安全吗？

> ID：13461844
> 
> 赞同：0
> 
> 时间：2012-11-19T20:41:18.253
> 
> 标签：encryption, public-key-encryption, encryption-asymmetric

假设我有一个明文，并使用不同的密钥（每个密钥）对其进行加密。是否可以从这些加密密码中找到明文，或者重新采样文本有多难？这是否有意义，尤其是在非对称加密方面？

例如：

```
 VALUE     KEY         CIPHER
    "abc"  +  "key1"  ->  "izwer"
    "abc"  +  "key2"  ->  "werio" 
    "abc"  +  "key3"  ->  "nbmdi"
    "abc"  +  "key4"  ->  "oiuuw" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T11:25:22.593

用多个密钥攻击非对称加密的最著名的例子是 [Hastad 对 RSA 的广播攻击](http://en.wikipedia.org/wiki/Coppersmith%27s_Attack#H.C3.A5stad.27s_Broadcast_Attack)。这当然是使用适当设计的填充方案的动机之一。

# ruby-on-rails - Rails 模型问题

> ID：13461847
> 
> 赞同：1
> 
> 时间：2012-11-19T20:41:28.537
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我有两个模型。一个是`Item`模型，另一个是`Event`模型。
我需要做的是：

必须将一个`Item`“签出”到一个事件中。将`Event`显示`Item`除所述事件之外的所有内容。活动结束后，用户将`Item`重新签入。您仍然应该能够看到该活动之外的所有项目。

**这就是我目前的模型：**

* * *

**商品型号：**

```
class Item < ActiveRecord::Base
   has_and_belongs_to_many :events
end 
```

**事件模型：**

```
class Event < ActiveRecord::Base
   has_many :items
end 
```

* * *

我在其他地方读到过，我可以有一个这样的模型，我可以使用 :though 。然后，此模型将具有每个事件具有的所有项目。

**活动列表**

```
class EventList < ActiveRecord::Base
   belongs_to :item
   belongs_to :event
end 
```

我希望 URL 路由看起来像：

`domain.com/Event/:id/items/`

`domain.com/Event/:id/items/(checkedin or checkedout)`

这是正确的做事方式吗？我应该有另一个表并使用`:though => name`这个特定问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:51:48.413

你把两者混在一起了。如果您使用`has_and_belongs_to_many`两种模型都应该这样定义。IE。

```
Item Model:

class Item < ActiveRecord::Base
  has_and_belongs_to_many :events
end 
```

事件模型：

```
class Event < ActiveRecord::Base
   has_and_belongs_to_many :items
end 
```

如果你想使用一个`:through`表，你只需用`has_many`.

至于你应该使用哪一个。他们都是正确的。下面的链接解释了何时使用其中一个。（基本上如果你想用连接表做事情，就使用这种`:through`方式，否则`has_and_belongs_to_many`很好）

[http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many)

# apache-flex - 在 Flex/spark 中用背景图片填充整个内容

> ID：13461850
> 
> 赞同：2
> 
> 时间：2012-11-19T20:41:34.513
> 
> 标签：apache-flex, flex-spark

我创建了一个 960x640px 的图像，我想通过将图像缩放到设备的分辨率，将其用作任何类型的移动设备的背景图片。

我怎样才能做到这一点？

我试过了：

```
 <?xml version="1.0" encoding="utf-8"?>
     <s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" title="MainView">

     <s:Image width="100%" height="100%" fillMode="scale" scaleMode="stretch"
         source="assets/background.jpg" />
        <fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>  
 </s:View> 
```

这在设计视图中看起来不错，它填满了整个屏幕，但是当我运行应用程序时，一切都非常混乱（图像比移动模拟器屏幕小得多或大得多）

有一个更好的方法吗？是否可以直接在视图上设置背景图像？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T20:12:38.913

设置 fillMode="repeat" 这将重复图像以填充视图

# html - 使用 HTML5 和 Coldfusion 10 将多个文件上传到不同的目的地

> ID：13461851
> 
> 赞同：3
> 
> 时间：2012-11-19T20:41:36.687
> 
> 标签：html, file-upload, coldfusion, coldfusion-10

我有一个包含多个输入字段的表单，这些字段接受多个文件，我需要将文件从每个元素加载到不同的目的地。cffile upload 只上传每个表单字段的第一个文件，uploadall 将它们全部放在所有目录中，因为它不支持 fieldname 属性。

```
<form name="someForm" id="someForm" action="process.cfm" enctype="multipart/form-data" method="post">
    <input type="file" multiple="multiple" name="fileSet1" />
    <input type="file" multiple="multiple" name="fileSet2" />
    <input type="file" multiple="multiple" name="fileSet3" />
    <input type="submit" value="update" />
</form> 
```

这会将一个文件上传到每个目标：

```
<cffile action="upload" filefield="fileSet1" destination="dest1" nameconflict="overwrite">
<cffile action="upload" filefield="fileSet2" destination="dest2" nameconflict="overwrite">
<cffile action="upload" filefield="fileSet3" destination="dest3" nameconflict="overwrite"> 
```

这会将所有文件上传到所有目的地，因为 filefield 不与 uploadall 一起使用：

```
<cffile action="uploadall" filefield="fileSet1" destination="dest1" nameconflict="overwrite">
<cffile action="uploadall" filefield="fileSet2" destination="dest2" nameconflict="overwrite">
<cffile action="uploadall" filefield="fileSet3" destination="dest3" nameconflict="overwrite"> 
```

# java - 方法变量范围（java）

> ID：13461854
> 
> 赞同：0
> 
> 时间：2012-11-19T20:41:46.733
> 
> 标签：java, scope

我在java中有一个用于方法的类。基本上这个类接收一个整数数组，添加数字并减去它们，返回和和减法。我在顶部声明了变量（不是在特定方法中）。减法和加法完成后，它们被分配给各自的变量（当然是自动的），但是当方法完成其工作时，值被删除，所以当我调用减法/加法的方法时结果是一个 0。

据我所知，这些值不应该为空，因为它们不是在方法内部而是在所有方法之外初始化的，所以范围不应该结束。请问有什么帮助吗？

//方法类

```
 package chap3;

    import javax.swing.JOptionPane;

    /**
    *
    * @author jtech
    */
    public class SimpleArithmeticMethods
    {
   int sum;
   int subtraction;

public void sum_Difference(int[] nums)
{        
    int[] inpNums = nums; 

    sum = inpNums[0] + inpNums[1];
    subtraction = inpNums[1] - inpNums[0]; 

}

public void getSum()
{
     JOptionPane.showMessageDialog(null,"The sum is: "+sum, "Result.", JOptionPane.INFORMATION_MESSAGE);
}

public void getDifference()
{
    JOptionPane.showMessageDialog(null,"The difference is: "+subtraction, "Result.", JOptionPane.INFORMATION_MESSAGE);
}

} 
```

我所在的班级

```
 package chap3;

 import javax.swing.JOptionPane;

 /**
  *
 * @author jtech
 */
public class SimpleArithmetic 
{

  public static void main(String[] args)
  {
    String[] strInptNums = new String[2];
    int[] inptNums = new int[2];         

    SimpleArithmeticMethods obtainSum = new SimpleArithmeticMethods();
    SimpleArithmeticMethods obtainDifference = new SimpleArithmeticMethods();
    SimpleArithmeticMethods workSum_Difference = new SimpleArithmeticMethods();

    for (int counter = 0; counter <= 1; counter++)
    {
        strInptNums[counter] = JOptionPane.showInputDialog(null, "Input a number, smallest first", "Input Data.", JOptionPane.QUESTION_MESSAGE);
        inptNums[counter] = Integer.parseInt(strInptNums[counter]);
    }        

    workSum_Difference.sum_Difference(inptNums);
    obtainSum.getDifference(); 
    obtainDifference.getDifference();
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:56:28.290

您`sum_Difference()`在一个对象上调用该方法，并使用另一个对象显示结果。

这就像将消息存储在瓶子中，然后查看消息是否在另一个瓶子中。使用同一个对象来调用所有三个方法。

# javascript - Asp 表单输入字段无法从 jQuery 对话框传递信息

> ID：13461855
> 
> 赞同：1
> 
> 时间：2012-11-19T20:41:46.967
> 
> 标签：javascript, jquery, asp.net, html, forms

我们正在尝试在 jQuery 对话框中创建一个注册表单，但是应该从文本框中传输信息的按钮不发送信息 - 这意味着我制作的 c# 函数接收空白数据。我们拥有的代码是：

这是提交信息的按钮（我们的提交按钮在jQuery对话框div之外并且它是隐藏的；我们使用另一个js生成的按钮作为快捷方式）：

```
<asp:Button ID="btntwo" runat="server" style="display:none"  Text="" OnClick="registerSubmit_Click" /> 
```

这是创建我们的 jQuery 对话框的代码（我们有模拟点击我们的 asp 按钮的 javascript 函数）：

```
$('#Register').dialog(dialogOpts);
$.fx.speeds._default = 500;
$(function () {
    $("#Register").dialog({
        autoOpen: false,
        buttons: {
            Ok: function () {
                $("[id*=btntwo]").click();
                $('form').append('#Register');
            }
        },
        show: "blind",
        hide: "explode"
    }); 
```

这是我们用于输入字段的代码，位于我们的 jQuery 对话框中：

```
<asp:TextBox ID="username_textbox" runat="server" /> 
```

这是我们的 c# 函数，它从输入字段中获取数据并在之后使用这些数据。

```
string username = username_textbox.Text; 
```

这是我们的问题：预期结果是用户名变量将是用户输入的任何内容，但该变量只接收空白数据“”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:40:26.983

我相信 jQuery 对话框会获取您的 HTML 的一部分，将其包装在对话框容器中并将其附加到 body 元素，这意味着您的输入元素不再在您的表单中，这就是它们不被传输的原因……只有正在提交的表单中的输入元素被发送回对服务器来说，表单之外的其他输入元素（包括其他表单）都没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:44:03.600

这是您的问题的解决方案： [jQuery 对话框表单提交不是 POSTing 值](https://stackoverflow.com/questions/11237234/jquery-dialog-form-submission-not-posting-values)

# c# - 我应该如何在没有 C# 的异步的情况下实现这种在循环中异步调用的模式？

> ID：13461856
> 
> 赞同：1
> 
> 时间：2012-11-19T20:41:56.590
> 
> 标签：c#, c#-4.0, async-await

我正在尝试实现这个简单的任务，即在 C#4 中异步列出 AmazonS3 存储桶中的所有对象以及分页请求。我使用以下代码段在 C#5 中工作：

```
var listRequest = new ListObjectsRequest().WithBucketName(bucketName);
ListObjectsResponse listResponse = null;
var list = new List<List<S3Object>>();

while (listResponse == null || listResponse.IsTruncated)
{
    listResponse = await Task<ListObjectsResponse>.Factory.FromAsync(
        client.BeginListObjects, client.EndListObjects, listRequest, null);

    list.Add(listResponse.S3Objects);

    if (listResponse.IsTruncated)
    {
        listRequest.Marker = listResponse.NextMarker;
    }
}

return list.SelectMany(l => l); 
```

我正在异步调用 BeginListObjects/EndListObjects 对，但是每次响应说它被截断时，我都必须重复该调用。这段代码对我有用。

但是，我现在想在 C#4 的 TPL 中执行此操作，我没有使用 async/await 的奢侈，并且想了解这是否可以使用延续来完成。

我如何在 C#4 中做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:05:02.453

好的，因此，与其将项目与每个任务/延续一起放入列表中，不如在非等待模型中让每个任务/延续返回整个序列更容易。鉴于此，我使用以下辅助方法将每个人的迭代结果添加到汇总总数中。

```
public static Task<IEnumerable<T>> Concat<T>(Task<IEnumerable<T>> first
        , Task<IEnumerable<T>> second)
{
    return Task.Factory.ContinueWhenAll(new[] { first, second }, _ =>
    {
        return first.Result.Concat(second.Result);
    });
} 
```

接下来，我使用 follow 方法将单个结果的任务转换为序列的任务（仅包含一项）。

```
public static Task<IEnumerable<T>> ToSequence<T>(this Task<T> task)
{
    var tcs = new TaskCompletionSource<IEnumerable<T>>();
    task.ContinueWith(_ =>
    {
        if (task.IsCanceled)
            tcs.SetCanceled();
        else if (task.IsFaulted)
            tcs.SetException(task.Exception);
        else
            tcs.SetResult(Enumerable.Repeat(task.Result, 1));
    });

    return tcs.Task;
} 
```

请注意，您有一些未定义的字段/本地；我假设您可以毫无困难地将它们添加到适当的方法中。

```
private Task<IEnumerable<S3Object>> method(object sender, EventArgs e)
{

    ListObjectsResponse listResponse = null;
    return Task<ListObjectsResponse>.Factory.FromAsync(
        client.BeginListObjects, client.EndListObjects, listRequest, null)
        .ToSequence()
        .ContinueWith(continuation);
} 
```

这是真正的魔法发生的地方。基本上，

```
public Task<IEnumerable<S3Object>> continuation(Task<IEnumerable<S3Object>> task)
{
    if (task.Result == null)  //not quite sure what null means here//may need to edit this recursive case
    {
        return Task<ListObjectsResponse>.Factory.FromAsync(
                client.BeginListObjects, client.EndListObjects, listRequest, null)
                .ToSequence()
                .ContinueWith(continuation);
    }
    else if (task.Result.First().IsTruncated)
    {
        //if the results were trunctated then concat those results with 
        //TODO modify the request marker here; either create a new one or store the request as a field and mutate.
        Task<IEnumerable<S3Object>> nextBatch = Task<ListObjectsResponse>.Factory.FromAsync(
                client.BeginListObjects, client.EndListObjects, listRequest, null)
                .ToSequence()
                .ContinueWith(continuation);
        return Concat(nextBatch, task);//recursive continuation call
    }
    else //if we're done it means the existing results are sufficient
    {
        return task;
    }
} 
```

# c# - 如何通过 PayPal IPN 传递自定义数据

> ID：13461858
> 
> 赞同：0
> 
> 时间：2012-11-19T20:42:02.333
> 
> 标签：c#, asp.net, .net, paypal

我将以下代码用于`RETURN URL`.

```
 @foreach (var item in Model)
                    {
                        <form action='@item.PayPalURL2 ' method='post'>
                            <input type='hidden' name='cmd' value='_xclick' />
                            <input type='hidden' name='business' value='@item.BusinessEmail' />
                            <input name='item_name' value='@item.Name' class="ppField" readonly="readonly"/>
                            <input type='hidden' name='item_number'  value='@item.ID' />
                            <input name='amount' value='@item.Price2' class="ppField" readonly="readonly"/>
                            <input type='hidden' name='return' value='@item.ReturnURL' />
                            <input type='hidden' name='custom' value='@item.UserID' />
                            <input type='submit' value='Buy' />
                        </form>
                    } 
```

任何线索如何通过`custom`归档`IPN message`并通过`Listener`？

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:46:48.023

您已经在表单中包含了“自定义”字段。无论您在@item.UserID 中拥有的任何值都将与付款一起发送，并将作为您的IPN 解决方案中称为“自定义”的POST 值返回。

所以，看起来你已经得到了你需要的东西。您只需要确保 $item.UserID 实际上包含您期望它包含的内容，并且您正在 IPN 侦听器中查找自定义字段。

# javascript - 为什么我需要将这个词添加到我的 javascript 方法中

> ID：13461860
> 
> 赞同：2
> 
> 时间：2012-11-19T20:42:06.437
> 
> 标签：javascript, this

我知道这是一个愚蠢的例子——但为什么这段代码会导致 bar 未定义的错误。javascript 不会查看 bar 是否是“this”对象的属性。我知道添加这个可以解决问题——但这往往会让我失望。例如，在其他编程语言（C#）中，这通常是多余的——为什么需要在下面的代码中添加它？

```
 var myObject = {
        foo : function(){
            alert(bar);
        },
        bar : "hello world"
    };

    myObject.foo(); 
```

[http://jsfiddle.net/Mv86n/](http://jsfiddle.net/Mv86n/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:43:38.510

因为，正如您所展示的，JavaScript*不会*以`this`.

*   [http://jibbering.com/faq/notes/closures/#clIdRes](http://jibbering.com/faq/notes/closures/#clIdRes)
*   [http://oreilly.com/server-administration/excerpts/even-faster-websites/writing-efficient-javascript.html](http://oreilly.com/server-administration/excerpts/even-faster-websites/writing-efficient-javascript.html)
*   [JavaScript 中变量的作用域是什么？](https://stackoverflow.com/questions/500431/javascript-variable-scope)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:44:09.693

> javascript不会查看bar是否是“this”对象的属性

不。它查看哪些变量在范围内，而不是哪些属性是当前上下文的成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T21:15:15.360

它只是不那样工作。它可能有，但语言设计者可能认为这种方式会导致效率低下、模棱两可和难以看到发生了什么的代码。

我承认，有时我也对在前面加上“this”的必要性感到恼火。更恼火的是我经常不得不说“var self = this;”，但这就是 Javascript 中的生活。你只需要接受它的本来面目，然后继续前进。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T21:03:45.257

Javascript 有函数作用域，而不是对象作用域。

只有在同一函数中声明的标识符在本地范围内，其他所有内容都在全局范围内访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T20:51:44.643

在 javascript 中，查找优先级是从最近执行的代码到最远的祖先函数范围（可以嵌套，与 C++ 和 Java 不同）。

在那个简单的例子中，看起来隐式`this`是有意义的，但是指定和使用不同级别的嵌套函数和对象会复杂得多。

```
(function() {
    var myVar = "dsjsh";
    return {
        myVar: "var",
        myMethod: function() {
            /* which */ myVar;
        };
    }
})() 
```

显然，语言做出了简单的选择（至少在这个问题上）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-19T20:52:51.167

JavaScript 并不完全有*类*或*类范围*的概念；`myObject`应该被认为是一张地图，而不是一个物体。例如，您可以这样做：

```
function foo() {
    alert(this.bar);
}
var myObject = {
    bar: "hello world"
};
myObject.foo = foo; 
```

在这种情况下，为什么要`foo`知道`myObject`它的定义时间？当你调用 时`myObject.foo()`，JavaScript 会传入`myObject`as `this`（当然，JavaScript 的范围规则关于这个有点奇怪，所以`this`并不总是你认为的那样），你可以`myObject`通过`this`. 如果您只是调用`foo()`，`this`将会有所不同（在浏览器中，它可能是`window`），甚至访问`this.bar`也不起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-19T20:50:18.693

这样想：

```
var myObject = {
    foo : null,
    bar : "hello world"
};
myObject.foo = function(){
    alert(bar);
} 
```

现在，`bar`应该指的是什么？正如您现在可以更轻松地看到的那样，`bar`不在范围内。

在 C# 中，方法*属于*对象，并且知道它们具有哪些属性，这就是为什么这样的事情是可能的。但是在 JavaScript 中，你没有这些知识，“方法”不*属于*，属性是动态的，这使得这样的范围规则不可行。

# c# - 在 monodevelop 添加引用

> ID：13461866
> 
> 赞同：1
> 
> 时间：2012-11-19T20:42:44.750
> 
> 标签：c#, monodevelop

简而言之，我无法在单声道项目中添加参考，项目菜单中的“编辑参考”按钮未激活，我尝试创建新项目并粘贴我的代码，但按钮仍未激活？我如何添加参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T21:41:57.687

您可能已经得到它，但如果其他人遇到它 - 您需要确保在解决方案视图中选择项目（您希望添加引用的项目），然后添加引用（通过转到项目然后编辑引用或右键单击项目）；只要在此视图中选择了解决方案，编辑引用菜单项就会被禁用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T22:35:09.177

转到编辑参考（您可以通过右键单击参考图标来获得此信息）。如果你想添加一个包，你可以通过在包选项卡下选择需要包来做到这一点。但是，如果你想从本地项目库中添加引用，请转到 .Net Assembly 选项卡并浏览.dll 文件的位置（通常位于该本地库项目的 bin 文件夹中），并将其添加到您的项目中。

# c++ - C++ 将多种类型推送到向量上

> ID：13461869
> 
> 赞同：15
> 
> 时间：2012-11-19T20:42:47.087
> 
> 标签：c++, memory-management, types, vector

**注意：**我知道以前在 SO 上已经提出过类似的问题，但我没有发现它们有帮助或很清楚。

**第二个注意事项：**对于这个项目/任务的范围，我试图避免使用第三方库，例如 Boost。

我正在尝试查看是否有一种方法可以让单个向量在其每个索引中保存多种类型。例如，假设我有以下代码示例：

```
vector<something magical to hold various types> vec;
int x = 3;
string hi = "Hello World";
MyStruct s = {3, "Hi", 4.01};

vec.push_back(x);
vec.push_back(hi);
vec.push_back(s); 
```

我听说`vector<void*>`可以工作，但是内存分配会变得很棘手，如果插入某个索引的值大于预期，附近内存中的某些部分总是有可能被无意覆盖。

在我的实际应用中，我知道有哪些*可能的*类型可以插入到向量中，但是这些类型并不都派生自同一个超类，并且无法保证所有这些类型都会被推送到向量中或以什么顺序.

有没有一种方法可以**安全地**实现我在代码示例中展示的目标？

感谢您的时间。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-19T20:57:10.160

对象`std::vector<T>`需要是同质类型的。如果您需要将不同类型的对象放入一个向量中，您需要以某种方式擦除它们的类型并使它们看起来都相似。`boost::any`您可以使用or的道德等价物`boost::variant<...>`。的想法`boost::any`是封装一个类型层次结构，存储一个指向基类但指向模板化派生的指针。一个非常粗略和不完整的轮廓看起来像这样：

```
#include <algorithm>
#include <iostream>

class any
{
private:
    struct base {
        virtual ~base() {}
        virtual base* clone() const = 0;
    };
    template <typename T>
    struct data: base {
        data(T const& value): value_(value) {}
        base* clone() const { return new data<T>(*this); }
        T value_;
    };
    base* ptr_;
public:
    template <typename T> any(T const& value): ptr_(new data<T>(value)) {}
    any(any const& other): ptr_(other.ptr_->clone()) {}
    any& operator= (any const& other) {
        any(other).swap(*this);
        return *this;
    }
    ~any() { delete this->ptr_; }
    void swap(any& other) { std::swap(this->ptr_, other.ptr_); }

    template <typename T>
    T& get() {
        return dynamic_cast<data<T>&>(*this->ptr_).value_;
    }
};

int main()
{
    any a0(17);
    any a1(3.14);
    try { a0.get<double>(); } catch (...) {}
    a0 = a1;
    std::cout << a0.get<double>() << "\n";
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-19T21:30:05.550

正如建议的那样，您可以使用各种形式的联合、变体等。根据您想要对存储的对象执行的操作，***如果您可以在基类接口中定义所有必要的操作***，外部多态性可以完全按照您的意愿执行。

如果我们只想将对象打印到控制台，这是一个示例：

```
#include <iostream>
#include <string>
#include <vector>
#include <memory>

class any_type
{
public:
   virtual ~any_type() {}
   virtual void print() = 0;
};

template <class T>
class concrete_type : public any_type
{
public:
   concrete_type(const T& value) : value_(value)
   {}

   virtual void print()
   {
      std::cout << value_ << '\n';
   }
private:
   T value_;
};

int main()
{
   std::vector<std::unique_ptr<any_type>> v(2);

   v[0].reset(new concrete_type<int>(99));
   v[1].reset(new concrete_type<std::string>("Bottles of Beer"));

   for(size_t x = 0; x < 2; ++x)
   {
      v[x]->print();
   }

   return 0;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-19T20:58:12.690

为此，您肯定需要一个包装类来以某种方式从向量中隐藏对象的类型信息。

当您在之前将 Type-B 存储到其中时尝试取回 Type-A 时，让此类抛出异常可能也很好。

这是我的一个项目中的 Holder 课程的一部分。你大概可以从这里开始。

**注意：由于使用了不受限制的联合，这仅适用于 C++11。**可以在此处找到有关此的更多信息：[什么是 C++11 中提出的无限制联合？](https://stackoverflow.com/questions/5548636/what-are-unrestricted-unions-proposed-in-c0x)

```
class Holder {
public:
    enum Type {
        BOOL,
        INT,
        STRING,
        // Other types you want to store into vector.
    };

    template<typename T>
    Holder (Type type, T val);

    ~Holder () {
        // You want to properly destroy
        // union members below that have non-trivial constructors
    }

    operator bool () const {
        if (type_ != BOOL) {
           throw SomeException();
        }
        return impl_.bool_;
    }
    // Do the same for other operators
    // Or maybe use templates?

private:
    union Impl {
        bool   bool_;
        int    int_;
        string string_;

        Impl() { new(&string_) string; }
    } impl_;

    Type type_;

    // Other stuff.
}; 
```

# javascript - 被 JavaScript 阻止的 CSS 过渡

> ID：13461871
> 
> 赞同：6
> 
> 时间：2012-11-19T20:42:49.570
> 
> 标签：javascript, css-transitions

我试图在*非常*密集的 JavaScript 期间创建一个加载栏，其中构建和填充了一些非常重的 3d 数组。在用户单击按钮之前，此加载栏需要保持空白。

无论我*是否*使用，都会发生冻结`-webkit-transition`（这个应用程序可以是 chrome 独有的，在我的情况下不需要跨浏览器）。

寻求简单我已经建立了这样的酒吧......

```
<div id="loader">
    <div id="thumb">
    </div>
</div> 
```

...然后试图在我的主`for`循环的各个阶段增加该栏：

```
for(i = 0; i < 5 ; i++){
    document.getElementById('thumb').style.width = i*25 + '%';
    //More Code
} 
```

问题是一切都冻结了，直到 JavaScript 完成。我在 Stack Overflow 上发现了一个类似的问题，[在 javascript 计算时使用 CSS 动画](https://stackoverflow.com/questions/12752864/using-css-animation-while-javascript-computes "Stack Overflow：在 javascript 计算时使用 CSS 动画")，在评论中发现并考虑和/或尝试了以下内容：

*   网络工作者

    不要认为它会起作用，因为我的脚本正在用对象和构造函数填充数组，这些对象和构造函数包含根据[本网站](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers "Mozilla 开发者网络：使用 Webworkers")无法正常工作的函数

*   jQuery

    不是一个选项，我不能在我的应用程序中使用外部库 - 无论如何，仅为加载栏导入整个库似乎有点矫枉过正......

*   关键帧

    这是有希望的，我试过了，但最后它也冻结了，所以没有快乐

*   `timeOut()`s

    想过这个，但既然加载栏的目的是减少挫败感，增加等待时间似乎适得其反

我很乐意在这个阶段增加条形，即使它不平滑*！*我很确定这不仅仅是我一个人遇到的问题——也许有人有一个有趣的解决方案？

*PS：我将其作为一个新问题发布，而不是添加到引用的问题中，因为我专门寻求 JavaScript（不是 jQuery）的帮助，并且如果我可以使用宽度上的转换（！=动画）来获得它，我更愿意.*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T21:12:26.397

有些人已经提到你应该使用超时。这是适当的方法，因为它会让浏览器有时间“呼吸”并在任务中呈现进度条。

您必须拆分代码才能异步工作。假设您目前有这样的事情：

```
function doAllTheWork() {
  for(var i = 0; i < reallyBigNumberOfIterations; i++) {
    processorIntensiveTask(i);
  }
} 
```

然后你需要把它变成这样的东西：

```
var i = 0;
function doSomeWork() {
  var startTime = Date.now();
  while(i < reallyBigNumberOfIterations && (Date.now() - startTime) < 30) {
    processorIntensiveTask(i);
    i++;
  }

  if(i < reallyBigNumberOfIterations) {
    // Here you update the progress bar
    incrementBar(i / reallyBigNumberOfIterations);

    // Schedule a timeout to continue working on the heavy task
    setTimeout(doSomeWork, 50);
  }
  else {
    taskFinished();
  }
}

function incrementBar(fraction) {
  console.log(Math.round(fraction * 100) + ' percent done');
}

function taskFinished() { console.log('Done!'); }

doSomeWork(); 
```

注意表达式`(Date.now() - startTime) < 30`。这意味着循环将在 30 毫秒的跨度内完成尽可能多的工作。你可以让这个数字更大，但是从用户的角度来看，任何超过 100 毫秒（基本上是每秒 10 帧）的时间都会开始变得迟缓。

与同步版本相比，使用这种方法可能会花费更长的时间来完成整个任务。然而，从用户的经验来看，有*某事正在发生的迹象比在似乎**什么都没有*发生的情况下无限期地等待要好——即使后者的等待时间更短。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:47:40.107

您是否尝试过更简单并创建一个函数，比如说：

伪：

```
Function increment_bar(amount = 10)
{
 document.getElementById('thumb').style.width = i*amount + '%';
} 
```

然后，无论您在哪里进行处理工作，只需每隔 x 秒或每当您在处理中达到某个特定点时调用该函数（比如说 10-20% 的完成度？）

伪：

```
{
    Doing_work_here;
    increment_bar(25);
    LOOP
} 
```

# javascript - 在 Google Maps API v3 中打开第二个 InfoWindow

> ID：13461872
> 
> 赞同：0
> 
> 时间：2012-11-19T20:42:51.457
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在为音乐场所和活动的数据库实现 Maps 界面，并遇到了一个有趣的问题。我有一系列 HTML 元素，带有对某个 Javascript 函数的 onclick 调用。调用正确运行，并且 javascript 函数第一次正确运行（所有信息都正确传递，我的调试警报正确显示），并且 infoWindow 显示。第二次单击其中一个 div 时，第一个会正确关闭，下面代码中的最终警报会以正确的信息触发，但不会弹出新的 InfoWindow。

地图设置代码：

```
function mapsInitialize() {
    var mapOptions = {
        center: new google.maps.LatLng(42.4439614, -76.5018807),
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("mapSection"), mapOptions);
    google.maps.event.trigger(map, 'resize');

    for(var x = 0; x < markers.length; x++){
        var tempOptions = {
            position: markers[x].position,
            title: markers[x].name,
            map: map
        }
        markerObjects[markers[x].title] = new google.maps.Marker(tempOptions); 
    }
} 
```

从 div 调用 onclick 的函数：

```
function generateInfoWindow(despacedName, despacedTitle, eventTitle, url, date, time){
    if(curInfoWindow){
        alert("closing " + curInfoWindow.getContent());
        curInfoWindow.close();
        curInfoWindow = null;
    }
    curInfoWindow = new google.maps.InfoWindow(options = {size: new google.maps.Size(150,50)});
    curInfoWindow.setContent("<a class=\"eventLink\" href=\""+url+"\">"+eventTitle+"</a><br><br>"+markerObjects[despacedName].title+"<br>"+date+" at "+time);
    curInfoWindow.open(map, markerObjects[despacedName]);
    alert(despacedName+" is "+markerObjects[despacedName]);
} 
```

我可以保证markers[] 数组被正确输入。

我试过了，除其他外......

*   创建一个数组来保存 infoWindows 而不是使用一个 curInfoWindow 变量

*   数组中没有任何东西会像 generateInfoWindow() 函数的开头那样自动关闭

*   在 mapsInitialize() 函数中自动创建信息窗口

在搜索解决方案时，Google 上的大多数结果都为我提供了有关地图上事件侦听器的信息 - 这是触发此类事件的唯一方法，还是我正在尝试做的事情有效？

如果需要任何其他代码示例，请告诉我。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:27:34.580

根据谷歌地图 API：

> InfoWindows 可以附加到标记对象（在这种情况下，它们的位置基于标记的位置）或地图本身的指定 LatLng。如果您希望一次只显示一个信息窗口（就像谷歌地图上的行为一样），您只需要创建一个信息窗口，您可以根据地图事件（例如用户点击）将其重新分配给不同的位置或标记。然而，与 Google Maps API V2 中的行为不同，如果您愿意，地图现在可以显示多个 InfoWindow 对象。

也许这会起作用：

```
function generateInfoWindow(despacedName, despacedTitle, eventTitle, url, date, time){
    if(!curInfoWindow){
        curInfoWindow = new google.maps.InfoWindow({maxWidth:150});
    }
    curInfoWindow.setContent("<a class=\"eventLink\" href=\""+url+"\">"+eventTitle+"</a><br><br>"+markerObjects[despacedName].title+"<br>"+date+" at "+time);
    curInfoWindow.open(map, markerObjects[despacedName]);
    alert(despacedName+" is "+markerObjects[despacedName]);
} 
```

根据规范，这应该将现有的 curInfoWindow 移动到新标记并更新内容。

注意：此代码无效

```
new google.maps.InfoWindow(options = {size: new google.maps.Size(150,50)}) 
```

没有大小属性​​。你能做的最好的就是

```
new google.maps.InfoWindow({maxWidth:150}) 
```

更多关于[InfoWindow API](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)

# ruby - 红宝石未检测到宝石

> ID：13461873
> 
> 赞同：9
> 
> 时间：2012-11-19T20:42:53.783
> 
> 标签：ruby, rubygems, rvm, appfog

出于某种原因，Ruby 似乎无法理解我安装了 AppFog gem ( `af`)。当我跑步时`af`，我得到了这个：

```
/Users/myface13214/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find af (>= 0) amongst [Saikuro-1.1.0, actionmailer-3.2.8, actionpack-3.2.8, activemodel-3.2.8, activerecord-3.2.8, activeresource-3.2.8, activesupport-3.2.8, arel-3.0.2, awesome_print-1.1.0, bcrypt-ruby-3.0.1, bourbon-2.1.2, builder-3.0.4, cancan-1.6.8, capistrano-2.13.5, capybara-2.0.0, cgi_multipart_eof_fix-2.5.0, childprocess-0.3.6, chronic-0.3.0, chunky_png-1.2.6, churn-0.0.24, code_analyzer-0.3.0, coffee-rails-3.2.2, coffee-script-2.2.0, coffee-script-source-1.4.0, colored-1.2, compass-0.12.2, compass-rails-1.0.3, configatron-2.9.1, cover_me-1.2.0, daemons-1.1.9, daemons-1.0.10, devise-2.1.2, diff-lcs-1.1.3, erubis-2.7.0, excon-0.16.10, execjs-1.4.0, factory_girl-4.1.0, factory_girl_rails-4.1.0, fastthread-1.0.7, ffi-1.1.5, figaro-0.5.0, flay-1.4.3, flog-2.5.3, fssm-0.2.9, gem_plugin-0.2.3, hashie-1.2.0, highline-1.6.15, hike-1.2.1, hirb-0.7.0, i18n-0.6.1, journey-1.0.4, jquery-rails-2.1.3, json-1.7.5, json_pure-1.7.5, kgio-2.7.4, libwebsocket-0.1.6, mail-2.4.4, main-4.7.1, metric_fu-2.1.1, metrical-0.1.0, mime-types-1.19, mongrel-1.2.0.pre2, multi_json-1.3.7, net-scp-1.0.4, net-sftp-2.0.5, net-ssh-2.6.1, net-ssh-gateway-1.1.0, nokogiri-1.5.5, orm_adapter-0.4.0, polyglot-0.3.3, progressbar-0.11.0, rack-1.4.1, rack-cache-1.2, rack-ssl-1.3.2, rack-test-0.6.2, rails-3.2.8, rails_best_practices-1.12.0, railties-3.2.8, raindrops-0.10.0, rake-10.0.1, rcov-0.9.11, rdoc-3.12, reek-1.2.12, ripper_ruby_parser-0.0.8, roodi-2.1.0, rspec-core-2.12.0, rspec-expectations-2.12.0, rspec-mocks-2.12.0, rspec-rails-2.12.0, ruby2ruby-1.2.5, ruby_parser-2.3.1, rubyzip-0.9.9, sass-3.2.3, sass-rails-3.2.5, selenium-webdriver-2.26.0, sexp_processor-3.2.0, sprockets-2.1.3, sqlite3-1.3.6, syntax-1.0.0, thor-0.16.0, tilt-1.3.3, treetop-1.4.12, tzinfo-0.3.35, uglifier-1.3.0, unicorn-4.4.0, vcr-2.3.0, warden-1.2.1, websocket-1.0.2, xpath-1.0.0, yamler-0.1.0] (Gem::LoadError)
    from /Users/myface13214/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
    from /Users/myface13214/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
    from /Users/myface13214/.rvm/gems/ruby-1.9.3-p327/bin/af:18:in `<main>'
    from /Users/myface13214/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `eval'
    from /Users/myface13214/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `<main>' 
```

即使在安装后也是如此。由于某种原因`gem install`不会安装它。如果有帮助，我正在运行通过 RVM 安装的 1.9.3。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T05:23:24.430

你并没有真正展示你在用什么，所以我将概述一些我用来安装它的故障排除和安装步骤。一个干净`gemset`的，最新的`rvm`，并记录下来，因为我在这里发布。

您首先要确认的是您的`rvm`环境。我做了这两个步骤：

```
$: rvm get head
$: rvm use 1.9.3-p327 
```

接着：

```
$: rvm info 
```

最后给了我这份报告：

```
ruby-1.9.3-p327@CleanProject:

  system:
    uname:       "Linux lazurus 3.2.0-32-generic #51-Ubuntu SMP Wed Sep 26 21:32:50 UTC 2012 i686 i686 i386 GNU/Linux"
    system:      "debian/wheezy_sid/i386"
    bash:        "/bin/bash => GNU bash, version 4.2.24(1)-release (i686-pc-linux-gnu)"
    zsh:         " => not installed"

  rvm:
    version:      "rvm 1.16.20 (master) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
    updated:      "13 minutes 59 seconds ago"

  ruby:
    interpreter:  "ruby"
    version:      "1.9.3p327"
    date:         "2012-11-10"
    platform:     "i686-linux"
    patchlevel:   "2012-11-10 revision 37606"
    full_version: "ruby 1.9.3p327 (2012-11-10 revision 37606) [i686-linux]"

  homes:
    gem:          "/home/some_user/.rvm/gems/ruby-1.9.3-p327@CleanProject"
    ruby:         "/home/some_user/.rvm/rubies/ruby-1.9.3-p327"

  binaries:
    ruby:         "/home/some_user/.rvm/rubies/ruby-1.9.3-p327/bin/ruby"
    irb:          "/home/some_user/.rvm/rubies/ruby-1.9.3-p327/bin/irb"
    gem:          "/home/some_user/.rvm/rubies/ruby-1.9.3-p327/bin/gem"
    rake:         "/home/some_user/.rvm/gems/ruby-1.9.3-p327@global/bin/rake"

  environment:
    PATH:         "/home/some_user/.rvm/gems/ruby-1.9.3-p327@CleanProject/bin:/home/some_user/.rvm/gems/ruby-1.9.3-p327@global/bin:/home/some_user/.rvm/rubies/ruby-1.9.3-p327/bin:/home/some_user/.rvm/bin:/usr/local/heroku/bin:/home/some_user/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/lib/jvm/java-6-sun/bin"
    GEM_HOME:     "/home/some_user/.rvm/gems/ruby-1.9.3-p327@CleanProject"
    GEM_PATH:     "/home/some_user/.rvm/gems/ruby-1.9.3-p327@CleanProject:/home/some_user/.rvm/gems/ruby-1.9.3-p327@global"
    MY_RUBY_HOME: "/home/some_user/.rvm/rubies/ruby-1.9.3-p327"
    IRBRC:        "/home/some_user/.rvm/rubies/ruby-1.9.3-p327/.irbrc"
    RUBYOPT:      ""
    gemset:       "CleanProject" 
```

我有一个干净的宝石，没有`Gemfile`所以没有`bundle install`。简单地说：

```
 $: gem install af --no-rdoc --no-ri       
Fetching: json_pure-1.6.7.gem (100%)       
Fetching: rubyzip-0.9.9.gem (100%)         
Fetching: mime-types-1.19.gem (100%)       
Fetching: rest-client-1.6.7.gem (100%)     
Fetching: terminal-table-1.4.5.gem (100%)  
Fetching: interact-0.4.8.gem (100%)        
Fetching: addressable-2.2.8.gem (100%)     
Fetching: uuidtools-2.1.3.gem (100%)       
Fetching: rb-readline-0.4.2.gem (100%)     
Fetching: af-0.3.18.11.gem (100%)          
Successfully installed json_pure-1.6.7     
Successfully installed rubyzip-0.9.9       
Successfully installed mime-types-1.19     
Successfully installed rest-client-1.6.7   
Successfully installed terminal-table-1.4.5
Successfully installed interact-0.4.8      
Successfully installed addressable-2.2.8   
Successfully installed uuidtools-2.1.3     
Successfully installed rb-readline-0.4.2   
Successfully installed af-0.3.18.11        
10 gems installed 
```

然后我检查 gems 二进制文件，以便我知道它安装了它。

```
$: which af
/home/some_user/.rvm/gems/ruby-1.9.3-p327@CleanProject/bin/af 
```

当我做一个目录列表时：

```
$: ls /home/some_user/.rvm/gems/ruby-1.9.3-p327@CleanProject/bin/
af
restclient 
```

这似乎是你打破的地方......

```
 $: af
Usage: af [options] command [<args>] [command_options]
Try 'af help [command]' or 'af help options' for more information. 
```

此外，我可以运行帮助选项：

```
$: af help 
```

我得到帮助屏幕

```
Usage: af [options] command [<args>] [command_options]
Try 'af help [command]' or 'af help options' for more information.

Currently available af commands are:

  Getting Started
    target [url]                                 Reports current target or sets a new 

|
|  quite a few lines cut out for brevity's sake
|    

  Help
    help [command]                               Get general help or help on a specific command
    help options                                 Get help on available options 
```

当然，当我检查 rvm 信息中反映的文件夹时，我会看到`af`二进制文件和其他文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T20:58:28.687

有时`rvm`可能没有完全参与，这意味着您的`$GEM_PATH`环境变量设置不正确。通常`rvm use 1.9.3`会解决这个问题。

可能是您的`rvm`安装已过时或需要调整以正确设置默认 Ruby。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T20:58:27.787

请在项目根目录中执行以下操作：

`rvm use 1.9.3`

`rvm gemset create your-project-name`

`rvm gemset use your-project-name`

`bundle install`

看看一切是否按预期工作。

# java - 如何在 Ivy 或 Maven 中指定 net.sf.json-lib#json-lib#2.3？

> ID：13461876
> 
> 赞同：2
> 
> 时间：2012-11-19T20:43:06.103
> 
> 标签：java, maven, pom.xml, ivy

我正在使用 Ivy 将我们的构建系统从 Ant 转换为 Ant，并且遇到了指定我们需要的特定 jar 的问题。

*   **groupId** : net.sf.json-lib
*   **artifactId** : json-lib
*   **版本**：2.3

我在 Ivy 中将其指定为：

```
<dependency org="net.sf.json-lib"  artifact="json-lib"
    rev="2.3"     conf="compile->default"/> 
```

并得到以下错误：

```
[ivy:retrieve]  ==== public: tried
[ivy:retrieve]    http://buildl01.tcprod.local/artifactory/libs-release/net/sf/json-lib/json-lib/2.3/json-lib-2.3.jar
[ivy:retrieve]          ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:retrieve]          ::              FAILED DOWNLOADS            ::
[ivy:retrieve]          :: ^ see resolution messages for details  ^ ::
[ivy:retrieve]          ::::::::::::::::::::::::::::::::::::::::::::::
[ivy:retrieve]          :: net.sf.json-lib#json-lib;2.3!json-lib.jar
[ivy:retrieve]          :::::::::::::::::::::::::::::::::::::::::::::: 
```

注意 Ivy 尝试`json-lib-2.3.jar`从存储库下载文件。

我在[Central Maven Repository](http://search.maven.org/#artifactdetails%7Cnet.sf.json-lib%7Cjson-lib%7C2.3%7Cjar)上进行了搜索，发现该工件没有被调用`json-lib-2.3.jar`，而是`json-lib-2.3-jdk-13.jar`or `json-lib-2.3-jdk-15.jar`。

问题是指定工件名称的方式。版本号出现在 jar 名称的**中间**。如果工件是 `json-lib-jdk-15-2.4.jar，我可以这样做：

```
<dependency org="net.sf.json-lib"  artifact="json-lib"
    rev="2.3"     conf="compile->default">
    <artifact name="json-lib-jdk-15"/>
</dependency> 
```

如何指定此 jar 进行下载？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T20:52:58.640

jar 名称末尾的“事物”称为*分类器*。它用于针对特定平台或提供源代码或 Javadoc。

要获取 jar，您需要像这样定义分类器：

```
<ivy-module version='2.0' xmlns:m="http://ant.apache.org/ivy/maven">
...
<dependency org="net.sf.json-lib" artifact="json-lib" rev="2.3"conf="compile->default">
    <artifact name="json-lib" type="jar" m:classifier="jdk15"/>
</dependency> 
```

阅读[本文](http://czetsuya-tech.blogspot.ch/2011/09/how-to-use-mclassifier-in-apache-ivy.html)了解更多信息。

# iphone - 如何在 IOS 中以编程方式表示键盘触摸事件？

> ID：13461882
> 
> 赞同：0
> 
> 时间：2012-11-19T20:43:22.093
> 
> 标签：iphone, objective-c, ios

我正在开发一个使用语音命令在文本字段中进行操作的应用程序。我需要做的是将语音命令转换为键盘上的触摸事件。具体来说，我需要访问制表键和返回键。用户将不会在此应用程序中使用键盘。我很难找到完成这项工作的方法。我知道如何将语音命令转换为我可以使用的东西，但我仍然需要将其应用于键盘命令。我对此进行了广泛的研究，并得到了我认为我真正需要的点点滴滴，但对我来说，没有什么能把这些点联系起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:59:56.490

您不需要键盘来导航文本字段。您只需要修改第一响应者。不幸的是，没有一种简单的方法可以获取当前的第一响应者，但[您可以搜索它](https://stackoverflow.com/questions/1823317/get-the-current-first-responder-without-using-a-private-api)。

一旦你有了第一响应者，你可以像这样移动到下一个字段：

```
[[field nextResponder] becomeFirstResponder]; 
```

如果您尝试以非常通用的方式执行此操作，则应首先调用`canBecomeFirstResponder`并处理没有可用的第一响应者和其他极端情况的情况，但对于非常简单的接口通常不需要这样做。

如果您想管理“输入”以结束编辑并关闭键盘，您可以调用`endEditing:`超级视图。

您可以通过替换`text`属性在没有键盘的情况下修改文本。

# c# - 错误：“DataGridViewComboBoxCell 值无效。” DataSource 是基本类型的列表

> ID：13461885
> 
> 赞同：7
> 
> 时间：2012-11-19T20:43:29.553
> 
> 标签：c#, datagridview

我在 SO 上找不到与我的问题*完全*匹配的问题。

与[这个问题](https://stackoverflow.com/q/654829/99640)和[这个问题](https://stackoverflow.com/q/2753687/99640)类似，我将`DataSource`a设置`DataGridViewComboBoxColumn`为一个事物列表。在我的情况下，事情是简单的类型，比如双精度和整数，所以关于 ValueMembers 和 DisplayMembers 的答案对我没有多大好处。当用户选择一个值时，我得到可怕的“DataGridViewComboBoxCell 值无效”错误。

我可以用空的 dataGridView_DataError 处理程序吞下错误，但这显然是一个不好的方法。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-19T20:43:29.553

[我在这里](http://go4answers.webhost4life.com/Example/datagridviewcomboboxcell-value-not-79018.aspx)找到了答案。在我的问题中第二个链接的[答案](https://stackoverflow.com/a/3139562/99640)中也提到了这一点。将 设置`DataSource`为任何不是字符串的列表时，`ValueType`将列的设置为`typeof(<your data type>)`

```
 IList<double> kvChoices;
        // Populate kvChoices...
        DataGridViewComboBoxColumn kvCol =
            dataGridView1.Columns[0] as DataGridViewComboBoxColumn;
        kvCol.DataSource = kvChoices;
        kvCol.ValueType = typeof(double); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T00:57:10.643

这对子类型很挑剔。当 ValueType 为 Int 时，我仍然遇到错误，但 DataSource 包含 SQLServer SMALLINT（DataSource 上的 Visual Studio 2010 Quick-Watch 说它*是*Int32 ！）。从 SMALLINT -> INT 更改 DB 列为我修复了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-08T20:26:05.533

我在同一类型的问题上苦苦挣扎，并想我会回答我为纠正这个问题所做的事情。

```
List<int> myList = new List<int>();
//Populate list with data

DataGridViewComboBoxColumn c1 = new DataGridViewComboBoxColumn();
c1.ValueType = typeof(int);

c1.DataSource = myList;

dataGridView.Columns.Add(c1); 
```

我希望我可以帮助仍然有这个问题的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-29T19:05:28.473

对我来说，问题是我的数据源返回的值在组合框中不可用......我的组合有值 1、2 和 3......但数据源想要 4。

# c# - 跨多个系统保持数据一致性/同步的可用选项

> ID：13461886
> 
> 赞同：0
> 
> 时间：2012-11-19T20:43:30.237
> 
> 标签：c#, .net, web-services, design-patterns

我的问题是什么最好的，经过尝试和测试的（和新的？）方法可以在大多数公司中完成相当普遍的要求。每个公司都有客户。假设公司 A 有大约 10 个不同的系统来满足其业务需求。客户对所有系统都至关重要。客户可以在任何系统中独立维护，但如果它们不同步，那就不好了。我知道为客户记录保留一个大型主位置/系统并让所有其他系统从该单个位置/系统获取该信息是理想的。你如何构建这样的东西...... SOA？ETL？网络服务？等等……任何其他的新想法……不要忘记旧方法。我们是一家 MS / .NET 商店。这主要是为了我的知识和学习..请指出我正确的方向，我想知道我所有的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:00:57.670

理想情况下，您所有不同的系统都将共享同一个数据库，在这种情况下，该数据库将是主数据库。然而，几乎从来都不是这样。

所以我见过的最常见的方法是拥有另一个系统（我们称之为数据仓库），它从你的 10 个不同系统中获取信息，将它们聚合在一起，并形成一个客户的“主”视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:07:15.610

我没有做过这样的事情，但在这里玩这个想法是我的想法。也许有些东西会有所帮助。

这是一个很难的问题，我想说这主要取决于你在这 10 个系统中的每个系统中都有哪些开发能力和接口。您可能需要一个数据仓库管理器软件，就像我下一段所说的那样，为所涉及的 10 个系统中的所有不同类型的接口提供各种插件。

从数据仓库的想法来看：理想情况下，每个系统中的每个客户都有一个`LastModified`字段，尽管这可能不太可能。因此，您几乎需要序列化来自每个来源的 Customer 记录，将其与程序最后一次更新该记录的时间一起存储在您的数据仓库数据库中。这个想法可以让您在 10 个系统中的任何一个发生任何变化时准确地知道什么记录是最新的，并基于此更新字段。如果您不开发某些系统，只能从某种形式的界面中读取，这大概是您能做的最好的事情。

如果您正在开发所有系统，那么我想 WCF 接口（我提到 WCF，因为它们通常比 Web 服务具有更多的连接选项）将更新传播到所有其他系统（可能通过主集线器应用程序）可能是最简单的选项。通过保存按钮上的事件或`LastModified`每小时/每天检查一个字段，传入新值和更新日期。

另一个困难是，如果一个 Customer 对象具有 Address 字段而另一个没有，会发生什么情况，这两个对象之间的更新是否会在任何情况下相互覆盖？或者如果一个人有一个`CustomerName`，另一个人有`CustomerFirstname`并且`CustomerLastname`

可变数据结构的 NoSQL 想法和将缓存值标记为脏的能力也有点浮现在脑海中，但不确定这些概念会真正增加多少好处。

# c# - 如何在两个不同的视图模型中使用相同的模型数据？

> ID：13461900
> 
> 赞同：1
> 
> 时间：2012-11-19T20:44:14.637
> 
> 标签：c#, mvvm, properties, views

我正在使用 MVVM 模式对 WPF 应用程序进行原型设计。该应用程序应有两个窗口：`MainWindow`和`LoginWindow`。

`Model`包含两个属性：`Username`和`Password`。

`LoginWindow`负责处理用户输入的用户名和密码，因此相应的视图模型会更新这些属性。但是，`MainWindow`还需要访问用户名和密码以供以后与客户端对象一起使用。

我该如何处理？

`Model`将创建的实例传递`LoginViewModel`给`MainWindowViewModel`的构造函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:18:41.920

您需要的是一个 Messenger/Event Aggregator。事件聚合器是一个代理对象，您可以对其进行引用并指定要接收的事件类型，而无需获取引用，甚至无需了解生成事件的对象。

Prism 的 EventAggregator 是最常见的一种。请参阅：[事件聚合器](http://msdn.microsoft.com/en-us/library/ff649187.aspx)

所以：

视图模型 1：

```
public ViewModel1(IEventAggregator eventAggregator)
{
    _eventAggregator=eventAggregator;
}
private void SendMessage()
{
    _eventAggregator.GetEvent<UserLogin>().Publish(new UserLogin(_userName,_password);
} 
```

视图模型 2：

```
public ViewModel2(IEventAggregator eventAggregator)
{
    _eventAggregator=eventAggregator;
    _eventAggregator.GetEvent<UserLogin>().Subscribe(UserLoginReceived,ThreadOption.BackgroundThread,true);
}

private void UserLoginReceived(UserLogin login)
{
  //do what you like here
} 
```

发生的事情是 eventtaggregator 被传递给两个视图模型。ViewModel1 发布一条消息，但不知道谁（如果有人）在听它。ViewModel2 已订阅该事件并正在侦听发布者向其发送消息。

使用这种方法，您可以让您的视图模型进行通信，而无需它们相互引用。

# sql-server - SQL Server：按一列和另一列值选择不同

> ID：13461902
> 
> 赞同：3
> 
> 时间：2012-11-19T20:44:21.107
> 
> 标签：sql-server, select, sql-order-by, distinct

这是一个 SQL Server 表的数据

```
id   user_id     start_date   status_id    payment_id
======================================================
2      4         20-nov-11         1          5
3      5         23-nov-11         1         245
4      5         25-nov-11         1         128
5      6         20-nov-11         1         223
6      6         25-nov-11         2         542
7      4         29-nov-11         2         123
8      4         05-jan-12         2         875 
```

`user_id`我还需要得到不同的值`order by id asc`，但只有一个`user_id`具有最高 start_date

我需要以下输出：

```
id   user_id     start_date   status_id    payment_id
======================================================
8      4         05-jan-12         2         875
4      5         25-nov-11         1         128
6      6         25-nov-11         2         542 
```

请帮忙！

什么是 SQL 查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:48:17.067

您可以`row_number()`在子查询中使用或使用 CTE。

子查询版本：

```
select id, user_id, start_date, status_id, payment_id
from
(
  select id, user_id, start_date, status_id, payment_id, 
    row_number() over(partition by user_id order by start_date desc) rn
  from yourtable
) src
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5ce50/5)

CTE 版本：

```
;with cte as
(
  select id, user_id, start_date, status_id, payment_id, 
    row_number() over(partition by user_id order by start_date desc) rn
  from yourtable
)
select id, user_id, start_date, status_id, payment_id
from cte
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5ce50/7)

或者您可以将表连接到自身：

```
select t1.id, 
  t1.user_id, 
  t1.start_date, 
  t1.status_id, 
  t1.payment_id
from yourtable t1
inner join 
(
  select user_id, max(start_date) start_date
  from yourtable
  group by user_id
) t2
  on t1.user_id = t2.user_id
  and t1.start_date = t2.start_date 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5ce50/8)

所有查询都将产生相同的结果：

```
| ID | USER_ID |                      START_DATE | STATUS_ID | PAYMENT_ID |
---------------------------------------------------------------------------
|  8 |       4 |  January, 05 2012 00:00:00+0000 |         2 |        875 |
|  4 |       5 | November, 25 2011 00:00:00+0000 |         1 |        128 |
|  6 |       6 | November, 25 2011 00:00:00+0000 |         2 |        542 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:53:36.577

不是最好的和未经测试的：

```
select *
  from ServersTable 
  join (
    select User_Id, max(Id) as ID
      from ServersTable x
     where x.start_date = (
          select max(start_date)
            from ServersTable y
           where y.UserID = x.UserId
           )
     group by User_Id) s on ServersTable.Id = s.Id 
```

# jquery - 在 JQuery 中引用类的当前对象

> ID：13461908
> 
> 赞同：2
> 
> 时间：2012-11-19T20:44:39.963
> 
> 标签：jquery, jquery-selectors, this

对于任何类型的 Web 开发，我都不是很有经验，更不用说我需要使用的 jquery 和 ajax，所以我很难过。

我正在开发一个项目，当单击一个名为“重新打开”的单独按钮时，我需要将两个复选框重新绘制为“未选中”。现在我正在使用的代码是：

```
$('.reopenBtn').click(function() {
    var confirm_reopen = confirm("Are you sure you want to open this opportunity back up?");
    if (confirm_reopen) {
        var href = 'cfcs/opportunity.cfc';
        var method = 'ReopenOp';
        var opsid = $(this).parent().parent().attr('id');
        $('#' + opsid).ajaxSuccess(function() {});
        $.post(href, {
            method: method,
            opsid: opsid
        });
        $('.lost').removeAttr('checked');
        $('.won').removeAttr('checked');
    }
}); 
```

这段代码的问题在于它会重新绘制页面上所有复选框的实例，而不仅仅是获胜和丢失复选框的特定实例。我正在寻找的是这样的：

```
$(this).('.lost').removeAttr('checked');
$(this).('.won').removeAttr('checcked'); 
```

就像我说的，我对大多数 Web 开发语言都不是很有经验，所以我真的不知道能够做到这一点的语法。我的限制是能够阅读和理解足以调整和更改它的代码，而不是从头开始任何新的东西。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:49:11.073

您可以在选择器[http://api.jquery.com/jQuery/#selector-context中将其作为上下文传递](http://api.jquery.com/jQuery/#selector-context)

```
$('.lost,.won',this).removeAttr('checked'); 
```

仅供参考，[.prop()](http://api.jquery.com/prop/)是从 jQuery 1.6+ 开始在属性中设置禁用的正确方法

# asp.net-mvc - 我可以在与基本控制器具有相同签名的 ActionResult 上使用方法隐藏吗？

> ID：13461909
> 
> 赞同：2
> 
> 时间：2012-11-19T20:45:07.563
> 
> 标签：asp.net-mvc, nopcommerce

我有 2 个控制器，一个继承另一个。我需要从基本控制器覆盖 ActionResult，因为我需要更改代码以在 nopCommerce 插件中实现分页。但是，由于新的 ActionResult，我得到了一个 AmbiguousMatchException。

基本控制器：

```
public class BaseController : Controller {
    public ActionResult Category(int categoryId, CatalogPagingFilteringModel command)
    {
        //original action result code
    }
} 
```

带继承的客户控制器

```
public class CustomController : BaseController {
    public new ActionResult Category(int categoryId, CatalogPagingFilteringModel command)
    {
        // my pagination code with different model/view
    }
} 
```

路由信息：这里我删除了基本控制器的路由并添加了一个新路由以使用 CustomCatalog 控制器。

```
routes.Remove(routes["OriginalCategory"]);
            routes.MapLocalizedRoute(
                            "OriginalCategory",
                            "Category/{categoryId}/{SeName}",
                            new { controller = "CustomCatalog", action = "Category", SeName = UrlParameter.Optional },
                            new { categoryId = @"\d+" },
                            new[] { "Nop.Plugin.Common.Web.Controllers" }); 
```

然后我得到一个 AmbiguousMatchException

> [AmbiguousMatchException：当前对控制器类型“CustomCatalogController”的操作“Category”的请求在以下操作方法之间不明确：System.Web.Mvc.ActionResult Category(Int32, Nop.Web.Models.Catalog.CatalogPagingFilteringModel) 在 Nop 类型上。 Plugin.Common.Web.Controllers.CustomCatalogController System.Web.Mvc.ActionResult Category(Int32, Nop.Web.Models.Catalog.CatalogPagingFilteringModel) on type Nop.Web.Controllers.CatalogController]

**编辑** 基本控制器位于应用程序的核心，因为 CustomController 在插件中，这意味着我无法修改基本控制器的类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:48:58.777

`virtual`在基本控制器和`override`派生控制器中使用而不是如何`new`？

根据：

```
public virtual ActionResult Category(...) { } 
```

衍生的：

```
public override ActionResult Category(...) { } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:51:09.170

您不能覆盖尚未声明的方法`virtual`。

您可以定义具有不同签名的新方法，也可以通过在包装类中维护对原始类的私有引用来封装原始类的功能。如果您有一个可以从基库实现的接口，它会有所帮助（因为这允许您替换将使用实现相同接口的基类的包装类），但您也可以在没有接口的情况下执行此操作。

```
// Base class source code is not modifiable
class BaseClass {
   public ActionResult Category(...) {}
   public ActionResult Other() {}
}

// Wrapper class can modify the behavior
class Wrapper {
  private BaseClass baseClass = new BaseClass();  // Instantiate appropriately

  public ActionResult Category(...) {
    // do some stuff
  }

  public ActionResult Other() {
    return baseClass.Other();
  }
} 
```

# php - 从属性并不总是存在的数组中分配变量

> ID：13461910
> 
> 赞同：0
> 
> 时间：2012-11-19T20:45:22.210
> 
> 标签：php

我正在使用以 json 格式返回搜索结果的 API。我将其解码为一个 PHP 数组，并可以通过遍历数组并将元素分配为变量从那里挑选出我需要的元素，以便我可以将值存储在数据库中。

我的问题是可能返回一个或几十个属性，它仅取决于搜索参数。如果我这样做，

```
$array = json_decode(file_get_contents("http://search-query-url&output=json"));

foreach($array as $cur) {
  $key1 = $cur->item_title;
  $key2 = $cur->item_url;
  $key3 = $cur->item_location;
  echo $key1 . " " . $key2 . " " . $key3 "<br>";
  } 
```

...一切都很好，除非 item_location (key3) 在 json 输出中不存在。在这种情况下，我收到错误“未定义的属性：stdClass::$item_location”。

属性名称（item_title、item_url 等）很重要，因为这就是我知道值/字符串应该存储在哪个表列中的方式。

我很难弄清楚这个问题，我不太确定该去哪里。尝试使用 in_array 或 in_object 但我一定做错了什么。我需要根据相应的属性名称创建变量（如果存在）。

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:55:36.150

对于这种情况，我通常的技巧是

1.  用于`json_decode($var, true)`将数据解码为关联数组而不是对象。
2.  使用[array_merge](http://us1.php.net/manual/en/function.array-merge.php)为我依赖的任何键设置默认值。
3.  如果某些字段是可选的，并且您需要知道用户是否提供了输入，则使用`false`或`null`作为默认值。

这消除了语法上令人不快的重复键检查。

```
$array = json_decode(file_get_contents("http://search-query-url&output=json"), true);
$defaults = array(
    'item_title' => 'Default Title',
    'item_url' => 'default url',
    'item_location' => false
);
$array = array_merge($defaults, $array);

// check to see if we have a location or not using !==
if ($array['item_location'] !== false) {

} 
```

我实际上更喜欢对象语法，但 PHP 有大量有用的数组操作函数。此外，许多 PHP 程序员更喜欢数组而不是对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:48:43.863

首先也是最重要的，`json_decode("JSON_STRING", true);`用来让它返回一个数组而不是一个对象。

一旦你这样做，`array_key_exists()`就会很好地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:49:24.583

您可以检查是否设置了变量，如果没有为该键分配空白值。

```
foreach($array as $cur) {
  $key1 = (isset($cur->item_title))?($cur->item_title):('');
  $key2 = (isset($cur->item_url))?($cur->item_url):('');
  $key3 = (isset($cur->item_location))?($cur->item_location):('');
  echo $key1 . " " . $key2 . " " . $key3 "<br>";
} 
```

# c# - 使用论坛生成站点地图

> ID：13461913
> 
> 赞同：-1
> 
> 时间：2012-11-19T20:45:32.193
> 
> 标签：c#, asp.net, seo, sitemap, forum

我试图弄清楚就站点地图和具有许多线程的论坛而言，最佳实践是什么。我已经阅读了[我应该将论坛主题放入我的站点地图中的答案吗？](https://stackoverflow.com/questions/380258/should-i-put-forum-threads-into-my-sitemap); 但是，没有列出任何类型的最佳实践。如果我只是将 URL 放到我的论坛索引页面而不进入任何线程，搜索引擎机器人会解析我的论坛还是只会在站点地图中索引页面？

我的 MVC 论坛现在很小，但它有很大的潜力。我不知道拥有一个列出所有单独线程的巨大站点地图是否是个好主意。我试图尽可能地对搜索引擎友好。创建一个只有活跃了 X 天的线程的站点地图是否很好？在站点地图中应该有多少个 URL，我应该在哪里画线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T07:52:56.310

米达斯，

让我在这里澄清一个重点；搜索引擎爬虫不需要站点地图来爬取您的网站！

爬虫过去常常通过跟踪放置在页面上的链接和相应的索引页面来找到您的页面。提交站点地图的动机是；网站上很少有页面放置在深层 URL 上或网络爬虫不易访问。因此，当他们访问您的站点地图时，他们可以访问这些页面并对其进行索引。

现在就您的论坛而言，您应该为主要类别页面创建站点地图，或者可以使用新添加的页面定期编辑站点地图。

# java - 在循环中命名 Arraylist - Java

> ID：13461914
> 
> 赞同：1
> 
> 时间：2012-11-19T20:45:35.720
> 
> 标签：java, loops, arraylist

我需要在 while 循环中创建一个 Arraylist，其名称也基于循环中的变量。这是我所拥有的：

```
while(myScanner.hasNextInt()){    

    int truster = myScanner.nextInt();
    int trustee = myScanner.nextInt();
    int i = 1;
    String j = Integer.toString(i);
    String listname = truster + j;

    if(listname.isEmpty()) {
        ArrayList listname = new ArrayList();
    } else {}
    listname.add(truster);

    i++;
} 
```

变量 truster 在被扫描时会出现不止一次，所以 if 语句试图检查 arraylist 是否已经存在。不过，我想我可能做的不对。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T20:51:16.997

将 ArrayLists 存储在 Map 中：

```
Map<String, List<String> listMap = new HashMap<String,List<String>>();
while (myScanner.hasNextInt()){    
    // Stuff
    List<String> list = new ArrayList<String>();
    list.add(truster);
    listMap.put(listname, list);
} 
```

请注意使用泛型（ 中的位）来定义和可以包含`<>`的 Object 的类型。`List``Map`

您可以访问存储在`Map`using中的值`listMap.get(listname);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:51:19.650

如果我理解正确，请创建一个列表列表，或者更好的是，创建一个映射，其中键是您想要的动态名称，值是新创建的列表。将其包装在另一个方法中并像`createNewList("name")`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T20:54:33.510

真的不知道你的意思是什么，但你的代码有一些严重的基本缺陷，所以我会解决这些问题。

```
//We can define variables outside a while loop 
//and use those inside the loop so lets do that
Map trusterMap = new HashMap<String,ArrayList<String>>();

//i is not a "good" variable name, 
//since it doesn't explain it's purpose
Int count = 0;

while(myScanner.hasNextInt()) {    
    //Get the truster and trustee
    Int truster = myScanner.nextInt();
    Int trustee = myScanner.nextInt();

    //Originally you had:
    // String listname = truster + i;
    //I assume you meant something else here 
    //since the listname variable is already used

    //Add the truster concated with the count to the array
    //Note: when using + if the left element is a string 
    //then the right element will get autoboxed to a string

    //Having read your comments using a HashMap is the best way to do this.
    ArrayList<String> listname = new ArrayList<String>();
    listname.add(truster);
    trusterMap.put(truster + count, listname);
    i++;
} 
```

此外，您在 myScanner 中存储了一个 Ints 流，这些流将被输入到数组中，但每个都有非常不同的含义（`truster`和`trustee`）。您是否尝试从文件或用户输入中读取这些内容？有更好的方法来处理这个问题，如果你在下面评论你的意思，我会更新一个建议的解决方案。

# java - android/java 桌面：根据目标决定使用什么类

> ID：13461916
> 
> 赞同：1
> 
> 时间：2012-11-19T20:45:40.617
> 
> 标签：java, android, image

我有 3 个项目`desktop_starter`：`android_starter`和`platform`。两个启动项目都引用了该`platform`项目，并且该`platform`项目应该（99％）独立于平台，并且包含几乎所有代码。

原因当然是我希望能够在桌面上运行 android 应用程序而不必使用模拟器。

但是，至少在一个地方我需要在`platform`. 具体来说，我需要`javax.ImageIO`在桌面上使用或`android.graphics.Bitmap`逐像素读取图像。

由于 java AFAIK 中没有预处理器或类似结构，我的选择是什么？

*   我想我可以将图像阅读器作为对象发送到`platform`并使用反射，但这很脏。
*   我找到了一个适用于桌面 java 和 android 的内置图像阅读器，有什么想法吗？
*   JNI 并使用 libpng 或类似的东西，我猜，似乎应该有一个更简单的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:18:23.140

您可以在定义所需方法的接口上简单地编写平台代码，并从平台特定项目传递此接口的平台特定实现。

例如，如果您需要的是一个包含图像所有像素的 int 数组（只是一个示例），那么接口将是：

```
public interface ImageReader {
    int[] getImagePixels(InputStream in) throws IOException;
} 
```

您将有两种接口实现：一种在内部使用 ImageIO，在桌面项目中，另一种在内部使用 Bitmap，在 android 项目中。这些类之一的实例将被传递给与平台无关的代码。

# python - 在二维矩阵中插入新行

> ID：13461917
> 
> 赞同：0
> 
> 时间：2012-11-19T20:45:49.610
> 
> 标签：python, newline, multidimensional-array

我有两个函数可以用来创建一个数组：

```
 def makelist(size):
        list = []
        for i in range(size):
            list = list + [None]
        return list
    def mmatrix(rows,cols):
        matrix = makelist(rows)
        for i in range(rows):
            matrix[i] = makelist(cols)
        return matrix 
```

当我创建一个数组：`mmatrix(3,3))`时，它会在同一行打印所有三个数组。如何在数组之间插入新行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:54:56.867

您可以将代码简化为：

```
def mmatrix(rows, cols):
    return [[None for i in range(cols)] for j in range(rows)] 
```

要回答您的问题，最清晰的方法是逐行打印：

```
test = mmatrix(3,3)
for row in test:
    print row 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:55:13.567

如果我理解正确，这只是打印时的格式问题。一种解决方案是使用换行符加入行：

`print '\n'.join(mmatrix(3, 3))`

# jsf - 使用 reRender 时，如果没有页面刷新，渲染的对象将不会更新

> ID：13461918
> 
> 赞同：0
> 
> 时间：2012-11-19T20:45:55.823
> 
> 标签：jsf, datatable, richfaces, ajax4jsf

我有一个由列表填充的 ah:selectonemenu。选择特定值时，应呈现 ah:datatable。当我选择该“特定”值时，h:datatable 在我刷新页面之前不会呈现。我究竟做错了什么？

```
<tr class="portlet-table-body" >
    <td width="20%" class="porlet-padding-left"><h:outputText value="${operatorProgramBundle.NextGenerationWorkflow}" /></td>
    <td width="450px">
        <h:selectOneMenu id="ngw" styleClass="portlet-dropdown"  value="${CRUDOperatorProgram.selectedNextGenWorkflow}">
            <f:selectItems value="${CRUDOperatorProgram.nextGenWorkflowList}" />
            <a4j:support event="onchange" ajaxsingle = "true" reRender="customTable" ></a4j:support>  
        </h:selectOneMenu>
    </td>
</tr>

<h:panelGroup id="customTable">
<h:dataTable id="DispatchConfigurationCustom" columnClasses="portlet-table-same portlet-table-cell"
    headerClass="portlet-table-same portlet-table-cell" value="#{CRUDOperatorProgram.workflowConfigList}" var="workflowConfig" width="100%" rendered="#{CRUDOperatorProgram.selectedNextGenWorkflow == 0}">
    <h:column>
        <f:facet name="header">
            <h:outputText value="Include" />
        </f:facet>
        <h:selectBooleanCheckbox id="includeInd" value="#{workflowConfig.isIncludedInd}"/>
    </h:column>
    <h:column>
        <f:facet name="header">
            <h:outputText value="Automate" />
        </f:facet>
        <h:selectOneRadio id="onOff" value="#{workflowConfig.isAutomatedInd}">
            <f:selectItem id="onButton" itemLabel="On" itemValue="0" />
            <f:selectItem id="offButton" itemLabel="Off" itemValue="0" />
        </h:selectOneRadio>
    </h:column>
</h:dataTable>
</h:panelGroup> 
```

更新代码：

```
<tr class="portlet-table-body" >
    <td width="20%" class="porlet-padding-left"><h:outputText value="${operatorProgramBundle.NextGenerationWorkflow}" /></td>
    <td width="450px">
        <h:selectOneMenu id="ngw" styleClass="portlet-dropdown"  value="#{CRUDOperatorProgram.selectedNextGenWorkflow}" valueChangeListener="#{CRUDOperatorProgram.nextGenWorkflowChanged}">
            <f:selectItems value="#{CRUDOperatorProgram.nextGenWorkflowList}" />
            <a4j:support event="onchange" reRender="customTable"></a4j:support>  
    </h:selectOneMenu>
    </td>
</tr>

<h:panelGroup id="customTable">
<h:dataTable id="DispatchConfigurationCustom" columnClasses="portlet-table-same portlet-table-cell"
    headerClass="portlet-table-same portlet-table-cell" value="#{CRUDOperatorProgram.workflowConfigList}" var="workflowConfig" width="100%">
    <h:column>
        <f:facet name="header">
            <h:outputText value="Include" />
        </f:facet>
        <h:selectBooleanCheckbox id="includeInd" value="#{workflowConfig.isIncludedInd}"/>
    </h:column>
    <h:column>
        <f:facet name="header">
            <h:outputText value="Automate" />
        </f:facet>
        <h:selectOneRadio id="onOff" value="#{workflowConfig.isAutomatedInd}">
            <f:selectItem id="onButton" itemLabel="On" itemValue="0" />
            <f:selectItem id="offButton" itemLabel="Off" itemValue="0" />
        </h:selectOneRadio>
    </h:column>
    </h:dataTable>
</h:panelGroup> 
```

Back Bean（相关部分）...

```
private List<WorkflowConfig> workflowConfigList = new ArrayList<WorkflowConfig>();
private List<SelectItem> nextGenWorkflowList;

public void nextGenWorkflowChanged(ValueChangeEvent event) {

    workflowConfigList.clear();
    //the value is a long, so make it a string and check
    if(event.getNewValue() != null && event.getNewValue().toString().equals("0")){
        loadWorkFlowConfigs();
    }else{
        //Do not show the datatable
        workflowConfigList.clear();
    }   
}
public List<WorkflowConfig> getWorkflowConfigList(){

    return this.workflowConfigList;
}
private void loadWorkFlowConfigs() {

    Query query = em.createNamedQuery("findAllWorkflowSteps");
    List<WorkflowStep> step = (List<WorkflowStep>) query.getResultList();

    for(WorkflowStep workflowStep : step){
        WorkflowConfig workflowConfig = new WorkflowConfig();
        workflowConfig.setWorkflowStep( workflowStep );
        workflowConfigList.add(workflowConfig);
    }
} 
```

我实施了一个`valueChangeListener`像你说的。我尝试了这个示例（使用`h:panelGroup`）和`h:panelGroup`文档中没有解释的示例。每个都需要刷新页面......你能看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:44:47.150

`<a4j:support>`通过添加添加`action=#{someBean.someMethod}`标签属性或在`valueChangeListener`您的 `<h:selectOneMenu>`. IMO，我更喜欢添加一个 valueChangeListener。[请参阅官方文档](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/a4j_support.html)中的示例。

作为旁注，为什么你使用`${...}`而不是`#{...}`？

# sql - 如何检查多个项目是否在 SQL 的另一个表中

> ID：13461920
> 
> 赞同：-3
> 
> 时间：2012-11-19T20:46:01.170
> 
> 标签：sql, sql-server-2005

我有两张桌子`A`和`B`. 两者都包含字段`phone`和`project_name`. 我想看看

*   表 A 中有多少条记录在表 B 中具有相同的电话号码和项目名称；
*   表A中有多少条记录在表B中具有相同的电话号码和不同的project_name；
*   表 A 中有多少条记录在表 B 中有不同的电话和相同的项目名称；
*   表 A 中有多少条记录在表 B 中有不同的电话和不同的项目名称。

我试图写这些查询。但结果很糟糕。你可以帮帮我吗？

例子

```
Table A:

phone       project_name
4161234567  502
4161234568  502
4161234569  501
4161234560  502

Table B:

phone       project_name
4161234567  502
4161234568  503
4160258963  501
4160123456  504 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:16:04.947

问愚蠢的问题......得到愚蠢的答案。根据对问题的解释，这可能正确也可能不正确。

```
/*records from table A are in table B with same phone number and project_name; */
SELECT count(*), A.Phone, A.Project_name
FROM A 
INNER JOIN B 
  on A.Phone = B.Phone 
 and A.project_name = B.Project_name
GROUP BY A.Phone, A.Project_name

/*same phone number and different project_name*/
SELECT count(*), A.Phone, A.Project_name
FROM A 
INNER JOIN B 
  on A.Phone = B.Phone 
 and A.project_name <> B.Project_name
GROUP BY A.Phone, A.Project_name

/*different phone and same project_name*/
SELECT count(*), A.Phone, A.Project_name
FROM A 
INNER JOIN B 
  on A.Phone <> B.Phone 
 and A.project_name = B.Project_name
GROUP BY A.Phone, A.Project_name

/*different phone and different project_name*/
SELECT count(*), A.Phone, A.Project_name
FROM A 
INNER JOIN B 
  on A.Phone <> B.Phone 
 and A.project_name <> B.Project_name
GROUP BY A.Phone, A.Project_name 
```

# javascript - 如何创建新行或将 HTML 添加到此 Javascript 函数？

> ID：13461922
> 
> 赞同：2
> 
> 时间：2012-11-19T20:46:02.130
> 
> 标签：javascript, jquery, html

我尝试创建打字机效果，一切正常，但我不知道如何创建新行。

我已经尝试了所有三个：

```
\n
\r
<br /> 
```

但它只是输入这些字符。

这是我的javascript函数：

```
$.fn.Typewriter = function(opts){
    var $this = this,
        defaults = { animDelay: 50 },
        settings = $.extend(defaults, opts);
    $.each(settings.text, function(i, letter){
        setTimeout(function(){
            $this.html($this.html() + letter);
        }, settings.animDelay * i);
    });
} 
```

这是我如何称呼它的示例：

```
$('#howto').Typewriter({
animDelay: 100,
text: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, <br /> sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. \r Ut enim ad minim veniam, quis nostrud exercitation \n ullamco laboris nisi ut aliquip ex ea commodo consequat.'}); 
```

这就是它最终的样子：

```
"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat." 
```

我希望它看起来像：

```
Lorem ipsum dolor sit amet, consectetur adipisicing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
Ut enim ad minim veniam, quis nostrud exercitation
ullamco laboris nisi ut aliquip ex ea commodo consequat. 
```

感谢所有帮助！

[http://jsfiddle.net/9Qsku/](http://jsfiddle.net/9Qsku/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:58:05.243

在字符串上使用 \n 并且以这种方式修改的snipplet

```
$.fn.Typewriter = function(opts){
var $this = this,
    defaults = { animDelay: 50 },
    settings = $.extend(defaults, opts);
$.each(settings.text, function(i, letter){
    setTimeout(function(){
        $this.html($this.html() + (letter!='\n'?letter:'<br />'));
    }, settings.animDelay * i);
});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:00:31.963

`<br/>`应该可以正常工作：http: [//jsfiddle.net/7WVZX/](http://jsfiddle.net/7WVZX/)

[更新] 问题可能是您正在逐个添加字符，而不是作为一个整体添加换行符。这可能对您更有效：

```
$this.html(settings.text.substr(0,i)); 
```

结果：http: [//jsfiddle.net/9Qsku/1/](http://jsfiddle.net/9Qsku/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-19T21:01:18.057

尝试使用 .html ...

```
.html('Lorem ipsum dolor sit amet, <br> consectetur adipisicing elit,'); 
```

# matlab - MATLAB 同时在单独的子图中绘制移动数据点

> ID：13461929
> 
> 赞同：5
> 
> 时间：2012-11-19T20:46:29.150
> 
> 标签：matlab, plot, simultaneous

我希望在 MATLAB 中可视化一段时间内数据点在空间中的移动。但是，我希望我的图形显示的方式是在任何给定时间只绘制一个瞬间。这很简单，我只是创建了一个 for 循环来更新数据中每组坐标 (x,y,z) 的 3D 绘图显示。但是，我希望始终显示该图的 4 个不同视角。我很清楚如何在 MATLAB 中设置子图，这不是问题。我的问题是让所有 4 个子图同时执行，以便所有 4 个子图始终显示相同的时间点。

如何处理这个问题？

根据要求，我的单图代码如下所示：

```
datan = DATA; %data in form of x,y,z,a,b,c by column for row# of time points

tib=zeros(size(datan,1),12);
tib(:,1:3) = datan(:,1:3);
tib_ref=tib(1,1:3);

for i=1:size(datan,1)
tib(i,1:3)=tib(i,1:3)-tib_ref;
end

angle_to_dircos

close all

figure('Name','Directions (Individual Cycles)','NumberTitle','off')

for cc=1:2
    hold off
    for bb=1:10:size(tib,1);
    scatter3(tib(bb,1),tib(bb,2),tib(bb,3),'green','filled'); %z and y axes are flipped in polhemus system
    hold on
       p0 = [tib(bb,1),tib(bb,2),tib(bb,3)]; 
       p1 = [tib(bb,1)+10*tib(bb,4),tib(bb,2)+10*tib(bb,5),tib(bb,3)+10*tib(bb,6)]; 
       p2 = [tib(bb,1)+10*tib(bb,7),tib(bb,2)+10*tib(bb,8),tib(bb,3)+10*tib(bb,9)];
       p3 = [-(tib(bb,1)+100*tib(bb,10)),-(tib(bb,2)+100*tib(bb,11)),-(tib(bb,3)+100*tib(bb,12))];      
       vectarrow(p0,p1,1,0,0)
       hold on
       vectarrow(p0,p2,0,1,0)
       hold on
       vectarrow(p0,p3,0,0,1)
       hold on
    az = 90;
    el = 0;
    view(az, el);
    xlim([-50,50]);
    ylim([-50,50]);
    zlim([-50,50]);
    xlabel('distance from center in X');
    ylabel('distance from center in Y');
    zlabel('distance from center in Z');
    title('XYZ Scatter Plots of Tracker Position');
    hold on
    plot3(0,0,0,'sk','markerfacecolor',[0,0,0]);
       p0 = [0,0,0]; 
       p1 = [10,0,0]; 
       p2 = [0,10,0];
       p3 = [0,0,100];      
       vectarrow(p0,p1,1,0,0)
       hold on
       vectarrow(p0,p2,0,1,0)
       hold on
       vectarrow(p0,p3,1,0,1)
    drawnow;
end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T22:54:25.233

如果您使用`set`更新点的 x 和 y 数据，而不是每次都完全重新创建绘图，则由于 Matlab 等待`drawnow`.

这是一个例子

```
figure,
subplot(1,2,1),plot(rand(10,1),rand(10,1),'.'),hold on,p1=plot(rand(1),rand(1),'.r')
subplot(1,2,2),plot(rand(10,1),rand(10,1),'.'),hold on,p2=plot(rand(1),rand(1),'.r')

%# read the red coordinates - I should have stored them before plotting :)
x(1) = get(p1,'xdata');y(1)=get(p1,'ydata');x(2)=get(p2,'xdata');y(2)=get(p2,'ydata');

%# animate
for i=1:100,
   delta = randn(1,2)*0.01;
   x=x+delta(1);
   y=y+delta(2);
   set(p1,'xdata',x(1),'ydata',y(1));
   set(p2,'xdata',x(2),'ydata',y(2));
   pause(0.1),
   drawnow, %# I put this in case you take out the pause
end 
```

# ios - NSMutableArray 只有最后一个对象的副本

> ID：13461930
> 
> 赞同：1
> 
> 时间：2012-11-19T20:46:29.290
> 
> 标签：ios, xcode, nsmutablearray, nsxml

我正在使用 NSXML 解析出 XML 文档并将结果添加到对象数组中。该数组具有正确数量的对象，但它们充满了来自最后一个对象的数据。（即，索引 0 处的对象与索引 3 处的数据相同）。我从我的服务器获得了良好的数据。

```
//set up my objects and arrays higher in my structure
SignatureResult *currentSignatureResult = [[SignatureResult alloc]init];
Document *currentDoc = [[Document alloc]init];
Role *currentRole = [[Role alloc]init];             
NSMutableArray *roleArray = [[NSMutableArray alloc] init];
NSMutableArray *doclistArray2 = [[NSMutableArray alloc] init];

.....there is more parsing up here
//role is defined as an NSXML Element
for (role in [roleList childrenNamed:@"role"]){

    NSString *firstName =[role valueWithPath:@"firstName"];
    NSString *lastName = [role valueWithPath:@"lastName"];
    currentRole.name = [NSString stringWithFormat:@"%@ %@",firstName, lastName];

    for (documentList2 in [role childrenNamed:@"documentList"])
       {
        SMXMLElement *document = [documentList2 childNamed:@"document"];
        currentDoc.name = [document attributeNamed:@"name"];
        [doclistArray2 addObject:currentDoc];
        }
    currentRole.documentList = doclistArray2;
    [roleArray addObject:currentRole];
    ///I've logged currentRole.name here and it shows the right information

}//end of second for statemnt

currentSignatureResult.roleList = roleArray;
}
///when I log my array here, it has the correct number of objects, but each is full of
///data from the last object I parsed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:52:22.343

原因是 addObjects: 为您的 currentRole 对象保留，而不是从中创建副本。您可以在 for 内部创建新的 currentRole 对象，也可以从中创建一个副本并将其添加到数组中。我推荐以下内容：

```
for (role in [roleList childrenNamed:@"role"]){
    Role *currentRole = [[Role alloc] init];
    NSString *firstName =[role valueWithPath:@"firstName"];
    NSString *lastName = [role valueWithPath:@"lastName"];
    currentRole.name = [NSString stringWithFormat:@"%@ %@",firstName, lastName];

    for (documentList2 in [role childrenNamed:@"documentList"])
       {
        SMXMLElement *document = [documentList2 childNamed:@"document"];
        currentDoc.name = [document attributeNamed:@"name"];
        [doclistArray2 addObject:currentDoc];
        }
    currentRole.documentList = doclistArray2;
    [roleArray addObject:currentRole];
    ///I've logged currentRole.name here and it shows the right information
    [currentRole release];

}//end of second for statemnt 
```

# mysql - Netstat 外国地址显示 MAIL: mySQL

> ID：13461934
> 
> 赞同：1
> 
> 时间：2012-11-19T20:46:41.037
> 
> 标签：mysql, netstat

我在 Windows 2008 上运行专用的 mySQL 5 服务器。我相信在发送电子邮件的服务器上可能安装了一个机器人。如果我在服务器上运行 Netstat -a，我会看到这些类型的条目。这是什么？

```
TCP    x.x.x.x:3306     mail:50573             ESTABLISHED
TCP    x.x.x.x:3306     mail:50575             ESTABLISHED
TCP    x.x.x.x:3306     mail:50580             ESTABLISHED
TCP    x.x.x.x:3306     mail:50669             ESTABLISHED
TCP    x.x.x.x:3306     mail:50813             ESTABLISHED
TCP    x.x.x.x:3306     mail:50814             ESTABLISHED
TCP    x.x.x.x:3306     mail:51034             TIME_WAIT
TCP    x.x.x.x:3306     mail:51035             TIME_WAIT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:50:12.460

没有。端口 3306 是 MySQL。并且您正在与它建立一系列 TCP 连接，这些连接必须来自**tcp**端口。`mail`只是您的系统如何解析自己的ip。

如果它是一个发送邮件的机器人，你会看到很多外国 ip 作为目标 IP，通常是端口 25 (SMTP)。

# android - 停止音频播放

> ID：13461937
> 
> 赞同：0
> 
> 时间：2012-11-19T20:46:48.430
> 
> 标签：android, audio, back

我是 Android 编程新手，如果没有您的帮助，我有一个无法解决的问题...请帮帮我... ;-)

**当我开始播放我的音频文件时，我无法停止它。相反，我将退出该应用程序。**

*我用这段代码播放音频文件：*

公共类 Word1Audio 扩展 Activity {

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.word1video);

        MediaPlayer mediaPlayer = MediaPlayer.create(this, R.raw.lige);
      mediaPlayer.start();

    }

} 
```

*但是，当我在这段代码按下**后退按钮**时尝试停止它时*

```
@Override
public void onBackPressed() {
// do something on back.
return;
} 
```

我的应用程序关闭并且音频继续播放...

**您知道应用程序关闭的原因吗？我怎样才能停止音乐并返回上一页...？？**

感谢您的时间和帮助... :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:52:33.747

你可以试试

```
 MediaPlayer mediaPlayer;

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.word1video);
    mediaPlayer = MediaPlayer.create(this, R.raw.lige);
    mediaPlayer.start();
 }

 @Override
 public void onBackPressed() {
    if( mediaPlayer.isPlaying() ) {
      mediaPlayer.stop();
    }
    super.onBackPressed();
 } 
```

# objective-c - ExternalAccessory 流委托并不总是在后台调用

> ID：13461938
> 
> 赞同：2
> 
> 时间：2012-11-19T20:47:12.830
> 
> 标签：objective-c, ios, bluetooth, external-accessory

我遇到了**EA 框架**的一个严重问题。**当应用程序处于前台**时，一切正常，当附件时，我打开一个会话，检索流，设置它们的委托并在主运行循环上安排流

附件每秒都在对我的 iPhone 进行 ping 操作，并且这些 ping 是通过流代理读取的。这个 ping 是一种心跳：如果 iPhone 在几秒钟内没有收到任何 ping，用户就会收到警报。

这个应用程序应该在后台运行，所以我在我的 plist 文件中添加了相应的键

当应用程序在后台运行时，一切正常 10-30 分钟，突然间，7-8 秒，流代理没有被调用（但 ping 是从附件发送的），然后在一秒钟内，代理被调用八次（对于最后几秒内发送的所有 ping） 看起来我的应用程序暂停了八秒，然后在此间隔内发生的所有事件都排队，然后再交付。问题是，由于应用程序在这 8 秒内没有收到任何 ping，因此错误地提醒了用户

我不明白这种行为。有人遇到同样的问题吗？我正在考虑通过后台线程轮询流，而不是在主运行循环中调度它们。

谢谢，

# c# - C#/XAML 编译错误 - 各种错误（名称“LayoutAwarePage”不存在”）

> ID：13461941
> 
> 赞同：8
> 
> 时间：2012-11-19T20:47:17.233
> 
> 标签：c#, compiler-errors, visual-studio-2012, winrt-xaml

**编辑**：

**以下是代码的粘贴箱：**

[BasicPage1.xaml.cs](http://pastebin.com/s5akShjK)

[BasicPage1.xaml](http://pastebin.com/ZTmzxq78)

[LayoutAwarePage.cs](http://pastebin.com/DVwFEPKR)

**编辑 2**

我在这里添加了一张 MS Connect 票：

[https://connect.microsoft.com/VisualStudio/feedback/details/771648/c-xaml-compile-error-various-errors-the-name-layoutawarepage-does-not-exist#tabs](https://connect.microsoft.com/VisualStudio/feedback/details/771648/c-xaml-compile-error-various-errors-the-name-layoutawarepage-does-not-exist#tabs)

我希望其他人已经经历过并且知道如何解决这个问题，因为我对整个事件感到有点沮丧。

**问题**

我一直在使用 C#/XAML 开发 Windows Store App 来学习技巧。经过几个小时的学习，我决定开始自己的应用程序，这很好。问题是，在添加了一些视图等之后，我开始在我的 XAML 文件（所有这些文件）中收到以下错误：

> 错误 5 名称“LayoutAwarePage”在命名空间“using:Accountable.Common”中不存在。G:\编码项目\Visual Studio 2012\SAVED\Accountable\Accountable\BasicPage1.xaml 1 1 Accountable

这很奇怪，因为**Accountable.Common**是在 XAML 文件中声明的：

```
<common:LayoutAwarePage
x:Name="pageRoot"
x:Class="Accountable.BasicPage1"
DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:Accountable"
xmlns:common="using:Accountable.Common"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"> 
```

[所以我在这里](http://connect.microsoft.com/VisualStudio/feedback/details/762100/xaml-designer-doesnt-work#tabs)读到关闭 XAML 文件并关闭**Visual Studio 2012**并重新打开，再加上构建，解决了这个问题。它没有。现在，它会在您首次创建新模板时创建的公共文件中导致以下错误：

> 错误 1 ​​'Accountable.Common.BooleanNegationConverter' 没有实现接口成员 'Windows.UI.Xaml.Data.IValueConverter.ConvertBack(object, System.Type, object, string)' G:\Coding Projects\Visual Studio 2012\SAVED\ Accountable\Accountable\Common\BooleanNegationConverter.cs 9 25 负责
> 
> 错误 2 'Accountable.Common.BooleanNegationConverter' 没有实现接口成员 'Windows.UI.Xaml.Data.IValueConverter.Convert(object, System.Type, object, string)' G:\Coding Projects\Visual Studio 2012\SAVED\ Accountable\Accountable\Common\BooleanNegationConverter.cs 9 25 负责
> 
> 错误 3 'Accountable.Common.BooleanToVisibilityConverter' 没有实现接口成员 'Windows.UI.Xaml.Data.IValueConverter.ConvertBack(object, System.Type, object, string)' G:\Coding Projects\Visual Studio 2012\SAVED\ Accountable\Accountable\Common\BooleanToVisibilityConverter.cs 20 25 负责
> 
> 错误 4 'Accountable.Common.BooleanToVisibilityConverter' 没有实现接口成员 'Windows.UI.Xaml.Data.IValueConverter.Convert(object, System.Type, object, string)' G:\Coding Projects\Visual Studio 2012\SAVED\ Accountable\Accountable\Common\BooleanToVisibilityConverter.cs 20 25 负责

我没有更改**BooleanNegationConverter.cs**或**BooleanToVisibility.cs**。我做了什么来尝试解决这个问题：

1.  [调查了其他SO帖子](https://stackoverflow.com/questions/12401440/layoutawarepage-does-not-exist-in-namespace-vs2012-bug)，无济于事
2.  不走运地删除了解决方案 SUO 文件
3.  删除了我的 XAML 文件、类（模型和视图模型）并删除了公共类并创建了一个新的基本页面。这会导致项目再次加载类。同样的问题。
4.  删除了对用于自定义 DatePicker 控件**的 WinRT XAML 的 Syncfusion 控件的引用。**还是同样的问题。
5.  修复了 Visual Studio 2012 - 没有发生同样的问题。

我完全不知所措。我创建了一个新项目，问题不存在。我真的不想再开始我的项目了！

仅供参考 - LayoutPageAware.cs 包含在项目中：

![在此处输入图像描述](../Images/ffcf81f44671a3578592ba9c580d6b49.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:52:17.763

我相信`LayoutAwarePage`是在Common文件夹中定义的，并且是在您第一次创建**Basic Page时自动生成的**

*   右键单击您的项目
*   点击添加
*   点击“新建项目”
*   点击“基本页面”
*   点击添加。

你可能会得到一个对话框说

**“此添加取决于您的项目中缺少的文件。没有这些文件，您必须手动解决对 Common 命名空间的依赖关系。自动添加缺少的文件？”**

点击是

然后再次尝试构建

# javascript - 允许用户将 HTML 保存到数据库是否安全？

> ID：13461943
> 
> 赞同：0
> 
> 时间：2012-11-19T20:47:24.770
> 
> 标签：javascript, html, security

我有一个网站，我的客户可以使用该网站让他们的客户在线注册（这是用于日托注册）。所以我提供了这个在线注册表格，并允许我的客户自定义注册完成后显示的“谢谢”消息。

允许我的客户使用 HTML 来格式化他们的感谢信息是否安全？我知道这将允许他们也生成 javascript 但我应该关心吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:50:24.967

是的，你当然应该关心。

```
<img src="http://evil.com/evilScript.js"> 
```

在他们的感谢信息中，我将把可能发生的事情留给`evilScript.js`您的想象力。

* * *

我的建议是，使用 Markdown 作为一种格式，并在需要时将其解析为 HTML（在视图中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:49:51.213

是的，它是安全的——只要你对它进行一定程度的消毒。一个很好的例子是使用[`strip_tags`](http://php.net/manual/en/function.strip-tags.php)并且只允许使用`<h1>`, `<h2>`,等标签`<b>`，`<u>`但避免使用`<script>`,`<object>`和其他危险标签。

*我知道我引用的是 PHP 方法，但是很多语言都有这种功能来清理用户输入。从表面上看，而不是使它成为特定于 PHP 的答案。*

# python - 使用 Json 转储 2D Python 数组

> ID：13461945
> 
> 赞同：4
> 
> 时间：2012-11-19T20:47:41.300
> 
> 标签：python, json

我有一个`numpy`数组，我想用 Json 转储。数组如下所示：

```
array([['foo', 'bar', 'something', ...
        'more'],
        ['0.4', '0.7', '0.83', ...
        '0.3', '0.62', '0.51']] 
```

我想**用 Json**将它转储到一个字符串上，如下所示：

```
foo: 0.4
bar: 0.7
something: 0.51
... 
```

我尝试过：

```
import jason
my_string = json.dumps(my_array) 
```

但它抱怨：

```
"not JSON serializable" 
```

关于如何**使用 Json**将其转储到字符串上的任何想法？

更新：

请不要说我关心订购，应按以下顺序打印行：

```
array[0,0] : array[0,1]
array[1,0] : array[1,1]
array[2,0] : array[2,1]
# etc ... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-09T11:54:30.363

对我有用的东西——因为有更大的 1024x1002 的 float64 数组——是转换为 base64。

```
def Base64Encode(ndarray):
    return json.dumps([str(ndarray.dtype),base64.b64encode(ndarray),ndarray.shape])
def Base64Decode(jsonDump):
    loaded = json.loads(jsonDump)
    dtype = np.dtype(loaded[0])
    arr = np.frombuffer(base64.decodestring(loaded[1]),dtype)
    if len(loaded) > 2:
        return arr.reshape(loaded[2])
    return arr

''' just to compare '''
def SimpleEncode(ndarray):
    return json.dumps(ndarray.tolist())
def SimpleDecode(jsonDump):
    return np.array(json.loads(jsonDump)) 
```

ipython %timeit 结果非常清楚地指向base64：

```
arr = np.random.random_sample((1000, 1000))

print 'Simple Convert'
%timeit SimpleDecode(SimpleEncode(arr))
print 'Base64 Encoding'
%timeit Base64Decode(Base64Encode(arr)) 
```

结果：

```
Simple Convert
1 loops, best of 3: 1.42 s per loop
Base64 Encoding
10 loops, best of 3: 171 ms per loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:04:48.347

不确定 JSON 可序列化部分，但您可以先将其转换为 dict 吗？这似乎是一种更自然的 JSON 输出格式，并且可以处理数据类型的任何问题。

`my_dict = dict(zip(my_array[1], my_array[0]))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:05:31.763

如果所有值都是数字，如果其他一切都失败了，您总是可以手动执行：

```
my_array = [['0.4', '0.7', '0.83', '0.3', '0.62', '0.51'],
            ['foo', 'bar', 'something', 'more']]

pairs = zip(my_array[1], my_array[0])
json_values = ('"{}": {}'.format(label, value) for label, value in pairs)
my_string = '{' + ', '.join(json_values) + '}'

print my_string # '{"foo": 0.4, "bar": 0.7, "something": 0.83, "more": 0.3}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T22:37:56.897

如果您只是想获得数组的漂亮字符串表示，并且使用字符串数组类型并不能提供您想要的表示，那么消息序列化格式不是要使用的东西。序列化格式用于保存/传输数据。Json 很好，因为它通常也是人类可读的，但这不是目的，强制将其转换为不同的格式会使其不再是 json 序列化。即使 savetxt 和 loadtxt numpy 选项也不适用于您想要的格式（重复每一列的第一行）。如果必须采用该格式，您可以使用以下代码进行自己的序列化：

```
def prettySerialize(inArray):
    ids = inArray[0]
    strRep = ''

    for row in inArray[1:]:
        for i,item in enumerate(row):
            rowStr = id[i] + ':' + item + '\n'
            strRep += rowStr

    return strRep 
```

这样做的问题是它会慢得多，并且数组的表示形式要大得多（一遍又一遍地重复“id”行）。我强烈建议您使用纯 json（或 msgpack）解决方案，除非您专门将其格式化以供人类阅读......

这是我用于使用 msgpack 进行序列化的解决方案（也适用于 json）... 转换为包含 dtype 和数组形状的元组：

```
def arrayToTuple(arr):
    if arr is None:
        return None

    return (arr.dtype.str, arr.shape, arr.tostring())

def arrayFromTuple(tupl):
    if tupl is None:
        return None

    typeStr, shape, dataStr = tupl

    resultArray = numpy.fromstring(dataStr, dtype=typeStr).reshape(shape)

    return resultArray 
```

所以转储和加载命令将是：

```
strRep = json.dumps(arrayToTuple(arr))
arrayFromTuple(json.loads(strRep)) 
```

这也适用于 msgpack.dumps 和 msgpack.loads（一种更快更紧凑的二进制表示）。

可能适用于您的数组的警告：如果您的 numpy 数组是对象 dtype，则它不会通过标准方法序列化为完整数组。您必须单独序列化每个对象，因为它是存储在数组中的对象 ID，而不是数据。使用 dtype 作为 dtype='|S' 其中是最大字符串长度将使数组可序列化。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-19T21:03:14.880

我只使用过一点 numpy，但我认为它在内部以特殊格式保存数据，所以 json 模块不知道如何处理它是有道理的。

将其转换回数组是否有效？

```
json.dumps(numpy.asarray(my_array)) 
```

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.asarray.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.asarray.html)

# python - Python“模块”对象不是尝试以几种不同方式导入模块的可调用问题

> ID：13461947
> 
> 赞同：1
> 
> 时间：2012-11-19T20:47:57.333
> 
> 标签：python, import, web.py

我最近接管了维护一个用 Python 编写并使用 web.py 的网站。我创建了一个我想导入的类，但我收到“TypeError：'module' object is not callable”错误。所有 .py 模块都存储在名为“lib”的目录中。在 lib 目录中有以下模块 - noun.py、verb.py、context.py、word.py、base.py。在 lib 目录中是 --init--.py 文件。我正在尝试将 noun.py 模块导入上下文模块。下面是 context.py 模块中用于导入其他模块的代码。

```
from lib import verb, word, base 
```

这似乎适用于导入动词、单词和基本模块。但是当我在该语句的末尾添加名词以使其...

```
from lib import, verb, word, base, noun 
```

我收到“TypeError：‘模块’对象不可调用”错误。我也试过...

```
import noun #Also produces the same error 
```

所以我尝试了以下...

```
from noun import * 
```

当我以这种方式导入模块时，错误被消除，但是当我引用名词模块的属性时，我得到错误“AttributeError：名词实例没有属性'get_stem_used'”。下面是名词模块的代码...

```
from base import base

class noun:
    wordBase = None
    stemBase = None

    def __init__(self, pId):
        b = base()
        wrdBase = b.get_word_base(pId)
        self.wordBase = wrdBase['base']
        stmBase = b.get_stemBase(pId)
        self.stemBase = stmBase['stem']
        #Code to make sure the module is instantiated correctly and the data is validated

    def get_output(self):
        return self.wordBase

    def get_stem_used(self):
        return self.stemBase 
```

verb.py 模块与 noun.py 模块具有基本相同的代码。在 context.py 模块中，我有以下代码......

```
 n = noun(id)
 base = n.get_output()
 #I print out base to make sure everything is good and it is

 v = verb(id)
 verb = v.get_output() 
```

然后将“n”和“v”传递给 word.py 模块。word.py 模块中包含以下代码。

```
if v.get_stem_used == "Some Value":
    #do whatever
elif n.get_stem_used == "Another value":  #This line produces the "attribute error"
    #do something 
```

当我尝试访问 n.get_stem_used 时，我收到“AttributeError：名词实例没有属性'get_stem_used'”错误。我做了一些研究，我遇到了这个网址[http://effbot.org/zone/import-confusion.htm](http://effbot.org/zone/import-confusion.htm)这让我相信我没有正确导入名词模块，因为我没有导入使用以下代码的名词模块...它不允许我使用点符号来引用具有名词类的元素。

```
from lib import, verb, word, noun 
```

在上述语句的末尾添加“名词”对我来说很奇怪，但它似乎正确导入了所有其他模块。我已经看到混合制表符和空格可能会导致此错误，但我已经使用我的编辑器检查了它是否已正确标记。我已经为此工作了一段时间，因此非常感谢任何帮助。谢谢。

以下是--init--.py 中的内容

```
#!/usr/local/bin/python2.5
# -*- coding: utf-8 -*- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:20:48.610

类和模块之间似乎存在混淆。你说你在做`from lib import noun`，然后`n = noun(id)`。这是您的错误的根源：`noun`这里指的是名词模块，而不是该模块内的名词类。Java 不是 Python：类是与其模块分开的可导入名称，它们不必与它们所在的模块具有相同的名称，并且一个模块中可以有多个类。

所以，你要么需要做：

```
from lib import noun
n = noun.noun(id) 
```

或者

```
from lib.noun import noun
n = noun(id) 
```

（顺便说一句，如果您使用符合 PEP8 的名称，这将是显而易见的：您将导入`noun`但实例化`Noun`。）

其他“非Java”点：不需要`get_output`and`get_stem_used`方法，只需引用`wordBase`和`stemBase`直接。但是，如果您*确实*有这些方法，则需要在比较中实际调用它们：`if n.get_stem_used() == "Another value"`等等。（当然，Java 也是如此——你用过 Ruby 还是 Scala，也许吧？）

# ruby - 生成博客时 octopress image_tag 插件出现语法错误

> ID：13461952
> 
> 赞同：4
> 
> 时间：2012-11-19T20:48:18.380
> 
> 标签：ruby, jekyll, octopress

我在我的技术博客中使用[octopress](http://octopress.org)。我从官方 octopress repo 更新了我的 octopress 代码，运行时出现类似错误`rake generate`：

```
 |1.9.3-p194| home in ~/Documents/work/git/muratcorlu.github.com
± |source ✓| → rake generate
## Generating Site with Jekyll
directory source/stylesheets/ 
   create source/stylesheets/screen.css 
Configuration from /Users/muratcorlu/Documents/work/git/muratcorlu.github.com/_config.yml
/Users/muratcorlu/Documents/work/git/muratcorlu.github.com/plugins/category_generator.rb:109: warning: regexp has invalid interval
/Users/muratcorlu/Documents/work/git/muratcorlu.github.com/plugins/category_generator.rb:109: warning: regexp has `}' without escape
/Users/muratcorlu/Documents/work/git/muratcorlu.github.com/plugins/category_generator.rb:146: warning: regexp has invalid interval
/Users/muratcorlu/Documents/work/git/muratcorlu.github.com/plugins/category_generator.rb:146: warning: regexp has `}' without escape
/Library/Ruby/Gems/1.8/gems/jekyll-0.11.2/bin/../lib/jekyll/site.rb:76:in `require': /Users/muratcorlu/Documents/work/git/muratcorlu.github.com/plugins/image_tag.rb:27: undefined (?...) sequence: /(?<class>\S.*\s+)?(?<src>(?:https?:\/\/|\/|\S+\/)\S+)(?:\s+(?<width>\d+))?(?:\s+(?<height>\d+))?(?<title>\s+.+)?/ (SyntaxError)
/Users/muratcorlu/Documents/work/git/muratcorlu.github.com/plugins/image_tag.rb:29: undefined (?...) sequence: /(?:"|')(?<title>[^"']+)?(?:"|')\s+(?:"|')(?<alt>[^"']+)?(?:"|')/
    from /Library/Ruby/Gems/1.8/gems/jekyll-0.11.2/bin/../lib/jekyll/site.rb:76:in `setup'
    from /Library/Ruby/Gems/1.8/gems/jekyll-0.11.2/bin/../lib/jekyll/site.rb:75:in `each'
    from /Library/Ruby/Gems/1.8/gems/jekyll-0.11.2/bin/../lib/jekyll/site.rb:75:in `setup'
    from /Library/Ruby/Gems/1.8/gems/jekyll-0.11.2/bin/../lib/jekyll/site.rb:30:in `initialize'
    from /Library/Ruby/Gems/1.8/gems/jekyll-0.11.2/bin/jekyll:224:in `new'
    from /Library/Ruby/Gems/1.8/gems/jekyll-0.11.2/bin/jekyll:224
    from /usr/bin/jekyll:23:in `load'
    from /usr/bin/jekyll:23 
```

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-15T06:07:17.677

首先，我在 irb 中尝试了 RegEx：

```
$ irb
irb(main):001:0> /(?:"|')(?<title>[^"']+)?(?:"|')\s+(?:"|')(?<alt>[^"']+)?(?:"|')/
=> /(?:"|')(?<title>[^"']+)?(?:"|')\s+(?:"|')(?<alt>[^"']+)?(?:"|')/
irb(main):002:0> 
```

我没有收到任何错误，但后来我发现我在服务器上的默认 ruby​​ 版本是 1.8.7。

我从 rvm 中选择了 ruby​​-1.9.3-p551 并将其激活。

我做了以下事情：

```
rvm use ruby-1.9.3-p551
bundle install
bundle exec rake generate 
```

这为我解决了错误。

# oracle - Oracle：计算并插入到其他表触发器/过程

> ID：13461960
> 
> 赞同：1
> 
> 时间：2012-11-19T20:48:51.063
> 
> 标签：oracle, triggers

我正在尝试计算一些值并将它们添加到另一个表中。

所以我有预订、治疗和发票。用户预订一些治疗，然后预订会话生成发票。我已经手动插入发票插入语句，只是尝试根据预订会话数填充计算值。附言。治疗价格在治疗表中。

```
SQL> SELECT * FROM INVOICE;

    INV_ID|INV_DATETIME                  |INV_SUBTOTAL|INV_DISCOUNT|  INV_TOTAL
----------|------------------------------|------------|------------|-----------
       100|14-NOV-12 09.40.06.918000     |        $.00|        $.00|       $.00
       101|18-MAR-12 10.03.00.000000     |        $.00|        $.00|       $.00
       102|18-MAR-12 10.15.00.000000     |        $.00|        $.00|       $.00
       103|18-MAR-12 10.55.00.000000     |        $.00|        $.00|       $.00
       104|18-MAR-12 10.38.00.000000     |        $.00|        $.00|       $.00
       105|12-JUN-12 15.15.00.000000     |        $.00|        $.00|       $.00
       106|06-AUG-12 12.13.00.000000     |        $.00|        $.00|       $.00
       107|04-MAY-12 09.15.00.000000     |        $.00|        $.00|       $.00
       108|29-NOV-12 13.16.00.000000     |        $.00|        $.00|       $.00
       109|18-MAR-12 10.37.00.000000     |        $.00|        $.00|       $.00
       110|21-MAR-12 11.26.00.000000     |        $.00|        $.00|       $.00
       111|24-APR-12 11.16.00.000000     |        $.00|        $.00|       $.00
       112|12-MAY-12 10.27.00.000000     |        $.00|        $.00|       $.00
       113|21-MAY-12 13.33.00.000000     |        $.00|        $.00|       $.00
       114|18-JAN-12 12.17.00.000000     |        $.00|        $.00|       $.00
       115|20-JUN-12 11.18.00.000000     |        $.00|        $.00|       $.00
       116|09-JUN-12 10.14.00.000000     |        $.00|        $.00|       $.00 
```

所以我使用以下 sql 查询来计算发票的小计价格，因为可以一次预订多个预订会话，这些将出现在同一张发票 *..1

```
SQL> COLUMN total FORMAT $99,999.99
SQL> SELECT IV.INV_ID, SUM(TR.TR_PRICE) as Total
  2  FROM BOOKING_SESSION BS, TREATMENT TR, INVOICE IV
  3  WHERE BS.INV_ID = IV.INV_ID
  4  AND BS.BK_TREATMENT = TR.TR_ID
  5  GROUP BY IV.INV_ID
  6  ORDER BY BS.INV_ID ASC;

    INV_ID|      TOTAL
----------|-----------
       100|    $605.00
       101|     $45.00
       102|     $70.00
       103|     $65.00
       104|     $50.00
       105|     $25.00
       106|     $25.00
       107|     $25.00
       108|     $25.00
       109|     $50.00
       110|     $25.00
       111|     $50.00
       112|     $15.00
       113|     $15.00
       114|     $25.00
       115|     $25.00
       116|     $25.00 
```

现在我想获取每个值并将其添加到`INV_SUBTOTAL`

我尝试执行以下操作，但似乎不起作用。

```
CREATE OR REPLACE TRIGGER INV_SUBTOTAL
BEFORE INSERT OR UPDATE ON BOOKING_SESSION
FOR EACH ROW
BEGIN
   SELECT 
        (SELECT SUM(TR.TR_PRICE) FROM BOOKING_SESSION BS, TREATMENT TR, INVOICE IV WHERE BS.INV_ID = IV.INV_ID AND BS.BK_TREATMENT = TR.TR_ID)
      INTO :NEW.INV_SUBTOTAL
   FROM DUAL;
END;
/ 
```

警告：使用编译错误创建触发器。

```
SQL> SHOW ERROR
Errors for TRIGGER INV_SUBTOTAL:

LINE/COL|ERROR
--------|-----------------------------------------------------------------
4/12    |PLS-00049: bad bind variable 'NEW.INV_SUBTOTAL'
SQL> 
```

也许我做错了T_T

这是相关表的数据；

```
SQL> select * from treatment;

     TR_ID|TR_NAME             |TR_SPECIALIST|   TR_PRICE
----------|--------------------|-------------|-----------
         1|Hair removal        |            1|     $25.00
         2|Hair styling        |            1|     $50.00
         3|Nails               |            1|     $15.00
         4|Botox               |            1|     $30.00
         5|Make up             |            5|     $35.00
         6|Reflexology         |            3|     $25.00
         7|Massage therapy     |            3|     $25.00
         8|Facial care         |            4|     $25.00
         9|Weight loss         |            2|     $40.00
        10|Consultation        |            2|     $20.00

10 rows selected.

SQL> select * from booking_session
  2  where inv_id > 100;

     BK_ID|BK_DATE                       | BK_BOOKER|BK_CUSTOMER|BK_TREATMENT|START_SESSION              |END_SESSION              |STAFFAPPOINTED|   BK_ROOM|    INV_ID
----------|------------------------------|----------|-----------|------------|------------------------------|------------------------------|--------------|----------|----------
         4|18-MAR-12 10.35.00.000000     |         1|          4|          10|20-MAR-12 12.00.00.000000     |20-MAR-12 13.00.00.000000     |             1|         4|       109
         5|18-MAR-12 10.36.00.000000     |         1|          4|           4|21-MAR-12 11.00.00.000000     |20-MAR-12 12.00.00.000000     |             1|         5|       109
         6|18-MAR-12 10.50.00.000000     |         5|          5|           2|20-MAR-12 11.00.00.000000     |20-MAR-12 12.00.00.000000     |             5|         6|       103
        11|18-MAR-12 10.09.00.000000     |        10|         10|          10|20-MAR-12 11.00.00.000000     |20-MAR-12 12.00.00.000000     |            10|        10|       102
        12|18-MAR-12 10.12.00.000000     |        10|         10|           6|22-MAR-12 11.00.00.000000     |22-MAR-12 12.00.00.000000     |            11|        11|       102
        16|18-MAR-12 10.00.00.000000     |        15|         14|          10|20-MAR-12 11.00.00.000000     |20-MAR-12 12.00.00.000000     |            15|        14|       101
        17|18-MAR-12 10.02.00.000000     |        15|         14|           7|20-MAR-12 12.00.00.000000     |20-MAR-12 13.00.00.000000     |            16|        15|       101
        31|21-MAR-12 11.25.00.000000     |         1|          4|           1|24-MAR-12 11.00.00.000000     |24-MAR-12 12.00.00.000000     |             2|         1|       110
        32|24-APR-12 11.15.00.000000     |         1|          4|           2|26-APR-12 12.00.00.000000     |26-APR-12 13.00.00.000000     |             3|         2|       111
        33|12-MAY-12 10.25.00.000000     |         1|          4|           3|21-MAY-12 13.00.00.000000     |21-MAY-12 14.00.00.000000     |             4|         3|       112
        34|21-MAY-12 13.32.00.000000     |         1|          4|           3|26-MAY-12 15.00.00.000000     |26-MAY-12 16.00.00.000000     |             4|         3|       113
        35|18-JAN-12 12.14.00.000000     |         1|          4|           6|21-JAN-12 11.00.00.000000     |21-JAN-12 12.00.00.000000     |            17|         5|       114
        36|20-JUN-12 11.16.00.000000     |         1|          4|           7|25-JUN-12 11.00.00.000000     |25-JUN-12 12.00.00.000000     |            22|         5|       115
        37|09-JUN-12 10.12.00.000000     |         1|          4|           8|11-JUL-12 11.00.00.000000     |11-JUL-12 12.00.00.000000     |            24|         5|       116
        20|18-MAR-12 10.30.00.000000     |        15|         17|           7|20-MAR-12 09.00.00.000000     |20-MAR-12 10.00.00.000000     |            16|        17|       104
        39|18-MAR-12 10.35.00.000000     |         1|         17|           8|25-MAR-12 13.00.00.000000     |25-MAR-12 14.00.00.000000     |            24|         5|       104
        40|12-JUN-12 15.11.00.000000     |         1|         17|           8|11-JUL-12 11.00.00.000000     |11-JUL-12 12.00.00.000000     |            24|         5|       105
        41|06-AUG-12 12.13.00.000000     |         1|         17|           8|11-AUG-12 11.00.00.000000     |11-AUG-12 12.00.00.000000     |            24|         5|       106
        42|04-MAY-12 09.15.00.000000     |         1|         17|           8|28-JUN-12 11.00.00.000000     |28-JUN-12 12.00.00.000000     |            24|         5|       107
        43|29-NOV-12 13.16.00.000000     |         1|         17|           8|01-DEC-12 11.00.00.000000     |01-DEC-12 12.00.00.000000     |            24|         5|       108
        44|18-MAR-12 10.53.00.000000     |         5|          5|           3|20-MAR-12 13.00.00.000000     |20-MAR-12 14.00.00.000000     |             6|         7|       103
        38|18-MAR-12 10.13.00.000000     |         1|         10|           8|25-MAR-12 12.00.00.000000     |25-MAR-12 13.00.00.000000     |            24|         5|       102 
```

这是与此问题相关的 ERD 的一点。

![erd2](../Images/a84e1528df1c0486696b2e9a181ca45c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:09:09.897

如果目标是使用在第二个查询中计算的特定更新列，`INV_SUBTOTAL`则需要一个语句。我的猜测（因为我不知道or表是什么样子或它们包含什么数据）是你想要一个看起来像的相关更新`INVOICE``INV_ID``TOTAL``UPDATE``TREATMENT``BOOKING_SESSION`

```
UPDATE invoice inv
   SET inv_subtotal = (SELECT SUM(tr.tr_price)
                         FROM treatment tr,
                              booking_session bs
                        WHERE bs.inv_id = inv.inv_id
                          AND bs.bk_treatment = tr.tr_id) 
```

`BOOKING_SESSION`除非您实际更新（或插入）`BOOKING_SESSION`表，否则触发器不会执行任何操作。通常，行级触发器`BOOKING_SESSION`也无法在`BOOKING_SESSION`不生成[变异表异常](https://stackoverflow.com/questions/13445477/oracle-table-is-mutating)的情况下查询表，我们几天前在您的一个问题中讨论了该异常。触发器中的`:new`记录基于定义触发器的表——您只能引用属于表的`BOOKING_SESSION`列。您无法引用`:new.inv_subtotal`，除非`INV_SUBTOTAL`是您在其上定义触发器的表中的列。

在现实世界中，这里也会存在严重的非规范化问题。`TREATMENT`将聚合数据与行级数据分开存储违反了基本规范化，并且几乎肯定会导致聚合数据与存储在表中的较低级别数据不匹配的数据质量问题。由于这只是一个家庭作业，也许你的教授希望你忽略这个问题，但这是你在现实世界中想要非常敏感的事情。

# .htaccess - 如何使用 Mod_Rewrite 将用户重定向到移动子目录？

> ID：13461962
> 
> 赞同：2
> 
> 时间：2012-11-19T20:48:54.690
> 
> 标签：.htaccess, mod-rewrite, redirect, mobile, query-string

我想使用 mod_rewrite 来检测用户代理是否是移动设备，如果是，将用户从**www.example.com/foo.php?a=12345**重定向到**example.com/mobile/foo.php?a=12345** . 重定向必须保留查询字符串和请求的文件名。

我使用 Mobile Boilerplate ( [https://github.com/h5bp/mobileboilerplate.com](https://github.com/h5bp/mobileboilerplate.com) ) 作为起点。在他们提供的 .htaccess 文件中，他们使用以下代码将所有移动浏览器重定向到移动网站**example.com/mobile/**。

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_USER_AGENT} android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge\ |maemo|midp|mmp|opera\ m(ob|in)i|palm(\ os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows\ (ce|phone)|xda|xiino [NC,OR]
    #RewriteCond %{HTTP_USER_AGENT} ^(1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a\ wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r\ |s\ )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1\ u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp(\ i|ip)|hs\-c|ht(c(\-|\ |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac(\ |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt(\ |\/)|klon|kpt\ |kwc\-|kyo(c|k)|le(no|xi)|lg(\ g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-|\ |o|v)|zz)|mt(50|p1|v\ )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v\ )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-|\ )|webc|whit|wi(g\ |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-) [NC]
RewriteRule ^$ http://www.example.com/mobile [R,L] 
```

该代码运行良好，但不幸的是，无论请求的文件如何，它都不会保留查询并重定向到页面。

我在前面的代码中添加了以下代码片段，但它在移动和桌面浏览器上都作为内部错误返回。

```
// Previous Code Without ReWrite Rule
RewriteCond %{HTTP_HOST} ^example.com$
RewriteCond %{REQUEST_URI} !^/mobile/
RewriteRule ^(.*)$ /mobile/$1 [QSA, L] 
```

我已经用尽了我能在网上找到的所有解决方案。我认为问题可能在于检查移动设备的条件，然后检查我添加的其他条件。任何帮助将不胜感激，我仍然会继续破解这个 cookie。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T20:24:57.397

我解决了这个问题，我正在回答我自己的问题，以防其他人遇到类似的问题。

*另外，感谢 Kamil Srot 为我指明了正确的道路并建议我检查 Apache Error.logs。*

**这是我使用的给我错误的原始代码：**

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_USER_AGENT} android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge\ |maemo|midp|mmp|opera\ m(ob|in)i|palm(\ os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows\ (ce|phone)|xda|xiino [NC,OR]
    #RewriteCond %{HTTP_USER_AGENT} ^(1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a\ wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r\ |s\ )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1\ u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp(\ i|ip)|hs\-c|ht(c(\-|\ |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac(\ |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt(\ |\/)|klon|kpt\ |kwc\-|kyo(c|k)|le(no|xi)|lg(\ g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-|\ |o|v)|zz)|mt(50|p1|v\ )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v\ )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-|\ )|webc|whit|wi(g\ |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-) [NC]
RewriteCond %{HTTP_HOST} ^example.com$
RewriteCond %{REQUEST_URI} !^/mobile/
RewriteRule ^(.*)$ /mobile/$1 [QSA, L] 
```

目标是将移动用户重定向到子目录并保留查询字符串。我在 .htaccess 中使用此代码时收到内部服务器错误。问题是重写规则中的 [QSA] 标志。为了使整个工作正常，我不得不将其删除。我还收到了一些提示，并被告知我也可以清理代码。

**这是解决方案和最终结果，并逐行解释了正在发生的事情。**

```
#Enables Rewrite Engine
RewriteEngine On

#Sets Document Root
RewriteBase /

#Checks if user DID NOT request the mobile version of site anywhere in the URI
RewriteCond %{REQUEST_URI} !^mobile [NC]

#Conditional to check for mobile user agents (provided by https://github.com/h5bp/mobileboilerplate.com)
RewriteCond %{HTTP_USER_AGENT} android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge\ |maemo|midp|mmp|opera\ m(ob|in)i|palm(\ os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows\ (ce|phone)|xda|xiino [NC,OR]

#Second Conditional to check for mobile user agents (provided by https://github.com/h5bp/mobileboilerplate.com)
RewriteCond %{HTTP_USER_AGENT} ^(1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a\ wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r\ |s\ )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1\ u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp(\ i|ip)|hs\-c|ht(c(\-|\ |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac(\ |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt(\ |\/)|klon|kpt\ |kwc\-|kyo(c|k)|le(no|xi)|lg(\ g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-|\ |o|v)|zz)|mt(50|p1|v\ )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v\ )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-|\ )|webc|whit|wi(g\ |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-) [NC]

#The rewrite appends the original requested URI to the end of the mobile subdirectory which is located in the same directory as the .htaccess file.  I also removed the leading '/' in front of mobile because it was unnecessary.
RewriteRule ^(.*)$ mobile/$1 [QSA,L] 
```

希望这可以帮助其他可能遇到此问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-26T15:00:21.660

请使用这个：

```
RewriteEngine On

   RewriteCond %{HTTP_USER_AGENT} android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge\\ |maemo|midp|mmp|opera\\ m(ob|in)i|palm(\\ os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|symbian|treo|up\\.(browser|link)|vodafone|wap|windows\\ (ce|phone)|xda|xiino [NC,OR]
   RewriteCond %{HTTP_USER_AGENT} ^(1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a\\ wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r\\ |s\\ )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1\\ u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp(\\ i|ip)|hs\\-c|ht(c(\\-|\\ |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac(\\ |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt(\\ |\\/)|klon|kpt\\ |kwc\\-|kyo(c|k)|le(no|xi)|lg(\\ g|\\/(k|l|u)|50|54|e\\-|e\\/|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-|\\ |o|v)|zz)|mt(50|p1|v\\ )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v\\ )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-|\\ )|webc|whit|wi(g\\ |nc|nw)|wmlb|wonu|x700|xda(\\-|2|g)|yas\\-|your|zeto|zte\\-) [NC]

   RewriteCond %{HTTP_USER_AGENT} "android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos" [NC]
   RewriteRule ^(.*)$ http://demomobile.goblujay.com/ [L,R=302] 
```

为我工作！谢谢。

# c++ - 零减零等于无穷大？

> ID：13461964
> 
> 赞同：5
> 
> 时间：2012-11-19T20:49:03.003
> 
> 标签：c++, arrays, multidimensional-array, floating-point

我正在编写一个创建浮点数组数组副本的方法。调试后我得到了一些非常奇怪的值，所以我想我会问这个问题，因为我无法通过阅读 C++ 数组常见问题解答来解决这个问题。

这是代码的相关部分（它是一个庞大程序的一部分，大部分内容与本文无关）：

```
// height and width are integer global variables
void method () {
    float testArray[height][width];
    for(int j = 0; j < height; ++j) {
        for(int i = 0; i < width; ++i) {
            testArray[j][i] -= 0.0;
            std::cout << testArray[j][i] << std::endl;
        }
    }
} 
```

（在我的测试中，高度 = 32 和宽度 = 256，但这不应该是相关的。）当我初始化 testArray 时，它的值应该都是 0.0，对吗？然后，在循环中，我从 testArray 中的某个元素中减去 0.0，这在逻辑上根本不应该改变值。但是打印 testArray 的值作为调试步骤会导致一些奇怪的值，例如以下代码段：

```
[...]
0
[...]
-3.23805e-24
[...]
8.40779e-45
[...]
1.79513e+37
[...]
0
[...]
3.19586e+36
[...] 
```

最令人担忧的值是无穷大的，例如上面列出的第四个数字。老实说，我不知道为什么会这样。所有这些值不应该仍然约为 0.0 吗？我认为这与浮点运算的不精确有关，但这不应该导致无限值....

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T20:51:32.487

不，当您这样声明数组时，它将未初始化，因为它是内置类型。在进行减法之前，您需要自己将其初始化为零。

但请注意，声明一个数组（可能是非常量维度）是编译器扩展，而不是语言的一部分。

我只会使用`vector`同时解决这两个问题的方法。

```
std::vector<std::vector<float> > testArray(height, std::vector<float>(width)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T20:52:21.127

尝试初始化数组中的值：

```
float testArray[height][width] = {}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T20:53:19.200

这一行创建了一个**未初始化**的数组，元素值可以是任何垃圾：

```
float testArray[height][width]; 
```

要使用浮点默认值（零）对其进行初始化，请使用以下语法：

```
float testArray[height][width] = {}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T20:54:07.083

**这个答案是错误的，但我没有人尝试它！**

使用这个非常明确的定义：

```
float testArray[height][width] = {{0.0f}}; 
```

确保数组中的每个值都初始化为零。否则，数组中的值将是未定义的。我觉得这是最“可读”的解决方案。

**为什么错了？**

正如@Dave 在下面提到的，尽管此解决方案适用于这种情况，但它具有误导性。它**仅将 的第一个元素**显式分配`testArray`给 0.0，同时对数组中的所有其他元素进行[值初始化。](http://en.cppreference.com/w/cpp/language/value_initialization)

正确的解决方案确实是：

```
float testArray[height][width] = {}; 
```

它对数组中的所有元素进行值初始化（`0.0f`为 type的默认值`float`。

# jquery - 响应式菜单问题

> ID：13461971
> 
> 赞同：0
> 
> 时间：2012-11-19T20:49:41.167
> 
> 标签：jquery, css, html, responsive-design

嗨，我有一个响应式菜单系统，效果很好，但现在我想以不同的方式更改 URL 位置，首先看看我的下拉菜单。

[http://jsfiddle.net/Et2HB/](http://jsfiddle.net/Et2HB/)

实际上，我需要提供主菜单 1、主菜单 2 和主菜单 3 来分隔链接，例如 www.example1.com 的链接，www.example2.com 的链接。虽然我只想要右下箭头上方的下拉功能（ nav_sprite.png）在 jsfiddle 示例中找不到。您可以在下面的课程中看到

```
ul#menu li.hasChildren a > span {
  background: url(../images/nav_sprite.png);
  background-position: right 0px !important;
  background-repeat: no-repeat;
  background-size: 30px auto;
} 
```

我尝试添加另一个锚标记，如下所示..并将该标记赋予 float:left 并尝试将宽度 55px 添加到第二个锚标记，该标记用于通过给定的 float:right 下拉和右侧。但这一切都像地狱一样崩溃......

```
<li><a href="http://www.example.com">Main Menu 1</a><a href="#" tabindex="1" accesskey="h">&nbsp;</a>
<ul>
.... 
```

你有什么想法来解决这个问题吗？

谢谢保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:27:21.707

我希望我正确地理解了你。看看我的 jsFiddle：

**[小提琴](http://jsfiddle.net/2Wa2e/1/)**

诀窍是给*“li”元素*一个*位置：相对*属性。然后你可以自由地放置你的下拉按钮元素：

**CSS：**

```
ul#menu li a.dropdownBtn {
    background-color: red;
    position: absolute;
    width: 30px;
    right: 0;
    top: 0;
} 
```

**HTML：**

```
<ul id="menu" class="overthrow">
    <li><a href="#" tabindex="1" accesskey="h">Main Menu 1</a>
        <a class="dropdownBtn">v</a>
        <!-- etc etc -->
    </li>
</ul> 
```

**JS：**

```
// change:
$('ul#menu li.hasChildren a').on('click', function() {
// to:
$('ul#menu li.hasChildren a.dropdownBtn').on('click', function() {

// and change:
if($(this).attr('class')=="hasChildrenActive"){
// to
if($(this).hasClass("hasChildrenActive")){ 
```

剩下的唯一一件事就是调整您的 js 代码，以便它使用 a.dropdownBtn 而不是其他链接标记。

# c# - C# WinForms：工具提示，无法访问已释放的对象

> ID：13461972
> 
> 赞同：0
> 
> 时间：2012-11-19T20:49:46.373
> 
> 标签：c#, winforms, datagridview, tooltip

我有一个 datagridview，它在用户输入无效值的编辑模式下为每个单元格显示一个通知错误图标。该图标位于单元格的最右侧。当用户将鼠标移到通知错误图标上时，我检查鼠标位置是否在包含通知错误图标的区域内。如果是这样，我会显示一个带有单元格 errorText 消息的工具提示。在 datagridview 上移动鼠标的代码下方。对象 currentEditCellToolTip 下方是一个全局 ToolTip 对象，currentEditCellRectangle 是单元格最右侧包含 nofity 错误图标的区域。

```
private void GridViewMouseMove(object sender, MouseEventArgs e)
{
// MouseHover event is too slow to update coordinates so used MouseMove
// to get immediatelly response.
Point mousePosition = new Point();
DataGridView.HitTestInfo hitTestInfo;

try
{
    mousePosition = datagridview.PointToClient(MousePosition);
}
catch (Exception)
{
    return;
}

hitTestInfo = this.datagridview.HitTest(mousePosition.X, mousePosition.Y);

DataGridViewCell cell = this.datagridview.CurrentCell;

if (hitTestInfo.Type == DataGridViewHitTestType.Cell &&
    hitTestInfo.ColumnIndex == cell.ColumnIndex &&
    hitTestInfo.RowIndex == cell.RowIndex &&
    this.currentEditCellRectangle.Contains(e.X - 82, e.Y - 5))
{
    currentEditCellToolTip.Show(cell.ErrorText, 
                                datagridview.EditingControl, 3000);
} 
} 
```

问题是我收到一个错误：“无法访问已处置的对象”。我用谷歌搜索，有人说工具提示中有一个内部错误，我指的是前一个窗口句柄，而不是当前窗口句柄。因此，我尝试在每次鼠标悬停在通知图标上时创建一个新的 ToolTip 实例，然后显示它，而不是始终使用具有不同错误文本和窗口句柄的相同工具提示。无论如何，它继续说“无法访问已处置的对象”。

```
 currentEditCellToolTip = new ToolTip();
    currentEditCellToolTip.Show(cell.ErrorText, 
                                datagridview.EditingControl, 3000); 
```

当用户将鼠标移到当前处于编辑模式且出错的单元格的通知图标所在的区域上时，将显示此工具提示。

那么如何使工具提示正常工作而不会引发任何异常，如评论？

**编辑 - 深度描述：** 一个小例子：用户正在编辑一个单元格，他输入了一个无效值，所以我使该单元格保持在编辑模式，直到输入一个有效值并且单元格的通知错误图标显示在其最右侧. 包含此通知错误图标的区域（矩形）显示一个 errorText，描述当用户将鼠标移到该区域上时出现的错误。此消息通过工具提示显示。

现在想象一下，该用户现在为当前​​单元格输入一个有效值并更改为另一个他在编辑模式下进入的新单元格，并且他输入了一个无效值，因此通知错误图标显示在该单元格的最右侧和一个新的工具提示当用户将鼠标移到该区域上时会显示错误消息。依此类推....用有效值验证当前单元格并更改为另一个新单元格...

这里的问题是，与前一个单元格“EditingControl”相关联的前一个工具提示在代码执行时已经消失（内部工具提示有一个局部变量，与旧窗口相关联），这会导致引发异常。EditingControl 已更改并与新工具提示相关联，但旧工具提示继续与已消失的旧 EditingControl 相关联，因此这会导致异常。这是与工具提示相关的问题，请参见以下链接：

[工具提示：无法访问已处置的对象](http://technologiques.blogspot.com.es/2008/06/tooltip-and-cannot-access-disposed.html)

那么有没有办法告诉工具提示以前的editingControl已经消失，然后将新的editingControl正确关联到新的工具提示而不会引起任何异常？我需要以某种方式销毁以前的 ToolTip 吗？还是没有必要？

# html - IE 偏移导航问题

> ID：13461975
> 
> 赞同：1
> 
> 时间：2012-11-19T20:50:02.757
> 
> 标签：html, css

在所有浏览器中，我的导航显示都很好，例如 chrome、firefox、opera、safari。

但由于某种原因，ie 拒绝正确显示，更令人沮丧的是它实际上是 1px。

这通常不会打扰我，但它在一个很明显的地方：

IE：

![在此处输入图像描述](../Images/0a0f758a8ec1f8cadfd19ea5ccedd807.png)

其他所有浏览器：

![在此处输入图像描述](../Images/fd5c7c5e7e5f8972ce3a898b7869e2e0.png)

我使用的代码看起来不错，但这里是：

```
nav {
font-family: "Myriad Pro", Arial, sans-serif;
width: 280px;
height: 40px;
float: right;
font-size: 14px;
list-style: none;
clear: both;
position: relative;
top: 11px;
}

nav ul { 
float: right;
margin: 0;
height: 40px;
    width:240px
}

nav li {
display: inline; 

}

nav li a {
color: #3BB9FF;
border-bottom: none;
padding: 12px 10px 11px 10px;
margin-left: -3px;
}

nav li a:hover{
color: #3BB9FF;
background-color: rgba(0, 0, 0, 0.3);
}

/********
Shows which page is selected
*/

 nav li.selected {
display: inline; 
}

nav li a.selected {
color: #3BB9FF;
background-color: rgba(200, 200, 200, 0.3);
border-top: 3px solid #fff;

} 
```

我也在使用来自谷歌树干的 ie html5 shim。

这个问题有什么简单的解决方法吗？我知道这没什么大不了的，只是令人沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:18:10.593

菜单上的 CSS 代码有点奇怪。我认为这就是 IE 表现不佳的原因。尝试以下调整：

```
nav li {
    //display: inline;
    float:left;
}
nav li a {
    color: #3BB9FF;
    border-bottom: none;
    //padding: 12px 10px 11px 10px;
    //margin-left: -3px;
    display:block;
    padding:10px;
} 
```

还要检查 IE 中菜单的宽度是否不够。

# java - ldapsearch 返回命名上下文，但 JNDI 不返回

> ID：13461978
> 
> 赞同：1
> 
> 时间：2012-11-19T20:50:09.370
> 
> 标签：java, ldap, jndi, openldap

如果使用 ldapsearch 在特定 LDAP 服务器中搜索基本级别的命名上下文，则搜索工作正常。

```
$ ldapsearch -h myhealthisp.com -p 10389 -x -s base -b "" namingContexts
# extended LDIF
#
# LDAPv3
# base <> (default) with scope baseObject
# filter: (objectclass=*)
# requesting: namingContexts
#

#
dn:
namingContexts: dc=myhealthisp,dc=com

# search result
search: 2
result: 0 Success

# numResponses: 2
# numEntries: 1` 
```

然而，使用 JNDI，我们得到以下响应：

`No Results for: myhealthisp.com. Problem: [LDAP: error code 32 - No Such Object] null`

这是我们的代码：

```
private Attribute getCertFromLdap(SRVRecord srvRec, CertificateInfo certInfo) throws CertLookUpException{
    env.put(DirContext.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
    sc1 = new SearchControls();
    sc1.setSearchScope(SearchControls.ONELEVEL_SCOPE);

try {
        env.put(DirContext.PROVIDER_URL, "ldap://" + targetDomain + ":" + srvRec.getPort());        
        System.out.println("ldap://" + targetDomain + ":" + srvRec.getPort());

        DirContext dc = new InitialDirContext(env);
        NamingEnumeration directoryNE = null;

        System.out.println("Got HERE!");
        directoryNE= dc.search("", "objectClass=*", sc1);

        System.out.println("SC1 :" + sc1);
        while (directoryNE.hasMore()){
                        SearchResult result1 = (SearchResult) directoryNE.next();

            // print DN of entry
            System.out.println("Result.getNameInNamespace: " + result1.getName());
            Attribute foundMail = findMailAttribute(result1.getNameInNamespace()); 

            if(foundMail != null){
                return foundMail;
            }
        }       
        dc.close(); 
} catch (NamingException e) {
    System.out.println("No Results for: " + targetDomain + "\nProblem: " +     e.getLocalizedMessage() + "  " + e.getCause());
} return null;

} 
```

我们能够返回 myhealthisp.com 的基本目录的唯一方法是将目录名称 (dc=myhealthisp,dc=com) 硬编码到基本目录搜索过滤器中（请参阅此内容了解我们的代码基于：[http](http://directory.apache.org/apacheds/manuals/basic-user-guide-1.5.8-SNAPSHOT/html/ch03s03.html#LDAP) ://directory.apache.org/apacheds/manuals/basic-user-guide-1.5.8-SNAPSHOT/html/ch03s03.html#LDAP操作搜索）

当我们的代码搜索 onctest.org LDAP 服务器时，我们会返回每个命名上下文。

以下是 onctest.org 服务器和 myhealthisp.com 服务器的 Eclipse 控制台输出：

```
ldap://onctest.org.:10389
Got HERE!
SC1 :javax.naming.directory.SearchControls@4c408bfc
Result.getNameInNamespace: ou=config
Result.getNameInNamespace: dc=example,dc=com
Result.getNameInNamespace: ou=system
Search Result: cn=dts556: null:null:{mail=mail: dts556@onctest.org,     usercertificate=userCertificate: [B@35e06ba6, objectclass=objectClass: organizationalPerson,     person, inetOrgPerson, top, o=o: onctest, sn=sn: Test Case, cn=cn: dts556}

Service Record: _ldap._tcp.onctEst.org. 86400   IN  SRV 0 0 10389 onctest.org.
ldap://myhealthisp.com.:10389
Got HERE!
No Results for: myhealthisp.com.
Problem: [LDAP: error code 32 - No Such Object]  null
Unable to find certificate at LDAP for: steve.tripp@myhealthisp.com
_ldap._tcp.myhealthisp.com. 3600    IN  SRV 0 0 10389 myhealthisp.com. 
```

我们认为导致问题的原因如下：

*   JDNI 无法对 OpenLDAProotDSE objectClass 目录进行基本搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T23:14:52.673

通常匿名绑定没有权限在根目录上进行 ldap 搜索。每个目录都具有匿名绑定和搜索根目录的 OOTB 权限。在 apache DS 的情况下，可以通过 ldap 查询来搜索命名上下文

ldapsearch -h localhost -p 10389 -s base -b "" "(objectclass=*)" 命名上下文

但是，子树搜索的一级搜索，例如

ldapsearch -h localhost -p 10389 -s one -b "" -D "uid=admin,ou=system" -w secret "(objectclass=*)"

给出以下结果：这是您在 jndi 程序中所做的：ldap_search：没有这样的对象 ldap_search：附加信息：NO_SUCH_OBJECT：SearchRequest baseDn 失败：''过滤器：'（2.5.4.0 = *）'范围：单级typesOnly：false 大小限制：无限制时间限制：无限制 Deref Aliases：从不 Deref Aliases 属性：：null

第一个 ldapsearch 命令的 JNDI 代码：

> ```
> import java.util.Hashtable;
> import javax.naming.Context;
> import javax.naming.NamingEnumeration;
> import javax.naming.NamingException;
> import javax.naming.directory.Attribute;
> import javax.naming.directory.Attributes;
> import javax.naming.directory.DirContext;
> import javax.naming.directory.InitialDirContext;
> import javax.naming.directory.SearchControls;
> import javax.naming.directory.SearchResult;
> 
> public class SampleLDAPSearch {
> 
>   private Attribute getCertFromLdap() {
>       String targetDomain = "localhost";
>       String port = "10389";
> 
>       Hashtable env = new Hashtable();
>       env.put(DirContext.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
>       SearchControls sc1 = new SearchControls();
>       sc1.setSearchScope(SearchControls.OBJECT_SCOPE);
>       sc1.setReturningAttributes(new String[] { "namingContexts" });
> 
>       try {
>           env.put(DirContext.PROVIDER_URL, "ldap://" + targetDomain + ":" + port);
> 
>           System.out.println("ldap://" + targetDomain + ":" + port);
> 
>           DirContext dc = new InitialDirContext(env);
>           NamingEnumeration directoryNE = null;
> 
>           System.out.println("Got HERE!");
>           directoryNE = dc.search("", "objectclass=*", sc1);
> 
>           System.out.println("SC1 :" + sc1);
>           while (directoryNE.hasMore()) {
>               SearchResult result1 = (SearchResult) directoryNE.next();
> 
>               // print DN of entry
>               System.out.println("Result.getNameInNamespace: " + result1.getName());
>               Attributes attrs = result1.getAttributes();
>               Attribute attr = attrs.get("namingContexts");
>               System.out.println(attr);
> 
>           }
>           dc.close();
>       } catch (NamingException e) {
>           System.out.println("No Results for: " + targetDomain + "\nProblem: " + e.getLocalizedMessage() + "  "
>                   + e.getCause());
>       }
>       return null;
> 
>   }
> 
>   public static void main(String[] args) {
>       SampleLDAPSearch sls = new SampleLDAPSearch();
>       sls.getCertFromLdap();
>   }
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:29:11.743

当搜索级别不是时，Root DSE 不能出现`base`。此外，LDAP 客户端不能依赖根 DSE 中包含的信息，因为这些属性可能受到访问控制的保护。来自[RFC4512](https://www.rfc-editor.org/rfc/rfc4512)：

```
These attributes are retrievable, subject to access control and other
restrictions, if a client performs a Search operation [RFC4511] with
an empty baseObject, scope of baseObject, the filter
"(objectClass=*)" [RFC4515], and the attributes field listing the
names of the desired attributes.  It is noted that root DSE
attributes are operational and, like other operational attributes,
are not returned in search requests unless requested by name. 
```

将搜索范围更改为`base`。更好的是，不要编写依赖于从根 DSE 检索的对象的代码。

### 也可以看看

*   [LDAP：根 DSE](http://www.ldapguru.info/ldap/the-root-dse.html)

# iphone - iPhone，人脸识别，滑动解锁

> ID：13461982
> 
> 赞同：0
> 
> 时间：2012-11-19T20:50:18.977
> 
> 标签：iphone, ios, xcode, screen-lock

我正在尝试制作一个类似于在解锁 iphone 时设置密码的应用程序。我可以使用人脸识别技术，并且我想让它在您滑动解锁时无法立即访问主屏幕。取而代之的是，您会被要求为您的脸部拍照，如果匹配，则主屏幕解锁。我知道任何将幻灯片更改为解锁或主屏幕功能的应用程序都将被拒绝，但这个只会出现滑动后的另一层解锁。有没有办法做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T21:12:16.117

做到这一点的唯一方法是开发越狱调整（并且，你需要越狱你的设备）。
已经有一个类似于您正在尝试做的调整：RecognizeMe
[您应该检查一下。](http://www.youtube.com/watch?feature=player_embedded&v=u3dUCSvcffU)

# jquery - jQuery animate() 不使用颜色

> ID：13461984
> 
> 赞同：8
> 
> 时间：2012-11-19T20:50:33.727
> 
> 标签：jquery, jquery-animate

我正在尝试在 Confluence 4.1.9 中进行一些简单的 jQuery 测试。

```
$("div#test").css("background","#F00"); 
```

有效，但是

```
$("div#test").animate({background:"#F00"}); 
```

没有。我错过了什么吗？或者也许 animate() 在 Confluence 中不起作用？希望有人可以帮助我解决这个问题。谢谢你。

**[更新]**

谢谢各位，完全成功了！但是仅供参考，它在预览中不起作用，这让我有点摸不着头脑。好在我决定保存页面，看看会发生什么。:P

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-19T20:55:48.653

jQuery Core 不支持开箱即用的彩色动画。

您必须使用[jQuery UI](http://jqueryui.com/animate/)或独立的[jQuery Color 插件之](https://github.com/jquery/jquery-color/)类的东西才能让您的调用`animate()`按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-03T15:22:12.963

动画不适用于颜色

但是，如果您想避免使用 JQuery UI，可以使用**转换**：

```
$("div#test").css( { "background": "#F00",
                     "transition": "color 0.4s" } ); 
```

# java - ClassCastException $Proxy 不能强制转换为使用 aop

> ID：13461985
> 
> 赞同：7
> 
> 时间：2012-11-19T20:50:42.287
> 
> 标签：java, spring, aop

我正在使用 spring 通过 bean 创建对象。现在我尝试使用 aop 创建相同的对象，我得到 $Proxy cannot be cast to SaleRoom 异常。

以前的 xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop/spring-aop-2.5.xsd"
xmlns:context="http://www.springframework.org/schema/context/spring-context-2.5.xsd"
xmlns:flow="http://www.springframework.org/schema/webflow-config/spring-webflow-config- 1.0.xsd"
xmlns:jm s="http://www.springframework.org/schema/jms/spring-jms-2.5.xsd"
xmlns:jee="http://www.springframework.org/schema/jee/spring-jee-2.5.xsd"
xmlns:lang="http://www.springframework.org/schema/lang/spring-lang-2.5.xsd"
xmlns:osgi="http://www.springframework.org/schema/osgi/spring-osgi.xsd"
xmlns:tx="http://www.springframework.org/schema/tx/spring-tx-2.5.xsd"
xmlns:util="http://www.springframework.org/schema/util/spring-util-2.5.xsd"
xmlns:p="http://www.springframework.org/schema/p"

xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
http://www.springframework.org/schema/aop/spring-aop-2.5.xsd     http://www.springframework.org/schema/aop/spring-aop-2.5.xsd/spring-spring-aop-2.5.xsd-2.5.xsd
http://www.springframework.org/schema/context/spring-context-2.5.xsd     http://www.springframework.org/schema/context/spring-context-2.5.xsd/spring-spring-context-2.5.xsd-2.5.xsd
http://www.springframework.org/schema/webflow-config/spring-webflow-config-1.0.xsd     http://www.springframework.org/schema/webflow-config/spring-webflow-config-1.0.xsd/spring-spring-webflow-config-1.0.xsd-2.5.xsd
http://www.springframework.org/schema/jms/spring-jms-2.5.xsd     http://www.springframework.org/schema/jms/spring-jms-2.5.xsd/spring-spring-jms-2.5.xsd-2.5.xsd
http://www.springframework.org/schema/jee/spring-jee-2.5.xsd     http://www.springframework.org/schema/jee/spring-jee-2.5.xsd/spring-spring-jee-2.5.xsd-2.5.xsd
http://www.springframework.org/schema/lang/spring-lang-2.5.xsd     http://www.springframework.org/schema/lang/spring-lang-2.5.xsd/spring-spring-lang-2.5.xsd-2.5.xsd
http://www.springframework.org/schema/osgi/spring-osgi.xsd     http://www.springframework.org/schema/osgi/spring-osgi.xsd/spring-spring-osgi.xsd-2.5.xsd
http://www.springframework.org/schema/tx/spring-tx-2.5.xsd     http://www.springframework.org/schema/tx/spring-tx-2.5.xsd/spring-spring-tx-2.5.xsd-2.5.xsd
http://www.springframework.org/schema/util/spring-util-2.5.xsd     http://www.springframework.org/schema/util/spring-util-2.5.xsd/spring-spring-util-2.5.xsd-2.5.xsd
">
<bean id="sale01" class="application.common.entities.BidRoom">
<property name="itemId" value="0001"/>
<property name="lifeTime" value="15"/>
</bean>
</beans> 
```

我使用以下代码来创建销售：

```
 ApplicationContext context = new FileSystemXmlApplicationContext(SalesManager.getSalesSourceFile());
    SaleRoom saleRoom;
    List<String> salesNames = new LinkedList<String>();
    List<SaleRoom> allSales = new LinkedList<SaleRoom>();

    // Get all sales id's for beans
    NodeList salesNodeList = salesDoc.getElementsByTagName("bean");

    for (int i = 0; i < salesNodeList.getLength(); i++) {
        Node nNode = salesNodeList.item(i);
        salesNames.add(((Element) nNode).getAttribute("id").toString());
    }

    for (String saleName : salesNames) {
        if(saleName.contains("sale")) {
            saleRoom = (SaleRoom) context.getBean(saleName);
            allSales.add(saleRoom);
        }
    }

    return allSales; 
```

这是新的xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:aop="http://www.springframework.org/schema/aop"
           xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">

    <aop:aspectj-autoproxy>
        <aop:include name="logSettersCalls"/>
    </aop:aspectj-autoproxy>
    <bean id="logSettersCalls" class="application.logging.aop.LogSettersCalls"/>

    <bean id="sale01" class="application.common.entities.BidRoom">
        <constructor-arg index="0" type="int" value="0001"/>
        <constructor-arg index="1" type="int" value="15"/>
    </bean>
</beans> 
```

Aspect 日志记录类：

```
@Aspect
public class LogSettersCalls {
   @Pointcut("execution(void set*(*))")
    public void setMethod() {}

    @Before("setMethod()")
    public void logSetterCall(JoinPoint theJoinPoint) {
        String methodName = theJoinPoint.getSignature().getName();
        Object newValue = theJoinPoint.getArgs()[0];
        Object theObject = theJoinPoint.getTarget();
        System.out.println("The method " + methodName + " is called on object " 
                + theObject + " with the value " + newValue);
    }
} 
```

我使用相同的代码通过 aop 创建 bean。我在线程“main”java.lang.ClassCastException 中得到异常：$Proxy11 无法转换为 application.common.entities.SaleRoom

抛出异常的行： saleRoom = (SaleRoom) context.getBean(saleName);

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-19T20:56:02.957

您的 SaleRoom 类是否实现了某些接口？如果是，那么您应该在代码中使用接口而不是类：

```
ISaleRoom saleRoom = (ISaleRoom) context.getBean(saleName); 
```

因为如果你的 bean 实现了一些接口，那么 Spring 默认会基于这个接口创建代理。

这是[一篇关于 Spring 中代理创建的好文章。](http://blog.springsource.org/2007/07/19/debunking-myths-proxies-impact-performance/)

如果要为目标类创建代理，也可以更改 Spring AOP 的代理机制。[这在参考文档中](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch08s06.html)有所描述。

# asp.net-mvc - 在 MVC 中调用 WCF 服务时未找到 HTTP 资源

> ID：13461986
> 
> 赞同：1
> 
> 时间：2012-11-19T20:50:44.280
> 
> 标签：asp.net-mvc, wcf, asp.net-mvc-4

我正在将旧的非 MVC 代码集成到 MVC 4 项目中。旧代码在根目录和受基本身份验证的 API 子文件夹中具有带有 .SVC 扩展名的 WCF 服务。

起初，所有 SVC 文件的 (http://mysite/myservice.svc/DoCommand) 等帖子都给出 404 错误。然后我添加了这个：

routes.IgnoreRoute("{ *allsvc}", new { allsvc = @"..svc* (/.*)?" });

现在可以调用站点根目录中的 SVC 文件。但是，API 子文件夹中的 SVC 文件现在返回：

```
<Error>
    <Message>
     No HTTP resource was found that matches the request URI 'http://mysite/API/myservice.svc/DoCommand'.
    </Message>
</Error> 
```

如果我不包括 DoCommand，那么我会得到标准的 WCF 信息屏幕。

哦，最后，这只发生在 prod 中——在开发中，与 localhost 对抗，一切正常。

非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T23:13:31.263

答案就在这里[MVC4 上的服务堆栈](https://stackoverflow.com/questions/12361860/service-stack-on-mvc4)

问题是我的子文件夹称为 Api，它与随 MVC 一起安装的 WebApi 基础设施附带的 Api 命名冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T20:56:22.053

您是否尝试过`relaxedUrlToFileSystemMapping="true"`按照[Phil Haack](http://haacked.com/archive/2010/04/29/allowing-reserved-filenames-in-URLs.aspx)`web.config`的详细说明进行设置。请参阅此相关问题：[ApiController 在 ID 包含句点时返回 404](https://stackoverflow.com/questions/13298542/apicontroller-returns-404-when-id-contains-period/13299995#13299995)

# c# - P/Invoke 在 Mono 上动态加载库

> ID：13461989
> 
> 赞同：13
> 
> 时间：2012-11-19T20:50:56.560
> 
> 标签：c#, mono, pinvoke, unmanaged

我正在编写一个使用一些非托管代码的跨平台 .NET 库。在我的类的静态构造函数中，检测到平台并从嵌入式资源中提取适当的非托管库并保存到临时目录，类似于[另一个 stackoverflow 答案](https://stackoverflow.com/a/768429/358336)中给出的代码。

因此，当它不在 PATH 中时可以找到该库，我在将其保存到临时文件后显式加载它。在 Windows 上，这适用`LoadLibrary`于 kernel32.dll。我正在尝试`dlopen`在 Linux 上做同样的事情，但`DllNotFoundException`稍后在加载 P/Invoke 方法时会遇到问题。

我已验证库“libindexfile.so”已成功保存到临时目录并且调用`dlopen`成功。我深入研究了[单声道源](https://github.com/mono/mono/blob/1429f06a9e3baf56245ec2433dcdb77e76eba684/mono/metadata/loader.c#L565)以试图弄清楚发生了什么，我认为这可能归结为后续调用`dlopen`是否只会重用先前加载的库。（当然假设我天真地通过单声道来源得出了正确的结论）。

这是我正在尝试做的形状：

```
// actual function that we're going to p/invoke to
[DllImport("indexfile")]
private static extern IntPtr openIndex(string pathname);

const int RTLD_NOW = 2; // for dlopen's flags
const int RTLD_GLOBAL = 8;

// its okay to have imports for the wrong platforms here
// because nothing will complain until I try to use the
// function
[DllImport("libdl.so")]
static extern IntPtr dlopen(string filename, int flags);

[DllImport("kernel32.dll")]
static extern IntPtr LoadLibrary(string filename);

static IndexFile()
{
    string libName = "";

    if (IsLinux)
        libName += "libindexfile.so";
    else
        libName += "indexfile.dll";

    // [snip] -- save embedded resource to temp dir

    IntPtr handle = IntPtr.Zero;

    if (IsLinux)
        handle = dlopen(libPath, RTLD_NOW|RTLD_GLOBAL);
    else
        handle = LoadLibrary(libPath);

    if (handle == IntPtr.Zero)
        throw new InvalidOperationException("Couldn't load the unmanaged library");
}

public IndexFile(String path)
{
    // P/Invoke to the unmanaged function
    // currently on Linux this throws a DllNotFoundException
    // works on Windows
    IntPtr ptr = openIndex(path);
} 
```

* * *

**更新：**

看起来随后`LoadLibrary`对 windows 的调用会查看是否已经加载了同名的 dll，然后使用该路径。例如，在以下代码中，两个调用都`LoadLibrary`将返回一个有效句柄：

```
int _tmain(int argc, _TCHAR* argv[])
{
    LPCTSTR libpath = L"D:\\some\\path\\to\\library.dll";

    HMODULE handle1 = LoadLibrary(libpath);
    printf("Handle: %x\n", handle1);

    HMODULE handle2 = LoadLibrary(L"library.dll");
    printf("Handle: %x\n", handle2);

    return 0;
} 
```

如果在 Linux 上尝试相同`dlopen`，第二次调用将失败，因为它不假定具有相同名称的库将位于同一路径。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-21T11:50:33.417

经过大量搜索和挠头，我发现了一个解决方案。[通过使用动态 P/Invoke](http://blogs.msdn.com/b/junfeng/archive/2004/07/14/181932.aspx)告诉运行时在哪里可以找到代码，可以对 P/Invoke 过程进行完全控制。

* * *

**编辑：**

## 视窗解决方案

你需要这些进口：

```
[DllImport("kernel32.dll")]
protected static extern IntPtr LoadLibrary(string filename);

[DllImport("kernel32.dll")]
protected static extern IntPtr GetProcAddress(IntPtr hModule, string procname); 
```

非托管库应通过调用加载`LoadLibrary`：

```
IntPtr moduleHandle = LoadLibrary("path/to/library.dll"); 
```

通过调用获取指向 dll 中函数的指针`GetProcAddress`：

```
IntPtr ptr = GetProcAddress(moduleHandle, methodName); 
```

将此`ptr`转换为类型的委托`TDelegate`：

```
TDelegate func = Marshal.GetDelegateForFunctionPointer(
    ptr, typeof(TDelegate)) as TDelegate; 
```

## Linux 解决方案

使用这些导入：

```
[DllImport("libdl.so")]
protected static extern IntPtr dlopen(string filename, int flags);

[DllImport("libdl.so")]
protected static extern IntPtr dlsym(IntPtr handle, string symbol);

const int RTLD_NOW = 2; // for dlopen's flags 
```

加载库：

```
IntPtr moduleHandle = dlopen(modulePath, RTLD_NOW); 
```

获取函数指针：

```
IntPtr ptr = dlsym(moduleHandle, methodName); 
```

像以前一样将其转换为委托：

```
TDelegate func = Marshal.GetDelegateForFunctionPointer(
    ptr, typeof(TDelegate)) as TDelegate; 
```

* * *

有关我编写的帮助程序库，请参阅[我的 GitHub](https://github.com/gordonmleigh/Stugo.Interop)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T22:22:37.867

尝试从终端像这样运行它：

```
export MONO_LOG_LEVEL=debug
export MONO_LOG_MASK=dll
mono --debug yourapp.exe 
```

现在每个库查找都将打印到终端，因此您将能够找出问题所在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-09T15:03:25.400

我需要加载一个提取到临时位置的本机库，我*几乎*找到了解决方案。我检查了 Mono 的源代码并找到了一种方法：

```
[DllImport("__Internal", CharSet = CharSet.Ansi)]
private static extern void mono_dllmap_insert(IntPtr assembly, string dll, string func, string tdll, string tfunc);

// and then somewhere:
mono_dllmap_insert(IntPtr.Zero, "somelib", null, "/path/to/libsomelib.so", null); 
```

这种作品。问题是，你不能让 Mono 愚蠢的 JIT 编译器在调用`mono_dllmap_insert()`.

因为如果真的发生了，就会发生奇怪的事情：

```
Mono: DllImport searching in: '/tmp/yc1ja5g7.emu/libsomelib.so' ('/tmp/yc1ja5g7.emu/libsomelib.so').
Mono: Searching for 'someGreatFunc'.
Mono: Probing 'someGreatFunc'.
Mono: Found as 'someGreatFunc'.
Error. ex=System.DllNotFoundException: somelib 
```

所以现在我调用我的 native `someGreatFunc()`，Mono 能够找到库并加载它（我检查过），它能够找到符号（我检查过），但是因为过去它在执行 JIT 时是无法加载该库，它还是决定抛出`DllNotFoundException`。我猜生成的代码包含一个硬编码的 throw 语句或其他东西：-O

当您从同一个库中调用另一个在您调用之前恰好没有经过 JITted 的本机函数时`mono_dllmap_insert()`，它将起作用。

因此，您可以使用@gordonmleigh 添加的手动解决方案，或者您必须在它 JIT 任何这些导入之前告诉 Mono 库在哪里。反思可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T09:48:29.773

不知道为什么您认为这与单声道有关，因为您遇到的问题与单声道的动态加载设施无关。

如果您更新的示例有效，则仅意味着 Windows 上的 LoadLibrary() 与 Linux 上的 dlopen() 具有不同的语义：因此，您要么必须忍受差异，要么实现自己的抽象来处理目录问题（我的直觉是它不是保留的目录，而是 windows 只是查看是否已经加载了同名的库并重用它）。

# vba - 为多个组合框触发相同的事件处理程序

> ID：13461991
> 
> 赞同：1
> 
> 时间：2012-11-19T20:50:56.997
> 
> 标签：vba, excel

有没有一种方法可以将相同的 Onchange 事件处理程序分配给多个 Activex 组合框，而不是为每个组合框复制处理程序，例如 CmbBox1_change()、CmbBox2_change()，所有这些都做同样的事情

使用表单控件时，我可以将相同的宏分配给多个组合框

# validation - 一般：如何验证提出的系统架构？

> ID：13461992
> 
> 赞同：-1
> 
> 时间：2012-11-19T20:50:57.440
> 
> 标签：validation, architecture, embedded, system

美好的一天，我要接手一个开始定义硬件/软件通信工具架构的人。在编写所有规范并实施之前，我现在负责验证他的进度。

我该如何正式进行？是否有一种方法可以根据最初的顶级需求来验证 HW/SW 架构？

干杯，Funky24

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:33:36.367

通常，如果您的架构满足对您的涉众在架构上具有重要意义的一组顶级需求，那么您的架构就是“有效的”。

我的意思是：

1.  最好不要假设您的需求列表是完整的或者它们已经正确编写。
2.  您需要选择最重要的需求并专注于这些需求。

一般来说，第 2 点的列表通常包括大多数非功能性需求（性能、可用​​性等）。功能需求当然很重要，但它们并不驱动系统的架构。

架构评估的一个很好的正式方法是SEI 的[ATAM](http://en.wikipedia.org/wiki/Architecture_tradeoff_analysis_method)（架构权衡分析方法）。您可以查看他们的[技术报告](http://www.sei.cmu.edu/reports/00tr004.pdf)，并根据您的需求和项目规模对其进行调整。由于您尚未设计设计，因此您最终可能会进行一些*逆向工程*以找出做出某些选择的原因。

# java - Java Applet 大小行为与 JFrame 大小行为

> ID：13461993
> 
> 赞同：2
> 
> 时间：2012-11-19T20:51:00.600
> 
> 标签：java, swing, applet, jframe, layout-manager

![在此处输入图像描述](../Images/9ada65fecaf91edc4e5f635fb45f7acd.png) *

> (图例) Blue-mainpanel, Red-upanel, Black-ulpanel, Green-urpanel

* 所以我对 Applet 和 JFrame 有相同的代码。如您所见，在 `setsize() 相同的情况下，它们都会产生不同的结果。我无法弄清楚如何使我的 Applet 以相同的方式运行。

```
 import java.applet.Applet;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.GridLayout;
import java.awt.Insets;

import javax.swing.BorderFactory;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JTextField;

public class Test2 extends Applet {

    JPanel mainpanel = new JPanel();
    JPanel upanel = new JPanel();
    JPanel dpanel = new JPanel();
    JPanel ulpanel = new JPanel();
    JPanel urpanel = new JPanel(); 
    JPanel dlpanel = new JPanel();
    JPanel drpanel = new JPanel();

    JLabel l1 = new JLabel("Label 1");
    JLabel l2 = new JLabel("Label 2");
    JLabel l3 = new JLabel("Label 3");
    JLabel l4 = new JLabel("Label 4");

    JTextField tb1 = new JTextField();
    JTextField tb2 = new JTextField();
    JTextField tb3 = new JTextField();

    JTextArea ta1 = new JTextArea();

    public void init() {

        mainpanel.setBorder(BorderFactory.createLineBorder(Color.blue, 2));
        ulpanel.setBorder(BorderFactory.createLineBorder(Color.black, 2));
        urpanel.setBorder(BorderFactory.createLineBorder(Color.green, 2));
        upanel.setBorder(BorderFactory.createLineBorder(Color.red, 2));
        mainpanel.setLayout(new GridLayout(1, 1));
        upanel.setLayout(new GridLayout(1, 2));
        urpanel.setLayout(new BorderLayout());
        urpanel.add(ta1,BorderLayout.CENTER);
        ulpanel.setLayout(new GridBagLayout());
        GridBagConstraints g = new GridBagConstraints();
        g.ipadx = 2;
        g.ipady = 2;
        g.insets = new Insets(2, 2, 2, 2);
//      g.anchor = GridBagConstraints.EAST;
        g.gridx = 0; g.gridy = 0;
        ulpanel.add(l1, g);
        g.gridx = 0; g.gridy = 1;
        ulpanel.add(l2, g);
        g.gridx = 2; g.gridy = 1;
        ulpanel.add(l3, g);
        g.gridx = 0; g.gridy = 2;
        ulpanel.add(l4, g);

        g.gridwidth = GridBagConstraints.REMAINDER;
        g.fill = GridBagConstraints.HORIZONTAL;
//      g.anchor = GridBagConstraints.WEST;
        g.weightx = 1;
        g.gridx = 1; g.gridy = 0;
        ulpanel.add(tb1, g);
        g.gridwidth = 1;
        g.gridx = 1; g.gridy = 1;
        ulpanel.add(tb2,g);
        g.gridx = 3; g.gridy = 1;
        ulpanel.add(tb3,g);

        upanel.add(ulpanel);
        upanel.add(urpanel);
        mainpanel.add(upanel);
        add(mainpanel);

    }
} 
```

我尝试将 Applet 嵌入 HTML 并在其中指定大小，但仍然只有 Applet 的外部“外壳”采用该外壳，而不是我添加到 Applet 上的内部面板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:19:43.507

+1 为 SSCCE

1）我不会将 Swing 组件与 AWT 混合使用，`Applet`而是使用`JApplet`。

```
public class Test2 extends JApplet { 
```

2) 使用`SwingUtilities.invokeAndWait()`block 将您的 UI 创建包装在覆盖中，`init()` [请参见此处](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)。

像这样（省略异常处理）。

```
@Override
public void init() {
    try {
        SwingUtilities.invokeAndWait(new Runnable() {
            @Override
            public void run() {
            //create UI here
            }
        });
} 
```

似乎它对我有用还是我错过了什么？：

![在此处输入图像描述](../Images/bf7fd105131ddc167fe0f56ad9b9af39.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.GridLayout;
import java.awt.Insets;
import java.lang.reflect.InvocationTargetException;
import javax.swing.BorderFactory;
import javax.swing.JApplet;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class Test extends JApplet {

    JPanel mainpanel = new JPanel();
    JPanel upanel = new JPanel();
    JPanel dpanel = new JPanel();
    JPanel ulpanel = new JPanel();
    JPanel urpanel = new JPanel();
    JPanel dlpanel = new JPanel();
    JPanel drpanel = new JPanel();
    JLabel l1 = new JLabel("Label 1");
    JLabel l2 = new JLabel("Label 2");
    JLabel l3 = new JLabel("Label 3");
    JLabel l4 = new JLabel("Label 4");
    JTextField tb1 = new JTextField();
    JTextField tb2 = new JTextField();
    JTextField tb3 = new JTextField();
    JTextArea ta1 = new JTextArea();

    @Override
    public void init() {
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                @Override
                public void run() {
                    initComponents();
                }
            });
        } catch (InterruptedException ex) {
            ex.printStackTrace();
        } catch (InvocationTargetException ex) {
            ex.printStackTrace();
        }
    }

    private void initComponents() {
        mainpanel.setBorder(BorderFactory.createLineBorder(Color.blue, 2));
        ulpanel.setBorder(BorderFactory.createLineBorder(Color.black, 2));
        urpanel.setBorder(BorderFactory.createLineBorder(Color.green, 2));
        upanel.setBorder(BorderFactory.createLineBorder(Color.red, 2));
        mainpanel.setLayout(new GridLayout(1, 1));
        upanel.setLayout(new GridLayout(1, 2));
        urpanel.setLayout(new BorderLayout());
        urpanel.add(ta1, BorderLayout.CENTER);
        ulpanel.setLayout(new GridBagLayout());
        GridBagConstraints g = new GridBagConstraints();
        g.ipadx = 2;
        g.ipady = 2;
        g.insets = new Insets(2, 2, 2, 2);
        //      g.anchor = GridBagConstraints.EAST;
        g.gridx = 0;
        g.gridy = 0;
        ulpanel.add(l1, g);
        g.gridx = 0;
        g.gridy = 1;
        ulpanel.add(l2, g);
        g.gridx = 2;
        g.gridy = 1;
        ulpanel.add(l3, g);
        g.gridx = 0;
        g.gridy = 2;
        ulpanel.add(l4, g);

        g.gridwidth = GridBagConstraints.REMAINDER;
        g.fill = GridBagConstraints.HORIZONTAL;
        //      g.anchor = GridBagConstraints.WEST;
        g.weightx = 1;
        g.gridx = 1;
        g.gridy = 0;
        ulpanel.add(tb1, g);
        g.gridwidth = 1;
        g.gridx = 1;
        g.gridy = 1;
        ulpanel.add(tb2, g);
        g.gridx = 3;
        g.gridy = 1;
        ulpanel.add(tb3, g);

        upanel.add(ulpanel);
        upanel.add(urpanel);
        mainpanel.add(upanel);
        add(mainpanel);
    }
} 
```

**更新**

我看到（在阅读@AndrewThompson 评论后）您可能在谈论大小以及为什么所有东西都被压扁了？正如他所说，`JFrame`您可以设置大小或调用`pack()`，这将设置框架的大小以适合其组件。

对于`Applet`/`JApplet`但是，您将通过 HTML 启动器更改大小。在 HTML 中找到它并根据需要进行更改：

```
 <applet width="600" height="600">         <!-- ALTER WIDTH AND HEIGHT HERE -->
        <param name="jnlp_href" value="launch.jnlp"/>
    </applet> 
```

也可能有这个也需要改变：

```
 <script>
        var attributes = {
            code:       "Test",
            archive:    "TestJApplet.jar",
            width:      600,            <!-- ALTER WIDTH HERE -->
            height:     600             <!-- ALTER HEIGHT HERE -->
        };
        var parameters = {jnlp_href:"launch.jnlp"}; <!-- Applet Parameters -->
        var version = "1.7"; <!-- Required Java Version -->
        deployJava.runApplet(attributes, parameters, version);
    </script> 
```

# jquery - jquery 与 IE 的兼容性——点击功能和淡入淡出

> ID：13461994
> 
> 赞同：0
> 
> 时间：2012-11-19T20:51:04.877
> 
> 标签：jquery, internet-explorer

这是我的脚本：http: [//jsfiddle.net/3XwZv/153/](http://jsfiddle.net/3XwZv/153/)

**HTML**

```
<div id="box1" class="choice" style="background:blue;">
    <div class="selection ordinateur">
        <div class="choix1"><a class="link1" href="#"></a></div>
    </div>
</div>

<div id="box2" class="choice" style="display:none;background:red;">
    <div class="selection ordinateur">
        <div class="choix1"><a class="link2" href="#"></a></div>
    </div>
</div>

<div id="box3" class="choice" style="display:none;background:green;">
    <div class="selection ordinateur">
        <div class="choix1"><a href="#"></a></div>
    </div>
</div> 
```

**JS**

```
$(".link1").click(function() {
    $('#box1').fadeOut("slow", function(){
        $('#box2').css("display","block");
        $('#box2').replaceWith(div);

       $('#box1').fadeIn("slow");
    });
    $('.link1').fadeOut("slow");
    return false;
});

$(".link2").click(function() {
    $('#box2').fadeOut("slow", function(){
        $('#box3').css("display","block");
        $('#box3').replaceWith(div);

       $('#box2').fadeIn("slow");
    });
    $('.link2').fadeOut("slow");
    return false;
}); 
```

主要目标是当你点击巨大的方块时，我有三个不同的动作。但是，在 Internet Explorer 中，我阻止了第二个。（红色方块不去绿色方块）。
请我需要你们的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:54:25.453

`show()`我通过使用 jquery和`hide()`函数显示和隐藏它来修改 div 可见性。我更新了下面的小提琴。

[http://jsfiddle.net/VP8ub/2/](http://jsfiddle.net/VP8ub/2/)

希望这就是你所需要的。我在 IE9 中进行了测试，它运行良好。