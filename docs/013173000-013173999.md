# StackOverflow 问答 13173000-13173999

# javascript - 将 : 和 => 用于 TypeScript 函数的返回类型有什么区别？

> ID：13173001
> 
> 赞同：7
> 
> 时间：2012-11-01T07:50:24.470
> 
> 标签：javascript, jquery, typescript

我有以下代码：

```
///<reference path="../typescript/jquery.d.ts" />
function addThemePrototypes() {
    var templateSetup = new Array();
    $.fn.addTemplateSetup = function(func, prioritary)
    {
        if (prioritary)
        {
            templateSetup.unshift(func);
        }
        else
        {
            templateSetup.push(func);
        }
    };
} 
```

有人能告诉我为什么应该用 => void 声明它吗？

```
interface JQuery {
    addTemplateSetup: (func: Function, priority: bool) =>void;
} 
```

我想我对如何从 javascript 函数执行 returntype 有点困惑。有时我看到：jQuery，现在我看到 => void。两者有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T09:36:19.060

在您的示例中，它们都使用冒号声明...

让我们把它分成两半！

没有类型声明...

```
interface JQuery {
    addTemplateSetup
} 
```

类型声明...

```
: (func: Function, priority: bool) =>void; 
```

如果你用这个词`is`代替`:`它就像说

> 名为“addTemplateSetUp”的属性：接受两个特定类型参数但不返回值的函数

这是一个示例，其中有两个实际上相同的接口，但一个使用 the `=>`，一个不使用。TypeScript 对两者的处理方式相同，因此这实际上取决于开发人员的偏好。

```
interface JQuery {
    addTemplateSetup: (func: Function, priority: bool) =>void;
}

interface Identical {
    addTemplateSetup(func: Function, priority: bool): void;
}

class ImplementsEither implements JQuery {
    addTemplateSetup (func: Function, priority: bool) : void {

    }
} 
```

`=>`如果您喜欢几乎用英文阅读，您可以使用样式声明。

如果您希望您的界面看起来更像实现，您可以使用第二种样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:54:57.880

它是关于函数返回什么的信息。它是返回一个 jQuery 对象（带有 JQuery 接口）还是一个不返回任何内容的 void 函数？

```
$("#someId").addTemplateSetup(); 
```

在您的示例中，您不返回任何内容，因此“void”是正确的。但是，如果您在 javascript 函数中返回“this”，这很常见，为了保持 jQuery 可链接性，您应该声明它返回 => JQuery;

```
$("#someId").addTemplateSetup().Show(); 
```

# jquery - 启用/禁用选择是否选中无线电

> ID：13173004
> 
> 赞同：0
> 
> 时间：2012-11-01T07:50:41.633
> 
> 标签：jquery, html

在我的 HTML 中，我想检查单选按钮的状态，看看它们是启用还是禁用。我有这个 HTML 结构：

```
 <table>
                        <tr>
                            <td style="width:20px;">
                                <input type="radio" id="rdoLevel" name="rdoSelect"/>
                            </td>
                            <td>ارسال براساس مقطع : </td>
                            <td>
                                <asp:DropDownList ID="ddlTypeLevel" runat="server" ClientIDMode="Static" Enabled="False">
                                    <asp:ListItem></asp:ListItem>
                                    <asp:ListItem>ابتدایی</asp:ListItem>
                                    <asp:ListItem>راهنمایی</asp:ListItem>
                                    <asp:ListItem>دبیرستان</asp:ListItem>
                                    <asp:ListItem>پیش دانشگاهی</asp:ListItem>
                                    <asp:ListItem>دانشگاه</asp:ListItem>
                                </asp:DropDownList>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="radio" id="rdoBase" name="rdoSelect"/>
                            </td>
                            <td>ارسال براساس پایه :</td>
                            <td>
                                <asp:DropDownList ID="ddlTypeBase" runat="server" ClientIDMode="Static"  Enabled="False">
                                    <asp:ListItem></asp:ListItem>
                                    <asp:ListItem>اول</asp:ListItem>
                                    <asp:ListItem>دوم</asp:ListItem>
                                    <asp:ListItem>سوم</asp:ListItem>
                                </asp:DropDownList>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="radio" id="rdoSchool" name="rdoSelect" />
                            </td>
                            <td>ارسال براساس مدرسه :</td>
                            <td>
                                <asp:TextBox ID="txtSchooNameType" runat="server" ClientIDMode="Static"  Enabled="False"></asp:TextBox>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="radio" id="rdoTypeRegistre" name="rdoSelect"/>
                            </td>
                            <td>ارسال براساس نوع ثبت نام :</td>
                            <td>
                                <asp:DropDownList ID="ddlTypeRegister" runat="server" ClientIDMode="Static" 
                                    Enabled="False">
                                    <asp:ListItem></asp:ListItem>
                                    <asp:ListItem>ثبت نام</asp:ListItem>
                                    <asp:ListItem>پیش ثبت نام</asp:ListItem>
                                </asp:DropDownList>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="3">
                                <asp:Button ID="btnSendByCategory" Enabled="false" runat="server" CssClass="btn btn-small rtl"
                                    Text="ارسال" />
                            </td>
                        </tr>
                    </table> 
```

我使用这个 jquery 代码来检查状态：

```
$("input:radio").click(function () {
    var id = $(this).attr("id");
    var ddlTypeLevel = $("#ddlTypeLevel");
    if (id == "rdoLevel") {
        if ($(this).is(':checked')) {
            $('select#ddlTypeLevel').prop('disabled', false);
        } else if ($(this).not(':checked')) {
            $('select#ddlTypeLevel').prop('disabled', true);
        }
    }
    else if (id == "rdoBase") {
        if ($(this).is(':checked')) {
            $('select#ddlTypeBase').prop('disabled', false);
        } else if ($(this).not(':checked')) {
            $('select#ddlTypeBase').prop('disabled', true);
        }
    }
    else if (id == "rdoSchool") {
        if ($(this).is(':checked')) {
            $('#txtSchooNameType').prop('disabled', false);
        } else if ($(this).not(':checked')) {
            $('#txtSchooNameType').prop('disabled', true);
        }
    }
    else if (id == "rdoTypeRegistre") {
        if ($(this).is(':checked')) {
            $('select#ddlTypeRegister').prop('disabled', false);
        } else if ($(this).not(':checked')) {
            $('select#ddlTypeRegister').prop('disabled', true);
        }
    }
}); 
```

但是上面的代码不起作用。只有启用检查有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T07:54:05.590

`not`不返回布尔值，您可以使用否定运算符：

```
} else if (!$(this).is(':checked')) { 
```

此外，当未选中收音机时，它也未选中，因此无需再次检查状态。

```
$("input[type=radio]").change(function () {
    var id = this.id.replace('rdo', ''); 
    $('#ddlType'+id).prop('disabled', !this.checked);     
}); 
```

根据您当前的逻辑，您可以缩小代码。请注意，`:radio`选择器已弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:10:21.353

使用`attr`而不是`prop`禁用元素。

此外，您可以在函数开始时禁用所有元素，然后仅启用与所选单选按钮对应的元素。

您的代码可能如下所示：

```
$("input:radio").click(function () {
    var id = $(this).attr("id");

    $('select').attr('disabled', 'true');

    if (id == "rdoLevel") {
        if ($(this).is(':checked')) {
            $('select#ddlTypeLevel').attr('disabled', false);
        }
    }
    else if (id == "rdoBase") {
        if ($(this).is(':checked')) {
            $('select#ddlTypeBase').attr('disabled', false);
        }
    }
    else if (id == "rdoSchool") {
        if ($(this).is(':checked')) {
            $('#txtSchooNameType').attr('disabled', false);
        }
    }
    else if (id == "rdoTypeRegistre") {
        if ($(this).is(':checked')) {
            $('select#ddlTypeRegister').attr('disabled', false);
        }
    }
});​ 
```

**这是一个工作示例：http: [//jsfiddle.net/bujkw/2/](http://jsfiddle.net/bujkw/2/)**

* * *

`if(enabled){}else if(not enabled){}`另外，我注意到的另一件事：您可以简单地做而不是您的方法`if(enabled){}else{}`。

具体来说，而不是

```
if (id == "rdoLevel") {
    if ($(this).is(':checked')) {
        $('select#ddlTypeLevel').prop('disabled', false);
    } else if ($(this).not(':checked')) {
        $('select#ddlTypeLevel').prop('disabled', true);
    }
} 
```

你可以简单地写

```
if (id == "rdoLevel") {
    if ($(this).is(':checked')) {
        $('select#ddlTypeLevel').prop('disabled', false);
    } else {
        $('select#ddlTypeLevel').prop('disabled', true);
    }
} 
```

这样代码就更简单了，并且避免了使用不正确的问题，正如[他的回答](https://stackoverflow.com/a/13173058/390819)[`not`](http://api.jquery.com/not-selector/)中未定义所指出的那样。

# javascript - 在 Javascript 中捕获不同操作系统上的撤消、重做和其他关键事件

> ID：13173005
> 
> 赞同：3
> 
> 时间：2012-11-01T07:50:42.147
> 
> 标签：javascript, events, dom-events, keyevent

是否有任何库可以捕获任何操作系统上的关键事件并根据执行的操作调用处理程序？

例如，`undo`在 Windows 上是`cntrl`+ `z`，但在 mac 上是`appleKey/commandkey`+ `z`。

所以我的问题是是否有任何库可以在 Windows 和 Mac 上调用我的撤消处理程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T09:15:14.990

捕鼠器似乎是一个很好的起点。从那里，您可以检测 Apple 密钥（“命令”）和不同的序列，并创建自己的自定义别名。应该不会太难。:-)

[http://craig.is/killing/mice](http://craig.is/killing/mice)

# php - 我的带有 ajax 的 Codeigniter 表单返回所有页面

> ID：13173007
> 
> 赞同：0
> 
> 时间：2012-11-01T07:50:41.847
> 
> 标签：php, javascript, ajax, codeigniter

在我的项目中，我使用 ajax 来处理表单。现在我想获取要处理的 Post 数据。当不允许使用 Jquery 时，我使用 Javascript。但是 Ajax 返回整个页面，我该如何解决。

我的控制器：

```
class Form extends Controller {

    function __construct() {
        parent :: __construct();
        $this->load->model('Form_model');
    }

    function index() {
       $this->loadForm();

    }

    function loadForm() {
        $this->load->view('form_view');
    }

    function ajax_add_form_content() {

        if (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && $_SERVER['HTTP_X_REQUESTED_WITH'] == "XMLHttpRequest") {
            echo $_POST['fullname'] . '+' . $_POST['subject'];
        } else {
            echo '0';
        }
    }

} 
```

我的观点：

```
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Form view</title>

    <script language="JavaScript" type="text/javascript">

        function ajax_post(){

            var hr = new XMLHttpRequest();

            var url = "<?php echo base_url().'index.php/form/ajax_add_form_content'?>";
            var fn = document.getElementById("txtFullName").value;
            var ln = document.getElementById("txtSubject").value;
            var vars = "fullname="+fn+"&subject="+ln;
            hr.open("POST", url, true);

            hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

            hr.onreadystatechange = function() {
                if(hr.readyState == 4 && hr.status == 200) {
                    var return_data = hr.responseText;
                    document.getElementById("status").innerHTML = return_data;
                }
            }

            hr.send(vars); 
            document.getElementById("status").innerHTML = "processing...";
            return false;
        }

    </script>

</head>
<body>
    <div id="form">
        <span id='status' ></span>
        <form class="form" method="post">
            <p class="formName">contact</p>
            <p class="formDesc">contact us</p>
            <div class="form_elements">
                <div class="textField">
                    <label>Full name</label>
                    <input id="txtFullName" class="inputText required" type="text" maxlength="255" size="28" name="txtFullName">

                </div>

                <div class="textField">
                    <label>Subject</label>
                    <input id="txtSubject" class="inputText required" type="text" maxlength="255" size="28" name="txtSubject">

                </div>

            </div>
            <div class="form_submit">
                <input id="btnSubmit" type="submit" value="Send" name="btnSubmit" onClick="javascript:ajax_post();">
            </div>
        </form>
        <div id='display'>
        </div>

    </div>
</div>
</body>
</html> 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:57:21.930

我建议您使用 ie Chrome 检查器来查看您是否将请求发送到正确的 url。

`$_SERVER`此外，您可以使用 CI 库中的方法，而不是使用变量`$this->input->is_ajax_request()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:26:12.487

请试试这个

在你的控制器中

```
function ajax_add_form_content() {

        if (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && $_SERVER['HTTP_X_REQUESTED_WITH'] == "XMLHttpRequest") {
            echo $_POST['fullname'] . '+' . $_POST['subject'];
        } else {
            echo '0';
        }
  exit;
    } 
```

# c# - C#远程网关/委托Transparentproxy

> ID：13173019
> 
> 赞同：1
> 
> 时间：2012-11-01T07:51:20.117
> 
> 标签：c#, .net, remoting

我想获得一些背景信息，但无法找到它。我的场景：

我有一个远程服务器：

```
public interface IServer
{
    IWorker GetWorker(string strID);
    void Register(IWorker worker);
} 
```

我有一些“工人”-应用程序

```
public interface IWorker
{
    string ID { get; }
    void Work(string strData);
} 
```

服务器启动工作进程，它们获得远程引用并在服务器上注册。服务器将透明代理存储在一个集合中。

现在客户端连接到服务器，请求一个 Worker。服务器返回透明代理。

一切正常。但是发生了什么？客户端在调用worker上的方法时是否与服务器通信，而服务器与worker通信？那么服务器充当“网关”还是客户端能够直接与工作人员通信？

我使用 IPC 和 TCP 一样吗？

# java - 有没有办法直接在 Java 中使用 Linux 命令

> ID：13173020
> 
> 赞同：-1
> 
> 时间：2012-11-01T07:51:19.983
> 
> 标签：java, linux, grep

我想在我的 java 程序中使用 Linux grep 进行搜索，因为 grep 的性能令人满意。但我不想用`Runtime.getRuntime().exec()`操作系统的命令来调用它。因此我下载了 grep-2.9 源代码，但现在我不知道如何将该代码集成到我的 java 应用程序中。有没有办法直接使用 grep 或其他 linux 命令，而不是从操作系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T07:55:40.597

我认为你最好试试这个：[Grep4J](http://code.google.com/p/grep4j/)

另一种可能的替代方法是使用语言库支持的 groovy

这两种方法都比从 Java 运行特定于 linux 的实用程序更好。

希望这可以帮助

# android - onCreate方法中的屏幕截图在android中不起作用

> ID：13173022
> 
> 赞同：3
> 
> 时间：2012-11-01T07:51:27.330
> 
> 标签：android

我在一个 android 应用程序中工作，我想在 Overrided 方法 onCreate() 中捕获当前活动的屏幕。当我在 Overrided 方法 onCreate() 中编写用于捕获屏幕的代码时，位图返回 null。但是，当我在同一个活动中单击按钮中调用相同的代码时，位图会返回正确的值。请更正我的代码以在我的 ocCreate() 方法本身中按位图返回。

我的代码是：

```
View v1 = findViewById(R.id.printpreviewBaseScrollView);
v1.setDrawingCacheEnabled(true);
Bitmap bmv = v1.getDrawingCache(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:13:28.363

```
View printlayout = findViewById(R.id.printpreviewBaseRelativeLayout);
        printlayout.setDrawingCacheEnabled(true);

        printlayout.measure(printlayout.getMeasuredWidth(),
                printlayout.getMeasuredHeight());

         printlayout.layout(0, 0, 700, 1755);

        Log.e("width", "" + printlayout.getMeasuredWidth());
        Log.e("hight", "" + printlayout.getMeasuredHeight());

        printlayout.buildDrawingCache(true);

        bitmap = Bitmap.createBitmap(printlayout.getDrawingCache());
        printlayout.setDrawingCacheEnabled(false); // clear drawing cache 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:01:03.327

您必须在 onCreate 之后执行此操作。在 onCreate 期间，您的布局被测量和膨胀，但您的 UI 尚未创建。请参阅 Activity 生命周期文档：

[http://developer.android.com/training/basics/activity-lifecycle/starting.html](http://developer.android.com/training/basics/activity-lifecycle/starting.html)

```
@Override
public void onStart(){
     View v1 = findViewById(R.id.printpreviewBaseScrollView);
     v1.setDrawingCacheEnabled(true);
     Bitmap bmv = v1.getDrawingCache();
} 
```

我刚刚复制并粘贴了您的代码。您可能应该将 v1 设为类级别变量，在 onCreate() 中设置它的引用，然后在 onStart() 中获取位图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T08:01:12.060

创建方法调用 void screenshot(){ 你的 btimap 代码 } Onactivity 调用 screenshot();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T08:03:11.607

正如“onCreate()”方法所暗示的那样，您的活动将在此时创建。因此，此时您无法进行屏幕截图。在“onResume()”中尝试您的代码：

```
...
@Override
public void onResume(){
    View v1 = findViewById(R.id.printpreviewBaseScrollView);
    v1.setDrawingCacheEnabled(true);
    Bitmap bmv = v1.getDrawingCache();
}
... 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-01T08:02:32.107

根据android的文档

> 活动的**可见生命周期**发生在对 onStart() 的调用与对 onStop() 的相应调用之间。在此期间，用户可以在屏幕上看到活动，尽管它可能不在前台并与用户交互。

![在此处输入图像描述](../Images/759865b8886e1840f103f1390e5729a7.png)

从上图可以看出，执行**onCreate()**时不在**可见生命周期**内，无法获取截图。

 **将您的代码移动到**onResume()**，它应该在**可见的生命周期中**。**

# javascript - 外部文件中的jquery不起作用

> ID：13173023
> 
> 赞同：2
> 
> 时间：2012-11-01T07:51:27.713
> 
> 标签：javascript, jquery

我有一段 jquery 代码，当我将它加载到我的页面中时它可以工作，但是当我将它放入外部 js 文件时它不起作用。

我的外部 js 文件如下所示：

```
$(document).ready(function() 
{
    $('.list').click(function(e)
    {
        var value = $(this).val();
        $(".select_menu input").val(value);

        $(".select_menu").show();
        $(".select_menu input").focus();
        e.stopImmediatePropagation();
    });

    $('.select_menu, .select_menu input').click(function(e)
    {
        e.stopImmediatePropagation();
        return false;
    });

    $(".select_menu input").bind('keyup', function(e)
    {
        //var e = $(event.target);
        var q = $(this).val();
        var dataName = $(this).attr('data-name');

        $("#type").val(dataName);

        selectMenu(q,dataName,e);
        e.stopImmediatePropagation();
    });

    $(".select_menu input").focus(function(e)
    {
        //var e = $(event.target);
        var q = $(this).val();
        var dataName = $(this).attr('data-name');

        $("#type").val(dataName);

        selectMenu(q,dataName,e);
        e.stopImmediatePropagation();
    });

    $(document).click(function() {
        $(".select_menu").hide();
    });

}); 
```

```
<head>
  <title>Mywebsite</title>

   <!-- stylesheets -->
   <link type="text/css" href="../css/ui-lightness/jquery-ui-1.8.15.custom.css" rel="stylesheet" />
   <link type="text/css" href="../css/green.css" rel="stylesheet" />
   <link type="text/css" href="../css/nav.css" rel="stylesheet" />
   <link type="text/css" href="../css/selectMenu.css" rel="stylesheet" /> 

    <!-- jQuery - the core -->  
    <script type="text/javascript" src="../js/jquery-1.6.2.min.js"></script>
    <script type="text/javascript" src="../js/jquery-ui-1.8.15.custom.min.js"></script>

    <script type="text/javascript" src="../js/menu.js"></script>
    <script type="text/javascript" src="../js/selectMenu.js"></script>

    <!-- Fancybox -->
    <script type="text/javascript" src="../js/fancybox.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/fancybox.css" media="screen" />

    <!-- Asmselect, deze code wordt gebruikt bij het toevoegen van medewerkers aan een bedrijf -->
    <script type="text/javascript" src="../js/jquery.asmselect.js"></script>
    <link type="text/css" href="../css/jquery.asmselect.css" rel="stylesheet" />

</head> 
```

有趣的是，当我将一些自制函数放入文件中时，这些函数可以正常工作。

有人出主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:02:18.053

您的文件应该像这样包含在内

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<script language="javascript" type="text/javascript" src="jquery-1.8.2.js"></script>
<script language="javascript" type="text/javascript" src="yourExternalScripts.js">  
</script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:04:18.070

请检查您是否正确加载了 jquery 文件，然后再加载您的外部 js 文件。正如您所说的那样，您的自定义方法可以正常工作，那么您的浏览器的 javascript 肯定会被激活。所以，如果你正确加载jquery文件并在之后加载你的外部js文件，它肯定会工作

# asp.net - ASP.NET 动态数据不呈现附加属性

> ID：13173026
> 
> 赞同：0
> 
> 时间：2012-11-01T07:51:47.783
> 
> 标签：asp.net, asp.net-dynamic-data

我有一个需要向生成的模型添加属性的情况。基本上我所做的如下：

*   从现有数据库生成实体模型
*   创建了一个与我的实体模型之一具有相同名称和命名空间的部分类
*   我在部分类中添加了一个属性并用以下内容装饰它`[ScaffoldColumn(true)]`：

    ```
    [ScaffoldColumn(true)]
    public String EnglishText
    {
        get
        {
            return this._resourceHelper.GetValue(this.Code, 4, 1);
        }
        set
        {
            this._resourceHelper.SetValue(value, this.Code, 4, 1);
        }
    } 
    ```

但是由于某种原因，该属性没有在视图上呈现。我是否需要做任何其他事情才能告诉 DD 渲染该属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:23:05.543

您必须像对其他属性一样在元数据中指定属性。

```
public class FooMetadata
{
    // other columns in table then your added property
    [Display(Name = "Text")]
    public object EnglishText { get; set; }
} 
```

# python - C 程序可以有 Python GUI 吗？

> ID：13173029
> 
> 赞同：6
> 
> 时间：2012-11-01T07:52:00.423
> 
> 标签：python, c, wxpython, pyqt

我的朋友有一个`C`用 Linux 编写的带有 GUI的应用程序`GTK`。现在我们想用python（`wxpython`或`PyQT`）重写GUI。

我没有使用 Python 的经验，也不知道如何让 Python 与 C 进行通信。我想知道这是否可行，如果可以，我应该如何实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T07:55:10.133

是的，它可以从 Python 调用“C”函数。

请查看 SWIG（已弃用），Python 也提供了自己的可扩展性 API。你可能想调查一下。

还有谷歌 CTypes。

链接：

[Python 扩展](http://docs.python.org/2/extending/extending.html)

一个简单的例子：为此，我在 Windows 上使用了 Cygwin。我在这台机器上的 python 版本是 2.6.8 - 使用 test.py 加载名为“myext.dll”的模块对其进行了测试 - 它工作正常。您可能需要修改`Makefile`以使其在您的机器上工作。

## 原版.h

```
#ifndef _ORIGINAL_H_
#define _ORIGINAL_H_

int _original_print(const char *data);

#endif /*_ORIGINAL_H_*/ 
```

## 原版.c

```
#include <stdio.h>
#include "original.h"

int _original_print(const char *data)
{
  return printf("o: %s",data);
} 
```

## 存根.c

```
#include <Python.h>
#include "original.h"

static PyObject *myext_print(PyObject *, PyObject *);

static PyMethodDef Methods[] = {
  {"printx", myext_print, METH_VARARGS,"Print"},
  {NULL, NULL, 0, NULL}
};

PyMODINIT_FUNC initmyext(void)
{
  PyObject *m;
  m = Py_InitModule("myext",Methods);
}

static PyObject *myext_print(PyObject *self, PyObject *args)
{
  const char *data;
  int no_chars_printed;
  if(!PyArg_ParseTuple(args, "s", &data)){
      return NULL;
  }
    no_chars_printed = _original_print(data);
    return Py_BuildValue("i",no_chars_printed);  
} 
```

## 生成文件

```
PYTHON_INCLUDE = -I/usr/include/python2.6
PYTHON_LIB = -lpython2.6
USER_LIBRARY = -L/usr/lib
GCC = gcc -DNDEBUG -g -O3 -Wall -Wstrict-prototypes -fPIC -DMAJOR_VERSION=1 -DMINOR_VERSION=0 -I/usr/include -I/usr/include/python2.6 

win32 : myext.o
    - gcc -shared myext.o $(USER_LIBRARY) $(PYTHON_LIB) -o myext.dll

linux : myext.o
    - gcc -shared myext.o $(USER_LIBRARY) $(PYTHON_LIB) -o myext.so

myext.o: stub.o original.o
    - ld -r stub.o original.o -o myext.o

stub.o: stub.c
    - $(GCC) -c stub.c -o stub.o

original.o: original.c
    - $(GCC) -c original.c -o original.o

clean: myext.o
    - rm stub.o original.o stub.c~ original.c~ Makefile~ 
```

## 测试.py

```
import myext
myext.printx('hello world') 
```

## 输出

> o：你好世界

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T07:55:18.600

> 抱歉，我没有 Python 经验，所以不知道如何让 Python 与 C 程序通信。

是的，这正是你的做法。将您的 C 代码转换为 Python 模块，然后您就可以用 Python 编写整个 GUI。请参阅[扩展和嵌入 Python 解释器](http://docs.python.org/2/extending/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:22:52.590

If you have an option between C or C#(Sharp) then go with C# and use visual studio, you can build the GUI by dragging and dropping components easy. If you want to do something in python look up **wxPython**. Java has a built in GUI builder known as swing. You'll need some tutorials, but unless this program doesn't need to be portable just go with C# and build it in 10 minutes .

Also, you can write your code in C and export it as a python module which you can load from python. It`s not very complicated to set up some C functions and have a python GUI which calls them. To achieve this you can use **SWIG, Pyrex, BOOST**.

# iphone - CoreData：使用谓词执行获取请求是否总是导致 I/O 读取？

> ID：13173036
> 
> 赞同：0
> 
> 时间：2012-11-01T07:52:30.680
> 
> 标签：iphone, ios, core-data

> **可能重复：**
> [核心数据：获取是否必须访问持久存储？](https://stackoverflow.com/questions/13833529/core-data-does-a-fetch-have-to-make-a-trip-to-persistent-store)

假设我有一个包含我之前获取的实体的所有对象的数组，这将更快地获取具有特殊条件的对象，例如，`attributeX = @"attribute value"`？

1.  与谓词一起使用`NSFetchRequest`并执行它。
2.  通过 objc 快速枚举过滤数组。

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:05:09.340

您缺少选项 3，它使用谓词来过滤数组。这将消除到数据库的往返行程。[Apple 的文档中对此进行了详细说明](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html)。

[`filteredArrayUsingPredicate:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-BAJJDBEB)方法 on`NSArray`是要使用的方法。

# events - 如何在初始化控制器之前替换 Symfony 2.1 中的 uri

> ID：13173039
> 
> 赞同：0
> 
> 时间：2012-11-01T07:52:38.040
> 
> 标签：events, symfony, kernel

我想在启动系统之前替换 uri。

我有路由集合：

/service-actions/{serviceId}/{actionPath}

请求：[http ://domain.com/service-actions/1/iframe](http://domain.com/service-actions/1/iframe)

我想替换完整的uri：

```
http://s{serviceId}.domain.com/{actionPath} 
```

[http://s1.domain.com/iframe](http://s1.domain.com/iframe)

**我尝试：** 根据内核请求创建一个新的事件侦听器，但在事件中不替换请求。

# css - 可能使用@media print .button:hover

> ID：13173045
> 
> 赞同：0
> 
> 时间：2012-11-01T07:52:47.110
> 
> 标签：css

我找到了以下CSS：

```
@media print {
  .button:hover {
    background: #ACDD4A;
  }
} 
```

它的可能用途是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:33:46.300

看起来写这个的人根本不了解[打印](https://en.wikipedia.org/wiki/Printing)的概念——我不知道有任何支持悬停交互的分页媒体:)

即使意图是覆盖`.button:hover`主（屏幕）样式表中的不同规则，它仍然没有用，正如您可能已经猜到的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:54:29.580

print 是为了……在纸上打印，所以你能把鼠标悬停在你最喜欢的杂志上的一张图片上，看看有什么变化吗？

打印介质不支持`:hover`

# java - 静态终场、静态场和表演

> ID：13173046
> 
> 赞同：5
> 
> 时间：2012-11-01T07:52:53.767
> 
> 标签：java, performance, optimization, virtual-machine, final

即使认为这不是它的主要目的，我一直认为`final`关键字（在某些情况下和 VM 实现中）可以帮助 JIT。
这可能是一个都市传说，但我从未想过设置一个场地`final`会对表演产生负面影响。

直到我遇到这样的代码：

```
 private static final int THRESHOLD = 10_000_000;
   private static int [] myArray = new int [THRESHOLD];

   public static void main(String... args) {
      final long begin = System.currentTimeMillis();

      //Playing with myArray
      int index1,index2;
      for(index1 = THRESHOLD - 1; index1 > 1; index1--)
          myArray[index1] = 42;             //Array initial data
      for(index1 = THRESHOLD - 1; index1 > 1; index1--) {
                                            //Filling the array
          for(index2 = index1 << 1; index2 < THRESHOLD; index2 += index1)
              myArray[index2] += 32;
      }

      long result = 0;
      for(index1 = THRESHOLD - 1; index1 > 1; index1-=100)
          result += myArray[index1];

      //Stop playing, let's see how long it took
      System.out.println(result);
      System.out.println((System.currentTimeMillis())-begin+"ms");
   } 
```

让我们看一下： `private static int [] myArray = new int [THRESHOLD];`
在 W7 64 位下，在连续运行 10 次的基础上，我得到以下结果：

1.  `THRESHOLD = 10^7`, 1.7.0u09 客户端虚拟机 (Oracle):

    *   `myArray`当不是最终结果时，运行时间约为 2133 毫秒。
    *   最终运行时间约为 2287 毫秒`myArray`。
    *   -server VM 产生类似的数字，即 2131ms 和 2284ms。

2.  `THRESHOLD = 3x10^7`, 1.7.0u09 客户端虚拟机 (Oracle):

    *   `myArray`当不是最终结果时，运行时间约为 7647 毫秒。
    *   最终运行时间约为 8190 毫秒`myArray`。
    *   -server VM 产生 ~7653ms 和 ~8150ms。

3.  `THRESHOLD = 3x10^7`, 1.7.0u01 客户端虚拟机 (Oracle):

    *   `myArray`当不是最终状态时，运行时间约为 8166 毫秒。
    *   最终运行时间约为 9694 毫秒`myArray`。相差15%以上！
    *   -server VM 对非最终版本产生了可忽略的差异，大约 1%。

*备注：我使用 JDK 1.7.0u09 的 javac 生成的字节码进行所有测试。两个版本生成的字节码完全相同，除了`myArray`声明，这是预期的。*

**那么为什么版本`static final myArray`比带有慢的版本`static myArray`呢？**

* * *

**编辑（使用我的代码片段的 Aubin 版本）：**

似乎带关键字的版本`final`和不带关键字的版本之间的差异仅在于第一次迭代。不知何故，第一次迭代的版本`final`总是比没有的版本慢，然后下一次迭代的时间相似。

例如，`THRESHOLD = 10^8`使用 1.7.0u09 客户端并运行第一个计算大约需要 35 秒，而第二个“仅”需要 30 秒。

显然，VM 执行了优化，是 JIT 在起作用吗？为什么它不早点启动（例如通过编译嵌套循环的第二级，这部分是热点）？

**请注意，我的评论对于 1.7.0u01 客户端 VM 仍然有效。使用那个版本**（可能还有更早的版本），**代码`final myArray`运行速度比没有这个关键字的代码慢：2671ms vs 2331ms，基于 200 次迭代。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T08:13:14.270

恕我直言，不应添加 System.out.println( result ) 的时间，因为 I/O 是高度可变且耗时的。

我认为 println() 影响的因素更大，真的比最终影响更大。

我建议将性能测试编写如下：

```
public class Perf {
   private static final int   THRESHOLD = 10_000_000;
   private static final int[] myArray   = new int[THRESHOLD];
   private static /* */ long  min = Integer.MAX_VALUE;
   private static /* */ long  max = 0L;
   private static /* */ long  sum = 0L;

   private static void perf( int iteration ) {
      final long begin = System.currentTimeMillis();

      int index1, index2;
      for( index1 = THRESHOLD - 1; index1 > 1; index1-- ) {
         myArray[ index1 ] = 42;
      }
      for( index1 = THRESHOLD - 1; index1 > 1; index1-- ) {
         for( index2 = index1 << 1; index2 < THRESHOLD; index2 += index1 ) {
            myArray[ index2 ] += 32;
         }
      }
      long result = 0;
      for( index1 = THRESHOLD - 1; index1 > 1; index1 -= 100 ) {
         result += myArray[ index1 ];
      }
      if( iteration > 0 ) {
         long delta = System.currentTimeMillis() - begin;
         sum += delta;
         min = Math.min(  min,  delta );
         max = Math.max(  max,  delta );
         System.out.println( iteration + ": " + result );
      }
   }

   public static void main( String[] args ) {
      for( int iteration = 0; iteration < 1000; ++iteration ) {
         perf( iteration );
      }
      long average = sum / 999;// the first is ignored
      System.out.println( "Min    : " + min     + " ms" );
      System.out.println( "Average: " + average + " ms" );
      System.out.println( "Max    : " + max     + " ms" );
   }
} 
```

仅 10 次迭代的结果是：

最后：

```
Min    : 7645 ms
Average: 7659 ms
Max    : 7926 ms 
```

没有决赛：

```
Min    : 7629 ms
Average: 7780 ms
Max    : 7957 ms 
```

我建议读者运行这个测试并发布他们的结果进行比较。

# entity-framework-4.1 - 实体框架代码优先关系问题

> ID：13173051
> 
> 赞同：0
> 
> 时间：2012-11-01T07:53:19.643
> 
> 标签：entity-framework-4.1, entity-relationship

我正在努力让特定的代码优先关系正常工作。基本上我有以下课程：

```
public class Service
{
    public Guid ServiceId { get; set; }

    public virtual List<ServicePackageService> ServicePackageServices { get; set; }
}

public class ServicePackageService
{
    public Guid ServicePackageServiceId { get; set; }

    public Guid ServiceId { get; set; }
    public virtual Service Service { get; set; }

    public Guid PackageServiceId { get; set; }
    public virtual Service PackageService { get; set; }
} 
```

这里的想法是一个 Service 对象可以有多个 ServicePackageService 对象。这些 PackageServiceObject 与单个 Service 相关，但它们具有 PackageService 属性，这是与 Service 表的另一种关系。

在我的配置中，我使用以下内容：

```
 public ServicePackageServiceConfiguration()
    {
        HasRequired(x => x.Service);
        HasRequired(x => x.PackageService).WithMany().HasForeignKey(a => a.PackageServiceId).WillCascadeOnDelete(false);
    } 
```

但是得到的数据表如下：

```
 ServicePackageServiceId (PK)
   ServiceId (No foreign key appears on this column)
   PackageServiceId (FK)
   Service_ServiceId (FK) 
```

谁能指出我如何配置这种关系的正确方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:50:13.403

这一切都归结为配置中的错误。

处理这种关系的正确方法是指定以下 Service 配置：

```
HasMany(x => x.ServicePackageServices)
    .WithRequired(b => b.Service)
    .HasForeignKey(m => m.ServiceId); 
```

以及反向关系的 ServicePackageService 配置：

```
HasRequired(x => x.PackageService)
    .WithMany()
    .HasForeignKey(a => a.PackageServiceId).WillCascadeOnDelete(false); 
```

# c# - .NET 4.0 重构收益回报

> ID：13173056
> 
> 赞同：0
> 
> 时间：2012-11-01T07:53:56.827
> 
> 标签：c#

如何在 .NET 4.0 中重构收益回报

```
public static void DoIt()
{
    foreach (int n in Power(2,4))
    {
        Console.Write(n);
    }
}

public static IEnumerable CalcPower(int base, int exponent)
{
    int res = 1;

    for (int c = 1; c <= high; counter++)
    {
        res = res * base;
        yield return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:35:21.327

你的方法很好。这可能也是我实施它的方式。一项更改是您应该使用泛型`IEnumerable<int>`而不是`IEnumerable`.

```
public static IEnumerable<int> Power(int baseNumber, int highExponent) 
```

如果真的想换一种方式，可以使用LINQ，但在我看来，并没有原代码那么清晰：

```
public static IEnumerable<int> Power(int baseNumber, int highExponent)
{
    return Enumerable.Range(1, highExponent)
        .Select(e => (int)Math.Pow(baseNumber, e));
} 
```

该`yield`关键字尚未过时。如果代码更清晰，请`yield`使用它。

# php - jquery在使用输入键超过两列输入文本输入时动态添加具有值的表行

> ID：13173062
> 
> 赞同：2
> 
> 时间：2012-11-01T07:54:56.900
> 
> 标签：php, jquery

1.html

```
<table  id="cstbl" border="1">
    <tr  bgcolor="#FFFFFF" align="center">
    <td>no</td>
    <td>item no</td>
    <td>descr</td>
    <td>uom</td>
    <td>qty</td>
    <td>upr</td>
    <td>disc</td>
    <td>sub</td>
    <td>x</td>
  </tr>
</table>
<br />
Enter barcode: 
<input type="text" name="barcode" id="barcode" />​ 
```

2.javascript

```
var index = 1;
$('input[name=barcode]').on('keyup',function(e){
  var code = (e.keyCode ? e.keyCode : e.which);
  if (code == 13) {
    $('table').append('<tr><td></td><td></td> <td></td><td></td><td></td> <td></td> <td></td><td></td><td></td> </tr>');    
    $('table tr:last td:first').html(index);
    $('table tr:last td:last').html($(this).val());
    $(this).focus().select();
    index++;
  }
});​ 
```

如果我想在第二列（即项目无列）中显示 in 的值`barcode`，`table cstbl`那么在 javascript 中替换的脚本是什么`td:last`？

我只知道只有`:first`和`:last`选择器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:07:54.823

你可以在构建新行时直接添加这些值：

```
$('#cstbl').append(
'<tr>' +
    '<td>' + index + '</td>' +
    '<td>' + $(this).val() + '</td>' +
    '<td></td>' +
    '<td></td>' +
    '<td></td>' +
    '<td></td>' +
    '<td></td>' +
    '<td></td>' +
    '<td></td>' +
'</tr>'); 
```

或过滤所有 td 以仅匹配第二个（在 0 索引数组中，这就是 1 的原因）：

```
$('table tr:last td').eq(1).html($(this).val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:10:52.787

试试这个**[演示](http://jsfiddle.net/pintu31/3a98C/)**

```
var index = 1;
$('input[name=barcode]').on('keyup',function(e){
  var code = (e.keyCode ? e.keyCode : e.which);
  if (code == 13) {
    $('table').append('<tr><td></td><td></td><td></td><td></td><td></td><td></td><td> </td><td></td><td></td> </tr>');    
    $('tr:last td:eq(0)').html(index);
    $('tr:last td:eq(1)').html($(this).val());
    $(this).focus().select();
    index++;
  }
});​ 
```

# java - 使用 maven 进行树外构建。是否可以？

> ID：13173063
> 
> 赞同：5
> 
> 时间：2012-11-01T07:55:07.340
> 
> 标签：java, maven, build

我开始为几个发行版（目前是 Cygwin 和 Debian）学习打包。

他们需要构建系统以允许**树外构建**（同义词**out-of-source build**）：

[http://wiki.debian.org/UpstreamGuide#Out-of-Tree_Builds](http://wiki.debian.org/UpstreamGuide#Out-of-Tree_Builds)

要解决“哑”构建系统，例如**cygport**建议使用**lndir**（来自**xutils**项目）：

```
  lndir ${S} ${B}
  cd {B}
  ...构建命令...

```

我阅读了**mvn(1)**手册页，但没有找到任何合适的内容。接下来我只是尝试：

```
  $ mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-app -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false
  ...
  $密码
  /行家/简单
  $ ls
  我的应用
  $ mvn -f my-app/pom.xml 编译
  ...
  [信息] --- maven-compiler-plugin:2.0.2:compile (default-compile) @ my-app ---
  [INFO] 将 1 个源文件编译到 /maven/simple/my-app/target/classes

```

如您所见，在我寻找避免这种情况的方法时，在源根层次结构中创建了**目标目录。**

是否可以使用 maven**进行树外**构建？如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T08:22:23.383

您可以这样做以将其放在当前的工作目录中：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.stackoverflow</groupId>
    <artifactId>Q13173063</artifactId>
    <version>1.0-SNAPSHOT</version>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <buildDir>${user.dir}</buildDir>
    </properties>

    <build>
        <directory>${buildDir}</directory>
    </build>
</project> 
```

然后你可以发出

```
mvn -f my-app/pom.xml compile 
```

它会在当前工作目录中为您提供您的课程。

并轻松切换到另一个输出目录：

```
mvn -f my-app/pom.xml -DbuildDir=/tmp/build compile 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T08:01:56.583

它可能就像拥有一个

```
<build>
    <directory>/your/build/directory</directory>
</build> 
```

在你的 pom.xml 中。`/your/build/directory`不需要在源代码树中，并且可以使用通常的`${...}`语法进行参数化。

干杯，

# php - 回显数组 PHP

> ID：13173065
> 
> 赞同：-1
> 
> 时间：2012-11-01T07:55:18.287
> 
> 标签：php

我想以可读的格式回显这个数组的结果“[id]，[reason]，我该怎么做？

```
$s1 = "SELECT DISTINCT `id`, `reason` FROM wlp_$this->client.lu_unallocation_reasons";
        $m1 = $this->conn1->_execute($s1);
        while ($r1 = $this->conn1->_nextRow($m1)) {
            $reasons[] = array('id' => $r1['id'], 'reason' => $r1['reason']);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T07:59:18.790

你需要的是一个 foreach 循环。

```
foreach($reasons as $reason){
   echo "ID: ".$reason['id']."<br>";
   echo "Reason: ".$reason['reason']."<br>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T07:59:53.917

如果不需要保存原因，可以直接在循环中输出：

```
echo $r1['id'],', ',$r1['reason'],'<br >'; 
```

出于调试原因，只需使用它`var_dump`来执行此操作。如果您想让它更具可读性，请在其`<pre></pre>`周围添加一个。您还可以使用`var_export`来回显有效的 php 代码。

1.  [http://php.net/var_dump](http://php.net/var_dump)
2.  [http://php.net/var_export](http://php.net/var_export)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T07:58:40.147

您可以使用[print_r()](http://php.net/manual/en/function.print-r.php) :`print_r($reasons);`或简单地遍历您的数组: `foreach($reasons as $reason) { ... }`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T07:58:48.413

做这个...

```
print_r($reasons); 
```

print_r() 以人类可读的方式显示有关变量的信息。

**如果给定一个数组，值将以显示键和元素的格式呈现。**

[http://php.net/manual/en/function.print-r.php](http://php.net/manual/en/function.print-r.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T08:58:23.427

我建议使用 print_r()。我会将其包装在`<pre>`标签中以使其更易于阅读：

```
<?php

echo '<pre>';
    print_r($reasons);
echo '</pre>'; 
```

# c# - System.Net.NetworkInformation.Ping 崩溃

> ID：13173068
> 
> 赞同：4
> 
> 时间：2012-11-01T07:55:33.063
> 
> 标签：c#, ping

所以，我有一个拥有 600 多台设备的网站。我正在尝试使用标准的 .NET ping 类一一对它们进行 ping 操作。出于某种原因，这个线程正在崩溃 - 它只是在几天后停止响应。它所做的只是 ping 网络上的设备。我们使用的是 Microsoft Windows Server 2008 R2。.NET ping 类有什么问题吗？我似乎也遇到了内存泄漏，我猜这是由于 ping 造成的。我应该只编写一个 win32 ping dll 来为我完成这项工作，还是我在 .NET 上做错了什么？

```
private void PingDevice(out bool state, string IP)
{
    PingReply pingReply;
    System.Net.NetworkInformation.Ping pingSender = null;
    state = false;
    try
    {
        pingSender = new System.Net.NetworkInformation.Ping();
        pingReply = pingSender.Send(IP, 4000);
        state = (pingReply.Status == IPStatus.Success); // comms is on/off
    }
    catch (Exception ex)
    {
        PingGlobals.driverThread.LogIt("$E Pinging Devices:" + ex.Message + ", " + IP);
    }
    finally
    {
        if (pingSender != null)
        {
            ((IDisposable)pingSender).Dispose();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:35:58.020

在使用 Ping 的异步版本时，我发现有时 Ping 永远不会返回。我可以想象，如果这种情况发生在异步、同步上，它只会停滞不前。我为 Async 找到的答案是设置超时（长于 Ping 超时），然后在 SendAsync 之前调用 SendAsyncCancel 以重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:11:04.457

创建 System.Net.NetworkInformation.Ping 类的新实例似乎会在 Server 2008 上泄漏内存。如果您保留一个（或一百个）实例并重复使用它们，那么问题就会消失。只是要非常*小心地*从多个线程访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T07:25:48.733

这是针对低于 3.5 的 .Net 版本报告的问题[这里](http://support.microsoft.com/kb/2533627)
有一篇 Microsoft 文章描述了该问题及其解决方案。

# java - 语法错误，插入“EnumBody”完成EnumDeclaration

> ID：13173070
> 
> 赞同：9
> 
> 时间：2012-11-01T07:55:41.037
> 
> 标签：java, eclipse, syntax-error, eclipse-indigo

我正在编码中，不小心将以下代码行放在我们声明实例变量的类部分。但是我检查了一下，它在任何地方都给出了相同的错误：在静态块内，在构造函数内，在任何类方法内。当我们将光标悬停在 Eclipse 工具提示上时，除非`private;`将其作为它给出的类的第一行 （正如@chaitanya10 在下面的评论中所写，并由我在我的工作区中验证）错误。`Syntax error, insert "EnumBody" to complete ClassBodyDeclarations`

我明白有错误。
但是当我将光标悬停在错误上时，我不明白错误消息。这条消息的含义是什么？

为什么期待`EnumBody`？

下面是截图。

![在此处输入图像描述](../Images/cd3f9c720c9d2bb3451640050a9ec87b.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T11:26:42.743

要真正解释清楚，需要有人对 Eclipse Java 编译器前端的语法检查、语法错误恢复和报告组件进行详细分析。但最可能的解释是，您的“不寻常”语法错误“混淆”了编译器的语法错误恢复代码。

简而言之，它是一个小的编译器错误（或功能）。

开发人员可能知道这一点，但由于以下一项或多项原因而没有修复它：

*   它不会经常发生，不足以被优先考虑。
*   在不影响其他错误恢复案例的情况下，*可能*很难做得更好。
*   任何更改*都可能*破坏¹一些编译器错误回归测试。
*   还有其他更高优先级的问题需要处理。

* * *

^(1 - Break ... 在某种意义上导致测试失败是因为测试中的假设而不是被测试代码中的问题。修复这些回归可能很麻烦。)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T05:27:42.300

对于它的价值，以下内容：

```
public class Foo; 
```

错误：`Syntax error, insert "ClassBody" to complete ClassBodyDeclarations`

```
public enum Foo; 
```

错误：`Syntax error, insert "EnumBody" to complete ClassBodyDeclarations`

```
public interface Foo; 
```

错误`Syntax error, insert "InterfaceBody" to complete ClassBodyDeclarations`

无论如何，我认为会发生什么，在 this `org.eclipse.jdt.internal.compiler.parser.Parser.consumeEnumConstantHeader()`中，当它使用此代码出现解析错误时，它会尝试恢复：

```
if(this.currentToken == TokenNameSEMICOLON) {
    RecoveredType currentType = currentRecoveryType();
    if(currentType != null) {
        currentType.insideEnumConstantPart = false;
    }
} 
```

所以它正确地判断出我们不在一个枚举中，所以我们得到一个像上面这样的错误，但它没有意识到我们甚至不知道它是否是一个枚举。[你可以在这里查看源代码：](http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/3.6.1/org.eclipse.jdt/core/3.6.1/org/eclipse/jdt/internal/compiler/parser/Parser.java#Parser.consumeEnumHeader%28%29)

换句话说，这可能是 Eclipse 团队在添加 Enumerations 时引入的一个错误，它的处理方式与其他一些标记略有不同，这导致它以不同的方式被恢复，因此出现在编译器错误中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-08T08:21:48.090

即使我的代码是正确的，这也发生在 Eclipse 中。发生是因为我在没有先添加 jar 的情况下编写了一些代码（aspectJ JARs），并且在我添加了 JAR 之后出现了这个问题。

起初，我复制了代码，删除了它，然后将其粘贴回去，并认为随着红线消失但运行时抛出了错误。但是，我确实通过删除该类，重新创建它并再次输入相同的确切代码来使其工作，并且它可以工作。删除课程后复制粘贴可能会起作用，但我确定了它。

绝对是个奇怪的问题。我知道代码是正确的，因为我是从一本书中复制出来的（Spring in action 第 4 版——顺便说一句很好读）。无论如何，希望这对您或将来的某人有所帮助！把我逼疯了大约一个小时

# android - 如何在edittext中设置文本，但文本在edittext中不可见

> ID：13173077
> 
> 赞同：-1
> 
> 时间：2012-11-01T07:56:27.913
> 
> 标签：android

如何在edittext中设置文本，但文本在edittext中不可见。

代码在这里给出

```
Edittext ed= (Edittext) findviewbyid(R.layout.ed1); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T08:00:20.303

如果您不想在 EditText 中显示文本，请使用可用的标记方法。这不会在`EditText`. 您可以使用`setTag(yourText)`方法设置文本。您可以获取标签信息。再次通过使用`getTag()`方法。

例子 ：

设置标签：

```
editText.setTag("myhiddentext"); 
```

检索标签信息。：

```
String text=editText.getTag(); 
```

**注意**：即使用户长按 EditText，用户也无法使用此文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:13:13.557

你也可以用这个

```
 ed.setTextColor(Color.TRANSPARENT); 
```

# c++ - 创建多线程 C++

> ID：13173078
> 
> 赞同：2
> 
> 时间：2012-11-01T07:56:40.983
> 
> 标签：c++, multithreading, pthreads

我正在编写一个程序，该程序使用可变数量的线程将两个矩阵相乘，然后比较每次运行的执行时间。用户指定要使用的最大线程数，然后程序与 1 个线程相乘，再次与 2、3、4.... 直到 max_threads（我们不必担心 max_threads 超过 8） . 那么为每次运行创建线程的最佳方法是什么？这是我在黑暗中最好的镜头。

编辑：我必须使用 pthread。

```
//Ive already called multiplyMatrices for the single thread run. Start with 2 threads.
for (int h=2; h <= max_threads; h++)
{
    for(int i = 0; i < h; i++)
    {   
        pthread_create(thr_id[i],NULL, multiplyMatrices, i);
    }

    for(int i = 0; i < h; i++)
    {
        pthread_join(thr_id[i],NULL);
    }
} 
```

multiplyMatrices 的代码如下。

```
void* multiplyMatrices(void* val)
{    
    for(int i = 0; i < n; i = i*val)
    {
        for(int j = 0; j < p; j++)
    {
            c[i][j] = 0;
            for(int k = 0; k < m; k++)
        {
                c[i][j] += matrix_A[i][k] * matrix_B[k][j];
            }
        }
    val++;
    }
    pthread_exit(0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T08:04:13.937

它`C++`使用[std::thread](http://en.cppreference.com/w/cpp/thread/thread) + [std::bind](http://en.cppreference.com/w/cpp/utility/functional/bind)：

```
std::vector<std::thread > thread_pool;
thread_pool.reserve(h);
void* someData;
for(int i = 0; i < h; i++)
{   
    thread_pool.push_back(std::thread(std::bind(multiplyMatrices, someData)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:08:07.977

我在您的代码中看到的最大问题是您如何将数据传递给线程函数。数据应作为指针传递。以下应该更好地工作：

```
for (int h=2; h <= max_threads; h++)
{
    for(int i = 0; i < h; i++)
    {   
        // Notice Im passing a pointer to i here.
        // Since i may go out of scope, and its value could change before the
        // thread is started and multiplyMatrices() is called, this could be
        // risky. Consider using an array/vector defined before these for
        // loops to avoid this problem.
        pthread_create(thr_id[i],NULL, multiplyMatrices, &i);
        ...

void* multiplyMatrices(void* valPtr)
{    
    int val = *((int*) valPtr);
    for(int i = 0; i < n; i = i*val)
    {
       ... 
```

# mysql - mysql中的函数是否只存在于连接中？

> ID：13173082
> 
> 赞同：0
> 
> 时间：2012-11-01T07:57:15.757
> 
> 标签：mysql, function

如果我在 mysql 中创建函数，它是否只在连接持续时才存在？哪个连接，查询连接还是数据库连接？或者它是否保存在某个地方，以便您可以随时从该数据库的任何连接调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:01:16.980

函数，一旦使用[CREATE FUNCTION](http://dev.mysql.com/doc/refman/5.0/en/create-function-udf.html)构造创建，就存在于 DBMS 中，直到它们被显式删除，使用[`DROP FUNCTION <function name>`](http://dev.mysql.com/doc/refman/5.0/en/drop-function-udf.html). 因此，它们的寿命超出了用于创建它们的数据库/查询连接。

# ruby-on-rails - Usps 未在跟踪响应中提供运输服务

> ID：13173091
> 
> 赞同：0
> 
> 时间：2012-11-01T07:58:08.033
> 
> 标签：ruby-on-rails, usps

我正在使用以下跟踪请求

```
http://production.shippingapis.com/ShippingAPITest.dll?API=TrackV2
&XML=<TrackRequest USERID="xxxxxxxx">
<TrackID ID="EJ958088694US"></TrackID></TrackRequest> 
```

我在哪里提供跟踪发货数量并获得跟踪响应。但我没有在响应中得到服务类型。

示例：- 对于`"9400110200830528706282"`在 xml 响应中未获得服务“First Class Mail”的跟踪号。

Usps 网站将“First Class Mail”显示为上述跟踪号的服务。

请建议获取运输方式的跟踪请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:00:15.307

我确定 Tracking Api 不会返回 Shippingmethod 它只是返回跟踪 ID 和状态，以获取您需要在打印标签之前处理的运输方式，在标签中您需要提及运输方式然后您可以使用该运输方式，请参阅下面的链接了解更多详情。

[https://www.usps.com/business/web-tools-apis/welcome.htm](https://www.usps.com/business/web-tools-apis/welcome.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T15:11:51.500

此信息可通过“TrackFieldRequest”获得

## 示例请求

```
<TrackFieldRequest USERID="xxxxxxxx">
<Revision>1</Revision>
<ClientIp>127.0.0.1</ClientIp>
<SourceId>John Doe</SourceId>
    <TrackID ID="010850921250125054">
        <DestinationZipCode>12345</DestinationZipCode>
        <MailingDate>2010-01-01</MailingDate>
   </TrackID>
</TrackFieldRequest> 
```

## 示例请求响应

```
<?xml version="1.0" ?>
<TrackResponse>
     <TrackInfo ID="9102969010383081813033">
          <Class>Package Services</Class>
          ...
     </TrackInfo>
</TrackResponse> 
```

来源： [https ://www.usps.com/business/web-tools-apis/track-and-confirm.htm#_Toc378923168](https://www.usps.com/business/web-tools-apis/track-and-confirm.htm#_Toc378923168)

# mysql - 具有多个 AND 运算符的 MySQL 查询

> ID：13173092
> 
> 赞同：-1
> 
> 时间：2012-11-01T07:58:13.733
> 
> 标签：mysql

这个查询对我不起作用。我哪里做错了。请帮忙

```
$sql="SELECT * FROM $tbl_name WHERE ( username='$myusername' and (password='$mypassword' and password='$encrypted_mypassword'))"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:04:25.090

我假设您接受了普通密码和加密密码。试试这个...

```
SELECT * FROM $tbl_name WHERE username='$myusername' AND 
(password='$mypassword' OR  password='$encrypted_mypassword') 
```

如果只有加密密码，试试这个...

```
SELECT * FROM $tbl_name WHERE username='$myusername' AND 
password='$encrypted_mypassword' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:03:04.307

未经测试，但这应该工作，

```
$sql="SELECT * FROM $tbl_name WHERE 
Username = '$myusername' AND
Password = '$mypassword' AND
Password = '$encrypted_mypassword'"; 
```

对于您正在做的事情，不需要括号，并且您还尝试将单个字段与可能的 2 个不同值进行比较。

# c# - 如何使用 Google 联系人 API 的访问令牌交换授权码

> ID：13173096
> 
> 赞同：1
> 
> 时间：2012-11-01T07:58:41.527
> 
> 标签：c#, google-contacts-api

我想使用 Google 联系人 API，为此我需要使用 Aouth 2.0

我得到了授权码，但是当我使用另一个 API 与访问令牌交换授权码时，它会产生问题。

如何用访问令牌交换授权码？

我为此使用 API，例如：

```
code=4/P7q7W91a-oMsCeLvIaQm6bTrgtp7&
client_id=8819981768.apps.googleusercontent.com&
client_secret={client_secret}&
redirect_uri=https://oauth2-login-demo.appspot.com/code&
grant_type=authorization_code 
```

# c++ - 如何从c++类内部获取v8对象

> ID：13173105
> 
> 赞同：1
> 
> 时间：2012-11-01T07:59:11.237
> 
> 标签：c++, v8

对不起，我的英语很差，希望有人能理解我所说的这样的代码

```
 class Point
 {
 public:
int x_, y_;
Point(int x, int y):x_(x), y_(y){}
void Test(Local<Object> & obj)
{
    //Local<Value> value = ref->Get(String::New("onconnect"));

    printf("%d", ref->Get(String::New("getX")));
}
 };

 Handle<Value> PointConstructor(const Arguments& args)
 { 

     Point *p = new Point(x, y);

     object->SetInternalField(0, External::New(p));

     p->Test();
     return object; 
 } 

 ...

 Handle<String> script = String::New("var p = new Point(20, 0); p.onconnect = function(){}; log(p.getX())");

   Handle<Script> compiled_script = Script::Compile(script); 
```

方法“Test”mybe 是一个异步调用，在 anthor 线程中运行，当它运行完成时我调用 js 方法“onconnect”我如何调用 js 方法：在方法 Test() 中的 onconnect？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:02:50.593

我是凭记忆写的，某些类型或调用可能略有不同。假设 Test 接收到 Point 参考：

```
void Test(Local<Object> obj)
{
   String funName = String::New("onconnect");
   if (obj->Has(funName)){
     Local<Value> fun = obj->Get(funName);
     // would suggest to check additionally whether it actually is a function
     Local<Value> args[] = {}; // empty arguments
     Local<Value> result = fun->AsObject()->CallAsFunction(obj, 0, args);
   }
} 
```

# xpath - 使用 XPATH 选择表亲元素

> ID：13173115
> 
> 赞同：3
> 
> 时间：2012-11-01T08:00:03.187
> 
> 标签：xpath

给定以下标记

```
<div>
    <a>Username1</a>
</div>
<div>
    <button>Unblock</button>
</div>
<div>
    <a>Username2</a>
</div>
<div>
    <button>Unblock</button>
</div>
<div>
    <a>Username3</a>
</div>
<div>
    <button>Unblock</button>
</div> 
```

如何选择按钮元素，它是`a`带有文本 Username2 的元素的表亲？

我可以用 选择`a`元素`//a[contains(., 'Username2')]`，所以我认为这`//a[contains(., 'Username2')]/following-sibling::/div/button`会选择正确的按钮，但这不起作用。我认为它甚至不是有效的 XPATH。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T08:03:51.797

你很接近：

```
//a[contains(., 'Username2')]/../following-sibling::div[1]/button

```

要导航到表亲，您首先必须转到父级 ( `..`)，然后再转到其兄弟级。

请注意，`following-sibling::`轴选择*所有*后续兄弟，而不仅仅是第一个。`[1]`这意味着如果您只想要第一个，则必须使用。

这也可以：

```
//一种[。= 'Username2']/../following-sibling::div[1]/button

```

也可以这样：

```
//div[a = 'Username2']/following-sibling::div[1]/button

```

# c# - Silverlight：减键

> ID：13173116
> 
> 赞同：0
> 
> 时间：2012-11-01T08:00:08.193
> 
> 标签：c#, silverlight-4.0

我有一个货币价值的句柄。它应该允许负值说-555。

在 keydown/Keypress 上，当我尝试在 Numpad 中查找 Subtract 键的 Key 值时，它在 IE 版本中为我提供 Key.Subtract。但在 chrome/firefox 最新版本中，它显示为 Key.Unknown。

有没有什么具体的处理需要做的。

样本：

```
if ((e.Key >= Key.D0 && e.Key <= Key.D9) || (e.Key >= Key.NumPad0 && e.Key <= Key.NumPad9) || (e.Key == Key.Subtract) || (e.Key == Key.Unknown))
            {
                //valid number, but if shift is pressed, it is an invalied character
                if (Keyboard.Modifiers == ModifierKeys.Shift)
                    e.Handled = true;
            }            
            else
                e.Handled = true; 
```

在这里，我已经明确地处理了未知键。但是有什么标准的方法可以摆脱这个吗？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:45:27.623

当一些客户不使用 IE 时，我也遇到了同样的问题。您要做的是检查 PlatformKeyCode 的值，它在不同的操作系统上具有不同的值，例如，PlatformKeyCode`.`在 Windows 上是 190，但在 Mac 上是 47。

以下语句引用自MSDN 上的[KeyEventArgs.PlatformKeyCode 属性](http://msdn.microsoft.com/en-us/library/system.windows.input.keyeventargs.platformkeycode%28VS.95%29.aspx)。

> 便携键码是受支持操作系统（在本例中为 Macintosh 和 Windows）的所有可能键码的公共子集。例如，击键 'v' 表示为一个 Key 值（如果将其转换为整数，它将评估为 51，但如果保留枚举信息则更有用）。该键的 PlatformKeyCode 值为 86。但是，某些键击是不可移植的，例如 Microsoft Windows 的 SCROLL LOCK 键。在这种情况下，Key 值为 Unknown，这是任何不可移植密钥的值，PlatformKeyCode 在 Windows 平台上为 145。有关 Microsoft Windows 特定键码的信息，请参阅 MSDN 库中的“虚拟键码”。有关 Macintosh 特定键码的信息，

在我的机器上，PlatformKeyCode 的值为`-`189。

# html - Sydroid 直接 RTSP URL

> ID：13173128
> 
> 赞同：1
> 
> 时间：2012-11-01T08:01:16.210
> 
> 标签：html, video-streaming, rtsp

我正在玩 Spydroid，想在网络浏览器中显示 RTSP 流，最好是在 HTML5 中，以便能够在移动设备上查看流。我一直在环顾四周，似乎 RTSP 与 HTML5 配合得很好，问题是大多数 RTSP URL 看起来像这样：

rtsp://xxx.xxx.xxx.xxx/videofile.mov

所以我的问题是，我如何使用 Spydroid 指向类似的 RTSP URL，或者是否有其他解决方案？

（例如在 VLC 中为我工作的 RTSP URL 是 rtsp://xxx.xxx.xxx.xxx:XXXX 但无法弄清楚如何将该 URL 用于不同的 HTML5 视频播放器......）

# wpf - WPF如何包含资源

> ID：13173133
> 
> 赞同：0
> 
> 时间：2012-11-01T08:01:29.990
> 
> 标签：wpf, mvvm

因此，当我阅读如何在我的项目中使用 MVVM 设计并查看示例 MVVM 概念项目时，我发现了这一点：

```
<Window x:Class="MVVMDemo.UserRegistrationView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:viewmodel="clr-namespace:MVVMDemo"
Title="Window1" Height="300" Width="300">
<Window.Resources>
    <viewmodel:ViewModel x:Key="ViewModel"/>
</Window.Resources>
<Grid DataContext="{Binding Source={StaticResource ViewModel}}"> 
```

我创建一个新项目添加这个：

```
 xmlns:viewmodel="clr-namespace:MVVMDemo"
Title="Window1" Height="300" Width="300">
<Window.Resources>
    <viewmodel:ViewModel x:Key="ViewModel"/>
</Window.Resources> 
```

和 "DataContext="{Binding Source={StaticResource ViewModel}}"" 到 Grid 子句。

但我得到奇怪的错误。问题是什么？我如何解决它？

# java - 标记化后列表中的空格

> ID：13173134
> 
> 赞同：1
> 
> 时间：2012-11-01T08:01:36.417
> 
> 标签：java, tokenize

我有一个单词列表，在标记化之后，我的列表中有一些我实际上不想要的空格。建议请...

示例字符串

```
String str = "3) type an \"l\" in the search field (\"bl\")"+
"4) startHistorySearch()'s previous result contains [\"blah\", \"baaa\", \"bloop\", \"bzzz\"], Satchel filters this down to [\"blah\", \"bloop\"] to match the new \"bl\" search string"+
and so on..... 
```

这是代码和输出片段

```
String[] splitString = (EXAMPLE_TEST.split("[\\[\\],\\'\"  \\(\\)\\{\\}\\*\\.]")); 
```

输出

```
nsIAutoCompletResult, , no, , Simple, , , , so, the, QI, fails, , historyResult 
```

在某些地方我看到这样......

```
finds, 1, entry, , , blah, , , , search-suggestions, finds, , baaa, , , , bloop, , , , bzzz, , , the, autocompete, menu, shows, these, in, order, with, a, divider, between, , blah, , and, , baaa, , 3, , type, , l, , in, the, search, field, , , bl, , 4, , startHistorySearch, , , s, previous, result, contains, , , blah, , , , baaa, , , , bloop, , , , bzzz, , , , Satchel, filters, this, down, to, , , blah, , , , bloop, , , to, match, the, new, , bl, , search, string5, , nsSearchSuggestions, s, onReadyState, , , change, is, called, with, updated, search, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:11:06.627

只需在`+`您的表达式中添加一个，不要在两个标记之间拆分。您还可以稍微简化您的表达式，您不必转义字符类中的所有这些字符：

```
String[] splitString = (EXAMPLE_TEST.split("[\\[\\],'\" (){}*.]+")); 
```

# templates - 如何在 vim-latex 中自定义模板

> ID：13173135
> 
> 赞同：5
> 
> 时间：2012-11-01T08:01:35.977
> 
> 标签：templates, vim, latex, customization, fedora

我正在尝试使用 vim-latex，并且由于现有的模板非常简单且令人不满意，因此我正在尝试构建自己的一些模板。但是，在编写我自己的模板并存储在“/ftplugin/latex-suite/templates”中之后，什么也没有发生。该软件根本不会扫描新模板。我是否错过了一些使它工作的步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T11:31:43.383

我发现发生了什么事。如果有人遇到类似问题，请检查您是否已在操作系统 repo 中安装了该插件。我正在使用 Fedora，并且不小心从 repo 安装了 vim-latex，因此这些模板真正所在的位置是

“/usr/share/vim/vimfiles/ftplugin/latex-suite/templates”。

因此，要么删除从操作系统 repo 安装的附加组件，然后将其重新安装在“~/.vim/”中，要么将模板复制到该文件夹​​中，这是解决此问题的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-21T15:13:09.830

我在使用 Xubuntu 时遇到了同样的问题。模板文件存储在`/usr/share/vim/addons/ftplugin/latex-suite/templates/`. 但是仅仅添加一个新的模板文件不会在 gvim 中创建一个新的菜单项：你还必须从上面目录中的新模板文件创建一个软链接到`/var/lib/vim/addons/ftplugin/latex-suite/templates/your_new_template.tex`

# objective-c - 用户滚动时如何使左右图像居中

> ID：13173136
> 
> 赞同：1
> 
> 时间：2012-11-01T08:01:44.763
> 
> 标签：objective-c, ios, ios5

我在中间有一张大图，在左右两边有两张图。当用户滚动时，如何做右边的图像来到中心......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:07:20.483

在委托方法中：

```
scrollViewDidScroll: 
```

添加代码虱子：

```
self.rightImage.center = CGPointMake(self.imageCenter.center.x, self.imageCenter.center.y); 
```

# overriding - 16 位模式下的操作数大小前缀

> ID：13173138
> 
> 赞同：9
> 
> 时间：2012-11-01T08:01:55.107
> 
> 标签：overriding, x86-16, operands

我试图了解 GAS 的行为`.code16`。

从手册来看，似乎在 16 位部分，对于 32 位操作数或指令，将为指令编码生成 66H 操作数覆盖前缀。这是否意味着

```
.code16
movw %eax, %ebx 
```

这种模式合法吗？那么代码不能在16位处理器上运行？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-02T08:20:59.757

这些是 80386+ 的法律说明。

> 从 80386 开始，我们可以使用`operandsize-`和`addresssize-`覆盖前缀。这些前缀可以与 16 位地址模式和 32 位地址模式结合使用。
> 
> 此外，它可以与实地址模式、保护模式和虚拟 86 模式一起使用。这些前缀反转了代码段中一条指令的默认操作数大小和/或地址大小。默认操作数大小和地址大小由代码段描述符中的 D 标志指定（或者如果没有 GDT/LDT，那么我们在 bios 的 POST-process 完成后成为 16 位地址模式。）
> 
> 对于 16 位地址模式，如果我们想使用 32 位操作数和/或 32 位地址，我们必须添加这些前缀。如果没有这些前缀，我们只能在 16 位地址模式下使用 16 位地址/操作数。
> 
> 在 32 位地址模式下，如果我们想使用 32 位操作数和/或 32 位地址，我们必须从代码中去掉这些前缀。如果我们将这些前缀添加到我们的代码中，那么我们可以在 32 位地址模式下使用 16 位地址/操作数。

英特尔：

> 指令前缀可用于覆盖代码段的默认操作数大小和地址大小。这些前缀可用于实地址模式以及保护模式和虚拟 8086 模式。操作数大小或地址大小前缀仅在指令期间更改大小。
> 
> 以下两个指令前缀允许在一个段中混合 32 位和 16 位操作：
> 
> *   操作数大小前缀 (66H)
> *   地址大小前缀 (67H)
> 
> 这些前缀反转了代码段描述符中 D 标志选择的默认大小。例如，处理器可以通过以下四种方式中的任何一种来解释 (MOV mem, reg) 指令：
> 
> *   在 32 位代码段中：
>     
>     
>     *   使用 32 位有效地址将 32 位从 32 位寄存器移动到内存。
>     *   如果前面有操作数大小前缀，则使用 32 位有效地址将 16 位从 16 位寄存器移动到内存。
>     *   如果前面有地址大小前缀，则使用 16 位有效地址将 32 位从 32 位寄存器移动到内存。
>     *   如果前面有地址大小前缀和操作数大小前缀，则使用 16 位有效地址将 16 位从 16 位寄存器移动到内存。
> *   在 16 位代码段中：
>     
>     
>     *   使用 16 位有效地址将 16 位从 16 位寄存器移动到内存。
>     *   如果前面有操作数大小前缀，则使用 16 位有效地址将 32 位从 32 位寄存器移动到内存。
>     *   如果前面有地址大小前缀，则使用 32 位有效地址将 16 位从 16 位寄存器移动到内存。
>     *   如果前面有地址大小前缀和操作数大小前缀，则使用 32 位有效地址将 32 位从 32 位寄存器移动到内存。
> 
> 前面的示例表明，任何指令都可以生成操作数大小和地址大小的任意组合，而不管指令是在 16 位还是 32 位段中。为代码段选择 16 位或 32 位默认值通常基于以下标准：
> 
> *   性能 — 尽可能始终使用 32 位代码段。它们在 P6 系列处理器上的运行速度比 16 位代码段快得多，在早期的 IA-32 处理器上运行速度稍快。
> *   运行代码段的操作系统——如果操作系统是 16 位操作系统，它可能不支持 32 位程序模块。
> *   操作模式 — 如果代码段设计为在实地址模式、虚拟 8086 模式或 SMM 下运行，则它必须是 16 位代码段。
> *   向后兼容早期 IA-32 处理器 — 如果代码段必须能够在 Intel 8086 或 Intel 286 处理器上运行，则它必须是 16 位代码段。

> 代码段描述符中的 D 标志确定代码段指令的默认操作数大小和地址大小。（在不使用段描述符的实地址模式和虚拟 8086 模式下，默认为 16 位。）设置了 D 标志的代码段是 32 位段；清除 D 标志的代码段是 16 位段。
> 
> 可执行代码段。该标志称为 D 标志，它指示段中指令引用的有效地址和操作数的默认长度。如果设置了标志，则假定 32 位地址和 32 位或 8 位操作数；如果清楚，则假定 16 位地址和 16 位或 8 位操作数。指令前缀 66H 可用于选择默认以外的操作数大小，前缀 67H 可用于选择默认以外的地址大小。
> 
> 32 位操作数前缀可用于实地址模式程序以执行 32 位形式的指令。此前缀还允许实地址模式程序使用处理器的 32 位通用寄存器。32 位地址前缀可用于实地址模式程序，允许 32 位偏移。
> 
> 从 Intel386 处理器开始的 IA-32 处理器可以使用地址覆盖前缀生成 32 位偏移；但是，在实地址模式下，32 位偏移的值可能不会超过 FFFFH 而不会导致异常。

> 汇编器用法：
> 
> 如果定义了要在实地址模式下运行的代码段，则必须将其设置为 USE 16 属性。如果在此代码段中的指令中使用了 32 位操作数（例如，MOV EAX、EBX），则汇编器会自动为该指令生成一个操作数前缀，以强制处理器执行 32 位操作，即使它的默认代码段属性为 16 位。
> 
> 32 位操作数前缀允许实地址模式程序使用 32 位通用寄存器（EAX、EBX、ECX、EDX、ESP、EBP、ESI 和 EDI）。
> 
> 在段寄存器和 32 位通用寄存器之间以 32 位模式移动数据时，Pentium Pro 处理器不需要使用 16 位操作数大小前缀；但是，某些汇编程序确实需要此前缀。处理器假定通用寄存器的 16 个最低有效位是目标或源操作数。将值从段选择器移动到 32 位寄存器时，处理器用零填充寄存器的两个高位字节。

# 超微：

> # 3.3.2\. 32 位与 16 位地址和操作数大小
> 
> 处理器可以配置为 32 位或 16 位地址和操作数大小。对于 32 位地址和操作数大小，最大线性地址或段偏移量为 FFFFFFFFH (2^32-1)，操作数大小通常为 8 位或 32 位。对于 16 位地址和操作数大小，最大线性地址或段偏移量为 FFFFH (2^16-1)，操作数大小通常为 8 位或 16 位。
> 
> 使用 32 位寻址时，逻辑地址（或远指针）由 16 位段选择器和 32 位偏移量组成；当使用 16 位寻址时，它由一个 16 位段选择器和一个 16 位偏移量组成。指令前缀允许在程序中临时覆盖默认地址和/或操作数大小。
> 
> 在保护模式下操作时，当前执行代码段的段描述符定义了默认地址和操作数大小。段描述符是应用程序代码通常不可见的系统数据结构。汇编器指令允许为程序选择默认寻址和操作数大小。然后，汇编器和其他工具适当地为代码段设置段描述符。
> 
> 在实地址模式下操作时，默认寻址和操作数大小为 16 位。可以在实地址模式下使用地址大小覆盖来启用 32 位寻址；但是，最大允许的 32 位线性地址仍然是 000FFFFFH (2^20-1)。
> 
> # 3.6\. 操作数大小和地址大小属性
> 
> 当处理器在保护模式下执行时，每个代码段都有一个默认的操作数大小属性和地址大小属性。这些属性是通过代码段的段描述符中的 D（默认大小）标志来选择的（参见英特尔架构软件开发人员手册第 3 卷中的第 3 章，保护模式内存管理）。当设置 D 标志时，选择 32 位操作数大小和地址大小属性；当标志被清除时，选择 16 位大小的属性。当处理器在实地址模式、虚拟 8086 模式或 SMM（系统管理模式）下执行时，默认操作数大小和地址大小属性始终为 16 位。
> 
> 操作数大小属性选择指令操作的操作数的大小。当 16 位操作数大小属性生效时，操作数一般可以是 8 位或 16 位，当 32 位操作数大小属性生效时，操作数一般可以是 8 位或 32 位。
> 
> address-size 属性选择用于寻址内存的地址大小：16 位或 32 位。当 16 位地址大小属性生效时，段偏移和位移为 16 位。此限制将可寻址的段大小限制为 64 KB。当 32 位地址大小属性生效时，段偏移和位移为 32 位，允许寻址高达 4 GB 的段。
> 
> 可以通过向指令添加操作数大小和/或地址大小前缀来覆盖特定指令的默认操作数大小属性和/或地址大小属性（参见英特尔架构软件第 2 章中的“指令前缀”开发人员手册，第 3 卷）。此前缀的效果仅适用于它所附加的指令。
> 
> 表 3-1 显示了有效的操作数大小和地址大小（在保护模式下执行时）取决于 D 标志的设置以及操作数大小和地址大小前缀。

# charts - Devexpress xtraChart 如何分配 x 和 y 值？

> ID：13173139
> 
> 赞同：2
> 
> 时间：2012-11-01T08:01:54.540
> 
> 标签：charts, devexpress

我在数据源中有值，数据源没有问题。我必须为图表分配 X 和 Y 值。图表抛出错误并显示没有名为“TotalInboundArrivals”的列。

```
ChartControl chart = new ChartControl();
chart.Location = new Point(38, 301);
chart.Size = new Size(789, 168);
Series series = new Series("Series1", ViewType.Bar);
chart.Series.Add(series);
series.DataSource = ds;
series.ArgumentScaleType = ScaleType.Numerical;
series.ArgumentDataMember = "TotalInboundArrivals"; //throws error here
series.ValueScaleType = ScaleType.Numerical;
series.ValueDataMembers.AddRange(new string[] { "StartTime" }); //throws error here 

((SideBySideBarSeriesView)series.View).ColorEach = true;
((XYDiagram)chart.Diagram).AxisY.Visible = true;
chart.Legend.Visible = true;
chart.Visible = true;
chart.Dock = DockStyle.Fill;
xtraTabPage1.Controls.Add(chart); 
```

我的问题在哪里？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T07:05:24.353

您是否经历过[Series.DataSource 属性](http://documentation.devexpress.com/#XtraCharts/DevExpressXtraChartsSeries_DataSourcetopic)。您犯了将 DataSet 作为 DataSource 分配给系列的错误。想一想，它怎么会在数据源中搜索列。尝试指定`Ds.Tables["TableName"]`为数据源。

创建数据源表

```
private DataTable CreateChartData(int rowCount) {
            // Create an empty table.
            DataTable table = new DataTable("Table1");

            // Add two columns to the table.
            table.Columns.Add("Argument", typeof(Int32));
            table.Columns.Add("Value", typeof(Int32));

            // Add data rows to the table.
            Random rnd = new Random();
            DataRow row = null;
            for (int i = 0; i < rowCount; i++) {
                row = table.NewRow();
                row["Argument"] = i;
                row["Value"] = rnd.Next(100);
                table.Rows.Add(row);
            } 
```

指定与数据源对应的系列属性

```
Series series = new Series("Series1", ViewType.Bar);
            chart.Series.Add(series);

            // Generate a data table and bind the series to it.
            series.DataSource = CreateChartData(50);

            // Specify data members to bind the series.
            series.ArgumentScaleType = ScaleType.Numerical;
            series.ArgumentDataMember = "Argument";
            series.ValueScaleType = ScaleType.Numerical;
            series.ValueDataMembers.AddRange(new string[] { "Value" }); 
```

检查[示例](http://documentation.devexpress.com/#XtraCharts/CustomDocument2458)并阅读创建`Charts -> Providing Data`部分以更好地理解它。

[**参考**](http://www.devexpress.com/Support/Center/p/Q322957.aspx)

希望这可以帮助。

# javascript - 如何使用 JavaScript 输出 HTML 标签以复制到其他地方

> ID：13173141
> 
> 赞同：1
> 
> 时间：2012-11-01T08:02:02.013
> 
> 标签：javascript, html, xmp

我编写了一个代码，使用 document.write 和 xmp HTML 标记将数据输出为 html 标记。但是，我遇到了一个问题。我尝试过执行 html、style、head 和其他标签，但它们不起作用。div、img 等基本标签似乎可以正常工作。有人可以帮忙吗？

谢谢

# html - HTML5 使用 kinetic-v4.0.0.js 在画布中拖动时捕获图像下拉事件

> ID：13173144
> 
> 赞同：1
> 
> 时间：2012-11-01T08:02:13.357
> 
> 标签：html, canvas, drop-down-menu, drag-and-drop

我正在尝试取消事件拖动，但它不起作用。我使用 kinetic-v4.0.0.js 库。有人有个好主意吗？

# c++ - Winforms C++中的写历史

> ID：13173149
> 
> 赞同：1
> 
> 时间：2012-11-01T08:02:27.663
> 
> 标签：c++, winforms, visual-c++

我有一个使用 C++（在 VS 2010 中开发）以 winform 制作的应用程序。GUI 具有某些文本字段、单选按钮、复选框等。要操作该软件，必须填写这些字段/按钮/框等。

大约有 50 种不同的 GUI，每个 GUI 中大约有 20 个字段。

我希望在应用程序关闭并重新启动后，此字段中的最新参数会自动填写，因此用户无需再次重新输入所有这些值。

实现这一目标的最简单和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:07:05.643

您可以将 Windows 注册表与

WindowsFormName（子项）---------> ControlName（子项）-----> ControlValue（子项）

当窗体关闭时，您将每个控件的值保存在注册表中

加载表单时，您会读取值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:07:51.280

这最好使用 MVC 模式解决，其中模型包含已填充的数据。视图包含它将呈现的方式（例如在 Winforms 中），最后是控制器，除了执行业务逻辑之外，它还需要做一些工作（用于保存状态）。

我更喜欢为此使用序列化。您可以序列化模型字段并将它们读回（仅需要的字段）。

如果您不喜欢序列化，可以尝试写入易于修改的 INI 文件。

第三，您可以使用数据库`mdf`文件来存储状态。

但要做好这一切，您需要修改应用程序以使用 MVC 架构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:23:54.163

如果您对快速而肮脏的解决方案感到满意，您可以试试这个：

实现保存机制：

1.  迭代所有表单控件（如果有面板或其他容器，则递归）
2.  如果控件是编辑的（或其他保存数据的类型），将控件文本连同他的名字一起保存
3.  存储名称、值对（例如 INI 文件）

实现加载机制。这假设值之间没有依赖关系（如果有自动计算字段，请不要保存它们）

1.  从存储中加载值（如果选择文件，文件名可以是表单名）
2.  迭代所有表单控件，如果在加载的数据中找到它的名称，则设置值

一旦实施，此方法可用于所有表单，并且可以处理添加/删除控件。但是，如果有业务规则，使用 MVC 方法并序列化模型可能会更好。

# apache - Codeigniter 图像处理类进程开销

> ID：13173152
> 
> 赞同：0
> 
> 时间：2012-11-01T08:02:51.023
> 
> 标签：apache, codeigniter, image-processing, imagemagick

在 Codeigniter 的图像处理类中，有一个名为“library_path”的首选项，您必须在其中提及二进制文件的路径。这意味着它执行二进制文件。这比使用 apache 扩展需要更多的内存吗？

是否有可以与 CI 一起使用的过程密集程度较低的类或方法？

# iphone - 在ios中将字符串中的两个值相加

> ID：13173156
> 
> 赞同：0
> 
> 时间：2012-11-01T08:03:04.763
> 
> 标签：iphone, ios, nsstring, nstimer, nstimeinterval

我想将字符串中的值添加在一起，格式为：“HH:mm:ss.SSS”并再次显示。就我而言，它是添加不同的 timeString 来获取 currentString。我不确定正确的做法。我肯定做错了。我面临的问题是，当我单击停止按钮并再次单击开始时，它再次从 0 开始。我希望它从停止的同一个位置开始。

部分代码在这里：

```
-(void)updateTimer{
    currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH:mm:ss.SSS"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    timeString=[dateFormatter stringFromDate:timerDate];
    currentString=[dateFormatter stringFromDate:timerDate];
    //double doubleOfString = [timeString doubleValue] + [difference doubleValue];
    //currentString = [NSString stringWithFormat:@"%f",doubleOfString];
    lbl.text = currentString;
} 
```

整个代码在这里：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UITableViewDataSource,UITableViewDelegate>{
    UILabel *lbl;
    NSTimer *stopTimer;
    NSDate *startDate,*currentDate;
    BOOL running,lap;
    UIButton *bttn;
    NSMutableArray *tableItems;
    NSString *timeString,*currentString,*difference;
    UITableView *tableview;
}

@property (strong,nonatomic) IBOutlet UILabel *lbl;
@property (strong,nonatomic) IBOutlet UIButton *bttn;
@property (strong,nonatomic) NSMutableArray *tableItems;
@property (strong,nonatomic) NSString *timeString;
@property (strong,nonatomic) IBOutlet UITableView *tableview;

-(IBAction)startPressed:(id)sender;
-(IBAction)resetPressed:(id)sender;

-(void)updateTimer;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize lbl,bttn,tableItems,timeString,tableview;

- (void)viewDidLoad
{
    [super viewDidLoad];
    lbl.text = @"00.00.00.000";
    running = FALSE;
    lap = FALSE;
    difference = @"0";
    startDate = [NSDate date];
    tableItems = [[NSMutableArray alloc] init];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(IBAction)startPressed:(id)sender{
    if(!running){
        running = TRUE;
        lap = TRUE;
        [sender setTitle:@"Stop" forState:UIControlStateNormal];
        [bttn setTitle:@"Lap" forState:UIControlStateNormal];
        if (stopTimer == nil) {
            stopTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
                                                         target:self
                                                       selector:@selector(updateTimer)
                                                       userInfo:nil
                                                        repeats:YES];
        }
    }else{
        running = FALSE;
        lap = FALSE;
        startDate = currentDate;
        difference = currentString;
        [sender setTitle:@"Start" forState:UIControlStateNormal];
        [bttn setTitle:@"Restart" forState:UIControlStateNormal];
        [stopTimer invalidate];
        stopTimer = nil;
    }

}
-(void)updateTimer{
    currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH:mm:ss.SSS"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    timeString=[dateFormatter stringFromDate:timerDate];
    currentString=[dateFormatter stringFromDate:timerDate];
    double doubleOfString = [timeString doubleValue] + [difference doubleValue];
    //currentString = [NSString stringWithFormat:@"%f",doubleOfString];
    lbl.text = currentString;
}

-(IBAction)resetPressed:(id)sender{
    if (!lap) {
        [stopTimer invalidate];
        stopTimer = nil;
        tableItems = [[NSMutableArray alloc] init];
        startDate = [NSDate date];
        lbl.text = @"00.00.00.000";
        running = FALSE;
    }
    else{
        [tableItems insertObject:timeString atIndex:0];
        [tableview reloadData];
    }

}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return tableItems.count;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    //Step 1:Check whether if we can reuse a cell
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    //Step2: If there are no new cells to reuse,create a new one
    if(cell ==  nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault) reuseIdentifier:@"cell"];
        //UIView *v = [[UIView alloc] init];
        //v.backgroundColor = [UIColor redColor];
        //cell.selectedBackgroundView = v;
        //changing the radius of the corners
        //cell.layer.cornerRadius = 10;

    }

    //Step 3: Set the cell text content
    cell.textLabel.text = [tableItems objectAtIndex:indexPath.row];

    //Step 4: Return the row
    return cell;

}

@end 
```

我欢迎您提出任何其他更正建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:34:29.903

您的更新计时器功能将是：首先添加`int counter`.h 文件。在 viewDidLoad`counter = 0;`

```
 -(void)updateTimer{

  counter ++;
  int hours = counter / 3600 ;
  int minutes = (counter / 60) - (hours * 60); 
  int seconds = counter - (hours * 3600) - (minutes * 60);

  lbl.text = [NSString stringWithFormat:@"%02d:%02d:%02d", hours, minutes, seconds];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T08:15:46.170

我建议不要将*数学*应用于*字符串*。

我的意思是：
“apple”和“Millenium Falcon”这两个词的总和是多少？没有任何意义，不是吗？

那么，当你有一个非常好的数字 ( ) —— 一个非常适合执行代数运算的类型时，你为什么要尝试形成两个字符串的**加法呢？**`timeInterval`

PS：
`NSDateFormatter`实例希望被重用。将你的存储在一个实例变量中。

# php - 如何使用年龄验证脚本正确重定向？

> ID：13173160
> 
> 赞同：2
> 
> 时间：2012-11-01T08:03:22.230
> 
> 标签：php, javascript

经过大量搜索以及反复试验，我难住了。重定向不允许我访问实际站点的代码有什么问题？我无法获取年龄输入以将我引导至主站点或 index.php。如果答案错误，无论输入的日期如何，都会重定向到用户会去的地方——在这种情况下是 youtube。

这是我在本地工作的 index.php 中的内容：

```
<?php

@session_start();
$url = 'http://localhost/J2.5/index.php';

if (!isset($_COOKIE['Visited'])) {
    $_COOKIE['Visited'] = 1;
    $url = 'http://localhost/J2.5/ageverificationone.php';
}

header("Location: {$url}");

?> 
```

该部分非常适合弹出年龄验证脚本所在的实际页面-ageverificationone.php（可以是任何名称..尝试了很多变体）：

```
<?php
session_start(); 

if($_SERVER['REQUEST_METHOD']=='POST') 
{ 
if(isset($_POST['YES'])) 
{ 
$redirect=isset($_GET['return'])?urldecode($_GET['return']):'./'; 
$expire=isset($_GET['x']) && is_numeric($_GET['x'])?intval($_GET['x']):-1; 
if($expire==-1) 
{ 
$_SESSION['verified']="yes"; 
header("location: ".$redirect); 
exit(0); 
} 
if($expire==0) 
{ 
setcookie("verified", "yes",mktime(0,0,0,01,01,date("Y")+30)); 
$_SESSION['verified']="yes"; 
header("location: ".$redirect); 
exit(0); 
} 
setcookie("verified", "yes",(time()+$expire)); 
$_SESSION['verified']="yes"; 
header("location: http://www.superiorvaping.com/"); 
exit(0); 
}else{ 
header("location: http://www.youtube.com/watch?v=gppbrYIcR80"); 
exit(0); 
} 
} 

?>
<html>
<head>
<title>Age Verification</title>
<script language=Javascript>
  <!--
  function isNumberKey(evt)
  {
     var charCode = (evt.which) ? evt.which : event.keyCode
     if (charCode != 46 && charCode > 31 && (charCode < 48 || charCode > 57))
        return false;

     return true;
  }
  //-->
</script>
<script type="text/javascript">
function jumpField(elmnt,content)
{
if (content.length==elmnt.maxLength)
{
next=elmnt.tabIndex
if (next<document.forms[0].elements.length)
    {
    document.forms[0].elements[next].focus()
    }
}
}
</script>
<script src="http://cdn.jquerytools.org/1.2.5/full/jquery.tools.min.js"></script> 
<script src="js/fade.js" type="text/javascript"></script>
<link href="js/ageverify.css" type="text/css" rel="stylesheet" />
</head>
<body id="body" OnLoad="document.ageVerifyForm.month.focus();">
<img src="images/logoVerify.png" alt="Superior Vaping" id="logoVerify" /><br />
<p id="welcome">Welcome! Please enter your date of birth.</p>
<form id="ageVerifyForm" name="ageVerifyForm" action="" method="POST" onsubmit="return     formCheck(this);">
<input type="text" tabindex="1" onkeypress="return isNumberKey(event)" onkeyup="jumpField(this,this.value)" id="month" name="month" maxlength="2" size="2" required="required" value="MM" onfocus="value=''" />
<input type="text" tabindex="2" onkeypress="return isNumberKey(event)" onkeyup="jumpField(this,this.value)" id="day" name="day" maxlength="2" size="2" required="required" value="DD" onfocus="value=''"  />
<input type="text" tabindex="3" onkeypress="return isNumberKey(event)" onkeyup="jumpField(this,this.value)" id="year" name="year" maxlength="4" size="4" required="required" value="YYYY" onfocus="value=''" />
<br />
<input type="submit" value="Enter Superior Vaping" id="submit" name="submit" />
</form>
<script language="JavaScript">
<!--
function formCheck(formobj){
// Enter name of mandatory fields
var fieldRequired = Array("month", "day", "year");
// Enter field description to appear in the dialog box
var fieldDescription = Array("month", "day", "year");
// dialog message
var alertMsg = "Please complete the following fields:\n";

var l_Msg = alertMsg.length;

for (var i = 0; i < fieldRequired.length; i++){
    var obj = formobj.elements[fieldRequired[i]];
    if (obj){
        switch(obj.type){
        case "select-one":
            if (obj.selectedIndex == -1 || obj.options[obj.selectedIndex].text == ""){
                alertMsg += " - " + fieldDescription[i] + "\n";
            }
            break;
        case "select-multiple":
            if (obj.selectedIndex == -1){
                alertMsg += " - " + fieldDescription[i] + "\n";
            }
            break;
        case "text":
        case "textarea":
            if (obj.value == "" || obj.value == null){
                alertMsg += " - " + fieldDescription[i] + "\n";
            }
            break;
        default:
        }
        if (obj.type == undefined){
            var blnchecked = false;
            for (var j = 0; j < obj.length; j++){
                if (obj[j].checked){
                    blnchecked = true;
                }
            }

        }
    }
}

if (alertMsg.length == l_Msg){
    return true;
}else{
    document.getElementById("error").innerHTML="All Fields Must be Filled out";
    return false;
}
}
// -->
</script>

</body>
</html> 
```

我在 Joomla 基础中使用它。这是几个脚本拼凑在一起，至少可以发挥它的作用。如前所述，缺少最后一步 - 使用 cookie 获得正确的重定向，因此用户只能获得一次年龄验证，并且无论进入页面如何，它都会出现。这是针对电子烟网站的，他们要求进行年龄验证。

我正在使用 WAMP 作为开发基础在本地执行此操作。

谢谢托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:44:19.443

尝试从以下位置更改您的 php 代码：

```
if (!isset($_COOKIE['Visited'])) { 
```

至：

```
if (!isset($_COOKIE['verified'])) { 
```

或者：

```
if($_SESSION['verified'] != "yes"){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T21:42:36.203

KI发现了问题，好像不能使用$_COOKIE["Visited"]，肯定是系统标准之类的东西，所以要改成别的东西：visitedherebefore。这是我如何让它工作的：

```
<?php

@session_start();
$showform = false;

    //created my own date function
function age($dob){ 
    $date1 = new DateTime(date("Y-m-d", strtotime($dob)));
    $date2 = new DateTime(date("Y-m-d"));
    $interval = $date1->diff($date2);
    return $interval->y;
}

    //if a form is submitted do the following
if(array_key_exists("submit", $_POST)){
    $m = $_POST["month"];
    $d = $_POST["day"];
    $y = $_POST["year"];

    $age = age($y."-".$m."-".$d);
    //check age here
    if($age > 17){
                    //set cookie here and redirect here if you want
        setcookie('visitedherebefore', 'Cookies seems legit', time() + 3600);
        die("Old enough... nuff said...");
    }else{
                    //redirect here as well
        die("Too Young Sorry! you will now be redirected");
    }
}

    //check if user has been here before, redirect here as well if you want
if (isset($_COOKIE['visitedherebefore'])) {
  print "welcome back!";
  die();
} 
```

?>

```
<form action="index.php" method="post">
    <input type="text" tabindex="1" onkeypress="return isNumberKey(event)" onkeyup="jumpField(this,this.value)" id="month" name="month" maxlength="2" size="2" required="required" value="MM" onfocus="value=''" />
    <input type="text" tabindex="2" onkeypress="return isNumberKey(event)" onkeyup="jumpField(this,this.value)" id="day" name="day" maxlength="2" size="2" required="required" value="DD" onfocus="value=''"  />
    <input type="text" tabindex="3" onkeypress="return isNumberKey(event)" onkeyup="jumpField(this,this.value)" id="year" name="year" maxlength="4" size="4" required="required" value="YYYY" onfocus="value=''" />
    <br />
    <input type="submit" value="Enter Superior Vaping" id="submit" name="submit" />
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T00:54:04.697

令我惊讶的是，我能够完成以下工作。我不认为我在编码方面做得更好，只是更加勤奋和不愿放弃。这是我的决心：记住，我正在开发 Joomla！平台，因此 index.php 是站点中每个页面的基础页面。因此，无论访问者使用哪个页面进入验证，初始代码都必须进入 templates/?template-name?/index.php

```
<?php   
    if(!isset($_COOKIE['legal'])) {         
    header("Location: verifyage.php");   
    }

    if($_COOKIE['legal'] == "no")
                    {
                    header("Location: http://www.google.com/");  
                    } 
```

?>

然后，在 verifyage.php 中，我使用了以下内容：

```
<?php
    /*if the cookie already exists from a previous remember me button click then skip this page*/                   
    error_reporting(E_ALL ^ E_NOTICE); //I don't know if that's right, but it works to keep the 1 error off the page - not by fixing, but hiding the error of legal not defined

    if($_COOKIE['legal'] == "yes")
                    {
                    header("Location: index.php");   
                    }                       

    if (isset($_POST['checkage'])) 
    {
    $day = '';
    $month = '';
    $year = '';
    $minage = '18';

    if(isset($_POST['day']))
            {
            $day = $_POST['day'];
            }

    if(isset($_POST['month']))
            {
            $month = $_POST['month'];
            }

    if(isset($_POST['year']))
            {
            $year = $_POST['year'];
            }

    $birthstamp = mktime(0, 0, 0, $month, $day, $year);
    $diff = time() - $birthstamp;
    $age_years = floor($diff / 31556926);

    if($age_years >= $minage) 
            {
            if($rembox=="yes")
                    {
                    setcookie('legal', 'yes', time() + 31556926);
                    }
                    else{
                    setcookie('legal', 'yes', 0);

                    }
                    $url = 'index.php';
            } 
    else 
            {
            setcookie('legal', 'no', 0);
            $url = 'http://www.google.com/';
            }

    header('Location: '.$url.'');
    } 
```

?>

在同一页面中，我添加了以下 HTML，它提供了灯箱效果并创建了输入字段：

```
<html>
<head>
<title>Age Verification</title>
<script language=Javascript>
  <!--
  function isNumberKey(evt)
  {
     var charCode = (evt.which) ? evt.which : event.keyCode
     if (charCode != 46 && charCode > 31 && (charCode < 48 || charCode > 57))
        return false;

     return true;
  }
  //-->
</script>
<script type="text/javascript">
function jumpField(elmnt,content)
{
if (content.length==elmnt.maxLength)
{
next=elmnt.tabIndex
if (next<document.forms[0].elements.length)
    {
    document.forms[0].elements[next].focus()
    }
    }
}
</script>
<script src="http://cdn.jquerytools.org/1.2.5/full/jquery.tools.min.js"></script> 
<script src="js/fade.js" type="text/javascript"></script>
<link href="js/ageverify.css" type="text/css" rel="stylesheet" />
</head>
<body id="body" OnLoad="document.ageVerifyForm.month.focus();">
<img src="images/logoVerify.png" alt="Superior Vaping" id="logoVerify" /><br />
<p id="welcome">Welcome! Please enter your date of birth.</p>
<form id="ageVerifyForm" name="ageVerifyForm" action="" method="POST" onsubmit="return formCheck(this);">
<input type="text" tabindex="1" onkeypress="return isNumberKey(event)" onkeyup="jumpField(this,this.value)" id="month" name="month" maxlength="2" size="2" required="required" value="MM" onfocus="value=''" />
<input type="text" tabindex="2" onkeypress="return isNumberKey(event)" onkeyup="jumpField(this,this.value)" id="day" name="day" maxlength="2" size="2" required="required" value="DD" onfocus="value=''"  />
<input type="text" tabindex="3" onkeypress="return isNumberKey(event)" onkeyup="jumpField(this,this.value)" id="year" name="year" maxlength="4" size="4" required="required" value="YYYY" onfocus="value=''" />
<br />
<input type="submit" value="Verify Your Entry" id="submit" name="checkage" />
</form>
<script language="JavaScript">
<!--
function formCheck(formobj){
// Enter name of mandatory fields
var fieldRequired = Array("month", "day", "year");
// Enter field description to appear in the dialog box
var fieldDescription = Array("month", "day", "year");
// dialog message
var alertMsg = "Please complete the following fields:\n";

var l_Msg = alertMsg.length;

for (var i = 0; i < fieldRequired.length; i++){
    var obj = formobj.elements[fieldRequired[i]];
    if (obj){
        switch(obj.type){
        case "select-one":
            if (obj.selectedIndex == -1 || obj.options[obj.selectedIndex].text == ""){
                alertMsg += " - " + fieldDescription[i] + "\n";
            }
            break;
        case "select-multiple":
            if (obj.selectedIndex == -1){
                alertMsg += " - " + fieldDescription[i] + "\n";
            }
            break;
        case "text":
        case "textarea":
            if (obj.value == "" || obj.value == null){
                alertMsg += " - " + fieldDescription[i] + "\n";
            }
            break;
        default:
        }
        if (obj.type == undefined){
            var blnchecked = false;
            for (var j = 0; j < obj.length; j++){
                if (obj[j].checked){
                    blnchecked = true;
                }
            }

        }
      }
    }

if (alertMsg.length == l_Msg){
    return true;
    }else{
    document.getElementById("error").innerHTML="All Fields Must be Filled out";
    return false;
    }
}
// -->
</script>
<p id="error"></p><br />
</body>
</html> 
```

当我在这里发布代码时，我可以看到“可能”有一些代码或行是不必要的。但我可以说它运行良好，我已经将代码实现到了实时站点中。如果有人认为有一些“不要那样做”或“我不会……”，请随时插话，因为我并没有声称自己是任何专家。我只是在一个月前发布了我所寻求的解决方案。我很确定可以删除 Onload。我感谢 Relentless 提供的所有帮助。我希望发布此内容对其他人有价值。如果您有任何疑问或想告诉我我做了一些不可原谅的事情，我愿意提供所有信息。谢谢。

# assembly - 如何使用缓冲区溢出攻击替换堆栈上的返回地址

> ID：13173162
> 
> 赞同：4
> 
> 时间：2012-11-01T08:03:25.430
> 
> 标签：assembly, x86, buffer-overflow

对于家庭作业，我正在执行一系列缓冲区溢出攻击。我得到了一个反汇编程序，一个不正确调用的函数的 C 源代码`gets()`，以及我应该强制程序调用的其他几个函数的源代码。对于其中一项任务，我必须：

*   注入一些改变值的代码，然后
*   返回上述方法之一

在确定返回的位置时，我不明白程序在堆栈中的位置的主要内容。存储在堆栈中的方法的返回地址在哪里？

该程序是为 x86 编译的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-01T09:43:18.153

你需要知道的：

*   EIP 是指向下一条要执行的指令的寄存器。
*   调用函数时，参数和 EIP（因此被调用的函数知道返回到哪里）都保存在堆栈中。

*   当编译器被告知（显式或隐式）使用帧指针时，它会将帧指针（在 EBP 寄存器中）保存在堆栈中（以便稍后将帧指针恢复为调用函数中的值） ，然后将帧指针设置为指向当前栈顶。这允许从已知的参考点（帧指针）轻松访问参数和局部变量，并大大简化了调试。

*   然后，为局部变量保留空间，并执行函数。
*   从函数返回时，恢复前一帧指针和指令指针。

x86 上的函数调用如下所示：

```
 ...
int main()                              add  $-0x8,%esp ; alignment
{                                       push $0x2       ; arg 2
        ...                             push $0x1       ; arg 1
        func(1, 2);                     call func       ; function call
        ...                             add  $0x10,%esp ; pop args from stack
}                                       ... 
```

被调用的函数看起来像：

```
void func(int arg1, int arg2)           push %ebp       ;\
{                                       mov  %esp,%ebp  ;/ create stack frame
        int local1;                     sub  $0x18,%esp ; reserves space
        ...                             ...
}                                       mov  %ebp,%esp  ;\
                                        pop  %ebp       ;/ destroys frame
                                        ret             ; returns 
```

因此，堆栈将类似于：

```
 :           :
          +-----------+
          : alignment :
          +-----------+
12(%ebp)  |   arg2    |
          +-----------+
 8(%ebp)  |   arg1    |
          +-----------+
 4(%ebp)  |    ret    | -----> return address
          +-----------+
  (%ebp)  |    ebp    | -----> previous ebp
          +-----------+
-4(%ebp)  |  local1   | -----> local vars
          +-----------+
          : alignment :
          +-----------+
          :           : 
```

（较低的地址在 ASCII-art 上较低）

# security - NTP 服务器应该驻留在 DMZ 中吗？有哪些安全问题？

> ID：13173163
> 
> 赞同：1
> 
> 时间：2012-11-01T08:03:36.760
> 
> 标签：security, ntp, dmz

NTP 服务器应该驻留在 DMZ 中吗？有哪些安全问题？我正在做网络架构安全审查。

# html - 如何垂直滚动多个UL设置？

> ID：13173164
> 
> 赞同：1
> 
> 时间：2012-11-01T08:03:43.233
> 
> 标签：html, css, css-float, html-lists

我想`ul`垂直滚动多个集合。

```
<section class="main_nav_dropdown dark_blue fl">
    <ul class="unstyled fl archive_list"></ul>
    <ul class="unstyled fl archive_list"></ul>
    <ul class="unstyled fl archive_list"></ul>
    <ul class="unstyled fl archive_list"></ul>
    <ul class="unstyled fl archive_list"></ul>
    <ul class="unstyled fl archive_list"></ul>
    <ul class="unstyled fl archive_list"></ul>
    <ul class="unstyled fl archive_list"></ul>
   </section> 
```

每个`ul`都是`float: left`并且已经固定`width`在`200px`. 外部`section`是`900px width`和`overflow-x: scroll;`。如何通过滚动显示所有 ul。因为现在在第 3 次之后，`ul`其他人像图像一样跌到了谷底。![在此处输入图像描述](../Images/9a78fef849914b0b810815ee4635b6ef.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:47:53.000

您必须在部分和 UL 之间再指定一个元素，或者更改`<section>`为`<iframe>`掌握 UL。

```
<div id="outer">
    <div id="inner">
        <ul class="foo left"><li>&nbsp;</li></ul>
        <ul class="foo left"><li>&nbsp;</li></ul>    
        <ul class="foo left"><li>&nbsp;</li></ul>
        <ul class="foo left"><li>&nbsp;</li></ul>
    </div>
</div>​ 
```

[http://jsfiddle.net/CTvHa/](http://jsfiddle.net/CTvHa/)

请原谅我的英语...

# node.js - 无法读取 node_redis hgetall 函数中未定义的属性“长度”

> ID：13173166
> 
> 赞同：0
> 
> 时间：2012-11-01T08:04:11.300
> 
> 标签：node.js, coffeescript, redis, asynccallback, node-redis

我有以下代码生成错误：

```
leagueclient.hgetall userLeagueKey, getLeagueInfo 
```

我已经验证密钥是正确的，并且 getLeagueInfo 以正确的返回值正确执行，但在两者之间我得到了无法读取未定义的属性“长度”。调试说它在 hgetall 中。

我在 node_redis 中打开了调试消息

```
send 127.0.0.1:6379 id 2: *2
$7
hgetall
$14
userLeagueId:0

send_command buffered_writes: 0  should_buffer: false
true
Cannot read property 'length' of undefined
net read 127.0.0.1:6379 id 2: *6
$11
challengeId
$1
0
$10
leagueName
$5
Oatmo
$22
currentDiscussionEntry
$1
2 
```

所以错误发生在发送请求并得到结果之后。

知道什么可能导致错误，或者是调试它的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:46:23.070

这里的问题是试图从函数返回结果，而不是通过回调传递结果。我确信这是使用 node 的新程序员的常见问题，所以我想我会提到它。所有依赖于外部访问的函数都必须使用回调。

# javascript - 跨浏览器位置：已修复但仍然失败？

> ID：13173167
> 
> 赞同：2
> 
> 时间：2012-11-01T08:04:11.217
> 
> 标签：javascript, css, position, css-position

以下制作 a 的示例`position : fixed`在我的 FF16.02 / IE9 中不起作用。但据我所知，它应该是跨浏览器兼容的。有任何想法吗？

[JSfiddle 的问题](http://jsfiddle.net/rlemon/rcMe9/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T08:10:46.473

问题在于`document.body.scrollTop`。那不是跨浏览器兼容的。使用`window.scrollY`，它应该可以正常工作。

您的代码将更改为：

```
var foo = document.getElementById('foo');
document.onscroll = function(e) {
    if (window.scrollY > foo.offsetTop) {
        foo.className = "foo sticky";
    } else {
        if (foo.className.indexOf('sticky')) {
            foo.className = "foo";
        }
    }
};​ 
```

[演示](http://jsfiddle.net/rcMe9/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:32:28.103

[更新](http://jsfiddle.net/rcMe9/3/) 打开这个我更新了你也必须 `position:fixed`在 foo div中设置

我认为这是解决方案

# sql - SQL Server + 复合键或唯一 ID

> ID：13173171
> 
> 赞同：5
> 
> 时间：2012-11-01T08:04:14.733
> 
> 标签：sql, database, database-design

我对数据库设计相当陌生，对于多对多关系，创建复合键和唯一 ID 的区别和含义是什么，例如

`Country`桌子

```
CountryID
CountryName 
```

`Language`桌子

```
LanguageID
LangugageName 
```

多对多表 - 使用复合：

```
CountryID  Pkey
LanguageID Pkey 
```

或者

使用唯一 ID：

```
AutoID Pkey
CountryID 
LanguageID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:09:52.370

**复合键：**

复合键是多个列的组合，用于标识表中的唯一行。复合键可以是主键。

**首要的关键**

PRIMARY KEY 约束唯一标识数据库表中的每条记录。

所以这一切都取决于你的要求

在**最初的设计中**

```
Many to Many Table:
Using composite:
CountryID  Pkey
LanguageID Pkey 
```

如果您使用此设计而不是 CountryID 和 LanguageID 是复合主键。即这里

该表的数据将是

```
CountryId  LaguageID
  1           1 //valid
  1           2 //valid
  1           3 //valid
  1           1//not valid data as its form composite primary key 
```

在**第二个设计中**

```
Using Unique Id:
AutoID Pkey
CountryID 
LanguageID 
```

AutoID 成为主键，因此这将允许数据 lke thsi

```
AutoId    CountryId  LaguageID
 1          1           1 //valid
 2          1           2 //valid
 3          1           3 //valid
 4          1           1 //valid as AutoID is primary key
 1          2           3 // invalid as AutoID is prinary key 
```

希望此演示文稿可以帮助您了解差异

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:52:35.860

> 例如，创建复合键和唯一 ID 的区别和含义是什么

您需要在 {CountryID, LanguageID} 上创建一个“自然”键，以避免**在任何情况下**重复连接。唯一的问题是您是否**还**需要 {AutoID} 上的“代理”键？

使用代理键的原因：

*   有引用此联结表的子表（并且您希望保持它们的 FK 苗条或防止 ON CASCADE UPDATE 传播）。
*   您正在使用喜欢简单 PK 的 ORM。

除非其中某些原因适用，否则请仅使用自然键。

*顺便说一句，在支持[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)的 DBMS 下，像这样的自然键通常是集群键的良好候选者。如果您对表进行集群，则每个其他索引（例如代理键下方的索引）都会产生额外的开销（与基于堆的表中的索引相比），因为它需要保留集群键数据的副本并且可能导致双重-抬头。*

另请参阅：[一列作为主键或两个外键作为主键](https://stackoverflow.com/questions/11230062/a-column-as-primary-key-or-two-foreign-keys-as-primary-key/11230592#11230592)。

# com - 使用 VIX 从 VMWare vSphere 获取性能计数器？

> ID：13173178
> 
> 赞同：1
> 
> 时间：2012-11-01T08:04:42.933
> 
> 标签：com, vmware, vix

我可以使用 VMWare PowerCLI 通过命令行获取 CPU 使用率，例如“get-stat -entity $vm -realtime -maxsample $n -stat cpu.usage.average”。

据我所知，PowerCLI 使用 VMWare VIX API 与 vSphere 服务器进行通信。

但是我找不到可以让我获得这样的性能计数器的 VIX API 方法。

我错了吗？或者我应该使用完整的 VMWare SDK 而不是 VIX 来获取性能数据？谢谢你。

# android - Mapview 移动汽车图标

> ID：13173179
> 
> 赞同：1
> 
> 时间：2012-11-01T08:04:46.373
> 
> 标签：android, android-layout, android-intent, android-mapview

我需要一些方法来移动地图视图中道路上的公共汽车图标。我有地理点数组，其中包含公共汽车需要通过的所有坐标经度和纬度点，我还需要沿路线创建一些“位移动画”

我使用 Overlay 类每 1 秒设置一个总线图标

```
class BusOverlay extends ItemizedOverlay<OverlayItem> {

    private Context context = null;
    private List<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    private MediaPlayer mediaPop;

    public BusOverlay(Drawable defaultMarker, Context context) {
        super(boundCenterBottom(defaultMarker));
        this.context = context;
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
    }

    @Override
    public int size() {
        return mOverlays.size();
    }

    public void addOverlayItem(OverlayItem overlayItem) {
        mOverlays.add(overlayItem);
        populate();
    }

    public void addOverlayItem(int lat, int lon, String title) {
        GeoPoint point = new GeoPoint(lat, lon);
        OverlayItem overlayItem = new OverlayItem(point, title, title);

        addOverlayItem(overlayItem);
    }

    public void removeOverlay(OverlayItem overlay) {
        mOverlays.remove(overlay);
        populate();
    }

    public void removeOverlayItem(int lat, int lon, String title) {
        GeoPoint point = new GeoPoint(lat, lon);
        OverlayItem overlayItem = new OverlayItem(point, title, title);

        removeOverlay(overlayItem);
    }

    protected boolean onTap(int index) {

        super.onTap(index);

        return true;
    }

} 
```

在我的活动类中，我使用了 Runable 方法

```
Drawable busLocationIcon = this.getResources().getDrawable(
                R.drawable.bus_location);
        final BusOverlay itemizedBusLocartionOverlay = new BusOverlay(
                busLocationIcon, this);

        int countBus = 0;
        myRunnable = new Runnable() {
            public void run() {

                try {

                    itemizedBusLocartionOverlay.addOverlayItem((int) (Double
                            .parseDouble(Main.jsonArrayBus.getJSONObject(
                                    countBus).getString("StopLat")) * 1000000),
                            (int) (Double.parseDouble(Main.jsonArrayBus
                                    .getJSONObject(countBus).getString(
                                            "StopLon")) * 1000000), "The Bus");

                    countBus++;

                    mapView.getOverlays().add(itemizedBusLocartionOverlay);
                } catch (NumberFormatException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                //Hendler
                h.postDelayed(myRunnable, 1000);
            }
        };
        h.postDelayed(myRunnable, 1000); 
```

但是效果不好。。

请帮我。

# java - Scala（或Java）中泛型函数的专业化

> ID：13173181
> 
> 赞同：29
> 
> 时间：2012-11-01T08:04:57.020
> 
> 标签：java, scala, generics, specialized-annotation

是否可以在 Scala 中专门化泛型函数（或类）？例如，我想编写一个将数据写入 ByteBuffer 的通用函数：

```
def writeData[T](buffer: ByteBuffer, data: T) = buffer.put(data) 
```

但是由于 put 方法只需要一个字节并将其放入缓冲区，因此我需要将其专门用于 Ints 和 Longs，如下所示：

```
def writeData[Int](buffer: ByteBuffer, data: Int) = buffer.putInt(data)
def writeData[Long](buffer: ByteBuffer, data: Long) = buffer.putLong(data) 
```

它不会编译。当然，我可以分别编写 3 个不同的函数 writeByte、writeInt 和 writeLong，但假设数组还有另一个函数：

```
def writeArray[T](buffer: ByteBuffer, array: Array[T]) {
  for (elem <- array) writeData(buffer, elem)
} 
```

如果没有专门的 writeData 函数，这将无法工作：我将不得不部署另一组函数 writeByteArray、writeIntArray、writeLongArray。每当我需要使用依赖于类型的写入函数时，必须以这种方式处理这种情况并不酷。我做了一些研究，一种可能的解决方法是测试参数的类型：

```
def writeArray[T](buffer: ByteBuffer, array: Array[T]) {
  if (array.isInstanceOf[Array[Byte]])
    for (elem <- array) writeByte(buffer, elem)
  else if (array.isInstanceOf[Array[Int]])
    for (elem <- array) writeInt(buffer, elem)
  ...
} 
```

这可能有效，但效率较低，因为类型检查是在运行时完成的，这与专用函数版本不同。

所以我的问题是，在 Scala 或 Java 中解决此类问题的最理想和首选的方法是什么？我提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-01T13:24:38.230

如果您可以同时拥有紧凑且高效的解决方案，那不是很好吗？事实证明，鉴于 Scala 的`@specialized`特性，您可以。首先是一个警告：该功能有些错误，如果您尝试将其用于过于复杂的事情，可能会损坏。但对于这种情况，它几乎是完美的。

注释为每个原始类型创建单独的`@specialized`类和/或方法，然后在编译器确定原始类型是什么时调用它而不是泛型版本。唯一的缺点是它完全自动完成所有这些工作——您无法填写自己的方法。这有点可惜，但是您可以使用类型类来克服这个问题。

让我们看一些代码：

```
import java.nio.ByteBuffer
trait BufferWriter[@specialized(Byte,Int) A]{
  def write(b: ByteBuffer, a: A): Unit
}
class ByteWriter extends BufferWriter[Byte] {
  def write(b: ByteBuffer, a: Byte) { b.put(a) }
}
class IntWriter extends BufferWriter[Int] {
  def write(b: ByteBuffer, a: Int) { b.putInt(a) }
}
object BufferWriters {
  implicit val byteWriter = new ByteWriter
  implicit val intWriter = new IntWriter
} 
```

这给了我们一个`BufferWriter`通用的特征，但是我们用适当的实现覆盖了我们想要的每个特定的原始类型（在本例中为`Byte`和）。`Int`专业化足够聪明，可以将这个显式版本与它通常用于专业化的隐藏版本联系起来。所以你有你的自定义代码，但你如何使用它？这就是隐式 vals 的用武之地（为了速度和清晰度，我已经这样做了）：

```
import BufferWriters._
def write[@specialized(Byte,Int) A: BufferWriter](b: ByteBuffer, ar: Array[A]) {
  val writer = implicitly[BufferWriter[A]]
  var i = 0
  while (i < ar.length) {
    writer.write(b, ar(i))
    i += 1
  }
} 
```

该`A: BufferWriter`符号意味着为了调用此`write`方法，您需要有一个隐式的`BufferWriter[A]`方便。我们已经为他们提供了 vals `BufferWriters`，所以我们应该做好准备。让我们看看这是否有效。

```
val b = ByteBuffer.allocate(6)
write(b, Array[Byte](1,2))
write(b, Array[Int](0x03040506))
scala> b.array
res3: Array[Byte] = Array(1, 2, 3, 4, 5, 6) 
```

如果您将这些东西放在一个文件中并开始在类中查找，`javap -c -private`您会发现正在使用适当的原始方法。

（请注意，如果您不使用专门化，此策略仍然有效，但它必须在循环内将值装箱以将数组复制出来。）

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-01T09:01:35.450

使用类型类模式。与 instanceOf 检查（或模式匹配）相比，它具有类型安全的优势。

```
import java.nio.ByteBuffer

trait BufferWriter[A] {
  def write(buffer: ByteBuffer, a: A)
}

class BuffPimp(buffer: ByteBuffer) {
  def writeData[A: BufferWriter](data: A) = { 
    implicitly[BufferWriter[A]].write(buffer, data)
  }
}

object BuffPimp {
  implicit def intWriter = new BufferWriter[Int] {
    def write(buffer: ByteBuffer, a: Int) = buffer.putInt(a)
  }
  implicit def doubleWriter = new BufferWriter[Double] {
    def write(buffer: ByteBuffer, a: Double) = buffer.putDouble(a)
  }
  implicit def longWriter = new BufferWriter[Long] {
    def write(buffer: ByteBuffer, a: Long) = buffer.putLong(a)
  }
  implicit def wrap(buffer: ByteBuffer) = new BuffPimp(buffer)
}

object Test {
  import BuffPimp._
  val someByteBuffer: ByteBuffer
  someByteBuffer.writeData(1)
  someByteBuffer.writeData(1.0)
  someByteBuffer.writeData(1L)
} 
```

所以这段代码并不是类型类的最佳演示。我对他们还是很陌生。该视频对它们的好处以及如何使用它们进行了非常全面的概述：[http ://www.youtube.com/watch?v=sVMES4RZF-8](http://www.youtube.com/watch?v=sVMES4RZF-8)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T09:53:05.170

1.  声明

    ```
    def writeData[Int](buffer: ByteBuffer, data: Int) 
    def writeData[Long](buffer: ByteBuffer, data: Long) 
    ```

不要编译，因为它们是等价的，因为 Int 和 Long 是`formal`类型参数，而不是标准的 Scala 类型。要使用标准 Scala 类型定义函数，只需编写：

```
def writeData(buffer: ByteBuffer, data: Int) = buffer.putInt(data)
def writeData(buffer: ByteBuffer, data: Long) = buffer.putLong(data) 
```

这样，您可以使用相同的名称声明不同的函数。

1.  由于它们是不同的函数，因此您不能将它们应用于静态未知类型的 List 的元素。您必须首先确定列表的类型。请注意，List 的类型可能是 AnyRef，然后您可以动态确定每个元素的类型。可以按照`isInstanceOf`您的原始代码或按照`rolve`建议使用模式匹配来完成确定。我认为这会产生相同的字节码。

2.  总之，您必须选择：

    *   具有多个功能的快速代码等`writeByteArray, writeIntArray`。它们都可以具有相同的名称`writeArray`，但可以通过它们的实际参数进行静态区分。Dominic Bou-Sa 提出的变体就是这种类型。

    *   具有运行时类型确定的简洁但缓慢的代码

不幸的是，你不能同时拥有快速和简洁的代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T08:57:46.593

这个怎么样：

```
def writeData(buffer: ByteBuffer, data: AnyVal) {
  data match {
    case d: Byte => buffer put d
    case d: Int  => buffer putInt d
    case d: Long => buffer putLong d
    ...
  }
} 
```

在这里，您在方法中区分大小写`writeData`，这使得所有其他方法都非常简单：

```
def writeArray(buffer: ByteBuffer, array: Array[AnyVal]) {
  for (elem <- array) writeData(buffer, elem)
} 
```

* * *

**优点：**简单、简短、易懂。

**缺点：**如果您不处理所有`AnyVal`类型，则不是完全类型安全的：有人可能会调用`writeData(buffer, ())`（第二个参数是 type `Unit`），这可能会导致运行时出错。但是您也可以进行`()`无操作处理，从而解决问题。完整的方法如下所示：

```
def writeData(buffer: ByteBuffer, data: AnyVal) {
  data match {
    case d: Byte   => buffer put d
    case d: Short  => buffer putShort d
    case d: Int    => buffer putInt d
    case d: Long   => buffer putLong d
    case d: Float  => buffer putFloat d
    case d: Double => buffer putDouble d
    case d: Char   => buffer putChar d
    case true      => buffer put 1.asInstanceOf[Byte]
    case false     => buffer put 0.asInstanceOf[Byte]
    case ()        =>
  }
} 
```

顺便说一句，由于 Scala 严格的面向对象的性质，这很容易实现。在 Java 中，原始类型不是对象，这会更加麻烦。在那里，您实际上必须为每个原始类型创建一个单独的方法，除非您想做一些丑陋的装箱和拆箱。

# sql-server-2008 - 查找 SQL Server 2008 计算列依赖项

> ID：13173183
> 
> 赞同：2
> 
> 时间：2012-11-01T08:05:34.863
> 
> 标签：sql-server-2008, tsql, calculated-columns

我想搜索列是否参与计算列表达式。

我想出了这个

```
SELECT 
    (select name 
     from sys.columns 
     where column_id = sys.sql_expression_dependencies.referencing_minor_id 
     and object_id = sys.sql_expression_dependencies.referencing_id) as [dependant_column]
FROM sys.sql_expression_dependencies
WHERE referencing_minor_id > 0 
    and referencing_class = 1 
    and referenced_class = 1 
    and object_name(referencing_id) = 'trns1'
    and referenced_minor_id = (select column_id 
                           from sys.columns 
                           where name = 'class1' 
                           and OBJECT_NAME(object_id) = 'trns1') 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:17:22.460

您想查看 sys.computed_columns 表：

```
select name, definition 
from sys.computed_columns 
```

这是一个非常相似的问题：[SQL Server: Computed Column defintions retrievable from Database?](https://stackoverflow.com/questions/5047099/sql-server-computed-column-defintions-retrievable-from-database)

可能还有更多的人在踢。

# vnc - 如何使用 libvirt 获取 VNC 端口号？

> ID：13173184
> 
> 赞同：12
> 
> 时间：2012-11-01T08:05:35.533
> 
> 标签：vnc, libvirt, port-number

我`autoport=yes`在域的（libvirt 中的“虚拟机”）配置文件中进行了设置，以便在运行时自动分配 VNC 端口。

我需要得到这个端口，这样我才能从外部连接到虚拟机，但我找不到合适的 API 来做这件事。在 python 中更好，因为我使用的是 libvirt-python 绑定。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-14T05:29:59.470

我没有找到任何VNC端口的API，不知道新版本的libvirt是否有这个接口？

但是，您可以使用该命令`virsh vncdisplay $domainName`显示端口。**注意：**您必须修改`/etc/libvirt/qemu.conf`enable `vnc_listen='0.0.0.0'`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-17T23:01:49.663

没有获取 VNC 端口的 API。您必须获取并解析 XML 文件以找出该端口。当然，如果来宾被破坏（断电/离线），该端口的值将是 -1。

```
char * virDomainGetXMLDesc (virDomainPtr domain, unsigned int flags)

<domain>
  <devices>
    <graphics type='vnc' port='5900' autoport='yes'/>
  </devices>
</domain> 
```

### 参考

*   [http://libvirt.org/html/libvirt-libvirt.html#virDomainGetXMLDesc](http://libvirt.org/html/libvirt-libvirt.html#virDomainGetXMLDesc)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-09T14:27:51.650

这是你在 python 中的操作方法，以防万一有人需要。

另存为 vncport.py

```
from xml.etree import ElementTree as ET

import sys
import libvirt

conn = libvirt.open()

domain = conn.lookupByName(sys.argv[1])

#get the XML description of the VM
vmXml = domain.XMLDesc(0)
root = ET.fromstring(vmXml)

#get the VNC port
graphics = root.find('./devices/graphics')
port = graphics.get('port')

print port 
```

运行命令

```
python vncport.py <domain name> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-30T17:58:39.330

如果有人需要，这是 PHP 版本的一个：

```
 $res = libvirt_domain_lookup_by_name($conn, $domname);
    $xmlString = libvirt_domain_get_xml_desc($res, '');

    $xml = simplexml_load_string($xmlString);
    $json = json_encode($xml);
    $data = json_decode($json,TRUE);

    $port = intval($data["devices"]["graphics"]["@attributes"]["port"]); 
```

# ruby-on-rails - not_analyzed 没有按预期工作

> ID：13173185
> 
> 赞同：1
> 
> 时间：2012-11-01T08:05:36.313
> 
> 标签：ruby-on-rails, elasticsearch, tire

映射：

```
include Tire::Model::Search
mapping do
  indexes :name, :boost => 10
  indexes :account_id
  indexes :company_name
  indexes :email, :index => :not_analyzed
end

def to_indexed_json
  to_json( :only => [:name, :account_id, :email, :company_name], 
         )
end 
```

从上面的映射可以看出，email 字段设置为 not_analyzed（没有损坏的令牌）。我有一个电子邮件用户 vamsikrishna@gmail.com。

现在，当我搜索 vamsikrishna 时，结果显示用户......我猜它正在使用默认分析器。为什么？

但是，我猜只有在指定完整的电子邮件时才会显示它（vamsikrishna@gmail.com）。为什么在这种情况下不考虑 :not_analyzed ？请帮忙。

**我只需要将电子邮件字段设置为 not_analyzed，其他字段应使用标准分析器（默认情况下已完成）。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:23:39.143

您正在使用该`_all`字段进行搜索。这意味着您正在使用为 指定的分析器`_all`，而不是为`email`。因此，指定的分析器`email`不会影响您的搜索。

有几种方法可以解决这个问题。首先，您可以修改`_all`字段分析器以区别对待电子邮件。例如，您可以切换到`uax_url_email`用作标记器的`standard`标记器，但不会将电子邮件拆分为标记。

```
curl -XPUT 'http://localhost:9200/test-idx' -d '{
  "settings" : {
    "index": {
      "analysis" :{
        "analyzer": {
          "default": {
            "type" : "custom",
            "tokenizer" : "uax_url_email",
            "filter" : ["standard", "lowercase", "stop"]
          }
        }
      }
    }
  }
}
' 
```

第二种方法是排除`email`字段`_all`并使用您的查询同时[搜索这两个字段](https://gist.github.com/3993902#file_email_search.sh)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:58:31.160

尝试 :analyzer => 'keyword' 而不是 :index => :not_analyzed

它所做的是对字符串进行标记，因此它只能作为一个整体进行搜索。不要忘记重新索引！

参考 - [http://www.elasticsearch.org/guide/reference/index-modules/analysis/keyword-analyzer.html](http://www.elasticsearch.org/guide/reference/index-modules/analysis/keyword-analyzer.html)

而且，如果您通过搜索 vamsikrishna 获得结果，请检查您是否有其他具有相同值的可搜索字段（例如，姓名/公司）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T08:49:03.373

没错，如果未分析特定字段，您应该搜索整个字段内容以便在其上进行匹配。

有两种选择：

*   映射未正确提交。[您可以通过get mapping api](http://www.elasticsearch.org/guide/reference/api/admin-indices-get-mapping.html)检查您当前的映射：“localhost:9200/_mapping”将为您提供所有索引的映射。不是轮胎专家，但您不应该提供 not_analyzed 作为字符串吗？`'not_analyzed'`而不是`:not_analyzed`？
*   如果您看到您的映射在那里，这意味着您正在搜索匹配的其他一些字段。您是否在查询中指定字段的名称？

# .net - Excel 加载项在法语 Excel 中不起作用

> ID：13173187
> 
> 赞同：0
> 
> 时间：2012-11-01T08:06:08.433
> 
> 标签：.net, vb.net, excel

我使用 VB .NET 和 ExcelDNA 为 excel 开发了一个插件。该插件适用于我的电脑和所有具有英文版 excel 的电脑。但是，它不适用于我的具有法语版 Excel 的客户计算机（英文版）。

我收到以下错误：

**旧格式或无效类型库**HResult 0x80028018

我在互联网上花了几个小时，我发现的解决方案是您需要更改文化信息。我将此添加到我的代码中似乎不起作用，

```
 Dim oldCI As System.Globalization.CultureInfo = _
        System.Threading.Thread.CurrentThread.CurrentCulture
        System.Threading.Thread.CurrentThread.CurrentCulture = _
         New System.Globalization.CultureInfo("fr-FR")
        System.Threading.Thread.CurrentThread.CurrentCulture = oldCI 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:22:01.497

好吧，我找到的唯一解决方案是将整个项目转换为 .NET 4.0，现在它可以正常工作了。

# eclipse - 覆盖 Eclipse 中的重命名操作

> ID：13173188
> 
> 赞同：4
> 
> 时间：2012-11-01T08:06:10.500
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我是 Eclipse 插件开发的新手。我需要覆盖特定自定义项目中文件的重命名对话框。假设我在自定义项目中有一个文件“sample.abcd”，它有自己的视角、性质和构建器。所以每当我尝试重命名这个文件时，我都会得到一个带有文件扩展名的重命名对话框。我想覆盖这个对话框，只显示文件名，就像 java 项目重命名操作一样。你能指出我的任何资源，怎么做？谢谢![当前重命名操作](../Images/53a25ce7c487b0b6a2929b543748ce27.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T06:50:29.730

您必须实现一个[重命名重构参与者](http://help.eclipse.org/juno/topic/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ltk_core_refactoring_renameParticipants.html?cp=2_1_1_103)。它的“启用”条件指定了在什么情况下应该涉及（您必须检查您的特定文件扩展名）。

更长的解释也可以在[Eclipse rename/refactoring override](https://stackoverflow.com/questions/6618495/eclipse-rename-refactoring-override)中找到。

# c# - 如何在程序文件中部署带有桌面图标和可写文件的 C# 应用程序（Visual Studio 2010）

> ID：13173189
> 
> 赞同：0
> 
> 时间：2012-11-01T08:06:09.797
> 
> 标签：c#, .net

现在我必须部署一个 C# 应用程序，但我仍然失败了，原因有两个：

1.  我无法为应用程序设置图像图标。
2.  我的应用程序需要读写一个 config.txt 文件，但安装后，我的应用程序无法运行，因为应用程序目录不可写，

我找到了一些在 NET 项目部署中部署应用程序的教程，但它的视频非常简单：[http ://www.youtube.com/watch?v=No1paeGvBtw](http://www.youtube.com/watch?v=No1paeGvBtw)

我会找到解决方案的。希望知道您对此的建议。谢谢

# c - C Devweller 内存错误

> ID：13173192
> 
> 赞同：1
> 
> 时间：2012-11-01T08:06:19.087
> 
> 标签：c, linked-list

我几乎已经完成了类的去元音程序，但是当它到达一个while循环时遇到了内存访问冲突错误，我试图检测链表节点中元音的缺失。我意识到我这样做的方式非常低效（许多逻辑或检查），但我正在努力寻找其他方式来做到这一点。完全糊涂了。不希望有太多帮助，但任何指针（：S）将不胜感激。

[https://gist.github.com/3992412](https://gist.github.com/3992412)

或者，复制粘贴：

```
#include <iostream>
#include <stdlib.h>

struct NODE {
 char letter;
 struct NODE *next;
};

int vowelcheck(struct NODE *llist, int num);
void addnode(struct NODE *llist, char c);
void showsentence(struct NODE *llist);
void devowel(struct NODE *llist);

int main(void) {
 char charin;
 int input = 1;
 struct NODE *llist;
 int nodeno = 0;
 llist = (struct NODE *)malloc(sizeof(struct NODE));
 llist->letter = 0;
 llist->next = NULL;

 while(input != 0) {
  printf("\n\n --Disemvoweler--\n");
  printf("(0) Quit\n");
  printf("(1) Enter sentence\n");
  printf("(2) Disemvowel\n");
  printf("(3) Display parsed sentence\n");
  scanf("%d", &input);

  switch(input) {
   case 0: //exit
   default:
    printf("Exiting\n");
    break;
   case 1: //sentence input
    printf("\nEnter sentence, finish sentence with full stop (.) :\n");
     do
     {
      charin=getchar();
      addnode(llist, charin);
     }
     while (charin != '.');
    break;
   case 2: //remove vowels
    printf("Your choice: `Disembvowel'\n");
    while(llist->next != NULL) {
     devowel(llist);
     llist = llist->next;
    }
    printf("Disembvoweled!\n");
    break;
   case 3: //show sentence in memory (devoweled or not)
    printf("\n Parsed sentence: \n");
    showsentence(llist);
    break;
   }
  }

 free(llist);
 return(0);
}

void showsentence(struct NODE *llist) {
 while(llist->next != NULL) { //while not the last link (ie not full stop)
  printf("%c ", llist->letter); //print letter
  llist = llist->next; //move to next link
 }
}

void addnode(struct NODE *llist, char charin) {
 while(llist->next != NULL)
 llist = llist->next;
 llist->next = (struct NODE *)malloc(sizeof(struct NODE));
 llist->next->letter = charin;
 llist->next->next = NULL;
}

void devowel(struct NODE *llist) {
 struct NODE *temp;
 temp = (struct NODE *)malloc(sizeof(struct NODE));
if(llist->letter == 'A' || llist->letter == 'a' || llist->letter == 'E' || llist->letter == 'e' || llist->letter == 'I' || llist->letter == 'i' || llist->letter == 'O' || llist->letter == 'o' || llist->letter == 'U' || llist->letter == 'u')
{
  /* remove the node */
  temp = llist->next;
  free(llist);
  llist = temp;
 } else {
  while(llist->next->letter != 'A' || llist->next->letter != 'a' || llist->next->letter != 'E' || llist->next->letter != 'e' || llist->next->letter != 'I' || llist->next->letter != 'i' || llist->next->letter != 'O' || llist->next->letter != 'o' || llist->next->letter != 'U' || llist->next->letter != 'u')
    llist = llist->next;
    temp = llist->next->next;
    free(llist->next);
    llist->next = temp;
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:36:55.257

```
while(...HORRIBLE CONDITION DEREFERENCING llist->next SNIPPED...)
    llist = llist->next;
    temp = llist->next->next;
    free(llist->next);
    llist->next = temp;
 } 
```

这段代码至少有两个致命的问题。首先，在 C++ 中，缩进不能确定块，{} 可以，而且你缺少一对。其次，您访问 llist->next 的内容而不检查是否有下一个元素，或者列表是否已经结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:14:09.433

您可能会使用以下内容：

```
int character_is_vowel(char ch)
{
  return strchr("AEIOUaeiou", ch) != NULL;
} 
```

看看我做了什么，那里？我处理了手头的一小部分问题（确定一个字符是否是英语中的元音）并将其分解为程序的一个独立部分。

然后，使用标准库函数来减少重复性当然是另一个通常有益于使代码更具可读性的想法。

关于您的代码，您的链表代码在许多地方都严重损坏。您应该考虑是否真的必须使用链表来实现这一点。这是一个字符串转换，C 中的字符串通常不被视为链表。当然，既然这是上课，我猜你的手被束缚了。

然后，您应该仔细查看*您*所做的所有列表操作，并分析它们是否有意义。考虑内存有效性，检查以确保`NULL`您不会超出列表的末尾，以及（再次）是否有可能将这些操作分解为您可以独立编写、思考和测试的专用函数从您要解决的实际问题出发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T10:19:21.047

关于山脉和鼹鼠丘的警句浮现在脑海中。

这是一个工作程序，它读取输入行，然后取消这些行。

### 样品运行

```
$ ./disemvowel
What's the point of including vowels if you're going to strip 'em all?
Entered: What's the point of including vowels if you're going to strip 'em all?
Disemvowelled: Wht's th pnt f ncldng vwls f y'r gng t strp 'm ll?
$ 
```

### 样品来源

```
#include <string.h>
#include <stdio.h>

static int is_vowel(char c)
{
    return(strchr("aeiouAEIOU", c) != 0);
}

int main(void)
{
    char line[4096];
    while (fgets(line, sizeof(line), stdin) != 0)
    {
        printf("Entered: %s", line);
        char *dst = line;
        char *src = line;
        char c;
        while ((c = *src++) != '\0')
        {
            if (!is_vowel(c))
                *dst++ = c;
        }
        *dst = '\0';
        printf("Disemvowelled: %s", line);
    }
    return(0);
} 
```

如果字符串不包含元音，它会逐字节地复制字符串。但是，在循环中添加一个条件来查看是否`dst < src`会使事情复杂化而带来的好处可以忽略不计（从长远来看，它会减慢速度）。如果要加快速度，可以使用表驱动`is_vowel()`函数：

```
static int is_vowel(char c)
{
    static vowels[256];
    if (vowels['a'] == 0)
    {
        unsigned char *v = "aeiouAEIOU";
        while (*v != '\0')
            vowel[*v++] = 1;
    }
    return vowels[(unsigned char)c];
} 
```

注意可能签名的强制`char c`以`unsigned char`确保没有问题。

下一级别的性能将`is_vowel()`用一个访问全局数组的宏替换该函数，该全局数组`vowels`在首次使用之前已适当初始化。这更难编排（但这是宏通常发生的情况，`<ctype.h>`例如`isalpha()`）。

还要注意，该名称`is_vowel()`避开了`<ctype.h>`标题保留的名称：

> §7.31.2 字符处理`<ctype.h>`
> 
> ¶1 以`is`or开头的函数名称`to`和一个小写字母可以添加到`<ctype.h>`标头中的声明中。

# mysql - 使用jsp根据组合框中的选定值从2个不同的表中检索数据

> ID：13173193
> 
> 赞同：1
> 
> 时间：2012-11-01T08:06:26.110
> 
> 标签：mysql, jsp

如何根据使用 jsp 在组合框中选择的值从 2 个 mysql 表中检索数据。

我尝试了以下代码：

`sqlQuery="select a.Zone,a.Subzone,b.City from Meter_List a,Consumer b where a.Meterid=b.Meterid="+meterid ;`

你能帮我么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:28:15.017

这应该工作

```
sqlQuery="select a.Zone,a.Subzone, b.City from Meter_List AS a,
LEFT JOIN Consumer AS b ON (b.Meterid=a.Meterid) where a.Meterid=" + meterid ; 
```

或者

```
sqlQuery="select a.Zone,a.Subzone, b.City from Meter_List AS a,
INNER JOIN Consumer AS b ON (a.Meterid=b.Meterid) where a.Meterid=" + meterid ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:09:32.183

您需要在 WHERE 部分设置：
`a.Meterid = b.Meterid AND a.Meterid = ?`
并使用准备好的语句（最好，如果可用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T08:10:16.350

您将加入 MeterId 上的两个表，然后使用您的输入过滤其中一列，如下所示：

```
select a.Zone,a.Subzone,b.City 
from 
    Meter_List a 
    JOIN Consumer b 
    ON a.Meterid = b.Meterid 
where a.Meterid = meterid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T08:11:01.137

尝试：

```
sqlQuery="select a.Zone,a.Subzone,b.City from Meter_List a" +
" INNER JOIN Consumer b ON a.Meterid=b.Meterid" +
" where a.Meterid = "+meterid ; 
```

或者

```
sqlQuery="select a.Zone,a.Subzone,b.City from Meter_List a,Consumer b where a.Meterid=b.Meterid AND a.Meterid="+meterid ; 
```

# grails - 带有 Comet 的 Grails 工作示例

> ID：13173195
> 
> 赞同：3
> 
> 时间：2012-11-01T08:07:07.200
> 
> 标签：grails, comet, server-push, cometd, bayeux

我正在尝试通过编写几个简单的示例，在使用[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29 "Comet (programming)")的Grails 应用程序中实现服务器[推送技术](http://en.wikipedia.org/wiki/Push_technology "推动技术")，但我正在努力让它真正发挥作用。我一直在尝试以下 2 个链接中的 2 个示例，但它不起作用。从某种意义上说，我无法看到预期的结果，尽管我没有收到任何错误/异常。

*   [将 Cometd 2.x 与 Grails 一起使用](http://metasieve.wordpress.com/2010/08/25/using-cometd-2-x-with-grails/ "将 Cometd 2.x 与 Grails 一起使用")
*   [基于 Grails 的 Comet（Bayeux 协议）](http://www.jroller.com/wiradikusuma/entry/grails_based_comet_bayeux_protocol "基于 Grails 的 Comet（Bayeux 协议）")

任何以工作示例、指针、链接、建议等形式提供的帮助都非常感谢。

**注意：**正如你从上面的帖子中看到的，这篇文章有 2-3 年的历史。目前，我正在运行 Grails v2.1.0，[cometd 插件](http://www.grails.org/plugin/cometd "CometD 插件")是 v0.2.2。IDE 是 NetBeans v7.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T10:35:04.257

不过，我设法使用 Grails [Events Push Plugin](http://grails.org/plugin/events-push "事件推送插件")找到了服务器推送技术的解决方案，而不是 Cometd / Bayeux。

以下链接有助于实现服务器推送技术：

1.  [带有 Comet 的 Grails 工作示例](http://grails.1312388.n4.nabble.com/Grails-with-Comet-working-example-td4637565.html)
2.  [grails事件推送插件的问题](http://grails.1312388.n4.nabble.com/Issue-with-grails-events-push-plugin-td4633074.html)
3.  [Graeme 的SpringOne2GX](http://www.springsource.org/SpringOne2GX2012 "SpringOne 2GX 2012") Day 1 Keynote 视频中的事件实例-Push in action （转到视频中的 1:06）

# iphone - 想要更改图像栏按钮项目的图像

> ID：13173204
> 
> 赞同：1
> 
> 时间：2012-11-01T08:07:58.540
> 
> 标签：iphone, ios, uitoolbaritem

我已经创建了一个 AVFoundation 相机，现在我想将工具栏项目图像更改为我的自定义图像，当用户点击录制相机按钮时，图像会改变。

我已经完成了这项更改，但问题是我的图像显示为黑白，没有颜色。soplz 对此有帮助。

我的代码是：

```
- (void)viewDidLoad

{
[[self recordButton] setImage:[UIImage imageNamed:@"camara30.png"]]  //first time setting image
}

- (void)captureManagerRecordingBegan:(AVCamCaptureManager *)captureManager
{
    CFRunLoopPerformBlock(CFRunLoopGetMain(), kCFRunLoopCommonModes, ^(void) {
       // [[self recordButton] setTintColor:[UIColor redColor]];
        [[self recordButton] setImage:[UIImage imageNamed:@"record30.png"]];   //changing image when record begun
        [[self recordButton] setEnabled:YES];
    });
}

- (void)captureManagerRecordingFinished:(AVCamCaptureManager *)captureManager
{
    CFRunLoopPerformBlock(CFRunLoopGetMain(), kCFRunLoopCommonModes, ^(void) {
        [[self recordButton] setImage:[UIImage imageNamed:@"camara30.png"]];   //changing image when record end
        [[self recordButton] setEnabled:YES];
    });
} 
```

我开始录制之前的第一个屏幕：

![在此处输入图像描述](../Images/861ef3437b8e234e180f50feb5fc57a4.png)

结束录制后我的第二个屏幕：

![在此处输入图像描述](../Images/ba66d9d7ac5de95900e6e5965e82b2f9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:35:22.413

```
 UIBarButtonItem *temp = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setImage:[UIImage imageNamed:@"BlueMarbleDrop"] forState:UIControlStateNormal];
    button.frame=CGRectMake(0.0, 0.0, 60.0, 30.0);
    [button addTarget:self action:nil forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem* stopBtn = [[UIBarButtonItem alloc] initWithCustomView:button];

    [self.toolBar setItems:[NSArray arrayWithObjects:temp,stopBtn,temp, nil]]; 
```

输出看起来像 ![在此处输入图像描述](../Images/39140a2011687b7b72bf6d32ed8ad969.png)

我从[UIBarButtonItem 拿了这个颜色？](https://stackoverflow.com/questions/664930/uibarbuttonitem-with-color)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:44:06.433

尝试设置图像 [[self recordButton] setImage:[UIImage imageNamed:@"record30.png"] forState:UIControlStateNormal];

# app-store - Mac 应用商店助手工具 Sandboxing

> ID：13173206
> 
> 赞同：3
> 
> 时间：2012-11-01T08:08:19.313
> 
> 标签：app-store, code-signing, helpers, monomac, appstore-sandbox

我的应用程序包含两个可执行文件

*   主应用程序可执行文件
*   用于处理一些文件的小控制台应用程序，此可执行文件位于 Resources 文件夹中（无需 root 权限）

问题是我不知道如何将这个应用程序提交到应用商店，我收到了来自苹果的以下回复

> 签名无效 - 路径 appname.app 处的主应用程序包 appname 已签名，但签名无效。codesign 报告了以下错误：a seal resource is missing or invalid In architecture: i386

如果我删除帮助应用程序，它会绕过此错误，但应用程序根本无法运行。任何人都知道如何嵌入帮助应用程序并将其正确签名到应用商店的好方法或示例？

苹果文档对此并不清楚。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T16:03:19.637

您需要签署主应用程序和辅助控制台工具

签名 .app 已记录在案，因此我将向您描述如何对助手进行代码签名。

*   手动创建一个权利文件并将其添加到帮助项目（您可以从主应用程序复制一个并删除不必要的权利键）
*   创建一个 Info.plist，如[将 Info.plist 添加到单文件工具中](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/CodeSigningGuide/Procedures/Procedures.html#//apple_ref/doc/uid/TP40005929-CH4-SW6)所述（此步骤不是强制性的，但如果您发现帮助程序崩溃，请尝试添加它）

如果主应用程序启动了你应该需要添加的帮助工具

```
com.apple.security.inherit 
```

这在[启用应用程序沙盒继承中进行了描述](http://developer.apple.com/library/mac/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingAppSandbox.html#//apple_ref/doc/uid/TP40011195-CH4-SW1)

如果主应用程序以其他方式与助手交互，可能您需要 XPC 通信，或者如果您很幸运，使用[App Group就足够了](http://developer.apple.com/library/mac/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingAppSandbox.html#//apple_ref/doc/uid/TP40011195-CH4-SW1)

就像是

```
<key>com.apple.security.application-groups</key>
<array>
    <string>$(TeamIdentifierPrefix)my.package</string>
</array> 
```

看看[AppSandboxLoginItemXPCDemo](http://developer.apple.com/library/mac/#samplecode/AppSandboxLoginItemXPCDemo/Introduction/Intro.html#//apple_ref/doc/uid/DTS40012292-Intro-DontLinkElementID_2)

根据我的经验，TeamIdentifierPrefix 在开发环境中必须为空，并在您提交给 MAS 时设置为您的[团队 ID](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/ManagingYourTeam/ManagingYourTeam.html)，请小心处理我对 TeamIdentifierPrefix 的考虑（即尝试自己）

# java - 霍夫曼编码 - 处理 unicode

> ID：13173223
> 
> 赞同：0
> 
> 时间：2012-11-01T08:10:12.120
> 
> 标签：java, unicode, bytearray, huffman-code

我在java中实现了一个霍夫曼编码，它适用于输入文件中的字节数据。但是，它仅在压缩 ascii 时有效。我想扩展它，以便它可以处理大于 1 个字节长的字符，但我不确定如何准确地做到这一点。

```
private static final int CHARS = 256;     
private int [] getByteFrequency(File f) throws FileNotFoundException {
    try {
        FileInputStream fis = new FileInputStream(f);
        byte [] bb = new byte[(int) f.length()];
        int [] aa = new int[CHARS];
            if(fis.read(bb) == bb.length) {
                System.out.print("Uncompressed data: ");
                for(int i = 0; i < bb.length; i++) {
                        System.out.print((char) bb[i]);
                        aa[bb[i]]++;
                }
                System.out.println();
            }
        return aa;
    } catch (FileNotFoundException e) { throw new FileNotFoundException(); 
    } catch (IOException e) { e.printStackTrace(); }
    return null;
} 
```

例如，这是我用来获取文件中字符频率的方法，显然它只适用于单个字节。如果我给它一个 unicode 文件，我会在 处得到一个 ArrayIndexOutOfBoundsException `aa[bb[i]]++;`，而 i 通常是一个负数。我知道这是因为`aa[bb[i]]++;`只看一个字节，而 unicode 字符将不止一个，但我不确定如何更改它。

有人可以给我一些指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:42:05.317

尝试以下操作：

```
private static final int CHARS = 256;     
private int [] getByteFrequency(File f) throws FileNotFoundException {
    try {
        FileInputStream fis = new FileInputStream(f);
        byte [] bb = new byte[(int) f.length()];
        int [] aa = new int[CHARS];
            if(fis.read(bb) == bb.length) {
                System.out.print("Uncompressed data: ");
                for(int i = 0; i < bb.length; i++) {
                        System.out.print((char) bb[i]);
                        aa[((int)bb[i])&0xff]++;
                }
                System.out.println();
            }
        return aa;
    } catch (FileNotFoundException e) { throw new FileNotFoundException(); 
    } catch (IOException e) { e.printStackTrace(); }
    return null;
} 
```

如果我是正确的（我还没有测试过），那么你的问题是 byte 是 java 中的一个 SIGNED 值。转换为整数 + 将其掩码为 0xff 应该正确处理它。

# asp.net - 如何在现有应用程序的 WebAPI 中实现身份验证

> ID：13173227
> 
> 赞同：0
> 
> 时间：2012-11-01T08:10:22.167
> 
> 标签：asp.net, authentication, asp.net-web-api

我正在处理 dotnet framework 3.5 上的现有项目。我想实现 Web API 并想通过使用 jquery 从 javascript 调用这个 webAPI。我想应用基本身份验证，也想使用授权 WebAPI 的 HTTP 方法。在使用 webAPI 之前，我们通过在我们的应用程序中使用 Session 变量来使用简单的身份验证过程，并在页面自身的页面加载方法中检查身份验证和授权过程。

请提出一些更好的想法来在我的应用程序中实现 Web API 身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:55:21.133

一个快速的谷歌带来了很多结果。

[使用过滤器的 Http 身份验证](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-membership-provider/)

[使用消息处理程序的 Http 身份验证](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/)

或者您可以查看包含 Http Basic Auth 等示例的[webapicontrib 。](https://github.com/WebApiContrib/WebAPIContrib)您可能会遇到使用 javascript 调用 api 的 cors 问题，如果您需要，webapicontrib 也有一个 cors 处理程序的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T15:37:06.530

看看 Thinktecture 身份库。这是迄今为止最完整的 ASP.NET 项目，[http ://thinktecture.github.com/Thinktecture.IdentityModel.45/](http://thinktecture.github.com/Thinktecture.IdentityModel.45/)

# html - div大小超出时如何使html文本滚动？

> ID：13173232
> 
> 赞同：3
> 
> 时间：2012-11-01T08:10:49.810
> 
> 标签：html, marquee

我有一个 html 页面，它显示在类似于数字标牌的电视屏幕上。因此，页面上的所有内容都必须在没有任何用户输入的情况下显示。我有一些存储在 mySQL 数据库中的记录以列表格式显示，我想做的是当列表变大以显示时，它会向上滚动（可能一次一行），类似于滚动选框作品。

我关于如何做到这一点的想法充其量是支离破碎的，我希望有人能指出我正确的方向。

顺便说一句，我知道使用选框标签对很多开发人员来说是“邪恶的”，但是在这种情况下，因为没有用户输入，我看不到任何其他方式。

编辑：我的想法是以某种方式获取 div 高度，然后在高度超过预定大小时使用 if 语句触发选取框。

编辑：这是我到目前为止所得到的，使用 JavaScript 来计算 div 高度......

```
<script type="text/javascript">
function divHeight()
{
  var height = document.getElementById("list").offsetHeight;

  if (height > 500)
  {
  activate marquee effect.
  return;
  }
  else
  {
  don't activate marquee effect.
  return;
  }

}
</script> 
```

然后...

```
<body onLoad="divHeight()">
<div id="list">
my list goes here
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:34:12.477

看看这个页面

[http://www.webdesignbooth.com/create-a-vertical-scrolling-news-ticker-with-jquery-and-jcarousel-lite/](http://www.webdesignbooth.com/create-a-vertical-scrolling-news-ticker-with-jquery-and-jcarousel-lite/)

他们使用 jcarousel lite 做到了这一点。我会自己写一个例子，但我发现这个很好的例子首先让我免于这样做；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:08:30.640

好的，我想出了一个用很少的编码就能做到这一点的好方法。如果超出大小，它用于`JavaScript`更改内容。`div`我有想要在里面滚动的文本，`div id="scroll"`并且使用. 这是脚本：`div``mySQL``php`

```
<script type="text/javascript">
var div = document.getElementById("scroll");
var height = div.offsetHeight;
var content = div.innerHTML;

if (height > 500)
{
div.innerHTML = "<marquee direction=\"up\" scrollamount=\"2\" height=\"500px\" onfinish=\"redirect()\" loop=\"1\">" + content + "</marquee>";
}

function redirect()
{
refresh=window.setTimeout(function(){location.href=""},0);
}
</script> 
```

由于此应用程序用于数字标牌，因此`marquee`在显示完整内容后我将其重定向，这就是为什么我拥有`onfinish="redirect"`然后重定向功能的原因。

希望这会对某人有所帮助，我知道我花了很多时间来摸索它。

# data-structures - Bloom Filter 中的误报率

> ID：13173237
> 
> 赞同：0
> 
> 时间：2012-11-01T08:11:01.837
> 
> 标签：data-structures, bloom-filter

关于布隆过滤器的一个快速问题，

如果我分配的布隆过滤器的大小与要插入的元素数量完全相同，并且使用唯一的哈希函数，我能否确保它不会导致误报情况。

请注意，在我的情况下，我知道在创建布隆过滤器之前将要插入的元素数量

谢谢普拉布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:20:14.813

是的你可以。您可以创建一些进行 1:1 映射的哈希函数。但在这种情况下，使用布隆过滤器是没有意义的。布隆过滤器的重点是节省空间。

# oracle - Oracle 中 Select 语句中的 IF-ELSE 问题

> ID：13173241
> 
> 赞同：1
> 
> 时间：2012-11-01T08:11:13.893
> 
> 标签：oracle, select, if-statement

我在 SQL Server 中有以下查询，我正在尝试将其转换为 Oracle 11g。

```
IF '[Param.1]' = 'S' OR '[Param.1]' = 'T' THEN
select * from ULQUEUE
END IF 
```

但是当我在 Oracle 中编写相同的查询时，它会给出错误说明无效的 SQL 语句。那么如何将 IF-ELSE 合并到 Oracle 的 Select 语句中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:22:10.073

您正在转换 T-SQL 语句。Oracle 中的等价物是匿名 PL/SQL 块。

但是，PL/SQL 比 T-SQL 要求更高一些。它需要将行选择为变量。如果查询将返回多行，我们需要定义一个集合变量或使用游标。

根据您的要求，您可以使用以下内容：

```
begin
    if ( &&param1 = 'S' or &&param1 = 'T' ) then
        for lrec in ( select * from ulqueue ) loop
           do_something;
        end loop;
    end if;
end;
/ 
```

我同意这看起来比 T-SQL 需要更多的工作，但 PL/SQL 是一种具有更多功能的适当编程语言。 [了解更多](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/toc.htm)。

# java - Maven存储库阻止特定的IP地址？

> ID：13173244
> 
> 赞同：3
> 
> 时间：2012-11-01T08:11:46.033
> 
> 标签：java, maven, wget

我正在尝试下载文件 [http://repo.maven.apache.org/maven2/org/sonatype/aether/aether-api/1.13.1/aether-api-1.13.1.jar](http://repo.maven.apache.org/maven2/org/sonatype/aether/aether-api/1.13.1/aether-api-1.13.1.jar)作为 maven 构建的一部分通过我的 ci 服务器，但我收到错误：

```
Downloading: http://repo.maven.apache.org/maven2/org/sonatype/aether/aether-api/1.13.1/aether-api-1.13.1.jar
01-Nov-2012 08:44:26    Nov 01, 2012 8:44:26 AM org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryExecute
01-Nov-2012 08:44:26    INFO: I/O exception (java.net.SocketException) caught when processing request: Connection reset
01-Nov-2012 08:44:26    Nov 01, 2012 8:44:26 AM org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryExecute
01-Nov-2012 08:44:26    INFO: Retrying request 
```

在日志中找到此错误后，我尝试使用 wget 手动下载此人工制品，但这也不起作用。进一步调查显示，从该提供商（不同的 ip/相同的 ip 范围）下载另一台服务器也是不可能的。

将此文件从其他提供商下载到服务器同时成功。

我能够 ping repo.maven.apache.org 所以服务器是可以访问的。

我的 ci-server 的 IP 地址是否可能被阻止下载？我是否必须将我的 ci-server 移动到不同的提供商？

（atm 我的 ci-server 托管在 jiffybox/domainfactory，如果这有助于回答问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:45:42.550

maven 的 CDN 提供商目前存在严重问题，请参阅

*   支持论坛
    *   [https://getsatisfaction.com/sonatype/topics/unable_to_dowload_maven_jetty_plugin_version_6_1_26_from_central](https://getsatisfaction.com/sonatype/topics/unable_to_dowload_maven_jetty_plugin_version_6_1_26_from_central)
*   当前问题报告在
    *   [https://issues.sonatype.org/browse/MVNCENTRAL-257](https://issues.sonatype.org/browse/MVNCENTRAL-257)
    *   [https://issues.sonatype.org/browse/MVNCENTRAL-259](https://issues.sonatype.org/browse/MVNCENTRAL-259)
    *   [https://issues.sonatype.org/browse/MVNCENTRAL-260](https://issues.sonatype.org/browse/MVNCENTRAL-260)

所以很明显他们正在努力。

对我来说唯一的解决方法是通过 VPN 隧道下载。

# mysql - 计算并插入来自 Xoops 数据库的评论

> ID：13173252
> 
> 赞同：1
> 
> 时间：2012-11-01T08:12:21.787
> 
> 标签：mysql, sql, count

我正在尝试将 Xoops 帖子转换为 Wordpress。作为其中的一部分，我想获得一个主题的评论数。帖子和回复都在同一个“topic_id”上。如何计算它们并将其发布到新列？

**数据库当前状态**

```
topic_id | subject             |comment_count|
+________+_____________________+_____________+
1    | welcome             | 
1    | Re: welcome         |
2    | hello world         |
2    | Re: hello world     |
2    | Re: hello world     |
3    | hello friends       | 
```

从这里我想将（topic_id 的计数 - 1）作为重播次数（评论计数）。指导我在MYSQL中查询

我想将输出放在同一个表中。(comment_count)

**数据库预期输出**

```
 | topic_id | subject             |comment_count|
   +________+_____________________+_____________+
   | 1   | welcome             | 1 
   | 1   | Re: welcome         | 1
   | 2   | hello world         | 2
   | 2   | Re: hello world     | 2
   | 2   | Re: hello world     | 2
   | 3   | hello friends       | 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:18:18.630

```
 select *,t2.comment_count  from table t1 
     join
     (
       select count(*),CONCAT('Re', ' ', subject) 
        as replay,topic_id as comment_count 
        from table 
        where suject=replay group by topic_id
     ) as t2 on t1.topic_id=t2.topic_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:41:19.393

```
SELECT 
    xoops.topic_id, topic, xoops2.commentCount
FROM 
    xoops JOIN 
(
    SELECT 
        xoops.topic_id,
        commentCount = COUNT(1) - 1
    FROM 
        xoops   
    GROUP BY 
        xoops.topic_id
        ) AS xoops2 ON xoops.topic_ID = xoops2.topic_ID 
```

# asp.net - 缓慢/挂起的 Asp.net Web 应用程序 - 完整转储显示多个线程等待锁定

> ID：13173253
> 
> 赞同：0
> 
> 时间：2012-11-01T08:13:08.853
> 
> 标签：asp.net, performance, freeze, debugdiag

我有一个 Web 应用程序，有时它挂起/执行非常慢。我使用 DebugDiag 进行了完整转储，并尝试使用 Crash/Hang 分析对其进行分析。

总结告诉我，我 7.86% 的线程 (10) 被阻塞并等待`Monitor.Wait`.

但是，当我使用线程检查调用堆栈/堆栈跟踪时，输出以下内容：

```
.NET Call Stack

Function 
System.Threading.Monitor.ObjWait(Boolean, Int32, System.Object) 
System.Threading.Monitor.Wait(System.Object, Int32, Boolean) 
Quartz.Simpl.SimpleThreadPool+WorkerThread.Run() 
System.Threading.ThreadHelper.ThreadStart_Context(System.Object) 
System.Threading.ExecutionContext.runTryCode(System.Object) 
System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode, CleanupCode, System.Object) 
System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object) 
System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean) 
System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object) 
System.Threading.ThreadHelper.ThreadStart() 

Full Call Stack

Function   Source 
ntdll!NtWaitForMultipleObjects+15    
KERNELBASE!WaitForMultipleObjectsEx+100    
kernel32!WaitForMultipleObjectsExImplementation+e0    
clr!WaitForMultipleObjectsEx_SO_TOLERANT+56    
clr!Thread::DoAppropriateAptStateWait+4d    
clr!Thread::DoAppropriateWaitWorker+17d    
clr!Thread::DoAppropriateWait+60    
clr!CLREvent::WaitEx+106    
clr!CLREvent::Wait+19    
clr!Thread::Wait+1d    
clr!Thread::Block+1a    
clr!SyncBlock::Wait+169    
clr!ObjHeader::Wait+2c    
clr!ObjectNative::WaitTimeout+147    
System.Threading.Monitor.Wait(System.Object, Int32, Boolean)    
System.Threading.ThreadHelper.ThreadStart_Context(System.Object)    
System.Threading.ExecutionContext.runTryCode(System.Object)    
clr!CallDescrWorker+33    
clr!CallDescrWorkerWithHandler+8e    
clr!MethodDesc::CallDescr+194    
clr!MethodDesc::CallTargetWorker+21    
clr!MethodDescCallSite::Call+1c    
clr!ExecuteCodeWithGuaranteedCleanupHelper+bb    
clr!ReflectionInvocation::ExecuteCodeWithGuaranteedCleanup+138    
System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)    
System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)    
System.Threading.ThreadHelper.ThreadStart()    
clr!CallDescrWorker+33    
clr!CallDescrWorkerWithHandler+8e    
clr!MethodDesc::CallDescr+194    
clr!MethodDesc::CallTargetWorker+21    
clr!ThreadNative::KickOffThread_Worker+1e1    
clr!Thread::DoExtraWorkForFinalizer+114    
clr!Thread::ShouldChangeAbortToUnload+101    
clr!Thread::ShouldChangeAbortToUnload+399    
clr!Thread::RaiseCrossContextException+3f8    
clr!Thread::DoADCallBack+358    
clr!Thread::DoExtraWorkForFinalizer+fa    
clr!Thread::ShouldChangeAbortToUnload+101    
clr!Thread::ShouldChangeAbortToUnload+399    
clr!Thread::ShouldChangeAbortToUnload+43a    
clr!ManagedThreadBase::KickOff+15    
clr!ThreadNative::KickOffThread+23e    
clr!Thread::intermediateThreadProc+4b    
kernel32!BaseThreadInitThunk+e    
ntdll!__RtlUserThreadStart+70    
ntdll!_RtlUserThreadStart+1b 
```

它实际上并没有告诉我他们正在等待获得哪个锁 - 关于如何获取这些信息的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T23:08:23.197

不幸的是，看起来线程在调用 Monitor.Wait 之前并没有深入很多方法，因此可能更难确定确切的位置。根据堆栈跟踪，查看 Quartz.Simpl.SimpleThreadPool+WorkerThread.Run() 的代码并查看它在哪里调用 Monitor.Wait 以查看它实际在等待什么。

根据代码的数量/质量，这可能是最简单的方法。您还可以安装 Windbg，找到它锁定的对象的地址并检查它，但需要进行一些初始配置以确保它可以加载所需的所有符号。[http://blogs.msdn.com/b/emeadaxsupport/archive/2011/04/10/setting-up-windbg-and-using-symbols.aspx](http://blogs.msdn.com/b/emeadaxsupport/archive/2011/04/10/setting-up-windbg-and-using-symbols.aspx)谈论 Windbg 设置。它是一个强大的工具，但仅检查 Quartz.Simpl.SimpleThreadPool+WorkerThread.Run() 的代码可能会更简单。

# sql-server - 如何构建跨多个表的查询？

> ID：13173258
> 
> 赞同：0
> 
> 时间：2012-11-01T08:13:15.833
> 
> 标签：sql-server

这是我的表：

**顾客**

```
Cust_ID (PK)
Name 
```

**订单**

```
Order_ID (PK)
Cust_ID (FK) 
```

**ORDER_LINE**

```
Order_ID (pk)
Part_ID (FK) 
```

**部分**

```
Part_ID (PK)
Part_Description 
```

现在我想列出每个客户订购的客户详细信息、零件编号和零件描述。

我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:17:07.680

您应该使用 FK 使用“JOIN”，但据我所知，“ORDERS”和“ORDER_LINE”之间没有外键。您确定您没有遗漏表定义中的某些内容，即： ORDER_LINE 应该将 ORDER_ID 作为 FK 吗？希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:16:29.593

你可以尝试类似的东西

```
SELECT  c.*,
        p.*
FROM    CUSTOMER c INNER JOIN
        ORDERS o    ON  c.Cust_ID = o.Cust_ID INNER JOIN
        ORDER_LINE ol   ON  o.Order_ID = ol.Order_Number INNER JOIN
        PART p ON   ol.Part_Number = p.Part_Number 
```

看一下

[加入 (SQL)](http://en.wikipedia.org/wiki/Join_%28SQL%29)

> SQL 连接子句将数据库中两个或多个表的记录组合在一起。

[SQL 连接](http://www.w3schools.com/sql/sql_join.asp)

> JOIN 关键字在 SQL 语句中用于根据这些表中某些列之间的关系从两个或多个表中查询数据。

对于一些图形示例

[加入基础](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T08:16:34.000

您需要的是一个简单直接的方法`JOIN`，如下所示：

```
SELECT 
  c.Cust_ID, 
  c.Name, 
  l.Part_Number, 
  l.Part_Description
FROM CUSTOMER c  
INNER JOIN ORDERS     o  ON c.Cust_ID      = o.Cust_ID
INNER JOIN ORDER_LINE ol ON o.OrdeR_ID     = ol.Order_Number
INNER JOIN PART       l  ON ol.Part_Number = l.Part_Number 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T08:17:01.720

你想要一个 SQL “join”，例如：

```
SELECT c.Name, ol.Part_Number, p.Part_Description
FROM Customer AS c
JOIN Orders AS o ON c.Cust_ID = o.Cust_ID
JOIN Order_Line AS ol ON o.Order_ID = ol.Order_Number
JOIN Part AS p ON ol.Part_Number = p.Part_Number 
```

请注意，如果没有 WHERE 子句，此查询将返回所有客户的所有订单中的所有部分，这将真正影响网络并且在除小型数据库之外的任何其他设备上都表现不佳：

> WHERE (c.Cust_ID = MyCustomerID)

[MySQL](http://dev.mysql.com/doc/refman/5.0/en/join.html)连接语法
[SQL Server](http://msdn.microsoft.com/en-us/library/aa196318%28v=sql.80%29.aspx)连接语法

# c# - visual studio 2012 .net 框架工作兼容性

> ID：13173259
> 
> 赞同：1
> 
> 时间：2012-11-01T08:13:43.053
> 
> 标签：c#, vb.net, visual-studio-2012

你能帮我解决这个问题吗？我可以在 Visual Studio 2012 中运行 .net 2.0 吗？你能指导我看显示框架兼容性的图表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:19:38.743

是的。您可以在[Visual Studio 2012中构建](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio)**.Net v2.0**项目。

以下是 .Net Framework 的所有可用版本的列表：

[http://pasteboard.s3.amazonaws.com/images/uWRTNBl.png](http://pasteboard.s3.amazonaws.com/images/uWRTNBl.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:22:41.373

> 框架定位不保证您的应用程序将正确运行。您必须测试您的应用程序以确保它针对目标版本运行。您不能针对早于 .NET Framework 2.0 的框架版本。

[http://msdn.microsoft.com/en-us/library/bb398197(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/bb398197(v=vs.110).aspx)

简而言之，是的，您可以针对 .NET 2.0 - 不，没有兼容性问题的主要列表。

# php - 从php中的mysql查询中获取结果数组，while循环问题

> ID：13173262
> 
> 赞同：0
> 
> 时间：2012-11-01T08:13:49.323
> 
> 标签：php, mysql

我在 MySql 数据库中有这张表：

![在此处输入图像描述](../Images/7655e4a1c8a45563664fc538eae928b7.png)

运行此查询后：

```
SELECT score, count(*) FROM Coaches group by score ORDER BY score DESC 
```

结果表如下所示：

![在此处输入图像描述](../Images/39c0eaf5561ac6fde26efc5a6eb02a99.png)

现在在 php 中，我尝试获取结果并遍历数组以确定每个教练属于哪个组并在排名中获得他的位置。因此我写了这个：

```
$groupsOfScoresQuery = "SELECT score, count(*) FROM Coaches group by score ORDER BY score DESC";

$result = mysqli_query($dbc, $groupsOfScoresQuery);

if ($result) {  // query did successfully run
$response['topCoaches'] = array();

    if (mysqli_num_rows($result) > 0)   {   
        while ( $rowScore = mysqli_fetch_array($result, MYSQLI_ASSOC) ) {

            $currentRanking++;
            $score = array(); // temp user array for one group of scores
            $numberOfCoaches; // Number of coaches with this particular number of scores
            $scoresGroup; // Scores in the particular group

            $score["scores"] = $rowScore["score"];
            $score["count"] = $rowScore["count(*)"];
            $numberOfCoaches = $score["count"];
            $scoresGroup = $score["scores"];

            $response["scoresGroup"] = $scoresGroup; // HERE IS THE PROBLEM

.
.
.
more processing
} // end WHILE 
```

为什么`$response["scoresGroup"]`总是包含结果中的最后一个值？在这种情况下，这是**123**。我认为这是通过循环的第一次迭代，并且`$response["scoresGroup"]`将保存第一个元素（474），在第二次迭代期间应该保存 382？我在这里做错了什么？我是否使用正确的函数来获取结果？还是我应该使用不同的循环来实现我的目标？我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:22:30.953

```
if (mysqli_num_rows($result) > 0)   {   
        while ( $rowScore = mysqli_fetch_array($result, MYSQLI_ASSOC) ) {

        $currentRanking++;
        $score = array(); // temp user array for one group of scores
        $numberOfCoaches; // Number of coaches with this particular number of scores
        $scoresGroup; // Scores in the particular group

        $score[]["scores"] = $rowScore["score"];
        $score[]["count"] = $rowScore["count(*)"];
        $numberOfCoaches[] = $score["count"];
        $scoresGroup[] = $score["scores"];

        $response[]["scoresGroup"] = $scoresGroup; // HERE IS THE PROBLEM 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T08:26:55.320

查看问题的描述，您需要定义一个多维数组来存储查询结果集中的所有结果。

请参考以下代码片段

```
 $groupsOfScoresQuery = "SELECT score, count(*) FROM Coaches group by score ORDER BY score DESC";

         $result = mysqli_query($dbc, $groupsOfScoresQuery);

       if ($result) {  // query did successfully run
          $response['topCoaches'] = array();

          if (mysqli_num_rows($result) > 0)   {   
          while ( $rowScore = mysqli_fetch_array($result, MYSQLI_ASSOC) ) {

          $currentRanking++;
          $score = array(); // temp user array for one group of scores
          $numberOfCoaches; // Number of coaches with this particular number of scores
          $scoresGroup; // Scores in the particular group

         $score["scores"] = $rowScore["score"];
         $score["count"] = $rowScore["count(*)"];
         $numberOfCoaches = $score["count"];
         $scoresGroup = $score["scores"];

         $response["scoresGroup"][] = $scoresGroup; //Notice the array here

         .
         .
         .
         more processing
         } // end WHILE 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T08:27:28.867

您没有发布`$response`;的预期结构 这是我认为您正在尝试做的事情：

```
while ($rowScore = mysqli_fetch_array($result, MYSQLI_ASSOC)) {
    $response["scoresGroup"][] = array(
        "scores" => $rowScore["score"],
        "count" => $rowScore["count(*)"]
    );
}
// $response["scoresGroup"][0]["scores"] = 474
// $response["scoresGroup"][0]["count"]  = 1
// $response["scoresGroup"][1]["scores"] = 382
// $response["scoresGroup"][1]["count"]  = 1
// $response["scoresGroup"][2]["scores"] = 123
// $response["scoresGroup"][2]["count"]  = 1 
```

也许：

```
while ($rowScore = mysqli_fetch_array($result, MYSQLI_ASSOC)) {
    $response["scoresGroup"][$rowScore["score"]] = $rowScore["count(*)"]
}
// $response["scoresGroup"][474] = 1
// $response["scoresGroup"][382] = 1
// $response["scoresGroup"][123] = 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T08:19:46.607

每次运行循环时，您都在设置 $response['scoresGroup'] ，因此最后它只包含最后一个元素。尝试更改您在每个循环中放入数据的变量。

```
$x++;
$response['scoresGroup' . x] = $scoresGroup; 
```

# c# - MeasureString 奇怪的行为

> ID：13173263
> 
> 赞同：3
> 
> 时间：2012-11-01T08:13:55.420
> 
> 标签：c#, gdi+

如果我在下面使用文本的宽度来计算大小，给我说 500

```
intWidth = (int)objGraphics.MeasureString(String.concat(sImageText1, sImageText2), objFont).Width; 
```

但如果我喜欢这样

```
intWidth = (int)objGraphics.MeasureString(sImageText1, objFont).Width + (int)objGraphics.MeasureString(sImageText2, objFont).Width; 
```

我搜索了很多，并做了很多不同的场景，但如果我们使用带有全文或部分的“MeasureString”测量字符串宽度，仍然会有所不同。

为什么是这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T08:23:16.730

[该文档](http://msdn.microsoft.com/en-us/library/6xe5hazb.aspx)有答案：

> MeasureString 方法设计用于单个字符串，**并在字符串前后包含少量额外空间以允许悬垂字形**。此外，DrawString 方法会调整字形点以优化显示质量，并且可能会显示比 MeasureString 报告的更窄的字符串。**要获取适合布局中相邻字符串的度量（例如，在实现格式化文本时），请使用 MeasureCharacterRanges 方法或采用 StringFormat 的 MeasureString 方法之一，并传递 GenericTypographic.** 此外，确保图形的 TextRenderingHint 是 AntiAlias。

强调的部分是这里的相关内容。

要修复您的代码，请添加必要的参数：

```
intWidth = (int)objGraphics.MeasureString(sImageText1, objFont, 1024, Stringformat.GenericTypographic).Width
           + (int)objGraphics.MeasureString(sImageText2, objFont, 1024, StringFormat.GenericTypographic).Width; 
```

# python - any = lambda v: v 是什么意思？

> ID：13173271
> 
> 赞同：2
> 
> 时间：2012-11-01T08:15:12.640
> 
> 标签：python, lambda

是什么`any = lambda v: v`意思？似乎`v`只有`v`它自己。

```
class Object(object):                   
    """Common base class supporting automatic kwargs->attributes handling,
    and cloning."""
    attrs = ()

    def __init__(self, *args, **kwargs):
        any = lambda v: v
        for name, type_ in self.attrs:  
            value = kwargs.get(name)    
            if value is not None:       
                setattr(self, name, (type_ or any)(value))
            else:                       
                try:                    
                    getattr(self, name) 
                except AttributeError:  
                    setattr(self, name, None) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T08:19:16.743

`lambda v: v`创建一个*恒等函数*，它只返回其参数不变。将其分配给局部变量相当于定义一个局部函数，如下所示：

```
def any(v):
    return v 
```

对于想要调用函数以对参数进行一些处理的代码，对于实际函数不可用或不希望进行处理的情况，它可以用作后备代码。

在您发布的代码中，`type_`逻辑上可能为假（最有可能`None`），这意味着它不会被调用，因此它被替换为标识函数。在这种情况下，作者也可以使用更明确`if`的方法来跳过函数调用，但代价是循环中的额外混乱。

BTW`any`对局部变量来说是一个坏名字，因为它掩盖了具有相同名称和完全不同含义的[内置函数。](http://docs.python.org/2.7/library/functions.html#any)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:19:21.103

`lambda`意思是“动态地创建一个函数”。它是 lambda 演算的一部分（Alonzo Church 的论文）和函数式编程的基础。

该表达式`lambda v: v`创建一个接受参数（`v`在这种情况下）并返回参数的函数

# javascript - 单击图像时将 div 显示为弹出窗口

> ID：13173275
> 
> 赞同：0
> 
> 时间：2012-11-01T08:15:42.990
> 
> 标签：javascript, jquery, html

我有一个图像。

当用户单击图像的特定区域时，我想将不同的 div 显示为弹出窗口。

我想用 jquery & html 来做。

谁能帮我这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:27:30.390

这是示例解决方案的示例：http: [//jsfiddle.net/htEvT/2/](http://jsfiddle.net/htEvT/2/)

**JavaScript**

```
$('#rabbit').click(function (e) {
    var offset = $(this).offset(),
        left = e.pageX - offset.left,
        top = e.pageY - offset.top;
    if (top > $(this).height() / 2) {
        alertDiv('You\'ve cliked under the middle.', 'alert-white');
    } else {
        alertDiv('You\'ve cliked above the middle.', 'alert-gray');
    }
});

function alertDiv(text, cssClass) {
    var alrt = $('<div class="alert ' + cssClass + '">' + text + '</div>');
    $(document.body).append(alrt);
    alrt.click(function () {
        alrt.remove();
    });
}
​ 
```

**CSS**

```
.alert {
    position: absolute;
    left: 30px;
    top: 30px;
    width: 300px;
    height: 200px;
    border: 1px solid black;
}
.alert-white {
    background: white;
}
.alert-gray {
    background: #ccc;
}
​ 
```

**HTML**

```
<img src="http://www.clermontanimal.net/images/lop_rabbit_easter.jpg" id="rabbit" alt="" />​ 
```

如果我的解决方案有任何问题，请告诉我。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:18:39.773

在图像上使用图像映射并在图像的不同部分附加精美的框。由于您尚未发布代码，因此我无法提供相同的编码解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T08:19:43.613

像下面这样的东西应该给你一个如何做到这一点的想法：

```
$("img").click(function() {
  $("body").append("<div class='newdiv'></div>")
})

.newdiv{width:100px; height:300px;border:1px solid red;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T08:20:54.800

我最喜欢的是**[Fancybox](http://fancyapps.com/fancybox/)。**

我还没有看到它做不到的事情。很棒的文档并且被广泛使用，所以如果你需要帮助，其他人很有可能会问同样的问题，并且可以通过简单的谷歌来解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T08:21:07.180

在将显示缩略图的 HTML 页面上创建一个名为“imgbox”的 DIV。DIV 和与 DIV 关联的 CSS 元素 ID 如下所示

```
<div id="imgbox"></div> 
```

的CSS

```
#imgbox 
{
vertical-align : middle;
position : absolute;
border: 1px solid #999;
background : #FFFFFF; 
filter: Alpha(Opacity=100);
visibility : hidden;
height : 200px;
width : 200px;
z-index : 50;
overflow : hidden;
text-align : center; 
```

}

这是显示弹出图像的 JavaScript 代码： 获取缩略图图像的左侧和顶部位置：

```
function getElementLeft(elm) 
{
 var x = 0;

//set x to elm’s offsetLeft
x = elm.offsetLeft;

//set elm to its offsetParent
elm = elm.offsetParent;

//use while loop to check if elm is null
// if not then add current elm’s offsetLeft to x
//offsetTop to y and set elm to its offsetParent

while(elm != null)
{
    x = parseInt(x) + parseInt(elm.offsetLeft);
    elm = elm.offsetParent;
}
return x;
}

function getElementTop(elm) 
{
 var y = 0;

//set x to elm’s offsetLeft
y = elm.offsetTop;

//set elm to its offsetParent
elm = elm.offsetParent;

//use while loop to check if elm is null
// if not then add current elm’s offsetLeft to x
//offsetTop to y and set elm to its offsetParent

while(elm != null)
{
    y = parseInt(y) + parseInt(elm.offsetTop);
    elm = elm.offsetParent;
}

return y;
} 
```

获取缩略图图像源，使DIV可见，将高度和宽度增加到所需大小，并将图像附加到DIV。

```
function Large(obj) 
```

{ var imgbox=document.getElementById("imgbox"); imgbox.style.visibility='可见'; var img = document.createElement("img"); img.src=obj.src; img.style.width='200px'; img.style.height='200px';

```
if(img.addEventListener){
    img.addEventListener('mouseout',Out,false);
} else {
    img.attachEvent('onmouseout',Out);
}             
imgbox.innerHTML='';
imgbox.appendChild(img);
imgbox.style.left=(getElementLeft(obj)-50) +'px';
imgbox.style.top=(getElementTop(obj)-50) + 'px';
}
Hide the DIV at mouse out.

function Out()
{
 document.getElementById("imgbox").style.visibility='hidden';
} 
```

为缩略图添加 OnMouseOver 客户端事件调用，以在鼠标悬停时显示弹出图像。

```
<img id='img1' src='images/Sample.jpg' onmouseover="Large(this)" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T08:22:08.277

*如果该区域是正方形的，您可以在*所需区域上放置一个透明元素，并给它一个简单的`onClick`事件。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-01T08:17:59.543

### 使用简单模态

您可以使用插件[**SimpleModal**](http://www.ericmmartin.com/projects/simplemodal/)来实现您想做的事情。

> [**SimpleModal**](http://www.ericmmartin.com/projects/simplemodal/)是一个轻量级的 jQuery 插件，它为模态​​对话框的开发提供了一个强大的接口。将其视为模态对话框框架。SimpleModal 让您可以灵活地构建您可以设想的任何内容，同时使您免受 UI 开发固有的相关跨浏览器问题的影响。

使用它，您可以调用已经存在`div`的模式或动态创建模式。

### 调用现有的`div`：

```
$("#element-id").modal(); 
```

### 即时制作模态：

```
$.modal("<div><h1>SimpleModal</h1></div>"); 
```

### 给予选项：

```
$("#element-id").modal({options});
$.modal("<div><h1>SimpleModal</h1></div>", {options}); 
```

### 演示：

![截屏](../Images/c18e5d9e4f84e1188e4847c851742343.png)

### 更多演示在这里：[http ://www.ericmmartin.com/projects/simplemodal-demos/](http://www.ericmmartin.com/projects/simplemodal-demos/)

# iphone - 如何打开、关闭 MPMoviePlayerViewController 的声音

> ID：13173278
> 
> 赞同：0
> 
> 时间：2012-11-01T08:16:17.047
> 
> 标签：iphone, ios, ios-simulator

嘿，我需要在 ios 中为**MPMoviePlayerViewController设置音量。**我对此进行了很多搜索，但失败了。我得到了为 MPMoviePlayerController、MPmusicPlayer 但不是**MPMoviePlayerViewController 设置音量的答案。** 请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:36:10.203

您不需要以编程方式执行此操作....MpMovieplayerViewController 的 UI 确实具有默认的音量调节功能...您为什么要自己做呢？

好的试试这个

[[MPMusicPlayerController applicationMusicPlayer] setVolume:];

将更改设备的音量，而不是媒体播放器的音量，因此任何其他音频或视频流也会受到影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:36:21.567

试试这个...

```
 [[MPMusicPlayerController applicationMusicPlayer] setVolume:sliderr.value]; 
```

它只适用于设备，不适用于模拟器

# hive - Hive 性能提升

> ID：13173289
> 
> 赞同：2
> 
> 时间：2012-11-01T08:17:16.173
> 
> 标签：hive

我正在处理一个数据库（2.5 GB），有些表只有 40 行，有些表有 900 万行数据。当我对大表进行任何查询时，它需要更多时间。我希望在更短的时间内获得结果

对只有 90 行的表的小查询-->

```
hive> select count(*) from cidade; 
Time taken: 50.172 seconds 
```

hdfs-site.xml

```
<configuration>
<property>
<name>dfs.replication</name>
<value>3</value>
<description>Default block replication.
The actual number of replications can be specified when the file is created.
The default is used if replication is not specified in create time.
</description>
</property>

<property>
<name>dfs.block.size</name>
<value>131072</value>
<description>Default block replication.
The actual number of replications can be specified when the file is created.
The default is used if replication is not specified in create time.
</description>
</property>
</configuration> 
```

这些设置会影响配置单元的性能吗？ `dfs.replication=3` `dfs.block.size=131072`

我可以将它从蜂巢提示设置为

```
hive>set dfs.replication=5 
```

这个值是否只保留在特定的会话中？

还是在 .xml 文件中更改它更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:28:08.797

重要的是这`select count(*)`将导致 hive 启动 map reduce 工作。

您可能认为这非常快，就像 mysql 查询一样。

但即使是hadoop中最简单的map reduce作业，总时间也包括提交给job tracker，将task分配给task tracker等。所以总时间至少有几十秒。

`select count(*)`在一张大桌子上试一试。时间不会增加太多。

因此，您需要了解 hive 和 hadoop 处理大数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T19:17:31.867

`dfs.replication`不应影响配置单元查询的运行时间。它是从 hdfs-site.xml 公开的属性，用于确定将数据块复制到多少个 HDFS 节点。`dfs.replication`3 表示每个数据块位于 3 个节点上（总共）。因此，它不适用于特定的会话。

# button - 按钮链接不重定向潜在客户主题 wordpress

> ID：13173293
> 
> 赞同：0
> 
> 时间：2012-11-01T08:17:34.117
> 
> 标签：button, hyperlink, shortcode

我最近安装了前景主题，但我遇到了很多麻烦，因为大多数东西都不能直接从选项界面定制。你可以在这里看到一个演示：http: [//themes.wpbusinessbundle.com/prospect/](http://themes.wpbusinessbundle.com/prospect/)

所以我正在尝试添加按钮，当我添加它们时看起来不错，但不要在任何地方重定向（重定向到带有# 的同一页面）。我知道这是因为缺少一些东西，当我编写/插入按钮时需要“拉”我在 html 中包含的链接，但无法弄清楚在 css 中的何处修改它或如何修改它。

任何帮助表示赞赏。顺便说一句，号召性用语有效，但我无法更改它们的颜色或大小，所以这不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T04:01:15.423

从 PHP 的观察来看，一个按钮的简码应该被安排成匹配：

```
"extract(shortcode_atts(array(
    'link'  => '#',
    'target'    => '',
    'variation' => '',
    'size'  => '',
    'align' ...." 
```

这意味着必须手动编辑可视化编辑器制作的按钮短代码，使其看起来像这样，例如：

[按钮链接=“http://google.com”变体=“蓝色”尺寸=“大”]测试[/按钮]

我自己使用这个主题，我不得不编辑很多..有问题的代码；P。

希望这可以帮助。

# java - 从用于 http 连接的字符串中删除空格

> ID：13173295
> 
> 赞同：1
> 
> 时间：2012-11-01T08:17:46.430
> 
> 标签：java, android

我正在尝试发送查询网址

```
String url = String.format(
   "http://xxxxx/xxx/xxx&message=%s",myEditBox.getText.toString());
// Create a new HttpClient and Post Header
DefaultHttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(url);
httpclient.getCookieStore().addCookie(cooki);
try {
   ResponseHandler<String> responseHandler = new BasicResponseHandler();
   httpclient.getParams().setParameter("http.connection-manager.timeout", 15000);
   String response = httpclient.execute(httppost, responseHandler); 
```

给我错误，`illegal character at query`。`white space`大概就是这样。如何处理这个问题？

最好的祝福

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T08:21:55.090

您需要对您的网址进行编码。

```
String query = URLEncoder.encode(myEditBox.getText.toString(), "utf-8");
String url = "http://stackoverflow.com/search?q=" + query; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:22:17.603

你能试一下吗

```
 httpclient.setRequestProperty("Accept-Charset","UTF-8");
 url="http://xxxxx/xxx/xxx&message="+URLEncoder.encode(myEditBox.getText.toString(), "UTF-8"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T08:31:41.977

尝试 .trim() 同时从 edittext 获取值。可能是空白来自edittext，也使用“utf-8”。

见下面的代码。

```
String value = URLEncoder.encode(myEditBox.getText.toString().trim(), "utf-8");
String url = "http://xxxxx/xxx/xxx&message=%s" + value; 
```

# ios - 如何使用 UIImage 制作 CCMenuItemImage 项目？

> ID：13173296
> 
> 赞同：-1
> 
> 时间：2012-11-01T08:17:53.820
> 
> 标签：ios, cocos2d-iphone

我想用 UIImage 制作一个 CCMenuItemImage。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:23:36.397

您可以创建 CCSprite 以在 CCMenuItemSprite 中使用它

```
+(id) spriteWithCGImage: (CGImageRef)image key:(NSString*)key; 
```

构造函数。

要获取`UIImage`对象具有`CGImage`属性，则返回`CGImageRef`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:31:45.907

您可以使用以下代码从 UIImage 制作 CCSprite：

```
 CCTexture2D *tex = [[[CCTexture2D alloc] initWithImage:uiImage] autorelease];
    CCSprite *sprite1 = [CCSprite spriteWithTexture:tex]; 
```

创建 CCSprite 后，您可以使用以下代码制作 CCMenuItem：

```
 CCMenuItem *mnItem = [CCMenuItemSprite itemFromNormalSprite:sprite1             selectedSprite:sprite1 disabledSprite:sprite1 target:self selector:@selector(yourSelector:)]; 
```

# java - java中的基本递归

> ID：13173298
> 
> 赞同：1
> 
> 时间：2012-11-01T08:18:11.383
> 
> 标签：java, recursion

关于java中递归的两个小问题。

```
public int recursiveFunc(int n) {
    if (n==0)
        return(1);
    else
        return( recursiveFunc(n -1) + 1 );
} 
```

如果调用 recursiveFunc(150)，答案应该是 151。有人可以向我解释一下它是如何得到这个答案的/它需要什么步骤？

假设 recursiveFunc2(17) 的以下函数再次相同，答案是什么以及如何？谢谢。

```
public int recursiveFunc2(int n) {
    if (n == 0)
        return(0);
    else
        return( recursiveFunc2(n/2)+1 );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:21:28.390

如果您更换：

```
return( recursiveFunc(n1) + 1 ); 
```

和：

```
return recursiveFunc(n - 1) + 1 ; 
```

它按预期工作。

对于第二个功能，它更有趣一些。想想你可以将 17 除以 2 多少次，直到达到 0（递归停止条件）？这有点棘手，但分析步骤：

```
recursiveFunc2(17) = 
recursiveFunc2(8) + 1 = 
recursiveFunc2(4) + 1 + 1 = 
recursiveFunc2(2) + 1 + 1 + 1 = 
recursiveFunc2(1) + 1 + 1 + 1 + 1 = 
recursiveFunc2(0) + 1 + 1 + 1 + 1 + 1 = 
                0 + 1 + 1 + 1 + 1 + 1 = 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:33:23.103

在分析递归时，您必须检查基本情况以获得最终结果。在此设置中，基本情况是

```
if (n == 0)
    return(0); 
```

所以你可以从那里逆向工程，然后建立入口案例。在您的示例中，入口是 when `n = 150`。

**基本情况**

`recursiveFunc(0)`叫做。基本情况被击中`n == 0`并`1`返回。

**积聚**

`1`返回到之前的调用

```
return recursiveFunc( n - 1 ) + 1;//note that n was 1 to produce a call of 0 
```

因此，`recursiveFunc( 1 - 1 )`变为 1，那条线看起来更像

```
return 1 + 1; 
```

**继续**

进一步支持这一点，下一个调用将是返回`2`的位置。现在，应该有一个明显的模式。即，那个

```
A0 = 1;
A1 = A0 + 1;
A2 = A1 + 1;
...
An = A(n-1) + 1;
...
An = n + 1; 
```

所以这就是你如何得出 A150 = 151 的结论，或者更明确地说，`recursiveFunc(150) == 151`。

# javascript - JQuery更改一组图像中的图像

> ID：13173303
> 
> 赞同：0
> 
> 时间：2012-11-01T08:18:24.823
> 
> 标签：javascript, jquery, jquery-selectors

我有一个动态列表，每行包含 6 个图像图标。下面的代码...

```
<div class='list_body'>
<div class='lister1'>
    <img data-icon_no='1' data-job_id='"+job_id+"' data-icon_status='"+split_stats[0]+"' src='"+path+stat1+"' class='q1' />
    <img data-icon_no='2' data-job_id='"+job_id+"' data-icon_status='"+split_stats[1]+"' src='"+path+stat2+"' class='q1' />
    <img data-icon_no='3' data-job_id='"+job_id+"' data-icon_status='"+split_stats[2]+"' src='"+path+stat3+"' class='q1' />
    <img data-icon_no='4' data-job_id='"+job_id+"' data-icon_status='"+split_stats[3]+"' src='"+path+stat4+"' class='q1' />
    <img data-icon_no='5'  data-job_id='"+job_id+"' data-icon_status='"+split_stats[4]+"' src='"+path+stat5+"' class='q1' />
    <img data-icon_no='6' data-job_id='"+job_id+"' data-icon_status='"+split_stats[5]+"' src='"+path+stat6+"' class='q1' />
 </div>

 <div class='lister'>"+name+"</div>
    <div class='lister'>"+time+"</div>
    <div class='lister'><a href='javascript:void(0);'>View Appointment &amp; Actions</a>
    </div>
 </div>
</div> 
```

每个图标都有一个状态编号和每个状态的不同颜色的图标图像。我需要做的是在主数据库中的图标状态值更改时更改图标。

我正在努力用 jquery 选择器识别图标。我努力了：

```
$('.q1 img[data-job_id='+job_identifier+']').eq(0).attr('src', path+icon_url1); 
```

（这是希望更改第一个图标但没有用。）

我基本上需要： a：根据作业 ID 识别图标行 b：使用正确的 img src 重置图标 c：以最快的方式执行此操作。

我希望这是有道理的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:22:09.103

用双引号写 -

```
$('.q1 img[data-job_id="+job_identifier+"]').eq(0).attr('src', path+icon_url1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:24:26.190

用这个：

```
$('.list_body .lister1 img[data-job_id="+job_identifier+"]').attr('src', path+icon_url1); 
```

您不需要`eq()`，因为您正在使用 id 进行过滤。

# actionscript-3 - 在多边形内移动形状

> ID：13173310
> 
> 赞同：0
> 
> 时间：2012-11-01T08:19:05.173
> 
> 标签：actionscript-3

测试链接：[http ://bit.ly/Runmah](http://bit.ly/Runmah)

从左侧选择一项进行测试。

当他在直线上找到两个相交点时，它正在旋转。

我想在多边形内移动红色矩形。它不应该超出多边形。

我的代码是： http: [//pastebin.com/pRMpk81f](http://pastebin.com/pRMpk81f)

编辑 1： http: [//pastebin.com/C3j4WSC1](http://pastebin.com/C3j4WSC1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:38:21.920

如果你知道如何找到线上点的交点，那么你应该能够找到墙壁和家具之间的距离（矩形的线和边缘），你可以检查这个值，例如停止拖动和捕捉，

**编辑1：** 选择拖动物品时（鼠标关闭）比不断检查距离（例如在鼠标移动），然后您可以决定距离在某个阈值之内，您将停止移动（基本基础，您将设置计算的位置 - 转而应用鼠标位置），否则您将跟随鼠标。

**EDIT2：** 您也可以通过计算交点来测试该点是否在形状内 - 偶数点在外面，奇数 - 点在里面

最好的祝福

# c# - 使用 CodeDom 编译到特定目录

> ID：13173311
> 
> 赞同：0
> 
> 时间：2012-11-01T08:19:11.037
> 
> 标签：c#, compilation

所以，我有我的程序，它确实直接编译到我的主 EXE 所在的文件夹。现在，我希望我的程序编译到另一个目录。我怎样才能做到这一点？我曾尝试在编译后立即移动它，但效果并不好！

# c# - 货币转字符串

> ID：13173312
> 
> 赞同：8
> 
> 时间：2012-11-01T08:19:13.437
> 
> 标签：c#, .net, currency

通常我会`string.Format()`用来获取格式化的字符串。

但我要求所有金额都应打印为文本而不是数字。

即类似的东西：

```
Format(3000, "us"); // => Resulting text: "three thousand dollars" 
```

是否有可以处理的 .NET 库（俄语是强制性的）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:03:23.783

> 是否有可以处理的 .NET 库（俄语是强制性的）？

简短的回答：**没有。**

您必须自己编写，但我建议您看一下以下内容： [将数字转换为单词 C#](https://stackoverflow.com/questions/2729752/converting-numbers-in-to-words-c-sharp)， [如何将整数转换为其口头表示？](https://stackoverflow.com/questions/554314/how-can-i-convert-an-integer-into-its-verbal-representation)正如其中之一所说，查看[项目 Euler 问题编号 17](http://projecteuler.net/problem=17)并将其用于更广泛的谷歌搜索。

除此之外，您还有货币名称的问题，应该`'us'`表示货币或语言，甚至两者兼而有之？加元和美元有区别吗？

例如这是内置的：

```
// Gives USD
var ISOCode = System.Globalization.RegionInfo.RegionInfo("US").ISOCurrencySymbol
// Gives $
var symbol = System.Globalization.RegionInfo.RegionInfo("US").CurrencySymbol
// Gives USD Dollar (i believe :))
var nameUSDENG = System.Globalization.RegionInfo.RegionInfo("US").CurrencyEnglishName
// Gives Svensk Krona
var nameSEKSWE = System.Globalization.RegionInfo.RegionInfo("SE").CurrencyNativeName
// Gives Swedish Krona
var nameSEKENG = System.Globalization.RegionInfo.RegionInfo("SE").CurrencyEnglishName 
```

我建议你从那里开始，看看这条路会把你带到哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-05T08:39:53.080

有一个成熟的库可以满足您的需要。这叫人性化。

你可以在这里看到它的内容：[NuGet 本周包：Humanizer 使 .NET 数据类型更人性化](http://www.hanselman.com/blog/NuGetPackageOfTheWeekHumanizerMakesNETDataTypesMoreHuman.aspx)

[开源项目在 GitHub](https://github.com/MehdiK/Humanizer)上

如您所见，它可以满足您的需要以及更多功能。它有很多本地化。

一些例子：

```
1.ToWords() => "one"
10.ToWords() => "ten"
11.ToWords() => "eleven"
122.ToWords() => "one hundred and twenty-two"
3501.ToWords() => "three thousand five hundred and one" 
```

> 您还可以将第二个参数 GrammaticalGender 传递给 ToWords，以指定数字应以哪种性别输出。

```
1.ToWords(GrammaticalGender.Masculine) => "один"
1.ToWords(GrammaticalGender.Feminine) => "одна"
1.ToWords(GrammaticalGender.Neuter) => "одно" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-30T14:35:13.253

我环顾四周，但找不到合适的版本来转换为**英语**货币，因此我将一些合并到此解决方案中：

```
public static class NumberExtensions
{
    public static String toCurrency(this double number, String major, String minor, String endStr, int minorLength)
    {
        return ((decimal)number).toCurrency(major, minor, endStr, minorLength);
    }

    public static String toCurrency(this decimal number, String major, String minor, String endStr, int minorLength)
    {

        if (String.IsNullOrWhiteSpace(major)) throw new Exception("Must specify major currency");
        if (String.IsNullOrWhiteSpace(minor)) throw new Exception("Must specify minor currency");

        String numb = number.ToString();
        String val = "", wholeNo = numb, points = "", andStr = major, pointStr = "";
        int decimalPlace = numb.IndexOf(".");
        if (decimalPlace > 0)
        {
            wholeNo = numb.Substring(0, decimalPlace);
            points = numb.Substring(decimalPlace + 1);
            if (points.Length > minorLength) throw new Exception("Incorrect format");
            if (Convert.ToInt32(points) > 0)
            {
                andStr = major + " and";
                endStr = minor + " " + endStr;
                pointStr = Int32.Parse(points.Length == 1 ? points + "0" : points).toWords();
            }
        }
        if (String.IsNullOrWhiteSpace(pointStr))
        {
            if (endStr == minor + " " || endStr == null)
            {
                val = String.Format("{0} {1}", Int32.Parse(wholeNo).toWords().Trim(), andStr.Trim());
            }
            else
            {
                val = String.Format("{0} {1} {2}", Int32.Parse(wholeNo).toWords().Trim(), andStr.Trim(), endStr.Trim());
            }
        }
        else
        {
            val = String.Format("{0} {1} {2} {3}", Int32.Parse(wholeNo).toWords().Trim(), andStr.Trim(), pointStr.Trim(), endStr.Trim());
        }
        return val;
    }

    public static string toWords(this int number)
    {
        if (number == 0)
            return "Zero";

        if (number < 0)
            return "minus " + Math.Abs(number).toWords();

        string words = "";

        if ((number / 1000000) > 0)
        {
            words += (number / 1000000).toWords().TrimEnd() + " Million ";
            number %= 1000000;
        }

        if ((number / 1000) > 0)
        {
            words += (number / 1000).toWords().TrimEnd() + " Thousand ";
            number %= 1000;
        }

        if ((number / 100) > 0)
        {
            words += (number / 100).toWords().TrimEnd() + " Hundred ";
            number %= 100;
        }

        if (number > 0)
        {
            if (words != "")
                words += "and ";

            var unitsMap = new[] { "Zero", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine", "Ten", "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen" };
            var tensMap = new[] { "Zero", "Ten", "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety" };

            if (number < 20)
                words += unitsMap[number];
            else
            {
                words += tensMap[number / 10];
                if ((number % 10) > 0)
                    words += "-" + unitsMap[number % 10];
            }
        }

        return words;
    }
} 
```

这是单元测试：

```
[TestFixture]
public class NumbericExtensionMethodsTests
    : TestBase
{
    [Test]
    [TestCase(0.0, null, null, null, 2, ExpectedException = typeof(Exception))]
    [TestCase(0.0, "", null, null, 2, ExpectedException = typeof(Exception))]
    [TestCase(0.0, null, "", null, 2, ExpectedException = typeof(Exception))]
    [TestCase(0.0, "", "", null, 2, ExpectedException = typeof(Exception))]
    [TestCase(0.001, "Rand", "Cent", null, 2, ExpectedException = typeof(Exception))]
    [TestCase(0.001, "Rand", "Cent", null, 3, Result = "Zero Rand and One Cent")]
    [TestCase(0, "Rand", "Cent", null, 2, Result = "Zero Rand")]
    [TestCase(0.0, "Rand", "Cent", null, 2, Result = "Zero Rand")]
    [TestCase(0.01, "Rand", "Cent", null, 2, Result = "Zero Rand and One Cent")]
    [TestCase(0.1, "Rand", "Cent", null, 2, Result = "Zero Rand and Ten Cent")]
    [TestCase(0.10, "Rand", "Cent", null, 2, Result = "Zero Rand and Ten Cent")]
    [TestCase(0.10, "Rand", "Cent", "only", 2, Result = "Zero Rand and Ten Cent only")]
    [TestCase(1.10, "Rand", "Cent", "only", 2, Result = "One Rand and Ten Cent only")]
    [TestCase(1.0, "Rand", "Cent", "only", 2, Result = "One Rand only")]
    [TestCase(123312.32, "Rand", "Cent", null, 2, Result = "One Hundred and Twenty-Three Thousand Three Hundred and Twelve Rand and Thirty-Two Cent")]
    public string NumberToCurrency(decimal number, string major, string minor, string endStr, int minorLength)
    {
        return number.toCurrency(major, minor, endStr, minorLength);
    }

    [Test]
    [TestCase(0, Result = "Zero")]
    [TestCase(1, Result = "One")]
    [TestCase(2, Result = "Two")]
    [TestCase(3, Result = "Three")]
    [TestCase(4, Result = "Four")]
    [TestCase(5, Result = "Five")]
    [TestCase(6, Result = "Six")]
    [TestCase(7, Result = "Seven")]
    [TestCase(8, Result = "Eight")]
    [TestCase(9, Result = "Nine")]

    [TestCase(10, Result = "Ten")]
    [TestCase(11, Result = "Eleven")]
    [TestCase(12, Result = "Twelve")]
    [TestCase(13, Result = "Thirteen")]
    [TestCase(14, Result = "Fourteen")]
    [TestCase(15, Result = "Fifteen")]
    [TestCase(16, Result = "Sixteen")]
    [TestCase(17, Result = "Seventeen")]
    [TestCase(18, Result = "Eighteen")]
    [TestCase(19, Result = "Nineteen")]
    [TestCase(20, Result = "Twenty")]
    [TestCase(30, Result = "Thirty")]
    [TestCase(40, Result = "Forty")]
    [TestCase(50, Result = "Fifty")]
    [TestCase(60, Result = "Sixty")]
    [TestCase(70, Result = "Seventy")]
    [TestCase(80, Result = "Eighty")]
    [TestCase(90, Result = "Ninety")]
    [TestCase(99, Result = "Ninety-Nine")]

    [TestCase(100, Result = "One Hundred")]
    [TestCase(101, Result = "One Hundred and One")]
    [TestCase(111, Result = "One Hundred and Eleven")]
    [TestCase(121, Result = "One Hundred and Twenty-One")]

    [TestCase(1000, Result = "One Thousand")]
    [TestCase(1001, Result = "One Thousand and One")]
    [TestCase(1011, Result = "One Thousand and Eleven")]
    [TestCase(1021, Result = "One Thousand and Twenty-One")]
    [TestCase(1100, Result = "One Thousand One Hundred")]
    [TestCase(1101, Result = "One Thousand One Hundred and One")]
    [TestCase(1111, Result = "One Thousand One Hundred and Eleven")]
    [TestCase(1121, Result = "One Thousand One Hundred and Twenty-One")]

    [TestCase(12000, Result = "Twelve Thousand")]
    [TestCase(12001, Result = "Twelve Thousand and One")]
    [TestCase(12011, Result = "Twelve Thousand and Eleven")]
    [TestCase(12021, Result = "Twelve Thousand and Twenty-One")]
    [TestCase(12100, Result = "Twelve Thousand One Hundred")]
    [TestCase(12101, Result = "Twelve Thousand One Hundred and One")]
    [TestCase(12111, Result = "Twelve Thousand One Hundred and Eleven")]
    [TestCase(12121, Result = "Twelve Thousand One Hundred and Twenty-One")]
    [TestCase(60000, Result = "Sixty Thousand")]
    [TestCase(60001, Result = "Sixty Thousand and One")]
    [TestCase(60011, Result = "Sixty Thousand and Eleven")]
    [TestCase(60021, Result = "Sixty Thousand and Twenty-One")]
    [TestCase(60100, Result = "Sixty Thousand One Hundred")]
    [TestCase(60101, Result = "Sixty Thousand One Hundred and One")]
    [TestCase(60111, Result = "Sixty Thousand One Hundred and Eleven")]
    [TestCase(60121, Result = "Sixty Thousand One Hundred and Twenty-One")]
    [TestCase(61000, Result = "Sixty-One Thousand")]
    [TestCase(61001, Result = "Sixty-One Thousand and One")]
    [TestCase(61011, Result = "Sixty-One Thousand and Eleven")]
    [TestCase(61021, Result = "Sixty-One Thousand and Twenty-One")]
    [TestCase(61100, Result = "Sixty-One Thousand One Hundred")]
    [TestCase(61101, Result = "Sixty-One Thousand One Hundred and One")]
    [TestCase(61111, Result = "Sixty-One Thousand One Hundred and Eleven")]
    [TestCase(61121, Result = "Sixty-One Thousand One Hundred and Twenty-One")]

    [TestCase(100000, Result = "One Hundred Thousand")]
    [TestCase(100001, Result = "One Hundred Thousand and One")]
    [TestCase(100011, Result = "One Hundred Thousand and Eleven")]
    [TestCase(100021, Result = "One Hundred Thousand and Twenty-One")]
    [TestCase(100100, Result = "One Hundred Thousand One Hundred")]
    [TestCase(100101, Result = "One Hundred Thousand One Hundred and One")]
    [TestCase(100111, Result = "One Hundred Thousand One Hundred and Eleven")]
    [TestCase(100121, Result = "One Hundred Thousand One Hundred and Twenty-One")]
    [TestCase(101000, Result = "One Hundred and One Thousand")]
    [TestCase(101001, Result = "One Hundred and One Thousand and One")]
    [TestCase(101011, Result = "One Hundred and One Thousand and Eleven")]
    [TestCase(101021, Result = "One Hundred and One Thousand and Twenty-One")]
    [TestCase(101100, Result = "One Hundred and One Thousand One Hundred")]
    [TestCase(101101, Result = "One Hundred and One Thousand One Hundred and One")]
    [TestCase(101111, Result = "One Hundred and One Thousand One Hundred and Eleven")]
    [TestCase(101121, Result = "One Hundred and One Thousand One Hundred and Twenty-One")]
    [TestCase(112000, Result = "One Hundred and Twelve Thousand")]
    [TestCase(112001, Result = "One Hundred and Twelve Thousand and One")]
    [TestCase(112011, Result = "One Hundred and Twelve Thousand and Eleven")]
    [TestCase(112021, Result = "One Hundred and Twelve Thousand and Twenty-One")]
    [TestCase(112100, Result = "One Hundred and Twelve Thousand One Hundred")]
    [TestCase(112101, Result = "One Hundred and Twelve Thousand One Hundred and One")]
    [TestCase(112111, Result = "One Hundred and Twelve Thousand One Hundred and Eleven")]
    [TestCase(112121, Result = "One Hundred and Twelve Thousand One Hundred and Twenty-One")]
    [TestCase(160000, Result = "One Hundred and Sixty Thousand")]
    [TestCase(160001, Result = "One Hundred and Sixty Thousand and One")]
    [TestCase(160011, Result = "One Hundred and Sixty Thousand and Eleven")]
    [TestCase(160021, Result = "One Hundred and Sixty Thousand and Twenty-One")]
    [TestCase(160100, Result = "One Hundred and Sixty Thousand One Hundred")]
    [TestCase(160101, Result = "One Hundred and Sixty Thousand One Hundred and One")]
    [TestCase(160111, Result = "One Hundred and Sixty Thousand One Hundred and Eleven")]
    [TestCase(160121, Result = "One Hundred and Sixty Thousand One Hundred and Twenty-One")]
    [TestCase(161000, Result = "One Hundred and Sixty-One Thousand")]
    [TestCase(161001, Result = "One Hundred and Sixty-One Thousand and One")]
    [TestCase(161011, Result = "One Hundred and Sixty-One Thousand and Eleven")]
    [TestCase(161021, Result = "One Hundred and Sixty-One Thousand and Twenty-One")]
    [TestCase(161100, Result = "One Hundred and Sixty-One Thousand One Hundred")]
    [TestCase(161101, Result = "One Hundred and Sixty-One Thousand One Hundred and One")]
    [TestCase(161111, Result = "One Hundred and Sixty-One Thousand One Hundred and Eleven")]
    [TestCase(161121, Result = "One Hundred and Sixty-One Thousand One Hundred and Twenty-One")]
    [TestCase(1000000, Result = "One Million")]
    [TestCase(Int32.MaxValue, Result = "Two Thousand One Hundred and Forty-Seven Million Four Hundred and Eighty-Three Thousand Six Hundred and Forty-Seven")]
    /*Assuming Millions will work if Thousands worked*/
    public string IntToWords(int number)
    {
        return number.toWords().Trim();
    }
} 
```

享受这个完美的作品：D

> **学分**
> 
> *   [LukeH 将数字转换为`toWords`函数的单词的答案。](https://stackoverflow.com/a/2730393/3325104)（感谢 Lankymart 找到这个。）
> *   其他不知道的请编辑，如果发现请给予信任

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-05T08:07:27.390

我还没有测试过，但也许这会解决你的问题？

[Nuget 包](https://libraries.io/nuget/Nut)

它说它也支持俄语。

从包装描述：

> 数字到文本转换器。支持的语言 英语 俄语 西班牙语 土耳其语

用法：

```
var number = 123456.78
var moneyText = number.ToText("usd", "en");

var number = 123456.78;
var moneyText = number.ToText(Nut.Currency.USD, Nut.Language.English);

var number = 123456.78;
var options = new Nut.Options {
    MainUnitNotConvertedToText = true,
    SubUnitNotConvertedToText = true,
    MainUnitFirstCharUpper = true,
    SubUnitFirstCharUpper = true,
    CurrencyFirstCharUpper = true,
    SubUnitZeroNotDisplayed = true
}
var moneyText = number.ToText(Nut.Currency.USD, Nut.Language.English, options); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-26T19:35:50.547

对于俄语，您可以使用我的库：[https](https://github.com/nick-buhro/NumToWords)
://github.com/nick-buhro/NumToWords 它也可以在 nuget 上获得：[https ://www.nuget.org/packages/NickBuhro.NumToWords](https://www.nuget.org/packages/NickBuhro.NumToWords)

例子：

```
var unit = new UnitOfMeasure(Gender.Masculine, "доллар", "доллара", "долларов");
var text = RussianConverter.Format(3000, unit);
Console.WriteLine(text);
// Output: три тысячи долларов 
```

# ios - 故事板，Interface Builder 未加载 568h 图像

> ID：13173317
> 
> 赞同：3
> 
> 时间：2012-11-01T08:19:21.120
> 
> 标签：ios, ios6, autolayout

我有一个名为 heart.png 的全屏图像加载到 320x480 的 UIImageView 中。我创建了一个 640x960 版本并将其命名为 heart@2x.png。我还创建了一个 640x1136 版本并将其命名为 heart-568h@2x.png。

我在情节提要中构建了一个 3.5" 视图，其 UIImageView 为 320x480。我假设使用 4" 屏幕设备会自动加载 heart-568h@2x.png 但似乎并非如此。我必须为 3.5" 和 4" 屏幕创建 2 个故事板吗？

编辑

到目前为止，一切都在 IB 中完成，没有使用任何代码。这是我刚刚设置的示例项目： ![在此处输入图像描述](../Images/55e20e0220c8cd1e1f96c510902d6519.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T22:21:42.653

你是对的。设备不会以区分常规和视网膜 (@2x) 的方式自动加载 568 图像（启动图像除外）。您将不得不以编程方式检查或使用单独的故事板/NIB。

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
        CGSize screenSize = [[UIScreen mainScreen] bounds].size;
        if(screenSize.height == 568) {
           // ...
        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T06:25:55.360

我像这样构建了自己的自定义 ImageView 类：

```
//  UICustomImageView.h
@interface UICustomImageView : UIImageView
@property (nonatomic) NSString *filename568;
@end

//  UICustomImageView.m
#import "UICustomImageView.h"

@implementation UICustomImageView

- (void)awakeFromNib {
    [super awakeFromNib];

    [self checkFor568];
}

-(void)drawRect:(CGRect)rect {
    [super drawRect:rect];

    [self checkFor568];
}

-(void)checkFor568 {
    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
        CGSize screenSize = [[UIScreen mainScreen] bounds].size;
        if(screenSize.height == 568) {
            if (self.filename568 != nil)
                self.image = [UIImage imageNamed:self.filename568];
        }
    }
}

@end 
```

像这样在 Interface Builder 中使用它。（仍将图像命名为 Background-568h@2x.png 进行缩放）：

![界面生成器自定义属性](../Images/c4a21337ec8670b4124a2faf8715e33e.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T22:17:42.100

通过堆栈溢出搜索，我了解到图像不会自动加载名称中带有 -568h 的图像。

# php - 使用 imagemagick 自定义字体

> ID：13173318
> 
> 赞同：2
> 
> 时间：2012-11-01T08:19:23.193
> 
> 标签：php, imagemagick, custom-font

我正在尝试找出我可以用 imagemagick 实际做的功能和限制，并希望得到一些反馈。

我最终想要做的是使用 imagemagick 将图像输出到带有自定义 ttf 字体的浏览器，以便用户输入一些文本并显示具有不同字体的所有各种图像。

imagemagick 的限制是什么，我可以指定在图像上绘制字体的位置，它在不同的系统或浏览器上会以不同的方式显示吗？

在我进入这个小项目之前，如果你能包含我需要知道的关于使用 imagemagick 的任何其他内容，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:23:51.137

您应该查看 imagemagick 示例页面：[http ://www.imagemagick.org/Usage/](http://www.imagemagick.org/Usage/)

它真的很强大，你可以做很多事情。

是的，您可以指定字体`convert -t a.ttf ...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:24:16.117

您绝对可以告诉 imagemagick 您的文本在图像中的位置，并且由于它是在您的服务器上生成的，因此在任何浏览器上都是相同的。问题可能更多是您如何显示这些图像（任何 css 或 javascript 技巧？）

问题是所有这些字体都需要安装在要创建图像的服务器上。

检查有关将文本转换为图像的信息：[http ://www.imagemagick.org/Usage/text/](http://www.imagemagick.org/Usage/text/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-12T03:40:46.690

另一个有用的命令是`convert -list font`列出系统字体、它们的路径和别名。在将脚本从一台机器移植到另一台机器时非常有用

```
convert -list font|grep -i arial
  Font: Arial
    family: Arial
    glyphs: /Library/Fonts/Arial.ttf
  Font: ArialB
    family: Arial
    glyphs: /Library/Fonts/Arial Bold.ttf
  Font: ArialBI
    family: Arial
    glyphs: /Library/Fonts/Arial Bold Italic.ttf
  Font: ArialBk
    family: Arial Black
    glyphs: /Library/Fonts/Arial Black.ttf 
```

这使得使用 imagemagick 进行粗体或斜体等操作变得非常容易。

```
convert -background none  -fill black  -font ArialB -pointsize 15 \
          -size 380x caption:'i <3 stackoverflow' \
          summary_text.png 
```

# scala - 为什么 Specs2 以随机顺序运行这些“顺序”测试？

> ID：13173319
> 
> 赞同：3
> 
> 时间：2012-11-01T08:19:33.830
> 
> 标签：scala, integration-testing, specs2, playframework-2.1

我正在尝试将旧数据库测试套件从 Specs 迁移到[Specs2](http://etorreborre.github.com/specs2/)。然而，Specs2 以一种奇怪的顺序运行测试（从我的角度来看），这会破坏测试，因为它们会更改数据库状态，并运行某些代码两次。

在下面找到测试的简化版本。据我了解，测试应该按以下顺序运行：（因为我已经指定了*顺序*）：
`! 222`，，但是`! 333`，`! 444`
实际发生的是它们按以下顺序执行：
`! 333`，，`! 222``! 444`

以下是测试：

```
object IncludedSpec extends Specification {
  sequential
  println("sssstart")

  "IncludedSpec" should {

    println("..222")
    "context free block" >> {
      println("....! 222 the first test")
      1 === 1
    }

    var variableN = 0

    "block with context" >> {
      println("....333")
      "using one variable" >> {
        println("......! 333 doing some tests and setting variableN")
        variableN = 123
      }

      println("....444")
      "using it again" >> {
        println("......! 444 testing variableN")
        variableN === 123
      }
      println("....555")
    }
  }

  println("eeeend")
} 
```

这是所有`println`输出：

```
sssstart
eeeend
sssstart
eeeend
..222
....333
......! 333 doing some tests and setting variableN
....444
....555
....! 222 the first test
......! 444 testing variableN 
```

还有我的两个问题：

1.  为什么不`! 222`先执行？

2.  怎么可能`sssstart eeeend`输出两次？规范是一个对象并且没有创建两次？

奇怪的是，如果我从测试中移除副作用——即移除*variableN*并将测试主体替换为`ok`——测试以正确的顺序运行。

版本详细信息：我正在使用 Paly Framework 2.1-SNAPSHOT（2012 年 10 月 28 日的版本 203df0e）和 Scala 2.10.0-RC1 运行这些测试。我认为Play捆绑的Specs2版本是1.12版本，因为该`inline`方法可用，并且是在1.12（-SNAPSHOT）中添加的，参见[https://github.com/etorreborre/specs2/issues/87](https://github.com/etorreborre/specs2/issues/87)并且没有后Specs2 版本。

（哦，如果你认为我应该完全重写测试，那么看看这个问题：[How design a Specs2 database test, with interdependent tests？](https://stackoverflow.com/questions/13174893/how-design-a-specs2-database-test-with-interdependent-tests)）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T10:40:32.823

最初，在 specs2 中，您可以创建以下内容：

1 - 一个例子`in`：`"this is an example" in { 1 must_== 1 }`

2 - 一个例子`>>`：`"this is an example" >> { 1 must_== 1 }`

3 - 一个例子块`>>`

```
"this system should" >> {
  "do something" >> ok
  "do something else" >> ok
} 
```

重要的是，它`in`仅用于示例，并接受任何可以转换为`Result`. 另一方面`>>`，可用于示例和示例组（具有统一的嵌套样式），因此它接受类型`Example`或`Result`.

现在，当您想要执行以下操作时，事情开始变得有点复杂：

1 - 用于`foreach`创建一组示例

```
"this group has 5 examples" in {
  (1 to 5) foreach { i => "example "+i >> ok }
} 
```

2 - 用于`foreach`创建一组期望

```
"this example has 5 expectations" in {
  (1 to 5) foreach { i => i must_== i }
} 
```

问题是，这两个表达式`foreach`都有 type `Unit`。但他们正在做两件非常不同的事情！第一个是构建示例，因此需要立即评估此表达式以构建`Specification`. 第二个是创建 an 的主体`Example`并将稍后执行（或者如果示例被过滤掉，则可能永远不会执行）。两件事，使用相同的 operator `>>`，是行不通的。

所以决定这`>>(block: =>Unit)`意味着“这通过副作用构建了一组示例”，并且`in(expectations: =>Unit)`意味着“这构建了一个`Example`可能具有期望的主体，这将是一个副作用。

现在，当这更好地解释了为什么您的打印语句看到奇怪的顺序时：

```
..222
....333
......! 333 doing some tests and setting variableN
....444
....555 
```

首先打印，因为它们包含在 type 块中`Unit`，解释为示例组。

和 ：

```
....! 222 the first test
......! 444 testing variableN 
```

因此会打印出来，因为它们位于 type 的块中`MatchResult[_]`，也就是说，它们被视为示例的主体。

我同意这是令人困惑的，我希望这种解释能带来一些关于为什么事情会这样的观点。当然，另一个教训是“副作用是偷偷摸摸的，因为它们不会告诉你它们到底在做什么”。

因此，一般的 specs2 提示是始终以适当的值结束您的块（除非您使用`foreach`上面示例中所示的构造）。例如，`ok`在您进行变量赋值的块的末尾添加应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:02:43.707

*（更新：这不适用于我真正相当大的 Spec。它仍然以看似随机的顺序执行，Specs2 似乎从中间的某个地方开始。但是当我在一个可能有 10 个的较小的 Spec 上进行下面提到的替换时或 20 个示例，它确实导致规范以正确的顺序执行。奇怪*）

这是部分解决方法，但不是真正的答案：

在测试片段之前使用`in`代替, 。`>>`然后以正确的顺序执行测试。（但`sssstart eeeend`仍然发生两次。）

所以这可以按预期工作：（我已将某些替换`>>`为`in`）

```
object IncludedSpec extends Specification {
  sequential
  println("sssstart")

  "IncludedSpec" should {

    println("..222")
    "context free block" in {   // not >>
      println("....! 222 the first test")
      1 === 1
    }

    var variableN = 0

    "block with context" >> {
      println("....333")
      "using one variable" in {   // not >>
        println("......! 333 doing some tests and setting variableN")
        variableN = 123
      }

      println("....444")
      "using it again" in {   // not >>
        println("......! 444 testing variableN")
        variableN === 123
      }
      println("....555")
    }
  }

  println("eeeend")
} 
```

* * *

我的困惑想法如下：

1.

我认为和之间的区别在于`in`：`>>`只能
`in`出现在测试片段（即一个`{... x must_== y ... }`块）之前。但
`>>`可以出现在整个示例之前（带有嵌套的测试片段）和测试片段之前。

所以当我写的时候`>>`，Specs2 并不直接知道会发生什么。我不知道为什么这会改变测试执行顺序。除非 Specs2 需要……在`{ ...}`块内执行一些代码来找出答案？但是 Specs2 不使用反射吗？这感觉很奇怪。

2.

如果测试完全没有副作用（在这种情况下，更新 no shared `var`s）。或者，如果*所有*测试都有副作用。然后，据我所知，它们以正确的顺序执行。*但是，如果某些测试除了**读取*shared之外没有副作用`var`，那么它们似乎是在写入 a 的测试*之后*`var`执行的。（如果你使用`>>`而不是`in`。）这也感觉很奇怪。无论如何，我想我很快就会开始将我的测试移植到 Specs2 并替换`>>`为`in`:-)

# objective-c - 随机数 Objective-C (linux)

> ID：13173328
> 
> 赞同：1
> 
> 时间：2012-11-01T08:20:40.503
> 
> 标签：objective-c, linux

现在，我知道这对于 MacOS 来说是一个简单的问题，但是当我编译一个包含 'arc4random % n' 的代码时，我只是在终端中收到一条错误日志：

```
main.m:9: error: ‘arc4random’ undeclared (first use in this function)
main.m:9: error: (Each undeclared identifier is reported only once
main.m:9: error: for each function it appears in.) 
```

我使用：

```
gcc `gnustep-config --objc-flags` -lgnustep-base main.m -o main 
```

编译它

这是我的代码（如果有帮助的话）：

```
#import <Foundation/Foundation.h>

int main (int argc, const char * argv[])
{
        NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

        int number, guess;

    number = arc4random() % 101;

    while (!guess == number) {  
        NSLog (@"Please guess a number between 1 and 100");
        scanf ("%i", &guess);

        if  (guess < number) {
            NSLog (@"Sorry, guessed too low!");
        }

        else if (guess > number) {
            NSLog (@"Sorry, guessed too high!");
            }
    }

        NSLog (@"You guessed correct!");

        [pool drain];
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:36:26.740

一些东西：

1.  您使用 >> 和 <<，这些不是有效的比较运算符。这将编译，但不会执行您所期望的。您需要使用 >（大于）、>=（大于或等于）、<（小于）或 <=（小于或等于）。

2.  您的编译错误是由于您使用了 arc4random。这是一个函数，但您没有这样使用它。您需要将您的线路更改为

    ```
    number = arc4random() % 101; 
    ```

3.  对此不是 100% 确定，但你的 scanf 中的 %i 看起来应该是 %d

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T13:43:50.163

您可以考虑使用`clang`而不是`gcc`

采用

```
clang -fno-objc-arc main.m -framework Foundation -o main 
```

另外我会使用`arc4random_uniform(101)`而不是`arc4random() % 101`，因为前者是无偏见的。

# windows - 如何在 Windows 8 中获取主要访问令牌？

> ID：13173329
> 
> 赞同：0
> 
> 时间：2012-11-01T08:20:47.127
> 
> 标签：windows, windows-8, desktop, uac, access-token

我想获得主令牌，以便我可以访问 OpenInputDesktop() 并做我必要的事情。

我浏览了所有站点以寻求帮助，并找到了如下的结论性代码，但是在调用[DuplicateTokenEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446617%28v=vs.85%29.aspx) () is 998 时出现错误，这意味着对内存位置的访问无效。

```
 HANDLE GetCurrentUserToken()
{
    HANDLE currentToken = 0;
    PHANDLE primaryToken = 0;

    unsigned int winlogonPid = 0;

    int dwSessionId = 0;
    PHANDLE hUserToken = 0;
    PHANDLE hTokenDup = 0;

    PWTS_SESSION_INFO pSessionInfo = 0;
    DWORD dwCount = 0;

    WTSEnumerateSessions(WTS_CURRENT_SERVER_HANDLE, 0, 1, 
                         &pSessionInfo, &dwCount);

    //TestLog("Error on WTSEnumerateSessions(): %d",GetLastError());

    int dataSize = sizeof(WTS_SESSION_INFO);

    for (DWORD i = 0; i < dwCount; ++i)
    {
        WTS_SESSION_INFO si = pSessionInfo[i];
        if (WTSActive == si.State)
        {
            dwSessionId = si.SessionId;
            break;
        }
    }

    WTSFreeMemory(pSessionInfo);

    array<Process^>^localByName = Process::GetProcessesByName( "winlogon" );

    for (int i=0;i<localByName->Length;i++)
    {
        Process ^ p1 = (Process^)(localByName->GetValue(i));

        if ((unsigned int)p1->SessionId == dwSessionId)
        {
            winlogonPid = (unsigned int)p1->Id;
        }
    }

    // obtain a handle to the winlogon process
    HANDLE hProcess = OpenProcess(MAXIMUM_ALLOWED, false, winlogonPid);
    TestLog("Error on OpenProcess():",GetLastError());

    // obtain a handle to the access token of the winlogon process
    if (!OpenProcessToken(hProcess, TOKEN_DUPLICATE, &currentToken))
    {
        TestLog("Error on OpenProcessToken():",GetLastError());
        CloseHandle(hProcess);
        return false;
    }

    BOOL bRet ;
    // bRet = DuplicateTokenEx(currentToken,
    //         MAXIMUM_ALLOWED /*TOKEN_ASSIGN_PRIMARY | TOKEN_ALL_ACCESS*/, 
    //         NULL/*0*/, 
    //         SecurityImpersonation, TokenImpersonation, primaryToken);

    bRet = DuplicateTokenEx(currentToken, 
                            TOKEN_ASSIGN_PRIMARY | TOKEN_ALL_ACCESS, 
                            NULL, SecurityImpersonation, 
                            TokenPrimary, primaryToken);

    TestLog("Error on DuplicateTokenEx():",GetLastError());
    TestLog("return value of DuplicateTokenEx()",bRet);

    int errorcode = GetLastError();
    if (bRet == false)
    {
        return 0;
    }

    return primaryToken;
}

int main(array<System::String ^> ^args)
{
    Console::WriteLine(L"Hello World");

    TestLog("**Start TestLaunchExeOneTime**",0);
    HANDLE hTokenNew = NULL, hTokenDup = NULL;
    HMODULE  hmod = LoadLibrary(L"kernel32.dll");

    hTokenDup = GetCurrentUserToken();

    STARTUPINFO si;
    PROCESS_INFORMATION pi;
    memset(&si,0,sizeof(STARTUPINFO));
    si.cb = sizeof( STARTUPINFO );
    si.lpDesktop = L"winsta0\\default";

    LPVOID  pEnv = NULL;
    DWORD dwCreationFlag = NORMAL_PRIORITY_CLASS | CREATE_NEW_CONSOLE;
    HMODULE hModule = LoadLibrary(L"Userenv.dll");
    if(hModule )
    {
        if(CreateEnvironmentBlock(&pEnv,hTokenDup,FALSE))
        {
            //WriteToLog("CreateEnvironmentBlock Ok");
            dwCreationFlag |= CREATE_UNICODE_ENVIRONMENT;    
        }
        else
        {
            TestLog("Error on CreateEnvironmentBlock():",GetLastError());
            pEnv = NULL;
        }
    }

    //

    if ( !CreateProcessAsUser( hTokenDup,
        NULL,
        L"C:\\temp\\DesktopDuplicationmilliseconds.exe",  
        NULL,
        NULL,
        FALSE,
        dwCreationFlag,
        pEnv,
        NULL,
        &si,
        &pi
        ))
    {

    }
    else
    {
        TestLog("Error on CreateProcessAsUser():",GetLastError());
        // printf("error : %d",GetLastError());
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:27:02.270

您尚未为主令牌分配任何内存。primaryToken 变量是指向句柄的指针，但实际上您并没有将它指向任何东西。（您还声明`GetCurrentUserToken`了一个返回句柄的函数，但实际上返回的是指向句柄的指针。）

您需要为句柄显式分配内存：

```
primaryToken = malloc(sizeof(HANDLE));

[...]

return *primaryToken; 
```

或者，更明智的是，将 primaryToken 定义为 HANDLE 而不是指针，并在适当的位置传递对它的引用：

```
HANDLE primaryToken;

[...]

bRet = DuplicateTokenEx(currentToken, 
                        TOKEN_ASSIGN_PRIMARY | TOKEN_ALL_ACCESS, 
                        NULL, SecurityImpersonation, 
                        TokenPrimary, &primaryToken); 
```

# c# - 无法将类型 'int?[]' 隐式转换为 'int[]

> ID：13173332
> 
> 赞同：2
> 
> 时间：2012-11-01T08:21:09.337
> 
> 标签：c#, .net

我哈哈这段代码：

```
 private FoundContours SelectFromFoundSamples(FoundContours foundACContours, FoundContours foundFNContours, FoundContours foundBlurContours, FoundContours foundFilteredContours)
    {

        int? num = null;

        int? a = null, b = null, c = null, d = 10;

        int?[] numbers = new[] { foundACContours.Count, foundFNContours.Count, foundBlurContours.Count, foundFilteredContours.Count };

        int? max = numbers.Max();
    } 
```

在这一行：

```
int?[] numbers = new[] { foundACContours.Count, foundFNContours.Count, foundBlurContours.Count, foundFilteredContours.Count }; 
```

我收到此错误：

“不能将类型'int？[]'隐式转换为'int []'

知道如何解决错误吗？

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T08:23:05.940

只是改变你的说法

```
int?[] numbers = new[] { foundACContours.Count, foundFNContours.Count, 
                         foundBlurContours.Count, foundFilteredContours.Count }; 
```

到

```
int?[] numbers = new int?[] { foundACContours.Count, foundFNContours.Count, 
                             foundBlurContours.Count, foundFilteredContours.Count }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T08:23:26.233

```
int?[] numbers = new int?[] { foundACContours.Count, foundFNContours.Count, foundBlurContours.Count, foundFilteredContours.Count }; 
```

# javascript - 如何使用 jQuery 写入跨度？

> ID：13173336
> 
> 赞同：4
> 
> 时间：2012-11-01T08:21:33.997
> 
> 标签：javascript, jquery, ajax

我正在尝试`<span></span>`使用 jQuery 在页面加载上填充一个元素。

目前，填充到跨度中的值只是一个整数计数。

在这里，我将 span *userCount*命名为：

```
<a href="#" class="">Users<span id = "userCount"></span></a> 
```

我正在尝试编写跨度的值，但没有成功。

```
$(document).ready(function () {
    $.post("Dashboard/UsersGet", {}, function (dataset) {
        var obj = jQuery.parseJSON(dataSet);
        var table = obj.Table;

        var countUsers;
        for (var i = 0, len = table.length; i < len; i++) {
            var array = table[i];
            if (array.Active == 1) {
                  var name = array.Name;
            }
            countUsers = i;
        }
        userCount.innerHTML = countUsers.toString();
    });
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T08:23:39.187

你没有任何`usercount`变量。用于`$(selector)`构建一个 jquery 对象，您可以在该对象上调用[html](http://api.jquery.com/html/)等函数。

```
 $('#userCount').html(countUsers); 
```

另请注意

*   您无需手动将整数转换为字符串。
*   如果你不打破循环，`countUsers`将永远是`table.length-1`.
*   你有一个错字：`dataSet`而不是`dataset`. Javascript 区分大小写。
*   你不需要解析请求的结果
*   您不需要传递空数据：`jQuery.post`检查所提供参数的类型

所以，这可能是你需要的更多，假设你在循环中做其他事情：

```
 $.post("Dashboard/UsersGet", function (dataset) {
        var table = dataset.Table;
        var countUsers = table.length; // -1 ?
        // for now, the following loop is useless
        for (var i=0, i<table.length; i++) { // really no need to optimize away the table.length
            var array = table[i];
            if (array.Active == 1) { // I hope array isn't an array...
                var name = array.Name; // why ? This serves to nothing
            }
        }
        $('#userCount').html(countUsers);
    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T08:23:46.083

### 使用[`.html()`](http://api.jquery.com/html/)！

```
<a href="#" class="">Users<span id = "userCount"></span></a> 
```

由于您已将 分配`id`给，您可以在和 函数的帮助下`span`轻松填充。`span``id`[`.html()`](http://api.jquery.com/html/)

```
$("#userCount").html(5000); 
```

或者在你的情况下：

```
$("#userCount").html(countUsers.toString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T08:24:25.253

改变：

```
userCount.innerHTML = countUsers.toString(); 
```

到：

```
$("#userCount").html(countUsers.toString()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T08:27:02.743

代替：

```
userCount.innerHTML = countUsers.toString(); 
```

采用：

```
$('#userCount').html(countUsers.toString()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T08:25:32.633

你可以使用

```
$('#userCount').text(countUsers); 
```

将数据写入 span

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T08:27:50.487

回调参数应该是`dataSet`而不是`dataset`？

# c++ - 从 boost::regex 获取子表达式（在匹配之前）

> ID：13173340
> 
> 赞同：4
> 
> 时间：2012-11-01T08:21:46.383
> 
> 标签：c++, regex, boost

如何获取 boost::regex`(basic_regex<char, regex_traits<char> >)`对象中的子表达式。（没有要比较的文本 - 完成之前`boost::regex_search`）

例子：

> **表达式：** xx.*?yy
> 
> **预期结果：** 1 个子表达式-

```
 - xx.*?yy 
```

> **表达式：** xx。*?yy | 二十。*？Z Z
> 
> **预期结果：** 2 个子表达式-

```
 - xx.*?yy

                - xx.*?zz 
```

> **表达式：** xx。*?yy|(xx.* ?zz|aa.*?bb)
> 
> **预期结果：** 2 个子表达式-

```
 -  xx.*?yy       

                - (xx.*?zz|aa.*?bb) -2 sub expression-

                       -  xx.*?zz

                       -  aa.*?bb 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:09:03.407

`boost::regex`将允许您提取*标记*的（即带括号的）子表达式：

```
#include <boost/regex.hpp>
#include <iostream>

int main() {
  boost::regex r("xx.?yy|(xx.?zz|aa.*?bb)", boost::regex::save_subexpression_location);
  for (unsigned i = 1; i < r.mark_count(); ++i) {
    auto range = r.subexpression(i);
    std::cout << std::string(range.first, std::next(range.second)) << '\n';
  }
} 
```

这将提取标记的 subexpression `(xx.*?zz|aa.*?bb)`，但要获得更精确的信息，您需要一个正则表达式解析器：[轻量级正则表达式解析器](https://stackoverflow.com/questions/306927/lightweight-regex-parser)。

# java - Spring MVC：用于包装 API 响应的适当扩展点

> ID：13173341
> 
> 赞同：9
> 
> 时间：2012-11-01T08:21:51.867
> 
> 标签：java, spring, spring-mvc

我有一个简单的 REST API，使用 Spring MVC`@Controller`和`@RequestMapping`. 我想开始包装响应以提供额外的元数据。

例如，给定一个将返回的调用

```
HTTP GET: /users/1
{
    "userName" : "Jack Jackerson"
} 
```

我想把它包装起来，如下：

```
{
    "metadata" : 
    {
        "callLimit" : "50",
        "callsRemaining" : "49"
    },
    "result" :
    {
        "userName" : "Jack Jackerson"
    }
}  ..etc.. 
```

此外，我想支持用于管理列表（`limit`和`offset`）的标准参数集。

由于这涉及到所有的 api 方法，我想将它实现为一些 spring 内部服务的装饰器，因此方法本身可以专注于它们的实际逻辑，并保持这些样板文件的集中。

我已经开始装饰`HttpMessageConverter`已注册的 's，并用装饰器包装它们。

但是，这并不能让我访问对未声明 a 的方法的入站请求`@RequestBody`。（很多没有）

理想情况下，我需要在堆栈中更高 -`RequestResponseBodyMethodProcessor.writeWithMessageConverters()`看起来是一个不错的候选人，但我不知道如何在这里挂钩。

Spring MVC 有哪些可用选项来实现这种类型的 API-Wide 请求/响应处理？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T11:24:40.167

这是我使用的实现：

```
public class MetadataInjectingReturnValueHandler implements HandlerMethodReturnValueHandler {

    private final HandlerMethodReturnValueHandler delegate;

    public MetadataInjectingReturnValueHandler(HandlerMethodReturnValueHandler delegate)
    {
        this.delegate = delegate;
    }
    @Override
    public boolean supportsReturnType(MethodParameter returnType) {
        return delegate.supportsReturnType(returnType);
    }

    @Override
    public void handleReturnValue(Object returnValue,
            MethodParameter returnType, ModelAndViewContainer mavContainer,
            NativeWebRequest webRequest) throws Exception {
        returnValue = wrapResult(returnValue); //Omitted
        delegate.handleReturnValue(returnValue, returnType, mavContainer, webRequest);
    }
}

@Component
public class MetadataInjectionFactoryBean implements InitializingBean {

    @Autowired
    private RequestMappingHandlerAdapter adapter;
    @Override
    public void afterPropertiesSet() throws Exception {
        HandlerMethodReturnValueHandlerComposite returnValueHandlers = adapter.getReturnValueHandlers();
        List<HandlerMethodReturnValueHandler> handlers = Lists.newArrayList(returnValueHandlers.getHandlers());
        decorateHandlers(handlers);
        adapter.setReturnValueHandlers(handlers);
    }
    private void decorateHandlers(List<HandlerMethodReturnValueHandler> handlers) {
        for (HandlerMethodReturnValueHandler handler : handlers) {
            if (handler instanceof RequestResponseBodyMethodProcessor)
            {
                MetadataInjectingReturnValueHandler decorator = new MetadataInjectingReturnValueHandler(handler);
                int index = handlers.indexOf(handler);
                handlers.set(index, decorator);
                log.info("Metadata Injecting decorator wired up");
                break;
            }
        }       
    }

} 
```

# c#-4.0 - 同一台机器上的进程间通信

> ID：13173344
> 
> 赞同：0
> 
> 时间：2012-11-01T08:22:05.027
> 
> 标签：c#-4.0, inter-process-communicat

```
using System;
using System.Diagnostics;
namespace csharp_station.howto
{
    /// <summary>
    /// Demonstrates how to start another program from C#
    /// </summary>
    class share
    {
        public int a;
        public int b;
    }

    class ProcessStart
    {
        static void Main(string[] args)
        {

            share share1 = new share();
            share1.a = 90;
            share1.b = 100;
            Process console36 = new Process();

            console36.StartInfo.FileName = @"e:\\ConsoleApplication36.exe";

            console36.Start();
        }
    }
} 
```

现在我想在 ConsoleApplication35.exe 中创建的 ConsoleApplication36.exe 中使用对象 share1。我该怎么做？请给我发送 ConsoleApplication36.exe 的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:59:56.590

您可以[`Wcf named pipes`](http://www.switchonthecode.com/tutorials/wcf-tutorial-basic-interprocess-communication)用于进程间通信。如果这是一个足够的解决方案，另一种选择是[`arguments`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.arguments.aspx)在启动过程时通过。

# android - 验证在 EditText 中输入的电子邮件 ID 的模式

> ID：13173353
> 
> 赞同：-4
> 
> 时间：2012-11-01T08:22:32.930
> 
> 标签：android

模式匹配以验证在 Edittext 中输入的电子邮件 ID。

```
Pattern.compile("[a-zA-Z0-9+._%-+]{1,256}" + "[a-zA-Z0-9][a-zA-Z0-9-]{0,64}" + "(" + "." + "[a-zA-Z0-9][a-zA-Z0-9-]{0,25}" + ")+"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:28:47.677

试试这个：它对我来说运行良好。

`Set Input Type "Email"`在 XML 文件中编辑文本。

```
public void Is_Valid_Email()
        {
        if(Email_Text.getText().toString()!=null)
        {
            if(isEmailValid(Email_Text.getText().toString())==false ) 
            {
                Toast.makeText(getApplicationContext(), "Invalid Email Address ",Toast.LENGTH_LONG).show();
                Valid_Email=null;
            }
            else
            {
                Valid_Email=Email_Text.getText().toString();
            }
        }
        else
        {
            Valid_Email=null;
        }

}// end of email 
```

**// Android 提供默认方法来验证电子邮件地址**

```
boolean isEmailValid(CharSequence email) 
{
    return android.util.Patterns.EMAIL_ADDRESS.matcher(email).matches();
} // end of email matcher 
```

享受 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:26:45.857

使用以下功能验证电子邮件 ID。

```
public boolean isValidEmailAddress(String emailAddress)
{  
    String  expression="^[\\w\\-]([\\.\\w])+[\\w]+@([\\w\\-]+\\.)+[A-Z]{2,4}$";  
    CharSequence inputStr = emailAddress;  
    Pattern pattern = Pattern.compile(expression,Pattern.CASE_INSENSITIVE);  
    Matcher matcher = pattern.matcher(inputStr);  
    return matcher.matches();  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T08:38:38.153

用这个改变你的正则表达式

> “[a-zA-Z0-9._-]+@[az]+\.+[az]+”

或按照下面的链接获取 java 中的电子邮件模式

[java中的电子邮件模式](http://sourcecodeandroid.blogspot.in/2012/04/email-pattern-validation.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T08:25:40.137

正则表达式`EMAIL ADDRESS VALIDATION`

```
static final String EMAIL_PATTERN = 
        "^[_A-Za-z0-9-]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$";
  String email = (EditText)findViewById(R.id.edittext);

if(!(_email.matches(EMAIL_PATTERN)))
{
    Toast.makeText(getApplicationContext(),"Email is not valid", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T08:27:27.383

使用以下方法检查有效的电子邮件 ID。

```
/**
 * method is used for checking valid email id format.
 * 
 * @param email
 * @return boolean true for valid false for invalid
 */
public static boolean isEmailValid(String email) {
    boolean isValid = false;

    String expression = "^[\\w\\.-]+@([\\w\\-]+\\.)+[A-Z]{2,4}$";
    CharSequence inputStr = email;

    Pattern pattern = Pattern.compile(expression, Pattern.CASE_INSENSITIVE);
    Matcher matcher = pattern.matcher(inputStr);
    if (matcher.matches()) {
        isValid = true;
    }
    return isValid;
} 
```

# c# - Post 方法和使用某些值重定向而不使用表单 C#

> ID：13173354
> 
> 赞同：1
> 
> 时间：2012-11-01T08:22:36.087
> 
> 标签：c#, asp.net, .net, http, post

```
<form action="https://somewebsiteaddrest" method="post">
   <input name="Var1"  type="hidden" value="Variable 1 value" />
   <input name="Var2"  type="hidden" value="Variable 2 value" />
   <input name="Var3"  type="hidden" value="Variable 3 value" />
   <input name="Var4"  type="hidden" value="Variable 4 value" />
   <input name="Var5"  type="hidden" value="Variable 6 value" />
   <input type="submit" value="Go now" />
</form> 
```

我想在不使用此表单和**javascript** `frm.submit()`的情况下创建相等的发布方法和重定向（在 C# 中） ；

我有一个 C# 代码片段，我希望能做这些事情。

```
 WebRequest request = WebRequest.Create(url);
    request.Method = "POST";
    string postData = "What to write here? here should be variable i guess.";
    byte[] byteArray = Encoding.UTF8.GetBytes(postData);
    request.ContentType = "application/x-www-form-urlencoded";
    request.ContentLength = byteArray.Length;
    Stream dataStream = request.GetRequestStream();
    dataStream.Write(byteArray, 0, byteArray.Length);
    dataStream.Close();
    WebResponse response = request.GetResponse();
    Console.WriteLine(((HttpWebResponse)response).StatusDescription);
    dataStream = response.GetResponseStream();
    StreamReader reader = new StreamReader(dataStream);
    string responseFromServer = reader.ReadToEnd();
    Console.WriteLine(responseFromServer);
    reader.Close();
    dataStream.Close();
    response.Close();

string postData 
```

在 postData 中写什么以获得与使用`form`and相同的效果`form.submit()`？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:29:30.777

帖子数据应该是 URL 编码的表单数据，即由`&`字符分隔的 key=value 对。使用该[`UrlEncode`方法](http://msdn.microsoft.com/en-us/library/4fkewx0t.aspx)对值进行编码：

```
string postData =
  "Var1=" + HttpUtility.UrlEncode("Variable 1 value")+
  "&Var2=" + HttpUtility.UrlEncode("Variable 2 value")+
  "&Var3=" + HttpUtility.UrlEncode("Variable 3 value")+
  "&Var4=" + HttpUtility.UrlEncode("Variable 4 value")+
  "&Var5=" + HttpUtility.UrlEncode("Variable 6 value"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:28:18.347

PostData="Var1=xxx&Var2=yyyy...."

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T08:28:37.930

[POST 请求](http://en.wikipedia.org/wiki/POST_%28HTTP%29)提供了一个使用 URL 编码来发送数据的正文。

您可以使用[此方法](http://msdn.microsoft.com/en-us/library/4fkewx0t.aspx)对数据进行编码。

所以例如你可以有这样的代码：

```
string ToQueryString(IEnumerable data)
{
    return string.Join("&", data.Select(d => HttpUtility.UrlEncode(d.ToString())));
} 
```

# jquery - iOS $.post Jquery 不工作

> ID：13173359
> 
> 赞同：0
> 
> 时间：2012-11-01T08:22:47.847
> 
> 标签：jquery, ios, post, hybrid

我在 android 和 ios 手机上都有一个混合应用程序，我遇到的问题是其中一些`$.post`在 ios 中不起作用。

我已经对其进行了测试：

*   Windows PC Chrome - 好的
*   Windows PC Safari - 好的
*   Android 应用程序 - 好的
*   Android 浏览器 - 好的
*   iPhone 应用程序 - 不工作
*   iPhone Safari - 不工作
*   iPad Safari - 不工作

10 个帖子中有 2 个不工作，使用相同的代码，只是 url 不同。一个不起作用的网址有点长，大约有 20 个参数，另一个有大约 5 个。

所以不能这样吗？

任何想法这可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:44:25.900

我已经解决了：当 android 或 windows 在 url 中发送 javascript 日期时，它是：2012-11-1 10:16:48.123

iOS发送时：2012-11-1 10:09:04 CET.733

当我尝试 DateTime.Parse ios 时，它说：“该字符串未被识别为有效的 DateTime。从索引 19 开始有一个未知单词。”

# java - 使用 Swing 的 JTextField 在 Java 屏幕上打印

> ID：13173367
> 
> 赞同：0
> 
> 时间：2012-11-01T08:23:09.860
> 
> 标签：java, swing, user-interface, actionlistener, jtextfield

> **可能重复：**
> [如何使用 Java Swing 从 TextField 在屏幕上打印用户输入](https://stackoverflow.com/questions/13171604/how-to-print-the-user-input-on-screen-from-a-textfield-using-java-swing)

请看下面的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

    public class Swingtest extends JFrame implements ActionListener{
    JTextField txtdata;
    JButton calbtn = new JButton("Calculate");

    public Swingtest()
    {
        JPanel myPanel = new JPanel();
        add(myPanel);
        myPanel.setLayout(new GridLayout(3, 2));
        myPanel.add(calbtn);
        calbtn.addActionListener(this);
        txtdata = new JTextField();
        myPanel.add(txtdata);
    }

    public void actionPerformed(ActionEvent e)
    {
        if (e.getSource() == calbtn) {
            String data = txtdata.getText(); //perform your operation
            System.out.println(data);
        }
    }

    public static void main(String args[])
    {
        Swingtest g = new Swingtest();
        g.setLocation(10, 10);
        g.setSize(300, 300);
        g.setVisible(true);
    }
} 
```

我想要做的是在同一窗口中显示用户在字段中输入的文本。当文本更改时，有点像 paint(Graphics g) 和 repaint()。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:30:23.850

添加 JLabel、JTextField、JTextArea 或任何能够显示文本的组件。获取用户输入文本的 JTextField 的文档，并在该文档中添加 DocumentChangeListener。每次收到 DocumentEvent 时，从 JTextField 获取文本并更新 JLabel、JTextField、JTextArea 或您选择的任何组件中的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:28:56.817

这可以通过重定向 I/O/E 流来完成：

我会给你一个详细的答案，但是为这个问题选择的答案的回答者更好地解释了它。

看到这个问题：[我如何将 Java 控制台输出读入字符串缓冲区](https://stackoverflow.com/questions/4334808/how-could-i-read-java-console-output-into-a-string-buffer)

将其读入 StringBuffer 后，您可以将其打印到 JTextField 或 JTextArea.. 等

# java - Java 文件 I/O 的良好实践

> ID：13173369
> 
> 赞同：4
> 
> 时间：2012-11-01T08:23:15.053
> 
> 标签：java, file-io, filewriter, printwriter, bufferedwriter

我正在尝试从文件中读取整数，对它们应用一些操作并将这些结果整数写入另一个文件。

```
// Input
FileReader fr = new FileReader("test.txt");
BufferedReader br = new BufferedReader(fr);
Scanner s = new Scanner(br);

// Output
FileWriter fw = new FileWriter("out.txt");
BufferedWriter bw = new BufferedWriter(fw);
PrintWriter pw = new PrintWriter(bw);

int i;

while(s.hasNextInt())
{
    i = s.nextInt();
    pw.println(i+5);
} 
```

我想问这样包装这些输入和输出流是一种好习惯吗？
我是 Java 新手，在互联网上，我在文件中看到了许多其他 I/O 方式。我想坚持一种方法，所以高于最好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T09:08:11.713

**-** Well consider that you went shopping into a food mall, Now what you do usually, pick-up each item from the selves and then go to the billing counter then again go to the selves and back to billing counter ....?? Or Store all the item into a Cart then go to the billing counter.

**-** Its similar here in Java, `Files` deal with bytes, and `Buffer` deals with characters, so there is a conversion of bytes to characters and trust me it works well, there will not be any noticeable overhead.

**So to Read the File:**

```
File f = new File("Path");
FileReader fr = new FileReader(f);
BufferedReader br = new BufferedReader(fr); 
```

**So to Write the File:**

```
File f = new File("Path");
FileWriter fw = new FileWriter(f);
BufferedWriter bw = new BufferedWriter(fw); 
```

And when you use `Scanner` there is no need to use `BufferedReader`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T11:27:51.307

请记住，这些类的设计基于[装饰器设计模式](http://en.wikipedia.org/wiki/Decorator_pattern)。一个好的做法是关闭`java.io.Closeable`一个`finally`块中的所有实例。例如：

```
 Reader r = null;
    Scanner s = null;
    try {
        r = new FileReader("test.txt");
        s = new Scanner(r);
        // Do your stuff here.
    } finally {
        if (r != null)
            r.close();
        if (s != null)
            s.close();
    } 
```

或者，如果您使用的是 Java 7 或更高版本：

```
 try (
            Reader r = new FileReader("test.txt");
            Scanner s = new Scanner(r)
            ) {
        // Do your stuff here.
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T08:27:57.617

`BuffredWriter`当你`PrintWriter`用来写字符数据时，你真的不需要，`printwriter`有一个构造函数，它`filewriter`作为`argument`. 并且不需要你可以使用它自己`scanner`来`read`实现它。`file``bufferedreader`

```
FileReader fr = new FileReader("test.txt");
BufferedReader br = new BufferedReader(fr);
while((line=br.readLine())!=null){
//do read operations here
}

FileWriter fw = new FileWriter("out.txt");
PrintWriter pw = new PrintWriter(fw);
 pw.println("write some data to the file") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T08:31:57.543

Scanner 不需要 BufferedReader。您可以将它包裹在 FileReader 上。

```
Scanner s = new Scanner(new FileReader("test.txt")); 
```

在使用扫描仪时，最好假设源包含各种内容。使用后关闭扫描仪很好。

```
 while(s.hasNext()){

    if(s.hasNextInt())
      int i = s.nextInt();

    s.next();
    }
     s.close(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-30T19:01:40.997

我通常这样做：

```
String inputFileLocation = "Write it here";

BufferedReader br = new BufferedReader(new FileReader(new File(fileLocation)));

while((line=br.readLine())!=null){
//Scanner operations here
}

String outputFileLocation = "Here";
PrintWriter pr = new PrintWriter(new FileWriter(new File(outputFileLocation))); 
```

# sql - 如何在不使用光标的情况下一次选择一条记录？

> ID：13173372
> 
> 赞同：1
> 
> 时间：2012-11-01T08:23:17.453
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我在 SQL SERVER 中有两个表。

DBO.VitalPatientDetails=>

| 患者详细信息 ID | 患者 ID | 患者姓名 | 单位名称 | 床名 | 患者出生日期 | 上次警报接收时间 |

DBO.VitalAlarmDetails=>

| 身份证 | PatientDetailsId（指 VitalPatientDetails.PatientDetailsId）| VitalGenerationTime | 文件名 |

我需要检索按 VitalGenerationTime 升序排序的 PatientDetailsId 分组的 DBO.VitalAlarmDetails 的所有字段。我为此编写了光标，如下所示，它返回多个结果集。我需要在不使用光标的情况下将它放在一组中。我只想知道我是否可以在没有光标的情况下做到这一点。

```
DECLARE @PatientDetailsId BIGINT
DECLARE @getAlarmDetails CURSOR

SET @getAlarmDetails = CURSOR FOR SELECT PatientDetailsId FROM VitalPatientDetails

OPEN @getAlarmDetails
    FETCH NEXT FROM @getAlarmDetails INTO @PatientDetailsId

    WHILE @@FETCH_STATUS = 0
    BEGIN
        SELECT * FROM VitalAlarmDetails
        WHERE PatientDetailsId = @PatientDetailsId
        ORDER BY VitalGenerationTime ASC

        FETCH NEXT FROM @getAlarmDetails INTO @PatientDetailsId
    END
CLOSE @getAlarmDetails
DEALLOCATE @getAlarmDetails 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:26:51.590

尝试使用`WHILE`循环替换`CURSOR`. 我在另一个 SO 问题中发布了一个示例：

[SQL Server 存储过程避免游标](https://stackoverflow.com/questions/11077162/sql-server-stored-procedure-avoid-cursor/11077218#11077218)

它会变成如下所示：

```
从 VitalAlarmDetails 中选择 @PatientDetailsId = MIN (PatientDetailsId)
而@PatientDetailsId 不为空
开始

   ' 在这里做事

   从 VitalAlarmDetails 中选择 @PatientDetailsId = MIN (PatientDetailsId)，其中 PatientDetailsId > @PatientDetailsId

结尾

```

编辑：

要返回一个集合而不是逐行访问它，请使用以下内容：

```
SELECT 
    VAD.*
FROM 
VitalAlarmDetails VAD JOIN
        VitalPatientDetails VPD ON VAD.PatientDetailsId  = VPD.PatientDetailsId 
```

编辑2：

`JOIN`仍然没有产生预期的结果。`WHILE`建议在循环内使用临时表来存储结果。这似乎奏效了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:40:26.463

好的，所以如果我正确理解您**的单个结果集，按 VitalGenerationTime 排序（以及使用 PatientDetailsId 排序的游标？**

像这样的东西怎么样

```
SELECT  PatientDetailsId,
        VitalGenerationTime
FROM    VitalAlarmDetails
ORDER BY    PatientDetailsId,
            VitalGenerationTime 
```

# ios - 未能将我的照片分享到微信

> ID：13173374
> 
> 赞同：1
> 
> 时间：2012-11-01T08:23:23.090
> 
> 标签：ios, iphone

我想把网上的一张照片分享到微信上，但是按下分享按钮后，什么都没有发生，我是Objective-C的新手，我自己也无法解决问题。听说这里有很多专家，那么有没有人可以帮我解决这个问题？提前致谢。以下是代码：

```
UIImage * image = [[[imageTitleArray objectAtIndex:initIndex] albumImageView] image];
       WXMediaMessage *message = [WXMediaMessage message];
       [message setThumbImage: image];
       WXImageObject *ext = [WXImageObject object];
       ext.imageData =  UIImageJPEGRepresentation(image,1);
       message.mediaObject = ext;
       SendMessageToWXReq* req = [[[SendMessageToWXReq alloc] init]autorelease];
       req.bText = NO;
       req.message = message;
       [WXApi sendReq:req]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T14:23:07.987

试试下面的方法

```
- (void) sendImageContentToWeixin:(UIImage *)image {
//if the Weixin app is not installed, show an error
if (![WXApi isWXAppInstalled]) {
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil message:@"The Weixin app is not installed" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
[alert show];
return;
}
//create a message object
WXMediaMessage *message = [WXMediaMessage message];
//set the thumbnail image. This MUST be less than 32kb, or sendReq may return NO.
//we'll just use the full image resized to 100x100 pixels for now
[message setThumbImage:[image resizedImage:CGSizeMake(100,100) interpolationQuality:kCGInterpolationDefault]];
//create an image object and set the image data as a JPG representation of our UIImage
WXImageObject *ext = [WXImageObject object];
ext.imageData = UIImageJPEGRepresentation(image, 0.8);
message.mediaObject = ext;
//create a request
SendMessageToWXReq* req = [[SendMessageToWXReq alloc] init];
//this is a multimedia message, not a text message
req.bText = NO;
//set the message
req.message = message;
//set the "scene", WXSceneTimeline is for "moments". WXSceneSession allows the user to send a message to friends
req.scene = WXSceneTimeline;
//try to send the request
if (![WXApi sendReq:req]) {
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:nil message:@"Error" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
[alert show];
}
} 
```

# javascript - 使用fabric js时需要更改画布背景颜色

> ID：13173381
> 
> 赞同：16
> 
> 时间：2012-11-01T08:23:48.123
> 
> 标签：javascript, html5-canvas, fabricjs

我有一个画布元素，我用它创建了织物对象。现在，我想动态更改背景颜色。以下对我不起作用。

```
var x;

x = new fabric.Canvas("mycanvas", {
      backgroundColor : "#fff",
      selection: true
   });

x.backgroundColor = "#f00"; 
```

背景颜色为白色，不会变为红色。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-01T08:54:31.540

您需要在更改属性后渲染画布，因为对象的属性只是属性，而不是由事件处理

[http://jsfiddle.net/oceog/gDhht/](http://jsfiddle.net/oceog/gDhht/)

```
var canvas = new fabric.Canvas('c',{backgroundColor : "#0ff"});
console.log(canvas);
canvas.backgroundColor="red";
canvas.renderTop();
canvas.add(
  new fabric.Rect({ top: 100, left: 100, width: 50, height: 50, fill: '#f55' }),
  new fabric.Circle({ top: 140, left: 230, radius: 75, fill: 'green' }),
  new fabric.Triangle({ top: 300, left: 210, width: 100, height: 100, fill: 'blue' })
);

canvas.backgroundColor="green";
canvas.renderAll();
​ 
```

* * *

**更新：我尝试了最新的面料，似乎你不再需要 renderAll() 了。**

# c# - COM 对象的通用约束

> ID：13173384
> 
> 赞同：0
> 
> 时间：2012-11-01T08:24:03.830
> 
> 标签：c#, generics, com, dispose

我有一个通用基类，它包装 COM 对象并希望将其限制为 COM 对象。我试过`where TComObject : IUnknown`了，但编译器不喜欢它。有没有办法做到这一点？

我使用下面的代码，如果您发现一些愚蠢的东西，请提供反馈。

```
public abstract class ComWrapper<TComObject> : IDisposable, IComWrapper<TComObject> where TComObject : class 
{
    protected ComWrapper(TComObject comObject)
    {
        ComObject = comObject;
    }

    protected TComObject ComObject { get; set; }

    /// <summary>
    /// Use with caution, this accesses the COM object, cleanup might be needed
    /// </summary>
    /// <returns></returns>
    public TComObject GetComObject()
    {
        return ComObject;
    }

    public void SetComObject(TComObject comObject)
    {
        CheckAndReleaseComObject();
        ComObject=comObject;
    }

    public void Dispose()
    {
        Dispose(true);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (disposing)
        {
            // free managed resources
        }
        // free native resources if there are any.
        CheckAndReleaseComObject();
    }

    private void CheckAndReleaseComObject()
    {
        if (ComObject != null)
        {
            if (ComObject.GetType().IsCOMObject)
                Marshal.ReleaseComObject(ComObject);
            ComObject = null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:36:40.177

您不能设置这样的通用约束，但是，您可以考虑使用类似`Marshal.IsComObject`的东西来确保对象是 COM 对象。如果您特别想要编译时错误，我认为您不走运。

另外，请注意 SetComObject 可以被多次调用，在这种情况下，您不会“清理”任何可能已经设置的 com 对象。此外，您现在可以删除 GC.SuppressFinalize，因为您删除了终结器/析构函数，这确实是不需要的，因为如果 com 对象进入垃圾收集，框架将为您释放它。

# jquery - 如何从 json 中获取值以在下拉列表中实现它？

> ID：13173393
> 
> 赞同：-3
> 
> 时间：2012-11-01T08:24:43.767
> 
> 标签：jquery

```
var g_Vehicle = {
        g_Vehicle1: [
            Year: "2011",
            Make: "abc",
            Model: "Avenger",
            SubModel: "def"
        ],
        g_Vehicle2: [
            Year: "2012",
            Make: "abc",
            Model: "200",
            SubModel: "deft"
        ],
        g_Vehicle3: [
            Year: "2011",
            Make: "dfg",
            Model: "300",
            SubModel: "sde"
        ],
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:26:21.570

那不是 JSON，那是 JavaScript 对象字面量。无效的，您的语法不正确...

```
var g_Vehicle = {
        g_Vehicle1: [
        //  v------------------------here
            Year: "2011",
            Make: "abc",
            Model: "Avenger",
            SubModel: "def"
        ],
        ... 
```

`[`...`]`是您定义数组的方式，但您放入其中的是您定义对象属性的方式。如果您将`[`and更改`]`为`{`and `}`，它将是有效的，但使用起来很尴尬。相反，只需将整个事物设为对象数组：

```
var g_Vehicles = [
        {
            Year: "2011",
            Make: "abc",
            Model: "Avenger",
            SubModel: "def"
        },
        {
            Year: "2012",
            Make: "abc",
            Model: "200",
            SubModel: "deft"
        },
        {
            Year: "2011",
            Make: "dfg",
            Model: "300",
            SubModel: "sde"
        }
]; 
```

然后你可以遍历它，生成你想要的任何类型的下拉菜单。例如，这是创建`select`下拉菜单的一种方法：

```
var markup = ['<select>'];
$.each(g_Vehicles, function(index, vehicle) {
    markup.push('<option value=' + index + '>' +
                vehicle.Make + '-' + vehicle.Model + '-' + vehicle.SubModel +
                '</option>');
});
markup.push('</select>');
$("selector_for_some_container").html(markup.join("")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:27:22.313

### 这是一个 JavaScript 对象文字而不是 JSON。

所以使用jQuery的[`$.each`](http://api.jquery.com/jQuery.each/)函数：

```
g_Vehicle.each(function(index) {
    $('select').append($('<option>' + g_Vehicle[index].Make + '</option>'));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T08:27:30.997

这是一些可以帮助您入门的代码。根据您填写的下拉菜单对此进行扩展。

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">

var g_Vehicle = [
    {
        Year: "2011",
        Make: "Ram",
        Model: "Avenger",
        SubModel: "Dart",
        Vin: "1C1"
    },
    {
        Year: "2012",
        Make: "Dodge",
        Model: "200",
        SubModel: "Dart",
        Vin: "1C2"
    },
    {
        Year: "2011",
        Make: "Chrysler",
        Model: "300",
        SubModel: "Durango",
        Vin: "1C3"
    }
];

var year="2011";

$(document).ready(function(){
    for(var i in g_Vehicle){
       if(g_Vehicle[i].Year == year){
           $('#make').append($('<option>' + g_Vehicle[i].Make + '</option>'));
       }
    }
});

</script>
<body>
<select id="make"></select>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T08:48:46.687

与jQuery一起做......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>
var g_Vehicle = {
  g_Vehicle1: {
      Year: "2011",
      Make: "abc",
      Model: "Avenger",
      SubModel: "def"
  },
  g_Vehicle2: {
      Year: "2012",
      Make: "abc",
      Model: "200",
      SubModel: "deft"
  },
  g_Vehicle3: {
      Year: "2011",
      Make: "dfg",
      Model: "300",
      SubModel: "sde"
  }
}

$(document).ready(function() {

    (function() {
        var l = '';
        for(var id in g_Vehicle) {
            l += '<option value="'+id+'">'+id+'</option>'           
        }
        $('#mymenu')
        .html(l)
        .change(function() {

            //Test here
            var r = g_Vehicle[$(this).val()];           
            alert('Year: ' + r.Year+'\nMake: ' + r.Make+'\nModel: ' + r.Model+'\nSubModel: ' + r.SubModel+'\n');

        });     
    })();
});
</script>
</head>
<body>
<form id="myform" name="myform">
<select id="mymenu" name="mymenu"></select>
</form>
</body>
</html> 
```

# r - url R github api中的原始github令牌值

> ID：13173395
> 
> 赞同：1
> 
> 时间：2012-11-01T08:24:46.627
> 
> 标签：r, github

查看网站上的原始选项时，如何以编程方式获取`raw.github.com`url 中的令牌值。`api.github.com`即，您可以从提供的 api中获取该令牌值吗？

我所指的内容与很久以前在这个问题[https://stackoverflow.com/questions/9088557/download-github-raw-source-file-by-url](https://stackoverflow.com/questions/9088557/download-github-raw-source-file-by-url)中提出的问题相同， 但是令牌现在似乎每天更改，每个文件都不同。

我可以使用的另一种方法是直接使用 api...但是下载的内容通常以 bas64 编码，并且由于原始内容具有一些“特殊字符”，因此很难解码...或者它没有并不总是正确解码。

我目前正在使用 httr 访问 github api...但似乎无法访问我想下载的单个文件/（不是整个包）的实际内容...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:17:55.080

如此[GitHub 项目](https://github.com/lbdremy/gedit-jade)所示，您不需要公共存储库的令牌。

```
wget https://raw.github.com/lbdremy/gedit-jade/master/jade.lang -O ~/.local/share/gtksourceview-2.0/language-specs/jade.lang 
```

另外，对于 GitHub APIV3，不支持带有令牌的基本身份验证（请参阅“ [GitHub API：继续前进](https://github.com/blog/1090-github-api-moving-on)”）。

# iphone - 是否可以增加系统声音的音量？

> ID：13173400
> 
> 赞同：1
> 
> 时间：2012-11-01T08:25:09.687
> 
> 标签：iphone, ios, audiotoolbox

我正在为 iPad 制作钢琴应用程序。我正在使用`AudioServicesPlaySystemSound`(toneSSID) 播放按键声音。但也有增加音量的功能。但我找不到如何增加声音。有谁能够帮我？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:15:51.417

添加 AudioStreamer.h 文件

将此方法添加到 AudioStreamer.m

```
- (void)setVolume:(float)Level
{

OSStatus errorMsg = AudioQueueSetParameter(audioQueue, kAudioQueueParam_Volume, Level);

if (errorMsg) {
    NSLog(@"AudioQueueSetParameter returned %d when setting the volume.", errorMsg);
}

} 
```

并将其处理为 audiostreamclass 对象，例如

AudioStreamer *Obj = [AudioStreamer alloc] init];

```
[obj setVolume:1.0]; 
```

# objective-c - 我应该使用什么重定向 uri（OAuth 2.0）？

> ID：13173406
> 
> 赞同：4
> 
> 时间：2012-11-01T08:25:52.807
> 
> 标签：objective-c, oauth

我为谷歌 API 控制台注册了我的应用程序。我得到了我的客户密码、客户 ID 和**两个重定向 uri**。

```
//● urn:xxxxxxx:oob

//● http://localhostxxxxxx 
```

当然，我使用这些项目并成功向谷歌请求令牌。但是当我点击授权按钮（比如“你想授权这个应用程序吗？”是的）时，会出现两个响应。

如果我使用 urnxxxxxx，我会收到“无法完成操作。（com.google.HTTPStatus 错误 404。）”。

```
//Or If I use http://localhostxxxxxxxxxxxxx and click Yes button, then nothing    
happens. 
```

下一步我该怎么做？（以下代码适用于谷歌阅读器。）

```
#import "MasterViewController.h"

#import "DetailViewController.h"

#import "GTMOAuth2Authentication.h"

#import "GTMOAuth2ViewControllerTouch.h"

#import "GTMOAuth2WindowController.h"

static NSString *const kKeychainItemName = @"Greader";

@interface MasterViewController () {
    NSMutableArray *_objects;
}
@end

@implementation MasterViewController

- (IBAction)authentication:signInToGoogle:(id)sender;

{}

- (GTMOAuth2Authentication * ) authForGoogle
{ 
    NSString * url_string = @"http://www.google.com/reader/api/";
    NSURL * tokenURL = [NSURL URLWithString:url_string];

    NSString * redirectURI = @"xxxxoob";
    GTMOAuth2Authentication * auth;
    auth = [GTMOAuth2Authentication authenticationWithServiceProvider:@"reader"
                                                         tokenURL:tokenURL
                                                      redirectURI:redirectURI
                                                         clientID:@"xxxxx"
                                                     clientSecret:@"xxxx"];

    auth.scope = @"http://www.google.com/reader/api/";
    return auth;
}

- (void)signInToGoogle

{
    GTMOAuth2Authentication * auth = [self authForGoogle];
    NSString* auth_string = @"https://accounts.google.com/o/oauth2/auth";
    NSURL * authURL = [NSURL URLWithString:auth_string];

    GTMOAuth2ViewControllerTouch * viewController;
    viewController = [[GTMOAuth2ViewControllerTouch alloc]initWithAuthentication:auth
                                                             authorizationURL:authURL
                                                             keychainItemName:kKeychainItemName
                                                                     delegate:self
                                                             finishedSelector:@selector(viewController:finishedWithAuth:error:)];
    [self.navigationController pushViewController:viewController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:58:45.700

您应该首先了解 oAuth。

通常，第一个链接是授权流程 - 您调用它并获取代码。第二个 URL 是使用从前一个 URL 获得的代码获取令牌。

Explaining how exactly to work with oAuth is out of the scope here, but you have many places you can read and learn.

# c# - 使用先决条件选项构建安装程序

> ID：13173407
> 
> 赞同：0
> 
> 时间：2012-11-01T08:25:55.833
> 
> 标签：c#, visual-studio-2008, installation

我在 windows 应用程序中创建了项目，现在我想为 SQL Server Compact 3.5 添加自定义启动条件。

可以通过注册表搜索完成吗？可以通过组件 ID 搜索来完成吗？

如果是，那么请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:38:49.163

如果您使用的是 Visual Studio Web 安装程序打包程序，您需要使用自定义操作并尝试查找注册表版本

试试下面 [http://blogs.msdn.com/b/sqlservercompact/archive/2008/02/08/sql-server-compact-release-versions.aspx](http://blogs.msdn.com/b/sqlservercompact/archive/2008/02/08/sql-server-compact-release-versions.aspx)

我建议使用 Wix Installer，它为您提供了很多灵活性。

# html - IE 显示 csv 文件而不是下载

> ID：13173412
> 
> 赞同：0
> 
> 时间：2012-11-01T08:26:28.937
> 
> 标签：html, internet-explorer, jboss, struts2, download

我有一个`.csv`文件要允许用户下载。这是一个静态文件，我已经设置了一个指向该文件的超链接。

它在 Firefox 和 chrome 上运行良好，但在 IE 中，csv 文件显示在浏览器中，而不是被下载。

我找到的所有解决方案都需要通过服务器发送文件。但我觉得对于提供一个简单的静态文件来说，这太过分了。当然必须有一个更简单的方法。

我有一个托管在 JBoss 服务器中的 struts Web 应用程序。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T11:37:18.200

您可以尝试添加`mime-mapping`到您的`web.xml`

```
<mime-mapping> 
  <extension>csv</extension>
  <mime-type>application/octet-stream</mime-type> 
</mime-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:06:34.617

使用[流结果类型](http://struts.apache.org/2.x/docs/stream-result.html)。因此，您的`struts.xml`配置可能包含以下内容：

```
<result name="success" type="stream">
  <param name="contentType">text/csv</param>
  <param name="inputName">inputStream</param>
  <param name="contentDisposition">attachment;filename="document.csv"</param>
  <param name="bufferSize">1024</param>
</result> 
```

[在http://www.mkyong.com/struts2/struts-2-download-file-example/](http://www.mkyong.com/struts2/struts-2-download-file-example/)有一个例子

# .net - 使用查询时的数据库值更新附加实体的属性

> ID：13173415
> 
> 赞同：1
> 
> 时间：2012-11-01T08:26:48.290
> 
> 标签：.net, entity-framework, optimistic-concurrency

我有一个具有整数属性（名为 ROW_VERSION）的实体类，其中 ConcurrencyMode 设置为“Fixed”以进行乐观并发检查。在保存此类型的实体之前，我会在我的应用程序代码中增加此列的值（因此 StoreGeneratedPattern 设置为 None）。这在保存更改时效果很好。

现在，当我有一个先前加载的实体（使用 ROW_VERSION = x）并创建一个新的 DbContext、附加此实体并发出涉及此实体的查询时，我还想检测并发错误。那里的问题是，如果 ROW_VERSION 被另一个客户端应用程序（ROW_VERSION = x + 1）增加，这在我的查询过程中没有被检测到，因为附加实体的值显然具有优先级（这对于常见的列值完全有意义）。

另一方面，对于我的并发检查列，如果 EF 使用当前数据库值更新该值，那就太好了，这样我就可以将它与预期值进行比较。或者，从查询执行中抛出的异常是可以接受的。

我将实体框架 4.3 与 .NET 4.0 一起使用。

编辑（回应 Gert Arnold 的评论）：

我试图进一步澄清我的问题......

我的应用程序一般如何工作的注意事项：

*   有一个树视图显示我可用的实体对象，在选择一个时，从数据库加载完整实体以显示在详细视图中，可以在其中进行编辑

*   对实体对象的修改不会立即保存，而是缓存在内存中，因此当用户点击保存按钮时，不同实体对象的修改会堆积起来并一起保存。

*   DbContext 是单独创建的，用于查询和保存更改（即，我并不总是拥有相同的 DbContext，但它们会根据需要进行实例化）。

*   当加载实体对象以在详细视图中显示时，所有先前修改的实体对象（被缓存）都附加到首先用于查询的 DbContext。然后发出实际的查询。**因此，如果我查询一个实体对象，该对象在我将获得修改后的版本作为结果之前已被修改，而不是来自数据库的版本（同时可能已更改）。**

所以这是一个显示我的问题的例子：

1.  客户端应用程序 1 加载 ROW_VERSION = 1 的实体对象，释放 DbContext 并保留对该实体对象的引用以供进一步编辑。

2.  客户端应用程序 2 加载步骤 1 中提到的相同实体对象，更改属性并保存更改。这会导致数据库中的 ROW_VERSION 递增（现在为 2）。

3.  Client App 1 的用户现在更改了实体对象的一些属性（它仍在内存中，ROW_VERSION 为 1）。

4.  在客户端应用程序 1 保存更改之前，它会加载一些其他实体对象以进行显示，并最终再次选择有问题的实体对象（例如，查看所做的更改）。这会导致查询结果将包含已更改的实体对象（因为它在实际查询发送到数据库之前附加到 DbContext）。

    **这是我的问题：此时实体框架可以将附加对象的 ROW_VERSION 与实际查询结果中的对象的 ROW_VERSION 进行比较，检测不匹配并例如抛出异常。**

    **但相反，EF 将 ROW_VERSION 属性视为可能刚刚被客户端更改的所有其他属性。**

所以我希望 EF 特别对待 ROW_VERSION 属性并在每个查询中比较它的值以检测其他客户端的更改。这样，我会在等待 SaveChanges 调用之前检测到并发情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T17:43:36.247

我想我现在明白了，但我看不出 Entity Framework 如何在这里为您提供帮助。

1.  每个定义的乐观并发是一种在提交数据时处理冲突的策略。不是在读取数据时。`ConcurrencyMode`因此，如果以这种方式实现（即使是可配置的），也将背离预期的行为。
2.  假设 EF 实体类可以配置为在读取时表现得像这样。在检索这些实体的列表或包含这些实体的对象图时，很难处理所有可能的异常。是否应该回滚整个读取？所以它可能只在读取单个实体对象时才有用。那将是一个非常（阅读：也是）细粒度的配置规范。

据我所知，如果你想要这个预警系统，你必须自己编程。这应该涉及一些查询来专门读取版本值，因为`Refresh`使用`StoreWins`(ObjectContext) 或`Reload`(DbContext) 总是会覆盖所有值。

# android - 在 xml 中添加地图会降低应用程序的速度

> ID：13173419
> 
> 赞同：0
> 
> 时间：2012-11-01T08:26:56.443
> 
> 标签：android

一旦我将地图添加到我的布局 XML 中，活动的加载速度就会非常慢。时间长了会跳转到activity并显示地图。我对此很新鲜，任何帮助都会很好。

我发现一个网页链接说我应该尝试**延迟加载**。我理解它，因为它会先进入活动然后加载地图。但我不确定如何实现这一点。

谁能提供一个例子？

```
<com.google.android.maps.MapView
             android:id="@+id/location_map"
             android:layout_toRightOf="@id/rl_personaltrip_departure_times"
             android:layout_width="fill_parent"
             android:layout_height="200dp"
             android:layout_marginLeft="10dp"
             android:layout_marginRight="10dp"
             android:enabled="true"
             android:clickable="true"
             android:apiKey="@string/maps_api_key"
      /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:02:34.570

只需在下面写下这段代码

```
mapView = (MapView) findViewById(R.id.mapView);
        mapView.preLoad(); 
```

# centos - PXE dhcp 路由问题

> ID：13173423
> 
> 赞同：0
> 
> 时间：2012-11-01T08:27:05.840
> 
> 标签：centos, dhcp

我在 Centos 6.x 上运行 PXE。我正在尝试使用 4 个 nic 对服务器进行映像。eth0、eth1、eth2、eth3。

eth0和eth1在pxe服务器所在的网段。我还使用这个 pxe 服务器通过网络服务器提供构建过程所需的文件。

当 DHCP 分配 IP 地址时，它会为所有接口 eth0 eth1 eth2 和 eth3 分配 IP 地址。它还分发一个默认网关。默认网关在 eth3 上配置。这是错误的，因为 eth3 没有连接到 Web 服务器所在的网络，并且它无法从 Web 服务器上下载它的文件。

我在 PXE 中使用的地址范围是 192.168.20.0/24 gw 1​​92.168.20.1。如何让 PXE DHCP 在 eth0 而不是 eth3 上设置默认网关 192.168.20.1

这是路由表

```
Destination     Gateway      Genmask         Flags   Metric  Ref  Use   IFace

192.168.20.0    *            255.255.255.0   U       0       0    0     eth3
192.168.20.0    *            255.255.255.0   U       0       0    0     eth2
192.168.20.0    *            255.255.255.0   U       0       0    0     eth1
192.168.20.0    *            255.255.255.0   U       0       0    0     eth0
127.0.0.1       *            255.255.255.0   U       0       0    0     lo  
default         192.168.20.1 0.0.0.0         UG      0       0    0     eth3 
```

这是我的 dhcp 配置

```
ddns-update-style interim;
not authoritative;

option domain-name "mydomain.com";
option domain-name-servers 192.168.20.15;
option subnet-mask 255.255.255.0;
subnet 192.168.20.0 netmask 255.255.255.0 {
authoritative;
range 192.168.20.220 192.168.20.245;
option routers 192.168.20.1;
default-lease-time 900;
max-lease-time 1200000000;

allow unknown-clients;
allow booting;
allow bootp;
next-server 192.168.20.15;
filename "pxelinux.0";
} 
```

任何想法如何让默认网关位于 eth0 上以便我可以正确路由？

谢谢 - 奥利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-02T13:25:01.943

你在问题上说：

> 带 4 个网卡的服务器。eth0、eth1、eth2、eth3。...
> eth0 和 eth1 在 pxe 服务器所在的网段。...

然后回答：

> 在 eth2 和 eth3 的网络上发布 DHCP 租约的另一台 DHCP 服务器

所以基本上两个段 DHCP 服务器都提供相同的 GW IP。这意味着您所有的 NIC 都在同一个 IP 子网上`192.168.20.0/24`。

更改您的子网设置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T10:36:58.967

我有另一台 DHCP 服务器在 eth2 和 eth3 所连接的网络上发布 DHCP 租约。这会干扰路由并导致 eth0 和 eth1 路由问题。我停止了网络 eth 2 和 eth3 上的 DHCP 服务，之后一切都很好

# javascript - 如何缓存 JavaScript Date 对象？

> ID：13173425
> 
> 赞同：3
> 
> 时间：2012-11-01T08:27:12.010
> 
> 标签：javascript, jquery, datejs

我正在使用[Date.js](http://www.datejs.com/)在我的网络应用程序中支持多种文化。这里的问题是 date.js 有这样的代码。

```
 Date.prototype._toString = Date.prototype.toString;
  Date.prototype.toString = function () {
    //doing something
        return this._toString();
   } 
```

当我使用另一个文化文件时，它也包含这个定义。所以逻辑上我的医生有这个

```
//date.js
     Date.prototype._toString = Date.prototype.toString;
     Date.prototype.toString = function () {
     //doing something
         return this._toString();
     }
     //date-fr-FR.js
     Date.prototype._toString = Date.prototype.toString;
     Date.prototype.toString = function () {
         //doing something
         return this._toString();
     } 
```

我在我的网络应用程序中同时引用 date.js 和 date-fr-FR.js。

问题是当我使用 toString 函数`var d = new Date().toString();`时，它会抛出一个`Out of stack space`msg，因为递归调用。有没有办法缓存原始 Date 对象并将其恢复，因为我不想从文档中删除 date.js

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:55:05.983

无需同时包含`date.js`and `date-fr-FR.js`，您只需包含`fr-FR.js`文件即可更改文化，您可以在 Datejs-all-Alpha1.zip 文件的 src/globalization 文件夹中找到该文件。fr-FR.js 文件仅包含特定于文化的数据，它应该覆盖 date.js 中已包含的内容，而不重新定义功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:23:16.607

您所要做的就是检查是否`_toString`已定义。

```
Date.prototype._toString = Date.prototype._toString || Date.prototype.toString;
Date.prototype.toString = function() {
    //doing something      
    return this._toString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T08:35:39.253

您应该只复制一次函数：

```
Date.prototype._toString = Date.prototype.toString; 
```

第二次执行此操作时，它将再次复制本机 toString 函数，然后将通过递归循环调用自身。

我不知道您是否实际上不止一次这样做，但在[`fr-FR.js`](http://code.google.com/p/datejs/source/browse/trunk/src/globalization/fr-FR.js)文件中没有定义其他 toString 方法，所以我猜您是手动添加它。

**更新**

如果您包含 date.js 核心两次（您不应该，只包含语言环境），您可能首先检查该函数是否存在：

```
if ( typeof Date.prototype._toString != 'function' ) {
    // include date.js
} 
```

# php - 如何从 php 函数中调用 SQL 语句

> ID：13173426
> 
> 赞同：0
> 
> 时间：2012-11-01T08:27:11.813
> 
> 标签：php, sql

我正在尝试编写一个代码，其中所有 SQL 语句都存储在一个单独的 PHP 文件中，以便以后可以将它们作为函数调用。

我尝试了不同的方法，但似乎无法使其正常工作。

这是我的代码（我正在尝试在这里创建一个登录页面）

登录.php

```
<?php
     include('sql.php');
     $sql = new sql();
?>

<form class = "form-inline" method = "post" style="color: #FFF; position: absolute; margin-top:100px; margin-left:500px;">
            <table width="100%" border="0">
  <tr>
    <td>Username</td>
    <td><input type="text" id = "username" name = "username" class="large" placeholder=""></td>
  </tr>
  <tr>
    <td>Password</td>
    <td><input type="password" id = "password" name = "password" class="large" placeholder=""></td>
  </tr>
</table>
<br />
<center><button type="submit" id = "submit" name = "submit" class="btn btn-primary">Log in</button></center>
</form>
<?php
//echo $sql->admin();
?>

<?php
    if(isset($_POST['submit'])) {
        // username and password sent from form
        $username=$_POST['username'];
        $password=$_POST['password'];

        // To protect MySQL injection (more detail about MySQL injection)
        $username = stripslashes($username);
        $password = stripslashes($password);
        $username = mysql_real_escape_string($username);
        $password = mysql_real_escape_string($password);

        //THIS IS THE PART WHERE I CALL THE SQL STATEMENT FROM A SEPARATE PHP FILE
                            echo $sql->admin($username,$password);

        // Mysql_num_row is counting table row
        $count=mysql_num_rows($sql);

        // If result matched $username and $password, table row must be 1 row               
        if($count==1)
        {
            //unset($_SESSION);
            $row = mysql_fetch_assoc($sql);
            $_SESSION[logged] = $row[logged];
            // Register $username, $password and redirect to file "index.php"
            $_SESSION['username'] = $username;
            $_SESSION['password'] = $password;
            $_SESSION['submitted'] = $row[submitted];
            $_SESSION['date_submitted'] = $row[date_submitted];
            session_register($_SESSION['username']);
            session_register($_SESSION['password']);
            ?>
                                     <script>window.location="index.php";</script>
            <?php
        }
        else 
        { ?>
            <center><span style="color:white;">Wrong Username or Password</span></center>
        <?php

        }
    }
?> 
```

sql.php

```
<?php
  include('connect.php');
  class sql{
    function sql()
    {

    }

    function admin($username,$password)
    {
        echo $sql=mysql_query("SELECT * FROM admin WHERE admin_username= '$username' and admin_password= '$password' ");
    } 
}
?> 
```

此代码出现的错误是

```
Warning: mysql_num_rows(): supplied argument is not a valid MySQL result resource in login.php on line 40 
```

我的第 40 行是

```
$count=mysql_num_rows($sql); 
```

* * *

我终于明白了。正如你所说，我在我的 sql.php 中添加了一行

```
 return $result; 
```

我的代码不起作用的另一个原因是因为我没有放置我的

```
 $sql->admin($username,$password); 
```

变量内。现在看起来像这样

```
$a = $result->admin($username,$password); 
```

它现在正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:36:38.813

就像 GBD 所说的，你必须从 mysql 查询返回结果集。此外，您必须使用脚本中的结果来处理来自登录页面的提交。

```
$result = admin($username,$password)

// Mysql_num_row is counting table row
$count = mysql_num_rows($result) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:34:20.487

您的管理函数应返回数据结果集：

```
function admin($username,$password)
{
  $result = mysql_query("SELECT * FROM admin WHERE admin_username= '$username' and admin_password= '$password' ");
  return $result;
} 
```

通过这样调用它：

```
$resultset = admin($username, $password); 
```

然后，您可以将此结果集（不是 sql）传递给 mysql_num_rows：

```
$count = mysql_num_rows($resultset); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T08:30:36.250

您应该在函数中返回结果集

```
function admin($username,$password)
{
    $result=mysql_query("SELECT * FROM admin WHERE admin_username= '$username' and admin_password= '$password' ");

   return $result; // return result set back
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T08:50:37.070

正如我的前辈所说，您需要从 admin 函数中返回值。

此外，您为什么将数据库表称为“管理员”？您是否计划拥有多个管理员？您不应该为不同类型的用户创建单独的表。您可以创建一个表“用户”，其中包含“类型”列，您可以在其中指定他是管理员还是普通用户，并根据此值设置他的权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T08:37:31.867

在 login.php 你使用

```
//THIS IS THE PART WHERE I CALL THE SQL STATEMENT FROM A SEPARATE PHP FILE
 echo $sql->admin($username,$password); 
```

参数发送正确，但函数应该返回 SQL 的结果。

您在 sql.php 和 login.php 中使用了 echo

添加返回语句

```
function admin($username,$password)
{
$sql=mysql_query("SELECT * FROM admin WHERE admin_username= '$username' and admin_password= '$password' ");
return $sql;
} 
```

在 sql.php 中

```
$result=$sql->admin($username,$password); 
```

然后使用变量 $result 因为 $sql 已经用于 CLASS

这应该有效。

# c# - 枚举上的描述属性给出错误

> ID：13173444
> 
> 赞同：3
> 
> 时间：2012-11-01T08:28:21.003
> 
> 标签：c#, .net

我从描述属性中收到以下错误，如下所示：

> 属性“描述”在此声明类型上无效。它仅对“方法”声明有效。

```
public enum TestEnum
{
    [Description("Property 1")]
    Property1,
} 
```

我以前从未遇到过这个错误，谷歌并没有透露太多信息。我想这是一个参考问题，但我不确定。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-01T08:33:37.893

`DescriptionAttribute`几乎可以应用于任何类型的成员，包括枚举值。你确定你用对了`[Description]`吗？确保引用它来自的程序集：

```
using System.ComponentModel; 
```

而且，如果您的范围内碰巧有两个不同的属性称为“描述”，请在其前面加上命名空间以消除歧义，即

```
enum MyEnum {
    [System.ComponentModel.Description("Blah")]
    MyValue
} 
```

# sql - sqlite 的聚合函数

> ID：13173445
> 
> 赞同：3
> 
> 时间：2012-11-01T08:28:26.037
> 
> 标签：sql, sqlite, group-by, aggregate-functions

执行以下脚本以创建测试表。

```
create table if not exists t1 (id1 int,id2 int); 
```

现在，表已创建，它是空表。

执行以下脚本，

```
select max(id1), max(id2) from t1 
```

它将返回结果下方（一行）。

```
max(id1)      max(id2)
-----------   --------
<null>        <null> 
```

执行以下脚本，

```
select max(id1), max(id2) from t1 group by id1,id2 
```

它将返回低于结果（无结果）。

```
max(id1)      max(id2)
-----------   -------- 
```

有人解释原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:58:48.570

[文档](http://www.sqlite.org/lang_aggfunc.html#minggunc)说：

> `max()`聚合函数返回组中所有值的最大值。[...]当且仅当组中没有非值时，聚合才`max()`返回。`NULL``NULL`

在您的第一个查询中，有一个组没有任何记录。

在您的第二个查询中，没有组。

# animation - Three.js 中的 Maya 动画

> ID：13173455
> 
> 赞同：0
> 
> 时间：2012-11-01T08:29:00.130
> 
> 标签：animation, maya, collada

我正在尝试让我的 Maya 动画步行循环进入`three.js`. 我已将带有模型的动画导出为`.dae`格式，在示例中更改了我的模型的路径。我的模型正在加载，但它没有做任何动画。可能是什么问题呢？我的主要目标是创建一个角色，`WASD`在播放他的步行周期时会一起行走。

有什么建议我应该从哪里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T21:05:28.897

转换为 DAE 格式然后再转换为 JS 会出现很多问题，而且它很少适用于动画。THREE.js 带有 Maya 导出器，但它仅适用于静态模型。

我创建了一个更新版本，它还支持导出装配和动画模型。它不需要任何中间步骤：它只是直接输出到 .JS 文件。我们有一个将更新的导出器与三个主干集成的拉取请求，但如果您想立即获得新的和改进的导出器，您可以从这个存储库获取它：[https ://github.com/BlackTowerEntertainment/three.js/tree /maya_animation_exporter](https://github.com/BlackTowerEntertainment/three.js/tree/maya_animation_exporter)。导出器文件位于 utils/exporters/maya 中。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T05:20:51.410

如果您使用 collada loader，动画应该可以正常工作。我已经使用 collada 加载器使用 three.js 为我的一个模型设置动画，它的工作原理就像魅力一样。

[一个更好的例子](https://stackoverflow.com/questions/12098897/animating-a-carpet-rolling-out-with-three-js-any-ideas)来提示如何使它工作是 webgl_loader_collada_keyframe.html 。

# c#-4.0 - FME SnappingFactory 的“距离”参数

> ID：13173460
> 
> 赞同：2
> 
> 时间：2012-11-01T08:29:31.463
> 
> 标签：c#-4.0, data-transfer

我正忙于开发基于的数据转换工具`FME`，我对 的**距离**参数感到困惑`SnappingFactory`，我想知道它的单位。官方手册中简单描述了距离以地面单位为单位。但是，我不知道那是什么意思。

期待有人给出明确的解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T12:28:55.730

SnappingFactory 使用与您处理的数据所在的坐标系相同的单位。例如：如果您的数据在 EPSG:4326 中，则单位是米。

# xpages - 如何在主题中设置日期/时间转换器的模式？

> ID：13173461
> 
> 赞同：1
> 
> 时间：2012-11-01T08:29:43.540
> 
> 标签：xpages

我正在尝试使用主题设置日期/时间转换器，但无法正常工作。

我尝试了以下方法，但它不起作用：

```
<control>
    <name>InputField.EditBox</name>
    <property mode="override">
        <name>converter</name>
        <complex type="xp_convertDateTime">
            <property>
                <name>pattern</name>
                <value>DD-MM</value>
            </property>
        </complex>
    </property>
</control> 
```

如果可能的话，如何为主题中的日期/时间转换器设置模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:28:53.110

我认为问题在于时机。主题设置仅在渲染响应阶段应用。

适用于复杂属性的示例是设置与浏览器相关的设置，例如 dojoAttributes。因此，这些值在 HTML 传递给浏览器时应用。

转换器在 ProcessValidation 阶段工作（我已经看到了 PhaseListeners）。因此，转换器需要在生命周期的早期出现。

如果我是对的，您将无法使用主题来应用转换器。您可能需要扩展编辑框控件并创建自己的组件。

# networking - 突然数据包停止进入以太网 PHY

> ID：13173463
> 
> 赞同：0
> 
> 时间：2012-11-01T08:30:09.017
> 
> 标签：networking, embedded, multicast, ethernet, broadcom

我有一种情况，数据包没有到达以太网 PHY。我正在使用 DMA 环形缓冲区，数据从物理线复制到环形缓冲区，然后我将其推送到上层堆栈。在 DMA 环形缓冲区中有两个计数器消费者索引和生产者索引以及两个指针读取指针和写入指针。计数器表示有多少数据包来自物理层，而消费者缓冲区用于保存已推送到上层的已消费缓冲区的索引。读写指针用于选择数据。

在我目前的情况下，我的生产者和消费者索引变得相似，这意味着没有数据包进入 DMA 环形缓冲区，而数据包不断地被泵送到连接到 PC 的设备（wireshark 日志确认数据包正在路由。）

我们正在使我们的引导加载程序独立于操作系统，所以在这里我们的实现在一次执行（引入一些计时器）中做很多事情（流管理，解析初始数据包并将其推送到上层），就像它之前的 VxWorks 实现一样，事情发生在不同的线程中，他们正在使用他们的 IP 堆栈。在进一步调试问题后，我观察到数据包由于 RX_BUFFER 溢出而丢失。我发现在硬件级别的过滤器中设置 MAC 多播地址存在一些问题，这可能是相同的原因。我的观察是第一次它工作正常。但是在软重置后，我无法再次放置过滤器。我对另外几个问题有疑问，我也在探讨同样的问题。

1> 初始化以太网驱动程序。
2> LWIP（IP栈）初始化。
3> 注册回调函数。
4> 启动以太网 PHY 驱动程序。
5> 形成DHCP连接。
6> 以太网驱动程序不断轮询，接受 DHCP 提议。
7> 加入 IGMP
8> 轮询组播数据包
9> 解析数据包并加入其他组播组
10> 再次开始轮询组播数据包。在第 4 步之后，我会随机收到 RX_BUFFER 溢出消息。最大 MTU 大小设置为 1500 字节，Buffer 大小为 2K。

有什么建议可以对问题进行分类/缩小范围吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:13:09.430

针对上述问题，我们已与 Broadcom 联系，我们修复了该问题并对其进行了测试。我想更新已经完成的修改。

*   从 PHY 层接收到数据包后，我们正在刷新 PHY RX 缓冲区。此部分已删除，因为它已经由 PHY 层管理。

*   我们还对 LWIP 堆栈的流程进行了一些小的修改。

# php - 在php中提取值

> ID：13173466
> 
> 赞同：0
> 
> 时间：2012-11-01T08:30:17.800
> 
> 标签：php, string

我有一个像“firstname lastname(email)”这样的字符串，我想从 php 中的这个字符串中提取“email”。我该怎么办？任何解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:41:01.877

使用正则表达式和[`preg_match()`](http://php.net/manual/en/function.preg-match.php)？

例如匹配括号中的任何内容：

```
preg_match ('/\((.+)\)/', $subject, $matches); 
```

例如或解析电子邮件：

```
preg_match ('/^([\w\.-]{1,64}@[\w\.-]{1,252}\.\w{2,4})$/', $subject, $matches); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:45:08.180

使用这个函数[preg_match()](http://php.net/manual/en/function.preg-match.php)

```
preg_match_all("/[\._a-zA-Z0-9-]+@[\._a-zA-Z0-9-]+/i", $string, $email); 
```

变量`$email[0]`保存从变量中提取的电子邮件`$string`。如果您有许多此类电子邮件，则数组变量的索引会增加`$email`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T08:33:02.650

在哪里

```
$str = "firstname lastname(email)"; 
```

尝试

```
$email = substr($str, stripos($str,"(")); // still has closing ) 
$email = substr($email, 0,strlen($email)-1); // removes ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T08:50:54.020

试试代码

```
 $str = "firstname lastname(email)"; //Given string 
 $begin =  strpos($str , "(") + 1;    //string position of first letter of email
 $length =  strpos($str , ")") - $begin; // Total length of email

 echo substr($str , $begin  , $length );  // using substr php function 
```

谢谢

# migration - j升级在“检查和清洁”处停止

> ID：13173468
> 
> 赞同：5
> 
> 时间：2012-11-01T08:30:30.707
> 
> 标签：migration, upgrade, joomla1.5, joomla2.5

我想从 Joomla 1.5.26 升级到 2.5 并且 jUpgrade 有问题。

j升级在“检查和清理”处停止，见截图。没有错误信息。

![j升级](../Images/ce1e4b4ec56a086571d11f6371bbac62.png)

卷曲已启用。

root tmp 目录是可写的。

Mootools 升级已启用。

在启用 JavaScript 的 Firefox 和 Chrome 中测试。

帮助>>系统信息>>目录权限中不可写的文件夹：

成分/

模块/

插件/

插件/内容/

插件/编辑器/

插件/编辑器-xtd/

插件/搜索/

插件/系统/

插件/用户/

插件/xmlrpc/

模板/

日志目录 ($log_path) /home/agslosite/public_html/agslosite.se/logs/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:47:35.220

尝试转到 jUpgrade 设置并启用两个“调试”选项。

我必须向 public_html 添加写入权限，并将写入权限（即 apache）添加到整个站点。我还手动创建了 (joomlaroot)/jupgrade 文件夹并为其设置了适当的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:59:46.137

我在几个使用 jUpgrade 的 Joomla 1.5 站点上遇到过这种情况。手动创建 jupgrade 文件夹并将其更改为 777 已修复此“检查和清理”每次挂起的问题。

# php - PHP 是否具有从 mp4 文件中读取元数据的集成功能？

> ID：13173471
> 
> 赞同：0
> 
> 时间：2012-11-01T08:30:36.040
> 
> 标签：php, mp4

我想知道 PHP 是否具有从 mp4 视频-音频文件中读取元数据的功能。我找到了一些执行此操作的外部类，但首先使用它们我想知道是否有必要或 PHP 已经有一些方法可以做到这一点。

我发现的类是**php-mp4info**和**getID3()**，哪个更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:07:50.703

I've used [http://getid3.sourceforge.net/](http://getid3.sourceforge.net/) before for something similar, worked pretty well as far as I remember.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:56:47.587

我用过的最好的工具是：[https](https://code.google.com/p/php-reader/) ://code.google.com/p/php-reader/看看……也支持其他形式的媒体。

**编辑：** PHP-Reader 似乎不再维护（项目自 2012 年以来没有更新......）。你现在应该使用`getID3()`。

# java - java错误代码。请签入（java）

> ID：13173472
> 
> 赞同：0
> 
> 时间：2012-11-01T08:30:43.273
> 
> 标签：java, syntax-error

请帮助检查代码。只有我初学者可以编写更正的代码。

```
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.List;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class servlet extends HttpServlet {
    private static final long serialVersionUID = 1L;
    public static List<String> getFileNames(File directory, String extension) {
        List<String> list = new ArrayList<String>();
        File[] total = directory.listFiles();
        for (File file : total) {
            if (file.getName().endsWith(extension)) {
                list.add(file.getName());
            }
            if (file.isDirectory()) {
                List<String> tempList = getFileNames(file, extension);
                list.addAll(tempList);          
            }
        }
        return list;
    }
    @SuppressWarnings("resource")
    protected void doPost(HttpServletRequest request, HttpServletResponse response) 
            throws ServletException, IOException { 
        request.setCharacterEncoding("utf8");
        String myName = request.getParameter("text");
        List<String> files = getFileNames(new File("C:\\Users\\vany\\Desktop\\test"), "txt");
        for (String string : files) {
            if (myName.equals(string)) {
                try {
                    File file = new File("C:\\Users\\vany\\Desktop\\test\\" + string);
                    FileReader reader = new FileReader(file);
                    int b;
                    PrintWriter writer = response.getWriter();
                    writer.print("<html>");
                    writer.print("<head>");
                    writer.print("<title>HelloWorld</title>");
                    writer.print("<body>");
                    writer.write("<div>");
                    while((b = reader.read()) != -1) {
                        writer.write((char) b);
                    }
                    writer.write("</div>");
                    writer.print("</body>");
                    writer.print("</html>");
                } 
                catch (Exception ex) {
                    System.exit(0);
                }
            }
        }
    }
} 
```

错误可能在这里：

```
catch (Exception ex) {
    System.exit(0);
} 
```

和这里：

```
FileReader reader = new FileReader(file); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:44:45.083

不应在 servlet 中使用 System.exit(0)。

我建议你先阅读这个

[关于 StackOverflow 中的 servlet](https://stackoverflow.com/questions/4005873/using-jsp-to-download-a-file)

然后这里是BalusC的文件下载示例

[提供您的文件](http://balusc.blogspot.in/2007/07/fileservlet.html)

一旦你理解了这些概念，你就可以使用 servlet。一切顺利。

# mono - Mono Embed：用于同步托管和本机的互斥锁

> ID：13173473
> 
> 赞同：2
> 
> 时间：2012-11-01T08:30:57.990
> 
> 标签：mono, embed, native, mutex

有一个加载单声道程序集的本机 c++ 应用程序 (linux)。如何在同一应用程序的托管部分和本机部分之间共享互斥锁（或他的类似物）？

像这样的东西：

# 原生部分：

```
native_lock_mutex(&db_mutex);
// do something with db
native_unlock_mutex(&db_mutex); 
```

# 单声道部分：

```
managed_lock_mutex(db_mutex);
// do something with db
managed_unlock_mutex(db_mutex); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:18:05.250

您必须将本机互斥锁公开给托管代码，如下所示：

C代码：

```
pthread_mutex_t* managed_get_mutex ()
{
    return &db_mutex;
}

void managed_lock_mutex (pthread_mutex_t *mutex)
{
    pthread_mutex_lock (mutex):
}

void managed_unlock_mutex (pthread_mutex_t *mutex)
{
    phtread_mutex_unlock (mutex);
} 
```

C#代码：

```
class NativMutex {
    [DllImport ("nativeLibrary")]
    public static export IntPtr get_managed_mutex ();

    [DllImport ("nativeLibrary")]
    public static export void managed_lock_mutex (IntPtr mutex);

    [DllImport ("nativeLibrary")]
    public static export void managed_unlock_mutex (IntPtr mutex);
} 
```

# android - 电话间隙 $.ajax()

> ID：13173475
> 
> 赞同：0
> 
> 时间：2012-11-01T08:31:18.397
> 
> 标签：android, sql, jquery, cordova

有人知道如何将来自服务器的 jsonp 数据存储在 phonegap 本地数据库中吗？

下面的代码可以帮助将 phonegap android 应用程序连接到服务器，但是如何将数据存储在 phonegap 本地数据库中？

```
$.ajax({
    url: 'http://172.18.75.156/deals.php',
    dataType: 'jsonp',
    jsonp: 'jsoncallback',
    timeout: 5000,
    success: function(data, status){
        $.each(data, function(i,item){ 
            output.text('successful');
        });
    },
    error: function(){
       output.text('There was an error loading the data.');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:30:38.633

```
 db = window.openDatabase("SQL", 3, "PhoneGap Demo", 200000);

db.transaction(ajex_call, errorCB);

    function ajex_call(tx) {
$.ajax({
url: 'http://172.18.75.156/deals.php',
dataType: 'jsonp',
jsonp: 'jsoncallback',
timeout: 5000,
success: function(data, status){
    $.each(data, function(i,item){ 
    //item.obj
        tx.executeSql("INSERT OR REPLACE INTO table-name(table-fields) values(?,?,..)",               [array-data])
    });
       },
error: function(){
   output.text('There was an error loading the data.');
}
});
} 
```

有关本地数据库的更多信息[http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html](http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-27T17:53:35.880

像这样尝试，希望这会奏效：

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    db = window.openDatabase("SQL", 3, "PhoneGap Demo", 200000);
    db.transaction(ajex_call, success, errorCB);
}
function ajex_call(tx) {
    tx.executeSql('DROP TABLE IF EXISTS table_name');
    tx.executeSql('CREATE TABLE IF NOT EXISTS table_name (fields_required_for_table)');
    $.ajax({ url: 'http://172.18.75.156/deals.php', dataType: 'jsonp', jsonp: 'jsoncallback', timeout: 5000, success: function(data, status){
        $.each(data, function(i,item){
            tx.executeSql("INSERT OR REPLACE INTO table-name(table-fields) values(?,?,..)")
        });
    }, error: function(){
        output.text('There was an error loading the data.');
    } 
}); 
}

function success(){
    console.log('Success');
}
function error(){
    console.log('error');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T02:38:50.880

查看 HTML5 的本地存储。

PhoneGap 的文档在[这里](http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#localStorage)：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-09T23:22:19.370

使用数组存储来自 JSON 导入的数据。然后将数组保存到本地存储。

```
$.ajax({
url: 'http://172.18.75.156/deals.php',
dataType: 'jsonp',
jsonp: 'jsoncallback',
timeout: 5000,
success: function(data, status){
    var ArrayName = []; 
    $.each(data, function(i,item){ 
        output.text('successful');
        ArrayName[i] = item;
    });
    localStorage.setItem("jsontable",ArrayName);
},
error: function(){
   output.text('There was an error loading the data.');
}
}); 
```

然后你可以使用调用该数组`localStorage.GetItem("jsontable");`

然后用户将能够使用导入的 json 表数组而无需重新导入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-25T04:08:28.017

我建议您将对象转换为字符串，然后将其保存在 localStorage 中。

要检索数据，请从 localStorage 获取字符串并将其转换为 JSON 对象

[HTML5 本地存储](https://www.w3schools.com/html/html5_webstorage.asp)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-05T10:02:55.823

很久以前我为这种东西做了一个基本的数据库控制器类，设法找到它，希望它能给你一个想法。

一旦你把`DataBaseCtrl`代码放在某个地方，你就可以像这样使用它：

```
var myDatabase = DataBaseCtrl();
myDatabase.initWithConfig("DBShortName", "1.0", "MyDbName", 10000);
myDataBase.executeSql("SQL commands here..."); 
```

在您的情况下，取决于您的数据如何设置您的表格

```
myDataBase.executeSql("CREATE TABLE IF NOT EXISTS LOGS (id unique, log)");
myDataBase.executeSql("INSERT INTO LOGS (id, log) VALUES (1, 'foobar')");
myDataBase.executeSql("INSERT INTO LOGS (id, log) VALUES (2, 'logmsg')"); 
```

然后也许使用循环来获取所有数据：

```
for (i = 0; i < data.length; i += 1) {
    myDataBase.executeSql("INSERT INTO LOGS (id, log) VALUES ("+i+", "+data[i]+")");
} 
```

这是其余的方法

```
 myDataBase.init(); // uses set/default config
    myDataBase.initWithConfig(shortName, version, displayName, maxSize);
    myDataBase.executeSql(SqlCmmndString);
    myDataBase.executeSqlWithCallBack(SqlCmmndString,SuccessCallbackfunction); // how you get data out
    myDataBase.setInitConfig(shortName, version, displayName, maxSize); 
```

这是类代码：

```
 var DataBaseCtrl = function () {

    if (!(this instanceof DataBaseCtrl)) {
        return new DataBaseCtrl();
    }

    // Transaction error callback
    function errorCB(tx, err) {
        console.log("Error processing SQL: " + tx + tx.code + tx.message);
    }

    function successCB(tx, err) {
    }

    return {
        _DB: null,
        _config: {
            // Default configuration
            _shortName: "DefaultDataBaseName",
            _version: "1.0",
            _displayName: "DisplayName",
            _maxSize: 65535 // in MBs
        },
        /* Initializer */
        init: function () {
            if (!window.openDatabase) {
                alert("Databases are not supported on this device. \n\n ");
                return false;
            }

            var cfg = {
                shrt: this._config._shortName,
                vers: this._config._version,
                disp: this._config._displayName,
                mxSz: this._config._maxSize
            };
            // Initialize the DataBase.
            this._DB = window.openDatabase(cfg.shrt, cfg.vers, cfg.disp, cfg.mxSz);
        },
        /* Initialize with custom config */
        initWithConfig: function (shortName, version, displayName, maxSize) {
            this.setInitConfig(shortName, version, displayName, maxSize);
            this.init();
        },
        /* Execute SQL command */
        executeSql: function (SqlCmmnd) {
            this._DB.transaction(function (tx) {
                console.log("Executing SQL... " + SqlCmmnd.substring(0, 100));
                tx.executeSql(SqlCmmnd);
            }, errorCB, successCB);
        },
        /* Execute SQL with success callback */
        executeSqlWithCallBack: function (SqlCmmnd, SuccessCallback) {
            this._DB.transaction(function (tx) {
                console.log("Executing SQL... " + SqlCmmnd.substring(0, 100));
                tx.executeSql(SqlCmmnd, [], SuccessCallback);
            }, errorCB, successCB);
        },
        /* Sets init config (call before initializing) */
        setInitConfig: function (shortName, version, displayName, maxSize) {
            console.log("Setting DB Config: " + displayName);
            this._config = {
                _shortName: shortName,
                _version: version,
                _displayName: displayName,
                _maxSize: maxSize
            };
        }
    };
}; 
```

# android - 是否只有在输入法处于活动状态时才能显示某些组件？

> ID：13173476
> 
> 赞同：0
> 
> 时间：2012-11-01T08:31:32.437
> 
> 标签：android, android-input-method

在一个 android 应用程序中，我只想在输入法处于活动状态时显示一些组件，例如更改字体大小和颜色。

有可能吗？怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:42:36.507

在edittext中运行输入法时尝试使用TextWatcher接口。

[参考这个](http://developer.android.com/reference/android/text/TextWatcher.html)

# gdb - GDB：以编程方式删除观察点

> ID：13173479
> 
> 赞同：3
> 
> 时间：2012-11-01T08:31:49.807
> 
> 标签：gdb, watchpoint

是否可以在不知道观察点编号的情况下删除观察点？

我正在使用附加到断点的命令在内存位置设置观察点。我想在另一个断点清除观察点，但我不知道如何在没有观察点编号的情况下清除观察点。是否有可以通过内存位置删除观察点的命令？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T09:52:34.157

最简单的方法是使用 $bpnum 便利变量，您可能希望将其存储在另一个便利变量中，以便以后创建断点/观察点时它不会改变。

```
(gdb) watch y
(gdb) set $foo_bp=$bpnum
Hardware watchpoint 2: y
(gdb) p $foo_bp
$1 = 2
(gdb) delete $foo_bp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:20:32.523

保存观察点编号然后使用该编号删除观察点怎么样？

这是一个例子。我有一个 C++ 程序。当第 5 行的断点被命中时，我设置了三个观察点。对于观察点 #2，我保存了一个 gdb 命令文件，以便稍后将其删除。当 9 上的断点被命中时，我只执行这个 gdb 命令文件：

这是 main.cpp：

```
#include <stdio.h>
int main()
{
  int v3=2, v2=1, v1 =0 ;
  printf("Set a watchpoint\n");

  v1 = 1;
  v1 = 2;
  printf("Clear the watchpoint\n");

  v1 = 3;
  v1 = 4;

  return 0;
} 
```

这是.gdbinit：

```
file ./a.out
b 5
commands
watch v2
watch v1
set pagination off
shell rm -f all_watchpoints
set logging file all_watchpoints
set logging on
info watchpoints
set logging off
shell rm -f delete_my_watchpoint
shell tail -n 1 all_watchpoints | awk ' {print "delete "$1 }' > delete_my_watchpoint
watch v3
echo Done\n
c
end
b 9
commands
source delete_my_watchpoint
info watchpoints
end
r 
```

这只是 .gdbinit 的一个略微更改的版本，它不是使用删除观察点的命令保存文件，而是保存观察点编号：

```
file ./a.out
b 5
commands
watch v2
watch v1
set pagination off
shell rm -f all_watchpoints
set logging file all_watchpoints
set logging on
info watchpoints
set logging off
shell rm -f delete_my_watchpoint
shell tail -n 1 all_watchpoints | awk ' {print "set $watchpoint_to_delete_later="$1 }' > save_my_watchpoint_number
source save_my_watchpoint_number
shell rm -f save_my_watchpoint_number
shell rm -f all_watchpoints
watch v3
echo Done\n
c
end
b 9
commands
delete $watchpoint_to_delete_later
info watchpoints
end
r 
```

如果您以这种方式使用地址设置观察点：

```
(gdb) watch *((int*)0x22ff44)
Hardware watchpoint 3: *((int*)0x22ff44)
(gdb) info watchpoints
Num     Type           Disp Enb Address    What
3       hw watchpoint  keep y              *((int*)0x22ff44) 
```

您也可以稍后找到此地址，因为它显示在`info watchpoints`

```
(gdb) set logging file all_watchpoints
(gdb) set logging on
Copying output to all_watchpoints.
(gdb) info watchpoints
Num     Type           Disp Enb Address    What
3       hw watchpoint  keep y              *((int*)0x22ff44)
4       hw watchpoint  keep y              *((int*)0x22ff48)
5       hw watchpoint  keep y              *((int*)0x22ff4B)
(gdb) set logging of
Done logging to all_watchpoints.
(gdb) shell grep 0x22ff48 all_watchpoints
4       hw watchpoint  keep y              *((int*)0x22ff48)
(gdb) shell grep 0x22ff48 all_watchpoints | awk ' {print $1}'
4
(gdb) shell grep 0x22ff48 all_watchpoints | awk ' {print "delete "$1}' > delete_watchpoint
(gdb) source delete_watchpoint
(gdb) info watchpoints
Num     Type           Disp Enb Address    What
3       hw watchpoint  keep y              *((int*)0x22ff44)
5       hw watchpoint  keep y              *((int*)0x22ff4B) 
```

# asp.net-mvc - mvc kendo 网格标题文本

> ID：13173480
> 
> 赞同：11
> 
> 时间：2012-11-01T08:31:53.490
> 
> 标签：asp.net-mvc, kendo-ui

在浏览了整个网络之后，我找不到如何将标题文本设置为剑道网格。例如，我希望它代替 FName，而不是“名字”。也许你们中的一个人知道？

```
@(Html.Kendo().Grid(Model)
    .Name("Grid")
    .Columns(columns =>
    {
        columns.Bound(p => p.FName).Groupable(false);
        columns.Bound(p => p.ShemIvri) ;
        columns.Bound(p => p.ShemLoazit);        
    })
    .Pageable()
    .Sortable()
    .Scrollable() 
    .Filterable()    
    .DataSource(dataSource => dataSource        
        .Ajax()
        .ServerOperation(false)        
     )
) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-01T09:25:13.410

您正在寻找`Title`方法[，另请参阅文档](http://docs.kendoui.com/api/wrappers/aspnet-mvc/Kendo.Mvc.UI/GridColumnBase)

> **Title**
> 获取或设置列的标题。

在您的情况下，代码应如下所示：

```
.Columns(columns =>
    {
        columns.Bound(p => p.FName).Title("First name").Groupable(false);
        columns.Bound(p => p.ShemIvri) ;
        columns.Bound(p => p.ShemLoazit);        
    }) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T03:14:39.090

或者您可以将 [DisplayName("First Name")] 放入您的模型中，例如：

```
[DisplayName("First Name")]
        [StringLength(100)]

        public string FName{ get; set; } 
```

# javascript - IE JavaScript 错误：document.evaluate 非法 # 字符

> ID：13173481
> 
> 赞同：2
> 
> 时间：2012-11-01T08:31:55.443
> 
> 标签：javascript, xpath, bookmarklet, document.evaluate

此脚本仅支持 IE

我有这个：

```
var result = document.evaluate(xpath, document, null, XPathResult.STRING_TYPE, null); 
```

使用已知的 xpath；

xpath是：

```
id("productTitle") 
```

为什么我会收到此错误消息：

```
Error ! This name may not contain the '#' character:

-->#<--comment 
```

一个工作示例，简单的一个：http: [//jsfiddle.net/gWpcU/6/](http://jsfiddle.net/gWpcU/6/)

崩溃的例子：http: [//jsfiddle.net/YkwTM/](http://jsfiddle.net/YkwTM/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T13:08:59.790

您在示例文档中收到错误消息的原因是因为 xPath 正在尝试重新读取文档以在其上做自己的事情，并且每当它看到 a`"<!"`时，脚本解析器都会给出错误。浏览并删除所有情况`"<!"`（即，`<!DOCTYPE html>`和所有`<!--`评论），使页面正常工作。我会把它贴在这里，但答案太长了：所以你可以自己做。

相反，将 粘贴`<!DOCTYPE html>`到您的工作示例中也会导致该错误。

# junit4 - 我可以使用哪种断言方法来检查 1000 个元素的数组是否包含特定元素？

> ID：13173485
> 
> 赞同：0
> 
> 时间：2012-11-01T08:32:01.683
> 
> 标签：junit4

我有一个包含 1000 个元素的整数数组。我必须使用断言方法检查此数组是否包含特定元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:03:26.207

您必须搜索/遍历数组并设置一个布尔值，然后您可以使用 assertTrue() 进行测试。

或者，如果它是 ArrayList()，而不是原始数组，您可以使用：

```
assertTrue(arrayList.contains(XYZ)); 
```

# ember.js - ember.js 如何为 Ember.Select 设置选项的标题

> ID：13173486
> 
> 赞同：1
> 
> 时间：2012-11-01T08:32:02.587
> 
> 标签：ember.js

我是 Ember 的初学者，我尝试在我的应用程序中使用 Ember.js(1.0.0.pre)。

我正在尝试为 Ember.Select 设置标题以`options`在鼠标悬停时显示提示。但是，我在 API 中找不到有关该选项标题的任何信息。

我必须自己编写一个函数来填充`"title"`属性吗？有没有办法为选项`"optionLabelPath"`绑定`"title"`属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:26:59.653

`reopen`为了实现这一点，我们需要`Ember.SelectOption`

[这](http://jsfiddle.net/92eCW/2/)是以下示例的小提琴

```
MyApp = Ember.Application.create();

Ember.SelectOption.reopen({
  attributeBindings: ['title'],
  title: function() {
    var titlePath = this.getPath('parentView.optionTitlePath');
    return this.getPath(titlePath);
  }.property('parentView.optionTitlePath')
});

MyApp.selectArray = [{
    label: "A",
    id: "1",
    title: "for Apple"
  },
  {
    label: "B",
    id: "2",
    title: "for Ball"
  }]; 
```

**车把**

```
<script type="text/x-handlebars" >
  {{view Ember.Select
     contentBinding="MyApp.selectArray"
     optionLabelPath="content.label"
     optionValuePath="content.id"
     optionClassPath="content.title"
  }}
</script>​ 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:03:46.353

这是我能想到的最简单的方法：http: [//jsfiddle.net/aK8JH/1/](http://jsfiddle.net/aK8JH/1/)

**模板：**

```
{{view MyApp.Select contentBinding="content"}} 
```

**看法：**

```
MyApp.Select = Ember.Select.extend({
    attributeBindings: ['title'],
    title: 'myTitle'
}); 
```

阅读：[http ://emberjs.com/documentation/#toc_attribute-bindings-on-a-view](http://emberjs.com/documentation/#toc_attribute-bindings-on-a-view)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-08T09:54:13.833

以下是我在 Ember 中观察源代码后得到的结果：

```
Ember.SelectOption.reopen({
    attributeBindings: ['title'],

    init: function() {
        this.titlePathDidChange();
        this._super();
    },

    titlePathDidChange: function() {
        var titlePath = this.get('parentView.optionTitlePath');
        if (!titlePath) { return; }

        Ember.defineProperty(this, 'title', Ember.computed(function() {
            return this.get(titlePath);
        }).property(titlePath));
    }.observes('parentView.optionTitlePath')
}); 
```

# ssrs-2008 - 使用报表生成器中的查找将来自不同数据集的两个值相加

> ID：13173488
> 
> 赞同：1
> 
> 时间：2012-11-01T08:32:12.083
> 
> 标签：ssrs-2008, reporting, reporting-services, reportbuilder3.0

我有一份报告应该按货币从 2 个数据集中读取值：

```
Dataset1: Production Total
Dataset2: Net Total 
```

我试过使用：

```
Lookup(Fields!Currency_Type.Value, 
       Fields!Currency_Type1.Value,
       Fields!Gross_Premium_Amount.Value, 
       "DataSet2") 
```

这仅返回数据集 2 中的第一笔金额。

我也尝试过 Lookupset 函数，但它没有对检索到的值求和。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:09:46.443

感谢杰米的回复。这就是我所做的并且效果很好：从 Report Properties--> Code ，编写以下函数：

```
Function SumLookup(ByVal items As Object()) As Decimal
If items Is Nothing Then
Return Nothing
End If
Dim suma As Decimal = New Decimal()
Dim ct as Integer = New Integer()
suma = 0
ct = 0
For Each item As Object In items
suma += Convert.ToDecimal(item)
Next
If (ct = 0) Then return 0 else return suma 
End Function 
```

然后就可以调用函数了：

```
code.SumLookup(LookupSet(Fields!Currency_Type.Value, Fields!Currency_Type1.Value,Fields!Gross_Premium_Amount.Value, "DataSet2")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:38:54.830

是的，Lookup 只会返回第一个匹配的值。想到三个选项：

1.  更改您的查询，以便您只需要获取一个值：使用 a `GROUP BY`and`SUM(...)`将查询中的两行组合起来。如果您在其他地方使用此查询，请复制并更改它。
2.  行有什么不同吗？比如一个是去年的，一个是今年的？如果是这样，请创建一个人工查找键并分别查找这两个值：

    ```
    =Lookup(Fields!Currency_Type.Value & ","
        & YEAR(DATEADD(DateInterval.Year,-1,today())), 
       Fields!Currency_Type1.Value & ","
        & Fields!Year.Value,
       Fields!Gross_Premium_Amount.Value, 
       "DataSet2")
    +
    Lookup(Fields!Currency_Type.Value & ","
       & YEAR(today()), 
      Fields!Currency_Type1.Value & ","
       & Fields!Year.Value,
      Fields!Gross_Premium_Amount.Value, 
      "DataSet2") 
    ```

3.  使用上述[`LookupSet`功能](http://msdn.microsoft.com/en-us/library/ee240819.aspx)。有了这个，您将获得一组值，然后需要将它们加在一起。最简单的方法是在报告中嵌入代码。将此函数添加到报告的代码中：

    ```
    Function AddList(ByVal items As Object()) As Double
       If items Is Nothing Then
         Return 0
       End If
       Dim Total as Double
       Total = 0
       For Each item As Object In items
          Total = Total + CDbl(item)
       Next

       Return Total
    End Function 
    ```

    现在调用它：

    ```
    =Code.AddList(LookupSet(Fields!Currency_Type.Value, 
       Fields!Currency_Type1.Value,
       Fields!Gross_Premium_Amount.Value, 
       "DataSet2")) 
    ```

（注意：此代码未经测试。我只是在 Stack Overflow 编辑窗口中编写它，我不是 VB 的粉丝。但它应该让您很好地了解该做什么。）

# windows - 在 Windows 8 上安装 AppFabric

> ID：13173489
> 
> 赞同：1
> 
> 时间：2012-11-01T08:32:13.840
> 
> 标签：windows, windows-8, appfabric

我正在尝试在 Windows8 上安装 AppFabric 1.1。它设置要求.net framework 3.5。

Windows 8 附带 .net 框架 4.5。为什么它要求 .net framework 3.5 ？

为了安装 AppFabric，我应该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-25T21:50:42.357

现在您可以使用 .net framework 4.5 安装它。.给你： [http ://www.microsoft.com/en-us/download/details.aspx?id=27115](http://www.microsoft.com/en-us/download/details.aspx?id=27115)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T21:50:57.103

从提升的命令提示符运行以下命令：

```
DISM /Online /Enable-Feature /FeatureName:NetFx3 /All 
```

有关详细信息，请参阅此链接：http: [//msdn.microsoft.com/en-us/library/hh506443.aspx](http://msdn.microsoft.com/en-us/library/hh506443.aspx)

# java - 查询产生错误

> ID：13173491
> 
> 赞同：0
> 
> 时间：2012-11-01T08:32:29.803
> 
> 标签：java, android

我正在执行请求，它会写入错误 ID - INTEGER PRIMARY KEY 帮助

```
cur = db.query("Sales_region_table t1, region_table t2  join region_table t2 on t1.id_region = t2.id ", null, " id_region = " + id_region + " and id_category = " + id_category + " and id_product = " + id_product + " ", null, null, null, null); 
```

11-01 08:28:10.600: I/Database(1251): sqlite 返回：错误代码 = 1，msg = 不明确的列名：t2.id

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T08:35:01.687

问题是：

```
region_table t2  join region_table t2 
```

您正在选择`region_table t2`并加入同一个表（具有相同的别名）。

这会导致 RDBMS 上的歧义。

# c# - 获取指向 c# 的 c++ 指针

> ID：13173492
> 
> 赞同：0
> 
> 时间：2012-11-01T08:32:30.873
> 
> 标签：c#, c++, extern, intptr

我有一个 c++ dll，它有一些外部函数。它看起来像这样

```
//C++ Code
void GetData(byte * pData)
{
  byte a[] = {3,2,1};
  pData = a;
} 
```

我已经在 C# 端使用此代码来获取数据：

```
//C# Code
[DllImport(UnmanagedDLLAddress)]
public static extern void GetData(ref IntPtr pData);

//and use it like
IntPtr pointer = IntPtr.Zero;
GetData(ref pointer);
byte[] data = new byte[3] // <===== think we know size
Marshal.Copy(pointer,data ,0,3); 
```

但总是“指针”为零，所以 Marshal.Copy 在我做错的地方抛出空异常？泰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T08:55:00.797

首先，您的 C++ 代码将数组放入堆栈。您需要以其他方式分配它，文档从这里开始：http: [//msdn.microsoft.com/en-us/library/aa366533%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa366533%28VS.85%29.aspx)

其次，pData 是一个“正常”值参数，实际上是一个局部变量。您分配给它，然后当函数返回时它会被遗忘。如果您希望它是“输出参数”返回一个值，您需要它是对指针的引用或指向指针的指针。如果要将数组内容实际复制到 pData 指向的缓冲区，则需要使用`memcpy`函数 from `#include <cstring>`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T10:00:59.447

实际上，就像 hyde 所说的那样，使用 pData 作为“out”参数。因为它显然是引用类型而不是值类型，所以被调用的方法应该注意内存分配。我仅将“ref”用于值类型，例如整数 - 例如从非托管方法获取数组的长度。

这种方式对我来说很好，此外，我使用“cdecl”调用约定。

```
IntPtr aNewIntArray;
uint aNewIntArrayCount = 0;

NativeMethods.getEntityFieldIntArray(out aNewIntArray, ref aNewIntArrayCount);

int[] aNewIntArrayResult = new int[aNewIntArrayCount];
Marshal.Copy(aNewIntArray, aNewIntArrayResult, 0, (int)aNewIntArrayCount); 
```

方法声明：

```
[DllImport(SettingsManager.PathToDLL, EntryPoint = "getEntityFieldIntArray", CallingConvention = CallingConvention.Cdecl)]
public static extern ErrorCode getEntityFieldIntArray(out IntPtr aNewIntArray, ref UInt32 aNewIntArrayCount); 
```

# vb.net - VB.NET 将数据表行插入 SQL 数据库

> ID：13173494
> 
> 赞同：0
> 
> 时间：2012-11-01T08:32:49.663
> 
> 标签：vb.net

我有以下代码循环遍历我的数据表（dtItem）并将每一行插入数据库。但是，我只能插入数据表的最后一行。我如何插入所有行？这是我的代码。

将 dtRow 调暗为 DataRow

```
 For Each dtRow In dtItem.Rows

                dtRow.ToString.Split("|")

                Dim xBinCode As String = dtRow(0)
                Dim xLocationCode As String = dtRow(7)
                Dim xItemNo As String = dtRow(1)
                Dim xQuantity As String = dtRow(2)
                Dim xCountNo As String = dtRow(8)

                cmd.CommandText = "INSERT INTO tblItems (BinCode, LocationCode, ItemNo, Quantity, CountNo) values('" & xBinCode & "','" & xLocationCode & "','" & xItemNo & "','" & xQuantity & "','" & xCountNo & "')"

            Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:45:06.560

如果您使用数据阅读器，则需要打开连接并使用命令

```
cmd.ExecuteNonQuery 
```

后

```
cmd.CommandText = "INSERT INTO tblItems (BinCode, LocationCode, ItemNo, Quantity, CountNo) values('" & xBinCode & "','" & xLocationCode & "','" & xItemNo & "','" & xQuantity & "','" & xCountNo & "')" 
```

陈述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:49:57.087

看起来你在这里遗漏了一些东西。

您可以在发送到服务器之前连接每行的 SQL 插入语句。

如果您想一次发送一行，请在 for 循环中配置并执行您的命令。

您还可以使用 DbDataAdapter。查看以下页面：

[http://msdn.microsoft.com/es-es/library/at8a576f(v=vs.90).aspx](http://msdn.microsoft.com/es-es/library/at8a576f(v=vs.90).aspx)

[http://msdn.microsoft.com/es-es/library/system.data.sqlclient.sqldataadapter.insertcommand(v=vs.90).aspx](http://msdn.microsoft.com/es-es/library/system.data.sqlclient.sqldataadapter.insertcommand(v=vs.90).aspx)

# mysql - mysql语法错误，但在哪里？

> ID：13173497
> 
> 赞同：2
> 
> 时间：2012-11-01T08:33:05.360
> 
> 标签：mysql, function, syntax

我正在关注一些关于 mysql 函数创建的教程，但我不断收到以下错误。

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的 '' 附近使用正确的语法：

```
 CREATE FUNCTION getstatisticscount (h VARCHAR(35),d date)
  RETURNS INT
  DETERMINISTIC
   BEGIN
    DECLARE tel INT;
    SELECT count(hash) into tel from statsitieken where hash=h and lastvisit between concat(d,' 00:00:00') and concat(d,' 23:59:59') group by hash;  
    RETURN tel;
   END; 
```

我一辈子都找不到第 5 行在哪里，但是无论我把它放在哪一行，我都会不断收到这个错误。如果我从 sql fiddle 代码中删除这个函数，一切都很好。我找不到它有什么问题......除了可能有缺陷的教程。

[http://sqlfiddle.com/#!2/70f0a](http://sqlfiddle.com/#!2/70f0a)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:35:40.767

使用分隔符

```
delimiter //
CREATE FUNCTION getstatistics(h VARCHAR(35),d date)
  RETURNS INT
  DETERMINISTIC
   BEGIN
    DECLARE tel INT;
    SELECT count(hash) INTO tel
    FROM statistics
    WHERE
      hash=h
      AND lastvisit BETWEEN concat(d,' 00:00:00') AND concat(d,' 23:59:59')
    GROUP BY hash;  
    RETURN tel;
   END
//

DELIMITER ; 
```

欲了解更多信息：[http ://dev.mysql.com/doc/refman/5.1/en/stored-programs-defining.html](http://dev.mysql.com/doc/refman/5.1/en/stored-programs-defining.html)

编辑：基本上，因为您的存储过程用分号 (;) 分隔语句，并且定义您的过程的方法也使用分号来分隔语句，所以 MySQL 很难弄清楚您的过程在哪里开始和结束。我还编辑了上面的 SQL 语句，将分隔符恢复为默认分号。

# video-streaming - 需要关于直播 IP 摄像机的推荐

> ID：13173504
> 
> 赞同：1
> 
> 时间：2012-11-01T08:33:52.913
> 
> 标签：video-streaming, red5

我有一个连接到中央服务器的 IP 摄像机网络（都带有专用 IP）。该服务器具有 Internet 访问权限和公共 IP。

我现在想通过互联网发布来自 IP 摄像机的流。我更喜欢使用 ustream、click2stream 等网站的付费服务。但问题是相机有私有 IP 地址。

我也有使用 Red5 的经验。有什么方法可以让我使用 Red5 捕获流并将其发布在上述任何网站上？

该解决方案应该能够管理 800 个摄像头和 15000 个观众，并且还需要支持 IOS 和 Android。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:34:44.250

我想如果你看一下 FFMPEG 可能会更有意义。FFMPEG 也可以本地流式传输 rtmp。使用 FFMPEG，我认为您有更多选择可以将流转码为有用的格式。

塞巴斯蒂安

# ioncube - 我未能在 Godaddy 上安装 ioncube。有什么建议吗？

> ID：13173512
> 
> 赞同：0
> 
> 时间：2012-11-01T08:34:39.707
> 
> 标签：ioncube

我收到了这条消息

```
 Site error: the file /home/content/xx/xxxxxxxx/html/admin/application/controllers/DashboardController.class.php requires the ionCube PHP Loader ioncube_loader_lin_5.3.so to be installed by the website operator. If you are the website operator please use the ionCube Loader Wizard to assist with installation." 
```

安装 ioncube 之前和之后。我认为 T 已正确完成安装。我在 PHP5.3 中使用 Godaddy

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:09:40.953

您需要在您的共享主机帐户上安装 ionCube。您可以使用向导来执行此操作。 [http://www.ioncube.com/loaders.php](http://www.ioncube.com/loaders.php)

您将需要使用 x86 而不是 x86_64 版本的 ionCube 加载器。一旦你安装了这个，你需要更新你的 php5.ini 文件。您需要在 php5.ini 文件中使用以下格式：

```
zend_extension = /var/chroot/home/content/XX/XXXXXXX/html/ioncube/ioncube_loader_lin_5.3.so 
```

“xx”和“xxxxxxx”将与您的错误中显示的相同。

进行此更改后，您需要等待一段时间让当前的 PHP 进程终止并重新启动，然后才能注册此更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:59:02.190

`ioncube_loader_lin_5.3.so`需要由服务器管理员安装。联系 GoDaddy 支持。

# linux - 使用 sed 替换双引号和空格

> ID：13173513
> 
> 赞同：3
> 
> 时间：2012-11-01T08:34:40.470
> 
> 标签：linux, unix

我在 rhel5 上并且有以下问题：我有一个函数可以用我想要的文本替换给定行中的所有内容。一切正常，直到我需要放置双引号。以下是代码：

```
ReplaceLine()
{
       txnFile="File.xml"
        if [ "$2" == "enable" ];then
                replace="<ref bean=\\"$3\\"/>"
        else
                replace="<!--<ref bean=\\"$3\\"/>-->"
        fi
        sed -i "$1s/.*/$replace/" $txnFile 
}

$1=line number
$2=enable/disable
$3=string to be put 
```

当前代码将文件中的给定行替换为：

```
<ref bean=beginEventBean/> 
```

我想要的是这个：

```
<ref bean="beginEventBean"/> 
```

注意缺少的双引号。我也在 sed 中使用了双引号，因为没有它们，变量中的空格会导致 sed 抛出错误。

请帮助我了解我在哪里走错了路。已经花了几个小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:56:09.937

没有看到源代码行，我无法测试我的解决方案。然而，下面这行绝对不是你想的那样：

```
replace="<ref bean=\\"$3\\"/>"
        ^          ^ ^
        |          | |
start quoted       | |
           backslash |
            end quoted 
```

再添加一个反斜杠，或删除一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:00:25.477

像下面这样的东西应该可以工作：

```
replace="<ref bean=\"$3\"\/>" 
```

注意只有一个反斜杠（你转义双引号）和 / 字符之前的反斜杠（你转义它以便 sed 将其用作常规字符，而不是 sed 的替换命令中使用的元字符）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T09:13:35.547

您忘记转义关闭标签的正斜杠。你放了两个很多斜线。

```
# one line solution
# sed -i "$1s/.*/<ref bean=\"$3\"\/>/" $txnFile
#                          ^   ^ ^

ReplaceLine()
{
     txnFile="File.xml"
     if [ "$2" == "enable" ];then
            replace="<ref bean=\"$3\"\/>"
     else
            replace="<!--<ref bean=\"$3\"\/>-->"
     fi
     sed -i "$1s/.*/$replace/" $txnFile 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T09:14:07.250

使用`sed -i "$1s#.*#\"$replace\"#" $txnFile`. 请注意，它使用`#`而不是`/`作为 SED 的分隔符，因为`$replace`包含`/`. 此外，@choroba 的回答是有道理的。确保您的代码完全符合您的要求，并且不会“意外”运行。

# macos - Applescript - 将窗口置于前台

> ID：13173514
> 
> 赞同：18
> 
> 时间：2012-11-01T08:34:45.120
> 
> 标签：macos, window, applescript, foreground

我有一个同时打开多个窗口的应用程序。我想把一个特定的窗口带到前台（我知道它的标题）。

目前我正在使用组合键来完成这项任务，但我想尝试一些不同的东西，因为我在使用这种方法时遇到了一些问题。

```
tell application "System Events"
    set frontmost of process "appIT" to true
    keystroke "1" using command down
    delay 0.2
end tell 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-01T12:58:28.530

这可以通过使用`"AXRaise"`操作来实现，但在某些窗口上除外（例如使用 X11 的应用程序）。

试试这个。

```
set theTitle to "some title"
tell application "System Events"
    tell process "appIT"
        set frontmost to true
        perform action "AXRaise" of (windows whose title is theTitle)
    end tell
end tell 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-08T16:21:00.800

如果您的应用程序是可编写脚本的并且允许设置窗口的索引，您可以执行以下操作（基于[如何使用 AppleScript（优雅地）使 Safari 窗口处于活动状态？](https://stackoverflow.com/questions/5682413/how-do-i-make-a-safari-window-active-using-applescript-elegantly)）

```
to raiseWindow of theApplicationName for theName
    tell the application named theApplicationName
        activate
    set theWindow to the first item of ¬
        (get the windows whose name is theName)
    if index of theWindow is not 1 then
            set index to 1
            set visible to false
            set visible to true
        end if
    end tell
end raiseWindow 
```

可见性的切换对于处理切换应用程序时发生的一些奇怪现象是必要的。如果您不切换可见性，则当您从应用程序切换回应用程序时，该窗口将不会是第一个。不幸的是，这种切换将窗口缩小到停靠栏，然后将其恢复，这是一个非常戏剧性的 UI 中断。

这是我发现的另一种处理怪异的方法：

```
to raiseWindow2 of theApplicationName for theName
    tell the application named theApplicationName
        activate
    set theWindow to the first item of ¬
        (get the windows whose name is theName)
        if the index of theWindow is not 1 then
            set the index of theWindow to 2
        tell application "System Events" to ¬
            tell application process theApplicationName to ¬
                keystroke "`" using command down
        end if
    end tell
end raiseWindow2 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T12:13:06.120

我不认为系统事件可以改变进程的前窗。当然，您可以关闭前窗口，直到您想要的窗口位于顶部。尽管您可能不想关闭窗口，但这并不是真正的解决方案。确实，尽管您可以实现此目的的唯一方法是应用程序本身是可编写苹果脚本的并允许您执行此操作。

# python - python + paramiko的奇怪内存泄漏

> ID：13173520
> 
> 赞同：8
> 
> 时间：2012-11-01T08:34:58.773
> 
> 标签：python, paramiko

我在 python 脚本中有一个（明显的）内存泄漏，我无法完全解释（常驻内存不断增长）。它从大约 6MB 的驻留开始，我让它运行了一夜，它已经超过了 200MB（我这样做是为了排除由于 gc 导致的锯齿状内存使用模式）。我把它浓缩成这个脚本：

```
import sys
import time
import paramiko

def update():
    ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    try:
        ssh.connect(hostname='localhost')
    finally:
        ssh.close()

def main():
    while(True):
        update()
        time.sleep(0.001)

if __name__ == '__main__':
    sys.exit(main()) 
```

我认为问题可能是我不断实例化一个新的 SSHClient 并且它们并没有被抛出，但是这个版本更快地泄漏内存！

```
import sys
import time
import paramiko

ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
def update():
    global ssh
    try:
        ssh.connect(hostname='localhost')
    finally:
        ssh.close()

def main():
    while(True):
        update()
        time.sleep(0.001)

if __name__ == '__main__':
    sys.exit(main()) 
```

如果有人可以对此有所了解，或者如果我只是愚蠢并且有人可以指出为什么我会非常感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-05T07:57:04.833

我设法重现。调查时，我发现很可能泄漏与 libssl 相关，因为分配量在增长

前：

```
35aaa53000-35aaa5b000 rw-p 00053000 00:11 3360939                        /usr/lib64/libssl.so.1.0.0j
...
7f4530000000-7f453013b000 rw-p 00000000 00:00 0 
Size:               1260 kB
Rss:                1012 kB
Pss:                1012 kB
Shared_Clean:          0 kB
Shared_Dirty:          0 kB
Private_Clean:         0 kB
Private_Dirty:      1012 kB
Referenced:         1012 kB
Anonymous:          1012 kB
AnonHugePages:         0 kB
Swap:                  0 kB
KernelPageSize:        4 kB
MMUPageSize:           4 kB
Locked:                0 kB
7f453013b000-7f4534000000 ---p 00000000 00:00 0 
Size:              64276 kB
Rss:                   0 kB
Pss:                   0 kB
Shared_Clean:          0 kB
Shared_Dirty:          0 kB
Private_Clean:         0 kB
Private_Dirty:         0 kB
Referenced:            0 kB
Anonymous:             0 kB
AnonHugePages:         0 kB
Swap:                  0 kB
KernelPageSize:        4 kB
MMUPageSize:           4 kB
Locked:                0 kB 
```

一段时间后：

```
35aaa53000-35aaa5b000 rw-p 00053000 00:11 3360939                        /usr/lib64/libssl.so.1.0.0j
...
7f4530000000-7f4530250000 rw-p 00000000 00:00 0 
Size:               2368 kB
Rss:                2120 kB
Pss:                2120 kB
Shared_Clean:          0 kB
Shared_Dirty:          0 kB
Private_Clean:         0 kB
Private_Dirty:      2120 kB
Referenced:         2120 kB
Anonymous:          2120 kB
AnonHugePages:         0 kB
Swap:                  0 kB
KernelPageSize:        4 kB
MMUPageSize:           4 kB
Locked:                0 kB
7f4530250000-7f4534000000 ---p 00000000 00:00 0 
Size:              63168 kB
Rss:                   0 kB
Pss:                   0 kB
Shared_Clean:          0 kB
Shared_Dirty:          0 kB
Private_Clean:         0 kB
Private_Dirty:         0 kB
Referenced:            0 kB
Anonymous:             0 kB
AnonHugePages:         0 kB
Swap:                  0 kB
KernelPageSize:        4 kB
MMUPageSize:           4 kB
Locked:                0 kB 
```

似乎是 libssl 或 paramiko 本身的错误，因为 gc.garbage 是空的并且 len(gc.get_objects()) 是恒定的，这意味着没有牢不可破的循环并且没有新的 python 对象（使用您的第一个版本）。

顺便说一句，您可以在每次迭代时运行 gc.collect() 以避免锯齿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-07T17:56:23.403

似乎至少有其他用户最近在 Paramiko 的 IRC 上遇到了这个问题；我创建了一张票来跟踪它：[https](https://github.com/paramiko/paramiko/issues/182) ://github.com/paramiko/paramiko/issues/182 - 遗憾的是我没有智慧分享自己，因为这一级别的问题不是我有故障排除经验的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T03:16:43.853

这些天我遇到了同样的问题。我认为这是lib的错误。同时你的用法不正确。关键问题是您没有定义密钥文件。根据 AutoAddPolicy 源代码：

```
 def missing_host_key(self, client, hostname, key):
        client._host_keys.add(hostname, key.get_name(), key)
        if client._host_keys_filename is not None: 
```

您可以将策略处理程序更改为 WarningPolicy 或自己定义一个空句柄。如：

```
class DoNothingPolicy ():
    def missing_host_key(self, client, hostname, key):
        pass 
```

# javascript - 淘汰赛中的会话价值

> ID：13173522
> 
> 赞同：1
> 
> 时间：2012-11-01T08:35:21.497
> 
> 标签：javascript, asp.net, knockout.js

在我的 viewModel 中，我想获取当前会话值。为此，我这样写：

```
self.currentUserId = ko.observable(HttpContext.Current.Session["UserID"]); 
```

但它向我展示了错误

```
ReferenceError: HttpContext is not defined. 
```

如何定义 HttpContext？或者有什么方法可以获取当前会话值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T08:37:25.600

改变你的陈述

```
self.currentUserId = ko.observable(HttpContext.Current.Session["UserID"]); 
```

如果您 **使用 webform 和 viewmodel 的应用程序与 aspx 页面内联**

```
self.currentUserId = ko.observable('<%=HttpContext.Current.Session["UserID"]%>'); 
```

**如果 MVC 带有带有视图的内联视图模型的剃刀视图引擎**

```
self.currentUserId = ko.observable('@HttpContext.Current.Session["UserID"]'); 
```

如果您的**视图模型在外部 js 文件中，则首先将其存储在 js 变量中并在该 js 中使用**

比如，你不能`HttpContext.Current.Session["UserID"]`在外部 js 文件中使用。

```
<script type="text/javascript" src='<path_of_knochout.js>'></script>

<script type="text/javascript">
    var userId = '<%=HttpContext.Current.Session["UserID"] %>';
</script>

<script type="text/javascript" src='<your_view_model_js>'></script> 
```

在`<your_view_model_js>`文件使用中

```
self.currentUserId = ko.observable(userId); 
```

# symfony - Doctrine2 多对一自引用：未生成父级

> ID：13173525
> 
> 赞同：2
> 
> 时间：2012-11-01T08:35:26.490
> 
> 标签：symfony, doctrine-orm, self-reference

我将 Symfony2 与教义一起使用，除了一个多对一/一对多的自引用关系外，其他关系没有问题。

我有一个实体客户，它可以有零个、一个或多个实体（也是客户）。当我使用 'doctrine:generate:entities BundleName' 生成实体时，我的 Entity Customer.php 中只有一个 var '$entities' 并且没有 var '$mother_house'。此外，生成的迁移（使用教义：迁移：差异）不包含创建新字段“mother_house_id”。

Customer.orm.yml 中的模式是这样的：

```
Acme\Bundle\CustomerBundle\Entity\Customer:
    type: entity
    table: customer
    repositoryClass: Acme\Bundle\CustomerBundle\Entity\CustomerRepository
    fields:
        id:
            type: integer
            id: true
            generator:
                strategy: AUTO
        company_name:
            type: string
            length: 255
        reference:
            type: string
            length: '20'
        created_at:
            type: datetime

    oneToMany:
        entities:
            targetEntity: Customer
            mappedBy: mother_house

    manyToOne:
        mother_house:
            targetEntity: Customer
            inversedBy: entities
            joinColumn:
                mother_house_id:
                    referencedColumnName: id

    manyToOne:
        created_by:
            targetEntity: Acme\Bundle\UserBundle\Entity\User
            joinColumn: 
                created_by:
                     referencedColumnName: id
    lifecycleCallbacks: {  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:55:39.783

我发现了我的错误。

相同类型的所有关系（多对一、一对多等）必须分组在一个字段“manyToOne”、“oneToMany”等下。

所以我只需要改变

```
manyToOne:
    mother_house:
        targetEntity: Customer
        inversedBy: entities
        joinColumn:
            mother_house_id:
                referencedColumnName: id

manyToOne:
    created_by:
        targetEntity: Acme\Bundle\UserBundle\Entity\User
        joinColumn: 
            created_by:
                referencedColumnName: id 
```

进入

```
manyToOne:
    mother_house:
        targetEntity: Customer
        inversedBy: entities
        joinColumn:
            mother_house_id:
                referencedColumnName: id
    created_by:
        targetEntity: Acme\Bundle\UserBundle\Entity\User
            joinColumn: 
            created_by:
                referencedColumnName: id 
```

# c# - 如何在代码隐藏中从我的实体模型中检索数据

> ID：13173530
> 
> 赞同：0
> 
> 时间：2012-11-01T08:35:52.063
> 
> 标签：c#, asp.net, entity-framework, webforms

我创建了我的表，然后是我的`Entity Model`( `Model1.edmx`)。
我可以拖放`GridView`和`EntityDataSource`控制，它们工作正常。

但我需要在代码隐藏中使用我的数据模型。
我应该能够查询一条记录。
例如，`Page_Load`如果我想用特定记录填充文本框。

我不知道从哪里开始，命名空间，实例化对象等。任何帮助表示赞赏。

我正在使用`WebForms`（c#）`EntityFramework`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:57:44.910

尝试使用 Linq to Entity。确实非常有用。

[http://msdn.microsoft.com/en-us/data/ff628210.aspx](http://msdn.microsoft.com/en-us/data/ff628210.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:34:01.490

实体版？检查这是为了

```
 LOJAEntities loja = new LOJAEntities();

   #region IBaseCRUD<T> Members

   public void Add(T pEntity)
    {
        loja.AddObject(pEntity.GetType().Name, pEntity);
    }

    public void Delete(T pEntity)
    {
        loja.DeleteObject(pEntity);
    }

    public void Attach(T pEntity)
    {
        loja.AttachTo(pEntity.GetType().Name, pEntity);
    }

    public void Detach(T pEntity)
    {
        loja.Detach(pEntity);
    }

    public void Update(T pEntity)
    {
        loja.ApplyCurrentValues<T>(pEntity.GetType().Name, pEntity);
    }

    public IQueryable<T> Find(Expression<Func<T, bool>> where)
    {
        try
        {
            return loja.CreateObjectSet<T>().Where(where);
        }
        catch { return null; }

    }

    public IQueryable<T> GetAll()
    {
        return loja.CreateObjectSet<T>();
    }

    public void SaveChanges()
    {
        loja.SaveChanges();
    }

   #endregion 
```

}

存储库使用...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T11:57:02.593

我找到了答案

```
 ShellEntities entities = new ShellEntities(); //initiate
        List<User> users = entities.User.Where(w => w.Email == "test@gmail.com").ToList();
        foreach (var item in users)
        {
            Response.Write(item.Username);
        } 
```

我不需要使用任何命名空间之类的东西，启动实体会自动识别

# c# - 我的 C# 计算是否正确？

> ID：13173531
> 
> 赞同：0
> 
> 时间：2012-11-01T08:35:59.890
> 
> 标签：c#

所以这是下面的问题，想知道我的代码是否正确，如果我错了，你们能纠正我吗？谢谢：

金卡券规则：

*   如果余额低于 $2500，则优惠券为余额的 3%
*   如果余额超过 2500 美元，优惠券是 4% 如果他们的年限少于 2 年
*   如果余额超过 2500 美元，则优惠券为 5%，如果他们的年限为 2 年或以上

代码：

```
public class GoldCard : Card
{
    int year;

    GoldCard(string id, string name, double balance, int year)
        : base(id, name, balance)
    {
        this.year = year;
    }

    public int Year
    {
        get { return year; }
        set { year = value; }
    }

    public double CalcCouponValue()
    {
        double Rate = 0;
        if (balance < 2500)
        {
            Rate = 0.03 * balance;
        }
        else if (balance > 2500 && year < 2)
        {
            Rate = 0.04 * balance;
        }
        else if (balance > 2500 && year > 2)
        {
            Rate = 0.05 * balance;
        }

        return Rate;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:40:12.150

我建议你看看[单元测试。](http://en.wikipedia.org/wiki/Unit_testing)

使用测试框架[nUnit](http://www.nunit.org/)，您可以编写如下测试：

```
[TestFixture]
public class GoldCardTests
{
    [TestCase(2000, 1, 2000 * 0.03)]
    [TestCase(2500, 1, 2500 * 0.04)]
    [TestCase(2500, 2, 2500 * 0.05)]
    public void TestNameTest(double balance, int year, double expected)
    {
        var goldCard = new GoldCard("", "", balance, year);
        double calcCouponValue = goldCard.CalcCouponValue();
        Assert.AreEqual(expected,calcCouponValue);
    }
} 
```

使用上面的代码，您可以单独测试 GoldCard 类并通过余额和年份的组合并测试结果是否符合预期。如果年份为负数，您还可以测试是否会引发异常。这与您在此处的帖子中写下的规则非常相似，但好处是测试仍然存在，如果您将来更改某些违反规则的内容，您将收到错误消息。测试未通过，因此您的计算（或测试）中存在错误

```
public class GoldCard : Card
{
    public GoldCard(string id, string name, double balance, int year)
        : base(id, name, balance)
    {
        this.Year = year;
    }

    public int Year { get; set; }

    public double CalcCouponValue()
    {
        double rate = 0;
        if (Balance < 2500)
        {
            rate = 0.03*Balance;
        }
        else if (Balance > 2500 && Year < 2)
        {
            rate = 0.04*Balance;
        }
        else if (Balance > 2500 && Year > 2)
        {
            rate = 0.05*Balance;
        }
        return rate;

    }
}

public class Card
{
    public string Id { get; set; }
    public string Name { get; set; }
    public double Balance { get; set; }

    protected Card(string id, string name, double balance)
    {
        Id = id;
        Name = name;
        Balance = balance;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T08:41:37.160

您不需要检查是否“余额 > 2500”，因为它会先检查是否存在。

```
public double CalcCouponValue()
{
    double Rate = 0;
    if (balance < 2500)
    {
        Rate = 0.03 * balance;
    }
    else if ( year < 2)
    {
        Rate = 0.04 * balance;
    }
    else if ( year >= 2)
    {
        Rate = 0.05 * balance;
    }

    return Rate;

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T08:46:19.117

您不应该使用随机的网络论坛来验证您的代码的正确性。

您应该使用（自动）测试（即[单元测试](http://www.dreamincode.net/forums/topic/108976-c#-unit-testing-basics/)）来验证您的代码的正确性。这就是测试的目的。使用单元测试，您基本上要做的是定义和验证您在代码 (c#) 中提到的规则。然后，您可以随时运行这些测试，并且一旦您对代码进行了更改，无论它是否破坏了您现有的某些功能（即现有规则），都可以立即获得反馈。

这是使用[NUnit 测试框架](http://www.nunit.org/)的示例：

```
[TestFixture]
public class GoldCardTests
{
    [Test]
    // balance, year, expected result
    [TestCase(2400, 0, 72)]
    [TestCase(2500, 0, 72)] // you did not define a rule for this case
    [TestCase(2600, 1, 104)] 
    // add more test cases so all rules are defined
    public void CalcCouponValue_should_calculate_correctly(double balance, double year, double expectedResult)
    {
         // arrange your test (sut == system under test)
         var sut = new GoldCard(null, null, balance, year);

         // act (execute the test)
         var actualResult = sut.CalcCouponValue();

         // assert (verify that what you get is what you want)
         Assert.That(actualResult, Is.EqualTo(expectedResult));             
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T08:40:08.583

最后一个应该是

```
else if (balance > 2500 && year >= 2)
{
    Rate = 0.05 * balance;
} 
```

或者，如果您的年份正好是 2，您将得到 0。

-更新-这种方式根据您的规格，但是，您的规格没有提及金额何时恰好是 2500。它只谈论或多或少 2500。

# ios - 用于类消息的 Objective-C 宏

> ID：13173534
> 
> 赞同：1
> 
> 时间：2012-11-01T08:36:01.297
> 
> 标签：ios, objective-c, cocoa, c-preprocessor

我有一本带有颜色设置的字典并尝试了这个：

```
#define ColorWithString( x) [UIColor #x]

NSDictionary *settings = @{@"color" : @"whiteColor"};
UIColor *color = ColorWithString(settings[@"color"]); 
```

我得到一个错误`Expected identifier`。

我知道字符串预处理有一些微妙之处。也许甚至不可能向班级发送动态消息。有什么建议可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T08:40:05.957

看看你的宏扩展成什么：

```
UIColor *color = [UIColor settings[@"color"]]; 
```

这显然不是合法的 Objective-C 代码。我认为您可以`performSelector:`结合使用`NSSelectorFromString`：

```
UIColor *color = [UIColor performSelector:
    NSSelectorFromString(settings[@"color"])]; 
```

...但为什么不简单地这样做呢？

```
NSDictionary *colors = @{
    @"white" : [UIColor whiteColor],
    @"red"   : [UIColor redColor]
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T08:53:41.967

将您的宏更改为

```
#define ColorWithString( x) [UIColor performSelector:NSSelectorFromString(x)] 
```

然后你可以使用宏作为

```
 NSDictionary *settings = @{@"color" : @"greenColor"};        
        UIColor *color = ColorWithString(settings[@"color"]); 
```

从`CGColorRef`一个`UIColor`

```
CGColorRef colorRef = color.CGColor; 
```

# jquery - 使用 jQuery 加载动态 python URL

> ID：13173535
> 
> 赞同：0
> 
> 时间：2012-11-01T08:36:08.490
> 
> 标签：jquery, python, html, django

我正在尝试使用 jQuery 加载由 Python Django 生成的动态 URL。

```
$('a').click(function(ev) {
    ev.preventDefault();
    var url = $(this).attr('href');
    $('#loadDiv').load('localhost/home/{{ movie.id }}/add_question/');
}); 
```

如果链接不断变化，我如何捕获和加载链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:18:48.763

如果您以合理的方式创建模板，则在其中找到的每个链接都将具有与该元素的项目匹配的不同链接。假设一个名为 url 的命名 URL`movie_add`采用单个参数作为电影 ID，使您的模板如下所示：

```
<ul>
  {% for movie in movies %}
  <li>{{ movie.name }} <a href="{% url movie_add movie.id %}">add</a></li>
  {% endfor %}
</ul>
<div id="loadDiv"></div> 
```

现在，每个`a`标签都有一个 url，可让您为该特定电影添加问题。从那里开始，下面的脚本应该做你想做的事：

```
$('a').click(function(ev) {
  ev.preventDefault();

  $.ajax({
    url: $(this).attr('href'),
    success: function(data) {
      $('#loadDiv').html(data);
    }
  }); 
```

# ruby - 在 Sinarta (Rack) 应用程序中使用 https

> ID：13173543
> 
> 赞同：0
> 
> 时间：2012-11-01T08:36:39.327
> 
> 标签：ruby, security, https, sinatra, rack

我开发了一个 Sinatra 应用程序，它允许用户通过一些外部网站登录。其中一个网站需要在我的 Sinatra 网站上有 2 个 https 页面：接受和拒绝：

```
https://my_sinatra_app.com/external_login/site1/accept  
https://my_sinatra_app.com/external_login/site1/reject 
```

如果用户输入有效的登录名和密码并在 site1 上单击“同意”，他们将被重定向到我网站上的接受页面，否则 - 拒绝一个。

好吧，这不是那么重要。问题是，我必须做什么才能在 Sinatra 应用程序中使用 https？我需要一个非常好的解决方案，它允许我在 localhost 和虚拟主机上使用 https。只是为了让我的应用程序特别是在本地主机上工作。

你的意见？

# windows - 创建一个没有边框的窗体应用程序

> ID：13173545
> 
> 赞同：1
> 
> 时间：2012-11-01T08:36:47.033
> 
> 标签：windows, border

我是 Visual Studio 的新手，并试图创建一些看起来像 windows 8 无边框样式的简单页面。像[这样](http://dl.dropbox.com/u/53823134/how.png)

你能建议一些很好的参考吗？我浏览过 youtube，但由于缺少确切的关键字，我无法找到合适的结果。

我想创建一个看起来像普通纸的窗口，上面有矩形按钮，与 Visual Studio 2012 Splash 窗口相同。除了按钮之外，它可以从任何地方移动。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-16T08:49:49.657

非常简单，请非常小心地按照以下步骤操作：

1.  如果没有打开“属性”窗口，请从“视图”菜单（左起第二个）打开它，选择“**属性**”或按**Ctrl+W**，然后按**P**
2.  从 MainDesign 窗口中选择表单 ( Form1.cs[Design] )
3.  从属性窗口中选择**FormBorderStyle并选择****None**。您的表单现在没有边框了！

如果解决了问题，请将其标记为答案。

享受..

# android - Android 检查 Internet 连接片段选项卡

> ID：13173559
> 
> 赞同：0
> 
> 时间：2012-11-01T08:38:33.317
> 
> 标签：android

我正在尝试对我的片段选项卡实施检查 Internet 连接。它似乎没有运行。任何人都可以检查我的代码。我希望我的应用程序在加载片段选项卡之前检查互联网连接。

```
public class FreeFragment extends SherlockListFragment implements
        ActionBar.TabListener {

    static final String URL = "https://myxml.xml";
    static final String KEY_SONG = "song";
    static final String KEY_ID = "id";
    static final String KEY_TITLE = "title";
    static final String KEY_CAT_ARTIST = "artistcat";
    static final String KEY_DURATION = "duration";
    static final String KEY_THUMB_URL = "thumb_url";
    static final String KEY_BIG_URL = "big_url";
    static final String KEY_CAT_URL = "cat_url";
    static final String KEY_DESC = "cat_desc";
    ArrayList<HashMap<String, String>> menuItems;
    ListAdapter adapter;
    Context appContext;
    private Fragment mFragment;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {

        checkInternetConnection();

        super.onActivityCreated(savedInstanceState);
    }

    public class loadListView extends AsyncTask<Integer, String, String> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        protected String doInBackground(Integer... args) {
            // updating UI from Background Thread
            menuItems = new ArrayList<HashMap<String, String>>();

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_SONG);
            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                map.put(KEY_ID, parser.getValue(e, KEY_ID));
                map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                map.put(KEY_CAT_ARTIST, parser.getValue(e, KEY_CAT_ARTIST));
                map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
                map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
                map.put(KEY_BIG_URL, parser.getValue(e, KEY_BIG_URL));
                map.put(KEY_CAT_URL, parser.getValue(e, KEY_CAT_URL));
                map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
                // adding HashList to ArrayList
                menuItems.add(map);
            }
            return null;
        }

        @Override
        protected void onPostExecute(String args) {

            if (getActivity() != null) {
                adapter = new MainPageLazyAdapter(getActivity(), menuItems);
                setListAdapter(adapter);

                ListView lv = getListView();

                lv.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> parent, View view,
                            int position, long id) {
                        String thumburl;
                        String bigurl;
                        String caturl;
                        String title;
                        String desc;
                        String artist;
                        Intent in;

                        title = ((TextView) view.findViewById(R.id.title))
                                .getText().toString();
                        artist = ((TextView) view.findViewById(R.id.artist))
                                .getText().toString();
                        desc = ((TextView) view.findViewById(R.id.desc))
                                .getText().toString();
                        thumburl = ((TextView) view
                                .findViewById(R.id.thumb_image)).getText()
                                .toString();
                        caturl = ((TextView) view.findViewById(R.id.cat))
                                .getText().toString();
                        bigurl = ((TextView) view.findViewById(R.id.big_image))
                                .getText().toString();

                        in = new Intent(getActivity(),
                                SingleImageViewActivity.class);

                        in.putExtra(KEY_TITLE, title);
                        in.putExtra(KEY_DESC, desc);
                        in.putExtra(KEY_CAT_URL, caturl);
                        in.putExtra(KEY_THUMB_URL, thumburl);
                        in.putExtra(KEY_BIG_URL, bigurl);
                        in.putExtra(KEY_CAT_ARTIST, artist);
                        startActivity(in);

                    }
                });
            }

        }
    }

    private boolean checkInternetConnection() {
        ConnectivityManager cm = (ConnectivityManager) appContext.getSystemService(Context.CONNECTIVITY_SERVICE);
        // test for connection
        if (cm.getActiveNetworkInfo() != null
                && cm.getActiveNetworkInfo().isAvailable()
                && cm.getActiveNetworkInfo().isConnected()) {
            new loadListView().execute();
            return true;
        } else {
            Toast.makeText(appContext, "Internet Connection Required" , Toast.LENGTH_LONG).show();

            AlertDialog.Builder builder = new AlertDialog.Builder(appContext);
             builder.setMessage("Internet Connection Required")
                    .setCancelable(false)
                    .setPositiveButton("Exit", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            System.exit(0);
                        }

                       });
            AlertDialog alert = builder.create();
             alert.show(); 

                 }

        return false;
     }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        mFragment = new FreeFragment();
        ft.add(android.R.id.content, mFragment);
        ft.attach(mFragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(mFragment);
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {

    }
} 
```

日志猫：

```
11-01 17:06:30.585: E/AndroidRuntime(28090): FATAL EXCEPTION: main
11-01 17:06:30.585: E/AndroidRuntime(28090): java.lang.RuntimeException: Unable to start activity ComponentInfo{in.wptrafficanalyzer.actionbarsherlocknavtab/in.wptrafficanalyzer.actionbarsherlocknavtab.MainActivity}: java.lang.NullPointerException
11-01 17:06:30.585: E/AndroidRuntime(28090):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at android.os.Looper.loop(Looper.java:130)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at android.app.ActivityThread.main(ActivityThread.java:3691)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at java.lang.reflect.Method.invokeNative(Native Method)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at java.lang.reflect.Method.invoke(Method.java:507)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at dalvik.system.NativeStart.main(Native Method)
11-01 17:06:30.585: E/AndroidRuntime(28090): Caused by: java.lang.NullPointerException
11-01 17:06:30.585: E/AndroidRuntime(28090):    at in.wptrafficanalyzer.actionbarsherlocknavtab.FreeFragment.checkInternetConnection(FreeFragment.java:151)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at in.wptrafficanalyzer.actionbarsherlocknavtab.FreeFragment.onActivityCreated(FreeFragment.java:51)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:891)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:505)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1129)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at android.app.Activity.performStart(Activity.java:3817)
11-01 17:06:30.585: E/AndroidRuntime(28090):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1624)
11-01 17:06:30.585: E/AndroidRuntime(28090):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:54:48.363

你的xml中的问题。

```
 String xml = parser.getXmlFromUrl(URL); // getting XML
   Document doc = parser.getDomElement(xml); // getting DOM element 
```

修复此代码，它应该可以工作。

```
// check internet connection
public class MainActivity extends FragmentActivity {

    Fragment1 fragment1 = new Fragment1();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if(!checkInternet()){
            // show error View
        }
        setContentView(R.layout.activity_main);     
    }
} 
```

# php - 用php从pdf中提取图像

> ID：13173561
> 
> 赞同：4
> 
> 时间：2012-11-01T08:38:39.183
> 
> 标签：php, pdf, image-processing

我正在尝试使用 PHP 从 PDF 中提取图像。

我已经部分成功了 - 我有一个灰度图像......

![来自pdf的灰度图像](../Images/5ab4414ed327d40952c16641081030b9.png)

...而且我知道我必须在其上应用一个公式才能获得颜色！

但首先，我需要将图像的二进制数据转换为数字，然后应用[Adob​​e PDF 规范](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/PDF32000_2008.pdf)中的公式。

所以基本上，假设你有附加的图像（包含 PDF 中的所有数据，没有修改），它是

```
1\. CYMK image
2\. 8 bit for each component 
```

并且您需要使用附加的 Adob​​e 规范，在“图像”部分下，使用 PHP 将其转换为彩色图像。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:41:52.980

### 您可以使用[pdfimages](http://linuxcommand.org/man_pages/pdfimages1.html)。

安装时会安装该软件包`xpdf`。手册页描述：

> Pdfimages 将可移植文档格式 (PDF) 文件中的图像保存为可移植像素图 (PPM)、可移植位图 (PBM) 或 JPEG 文件。
> 
> Pdfimages 读取 PDF 文件，扫描一页或多页 PDF 文件，并为每个图像写入一个 PPM、PBM 或 JPEG 文件 image-root-nnn.xxx，其中 nnn 是图像编号，xxx 是图像类型（.ppm、.pbm、.jpg）。
> 
> 注意：pdfimages 从 PDF 文件中提取原始图像数据，而不执行任何额外的转换。由 PDF 内容流完成的任何旋转、剪切、颜色反转等都将被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:55:47.127

您显示的图像不是灰度的，它只是倒置的。尝试反转颜色字节，你会得到好的颜色。由于 Photoshop 将 100% 的颜色存储为 0x0，导致 JPEG 图像中的 CMYK 颜色存储存在问题。

编辑：如何在 PHP 中反转，取自[这篇博文](http://hanswestman.se/2011/07/some-image-filters-for-php-gd/)它正在处理 rgb 数据，必须适应 CMYK

```
<?php
function image_filter_invert(&$image){
    $width = imagesx($image);
    $height = imagesy($image);
    for($x = 0; $x < $width; $x++){
        for($y = 0; $y < $height; $y++){
            $rgb = imagecolorat($image, $x, $y);
            $r = 0xFF-(($rgb>>16)&0xFF);
            $g = 0xFF-(($rgb>>8)&0xFF);
            $b = 0xFF-($rgb&0xFF);
            $color = imagecolorallocate($image, $r, $g, $b);
            imagesetpixel($image, $x, $y, $color);
        }
    }
}

?> 
```

# git - 为什么 git 需要 stash save-pop 来切换分支？

> ID：13173565
> 
> 赞同：3
> 
> 时间：2012-11-01T08:39:11.747
> 
> 标签：git, git-branch, git-stash

有时当工作目录发生本地更改时，切换分支会失败，但以下流程有效：

*   存储保存
*   切换分支
*   隐藏流行音乐

怎么来的？git 不知道如何将本地工作目录更改应用到目标分支？什么样的设计选择使这个过程变得必要？有没有我可以使用的标志来避免这个稍长的过程？

**更新：**
假设我想在切换分支时将本地更改保留为本地更改。有时这是一个实际的场景......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T08:57:38.250

当前分支脏了，你尝试切换分支有两种情况：

1.  您忘记提交更改。

    在这种情况下，git 会警告您切换到另一个分支会导致您丢失所做的更改。这基本上是默认假设，这就是错误消息按原样编写的原因。

2.  您的更改是暂时的，无论如何您都想切换。

    在这种情况下，您需要存储更改，然后在切换后再次应用它。Git 从不认为这是你想要的。如果我不得不猜测为什么这可能是因为 Linus 不经常这样做。

由于 git 无法读懂您的想法，它会等待您告诉它提交或存储。虽然通过错误消息我会说如果 git 试图读懂你的想法，它会猜测你想要提交而不是 stash - 但在你的情况下这将是一个错误的猜测。

* * *

**附加答案**

很抱歉回复之间的长时间延迟，但我今天才注意到您更新的问题。

对于本地更改，我的策略是创建一个本地更改分支。然后从那个分支而不是 master 分支所有功能分支。这是可行的，因为本地更改通常适用于所有工作分支。

但是这样做会使 master 变基有点乏味，因为您基本上需要变基两次 - 一次到 local_changes，然后从 local_changes 到您的主题分支。但是你可以很容易地为此编写一个 shell 脚本：

```
# rebase_master.sh
git rebase master local_changes
git rebase local_changes 
```

这样做的另一个优点是，如果您需要重新配置环境，那么更改 local_changes 会将您的更改传播到所有主题分支。

要合并回 master，您可以`git rebase master`在合并之前从主题分支中删除 local_changes。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T09:02:37.923

为了涵盖您问题的最后一部分，如果您经常这样做，您可以创建一个别名来缩短该过程：

```
switch = !f() { git stash && git checkout $1 && git stash pop; }; f 
```

用法：`git switch branchName`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-01T14:09:40.353

只要您没有修改当前`HEAD`提交和目标提交之间不同的任何文件，使用脏工作树切换分支就会成功。如果不是这种情况，则需要合并对这些文件的更改，并且`git checkout`无法警告您您正在尝试做一些无法轻易撤消的事情。如果你想这样做，你可以使用`--merge`or`-m`选项`git checkout`：

```
git checkout -m branchName 
```

# eclipse-emf-ecore - 比较通过从不同位置加载相同资源创建的 2 个 EObject 时，EcoreUtil.equals 返回 false

> ID：13173571
> 
> 赞同：1
> 
> 时间：2012-11-01T08:39:24.133
> 
> 标签：eclipse-emf-ecore

我正在用`EcoreUtil.equals`方法观察一个奇怪的行为。我正在使用资源`createResource`和`load`方法从 2 个不同的位置（我在 2 个位置有相同的文件）加载 2 个完全相同的 XML 文件。

`ECoreUtil.equals`为这些 2 返回 false `EObjects`。当我调试`EcoreUtil.equals`代码时，我发现它因为 == 检查`EClass`和`EStructuralFeature`. 请注意，类和结构特征是相同的，但是可以看到`EClass`和的 2 个单独实例。对功能和类进行 == 检查，因此失败。`EStructuralFeature``EcoreUtil.equals`

我无法理解的是为什么会为`EClass`和创建 2 个实例`EStructuralFeature`。我确信这 2 个 XML 文件没有区别。一个是另一个的副本。

ecore 模型中是否有任何设置可能是原因？我的 XML 文件中有`xmi:id`属性。

我被这种行为难住了。任何人都可以提供任何指示吗？

问候，阿拉蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T11:23:44.730

最好在 eclipse.tools.emf 论坛上询问 EMF。

您的问题中没有任何内容可以暗示为什么会有多个 EPackage。似乎建议您有一个使用动态 Ecore 模型的实例文件。是这样吗？即使在这种情况下，如果您在同一资源集中加载资源，它们最终应该共享一个模型。

# java - GWT Celltable 服务器端分页

> ID：13173572
> 
> 赞同：0
> 
> 时间：2012-11-01T08:39:24.727
> 
> 标签：java, gwt, pagination, server-side

如何进行服务器端分页（如排序列的 AsyncDataProvider）；？我可以覆盖 SimplePager 行为：

```
 SimplePager pager = new SimplePager() {

        @Override
        public void nextPage() {
            //AsyncCallToServer
            super.nextPage();
        }

        @Override
        public void previousPage() {
            //AsyncCallToServer
            super.previousPage();
        }
    }; 
```

但是，我认为有一个更简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T18:40:23.610

哦，AsyncDataProvider 允许网格分页

# vba - vba 是在相等比较中被视为零的空值

> ID：13173575
> 
> 赞同：4
> 
> 时间：2012-11-01T08:39:39.640
> 
> 标签：vba, excel

我试图跳过值为零或为空的记录。截至目前，我有以下代码明确检查两者，但我觉得第二次检查是多余的。但我想确认我是对的，以便我可以删除 IF 的第二部分

```
IF (CellInValue(RowInCrnt, ColInCrnt) = 0 Or CellInValue(RowInCrnt, ColInCrnt) = "") Then 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T08:47:19.807

不，`""`不等于`0`并且会在强类型场景中产生类型不匹配，或者如果用作`Variant`.

当单元格为空时，它也与零不同，但它会输出相同，因为在 VB 中，由于后台发生隐式转换而`Empty = 0`给出。 同样的，也会出于同样的原因给予。`True`
`Empty = ""``True`

所以你需要两个检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T08:54:26.650

GSerg 是完全正确的。

如果您真的想避免进行 2 次不同的检查，您可以将 If 更改为以下内容：

```
If Clng(0 & CellInValue(RowInCrnt, ColInCrnt)) = 0 then 
```

当`CellInValue(RowInCrnt, ColInCrnt)`为 ""、Empty 或 0 时返回 true。

尽管如果您的函数可以返回字母而不是数字，则在这种情况下会出现类型不匹配错误。

# ios - MKMapView，预加载注解

> ID：13173579
> 
> 赞同：0
> 
> 时间：2012-11-01T08:40:07.697
> 
> 标签：ios, mkmapview, mkannotation, mkannotationview

在我的新 ios 应用程序的不同位置显示小`MKMapView`的滚动和用户交互被禁用。每张地图将始终有一个自定义注释。

如屏幕截图所示，一切看起来都很好。但是，有一个我不满意的小行为。加载包含 的视图或单元格时，`MKMapView`地图会立即出现，但在将注释添加到其中之前会有一小段延迟。我认为这是由于注释的工作方式（如`UITableView`）。

因为我的地图将始终包含一个注释，所以有没有办法在地图实际出现在屏幕上之前强制将其预加载到地图上。我不希望`MKMapView`在滚动时重新加载的 tableview 单元中包含非常烦人的小延迟。欢迎任何其他想法。

谢谢

![iphone截图](../Images/200e8d903248c0763aa4ee6bcd20c0c0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:31:48.243

为什么不在初始化期间将 MapView 设置为隐藏，然后在添加注释后，将触发此方法：

```
- (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views
{
    // reveal map
    mapView.hidden = NO;

    // -----------------------------------------------------------------
    // ALTERNATIVE WAY TO SHOW MAP VIEW WITH SMOOTH FADE IN
    //
    // if you want you can even animate the fading in of the 
    // note: this means you need to remove the above line
    // and you also need to set mapView.alpha = 0 during initialsation
    // instead of using mapView.hidden = YES
    // -----------------------------------------------------------------
    [UIView animateWithDuration:0.5 animation:^{ 
        mapView.alpha = 1;
    }];
} 
```

（参考： http: [//developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapView](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapView:didAddAnnotationViews) :didAddAnnotationViews :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:56:06.013

我不知道你在代码中究竟做了什么，但也许它对你有帮助。

```
- (MKAnnotationView *)mapView:(MKMapView *)mv viewForAnnotation:(id <MKAnnotation>)annotation
{
 MKPinAnnotationView* pv = (MKPinAnnotationView*)[mv dequeueReusableAnnotationViewWithIdentifier:reuse];
    if ( pv == nil )
    {
        pv = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:reuse] autorelease];   
        [pv setAnimatesDrop:YES]; // replace this line with the following line
        [pv setAnimatesDrop:NO];
    }

    [pv setAnnotation:annotation];

    return pv;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T08:50:58.073

我没有如何测试它，但是 set 呢：

```
myPinView.animatesDrop = NO; 
```

在您的 viewForAnnotation 委托中，因为默认设置为 YES 值。

# sql - 从表插入到表时如何检查字段是否更新？

> ID：13173585
> 
> 赞同：0
> 
> 时间：2012-11-01T08:40:17.013
> 
> 标签：sql, sql-server

我将以下数据从 TableA 插入到 TableB。我使用每 4 小时自动运行一次的查询将数据从 TableA 插入到 TableB。查询包含插入、更新和删除。

> 日期***_ _* __ *_* _***组* ****____***状态* ****___***开始时间* ****___** *结束**时间 2012-11-1* ****_***一个* ****_ *_* __ *_* __** *1* ****_ *_* ____** *08:00* ****_ *_* ___** _16:00**************

 ****使用 TableB 的应用程序也可以更改字段状态，但我需要检查这是否被应用程序更改。没有任何属性我可以检查这个。

我试图在 TableB 中创建一个新列“FromTableA”（位）以保持状态，这意味着该数据来自 TableA。但是当应用程序更改状态时，属性 FromTableA 保持为 TRUE，因此我无法检查。

仅使用查询来解决问题的任何想法？不允许更改应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:48:53.987

我能想到的唯一选择是单独的时间戳字段的组合 - 您将在自动查询中更新的字段和将更新表上最后更新的另一个时间戳的触发器。比较两者，如果它们不相等 -> 在其他地方更新的字段。****

# android - Android - 谷歌分析。跟踪活动视图

> ID：13173588
> 
> 赞同：1
> 
> 时间：2012-11-01T08:40:34.210
> 
> 标签：android, google-analytics, google-analytics-api

我想计算我的应用程序中活动视图的数量。[文档](https://developers.google.com/analytics/devguides/collection/android/devguide)说如果我的应用程序只有一个 Activity，我可以直接在我的 Activity 方法中
调用方法。然后下面说：`tracker.startNewSession();``onCreate()`

> 如果您的应用程序中有多个活动，您**可以**使用 EasyTracker 库

我的应用程序中有多个活动，但我不想使用 EasyTracker。

我的问题是，我应该呼吁`tracker.startNewSession();`每项活动，还是只呼吁一次？让我们在启动画面中说。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:09:29.810

好吧，经过一番调查，事实证明 EasyTracker 更适合我的情况，所以我最终使用了它。

# macos - 是否可以在后台移动窗口（不窃取焦点）

> ID：13173590
> 
> 赞同：1
> 
> 时间：2012-11-01T08:40:57.133
> 
> 标签：macos, window, applescript, move, foreground

我想为同时打开多个窗口的应用程序编写一个脚本。当他们需要用户对其执行操作时，其中一些会弹出到前台。

但是，对于前景中的每个窗口，它背后都有许多其他窗口（在背景中）。我想将特定的背景窗口移动到屏幕的不同位置。

我想知道这是否可以使用applescript但没有窃取焦点；他们不应该在移动时出现在前台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:02:13.187

在 Safari 中打开 2 个窗口（或更多）并尝试此操作。它会将第二个窗口向右移动 5 个像素。此代码应该适用于您的应用程序，并且系统事件知道窗口并可以重新定位其他应用程序的位置。请注意，窗口还具有您可能想要使用的大小属性。

```
tell application "System Events"
    tell process "Safari"
        set theWindows to windows
        if (count of theWindows) is greater than or equal to 2 then
            set p to position of (item 2 of theWindows)
            set position of window 2 to {(item 1 of p) + 5, item 2 of p}
        end if
    end tell
end tell 
```

# ruby - Rails 3 加速 Active Record 回调 after_commit 以使用 Private_pub 发送通知

> ID：13173594
> 
> 赞同：0
> 
> 时间：2012-11-01T08:41:08.063
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1

创建帖子后，我使用 3 个回调。

1) 帖子创建

callback#1)`after_commit :do_notify, :on => :create` 用于创建通知

2) 创建通知

回调#2)`after_commit :publish_to_all, :on => :create`用于使用 private_pub 向用户发送消息/

完成整个流程需要一分钟多的时间。

> 问题#1：*方法错了吗？*
> 
> 问题#2：*有没有一种方法可以将其余的回调发送到后台并在那里完成？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:59:46.773

1.  是的
2.  异步执行

还有观察者：[http ://api.rubyonrails.org/classes/ActiveRecord/Observer.html](http://api.rubyonrails.org/classes/ActiveRecord/Observer.html)

对于您可以使用的异步任务：[https ://www.ruby-toolbox.com/categories/Background_Jobs](https://www.ruby-toolbox.com/categories/Background_Jobs)

# mysql - 在 SQL 中，如何从关系数据库模式中检索信息？

> ID：13173602
> 
> 赞同：2
> 
> 时间：2012-11-01T08:41:37.600
> 
> 标签：mysql, sql, database, relational-database

我有一个关系数据库架构，如下所示： ![在此处输入图像描述](../Images/22cfee1ae3ffbe2777da1904379cfad2.png)

问题是“查找在 2009 年购买产品且产品由霍尼韦尔于 1968 年制造的客户的详细信息”。

到目前为止我所做的是：

```
SELECT * FROM Customer
WHERE CID IN
    (SELECT Customer_ID FROM Order
     WHERE Purchase_Date = 2009 
     AND EXISTS
        (SELECT * FROM Order_Items, Product, Manufacturer
         WHERE OID = OID AND Product_ID = PID AND MID = Manufacturer_ID AND
         Mnufacturer_Name = "Honeywell" AND Manufacturerd_Date = 1968)); 
```

我研究数据库才大约一个月，所以我想这里的专家看起来会很复杂..我做对了吗？否则，请提供任何反馈在哪里修复..

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:46:25.777

通常，当从关系数据库中的相关表中检索信息时，您应该[**`JOIN`**](http://en.wikipedia.org/wiki/Join_%28SQL%29)使用适合从查询中获得的结果的连接类型的表。是否包括外部表中不匹配的行。因此，在您的情况下，您可以这样做：

```
SELECT DISTINCT c.*
FROM Customer c
INNER JOIN Order        o ON c.CID             = o.Customer_ID
INNER JOIN OrderItems  oi ON o.OID             = oi.OID
INNER JOIN Product      p ON oi.ProductID      = p.PID
INNER JOIN Manufacturer m ON p.Manufacturer_ID = m.MID
WHERE o.Purchase_Date = 2009 
  AND m.Mnufacturer_Name = "Honeywell"
  AND m.Manufacturerd_Date = 1968 
```

但是，在您发布的查询中：

```
SELECT * FROM Customer
WHERE CID IN
    (SELECT Customer_ID FROM Order
     WHERE Purchase_Date = 2009 
     AND EXISTS
        (SELECT * FROM Order_Items, Product, Manufacturer
         WHERE OID = OID AND Product_ID = PID AND MID = Manufacturer_ID AND
         Mnufacturer_Name = "Honeywell" AND Manufacturerd_Date = 1968)); 
```

您正在使用`IN`谓词并连接三个表`Order_Items`，`Product`并`Manufacturer`使用旧的连接语法`.. FROM Order_Items, Product, Manufacturer WHERE OID = OID AND Product_ID = PID AND MID = Manufacturer_ID`

您的查询可能有效。但是，如果有任何`NULL`值，`Customer_ID`则它不会返回任何结果。但它会更容易使用`JOIN`。这是一个有用的赞`JOIN`：

*   [**SQL 连接的可视化解释**](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。
*   [**SQL 连接的可视化表示**](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)。

# iphone - 使用 MailCore 在我自己的应用程序中使用 yahoo 帐户发送电子邮件

> ID：13173604
> 
> 赞同：2
> 
> 时间：2012-11-01T08:41:39.177
> 
> 标签：iphone, ios, smtp, yahoo, mailcore

我成功地使用谷歌帐户发送电子邮件，但在我的应用程序中使用雅虎帐户失败。MailCore 用于编写我的电子邮件数据。

```
#define YAHOO_SEND_SERVER_1       @"smtp.mail.yahoo.com"
#define YAHOO_SEND_PORT         465

success = [CTSMTPConnection sendMessage:testMsg server:YAHOO_SEND_SERVER_1 username:account password:pwd port:YAHOO_SEND_PORT useTLS:YES useAuth:YES error:&error]; 
```

我得到了错误描述：

```
error: Error Domain=mailcore Code=1 "Unexpected error code" UserInfo=0xc9b9740 {NSLocalizedDescription=Unexpected error code} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T23:51:10.160

MailCore 应该已经更新支持 Yahoo SMTP，你需要使用：

```
- (BOOL) sendMessage:server:username:password:port:connectionType:useAuth:error 
```

供`connectionType:`使用**`CTSMTPConnectionTypeStartTLS`**。

# delphi - 如何在 x64 系统中获取 windows 控制面板？

> ID：13173607
> 
> 赞同：1
> 
> 时间：2012-11-01T08:41:45.890
> 
> 标签：delphi, 64-bit, controlpanel

我使用 Shell 来获取控制面板

代码 ：

```
var
  psfDeskTop: IShellFolder;
  psfControl: IShellFolder;

  pidControl: PITEMIDLIST;
  pidChild: PITEMIDLIST;
  pidAbsolute: PItemIdList;

  pEnumList: IEnumIDList;
  celtFetched: ULONG;

  FileInfo: SHFILEINFOW;

begin

  OleCheck(SHGetDesktopFolder(psfDeskTop));
  OleCheck(SHGetSpecialFolderLocation(0, CSIDL_CONTROLS, pidControl));
  OleCheck(psfDeskTop.BindToObject(pidControl, nil, IID_IShellFolder, psfControl));
  OleCheck(psfControl.EnumObjects(0, SHCONTF_NONFOLDERS or SHCONTF_INCLUDEHIDDEN or SHCONTF_FOLDERS, pEnumList));

  while pEnumList.Next(1, pidChild, celtFetched) = 0 do
  begin

    pidAbsolute := ILCombine(pidControl, pidChild);
    SHGetFileInfo(LPCTSTR(pidAbsolute), 0, FileInfo, SizeOf(FileInfo), SHGFI_PIDL
      or SHGFI_DISPLAYNAME);
    Memo1.Add(FileInfo.szDisplayName);

  end;

end; 
```

它只能获得 32 位的控制面板，例如：BDE 管理员（32 位）、Flash Player（32 位），而我的操作系统是 x64，我想知道如何获得所有（32 位和 64 位）控制面板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:19:35.853

您需要将代码编译为 64 位进程才能看到 64 位控制面板项。这需要 XE2 或更高版本。当我在 64 位进程中尝试您的代码时，输​​出如下：

```
NVIDIA nView 桌面管理器
电源选项
通知区域图标
任务栏和开始菜单
凭证管理器
默认程序
RemoteApp 和桌面连接
Windows Live 语言设置
Windows更新
桌面小工具
Windows 防火墙
电话和调制解调器
语音识别
用户帐户
地区和语言
家庭组
老鼠
文件夹选项
键盘
装置经理
Windows CardSpace
性能信息和工具
程序和特点
索引选项
网络和共享中心
自动播放
同步中心
恢复
互联网选项
设备和打印机
色彩管理
备份还原
系统
活动中心
字体
Windows 随时升级
展示
故障排除
入门
管理工具
轻松访问中心
Windows Defender的
日期和时间
位置和其他传感器
个性化
声音
Java（32 位）
DirectX
瑞昱高清音频管理器
BDE 管理员（32 位）
Advansys Formativ（32 位）
邮件（32 位）
Microsoft Mail 邮局（32 位）
Flash 播放器（32 位）
英伟达控制面板

```

在 32 位进程中，输出为：

```
爪哇
BDE 管理员
Advansys Formativ
邮件
微软邮件邮局
Flash播放器

```

请注意，64 位进程枚举 32 位项以及 64 位项。

# java - SSL上下文。我应该重新加载它吗？

> ID：13173610
> 
> 赞同：1
> 
> 时间：2012-11-01T08:41:54.053
> 
> 标签：java, networking, ssl, keystore, jsse

我有兴趣动态更新信任库。
什么是最好的选择？
重新加载`SSLContext`还是可以重新创建`TrustManagers`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:56:32.813

你不能“重新加载”一个`SSLContext`，但你当然可以创建一个新的。自定义`TrustManager`将无济于事，因为它是`TrustManagerFactory`与密钥库连接的底层，而不是`TrustManager`.

# c# - 从通用列表中删除项目

> ID：13173613
> 
> 赞同：0
> 
> 时间：2012-11-01T08:42:06.320
> 
> 标签：c#, asp.net, repeater, generic-list

我正在尝试从`Generic List`绑定到中继器控件的项目中删除一个项目。

到目前为止，我有一个应该可以工作的删除方法（在搜索互联网之后）：

```
Label lblMemberName = (Label)e.Item.FindControl("lblMemberName");        

switch (e.CommandName)
{
    case "RemoveMember":
        foreach (challenge.Member member in Members.Where(member => member.Name == lblMemberName.Text))
        {
            //This line doesnt work
            Members.Remove(member);
        }
        break;
} 
```

不幸的是，这种情况下的实际删除是行不通的。

我了解您无法创建要删除`new`的 a 实例。`List<>`所以，这就是为什么我使用该`Linq`语句来查找以前的详细信息。

我做错了什么，怎么可能修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:48:24.020

如上所述，您不能在迭代集合时修改集合的内容。

您也可以尝试[List(T).RemoveAll()](http://msdn.microsoft.com/en-us/library/wdka673a.aspx)。请参阅[LINQ：如何在不使用 For 循环和 Array 的情况下使用 RemoveAll](https://stackoverflow.com/questions/2884403/linq-how-to-use-removeall-without-using-for-loop-with-array)。这是一个比另一个列表更简洁的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:50:17.400

修改您正在遍历的列表是非法的。但是，您可以将其转换为 for 循环而不是 foreach，然后对其进行修改。

```
for (int i=0; i < Members.Count; i++)
{
    if (Members[i].Name == lblMemberName.Text)
        Members.RemoveAt(i--); // decrement because we just shrunk the list)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:22:01.727

获取会员：

```
var member = Members.FirstOrDefault(i=>i.Name.Equals(thename)); 
```

然后将其从列表中删除：

```
if (member != null) 
{ 
    Members.Remove(member); 
} 
```

# c# - Windows Phone Web 访问 API 中的异步等待

> ID：13173614
> 
> 赞同：5
> 
> 时间：2012-11-01T08:42:19.780
> 
> 标签：c#, async-await, windows-phone-8

WP8 中是否支持异步/等待模式？

我需要从基于 Web 的 API 获取 XML，它看起来像这样`WebClient`或`WebRequest`不支持它。

WP8 BCL 中是否有支持 async/await 的类可用于 Web 访问？如果没有，是否有我可以使用的库？

我知道创建包装器来支持它并不难，但这似乎是 SDK 中包含的东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-01T09:34:26.233

> WP8 BCL 中是否有支持 async/await 的类可用于 Web 访问？

这是在 WP8 SDK 的封闭测试期间提出的一个问题，所以我可以很遗憾地回答这个问题，不。

但正如您所提到的，制作自己的包装器相当容易。

例如：

```
public static class Extensions
{
    public static Task<string> DownloadStringTask(this WebClient webClient, Uri uri)
    {
        var tcs = new TaskCompletionSource<string>();

        webClient.DownloadStringCompleted += (s, e) =>
        {
            if (e.Error != null)
            {
                tcs.SetException(e.Error);
            }
            else
            {
                tcs.SetResult(e.Result);
            }
        };

        webClient.DownloadStringAsync(uri);

        return tcs.Task;
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-01T20:17:42.907

[作为本博](http://blogs.msdn.com/b/bclteam/archive/2012/10/22/using-async-await-without-net-framework-4-5.aspx)文中描述的[NuGet 包](https://nuget.org/packages/Microsoft.Bcl.Async/1.0.12-beta)`Microsoft.Threading.Tasks.Extensions.Phone.dll`的一部分，提供了一些对 WP8 的支持。[`Microsoft.Bcl.Async`](https://nuget.org/packages/Microsoft.Bcl.Async/1.0.12-beta)

特别是，它包括`WebClient.DownloadStringTaskAsync`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-18T09:20:59.037

我有同样的问题，我发现了这个并帮助了我

```
private async Task<T> ExecuteAsync<T>(RestRequest request)
    {
        var tcs = new TaskCompletionSource<T>();
        _client.ExecuteAsync(request, resp =>
        {
            var value = JsonConvert.DeserializeObject<T>(resp.Content);
            if (value.ErrorCode > 0)
            {
                var ex = new ToodledoException(value.ErrorCode, value.ErrorDesc);
                tcs.SetException(ex);
            }
            else
                tcs.SetResult(value);
        });
        return await tcs.Task;
    } 
```

[http://www.developer.nokia.com/Community/Wiki/Asynchronous_Programming_For_Windows_Phone_8](http://www.developer.nokia.com/Community/Wiki/Asynchronous_Programming_For_Windows_Phone_8) 我也发现这个扩展很有帮助[http://nuget.org/packages/WP8AsyncWebClient/](http://nuget.org/packages/WP8AsyncWebClient/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T09:58:48.330

> WP8 中是否支持异步/等待模式？

澄清一下，Windows Phone 8 上完全支持 C# 5.0。WinRT API 很大程度上依赖于 async/await，例如同步到 PeopleHub，或使用 I/O API。

但是 Silverlight 和旧的 .NET API 尚未更新为对 WebClient 等类使用 async/await。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-01T21:31:32.770

WP8 具有原生 async/await 支持，但有一些限制，例如缺少 HttpClient 和可能的其他类。
WP7 在 VS2010 中使用 AsyncCTP 支持 async/await，但在 VS2012 中它最近被重新添加为 Microsoft.Bcl.Async：
[https ://nuget.org/packages/Microsoft.Bcl.Async/1.0.12-beta](https://nuget.org/packages/Microsoft.Bcl.Async/1.0.12-beta)

# sql - 规范化 SQL 查询中的值

> ID：13173615
> 
> 赞同：3
> 
> 时间：2012-11-01T08:42:21.120
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个数据表，我希望对其进行一些数值分析，因为我需要所有值都在同一范围内。0..1。

我有一个有点缓慢和长期的方式来完成这个，但想要一个更直接的高性能解决方案来解决我的问题

我需要做的是：

在每个项目中按 projectid 分组，取每个值的平均值，然后除以整个集合的最大平均值。

目前我有

```
select avg(foo * 1.0)/ (Select MAX(IL) FROM (select avg(foo * 1.0) as IL from table group by     
                                             ProjectID) tbl)
from table 
```

所以如果列表是

```
projectid  | foo
-----------------
1          | 1
1          | 2
2          | 4
2          | 2 
```

最大平均值为 3，因此结果应为

0.5,1

其中第一个是 projectId 1 除以 3 的平均值，第二个是 projectId 2 除以 3 的平均值

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T09:04:31.450

[**SQL 提琴示例**](http://sqlfiddle.com/#!3/57a00/18)

```
select
    Projectid,
    avg(cast(foo as decimal(29, 2))) / max(avg(cast(foo as decimal(29, 2)))) over ()
from tbl1
group by Projectid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:03:47.377

```
;with cte as
(
    select projectid, AVG(foo) av
    from yourtable
    group by projectid
)
    select *,
        av/(select MAX(av) from cte)
    from cte 
```

# ruby-on-rails - 使用 rails 控制台截断表

> ID：13173618
> 
> 赞同：56
> 
> 时间：2012-11-01T08:42:35.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3, truncate, rails-console

我有这个测试数据库，到目前为止，它已经塞满了垃圾。现在我在 Rails 控制台中完成了一些 Table.destroy_all 命令，它删除了所有记录和依赖项，这很棒。然而; 我想截断所有内容，以便 ID 等再次从 1 开始。Rails 3有什么办法吗？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-11-01T09:16:16.173

接受的答案仅在您需要重新创建整个数据库时才有效。
要删除单个表（使用回调）并让 ID 从 1 开始：

```
Model.destroy_all # Only necessary if you want to trigger callbacks.
ActiveRecord::Base.connection.execute("TRUNCATE #{table_name} RESTART IDENTITY") 
```

如果您使用的是 Sqlite，它不支持截断，请执行以下操作：

```
Model.destroy_all # Only necessary if you want to trigger callbacks.
ActiveRecord::Base.connection.execute("Delete from #{table_name}")
ActiveRecord::Base.connection.execute("DELETE FROM SQLITE_SEQUENCE WHERE name='#{table_name}'") 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2018-04-18T20:50:11.480

```
Model.connection.truncate(Model.table_name) 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-02-13T14:25:51.480

这对我有用 - `ActiveRecord::Base.connection.execute("TRUNCATE table_name")`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-01T08:44:49.623

只需在下一次测试运行时重建数据库（这将在删除后自动发生）。

`rake db:drop RAILS_ENV=test`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-21T08:36:31.073

你也可以做`rake db:rollback STEP=3 RAILS_ENV=test`

其中 3 表示您在 db/migrate 中的迁移次数。例如：如果我有

```
db/migrate
20140121065542_create_users.rb
20140121065710_create_profiles.rb
20140121065757_create_articles.rb
20140121065900_create_comments.rb
20140121065929_create_categories.rb 
```

所以我总共要删除 5 个迁移。如果我这样做，`rake db:rollback STEP=5 RAILS_ENV=test`所有表将从我的 TEST 数据库中删除，并且如果我删除 RAILS_ENV=test，则所有 ENVIRONNMENT（生产、测试​​、开发）表都将被删除，并且它还会从迁移数据中清除 db/shema.rb 文件。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-13T21:48:06.767

`rake db:reset`将执行`rake db:drop db:setup`。换句话说，删除数据库并重新设置数据库。

[来源](http://guides.rubyonrails.org/migrations.html#resetting-the-database)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-12-22T16:33:27.887

假设您使用的是 MySQL 或 Postgre 而不是 SQlite3（不支持`TRUNCATE`），您可以执行以下操作：

```
MyModel.connection_pool.with_connection { |c| c.truncate(MyModel.table_name) } 
```

请注意，这不会调用 ActiveRecord 回调。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-08-02T08:13:47.770

Rails 6.0+ 添加新方法：truncate_tables

```
ActiveRecord::Base.connection.truncate_tables([:table1_name, :table2_name]) 
```

[https://stackoverflow.com/a/68618256/7438710](https://stackoverflow.com/a/68618256/7438710)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-12T05:25:21.950

我使用下面的代码截断所有表

```
ActiveRecord::Base.establish_connection
ActiveRecord::Base.connection.tables.each do |table|
  next if table == 'schema_migrations'

  case ActiveRecord::Base.connection.adapter_name.downcase.to_sym
    when :mysql2 , :postgresql
      ActiveRecord::Base.connection.execute("TRUNCATE #{table}")
      ActiveRecord::Base.connection.execute("TRUNCATE #{table} RESTART IDENTITY")
    when :sqlite
      ActiveRecord::Base.connection.execute("DELETE FROM #{table}")
  end
end 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-28T10:45:25.860

您可以`ModelName.delete_all`在 Rails 控制台中使用。

* * *

## 回答 #11

> 赞同：-5
> 
> 时间：2014-08-17T00:48:24.377

（聚会有点晚了，我知道）

要求在控制台中执行此操作：

```
2.1.2 :001 > Post.all.each do |post|
2.1.2 :002 >   post.destroy!
2.1.2 :003 > end 
```

也可以...

这实质上是遍历所有帖子并销毁它们。虽然它不会改变你的自动增量值......

同样的逻辑也适用于 Rails 3（尽管我使用的是 Rails 4）

# javascript - jQuery外部链接锚动画

> ID：13173620
> 
> 赞同：0
> 
> 时间：2012-11-01T08:42:38.670
> 
> 标签：javascript, jquery

找不到正确答案。我想打开页面然后动画滚动到`ID`我打电话的地方。

这是我的代码。

**jQuery**

```
 $(window).bind("load", function () {
              var urlHash = window.location.href.split("#")[1];
                $('html,body').animate({ scrollTop: $('a[href="#' + urlHash + '"]').offset().top}, 1000);
    }); 
```

**html**

```
<div class="space"></div>
<div id="anchor">This is anchor</div> 
```

**css**

```
.space{height:800px;}
#anchor{font-size:25px;height:800px;} 
```

然后jQuery不起作用，所以我将以下代码粘贴到控制台

```
 $('html,body').animate({ scrollTop: $('a[href="#' + anchor+ '"]').offset().top}, 1000); 
```

错误说

> TypeError：无法读取未定义的属性“顶部”

[http://jsfiddle.net/4mjmw/1/](http://jsfiddle.net/4mjmw/1/)

我该如何解决这个错误？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:53:12.457

此代码有效：http: [//jsfiddle.net/4mjmw/4/](http://jsfiddle.net/4mjmw/4/)

演示：http: [//jsfiddle.net/4mjmw/4/show/#abc](http://jsfiddle.net/4mjmw/4/show/#abc)

我向锚点添加了一个 href 并将脚本移动到 HTML。

```
$(window).bind("load", function () {
          var urlHash = window.location.href.split("#")[1];
            $('html,body').animate({ scrollTop: $('a[href="#' + urlHash + '"]').offset().top}, 1000);
      }); 
```

# python - 获取从模块中特定类派生的类

> ID：13173621
> 
> 赞同：1
> 
> 时间：2012-11-01T08:42:54.377
> 
> 标签：python, python-2.7, superclass

我需要从仅从特定 TargetClass 派生的模块中获取类：

```
import mymodule as t
for att in dir(t):
   someclass = getattr(t, att)
   if isinstance(someclass, TargetClass):
       print ("Do something with %s" % att) 
```

好吧...这行不通，所以如果模块的属性不可调用，我需要创建实例并捕获异常：

```
import mymodule as t
for att in dir(t):
   someclass = getattr(t, att)
   try:
       if isinstance(someclass(), TargetClass):
           print ("Do something with %s" % att)
   except:
       pass 
```

那么我如何只从 mymodule 中获取那些类，即某些 TargetClass 的子类，而不创建实例并捕获异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T08:46:59.153

您可以使用`issubclass`instead of `isinstance`，但本质上您会遇到同样的问题，因为 to 的第一个参数`issubclass`必须是一个类。所以你可以将它们组合起来：

```
import mymodule as t
for att in dir(t):
   someclass = getattr(t, att)
   if isinstance (someclass, type) and issubclass(someclass, TargetClass):
       print ("Do something with %s" % att) 
```

# jquery - JQGrid 网格无法正常刷新，方法 GridUnload 似乎意外工作

> ID：13173628
> 
> 赞同：0
> 
> 时间：2012-11-01T08:43:34.120
> 
> 标签：jquery, jqplot

刷新已有的JQGrid时出现意外问题：第一次grid显示没有问题，然后用户将新数据应用到grid，表头和数据表，grid的pager消失：

```
 $("#grid").GridUnload();

    grid = jQuery("#grid").jqGrid({
        data : response.list,
        datatype : "local",
        colNames : columnNames,
        colModel : [ {
            name : 'column1',
            index : 'column1',
            width : 100,
            sorttype : 'text'
        }, {
            name : 'column2',
            index : 'column2',
            width : 100,
            sorttype : 'text'
        }, {
            name : 'column3',
            index : 'column3',
            width : 100,
            sorttype : 'text'
        }, {
            name : 'column4',
            index : 'column4',
            width : 100,
            sorttype : 'text'
        } ],
        rowNum : 30,
        width : $("#grid").width(),
        height : $("#grid").height(),
        rowList : [ 30, 100, 150 ],
        pager : "#gridPage",
        sortname : 'column1',
        viewrecords : true,
        sortorder : "desc",
        shrinkToFit : false,
        rownumbers : true,
        altRows : true,
        caption : "Sample Grid",
    });

    jQuery("#grid").jqGrid('navGrid', "#gridPage", {
        edit : false,
        add : false,
        del : false,
        search : false,
        refresh : false
    });

    jQuery("#grid").jqGrid('setGroupHeaders', {
        useColSpanStyle : true,
        groupHeaders : [ {
            startColumnName : 'column1',
            numberOfColumns : 2,
            titleText : 'MergedColumn1'
        }, {
            startColumnName : 'column3',
            numberOfColumns : 2,
            titleText : 'MergedColumn2'
        } ]
    }); 
```

在这里，如您所见，在创建新的 JQGrid 网格之前，我使用方法 ' `$("#grid").GridUnload();`' 来清除它。

我很难弄清楚，也不知道是什么导致了它发生？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:00:20.593

经过多次尝试，我解决了这个问题。就我而言，如果网格需要有固定的宽度和高度，并且当它的列太多时显示水平滚动条，就像下面设置jqGrid的方法一样：

```
grid= jQuery("#grid_id").jqGrid({
    width : 1000,
    height: 800,
    shrinkToFit: false,
}); 
```

确保网格正常工作的最重要的事情是您应该将 THML 配置 'align="center"' 添加到网格附加的表中。

```
<table id="grid_id" align="center"></table> 
```

我不知道为什么这可以解决它，但无论如何，它有效。

# .net - 如何删除出现在 DNN 站点上的最大化最小化按钮

> ID：13173630
> 
> 赞同：4
> 
> 时间：2012-11-01T08:43:34.053
> 
> 标签：.net, dotnetnuke, dotnetnuke-5, dotnetnuke-module

我有一个 DotNetNuke 网站，我希望删除整个网站的最大化、最小化按钮。如果不在容器设置中选择“无”，是否还有其他方法可以做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:34:27.700

最小/最大按钮是容器的一部分，所以如果你可以编辑容器文件，你应该可以很容易地删除它们。

在容器文件中找到`<dnn:VISIBILITY ... />`标签并将其删除。容器文件将位于其中一个`Portals`子目录中（很可能`_default`，但也可能位于安装容器的特定站点的目录中）。从该目录中找到`Containers\[ContainerName]`，然后找到`.ascx`要更改的容器的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:40:56.763

最简单的方法是通过模块的设置。转到设置 -> 页面设置，然后在“折叠/展开：”中选择“无”。

在旧版本的 DNN 中“允许打印？” 被选中为默认值，我也会取消选中该框，以摆脱该图标。

# java - 以一种方法声明文件流，签入另一种方法？

> ID：13173631
> 
> 赞同：2
> 
> 时间：2012-11-01T08:43:36.517
> 
> 标签：java, filestream

我正在创建一个程序来处理不同方法中不同的文本文件。就像在一种方法中打开文件流，在另一种方法中检查它是否存在，在第三种方法中读取/写入文件并在第四种方法中关闭文件流一样。

当我在检查文件是否存在的方法中使用相同的文件流时，这似乎不太顺利。

## 主要代码

```
//Imports the java.io library so the filehandler can read and write to text files.
import java.io.*;

public class filehandler    {

//Variables for the filehandler class.
public String filetohandlename;
public String filetohandleextention;
public String filetohandlefullname = filetohandlename + "." + filetohandleextention;
public String filetohandlepath;
public String filetohandle = filetohandlepath + filetohandlefullname;

//Boolean that is true if the filehandler's "openfilestream"-method has tried to open a filestream.
//Is false as long as none filestreams have been touched.
public boolean filestreamopen = false;

//Declares a variable for the filestream to access text files.
public File filestream;
//End of variable list.

//Called to open a filestream so the server can load properties from text files.
public void openfilestream(File filestream, String filetohandle)    {
    //Open a filestream called "filestream" using the variable "filetohandle"'s value
    //as information about wich file to open the filestream for.
    filestream = new File(filetohandle);
    //Turn the boolean "filestreamopen" to true so next time the server checks it's
    //value, it knows if the filehandler has tried to open a filestream.
    filestreamopen = true;
}

//Boolean that checks if the filestream exists.
public boolean filestreamexists(String filestream)  {
    //Tell the user that a check on the filestream is going on.
    System.out.println("Checking if filestream for \"" + filetohandlefullname + "\" exists...");
    //If the filestream exists...
    if(filestream.exists()) {
        //Tell the user that the filestream exists.
        System.out.println("Filestream for \"" + filetohandlefullname + "\" exists!");
        //Make the boolean's value positive.
        return true;
    }
    //If the filestream does not exist...
    else    {
        //Tell the user that the filestream does not exist.
        System.out.println("Filestream for \"" + filetohandlefullname + "\" does not exist!");
        //Make the boolean's value negative.
        return false;
    }
}

//Called to read files and collect it's information.
public void readfile(String filetohandle)   {
    //Checks if the file that is going to be read is a configuration file.
    if(filetohandleextention == "ini")  {
        //Tell the user that a configuration file is going to be read.
        System.out.println("Extracting information from the configuration file \"" + filetohandle + "\".");
    }
}
} 
```

## 问题

问题在于检查文件是否存在。* `if(filestream.exists()) {`*
在方法“ `public boolean filestreamexists(String filestream) {`”中。

代码只是存储在我称为“源”的文件夹中的 .java-files 中，我正在使用批处理脚本来编译和运行代码：`javac -d binary source\*.java`.

我编译时得到的错误如下所示：

```
source\filehandler.java:36: error: cannot find symbol
                if(filestream.exists()) {
                             ^
  symbol:   method exists()
  location: variable filestream of type String 
```

注意：“filehandler.java”不是我程序中唯一的源代码。
我还有一个名为“服务器”的课程，但如果我将它包含在这篇文章中可能会太长而且阅读起来很无聊，但是我从课程中得到了一个非常重要的部分，我觉得我不得不包括：

server.java 文件同时请求方法“openfilestream”和“filestreamexists”。这是我在调用“filestreamexists”时使用的代码：

```
filehandlerclass.filestreamexists(filehandlerclass.filestream); 
```

这给了我另一个错误：

```
source\server.java:24: error: method filestreamexists in class filehandler canno
t be applied to given types;
                        filehandlerclass.filestreamexists(filehandlerclass.files
tream);
                                        ^
  required: String
  found: File
  reason: actual argument File cannot be converted to String by methodinvocatio
n conversation 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:12:03.613

您的问题是当您声明 filestreamexists() 时。你这样声明它：

```
filestreamexists(String filestream) { 
```

您将字符串传递给它而不是流尝试这样的事情：

```
filestreamexists(File file){ 
```

然后您需要将 if 更改为：

```
if(file.exists()) { 
```

你的文件打开也有一些错误，我认为这应该更好：

```
public File file;
public fileOpen(String fileToOpen) {
    filexists = true;
    try {
        filestream = New File(fileToOpen);
        //File exists
    } catch (IOException e) {
        filexists = false;
        // file doesn't exist
    }
} 
```

# jsf - Facelets 页面是否像 JSP 生成到 Servlet 一样生成到 Servlet

> ID：13173633
> 
> 赞同：7
> 
> 时间：2012-11-01T08:43:53.227
> 
> 标签：jsf, compilation, facelets

由于所有 JSP 在执行之前都生成/转换为 Servlet，Facelets 也是如此吗？

我正在使用 JSF 2.0 和 Facelets，并希望看到它生成的 Java 代码可能是 Servlet。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-01T11:31:57.280

不，Facelets 文件使用[SAX 解析器](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish/javax.faces/2.2.12/com/sun/faces/facelets/compiler/SAXCompiler.java#SAXCompiler)解析为 XML 树。XML 树存储在[Facelet 缓存](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish/javax.faces/2.2.12/com/sun/faces/facelets/impl/DefaultFaceletCache.java#DefaultFaceletCache)中。XML 树在[视图构建期间](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish/javax.faces/2.2.12/com/sun/faces/application/view/FaceletViewHandlingStrategy.java#FaceletViewHandlingStrategy)变成了[`UIComponent`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html)可访问的树[`FacesContext#getViewRoot()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#getViewRoot%28%29)（您可以`getChildren()`在运行时遍历）。组件树通常通过它们自己的`encodeXxx()`方法或相关联的方法生成 HTML 代码[`Renderer`](http://docs.oracle.com/javaee/6/api/javax/faces/render/Renderer.html)，以[`UIViewRoot#encodeAll()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#encodeAll%28javax.faces.context.FacesContext%29).

Facelets 文件**不**生成任何类文件。XML 树默认存储在服务器的内存中。但是，从 JSF 2.1 开始，您可以指定自定义[`FaceletCache`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/FaceletCache.html)实现，您可以`<facelet-cache-factory>`在`faces-config.xml`其中编写代码以将 XML 树存储在例如磁盘文件系统上（不过这会更慢）。

如果`<ui:debug>`在视图中使用并打开它，则可以看到后面的组件树的文本表示`UIViewRoot`。另请参阅[如何调试 JSF/EL](https://stackoverflow.com/questions/8266953/how-to-debug-jsf-el/8269559#8269559/)

### 也可以看看：

*   [为什么不预编译 JSF 页面（至少部分），而是在每次构建视图时解析、评估？](https://stackoverflow.com/questions/17894035/why-not-jsf-pages-are-precompiled-atleast-partially-but-instead-parsed-evalua/)
*   [视图构建时间是多少？](https://stackoverflow.com/questions/31890433/whats-the-view-build-time)
*   [在服务器请求之后测量 JSF 视图的呈现时间](https://stackoverflow.com/questions/33106118/measure-the-render-time-of-a-jsf-view-after-a-server-request/)
*   [为什么从 JSF2.0 开始，Facelets 优于 JSP 作为视图定义语言？](https://stackoverflow.com/questions/13092161/why-facelets-is-preferred-over-jsp-as-the-view-definition-language-from-jsf2-0-o/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:37:57.603

不完全相同的方式，它被缓存。但它不会生成 servlet 代码。

# java - 如何在 TestNG 中停止回滚？

> ID：13173634
> 
> 赞同：0
> 
> 时间：2012-11-01T08:43:52.057
> 
> 标签：java, spring, testng, rollback

我有一个这样的测试：

```
@ContextConfiguration(locations = { "file:war/WEB-INF/application-context.xml" })
public class ServiceImplTest extends AbstractTestNGSpringContextTests
{
    @Autowired
    private Service service;

    @Rollback(false)
    @Test
    public void testCreate()
    {
           .....
              //save an entity to table_A
      service.save(a);
    }
} 
```

table_A 将被清理；如何停止这种清洁动作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:29:48.140

尝试将您的测试类标记为事务性的，这将要求您也使用弹簧测试类。

```
@RunWith(SpringJUnit4ClassRunner.class),
@ContextConfiguration(locations = { "file:war/WEB-INF/application-context.xml" })
@Transactional
public class ServiceImplTest extends AbstractTestNGSpringContextTests
{
    @Autowired
    private Service service;

    @Test
    @Rollback(false)
    public void testCreate()
    {
           .....
              //save an entity to table_A
      service.save(a);
    }
} 
```

您也可以尝试使用`@TransactionConfiguration`，其中 txMgr 是您的事务管理器的名称。：

```
@RunWith(SpringJUnit4ClassRunner.class),
@ContextConfiguration(locations = { "file:war/WEB-INF/application-context.xml" })
@TransactionConfiguration(transactionManager="txMgr", defaultRollback=false)
public class ServiceImplTest extends AbstractTestNGSpringContextTests
{
  ....
} 
```

测试中的回滚功能取决于您如何管理事务，如果没有这些信息，很难给您一个可靠的答案。

# java - 使用 Cookies 保存 Spring MVC 表单字段中的值

> ID：13173635
> 
> 赞同：3
> 
> 时间：2012-11-01T08:44:00.770
> 
> 标签：java, spring, jsp, spring-mvc, cookies

假设我有一个这样的**Spring MVC**表单：

```
<form:form action="${pageContext.servletContext.contextPath}/secure/main.htm" commandName="secure/main">

    <form:input path="operatorId" cssClass="textField"/>

    <form:input path="clientId" cssClass="textField"/>

</form:form> 
```

我要做的是将这些字段值存储在 cookie 中，以便在其他用户登录系统时保存它们。它类似于`Remember Me`复选框，但没有复选框。我的控制器如下所示：

```
@RequestMapping(method = RequestMethod.POST)
public String processAuthenticate(@Valid AuthenticationForm authenticationForm,
                                  Map<String, Object> model,
                                  HttpServletRequest request,
                                  HttpServletResponse response) {

    authenticationForm = (AuthenticationForm) model.get("authenticationForm");

    Cookie[] cookies = request.getCookies();
    for (Cookie cookie : cookies) {
        System.out.println(cookie.getValue());
        if (cookie.getName().equals("clientId")) {
            authenticationForm.setClientId(cookie.getValue());
        } else if (cookie.getName().equals("operatorId")) {
            authenticationForm.setOperatorId(cookie.getValue());
        }
    }

    String clientId = authenticationForm.getClientId();
    String operatorId = authenticationForm.getOperatorId();

    Cookie cookieClientId= new Cookie("clientId", clientId);
    cookieClientId.setMaxAge(COOKIE_EXPIRY);
    response.addCookie(cookieClientId);

    Cookie cookieOperatorId = new Cookie("operatorId", operatorId);
    cookieOperatorId.setMaxAge(COOKIE_EXPIRY);
    response.addCookie(cookieOperatorId);

    return MAIN_FORM_MAPPING;
} 
```

但是当我单击按钮并调用此方法时，我的值不会被保存。这是我第一次尝试使用`Cookies`所以也许我错过了什么？我一直在关注[这个 SO](https://stackoverflow.com/questions/9785254/remember-me-in-jsp-login-page) question。但就我而言，这不起作用。有人可以建议我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:26:08.203

很抱歉误报。我做的一切都是正确的，但是我有一个方法在每个请求中返回新`AuthenticationForm`对象作为模型属性，如下所示：

```
@ModelAttribute("secure/" + MAIN_FORM_MAPPING)
public AuthenticationForm getAuthenticationForm() {
    return new AuthenticationForm();
} 
```

我有一个用于在视图中显示表单的方法：

```
@RequestMapping(method = {RequestMethod.GET})
public String showForm(Map<String, Object> model, HttpServletRequest request) {
    AuthenticationForm authenticationForm = (AuthenticationForm) model.get("secure/main");
    Cookie[] cookies = request.getCookies();
    for (Cookie cookie : cookies) {
        System.out.println(cookie.getValue());
        if (cookie.getName().equals("clientId")) {
           authenticationForm.setClientId(cookie.getValue());   //Just added this code to this method
        } else if (cookie.getName().equals("operatorId")) {
           authenticationForm.setOperatorId(cookie.getValue());
        }
    }
    return MAIN_FORM_MAPPING;
} 
```

然后我意识到这个表单对象总是新的，所以我从cookies设置的值总是在一个新表单上。我必须在方法中设置来自 cookie 的值，`showForm`并且一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:52:44.377

请检查这是否有用。 [在spring mvc 3中，如何在返回ModelAndView的同时编写cookie？](https://stackoverflow.com/questions/4888456/in-spring-mvc-3-how-to-write-a-cookie-while-returning-a-modelandview)

```
@RequestMapping("/example")
private ModelAndView exampleHandler(HttpServletResponse response) {

        response.addCookie(new Cookie("COOKIENAME", "The cookie's value"));

        return new ModelAndView("viewname");
} 
```

# c# - 从 .NET 中的代码中清除即时窗口

> ID：13173639
> 
> 赞同：2
> 
> 时间：2012-11-01T08:44:30.793
> 
> 标签：c#, .net, vb.net

有什么方法可以清除`Debug.WriteLine`代码隐藏中的函数写入立即窗口的文本？

编辑：

```
 public void ClearImmediateWindow()
   {
        EnvDTE.DTE refDTE;
        EnvDTE.Window currentActiveWindow = refDTE.ActiveWindow;
        refDTE.Windows.Item("{ECB7191A-597B-41F5-9843-03A4CF275DDE}").Activate();
        refDTE.ExecuteCommand("Edit.SelectAll");
        refDTE.ExecuteCommand("Edit.ClearAll");
        currentActiveWindow.Activate();
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:50:56.250

我找到了这个 VB 代码：

```
Sub ClearImmediateWindow()
    Dim currentActiveWindow As Window = DTE.ActiveWindow
    DTE.Windows.Item("{ECB7191A-597B-41F5-9843-03A4CF275DDE}").Activate() 'Immediate Window
    DTE.ExecuteCommand("Edit.SelectAll")
    DTE.ExecuteCommand("Edit.ClearAll")
    currentActiveWindow.Activate()
End Sub 
```

在[这个](http://forums.codeguru.com/showthread.php?393558-Clear-the-Immediate-Window-programmatically)网站上

[链接到 msdn 的 DTE](http://msdn.microsoft.com/en-us/library/aa300825%28v=vs.71%29.aspx)，因为我不熟悉 VB 语言，所以在谷歌周围搜索。我相信您可以在 google/msdn 上找到有关 DTE 的更多信息 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:53:50.397

“检查”这在 Visual Studio 中未选中：

> 工具>选项>调试>“将所有输出窗口文本重定向到立即窗口”

# php - 如何从 YouTube 中的视频 ID 中获取 Dailymotion 视频的视频缩略图？

> ID：13173641
> 
> 赞同：20
> 
> 时间：2012-11-01T08:44:41.213
> 
> 标签：php, dailymotion-api

对于 youtube，我使用这样的东西：

```
<img class="video-thumbnail" src="http://img.youtube.com/vi/<?php echo $video_id; ?>/0.jpg" alt="" width="190"> 
```

在哪里

$video_id 是来自 url 的视频的代码。

我可以为 Dailymotion 视频做类似的事情吗

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-01T08:51:54.713

您只需要`thumbnail`在链接中添加一个额外的内容。

**视频网址**

```
https://www.dailymotion.com/video/{video_id} 
```

**缩略图网址**

```
https://www.dailymotion.com/thumbnail/video/{video_id} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-01T08:52:43.903

使用 Dailymotion API

`https://api.dailymotion.com/video/VIDEO_ID?fields=field1,field2,...`

将 field1,field2 替换为

```
thumbnail_large_url (320px by 240px)
thumbnail_medium_url (160px by 120px)
thumbnail_small_url (80px by 60px) 
```

此 API 请求不需要任何访问令牌。

示例： [https ://api.dailymotion.com/video/xjfn0s?fields=thumbnail_small_url](https://api.dailymotion.com/video/xjfn0s?fields=thumbnail_small_url)

此 HTTP 请求返回带有视频图像链接的 JSON 数据。对于处理 JSON 数据，请查看[PHP Manual - JSON Decode](http://php.net/manual/en/function.json-decode.php)

***编辑*** 正如 Ravi 建议的那样，使用 [http://www.dailymotion.com/thumbnail/video/](http://www.dailymotion.com/thumbnail/video/)`video_id` 非常简单。但是不同分辨率的图片使用API

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-22T14:54:15.200

```
$id='xwxadz'; // ID DAILYMOTION EXAMPLE
$thumbnail_medium_url='https://api.dailymotion.com/video/'.$id.'?fields=thumbnail_medium_url';
$json_thumbnail = file_get_contents($thumbnail_medium_url);
$get_thumbnail = json_decode($json_thumbnail, TRUE);
$thumb=$get_thumbnail['thumbnail_medium_url'];
echo $thumb; // Output Example : http://s2.dmcdn.net/BJL4o/160x120-mzR.jpg 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-09T07:23:52.930

只是实现上述目标的一种更简单的方法。假设以下是我要下载缩略图的 url

[http://www.dailymotion.com/video/x17pcar_hadoop-tutorial-how-to-index-and-search-data-with-solr_tech](http://www.dailymotion.com/video/x17pcar_hadoop-tutorial-how-to-index-and-search-data-with-solr_tech)

从此 url 获取最后一个字符串并提取字符串 id

```
x17pcar_hadoop-tutorial-how-to-index-and-search-data-with-solr_tech 
```

现在在下划线 (_) 上拆分以上字符串。第一个是视频ID，即`x17pcar`

现在使用 id 运行以下 url 以获取缩略图

[http://www.dailymotion.com/thumbnail/video/x17pcar](http://www.dailymotion.com/thumbnail/video/x17pcar)

# android - 检查网络服务是否为空

> ID：13173642
> 
> 赞同：0
> 
> 时间：2012-11-01T08:44:44.050
> 
> 标签：android

我有一个网络服务，我想知道它是否为空？我想这样做..如何发送请求并在 textView 中打印响应？我知道必须使用`HttpConnetion` ，但我对这门课感到困惑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:16:56.343

DefaultHttpClient httpClient = new DefaultHttpClient(); HttpGet httpPost = new HttpGet(urlName);

```
 HttpResponse httpResponse = httpClient.execute(httpPost);
       HttpEntity httpEntity = httpResponse.getEntity();
       inputStream = httpEntity.getContent(); 

       BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"), 8);
       StringBuilder stringBuilder = new StringBuilder();
       String line = null;
       if ((line = reader.readLine()) != null) {
       stringBuilder.append(line + "\n");
       Data.servContent=stringBuilder.toString();
       }

       line = reader.readLine();
       inputStream.close();
      } catch (UnsupportedEncodingException e) {
           System.err.print("UnsupportedEncodingException: " + e);
       } catch (ClientProtocolException e) {
       System.err.print("ClientProtocolException: " + e);
       } catch (IOException e) {
       System.err.print("IOException: " + e);
       } catch (Exception e) {
       Log.e("Buffer Error", "Error converting result " + e.toString());
       } 
```

# android - 通过URL在android中来电时如何播放和暂停音频

> ID：13173645
> 
> 赞同：1
> 
> 时间：2012-11-01T08:44:46.043
> 
> 标签：android

```
public class AudioView extends Activity implements OnClickListener 

{

private MediaPlayer mp;

private ImageView play, pause, back, far;

private ProgressBar myProgressBar;

//private SeekBar seekbar;

// private int Screen_Id;

private boolean b = false;

private boolean status = false;

private boolean status1 = false;

private String url;

Intent frmHome;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.audio_main);
    frmHome = getIntent();
    getIntentValues();
    initUI();
    uiListener();
}

private void getIntentValues() {
    // TODO Auto-generated method stub
    //String id = frmHome.getStringExtra("Activity_Id");
    url = frmHome.getStringExtra("url");
    // Screen_Id = Integer.parseInt(id);
}

private void uiListener() {
    // TODO Auto-generated method stub
    play.setOnClickListener(this);
    pause.setOnClickListener(this);
    pause.setVisibility(android.view.View.INVISIBLE);
    back.setOnClickListener(this);
    far.setOnClickListener(this);
}

private void initUI() {
    // TODO Auto-generated method stub
    back = (ImageView) findViewById(R.id.back);
    play = (ImageView) findViewById(R.id.play);
    pause = (ImageView) findViewById(R.id.pause);
    far = (ImageView) findViewById(R.id.fwd);
    myProgressBar = (ProgressBar) findViewById(R.id.progressbar_Horizontal);
    myProgressBar.setProgress(0);
}
private Thread myThread = new Thread() {
    public void run() {
        // TODO Auto-generated method stub
        while (mp.getCurrentPosition() < mp.getDuration()) {
            try {
                // myHandle.sendMessage(myHandle.obtainMessage());
                myProgressBar.setProgress(mp.getCurrentPosition());
                // Thread.sleep(1000);
            } catch (Throwable t) {
            }
        }
    }
};

@Override
public void onAttachedToWindow() {
    //disabling the home button
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
    super.onAttachedToWindow();
}

@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();
    this.finish();
}
@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    myThread.stop();
}
@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
}
@Override
protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();
    mp = MediaPlayer.create(this,Uri.parse(FinalConstants.AUDIO_PRE_URL + url));
    myProgressBar.setMax(mp.getDuration());
}

@Override
protected void onStop() {
    // TODO Auto-generated method stub
    super.onStop();
    myThread.stop();
    mp.stop();
}
public PhoneStateListener phoneStateListener = new PhoneStateListener() {
    @Override
    public void onCallStateChanged(int state,
            String incomingNumber) {
        if (state == TelephonyManager.CALL_STATE_RINGING) {
            // INCOMING call do all necessary action to pause
            // the audio
            if (mp.isPlaying()) {
                mp.pause();
                status1 = false;
            }
        } else if (state == TelephonyManager.CALL_STATE_IDLE) {
            // Not IN CALL
            // do anything if the phone-state is idle
            if (mp.isPlaying() == status1) {
                mp.start();
            } else {
                mp.start();
                status1 = true;
            }
        }
        if (state == TelephonyManager.CALL_STATE_OFFHOOK) {
            // A call is dialing, active or on hold
            // do all necessary action to pause the audio
            // do something here
            if (mp.isPlaying()) {
                mp.pause();
            }
        }
        super.onCallStateChanged(state, incomingNumber);
    }
};// end PhoneStateListener
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.play:
        if (!b) {
            try {
                mp.prepareAsync();
            } catch (Exception e) {
                e.printStackTrace();
            }
            mp.start();
            myThread.start();
        } else {
            mp.getCurrentPosition();
            mp.start();
        }
        pause.setVisibility(android.view.View.VISIBLE);
        play.setVisibility(android.view.View.INVISIBLE);
        b = true;
        myProgressBar.setProgress(mp.getCurrentPosition());
        break;
    case R.id.pause:
        mp.pause();
        play.setVisibility(android.view.View.VISIBLE);
        pause.setVisibility(android.view.View.INVISIBLE);
        break;
    case R.id.back:
        int dur = mp.getCurrentPosition();
        int pos = (dur > 10000 ? dur - 5000 : 0);
        mp.seekTo(pos);
        break;
    case R.id.fwd:
        int curpos = mp.getCurrentPosition();
        int dur2 = mp.getDuration();
        int pos2 = (curpos + 5000 > dur2 ? dur2 : curpos + 5000);
        mp.seekTo(pos2);
        break;
    }
    TelephonyManager mgr = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
    if (mgr != null) {
        mgr.listen(phoneStateListener,
                PhoneStateListener.LISTEN_CALL_STATE);
    }
}
} 
```

# linux - 我对 ERROR_PROTECTION_VIOLATION 感到困惑

> ID：13173648
> 
> 赞同：0
> 
> 时间：2012-11-01T08:45:02.710
> 
> 标签：linux, tcp

我使用 TCP 函数“recv”来接收数据。然后使用 GetLastError() 显示错误 ID。它是 115。在 windows error.h 中它是 #define ERROR_PROTECTION_VIOLATION 115 /* 错误的用户虚拟地址 */。你能给我什么建议吗？PS：这个程序是在linux下运行的。但是我认为linux && windows中的错误代码必须和TCP错误一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:16:08.750

你在 Linux 下运行，所以它在 Windows 中所说的`error.h`完全和完全无关。在 Linux 中的`errno.h,`115 是：

```
#define EINPROGRESS 115 /* Operation now in progress */ 
```

> 我认为 linux && windows 中的错误代码必须与 TCP 错误相同。

你没有这种信念的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T08:50:49.147

错误代码当然是特定于操作系统的（因此您认为它在 Windows 和 Linux 上应该相同的想法是错误的）。在 Linux 上，您应该阅读[errno(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/errno.3.html)手册页（您可以`man 3 errno`在安装`manpages`和`manpages-dev`打包后使用命令获取）。

^([TCP](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)没有定义错误代码，AFAIK。它定义了一个协议。)

一种可移植的使用方式`errno`是使用符号名称，例如并使用或`EPERM`向用户报告错误 。请参阅[strerror(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/strerror.3.html)和[perror(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/perror.3.html)。实际的错误编号是系统特定的（即在 Linux/x86 和 FreeBSD/ia64 上可能不一样）。Posix 标准指定了符号[errno.h](http://pubs.opengroup.org/onlinepubs/000095399/basedefs/errno.h.html)名称。`strerror(errno)``perror`

[我建议你阅读像Advanced Linux Programming](http://advancedlinuxprogramming.com)和[Advanced Unix Programming](http://basepath.com/aup)这样的好书。

如果你想为 Linux、Windows、MacOSX 制作可移植的代码，你可以使用 Qt 之类的框架

在我的 Debian/Linux/AMD64 系统上，我有

```
#define EINPROGRESS 115 /* Operation now in progress */ 
```

在标题中`/usr/include/asm-generic/errno.h`

使用诸如[recv(2)之类的](http://www.kernel.org/doc/man-pages/online/pages/man2/recv.2.html)[系统调用](http://en.wikipedia.org/wiki/System_call)时，请阅读其手册页以了解其中何时会发生特定错误。

注意：`GetLastError`不是标准的 Linux 功能。它特定于您的程序，或链接到它的某个库。

# python - 检查使用 Python 的 Bottle 按下了哪个“提交”POST 按钮

> ID：13173649
> 
> 赞同：4
> 
> 时间：2012-11-01T08:45:02.710
> 
> 标签：python, html, bottle

假设您有一个包含多个提交的表单：

```
<form method="POST" action="/etc">
    <input name="foo" type="submit" value="Foo!">
    <input name="bar" type="submit" value="Bar!">
</form> 
```

检查在 PHP 中按下了哪个提交按钮很简单：

```
if (isset($_POST['foo'])) { return 'foo' }
if (isset($_POST['bar'])) { return 'bar' } 
```

什么是 Python.Bottle 等价物？

我试过了：

```
if (request.POST.get('foo')):
    return 'foo'
if (request.POST.get('bar')):
    return 'bar' 
```

但这会返回一个 KeyError，这意味着 'foo' 和 'bar' 不在 POST 字典中。

我还尝试在表单中添加一个测试字段，并在提交表单时返回该字段中的值并且效果很好，因此表单正在发布。

一件事可能很重要：表单中的提交按钮是动态生成的。

编辑：发现一个可能的问题。我正在使用 jQuery 发布和序列化表单数据，但显然 jQuery 的序列化忽略了输出中的提交按钮，这肯定会导致我所看到的。目前正在研究解决方法，但仍然感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:31:29.903

您可以尝试添加`enctype="multipart/form-data"`到您的表单吗？

```
<form action="/etc" method="post" enctype="multipart/form-data">
    <input name="foo" type="submit" value="Foo!">
    <input name="bar" type="submit" value="Bar!">
</form> 
```

根据[瓶子文档](http://bottlepy.org/docs/dev/bottle-docs.pdf)：

> `BaseRequest.forms`
> 
> `url-encoded`从或`multipart/form-data` 编码`POST`或`PUT`请求正文中解析的表单值。结果被重新调整为 `FormsDict`. 所有键和值都是字符串。文件上传单独存储在`files`.

和

> `BaseRequest.POST`
> 
> `forms`和的值`files`组合成一个`FormsDict`. 值可以是字符串（表单值）或 `cgi.FieldStorage`（文件上传）的实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T11:39:25.233

问题是 jQuery 的序列化函数忽略了提交按钮。

我通过`submitButton`向所有相关的提交按钮添加一个类（在示例中）并向`theHiddenInput`表单添加一个隐藏输入（在示例中）来解决它，然后添加以下处理程序：

```
$('.submitButton').click(function() {
    this.form.theHiddenInput.value = this.name;
}); 
```

下面的代码相当于我之前的代码：

```
if (request.POST.get('theHiddenInput') == 'foo'):
    return 'foo'
if (request.POST.get('theHiddenInput') == 'bar'):
    return 'bar' 
```

也许这将有助于将来的某人。

# php - 删除菜单不会删除 Wordpress 中的分隔符

> ID：13173651
> 
> 赞同：1
> 
> 时间：2012-11-01T08:45:25.567
> 
> 标签：php, wordpress

我正在尝试删除由 Wordpress 插件生成的菜单。删除菜单不是问题，但菜单会留下一个空的菜单分隔符/分隔符。

这是菜单的样子：

![在此处输入图像描述](../Images/8f0b0a59b8f8dcc5e02a1603ce66736a.png)

这是我删除菜单的代码：

```
remove_submenu_page('duplicator.php','duplicator.php'); //Sub menu
remove_submenu_page('duplicator.php','duplicator_diag_page'); //Sub menu
remove_submenu_page('duplicator.php','duplicator_support_page'); //Sub menu
remove_submenu_page('duplicator.php','duplicator_about_page'); //Sub menu
remove_menu_page('duplicator.php'); //Top menu 
```

然后我的菜单如下所示：

![在此处输入图像描述](../Images/948b024573df1bd4ce3f198fbcba573e.png)

左边是菜单区域分隔符，但是如何删除它们呢？

# jrebel - JRebel eclipse 旧版本，而不是更新站点中的版本

> ID：13173653
> 
> 赞同：0
> 
> 时间：2012-11-01T08:45:36.050
> 
> 标签：jrebel

如果您将[http://update.zeroturnaround.com/update-site/](http://update.zeroturnaround.com/update-site/)粘贴到您的 RAD 8 插件安装程序中，您将只能看到最新版本，它不能正常工作，并且如果我们需要强制执行，则不利于维护某些版本以确保事情总是以某种方式工作。

如何获取旧版本的插件/jrebel 插件？

现场没有信息...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:23:50.590

要获取 JRebel 本身的旧版本，您可以[从站点下载 ZIP 存档](http://zeroturnaround.com/software/jrebel/download/prev-releases/)并将插件配置为指向存档中的 jrebel.jar。

您能否解释一下，为什么需要**强制执行**某个版本？

# html - html链接显示下拉列表

> ID：13173656
> 
> 赞同：1
> 
> 时间：2012-11-01T08:45:52.957
> 
> 标签：html, drop-down-menu, hyperlink, dropbox

我需要一个链接，例如“添加”（不是按钮）。每次用户单击添加链接时，都会出现以下下拉列表。

```
 <select name="dropdown">
        <option value="a">Apple</option>
        <option value="b">Bee</option>
        <option value="c">Cat</option>
        <option value="d">Donkey</option>
        <option value="e">Elephant</option>
    </select> 
```

用户应该能够点击的“添加”链接的最大数量为 5 次。因此，如果例如用户点击“添加”链接 3 次，应该有 3 个下拉框。它必须在同一个html页面上。任何帮助将不胜感激！！。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:53:52.673

使用 javasccrtipt/jquery 来操作控件。这是如何完成的原始示例：

```
$(function() {
    $('#add').click(function() {
        $(this).before($('select:eq(0)').clone());
      if ($('select').length > 5) $(this).hide();        
    });
});​ 
```

演示：http: [//jsfiddle.net/fhqAt/1/](http://jsfiddle.net/fhqAt/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:09:06.163

```
 $(document).ready(function(){

         $("#add").click(function(e){
            var selectbox = $("select:first").clone();
            $("select:last").after(selectbox);

            if ($("select").length >= 5) 
                $(this).hide();
          });

  }); 
```

# php - Yii：如何在 tbl 为空时重定向到某个地方？

> ID：13173666
> 
> 赞同：0
> 
> 时间：2012-11-01T08:47:04.333
> 
> 标签：php, yii

我想检查tbl“是否存在数据？”。如果 tbl 中不存在数据，我想重定向到一页。如果不在所有控制器的操作中放置相同的代码，我该怎么办？

```
if(Company::model()->exists() == false)
            $this->redirect(array('site/create')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:29:04.947

如果您想在每个控制器的每个操作之前运行此逻辑，您可以覆盖[`run`](http://www.yiiframework.com/doc/api/1.1/CController#run-detail)基本控制器类的方法（通常这被命名为`Controller`；您会在`protected/components/`目录中找到它）。

以下是如何执行此操作的示例：

```
public function run($actionID) {
    if ($this->route != 'site/create' && Company::model()->exists() === false) {
        $this->redirect('site/create');
    }
    else {
        parent::run($actionID);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:08:25.610

所以你想执行一个查询，如果没有结果重定向到另一个页面？

```
$model = YourModel::model()->find("your query goes here");

if (empty($model)){
    $this->redirect("redirect/url/here");
} 
```

如果您想在每个“加载”页面上执行此操作，您可以通过创建如下所示的**init**函数将其放入 Controller.php（*protected/components/Controller.php ）：*

 **```
public function init() {
    // anything here will be executed when any controller/action is called
} 
```**

# jquery - UpdatePanel Jquery 模态对话框更新问题

> ID：13173669
> 
> 赞同：0
> 
> 时间：2012-11-01T08:47:35.400
> 
> 标签：jquery, asp.net, updatepanel

我有 Jquery 对话框，其中更新面板中有州和地区下拉列表，如下所示

```
<tr>
<td class="newLabel"><span >State </span></td><td>
   <asp:DropDownList ID="Dd_state" class="keyitem" runat="server" style="width:200px;"> 
    </asp:DropDownList></td> </tr>
<asp:UpdatePanel ID="updPnd_district" runat="server" onload="updPnd_district_Load">
    <Triggers> 
         <asp:AsyncPostBackTrigger  ControlID ="Dd_state" EventName="SelectedIndexChanged" />
   </Triggers>
<ContentTemplate>
    <tr><td class="newLabel"><span >District </span></td><td>
   <asp:DropDownList ID="dd_district" runat="server" style="width:200px;" class="keyitem"> </asp:DropDownList></td> </tr>
    </ContentTemplate>
</asp:UpdatePanel> 
```

我在按钮的单击事件上打开此对话框，该按钮将调用以下函数

```
function showNewDialog() {
   $('#<%=empnew.ClientID%>').dialog({ autoOpen: true ,modal: true, height: 550, width: 850 });
   $('#<%=empnew.ClientID%>').parent().appendTo($("form:first"));

} 
```

我的问题是在第一次从状态下拉回复后，更新面板不起作用，并且在回发后 div 的内容显示在页面中（对话框之外）

我的代码有什么问题

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:26:23.907

```
function showNewDialog() {
  var dlg = $('#<%=empnew.ClientID%>').dialog({ autoOpen: true ,modal: true, height: 550, width: 850 });
   dlg.parent().appendTo($("form:first"));

} 
```

# git - 交付用于测试的 Git 分支

> ID：13173673
> 
> 赞同：2
> 
> 时间：2012-11-01T08:48:08.913
> 
> 标签：git, branching-and-merging

我正在使用 Git 进行开发和相当简单的工作流程。我有两个远程分支：“测试”和“暂存”。我在本地分支中开发功能，将其合并到“测试”以提供测试人员测试的功能。在测试功能时，我将本地分支合并到“暂存”。

重要的工作流程条件是我们没有发布 - 我们必须单独部署功能。

在发生冲突之前，它可以完美运行。

我的工作流程认为，由于永久性条件的变化，我必须在功能开发过程中多次交付相同的功能进行测试。

问题是，如果我有 5 个功能交付进行测试并且在第一次交付时遇到合并冲突，我必须再次解决所有剩余的 4 个功能交付的冲突，以保持我的分支隔离。最糟糕的是，在大多数情况下，我得到的所有 5 个冲突都是相同的（相同的代码段会发生冲突）。

有没有办法在第一次合并时解决冲突？你如何交付你的分支供另一个人测试？

非常感谢任何帮助和想法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:06:17.413

如果在交付到同一个远程仓库时发生冲突，最好由远程仓库（git pull）的集成商完成交付，以便激活[`git.rerere`](http://git-scm.com/2010/03/08/rerere.html).

`testing`当其他 4 个功能被拉入分支时，这将使 repo 能够记住冲突解决方案，并将相同的解决方案应用于任何类似的冲突。

# ipad - iPad > Appcelerator > Alloy > 如何为特定控制器加载不同的视图？

> ID：13173678
> 
> 赞同：3
> 
> 时间：2012-11-01T08:48:29.927
> 
> 标签：ipad, titanium, appcelerator

希望快速提问......我只是在文档中找不到这个，这可能意味着我不应该这样做。

假设我有一个“源”控制器和一个“源”视图。

通常我会做这样的事情：

```
var sources = Alloy.createController('source');
$.index.add(sources.getView()); 
```

现在，我希望消息来源根据 ipad 的方向有不同的视图。但它仍然是相同的信息，只是布局略有不同。

我想我也许可以做这样的事情：

```
var sources = Alloy.createController('source');
Ti.Gestures.addEventListener( "orientationchange", function(){
    if(Ti.Gestures.isPortrait()){
       $.index.add( sources.getView('sources/portrait') );
    }else{
       $.index.add( sources.getView('sources/landscape') );
    }
}); 
```

显然我必须删除我不使用的视图，但这是一般的想法。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T04:08:23.820

我推荐后一种方法（隐藏/显示），而不是向堆栈添加更多视图。考虑一个带有 AJAX 和响应式设计的传统 HTML 网页——您可以使用 JS/CSS 来完成此操作，而不是重新加载页面。

假设您只想要一个额外的横向视图

XML: `<View id="ExtraLandscapeView">...<View>`

技术支持： `"#ExtraLandscapeView" : { /* Styles here */ }`

JS：

```
if(Ti.Gestures.isPortrait()){
    $.ExtraLandscapeView.visible = false;
} else{
   $.ExtraLandscapeView.visible = true;
} 
```

# yii - 从 YII 中的请求字符串访问参数？

> ID：13173689
> 
> 赞同：0
> 
> 时间：2012-11-01T08:49:13.827
> 
> 标签：yii

假设我有以下观点：

```
http://localhost/site/www/index.php/products/view/1 
```

然后

```
Yii::app()->request->getUrl() ==> /site/www/index.php/products/view/1 
Yii::app()->getController()->id ==> products
Yii::app()->getController()->getAction()->id; ==> view 
```

如何访问“/1”部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:20:48.807

有两种方法可以获取 id 值。假设您为 Url 定义了以下规则：

```
'<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>', 
```

然后你可以在php中使用GET方法获取ID的值：

```
$id = $_GET['id']; 
```

或者您可以在控制器中为该方法定义一个参数，该参数将自动成为您需要的 id：

```
public function viewAction($id) {
    //here $id is equal to $_GET['id']
} 
```

请注意，这些参数的名称必须与我们期望的 $_GET 名称完全相同

*   [http://www.yiiframework.com/doc/guide/1.1/en/topics.url](http://www.yiiframework.com/doc/guide/1.1/en/topics.url)
*   [http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#action](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#action)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:12:51.400

您可以使用以下方法将其作为**$_GET**变量访问：

```
$_GET['id'] 
```

你怎么问？由于 Yii 默认配置（protected/config/main.php）中设置的规则

```
'<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>', 
```

该规则指定了一个*{controller}/{action}/{a value, named id}*。您可以根据需要自定义这些规则，请在此处阅读更多信息：

*   [http://www.yiiframework.com/doc/guide/1.1/en/topics.url](http://www.yiiframework.com/doc/guide/1.1/en/topics.url)
*   [http://yiitutorials.net/easy/easy-url-rewriting-with-yii](http://yiitutorials.net/easy/easy-url-rewriting-with-yii)

# android - 插入 SQLite 时出现 NullPointerException

> ID：13173695
> 
> 赞同：0
> 
> 时间：2012-11-01T08:50:04.377
> 
> 标签：android, sqlite, nullpointerexception

下面的sql代码

```
SQLiteDatabase db = this.getWritableDatabase();

        if(getCartItems(cart.id).size()>0){

            ContentValues values = new ContentValues();

            values.put(COL_ITEM_ID, cart.id);
            values.put(COL_CART_ADDDATE, cart.addDate);
            long re = db.insert(TABLE_NAME_CART, null, values);
            db.close();

            return re > 0;
        }else{
            db.close();
            return false;
        } 
```

此代码返回以下错误：

```
java.lang.NullPointerException
at android.database.sqlite.SQLiteStatement.releaseAndUnlock(SQLiteStatement.java:290)
at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:115)
at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1718)
at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1591)
at phoenix.metro.uis.DBHelper.insertCart(DBHelper.java:120)
at phoenix.metro.uis.SearchActivity$4.onClick(SearchActivity.java:171)
at android.view.View.performClick(View.java:3511)
at android.view.View$PerformClick.run(View.java:14105)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

以下代码中的错误：

```
long re = db.insert(TABLE_NAME_CART, null, values); 
```

# graphics - DirectX - BackBuffer 概念

> ID：13173699
> 
> 赞同：1
> 
> 时间：2012-11-01T08:50:36.920
> 
> 标签：graphics, directx, gdi

我是 DirectX 的新手，花了一些时间阅读文档后，我才知道有两个视频缓冲区，即 FrontBuffer 和 BackBuffer。我正在执行 POC 以验证最快的屏幕捕获方法，并且根据某些消息来源的 BackBuffer 可能会做到这一点。（FrontBuffer 访问对我来说太慢了）

但不幸的是，互联网上没有那么多好的文章详细解释这个理论。如果得到解答，我有一些问题也可能对其他人有所帮助。

1.  后台缓冲区只是应用程序可以写入的表面吗？
2.  后台缓冲区应用程序是特定的吗？即每个 DX 应用程序的单独后台缓冲区？
3.  如果我正在运行一些使用 DirectX 在屏幕上显示一些数据的应用程序，我可以捕获它的后台缓冲区吗？（根据 FRAPS 分析，可以将 DLL 连接到应用程序来执行此操作。但是有什么指导方针吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:04:50.580

1.  是的。根据您使用的 DirectX 版本，后台缓冲区是作为渲染目标创建的表面或纹理。
2.  是的。每个应用程序都有自己的后端和前端缓冲区。应用程序甚至不限于使用一个后台缓冲区。相反，它可以使用三个或更多缓冲区或根本不使用后台缓冲区。
3.  好吧，我不是挂钩 DirectX 应用程序的专家，但这应该是可能的。基本上，您将使用`Present`在呈现缓冲区之前捕获缓冲区的方法替换该方法。有关一些附加信息，请参见[此处](https://stackoverflow.com/questions/1994676/hooking-directx-endscene-from-an-injected-dll)。

# android-sqlite - Android :: SQLite，没有找到这样的列？

> ID：13173702
> 
> 赞同：7
> 
> 时间：2012-11-01T08:50:39.197
> 
> 标签：android-sqlite

嘿，我是一个新手 Androidian，希望得到一些帮助吗？

android.database.sqlite.SQLiteException：没有这样的列：asd：，编译时：DELETE FROM labels WHERE name=asd

这是我面临的错误，这是代码：

这是 DBhelper 中的方法：

```
/**
 * Delete a label table
 * */
public void deleteLabel(String label) {
    SQLiteDatabase db = this.getWritableDatabase();

    // ContentValues values = new ContentValues();
    // values.remove(label);

    // Deleting Row
    db.delete(TABLE_LABELS, KEY_NAME + "=" + label, null);
    db.close(); // Closing database connection
} 
```

这是调用该方法的主要活动代码：

```
// for spinner onItemListener
// and here is what label is

final String label = parent.getItemAtPosition(position).toString();

Button dialogDeletelButton = (Button) dialog
                .findViewById(R.id.deleteButton);
        dialogDeletelButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // database handler
                DatabaseHandler db = new DatabaseHandler(
                        getApplicationContext());

                // inserting new label into database
                db.deleteLabel(label);

                // Hiding the keyboard
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(inputLabel.getWindowToken(), 0);

                // loading spinner without the deleted data
                loadSpinnerData();

            }
        }); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-01T08:57:11.093

您几乎肯定需要引用`'asd'`（即`label`代码中的变量）。如果它被引用，它是一个与列进行比较的字符串`name`。

如果它没有被引用，SQL 只是把它当作另一个列名。

你可以在你的活动中这样做：

```
db.deleteLabel ("'" + label + "'"); 
```

但更改辅助函数可能更简洁：

```
db.delete (TABLE_LABELS, KEY_NAME + "='" + label + "'", null); 
```

因为看起来您可能想在其中的某个位置使用未引用的标签做一些事情（`ContentValues`当前被注释掉的东西）。

# shell - 进入目录的 Shell 脚本（文件夹名称包含空格）

> ID：13173706
> 
> 赞同：1
> 
> 时间：2012-11-01T08:50:46.480
> 
> 标签：shell, unix, directory

我正在编写一个 shell 脚本来输入多个文件夹。我目前将文件夹的名称存储在 shell 变量中`path="October\ @012/"`。如果我这样做`cd $path`了，我会收到错误**bash: cd: October\: No such file or directory**

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T12:21:15.153

这是双引号的（主要）功能，在 csh 和 *sh shell 中也是如此。

```
cd "$TARGET" 
```

应该这样做。

Shell 变量在 within 中展开`"..."`（与 within 不同`'...'`），但是当 shell 解析命令行以构造传递给程序的字符串时，引用的文本被视为单个参数。

例如：

```
% ls -F
October @012/
% TARGET="October @012"
% cd $TARGET
bash: cd: October: No such file or directory
% cd "$TARGET"
% pwd
/tmp/t/October @012
% 
```

简单的！

您在最初的示例中做错了什么是转义引号*内的空格。*空格不必转义两次，因为这个多余`\`的出现在引号内，它只是在 TARGET 变量中插入一个反斜杠。例如：

```
% TARGET="October\ @012"  # wrong!
% ls
October @012/
% cd $TARGET
bash: cd: October\: No such file or directory
% cd "$TARGET"
bash: cd: October\ @012: No such file or directory
% 
```

`TARGET`仅当目录名为时，此设置才有效`October\ @012`，其中带有反斜杠（不推荐！）：

```
% mkdir October\\\ @012
% ls -F
October\ @012/
% cd "$TARGET"
% pwd
/tmp/t/October\ @012
% 
```

（**编辑**添加示例）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T08:54:52.160

编辑：我最初写信建议使用花括号。我在半夜醒来并修改了答案时写了这篇文章。

首先，它实际上取决于您在**哪个**shell 中编写脚本。如果是 bash，那么您可以尝试在变量名周围使用引号：

```
TARGET="October @012"

cd "$TARGET" 
```

这也可以在其他 shell 中工作。我建议你试试看。

编辑：

在重新检查这一点时，您似乎在逃避表达中的错误部分。试试这个：

```
path="October \@012"

cd "$path" 
```

# sql - 优化Oracle order by query

> ID：13173709
> 
> 赞同：6
> 
> 时间：2012-11-01T08:50:50.273
> 
> 标签：sql, oracle, optimization, query-optimization, partitioning

我有一个大约 500 万行的表，如下所示：

**erp_in：**

```
corr_id varchar(50) (almost Unique)
corr_type nvarchar(1) (4 distinct values)
interface varchar(20) (around 10 distinct values)
indate DateTime 
```

在（corr_id、interface 和 indate）上有 3 个不同的索引
而且我还有另一个表，我通常将它与原始表连接，大约有 100000 行

**Erp_In_failed：**

```
corr_id
interface
error (clob)   
input (clob) 
```

带有索引（corr_id 和接口）

我要优化的查询很简单：

```
SELECT a.corr_id, a.interface, a.indate, b.error 
FROM erp_in a left join erp_in_failed b on a.corr_id = b.corr_id and a.interface =          b.interface
Order by a.indate desc; 
```

如果我删除订单，查询不会花费那么长时间，但订购数据大约需要 3 分钟，如果不是更多的话。

我可以做些什么来优化查询？我正在考虑分区/将旧数据删除到历史表/可能创建一个序列主键并按它或您想到的任何其他东西排序......

**编辑：**
执行计划说全表扫描，并不是连接需要这么长时间，而是顺序。
即使这个查询也需要永远：

```
SELECT * FROM erp_in
ORDER BY indate; 
```

我尝试过使用 Paging，但这也不起作用，并且需要几分钟才能获得 20 个结果，也许我做错了？

如果我在 indate 字段上添加 WHERE 子句，它会使用索引，但仅当它小于 20 天时，除此之外的任何内容仍使用全表扫描。（即使有 40 天，添加 INDEX 提示使查询运行得更快，但仍然不够）。

只是为了好奇，我有一个包含 100 万行的简单表，order by 需要几秒钟，有什么区别？100 万是否足以在 RAM 中对其进行排序？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T09:49:21.517

您正在对 500 万行进行排序，其中包括大约 10 万个 clob。您不太可能在内存中做到这一点。如果您在带有统计信息的 SQL*Plus 中运行查询，您应该会看到查询大量写入磁盘。

提高性能的一种方法是向缓冲区缓存添加更多 GB，但这可能是一个昂贵的选择，也不是一个快速的选择。

建立一个复合索引`erp_in(indate desc, corr_id, interface)`也会有所帮助，因为驱动表的结果将被预先排序，因此排序应该花费更少的工作。INDATE 分区可能有类似的效果，但分区是企业版的额外收费，因此不是一个便宜的修复（获取更多内存可能会便宜很多）。

您对归档旧数据的引用表明您实际上并不想检索所有记录。如果是这种情况，那么使用 WHERE 子句减小结果集的大小会很有帮助。调整某些东西的最简单方法是首先不做工作。

添加主键并按其排序不会减少实际排序所需的工作量。

* * *

> “所以我应该按日期分区吗？如果不在 INDATE 字段上添加 WHERE 子句会有所帮助”

这取决于。分区引入了表的一些物理组织，因此行将（至少）需要较少的排序。少多少取决于分区的粒度：按一天的范围进行分区，并且表几乎已经处于 INDATE 顺序，按一年的范围进行分区，而且情况要少得多。

但是，请记住，分区主要不是性能选项。它是管理数据（尤其是加载和可用性）的一个选项。事实上，它可能会降低某些查询的性能，这些查询不适合分区键应用的排序。

那么，你应该按日期分区吗？不是我们能回答的问题。回答它需要对您的系统有深入的了解，而我们却缺乏这种知识。但是，如果您拥有许可证，那么您当然应该进行调查和基准测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:27:28.960

您真的要向 Web 服务器获取这么多行吗？如果是，请检查您的代码以缩小到所需的范围。

1.  尝试根据日期时间将旧数据归档到另一个表。仅在需要时重新编写逻辑以获取较旧的数据。
2.  正如其他人所提到的，在大多数情况下，索引/键应该会有所帮助

如果您不能执行上述任何操作，另一个丑陋的解决方案（不确定它是否会变得更糟）是创建内存表，过滤并获取所需的内容，然后获取 CLOB 数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:05:21.220

您是否尝试过其他索引？我做了类似的事情，并且在该`indate DateTime`字段上使用了聚集索引。这是在大多数查询将被限制在某个时间段的前提下，并且 B 树的重新平衡不会成为问题，因为大多数插入会随着键值的增加而增加。获取查询的执行计划并查看是否无法对其进行优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T09:42:32.343

如果`(indate desc, corr_id, interface)`在 erp_in 上创建复合索引，将使用该索引并且查询会更快。

但是您最好找到一种方法来最小化要排序的数据大小。

例如仅获取最后两天：

```
SELECT a.corr_id, a.interface, a.indate, b.error 
FROM erp_in a left join erp_in_failed b 
     on a.corr_id = b.corr_id and a.interface = b.interface
WHERE indate > trunc(sysdate - 1)
Order by a.indate desc; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-22T12:19:23.403

我想分享我的经验，我遇到了问题作者提出的类似问题。

我的查询很长，它包括几个表和连接，在这里我只是想用简单的查询来展示我的场景。它返回大约 80,0000 条记录。我发现 order by 是我查询中的瓶颈部分。

```
select column1, colum2 from table order by colum2 
```

当我检查执行计划时，就像我的查询使用 column1 上的索引一样。

我只是按顺序包含了 column1。

```
select column1, column2 from table order by column2, column1 
```

它对我有帮助，样本阅读就像在更改之前需要 8 秒，在上述更改之后只需要 2 秒。

我发现该[链接](http://use-the-index-luke.com/sql/sorting-grouping/indexed-order-by)对此非常有帮助。

# angularjs - 是否可以将睾丸（业力）与角度场景混合？

> ID：13173719
> 
> 赞同：9
> 
> 时间：2012-11-01T08:51:37.840
> 
> 标签：angularjs, jasmine, karma-runner, angular-scenario

Testacular（现在是 Karma）很棒，角度场景也很棒。然而，将它们一起使用是一项挑战。Testacular 中有一个 ANGULAR-SCENARIO-ADAPTER，但这会破坏简单的测试。如果您自己包含 angular-scenario.js，Testacular 将根本不运行任何测试。有没有人让它正常运行？

## 角度场景适配器

我尝试将它与一个简单的测试一起使用，但我看到了一些奇怪的行为：

测试：

```
describe('Simple', function(){
    it('should compare strings', function(){
        expect('foo').toBe('foo');
    });
}); 
```

配置的正常行为：

```
files = [
  JASMINE,
  JASMINE_ADAPTER,
//    ANGULAR_SCENARIO,
//    ANGULAR_SCENARIO_ADAPTER,
    'tests/lib/angular/angular.js',

    'tests/sample.js'
]; 
```

输出：

```
$ testacular start
info: Testacular server started at http://localhost:9876/
info (launcher): Starting browser ChromeCanary
info (Chrome 25.0): Connected on socket id KRwEUtKtiaJs3MoiEsNg
Chrome 25.0: Executed 1 of 1 SUCCESS (0.061 secs / 0.003 secs) 
```

添加 ANGULAR 适配器配置时：

```
files = [
  JASMINE,
  JASMINE_ADAPTER,
    ANGULAR_SCENARIO,
    ANGULAR_SCENARIO_ADAPTER,
    'tests/lib/angular/angular.js',

    'tests/sample.js'
]; 
```

输出是：

```
$ testacular start
info: Testacular server started at http://localhost:9876/
info (launcher): Starting browser ChromeCanary
info (Chrome 25.0): Connected on socket id 5YZA2fSuNXjmI-yRFGF6
Chrome 25.0 Simple should compare strings FAILED
        expect undefined toBe "foo"
        /Users/iwein/projects/epec/spa/tests/sample.js:3:9: expected "foo" but was undefined
Chrome 25.0: Executed 1 of 1 (1 FAILED) (0.195 secs / 0.018 secs) 
```

## 添加 angular-scenario.js 并希望 JASMINE-ADAPTER 可以处理它。

我也试图包括`angular-scenario.js`我自己，但这是一个死胡同。

```
//inside testacular.conf.js
files = [
   JASMINE,
   JASMINE_ADAPTER,
   'tests/lib/angular/angular.js',
   'tests/sample.js'
]; 
```

我得到输出：

```
$ testacular start
info: Testacular server started at http://localhost:9876/
info (launcher): Starting browser ChromeCanary
info (Chrome 24.0): Connected on socket id uEzVQ6tqSu7M7tak4F6v
Chrome 24.0 Array #indexOf() should return -1 when the value is not present FAILED
    Expected true to be false.
    Error: Expected true to be false.
        at null.<anonymous> (/..../tests/sample.js:4:17)
Chrome 24.0: Executed 1 of 1 (1 FAILED) (0.07 secs / 0.004 secs) 
```

如果我在混合中添加角度场景：

```
//inside testacular.conf.js
files = [
  JASMINE,
  JASMINE_ADAPTER,
  'tests/lib/angular/angular.js',
  'tests/lib/angular/angular-scenario.js',
  'tests/sample.js'
]; 
```

测试根本没有运行：

```
 $ testacular start
 info: Testacular server started at http://localhost:9876/
 info (launcher): Starting browser ChromeCanary
 info (Chrome 24.0): Connected on socket id GcyCTxuvhyFcCaE14BEP
 Chrome 24.0: Executed 0 of 0 SUCCESS (0.116 secs / 0 secs) 
```

有没有人让它正常运行？变身是怎么`true`回事`undefined`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-01T09:02:24.650

**您不能将 2 在一个睾丸配置中混合**。您应该做的是**准备 2 种不同的测试配置**：一种用于运行单元测试，另一种用于运行 e2e 测试。

然后，您将**运行 testacular 两次**：首先执行单元测试，然后执行 e2e 测试。通常我会非常非常频繁地运行单元测试（每次保存！），而 e2e 在提交之前进行测试（因为这些测试运行时间更长）。我们希望从单元测试中获得尽可能快的反馈，同时 e2e 测试提供最终的安全网，并确保单元测试难以覆盖的应用程序部分（导航、UI 等）仍然正常工作。

这是 AngularJS 种子使用的技术，您可以在此处查看相应的定义：[https ://github.com/angular/angular-seed/tree/master/config](https://github.com/angular/angular-seed/tree/master/config)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-08T17:15:39.770

原因是您正在使用 angular-scenario 的版本`true`（不是 Jasmine 的版本），它采用一个名为的参数，该参数将在页面加载后评估为页面元素或属性。`undefined``expect`*`future`*

Angular-scenario 期望*`future`*参数是一个具有`value`属性的对象。因此，当您传入`true`它时，它会尝试访问`true.value`评估为`undefined`.

`expect({value: true}).toEqual(true);`工作正常。

# woocommerce - Nextag 用于 woo 商务的 ROI 优化器代码。如何从我的订单号中删除 # 符号？

> ID：13173720
> 
> 赞同：1
> 
> 时间：2012-11-01T08:51:39.087
> 
> 标签：woocommerce, roi, optimization

您好我正在尝试将 Nextag 的 Nextag ROI 优化器代码安装到我的 woocommerce 主题/插件中。（thankyou.php 模板）它正在工作，但我无法摆脱最终输出中的 # 符号。如果包含 # 符号，Nextag 统计信息将不会显示我的订单号。（至少这是我的工作理论，因为我的订单号不会填充。）

所以它在报告时返回 #1234 而不是 1234。我怎样才能摆脱这种情况，以便获得适当的报告。问题中的一个变量或函数是“var order”

一旦这个问题得到回答，我相信我也可以为所有其他具有免费跟踪器的 PPC 引擎执行此操作，并且您将来会得到更多帮助。

如果我的术语不足，我很抱歉，因为我不是任何类型的程序员。

请注意，当我查看源代码时它正在工作，只是我需要摆脱订单号中的#。

感谢您的时间。

```
 <!--
    /* NexTag ROI Optimizer Data */
    var id = 'hidden';
    var rev = '<?php echo $order->order_total; ?>';
    var order = '<?php echo $order->get_order_number(); ?>';
//-->
</script>
<script type="text/javascript" src="https://imgsrv.nextag.com/imagefiles/includes/roitrack.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T22:38:20.863

The guys at woothemes helped me out. So to make the Nextag ROI optimizer work with woocommerce you need to go to the thankyou.php and add this code right below `<p><?php _e('Thank you. Your order has been received.', 'woocommerce'); ?></p>` Make sure ####### is your unique merchant ID with nextag.

If you do not know how to change the thank you php you can use notepad.exe stock with windows or open it with a free editor called notepad++ which is what I used. Then you can overwrite the old thankyou.php OR copy the PHP to the area that allow you to protect changes.(outside of the scope of this answer) You should know that if the woocommerce plugin is updated you will have to reload the code back into thankyou.php.

Your snippet is below have fun.

```
 <script type="text/javascript">
<!--
    /* NexTag ROI Optimizer Data */
    var id = '#######';
    var rev = '<?php echo $order->order_total; ?>';
    var order = '<?php echo $order->id; ?>';
//-->
</script>
<script type="text/javascript" src="https://imgsrv.nextag.com/imagefiles/includes/roitrack.js"></script> 
```

It should also be said that this code can be enhanced further to contain other product data. So if know know those pieces and can really trick this code out. Post it!

# solr - 查询时间不显示来自两个字段的欺骗

> ID：13173730
> 
> 赞同：1
> 
> 时间：2012-11-01T08:52:26.497
> 
> 标签：solr

Solr 索引有两个字段，我不想显示任何欺骗。我可以通过分组来防止欺骗出现在一个字段或另一个字段上，但是[Solr 目前不支持在多个字段上进行分组](https://issues.apache.org/jira/browse/SOLR-2526)。然而，虽然必须防止其中一个字段在完全匹配上重复，但另一个可以防止在模糊（几乎）匹配上返回重复。请注意，这些字段非常短，通常只有一两个单词。

请注意，受骗者应保留在索引中，我只需要防止受骗者出现在结果中。我会简单地在应用程序中过滤它们，但这会破坏分页。

如何在 Solr 4 中的两个字段上防止欺骗（甚至接近欺骗）？

谢谢你。

**例子：**

没有欺骗`First Name`，也没有欺骗`Last Name`。这些是文件：

*   名字：约翰
*   姓名：列侬
*   乐队：披头士

*   名字：约翰
*   姓名：琼斯
*   乐队：齐柏林飞艇

*   名字：尼克
*   姓名：列侬
*   乐队：独立

*   名字：尼克
*   姓名：梅森
*   乐队：平克弗洛伊德

首先，我们将返回第一个文档：

*   名字：约翰
*   姓名：列侬
*   乐队：披头士

第二份文件将不会被退回，因为它是`First Name`现场的骗子。

第三份文件不会被退回，因为它是`Last Name`场上的骗子。

第四个文档不是`First Name`任何`Last Name`返回字段的副本，因此它被返回：

*   名字：尼克
*   姓名：梅森
*   乐队：平克弗洛伊德

我们现在有两个文件。

# windows-8 - BackgroundDownloader 中的进度条 (Windows 8)

> ID：13173736
> 
> 赞同：2
> 
> 时间：2012-11-01T08:52:55.153
> 
> 标签：windows-8, microsoft-metro, progress-bar

我正在使用 BackgroundDownloader 从 URL 下载文件。我必须在进度条中显示每个下载百分比（如 1%、2%、3%、...）并显示为文本。但是每次下载（只有一个文件）我都会得到一堆下载百分比（比如 40%、60% ......）。这是我的代码：

```
private async void btnDownload_Click(object sender, RoutedEventArgs e)
    {
        Uri source;
        StorageFile destinationFile;
        StorageFolder folder;
        string destination = "SampleImage.png";
        if (!Uri.TryCreate(txtUrl.Text.Trim(), UriKind.Absolute, out source))
        {
            txtUrl.Text = "Pls provide correct URL...";
            return;
        }
        try
        {
            folder = await ApplicationData.Current.LocalFolder.CreateFolderAsync("SampleFolder", CreationCollisionOption.OpenIfExists);
            destinationFile = await folder.CreateFileAsync(destination, CreationCollisionOption.GenerateUniqueName);
        }
        catch
        {
            txtProgress.Text = "Opss something went wrong... try again....";
            return;
        }

        BackgroundDownloader downloader = new BackgroundDownloader();
        DownloadOperation download = downloader.CreateDownload(source, destinationFile);

        if (download != null)
        {
            try
            {
                var progress = new Progress<DownloadOperation>(ProgressCallback); // for showing progress
                await download.StartAsync().AsTask(cancelProcess.Token, progress);
            }
            catch (TaskCanceledException)
            {
                txtProgress.Text = "Canceled";
            }
            catch(Exception)
            {
                txtProgress.Text = "Something went wrong pls try again....";
            }
        }
    }
//for showing progress
private void ProgressCallback(DownloadOperation obj)
    {
        double progress = 0;
        if (obj.Progress.BytesReceived > 0)
        {
            progress = obj.Progress.BytesReceived * 100 / obj.Progress.TotalBytesToReceive;
            if (progress > 0)
            {
                txtProgress.Text = string.Format("Downloading your file.... {0}%", progress);
                pbDownloading.Value = progress; // passing progress bar value
            }
        }
        else
        {
            txtProgress.Text = "Check your internet connection...";
        }
    } 
```

我怎样才能获得下载的每一个进度百分比......？或任何其他最好的方法来做到这一点......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:39:48.307

因此，您需要*平滑地*更改下载进度（以整数百分比衡量）而不是跳跃。然后，您不应该按原样显示原始下载进度，而是创建将显示进度增加 1% ( `nextPercent`) 的方法，并以与下载速度成比例的频率调用它。

首先，您需要设置计时器来检查下载状态。定时器频率可以约为每秒 10 次，这是可以更新下载进度的速度。下载处理程序应更新内部变量`int DownloadPercent`并以每毫秒百分比测量下载速度：`double DownloadSpeed = DownloadPercent/(DateTime.Now - DownloadStartTime).TotalMilliseconds;`
然后 DispatcherTimer 回调将每秒检查下载进度 10 次，如果显示的进度小于实际进度并且自上次 UI 更新以来已经过去了足够的时间，则调用 nextPercent。现在，您如何确定足够的时间：

```
DateTime lastUIUpdate; //class variable, initialized when download starts and UI is set to 0%
int DisplayedPercent;

void nextPercent(object sender, object args) {
    if (DisplayedPercent == DownloadPercent) return;

    double uiUpdateSpeed = (DateTime.Now - lastUIUpdate).TotalMilliseconds / (DisplayedPercent + 1);
    if (uiUpdateSpeed < DownloadSpeed) {
         nextPercent();
    }
} 
```

我确信这需要一些调整，但你应该明白这一点。祝你好运！

# javascript - 如何使用按钮清除 jquery 可放置元素

> ID：13173739
> 
> 赞同：0
> 
> 时间：2012-11-01T08:53:05.900
> 
> 标签：javascript, jquery, css

我有一个小问题，我试图通过使用按钮擦除附加到我的可放置 div 中的内容。

```
$(":button").click(function(){
        $(ui.draggable).remove.fadeOut(20000);        
    }); 
```

我无法弄清楚如何定位正在删除的元素，如[这里](http://jsfiddle.net/Kxtvg/124/)所见。我希望删除附加的元素，并且我希望正在使用的按钮消失。我将不胜感激任何帮助我解决此问题的提示以及任何前进的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:33:47.193

首先，您必须指定一个用于附加按钮的 var：`var hui = $("<input type='button' name='Sub' value='clear'/>");`

然后你可以触发点击

```
$(hui).click(function(){
    alert(hui.length) ;
}); 
```

[http://jsfiddle.net/Kxtvg/128/](http://jsfiddle.net/Kxtvg/128/)

在此之后，您必须再指定一个 var 才能获得 ui.draggable

见工作变体：http: [//jsfiddle.net/Kxtvg/130/](http://jsfiddle.net/Kxtvg/130/)

原谅我的英语...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:50:08.350

如果您希望单击事件委托给将来的事件，请查看使用 jquery .on()。此外，当您调用 .remove 时，该元素将被删除，您将永远不会看到淡出效果。看看使用以下内容：

```
$(":button").on("click", function() {
    $(ui.draggable).fadeOut(20000, function() {
        $(this).remove();
    });
});​ 
```

# asp.net-mvc - web api vs asp.net mvc api

> ID：13173742
> 
> 赞同：0
> 
> 时间：2012-11-01T08:53:29.417
> 
> 标签：asp.net-mvc, asp.net-web-api, mef

我想编写一个应用程序，它需要有两件事：1\. REST API，以便其他人可以检索数据并以自己的方式显示 2\. 默认显示是使用 ASP.NET MVC 的网页

所以有一些方法： 1\. 创建 2 个单独的项目，1 个用于 Web API，另一个是 ASP.NET MVC。MVC 将与 Web API 对话以获取数据并呈现视图 2\. 创建单个 ASP.NET MVC 项目。并创建一个派生自 APIController 的类。然后做与上面类似的事情。

据我了解，两种方法的性能应该相同。但是读完[这篇文章](http://encosia.com/asp-net-web-api-vs-asp-net-mvc-apis/)后，我不太确定。

引用文章：

> “你可以通过为 API 创建一个单独的项目来使用 ASP.NET MVC “API”来做到这一点，但是你仍然要为通过 MVC 的渲染管道过滤的 API 请求付出性能损失。在我的简单负载测试中在本地机器上，我发现托管在控制台应用程序中的 Web API 端点比托管在 MVC 项目中的 ASP.NET 控制器操作和 Web API 端点快了近 50%。”

我不是 ASP.NET 方面的专家，所以我很想听听您的解释或建议如何实现我想做的事情。

另外，如果我想在这个项目中使用 MEF，请赐教。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:34:27.357

我认为它与 ASP.NET MVC 无关，而是与选定的主机有关。如果您发现控制台主机的速度要快 50%，那是因为它没有 ASP.NET 的所有开销。ASP.NET Web API 的自托管安装在 WCF Http 侦听器（内部使用 http.sys）之上，因此通信更加直接，根本不涉及 ASP.NET（甚至不涉及 IIS）。我认为 MVC 对此没有太大影响。如果 Web API 和页面非常相关，我会将它们放在同一个项目中。

# dns - A 和 MX 记录

> ID：13173747
> 
> 赞同：-1
> 
> 时间：2012-11-01T08:53:53.343
> 
> 标签：dns, mx-record

我希望将我的域指向一个网络服务器和一个邮件服务器。

我已将域 A 记录指向 IP。据我了解，这将引用网络服务器（浏览器）和 SSH 工作？

我现在希望为邮件服务器进行 DNS 引用。将 MX 记录指向就足够了`mail.mydomain.com`吗？

这是我在姓名注册商处的帐户的[屏幕截图。](http://img839.imageshack.us/img839/1348/52547080.jpg)名称注册商（名为 loopia）已经将一些电子邮件转发到域。还有一个对域的引用`XXXX.tw`；我想这一定是我的一个老错字。

我可以删除所有这些并只保留 Web 服务器和 SSH 的 A 记录参考（当然也保留 NS 记录）吗？之后，我只需添加一个 MX 指针（在标题“@”下），`mail.mydomain.com`以便正确引用邮件服务器？

所以在截图中我只保留了 NS 记录和 www 下的 A 记录？？

当我输入 MX 指针时，我需要提供以下信息：

1.  TTL - 什么是合适的 TTL 时间？
2.  “数据”——我需要在“数据”下放任何东西吗？

编辑：我现在已经在注册商处编辑了我的帐户。现在看起来像[这样](http://img152.imageshack.us/img152/4645/loopia.jpg)。这个可以吗？（今天无法安装服务器进行测试，但我希望 DNS 设置正确。）

（我`mail.mydomain.com`作为数据输入，但它在概述中仅显示为“邮件”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T13:46:47.317

要使邮件正常工作，您需要两件事：

1) 一条 MX 记录指向您希望将邮件发送到的主机（在您的示例中“邮件”就可以了）

2) 您指向的主机的 A 记录。IE，您需要一个“邮件”IP 地址的 A 记录，您目前缺少该记录。

至于 TTL，它实际上只是您在进行更改时希望有人注意到的最长时间。如果您正在托管 DNS 服务，则重要的是要平衡这与操作负载（较低的值将意味着更多的请求/分钟来询问数据）。对您而言，由于 DNS 服务器托管在其他地方，因此它可能无关紧要。我将其设置为 3600 左右，即 1 小时以秒为单位。

# php - 检查图像是否损坏

> ID：13173749
> 
> 赞同：1
> 
> 时间：2012-11-01T08:53:57.277
> 
> 标签：php, jquery, html, image

我正在测试一个图像托管脚本，但是有一个问题，当我将图像拖放到我的网页时，它正在上传，但是当我点击 F5/刷新按钮时，未完成的图像托管到我的文件夹中，我如何检查是否使用 php 破坏图像或向 php 文件发送 jquery (XHR) 请求以停止上传？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:57:56.847

```
$("img")
  .error(function(){
   alert('error loading image');
  })
  .attr("src", "missing.png");//fallback image 
```

使用 php，您实际上可以将 filesize() 保存在数据库中（在上传期间）并使用文件夹中的文件大小检查它（在您显示之前）将提供很大的帮助。

# iphone - 如何删除iOS文档目录中包含单词的文件

> ID：13173750
> 
> 赞同：-3
> 
> 时间：2012-11-01T08:53:57.477
> 
> 标签：iphone, objective-c, ios, xcode, nsdocumentdirectory

我想删除documentsDirectory 中的几个图像文件。文档目录中已经有大量文件，但我只想删除文件名中包含“Test”一词的文件。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T09:08:06.460

很简单。看一下[`[NSFileManager contentsOfDirectoryAtPath:error:]`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html)，它列出了指定目录中的所有文件。然后您可以根据需要过滤/迭代数组。

要删除文件，请使用`[NSFileManager removeItemAtPath:error:]`.

# android - 带有自定义列表视图的复选框

> ID：13173751
> 
> 赞同：0
> 
> 时间：2012-11-01T08:54:00.583
> 
> 标签：android, checkbox, android-listview

我正在使用 cursoradapter 从数据库中获取值并将其显示在 listview 中。我能够在 listview 中显示数据库内容，也可以在单击特定项目时显示数据库内容，我正在获取单击项目的值。现在我也想要复选框以便 oncheck 我应该获取选中项目的值（在这种情况下，复选框单击和 listitemclick 都应该工作）可能吗？怎么做？

```
private void displayListView() {
        final Cursor cursor = dbHelper.fetchAllRecords();
        String[] columns = new String[] {
                RecordsDbAdapter.KEY_NAME,
                RecordsDbAdapter.KEY_BIRTHDAY,

        };
        int[] to = new int[] {
                R.id.name,
                R.id.birthdate,
        };
        dataAdapter = new SimpleCursorAdapter(
                this, R.layout.rownew,
                cursor,
                columns,    
                to);
        View v = getLayoutInflater().inflate(R.layout.customdialog, null);
        ListView listView = (ListView) v.findViewById(R.id.listChildren);
        final EditText etChild = (EditText) v.findViewById(R.id.etChild);
        listView.setAdapter(dataAdapter);
        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                name = ((TextView) view.findViewById(R.id.name)) .getText().toString();
                BirtDate = ((TextView) view.findViewById(R.id.birthdate)) .getText().toString();
                Log.d("*************", name);

                Info=name+ " " +BirtDate;
                Log.d("nameeeeeeeeeeeeeeee",Info);
                etChild.setText(new StringBuilder().append(Info));
                topaste=etChild.getText().toString();
                    etChild.setText(new StringBuilder().append(Info1));
                //                  topaste1=etChild.getText().toString();
                //              }

            }
        }) 
```

我的rownew.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:background="#FFFFFF"
    android:gravity="center"
    android:padding="6dp" >

    <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/text"
        android:textStyle="bold" >
    </TextView>

    <TextView
        android:id="@+id/birthdate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:text="@string/text"
        android:textStyle="bold" >
    </TextView>

</LinearLayout> 
```

我的 Customdialog.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/etChild"
         android:hint=""
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" >
    </EditText>

    <ListView
        android:id="@+id/listChildren"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#FFFFFF" >
    </ListView>
  </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:10:53.520

您可以扩展`SimpleCursorAdapter`为您的复选框添加点击侦听器。这是我使用的代码片段：

```
public class MultiSelectCursorAdapter extends SimpleCursorAdapter {

  public MultiSelectCursorAdapter(Context context, int layout, Cursor c, String[] from, int[] to, int flags) {
        super(context, layout, c, from, to, flags);
    }

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {
    final int fposition = position;
    View view = super.getView(position, convertView, parent);
    CheckBox checkbox = (CheckBox) view.findViewById(R.id.list_checkbox);
    checkbox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            Log.d("CHECKER", "Something happened: " + fposition + " was clicked " + isChecked);
            // TODO: store id of checked items in your model
            }

    });

    return view;
    }
} 
```

在您的列表行布局中，您需要设置`android:focusable="false"`以允许单击列表项*并*单击每个列表项的复选框。

```
<CheckBox
        android:id="@+id/list_checkbox"
        android:focusable="false" 
        ... >
</CheckBox> 
```

最后，您需要一个模型或数据结构来存储列表中的所有选中项，例如存储所有选中项的标识符的数组或列表。

# c# - 在 C# .NET 中将字符串格式化为固定长度

> ID：13173753
> 
> 赞同：1
> 
> 时间：2012-11-01T08:54:01.490
> 
> 标签：c#, .net, string, formatting

> **可能重复：**
> [如何在 C# 中将整数转换为固定长度的十六进制字符串？](https://stackoverflow.com/questions/5000966/how-to-convert-an-integer-to-fixed-length-hex-string-in-c)

我需要将一系列 UInt32 值格式化为固定长度的十六进制表示。十六进制格式比较容易，但生成的字符串宽度在 6 到 8 个字符之间。如何将字符串格式化为始终为 8 个字符宽？

这是我目前正在做的一个例子：

```
string valueA = Convert.ToString(UInt32.MaxValue, 16); // result is "ffffffff"
string valueB = Convert.ToString(UInt32.MinValue, 16); // result is "0", i want "00000000" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T08:57:57.263

[如何：用前导零填充数字](http://msdn.microsoft.com/en-us/library/dd260048.aspx)：

> ```
> Console.WriteLine("{0:D8} {0:X8}", intValue);
> // or
> Console.WriteLine("{0} {1}", intValue.ToString("D8"), intValue.ToString("X8")); 
> ```

产量`01023983`和`000F9FEF`。

# junit - 我可以使用哪种断言方法来检查数组中的元素是否唯一？

> ID：13173755
> 
> 赞同：2
> 
> 时间：2012-11-01T08:54:09.147
> 
> 标签：junit

我有一个包含 1000 个元素的整数数组。我可以使用哪种断言方法来检查数组中的元素是否唯一？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T10:50:05.943

```
 Set<?> mySet = Sets.newHashSet(myArray);
 Assert.assertEquals(mySet.size(), myArray.length); 
```

我使用 Guava 的[Sets](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Sets.html#newHashSet%28E...%29)类是为了方便，但你也可以只添加每个元素

```
 Set<?> mySet = new HashSet<?>();
 mySet.addAll(Arrays.asList(myArray)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:24:11.493

正如我的评论中提到的，而不是使用整数数组，使用整数集[http://docs.oracle.com/javase/6/docs/api/java/util/Set.html](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)是否更有意义? 那么你知道价值观总是独一无二的吗？

> 公共接口 Set extends Collection 不包含重复元素的集合。更正式地说，集合不包含一对元素 e1 和 e2 使得 e1.equals(e2)，并且最多包含一个空元素。正如它的名字所暗示的，这个接口模拟了数学集合抽象。

# sql-server-2005-express - 在 SQL Express 2005 上使用 SSIS、SSRS 和 SSAS 安装 BIDS

> ID：13173760
> 
> 赞同：2
> 
> 时间：2012-11-01T08:54:42.270
> 
> 标签：sql-server-2005-express

我想在我的机器上安装 SQL Server 2005 Express，这样我就可以拥有一个本地数据库（不允许安装标准或企业），同时应该能够在 BIDS 中为 SSRS、SSIS 和 SSAS 创建项目。我看到了这篇文章： [SQL Server 商业智能开发工作室的安装](https://stackoverflow.com/questions/1150192/installation-of-sql-server-business-intelligence-development-studio)

Yohan 有一条评论说..“可能没有人会在旧帖子上看到这条新评论，但也许它会对某人有所帮助。确保在安装核心 SQL Server 组件时不安装任何客户端组件。这样，当您之后安装 Toolkit 时，您可以告诉它安装所有组件，并且您应该进行全新安装。我通过安装 SQL Server 2005 Express 和 SP2（包括客户端组件）了解到这一点，然后去安装 BIDS，但它不能t 覆盖已安装的客户端组件，因为它们是较新的版本”

这实际上帮助我为我的问题找到了方向。然而，为了确认这一点，我浏览了许多其他帖子，其中说一旦我们安装了 Toolkit，我们只能在 BIDS 中设计 SSRS 报告，而不能在 SSIS 和 SSAS 中设计。如果我没有在我的机器上运行集成服务和分析服务，那也没关系。但是我应该能够设计它们，即创建 BI 项目。

如果我安装 SQL Express 2005 服务器组件然后安装 SQL Server 2005 客户端组件会怎样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:47:18.450

MsSQL 服务器 Express 不支持 SSRS！！！

您可能的意思是具有高级功能的 Express。

根据 MsSQL 服务器的版本，将安装相应的 BID。

正在安装商业智能工作室以及 SSRS、SSIS 和 SSAS 的项目模板。如果 Ms SQL 版本不支持该技术，则项目不可用（对于 MsSQL 2008 和 MsSQL 2010 的数据工具都是如此）。

如果您要安装另一个版本的 BID，那么您应该转到控制面板 ->（在旧窗口中添加/删除程序或在较新窗口中添加/删除程序）并选择卸载 MsSQL 2005。选择删除，当你到达功能选择 BIDs 工作室。

卸载此版本的 BID 后，您通常可以安装较新的版本及其 BID。

# linux - 为了安装 PostgreSQL 扩展，makefile 位于哪里？

> ID：13173761
> 
> 赞同：0
> 
> 时间：2012-11-01T08:54:42.783
> 
> 标签：linux, postgresql, ubuntu

我在这里遵循开源音频识别服务器的安装说明：

[https://github.com/lalinsky/acoustid-server/blob/master/README#L40](https://github.com/lalinsky/acoustid-server/blob/master/README#L40)

对初始步骤进行了一些修改，这就是我到目前为止所做的

```
sudo rm /var/lib/apt/lists/* -vf
sudo apt-get update
sudo apt-get install postgresql postgresql-contrib postgresql-server-dev-8.4
sudo apt-get install python-sqlalchemy python-werkzeug python-jinja2
sudo apt-get install python-openid python-markdown python-acoustid
sudo apt-get install python-psycopg2 python-redis 
```

但是对于下一步我需要**编译和安装包含的 PostgreSQL 扩展：**使用以下命令

```
 $ cd postgresql
 $ sudo make install clean
 $ cd .. 
```

当我跑步时，`$ cd postgresql`我得到`bash: cd: postgresql: No such file or directory`

运行`whereis postgresql`返回这些目录`postgresql: /etc/postgresql /usr/lib/postgresql /usr/include/postgresql /usr/share/postgresql` 但是我在这些目录中都找不到运行的地方`sudo make install clean`。

我在这里从 ec2 实例运行 ubuntu 12.04：http: [//cloud-images.ubuntu.com/precise/current/](http://cloud-images.ubuntu.com/precise/current/)

*为了安装 PostgreSQL 扩展，makefile 位于哪里？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:08:40.340

您必须先检查源代码，`git`然后才能编译它。

```
apt-get install git
git clone git://github.com/lalinsky/acoustid-server.git 
cd acoustid-server/postgresql
make clean
make
sudo make install
cd .. 
```

（最后给出的行相当于三行`cd postgresql`，`sudo make clean install`并且`cd ..`在自述文件中）。

# java - 如何从 xsd 编辑生成的 java 类

> ID：13173767
> 
> 赞同：2
> 
> 时间：2012-11-01T08:54:55.517
> 
> 标签：java, jaxb

我正在使用 maven-jaxb2-plugin 从 xsd 创建 java 类。在 xsd 中，我定义了两个状态：Status1 和 Status2。这两个类有很多相似的变量。因为我无法编辑 xsd，是否有一个选项可以在我的项目中创建类 Status，然后添加更改生成的类来扩展此类？

例子

现在：

```
Class Status1 {...}

Class Status2 {...} 
```

*   这是由 maven-jaxb2-plugin 生成的

我想要的是：

```
Class Status1 extends Status {...}

Class Status2 extends Status {...} 
```

*   这是由 maven-jaxb2-plugin 生成的

`Class Status {...}`- 我自己的课

我希望这可以通过绑定来完成，但我不知道如何

更新：

第二个选项如何实现这个问题是添加到类 Status1 新变量。这可能吗 ？

我想要的是：

```
Class Status1 {... NewVariable newVariable ...}

Class Status2 {...} 
```

*   这是由 maven-jaxb2-plugin 生成的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:12:00.800

好的，我找到了：我使用扩展：

```
<jaxb:bindings xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    jaxb:version="2.1" xmlns:inheritance="http://jaxb2-commons.dev.java.net/basic/inheritance"
    jaxb:extensionBindingPrefixes="inheritance">
    <jaxb:bindings schemaLocation="mySchema.xsd">
        <jaxb:bindings node="xsd:complexType[@name='StatusType']">
            <inheritance:extends>my.package.Status1</inheritance:extends>
        </jaxb:bindings>
    </jaxb:bindings>
</jaxb:bindings> 
```

在 JAXB2 插件中我需要添加：

```
 <extension>true</extension>
                    <args>
                        <arg>-Xinheritance</arg>
                    </args>
                    <plugins>
                        <plugin>
                            <groupId>org.jvnet.jaxb2_commons</groupId>
                            <artifactId>jaxb2-basics</artifactId>
                            <version>0.6.4</version>
                        </plugin>
                    </plugins> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:14:13.160

对于问题的第一部分，请参阅[Specifying Super Class of a JAXB-Generated Class](https://stackoverflow.com/questions/12899877/specifying-super-class-of-a-jaxb-generated-class)。

对于第二部分，请参阅[使用 jaxb-xjc 生成其他自定义方法](https://stackoverflow.com/questions/4875469/generate-additional-custom-method-with-jaxb-xjc)。这是关于添加自定义方法。但是自定义字段处理应该是相似的。

# java - java 是否允许使用函数式接口作为方法？

> ID：13173768
> 
> 赞同：9
> 
> 时间：2012-11-01T08:54:56.957
> 
> 标签：java, lambda, closures, java-8

有了新的 java lambdas 和函数式接口的概念，是否可以将这些函数式接口视为方法？

```
interface Func { void execute(int i); }

void call(Func f)
{
    f(1); //instead of f.execute(1);
} 
```

我发现了很多关于实际 lambda 表达式语法的信息，但对此一无所知。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-01T09:08:29.963

### Your proposition

What you propose has been discussed on the lambda-dev mailing list before:

[http://mail.openjdk.java.net/pipermail/lambda-dev/2012-February/004518.html](http://mail.openjdk.java.net/pipermail/lambda-dev/2012-February/004518.html)

It was mainly rejected because of the various problems related to ambiguity that would arise for the parser / compiler. Or in Brian Goetz's terms:

> I think, ultimately, this is just discomfort with the committment to functional interfaces instead of function types, and an attempt to backpedal towards a wishy-washy middle ground. I don't see this as offering a compelling enough benefit.

If you feel that such *"wishy-washy"* features would still add value to the Java language, you can try your luck again on one of the lambda mailing lists, maybe with compelling arguments :-)

### An alternative

It is possible, but probably not as elegantly as in JavaScript as your example syntax suggests. According to the latest [state-of-the-lambda by Brian Goetz](http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-4.html), there will be method references as mentioned in chapters

> 8 Method references
> 
> [...]
> 
> 9 Kinds of method references
> 
> [...] There are actually three different kinds of method references, each with slightly different syntax:
> 
> *   A static method
> *   An instance method of a particular object
> *   An instance method of an arbitrary object of a particular type

So in fact, your example would have to be rephrased along these lines:

```
interface Func { void execute(int i); }

void call(Block<Integer> block)
{
    block.run(1); //instead of f.execute(1);
} 
```

You can now pass a reference to that execute method:

```
// Disclaimer: I didn't check this against a JDK8 compiler...
Func f = (i) -> { ; }; // Empty sample implementation
call(f::execute) 
```

In other words, the "functional" style is to be implemented at the declaration-site of your call method, not at the use-site. But as with JavaScript, the use-site doesn't have to know about the name of the concrete method in `Func`. It can just accept a `Block` for methods returning `void`, or a `Callable` for methods returning a value.

Note that on JDK's Mercurial repository, things have changed already. You won't find `run()` any more, as mentioned in the state of the lambda. Other interesting types can be found in the java.util.functions package:

[http://hg.openjdk.java.net/lambda/lambda/jdk/file/tip/src/share/classes/java/util/function](http://hg.openjdk.java.net/lambda/lambda/jdk/file/tip/src/share/classes/java/util/function)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T14:25:55.940

如果我正确理解你的问题，你暗示给定功能接口 Mapper 声明如下

```
interface Mapper<T,U> {
   public U map(T t);
} 
```

如果我使用 lambda 表达式实现此功能接口，如下所示：

```
Mapper<Integer,String> itoa = (n) -> String.valueOf(n); 
```

您想调用函数接口如下：

```
String val = itoa(10); //would yield "10" 
```

而不是今天这样：

```
String val = itoa.map(10); 
```

我猜，第一次调用是第二次调用的语法糖。

我没有在任何文档或邮件列表中看到他们计划在即将发布的 JDK 中提供此功能。[但我想你可以在lambda 邮件列表](http://mail.openjdk.java.net/mailman/listinfo/lambda-dev)中提问。我看不出无法实施的原因。

# c++ - OpenCV 中 cv::Mat 类中的布尔运算符

> ID：13173776
> 
> 赞同：0
> 
> 时间：2012-11-01T08:55:36.703
> 
> 标签：c++, opencv, operators, boolean, computer-vision

我正在尝试编写一个大型测试宏，对我的类行为（涉及构造函数、析构函数）进行一些健全性检查。我的代码（部分）如下所示：

 `````
 TEST(basic_getters_setters_contructors) { // Macro name)

  myNameSpace::myClass mc(cv::Mat::ones(1,2,CV_32S),cv::Mat::zeros(4,8,CV_32S));
  CHECK_EQUAL(false, mc.item1 == NULL);
  //.......Rest of the checks 
````  `当我构建它时，我得到编译器错误：

 `````
error C2678: binary '!': no operator found which takes a left-hand operand of type   
'cv::MatExpr' (or there is no acceptable conversion) 
````  `我很确定错误来自该行而不是其他任何地方。我尝试使用智能感知，发现`mc.item1 == NULL`评估为`cv::MatExpr`对象。课堂`flag`上有一个公共成员。`cv::MatExpr`那是我应该检查它是0（假）还是1（真）吗？还是有任何其他（和特定的）方法可以做到这一点？

如果这是一个愚蠢的问题，请不要投票给我:(...亲切的问候，````

# jquery - 使用 jquery 的元素选项卡

> ID：13173778
> 
> 赞同：0
> 
> 时间：2012-11-01T08:55:51.193
> 
> 标签：jquery, html, css, dhtml

我正在努力使用 jquery 创建一种制表技术，以便用户可以使用制表键并浏览容器 div 中的锚标记。我希望活动锚在切换时突出显示。这可能吗？谢谢，

我在下面的尝试，失败了。

```
$(document).ready(function () {
    var tabindex = 1;
    var obj = $('#myDiv').find('a').first().focus();
    $('#myDiv').find('a').each(function () {
        $(this).attr("tabindex", tabindex);
        $(this).css('border', 'solid 1px black');
        tabindex++;
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T08:56:54.390

选项卡本质上集中了一个控件。您可以简单地订阅[焦点](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http%3A%2F%2Fapi.jquery.com%2Ffocus%2F&ei=SjmSUJyOAeri4QSDiIGIAw&usg=AFQjCNGfEWD0Gh8BgmLZoJPkc-U6HFjLLA&sig2=9r_p5FhH1C-N67MYrqcCbQ)事件。

因此，假设您在`highlight`某处有一个函数，以及一个`selector`按 Tab 键顺序排列的项目字符串：

```
$(selector).focus(function() { highlight($(this)); } ); 
```

# c++ - 使用winsock api同时打开tcp连接

> ID：13173781
> 
> 赞同：1
> 
> 时间：2012-11-01T08:56:03.343
> 
> 标签：c++, sockets, tcp

是否可以在 c++ 中实现同时打开的 tcp 连接。为了您的信息，我在下面给出了同时打开的 tcp 连接的参考

[http://ttcplinux.sourceforge.net/documents/one/tcpstate/tcpstate.html](http://ttcplinux.sourceforge.net/documents/one/tcpstate/tcpstate.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:00:06.190

基于该状态图，我看到了两种可能性：

1）双方同时通话`connect()`。由于这需要提前知道两个 IP/端口对，因此双方必须`bind()`在调用`connect()`.

2) 一方正在呼叫`listen()`，然后`sendto()`与侦听套接字，而另一方在呼叫`connect()`后同时呼叫`bind()`。

这两种情况在套接字编程中都不常见。您永远不会有两个客户端`connect()`相互连接，并且您很少在侦听套接字上发送数据，您首先等待`accept()`返回已建立的端点，然后再用它发送数据。

# c++ - 通过boost元状态机后端访问前端

> ID：13173786
> 
> 赞同：2
> 
> 时间：2012-11-01T08:56:29.437
> 
> 标签：c++, boost, boost-msm

由于某些原因，我无法通过构造函数设置状态机的参数，所以我想通过后端访问元状态机的公共成员函数。也就是说，我想要类似的东西

```
typedef msm::back::state_machine<player_> player;

player p;
p.get_front_end(); //get the address of the front end
p.get_front_end().set_param(34) //call the member function of front end 
```

这可能吗？谢谢

另一种解决方案是通过事件将参数传递到状态机。

```
p.process_event(open_theme(34)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T22:02:15.233

后端继承了前端，所以可以直接在p上调用set_param。

# sql-server - SQL Server：验证数据在另一个表中不存在的唯一约束

> ID：13173787
> 
> 赞同：2
> 
> 时间：2012-11-01T08:56:45.007
> 
> 标签：sql-server, sql-server-2008, unique-constraint

鉴于我有一个表结构，其中我有一个可以具有“角色”的父级并且该父级具有可以具有相同“角色”的子级，我如何在子表上创建一个约束来验证父级没有即将插入的角色？

像这样：

```
Parent
 |
 \- ParentRoles
 |
 \- Child
    |
    \- ChildRoles 
```

我希望 Child 和 Parent 角色的联合成为唯一角色的列表（没有重复）。

我已经检查[了 UserFunction 的约束](https://stackoverflow.com/questions/3200795/sql-server-check-constraint-on-a-column-where-values-come-from-another-table)（不推荐，但可以），并尝试创建一个具有唯一索引的视图，但遇到了麻烦，因为我必须在视图中使用 Union，然后我无法索引它。

对[UserFunction](https://stackoverflow.com/questions/3200795/sql-server-check-constraint-on-a-column-where-values-come-from-another-table)问题约束的答案建议使用外键，但我不明白如何根据我的表结构完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:29:37.673

> 如何在子表上创建一个约束来验证父表没有即将插入的角色？

你不能——约束不能轻易地o那个。我会带一个触发器。

# c++ - 在 RTTI 代码中使用非 RTTI 接口

> ID：13173790
> 
> 赞同：2
> 
> 时间：2012-11-01T08:56:58.213
> 
> 标签：c++, gcc, llvm

我需要能够将非 RTTI 代码中的类派生到 RTTI 代码项目中。我正在使用 LLVM 在他们的代码中禁用 RTTI。我知道我不能对他们的代码执行 typeinfo 和 dynamic_cast ，这很好，但似乎推导也不起作用。不知何故，GCC 认为它需要基类的 typeinfo，尽管它不存在。我得到错误：

```
undefined reference to `typeinfo for llvm::AssemblyAnnotationWriter' 
```

如何在 rtti 项目中使用 no-rtti 库中的基类 a？ *我假设 RTTI 是问题，因为我想不出还有什么问题。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:33:39.743

你不能。在这种情况下，您必须使用 RTTI 重新编译 LLVM。

# iphone - 目标 c 动态赋值

> ID：13173796
> 
> 赞同：-1
> 
> 时间：2012-11-01T08:57:21.037
> 
> 标签：iphone, objective-c, ios, xcode

```
NSString *one = [NSDictionary dictionaryWithObjectsAndKeys:@"1",@"id",@"Test1",@"text", nil];
    NSString *two = [NSDictionary dictionaryWithObjectsAndKeys:@"2",@"id",@"Test2",@"text", nil];
    NSString *three = [NSDictionary dictionaryWithObjectsAndKeys:@"3",@"id",@"Test3",@"text", nil];

    _options = [NSArray arrayWithObjects:one,two,three,nil]; 
```

这是我正在使用并在我的代码中正常运行的代码。现在我想要它动态，比如

```
int total = 20;
    NSMutableArray *arr = [[NSMutableArray alloc] init];
    for(int x = 0; x < total; x++)
    {
        [arr addObject:[NSDictionary dictionaryWithObjectsAndKeys:@"1",@"id",@"Test1",@"text", nil]];
    } 
```

但它不起作用。谁能帮我解决这个问题。

主要代码就像

```
_options = [NSArray arrayWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:@"1",@"id",@"Test1",@"text", nil],[NSDictionary dictionaryWithObjectsAndKeys:@"1",@"id",@"Test1",@"text", nil],[NSDictionary dictionaryWithObjectsAndKeys:@"1",@"id",@"Test1",@"text", nil],nil]; 
```

我想动态创建它，就像值会去 1-100。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:02:23.283

您可能在尝试将原语放入 NSDictionary 时遇到了问题，这是不可能的。将您的值转换为字符串。

```
for(int x = 1; x <= 100; x++) {
    NSString* object1 = [NSString stringWithFormat:@"%d", x];
    NSString* object3 = [NSString stringWithFormat:@"Test%d", x];
    [arr addObject:[NSDictionary dictionaryWithObjectsAndKeys:object1,@"id",object3,@"text", nil]];
}
[_options addObjectsFromArray:arr]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:02:10.713

你应该：

```
int total = 20;
    NSMutableArray *arr = [[NSMutableArray alloc] init];
    for(int x = 0; x < total; x++)
    {
          NSString *idStr = [NSString stringWithFormat:@"%d", x+1];
          [arr addObject:[NSDictionary dictionaryWithObjectsAndKeys: idStr,@"id",@"Test1",@"text", nil]];
    } 
```

# ruby-on-rails - Ubuntu 11.10 上的 Rails 多阶段部署问题

> ID：13173797
> 
> 赞同：0
> 
> 时间：2012-11-01T08:57:20.230
> 
> 标签：ruby-on-rails, deployment, capistrano, ubuntu-11.10

我正在尝试在我的服务器上进行多阶段部署，但无法运行暂存和生产配置。

服务器：Ubuntu 11.10 (GNU/Linux 3.0.0-19-server x86_64)

这是我到目前为止所做的：

1.  我在本地机器上创建了一个名为 form_tester 的新项目。我在本地使用带有 sqlite3 的简单数据库。我希望在登台和生产上都使用 mysql2。

2.  在服务器上为登台和生产设置目录。

    ```
    /home/username/form_tester/staging
    /home/username/form_tester/production 
    ```

3.  在服务器上制作了两个数据库，用于暂存和生产。我还将它们配置为由具有正确权限的用户访问，因为我能够在其中生成表。

    ```
    ftstaging
    ftproduction 
    ```

4.  为暂存和生产配置了 config/database.yml 文件。

    ```
    staging: 
      adapter: mysql2 
      encoding: utf8 
      reconnect: false
      database: ftstaging
      pool: 5 
      username: dbuser 
      password: pass 
      host: server.com

    production: 
      adapter: mysql2 
      encoding: utf8 
      reconnect: false
      database: ftproduction
      pool: 5 
      username: dbusr 
      password: pass 
      host: server.com 
    ```

5.  为暂存和生产配置了 Gemfile。

    来源“https://rubygems.org”

    ```
    gem 'rails', '3.2.8'
    gem 'jquery-rails'
    gem 'capistrano'

    group :development do
      gem 'sqlite3'
    end

    group :staging do
      gem 'activerecord-mysql2-adapter'
      gem 'mysql2'
    end

    group :production do
      gem 'activerecord-mysql2-adapter'
      gem 'mysql2'
    end

    # Gems used only for assets and not required
    # in production environments by default.
    group :assets do
      gem 'sass-rails',   '~> 3.2.3'
      gem 'coffee-rails', '~> 3.2.1'
      gem 'uglifier', '>= 1.0.3'
    end 
    ```

6.  Ran Capify 以获取部署文件。从 deploy.rb 文件中删除所有内容。单独留下Capfile。

7.  创建部署目录并制作两个文件。

    ```
    config/deploy/production.rb
    config/deploy/staging.rb 
    ```

8.  为配置添加了以下详细信息：

**对于 config/deploy/production.rb：**

```
 server "server.com", :app, :web, :db, :primary => true
    set :deploy_to, "/home/username/form_tester/production"
    set :rails_env, "production" 
```

**对于 config/deploy/staging.rb：**

```
 server "server.com", :app, :web, :db, :primary => true
    set :deploy_to, "/home/username/form_tester/staging"
    set :rails_env, "staging" 
```

**对于 config/deploy.rb：**

```
 set :stages, ['production', 'staging']
    set :default_stage, 'staging'
    require 'capistrano/ext/multistage'

    # Set application name
    set :application, 'form_tester'
    set :domain, 'server.com'
    set :user, 'username'

    # Use Git source control
    set :scm, :git
    set :repository, "ssh://#{user}@#{domain}/home/#{user}/git/#{application}.git"
    set :branch, 'master'
    set :deploy_via, :remote_cache
    set :scm_verbose, true

    default_run_options[:pty] = true
    set :use_sudo, false

    namespace :deploy do
      task :start do ; end
      task :stop do ; end

      desc "Restart application"
      task :restart, :roles => :app, :except => { :no_release => true } do
        run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
      end
    end 
```

9.使用 git --bare init 在服务器上初始化 git repo 并确保我可以正确访问当前用户名的目录。

10.在开发机器上初始化git repo并将文件推送到
ssh://username@server.com/home/username/git/form_tester.git的服务器repo。

11.开始从本地机器部署到服务器上登台。我运行以下所有命令没有错误。

**在 /home/username/form_tester/staging 下构建目录树**

```
 $ cap deploy:setup
    $ cap deploy:check
    $ cap deploy:update

    *ssh'ed into my server*

    $ rake schema:db:load
    $ rake db:seed
    $ rails console
    > app.get('/')
    I get a '200' returned
    > exit 
```

*仍然 ssh 进入我的服务器*

12.我创建了一个从 /var/www/staging 到我的应用程序公共目录的符号链接

```
 /home/username/form_tester/staging/current/public.

    $ sudo ln -s /home/username/form_tester/staging/current/public /var/www/staging 
```

13.修改 /etc/apache2/sites-available/default 文件为登台应用程序添加子URI。

```
 $ sudo vi /etc/apache2/sites-available/default

    …
            RailsBaseURI /staging
            <Directory /var/www/staging>
                    Options -MultiViews
            </Directory>
    … 
```

14.此时（本地）我运行 cap deploy:restart 并且似乎重新启动服务器，因为没有错误。（登录到服务器）我也尝试了 sudo service apache2 restart，这也很好地重新启动了服务器。

15.此时我拉起 url server.com/staging 但看不到我的应用程序。

**其他文件：**

***配置/应用程序.rb：***

```
 require File.expand_path('../boot', __FILE__)

    require 'rails/all'

    if defined?(Bundler)
      Bundler.require(*Rails.groups(:assets => %w(development test)))
    end

    module FormTester
      class Application < Rails::Application
        config.encoding = "utf-8"
        config.filter_parameters += [:password]
        config.active_support.escape_html_entities_in_json = true   
        config.active_record.whitelist_attributes = true
        config.assets.enabled = true
        config.assets.version = '1.0'
      end
    end 
```

***config/environments/staging.rb 和 production.rb***

```
 FormTester::Application.configure do
      config.cache_classes = true
      config.consider_all_requests_local       = false
      config.action_controller.perform_caching = true
      config.serve_static_assets = false
      config.assets.compress = true
      config.assets.compile = false
      config.assets.digest = true
      config.i18n.fallbacks = true
      config.active_support.deprecation = :notify
    end 
```

***/var/log/apache2/error.log***

除了 phusion 乘客，这里似乎没有任何与 ruby​​ 相关的东西出现，但这不是错误。

```
 [Thu Nov 01 01:16:11 2012] [notice] caught SIGTERM, shutting down
    PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/gd.so' - /usr/lib/php5/20090626/gd.so: cannot open shared object file: No such file or directory in Unknown on line 0
    PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/php5/20090626/mcrypt.so' - /usr/lib/php5/20090626/mcrypt.so: cannot open shared object file: No such file or directory in Unknown on line 0
    [Thu Nov 01 01:16:12 2012] [notice] Apache/2.2.20 (Ubuntu) DAV/2 SVN/1.6.12 PHP/5.3.6-13ubuntu3.7 with Suhosin-Patch Phusion_Passenger/3.0.17 configured -- resuming normal operations
    [Thu Nov 01 01:16:20 2012] [error] [client 68.6.38.254] File does not exist: /var/www/favicon.ico
    [Thu Nov 01 01:16:22 2012] [error] [client 68.6.38.254] File does not exist: /var/www/favicon.ico
    [Thu Nov 01 01:23:07 2012] [error] [client 68.6.38.254] File does not exist: /var/www/favicon.ico 
```

**观察：**

1.  运行 rake schema:db:load 似乎可以为我的数据库正确构建表，但实际上是为 development.sqlite3 文件构建它们。

2.  如果我打开 rails 控制台并运行 Rails.env，我会得到“staging”作为环境。

3.  这很可能与#1 相关，rake db:seed 似乎没有填充我在服务器上的 mysql 中名为“ftstaging”的数据库，即使它执行。

4.  cap deploy 似乎与 cap deploy:update 没有什么不同。

5.  最终结果是 server.com/staging 上的一个页面显示“我们很抱歉，但出了点问题”。

6.  我的似乎没有显示任何内容

7.  运行 rake about 表明我仍处于开发模式。

    ```
    About your application's environment
    Ruby version              1.9.3 (x86_64-linux)
    RubyGems version          1.8.24
    Rack version              1.4
    Rails version             3.2.8
    JavaScript Runtime        Node.js (V8)
    Active Record version     3.2.8
    Action Pack version       3.2.8
    Active Resource version   3.2.8
    Action Mailer version     3.2.8
    Active Support version    3.2.8
    Middleware                ActionDispatch::Static, Rack::Lock, #<ActiveSupport::Cache::Strategy::LocalCache::Middleware:0x00000002796948>, Rack::Runtime, Rack::MethodOverride, ActionDispatch::RequestId, Rails::Rack::Logger, ActionDispatch::ShowExceptions, ActionDispatch::DebugExceptions, ActionDispatch::RemoteIp, ActionDispatch::Reloader, ActionDispatch::Callbacks, ActiveRecord::ConnectionAdapters::ConnectionManagement, ActiveRecord::QueryCache, ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, ActionDispatch::Flash, ActionDispatch::ParamsParser, ActionDispatch::Head, Rack::ConditionalGet, Rack::ETag, ActionDispatch::BestStandardsSupport
    Application root          /home/username/form_tester/staging/releases/20121101080752
    Environment               development
    Database adapter          sqlite3
    Database schema version   20121030011807 
    ```

我尝试了以下教程，但运气不佳：

*   [https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension](https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension)
*   [http://trevmex.com/post/367574671/steps-for-setting-up-a-capistrano-multistage-deployment](http://trevmex.com/post/367574671/steps-for-setting-up-a-capistrano-multistage-deployment)
*   [http://cjohansen.no/en/apache/multi_staging_environment_for_rails_using_capistrano_and_mod_rails](http://cjohansen.no/en/apache/multi_staging_environment_for_rails_using_capistrano_and_mod_rails)
*   [http://guides.beanstalkapp.com/deployments/deploy-with-capistrano.html#prepare-project](http://guides.beanstalkapp.com/deployments/deploy-with-capistrano.html#prepare-project)

**问题：**

我确定有人了解进出部署过程，我错过了什么？我应该检查什么？从我在这里展示的内容来看，我可以做些什么不同的事情？

在这一点上，非常感谢任何帮助。我已经与这个问题斗争了两天，不知道我做错了什么，也不知道还有什么可以尝试的。我大约 3 周前才开始使用 Rails，我最沮丧的原因是无法找到对部署过程的清晰描述。我希望澄清这个问题，作为回报，帮助其他人轻松地从想法到多阶段部署。

另一方面，为什么有人会“否决”这篇文章？我在问一个合法的问题，并提供信息来支持它。如果这不是一个好问题，请告诉我为什么。谢谢

* * *

**11/1/12 - 更新：**

我想出了如何让我的应用程序进入“暂存”环境，但它仍然无法在 server.com/staging 加载。

我在 config/application.rb 文件中添加了“Rails.env = ActiveSupport::StringInquirer.new('staging')”，但我不知道为什么这会强制环境。这是正确的方法吗？

然后我部署，ssh'ed 到我的服务器作为用户名，并运行 rake db:migrate 和 rake db:seed。我现在看到我的数据库已填充。

还有什么可能发生的？我的环境/staging.rb 文件有问题吗？

* * *

**/etc/apache2/httpd.conf**

```
ServerName server.com

LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/ext/apache2/mod_passenger.so
PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17
PassengerRuby /usr/local/rvm/wrappers/ruby-1.9.3-p194/ruby 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T02:47:50.757

我终于发现了主要问题：**资产管道**

**第一个问题：**我没有取消注释 Capfile 中的以下行

```
load 'deploy/assets' 
```

和

**第二个问题：**我从未编译过资产（在开发机器或服务器端。哎呀！）

```
$ bundle exec rake assets:precompile 
```

**参考**

*   [http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)
*   [Rails/Bundler 预编译与惰性编译](https://stackoverflow.com/questions/7673988/rails-bundler-precompile-vs-lazy-compile)

**任何可能知道的人的后续问题：** 我注意到当我编译资产时，它说 RAILS_ENV=production 而不是 staging。在制作 staging.rb 文件时，我基本上复制了 production.rb 文件。我不确定这是否与生产有关。

这是预期的吗？

```
/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby /usr/local/rvm/gems/ruby-1.9.3-p194@global/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets 
```

# android - NineOldAndroids，旋转或移动后不可点击的视图

> ID：13173808
> 
> 赞同：8
> 
> 时间：2012-11-01T08:58:42.313
> 
> 标签：android, animation

我使用[NineOldAndroids](http://nineoldandroids.com) 2.4.0 对对象进行动画处理，主要用于控制的移动和变换。在 Android 4.0 及更高版本上一切正常，但在以前的版本（2.1、2.3）上，动画元素没有获得焦点并且不能点击。示例代码：

```
View v = findViewById(R.id.button1);
v.setOnClickListener(new OnClickListener() {

     @Override
     public void onClick(View v) {
        Toast.makeText(MainActivity.this, "Click!", Toast.LENGTH_SHORT).show();
     }
});
ObjectAnimator moveDown = ObjectAnimator.ofFloat(v, "translationY", 100f);
moveDown.setDuration(5000);
moveDown.start(); 
```

这是图书馆中的错误还是我做错了什么？如果这个库不支持“Honeycomb 动画 API”的所有功能，那么在我的项目中，它将毫无用处。

引用 Android 开发者博客[“Animation in Honeycomb”](http://android-developers.blogspot.ru/2011/02/animation-in-honeycomb.html)： *由于系统实际上是在更改目标对象的属性，因此对象本身会发生变化，而不仅仅是它们的外观。因此，您移动的按钮实际上是移动的，而不仅仅是在不同的位置绘制。您甚至可以在其动画位置单击它。继续点击它；我赌你。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T13:34:42.817

现在我找到了答案： [How to do interactive animation (translation) with Android](https://stackoverflow.com/questions/9595881/how-to-do-interactive-animation-translation-with-android)

它说 Nineoldandroids 有与原生 SDK 相同的限制。

所以我的解决方案：

```
myAnim.setListener(new AnimatorListenerAdapter() {
  @Override
  public void onAnimationEnd ( Animator nullPointer ) {
    RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams) child.getLayoutParams();
    params.bottomMargin += toYDelta;
    params.leftMargin += toXDelta;
    child.setLayoutParams(params);
  }
}); 
```

# python - Python 线程问题

> ID：13173816
> 
> 赞同：-2
> 
> 时间：2012-11-01T08:59:25.573
> 
> 标签：python, multithreading

我正在尝试制作一个执行此操作的程序：

1.  在线程中调用程序 1
2.  在另一个线程中调用程序 2
3.  如果程序 1 先结束，则终止程序 2，反之亦然。

我已经尝试了很长时间，这些是我目前的问题：

1.  我无法导入 Thread 模块（不是线程！）。
2.  函数还是类，这是个问题。

我已经知道如何使用 subprocess.Popen 调用进程以及如何使用命令行函数杀死它们。我也知道如何获得PID。

这是我的实际代码：

```
import threading, subprocess, shlex

class Prog1(threading.Thread):
    def __init__(self, arg=''):
        self.arg = arg
        threading.Thread.__init__(self)

    def run(self):
        p = subprocess.Popen(shelx.split(self.arg))
        global p.pid
        subprocess.Popen(shelx.split("kill -9 " + q.pid))

class Prog2(threading.Thread):
    def __init__(self, arg=''):
        self.arg = arg
        threading.Thread.__init__(self)

    def run(self):
        q = subprocess.Popen(shelx.split(self.arg))
        global q.pid
        subprocess.Popen(shelx.split("kill -9 " + p.pid)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:10:52.027

在 python 2.7 上

```
import thread 
```

然后

```
thread.start_new_thread(funct,(param1, param2...)) 
```

对我有用，不知道要杀死他们，但是从您的问题来看，这就是您所坚持的吗？

在得到@JFSebastian 的反馈后，我开始研究新（旧）线程模块并修复我之前的代码以及我目前正在处理的代码。

```
import threading

t=threading.Thread(target=fuct, args=(param1, param2...)).start() 
```

不知道这是否是最强大的使用方式，但我只知道它存在 25 分钟 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:55:26.933

要杀死所有进程，如果它们中的任何一个已经退出，您可以[`process.wait()`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.wait)在一个单独的线程中调用每个进程，并使用它[`threading.Event`](http://docs.python.org/dev/library/threading#event-objects)来发出任何进程是否结束的信号：

```
#!/usr/bin/env python
import shlex
import subprocess
import threading

def kill_all(processes):
    for p in processes:
        try:
            if p.poll() is None:
                p.kill()  # note: it may leave orphans
                p.wait()
        except:  # pylint: disable=W0702
            pass  # ignore whatever it is (including SIGINT)

def wait(process, exit_event):
    try:
        process.wait()
    finally:
        exit_event.set()  # signal the process has exited

def main():
    # start processes
    cmd = "/bin/bash -c 'echo start {0}; sleep {0}; echo done {0}'".format
    processes = []
    for i in range(1, 3):
        try:
            processes.append(subprocess.Popen(shlex.split(cmd(i))))
        except EnvironmentError:
            kill_all(processes)  # failed to start some process; kill'em all
            return 1  # error

    # wait until at least one process finishes
    exit_event = threading.Event()
    for p in processes:
        threading.Thread(target=wait, args=(p, exit_event)).start()

    exit_event.wait()
    kill_all(processes)

if __name__ == "__main__":
    import sys
    sys.exit(main()) 
```

### 输出

```
start 1
start 2
done 1 
```

# ruby-on-rails - 在设计中将重定向更改为登录。即在“恢复通行证”表格之后

> ID：13173819
> 
> 赞同：4
> 
> 时间：2012-11-01T08:59:37.360
> 
> 标签：ruby-on-rails, devise

我需要 Devise 的一些建议 :)) 我的应用中有首页，并且我在其中包含了一个身份验证表单。它工作正常，但是当系统需要我的身份验证时，它会将我放入 /users/sign_in。（即在“通过恢复”之后）。我应该怎么做才能使我的首页成为登录的默认页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:00:03.683

您可以覆盖以下内容：

```
# The path used after resending confirmation instructions.
def after_resending_confirmation_instructions_path_for(resource_name)
  new_session_path(resource_name)
end 
```

如果你扩展`Devise::ConfirmationsController`. [Devise README](https://github.com/plataformatec/devise)有一小部分关于配置/扩展 Devise 控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:49:54.407

您还可以覆盖多个回调：

# 注册成功后

def after_sign_up_path_for(resource) end

# 登录成功后

def after_sign_in_path_for(resource) end

# image - Photoshop等软件中的图像大小

> ID：13173820
> 
> 赞同：0
> 
> 时间：2012-11-01T08:59:44.627
> 
> 标签：image, photoshop, photoshop-cs4

我不得不将图像的大小更改为 20 kb，之前是 46 kb。我选择了Photoshop来做到这一点。遵循一个简单的过程，图像->图像大小->编辑分辨率，因此图像大小发生了变化。但是实际尺寸也发生了变化，这使得图片看起来更小了。

我在另一个软件上试过了`AAA logo`。它就像一个魅力！我刚刚导入了 jpeg 图像（46 kb）并简单地保存了它。大小减少到 12 KB！

这是如何运作的？为什么 AAA 徽标会自动缩小图像尺寸仍保持相同尺寸？也可以在photoshop中做同样的事情！??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:22:52.500

如果分辨率是指 DPI，那么有两个不同的概念在起作用。

首先，在图像世界中，或者我应该说，视频和任何视频设备（包括位图图像、监视器等）不存在 DPI（对此存在误解，即使在专业设计师中也是如此）。

在视频/图像的世界中，只有像素存在，所有图像都以像素为单位。DPI 是一个纯粹的任意值，Apple 于 1984 年针对 DTP 人推出了该值。

由于它是一个任意值，因此取决于软件是否处理它。Photoshop 显然似乎在转换像素大小时也采用了分辨率，这实际上是不正确的，但可以帮助设计人员应对 DPI 世界（物理打印），而 AAA 则根据您的说法不这样做，以防万一是处理图像的正确方法（ DPI 将是布局程序的描述符，说明如何根据文档 DPI 缩放它，但它不会改变图像中的像素数）。这是一个复杂而敏感的领域（[参见 f.ex. this page](http://www.scantips.com/no72dpi.html)），所以我将把话题留在那里 :-)

现在，即便如此，实际*文件*大小也受到压缩比的影响。在这种情况下，我的猜测是您在 AAA 中使用了比在 Photoshop 中更高的压缩率。尝试在两者中使用相同的比率进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T17:29:58.017

使用 SaveAs->JPeg，更改图像大小只会减小图像的尺寸

# button - 第二个按钮无法正常工作

> ID：13173822
> 
> 赞同：1
> 
> 时间：2012-11-01T08:59:57.620
> 
> 标签：button, android-intent, android-activity, click

我不明白为什么我的第二个按钮没有启动第二个活动

```
package com.example.lettere;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MainMenu extends Activity{

Button button1;
Button button2;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_start);

}
public void addListenerOnButton() {

    button1 = (Button) findViewById(R.id.button1);
    button2 = (Button) findViewById(R.id.button2);
    }
    public boolean ButtonOnClick(View v) {
     {
        switch (v.getId()) {
          case R.id.button1:
            startActivity(new Intent(this, MainActivity.class));
            return true;
          case R.id.button2:
            startActivity(new Intent(this, MainActivity2.class));
              return true;

          }
    }
    return true;}} 
```

这两个活动使用相同的 xml 布局文件。在我声明的 xml 布局的上下文中

```
android:context=".MainActivity|.MainActivity2" 
```

这是我的第一个活动，与第二个完全相同

```
package com.example.lettere;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;

public class MainActivity extends FragmentActivity {

SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, i + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 9;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0: return getString(R.string.title_section1).toUpperCase();
            case 1: return getString(R.string.title_section2).toUpperCase();
            case 2: return getString(R.string.title_section3).toUpperCase();
            case 3: return getString(R.string.title_section1).toUpperCase();
            case 4: return getString(R.string.title_section2).toUpperCase();
            case 5: return getString(R.string.title_section3).toUpperCase();
            case 6: return getString(R.string.title_section1).toUpperCase();
            case 7: return getString(R.string.title_section2).toUpperCase();
            case 8: return getString(R.string.title_section3).toUpperCase();
        }
        return null;
    }
}

public static class DummySectionFragment extends Fragment {
    public DummySectionFragment() {
    }

    public static final String ARG_SECTION_NUMBER = "section_number";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.activity_inter, null);
        return v;
    }
}
} 
```

这是清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.lettere"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity android:name=".MainMenu" android:label="@string/title_activity_main">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        </activity>
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        </activity>
        <activity
        android:name=".MainActivity2"
        android:label="@string/title_activity_main" >
        </activity>
</application>

</manifest> 
```

# jquery - 使用 jQuery 在页面加载上编写通用列表？

> ID：13173823
> 
> 赞同：-1
> 
> 时间：2012-11-01T09:00:00.380
> 
> 标签：jquery

我正在尝试构建一个通用列表以显示在我的页面加载中。

该列表应显示我的数据库中列出的用户数量，并显示当时分配给他们的估值数量。看看下面的图片，看看我要做什么。

![在此处输入图像描述](../Images/0bf2be5ad53d9e44f48858a0738b9044.png)

我通过以下方式构建此列表：

```
<ul class="menu" style="float: left;">
        <li class="item1"><a href="#" class="">Valuations<span>4</span></a>
            <ul style="display: block; ">

            </ul>
        </li>
        <li class="item2"><a href="#" class="">Users<span id = "userCount"></span></a>
            <ul id = "UserList" style="display: none; ">
                <li class="subitem1"><a href="#">User Name<span>3</span></a></li> 
                <li class="subitem1"><a href="#">User Name<span>1</span></a></li> 
            </ul>
        </li>
</ul> 
```

底部部分 Class = "item2" 是应该列出用户的位置。目前有 2 个链接显示用户名。

我想构建通用代码来为我的数据库中列出的每个用户创建一个链接。

我目前有 jQuery 代码循环通过我的数据库中的条目并将我的变量名称分配给数据库条目中用户的值。

* * *

编辑

我正在寻找在此 for 循环中添加代码以将链接添加到我的列表：

```
$(document).ready(function () {
            $.post("Dashboard/UsersGet", {}, function (dataSet) {

                var obj = jQuery.parseJSON(dataSet);
                var table = obj.Table;

                var countUsers = 0;

                for (var i = 0, len = table.length; i < len; i++) {
                    var array = table[i];
                    if (array.Active == 1) {
                        var name = array.Name; //Here i get the name of the user and would like to create an entry to the user list.
                        UserList.Items.add(<li class="subitem1"><a href="#">name<span>3</span></a></li> );
                        countUsers = countUsers + 1;
                    }

                }
                $('#userCount').html(countUsers.toString());

            });

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:36:01.720

```
 lis = '';               
            for (var i = 0, len = table.length; i < len; i++) {
                var array = table[i];
                if (array.Active == 1) {
                    var name = array.Name; //Here i get the name of the user and would like to create an entry to the user list.
                    lis += '<li class="subitem1"><a href="#">'+name+'<span>3</span></a></li>';
                    countUsers = countUsers + 1;
                }

            }
            $("#UserList").html(lis); 
```

我在您的原始代码中没有看到数字 3 的来源，所以我只是在这里对其进行了硬编码。你应该能够用你用来获取数字的任何东西来替换它。

# c# - 从另一个用户控件打开 c# 用户控件

> ID：13173827
> 
> 赞同：0
> 
> 时间：2012-11-01T09:00:49.507
> 
> 标签：c#, user-controls

我有 ac# 用户控制。我在这个控件中有一个按钮，我希望当用户单击该按钮时，将打开另一个用户控件。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:06:37.863

您必须创建要添加的控件并添加它。

```
YourCustomControl uc = null;

private void button1_Click(object sender, EventArgs e)
{
     uc = new YourCustomControl();
     this.Controls.Add(uc); // this represent the user control in which you want to add
                            // You can add it in some container like Panel or GroupBox
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:06:42.683

看看`RaiseBubbleEvent`。这会将事件推送到其父级。

[http://msdn.microsoft.com/en-us/library/aa719644(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa719644(v=vs.71).aspx)

# mysql - 如何从一列中获得多列？

> ID：13173833
> 
> 赞同：1
> 
> 时间：2012-11-01T09:01:33.280
> 
> 标签：mysql, sql, select

我有一张桌子：

IADATA

```
 Id     Studentid     Mon   Value  Type
    1      ABC1           1      12     1
    1      ABC1           1      02     2
    1      ABC1           1      18     4
    1      ABC1           1      09     7
    1      ABC1           1      12     8
    1      ABC1           1      22     10
    1      ABC2           2      12     1
    1      ABC2           2      02     2
    1      ABC2           2      18     4
    1      ABC2           2      09     7
    1      ABC2           2      12     10
    1      ABC2           3      05     1
    1      ABC2           3      02     2
    1      ABC2           3      20     4
    1      ABC2           3      09     7
    1      ABC2           3      12     10 
```

在上表中，我们有两个学生 ABC1 和 ABC2 以及他们的数据。

现在我想要的结果如下：

```
 Id      Studentid      Mon     Obtained   Benefits   Max    Type
    1        ABC1          1         12         02      18       I
    2        ABC1          1         09         12      22       II
    3        ABC2          2         12         02      18       I
    4        ABC2          2         09         00      12       II
    5        ABC2          3         05         02      20       I
    6        ABC2          3         09         00      12       II 
```

现在在结果中，您可以看到我根据 studentid 和 mon 以及类型以特定顺序放置值。如果类型是 I 它应该获得，那么好处然后 max 和 II 相同。它的选择查询可以是什么？

前面表格中的类型是链接的。取值为1、2、4时，应为新型I类获得、收益和最大值；当取值为7、8、10时，应为新型II类获得、收益和最大值。当没有可用的列时，它应该为零。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:09:33.883

这应该这样做：

```
SELECT  ID,
        StudentID,
        Mon,
        MAX(CASE WHEN Type LIKE 'Obtained%' THEN Value END) AS Obtained,
        MAX(CASE WHEN Type LIKE 'Benefit%' THEN Value END) AS Benefit,
        MAX(CASE WHEN Type LIKE 'Max%' THEN Value END) AS `Max`,
        CASE WHEN RIGHT(Type, 2) = 'II' THEN 'II' ELSE 'I' END AS Type
FROM    T
GROUP BY ID, StudentID, Mon, CASE WHEN RIGHT(Type, 2) = 'II' THEN 'II' ELSE 'I' END
ORDER BY ID, StudentID, Mon, Type 
```

**[SQL FDDLE 示例](http://www.sqlfiddle.com/#!2/01568/1)**

尽管单独存储类型更有意义。即有一列用于“获得”、“最大”等，另一列用于“I”、“II”

**编辑**

使用您修改后的数据结构，这应该可以工作：

```
SELECT  ID,
        StudentID,
        Mon,
        COALESCE(MAX(CASE WHEN Type IN (1, 7) THEN Value END), 0) AS Obtained,
        COALESCE(MAX(CASE WHEN Type IN (2, 8) THEN Value END), 0) AS Benefit,
        COALESCE(MAX(CASE WHEN Type IN (4, 10) THEN Value END), 0) AS `Max`,
        CASE WHEN Type IN (7, 8, 10) THEN 'II' WHEN Type IN (1, 2, 4) THEN 'I' END AS Type
FROM    T
WHERE   Type IN (1, 2, 4, 7, 8, 10)
GROUP BY ID, StudentID, Mon, CASE WHEN Type IN (7, 8, 10) THEN 'II' WHEN Type IN (1, 2, 4) THEN 'I' END
ORDER BY ID, StudentID, Mon, Type 
```

**[SQL FDDLE 示例](http://www.sqlfiddle.com/#!2/20e6b/3)**

# tomcat - tomcat 7 maxThreads 选择标准

> ID：13173835
> 
> 赞同：0
> 
> 时间：2012-11-01T09:01:40.250
> 
> 标签：tomcat, tomcat6, tomcat7

我正在使用 tomcat 7 并希望调整 server.xml 中的 maxThreads 属性。

这个属性有什么选择标准吗？我的机器中有 8 GB RAM，并使用 -Xms 和 -Xmx JAVA_OPTS 为 tomcat JVM 分配 4 GB RAM。

如果您需要更多信息，请与我们联系。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:34:38.407

您应该使用的最大线程数取决于您的用例、您的请求的预期响应时间、您的服务器应该能够处理的并发数、您的 cpu（例如核心数）、您的操作系统、.. . max 200 Threads 的默认值通常是可以的。如果您认为需要修改此值，您应该运行一些性能/压力测试并监控不同配置的不同响应时间。

# magento - magento 小部件没有出现

> ID：13173842
> 
> 赞同：0
> 
> 时间：2012-11-01T09:02:22.603
> 
> 标签：magento, widget

我有一个模块

Shop_All.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Shop_Productlists>
            <active>true</active>
            <codePool>local</codePool>
        </Shop_Productlists>
    </modules>
</config> 
```

小部件.xml

```
<?xml version="1.0"?>
<widgets>
    <productlists_suggestion type="productlists/suggestion">
        <name>Suggestions</name>
        <description type="desc">Shows a product Grid</description>
    </productlists_suggestion>
</widgets> 
```

建议.php

```
<?php
class Shop_Productlists_Block_Suggestion extends Mage_Core_Block_Abstract implements Mage_Widget_Block_Interface
{
    protected function _beforeToHtml()
    {
        $this->_prepareData();
        return parent::_beforeToHtml();
    }

    protected function _prepareData()
    {
        $collection = Mage::getModel("catalog/product")->getCollection();
        $collection->setPageSize(3);
        $this->getChild("suggestion_notoolbarlist")->setCollection($collection);
    }

    protected function _toHtml()
    {
        $html = '...';
        return $html;
    }   
} 
```

但是该小部件未显示在 CMS->Widget-Instances->New Widget Instance 下的管理面板中

任何想法为什么？我已经删除了缓存目录并重新登录到管理面板

“productlists”模块的其他块等正在工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T12:03:21.077

好的 发现问题

在我的 widget.xml 之前有一个空格

```
<?xml version="1.0"?> 
```

所以它没有被解析。我认为解析器应该显示错误。但他没有

# blackberry - 正确执行 ping 测试时间

> ID：13173848
> 
> 赞同：0
> 
> 时间：2012-11-01T09:02:44.110
> 
> 标签：blackberry, java-me

进行正确 ping 测试的正确方法是什么？我目前正在为 Blackberry 开发 Java，它的功能对此有点限制。

我正在做的是打开到给定 URL 的连接并测量时间，但我不确定这是否真的是正确的 ping 时间测量。谁能给我一些想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:10:02.867

听起来您正在寻找的是延迟，这将是您发送一些信息并从中接收响应所需的时间。

如果您不控制服务器，它就不会完全准确——因为您无法知道服务器在发送回某些内容之前花了多长时间处理您的输入。

如果服务器不是您自己的，您可以插入标准的 Ping 协议（一如既往，[维基百科](http://en.wikipedia.org/wiki/Ping_%28networking_utility%29#Message_format)在这里拯救了一天）。

如果服务器是您自己的，并且您想避免这种情况，您需要设置一个类似的协议 - 您在其中发送请求，服务器响应。

在这两种情况下，您都希望测量从发送到接收的时间，即[“往返延迟时间”](http://en.wikipedia.org/wiki/Round-trip_delay_time)。

# ruby - 如何编写基于 MySQL VARBINARY 的 (Ruby) DataMapper 自定义类型

> ID：13173853
> 
> 赞同：2
> 
> 时间：2012-11-01T09:03:35.513
> 
> 标签：ruby, ruby-datamapper

我想在我的数据库中使用 UUID 作为主键，建议使用 VARBINARY(16) 作为列类型。

到目前为止，我有以下内容：

```
module DataMapper
  class Property
      class UUIDKey < String
        key true

        default proc { SecureRandom.uuid.delete('-') }

        writer :private

        def dump(value)
          # add '0x' to save as hex number
          # according to http://kekoav.com/posts/uuid-primary-key-mysql

          '0x' + value unless value.nil?
        end

        def load(value)
          value unless value.nil?
        end

        def typecast(value)
          # how to convert binary value in db?
          load(value)
        end
      end
  end
end 
```

DataMapper 当然会根据上述将值保存为字符串。

如何让 DataMapper 将其保存为二进制/十六进制并加载为字符串？

# arrays - 在 python 和 opencv 中使用 yml 文件

> ID：13173857
> 
> 赞同：5
> 
> 时间：2012-11-01T09:03:49.183
> 
> 标签：arrays, image-processing, opencv, numpy, python-2.7

如何在 Python 中加载 yml 文件并使用它？

我用了 ：

```
import cv
data = cv.Load("Z:/data/xyz_00000_300.yml") 
```

但是当我打印数据时，它只会给出图像的细节，比如行数和列数等。

我想读取图像像素中的内容。

我尝试使用以下代码，但它只给我像素值而不是像素中包含的信息？

```
def AccessPixels(img):
    for y in range(0, img.height):
        for x in range(0, img.width):
            cv.Get2D(img, y, x) # Slow get pixel value.
            cv.Set2D(img, y, x, (0, 0, 0, 0)) # Slow set pixel value. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:24:22.357

要加载 yml 文件并与之交互，您首先需要：

```
import yaml 
```

现在您可以通过执行以下操作将 yaml 文件作为字典读取：

```
with codecs.open('your.yml', 'r', encoding='utf8') as f:
     yml_dict = yaml.safe_load(f) 
```

现在 yaml 文件的内容作为 yml_dict 中的字典可供您使用。

# functional-programming - 一切都可以建模为函数吗？

> ID：13173858
> 
> 赞同：1
> 
> 时间：2012-11-01T09:03:51.603
> 
> 标签：functional-programming

让我们考虑一个例子：我想打开/关闭一个灯泡。在 C 中，我可以写：

```
struct lightbulb {
    int is_turned_on;
    /* from 1 to 10 */
    int light_intensity;
}; 
```

每当我想打开或关闭灯泡时，我`is_turned_on`通过设置`light_intensity`从 1（最暗）到 10（最亮）来更改为 1 和亮度。

我如何在函数式编程中做同样的事情？我想我必须创建一个列表来保存这些值，创建一个函数`ON`并`OFF`“打开”/关闭灯泡，以及一个返回灯泡光强度的函数。每次调用该函数时，都会返回一个新灯泡：

```
(defun turn-on()
  '(1 0))
(defun turn-off()
  '(0 0))
(defun light-intensity (x)
  `(0 ,(eval x))) 
```

我可以看到像光强度这样的函数是一个类似于线性函数的连续函数。无论我们`x`对每个 x 传递多少次相同的参数，它都会计算出相同的结果。每个功能的结果是一个具有不同状态的新灯泡。

问题是，我怎样才能坚持状态？显然，我必须通过变量将它*存储*在我记忆中的某个地方。

**更新：我通过**[c2 Wiki - 函数式编程](http://c2.com/cgi/wiki?FunctionalProgramming)找到了上述问题的答案

> **数据项如何持续存在？**
> 
> 在堆栈上。在顺序批处理程序中，数据在顶级函数中进行初始化和转换。在像服务器这样的长期程序中，递归调用顶级循环函数，将全局状态从一个调用传递到下一个调用。

每次调用函数时我还必须创建一个新对象（列表），如何销毁之前的旧对象？

`defparameter`通过and改变变量不是更有效更简单`setf`吗？想象一下，如果它不是一个灯泡，而是一个包含更多信息的更复杂的物体？如何将其建模为函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:29:21.367

> 问题是，我怎样才能坚持状态？显然，我必须通过变量将它存储在我记忆中的某个地方。

我认为您正在从命令式的角度看待函数式编程，这种情况经常发生并且可能会令人困惑。在函数式编程中，它不是将程序表示为一系列修改状态的步骤（例如通过设置变量），而是表示为一组相互依赖的数学风格的函数，每个函数只包含一个表达式。因为在函数中包含多行的唯一原因是修改状态，所以在纯函数式编程中，所有函数都是单行的；这意味着代码作为一系列级联函数调用运行。程序往往被视为对问题的描述，而不是分步说明。

> 每次调用函数时我还必须创建一个新对象（列表），如何销毁之前的旧对象？

我认为所有函数式编程语言都使用垃圾收集。更少的副作用和内存混叠意味着当内存不再被使用时更容易解决。

> 通过defparameter和setf改变变量不是更有效更简单吗？想象一下，如果它不是一个灯泡，而是一个包含更多信息的更复杂的物体？如何将其建模为函数？

我不确定你在这里问什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:29:02.117

> 我在问如何使用纯函数式编程有效地处理状态，而不需要另一个副本只是为了使其“引用透明”？

只要语言支持线性类型，就可以在函数式编程中有效地处理状态。也就是说，每个可变单元格都被赋予一个线性类型，并且类型检查器会确保任何线性类型的变量都不会按照程序员的意愿被丢弃或复制。例如，这是不允许的：

```
val x = make_reference (5) // [x] is a mutable cell
val y = x
val res = !x + !y // the syntax [!x] is for reading a value of a cell 
```

这是不允许的，因为 [x] 具有线性类型，并且线性类型的值不能重复（这实际上是我们在下一行将 [y] 绑定到 [x] 时所做的）。这种重复也称为“别名”（或“共享”），而别名又使状态操作程序更难推理（例如，通过破坏引用透明度）。因此，线性类型限制了别名，这有助于推理程序。大多数情况下，具有线性类型的程序在引用上是透明的，并且与纯函数程序保持一些相似性。

这是 ATS 中的一个示例，它使用线性类型来处理（可变）状态。

```
typedef lightbulb (b: bool) = @{is_turned_on= bool b, light_intensity= intBtw (1, 10)}

fn lightbulb_make {b:bool} (state: bool b, intensity: intBtw (1, 10)) :<> lightbulb b =
  @{is_turned_on= state, light_intensity= intensity}

// The [&T1 >> T2] notation means that function expects to be given
// a term of type T1, and then on exit, the type of the term will
// change to T2.
// In our case, the function expects a lightbulb either turned on or off,
// but on exit, the lightbulb will be turned off.
fn lightbulb_turn_on {b:bool} (x: &lightbulb b >> lightbulb true) :<> void =
  x.is_turned_on := true

fn lightbulb_change_intensity {b:bool} (x: &lightbulb b, y: intBtw (1, 10)) :<> void =
  x.light_intensity := y

implement main () = let
  var bulb = lightbulb_make (false, 5)
  val () = lightbulb_turn_on (bulb)
  val () = lightbulb_change_intensity (bulb, 3)
in
  printf ("intensity is now: %d\n", @(bulb.light_intensity))
end 
```

# c# - Sharepoint 使用包含两个相互引用的类库的项目编译

> ID：13173859
> 
> 赞同：1
> 
> 时间：2012-11-01T09:03:55.273
> 
> 标签：c#, sharepoint, class-library

我有一个引用两个类库的 Sharepoint 可视化 Webpart。这些库协同工作，为 Webpart 提供值。该解决方案构建时没有错误或警告......

```
1>------ Rebuild All started: Project: ClassLibrary1, Configuration: Debug Any CPU ------
1>  ClassLibrary1 -> c:\Projects\TempWebPart\ClassLibrary1\bin\Debug\ClassLibrary1.dll
2>------ Rebuild All started: Project: ClassLibrary2, Configuration: Debug Any CPU ------
2>  ClassLibrary2 -> c:\Projects\TempWebPart\ClassLibrary2\bin\Debug\ClassLibrary2.dll
3>------ Rebuild All started: Project: TempWebPart, Configuration: Debug Any CPU ------
3>  TempWebPart -> c:\Projects\TempWebPart\TempWebPart\bin\Debug\TempWebPart.dll
========== Rebuild All: 3 succeeded, 0 failed, 0 skipped ========== 
```

但是，当我按下开始按钮进行调试时，它会引发错误并且不会编译...

```
1>------ Build started: Project: TempWebPart, Configuration: Debug Any CPU ------
1>  TempWebPart -> c:\Projects\TempWebPart\TempWebPart\bin\Debug\TempWebPart.dll
1>  ClassLibrary1 -> c:\Projects\TempWebPart\ClassLibrary1\bin\Debug\ClassLibrary1.dll
1>c:\Projects\TempWebPart\ClassLibrary2\Class2.cs(5,7,5,20): error CS0246: The type or namespace name 'ClassLibrary1' could not be found (are you missing a using directive or an assembly reference?)
========== Build: 0 succeeded, 1 failed, 2 up-to-date, 0 skipped ==========
========== Deploy: 0 succeeded, 0 failed, 0 skipped ========== 
```

我还收到以下错误和警告。

```
Error   1   The type or namespace name 'ClassLibrary1' could not be found (are you missing a using directive or an assembly reference?) c:\Projects\TempWebPart\ClassLibrary2\Class2.cs 5   7   TempWebPart 
```

我已经为两个类库项目添加了对 Webpart 项目的引用。我还在 Package... 下的 Advanced Menu 中为两个类库添加了“来自项目输出的程序集”。

```
<Solution xmlns="http://schemas.microsoft.com/sharepoint/" SolutionId="0a8bd835-ad91-49a1-a82d-61e22081fbe6" SharePointProductVersion="14.0">
  <Assemblies>
    <Assembly Location="ClassLibrary1.dll" DeploymentTarget="GlobalAssemblyCache" />
    <Assembly Location="ClassLibrary2.dll" DeploymentTarget="GlobalAssemblyCache" />
    <Assembly Location="TempWebPart.dll" DeploymentTarget="GlobalAssemblyCache">
      <SafeControls>
        <SafeControl Assembly="TempWebPart, Version=1.0.0.0, Culture=neutral, PublicKeyToken=5ef7e45135ca6bea" Namespace="TempWebPart" TypeName="*" />
      </SafeControls>
    </Assembly>
  </Assemblies>
  <FeatureManifests>
    <FeatureManifest Location="TempWebPart_Feature1\Feature.xml" />
  </FeatureManifests>
</Solution> 
```

我的库很简单，只是为了测试这个案例。这是代码......

```
namespace ClassLibrary1
{
    public class Class1
    {
        public String Hello = "Hello";
    }
} 
```

```
using ClassLibrary1;

namespace ClassLibrary2
{
    public class Class2
    {
        public String Hello = new ClassLibrary1.Class1().Hello;
    }
} 
```

程序集已签名。我在 WindowsForms 应用程序中尝试过并且工作正常。我已经尝试过 vb 库，并且出现了类似的消息。我想我在某处错过了一步。我正在使用vs2012。

我真的很想尝试:(如果有任何帮助，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:12:21.557

*   类库的目标框架是什么？应该是.NET Framework 3.5？
*   您可能需要在 Webpart 项目的 Package.xml 中包含这些程序集。

希望这可以帮助..

# c++ - 在 python 脚本中加载 .so 文件时出现未定义符号错误

> ID：13173860
> 
> 赞同：3
> 
> 时间：2012-11-01T09:04:17.110
> 
> 标签：c++, python, c, unix, linker

我有一些 C++ 代码，为此我创建了一个 .so 文件。

我的目标是在 python 脚本中加载这个 .so 文件。

为了公开 C++ 方法，我为它们创建了一个 C 包装方法并公开了 C 方法。

但是，当尝试在 python 脚本中加载 .so 文件时，它给了我一个未定义的符号错误。

这些错误适用于某些 C++ 类内部使用的方法，并且不会暴露在 .so 文件之外。(nm -C -u .so)

1.  创建 .so 文件时不解析名称吗？
2.  解决 .so 文件中未定义符号的最佳方法是什么。

例如：

```
C++ :
class myclass {
public:
     void func1(int _i);
     int getval();
};

C wrapper :
extern "C" int getval_w();

int getval_w() {
    myclass obj;
    return obj.getval();
} 
```

因此，当我在 .so 文件中编译此代码并将其加载到 python 脚本中时，我收到如下错误：未定义的符号：“func1 的损坏名称”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:00:05.483

`.o`在链接`.so`.

链接共享对象时，默认情况下链接器不会为未解析的符号产生错误，因为在将库链接到最终可执行文件时，这些符号可能由另一个对象提供。`--no-undefined` **您可以使用链接器**标志明确告诉链接器给出该错误。要将其通过`g++`（或`clang++`）驱动程序，您将其编写为`-Wl,--no-undefined`.

# html - 编写这个重复性任务的最佳方式是什么？

> ID：13173862
> 
> 赞同：1
> 
> 时间：2012-11-01T09:04:30.017
> 
> 标签：html, layout, replace

对模糊的标题和标签感到抱歉，因为这个问题非常具体。

无论如何，我都不是一个大脚本编写者或编码员。我经营一个网站，该网站需要每周更新几次某些结果。结果由特殊软件创建，并以其中一种格式导出；html、pdf、doc、xls、rpt、ttx、csv、odbc、rec、rtf 或 xml。

由于我的网站使用的表格布局与导出的文件不同，因此我目前在我的和标签之间复制并粘贴信息。我只需要几分钟，但我想知道如何自动化？导出的文件如下所示：

```
1    John and George    12
2    Peter and Suzan    10
3    Allan and Ed        8 
```

并且需要符合以下要求：

```
<table width="100%" cellspacing="0" class="tabels" id="top">
<tr>
<td colspan="3" class="tabel"><b> Groupp A</b></td>
</tr>
<tr>
<td class="tabel"><strong> 1\. </strong></td>
<td class="tabel">John and George</td>
<td class="tabel">12</td>
</tr>
<tr>
<td class="tabel"><strong>2.</strong></td>
<td class="tabel">Peter and Suzan</td>
<td class="tabel">10</td>
</tr>
<tr>
<td class="tabel"><strong> 3\. </strong></td>
<td class="tabel">Allan and Ed</td>
<td class="tabel">8</td>
</tr> 
```

这可能是非常基本的。我想几个查找和替换命令应该可以解决问题。我曾尝试使用 Notepad++，但我想知道你们将如何处理这个问题？我可以使用linux或windows机器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:18:13.427

我会使用`awk`这样的东西（尽管任何测试处理工具，比如 Perl，都可以胜任这项任务）。

首先是输入文件：

```
pax> cat testprog.in

1    John and George    12
2    Peter and Suzan    10
3    Allan and Ed        8 
```

然后，`awk`脚本本身：

```
pax> cat testprog.awk

BEGIN {
    print "<table width=\"100%\" cellspacing=\"0\" class=\"tabels\" id=\"top\">"
    print "  <tr>"
    print "    <td colspan=\"3\" class=\"tabel\"><b> Groupp A</b></td>"
    print "  </tr>"
}
{
    print "  <tr>"
    print "    <td class=\"tabel\"><strong>" $1 ".</strong></td>"

    str = ""; for (i = 2; i < NF; i++) str = str " " $i
    print "    <td class=\"tabel\">" substr (str,2) "</td>"

    print "    <td class=\"tabel\">" $NF "</td>"
    print "  </tr>"
}
END {
    print "</table>"
} 
```

然后，运行一个示例，以便您可以看到它的工作：

```
pax> awk -f testprog.awk testprog.in

<table width="100%" cellspacing="0" class="tabels" id="top">
  <tr>
    <td colspan="3" class="tabel"><b> Groupp A</b></td>
  </tr>
  <tr>
    <td class="tabel"><strong>1.</strong></td>
    <td class="tabel">John and George</td>
    <td class="tabel">12</td>
  </tr>
  <tr>
    <td class="tabel"><strong>2.</strong></td>
    <td class="tabel">Peter and Suzan</td>
    <td class="tabel">10</td>
  </tr>
  <tr>
    <td class="tabel"><strong>3.</strong></td>
    <td class="tabel">Allan and Ed</td>
    <td class="tabel">8</td>
  </tr>
</table> 
```

至于它是如何工作的，下面会解释。

`BEGIN`and`END`子句只是控制在处理输入文件中的行之前和之后打印的内容。那就是表格本身和第一行。

对于每一行，您首先打印出一个`tr`标签和一个`td`包含该行第一个单词的标签。

`td`然后根据中间参数构造另一行，在过程中折叠空格。

带有`td`最后一个参数的 final 和一个闭包`tr`，就可以了。继续下一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:18:19.120

这是一个Linux`sed`解决方案：

```
sed 's|\([0-9]*\) *\(.*[^ ]\)  *\([0-9]*\)$|<tr><td class="tabel"><strong>\1.</strong></td><td class="tabel">\2</td><td class="tabel">\3</td></tr>|' filename > filename.html 
```

这仅处理表格行。其他一切看起来都像静态样板文件，您应该能够使用`echo`脚本中的命令生成它们。

# android - 安卓。ListView 行获得焦点

> ID：13173863
> 
> 赞同：0
> 
> 时间：2012-11-01T09:04:31.740
> 
> 标签：android, listview

`ListView`每当我擦除模拟器上的数据然后在其上运行我的应用程序时，总是会获得焦点中的第一行。我的意思是，它上面有橙色的选择。有人对我如何摆脱它有任何想法吗？我没有任何`EditTexts`可以请求关注`Views`的内容。`Activity`我确定这是微不足道的，但我似乎无法找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:09:31.870

你可以这样做：

```
ListView listView = (ListView)....;
listView.clearFocus(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:12:09.197

将此添加到您的`listview`xml

```
<ListView
.................

android:cacheColorHint="@android:color/transparent" 
android:listSelector="@android:color/transparent"
/> 
```

这将使`listview`分隔线颜色变为透明。所以它不会被视为已选中。

# java - Java - 引用 HashMap 中的对象时出现 NullPointerException

> ID：13173865
> 
> 赞同：2
> 
> 时间：2012-11-01T09:04:42.213
> 
> 标签：java, arrays, nullpointerexception, hashmap

我目前正在编写一个命令行程序，它应该从文本文件中获取行并将数据添加到 HashMaps 数组中。我目前`NullPointerException`在运行此方法时得到一个。

```
Public class Vaerdata {
String[] linje;
String line;
String line2;
HashMap<String, Stasjon> stasjonsmap = new HashMap<String, Stasjon>();
HashMap<String, Stasjon>[] regionmap = (HashMap<String, Stasjon>[]) new HashMap<?, ?>[6];

void init() throws IOException{
    BufferedReader br = new BufferedReader(new FileReader("stasjoner_norge.txt"));
    BufferedReader brData = new BufferedReader(new FileReader("klimadata2012.txt"));
    for(int i = 0; i < 10; i++){
        brData.readLine();
    }
    br.readLine();
    while((line = br.readLine()) != null){
        linje = line.split("\\s+");
        stasjonsmap.put(linje[1], new Stasjon(Integer.parseInt(linje[1]), linje[2], Integer.parseInt(linje[3]), linje[4], linje[5], linje[6]));
        }
        if(linje[6].equals("AGDER")){
            System.out.println(stasjonsmap.get(linje[1])); //DEBUG
            regionmap[1].put(stasjonsmap.get(linje[1]).navn, stasjonsmap.get(linje[1]));
            System.out.println(regionmap[1].get(stasjonsmap.get(linje[1]).navn)); //DEBUG
        }
    }  
} 
```

我`NullPointerException`发生在这一行：

```
regionmap[1].put(stasjonsmap.get(linje[1]).navn, stasjonsmap.get(linje[1])); 
```

所以我的问题是：当我声明了 with 数组时`HashMaps`（`<String, Stasjon>`Stasjon 是我的 Stasjon 类的对象，获取有关某些气象站的信息），为什么我在该行中出现错误？中的对象`stasjonsmap.get(linje[1])`已被声明，我不明白为什么它不允许我在第二个哈希图中引用该对象。

文本文件中的每一行，在第一行之后（我在程序中跳过）如下所示：
`36200 TORUNGEN_FYR 12 ARENDAL AUST-AGDER AGDER`

提前; 谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T09:08:09.953

When you initialize your array of HashMap here

`HashMap<String, Stasjon>[] regionmap = (HashMap<String, Stasjon>[]) new HashMap<?, ?>[6];`

all values in the array are `null`.

You then try to call the `put` method of HashMap on a `null`-reference.

First you have to initialize your HashMaps somehow:

```
for (int i = 0; i < regionmap.length; i++) {
    regionmap[i] = new HashMap<String, Stasjon>();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:11:45.013

**-** I think you have **not** initialized the `HashMap`, and you called `put()` method.

**-** As `HashMap` is an Object its default value is `null`, so you need to initialize it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:13:29.033

You have created an array of Hashmaps of size 6, but all items in that array are still initialized to null.

You could instead do it like this (which also gets rid of the ugly cast):

```
 private static HashMap<String, Stasjun>[] initRegionMap(HashMap<String, Stasjun>... items) {
    return items;
  }

  HashMap<String, Stasjun>[] regionmap = initRegionMap ( 
      new HashMap<String, Stasjun>(),
      new HashMap<String, Stasjun>(),
      new HashMap<String, Stasjun>(),
      new HashMap<String, Stasjun>(),
      new HashMap<String, Stasjun>(),
      new HashMap<String, Stasjun>()
    ); 
```

# jquery - Dnn 标签未显示

> ID：13173872
> 
> 赞同：0
> 
> 时间：2012-11-01T09:05:07.443
> 
> 标签：jquery, dotnetnuke

我的网站有问题。当我进入模块设置时，我看不到标签，我只能看到字段或下拉菜单。我正在使用 dnn 6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T21:10:30.700

如果您使用的是 Google Chrome，请右键单击附近的项目并“检查元素”。查看显示的 DOM，看看标签是否确实被添加到页面中，或者它是否甚至没有被渲染。也许标签呈现时没有文本......或者它可能是一个 CSS 类，它意外地针对所有标签并将它们设置为显示：无。

此外，当您刷新页面时，Chrome 的检查器应该会说明是否发生了任何 Javascript 错误。应该是右下角的一个小红色数字指示器。

# android - 在 Gingerbread 上的 PreferenceActivity 中的 ActionBar（使用 ActionbarSherlock）

> ID：13173875
> 
> 赞同：1
> 
> 时间：2012-11-01T09:05:34.083
> 
> 标签：android, actionbarsherlock, preferenceactivity

我有一个 Android 应用程序，我将最低 SDK 版本设置为 9（姜饼）。我有一个偏好活动，我想显示一个在 ICS+ 设备上运行良好但在运行 GB 的设备上不显示的操作栏。

经过进一步[调查](https://groups.google.com/forum/?fromgroups=#!topic/actionbarsherlock/SE9y4kbZRPw)，我发现 ABS 与`PreferenceActivity`.

有*什么*解决方法吗？我只需要在运行 Gingerbread 的设备上显示一个操作栏（带有一些选项项）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T14:19:07.657

使用 SherlockPreferenceActivity。

# jquery - Select2：如何取消选择所有选项并仅选择一个

> ID：13173876
> 
> 赞同：1
> 
> 时间：2012-11-01T09:05:38.317
> 
> 标签：jquery, jquery-select2

我正在使用`Select2`，一个很棒的插件。

HTML：

```
<select id="fruits" multiple="true">
  <option value=''>All
  <option value='Apple'>Apple
  <option value='Pear'>Pear
  ... 
```

JavaScript：

```
$('#fruits').select2(); 
```

当我选择“全部”选项时，我需要取消选择所有以前选择的选项，只选择“全部”选项。

我试过了

```
onChange="$('#fruits').select2('val', ['All']);" 
```

也

```
onChange="$('#fruits').select2('data', ['All']);" 
```

但这似乎对我不起作用。

有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-03T11:11:00.593

这是对的。这段代码对我很有效。

```
$('#selectId').select2('val',""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T09:19:14.627

我用我的代码添加了这个小提琴，试试这个......

[在这里摆弄](http://jsfiddle.net/vyZDq/24/)

它基于点击事件。

```
$(function() {
    $('#fruits').click(function(e) {
        var selected = $(e.target).val();
        if(selected=='all'){
           $('#fruits > option').prop("selected",false);
           $(e.target).prop("selected",true);
        };
    }); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T09:19:53.797

用这个：

1）用于取消选择的项目。

```
$("#fruits option:selected").removeAttr("selected"); 
```

2）用于全选

```
 $('#fruits option:[text="All"]').attr('selected', true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T09:17:40.540

试试这个

```
 $("#fruits option:selected").removeAttr("selected");

 $("#fruits option[value='']").attr("selected","selected"); 
```

# c# - 在 Visual Studio 2012 中查看以前的签到

> ID：13173885
> 
> 赞同：1
> 
> 时间：2012-11-01T09:06:42.243
> 
> 标签：c#, vb.net, visual-studio, tfs, visual-studio-2012

我们最近从VS2010切换到VS2012，我似乎找不到TFS签入列表。例如，我想查看特定用户完成的所有签到的列表。关于我在哪里可以找到的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T07:12:18.360

打开源代码管理资源管理器，单击工具栏中![查找变更集按钮](../Images/68f4a35c4d548a7e77c4218d6d2638d3.png) 的以下按钮，将弹出以下窗口。

![查找变更集对话框](../Images/baf7be5dba799db86c888e32c890d850.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T08:27:33.197

我刚刚发现的另一个选项：右键单击文件层次结构中的节点，然后选择**Find** ==> **Find Changesets**：

![右键单击文件层次结构中的节点，然后选择 File --> Find Changesets](../Images/efc85a51db05455b8841402375c67d62.png)

这将为您提供与接受的答案相同的窗口。

# php - 如何添加到数据库中的现有值

> ID：13173888
> 
> 赞同：0
> 
> 时间：2012-11-01T09:07:04.653
> 
> 标签：php, mysql, database, sql-update, insert-update

我带着另一个绝对初学者问题回来了，我将值存储在数据库中，我的目标是允许用户使用下拉菜单减去或添加到特定数据库值（数量），其值范围为 1 - 10 .我现在保持简单。

```
mysql_select_db("toner", $con);
$sql=INSERT INTO inventory (partnumber, quantity)
VALUES
('$_POST[partnumber]','$_POST[quantity]');
if (!mysql_query($sql,$con))
{
die('Error: ' . mysql_error());
}
mysql_close($con); 
```

我可以找到很多只是添加或删除静态值的示例，但这不是我需要的。我已经四处搜索了一些类似于我正在寻找的示例[1](https://stackoverflow.com/questions/2721127/how-can-i-update-a-field-in-a-mysql-database-table-by-addition-in-mysql-database)和[2](https://stackoverflow.com/questions/10536929/how-to-update-mysql-with-php-when-subtracting)似乎 UPDATE 将是最好的解决方案但是我不确定它应该如何实现，我也在研究连接但我'不确定它能否完成我的需要，感谢您为这个新手提供的任何帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:24:26.343

要使以下解决方案起作用，您需要在数据库中插入一个值，例如 partnumber = 1 和 qantity = 0。您肯定需要修改它以使用您的 mysql 连接字符串，并且需要在之后查看数据库检查它是否有效或添加选择查询。但是，这将使用下拉列表中选择的数量更新库存项目 1 的数量...

文件.php

```
<?php
    include("db_connection_file.php"); // in here are the username and password etc for your mysql connection
    if($_POST){ // the code in this block will ONLY fire if the form has been posted
        $dropdown_contents = $_POST['drop']; // this is the value of the form item 'drop' that has been posted...
        $part_no_from_form = $_POST['part_no'];
        $query ="UPDATE inventory SET quantity = '".$dropdown_contents."' WHERE partnumber = '".$part_no_from_form ."'"; // this updates the database and sets the quantity to that posted where the part number is that in the form
        $testResult = mysql_query($query) or die('Error, query failed'); 
        echo "This worked";
    }
?>
<form acion="file.php" method="post">
    Quantity <select name="drop" id="drop">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
        <option>6</option>
        <option>7</option>
        <option>8</option>
        <option>9</option>
        <option>10</option>
    </select><br />
    Part No. <select name="part_no" id="part_no">
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
        <option>6</option>
        <option>7</option>
        <option>8</option>
        <option>9</option>
        <option>10</option>
    </select><br />
    <input type="submit" value="go" />
</form> 
```

注意：这可以很容易地扩展以指定要在数据库中更新的部件号，方法是添加另一个下拉列表或输入框，捕获发布的值并将其传递给更新查询的 where 部分。

这没有任何验证！它也在使用贬值的 MySQL 连接函数，请查阅 MySQLi 和 PDO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:16:44.113

要将行更新为新的 KNOWN 值：

```
UPDATE inventory SET quantity = $KnownValue WHERE partnumber = $PartNumber; 
```

要更新添加到现有值的行，即向库存添加额外的 5 个单位：

```
UPDATE inventory SET quantity = quantity + $IncramentalValue WHERE partnumber = $PartNumber; 
```

# php - 编译失败：缺少字符类的终止]

> ID：13173890
> 
> 赞同：5
> 
> 时间：2012-11-01T09:07:09.207
> 
> 标签：php, preg-split

```
$date could be "23/09/2012" or "23-09-2012" or "23\09\2012" 
preg_split('/[\/\-\\]/', $date); 
```

不知道为什么 PHP 保持抛出`missing terminating ] error`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-01T09:10:29.480

```
preg_split('/[\/\-\\]/', $date);
                   ^escaping the closing ']' 
```

请改为执行以下操作，以消除歧义

```
preg_split('/[\/\-\\\\]/', $date); 
```

没有必要 escape `-`，但你也可以使用`\-`。

* * *

代码：

```
$date = 'as\sad-s/p';
$slices =  preg_split('/[\/\-\\\\]/', $date);
print_r($slices); 
```

输出：

```
Array ( [0] => as [1] => sad [2] => s [3] => p ) 
```

# bash - sed 难以替代的字符

> ID：13173891
> 
> 赞同：1
> 
> 时间：2012-11-01T09:07:19.737
> 
> 标签：bash, encoding, sed

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T15:33:34.270

I think that the sed command you are looking for is this:

```
sed 's/\xE2\x80\x94/-/g' thisfile 
```

\xE2\x80\x94 is hex for what I assume is the offending character sequence. (FYI, it is the UTF-8 code for character 2014, a long dash of some kind). This is preferable to trying to throw special characters directly into a sed command.

If this does not work, use hexdump to find out exactly what the offending bytes are.

```
hexdump -C thisfile 
```

# three.js - 如何在three.js中用不同的相机渲染相同的场景？

> ID：13173893
> 
> 赞同：6
> 
> 时间：2012-11-01T09:07:22.937
> 
> 标签：three.js

我设置了一个场景，我希望两台摄像机以不同的角度（前后角度）观看同一个场景。我试过这样的事情：

```
renderer.setViewport(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT/2);
renderer.render(scene, camera);

renderer.setViewport(0, SCREEN_HEIGHT/2, SCREEN_WIDTH, SCREEN_HEIGHT/2);
renderer.render(scene, testcamera); 
```

但是回来的第二个视图从未出现过。知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T09:34:36.243

我收藏了几个例子，有一篇使用渲染管理器的有趣帖子：

[http://bkcore.com/blog/3d/webgl-three-js-extension-rendermanager.html](http://bkcore.com/blog/3d/webgl-three-js-extension-rendermanager.html)

而且在`three.js`示例中：

[http://mrdoob.github.com/three.js/examples/webgl_multiple_views.html](http://mrdoob.github.com/three.js/examples/webgl_multiple_views.html)

# objective-c - 无法分配从 NSMutableArray 检索到的对象

> ID：13173902
> 
> 赞同：0
> 
> 时间：2012-11-01T09:08:27.833
> 
> 标签：objective-c, nsmutablearray, protocols

出于某种原因，我无法分配从可变数组中检索的对象

**更新：请注意，我正在使用 ARC**

这是代码：

```
id<Control> control = [formControlUtils getControlWithId:@"123"];
// Here control.controlValue is "Old value"
control.controlValue = @"New value";
// Even after assigning a new value to the property the value is still "Old value"

- (id<Control>)getControlWithId:(NSString *)controlId {
id<Control> control = nil;

for (NSArray *array in [FormRenderManager sharedInstance].formControls)
{
    //[FormRenderManager sharedInstance].formControls is a mutable array, so is the nested arrays
    control = [[array filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"controlId = %@", controlId]] lastObject];

    if (control)
        break;
}

return control;
} 
```

正如您在我上面的代码注释中看到的那样，每当为 control.controlValue 分配一个新值时，旧值仍然存在。

这是为什么？我可能在这里错过了一些基本的东西，还是因为我违反了协议`<id>Control control`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:59:20.977

`filteredArrayUsingPredicate`返回一个不可变数组。你必须这样做：

```
[NSMutableArray arrayWithArray:[array filtered...]]; 
```

# mysql - CTI（类表继承）

> ID：13173906
> 
> 赞同：0
> 
> 时间：2012-11-01T09:08:43.730
> 
> 标签：mysql, multiple-inheritance

我正在 MySQL 之上实现多个 CTI，以作为避免实现替代 EAV 的一种手段。继承工作正常，一个表可以从一个或几个其他表继承列，但是几个表不能从单个表继承列。您知道基于这种设计模式是否可以实现这种继承，如果可以，您能否就如何实现它提出建议？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:37:12.153

在运行了一些测试和一些代码修改之后，我能够在我的问题中实现所描述的继承。必须确保键不会跨表重复。回顾一下，多个表可以从单个表继承，这是有效的。希望它可以帮助某人。

# vb.net - 如果为真则选择mysql然后更新，否则插入

> ID：13173909
> 
> 赞同：0
> 
> 时间：2012-11-01T09:09:06.740
> 
> 标签：vb.net, sql-server-2008, select, if-statement

我需要检查 ID 是否已经在数据库中，如果是这样：更新值经度、纬度、时间戳。如果没有，则将所有内容插入数据库。

我现在的脚本是：

```
<%@ Import Namespace="System.Data"%>   
<%@ Import Namespace="System.Data.SqlClient"%>   
<%@ Import Namespace="System.Reflection"%>
<%@ Page Language="VB" %>  
<script runat="server">  

    Dim Con As New SqlConnection
    Dim Cmd As New SqlCommand
    Dim SQLCommand As String = ""
    Dim Reader As SqlDataReader

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not String.IsNullOrEmpty(Request.QueryString("data")) Then
        Dim data As String = Request.QueryString("data")

        Dim myObj As New MyObject
        Dim properties() As PropertyInfo = myObj.GetType().GetProperties()
        Dim values() As String = Server.UrlDecode(data).Replace("{", "").Replace("}", "").Replace(""":""", """=""").Split(New Char() {","}, StringSplitOptions.RemoveEmptyEntries)
        For Each value As String In values
            Dim keyValue() As String = value.Split(New Char() {"="}, StringSplitOptions.RemoveEmptyEntries)
            For Each prop As PropertyInfo In properties
                If prop.Name.ToLower = keyValue(0).ToLower.Replace("""", "") Then
                    prop.SetValue(myObj, keyValue(1).Replace("""", ""), Nothing)
                End If
            Next
        Next

        myObj.Save()
        lblText1.Text = String.Format("ID: {0}", myObj.ID)
        lblText2.Text = String.Format("Longitude: {0}", myObj.Longitude)
        lblText3.Text = String.Format("Latitude: {0}", myObj.Latitude)
        lblText4.Text = String.Format("Timestamp: {0}", myObj.Timestamp)

'cmd.Parameters.AddWithValue("@ID", ID)
'cmd.Parameters.AddWithValue("@Longitude", Longitude)
'cmd.Parameters.AddWithValue("@Latitude", Latitude)
'cmd.Parameters.AddWithValue("@Timestamp", Timestamp)

'Con.ConnectionString = "Data Source=sr04011389\sql02;Initial Catalog=LocatieBepaling_Ontw;Integrated Security=True"
    'Cmd.Connection = Con
    'Con.Open()

   '     Cmd.CommandText = "INSERT INTO dbo_Locatie(id, Longitude, Latitude, Timestamp) VALUES (1234, 4567, 789, 12-12-2012)"

' Reader = Cmd.ExecuteReader

 '        Reader.Close()
  '       Con.Close()
 '      Con.Dispose()

    End If

End Sub
'Dim values() As String = Server.UrlDecode(data).Replace("{", "").Replace("}", "").Replace(""":""", """=""").Split(New Char() {","}, StringSplitOptions.RemoveEmptyEntries)  For Each value As String In values 

Public Class MyObject
    Private _ID As String
    Private _Longitude As String
    Private _Latitude As String
    Private _Timestamp As String

    Public Property ID As String
        Get
            Return _ID
        End Get
        Set(value As String)
            _ID = value
        End Set
    End Property

    Public Property Longitude As String
        Get
            Return _Longitude
        End Get
        Set(value As String)
            _Longitude = value
        End Set
    End Property

    Public Property Latitude As String
        Get
            Return _Latitude
        End Get
        Set(value As String)
            _Latitude = value
        End Set
    End Property

    Public Property Timestamp As String
        Get
            Return _Timestamp
        End Get
        Set(value As String)
            _Timestamp = value
        End Set
    End Property

    Public Function Save() As Boolean
 Return True
    Using objConn As New SqlConnection("Server=sr04011389\sql02;database=LocatieBepaling_Ontw;Trusted_Connection=yes;Max Pool Size=400;Connect Timeout=600;")
      Try

            Dim cmd As New SqlCommand("csp_save_my_object")
            cmd.CommandType = CommandType.StoredProcedure
            cmd.Parameters.AddWithValue("@ID", ID)
            cmd.Parameters.AddWithValue("@Longitude", Longitude)
            cmd.Parameters.AddWithValue("@Latitude", Latitude)
            cmd.Parameters.AddWithValue("@Timestamp", Timestamp)
           Return cmd.ExecuteNonQuery() > 0
        Catch ex As Exception
           Return False
       End Try
    End Using

    End Function

    Public Function SaveWithoutSP() As Boolean
       Return True
        Using Con As New SqlConnection("Server=sr04011389\sql02;database=LocatieBepaling_Ontw;Trusted_Connection=yes;Max Pool Size=400;Connect Timeout=600;")
            Try
               Con.Open()
               Dim cmd As New SqlCommand("UPDATE dbo_Locatie SET (Longitude = @Longitude, Latitude = @Latitude,Timestamp = @Timestamp) WHERE id=@ID IF @@ROWCOUNT=0 INSERT INTO locatie VALUES (@ID, @Longitude, @Latitude, @Timestamp)")
              cmd.CommandType = CommandType.Text
                cmd.Parameters.AddWithValue("@ID", ID)
                cmd.Parameters.AddWithValue("@Longitude", Longitude)
                cmd.Parameters.AddWithValue("@Latitude", Latitude)
                 cmd.Parameters.AddWithValue("@Timestamp", Timestamp)
                Return cmd.ExecuteNonQuery() > 0
            Catch ex As Exception
                Return False

            End Try
        End Using
    End Function
End Class

 'Sub Page_UnLoad()   
 'objConn.Close()   
 'objConn = Nothing  
 'End Sub  

 </script>  

 <html>   
 <head>   
 <title>TracknTrace</title>   
 </head>   
 <body>   
 <form id="form1" runat="server">   
 <asp:Label id="lblText" runat="server"></asp:Label> 
 <br><asp:Label id="lblText1" runat="server"></asp:Label> </br>
 <br><asp:Label id="lblText2" runat="server"></asp:Label> </br> 
 <br><asp:Label id="lblText3" runat="server"></asp:Label> </br>
 <br><asp:Label id="lblText4" runat="server"></asp:Label> </br>
 </form> 
```

而我之前使用的 PHP 代码是：

```
 $result = mysql_query("SELECT * FROM locatie WHERE id='$id'");
 if($result && mysql_num_rows($result)>0){
 {
 $query = "Update locatie 
 SET     longitude = '$longitude',
 latitude = '$latitude',
 timestamp = '$timestamp'
 WHERE id = '$id'";}
 else
 //Als het nummer bekend is

 {
  //Als het een nieuw nummer is
 $query = sprintf("INSERT INTO locatie (id, longitude, latitude, timestamp) VALUES ('% s', '%s', '%s', '%s') ", mysql_real_escape_string($id) , mysql_real_escape_string ($longitude),  mysql_real_escape_string($latitude), mysql_real_escape_string($timestamp));}

 $result = mysql_query($query) or die('Query failed: ' . mysql_error());
 echo "OK"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:49:47.953

编辑：对于 SQL Server

要使用的 sql 文本如下

```
UPDATE locatie SET (longitude = @longitude, 
                    latitude = @latitude,
                    timestamp = @timestamp) 
WHERE ID=@ID 
IF @@ROWCOUNT=0 
    INSERT INTO locatie VALUES (@ID, @longitude, @latitude, @timestamp) 
```

假设 ID 字段不是 autoicrement 列，并且 timestamp 不是 TimeStamp 数据类型列。

如果将上述文本保存为存储过程，则在 VB.NET 中您将所有内容都写入字符串中，但应在 WHERE ID=@ID 之后插入分号

```
 Dim cmd As New SqlCommand("UPDATE dbo_Locatie SET (Longitude = @Longitude, " + 
                            "Latitude = @Latitude,Timestamp = @Timestamp) WHERE id=@ID; " + 
                            "IF @@ROWCOUNT=0 INSERT INTO locatie " + 
                            "VALUES (@ID, @Longitude, @Latitude, @Timestamp)") 
```

作为旁注：与其捕获异常而不对异常做任何事情，不如让异常抛出。错误消息可能会暴露。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:13:46.673

您可以尝试使用一种`INSERT` `ON DUPLICATE KEY UPDATE`查询。它的工作方式是如果记录不存在，则插入它。如果是，则更新值。

```
INSERT INTO locatie (...) VALUES (...)
ON DUPLICATE KEY UPDATE longitude = '$longitude', ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:16:02.930

```
INSERT INTO locatie (id, longitude, latitude, timestamp)
ON DUPLICATE KEY UPDATE 
longitude = '$longitude',latitude = '$latitude',timestamp = '$timestamp'; 
```

这是你要的吗？？？

# c# - 使用 C# 注册 Google Analytics

> ID：13173910
> 
> 赞同：0
> 
> 时间：2012-11-01T09:09:13.510
> 
> 标签：c#, logging, google-analytics

我正在尝试使用他们的 api 从 Google Analytics 获取数据。 [我发现这篇关于用 C# 做的很棒的帖子](http://www.stickler.de/en/information/code-snippets/analytics-api.aspx)

问题是当我使用它的示例时，只有当我已经使用我的业务用户/密码登录到 Google 时，我才能从 Analytics 获取数据，否则它将引导我进入登录页面。

我想要的是防止我的营销人员知道用户/通行证信息，并且我不希望他们查看 Analytics 中的所有业务相关数据。

我想让他们从我的管理站点获取数据，而不暴露商业 Google 帐户，即使他们当前使用他们的私人 gmail 或他们目前使用的任何 Google 服务登录。

希望我足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:16:47.720

为什么不直接将这些用户添加到 Google Analytics 中？他们可以被授予有限的访问权限。

[http://support.google.com/analytics/bin/answer.py?hl=en&answer=1699665](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1699665)

[http://support.google.com/analytics/bin/answer.py?hl=en&answer=1009702](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1009702)

# oracle - 带有变量的 Oracle pl/sql：使用当前日期和主机地址创建序列

> ID：13173913
> 
> 赞同：2
> 
> 时间：2012-11-01T09:09:31.443
> 
> 标签：oracle, plsql

这是一个关于如何创建带有变量的序列的简单问题。我想使用系统时间的组合创建一个序列作为它的起始值。我该怎么做。

这是我写的：

```
DECLARE
  SQS number :=(sysdate - to_date('01-JAN-1970','DD-MON-YYYY')) * (864000);
  sql_stmt varchar2(200);
BEGIN
  sql_stmt := 'create SEQUENCE XXXX_id_seq MINVALUE  100000 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH :1 CACHE 500 NOORDER CYCLE';
  EXECUTE IMMEDIATE sql_stmt using SQS;
END; 
```

但它说无效的号码。我知道这是一个菜鸟问题。但我真的需要帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:23:28.947

您不能在 DDL 语句中绑定变量（我没有文档或一个很好的理由，但是很多参考资料都提到了这一事实），您必须将所有内容连接在一起。

```
DECLARE
  SQS number :=(sysdate - to_date('01-JANV.-1970','DD-MON-YYYY')) * (864000);
  sql_stmt varchar2(200);
BEGIN
  sql_stmt := 'create SEQUENCE XXXX_id_seq MINVALUE  100000 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH '||SQS||' CACHE 500 NOORDER CYCLE';
  EXECUTE IMMEDIATE sql_stmt ;
END; 
```

# c# - 在 DataGridView 的列中搜索值

> ID：13173915
> 
> 赞同：6
> 
> 时间：2012-11-01T09:09:34.180
> 
> 标签：c#, winforms, datagridview, datagridviewcolumn

我希望用户能够在 DataGridView (dgv) 的列中搜索数字。dgv 可以保存许多记录。每条记录都有一个项目编号。所以我希望用户能够在项目编号列中搜索项目编号。我拥有的列是：ProjectID（不可见）；图片（无标题文本）；项目编号; 项目名; 公司; 接触。

这是我的代码：

```
private void btnSearch_Click(object sender, EventArgs e)
{
    string searchValue = textBox1.Text;
    int rowIndex = -1;

    dgvProjects.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
    try
    {
        foreach (DataGridViewRow row in dgvProjects.Rows)
        {
            if (row.Cells[row.Index].Value.ToString().Equals(searchValue))
            {
                rowIndex = row.Index;
                dgvProjects.Rows[row.Index].Selected = true;
                break;
            }
        }
    }
    catch (Exception exc)
    {
        MessageBox.Show(exc.Message);
    }
} 
```

**问题 #1：**到目前为止所做的事情：用户在 TextBox1 中键入项目编号。当他/她单击按钮时，代码会在行中搜索此字符串，并在找到项目编号时选择该行。它工作正常，但只有一次。当我想搜索其他项目编号时，什么也没有发生。

**问题#2：**我认为这可以通过仅搜索列项目名称的值来以更好的方式完成。但是我应该如何正确地做到这一点？

我用来搜索的代码来自[这个答案](https://stackoverflow.com/q/10179223/1671161 "这个答案")

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-01T09:19:25.203

为什么要使用 row.Cells[row.Index]。您需要指定要搜索的列的索引（问题 #2）。例如，您需要将 row.Cells[row.Index] 更改为 row.Cells[2] 其中 2 是您的列的索引：

```
private void btnSearch_Click(object sender, EventArgs e)
{
    string searchValue = textBox1.Text;

    dgvProjects.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
    try
    {
        foreach (DataGridViewRow row in dgvProjects.Rows)
        {
            if (row.Cells[2].Value.ToString().Equals(searchValue))
            {
                row.Selected = true;
                break;
            }
        }
    }
    catch (Exception exc)
    {
        MessageBox.Show(exc.Message);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-30T22:13:48.720

为什么不先构建一个`DataTable`然后将其分配给`DataGridView`as `DataSource`：

```
DataTable table4DataSource=new DataTable();

table4DataSource.Columns.Add("col00");
table4DataSource.Columns.Add("col01");
table4DataSource.Columns.Add("col02");

... 
```

（手动添加行，在一个圆圈中或通过`DataReader`数据库表中的一个）（分配数据源）

```
dtGrdViewGrid.DataSource = table4DataSource; 
```

然后使用：

```
(dtGrdViewGrid.DataSource as DataTable).DefaultView.RowFilter = "col00 = '" + textBoxSearch.Text+ "'";
dtGrdViewGrid.Refresh(); 
```

您甚至可以将这段代码放在您的`textbox_textchange`事件中，您的过滤值将在您编写时显示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-15T16:39:34.577

最好也将您的逻辑分开在另一个方法中，或者在另一个类中。

此方法将帮助您检索在其中找到文本的 DataGridViewCell 对象。

```
 /// <summary>
    /// Check if a given text exists in the given DataGridView at a given column index
    /// </summary>
    /// <param name="searchText"></param>
    /// <param name="dataGridView"></param>
    /// <param name="columnIndex"></param>
    /// <returns>The cell in which the searchText was found</returns>
    private DataGridViewCell GetCellWhereTextExistsInGridView(string searchText, DataGridView dataGridView, int columnIndex)
    {
        DataGridViewCell cellWhereTextIsMet = null;

        // For every row in the grid (obviously)
        foreach (DataGridViewRow row in dataGridView.Rows)
        {
            // I did not test this case, but cell.Value is an object, and objects can be null
            // So check if the cell is null before using .ToString()
            if (row.Cells[columnIndex].Value != null && searchText == row.Cells[columnIndex].Value.ToString())
            {
                // the searchText is equals to the text in this cell.
                cellWhereTextIsMet = row.Cells[columnIndex];
                break;
            }
        }

        return cellWhereTextIsMet;
    }

    private void button_click(object sender, EventArgs e)
    {
        DataGridViewCell cell = GetCellWhereTextExistsInGridView(textBox1.Text, myGridView, 2);
        if (cell != null)
        {
            // Value exists in the grid
            // you can do extra stuff on the cell
            cell.Style = new DataGridViewCellStyle { ForeColor = Color.Red };
        }
        else
        {
            // Value does not exist in the grid
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-08T10:11:49.323

```
//     This is the exact code for search facility in datagridview.
private void buttonSearch_Click(object sender, EventArgs e)
{
    string searchValue=textBoxSearch.Text;
    int rowIndex = 1;  //this one is depending on the position of cell or column
    //string first_row_data=dataGridView1.Rows[0].Cells[0].Value.ToString() ;

    dataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
    try
    {
        bool valueResulet = true;
        foreach (DataGridViewRow row in dataGridView1.Rows)
        {
            if (row.Cells[rowIndex].Value.ToString().Equals(searchValue))
            {
                rowIndex = row.Index;
                dataGridView1.Rows[rowIndex].Selected = true;
                rowIndex++;
                valueResulet = false;
            }
        }
        if (valueResulet != false)
        {
            MessageBox.Show("Record is not avalable for this Name"+textBoxSearch.Text,"Not Found");
            return;
        }
    }
    catch (Exception exc)
    {
        MessageBox.Show(exc.Message);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-07T18:03:48.560

`DataTable`直接从or过滤数据`Dataset`：

```
"MyTable".DefaultView.RowFilter = "<DataTable Field> LIKE '%" + textBox1.Text + "%'";
   this.dataGridView1.DataSource = "MyTable".DefaultView; 
```

在事件`KeyUp`上使用此代码`Textbox`，将“MyTable”替换为您的表名或数据集，替换为您要进行搜索的字段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-12T15:16:41.593

"MyTable".DefaultView.RowFilter = " LIKE '%" + textBox1.Text + "%'"; this.dataGridView1.DataSource = "MyTable".DefaultView;

与数据库连接和数据表的关系如何？我应该如何正确设置 DefaultView？

我使用此代码获取数据：

```
con = new System.Data.SqlServerCe.SqlCeConnection();
con.ConnectionString = "Data Source=C:\\Users\\mhadj\\Documents\\Visual Studio 2015\\Projects\\data_base_test_2\\Sample.sdf";
con.Open();

DataTable dt = new DataTable();

adapt = new System.Data.SqlServerCe.SqlCeDataAdapter("select * from tbl_Record", con);        
adapt.Fill(dt);        
dataGridView1.DataSource = dt;
con.Close(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-05T22:53:36.077

```
 private void btnSearch_Click(object sender, EventArgs e)
    {
        try
        {
            string searchValue = txtSearch.Text;
            string colName = dataGridView1.Columns[1].Name;//Column Number of Search
            ((DataTable)dataGridView1.DataSource).DefaultView.RowFilter = string.Format(colName+" like '%{0}%'", searchValue.Trim().Replace("'", "''"));
        }
        catch (Exception exc)
        {
            MessageBox.Show(exc.Message);
        }

    }

    private void txtSearch_TextChanged(object sender, EventArgs e)
    {
        btnSearch_Click(null,null);
    } 
```

# sql-server - 为什么 T-SQL EXEC 不返回小数？

> ID：13173921
> 
> 赞同：4
> 
> 时间：2012-11-01T09:10:26.193
> 
> 标签：sql-server, tsql

我有一个简单的查询，我已经变成了一个存储过程：

```
create procedure GetAmount as
declare @amnt decimal(25,2)

select @amnt=66666.67 
set @amnt = @amnt/3.00

print @amnt
return @amnt 
```

如果我打印@amnt，它会返回 22222.22

但是如果我使用 EXEC 并将其分配给一个变量：

```
declare @x numeric(25,2)
exec @x=SP_GetAmount()
print @x 
```

它返回 22222.00

有谁知道为什么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T09:12:08.577

`return` [返回一个整数](http://msdn.microsoft.com/en-us/library/ms174998.aspx)。使用输出参数。

```
create procedure GetAmount 
    @amnt decimal(25,2) OUTPUT
as

select @amnt=66666.67 
set @amnt = @amnt/3.00

GO 
```

并称之为：

```
declare @x numeric(25,2)
exec SP_GetAmount() @amnt = @x OUTPUT
print @x 
```

# java - 以 CHM 或任何其他电子书格式嵌入小程序

> ID：13173926
> 
> 赞同：2
> 
> 时间：2012-11-01T09:10:50.353
> 
> 标签：java, applet, chm

我想从我希望从我拥有的 HTML 文件中创建的 CHM 文件中嵌入一个 java 小程序。

我有嵌入了 Java 小程序的 HTML 文件。当我尝试使用一些 CHM 转换器将其转换为 CHM 时，小程序消失了。我刚刚得到了小程序以外的剩余部分。

有什么方法可以获取嵌入了小程序的 CHM（或任何其他电子书格式）文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:55:32.687

不。电子书通常不支持 JRE，因此当从 HTML 转换为 CHM 或电子书格式时，applet 元素被剥离也就不足为奇了。

# iphone - 使用 UIGraphicsGetImageFromCurrentImageContext 时更正 GraphicsContext

> ID：13173933
> 
> 赞同：1
> 
> 时间：2012-11-01T09:11:20.727
> 
> 标签：iphone, ios, cocoa-touch, core-graphics, quartz-graphics

我有以下方法，我正在尝试对图像进行一些绘图：

```
- (UIImage*) renderImage
{
    UIGraphicsBeginImageContextWithOptions(self.size, NO, 0);
    CGContextRef context = UIGraphicsGetCurrentContext();
    //drawing code

    UIImage *image = [UIGraphicsGetImageFromCurrentImageContext() retain];
    UIGraphicsEndImageContext();  
    return [image autorelease];    
} 
```

当我运行这段代码时，我注意到我受到的打击比我简单地`drawRect`在`UIView`. 我是否在这里绘制了错误的图形上下文（即`CGContextRef context = UIGraphicsGetCurrentContext();`）？还是`UIGraphicsGetImageFromCurrentImageContext`只是比抽签贵得多`drawRect`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T11:00:09.387

主要区别在于您创建的上下文需要离屏渲染，它与 -drawRect 中创建的上下文不同。因此，您正在向堆中添加额外的内存，直到您释放图像为止。

# php - 请帮助改进 PHP 脚本，以便我可以从我的网站下载更大的视频文件（近 500 MB）

> ID：13173934
> 
> 赞同：0
> 
> 时间：2012-11-01T09:11:32.897
> 
> 标签：php

当我尝试从我的 PHP 网站下载大尺寸视频时，下载在下载近 18 MB 后停止。

* * *

我正在使用以下脚本下载视频文件。

```
@ignore_user_abort();
@set_time_limit(0);
ob_end_clean();

if (!is_file($str_clip_path) or connection_status()!=0) return(FALSE);

header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");
header("Expires: ".gmdate("D, d M Y H:i:s", mktime(date("H")+2, date("i"), date("s"), date("m"), date("d"), date("Y")))." GMT");
header("Last-Modified: ".gmdate("D, d M Y H:i:s")." GMT");
header("Content-Type: application/octet-stream");
header("Content-Length: ".(filesize($str_clip_path)));
header("Content-Disposition: attachment; filename=".$str_download_filename);
header("Content-Transfer-Encoding: binary");
header("Accept-Ranges: bytes");

if ($fp = fopen($str_clip_path, 'rb')) 
{
    while(!feof($fp)) 
    {
        print(fread($fp, 1*(1024*1024)));
        flush();
    ob_flush();
    }
    fclose($fp);
    exit();
} 
```

* * *

在我的 IIS 服务器上，为特定变量设置了以下值。

```
memory_limit        512M
max_execution_time          10800
max_input_time      10800
post_max_size       512M
upload_max_filesize     512M 
```

请帮助我对上述脚本进行必要的更改，以便我可以从网站下载更大的视频文件。

提前谢谢你，KRA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:48:44.933

如果你使用 nginx 网络服务器，你可以使用[x-accel-redirect](http://wiki.nginx.org/XSendfile)

# html - ie7 li 下 li 而不是等高

> ID：13173936
> 
> 赞同：-1
> 
> 时间：2012-11-01T09:11:41.710
> 
> 标签：html, css, internet-explorer, internet-explorer-7

我的表的 li 在 ie7 中被放置在另一个之下，而不是像所有其他浏览器一样位于同一行。

我应该在 li 或 ul 定义中添加什么，如果有帮助，我可能只为 ie7 添加不同的 css。

关联：

[https://dl.dropbox.com/u/107452929/ie7/index.htm](https://dl.dropbox.com/u/107452929/ie7/index.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T09:21:43.760

问题似乎是 Internet Explorer 只能应用于“*自然*`display: inline-block`”内联的元素。

 *对于 IE，解决方法似乎是改为使用`float:left`。

尽管另一种解决方案似乎是为 IE 使用单独的有条件包含的 CSS：

```
<!--[if ie lte 7]>
    .liElementsClass,
    li {
        display: inline;
        zoom: 1;
    }
<![end if]--> 
```

参考：

*   [Hanami Design 的“显示内联块跨浏览器解决方案”](http://hanamidesign.com/blog/display-inline-block-cross-browser-solutions/)。
*   [Quirksmode，兼容性表`display: inline-block`](http://www.quirksmode.org/css/display.html#t03)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:13:25.063

尝试添加`display:block;`到您的`<li>`*

# java - 如何通过查看 gc 日志来查看正在运行的垃圾收集器？

> ID：13173939
> 
> 赞同：8
> 
> 时间：2012-11-01T09:11:45.983
> 
> 标签：java, garbage-collection, jvm

如何通过查看 gc 日志中的次要和主要收集来查看正在运行的垃圾收集器（CMS、Parallel 等）？我无权访问设置为 java 的命令行选项（应用服务器的 sysadm 不会让我看到它们）。我确实有相当冗长的 gc 日志。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:20:56.527

GC 消息的确切格式取决于 JVM 版本和 JVM 设置。您可以在[有关 GC 调优的 Oracle 教程](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)中查看示例。

`DefNew`是默认收集器。它是串行的还是并行的，选择哪一个取决于 JVM 版本/设置。您可以在 JDK 6 中使用`java -XX:+PrintCommandLineFlags -version`. 在我的系统上打印：

```
-XX:MaxHeapSize=1073741824 -XX:ParallelGCThreads=4 -XX:+PrintCommandLineFlags -XX:+UseParallelGC 
```

这意味着并行 GC`DefNew`适合我。您可以检查这个[SO question](https://stackoverflow.com/q/5024959/162634)并且其中一个答案引用[了此表](http://www.techpaste.com/2012/02/default-jvm-settings-gc-jit-java-heap-sizes-xms-xmx-operating-systems/#more-3569)，可能会对您有所帮助。

**更新**JDK 6 中的默认 Old Gen GC 是 ParallelOldGC，请参阅[这个启发性的 pdf](http://www.austinjug.org/presentations/JDK6PerfUpdate_Dec2009.pdf)。特别是，您可以使用`-XX:+UseConcMarkSweepGC` JVM 选项将 Old Gen GC 更改为更新的 Concurrent-mark-sweep 之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-07T14:13:16.720

引用 Charlie Hunt 的《Java Performance》一书，GC 日志中使用的年轻代空间的名称随着使用的 GC 而变化：

```
PSYoungGen => ParallelGC
ParNew =>  CMS
DefNew  => SerialGC 
```

我不确定G1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T06:16:30.230

[您可以在本文](http://blog.ragozin.info/2011/12/garbage-collection-in-hotspot-jvm.html)中找到所有 HotSpot JVM 垃圾收集算法的 GC 日志示例。

`-XX:+PrintGCDetails`应该启用以在 GC 日志中查看该级别的详细信息。

# ruby-on-rails - 在rails中将孩子添加到父母

> ID：13173940
> 
> 赞同：1
> 
> 时间：2012-11-01T09:12:01.193
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个用户模型，想在编辑父级时通过表单将子级添加到父级，我正在使用 Ancestry gem 创建层次结构（以前[在这里](https://stackoverflow.com/questions/13142785/form-for-adding-children-using-ancestry-gem)问过类似的问题，但可能有点不清楚）。我尝试使用虚拟属性来给要添加的孩子一个属性，在用户模型中我已经向 attr_accessor 添加了一个 new_child。现在父用户已更新，我想更新子用户（添加父用户）。我已经在控制器中尝试过了，但得到了一个未定义的方法“update_attributes！” 对于 nil:NilClass 错误，有什么建议可以解决这个问题吗？

用户控制器.rb

```
def update
   User.find_by_id(@new_child).update_attributes!(parent_id: @user)
   ...
end 
```

用户.rb

```
attr_accessible :new_child
attr_accessor :new_child 
```

编辑.html.erb

```
<%= form_for @user do |f| %>
  <%= f.label :name %>
  <%= f.text_field :name %>
  <%= f.label :new_child, "Add child (enter child id)" %>
  <%= f.text_field :new_child %>
  <%= f.submit "Update", class: "btn" %>            
<% end %> 
```

# debugging - 如何调试 DLL 加载失败：对内存位置的访问无效

> ID：13173944
> 
> 赞同：5
> 
> 时间：2012-11-01T09:12:11.630
> 
> 标签：debugging, dll, mingw, mingw-w64

我有一个 MinGW64 编译的 DLL（python 模块），加载时会出错：

```
ImportError: DLL load failed: Invalid access to memory location 
```

DLL 仅链接到 64 位库（Dependency Walker 证实了这一点）并具有调试符号。代码是相当复杂的 c++11（大约 30 个源文件），我不能一分为二。我已经用 MinGW64 成功地编译和测试了其他模块，工具链工作正常。

网络上的一些人报告了使用 SSE2 指令的代码错误（我的硬件支持这些指令，我没有明确使用它们）或从尚未初始化的全局变量中读取（有一些函数带有`__attribute__((constructor))`, 但是根据我所阅读的内容，这些应该在 MinGW64 中工作得很好；**更新：**我删除了所有构造函数以确保它不是原因 - 它没有区别）。

有什么方法可以分析错误来自哪里？

# 我尝试了什么：

当我在调试器中加载 DLL 时（`ctypes.WinDLL(...)`使用`ntdll.dll`

```
Program received signal SIGTRAP, Trace/breakpoint trap.
0x0000000077c23522 in ntdll!ExpInterlockedPopEntrySListFault16 ()
   from C:\Windows\system32\ntdll.dll
(gdb) warning: HEAP[python.exe]:
warning: Invalid address specified to RtlSizeHeap( 00000000003B0000, 0000000002306830 )

(gdb) bt
#0  0x0000000077c23522 in ntdll!ExpInterlockedPopEntrySListFault16 ()
   from C:\Windows\system32\ntdll.dll
#1  0x0000000077c0c241 in ntdll!RtlZeroHeap ()
   from C:\Windows\system32\ntdll.dll
#2  0x0000000077c0c250 in ntdll!RtlZeroHeap ()
   from C:\Windows\system32\ntdll.dll
#3  0x0000000077c3c130 in ntdll!LdrLoadAlternateResourceModuleEx ()
   from C:\Windows\system32\ntdll.dll
#4  0x00000000003b0000 in ?? ()
#5  0x0000000002306830 in ?? ()
#6  0x00000000003b0000 in ?? ()
#7  0x00000000792e21c0 in ?? ()
#8  0x00000000003b0000 in ?? ()
#9  0x0000000077c3c0ba in ntdll!LdrLoadAlternateResourceModuleEx ()
   from C:\Windows\system32\ntdll.dll
#10 0xffffffffffffffff in ?? ()
#11 0x0000000050000061 in ?? ()
#12 0x0000000000000000 in ?? () 
```

我还将目标文件与“hello world”可执行文件相关联，但是在打开文件时 gdb 已经崩溃`Reading symbols from woomain.exe`（这是我的可执行文件）：

![gdb 崩溃对话](../Images/9ff0a2a9570837f3fd33157043046928.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-07T10:45:14.083

问题是 python 在编译模块时链接到与 MinGW 不同的 msvcrt - 它在[http://bugs.python.org/issue16472](http://bugs.python.org/issue16472)报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T07:10:27.057

好吧，这可能不是适合您的解决方案，只是一个提示。`ImportError: DLL load failed: Invalid access to memory location.`我在尝试用 C 编写自己的 Python 扩展时遇到了同样的错误。平台：Windows 32 位。

这是一个真正的痛苦，因为在所有 Python 环境（Spyder、Notebook、普通控制台......）中，这个错误随机出现在交互模式和非交互模式中。我使用 MinGW 和 Python 的 distutils (command) 编译了我的代码`python setup.py install`。编译没有给出警告或错误，并将 pyd 文件生成到正确的目录。但是，当我尝试导入这个模块`import example`pro 时，我的 Python 代码不规则地崩溃了（通常只有五分之一的导入模块尝试成功）。

奇怪的是，在另一台计算机上它工作得很好......好吧，我终于找到了一个解决方法 - 我下载了一个更新版本的 MinGW（在我使用 Qt SDK 分发包中的版本之前）并再次编译了模块。然后它不再崩溃。但是我没有找到任何系统的解决方案或解释。所以我可能与用于生成 pyd 文件的编译器有关（可能没有它的 DLL？我不知道确切）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-08T04:37:27.723

我在导入 win32api 时遇到了同样的错误，我只是在导入 win32api 之前导入了 ctypes 并且错误不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-26T06:41:49.003

对我来说，我在 opencv2 上遇到了这样的错误：

```
from .cv2 import *

ImportError: DLL load failed: Invalid access to memory location. 
```

解决方案：为此，我刚刚卸载了 opencv 模块并重新安装了它。

卸载：

```
pip uninstall opencv-python 
```

安装：

```
pip install opencv-python 
```

现在它对我有用。

# php - 将表格结构化表单数据存储到数据库中-正确的方法是什么？

> ID：13173950
> 
> 赞同：1
> 
> 时间：2012-11-01T09:12:38.300
> 
> 标签：php, mysql, database-design

这将是一个漫长的阅读，所以请多多包涵。我很擅长 PHP，但我在数据库设计方面的知识很差。我正在研究它，因为我意识到在使用应用程序时掌握设计数据库的命令是最重要的事情，如果你掌握了它，事情会变得如此简单。这个线程的开始也是因为我对数据库交互的了解不足。

我基本上有大约 40 种形式，其结构类似于下图：

![表格结构](../Images/c3cd5ca55d0e6a9064bc5d0669558af4.png)

列数和行数因一种形式而异，但它们或多或少遵循如上所示的类似结构。

**我计划实现的目标**

*   使用单个/相同的 php 页面来处理（即，将数据插入数据库）所有 40 个表单。换句话说，我打算`<form action="process.php">`对所有表格都使用相同的。
*   避免硬编码；尽可能保持代码`process.php`动态。

**路障**

*   每个表单中的参数数量各不相同，所以我需要想办法找出每个表单中存在的行数。
*   很难决定如何命名表单中使用的元素（单选按钮、复选框、下拉菜单、文本区域、文本框等）。
*   我在试图弄清楚如何进行插入时遇到了麻烦。一次插入一行似乎是合适的，但我将如何实现这一点？例如，如果我使用循环，`Ambiance`则应在第一次迭代中插入相关数据。在第二个循环中，`TV Room`应该插入相关的数据，依此类推。问题是如何相应地编码？

**我的想法**

*   表单的列（参数、满足要求、观察、状态、备注）成为MySql表的字段。

*   然后使用循环在表中一次插入一行。

*   使用数组来命名表单中使用的元素。例如，ambiance[requirement], ambiance[observation], ambiance[status], ambiance[remarks] 用于第一行的元素，room[requirement], room[observation], room[status], room[remarks] 用于第一行的元素第二行以此类推。然后插入可以通过使用在一行中完成`INSERT INTO tablename (implode(',', array_keys($ambiance))) VALUES (implode(',', $ambiance))`

**这不是关于什么**

*   要求提供/邮政编码。

*   `Give me teh codez`不是我的经营方式。我只是在寻求有关如何执行该任务的说明。

**这是关于什么的**

*   征求建议。

*   确定我是否朝着正确的方向前进。

*   询问是否有其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:26:33.700

我做过类似但不完全相同的事情。我使用了这两个表：

*   形式
    *   ID
    *   名称（例如反馈、评论、调查）

* * *

*   表单域**
    *   ID
    *   表单ID
    *   标题（例如姓名、公司、地址）
    *   SubCaption（例如输入您的全名）
    *   必需的
    *   数据类型（例如整数、数字、字符串、电子邮件）
    *   最长长度

** 查看数据库表的架构以获得更多想法。

在您的情况下，您需要另一对表：

*   表单提交
    *   ID
    *   日期

* * *

*   表单提交值
    *   ID
    *   表单提交ID
    *   FormFieldID（可以用来推导出FormID，也可以在FormSubmission表中添加FormID）
    *   值（足以容纳任何值的字段）

有几个问题。我会记下几点：

*   UI 需要根据数据类型而有所不同（整数/数字的小 10 个字符输入，布尔复选框，文本的文本区域）
*   不知道如何处理列表框。也许您需要另一张桌子
*   您不能正确使用索引，因为所有内容都存储在通用文本字段中
*   客户端验证是可能的，但很困难
*   The tables need to be very generic. Based on my experience this requires extra effort to ensure that *x* works with all *y*.

# vba - 如何使用 VBA 向 Powerpoint 添加新的（自定义的）主题颜色

> ID：13173954
> 
> 赞同：0
> 
> 时间：2012-11-01T09:13:14.113
> 
> 标签：vba, powerpoint

任何人都可以帮我在 ppt 演示文稿中添加新的（定制的）主题颜色。我所说的主题颜色是指当我们点击PPT 中的**形状填充**、**形状轮廓按钮时出现在小弹出窗口中的调色板。**

在此先感谢，斯里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:05:30.900

Echo Swinford 有一个关于手动添加颜色的教程和一个可以完成这项工作的插件的链接。

[http://echosvoice.com/tutorials-2/2010-2/powerpoint-2010-custom-colors/](http://echosvoice.com/tutorials-2/2010-2/powerpoint-2010-custom-colors/)

它涉及修改构成 PPTX/etc 的 XML 文件之一。文件。

# php - 在 PHP 中从 2 个数组中创建新数组相同的键

> ID：13173958
> 
> 赞同：0
> 
> 时间：2012-11-01T09:13:33.177
> 
> 标签：php, arrays

今天我发现了新的堆栈（也许和我一起堆栈）。我正在为一个新的简单 PHP 框架学习，但是当需要将一组数据添加到数据库时。这个数组由 2 个数组组成：一个是默认数组，剩下一个是新的请求数组。我将演示：

`

```
array $default = (
[cat] = '0',
[dog] = '0',
[bird] = '0'
)

array $request = (
[cat] = '10',
[dog] = '12',

[someanimal] = '100'
) 
```

`

现在我想创建一个新数组，结果如下：`array $new = ([cat]='10', [dog]='12', [bird]='0')`。在 PHP 中可能有一些命令？或者我们需要为它制作一个自定义功能？

谢谢大家的帮助:)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:18:32.707

尝试

```
$result = $default;
foreach ($request as $key=>$value) {
  if (isset($result[$key])) {
    $result[$key] = $value;
  }  
} 
```

或者

```
$result = array_intersect_key(array_merge($default, $request), $default) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:17:35.847

你是否在追求这样的事情：

```
$finalArray = array_merge($default, $request); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:18:04.160

尝试`$result = array_merge($array1, $array2);`

[http://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

# javascript - jQuery open external toggle expanded, default is closed

> ID：13173964
> 
> 赞同：0
> 
> 时间：2012-11-01T09:13:55.267
> 
> 标签：javascript, jquery

I have a toggle slide. Is it possible to achieve the functionality below?

When I open an anchor link (that relies on id), e.g. `http://websitename.com/page#name`, the toggle slides are opened.

However, when I open the link without an anchor name, e.g. `http://websitename.com/page`, the toggle is closed.

[Here is my toggle](http://jsfiddle.net/9EFNK/19/)

Many thanks for any advice

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:37:51.330

I'm not sure exactly what you mean but is this what you want?

```
if(window.location.hash === "name"){
     $('.showpanel').show();
     $('.showpanel2').show();
} 
```

[http://jsfiddle.net/9EFNK/21/](http://jsfiddle.net/9EFNK/21/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:46:21.157

Perhaps something like

```
if(window.location.hash === "#showpanel") {
  $('.showpanel').slideToggle('slow');
} 
```

If you changed your div classes to ids, you could probably code something a little more elegantly with

```
$(window.location.hash).show(); 
```

# android - FrameLayout 的内容不显示

> ID：13173967
> 
> 赞同：3
> 
> 时间：2012-11-01T09:14:19.453
> 
> 标签：android, android-layout

由于常规`Button`类的边距和填充问题，我一直在研究`Layout`扩展的自定义`FrameLayout`。我遇到了一个问题，布局的内容没有显示出来。一旦我将其更改为另一个，例如`RelativeLayout`内容就会显示出来。

这是我的相关代码：

```
private static final int COLOR = R.styleable.MyButton_color;
private static final int TEXT = R.styleable.MyButton_text;

public MyButton(Context context, AttributeSet attrs, int defStyle) {
  super(context, attrs, defStyle);
  LayoutParams backgroundParams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
  backgroundParams.gravity = Gravity.FILL;
  background = new ImageView(context, null, defStyle);
  addView(background, backgroundParams);

  text = new TextView(context, null, defStyle);
  text.setTypeface(null, Typeface.BOLD);
  LayoutParams textParams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
  textParams.gravity = Gravity.CENTER;
  addView(text, textParams);

  TypedArray a = context.obtainStyledAttributes(R.styleable.MyButton);
  try {
    setColor(Color.values()[a.getInteger(COLOR, 0)]);
    setText(a.getString(TEXT));
  } finally {
    a.recycle();
  }
}

public void setText(CharSequence text) {
  this.text.setText(text);
}

private void setColor(Color color) {
  switch (color) {
    case ORANGE:
      text.setTextColor(getContext().getResources().getColor(R.color.text_blue));
      background.setImageResource(R.drawable.button_orange);
      break;
    case BLUE:
      //TODO set colors
      break;
  }
} 
```

我在这个上缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:03:16.930

扩展 FrameLayout，这是一个特殊的布局，它在大多数 API 版本上设置了一个标志，以不调用绘图函数。

为了克服这个问题，在构造时将标志设置为 false：

```
public MyButton(
...
    setWillNotDraw(false);
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T14:04:01.833

答案很明显。

```
LayoutParams backgroundParams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT); 
```

必须替换为

```
LayoutParams backgroundParams = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT); 
```

当然，这同样适用于`textParams`。

# ip - 获取用户的本地 IP - 总是获取 192.168.2.1

> ID：13173968
> 
> 赞同：-1
> 
> 时间：2012-11-01T09:14:29.093
> 
> 标签：ip, httpcontext

我需要为我的 ASP.NET 应用程序获取用户的本地 IP，我正在使用这种方法：

```
protected string GetIPAddress()
{
    System.Web.HttpContext context = System.Web.HttpContext.Current;

    string ipAddress = context.Request.ServerVariables["HTTP_X_FORWARDED_FOR"];

    if (!string.IsNullOrEmpty(ipAddress))
    {
        string[] addresses = ipAddress.Split(',');
        if (addresses.Length != 0)
        {
            return addresses[0];
        }
    }

    return context.Request.ServerVariables["REMOTE_ADDR"];
} 
```

但是，当我发布我的网站时，**`192.168.2.1`**无论用户从哪里打开网站，我总是会得到。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:20:57.407

一些网络设备使用[`X-forwarded-for`标头](http://en.wikipedia.org/wiki/X-Forwarded-For)。您应该检查访问您的应用程序的请求是否具有此标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:27:29.390

`HTTP_X_FORWARDED_FOR`您可以从或获取客户端的 IP 地址`REMOTE_ADDR`。

```
var ipAddress = HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED_FOR"];

if (string.IsNullOrEmpty(ipAddress ))
{
    ipAddress = HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"];
}

return ipAddress; 
```

# c# - 数组相关问题

> ID：13173972
> 
> 赞同：-1
> 
> 时间：2012-11-01T09:14:36.467
> 
> 标签：c#, arrays

我正在尝试创建一个应用程序，提示用户输入 5 个名称，然后显示每个名称并允许用户输入该特定名称的分数。因此，如果在第一个数组中，索引 [0] 的值是字符串“Bob”，那么在另一个分数数组中，索引 [0] 应该是 bob 的分数。

我很难理解如何将 nameArray[] 传递给 PopulateScore() 方法，以便它可以显示名称供用户输入相应的分数。

我还必须按名称搜索数组并返回分数。

谢谢你的帮助。

```
public class InitArraya
{
    public static string[] arrayName = new string[5];
    public static int[] arrayScore = new int[5];

    public static void PopulateNameArray()
    {
        // Prompt user for names and assign values to the elements of the array
        for (int intCounter = 1; intCounter < arrayName.Length; intCounter++)
        {
            Console.Write("Enter name {0}: ", intCounter);
            arrayName[intCounter] = Console.ReadLine();
        }
    }

    public static void PopulateScoreArray(string[] array)
    {    
        // Prompt user for names and assign values to the elements of the array
        for (int intCounter = 1; intCounter < 5; intCounter++)
        {
            Console.Write("Enter score for {0}: ", arrayName[0]);
            arrayScore[intCounter] = Convert.ToInt32(Console.ReadLine());
        }
    }

    public static void Main( string[] args )
    {
        Console.WriteLine("Enter 5 names:"); // headings

        PopulateNameArray();
        PopulateScoreArray(arrayName);

        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:20:33.270

制作包含名称和分数的对象数组，这将使您的解决方案更加有用和可读。

```
public class NameScore{
   public string Name { get; set; }
   public int Score { get; set; }
}

public class InitArraya{
    public NameScore[] arrayScore = new NameScore[5]; 
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:20:42.123

```
public static void PopulateScoreArray(string[] array)
{

    // Prompt user for names and assign values to the elements of the array
    for (int intCounter = 0; intCounter < array.Length; intCounter++)
    {
        Console.Write("Enter score for {0}: ", array[intCounter]);
        arrayScore[intCounter] = Convert.ToInt32(Console.ReadLine());

    }
} 
```

假设arrayName中总是有5个名字。否则应进行额外检查。

哦，并且在 PopulateNameArray 中也从 0 开始 intCounter。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:19:43.560

在

```
public static void PopulateScoreArray(string[] array) 
```

改变

```
 Console.Write("Enter score for {0}: ", arrayName[0]); 
```

到

```
Console.Write("Enter score for {0}: ", array[intCounter]); 
```

使用输入数组。同样 for(-) 将计数器的开始更改为 0

```
for (int intCounter = 0; intCounter < 5; intCounter++) 
```

# git - 管理文件中的合并冲突时无法在 netbeans 中编辑代码

> ID：13173975
> 
> 赞同：5
> 
> 时间：2012-11-01T09:14:56.413
> 
> 标签：git, netbeans, merge, edit, conflict

我正在使用 Git 和 Netbeans。这两个工具都很棒。尝试解决文件之间的合并冲突时，我遇到了一个小问题：我无法编辑代码。我只能在合并冲突解决程序中显示的代码中进行选择。但我希望有更多的可能性： - 保留两个文件的更改 - 向文件添加更改 但是，由于我不允许在 Netbeans 中编辑文件，所以我不能这样做。我认为如果我使用 Notepad++ 将文件编辑为 txt 文档是可能的。但是，我宁愿留在 Netbeans 环境中。

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:20:24.860

目前这是不可能的:(相关的错误在这里： http://netbeans.org/bugzilla/show_bug.cgi?id= [141198](http://netbeans.org/bugzilla/show_bug.cgi?id=141198)你应该去投票，所以希望它能尽快添加，因为这是一个痛点在注。

# c - 如何获取文件的创建时间和最后写入时间

> ID：13173978
> 
> 赞同：1
> 
> 时间：2012-11-01T09:15:07.970
> 
> 标签：c, time, system

我正在打开几个文件，并想在我的结构中添加文件的创建时间和最后一次写入时间。有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:20:31.643

您可以使用[fstat](http://linux.die.net/man/2/fstat)来读取上次写入时间（请参阅参考资料`stat.st_mtime`）。

我不知道读取创建时间的便携方式。在 Windows 上，您可以使用[GetFileTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724320%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T09:19:35.050

使用[`stat()`](http://linux.die.net/man/2/stat).

```
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>

int stat(const char *path, struct stat *buf); 
```

`struct stat`包含几个描述时间和日期信息的字段，特别是

```
time_t    st_atime;   /* time of last access */
time_t    st_mtime;   /* time of last modification */
time_t    st_ctime;   /* time of last status change */ 
```

# sql - 在应用程序中拥有 SQL 数据的副本是保存 SQL SELECTS 的好主意吗？

> ID：13173984
> 
> 赞同：0
> 
> 时间：2012-11-01T09:15:37.407
> 
> 标签：sql, sql-server, performance, architecture

我正在开发一个多线程 .NET 4 应用程序，它连续获取数据并将它们写入 SQL 数据库（MySQL 或 SQL Server - 尚不确定）。

每次`INSERT`执行 a 时，至少需要一个先验`SELECT`才能与数据库同步。这意味着应用程序获得一个包含新旧数据的块，然后必须检查哪些数据集是新的，哪些已经在数据库中。

这意味着其中的很多`SELECTS`结果每次都会产生或多或少相同的数据。

在应用程序中保存每个表的最后 x 个条目的副本是个好主意吗？这样可以在副本而不是数据库上进行同步。

临：

*   快点

反对：

*   占用大量内存
*   与数据库不同步的风险

你怎么看？这种用例的最佳实践是什么？还有其他优点和缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:21:28.647

除非您同时有外部程序写入数据库，否则可以使用缓冲。

但不是缓冲 SELECT 结果，只需将最后 X 个（合理数量）插入请求的缓冲区添加到 insert 方法，并且仅当它不在该列表中时才插入新的。

您可能还想锁定插入方法，以确保包含检查始终正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T17:59:21.817

如果您有多个进程写入数据库，那么在内存数据和数据库之间保持完美同步并非易事。事实上，确认您已同步的唯一方法是对数据库进行 SELECT 查询。因此，您可以在完美同步和具有一定容差的同步之间进行权衡，这是非常有效的。

我的建议可能对这两种情况都有帮助，那就是：

1.  调整您的 SELECT 查询。必要时添加索引。
2.  创建元数据，例如版本号。因此，您只需检查一些非常琐碎的事情即可确定是否需要同步。
3.  编写一个存储过程来实现您的 SELECT 和 INSERT 逻辑。这样您就不必担心对数据库进行多次调用。

# windows-8 - 在 Windows 应用商店应用程序上实现“评分应用程序”功能

> ID：13173987
> 
> 赞同：4
> 
> 时间：2012-11-01T09:15:55.827
> 
> 标签：windows-8, winjs, rate

我正在尝试使用 HTML / Javascript 在 Windows Store 应用程序中实现评级功能。

我在应用程序中显示了一个类似于下面的弹出对话框，当单击“评分”时，我想重定向到用户可以对应用程序进行评分的市场。

![在此处输入图像描述](../Images/baa40e3c7341a7d6d18cb9194422c40a.png)

这是一项可以通过 MarketplaceReviewTask 在 Windows Phone 7 上轻松完成的任务。

我可以调用 Windows 8 上的 API 来实现这一目标吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T11:08:02.397

“设置”魅力中的“评分和评论”链接将自动为您以外的用户显示（因为您无法为自己的应用评分）。

如果你想要一个自定义链接，你可以像 Jim 说的那样使用 LaunchUriAsync，使用这个 URI：

```
"ms-windows-store:REVIEW?PFN=[my-pfm]" 
```

其中 my-pfm 是“包系列名称”，您可以在应用程序清单中找到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T20:54:02.390

这是我发现有帮助的博客文章：

[http://www.andybeaulieu.com/Default.aspx?tabid=67&EntryID=227](http://www.andybeaulieu.com/Default.aspx?tabid=67&EntryID=227)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T14:54:18.653

如果您使用[此处建议的 URI 格式的](http://blogs.msdn.com/b/windowsstore/archive/2012/02/22/linking-to-your-apps-on-the-web.aspx)[协议激活](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh779670.aspx)( [LaunchUriAsync](http://msdn.microsoft.com/en-us/library/windows/apps/Hh701480.aspx) )，您将进入应用商店中的应用页面；但是，用户还有一个额外的步骤来单击写评论。可能有一种方法可以深层链接到它，如果我发现我会更新。

# mapping - 标识映射。将不同表中的多个 ID 链接到单个 ID

> ID：13173988
> 
> 赞同：0
> 
> 时间：2012-11-01T09:15:57.170
> 
> 标签：mapping, data-mapping

是否可以将不同表中的产品 ID 链接到一个通用产品 ID？例如，表 A 中的 1014 id 和表 B 中的 2015 id 到表 C 中的一个通用 10 id ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:35:18.697

在这种情况下，您可以执行以下操作：

首先是您的内部产品：

```
master_id,  name, description, etc...
1, "Keyboard", "Nice"
2, "Mouse", "Microsoft"
3, "Monitor", "Bright"
4, "Printer", "Not the best" 
```

第二个表 a 和表 b 将有一个 master_id 列，该列引用其中一个 id。

然后从表 a 或表 b 中选择所有键盘：

> SELECT * FROM table_a JOIN products ON table_a.master_id = products.master_id WHERE products.master_id =1;
> 
> SELECT * FROM table_b JOIN products ON table_a.master_id = products.master_id WHERE products.master_id =1;

然后，您可以通过联合从两个表中获取所有键盘：

> SELECT * FROM table_a 在 table_a.master_id = products.master_id WHERE products.master_id =1 UNION 上加入产品
> 
> SELECT * FROM table_b JOIN products ON table_a.master_id = products.master_id WHERE products.master_id =1;

欢迎来到 StackOverflow！

# sql - 将存储过程转换为表值查询

> ID：13173989
> 
> 赞同：3
> 
> 时间：2012-11-01T09:16:01.183
> 
> 标签：sql, sql-server-2008, stored-procedures, stored-functions, sql-function

我有这个程序

```
ALTER PROCEDURE [dbo].GetHerdByUserProc(@user int)
As 
    begin
        Declare
            @GroupId uniqueidentifier,
            @UserTrade bit

        Set @GroupId = (select tbUser.group_id from tbUser where Userid = @user)
        Set @UserTrade = (select tbUser.isTrade from tbUser where Userid = @user)
        if @GroupId IS NOT NULL and @UserTrade = '1'
        Begin 
            select HerdId from tbUserHerds where tbUserHerds.UserId in (select Userid from tbUser where tbUser.Group_Id = @GroupId)
            return;
        END
        If @GroupId IS NOT NULL
        Begin   
            select HerdId from tbUserHerds where tbUserHerds.UserId = @user
            return;
        End
        return;
    End 
```

它正确返回一个列表，除了我还想在返回的列表上运行一个查询，据我所知，我无法编写查询，例如

```
Select * from GetHerdByUserProc 80 
```

所以我正在寻找将其转换为表值查询的最佳方法。

我已经改变了说`'Create Function x(@user int) Returns Table As'`

但这似乎不起作用，它开始向我尖叫错误。

有任何想法吗？数据库服务器是 MSSQL2008

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T09:33:29.927

根据您的语法，我现在假设使用 SQL Server。

从[BOL](http://msdn.microsoft.com/en-us/library/ms186755.aspx)中，内联函数的语法应该是...

```
--Transact-SQL Inline Table-Valued Function Syntax 
CREATE FUNCTION [ schema_name. ] function_name 
( [ { @parameter_name [ AS ] [ type_schema_name. ] parameter_data_type 
    [ = default ] [ READONLY ] } 
    [ ,...n ]
  ]
)
RETURNS TABLE
    [ WITH <function_option> [ ,...n ] ]
    [ AS ]
    RETURN [ ( ] select_stmt [ ) ]
[ ; ] 
```

使用这种格式，您***不能***使用`SET, DECLARE, IF, etc`. 您可以使用的只是一条 SQL 语句。 *[如果您**需要**使用程序流，请查看多语句表值函数。]*

这是一个单独的主题，但内联表值函数比它们的多语句等效函数具有*许多性能效率。*几乎总是，如果你可以内联，你应该这样做。

碰巧的是，您可以在没有`IF`语句的情况下编写逻辑，而只使用一条 SQL 语句。这给出了以下内联表值函数...

```
CREATE FUNCTION [dbo].GetHerdByUserProc(@user int)
RETURNS TABLE
RETURN
  SELECT
    herd.HerdID
  FROM
    tbUser          AS user
  INNER JOIN
    tbUser          AS group
      ON group.group_id = user.group_id
  INNER JOIN
    tbUserHerds     AS herd
      ON herd.UserID = group.UserID
  WHERE
        user.userID   = @userID
    AND user.isTrade  = 1
    AND user.group_id IS NOT NULL

  UNION ALL

  SELECT
    herd.HerdID
  FROM
    tbUser          AS user
  INNER JOIN
    tbUserHerds     AS herd
      ON herd.UserID = user.UserID
  WHERE
        user.userID    = @userID
    AND user.isTrade  <> 1
    AND user.group_id IS NOT NULL 
```

`UNION ALL`与`WHERE`条款的结合有效地`IF`为您做陈述。 *（请注意，如果 user.isTrade 可以是`NULL`，您需要更改`user.isTrade <> 1`为更像`ISNULL(user.isTrade, 0) <> 1`.）*

潜在地，您甚至可以将其简化为单个查询，尽管我会对其进行测试以查看它是否实际上更有效......

```
RETURN
  SELECT
    herd.HerdID
  FROM
    tbUser          AS user
  INNER JOIN
    tbUser          AS group
      ON (group.group_id = user.group_id AND user.isTrade = 1)
      OR (group.user_id  = user.userID)
  INNER JOIN
    tbUserHerds     AS herd
      ON herd.UserID = group.UserID
  WHERE
    user.userID = @userID 
```

*   如果`group_id`为 NULL，则第一次连接永远不会成功。
*   然后两个 IF 模块由`OR`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T09:21:22.910

您可以将 PROC 的结果存储在临时表中：

```
INSERT INTO #temptbl EXEC [dbo].GetHerdByUserProc(80) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T09:21:38.867

您需要在定义中定义表的结构，然后将值插入到声明表变量中...

```
create function x
(
    @user int 
)
returns @t
( 
   herdid int
)
as
begin
    insert @t (herdid)
    select HerdId from tbUserHerds where tbUserHerds.UserId = @user
    -- or whatever...
    return 
end 
```

请参阅[http://msdn.microsoft.com/en-us/library/ms191165(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms191165(v=sql.105).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T18:54:56.147

您可以简单地使用 CASE 语句编写 sql 查询。CASE 语句是处理条件查询的最简单方法。

```
 Declare @GroupId uniqueidentifier,@UserTrade bit

 select HerdId 
 from tbUserHerds 
 where 
 1 = CASE 
    WHEN (select tbUser.group_id from tbUser where Userid = @user) IS NOT NULL 
    THEN 
        CASE 
            WHEN tbUserHerds.UserId = @user THEN 1 
            ELSE 0 
        END

    WHEN 
            (select tbUser.group_id from tbUser where Userid = @user) IS NOT NULL      and           (select tbUser.isTrade from tbUser where Userid = @user) = '1'
    THEN 
        CASE 
            WHEN tbUserHerds.UserId in (select Userid from tbUser     where tbUser.Group_Id = (select tbUser.group_id from tbUser where Userid = @user)) THEN 1 
            ELSE 0 
        END
END 
```

# php - 在zend框架中使用ajax

> ID：13173995
> 
> 赞同：1
> 
> 时间：2012-11-01T09:16:16.620
> 
> 标签：php, zend-framework, jquery, zend-form

我的控制器是

```
public function init()
{
    /* Initialize action controller here */
    $ajaxContext = $this->_helper->getHelper('AjaxContext');
    $ajaxContext->addActionContext('get-ajax-content', 'html')
                ->initContext();
}

public function indexAction()
{
    // action body
    $form = new Zend_Form_Element_Select('menu');
    $parent_array=range('1','9');
        $form->addMultiOptions(array($parent_array));
        $this->view->form = $form;
} 
```

对于这个表单元素，我正在调用 ajax 函数，

```
<script type="text/javascript">

  $(document).ready(function(){
    $("#menu").change(function(){
        $.ajax({
            type: "POST",
            url: "get-data",
            data: "val="+$(this).val(),
            success: function(result){
                $("#div_sortorder").html(result);
            },
            error: function(){
                //console.log('error');
            },
            complete: function(){
                //console.log('complete');
            }
        });
    });
 </script> 
```

并且获取数据操作如下

```
public function getDataAction()
{
    // action body
    $this->view->message = 'This is an ajax message!';
    $params = array(    'host'      =>'localhost',
                        'username'  =>'root',
                        'password'  =>'',
                        'dbname'    =>'cms'
                       );
    $DB = new Zend_Db_Adapter_Pdo_Mysql($params);
    $section_id=$this->getRequest()->getPost('val');
    $menu_order='SELECT * FROM `cms_content_mst` WHERE section_id='.$section_id;
    $menu_order=$DB->fetchAll($menu_order);
    $newContent='<select id="sortorder" name="sortorder">';
    if(!empty($section_id) || $section_id != 0){
        if (empty($menu_order)) {
                    $newContent.='<option value="1" selected="selected">1</option>';
        }
        else
        {

        for ($i=1; $i <= count($menu_order) ; $i++) { 

                  $newContent.='<option value="'.$i.'"';
                  if($i==count($menu_order))
                  { $newContent.=' selected'; }
                  $newContent.='>'.$i.'</option>';

            }

        }
      }
      $newContent.='</select>';

    $this->view->new = $newContent;

} 
```

我已经完全工作了 jquery 。我有 .get 功能，但在调用 .ajax 时它不起作用我是 zend plz 的新手，帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T09:24:23.657

请！如果您能够加载页面，请在控制台中检查。

```
 $.ajax({
            type: "POST",
            url: "get-data",
            data: "val="+$(this).val(),
            success: function(result){
                $("#div_sortorder").html(result);
            } 
```

我认为您提供了错误的网址。