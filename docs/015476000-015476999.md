# StackOverflow 问答 15476000-15476999

# jquery - 滑动面板在点击时打开/关闭

> ID：15476006
> 
> 赞同：0
> 
> 时间：2013-03-18T11:43:58.010
> 
> 标签：jquery, click, mouseover

我怎样才能拥有这个滑动面板功能，但“点击”而不是鼠标悬停/鼠标悬停

```
 <script>
    $("button.main").mouseover(function() {
        $("div.sliderInner").animate(
                {"width": "100px"},
                "500");
    });

    $("button.main").mouseout(function() {
        $("div.sliderInner").animate(
                {"width": "0px"},
                "700");
    });

    $("button.main").mouseover(function() {
       $("div.sliderInner")
      .html('Example Content');
    });

    $("button.main").mouseout(function() {
       $("div.sliderInner")
      .html('');
    });
    </script> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:01:25.403

而不是 mouseover 做 .toggle 然后提供你希望它切换的任意数量的功能，包括 slideInner

```
 $(#buttonmain).toggle(function () {
     $('div.sliderInner').animate(
            {"width": "100px"},
             "500");
       }, function () {
          //animate next click
       }); 
```

点击将在您的功能中循环

# php - 如何使用php获取（调用）动态生成的变量值以保存在（mysql）数据库中

> ID：15476008
> 
> 赞同：0
> 
> 时间：2013-03-18T11:44:04.157
> 
> 标签：php, javascript, html, mysql, database

我正在尝试使用 php 在此标签中将我的动态生成的复选框、标签和选择标签的值保存到 mysql 数据库中我正在从不同的数据库中检索值，并且我正在尝试使用标签值和选定的选项值保存选中字段的数据，但我做不到，请建议我在哪里做错了。

```
<script language="javascript">
                function getmatchplayer1(mid)
                {
                    window.location="?mid="+mid;
                }

                </script>
        </head>
        <?php

        $host="localhost";                          // Host name 
    $username="root";                       // Mysql username 
    $password="";                           // Mysql password 
    $db_name="test";                    // Database name 

    // Connect to server and select database.
    mysql_connect("$host", "$username", "$password")or die("cannot connect"); 

    // select database on server
    mysql_select_db("$db_name")or die("cannot select DB");

        if(isset($_POST['SaveTeam'])){
    $tmnmA = $_POST['TeamNameA'];
    $tmnmB = $_POST['TeamNameB'];
    $mch_id = $_POST['mtch_id'];
    $chk_id = $_POST['$chkid'];
    $cric_nm = $_POST['$ply_nm'];
    $chk_rnk = $_POST['$chkrnk'];

    $sqlbat = "INSERT INTO board(cricketer_id, status,Runs,Sixes,Fifty,Hundred,Total_Score,Total_Points)VALUES('$cric_nm', 'NP','0','0','0','0','0','0')";

    $retval = mysql_query( $sqlbat );
    if(! $retval )
    {
      die('Could not update data: ' . mysql_error());
    }
    echo "Updated data successfully\n";

    }
            $sql=mysql_query( "SELECT * FROM tbl_info LIMIT 5"); 
            $cric_id = $resultmp['player_id'];
         ?>
    <body style="align:center">
    <form method="post" id="form1" name="form1" action="">
            <div style="width:850px; margin-left:55px; text-align:right">
                <input type="submit" id="SaveTeam" name="SaveTeam" value="     Save     " />
            </div>
    <table align="center" width="900" height="auto" style="border-top:1px solid #CCCCCC;border-right:1px solid #CCCCCC; border-left:1px solid #CCCCCC; cellspacing:0px; cellpadding:0px;">
    <tr style="border:1px solid #CCCCCC">
      <td width="450" style="border:1px solid #CCCCCC"> Today's Match:-&nbsp;&nbsp;&nbsp;
        <select name="mtch_id" id="mtch_id" onchange="getmatchplayer1(this.value)">
          <option> Select Team </option>
          <?php
                    $i=1;
                    $sqlm=mysql_query("SELECT * FROM t_match LIMIT 5");
                    while ($resultm=mysql_fetch_array($sqlm))
                    {
                        $mtch=$resultm['match_no'];
                        echo "<option id='".$i."' value='".$mtch."'>";
                            echo $mtch;
                        echo "</option>";
                    $i++;}
                ?>
        </select></td>
      <td width="450" style="border:1px solid #CCCCCC">
                    <?php 

                                    $j=1;
                                    if (isset($_REQUEST['mid']))
                                    {
                                        $mid=$_REQUEST['mid'];
                                    }
                                    $sqlm1=mysql_query("SELECT * FROM t_match WHERE match_no = '$mid'");
                                    while ($resultm1=mysql_fetch_array($sqlm1)){
                                        $mtch=$resultm1['match_no'];
                                        $mtch1=$resultm1['team1'];
                                        $mtch2=$resultm1['team2'];
                                        $chkid = 'a'.$a;
                        ?>
              </td>
    </tr>
    <tr style="border:1px solid #CCCCCC">
      <td style="text-align:center; border:1px solid #CCCCCC">
        <?php 
            echo "Team - ".$mtch1; 
        ?>
      </td>
      <td style="text-align:center; border:1px solid #CCCCCC">
        <?php 
            echo "Team - ".$mtch2; 
            }
        ?>
      </td>
    </tr>

    <tr>
      <td height="auto" colspan="2">
        <div id="update" style="width:900px; height:24px;">
        <div style="float:left; width:450px; height:24px;">
        <?php
                    $a=1; 
                    $b=2;
                    $k=1;
                    $sqlmp=mysql_query("SELECT * FROM tbl_info WHERE player_team = '$mtch1' LIMIT 5");
                    while ($resultmp=mysql_fetch_array($sqlmp)){ 

                    echo "<SCRIPT LANGUAGE='JavaScript'>

    //on checked disabled enabled condition

    function codenameA".$a."()
    {
        if (document.form1.a".$a.".checked)
        {
            document.form1.b".$a.".disabled = false;
        }
        else
        {
            document.form1.b".$a.".disabled = true;
        }
    }

    /*Condition for limit the checked up to 11 for team A*/

    //initial checkCount of zero
    var checkCount = 0

    //maximum number of allowed checked boxes
    var maxChecks = 11

        function setChecksA".$a."(obj)
        {
            //increment/decrement checkCount
            if (obj.checked)
            {
                checkCount=checkCount+1
            }
            else
            {
                checkCount=checkCount-1
            }
            //if they checked a 11th box, uncheck the box, then decrement checkcount and pop alert
            if (checkCount>maxChecks)
            {
                obj.checked=false
                document.form1.b".$a.".disabled=true;
                checkCount=checkCount-1
                alert('you may only choose up to '+maxChecks+' options')
            }
        }
        //-->
        </script>";

        ?>

                <div style="float:left; width:80%; height:24px; border:1px solid #CCCCCC">
                    <input onclick='codenameA<?php echo $a; ?>(), setChecksA<?php echo $a; ?>(this)' type='checkbox' id='a<?php echo $a; ?>' name='a<?php echo $a; ?>' value='<?php echo $resulttmp['player_id']; ?>' /><input type="hidden" id="lt<?php $a; ?>" name="lt<?php $a; ?>" value="<?php echo $resulttmp['player_name']; ?>" />&nbsp;&nbsp;&nbsp;<?php echo $resultmp ['player_name']; ?>
                </div>
                <div style="float:right; width:19%; height:24px; border:1px solid #CCCCCC">
                    <select disabled='disabled' id='b<?php echo $a; ?>' name='b<?php echo $a; ?>' style='width:100%;'>
            <option>
                - -
            </option>
            <option value='1'>
                1
            </option>
            <option value ='2'>
                2
            </option>
            <option value='3'>
                3
            </option>
            <option value='4'>
                4
            </option>
            <option value='5'>
                5
            </option>
            <option value='6'>
                6
            </option>
            <option value='7'>
                7
            </option>
            <option value='8'>
                8
            </option>
            <option value='9'>
                9
            </option>
            <option value='10'>
                10
            </option>
            <option value='11'>
                11
            </option>
          </select> 
                </div>
      <?php          
        $a++; 
        $b++;

    }
    ?>
    </div>
      </td>
    </tr>
    </table>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:14:59.377

如果我理解正确，您正在使用 $a 增量变量动态地生成输入的名称。但是由于某种原因，您在发布时无法重新计算这些名称，因此您无法获得发布的值。您可以通过多种方式解决此问题，一种是通过这种方式生成输入名称：

```
<input type="checkbox" name="blah[$a]"/>
<select name="bleh[$a]">...</select> 
```

这将导致一个带有如下数组的帖子：

```
array( 
    "blah" => array($a => valueofcheckbox),
    "bleh" => array($a => valueofselect)
) 
```

你可以用一个简单的 foreach 来解析

```
foreach ($_POST["blah"] as $a => $value) {
    ...
}

foreach ($_POST["bleh"] as $a => $value) {
    ...
} 
```

我不太了解启用/禁用逻辑，正如我之前所说，那是一些混乱的代码，但你应该知道禁用字段不会被发布。

PS：我发布的代码是伪代码。

# cordova - PhonegapOCRPlugin 没有扫描照片

> ID：15476009
> 
> 赞同：2
> 
> 时间：2013-03-18T11:44:05.953
> 
> 标签：cordova, ocr, phonegap-plugins

我创建了一个`phonegap/Xcode`项目并添加`PhonegapOCRPlugin`了它的依赖项。

当我运行项目时，我会`"Capture Editable Photo"`在屏幕上看到按钮。

但是在我拍了一张名片的照片并使用它之后，似乎什么都没有发生。有

我错过了什么？我正在使用`cordova-2.5.0rc1`.

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T19:35:45.020

刚刚经过测试，它正在使用 phonegap 2.5.0

我遇到的唯一问题 1\. 我必须从有效架构中删除 armv7。2\. 我不得不将此行添加到 config.xml，因为自述文件适用于使用 Cordova.plist 的旧版本

```
<plugin name="com.jcesarmobile.OCRPlugin" value="OCRPlugin" /> 
```

# javascript - setTimeout 问题，没有超时

> ID：15476011
> 
> 赞同：3
> 
> 时间：2013-03-18T11:44:11.753
> 
> 标签：javascript, jquery, settimeout

对不起，但这对我来说并不容易......！我希望在单击按钮后几秒钟后显示一个 div。它正在显示，但是当您单击时，没有延迟。我在这里做错了什么？

```
$('div.skill').hide();
$('.btn_2').click(function(e){              
        showSkills ();
      });
function showSkills(){
    alert("Hello")
};
setTimeout ( "showSkills()", 3000 ); 
```

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:46:35.857

你很近。

1.  `setTimeout`调用应该在您的点击处理程序内部，而不是在它下方。
2.  无需将函数名称作为字符串传递。

这是实现您所追求的正确方法：

```
$('div.skill').hide();
$('.btn_2').click(function (e) {
    setTimeout(showSkills, 3000);
});

function showSkills() {
    alert("Hello")
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T11:46:27.523

您在按钮单击处理程序中调用 showSkills，将您的 setTimeout 行移到您的单击处理程序中

```
$('div.skill').hide();
$('.btn_2').click(function(e){              
        setTimeout ( showSkills, 3000 );
      });
function showSkills(){
    alert("Hello")
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:47:54.947

尝试这个：

```
$('div.skill').hide();
$('.btn_2').click(function(e){              
    setTimeout (showSkills, 3000 );
});
function showSkills(){
    alert("Hello")
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T11:46:56.443

尝试 ：

```
setTimeout (function(){ "showSkills()"}, 3000 ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T11:47:01.017

```
$('div.skill').hide();

$('.btn_2').click(function(e){              
        setTimeout(showSkills, 3000);
});

function showSkills(){
    alert("Hello")
}; 
```

# git - 尝试克隆时 git-svn 停止且没有错误消息

> ID：15476013
> 
> 赞同：6
> 
> 时间：2013-03-18T11:44:15.027
> 
> 标签：git, git-svn

我正在对 subversion 服务器运行 git-svn clone 命令，如下所示：

git svn clone svn: --no-metadata -A users.txt --stdlayout ~/temp

出现“Checked through r0000”消息，修订号增加到 r8200，然后暂停。大约 30 秒后，命令提示符重新出现，我在 temp 目录中有一个 git 存储库，但它不包含实际的源代码文件。

我怎样才能获得有关正在发生的事情的更多信息？

我已经从 Windows 和 linux 客户端尝试了 git-svn。在 windows 上是 1.8.1 版本，在 linux 上是 1.7.10.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-03-21T01:34:13.143

我遇到了同样的错误/行为，最终我意识到我在命令中使用的 svn 路径包括该`\trunk`文件夹。一旦我使用了父文件夹，它就开始工作了。

# c++ - msvcr90.dll 是否带有时间戳？

> ID：15476018
> 
> 赞同：2
> 
> 时间：2013-03-18T11:44:35.723
> 
> 标签：c++, visual-c++, dll, digital-certificate

查看 Visual Studio 2008 'redist' 文件夹中 msvcr90.dll 的数字证书时，有效期设置为 2007 年 8 月 23 日至 2009 年 2 月 23 日。

不过网上搜索后发现[只要dll在指定时间段内打上时间戳，应该没有问题](http://blogs.msdn.com/b/ieinternals/archive/2011/03/22/authenticode-code-signing-for-developers-for-file-downloads-building-smartscreen-application-reputation.aspx)。

有没有办法可以检查 dll 是否带有时间戳？还是由于某种原因我有旧版本的 dll？

提前致谢！麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:48:00.703

您可以通过以下方式检查时间戳：

1.  在资源管理器中找到文件。
2.  右键单击它并选择“属性”菜单项。
3.  选择数字签名选项卡并查看时间戳。

它看起来像这样：

![在此处输入图像描述](../Images/491e7c7b04d5eccf423c6d7cfcfbd4d3.png)

# .htaccess - 将 index.php 重定向到 .htaccess 中的根目录

> ID：15476019
> 
> 赞同：2
> 
> 时间：2013-03-18T11:44:39.150
> 
> 标签：.htaccess, magento, mod-rewrite, url-rewriting, magento-1.7

我在共享托管服务器上安装了 Magento。我已经在 magento 管理面板中进行了所有必要的更改。所有网址都可以正常工作。但唯一的问题是我可以使用以下方式访问我在商店中的产品：

[http://mydomain.com/category/product.html](http://mydomain.com/category/product.html)以及[http://mydomain.com/index.php/category/product.html](http://mydomain.com/index.php/category/product.html)

所以我想知道如何摆脱 index.php。我想将包含 index.php 的 url 重定向到没有 index.php 的 url

在这里发布之前，我检查了 magento 论坛并在 stackoverflow 上进行了搜索，但没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T13:37:22.670

您可以捕获之后的部分`index.php`并使用重定向客户端

```
RewriteEngine on
RewriteRule ^index\.php/(.+)$ /$1 [R,L]
RewriteRule ^index\.php/?$ / [R,L] 
```

这会将所有以开头的请求重定向`index.php/`到不带`index.php`. 此外`index.php`并被`index.php/`重定向到主页。

**更新**：

[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)要排除管理区域，您必须在第一条规则之前插入一个附加项

```
RewriteCond %{REQUEST_URI} !/admin/ 
```

一起给

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !/admin/
RewriteRule ^index\.php/(.+)$ /$1 [R,L]
RewriteRule ^index\.php/?$ / [R,L] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-15T21:48:12.457

如果你想从你网站上的所有链接中删除 index.php，这个解决方案实际上对我来说效果最好：

```
RedirectMatch 301 /index.php/(.*) http://www.yourdomain.com/$1 
```

来源： [http ://www.lionseo.com/blog/htaccess-redirect-301/](http://www.lionseo.com/blog/htaccess-redirect-301/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-15T11:14:43.057

使用它，您可以转义管理 URL 并将 301 index.php 重定向到没有 index.php url

```
RedirectMatch 301 /index.php/((?!admin).*)$1 http://www.example.com/$1 
```

# javascript - 缩放 raphael VML 右/下间隙

> ID：15476020
> 
> 赞同：1
> 
> 时间：2013-03-18T11:44:41.393
> 
> 标签：javascript, raphael, vml

我正在使用 scaleraphael [http://www.shapevent.com/scaleraphael/](http://www.shapevent.com/scaleraphael/)，它允许我的 svg/VML 在用户调整浏览器大小时更改大小（流体布局 - 我已经将它缩放到与 div 上的 div 相同的大小页）。

它与 SVG 浏览器完美配合，虽然它在 IE8/7/6 (VML) 中工作，但出于某种奇怪的原因，右边有一个空白。我认为这与 VML 组的坐标大小有关，但这有点猜测。

间隙仅出现在某些浏览器宽度上（相距约 40 像素）。例如浏览器宽度：1060, 1104, 1144, 1186, 1230。间隙最大约为 20 像素，然后在每个像素宽度变化时再次减小回 0，直到浏览器宽度再次显示为 20 像素的序列中的下一个宽度

如果我在 IE 中使用开发人员工具，我可以看到 vml 组确实包含了应有的空白，但我论文的内容并没有填补它 - 因此我认为它与 coordsize 相关

只是想知道那里是否有其他人有同样的问题（如果没有，你可能不会理解我的问题，因为这很难解释）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:52:22.947

前段时间我创建了自己的脚本来让 Raphael 的画布“响应”。是的，我也收到了 IE7-8 中的漏洞，这让我发疯。然而，我的差距是不变的。现在我的脚本工作正常。如果您需要一个简单的响应大小，那么您不需要插件：

```
var _browser = {};
_browser.ie = userAgent.indexOf("msie") > -1 ? {} : false;
if(_browser.ie)
    _browser.ie.old = (navigator.userAgent.match(/MSIE [6-8]/) !== null);

if(_browser.ie && _browser.ie.old){

    _data.R = Raphael('conainerID', _data.options.width, _data.options.height);

    $(window).on('resize', function(){
          var w = $('#containedID').width();
          var h = $('#containedID').height();
         _data.R.setSize(w,h);
    });

}else{
    _data.R = Raphael('conainerID', '100%', '100%');    
} 
```

您需要为此创建一个流体容器。不要为其设置固定宽度；但您可以设置一些“最大宽度”来限制其缩放：

```
<div id="containerID" style="max-width: 1200px;"></div> 
```

# php - 两个 php 对象引用同一个实例

> ID：15476021
> 
> 赞同：0
> 
> 时间：2013-03-18T11:44:45.247
> 
> 标签：php, oop

我在 for 循环中创建了同一类的实例。但似乎这些实例以某种方式引用了同一个对象。

这是代码；

```
class Content{
    /**
     * current content id
     * @var int 
     */
    public $id;

    function __construct($id){
        echo " <br>Construct content ".$id;
    }

    function createContentOfPage($id){
        $contentIdArray = $this->dbo->getContentIdsForPage($id);
        /*var_dump of $contentIdArray aray is given below*/
        if(is_array($contentIdArray) && count($contentIdArray)>0){
        $contentArray = array();    
            foreach ($contentIdArray as $Id){
                echo "<br>Content id: ".$Id['content_id'];
                array_push($contentArray, new Content(($id['content_id'])));
            }

        }
    }
} 
```

这是 $contentIdArray 的 var_dump

```
array(2) {
  [0]=>
  array(1) {
    ["content_id"]=>
    string(1) "1"
  }
  [1]=>
  array(1) {
    ["content_id"]=>
    string(1) "2"
  }
} 
```

如果我运行`createContentOfPage()`这里就是输出；

```
Content id: 1 
Construct content 1
Content id: 2 
Construct content 1 
```

我在这里做错了什么？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:49:43.030

好吧，您正在使用不同的 ID 变量：

```
echo "<br>Content id: ".$Id['content_id'];
array_push($contentArray, new Content(($id['content_id']))); 
```

使用其中之一`$Id`或`$id`始终使用 - 在这种情况下，您需要使用`$Id`.

* * *

您应该避免像这样隐藏变量的做法。调用数组迭代器变量`$contentId`和你的参数`$pageId`，或类似的东西。

# php - 发布表单后调用函数不起作用

> ID：15476022
> 
> 赞同：0
> 
> 时间：2013-03-18T11:44:53.797
> 
> 标签：php, html, forms, function

我有一个 PHP 文件`User.php`，其中包含一个类`User`、一些私有全局变量、getter 和 setter、一个构造函数以及一个连接到数据库的方法。

```
<?php
class User {

    //Some Private Global Variables ($firstName,$lastName,etc..)
    //Getters and Setters

    public function getUserByID($userID) {
        //Create Instance
        $user = new User();
        //Get User Info
        $con=mysqli_connect("localhost","root","","mydatabase");
        if ($con->connect_error) {
            die('Connect Error: ' . $con->connect_error);
        }
        $query ='SELECT user_id,first_name,last_name,email,password,birth_date,gender,join_date '.
                'FROM users '.
                'WHERE user_id = ?';
        $stmt = $con->stmt_init();
        if($stmt->prepare($query)) {
            $stmt->bind_param('s',$userID);
            $stmt->execute();
            $stmt->bind_result($user->userID,$user->firstName,$user->lastName,$user->email,$user->password,$user->birthDate,$user->gender,$user->joinDate);
            if($stmt->fetch()==null) {
                //User doesn't exist
                return null;
            }
            $stmt->close();
            $con->close();
            return $user;
        }
    }
?> 
```

在另一个包含表单的文件中，如果我之前执行以下操作`if( isset($_POST['submit']) )`：

```
$user = new User();
$user1 = $user->getUserByID('222'); 
```

一切正常，但如果它写在它之后，我填写表格并发布它，它不会执行，我收到这个：

> 致命错误：第 113 行 C:\xampp\htdocs\Classes\User.php 中的最大执行时间超过 30 秒

**更新**

表格，很抱歉代码太长，但它正在验证中......

```
if (isset($_POST['submit'])){
                //Get submitted values
                $firstname = $_POST["firstname"];
                $lastname = $_POST["lastname"];
                $email = $_POST["email"];
                $password = $_POST["password"];
                $month = $_POST["month"];
                $day = $_POST["day"];
                $year = $_POST["year"];
                $gender = $_POST["gender"];
                //Validation
                //First Name
                $firstname_regex = '/^[a-zA-Z -]+$/';
                if($firstname=="" || ctype_space($firstname))
                {
                    $firstnameValid = false;
                    $firstnameError = "First Name is Required";
                }
                else if(!preg_match($firstname_regex, $firstname))
                {
                    //First Name must contain letters, spaces, dashes, and capital letter
                    $firstnameValid = false;
                    $firstnameError = "First Name contains Invalid Characters";
                }
                else
                {
                    //Valid
                    $firstnameValid = true;
                    $firstnameError = "";
                }
                //Last Name
                $lastname_regex = '/^[a-zA-Z -]+$/';
                if($lastname=="" || ctype_space($lastname))
                {
                    $lastnameValid = false;
                    $lastnameError = "Last Name is Required";
                }
                else if(!preg_match($lastname_regex, $lastname))
                {
                    //Last Name must contain letters, spaces, dashes, and capital letter
                    $lastnameValid = false;
                    $lastnameError = "Last Name contains Invalid Characters";
                }
                else
                {
                    $lastnameValid = true;
                    $lastnameError = "";
                }
                //Email
                $email_regex = '/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/';  
                if($email=="" || ctype_space($email))
                {
                    $emailValid = false;
                    $emailError = "Email is Required";
                }
                else if(!preg_match($email_regex, $email))
                {
                    $emailValid = false;
                    $emailError = "Email is not Valid";
                }
                else
                {
                    //Email is Valid, Check Database
                    $user1 = new User();
                    $user = $user1->getUserByEmail($email);
                    if($user!=null) {
                        //Email already Exists
                        $emailValid = false;
                        $emailError = "Email is already in Use";
                    }
                    else
                    {
                        $emailValid = true;
                        $emailError = "";
                    }

                }
                if($password=="" || ctype_space($password))
                {
                    $passwordValid = false;
                    $passwordError = "Password is Required";
                }
                else if(!preg_match("/^.*(?=.{8,})(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z]).*$/", $password))
                {
                    //Must be 8, contain 1 UPPER, 1 LOWER, 1 DIGIT
                    $passwordValid = false;
                    $passwordError = "Password must contain at least:<br/>1 Upper Case Letter<br/>1 Lower Case Letter<br/>1 Digit<br/>and minimum 8 Characters";
                }
                else
                {
                    //Valid
                    $passwordValid = true;
                    $passwordError = "";
                }
                if($month=="" || ctype_space($month) || $month=="Month")
                {
                    $monthValid = false;
                    $monthError = "Month is Required";
                }
                else if($month !="January" && $month !="February" && $month !="March" && $month !="April" && $month !="May" && $month !="June" && $month !="July" && $month !="August" && $month !="September" && $month !="October" && $month !="November" && $month !="December")
                {
                    //Invalid Month
                    $monthValid = false;
                    $monthError = "Month is not Valid";
                }
                else
                {
                    $monthValid = true;
                    $monthError = "";
                }
                if($day=="" || ctype_space($day) || $day=="Day")
                {
                    $dayValid = false;
                    $dayError = "Day is Required";
                }
                else if($day<1 || $day>31)
                {
                    $dayValid = false;
                    $dayError = "Day is not Valid";
                }
                else
                {
                    $dayValid = true;
                    $dayError = "";
                }
                if($year=="" || ctype_space($year) || $year=="Year")
                {
                    $yearValid = false;
                    $yearError = "Year is Required";
                }
                else if($year<1905 || $year>2013)
                {
                    $yearValid = false;
                    $yearError = "Year is not Valid";
                }
                else
                {
                    $yearValid = true;
                    $yearError = "";
                }
                if($gender=="" || ctype_space($gender) || $gender=="Are you Male or Female?")
                {
                    $genderValid = false;
                    $genderError = "Gender is Required";
                }
                else if($gender != "Male" && $gender !="Female")
                {
                    $genderValid = false;
                    $genderError = "Gender is not Valid";
                }
                else
                {
                    $genderValid = true;
                    $monthError = "";
                }
                //Check Date (leap year)
                if($monthValid==true && $dayValid==true && $yearValid==true)
                {
                    //All inputs are Valid
                    //Check 31
                    if($month == "April" && $day>30)
                    {
                        $dateValid = false;
                    }
                    else if($month == "June" && $day>30)
                    {
                        $dateValid = false;
                    }
                    else if($month == "September" && $day>30)
                    {
                        $dateValid = false;
                    }
                    else if($month == "November" && $day>30)
                    {
                        $dateValid = false;
                    }
                    else if($month == "February")
                    {
                        if($day>29)
                        {
                            $dateValid=false;
                        }
                        else
                        {
                            //Check if Year is Leap year
                            $leap = false;
                            if ($year % 4 == 0)
                            {
                                if ($year % 100 == 0)
                                {
                                    if ($year % 400 == 0)
                                    {
                                        //Leap, 29
                                        $leap = true;
                                    }
                                    else
                                    {
                                        //not leap, 28
                                        $leap = false;
                                    }
                                }
                                else
                                {
                                    //Leap, 29
                                    $leap = true;
                                }
                            }
                            else
                            {
                                //Not Leap, 28
                                $leap = false;
                            }
                            if($leap==false && $day==29)
                            {
                                $dateValid = false;
                            }
                            else
                            {
                                $dateValid = true;
                            }
                        }
                    }
                    else
                    {
                        $dateValid = true;
                    }
                }
                if($firstnameValid==true && $lastnameValid==true && $emailValid==true && $passwordValid==true && $dateValid==true && $genderValid==true)
                {
                    //Everything is Valid -> Register
                    //Fix Dates
                    if($month=="January")
                        $month=1;
                    else if($month=="February")
                        $month=2;
                    else if($month=="March")
                        $month=3;
                    else if($month=="April")
                        $month=4;
                    else if($month=="May")
                        $month=5;
                    else if($month=="June")
                        $month=6;
                    else if($month=="July")
                        $month=7;
                    else if($month=="August")
                        $month=8;
                    else if($month=="September")
                        $month=9;
                    else if($month=="October")
                        $month=10;
                    else if($month=="November")
                        $month=11;
                    else if($month=="December")
                        $month==12;
                    $birthdate = $year."-".$month."-".$day;
                    //Generate Unique ID
                    $exists = true;
                    while($exists)
                    {
                        $userID = Functions::generateID(32);
                        $user1 = new User();
                        $user = $user1->getUserByEmail($email);
                        if($user!=null) {
                            //ID is taken, Generate a new one
                            $exists = false;
                        }
                    }
                    //INSERT
                    $con=mysqli_connect("localhost","root","","mydatabase");
                    if ($con->connect_error) {
                        die('Connect Error: ' . $con->connect_error);
                    }
                    $stmt = $con->stmt_init();
                    if($stmt->prepare("INSERT INTO users (user_id,first_name,last_name,email,password,birth_date,gender,join_date) VALUES (?,?,?,?,?,?,?,NOW())"))
                    {
                        //Capital First Letter
                        $firstname = ucfirst($firstname);
                        $lastname = ucfirst($lastname);
                        $stmt->bind_param('sssssss', $userID,$firstname,$lastname,$email,$password,$birthdate,$gender);
                        $stmt->execute();
                        $stmt->close();
                        //header("Location: http://localhost/activate.php");
                        //GENERATE activation code
                        $activationCode = Functions::generateID(8);
                        //ACTIVATION CODE ready
                        $stmt1 = $con->stmt_init();
                        if($stmt1->prepare("INSERT INTO activation (user_id,activation_code) VALUES (?,?)"))
                        {
                            $stmt1->bind_param('ss', $userID,$activationCode);
                            $stmt1->execute();
                            $stmt1->close();
                            $con->close();
                            //Activation Code has been stored in Database
                            //Send Email + Redirect
                            header("Location: http://localhost/activate.php?email=".$email);

                        }
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:14:43.173

您的`while ($exists)`循环代码似乎错误。你应该设置`$exists = false`if `$user == null`，你正在做相反的事情。另外，为什么要生成一个 ID，然后再次查找具有给定电子邮件地址的用户？您不应该寻找具有相同ID的用户吗？

# c - 数组输入比定义多

> ID：15476025
> 
> 赞同：0
> 
> 时间：2013-03-18T11:45:13.923
> 
> 标签：c, arrays

```
 #include <stdio.h>
 int main(void)
 {
    int n,i;
    scanf("%d",&n);
    int a[n];
    for(i=0;i<n;i++)
    {
        a[i]=i;
    printf("%d",a[i]);

    }
    for(i=0;i<n+1;i++)
    {
        a[i]=i;
        printf("%d",a[i]);

    }       
    return 0;   
 } 
```

*在这里，如果我们给出任何输入，例如 5，那么输出是...... 01234012345 这里的问题是代码应该给出一个错误，但它会打印 5，它存储在 a[5] 中，并且 a[5] 是未声明的*

# php - 尝试将查询结果转换为 JSON 格式并将其发送回我的手机（Android）

> ID：15476026
> 
> 赞同：0
> 
> 时间：2013-03-18T11:45:16.343
> 
> 标签：php, json

我正在尝试使用 PHP 在我的服务器上查询 mySql 数据库，以下是我的代码：

```
 <?php

    require 'phtry.php';

    $message = 1 ; //$_POST["message"]; 

    $query = "SELECT `surname`,`firstname` FROM `users`";

    $query1 = "SELECT * FROM  `users` WHERE id = $message";

   if ($query_run = mysql_query($query1)){
      //echo 'Success.';
      while ($query_row = mysql_fetch_assoc($query_run)){

      $surname = $query_row['surname'];
      $firstname = $query_row['firstname'];

}

$out [] = $query_row;
print(json_encode($out));

}else{
    echo 'No Success';
} 
```

然而语句 print(json_encode($out)); 给我一个 [false] 的输出。谁能指引我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:50:24.060

将 $out 放入 while 循环中

```
if ($query_run = mysql_query($query1)){
 //echo 'Success.';
 while ($query_row = mysql_fetch_assoc($query_run)){

 $surname = $query_row['surname'];
 $firstname = $query_row['firstname'];
 $out[] = $query_row;

}
print(json_encode($out));
}else{
 echo 'No Success';
} 
```

# ajax - 想查找url页面返回的所有值

> ID：15476029
> 
> 赞同：1
> 
> 时间：2013-03-18T11:45:23.363
> 
> 标签：ajax, html, jquery, get

我想使用链接列表在我的页面上显示这些链接。为此，我使用 ajax GET 方法，

```
$.ajax({
            type:'GET',
            url: "www.wcidevapps.com/salescentral/idisk/0001000383/iDisk/",
            success:function(response){
                $('li a').attr('href');
            }
        }); 
```

但是，在响应 html 之后，我该如何使用这些 href 链接？我怎样才能使用这些链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:02:15.790

这是您如何做到这一点的方法。

```
var listHref = new Array();

$.ajax(
{
    type:'GET',
    url: "www.wcidevapps.com/salescentral/idisk/0001000383/iDisk/",
    success:function(response)
    {
        $(response).find('li a').each(function()
        {
            listHref.push($(this).attr('href'));
        });

    }
});

console.log(listHref); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:04:29.753

```
var i=0,linkArr = [];

success:function(response){
    $(response).find('li a').each(function(){    
linkArr[i++]=$(this).attr('href');
}
}); 
```

现在您将拥有名为“linkArr”的数组中的所有链接 href 数据

# mysql - 合并具有重叠主键值的 2 个用户表

> ID：15476030
> 
> 赞同：2
> 
> 时间：2013-03-18T11:45:42.770
> 
> 标签：mysql

我正在寻找合并 2 个具有重叠主键值 (users_id) 的 MySQL 表的最佳方法

两张表的结构不同，

MEMEBR(member_id,memeber_email,member_dob,....) 当前 Next Auto Increment Value 27014

USER(users_id, email,name,dob,.....) 当前 Next Auto Increment Value 23734

这两个表属于不同的应用程序，并且有许多带有引用主键值（Member_id 和 users_id）的日志/事务表。

我已经编写查询以从 USER 中选择数据并插入到 MEMBER 中，但主要问题是 IDS 重叠。起初我想在 MEMBER 中的最后一条记录之后附加所有用户记录，但这会生成新的 IDS，并导致 USER 应用程序引用表中的不一致。

第二，我认为在 MEMBER 中存储一个额外的字段 Users_id 以跟踪 USER 应用程序中的相关记录。

现在在这个额外的字段中为 MEMBER 应用程序用户存储什么。由于现在合并的用户将无缝使用两个应用程序，因此它需要在该字段中设置一个值，当然与 member_id 相同。

所以现在，MEMBER(memeber_id,Users_id,email,....) 1,1,a@b.com 2,2,b@b.com 。. . 27014,27014,z@b.com here end MEMBER record 27015,1,aa@bb.com 来自用户表的第一条记录

现在我在这里保持一致。

user_id 1 存在于 member_id 1 (1,1,a@b.com) 和 member_id 27015 (27015,1,aa@bb.com) 中

为了解决这个问题，我想到的另一点是将所有现有成员应用程序和未来用户的 users_id 字段设置为 0，这意味着只需从 USER 应用程序中保存现有 users_id。

如果您理解并面临同样的问题，或者可以像我一样思考，请提供帮助。

可能有人会问这个问题或真正的问题，所以。

问题：如上述问题所述，当合并来自 2 个不同应用程序的 2 个用户表时，处理重叠 id 的最佳方法是什么，该用户将无缝访问这两个应用程序。

任何帮助表示赞赏。

让我知道是否需要更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:55:34.637

合并一个用户记录后，它是当前 ID 和新 ID。然后更新所有表中的这些 ID：

```
UPDATE table1 set UserID=:newID where UserID=:oldID
UPDATE table2 set UserID=:newID where UserID=:oldID
etc. 
```

重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:55:09.987

我会做以下事情：

1.  使用新的主/自动增量键和保存合并结果的所有必要列创建单独的表
2.  用两个表的结果填充新表，从而创建新的 ID
3.  使用新 ID 更新所有引用 MEMBER 和 USER 的表（这可能还包括删除/重新创建外键约束以指向新的合并表）
4.  删除旧表。

# css - 添加/删除行 css

> ID：15476031
> 
> 赞同：0
> 
> 时间：2013-03-18T11:45:42.927
> 
> 标签：css

我为我的网站添加了动态下拉搜索菜单。如果您转到我提供的链接，您会注意到左侧的 2 个链接用于表格选项中的 javascript 添加/删除行，这些链接在我将`class="chzn-select"`（动态搜索菜单）添加到下拉菜单之前都可以正常工作。发生的情况是，当添加类时，由于某种原因它不再添加新行。

在左侧的菜单中，您可以单击查看操作中的 NoCSS 表，以及有问题的 CSS 表，其中包含`class="chzn-select"`. 我认为问题在于此菜单的 css 是动态的，具体取决于菜单所处的状态，但无法弄清楚问题出在哪里。任何帮助表示赞赏..

测试链接：[http ://directa.sytes.net/test/](http://directa.sytes.net/test/) **用户：** test1**通过：** test1

添加/删除使用的脚本：jsfiddle.net/frtrc

谢谢

我会在此处粘贴 css 代码，但该网站一直说它包含代码并且无论我如何格式化它都不让我发布.. :\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:31:31.703

当您使用 selected.jquery.min.js 和 choose.css 在选择选项后生成动态新的 div 时，问题就出现了，因此当时 javascript 不起作用 **$tr.find("input,select").attr("name", function()**因为只有两个标签添加输入和选择

我建议在其中添加 javascript 行

```
$(document).ready(function($)
    {
        $('#sif_roba1').next('div').attr("id","sif_roba1");//Chane Code
        $('#sif_roba1').next('div').attr("name","sif_roba1");
        // trigger event when button is clicked
        $("button.add").click(function()
        {
            // add new row to table using addTableRow function
            addTableRow($("table"));
            // prevent button redirecting to new page
            return false;

        });

        // function to add a new row to a table by cloning the last row and 
        // incrementing the name and id values by 1 to make them unique
        function addTableRow(table)
        {

            // clone the last row in the table
            var $tr = $(table).find("tbody tr:last").clone();

            // get the name attribute for the input and select fields

            $tr.find("input,select,div").attr("name", function()
            {
                // break the field name and it's number into two parts
                var parts = this.id.match(/(\D+)(\d+)$/);
                // create a unique name for the new field by incrementing
                // the number for the previous field by 1
                return parts[1] + ++parts[2];

            // repeat for id attributes
            }).attr("id", function(){
                var parts = this.id.match(/(\D+)(\d+)$/);
                return parts[1] + ++parts[2];
            });
            // append the new row to the table
            $(table).find("tbody tr:last").after($tr);
            $tr.hide().fadeIn('slow');

            // row count
            rowCount = 0;
            $("#table tr td:first-child").text(function() {
                return ++rowCount;
            });

            // remove rows
            $(".remove_button").on("click", function() {
                $(this).parents("tr").fadeOut('slow', function () { 
                    $(this).remove();
                    rowCount = 0;
                    $("#table tr td:first-child").text(function() {
                        return ++rowCount;
                    });
                });
           });

        };
    }); 
```

好的，在该页面上更改没有其他内容...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:18:56.087

问题来自使用搜索栏（用于选择国家）创建样式下拉列表的插件。

它显示一个用于过滤国家列表的输入字段。这样做的问题是这个输入字段没有 -`id`属性，因此当执行以下代码时，它没有任何要拆分的 id 并且数组将为空。

```
$tr.find("input,select").attr("name", function()
{
    // break the field name and it's number into two parts
    var parts = this.id.match(/(\D+)(\d+)$/);
    // create a unique name for the new field by incrementing
    // the number for the previous field by 1
    return parts[1] + ++parts[2];
    // repeat for id attributes
}).attr("id", function(){
    var parts = this.id.match(/(\D+)(\d+)$/);
    return parts[1] + ++parts[2];
}); 
```

解决方案是首先确保有一个 id 可以拆分。关于这里的更多信息：

[按属性选择元素](https://stackoverflow.com/questions/1097522/check-existence-of-an-attribute-with-jquery)

此外，您的-function`clickMe()`确实捕获了`onclick`-event 并没有任何用途并会产生错误。

# python - Python mkstemp 后缀

> ID：15476035
> 
> 赞同：-2
> 
> 时间：2013-03-18T11:46:08.880
> 
> 标签：python, mkstemp

我有以下代码在我处理的 Django 项目中为我处理图像上传：

```
def upload_handler(source):
    fd, filepath = tempfile.mkstemp(prefix=source.name, dir=MEDIA_ROOT)
    with open(filepath, 'wb') as dest:
        shutil.copyfileobj(source, dest)
        return MEDIA_URL + basename(dest.name) 
```

上传部分一切正常，但 mkstemp 在扩展后使用额外的 6 个随机后缀保存我的图像（例如 test.png -> test.pngbFVeyh）。即使我在第二个代码行中传递后缀，它也会附加它，但也会附加 6 个随机字符。正在发生的其他奇怪的事情是，在上传文件夹（在我的情况下为 MEDIA_ROOT）中，它与另一个与图片同名的空纯文本文档类型文件（例如 test.pngbFVeyh）一起创建。我已阅读有关 mkstemp 的文档，但没有找到任何替代解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-10T23:42:12.440

```
def upload_handler(source):
    # this is creating a temp file and returning an os handle and name
    fd, filepath = tempfile.mkstemp(prefix=source.name, dir=MEDIA_ROOT)
    # this next line just clears the file you just made (which is already empty)
    with open(filepath, 'wb') as dest: 
        # this is a strange way to get a fobj to copy :)
        shutil.copyfileobj(source, dest)
        return MEDIA_URL + basename(dest.name) 
```

prefix 和 suffix 就是这样做的，因此如果您不希望文件名以临时字符开头或结尾，则需要同时使用前缀**和**后缀。例如，

```
name = os.path.basename(source.name)
prefix, suffix = os.path.splitext(name)
_, filepath = tempfile.mkstemp(prefix=prefix, suffix=suffix, dir=MEDIA_ROOT) 
```

但如果您使用 会更好[`tempfile.NamedTemporaryFile`](https://docs.python.org/3/library/tempfile.html#tempfile.NamedTemporaryFile)，因为这样会返回类似文件的对象（因此您不必从文件名创建 fobj 并且在完成后默认删除临时文件）。

```
fobj, _ = tempfile.NamedTemporaryFile(prefix=prefix, suffix=suffix, dir=MEDIA_ROOT)
shutil.copyfileobj(source, fobj) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T11:48:19.600

该名称是随机生成的，因为它是`tempfile.mkstemp`. 创建具有该名称的文件是因为它是这样`tempfile.mkstemp`工作的。它也被打开，文件描述符返回给您，您在`fd`其中忽略。您似乎不明白`tempfile.mkstemp`应该如何使用，您可能需要使用其他东西。

# php - PHP SoapClient + Zend_Soap_Autodiscover + VersionMismatch

> ID：15476036
> 
> 赞同：1
> 
> 时间：2013-03-18T11:46:09.400
> 
> 标签：php, zend-framework, soap, wsdl

我正在构建一个使用肥皂的应用程序。

我使用 Zend_Soap_Autodiscover 生成 WSDL，使用 SoapClient 和 SoapServer 处理请求。

我遇到的问题是客户端不断给出 VersionMismatch，即使服务器和客户端都设置为soap 1.1版。

我不知道如何解决这个问题，并且已经坚持了一段时间。因此，任何帮助都会非常感激。

我正在尝试在客户端调用更新方法：

```
public function update() {
    $this->_soap = Soap_Client_General::getInstance();
    try {
        $this->_soap->fetchNewVersion();
    } catch (Exception $e) {
        var_dump($e);
    }
} 
```

然而，这给了我以下转储：

```
object(SoapFault)#12 (10) {
  ["message":protected]=>
  string(13) "Wrong Version"
  ["string":"Exception":private]=>
  string(0) ""
  ["code":protected]=>
  int(0)
  ["file":protected]=>
  string(59) "/path/app/library/Update/Client.php"
  ["line":protected]=>
  int(27)
  ["trace":"Exception":private]=>
  array(4) {
    [0]=>
    array(6) {
      ["file"]=>
      string(59) "/path/app/library/Update/Client.php"
      ["line"]=>
      int(27)
      ["function"]=>
      string(6) "__call"
      ["class"]=>
      string(10) "SoapClient"
      ["type"]=>
      string(2) "->"
      ["args"]=>
      array(2) {
        [0]=>
        string(15) "fetchNewVersion"
        [1]=>
        array(0) {
        }
      }
    }
    [1]=>
    array(6) {
      ["file"]=>
      string(59) "/path/app/library/Update/Client.php"
      ["line"]=>
      int(27)
      ["function"]=>
      string(15) "fetchNewVersion"
      ["class"]=>
      string(10) "SoapClient"
      ["type"]=>
      string(2) "->"
      ["args"]=>
      array(0) {
      }
    }
    [2]=>
    array(6) {
      ["file"]=>
      string(55) "/path/app/application.class.php"
      ["line"]=>
      int(25)
      ["function"]=>
      string(6) "update"
      ["class"]=>
      string(13) "Update_Client"
      ["type"]=>
      string(2) "->"
      ["args"]=>
      array(0) {
      }
    }
    [3]=>
    array(6) {
      ["file"]=>
      string(39) "/path/index.php"
      ["line"]=>
      int(24)
      ["function"]=>
      string(2) "go"
      ["class"]=>
      string(11) "Application"
      ["type"]=>
      string(2) "->"
      ["args"]=>
      array(0) {
      }
    }
  }
  ["previous":"Exception":private]=>
  NULL
  ["faultstring"]=>
  string(13) "Wrong Version"
  ["faultcode"]=>
  string(15) "VersionMismatch"
  ["faultcodens"]=>
  string(41) "http://schemas.xmlsoap.org/soap/envelope/"
} 
```

我的服务器的肥皂处理发生在我的 Zend 框架应用程序的一个肥皂模块中。此模块中的所有控制器都从一个基本控制器类扩展而来。

**My_Controller_Base_Soap**

```
<?php

class My_Controller_Base_Soap extends My_Controller_Base {

    protected $_uri;

    public function __construct(\Zend_Controller_Request_Abstract $request, \Zend_Controller_Response_Abstract $response, array $invokeArgs = array()) {
        parent::__construct($request, $response, $invokeArgs);

        $this->_uri = $this->view->serverUrl() . $this->view->baseUrl('soap/');

        //Disable Layout
        $this->_helper->layout()->disableLayout();
        $this->_helper->viewRenderer->setNoRender();

        Application_Model_Log::log('Soap Module Called: ' . implode('-', $request->getParams()) . ' from: '. $_SERVER['REMOTE_ADDR'] , 'soap');
    }

    //Generates WSDL for given class
    protected function handleWSDL($classname) {
        $autodiscover = new Zend_Soap_AutoDiscover();
        $autodiscover->setClass($classname);
        $autodiscover->handle();
    }

    //Handles the soap requests for the giving location and classname
    protected function handleSOAP($loc, $classname) {
        try {
            $options = array('uri' => 'urn:' . $classname,
                'location' => $loc,
                'soap_version' => SOAP_1_1,
                'cache_wsdl' => WSDL_CACHE_NONE);

            $server = new SoapServer(null, $options);
            $server->setClass($classname);
            $server->handle();
        } catch (Exception $e) {
            Application_Model_Log::log('SoapException: ' . $e->getMessage(), 'soap');
        }
    }

} 
```

上面的类从 My_Controller_Base 扩展而来，而 My_Controller_Base 又从 Zend_Controller_Action 扩展而来

**肥皂/通用控制器**

```
<?php
class Soap_GeneralController extends My_Controller_Base_Soap {

    const CLASS_OBJECT = 'Soap_Model_General';

    public function indexAction() {
        $this->handleSOAP($this->view->baseUrl('soap/general/wsdl'), self::CLASS_OBJECT);
    }

    public function wsdlAction() {

        $this->handleWSDL(self::CLASS_OBJECT);
    }

} 
```

Zend_Soap_Autoloader 使用一个类来生成它的 wsdl：

**Soap_Model_General**

```
<?php
class Soap_Model_General extends Soap_Model_Base_Abstract{

    /**
     * Retrieve new Version
     * 
     * @return string
     */
    public function fetchNewVersion(){

        if (!$this->_authenticated)
            throw new SOAPFault("Not Authenticated.", 401);

    }
} 
```

此类从包含身份验证方法的抽象基类扩展而来。

**Soap_Model_Base_Abstract**

```
<?php
abstract class Soap_Model_Base_Abstract {

    /**
     * This property represents authentication status
     * @var boolean 
     */
    protected $_authenticated = false;

    /**
     * The site object
     * @var Application_Model_Website 
     */
    protected $_website;

    /**
     * Authenticates the SOAP request. (This one is the key to the authentication, it will be called upon the server request)
     *
     * @param array
     * @return array
     */
    public function authenticate($login) {
        if (!empty($login->siteid) && !empty($login->hash)) {

            //Determain if credentials are correct
            $found = false;
            $website = Application_Model_Website::find($login->siteid);
            if ($website instanceof Application_Model_Site) {
                //Is the authentication hash is correct? (siteid, secretkey and remote ip correct?)
                $hash = md5($website->id . $website->secretkey . $website->ip);
                if ($hash == $login->hash) {
                    $found = true;
                }
            }
            //Verify the send IP
            if ($found && $website->ip == $_SERVER['REMOTE_ADDR']) {
                //Accept authentication
                $this->_authenticated = true;
                //set Application_Model_Site to site property
                $this->_website = $website;
                return true;
            } else {
                throw new SOAPFault("Incorrect credentials.", 401);
            }
        } else {
            throw new SOAPFault("Invalid authentication format. Values may not be empty and are case-sensitive.", 401);
        }
    }

} 
```

所以基本上，当我接近我的 WSDL 时，我得到了一个完美生成的 WSDL。

接下来就是将客户端连接到服务器。

客户的代码在这里：

**Soap_Client_General**

```
<?php
class Soap_Client_General extends Soap_Client_Abstract {

    private static $instance = NULL;

    public static function getInstance() {
        //get config
        $config = Zend_Registry::get('config');

        $wsdl = $config->general->server->general . '/wsdl/';

        if (!self::$instance) {
            return parent::getInstance($wsdl);
        }
        return self::$instance;
    }

} 
```

**Soap_Client_Abstract**

```
<?php
abstract class Soap_Client_Abstract {

    private function __construct() {

    }

    /**
     * Return client instance or create intitial
     *
     * @return SoapClient
     * @access public
     */
    public static function getInstance($wsdl) {
        $ns = "auth";
        $config = Zend_Registry::get('config');

        $siteid         = $config->general->siteid;
        $secretkey      = $config->general->secretkey;
        $hash           = md5($siteid . $secretkey . $_SERVER['SERVER_ADDR']);
        //Create our Auth Object to pass to the SOAP service with our values
        $auth->siteid   = $siteid;
        $auth->hash     = $hash;
        $auth_vals      = new SoapVar($auth, SOAP_ENC_OBJECT);

        //The 2nd variable, 'authenticate' is a method that exists inside of the SOAP service 
        $authenticate = new SoapHeader($ns, 'authenticate', $auth_vals, false);

        $client = new SoapClient($wsdl, array('cache_wsdl' => WSDL_CACHE_NONE, 'soap_version' => SOAP_1_1));

        $client->__setSoapHeaders(array($authenticate));
        return $client;
    }

    private function __clone() {

    }

} 
```

我希望我已经提供了足够的信息。我希望你能在这件事上给我一些指导。

# sql - 在 varchar 中添加空格时 SQL Server 中的长度问题

> ID：15476041
> 
> 赞同：0
> 
> 时间：2013-03-18T11:46:23.720
> 
> 标签：sql, sql-server, sql-server-2008

**问题**：

我有三个变量`@str1`, `@str2`, `@str3`。因此，当我在变量的开头添加空格时，它给了我正确的长度，但是当我最后添加空格时，它给了我错误的结果。

**解决方案**：

为了避免这种行为，我可以`trim`在检查该变量的长度之前使用该变量。

**问题**：

为什么会发生这种情况这样做有什么好处（从右侧而不是左侧修剪空格）？

```
 declare @str1 varchar(30), @str2 varchar(30), @str3 varchar(30)
    SET @str1 = ' kratika,vikas,kritika'
    SET @str2 = 'kratika,vikas,kritika '
    SET @str3 = 'kratika,vikas,kritika'

PRINT LEN(@str1)
PRINT LEN(@str2)
PRINT LEN(@str3) 
```

**输出**

```
 22
    21
    21 
```

如果问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:48:47.270

这就是[*记录*](http://msdn.microsoft.com/en-gb/library/ms190329.aspx)要做的事情：

> 返回指定字符串表达式的字符数，不包括尾随空格。

， 和，

> 要返回用于表示表达式的字节数，请使用该[`DATALENGTH`](http://msdn.microsoft.com/en-gb/library/ms173486.aspx)函数。

SQL 中有许多特性都将尾随空白字符视为有些特殊。例如，字符串`'abc '`和`'abc'`被认为是相等的，因为在比较发生之前，空格被*添加*到较短的字符串中。

* * *

如果要确定字符串的长度，*包括*尾随空格，那么显而易见的是将单个非空格连接到传递给的字符串`LEN()`，然后从结果中减去一个。

# wpf - 数据绑定 F# 视图模型

> ID：15476046
> 
> 赞同：5
> 
> 时间：2013-03-18T11:46:52.207
> 
> 标签：wpf, xaml, f#

在 XAML 编辑器中，我可以将命名空间设置为 C# 项目中包含的 Viewmodel

```
namespace ViewModelDB
{
    public class DependencyViewModel : IViewModelDB
    {
        public string Message { get; set; }
    }
} 
```

在我的 xaml 中

```
<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:ViewModelDB="clr-namespace:ViewModelDB;assembly=ViewModelDB"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300"
        >
    <UserControl.DataContext>
        <ViewModelDB:DependencyViewModel/>
    </UserControl.DataContext>
    <Grid>
        <TextBlock Text="{Binding Message}"/>
    </Grid>
</UserControl> 
```

然后识别绑定“消息”。

当我指向类似选区的 F# 命名空间时

```
namespace ModuleDBGraph

open Infrastructure
open Microsoft.Practices.Prism.Regions;
open Microsoft.Practices.Unity;

type IDependencyViewModel =
    inherit IViewModel
    abstract Message : string with get, set

type DependencyViewModel () = 
    interface IDependencyViewModel with 
        member val Message = "" with get, set 
```

然后我失去了对绑定消息的识别

```
<UserControl
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:ViewModelDB="clr-namespace:ViewModelDB;assembly=ViewModelDB"
             xmlns:ViewModelDBFS="clr-namespace:ModuleDBGraph;assembly=ViewModelDBGraphFS"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300"
        >
    <UserControl.DataContext>
        <ViewModelDBFS:DependencyViewModel/>
    </UserControl.DataContext>
    <Grid>
        <TextBlock Text="{Binding Message}"/>
    </Grid>
</UserControl> 
```

难道我做错了什么 ？这是因为 Message 是接口 IDependencyViewModel 的实现和 F# 中接口的显式实现，这是一件好事，但是这里有办法解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T17:23:47.430

我认为没有比我们在评论中讨论的解决方案更好的解决方案，因此我将其转换为更长的答案。

它不起作用的原因是 - 正如您已经建议的那样 - F# 显式实现接口，因此 WPF`Message`在它是接口成员时看不到该属性。最直接的解决方法是将其定义为显式属性（接口实现可以只引用主属性）：

```
type DependencyViewModel () = 
    member val Message = "" with get, set
    interface IDependencyViewModel with 
        member x.Message with get() = x.Message and set(v) = x.Message <- v 
```

一般来说，我认为为 C# 推荐的模式在 F# 中并不总是能很好地工作。例如，因为 F# 更简洁（使事情更容易重写）并且更不容易出错（静态捕获更多错误），我认为在这种情况下你可能根本不需要接口。

一个更复杂的解决方法是在运行时使用反射（从显式实现）生成接口的隐式实现，然后将其设置为，`DataContext`但这不能很好地与编辑器一起工作，所以这可能不是一个好的方向。

# apache - 通过 Apache 重写规则将旧 URL 重写为新 URL

> ID：15476048
> 
> 赞同：0
> 
> 时间：2013-03-18T11:46:55.370
> 
> 标签：apache, mod-rewrite

我们最近迁移到新平台，新站点指向域`droidnews.net`，旧站点指向域`droidnews.cc`

我们现在要将所有旧 URL 请求重定向到新站点/域。

```
www.droidnews.net/articles/2012/07/18/227063.html
to
www.droidnews.cc/articles/2012/07/18/227063.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:50:54.993

这个 Apache 重写规则应该可以正常工作：

```
 RewriteEngine On
  RewriteCond %{HTTP_HOST} !^www\.droidnews\.net [NC]
  RewriteCond %{HTTP_HOST} !^$
  RewriteRule ^/(.*) http://www.droidnews.cc/$1 [L,R=303] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:17:08.567

要将所有请求重定向到新域`droidnews.net`，您可以使用[`Redirect`](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirect)

```
Redirect / http://www.droidnews.net/ 
```

# java - 仅显示字符串中的小数位

> ID：15476055
> 
> 赞同：0
> 
> 时间：2013-03-18T11:47:01.577
> 
> 标签：java, android, string, double

我想将 Double 转换为字符串。并且只显示小数位。

在这条路上：

```
Double: 123.465
String: 46

Double: 1123.465
String: 46

Double: 123.46555987
String: 46 
```

现在是我的问题，我该怎么做，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:59:20.500

```
Double: 123.465
String: 46

Double d = new Double(123.465);
String str = String.valueOf(d);
Sytem.out.println(str.substring(str.lastIndexOf("."),str.lastIndexOf(".")+2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:53:53.193

不完全是最好的方法，但它有效。只需将 123.456 更改为您希望的任何值，也许将其放入方法中。

```
public class Test {
    public static void main(String args[]) {
        double fractionalPart = 123.456 % 1;
        DecimalFormat twoDForm = new DecimalFormat("#.00");
        System.out.println(String.valueOf(
                Double.valueOf(twoDForm.format(fractionalPart))).substring(2));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:51:08.467

`Double`可以使用[`toString()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29). 检查 API 文档。如果您有，那么自 Java 1.6 及更高版本以来`double`，它可能会自动拆箱为value。`Double`要获得小数，您可以使用第二个参数[`substring`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)来限制输出。

```
 s.substring(s.indexOf("."), s.indexOf(".")+2) 
```

或使用四舍五入到小数点后两位

```
Double.valueOf(Math.round((d/(long)d)*100)/100).toString() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T12:01:13.950

这应该可以帮助你

```
public static int twoDecimal(double original)
{
    BigDecimal bd = new BigDecimal(original % 1);
    BigDecimal rounded = bd.setScale(2, BigDecimal.ROUND_DOWN);

    return (int) (rounded.doubleValue() * 100);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T11:56:17.133

这可能有效：

```
Double d = 123.4567;
String stringRep = Double.toString(d).split(".")[1];
//Print or use stringRep 
```

# php - Magento 搜索建议包括 ASCII 值

> ID：15476057
> 
> 赞同：0
> 
> 时间：2013-03-18T11:47:09.493
> 
> 标签：php, magento, magento-1.5

我的商店网站有问题.. 每当用户执行搜索时，搜索建议都会包含一些特殊字符，例如
`&nbsp;`,`&pound;`等，我猜搜索引擎不会将上述关键字转换为符号字符。我该如何解决这个问题？请参阅随附的屏幕截图。提前致谢。

我正在使用 Magento 1.5

![截屏](../Images/63faab6fb4c4676da9bb071484c9e279.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:58:07.563

设法找到解决方案..问题是我`$this->htmlEscape(strip_tags($_product->getShortDescription()))`用来填充搜索建议的日期..我只是用函数包装它，`html_entity_decode()`因为它允许 ASCII 值在符号视图中可见。所以我的最终代码是`html_entity_decode($this->htmlEscape((strip_tags($_product->getShortDescription()))))` 解决这个问题。

# c# - 当我们在设计器中指定列时如何填充gridview？

> ID：15476058
> 
> 赞同：2
> 
> 时间：2013-03-18T11:47:13.080
> 
> 标签：c#, asp.net

我真的是新手，但是当我在设计器中定义列时，有人可以告诉我如何在 GridView 中添加值。我有一列 type `Buttonfield`。我的 default.asax 代码如下。

**代码**：

```
 <asp:GridView ID="gvTableHolding" runat="server" BackColor="White" 
    BorderColor="#CCCCCC" BorderWidth="1px" CellPadding="3" Width="1184px" 
    BorderStyle="None" CssClass="DDGridView" 
        onrowcommand="gvTableHolding_RowCommand" ShowHeaderWhenEmpty="True"
        EmptyDataText=" No Data!" ViewStateMode="Enabled">

        <Columns>
            <asp:BoundField HeaderText="Holding Register " />
            <asp:BoundField HeaderText="Description" />
            <asp:BoundField HeaderText="Set Value" />
            <asp:ButtonField ButtonType="Button" ShowHeader="True" Text="ChangeValue" 
                CommandName="ChangeValue" HeaderText="Buttons" />
            <asp:BoundField HeaderText="Default Value" />
            <asp:BoundField HeaderText="Decimal" />
            <asp:BoundField HeaderText="Hex" />
        </Columns>

    <FooterStyle BackColor="White" ForeColor="#000066" />
    <HeaderStyle BackColor="#006699" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="White" ForeColor="#000066" 
        HorizontalAlign="Left" />
    <RowStyle ForeColor="#000066" HorizontalAlign="Center"/>
    <SelectedRowStyle BackColor="#669999" ForeColor="White" Font-Bold="True" />
    <SortedAscendingCellStyle BackColor="#F1F1F1" />
    <SortedAscendingHeaderStyle BackColor="#007DBB" />
    <SortedDescendingCellStyle BackColor="#CAC9C9" />
    <SortedDescendingHeaderStyle BackColor="#00547E" />
</asp:GridView> 
```

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:57:41.597

我真的不知道你为什么要在按钮字段中显示列标题。您可以在标签内使用`TemplateField`& ，例如：`ItemField``Column`

```
<asp:TemplateField HeaderStyle-Font-Bold="true" HeaderText="Holding Register " Visible="false">
                    <ItemTemplate>
                        <asp:Label Text='<%# DataBinder.Eval(Container.DataItem, "Holding_Register")%>' ID="lblUserId"
                            runat="server"></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderStyle-Font-Bold="true" HeaderText="Description" Visible="false">
                    <ItemTemplate>
                        <asp:Label Text='<%# DataBinder.Eval(Container.DataItem, "Description")%>' ID="lblUserId"
                            runat="server"></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:58:27.740

`DataField`首先在每一列中定义。像这样 -

```
<Columns>
        <asp:BoundField HeaderText="Holding Register " DataField="Holding_Register"/>
        <asp:BoundField HeaderText="Description" DataField="Description"/>
</Columns> 
```

然后将数据源与代码中的网格绑定。

```
gvTableHolding.DataSource = GetData();
gvTableHolding.DataBind(); 
```

您应该记住的一件事是，`GetData()`无论您返回什么（DataTable 或 List），这些属性名称都应该与`DataField`您在 Grid 中定义的名称匹配。

# xml - 如何使用 Microsoft 架构显示 xml 文件？

> ID：15476059
> 
> 赞同：0
> 
> 时间：2013-03-18T11:47:21.053
> 
> 标签：xml, wordpress, file

我想在网页上显示一个 xml 文件。在 Wordpress 平台上做这件事的最佳方法是什么？代码是：

```
<?xml version="1.0" encoding="UTF-8"?>
<NEWSITEM xmlns:usr="urn:the-xml-files:xslt" xmlns:ms="urn:schemas-microsoft-com:xslt">
    <ARTICLEID>9502</ARTICLEID>
    <DATELINE>2013-02-15</DATELINE>
    <HEADLINE>Fixed broadband quarterly metrics 3Q 2012</HEADLINE>
    <AUTHOR>Martin Scott</AUTHOR>
    <DATEAUTHORED>2013-02-14</DATEAUTHORED>
    <SUMMARY>The fixed broadband market continues to grow apace. Emerging markets are buoying overall market growth, while developed markets continue to be dynamic at the operator and access technology level. Our quarterly metrics include market share, access technology splits and quarterly growth figures for 59 countries, and have been updated to include 3Q 2012 data.</SUMMARY>
    <COPYRIGHTLINE>Copyright Analysys Mason 2013</COPYRIGHTLINE>
    <SOURCE>Analysys Mason (http://www.analysysmason.com/Research/)</SOURCE>
    <FILES>Analysys_Mason_Fixed_broadband_quarterly_metrics_3Q2012_RDMB0.xls</FILES>
    <KEYWORDS>Analysys, Mason, AnalysysMason, Analysys Mason, amData, amBroadband, amFBroadband, Fixed Broadband, , Fixed, broadband, quarterly, metrics, 3Q, 2012, The, fixed, broadband, market, continues, to, grow, apace, Emerging, markets, are, buoying, overall, market, growth, while, developed, markets, continue, to, be, dynamic, at, the, operator, and, access, technology, level, Our, quarterly, metrics, include, market, share, access, technology, splits, and, quarterly, growth, figures, for, 59, countries, and, have, been, updated, to, include, 3Q, 2012, data, </KEYWORDS>
</NEWSITEM> 
```

谢谢你。

# c# - WP8/C#/SQLite：获取最后插入的 id？

> ID：15476061
> 
> 赞同：6
> 
> 时间：2013-03-18T11:47:25.637
> 
> 标签：c#, sqlite, windows-phone-8

带有 WP8 的 SQLite 让我抓狂。:(

我要做的就是检索最后插入的 id 的值...

我有：

```
class ShoppingItem
{
  [SQLite.PrimaryKey, SQLite.AutoIncrement]
  public int Id {get; set;}
  public string Name {get; set;}
  public string Shop {get; set;}
  public bool isActive {get; set;}
} 
```

好吧，使用的`SQLiteConnection`对象和它`Table<ShoppingItem>`似乎都不包含包含最后一个 ID 的适当成员。

所以我试着做：

```
private int GetLastInsertedRowID()
{
  int Result = -1;
  using (var db = new SQLiteConnection(m_DatabasePath)) {
    Result = db.ExecuteScalar<int>("SELECT last_insert_rowid();");
  }
  return Result;
} 
```

但是这个函数总是返回`0`。:( 但是当我阅读所有条目时`ShoppingItem`，它们的 ID 的值为 != 0。

所以我的问题是：如何检索最后插入的 id？

PS：更改 SQL 查询以`SELECT last_insert_rowid() FROM ShoppingItem;`给出相同的结果。

PPS：[在 C# 中使用 SQLite.NET 获取最后一个插入 ID](https://stackoverflow.com/questions/4341178/getting-the-last-insert-id-with-sqlite-net-in-c-sharp)等解决方案无法编译，显然使用的是旧版本的 SQLite，API 完全不同

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T14:56:13.783

您的`SELECT last_insert_rowid()`调用不起作用，因为您在*不同*的数据库连接中运行它。

无论如何，您应该只从插入的`ShoppingItem`对象中读取 ID，如下所示：

```
var si = new ShoppingItem() {
  Name = anItem,
  Shop = aShop,
  isActive = aIsActive,
};
db.Insert(si);
return si.Id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:43:21.093

这就是我检索最后插入项目的 id 的方法。提供的代码片段在我使用 SQLite 3.7.XX ( [SQLite](http://www.sqlite.org/) ) 的 Windows 8 应用程序中工作。

```
 public class ExpenseDataMapper
    {
        SQLiteConnection connection;

        /// <summary>
        /// Constructor
        /// </summary>
        public ExpenseDataMapper()
        {
            connection = new SQLiteConnection(StaticResources.DATABASE_PATH_NAME);

            connection.CreateTable<FinancialListBoxExpenseItem>();
        }

        /// <summary>
        /// Method #1: Inserts an FinancialListBoxExpenseItem into Database
        /// </summary>
        /// <param name="item"></param>
        /// <returns>Primary key of inserted item</returns>
        public int insertExpenseItem(FinancialListBoxExpenseItem item)
        {
            int primaryKey = 0;
            connection.RunInTransaction(() =>
                            {
                                connection.Insert(item);
                                primaryKey = item.expenseID;
                            });

            return primaryKey;
        }

    /// <summary>
    /// Method #2: Inserts an FinancialListBoxExpenseItem into Database
    /// </summary>
    /// <param name="item"></param>
    /// <returns>Primary key of inserted item</returns>
    public int insertExpenseItem2(FinancialListBoxExpenseItem item)
    {
        int primaryKey = 0;
        connection.RunInTransaction(() =>
                        {
                            connection.Insert(item);
                            primaryKey = connection.ExecuteScalar<int>("SELECT last_insert_rowid()");
                        });

        return primaryKey;
    }
} 
```

FinancialListBoxItem 类中的 id 属性如下所示：

```
 public class FinancialListBoxExpenseItem : Money.Common.BindableBase
    {

        private int _expenseID = 0;
        [AutoIncrement, PrimaryKey]
        public int expenseID
        {
            get
            {
                return _expenseID;
            }

            set
            {
                this.SetProperty<int>(ref _expenseID, value);
            }
        }
} 
```

我建议您为 pk 列“Id”选择不同的名称。我不知道 Id 是否类似于内部关键字。编辑：好的，它不是 SQLite 关键字，但 id 无论如何都不是正确的名称（来源：[SQLite 关键字](http://www.sqlite.org/lang_keywords.html)）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-10T05:57:10.273

```
 public List<int[]> CreateSymbolByName(string SymbolName, bool AcceptDuplicates)
    {
        if (! AcceptDuplicates)  // check if "AcceptDuplicates" flag is set
        {
            List<int[]> ExistentSymbols = GetSymbolsByName(SymbolName, 0, 10); // create a list of int arrays with existent records
            if (ExistentSymbols.Count > 0) return ExistentSymbols; //(1) return existent records because creation of duplicates is not allowed
        }
        List<int[]> ResultedSymbols = new List<int[]>();  // prepare a empty list
        int[] symbolPosition = { 0, 0, 0, 0 }; // prepare a neutral position for the new symbol
        try // If SQL will fail, the code will continue with catch statement
        {
            //DEFAULT und NULL sind nicht als explizite Identitätswerte zulässig
            string commandString = "INSERT INTO [simbs] ([En]) OUTPUT INSERTED.ID VALUES ('" + SymbolName + "') "; // Insert in table "simbs" on column "En" the value stored by variable "SymbolName"
            SqlCommand mySqlCommand = new SqlCommand(commandString, SqlServerConnection); // initialize the query environment
                SqlDataReader myReader = mySqlCommand.ExecuteReader(); // last inserted ID is recieved as any resultset on the first column of the first row
                int LastInsertedId = 0; // this value will be changed if insertion suceede
                while (myReader.Read()) // read from resultset
                {
                    if (myReader.GetInt32(0) > -1) 
                    {
                        int[] symbolID = new int[] { 0, 0, 0, 0 };
                        LastInsertedId = myReader.GetInt32(0); // (2) GET LAST INSERTED ID
                        symbolID[0] = LastInsertedId ; // Use of last inserted id
                        if (symbolID[0] != 0 || symbolID[1] != 0) // if last inserted id succeded
                        {
                            ResultedSymbols.Add(symbolID);
                        }
                    }
                }
                myReader.Close();
            if (SqlTrace) SQLView.Log(mySqlCommand.CommandText); // Log the text of the command
            if (LastInsertedId > 0) // if insertion of the new row in the table was successful
            {
                string commandString2 = "UPDATE [simbs] SET [IR] = [ID] WHERE [ID] = " + LastInsertedId + " ;"; // update the table by giving to another row the value of the last inserted id
                SqlCommand mySqlCommand2 = new SqlCommand(commandString2, SqlServerConnection); 
                mySqlCommand2.ExecuteNonQuery();
                symbolPosition[0] = LastInsertedId; // mark the position of the new inserted symbol
                ResultedSymbols.Add(symbolPosition); // add the new record to the results collection
            }
        }
        catch (SqlException retrieveSymbolIndexException) // this is executed only if there were errors in the try block
        {
            Console.WriteLine("Error: {0}", retrieveSymbolIndexException.ToString()); // user is informed about the error
        }

    CreateSymbolTable(LastInsertedId); //(3) // Create new table based on the last inserted id
    if (MyResultsTrace) SQLView.LogResult(LastInsertedId); // log the action
    return ResultedSymbols; // return the list containing this new record
} 
```

# c++ - 搜索并行数组

> ID：15476062
> 
> 赞同：0
> 
> 时间：2013-03-18T11:47:31.100
> 
> 标签：c++, arrays, string

我的程序旨在从包含标题和作者列表的文件中获取输入。该文件如下所示：

```
标题
相关作者
下一个标题
相关作者
等等

```

我遇到的问题是我的 showBooksByTitle 和 showBooksByAuthor 函数。现在这段代码只返回完全匹配并且还打印一个空的换行符和一个带有一些空格和 () 的新行。

当然，非常感谢任何帮助。这是我编程的第一年。为了安全起见，我已经包含了整个代码，我不会遗漏任何可能出现问题的东西。

```
#include <iostream>
#include<string>
#include<fstream>
#include<cstring>

using namespace std;

struct Book {
    string title;
    string author;
};

const int ARRAY_SIZE = 1000;
Book books [ARRAY_SIZE];

int loadData (string);
void showAll (int);
int showBooksByAuthor (int, string);
int showBooksByTitle (int, string);

int main() {
    //Declare variables
    string pathname;
    string title;
    string name;
    string word;
    int count;
    char response;

    //ask user for pathname
    cout << "What is the path of the library file? ";
    cin >> pathname;
    cout << endl;
    count = loadData(pathname);

    //input data into arrays
    loadData(pathname);
    cout << endl << count << " records loaded successfully." << endl << endl;

    //Show user menu
    cout << "Please enter Q to Quit, A to search for the Author, T to search for the Title, "
    << endl << "or S to Show all: ";
    cin >> response;

    switch(response) {
        case 'q':
            break;
        case 'Q':
            break;
        case 'a':
            cout << endl << "Please enter author's name: ";
            cin >> name;
            showBooksByAuthor(count, name);
            break;
        case 'A':
            cout << endl << "Please enter author's name: ";
            cin >> name;
            showBooksByAuthor(count, name);
            break;
        case 't':
            cout << endl << "Please enter all or part of the title: ";
            cin >> title;
            showBooksByTitle(count, title);
            break;
        case 'T':
            cout << endl << "Please enter all or part of the title: ";
            cin >> title;
            showBooksByTitle(count, title);
            break;
        case 's':
            cout << endl;
            showAll(count);
            break;
        case 'S':
            cout << endl;
            showAll(count);
            break;
        default:
            cout << endl << "Invaled input, please try again: ";
            break;
    }

    //pause and exit
    cout << endl;
    system("PAUSE");
    return 0;
}

int loadData(string pathname) {
    int i = 0;
    int j = 0;
    ifstream library;

    //open file, if not successful, output error message
    library.open(pathname.c_str());
    if (!library.is_open()) {
        cout << "Unable to open input file." << endl;
        return -1;
    }
    //reads title and author from file into designated string
    //this is assuming title comes first and author comes after
    while(!library.eof()) {
        getline(library, books[i].title);
        getline(library, books[i].author);
        i++;
    }
    return i;
}

void showAll (int count) {
    for (int i = 0; i < count; i++) {
        cout << books[i].title << " (" << books[i].author << ")" << endl;
    }
}

int showBooksByAuthor(int count, string name) {
    int found;
    for(int n = 0; n < 28; n++) {
        found = name.find(books[n].author);
        if(found != string::npos) {
            cout << endl << books[n].title << " (" << books[n].author << ")" << endl;
        }
    }
    return 0;
}

int showBooksByTitle (int count, string title) {
    int found;
    for(int n = 0; n < 28; n++) {
        found = title.find(books[n].title);
        if(found !=string::npos) {
            cout << endl << books[n].title << " (" << books[n].author << ")" << endl;
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:53:47.170

意外的输出是因为你读错了数据文件。*直到您尝试对流执行操作后*才会设置流 EOF 标志，因此您的循环会迭代一到多次。

将循环更改为`loadData`：

```
while(getline(library, books[i].title) && getline(library, books[i].author))
    i++; 
```

这使用了返回流的事实`std::getline`，并且流可以用作真/假值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:05:32.390

Joachim 已经指出了主要问题。我想添加一些评论评论：

1.  C++ 有一个可变长度数组，即`std::vector`. 它还有一个链表和其他容器。所以不要让书籍成为一个固定的数组，而是使用一些标准的容器。
2.  使用迭代器迭代事物，而不是索引。对于数组，指针是迭代器（C++11 具有`end()`获取刚刚超过数组末尾的指针的功能；在 C++03 中编写自己是微不足道的，但无论如何你不应该使用普通的旧数组）。
3.  您正在输入字符串中查找书名/书名。如果你想要子字符串匹配，你应该反过来做。

# javafx-2 - 在 GridPane 中剪辑 HBox

> ID：15476063
> 
> 赞同：3
> 
> 时间：2013-03-18T11:47:32.927
> 
> 标签：javafx-2, hbox

我有一个`JavaFX 2`GUI，其中包括`HBox`填充一个`GridPane`. 我所有的组件都是动态调整大小的。这显示很好，没有问题。

第一个问题：我想剪辑它们所在单元格`HBox`边缘的内容`GridPane`，这样就不会显示任何溢出，但我不知道怎么做。我尝试将我的剪辑设置为`HBox`相同大小的矩形，但这不起作用。我猜是因为它使用了用于布局的尺寸，而不是显示的尺寸。我应该剪裁`GridPane`自身，还是至少使用它的属性？

第二个问题（加分）：剪辑如何与平移和缩放交互`Node`？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T23:22:08.573

我尝试了几个短程序，试图在 GridPane 中剪辑节点。没有一个剪辑尝试实现我真的很喜欢，尽管它们中的大多数都以某种方式或其他方式工作，具体取决于要求。

最接近您的描述的剪辑尝试是将剪辑节点包装在具有自己的大小说明符的区域中的最后一个尝试，以便剪辑区域的布局与应用于节点的剪辑节点的大小相匹配。

```
class ClippedNode extends Region {
  private final Node content;
  private final double width;
  private final double height;

  ClippedNode(Node content, double width, double height) {
    this.content = content;
    this.width   = width;
    this.height  = height;

    content.setClip(new Rectangle(width, height));

    getChildren().setAll(content);
  }

  @Override protected double computeMinWidth(double d)   { return width; }
  @Override protected double computeMinHeight(double d)  { return height; }
  @Override protected double computePrefWidth(double d)  { return width; }
  @Override protected double computePrefHeight(double d) { return height; }
  @Override protected double computeMaxWidth(double d)   { return width; }
  @Override protected double computeMaxHeight(double d)  { return height; }
} 
```

![裁剪节点样本](../Images/61827fb04b720811070f1fccf26b4fbb.png)

下面提供了演示各种剪辑方法的完整可执行示例：

```
import java.util.Iterator;
import javafx.application.Application;
import javafx.beans.value.*;
import javafx.scene.*;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.scene.shape.Rectangle;
import javafx.scene.text.Text;
import javafx.stage.Stage;

public class GridClipping extends Application {
  String buttonText[] = "The quick brown fox jumped over the lazy dog".split(" ");
  String[] colors = { "aqua", "coral", "cornsilk", "cornflowerblue" };

  @Override public void start(Stage stage) throws Exception {
    final GridPane grid = new GridPane();
    grid.addRow(0, createHBox("aqua"),     createHBox("coral"));
    grid.addRow(1, createHBox("cornsilk"), createHBox("cornflowerblue"));
    grid.setStyle("-fx-border-color: red;");

    final GridPane gridWithClippedBoxes = new GridPane();
    gridWithClippedBoxes.addRow(0, createClipWrappedHBox("aqua"),     createClipWrappedHBox("coral"));
    gridWithClippedBoxes.addRow(1, createClipWrappedHBox("cornsilk"), createClipWrappedHBox("cornflowerblue"));
    gridWithClippedBoxes.setStyle("-fx-border-color: red;");

    final RadioButton noClip            = new RadioButton("No Clip");
    final RadioButton restrictGridSize  = new RadioButton("Restrict Max Grid Size (doesn't work)");
    final RadioButton clipGrid          = new RadioButton("Clip Grid");
    final RadioButton clipHBoxes        = new RadioButton("Clip HBoxes");
    final RadioButton clipWrappedHBoxes = new RadioButton("Clip Wrapped HBoxes");

    final ToggleGroup clipRadios       = new ToggleGroup();
    clipRadios.getToggles().setAll(
     noClip, 
     restrictGridSize, 
     clipGrid, 
     clipHBoxes,
     clipWrappedHBoxes
    );

    final Rectangle gridClip = new Rectangle(0, 0, 100, 25);

    clipGrid.selectedProperty().addListener(new ChangeListener<Boolean>() {
      @Override public void changed(ObservableValue<? extends Boolean> ov, Boolean wasClipped, Boolean clipped) {
        if (clipped != null) {
          if (clipped) {
            grid.setClip(gridClip);
          } else {
            grid.setClip(null);
          }
        } 
      }
    });

    restrictGridSize.selectedProperty().addListener(new ChangeListener<Boolean>() {
      @Override public void changed(ObservableValue<? extends Boolean> ov, Boolean wasClipped, Boolean clipped) {
        if (clipped != null) {
          if (clipped) {
            // this does not work in our case.
            // the minimum size of the grid components > the max size of the grid.
            // so the grid expands in size to fit the minimum size of it's components anyway.
            grid.setMaxSize(100, 25); 
          } else {
            grid.setMaxSize(Double.MAX_VALUE, Double.MAX_VALUE);
          }
        } 
      }
    });

    clipHBoxes.selectedProperty().addListener(new ChangeListener<Boolean>() {
      @Override public void changed(ObservableValue<? extends Boolean> ov, Boolean wasClipped, Boolean clipped) {
        if (clipped != null) {
          if (clipped) {
            for (Node gridCell: grid.getChildren()) {
              Rectangle cellClip = new Rectangle(100, 12);
              gridCell.setClip(cellClip);
            }
          } else {
            for (Node gridCell: grid.getChildren()) {
              gridCell.setClip(null);
            }
          }
        } 
      }
    });

    final VBox layout = new VBox(10);
    clipWrappedHBoxes.selectedProperty().addListener(new ChangeListener<Boolean>() {
      @Override public void changed(ObservableValue<? extends Boolean> ov, Boolean wasClipped, Boolean clipped) {
        if (clipped != null) {
          if (clipped) {
            layout.getChildren().set(0, gridWithClippedBoxes);
          } else {
            layout.getChildren().set(0, grid);
          }
        } 
      }
    });

    noClip.fire();

    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 10;");
    layout.getChildren().setAll(
      grid,
      noClip,
      restrictGridSize,
      clipGrid,
      clipHBoxes,
      clipWrappedHBoxes
    );

    stage.setScene(new Scene(layout));
    stage.show();
  }

  private Region createHBox(String webColor) {
    HBox box = new HBox(5);
    box.setStyle("-fx-background-color: " + webColor + ";");
    for (String text: buttonText) {
      box.getChildren().add(new Text(text));
    }
    box.setOpacity(0.5);

    return box;
  }    

  private Region createClipWrappedHBox(String webColor) {
    return new ClippedNode(createHBox(webColor), 100, 12);
  }

  class ClippedNode extends Region {
    private final Node content;
    private final double width;
    private final double height;

    ClippedNode(Node content, double width, double height) {
      this.content = content;
      this.width   = width;
      this.height  = height;

      content.setClip(new Rectangle(width, height));

      getChildren().setAll(content);
    }

    @Override protected double computeMinWidth(double d)   { return width; }
    @Override protected double computeMinHeight(double d)  { return height; }
    @Override protected double computePrefWidth(double d)  { return width; }
    @Override protected double computePrefHeight(double d) { return height; }
    @Override protected double computeMaxWidth(double d)   { return width; }
    @Override protected double computeMaxHeight(double d)  { return height; }
  }

  public static void main(String[] args) { Application.launch(args); }
} 
```

# ios - 如何在项目之间添加ARC

> ID：15476067
> 
> 赞同：1
> 
> 时间：2013-03-18T11:47:42.927
> 
> 标签：ios, objective-c, ios6, automatic-ref-counting

我正在创建 iPhone 应用程序，在这两者之间我需要使用[`SDWebImage`](https://github.com/rs/SDWebImage). 为此，我需要使用 ARC。

知道如何在项目之间添加 ARC 吗？

**注意：**在一个文件中，我有以下内容。

```
#if !__has_feature(objc_arc)
#error SDWebImage is ARC only. Either turn on ARC for the project or use -fobjc-arc flag
#endif 
```

我应该在哪里添加`-fobjc-arc`标志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:50:39.990

```
Select Project Form Project Manager
  |
  | 
  Targets
       |
       |
     Build Phases
          |
          |
        Compile Sources
                |
                |
            Select File that you Want to crate as ARC. (You can also Select Multiple File name from here)
                        |
                        |
                    Press "ENTER" key
                           |
                           |
                      Popup Box/Window is displayed 
                               |
                               |
                            Write here - '-fno-objc-arc'
                                    |
                                    |
                                And again Press 'ENTER' key.

Your selected file is being ARC. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:52:11.347

```
Change from build settings

Project->Build setting->Objective-C Automatic Reference Counting  SET YES

If you need to remove ARC then Go to  Project->Build Phases->compile sources then find your file Which you need to remove ARC then set compile source '-fno-objc-arc' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T11:54:10.653

如果您使用的是 xcode 4.6，则选择您的目标`Target`->`Build Settings`并找到**Apple LLVM 编译器 4.2 ，如果****Objective-c Automatic Reference Counting**设置为**YES** ，请参见本节，如果不是，则将其设置为 YES。对于旧版本的 XCode，您可以更改为`Apple LLVM compiler 3.0`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T11:50:14.887

在 xcode 顶部

编辑->重构->然后选择转换为 Arc

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T11:53:42.680

试试这个![如图所示查看图像添加 -fobjc-arc flag flag-](../Images/f9f6139b66aa15e3080eb94f3e7d74ff.png)

希望这能解决你的问题..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T11:53:54.637

编辑 → 重构 → 转换为 Objective-C ARC。

以下是有关如何处理任何迁移问题的文档：

[http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

# java - SHA-1 密钥生成...拒绝访问

> ID：15476069
> 
> 赞同：1
> 
> 时间：2013-03-18T11:47:45.180
> 
> 标签：java, android, google-api

我在生成注册到谷歌 API 所需的 SHA-1 密钥时遇到问题......这是我最接近的，通过输入：

```
keytool -list -v -keystore "C:\Users\Rakeeb\.android\debug.keystore".keystore -storepass android -keypass android 
```

这给出了一个错误`Access Denied`

其他格式导致错误 Invalid format。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-01T20:41:33.510

**最简单的方法：**

## 在最后一步中为 Android Studio V 2.2 添加了更新

有两种方法可以做到这一点。

**1.更快的方式**：

1.  打开安卓工作室
2.  打开你的项目
3.  单击 Gradle（从右侧面板，您将看到**Gradle Bar**）
4.  单击 Refresh（从**Gradle Bar**单击 Refresh ，您将看到**List** Gradle 项目的脚本）
5.  单击您的项目（您的项目名称表单**列表**（根））
6.  点击任务
7.  点击安卓
8.  双击signingReport（您将在**运行栏中获得****SHA1**和**MD5**）
***   从**模块选择下拉列表**中选择**应用程序**模块以运行或调试您的应用程序**

 ******检查下面的屏幕截图：**

[![在此处输入图像描述](../Images/c37e1d5e7ef945e5ea83ca066d2602b7.png)](https://i.stack.imgur.com/ZG7rI.png)

**2.使用谷歌地图活动**：

1.  打开安卓工作室
2.  打开您的项目
3.  点击**文件**菜单 -> 选择**新建**-> 点击**谷歌**-> 选择**谷歌地图活动**
4.  将出现一个对话框->单击**完成**
5.  Android Studio会自动生成**一个****名为****`google_maps_api.xml`**
***   您将在此处获得**调试 SHA1**密钥（在XML 文件的**第 10 行）****

 ****检查下面的屏幕截图：**

[![在此处输入图像描述](../Images/7a0bfc02d946eeb7aa29853fe59922e7.png)](https://i.stack.imgur.com/u4Ppn.png)

## Android Studio V 2.2 更新

**执行**有问题。

**解决方案：**

*   单击**运行栏中**的**切换任务执行/文本模式**

 ****检查下面的屏幕截图：**

[![在此处输入图像描述](../Images/dc127f2f8c31547db2112b588922c0e1.png)](https://i.stack.imgur.com/UG1vW.png)

**完毕。**********

# asp.net-mvc-3 - ASP.NET 会话输出问题。经常注销问题

> ID：15476070
> 
> 赞同：0
> 
> 时间：2013-03-18T11:47:46.433
> 
> 标签：asp.net-mvc-3

我创建了一个带有身份验证的 ASP.NET MVC 剃须刀应用程序。我使用了 AuthorizeAttribute 的自定义实现。

当我在本地运行它时，它工作正常，但是当我从网站上传并运行它时，它经常在工作时注销，而不会让网站闲置。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:30:04.123

如果 asp.net 会话存储在内存中并且您回收应用程序域，您将丢失内存中的所有会话。如果您控制 Web 服务器，您可能会研究任何回收的原因：[请参阅](http://blogs.msdn.com/b/tess/archive/2006/08/02/asp-net-case-study-lost-session-variables-and-appdomain-recycles.aspx). 如果您希望会话在这些事件中持续存在，则需要查看其他[会话状态模式](http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.100%29.aspx)

# c++ - 返回并调用动态字符串数组

> ID：15476074
> 
> 赞同：2
> 
> 时间：2013-03-18T11:47:55.107
> 
> 标签：c++, string, function, vector

我创建了一个类：

```
 Data::Data(char szFileName[MAX_PATH]) {

    string sIn;
    int i = 1;

    ifstream infile;
    infile.open(szFileName);
    infile.seekg(0,ios::beg);

    std::vector<std::string> fileRows;
    while ( getline(infile,sIn ) )
    {
      fileRows.push_back(sIn);
    }
} 
```

之后我创建了这个：

```
std::vector<std::string> Data::fileContent(){
        return fileRows;
} 
```

之后，我想在`fileContent()`某个地方调用它，如下所示：

```
Data name(szFileName);
MessageBox(hwnd, name.fileContent().at(0).c_str() , "About", MB_OK); 
```

但这不起作用......如何称呼这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:55:01.423

```
std::vector<std::string> fileRows;
while ( getline(infile,sIn ) )
{
   fileRows.push_back(sIn);
} 
```

不起作用，因为您在构造函数中声明了 fileRows，一旦构造函数结束`fileRows`就被销毁。

您需要做的是将 fileRows 声明移到构造函数之外并使其成为类成员：

```
class Data
{
...

   std::vector<std::string> fileRows;
}; 
```

然后它将由类中的所有函数共享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:56:12.140

你可以这样做：

```
#include <string>
#include <vector>

class Data
{
public:
  Data(const std::string& FileName)  // use std::string instead of char array
  {
     // load data to fileRows
  }

  std::string fileContent(int index) const  // and you may don't want to return a copy of fiileRows
  {
      return fileRows.at(index);
  }

private:
    std::vector<std::string> fileRows;
}; 
```

# android - 使用软键盘时不会调用 onKeyDown

> ID：15476079
> 
> 赞同：3
> 
> 时间：2013-03-18T11:48:13.777
> 
> 标签：android

我的 Activity 的 xml 代码是

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<EditText
    android:id="@+id/et1"
            android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/hello_world" />

</RelativeLayout> 
```

为此添加关键事件，我已经在这样的主要活动中编码

```
public class MainActivity extends Activity
{
EditText e1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
     e1=(EditText)findViewById(R.id.et1);
/*  e1.setOnKeyListener(new OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            Log.i("keycode","Inside on key");
            //char a=event.getDisplayLabel();
            char a = (char)event.getUnicodeChar();
      Log.i("keycode",Character.toString(a));               
            if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
                    (keyCode == KeyEvent.KEYCODE_ENTER)) {
                Log.i("keycode",Integer.toString(keyCode));
                Log.i("keycode",(e1.getText()).toString());
                return true;
            }
            else
            {
                return false;
            }

            // TODO Auto-generated method stub

        }
    });*/

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    Log.i("key","KeyPressed"+Integer.toString(keyCode));
    Log.i("keycode",(e1.getText()).toString());
    return super.onKeyDown(keyCode, event);
}

@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub

            switch(keyCode)
    {
    case KeyEvent.KEYCODE_A:
    {
        Log.i("key1","KeyPressed A");
        Log.i("keycode1",(e1.getText()).toString());

        return true;
    }
    }
    return super.onKeyUp(keyCode, event);
}
@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    new AlertDialog.Builder(this)
    .setIcon(android.R.drawable.ic_dialog_alert)
    .setTitle("Closing Activity")
    .setMessage("Are you sure you want to close this activity?")
    .setPositiveButton("Yes", new DialogInterface.OnClickListener()
  {
    @Override
    public void onClick(DialogInterface dialog, int which) {
        finish();    
    }

})
.setNegativeButton("No", null)
.show();

}

} 
```

当我从软键盘按 A 时...未调用 onKeyDown 或 onKeyUp 方法...有人告诉我当我在软键盘中按字母表时调用这些方法的方法..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T19:28:36.313

来自[http://developer.android.com/reference/android/view/KeyEvent.html](http://developer.android.com/reference/android/view/KeyEvent.html)

*由于软输入法可以使用多种创新方式输入文本，因此无法保证软键盘上的任何按键都会产生按键事件：这由 IME 自行决定，实际上不鼓励发送此类事件。您永远不应该依赖接收 KeyEvents 来获取软输入法上的任何键。特别是，默认的软件键盘永远不会向任何针对 Jelly Bean 或更高版本的应用程序发送任何键事件，并且只会向针对 Ice Cream Sandwich 或更早版本的应用程序发送某些按下删除键和返回键的事件。请注意，其他软件输入法可能永远不会发送按键事件，无论版本如何。如果您需要与软件键盘进行特定交互，请考虑使用 IME_ACTION_DONE 等编辑器操作，

因此，大多数键不会生成任何**KeyEvent**。捕获按下哪个键的唯一方法是通过**TextWatcher**。

# javascript - 在可点击的文本上表达积极和消极

> ID：15476081
> 
> 赞同：0
> 
> 时间：2013-03-18T11:48:16.060
> 
> 标签：javascript, html, css

我使用了下面的代码，它允许我根据用户点击标题来展示数据，但我试图在它旁边添加一个正面图像，这很容易完成，但是当用户点击标题并且数据是显示想显示negative.png，当他们再次点击隐藏数据时，我想显示positive.png

**代码**

```
 <div >
        <div class="layer1">
            <p class="heading">To view report fields click here</p>
                <div class="content" >
                     <table>
                        <tr>
                            <th>Name</th>
                        </tr>
                        <tr>
                            <td><h4>Gender</h4></td>
                        </tr>
                        <tr>
                            <td><h4>Percentage</h4></td>
                        </tr>
                    </table>   
                </div> 
         </div>
     </div> 
```

**CSS 代码**

```
.layer1 {
margin: 0;
padding: 0;
width: auto;
}

.heading {
margin: 1px;
color:Black;
font-family:Arial;
font-weight:bold;
padding: 3px 10px;
cursor: pointer;
position: relative;
background-color:#C0C0C0;
}
.content {
padding: 5px 10px;
background-color:#fafafa;
} 
```

**JavaScript 代码**

```
jQuery(document).ready(function () {
     jQuery(".content").hide();
     //toggle the componenet with class msg_body
     jQuery(".heading").click(function () {
         jQuery(this).next(".content").slideToggle(400);
     });
 }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:57:38.473

使用`toggleClass`. 编写不同的类来切换

```
jQuery(document).ready(function () {
     jQuery(".content").hide();
     //toggle the componenet with class msg_body
     jQuery(".heading").click(function () {
         jQuery(this).next(".content").slideToggle(400);
         jQuery(this).toggleClass("collapse");
     });
 }) 
```

**[演示](http://jsfiddle.net/N6MCd/1/)**

**[关于toggleClass](http://api.jquery.com/toggleClass/)**的更多解释

# php - 如何根据特定值按降序对数组进行排序

> ID：15476085
> 
> 赞同：1
> 
> 时间：2013-03-18T11:48:19.220
> 
> 标签：php, arrays

我有一系列新闻，比如

```
Array
(
  [0] => Array
    (
        [news_published] => 1337192831
        [news_category] => 5
    )

  [1] => Array
    (
        [news_published] => 1334566743
        [news_category] => 5
    )

  [2] => Array
    (
        [news_published] => 1340092425
        [news_category] => 6
    )

  [3] => Array
    (
        [news_published] => 1339740173
        [news_category] => 6
    )

  [4] => Array
    (
        [news_published] => 1336148837
        [news_category] => 6
    )
) 
```

如何按降序对 news_published 进行排序....我尝试过使用“usort”，但无法正确找到结果，有人可以建议我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T11:51:40.547

试试这个 ：

```
$arr  = your array;
$sort = array();
foreach($arr as $k=>$v) {
    $sort['news_published'][$k] = $v['news_published'];
}

array_multisort($sort['news_published'], SORT_DESC, $arr);

echo "<pre>";
print_r($arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:02:15.280

```
<?php

 $array = array( array('news_published'=>'1337192831','news_category'=>'5'),
            array('news_published'=>'1337192231','news_category'=>'5'),                
            array('news_published'=>'1337192921','news_category'=>'6'),

           );
  / orignal array
 print_r($array);

foreach ($array as $key => $row) {
$new_published[$key] = $row['news_published'];
 }
array_multisort($new_published, SORT_DESC,$array);

 // sorted array
print_r($array);

 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:05:49.957

或这个：

```
function sortForMe($a, $b)
{
    if ((int)$a['news_published'] === (int)$b['news_published']) {
        return 0;
    }
    return (int)$a['news_published'] < (int)$b['news_published'] ? -1 : 1;
}

usort($array, 'sortForMe'); 
```

您可以使用类中的函数或静态方法-您的选择:)

# php - PHP JSON 到 Javascript

> ID：15476089
> 
> 赞同：0
> 
> 时间：2013-03-18T11:48:24.827
> 
> 标签：php, javascript, json

在 php 中，我有一个数组，其中包含一个数组列表，其中包含一个数组列表。

```
$data = array();
$driveArr = array();

I have a loop that 

array_push($driveArr, array("text" => $text,
                      "spot" => $play,
                      "ball" => $hasball,
                      "togo" => $togo,
                      "type" => $type,
                      "drive"=> $drive)
Then, array_push($data,$driveArr);
$driveArr=array(); //resets $driveArr then go back to the top of the loop 
```

所以，$data 有一堆 $driveArr

然后，我做了 echo json_encode($data); 但它给了我空白页。

总体目标是我可以在javascript中使用这个数组数组

```
 var data = JSON.parse("<?php echo json_encode($data) ?>"); 
```

我想看看它的结构，这样我就可以一次挑选出中间组数组并访问文本、点、球、多哥、类型、驱动器。

我想我的第一个问题是 json 结构如何，所以我至少可以调试它。

我知道这是

```
 $arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);
     echo json_encode($arr);

     = {"a":1,"b":2,"c":3,"d":4,"e":5} 
```

在php中，我做到了

```
$driveNum = 1;
foreach($data as $x=>$x_value){
foreach($x_value as $y=>$y_value){
    foreach($y_value as $z=>$z_value){
    if ($x == $driveNum){
        echo "Key=" . $z . ", Value=" . $z_value;
        echo "<br>";
    }
    }
}
} 
```

一切都已正确保存。我想通过 $driveNum = 访问它；在javascript中

所以假设一切正常。我不知道有没有。我在 javascript 中有 var 数据。
我如何使用数据来挑选一组数组并单独访问文本、点、球、多哥、类型和驱动器？

# web - 包含在文档类型之前

> ID：15476090
> 
> 赞同：1
> 
> 时间：2013-03-18T11:48:29.893
> 
> 标签：web, include, loading, config, doctype

是否应该在 PHP 文件的 DOCTYPE 之前放置一个包含？

我有一个包含导致配置文件的文件，我认为该文件会阻止网站加载。如果删除这包括页面加载（由于缺少功能而出现错误），但是一旦我把它放回去，它就会再次中断。

请注意。在 DOCTYPE 之前，我还有许多其他站点，它们都运行良好。它们导致的配置文件完全相同，这告诉我它不是配置文件中的编码。

所以最上面的一行现在看起来像这样：

```
<? include('config.php'); ?><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

然后配置文件如下所示：

```
 <?
// WEBSITE SETUP
$config_website_code = "FR"; // .net IS Q, EVERYTHING ELSE IS GEO CODE
$config_db_error = 1; // IS THE DATABASE WORKING? 0 IS NO
$config_website_url = "http://www.lektronix.fr";
$config_website_short_url = "lektronix.fr";

// GOOGLE ANALYTICS
$config_analytics_code = "<script type=\"text/javascript\">\n";
$config_analytics_code .= "var _gaq = _gaq || [];\n";
$config_analytics_code .= "_gaq.push(['_setAccount', 'UA-4257220-56']);\n";
$config_analytics_code .= "_gaq.push(['_trackPageview']);\n";
$config_analytics_code .= "(function() {\n";
$config_analytics_code .= "var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;\n";
$config_analytics_code .= "ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';\n";
$config_analytics_code .= "var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);\n";
$config_analytics_code .= "})();\n";
$config_analytics_code .= "</script>\n";

// ASSIGN GEO BASED ON THEIR IP
include('assign_geo.php'); 

// ASSIGN THEIR LANGUAGE
include('assign_language.php'); 

// DEFINE THE CONTENT THEY SEE
include('assign_content.php');

// COMMON PAGE FUNCTIONS
include('functions.php'); 

// HEADER AND DESCRIPTION TAGS
include('assign_meta_data.php');  
?> 
```

这与其他工作网站相同，配置文件中包含的文件也相同。

我从头文件和索引文件中删除了所有内容，只回显“hello world”；

这已加载并且是正确的。

i then began placing code back in but the first line i placed back in was the include before the doctype and this broke the website again.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:12:28.107

Yes you can put PHP code before the DOCTYPE in a file it will not cause any problems. Looking at your code and from what you've told me the problem should be with your code in one of the files being called from the config file. My guess is the Functions file. go check that out. A little debugging will go a long way.

# c# - Ninject StandardKernel GetProvider

> ID：15476091
> 
> 赞同：1
> 
> 时间：2013-03-18T11:48:30.250
> 
> 标签：c#, inversion-of-control, ninject

我正在尝试获取将要实现接口的类的全名。我用一个`StandardKernel`

```
Kernel = new StandardKernel(); 
```

但我似乎无法获得我想要的信息，因为

```
Kernel.GetBindings(type).FirstOrDefault().GetProvider() //ignore the pos. null for this example 
```

`GetProvider()`需要一个`IContext`，我不知道从哪里得到它...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:17:07.983

有点奇怪的解决方案，但在一个简单的情况下对我有用：

```
var kernel = new StandardKernel();
kernel.Bind<IEnumerable>().To<Array>();
var kernelTarget = kernel.GetBindings(typeof(IEnumerable)).First ().ProviderCallback.Target;
var typeName = kernelTarget.GetType().GetField("prototype").GetValue(kernelTarget).ToString(); 
```

# ruby-on-rails - 重新渲染ajax时出现Rspec路由错误

> ID：15476097
> 
> 赞同：-1
> 
> 时间：2013-03-18T11:48:52.283
> 
> 标签：ruby-on-rails, ajax, templates, rspec

嘿，所以我写了一个新功能并通过 Spork 运行我的测试服，但我的视图测试失败了。这将是我第一次看视图测试，所以有点混乱。

我收到以下错误

```
 ActionView::Template::Error:
   No route matches {:controller=>"employment_equity", :action=>"update_percentage_of_black_youth", :method=>:put, :scorecard_id=>123456, :id=>nil} 
```

它正在测试的视图看起来像这样（我使用 sass 和 haml 以便 # 不是注释，它引用了一个 id 标签）

```
- if current_scorecard.base_charter_is? :transport_public_sector
  .left
    #percentage_of_employees_that_are_black_youth_input= f.field :percentage_of_employees_that_are_black_youth, :class => :percentage
  .left
    .auto_sum_link= link_to('Percentage from Details', update_percentage_of_black_youth_path(current_scorecard.id, @employment_equity.id), :method => :put, :remote => true) 
```

如您所见，我将其添加`:remote_true`到我的`link_to`，以便我可以让 ajax 即时填写该文件。问题是它抱怨没有路线。

当我有它！

```
match '/scorecards/:scorecard_id/employment_equity/:id/update_percentage_of_black_youth', :controller => 'employment_equity', :action => 'update_percentage_of_black_youth', :method => :put, :as => 'update_percentage_of_black_youth' 
```

然后点击基本上用我在模型中计算出的新值填充字段的ajax

```
$("#percentage_of_employees_that_are_black_youth_input input").val(<%= @employment_equity.percentage_of_employees_that_are_black_youth %>).effect("highlight", {color: "#C3EC97"}, 3000); 
```

这一切都在我的开发环境中工作，我的单元测试所有工作都无法弄清楚为什么它因为传递给 ajax 的链接而无法呈现？有人发现类似的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:55:45.567

RSpec / Capybara 等默认不支持 Ajax。原因是 javascript 仅在浏览器中起作用。您是否使用 Selenium 或其他允许测试 javascript 的框架？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:12:01.953

所以我和我旁边有胡子的朋友聊了聊，看看我提出这个问题是否正确，他发现我的路线正在寻找一个 id 的问题

```
match '/scorecards/:scorecard_id/employment_equity/:id/update_percentage_of_black_youth' 
```

并且测试没有给出，`ID`因为它没有保存工厂化类

```
No route matches {:controller=>"employment_equity", :action=>"update_percentage_of_black_youth", :method=>:put, :scorecard_id=>123456,  id=>nil} 
```

抱歉，错误非常不透明。

# c#-4.0 - C# 列表中的唯一值

> ID：15476098
> 
> 赞同：0
> 
> 时间：2013-03-18T11:48:52.840
> 
> 标签：c#-4.0, entity-framework-4

我正在使用带有实体框架的 MVC3。这次我想在列表中制作独特的项目。这是我的物品清单。

**列表**

```
1.Overdue-1
2.Overdue-M
3.ItemsDue-1
4.ItemsDue-5 
```

在上面的列表中，我只是想过滤得到这个列表，

```
1.Overdue
2.Itemsdue 
```

另外，我需要将此设置为 DropdownList ，其中 Overdue 或 Itemsdue 作为下拉文本字段和 1 到 n 作为值字段。我试过这个。但我可以为下拉列表和唯一列表做逻辑。

**代码**

```
var select = (from asd in db.Sys
                      select new EmailTemp
                      {
                          SysCode = asd.Code,
                          SysmailId = asd.Id
                      }).Distinct().ToList();
        List<EmailTemp> filterlist = new List<EmailTemp>();
        foreach (var a in select)
        {
            string lates = a.SysCode;
            var ind = lates.IndexOf("-");
            if (ind > 0)
            {
                a.SysCode = lates.Substring(0, ind);
                a.SysmailId = a.SysmailId;
                filterlist.Add(a);
            }
            else
            {
                a.SysCode = lates;
                a.SysmailId = a.SysmailId;
                filterlist.Add(a);
            }
        }
        //var idlist = filterlist.Distinct().ToList();
        ViewBag.SysMailType = new SelectList(filterlist.Distinct().ToList(), "SysmailId", "SysCode"); 
```

请任何人告诉我我可以写下代码来实现我的逻辑的可能性。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:26:10.513

您可以创建一个自定义[相等比较器](http://msdn.microsoft.com/en-us/library/ms132123.aspx)并使用它来比较使用`Distinct`.

```
class MyEqualityComparer: EqualityComparer<EmailTemp>
{
    private string GetPrefix(string s)
    {
        var pos = sIndexOf("-");
        var rslt = (pos > 0) ? s.SubString(0, pos) : s;
        return rslt;
    }

    public override bool Equals(EmailTemp t1, EmailTemp t2)
    {
        var s1 = GetPrefix(t1.SysCode);
        var s2 = GetPrefix(t2.SysCode);
        return s1.Equals(s2);
    }

    public override int GetHashCode(EmailTemp t1)
    {
        return GetPrefix(t1.SysCode).GetHashCode();
    }
} 
```

并且，要生成唯一项目列表：

```
List<EmailTemp> filterList = select.Distinct(new MyEqualityComparer()).ToList(); 
```

可能有一种方法可以将它与您的第一个 LINQ 表达式结合起来。也许其他人会插话。

# tcp - 如何恢复发送RST数据包

> ID：15476099
> 
> 赞同：-1
> 
> 时间：2013-03-18T11:48:58.267
> 
> 标签：tcp

我使用以下规则丢弃 RST 数据包

```
iptables -A OUTPUT -p tcp --tcp-flags RST RST -j DROP 
```

现在我想恢复RST包发送，怎么办？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:50:47.657

只需删除规则，事情就会恢复正常：

```
iptables -D OUTPUT -p tcp --tcp-flags RST -j DROP 
```

# jquery - 如何通过一次仅获取 5 个对象来加载整个列表，并仅为移动设备激活该机制？

> ID：15476101
> 
> 赞同：0
> 
> 时间：2013-03-18T11:49:05.017
> 
> 标签：jquery, list, mobile, onclick, load

我一直在尝试制作一个包含一长串项目的网站。为了更好的用户体验，我需要这个列表不是一次加载所有项目，而是分几个部分，并且只加载真正需要的那些。

使用下面的代码，我设法让它工作。它一次以 5 个对象的小批量加载数据。仅当用户单击“显示更多”按钮时才下载下一批，并且只要有更多延迟项目，该按钮就可见。

它可以工作，但我需要您的帮助才能使此功能仅在某些屏幕尺寸上工作（比如说宽度 < 480 像素），因为我不需要具有大屏幕的经典客户端的整个机制。

我也可以在加载时为列表设置动画以在加载时平滑显示。

```
<script>
$('.list li:gt(4)').hide();
$('.show_button').click(function() {
$('.list li:hidden:lt(5)').show();
if( ! $('.list li').is(':hidden') )
$(this).hide();
return false;
});
</script> 
```

jsfiddle[链接](http://jsfiddle.net/tristar2/7Sh6x/)

感谢并希望在此问题上获得快速帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:02:01.497

给这个bash：

```
function checkWindowSize() {
    var pageWidth = $(window).width();  
    if (pageWidth <= 480) {
        $('.show_button').show();
        $('.list li:gt(4)').hide();
        $('.show_button').click(function() {
            $('.list li:hidden:lt(5)').show();
            if(!$('.list li').is(':hidden'))
                $(this).hide();
            return false;
        });
    } else {
        $('.show_button').hide();
    }
}

$(document).ready(function() {
    $('.show_button').hide();
    checkWindowSize();
    $(window).resize(checkWindowSize);  
}); 
```

# javascript - 如何使用 JavaScript 将文件上传到 http 网页？

> ID：15476106
> 
> 赞同：0
> 
> 时间：2013-03-18T11:49:29.017
> 
> 标签：javascript, http

我最近使用[www.codecademy.com](http://www.codecademy.com)自学 HTML、CSS 和 JavaScript。
在此之前我的编码经验很少，所以我对一切如何工作以及我所经历的课程仅涵盖一般的日常代码并不太感兴趣。
我在网上寻找了一个合适的教程/运行它，但我还没有找到一个我认为合适的。
我想知道是否有人知道我可以用来帮助我学习这一点的任何资源。

任何帮助表示赞赏。
谢谢。

* * *

HTML/CSS 学习：

*   导入脚本和样式表
*   常见的 HTML 标签
*   创建 ID 和类
*   表、div、跨度
*   通用 CSS 和定位

JavaScript 学习：

*   功能
*   For/While 循环
*   切换语句
*   对象和数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:56:18.133

有大量关于 javascript (ajax) 文件上传组件的资源。除了深入研究一些代码并试图掌握它之外，真的没有其他（好的）方法来学习这一点。一个好的起点是已知的 javascript 框架之一，例如[jQuery](http://jquery.com)、[MooTools](http://mootools.net/)等。它们中的大多数都有一个不错的插件集合，可以满足您的需求。

# ruby-on-rails-3 - 如何在rails应用程序中获取使用sendgrid发送的电子邮件的响应以保存在数据库中

> ID：15476107
> 
> 赞同：4
> 
> 时间：2013-03-18T11:49:31.317
> 
> 标签：ruby-on-rails-3, sendgrid

我已经使用 sendgrid 和 actionmailer 通过 rails 应用程序发送了电子邮件，我也收到了邮件。但是我想在我的 rails 应用程序中发送 sendgrid 的电子邮件的状态（打开、发送、退回……），以便我可以将特定电子邮件的响应保存在我的数据库中。

我已关注： [https](https://github.com/stephenb/sendgrid) ://github.com/stephenb/sendgrid 用于发送电子邮件，它对我有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:34:19.090

[要获取已发送电子邮件的状态，请使用此处](http://sendgrid.com/docs/API_Reference/Webhooks/event.html)所述的 sendgrid webhook

设置完成后，sendgrid 将通知您的 url 以获取以下事件：

*   已处理：消息已被接收并准备好发送。
*   已删除：收件人存在于您的一个或多个抑制列表中：退回、垃圾邮件报告、取消订阅。
*   已投递：消息已成功投递到接收服务器。
*   延迟：收件人的电子邮件服务器暂时拒绝邮件。
*   Bounce：接收服务器不能或不会接受消息。
*   打开：收件人已打开 HTML 邮件。
*   单击：收件人单击消息中的链接。
*   垃圾邮件报告：收件人将邮件标记为垃圾邮件。
*   退订：收件人点击消息的订阅管理链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:44:14.860

您应该为您的应用设置[事件 webhook](http://sendgrid.com/docs/API_Reference/Webhooks/event.html)。完成后，您将收到以下格式的 POST 到您的应用程序：

```
{
  "email":"foo@bar.com",
  "timestamp":1322000095,
  "unique_arg":"my unique arg",
  "category": "some_category",
  "event":"delivered"
} 
```

由于您使用的是 Rails，因此您还应该查看[GridHook](https://github.com/injekt/gridhook)。SendGrid 没有正式支持它，但是开源社区中有很多人在致力于它。有了它，您将能够执行以下操作：

```
Gridhook.configure do |config|
  # The path we want to receive events
  config.event_receive_path = '/sendgrid/event'

  config.event_processor = proc do |event|
     # event is a Gridhook::Event object
     EmailEvent.create! event.attributes
  end
end 
```

# php - Zend Framework 2：子查询

> ID：15476109
> 
> 赞同：6
> 
> 时间：2013-03-18T11:49:36.870
> 
> 标签：php, zend-framework2

ZF2 最近更新到 2.1.4 版本，数据库 API 已更改[http://framework.zend.com/security/advisory/ZF2013-03](http://framework.zend.com/security/advisory/ZF2013-03)

现在我用于子查询的代码是一个例外：

```
$sub = new Select('md_type');
$sub->columns(array(new Expression('COUNT(mt2.parent_id) as total')))
    ->where(array(
        new \Zend\Db\Sql\Predicate\Expression('mt2.parent_id = mt1.id')
    ))
;

$subquery = new \Zend\Db\Sql\Expression("({$sub->getSqlString()})");

$select = new \Zend\Db\Sql\Select('mt1');
$select->columns(array('*', 'cnt' => $subquery)); 
```

> $sub->getSqlString() ------> 注意：试图在 Zend\Db\Adapter\Platform\Mysql 中引用一个没有扩展/驱动支持的值可能会在生产环境中引入安全漏洞。

我找不到使用子查询的替代方法。请告诉我现在如何，如何使用子查询。谢谢！

* * *

这是错误：[https ://github.com/zendframework/zf2/pull/4068](https://github.com/zendframework/zf2/pull/4068)

在不久的将来，我认为它已修复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T10:57:24.070

请试试这个。

```
$sql = new Sql($this->_adapter);
$mainSelect = $sql->select()->from('mt1');
$subQry = $sql->select()
        ->from('md_type')
        ->columns(array('orderCount' => new \Zend\Db\Sql\Expression('COUNT(md_type.parent_id)')))
        ->where('mt2.parent_id = mt1.id');
$mainSelect->columns(
        array(
            'id', 
            'total' => new \Zend\Db\Sql\Expression('?', array($subQry)),
        )
);

$statement = $sql->prepareStatementForSqlObject($mainSelect);
$comments = $statement->execute();
$resultSet = new ResultSet();
$resultSet->initialize($comments);

return $resultSet->toArray(); 
```

参考：[ZF2 - 子查询](https://stackoverflow.com/questions/15742290/subquery-in-zend-framework2/15743270#15743270)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-10T15:09:52.070

我在尝试使用存在运行子查询时遇到了同样的问题。我写了一篇博文，其中包含代码示例，指导您完成设置。[http://aronkerr.blogspot.com/2013/08/zf2-sql-exists-sub-query-using-zf2.html?m=1](http://aronkerr.blogspot.com/2013/08/zf2-sql-exists-sub-query-using-zf2.html?m=1)

# c# - 如何从字节数组中删除 BOM

> ID：15476113
> 
> 赞同：8
> 
> 时间：2013-03-18T11:49:43.860
> 
> 标签：c#, .net, byte-order-mark

我有可能包含或不包含 BOM的`xml`数据。`byte[] byteArray`C# 中是否有任何标准方法可以从中删除 BOM？如果不是，那么处理所有情况（包括所有类型的编码）的最佳方法是什么？

实际上，我正在修复代码中的错误，我不想更改太多代码。所以如果有人能给我删除BOM的代码会更好。

我知道我可以找出`60`'<' 的 ASCII 值并在此之前忽略字节，但我不想这样做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T11:53:12.370

所有 C# XML 解析器都会自动为您处理 BOM。我推荐使用[XDocument——](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument%28v=vs.110%29.aspx)在我看来，它提供了最干净的 XML 数据抽象。

以 XDocument 为例：

```
using (var stream = new memoryStream(bytes))
{
  var document = XDocument.Load(stream);
  ...
} 
```

一旦你有了一个 XDocument，你就可以用它来省略没有 BOM 的字节：

```
using (var stream = new MemoryStream())
using (var writer = XmlWriter.Create(stream))
{
  writer.Settings.Encoding = new UTF8Encoding(false);
  document.WriteTo(writer);
  var bytesWithoutBOM = stream.ToArray();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T09:43:53.957

您可以在从流中读取时执行类似这样的操作来跳过 BOM 字节。您需要扩展 Bom.cs 以包含更多编码，但是 afaik UTF 是唯一使用 BOM 的编码......尽管如此（很可能）是错误的。

[我从这里](http://www.unicode.org/faq/utf_bom.html#bom1)得到了关于编码类型的信息

```
using (var stream = File.OpenRead("path_to_file"))
{
    stream.Position = Bom.GetCursor(stream);
}

public static class Bom
{
        public static int GetCursor(Stream stream)
        {
            // UTF-32, big-endian
            if (IsMatch(stream, new byte[] {0x00, 0x00, 0xFE, 0xFF}))
                return 4;
            // UTF-32, little-endian
            if (IsMatch(stream, new byte[] { 0xFF, 0xFE, 0x00, 0x00 }))
                return 4;
            // UTF-16, big-endian
            if (IsMatch(stream, new byte[] { 0xFE, 0xFF }))
                return 2;
            // UTF-16, little-endian
            if (IsMatch(stream, new byte[] { 0xFF, 0xFE }))
                return 2;
            // UTF-8
            if (IsMatch(stream, new byte[] { 0xEF, 0xBB, 0xBF }))
                return 3;
            return 0;
        }

        private static bool IsMatch(Stream stream, byte[] match)
        {
            stream.Position = 0;
            var buffer = new byte[match.Length];
            stream.Read(buffer, 0, buffer.Length);
            return !buffer.Where((t, i) => t != match[i]).Any();
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-17T01:52:44.880

您不必担心 BOM。

如果由于某种原因您需要使用 XmlDocument 对象，则此代码可能对您有所帮助：

```
byte[] file_content = {wherever you get it};
XmlDocument xml = new XmlDocument();
xml.Load(new MemoryStream(file_content)); 
```

当我尝试使用 Google Api 从 gmail 帐户下载 xml 附件并且文件具有 BOM 并且使用 Encoding.UTF8.GetString(file_content) 无法“正常”工作时，它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T13:13:38.213

您必须识别字节数组开头的字节顺序标记。有几种不同的组合，如[http://www.unicode.org/faq/utf_bom.html#bom1](http://www.unicode.org/faq/utf_bom.html#bom1)所述。

只需创建一个从字节数组的开头开始并查找这些序列的小型状态机。

我不知道您的数组是如何使用的，也不知道您使用了哪些其他参数，所以我不能真正说出您将如何“删除”序列。您的选择似乎是：

1.  如果您有`start`和`count`参数，您可以更改它们以反映数组的起点（在 BOM 之外）。
2.  如果您只有一个`count`参数（数组的`Length`属性除外），您可以移动数组中的数据以覆盖 BOM，并进行`count`相应的调整。
3.  如果您没有`start`或`count`参数，那么您需要创建一个新数组，其大小为旧数组减去 BOM 的大小，并将数据复制到新数组中。

要“删除”序列，您可能需要识别标记是否存在，然后将剩余的字节复制到新的字节数组中。或者，如果您维护字符数（数组的`Length`属性除外）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-16T12:55:21.433

您还可以使用 StreamReader。

假设你有一个 MemoryStream`ms`

```
 using (StreamReader sr = new StreamReader(new MemoryStream(ms.ToArray()), Encoding.UTF8))
    {
         var bytesWithoutBOM = new UTF8Encoding(false).GetBytes(sr.ReadToEnd());
         var stringWithoutBOM = Convert.ToBase64String(bytesWithoutBOM );
    } 
```

# windows-phone-7 - 是否可以在 WP7 中使用 WebBrowser 控件实现支付网关？

> ID：15476116
> 
> 赞同：0
> 
> 时间：2013-03-18T11:49:52.810
> 
> 标签：windows-phone-7

我需要在我的 WindowsPhone 应用程序中实现支付网关，微软是否允许我使用 WebBrowser 控件来处理支付？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:26:15.267

[认证要求](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184843%28v=vs.105%29.aspx)中没有任何内容可以阻止您这样做。

# ios - 自定义 CGAffineTransformationMake

> ID：15476119
> 
> 赞同：0
> 
> 时间：2013-03-18T11:49:56.743
> 
> 标签：ios, cocoa-touch, uiimageview

在我的应用程序中，我想在单击按钮时为图像提供翻转动画。但是当我尝试这样做时，我只能通过 CGAffinetransformationMake（移动、缩放、旋转、翻译）对图像进行四种转换。但是我需要翻转样式转换。任何人都可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:03:11.410

试试下面的，希望对你有一点帮助。

```
[UIView animateWithDuration:0.5 animations:^(void){
    _viewSlidecontainer.transform = CGAffineTransformMakeScale(1.0, 0.0);
} completion:^(BOOL finished){
    [UIView animateWithDuration:0.5 animations:^(void){
        _viewSlidecontainer.transform = CGAffineTransformMakeScale(1.0, 1.0);
    } completion:^(BOOL finished){

    }];
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:54:17.220

尝试这个。它肯定会有所帮助。在按钮单击功能中，您必须编写此代码。

```
[UIView beginAnimations: nil context: nil];
[UIView setAnimationDuration: 0.5f];
[UIView setAnimationTransition: UIViewAnimationTransitionFlipFromLeft forView:yourImageName cache: YES];
[UIView commitAnimations]; 
```

# linux - 使用 OpenSSL 编译时缺少 CMake 变量

> ID：15476123
> 
> 赞同：1
> 
> 时间：2013-03-18T11:50:00.690
> 
> 标签：linux, compilation, cmake

我正在尝试使用 CMake 在 Debian 上编译 servermod。似乎确实安装了每个必需的软件包。如果我开始编译，我会收到此错误：

```
 CMake Error: The following variables are used in this project, but they are set to NOTFOUND.
    Please set them or make sure they are set and tested correctly in the CMake files:
    OPENSSL_CRYPTO_LIBRARIES (ADVANCED)

    OPENSSL_INCLUDE_DIR (ADVANCED)

    OPENSSL_SSL_LIBRARIES (ADVANCED) 
```

我完全不知道如何解决它。必须在哪里设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-04-10T13:11:44.483

您可能需要安装 openssl 的开发工具包。

```
apt install libssl-dev 
```

我有同样的问题，这为我解决了这个问题。

# android - HTMLViewer 不能显示等宽字体？

> ID：15476125
> 
> 赞同：0
> 
> 时间：2013-03-18T11:50:04.343
> 
> 标签：android, html, fonts

我有一个 HTML 文件，它的标签`<pre style="font-family: 'Courier-New', monospaced;">`内有它的内容。`<body>`如果我用 HTMLViewer 打开它，字体看起来像 Courier New，但它根本不是等宽的！

你知道如何让 Android 的 HTMLViewer 渲染等宽字体吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:34:17.200

刚刚发现Android没有Courier New，它的“等宽”字体并不是真正的等宽字体。您可以将字体添加到项目的资产中，但如果您希望其他应用程序正确呈现该文件，您将不得不使用该设备。

所以基本上，不可能做我需要的。无论如何，感谢您的帮助...

# android - 如何从 SD 卡中的选定文件夹上传服务器上的所有图像

> ID：15476130
> 
> 赞同：1
> 
> 时间：2013-03-18T11:50:17.333
> 
> 标签：android, image-uploading

我创建了一个应用程序，其中我将从相机拍摄的图像保存在 SD 卡上的一个文件夹中。现在我想一次上传该文件夹中的所有图像到服务器上。我能够从文件夹中获取所有图像作为位图并将其存储在`ArrayList`. 现在我想在服务器上发送这些图像。但我怀疑是否必须在一个请求中发送所有图像，还是应该一张一张地发送。通过将图像转换为 . 我已成功上传了一张图像`Base64 String`。我还必须显示上传进度。请帮助我决定如何处理一些示例。

# ios - iOS BLE 外设/后台模式下的广告数据

> ID：15476132
> 
> 赞同：10
> 
> 时间：2013-03-18T11:50:20.733
> 
> 标签：ios, bluetooth-lowenergy, peripherals

我正在开发一个系统，它将 BLE 设备（TI CC2540）作为中央设备，将 iPhone4S 上的 iOS 应用程序作为外围设备。除了我需要的 1 个功能外，一切正常：来自中央的白名单（过滤）广告设备。

据我所知，iOS设备使用随机可解析MAC地址，所以我们不能应用基于MAC地址的白名单。

所以我目前的方法是：在iOS应用程序的广告数据（iOS设备充当外围设备）的“本地名称”字段上放置一个ID，中央设备将根据检索到的广告数据进行扫描和过滤。除非应用程序在后台，否则此方法有效。

当我的应用程序置于后台时，广告数据会被截断，并且我的“本地名称”不会通过无线方式出现。从corebluetooth的头文件中，我看到只有“溢出区域”数据可以在应用程序在后台时的广告数据中，但只有iOS设备可以读取这个区域。

那么这里的任何人都可以告诉我如何在后台模式下将自定义数据添加到广告包中，或者任何其他具有此过滤功能的解决方案。

任何评论都会对我有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-18T16:03:57.107

我知道这是一篇较旧的帖子，但对于任何好奇的人来说，没有可靠的方法来实现这一点，因为在应用程序处于后台时未传输 CBAdvertisementDataLocalNameKey。

此外，操作系统会忽略 CBCentralManagerScanOptionAllowDuplicatesKey，因此对于发现的每个新设备，您将获得一个 didDiscoverPeripheral 回调。

如果您对原因感到好奇，请记住，在硬件级别，所有使用 BLE 的应用程序共享一个蓝牙无线电，并且广告数据包在所有发布广告的应用程序之间共享。

溢出区域包含您的设备宣传的所有服务 UUID。我想这个字段很小，如果你有很多，系统可能必须发送几个循环通过 UUID 的数据包来通告它们。

此外，这也是为什么广告包不是放置所需应用信息的最佳位置的另一个原因。假设您有一个应用程序依赖于服务 UUID A 的广告数据。然后，该应用程序变为后台，并且用户打开另一个使用服务 UUID B 的广告数据的应用程序。

因为该设备现在正在为 UUID A 和 UUID B 广告服务，所以任何接收设备都会在任何中央寻找 A 或 B 时收到回调。但是，CBAdvertisementDataLocalNameKey 将只包含 B 的数据，因为它在前台传输设备，这意味着您的设备只期望 A 的数据可能正在处理错误的数据。

如果您想更清楚地了解广告数据实际传输的内容，App Store 上有一个名为 LightBlue 的优秀 iOS 应用程序会向您显示这些数据，并允许您连接到设备并查看它的所有服务、特征和描述符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-10T17:32:48.603

我正在努力解决同样的问题。对于我的项目，我至少需要从 Raspberry Pi 读取背景中 iPhone 的 CBAdvertisementDataLocalNameKey。我仍然无法从溢出区域获得任何信息。

但是我发现了一件有趣的事情可以解决我们的问题。有一些用于 BLE 扫描的 Android 应用程序能够在附近的 iOS 设备处于后台时读取 LocalName。一个例子就是[这个](https://play.google.com/store/apps/details?id=ble.blescanner)。 [这](http://i.stack.imgur.com/rwNwP.png)是引用的应用程序的屏幕截图，显示了附近的 iPhone 在后台时正确的 CBAdvertisementDataLocalNameKey。

在 android 扫描实验期间，覆盆子无法读取除制造商数据块之外的任何内容。一种可能的解决方案是使用蓝牙数据包嗅探器来了解哪个是正确的扫描请求，以获取包含溢出区域的扫描响应消息。不幸的是，这需要特定的硬件，例如 Ubertooth One。

# frameworks - 实体框架处理连接丢失

> ID：15476141
> 
> 赞同：0
> 
> 时间：2013-03-18T11:50:39.927
> 
> 标签：frameworks, entity

我们的应用程序使用的是 EF 5 和 c#.net 4.5。由于我们的应用程序在全球范围内使用一台中央服务器，因此我们遇到了超时并失去与服务器的连接的问题。

目前我们捕获 SaveChanges() 方法并再次尝试，直到用户取消。对于我们在代码中所做的各种加载，我们可以做些什么？

编辑：我尝试了建议的解决方案，但我没有让它正常工作：

```
public class MyRetryStrategy : ITransientErrorDetectionStrategy
{
    public bool IsTransient(Exception ex)
    {
        if (ex != null && ex is SqlException)
        {
            foreach (SqlError error in (ex as SqlException).Errors)
            {
                switch (error.Number)
                {
                    case 1205:
                        System.Diagnostics.Debug.WriteLine("SQL Error: Deadlock condition. Retrying...");
                        return true;

                    case -2:
                        System.Diagnostics.Debug.WriteLine("SQL Error: Timeout expired. Retrying...");
                        return true;

                    case -1:
                        System.Diagnostics.Debug.WriteLine("SQL Error: Timeout expired. Retrying...");
                        return true;
                }
            }
        }

        if (ex != null && ex is EntityException)
        {
            ex = ex.InnerException;
            foreach (SqlError error in (ex as SqlException).Errors)
            {
                switch (error.Number)
                {
                    case 1205:
                        System.Diagnostics.Debug.WriteLine("SQL Error: Deadlock condition. Retrying...");
                        return true;

                    case -2:
                        System.Diagnostics.Debug.WriteLine("SQL Error: Timeout expired. Retrying...");
                        return true;

                    case -1:
                        System.Diagnostics.Debug.WriteLine("SQL Error: Timeout expired. Retrying...");
                        return true;
                }
            }
        }

        // For all others, do not retry.
        return false;
    }
} 
```

Enity Framework 只会抛出 EntityExceptions，所以我添加了第二个代码路径。

实际使用：

```
 RetryPolicy policy = new RetryPolicy<MyRetryStrategy>(5, TimeSpan.FromMilliseconds(1000));
        policy.ExecuteAction(()=>_context.ProductStatuses.Include(x => x.Name.Translations).Load()); 
```

MyRetryStrategy 中的 IsTransient 方法永远不会被调用，也不会调用重试。我测试了它在调用之前停止数据库。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T14:44:47.923

这个样本让我离开了地面。

[http://hmadrigal.wordpress.com/2012/04/23/automatic-retries-using-the-transient-fault-handling-from-enterprise-libraries-entlib/](http://hmadrigal.wordpress.com/2012/04/23/automatic-retries-using-the-transient-fault-handling-from-enterprise-libraries-entlib/)

IService（下）是您自己的自定义实现。

```
private static void RetryPolityUsingCode(IUnityContainer container, IService service, OutputWriterService writer)
       {
           writer.WriteLine("Begin sample: RetryPolityUsingCode");
           // Define your retry strategy: retry 5 times, starting 1 second apart
           // and adding 2 seconds to the interval each retry.
           var retryStrategy = new Incremental(5, TimeSpan.FromSeconds(1), TimeSpan.FromSeconds(2));

           // Define your retry policy using the retry strategy and the Windows Azure storage
           // transient fault detection strategy.
           var retryPolicy = new RetryPolicy<MyRetryStrategy >(retryStrategy);

           try
           {
               // Do some work that may result in a transient fault.
               retryPolicy.ExecuteAction(service.AMethodIDefinedInMyService);
           }
           catch (Exception exception)
           {
               // All the retries failed.
               writer.WriteLine("An Exception has been thrown:\n{0}", exception);
           }
           writer.WriteLine("End sample: RetryPolityUsingCode");
       } 
```

# objective-c - 设置新图像时如何自动调整 NSPanel（和 NSImageView）的大小？

> ID：15476144
> 
> 赞同：1
> 
> 时间：2013-03-18T11:50:42.363
> 
> 标签：objective-c, macos, cocoa

我有一个带有 NSImageView 的 NSPanel。在我的应用程序中，这个面板可以包含不同大小的图像，所以我想在加载新图像时调整面板和图像视图的大小。

每次设置新图像时，我是否应该以编程方式为两者设置新帧，还是有最好的方法（可能是设置）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:54:59.313

您可以使用绑定。

对于窗口内容宽度和内容高度，您需要在从图像中获取 NSImage 时设置值。

您需要找到 image.width 和 image.height 然后将它们用于绑定。

# vb.net - JSON 似乎是由 VB Web Service 双重编码的

> ID：15476151
> 
> 赞同：0
> 
> 时间：2013-03-18T11:50:55.107
> 
> 标签：vb.net, json, web-services, parsing

在 VB.NET 中工作。这是我的 Web 服务 - 它是页面背后的 aspx 代码上的一种方法，尽管它在 asmx 中的行为相同：

```
<WebService(Namespace:="http://mycompany/WebServices/")> _
<WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<ScriptService()> _
Partial Class AnAspxPageCodeBehind
    Inherits System.Web.UI.Page

    <WebMethod()> _
    <ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
    Public Shared Function GetSettings(param As String) As String
        Dim something As AClass = DoSomethingWith(param)

        Return New JavaScriptSerializer().Serialize(something)
    End Function 
```

我这样称呼它：

```
var dataToSend = '{"param":' + data + '}';

$.ajax({
    url: 'AnAspxCodeBehind.aspx/GetSettings',
    type: 'POST',
    data: dataToSend,
    contentType: "application/json; charset=utf-8",
    datatype: 'json',
    success: function (data) {
        var ret = JSON.parse(JSON.parse(data).d);
    }
}); 
```

注意到成功函数中的双 JSON.parse 调用了吗？当我之前（使用 C#）完成 Web 服务时，我只需要执行 var ret = JSON.parse(data.d)。

谁能告诉我这里发生了什么？

谢谢

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:56:41.257

WebService 框架会根据请求自动将结果序列化为 XML 或 JSON。您不应该手动进行 JSON 序列化，如果这样做，您最终会得到双重编码的结果。

只需从您的函数中返回一个常规字符串、对象或对象列表。框架将完成其余的工作。在您的情况下，声明 function `As AClass`。

您也不需要`JSON.parse`在客户端调用。jQuery 将为您解析它并将解析后的对象传递给`data`.

# c# - 在哪里可以找到 C# 中发生的所有系统异常的列表

> ID：15476152
> 
> 赞同：-2
> 
> 时间：2013-03-18T11:50:58.383
> 
> 标签：c#, exception

在哪里可以找到 C# 中发生的所有系统异常的列表？

我想清点 C# 中发生的所有系统异常，以便我有相应的自定义消息。请通过提及任何网站或任何东西来帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-10T23:46:01.443

使用@Dutts“Ctrl+Alt+E”解决方案，我使用 ShareX 的“文本捕获”工具解析了列表。我已经注释掉了我无法找到程序集引用的那些，但列出的一些仍然不推荐使用。要找出哪些可以使用，

```
class Program {
    static void Foo<T>() { }
    static void Main() {
        Foo<  System.AccessViolationExample  >();
        // The rest of the list, with "Foo<  " prefixing and "  >();" suffixing each line. This can be done using Notepad++ macro recorder or a google search for "alphabetizer flap tv"
    }
} 
```

我包含上面的代码只是为了包含包含所有引用的 pastebin 链接，而不是在这里列出它们。StackOverflow 需要代码来伴随 pastebin 链接。

[https://pastebin.com/t19HRbck](https://pastebin.com/t19HRbck)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:55:22.267

[Brad Abrams](http://blogs.msdn.com/b/brada/archive/2005/03/27/402801.aspx)的这份清单可能是您最接近的清单之一，但绝不是“全部”；我们必须在某处划清界限，也许要说出BCL 中的*所有内容，因为要解决**每个*例外情况将是一项艰巨的任务，即使不是不可能做到，也极不可能 - 而且，这样做仍然是徒劳的（为什么不为实际发生在您身上的异常添加持续消息？）。

请记住，WinForms、WPF、WCF 等等，每个都为晚宴带来了自己的一组例外。更不用说您可能正在使用的任何第三方东西，就像在前面的案例中一样，开发人员可以自由地遵循创建新异常以满足他们的需求的约定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:55:29.037

[MSDN](http://msdn.microsoft.com/en-us/library/c18k6c59.aspx)总是一个很好的起点。

请注意（如果我理解正确的话）您的目标不是很实际。虽然在特定的、有限的场景中为异常创建自定义消息当然是有意义的，但尝试在通用上下文中做这样的事情有点不寻常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T11:55:36.627

好吧，您可以查看 MSDN 中的[System.SystemException](http://msdn.microsoft.com/en-us/library/system.systemexception.aspx)（查看继承层次结构以获取大量异常）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T11:56:40.613

可以为每个特定目的自定义异常类，因此 C# 中没有完整的异常主列表。

在 Visual Studio 中，按 Ctrl+Alt+E，然后展开“公共语言运行时异常”以获取项目当前引用的异常列表。

# sql-server - 在 SQL Select 查询中包含公式

> ID：15476154
> 
> 赞同：-1
> 
> 时间：2013-03-18T11:51:05.050
> 
> 标签：sql-server, divide-by-zero

请帮我解决以下问题。

我需要在从表中获取数据时执行计算。请帮助我。此外，我也被零除。

```
ISNULL(Round(((col4) / (md.col1 + md.col2 + md.col3)), 2), 0) 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T11:53:16.307

这会成功的。除以 null 时不会出现 div/0 错误：

```
isnull(Round(((col4)/(NULLIF(md.col1+md.col2+md.col3,0)),2),0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:53:15.773

```
SELECT  CASE
        WHEN md.col1+md.col2+md.col3 = 0 THEN 0 ELSE
        ISNULL(Round(((col4)/(md.col1+md.col2+md.col3)),2),0)
        END AS [CALCULATION_RESULT] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T11:53:24.867

如何添加：

```
WHERE (md.col1 + md.col2 + md.col3) > 0 
```

要将您的查询过滤掉 Div0 记录？

# java - 如何自定义spring验证器？

> ID：15476159
> 
> 赞同：0
> 
> 时间：2013-03-18T11:51:31.073
> 
> 标签：java, spring, validation, spring-validator

我想编写具有复杂逻辑的自定义验证器，该逻辑取决于必须在启动时设置的某些属性。可以在spring配置文件中写入component-scan标签，但是如何在class或spring validater中设置其他属性作为无状态类？

```
public class CustomValidator implements Validator{
    private Map<String,Integer> parameters;

     public boolean supports(Class clazz) {
        return ObjectToValidate.class.equals(clazz);    
    }

    public void validate(Object obj, Errors e) {
        ObjectToValidate  object = (ObjectToValidate) obj;

        switch (parameters.get(object.getIntegerProperty())) {
            case 1:
                //validation algorithm 1;
                break;

            case 2:
                //validation algorithm 2;
                break;

            //etc.
        }
    }

    public void setParameters(Map<String,Integer> parameters){
        this.parameters = parameters;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:34:43.937

您应该在您的应用程序上下文中设置一个`org.springframework.validation.beanvalidation.LocalValidatorFactoryBean`.

它将为您的验证器注入`@Autowired`他们需要的每个属性。如果您不想使用自动装配，您应该将它们作为 bean 添加到您的应用程序上下文中。

看看这里：[http ://static.springsource.org/spring/docs/3.0.0.RC3/reference/html/ch05s07.html](http://static.springsource.org/spring/docs/3.0.0.RC3/reference/html/ch05s07.html)

一切都解释清楚了。

斯特凡诺

# module - 从选定文件列表中创建一个 zip 文件，并使压缩文件可在 Drupal 7 中下载

> ID：15476164
> 
> 赞同：0
> 
> 时间：2013-03-18T11:51:50.740
> 
> 标签：module, drupal-7, hook

我有一个图像文件列表。我需要以 zip 格式存档这些文件并使存档文件可下载。我见过**Drupal 7**`ArchiverZip`中定义的`system module`类。但我无法创建一个*zip*文件。我怎样才能在**Drupal 7**中做到这一点？这有什么或习惯吗？这个你能帮我吗。*****`hooks``modules`*****

 *******更新**

以下是代码：

```
$zip = new ArchiverZip('archive.zip');
foreach($_POST['img'] as $fid):
    $query = db_select('file_managed', 'fn')
            ->condition('fid', $fid)
            ->fields('fn', array('filename'));
    $result = $query->execute();

    foreach($result as $row) {
        if(file_exists('sites/default/files/'.$row->filename)){
            var_dump($zip->add($base_path.'sites/default/files/'.$row->filename));
        }
    }
 endforeach; 
```

这反映了以下错误

*例外*：无法在 ArchiverZip->__construct() 中打开 archive.zip（*basepath\modules\system\system.archiver.inc*的第 91 行）。请帮我解决一下这个 。.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:37:43.680

好吧，我错过了在创建类之前创建*archive.zip*文件，`ArchiverZip`因此之前的归档操作失败了。. 现在代码将如下所示：

```
$filename = 'archive.zip';
fopen($filename, 'w');
$zip = new ArchiverZip($filename);
foreach($_POST['img'] as $fid):
    $query = db_select('file_managed', 'fn')
            ->condition('fid', $fid)
            ->fields('fn', array('filename'));
    $result = $query->execute();

    foreach($result as $row) {
        if(file_exists('sites/default/files/'.$row->filename)){
            $zip->add($base_path.'sites/default/files/'.$row->filename);
        }
    }
 endforeach; 
```*****

# iphone - UITableViewCell 编辑缩进

> ID：15476165
> 
> 赞同：0
> 
> 时间：2013-03-18T11:51:50.863
> 
> 标签：iphone, ios, objective-c, uitableview

快速搜索后，我找不到问题的答案。

这个问题的答案：[如何重新格式化自定义 UITableViewCell](https://stackoverflow.com/questions/8405034/how-to-reformat-a-custom-uitableviewcell-during-editing-mode-to-accomodate-delet) 对我不起作用。

当我`tableView`进入编辑模式时，单元格`subViews`向右缩进并关闭单元格视图。请参阅随附的屏幕截图。

我需要减少缩进，以便它们移动但不要超出`cell`. 或者，当他们进入编辑模式时，单元格`subViews`会向左移动一点，以便它们保留在单元格内。

我`UITableViewCell`在`storyboard`. 我改变了缩进`Level`和`Width`故事板，但它们没有效果。

更新：在 NaCl 回答后添加了屏幕截图

正常模式： ![正常模式](../Images/5f3f713ada968b71dfe5e8dec4f99f92.png)

编辑模式： ![编辑模式](../Images/4c056e3903bd031ce8ea0460b335c09c.png)

从 NaCl 回答后改变 ![NaCl的回答后](../Images/df6eccb32d916a9ede1a2d1bd771376f.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T12:01:07.863

用这个

```
- (BOOL)tableView:(UITableView *)tableView shouldIndentWhileEditingRowAtIndexPath:(NSIndexPath *)indexPath
{
    return NO;  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:55:02.807

简单的方法是在您的自定义单元类中 - 在`layoutSubviews`方法中调整您的`cell.view.frame`

```
if (self.isEditing) {

//  then shift cell frame to left side
}
else {

// then shift cell frame to right side
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-25T19:02:54.413

您的问题可能源于您的视图层次结构。视图`contentView`会根据缩进的变化自动调整大小。您的所有视图都应该是`contentView`解决此问题的子视图。

# django - 文本区域中的颜色值

> ID：15476167
> 
> 赞同：0
> 
> 时间：2013-03-18T11:51:52.343
> 
> 标签：django, jquery, django-templates

我想用从 django 应用程序中的 Ajax 请求获得的列表中的值填充文本区域。这是返回的列表

```
{"listforeign": ["t", "t", "t", "g", "g", "g", "o"]} 
```

这是它所在的文本区域。

```
<textarea rows="10" name="BaseP" id="id_BaseP" placeholder="Paste text here ..."
 cols="40" class="textarea"> 
```

问题是

1.  将 listforeign 中的值附加到文本区域。

2.  元素“o”应该是红色的

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:53:23.160

元素中的所有文本`textarea`都将以相同的颜色、字体等呈现。您不能以不同的方式设置字符或单词等的样式。

作为替代方案，请尝试使用`contentEditable`DIV 并`o`使用定义的文本颜色在 span 内部提供服务。

文档：[https ://developer.mozilla.org/en-US/docs/HTML/Content_Editable](https://developer.mozilla.org/en-US/docs/HTML/Content_Editable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T11:54:03.047

**问题1：**

要将值附加到文本区域，请使用`.val()`jQuery 中的 -function。

来自[jQuery 中 textarea 的设置值](https://stackoverflow.com/questions/415602/set-value-of-textarea-in-jquery)：

```
$("textarea#id_BaseP").val(json); 
```

要解析您拥有的 JSON，请使用 JavaScript 的 JSON 解析器。来自[http://www.json.org/js.html](http://www.json.org/js.html)：

```
var myObject = JSON.parse(myJSONtext) 
```

创建的对象将 JSON 数据作为其字段。

# android - Android 库项目 - 调用 context.getResources().openRawResource() 时出错

> ID：15476169
> 
> 赞同：2
> 
> 时间：2013-03-18T11:51:57.310
> 
> 标签：android, android-resources, library-project

我正在开发一个 android 库项目，它应该从其原始资源中的 xml 文件中读取（我们称之为 xml_file_name.myextension）。

我所做的基本上是创建一个包含这些文件夹的库项目的 jar 文件：

*   源代码
*   创
*   库
*   资源/原始

并将其作为测试应用程序中的库引用。这是我用来（在库项目中）获取 xml 文件的代码：

```
int xml_res_id = -1;

for (Field f : R.raw.class.getFields()) {

  System.out.println("Raw resource found: " + f.getName());
  if (f.getName().equalsIgnoreCase("xml_file_name"))
    xml_res_id = f.getInt(null);

}

if(xml_res_id != -1){
  System.out.println("xml_file_id: " + xml_res_id);
  InputStream is = context.getResources().openRawResource(xml_res_id);
  // Decode xml file with SAXParser..
} 
```

（我有应用程序上下文，因为应用程序将其显式传递给库项目。）

发生的情况是，当我启动测试应用程序（并调用读取 xml 文件的方法）时，我收到此错误：

![安卓控制台错误](../Images/6cdb6400d5514dfa2ec8418fa284485f.png)

看来xml文件实际上是在正确的文件夹中，因为：

1）for循环实际上打印“找到原始资源：xml_file_name.myextension”和“xml_file_id：2130968576”

2）如果我在应用程序的res/raw文件夹中放了一个名为“xml_file_name.myextension”的文件，它不会编译，并且错误是：“Error generate final archive: Found duplicate file for APK: res/raw/xml_file_name .myextension”。这基本上证明了该文件是从库项目中正确“导入”的。

请注意：我也尝试过这种其他方式

```
InputStream is = context.getResources().openRawResource(R.raw.xml_file_name); 
```

得到同样的错误。

老实说，我不明白可能是什么问题..我做错了什么？

* * *

## 编辑：

对于任何对此问题感兴趣的人：我终于意识到这是不可能的，主要是因为当我尝试通过 context.anymethod 获取资源时，我指的是应用程序的 R 文件，所以我无法给出从中获取的资源 ID我的库项目的 R 文件。

它将编译，因为库项目 jar 文件包含资源（R.raw.xml_file），但对 context.something 的调用将始终给出 null 作为结果，因为它引用了没有那个特定的 app R 文件里面的资源。

我最后不得不把我的 xml 文件放在应用程序的 res/raw 文件夹中，并以这种方式访问​​ xml_file 原始资源：

```
int xml_id = context.getResources().getIdentifier("xml_file_name", "raw", context.getPackageName());

// Getting input stream from xml file
InputStream is = context.getResources().openRawResource(xml_id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T15:40:44.740

我实际上已经成功地做到了 - 库对象应该在应用程序上下文中。但是，它仅适用于`Activity`我发现的其他类型。使用带有 a 的相同库`FragmentActivity`失败，带有`NoClassDefFoundError`.

**编辑******

它可以在与库相同的根命名空间中与 FragmentActivity 一起使用。我正在从不同的根名称空间访问。

**结束编辑******

我有一个引用 xml 文件的库项目：

```
InputStream is = context.getResources().openRawResource(R.raw.application_table_defs); 
```

当我调用执行上一行的库方法时，我必须传入一个上下文：

```
Context context = this.getContext(); 
```

关键是完全限定注入的`getResource`to `context.getResources()...`。

# php - Linkedin 连接电子邮件地址

> ID：15476170
> 
> 赞同：-2
> 
> 时间：2013-03-18T11:51:57.973
> 
> 标签：php, linkedin

我想通过使用 PHP 的linkedin 连接 api 获取连接中的用户的电子邮件地址。

连接 API 是否支持连接的电子邮件地址？如果是，请告诉我如何。

我使用的 api 在[https://developer.linkedin.com/documents/connections-api](https://developer.linkedin.com/documents/connections-api)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:55:39.507

从 API 文档（您的链接）：

> 对于 1 度连接，您只能检索具有 r_basicprofile 成员权限的个人资料字段

这意味着您无法获取电子邮件地址。

# cordova - 黑莓应用程序，使用 phonegap/cordova 看起来不对

> ID：15476171
> 
> 赞同：1
> 
> 时间：2013-03-18T11:52:06.473
> 
> 标签：cordova, blackberry

我正在使用 phonegap/cordova 创建一个黑莓应用程序。

我正在使用最新版本的 phonegap/cordova ，并尝试为黑莓编译示例代码。

在模拟器中一切看起来都很好：

![在此处输入图像描述](../Images/18ccb99c2846fdf9c6b7ec8410d0f104.png)

但是在设备中，这是我得到的：

![在此处输入图像描述](../Images/98f104cbd55f3ac9263e67e80b043b97.png)

html页面非常错位..知道为什么以及如何解决它吗？

# z3 - Z3 不会对手工制作的数据类型进行大小写拆分

> ID：15476173
> 
> 赞同：3
> 
> 时间：2013-03-18T11:52:11.597
> 
> 标签：z3, theorem-proving

我已经定义了自己的布尔值，称为`boolean`SMT2，以及`boolean_and`它们的 AND 函数。我的猜想是 AND 是可交换的：

```
(declare-sort boolean)
(declare-const sk_x boolean)
(declare-const sk_y boolean)
(declare-const boolean_false boolean)
(declare-const boolean_true boolean)
(declare-fun boolean_and (boolean boolean) boolean)

;; axiomatize booleans: false /= true and every bool is true or false
(assert (forall ((x boolean)) (or (= x boolean_false)
                                  (= x boolean_true))))

(assert (not (= boolean_false boolean_true)))

;; definition of AND
(assert (forall ((a boolean)) (= (boolean_and boolean_false a) boolean_false)))
(assert (forall ((a boolean)) (= (boolean_and boolean_true a) a)))

;; try to prove that AND is commutative
(assert (not (= (boolean_and sk_x sk_y)
                (boolean_and sk_y sk_x))))

(check-sat) 
```

然而，z3 在一段时间后报告了这个问题的未知数，尽管我认为它应该能够对 skolemised 变量`sk_x`和`sk_y`.

奇怪的是，如果我删除我的布尔公理化并将其替换为 `declare-datatypes`，z3 将报告`unsat`：

```
(declare-datatypes () ((boolean (boolean_true) (boolean_false))))

(declare-const sk_x boolean)
(declare-const sk_y boolean)
(declare-fun boolean_and (boolean boolean) boolean)

(assert (forall ((a boolean)) (= (boolean_and boolean_false a) boolean_false)))
(assert (forall ((a boolean)) (= (boolean_and boolean_true a) a)))

(assert (not (= (boolean_and sk_x sk_y)
                (boolean_and sk_y sk_x))))

(check-sat) 
```

我究竟做错了什么？如何使用我的公理化让 z3 进行案例拆分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:32:41.753

你没有做错任何事。官方版本（v4.3.1）可能会因包含基数约束的问题而失败，例如

```
(assert (forall ((x boolean)) (or (= x boolean_false)
                                  (= x boolean_true)))) 
```

这个约束断言未解释的排序`boolean`最多有两个元素。我解决了这个问题。该修复程序已在`unstable`分支中可用。 [以下](http://z3.codeplex.com/wikipage?title=Building%20the%20unstable%20%28working-in-progress%29%20branch&referringTitle=Documentation)是有关如何编译`unstable`分支的一些说明。明天，[夜间版本](http://research.microsoft.com/en-us/um/people/leonardo/blog/2013/02/15/precompiled.html)也将包含此修复程序。

# authentication - 在本地主机上的 Lotus Notes 中进行身份验证

> ID：15476177
> 
> 赞同：0
> 
> 时间：2013-03-18T11:52:35.933
> 
> 标签：authentication, localhost, lotus-notes

这听起来可能有点复杂，但由于我经常在 Lotus Notes 中处理我的本地数据库，我遇到了问题，我无法进行身份验证。所以我总是在我的数据库上匿名工作。

问题是，我无法测试所有功能，因为为此我需要一个有效的 Notesname。

如何在 localhost 上进行身份验证以使用我的姓名/帐户而不是匿名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:57:03.837

您不能使用本地 HTTP 预览验证 XPages/web 应用程序。您需要安装一个本地服务器来执行此操作（这对于 XPages 开发来说无论如何都是一件好事）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:17:59.080

尝试使用完全限定的域名连接到您的机器，例如 ^ [http://mymachine.mydomain.com](http://mymachine.mydomain.com)而不是 localhost

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T12:47:23.347

您可以将自己添加到本地地址簿。并将其作为管理器或任何您想要的添加到数据库安全中。这将帮助您使用 HTTP 登录本地数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-31T13:52:22.017

只需在本地 NAB (names.nsf) 中创建一个个人文档，并添加带有密码的 HTTPpassword 字段（使用`@password("mypassword")`公式对其进行哈希处理）作为文本。

确保个人文档包含全名字段，您可以在其中放置您的别名作为测试列表。但 Notes 将使用第一个字段条目作为您的姓名。

并记住以规范方式设置第一个条目 ( `cn=user/ou=organization/o=domain`)

现在您已准备好在 ACL 和名称的（嵌套）组中使用此名称。

我建议使用 hosts 文件将 localhost 与您的站点域重新映射。

享受！

（PS：你需要在你的数据库的ACL中添加匿名条目，并将其设置为编辑器访问级别。用浏览器打开应用程序后，使用url命令“&login”强制Notes对你进行身份验证）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-24T19:35:42.650

我也想这样做，我想起了 searchdomino.com 的提示，海报是 Shawn Dezego [http://searchdomino.techtarget.com/tip/Testing-Authentication-Authorization-in-a-Web-App-Locally -没有运行多米诺服务器](http://searchdomino.techtarget.com/tip/Testing-Authentication-Authorization-in-a-Web-App-Locally-WIthout-Running-a-Domino-Server)

这是要点：

> 只需在本地通讯录中创建任何组，并将您的姓名添加到适当的组、角色等。然后转到您的域公共地址簿（Domino 目录），复制您的个人文档并将其粘贴到本地 NAB 中。而已。

这与相邻评论者提供的基本提示相同。但是，我认为这可能不适用于 Xpages 应用程序，所以无论如何我都在加载本地服务器。

# java - 为什么内部类 TreeMap.Entry 通用的？

> ID：15476178
> 
> 赞同：2
> 
> 时间：2013-03-18T11:52:47.747
> 
> 标签：java, generics, collections, treemap

为什么会这样？

```
static final class Entry<K,V> implements Map.Entry<K,V> 
```

为什么不喜欢：

```
 static final class Entry implements Map.Entry<K,V> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:03:04.883

> 但是Entry 类已经从顶级TreeMap 中知道类型K 和V。而且它仍然可以安全地输入。看起来 Entry 知道 TreeMap K 和 V，但是创建了自己的参数类型

事实上，它没有：

```
public class Main<T> {
    static final class Entry {
        T t;           // ERROR: Cannot make a static reference to the non-static type T            
        void f(T t) {} // ERROR: Cannot make a static reference to the non-static type T
    }
} 
```

另一方面，以下编译没有错误：

```
public class Main<T> {
    static final class Entry<T> {
        T t;
        void f(T t) {}
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T12:08:28.570

嗯，理解Entry为什么不能使用外层map参数的关键在于`static`关键字，用来声明它。

K,V 的实际类型只知道外部 Map 的*实例*，而 Entry 只知道 Map*类*。所以 Entry 必须是泛型类型，有自己的泛型参数。别介意它们在外部类（映射）中被命名为 K,V，它们标识不同的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:15:04.797

```
static final class Entry implements Map.Entry<K,V> 
```

这不是 Java 中的有效语句，因为 Entry 接口是参数化的，并且不支持从周围元素自动推断参数化类型。Java 7 在这个方向上迈出了正确的一步，引入了菱形运算符。但是，我们需要等到 JLS 定义它才能从接口本身推断类型。

# php - 带有未转义通配符“%”（百分比）或“_”（下划线）的转义字符串的 mysql LIKE 语句是否易受攻击？

> ID：15476185
> 
> 赞同：5
> 
> 时间：2013-03-18T11:53:10.110
> 
> 标签：php, mysql, escaping, wildcard, sql-like

假设我们有以下代码（用于某种搜索或类似的）：

```
$stmt = $pdo->prepare("SELECT * FROM users WHERE username LIKE ?");
$stmt->execute(array('%' . $username . '%')); 
```

提供的用户名已正确转义，但字符`%`（= 0 或更多任意字符）和`_`（= 正好 1 任意字符）被 MySQL 解释为通配符。

我了解用户可以输入`%`或`_`进行搜索，如果我希望搜索功能正常工作，我应该将其转义。（在喜欢`set_pt`并获得`setopt`结果的情况下）。

但我的问题是：有人可以利用这个吗？如果是，那么有人如何利用它以及如何防止它？下面的功能就够了吗？

```
function escape_like_string($str) {
  return str_replace(Array('%', '_'), Array('\%', '\_'), $str);
} 
```

我能想到的一种可能性是输入 吨`%`，因此服务器需要分配大量内存。这行得通吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:17:13.520

> 有人可以利用这个吗？

对于 SQL 注入？不。

对于类似复活节彩蛋的行为？大概。在这种情况下，如果您不想让您的用户在此搜索中使用通配符，您可以做 2 件事：

1.  正确的转义通配符（和转义字符），

    ```
    str_replace(array('\\', '%', '_'), array('\\\\', '\\%', '\\_'), $str);
    // or:
    str_replace(array('|', '%', '_'), array('||', '|%', '|_'), $str);
    // with SELECT * FROM users WHERE username LIKE ? ESCAPE '|' 
    ```

2.  或用于`LOCATE(substr, str) > 0`查找完全匹配。

# c - 理解 C 中的字母或数字功能检查

> ID：15476197
> 
> 赞同：0
> 
> 时间：2013-03-18T11:53:36.363
> 
> 标签：c, character

这些功能检查什么？

据我了解，他们应该检查一个单词是否包含非字母数字字符。我不明白它是怎么做到的。

### 我的理解：

*   第一个检查是长度 - 这没关系。
*   第二个检查是字符是否是字母：
*   `IsLetter(symbol[0]))`评估为 FALSE。这在逻辑上是否定的。
*   第三个功能同上。

没看懂的是第四个 `IsLetterOrDigit(*symbol))`：

它如何检查单词是否包含非字母数字字符？

编码：

```
int IsSymbolValid(char* symbol)
{
    int len = strlen(symbol);

    if ((len == 0) || (len > MAX_SYMBOL_SIZE))
    {
        strcpy(LastParsingError, "Invalid symbol length");
        return 0;
    }

    if (!IsLetter(symbol[0]))
    {
        strcpy(LastParsingError, "Symbol name has to start with letter");
        return 0;
    }

    while (*symbol != 0)
    {
        if (IsLetterOrDigit(*symbol))
        {
            strcpy(LastParsingError, "Symbol name can contain only letters and digits");
            return 0;
        }
        ++symbol;
    }

    return 1;
}

int IsLetter(char ch)
{
    return (((ch >= 'a') && (ch <= 'z')) || ((ch >= 'A') && (ch <= 'Z')));
}

int IsDigit(char ch)
{
    return ((ch >= '0') && (ch <= '9'));
}

int IsLetterOrDigit(char ch)
{
    return (IsLetter(ch) && IsDigit(ch));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T11:56:42.483

你的困惑来自于这个函数确实是错误的：

```
int IsLetterOrDigit(char ch)
{
    return (IsLetter(ch) && IsDigit(ch));
} 
```

`&&`显示逻辑和，而字符不能既是数字又是字母。它应该使用`||`（逻辑或）：

```
int IsLetterOrDigit(char ch)
{
    return (IsLetter(ch) || IsDigit(ch));
} 
```

* * *

当我们这样做时，似乎在使用它的地方也有一个错误：

```
if (IsLetterOrDigit(*symbol))
{
    strcpy(LastParsingError, "Symbol name can contain only letters and digits");
    return 0;
} 
```

**如果字符不是**字母或数字，您会想要错误。因此（注意`!`）：

```
if (!IsLetterOrDigit(*symbol))
{
    strcpy(LastParsingError, "Symbol name can contain only letters and digits");
    return 0;
} 
```

# wpf - WPF饼图没有切片

> ID：15476203
> 
> 赞同：1
> 
> 时间：2013-03-18T11:53:51.317
> 
> 标签：wpf, xaml, charts, wpf-controls

我正在使用`PieChart`控件将数据库中的两个值显示为（USED 和 AVAILABLE）。但是我得到了没有切片的输出，如下图所示， ![内存](../Images/a9b3ead32ec0afd7fe013adc2a848265.png)

如何分割饼图？

我的 KeyValue 对是 type 。我正在从数据源获取我的 KeyValuePair 的值，并且我正在使用 Linq to sql 查询进行检索。

我的饼图的 XAML：

```
 <Window.Resources>
  <CollectionViewSource x:Key="ramView" Source="{Binding Path=UsageRAMs, Source={StaticResource serverView}}"/>
 </Window.Resources>

 <dvc:Chart x:Name="Ram" Background="White" Foreground="Black" Margin="950,0,92,485" Grid.Column="1" Grid.Row="1">
 <dvc:Chart.Series>
 <dvc:PieSeries ItemsSource="{Binding}"
 DependentValuePath="Available" IndependentValuePath="Used" >                               
 </dvc:PieSeries>
 </dvc:Chart.Series>
</dvc:Chart> 
```

后面的代码

```
 private CollectionViewSource serversUsageRAMsViewSource; 
 private void Window_Loaded(object sender, RoutedEventArgs e)
    {
    var ramList = (from c in db.UsageRAMs
                  orderby c.UsageRamID descending, c.Used,c.Available,c.Total
                  select c).Take(1);
    this.serversUsageRAMsViewSource  = (CollectionViewSource)this.FindResource("ramView");
    serversUsageRAMsViewSource.Source = ramList;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:03:05.047

那么我想你应该有两个系列。

```
<dvc:Chart ...>
     <dvc:Chart.Series>
          <dvc:PieSeries ItemsSource="{Binding}" DependentValuePath="Available" />
          <dvc:PieSeries ItemsSource="{Binding}" DependentValuePath="Used" />
     </dvc:Chart.Series>
</dvc:Chart> 
```

免责声明 - 我没有测试它，但这就是我会尝试的。

# build - 我如何在詹金斯中自动化构建部署？

> ID：15476206
> 
> 赞同：8
> 
> 时间：2013-03-18T11:53:56.177
> 
> 标签：build, jenkins, continuous-integration, release-management

我们正在使用 jenkins 进行 CI。我们得到深夜构建。一旦我们收到邮件或通知，有什么方法可以自动化构建部署？任何建议，将不胜感激..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:27:49.657

在 Jenkins 上部署构建的一种机制是使用工件将最新的二进制文件放置在已知位置，然后启动一个使用（受私钥保护的）ssh 的新作业（仅在编译/测试阶段成功时）或 scp 将工件复制到测试/生产机器，然后执行安装。

我们对我们所做的一些自动化测试使用类似的机制。棘手的部分是让 shell 命令来处理 ssh 密钥，因此我们执行以下操作：

```
eval `ssh-agent -s`
ssh-add ~/.ssh/your_private_key_here 
```

只要该私钥在 Jenkins 服务器上并且公钥在您尝试推送到的服务器上，您就可以在脚本的其余部分中使用`ssh`和`scp`命令在相关服务器上执行功能。

如果您更喜欢完全从目标服务器端运行该过程，您可以创建一个在服务器上运行的小脚本，用于检查 Jenkins 服务器构建的工件目录中的新文件。多亏了`latest`路径，您不必知道内部版本号即可执行此操作。要找到具体路径，您可以登录到您的 Jenkins 服务器（一旦您保存了至少一个工件），然后找到您正在使用的项目并查看*Last Success Artifacts*，这将是最后一次成功构建的 URL的文物。这些 URL 保持不变，并且始终指向最近的成功构建，因此您不必担心它们会发生变化，除非项目名称或服务器名称发生变化。

**注意**：这里有安全漏洞，如果您这样做不是为了测试部署，您可以驾驶卡车通过这些漏洞。在第一种机制的情况下，您的构建服务器有一个`ssh`密钥，可以访问（可能具有破坏性）目标。在第二种机制的情况下，您相信 Jenkins 服务器只会提供对您有益的二进制文件。但是，对于测试环境，推送到阶段等，这些技术将运作良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T14:57:00.623

这些是我知道的方式：

*   使用脚本：

在 Jenkins 配置中，您可以在执行 maven 目标后执行 windows/shell 命令。在我的例子中，我在 Linux 上有一个 Glassfish，并通过 ssh 我为部署执行 asadmin 参数。我已经在服务器中安装了一个实例，我遵循的过程是：停止实例，取消部署应用程序，部署应用程序，启动实例（命令）。

*   使用 Maven 部署插件：

这个插件需要一个 war/ear 文件，并在构建结束时将其部署到正在运行的远程应用程序服务器。当前支持的容器列表包括：

Tomcat 4.x/5.x/6.x/7.x JBoss 3.x/4.x Glassfish 2.x/3.x

[https://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Deploy+Plugin)

*   与货物：

Deploy Plugin 基于此。您必须编辑您的 pom.xml 并使用 maven 执行部署的目标。

[http://cargo.codehaus.org/](http://cargo.codehaus.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-11T05:40:11.640

在 tomcat 中，使用 jenkins 和 tomcat 进行配置：

*   在您的服务器上安装并下载 jenkins 并启动服务器转到 jenkins 门户，然后使用“New Item”创建项目并选择 pom.xml 并创建 maven 项目。
*   现在转到您的项目并单击配置并选择“限制此项目可以运行的位置”并在您的关卡表达式中添加主控。
*   选择 git 上的“源代码管理”clisck 并配置您的 git 存储库和凭据和分支名称。
*   选择“构建”添加根 pom：pom.xml 和目标和选项：干净安装 -DskipTests
*   选择“构建后操作”并选择“将战争/耳朵部署到容器”
*   WAR/EAR 文件：target/test.war
*   上下文路径：测试
*   容器选择tomcat并添加Credentials
*   Tomcat URL：示例：[http://localhost:8080/](http://localhost:8080/)

更新 'apache-tomcat-8.5.5\webapps\manager\META-INF\context.xlm 文件。取消注释值标签。并重新启动服务器

context.xml 文件

```
Before : 

<Context antiResourceLocking="false" privileged="true">
<Valve className="org.apache.catalina.valves.RemoteAddrValve"
     allow="192\.168\.0\.9|127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1" />
</Context>

After change :

<Context antiResourceLocking="false" privileged="true" >
</Context>

for auto deployment: go to 'apache-tomcat-8.5.5\conf\context.xml' and add antiResourceLocking="true" in 'Context' tag 
```

# iphone - ios 应用程序因 XMPPMessageArchiving 而崩溃

> ID：15476209
> 
> 赞同：1
> 
> 时间：2013-03-18T11:54:13.263
> 
> 标签：iphone, ios, ipad, xmppframework

我在我的应用程序中添加了 XMPP 聊天的消息存档。

之后，当我在 XMPP 聊天中发送/接收消息时，我的应用程序崩溃了。仅当我在未连接到笔记本电脑（xcode）的设备上运行它时，应用程序才会崩溃。当我在 xcode 中调试应用程序时，没有崩溃。

我将所有必要的 XMPP 类和目录连接到我的项目。

我设置了 XMPPMessageArchivingCoreDataStorage 和 XMPPMessageArchiving 实例：

```
xmppMessageArchivingStorage = [XMPPMessageArchivingCoreDataStorage sharedInstance];

xmppMessageArchivingModule = [[XMPPMessageArchiving alloc] initWithMessageArchivingStorage:xmppMessageArchivingStorage];
[xmppMessageArchivingModule setClientSideMessageArchivingOnly:YES]; 
```

我激活 XMPPMessageArchiving 实例：

```
[xmppMessageArchivingModule activate:xmppStream]; 
```

并添加委托：

```
[xmppMessageArchivingModule addDelegate:self delegateQueue:dispatch_get_main_queue()]; 
```

另外，我这样做：

```
[xmppMessageArchivingModule removeDelegate:self];
[xmppMessageArchivingModule deactivate];
xmppMessageArchivingModule = nil;
xmppMessageArchivingStorage = nil; 
```

崩溃的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:00:09.130

解决：

添加编译标志

> -fobjc-弧

到 XMPPMessageArchivingCoreDataStorage.m 和 XMPPMessageArchiving.m

如何添加标志在这里[如何在项目之间添加 ARC](https://stackoverflow.com/questions/15476067/how-to-add-arc-in-between-of-project)

# doctrine-orm - Doctrine ORM Entity 类名正在返回一个代理类名

> ID：15476210
> 
> 赞同：2
> 
> 时间：2013-03-18T11:54:14.920
> 
> 标签：doctrine-orm, proxy-classes

我目前正在检索我的实体的类名以将更改保存到日志中。这发生在侦听器中：

在我的服务层：

```
$product = $line->getProduct();

$product->setAvailability($product->getAvailability() - $line->getAmount());
$em->persist($product); 
```

问题是通过在侦听器中执行以下操作：

```
$className = join('', array_slice(explode('\\', get_class($entity)), -1));
$modification->setEntidad($className); 
```

设置到修改中的`$className`是`miomioBundleEntityProductoProxy`。

如何获取实体的真实类名，而不是代理类名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:28:54.537

在调用代理时收到代理名称这一事实`get_class`是很正常的，因为代理是让 ORM 和延迟加载关联工作的必要概念。

您可以使用以下 API 获取原始类名：

```
$realClassName = $entityManager->getClassMetadata(get_class($object))->getName(); 
```

然后您可以应用自己的转换：

```
$normalizedClassName = join('', array_slice(explode('\\', $realClassName), -1));

$modificacion->setEntidad($normalizedClassName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-22T23:11:44.323

As the proxy class always extends from the real entity class:

```
class <proxyShortClassName> extends \<className> implements \<baseProxyInterface> 
```

then, you can get it with [`class_parents()`](http://php.net/manual/en/function.class-parents.php) function:

```
if ($entity instanceof \Doctrine\Common\Proxy\Proxy) {
    $class = current(class_parents($entity)); // get real class
} 
```

Especially useful when you don't have access to `EntityManager` instance.

# c# - 返回语句中的或运算符

> ID：15476214
> 
> 赞同：0
> 
> 时间：2013-03-18T11:54:19.217
> 
> 标签：c#

我偶然发现了这段代码，到目前为止我真的不明白。我清楚地知道 or 运算符`||`在如下代码中的作用：

```
bool a = true;
bool b = false;
if(a || b)
{
   //does something, if one of a/b is true
} 
```

但这是一个结构，我不明白：

```
public bool c
{
   get
   {
      return a || b; //?
   }
   set
   {
      c = value;
   }
} 
```

这个 getter 会用那个 return 语句返回什么，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T11:56:54.107

这将返回结果值：

```
a || b 
```

这将是一个布尔值。（请注意，函数签名表明它返回一个`bool`。）这与您的其他示例本质上没有什么不同：

```
if(a || b) 
```

一个`if`语句需要一些计算结果为布尔值的东西，这`||`两个值都是。

您通常可以将`return`关键字视为与赋值语句具有相同的[运算符优先级](http://msdn.microsoft.com/en-us/library/6a71f45d.aspx)（它为堆栈上函数的返回路径“分配”一个值）。所以你可以在这里想象一组隐含的括号：

```
return (a || b); 
```

首先评估`a || b`，然后调用`return`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:56:16.330

如果 a OR b 为真，它将返回真

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T11:56:38.573

很简单，它会在 a 或 b 为真（或两者都为真）时返回真。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T11:57:20.957

它等于：

```
public bool c
{
   get
   {
      if(a || b)
         return true;
      else
         return false;
   }
   set
   {
      c = value;
   }
} 
```

# excel - Excel VBA无法使用变量保存日期值保存文件名

> ID：15476215
> 
> 赞同：0
> 
> 时间：2013-03-18T11:54:19.420
> 
> 标签：excel, file, vba

我有一些代码将当前工作表复制并粘贴到一个空白的新工作簿中，然后根据某些单元格的值（存储在变量中）保存它。

具体来说，这些是站点、客户和访问日期。

这一切都适用于站点和客户端，但是当我在要保存的文件名中包含日期变量时，它会引发错误：运行时错误 76 - 找不到路径。

我将不胜感激任何帮助/建议。

```
Sub Pastefile()

Dim client As String
Dim site As String
Dim visitdate As String
client = Range("B3").Value
site = Range("B23").Value
screeningdate = Range("B7").Value

Dim SrceFile
Dim DestFile

SrceFile = "C:\2013 Recieved Schedules\schedule template.xlsx"
DestFile = "C:\2013 Recieved Schedules" & "\" & client & " " & site & " " & visitdate  & ".xlsx"

FileCopy SrceFile, DestFile

ActiveWindow.SmallScroll Down:=-12
Range("A1:I37").Select
Selection.Copy
ActiveWindow.SmallScroll Down:=-30
Workbooks.Open Filename:= _
    "C:\Schedules\2013 Recieved Schedules" & "\" & client & " " & site & " " &     visitdate & ".xlsx", UpdateLinks:= _
0
Range("A1:I37").PasteSpecial Paste:=xlPasteValues
Range("C6").Select
Application.CutCopyMode = False
ActiveWorkbook.Save
ActiveWindow.Close

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:08:51.430

在文件名中使用日期时，您永远不想依赖日期的默认文本表示，因为这取决于当前的语言环境。

您应该首先将日期存储为日期，并以安全的方式明确格式化文件名：

```
Dim visitdate As Date
visitdate = Range("b7").Value

dim visitdate_text as string
visitdate_text = Format$(visitdate, "yyyy\-mm\-dd") 
```

您还可以考虑`\`从其他值中删除任何特殊字符，例如`client`and `site`。否则问题可能会再次出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:20:11.027

这是我对代码重写的建议：

```
Sub Pastefile()

Dim client As String
Dim site As String
Dim visitdate As String
client = Range("B3").Value
site = Range("B23").Value
visitdate = Range("B7").Value

Dim SrceFile
Dim DestFile

If IsDate(visitdate) Then

SrceFile = "C:\2013 Received Schedules\schedule template.xlsx"
DestFile = "C:\2013 Received Schedules" & "\" & Trim(client) & " " & Trim(site) & " " & Str(Format(Now(), "yyyymmdd")) & ".xlsx"

If Trim(Dir("C:\2013 Received Schedules\schedule template.xlsx")) <> "" Then
FileCopy SrceFile, DestFile
Else
MsgBox (SrceFile & " is not available in the folder")
GoTo EndCode
End If

Range("A1:I37").Select
Selection.Copy

Workbooks.Open Filename:= _
"C:\Schedules\2013 Received Schedules" & "\" & client & " " & site & " " & visitdate & ".xlsx", UpdateLinks:= 0
Range("A1:I37").PasteSpecial Paste:=xlPasteValues
Range("C6").Select
Application.CutCopyMode = False
ActiveWorkbook.Save
ActiveWindow.Close

Else
MsgBox ("Please input the correct date in cell B7")
ActiveSheet.Range("B7").Activate
End If
EndCode:
End Sub 
```

# xml - XML 解析错误：未定义实体 .. 本地化 Mozilla 插件时

> ID：15476218
> 
> 赞同：0
> 
> 时间：2013-03-18T11:54:23.843
> 
> 标签：xml, localization, xml-parsing, firefox-addon

我开发了一个基于英语的插件，但对德语有本地化支持
当在德语 Firefox 中使用时，它可以在英语中安装并正常工作（语言环境已更改等）
我收到错误
任何想法？

这是从插件管理器页面单击“首选项”时看到的错误..

```
XML Parsing Error: Not defined entity
Address: chrome://addon/content/options.xul
Line No. 5, Column 1: <prefwindow
^ 
```

chrome.manifest ..

```
locale addon en-US chrome/locale/en-US/
locale addon de chrome/locale/de/ 
```

选项.xul ..

```
<?xml version="1.0"?>  
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<!DOCTYPE addonDTD SYSTEM "chrome://addon/locale/options.dtd">  

<prefwindow
    id             = "addon-prefs"  
    title            = "&windowTitle.label;"
    xmlns            = "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
    onload         = "addon_Options.setButtons();">

<stringbundleset id = "stringbundleset">
    <stringbundle id =  "addon-options-string-bundle" src="chrome://addon/locale/options.properties"/>
</stringbundleset> 
```

**编辑**

options.dtd 的内容

```
<!ENTITY    windowTitle.label       "App Einstellungen">
<!ENTITY    showPreferences.label       "Einstellungen öffnen, wenn Save Text to File gestarte wird?">
<!ENTITY    fileName.label          "Dateiname">
<!ENTITY    pathToFile.label        "Verzeichnis, um die Dateien zu speichern">
<!ENTITY    changeDirectory.label       "Verzeichnis wechseln">
<!ENTITY    datestamp.label         "Datum zum Dateinamen hinzufügen?">
<!ENTITY    timestamp.label         "Zeit zum Dateinamen hinzufügen?">
<!ENTITY    datestampInLine.label       "Datum vor dem gesicherten Text einfügen?">
<!ENTITY    timestampInLine.label       "Zeit vor dem gesicherten Text einfügen?">
<!ENTITY    lineSeparator.label     "Eine Leerzeile vor dem gesicherten Text einfügen?">
<!ENTITY    currentURL.label        "Den aktuellen URL mit dem Text sichern?">
<!ENTITY    saveMode.label          "Wie soll der Text gesichert werden?">
<!ENTITY    createFile.label        "Neue Datei erzeugen">
<!ENTITY    appendFile.label        "An die existierede Datei anfügen"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:21:55.470

更改`<!DOCTYPE addonDTD`为`<!DOCTYPE prefwindow`

# paypal - Paypal 自适应支付跨境费用计算

> ID：15476219
> 
> 赞同：1
> 
> 时间：2013-03-18T11:54:30.653
> 
> 标签：paypal

如果使用自适应支付 API 进行链式支付，Paypal 如何计算适用于每个收款人的跨境费用？

我对此链接的场景 8 感兴趣[https://www.x.com/devzone/articles/adaptive-payment-fee-calculation-analysis](https://www.x.com/devzone/articles/adaptive-payment-fee-calculation-analysis)

就我而言，我想假设主要接收者位于美国，而发送者和第一个接收者位于英国。

Paypal 是仅从发送方向主要接收方收取 1% 的跨境费用，还是从主要接收方向接收方 1 收取 1% 的跨境费用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:54:15.063

将链式支付视为单独的交易。如果发件人和主要收款人在不同的国家，或者主要和次要收款人在不同的国家，PayPal 只会收取跨境费用。

不收取跨境费用：

发送方和主要接收方相同的国家 主要和次要接收方相同的国家

跨境收费：

发送者和主要接收者位于不同的国家和次要与主要国家相同的国家。向主要而非次要接收者收取跨境费用。

发件人和主要在同一个国家和次要不是。跨境费用仅向二级接收方收取

发送者、主要接收者和次要接收者位于不同的国家。跨境费用向主要和次要接收方收取。

# c# - 方法有一些无效的参数？

> ID：15476221
> 
> 赞同：6
> 
> 时间：2013-03-18T11:54:39.700
> 
> 标签：c#, winforms, web-services

我正在以`ArrayList`. 在我的方法的 Web 服务声明中是这样的：

```
[WebMethod]
public int SaveSelectedOffers(ArrayList offers, int selectedRows)
{

} 
```

在 Windows 窗体中，单击按钮，我的代码是：

```
private void offersAvailableSubmit_Click(object sender, EventArgs e)
{
    ArrayList options;
    options.Add("item 1");
    options.Add("item 2");
    options.Add("item 2");
    //In this line of code it is showing error that Argument 1: cannot convert from 'System.Collections.ArrayList' to 'object[]'
    int rowsAffected = serviceCaller.SaveSelectedOffers(options, rowCount); 
} 
```

1.  选项的数据类型是`ArrayList`并且在 Web 服务中我也使用`ArrayList`变量类型来保存这个值，那么为什么会出现这个错误呢？

2.  将参数发送到 Web 服务是正确的方法还是有其他方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T11:58:46.917

Web 服务不能传递复杂的类型，例如`ArrayList`，或者至少在没有一些配置的情况下不能传递，所以只需简化您的 Web 服务。将其更改为：

```
public int SaveSelectedOffers(object[] offers, int selectedRows) 
```

**正如您所看到的，这就是它的生成方式**，然后像这样调用它：

```
private void offersAvailableSubmit_Click(object sender, EventArgs e)
{
    object[] options = new object[3];
    options[0] = "item 1";
    options[1] = "item 2";
    options[2] = "item 2";

    int rowsAffected = serviceCaller.SaveSelectedOffers(options, rowCount); 
} 
```

* * *

的初始化的另一个选项`options`，如果你正在寻找更简洁的东西，将是这样的：

```
object[] options = new object[] { "item 1", "item 2", "item 3" }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T12:01:06.757

我建议你使用

```
[WebMethod]
public int SaveSelectedOffers(IList<string> offers, int selectedRows)
{

}

private void offersAvailableSubmit_Click(object sender, EventArgs e)
{
    IList<string> options = new List<string>();
    options.Add("item 1");
    options.Add("item 2");
    options.Add("item 2");

    int rowsAffected = serviceCaller.SaveSelectedOffers(options, rowCount); 
} 
```

编辑#1

迈克尔说得好：

> Web 服务不能传递像 ArrayList 这样的复杂类型，或者至少在没有一些配置的情况下不能传递，所以只需简化您的 Web 服务。- 迈克尔

编辑#2

使您的网络服务使用`System.Collections.Generic.List`

1.  右键单击服务引用中的服务
2.  配置服务参考
3.  在数据类型组中
4.  将集合类型更改为 System.Collections.Generic.List

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T12:12:06.593

忘记所有这些更改代码的废话。

如果您右键单击“服务引用”文件夹中的服务并从上下文菜单中选择“配置服务引用”，那么您可以指定客户端应将哪种类型用于集合。

在您的情况下，只需`System.Collections.ArrayList`从“集合类型”下拉列表中选择。

但是，您可以指定`System.Collections.Generic.List`并拥有强类型的通用列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T11:58:32.860

我会在您的 Web 方法定义中使用类型化列表或数组。不可能有混淆。数组列表不是强类型的，这意味着直到运行时才能知道内容。

```
[WebMethod]
public int SaveSelectedOffers(string[] offers, int selectedRows)
{

} 
```

# python - Bash 脚本未在 cron-Python 中运行

> ID：15476222
> 
> 赞同：-2
> 
> 时间：2013-03-18T11:54:44.410
> 
> 标签：python, linux, crontab

我有一个 bash 脚本，它正在调用另一个 python 脚本。

由于 python 全局变量，这没有在 cron 中运行。请在脚本下方找到。脚本旨在压缩日志并移动到 Amazon s3。当我们从终端运行脚本时，它将起作用。但是当从 cron 运行时，它会压缩内容然后**s3cmd**这是一个失败的 python 脚本。谁能帮我在cron级别设置python全局变量。

```
#!/bin/bash
cd /applications/java/tomcat-instance/foundation/logs/
sudo find /applications/java/tomcat-instance/foundation/logs/ -mtime +1 | xargs tar -czvPf tomcat_logs_`date +%Y%m%d`_`date +%H`.tar.gz
/usr/bin/python s3cmd put /applications/java/tomcat-instance/foundation/logs/tomcat_logs_`date +%Y%m%d`_`date +%H`.tar.gz s3://merck-ghh-logs/preview/deliver$
sudo find /applications/java/tomcat-instance/foundation/logs/ -mtime +7 -exec rm {} \; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T04:55:27.070

Cron Job 在 root 用户下运行。

我`sudo`下达了命令。我观察到某些命令何时不会运行。

1.  Cronjob 在 root 下运行。
2.  其中使用了 Sudo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:58:03.533

提供 s3cmd- 的完整路径：

```
 /usr/bin/python /path/to/s3cmd put .... 
```

# c# - WPF 绑定到祖先源

> ID：15476235
> 
> 赞同：0
> 
> 时间：2013-03-18T11:55:35.793
> 
> 标签：c#, .net, wpf, binding, tooltip

我正在尝试`ToolTip`使用悬停的图像显示 a ，但尺寸不同。

我试过这个：

```
<Image Source="c:\Pictures\Airplane.jpg" Width="50" Height="50">
    <Image.ToolTip>
        <Image Width="300" Height="300" 
               Source="{Binding Path=Source, RelativeSource={RelativeSource AncestorType=Image, AncestorLevel=1}}
    </Image.ToolTip>
</Image> 
```

以上在悬停时制作了更大的图像，但图像内容为空白，可能绑定不起作用。

几个小时后，我想我需要帮助......我错过了什么？

[我不想要像[这个答案](https://stackoverflow.com/questions/4564709/wpf-on-mouse-hover-on-a-particular-control-increase-its-size-and-overlap-on-th)这样的问题的其他解决方案，因为我只是想练习我的绑定技能，谢谢。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T11:58:17.547

好的，我开始工作了，我最初的想法是正确的：`RelativeSource`不会工作，因为工具提示不是可视化树的一部分。我认为`ElementName`会起作用，但似乎 WPF 创建了某种新的名称名称范围（不确定）。所以让它工作的唯一方法是`DataContext`在两个视觉树之间使用作为“代理”。您还可以使用具有适当信息的视图模型。

```
<Image x:Name="myImage" Source="c:\Pictures\Airplane.jpg" DataContext="{Binding RelativeSource={RelativeSource Self}}" Width="50" Height="50">
    <Image.ToolTip>
        <Image Width="300" Height="300" Source="{Binding Path=Source}"/>
    </Image.ToolTip>
</Image> 
```

![在此处输入图像描述](../Images/58b0490a5d6b143bf44d220d7e0b2a65.png)

# c# - 绑定到模型的 MVC 复选框列表

> ID：15476240
> 
> 赞同：1
> 
> 时间：2013-03-18T11:55:46.113
> 
> 标签：c#, asp.net-mvc, collections, checkbox, model-binding

我在将集合绑定到模型时遇到了一些问题。我按照[这个链接](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)创建了一个复选框列表。我不确定要提供多少代码，但我的观点有以下模型

```
Public class Model1{
     public string param1{get; set;}
     public string param2{get; set;}
}

Public class Model2{
     public string param1{get; set;}
     public string param2{get; set;}
}

Public class Model3: Model2{
     public bool chk {get; set;}
     public list<string> param{get; set;}
     public Model3()
     {
        param = new List<string>(){"one", "two", "three"};
     }
}

public class superModel{
        public Model1 first{get; set;}
        public IEnumerable<Model2> second{get; set;}
        public List<Model3> third{get; set;}
   } 
```

在我的控制器中，我将第三个参数定义为

```
third = AnEnumerableList.Select( e=> new Model3{chk=false, param1 = e.Param, param2 = e.Param1}).ToList(); 
```

而在我看来，我通过了持有我所有班级模特的超模。我创建一个这样的复选框：

```
for(int i=0; i<Model.third.Count; i++){
    @Html.CheckBoxFor(m => m.third[i].chk, new {onchange="test()"})
    @Html.HiddenFor(m => m.third[i].param)
    @Html.HiddenFor(m => m.third[i].param1)
    @Html.HiddenFor(m => m.third[i].param2) 
```

}

javascript看起来像

```
function test(){
   alert('@Model.third[0].chk')
} 
```

当我查看生成的源代码时，一切看起来都很好，但是无论复选框是否被选中，javascript 代码总是返回 false。并且当提交视图表单时，整个视图不显示。相反，我得到了一个带有第一个选中复选框名称的局部视图。当在这个集合中没有选择任何内容时，返回的视图提交好了。我尝试调试代码，但在此过程中没有任何中断。

我知道，这我可能没有足够地隔离这个问题，但这是我能做到的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:13:55.830

那是因为您正在查看**模型**值而**不是**复选框的当前值。您需要更改它，首先，将您的复选框声明更改为 pass `this`，如下所示：

```
@Html.CheckBoxFor(m => m.third[i].chk, new {onchange="test(this)"}) 
```

然后稍微改变你的测试功能，成为：

```
function test(item){
    alert(item.checked)
} 
```

# javascript - IE 7/8 Javascript 问题

> ID：15476244
> 
> 赞同：0
> 
> 时间：2013-03-18T11:56:01.893
> 
> 标签：javascript, internet-explorer

嗨，我希望你能帮助我

我在 IE 7/8 中使用坚如磐石的模板时遇到问题。请参阅模板[http://www.pixelsparadise.com/showcase_2013/#load=http://www.rocksolid.joomlatemplates.info](http://www.pixelsparadise.com/showcase_2013/#load=http://www.rocksolid.joomlatemplates.info)

这似乎是由标头中的 JavaScript 代码引起的。

我在 IE 调试器中收到的错误代码是

```
SCRIPT1014: Invalid character 

<script type="text/javascript">document.getElementById("sectors").addEventListener('change', function () {
    window.location = this.value;},false); ​&lt;/script> 
```

这是一段看似导致问题的代码。

基本上，该区域会阻止模板中使用的任何按钮工作。任何想法如何为 Internet Explorer 7/8 解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:57:59.433

在标记之前，您有一个额外的“不可见”字符（如果您将该代码复制到 Notepad++ 之类的东西中可以看到）`</script>`；只需删除`;`and之间的所有内容`</script>`，它应该可以解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:59:03.677

取出脚本标签闭包中的空间

```
​&lt;/script> 
```

改成

```
<script type="text/javascript">document.getElementById("sectors").addEventListener('change', function () {
    window.location = this.value;},false); </script> 
```

# ios - 默认系统项目的自定义背景

> ID：15476246
> 
> 赞同：0
> 
> 时间：2013-03-18T11:56:05.473
> 
> 标签：ios, uibarbuttonitem, uibarbuttonitemstyle

我想使用默认的栏按钮项目，如

```
UIBarButtonItem *editFavoritesButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:@selector(startEndEditing:)]; 
```

问题是我想改变这些按钮的背景但是

```
[editFavoritesButton setBackgroundImage:[UIImage imageNamed:@"barbuttonPlain.png"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

在这种情况下并不成功。

**更新：**

这个想法不是创建自定义按钮，因为您需要处理这种情况的翻译。另一方面，我想用户撰写和其他类型的默认图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:03:55.300

从...替换您的代码

```
[editFavoritesButton setBackgroundImage:[UIImage imageNamed:@"barbuttonPlain.png"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

像这样……

```
[editFavoritesButton setImage:[UIImage imageNamed:@"barbuttonPlain.png"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:00:43.127

你可以试试这样如果你有任何问题你可以问..

```
UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
backButton.frame = CGRectMake(0, 0, 83, 44);
backButton.adjustsImageWhenHighlighted=NO;
[backButton addTarget:self action:@selector(backMethod)
       forControlEvents:UIControlEventTouchDown];
[backButton setImage:[UIImage imageNamed:@"img.png"]
              forState:UIControlStateNormal];

UIBarButtonItem *barLeftInfoButton = [[UIBarButtonItem alloc] initWithCustomView:backButton];
self.navigationItem.leftBarButtonItem = barLeftInfoButton; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:00:46.857

首先添加一个自定义按钮，然后将其添加到 UIBarButtonItem。

```
UIImage *buttonImage = [UIImage imageNamed:@"mainButton.png"];

    //create the button and assign the image
self.yourButton = [UIButton buttonWithType:UIButtonTypeCustom];
[self.yourButton setFrame:CGRectMake(5,7,buttonImage.size.width,buttonImage.size.height)];

[self.yourButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
self.yourButton.titleLabel.font = [UIFont boldSystemFontOfSize:12];
[self.yourButton setTitle:@"title" forState:UIControlStateNormal];
[self.yourButton addTarget:self action:@selector(startEndEditing:) forControlEvents:UIControlEventTouchUpInside];

    // add image view
[self.navBar addSubview:self.yourButton];

    //create a UIBarButtonItem with the button as a custom view
UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:self.yourButton];
self.navigationItem.leftBarButtonItem = customBarItem; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T11:58:26.033

使用此代码创建自定义 UIBarButtonItem：

```
UIButton *mybutton = [UIButton buttonWithType:UIButtonTypeCustom];
[mybutton setFrame:CGRectMake(0.0f, 0.0f, 25.0f, 25.0f)];
[mybutton addTarget:self action:@selector(mybuttonFunction) forControlEvents:UIControlEventTouchUpInside];
[mybutton setImage:[UIImage imageNamed:@"myImage.png"] forState:UIControlStateNormal];

UIBarButtonItem *random = [[UIBarButtonItem alloc] initWithCustomView:mybutton]; 
```

希望这会帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T12:02:14.607

请尝试使用这个....

```
UIButton *editFavoritesButton = [[UIButton alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 55.0f, 30.0f)];
[editFavoritesButton setBackgroundColor:[UIColor clearColor]];
[editFavoritesButton setBackgroundImage:[UIImage imageNamed:@"barbuttonPlain.png"] forState:UIControlStateNormal];
[editFavoritesButton addTarget:self action:@selector(startEndEditing:) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *leftBtn = [[UIBarButtonItem alloc] initWithCustomView:editFavoritesButton];
[self.navigationItem setLeftBarButtonItem:leftBtn]; 
```

# ssis - SSIS GUID 作为从 XML 源组件自动生成的 Id

> ID：15476247
> 
> 赞同：0
> 
> 时间：2013-03-18T11:56:10.320
> 
> 标签：ssis

是否可以设置 XML Source 组件，以便它为自动生成的 _id 列生成 GUID，而不是默认的 int 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:39:20.167

我会将 XML 源的每个输出发送到 SQL 表（使用 OLE DB 目标），并向每个表添加一个 GUID 列。

实际上，我会忘记 GUID，因为它们通常很痛苦，尤其是 SSIS - 它基本上不提供对 GUID 的任何支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T00:07:26.990

解决我的问题的方法是编写一个自定义组件。没有其他可用的替代品。

# .htaccess - .htpasswd 和 .htaccess - 内部服务器错误

> ID：15476252
> 
> 赞同：18
> 
> 时间：2013-03-18T11:56:18.040
> 
> 标签：.htaccess, .htpasswd

我想用密码保护我的网站，但是一旦我添加 .htpasswd 和 .htaccess 文件，我就会收到服务器错误：

> **内部服务器错误**
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。

这是我正在使用的代码：

**.htaccess**

```
AuthType Basic  
AuthName "Top Secret for SongKick eyes only."  
AuthUserFile /webroot/.htpasswd  
require valid-user 
```

**.htpasswd**

```
songkick:isS1rCTQE/p8E 
```

我也尝试过`AuthUserFile /.htpasswd`（即没有“webroot”，这是它似乎在文件管理器中的文件夹的名称），但这也不起作用。

顺便说一句，我正在使用 GoDaddy 托管，如果这有所作为的话。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-18T13:30:49.803

根据[`AuthUserFile`](http://httpd.apache.org/docs/current/en/mod/mod_authn_file.html#authuserfile)，您必须提供密码文件的完整路径，而不是来自 的相对路径`DocumentRoot`，如果它是绝对路径（即以斜杠开头）。

> AuthUserFile 指令设置一个文本文件的名称，该文件包含用于用户身份验证的用户列表和密码。File-path 是用户文件的路径。如果它不是绝对的，则将其视为相对于*ServerRoot*。

注意`ServerRoot`不是`DocumentRoot`。

如果`DocumentRoot`是`/var/www`并且密码文件是`/var/www/webroot/.htpasswd`，你必须说

```
AuthUserFile /var/www/webroot/.htpasswd 
```

在您的 .htaccess 文件中。

* * *

您可以使用一个小的 PHP 脚本了解绝对路径，例如

```
<?php
echo "Absolute path: ", getcwd(); 
```

把它放在你想要找到 .htpasswd 文件的目录中，然后调用它`http://www.example.com/path/to/test.php`

完成后不要忘记删除脚本。

* * *

也就是说，您不应该将密码文件放在`DocumentRoot`. 最好把它放在从网络上无法访问的地方，即`/etc/apache2/htpasswd`或任何适合你的地方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T12:00:41.257

我想到了两件事。

1.  `.htpasswd`Web 服务器用户是否可读？

2.  您知道 Apache 是否设置`AllowOverride all`为允许`.htaccess`按预期运行？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-14T02:15:55.413

所有标准答案（完整路径、正确格式等）都不适合我。经过大量的追查，我发现父文件夹的权限不足，所以即使.htaccess中的路径是正确的，文件的权限是rw-rr，仍然不行，因为父文件夹是rwx-rw- -。在限制对上游文件夹访问的主机上，这可能很难追踪。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-24T11:58:55.190

此错误的主要原因是“AuthUserFile”路径。我遇到了同样的问题，我通过进入 cpanel 解决了它。通过保护您在 cPanel 中的文件夹，它会自动检测 htpasswd 文件。

转到 cPanel->密码保护目录->定义目录，然后创建一个用户。希望这对您有所帮助。

# ruby-on-rails - 简单的嵌套属性关联问题 Ruby on Rails

> ID：15476254
> 
> 赞同：0
> 
> 时间：2013-03-18T11:56:27.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes, rails-activerecord

我有两个模型，一个用户模型和一个头发模型。我创建了一个表单，该表单成功地允许用户提交并保存他们的姓名、用户模型中的位置以及头发模型中的头发颜色。

我似乎无法解决的是如何在我的视图中检索用户的头发颜色？

头发目前是我的路线中用户的嵌套属性，视图显示的当前结果是`Rosie Ealing #<Hair:0x4d5e078>`

任何可以提供的帮助真的将不胜感激。

**用户模型**

```
class User < ActiveRecord::Base
  has_one :hair, :dependent => :destroy
  accepts_nested_attributes_for :hair
  attr_accessible :location, :name, :hair_attributes
end 
```

**头发模型**

```
class Hair < ActiveRecord::Base
  belongs_to :user
  attr_accessible :color, :user_id
end 
```

**用户索引**

```
<% @user.each do |user| %>
    <%= user.name %>
    <%= user.location %>
    <%= user.hair %>
<% end %> 
```

**用户模型迁移**

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :name
      t.string :location

      t.timestamps
    end
  end
end 
```

**头发模型迁移**

```
class CreateHairs < ActiveRecord::Migration
  def change
    create_table :hairs do |t|
      t.string :color
      t.integer :user_id

      t.timestamps
    end
  end
end 
```

**用户控制器**

```
class UsersController < ApplicationController
  def new
    @user = User.new
    @user.build_hair
  end

  def create
    @user = User.new(params[:user])
        if @user.save
            redirect_to users_path
        else
            render "user/new"
        end
  end

  def index
    @user = User.all
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:59:05.143

试试这个：

```
<% @user.each do |user| %>
    <%= user.name %>
    <%= user.location %>
    <%= user.hair.color %>
<% end %> 
```

您的代码返回指向对象 Hair 的链接，而不是其中包含的数据。

# build - 如何为 sbt 项目指定自定义目录布局？

> ID：15476256
> 
> 赞同：9
> 
> 时间：2013-03-18T11:56:32.070
> 
> 标签：build, sbt

如何为`sbt`基于 - 的项目指定自定义目录布局？我一直在查看在线`sbt`材料，但我正在努力寻找这些信息......

我在文档中找到的是默认位置：

*   基本目录中的源
*   来源`src/main/scala`和`src/main/java`
*   测试`src/test/scala`和`src/test/java`
*   `src/main/resources`和中的数据文件`src/test/resources`
*   非托管 jar 文件在`lib/`

如何在`build.sbt`文件中覆盖这些？

我的项目结构目前如下：

*   来源：`[workspace]/sandbox-scala/src/sbt/myFirst/`
*   图书馆：`[workspace]/java-lib/common/lib/`

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T02:11:27.270

可以覆盖多个 sbt 的默认目录位置。这是一个覆盖 sbt 期望找到“非托管”依赖项/jar 文件的目录的示例：

```
unmanagedBase := baseDirectory.value / "custom-jars-directory" 
```

（更多与[sbt 文档中的依赖](http://www.scala-sbt.org/release/docs/Detailed-Topics/Library-Management.html)相关的示例。）

您还可以将目录配置为特定于特定“任务”...例如，要设置测试用例源代码所在的目录，请尝试：

```
scalaSource in Test := { (baseDirectory in Test)(_ / "test") }.value 
```

然后您的核心应用程序源代码可能在其他地方，例如`src/`：

```
scalaSource in Compile := { (baseDirectory in Compile)(_ / "src") }.value 
```

**注意**：对于旧版本，`sbt`您可能需要以下（现已弃用）语法：

```
unmanagedBase <<= baseDirectory { base => base / "custom-jars-directory" }
scalaSource in Compile <<= (baseDirectory in Compile)(_ / "src") 
```

此语法不适用于较新版本的`sbt`（我相信自 0.13.13 以来）。

# c++ - 带有 QWidget 的 OSG 显示额外的边框

> ID：15476265
> 
> 赞同：0
> 
> 时间：2013-03-18T11:56:51.150
> 
> 标签：c++, qt, openscenegraph

我已经修改了[osgViewerQt 示例](http://www.openscenegraph.org/projects/osg/browser/OpenSceneGraph/trunk/examples/osgviewerQt/osgviewerQt.cpp)，以便加载点云并在 Qt 应用程序中将其可视化。正如您在所附图像中看到的那样，显示了云点云，但窗口中有一个额外的边框（见箭头）。

![窗口中的额外边框](../Images/38784a2fdec4d8ca1e92790e55d3ae47.png)

我整个周末都在试图弄清楚如何“扩展”窗口以删除该边框，但它一直在显示。

你知道我能做些什么来删除它吗？我将发布修改后的代码`osgViewerQt`和我使用它的代码段。

**viewer_widget.h**

```
#ifndef VIEWER_WIDGET_H
#define VIEWER_WIDGET_H

#include "osgViewer/CompositeViewer"

#include <QTimer>
#include <QWidget>

class QGridLayout;
class QWidget;

class ViewerWidget : public QWidget, public osgViewer::CompositeViewer {
private:
  std::string cloud_file;
  std::string cloud_filepath;
  QTimer timer_;
  QWidget* widget;
  QGridLayout* grid;
  osg::ref_ptr<osgViewer::View> view;
private:
  ViewerWidget(const ViewerWidget& V);
  ViewerWidget& operator=(const ViewerWidget& V);
private:
  QWidget* AddViewWidget(osg::Camera* camera,osg::Node* scene);
  osg::Camera* CreateCamera(int x,int y,int w,int h,const std::string& name="",
    bool windowDecoration=false
  );
  osg::Node* ReadOctree(const std::string& file);
public:
  ViewerWidget(const std::string& filename,const std::string& filepath,bool color,
    osgViewer::ViewerBase::ThreadingModel threadingModel
      = osgViewer::CompositeViewer::ThreadPerCamera
  );
  virtual ~ViewerWidget(void){}
  void AddCloud(void);
  void StartFrameTimer(int msec=10) { timer_.start(msec); }
  virtual void paintEvent( QPaintEvent* event ) { frame(); }
};

#endif // VIEWER_WIDGET_H 
```

**osg_viewer.cpp**

```
#include "viewer_widget.h"

#include "osgDB/ReadFile"
#include "osgGA/TrackballManipulator"
#include "osgQt/GraphicsWindowQt"
#include "osgViewer/ViewerEventHandlers"

#include <QGridLayout>
#include <QDebug>

ViewerWidget::ViewerWidget(const std::string &filename,const std::string &filepath,
  bool color, osgViewer::ViewerBase::ThreadingModel threadingModel
) :
  QWidget(),
  cloud_file( filename ),
  cloud_filepath( filepath )
{
//  this->setSizePolicy(QSizePolicy::Expanding,QSizePolicy::Expanding);
  connect( &(this->timer_), SIGNAL(timeout()), this, SLOT(update()) );
}

QWidget* ViewerWidget::AddViewWidget(osg::Camera *camera,osg::Node *scene) {
  view = new osgViewer::View;
  view->setCamera( camera );
  view->setSceneData( scene );

  osg::Stats* stats = this->getViewerStats();
  if(stats) stats->report(std::cout);

  addView( view );
  view->addEventHandler( new osgViewer::StatsHandler );
  view->setCameraManipulator( new osgGA::TrackballManipulator );
  osgQt::GraphicsWindowQt* gw = dynamic_cast<osgQt::GraphicsWindowQt*>(
    camera->getGraphicsContext()
  );

  return gw ? gw->getGLWidget() : 0;
}

osg::Camera* ViewerWidget::CreateCamera(int x,int y,int w,int h,const std::string &name,
  bool windowDecoration
) {
  osg::DisplaySettings* ds = osg::DisplaySettings::instance().get();
  osg::ref_ptr<osg::GraphicsContext::Traits> traits = new osg::GraphicsContext::Traits;
  traits->windowName = name;
  traits->windowDecoration = windowDecoration;
  traits->x = x;
  traits->y = y;
  qDebug() << "w:" << w << " h:" << h;
  traits->width = w;
  traits->height = h;
  traits->doubleBuffer = true;
  traits->alpha = ds->getMinimumNumAlphaBits();
  traits->stencil = ds->getMinimumNumStencilBits();
  traits->sampleBuffers = ds->getMultiSamples();
  traits->samples = ds->getNumMultiSamples();
  osg::ref_ptr<osg::Camera> camera = new osg::Camera;
  camera->setGraphicsContext( new osgQt::GraphicsWindowQt(traits.get()) );
  camera->setClearColor( osg::Vec4(0,0,0,1) );
  camera->setViewport( new osg::Viewport(0, 0, traits->width, traits->height) );
  camera->setProjectionMatrixAsPerspective(
      30.0f, static_cast<double>(traits->width)/static_cast<double>(traits->height), 1.0f, 10000.0f );

  return camera.release();
}

osg::Node* ViewerWidget::ReadOctree(const std::string &file) {
  osg::Group* group = new osg::Group;
  group->addChild( osgDB::readNodeFile(file, options) );
  return group;
}

void ViewerWidget::AddCloud() {
  std::cout << "Loading cloud from file:" << cloud_file.c_str() << "\n";
  QWidget* widget = AddViewWidget(
    CreateCamera(0,0,100,100,"cam1",true),
    ReadOctree(cloud_file)
  );
  grid = new QGridLayout;
  grid->addWidget( widget, 0, 0 );
  this->setLayout( grid );
} 
```

现在，使用此小部件的位置（稍微简化以仅显示相关部分）：

**云.h**

```
#ifndef CLOUD_H
  class Cloud: public QObject {
  Q_OBJECT
  private:
    osg::ref_ptr<ViewerWidget> osg_widget;
    QDockWidget* dock;
    /// MORE ATTRIBUTES
  public:
    Cloud(){
      /// ...
      dock = new QDockWidget;
      osg_widget = new ViewerWidget( getFileName(), getFilePath(), has_color);
      dockWidget->setAllowedAreas(Qt::RightDockWidgetArea);
      dockWidget->setSizePolicy(QSizePolicy::Expanding,QSizePolicy::Expanding);
      dockWidget->addWidget(osg_widget);
    }
    /// More methods, cloud manipulators, etc.
  };
#endif 
```

在指定尺寸策略时，我也尝试过`Minimum`,`MinimumExpanding`和 `Ignored`，但效果相同。我试图直接在内部指定大小策略`ViewerWidget`（因为它继承自`QWidget`）并将其指定为它的小部件属性，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:03:32.550

如果我理解正确，您正在使用网格布局在目标窗口中插入视图小部件：

```
grid = new QGridLayout;
grid->addWidget( widget, 0, 0 );
this->setLayout( grid ); 
```

布局通常在其元素周围插入填充（在 Qt 文档中称为边距）。你可以使用它来调整它`QLayout::setContentsMargin()`，所以这里有一些本着这个精神的东西

```
grid->setContentsMargins(0,0,0,0); 
```

应该做的伎俩。

# sencha-touch - 检索 sencha touch 2 fieldsets 值

> ID：15476268
> 
> 赞同：0
> 
> 时间：2013-03-18T11:57:12.250
> 
> 标签：sencha-touch

我是 sencha touch 框架的新手。我首先尝试创建用户登录。我想从表单中获取用户名和密码并发送到 api 进行身份验证。但我什至无法获得字段值。我的 LoginForm 视图如下所示：

```
Ext.define('NCAPP.view.tablet.LoginForm', {
extend: 'Ext.form.Panel',
xtype:'loginForm',
id:'loginForm',
config: {
    items: [
        {
            xtype: 'image',
            src:'resources/img/netcenter_logo.png',
            height: 100
        },
        {
            xtype: 'fieldset',
            title: 'NCAPP LOGIN:',
            items: [

                {
                    xtype: 'textfield',
                    id:'fldUsername',
                    name:'username',
                    placeHolder: 'Username'
                },
                {
                    xtype: 'textfield',
                    id:'fldPassword',
                    name:'passowrd',
                    placeHolder: 'Password'
                }

            ]
        },
        {
            xtype: 'button',
            id: 'btnLogin',
            text: 'Login'
        }
    ]
} 
```

});

和我的登录控制器：

```
Ext.define('NCAPP.controller.tablet.LoginController', {
extend: 'Ext.app.Controller',    
config: {
    refs: {   
        loginForm:'#loginForm'
    },
    control: {
        '#btnLogin':{
            tap:'onLoginButtonTap'
        }            
    }
},
onLoginButtonTap:function(){

    var values=this.getLoginForm().getValues();
    console.log(values.username); // want to see this output

    Ext.ModelMgr.getModel('NCAPP.model.User').load(1,{
        success:  function(user){

            //to do

        },
        failure: function(user){
            console.log("failed");
        }
    });    
},
init:function(application){

} 
```

});

我没有成功获取用户名字段的值。显示的错误是：

```
Uncaught TypeError: Object function () {
                return this.constructor.apply(this, arguments);
            } has no method 'LoginForm' 
```

或者有时这个错误：

```
Uncaught TypeError: Cannot call method 'getValues' of undefined 
```

任何人都可以帮助我......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:52:19.763

看起来您忘记了回调`()`末尾的`this.getLoginForm`。尝试切换到

```
success:  function(user){
    var values=this.getLoginForm().getValues();
                              //^^------these ones
    console.log(values.username); // want to see this output
} 
```

# android - 在该单击的网格项目之上再显示一个图像

> ID：15476269
> 
> 赞同：2
> 
> 时间：2013-03-18T11:57:12.327
> 
> 标签：android, image, gridview

我有 4 个项目的网格视图，现在单击每个网格项目，我需要在单击的网格项目上再显示一个图像。

如何实现这一目标？

![这是预期的](../Images/3cdff24b697cfb7b925749fbb4e6c07e.png)

这是我的适配器类获取视图：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder view;
    LayoutInflater inflator = activity.getLayoutInflater();

    GridView.LayoutParams params = null;
    if (convertView == null) {
    view = new ViewHolder();
    convertView = inflator.inflate(R.layout.tile_row, null);

    view.textView = (TextView) convertView.findViewById(R.id.title);
    view.imageView = (ImageView) convertView.findViewById(R.id.icons);
    convertView.setTag(view);

    params = new GridView.LayoutParams(Width, Height);
    convertView.setLayoutParams(params);
    } else {
    view = (ViewHolder) convertView.getTag();
    }
    // set image view parameters
    setImageParamaeters(view.imageView);

    view.textView.setText(adapterNames.get(position));
    view.imageView.setImageResource(adapterIcondIds.get(position));

    if (params != null) {
    convertView.setLayoutParams(params);
    }

    convertView.setId(position);
    convertView.setOnClickListener(onClickListeners.get(position));

    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:12:40.107

您可以通过在网格项目顶部放置一个弹出窗口来完成此操作。为了找到网格项目的确切屏幕位置，您可以使用以下代码

```
Rect loc = new Rect();
int[] location = new int[2];
view.getLocationOnScreen(location);
loc.left = location[0];
loc.top = location[1];
loc.right = loc.left + view.getWidth();
loc.bottom = loc.top + view.getHeight(); 
```

该变量`loc`保存被点击的确切屏幕位置`view`，这不过是该方法的第二个参数

```
@Override
public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {
    // TODO Auto-generated method stub  
} 
```

有了这些信息，您就可以轻松实现您所需要的。最好的方法是计算视图的中心并将弹出窗口的中心与单击视图的中心对齐。

**注意：如果视图的一部分可见，您将需要调整以显示弹出窗口。**

**编辑：** 由于我没有得到您的问题，因此我添加了一张图片以提高清晰度。

我已经提供了案例 1 的代码。对于案例 2，您将需要修改布局，您可以在单击网格项目时显示叠加图像 ![可能的情况](../Images/71254ca0e5e7e34daaaa0f0e2dc7bfca.png)

**编辑：实施案例2**

修改了适配器代码，移动了一些变量以进行优化

```
public CustomAdapter(Activity activity, ...){
    inflator = activity.getLayoutInflater();
...
}
LayoutInflater inflator;

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder view;

    if (convertView == null) {
        view = new ViewHolder();
        convertView = inflator.inflate(R.layout.tile_row, null);

        view.textView = (TextView) convertView.findViewById(R.id.title);
        view.imageView = (ImageView) convertView.findViewById(R.id.icons);
        view.clickedImage = (ImageView) convertView.findViewById(R.id.clickedImage);
        convertView.setTag(view);
    } else {
        view = (ViewHolder) convertView.getTag();
    }
    // set image view parameters
    view.textView.setText(adapterNames.get(position));
    view.imageView.setImageResource(adapterIcondIds.get(position));
    //add a int variable to the view holder
    view.position = position;
    if(position != clickedPosition){
        view.clickedImage.setVisibility(View.GONE);
    }
    convertView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            ViewHolder holder = (ViewHolder)v.getTag();
            clickedPosition = holder.position;
            holder.clickedImage.setVisibility(View.VISIBLE);
            //you can also set the resource of the imageview here.
            notifyDataSetChanged();
        }
    });

    return convertView;
}
//this is used for resetting the previous view when a new view is clicked
int clickedPosition = -1; 
```

> 为了在网格视图中保留项目的单击状态，我存储了网格的单击项目位置。现在在 onClick 中，我更改了单击图像的可见性（处于 GONE 状态），更新变量 clickedPosition 并简单地调用 notifyDataSetChanged。这告诉适配器数据集已更改，并且将调用所有可见网格项的 getView。因此，如果您最初单击第 1 项，然后单击第 3 项，那么您会注意到单击第 3 项时第 1 项已被重置。

XML `title_row.xml`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="200dp"
    android:layout_height="200dp" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:src="@drawable/droid_logo_black"
        android:visibility="gone" />

    <ImageView
        android:id="@+id/clickedImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:src="@drawable/login_help_logo" />

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Title"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:00:54.383

在元素的onClickListener中，调用imageView，动态加载图片。或者预定义图片资源，使用新图片的id调用Imageview。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:04:09.917

`onlclick of each grid item i need to display one more image on top of that clicked grid item.`

我认为您必须创建自定义网格视图。并根据需要动态附加 ImageView。

`setVisibilty(View.Visible)` 什么时候想展示，`setVisibilty(View.Hide)`什么时候不想展示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T13:11:15.483

```
int id = getResources().getIdentifier("yourpackagename:drawable/" + StringGenerated, null,     null); 
```

尝试这种类型的东西，你会得到 id。尝试使用更改图像

```
imageview.setImageResource(id); 
```

祝你好运！

# tsql - 组合两个 SQL 查询 - COUNT 和 WHERE

> ID：15476274
> 
> 赞同：2
> 
> 时间：2013-03-18T11:57:34.887
> 
> 标签：tsql

我正在尝试将这两个 SQL 查询组合起来，以在访问列中显示最高计数为 1 的用户名，该列的 itemID 为 2 且访问为 1。

我将如何结合这两个语句来产生这个结果？

显示具有最高权限的帐户：

```
SELECT UserName, COUNT(Access) AS Count 
FROM Permissions
GROUP BY UserName, Access
HAVING Access = 1
ORDER BY Count DESC

Result:
Username    AccessCount
user1       2
user2       1
user3       2 
```

显示所有具有数据管理员访问权限的帐户：

```
SELECT UserName FROM Permissions
where itemid = 2 AND Access = 1

Result:
Username
user1
user2 
```

权限表示例数据：

```
itemID  UserName    Access
1       user1       1
2       user1       1
3       user1       1
1       user2       0
2       user2       1
3       user2       0
1       user3       1
2       user3       0
3       user3       1 
```

结果将是 user1，因为他们可以访问 itemID 2 并且访问次数最多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:05:16.070

[SQLFiddle 演示在这里](http://sqlfiddle.com/#!3/7e5de/3)

```
SELECT TOP 1 UserName, COUNT(Access) AS Count 
FROM Permissions ps
WHERE Access = 1
AND
userNAme in 
     (SELECT UserName 
        FROM Permissions
         where itemid = 2 
           AND Access = 1
      )
GROUP BY UserName
ORDER BY Count DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:12:50.760

```
SELECT TOP 1 *
FROM 
(
SELECT [USERNAME] as un,COUNT(ACCESS) AS COUNT
FROM Permissions    
GROUP BY USERNAME,ACCESS
HAVING ACCESS=1     
) a
WHERE EXISTS (SELECT [USERNAME] FROM Permissions WHERE [USERNAME]=a.un and itemid=2)
ORDER BY COUNT DESC 
```

# apache-flex - 像 flex 中的地图一样缩放绘图

> ID：15476275
> 
> 赞同：0
> 
> 时间：2013-03-18T11:57:36.307
> 
> 标签：apache-flex, actionscript, zooming, mxml

我正在尝试像 flex 中的地图一样缩放我的绘图，但我所做的一切都是通过 HSlider 进行缩放。你能解释一下如何像谷歌地图一样缩放我的绘图吗？

这是我的缩放代码： 我的缩放功能：

```
private function doZoom(component:UIComponent,val:Number):void
        {
            if(component is Container)
            {
                var children:Array = Container(component).getChildren();
                for(var i:int = 0; i < children.length; i++)
                {
                    zoomChildren(children[i], val);
                }
            }

        }

        private function zoomChildren(component:UIComponent,val:Number):void
        {

            component.scaleX = val;
            component.scaleY = val;
            if(component is Container) 
            {
                var children:Array = Container(component).getChildren();
                for(var i:int = 0; i < children.length; i++)
                {
                    doZoom(children[i], val);
                }
            }
        }

        public function applyZoom():void
        {

            if(pnl == null)
            {
                return;
            }

            doZoom(pnl,zoomSlider.value);
        } 
```

和我的组件：

```
<s:VGroup>
    <s:Button  label="Загрузить SVG" click="PathsService.getPaths()"/>  

    <mx:Panel  y="30" width="1300" height="600" id="pnl"  title="Отрисовка SVG" borderColor="#008040" fontFamily="Arial" fontWeight="bold" fontSize="13">

        <s:VGroup height="100%" width="100%" clipAndEnableScrolling="true">

            <s:SpriteVisualElement width="100%" height="100%" id="spr" />
        </s:VGroup>

    </mx:Panel>
    <s:HGroup height="100%" width="100%">
        <s:Label text="Zoom" x="250"/>

        <mx:HSlider id="zoomSlider" minimum=".1" value="1"
                    maximum="2" change="applyZoom()" width="180" x="300"/>
    </s:HGroup>
</s:VGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T21:26:49.297

如果您的意思是要让组件根据鼠标滚轮输入做出响应，您应该为鼠标滚动事件注册一个事件侦听器。

例如在您尝试缩放的组件上添加以下行 `addEventListener(MouseEvent.MOUSE_WHEEL, mouseWheelHandler);`

在你的 mouseWheelHandler 函数中，你应该得到 event.delta 值，它应该包含滚轮移动的量

# google-maps - 谷歌地图 api v3：信息窗口内容放错了位置

> ID：15476277
> 
> 赞同：0
> 
> 时间：2013-03-18T11:57:38.803
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, infowindow, geoxml3

我`geoxml3`用来解析一个`kml`点文件。单击标记时，会打开一个带有一些描述的信息窗口。问题是信息显示错位，并且在我要删除的信息窗口中添加了两个链接。

有什么想法可以删除链接并正确放置信息吗？

这是信息窗口的屏幕截图：

![在这里输入代码](../Images/5134c92676aed6a3f4c1b00cdba7bf75.png)

以下是我正在使用的代码：

```
function initialize() { 
    directionsDisplay = new google.maps.DirectionsRenderer();

    var mapOptions = {
        center: new google.maps.LatLng(35.898737028438, 14.5133403246687),
        zoom: 17,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    directionsDisplay.setMap(map);

    elevator = new google.maps.ElevationService();

    google.maps.event.addListener(map, 'click', function(event) {
        placeMarker(event.latLng);     
    });

    google.maps.event.addListener(map, 'click', getElevation);

}

function displayKml() {
    initialize();
    parser = new geoXML3.parser({
        map: map,
        processStyles: true,
        createMarker: addMyMarker,
        createOverlay: addMyOverlay
    });          
    parser.parse("Uploads/" + document.getElementById('<%= text2.ClientID %>').value); 
}

function addMyMarker(placemark) {
   parser.createMarker(placemark);
}

function addMyOverlay(groundOverlay) {
   parser.createOverlay(groundOverlay);
} 
```

kml文件结构如下：

```
<?xml version="1.0" encoding="utf-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>route</name>
    <Placemark>
      <name>210</name>
      <description>St james cavalier,Exhibitions centre</description>
      <Point>
        <coordinates>14.5107742,35.8955498</coordinates>
      </Point>
    </Placemark>
  </Document>
</kml> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:51:06.053

您的示例 KML 可以与我的测试页配合使用：

polys 分支： [http ://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_IT_info_kmlPt.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_IT_info_kmlPt.xml)

kmz 分支： [http ://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmztest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_IT_info_kmlPt.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmztest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/SO_IT_info_kmlPt.xml)

必须是您的 css（您尚未提供）或您环境中的其他内容。

# perl - 如何在同一 xml 行上替换 Perl 中的相同单词？

> ID：15476280
> 
> 赞同：0
> 
> 时间：2013-03-18T11:58:02.453
> 
> 标签：perl, if-statement, substitution, uppercase

我正在处理 XML 文档，我需要打开它并将同一行上的某些特定标记值转换为大写。如果我有相同的单词，它只会替换其中一个，尽管我使用了两个不同的 if 循环：这是我的 XML：

```
<pageID="1" width="827" height="1169" Sender_Company="société" Sender_Address="société" Sender_Fax="" Category="C2" Language_2="" Document_Object="" Language_1="french" Language_3="" NumPage="1" Script_1="typed"> 
```

这是我的代码：

```
while (<FILEIN>) {
    if ($_ =~ /pageID="1"/) {
        $haschanged = 1;
        if ($_ !~ /Sender_Address=""/) {
            if ($_ =~ /(Sender_Address="(.*?)")/){
                my $SenderAddress = $2;
                $SenderAddress = uc($SenderAddress);
                $_ =~ s/$1/Sender_Address="$SenderAddress"/;
            }
        }

        if ($_ !~ /Sender_Company=""/) { 
            if ($_ =~ /(Sender_Company="(.*?)")/) { 
                my $SenderCompany = $2;
                $SenderCompany = uc($SenderCompany);
                $_ =~ s/$1/Sender_Company="$SenderCompany"/;
                #print "$_\n";
            }
        }
    }
} 
```

当我使用两个不同的值`Sender_Company="bla"`并且`Sender_Address="société"`转换为大写时有效，但是当我在这种情况下使用相同的单词`Sender_Company="société"`并且`Sender_Address="société"`它不会转换为大写时。有没有人有任何想法？当我一次使用两个不同的 if 循环时，我找不到它不想转换同一个单词的逻辑。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:34:32.777

您对 XML 的理解有点值得商榷：

1.  那不是 XML。它最多是一个 XML 片段（元素未关闭，标签名称不能兼作属性，如`<pageID="1">`，没有`<?xml ...?>`声明，没有根元素，......）
2.  不要使用正则表达式解析 XML ;-)
3.  XML 没有“行”的概念。

除此之外，代码应该可以正常工作。请注意，您可以使您的生活变得轻松，并且您的代码很短：

1.  `$_ =~ /foo/`与 相同`/foo/`，`$_ !~ /foo/`与 相同`!/foo/`。
2.  无需提取两个捕获并将结果替换为第二个正则表达式，您只需一步即可完成所有操作：

    ```
    s{ (?<=Sender_Address=") ([^"]+) (?=") }{ uc $1 }ex 
    ```

    等等，什么？我提取了一个或多个非"字符，这些字符前面是字符串`Sender_Address="`，后面是`"`（环顾断言）。我捕获之间的东西，并将其替换为大写版本。因为我匹配至少一个字符，我不必测试空标签的情况。该`/e`标志允许替换中的代码（这里不是必需的），并且`/x`允许我们包含不匹配的空格以更好地格式化。

    您可以轻松地将其扩展为您想要大写的两个属性：

    ```
    # This subsumes your whole logic inside `if (/pageID="1"/)`
    $haschanged = 1;
    for my $attr (qw/Sender_Address Sender_Company/) {
      s{ (?<=\Q$attr\E=") ([^"]+) (?=") }{ uc $1 }ex;
    } 
    ```

    这`\Q...\E`会导致插值的内容按字面意思匹配，即使它包含否则会是正则表达式元字符的字符。

还有一些剩余的错误：

1.  您无法将作为实体给出的大写字符。
2.  XML 允许将单引号`'...'`用作标记值分隔符。你不处理它们
3.  *请参阅您对 XML 的理解*下的要点……</li>

所有这些都可以通过使用 XML 解析器，然后转换 DOM 中的属性来解决。

# java - 显示一个仅提示 Eclipse 项目文件位置的文件对话框

> ID：15476284
> 
> 赞同：2
> 
> 时间：2013-03-18T11:58:06.453
> 
> 标签：java, eclipse, eclipse-rcp, eclipse-plugin

如何任意显示来自 的相同文件对话框`New -> File`？

我有一个 Eclipse `Action`，我希望在其中显示项目文件路径对话框，而不是系统文件路径对话框，如下图所示：

![Eclipse 项目文件对话框](../Images/4c8ddceaace578c6445901b4b11ed914.png)

还有一个问题：我也想显示现有文件，因为我不会创建新文件，而是可能会覆盖/同步文件。如果这是不可能的，我仍然想知道如何只显示与`New -> File`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:01:00.250

要显示工作区文件选择器，您需要执行以下操作：

```
ElementTreeSelectionDialog dialog = new ElementTreeSelectionDialog(
    shell,
    new WorkbenchLabelProvider(),
    new WorkbenchContentProvider());

dialog.setInput(ResourcesPlugin.getWorkspace().getRoot());
dialog.setAllowMultiple(false);

if (dialog.open() == Window.OK) {
    IResource resource = (IResource) dialog.getFirstResult();
} 
```

`ElementTreeSelectionDialog`非常可定制，因此您可以根据需要调整行为。

# java - 查找 mysql 查询是否执行了更新或插入

> ID：15476291
> 
> 赞同：5
> 
> 时间：2013-03-18T11:58:20.623
> 
> 标签：java, mysql

我有一个查询如下...

```
 INSERT INTO MYTABLE (f1,f2,f3,f4) VALUES (1,2,3,4) ON DUPLICATE KEY UPDATE f4=5; 
```

我所取得的成就，

创建连接，语句和执行查询如下

```
 statement.execute(query); 
```

但是，现在我需要找出代码是否执行了 INSERT 或 UPDATE ？

谁能帮我这个？？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:04:51.390

您可以改用两条语句：`executeUpdate`返回受影响的行数。如果该数字为 0，则您必须执行插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:18:27.950

我不知道任何特定的内置功能或解决方法。

但就我而言，我会以一种简单的方式使之成为可能

```
select count(*) as oldcount from MYTABLE; 
```

在此级别执行您的查询

```
INSERT INTO MYTABLE (f1,f2,f3,f4) VALUES (1,2,3,4) ON DUPLICATE KEY UPDATE f4=5;

select count(*) as newCount from MYTABLE;

retrive OLDCOUNT and NEW COUNT

if(oldcount != new count)
{
  //InsertPerformed
}

else
{
  //updateperformed
} 
```

# c# - Winform：带滚动的面板需要定义其宽度/高度吗？

> ID：15476299
> 
> 赞同：0
> 
> 时间：2013-03-18T11:58:38.257
> 
> 标签：c#, .net, winforms

我有一个 winform 用户控件，它有一个面板，其中包含一些 TableLayout（还有一些其他用户控件）。

我所有的组件都有一个`Dock=Fill`和`Autosize=True`属性。

目前，当我调整窗口大小时，我没有任何滚动条，溢出只是没有显示。

我发现如果我将面板的 AutoScrollMinSize 设置为某个值，那么当我达到设定的大小时，就会出现这些滚动条。

我的问题是我在运行时添加/删除元素，而且我还根据配置显示或不显示一些内容。所以对我来说，很难在这里硬编码一个值，要么我滚动条太早，要么太晚。

我确信应该有一种方法来配置我的userControl，而不必自己计算大小，让组件显示滚动条，当孩子的内容无法显示时，你知道怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:17:20.513

您可以在面板调整大小事件或窗体的调整大小事件上更改 AutoScrollMinSize 值。这样，它就不是一个固定值，并且如果面板的子控件超出面板边缘，就会有一个可用的滚动条 -

```
private void panel1_Resize(object sender, EventArgs e)
{
    panel1.AutoScrollMinSize = new System.Drawing.Size(panel1.Width, panel1.Height);
} 
```

# html - 内容更改时如何更改行高？

> ID：15476300
> 
> 赞同：1
> 
> 时间：2013-03-18T11:58:41.563
> 
> 标签：html, asp.net, html-table

我有一个有 4 行的 HTML 表格，当我将内容放入具有 45% 表格高度大小的行中时，如果内容高度的数量很大，它会将其他行的高度降低到显示内容，一切都出错了我该怎么办？是否可以只增加该行的高度？页面大小是否增加并不重要。

```
<html>
<head runat="server">
    <title> Kut Sharing</title>
     </head>
<body >
<div>
    <form id="form1" runat="server">
<table width="100%"   style="height:100%" border="0">
  <tr style="height:10%;background-image:url(Photos/header.png)"" >
     <td>
    <table width="100%" style=" height:100%" border="0">
  <tr>
    <td  style="width:12%; background-image:url(Photos/header2.gif)">&nbsp;</td>
    <td>
    <asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder></td>
  </tr>
</table>
</td>
  </tr>
  <tr style="height:35%; background-image:url(Photos/bluebox.png)"">
     <td>
      <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">
    </asp:ContentPlaceHolder>
      </td>
  </tr>

  <tr style="height:45%;">
    <td>
         <asp:ContentPlaceHolder  id="ContentPlaceHolder2" runat="server">

    </asp:ContentPlaceHolder>
        <br />
        <br />

    </td>

  </tr>
  <tr style="height:10%; background-image:url(Photos/footerBg.png)"">
    <td>&nbsp;</td>
  </tr>
</table>
    </form>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-04T15:14:17.423

在这种情况下，不要使用百分比来表示您的身高。

# redirect - 如果子域将 www 重定向到非 www

> ID：15476303
> 
> 赞同：0
> 
> 时间：2013-03-18T11:58:51.080
> 
> 标签：redirect, subdomain

我的域名[http://vietnam.asiastreetfood.com](http://vietnam.asiastreetfood.com)工作正常。但是如果有人打电话给[http://www.vietnam.asiastreetfood.com](http://www.vietnam.asiastreetfood.com)就会出错。我无法在 1und1.de 输入 www.vietnam 作为子域。那么有什么想法可以将 www 重定向到非 www 域？

这是我尝试过的：

```
RewriteCond %{HTTP_HOST} ^www\.vietnam.asiastreetfood\.com [NC]
RewriteRule (.*) http://vietnam.asiastreetfood.com/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T11:11:36.200

我认为'www'在技术上是一个子域本身，或者至少是一个通常不与“子域”一起使用的前缀，所以为了获得 www.sub.domain.com 你必须在服务器上配置一个虚拟主机（很多比 htaccess 更复杂）。这是我发现的[一篇 Media Temple 文章](https://kb.mediatemple.net/questions/1080/Use+www+prefix+with+subdomain#dv_managed)作为起点。

但这在 1und1.de 上是不可能的——你必须联系他们的支持，看看他们是否可以配置这个（不太可能）。

# java - Bash 忽略 Java 应用程序的退出

> ID：15476305
> 
> 赞同：0
> 
> 时间：2013-03-18T11:58:55.953
> 
> 标签：java, bash, shell

我有一个简单的 BASH 脚本，它包装了一个 java 程序，目的是在该应用程序崩溃时重新启动它：

```
STOP=0
while [ "$STOP" -eq 0 ]
do
        echo "Starting"
        exec java com.site.app.Worker
        echo "Crashed"
        sleep 3
done 
```

但是，如果 Java 进程退出，它也会退出 bash 脚本，因此该进程永远不会再次启动。

例如（指向一个假类）：

```
$ ./RestartApp.ksh
Starting
Exception in thread "main" java.lang.NoClassDefFoundError: com/site/app/Worker
Caused by: java.lang.ClassNotFoundException: com.site.app.Worker
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: com.site.app.Worker.  Program will exit.
$ 
```

有没有办法可以捕获错误（但仍显示它们）以允许脚本继续运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T12:02:25.370

删除`exec`. 这完全用 Java VM 替换了当前进程（你的 shell）。

只需删除它，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:51:21.683

正如 Mat 所说，**exec**所做的是将当前的 shell 进程替换为 Java 进程。它失败了，没有人等待它重新启动它。 **exec**可以是一个非常有用和专业的工具，但它相当先进。

正确使用它的一个示例是在当前 shell 中设置变量或优先级的脚本，然后执行您正在包装的进程。

似乎没有使用变量“STOP”。我只会去：

```
while ! java com.site.app.Worker
do
    echo Failed: Sleeping and restarting >&2
    sleep 3 
done 
```

# jquery - jQuery - 将变量传递给选择器时无法识别的表达式

> ID：15476307
> 
> 赞同：0
> 
> 时间：2013-03-18T11:59:02.433
> 
> 标签：jquery, html, selector

我正在尝试使用`<select>`-element 根据所选选项显示不同的图像滑块。我完全知道可能有更好的方法来做到这一点，但由于在这种情况下性能并不重要，我认为以下可能是最简单的选择。

这是 HTML：

```
<select id="album-select">
    <option value="album1" selected="selected">Album 1</option>
    <option value="album2">Album 2</option>
    <option value="album3">Album 3</option>
    <option value="album4">Album 4</option>
</select>
<ul id="album1-slides" class="rslides">
    <li><img src="img/album/1.jpg" alt=""></li>
    <li><img src="img/album/2.jpg" alt=""></li>
    <li><img src="img/album/3.jpg" alt=""></li>
</ul>
<ul id="album2-slides" class="rslides">
    <li><img src="img/album/4.jpg" alt=""></li>
    <li><img src="img/album/5.jpg" alt=""></li>
    <li><img src="img/album/6.jpg" alt=""></li>
</ul>
<ul id="album3-slides" class="rslides">
    <li><img src="img/album/7.jpg" alt=""></li>
    <li><img src="img/album/8.jpg" alt=""></li>
    <li><img src="img/album/9.jpg" alt=""></li>
</ul>
<ul id="album4-slides" class="rslides">
    <li><img src="img/album/10.jpg" alt=""></li>
    <li><img src="img/album/11.jpg" alt=""></li>
    <li><img src="img/album/12.jpg" alt=""></li>
</ul> 
```

我正在使用[Responsive Slides](http://responsive-slides.viljamis.com/)，尽管这并不重要，因为它可以完美运行。以防万一您想知道 -`<ul><li></li></ul>`结构。

所有`<ul>`元素都`display: none`通过 CSS 分配。

这是我的 JavaScript/jQuery 代码：

```
<script>

$(document).ready(function() {

          $("#album1-slides").show();

          function changeGallery(gallery) {
               $(".rslides").hide();
               var newGallery = "\"" + gallery + "-slides" + "\"";
               $(newGallery).show();
          }

          $("#album-select").change(function() {
               var gallery = "#" + $("#album-select").val();
               changeGallery(gallery);
          });

     });

</script> 
```

因此，当我打开页面时，会自动显示第一张专辑。更改选择`<option>`时，它应该隐藏显示的专辑（通过隐藏所有专辑，因为这是最快的方式）并显示新专辑。

我不知道问题是什么，但是当我尝试它时，我在控制台中收到以下错误：

```
Uncaught Error: Syntax error, unrecognized expression: "#album2-slides" 
```

这对我来说毫无意义，因为这正是我想要在我的`$(selector).show();`. 我想这与引号有关，但谷歌搜索对我没有帮助。

我正在使用 jQuery 1.9.1。

提前感谢您的任何建议和解决方案！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:00:42.383

您正在向选择器添加一对额外的引号 (")。

改变：

```
var newGallery = "\"" + gallery + "-slides" + "\""; 
```

至

```
var newGallery = gallery + "-slides"; 
```

它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:07:52.050

**解决方案：**删除此处的附加引号：

`var newGallery = gallery + "-slides";`

**为什么 ？**你将一个字符串传递给 $()，如果你在那个字符串中添加引号，最终作为选择器的字符串将是 '"#yourselector"'。

请参阅此处的工作代码[http://jsfiddle.net/Q8bmY/](http://jsfiddle.net/Q8bmY/)

# jquery - 延迟 x 秒后开始滚动 (smoothdivscroll)

> ID：15476312
> 
> 赞同：0
> 
> 时间：2013-03-18T11:59:18.697
> 
> 标签：jquery, smooth-scrolling

我正在使用 jQuery Plugin Smooth Div Scroll，它工作得非常好，但我希望滚动不是立即开始，而是在延迟两秒后开始。

这是它的样子：

```
<script type="text/javascript">
$(document).ready(function () {
    $("#makeMeScrollable").smoothDivScroll({
        mousewheelScrolling: "allDirections",
        manualContinuousScrolling: true,
        autoScrollingMode: "onStart"
    });
});
</script> 
```

以下是解释的所有选项：[http ://www.smoothdivscroll.com/options.html](http://www.smoothdivscroll.com/options.html)

有人可以快速浏览一下吗？不幸的是，我被困住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:52:43.123

你不需要编辑源代码来完成你想要的——你需要的一切都由插件以回调和公共方法的形式提供。这是执行您想要的工作示例的源代码：

```
// Initialization
var scroller = $("div#makeMeScrollable").smoothDivScroll({
    autoScrollingMode: "always",
    setupComplete: function() {
        scroller.smoothDivScroll("stopAutoScrolling");
    }
});

 setTimeout(function(){
     scroller.smoothDivScroll("startAutoScrolling");
 },2000) //2000 is delay in milliseconds 
```

这是一个JSFiddle，您可以在其中尝试：

[http://jsfiddle.net/yTTah/](http://jsfiddle.net/yTTah/)

# apache - 无限加载nodejs now.js

> ID：15476314
> 
> 赞同：0
> 
> 时间：2013-03-18T11:59:25.880
> 
> 标签：apache, node.js, codeigniter, nowjs-sockets

我有两个问题要问你。

首先，我使用 Codeigniter 作为我的主要框架开发工具，我想知道在其中实现 NodeJS 是否是个好主意。我需要创建一个通知中心来向用户发送通知。

其次，我在 Codeigniter 中实现了 NodeJS，但问题是，当我在服务器上使用模块“NowJS”时，我的页面正在加载但从未加载。就像我在做一个不停歇的超级循环。

这是我的 server.js：

```
var mysql = require('mysql'),
    //Client = require('mysql').Client,
    connection = mysql.createConnection({
    //Set user, and password for database
        host: 'localhost',
        user: 'root',
        password: 'root',
        database: 'db'
    }),
    exec = require('child_process').exec,
    server = require('http').createServer().listen(8000),
    nowjs = require("now"),
    everyone = nowjs.initialize(server);

connection.connect(function(err) {
  // connected! (unless `err` is set)
  console.log( err );
  console.log('connection to database established');
});

everyone.now.distributeMessage = function(message,session_cookie) {
    //Call the script that decrypts the session id
    //NOTE:the path to index.php must be relative to this script
    exec('php index.php user_session decrypt ' + encodeURIComponent(session_cookie), function (error, stdout, stderr) {
        var parts = stdout.split(';');
        var session_id = parts[1].split(':')[2];
        var ip_address = parts[3].split(':')[2];
        var query = 'select user_data from ci_sessions where session_id=' + session_id +
            ' and ip_address=' + ip_address;
        client.query(query, function (err, results, fields) {
            if (results) {
                //If anything is returned log the userdata and call the clientside function
                console.log(results[0].user_data);
                everyone.now.receiveMessage(message);
            }
        });
    });
}; 
```

这是我的 client.js

```
now.ready(function(){
    // "Hello World!" will print on server
    now.logStuff("Hello World!");
  }); 
```

这是我对 HTML 的标记

```
<script src="http://localhost:8000/nodejs/nowjs/now.js"></script>
<script src="/script/client.js"></script> 
```

另外，我可以在这个通知系统中使用 socket.io 吗？

提前致谢

西蒙

# java - 防止 ProGuard 混淆类成员名称

> ID：15476315
> 
> 赞同：85
> 
> 时间：2013-03-18T11:59:30.053
> 
> 标签：java, android, proguard, obfuscation

我的班级`ClassMultiPoint`有子班级。

```
public class ClassMultiPoints
 {
   public String message;
   public List<ClassPoints> data;

   public class ClassPoints
    {
      public String id;
      public List<ClassPoint> points;
      public class ClassPoint
       {
         public String speed;
         public String bearing;
       }
    }
 } 
```

我`oPoints`将从 parse中获取对象的值`GSON`：

`oPoints = gson.fromJson( jsonString, ClassMultiPoints.class);`

我尝试使用`oPoints.message`.

当我在没有`proguard`应用程序运行成功的情况下运行我的应用程序时。`proguard`当我在应用程序崩溃时运行我的应用程序时。

我认为问题是：将我的班级的`proguard`属性重命名`'oPoints.message'`为 short `'a'`。

我尝试保持方法和属性的名称不变，但`proguard`重命名它：

`proguard.cfg:`

```
-injars      bin/classes
-injars      libs
-outjars     bin/classes-processed.jar
-dontpreverify
-repackageclasses ''
-allowaccessmodification
-optimizations !code/simplification/arithmetic
-keepattributes *Annotation*
-dontskipnonpubliclibraryclasses
-optimizationpasses 5
-printmapping map.txt
-flattenpackagehierarchy

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.MapActivity
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider

-libraryjars  libs/commons-io-2.2.jar
-libraryjars  libs/ftp4j-1.7.1.jar
-libraryjars  libs/gson-2.2.2.jar

-keep public class org.apache.commons.io.**
-keep public class it.sauronsoftware.ftp4j.**
-keep public class com.google.gson.**

-keep public class com.mypackagename.ActivityMonitor$*

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.content.Context {
   public void *(android.view.View);
   public void *(android.view.MenuItem);
}

-keepclassmembers class * implements android.os.Parcelable {
    static android.os.Parcelable$Creator CREATOR;
}

-keepclassmembers class **.R$* {
    public static <fields>;
} 
```

保留我的一个（静态）类的方法和属性名称的正确方法是什么？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-03-18T12:03:35.940

如果您不希望您的班级成员被混淆，请使用`SerializedName`Gson 提供的注释。例如：

```
public class ClassMultiPoints
{
   @SerializedName("message")
   public String message;
   @SerializedName("data")
   public List<ClassPoints> data;

   ...

} 
```

此外，请确保您也为 Gson 库添加了正确的 proguard 配置。例如：

```
##---------------Begin: proguard configuration for Gson ----------
# Gson uses generic type information stored in a class file when working with
#fields. Proguard removes such information by default, so configure it to keep
#all of it.
-keepattributes Signature

# For using GSON @Expose annotation
-keepattributes *Annotation*

# Gson specific classes
-keep class sun.misc.Unsafe { *; }
#-keep class com.google.gson.stream.** { *; }

# Application classes that will be serialized/deserialized over Gson
-keep class com.google.gson.examples.android.model.** { *; }

##---------------End: proguard configuration for Gson ---------- 
```

有关更多信息，请阅读[此](http://code.google.com/p/google-gson/source/browse/trunk/examples/android-proguard-example/proguard.cfg)。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-18T13:21:15.660

谢谢瓦卡斯！

我为我的情况找到了解决方案：

```
-optimizationpasses 5
-dump class_files.txt
-printseeds seeds.txt
-printusage unused.txt
-printmapping mapping.txt
-optimizations !code/simplification/arithmetic,!field/*,!class/merging*/
-allowaccessmodification
-repackageclasses ''

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.MapActivity
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider

-libraryjars  libs/commons-io-2.2.jar
-libraryjars  libs/gson-2.2.2.jar
-keep public class org.apache.commons.io.**
-keep public class com.google.gson.**
-keep public class com.google.gson.** {public private protected *;}

##---------------Begin: proguard configuration for Gson ----------
-keepattributes *Annotation*,Signature
-keep class com.mypackage.ActivityMonitor.ClassMultiPoints.** { *; }
-keep public class com.mypackage.ActivityMonitor$ClassMultiPoints     { public protected *; }
-keep public class com.mypackage.ActivityMonitor$ClassMultiPoints$ClassPoints { public protected *; }
-keep public class com.mypackage.ActivityMonitor$ClassMultiPoints$ClassPoints$ClassPoint { public protected *; }
# To support Enum type of class members
-keepclassmembers enum * { *; } 
##---------------End: proguard configuration for Gson ---------- 
```

另外，我不在`@SerializedName("message")`课堂上使用，上面的配置无需序列化即可正常工作。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-02-20T16:47:31.910

我还发现`-keepclassmembers`在使用 Dexguard 的优化选项时我需要这样做。没有这个，我的几个模型对象无法反序列化

```
##---------------Begin: proguard configuration for Gson  ----------
# Gson uses generic type information stored in a class file when working with fields. Proguard
# removes such information by default, so configure it to keep all of it.
-keepattributes Signature

# For using GSON @Expose annotation
-keepattributes *Annotation*

# Application classes that will be serialized/deserialized over Gson, keepclassmembers
-keep class com.myapp.model.** { *; }
-keepclassmembers class com.myapp.model.** { *; } 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-08-19T23:12:41.043

如果你`@Expose`像我一样使用注解，你可以告诉 ProGuard 保留任何用它注解的字段：

```
# keep anything annotated with @Expose
-keepclassmembers public class * {
    @com.google.gson.annotations.Expose *;
}
# Also keep classes that @Expose everything
-keep @com.google.gson.annotations.Expose public class * 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-10-07T12:51:13.603

要从混淆中排除您的类，请保留 InnerClasses 的属性，保留您的类并保留该类的类成员，例如。

```
-keepattributes InnerClasses
 -keep class com.yourproject.YourClass**
 -keepclassmembers class com.yourproject.YourClass** {
    *;
 } 
```

更多信息[http://proguard.sourceforge.net/manual/examples.html](http://proguard.sourceforge.net/manual/examples.html)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-08-01T05:00:19.907

您使用的是内置`@Keep`注释，请参考此[链接](https://developer.android.com/studio/build/shrink-code.html#keep-code)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-05T01:28:50.340

Proguard 6.1 无法处理库中带有泛型的接口。在此处查看错误报告： [https ://sourceforge.net/p/proguard/bugs/765/](https://sourceforge.net/p/proguard/bugs/765/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-01-14T15:21:13.363

您可以在所有请求类型类中跳过混淆

```
open class Request
data class Example(val name: String) : Request() 
```

## proguard-rules.pro

```
-keepclassmembers class * extends <your-package-name>.util.ws.Request { *; } 
```

总帐

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-11-17T00:28:31.297

该线程已经有惊人的答案，但是不要忘记添加

```
-keep public class * extends java.lang.Exception 
```

否则，当您在 firebase 上看到它们时，所有的崩溃都会被混淆。

在此处查看官方文档：[https ://firebase.google.com/docs/crashlytics/get-deobfuscated-reports?platform=android](https://firebase.google.com/docs/crashlytics/get-deobfuscated-reports?platform=android)

# playframework - 使用 MySQL 在 Cloudbees 上播放 2.1：未找到合适的驱动程序

> ID：15476317
> 
> 赞同：0
> 
> 时间：2013-03-18T11:59:43.253
> 
> 标签：playframework, cloudbees, playframework-2.1

我无法让我的应用程序使用 Cloudbees 连接到数据库。

我的配置文件中有：

```
# Database configuration
# ~~~~~ 
db.default.driver=${MYSQL_DRIVER}
db.default.url=${MYSQL_URL_DB}
db.default.user=${MYSQL_USERNAME_DB}
db.default.password=${MYSQL_PASSWORD_DB} 
```

在 Cloudbees 配置中，我有：

```
$ bees config:list -a me/my-app
Application Parameters:
  proxyBuffering=false
  MYSQL_URL_DB=jdbc:cloudbees://my-app
  MYSQL_USERNAME_DB=my-app
  MYSQL_PASSWORD_DB=dadadadada
  MYSQL_DRIVER=com.mysql.jdbc.Driver
Runtime Parameters:
  java_version=1.7 
```

读到这里，似乎驱动程序实际上已被声明。依赖项在我的 Build.scala 中：

```
 val appDependencies = Seq(
    javaCore, 
    javaJdbc, 
    javaEbean,
    "mysql" % "mysql-connector-java" % "5.1.22"
  ) 
```

但一开始，我得到：

```
Caused by: 
    java.sql.SQLException: No suitable driver found for 
    mysql://ec2-23-21-211-172.compute-1.amazonaws.com:3306/my-app 
```

我觉得我错过了阅读文档但找不到什么...

谢谢，

**编辑：您可以在**[Github](https://github.com/adericbourg/proto-poll/ "Github")上找到我的测试应用程序。赏金是给将管理在 Cloudbees 上部署它的人（并解释如何）。Cloudbees 配置未在 Github 上提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:33:39.163

我建议您尝试使用 mysql 5.1.18 连接器。我在 CloudBees 中有一个应用程序，并且可以很好地使用该连接器。还可以尝试使用本地数据库，以更轻松地查看问题所在。

这是我的**Build.scala**

```
val appDependencies = Seq(
    // Add your project dependencies here,
    javaCore,
    javaJdbc,
    javaEbean,
    "mysql" % "mysql-connector-java" % "5.1.18"
  )

  val main = play.Project(appName, appVersion, appDependencies)
    .settings(cloudBeesSettings :_*)
    .settings(CloudBees.applicationId := Some("project_test")) 
```

如果此连接器没有解决问题，请尝试在**application.conf**中进行下一步配置（特别注意 db.default.url 中的数据库的用户名和密码。）。

```
db.default.driver=com.mysql.jdbc.Driver
db.default.url="mysql://dbusername:dbpassword@localhost/DATABASE_NAME"
db.default.user=dbusername
db.default.password=dbpassword 
```

对我来说很好。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T16:19:54.863

这里的问题是 Cloudbees 应用程序参数（您使用 设置`bees config:set`的参数）会覆盖您在文件左侧设置的参数`conf/application.conf`。

所以在这种情况下，您不必设置`MYSQL_URL_DB`为 Cloudbees 应用程序参数，而是直接`db.default.url`

试试看嘛：

```
bees config:set -a seo-machine -P db.default.url=jdbc:mysql://ec2-23-21-211-172.compute-1.amazonaws.com:3306/my-app 
```

并重新启动您的应用程序：

```
bees app:restart 
```

也不要忘记在 JDBC URL 前加上`jdbc:`- only`mysql://ec2-23-21-211-172.compute-1.amazonaws.com:3306/my-app`作为 URL 是不够的

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T16:59:17.207

嘿，我现在刚刚解决了这个问题。:)

您需要将 mysql_url 更改为

MYSQL_URL_DB=jdbc:mysql://host:3306/my-app

问题是它的默认 url 指向 cloudbees 驱动程序，由于我们使用的是 mysql 驱动程序，我们需要将其更改为 mysql url。

# mysql - mysql存储函数简单登录，从集合中提取int

> ID：15476324
> 
> 赞同：1
> 
> 时间：2013-03-18T12:00:03.040
> 
> 标签：mysql, stored-functions

这是我的第一个 mySQL 存储函数，因为我一直用 php 管理这些事情。我想要一个检查用户是否可以登录我的客户区的功能。我写了上面的代码：

```
DELIMITER $$

CREATE FUNCTION `A05`.`login` (user VARCHAR(64),pass VARCHAR(64)) RETURNS INT
BEGIN
    declare num_rows int;
    declare id int;
    SELECT (@num_rows:=COUNT(*)),(@id:=`Credential_id`) FROM `A05`.`Credentials` where `Credential_UserName` = user;    
    if num_rows = 0 then
        -- user not present
        return (-1);
    end if;
    -- user present, checking password
    SELECT (@num_rows:=COUNT(*)),(@id:=`Credential_id`) FROM `A05`.`Credentials` where `Credential_id` = id AND `Credential_PASSWORD` = SHA1(pass); 
    if num_rows = 0 then
        -- user presente, password incorrect
        INSERT INTO  `a05`.`Events` (
            `Event_id` ,
            `Event_RegistrationDate` ,
            `Event_VariationDate` ,
            `Event_State`,
            `Event_Notes`,
            `Event_SenderId`,
            `Event_Type`
        )
        VALUES (
            NULL ,  NOW(),  NOW(), 'wp', NULL, id, 1
        );
        return (-2);
    end if;
    -- user present, password correct
    UPDATE `A05`.`Credentials` SET `Credential_LastAccess`=NOW() where `Credential_id` = id;
    INSERT INTO  `a05`.`Events` (
        `Event_id` ,
        `Event_RegistrationDate` ,
        `Event_VariationDate` ,
        `Event_State`,
        `Event_Notes`,
        `Event_SenderId`,
        `Event_Type`
    )
    VALUES (
        NULL ,  NOW(),  NOW(), 'ok', NULL, id, 0
    );
    return id;
END 
```

我认为语法应该是正确的，除了最后一个语句 return id 因为我返回一个集合而不是一个整数。问题是，当我尝试将此函数存储在 mysql 上时，出现此错误：

```
Error 1415: Not allowed to return a result set from a function 
```

然后我将最后一条语句从“return id”更改为“return 0”以进行测试，但我一直收到同样的错误。可能是一个新手错误，因为这是我第一次使用 sql“高级”脚本。非常感谢您！

# maple - 如何检查矩阵列表是否包含 Maple 中的给定矩阵

> ID：15476327
> 
> 赞同：0
> 
> 时间：2013-03-18T12:00:10.627
> 
> 标签：maple

我在 Maple 中遇到了一些问题。

如果我有一个矩阵：

```
Matrix1 := Matrix(2, 2, {(1, 1) = 31, (1, 2) = -80, (2, 1) = -50, (2, 2) = 43}); 
```

我想确定它是否在以下列表中：

```
MatrixList := [Matrix(2, 2, {(1, 1) = 31, (1, 2) = -80, (2, 1) = -50, (2, 2) = 43}), Matrix(2, 2, {(1, 1) = -61, (1, 2) = 77, (2, 1) = -48, (2, 2) = 9})]; 
```

我做了以下事情：

```
evalb(Matrix1 in MatrixList); 
```

但得到了“假”。

> 为什么？然后我如何制作一个程序来决定矩阵是否包含在矩阵列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:41:17.943

这是比 DrC 便宜得多的方法

**ormap(LinearAlgebra:-Equal, MatrixList, Matrix1)**

# sharepoint-2010 - 共享点错误当前模拟标题未找到

> ID：15476328
> 
> 赞同：0
> 
> 时间：2013-03-18T12:00:12.607
> 
> 标签：sharepoint-2010

我已经在我的 2008 Windows 服务器上安装了 sharepoint 服务器环境。当我尝试访问这些地址时，我还配置了一个 Web 应用程序并在 http:/myserver/mysite 上创建了一个网站集，我遇到了这个我无法修复的错误:(

*错误找不到键为“current_simulation_title”的资源对象。解决 Microsoft SharePoint Foundation 的问题。相关 ID：907ae95c-b96e-462b-9d11-74646938990e 日期和时间：2013 年 3 月 18 日下午 12:40:10*

PS：sp 中央管理位于 http://myserver:40000/

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:07:39.547

这个错误的意思是，Sharepoint找不到资源键“current_simulation_title”，你是否创建了任何资源文件并上传到sharepoint 14 hive？

# javascript - 在Javascript中调用函数时使用“（）”的优缺点？

> ID：15476329
> 
> 赞同：3
> 
> 时间：2013-03-18T12:00:19.303
> 
> 标签：javascript, methods, invoke

很多地方都有关于 JavaScript 方法“调用”和“应用”的解释。但是，我找不到任何关于使用`()`. 例如：

```
var a = function(arg){  
    //arg.call();
    //arg.apply();
    //arg();
}

var myParam = function() {
    //do someting 
}

var instance = new a(myParam); 
```

我应该使用哪种方式？调用方法的缺点是什么`()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:51:24.557

## 选项

调用函数有三种方式。

```
Direct: myFunction(Object arg1, Object arg2, ...);
Call:   myFunciton.call(Object this, Object arg1, Object arg2, ...);
Apply:  myFunction.apply(Object this, Array args); 
```

每个都有自己的特点。`call()`唯一的缺点`apply()` *可能*是它们的性能很差。经过一些研究，结果发现它们比直接调用函数要慢一点。虽然如此之少，甚至不值得考虑。

## 选什么？

因为没有很大的缺点，我们可以只看*优点*来选择方法。这意味着，比较功能并选择适合您的情况。

## `.call();`

与直接调用函数不同，`.call()`允许您设置`this`关键字。除此之外，它实际上是相同的。那么为什么要设置`this`关键字呢？看看下面的例子。

```
var element = document.getElementById('my-element');

doSomething(element, function(success) {
    if(success) {
        // something succeeded!

        // because I passed "element" as "this",
        // I can use "this" to do more stuff with "element"
        this.style.display = 'none';
    }
});

function doSomething(element, callback) {
    // do something with element

    // I'm done, let's call the callback
    callback.call(element, success);
} 
```

如您所见，`this`回调参数中的 指的是我们一直在使用的元素。这就是我们喜欢使用的`this`原因，因为……它是有道理的！尤其是当您使用对象时。

## `.apply();`

就像`.call()`直接调用函数非常相似，`.apply()`带有另一个特性。可以使用数组来定义参数，而不是允许程序员定义一组参数。这使您可以拥有动态数量的参数。

您可能熟悉`Math.max()`. 此函数接受未定义数量的参数，并返回最大的数字。

```
Math.max(1, 2, 3); // 3
Math.max(1, 3, 2); // 3
Math.max(1, 2, 3, 2, 3, 1, 2, 3); // 3 
```

如果我们有一个数字数组，也许来自一个提要，我们想得到最大的数字怎么办？这显然会起作用：

```
var numbers = [1, 6, 2, 8, 10, 6, 13, 5, 2, 8, 7, 75, 23, 7, 12, 75];

// Prepare "max"
// Anything is greater than -Infinity
var max = -Infinity;

// Loop through all numbers
for(var i = 0; i < numbers.length; i++) {
    // Compare current number with existing max
    max = Math.max(max, numbers[i]);
} 
```

您正在浪费宝贵的时间循环所有数字，而您可以让本机代码为您完成。这就是`.apply()`派上用场的地方。虽然我们有能力设置`this`,`Math.max()`不使用`this`关键字，所以我们可以丢弃它并使用它`null`。数组中有多少元素并不重要。

```
var numbers = [1, 6, 2, 8, 10, 6, 13, 5, 2, 8, 7, 75, 23, 7, 12, 75];
var max = Math.max.apply(null, numbers); // Apply all array elements as an own argument 
```

## 结论

这些方法中的任何一种都没有（明显的）缺点。做任何看起来最适合这种情况或你最喜欢的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:08:56.483

如果您不需要`.call`或`.apply`提供的“功能”，即设置`this`或传递参数数组，则无需使用它们。

用 just 调用函数`()`是调用函数的“正常”方式。

# c++ - 派生专门的模板类

> ID：15476330
> 
> 赞同：0
> 
> 时间：2013-03-18T12:00:19.127
> 
> 标签：c++, templates, derived-class, derived

我对模板类的派生有疑问。以下代码片段将显示我的问题：

```
class object {
}

template <class T>
class container {
public:
    cotainer(void) {
        // do some work
    }
}

template <class in, class out>
class stage {
private:
    container<in> *input;
    container<out> *output;
public:
    stage(bool input, container<out> *output) {
        // do some other work
    }
} 
```

在那之后，我想从舞台上衍生出来。如果派生类也是一个模板类，例如：

```
template <class T>
class derived : public stage<T, T> {
public:
    derived(container<T> *output) : stage<T, T>(false, output) {}
} 
```

但是，如果派生类是阶段的专门化，我会得到一个错误。

```
class derived : public stage<object, object> {
public:
    derived(container<object> *output) : stage<object, object>(false, output) {}
} 
```

错误是，编译器没有找到 stage 的构造函数。

```
undefined reference to `stage<object, object>::stage(bool, container<object>*)' 
```

我该如何解决这个问题？

# java - 带有 Cusror 适配器的 Listview 不显示任何内容

> ID：15476331
> 
> 赞同：0
> 
> 时间：2013-03-18T12:00:23.463
> 
> 标签：java, android, simplecursoradapter

在我的 android 应用程序中，我从 SQLite 数据库中读取了一些数据并尝试将其显示到列表视图中。这是我的代码：

```
ListView listContent;
SQLiteAdapterno nadapter;
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
setContentView(R.layout.ofrnumber);
listContent=(ListView)findViewById(R.id.listView1);
nadapter=new SQLiteAdapterno(this);
nadapter.openToRead();
Cursor c=nadapter.queueAll();
String[] from = new String[]{SQLiteAdapterno.KEY_ID, SQLiteAdapterno.KEY_RCODE, SQLiteAdapterno.KEY_RNAME,SQLiteAdapterno.KEY_OFNO};
int[] to = new int[]{R.id.id,R.id.text1,android.R.id.text2,android.R.id.text2};
SimpleCursorAdapter  cursorAdapter =new SimpleCursorAdapter(this, R.layout.row,c, from, to);
listContent.setAdapter(cursorAdapter);
} 
```

SQLiteAdapterno:

```
public class SQLiteAdapterno {

public static final String MYDATABASE_NAME2 = "MY_DATABASEOFRN";
public static final String MYDATABASE_TABLE2 = "MY_OFFERNO";
public static final int MYDATABASE_VERSION = 1;
public static final String KEY_RCODE = "rcode";
public static final String KEY_OFNO = "ofno";
public static final String KEY_RNAME = "rname";
public static final String KEY_ID = "_id";

private static final String SCRIPT_CREATE_DATABASE1 =
          "create table " + MYDATABASE_TABLE2 + " ("
          + KEY_ID +" integer primary key autoincrement, "
          + KEY_RCODE + " text, "
          + KEY_RNAME + " text, "
          + KEY_OFNO + " text);";

private SQLiteHelper sqLiteHelper;
private  SQLiteDatabase sqLiteDatabase;
private Context context;
public SQLiteAdapterno(Context c)
{
    context=c;
}
public SQLiteAdapterno openToRead() throws android.database.SQLException {
      sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME2, null, MYDATABASE_VERSION);
      sqLiteDatabase = sqLiteHelper.getReadableDatabase();
      return this; 
     }
public SQLiteAdapterno openToWrite() throws android.database.SQLException {
      sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME2, null, MYDATABASE_VERSION);
      sqLiteDatabase = sqLiteHelper.getWritableDatabase();
      return this; 
     }
public void close(){
      sqLiteHelper.close();
     }
public long insert(String rcode, String rname, String ofno){
      ContentValues contentValues = new ContentValues();
      contentValues.put(KEY_RCODE, rcode);
      contentValues.put(KEY_RNAME, rname);
      contentValues.put(KEY_OFNO, ofno);
      return sqLiteDatabase.insert(MYDATABASE_TABLE2, null, contentValues);
     }
public  Cursor queueAll(){
      String[] columns = new String[]{KEY_ID, KEY_RCODE, KEY_RNAME, KEY_OFNO};
      Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE2, columns,
        null, null, null, null, null);
      return cursor;
     }
public int deleteAll(){
      return sqLiteDatabase.delete(MYDATABASE_TABLE2, null, null);
     } 
```

我没有找到结果，它没有在 Listview 中显示任何项目。有人能说出这段代码中的错误是什么以及如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:04:57.347

代码看起来不错。很可能你`Cursor`是空的。尝试添加简单的条件：

```
Cursor c = nadapter.queueAll();
if (c != null && c.getCount() > 0) {
   // set Adapter
}
else {
   Toast.makeText(this, "Cursor is empty", Toast.LENGTH_SHORT).show();
} 
```

如果将显示 Toast，则您的`getAll()`方法不会返回任何数据。

```
public  Cursor queueAll(){
   String[] columns = new String[] {KEY_ID, KEY_RCODE, KEY_RNAME, KEY_OFNO};
   Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE2, columns,
        null, null, null, null, null);
   return cursor;
} 
```

这是问题。

# serialization - java.lang.NullPointerException 使用 MRUnit。自定义密钥序列化错误

> ID：15476332
> 
> 赞同：2
> 
> 时间：2013-03-18T12:00:35.393
> 
> 标签：serialization, hadoop, nullpointerexception, mapreduce, mrunit

我正在尝试使用 MRUnit 测试一个简单的 MapReduce 项目。我为 mapDriver 设置输入，然后调用`mapDriver.runTest()`（我也尝试过`mapDriver.run()`但产生相同的错误）。

我编写了一个自定义键，它重载了`write(DataOutput out)`,`readFields(DataInput in)`和`compareTo(...)`方法。调试时，Key 使用`write(DataOutput out)`. 但是，在键的`readFields(DataInput in)`方法（正确检索先前使用 写入的数据`write(DataOutput out)`）完成后，将引发以下错误。

我在这里搜索了类似的帖子，并尝试覆盖`hashCode()`and`equals()`方法无济于事。使用自定义键时，MRUnit 是否需要覆盖任何其他方法？[这篇文章与序列化中带有 Avro NullPointerException 的 MRUnit](https://stackoverflow.com/questions/15230482/mrunit-with-avro-nullpointerexception-in-serialization)最相似。但是，我没有使用 avro，据我所知，我使用的是默认序列化。干杯!

```
java.lang.NullPointerException
at org.apache.hadoop.mrunit.Serialization.copy(Serialization.java:61)
at org.apache.hadoop.mrunit.Serialization.copy(Serialization.java:81)
at org.apache.hadoop.mrunit.mapreduce.mock.MockContextWrapper$4.answer(MockContextWrapper.java:78)
at org.mockito.internal.stubbing.StubbedInvocationMatcher.answer(StubbedInvocationMatcher.java:31)
at org.mockito.internal.MockHandler.handle(MockHandler.java:97)
at org.mockito.internal.creation.MethodInterceptorFilter.intercept(MethodInterceptorFilter.java:47)
at org.apache.hadoop.mapreduce.Mapper$Context$$EnhancerByMockitoWithCGLIB$$f555e120.write(<generated>)
at model.RMSEEvaluation$Mapper.map(RMSEEvaluation.java:57)
at model.RMSEEvaluation$Mapper.map(RMSEEvaluation.java:1)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
at org.apache.hadoop.mrunit.mapreduce.MapDriver.run(MapDriver.java:221)
at org.apache.hadoop.mrunit.MapDriverBase.runTest(MapDriverBase.java:150)
at org.apache.hadoop.mrunit.TestDriver.runTest(TestDriver.java:137)
at test.TestRMSEEvaluation.testSetValues(TestRMSEEvaluation.java:77)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at junit.framework.TestCase.runTest(TestCase.java:168)
at junit.framework.TestCase.runBare(TestCase.java:134)
at junit.framework.TestResult$1.protect(TestResult.java:110)
at junit.framework.TestResult.runProtected(TestResult.java:128)
at junit.framework.TestResult.run(TestResult.java:113)
at junit.framework.TestCase.run(TestCase.java:124)
at junit.framework.TestSuite.runTest(TestSuite.java:243)
at junit.framework.TestSuite.run(TestSuite.java:238)
at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:25:26.610

我找到了解决此错误的方法。错误是因为未在`Configuration`for中设置序列化类型`MapDriver mapDriver`。我必须使用以下内容显式设置序列化：

```
Configuration conf = new Configuration();
conf.set("io.serializations","org.apache.hadoop.io.serializer.JavaSerialization," 
            + "org.apache.hadoop.io.serializer.WritableSerialization");
mapDriver.setConfiguration(conf); 
```

希望这可以帮助任何有类似问题的人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:45:05.937

首先，值得[测试](https://stackoverflow.com/a/13288750/1050422)序列化/反序列化是否真的按预期工作。
在不知道您如何编写测试的情况下，以下简单的测试适用于[MRUnit 0.9.0-incubating](http://mrunit.apache.org/)和 JUnit 4.10：

```
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import junit.framework.Assert;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mrunit.mapreduce.MapDriver;
import org.apache.hadoop.mrunit.mapreduce.MapReduceDriver;
import org.apache.hadoop.mrunit.mapreduce.ReduceDriver;
import org.apache.hadoop.mrunit.types.Pair;
import org.junit.Before;
import org.junit.Test;

public class TestCustom {

    private MapDriver<CustomRecord, Text, CustomRecord, Text> mapDriver;

    private Mapper<CustomRecord, Text, CustomRecord, Text> map = 
        new Mapper<CustomRecord, Text, CustomRecord, Text>();

    private Reducer<CustomRecord, Text, CustomRecord, Text> reduce = 
        new Reducer<CustomRecord, Text, CustomRecord, Text>();

    private ReduceDriver<CustomRecord, Text, CustomRecord, Text> reduceDriver
        = ReduceDriver.newReduceDriver(reduce);

    private MapReduceDriver<CustomRecord, Text, CustomRecord, 
      Text, CustomRecord, Text> mapReduceDriver;

    private Configuration conf = new Configuration();

    //test data
    private Pair<CustomRecord, Text> data;

    //shuffled and sorted data
    private static List<Pair<CustomRecord, List<Text>>> shuffledData; 

    @Before
    public void init() {

        mapDriver = MapDriver.newMapDriver(map);
        mapReduceDriver = MapReduceDriver.newMapReduceDriver(map, reduce);
        mapDriver.withConfiguration(conf);
        initData();
    }

    private void initData() {

        CustomRecord key = new CustomRecord("first", 1);
        Text value = new Text("key1");
        data = new Pair<CustomRecord, Text>(key, value);
    }

    @Test
    public void testMapper() throws IOException {

        mapDriver.withInput(data);
        //expected output result
        mapDriver.withOutput(data); 
        mapDriver.runTest(true);

        //shuffle and sort
        List<Pair<CustomRecord, Text>> pairs = 
          new ArrayList<Pair<CustomRecord, Text>>();
        pairs.add(data);

        shuffledData = mapReduceDriver.shuffle(pairs);

    }

    @Test
    public void testReducer() throws IOException {

        // feed input to one single reduce call
        Pair<CustomRecord, List<Text>> pair = shuffledData.get(0);
        reduceDriver.withInput(pair.getFirst(), pair.getSecond());

        //reducer's output
        List<Pair<CustomRecord, Text>> result = reduceDriver.run();

        Assert.assertEquals("Key mismatch!", 
          data.getFirst(), result.get(0).getFirst());
        Assert.assertEquals("Value mismatch!", 
          data.getSecond(), result.get(0).getSecond());
    }
} 
```

*它使用自定义 Writable 作为键 ( CustomRecord* )测试身份映射器和化简器。
请注意，该键实现了[WritableComparable](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/io/WritableComparable.html)，并覆盖了 hashCode 和 equals。

# iphone - 在 iPhone 中摇动时将应用程序置于前台

> ID：15476339
> 
> 赞同：-5
> 
> 时间：2013-03-18T12:00:55.633
> 
> 标签：iphone, ios5, shake, background-foreground

该应用程序正在后台运行。我希望当有人摇动 iPhone 时，应用程序应该从后台进入前台。有没有办法以编程方式做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:02:09.727

不，这不可能发生。当您的应用程序在 BG 中时，您没有任何控制权。

# php - phplist 不工作

> ID：15476344
> 
> 赞同：0
> 
> 时间：2013-03-18T12:01:01.993
> 
> 标签：php, phplist

我已经下载了 phplist-2.10.19 并安装在我的服务器上。完成所有配置设置后。它在主要网址上运行良好。

喜欢：[http ://www.xxxxxxxxx.com/phplist/public_html/lists/](http://www.xxxxxxxxx.com/phplist/public_html/lists/)

但是，当我尝试将此罚款包含在另一个文件中时，它会向我显示以下错误：

> 错误，找不到配置文件

以下是该文件的代码。

```
<html>
<title>Test</title>
<head>
</head>
<body>
<?php include_once('../phplist/public_html/lists/index.php');?>
</body></html> 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-12-19T06:32:40.193

你可以试试这个代码。

```
<html>
<title>Test</title>
<head>
</head>
<body>
<?php include_once('phplist/public_html/lists/index.php');?>
</body></html> 
```

# ios - 如何获取文件夹和文件的列表 Google Drive API IOS？

> ID：15476348
> 
> 赞同：2
> 
> 时间：2013-03-18T12:01:05.663
> 
> 标签：ios, objective-c, google-drive-api

我想使用谷歌驱动器 API 从我的谷歌驱动器获取所有文件和文件夹名称。

我的查询是这样的：

```
 GTLQueryDrive *query = [GTLQueryDrive queryForFilesList];

    query.q = @"";
     //or i also use this code

  query.q = @"mimeType = 'text/plain'"; 
```

甚至我也尝试过这段代码：

```
-(void)getFileListFromSpecifiedParentFolder {
    GTLQueryDrive *query2 = [GTLQueryDrive queryForChildrenListWithFolderId:@"root"];
    query2.maxResults = 1000;

    // queryTicket can be used to track the status of the request.
    [self.driveService executeQuery:query2
                  completionHandler:^(GTLServiceTicket *ticket,
                                      GTLDriveChildList *children, NSError *error) {
                      NSLog(@"\nGoogle Drive: file count in the folder: %d", children.items.count);
                      //incase there is no files under this folder then we can avoid the fetching process
                      if (!children.items.count) {
                          return ;
                      }

                      if (error == nil) {
                          for (GTLDriveChildReference *child in children) {

                              GTLQuery *query = [GTLQueryDrive queryForFilesGetWithFileId:child.identifier];

                              // queryTicket can be used to track the status of the request.
                              [self.driveService executeQuery:query
                                            completionHandler:^(GTLServiceTicket *ticket,
                                                                GTLDriveFile *file,
                                                                NSError *error) {

                                                NSLog(@"\nfile name = %@", file.originalFilename);
                                            }];
                          }
                      }
                  }];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-14T02:01:12.063

```
-(void)fetchGoogleDriveFileListWithfolderId:(NSString *)folderId
    :(void (^)(NSMutableArray *, NSError*))completionBlock
{
    GTLQueryDrive *query = [GTLQueryDrive queryForFilesList];
    query.q =[NSString stringWithFormat:@"'%@' in parents and trashed=false", folderId];

    GTLServiceTicket *ticketListing = [self.driveService
        executeQuery:query completionHandler:^(GTLServiceTicket *ticket,GTLDriveFileList *files, NSError *error)
    {
        NSMutableArray *mainArray=[[NSMutableArray alloc]init];

        if (error == nil)
        {
            completionBlock(files.items,nill);
        }
        else
        {
            NSLog(@"An error occurred: %@", error);
            completionBlock(nil,error);
        }
    }];
} 
```

这里 `query.q =[NSString stringWithFormat:@"'%@' in parents and trashed=false", folderId];`

folderId 可能是“root”（对于根文件夹），sharedWithMe（对于共享文件夹）。如果要列出已删除的文件，请更改已删除的=true。

# python - Python：UnboundLocalError：赋值前引用的局部变量

> ID：15476353
> 
> 赞同：0
> 
> 时间：2013-03-18T12:01:09.437
> 
> 标签：python

我在 Python 线程（服务器）中有一段代码，但是当我运行客户端时，发现了这些错误：“UnboundLocalError: local variable 'stop' referenced before assignment”：

```
import threading
import msvcrt

stop = False
Buffer= 1024

class ChatServer(threading.Thread):
   def __init__(self,channel,addr,counter):
       self.channel = channel
       self.addr = addr
       self.counter = counter
       threading.Thread.__init__(self)
       self.start()

   def run(self):
       # press s to trigger
       if msvcrt.kbhit():
           if msvcrt.getch() == 's':
               stop = True
               print "Login is closed closed.\n"
       while 1:
           if (stop == False):
               print "\nClient connection received!\n"
               self.channel.send("Status: Server connection received")

counter = 0                   
server = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
server.bind(("",500))
server.listen(20)

while True:
    print "\nServer awaiting connections....\n"
    channel, addr = server.accept()
    counter += 1
    ChatServer(channel,addr,counter) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:02:57.890

`stop`您只在非常特定的条件下设置变量，而从不将其设置为`False`. `stop = False`在函数顶部添加显式`run()`。

```
def run(self):
   stop = False
   # press s to trigger
   if msvcrt.kbhit():
       if msvcrt.getch() == 's':
           stop = True
           print "Login is closed closed.\n"
   while 1:
       if (stop == False):
           print "\nClient connection received!\n"
           self.channel.send("Status: Server connection received") 
```

您*可能*希望在某个时候在循环`stop` *内*`while`设置，因为它现在永远不会停止，如果`stop = True`达到。

# javascript - 使用Jquery根据可放置对象的ID动态更改图像的src

> ID：15476359
> 
> 赞同：0
> 
> 时间：2013-03-18T12:01:23.000
> 
> 标签：javascript, jquery, html, image, drag-and-drop

我有点坚持如何根据带有 Jquery 的可放置对象的 ID 更改我的图像 src 的一部分。

我从网上尝试了这个和其他一些想法，但不幸的是没有奏效。如果我必须这么说，这很棘手。

```
ui.draggable['<img src= "images/kitchen/.img src" width="800" height="600"/>'].id 
```

目前我只能图像一次。

我想我应该做某种功能来执行 img src。

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Droppable - Revert draggable position</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<style>
#draggable, #draggable1 { width: 100px; height: 100px; padding: 0; float: left; margin: 10px 10px 10px 0; }
#droppable { width: 800px; height: 600px; padding: 0; float: left; margin: 10px; }
</style>
<script>
$(function() {
$( "#draggable" ).draggable({ revert: "valid" });
$( "#draggable1" ).draggable({ revert: "valid" });
$( "#droppable" ).droppable({
activeClass: "ui-state-hover",
hoverClass: "ui-state-active",
drop: function( event, ui ) {
$( this )
    .addClass( "ui-state-highlight" )
    .find( "div" )
    .html('<img src= "http://blakeloizides.co.za/sm/images/preview-images/kitchen/medium-cream-kitchen-preview.jpg" width="800" height="600"/>' + "Dropped! " + ui.draggable[0].id);

}
});
});
</script>
</head>
<body>
<div id="draggable" class="ui-widget-content">
<img src="http://blakeloizides.co.za/sm/images/gallery/img12.png" width="100" height="100">
</div>

<div id="draggable1" class="ui-widget-content">
<img src="http://blakeloizides.co.za/sm/images/gallery/img1.png" width="100" height="100">
</div>

<div id="droppable" class="ui-widget-header">
<div><img src="images/kitchen/kitchen-preview-cad.jpg" width="800" height="600"></div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:39:52.780

这应该工作

```
 <!doctype html>
            <html lang="en">
            <head>
            <meta charset="utf-8" />
            <title>jQuery UI Droppable - Revert draggable position</title>
            <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
            <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
            <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
            <style>
            #draggable, #draggable1 { width: 100px; height: 100px; padding: 0; float: left; margin: 10px 10px 10px 0; }
            #droppable { width: 800px; height: 600px; padding: 0; float: left; margin: 10px; }
            </style>
            <script>
            $(function() {
            $( "#draggable" ).draggable({ revert: "valid" });
            $( "#draggable1" ).draggable({ revert: "valid" });
            $( "#droppable" ).droppable({
            activeClass: "ui-state-hover",
            hoverClass: "ui-state-active",
            drop: function( event, ui ) {
            var dragElemId = ui.draggable[0].id;
            var imgPath = $('#' + dragElemId).attr("des-image");
            $( this )
                .find( ".drop-image" ).removeAttr("src").attr("src",imgPath);
            }
            });
            });
            </script>
            </head>
            <body>
            <div id="draggable" class="ui-widget-content" des-image="http://blakeloizides.co.za/sm/images/preview-images/kitchen/medium-cream-kitchen-preview.jpg">
            <img src="http://blakeloizides.co.za/sm/images/gallery/img12.png"  width="100" height="100">
            </div>

            <div id="draggable1" class="ui-widget-content" des-image="http://blakeloizides.co.za/sm/images/gallery/img12.png">
            <img src="http://blakeloizides.co.za/sm/images/gallery/img1.png"  width="100" height="100">
            </div>

            <div id="droppable" class="ui-widget-header">
            <div><img class="drop-image" src="images/kitchen/kitchen-preview-cad.jpg" width="800" height="600"></div>
            </div>
            </body>
            </html> 
```

# linux - 在 kubuntu 中安装软件

> ID：15476361
> 
> 赞同：-2
> 
> 时间：2013-03-18T12:01:30.813
> 
> 标签：linux, ubuntu, apt, apt-get, kubuntu

我最近安装了 kubuntu。我可以从 muon 软件中心安装软件。但是当我尝试从终端这样做时，我得到了错误。例如在尝试更新时，我得到：

```
Err http://archive.canonical.com quantal InRelease

Err http://archive.canonical.com quantal Release.gpg 
  Unable to connect to archive.canonical.com:http:
Err http://archive.ubuntu.com quantal InRelease      

Err http://archive.ubuntu.com quantal Release.gpg    
  Unable to connect to archive.ubuntu.com:http: [IP: 91.189.92.201 80]
Reading package lists... Done
W: Failed to fetch http://archive.ubuntu.com/ubuntu/dists/quantal/InRelease  

W: Failed to fetch http://archive.canonical.com/dists/quantal/InRelease  

W: Failed to fetch http://archive.canonical.com/dists/quantal/Release.gpg  Unable to connect to archive.canonical.com:http:

W: Failed to fetch http://archive.ubuntu.com/ubuntu/dists/quantal/Release.gpg  Unable to connect to archive.ubuntu.com:http: [IP: 91.189.92.201 80]

W: Some index files failed to download. They have been ignored, or old ones used instead. 
```

同样，当我尝试安装 git-core 时，我得到：

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following extra packages will be installed:
  git git-man liberror-perl
Suggested packages:
  git-daemon-run git-daemon-sysvinit git-doc git-el git-arch git-cvs git-svn
  git-email git-gui gitk gitweb
The following NEW packages will be installed:
  git git-core git-man liberror-perl
0 upgraded, 4 newly installed, 0 to remove and 0 not upgraded.
Need to get 6,704 kB of archives.
After this operation, 15.4 MB of additional disk space will be used.
Do you want to continue [Y/n]? y
Err http://archive.ubuntu.com/ubuntu/ quantal/main liberror-perl all 0.17-1
  Could not connect to archive.ubuntu.com:80 (91.189.92.202). - connect (111: Connection refused) [IP: 91.189.92.202 80]
Err http://archive.ubuntu.com/ubuntu/ quantal/main git-man all 1:1.7.10.4-1ubuntu1
  Unable to connect to archive.ubuntu.com:http: [IP: 91.189.92.202 80]
Err http://archive.ubuntu.com/ubuntu/ quantal/main git i386 1:1.7.10.4-1ubuntu1
  Unable to connect to archive.ubuntu.com:http: [IP: 91.189.92.202 80]
Err http://archive.ubuntu.com/ubuntu/ quantal/main git-core all 1:1.7.10.4-1ubuntu1
  Unable to connect to archive.ubuntu.com:http: [IP: 91.189.92.202 80]
Failed to fetch http://archive.ubuntu.com/ubuntu/pool/main/libe/liberror-perl/liberror-perl_0.17-1_all.deb  Could not connect to archive.ubuntu.com:80 (91.189.92.202). - connect (111: Connection refused) [IP: 91.189.92.202 80]
Failed to fetch http://archive.ubuntu.com/ubuntu/pool/main/g/git/git-man_1.7.10.4-1ubuntu1_all.deb  Unable to connect to archive.ubuntu.com:http: [IP: 91.189.92.202 80]
Failed to fetch http://archive.ubuntu.com/ubuntu/pool/main/g/git/git_1.7.10.4-1ubuntu1_i386.deb  Unable to connect to archive.ubuntu.com:http: [IP: 91.189.92.202 80]
Failed to fetch http://archive.ubuntu.com/ubuntu/pool/main/g/git/git-core_1.7.10.4-1ubuntu1_all.deb  Unable to connect to archive.ubuntu.com:http: [IP: 91.189.92.202 80]
E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing? 
```

我该如何处理。如果这很重要，我正在代理服务器后面使用互联网。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:05:16.197

您应该将代理配置添加到`/etc/apt/apt.conf`

```
Acquire::http::Proxy "http://proxy-ip-or-hostname:port"; 
```

例如：

```
Acquire::http::Proxy "http://192.168.0.1:3128"; 
```

或通过身份验证

```
Acquire::http::Proxy "http://user:pass@192.168.0.1:3128"; 
```

# django - Django-Haystack - 如何使用获取参数进行排序？

> ID：15476363
> 
> 赞同：0
> 
> 时间：2013-03-18T12:01:38.407
> 
> 标签：django, django-haystack

我需要能够像这样对索引中的数据进行排序：

```
http://mywebapp.com/search/?q=something&sort_by=points-desc 
```

换句话说，我需要在 URL 中传递“sort_by”的值。我试图搜索文档，但找不到任何示例。

有人可以就如何实现这一目标提供线索吗？

我正在使用 Django Haystack 2.0 和 SearchView()

有什么线索吗？

* * *

更新：干草堆搜索索引

```
class LinkViewIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    section = indexes.CharField(model_attr='section')
    section_id = indexes.CharField(model_attr='section_id')
    item_author_username = indexes.CharField(model_attr='item_author_username')
    title = indexes.CharField(model_attr='title')
    url = indexes.CharField(model_attr='url')
    url_image = indexes.CharField(model_attr='url_image')
    comments = indexes.CharField(model_attr='comments', null=True)
    comments_count = indexes.CharField(model_attr='comments_count')
    points = indexes.CharField(model_attr='points')
    date_inserted = indexes.DateTimeField(model_attr='date_inserted')

    def get_model(self):
    return LinkView

    def index_queryset(self, using=None):
    """Used when the entire index for model is updated."""
    return self.get_model().objects.filter(date_inserted__lte=datetime.datetime.now())  

class TextViewIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    section = indexes.CharField(model_attr='section')
    section_id = indexes.CharField(model_attr='section_id')
    item_author_username = indexes.CharField(model_attr='item_author_username')
    title = indexes.CharField(model_attr='title')
    texto = indexes.CharField(model_attr='texto')
    comments = indexes.CharField(model_attr='comments', null=True)
    comments_count = indexes.CharField(model_attr='comments_count')
    points = indexes.CharField(model_attr='points')
    date_inserted = indexes.DateTimeField(model_attr='date_inserted')

    def get_model(self):
    return TextView

    def index_queryset(self, using=None):
    """Used when the entire index for model is updated."""
    return self.get_model().objects.filter(date_inserted__lte=datetime.datetime.now())  

class OffTopicLinkViewIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    section = indexes.CharField(model_attr='section')
    section_id = indexes.CharField(model_attr='section_id')
    item_author_username = indexes.CharField(model_attr='item_author_username')
    title = indexes.CharField(model_attr='title')
    url = indexes.CharField(model_attr='url')
    url_image = indexes.CharField(model_attr='url_image')
    comments = indexes.CharField(model_attr='comments', null=True)
    comments_count = indexes.CharField(model_attr='comments_count')
    points = indexes.CharField(model_attr='points')
    date_inserted = indexes.DateTimeField(model_attr='date_inserted')

    def get_model(self):
    return OffTopicLinkView

    def index_queryset(self, using=None):
    """Used when the entire index for model is updated."""
    return self.get_model().objects.filter(date_inserted__lte=datetime.datetime.now()) 

class OffTopicTextViewIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    section = indexes.CharField(model_attr='section')
    section_id = indexes.CharField(model_attr='section_id')
    item_author_username = indexes.CharField(model_attr='item_author_username')
    title = indexes.CharField(model_attr='title')
    texto = indexes.CharField(model_attr='texto')
    comments = indexes.CharField(model_attr='comments', null=True)
    comments_count = indexes.CharField(model_attr='comments_count')
    points = indexes.CharField(model_attr='points')
    date_inserted = indexes.DateTimeField(model_attr='date_inserted')

    def get_model(self):
    return OffTopicTextView

    def index_queryset(self, using=None):
    """Used when the entire index for model is updated."""
    return self.get_model().objects.filter(date_inserted__lte=datetime.datetime.now()) 

class BusinessLinkViewIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    section = indexes.CharField(model_attr='section')
    section_id = indexes.CharField(model_attr='section_id')
    item_author_username = indexes.CharField(model_attr='item_author_username')
    title = indexes.CharField(model_attr='title')
    country = indexes.CharField(model_attr='country')
    localidades = indexes.CharField(model_attr='localidades')
    url = indexes.CharField(model_attr='url')
    url_image = indexes.CharField(model_attr='url_image')
    comments = indexes.CharField(model_attr='comments', null=True)
    comments_count = indexes.CharField(model_attr='comments_count')
    points = indexes.CharField(model_attr='points')
    date_inserted = indexes.DateTimeField(model_attr='date_inserted')

    def get_model(self):
    return BusinessLinkView

    def index_queryset(self, using=None):
    """Used when the entire index for model is updated."""
    return self.get_model().objects.filter(date_inserted__lte=datetime.datetime.now()) 

class BicycleAdViewIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    section = indexes.CharField(model_attr='section')
    section_id = indexes.CharField(model_attr='section_id')
    item_author_username = indexes.CharField(model_attr='item_author_username')
    title = indexes.CharField(model_attr='title')
    country = indexes.CharField(model_attr='country')
    city = indexes.CharField(model_attr='city')
    n_item_kind = indexes.CharField(model_attr='n_item_kind')
    n_bicycle_ad_condition = indexes.CharField(model_attr='n_bicycle_ad_condition')
    bicyclead_link_url = indexes.CharField(model_attr='bicyclead_link_url', null=True)
    bicyclead_link_url_image = indexes.CharField(model_attr='bicyclead_link_url_image', null=True)
    bicyclead_insite_image = indexes.CharField(model_attr='bicyclead_insite_image', null=True)    
    texto = indexes.CharField(model_attr='texto', null=True)
    telephone = indexes.CharField(model_attr='telephone', null=True)
    price = indexes.CharField(model_attr='price', null=True)
    n_bicycle_ad_payment_type = indexes.CharField(model_attr='n_bicycle_ad_payment_type', null=True)
    propriedades = indexes.CharField(model_attr='propriedades', null=True)
    comments = indexes.CharField(model_attr='comments', null=True)
    comments_count = indexes.CharField(model_attr='comments_count')
    points = indexes.CharField(model_attr='points')
    date_inserted = indexes.DateTimeField(model_attr='date_inserted')

    def get_model(self):
    return BicycleAdView

    def index_queryset(self, using=None):
    """Used when the entire index for model is updated."""
    return self.get_model().objects.filter(date_inserted__lte=datetime.datetime.now()) 
```

问题应该是。如何使用以下方式传递 GET 参数以按“points”或“date_inserted”排序：

```
http://mywebapp.com/search/?q=something&sort_by=points-desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:14:13.350

覆盖 haystack 的 get_queryset 方法并将排序字段添加到索引模型中，例如：

```
class LinkListView(ListView):
    context_object_name = “link”

    def get_queryset(self):
        sort = self.request.GET.get(‘sort_by’)
        if sort:
            return Link.published.filter().order_by('{0}'.format(sort))
        else:
            return Link.published.filter().order_by('-date_inserted') 
```

# git - 如何修复 SVN 中部分目录结构的分支到 Git 迁移

> ID：15476365
> 
> 赞同：1
> 
> 时间：2013-03-18T12:01:44.317
> 
> 标签：git, svn, import, branch, svn2git

我正在尝试将包含 Java EE 应用程序的 SVN 存储库转换为 Git 存储库。原始存储库包含 Java EE 项目的每个部分的文件夹，该文件夹在历史上已作为单独的项目进行维护。对于其中两个项目，还有一个“生产”分支（同样是两个单独的分支），每当新修订版进入生产主干时，就会合并到生产中。

当我将它导入一个单一的 git 存储库时（据我所知，这将是最佳实践），master 中的一切都很好，但是当我切换到一个分支时，我只会得到该分支的文件，而其他大多数文件夹和文件都会消失。

仓库布局：

```
/
trunk/
   project1/
   project2/
   project3/
   project4/
branches/
   project3-production-branch/
   project4-production-branch/
tags/ 
```

我找到了 Eric Gwin 关于这个问题的帖子，但我看不出有任何解决方案。[http://comments.gmane.org/gmane.comp.ide.eclipse.git/77](http://comments.gmane.org/gmane.comp.ide.eclipse.git/77)

我可能在这里忽略了一些非常基本的东西，但我确实担心唯一的解决方案是单独导入项目？关于如何导入整个 SVN-repo 并在 Git 中获得工作分支的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:50:36.493

## 初始情况

将其转换为单个存储库后，master（或trunk）中的目录结构如下所示：

```
project1/
project2/
project3/
project4/ 
```

第一次提交后的结构`project3-production-branch`看起来像这样：

```
project3/ 
```

或者直接包含project3的内容：

```
.project
src/
test/ 
```

这取决于从 Subversion 中复制分支的位置。

在第一种情况下，可以跳过下一步。

在这两种情况下，分支上的所有其他项目都已删除（您应该在第一次提交的差异中看到）并且需要恢复，请参阅第二步。

## 第 1 步：重写分支以将所有内容移动到子目录中（如果需要）

[请参阅filter-branch](http://git-scm.com/docs/git-filter-branch)中的示例“将整个树移动到子目录中”并仅在分支上执行，如下所示：

```
git filter-branch --index-filter \
    'git ls-files -s | sed "s-\t\"*-&project3/-" |
        GIT_INDEX_FILE=$GIT_INDEX_FILE.new \
            git update-index --index-info &&
     mv "$GIT_INDEX_FILE.new" "$GIT_INDEX_FILE"' \
     master..project3-production-branch 
```

## 步骤2：重写分支以恢复其他项目

在这一步中，我们要撤消在第一个分支提交中删除其他项目。这可以使用以下方法完成：

```
branch="project3-production-branch"
parent=`git merge-base $branch master` # or replace master with trunk if needed
paths="project1 project2 project4"
git filter-branch -f --index-filter \
"git reset -q $parent -- $paths" --tag-name-filter cat -- \
$parent..$branch 
```

对于来自分支的所有提交，它将其他路径重置为创建分支时所处的状态。

# oracle - 在 SELECT 语句中多个相互替换

> ID：15476368
> 
> 赞同：0
> 
> 时间：2013-03-18T12:01:55.547
> 
> 标签：oracle, plsql

我有一列有这样的 varchar2：..x...y...z..

> 我想将 x 替换为 1，将 y 替换为 2，将 z 替换为 3。

是否可以在 select 语句中多次替换来替换这些字符？

```
(select)

replace(varchar2, 'x', '1')
replace(varchar2, 'y', '2')
replace(varchar2, 'z', '3') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:29:18.597

或者如果适合您的需要，请使用 TRANSLATE 功能[http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions216.htm#SQLRF06145](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions216.htm#SQLRF06145)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:04:04.490

你的意思是这样的：

```
replace(replace(replace(varchar2, 'x', '1'), 'y', '2'), 'z', '3') 
```

# postgresql - 如何区分pltcl中的空字符串和空字符串？

> ID：15476370
> 
> 赞同：0
> 
> 时间：2013-03-18T12:02:04.150
> 
> 标签：postgresql, tcl

```
 set iNull 0
            set field_value [lindex [array get NEW $myfield] 1]
            if { [string length $field_value] == 0 } {
                set iNull 1
            } 
```

我已经编写了运行 pltcl8.5(postgres) 方法的触发器，这里我想检查空值和空白空间。我无法区分两者。注意：没有传递给此方法的参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:27:10.453

[pltcl 手册](http://www.postgresql.org/docs/current/static/pltcl-functions.html)涵盖了这一点。特别注意：

> 要检测特定参数是否为空，请使用函数`argisnull`。

# html - 将表单的“action”属性的值设置为索引页

> ID：15476373
> 
> 赞同：-3
> 
> 时间：2013-03-18T12:02:10.873
> 
> 标签：html, forms, coldfusion

我在处理我一直在创建的登录表单时注意到了一些事情，并且想知道是否有其他人以前发现过这个问题/问题。在创建表单并输入 action 属性的值时，除了 index.cfm 页面之外的每个页面都可以正常工作。下面是一些示例代码，可让您了解我的问题。

```
<form action="index.cfm" method="post">
    <input type="text" name="username"></input>
    <input type="password" name="password"></input>
    <input type="submit" value="Login"></input>
</form>

<cfif IsDefined("form.username")>
    <p>Welcome!</p>
<cfelse>
    <p>You have not been logged in.</p>
</cfif> 
```

上面的例子不起作用，但是下面的例子起作用；

```
<form method="post">
    <input type="text" name="username"></input>
    <input type="password" name="password"></input>
    <input type="submit" value="Login"></input>
</form>

<cfif IsDefined("form.username")>
    <p>Welcome!</p>
<cfelse>
    <p>You have not been logged in.</p>
</cfif> 
```

此问题仅在索引页上。在所有其他页面上，输入文件名和所需的任何 URL 变量完全没有问题。任何人都可以提供关于为什么会发生这种情况或我可能出错的地方的提示或原因吗？

编辑：我已经包含代码以更清楚地了解我的情况。在第一个示例中，当我在用户名字段中输入任何给定文本并提交表单时，输出将是“您尚未登录”。而在第二个示例中，我收到“欢迎！”的替代值 提交表格后。希望这能解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:40:57.320

当我使用下面的 URL 时，发现 URL 重写正在删除`index.cfm`（因为它是默认文档）：

*   `<form action="/index.cfm" method="post">`
*   `<form action="index.cfm" method="post">`

因此，我需要使用目录名称作为操作。就我而言，这段代码解决了我的问题：

```
 <form action="/community/" method="post"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:45:45.300

一个明显的问题是你没有给你的输入命名。没有名称就不会提交任何内容，但是表单确实提交了，它只是不包含任何数据。

```
<form action="index.cfm" method="post">
    <input type="text" name="afield"></input>
    <input type="submit"></input>
</form> 
```

# android - 进程启动时系统是否触发事件？

> ID：15476381
> 
> 赞同：1
> 
> 时间：2013-03-18T12:02:29.193
> 
> 标签：android, events, process

我想问一下Android是否在进程启动时触发事件？或者是否有任何适当的方法来确定一个进程是否已经启动？

我已经实现了一些基本算法来捕获感兴趣的进程何时启动，但它在服务中工作，需要 5 分钟检查进程是否正在运行。

我的任务是找出应用程序何时启动和停止，并计算它处于活动状态的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:06:09.253

如果您只想知道应用程序是否启动，使用[ActivityManager.getRunningAppProcesses](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningAppProcesses%28%29)就足够了。

如果你需要一个启动的进程的实时报告，答案是否定的，使用当前的 sdk 是不可能的。

您可以在有根设备上采用一些[现有方法。](https://stackoverflow.com/a/15172092/1365960)

# php - pChart - 作为 www-data 运行脚本不起作用

> ID：15476386
> 
> 赞同：0
> 
> 时间：2013-03-18T12:02:36.743
> 
> 标签：php, ubuntu, permissions, pchart

所以我在为 pChart 运行 PHP 脚本时遇到了麻烦。以创建它们的用户身份运行它们可以正常工作，但是如果我 sudo 到 www-data，我会收到以下错误：

```
PHP Deprecated:  Comments starting with '#' are deprecated in /etc/php5/cli/conf.d

/mcrypt.ini on line 1 in Unknown on line 0
PHP Warning:  include(/usr/lib/pchart/class/pDraw.class.php): failed to open stream: Permission denied in /usr/share/phpmyadmin/test.php on line 4
PHP Warning:  include(): Failed opening '/usr/lib/pchart/class/pDraw.class.php' for inclusion (include_path='.:/usr/share/php:/usr/share/pear') in /usr/share/phpmyadmin/test.php on line 4
PHP Warning:  include(/usr/lib/pchart/class/pImage.class.php): failed to open stream: Permission denied in /usr/share/phpmyadmin/test.php on line 5
PHP Warning:  include(): Failed opening '/usr/lib/pchart/class/pImage.class.php' for inclusion (include_path='.:/usr/share/php:/usr/share/pear') in /usr/share/phpmyadmin/test.php on line 5
PHP Warning:  include(/usr/lib/pchart/class/pData.class.php): failed to open stream: Permission denied in /usr/share/phpmyadmin/test.php on line 6
PHP Warning:  include(): Failed opening '/usr/lib/pchart/class/pData.class.php' for inclusion (include_path='.:/usr/share/php:/usr/share/pear') in /usr/share/phpmyadmin/test.php on line 6
PHP Fatal error:  Class 'pData' not found in /usr/share/phpmyadmin/test.php on line 10 
```

有谁知道我需要更改哪些权限或组才能使其正常工作？我尝试将上面输出中提到的所有内容更改为 777，但它仍在发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:59:34.040

好的，这是权限，但目前尚不清楚哪些权限。当我将 pChart2.1.3 文件夹权限更改为 777 时，它开始工作了。现在我可以整理一下了。

# java - Maven Equinox 插件

> ID：15476389
> 
> 赞同：0
> 
> 时间：2013-03-18T12:02:47.893
> 
> 标签：java, maven, osgi, equinox

是否有任何可用的插件可以集成 maven 和 equinox 运行时。？我希望我的 osgi 包能够在 Equinox 中打包、部署和运行。我正在寻找 maven 命令来执行整个控制操作（构建包、打包和部署它们）。

编辑#1 不知何故，我设法执行了 maven pax 插件。当我给出命令 mvn install pax:provision 时，出现以下错误

```
----------------------------------------------------

 -> Using only arguments from command line
 -> Scan bundles from [C:\Users\661447\Desktop\Prime Workspace\OSGiDmHelloWorldP
rovider\runner\deploy-pom.xml]
 -> Scan bundles from [scan-pom:file:/C:/Users/661447/Desktop/Prime Workspace/OS
GiDmHelloWorldProvider/runner/deploy-pom.xml]
 -> Provision bundle [mvn:OSGiDmHelloWorldProvider/OSGiDmHelloWorldProvider/1.0,
 at default start level, bundle will be started, bundle will be loaded from the
cache]
 -> Provision bundle [mvn:org.apache.felix/org.osgi.core/1.4.0, at default start
 level, bundle will be started, bundle will be loaded from the cache]
 -> Preparing framework [Equinox 3.8.1]
 -> Downloading bundles...
 -> Equinox 3.8.1 : connecting...
         ___
        /  /
       /  / Oops, there has been a problem!
      /  /
     /__/   org.ops4j.pax.runner.platform.PlatformException: [link:classpath:run
ner-links/org.eclipse.osgi-3.8.1.link] could not be downloaded
    ___
   /__/     Use --log=debug to see details.---------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:10:55.923

[PaxRunner](http://team.ops4j.org/wiki/display/paxrunner/Pax+Runner)可以帮助您部署 Maven 项目的捆绑包并运行 Equinox

```
<plugin>
    <groupId>org.ops4j</groupId>
    <artifactId>maven-pax-plugin</artifactId>
    <version>1.4</version>
    <configuration>
         <framework>equinox</framework>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:30:42.127

您可能想要使用 m2e 插件来执行您刚才提到的所有操作。您可以在 eclipse 市场中找到它。

# sql - 使用 JOIN 获取 DISTINCT 记录

> ID：15476391
> 
> 赞同：2
> 
> 时间：2013-03-18T12:02:53.527
> 
> 标签：sql, sql-server, sql-server-2008

我想获取不同的患者记录并在网格中显示

**病人桌**

```
PatientId, FirstName, LastName, City 
```

**预订表**

```
BookingId, PatientId, CategoryId, BookingDate 
```

在查询下方运行会给出重复的患者记录。发生这种情况是因为我为不同日期的同一患者预订了 3 次。此查询进行连接并带来 3 条患者记录而不是 1 条患者记录。

```
 SELECT  DISTINCT PAT.PatientId  
 ,PAT.FirstName
 ,PAT.LastName      

 ,ROW_NUMBER() OVER (ORDER BY PAT.PatientId DESC) AS RowNumber 
 INTO #itemSearch  
 FROM  dbo.Patient AS PAT  

 INNER JOIN dbo.Booking AS B  
 ON PAT.PatientId = B.PatientId WHERE  B.CategoryId = 1 
```

如果我删除这一行，我只会得到 1。但我需要这个临时表来进行其他分页过程。

```
ROW_NUMBER() OVER (ORDER BY PAT.PatientId DESC) AS RowNumber INTO #itemSearch 
```

即使他们有 3 个预订，我如何才能只获得 1 个患者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:52:30.133

使用 GROUP BY 子句

```
 SELECT PAT.PatientId  
        ,PAT.FirstName
        ,PAT.LastName      
        ,ROW_NUMBER() OVER (ORDER BY PAT.PatientId DESC) AS RowNumber 
 INTO #itemSearch  
 FROM  dbo.Patient AS PAT  
   INNER JOIN dbo.Booking AS B  
     ON PAT.PatientId = B.PatientId 
 WHERE  B.CategoryId = 1
 GROUP BY PAT.PatientId, PAT.FirstName, PAT.LastName 
```

或将 DISTINCT 与[DENSE_RANK()](http://msdn.microsoft.com/en-us/library/ms173825.aspx)排名函数一起使用

```
 SELECT DISTINCT PAT.PatientId  
        ,PAT.FirstName
        ,PAT.LastName      
        ,DENSE_RANK() OVER (ORDER BY PAT.PatientId DESC) AS RowNumber 
 INTO #itemSearch  
 FROM  dbo.Patient AS PAT  
   INNER JOIN dbo.Booking AS B  
     ON PAT.PatientId = B.PatientId 
 WHERE  B.CategoryId = 1 
```

# python - Spynner：提交表单后获取第二页的html

> ID：15476395
> 
> 赞同：2
> 
> 时间：2013-03-18T12:03:03.060
> 
> 标签：python, web-scraping, spynner

我刚刚开始使用 Spynner 来抓取网页，但没有找到任何好的教程。我在这里有一个简单的例子，我在谷歌中输入一个词，然后我想查看结果页面。

但是我如何从单击按钮到实际获取新页面？

```
import spynner

def content_ready(browser):
    if 'gbqfba' in browser.html:
        return True #id of search button

b = spynner.Browser()
b.show()
b.load("http://www.google.com", wait_callback=content_ready)
b.wk_fill('input[name=q]', 'soup')
# b.browse() # Shows the word soup in the input box
with open("test.html", "w") as hf: # writes the initial page to a file
    hf.write(b.html.encode("utf-8"))
b.wk_click("#gbqfba") # Clicks the google search button (or so I think) 
```

但现在呢？我什至不确定我是否点击了谷歌搜索按钮，尽管它确实有 id=gbqfba。我也试过 b.click("#gbqfba")。如何获得搜索结果？

我试过做：

```
 with open("test.html", "w") as hf: # writes the initial page to a file
    hf.write(b.html.encode("utf-8")) 
```

但这仍然会打印初始页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-11T21:30:29.313

我通过向输入发送 Enter 并等待两秒钟来解决这个问题。不理想，但它有效

```
import spynner
import codecs
from PyQt4.QtCore import Qt

b = spynner.Browser()
b.show()
b.load("http://www.google.com")
b.wk_fill('input[name=q]', 'soup')
# b.browse() # Shows the word soup in the input box

b.sendKeys("input[name=q]",[Qt.Key_Enter])
b.wait(2)
codecs.open("out.html","w","utf-8").write(b.html) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-12T00:55:12.743

推荐的方法是等待新页面加载：

```
b.wait_load() 
```

# android - ideone api for android 总是显示 Auth Error

> ID：15476399
> 
> 赞同：0
> 
> 时间：2013-03-18T12:03:07.267
> 
> 标签：android

我想建立自己的在线编译器。我想为此使用 Ideone Api。但是它的 api 是可用的，但它总是显示这个异常“身份验证错误”我非常努力，但可以找到任何关于如何解决它的教程请帮助我是否有任何可用的 ideone webservices 示例发送给我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:26:13.917

您可能必须使用您的 Ideone 用户名和密码（API 密码）...未指定这可能是导致“身份验证错误”的唯一问题......

# c++ - Qt 5.0 - 它是 3D 游戏/应用程序开发的可行选择吗

> ID：15476401
> 
> 赞同：5
> 
> 时间：2013-03-18T12:03:13.693
> 
> 标签：c++, qt, opengl

我最近注意到有一个新版本的 Qt。我没有任何使用它开发游戏或应用程序的个人经验，但我正在寻找一种 API 或框架，可以简化我的应用程序的 GUI 创建，用 C++ 和 OpenGL 编写。在这个阶段我不太担心跨平台，但这是我将来可以从中受益的东西。

我知道 Qt 的真正优势在于它的灵活性和跨平台功能。显然，这是需要权衡的；对主循环的控制较少。

我花了几天时间翻阅文章和博客，并没有真正看到太多关于 Qt 5 的信息，关于 Qt 的其余信息似乎表明它不是 3D 游戏的好选择。我想进行讨论，因为我发现的大多数信息似乎都已经过时了。

所以我想我的问题是：

*   Qt 是否适用于 3D 应用程序/游戏开发？

*   例如，如果我想制作一个 3D 应用程序，该应用程序具有多个具有相关 GUI 的视口，并且一个视口通过某种程度的 3D 纹理和多个通道/着色器渲染相对大量的多边形（比如 600 万个）。我可以使用 Qt 吗？

根据我的阅读，使用 Qt 的 GUI 元素似乎需要大量的 CPU 时间。我认识到你可以在你的程序中进行优化，但是 Qt 的 GUI 是一个很大的优势，如果我不能利用它，我真的不想使用 Qt。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T12:38:17.720

Qt 的 OpenGL 小部件只为您在 SDL、GLFW、GLUT 等中找到的代码提供平台包装器......

除非您使用 QOpenGL API（通过 Qt API 使用 OpenGL 进行绘制），否则您的应用程序的性能不会受到 Qt shell 的阻碍。

如果您只使用 Qt 设置 OpenGL 上下文，并直接在 OpenGL 中编写 3D 应用程序的其余部分，那么 Qt 与任何事情无关。一旦它建立了一个 OpenGL 上下文，剩下的（渲染的）就留给 OpenGL 本身了。

话虽如此，StackOverflow 不是一个讨论论坛。

# ada - 返回一个胖/粗指针作为输出参数

> ID：15476403
> 
> 赞同：1
> 
> 时间：2013-03-18T12:03:29.467
> 
> 标签：ada

我在创建粗指针时遇到问题。我当前的声明集如下所示：

```
type Index_Typ is mod 20; -- will be larger in real life
type Data_Buffer_Typ is array (Index_Typ range <>) of Integer; --unconstrained array type
type Data_Buffer_Ptr is access all Data_Buffer_Typ; -- a thick pointer, contains the bounds of array subtype pointed to and address..

Data_Buffer : aliased Data_Buffer_Typ (Index_Typ) := (others => 0); -- this is private
type Result_Typ is (Ok, Overflow, Null_Pointer);

   procedure Retrieve (Index    : in     Index_Typ;
                       Len      : in     Index_Typ;
                       Data_Ptr :    out Data_Buffer_Ptr;
                       Result   :    out Result_Typ) is
   begin
     -- assuming range checks are ok, what goes here ?
   end Retrieve; 
```

所以如果我声明：

```
Ptr : Data_Buffer_Ptr := null; 
```

并调用`Retreive (2,3, Ptr,Result);`我如何最终得到一个指向元素 2,3 和 4 的指针`Data_Buffer`？

笔记：

*   是的，我知道传递一个数组切片可能无论如何都会作为一个指针来完成，但是我们想要显式地使用指针，而不是隐式地使用指针（而不是我的选择！）。
*   是的，我已经尝试过了，我通常会收到：（`object subtype must statically match designated subtype`）错误消息..
*   尽可能`new`避免使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:04:59.530

这对我有用，虽然我不得不说它是令人厌恶的！注意 中的组件顺序`Fat_Pointer`，这与我开始时的顺序相反，以及这台 64 位机器上记录的大小（我将 rep 子句放入以使顺序明确，没有它也可以正常工作）。另外，我认为您坚持使用`new`.

```
with Ada.Text_IO; use Ada.Text_IO;
with Ada.Unchecked_Conversion;
with System;
procedure Fat is
   type Index_Typ is mod 20;
   type Data_Buffer_Typ is array (Index_Typ range <>) of Integer;
   type Data_Buffer_Ptr is access all Data_Buffer_Typ;
   Data_Buffer : aliased Data_Buffer_Typ (Index_Typ) := (others => 0);
   type Result_Typ is (Ok, Overflow, Null_Pointer);

   procedure Retrieve (Index    : in     Index_Typ;
                       Len      : in     Index_Typ;
                       Data_Ptr :    out Data_Buffer_Ptr;
                       Result   :    out Result_Typ)
   is
      type Bound is (Lower, Upper);
      type Bounds is array (Bound) of Index_Typ;
      type Bounds_P is access Bounds;
      type Fat_Pointer is record
         The_Data : System.Address;
         The_Bounds : Bounds_P;
      end record;
      for Fat_Pointer use record
         The_Data at 0 range 0 .. 63;
         The_Bounds at 8 range 0 .. 63;
      end record;
      function To_Data_Buffer_Ptr
      is new Ada.Unchecked_Conversion (Fat_Pointer, Data_Buffer_Ptr);
      Answer : constant Fat_Pointer
        := (The_Bounds => new Bounds'(Lower => Index,
                                      Upper => Index + Len - 1),
            The_Data => Data_Buffer (Index)'Address);
   begin
      Result := Ok;
      Data_Ptr := To_Data_Buffer_Ptr (Answer);
   end Retrieve;

   Ptr : Data_Buffer_Ptr := null;
   Result : Result_Typ;

begin
   for J in Data_Buffer'Range loop
      Data_Buffer (J) := Integer (J);
   end loop;

   Retrieve (2, 3, Ptr, Result);

   for J in Ptr'Range loop
      Put_Line (J'Img & " => " & Ptr (J)'Img);
   end loop;
end Fat; 
```

# android - 立即生效的 Android Autobrightness

> ID：15476405
> 
> 赞同：0
> 
> 时间：2013-03-18T12:03:32.623
> 
> 标签：android, automation, android-sensors, brightness

在 Android 中设置 autoBrightness 很容易，不是吗？

```
Settings.System.putInt(resolver,
        Settings.System.SCREEN_BRIGHTNESS_MODE, 0); // 0 is manual, 1 is auto 
```

但是，如果您要切换：

```
boolean isAuto = Settings.System.getInt(resolver, 
        Settings.System.SCREEN_BRIGHTNESS_MODE) == 1;
Settings.System.putInt(resolver,
        Settings.System.SCREEN_BRIGHTNESS_MODE, isAuto ? 0 : 1); 
```

在您锁定屏幕并再次锁定之前，它不会自动适应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:05:39.703

我不知道为什么，但是在将其设置为 1 之前再次将其设置为 0 有效：

```
boolean isAuto = Settings.System.getInt(resolver, 
    Settings.System.SCREEN_BRIGHTNESS_MODE) == 1;
if (isAuto) {
    Settings.System.putInt(resolver,
        Settings.System.SCREEN_BRIGHTNESS_MODE, 0); // set to 0 again, even if it is already 0
    Settings.System.putInt(resolver,
        Settings.System.SCREEN_BRIGHTNESS_MODE, 1); // now it auto-adapts
} else {
    Settings.System.putInt(resolver,
         Settings.System.SCREEN_BRIGHTNESS_MODE, 0);
} 
```

# java - 我使用多个 OnClickListeners 得到致命异常

> ID：15476408
> 
> 赞同：1
> 
> 时间：2013-03-18T12:03:38.147
> 
> 标签：java, android, fatal-error

主要的事情发生在 FATAL EXECEPTION 我的应用程序不启动并且错误来了不幸地停止了它一直在尝试切换案例，否则如果错误仍然继续，应用程序继续崩溃谷歌搜索并搜索堆栈流不同的用户在堆栈流中面临这个错误仍然是错误即使在尝试使用单个 if 和单个 onclicklistener 应用程序设法运行但不使用多个 onlicklistener 的解决方案后继续我是否有不同的方式来运行多个 onclick 侦听器应用程序请帮助我

这是 MainActivity.java

```
package com.example.cricscore;

import android.app.Activity; 
import android.os.Bundle; 
import android.util.Log;
import android.view.View; 
import android.view.View.OnClickListener; 
import android.widget.Button; 
import android.widget.TextView; 

public class MainActivity extends Activity { 

// Private member field to keep track of the count 
private int mCount = 0; 
private static final String TAG = "MainActivity"; 

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.activity_main); 

    Button buttonA = (Button) findViewById(R.id.button1);    
    buttonA.setOnClickListener((OnClickListener) this);
    Button buttonB = (Button) findViewById(R.id.button2); 
    buttonB.setOnClickListener((OnClickListener) this);
 }

   public void onClick(View v) {
       try {
        switch (v.getId()) {
           case R.id.button1: 
               mCount++; 
               final TextView countTextView = (TextView) findViewById(R.id.textView1);
               countTextView.setText(""+ mCount); 
            break;
           case R.id.button2:
               mCount= mCount+2 ; 
               final TextView countTextView1 = (TextView) findViewById(R.id.textView1);
               countTextView1.setText(""+ mCount);
            break;

        }
       }
       catch(Throwable t) {
           Log.e(TAG, t.getMessage(), t);

       }

   }
 } 
```

而 Activity_main.xml 是

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignRight="@+id/button2"
    android:layout_below="@+id/textView1"
    android:text="Runs" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView3"
    android:layout_alignBottom="@+id/textView3"
    android:layout_alignRight="@+id/textView2"
    android:layout_marginRight="19dp"
    android:text="Wickets" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/textView4"
    android:layout_alignParentRight="true"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
    android:id="@+id/button1"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView3"
    android:text="1" />

<Button
    android:id="@+id/button2"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button1"
    android:layout_alignBottom="@+id/button1"
    android:layout_toRightOf="@+id/button1"
    android:text="2" />

<Button
    android:id="@+id/button4"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/button1"
    android:text="6" />

<Button
    android:id="@+id/button6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/button5"
    android:layout_alignRight="@+id/textView4"
    android:text="Wicket" />

<Button
    android:id="@+id/button7"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button8"
    android:layout_alignBottom="@+id/button8"
    android:layout_alignLeft="@+id/button5"
    android:text="Balls" />

<Button
    android:id="@+id/button3"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView3"
    android:layout_toRightOf="@+id/button7"
    android:text="4" />

<Button
    android:id="@+id/button8"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="44dp"
    android:layout_toLeftOf="@+id/textView2"
    android:text="Button" />

<Button
    android:id="@+id/button5"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button4"
    android:layout_alignBottom="@+id/button4"
    android:layout_toLeftOf="@+id/textView7"
    android:text="No/Wide" />

<TextView
    android:id="@+id/textView6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView7"
    android:layout_alignBottom="@+id/textView7"
    android:layout_alignRight="@+id/button5"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/button8"
    android:layout_toLeftOf="@+id/textView4"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>

</RelativeLayout> 
```

日志猫

```
03-18 14:09:37.717: E/AndroidRuntime(360): FATAL EXCEPTION: main
03-18 14:09:37.717: E/AndroidRuntime(360): java.lang.RuntimeException: Unable to start      
    activity
  ComponentInfo{com.example.abc/com.example.abc.MainActivity}:  java.lang.ClassCastException:    
  com.example.abc.MainActivity
  03-18 14:09:37.717: E/AndroidRuntime(360):    at     
  android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
  03-18 14:09:37.717: E/AndroidRuntime(360):    at   
  android.app.ActivityThread.handleLaunchActivity (ActivityThread.java:1663)
  03-18 14:09:37.717: E/AndroidRuntime(360):    at android.app.ActivityThread.access$1500
  (ActivityThread.java:117)
  03-18 14:09:37.717: E/AndroidRuntime(360):    at android.app.ActivityThread$H.handleMessage 
  (ActivityThread.java:931)
  03-18 14:09:37.717: E/AndroidRuntime(360):    at android.os.Handler.dispatchMessage 
  (Handler.java:99)
  03-18 14:09:37.717: E/AndroidRuntime(360):    at android.os.Looper.loop(Looper.java:123)
  03-18 14:09:37.717: E/AndroidRuntime(360):    at android.app.ActivityThread.main 
  (ActivityThread.java:3683)
  03-18 14:09:37.717: E/AndroidRuntime(360):    at java.lang.reflect.Method.invokeNative(Native  
  Method)
  03-18 14:09:37.717: E/AndroidRuntime(360):    at java.lang.reflect.Method.invoke 
  (Method.java:507)
  03-18 14:09:37.717: E/AndroidRuntime(360):    at  
  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
  03-18 14:09:37.717: E/AndroidRuntime(360):    at com.android.internal.os.ZygoteInit.main 
  (ZygoteInit.java:597)
  03-18 14:09:37.717: E/AndroidRuntime(360):    at dalvik.system.NativeStart.main(Native Method)
  03-18 14:09:37.717: E/AndroidRuntime(360): Caused by: java.lang.ClassCastException:  
  com.example.abc.MainActivity
  03-18 14:09:37.717: E/AndroidRuntime(360):    at com.example.abc.MainActivity.onCreate 
  (MainActivity.java:30)
  03-18 14:09:37.717: E/AndroidRuntime(360):    at   
  android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
   03-18 14:09:37.717: E/AndroidRuntime(360):   at  
   android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
   03-18 14:09:37.717: E/AndroidRuntime(360):   ... 11 more 
```

经过一些修改后正如第一个答案所说，我的代码没有崩溃，但我只能看到 android_mainfest 仍然相同的空白活动

```
package com.example.cricscore;

import android.app.Activity; 
import android.os.Bundle; 
import android.util.Log;
import android.view.View; 
import android.view.View.OnClickListener; 
import android.widget.Button; 
import android.widget.TextView; 

public class MainActivity extends Activity implements OnClickListener { 

// Private member field to keep track of the count 
private int mCount = 0; 
/** Called when the activity is first created. 
 * @param OnClickListener */
public void onCreate(Bundle savedInstanceState, android.view.View.OnClickListener 
OnClickListener){
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.activity_main); 

    Button buttonA = (Button) findViewById(R.id.button1);    
    buttonA.setOnClickListener((OnClickListener) );
    Button buttonB = (Button) findViewById(R.id.button2); 
    buttonB.setOnClickListener((OnClickListener) );
 }

   public void OnClickListener(View v) {

        switch (v.getId()) {
           case R.id.button1: 
               mCount++; 
               final TextView countTextView = (TextView) findViewById(R.id.textView1);
               countTextView.setText(""+ mCount); 
            break;
           case R.id.button2:
               mCount= mCount+2 ; 
               final TextView countTextView1 = (TextView) findViewById(R.id.textView1);
               countTextView1.setText(""+ mCount);
            break;

        }

   }

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

}
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:40:47.520

setOnClickListener方法需要一个 View.OnClickListener 类型[的](http://developer.android.com/reference/android/view/View.html#setOnClickListener%28android.view.View.OnClickListener%29)[参数](http://developer.android.com/reference/android/view/View.OnClickListener.html)。在这段代码中，您正在做的是获取[Activity](http://developer.android.com/reference/android/app/Activity.html)本身，并试图将其强制为 它不是的：`OnClickListener`

```
Button buttonA = (Button) findViewById(R.id.button1);    
buttonA.setOnClickListener((OnClickListener) this); // <-- here
Button buttonB = (Button) findViewById(R.id.button2); 
buttonB.setOnClickListener((OnClickListener) this); // <-- and here too 
```

您应该使用以下方法将您的活动声明为 OnClickListener：

```
public class MainActivity extends Activity implements OnClickListener 
```

并且由于您已经有了`onClick(View v)`方法，因此应该解决问题。

# php - 订购 MySQL 结果以服从父/子

> ID：15476411
> 
> 赞同：3
> 
> 时间：2013-03-18T12:03:48.077
> 
> 标签：php, sql, select

我有一张这样的桌子：

```
ID   NAME                     TYPE     PARENT
1    Letters of Jane Austen   book     0
2    Chapter 1                chapter  1
3    Chapter 2                chapter  1
4    Chapter 3                chapter  1
5    Title 1                  title    2
6    Title 2                  title    2 
```

我想创建一个这样的有序表单：

```
[]Letters of Jane Austen
  []Chapter 1
    []Title 1
    []Title 2
  []Chapter 2
  []Chapter 3
[]Another book... 
```

数据库中有很多书，而不仅仅是一本。

有没有办法以这种方式对查询“SELECT”进行排序？这只是一个外观问题，不需要做多维数组或其他东西，因为我可以在标签上贴上它们的类型，然后根据类型更改它们的外观。但我需要以正确的顺序查询查询。

PD：对不起我的英语：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:15:41.273

不要认为这对数据库来说是个好主意。查询会有点困难。Imo 更好 - 您选择所有书籍，按顺序将其写入页面，然后使用 js 重新排序。

Html 可能是这样的：

```
<div id="books">
    <div id="book_1" class="book" parent="0">Letters of Jane Austen</div>
    <div id="book_2" class="book" parent="1">Chapter 1</div>
    <div id="book_3" class="book" parent="1">Chapter 2</div>
    <div id="book_4" class="book" parent="1">Chapter 3</div>
    <div id="book_5" class="book" parent="2">Title 1</div>
    <div id="book_6" class="book" parent="2">Title 2</div>
</div> 
```

所以执行此层次结构的js：

```
$(function () {
    $('#books .book').each(function () {
        var p = $(this).attr("parent");
        if ($('#book_' + p).length) {
            $(this).appendTo($('#book_' + p));
        }
    });
}); 
```

[在JSFiddle](http://jsfiddle.net/3NTML/1/)检查它

**更新**

如果您希望它与非 js 客户端正常工作，您可以使用 php 在后端重新排序它，但解决方案不会那么漂亮：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:20:06.483

我终于发疯了，但它的工作原理，是这样的：

```
select first type
foreach first type
__select second type where id = first type
__foreach second type 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:30:44.870

这种类型的表使用所谓的邻接列表模型。以下查询将为您工作：

```
SELECT
    b.`id`,
    b.`name`,
    b.`type`,
    b.`parent`
FROM `books` b
LEFT JOIN `books` b2 ON b.`parent` = b2.`id`
ORDER BY
    CASE
        WHEN b.`parent` = 0
        THEN b.`id`
        ELSE b.`parent`
    END,
    b.parent; 
```

# ios - 带有 MPMoviePlayerController 的 iOS AES-128 加密流

> ID：15476413
> 
> 赞同：3
> 
> 时间：2013-03-18T12:03:55.010
> 
> 标签：ios, streaming, mpmovieplayercontroller, encryption

我正在为 iPhone 开发一个应用程序，它将流式传输加密的视频内容。在 MPMoviePlayer 类参考之后，我能够创建一个使用 MPMoviePlayerController 播放未加密流的应用程序。那真的很容易和简单。

我在苹果开发者库、谷歌和堆栈中搜索，但没有找到关于 iPhone 上的加密流或如何做到这一点。我想知道 MPMoviePlayer 是否没有任何方法可以播放此类流。我是否必须始终下载 .ts 文件，解密它们，然后以某种方式通过 MPMoviePlayer 按顺序播放它们？或者有什么可以简化这个过程的吗？我相信我在任何地方都没有找到它的原因是它真的很简单，或者我想使用一种非常不合适的方式来做到这一点。

我得到了一个 .m3u8 文件，其中生成了 keyID 和 IV。我想我需要实现一些解析器或可以读取它们的东西，以便我可以使用它们，或者是否还有更简单、更适合的方法来做到这一点？

谁能指导我使用正确的方法，这样我就不会重新发明热水？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T09:30:19.827

您是否尝试过支持 M3U8 文件中的密钥文件引用？我这样做成功地播放了加密视频。MPMoviePlayerController 将为您下载密钥文件并解密媒体数据，因此您无需执行任何操作。

# entity-framework - SQL 服务器 CE。从所有表中删除数据以进行集成测试

> ID：15476415
> 
> 赞同：0
> 
> 时间：2013-03-18T12:03:58.207
> 
> 标签：entity-framework, sql-server-ce, integration-testing

我们使用 SQL Server CE 进行集成测试。在每次测试之前的那一刻，我们从所有列中删除所有数据，然后重新播种测试数据。当结构发生变化时，我们会删除数据库文件。

为了删除数据，我们需要以正确的顺序和问题遍历每个表，`Delete from table blah`这很容易出错。很多时候，我只是在添加新实体时忘记添加删除语句。因此，如果我们可以自动从表中删除数据，那就太好了。

我已经看到 Jimmy Bogard[以正确的顺序删除数据](http://lostechies.com/jimmybogard/2012/10/18/isolating-database-data-in-integration-tests/)的优点。我已经为实体框架实现了这一点，并且可以在成熟的 SQL Server 中使用。但是当我尝试在 SQL CE 中使用它进行测试时，我得到了异常，说

```
System.Data.SqlServerCe.SqlCeException : The specified table does not exist. [ @@sys.tables ] 
```

SQL CE 没有包含所需信息的支持系统表。

是否有适用于 SQL CE 版本的脚本，可以从所有表中删除所有数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:28:08.767

SQL Server Compact 实际上有列出所有表的系统表。在我的 SQL Server Compact 脚本 API 中，我有代码以“正确”顺序列出表，这不是一项简单的任务！我使用 QuickGraph，它有一个用于对 DataSet 进行排序的扩展方法。您应该能够在您的测试代码中重用其中的一些：33

```
public void SortTables()
{
    var _tableNames = _repository.GetAllTableNames();
    try
    {
        var sortedTables = new List<string>();
        var g = FillSchemaDataSet(_tableNames).ToGraph();
        foreach (var table in g.TopologicalSort())
        {
            sortedTables.Add(table.TableName);
        }
        _tableNames = sortedTables;
        //Now iterate _tableNames and issue DELETE statement for each
    }
    catch (QuickGraph.NonAcyclicGraphException)
    {
        _sbScript.AppendLine("-- Warning - circular reference preventing proper sorting of tables");
    }
} 
```

您必须添加 QuickGraph DLL 文件（来自 Codeplex 或 NuGet），您可以在此处找到 GetAllTableNames 和 FillSchemaDataSet 的实现[http://exportsqlce.codeplex.com/SourceControl/list/changesets](http://exportsqlce.codeplex.com/SourceControl/list/changesets)（在 Generator.cs 和 DbRepository.cs 中）

# xpath - MSXML / XPath：特殊字符

> ID：15476422
> 
> 赞同：1
> 
> 时间：2013-03-18T12:04:13.970
> 
> 标签：xpath, msxml

我正在使用 Microsoft XML Core Services 6.0 (MSXML) 读写 XML 文件。当使用必须在 xml 上下文中转义的“特殊”字符编写元素内容时，例如编写“ `&`”，因为`&amp;`我不必关心这一点，因为 MSXML 会进行这种转换。这意味着，如果我将文本分配给元素，例如`oXMLElement.Text = "1 & 2"`，MSXML `oXMLElement.Text = 1 &amp; 2`在我创建 XML 文件时实际写入。那很好，为我节省了一些工作。

现在，我想做的是自动“取消屏蔽”XML 字符串。因此，我使用 - 方法从 XML 文件中读取，该`selectNodes`方法通过添加 XPath 语句来工作，例如`//ns:element/text()`. 不幸的是，我得到的结果字符串看起来像`1 &amp; 2`而不像`1 & 2`. 有没有办法告诉 MSXML 对象或者 XPath 语句给我一个“去掩码”的字符串？我将 MSXML 与 ObjectPal / Paradox 一起使用，因此最好的解决方案是来自 MSXML 库的方法或“特殊”XPath 语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:52:09.807

您看到的是文本的“转义”XML 表示法。[`.xml`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms755989%28v=vs.85%29.aspx)如果您使用该属性来检索字符串，这就是您应该看到的。

要获取没有转义的字符串，请使用[`.nodeValue`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms756022%28v=vs.85%29.aspx).

# insert - Oracle 插入多个值显示错误消息

> ID：15476424
> 
> 赞同：1
> 
> 时间：2013-03-18T12:04:17.603
> 
> 标签：insert, oracle11g, sqldatetime

```
INSERT ALL
into instructor values (
835, 'SPARKS', 4000 , 200, 978, '16-12-1984')

into instructor values (
978, 'STEEL', 5000 , 250, 222, '16-01-1980') 
```

它是：

```
INSERT ALL
into instructor values (
835, 'SPARKS', 4000 , 200, 978, '16-DEC-1984')

into instructor values (
978, 'STEEL', 5000 , 250, 222, '16-JAN-1980') 
```

该表存在并正确设置。错误消息显示 ORA-01843: not a valid month。我哪里做错了？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:31:38.803

您正在为**DATE**类型列 提供一个**字符串。**

 **在这种情况下，Oracle 将字符串隐式转换为日期`NLS_DATE_FORMAT`- 请参阅此[sqlfiddle 示例](http://sqlfiddle.com/#!4/bca90/4)

正确的方法是按照[Valex 的建议](https://stackoverflow.com/a/15476548/1083652)或像这样：

```
INSERT ALL
into instructor values (
835, 'SPARKS', 4000 , 200, 978,date '1984-12-16')
into instructor values (
978, 'STEEL', 5000 , 250, 222, date '1980-01-16')
SELECT * from DUAL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:08:40.450

使用月份作为 3 个字母字符而不是数字而不是 12 使用 dec

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T12:11:35.563

只需使用[TO_DATE](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions183.htm)将字符串转换为日期

```
INSERT ALL
into instructor values (
835, 'SPARKS', 4000 , 200, 978,TO_DATE('16-12-1984','DD-MM-YYYY'))
into instructor values (
978, 'STEEL', 5000 , 250, 222,TO_DATE('16-01-1980','DD-MM-YYYY'))
SELECT * from DUAL; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T12:26:26.710

您正在尝试插入 DATE 而不提及格式，因此 oracle 正在使用其默认 DATE fromat`DD-MON-YYYY`

你可以试试[SQL Fiddle](http://sqlfiddle.com/#!4/01009/10/0)**

# wordpress - 不要为 CPT 生成拇指

> ID：15476431
> 
> 赞同：2
> 
> 时间：2013-03-18T12:04:53.630
> 
> 标签：wordpress, custom-post-type

我正在寻找一种方法来避免在 CPT 中上传新图像时创建图像缩略图。

所以在我的functions.php中我有：

```
if ( function_exists( 'add_theme_support' ) ) {
add_theme_support( 'post-thumbnails' );
set_post_thumbnail_size( 56, 56, true ); // Normal post thumbnails
add_image_size( 'tinyfeatured', 50, 50, true ); // Tiny Featured thumbnail
add_image_size( 'blogonecol', 530, '', true ); // Blog One Column thumbnail
add_image_size( 'post', 530, '', true ); // Portfolio Large thumbnail
add_image_size( 'postnc', 700, '', false ); // Portfolio Large thumbnail
add_image_size( 'carousel', 560, 341, true ); // Portfolio Large thumbnail
add_image_size( 'magazine-full', '', 1131, true); // Portfolio Large thumbnail
} 
```

为了避免为我正在使用的 CPT 创建所有这些图像尺寸，我这样做了：

```
if ( function_exists( 'add_theme_support' ) ) {
add_theme_support( 'post-thumbnails' );
if( !is_singular('issues') ) {
set_post_thumbnail_size( 56, 56, true ); // Normal post thumbnails
add_image_size( 'tinyfeatured', 50, 50, true ); // Tiny Featured thumbnail
add_image_size( 'blogonecol', 530, '', true ); // Blog One Column thumbnail
add_image_size( 'post', 530, '', true ); // Portfolio Large thumbnail
add_image_size( 'postnc', 700, '', false ); // Portfolio Large thumbnail
add_image_size( 'carousel', 560, 341, true ); // Portfolio Large thumbnail
}
add_image_size( 'magazine-full', '', 1131, true); // Portfolio Large thumbnail
} 
```

但是，当我在 CPT“问题”中上传新图像时，会创建上述所有图像大小。

还有其他方法可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:19:00.543

尝试`unset( $sizes['tinyfeatured']);`在条件内使用，因此当它是 CPT“问题”时，您取消设置大小，但当它相反时设置大小。像这样：

```
if( is_singular('issues') ) {
  function sgr_filter_image_sizes( $sizes) {

    unset( $sizes['tinyfeatured']);
    unset( $sizes['blogonecol']);
    unset( $sizes['post']);
    unset( $sizes['postnc']);
    unset( $sizes['carousel']);

    return $sizes;
  }
    add_filter('intermediate_image_sizes_advanced', 'sgr_filter_image_sizes');
} 
```

更多信息并引用自[**删除 WordPress 默认媒体图像大小**](http://www.studiograsshopper.ch/code-snippets/remove-wordpress-defaultmedia-image-sizes/)

**编辑** 试试这个尺寸

```
function add_new_thumbnails() {
  if ( function_exists( 'add_theme_support' ) ) {
  add_theme_support( 'post-thumbnails' );

  set_post_thumbnail_size( 56, 56, true ); // Normal post thumbnails
  add_image_size( 'tinyfeatured', 50, 50, true ); // Tiny Featured thumbnail
  add_image_size( 'blogonecol', 530, '', true ); // Blog One Column thumbnail
  add_image_size( 'post', 530, '', true ); // Portfolio Large thumbnail
  add_image_size( 'postnc', 700, '', false ); // Portfolio Large thumbnail
  add_image_size( 'carousel', 560, 341, true ); // Portfolio Large thumbnail
  add_image_size( 'magazine-full', '', 1131, true); // Portfolio Large thumbnail
  }
 }
 add_action('after_setup_theme', 'add_new_thumbnails',10); //10 is default 
```

将其与顶部代码一起使用，但添加过滤器优先级`12`

`add_filter('intermediate_image_sizes_advanced', 'sgr_filter_image_sizes',12);`

**试试这个链接** [**我的片段**](https://gist.github.com/davidchase/9944ab91a348c2fd32b5)

把它放在你的functions.php中，而不是你添加的代码

## 新方法

因此，一种新的尝试方法是：

```
function add_new_thumbnails() {
 add_theme_support( 'post-thumbnails' );

 set_post_thumbnail_size( 56, 56, true ); // Normal post thumbnails
 add_image_size( 'tinyfeatured', 50, 50, true ); // Tiny Featured thumbnail
 add_image_size( 'blogonecol', 530, '', true ); // Blog One Column thumbnail
 add_image_size( 'post', 530, '', true ); // Portfolio Large thumbnail
 add_image_size( 'postnc', 700, '', false ); // Portfolio Large thumbnail
 add_image_size( 'carousel', 560, 341, true ); // Portfolio Large thumbnail
 add_image_size( 'magazine-full', '', 1131, true); // Portfolio Large thumbnail
}

add_action('init', 'add_new_thumbnails',10); //10 is default

if ( is_singular('issues') ) {
function remove_thumbnails() {
    add_image_size( 'tinyfeatured', 0, 0 ); // Tiny Featured thumbnail
    add_image_size( 'blogonecol', 0, 0); // Blog One Column thumbnail
    add_image_size( 'post', 0,0 ); // Portfolio Large thumbnail
    add_image_size( 'postnc',0,0 ); // Portfolio Large thumbnail
    add_image_size( 'carousel',0,0 ); // Portfolio Large thumbnail
    add_image_size( 'magazine-full',0,0); // Portfolio Large thumbnail
 }
add_action('init', 'remove_thumbnails',12); // 12 executes after 10

} 
```

# c# - 复杂的json反序列化

> ID：15476433
> 
> 赞同：3
> 
> 时间：2013-03-18T12:04:59.660
> 
> 标签：c#, json

我必须反序列化以下 json 响应（`Result`列表长度可变）：

```
{
    "ResultSet": {
        "Query": "volkswagen",
        "Result": [
            {
                "symbol": "VLKAY",
                "name": "Volkswagen AG",
                "exch": "PNK",
                "type": "S",
                "exchDisp": "OTC Markets",
                "typeDisp": "Equity"
            },
            {
                "symbol": "VOW3.DE",
                "name": "Volkswagen AG",
                "exch": "GER",
                "type": "S",
                "exchDisp": "XETRA",
                "typeDisp": "Equity"
            },
            {
                "symbol": "VOW.DE",
                "name": "Volkswagen AG",
                "exch": "GER",
                "type": "S",
                "exchDisp": "XETRA",
                "typeDisp": "Equity"
            }
        ]
    }
} 
```

我得到了什么：

```
JavaScriptSerializer js = new JavaScriptSerializer();
string jsonString = "...String is here...";
SearchObj obj = js.Deserialize<SearchObj>(jsonString); 
```

我知道我通常必须创建一个合适的 obj。例如`SearchObj`，它会被填充，但在这种情况下，我不完全确定这个对象应该是什么样子。我想出了：

```
class Data 
{
    public string symbol { get; set; }
    public string name { get; set; }
    public string exch { get; set; }
    public string type { get; set; }
    public string exchDisp { get; set; }
    public string typeDisp { get; set; }
}

class Container 
{
    public string Query { get; set; }
    public List<Data> Result { get; set; }
}

class SearchObj
{
    public Container ResultSet { get; set; }
} 
```

但你猜怎么着，它不起作用，我只得到`ResultSet = null`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:14:00.657

尝试将您的类 Container 更改为

```
 class Container 
 {
     public string Query { get; set; }
     public Data[] Result { get; set; }
 } 
```

根据我的观察，我没有测试过

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:23:22.627

当我回答自己的问题时，我总是感觉很糟糕，但它就是这样。

基本上我的想法是正确的，我只犯了一个错误，那就是我不需要

```
class SearchObj
{
    public Container ResultSet { get; set; }
} 
```

使用

```
Container obj = js.Deserialize<Container>(jsonString); 
```

代替

```
SearchObj obj = js.Deserialize<SearchObj>(jsonString); 
```

成功了。顺便说一句`Data[]`，和`List<Data>`在容器中工作。

编辑：从 giammins 的评论看来，它似乎在一些没有改变的机器上工作，但我想这是未定义行为的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-04T16:48:43.150

您可以使用[http://www.json2charp.com](http://www.json2charp.com)创建您的课程。

# opencv - 使用安装在天花板上的向下指向网络摄像头跟踪人类

> ID：15476441
> 
> 赞同：0
> 
> 时间：2013-03-18T12:05:32.787
> 
> 标签：opencv, cuda, computer-vision, tracking, detection

我需要跟踪在建筑物内走动的人。我在距地面 6 米（20 英尺）的天花板上安装了一个向下的网络摄像头。

**性能很重要**，因为计划是让它在多个网络摄像头上实时运行。目前我安装了一个摄像头，并且在 GPU 上使用 VIBE 进行背景减法，我在 720p 上获得约 320 fps，这很棒。

虽然 VIBE 表现良好，但我正在努力保持一致性。如果人们走得太近，他们就会被认为是一团。我还需要忽略非人类物体的运动。

**我真的需要你们的一些意见和想法，**如何确定什么是人类，什么不是我的 VIBE 输出。什么是明智的做法？我试图将人类定义为具有一定的正方形像素大小，但我觉得必须有更聪明的方法来区分人类与非人类运动。

如果另一种方法有意义，例如光流、跟踪学习检测算法（OpenTLD？）、性能良好的 HOG，我会非常有兴趣了解它。

任何想法和意见表示赞赏:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:19:03.803

有很多方法可以解决您的问题，但没有一种是通用的。两个主要的方法系列是 (a) 改进较低级别的 blob 检测和处理或 (b) 处理跟踪器中的歧义。

如果您对如何改进 blob 检测有任何想法，请尝试这些。我不熟悉 VIBE 或场景的细节（室内与室外、相机抖动量、镜头质量等），所以我没有建议。

假设合并的 blob 来自独立的行人，考虑使用理解 blob 拆分和合并的粒子过滤器。如果人们成群结队地移动，请考虑增强跟踪器以检测人群并放弃单独跟踪每个人。

如果您可以构建一个强大的跟踪器，您可能能够通过运动模式和像素大小过滤掉非人类。

# git - 来自 git://* 的 Git 结帐不起作用

> ID：15476444
> 
> 赞同：1
> 
> 时间：2013-03-18T12:05:39.557
> 
> 标签：git, git-checkout

我正在尝试从以下 git://github.com/ajaxorg/cloud9.git 结帐，但这失败了，并显示以下错误消息：

```
Cloning into cloud9...
github.com[0: 207.97.227.239]: errno=Connection timed out
fatal: unable to connect a socket (Connection timed out) 
```

[当我从https://github.com/ajaxorg/cloud9.git](https://github.com/ajaxorg/cloud9.git)结帐时，它可以正常工作。

我正在使用 Ubuntu 桌面 32 位 11.04。无法升级到 Ubuntu 12.10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-27T05:36:42.253

如果涉及代理，至少您需要设置（在工作中，而不是在家）环境变量`HTTP_PROXY`/`HTTPS_PROXY`

另一种方法是使用[`git config http.proxy`设置](https://git-scm.com/docs/git-config#Documentation/git-config.txt-httpproxy)。

> 除了可以理解的语法之外`curl`，还可以指定一个带有用户名但没有密码的代理字符串，在这种情况下，git 将尝试以与其他凭据相同的方式获取一个代理字符串。

# netbeans - 将 Play Framework 2.1.0 与 NetBeans 一起使用

> ID：15476446
> 
> 赞同：5
> 
> 时间：2013-03-18T12:05:41.440
> 
> 标签：netbeans, playframework-2.0

我已经开始使用 Play 2.1.0，我希望能够使用 NetBeans 来开发 Play Java 应用程序。我对使用 IDE 运行或测试应用程序并不感兴趣，因为我可以从命令行执行此操作（我不介意我是否也可以为此提供 IDE 支持），但我希望能够打开并在 NetBeans 中编辑我的项目，而不会在实际上不存在的地方出现烦人的错误。我目前使用的是 NetBeans 7.3，所以我首先尝试使用[nbplay 插件](https://blogs.oracle.com/geertjan/entry/play_in_netbeans_ide_7)，但是它无法识别我所有的导入或 Play 生成的托管类。然后，我尝试将项目导入为 Eclipse 项目，如[this](https://stackoverflow.com/questions/10113832/how-do-i-use-play-framework-2-0-in-netbeans)和[this](https://stackoverflow.com/questions/10584575/how-do-i-set-up-netbeans-to-work-with-play-framework-2-0-easily) question中所述，效果更好，但在我的工作中[Play 的 Java 教程之一](http://www.playframework.com/documentation/2.1.0/JavaGuide1)我仍然收到以下错误，这使得使用 NetBeans 非常烦人：

1.  我在使用 @content 的 main.scala.html 中收到“预期操作数但发现错误”错误，尽管我已指示 IDE 禁用对该文件的 HTML 错误检查。
2.  在我的模型类中，我收到错误，因为这些类没有声明无参数构造函数并且具有用于持久属性的公共变量。
3.  我还没有遇到任何其他错误？

有没有人设法让 Play 2.1.0 与 NetBeans 一起工作而不会出现上述任何错误？我可能会接受第一个（尽管它真的让我很烦），但其余的都是令人讨厌的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-11-09T13:05:32.577

请注意，可以在工具 -> 选项 -> 编辑器 -> 提示 -> 选择 java 语言中启用或禁用 Java 提示。

NetBeans 现在具有对 Play Framework 2.3.x 及更高版本的本机支持：http://nbpleasureplugin.com/documentation/installation.html[根本](http://nbpleasureplugin.com/documentation/installation.html)不需要命令行。

最重要的特点是：

*   直接在 IDE 中创建、运行、调试和测试您的应用程序
*   路由文件支持（语法着色、语法错误突出显示、自动完成、代码导航、显示实现代码（不导航到源代码）、当方法不存在时提示创建方法、格式化、标记出现）
*   Scala 模板支持（语法着色、语法错误突出显示、自动完成、代码导航、显示实现代码（不导航到源）、格式化、标记出现） application.conf 支持（语法着色、文档自动完成、格式化、标记出现）
*   依赖管理（在 Maven 上搜索并将它们添加到 build.sbt）
*   2 Code Coverage too.s 支持（jacoco 和 scoverage）
*   测试单个文件
*   SBT 文件最小支持
*   配置（格式化缩进、语法着色、要使用的端口、激活器参数等） *支持 2.3.x 及以上的播放版本

注意：我创建了这个插件。

我也看到这可以帮助你：[我如何在 netbeans 中使用 Play Framework 2.0](https://stackoverflow.com/questions/10113832/how-do-i-use-play-framework-2-0-in-netbeans)

# git - 如何在不丢失任何源代码文件历史记录的情况下减小存储库的大小？

> ID：15476448
> 
> 赞同：1
> 
> 时间：2013-03-18T12:05:45.917
> 
> 标签：git, repository, history, filesize, image-file

我当前项目的 git 存储库包含源代码和图像文件，大小约为 1.2 GB。但所有分支的实际文件大小只有 205 兆字节左右。

我是 git 的初学者，我猜巨大的存储库大小是由于在存储库中移动图像文件造成的。由于 git 不会捕获移动的文件，因此它将图像存储在历史记录中的旧位置以及新位置的图像。我不确定这是否会导致如此大的开销。

无论如何，如何在不丢失源代码文件历史记录的情况下减少存储库大小？我可以放弃图像文件的历史记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:32:43.573

Git 不会存储被移动或复制的文件的额外副本。如果内容相同，则 git 存储的唯一内容是新的树结构。

Git 对象模型的详细信息：http: [//git-scm.com/book/en/Git-Internals-Git-Objects](http://git-scm.com/book/en/Git-Internals-Git-Objects)

`git gc`是对存储库进行定期管理的常用方法，试一试，看看你的存储库是否缩小。

如果这样做不行（有时`git gc`会阻塞，尤其是在具有大量二进制数据的存储库上），请尝试使用`git repack`. 这通常需要相当长的时间，但如果可能的话，它应该缩小存储库。试试这个：

`git repack -adf --window=250 --depth=250 --window-memory=1024M`

注意`--window-memory`选项；如果您的机器有足够的内存，您可能会在不使用此选项的情况下侥幸逃脱，但如果没有，它应该可以防止`git repack`因内存不足而失败。根据我的经验，将其设置为可用内存的一半或更少通常可以正常工作。

# windows-phone-7 - 使用密码锁定应用程序

> ID：15476449
> 
> 赞同：0
> 
> 时间：2013-03-18T12:05:46.823
> 
> 标签：windows-phone-7, windows-phone-8

在 WP 应用程序中，我们需要提供用户选项来使用密码锁定应用程序。

据我了解 WP 应用程序生命周期，我需要在 App.Application_Activated、App.Application_Deactivated 和起始页中将导航放到 LockPage，但我不能在 App 类中使用 NavigationService...

我不想将导航代码锁定在其他页面中，或者没有其他选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:13:09.060

我编写了自己的解决方案，但可能没有它可以的那么优雅。

应用锁定逻辑：用户使用密码启用应用锁定，我们在 App 类中处理 Application_Deactivated 和 Application_Closing 事件，如果用户启用此选项，则将应用标记为锁定。然后，在每个页面上，我们应该检查：应用程序当前是否被锁定，如果是，我们应该导航到 AppLockedWithPasswordPage。在 AppLockedWithPasswordPage 上，我们需要检查用户的密码，如果正确则调用 NavigationService.GoBack()。

所以我们需要做6个步骤：

1.  您应该选择保存*IsAppCurrentlyLocked*（布尔标志）、*AppLockPassword*（字符串）和*IsUserEnabledAppLockWithPassword*（布尔标志）的位置。我选择了独立存储设置

2.  创建 AppLockedWithPassword 页面，您需要在其中显示 TextBox 和 Button，不要忘记为用户提供重置 AppLock 的选项，当然还有删除应用程序数据

3.  AppLockedWithPasswordPage 应该阻止 BackButton 导航，因此阻止它：

    ```
    // AppLockedWithPasswordPage
    protected override void OnBackKeyPress(CancelEventArgs e)
    {
        // Preventing back key navigation
        e.Cancel = true;
    } 
    ```

4.  单击按钮检查密码

    ```
    // AppLockedWithPasswordPage
    private void UnlockAppButton_Click(object sender, RoutedEventArgs e)
    {
        if (PasswordBox.Password.Equals(IsolatedStorageSettings["AppLockPassword"]))
        {
            NavigationService.GoBack();
        }
        else
        {
            // Say user, that password incorrect, etc...
        }
    } 
    ```

5.  在 App 类中找到 Application_Deactivated（处理应用程序最小化（Windows 按钮））和 Application_Closing（处理用户关闭应用程序）方法，如果用户在此事件发生时启用此选项，我们应该将应用程序标记为已锁定

    ```
    private void SetIsAppCurrentlyLockedFlagIfUserEnabledAppLocking()
    {
        if ((bool)IsolatedStorageSettings["IsUserEnabledAppLockWithPassword"])
        {
            IsolatedStorageSettings["IsAppCurrentlyLocked"] = true;
        }
    }

    private void Application_Deactivated(object sender, DeactivatedEventArgs e)
    {
        SetIsAppCurrentlyLockedFlagIfUserEnabledAppLocking();
    }

    private void Application_Closing(object sender, ClosingEventArgs e)
    {
        SetIsAppCurrentlyLockedFlagIfUserEnabledAppLocking();
    } 
    ```

6.  最后一步，在您要锁定的所有页面上，您应该在 OnNavigatedTo 方法中添加检查，如果应用程序当前被锁定，该方法将导航到 AppLockedWithPasswordPage

    ```
    // Create some class, like PagesUtils or so on with check method
    private static Uri uriToAppLockedWithPasswordPage = new Uri("pathToAppLockedWithPasswordPage", UriKind.Relative);

    public static void NavigateToAppLockedWithPasswordPageIfAppLocked(PhoneApplicationPage page)
    {
        if ((bool)IsolatedStorageSettings["IsAppCurrentlyLocked"])
        {
            page.NavigationService.Navigate(uriToAppLockedWithPasswordPage); 
        }
    }

    // In each page you want to lock add
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        PagesUtils.NavigateToAppLockedWithPasswordPageIfAppLocked();
        base.OnNavigatedTo();
    } 
    ```

PS当然真实代码要好很多，这只是简单的例子，希望对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:11:08.107

您应该在`Application_Launching`和`Application_Activated`事件中添加检查。

首次打开应用程序时的启动事件和用户离开做其他事情后返回应用程序时的激活事件。

让这些事件都设置一个标志并让所有页面继承的基本页面在导航到时检查此标志。检查是否设置了标志，如果设置了，则显示登录提示，然后在成功输入密码后清除标志。
除了正常启动应用程序之外，这种方法还将处理 FAS、FAR 和深度链接。

**注意**一些选择器在返回应用程序时会触发激活事件。根据需要/如有必要，为这些添加额外的处理。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T15:24:22.377

为什么不创建一个输入密码的起始页面？

对于您拥有 MainPage.xaml 的实例，请创建一个 InsertPasswordPage.xaml 在 WMAppManifest 上引用它作为起始页：

```
 <DefaultTask Name="_default" NavigationPage="InsertPasswordPage.xaml" /> 
```

并在 InsertPasswordPage.xaml 上插入所有密码逻辑，当用户成功登录时，只需导航到您的主页;)

编辑：正如 Gambit 所说，如果用户按下后退按钮，他将返回插入密码页面，但您可以通过在用户登录后从后台删除页面来解决此问题。

# python - blob 查看器中的 appengine 未命名文件

> ID：15476453
> 
> 赞同：2
> 
> 时间：2013-03-18T12:05:57.793
> 
> 标签：python, google-app-engine, blobstore

我正在使用 appengine 文件服务创建文件。这些文件没有文件名。它们在 Blob 查看器中显示为“（未命名）”。有没有办法设置名称以便我可以轻松跟踪我的文件？

```
filename = files.blobstore.create(mime_type='text/plain')
with files.open(filename, 'a') as f:
    f.write("Foo\n")
files.finalize(filename)
blob_key = files.blobstore.get_blob_key(filename) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:01:19.877

是的，您可以`_blobinfo_uploaded_filename`这样设置：

```
filename = files.blobstore.create(mime_type='text/plain', _blobinfo_uploaded_filename='filename.txt') 
```

# android - 如何在我的 Android 应用中启用提醒

> ID：15476456
> 
> 赞同：-2
> 
> 时间：2013-03-18T12:06:02.933
> 
> 标签：android, notifications

我在我的应用程序中做提醒。

我必须在本地数据库中搜索当前日期的事件并发出警报。

我该如何做这个提醒功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:21:49.837

使用[**AlarmManager**](http://developer.android.com/reference/android/app/AlarmManager.html)在您的应用程序中实现提醒。

第 1 步：创建一个**`BroadcastReceiver`**监听广播消息的对象。

第 2 步：创建一个`PendingIntent`并将其设置为`AlarmManager`.

`BroadcastReceiver`第 3 步：在收到广播时显示提醒/通知，即`onReceive()`

请参阅本[教程](http://justcallmebrian.com/?p=129)以获取更多说明。

# search - 在启用词干提取的情况下使用 Lucene 进行搜索

> ID：15476460
> 
> 赞同：1
> 
> 时间：2013-03-18T12:06:12.287
> 
> 标签：search, solr, lucene, full-text-search

假设我存储了一组字符串（Lucene 中的每个文档都是一个单词），然后给定一个输入单词 W，我想检索不仅匹配单词 W 的所有文档，还检索那些词干版本也匹配的文档W。

另外，假设输入一个单词 W，我想处理存在与单词 W 的词干版本匹配的文档的情况。

编写我自己的自定义分析器并返回一个 PorterStemFilter 就足够了吗？我是否需要编写此类并将其作为代码中的分析器引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:33:37.883

编写一个在分析器链中具有词干分析器的自定义分析器就足够了。

这是在 Lucene 4.1中使用[PorterStemFilter的示例代码](http://lucene.apache.org/core/4_1_0/analyzers-common/org/apache/lucene/analysis/en/PorterStemFilter.html)

```
 class MyAnalyzer extends Analyzer {
  @Override
  protected TokenStreamComponents createComponents(String fieldName, Reader reader) {
    Tokenizer source = new LowerCaseTokenizer(version, reader);
    return new TokenStreamComponents(source, new PorterStemFilter(source));
  }
} 
```

请注意，您必须在查询时使用相同的自定义分析器，该分析器也用于索引。

您可以在相应的 PorterStemFilter 文档中找到您的 Lucene 版本的示例代码。

# wordpress - 如何用wordpress中的导航按钮替换导航链接？

> ID：15476463
> 
> 赞同：0
> 
> 时间：2013-03-18T12:06:22.187
> 
> 标签：wordpress

您好，我是 Wordpress 的新手。我已经创建了一个网站作为我的项目的一部分，但是我遇到了问题，比如我的顶部导航菜单中有链接，但我想将该导航链接替换为导航按钮。在这里，我想将该链接替换为按钮。例如家，关于我们喜欢在链接中，但我想要家，关于我们在按钮中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:09:52.880

更改菜单链接和菜单标签的步骤

1) 使用 wp-admin 登录

2)外观->菜单

这里可以更改菜单标签或链接

添加主页按钮的jQuery代码

```
$("li.current_page_item > a > span").eq(0).text('').append('<input type="button" value="Home"/>') 
```

如果您需要进一步的帮助，请告诉我。

# javascript - FineUploader 按钮文本

> ID：15476464
> 
> 赞同：0
> 
> 时间：2013-03-18T12:06:27.770
> 
> 标签：javascript, jquery, file-upload, upload, fine-uploader

我已经浏览了 FineUploader 文档，但是当我像下面这样设置上传按钮文本时，更改似乎没有传播。上传按钮仍显示默认文本。我错过了什么？

```
var manualuploader = new qq.FileUploader({
        element: document.getElementById('manual-fine-uploader'),
        text: {
            uploadButton: "Select a File" // <========== Setting text here
        },
        action: "/file/upload",
        autoUpload: false,
        multiple: false,
        forceMultipart: true,
        onComplete: function (id, fileName, json) {

            $("#divFileUploadLoading").hide();
            $("#buttonUploadFile").show();

            if (json.success) {

                displaySuccessMessage("Successfully uploaded: " + fileName);

                $("#textFileTitle").val("");
                $("#textFileDescription").val("");
                $("#checkIsDownloadable").prop("checked", true);
                $("#checkDisplayDetails").prop("checked", true);
            }
            else {

                displayErrorMessage("Failed to upload: " + fileName + " because '" + json.errorMessage + "'");
            }

            g_FileCount = 0;

            manualuploader.clearStoredFiles();
            manualuploader.reset();
        },
        onSubmit: function (id, fileName) {

            g_FileCount++;
        },
        onCancel: function (id, fileName) {

            $("#divFileUploadLoading").hide();
            $("#buttonUploadFile").show();

            displaySuccessMessage("Canceled upload for: " + fileName);

            g_FileCount--;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T16:35:15.117

经过测试和验证。您仍然需要使用“文本”选项。

```
text: {
  uploadButton:'<div>Select a file</div>'
} 
```

另一种方法是使用 button: 选项创建自己的按钮。

JS：

```
button: document.getElementById('my-button') 
```

HTML：

```
<div id="my-button" class="qq-upload-button">Select a file</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-06T22:34:57.703

就我而言，提供的答案不起作用。所以我所做的是在调用 FineUploader 构造函数后以编程方式设置相应除法的内容。我的 Javascript 如下（使用 jQuery）：

```
$('div_ID').fineUploader({... your options here });
$(".qq-upload-button-selector.qq-upload-button div").text("your custom text"); 
```

我已经对此进行了测试，它对我有用。欢迎任何意见。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T12:19:20.007

尝试使用一个元素：

```
uploadButton: "<div>Select a File</div>" 
```

祝你好运 ！

# qt - 如何使用 Qt UDP 套接字发送和接收大数据？

> ID：15476469
> 
> 赞同：3
> 
> 时间：2013-03-18T12:06:44.390
> 
> 标签：qt, sockets, network-programming, udp

我想使用 Qt UDP（不是 TCP）套接字来传输文件。所以我写这样的代码：

发件人

```
QFile file1(QString::fromStdString(filedir));
QByteArray bytes;
file1.open(QIODevice::ReadOnly);
QTextStream in(&file1);
while (!in.atEnd()) {
    bytes = in.read(8192).toAscii();
    udpSocket.writeDatagram(bytes, QHostAddress(ip), port.toInt());
} 
```

接收者

```
udpSocket1.bind(ui->sendPort->text().toInt());
connect(&udpSocket1,SIGNAL(readyRead()),this,SLOT(listenfile()));

void Widget::listenfile() {
    QFile file("received.txt");
    file.resize(0);
    file.open(QIODevice::Append);
    QTextStream out(&file);
    do {
        QByteArray data;
        data.resize(udpSocket1.pendingDatagramSize());
        udpSocket1.readDatagram(data.data(),data.size());
        QString str=data.data();
        ui->textBrowser1->append(str);
        out << data;
    } while (udpSocket1.hasPendingDatagrams());
} 
```

当我发送小文件时，没有问题。但是，如果我想发送大文件（> 8192 字节），即使在 localhost 上测试，接收方也只能获得前 8KB 的数据。如果我减少发送方的大小数字，例如 1024。接收方仍然只能获得前 8KB 的数据。如果我将发送方的大小数增加到 X 字节（X > 8192）。接收方将获得前 X 字节数据。

似乎要传输的 Qt UDP 数据包的最小大小是 8192 字节。接收者总是得到第一个数据包，但不能接收其他数据包。

我对Qt和网络编程经验很少，所以不知道我的猜想是否正确。你能告诉我如何更改这些代码以支持在第一个数据包之后接收数据包，以便我可以传输大数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T12:41:57.483

调试了半天，用Wireshark抓包。我认为问题的原因是 QUdpSocket 本身。像 Internet 上的许多其他示例一样，我的代码可能是正确的。但是 QUdpSocket 类不适合传输大数据。因为连接到readyRead()的slot函数在执行时，后续的数据报不能再次触发，直到函数执行完毕。所以发送方必须在发送一些数据后休眠一段时间以等待接收方的 slot 函数。

结论是 QUdpSocket 类是不可靠的传输大数据。我应该使用底层的Socket API，定制一些协议，设计多进程/多线程架构，从根本上解决问题。当然，使用 TCP 套接字是另一种选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T12:58:23.190

您的问题可能来自这一行：

```
} while (udpSocket1.hasPendingDatagrams()); 
```

您期望整个数据包集排队并准备好立即接收，但更有可能的是一些数据包将可用，稍后会有更多数据包可用。因此，您需要比这更长的时间监听套接字并确定对方何时真正完成发送数据。

# azure - 本地负载平衡 Windows Azure 实例

> ID：15476470
> 
> 赞同：2
> 
> 时间：2013-03-18T12:06:52.047
> 
> 标签：azure, load-balancing, azure-compute-emulator

将多实例部署`WebRole`到`Windows Azure Emulator`时，模拟器正在运行 WebRole 的多个 IIS Express 实例，每个实例都在保留的本地 IP 上，例如：

```
 127.255.0.1
 127.255.0.2
 127.255.0.3 
```

问题是我想访问 WebRole，就好像它真的部署在 Azure 上一样，我需要检查`Session State`实例之间的持久性。

由于 my`Session Id`存储在 cookie 上，因此每次连接到不同的实例时，我都需要手动将 cookie “注入”到请求中以检查会话数据（因为浏览器将下一个实例的 IP 视为不同的域）。

有没有办法我可以使用`hostname`（在 Windows 7 机器上）将自己随机指向其中一个 IP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:11:16.600

好吧，显然模拟器**确实**对实例之间的所有请求进行了负载平衡：

单击云项目上的“调试”将打开一个网页，其 IP 为虚拟负载均衡器（通常为 127.0.0.1:80，如果尚未使用）。

然而，首先有两件事误导了我：

*   **1.**多个 IIS Express 实例的列表，每个实例都有自己的绑定（附图片）。

![在此处输入图像描述](../Images/2fbaa06ac5a68349142c73edc92a9e9c.png)

*   **2.**隐式亲和力：

    我让我的 Web 应用程序输出了实例 ID，并一直得到相同的实例 ID。原因是（我猜）模拟器强制执行的亲和力（可能使用 cookie 比较）。

**结论：**

如果您想手动进行负载平衡或自己控制亲和力，您可以利用`IIS Server Farming`功能（就像我最终所做的那样）来模拟负载平衡。

（Apache/Nginx 作为某种“反向代理”也是一个不错的选择，但我更喜欢坚持使用已经安装和使用的产品）。

# visual-c++ - 如何将 msvc exe 项目转换为 dll 项目？

> ID：15476472
> 
> 赞同：3
> 
> 时间：2013-03-18T12:06:54.930
> 
> 标签：visual-c++, dll, exe

在exe项目中：

```
int WINAPI WinMain( __in HINSTANCE hInstance, __in_opt HINSTANCE hPrevInstance, __in_opt LPSTR lpCmdLine, __in int nShowCmd )
{
    g_hMainWnd=CreateDialog(hInstance,MAKEINTRESOURCE(IDD_DIALOG1),NULL,(DLGPROC)DialogProc);
    RECT rcWnd;
    GetWindowRect(g_hMainWnd,&rcWnd);
    int X=(GetSystemMetrics(SM_CXSCREEN)-rcWnd.right+rcWnd.left)>>1,
        Y=(GetSystemMetrics(SM_CYSCREEN)-rcWnd.bottom+rcWnd.top)>>1;
    MoveWindow(g_hMainWnd,X,Y,rcWnd.right-rcWnd.left,rcWnd.bottom-rcWnd.top,FALSE);
    ShowWindow(g_hMainWnd,SW_SHOW);

    BOOL bRet;
    MSG msg;
    while( (bRet = GetMessage( &msg, NULL, 0, 0 )) != 0)
    { 
        if (bRet == -1)
        {
            MessageBox(NULL,_T("GetMessage error with -1 returned！"),_T("error"),MB_ICONHAND);
            break;
        }
        else if (!IsWindow(g_hMainWnd) || !IsDialogMessage(g_hMainWnd, &msg)) 
        {
            TranslateMessage(&msg); 
            DispatchMessage(&msg); 
        }
    }
    return 0;
} 
```

我将项目设置更改为首先输出一个dll。然后我将 WinMain 更改为：

```
BOOL APIENTRY DllMain( __in HINSTANCE hInstance, __in_opt HINSTANCE hPrevInstance, __in_opt LPSTR lpCmdLine, __in int nShowCmd )
{

    g_hMainWnd=CreateDialog(hInstance,MAKEINTRESOURCE(IDD_DIALOG1),NULL,(DLGPROC)DialogProc);
    HWND hMainWnd;
   //DialogProc involves the critical initialization of the data required for the export function used later

    return 0;
} 
```

那么，如果这是一个愚蠢的想法，还是我错过了什么？谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T23:19:37.510

DllMain 的定义是供操作系统使用的，在某些情况下您必须输入它们的代码。要执行实现您的 EXE 的代码，您必须创建一个接收所需参数的公共例程。

使用 Visual Studio 创建一个库项目来导出一些数据和函数。
新建项目**->**选择 V​​iasual c++ **->**选择 Win32 **->** Win32 项目**->**命名您的项目**->**下一步**->**选择 DLL **->**选择导出符号**->**完成

最终项目将包含一个正在导出的变量和一个公共例程。在您的代码中用作模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T22:21:44.743

```
 BOOL WINAPI DllMain(
    HINSTANCE hinstDLL,  // handle to DLL module
    DWORD fdwReason,     // reason for calling function
    LPVOID lpReserved )  // reserved
{
    // Perform actions based on the reason for calling.
    switch( fdwReason ) 
    { 
        case DLL_PROCESS_ATTACH:
         // Initialize once for each new process.
         // Return FALSE to fail DLL load.
            break;

        case DLL_THREAD_ATTACH:
         // Do thread-specific initialization.
            break;

        case DLL_THREAD_DETACH:
         // Do thread-specific cleanup.
            break;

        case DLL_PROCESS_DETACH:
         // Perform any necessary cleanup.
            break;
    }
    return TRUE;  // Successful DLL_PROCESS_ATTACH.
} 
```

更多信息：[DLL入口点](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583%28v=vs.85%29.aspx)

# linux - 如何在终端中添加一个txt文件而不放入任何数据

> ID：15476477
> 
> 赞同：0
> 
> 时间：2013-03-18T12:07:08.110
> 
> 标签：linux, bash, terminal, linux-mint

我正在尝试将文本文件添加到桌面然后将其删除，我确实有代码可以创建文件，但现在每当我创建它时，它就会让我将数据放入其中，无论我在终端中键入什么都会保存进入创建的txt文件。我需要的是创建文件，然后用户从菜单中选择另一个选项。

```
#!/bin/bash
#
# Script to perform some simple tasks
#
chmod 755 TaskB.sh
while:
do
clear
echo "*********************"
echo "* Tools *"
echo "*********************"
echo "* [1] Install gnome-disk-utility and gparted *"
echo "* [2] Create CET103Demo.txt *"
echo "* [3] Delete CET103Demo.txt *"
echo "* [4] Search BASH *"
echo "* [0] Exit/Stop *"
echo "*********************"
echo -n "Enter your menu choice [0-4]: "
read yourch
case $yourch in
1) *Not yet inserted code* ;;
2) cat > Desktop/CET103Demo.txt;;
3) rm Desktop/CET103Demo.txt;;
4) *Not yet inserted code* ;;
0) exit 0;;
*) echo "Oooops!!! Please select choice 1,2,3,4 or 0";
echo "Press Enter to continue..."; read ;;
esac
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:14:09.593

如果我理解你的话，试着改变

```
2) cat > Desktop/CET103Demo.txt;; 
```

进入

```
2) touch Desktop/CET103Demo.txt;; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:15:59.107

如果您需要创建文件，一种可移植的方法是使用此代码段：

```
:> Desktop/CET103Demo.txt 
```

`:`代表`true`（相同的命令）：它只是一个以 0 状态退出的命令。重定向到一个文件，它将创建该文件。这适用于大多数不同的类 Unix shell。

* * *

> $ LANG=C help :
> :: :
> 空命令。
> 
> ```
> No effect; the command does nothing.    
> 
> Exit Status:    
> Always succeeds. 
> ```

* * *

> $ LANG=C help true
> true: true
> 返回一个成功的结果。
> 
> 退出状态：
> 总是成功。

* * *

> $ LANG=C help false false: false
> 返回不成功的结果。
> 
> ```
> Exit Status:    
> Always fails. 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:24:20.477

你有很多选择..

```
touch file.txt # preferred option
cat /dev/null > file.txt
true > file.txt
echo -n > file.txt 
```

# openssl - 在 shell 脚本中没有提示的情况下签署证书

> ID：15476479
> 
> 赞同：49
> 
> 时间：2013-03-18T12:07:09.737
> 
> 标签：openssl, certificate

我正在编写一个 shell 脚本来使用 openssl 签署证书：

```
openssl ca -config "$CONF" -out "$BOXCERT" -infiles "$CSRFILE" 
```

但是，在运行它时，openssl 总是询问我是否要签署证书：

```
Certificate is to be certified until Mar 19 11:50:33 2023 GMT (3653 days)
Sign the certificate? [y/n]:y

1 out of 1 certificate requests certified, commit? [y/n]y
Write out database with 1 new entries
Data Base Updated 
```

我希望脚本在服务器中以非交互方式运行。是否有一些命令行参数或配置文件选项告诉 OpenSSL 签署证书并在不提示的情况下提交它？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-18T12:10:28.703

您可以使用`-batch`openssl 选项。

例如：

```
 openssl ca -batch -config "$CONF" -out "$BOXCERT" -infiles "$CSRFILE" 
```

# android - getEditableText 和 getText 有什么区别？

> ID：15476480
> 
> 赞同：5
> 
> 时间：2013-03-18T12:07:11.723
> 
> 标签：android, autocomplete, android-edittext

我在 android 中使用 autoCompleteTextView 时发现了这个问题。

似乎它不允许 autoCompleteTextView 通过 getEditableText 方法获取数据，因为数据是由 autoCompleteList 选择的。

我的理解是，当用户使用 inputType（使用 android 键盘）编辑数据时，更改会通过可编辑界面保存在某处，但是当我们通过自动完成列表选择数据时，它不会将其视为可编辑数据。

如何找到哪个方法与哪个组件一起使用。或者我可以将这两种方法中的任何一种与任何可编辑和不可编辑组件一起使用。这些方法对所有组件都有效还是有任何差异。

我要求澄清概念。最好提供一些示例。

提前感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-28T10:30:13.853

**`getEditableText()`**

> 返回 TextView 作为 Editable 对象显示的文本。如果文本不可编辑，则返回 null。

**`getText()`**

> 返回 TextView 正在显示的文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T12:12:26.280

编辑文本：- EditText 是对 TextView 的薄薄的一层，它将自身配置为可编辑。欲了解更多信息：- [http://developer.android.com/reference/android/widget/EditText.html](http://developer.android.com/reference/android/widget/EditText.html)

可编辑文本：- 这是可以更改内容和标记的文本界面（与字符串等不可变文本相反）。如果您制作可编辑的 DynamicLayout，则布局将随着文本的更改而重排。更多信息：- [http://developer.android.com/reference/android/text/Editable.html](http://developer.android.com/reference/android/text/Editable.html)

它会解决你的困惑。

# mysql - Mysql Advance 查询 - 日期范围表到每天的结果列

> ID：15476483
> 
> 赞同：1
> 
> 时间：2013-03-18T12:07:16.857
> 
> 标签：mysql, sql, date, date-range

我在这里遇到了挑战。

我有一张看起来像这样的桌子。

```
| DayDate    |EndDate    |  Rate  | 
-----------------------------------
| 2013-07-01 |2013-08-05 | 200.00 | 
| 2013-08-06 |2013-10-20 | 150.00 | 
| 2013-10-21 |2013-12-31 | 130.00 | 
```

我喜欢运行一个查询，它应该返回给定日期范围内的每日费率值。例如，我想查询从 2013 年 8 月 3 日到 2013 年 8 月 8 日每天的费率，预期结果应该如下所示。

```
|   From    |   To      |  Day 1  |  Day 2  |  Day 3  |  Day 4  |  Day 5  |
---------------------------------------------------------------------------
|2013-08-03 |2013-08-08 | 200.00  |  200.00 |  150.00 |  150.00 |  150.00 | 
```

在我的项目范围内，添加到该列的天数不会超过30天，通常平均在3到10天之间。我希望看到一些很酷的想法和有效的方法来生成上述结果。

### 更新

为避免天数列混淆，天数列将由查询生成搜索周期之间的天数。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:05:29.930

假设：您有一个静态日历表，其中包含一列 DAY_DT 和每个日期一行。在我的示例中，我将其命名为 CAL_DAY，因为它与我们在数据仓库中使用的名称相同。

使用以下查询，您只需在主查询中添加新的 MAX() 列，并添加更多 CASE 语句来扩展您的查询以反映更大的范围。

```
SELECT MAX(MIN_DAY_DT), 
  MAX(MAX_DAY_DT), 
  MAX(D1) AS "Day 1",
  MAX(D2) AS "Day 2",
  MAX(D3) AS "Day 3",
  MAX(D4) AS "Day 4",
  MAX(D5) AS "Day 5"
FROM(
  SELECT cmin.DAY_DT AS MIN_DAY_DT,
    cmax.DAY_DT AS MAX_DAY_DT,
    CASE WHEN cd.DAY_DT = cmin.DAY_DT + 1 THEN rt.Rate ELSE 0 END AS "D1",
    CASE WHEN cd.DAY_DT = cmin.DAY_DT + 2 THEN rt.Rate ELSE 0 END AS "D2",
    CASE WHEN cd.DAY_DT = cmin.DAY_DT + 3 THEN rt.Rate ELSE 0 END AS "D3",
    CASE WHEN cd.DAY_DT = cmin.DAY_DT + 4 THEN rt.Rate ELSE 0 END AS "D4",
    CASE WHEN cd.DAY_DT = cmin.DAY_DT + 5 THEN rt.Rate ELSE 0 END AS "D5"
FROM CAL_DAY cd
  JOIN CAL_DAY cmin
    ON (cd.DAY_DT >= cmin.DAY_DT)
  JOIN CAL_DAY cmax
    ON (cd.DAY_DT <= cmax.DAY_DT)
  LEFT JOIN RateTable rt ON
    (cd.DAY_DT BETWEEN rt.DayDate AND rt.EndDate)
WHERE cmin.DAY_DT = '2013-08-03' 
  AND cmax.DAY_DT = '2013-08-08') 
```

# sql - 将返回值转换为 x 位长整数

> ID：15476485
> 
> 赞同：0
> 
> 时间：2013-03-18T12:07:27.663
> 
> 标签：sql, int, oracle-sqldeveloper

是否可以将值作为 7 位整数返回？我只是发现可以只返回一个整数而没有其他选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:15:37.980

我假设这将是 Oracle 中非常相似的语法。在 SQL Server 中，语法为：

`SELECT RIGHT('0000000' + CAST(MyInt as varchar(7)), 7)`

这将返回一个 0 填充的字符串，代表您的号码。请记住，如果您想要 0-padding，这必须是一个 STRING 而不是实际的数值。

# regex - 如何使用正则表达式识别连续字符？

> ID：15476488
> 
> 赞同：2
> 
> 时间：2013-03-18T12:07:37.957
> 
> 标签：regex

我有一个字符串，需要检查它是否有一个字符序列。例如。abcde 或 abcd

假设我需要标记长度大于 3 的字符串。

换句话说，我需要标记*abcpa*，而不是*abpqx*

我可以使用 RegEx 执行此操作吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:10:31.943

此正则表达式匹配具有至少 3 个连续字符的序列：

```
/(?:abc|bcd|cde|def|efg|fgh|ghi|hij|ijk|jkl|klm|lmn|mno|nop|opq|pqr|qrs|rst|stu|tuv|uvw|vwx|wxy|xyz)/i 
```

以下 perl 脚本检查指定数量的连续字符的序列：

```
#!/usr/bin/perl
use strict;
use warnings;
my ($len, $test) = @ARGV;
my $s = "abcdefghijklmnopqrstuvwxyz";
my $re = "";
for (0..length($s)-$len) {
    $re .= substr($s, $_, $len)."|";
}
chop $re;
exit 1 unless ($test =~ m/(?:$re)/i); 
```

如果未找到匹配项，则脚本以错误代码 1 退出，否则以错误代码 0 退出。

称它为`perl script.pl <min length of sequence> <string to test>`.

例子：

```
% perl script.pl 5 aaaabbbbeeeeehijklllmnppp && echo "match" || echo "no match"
match

% perl script.pl 6 aaaabbbbeeeeehijklllmnppp && echo "match" || echo "no match" 
no match 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:08:10.187

我认为您可以使用正则表达式来做到这一点。我假设您要查找的序列必须从 A 开始。Powershell 中的以下示例有一个缩减的正则表达式，仅使用前 8 个字符来提高速度和清晰度，并且需要扩展：

```
$re = "(?<=(?<=(?<=(?<=(?<=(?<=a)b?)c?)d?)e?)f?)g?"
"abcpa" -match $re
$matches # => "abc"
$matches[0].length # => 3 
```

没有经过全面测试，但我认为没问题。

# javascript - 不允许 div 阻止父事件

> ID：15476490
> 
> 赞同：0
> 
> 时间：2013-03-18T12:07:39.873
> 
> 标签：javascript, events, mouseenter

我有一些元素，在调度 mouseenter 时，它会创建一个 div，该 div 使用只有边框的 div 覆盖所选元素。

像这样的东西：

```
function attachSelectorBarTo(el){
            var bar = $('#editor-selection-bar');
            bar.css({
                top:el.offset().top,
                left:el.offset().left
                width:el.outerWidth(),
                height:el.outerHeight()
            }).show();
        }
        $(function(){
            $('[editordata]').mouseenter(function(event){
                event.stopPropagation();
                attachSelectorBarTo($(this));
            }).mouseleave(function(){
                //hideSelectorBar();
            });
        }); 
```

但是，选择器 div 处于绝对位置，并且 z-index 比其他的大。所以，当我尝试选择另一个元素时，下面的元素当然不会得到 mouseneter 事件。我的问题是：有一种方法可以让选择器 div 不阻止其他元素事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:14:36.173

没关系！我刚刚找到了这个 CSS 属性！

```
pointer-events:none; 
```

# sql - SQL - 迄今为止的 ID，多个日期

> ID：15476492
> 
> 赞同：0
> 
> 时间：2013-03-18T12:07:57.980
> 
> 标签：sql, sql-server, for-loop, while-loop, identity

这是我的桌子：

```
Date        SSSN    MyID    Hours
01012013    1234            8
01012013    2345            7
01012013    3456            8
02012013    1234            5
02012013    2345            12
02012013    3456            7 
```

我想设置 MyID 使表格如下所示：

```
Date        SSSN    MyID    Hours
01012013    1234    1       8
01012013    2345    1       7
01012013    3456    1       8
02012013    1234    2       5
02012013    2345    2       12
02012013    3456    2       7 
```

我在看这个：[SQL Server 中 for-loop 的语法](https://stackoverflow.com/questions/6069024/for-loop-for-sql) 和这个[SQL：更新 ID；根据日期](https://stackoverflow.com/questions/13218851/sql-update-id-according-to-date)，但没有到达那里。

似乎是一项轻松的工作，但不知何故无法按预期工作。

为了清楚起见，我不能使用 alter table IDENTITY(1,1)。

这是在使用 SQL Server 时。

通过使用，dense_rank() 而不是 BlueFeet 建议的 row_number() 解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:21:07.130

根据您使用的数据库产品，您可能可以应用 a`row_number()`来生成`MyID`值：

```
;with cte as
(
  select date, sssn, myid, hours,
    row_number() over(partition by sssn order by date) rn
  from yourtable
) 
update cte
set myid = rn; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/947524/3)。

该`row_number()`功能在大多数现代 RDBMS 中都可用。

编辑＃1，由于您可以在每个日期有多行`sssn`，那么您将要使用`dense_rank`：

```
;with cte as
(
  select date, sssn, myid, hours,
    dense_rank() over(order by date) rn
  from yourtable
) 
update cte
set myid = rn; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/01e74/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:13:47.823

如果您的 DBMS 可以计算两个日期之间的差异，您可以使用以下

1.  获取最短日期

    从您的表格中选择分钟（日期）

2.  更新你的身份证

    更新您的表集 myid = DBMS_SPECIFIC_FUNCTION_DATE_DIFF(min_date, date) + 1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:19:07.747

您没有说明您正在使用什么 RDBMS。但是，如果是 MySQL，您可以这样做：

```
update yourtable set myid=extract(day from date); 
```

当然，这是假设 MyID 列应该等于日期的日期部分。

# android - 使用 oAuth 的 RESTful Web 服务用于移动应用程序

> ID：15476493
> 
> 赞同：3
> 
> 时间：2013-03-18T12:07:58.177
> 
> 标签：android, web-services, rest, mobile, oauth

我正在构建一个由两个主要部分组成的应用程序：

1.  带有 REST API 的 Web 应用程序。
2.  移动应用程序（安卓、iPhone）。

Web 应用程序有一个数据库，用于存储有关用户的数据（如帖子、事件等）。
移动应用程序使用 Web 应用程序的 REST api 来访问该数据，但为此我需要某种身份验证（用户必须对自己进行身份验证才能访问/修改他的数据）。

我知道这可以通过以下方式轻松完成，即移动应用程序在对 Web api 的每个请求中提供用户名和密码，并且 Web 应用程序在服务请求之前针对数据库验证该用户名和密码。
但是，我想使用 oAuth（因此用户可以使用 Google、Facebook 等登录），这就是事情变得复杂的地方，我不确定什么是最好的方法。

**我的第一个想法**：移动应用程序将 oAuth 提供程序（例如 Facebook）凭据（用户名和密码）发送到 Web 应用程序，然后根据 oAuth 提供程序对它们进行身份验证。我很快意识到这是不行的，因为这意味着用户必须相信您的网站不会滥用给定的凭据，所以这不是这样做的方式。**不好**

**我的第二个想法**：移动应用程序使用 Web 应用程序 api 告诉 Web 应用程序它想要针对 oAuth 提供者 P 进行身份验证。Web 应用程序重定向到提供者 P，用户在其中输入他的凭据。然后，提供商 P 重定向回用户登录的 Web 应用程序，并将有关成功登录的 JSON 发送到移动应用程序。如果不是用户必须手动输入他的凭据的部分，这将是很棒的。我实现了这个解决方案，问题是，在移动应用程序访问 Web 应用程序 api JSON 后没有立即返回，但首先重定向完成，这一切都搞砸了。我正在考虑在移动应用程序中使用 webView，但是当要发送 JSON 时，我不知道如何从 webView 返回。我不确定我是否应该进一步追求这个想法或者这是错误的做法？**如果解决了一些问题可能会很好**

**我的第三个想法**：移动应用程序直接针对 oAuth 提供者 P 进行身份验证。如果成功，则移动应用程序向包含用户信息（例如用户 ID 或用户密码）的网络应用程序发送请求，以便网络应用程序知道它是哪个用户。然而，这意味着网络应用程序必须信任给定用户真正经过身份验证的移动应用程序。这意味着 Web 应用程序需要确保从移动应用程序访问 api。我可以通过在移动应用程序中硬编码一个特殊密码（秘密）来做到这一点，该密码随每个请求一起发送，以证明该请求是由移动应用程序发送的。
这种方法的不好的一面是，我必须针对（移动操作系统、oAuth 提供者）的每种组合针对 oAuth 提供者实现移动应用程序身份验证。我也不确定它有多安全。你认为这是一个好方法吗，我可以改进/改变什么？我有一种感觉，我错过了一些东西。**这可能很好，但需要做很多工作**

请告诉我什么想法最好，如果有任何改进方法，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:54:19.363

经过一些进一步的研究并与我的一些同事交谈后，我决定最好的选择是**第二个想法**。我决定使用 WebView（在 iPhone 和 Android 上都存在）来处理重定向。WebView 我将以这样的方式进行配置，即当用户被重定向回返回 JSON 的 Web 应用程序上的特定 URL 时，它会自动退出。
我认为这是最好的主意，因为这样我只需在移动应用程序上实现/配置 WebView，而所有 oAuth 逻辑都在 Web 应用程序上完成，这意味着移动应用程序（android、iPhone）之间的代码重复更少，而且更多可扩展（我必须修改一个网络应用程序，而不是 2 或 3 个移动应用程序）。

# c# - 创建一个选择相同列的某些元素的gridview事件

> ID：15476494
> 
> 赞同：0
> 
> 时间：2013-03-18T12:08:00.593
> 
> 标签：c#, events, datagridview

我有一个来自数据库的一些单元格的网格视图。用户一次只能选择 1 列的行。例子 ：

```
 0   1   2  
0  a   b   c      
1  d   e   f     
2  g   h   i 
```

如果用户将鼠标（同时按下左键）从 0/0 = a 拖动到 1/1 = e，则仅应选择单元格 a 和 d。（不应允许多列选择）

如果有人可以提供帮助，

谢谢

这就是我一开始得到的：

```
private void myDataGridView1_MouseDown(object sender, MouseEventArgs e) {

            var hti = dataGridView1.HitTest(e.X, e.Y);
            coord[0] = hti.RowIndex;
            coord[1] = hti.ColumnIndex;
}

private void dataGridView1_MouseUp(object sender, MouseEventArgs e)
        {
            var hti = dataGridView1.HitTest(e.X, e.Y);
            coord[2] = hti.RowIndex;
            coord[3] = hti.ColumnIndex;

            // Some actions 
} 
```

此示例仍然选择多个列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:40:52.057

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace gridview
{
    public partial class Form1 : Form
    {
        bool buttonIsPressed = false;
        int rowIndex, columnIndex;

        public Form1()
        {
            InitializeComponent();
            completeDataGridview();
        }

        //this function only creates a filled DataGridView
        private void completeDataGridview()
        {
            dataGridView1.RowCount = 3;
            for (int x = 0; x < 3; x++)
            {
                for (int y = 0; y < 3; y++)
                {
                    dataGridView1.Rows[x].Cells[y].Value = ((char)(97 + y + 3 * x)).ToString();
                }
            }

            // this part is stolen from http://stackoverflow.com/questions/7412098/fit-datagridview-size-to-rows-and-columnss-total-size
            int height = 0;
            foreach (DataGridViewRow row in dataGridView1.Rows)
            {
                height += row.Height;
            }
            height += dataGridView1.ColumnHeadersHeight;

            int width = 0;
            foreach (DataGridViewColumn col in dataGridView1.Columns)
            {
                width += col.Width;
            }
            width += dataGridView1.RowHeadersWidth;

            dataGridView1.ClientSize = new Size(width + 2, height);

        }

        private void dataGridView1_CellMouseDown(object sender, DataGridViewCellMouseEventArgs e)
        {
            buttonIsPressed = true;
            rowIndex = e.RowIndex;
            columnIndex = e.ColumnIndex;            
        }

        private void dataGridView1_CellMouseUp(object sender, DataGridViewCellMouseEventArgs e)
        {
            if (buttonIsPressed)
            {
                int startingRow = 0;
                if (rowIndex > e.RowIndex)
                    startingRow = e.RowIndex;
                else
                    startingRow = rowIndex;

                //at first we have to deselect every cell
                deselectEveryCell();

                //then reselect the old ones
                int amountOfRows = Math.Abs(rowIndex - e.RowIndex) + 1;
                for (int x = 0; x < amountOfRows; x++)
                {
                    dataGridView1.Rows[startingRow + x].Cells[columnIndex].Selected = true;
                }
            }
            buttonIsPressed = false;
        }

        private void deselectEveryCell()
        {
            for (int x = 0; x < dataGridView1.RowCount; x++)
            {
                for (int y = 0; y < dataGridView1.ColumnCount; y++)
                {
                    dataGridView1.Rows[x].Cells[y].Selected = false;
                }
            }
        }

        private void dataGridView1_MouseLeave(object sender, EventArgs e)
        {
            if (buttonIsPressed)
                deselectEveryCell();
        }
    }
} 
```

这是您需要的代码。功能`completeDataGridview()`并不重要。

您需要 3 个事件。`CellMouseDown`,`CellMouseUp`和`MouseLeave`.

在`CellMouseDown`我们获取初始选定单元格的信息并将其保存在 rowindex 和 columnindex 中。并且 buttonPressed 设置为 true （这在以后可能会有所帮助）。

如果在鼠标指针指向单元格时释放鼠标按钮，`CellMouseUp`则触发事件。我们首先检查哪个单元格更靠近 DGV 的顶部（开始处的单元格或当前单元格）。然后取消选择每个单元格。然后我们检查我们选择的单元格的数量（存储在 中`amountOfRows`）。然后我们再次选择“正确”的单元格。

该事件`MouseLeave`也可能很重要。否则，用户可以通过开始选择一个单元格并将鼠标拖出 DGV 来“滥用”您的功能。如果没有该功能，他将能够选择多个列。

如果您仍有任何问题，请不要犹豫。

# algorithm - 背包的变化 - 精确重量的最低总成本

> ID：15476499
> 
> 赞同：3
> 
> 时间：2013-03-18T12:08:19.440
> 
> 标签：algorithm, dynamic-programming, knapsack-problem

物品有多种类型（N 种），每种都有重量 wi 和成本 ci。每一个都有无数个。问题是制作一个具有精确（W）重量和最低物品总成本的背包。我知道在这种情况下我应该使用动态，但这不是常见的背包问题，我找不到关系。我也发现了一些类似的问题，但我不明白这些解决方案。这是链接[1](https://stackoverflow.com/questions/7949705/variation-on-knapsack-minimum-total-value-exceeding-w?rq=1)、[2](https://stackoverflow.com/questions/15457143/knapsack-with-minimum-cost/15457546?noredirect=1#comment21873666_15457546)。怎么用DP来解决呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:37:52.917

让 f[i] 表示，为了获得权重 i，最小成本。g[i] 表示是否可以精确组合权重 i；

```
f[0]=0;g[0]=true;
for (int i=0;i<N;i++)
    for (int j=0;j<W;j++)
        if (g[j]) {
            g[j+w[i]]=true;
            if (f[j+w[i]]==0||f[j+w[i]]>f[j]+c[i])
                f[j+w[i]]=f[j]+c[i];
        }

if (g[W]) return f[W];
else return 0;//impossible 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T12:44:57.760

假设您想找到完成重量`W`和所需的最低成本`c_i > 0`，`w_i > 0`然后我们可以将其定义为仅使用重量为 的项目`min_cost(i, W)`可以实现的最低成本`i``N``W`

*   基本情况发生在我们只有一个项目时，因此当`i=N`. 在这种情况下，解决方案是：

    `min_cost(N, 0) = 0`因为如果我们不使用 item`N`那么我们的权重就等于 0

    `min_cost(N, W) = c_i * W / w_i`if`W`是`w_i`ie的倍数`W mod w_i = 0`

    `min_cost(N, W) = Infinity`否则，因为我们不能`W`只用最后一项来达到精确的重量。

*   现在可以将循环关系表示为：

    `min_cost(i, W) = min(c_i * k + min_cost(i+1, W - k * w_i))``k=0`直到_`W - k*w_i < 0`

循环关系表明，我们将`i`尽可能多次使用 item，而我们没有使权重大于`W`。

然后，您可以使用递归算法实现此方法，使用[记忆](http://en.wikipedia.org/wiki/Memoization)和存储您认为适合实际解决方案（`k`递归中的 s）。

**编辑**根据建议，如果我们注意到有两种情况会影响`min_cost(i, W)`. 这种情况首先是根本不需要使用第 i 个项目，即`min_cost(i+1, W)`当我们将至少使用第 i 个项目时，这与`min_cost(i, W - w_i)`我们可能`i`多次使用项目相同。这将我们的重现更改为以下内容：

```
min_cost(i, 0) = 0         // We already reached our goal
min_cost(i, W) = Infinity  // if (W < 0 or i > N) then we can't get to W

min_cost(i, W) = min(min_cost(i+1, W), min_cost(i, W - w_i) + c_i) 
```

# javascript - 简单的正则表达式在 Javascript 中不起作用

> ID：15476500
> 
> 赞同：0
> 
> 时间：2013-03-18T12:08:19.193
> 
> 标签：javascript, regex

我的正则表达式是下一个

```
/^(\.\w*)|(\d*\.?\d*)$/ 
```

它应该适用于浮点数（`123.23`, `12.`, `.56`）和任何以点开头的单词。 当但没有 OR
时我很困惑：
`/^(\.\w*)|(\d*\.?\d*)$/.test("qweasdzxc"); // return true`

```
/^(\.\w*)$/.test("qweasdzxc"); // return false   
/^(\d*\.?\d*)$/.test("qweasdzxc"); // return false 
```

在[RegexPal 上](http://regexpal.com/?flags=gm&regex=%5E%28%5C.%5Cw%2a%29%7C%28%5Cd%2a%5C.?%5Cd%2a%29%24&input=All%20these%20match%3a%0A%0A12%0A12.2%0A1236.32%0A123.123%0A0%0A%0AThese%20don%27t%3a%0A%0Asdhdfsh%0A)一切正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:13:19.917

它应该是

```
/^((\.\w*)|(\d*\.?\d*))$/ 
```

您需要将两个 OR 条件包装在另一个`(..)`.

否则，它被解释为`^(\.\w*)`or`(\d*\.?\d*)$`而不是`^`and ( `(\.\w*)`or `(\d*\.?\d*)`) and `$`。

演示：[小提琴](http://jsfiddle.net/arunpjohny/rz3uf/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:13:01.610

试试这个

```
/^((\.\w*)|(\d*\.?\d*))$/.test("qweasdzxc"); // false
/^((\.\w*)|(\d*\.?\d*))$/.test(".5"); // true 
```

您必须封装正则表达式条件 (A|B)。

# java - 实例化非最终静态变量是线程安全的吗？

> ID：15476501
> 
> 赞同：1
> 
> 时间：2013-03-18T12:08:23.197
> 
> 标签：java, multithreading, design-patterns, thread-safety, jvm

这两个班级是一样的吗？

```
public class SingleTone {

    // yes this is a bug what if i change the class this way
    //  private static SingleTone instance = new SingleTone();
    // and empty constructor?
    private static SingleTone instance; 
    private SingleTone() {
        instance = new SingleTone();
    }

    public static SingleTone getInstance(){
        return instance;
    }
} 
```

和

```
public class SingleTone {

    private final static SingleTone instance = new SingleTone();

    private SingleTone() {
    }

    public static SingleTone getInstance(){
        return instance;
    }
} 
```

在构造函数实例化的非最终变量中是否存在任何线程安全问题？

问题2：

有什么区别

```
 private final static SingleTone instance = new SingleTone();

    private SingleTone() {
    } 
```

还有这个：

```
 private final static SingleTone instance;

    private SingleTone() {
        instance = new SingleTone();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:11:34.370

**问题 1**

你的第一个例子不起作用。

就像您`SingleTone.getInstance()`在创建该类型的对象之前进行此调用一样，它将返回 null

第二个例子工作正常

**问题2**

同样的情况，您在构造函数中设置了一个静态字段。这没有意义，因为您不能保证在访问静态字段之前已经调用了构造函数。

你可以这样做：

```
private final static SingleTone instance;

static {
    instance = new SingleTone();
} 
```

这将在第一次加载类时实例化静态字段。

* * *

回答你的评论。

如果你这样做：

```
private static final SingleTone instance = new SingleTone(); 
```

这是线程安全的，就好像第一个线程还没有完成初始化类并且另一个线程尝试访问它，另一个线程将阻塞。

有关更多信息，请参阅此问题：[Java 中静态块的线程安全](https://stackoverflow.com/questions/462697/thread-safety-of-static-blocks-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:15:13.420

这两个选项实际上是相同的（但`super()`在这两种情况下都缺少构造函数中的调用）。

然而，使用私有静态字段实现单例是 Java 往往被弃用。现在，我会使用枚举。

```
public enum Elvis {
    INSTANCE;
    private final String[] favoriteSongs =
        { "Hound Dog", "Heartbreak Hotel" };

    public void printFavorites() {
        System.out.println(Arrays.toString(favoriteSongs));
    }
} 
```

如果您想进一步阅读：[http ://www.drdobbs.com/jvm/creating-and-destroying-java-objects-par/208403883?pgno=3](http://www.drdobbs.com/jvm/creating-and-destroying-java-objects-par/208403883?pgno=3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:30:24.253

SingleTone 类必须返回一个引用，所以第一个例子是完全错误的。

考虑以下过程： 1\. 类加载由 JVM 启动 2\. 类加载到 JVM。3\. 构造函数执行 4\. 对象创建完成

public class SingleTone { 对于此示例，实例将在 1 和 2 之间处于活动状态 private final static SingleTone instance = new SingleTone();

```
private SingleTone() {
}

public static SingleTone getInstance(){
    return instance;
} 
```

}

public class SingleTone { 对于这个例子，实例将在 3 到 4 个 private final static SingleTone 实例之间存活；

```
private SingleTone() {
    instance = new SingleTone();
}

public static SingleTone getInstance(){
    return instance;
} 
```

}

# facebook - facebook分享时看不到图片

> ID：15476507
> 
> 赞同：0
> 
> 时间：2013-03-18T12:08:40.617
> 
> 标签：facebook, tags, facebook-opengraph

我正在尝试分享[此页面](http://www.watchfit.com/article/The-health-benefits-of-honey/124)，但看不到 Facebook 标签。如果我使用 facebook 测试工具： http: [//developers.facebook.com/tools/debug/og/object ?q=http%3A%2F%2Fwww.watchfit.com%2Farticle%2FThe-health-benefits-of-honey %2F124](http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.watchfit.com%2Farticle%2FThe-health-benefits-of-honey%2F124)

它显示`302 error`在页面上，但我不明白为什么。这些是脸书标签：

```
<\meta property="og:title" content="The health benefits of honey" /\>
<\meta property="og:url" content="http://www.watchfit.com/article/The-health-benefits-of-honey/124" /\>
<\meta property="og:description" content="Health benefits of Honey. The medical benefits of Honey, especially Manuka Honey. Two recipes from the Leon cookbook" /\>
<\meta property="og:site_name" content="watchfit.com" /\>
<\meta property="og:image" content="http://www.watchfit.com/uploads/articles/224X224/1363093263.jpg" /\> 
```

有谁知道可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:24:44.520

仔细查看调试器响应，您会看到它告诉您图像太小，尽管它位于 224X224 文件夹中，但它只有 152 像素高。

# autofac - Autofac：向接受参数的委托注册添加装饰器

> ID：15476509
> 
> 赞同：2
> 
> 时间：2013-03-18T12:08:47.943
> 
> 标签：autofac

我正在尝试使用 autofac 管理我的 WCF 客户端的注册。

我需要解决`Func<MachineEndpoint, IFooService>`，所以我使用以下方法注册了服务：

```
builder.Register((c, p) => FooService(c, p.TypedAs<MachineEndpoint>())).UseWcfSafeRelease() 
```

FooService 在哪里：

```
private IJobService FooService(IComponentContext c, MachineEndpoint endpoint) {...} 
```

这工作正常，但我想添加一个装饰器来处理某些安全错误，所以我尝试了以下方法：

```
builder.Register((c, p) => FooService(c, p.TypedAs<MachineEndpoint>())).UseWcfSafeRelease().Named<IFooService>("simple foo service");
builder.RegisterDecorator<IFooService>((c, p, inner) => Wrap(inner, p.TypedAs<MachineEndpoint>(), c.Resolve<CertificateLookupCache>()), "simple foo service"); 
```

但我得到一个 DependecyResolutionException：

```
Autofac.Core.DependencyResolutionException: An exception was thrown while executing a resolve operation. See the InnerException for details. ---> System.InvalidOperationException: Sequence contains no elements
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at MyModule.<Load>b__4(IComponentContext c, IEnumerable`1 p) in MyModule.cs:line 30 (the first line above)
   at Autofac.Builder.RegistrationBuilder.<>c__DisplayClass1`1.<ForDelegate>b__0(IComponentContext c, IEnumerable`1 p)
   at Autofac.Core.Activators.Delegate.DelegateActivator.ActivateInstance(IComponentContext context, IEnumerable`1 parameters)
   at Autofac.Core.Resolving.InstanceLookup.Activate(IEnumerable`1 parameters)
   at Autofac.Core.Resolving.InstanceLookup.Execute()
   at Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration registration, IEnumerable`1 parameters)
   at Autofac.Features.LightweightAdapters.LightweightAdapterRegistrationSource.<>c__DisplayClass3.<RegistrationsFor>b__1(IComponentContext c, IEnumerable`1 p)
   at Autofac.Builder.RegistrationBuilder.<>c__DisplayClass1`1.<ForDelegate>b__0(IComponentContext c, IEnumerable`1 p)
   at Autofac.Core.Activators.Delegate.DelegateActivator.ActivateInstance(IComponentContext context, IEnumerable`1 parameters)
   at Autofac.Core.Resolving.InstanceLookup.Activate(IEnumerable`1 parameters)
   at Autofac.Core.Resolving.InstanceLookup.Execute()
   at Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration registration, IEnumerable`1 parameters)
   at Autofac.Core.Resolving.ResolveOperation.Execute(IComponentRegistration registration, IEnumerable`1 parameters)
   --- End of inner exception stack trace ---

Server stack trace:
   at Autofac.Core.Resolving.ResolveOperation.Execute(IComponentRegistration registration, IEnumerable`1 parameters)
   at Autofac.Core.Lifetime.LifetimeScope.ResolveComponent(IComponentRegistration registration, IEnumerable`1 parameters)
   at lambda_method(Closure , MachineEndpoint ) 
```

如何注册这些函数，以便将 MachinEndpoint 参数同时传递给 WCF 客户端对象和装饰器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:39:54.990

问题是由您的参数使用引起的：`p.TypedAs<MachineEndpoint>()`因为目前 Autofac 有一个限制，即在创建装饰对象`RegisterDecorator`时不传递参数。`inner`

因此，当它尝试创建`inner`时`(c, p) => FooService(c, p.TypedAs<MachineEndpoint>())`将`(IEnumerable<Parameter> p)`是空的，因此您会遇到异常。

你基本上可以做两件事：

您可以尝试以不再使用的方式重新组织您的代码`p.TypedAs<MachineEndpoint>()`。

或者

因为`IFooService`无论如何您的 WCF 服务没有多个实现，您可以通过“手动”注册您的装饰器：

```
builder.Register((c, p) => FooService(c, p.TypedAs<MachineEndpoint>()))
       .UseWcfSafeRelease()
       .Named<IFooService>("simple foo service");
builder.Register<IFooService>((c, p) => 
     Wrap(c.ResolveNamed<IFooService>("simple foo service",
          TypedParameter.From(p.TypedAs<MachineEndpoint>())),
          p.TypedAs<MachineEndpoint>(),
          c.Resolve<CertificateLookupCache>())); 
```

# android - 广播组没有在android中的对话框内收听

> ID：15476514
> 
> 赞同：0
> 
> 时间：2013-03-18T12:09:15.587
> 
> 标签：android, dialog, radio-button

我无法从 DialogFragment 课程中收听 RadioGroup。我没有收到任何错误，但日志没有显示任何内容。请帮我...

```
public class SimpleDialog extends DialogFragment{

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

    LayoutInflater inflater = getActivity().getLayoutInflater();
    View view = inflater.inflate(R.layout.radio, null);

    builder.setTitle(R.string.dialog_name)
            .setView(inflater.inflate(R.layout.radio, null))
            .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
               }
           });

    RadioGroup radioGroup = (RadioGroup) view.findViewById(R.id.radioGroup);
    radioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() 
    {
        public void onCheckedChanged(RadioGroup group, int checkedId) {

            Log.v("Dialog", "checked");
        }
    });

    return builder.create();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T12:19:06.817

我刚刚想通了，我必须传递给 builder.setView(view)

# c# - 如何引用foreach中的实际元素？

> ID：15476516
> 
> 赞同：1
> 
> 时间：2013-03-18T12:09:26.913
> 
> 标签：c#, iteration

我使用以下代码单步执行*IEnumerable*。

```
IEnumerable<Thing> things = ...;
foreach (Thing thing in things)
  thing = method(thing); 
```

编译器不同意它，因为我指*的*是迭代变量。当然，我打算改为影响列表中的基础对象。我怎么做？

现在，我使用数字迭代解决了这个问题，但那里有两个问题。一方面，恕我直言，编码不好。除此之外，它还需要我将我的*东西*从*IEnumerable*更改为*IList*（或者我什至应该使用*List*吗？！），当*事情*变大时，它**会**咬住我的下背部。

 *```
//List<Thing> things = ...;
IList<Thing> things = ...;
for (int i = 0; i < things.Count(); i++)
  things[i] = method(things[i]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:15:16.947

您可以使用 Linq 投影序列：

```
 var transformedThings = things.Select(t => method(t)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T12:11:53.417

如果要在所有元素上运行该方法，为什么不转换整个集合：

```
public IEnumerable<Thing> TransformThings(IEnumerable<Thing> input)
{
    foreach (var thing in input)
        yield return method(thing);
} 
```

你可以像这样使用它：

```
var transformedThings = TransformThings(things); 
```

这将在您遍历集合时转换每个元素，这意味着您不必将整个集合枚举到内存中。

**编辑**

更简单：

```
var transformedThings = things.Select(thing => method(thing)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T12:24:13.100

在迭代列表中的项目时，您不能更改引用，因为它限制在枚举器中，但您可以更改项目中的对象...。

使用功能强大的 LINQ 或只是克隆您的列表，如 ToList() 或 ToArray()。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T12:21:00.557

使用某些集合可以轻松完成项目替换，例如数组或`List<T>`（如您所述）使用`for`循环（不是`foreach`）。

无法使用语句**替换对象。**`foreach`

如果你真的想使用`IEnumerable<T>`接口，有两种选择：

1.  **变换 s 的序列**（`Thing`见`IEnumerable<T>.Select()`方法）。在这种情况下，`Thing` **不修改**源序列和源实例。

    例如：

    ```
    var newThings = things.Select(t => new Thing(/* pass different values using original t instance */)); 
    ```

2.  **更新**每个实例的状态：

    ```
    class Thing
    {
        public void UpdateState(/* parameters */)
        {
            // Update field/property values, etc.
        }
    }

    ...        

    foreach (var thing in things)
        thing.UpdateState(/* new values */); 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T12:18:40.197

如果`IEnumerable`将保持相同的长度，我将使用`ToArray()`并使用循环进行迭代`for`。

例如：

```
char[] chars = "somestring".ToArray();
for (int i = 0; i < chars.Length; i++)
{
  chars[i] = SomeMethod();
} 
```

用于修改集合中的某些内容。

```
Thing[] things = ...;
for (int i = 0; i < things .Length; i++)
{
  AddOne(ref things[i]);
}

public void AddOne(ref Thing t)
{
  t.Foo += 1;
} 
```*

# iphone - 登录 Facebook 时出现 Facebook 错误

> ID：15476517
> 
> 赞同：0
> 
> 时间：2013-03-18T12:09:27.060
> 
> 标签：iphone, ios, xcode, facebook

我需要在墙上发布详细信息，登录 facebook 时出现以下错误，

```
- (void)dialog:(FBDialog*)dialog didFailWithError:(NSError *)error {
    NSLog(@"Error message: %@", [error localizedDescription]);
}

    The operation couldn’t be completed. (NSURLErrorDomain error -999.) 
```

只有我第一次得到这个错误，下次它完美共享。为了分享我这样使用，

```
[[delegate facebook] dialog:@"feed"
                  andParams:params
                andDelegate:self]; 
```

我该如何解决这个错误。为什么会发生此错误。

谢谢你。

# php - sfThumbnailPlugin 透明部分的黑色背景

> ID：15476518
> 
> 赞同：0
> 
> 时间：2013-03-18T12:09:28.443
> 
> 标签：php, pdf, imagemagick, symfony-1.4, thumbnails

我在 Symfony 1.4 项目中使用 sfThumbnail-Plugin（版本 2.0.1）为上传的 PDF 文件创建缩略图。不幸的是，文档的透明部分，即背景（在所有常见的 PDF 查看器中显示为白色）在缩略图中被转换为黑色。

有没有什么办法解决这一问题？

我的代码：

```
$t = new sfThumbnail(134, 190, true, true, 75, 'sfImageMagickAdapter', array('extract' => 1));
$t->loadFile(sfConfig::get('sf_upload_dir') . "/path/" . $this->getObject()->pdf);
$t->save(sfConfig::get('sf_upload_dir') . '/path/' . $this->getObject()->pdf . '.jpg', 'image/jpeg'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:38:39.030

我无法为此提供工作代码，但您可以考虑使用支持透明度的 png，如下所示：

[ImageMagick PDF to JPGs 有时会导致黑色背景](https://stackoverflow.com/questions/10934456/imagemagick-pdf-to-jpgs-sometimes-results-in-black-background)

此外，您可以尝试按照此处所述添加展平选项：
[从 PDF 创建 JPG 缩略图会导致新版本的 ImageMagick 出现问题](https://stackoverflow.com/questions/5028208/creating-jpg-thumbnails-from-pdf-causes-problems-with-new-version-of-imagemagick/5029071#5029071)

您可以在第 7 个参数中传递附加选项（未经测试，您）

```
$t = new sfThumbnail(134, 190, true, true, 75, 'sfImageMagickAdapter', array('extract' => 1, 'flatten' => true) 
```

# java - Java 在虚拟图中绘制值并找到积分区域。

> ID：15476520
> 
> 赞同：1
> 
> 时间：2013-03-18T12:09:34.417
> 
> 标签：java, math

快速提问。我得到了 10 000 行信息。我每行有 2 个值。该行的格式为：（时间，水速）。我想使用数值积分来解决通过传感器的水量，但我对如何在 Java 中解决这个问题感到非常困惑。

我会假设一个图表会很好，但我不需要它是图形的，所以也许一个数组列表可以解决问题。

任何提示、提示和技巧将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:21:30.530

您可以为此使用[*梯形规则*](http://en.wikipedia.org/wiki/Trapezoidal_rule)：按时间对间隔进行排序，然后按如下方式计算总和：

```
// assume that time is expressed using some class
Time[] time = ...
// assume that the water speed is double, expressed in volume per unit of time.
// Further assume that Time units match the units in the denominator of water speed,
// e.g. if the speed is in galons per minute, then the time unit is minutes;
// if the speed is in galons per second, then the time unit is seconds, and so on
double[] speed = ...

double sum = 0;
for (int i = 0 ; i < time.length-1 ; i++) {
    double deltaT = time[i+1].subtract(time[i]).toTimeUnits();
    // This is the formula for the trapezoidal rule on non-uniform grid
    sum += (speed[i]+speed[i+1])*deltaT;
}
double totalFlow = sum / 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:18:42.360

如果您已经将这些数据作为（时间、速度）对进行了积分，并且您想对给定时间段内的总流量进行积分，那么为什么不直接使用数值积分（例如 Euler、Simpson、Runga-Kutta）？读取这些值并将它们输入到集成例程中，您就完成了。

也许[Apache Commons Math](http://commons.apache.org/proper/commons-math//)将是一个不错的起点。

图形表示会很好，并且可以很好地检查您的数值结果，但这不是必需的。

# php - PHP删除cookie问题

> ID：15476521
> 
> 赞同：0
> 
> 时间：2013-03-18T12:09:44.200
> 
> 标签：php, cookies

我正在设置一个cookie，如下所示：

```
if($persist=='persist'){ //  if remember me then set long cookie expiration

        setcookie("aukCookie", "$user", time()+9900000, "/", "myurl.com");
        setcookie("aukCookie2", "$username", time()+9900000, "/", "myurl.com");
        setcookie("AUKpersist", "$user", 0, "/", "myurl.com");

    } else {

        setcookie("aukCookie", "$user", time()+86400, "/", "myurl.com");
        setcookie("aukCookie2", "$username", time()+9900000, "/", "myurl.com");

    } 
```

然后删除我去同一个文件与 url 变量`?logoff=true`

然后我尝试以下方法：

```
if ($_GET[logoff]=='true'){
    setcookie ("aukCookie", "", time()-3600, "/", "myurl.com"); 
    setcookie ("AUKpersist", "", time()-3600, "/", "myurl.com"); 
    // use below to send user somewhere when logged out successfully
    header("Location: /userAdmin/userlogin.html?loggedOut"); 
} 
```

但是cookie根本没有被删除。该`header()`功能工作正常。

有任何想法吗？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:13:18.263

尝试设置 null 而不是空，例如：

```
if ($_GET[logoff]=='true'){
    setcookie ("aukCookie", NULL, time()-3600, "/", "myurl.com"); 
    setcookie ("AUKpersist", NULL, time()-3600, "/", "myurl.com"); 
    // use below to send user somewhere when logged out successfully
    header("Location: /userAdmin/userlogin.html?loggedOut"); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:15:52.640

请尝试`unset`

IE，

```
unset($_COOKIE["aukCookie"]); 
```

它会工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:17:23.300

尝试

```
setcookie("aukCookie", "", -1, "/", "myurl.com"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-18T12:30:01.290

删除 cookie

**bool setcookie ( 字符串 $name [, string $value [, int $expire = 0 [, string $path [, string $domain [, bool $secure = false [, bool $httponly = false ]]]]]])**

`setcookie ("mycookiename", "", time() - 3600);`

另一个例子

`setcookie("mycookiename", $value, time()+3600, "/~rasmus/", "example.com", 1);`

测试一下

```
enter code here // Print an individual cookie 
```

`enter code here echo $_COOKIE["mycookiename"];` `echo $HTTP_COOKIE_VARS["mycookiename"];`

`// Another way to debug/test is to view all cookies print_r($_COOKIE);` 这是设置 cookie 的概念

在**注销**的情况下，您需要**取消设置**cookie，如下例所示

`unset($_COOKIE['mycookiename']);`

像这样的东西

if ($_GET[注销]=='true'){

未设置（$_COOKIE['aukCookie']）；

未设置（$_COOKIE['AUKpersist']）；

header("位置：/userAdmin/userlogin.html?loggedOut");

}

# symfony - Symfony2 - 文件 config_.yml 不存在

> ID：15476528
> 
> 赞同：0
> 
> 时间：2013-03-18T12:10:17.460
> 
> 标签：symfony, yaml, config, env

我正在尝试清理 symfony2 ( `php app/console cache:clear --env-prod`) 上的产品缓存，但出现以下错误：

> [InvalidArgumentException] 文件“/var/www/vhosts/ns21206.ovh.net/citydom/app/config/config_.yml”不存在。

在我的文件`app.php`中，我使用以下行创建了项目：

```
$kernel = new AppKernel('prod', true); 
```

我认为这是非常标准的。

我认为 symfony 正在尝试使用 env "" 创建项目，但我不知道为什么。

我做错什么了 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T12:19:23.360

这不是`app.php`错的。这是你的`cache:clear`命令。使用`--env=prod`而不是`--env-prod`.

# python - 如何使用 gevent 验证 url

> ID：15476532
> 
> 赞同：1
> 
> 时间：2013-03-18T12:10:46.033
> 
> 标签：python, rabbitmq, gevent

我有一百万个要验证的网址。其中一些是我的国家无法访问的，有些是无效的，我想验证所有的 url。我使用python来做到这一点，并使用gevent来加快速度，但我是gevent的新手，有些似乎不起作用。我的代码如下：

```
import gevent
import gevent.monkey
import urllib2
from gevent.pool import Pool
from gevent import Timeout
gevent.monkey.patch_all()
p = Pool(10)

seconds = 10

#timeout = Timeout(seconds)
#timeout.start()
#timer = Timeout(3).start()

def down(url):
    urllib2.urlopen(url)

def wait():
    while True:
        gevent.sleep(0)
        print 'hi'
        with Timeout(5,False):
            p.spawn(down,'http://www.twitter.com')
        print '---------------------------------'
wait() 
```

推特无法从我的国家/地区访问，输出为：

```
hi
---------------------------------
hi
---------------------------------
hi 
```

5秒后它没有告诉超时，我的代码有什么问题？

我想知道如何在运行时向 gevent 添加新任务。

我想在分发中验证我的所有 url，所以我从我的数据库中读取 url 并将 url 发送到消息队列，很多接收者从消息中接收消息，然后验证 url。

我的消息是rabbitmq。

我只知道我是否有 10 个网址，我可以使用 gevent，例如：

```
for x in xrange(10)
    tasks.append(gevent.spawn(validate,url))
gevent.joinall(tasks) 
```

但在我的情况下，我只阅读了一条消息，然后生成了一个 greenlet，如果一个 url 无法访问，它将阻止该消息，直到 greenlet 完成。

那么我怎样才能做一些异步的方式来验证我的网址呢？比如我总是读回 url 并在没有阻塞的情况下生成 greenlet。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:51:10.253

您需要用`with Timeout()`. 现在，您正在包装`gevent.spawn()`/`pool.spawn()`调用，这是不对的。在这种情况下，您要超时的 IO 代码是`urllib2.urlopen(url)`.

这种性质的代码通常看起来像这样：

```
validated = []
urls = ["http://a.com", "http://b.com"]

def down(url):
    with Timeout(5, False):
        urllib2.urlopen(url)
        validated.append(url)

pool = gevent.Pool(10)
for url in urls:
    pool.spawn(down, url)
pool.join() #you didn't call pool.join() in the original code because you have a wait loop already, which is okay
print "Valid URLs are: %s" % ", ".join(validated) 
```

你可以保持你的无限`while True`循环，并在那里从你的数据库/队列中获取传入的 URL。这可能就是你想要的。我只是举例说明我将如何检查我想要验证的预设 URL 列表。

在这种情况下，您的错误是您`pool.spawn()`使用`with Timeout()`. 只产生一个greenlet 的行为几乎会立即发生，因此在其周围添加一个超时将无济于事。这就是为什么您没有看到超时。您需要使用上下文包装`urllib2.urlopen()`调用。`Timeout()`

此外，如果您只是检查超时，这很好用。您可能想要检查请求是否返回了 HTTP`200`代码，在这种情况下，您应该检查`urllib2.urlopen(url).getcode()`.

# python - 如何在python中给出直方图掩码

> ID：15476533
> 
> 赞同：0
> 
> 时间：2013-03-18T12:10:47.327
> 
> 标签：python

我是 Python 新手。我找到了一个在线计算图像直方图的代码。我想计算图像局部区域的直方图，所以我尝试使用蒙版。这是我的代码：

```
 i_rgb1 = cv2.imread(im1)
   img1 = cv2.cvtColor(i_rgb1, cv.CV_BGR2HSV)
   hist2 = np.zeros(img2.shape)

bins = np.arange(256).reshape(256, 1)
color = [(255, 0, 0), (0, 255, 0), (0, 0, 255)]

for labelx in xrange(len(label)):
    temp = labels_map.copy()
    temp[labels_map != label[labelx]] = 0
    temp[labels_map == label[labelx]] = 255
    cv2.imwrite('mask.png', temp)
    for ch, col in enumerate(color):
        hist_item1 = cv2.calcHist([img1], [ch], temp, [256], [0, 255]) 
```

其中 labels_map 是一个图像矩阵，由每个像素的标签分配组成。但是当我运行这段代码时，我收到一条错误消息

```
OpenCV Error: Assertion failed (!mask.data || mask.type() == CV_8UC1) in unknown function 
```

请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:26:01.677

我认为这是因为 temp 不是`uint8`掩码数组，您可以对其进行转换：

```
cv2.calcHist([img1], [ch], temp.astype(np.uint8), [256], [0, 255]) 
```

或者，当您创建它时：

```
temp = (labels_map == label[labelx]).astype(np.uint8) 
```

# python - PySerial 可以读但不能写

> ID：15476536
> 
> 赞同：0
> 
> 时间：2013-03-18T12:11:00.590
> 
> 标签：python, serial-port, pyserial, uart

我正在尝试使用 PySerial 连接到 FTDI FT232R 芯片。我已验证与我的 RealTerm 的通信，并且使用 RealTerm 可以发送和接收数据。但是，我在 Python 中的实现只能接收数据。

我正在尝试使用这一行编写：

```
for i in range(0,100):
    print "Loop "+str(i)
    print "Sending byte"
    ser.flush()
    print ser.write("B".encode('ascii'))
    time.sleep(1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:58:32.080

通信取决于芯片的配置、连接电缆和 PySerial 的参数。

这看起来像是电缆连接或通信协议（握手）的问题。

最后一个是最容易检查的。它可以是 Xon/Xoff、硬件或无，但两边必须相同。

如果握手是通过硬件进行的，则它取决于除 trx 和 rcv 之外的电缆的其他线路。

# c# - 如何在 System.Text.RegularExpressions.Regex 中同时查找整数或小数

> ID：15476537
> 
> 赞同：1
> 
> 时间：2013-03-18T12:11:04.407
> 
> 标签：c#, regex, string

c# 中的 Text.RegularExpressions.Regex 类，在这个类中，我试图在其中找到包含“年”字的字符串

```
 string s11 ="java developer in new york 2years exp" 
```

在我使用之前

```
Regex = new Regex("(\d+)(years?)"); 
```

在这里，我是给定的 s11 字符串中的 getttig inter 值，例如

```
Match match = regex.Match(ss);

if(match.Success)
{
    string s = match.Groups[1];
    string s1 = match.Groups[2];
} 
```

但是这个只适用于整数，如果假设我改变了我的字符串，比如：

```
string s11="java developer in new york 0.10years exp" 
```

它停止工作。

我想同时使用整数或小数

```
 string s11="java developer in new york 2years exp"
    string s11="java developer in new york 0.10years exp" 
```

任何机构都可以为这个问题提供正确的解决方案吗？即同时查找整数和十进制值。

感谢 pradeep

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:25:19.350

你的很近；我想如果你只是添加可选的小数部分：

```
Regex = new Regex("((?:\d*\.)?\d+)(years?)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:16:41.790

关于什么 ？

```
Regex = new Regex("([0-9]?\.?\d+)\s*(years?)"); 
```

此外，还有许多工具可让您以交互方式试用它们，例如

[http://visualstudiogallery.msdn.microsoft.com/16b9d664-d88c-460e-84a5-700ab40ba452](http://visualstudiogallery.msdn.microsoft.com/16b9d664-d88c-460e-84a5-700ab40ba452)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T12:16:55.263

试试这个

```
new Regex(@"([0-9]*\.[0-9]+|[0-9]+)*years"); 
```

此外，为了将来参考，[http://regexpal.com/](http://regexpal.com/)是一个测试正则表达式的简单工具， [http](http://www.regular-expressions.info) ://www.regular-expressions.info提供了很多示例。

# iphone - UIWebView 捕获响应标头

> ID：15476539
> 
> 赞同：11
> 
> 时间：2013-03-18T12:11:06.627
> 
> 标签：iphone, ios, uiwebview, http-headers, response

我搜索/谷歌了很多，但无法得到关于如何在`UIWebview`. 假设我在应用程序启动时将用户重定向到 UIWebview 中的注册网关（它已经处于活动状态），当用户完成注册时，应通知应用程序，并在注册时分配给用户的成功唯一 ID，该 ID 在 HTTP 响应标头中传回.

是否有任何直接的方法可以使用捕获/打印 HTTP 响应标头`UIWebview`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-18T12:34:19.953

没有办法从中获取响应对象`UIWebView`（为此向苹果提交一个错误，id 说）

## 但是两种解决方法

1) 通过共享的 NSURLCache

```
- (void)viewDidAppear:(BOOL)animated {
    NSURL *u = [NSURL URLWithString:@"http://www.google.de"];
    NSURLRequest *r = [NSURLRequest requestWithURL:u];
    [self.webView loadRequest:r];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSCachedURLResponse *resp = [[NSURLCache sharedURLCache] cachedResponseForRequest:webView.request];
    NSLog(@"%@",[(NSHTTPURLResponse*)resp.response allHeaderFields]);
}
@end 
```

**如果这对你有用，这是理想的**

* * *

别的

1.  您可以完全使用 NSURLConnection ，然后只需使用您下载的 NSData 来提供`UIWebView`:)

这将是一个**糟糕**的解决方法！（正如理查德在评论中指出的那样。）它确实有很大的缺点，你必须看看它在你的情况下是否是一个有效的解决方案

```
NSURL *u = [NSURL URLWithString:@"http://www.google.de"];
NSURLRequest *r = [NSURLRequest requestWithURL:u];
[NSURLConnection sendAsynchronousRequest:r queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *resp, NSData *d, NSError *e) {
    [self.webView loadData:d MIMEType:nil textEncodingName:nil baseURL:u];
    NSLog(@"%@", [(NSHTTPURLResponse*)resp allHeaderFields]);
}]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-18T13:16:34.763

我喜欢objective-c 运行时。有什么你想做但没有 API 的吗？DM；人力资源部。

好吧，更严肃地说，这是解决方案。它将捕获从 发起的**每个**`CFNetwork`URL 响应，这正是 UIWebView 在幕后使用的。它还将捕获 AJAX 请求、图像加载等。

对此添加过滤器可能就像对标头的内容执行正则表达式一样简单。

```
@implementation NSURLResponse(webViewHack)

static IMP originalImp;

static char *rot13decode(const char *input)
{
    static char output[100];

    char *result = output;

    // rot13 decode the string
    while (*input) {
        if (isalpha(*input))
        {
            int inputCase = isupper(*input) ? 'A' : 'a';

            *result = (((*input - inputCase) + 13) % 26) + inputCase;
        }
        else {
            *result = *input;
        }

        input++;
        result++;
    }

    *result = '\0';
    return output;
}

+(void) load {
    SEL oldSel = sel_getUid(rot13decode("_vavgJvguPSHEYErfcbafr:"));

    Method old = class_getInstanceMethod(self, oldSel);
    Method new = class_getInstanceMethod(self, @selector(__initWithCFURLResponse:));

    originalImp = method_getImplementation(old);
    method_exchangeImplementations(old, new);
}

-(id) __initWithCFURLResponse:(void *) cf {
    if ((self = originalImp(self, _cmd, cf))) {
        printf("-[%s %s]: %s", class_getName([self class]), sel_getName(_cmd), [[[self URL] description] UTF8String]);

        if ([self isKindOfClass:[NSHTTPURLResponse class]])
        {
            printf(" - %s", [[[(NSHTTPURLResponse *) self allHeaderFields] description] UTF8String]);
        }

        printf("\n");
    }

    return self;
}

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-27T00:57:49.703

如果您想要@Richard J. Ross III 所写的更高级的 API 代码，您需要[继承 NSURLProtocol](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURLProtocol_Class/index.html#//apple_ref/occ/cl/NSURLProtocol)。

An`NSURLProtocol`是处理 URL 请求的对象。因此，您可以将它用于特定任务，这些任务在[NSHipster](http://nshipster.com/nsurlprotocol/)和[Ray Wenderlich](http://www.raywenderlich.com/59982/nsurlprotocol-tutorial)上有更好的描述，其中包括您从响应中获取 HTTP 标头的情况。

## 代码

从 NSURLProtocol 创建一个新类的子类，你的 .h 文件应该如下所示：

```
@interface CustomURLProtocol : NSURLProtocol <NSURLConnectionDelegate>

@property (nonatomic, strong) NSURLConnection *connection;

@end 
```

你的 .m 文件应该有这些方法来处理你想要的

```
@implementation CustomURLProtocol

+ (BOOL)canInitWithRequest:(NSURLRequest *)request {
    // Here you can add custom filters to init or not specific requests
    return YES;
}

+ (NSURLRequest *)canonicalRequestForRequest:(NSURLRequest *)request {
    // Here you can modify your request
    return request;
}

+ (BOOL)requestIsCacheEquivalent:(NSURLRequest *)a toRequest:(NSURLRequest *)b {
    return [super requestIsCacheEquivalent:a toRequest:b];
}

- (void)startLoading {
    // Start request
    self.connection = [NSURLConnection connectionWithRequest:self.request delegate:self];
}

- (void) stopLoading {
    [self.connection cancel];
    self.connection = nil;
}

#pragma mark - Delegation

#pragma mark NSURLConnectionDelegate

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    if ([response isKindOfClass:[NSHTTPURLResponse class]]) {
        NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;

        // Here we go with the headers
        NSDictionary *allHeaderFields = [httpResponse allHeaderFields];
    }

    [self.client URLProtocol:self didReceiveResponse:response cacheStoragePolicy:NSURLCacheStorageNotAllowed];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [self.client URLProtocol:self didLoadData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    [self.client URLProtocolDidFinishLoading:self];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    [self.client URLProtocol:self didFailWithError:error];
} 
```

最后要做的就是将此协议注册到加载系统，这在 AppDelegate 上很容易实现：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    [NSURLProtocol registerClass:[CustomURLProtocol class]];
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-18T12:22:01.920

`NSHTTPURLResponse`有类似的方法

```
- (NSDictionary *)allHeaderFields 
```

有关更多信息 [https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSHTTPURLResponse_Class/Reference/Reference.html#//apple_ref/occ/cl/NSHTTPURLResponse](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSHTTPURLResponse_Class/Reference/Reference.html#//apple_ref/occ/cl/NSHTTPURLResponse)

编辑：对不起，我没有想到`UIWebView`. 如果您使用我的解决方案有效`NSURLConnection`

但是，如果您向您的 webview 提供 a`NSURLConnection`那么您就有机会捕获包括响应标头在内的连接。

# perl - Perl - 将文件文本解析为哈希

> ID：15476540
> 
> 赞同：2
> 
> 时间：2013-03-18T12:11:11.030
> 
> 标签：perl, parsing, hash

我想解析文件文本然后将其放入哈希中。我的文件如下所示：

```
key1 val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val
key2 val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val
key3 val
key4 val,val
key5 val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val,val,val,val,val,val,val,val,val,val,val,val 
```

我的键在空格之前，我的值是空格之后和每个逗号之前的元素列表。我有一些没有键的行，因为值在几行上继续。

所以我想要一个这样的哈希（我最熟悉 Python）：

```
hash={'key1':[val,val,...],'key2':[val,val,...]} 
```

我的代码：`

```
my %hashNames;
open INFILE, "./file.txt" or die $!;
my @temp = ();

while (my $line = <INFILE>)
{

    my @names = split /[\t,]/, $line;
    my $ID = $names[0];
    if ( $line =~ /\t/ )
    {

        my @temp=();
        for (my $i = 1; $i < @names; $i +=1)
        {
            push (@temp, $names[$i]);
        }

    }
    else
    {   

        for (my $i = 0; $i < @names; $i +=1)
        {
            push (@temp, $names[$i]);
        }       
    }
}` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:56:16.607

您的问题是换行不再分隔您的记录。所以处理它的一种方法是禁用无效的默认输入记录分隔符`$/`并模拟一个有效的分隔符：

```
use strict;
use warnings;
use Data::Dumper;

my %hash;
my $file;
{
    local $/;         # disable input record separator
    $file = <DATA>;   # entire file here now!
}

for my $line (split /^(?=\S+ )/m, $file) {  # records begin this way now
    $line =~ s/\n//g;                       # remove newlines
    my ($key, $val) = split ' ', $line, 2;  # divide into two fields
    $hash{$key} = [ split /,/, $val ];      # store the data
}

print Dumper \%hash;

__DATA__
key1 val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val
key2 val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val
key3 val
key4 val,val
key5 val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val,val,val,val,val,val,val,val,val,val,val,val 
```

**说明：**

*   `/^(?=\S+ )/m`使用`/m`修饰符进行拆分意味着`^`现在将匹配字符串中的换行符，这将模拟输入记录分隔符。
*   通过将 LIMIT 2 添加到`split`
*   我们使用一个匿名数组直接拆分为哈希，`[ ... ]`其中包含一个拆分语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:53:54.023

使用[Parse::RecDescent](http://search.cpan.org/perldoc?Parse%3A%3ARecDescent)模块

```
#! /usr/bin/env perl

use strict;
use warnings;

use Parse::RecDescent;

our %hash;
my $p = Parse::RecDescent->new(q!
  hash: entry(s?)
  entry: key value(s /,/)  { $::hash{$item[1]} = [ @{ $item[2] } ] }
  key: /\S+/
  value: /([^,\n]|\\,])+/
!);
die "$0: failed to create parser" unless defined $p;

my $text = do {{ local $/; <DATA> }};
$p->hash($text) or die "$0: parse failed";

for (sort keys %hash) {
  print "$_ => val x ", scalar @{ $hash{$_} }, "\n";
}

__DATA__
key1 val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val
key2 val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val
key3 val
key4 val,val
key5 val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val,val,val,val,val,val,val,val,val,val,val,val 
```

输出：

```
key1 => 值 x 22
key2 => 值 x 22
key3 => 验证 x 1
key4 => 验证 x 2
key5 => 值 x 52
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:00:52.540

这里的困难在于您的记录以“前面没有逗号的换行符”终止。不幸的是，输入记录分隔符`$/`不能设置为正则表达式。这留下了三个舒适的解决方案：

1.  将整个文件加载到内存中。这并不像听起来那么糟糕，因为我们稍后在哈希中拥有相同数量的信息。然后我们可以`split /(?<!,)\n/`得到实际的记录。

    ```
    my %hash = do {
      local $/; # set to undef, for slurp
      map {
        my ($key, $vals) = split /\s+/, $_, 2; # split on first whitespace, into two strings
        $key => [ split /\s*,\s*/, $vals ];    # return a list of a key and a value array
      } split /(?<!,)\n/, <FILE>;              # split the file into records
    }; 
    ```

2.  我们可以编写一个`readline`替代品来缓冲输入并可以用正则表达式终止行。

3.  我们可以将尾随逗号视为一个续行字符。

    ```
    my %hash;
    while(<FILE>) {
      $_ .= <FILE> while /,\n\z/;
      my ($key, $value) = split /\s+/, $_, 2;
      push @{ $hash{$key} }, split /\s*,\s*/, $value; # allow multiple occurrences of one key, simply append values to list.
    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T12:55:54.327

给你：

```
my %results;
my $key;
while(my $line = <INFILE>) {
    chomp($line);
    my @items = split(/, */, $line);
    $key = shift @items;
    $results{$key} = \@items;
} 
```

除了您的陈述之外，这适用于简单的情况：

*我有一些没有键的行，因为值在几行上继续。*

但是，要处理这个问题，您必须解释如何检测下一行是键还是值。如果您知道，那么您可以将其放在 if 语句中，并使用先前的键将新值添加到哈希中：

```
my %results;
my $key;
while(my $line = <INFILE>) {
    chomp($line);
    my @items = split(/, */, $line);
    my $tmpkey = shift @items;
    if (is_real_key($tmpkey)) {
        $key = shift @items;
        $results{$key} = \@items;
    } else {
        push (@{$results{$key}}, $tmpkey, @items);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T13:08:01.120

```
#!/usr/bin/perl

use strict;
use warnings;
use feature 'say';

use Data::Dumper;

my $res_hash = {};
my ($current_key, $values);
my $push_again;
while ( my $line = <DATA>) {
  chomp $line;
  push ( @{ $res_hash->{$current_key} }, split(/,/, $values) ) if ( $current_key and $values and ( index($line, ' ') > 0) );
  if ( index($line, ' ') > 0 ){
    $push_again = 0;
    ($current_key, $values) = split( /\s/, $line);    
  } else {
    $values .= $line;
    $push_again = 1;
  }

};
push ( @{ $res_hash->{$current_key} }, split(/,/, $values) ) if $push_again;

say "result:".Dumper($res_hash);

__DATA__
key1 val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val
key2 val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val
key3 val
key4 val,val
key5 val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,val,
val,val,val,val,val,val,val,val,val,val,val,val,val,val,val 
```

# plsql - 需要更新的记录有一个包含 & 的字段名称，TOAD 提示输入一个变量

> ID：15476542
> 
> 赞同：1
> 
> 时间：2013-03-18T12:11:16.223
> 
> 标签：plsql, oracle11g, updates, toad

我有一个需要修改 1500 条记录的要求。random 中有一些字段，其中 where 子句有一个 & ，如下所述：

```
 update abc where col1='AL_ATRADE_P&L_RP' 
```

我只是想将 1500 个 udpate 查询作为脚本执行，TOAD 提示我输入要输入的变量。如果我只是按 Enter 键，则 udpate 查询如下所示：

```
 update abc where col1='AL_ATRADE_P' 
```

但实际上我的记录有一个名为“AL_ATRADE_P&L_RP”的列

有什么建议可以摆脱这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:14:58.767

在 TOAD 中右键单击 SQL 窗口，您应该会看到一个勾选“提示替换变量”的选项。取消勾选此项，TOAD 将不再尝试替换 & 符号。

![在此处输入图像描述](../Images/c25253d2455526ad3b0062a379a6f76a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T15:53:30.007

添加到 Dazzal 答案。同样可以在 sqlplus 中通过使用以下命令来完成： SET DEFINE OFF; 这与在 TOAD 中将替换变量的提示设置为无相同。刚想和大家分享这个

# java - 获取数组列表 从数组列表 （LF方法将字符串数据作为数组而不是foreach返回）

> ID：15476543
> 
> 赞同：2
> 
> 时间：2013-03-18T12:11:17.383
> 
> 标签：java, class, arraylist, get

这是我的自定义`Class`（为了便于阅读，我翻译了名称并省略了构造函数等）

```
public class MyClass {
    private long id;
    private String name, description;
    private int pictureId;
    ...
} 
```

所以我使用这个类将所有数据存储为`ArrayList<MyClass>`

```
ArrayList<MyClass> items = getResources(); //fills the arraylist 
```

我想返回它的所有名字。

是否可以编写像这样的自定义方法`ArrayList<String> names = items.getAllNames();`？因为我不知道在哪里放置逻辑来解决`ArrayList`而不是`Class`.

```
getAllNames()
{
    for (MyClass item : items){
        names.add(item.getName());
    }
} 
```

每次我需要 ArrayList 中的某些东西时都放置 foreach 行，但它看起来很乱。有没有一种干净的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:20:13.013

您必须创建一个方法来迭代您的数组列表中的所有元素并将每个名称添加到您将返回的第二个列表中。我还没有读过 Java 的 lambda 表达式，但如果我回忆起我的 C# 经验中的任何内容，那么你可能可以使用 Java 8 来做到这一点。

```
public List<String> getNames(){
  List<String> names = new ArrayList<>();
  List<MyClass> elements = getElements();

  for(MyClass s : elements){
     names.add(s.getName());
  }

  return names;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:19:47.933

您必须提供自定义类 MyClass 的 getter，并且我使用 List 接口作为返回类型而不是 ArrayList，因为它更灵活。
你可以试试这个，如果有任何问题，请告诉我。
请找到代码片段：

```
 import java.util.ArrayList;
 import java.util.List;
   class Test{

        private List<MyClass> getResources() {
            // TODO Auto-generated method stub
                // Use your business logic over here
              ----------------------------------
            return new ArrayList<MyClass>();
        }
        // This is your method which will returns all the names
        public List<String> getAllNames(){
            List<String> names = new ArrayList<String>();
            List<MyClass> items = getResources();
            for (MyClass myClass : items) {
                names.add(myClass.getName());
            }
            return names;
        }
    } 
```

这是您的 bean 类 MyClass，我刚刚在此处添加了 getter 和 setter。

```
 public class MyClass {
        private long id;
        private String name;
        private String description;
        private int pictureId;

        public String getName() {
            return name;
        }
        public void setName(String name) {
            this.name = name;
        }

     -------------------------------------
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T12:21:18.653

尝试遵循这个结构：

```
public class MyClass {
        private long id;
        private String name, description;
        private int pictureId;
        ...
    }

    public class Itemlist {
        public ArrayList<MyClass> items = new ArayList<MyClass>();

    public ArrayList<String> getAllNames()
    {
        ArrayList<String> names= new ArrayList<String>();
        for (MyClass item : items){
            names.add(item.getName());
        }
    return names;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T12:19:56.653

有两种明显的解决方案，一种是中间类，比如 ClassList，它包含 MyClass 的私有 ArrayList 和对其进行操作的方法。如果您需要的不仅仅是迭代器，则特别有用。另一种解决方案是将迭代器代码放在 MyClass 类本身中。这是使用中间类。

```
public ClassList {
    ArrayList<MyClass> list = null;

    public void ClassList () {
        if (list == null)
            list = new ArrayList<MyClass> ();
    }

    public ArrayList<String> getAllNames(ArrayList<MyClass> fred) {

        ArrayList<String> names = new ArrayList<String>();

        for (MyClass fred : items) {
            names.add(items.getName());
        }
        return names;
    }
} 
```

看起来米兰在 MyClass 类中添加了一个示例。所以还有另一种方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T06:23:14.917

如果可以导入 Apache 常用的实用程序包，那么可以是这样的：

```
 List<String> fieldsValues=
(List<String>)CollectionUtils.collect(beanLs,new BeanToPropertyValueTransformer("fieldNameInBean")); 
```

# c - C中的动态数组升序排序

> ID：15476549
> 
> 赞同：1
> 
> 时间：2013-03-18T12:11:37.073
> 
> 标签：c, arrays, dynamic

我正在尝试对动态数组列表进行排序，但它不起作用，我不明白我应该怎么做。这是我到目前为止所做的：

```
 void ascending_sort(Controller* ctrl)
    {
    int i,j;
    Cost* aux;
    DynamicVector* c=getAllCosts(ctrl);
    for(i=0;i<getLen(c)-1;i++)
    {
        Cost* cost;
        for(j=i+1;j<getLen(c);j++)
        {
            if(cost[i].sum < cost[j].sum)
            {
                    aux=cost[i]; //error
                cost[i]=cost[j];
                cost[j]=aux; //error
            }
        }
    }
} 
```

这是结构：

```
typedef struct{
    char* day;
    char* type;
    int sum;
}Cost; 
```

我该如何解决？当我声明“Cost* aux”时，我认为我做错了什么。我希望你能帮帮我！

编辑：我更新了排序功能的新代码。现在它不打印我想要的。它只打印“成本 1”，然后我收到一个“结束程序”窗口，它会停止一切。可能是什么问题呢？

这是新的排序算法：

```
void ascending_sort(Controller* ctrl)
        {
        int i,j;
        DynamicVector* c=getAllCosts(ctrl);
        for(i=0;i<getLen(c)-1;i++)
        {
            Cost* cost=getElementAtPosition(c,i); //returns element on position
            for(j=i+1;j<getLen(c);j++)
            {
                if(cost[i].sum < cost[j].sum)
                {
                const Cost  aux=cost[i];
                            cost[i]=cost[j];
                            cost[j]=aux;
                }
            }
        }
    } 
```

这是打印功能：//此功能在控制台中

```
void PrintCosts(Console* console)
{
    DynamicVector* CostList=getAllCosts(console->ctrl);
    if (getLen(CostList))
    {
        int i;
        for(i=0;i<getLen(CostList);i++)
        {
            printf("\nCost %d\n\n",i+1);
            Cost *c=(Cost*)getElementAtPosition(CostList,i);
            PrintCost(c);
        }

    }
    else printf("No cost in the list!");
} 
```

这是从控制器调用排序函数到控制台的函数：

```
void AscendingSort(Console* console)
{
    ascending_sort(console->ctrl);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:13:36.740

`Cost`是的，当您需要实际值时，您正在使用指向 a 的指针。这是最里面的范围应该是什么：

```
const Cost aux = cost[i];
cost[i] = cost[j];
cost[j] = aux; 
```

请注意，我没有看到（或理解）`cost`、 的数组`Cost`以及您在循环中使用`c`的类型和长度之间的关系。`DynamicVector *`

此外，您的排序算法不是很好；你应该只使用`qsort()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:15:01.330

您使用`Cost*`而不是`Cost`for `aux`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:02:58.980

The revised sorting code is better, but is probably making unwarranted assumptions:

```
void ascending_sort(Controller* ctrl)
{
    DynamicVector *c = getAllCosts(ctrl);
    for (int i = 0; i < getLen(c)-1; i++)
    {
        Cost *cost = getElementAtPosition(c,i);
        for (int j = i+1; j < getLen(c); j++)
        {
            if (cost[i].sum < cost[j].sum)
            {
                const Cost aux = cost[i];
                cost[i] = cost[j];
                cost[j] = aux;
            }
        }
    }
} 
```

If you need to use `getElementAtPosition(c, i)`, you need to use `getElementAtPosition(c, j)` to get the second value. That much seems non-controversial to me.

Additionally, if you need the function to get the values, you probably need a function to put the values too.

```
void ascending_sort(Controller* ctrl)
{
    DynamicVector *c = getAllCosts(ctrl);
    for (int i = 0; i < getLen(c)-1; i++)
    {
        Cost *cost_i = getElementAtPosition(c, i);
        for (int j = i+1; j < getLen(c); j++)
        {
            Cost *cost_j = getElementAtPosition(c, j);
            if (cost_i->sum < cost_j->sum)
                swapElements(c, i, j);
        }
    }
} 
```

Or, maybe:

```
void ascending_sort(Controller* ctrl)
{
    DynamicVector *c = getAllCosts(ctrl);
    for (int i = 0; i < getLen(c)-1; i++)
    {
        Cost *cost_i = getElementAtPosition(c, i);
        for (int j = i+1; j < getLen(c); j++)
        {
            Cost *cost_j = getElementAtPosition(c, j);
            if (cost_i->sum < cost_j->sum)
            {
                setElementAtPosition(c, i, cost_j);
                setElementAtPosition(c, j, cost_i);
            }
        }
    }
} 
```

# c# - c#中的线程中止

> ID：15476551
> 
> 赞同：1
> 
> 时间：2013-03-18T12:11:44.127
> 
> 标签：c#, multithreading, backgroundworker

我编写了一个 C# 程序来调用一个函数，通过`backgndWorkerEnroll_DoWork`该函数又通过一个线程调用另一个函数。在我第一次启动线程后，该功能正常工作。然后我使用该方法中止线程`thread.Abort()`并再次调用`thread.Start()`方法。之前的函数调用仍然有效，它不会中止。如何强制关闭线程？

```
public int capture()
{
    System.Threading.Thread thEnroll = new System.Threading.Thread(delegate()
    {
        // winbio.OpenSession1();
        refresult1 = winbio.Enroll1(finger, false, refresult);
        //winbio.Enroll1(finger, false, refresult, out refresult1);
    });

    thEnroll.Name = "thEnroll";
    thEnroll.Start();
    while (true)
    {
        if (!thEnroll.IsAlive)
            break;
    }
    thEnroll.Abort();
    return result;
}

private void backgndWorkerEnroll_DoWork(object sender, DoWorkEventArgs e)
{
    capture();
} 
```

还有一个查询。如何通过按钮单击事件强制关闭 backgroundDo_Work。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:15:15.907

由于您有无限循环，因此似乎无法执行您的中止操作：

```
while (true)
{
    // This will run forever
    if (!thEnroll.IsAlive)
        break;
} 
```

这个循环阻止线程完成。
您的植入也似乎很奇怪，如果线程不存在，您不需要中止它..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:35:24.633

我不太熟悉`multithreading`，如果我错了，请纠正我......但据我了解，一旦 a`Thread`被中止，它就无法再次启动。这可以解释您正在经历的行为（它第一次工作正常，但在第一次`thread`停止之后就不行了）

`thread.abort`我用谷歌搜索了和之间的区别`thread.join`（[见这个](http://msdn.microsoft.com/nl-nl/library/cyayh29d%28v=vs.71%29.aspx "这个")）

如果您改为调用`Thread.Join`，线程将`exit`很好地代替抛出`ThreadAbortedException`站点还说的是，在您调用之后，您`abort`还应该调用`join`或处理`ThreadAbortedException`来执行此操作。

# iphone - UITableView 中的阴影不一致

> ID：15476559
> 
> 赞同：2
> 
> 时间：2013-03-18T12:12:03.613
> 
> 标签：iphone, ios, ipad, uitableview

我正在添加`shadows`到 a 的单个单元格中`UITableView`。阴影在意义上是不一致的，请考虑以下场景：

有 20 行要显示，最初，在第一个视图中只有 10 行可见。此处阴影按预期正确可见。但是，一旦我向下/向上滚动，现在可见的一些新单元格会按预期显示阴影，而其他单元格则不会。问题似乎与`zPosition`的。对于某些单元格，阴影在后面，而对于其他单元格，阴影在前面，而位于其下方的单元格则使其对用户可见/不可见。`UITableViewCell``layer`

因为，我遇到的大多数帖子（例如，[Objective C: How to add Shadow effect to navigation bar and table cells](https://stackoverflow.com/questions/6013137/objective-c-how-to-add-shadow-effect-to-navigation-bar-and-table-cells)）都没有明确设置`UITableViewCell`' 层的 zPosition 所以我想知道这是必需的还是我有什么我在这里失踪了。

编辑：请在此处找到代码片段

```
 -(UITableViewCell*)tableView:(UITableView*) tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
       navigatorCell* cell = (navigatorCell *)[tableView dequeueReusableCellWithIdentifier:@"cellIdentifier"] forIndexPath:indexPath];

    // cell configuration code goes here

   //now add shadow     
       [cell.layer setMasksToBounds:NO];
       cell.layer.shadowColor = [[UIColor blackColor] CGColor];
       cell.layer.shadowOffset = CGSizeMake(0.0f, 5.0f);
       cell.layer.shadowRadius = 3.0f;
       cell.layer.shadowOpacity = 0.750f;
       cell.clipsToBounds = NO;
      //if I uncomment this, then it works properly, but problem arises again if I insert/remove cells
      // cell.layer.zPosition = -indexpath.row; 

       CGRect shadowFrame = cell.layer.bounds;
       CGPathRef shadowPath = [UIBezierPath bezierPathWithRect:shadowFrame].CGpath;
       cell.layer.shadowPath = shadowPath;
       return cell;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:37:40.530

试试这样可能行得通，

```
 -(UITableViewCell*)tableView:(UITableView*) tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";
   navigatorCell* cell = (navigatorCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

             if (cell == nil) {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

            // cell configuration code goes here

           //now add shadow     
               [cell.layer setMasksToBounds:NO];
               cell.layer.shadowColor = [[UIColor blackColor] CGColor];
               cell.layer.shadowOffset = CGSizeMake(0.0f, 5.0f);
               cell.layer.shadowRadius = 3.0f;
               cell.layer.shadowOpacity = 0.750f;
               cell.clipsToBounds = NO;
              //if I uncomment this, then it works properly, but problem arises again if I insert/remove cells
              // cell.layer.zPosition = -indexpath.row; 

               CGRect shadowFrame = cell.layer.bounds;
               CGPathRef shadowPath = [UIBezierPath bezierPathWithRect:shadowFrame].CGpath;
               cell.layer.shadowPath = shadowPath;
              }
               return cell;
            } 
```

# asp.net-mvc - 在模型验证中未定义但在执行时验证

> ID：15476565
> 
> 赞同：1
> 
> 时间：2013-03-18T12:12:20.167
> 
> 标签：asp.net-mvc

我正在研究 MVC 项目。在模型中，我定义了一些属性。

```
public string Org { get; set; }
public string Design { get; set; } 
```

对于这两个属性，我没有定义任何验证属性，`[Required(ErrorMessage=.....)]`但仍在执行时它是 validate。

> jquery.validate.min.js
> 
> jquery.validate.unobtrusive.js
> 
> jquery.form.js

以上我正在使用的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:18:19.387

如果您希望摆脱必需的消息，您可以在 application_start() 中应用此代码

```
DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false; 
```

如果您想一起摆脱数据注释支持（参见[类似问题](https://stackoverflow.com/questions/2458417/can-i-disable-dataannotations-validation-on-defaultmodelbinder)）：`ModelValidatorProviders.Providers.Clear();`

# ios - 远程确保某个 iOS 应用程序持续运行

> ID：15476569
> 
> 赞同：2
> 
> 时间：2013-03-18T12:12:25.810
> 
> 标签：ios, mdm

我想将一系列 iPad 用作远程管理信息亭：持续运行特定的单个应用程序，如果它崩溃或设备重新启动，则重新启动它。iPad 的控件将无法访问，因此我不需要阻止其中任何一个。它们都将具有 3G 连接。我还需要能够推送应用更新。

据我所知，[Apple 的移动设备管理](http://www.apple.com/ipad/business/it-center/deployment-mdm.html)允许远程推送应用程序的更新。但是，似乎没有选项可以告诉操作系统打开某个应用程序。

我看了一下[fruitstrap](https://github.com/ghughes/fruitstrap)，它允许人们在连接到Mac的设备上安装和打开应用程序，就像Xcode一样。但是，我无法将 Mac 连接到每个 iPad 的底座连接器。这可能使用越狱是可能的，但我宁愿不依赖它，因为不确定它是否总是可用。

因此，我正在寻找任何方法来远程打开 iOS 设备上安装的特定应用程序，使用设备的 3G 连接，或配置设备本身以保持特定应用程序始终打开。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:40:22.283

有一个名为 AppLock 的配置，它允许您以 Kiosk 样式模式锁定某些应用程序。例如，如果您下载[Apple Configurator](http://www.macupdate.com/app/mac/42201/apple-configurator)，您将看到通过 UI 配置它的可能性。

此外，在这个[问题](https://stackoverflow.com/questions/12574895/error-using-the-app-lock-configuration-profile-setting-aka-kiosk-mode-with)中，您可以查看如何使用 AppLock 有效负载创建配置文件。

此配置有几处特别之处

*   它只能安装在“受监督”的 iOS 设备上。要使设备受到监督，您必须使用我提到的 Apple Configurator 进行准备。
*   它将iOS设备锁定在指定的应用程序中（它禁用主页按钮）
*   当您安装 AppLock 配置文件时，它会切换到锁定的应用程序。

关于受监督设备的几点说明：

*   处理此类设备的标准方法是使用 Apple Configurator 准备它们并通过 MDM 管理它们
*   此外，受监督模式限制了您可以连接设备的计算机。

还有一个更一般的说明：

*   我不知道 Kiosk 模式将如何与托管应用更新一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:02:33.720

IOS6 确实有 kiosk 模式，请参阅[http://www.ipadenclosures.com/blog/posts/your-ipad-into-a-kiosk](http://www.ipadenclosures.com/blog/posts/your-ipad-into-a-kiosk)。不确定您是否可以远程更新应用程序。

# javascript - JS Ajax 短期破解？

> ID：15476574
> 
> 赞同：3
> 
> 时间：2013-03-18T12:12:37.650
> 
> 标签：javascript, ajax, jquery

我有一个浏览器应用程序，它在加载特定页面时向服务器发出 ajax 请求以获取一些 JSON 数据。返回后，ajax 请求被处理，一切都很好。

我正在调用的服务器目前有一些烦人的间歇性问题，特别是随机导致我的 ajax 调用的响应不返回任何内容而不是 JSON。这个特定页面的有用性依赖于从这个 ajax 调用正确返回的数据，因此在某些情况下它没有按预期返回的事实导致我的用户（因此，我！）出现问题。

现在，如果我再次进行完全相同的调用，在初始调用返回错误响应之后，服务器将立即返回正确响应！

我不想涉及服务器问题，它们目前正在解决中，但我还没有时间表确定何时完成。因此，在解决服务器问题的同时，我想在我的 ajax 请求中加入某种捕获，以处理服务器返回错误响应的时间，然后**立即再次进行完全相同的调用**。请注意，这只是阻止我的用户抱怨的短期修复，直到服务器问题得到解决！

我目前拥有的与此类似：

```
$.ajax({
  type: "GET",
  data: data,
  success: function(data, textStatus, jqXhr){

    // Do stuff...

  }
}); 
```

当服务器抛出一个摆动时，`data`它会以未定义的形式返回。所以我真正想做的是测试是否`data`是`undefined`，如果是的话，重新对同一个ajax请求进行相同的调用（我所做的每个测试都显示第二次收到了正确的响应！）。

所以，对我来说，这感觉像是未定义测试中声明（喘气，震惊，恐怖！！！）的一个很好的用例，`Goto`但是，我什至不确定你可以在 JS 中做到这一点，而且，我知道它们的用途是被认为是非常糟糕的做法。

我知道有几种方法可以解决它，例如：

*   我可以将调用放入`while(wasAjaxCallSuccessful){}`循环中，将我的 ajax 请求设置为同步，并且仅将`wasAjaxCallSuccessful`变量设置为 true 如果`data`返回为 not `undefined`。但这感觉和使用 Goto 语句一样糟糕（如果允许的话）。

*   另一种选择是在我的`data == undefined`测试中重复调用 ajax 请求。但同样，这也感觉不对。

所以我想知道什么被认为是处理这种情况的最合适的方法，尽管这很不寻常，场景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:29:46.333

基于@Sudhir[在此处](https://stackoverflow.com/questions/10024469/whats-the-best-way-to-retry-an-ajax-request-on-failure-using-jquery)的回答。`data`如果is ，下面的代码将重试 ajax 调用 3 次`undefined`。

```
$.ajax({
    url: "...",
    type: "GET",
    data: data,
    tryCount : 0,
    retryLimit : 3,
    success: function(data){

        if (typeof(data) == 'undefined') {
            this.tryCount++;
            if (this.tryCount <= this.retryLimit) {
                //try again
                $.ajax(this);
                return;
            }            
            return;
        }

    }
}); 
```

这是假设当服务器“抛出一个摆动”时，仍然会触发成功函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:52:14.220

> `while(wasAjaxCallSuccessful){}`循环，将我的 ajax 请求设置为同步
> 
> 但这感觉和使用 Goto 语句一样糟糕（如果允许的话）。

不，同步 (A)jax 是这里的问题。

> 另一种选择是在我的 data == undefined 测试中重复调用 ajax 请求。但同样，这也感觉不对。

这就是这样做的方法 - 就像一个递归函数：

```
function myAjax(data, callback, …) {
    var args = arguments;
    $.ajax({
        type: "GET",
        data: data,
        success: function(data, textStatus, jqXhr){
            if (data)
                callback(data); // Do stuff...
            else
                myAjax.apply(null, args); // try again
        },
        error: function() {
            myAjax.apply(null, args); // try again
        }
    });
} 
```

# c++ - 处理二维线段的有效方法

> ID：15476583
> 
> 赞同：9
> 
> 时间：2013-03-18T12:12:53.133
> 
> 标签：c++, data-structures, kdtree, r-tree

> 我有大量的二维线段。所以，我知道；每条线段的行号、Begin (X,Y,Z) 和 End (x,Y,Z)。我想获得给定线段的邻近线段。同样适用于所有人。
> 
> 要找到接近度，我可以应用[它](https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment)

如果我说我的数据是这样的；

![在此处输入图像描述](../Images/804428dfb36c5392cac052b1b51a915d.png) 所以，最后**我想获得接近线作为每个线段的向量**。我听说这种*向量的向量*可以用 r-tree 数据结构。我正在搜索它，但仍然找不到适合我的相关内容。我还查看了opencv，有一个r-tree，但它说明了分类器和训练阶段......所以，我想它不适合我。

谁能知道如何获得 ***line no ，然后***是 ex 的相邻线路；

> 1 = {2,4,,7,66,32,12}
> 
> 2 = {1,4,5,6}
> 
> 3 = {...} .. .. 这种向量的向量使用r-tree。

我知道，我们可以使用 kd-tree 获得这种类型的向量。但它是为点数据设计的。因此，我认为在这种情况下很难使用 kd-tree。请提供任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-01T15:43:48.907

理论上应该可以使用任何类型的空间索引或空间分区数据结构搜索最近的段。大多数情况下，此类空间索引的接口允许存储框（AABB）或点，因此在这些情况下，您将被迫存储段的边界框，然后在查询最近的框后再次检查相应的段。但是，可以直接索引段。例如，在 kd-tree 的情况下，它将是一个版本，其中包含定义分割平面和存储段的叶子的内部节点。

[Boost.Geometry](http://www.boost.org/libs/geometry) R-tree 支持[Boost](http://www.boost.org/)版本 1.56.0 及更高版本中的段。下面是使用此空间索引实现的 2d 段的示例：

```
// Required headers
#include <iostream>
#include <boost/geometry.hpp>
#include <boost/geometry/geometries/point.hpp>
#include <boost/geometry/geometries/segment.hpp>
#include <boost/geometry/index/rtree.hpp>

// Convenient namespaces
namespace bg = boost::geometry;
namespace bgm = boost::geometry::model;
namespace bgi = boost::geometry::index;

// Convenient types
typedef bgm::point<double, 2, bg::cs::cartesian> point;
typedef bgm::segment<point> segment;
typedef std::pair<segment, size_t> value;
typedef bgi::rtree<value, bgi::rstar<16> > rtree;

// Function object needed to filter the same segment in query()
// Note that in C++11 you could pass a lambda expression instead
struct different_id
{
    different_id(size_t i) : id(i) {}
    bool operator()(value const& v) const { return v.second != id; }
    size_t id;
};

int main()
{
    // The container for pairs of segments and IDs
    std::vector<value> segments;
    // Fill the container
    for ( size_t i = 0 ; i < 10 ; ++i )
    {
        // Example segment
        segment seg(point(i, i), point(i+1, i+1));
        segments.push_back(std::make_pair(seg, i));
    }

    // Create the rtree
    rtree rt(segments.begin(), segments.end());
    // The number of closest segments
    size_t k = 3;

    // The container for results
    std::vector< std::vector<value> > closest(segments.size());

    for ( size_t i = 0 ; i < segments.size() ; ++i )
    {
        // Find k segments nearest to the i-th segment not including i-th segment
        rt.query(bgi::nearest(segments[i].first, k) && bgi::satisfies(different_id(i)),
                 std::back_inserter(closest[i]));
    }

    // Print the results
    for ( size_t i = 0 ; i < closest.size() ; ++i )
    {
        std::cout << "Segments closest to the segment " << i << " are:" << std::endl;
        for ( size_t j = 0 ; j < closest[i].size() ; ++j )
            std::cout << closest[i][j].second << ' ';
        std::cout << std::endl;
    }
} 
```

如果您需要比某个阈值更接近的所有段，您可以使用[迭代查询](http://www.boost.org/doc/libs/1_56_0/libs/geometry/doc/html/geometry/spatial_indexes/queries.html#geometry.spatial_indexes.queries.iterative_queries)（[示例](http://www.boost.org/doc/libs/1_56_0/libs/geometry/doc/html/geometry/spatial_indexes/rtree_examples/iterative_query.html)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T17:47:20.660

是的，**R-trees 可以做到这一点**。它们专为具有空间扩展的任意对象而设计，不限于点数据。实际上，一些最早的例子使用了**多边形**。

你试过使用它们吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T17:45:34.797

构建[分段 Voronoi 图](http://www.cgal.org/Manual/3.1/doc_html/cgal_manual/Segment_Voronoi_diagram_2/Chapter_main.html)，然后从相邻单元中获取邻近候选。

# java - org.apache.axis2.AxisFault：传输错误：407 错误：需要代理身份验证

> ID：15476584
> 
> 赞同：0
> 
> 时间：2013-03-18T12:13:01.220
> 
> 标签：java, web-services, authentication, axis2

这是我的代码.. 我正在尝试使用 .asmx?WSDL 网络服务。

错误：org.apache.axis2.AxisFault：传输错误：407 错误：需要代理身份验证

```
 package org.tempuri;

    import org.apache.axis2.AxisFault;
    import org.tempuri.ServiceStub.Get_All_Pendancy_List;
    import org.tempuri.ServiceStub.Get_All_Pendancy_ListResponse;

    public class TestClient {

        /**
         * @param args
         */
        public static void main(String[] args) {
            // TODO Auto-generated method stub
            try {

                //

                //

                //Proxy Settings

                System.getProperties().put("http.proxyHost", "111.11.11.11");
                System.getProperties().put("http.proxyPort", "1111");
                System.getProperties().put("http.proxyUser", "11111");
                System.getProperties().put("http.proxyPassword", "SaK@11111");

                ServiceStub serviceStub = new ServiceStub();
                Get_All_Pendancy_List gpl = new Get_All_Pendancy_List();
                gpl.setDept_code("1111");
                gpl.setUsr("1111");
                gpl.setPasswd("1111@1111");
                gpl.setDate("01/01/2012");

                Get_All_Pendancy_ListResponse response = serviceStub.get_All_Pendancy_List(gpl);
                System.out.println(response.getGet_All_Pendancy_ListResult());

            } catch(AxisFault e1 ) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            catch (Exception e) {
                // TODO: handle exception
                e.printStackTrace();
            }

        }

    } 
```

有什么建议么？？我应该如何设置代理配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T06:50:18.393

好的..就是这样，这就是您可以通过axis2的代码设置代理设置的方法

```
// Proxy Settings    
HttpTransportProperties.ProxyProperties HTTPProxyProperties = new HttpTransportProperties.ProxyProperties();
HTTPProxyProperties.setProxyName("PROXYHOST");
HTTPProxyProperties.setProxyPort(PROXYPORT);
HTTPProxyProperties.setUserName("USERNAME");
HTTPProxyProperties.setPassWord("PASSWORD");
HTTPProxyProperties.setDomain("DOMAIN");

Options options = serviceStub._getServiceClient().getOptions();
options.setProperty(MessageContextConstants.HTTP_PROTOCOL_VERSION,
HTTPConstants.HEADER_PROTOCOL_10);
options.setProperty(HTTPConstants.PROXY, HTTPProxyProperties); 
```

# python - 无法向视图中的模型添加额外信息

> ID：15476586
> 
> 赞同：0
> 
> 时间：2013-03-18T12:13:02.003
> 
> 标签：python, django, django-views

我正在尝试向我认为的对象添加一些额外的信息：

```
 photos = gallery.photos
    for p in photos:
        try:
            extra_info = SomethingElse.objects.filter(photo=p)[0]
            p.overlay = extra_info.image
            logger.debug(p.overlay.url)
        except:
            logger.debug('overlay not found')
            p.overlay = None

    return render_to_response('account/site.html',
                          {'photos': photos},
                          context_instance=RequestContext(request)) 
```

记录器输出我希望看到的网址。在我的模板中，我只有：

```
<img src='{{ photo.overlay.url }}' alt='' /> 
```

在一个`for`循环内。照片本身显示得很好，但不是叠加层。

我究竟做错了什么？我应该如何将这些额外信息添加到对象中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:26:36.400

我猜*照片*是一个查询集。当你迭代它时，django 将返回代表你的数据的 python 对象，当你这样做时，`p.overlay = extra_info.image`你只是在修改这个 python 对象，而不是查询集。在循环结束时，由于查询集结果由 django 缓存，因此您的本地修改消失了。

我的建议是将字典列表而不是查询集传递给您的模板。就像是：

```
photos = gallery.photos
photo_list = []
for p in photos:
    new_photo = {}
    new_photo['url'] = p.url
    # [...] copy any other field you need
    try:
        extra_info = SomethingElse.objects.filter(photo=p)[0]
        new_photo['overlay'] = extra_info.image
    except:
        logger.debug('overlay not found')
        new_photo['overlay'] = None
   photo_list.append(new_photo)

return render_to_response('account/site.html',
                      {'photos': photo_list},
                      context_instance=RequestContext(request)) 
```

无需对模板进行任何修改即可工作:)

**更新：** 我正在考虑另一种解决方案，可能更优雅，肯定更有效：为你的类 Model添加一个*overlay()函数：*

```
class Photo(models.Model):
  [...]

  def overlay(self)
    try:
      extra_info = SomethingElse.objects.filter(photo=self)[0]
      return extra_info.image
    except:
      logger.debug('overlay not found')
      return None 
```

在这里你不需要在你的视图中做任何特别的事情，也不需要在你的模板中！

# web-scraping - scrapy- 如何停止重定向 (302)

> ID：15476587
> 
> 赞同：25
> 
> 时间：2013-03-18T12:13:11.337
> 
> 标签：web-scraping, web-crawler, scrapy

我正在尝试使用 Scrapy 抓取网址。但它会将我重定向到不存在的页面。

```
Redirecting (302) to <GET http://www.shop.inonit.in/mobile/Products/Inonit-Home-Decor--Knick-Knacks-Cushions/Shor-Sharaba/Andaz-Apna-Apna-Cushion-Cover/1275197> from <GET http://www.shop.inonit.in/Products/Inonit-Home-Decor--Knick-Knacks-Cushions/Shor-Sharaba/Andaz-Apna-Apna-Cushion-Cover/pid-1275197.aspx> 
```

问题是[http://www.shop.inonit.in/Products/Inonit-Home-Decor--Knick-Knacks-Cushions/Shor-Sharaba/Andaz-Apna-Apna-Cushion-Cover/pid-1275197.aspx](http://www.shop.inonit.in/Products/Inonit-Home-Decor--Knick-Knacks-Cushions/Shor-Sharaba/Andaz-Apna-Apna-Cushion-Cover/pid-1275197.aspx)存在，但[http://www.shop.inonit.in/mobile/Products/Inonit-Home-Decor--Knick-Knacks-Cushions/Shor-Sharaba/Andaz-Apna-Apna-Cushion-Cover/1275197](http://www.shop.inonit.in/mobile/Products/Inonit-Home-Decor--Knick-Knacks-Cushions/Shor-Sharaba/Andaz-Apna-Apna-Cushion-Cover/1275197)没有，所以爬虫找不到这个。我也爬过许多其他网站，但在其他任何地方都没有这个问题。有没有办法可以阻止这个重定向？

任何帮助将非常感激。谢谢。

更新：这是我的蜘蛛类

```
class Inon_Spider(BaseSpider):
name = 'Inon'
allowed_domains = ['www.shop.inonit.in']

start_urls = ['http://www.shop.inonit.in/Products/Inonit-Gadget-Accessories-Mobile-Covers/-The-Red-Tag/Samsung-Note-2-Dead-Mau/pid-2656465.aspx']

def parse(self, response):

    item = DealspiderItem()
    hxs = HtmlXPathSelector(response)

    title = hxs.select('//div[@class="aboutproduct"]/div[@class="container9"]/div[@class="ctl_aboutbrand"]/h1/text()').extract()
    price = hxs.select('//span[@id="ctl00_ContentPlaceHolder1_Price_ctl00_spnWebPrice"]/span[@class="offer"]/span[@id="ctl00_ContentPlaceHolder1_Price_ctl00_lblOfferPrice"]/text()').extract()
    prc = price[0].replace("Rs.  ","")
    description = []

    item['price'] = prc
    item['title'] = title
    item['description'] = description
    item['url'] = response.url

    return item 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T13:20:25.680

是的，你可以简单地通过添加元值来做到这一点

```
meta={'dont_redirect': True} 
```

您也可以停止重定向特定响应代码，例如

```
meta={'dont_redirect': True,"handle_httpstatus_list": [302]} 
```

它将停止仅重定向 302 响应代码。您可以添加尽可能多的 http 状态代码以避免重定向它们。

例子

```
yield Request('some url',
    meta = {
        'dont_redirect': True,
        'handle_httpstatus_list': [302]
    },
    callback= self.some_call_back) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-01-14T18:28:42.967

在查看[文档](http://doc.scrapy.org/en/latest/topics/spiders.html)并查看相关来源后，我能够弄清楚。如果您查看 start_requests 的源代码，您会看到它为所有 URL 调用 make_requests_from_url。

我没有修改 start_requests，而是修改了 make_requests_from_url

```
def make_requests_from_url(self, url):
    return Request(url, dont_filter=True, meta = {
        'dont_redirect': True,
        'handle_httpstatus_list': [301, 302]
    }) 
```

并将其添加为我的蜘蛛的一部分，就在上面`parse()`。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-23T03:23:51.270

默认情况下，Scrapy 用于`RedirectMiddleware`处理重定向。您可以设置`REDIRECT_ENABLED`为 False 以禁用重定向。

请参阅[文档](https://scrapy.readthedocs.org/en/latest/topics/downloader-middleware.html#module-scrapy.contrib.downloadermiddleware.redirect)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-04T17:24:34.680

如此处所述：[Scrapy docs](http://doc.scrapy.org/en/latest/topics/downloader-middleware.html#std:reqmeta-dont_redirect)

使用请求元

```
request =  scrapy.Request(link.url, callback=self.parse2)
request.meta['dont_redirect'] = True
yield request 
```

# c - 我可以知道 char 指针变量指向的 char-array-size 吗？

> ID：15476597
> 
> 赞同：0
> 
> 时间：2013-03-18T12:13:49.370
> 
> 标签：c

我必须知道 char 指针变量指向的数组大小。

但是您知道 sizeof 操作不起作用。

```
char a[5];
char *b= a;
int c = sizeof(b);
printf("%d", sizeof(b)); // 8(64 bit cpu) printed, not 5 . 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:21:27.860

如果某些代码需要知道数组的大小，请确保调用它的代码*告诉*它数组的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:15:30.847

不，一旦将其转换为指针（在将数组作为参数传递给函数时也会这样做），您就会丢失有关数组的所有大小信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:15:38.567

指针（当您执行此类操作时，数组会衰减到）对它们所指向的数据的大小一无所知。您需要单独跟踪它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T12:23:12.453

您无法获取该信息，您唯一能做的就是在需要时嵌入信息：

```
int* array = malloc( sizeof(int) * (n + 1) );
*array = n;
++array; 
```

那么当你想知道尺寸时

```
int n = *(array - 1); 
```

同样可以用 char 或任何你需要的类型来完成。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-18T12:18:47.023

这可能是因为 4 字节对齐。

要确认尝试 a[8]、a[10] 等

# android - Android Webview NullPointerException

> ID：15476601
> 
> 赞同：1
> 
> 时间：2013-03-18T12:13:59.340
> 
> 标签：android, webview

当我遇到 Webview 的 NullPointerException 时可能出现的错误：

```
WebView webView;
webView = (WebView) findViewById(R.id.webView3);
webView.getSettings().setJavaScriptEnabled(true);
webView.loadUrl("..."); 
```

这是我的 webview3.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webView3"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/> 
```

NPE上线`webView.getSettings().setJavaScriptEnabled(true);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:16:16.173

可能缺少加载 xml 布局 webview3.xml 即。设置内容视图（R.layout.webview3.xml）；

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T12:32:35.770

试试这个示例代码，

**资源/布局/webview3.xml**

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
           android:orientation="vertical" 
           android:layout_width="fill_parent" 
           android:layout_height="fill_parent"> 

      <WebView
              android:id="@+id/webview" 
              android:layout_width="fill_parent" 
              android:layout_height="fill_parent"/>

</LinearLayout> 
```

**在AndroidManifest.xml**文件中设置权限

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

`onCreate()`并在您的方法中使用此代码。

```
setContentView(R.layout.webview3.xml);
WebView mywebview = (WebView) findViewById(R.id.webview);
mywebview.loadUrl("http://Enter your URL here");
WebSettings webSettings = mywebview.getSettings();
webSettings.setJavaScriptEnabled(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T21:55:36.867

另一种方式：

```
 View webViewLayout = ((LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE))
            .inflate(R.layout.web_main, null, false);
    WebView webView = (WebView) webViewLayout.findViewById(R.id.webview); 
```

# paypal - 贝宝沙箱不工作

> ID：15476607
> 
> 赞同：5
> 
> 时间：2013-03-18T12:14:18.147
> 
> 标签：paypal, sandbox, paypal-sandbox

我正在使用 PayPal 沙箱进行测试付款。自过去 3-4 个月以来一直运行良好。但我看到他们正在对沙盒设计、管理测试电子邮件帐户的方式等进行更改。

他们禁用了我的实际沙盒帐户，并要求我使用真实的 PayPal 帐户登录。所以我使用我的 PayPal 帐户创建了一个新的沙盒 ( [https://developer.paypal.com/](https://developer.paypal.com/) ) 帐户。我从我的旧沙盒帐户中导入了测试电子邮件，并开始进行测试付款。但它没有用。我删除了所有导入的测试电子邮件，并创建了一些新的测试电子邮件。但它也没有奏效。

我已登录沙盒帐户，尝试进行测试付款。但它每次都向我显示这条消息。![在此处输入图像描述](../Images/d9089ccb17d8c61f80c272ec84675b59.png)

我没有得到什么问题。请需要帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:52:29.357

在打开浏览器之前，请清除浏览器上的所有 cookie 和缓存。从旧的开发者网站获取 cookie 和使用新的开发者网站存在一些问题。与 Firefox 和 Chrome 相比，IE 的问题也更多。因此，您可能也想尝试使用 Firefox 或 Chrome，但请确保在打开浏览器并访问 developer.paypal.com 网站之前清除 cookie 和缓存。

# tcl - 如何对列表进行排序，同时在数字之前优先考虑字母？

> ID：15476608
> 
> 赞同：0
> 
> 时间：2013-03-18T12:14:22.063
> 
> 标签：tcl

我的清单是：

```
set list {23 12 5 20 one two three four} 
```

预期输出是按递增顺序排列的，不同之处在于字母需要放在开头：

```
four one three two 12 20 23 5 
```

我尝试了以下方法：

```
# sorting the list in increasing order:
lsort -increasing $list
-> 12 20 23 5 four one three two
# Here i get the result with numbers first as the ascii value of numbers are higher than alphabets. 
```

```
lsort -decreasing $list
# -> two three one four 5 23 20 12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:00:02.487

我建议拧一个比较器：

```
proc compareItm {a b} {
    set aIsInt [string is integer $a]
    set bIsInt [string is integer $b]

    if {$aIsInt == $bIsInt} {
        # both are either integers or both are not integers - default compare
        # but force string compare
        return [string compare $a $b]
        # if you want 5 before 12, comment the line above and uncomment the following line
        # return [expr {$a < $b ? -1 : $a > $b ? 1 : 0}]
    } else {
        return [expr {$aIsInt - $bIsInt}]
    }
} 
```

并将其与以下`-command`选项一起使用`lsort`：

```
lsort -command compareItm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:27:27.903

最简单的方法之一是生成*排序规则*并按以下方式排序：

```
lmap pair [lsort -index 1 [lmap item $list {
    list $item [expr {[string is integer $item] ? "Num:$item" : "Let:$item"}]
}]] {lindex $pair 0} 
```

如果您使用的是 Tcl 8.5 或 8.4（缺少`lmap`），请使用更冗长的版本：

```
set temp {}
foreach item $list {
    lappend temp [list $item [expr {
        [string is integer $item] ? "Num:$item" : "Let:$item"
    }]]
}
set result {}
foreach pair [lsort -index 1 $temp] {
    lappend result [lindex $pair 0]
} 
```

# javascript - 如何在 IE7 的表单中按名称访问动态插入的元素？

> ID：15476609
> 
> 赞同：0
> 
> 时间：2013-03-18T12:14:23.217
> 
> 标签：javascript, forms, internet-explorer, dom

使用下面的代码，它会动态地将 INPUT 元素插入到 FORM 中，如果它还没有的话。

```
<form id="form1">

  <input type="button" value="Add field if not yet there" onclick="addField()" />

</form>

<script>

    function addField()
    {
        var form1 = document.getElementById("form1");
        var field = form1.elements["test"];
        if (!field)
        {
            field = document.createElement("input");
            field.type = "text"
            field.name = "test";
            form1.appendChild(field);
        }
    }

</script> 
```

此代码适用于所有现代浏览器，但无法在 IE7 上运行（字段未定义）。

在 IE7 上，“元素”集合似乎不包含已动态添加到 DOM 的元素。

是否有任何已知的解决方法（除了保留对已创建元素的引用或设置标识符）？

# powerbuilder - 表或视图不存在

> ID：15476611
> 
> 赞同：1
> 
> 时间：2013-03-18T12:14:25.787
> 
> 标签：powerbuilder, sybase-asa, isql

再会。

我正在 Adaptive Server Anywhere 数据库引擎版本 8.0.1.2600 上运行 Powerbuilder 9 应用程序。我使用 INI 文件使用默认用户“dba”密码“sql”连接到数据库，一切正常。

正确的 ！我想为应用程序创建并使用另一个用户来连接到数据库。我使用以下命令执行了一个新用户： sp_add_user 'alex', 'alex'; 然后执行：将 loadcon_cust 上的 all 授予 alex；（其中 loadcon_cust 是表名）

当我使用“alex”登录运行应用程序时，它可以正常连接到数据库，但是当我访问表 loadcon_cust 时，PB 提示“找不到表或视图：找不到表 'loadcon_cust'”

我错过了什么？

干杯，提前谢谢。

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:07:55.970

在 ISQL 中运行这些命令：

```
GRANT GROUP to DBA;  
GRANT MEMBERSHIP in group DBA to ALEX; 
```

然后再次尝试您的应用。

# iphone - 从我的照片库添加照片时出错？

> ID：15476612
> 
> 赞同：0
> 
> 时间：2013-03-18T12:14:30.217
> 
> 标签：iphone, ios, objective-c, xcode, photolibrary

我在下面发布的代码有两个功能；第一个是拍照（工作正常），第二个是从库中挑选图像（不工作）。这些函数没有被正确调用。请检查我的代码，让我知道出了什么问题。

提前致谢。

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
    static NSDateFormatter *dateFormatter = nil;
    NSString *stringDate = nil;
    if (dateFormatter == nil) {
        dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:@"EE, d LLLL yyyy"];
        stringDate = [dateFormatter stringFromDate:[NSDate date]];
    }
    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
        UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
        // storing to camera roll
        UIImageWriteToSavedPhotosAlbum(image,self,@selector(image:finishedSavingWithError:contextInfo:),nil);
        CGSize newSize=CGSizeMake(320, 436);
        UIGraphicsBeginImageContext(newSize);
        [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
        UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        xapp.profileImage=newImage;
        [[NSNotificationCenter defaultCenter]postNotificationName:@"addImage" object:nil];
    }

    // Commit the change.
    [self dismissModalViewControllerAnimated:YES];
}

-(void)image:(UIImage *)image finishedSavingWithError:(NSError *)error contextInfo:(void *)contextInfo {
    if (error) {
        UIAlertView *alert = [[UIAlertView alloc]
                          initWithTitle: @"Save failed"
                          message: @"Failed to save image"
                          delegate: nil
                          cancelButtonTitle:@"OK"
                          otherButtonTitles:nil];
        [alert show];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:46:54.590

嗨，我只是将完全从照片库的相机中捕获图像的代码放入其中，然后尝试在您的项目中实现：-

```
-(IBAction)actionImage:(id)sender
{   
    UIActionSheet *option =[[UIActionSheet alloc]initWithTitle:@"Select" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Select Photo",@"Take Photo",nil];
    option.actionSheetStyle =UIActionSheetStyleDefault;
    [option showInView:self.view];
}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (actionSheet.tag==2) 
    {
        [self.navigationController popViewControllerAnimated:YES];
    }
    else
    {

        UIImagePickerController * picker = [[UIImagePickerController alloc] init];
        picker.delegate = self;

        if(buttonIndex ==0)
        {
            if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary])
            {       
                picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
                [self presentModalViewController:picker animated:YES];      
            }
        }
        else if(buttonIndex ==1)
        {
            if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
            {       
                picker.sourceType = UIImagePickerControllerSourceTypeCamera;
                [self presentModalViewController:picker animated:YES];      
            }
        }   
    }
}
#pragma mark - imagePickerController Delegate
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    [self dismissModalViewControllerAnimated:YES];
    imgUserImage.image = [info valueForKey:@"UIImagePickerControllerOriginalImage"];    

    return;
} 
```

**注意：-** 不要忘记包含相关的框架或委托。希望它对您有所帮助，您只需使用上述方法即可：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:38:37.520

您的代码需要进行许多更改..这是从库中选择图像的代码..我认为最好给您代码而不是纠正您的错误..所以，这是代码..享受...

```
-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
   NSString *mediaType = info[UIImagePickerControllerMediaType];

   [self dismissViewControllerAnimated:YES completion:nil];

    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
        UIImage *image = info[UIImagePickerControllerOriginalImage];

        _imageView.image = image;
        if (_newMedia)
            UIImageWriteToSavedPhotosAlbum(image,
               self,
               @selector(image:finishedSavingWithError:contextInfo:),
               nil);
        }
        else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie])
        {
                // Code here to support video if enabled
        }
}

-(void)image:(UIImage *)image
finishedSavingWithError:(NSError *)error
contextInfo:(void *)contextInfo
{
   if (error) {
        UIAlertView *alert = [[UIAlertView alloc]
           initWithTitle: @"Save failed"
           message: @"Failed to save image"
           delegate: nil
           cancelButtonTitle:@"OK"
           otherButtonTitles:nil];
        [alert show];
   }
}
-(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
   [self dismissViewControllerAnimated:YES completion:nil];
} 
```

# xslt - xsl 1.0 document() 基于变量的引用

> ID：15476616
> 
> 赞同：0
> 
> 时间：2013-03-18T12:14:44.633
> 
> 标签：xslt, xslt-1.0

我找不到任何回答这个特定问题的现有帖子。希望对于更熟悉 XSL 的人来说这是一个简单的答案：我有一个 XSL 样式表，它应用于由零件检测软件系统生成的 XML 文件，然后读取生成的 HTML 代码......

我想添加一个外部 XML 文件，其中包含每个不同零件编号的公差。所以我想象 XSL 工作表需要使用 document() 引用，其中包含文档名称或由源 XML 文件中的元素名称定义的文档中的元素。希望包含的代码说明了我正在尝试做的事情。显然它不能按原样工作，也只是整个文件的一个片段......

感谢您提供任何帮助或指向我可以从中学习的东西的链接。

```
<xsl:variable name="pname">
    <xsl:value-of select="//NAME/."/>.xml
</xsl:variable>

<xsl:template match="TUBE_LRA_ERRORS">
<table border="0" style="font-size:18pt">
    <tr><th><xsl:copy-of select="//NAME/."/></th></tr>
    <tr><th><xsl:value-of select="//REPORT/REPORT_TIME"/></th></tr>
    <tr><th>LRA Errors</th></tr>
</table>
<table border="1" style="font-size:26pt">
<tr align="center" bgcolor="#cccccc">
    <td>#</td><td>L</td><td>R</td><td>A</td>
</tr>
<xsl:for-each select="ERROR">
    <tr>
        <td><xsl:value-of select="position()"/></td>
        <xsl:choose>
            <xsl:when test="X > document('$pname')/l/hi">
                <td bgcolor="00FFFF" style="font-weight:600">
            <xsl:value-of select="X"/></td>
            </xsl:when>
            <xsl:when test="X > document('tolerances.xml')/l/lo">
                <td bgcolor="ffffff" style="font-weight:200">
                    <xsl:value-of select="X"/></td>
            </xsl:when>
        <xsl:otherwise> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:01:22.960

所以你想到的是变量`pname`将具有公差文件的名称，你想从中检查值吗？应该可以这样做。

这将不起作用：

```
<xsl:when test="X > document('$pname')/l/hi">
   <td bgcolor="00FFFF" style="font-weight:600">
        <xsl:value-of select="X"/>
   </td>
</xsl:when> 
```

因为引号中有“$pname”，这将导致它查找*名为*“$pname”的文件。但是，这将加载名称为值的文件`$pname`（注意我已经删除了周围的单引号`$pname`：

```
<xsl:when test="X > document($pname)/l/hi">
   <td bgcolor="00FFFF" style="font-weight:600">
        <xsl:value-of select="X"/>
   </td>
</xsl:when> 
```

或者，如果您想使用名称为`$pname`加号“.xml”的文件，您可以这样做：

```
<xsl:when test="X > document(concat($pname, '.xml'))/l/hi">
   <td bgcolor="00FFFF" style="font-weight:600">
        <xsl:value-of select="X"/>
   </td>
</xsl:when> 
```

我想你可能在这里有一个逻辑错误：

```
<xsl:when test="X > document('tolerances.xml')/l/lo">
  <td bgcolor="ffffff" style="font-weight:200">
    <xsl:value-of select="X"/>
  </td>
</xsl:when> 
```

我猜你想在小于值时显示特殊格式，*在*`X`这种情况下你需要：*`lo`*

 *```
<xsl:when test="X &lt; document('tolerances.xml')/l/lo"> 
```*

# mongodb - 如何为组聚合指定键函数

> ID：15476617
> 
> 赞同：0
> 
> 时间：2013-03-18T12:14:49.407
> 
> 标签：mongodb, aggregation-framework

我想汇总`UserAgent`：

```
db.reports.aggregate(
    {
        $group: {
            _id: '$UserAgent',
            docsPerUserAgent: {
                $sum : 1
            }
        }
    }
) 
```

上面的查询将考虑**整个** `UserAgent`字符串。我想做的是计算包含*Android*（选项A）、*iPhone/iPad*（选项B）和其余（选项C）的那些。如何将`keyf`函数提供给聚合框架（类似于此 -[如何通过指定函数来获取密钥进行分组？](https://stackoverflow.com/questions/14182973/how-to-group-by-specifying-a-function-to-fetch-a-key)但在聚合框架的上下文中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:17:38.190

目前没有什么可以让你做类似的事情：

```
db.col.aggregate([
    {$project: {userAgentType: {$extract: /(Android|iPhone/iPad)/}}},
    {$group: on_userAgentType}
]); 
```

也许这个功能已经存在于 JIRA 中，但是我无法立即找到它。

而不是更好的方法是将用户代理字符串的“有趣”部分拆分为单独的字段，以便您可以按`userAgent.agentType`代表`android`or`ipad`或的内容进行分组`iphone`。不仅如此，您还可以使用它来预先生成`$match`，这意味着您可以在该字段上使用索引，从而使您的聚合总体上性能更高。

# algorithm - 如果点扩散函数被低估，图像去模糊应用会发生什么？

> ID：15476618
> 
> 赞同：0
> 
> 时间：2013-03-18T12:14:51.923
> 
> 标签：algorithm, image-processing

点扩散函数（PSF）估计是一种重要的图像处理函数。如果我们想对模糊图像进行图像反卷积以使其清晰，则需要 PSF 估计。估计 PSF 的三种方法：

*   同时进行图像反卷积和 PSF 估计。
*   从一系列 PSF 候选中选择 PSF，然后执行反卷积。在对去模糊图像进行分析之后，选择最佳去模糊图像对应的PSF作为估计的PSF。
*   首先手动或自动选择图像特征（线或点），然后分析这些特征。根据这些特征和模糊程度之间的关系，估计 PSF。

这里我更喜欢使用第三种方法，基于边缘扩散函数估计PSF，这个方法的介绍可以看[这里](http://www.cis.rit.edu/research/thesis/bs/2001/perry/thesis.html)。然而，我对使用这种方法的观察是估计的 PSF 可能小于真实的 PSF。那么我的问题是，如果我使用低估的 PSF 进行图像反卷积，会发生什么。是否可以使用低估的 PSF 进行图像反卷积并获得不错但不完美的反卷积结果？这里我假设 PSF 是二维高斯类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:59:54.263

保持您的 PSF 是高斯的假设，让我们看看反卷积的作用。

反卷积操作可以认为是对图像进行傅里叶变换，除以PSF的傅里叶变换，再进行傅里叶逆变换，得到反卷积的图像。

所以，现在让我们考虑一个单点图像。在空间域中，它是 2D 高斯，您的估计是更窄的 2D 高斯。在频域中，您还有一个 2D 高斯，您的估计是一个更宽的 2D 高斯。现在进行反卷积：如果您的 PSF 是正确的，那么您最终会在频率空间中得到一个恒定值平面。但是您实际上是将变窄的高斯除以较宽的高斯。这给了你一个非常宽的高斯（猜测越好，高斯越宽）。

好消息！频域中非常宽的高斯分布在空间域中是较窄的 PSF。这意味着用稍窄的 PSF 估计 PSF 将有助于提供一个不错的结果。

请注意，如果您的 PSF 不是真正的高斯并且您估计它是这样的，反卷积方法可能会给您带来振铃伪影。

# c++ - 用整数除以数组项？

> ID：15476624
> 
> 赞同：3
> 
> 时间：2013-03-18T12:15:08.360
> 
> 标签：c++

我试图用“1000”来划分数组的项目，我认为我的语法是错误的，请帮忙！

data[99] 包含 1-100 的值，而 two[99] 为空。

```
float two[99];
for(int x=0; x<100; x++)
{
  two[x]=data[x]/1000;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:17:47.700

像这样定义`two`：

```
float two[100]; // 99 + 1 
```

数组从`0`C/C++ 开始，所以`two[99]`指的是`two`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T12:17:24.713

语法没问题，逻辑错了。`float two[99];`有`99`物品 -`0`通过`98`-`two[99]`是非法的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T12:17:26.707

您有一个从零开始的索引数组，因此您需要：

```
float two[100];
for(int x=0; x<100; x++)
{
   two[x]=(float)data[x]/(float)1000;
} 
```

我添加了 (float) 转换以确保您获得预期值，因为我们不知道数据的类型 […]。

# python - 如何获取在 Python 中发布到 Soundcloud 的曲目的秘密链接？

> ID：15476629
> 
> 赞同：5
> 
> 时间：2013-03-18T12:15:15.720
> 
> 标签：python, api, hyperlink, private, soundcloud

我正在使用 Python 开发一个简单的应用程序，我可以在其中将曲目发布到我自己的 Soundcloud 帐户。我想获取我发布的曲目的“秘密链接”URL。例如，我得到最新的曲目，如下所示：

```
track = client.get('/me/tracks', limit=1)[0] 
```

轨道设置为私人。它在[文档](http://developers.soundcloud.com/docs/api/reference#tracks)中建议这样的东西应该返回秘密令牌：

```
client.get('/tracks/%d/secret-token' %track.id) 
```

但是，我得到 HTTPError: 404 Client Error: Not Found。所有其他子资源似乎都有效。例如，此示例代码可以按您的预期工作：

```
comments = client.get('/tracks/%d/comments' %track.id)

for comment in comments:
    print comment.body 
```

我会认为，鉴于我已经使用我的凭据进行了身份验证，我可以访问它。这个对吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-07T20:32:21.340

/me/tracks 端点返回一个`Track`包含`secret_token`完整 uri的对象`secret_uri`。

```
track = client.get('/me/tracks', limit=1)[0]
print "Secret Token: %s" %track.secret_token
print "Track URI: %s"  %track.secret_uri 
```

我发现我需要`client_id`在 URI 中包含 以避免收到 401。

*注意：这是未记录的，因此在应用程序中依赖它之前，请咨询他们的支持团队*

# jquery - 如何将 Json 数据导入 Jquery 移动应用程序

> ID：15476635
> 
> 赞同：6
> 
> 时间：2013-03-18T12:15:36.697
> 
> 标签：jquery, json, cordova, jquery-mobile

我正在使用 Jquery Mobile 在 Dreamviewer 中制作基本的“新闻”应用程序。

我做了所有的设计，但现在是时候将 Json 数据从我的 api 服务器获取到我的应用程序中了。

这是我的 api 服务器链接；fe "http://mywebapiurl"

我想我需要编写关于 getJson 的 Jquery 函数，但我不知道怎么做？

我如何将它与小文章图片、文章标题和文章标题一起放入我的列表视图中？

这是我的列表视图的示例，我将展示来自 Json 的新闻。

```
<body> 
<div data-role="page" id="home">
<div data-role="header">
    <h1>Post Mobile</h1>
</div>
<div data-role="content">   
    <ul data-role="listview" data-inset="true">
                     <li><a href="#headline">
         <img src=ArticlePicture" class="ui-li-has-thumb"/>
         <h3>ArticleTitle</h3>
         <p>ArticleHeadline</p>
                     </a></li>
                </ul>       
</div>
      <div data-role="footer"  data-position="fixed">
      <h4>&copy; funky app </h4>
</div> 
```

这是我尝试过的代码示例；

```
 <script>
  $(document).ready(function() {
   $.getJSON("http://mywebapiurl", function(data) {
      var result= "";
      $.each(data.LatestNews, function(index, value) {
result+= "<ul><li><a href='#'><h3>"+value.TITLE+"</h3><p>"+value.SPOT+"</p></a></li></ul>"; 
});
    $("#articleContainer").html(result);
})
});
</script> 
```

等待你的答复。

非常感谢你。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T12:33:38.313

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/8uac7/](http://jsfiddle.net/Gajotres/8uac7/)

```
$(document).on('pagebeforeshow', '#home', function(e, data){      
    $.ajax({url: "http://api.themoviedb.org/2.1/Movie.search/en/json/23afca60ebf72f8d88cdcae2c4f31866/The Goonies",
        dataType: "jsonp",
        async: true,
        success: function (result) {
            ajax.parseJSONP(result);
        },
        error: function (request,error) {
            alert('Network error has occurred please try again!');
        }
    });         
});

var ajax = {  
    parseJSONP:function(result){
        $.each( result, function(i, row) {
            $('#movie-data').append('<li><a href="#headline"><img src="http://www.incine.fr/media/photos_films/original/1285_4bc92529017a3c57fe00ee84_1293130970.jpg" class="ui-li-has-thumb"/><h3>' + row.original_name+ '</h3><p>' + row.overview+ '</p></a></li>');
        });
        $('#movie-data').listview('refresh');
    }
} 
```

在您的情况下，只需将**dataType: "jsonp"**更改为**dataType: "json"**。

**编辑 ：**

**`document ready`**不应与**`jQuery Mobile`**. 通常它会在页面加载到**`DOM`**.

这可以通过适当的 jQuery Mobile 页面事件来修复，如下所示：

```
$(document).on('pagebeforeshow', '#home', function(){      

}); 
```

有关页面事件及其工作方式的更多信息可以在这篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**中找到，为了透明，这是我的个人博客。或者在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。

## $.getJSON 与 $.ajax

我更喜欢**`$.ajax`**它，因为它与**jQuery Mobile**配合得更好，特别是如果您需要**`show/hide`**ajax 页面加载器或像我的示例中那样进行跨域调用。但总的来说，它是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:20:54.447

你试过什么？JQuery 在 json 主题上非常简单，架构：

```
$(function() {
    $.getJSON('/api', function(data) {
        var $foo = $('#foo');
        for(vari=0; i<data.length; i++) {
            $foo.append('<div>'+data[i][title]+'</div>');
        }
    });
}); 
```

# ruby - 从标准输入中获取下一个字节或零 - Ruby

> ID：15476637
> 
> 赞同：1
> 
> 时间：2013-03-18T12:15:38.100
> 
> 标签：ruby, stream, stdin

我想从 ruby​​ 的标准输入中一次读取一个字节，但是，如果没有可用的新数据，我希望该方法立即返回，所以 each_byte 等对我来说不是一个选项，据我所知，因为它们会阻止程序执行。

理想情况下，该方法允许我执行以下操作：

```
byte = STDIN.next_byte_or_nil
if(byte)
#Process
else
#Do something else
end 
```

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:35:31.873

如果读取操作会阻塞，您可以使用`read_nonblock`which throws an exception。`Errno::WOULDBLOCK`因此`STDIN.read_nonblock(1) rescue nil`将读取一个字节而不阻塞或返回`nil`。

由于您仅使用该`nil`值来检查调用是否成功，因此您实际上并不需要`rescue nil`：

```
begin
  byte = STDIN.read_nonblock(1)
  #Process
rescue Errno::WOULDBLOCK
  #Do something else
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:20:25.507

[getc](http://apidock.com/ruby/IO/getc)是您正在寻找的方法：

```
byte = STDIN.getc
if byte
  # Process
else
  # Do something else
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:28:36.197

您可以尝试使用[readbyte](http://apidock.com/ruby/ARGF/readbyte%20readbyte)来实现您的目标。

# iphone - 我怎么能随机播放视频而不重复

> ID：15476653
> 
> 赞同：0
> 
> 时间：2013-03-18T12:16:35.377
> 
> 标签：iphone, ios, ipad, nsmutabledictionary

我有一个应用程序需要在出现提示时播放多个视频，但我希望视频是随机的而不是重复的。

我目前的计划是制作一个 NSMutableDictionary，其中键是视频的编号，值只是一个基本字符串，告诉我它是否已播放。然后，当要播放视频时，我会随机选择一个，看看它是否已经播放。像这样：

```
int randomNumber;
randomNumber = (arc4random() % 150) + 1;
if ([[videoDictionary valueForKey:[NSString stringWithFormat:@"%d", randomNumber]] isEqual:@"Played"])
{
   // This video has been played before. Make another random number and try again
} else {
   // This video has not been played before. Set the dictionary value to 'Played' and play the video
} 
```

有一个更好的方法吗？对于超过 100 个视频，当其中 90% 已经播放时，这可能会开始变得有点愚蠢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:18:25.037

将您的字典复制到 NSMutableDictionary。

通过 arc4random 选择，播放它。

从字典中删除它。

```
NSInteger randomNumber=arc4random();
NSMutableDictionary *playingVideo=[NSMutableDictionary dictionaryWithDictionary:videoDictionary];
//select a video from playingVideo
NSString *key= [NSString stringWithFormat:@"%d", randomNumber];
// ....
//remove from there
[playingVideo removeObjectForKey:key]; 
```

编辑1：

因为这是生成随机数并在字典中搜索。它可能不存在或已经被替换，即使在 1000 次迭代中也不会生成特定的数字。

所以在这种情况下，你可以这样做：

```
NSMutableDictionary *playingVideo=[NSMutableDictionary dictionaryWithDictionary:videoDictionary];
while(playingVideo.count){
    NSMutableArray *keys=[playingVideo allKeys];
    NSInteger randomNumber=arc4random()%keys.count;
    NSString *key=[NSString stringWithFormat:@"%d", keys[key]];
    NSString *videoToPlay=playingVideo[key];
    //play it
    [playingVideo removeObjectForKey:key];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T12:23:34.637

*   创建一个包含所有数字的可变数组。
*   随机播放元素（[随机播放 NSMutableArray 的最佳方法是什么？](https://stackoverflow.com/questions/56648/whats-the-best-way-to-shuffle-an-nsmutablearray)）
*   取数组中的第一个元素并播放视频
*   删除数组中的第一个元素
*   当数组为空时，重新创建它并再次随机播放

使用这种方法，您将不会获得 90% 的相同“愚蠢”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T12:27:42.403

当您使用随机数时，您应该确保使用从低到高的随机数。

```
(arc4random() % 10) + 1; // it will produce random number from 1 to 10 
```

# java - 使用 DocumentBuilder 从 URL 读取不同语言的 XML 内容

> ID：15476655
> 
> 赞同：0
> 
> 时间：2013-03-18T12:16:41.943
> 
> 标签：java, xml, encoding

我正在从 url 读取 XML 文件

```
DocumentBuilderFactory factory = DocumentBuilderFactory
        .newInstance();
DocumentBuilder builder;
Document document;
document = builder.parse("http://mywebsite.com/someXML.xml"); 
```

一切正常。我可以遍历所有节点。但是当 XML 文件中有其他语言（例如：日语）时，问题就来了。我无法获取指定语言的内容。我可能应该将输入的内容设置为 Unicode。任何人都可以解决这个问题。

# javascript - 如何阻止第二个 onClick 事件触发？

> ID：15476657
> 
> 赞同：0
> 
> 时间：2013-03-18T12:16:46.383
> 
> 标签：javascript, jquery

我已经构建了一些函数，使用 jquery 在单击事件上触发 ajax 事件，问题是，当您单击足够快时 - 事件被触发两次，这不应该发生:)。我试图通过添加标志变量来避免这种情况，但是当你真的很快时它就不起作用了。这是我的功能示例：

```
action_flag = 0;

$('#available_clicks').delegate('.available_click', "click", function(ev)
{
    if(action_flag==1)
    { 
        ev.stopPropagation();
        return;
    }
    action_flag=1;
    somefunction();
}); 
```

在 somefunction 的末尾是 action_flag=0 指令。你能给我一些解决方案，当用户点击足够快时，它可以防止双重触发某些功能？:)

**编辑：**

现在我正在这样做：

```
$('#available_clicks').delegate('.available_click', "click", function(ev)
{
   $("#available_clicks").on("click", ".available_click",somefunction())); 
   $("#available_clicks").off("click", ".available_click");
}); 
```

但第二次点击后出现错误：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:17:46.843

看看对`.one()` `jQuery`您有帮助的功能。

> **描述：**将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

**或者**

您可以使用`.off();`

> **Description:** Remove an event handler.

**EDIT**

```
$('#available_clicks').on("click",'.available_click', function(ev)
{
   $("body").off("click", ".available_click");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:22:38.533

You can also disable the button (this being the first statement in the function) and in the success of the ajax call, you can enable it again it.

# android - 如何添加底部按钮片段（动画）

> ID：15476658
> 
> 赞同：0
> 
> 时间：2013-03-18T12:16:50.080
> 
> 标签：android, android-fragments, xamarin.android

我想在我的列表视图片段底部有一个确定/取消按钮来接受/取消。我认为片段是要走的路（甚至应该支持动画）。

**但我无法让它工作！**它只显示第一个片段（代码中的fragmentPlaceholder）

我从这篇文章接受的答案中得到了按钮的 xml：

[如何创建标准的无边框按钮（如提到的设计指南中）？](https://stackoverflow.com/questions/8855791/how-to-create-standard-borderless-buttons-like-in-the-design-guidline-mentioned)

代码在 C# 中，但问题在 Java 中应该是相同的。片段的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="48dp"
        android:layout_alignParentBottom="true">
        <View
            android:layout_width="match_parent"
            android:layout_height="1dip"
            android:layout_marginLeft="4dip"
            android:layout_marginRight="4dip"
            android:background="?android:attr/dividerVertical"
            android:layout_alignParentTop="true"/>
        <View
            android:id="@+id/ViewColorPickerHelper"
            android:layout_width="1dip"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="4dip"
            android:layout_marginTop="4dip"
            android:background="?android:attr/dividerVertical" 
            android:layout_centerHorizontal="true"/>
        <Button
            android:id="@+id/btnCancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_toLeftOf="@id/ViewColorPickerHelper"
            android:background="?android:attr/selectableItemBackground"
            android:text="Cancel" 
            android:layout_alignParentBottom="true"/>
        <Button
            android:id="@+id/BtnColorPickerOk"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:background="?android:attr/selectableItemBackground"
            android:text="Ok" 
            android:layout_alignParentBottom="true" 
            android:layout_toRightOf="@id/ViewColorPickerHelper"/>
    </RelativeLayout> 
```

活动的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
        <LinearLayout
            android:orientation="horizontal"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/fragmentPlaceholder" />
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/addEventReportButtonPlaceholder"
            android:layout_weight="10"
            android:layout_gravity="bottom" />
    </LinearLayout>
    <ProgressBar
        android:id="@+id/addEventReportProgressBar"
        android:indeterminate="true"
        android:layout_width="50dp"
        android:layout_height="50dp"
        style="?android:attr/progressBarStyle"
        android:layout_centerVertical="true"
        android:layout_centerHorizontal="true" />
</RelativeLayout> 
```

包含片段的代码：

```
var newFragment = new BottomButtonsFragment ();
FragmentTransaction ft = FragmentManager.BeginTransaction ();
ft.Add (Resource.Id.addEventReportButtonPlaceholder, newFragment).Commit (); 
```

BottomButtonsFragment 在哪里：

```
public class BottomButtonsFragment : Fragment
{
    public override View OnCreateView (LayoutInflater inflater, ViewGroup container,
                            Bundle savedInstanceState)
    {
        View v = inflater.Inflate (Resource.Layout.BottomButtonsFragment, container, false);
        return v;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:28:08.897

将最上面的 LinearLayout 的 android:layout_weight 设置为比底部的多得多，就解决了这个问题！

# flyway - 使用 flyway 修补多个相同的模式

> ID：15476659
> 
> 赞同：2
> 
> 时间：2013-03-18T12:16:50.167
> 
> 标签：flyway

我已经彻底阅读了 flyway 文档，但我不清楚我想要的场景是否可能。我需要在同一个数据库中修补许多相同的模式，但在编写 sql 脚本时我不知道所有模式名称。

我知道*schemas参数，但*[常见问题解答](http://flywaydb.org/documentation/faq.html#multiple-schemas "常问问题")中提到的 2 种可能的策略不适用于我的场景。

该场景类似于为学生提供模式的大学：

*   我想为对象提供没有模式前缀的 sql 脚本
*   每个模式都应该有自己的 schema_version 表
*   在 flyway:migrate 定义的*schemas*参数中的每个模式都应该单独修补，即 sql 脚本应该在每个模式中运行。

我知道一个潜在的问题是，“模式”在 f.ex 中意味着不同的东西。oracle 比在 postgres 中，所以我想知道是否有任何其他推荐的方法来实现这一点。

否则我正在考虑自己实现这个功能......如果我们自己做，有没有机会让这个功能上游？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:07:57.540

您最好的机会是使用一种列出适用模式的方法来包装 Flyway，然后让每个模式运行一个 Flyway，并将 schemas 属性设置为正确的。

这确实是一个不错的功能，所以此时我想说看到它包含在主发行版中的机会非常渺茫。

# database - 多语言数据库设计方法

> ID：15476660
> 
> 赞同：1
> 
> 时间：2013-03-18T12:16:52.150
> 
> 标签：database, tsql, database-design, multilingual

我正在尝试实现一个多语言系统，但我在 stackoverflow 上遇到了一个我不明白的话题。

完整的问题可以在[这里找到](https://stackoverflow.com/questions/316780/schema-for-a-multilanguage-database)

问题中的选项3，它的结构如下

```
CREATE TABLE T_PRODUCT (
  NAME_FK        int,
  DESCRIPTION_FK int,
  PRICE          NUMBER(18, 2)
)

CREATE TABLE T_TRANSLATION (
  TRANSLATION_ID
)

CREATE TABLE T_TRANSLATION_ENTRY (
  TRANSLATION_FK,
  LANGUAGE_FK,
  TRANSLATED_TEXT NTEXT
)

CREATE TABLE T_TRANSLATION_LANGUAGE (
  LANGUAGE_ID,
  LANGUAGE_CODE CHAR(2)
) 
```

但我不明白为什么我们需要`T_TRANSLATION`桌子。它的工作是什么？这个问题也被问了一些评论，但他们没有得到关于这个问题的答案。

如何通过这种方法插入和选择产品？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:37:29.890

> 但我不明白为什么我们需要 T_TRANSLATION 表。它的工作是什么？

我*猜*它确定了需要翻译的字段并为 T_TRANSLATION_ENTRY 表中的 FOREIGN KEY 提供“目标”。所以对于一个特定的字段 TRANSLATION_ID 可能是 1，对于其他一些字段（不一定在同一个表中）它可能是 2 等等......这样，你可以有一个有限的结构，只有 3 个表，涵盖无限数量的翻译“模型其余部分中的可翻译”表。

话虽这么说，我反对这样的结构，因为它没有正确执行外键（DBMS 不“知道” TRANSLATION_ID 的含义，也无法确保其中只有有效值）并且可能会导致性能下降加入。

我认为最好在可翻译表和翻译之间建立直接的 1:N 关系，即使这意味着向模型添加许多新表（基本上每个可翻译表都有一个新翻译表）。例如：

![在此处输入图像描述](../Images/cd185e2d7cb0e53874db761b8ce69795.png)

# java - 即使文件存在，file.exists() 方法也会返回 false

> ID：15476662
> 
> 赞同：1
> 
> 时间：2013-03-18T12:16:56.793
> 
> 标签：java, file-io

我创建了一个程序来显示目录中存在的所有文件和子目录，目录名称作为 cmd 命令行中的参数传递。
第一个**if**条件（**if(f.isDirectory())**）检查给定参数是否是目录工作正常。
然后我使用**dir_content = f.list()**的 File.list() 方法将目录中所有文件名的列表存储在字符串 dir_content 数组中。
然后在 for 循环中，每次为存储在字符串数组 dir_content 中的每个文件名创建一个新文件对象，即**File f1 = new File(dir_content[i])**然后使用 exists() 检查文件是否存在方法是**if(f1.exists())**。
现在的问题是尽管**f1.exists**存在于给定目录中，但对于许多文件返回 false。它显示了一些文件，而且不显示子目录。
以下是我的程序代码：-

```
import java.io.File;
class FileDemo1
{
 public static void main(String[] a)
 {
  File f = new File(a[0]);
  String[] dir_content;   

  if(f.isDirectory())
  {
    System.out.print(f.getName()+" is a directory containing ");
    dir_content = f.list();

    for(int i=0;i<dir_content.length;i++)
    { 
        File f1 = new File(dir_content[i]);
        if(f1.exists())
        {
         System.out.print("\n\t: "+f1.getName());
         System.out.print("    "+f1.isFile());
         System.out.print("    "+f1.isDirectory());
        }
    }   

  }
 } 
} 
```

有人请告诉我问题背后的原因及其解决方案。
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:21:06.073

你的逻辑是正确的，但[File.list](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#list%28%29)并没有按照你的想法做。它返回文件名列表，而不是它们的完整路径，因此您需要执行以下操作：

```
 File f1 = new File(f,dir_content[i]); 
```

正确创建文件路径（您希望给定目录中的文件“file1.txt”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:26:16.963

dir_content[i] 将只有目录名称，因此当您构造 File 对象时，它将只有目录的名称而不是整个路径，这就是您得到错误的原因。

所以如果你做这样的事情它应该给你真实的：

```
 File f1 = new File(f.getPath() + dir_content[i]);   ///f being a directory 
```

# javascript - Javascript添加隐藏字段

> ID：15476663
> 
> 赞同：0
> 
> 时间：2013-03-18T12:17:02.850
> 
> 标签：javascript

我想为表单上选中的每个复选框添加一个隐藏字段。

这是我的表格：

```
<form action="managementSales" method="post" name="saleByItems">
Results in Tracks
<table id="pendingTable" border="1">
<tr>
  <th>Id</th>
  <th>Name</th>
  <th>artist</th>
  <th>List Price</th>
  <th>Sale Price</th>
</tr>
<c:forEach var="t" items="${tracks}">
<tr>
    <td><c:out value="${t.trackId}" /></td>
    <td><c:out value="${t.trackTitle}" /></td>
    <td><c:out value="${t.artist}" /></td>
    <td><c:out value="${t.listPrice}" /></td>
    <td><c:out value="${t.salePrice}" /></td>
    <td class="radioBox">
            <input type="checkbox" name="checkTrack" value="${t.trackId}"></td>
</tr>
</c:forEach>
</table>

<button onclick="validate()" class="button" name="saveChange" id="saveChange">Save</button>
    </form> 
```

然后我的javascript：

```
 <script type='text/javascript'>
            function validate() {
                var inputs = document.getElementsByTagName('input'), inputsLength = inputs.length;

                for ( var i = 0; i < inputsLength; i++) 
                {
                    var cpt=1;
                    if (inputs[i].name == 'checkTrack' && inputs[i].checked) 
                    {
                        document.getElementById('saveChange').innerHTML = '<input type="hidden" value="'+inputs[i].value+'" name="trackId_'+cpt+'">';
                        cpt++;
                    }

                }

                for ( var j = 0; j < inputsLength; j++) 
                {
                    var cpt2=1;
                    if (inputs[j].type == 'checkAlbum' && inputs[j].checked) 
                    {
                        document.getElementById('saveChange').innerHTML = '<input type="hidden" value="'+inputs[j].value+'" name="albumId_'+cpt2+'">';
                        cpt2++;
                    }
                }
            } 
```

问题是，即使我将类型更改为文本以查看是否有变化，也没有任何反应

# vba - 引用单元格时出现错误 9

> ID：15476664
> 
> 赞同：1
> 
> 时间：2013-03-18T12:17:08.820
> 
> 标签：vba, excel

我在 excel 中使用 VBA 来创建一个 testreport 数据库。当我引用一个单元格来查找文档编号时，我收到一个错误`script out of range (Error 9)`。

我正在使用的代码是：

```
LookUpRowCounter = HeaderRow + 1
    Do Until Workbooks(DBName).Worksheets("List").Cells(LookUpRowCounter, 1).Text = ""
        If Workbooks(DBName).Worksheets("List").Cells(LookUpRowCounter, 1).Text = DocumentNumber Then
            Exit Do
        End If
        LookUpRowCounter = LookUpRowCounter + 1
    Loop 
```

错误发生在第一条记录的 If 语句中，其中计数器 =5。数据表“列表”中从第 5 行到第 15 行有 10 条记录。

任何帮助表示赞赏

编辑

文档编号的格式为 0000AA000，包含数字和大写字母。

```
Public Sub Archive()
'On Error GoTo Err

Dim DocumentNumber As String
Dim ProjectNumber As Single

Dim DBName As String
Dim DBLocation As String

Dim LookUpRowCounter As Single

Application.ScreenUpdating = False

DBName = "Attribute DataSheet.xls"
DBLocation = "J:\home\PEJ2WO\Database For Martin\"

DocumentNumber = ThisWorkbook.Sheets("Detail and Summary").Range("infDocumentNumber").Text

Workbooks.Open Filename:=DBLocation & DBName

If Not DocumentNumber = "" Then

'Document number present
    LookUpRowCounter = HeaderRow + 1
    Do Until Workbooks(DBName).Worksheets("List").Cells(LookUpRowCounter, 1).Text = DocumentNumber
    If Workbooks(DBName).Worksheets("List").Cells(LookUpRowCounter, 1).Text = "" Then Exit Do
        LookUpRowCounter = LookUpRowCounter + 1
    Loop

Else

'create new document number
    DocumentNumber = GetDocumentNumbers(DocumentNumber)

    ThisWorkbook.Sheets("Detail and Summary").Unprotect (Password)
    ThisWorkbook.Sheets("Detail and Summary").Range("infDocumentNumber").Value = DocumentNumber
    'ThisWorkbook.Sheets("Detail And Summary").Range("infProjectNumber").Value = ProjectNumber
    ThisWorkbook.Sheets("Detail And Summary").Protect (Password)

    LookUpRowCounter = HeaderRow + 1
    Do Until Workbooks(DBName).Worksheets("List").Cells(LookUpRowCounter, 1).Text = ""
        If Workbooks(DBName).Worksheets("List").Cells(LookUpRowCounter, 1).Text = DocumentNumber Then
            Exit Do
        End If
        LookUpRowCounter = LookUpRowCounter + 1
    Loop

End If 
```

在这一点之后，只有将值写入摘要表的代码，这是冗长的，不应该相关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:28:39.570

错误 9 表示您试图通过不存在的索引获取集合的成员。在代码中的许多地方，您都试图通过硬编码名称获取 Workbook、Worksheet 和 Range 对象。即使您认为其中至少一个不存在，所以您会收到错误消息。

尝试使用以下函数安全地尝试获取引用，并在成员不存在时优雅地处理它：

### TryGetItem

```
Function TryGetItem(ByVal Collection As Object, ByVal Index, ByRef Value) As Boolean
On Error GoTo ErrSub

    If IsObject(Collection(Index)) Then
        Set Value = Collection(Index)
    Else
        Value = Collection(Index)
    End If
    TryGetItem = True
    Exit Function

ErrSub:
    If Err.Number = 9 Then
        Err.Clear
        TryGetItem = False
    Else
        ' Propogate error
        Err.Raise Err.Number, , Err.Description
    End If
End Function 
```

现在，您可以通过以下方式更新现有方法以使用它：

```
Public Sub Archive()

    Dim DocumentNumber As String
    Dim ProjectNumber As Single
    Dim DBName As String
    Dim DBLocation As String
    Dim LookUpRowCounter As Single

    ' New variables:
    Dim wsDetail As Worksheet
    Dim rngDocNumber As Range
    Dim wbDatasheet As Workbook
    Dim wsList As Worksheet

    Application.ScreenUpdating = False

    DBName = "Attribute DataSheet.xls"
    DBLocation = "J:\home\PEJ2WO\Database For Martin\"

    If Not TryGetItem(ThisWorkbook.Sheets, "Detail and Summary", wsDetail) Then
        MsgBox "Worksheet 'Detail and Summary' does not exist"
    End If

    If Not TryGetItem(wsDetail.Names, "infDocumentNumber", rngDocNumber) Then
        MsgBox "Named range 'infDocumentNumber' does not exist"
    End If

    DocumentNumber = rngDocNumber.Text

    Set wbDatasheet = Workbooks.Open(DBLocation & DBName)

    If DocumentNumber <> "" Then

        If Not TryGetItem(wbDatasheet.Worksheets, "List", wsList) Then
            MsgBox "Worksheet 'List' does not exist"
        End If

        'Document number present
        LookUpRowCounter = HeaderRow + 1
        Do Until wsList.Cells(LookUpRowCounter, 1).Text = DocumentNumber
            If wsList.Cells(LookUpRowCounter, 1).Text = "" Then Exit Do
            LookUpRowCounter = LookUpRowCounter + 1
        Loop

    Else

        'create new document number
        DocumentNumber = GetDocumentNumbers(DocumentNumber)

        wsDetail.Unprotect Password
        rngDocNumber.Value = DocumentNumber
        wsDetail.Protect Password

        LookUpRowCounter = HeaderRow + 1
        Do Until wsList.Cells(LookUpRowCounter, 1).Text = ""
            If wsList.Cells(LookUpRowCounter, 1).Text = DocumentNumber Then Exit Do
            LookUpRowCounter = LookUpRowCounter + 1
        Loop

    End If

    Application.ScreenUpdating = True

End Sub 
```

# c# - 水晶报表文本对象重叠

> ID：15476668
> 
> 赞同：1
> 
> 时间：2013-03-18T12:17:22.953
> 
> 标签：c#, crystal-reports, overlap

我正在为 win-forms 创建水晶报表。我有图像中显示的水晶报告。顶部文本对象与另一个文本对象重叠。我已将两个文本对象属性设置为可以增长为零。我尝试过保持在一起选项但不起作用。这里可以做什么？我想在这两个对象之间设置空间。有人对此有解决方案吗？

这是报告的屏幕截图：

![在此处输入图像描述](../Images/23e767c04d0bd08a1b57db02ba23f67c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:58:28.560

您可以将每个对象放入同一区域中自己的部分（取决于您使用的 Crystal 版本，这将在相当于“部分专家”的情况下完成）。这样，每个部分的大小都会适合内容（您可以根据需要打开 can grow 属性），并且不会与下面部分中的对象重叠。

[这里有一篇文章](http://arsalantamiz.blogspot.ca/2008/09/how-to-handle-overlapping-of-large-text.html)描述了如何做到这一点（文章在报告页脚演示了这样做，但任何区域的过程都是相同的）。

# java - 现实生活中的泛型类示例

> ID：15476673
> 
> 赞同：6
> 
> 时间：2013-03-18T12:17:30.640
> 
> 标签：java, oop, design-patterns, generics, singleton

我在 Java 面试中得到了下一个问题：

1.  你能说出一些现实生活中的通用类例子吗？不是来自真实的编程生活，而是共同点。例如，您正在向对编程一无所知的人解释泛型。

2.  最简单的设计模式也是如此——单例。

我知道关于第一个问题（关于泛型）的任何想法，我试图命名不同的手动工具（如 fretsaw），它们仅适用于一种类型的材料，但它实际上不是泛型。

请避免类似收藏的建议，这太天真和明显了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T12:22:56.563

1.  我想开一家宠物店，我不在乎它们是什么不同类型的宠物，但该死的我想要一家宠物店。我想要小猫、乌龟和蜘蛛。我希望能够数出它们，找出我有多少只动物，然后这样订购它们。我不想说我的乌龟是乌龟，我知道它是乌龟。

2.  商店银行账户只有一个，我永远不会超过一个，如果有人从我这里订购，无论是在线还是邮寄，都只有一个商店银行账户。无论从哪里访问我的商店，都不会再有另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:22:26.313

一碗东西总是一个很好的例子。

```
Bowl<T> can be Bowl<Cookie> Bowl<Candy> .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:28:03.267

所以我想买一台电视机。我正在浏览一个`List<TV>`. 但后来我决定我想要一台液晶电视。所以我`instanceof`通过列表并得到`List<LCD_TV>`。因为我想要一台公司电视，所以我打电话给 abstract`TV.getManufacturer()`并检查它是否`== company`。然后我知道我想要一个 LED 发光的 LCD，所以我打电话`LCD_TV.getLcdType()`检查它是否`== LED`。然后我只是随机选择`list.get( rand() % list.size() )`

# delphi - 释放包含 TJvAppDBStorage 的数据模块会在 TComponent.RemoveNotification() 中引发访问冲突

> ID：15476675
> 
> 赞同：0
> 
> 时间：2013-03-18T12:17:33.403
> 
> 标签：delphi, delphi-xe2, jvcl

我有一个无法释放的数据模块（听起来很有趣）。无论我是尝试手动销毁它，还是让另一个组件（甚至`Application`）为我完成它，我都会得到一个带有此堆栈跟踪的 AV：

```
exception class   : EAccessViolation
exception message : Access violation at address 0048FC2B in module 'Instruments.exe'. Read of address 80808088.

main thread ($1e28):
0048fc2b Instruments.exe System.Classes    TComponent.RemoveNotification
00408a01 Instruments.exe System         57 @Halt0
00ac86f0 Instruments.exe Instruments    82 initialization 
```

这个数据模块包含一堆`TADOxxx`组件，加上两个`TJvDataSource`、一个`TApplicationEvents`、一个`TClientDataSet`和一个`TJvAppDBStorage`。它的代码只包含打开 ADO 连接、向表中写入一些记录、运行一些查询等（没有什么不寻常的）。除了我上面提到的之外，它不*拥有任何其他组件。*我很困惑这个虚假的电话是从哪里来`RemoveNotificaion()`的。有任何想法吗？

**更新**

删除后`TJvAppDBStorage`，我可以销毁数据模块。这是组件的属性：

```
object AppStorage: TJvAppDBStorage
  StorageOptions.BooleanStringTrueValues = 'TRUE, YES, Y'
  StorageOptions.BooleanStringFalseValues = 'FALSE, NO, N'
  DataSource = dsConfiguration
  KeyField = 'Key'
  SectionField = 'Section'
  SubStorages = <>
  ValueField = 'Value'
  Left = 272
  Top = 304
end 
```

有人用过`JvAppDBStorage`吗？这是*正常*和*预期*的行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:35:06.763

我没有经验，`JvAppDBStorage`但我可以猜测发生了什么。

该组件将设置存储到数据库中，由实例的`DataSource`属性指定。`JvAppDBStorage`在你的情况下是`dsConfiguration`. 因此，为了使这一切正常工作，您需要在读写设置`dsConfiguration`时随时可用。`AppStorage`我敢打赌，当尝试存储它时，它`dsConfiguration`已经被破坏了。`AppStorage`我希望在`AppStorage`被释放时会发生这种情况。所以这个问题的解释`dsConfiguration`是之前释放的`AppStorage`。

解决方案是确保它在被释放`dsConfiguration`时仍然活着。`AppStorage`

# javascript - Facing issue while trying to pause the setInterval

> ID：15476680
> 
> 赞同：-1
> 
> 时间：2013-03-18T12:17:47.700
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

In my JQuery, I have a some code that goes to database after each time interval mentioned in my Web.config...I have a button as well, on clicking the button should stop the current SetInterval to 10 seconds... I am using below mentioned code..

```
window.setTimeout(MyFunction, 10000); 
```

MyFunction is the callback

```
function MyFunction() {
    window.setTimeout(MyFunction, 10000);
} 
```

Controller Actions

```
public JsonResult GetUpdates()
{
} 
```

Confusion is It still going to the database again.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:36:19.657

If you want to pause the function execution you could have a condition inside MyFunction which is checking whether a button is clicked and not register another `setTimeout` callback:

```
function MyFunction() {
    if (window.pauseExecution) {
        return;
    }

    // do the processing here ...

    // schedule another call in 10 seconds
    window.setTimeout(MyFunction, 10000);
} 
```

and when you click on the button simply set the `window.pauseExecution` global variable to `true`. And if you want to *resume*, set it to `false`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:07:33.487

```
var Interval = window.setTimeout(MyFunction, 10000);

ClearInterval(Interval);

    setTimeout(function () {
        //Code
    }, 10000); 
```

# java - Facebook 连接异常

> ID：15476682
> 
> 赞同：0
> 
> 时间：2013-03-18T12:17:51.903
> 
> 标签：java, android

我正在尝试连接 facebook 并在 facebook 中获取我的详细信息，但是当我想获取我的姓名时，我得到一个 JSONException 错误：“”必须使用活动访问令牌来查询有关当前用户的信息“

我标记了它发生的那一行

多谢

这是我的课：

```
public class MainActivity extends Activity {

    private Button logInButton;
    private TextView registerScreen;
    private TextView userText;
    private TextView passwordText;
    private SharedPreferences loginPreferences;
    private SharedPreferences.Editor loginPrefsEditor;
    private Boolean saveLogin;
    private CheckBox saveLoginCheckBox;
    private Button buttonLoginLogout;
    private ShareActionProvider provider;
    private TextView forgotPassword;
    private String userName="";

    private String friendsId="";
    private String friendsName="";
    private List<String> freindsIdList =new ArrayList<String>();

    String FILENAME = "AndroidSSO_data";
    private SharedPreferences mPrefs;
    private Facebook facebook;
    private AsyncFacebookRunner mAsyncRunner;
    private static String APP_ID = "xxxxxx" ;

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        this.requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.login);

        facebook = new Facebook(APP_ID);
        mAsyncRunner = new AsyncFacebookRunner(facebook);

        final LayoutInflater inflater = (LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 

        buttonLoginLogout=(Button) findViewById(R.id.facebooklog);

        buttonLoginLogout.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                    loginToFacebook();
                    getProfileInformation();
                }
        });

    public void loginToFacebook() {
        mPrefs = getPreferences(MODE_PRIVATE);
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);

        if (access_token != null) {
            facebook.setAccessToken(access_token);
        }

        if (expires != 0) {
            facebook.setAccessExpires(expires);
        }

        if (!facebook.isSessionValid()) {
            facebook.authorize(this,
                    new String[] { "email", "publish_stream" },
                    new DialogListener() {

                        @Override
                        public void onCancel() {
                            // Function to handle cancel event
                        }

                        @Override
                        public void onComplete(Bundle values) {
                            // Function to handle complete event
                            // Edit Preferences and update facebook acess_token
                            SharedPreferences.Editor editor = mPrefs.edit();
                            editor.putString("access_token",
                                    facebook.getAccessToken());
                            editor.putLong("access_expires",
                                    facebook.getAccessExpires());
                            editor.commit();
                        }

                        @Override
                        public void onError(DialogError error) {
                            // Function to handle error

                        }

                        @Override
                        public void onFacebookError(FacebookError fberror) {
                            // Function to handle Facebook errors

                        }

                    });
        }
    }

    public void getProfileInformation() {
        mAsyncRunner.request("me", new RequestListener() {
            @Override
            public void onComplete(String response, Object state) {
                Log.d("Profile", response);
                String json = response;
                try {
                    JSONObject profile = new JSONObject(json);
                    // getting name of the user
                    final String name = profile.getString("name");       //this line i get an JSONException with error: 
                                                                        //"An active access token must be used to query information about the current user "
                    // getting email of the user
                    final String email = profile.getString("email");

                    runOnUiThread(new Runnable() {

                        @Override
                        public void run() {
                            Toast.makeText(getApplicationContext(), "Name: " + name + "\nEmail: " + email, Toast.LENGTH_LONG).show();
                        }

                    });

                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }

            @Override
            public void onIOException(IOException e, Object state) {
            }

            @Override
            public void onFileNotFoundException(FileNotFoundException e,
                    Object state) {
            }

            @Override
            public void onMalformedURLException(MalformedURLException e,
                    Object state) {
            }

            @Override
            public void onFacebookError(FacebookError e, Object state) {
            }
        });
    }

} 
```

这是logcat：

```
03-18 12:24:32.081: W/System.err(858): org.json.JSONException: No value for name
03-18 12:24:32.131: W/System.err(858):  at org.json.JSONObject.get(JSONObject.java:354)
03-18 12:24:32.131: W/System.err(858):  at org.json.JSONObject.getString(JSONObject.java:510)
03-18 12:24:32.150: W/System.err(858):  at com.example.sale.MainActivity$3.onComplete(MainActivity.java:291)
03-18 12:24:32.150: W/System.err(858):  at com.facebook.android.AsyncFacebookRunner$2.run(AsyncFacebookRunner.java:276) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:29:45.460

我推荐使用 facebooks 新的 Android 3.0 Facebook 库。它有一个很好的教程和预建的类来管理状态和做查询。它比以前的库更简单、更干净

[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

查看[等到获取我的 id 和我的朋友 id facebook](https://stackoverflow.com/questions/15471107/wait-till-get-my-id-and-my-freinds-id-facebook/15477132#15477132) 以获取更多信息

# codeigniter - Facebook 抓取信息 - 响应代码 206 错误

> ID：15476687
> 
> 赞同：0
> 
> 时间：2013-03-18T12:18:11.417
> 
> 标签：codeigniter, facebook-opengraph, facebook-comments

我使用了 facebook 评论插件。当我在我的 html 页面上编写以下元标记时。我正在为我的应用程序使用 Codeigniter 框架。

```
 <html lang="en" xmlns="http://www.w3.org/1999/xhtml"
          xmlns:og="http://ogp.me/ns#"
          xmlns:fb="http://www.facebook.com/2008/fbml">

    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object#">

      <meta property="fb:admins" content="{MY_FB_ID}"/>
      <meta property="fb:app_id" content="{MY_APP_ID}" /> 
      <meta property="og:type"   content="website" /> 
      <meta property="og:url"    content="{my url}" /> 
      <meta property="og:title"  content="beyondandameter" /> 
      <meta property="og:image"  content="http://mysitedomainname/Andameter/uploads/tech1.jpg" /> 
```

报废信息

```
Response Code:  206
Fetched URL:    http://mysitedomain/Andameter/anda/politics_pics/26
Canonical URL:  http://mysitedomain/Andameter/anda/politics_pics/26 
```

应该修复的开放图警告

```
Inferred Property:  The 'og:url' property should be explicitly provided, even if a value can be inferred from other tags.
Inferred Property:  The 'og:title' property should be explicitly provided, even if a value can be inferred from other tags.
Inferred Property:  The 'og:image' property should be explicitly provided, even if a value can be inferred from other tags.
Small og:image: All the images referenced by og:image should be at least 200px in both dimensions, with 1500x1500 preferred. (Maximum image size is 5MB.) Please check all the images with tag og:image in the given url and ensure that it meets the recommended specification. 
```

有人帮我吗？我的错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T15:22:20.173

我会删除

```
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# object: http://ogp.me/ns/object#"> 
```

从 206 问题开始，但其他错误将得到修复 图像需要比它告诉您的更大，尝试像 600x400 像素一样，您可以添加多个图像标签，只需重复该行并替换您也可以添加的图像 url描述希望有帮助

# python - 为什么 Tornado 的 set_cookie 函数总是为 cookie 的值加上一对引号？

> ID：15476689
> 
> 赞同：2
> 
> 时间：2013-03-18T12:18:24.730
> 
> 标签：python, web, tornado

例如，在处理程序中，我写道：

```
self.set_cookie('name', "value", domain=my_domain) 
```

然后我在我的浏览器（谷歌浏览器）中得到这个 cookie 的值，我总是得到`"value"`而不是`value`.

如何设置不带引号的cookie？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:43:22.400

正如[RFC6265](https://www.rfc-editor.org/rfc/rfc6265#section-4.1.1)所述，cookie 值可以是双引号或完全不加引号（参见下面语法定义的 BNF 部分），并且两者在语法上都是有效的，因此这是必须在客户端解决的问题。

```
cookie-pair       = cookie-name "=" cookie-value
cookie-name       = token
cookie-value      = *cookie-octet / ( DQUOTE *cookie-octet DQUOTE )
cookie-octet      = %x21 / %x23-2B / %x2D-3A / %x3C-5B / %x5D-7E
                       ; US-ASCII characters excluding CTLs,
                       ; whitespace DQUOTE, comma, semicolon,
                       ; and backslash
token             = <token, defined in [RFC2616], Section 2.2> 
```

Cookie 版本 1 声明对包含空格的值使用双引号 cookie 值，而 cookie 版本 0 使用带有编码字符的不带引号的值（空格为 %20），并且这种行为（cookie 处理）可能因浏览器而异。

# uitableview - 动态初始化 UITableView

> ID：15476706
> 
> 赞同：0
> 
> 时间：2013-03-18T12:19:04.223
> 
> 标签：uitableview, tableview, cell

我有一个问题：如何动态初始化 UITableView ？

事实上，我有一个带有 3 个标签和 1 个复选框的自定义单元格。在我的 tableView 中，我有两个部分。只是为了测试，我手动输入：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 5;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{

    return 2;
} 
```

但是，如果选中可见单元格上的复选框，如果我滚动将出现的下一个复选框也会被选中，但我不想要！

我想创建一个带有 3 个标签和一个复选框的类，如下所示：

```
#import <Foundation/Foundation.h>

@interface MyClass : NSObject

@property(strong, nonatomic) NSString *label1;
@property(strong, nonatomic) NSString *label2;
@property(strong, nonatomic) NSString *label3;
@property(assign) BOOL *checked;

@end 
```

并通过使用此类（包含此类对象的数组）动态初始化我的 UITableView，但我不知道该怎么做。

谢谢你的帮助！:D

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:31:17.110

您可以使用免费的 Sensible TableView 框架并添加三个标签，如下所示：

```
SCTableViewSection *section = [SCTableViewSection sectionWithHeaderTitle:@"Title"];
[section addCell:[SCLabelCell cellWithText:@"Label 1"];
[section addCell:[SCLabelCell cellWithText:@"Label 2"];
//etc. 
```

# php - Sonata Admin Bundle 中的标签

> ID：15476707
> 
> 赞同：14
> 
> 时间：2013-03-18T12:19:04.673
> 
> 标签：php, symfony, sonata-admin

我已经开始使用奏鸣曲管理包。它非常方便且易于设置和使用，但我似乎无法为默认标签修复翻译

例如，link_add、link_list 将取代正确的英文标签。

```
#SonataAdmin
    sonata_block:
    default_contexts: [cms]
    blocks:
        sonata.admin.block.admin_list:
            contexts: [admin]
        sonata.block.service.text:
        sonata.block.service.rss:

sonata_admin:
    title:      Sonata Project
    title_logo: /bundles/sonataadmin/logo_title.png
    templates:
        # default global templates
        layout:  SonataAdminBundle::standard_layout.html.twig
        ajax:    SonataAdminBundle::ajax_layout.html.twig

        # default actions templates, should extend a global templates
        list:    SonataAdminBundle:CRUD:list.html.twig
        show:    SonataAdminBundle:CRUD:show.html.twig
        edit:    SonataAdminBundle:CRUD:edit.html.twig

    dashboard:
        blocks:
            # display a dashboard block
            - { position: left, type: sonata.admin.block.admin_list } 
```

这是我的配置文件，这些是文档提供的基本默认设置。我在这里缺少什么来启用默认视图参数的标签？谁能帮忙

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-18T12:44:47.100

对于翻译菜单和表单覆盖文件：（`SonataAdminBundle.[your_language].xliff`内容来自：）`vendor/sonata-project/admin-bundle/Sonata/AdminBundle/Resources/translations/SonataAdminBundle.[your_language].xliff`，将文件放入：

```
app/Resource/SonataAdminBundle/translations/ 
```

完整路径：

```
app/Resource/SonataAdminBundle/translations/SonataAdminBundle.[your_language].xliff 
```

如果要翻译字段标签，则必须在包中创建翻译文件，例如：

```
src/YourAlias/YourNameOfBundle/Resources/translations/YourAliasYourNameOfBundle.[your_language].xliff 
```

如果你的`Admin`班级在

```
src/YourAlias/YourNameOfBundle/Admin/YourClassAdmin.php 
```

`Sonata`使用`FOSUserBundle`并且如果要更改用户模块的翻译，则必须覆盖文件：`FOSUserBundle.[your_language].yml`在：

```
app/Resource/FOSUSerBundle/translations/FOSUserBundle.[your_language].yml 
```

和类似地`SonataUserBundle`

我使用该配置，一切正常！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-10T11:41:48.277

扩展上面@mkjasinski 的评论，Symfony 翻译组件希望`_locale`在请求中找到一个属性。如果缺少此选项，或者找不到指定语言环境的翻译，则使用备用值。然而，这个后备值默认也是空白的，因此看到的是翻译标签而不是文本。

要解决此问题，请通过将以下内容添加到以下内容来设置[默认翻译语言环境](http://symfony.com/doc/current/book/translation.html#setting-a-default-locale)`config.yml`：

```
framework:
  #...
  translator:
    fallback: %locale% 
```

# logging - 如何在 ActionScript2 中记录/记录赋值运算符？

> ID：15476714
> 
> 赞同：0
> 
> 时间：2013-03-18T12:19:22.807
> 
> 标签：logging, actionscript, operator-keyword, movieclip

我不确定我的目的是否可以在 Action script 2 语言级别中实现，或者有某种棘手的方法可以做到这一点。所以我将在这里描述我的目的，并希望有人可以与我分享你的知识:-)

我尝试在动作脚本 2 中记录赋值动作，特别是当我们更新 MovieClip 的文本内容时，例如`mc`是一个文本块影片剪辑，通常我们将这个 MovieClip 内容更新为`mc.text = string_var`.

所以我的目的是记录/记录这个赋值运算符而不改变这个赋值表达式，这可能吗？

1.  我想记录`string_var`从哪里来，首先想到的是从 String 继承并添加一些关于这个类似字符串的对象来自哪里的私有变量。你能给我一个关于如何从 String 继承的例子，但也要像我们通常使用字符串一样保持它，我的意思是从与真实字符串相同的语法。

2.  我想记录/记录这个类似字符串的对象设置为哪个 MovieClip。我想也许我可以覆盖赋值运算符来做到这一点，但我不知道怎么做。或者你能分享一些潜在的方法来做到这一点吗？

非常感谢。

# c - 如何查询服务器并获取 MX、A、NS 记录

> ID：15476717
> 
> 赞同：4
> 
> 时间：2013-03-18T12:19:24.343
> 
> 标签：c, sockets, unix, dns, libresolv

我正在尝试获取 A、MX 和 NS A 服务器记录，如下所示：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <netinet/in.h>
#include <resolv.h>
#include <netdb.h>

#define N 4096

int main (int argc, char *argv[])
{
    u_char nsbuf[N];
    char dispbuf[N];
    ns_msg msg;
    ns_rr rr;
    int i, l;

    if (argc < 2) {
        printf ("Usage: %s <domain>\n", argv[0]);
        exit (1);
    }

    // HEADER
    printf("Domain : %s\n", argv[1]);
    // ------

    // A RECORD
    printf("A records : \n");
    l = res_query(argv[1], ns_c_any, ns_t_a, nsbuf, sizeof(nsbuf));
    if (l < 0)
    {
      perror(argv[1]);
    }
    ns_initparse(nsbuf, l, &msg);
    l = ns_msg_count(msg, ns_s_an);
    for (i = 0; i < l; i++)
    {
      ns_parserr(&msg, ns_s_an, 0, &rr);
      ns_sprintrr(&msg, &rr, NULL, NULL, dispbuf, sizeof(dispbuf));
      printf("\t%s \n", dispbuf);
    }
    //------------

    // MX RECORD
    printf("MX records : \n");
    l = res_query(argv[1], ns_c_any, ns_t_mx, nsbuf, sizeof(nsbuf));
    if (l < 0)
    {
      perror(argv[1]);
    }
    else
    {
#ifdef USE_PQUERY
      /* this will give lots of detailed info on the request and reply */
      res_pquery(&_res, nsbuf, l, stdout);
#else
      /* just grab the MX answer info */
      ns_initparse(nsbuf, l, &msg);
      l = ns_msg_count(msg, ns_s_an);
      for (i = 0; i < l; i++)
      {
        ns_parserr(&msg, ns_s_an, i, &rr);
        ns_sprintrr(&msg, &rr, NULL, NULL, dispbuf, sizeof(dispbuf));
        printf ("\t%s\n", dispbuf);
      }
#endif
    }
    // ---------

    // NS RECORD
    printf("NS records : \n");
    l = res_query(argv[1], ns_c_any, ns_t_ns, nsbuf, sizeof(nsbuf));
    if (l < 0)
    {
      perror(argv[1]);
    }
    ns_initparse(nsbuf, l, &msg);
    l = ns_msg_count(msg, ns_s_an);
    for (i = 0; i < l; i++)
    {
      ns_parserr(&msg, ns_s_an, 0, &rr);
      ns_sprintrr(&msg, &rr, NULL, NULL, dispbuf, sizeof(dispbuf));
      printf("\t%s \n", dispbuf);
    }
    // ---------
    return 0;
} 
```

On request 收到很多相同的，即相同的 A 记录。NS 记录也是如此。我究竟做错了什么？例子 ：

```
Domain : mail.ru
A records :
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
        mail.ru.                22S IN A        94.100.191.207
MX records :
        mail.ru.                1m57s IN MX     10 mxs.mail.ru.
NS records :
        mail.ru.                1m50s IN NS     ns.mail.ru.
        mail.ru.                1m50s IN NS     ns.mail.ru.
        mail.ru.                1m50s IN NS     ns.mail.ru.
        mail.ru.                1m50s IN NS     ns.mail.ru.
        mail.ru.                1m50s IN NS     ns.mail.ru.
        mail.ru.                1m50s IN NS     ns.mail.ru. 
```

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T12:28:58.410

在本次通话中：

```
 ns_parserr(&msg, ns_s_an, 0, &rr); 
```

第三个参数是您要检索的记录的索引。所以在你的情况下应该是：

```
 ns_parserr(&msg, ns_s_an, i, &rr); 
```

刚刚用那个小修复尝试了你的代码，它按预期工作：

```
Domain : mail.ru
A records : 
    mail.ru.        5S IN A     94.100.191.248 
    mail.ru.        5S IN A     94.100.191.249 
    mail.ru.        5S IN A     94.100.191.250 
    mail.ru.        5S IN A     94.100.191.201 
    mail.ru.        5S IN A     94.100.191.202 
    mail.ru.        5S IN A     94.100.191.203 
    mail.ru.        5S IN A     94.100.191.204 
    mail.ru.        5S IN A     94.100.191.205 
    mail.ru.        5S IN A     94.100.191.206 
    mail.ru.        5S IN A     94.100.191.207 
    mail.ru.        5S IN A     94.100.191.208 
    mail.ru.        5S IN A     94.100.191.209 
    mail.ru.        5S IN A     94.100.191.210 
    mail.ru.        5S IN A     94.100.191.241 
    mail.ru.        5S IN A     94.100.191.242 
    mail.ru.        5S IN A     94.100.191.243 
    mail.ru.        5S IN A     94.100.191.244 
    mail.ru.        5S IN A     94.100.191.245 
    mail.ru.        5S IN A     94.100.191.246 
    mail.ru.        5S IN A     94.100.191.247 
MX records : 
    mail.ru.        7m14s IN MX 10 mxs.mail.ru.
NS records : 
    mail.ru.        3m35s IN NS ns2.mail.ru. 
    mail.ru.        3m35s IN NS ns.mail.ru. 
    mail.ru.        3m35s IN NS ns4.mail.ru. 
    mail.ru.        3m35s IN NS ns5.mail.ru. 
    mail.ru.        3m35s IN NS ns1.mail.ru. 
    mail.ru.        3m35s IN NS ns3.mail.ru. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-22T20:26:58.517

使用 Ubuntu 20.04 及更高版本，

```
 res_query(argv[1], ns_c_any, ns_t_mx, nsbuf, sizeof(nsbuf)); 
```

失败。请用 ns_c_in 替换 ns_c_any

```
 res_query(argv[1], ns_c_in, ns_t_mx, nsbuf, sizeof(nsbuf)); 
```

# sql-server - 在 vb6 错误 opendatasource 中运行 sql 存储过程

> ID：15476718
> 
> 赞同：0
> 
> 时间：2013-03-18T12:19:27.497
> 
> 标签：sql-server, ms-access, vb6

我正在尝试使用以下代码使用 VB6 ADO 连接将访问表中的所有记录插入到 sql server 表中

```
Set cn = New ADODB.connection
cn.CursorLocation = adUseClient
cn.ConnectionString = "Provider=SQLOLEDB.1;Password=password;Persist Security
Info=True;User ID=sa;Initial Catalog=Kargozini;Data Source=DC"
cn.Open
cn.execute("INSERT INTO TLeavePersonel SELECT * FROM OPENDATASOURCE
('Microsoft.Jet.OLEDB.4.0','Data Source=D:\Kargozini\arazz\Arazdb.Mdb; 
Jet OLEDB:Database Password=MYPASSWORD;' )... TLeavePersonel Rowset_1") 
```

但是当我运行代码时会出现以下错误：

> 运行时错误“-2147217900 (80040e14)”：[OLE/DB 提供程序返回消息：Microsoft Jet 数据库引擎无法打开文件“D:\Kargozini\arazz\Arazdb.Mdb”。它已经由另一个用户独占打开，或者您需要权限才能查看其数据。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:38:09.330

看来您正在使用 MS Access，因此您可以在查询中引用 SQL Server 连接：

```
INSERT INTO 
[ODBC;DRIVER=SQL Server;SERVER=server;Trusted_Connection=Yes;DATABASE=Kargozini;].TLeavePersonel 
SELECT * FROM TLeavePersonel; 
```

您将在此处找到合适的 ODBC 连接字符串：http: [//www.connectionstrings.com/](http://www.connectionstrings.com/)

# javascript - 如何使用 JavaScript 断点调试 WebStorm

> ID：15476719
> 
> 赞同：4
> 
> 时间：2013-03-18T12:19:29.313
> 
> 标签：javascript, debugging, webstorm

在 WebStorm 6 的调试器面板中，我看到：

![在此处输入图像描述](../Images/9cfea72f8e2d822bc49d36a972de9054.png)

我必须做什么才能使这些断点起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T01:01:09.360

我发现在我需要实际到达断点之前的某个位置使用“调试器”就足以让它真正用于“本地”调试会话。没有它，我做什么都没关系，webstorm-running-node 引擎只会简单地运行我的 javascript，完全忽略断点。

这是一个虚拟示例。我无法让调试器在第 20 行的断点处停止。我放入了“调试器；” 进入它上面，一切又开始工作了。如果我把它拿出来，它就会停止工作，这很痛苦，但它让我现在可以继续我的工作。当我进行部署时，迟早我会不小心把其中一个留在里面......：\

![“调试器”使用示例](../Images/f21b9e0385cfc36b605f31e567365525.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T17:12:45.910

您必须使用删除调试，并且必须为调试配置中的 url 提供映射，以便 webstorm 可以找到文件。

这可以通过“运行”/“编辑配置...”来完成。在那里单击您的项目基础目录并双击右侧以输入文本。

如果您的文件在例如 in`"mydir/html/workspace/Project/"`并且可以通过`"http://localhost/Project"`然后输入`"http://localhost/Project/"`.

您会注意到，现在当您单击日志条目时，打开的文件是您的本地文件，您可以在以前是远程文件时对其进行编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-18T03:32:54.117

我正在使用 Webstorm 2019.2，并且能够为使用[create-react-app](https://github.com/facebook/create-react-app)创建的基本反应应用程序设置断点调试，如下所示：

1.  运行 npm start 让应用程序在开发模式下运行。您可以在终端中执行此操作，也可以通过在 WebStorm 的 npm 工具窗口中双击任务来执行此操作。
2.  在 WebStorm 中创建一个新的 JavaScript 调试配置（菜单运行 - 编辑配置... - 添加 - JavaScript 调试）。[将http://localhost:3000/](http://localhost:3000/)粘贴到 URL 字段中。

    *   ***非常重要***：选中“确保在加载脚本时检测到断点”框，因为默认情况下它没有被选中，而且我的断点在没有它的情况下不起作用。
3.  单击确定关闭运行/调试配置

4.  设置一些断点

5.  从播放按钮旁边的下拉框中选择新的运行配置

6.  按播放按钮旁边的错误按钮

7.  一旦 Web 浏览器启动并且您到达有断点的代码，断点现在应该触发

其中一些来自[在 WebStorm 中使用 Create React App 创建的调试 React 应用程序](https://blog.jetbrains.com/webstorm/2017/01/debugging-react-apps/)

有关一个非常好的演示，请参阅[在 WebStorm 和 Chrome 中调试 JavaScript：创建调试配置](https://www.youtube.com/watch?v=YNNDMpoGV0w)，但不要忘记上面***非常重要***的步骤。

# android - 推特 REST API 1.1 Java

> ID：15476721
> 
> 赞同：0
> 
> 时间：2013-03-18T12:19:34.237
> 
> 标签：android, twitter

您好我正在尝试在不使用解析 SDK 的情况下使用 Twitter 的 REST API。我从 parse twitter 类中获得了访问令牌和访问令牌秘密，谁能告诉我我做错了什么。

我正在使用 twitter 的 REST api 1.1。

```
 private void usingNetwork() {
    // TODO Auto-generated method stub
    new AsyncTask<Void, Void, String>() {

        @Override
        protected String doInBackground(Void... params) {
            // TODO Auto-generated method stub

            try {
                URL ur = new URL(
                                        "https://api.twitter.com/1.1/statuses/user_timeline.json?  screen_name=suresh_bora&include_entities=true");
                HttpURLConnection conn = (HttpURLConnection) ur
                        .openConnection();
                conn.addRequestProperty("Content-Type",
                        "application/x-www-form-urlencoded");
                conn.addRequestProperty(
                        "Authorization",
                        "OAuth oauth_consumer_key="
                                + ParseTwitterUtils.getTwitter()
                                        .getConsumerKey()
                                + ",oauth_token="
                                + ParseTwitterUtils.getTwitter()
                                        .getAuthToken()
                                + ",oauth_nonce=kYjzVBB8Y0ZFdfdfabxSWbWovY3uYSQ2pTgmZeNu2VS4cg," +
                                "oauth_signature_method=HMAC-SHA1," +
                                "oauth_timestamp="+ new Timestamp(date.getSeconds()) +
                                ",oauth_version=1.0,"+
                                "oauth_signature="+ParseTwitterUtils.getTwitter().getAuthTokenSecret()+"");
                conn.setDoInput(true);
                conn.setDoOutput(true);
                conn.setRequestMethod("GET");

                readStream(conn.getInputStream());
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            return null;

        }

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
        }
    }.execute();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T17:29:22.237

这对我有帮助：

“ **SSL 绝对需要。** 这种身份验证方式只有在使用 SSL 时才安全。因此，所有请求（获取和使用令牌）都必须使用 HTTPS 端点”（(c) [https://dev.twitter.com/docs /auth/application-only-auth](https://dev.twitter.com/docs/auth/application-only-auth) )

所以你必须使用 HttpsURLConnection 而不是 Http。之后检查你是否获得了令牌，它看起来像“AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA%2FAAAAAAAAAAAAAAAAAAAAAA%3DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA”。

这是一个例子：

```
 private final static String getTokenURL = "https://api.twitter.com/oauth2/token";
 private static String bearerToken;

/**
 * @param args
 */
public static void main(String[] args) {

    // encodeKeys(APIKEY, APISECRET);

    new Thread(new Runnable() {

        @Override
        public void run() {
            try {

                bearerToken = requestBearerToken(getTokenURL);
                fetchTimelineTweet(twitURL);

            } catch (IOException e) {
                System.out.println("IOException e");
                e.printStackTrace();
            }
        }
    }).start();

}

// Encodes the consumer key and secret to create the basic authorization key
private static String encodeKeys(String consumerKey, String consumerSecret) {
    try {
        String encodedConsumerKey = URLEncoder.encode(consumerKey, "UTF-8");
        String encodedConsumerSecret = URLEncoder.encode(consumerSecret,
                "UTF-8");

        String fullKey = encodedConsumerKey + ":" + encodedConsumerSecret;
        byte[] encodedBytes = Base64.encodeBase64(fullKey.getBytes());

        return new String(encodedBytes);
    } catch (UnsupportedEncodingException e) {
        return new String();
    }
}

// Constructs the request for requesting a bearer token and returns that
// token as a string
private static String requestBearerToken(String endPointUrl)
        throws IOException {
    HttpsURLConnection connection = null;
    String encodedCredentials = encodeKeys(APIKEY, APISECRET);

    System.out.println("encodedCredentials "+encodedCredentials);
    try {
        URL url = new URL(endPointUrl);
        connection = (HttpsURLConnection) url.openConnection();
        System.out.println(connection);
        connection.setDoOutput(true);
        connection.setDoInput(true);
        connection.setRequestMethod("POST");
        connection.setRequestProperty("Host", "api.twitter.com");
        connection.setRequestProperty("User-Agent", "anyApplication");
        connection.setRequestProperty("Authorization", "Basic "
                + encodedCredentials);
        connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8");
        connection.setRequestProperty("Content-Length", "29");
        connection.setUseCaches(false);

        writeRequest(connection, "grant_type=client_credentials");

        // Parse the JSON response into a JSON mapped object to fetch fields
        // from.
        JSONObject obj = (JSONObject) JSONValue.parse(readResponse(connection));

        if (obj != null) {
            String tokenType = (String) obj.get("token_type");
            String token = (String) obj.get("access_token");

            return ((tokenType.equals("bearer")) && (token != null)) ? token
                    : "";
        }
        return new String();
    } catch (MalformedURLException e) {
        throw new IOException("Invalid endpoint URL specified.", e);
    } finally {
        if (connection != null) {
            connection.disconnect();
        }
    }
}

// Fetches the first tweet from a given user's timeline
private static String fetchTimelineTweet(String endPointUrl)
        throws IOException {
    HttpsURLConnection connection = null;

    try {
        URL url = new URL(endPointUrl);
        connection = (HttpsURLConnection) url.openConnection();
        connection.setDoOutput(true);
        connection.setDoInput(true);
        connection.setRequestMethod("GET");
        connection.setRequestProperty("Host", "api.twitter.com");
        connection.setRequestProperty("User-Agent", "anyApplication");
         connection.setRequestProperty("Authorization", "Bearer " +  bearerToken);
        connection.setUseCaches(false);

        // Parse the JSON response into a JSON mapped object to fetch fields
        // from.
        JSONArray obj = (JSONArray) JSONValue.parse(readResponse(connection));
        System.out.println("JSON obj = "+obj);

        if (obj != null) {
            String tweet = ((JSONObject) obj.get(0)).get("text").toString();
            System.out.println(tweet);
            return (tweet != null) ? tweet : "";
        }
        return new String();
    } catch (MalformedURLException e) {
        throw new IOException("Invalid endpoint URL specified.", e);
    } finally {
        if (connection != null) {
            connection.disconnect();
        }
    }
}

// Writes a request to a connection
private static boolean writeRequest(HttpURLConnection connection,
        String textBody) {
    try {
        BufferedWriter wr = new BufferedWriter(new OutputStreamWriter(
                connection.getOutputStream()));
        wr.write(textBody);
        wr.flush();
        wr.close();

        return true;
    } catch (IOException e) {
        return false;
    }
}

// Reads a response for a given connection and returns it as a string.
private static String readResponse(HttpURLConnection connection) {
    try {
        StringBuilder str = new StringBuilder();

        BufferedReader br = new BufferedReader(new InputStreamReader(
                connection.getInputStream()));
        String line = "";
        while ((line = br.readLine()) != null) {
            str.append(line + System.getProperty("line.separator"));
        }
        return str.toString();
    } catch (IOException e) {
        return new String();
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T08:57:24.293

除此之外，您可以在上面找到 Defuera 发布的代码示例以及更多信息： http: [//www.coderslexicon.com/demo-of-twitter-application-only-oauth-authentication-using-java/](http://www.coderslexicon.com/demo-of-twitter-application-only-oauth-authentication-using-java/)

我做错的是将不记名令牌编码为base 64，你不需要这样做。

一旦你有了不记名令牌，你就可以打开另一个到 Twitter 的 HttpsUrlConnection 并处理响应。

我个人所做的只是取回一个对象并将其作为 json 返回到前端。

如果您尝试转换为特定的 json 类型，例如，如果您使用的是 org.simple.json，Twitter 将返回 JSON 数组或 JSON 对象，具体取决于您调用的 REST URL。因此，如果您尝试将其转换为 JSONObject 或 JSONArray，如果您选择了错误的类型，它将引发异常：

```
private Object requestTwitterApi(String endPointUrl, Map<String, String[]> params)
        throws IOException {

    HttpsURLConnection connection = null;

    // Generate query
    String query = generateQueryUrl(params);
    // Append query to URL
    endPointUrl += query;
    // endPointUrl is now: https://api.twitter.com/1.1/search/tweets.json?q=%40twitterapi for example

    try {
        URL url = new URL(endPointUrl);
        connection = (HttpsURLConnection) url.openConnection();
        LOGGER.debug("TwitterApiUrl: " + connection);
        connection.setDoOutput(true);
        connection.setRequestMethod("GET");
        connection.setRequestProperty("Host", "api.twitter.com");
        connection.setRequestProperty("User-Agent", "anyApplication");
        connection.setRequestProperty("Authorization", "Bearer " + bearerToken); // bearer token is exactly what was returned from Twitter
        connection.setUseCaches(false);

        // Parse the JSON response into a JSON mapped object
        JSONParser parser = new JSONParser();
        Object obj = null;
        try {
            obj = parser.parse(readResponse(connection));
        } catch (ParseException e) {
            LOGGER.debug("Exception parsing JSON from Twitter");
            e.printStackTrace();
        }
        // then just return the object and I use struts-json-plugin to convert to json and return to frontend. This will allow you to return JSON objects or arrays without issue
        return obj != null ? obj : "";

    } catch (MalformedURLException e) {
        LOGGER.error("Invalid endpoint URL specified : " + e);
        throw new IOException("Invalid endpoint URL specified.", e);
    } finally {
        if (connection != null) {
            connection.disconnect();
        }
    }
} 
```

我希望这对某人有所帮助，这最终花了我一整天的时间来使用 Twitter API ......（我们正在做自定义分析）相比之下，Facebook 花了 30 分钟。

# windows-phone-7 - 如何在 windows phone 7 中访问 wsdl xml 格式请求？

> ID：15476722
> 
> 赞同：1
> 
> 时间：2013-03-18T12:19:34.863
> 
> 标签：windows-phone-7, soap, wsdl

我们得到了 wsdl 描述。如何在 windows phone 7 中访问 wsdl？我们没有找到哪些参数需要发送响应以及服务中可用的确切方法是什么？请告诉我如何在 windows phone 7 中访问 wsdl ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:20:56.193

您应该在 Visual Studio 上使用“添加服务参考”，查看此[msdn 文章](http://msdn.microsoft.com/en-us/library/bb628652.aspx)了解更多信息

它会自动从 wsdl 契约中生成您需要的所有存根和数据类。

# css - 在菜单栏中的按钮之间添加分隔符 (HTML/CSS)

> ID：15476727
> 
> 赞同：2
> 
> 时间：2013-03-18T12:19:51.067
> 
> 标签：css, menu

我正在制作一个移动网站，并且在对我的菜单栏进行一些更改时遇到了一些困难。我不是该领域的专家，因此非常感谢您的帮助。

下面是菜单栏的代码。

CSS

```
<style type="text/css">
    * { padding: 0; margin: 3; }
    body { padding: 5px; font-family: Helvetica, Arial, sans-serif; width:95%; font-size:12px}
    ul { list-style: none; }
    ul li {
float: left;
padding: 1.5px;
position: relative;
margin: auto;}
ul a { display: table-cell; vertical-align: middle; width: 75%; height: 50px; text-align:center; background: #FFF; color:#000; border-style: solid; border-width:2px; border-color:#1570a6; text-decoration: none; }
    ul a:hover {background-color:#5A87B4; } 
```

HTML

```
<div> 
<ul>
<li>
  <div align="center"><a href="../Software.html" >Software</a>
    </div>
</li>
  <li>
    <div align="center"><a href="../Products.html">Products</a></div>
  </li>
<li>
<a href="../Order Online.html">FAQ</a></li>
</ul> 
```

这是一个基本的菜单栏，我想将其调整到中心，并且还有水平线将每个按钮分开，而所有这些都居中并适合移动屏幕上的 100%。非常感谢您的所有帮助

编辑：就像在每个按钮之后有一些空间，而是有一条水平线

编辑：将宽度从 75% 更改为 80px。请注意，我还更改了代码的 div ID，因为我在识别方面遇到了一些其他问题。:) 希望这不会让你感到困惑

```
#menubar * { padding: 0; margin: 2; }
    body { padding: 5px; font-family: Helvetica, Arial, sans-serif; width:95%; font-size:12px}

#menubar ul{text-align:center;}

#menubar ul li { display:inline-block; padding: 2px;  position: relative;  }

#menubar ul a { display: table-cell; vertical-align: middle; width: 80px; height: 50px; text-align:center; background: #FFF; color:#000; border-style: solid; border-width:2px; border-color:#1570a6; text-decoration: none; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:39:42.830

我在您的 CSS 代码中添加了以下行。我希望这是你想要的。

```
ul{
   display:inline-block;
   overflow:hidden;
}

div{
  text-align:center;
}

li:after{
   border-right:50px solid black;
   content:"";
   position:relative;
   left:10px;
   top:-27px;  
   z-index:-1;
   display:block;
   height:1px;
}

li:last-child{
   margin-right:-14px
} 
```

[**工作小提琴**](http://jsfiddle.net/PPZ2T/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:24:21.173

从您当前的 css 中删除`float:left;`' `li`s 并添加`text-align:center;`它应该可以工作：

```
ul li {
    text-align: center;
    padding: 1.5px;
    position: relative;
    margin: auto;
} 
```

这是一个有效的[JSFiddle](http://jsfiddle.net/DbcXL/)。

### 更新

在这种情况下，您可以将 CSS 更改为。

```
ul li{
    text-align:center;
    display:inline-block;
}

ul li:before {
    content: " - ";
}

ul li:first-child:before {
    content: none;
} 
```

这是一个有效的[JSFiddle](http://jsfiddle.net/DbcXL/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:32:35.540

现在只需**删除** `float:left`您的`li`并**添加** `display:inline-block;`并**添加** `text-align center`您的**ul**标签

像这样

```
ul{
text-align:center;
}

ul li{
display:inline-block;
vertical-align:top;
float:left; // remove this line
} 
```

**[演示](http://tinkerbin.com/nA1rnN2p)**

# android - android中具有多窗格视图的操作栏选项卡

> ID：15476742
> 
> 赞同：2
> 
> 时间：2013-03-18T12:20:21.950
> 
> 标签：android, android-fragments

我是android中的fragments和actionbar的新手。我想为具有多个选项卡的平板电脑开发应用程序，每个选项卡左侧都有 Listview，右侧有项目的详细信息

[这](http://c1345842.cdn.cloudfiles.rackspacecloud.com/assets/cdn_files/assets/000/002/355/original.png?1306257738)是我想做的一个例子。

我不知道哪个是活动，哪个是片段，以及如何使用此选项卡导航并更改列表视图的内容和详细信息。

我希望示例使用具有多窗格布局的选项卡进行导航，因为我对此进行了搜索，发现选项卡正在使用片段，而多窗格由两个片段组成，并且嵌套片段在 android 中是不允许的。

我想知道：activity和fragmentActivity有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:51:59.387

**片段教程**

谷歌“android片段教程”，你会得到很多这样的结果： [http ://www.vogella.com/articles/AndroidFragments/article.html](http://www.vogella.com/articles/AndroidFragments/article.html)

不要只坚持一个，因为其中许多只是略有不同，如果你做两个或三个，那么你将对片段的工作方式有更好的理解（独立或多窗格）。

**带有标签的片段**

查看切换片段示例的一个好方法是使用最新的 ADT 在 Eclipse 中创建一个新的 android 项目。创建一个新的 Android 应用程序项目，当您设置主要活动的名称时，您可以选择设置导航类型。选择标签或标签+滑动。这将为您生成一个干净的项目，以了解如何使用选项卡切换片段的基础知识。

**Activity vs FragmentActivity** 本质上，一个 `Activity`可能包含一个没有片段的布局，一个`FragmentActivity`可能包含一个有片段的布局。这个答案有更多细节：[Difference between Activity and FragmentActivity](https://stackoverflow.com/questions/10477997/difference-between-activity-and-fragmentactivity)

# javascript - DAT.gui - 生产就绪替代品

> ID：15476743
> 
> 赞同：15
> 
> 时间：2013-03-18T12:20:24.863
> 
> 标签：javascript, user-interface, user-controls, user-experience, dat.gui

我是 DAT.gui 的快乐用户，用于本地调试和我正在处理的图表的控制，但我需要具有基本相同功能的东西

*   使用滑块控制 int 或 float 范围
*   选择一种颜色

但我需要它更加可定制，以便我可以设计它以匹配我们的产品并最终添加新功能。

那里有类似的东西吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-11-29T20:01:47.437

另一种选择是[controlkit](https://github.com/automat/controlkit.js)。如下图所示，它有很多用于操作和可视化数据的选项；包括颜色选择器和滑块。

[![在此处输入图像描述](../Images/97fcf91c638719954fca7a7130eff6bc.png)](https://i.stack.imgur.com/Ek4Pp.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-24T20:21:48.543

由于 dat.GUI 已经满足您的需求，您最好的选择就是坚持下去。它在[Apache License V2](http://www.apache.org/licenses/LICENSE-2.0)下获得许可，因此您可以自由修改它，使其成为一个封闭源项目等。您甚至可以在完全不同的许可下发布您的新代码（参见[Wiki](http://en.wikipedia.org/wiki/Comparison_of_free_software_licenses)以了解许可比较）。

至于更改样式和添加功能，没有什么能阻止您添加自己的 CSS 样式以覆盖默认值，或者添加自己的 js 功能。

编辑：查看源代码，看起来样式是在目录中的`style.scss`文件中设置的`gui`。所以你可以编辑它并重新构建它，或者只是弄乱输出 css 文件本身，然后重新编译整个包（源页面有这方面的说明）。

# java - 为什么本地 timeZone 字符串会附加在 UTC 日期中？

> ID：15476745
> 
> 赞同：0
> 
> 时间：2013-03-18T12:20:27.720
> 
> 标签：java

我想在 UTC 时区中获取一个日期对象，所以我首先将它转换为一个字符串，该字符串正在返回正确的 UTC 日期字符串，但是当我再次将其解析为日期对象时，本地时区字符串（即 IST）正在获取附加在该日期而不是 UTC 中。

```
 Date date = new Date();
        DateFormat timeFormat = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss");
        timeFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
        String estTime = timeFormat.format(date);
        date = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss", Locale.ENGLISH).parse(estTime); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:27:23.447

A`Date`没有时区，它代表一个时刻。它以毫秒为单位保存时间。

你不能有一个`Date`with 格式，它不能那样工作。如果您需要`Date`在 GUI、控制台或其他任何地方显示 ，那就是当您使用 a 时`SimpleDateFormat`将其更改为`String`您想要的格式。

# c# - 如何使用 C# 和 ListView 显示存储在 android 数组中的数据

> ID：15476748
> 
> 赞同：-1
> 
> 时间：2013-03-18T12:20:51.327
> 
> 标签：c#, android, arrays, xamarin.android

我目前使用**Xamarin** for **Android用****C#**编写了以下代码：

 ****```
EditText nameText = FindViewById<EditText> (Resource.Id.editName);
        Button btnAddContact = FindViewById<Button> (Resource.Id.btnAddContact);

        ListView contactView = FindViewById<ListView> (Resource.Id.listView1);

        btnAddContact.Click += delegate {
            string[] contactArr = nameText.Text.Split('\n');
        }; 
```

**首先**.. 当单击 btnAddContact 时，输入到 EditText 字段中的数据是否会实际存储到数组 contactArr 中？没有构建错误，所以我不确定它是否会工作..

我的**主要问题**是，如果数据已存储到数组中，我该如何在列表视图中显示数据？代码示例对我有好处，因为我不知道该去哪里......谢谢。

**尝试使用新代码进行编辑。**

```
EditText nameText = FindViewById<EditText> (Resource.Id.editName);
        Button btnAddContact = FindViewById<Button> (Resource.Id.btnAddContact);

        ListView contactView = FindViewById<ListView> (Resource.Id.listView1);

        btnAddContact.Click += delegate {
            string[] contactArr = nameText.Text.Split('\n');

            var myAdapter = new ArrayAdapter(this, Resource.Id.listView1, contactArr);
            contactView.Adapter = myAdapter;
        }; 
```

编辑错误列表：

`You must supply a resource ID for a TextView Shutting down VM FATAL EXCEPTION: main java.lang.IllegalStateException: ArrayAdapter requires the resource ID to be a TextView at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:386) at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362) at android.widget.AbsListView.obtainView(AbsListView.java:2159) at android.widget.ListView.measureHeightOfChildren(ListView.java:1246) at android.widget.ListView.onMeasure(ListView.java:1158) at android.view.View.measure(View.java:15518) at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825) at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404) at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1052) at android.widget.LinearLayout.onMeasure(LinearLayout.java:590) at android.view.View.measure(View.java:15518) at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825) at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404) at android.widget.LinearLayout.measureVertical(LinearLayout.java:695) at android.widget.LinearLayout.onMeasure(LinearLayout.java:588) at android.view.View.measure(View.java:15518) at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825) at android.widget.FrameLayout.onMeasure(FrameLayout.java:310) at android.view.View.measure(View.java:15518) at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825) at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404) at android.widget.LinearLayout.measureVertical(LinearLayout.java:695) at android.widget.LinearLayout.onMeasure(LinearLayout.java:588) at android.view.View.measure(View.java:15518) at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825) at android.widget.FrameLayout.onMeasure(FrameLayout.java:310) at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176) at android.view.View.measure(View.java:15518) at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874) at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089) at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265) at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989) at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351) at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749) at android.view.Choreographer.doCallbacks(Choreographer.java:562) at android.view.Choreographer.doFrame(Choreographer.java:532) at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735) at android.os.Handler.handleCallback(Handler.java:725) at android.os.Handler.dispatchMessage(Handler.java:92) at android.os.Looper.loop(Looper.java:137) at android.app.ActivityThread.main(ActivityThread.java:5041) at java.lang.reflect.Method.invokeNative(Native Method) at java.lang.reflect.Method.invoke(Method.java:511) at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) at dalvik.system.NativeStart.main(Native Method) Caused by: java.lang.ClassCastException: android.widget.LinearLayout cannot be cast to android.widget.TextView at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:379) ... 45 more`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:12:17.360

`ListView`是一个愚蠢的控件，它不知道如何处理数据本身，所以它需要一个`Adapter`负责如何格式化数据的帮助。

要简单地显示`EditText`已拆分为数组的字母数字值，您可以使用`ArrayAdapter`Android 内置的 a。

```
var myAdapter = new ArrayAdapter(this, Resource.Layout.SimpleListItem1, contactArr); 
```

`ListView`需要了解此适配器，因此您还必须执行以下操作：

```
contactView.Adapter = myAdapter; 
```

所有这些都是非常基本的东西，您可以在[Xamarin 开发人员中心](http://docs.xamarin.com/)找到很多信息。Xamarin 还有一个非常不错的[GitHub 存储库](https://github.com/xamarin)，其中包含大量示例。

**编辑：**

将此添加到资源文件夹并调用它`TextViewItem.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/textItem" 
    android:textSize="44sp"       
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" /> 
```

并更改您的 ArrayAdapter 以匹配此：

```
var myAdapter = new ArrayAdapter(this, Resource.Layout.TextViewItem, contactArr); 
```****

# xml - 获取 xml 节点子节点和 xml 标签

> ID：15476759
> 
> 赞同：1
> 
> 时间：2013-03-18T12:21:11.593
> 
> 标签：xml, xslt, xpath

我有以下输入xml

```
<?xml version="1.0" encoding="UTF-8"?>  
<Parent>  
  <ParentElement1>PE1</ParentElement1>  
  <ParentElement2>PE2</ParentElement2>  
  <Child>  
    <ChildElement1>CE1</ChildElement1>  
    <ChildElement2>CE2</ChildElement2>  
  </Child>  
</Parent> 
```

我需要提取存在于父母中的孩子，

输出必须如下所示：

```
<Child>  
  <ChildElement1>CE1</ChildElement1>  
  <ChildElement2>CE2</ChildElement2>  
</Child>` 
```

我尝试过使用 XPath 表达式`/Parent/Child`，但它只选择文本 CE1 和 CE2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:25:55.347

这里的关键是使用`<xsl:copy-of>`而不是`<xsl:value-of>`.

来自 XSL 规范：`The xsl:copy-of element can be used to copy a node-set over to the result tree without converting it to a string.`.

使用以下样式表：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
<xsl:output method="xml" indent="yes" />
<!-- To get rid of <?xml ... declaration, use the following:
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes" /> -->

<xsl:template match="/">
  <!-- use copy-of instead of value-of -->
  <xsl:copy-of select="/Parent/Child" />
</xsl:template>

</xsl:stylesheet> 
```

输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<Child>
   <ChildElement1>CE1</ChildElement1>
   <ChildElement2>CE2</ChildElement2>
</Child> 
```

# java - 哪个地图提供移动对象到不同的索引？

> ID：15476773
> 
> 赞同：1
> 
> 时间：2013-03-18T12:22:05.433
> 
> 标签：java, gwt, collections

我需要一个带有`Map`键值对（可能`HashMap<String, Object>`）的，而它本身就是`Key`一个，例如：`property``Object`

```
class Person {
  String name; //I know a string is not a good unique key, but ok to illustrate my example
}

Person person = new Person("John");
map.put(person.getName(), person); 
```

此外，地图必须提供类似于 的访问器`ArrayList.add(idx, object)`。因此，还应该可以将对象重新排序到不同的位置并相应地调整其余部分。

哪个地图/列表适合这个？

（顺便说一句：我应该可以使用 GWT 运行，所以外部库可能有问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:26:37.867

没有一个标准的容器可以做到这一切。

但是，地图和 an 的组合`ArrayList`将满足您的所有要求。

# c# - 我可以在 VS12/10 中同时更改所有解决方案的项目输出路径吗？

> ID：15476774
> 
> 赞同：1
> 
> 时间：2013-03-18T12:22:17.453
> 
> 标签：c#, .net, visual-studio

我有超过 61 个项目的解决方案。

有 3 个目标平台：“Debug”、“Release”、“Release tablet”
有 2 个解决方案平台：“x86”和“Any CPU”

我希望在 2 个文件夹中构建所有项目：
D:\samplepath\Debug\ 用于平台“x86”上的“调试”配置和“任何 CPU”
D:\samplepath\Release\ 用于“发布”和“释放平板电脑”配置在所有平台上

是否有任何简单的方法来管理所有这些路径，而不是一一设置它们（它是 61x3x2 = 366 个路径来设置！sic！）？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:35:29.613

尝试这样的事情（我在 LinqPad 中运行这样的代码，但如果你愿意，你可以创建一个控制台应用程序）：

```
const string xmlns = "http://schemas.microsoft.com/developer/msbuild/2003";
void Main()
{
     var dir = @"C:\proj\catalyst\source";
     var xmlns = "http://schemas.microsoft.com/developer/msbuild/2003";
     foreach( var configFile in Directory.EnumerateFiles(dir,"*.csproj",SearchOption.AllDirectories))
     {              
        var doc = XDocument.Load(configFile);               
        var paths = doc.Descendants(XName.Get("OutputPath",xmlns));
        foreach(var path in paths)
        {
            path.Value = "\"$(SolutionDir)$(ConfigurationName)\$(PlatformName)\"";
        }
        doc.Save(configFile);
     }
} 
```

这将使您的输出目录相对于解决方案文件（尽管您可以根据需要将 $(SolutionDir) 替换为绝对路径。）

# phantomjs - Phantomjs用变量调用函数

> ID：15476776
> 
> 赞同：0
> 
> 时间：2013-03-18T12:22:30.410
> 
> 标签：phantomjs

我正在尝试将此代码放入一个变量中，然后从 phatom 调用该变量，并且 phantom 应该生成图形，例如：我保存这个代码`var test="code"`然后我在 phantomjs 中调用 test 并且它应该生成图形，这可能吗？

```
xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },
    series: [{
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    }] 
```

或者这也可以帮助创建 js 文件并从变量中调用它

```
phantomjs highcharts-convert.js -infile options1.json -outfile chart1.png -scale 2.5 -width 300 -constr Chart -callback callback.js 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T23:01:38.037

从您的问题中不清楚您到底要完成什么。如果你有

```
var test = { xAxis: { ... } }; 
```

并且您正在尝试从网页中访问该变量（即在实际 DOM 中生成图形），您必须将该变量作为参数传递给页面打开方法，即：

```
var test = { xAxis: { ... } };
var page = require('webpage').create();
page.open(function (someVar) {
  ...
  // now you have access to the test variable via someVar
  ...
}, test); 
```

如果这不是您想要完成的，请澄清您的问题，我会尽力提供帮助。

# jquery - 让 jQuery 在悬停和点击时出现醉意

> ID：15476787
> 
> 赞同：0
> 
> 时间：2013-03-18T12:23:22.943
> 
> 标签：jquery, tooltip, tipsy

目前，我正试图让[Tipsy](http://onehackoranother.com/projects/jquery/tipsy/)在悬停和点击时工作。但是我不知道这是否可能……使用其他工具会很不方便。

触发器：“手动”根本没有响应。有可能还是我真的必须使用其他工具？

这是代码的一部分：

function initialMouseEvents() { $('.channel-hover').each(function() {

```
 $('svg circle, svg path').tipsy({
        gravity: 's',
        trigger: 'manual',
        html: true,
        title: 'data-tipsy'
    });

    var dataChannel = $(this).attr('data-channel');

    $(this).bind('mouseover', function() {
        if ($(this).attr('data-channel').length) {
            effectVisualisation.highlightChannel(dataChannel);
            costVisualisation.highlightChannel(dataChannel);
        }
    }).bind('mouseout', function() {
        if ($(this).attr('data-channel').length) {
            effectVisualisation.normalizeChannel(dataChannel);
            costVisualisation.normalizeChannel(dataChannel);
        }
    });
}); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:32:23.270

从您的代码中，我不确定您真正想要做什么，或者您的代码不完整。

请查看以下**HTML：**

```
<a id="example-1" href="#" original-title="Hello World">Hover over me</a>
<a id="test" href="#" onclick="$('#example-1')[0].setAttribute('original-title','you did it')">Update</a> 
```

**Javascript：**

```
$(function() {
    $('#example-1').tipsy();
}); 
```

这就是你可能期待的。

**编辑：**对不起，我会包含发布 JsFiddle 链接的代码。

[http://jsfiddle.net/c3DUx/](http://jsfiddle.net/c3DUx/)

**编辑2：**

检查下面的小提琴，我希望你想要类似的东西。

[http://jsfiddle.net/c3DUx/2/](http://jsfiddle.net/c3DUx/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:29:18.720

可以为小费定义（手动/自定义）`trigger`：

```
$(function() {
  $('#focus-example [title]').tipsy({trigger: 'focus'});
}); 
```

请参阅： http: [//onehackoranother.com/projects/jquery/tipsy/#focus-example](http://onehackoranother.com/projects/jquery/tipsy/#focus-example)

尽管如此，Tipsy 似乎`triggers`默认不支持多个。但是可能可以手动绑定此行为 - 取决于您到底想要做什么。

到目前为止，您是否有一些示例代码？

* * *

编辑：只需找到有关（部分）此问题的类似线程：

```
$(".tipsy")
.live('mouseover',function(){
    $(this).tipsy("show");
})
.live("click",function() {
    $(this).tipsy("show");
})
.tipsy({
    gravity: gravity,
    html: true
}); 
```

[jQuery Tipsy：简单的覆盖解决方案？](https://stackoverflow.com/questions/9880728/jquery-tipsy-simple-overwriting-solution)

# google-visualization - 查看 DataView 是否为空的简单方法？

> ID：15476789
> 
> 赞同：1
> 
> 时间：2013-03-18T12:23:34.323
> 
> 标签：google-visualization, dataview

使用 Google 可视化 api，是否有一种简单的方法可以查看 DataView 是否为空？

[https://developers.google.com/chart/interactive/docs/reference#DataView](https://developers.google.com/chart/interactive/docs/reference#DataView)

我可以看到也许使用 dataView.getValue(0, 1) 等来检查空值，但它也包含列标题。

我猜这很棘手，因为数据视图可能有许多不同的格式，但是有没有一种很好的通用方法来检查空数据视图？我正在将数据视图用于饼图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:32:56.843

如果我没记错的话，这可以很容易地做到这一点

```
var predata = response.getDataTable();
var vals = new Array();
var rownum = predata.getNumberOfRows();
// Make sure our data isn't empty.
if (null==predata) // yoda was here
return; 
```

> 返回数据源返回的数据表。如果查询执行失败并且没有返回数据，则返回 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:33:02.137

从阅读文档来看，这似乎`dataView.getNumberOfRows()`是您正在寻找的东西。但是，在调用它之前，您需要获取过滤后的空行，然后将它们隐藏起来。这是[一个](https://code.google.com/apis/ajax/playground/?type=visualization#another_data_view)使用 Google Code Playground 的示例，我在其中检查一列是否为空，然后如果该行为空则隐藏该行。将该示例的 Google Code 的默认 JavaScript 替换为以下内容：

```
function drawVisualization() {
  var dataTable = google.visualization.arrayToDataTable([
    ['Name',   'Age', 'Instrument', 'Color'],
    [null,   null,     null,    null],
    ['Paul',   52,     'Sitar',     'Red'],
    ['George', 16,     'Guitar',    'Green'],
    ['Ringo',  72,     'Drums',     'White']
  ]);

  var table = new google.visualization.Table(document.getElementById('table'));
  table.draw(dataTable, null);

  var dataView = new google.visualization.DataView(dataTable);

  // Get rows where the 2nd column contains null
  var filteredRows = dataView.getFilteredRows([{column: 1, value:null}]); 
  console.log(filteredRows);

  dataView.setColumns([0, 1]);

  // Hide the filtered rows returned
  dataView.hideRows(filteredRows);

  // Check the number of rows that now exist
  console.log(dataView.getNumberOfRows());

  var chart = new google.visualization.ColumnChart(document.getElementById('chart'));
  chart.draw(dataView, {width: 400, height: 200});
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-24T11:58:06.293

[getDistinctValues](https://developers.google.com/chart/interactive/docs/reference#DataTable_getDistinctValues)可以帮助你。当应用于沿 Y 轴可视化的列时，它适用于折线图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T13:14:19.533

好像不太对...

也许我应该在客户端甚至看到数据之前在服务器端用 0 替换 null ......

我已经采取了：

```
if (dataView.getValue(0, 1) === null || dataView.getValue(1, 1) === null || dataView.getValue(2, 1)) === null) 
```

我的数据视图结构在哪里：

```
列标题 1 | 数据
栏目 2 | 数据
专栏标题 3 | 数据

```

# codeigniter - Codeigniter index.php 页面

> ID：15476792
> 
> 赞同：3
> 
> 时间：2013-03-18T12:23:42.827
> 
> 标签：codeigniter, view, indexing

我想将视图目录中的一些脚本设置为默认页面，例如 \application\views\index.php 并从应用程序的根目录中删除 index.php 文件。是否可以？（我试图将 config['index_page'] 的值更改为我想要的值，但它给了我找不到页面的错误）。

或者也许 codeigniter 有如此严格的项目结构，我不能做这样的改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:21:03.163

您不能从根目录中删除 index.php 文件，而是可以从 url 中删除 index.php 文件。

您必须先定义默认控制器，然后执行以下步骤

将 .htaccess 文件与 index.php 文件一起放在应用程序根目录中。（检查 htaccess 扩展是否正确，Bz htaccess.txt 对我不起作用。）

并将以下规则添加到 .htaccess 文件中，

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

然后在您的 application/config/config.php 文件中找到以下行

```
$config['index_page'] = 'index.php'; 
```

将变量设置为空，如下所示。

```
$config['index_page'] = ''; 
```

就是这样，它对我有用。

如果它不起作用，请尝试用这些参数（'AUTO'、'PATH_INFO'、'QUERY_STRING'、'REQUEST_URI'和'ORIG_PATH_INFO'）一一替换以下变量

```
$config['uri_protocol'] = 'AUTO'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:44:23.787

```
$config['index_page'] = ''; 
```

会成功的

从现在开始，如果您访问您的网站，例如：

```
http://mypage.com 
```

默认控制器将被调用

您可以在 application/config 文件夹中的 routes.php 文件中更改它

像：

```
$route['default_controller'] = "views/index"; 
```

顺便提一句。你在（应用程序/控制器）中的**views.php**控制器应该看起来像这样：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Views extends CI_Controller {

    public function index()
    {

        $data = "Text from controller's index method";
        $this->load->view('myview', $data);

    }

} 
```

而你的**myview.php**在（应用程序/视图）：

```
<?php echo $data; ?> 
```

# jquery - 检查窗口路径名（url）是否具有特定值

> ID：15476794
> 
> 赞同：0
> 
> 时间：2013-03-18T12:23:52.533
> 
> 标签：jquery

再会。

我想检查当前浏览器窗口路径名是否具有特定值...

但我的代码不起作用......有什么帮助吗？

```
 jQuery(function($){
                    var pathname = window.location.pathname;

                    if ($pathname == 'http://google.com') {
                        alert($pathname);
                    }
                }); 
```

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T12:24:55.027

```
if ($pathname == 'http://google.com') { 
```

应该

```
if (pathname == 'http://google.com') { //no $ 
```

因为您将其声明为

```
var pathname = window.location.pathname; 
```

# asp.net-web-api - JayData.js 如何将变量传递给请求标头

> ID：15476795
> 
> 赞同：0
> 
> 时间：2013-03-18T12:23:55.253
> 
> 标签：asp.net-web-api, jaydata

我正在尝试调用验证请求标头（X-Session-id）的 API 控制器。如何配置 oDataProvider 以将变量传递给请求标头？

```
var context = new JayData.SomeEntities({
            name: 'oData',
            oDataServiceHost: 'https://mydomain/RestService',
            headers: { 'X-SessionId': 'f05d1c1e-b1b9-5a2d-2f44-da811bd50bd5' }//How to put value here
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:42:24.710

有两种方法： 1\. 如果你用 $data.service 初始化你的上下文，那么你可以添加第三个带有自定义标题的参数：

```
$data.service('url2yourService', function (factory) {
}, { httpHeaders: { 'X-SessionId': 'f05d1c1e-b1b9-5a2d-2f44-da811bd50bd5' } }); 
```

见：http: [//jaystack.com/blog/what-is-the-difference-between-data.service-and-data.initservice](http://jaystack.com/blog/what-is-the-difference-between-data.service-and-data.initservice)

或使用 prepareRequest

```
context.prepareRequest = function(cfg){
  cfg[0].headers['X-SessionId'] = 'f05d1c1e-b1b9-5a2d-2f44-da811bd50bd5';
}; 
```

# spring - Spring Security 3 自定义授权

> ID：15476798
> 
> 赞同：1
> 
> 时间：2013-03-18T12:24:00.900
> 
> 标签：spring, url, spring-security, authorization, intercept

我正在使用 Spring Security 3 进行授权。默认情况下，如果用户没有在拦截 url 标记中提及任何模式，则 Spring 不会限制该用户访问该 url。我想以编程方式限制 Spring Security 的这种默认行为。我不想在 Sprig Security xml 中使用 denyAll。

我的要求是每当任何经过身份验证的用户尝试访问任何 url，首先我想手动检查该 URL 是否存在于 Spring Security xml 中。如果它在那里，那么我将要求 Spring 遵循其正常的授权过程；但如果 URL 不存在，那么我想限制该 URL 的用户访问。请帮助我满足我的要求。

# iphone - 在ios通讯录中存储经纬度

> ID：15476799
> 
> 赞同：3
> 
> 时间：2013-03-18T12:24:02.857
> 
> 标签：iphone, ios, objective-c, abaddressbook

可以在地址簿的记录中添加经纬度**吗****？**`iOS`

我的应用想要在地图上显示附近的联系人。我知道如何从地址获取纬度/经度。我不知道如何保存它们，这样我就可以避免重复查找

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-05T05:00:56.423

是的，您可以将经纬度地址添加到 iOS 通讯录中的联系人。从该地址查看地图图钉需要一个额外的步骤，但它可以工作。

打开现有的或新的联系人，并创建一个新地址。在 Street 下，输入经纬度，中间用逗号，但不能有空格。将其他所有内容留空：城市、州等。它会强制你选择一个国家，所以要么保留默认值，要么如果你愿意，你可以选择与坐标对应的国家，尽管这并不重要。

例如，您可以输入：

  • 街道：48.8582,2.2945
  • 国家：法国（或任何国家）

（对于赤道以南或格林威治子午线以东的位置，添加减号：例如，-17.53655、-149.56832）。

保存地址。

要前往 Apple 地图中的位置，请打开联系人并单击纬度/经度地址。这将带您到 Apple 地图。不要等待地图出现，因为如果您等待，无论列出的哪个国家/地区，大头针都将是死点。相反，在它思考的时候，只需转到顶部的地址栏并编辑国家，以便只剩下纬度/经度，然后点击搜索。这一次，大头针将直接转到正确的纬度/经度位置。如果你想要谷歌地图，只需将纬度/经度复制/粘贴到谷歌地图中。

上面显示的示例应该让您在埃菲尔铁塔。一路顺风！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:43:57.817

**`latitude`**我不确定，但这可能无法**`longitude`**为`ABPeoplePickerNavigationController`. 但是如果你想找到两个联系人之间的距离，那么你可以从联系人的地址中找到它，或者将你的**`latitude`**值**`longitude`**添加到**数据库**中，然后使用我的 2 个选项。

按地址查找位置有两种方法

**1)** [如何从 ABPeoplePickerNavigationController 获取街道地址](https://stackoverflow.com/questions/8329006/how-to-get-street-address-from-abpeoplepickernavigationcontroller)

**2）**使用[reverseGeocodeLocation](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html#//apple_ref/occ/instm/CLGeocoder/reverseGeocodeLocation:completionHandler:)并检查我的答案[CLLocationManager not getting City name](https://stackoverflow.com/questions/15270527/cllocationmanager-not-getting-city-name/15270655#15270655)这对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:37:01.247

在 iPhone 原生通讯录中无法存储。但是你可以做一件事，你可以在你的应用程序的**SQLite 数据库中存储用户的信息以及****lat lon**，如果你想要一些**同步**功能，那么你可以创建**Web 服务**，它将根据你的逻辑更新你的 SQLite 数据库。

希望这会帮助你。

一切顺利 ！！！

# asp.net - 使用 if 语句问题设置占位符可见性

> ID：15476800
> 
> 赞同：0
> 
> 时间：2013-03-18T12:24:11.577
> 
> 标签：asp.net, if-statement, placeholder

如果占位符设置为 true，我必须制作 If 语句，这将使占位符内部的文字可见。如果不是整个占位符和其中的文字将不会呈现。这是asp控制，但如果在后面的代码中我需要这样做......

```
<asp:Panel ID="pnlFooterColumn" runat="server" CssClass="col">     
    <asp:PlaceHolder ID="phlFooterColumnTitle" runat="server">
        <h5>
             <asp:Literal ID="ltrFooterColumnTitle" runat="server"></asp:Literal>
        </h5>
    </asp:PlaceHolder> 
```

有谁知道该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:26:38.163

```
pnlFooterColumn.Visible = false; 
```

如果面板设置为 Visible false，则不会呈现任何内容。

# visual-studio-2010 - Visual Studio 2010 - 如何在调试过程中跳过方法执行

> ID：15476806
> 
> 赞同：0
> 
> 时间：2013-03-18T12:24:48.620
> 
> 标签：visual-studio-2010, debugging

我有一个多次执行的方法（从数据库中读取数据），现在我需要调试一个执行此方法的代码，它似乎一直执行到它从表中读取所有行（1000+）我只想让程序执行此方法并从那里继续调试。

更具体地说-在调试模式下，我用来`F11`检查代码，这种行为令人沮丧。我不想改变我的断点，只想让这个方法自己执行，但我现在知道的唯一方法是按下`F5`它执行所有内容，而不仅仅是当前方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:26:48.267

你可以用`[DebuggerStepThrough]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:27:11.323

代替使用`Step Into`( `F11`) 使用 - `Step Over`( `F10`)

如果您已经输入了该功能（因为您按下了`F11`），您可以随时`Step Out`使用`Shift`+ `F11`

有关详细信息，请参阅[掌握 Visual Studio 2010 中的调试](http://www.codeproject.com/Articles/79508/Mastering-Debugging-in-Visual-Studio-2010-A-Beginn#heading0005)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T12:31:12.110

两种选择：
1\. 按 Shift+F11 退出函数
2\. 进入函数后，在循环后立即插入另一个断点，然后按 F5 跳到该断点。

# iphone - 增强现实应用商店流程

> ID：15476809
> 
> 赞同：0
> 
> 时间：2013-03-18T12:25:00.493
> 
> 标签：iphone, app-store, augmented-reality

我们有一个客户要求我们构建一个增强现实 iPhone 应用程序以在演出中使用。体验将基于位置，即您需要在展会上放置标记才能使用该应用程序。

有谁知道苹果测试这种应用程序的过程？如果他们不能在没有现场和评估标记的情况下对其进行测试，他们将如何获得批准？

是否可以将标记作为文件提交给他们以打印和测试？！

任何信息都非常感谢，因为无法在网上找到任何特定的东西。

谢谢你，杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:29:09.607

将它们放到网上，并为您的评论者提供每张图片的链接。

我以前用二维码做过这个。

# sql - 标准化 h/w

> ID：15476810
> 
> 赞同：5
> 
> 时间：2013-03-18T12:25:04.590
> 
> 标签：sql, database, normalization

![在此处输入图像描述](../Images/3d4ec96e3a0bb9156d1184e4f3b65c3d.png)

被告知将其放入 UNF/1NF/2NF/3NF，这是正确的吗？

**将上述数据显示为 UNF（非标准化数据）中的关系。**

客户（客户 ID、名字、姓氏、地址、城市、电话、州、邮政编码、数量、产品编号、描述、单价、总计、小计、运费、税率、日期、订单号））

**将数据显示为 1NF 中的关系。（指出任何键。）**

客户（客户 ID、名字、姓氏、地址、城市、州、电话、州、邮政编码） 产品（产品编号、数量、描述、单价、总计、小计、运费、税率、客户 ID（FK）。）订单（订单号、日期、产品号（FK）。）

**在 2NF 中将数据显示为关系。（指出任何键。）**

客户（客户 ID、名字、姓氏、地址、城市、电话、州、邮政编码）产品（产品编号、数量、说明、单价、客户 ID（FK）、总计（FK）。）订单（订单号、日期、客户 ID（FK）、 ProductNo(FK).) Total(Total, subtotal, shipping, Tax Rates, ProductNo(FK),CustomerID(FK) )

**在 3NF 中将数据显示为关系。（指出任何键。）**

客户 (CustomerID, FirstName, LastName, Address, City, Phone, State, Postcode) 产品 (ProductNo, , Description, Unit Price. CustomerID(FK), Total(FK) ) 订单 (OrderNo, Date, CustomerID(FK).ProductNo (FK) ) Total(Total, subtotal, ProductNo(FK), CustomerID(FK) ) Shipping(Shipping, Tax Rates, Total(FK), OrderNo(FK) ) Qty( QtyID, Qty, ProductNo(FK), OrderNo( FK）。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:29:23.293

对我来说它看起来不错，但是您缺少设计的一个**关键部分**。尽管您已经确定了外键，但您尚未在表上定义任何主键（使用您必须在每个表上计算出主键的外键 :)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:29:28.913

关于发票的一个有趣的事情......J Frompton 今天订购了一个耙子，但在未来的某个时间价格会发生变化。然而，这并没有改变 Frompton 今天支付的价格。

一旦发票完成，它们真的应该被移动到一个 1NF 的表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:31:57.370

> 将上述数据显示为 UNF（非标准化数据）中的关系。
> 
> 客户（客户 ID、名字、姓氏、地址、城市、电话、州、邮政编码、数量、产品编号、描述、单价、总计、小计、运费、税率、日期、订单号））

不，这是不对的。发票上似乎没有任何客户 ID 号。规范化不涉及引入新属性。作为非规范化的属性集合，将该列表标记为“客户”还为时过早。

> 将数据显示为 1NF 中的关系。（指出任何键。）
> 
> *   客户（客户 ID、名字、姓氏、地址、城市、州、电话、州、邮政编码）
> *   产品（产品编号、数量、描述、单价、总计、小计、运费、税率、客户 ID（FK）。）
> *   订单（订单号、日期、产品号（FK）。）

删除客户 ID。（见上文。）我猜“Product”表的候选键之一是“ProductNo”。如果是这样，为什么该表包含“CustomerID”？

> 在 2NF 中将数据显示为关系。（指出任何键。）
> 
> *   Customer( CustomerID, FirstName, LastName, Address, City, Phone, State, Postcode)
> *   Product ( ProductNo, Qty, Description, UnitPrice, CustomerID(FK), Total(FK).)
> *   Order( OrderNo, Date, CustomerID(FK), ProductNo(FK).)
> *   Total(Total, subtotal, shipping, Tax Rates, ProductNo(FK),CustomerID(FK) )

2NF has to do with removing partial key dependencies. What partial key dependency did you identify that justified creating the table "Total"? (Hint: there isn't any justification for that.) Do this thought experiment (or build it in SQL): If "Total" is the primary key for the table "Total", what will you do if two orders result in the same total?

我现在就停在那里，因为你*真的*走错了路。您需要从所有属性的列表*开始*，然后确定候选键和功能依赖项。如果不从那里开始，您不太可能找到 3NF。

# jquery - 谷歌图表：需要“不同颜色”的栏

> ID：15476812
> 
> 赞同：0
> 
> 时间：2013-03-18T12:25:08.530
> 
> 标签：jquery, google-visualization

我有一页 - [http://projectdemo.in/Dario/Dario/Panel_report_TEST_v015.html](http://projectdemo.in/Dario/Dario/Panel_report_TEST_v015.html)

请参阅此图表“外科心脏瓣膜植入物：机械与生物混合，2012 年第四季度”

现在在这个图表中，我想要红色的“机械”和蓝色的“生物”。

我该怎么做？

这是我的代码------

```
<tr>

            <td bgcolor="#FFFFFF" class="text" align="center" id="visualization2"><br/><br/>
                <script type="text/javascript">
                    google.load('visualization', '1.1', {packages: ['controls']});
                </script>
                <script type="text/javascript">
                    function drawVisualization() {
                        // Prepare the data
                        var data = google.visualization.arrayToDataTable([
                            ['Country', 'Position', 'Prosthethis type', 'Units'],
                            ['Austria', 'Aortic',  'Mechanical',  84],
                            ['Austria', 'Aortic',  'Biological',  393],
                            ['Austria', 'Mitral',  'Mechanical',  24],
                            ['Austria', 'Mitral',  'Biological',  125],
                            ['Benelux', 'Aortic',  'Mechanical',  365],
                            ['Benelux', 'Aortic',  'Biological',  1147],
                            ['Benelux', 'Mitral',  'Mechanical',  223],
                            ['Benelux', 'Mitral',  'Biological',  302],
                            ['Europe', 'Aortic',  'Mechanical',  5007],
                            ['Europe', 'Aortic',  'Biological',  15434],
                            ['Europe', 'Mitral',  'Mechanical',  1974],
                            ['Europe', 'Mitral',  'Biological',  3550],
                            ['France', 'Aortic',  'Mechanical',  803],
                            ['France', 'Aortic',  'Biological',  2277],
                            ['France', 'Mitral',  'Mechanical',  229],
                            ['France', 'Mitral',  'Biological',  436],
                            ['Germany', 'Aortic',  'Mechanical',  1038],
                            ['Germany', 'Aortic',  'Biological',  4397],
                            ['Germany', 'Mitral',  'Mechanical',  228],
                            ['Germany', 'Mitral',  'Biological',  929],
                            ['Italy', 'Aortic',  'Mechanical',  678],
                            ['Italy', 'Aortic',  'Biological',  2383],
                            ['Italy', 'Mitral',  'Mechanical',  284],
                            ['Italy', 'Mitral',  'Biological',  520],
                            ['Nordics', 'Aortic',  'Mechanical',  351],
                            ['Nordics', 'Aortic',  'Biological',  971],
                            ['Nordics', 'Mitral',  'Mechanical',  145],
                            ['Nordics', 'Mitral',  'Biological',  226],
                            ['Portugal', 'Aortic',  'Mechanical',  159],
                            ['Portugal', 'Aortic',  'Biological',  534],
                            ['Portugal', 'Mitral',  'Mechanical',  85],
                            ['Portugal', 'Mitral',  'Biological',  111],
                            ['Spain', 'Aortic',     'Mechanical',  646],
                            ['Spain', 'Aortic',     'Biological',  1469],
                            ['Spain', 'Mitral',     'Mechanical',  417],
                            ['Spain', 'Mitral',     'Biological',  359],
                            ['Switzerland',  'Aortic', 'Mechanical',  166],
                            ['Switzerland',  'Aortic', 'Biological',  328],
                            ['Switzerland',  'Mitral', 'Mechanical',  85],
                            ['Switzerland', 'Mitral', 'Biological',  122],
                            ['UK & Ireland', 'Aortic', 'Mechanical', 588],
                            ['UK & Ireland', 'Aortic', 'Biological', 1283],
                            ['UK & Ireland', 'Mitral', 'Mechanical', 191],
                            ['UK & Ireland', 'Mitral', 'Biological', 314]
                        ]);

                        // Define category pickers for 'Country', 'Region/State' and 'City'
                        var countryPicker = new google.visualization.ControlWrapper({
                            'controlType': 'CategoryFilter',
                            'containerId': 'control4',
                            'options': {
                                'filterColumnLabel': 'Country',
                                'ui': {
                                    'labelStacking': 'vertical',
                                    'allowTyping': false,
                                    'allowMultiple': false
                                }
                            },
                            'state': {'selectedValues': ['Europe']}

                        });

                        var regionPicker = new google.visualization.ControlWrapper({
                            'controlType': 'CategoryFilter',
                            'containerId': 'control5',
                            'options': {
                                'filterColumnLabel': 'Position',
                                'ui': {
                                    'labelStacking': 'vertical',
                                    'allowTyping': false,
                                    'allowMultiple': false
                                }
                            }
                        });

                        var cityPicker = new google.visualization.ControlWrapper({
                            'controlType': 'CategoryFilter',
                            'containerId': 'control6',
                            'options': {
                                'filterColumnLabel': 'Prosthethis type',
                                'ui': {
                                    'labelStacking': 'vertical',
                                    'allowTyping': false,
                                    'allowMultiple': false
                                }
                            }
                        });

                        // Define a bar chart to show 'Population' data
                        var barChart = new google.visualization.ChartWrapper({
                            'chartType': 'BarChart',
                            'containerId': 'chart3',
                            'options': {
                                'width': 400,
                                'height': 300,
                                'chartArea': {top: 0, right: 0, bottom: 0}
                            },
                            // Configure the barchart to use columns 2 (City) and 3 (Population)
                            'view': {'columns': [2, 3],'colors': ['red','green']}

                        });

                        // Create the dashboard.
                        new google.visualization.Dashboard(document.getElementById('visualization2')).
                            // Configure the controls so that:
                        // - the 'Country' selection drives the 'Region' one,
                        // - the 'Region' selection drives the 'City' one,
                        // - and finally the 'City' output drives the chart
                        bind(countryPicker, regionPicker).
                            bind(regionPicker, cityPicker).
                            bind(cityPicker, barChart).
                            // Draw the dashboard
                        draw(data);
                    }

                    google.setOnLoadCallback(drawVisualization);

                </script>
                <table>
                    <tr style='vertical-align: top'>
                        <td style='width: 300px; font-size: 0.9em;'>
                            <div id="control4"></div>
                            <div id="control5"></div>
                            <div id="control6"></div>
                        </td>
                        <td style='width: 600px'>
                            <div style="float: left;" id="chart3"></div>
                            <div style="float: left;" id="chart4"></div>

                        </td>
                    </tr>
                </table>
            </td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:53:43.727

你可以试试这个，

```
var options = {
    region: 'IT',
    displayMode: 'markers',
    **colorAxis: {colors: ['green', 'blue']}**
  }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T07:22:27.450

您只需将数据转换为以下格式。

```
var data = google.visualization.arrayToDataTable([
     ['Country', 'Position', 'Prosthethis type', 'Units', 'Units'],
                    ['Austria', 'Aortic', 'Mechanical', 84, 0],
                    ['Austria', 'Aortic', 'Biological', 0, 393],
                    ['Austria', 'Mitral', 'Mechanical', 24, 0],
                    ['Austria', 'Mitral', 'Biological', 0, 125],
                    ['Benelux', 'Aortic', 'Mechanical', 365, 0],
                    ['Benelux', 'Aortic', 'Biological', 0, 1147],
                    ['Benelux', 'Mitral', 'Mechanical', 223, 0],
                    ['Benelux', 'Mitral', 'Biological', 0, 302],
                    ['Europe', 'Aortic', 'Mechanical', 5007, 0],
                    ['Europe', 'Aortic', 'Biological', 0, 15434],
                    ['Europe', 'Mitral', 'Mechanical', 1974, 0],
                    ['Europe', 'Mitral', 'Biological', 0, 3550],
                    ['France', 'Aortic', 'Mechanical', 803, 0],
                    ['France', 'Aortic', 'Biological', 0, 2277],
                    ['France', 'Mitral', 'Mechanical', 229, 0],
                    ['France', 'Mitral', 'Biological', 0, 436],
                    ['Germany', 'Aortic', 'Mechanical', 1038, 0],
                    ['Germany', 'Aortic', 'Biological', 0, 4397],
                    ['Germany', 'Mitral', 'Mechanical', 228, 0],
                    ['Germany', 'Mitral', 'Biological', 0, 929],
                    ['Italy', 'Aortic', 'Mechanical', 678, 0],
                    ['Italy', 'Aortic', 'Biological', 0, 2383],
                    ['Italy', 'Mitral', 'Mechanical', 284, 0],
                    ['Italy', 'Mitral', 'Biological', 0, 520],
                    ['Nordics', 'Aortic', 'Mechanical', 351, 0],
                    ['Nordics', 'Aortic', 'Biological', 0, 971],
                    ['Nordics', 'Mitral', 'Mechanical', 145, 0],
                    ['Nordics', 'Mitral', 'Biological', 0, 226],
                    ['Portugal', 'Aortic', 'Mechanical', 159, 0],
                    ['Portugal', 'Aortic', 'Biological', 0, 534],
                    ['Portugal', 'Mitral', 'Mechanical', 85, 0],
                    ['Portugal', 'Mitral', 'Biological', 0, 111],
                    ['Spain', 'Aortic', 'Mechanical', 646, 0],
                    ['Spain', 'Aortic', 'Biological', 0, 1469],
                    ['Spain', 'Mitral', 'Mechanical', 417, 0],
                    ['Spain', 'Mitral', 'Biological', 0, 359],
                    ['Switzerland', 'Aortic', 'Mechanical', 166, 0],
                    ['Switzerland', 'Aortic', 'Biological', 0, 328],
                    ['Switzerland', 'Mitral', 'Mechanical', 85, 0],
                    ['Switzerland', 'Mitral', 'Biological', 0, 122],
                    ['UK0&0Ireland', 'Aortic', 'Mechanical', 588, 0],
                    ['UK0&0Ireland', 'Aortic', 'Biological', 0, 1283],
                    ['UK0&0Ireland', 'Mitral', 'Mechanical', 191, 0],
                    ['UK0&0Ireland', 'Mitral', 'Biological', 0, 314]

                ]); 
```

并将图表配置为，

```
// Configure the barchart to use columns 2 (City) and 3 (Population)
'view': {'columns': [2, 3, 4]} 
```

# c# - ListView 绑定对象数组访问变量

> ID：15476815
> 
> 赞同：0
> 
> 时间：2013-03-18T12:25:20.840
> 
> 标签：c#, wpf, listview, object, binding

**编辑**
原来的问题是在获取外壳时，它抛出了一个错误，将 MtObject 转换为调试器未检测到的外壳。
将 Andy 的解决方案标记为正确，它帮助我看到问题不在 ListView 代码中，谢谢 andy

所以我一直在四处寻找，似乎无法找到正确的答案。
基本上我有一个ListView，我绑定到一个动物数组，一个动物有另一个对象外壳的属性，我试图像这样绑定外壳名称

```
<GridViewColumn Header="Enclosure"  DisplayMemberBinding="{Binding Enclosure.Name}" /> 
```

这显然是错误的，但我认为显示了我想要实现
的目标，基本布局是 object.object。

下面的完整列表视图

```
<ListView Margin="20,0,20,0" Grid.Row="1" ItemsSource="{Binding}" x:Name="displayResults" SelectionChanged="displayResults_SelectionChanged_1">
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="Height" Value="45" />
                            </Style>
                        </ListView.ItemContainerStyle>
                        <ListView.View>
                            <GridView x:Name="gridView">
                                <GridViewColumn Header="Photo" CellTemplate="{StaticResource PhotoTemplate}"/>
                                <GridViewColumn Header="Name" DisplayMemberBinding="{Binding GivenName}" />
                                <GridViewColumn DisplayMemberBinding="{Binding Path=Enclosure.Id}" Header="Enclosure"/>
                                <GridViewColumn Header="Species"  DisplayMemberBinding="{Binding SpeciesName}" />
                                <GridViewColumn Header="DOB"  DisplayMemberBinding="{Binding Dob}" />
                                <GridViewColumn Header="Average Life Span"  DisplayMemberBinding="{Binding AverageLifeSpan}" />
                                <GridViewColumn Header="Natural Habitat"  DisplayMemberBinding="{Binding NaturalHabitat}" />

                            </GridView>
                        </ListView.View>
                    </ListView> 
```

外壳如何获取/设置

```
public Enclosure Enclosure {
        get {
            return ((Enclosure)(GetSuccessor(GetEnclosureRelationship(Database))));
        }
        set {
            SetSuccessor(GetEnclosureRelationship(Database), value);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:39:08.970

这对我有用，我想这就是你所追求的？

**结果**

![在此处输入图像描述](../Images/b8a3082cedc81877fda8b554ce642ab5.png)

**XAML**

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        DataContext="{Binding RelativeSource={RelativeSource Self}}"
        Title="MainWindow" Height="350" Width="525">
    <ListView ItemsSource="{Binding Animals}">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Name}"/>
                <GridViewColumn Header="Enclosure" DisplayMemberBinding="{Binding Enclosure.Name}"/>
                <GridViewColumn Header="Taste good?" DisplayMemberBinding="{Binding TastesGood}">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <CheckBox Checked="{Binding}"/>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView>
</Window> 
```

**C＃**

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication1
{
    public class Animal : DependencyObject, INotifyPropertyChanged
    {
        Enclosure enclosure;

        public string Name
        {
            get { return (string)GetValue(NameProperty); }
            set { SetValue(NameProperty, value); }
        }
        public static readonly DependencyProperty NameProperty = DependencyProperty.Register("Name", typeof(string), typeof(Animal), new PropertyMetadata(null));

        public bool TastesGood
        {
            get { return (bool)GetValue(TastesGoodProperty); }
            set { SetValue(TastesGoodProperty, value); }
        }
        public static readonly DependencyProperty TastesGoodProperty = DependencyProperty.Register("TastesGood", typeof(bool), typeof(Animal), new PropertyMetadata(false));

        public Enclosure Enclosure
        {
            get { return enclosure; }
            set
            {
                enclosure = value;
                PropertyChangedEventHandler temp = PropertyChanged;
                if (temp != null)
                {
                    temp(this, new PropertyChangedEventArgs("Enclosure"));
                }
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
    }

    public class Enclosure : DependencyObject
    {
        public string Name
        {
            get { return (string)GetValue(NameProperty); }
            set { SetValue(NameProperty, value); }
        }
        public static readonly DependencyProperty NameProperty = DependencyProperty.Register("Name", typeof(string), typeof(Enclosure), new PropertyMetadata(null));

        public string Location
        {
            get { return (string)GetValue(LocationProperty); }
            set { SetValue(LocationProperty, value); }
        }
        public static readonly DependencyProperty LocationProperty = DependencyProperty.Register("Location", typeof(string), typeof(Enclosure), new PropertyMetadata(null));
    }

    public partial class MainWindow : Window
    {
        public ObservableCollection<Animal> Animals
        {
            get { return (ObservableCollection<Animal>)GetValue(AnimalsProperty); }
            set { SetValue(AnimalsProperty, value); }
        }
        public static readonly DependencyProperty AnimalsProperty = DependencyProperty.Register("Animals", typeof(ObservableCollection<Animal>), typeof(MainWindow), new PropertyMetadata(null));

        public MainWindow()
        {
            InitializeComponent();

            Animals = new ObservableCollection<Animal>();
            Animals.Add(new Animal() { Name = "Cow", TastesGood = true, Enclosure = null });
            Animals.Add(new Animal()
            {
                Name = "Chicken",
                TastesGood = true,
                Enclosure =
                    new Enclosure()
                    {
                        Name = "chicken coop",
                        Location = "outside"
                    }
            });
        }
    }
} 
```

# java - 为 JTable、Java 设置条件

> ID：15476831
> 
> 赞同：0
> 
> 时间：2013-03-18T12:26:17.920
> 
> 标签：java, swing, jtable, jcombobox

我有一个有 4 列的 jtable，其中最后一列有一个组合框，

示例代码

```
String[] colNames = {"Name","Email","Department","Status"};
TableModel model = new DefaultTableModel(colNames,200);
table.setModel(model);

TableColumn statusCol = table.getColumnModel().getColumn(3);
comboBox = new JComboBox();
comboBox.addItem("Approver");
comboBox.addItem("Senior Manager");

statusCol.setCellEditor(new DefaultCellEditor(comboBox)); 
```

这里的组合框有 2 个选项审批者和高级经理，我正在寻找一种添加条件的方法，因为表中只有一个高级经理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:29:15.273

您应该在您的域内处理此问题（例如，在您维护加载到 tableModel 的数据的任何地方添加一个约束）并限制那里的高级管理人员的数量。这是业务逻辑，不要在您的 GUI 中实现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:37:40.330

假设您`TableModel`一开始处于一致状态，例如不超过一名高级经理，目标是在编辑第三列中的单元格时保持该不变性。困难的部分是确保您的听众`TableModel`看到任何相关的变化。一种方法是使用对象管理器，如@Guillaume Polet在此[示例中所示。](https://stackoverflow.com/a/11259671/230513)当托管对象改变状态时，管理器会触发一个`PropertyChangeEvent`通知监听。`TableModel`反过来`TableModel`，通过 通知任何已注册`TableModelListener`的 ，例如`JTable`自身`fireTableRowsUpdated()`。

# c# - RedirectToAction() 销毁字符串数据

> ID：15476832
> 
> 赞同：0
> 
> 时间：2013-03-18T12:26:23.963
> 
> 标签：c#, asp.net-mvc-3

在我的控制器里面我有字符串变量

```
private string notificationMessage = ""; 
```

我想用它来复制它的内容`ViewBag.Message`并在视图上显示该内容。

所以在我的编辑操作中，我填充它的（notificationMessage）内容，如下所示

```
notificationMessage = "data is succ. updated!";
return RedirectToAction(); 
```

但是在重定向到索引操作之后，这个字符串变量是空的；

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:28:18.897

使用`TempData`而不是`ViewBag`. 它在请求之间持续存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T12:38:21.530

这是因为`RedirectToAction`向浏览器返回 HTTP 302 响应，导致浏览器向指定的操作发出**GET**请求。由于**HTTP 是无状态**的，因此您不能简单地在一个操作中设置某些内容并在另一个操作中获取它（当它是另一个 GET 请求时）。

你能做的是

**1）**将查询字符串传递给您的新操作，并在下一个操作方法中检查它并据此显示一条消息。

```
return RedirectToAction("ThankYou","Account",new {msg="success"}); 
```

在你的ThankYou行动中

```
public ActionResult ThankYou(string msg)
{
  var vm=YourSuccessViewModel();
  if(msg="success") // you may do a null checking before accessing this value
  {
    vm.Message="Saved Successfully";
  }
  return View(vm);  
} 
```

**2)**存储在 Session / TempData 等临时位置。TempData 是一个非常短暂的实例，您应该只在当前和后续请求期间使用它！

```
TempData["UserMsg"] = "Saved Successfully";
return RedirectToAction("ThankYou","Account"); 
```

在您的`ThankYou`操作中，您可以阅读它并根据需要向用户展示。

```
public ActionResult ThankYou(string msg)
{
   var msg = TempData["UserMsg"] as string; 
   //to do  : do what you want with the message and return the view.
} 
```

Session 对象是 TempData 对象的后备存储，它比常规会话更快地被销毁，即在后续请求之后立即销毁。

# c# - GUI 工作但从控制台运行时 - 处理无效的 IOException

> ID：15476835
> 
> 赞同：1
> 
> 时间：2013-03-18T12:26:27.957
> 
> 标签：c#, exception-handling, console-application, ioexception

我有一个 GUI 程序，它可以构建我的项目并将日志保存在某个文件夹中。我也使用 cmd 运行它，它工作正常，但是当我想重定向它时 - 它只是中断： ![在此处输入图像描述](../Images/cf2c91c67c2bd83d76b298c02a50d44e.png)

它让我调试它 - 它向我展示了这一行：

```
 if (startPosition == 0)
                    {
                        Console.Write(s);
                    }
                    else
                    {
                        Console.CursorLeft = 70; //THIS LINE
                        Console.WriteLine(s);
                    } 
```

谁能帮我理解这里出了什么问题？谢谢你！

# android - 如何以编程方式替换 @include 的现有布局？

> ID：15476840
> 
> 赞同：0
> 
> 时间：2013-03-18T12:26:38.577
> 
> 标签：android, xml, user-interface

在我的 xml 文件中，我使用 @inlcude 包含布局，并希望以编程方式使用 id 替换该布局。例如，在我的布局中，我有以下 xml 文件

```
<include android:id="@+id/promo1" android:layout_width="fill_parent"
         android:layout_height="fill_parent" layout="@layout/one_promo">
</include> 
```

在 java 代码中，我想像下面的代码一样用新的布局替换现有的布局。

```
View v = findViewById(R.id.promo1);
v.setView(R.layout.new_promo); 
```

在 xml 文件中包含 @include 后，是否有任何工具可以进行这样的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:48:26.833

您应该看到[inflate](http://developer.android.com/reference/android/view/LayoutInflater.html#inflate%28int,%20android.view.ViewGroup%29)方法。在 stackoverflow 上有很多类似的问题，例如[这个](https://stackoverflow.com/questions/2335813/how-to-inflate-one-view-with-an-layout)。

# html - 浏览器不显示西班牙语字符

> ID：15476848
> 
> 赞同：3
> 
> 时间：2013-03-18T12:27:12.977
> 
> 标签：html, xml, utf-8, meta, iso-8859-1

我需要为我正在开发的网站支持西班牙语。我创建了一个 XML 文件，其中包含英文文本和相应的西班牙文文本。我正在根据用户的选择（语言保管箱）阅读此 XML 文件。除非浏览器无法正确显示某些西班牙语字符，否则一切正常。

![在此处输入图像描述](../Images/7f4815053146fe911a3cd868275f6b55.png)

XML文件的内容是：

```
<Spanish>
    <title></title>
    <loginBoxHeader1>Login Panel -</loginBoxHeader1>
    <loginBoxHeader2>Por favor, proporcione las credenciales siguientes!</loginBoxHeader2>
    <username>Nombre de Usuario:</username>
    <password>Contraseña:</password>
    <LoginBtn>iniciar la sesión</LoginBtn>
    <RememberCheckbox>Recordar mi usuario en este equipo</RememberCheckbox>
</Spanish> 
```

字符`ñ`并且`ó`在浏览器中不可见。我将 XML 文件的编码设置为 ISO-8859-1。我还在 HTML 页面中添加了以下元标记：

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO 8859-1"> 
```

我也尝试过使用 UTF-8 编码，但问题仍然存在。有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-04T19:12:14.277

你试过谷歌字体吗？[http://www.google.com/fonts](http://www.google.com/fonts) 点击“Google 字体新手？” 并按照步骤操作。我选择了 1，只是“普通 400”，按照步骤操作。我遇到了同样的问题，我的西班牙语字符会显示为带有问号的黑色菱形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:33:23.473

也许字体类型不支持特殊字符？我以前也遇到过同样的问题，只是因为字体中没有符号。换了字体，问题就解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:34:08.067

您的页面是用 utf-8 解码的（但应该是 iso...），原因可能是：

*   页面文件本身是 utf-8 编码的（在这种情况下元标记被忽略）
*   www 服务器内容类型标头为 utf-8（应更改为 iso...）

或者采用其他方式并使用例如记事本++将xml保存在utf-8中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-09T05:36:20.243

正如@pawlakppp 提到的，您是否检查过您的xml 文件的编码。尝试这个 -

*   在 NOTEPAD++ 等编辑器中打开 XML 文件。
*   转到“编码”菜单
*   单击“使用 UTF-8 编码”或“使用 UTF-8 编码而不使用 BOM”。

# mysql - 为什么这个 IF NOT EXISTS 语句不起作用？

> ID：15476851
> 
> 赞同：1
> 
> 时间：2013-03-18T12:27:29.770
> 
> 标签：mysql, sql, if-statement, exists

我正在尝试编写一个查询，该查询会将 0 到 9999 之间的随机值插入到表中，而该随机值尚不存在。但是，我写的任何东西都不起作用。似乎 WHERE 子句不适用于 INSERT，并且我的 SQL 服务器无法执行 IF NOT EXISTS 查询。不正确，我想知道吗？我应该怎么办？我的问题有解决方案吗？（我正在使用 MySQL）

```
SET @rand = ROUND(RAND() * 9999);
IF NOT EXISTS (SELECT `num` FROM `nums` WHERE `num` = @rand)
    INSERT INTO `nums` (`num`) VALUES (@rand); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:53:44.677

你可以在这里这样做：[MySQL：如果表中不存在则插入记录](https://stackoverflow.com/questions/3164505/mysql-insert-record-if-not-exists-in-table)

```
INSERT INTO `nums` (`num`)
SELECT *
FROM
  (SELECT @rand) AS q
WHERE NOT EXISTS
    (SELECT `num`
     FROM `nums`
     WHERE `num` = @rand); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:49:19.400

尝试使用这样的存储过程：

```
CREATE PROCEDURE my_sp()
BEGIN
SET @rand = ROUND(RAND() * 9999);
IF NOT EXISTS (SELECT `num` FROM `nums` WHERE `num` = @rand) THEN
    INSERT INTO `nums` (`num`) VALUES (@rand);
END IF;
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T17:42:38.053

使用类似的语句`IF`属于代码块（如存储过程）内。您将无法仅在 mysql 提示符下执行它。

如果您只想插入之前不存在的随机值，也可以通过

```
mysql> 创建表 nums(num int, unique key(num));
查询正常，0 行受影响（0.05 秒）

mysql> 将忽略插入 nums >select round(rand()*9999);>
查询正常，1 行受影响 (0.01 >sec)>
记录：1 重复：0 警告>：0>

mysql> 将忽略插入 nums select round(rand()*9999);
查询正常，1 行受影响（0.00 秒）
记录：1 重复：0 警告：0

mysql> 将忽略插入 nums select round(rand()*9999);
查询正常，1 行受影响（0.00 秒）
记录：1 重复：0 警告：0

mysql> 将忽略插入 nums select round(rand()*9999);
查询正常，1 行受影响（0.00 秒）
记录：1 重复：0 警告：0

mysql> 从 nums 中选择 *；
+------+
| 编号 |
+------+
| 5268 |
| 9075 |
| 9114 |
| 9768 |
+------+
4 行一组（0.00 秒）

mysql>

```

使用`insert ignore`，如果它已经存在，它将不会插入一行。

# javascript - Facebook 是如何构建这个带有 iOS 支持的固定滚动框的？

> ID：15476858
> 
> 赞同：2
> 
> 时间：2013-03-18T12:27:50.003
> 
> 标签：javascript, jquery, ios, css, onscroll

[Facebook 是如何在他们的新 prasentation 网站上为新的新闻源](https://www.facebook.com/about/newsfeed)构建这个固定滚动框（粘性侧边栏）的？

![在此处输入图像描述](../Images/a9a0f66d5a6f29941f646ad80af675ca.png)

我知道这样做[的许多解决方案](http://byjakewithlove.com/treehouse/sticky-sidebar/)，但这个很特别。`position: relative`和之间的切换在`position: fixed`touchmove 事件中起作用（不是特别的），但它也适用于 iOS 滚动平底锅！

我认为那是不可能的——[见这里](https://stackoverflow.com/a/2863570/1159384)。他们是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:54:51.443

显然它使用了 webkit 功能`position: -webkit-sticky;`

[在这里](http://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit)可以找到解释。

# android - 如何在android中使用cordova插件从Sqlite数据库中获取数据？

> ID：15476871
> 
> 赞同：1
> 
> 时间：2013-03-18T12:28:23.713
> 
> 标签：android, cordova

我正在使用 cordova 插件从 sqlite 本地数据库中插入、更新和检索数据。我的数据库手动放置在 assets 文件夹中。现在我可以在这个数据库中插入和更新数据了。但我无法检索数据。如何从该数据库中获取数据以显示我的 UI 控件？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T08:41:38.667

如果您可以写入数据库表，您也可以从中进行选择。在执行 SELECT 查询之后，您必须设置一个回调函数，其中包含文档中所述的“结果”数据集并从中读取数据。它是一个可以解析的具有数据集行的对象。[SQLResultSet 对象的手册段落](http://docs.phonegap.com/en/2.8.0/cordova_storage_storage.md.html#SQLResultSet)

# javascript - 动态填充 Dojox CheckedMultiselect

> ID：15476872
> 
> 赞同：0
> 
> 时间：2013-03-18T12:28:30.233
> 
> 标签：javascript, dojo

```
function populateMultiSelect(optionData){
    require([
      "dojox/form/CheckedMultiSelect",
      "dojo/dom", "dojo/_base/window", "dojo/domReady!"
    ], function(CheckedMultiSelect, dom, win){

     var sel = dijit.byId('dynamic');

     var n = 0;
     for(var i in optionData){
         var c = win.doc.createElement('option');
         c.innerHTML = optionData[i];
         c.value = optionData[i];
         console.log(optionData[i]);
         sel.appendChild(c);
     }

     var myCheckedMultiSelect = new CheckedMultiSelect({
       name: 'dynamic',
       multiple: 'true'
       }, sel);

 });
} 
```

我在 optionsData 中有这些数据

> 对象 {1：“QOS”，2：“ATM”，3：“软件”，4：“其他”，5：“IPv6”，6：“管理”，7：“LAN”，8：“LAN”， 9：“QOS”，10：“局域网”，11：“WAN”，12：“安全”，13：“安全”，14：“局域网”}

为什么这不起作用。

我正在尝试从 json 动态填充此字段。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:12:20.873

您用于访问`<select>`元素的代码不正确。`dijit.byId()`用于获取小部件对象。但由于您尚未创建小部件（当时），您无法访问它。您应该使用以下代码：

```
dojo.byId('dynamic'); 
```

如果这不起作用，您能否添加带有 ID 的元素的 HTML 代码`dynamic`？

**更新**：您还可以尝试使用以下方法将它们添加到小部件本身：

```
myCheckedMultiSelect.addOption(c); 
```

这意味着您必须在小部件声明之后放置 for 循环，如下所示：

```
function populateMultiSelect(optionData){
    require([
      "dojox/form/CheckedMultiSelect",
      "dojo/dom", "dojo/_base/window", "dojo/domReady!"
    ], function(CheckedMultiSelect, dom, win){

     var sel = dojo.byId('dynamic');

     var n = 0;

     var myCheckedMultiSelect = new CheckedMultiSelect({
       name: 'dynamic',
       multiple: 'true'
       }, sel);

     for(var i in optionData){
         var c = win.doc.createElement('option');
         c.innerHTML = optionData[i];
         c.value = optionData[i];
         console.log(optionData[i]);
         myCheckedMultiSelect.addOption(c);
     }

 });
} 
```

我还制作了一个[JSFiddle](http://jsfiddle.net/QzgyA/)作为概念证明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T16:47:32.713

你应该像这样使用 array.forEach

```
function populateMultiSelect(optionData){
require([
  "dojox/form/CheckedMultiSelect",
  "dojo/dom", "dojo/_base/window", "dojo/domReady!"
], function(CheckedMultiSelect, dom, win){

 var sel = dojo.byId('dynamic');

 var n = 0;

 var myCheckedMultiSelect = new CheckedMultiSelect({
   name: 'dynamic',
   multiple: 'true'
   }, sel);

 myCheckedMultiSelect.startup();

 array.forEach(optionData, function(optionData) {
     myCheckedMultiSelect._addOptionItem(optionData);
 }); 
```

}); }

# c# - 使用存储过程更新表会导致错误

> ID：15476873
> 
> 赞同：0
> 
> 时间：2013-03-18T12:28:32.623
> 
> 标签：c#, sql, xslt, stored-procedures

我有一个用于更新表的 SQL 存储过程。但是当通过 C# 执行查询时，xslt 从表中删除的列之一。

我的存储过程是

```
ALTER PROCEDURE [dbo].[kt_editingnotes]
    (@NOTE NVARCHAR (512),
     @ITEMNUMBER NVARCHAR (512),
     @ACCOUNT NVARCHAR (512),
     @CODE NVARCHAR(512)
    )
AS
  UPDATE NOTES 
  SET TXT = @NOTE 
  WHERE NOTESRECID = (SELECT ISP_EFAVORITLINE.ROWNUMBER 
                      FROM ISP_EFAVORITLINE 
                      WHERE ISP_EFAVORITLINE.ACCOUNT = @ACCOUNT 
                        AND ISP_EFAVORITLINE.ITEMNUMBER = @ITEMNUMBER 
                        AND ISP_EFAVORITLINE.CODE = @CODE)
  return 
```

我这样称呼它：

```
ExecStoredProcedure('kt_editingnotes', concat('@ITEMNUMBER:', $ITEMNUMBER,', @ACCOUNT:', $ACCOUNT,', @CODE:', $CODE)) 
```

问题是什么？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:02:44.307

编辑我注意到`ExecStoredProcedure`您执行该过程`'kt_deletenotes'`而不是`'kt_editingnotes'`. 尝试更改调用过程的行以调用正确的过程。

```
ExecStoredProcedure('kt_editingnotes', concat('@ITEMNUMBER:', $ITEMNUMBER,', @ACCOUNT:', $ACCOUNT,', @CODE:', $CODE)) 
```

# css - 如何使容器尺寸拉伸到按比例缩放的子尺寸

> ID：15476879
> 
> 赞同：0
> 
> 时间：2013-03-18T12:28:42.340
> 
> 标签：css, sencha-touch-2, positioning

可能标题比较混乱，我来解释一下。

我有一个`DIV`缩放到一定高度`height: x`的容器，在容器内部我有一个`IMG`样式`height: 100%`。然后，容器的宽度只延伸到视口的宽度。我想要达到的效果是让容器的宽度与子元素的宽度（图像，比视口宽）相匹配。

对于 Sencha Touch 应用程序，我需要这种行为，其中我有一个滚动面板，里面有一个图像，它需要拉伸到整个可用视口高度（因此容器设置为`height: 100%`），但目前，面板不水平滚动因为容器的宽度只延伸到视口的宽度，而图像更宽。

**浏览器：**

![来自 jsfiddle.net 的浏览器视图](../Images/ffb3c108dbfde709ba2a1a43f929fc0b.png)

**代码：**

```
div {
    /* make container stretch to width of child */
    position: absolute;
    height: 100%;
    width: auto;
}    

img {
    height: 100%;
    width: auto;
} 
```

*示例：http:* [//jsfiddle.net/hongaar/kBCtP/](http://jsfiddle.net/hongaar/kBCtP/)

**问题：** 我需要做什么才能使容器拉伸并具有与包含图像相同的宽度？

* * *

**编辑：** 我使用 Sencha Touch 2 解决了我遇到的实际问题：http: [//jsfiddle.net/hongaar/VPNE7/](http://jsfiddle.net/hongaar/VPNE7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:49:43.610

你在寻找这样的东西吗：http: [//jsfiddle.net/QCHDF/5/](http://jsfiddle.net/QCHDF/5/)

```
Ext.application({
launch: function () {
    Ext.Viewport.add({
        xtype: 'panel',
        layout : 'hbox',
        //width: '100%',
        height: Ext.Viewport.getWindowHeight(),
        scrollable  : {
            direction       : 'horizontal',
            directionLock   : true
        },
        items : [{
            xtype : 'image',
            mode : 'img',
            src   : 'http://placehold.it/400x100',
            height: Ext.Viewport.getWindowHeight(),
            width : 400
        }, {
            xtype : 'image',
            mode : 'img',
            src   : 'http://placehold.it/400x100',
            height: Ext.Viewport.getWindowHeight(),
            //width : 400
        }]
    });
}
}); 
```

这里的关键是使用`mode : 'img'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:46:53.653

# [演示小提琴](http://jsfiddle.net/mohammadAdil/kBCtP/9/)

这是你想要达到的目标吗？

```
.container {
        /* make container stretch to width of child */
        position: absolute;
        width: auto;
        height: auto;

        /* for debugging */
        padding: 2px;
        border: 1px solid black;
    }

    .c1 { top: 0; }
    .c2 { top: 220px; }

    .picture1 {
        height: auto;
        width: auto;
    }

    .picture2 {
        /* but I can't set absolute height, need to be proportionally */
        height: 200px;
        width: auto;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T17:28:46.687

您可以尝试将父级设置为`display: table;`而不设置宽度。但这可能会在参考文档其余部分的内联流程时搞砸。

# java-ee-6 - 找出使用了什么 EJB 视图

> ID：15476880
> 
> 赞同：6
> 
> 时间：2013-03-18T12:28:45.337
> 
> 标签：java-ee-6, ejb-3.1, interceptor, ejb-jar.xml, sessioncontext

假设我有一个定义两个视图的 EJB：

*   当地的商业，
*   远程业务。

两个接口共享相同的方法签名，所以就像：

```
public interface MyBusinessCommon {
    void myMethod(Object o);
}

@Local
public interface MyBusinessLocal extends MyBusinessCommon { }

@Remote
public interface MyBusinessRemote extends MyBusinessCommon { }

@Stateless
public class MyBusinessBean implements MyBusinessLocal, MyBusinessRemote {
    public void myMethod(Object o) {
        // ...
    }
} 
```

**有没有办法找出从 EJB 本身（或其拦截器？）中调用的 EJB 视图**

假设我想根据使用的视图执行不同的授权程序。远程应该受到更多限制，而本地不应该。

我可以调用`SessionContext#getInvokedBusinessInterface()`，但这只会给我关于类对象的信息——而不是关于它的 EJB 语义。显然使用反射来检查接口或 bean 上的注释存在是不够的（在 中定义的视图`ejb-jar.xml`呢？）

我怀疑是否有可能使用直接的 EJB 规范，但也许我错过了一些东西。

如果没有，是否有可能从应用程序服务器内部获取此信息？（我们只考虑 JBoss AS 7.x、Glassfish 3.x 和 TomEE 1.5.1）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T21:34:39.527

就像 Arjan 所说的那样——仅仅遵循 EJB 规范是不可能的。

然而，在 Glassfish 中，这很简单。

所有 EJB 拦截器都接受该`InvocationContext`参数。`InvocationContext`Glassfish 中的实现实际上是`com.sun.ejb.EjbInvocation`类。它具有`isLocal`告诉您它是否正在拦截本地业务呼叫（或`isRemote`用于远程业务呼叫）的字段。您可以使用它，例如：

```
import com.sun.ejb.EjbInvocation;

import javax.interceptor.AroundInvoke;
import javax.interceptor.Interceptor;
import javax.interceptor.InvocationContext;

@Interceptor
public class CallSourceAwareInterceptor {

    @AroundInvoke
    public Object aroundInvoke(InvocationContext ictx) throws Exception {
        boolean isLocalCall = isLocalEJBCall(ictx);

        return ictx.proceed();
    }

    boolean isLocalEJBCall(final InvocationContext ictx) {
        if (ictx instanceof EjbInvocation) {
            return ((EjbInvocation) ictx).isLocal;
        }
        else {
            throw new IllegalArgumentException("Unknown InvocationContext implementation.");
        }
    }
} 
```

要访问这个`EjbInvocation`内部 Glassfish 类，您需要添加以下 maven 依赖项：

```
<dependency>
    <groupId>org.glassfish.main.ejb</groupId>
    <artifactId>ejb-container</artifactId>
    <version>4.0.1-b02</version>
    <scope>provided</scope>
</dependency> 
```

您可能需要添加以下特定存储库才能访问此工件：

```
<repositories>
    <repository>
        <id>maven-promoted</id>
        <url>https://maven.java.net/content/groups/promoted/</url>
    </repository>
</repositories> 
```

我做了一个快速研究（基于理查德关于`Invocation`对象的建议）如何在 JBoss 中实现相同但找不到​​答案......

# java - 一个类的方法没有被另一个类调用

> ID：15476881
> 
> 赞同：0
> 
> 时间：2013-03-18T12:28:50.637
> 
> 标签：java, android, class, timer

我在一个活动中编写了一个类，以在我的活动中显示一个 hh:mm:ss 计时器：

这是旨在显示计时器的类的代码：

```
//class to display on screen timer
       class ShowTimer
       {
           long mMilliseconds = 120000;
            SimpleDateFormat mSimpleDateFormat = new SimpleDateFormat("HH:mm:ss");

            CountDownTimer mCountDownTimer = new CountDownTimer(mMilliseconds, 1000) {
                @Override
                public void onFinish() {
                    mTextView.setText(mSimpleDateFormat.format(0));
                }

                public void onTick(long millisUntilFinished) {
                    mTextView.setText(mSimpleDateFormat.format(millisUntilFinished));
                }
            };
       } 
```

这就是我尝试访问课程的方式：

```
mSimpleDateFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
            mTextView = (TextView) findViewById(R.id.timer_textView);

            mCountDownTimer.start(); 
```

我收到这样的错误：

```
mCountDownTimer cannot be resolved 
```

完整的**活动**在这里：

```
public class SpeedTestExamActivity extends Activity {

    String xmlContent=null;
    String duration=null;
    //strings for use
        String answer_str, option1_str,option2_str,option3_str,option4_str;
        //text views for quiz layout
        TextView question_view;
        TextView question_sr_no;
        RadioButton option1;
        RadioButton option2;
        RadioButton option3;
        RadioButton option4;
        int counter=0;
        int loop_checker=0;
        int i;

        //buttons on UI
        Button prevQuestion;
        Button nextQuestion;
        Button resetQuestion;
        Button endTest;
        // XML node keys
                static final String KEY_LIST = "List"; // parent node
                static final String KEY_SR_NO = "SRNo";
                static final String KEY_EXAM_SET_ID="ExamSetId";
                static final String KEY_Q_ID="QId";
                static final String KEY_QT_ID="QTId";
                static final String KEY_QUESTION = "Question";
                static final String KEY_MARKS = "Marks";
                static final String KEY_NEGATIVE_MARKS = "NegativeMark";
                static final String KEY_ATTEMPTED_TIME = "AttemtedTime";
                static final String KEY_IDLE_TIME = "IdleTime";
                static final String KEY_ELAPSED_TIME = "ElapsedTime";
                static final String KEY_LAST_Q_INDEX = "LastQIndex";
                static final String KEY_SUBJECT_NAME = "SubjectName";
                static final String KEY_OPTION1 = "Option1";
                static final String KEY_OPTION2 = "Option2";
                static final String KEY_OPTION3 = "Option3";
                static final String KEY_OPTION4 = "Option4";
                static final String KEY_CORRECT = "Correct";

                //variables to run the timer
                int test_duration; 

                //object of the handler class
                Handler handler;

                //textview for timer
                TextView mTextView;
                SimpleDateFormat mSimpleDateFormat = new SimpleDateFormat("HH:mm:ss");

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_speed_test_exam);

        //getting previously received content as xml
        xmlContent=getFromPreference("SpeedTestContent");

        //getting previously saved exam duration from preference
        duration=getFromPreference("exam_duration");

        //setting time for timer to finish activity after test duration is over
        test_duration=Integer.parseInt(duration.toString())*60000;

        //makeAToast("Test duration is ms: "+test_duration);

         mSimpleDateFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
            mTextView = (TextView) findViewById(R.id.timer_textView);

            mCountDownTimer.start();

        //starting timer
        runTimer();

        //assigning objects to layouts
         question_view=(TextView)findViewById(R.id.question_textView);
         question_sr_no=(TextView)findViewById(R.id.question_id_textView);
        option1=(RadioButton)findViewById(R.id.option1_radioButton);
        option2=(RadioButton)findViewById(R.id.option2_radioButton);
        option3=(RadioButton)findViewById(R.id.option3_radioButton);
        option4=(RadioButton)findViewById(R.id.option4_radioButton);

        //calling function to populate ui
        populating_textview(counter);

        //onclick opt 1
        option1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                option2.setChecked(false);
                option3.setChecked(false);
                option4.setChecked(false);
               //getting text from TextView and checking whether it is equal to ans
                option1_str=option1.getText().toString();
                if (answer_str.equalsIgnoreCase(option1_str))
                {

                    //makeAToast("Correct!");

                    //calling function to populate ui with next question
//              counter++;
//              if (counter<=loop_checker)
//              {
//              populating_textview(counter);
//              }
//              else
//              {
//                  makeAToast("Game Over!");
//              }
                }
                else
                {
                    //makeAToast("Wrong answer!");
                }

            }
        });

        //onclick opt 2
        option2.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                option1.setChecked(false);
                option3.setChecked(false);
                option4.setChecked(false);

                //getting text from TextView and checking whether it is equal to ans
                option2_str=option2.getText().toString();
                String answer=answer_str;

                if (answer.equalsIgnoreCase(option2_str))
                {
                    //calling function to populate ui with next question
                //makeAToast("Correct!");   

//              counter++;
//              if (counter<=loop_checker)
//              {
//              populating_textview(counter);
//              }
//              else
//              {
//                  makeAToast("Game Over!");
//              }
                }
                else
                {
                    //makeAToast("Wrong answer!");
                }

            }
        });

        //onclick opt 3                 
     option3.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                option1.setChecked(false);
                option2.setChecked(false);
                option4.setChecked(false);
                //getting text from TextView and checking whether it is equal to ans
                option3_str=option3.getText().toString();
                String answer1=answer_str;

                if (answer1.equalsIgnoreCase(option3_str))
                {
                    //calling function to populate ui with next question
                //makeAToast("Correct!");

//              counter++;
//              if (counter<=loop_checker)
//              {
//              populating_textview(counter);
//              }
//              else
//              {
//                  makeAToast("Game Over!");
//              }
                }
                else
                {
                    //makeAToast("Wrong answer!");
                }

            }
        });

   //onclick opt 4
     option4.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                option1.setChecked(false);
                option2.setChecked(false);
                option3.setChecked(false);
                //getting text from TextView and checking whether it is equal to ans
                option4_str=option4.getText().toString();
                String answer2=answer_str;

                if (answer2.equalsIgnoreCase(option4_str))
                {
                    //calling function to populate ui with next question
                //makeAToast("Correct!");   

//              counter++;
//              if (counter<=loop_checker)
//              {
//              populating_textview(counter);
//              }
//              else
//              {
//                  makeAToast("Game Over!");
//              }
                }
                else
                {
                    //makeAToast("Wrong answer!");
                }

            }
        });

     //onclick next button
     nextQuestion = (Button) findViewById(R.id.next_question_button);
     nextQuestion.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                option1.setChecked(false);
                option2.setChecked(false);
                option3.setChecked(false);
                option4.setChecked(false);
                counter++;
                if (counter<=loop_checker)
                {
                populating_textview(counter);
                }
                else
                {
                    makeAToast("Game Over!");
                }
            }
        });

   //onclick previous button
     prevQuestion = (Button) findViewById(R.id.previous_question_button);
     prevQuestion.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                if(counter!=0)
                {
                    counter--;
                }

                if (counter<loop_checker)
                {

                populating_textview(counter);
                }
                 if(counter==loop_checker)
                {
                    counter--;
                    populating_textview(counter);
                }
                 if(counter==0)
                 {
                     makeAToast("No more questions!");
                 }

            }
        });
   //onclick reset button
     resetQuestion = (Button) findViewById(R.id.reset_question_button);
     resetQuestion.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                option1.setChecked(false);
                option2.setChecked(false);
                option3.setChecked(false);
                option4.setChecked(false);

            }
        });
   //onclick end test button
     endTest = (Button) findViewById(R.id.end_test_button);
     endTest.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                //deactivating timer before finishing activity
                handler.removeCallbacksAndMessages(null);
                finish();
                Intent intent = new Intent(SpeedTestExamActivity.this, RateUsActivity.class);
                SpeedTestExamActivity.this.startActivity(intent);               
            }
        });
    }

    //deactivating back button
    @Override
    public void onBackPressed() {

    }   

    //getting content from preferences
    public String getFromPreference(String variable_name)
    {
        String get_content;
        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
        get_content = preferences.getString(variable_name,"");

        return get_content;
       // makeAToast(xmlContent);
    }

    // function to populate ui with question counter
            void populating_textview(int count_questions)
            {

                ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

                XMLParser parser = new XMLParser();
                //String xml = parser.getXmlFromUrl(URL); // getting XML
                Document doc = parser.getDomElement(xmlContent); // getting DOM element

                //count_questions=2;

                NodeList nl = doc.getElementsByTagName(KEY_LIST);
                // looping through all item nodes <item>
                for ( i = 0; i < nl.getLength();i++) {

                    loop_checker=i;
//              while(counter< nl.getLength())
//              {
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    Element e = (Element) nl.item(count_questions);
                    // adding each child node to HashMap key => value
                    map.put(KEY_LIST, parser.getValue(e, KEY_LIST));
                    map.put(KEY_SR_NO, parser.getValue(e, KEY_SR_NO));
                    question_sr_no.setText(parser.getValue(e, KEY_SR_NO)+".");

                    map.put(KEY_QUESTION, parser.getValue(e, KEY_QUESTION));                
                    question_view.setText(parser.getValue(e, KEY_QUESTION));

                    map.put(KEY_OPTION1, parser.getValue(e, KEY_OPTION1));
                    //option1_str =parser.getValue(e, KEY_OPTION1);
                    option1.setText(parser.getValue(e, KEY_OPTION1));

                    map.put(KEY_OPTION2, parser.getValue(e, KEY_OPTION2));
                    option2.setText(parser.getValue(e, KEY_OPTION2));
                    //option2_str =parser.getValue(e, KEY_OPTION2);

                    map.put(KEY_OPTION3, parser.getValue(e, KEY_OPTION3));
                    option3.setText(parser.getValue(e, KEY_OPTION3));
                    //option3_str =parser.getValue(e, KEY_OPTION3);

                    map.put(KEY_OPTION4, parser.getValue(e, KEY_OPTION4));
                    option4.setText(parser.getValue(e, KEY_OPTION4));
                    //option4_str =parser.getValue(e, KEY_OPTION4);

                    map.put(KEY_CORRECT,  parser.getValue(e, KEY_CORRECT));
//                  makeAToast(parser.getValue(e, KEY_ANSWER));
                    answer_str =parser.getValue(e, KEY_CORRECT);
                    // adding HashList to ArrayList
                    menuItems.add(map);
                }
            }

    //method to run timer
            public void runTimer()
            {
                 handler = new Handler();
                 // run a thread after a particular time seconds to start the home screen
                handler.postDelayed(new Runnable() {

                    @Override
                    public void run() {
                        makeAToast("Your time is up!");

                        Intent intent = new Intent(SpeedTestExamActivity.this, RateUsActivity.class);
                        finish();
                        SpeedTestExamActivity.this.startActivity(intent);
                   }

                }, test_duration); // time in milliseconds (1 second = 1000 milliseconds) until the run() method will be called
            }
    //method to show toast
        public void makeAToast(String str) {
            //yet to implement
            Toast toast = Toast.makeText(this,str, Toast.LENGTH_SHORT);
            toast.setGravity(Gravity.CENTER, 0, 0);
            toast.show();
        }

        //class to display on screen timer
       class ShowTimer
       {
           long mMilliseconds = 120000;
            SimpleDateFormat mSimpleDateFormat = new SimpleDateFormat("HH:mm:ss");

            CountDownTimer mCountDownTimer = new CountDownTimer(mMilliseconds, 1000) {
                @Override
                public void onFinish() {
                    mTextView.setText(mSimpleDateFormat.format(0));
                }

                public void onTick(long millisUntilFinished) {
                    mTextView.setText(mSimpleDateFormat.format(millisUntilFinished));
                }
            };
       }
} 
```

**问题是，我已经有了毫秒的时间，我不能使用任何硬编码值。**

我已按照[此处](https://stackoverflow.com/a/12149887)的教程进行操作。

我哪里错了？我应该怎么做才能实现计时器？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:38:02.160

Try this:

```
ShowTimer showTimer = new ShowTimer();
showTimer.mCountDownTimer.start(); 
```

Or better use an accessor in `ShowTimer`:

```
showTimer.getCountDownTimer().start(); 
```

The `getCountDownTimer` returns `mCountDownTimer`:

```
public CountDownTimer getCountDownTimer() {
    return mCountDownTimer;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:33:57.633

您已经`mCountDownTimer`在内部类而不是主类中声明。如果您将其移至您的`SpeedTestExamActivity`班级，您将能够访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:35:47.220

`mCountDownTime`是一个实例字段，因此您需要一个实例`ShowTimer`来访问该字段。

# php - 用不同的替换替换所有其他出现

> ID：15476887
> 
> 赞同：0
> 
> 时间：2013-03-18T12:29:08.173
> 
> 标签：php

我有一个看起来像这样的字符串：

```
$post = "Test $asd$ lol test asd $test$"; 
```

我希望它变成：

```
$post = "Test [bb]asd[/bb] lol test asd [bb]test[/bb]"; 
```

哪种方法最简单/最好？请注意，$ 出现的次数会不时发生变化。基本思想是用 [b] 分别替换每个其他出现的 [/bb]。

我希望你明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:32:28.857

试试这个 ：

```
<?php
$str  = $post = 'Test $asd$ lol test asd $test$';
echo preg_replace('/\$(\w+)\$/','[bb]$1[/bb]',$str);
?> 
```

输出 ：

```
Test [bb]asd[/bb] lol test asd [bb]test[/bb] 
```

# android - pt 中的 Android 字体大小

> ID：15476889
> 
> 赞同：1
> 
> 时间：2013-03-18T12:29:11.483
> 
> 标签：android, android-fonts

我正在开发一个 Android 项目，我需要基于 JSON 布局文件构建布局。iOS 应用程序也使用了相同的文件。所以有 1 个文件将在 Android 和 iOS 上呈现相同的布局。

JSON 布局文件根据默认的 iOS 字体单元定义其字体大小。

来自[Android 文档](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)：

> 点 - 基于屏幕物理尺寸的 1/72 英寸。

据我所知，iOS 字体大小也被定义为 1/72 英寸。

因此，基于此信息，我想说以下内容就足够了：

```
view.setTextSize(TypedValue.COMPLEX_UNIT_PT, fontSizeInIosUnit) 
```

然而，这会导致文本过大。而且每个设备似乎也有所不同（这很奇怪，因为点应该始终以相同的物理尺寸出现）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-19T08:37:08.117

如果您希望字体根据屏幕大小正确调整大小，则应使用 dp/dip 代替。所以试试这个：

```
view.setTextSize(TypedValue.COMPLEX_UNIT_DIP, fontSizeInIosUnit); 
```

现在这可能不完全相同，但根据我的经验，这会产生最好的结果。如果它没有合适的尺寸，那么找出你在 Android 上需要的尺寸作为基本尺寸，然后改用它。

# javascript - js函数中的Python内联不能正常工作

> ID：15476895
> 
> 赞同：0
> 
> 时间：2013-03-18T12:29:21.167
> 
> 标签：javascript, python, forms, radio-button, tornado

我有个问题。我有这个js函数：

```
 <script>
function checkall(perm){

var permall = parseInt(perm);

if (permall==0) {
    {% for user in users %}
    document.getElementById("perms_{{user.id}}_0").checked=true
    document.forms['form_user_{{ user.id }}'].submit();
    {% end %}}
else if (permall==1) {
    {% for user in users %}
    document.getElementById("perms_{{user.id}}_1").checked=true
    document.forms['form_user_{{ user.id }}'].submit();
    {% end %}}
else if (permall==4) {
    {% for user in users %}
    document.getElementById("perms_{{user.id}}_4").checked=true
    document.forms['form_user_{{ user.id }}'].submit();
    {% end %}}

 }
</script> 
```

当我单击一个按钮时，我调用此函数，对于用户列表中的每个用户，设置为检查相关权限的用户单选按钮，然后提交用户表单以在数据库中设置权限（这调用一个处理程序在 Python 中）。

现在，设置为检查单选按钮的代码可以正常工作。但是只提交列表中第一个用户的表单...该功能仅对第一个用户设置权限。此外，Python 处理程序只被调用一次（我做了一些调试打印）。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:35:07.000

调用`submit()`表单的动作与您自己按下按钮完全相同：整个页面将使用来自服务器的响应（通常是重定向）进行刷新，因此不会处理更多的 JS 动作。

You'll need to serialize the values yourself and submit them via AJAX if you want to do multiple submissions at once.

# javascript - 简单的 Javascript 不能正常工作

> ID：15476897
> 
> 赞同：0
> 
> 时间：2013-03-18T12:29:30.140
> 
> 标签：javascript

我使用[http://www.barelyfitz.com/projects/tabber/](http://www.barelyfitz.com/projects/tabber/)上显示的 tabber 脚本来提供一个标签页。通常它运行良好，我唯一的抱怨是标签在内容完全加载之前不会显示，然后在屏幕正确写入时出现跳转。（有关我的意思的示例，请参见[www.littlehotels.co.uk/spain/noves.php 。）](http://www.littlehotels.co.uk/spain/noves.php)

我认为解决方案是像这样隐藏包含所有选项卡式内容的 div

```
<div class="tabber" id="tabber" style="display:none"> 
```

然后用一个小的 javascript 函数显示它，该函数由

```
<body onLoad="ShowTabber()"> 
```

javascript本身是

```
<script type="text/javascript">
function ShowTabber() {
document.getElementById('tabber').style.display = "block";
 }
</script> 
```

我的小功能似乎阻止了外部 javascript (tabber.js) 的工作，因为页面显示了所有选项卡的内容，而顶部没有选项卡本身。这与我从页面中删除对外部脚本的引用的结果相同。

我究竟做错了什么？

更多说明：当 tabber.js 文件丢失时，页面会一个接一个地显示所有选项卡的内容（如您所料）。如上所述运行脚本具有完全相同的效果；因此我得出结论，该脚本阻止了主要的 javascript 运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:58:12.403

好吧，我用 jQuery 解决了这个问题（有点），但它现在又提出了另一个问题。

为了响应 PSR，我更深入地研究了 jQuery。切换到 .tabs() 太复杂了，但我确实使用 jQuery 在适当的时候隐藏和显示了一些 div。

我在 tabber div 前面放了一条简单的小线来显示“正在加载”消息。

```
<div id="loading" align="center" style="position:relative;top:70px"><h6>Loading ...</h6></div> 
```

然后我把这个脚本放在头部，在 jQuery 行下面。

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#tabber").hide();
        $("#loading").hide();
        $("#loading").fadeIn(1000);
     });
    $(window).load(function(){
        $("#loading").hide();
        $("#tabber").fadeIn(300);
     });
function checkResize(id){
      var win=document.getElementById(id).contentWindow.document.body.scrollHeight;
      alert(win);
}
</script> 
```

这很好用，但是一些选项卡的内容具有 iframe，并且此脚本会破坏我在这些 iframe 上使用的 autoResize 脚本。我将打开一个新问题，看看是否有人对此有答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:35:36.513

```
'onLoad': function(argsObj) {
    /* Display an alert only after tab */
    if (argsObj.tabber.id == 'tab') {
      alert('Finished loading tab!');
    }
  } 
```

默认情况下选择一个选项卡。然后在完成加载该选项卡后，它将显示一条消息。

[看这里](http://www.barelyfitz.com/projects/tabber/example2.html)

# javascript - 使用字符串 - JavaScript

> ID：15476902
> 
> 赞同：0
> 
> 时间：2013-03-18T12:29:51.757
> 
> 标签：javascript

使用 PHP，可以`$string="some text {$aVar} and more text";`代替`$string="some text ".$aVar." and more text";`

可以用 JavaScript 做类似的事情，还是我需要做`string="some text "+aVar+" and more text";`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:34:42.807

由于 JavaScript 标识符无法与字符串的其他部分区分开来（没有特殊符号（如`$`）来标记它们），因此它没有插值功能。

它对内置的字符串格式化也没有任何帮助，因此您必须求助于第三方代码或从头开始编写自己的字符串格式化程序。

基本的字符串格式化可以用多种语言使用`sprintf`语法和[可用的 JavaScript 实现](https://stackoverflow.com/questions/610406/javascript-equivalent-to-printf-string-format)来完成。您还可以查看完整的模板语言，例如[Mustache](http://mustache.github.com/)。

# c++ - std::unique_ptr 的推荐用法

> ID：15476907
> 
> 赞同：47
> 
> 时间：2013-03-18T12:30:16.803
> 
> 标签：c++, c++11, smart-pointers, unique-ptr

a 的推荐用途是什么`std::unique_ptr`，具体在哪里、何时以及如何最好地使用它？

我发现：

[关于 unique_ptr 表演](https://stackoverflow.com/questions/8138284/about-unique-ptr-performances)

我已经知道：

1.  `std::unique_ptr`是在 C++11 中开发的，以替代`std::auto_ptr`
2.  a`std::unique_ptr`没有引用计数并且“拥有”它指向的对象
3.  没有复制/分配`std::unique_ptr`
4.  当我需要一个唯一的指针时，`std::unique_ptr`是转到结构

我想知道的：

1.  使用`std::unique_ptr`比其他东西更可取的（除了唯一性）
    吗？在这种情况下我能得到什么？
2.  如果有，在什么情况下，什么时候？
3.  考虑到移动语义的需要，这是否会导致整体`std::unique_ptr`不利
    ？
4.  如果`std::shared_ptr`在几乎所有情况下都足以进行动态内存管理，为什么我可以随意使用`std::unique_ptr`（同样，
    除了唯一性）？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-18T12:40:30.607

理论上，您应该使用`unique_ptr`所有指针，除非您知道要共享它，在这种情况下您应该使用`shared_ptr`. 原因是它`unique_ptr`的开销较少，因为它不计算引用。

但是，a`unique_ptr`是可移动的但不可复制，因此使用 one 作为成员变量可能需要您编写更多代码（例如移动构造函数），通过值传递 one 意味着您需要使用`std::move`等等。结果，有些人`shared_ptr`出于懒惰而使用它，因为它更容易，而且性能差异对于他们的应用程序可能并不显着。

最后，原始指针可以很好地观察-永远不会影响生命周期的指针使用。仔细选择正确的指针类型可以让那些阅读你的代码的人很好地理解你在做什么。有关更多信息，请参阅 Herb Sutter 的文章[Elements of C++ Style](http://herbsutter.com/elements-of-modern-c-style/)，特别是“禁止删除”部分。

# typescript - 修改 Date.prototype

> ID：15476909
> 
> 赞同：1
> 
> 时间：2013-03-18T12:30:23.270
> 
> 标签：typescript

如果我试试这个：

```
Date.prototype.add = function (days) {
    var date = new Date(this.valueOf());
    date.setDate(date.getDate() + days);
    return date;
}; 
```

ts 编译器抱怨 add 不存在日期..

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:10:12.273

您需要扩展 date 接口以告诉编译器您的 add 方法：

```
interface Date {
    add (days: number) : Date;
} 
```

然后你可以像这样使用它：

```
Date.prototype.add = function (days) {
    var date = new Date(this.valueOf());
    date.setDate(date.getDate() + days);
    return date;
};

var date = new Date();

var newDate = date.add(1); 
```

# css - 像在 Chrome 中执行 CSS 一样直播或控制台？

> ID：15476910
> 
> 赞同：0
> 
> 时间：2013-03-18T12:30:23.397
> 
> 标签：css, google-chrome-devtools

我用谷歌搜索，但没有找到满意的答案。

有没有办法像在控制台中使用 JavaScript 一样在浏览器中实时执行 CSS 选择器？

我知道我可以在 Styles 痛苦中修改 CSS，但这似乎不允许我添加伪选择器，例如 :first-of-type。它似乎也没有显示所有受影响的标签或选择器返回的标签集。

有没有办法可以执行`section.blah:first-of-type`并查看返回或受影响的元素？

我现在只使用 Chrome，但可以使用 FF 或任何它给我这个功能的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:36:08.527

在元素选项卡中，您可以使用选择器语法进行搜索。

如果你搜索

```
.myclass 
```

你会发现有 class="myclass" 的元素

我认为这是最接近您所要求的内容

转到元素选项卡，然后按 ctrl+F（查找）。在下面的示例中，输入 div.answer

![堆栈溢出页面上的演示](../Images/762dcc679fd8d633a2a37108c22ec16a.png)

在搜索字符串的右侧，您会看到“1 of 3”，表示 3 个元素符合您的条件。当前一个突出显示。您可以通过带有箭头的项目上下移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:19:12.123

如果您在页面中使用 jQuery，那么您可以执行以下操作：

```
$("section.blah:first-of-type"); 
```

在浏览器控制台中执行该操作将显示 jquery 匹配的元素列表。

更好的是，您可以将它分配给一个变量并以编程方式遍历它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:17:18.070

实际上，您可以通过编辑样式窗格来做到这一点。你必须先选择一个父母（在我的例子中是html）。

![在此处输入图像描述](../Images/5ce8d331797d941dd6b625b68fd1bcb7.png)

结果是：

![在此处输入图像描述](../Images/5c9587c343de3b250bc5198d06de8365.png)

这样一来，chrome 就会瞬间大展身手。不仅仅是突出显示 DOM 树。

# ruby - 与 Ruby 的 `GC#start` 混淆

> ID：15476913
> 
> 赞同：0
> 
> 时间：2013-03-18T12:30:30.020
> 
> 标签：ruby, ruby-1.9.3

***程序 - 我***

```
p RUBY_VERSION

a = "A"
b = "B"

p "#{a}"
p "#{b}"

p "Garbage Count => #{GC.count}"

b = "D"

p "Garbage Count => #{GC.count}"

GC.start

p "Garbage Count => #{GC.count}"

p "#{a}"
p "#{b}" 
```

*输出：*

```
"1.9.3"
"A"
"B"
"Garbage Count => 1"
"Garbage Count => 1"
"Garbage Count => 2"
"A"
"D" 
```

在让我困惑`Program I`的输出中。混淆是计数。所以我尝试了如下的修改版本。`p "Garbage Count => #{GC.count}"``1,1,2``garbage objects``Program-I`

我注释掉的地方`GC.start`。现在看看它的输出`Program -II`似乎就像我`GC.start`在我的第一个程序中那样，这反过来又破坏了无引用对象 `"B"`。

***程序 - II***

```
p RUBY_VERSION

a = "A"
b = "B"

p "#{a}"
p "#{b}"

p "Garbage Count => #{GC.count}"

b = "D"

p "Garbage Count => #{GC.count}"

#GC.start

p "Garbage Count => #{GC.count}"

p "#{a}"
p "#{b}" 
```

*输出：*

```
"1.9.3"
"A"
"B"
"Garbage Count => 1"
"Garbage Count => 1"
"Garbage Count => 1"
"A"
"D" 
```

***最后的问题是：***

*(a) 在`GC.start`1 个对象被销毁之前，从输出中可以清楚地看到。那是什么物体？*

*(b) 为什么没有引用的对象`B`没有被销毁`GC.start`？*

***编辑***

```
p GC.count
p GC.disable
p GC.count 
```

*输出*

```
1
false
1 
```

在我禁用的 abive 代码中。`garbage collection`为什么最后一个`GC.count`显示输出为`1`？

任何人都可以帮助我理解如上所述在我脑海中提出的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:23:11.443

GC.count 不返回垃圾收集对象的数量 - 它返回垃圾收集器运行的次数，因此调用`GC.start`将始终将其加一。

在您的代码开始运行之前会执行一堆代码，因此可能会发生一些垃圾收集也就不足为奇了。

禁用 gc 不会撤消已经发生的垃圾回收。

# java - 如何在 Java 中获取打印机的品牌和型号？

> ID：15476914
> 
> 赞同：10
> 
> 时间：2013-03-18T12:30:30.327
> 
> 标签：java, printing, driver, snmp, jna

我实际上正在开发一个将打印机共享到服务器的 Java 应用程序，我需要这个应用程序来获取它共享的打印机的品牌和型号。

我知道这个问题已经被问了三四次，但似乎没有人找到答案。

我试过这段代码：

```
PrintService[] printServices = PrintServiceLookup.lookupPrintServices(null, null);

        for (PrintService printer : printServices){           
            System.out.println(printer.getDefaultAttributeValue(PrinterMakeAndModel.class));
            System.out.println(printer.getAttribute(PrinterURI.class));
        } 
```

第一个 print 总是返回一个**空**字符串，第二个得到一个**NullPointerException**。

一些研究将我带到了这个页面：[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4673400](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4673400)

似乎这是一个已知的“错误”，我不太了解评估。

我在想一种解决方法是通过向打印机发送 SNMP 请求来获取品牌和型号，但我对 SNMP 一无所知，我不确定是否有一个 SNMP 命令来获取品牌和型号任何打印机。

如果有人知道如何通过使用 Java 方法或发送 SNMP 命令或任何其他可以在任何操作系统上完成的操作来实现这一点，我们将不胜感激。

**编辑 ：**

这是一个指向相同问题的主题的链接：

*   [如何在 javax.print 中获取打印机型号？](https://stackoverflow.com/questions/2131814/how-to-get-model-of-a-printer-in-javax-print)

**编辑 2：**

**解决方案 ：**

正如我在评论中所说，我尝试通过将 OID“1.3.6.1.2.1.25.3.2.1.3.1”发送到打印机来通过 SNMP 获取品牌和型号。它似乎有效，但我不确定它是否适用于使用相同 OID 的任何打印机，如果在目标打印机上停用 SNMP，它可能会崩溃。

所以我最终选择使用JNA和Winspool.drv来获取驱动名。其中一部分已经在 J​​NA 中实现，但我必须添加一些结构和功能。

这是 JNA 中现有[WinspoolUtil.java](https://github.com/twall/jna/blob/master/contrib/platform/src/com/sun/jna/platform/win32/WinspoolUtil.java)和[Winspool.java](https://github.com/twall/jna/blob/master/contrib/platform/src/com/sun/jna/platform/win32/Winspool.java)类的链接。

这是我个人更新这两个类的代码。

**温斯普尔：**

```
import java.util.Arrays;
import java.util.List;

import com.sun.jna.Memory;
import com.sun.jna.Native;
import com.sun.jna.Pointer;
import com.sun.jna.Structure;
import com.sun.jna.platform.win32.WinDef.DWORD;
import com.sun.jna.platform.win32.WinDef.INT_PTR;
import com.sun.jna.platform.win32.WinNT.HANDLE;
import com.sun.jna.platform.win32.WinNT.HANDLEByReference;
import com.sun.jna.ptr.IntByReference;
import com.sun.jna.win32.StdCallLibrary;
import com.sun.jna.win32.W32APIOptions;

public class WinspoolUpdate {
    public interface WinspoolLib extends StdCallLibrary {

        WinspoolLib INSTANCE = (WinspoolLib) Native.loadLibrary("Winspool.drv", WinspoolLib.class,
                W32APIOptions.UNICODE_OPTIONS);

        boolean EnumPrinters(int Flags, String Name, int Level, Pointer pPrinterEnum,
                int cbBuf, IntByReference pcbNeeded, IntByReference pcReturned);

        boolean GetPrinter(HANDLE hPrinter, int Level, Pointer pPrinter, int cbBuf, IntByReference pcbNeeded);

        boolean OpenPrinter(String pPrinterName, HANDLEByReference phPrinter, Pointer pDefault);

        public static class PRINTER_INFO_1 extends Structure {
            public int Flags;
            public String pDescription;
            public String pName;
            public String pComment;

            protected List<String> getFieldOrder() {
                return Arrays.asList(new String[] { "Flags", "pDescription", "pName", "pComment" });
            }

            public PRINTER_INFO_1() {
            }

            public PRINTER_INFO_1(int size) {
                super(new Memory(size));
            }
        }

        public static class PRINTER_INFO_2 extends Structure {
            public String pServerName;
            public String pPrinterName;
            public String pShareName;
            public String pPortName;
            public String pDriverName;
            public String pComment;
            public String pLocation;
            public INT_PTR pDevMode;
            public String pSepFile;
            public String pPrintProcessor;
            public String pDatatype;
            public String pParameters;
            public INT_PTR pSecurityDescriptor;
            public int Attributes;
            public int Priority;
            public int DefaultPriority;
            public int StartTime;
            public int UntilTime;
            public int Status;
            public int cJobs;
            public int AveragePPM;

            protected List<String> getFieldOrder() {
                return Arrays.asList(new String[] { "pServerName", "pPrinterName", "pShareName", "pPortName", 
                        "pDriverName", "pComment", "pLocation", "pDevMode", "pSepFile", "pPrintProcessor", 
                        "pDatatype", "pParameters", "pSecurityDescriptor", "Attributes", "Priority", "DefaultPriority",
                        "StartTime", "UntilTime", "Status", "cJobs", "AveragePPM" });
            }

            public PRINTER_INFO_2() {
            }

            public PRINTER_INFO_2(int size) {
                super(new Memory(size));
            }
        }

        public static class PRINTER_INFO_4 extends Structure {
            public String pPrinterName;
            public String pServerName;
            public DWORD Attributes;

            protected List<String> getFieldOrder() {
                return Arrays.asList(new String[] { "pPrinterName", "pServerName", "Attributes" });
            }

            public PRINTER_INFO_4() {
            }

            public PRINTER_INFO_4(int size) {
                super(new Memory(size));
            }
        }

        int PRINTER_ENUM_DEFAULT = 0x00000001;
        int PRINTER_ENUM_LOCAL = 0x00000002;
        int PRINTER_ENUM_CONNECTIONS = 0x00000004;
        int PRINTER_ENUM_FAVORITE = 0x00000004;
        int PRINTER_ENUM_NAME = 0x00000008;
        int PRINTER_ENUM_REMOTE = 0x00000010;
        int PRINTER_ENUM_SHARED = 0x00000020;
        int PRINTER_ENUM_NETWORK = 0x00000040;

        int PRINTER_ENUM_EXPAND = 0x00004000;
        int PRINTER_ENUM_CONTAINER = 0x00008000;

        int PRINTER_ENUM_ICONMASK = 0x00ff0000;
        int PRINTER_ENUM_ICON1 = 0x00010000;
        int PRINTER_ENUM_ICON2 = 0x00020000;
        int PRINTER_ENUM_ICON3 = 0x00040000;
        int PRINTER_ENUM_ICON4 = 0x00080000;
        int PRINTER_ENUM_ICON5 = 0x00100000;
        int PRINTER_ENUM_ICON6 = 0x00200000;
        int PRINTER_ENUM_ICON7 = 0x00400000;
        int PRINTER_ENUM_ICON8 = 0x00800000;
        int PRINTER_ENUM_HIDE = 0x01000000;
    }
} 
```

**WinspoolUtil ：**

```
import Model.WinspoolUpdate.WinspoolLib;
import Model.WinspoolUpdate.WinspoolLib.PRINTER_INFO_2;

import com.sun.jna.platform.win32.Kernel32;
import com.sun.jna.platform.win32.Win32Exception;
import com.sun.jna.platform.win32.WinNT.HANDLEByReference;
import com.sun.jna.platform.win32.Winspool.PRINTER_INFO_1;
import com.sun.jna.platform.win32.Winspool.PRINTER_INFO_4;
import com.sun.jna.ptr.IntByReference;

public class WinspoolUtils2 {   
        public static PRINTER_INFO_1[] getPrinterInfo1() {
            IntByReference pcbNeeded = new IntByReference();
            IntByReference pcReturned = new IntByReference();
            WinspoolLib.INSTANCE.EnumPrinters(WinspoolLib.PRINTER_ENUM_LOCAL,
                    null, 1, null, 0, pcbNeeded, pcReturned);
            if (pcbNeeded.getValue() <= 0) {
                return new PRINTER_INFO_1[0];
            }

            PRINTER_INFO_1 pPrinterEnum = new PRINTER_INFO_1(pcbNeeded.getValue());
            if (!WinspoolLib.INSTANCE.EnumPrinters(WinspoolLib.PRINTER_ENUM_LOCAL,
                    null, 1, pPrinterEnum.getPointer(), pcbNeeded.getValue(), pcbNeeded, pcReturned)) {
                throw new Win32Exception(Kernel32.INSTANCE.GetLastError());
            }

            pPrinterEnum.read();

            return (PRINTER_INFO_1[]) pPrinterEnum.toArray(pcReturned.getValue());
        }

        public static PRINTER_INFO_2[] getPrinterInfo2() {
            IntByReference pcbNeeded = new IntByReference();
            IntByReference pcReturned = new IntByReference();
            WinspoolLib.INSTANCE.EnumPrinters(WinspoolLib.PRINTER_ENUM_LOCAL,
                    null, 2, null, 0, pcbNeeded, pcReturned);
            if (pcbNeeded.getValue() <= 0) {
                return new PRINTER_INFO_2[0];
            }

            PRINTER_INFO_2 pPrinterEnum = new PRINTER_INFO_2(pcbNeeded.getValue());
            if (!WinspoolLib.INSTANCE.EnumPrinters(WinspoolLib.PRINTER_ENUM_LOCAL,
                    null, 2, pPrinterEnum.getPointer(), pcbNeeded.getValue(), pcbNeeded, pcReturned)) {
                throw new Win32Exception(Kernel32.INSTANCE.GetLastError());
            }

            pPrinterEnum.read();

            return (PRINTER_INFO_2[]) pPrinterEnum.toArray(pcReturned.getValue());
        }

        public static PRINTER_INFO_4[] getPrinterInfo4() {
            IntByReference pcbNeeded = new IntByReference();
            IntByReference pcReturned = new IntByReference();
            WinspoolLib.INSTANCE.EnumPrinters(WinspoolLib.PRINTER_ENUM_LOCAL,
                    null, 4, null, 0, pcbNeeded, pcReturned);
            if (pcbNeeded.getValue() <= 0) {
                return new PRINTER_INFO_4[0];
            }

            PRINTER_INFO_4 pPrinterEnum = new PRINTER_INFO_4(pcbNeeded.getValue());
            if (!WinspoolLib.INSTANCE.EnumPrinters(WinspoolLib.PRINTER_ENUM_LOCAL,
                    null, 4, pPrinterEnum.getPointer(), pcbNeeded.getValue(), pcbNeeded, pcReturned)) {
                throw new Win32Exception(Kernel32.INSTANCE.GetLastError());
            }

            pPrinterEnum.read();

            return (PRINTER_INFO_4[]) pPrinterEnum.toArray(pcReturned.getValue());
        }

        public static PRINTER_INFO_2 getPrinterInfo2(String printerName) {
            IntByReference pcbNeeded = new IntByReference();
            IntByReference pcReturned = new IntByReference();
            HANDLEByReference pHandle = new HANDLEByReference();

            WinspoolLib.INSTANCE.OpenPrinter(printerName, pHandle, null);

            WinspoolLib.INSTANCE.GetPrinter(pHandle.getValue(), 2, null, 0, pcbNeeded);
            if (pcbNeeded.getValue() <= 0) {
                return new PRINTER_INFO_2();
            }           

            PRINTER_INFO_2 pinfo2 = new PRINTER_INFO_2(pcbNeeded.getValue());

            WinspoolLib.INSTANCE.GetPrinter(pHandle.getValue(), 2, pinfo2.getPointer(), pcbNeeded.getValue(), pcReturned);          

            pinfo2.read();
            return (PRINTER_INFO_2) pinfo2;
        }

    } 
```

**一个主类调用三个实现的函数并显示结果：**

```
public static void main(String[] args) {

        for(PRINTER_INFO_1 printerInfo : WinspoolUtils2.getPrinterInfo1()) {

            System.out.println(printerInfo.pName + ": " + printerInfo.pDescription);             

        }

        for(PRINTER_INFO_2 printerInfo : WinspoolUtils2.getPrinterInfo2()) {

            System.out.println(printerInfo.pPrinterName + ": " + printerInfo.pDriverName);             

        }

        PRINTER_INFO_2 printerInfo = WinspoolUtils2.getPrinterInfo2("Canon iR-ADV C7000s GX300 V2.0");
        System.out.println(printerInfo.pPrinterName + ": " + printerInfo.pDriverName);        
    } 
```

我有点努力最终让它工作，所以我希望这会有所帮助。

如果你想添加一些 print spooler API 的其他功能，[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162863%28v=vs.85%29.aspx)你可以找到这个 API 的参考。

*注意：仍然存在问题，因为我希望这个应用程序是多平台的，而且这个解决方案只适用于 Windows。因此，将来我必须找到一种解决方案，以在 Linux OS 和 Mac OS X 上获取打印机驱动程序名称。如果我发现了什么，我会及时通知你。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:05:01.860

（挑选问题中可以回答的部分内容。）

> 似乎这是一个已知的“错误”，我不太了解评估。

实际上，它是增强请求 (RFE) 而不是错误。

评估只是表明审阅者认为他/她已经找到了一种可以在 Windows 上实现此功能的方法……如果他们能够解决的话*。*这不是您的解决方法。

* * *

这个相关问题讨论了使用 SNMP 获取打印机的型号

*   [如何在 C# 中通过 snmp 获取打印机型号？](https://stackoverflow.com/questions/2044671/how-do-i-get-printer-model-via-snmp-in-c)

您应该能够使用 Java SNMP 库将此映射到解决方案。这种方法假定打印机已联网并且支持 SNMP ......但我想你已经知道了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:23:18.800

对于那些对这个主题感兴趣的人，我一直在寻找可以使用基本 Java 库的解决方案，但是当我开始查看这些库的源代码时，我发现大多数方法应该返回打印机的属性从未实现过，它们总是返回 Null 值。所以，目前，在 Java 中没有办法做到这一点。

我在原始问题的第二次编辑中发布了两种解决方法：

*   通过 SNMP 调用获取这些信息。
*   使用 windows 打印后台处理程序 DLL 并从驱动程序中检索这些信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-16T21:04:30.180

使用 JNA，OP 解决方案的正确版本（没有重复代码）是这样的：

**WinspoolExt**

```
import java.util.Arrays;
import java.util.List;

import com.sun.jna.Memory;
import com.sun.jna.Native;
import com.sun.jna.Pointer;
import com.sun.jna.Structure;
import com.sun.jna.platform.win32.Winspool;
import com.sun.jna.platform.win32.WinDef.INT_PTR;
import com.sun.jna.platform.win32.WinNT.HANDLE;
import com.sun.jna.platform.win32.WinNT.HANDLEByReference;
import com.sun.jna.ptr.IntByReference;
import com.sun.jna.win32.W32APIOptions;

public interface WinspoolExt extends Winspool {

    WinspoolExt INSTANCE = (WinspoolExt) Native.loadLibrary("Winspool.drv", WinspoolExt.class,
            W32APIOptions.UNICODE_OPTIONS);

    boolean GetPrinter(HANDLE hPrinter, int Level, Pointer pPrinter, int cbBuf, IntByReference pcbNeeded);

    boolean OpenPrinter(String pPrinterName, HANDLEByReference phPrinter, Pointer pDefault);

    public static class PRINTER_INFO_2 extends Structure {
        public String pServerName;
        public String pPrinterName;
        public String pShareName;
        public String pPortName;
        public String pDriverName;
        public String pComment;
        public String pLocation;
        public INT_PTR pDevMode;
        public String pSepFile;
        public String pPrintProcessor;
        public String pDatatype;
        public String pParameters;
        public INT_PTR pSecurityDescriptor;
        public int Attributes;
        public int Priority;
        public int DefaultPriority;
        public int StartTime;
        public int UntilTime;
        public int Status;
        public int cJobs;
        public int AveragePPM;

        protected List<String> getFieldOrder() {
            return Arrays.asList(new String[] { "pServerName", "pPrinterName", "pShareName", "pPortName",
                    "pDriverName", "pComment", "pLocation", "pDevMode", "pSepFile", "pPrintProcessor", "pDatatype",
                    "pParameters", "pSecurityDescriptor", "Attributes", "Priority", "DefaultPriority", "StartTime",
                    "UntilTime", "Status", "cJobs", "AveragePPM" });
        }

        public PRINTER_INFO_2() {
        }

        public PRINTER_INFO_2(int size) {
            super(new Memory(size));
        }
    }
} 
```

**WinspoolUtilExt**

```
import com.sun.jna.Pointer;
import com.sun.jna.platform.win32.Kernel32;
import com.sun.jna.platform.win32.Win32Exception;
import com.sun.jna.platform.win32.WinNT.HANDLEByReference;
import com.sun.jna.platform.win32.WinspoolUtil;
import com.sun.jna.ptr.IntByReference;

import WinspoolExt.PRINTER_INFO_2;

public class WinspoolUtilExt extends WinspoolUtil {

    public static PRINTER_INFO_2[] getPrinterInfo2() {
        IntByReference pcbNeeded = new IntByReference();
        IntByReference pcReturned = new IntByReference();
        WinspoolExt.INSTANCE.EnumPrinters(WinspoolExt.PRINTER_ENUM_LOCAL, null, 2, null, 0, pcbNeeded, pcReturned);
        if (pcbNeeded.getValue() <= 0) {
            return new PRINTER_INFO_2[0];
        }

        PRINTER_INFO_2 pPrinterEnum = new PRINTER_INFO_2(pcbNeeded.getValue());
        if (!WinspoolExt.INSTANCE.EnumPrinters(WinspoolExt.PRINTER_ENUM_LOCAL, null, 2, pPrinterEnum.getPointer(),
                pcbNeeded.getValue(), pcbNeeded, pcReturned)) {
            throw new Win32Exception(Kernel32.INSTANCE.GetLastError());
        }

        pPrinterEnum.read();

        return (PRINTER_INFO_2[]) pPrinterEnum.toArray(pcReturned.getValue());
    }

    public static PRINTER_INFO_2 getPrinterInfo2(String printerName) {
        IntByReference pcbNeeded = new IntByReference();
        IntByReference pcReturned = new IntByReference();
        HANDLEByReference pHandle = new HANDLEByReference();

        WinspoolExt.INSTANCE.OpenPrinter(printerName, pHandle, (Pointer) null);

        WinspoolExt.INSTANCE.GetPrinter(pHandle.getValue(), 2, null, 0, pcbNeeded);
        if (pcbNeeded.getValue() <= 0) {
            return new PRINTER_INFO_2();
        }

        PRINTER_INFO_2 pinfo2 = new PRINTER_INFO_2(pcbNeeded.getValue());

        WinspoolExt.INSTANCE.GetPrinter(pHandle.getValue(), 2, pinfo2.getPointer(), pcbNeeded.getValue(), pcReturned);

        pinfo2.read();
        return (PRINTER_INFO_2) pinfo2;
    }
} 
```

基本上，它增加了**[PRINTER_INFO_2](https://msdn.microsoft.com/en-us/library/windows/desktop/dd162845%28v=vs.85%29.aspx)**支持。

# security - Windows 应用商店应用：如何实施信用卡支付

> ID：15476917
> 
> 赞同：0
> 
> 时间：2013-03-18T12:30:45.480
> 
> 标签：security, windows-8, windows-runtime, windows-store-apps, payment-gateway

我正在开发一个 Windows 商店应用程序，其中包括一个模块，应用程序用户将能够使用他们的信用卡从应用程序支付账单。

您能推荐一种安全地实现这种功能的技术吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:54:56.513

打开一个`webview`有信用卡的表格`https`并使用`Stripe`or`Paypal`或`Braintree`or`Amazon Payments`来处理 cc 信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:52:02.127

我不会费心自己实现这个。不是因为没有办法成功，而是因为一个原因：**欺诈**。

银行和票据交换所花了数年时间才弄清楚这一点。不要重新发明轮子，而是选择像 Paypal 或 Amazon Payments 这样的成熟解决方案。

# jquery - 使用 jquery 创建多个动态 div

> ID：15476919
> 
> 赞同：2
> 
> 时间：2013-03-18T12:30:54.467
> 
> 标签：jquery

我正在使用以下代码在新 div 中动态创建 div：

```
var obj = {
  name: 'item'
};

obj.html = jQuery('<div/>', { class: 'recommended' });
obj.html += jQuery('<div/>', { class: 'bestbuy' });

jQuery('<div/>', obj).appendTo('#wrapper'); 
```

所以，基本上它应该创建这样的东西：

```
<div id="wrapper">
  <div name='item'>
    <div class="I_will_be_inside_obj"></div>
    <div class="I_will_also_be_inside_obj"></div>
  </div>
</div> 
```

问题是这只适用于一个附加的div，当我尝试附加第二个时，我得到的是：

```
<div id="wrapper">
  <div name='item'>
    [object Object][object Object]
  </div>
</div> 
```

任何想法为什么，以及如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:33:31.477

那是因为创建的 dom 片段必须是一个元素。你可以这样做：

```
jQuery('<div/>').addClass('I_will_be_inside_obj').appendTo('#wrapper');
jQuery('<div/>').addClass('I_will_also_be_inside_obj').appendTo('#wrapper'); 
```

或者

```
var obj = { };
obj.html = jQuery('<div/>').addClass('I_will_be_inside_obj');
obj.html += jQuery('<div/>').addClass('I_will_also_be_inside_obj');
jQuery('#wrapper').html(obj.html); 
```

如果您想要制作一个包装 2 个 div 的 div，请使用以下命令：

```
var obj = { };
var div = $('<div/>').appendTo('#wrapper');
jQuery('<div/>').addClass('I_will_be_inside_obj').appendTo(div);
jQuery('<div/>').addClass('I_will_also_be_inside_obj').appendTo(div); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:42:40.387

jQuery 返回的是一个类似数组的对象。你不能这样使用`+=`它。

对于这个特定示例，您可以使用`.after()`，但请注意，如果您调用的 jQuery`.after()`包含多个元素，它将在每个元素之后附加参数的克隆。

```
var underConstruction;

underConstruction = jQuery('<div/>', { class: 'I_will_be_inside_obj' });
underConstruction.after(jQuery('<div/>', { class: 'I_will_also_be_inside_obj' }));

jQuery('<div/>').append(underConstruction).appendTo('#wrapper'); 
```

# c# - 从 ASP.NET 减少 MYSQL 中的执行时间

> ID：15476925
> 
> 赞同：0
> 
> 时间：2013-03-18T12:31:23.140
> 
> 标签：c#, asp.net, mysql, database

我有一个表，它是 mysql 中相关的 GPS 应用程序。每当我从 asp.net 应用程序执行时，它都会显示胎儿错误。所以我决定在 mysql 中运行，执行 SP 需要 1 分钟以上（正好 70 秒）。是否可以解决问题。

更多信息：

表 1：server_gpsdata（它包含 gps 数据。它每 10 秒从 gps 设备锁定一次）。

```
select * from server_gpsdata SD 
INNER JOIN mstcab MC on MC.cabid= SD.cabid 
INNER JOIN server_tblstatus TS on TS.statusid= MC.CabStatusid 
INNER JOIN carmaster CM on CM.carid= MC.carid 
INNER JOIN cabtype CT on CT.cabtypeid= CM.sizeid 
where date(SD.cur_datetime) =current_date and 
      MC.Cabid not in (select D.cabid from trncabdriver D 
                       where date(D.logintime)=current_date) and 
      SD.gpsdataid in (select max(SGD.gpsdataid) from server_gpsdata SGD 
                       where date(SGD.cur_datetime)=current_date 
                       group by SGD.cabid); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:25:33.943

以下应该显示性能的显着改进：

```
select SD.*, MC.*, TS.*, CM.*, CT.* from 
(select max(SGD.gpsdataid) maxgpsdataid from server_gpsdata SGD 
 where date(SGD.cur_datetime)=current_date 
 group by SGD.cabid) SDM
INNER JOIN server_gpsdata SD ON SDM.maxgpsdataid = SD.gpsdataid
INNER JOIN mstcab MC on MC.cabid= SD.cabid 
INNER JOIN server_tblstatus TS on TS.statusid= MC.CabStatusid 
INNER JOIN carmaster CM on CM.carid= MC.carid 
INNER JOIN cabtype CT on CT.cabtypeid= CM.sizeid 
LEFT JOIN trncabdriver D ON MC.Cabid= D.Cabid AND date(D.logintime)=current_date
where D.Cabid IS NULL 
```

请注意，现有查询和建议查询都返回 server_gpsdata、mstcab、server_tblstatus、carmaster 和 cabtype 表中的所有列 - 如果仅在查询中选择实际需要的列，则查询可能会执行得更好。

# android - 未调用 Android 应用内计费 (IAB) onIabSetupFinished

> ID：15476927
> 
> 赞同：0
> 
> 时间：2013-03-18T12:31:36.143
> 
> 标签：android, in-app-billing

[从这个](http://developer.android.com/training/in-app-billing/preparing-iab-app.html)开始，我已经实现了IAB ，并且当我执行时它似乎设置正确

```
mHelper.launchPurchaseFlow(this, "android.test.purchased", 10001,   
           mPurchaseFinishedListener, "bGoa+V7g/yqDXvKRqq+JTFn4uQZbPiQJo4pf9RzJ"); 
```

我被发送到正确的 IAB 以购买测试。

但是，下面的代码似乎从未输出任何日志记录

```
 mHelper = new IabHelper(this, KEY);

    mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
       public void onIabSetupFinished(IabResult result) {
          if (!result.isSuccess()) {
             // Oh noes, there was a problem.
             Log("Problem setting up In-app Billing: " + result);
          } else {
             Log("onIabSetupFinished " + result.getResponse());
             mHelper.queryInventoryAsync(mGotInventoryListener);
          }
       }
    }); 
```

*注意：正在调用我自己的静态 Log 方法，它没有问题。*

设置后，我想检查购买，但它似乎没有被调用，也没有`mPurchaseFinishedListener`。

任何人都知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:58:40.263

午饭后，我在 IanHelper.java 中打开了调试，这段代码现在似乎可以工作了。

```
boolean mDebugLog = true; // Line 75 
```

我看不出有任何理由为什么这以前不起作用。一定是用户错误，安装了错误的apk或类似的东西！现在我们永远不会知道！

# magento - Magento：对 Varien Data Collection 的项目进行排序

> ID：15476928
> 
> 赞同：0
> 
> 时间：2013-03-18T12:31:37.863
> 
> 标签：magento

我想使用自定义属性对 Magento 中的 Varien_Object 进行排序。
我得到了这样的东西：

```
$thing_1 = new Varien_Object();
$thing_1->setName('Richard');
$thing_1->setOrder(2);

$thing_2 = new Varien_Object();
$thing_2->setName('Jane');
$thing_2->setOrder(1);

$collection_of_things = new Varien_Data_Collection();
$collection_of_things
    ->addItem($thing_1)
    ->addItem($thing_2); 
```

我想对它进行 ASC 排序，以便`Jane`可以在前面`Richard`

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:00:34.263

Varien_Data_Collection 具有排序方法，但此方法在执行中呈现给 SQL 查询。

```
public function setOrder($field, $direction = self::SORT_ORDER_DESC) 
```

如果您手动添加项目，它将按照您添加它们的顺序添加索引，因此您需要先对对象进行排序，然后将它们添加到数据集合中

看这个问题[Sort array of objects by object fields](https://stackoverflow.com/questions/4282413/php-sort-array-of-objects-by-object-fields)

# ajax - ajaxSubmitButton beforeSend 添加变量到请求

> ID：15476931
> 
> 赞同：1
> 
> 时间：2013-03-18T12:31:51.543
> 
> 标签：ajax, yii

我有**ajaxSubmitButton**和**beforeSend**选项：

```
echo CHtml::ajaxSubmitButton('', CHtml::normalizeUrl(array('site/index')), 
    array(
        'dataType'=>'json',
        'data'=>'js:jQuery(this).parents("form").serialize()',
        'beforeSend'=>'js:function(data){
            // myArr is "good" array for param
            myData =$.param(myArr);
            /** SOMETHIG TO DO **/
        }',             

    )
); 
```

那么如何添加**myData**来请求数据并通过 post 请求发送呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:30:47.960

它比我预期的要容易，只需要创建返回我的参数的函数：

```
<script type="text/javascript">
function getMyData(){
    return $.param(myArr);
}
</script> 
```

然后将其与数据连接：

```
echo CHtml::ajaxSubmitButton('', CHtml::normalizeUrl(array('site/index')), 
    array(
        'dataType'=>'json',
        'data'=>'js:jQuery(this).parents("form").serialize()+"&"+getMyData()',
        'beforeSend'=>'js:function(data){
        }',             

    )
); 
```

# xpages - xPages Ext Lib ViewController

> ID：15476934
> 
> 赞同：1
> 
> 时间：2013-03-18T12:32:05.770
> 
> 标签：xpages, xpages-extlib

我发现了这个有趣的代码[链接](https://svn-166.openntf.org/svn/xpages/extlib/eclipse/plugins/com.ibm.xsp.extlib.group/src/com/ibm/xsp/extlib/data/ViewController.java)，它在扩展库中实现了一个 ViewController。

程序员如何从托管 bean 访问此类。我安装了扩展库（8.5.2）。但是 com.ibm.xsp.extlib.data.ViewController 无法解析。我可能在这里不知所措，但愿意冒险。

谢谢，

——杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:58:19.277

在 Java 透视图/包资源管理器视图中右键单击项目。使用 Build Path\Configure Build Path... 菜单。使用第四个选项卡订购和导出。勾选插件依赖项。现在您将可以访问 Java 代码中的 ExtLib 类。

不幸的是，您找到源代码的类不是 ExtLib 发行版（包`com.ibm.xsp.extlib.group`）的一部分，因此您不会找到它。

# c# - Excel 获取范围

> ID：15476937
> 
> 赞同：2
> 
> 时间：2013-03-18T12:32:15.650
> 
> 标签：c#, .net, excel

如何使用 Excel`get_range`将以下数据放入范围值。

我相信我应该能够使用它`get_range`来做到这一点，我只是不确定如何。

列

```
C1 = name, 
C5 = value, 
C10 = value 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T12:50:29.120

我假设您希望在列标题中使用这些。如果不是，请更改 get_Range() 中的单元格引用。以下将做到这一点：

```
using Excel = Microsoft.Office.Interop.Excel;

Excel.Range targetRange = targetSheet.get_Range("A1");
targetRange.Value = name;
Excel.Range targetRange = targetSheet.get_Range("E1");
targetRange.Value = value;
Excel.Range targetRange = targetSheet.get_Range("J1");
targetRange.Value = value; 
```

如果 A1 和 J1 之间没有要保留的内容，可以将值放入 object[,] 中，一次性设置 A1:J1 的值，这样会快一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-07T11:59:15.293

Excel`get_range`对我不起作用。起作用的是：

```
Range c1 = workSheet.Range[workSheet.Cells[1, 3]];
c1.Value = "name"; 
```

# java - 如果自动提交为真，@Transactional 注释是否有效？

> ID：15476939
> 
> 赞同：7
> 
> 时间：2013-03-18T12:32:18.613
> 
> 标签：java, spring, spring-mvc

如果打开自动提交，回滚会起作用吗？如果不是，那么关闭自动提交的含义是什么？

```
@Transactional(rollbackFor = {ManagerException.class})
public myMethod()....{
    System.out.printLn(my_spring_stored_procedure.getDataSource()
            .getConnection().getAutoCommit()) //true
    ....
    try {
        result = this.my_spring_stored_procedure.execute(params);
    }catch(DataAccessException e){
        throw new ManagerException(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:36:36.837

是的。如果你查看代码，你会发现当spring使用这种方式进行事务时。如果您的配置是自动提交为真，那么它会将其更改为假，并在事务后将其更改为真。

# c# - 将 Excel 文件（.xls 或 .xlsx）的内容放入数据集

> ID：15476941
> 
> 赞同：0
> 
> 时间：2013-03-18T12:32:23.333
> 
> 标签：c#, asp.net, exceldatareader

我有一个名为 test.xls 的 excel 文件，我想将 excel 工作表中的内容放入数据集中。是否有可能我尝试了一个代码，但它抛出了异常，这是我的代码

```
 string FilePath = Server.MapPath("portals\\_default") + "\\" + upprice.FileName;
 upprice.PostedFile.SaveAs(FilePath);
 FileStream stream = File.Open(FilePath, FileMode.Open,    FileAccess.Read);
 if (upprice.FileName.Contains(".xlsx"))
 {
  IExcelDataReader excelReader = ExcelReaderFactory.CreateBinaryReader(stream);
   DataSet result = excelReader.AsDataSet();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:43:38.750

我假设你正在使用这个[http://exceldatareader.codeplex.com/](http://exceldatareader.codeplex.com/)

从您的代码：

```
if (upprice.FileName.Contains(".xlsx"))
 {
  IExcelDataReader excelReader = ExcelReaderFactory.CreateBinaryReader(stream);
   DataSet result = excelReader.AsDataSet();
 }
 else if (upprice.FileName.Contains(".xls"))
 {
  IExcelDataReader excelReader = ExcelReaderFactory.CreateOpenXmlReader(stream);
  DataSet result = excelReader.AsDataSet();
 } 
```

这些测试是倒退的。“.xlsx”文件是压缩的 xml 文档。“xls”是较旧的二进制文件。还可以考虑使用 System.IO.Path.GetExtension() 来获取文件扩展名，因为您会注意到 Contains(".xls") 对于两种文件类型都是正确的。

# php - 正则表达式查找并在没有找到时替换

> ID：15476942
> 
> 赞同：1
> 
> 时间：2013-03-18T12:32:25.250
> 
> 标签：php, regex

我正在尝试删除作为 url 的字符串中的双正斜杠，但我不想删除`http://`url 将始终具有的位，到目前为止我已经想出了这个但它不起作用，

```
#[//[^(?<=http:)]]# 
```

它没有更换`http://`钻头，但也没有更换我确实希望它更换的部件。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:34:48.500

试试这个正则表达式，负后看：

```
/(?<!http:)\/\//i 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:40:56.013

```
preg_replace('/(?<!http:)\/\//i', '_', $url); 
```

# elasticsearch - 使用 Elasticsearch 进行简单的 AND 查询

> ID：15476943
> 
> 赞同：19
> 
> 时间：2013-03-18T12:32:26.270
> 
> 标签：elasticsearch

我正在尝试对两个指定字段进行简单查询，而手册和谷歌证明没有什么帮助。下面的示例应该很清楚我想要做什么。

```
{
  "query": {
      "and": {
        "term": {
          "name.family_name": "daniel",
          "name.given_name": "tyrone"
        }
      }
   }
} 
```

作为一个额外的问题，为什么它会找到带有“daniel”的“Daniel Tyrone”，但如果我搜索“Daniel”则不会。它的行为就像一个非常奇怪的反大小写敏感搜索。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T12:40:11.263

编辑：更新，对不起。`Term`在 Bool 查询中，每个字段都需要一个单独的对象：

```
{
  "query": {
    "bool": {
        "must" : [
          {
           "term": {
             "name.family_name": "daniel"
           }
         },
         {
           "term": {
             "name.given_name": "tyrone"
           }
         }
       ]
     }
   }
} 
```

ElasticSearch 不分析术语查询，这使得它们区分大小写。一个 Term 查询对 ES 说“*在索引中查找这个确切的标记，包括大小写和标点符号*”。

如果您想要不区分大小写，可以在分析器中添加关键字 + 小写过滤器。或者，您可以使用在查询时分析您的文本的查询（如`Match`查询）

Edit2：您也可以使用 And 或 Bool 过滤器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T13:15:45.250

我找到了在同一字段上至少进行多个文本比较的解决方案：

```
{
  "query": {
    "match": {
      "name.given_name": {
        "query": "daniel tyrone",
        "operator": "and"
      }
    }
  } 
```

我在多个领域发现了这个，这是正确的方法吗？

```
{
  "query": {
    "bool": {
      "must": [        
        {
          "match": {
            "name.formatted": {
              "query": "daniel tyrone",
              "operator": "and"
            }
          }
        },
        {
          "match": {
            "display_name": "tyrone"
          }
        }
      ]
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-01T04:09:54.103

这对我有用：`minimum_should_match`设置为，`2`因为`AND`查询的参数数量是`2`.

```
{
"query": {
    "bool": {
        "should": [
                {"term": { "name.family_name": "daniel"}},
                {"term": { "name.given_name": "tyrone" }}
            ],
    "minimum_should_match" : 2

        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-24T22:58:47.423

如果用 PHP 编写 json，这两个示例对我有用。

$activeFilters 只是一个逗号分隔的字符串，例如：'attractions, limpopo'

```
$articles = Article::searchByQuery(array(
        'match' => array(
            'cf_categories' => array(
                'query' => $activeFilters,
                'operator' =>'and'
            )
        )
    ));

    // The below code is also working 100%
    // Using Query String https://www.elastic.co/guide/en/elasticsearch/reference/1.4/query-dsl-query-filter.html
    // https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html
    /* $articles = Article::searchByQuery(array(
        'query_string' => array(
            'query' => 'cf_categories:attractions AND cf_categories:limpopo'
        )
    )); */ 
```

# xslt - 在 xsl 中访问参数的值

> ID：15476948
> 
> 赞同：0
> 
> 时间：2013-03-18T12:32:42.083
> 
> 标签：xslt

我正在尝试从以下代码中获取名为 Round 的模板参数的值，但它返回空白，谁能告诉我如何在模板中获取参数的值

```
<xsl:apply-templates select="//solution">
            <xsl:with-param name="isRound">N</xsl:with-param>
</xsl:apply-templates>

  <xsl:template match="solution">
    <xsl:param name="isRound" />
    <test>
      <xsl:value-of select="$isRound"/>
    </test>
  </xsl:template> 
```

这个的输出是：

```
<test></test> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:26:13.380

实际上这有效。我尝试如下。添加其他必要的东西，例如样式表根元素。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="/root">
        <xsl:apply-templates select="//solution">
            <xsl:with-param name="isRound">N</xsl:with-param>
        </xsl:apply-templates>
    </xsl:template>

    <xsl:template match="solution">
        <xsl:param name="isRound" />
            <test>
                <xsl:value-of select="$isRound"/>
            </test>
    </xsl:template>
</xsl:stylesheet> 
```

以输入为例。

```
<root>
    <solution/>
</root> 
```

结果

```
<?xml version="1.0"?>
<test>N</test> 
```

# c# - 返回表单时如何清除文本字段

> ID：15476951
> 
> 赞同：1
> 
> 时间：2013-03-18T12:32:44.940
> 
> 标签：c#, .net, winforms

一旦再次成为焦点，我想清除表单上的文本字段。这是我要清除名为`user_textbox`和的文本字段的表单的代码`pwd_textbox`

```
namespace RDASMS
{
    public partial class Login : Form
    {
        public Login()
        {
            InitializeComponent();
            user_textbox.Clear();
            pwd_textbox.Clear();
        }

        private void register_Click(object sender, EventArgs e)
        {
            Registration newuser = new Registration();
            newuser.Show();
            this.Hide();
        }

        private void submit_login_Click(object sender, EventArgs e)
        {
            int checkuser = string.CompareOrdinal(user_textbox.Text, "Admin");
            if (checkuser == 0)
            {
                int checkpwd = string.CompareOrdinal(pwd_textbox.Text, "rnsit123");
                if (checkpwd == 0)
                {
                    Admin newuser = new Admin();
                    newuser.RefToLogin = this;
                    newuser.Show();
                    this.Hide();
                }
                else
                    MessageBox.Show("Invalid Password");
            }
            else
                MessageBox.Show("Invalid Username");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:39:05.990

您可以处理 Form.Activated 事件来处理此问题，激活后清除您的文本框。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activated.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activated.aspx)

你可以放一些这样的代码：

```
foreach (Control c in yourForm.Controls)
        {
            if (c is TextBox)
            {
                ((TextBox)c).Clear();
            }
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:14:46.903

我使用 Form Activated 来确定表单是否重新成为焦点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:42:32.327

由于您调用`Hide`您的表单，这等于设置`Visible`为`false`，您可以使用表单的事件[VisibleChanged](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.visiblechanged.aspx)来清除您的文本字段。

```
private void Form_VisibleChanged(object sender, EventArgs e){
  if (this.Visible == true) {
    user_textbox.Clear();
    pwd_textbox.Clear();
  }
} 
```

# sqlite - 带有特殊字符的 SQLite LIKE 语句

> ID：15476957
> 
> 赞同：0
> 
> 时间：2013-03-18T12:33:13.400
> 
> 标签：sqlite, special-characters

我正在尝试在我的 SQLite 数据库上运行搜索查询，并且遇到了存储的特殊字符的问题。

我有一个名为 site_name 的列，其中包含城堡、城堡、教堂等记录。当有人使用城堡作为他们的搜索词时，我希望它拉出城堡记录。

有没有在 SQLite 中处理这个的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:37:14.040

看[这里](https://stackoverflow.com/questions/2841694/how-to-sql-compare-columns-when-one-has-accented-chars)

该链接引用了 Android 开发，但它似乎回答了您的问题。

# magento - 联邦快递集成在magento中失败

> ID：15476960
> 
> 赞同：0
> 
> 时间：2013-03-18T12:33:21.447
> 
> 标签：magento, ssl, magento-1.7, fedex

在 magento 中，我将 fedex 与指定的详细信息集成在一起

在我的 var flder 中有一个名为 shipping_fedex.log 的文件

它有错误是：

```
 [result] => Array
        (
            [error] => SSL support is not available in this build
            [code] => 0
        ) 
```

我现在应该做什么？

在运输方式中只`flat rate`显示，没有其他选项。.

那么magento应用程序中的问题是什么.....

我正在我的本地系统中进行测试...

如果在magento中对fedex运输有任何ssl支持？

# php - 如何使用 PHP imgttftext() 函数正确地将 unicode 字写入图像

> ID：15476962
> 
> 赞同：3
> 
> 时间：2013-03-18T12:33:28.603
> 
> 标签：php, image, unicode

我正在尝试使用 PHP 的 imgttftext() 函数在图像上写一些乌尔都语文本。除非我使用以下代码转换文本，否则它不会显示字符：

```
function convert($text){
    $out="";
    mb_language('uni');
    mb_internal_encoding('UTF-8');
    $text = mb_convert_encoding($text, 'HTML-ENTITIES',"UTF-8");
    $text = html_entity_decode($text,ENT_NOQUOTES, "ISO-8859-1");
    for($i = 0; $i < strlen($text); $i++) {
        $letter = $text[$i];
        $num = ord($letter);
        if($num>127) {
              $out .= "&#$num;";
        } else {
              $out .=  $letter;
        }
    }
    return $out;
} 
```

现在，文本例如 عچں（包含三个字符 عچں）作为单独的完整字符打印到图像上，而不是切割和连接字符以形成像 عچں 这样的乌尔都语单词。

[我在这个页面http://en.wikipedia.org/wiki/List_of_Unicode_characters#Arabic](http://en.wikipedia.org/wiki/List_of_Unicode_characters#Arabic)中使用了带有代码 U+0627、U+0628、U+0629 等的字符 اب ت ث

我在这里分享了代码：[https ://code.google.com/p/urdu-captcha/downloads/list](https://code.google.com/p/urdu-captcha/downloads/list)

> 注意：我在提供的删除代码中的字符之间添加了空格，这对文本在图像上的显示方式没有影响。

我如何让它写出连接在一起的字符以形成正确的单词？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T10:08:00.010

您将需要一个额外的库来执行阿拉伯字形连接。查看[AR-PHP](http://ar-php.org/Glyphs-example-php-arabic.html)。

# javascript - javascript：window.open

> ID：15476968
> 
> 赞同：0
> 
> 时间：2013-03-18T12:33:56.470
> 
> 标签：javascript, vb.net, html

我在 vb.net 2005 工作。我可以使用 process.start() 启动新浏览器。现在我必须以特定尺寸打开该浏览器（比如高度：300 宽度：500）

```
Process.Start("firefox.exe", "abc.html") 
```

我在加载 abc.html 时编写了以下代码

```
var myRef = window.open('abc.html','','left=20,top=20,width=300,height=500'); 
```

但它不会调整大小。

如果我在此页面上添加 1 个按钮并单击它（通过在其单击事件上编写相同的代码），则会打开一个具有预期大小的新窗口。

我在某个地方出错了吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:10:22.810

默认情况下， Firefox 不允许[页面调整窗口大小](https://bugzilla.mozilla.org/show_bug.cgi?id=565541)。另请注意，如果您已经运行了 Firefox，则浏览器首选项将决定您是否获得新窗口或选项卡。您可以使用`-no-remote`命令行标志强制使用单独的 Firefox 实例，但是您将无法使用默认配置文件（每个配置文件只有一个 Firefox 实例）。

我的问题是：

*   为什么要从另一个可执行文件启动 Firefox，而不是让用户单击链接并在默认浏览器中打开它？
*   如果您确实需要从可执行文件启动 Firefox，为什么要花费所有这些精力来覆盖用户的偏好和设置？
*   如果您从一个可执行文件启动并且不惜一切代价想惹恼您的用户，为什么不[使用普通的 Windows API](https://stackoverflow.com/q/692742/8655)查找并调整 Firefox 窗口的大小呢？

# php - 将数据插入mysql数据库

> ID：15476970
> 
> 赞同：0
> 
> 时间：2013-03-18T12:34:11.977
> 
> 标签：php, mysql

我试图将数据插入到我的 mysql 数据库中。它成功插入数据，但问题是每次我加载页面时都会收到以下错误。

```
 Notice: Undefined index: comment in 
   C:\wamp\www\CMS\addnews.php on line 42
   Call Stack
   #    Time    Memory  Function    Location
   1    0.0004  674184  {main}( )   ..\addnews.php:0 
```

我知道 mysql 扩展已正式贬值，所以请不要对此发表评论。

这是我的代码

```
 <form id="insNews" name="insNews" method="POST" action="addnews.php">

                           <textarea rows="20" cols="90" name="comment"></textarea>
                           <input type="submit" name="InsertNews" id="InsertNews">
                       <?php
                          include 'db.php';
                          $comment=$_POST['comment']; // **ERROR HERE**
                          $tablename="news";
                          $sql="INSERT INTO $tablename(news_content)VALUES('$comment')";

                             if(isset($_POST['InsertNews'])) 
                             {
                             mysql_query($sql);
                            }

                      ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:36:56.647

这意味着`$_POST['comment']`尚未定义。换句话说，`comment`您的表单尚未提交名为字段的值。

所以你要么：

1.  需要向您的用户抛出错误并告诉他们评论是必填字段并确保在将其提交到数据库之前提供了一个值

2.  *在将值分配给变量之前*检查是否存在值。如果没有，分配一个默认值。

仅供参考，[请不要`mysql_*`在新代码中使用函数](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

您还对[SQL 注入持开放态度](https://stackoverflow.com/q/60174)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:37:28.580

当您生成包含表单的 HTML 文档时，您似乎正在尝试从表单中读取数据。

由于此时尚未提交表单，因此数据将不存在。

您可以：

1.  将您的表单处理移动到不同的脚本，并在`action`
2.  在现有脚本中分支您的逻辑。测试请求方法是否为 POST，然后决定是否要处理表单数据和/或基于此显示表单。

无论哪种方式，在尝试读取[数组键之前测试它们是否存在。](http://www.php.net/manual/en/function.array-key-exists.php)如果他们不这样做，请提供您自己的错误状态，而不是检查用户的原始 PHP 错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T12:37:31.000

您必须检查 $_POST['comment'] 是否成功，然后执行查询

```
if isset($_POST['comment']){
$comment=$_POST['comment'];
$tablename="news";
$sql="INSERT INTO $tablename(news_content)VALUES('$comment')";

     mysql_query($sql);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T12:38:55.833

您必须检查变量是否存在。

```
<form id="insNews" name="insNews" method="POST" action="addnews.php">
    <textarea rows="20" cols="90" name="comment"></textarea>
    <input type="submit" name="InsertNews" id="InsertNews">
</form>

<?php
include 'db.php';
if (!empty($_POST['comment'])) {
    $comment   = $_POST['comment']; // **ERROR HERE**
    $tablename = "news";
    $sql="INSERT INTO $tablename(news_content)VALUES('" . mysql_real_escape_string($comment) . "')";

    if(isset($_POST['InsertNews'])) 
    {
        mysql_query($sql);
    }
} 
```

?>

但我想通知您 mysql_* lib 已弃用。改用 PDO 或 mysqli。另外，要注意 Sql 注入，如果要使用 mysql_* 函数，请使用 mysql_real_escape_string。

# python - 加载 Python 源代码/二进制文件而不添加到 sys.modules

> ID：15476971
> 
> 赞同：2
> 
> 时间：2013-03-18T12:34:13.497
> 
> 标签：python, dynamic, import, module

我想加载 Python 代码（如果可能的话，使用任意文件扩展名，甚至从内存、源代码或二进制文件）而不将其添加到`sys.modules`. 使用`imp.load_source`工程加载文件，但返回的模块被添加到现有模块中`sys.modules`，甚至可能与现有模块连接（参见[这个问题](https://stackoverflow.com/questions/15082857/loading-modules-by-imp-load-source-with-same-name-resulting-merger-of-the-module)）！

所以，我目前正在做的是使用`__import__()`内置的。虽然它允许我从包中导入，但我无法加载任意文件。

```
try:
    m = __import__(name)
    for n in name.split('.')[1:]:
        m = getattr(m, n)
    return m
except:
    raise
finally:
    # Restore the old module configuration. Only modules that have
    # not been in sys.path before will be removed.
    for k, v in sys.modules.items():
        if k not in prev_modules and self.is_local(v) or not v:
            del sys.modules[k]
        else:
            sys.modules[k] = v 
```

1.  删除所有在导入之前没有出现的模块对我来说是一种非常老套的方法。
2.  当同名的模块已经存在时，它不会被重新加载。
3.  我无法加载任意文件，甚至无法从内存中加载。

`exec`出于安全原因，我试图避免该声明。评估的源可以使用（并且肯定有更多的可能性）`exec`侵入我的应用程序。`sys._getframe()`我已经查看了 django`load`标签的实现，但它也只是使用`__import_()`。

有没有办法从一个安全、独立的文件（甚至内存）加载 Python 代码（源代码或二进制代码`sys.modules`）？在最好的情况下，它不仅可以让我从内存中加载文件，还可以加载像`__import__()`函数一样的完整包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:31:28.003

使用 CPython 解释器，我不相信这是可能的。但是，PyPy 提供了一个沙盒环境，可以让您轻松完成任务。

[有关详细信息，请查看有关沙盒的 PyPy 文档。](http://doc.pypy.org/en/latest/sandbox.html)

# php - php md5 有问题吗？

> ID：15476974
> 
> 赞同：0
> 
> 时间：2013-03-18T12:34:18.620
> 
> 标签：php, md5, unique

我有两个简单的问题：

1.  md5 是十六进制还是字母数字？
2.  我可以用数字更改每个单词但保持 md5 的唯一性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:36:46.723

1.

> 将哈希作为 32 个字符的十六进制数返回。

来自[PHP](http://php.net/md5)

2 有合理的概率，是的。但是我们讨论的是散列算法，所以你需要 [了解 MD5 冲突](http://www.mathstat.dal.ca/~selinger/md5collision/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T12:36:44.843

回答：

1.十六进制 2.是的，你可以

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T12:43:50.597

1.  MD5 散列通常表示为 32 位长的十六进制数。这正是 PHP 为您提供的。这是一个例子：

    `AB654FEC7EC9054CD3289FAFBF4356FC`

2.  显然，MD5 散列不是唯一的。但是很难找到碰撞，而且很可能不会。这种算法专门设计用于响应小的修改产生巨大的变化。

**其他资源：**

*   [您可以在Wikipedia](http://en.wikipedia.org/wiki/MD5)上找到有关 MD5 哈希的更多信息。
*   这是一篇关于[碰撞](http://en.wikipedia.org/wiki/Collision_resistant)的文章，为您的问题 #2 提供更大的图景。
*   您可能还想查看 md5() 的[php 手册页](http://php.net/manual/fr/function.md5.php)。

# android - 尺寸与屏幕密度有关吗？

> ID：15476979
> 
> 赞同：1
> 
> 时间：2013-03-18T12:34:30.593
> 
> 标签：android, android-layout, hdpi

这是我第一次在平板电脑上观看我的应用程序，我总是使用手机。

这是一个nexus 7，而不是美丽。

![在此处输入图像描述](../Images/3260eab4c3018d318e75ff5e290c211c.png)

我添加了 al、m、h 和 xh，它使用 h 密度，但按钮很小。

最后一个按钮的宽度与背景相同，但它不固定屏幕。

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
android:background="@drawable/background"
>

    <ImageButton
        android:id="@+id/account_but"
        android:background="@null"
        android:contentDescription="@string/accountDesc"
        android:layout_marginTop="50dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/boton_usos" />

    <ImageButton
        android:id="@+id/alquilar_but"
        android:background="@null"
        android:contentDescription="@string/alquilarDesc"
        android:layout_marginTop="5dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/boton_alquilar" />

    <ImageButton
        android:id="@+id/paradas_but"
        android:background="@null"
        android:contentDescription="@string/paradasDesc"
        android:layout_marginTop="5dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/boton_paradas" />

    <ImageButton
        android:id="@+id/noticias_but"
        android:background="@null"
        android:contentDescription="@string/noticiasDesc"
        android:layout_marginTop="5dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/boton_noticias" />

    <ImageButton
        android:id="@+id/incidencia_but"
        android:background="@null"
        android:contentDescription="@string/incidenciaDesc"
        android:layout_marginTop="5dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/boton_incidencia" />

     <ImageButton
        android:id="@+id/informacion_but"
        android:background="@null"
        android:contentDescription="@string/infoDesc"
        android:layout_marginTop="5dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/boton_informacion" />

    <ImageButton
            android:id="@+id/banner_but"
            android:background="@null"
            android:contentDescription="@string/infoDesc"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dip"
            android:src="@drawable/banner" />  

    </LinearLayout> 
```

我怎样才能使 hdpi 按钮变大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:39:40.187

最好包括整个布局。您的父布局之一似乎对宽度有限制。

# android - Android sharedPreferences 使用 Preference 像按钮一样工作

> ID：15476981
> 
> 赞同：1
> 
> 时间：2013-03-18T12:34:36.563
> 
> 标签：android, sharedpreferences

我正在使用 sharedpreferences 框架，但在与其中一个首选项交互时遇到了一些麻烦。我想启用我的选项之一来重置我的应用程序。为此，我希望屏幕上出现一个对话框，并带有确定和取消。如果用户然后单击确定我想做一堆东西。

我可以使用 ImageView 侦听器在正常活动中编写所有这些内容。但在 SharedPreferences 框架中，我不知道如何添加侦听器和操作。我想作为额外的奖励，我还需要与当前的 SharedPreferences 状态进行交互吗？

目前我有这个 XML

```
<PreferenceCategory  android:title="Reset App">

    <Preference
        android:title="Reset App?"
        android:summary="Click here to reset the App to defaults."
        android:key="resetapp" />

</PreferenceCategory>

<PreferenceCategory  android:title="General Settings">
 <CheckBoxPreference
         android:title="Enable Sounds?"
         android:defaultValue="true"
         android:summary="A Tick here will enable sounds throughout body-mix-ology."
         android:key="enablesounds" />
 <CheckBoxPreference
         android:title="High performance Phone?"
         android:defaultValue="false"
         android:summary="If you have a high performance phone tick here to speed up body switching."
         android:key="highperformancephone" />
  </PreferenceCategory> 
```

这是我的类文件

```
public class Preferences extends PreferenceActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.layout.preferences);

        //TODO
        // act on resetapp
        // prompt onscreen confirmation.

    }

    public AlertDialog createDialog() {

        return new AlertDialog.Builder(this)
        .setTitle("Reset App?")
        .setMessage("Are you sure? You will wipe all data from the app.")
        .setPositiveButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                Toast.makeText(getBaseContext(), "App has been reset!", Toast.LENGTH_SHORT).show();
                //TODO
                // clear DB
                // reset sharedprefs.
            }
        })
        .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {

                Toast.makeText(getBaseContext(), "App was not reset", Toast.LENGTH_SHORT).show();

            }
        })
        .show();

   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T12:42:24.173

使用“您确定要这样做吗？”的 ListPreference 怎么样？并列出值“是”和“否”，默认为“否”。然后像这样回复任何“是”确认：

```
public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {
    if (key.equals("resetapp") && prefs.getString(key,"").equals("Yes")) {
        // reset the value to "No" so that next time a preference change will be triggered
        prefs.edit().putString(key, "No").commit();

        // now do your awesome reset stuff ...
        Preference someOtherPref = findPreference(otherKey);
        ...
    }
} 
```

不要忘记将您的类定义更改为：

```
public class Preferences extends PreferenceActivity implements OnSharedPreferenceChangeListener { 
```

并注册事件监听器：

```
@Override
protected void onResume() {
    super.onResume();
    getPreferenceScreen().getSharedPreferences()
            .registerOnSharedPreferenceChangeListener(this);
}

@Override
protected void onPause() {
    super.onPause();
    getPreferenceScreen().getSharedPreferences()
            .unregisterOnSharedPreferenceChangeListener(this);
} 
```

# python - 将json字符串反序列化为python中的对象

> ID：15476983
> 
> 赞同：82
> 
> 时间：2013-03-18T12:34:38.093
> 
> 标签：python, json

我有以下字符串

```
{"action":"print","method":"onData","data":"Madan Mohan"} 
```

我想反序列化为类的对象

```
class payload
    string action
    string method
    string data 
```

我正在使用 python 2.6 和 2.7

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-03-18T12:47:00.280

```
>>> j = '{"action": "print", "method": "onData", "data": "Madan Mohan"}'
>>> import json
>>> 
>>> class Payload(object):
...     def __init__(self, j):
...         self.__dict__ = json.loads(j)
... 
>>> p = Payload(j)
>>>
>>> p.action
'print'
>>> p.method
'onData'
>>> p.data
'Madan Mohan' 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-05-30T00:21:32.543

详细说明萨米的回答：

从[文档](http://docs.python.org/2/library/json.html)：

```
class Payload(object):
    def __init__(self, action, method, data):
        self.action = action
        self.method = method
        self.data = data

import json

def as_payload(dct):
    return Payload(dct['action'], dct['method'], dct['data'])

payload = json.loads(message, object_hook = as_payload) 
```

我的反对意见

```
.__dict__ 
```

解决方案是，虽然它可以完成工作并且简洁，但 Payload 类变得完全*通用*- 它不记录其字段。

例如，如果 Payload 消息具有意外的格式，而不是在创建 Payload 时抛出 key not found 错误，在使用 payload 之前不会生成错误。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-11-16T18:32:46.560

如果你在 Python 3.6 中接受类型提示，你可以这样做：

```
def from_json(data, cls):
    annotations: dict = cls.__annotations__ if hasattr(cls, '__annotations__') else None
    if issubclass(cls, List):
        list_type = cls.__args__[0]
        instance: list = list()
        for value in data:
            instance.append(from_json(value, list_type))
        return instance
    elif issubclass(cls, Dict):
            key_type = cls.__args__[0]
            val_type = cls.__args__[1]
            instance: dict = dict()
            for key, value in data.items():
                instance.update(from_json(key, key_type), from_json(value, val_type))
            return instance
    else:
        instance : cls = cls()
        for name, value in data.items():
            field_type = annotations.get(name)
            if inspect.isclass(field_type) and isinstance(value, (dict, tuple, list, set, frozenset)):
                setattr(instance, name, from_json(value, field_type))
            else:
                setattr(instance, name, value)
        return instance 
```

然后，您可以像这样实例化类型化的对象：

```
class Bar:
    value : int

class Foo:
    x : int
    bar : List[Bar]

obj : Foo = from_json(json.loads('{"x": 123, "bar":[{"value": 3}, {"value": 2}, {"value": 1}]}'), Foo)
print(obj.x)
print(obj.bar[2].value) 
```

这种语法虽然需要 Python 3.6，但并不涵盖所有情况——例如，支持 typing.Any... 但至少它不会污染需要用额外的 init/tojson 方法反序列化的类。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-02-01T19:14:07.843

如果你想节省代码行并留下最灵活的解决方案，我们可以将 json 字符串反序列化为动态对象：

```
p = lambda:None
p.__dict__ = json.loads('{"action": "print", "method": "onData", "data": "Madan Mohan"}') 
```

>>>> p.action
输出：u'print'

>>>> p.method
输出：u'onData'

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-05-04T12:38:42.333

我以为我为解决这个“挑战”而失去了所有的头发。我遇到了以下问题：

1.  如何反序列化嵌套对象、列表等
2.  我喜欢具有指定字段的构造函数
3.  我不喜欢动态字段
4.  我不喜欢 hacky 解决方案

我发现了一个名为的库`jsonpickle`，它已被证明非常有用。

安装：

```
pip install jsonpickle 
```

这是一个将嵌套对象写入文件的代码示例：

```
import jsonpickle

class SubObject:
    def __init__(self, sub_name, sub_age):
        self.sub_name = sub_name
        self.sub_age = sub_age

class TestClass:

    def __init__(self, name, age, sub_object):
        self.name = name
        self.age = age
        self.sub_object = sub_object

john_junior = SubObject("John jr.", 2)

john = TestClass("John", 21, john_junior)

file_name = 'JohnWithSon' + '.json'

john_string = jsonpickle.encode(john)

with open(file_name, 'w') as fp:
    fp.write(john_string)

john_from_file = open(file_name).read()

test_class_2 = jsonpickle.decode(john_from_file)

print(test_class_2.name)
print(test_class_2.age)
print(test_class_2.sub_object.sub_name) 
```

输出：

```
John
21
John jr. 
```

网址：http: [//jsonpickle.github.io/](http://jsonpickle.github.io/)

希望它会节省你的时间（和头发）。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-02-24T13:38:07.860

在最新版本的 python 中，您可以使用[marshmallow-dataclass](https://pypi.org/project/marshmallow-dataclass)：

```
from marshmallow_dataclass import dataclass

@dataclass
class Payload
    action:str
    method:str
    data:str

Payload.Schema().load({"action":"print","method":"onData","data":"Madan Mohan"}) 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2016-06-07T14:14:32.433

我更喜欢添加一些字段检查，例如，这样你就可以捕捉到错误，比如当你得到无效的 json，或者不是你期望的 json，所以我使用了命名元组：

```
from collections import namedtuple
payload = namedtuple('payload', ['action', 'method', 'data'])
def deserialize_payload(json):
    kwargs =  dict([(field, json[field]) for field in payload._fields]) 
    return payload(**kwargs) 
```

当您正在解析的 json 与您希望它解析的内容不匹配时，这会给您带来很好的错误

```
>>> json = {"action":"print","method":"onData","data":"Madan Mohan"}
>>> deserialize_payload(json)
payload(action='print', method='onData', data='Madan Mohan')
>>> badjson = {"error":"404","info":"page not found"}
>>> deserialize_payload(badjson)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in deserialize_payload
KeyError: 'action' 
```

如果你想解析嵌套关系，例如`'{"parent":{"child":{"name":"henry"}}}'` 你仍然可以使用 namedtuples，甚至是一个更可重用的函数

```
Person = namedtuple("Person", ['parent'])
Parent = namedtuple("Parent", ['child'])
Child = namedtuple('Child', ['name'])
def deserialize_json_to_namedtuple(json, namedtuple):
    return namedtuple(**dict([(field, json[field]) for field in namedtuple._fields]))

def deserialize_person(json):
     json['parent']['child']  = deserialize_json_to_namedtuple(json['parent']['child'], Child)
     json['parent'] =  deserialize_json_to_namedtuple(json['parent'], Parent) 
     person = deserialize_json_to_namedtuple(json, Person)
     return person 
```

给你

```
>>> deserialize_person({"parent":{"child":{"name":"henry"}}})
Person(parent=Parent(child=Child(name='henry')))
>>> deserialize_person({"error":"404","info":"page not found"})
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in deserialize_person
KeyError: 'parent' 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-03-18T12:36:55.103

您可以专门为对象创建编码器：http: [//docs.python.org/2/library/json.html](http://docs.python.org/2/library/json.html)

```
import json
class ComplexEncoder(json.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, complex):
            return {"real": obj.real,
            "imag": obj.imag,
            "__class__": "complex"}
        return json.JSONEncoder.default(self, obj)

print json.dumps(2 + 1j, cls=ComplexEncoder) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-05-21T21:21:08.497

另一种方法是简单地将 json 字符串作为 dict 传递给对象的构造函数。例如，您的对象是：

```
class Payload(object):
    def __init__(self, action, method, data, *args, **kwargs):
        self.action = action
        self.method = method
        self.data = data 
```

以下两行python代码将构建它：

```
j = json.loads(yourJsonString)
payload = Payload(**j) 
```

基本上，我们首先从 json 字符串创建一个通用的 json 对象。然后，我们将通用 json 对象作为 dict 传递给 Payload 类的构造函数。Payload 类的构造函数将 dict 解释为关键字参数并设置所有适当的字段。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-10-04T10:05:12.837

[pydantic](https://github.com/samuelcolvin/pydantic/)是一个越来越受欢迎的 python 3.6+ 项目库。它主要使用类型提示进行数据验证和设置管理。

使用不同类型的基本示例：

```
from pydantic import BaseModel

class ClassicBar(BaseModel):
    count_drinks: int
    is_open: bool

data = {'count_drinks': '226', 'is_open': 'False'}
cb = ClassicBar(**data)
>>> cb
ClassicBar(count_drinks=226, is_open=False) 
```

我喜欢 lib 的地方在于你可以免费获得很多好东西，比如

```
>>> cb.json()
'{"count_drinks": 226, "is_open": false}'
>>> cb.dict()
{'count_drinks': 226, 'is_open': False} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-03-21T06:06:47.210

虽然[Alex 的](https://stackoverflow.com/a/16826012/6687477)回答为我们指出了一种很好的技术，但当我们有嵌套对象时，他给出的实现会遇到问题。

```
class more_info
    string status

class payload
    string action
    string method
    string data
    class more_info 
```

使用以下代码：

```
def as_more_info(dct):
    return MoreInfo(dct['status'])

def as_payload(dct):
    return Payload(dct['action'], dct['method'], dct['data'], as_more_info(dct['more_info']))

payload = json.loads(message, object_hook = as_payload) 
```

`payload.more_info`也将被视为`payload`会导致解析错误的实例。

来自官方文档：

> object_hook 是一个可选函数，将使用任何对象文字解码的结果（字典）调用。将使用 object_hook 的返回值而不是 dict。

因此，我更愿意提出以下解决方案：

```
class MoreInfo(object):
    def __init__(self, status):
        self.status = status

    @staticmethod
    def fromJson(mapping):
        if mapping is None:
            return None

        return MoreInfo(
            mapping.get('status')
        )

class Payload(object):
    def __init__(self, action, method, data, more_info):
        self.action = action
        self.method = method
        self.data = data
        self.more_info = more_info

    @staticmethod
    def fromJson(mapping):
        if mapping is None:
            return None

        return Payload(
            mapping.get('action'),
            mapping.get('method'),
            mapping.get('data'),
            MoreInfo.fromJson(mapping.get('more_info'))
        )

import json
def toJson(obj, **kwargs):
    return json.dumps(obj, default=lambda j: j.__dict__, **kwargs)

def fromJson(msg, cls, **kwargs):
    return cls.fromJson(json.loads(msg, **kwargs))

info = MoreInfo('ok')
payload = Payload('print', 'onData', 'better_solution', info)
pl_json = toJson(payload)
l1 = fromJson(pl_json, Payload) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-03-28T19:59:20.493

有不同的方法可以将 json 字符串反序列化为对象。以上所有方法都是可以接受的，但我建议使用库来防止重复键问题或嵌套对象的序列化/反序列化。

[Pykson，是一个用于 Python 的 JSON 序列化器和反序列化器](https://github.com/sinarezaei/pykson)，可以帮助您实现。只需将 Payload 类模型定义为 JsonObject，然后使用 Pykson 将 json 字符串转换为对象。

```
from pykson import Pykson, JsonObject, StringField

class Payload(pykson.JsonObject):
    action = StringField()
    method = StringField()
    data = StringField()

json_text = '{"action":"print","method":"onData","data":"Madan Mohan"}'
payload = Pykson.from_json(json_text, Payload) 
```

# vba - 使用当前打开的电子邮件

> ID：15476986
> 
> 赞同：15
> 
> 时间：2013-03-18T12:34:44.657
> 
> 标签：vba, outlook

我想获得活动打开的 MailItem （无论是新邮件还是收到的邮件）。当用户运行我的宏时，我需要向该邮件添加一些内容。我正在使用 Outlook 2003 和 VBA。

我发现了这个：[如何使用 VBA 在 Outlook 中当前打开的窗口中获取对邮件项目的引用？](https://stackoverflow.com/questions/4134967/how-do-you-get-a-reference-to-the-mail-item-in-the-current-open-window-in-outloo)但是它不起作用，因为`TypeName(Application.ActiveWindow)`设置为空。我也试过`Set Mail = Application.ActiveInspector.currentItem`，但它也不起作用。

*关于ActiveInspector*的事情，我一定有一些不明白的地方。

**根据要求，这是位于专用模块中的过程/宏，当用户单击方法中添加的菜单按钮时`Application_Startup()`调用**：

```
Sub myMacro()
    Dim NewMail As Outlook.MailItem
    Set NewMail = Application.ActiveInspector.currentItem
End Sub 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T17:18:21.157

我不知道你的代码到底有什么问题。但是，一方面，您并没有验证新的、可编辑的电子邮件是否已打开。以下概念验证完全符合我的想法：在正在撰写的活动电子邮件中插入一些文本。如果这是不可能的，它会显示一个消息框来解释原因。

插入文本的部分仅在 Word 用作电子邮件编辑器时才有效（[在 Outlook 2010+ 中总是如此](http://answers.microsoft.com/en-us/office/forum/office_2010-outlook/can-i-turn-off-word-as-the-email-editor-in-outlook/d25fb752-4ff4-4aa0-9d6f-b07c3efc09d2)）。如果不是，您将不得不直接解析和更新 Body 或 HTMLBody 文本。

```
Sub InsertText()
    Dim myText As String
    myText = "Hello world"

    Dim NewMail As MailItem, oInspector As Inspector
    Set oInspector = Application.ActiveInspector
    If oInspector Is Nothing Then
        MsgBox "No active inspector"
    Else
        Set NewMail = oInspector.CurrentItem
        If NewMail.Sent Then
            MsgBox "This is not an editable email"
        Else
            If oInspector.IsWordMail Then
                ' Hurray. We can use the rich Word object model, with access
                ' the caret and everything.
                Dim oDoc As Object, oWrdApp As Object, oSelection As Object
                Set oDoc = oInspector.WordEditor
                Set oWrdApp = oDoc.Application
                Set oSelection = oWrdApp.Selection
                oSelection.InsertAfter myText
                oSelection.Collapse 0
                Set oSelection = Nothing
                Set oWrdApp = Nothing
                Set oDoc = Nothing
            Else
                ' No object model to work with. Must manipulate raw text.
                Select Case NewMail.BodyFormat
                    Case olFormatPlain, olFormatRichText, olFormatUnspecified
                        NewMail.Body = NewMail.Body & myText
                    Case olFormatHTML
                        NewMail.HTMLBody = NewMail.HTMLBody & "<p>" & myText & "</p>"
                End Select
            End If
        End If
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T18:03:40.310

你的意思是当前选择的消息吗？在这种情况下，您需要使用`Application.ActiveExplorer.Selection`集合，而不是`Application.ActiveInspector.CurrentItem`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-11T06:04:22.973

```
 '
            Dim myOlExp As Outlook.Explorer
            Dim myOlSel As Outlook.Selection

            Set myOlExp = Application.ActiveExplorer
            Set myOlSel = myOlExp.Selection
            'MsgBox myOlSel.item(1)

            Dim selectedFolder As Outlook.MAPIFolder
              Set selectedFolder = myOlExp.CurrentFolder
            Dim itemMessage As String
              itemMessage = "Item is unknown."

             Dim expMessage As String
             expMessage = "Your current folder is " & selectedFolder.Name & "." & vbCrLf

             If myOlSel.Count > 0 Then

                             Dim selObject As Object
                            Set selObject = myOlSel.item(1)

                            If (TypeOf selObject Is Outlook.mailItem) Then
                                Dim mailItem As Outlook.mailItem
                                Set mailItem = selObject
                                itemMessage = "The item is an e-mail message." & " The subject is " & mailItem.Subject & "."
                                mailItem.Display (False)

                            ElseIf (TypeOf selObject Is Outlook.contactItem) Then
                                Dim contactItem As Outlook.contactItem
                                Set contactItem = selObject
                                itemMessage = "The item is a contact." & " The full name is " & contactItem.Subject & "."
                                contactItem.Display (False)

                            ElseIf (TypeOf selObject Is Outlook.AppointmentItem) Then
                                Dim apptItem As Outlook.AppointmentItem
                                Set apptItem = selObject
                                itemMessage = "The item is an appointment." & apptItem.Subject & "."

                            ElseIf (TypeOf selObject Is Outlook.taskItem) Then
                                Dim taskItem As Outlook.taskItem
                                Set taskItem = selObject
                                itemMessage = "The item is a task." & " The body is " & taskItem.Body & "."
                            ElseIf (TypeOf selObject Is Outlook.meetingItem) Then
                                Dim meetingItem As Outlook.meetingItem
                                Set meetingItem = selObject
                                itemMessage = "The item is a meeting item. " & "The subject is " & meetingItem.Subject & "."
                            End If
                        End If
                        expMessage = expMessage & itemMessage
                    MsgBox (expMessage)
            End Sub 
```

# tcl - 如何更改关联数组中值的键（索引）？

> ID：15476990
> 
> 赞同：0
> 
> 时间：2013-03-18T12:35:03.160
> 
> 标签：tcl

我需要更改数组中的键。

```
array set sports {
    {dhoni} cricket
    {nadal} tennis
    {messi} football
} 
```

更改密钥后的预期数组：

```
array set sports {
    {dhoni} cricket
    {federer} tennis
    {messi} football
} 
```

我需要将网球的键从更改`nadal`为`federer`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:41:50.263

您需要 2 行：

1.  设置新密钥

    ```
    set sports(federer) $sports(nadal) 
    ```

2.  删除旧密钥

    ```
    unset sports(nadal) 
    ```

# android - 在android中使用canvas编辑文本

> ID：15476995
> 
> 赞同：1
> 
> 时间：2013-03-18T12:35:27.003
> 
> 标签：android, canvas

在我的应用程序中，我有 1 个活动类，对于该活动类，我设置了布局，这是另一个类文件，而不是“Xml 文件”。在那个类文件中，我试图放置一个“编辑文本”，它来了但不起作用（我无法输入任何输入，即使它是可点击的）。我在“SO”中尝试了很多帖子，但我仍然无法得到那。

我的代码：

活动：

```
public class MainActivity extends Activity 
{
    HomeDesign hm;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        hm = new HomeDesign(this);
        setContentView(hm);

//      Canvas canvas = new Canvas();
//      Bitmap image = BitmapFactory.decodeResource(getResources(), R.drawable.sabrerez);
//      canvas.drawBitmap(image, 10, 10, null);
//      ImageView img = (ImageView) findViewById(R.id.logo);
//      
//      img.setBackgroundResource(R.drawable.sabrerez);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

查看类：

```
 public void draw(Canvas c)
            {
               brush.setColor(Color.parseColor("#617981"));
               c.drawRect(0, 0, c.getWidth(), 70, brush);
               c.drawBitmap(bm, 10, 10, brush);
               brush.setColor(Color.parseColor("#ebecec"));
               c.drawRect(0, 70, c.getWidth(),c.getHeight(), brush);
               brush.setStrokeWidth(3);
               brush.setColor(Color.parseColor("#617981"));
               brush.setTextSize(15);
               c.drawText("Username", c.getWidth()/8,c.getHeight()/2 - 100, brush);
               c.drawText("Password", c.getWidth()/8,c.getHeight()/2 - 50, brush);
               brush.setColor(Color.parseColor("#000000"));

               FrameLayout layout = new FrameLayout(context);

             username= new EditText(context);
//       LinearLayout.LayoutParams params2 = (LinearLayout.LayoutParams) username.getLayoutParams();
//       LinearLayout.LayoutParams params2 = new LinearLayout.LayoutParams(40,40);
//       username.setText("" + i);
       username.setFocusableInTouchMode(true);
       username.setFocusable(true);
       username.requestFocus();
       username.setEnabled(true);

       username.setRawInputType(InputType.TYPE_TEXT_FLAG_MULTI_LINE);
       username.setInputType(InputType.TYPE_CLASS_TEXT);

               layout.measure(c.getWidth(),c.getHeight());
        //       layout.
               layout.layout(10, 200, 100, 220);

        //       layout.layout(c.getWidth()/8+100,c.getHeight()/2 - 110 - 10,c.getWidth()/8+250,c.getHeight()/2 - 100 + 10);
        //       layout.layout(100,100,100,80);

               layout.draw(c);
    } 
```

如何解决这个问题？

# javascript - javascript - UTC 日期对象操作

> ID：15476996
> 
> 赞同：1
> 
> 时间：2013-03-18T12:35:28.237
> 
> 标签：javascript, date, utc

UTC 的事情真的让我发疯了......我试图在 UTC 中获得现场日期和时间，因此它不会影响任何时区。

我做什么，我创建一个日期对象

```
var d = new Date();

//convert it to utc
var utc = d.getTime() + (d.getTimezoneOffset() * 60000); 

var utc_date = new Date(utc);
utc_date.setHours(20,0,0)

console.log(utc_date.getTime()) // I want this to be same irrespective of timezone, but don't know why it is changing 
```

请指导我在哪里做错了..？

**更新：** 我想在[http://jsfiddle.net/HNyj5/](http://jsfiddle.net/HNyj5/)上创建一个时间下拉列表，这里的概念是我使用所选日期的客户端或数据库的时间戳，然后动态生成此下拉列表。所以我希望服务器/客户端上的时间戳相似，这就是我尝试使用 UTC 日期对象的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:57:52.697

您可以像这样从本地时间检索 UTC 日期时间（例如 timezone = GMT+0100）：

```
var currentUTC = new Date; //=>Mon Mar 18 2013 13:53:24
currentUTC.setMinutes(currentUTC.getMinutes()+currentUTC.getTimezoneOffset();
 //=> currentUTC now: Mon Mar 18 2013 12:54:06

//or
var someUTC = new Date('1998/03/18 13:52'); //=> Wed Mar 18 1998 13:52:00
someUTC.setMinutes(currentUTC.getMinutes()+currentUTC.getTimezoneOffset();
 //=> someUTC now: Wed Mar 18 1998 12:52:00 
```

或作为带有单行的日期扩展：

```
Date.prototype.UTCFromLocal = function(){
  var a;
  return new Date(Date.prototype.setMinutes
          .call(a = this,a.getMinutes()+a.getTimezoneOffset()));
}
// usage (current date and time = Mon Mar 18 2013 14:08:14 GMT+0100
var d = new Date().UTCFromLocal(); //=> Mon Mar 18 2013 13:08:14 
```

要检索（从 UTC 日期时间），您可以使用：

```
Date.prototype.LocalFromUTC = function(){
  var a;
  return new Date(Date.prototype.setMinutes
          .call(a = this,a.getMinutes()-a.getTimezoneOffset()));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:55:57.013

> 请指导我在哪里做错了..？

您正在构建一个`utc_date`完全不同的时代，以某种方式受到`getTimezoneOffset`. 做就是了

```
var d = new Date();
d.getTime(); // milliseconds since epoch 
```

或者

```
Date.now(); 
```

如果你在 UTC-land 工作，你应该使用[`d.setUTCHours`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setUTCHours)而不是 local-timezone-dependent `setHours`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:41:12.857

实际上，我期望 JS 做的是，如果我在`Date`构造函数中传递时间戳，它应该使对象 wrt 那个时间戳，但它将它转换`localtimezone`为对我造成问题的对象。

所以我为解决这个问题做了什么，我通过传递所选日期的字符串来获取日期对象。

`var date = new Date(selected_date_str);`而不是传递时间戳

因为我正在使用 UTC 时间戳作为其值来下拉时间。下拉列表的开始`hour:min`是动态的，我在函数中作为参数传递，`from_hr`就像我想从 20:00 创建时间下拉列表然后我通过`from_hr = 20`

所以现在我为所选日期设置小时

`date.setHours(from_hr, 0, 0);`

然后我制作了一个`utc_time`变量来制作下拉列表的值

```
var utc_time = Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), from_hr, 0, 0, 0); 
```

这将保留在所有时区，这是我将用作基础的。然后在循环中我增加了 15 分钟的时间

```
 var count = 0;
    jQuery(elem).html('');
    while(count <= 95){
        var option = '<option value="{0}">{1}:{2}</option>'.format(utc_time/1000, ('0' + date.getHours()).slice(-2), ('0' + date.getMinutes()).slice(-2)); //here i used a format prototype, which you can find in the jsfiddle link of my question
        jQuery(elem).append(option);
        utc_time += 15 * 60 * 1000; //adding 15 mins in the utc timestamp
        date.setMinutes(date.getMinutes() + 15)
        count++; } 
```

我将 utc_time 除以 1000 以使其与 php 兼容，因为我要从这里检索值并保存在 db 中。