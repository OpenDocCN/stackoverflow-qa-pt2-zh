# StackOverflow 问答 14689000-14689999

# java - JCIFS VerifyError 非法使用非虚函数调用

> ID：14689000
> 
> 赞同：1
> 
> 时间：2013-02-04T14:38:12.267
> 
> 标签：java, jcifs, verifyerror

我使用 jcifs-1.3.17 库来检查共享文件夹中的一些文件。一周前我发现我的代码不能正常工作。我有以下 500 个服务器错误：（

***类：jcifs/smb/NtlmPasswordAuthentication，方法：暗示签名：（Ljavax/security/auth/Subject;）Z）非法使用非虚拟函数调用***

```
java.lang.VerifyError: (class: jcifs/smb/NtlmPasswordAuthentication, method: implies signature: (Ljavax/security/auth/Subject;)Z) Illegal use of nonvirtual function call
    at org.apache.jsp.Test_jsp._jspService(Test_jsp.java:91)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:669)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:560)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:224)
    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
    at org.eclipse.jetty.server.Server.handle(Server.java:365)
    at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
    at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:926)
    at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:988)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:635)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
    at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:628)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
    at java.lang.Thread.run(Thread.java:722) 
```

**任何建议我该如何解决？也许我可以避免这个验证检查？或者，也许你可以给我一些关于这个图书馆的替代方案？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:35:35.750

问题在于使用 Java 版本 1.8-ea。我重新安装了 java 1.6 版本，现在一切正常。

# android - 在 ListView 的 onItemClickListener 中调用 Horizo ntalScrollView.getRight() 的问题。

> ID：14689011
> 
> 赞同：1
> 
> 时间：2013-02-04T14:38:51.407
> 
> 标签：android, scrollview, onitemclicklistener

我有一个 Horizo​​ntalScrollView，其中包含可变数量的 VISIBLE 或 GONE ListViews。

当调用 ListView 的 OnItemClickListener 时，部分处理代码会更改其他 ListView 的可见性。

作为 OnItemClickListener 的一部分，我尝试使用 Horizo​​ntalScrollView.scrollTo() 在 ScrollView 的右侧显示新可见的 ListView。

在 ListView 变为 VISIBLE 或 GONE 后，scrollView.getRight() 不会报告 scrollView 内容的更改大小。在 OnItemClickListener 返回后，它会报告正确的新内容大小。

我错过了某种形式的 OnReflowed 回调吗？

在 OnItemClickListener 退出后，如何在布局重排后立即执行 .getRight() ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:36:15.580

解决方案是：

1) 在 ScrollView 和 ListViews 之间插入一个子类的（线性）布局

2）在子类中添加一个 onSizeChanged 方法：

```
public void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    ((HorizontalScrollView) getParent()).scrollTo(w, 0);
} 
```

# c# - 单选按钮在 Chrome 中动态呈现为未选中状态

> ID：14689016
> 
> 赞同：1
> 
> 时间：2013-02-04T14:39:10.440
> 
> 标签：c#, asp.net, google-chrome, dynamic, radio-button

我`radiobutton`在后面动态生成代码。并将选中的属性设置为 true `Checked = true`，即`radiobutton`. 在 page_load 上，`Radiobutton`在 IE、Firefox 中呈现为选中状态，但在 Chrome 中未呈现为`Radiobutton`未选中状态。

这是我的代码：

```
var radio = new HtmlInputRadioButton  
{  
ID = id  
};  
placeholder.Controls.Add(radio);  
radio.Name = name;  
radio.Checked = value; 
```

在 Chrome 的 page_load 上选择单选按钮的修复方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:33:02.533

我已经测试和测试，我无法让 Chrome 没有使用以下代码选择单选按钮。

```
var radio = new HtmlInputRadioButton
{
    ID = "testRadio",
    Name = "something",
    Checked = true,
};
phTest.Controls.Add(radio); 
```

如果您仍然遇到问题，您可以发布您的实际代码来演示该问题。

# jquery - HTML5 rel 未验证

> ID：14689017
> 
> 赞同：0
> 
> 时间：2013-02-04T14:39:13.370
> 
> 标签：jquery, html

我在 html5 文档上有一个基本的 jquery 选项卡式框脚本，但是这个`rel=""`：

```
li rel="tab1" 
```

正在放弃验证...

jQuery是...

```
$(document).ready(function() {

    $(".tab_content").hide();
    $(".tab_content:first").show(); 

    $("ul.tabs li").click(function() {
        $("ul.tabs li").removeClass("active");
        $(this).addClass("active");
        $(".tab_content").hide();
        var activeTab = $(this).attr("rel"); 
        $("#"+activeTab).fadeIn(); 
    });
}); 
```

我可以`rel`用另一个属性替换吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:42:23.790

我建议使用`data`属性。

例如

```
<li data-target="tab1"></li>

$(this).data('target'); 
```

# php - PHP - 递归 - 使用从子目录名称创建的变量打开 URL

> ID：14689021
> 
> 赞同：0
> 
> 时间：2013-02-04T14:39:41.487
> 
> 标签：php, url, recursion, directory, subdirectory

我正在尝试编写一些通过文件夹运行的 PHP，该文件夹获取每个子目录名称并将其分配给一个变量。然后，使用该变量打开一个 URL。

例如，D:Folder 包含多个名为 1-?? 的子文件夹。

PHP 将首先打开 www.url.com/run_batch.php?q=1 并休眠 30 秒，然后打开 www.url.com/run_batch.php?q=2 等...对于主目录中的每个子目录目录。

我目前正在尝试写这个。我还没有太多代码，但认为你们中的一个天才可以帮助我加快这个过程。

**更新**

好的，这是我到目前为止所拥有的，它运行没有任何错误，但它似乎一次运行所有这些而没有睡觉？不确定，页面只是保持忙碌。

```
<?php
if ($handle = opendir('D:\HTTP\pic\')) {
$blacklist = array('.', '..', 'bu');
while (false !== ($file = readdir($handle))) {
  if (!in_array($file, $blacklist)) {
    echo "<iframe width='800' height='600' src='http://www.url.com/run_batch.php?q=" . "$file" . "'></iframe>";
        sleep(100);
    }
}
closedir($handle);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:47:21.830

我建议你从伪代码开始；为步骤创建注释。从那里，查看 PHP.net 以获取有关特定任务的帮助。当你有一些可行但有问题的东西时，粘贴你的代码。

**伪代码：**

```
// get directory list
// loop through directories
// ...
// redirect to next page 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:51:06.817

当您在 PHP 代码中休眠时，HTML 不会发送到浏览器，这就是它看起来很忙的原因。

您必须在每次通过时调用 flush()。

```
<?php
if ($handle = opendir('D:\HTTP\pic\')) {
$blacklist = array('.', '..', 'bu');
while (false !== ($file = readdir($handle))) {
  if (!in_array($file, $blacklist)) {
    echo "<iframe width='800' height='600' src='http://www.url.com/run_batch.php?q=" . "$file" . "'></iframe>";
        //Send content to browser
        flush();
        sleep(100);
    }
}
closedir($handle);
}
?> 
```

# ios - 错误的urlencoding

> ID：14689023
> 
> 赞同：0
> 
> 时间：2013-02-04T14:39:44.993
> 
> 标签：ios, url, encoding, urlencode, url-encoding

我有这个 URL： http: [//google.com](http://google.com)并使用它进行 urlencode：

```
NSArray *escapeChars = [NSArray arrayWithObjects:@";" , @"/" , @"?" , @":" ,
                        @"@" , @"&" , @"=" , @"+" ,
                        @"$" , @"," , @"[" , @"]",
                        @"#", @"!", @"'", @"(",
                        @")", @"*", nil];
NSArray *replaceChars = [NSArray arrayWithObjects:@"%3B" , @"%2F" , @"%3F" ,
                         @"%3A" , @"%40" , @"%26" ,
                         @"%3D" , @"%2B" , @"%24" ,
                         @"%2C" , @"%5B" , @"%5D",
                         @"%23", @"%21", @"%27",
                         @"%28", @"%29", @"%2A", nil];
int len = [escapeChars count];
NSMutableString *temp = url;
int i;
for(i = 0; i < len; i++)
{
    [temp replaceOccurrencesOfString: [escapeChars objectAtIndex:i] withString:[replaceChars objectAtIndex:i] options:NSLiteralSearch range:NSMakeRange(0, [temp length])];
}
return temp; 
```

这是我得到的编码字符串：`http0X1.D49C41C5D49CP-5700.0000000.000000google.com`

怎么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:45:30.063

这是 URL 编码的类别：

NSString+URLEncoding.h

```
#import <Foundation/Foundation.h>

@interface NSString (URLEncoding)
- (NSString *)urlEncodeUsingEncoding:(NSStringEncoding)encoding;
@end 
```

NSString+URLEncoding.m

```
#import "NSString+URLEncoding.h"

@implementation NSString (URLEncoding)

- (NSString *)urlEncodeUsingEncoding:(NSStringEncoding)encoding {
return (__bridge NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,
                                                           (CFStringRef)self,
                                                           NULL,
                                                           (CFStringRef)@"!*'\"();:@&=+$,/?%#[]%  ",
                                                           CFStringConvertNSStringEncodingToEncoding(encoding));
}
@end 
```

用法：

```
NSString *urlText = @"http://google.com";
NSString *encodedUrlText = [urlText urlEncodeUsingEncoding:NSUTF8StringEncoding]; 
```

# windows-runtime - How to change the palette colors of WinRT XAML Toolkit Chart controls?

> ID：14689031
> 
> 赞同：3
> 
> 时间：2013-02-04T14:39:59.217
> 
> 标签：windows-runtime, windows-store-apps, winrt-xaml, silverlight-toolkit, winrt-xaml-toolkit

How can I change the palette colors of the chart controls in WinRT XAML Toolkit charting controls ?

For example I want to change the colors of the slices of a pie chart.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T17:38:09.920

If you search for "Palette" in the source of the toolkit you will see how the default style of the Chart control has a `Palette` property which is a collection of `ResourceDictionary`. You can apply it in a similar fashion in your app either as a chart `Style` or directly as its property, e.g.

```
<charting:Chart
    x:Name="PieChartWithCustomPalette"
    Title="Pie Chart with Custom Palette"
    Margin="70,0">
    <charting:Chart.Palette>
        <charting:ResourceDictionaryCollection>
            <!-- Blue -->
            <ResourceDictionary>
                <SolidColorBrush
                    x:Key="Background"
                    Color="#4586d8" />
                <Style
                    x:Key="DataPointStyle"
                    TargetType="Control">
                    <Setter
                        Property="Background"
                        Value="{StaticResource Background}" />
                </Style>
                <Style
                    x:Key="DataShapeStyle"
                    TargetType="Shape">
                    <Setter
                        Property="Stroke"
                        Value="{StaticResource Background}" />
                    <Setter
                        Property="StrokeThickness"
                        Value="2" />
                    <Setter
                        Property="StrokeMiterLimit"
                        Value="1" />
                    <Setter
                        Property="Fill"
                        Value="{StaticResource Background}" />
                </Style>
            </ResourceDictionary>
            <!-- Red -->
            <ResourceDictionary>
                <SolidColorBrush
                    x:Key="Background"
                    Color="#dc443f" />
                <Style
                    x:Key="DataPointStyle"
                    TargetType="Control">
                    <Setter
                        Property="Background"
                        Value="{StaticResource Background}" />
                </Style>
                <Style
                    x:Key="DataShapeStyle"
                    TargetType="Shape">
                    <Setter
                        Property="Stroke"
                        Value="{StaticResource Background}" />
                    <Setter
                        Property="StrokeThickness"
                        Value="2" />
                    <Setter
                        Property="StrokeMiterLimit"
                        Value="1" />
                    <Setter
                        Property="Fill"
                        Value="{StaticResource Background}" />
                </Style>
            </ResourceDictionary>
        </charting:ResourceDictionaryCollection>
    </charting:Chart.Palette>
    <charting:Chart.Series>
        <Series:PieSeries
            Title="Population"
            ItemsSource="{Binding Items}"
            IndependentValueBinding="{Binding Name}"
            DependentValueBinding="{Binding Value}"
            IsSelectionEnabled="True" />
    </charting:Chart.Series>
</charting:Chart> 
```

I am adding this to the sample project for future reference.

![enter image description here](../Images/65d2a84275b3b10019a314102b8ad0b3.png)

# asp.net-mvc - 无法使用不同的方法处理 LINQ 查询

> ID：14689036
> 
> 赞同：0
> 
> 时间：2013-02-04T14:40:03.920
> 
> 标签：asp.net-mvc, linq

我正在开发一个 MVC 应用程序，此时应该返回在 SQL 表中创建条目的不同用户。我在表中有一个名为 EnteredBy 的列，其中包含多次输入的所有用户（大约 10 个不同的用户）的名称。我已经尝试过这个 LINQ 查询，但它不起作用：

```
[HandleError]
public ActionResult DisplayCount()
{

        var enteredBy = (from user in db.Table
                         select user.EnteredBy).Distinct();

        ViewBag.Count = enteredBy.Count();

        return View(enteredBy);
} 
```

我也按照其他人的建议尝试了这个：

```
[HandleError]
public ActionResult DisplayCount()
{

        var enteredBy = (from user in db.Table
                        select new { user.EnteredBy}).Distinct();

        ViewBag.Count = enteredBy.Count();

        return View(enteredBy);
} 
```

看法：

```
@model  IEnumerable<Statistic.Models.Table>

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>DisplayCount</title>
</head>
<body>

<div>
    Entered by: <br /><br />

    @foreach (var m in Model)
    {

        @m.EnteredBy <br />

    }

    <br /> Total Count: <br />
    @ViewBag.Count
</div>

</body>
</html> 
```

但它产生相同的结果：

> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

有什么我想念的吗？

堆栈跟踪：

```
[InvalidOperationException: The model item passed into the dictionary is of type 'System.Data.Entity.Infrastructure.DbQuery`1[<>f__AnonymousType4`1[System.String]]', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[Statistic.Models.DashboardLibAnswer]'.]
   System.Web.Mvc.ViewDataDictionary`1.SetModel(Object value) +175
   System.Web.Mvc.ViewDataDictionary..ctor(ViewDataDictionary dictionary) +361
   System.Web.Mvc.WebViewPage`1.SetViewData(ViewDataDictionary viewData) +49
   System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) +98
   System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) +107
   System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +291
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13
   System.Web.Mvc.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17() +23
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +245
   System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +22
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +176
   System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +75
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +99
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +50
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +27
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +14
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +39
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +29
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +25
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +31
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629296
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:52:33.657

尼克，你的堆栈跟踪中有什么？该错误消息似乎表明您将从内部异常中获得更多信息，为什么不检查一下呢？

另一种解决方法是调用`.ToList().Distinct`您的第二个示例。这会将数据从数据库中提取出来，然后在您身边为您进行计数，因此从性能的角度来看，这可能不是您所需要的，但它应该可以工作。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:57:48.320

问题是你正在这样做：

```
return View(enteredBy); 
```

您的视图页面似乎不需要这种类型的模型。

如果您将用户数量存储在 ViewBag 中，则无需将查询传递给模型：

```
ViewBag.Count = enteredBy.Count();

return View(); // dont need a strongly typed model 
```

然后在您的视图中，您可以像这样显示它：

```
User Count: @ViewBag.Count 
```

如果您查看您的视图 (DisplayCount.cshtml)，您应该检查您的 @model 语句。如果你使用 ViewBag，你甚至不需要它。如果你想切换到强类型模型，你可以使用 int 代替，因为此时你真正想要的只是用户数：

```
@model int

User Count: @Model 
```

**编辑**

看起来您正在尝试获取用户列表，而不是用户数量。试试这个：

```
var uniqueUsers = db.Table.Select(t => t.EnteredBy).Distinct().ToList();

return View(uniqueUsers); 
```

您的视图将需要一个 IEnumerable：

```
@model IEnumerable<string>

@foreach(var user in Model)
{
    Entered By: @user
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T15:02:21.520

假设您想为每个不同的 EnteredBy 获取一个 Table 实体...

您的视图模型是`IEnumerable<Statistic.Models.DashboardLibAnswer>`.

你传递了一个奇怪的匿名字符串查询......

所以你的查询应该是这样的（取决于你想拿哪个表），

```
db.Table.GroupBy (m => m.EnteredBy)
                .Select(g => g.First()).ToList(); 
```

**解决方案 2**

...只需将视图的模型更改为`@model IEnumerable<string>`

将 ToList() 添加到您的查询中，并在您的视图中更改 foreach

```
@foreach (var m in Model)
    {
        @m<br />
    } 
```

**一般说明**

count 不需要 ViewBag ：

您可以使用

```
@Model.Count(); 
```

# c# - 在 ASP.net 页面上的 SSRS 报告中正确传递我的参数

> ID：14689037
> 
> 赞同：0
> 
> 时间：2013-02-04T14:40:04.887
> 
> 标签：c#, asp.net

我已经非常接近解决我花了几天时间解决的问题。

我正在尝试将参数传递给 ASP.net 页面上的 SSRS 报告。用户在之前的页面上选择 2 个选项，程序（3 个程序的下拉列表）和期间（日期）。

我可以得到一些通过，但不是我想要的。这是用户选择要在报告上显示的内容的页面：

```
 ClientScript.RegisterStartupScript(this.GetType(), "Alert", "alert('Bill Created!');window.open('../demographics/supbillrpt.aspx?prog=fprogram&period=cperiod','_self');", true); 
```

fprogram 是：

```
 SqlParameter param2 = new SqlParameter();
        param2 = command.Parameters.Add("@program", SqlDbType.Char);
        param2.Value = fprogram; 
```

cperiod 是一样的，但它是一个日期。

这是显示报告的页面上的代码：

```
 String sprogram = Request.QueryString[0];
        String speriod = Request.QueryString[1];

        ReportViewer1.ProcessingMode = ProcessingMode.Remote;
        ReportViewer1.Width = 800;
        ReportViewer1.Height = 600;
        IReportServerCredentials irsc = new CustomReportCredentials();
        ReportViewer1.ServerReport.ReportServerCredentials = irsc;
        ReportViewer1.ServerReport.ReportPath = "/sup_billing/Report1";
        ReportViewer1.ServerReport.Refresh();
        ReportParameter p = new ReportParameter("prog", sprogram);                      ReportViewer1.ServerReport.SetParameters(new ReportParameter[] { p });
        ReportParameter p2 = new ReportParameter("period", speriod); ReportViewer1.ServerReport.SetParameters(new ReportParameter[] { p2 }); 
```

我得到的是程序是空白的，句号是“cperiod”

我尝试了一些不同的方法来让它作为变量读取，但似乎没有任何效果。

如果我输入以下内容：

ClientScript.RegisterStartupScript(this.GetType(), "Alert", "alert('Bill Created!');window.open('../demographics/supbillrpt.aspx?prog=VEX&period=cperiod','_self'); “， 真的）;

VEX 是该下拉列表中的一个项目，并且会显示出来，因为我把它放在那里。但用户不会总是选择 VEX，所以我需要使用 fprogram 变量。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:28:19.323

我假设您的第一个代码片段是您正在使用的实际代码，而不是代码一般形式的模型。我进一步假设您有名为`fprogram`and的变量`cperiod`。

您需要构建查询字符串以反映您希望传递的确切值。不幸的是，您不能对要用作值源的变量的名称进行编码并插入实际值。

所以你的代码应该是这样的：

```
// I am assuming you're getting your fprogram and cperiod values from controls.  The 
// control names are of course up to you.

string fprogram = ddlProgram.SelectedValue;
string cperiod =  txtPeriod.Text;  // I'm assuming this contains a formatted date.

string queryString = String.Format(
     "../demographics/supbillrpt.aspx?prog={0}&period={1}", 
     fprogram, 
     cperiod);
string script = String.Format(
     "alert('Bill Created!');window.open('{0}','_self');",
     queryString);

ClientScript.RegisterStartupScript(this.GetType(), "Alert", script, true); 
```

希望这可以帮助。

# java - thread.interrupt 与 ExecutorService - Future.cancel() 之间的区别？

> ID：14689042
> 
> 赞同：0
> 
> 时间：2013-02-04T14:40:33.303
> 
> 标签：java

如果线程是 java 线程，则线程可以被 Thread.interrupt() 中断。

我们也可以使用 SingleThread 创建 Executor Service，我们可以调用 Future.cancel。

有人可以解释两者之间的区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:46:03.423

[未来取消](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html#cancel%28boolean%29) 与[线程中断](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#interrupt%28%29)

我认为您是在比较 Apple 和 Orange。请检查两者的文档。

# wordpress - wordpress 嵌套简码 - 如何强制执行简码处理的顺序

> ID：14689043
> 
> 赞同：0
> 
> 时间：2013-02-04T14:40:34.123
> 
> 标签：wordpress

我只是想在 wordpress 上写我自己的插件

我写这个是为了从 github 原始文件中下载代码

邮政：

```
[github raw="https://raw.github.com/pmontu/PatientRecordsWindows/402fcb1706f408428aa1a6df2a82fbbba1fc4071/PatientRecordsWPF2/Domain/Media.cs"] 
```

插入：

```
function github_func( $atts ) {
    extract($atts);
    return file_get_contents($raw);
}
add_shortcode( 'github', 'github_func' ); 
```

它可以工作，但带有标签的代码无法正确显示

![在此处输入图像描述](../Images/ed1d9b314428d77d7e7e78ae62a5bc65.png)

所以我试图将语法荧光笔插件应用于下载的代码

使用语法荧光笔：

```
[c language="#"][github file="https://raw.github.com/pmontu/PatientRecordsWindows/402fcb1706f408428aa1a6df2a82fbbba1fc4071/PatientRecordsWPF2/Domain/Media.cs"][/c] 
```

但看起来优先级搞砸了 ![突出显示之前未获取 url](../Images/cc3f4d4b6f7ec4c052aadb771524b8c6.png)

如果调用 do_shortcode()，我读到嵌套的短代码确实有效，我究竟如何实现它？

# c# - Regex.Split() 以逗号、空格或分号分隔的字符串

> ID：14689044
> 
> 赞同：19
> 
> 时间：2013-02-04T14:40:38.507
> 
> 标签：c#, regex, split

我正在尝试拆分一个可以用逗号、空格或分号分隔的字符串。它还可以在每个定界符之后包含一个或多个空格。例如

```
22222,11111,23232 
OR
22222, 11111, 23232 
OR
22222;     11111; 23232
OR
22222 11111 23232 
```

其中任何一个都会产生一个包含三个值的数组`["22222","11111","23232"]`

到目前为止，我有`var values = Regex.Split("22222, 11111, 23232", @"[\\s,;]+")`，但这会产生一个包含第二个和第三个值的数组，包括空格，如下所示：

```
["22222"," 11111"," 23232"] 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-04T14:43:28.547

你有两种可能：

*   [`Regex.Split`](https://msdn.microsoft.com/en-us/library/8yttk7sy.aspx)
*   [`String.Split`](http://msdn.microsoft.com/en-us/library/ms131448.aspx)

在这种情况下，您希望通过特定的分隔符来拆分字符串。`String.Split`已为此特殊目的而创建。这种方法会比`Regex.Split`.

```
char[] delimiters = new [] { ',', ';', ' ' };  // List of your delimiters
var splittedArray = myString.Split(delimiters, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T14:46:52.627

您正在为字符串使用`@`符号，因此将`"\"`被解释为文字斜杠。所以你的字符类实际上是读作 a `"\"`、 an `"s"`、 a`","`或 a `";"`。删除多余的斜线，它应该可以按需要工作：

```
var values = Regex.Split("22222, 11111, 23232", @"[\s,;]+") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T14:43:03.447

```
Regex.Split("22222, 11111, 23232", @"[ ,;]+") 
```

这对我有用

还要检查下面的答案，如果您真正需要的是根据几个字符分隔符拆分字符串 - string.split 可能是更好的解决方案

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T14:51:56.953

要从字面上解释“我正在尝试拆分一个可以用逗号、空格或分号分隔的字符串。它还可以在每个分隔符之后包含一个或多个空格”，请尝试：

```
@"[,;]\s*|\s+" 
```

这具有连续分隔符（空格除外）*不会*被视为单个分隔符的属性。

但是，如果您希望将所有连续的分隔符视为一个，您不妨这样做：

```
@"[,;\s]+" 
```

当然，在这种情况下`string.Split`，正如其他人所指出的那样，这是一个更简单的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-07T10:50:28.317

试试这个正则表达式模式：

```
([^,;\"\}\{\s*.]\d+) 
```

对于示例文本：

```
{"123","456","789"}
1011,1213,1415
16, 17, 181920
212223;        242526;27
28 29 3031 
```

[见演示](http://www.systemtextregularexpressions.com/regex.match?p=KFteLDtcIlx9XHtccyouXVxkKyk%3D&t=eyIxMjMiLCI0NTYiLCI3ODkifQ0KMTAxMSwxMjEzLDE0MTUNCjE2LCAxNywgMTgxOTIwDQoyMTIyMjM7ICAgICAgICAyNDI1MjY7MjcNCjI4IDI5IDMwMzE%3D)。

![在此处输入图像描述](../Images/c7a664f9f376d62e3f9c2afb09b49b8c.png)

# c# - XmlSerializer 属性在使用 WCF 的 Web 服务中无效

> ID：14689048
> 
> 赞同：2
> 
> 时间：2013-02-04T14:40:51.227
> 
> 标签：c#, .net, wcf, web-services, soap

我使用 WSCF.blue 来生成基于 WSDL 和 xsd 的 Web 服务类。调用 Web 服务我收到以下错误：

`"XmlSerializer attribute System.Xml.Serialization.XmlAttributeAttribute is not valid in Email. Only XmlElement, XmlArray, XmlArrayItem, XmlAnyAttribute and XmlAnyElement attributes are supported when IsWrapped is true."`

我使用`svcutil.exe`. （VS 2010，.NET 框架 3.5）

有人听说过这个问题吗？

使用`WSDL.exe`（旧的 Web 服务 .NET 2.0）生成代码可以获得预期的结果，但返回值始终来自类型对象，因为 WSCF.blue 为我提供了特定的返回对象（例如 ResponseProfileDto 而不是对象）

其中一个类定义如下所示：

```
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
[System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced)]
[System.ServiceModel.MessageContractAttribute(WrapperName="ResendEmailRequest", WrapperNamespace="http://xy.com/test", IsWrapped=true)]
public partial class ResendEmailRequest
{

    [System.ServiceModel.MessageBodyMemberAttribute(Namespace = "http://xy.com/test", Order = 0, Name = "Email")]
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string Email;

    [System.ServiceModel.MessageBodyMemberAttribute(Namespace = "http://xy.com/test", Order = 1, Name = "LoginName")]
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string LoginName;

    public ResendEmailRequest()
    {
    }

    public ResendEmailRequest(string Email, string LoginName)
    {
        this.Email = Email;
        this.LoginName = LoginName;
    }
} 
```

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:46:56.853

尝试使用该`/wrapped`属性来创建带有`svcutil`.

希望这可以帮助

# sed - 处理文档，添加词性

> ID：14689050
> 
> 赞同：0
> 
> 时间：2013-02-04T14:40:56.120
> 
> 标签：sed

每行一个定义，格式为“WORDPartOfSpeech”

任务是处理文档，在定义时添加词性。不应进行重新格式化。

例如，如果词典是

文章 BIG 形容词 BALL 名词

文件是

大红球落了下来。

那么输出应该是

/文大/形容词红球/名词落下。

如果我将词典作为 2 个字段放入数据库表中，然后运行 ​​SQL 选择，输出为 1 个逗号分隔的行，格式如下：“The/article,big/adjective,ball/noun”那么我将如何使用该行并针对文档进行处理，以便像上面一样输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:59:24.320

You should modify your sql query to preserve any words that don't match a term in your lexicon (perhaps by using an outer join; if you show us that query we could give you more specific advice). Then, assuming your output then looks something like this (with just a `/` following each term that didn't match your lexicon):

```
The/article big/adjective red/ ball/noun fell/. 
```

You could clean it up with `sed` like this (assuming the string had been saved in a variable called `$variablename`:

```
sed 's_\/\([ .]\)_\1_g' <(echo "$variablename") 
```

Explanation:

*   I used `_` instead of `/` to delimit my `s` command for legibility. The syntax `s/search/replace/g` is synonymous with `s_search_replace_g`.

*   `\/\([ .]\)` tells sed to match anything with a literal `/` (escaped as `\/`) followed by either a space or a period `[ .]`. anything matching this pattern is stored into a reference because of the `\(` and `\)` surrounding the pattern.

*   `\1` in the replacement pattern is the backreference I mentioned earlier. This works like a variable storing the matched portion we surrounded with parentheses in the search pattern. In effect, I've told sed to strip out any forward slashes that are followed by a space or a period, without stripping away the space or period itself.

Output:

```
The/article big/adjective red ball/noun fell. 
```

# ibm-connections - 如何从 IBM Connections 中的 OpenSocial 小工具调用对话组件？

> ID：14689051
> 
> 赞同：0
> 
> 时间：2013-02-04T14:40:57.373
> 
> 标签：ibm-connections, ibm-sbt

我想在“我的页面”屏幕中使用 OpenSocial 小工具来显示结果[网格](http://infolib.lotus.com/resources/oneui/3.0/docPublic/components/tableGrid.htm)。

单击网格中的链接将弹出[对话框](http://infolib.lotus.com/resources/oneui/3.0/docPublic/components/dialog.htm)（例如“共享”按钮）或弹出框（例如活动流中的嵌入式体验）。

我将如何实现这一目标？它在任何地方都有记录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:47:34.930

David 在 Connections 的开发人员引导页面中有一个如何执行此操作的示例。您应该能够调用[gadgets.views.openGadget](http://opensocial-resources.googlecode.com/svn/spec/trunk/Core-Gadget.xml#gadgets.views.openGadget) API 来打开一个对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T21:00:42.813

关于 Ryan 的观点，您可以在[developerworks](https://www.ibm.com/developerworks/lotus/documentation/osgadgetconnections4/index.html)上看到有关使用引导页面的一些信息，您需要查看视图示例小工具。不幸的是，您只能在 Connections 中打开一个对话框，EE 样式的弹出窗口不适用于 My Page 上的小工具。

# xcode - 如何更新 SQLITE3 版本的 Xcode？

> ID：14689055
> 
> 赞同：2
> 
> 时间：2013-02-04T14:41:12.497
> 
> 标签：xcode, sqlite

我已经在网上搜索了一种更新 SQLITE3 版本的 Xcode 的方法，但是我没有找到任何可行的方法。这是一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:45:58.650

如果您想使用自己的 sqlite3 版本，可能是因为您想使用仅由更高版本提供的更新功能，那么最好的办法可能是创建一个 Xcode 静态库项目来构建 sqlite3，然后包含该库与您的应用程序（静态链接）。这样可以避免使用系统版本。

考虑到构成 sqlite3 的源文件的数量，这应该是相当微不足道的。

您可能会制作一个动态库版本，但这会稍微复杂一些，尽管肯定是可能的。

# apache - 一些网站如何使用请求的任何 URL 来动态创建没有 404 的页面

> ID：14689056
> 
> 赞同：1
> 
> 时间：2013-02-04T14:41:15.453
> 
> 标签：apache, .htaccess

例如：[http ://www.ebuyer.com/flange](http://www.ebuyer.com/flange)

这个网址并不存在，但是当您访问该网站时，它会将您带到一个搜索页面，其中有法兰的搜索结果。

首先，我认为他们使用 .htaccess 和 ErrorDocumnet 指向搜索脚本以返回对 url 中内容的搜索。

这很容易做到，但我注意到 ebuyer 以 200 OK 响应，而我的方法以 404 Not found 响应。用户永远不会看到这一点，但我猜测对于 SEO，返回 200 OK 会更好。

他们是怎么做到的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:58:38.627

没错，它不是通过 ErrorDocument 指令完成的，因为它会向浏览器返回 404 状态。它实际上是通过 RewriteRule 完成的。请参见以下示例：

```
RewriteCond %{REQUEST_FILENAME} !-f [OR]
RewriteCond %{REQUEST_FILENAME} !-d  [OR]
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ search.php?q=$1 [L,QSA] 
```

这仅仅意味着如果您的网络服务器上不存在请求的文件或目录或链接，则`internally forward`请求调用脚本`search.php`并将请求的 URI 作为搜索参数传递`q`。最后 a`HTTP 200`被返回给浏览器而不是`404`.

eg`/flange`将变为`/search.php?q=flange`内部并向浏览器返回 200。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:58:56.277

正在发生的事情是有一些路由规则在起作用。基本上，一些代码会看到 URL（例如： www.ebuyer.com/flange ）并且知道“flange”方面是它应该尝试查找和显示的关键字。

对于类似的概念，例如此问题的 URL。它分为以下逻辑概念：

**[域]/[功能]/[标识符]/[人类可读性的额外信息]**

这告诉服务器上的模块它需要查看“问题”功能，并使用标识符 14689056 传递问题。

在这种情况下，让系统响应搜索结果页面而不是 404 很容易，因为您已经根据 URL 在幕后重定向用户。

在 .NET (3.5+) 和 IIS 中，有一组很好的与 URL 路由相关的类，可以在 Global.Asax 中进行操作以执行此操作（早期版本的 .NET 也可以执行此操作，只是有点麻烦参与，因为没有本地类）。

在 apache 中，您需要处理 mod_rewrite 和其他我不太熟悉的问题，因为我是一名 .NET 程序员。这个问题[Routing URLs in PHP](https://stackoverflow.com/questions/6095932/routing-urls-in-php)将让你开始朝着你需要的方向前进。

# python - 如何使用 Python 从上次修改的日志文件中获取信息？

> ID：14689059
> 
> 赞同：0
> 
> 时间：2013-02-04T14:41:16.720
> 
> 标签：python, information-retrieval, last-modified

我是 Python 新手，我正在尝试创建一个脚本来检查我所有的日常日志文件以检查错误。

我可以打开文件，打印上次修改日志文件的时间，并打印出日志文件中的任何错误。

但是，这些日志中包含过去三年的每日信息。我希望能够只从日志的最后修改日期读取日志部分（而不是获取过去三年的所有错误，我只想要最后一天的错误。）

到目前为止，这是我的脚本：

```
import sys, string, os, time

from stat import *

from datetime import datetime

now = datetime.now()

f3 = 'C:\Path\filename.txt'

seconds = os.path.getmtime(f3)
print "Last Date Ran: ", time.strftime('%m/%d/%Y %H:%M:%S' , time.localtime(seconds))

for line in open(f3 , 'r'):
    if 'error' in line:
        print ">>> " , line
    elif 'Error' in line:
        print ">>> " , line
    elif 'ERROR' in line:
        print ">>> " , line 
```

有没有办法做到这一点？我搜索了高低并没有找到我的问题的答案。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:48:08.690

简短的回答，不。更长的答案是，您要么必须进行大量浪费的解析，要么在文件外部跟踪一些数据。您可以遍历整个文件，解析日志消息的时间戳，然后仅在给定时间后打印。尽管对于具有 3 年数据的文件，您最好跟踪脚本读取的最后一行，然后在每次打开文件以每天解析时查找该行。如果您可以访问流程中的相关部分，另一种选择是修改日志记录机制；您可以将消息复制到每次运行脚本时刷新的第二个文件，或者基本上通过第二个文件缓冲日志记录，并让脚本负责将日志存档到历史文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:47:41.910

如果您提供更多信息，例如您的日志文件的格式，那将是可能的。

看方法`datetime.datetime.strptime`。在那里你会找到你需要的一切。

例如

```
import os.path
from datetime import datetime

filename = "my.log"

def log_entry_is_interesting(line, reference_time):
    date_str = line.split()[0]
    date = datetime.strptime(date_str, "%Y-%m-%d %H:%M:%S")
    return timedelta(current_datetime, date).days > reference_time:

last_time_opened = os.path.getmtime(filename)
with open(filename) as f:
    for line in filter(lambda x: log_entry_is_interesting(x, last_time_opened), f):
        do_something() 
```

我使用`filter()`- 方法。这在 Python 3 中作为生成器实现，但在 Python 2.x 中没有。如果您使用 2.x，我肯定会使用`ifilter`-module `itertools`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:56:34.677

如果您想从上次运行脚本时得到错误，请尝试将日志文件的上次读取位置存储在另一个文件中，并在下次读取日志文件时查找该位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T16:07:22.380

如果文件中的行按日期排序（对于仅附加日志是合理的），那么您可以以相反的顺序读取文件（[`tac`实用程序](http://linux.die.net/man/1/tac)- 如果您的系统上不可用，则查找或实现 Python 版本）和如果日期过早停止阅读：

```
# ..
if 'error' in line.lower():
   if getdate(line) < today:
      break # stop processing 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-28T08:39:08.570

您可以使用搜索功能到达文件末尾并通过搜索换行符或其他方式找出最后日期。找到后，您可以进行相应的操作。我写了下面的脚本来找出每个文件的最后日期。此函数首先此函数查找给定日志文件中最后一个条目的日期。发现它从文件末尾开始并继续返回 2 个字符并检查下一个字符是否是换行符。当有换行符时，读取前 10 个字符。但是，当日志中有其他服务的异常时，行首可能不包含日期戳。因此，如果最后一行不包含日期戳，我们使用 try except 循环进一步迭代。

```
list= glob.glob("DebugLogFile.log*")

start_time = time.time()

def end_date(file):
count=0;
with open(file, "rb") as f:
    first = f.readline()
    # Read the first line.
    `enter code here`f.seek(-2, os.SEEK_END)
    #print f.tell()  # Jump to the second last byte.
    #print f.read(1)
    flag=True;
    while (flag) :
        try :
            #print f.tell()
            f.seek(-2, os.SEEK_CUR)
            while f.read(1) != b"\n": # Until EOL is found...
                try:
                    f.seek(-2, os.SEEK_CUR)
                    #print f.tell()             
                except:
                    f.seek(0,os.SEEK_SET)
                    print "test"
                    break

            #Remembering the current pointer in case we have to re-evaluate the date in case of exception
            last_pos = f.tell()
            last = f.readline() 
            date=last[:10]
            datetime.datetime.strptime(date, '%Y-%m-%d').date()
            flag=False
            return datetime.datetime.strptime(date, '%Y-%m-%d').date()

        except Exception, err_msg:

            f.seek(last_pos)

def threshold(file):
base_date=end_date(file)
print("Base date is ", base_date)
print("Computing the threshold.......")
#convert the string to date object
#base_date_ob=datetime.datetime.strptime(base_date, '%Y-%m-%d').date()
threshold=base_date-timedelta(days=14)
return threshold

if __name__ == "__main__":
thresh=threshold("DebugLogFile.log")
print thresh

#list =['DebugLogFile.log.100']
#print list
for file in list :
    tmp=end_date(file)
    if(tmp>=thresh):

        print ("Process file :", file, "Which has end date as ", tmp)
    else:
        print ("Do Not Process file :", file, "Which has end date as ", tmp)
time=time.time() 
```

# javascript - rhomobile javascript不工作

> ID：14689062
> 
> 赞同：1
> 
> 时间：2013-02-04T14:41:20.423
> 
> 标签：javascript, rhomobile, rhodes

我在我的 rhomobile 应用程序中有一个视图，我想使用 jQuery 和 Javascript 隐藏和显示某些 div。Javascript 代码嵌入在视图文件中，但没有被执行。例如，这段代码在我的应用程序中没有做任何事情：

```
<script type="text/javascript">
$(document).ready(function () {
alert("loaded submit.erb...");
showLoadingIndicator();});
</script> 
```

我正在使用新生成的应用程序项目附带的标准 layout.erb。非常感谢任何帮助。

HTML 输出：

```
<script type="text/javascript">
$(document).ready(function () {
alert("loaded submit.erb...");
showLoadingIndicator();});

function showLoadingIndicator(){
    setTimeout(function(){
            $('#loadingPlaceholder').hide();
            <% if @params["body"] == "SUCCESS" %>
            successfull();
            <% elsif @params["body"] == "FAILED" %>
            <%= puts "### FAILED ###" %>
            not_successfull();
            <% else %>
                wait();
            <% end %>
        },6000);
}
function successfull(){
  $('#successfull').show();
}

function not_successfull(){
  $('#not_successfull').show();
}

function wait(){
    <%= puts "+++ body => +++" %>
    <%= puts  @params %>
    <%= puts "++++++++++++++++++" %>
}</script>
<div data-role="page">
    <div id="loadingPlaceholder" style="width: 100%; height: 250px; text-align: center;  position: absolute; display: block">
            <div>
                Ihre Anfrage wird gesendet...
            </div>
    </div>  

    <div id="successfull" style="width: 100%; height: 250px; text-align: left;  position: absolute; display: none">

        Ihre Anfrage wurde gesendet.<br>
        Wir setzen uns umgehend mit Ihnen in Verbindung.
    </div>

    <div id="not_successfull"  style="width: 100%; height: 250px; text-align: left;  position: absolute; display: none;">
        Leider konnte Ihre Anfrage nicht versendet werden.<br><br>
        Bitte versuchen Sie es später noch einmal.<br> 

    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:11:58.823

很可能存在阻止加载脚本的其余部分的 js 错误。
我们需要知道的另外几件事是：

1.  您使用的是什么 UI 框架？（jquery mobile、jqui 等）

2.  这是否发生在罗德模拟器、设备、模拟器上？

要弄清楚发生了什么：

1.  检查 rhosimulator 中的控制台日志和 rhodes 日志，查找那里的任何错误。
2.  将警报附加到布局页面中的 window.onerror 事件，并查看是否显示任何内容。
3.  脚本中的所有内容不太可能都失败（这将指向 UI 框架问题），尝试在页面中的脚本顶部添加一些警报或控制台日志，或者更好地使用 log4js 并开始添加您可以的调试代码管理。

# algorithm - 半组运算符（联合）的范围查询

> ID：14689065
> 
> 赞同：4
> 
> 时间：2013-02-04T14:41:21.990
> 
> 标签：algorithm

我正在寻找实现一种算法，该算法给出一个整数数组和该数组中的范围（间隔）列表，返回每个间隔中不同元素的数量。也就是说，给定数组 A 和范围 [i,j] 返回集合 {A[i],A[i+1],...,A[j]} 的大小。

显然，天真的方法（从 i 迭代到 j 并计算忽略重复项）太慢了。Range-Sum 似乎不适用，因为 AUB - B 并不总是等于 B。

我在 Wikipedia 中查找了 Range Queries，它暗示 Yao（在 82 年）展示了一种算法，该算法对半群运算符（似乎是联合）执行此操作，具有线性预处理时间和空间以及几乎恒定的查询时间。不幸的是，这篇文章不能免费获得。

编辑：看来这个确切的问题可以在[http://www.spoj.com/problems/DQUERY/](http://www.spoj.com/problems/DQUERY/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:33:55.493

有一个相当简单的算法，它使用 O(N log N) 时间和空间进行预处理，每个查询使用 O(log N) 时间。首先，创建一个持久的段树来回答范围和查询（最初，它应该在所有位置都包含零）。然后遍历给定数组的所有元素并存储每个数字的最新位置。在每次迭代中，创建一个新版本的持久段树，将 1 放在每个元素的最新位置（每次迭代只能更新一个元素的位置，因此段树中只有一个位置的值发生变化，因此可以在O(log N))。要回答查询 (l, r) 您只需要在 (l, r) 段上找到迭代初始数组的 r 元素时创建的树版本的总和。希望这个算法足够快。更新。我的解释有一个小错误：在每一步，段树中最多两个位置的值可能会发生变化（因为如果它被更新，必须将 0 放在一个数字的前一个最新位置）。但是，它不会改变复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:13:22.690

您可以通过执行**二次时间预计算在****恒定时间内**回答您的任何查询：

 **```
For every i from 0 to n-1
    S <- new empty set backed by hashtable;
    C <- 0;
    For every j from i to n-1
        If A[j] does not belong to S, increment C and add A[j] to S.
        Stock C as the answer for the query associated to interval i..j. 
```

该算法需要二次时间，因为对于每个间隔，我们执行有限数量的操作，每个操作都需要恒定时间（请注意，集合 S 由哈希表支持），并且有二次时间间隔。

如果您没有关于查询的其他信息（查询总数、间隔分布），则基本上无法做得更好，因为间隔的总数已经是二次的。

您可以通过线性动态计算来权衡二次预计算`n`：在接收到 A[i..j] 形式的查询后，预先计算（`O(n)`及时）所有区间的答案`A[i..k]`，`k>=i`. 这将保证摊销复杂度将保持二次，并且您不会被迫在开始时执行完整的二次预计算。

请注意，明显的算法（您在语句中称为明显的算法）是三次的，因为您完全扫描每个间隔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:20:05.787

这是另一种可能与段树密切相关的方法。将数组的元素视为完整二叉树的叶子。如果数组中有 2^n 个元素，则该完整树有 n 个级别。在树的每个内部节点上，存储位于其下方叶子中的点的并集。数组中的每个数字需要在每个级别中出现一次（如果有重复则更少）。所以空间成本是 log n 的一个因素。

考虑一个长度为 K 的范围 A..B。您可以通过形成与叶子和节点相关联的集合并集来计算该范围内的点的并集，选择树上尽可能高的节点，只要下面的子树这些节点完全包含在范围内。如果你沿着范围挑选尽可能大的子树你会发现子树的大小先增加然后减小，并且所需的子树的数量仅随着范围大小的对数增长 - 在开始时如果您只能采用大小为 2^k 的子树，它将在可被 2^(k+1) 整除的边界上结束，并且您将有机会获得大小至少为 2^(k+1) 的子树作为下一个如果您的范围足够大，请采取步骤。

因此，回答查询所需的半组操作数为 O(log n) - 但请注意，半组操作可能很昂贵，因为您可能正在形成两个大集合的并集。**

# mysql - 如何存储或索引地理数据？

> ID：14689066
> 
> 赞同：0
> 
> 时间：2013-02-04T14:41:24.033
> 
> 标签：mysql, solr, geolocation, indexing, sphinx

我有一个问题，不知道从哪里开始：

*   我有选择地理定位数据的用户（例如：旧金山，50 英里）
*   我需要对此进行搜索（例如：圣何塞）并返回在其周边拥有城市的用户。

我使用 Sphinx（但可以选择更改）和 MySQL，我尝试在索引时为所有城市创建一个多属性：它在索引时使我的服务器崩溃。所以我做了一个 cron 在数据库中存储 User -> City 链接。它适用于 Sphinx，但我的 cron 有点太贪心了（而且表格增长得非常快，一个用户可以在他的周边拥有近 1000 个城市）。

你知道一个好的解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:41:51.483

这可以通过 Sphinx 实现。您需要在数据库中拥有每个城市的`latitude`和`longitude`，并且需要在 Sphinx 中添加为属性。

Sphinx 使用魔法函数**`@geodist`**计算范围内的兴趣点 (POI)。

需要更改 Sphinx 配置文件，如下所示：

```
source geolocation
{
    sql_query            = select city_id, radians(longitude) as longitude,   
                           radians(latitude) as latitude from cities 
    sql_attr_float       = longitude
    sql_attr_float       = latitude
} 
```

请注意，`sql_query`使用`radians`函数来转换`degrees to radians`. `sql_attr_float`告诉 Sphinx 经度/纬度是浮点数。这是魔术`@geodist`功能所需要的。`sql_query_info`如果您在命令行上调试，这很方便。

下面是`PHP`执行 Sphinx Search 以检索地理位置搜索的代码

```
$_longitude = $_GET['longitude'];
$_latitude = $_GET['latitude'];
$_radius = $_GET['radius'];

$search = new SphinxClient();
$search->SetServer("localhost", 3312);
$search->SetMatchMode(SPH_MATCH_ALL);
$search->SetArrayResult(true);
$search->SetLimits(0, 100);
$search->SetGeoAnchor('latitude', 'longitude', (float) deg2rad($_latitude),  
                     (float) deg2rad($_longitude));

$circle = (float) $_radius * 1.61;
$search->SetFilterFloatRange('@geodist', 0.0, $circle);

$result = $search->Query('', 'geolocation'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T14:46:02.883

我去年有一个和你类似的项目，也遇到了同样的问题。我不得不切换到 SphinxQL 而不是 php API，并且首先工作得更快，并且你有更多的选择作为 API 给你。

# java - jComboBox 编辑器返回空字符串

> ID：14689068
> 
> 赞同：0
> 
> 时间：2013-02-04T14:41:28.520
> 
> 标签：java, string, swing, jcombobox

我编写了一个自动完成组合框程序，在该程序中搜索用户在文件中输入的单词。该程序工作正常，但是，在`combobox editor`其中输入内容时不会返回任何内容。我不知道为什么会这样。这是处理该问题的代码块。

```
// in GUI class constructor
    InstantSearchBox = new JComboBox();
    InstantSearchBox.setEditable(true);

    /*****/
    KeyHandler handle = new KeyHandler();

    InstantSearchBox.getEditor().getEditorComponent().addKeyListener(handle);

// Keylistener class (KeyPressed method)
try
{
    dataTobeSearched = InstantSearchBox.getEditor ().getItem ().toString ();

    // the string variable is empty for some reason
    System.out.println ("Data to be searched " + dataTobeSearched); 
}
catch (NullPointerException e)
{
    e.printStackTrace ();
} 
```

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:34:52.397

不要使用 KeyListener。在生成 keyPressed 事件时，键入的文本尚未添加到文本字段中。

检查文本字段更改的更好方法是将 DocumentListener 添加到文本字段的 Document 中。有关详细信息，请参阅 Swing 教程中有关[如何编写文档侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:53:26.543

你应该使用

```
dataTobeSearched = (String) InstantSearchBox.getSelectedItem();
```

尽管它的名字，对于可编辑的组合框，这个方法只返回输入的文本。

编辑器仅由 JComboBox 在内部使用，以在输入时临时捕获输入。一旦他们键入，编辑器就会被清除，文本会被传输回组合框模型。

这允许编辑器一次在多个组合框之间共享 - 他们只是在需要时跳入，捕获输入，再次跳出并在编辑完成时清除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:52:44.660

使用`InstantSearchBox.getSelectedItem()`而不是`InstantSearchBox.getEditor().getItem()`.

# c# - 从推文中解析 JSON

> ID：14689076
> 
> 赞同：0
> 
> 时间：2013-02-04T14:41:47.990
> 
> 标签：c#, json, api, twitter, json.net

我正在尝试从 Twitter 解析 C# 中的 JSON 对象，`JObject`但我似乎无法弄清楚我需要的结果的起点在哪里。例如：

我需要得到以下信息：

*   头像网址
*   推特名称
*   信息

JSON 字符串如下所示：

> {"completed_in":0.01,"max_id":297026363595042816,"max_id_str":"297026363595042816","page":1,"query":"UOL01","re​​fresh_url":"?since_id=297026363595042816&q=O1","re​​sults ":[{"created_at":"2013 年 1 月 31 日星期四 16:59:38 +0000","from_user":"CarrieLouiseH","from_user_id":252240491,"from_user_id_str":"252240491","from_user_name":" Carrie Haworth","geo":null,"id":297026363595042816,"id_str":"297026363595042816","iso_language_code":"nl","metadata":{"result_type":"recent"},"profile_image_url": “http://a0.twimg。com/profile_images/1721499350/5680_216695890261_521090261_7945528_588811_n_normal.jpg","profile_image_url_https":"https://si0.twimg.com/profile_images/1721499350/5680_216695890261_521090261_7945528_588811_n_normal.jpg","source":"<a href="http://twitter .com/">web</a>","text":"Test #01","to_user":null,"to_user_id":0,"to_user_id_str":"0","to_user_name":null}], "results_per_page":15,"since_id":0,"since_id_str":"0"}","text":"测试#01","to_user":null,"to_user_id":0,"to_user_id_str":"0","to_user_name":null}],"results_per_page":15,"since_id": 0,"since_id_str":"0"}","text":"测试#01","to_user":null,"to_user_id":0,"to_user_id_str":"0","to_user_name":null}],"results_per_page":15,"since_id": 0,"since_id_str":"0"}

我的假设是，如果我从“结果”开始，那么我可以访问“from_user”等。这是我的代码（到目前为止）：

```
void DownloadStringCompleted(object senders, DownloadStringCompletedEventArgs e)
    {
        try
        {
            List<TwitterItem> contentList = new List<TwitterItem>();

            JObject ja = JObject.Parse(e.Result);
            int count = 0;

            JToken jUser = ja["results"];

            var name2 = (string)jUser["from_user_name"];
        }catch(Exception e){
         MessageBox.Show("There was an error");
        }
    } 
```

但这似乎只是抓住了异常。有人对我哪里出错有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:51:52.007

您拥有的 JSON 不正确 -`"`元素 results[0]["source"] 应该被转义：

```
...,"source":"<a href=\"http://twitter.com/\">web</a>","... 
```

另外，`ja["results"]`是一个数组。您不能使用字符串索引器来获取其元素。您首先需要获取所需索引上的元素，然后您可以访问其`from_user_name`属性：

```
JObject ja = JObject.Parse(e.Result);
int count = 0;
JToken jUser = ja["results"][0];
var name2 = (string)jUser["from_user_name"]; 
```

# asp.net - 在母版页上禁用回发刷新

> ID：14689080
> 
> 赞同：0
> 
> 时间：2013-02-04T14:41:54.587
> 
> 标签：asp.net, master-pages

我有一个带有三个图像按钮的母版页。在母版页下方的内容中，我有列表框，当我选择列表中的项目时，它会在内容中打开一个新列表。问题是，当我进行选择时，整个页面都会重新加载，并且带有图像的母版页会重新加载，并且需要 1 秒钟才能全部返回。正如您可能理解的那样，这不是很方便，而且它不是供个人使用的程序。是否可以使回发仅适用于下面的字段而保持母版页不变？

母版页：

```
<%@ Master Language="VB"  CodeFile="MyMasterPage.master.vb" Inherits="MyMasterPage" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
    <div id="topContent" align="center">
        <table>
            <tr>
                <td style="width:400px;" align="right" axis="top">
                </td>
                <td>
                            <asp:Image ID="Image1" runat="server" ImageUrl="~/PetrolinaLetters.png" />
                </td>
                <td style="width:400px; text-align:center;" valign="top">
                <asp:Label ID="userText" runat="server" BorderStyle="Double" Width="130px" Font-Bold="True"></asp:Label>
                </td>
            </tr>
        </table>
        <div>
            <table>
                <tr>
                    <td style="width:170px;">
                        <asp:ImageButton ID="ImageButton1" runat="server" Height="30px" ImageUrl="~/orderButton.png"
                            Width="160px" />
                    </td>
                    <td style="width: 170px;">
                        <asp:ImageButton ID="ImageButton2" runat="server" Height="30px" ImageUrl="~/orderHistory.png"
                            Width="160px" />
                    </td>
                    <td style="width:170px;">
                        <asp:ImageButton ID="ImageButton3" runat="server" Height="30px" ImageUrl="~/changePass.png"
                            Width="160px" />
                    </td>
                </tr>
            </table>
        </div>
        <br />
        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:48:43.507

您将需要进行部分回发（AKA：**AJAX**）以不触及页面元素的其余部分，并且仍然具有来自列表元素的所需行为。

A- 使用 jquery 捕获更改的值，转到您的网络服务器，然后返回数据（快速，推荐，但需要一些工作）

一些有用的例子：

1.  [http://jquerybyexample.blogspot.com/2012/04/how-to-populate-aspnet-dropdownlist.html](http://jquerybyexample.blogspot.com/2012/04/how-to-populate-aspnet-dropdownlist.html)
2.  [jQuery-AJAX 将下拉列表重新绑定到存储过程的结果](https://stackoverflow.com/questions/5182726/jquery-ajax-to-rebind-dropdown-list-to-results-from-stored-procedure)
3.  [http://amin-sayed.blogspot.com/2008/10/in-this-example-ill-demonstrate-how-to.html](http://amin-sayed.blogspot.com/2008/10/in-this-example-ill-demonstrate-how-to.html)

B- 在您需要更新它们的控件周围使用更新面板，而不需要页面的其余部分（从性能角度来看不是那么快，但非常容易实现）

1.  [http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)
2.  [http://www.asp.net/ajax/documentation/live/tutorials/IntroductionUpdatePanel.aspx](http://www.asp.net/ajax/documentation/live/tutorials/IntroductionUpdatePanel.aspx)
3.  [http://www.netrostar.com/How-to-Use-NET-Update-Panel](http://www.netrostar.com/How-to-Use-NET-Update-Panel)

# javascript - 通过添加break \n重新格式化javascript中的字符串？

> ID：14689081
> 
> 赞同：0
> 
> 时间：2013-02-04T14:41:58.217
> 
> 标签：javascript, string

我正在尝试在javascript中创建一个函数，它将一个文本字符串作为参数，然后通过添加`\n`到字符串中为我格式化它，这将形成段落。

*   每个段落的长度只能是 32 个字符
*   在进入下一段时，我必须确保单词没有被切成两半”

示例字符串：

```
"If we listened to our intellect, we'd never have a love affair. We'd never have a friendship. We'd never go into business, because we'd be cynical. Well, that's nonsense. You've got to jump off cliffs all the time and build your wings on the way down." 
```

后格式应该是这样的：

```
If we listened to our intellect, \n
we'd never have a love affair. \n
We'd never have a friendship.\n
We'd never go into business, \n
because we'd be cynical. Well, \n
that's nonsense. You've got to  \n
jump off cliffs all the time and \n
build your wings on the way down" 
```

我不确定我将如何解决这个问题，并且我不希望任何人解决整个解决方案，我只是想要一个起点，我在如何处理空格和单词以及何时将 \n 插入时遇到了困难字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:45:51.023

这里有一个算法给你：

```
take your string; chop it up in two pieces: left (first 32 chars), right (the rest)
while right != empty
 if length(left) == 32
    while last character of left != space
       take last char off of left, prepend it to right

 print left
 new left = first 32 chars of right; right = rest
end while 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:52:00.520

以下正则表达式对我有用：

```
str.match(/.{1,32}(\s+|$)/g).join("\n"); 
```

**演示：http:** [//jsfiddle.net/PZxNK/](http://jsfiddle.net/PZxNK/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:44:24.410

您可以做一个简单的循环来跟踪自上次换行符以来遇到的字符数（或自第一行文本的开头）。一旦这个值超过 32，迭代回到第一个空间并将其替换为`\n`. 想想如果一个词超过 32 个字符该怎么办。

# javascript - 控制台中的缓存对象？

> ID：14689084
> 
> 赞同：12
> 
> 时间：2013-02-04T14:42:13.303
> 
> 标签：javascript, jquery, firefox, firebug

我将从问题开始：

1.  我正在更改对象文字的内容。（*更改属性值*）
2.  Firebug 控制台（第一次单击）显示*正确*的值。
3.  但过了一段时间，它会卡在一个特定的值上并停止改变。

（*注意：`stringify`对象的表示 - 始终显示正确的值*）

以下是详细信息：

1.  我在中选择了一个`street`（`textbox`它应该`StreetText`在对象中设置值）

2.  我看着`console`（宽线）并按下最后一行，看着*街道上的文字*。

一开始还可以。在第二次尝试中，我选择了另一条街道后，它保持在旧值上。

但是，当我按下刷新（在对象上）时，它会显示正确的街道名称。

这里发生了什么？

![在此处输入图像描述](../Images/f9f59a8163c099126e56d220ea0031c9.png)

我的对象是常规对象文字：

```
 var obj =
            {
                getData: function ()
                {

                    obj.CountryId = $(".ddlCountry").val() || "";
                    obj.CountryText = $(".ddlCountry  :selected").text() || "";
                    obj.StateId = $(".ddlState:visible").val() || "";
                    obj.StateText = $(".ddlState:visible  :selected").text() || "";
                    obj.CityId = $(".hfDataIdCity").val() || "";
                    obj.CityText = $(".hfDataTextCity").val() || "";
                    obj.StreetId = $(".hfDataIdStreet").val() || "";
                    obj.StreetText = $(".hfDataTextStreet").val() || "";
                }
        } 
```

控制台上的显示是通过单击按钮进行的​​：

```
 obj.getData();
 console.log(obj); 
```

为什么我没有看到正确的值？（仅在刷新后......）

ps：ff：14.0.1
fb：1.10.6

并且缓存已关闭

![在此处输入图像描述](../Images/5b9590704736d31d3d4f05daf4d438fd.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T18:41:17.890

将console.dir(obj) 用于不是console.log(obj) 的对象，通过这样做，您将获得对象的字符串，因此更新它仍然可以在您的代码中工作，但不会显示在控制台中。字符串是不可变的，因此您的控制台中不会显示任何属性更新。提示：在 chrome 调试器中使用 watch 表达式。

# c# - 在 SharePoint 2010 的 Visual Studio 中以编程方式取消发布文档库中的文档

> ID：14689089
> 
> 赞同：0
> 
> 时间：2013-02-04T14:42:25.383
> 
> 标签：c#, visual-studio-2010, sharepoint, sharepoint-2010, sharepointdocumentlibrary

我正在将一个文档库中的文档作为新版本复制到另一个库。它工作正常并在目标库中发布复制的文档。

有没有办法将它复制到未发布，或者添加一个步骤来取消发布当前复制的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:13:12.267

尝试将新文档的“审核状态”字段（_ModerationStatus）更改为 SPModerationStatusType.Draft

这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T09:54:44.207

试试这样的东西

Source file 是您的文档名称

> sourceFile.Item.ModerationInformation.Status

将其设置为草稿 sourceFile.Item.ModerationInformation.Status = SPModerationStatusType.Draft

希望这可以帮助

# algorithm - 使用 OpenCV 跟踪用户定义的点

> ID：14689090
> 
> 赞同：2
> 
> 时间：2013-02-04T14:42:30.773
> 
> 标签：algorithm, opencv, language-agnostic, tracking

我正在做一个项目，我需要跟踪图像中的两个点。到目前为止，我识别这些点的最好方法是让用户在程序第一次运行时点击它们。我正在使用 OpenCV 中内置的 Lucas-Kanade Pyramid 方法（[在此处记录](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html)，但正如预期的那样，这并不能很好地工作。是否有更好的替代算法来跟踪 OpenCV 中的点，或者其他一些方法验证我已有的积分？
我目前正在考虑使用 GoodFeaturesToTrack，并获取从每个点到我要跟踪的点的距离，也许是某种向量，指出两点之间的关系，并使用这些信息来确定我的新点。我正在寻找解决方法的建议，不一定是代码示例。谢谢

编辑：我正在跟踪小动作，如果有帮助的话

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T20:20:42.080

如果您寻找在 opencv 中实现的解决方案，金字塔 Lucas Kanade (PLK) 方法非常好，否则我更喜欢基于粒子过滤器的跟踪器。要使用 PLK 提高跟踪性能，请确保您已正确设置参数。例如，对于大动作，您需要一个大约 ca 的水平。3 或 4\. 窗口不应该太小（我更喜欢 17x17 到 27x27）。还要记住，这些方法需要纹理区域才能跟踪点。这意味着像图像内容一样的角落（光圈问题）。

我建议在您要跟踪的点 (P) 周围的网格中播种一组点 (ps)。而不是使用前向 - 后向阈值来拒绝错误跟踪的点。您的点 (P) 的运动将通过特定残差点集 (ps) 的平均运动来计算。

通过估计从第 1 帧到第 2 帧的运动来计算前向后向置信度。（ptList1 -> ptList2）。以及从第 2 帧到第 1 帧的点 ptList2 (ptList2 -> ptListRef)。如果 (|| ptRef - pt1 || > fb_threshold)，运动矢量将被拒绝。

# sql - 金融 - 计算到期收益率

> ID：14689092
> 
> 赞同：3
> 
> 时间：2013-02-04T14:42:35.993
> 
> 标签：sql, oracle, plsql, financial

我读过[这篇](https://stackoverflow.com/questions/1173555/open-source-financial-library-specifically-yield-to-maturity)关于 .net 库来计算**到期收益率的帖子**

但我想知道 PL/SQL 方法是否有类似的东西？我的意思是能够调用一个函数来计算 YTM。我到处搜索，似乎没有找到类似的东西。

泰

# css - CSS3 过渡 - 技能泡沫的事情？

> ID：14689093
> 
> 赞同：0
> 
> 时间：2013-02-04T14:42:35.907
> 
> 标签：css, transitions

我真的很想知道如何在这里做到这一点：

[http://www.youtube.com/watch?v=TtG8w7_C0TI&feature=youtu.be](http://www.youtube.com/watch?v=TtG8w7_C0TI&feature=youtu.be)

在视频中，我单击一个（仍在屏幕录制窗口中），但它们通过悬停工作。

可以指出一些可以帮助我更多地了解效果的东西，我很确定这就是它[http://www.w3schools.com/css3/css3_transitions.asp](http://www.w3schools.com/css3/css3_transitions.asp)

如果是，我想我使用“border-radius：”将 div 制作成一个圆圈，然后将它们对齐我希望使用 css 的方式（就像你将如何使用 div 一样）

这是如何还是有更简单的方法？或 jQuery 插件或其他东西。

对不起，我缺乏技术术语....感谢您的阅读，任何帮助都很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:00:57.607

1) You can use `border-radius` with a value of 50% to create a circle;

2) You can enlarge your element using `CSS3 transform`;

3) You can delay the enlargement using `CSS3 transition`;

**Working demo** (in FireFox):

[http://jsfiddle.net/ZmtCW/1/](http://jsfiddle.net/ZmtCW/1/)

HTML:

```
<div class="circle">
    <br/>I'm a circle
</div> 
```

CSS:

```
.circle{
    margin: 100px;
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: darkkhaki;
    -moz-transition-property: -moz-transform;
    -moz-transition-duration: 1s;
    text-align: center;
    overflow: hidden; 
}

.circle:hover{    
    -moz-transform: scale(1.2);
} 
```

Use the amazing [CSS3 Generator](http://css3generator.com/) to create your cross-browser code.

Good luck

# sql - QSqlQuery 不返回带有 QSqlQuery::bindValue 的行，但如果我使用 QString::arg 插入值则返回

> ID：14689094
> 
> 赞同：1
> 
> 时间：2013-02-04T14:42:41.243
> 
> 标签：sql, qt

我有一个对 QSqlQuery 的调用，当我使用 QSqlQuery::bindValue 时它不返回任何行，但是当我使用 QString::arg 添加值时确实返回行。

具体来说，这不返回任何内容：

```
QSqlQuery q(QSqlDatabase::database( mDbAdapter->dbFilename() ));
q.prepare("select Focus.TextFormId as ID, Focus, TextForm, Gloss from (select TextFormId,group_concat( Transcription , ' ' ) as TextForm, group_concat( Gloss , '-' ) as Gloss from (select TextFormId,AllomorphId,Allomorph.Form as Transcription,LexicalEntryGloss.Form as Gloss from MorphologicalAnalysisMembers,Allomorph,LexicalEntryGloss where TextFormId in ( select TextFormId from MorphologicalAnalysisMembers where AllomorphId in (select _id from Allomorph where  LexicalEntryId=:LexicalEntryId and WritingSystem=:TextFormWS) ) and AllomorphId = Allomorph._id and Allomorph.LexicalEntryId = LexicalEntryGloss.LexicalEntryId and LexicalEntryGloss.WritingSystem=:GlossWS order by TextFormId, AllomorphOrder) group by TextFormId ) as Concatenation left join  ( select TextFormId, Form as Focus from Allomorph,MorphologicalAnalysisMembers on Allomorph._id=MorphologicalAnalysisMembers.AllomorphId and LexicalEntryId=:LexicalEntryId ) as Focus on Focus.TextFormId = Concatenation.TextFormId;");
q.bindValue(":LexicalEntryId", mLexicalEntryId);
q.bindValue(":GlossWS", mGlossWs.id());
q.bindValue(":TextFormWS", mTextFormWs.id());
if( !q.exec() )
    qWarning() << q.lastError().text() << q.executedQuery(); 
```

而这会返回正确的结果

```
QSqlQuery q(QSqlDatabase::database( mDbAdapter->dbFilename() ));
q.prepare(
        QString("select Focus.TextFormId as ID, Focus, TextForm, Gloss from (select TextFormId,group_concat( Transcription , ' ' ) as TextForm, group_concat( Gloss , '-' ) as Gloss from (select TextFormId,AllomorphId,Allomorph.Form as Transcription,LexicalEntryGloss.Form as Gloss from MorphologicalAnalysisMembers,Allomorph,LexicalEntryGloss where TextFormId in ( select TextFormId from MorphologicalAnalysisMembers where AllomorphId in (select _id from Allomorph where  LexicalEntryId=%1 and WritingSystem=%3) ) and AllomorphId = Allomorph._id and Allomorph.LexicalEntryId = LexicalEntryGloss.LexicalEntryId and LexicalEntryGloss.WritingSystem=%2 order by TextFormId, AllomorphOrder) group by TextFormId ) as Concatenation left join  ( select TextFormId, Form as Focus from Allomorph,MorphologicalAnalysisMembers on Allomorph._id=MorphologicalAnalysisMembers.AllomorphId and LexicalEntryId=%1 ) as Focus on Focus.TextFormId = Concatenation.TextFormId;")
        .arg(mLexicalEntryId).arg(mGlossWs.id()).arg(mTextFormWs.id())
        );
if( !q.exec() )
    qWarning() << q.lastError().text() << q.executedQuery(); 
```

重现整个数据库会有点麻烦，但这里的查询形式更易于理解：

```
select Focus.TextFormId as ID, Focus, TextForm, Gloss from (select TextFormId,group_concat( Transcription , ' ' ) as TextForm, group_concat( Gloss , '-' ) as Gloss
from 
(select TextFormId,AllomorphId,Allomorph.Form as Transcription,LexicalEntryGloss.Form as Gloss 
    from MorphologicalAnalysisMembers,Allomorph,LexicalEntryGloss 
    where TextFormId in 
        ( select TextFormId from MorphologicalAnalysisMembers where AllomorphId in 
            (select _id from Allomorph where  LexicalEntryId=%1 and WritingSystem=%3) ) 
        and AllomorphId = Allomorph._id 
        and Allomorph.LexicalEntryId = LexicalEntryGloss.LexicalEntryId 
        and LexicalEntryGloss.WritingSystem=%2 
        order by TextFormId, AllomorphOrder) 
    group by TextFormId ) as Concatenation 
    left join  
    ( select TextFormId, Form as Focus from Allomorph,MorphologicalAnalysisMembers 
        on Allomorph._id=MorphologicalAnalysisMembers.AllomorphId and LexicalEntryId=%1 ) 
    as Focus on Focus.TextFormId = Concatenation.TextFormId; 
```

考虑到可能有改进查询的方法，我搜索了文档并找不到任何表明 QSqlQuery::bindValue 有限制的迹象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:08:34.070

通过更改绑定值的方式，我最终能够使其与绑定一起使用。如果我`mLexicalEntryId`使用不同的占位符（下面的第一个示例）插入两次，或者我使用 ? 绑定值的表示法（下面的第二个示例）。虽然我更喜欢使用占位符，但为同一个变量设置两个不同的占位符感觉很愚蠢，所以我会坚持使用 ? 符号。

```
q.prepare("select Focus.TextFormId as ID, Focus, TextForm, Gloss from (select TextFormId,group_concat( Transcription , ' ' ) as TextForm, group_concat( Gloss , '-' ) as Gloss from (select TextFormId,AllomorphId,Allomorph.Form as Transcription,LexicalEntryGloss.Form as Gloss from MorphologicalAnalysisMembers,Allomorph,LexicalEntryGloss where TextFormId in ( select TextFormId from MorphologicalAnalysisMembers where AllomorphId in (select _id from Allomorph where  LexicalEntryId=:One and WritingSystem=:Three) ) and AllomorphId = Allomorph._id and Allomorph.LexicalEntryId = LexicalEntryGloss.LexicalEntryId and LexicalEntryGloss.WritingSystem=:Two order by TextFormId, AllomorphOrder) group by TextFormId ) as Concatenation left join  ( select TextFormId, Form as Focus from Allomorph,MorphologicalAnalysisMembers on Allomorph._id=MorphologicalAnalysisMembers.AllomorphId and LexicalEntryId=:Four ) as Focus on Focus.TextFormId = Concatenation.TextFormId;");
q.bindValue(":One", mLexicalEntryId);
q.bindValue(":Two", mGlossWs.id());
q.bindValue(":Three", mTextFormWs.id());
q.bindValue(":Four", mLexicalEntryId);

q.prepare("select Focus.TextFormId as ID, Focus, TextForm, Gloss from (select TextFormId,group_concat( Transcription , ' ' ) as TextForm, group_concat( Gloss , '-' ) as Gloss from (select TextFormId,AllomorphId,Allomorph.Form as Transcription,LexicalEntryGloss.Form as Gloss from MorphologicalAnalysisMembers,Allomorph,LexicalEntryGloss where TextFormId in ( select TextFormId from MorphologicalAnalysisMembers where AllomorphId in (select _id from Allomorph where  LexicalEntryId=? and WritingSystem=?) ) and AllomorphId = Allomorph._id and Allomorph.LexicalEntryId = LexicalEntryGloss.LexicalEntryId and LexicalEntryGloss.WritingSystem=? order by TextFormId, AllomorphOrder) group by TextFormId ) as Concatenation left join  ( select TextFormId, Form as Focus from Allomorph,MorphologicalAnalysisMembers on Allomorph._id=MorphologicalAnalysisMembers.AllomorphId and LexicalEntryId=? ) as Focus on Focus.TextFormId = Concatenation.TextFormId;");
q.addBindValue(mLexicalEntryId);
q.addBindValue(mTextFormWs.id());
q.addBindValue(mGlossWs.id());
q.addBindValue(mLexicalEntryId); 
```

# c# - WinForm 底部边距属性不执行任何操作

> ID：14689095
> 
> 赞同：2
> 
> 时间：2013-02-04T14:42:44.760
> 
> 标签：c#, winforms, visual-studio-2010

我是 WinForms 的新手，而且我非常习惯于 CSS 中的样式，所以也许我没有正确查看 WinForm 的底部边距属性，但是，无论我将任意大的底部边距数字设置为什么元素，它似乎都有完全没有效果。

我想要的是将表单的设计扩展到初始可视窗口下方（垂直滚动条显示得很好），并为这些元素设置下边距，以便元素的最底部不与窗口的最底部（有点空间会很好）。

我已经在几个元素上尝试过这个只是为了看看它是否只是一个元素（或者它不在窗口的初始可见部分之外的事实）给我带来了问题，但我似乎无法获得任何效果完全不属于 margin 属性。

看这里： http: [//msdn.microsoft.com/en-us/library/ms229627.aspx](http://msdn.microsoft.com/en-us/library/ms229627.aspx) 看来这确实是 margin 属性应该做的。此外，我在任何元素的 GUI 控件中都找不到任何填充。

就目前而言，我主要只为事件处理程序编写 C# 代码，直到我更好地掌握 Visual Studio 将所有内容放在两个部分类（以及其他 .cs 文件）中的位置。

如果有帮助，这里是设计器文件的代码：

```
namespace WindowsFormsApplication1
{
    partial class IntroForm
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
        this.WelcomeHeader = new System.Windows.Forms.Label();
        this.ActionSelect = new System.Windows.Forms.ComboBox();
        this.ProceedBtn = new System.Windows.Forms.Button();
        this.label1 = new System.Windows.Forms.Label();
        this.richTextBox1 = new System.Windows.Forms.RichTextBox();
        this.SuspendLayout();
        // 
        // WelcomeHeader
        // 
        this.WelcomeHeader.AutoSize = true;
        this.WelcomeHeader.Font = new System.Drawing.Font("Microsoft Sans Serif", 15.75F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.WelcomeHeader.Location = new System.Drawing.Point(84, 30);
        this.WelcomeHeader.Name = "WelcomeHeader";
        this.WelcomeHeader.Size = new System.Drawing.Size(367, 25);
        this.WelcomeHeader.TabIndex = 0;
        this.WelcomeHeader.Text = "Please Select Which Content You";
        // 
        // ActionSelect
        // 
        this.ActionSelect.ForeColor = System.Drawing.SystemColors.WindowFrame;
        this.ActionSelect.FormattingEnabled = true;
        this.ActionSelect.Items.AddRange(new object[] {
        "Events",
        "Headline News",
        "Images For Slideshow",
        "Agendas",
        "Job Opportunities",
        "Schedule Of Meetings",
        "Legal Notices",
        "Main Street (Main Link)",
        "Tourism (Main Link)",
        "Rental Properties",
        "Concert In The Park",
        "Main Street News Letters"});
        this.ActionSelect.Location = new System.Drawing.Point(126, 116);
        this.ActionSelect.Name = "ActionSelect";
        this.ActionSelect.Size = new System.Drawing.Size(283, 28);
        this.ActionSelect.TabIndex = 1;
        this.ActionSelect.Text = "Please Select";
        // 
        // ProceedBtn
        // 
        this.ProceedBtn.BackColor = System.Drawing.SystemColors.ButtonFace;
        this.ProceedBtn.Cursor = System.Windows.Forms.Cursors.Hand;
        this.ProceedBtn.ForeColor = System.Drawing.Color.DimGray;
        this.ProceedBtn.Location = new System.Drawing.Point(221, 192);
        this.ProceedBtn.Name = "ProceedBtn";
        this.ProceedBtn.Size = new System.Drawing.Size(93, 34);
        this.ProceedBtn.TabIndex = 2;
        this.ProceedBtn.Text = "Proceed";
        this.ProceedBtn.UseVisualStyleBackColor = false;
        this.ProceedBtn.Click += new System.EventHandler(this.ProceedBtn_Click);
        // 
        // label1
        // 
        this.label1.AutoSize = true;
        this.label1.Font = new System.Drawing.Font("Microsoft Sans Serif", 15.75F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.label1.Location = new System.Drawing.Point(142, 55);
        this.label1.Name = "label1";
        this.label1.Size = new System.Drawing.Size(251, 25);
        this.label1.TabIndex = 3;
        this.label1.Text = "Would Like To Change";
        // 
        // richTextBox1
        // 
        this.richTextBox1.Location = new System.Drawing.Point(147, 268);
        this.richTextBox1.Margin = new System.Windows.Forms.Padding(3, 3, 3, 30);
        this.richTextBox1.Name = "richTextBox1";
        this.richTextBox1.Size = new System.Drawing.Size(246, 269);
        this.richTextBox1.TabIndex = 4;
        this.richTextBox1.Text = "";
        // 
        // IntroForm
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(9F, 20F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.AutoScroll = true;
        this.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(0)))), ((int)(((byte)(102)))), ((int)(((byte)(0)))));
        this.ClientSize = new System.Drawing.Size(535, 306);
        this.Controls.Add(this.richTextBox1);
        this.Controls.Add(this.label1);
        this.Controls.Add(this.ProceedBtn);
        this.Controls.Add(this.ActionSelect);
        this.Controls.Add(this.WelcomeHeader);
        this.Font = new System.Drawing.Font("Microsoft Sans Serif", 12F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.ForeColor = System.Drawing.Color.FromArgb(((int)(((byte)(204)))), ((int)(((byte)(153)))), ((int)(((byte)(0)))));
        this.Margin = new System.Windows.Forms.Padding(4, 5, 4, 5);
        this.Name = "IntroForm";
        this.Text = "Okmulgee Online Web File Generator";
        this.ResumeLayout(false);
        this.PerformLayout();

    }

    #endregion

    private System.Windows.Forms.Label WelcomeHeader;
    private System.Windows.Forms.ComboBox ActionSelect;
    private System.Windows.Forms.Button ProceedBtn;
    private System.Windows.Forms.Label label1;
    private System.Windows.Forms.RichTextBox richTextBox1;
}
} 
```

- - - - - - - - - - - - - - - - - - - - - 更新 - - - - ----------------------------------

我在上面的代码中设置了底部边距属性的元素很简单，richTextBox1。

此外，我确实在主表单元素中找到了一个 Padding 元素，但遗憾的是，这也不会将其他元素推离其边缘:(

这些属性有什么作用（边距、填充）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T16:05:01.067

Margin 属性由 Winforms 中内置的自动布局功能使用。但它确实要求您允许容器增长，以便它可以提供请求的边距。因此，您必须将表单的 AutoSize 属性设置为 True。

可以将 AutoSize 和 AutoScroll 结合使用，您可以设置 MaximumSize 属性以防止其增长过多。当布局计算产生的布局超过MaximumSize 时，滚动条会自动出现。默认的最大尺寸是显示表单的 Screen.WorkingArea，通常足够好。

# automated-tests - 如何在固定时间后终止 jMeter 中的整个测试？

> ID：14689098
> 
> 赞同：2
> 
> 时间：2013-02-04T14:42:59.280
> 
> 标签：automated-tests, jmeter, load-testing, performance-testing, jmeter-plugins

我编写了一个运行一组参数化 jMeter 测试的 Windows 批处理脚本。但是测试有时会挂起（应该需要大约 2 分钟，无缘无故需要 5 小时 - Gaussian Random Timer 会导致这种情况吗？）。我真的需要在某个时间范围内完成整个批处理作业。所以：

**是否可以为 jMeter 测试设置最大执行时间，之后整个测试以及所有线程都将终止？**

注意：调度程序并没有真正做到这一点（我设置启动延迟 = 0 和持续时间 = 20 并且测试仍然没有在一分钟内完成）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:56:31.503

执行线程转储以查看发生了什么，因为这可能表明服务器端存在问题。

您在 jmeter.log 或控制台中是否有此日志：

```
The following non-daemon threads are still running (DestroyJavaVM is OK) 
```

为了克服这个：

1.  在 HTTP 采样器上配置超时

2.  使用调度程序并将其配置为运行一段时间

# api - Google API 图片类型 text/html

> ID：14689104
> 
> 赞同：0
> 
> 时间：2013-02-04T14:43:15.867
> 
> 标签：api, google-api, mime-types, gif, google-image-search

我正在使用 Google API 搜索和检索图像。我观察到，对于某些图像，chrome 会发出警告说“资源解释为图像但使用 MIME 类型 text/html 传输”。这些都是 .gif 图像。但我也收到了其他没有错误的 .gif 图像。

我阅读了有关 text/html 的内容，发现这是一个服务器端问题，我们需要配置服务器。现在，由于我无法配置 Google 服务器（或 Google 从中获取数据的服务器），我的疑问是，

1.  我还能通过其他方式显示这些图像吗？
2.  这个问题是否仅适用于 .gif 或其他图像类型
3.  如果是，我如何从搜索 API 中排除 gif

我的 Ajax 网址

```
'http://ajax.googleapis.com/ajax/services/search/images?&v=1.0&q=' + query + '&rsz=8' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:26:46.793

我知道了。实际上，这是因为图片来源的网站在我的工作场所被屏蔽了。因此错误。

# php - 一个php脚本要处理两个登录表单？

> ID：14689105
> 
> 赞同：0
> 
> 时间：2013-02-04T14:43:22.850
> 
> 标签：php, html

一页上有两个登录表单和两个数据库表：admin( `user`, `pass`) 和 customer( `fname`, `laname`, `email`, `user`, `pass`)。一份给客户，一份给管理员。想在里面处理两种形式`login.php`

尝试将用户名和密码存储在各自的变量中时，如何确定`Submit`单击了哪个表单并从 login.php 中的两个表单访问`user`和字段？`pass``$_POST`

像这样的东西？（进入 login.php）：

```
if(//submit button in customer form was clicked){
$user=$_POST['customer_login']['user'];
$pass=$_POST['customer_login']['pass'];
}else{
//admin submit button was clicked
$user=$_POST['admin_login']['user'];
$pass=$_POST['admin_login']['pass'];
} 
```

表格（HTML）：

```
<form name="customer_login" method="post" action="login.php">
    <h3>Customer:</h3>
    Username: <input type="text" id="user" name="user"><br>
    Password: <input type="password" id="pass" name="pass"><br>
    <input type="submit" name="Submit" value="Sign in">
</form>  

<form name="admin_login" method="post" action="login.php">
    <h3>Admin:</h3>
    Username: <input type="text" id="user" name="user"><br>
    Password: <input type="password" id="pass" name="pass"><br>
    <input type="submit" name="Submit" value="Sign in">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:44:44.883

为提交按钮提供唯一的名称和/或标识符，并检查哪个已设置。从记忆中，这应该可行，但否则您可以在每个表单中使用隐藏字段来指示您知道的预定义值，知道该值您可以处理适当的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:46:09.963

在您的一种形式中更改名称 attrbute，然后在 php 端检查您获得的 $_POST 值。例如：

```
<input type="submit" name="Submit2" value="Sign in">

if($_POST['Submit2']){
  //form 2 has been sent
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:45:21.140

仅为客户表单创建带有客户登录名的帖子名称。

```
if(isset($_POST['customer_login'])){
    $user=$_POST['customer_login']['user'];
    $pass=$_POST['customer_login']['pass'];
}else{
    //admin submit button was clicked
    $user=$_POST['admin_login']['user'];
    $pass=$_POST['admin_login']['pass'];
} 
```

# for-loop - 变量未在嵌套 for 循环中设置 - Windows 批处理

> ID：14689109
> 
> 赞同：0
> 
> 时间：2013-02-04T14:43:30.647
> 
> 标签：for-loop, batch-file, windows-scripting

下面是我的代码的简化片段：

```
@echo off    
setlocal enabledelayedexpansion
    for /f %%f in ('%pomFiles%') do (
        findstr "var" %%f > nul
        if errorlevel 0 if not errorlevel 1 (
            cd "%%~dpf"
            for /f "usebackq" %%i in ('%%~dpftree.out') do ( set size=%%~zi && echo !size!)
            if !size! gtr 0 (
                   //do  stuff
            )
        )
    ) 
```

该`!size!`变量似乎没有被设置。如果我这样做`echo !size!`，它会打印`!size!`。我怎样才能确保`!size!`评估？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:59:03.540

这是因为您正在使用`for /f`，即读取文件的内容，因此问题是您试图获取变量的大小，该变量`%%i`被设置为文件的第一行。

你只需要一个常规`for`循环

```
for %%i in ("%%~dpftree.out") do ( set size=%%~zi && echo !size!)
if !size! gtr 0 (
    //do  stuff
) 
```

# performance - 渐近预期运行时间

> ID：14689122
> 
> 赞同：0
> 
> 时间：2013-02-04T14:44:18.733
> 
> 标签：performance, complexity-theory, asymptotic-complexity

我在渐近分析问题上遇到了一些麻烦。该问题要求函数的渐近最坏情况运行时间和渐近预期运行时间。Random(n) 生成一个介于 1 和 n 之间且分布均匀的随机数（1 和 n 之间的每个整数都具有相同的可能性。）

```
Func2(A, n)
/* A is an array of integers */
1 s ← A[1];
2 k ← Random(n);
3 if (k < log2(n)) then
4    for i ← 1 to n do
5       j ← 1;
6       while (j < n) do
7          s ← s + A[i] ∗ A[j];
8          j ← 2 ∗ j;
9       end
10   end
11 end
12 return (s); 
```

我想知道第 3 行（if (k < log2(n)) then）如何影响函数的预期运行时间。我相信第 4 - 10 行在最坏的情况下运行 cn^2 时间，但由于 if 语句，我不确定如何得出预期的运行时间。谢谢你的帮助！

-马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:52:34.573

**一个提示：**

第 4-10 行的运行时间不是 O(n^2)。

考虑 while 循环的 j 值：

j = 1, 2, 4, 8, 16, ...

这不是 O(n)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:37:28.807

对于大 n，k 几乎总是大于 log(n)。例如对于 n=1024，log(1024)=10 你将执行循环的概率是 P=log(n)/n 所以时间是

```
(log(n)/n)*(n*log(n))+ O(RandomFunc(n)) 
```

所以一切都取决于 O(Random(n))。如果 O(随机(n)) = O(n)

```
O(n)>O(log(n)^2) = O(n) 
```

第 4-10 行是 O(nlog(n))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-01T16:43:47.230

使用 Sigma 表示法，您可以有条不紊地执行以下操作：

![在此处输入图像描述](../Images/877b51e84feca277743ab70feb60ebb5.png)

# javascript - 如何获得 iframe 内容宽度？

> ID：14689125
> 
> 赞同：5
> 
> 时间：2013-02-04T14:44:24.690
> 
> 标签：javascript, jquery, iframe, tinymce, width

我的页面中有一个 iframe。像这样 ：

```
<iframe width="600px">
    <html>
        <head>
        </head>
        <body>
            <p>Some text</p>
            <img src="/foo/bar/test.png" />
        </body>
    </html>
</iframe> 
```

我希望能够检测 iframe 内容是否大于 600px。我试过这个：

```
var iframe = $('iframe');
if (iframe.width() < iframe.contents().width()) {
    console.log('contents larger than the iframe');
} 
```

它适用于 Firefox 和 Internet Explorer。但不是在 Chrome 上。在 Chrome 上，`iframe.contents().width()`是 600。

我试过`iframe.contents().find('body').width()`了，结果也是600。

如何在 Chrome 中检测 iframe 内容的实际宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:04:29.537

加载 iframe 后尝试添加宽度检查，如建议[的here](https://stackoverflow.com/a/819455/2039657)

它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:42:09.680

我猜你想获得一个 tinymce iframe 的 iframe 宽度。你可以试试这个代码片段。仍然需要做的是将插入符号设置为外部右侧位置。这个想法是测量插入符号的位置。

```
var ed = tinymce.editors[0]; // or tinymce.get('your_editor_id')
var rng = ed.selection.getRng();
rng.collapse(true);

var bm = ed.selection.getBookmark();
var $marker = $(ed.getBody()).find('#'+bm.id);
var elem = ed.getDoc().getElementById(bm.id+'_start');

try {
    box = elem.getBoundingClientRect();
} 
    catch(e) 
{
    console.log('adjustIframePosition (irbasics) error creating box: ' + e);
}

var doc = ed.getDoc(),
    docElem = doc.documentElement,
    body = ed.getBody(),
    win = ed.getWin(),
    clientTop  = docElem.clientTop  || body.clientTop  || 0,
    clientLeft = docElem.clientLeft || body.clientLeft || 0,
    scrollTop  = win.pageYOffset || jQuery.support.boxModel && docElem.scrollTop  || body.scrollTop,
    scrollLeft = win.pageXOffset || jQuery.support.boxModel && docElem.scrollLeft || body.scrollLeft,
    top  = box.top  + scrollTop  - clientTop,
    left = box.left + scrollLeft - clientLeft;

console.log('iframe width: ' + (box.left + scrollLeft) ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-04T18:04:03.680

我不使用 jQuery，但也许可以帮助：

```
var iframe = document.getElementById("myiframe");
var doc = iframe.contentDocument || iframe.contentWindow.document;

alert(doc.body.scrollWidth); // use this property for check 
```

# java - 3D 矩阵中的位置

> ID：14689126
> 
> 赞同：-3
> 
> 时间：2013-02-04T14:44:27.077
> 
> 标签：java, c++, algorithm

我有 3D 数据结构。其中我有值：0 - n^3。例如：如果 n = 3，则 A[3][3][3] 将包含值 0 - 26。

现在我想知道 0 - 26 -> 没有任何循环和迭代的随机值的位置（来自 A[][][] 的 i,j,k）。

例如，如果我给出 1，该函数应该返回 0,0,1。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:45:37.473

提示：使用余数运算符 ( `%`)。（例如`5 % 3 == 2`，`5 / 3 == 1`）

# email - CruiseControl.net - 服务器级别的用户/电子邮件配置

> ID：14689127
> 
> 赞同：1
> 
> 时间：2013-02-04T14:44:36.930
> 
> 标签：email, cruisecontrol.net, publisher

我们在 CruiseControl.net 中配置了大约 50 个项目，每个项目都单独配置为在完成/更改/任何事情时发送电子邮件。

有没有办法在更高级别（例如服务器）配置用户/电子邮件地址列表？我搜索了文档，并搜索了任何线索，但我找不到任何东西。

我需要更新谁收到了电子邮件，更新 50 个文件不是一个可持续或理想的解决方案！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:19:19.950

我不确定这是否是您的确切情况，但也可能对您有用。我已将所有电子邮件设置分成单独的文件，然后在项目配置中使用包含。

所以它看起来像这样：

文件：EmailPublisher.xml

```
<cb:config-template xmlns:cb="urn:ccnet.config.builder">
<email from="notification@example.com" mailhost="mailhost.example.com" mailport="587" includeDetails="true" mailhostUsername="username" 
        mailhostPassword="mailPwd" useSSL="TRUE" replyto="admin@example.com">       

        <description>Sending email notifications</description>
    <groups>
        <group name="developers">
          <notifications>
            <notificationType>Failed</notificationType>
            <notificationType>Fixed</notificationType>
          </notifications>
        </group>
        <group name="buildmaster">
          <notifications>
            <notificationType>Always</notificationType>
          </notifications>
        </group>
    </groups>

    <converters>
        <regexConverter find="$" replace="@example.com" />
    </converters>

    <modifierNotificationTypes>
        <NotificationType>Failed</NotificationType>
        <NotificationType>Fixed</NotificationType>
    </modifierNotificationTypes>    
</email>
</cb:config-template> 
```

然后在发布者部分的项目配置中：

```
<!-- email publisher -->
<cb:include href="EmailPublisher.xml"/> 
```

缺点是您需要为每个项目使用相同的配置，或者使用多个包含文件（这又开始导致同样的问题）。

无论如何，它似乎对我们的团队很有效。

[编辑]您还可以更进一步，例如仅包含来自单独文件的用户列表，并将通知设置单独应用于项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:13:42.767

您可以像这样使用变量/替换：$(admins)、$(programmers)、$(ProductAScrumMaster)、$(ProductBEntireTeam)、$(HolyCrapTheMachineFriedEmailEveryone) 等。如果您需要组合，您也可以附加或嵌套它们。

这篇文章作为一个例子可能更有用 - 它有更多细节：[Using dynamic parameters in email publisher subjectSettings block with CruiseControl.Net](https://stackoverflow.com/questions/3016911/using-dynamic-parameters-in-email-publisher-subjectsettings-block-with-cruisecon?rq=1)

# c# - 在 .net 中 FTP 文件

> ID：14689128
> 
> 赞同：0
> 
> 时间：2013-02-04T14:44:39.293
> 
> 标签：c#, .net, ftp, ftp-client

我正在寻找使用已经运行该服务器的进程将文件从服务器上的目录移动到文件共享。

我想知道使用 ftp 协议执行此操作的最佳方法。我对如何做到这一点的最初想法是使用 System.Net.FtpWebRequest ......我可能最终会使用它，但看起来它可能存在一些问题。要了解我的意思，请查看以下链接...'

[明白了吗](http://mattmitchell.com.au/ftpwebrequest-is-broken/)

话虽如此，在那篇文章中，他列出了一些其他可能有用的库。有人用过这些库吗？试试这些对我来说是个好主意吗？或者我应该坚持使用 FtpWebRequest。我只会上传一个小文件，也许不值得花时间学习新库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:51:53.067

如果您要将文件从本地服务器移动到该服务器的网络共享可访问的路径，则无需使用 FTP，您可以使用`File.Copy()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:50:51.853

我个人使用 Codeplex 上的[SSH.NET 库](http://sshnet.codeplex.com/)，因为它能够使用 SFTP。您没有提到是否需要安全、加密或压缩，但这是一个非常紧凑的小端口，来自运行在 .NET 4.0 中的 java

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T03:10:02.540

我已经在许多项目上成功使用了 FTPWebRequest，没有任何问题。只要您不需要隐式 SSH 功能，.NET 就可以了！！

这是我写的关于如何在 VB.NET 中创建 FTP 客户端的教程：http: [//dot-net-talk.blogspot.in/2008/12/how-to-create-ftp-client-在-vbnet.html](http://dot-net-talk.blogspot.in/2008/12/how-to-create-ftp-client-in-vbnet.html)

这是我用 C# 编写的 ftp 客户端的开源库：http: [//libftp.codeplex.com/](http://libftp.codeplex.com/)

# asp.net - asp DropDownList 始终使用回发检查选择 0 索引

> ID：14689129
> 
> 赞同：1
> 
> 时间：2013-02-04T14:44:39.683
> 
> 标签：asp.net, postback, code-behind

当我尝试获取所选项目时，我有 aspx 和 aspx.cs 文件

```
DropDownList 
```

它总是在 0 索引处获取项目

```
<div style="text-align:center">
             <b>Scegliere il nome del report *  </b>  &nbsp;
             <asp:DropDownList id="dropdownlist1" style="width:250px;" runat="server"></asp:DropDownList>
            <br />
            <br /> 

            <br /> 
            <b>Scegliere la data del report </b>  &nbsp; 
            <asp:TextBox runat="server" ID="txtSchedDate" name="txtSchedDate" type="text" cssclass="datebox" style="height:20px;" ReadOnly="true"/>
            <br />
            <br />
            <br />
            <asp:Button ID="Button1" runat="server" Text="Pubblica" OnClientClick="" OnClick="Button1_Click" />
            <br />
            <br />
            <br />
            <br />
            <asp:Label ID="Label1" Font-Names="Arial" Font-Size="15px" runat="server" ForeColor="Red" Font-Bold="True" Text=""></asp:Label>
            <div id="divUpload" style="display:none">
            <div  style="width:200pt;;text-align:center;">Pubblicando...</div>
            </div>
        </div> 
```

c#代码

```
 protected double size = 1;
  private string connectionString;
  private OracleConnection connection;
  private OracleCommand processNumQuery;
  private int indexdropitem;

  protected void Page_Load(object sender, EventArgs e)
  {

    if (Request["CONNECTSTRING"] == null && Session["CONNECTSTRING"] == null)
    {
        Response.Redirect("sessionup.asp?type=Pubreport");
    }
    else
    {
        if (Request["CONNECTSTRING"] != null)
        {
            connectionString = Request["CONNECTSTRING"].ToString();
        }
        else
        {
            connectionString = Session["CONNECTSTRING"].ToString();
        }

        if (connectionString.IndexOf("DSN=") >= 0)
        {
            Utility util = new Utility();
            connectionString = util.ConnStr(connectionString);
        }
        Session["CONNECTSTRING"] = connectionString;
        connection = new OracleConnection(connectionString);
        connection.Open();

    }
    if (!IsPostBack)
    {
            processNumQuery = new OracleCommand("select distinct nome_report from rpg_notification",connection);
            OracleDataReader reader = processNumQuery.ExecuteReader();

            while (reader.Read())
            {
                dropdownlist1.Items.Insert(0, new ListItem(reader.GetString(0), ""));
            }
            reader.Close();
    }
    }

     protected void Button1_Click(object sender, EventArgs e)
     {

    Response.Write("try :" + dropdownlist1.SelectedIndex + " - " + txtSchedDate.Text + " - " + dropdownlist1.Items[dropdownlist1.SelectedIndex].Text + " - " + Request["txtSchedDate"] + " - ");
     } 
```

我已经得到了 0 索引，请问我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:31:30.580

ASP.NET 不够“智能”，无法传递提交下拉列表的实际选定索引。相反，它取决于浏览器发送选定的**值**，然后取决于具有不同值的项目。

如果存在具有相同值的项目并且其中一个被选中，则服务器端 SelectedIndex 将返回**具有该值的第一个项目**的索引。我刚刚创建了一个快速测试并被证明是正确的。（不熟悉任何 .NET 小提琴，抱歉）

在您的特定情况下，由于该行，所有项目都具有空值：

```
dropdownlist1.Items.Insert(0, new ListItem(reader.GetString(0), "")); 
```

要“解决”您的问题，只需添加一个值：

```
string myValue = reader.GetString(0);
dropdownlist1.Items.Insert(0, new ListItem(myValue, myValue)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:52:27.640

这应该工作......只是为了调试建议，尝试打电话`dropdownlist1.SelectedItem.Text`而不是`dropdownlist1.Items[dropdownlist1.SelectedIndex].Text`看看你得到什么

# jquery-ui - jQuery Accordion - 如何形成链接的 h1 标题

> ID：14689132
> 
> 赞同：0
> 
> 时间：2013-02-04T14:44:46.983
> 
> 标签：jquery-ui

我正在使用 jQuery UI。我在 jsFiddle [http://jsfiddle.net/kAyT4/1/创建了我的问题](http://jsfiddle.net/kAyT4/1/)

我的问题：单击“第 1 节”和 div 容器中的不同链接是没有问题的。但我直接想链接h1标题“直接到谷歌”！如何将它与我的 iFrame 结合使用？

```
<div id="accordion">
  <h3>Section 1</h3>
  <div>  
      <a href="http:/www.google.de" target="iframe">Google</a>                   
  </div>
  <h3>Go directly to google</h3>  
</div> 
```

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:00:07.733

手风琴标题不能链接到页面。

也许这可以帮助你：http: [//forum.jquery.com/topic/can-accordion-header-act-as-a-link-to-a-page](http://forum.jquery.com/topic/can-accordion-header-act-as-a-link-to-a-page)

# java - 解析 YAML 列表的正则表达式

> ID：14689136
> 
> 赞同：1
> 
> 时间：2013-02-04T14:44:59.647
> 
> 标签：java, regex, yaml, lookbehind

我有一个这样的 YAML 列表，需要用 Java 中的正则表达式对其进行解析：

```
stacks:
  - name: test1
    folder: a
  - name: test2
    folder: b 
```

最后我想迭代列表文本块。这意味着在创建 Pattern 实例之后，我希望此文本的 Matcher 实例找到两个匹配项：

1.

```
name: test1
folder: a 
```

2.

```
name: test2
folder: b 
```

忽略列表名称（上面的“堆栈”）时，我可以执行以下操作：

```
String regex = "^\\s++-(.*$\\n(?:^\\s++[^-].*$\\n)*)";
Pattern p = Pattern.compile( regex, Pattern.MULTILINE | Pattern.UNIX_LINES );
Matcher m = p.matcher( data ); 
```

使用此表达式生成的匹配器将找到我需要的两个匹配项。

但是，我实际上不想忽略列表名称，我想声明“在以下列表名称之后获取所有列表元素”（如方法调用`getListData(yamlData, listName)`）。看来我需要一个积极的向后回顾。不幸的是，我没有找到办法在仍然获得两场比赛的同时做到这一点。你有什么主意吗？

*（我知道有snakeyaml等库，可惜这里需要用到正则表达式。）*

**编辑**：我不能对所列对象的元素顺序做出任何假设。解决方案必须能够处理交换的名称和文件夹（可能还有其他）。

# android - 降低背景层的对比度和亮度

> ID：14689137
> 
> 赞同：1
> 
> 时间：2013-02-04T14:44:59.650
> 
> 标签：android, android-layout

我有一个带有动画背景层的菜单屏幕。这个背景是在运行时计算的，因此它不是一个简单的图像序列，它使用应用程序本身内部使用的图形元素。

一旦这些图形元素被研究为非常丰富多彩且可见，背景动画有时会使前景中的菜单有点混乱。

所以，我必须降低背景动画的对比度。在不更改图形元素的情况下降低背景对比度/亮度的最佳做法是什么？（或者可能模糊背景层）

而且，是否可以仅在屏幕的一部分（菜单按钮下方和周围）上降低对比度/亮度，而将屏幕的其余部分保持原样？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:08:42.283

您可以使菜单层更大（将其视为菜单本身的“填充”）；如果那个“填充”是暗的（黑色或接近它，取决于你想要达到的效果，如果你只想降低对比度，甚至可能是 50% 的灰色），那么你可以将它的 alpha 值设置为达到你的效果的东西“调暗”背景。或者让“填充”具有 alpha 渐变，以便变暗淡出/背景淡入。

# jquery - JQuery：选择一个包含给定元素的 HTML 表

> ID：14689138
> 
> 赞同：1
> 
> 时间：2013-02-04T14:45:01.360
> 
> 标签：jquery

假设我有以下 HTML

```
<table id = "mytable">
  <tr>
    <th>Hiring Manager</th>
    <td><textarea id = "textComments" cols = "15"/></td>
  </tr>
</table> 
```

从上面的标记中，我想附加以下行

```
<tr>
   <td></td>
   <td>
       <span class = "CharCounter">
           <span id="lblCharCounter">Label</span>
           characters (500 max)
       </span>
   </td>
</tr> 
```

我希望能够从**textarea**中选择表格。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:47:06.100

如果你想在表格中添加另一行，找到 textarea，然后慢慢地工作，直到你到达你想要的地方。要返回一个元素，只需再次使用 .parent() 即可。

```
$('#textComments').parent().parent().after('
    <tr>
       <td></td>
       <td>
         <span class = "CharCounter">
           <span id="lblCharCounter">Label</span>
           characters (500 max)
         </span>
      </td>
   </tr>'
); 
```

# php - PHP：使用 str_pad 不起作用？为什么？

> ID：14689139
> 
> 赞同：6
> 
> 时间：2013-02-04T14:45:06.857
> 
> 标签：php, string-concatenation

我有一个字符串，它的内容是“24896”。现在我想在左边添加一些零，所以我尝试了：

```
$test = str_pad($myString, 4, "0", STR_PAD_LEFT); 
```

结果又是“24896”，左边没有添加零。我在这里错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T14:46:47.837

的第二个参数`str_pad()`取最终字符串的全长；因为你通过了 4 并且长度`$myString`是 5，所以什么都不会发生。

您应该选择至少比示例值大一的宽度，例如：

```
str_pad($myString, 9, '0', STR_PAD_LEFT);
// "000024896" 
```

**更新**

这可能很明显，但是如果您总是希望在前面有 4 个零`$myString`：

```
'0000' . $myString; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T14:46:51.543

因为您将其填充到长度 4，并且您的字符串长度`24896`为 5 个字符，因此它不需要填充任何内容，因为它已经超过 4 个字符长。

函数中的第二个参数`str_pad`是字符串的新长度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T14:47:18.063

尝试

```
$myString = "24896" ;
$test = str_pad($myString, strlen($myString) + 4, "0", STR_PAD_LEFT);
echo $test; 
```

输出

```
000024896 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-29T09:01:36.197

假设您不知道它有多长，请先制作垫子并附上它。无需计算原始字符串的长度：

```
$x = 4;
$pad = str_pad('', $x, '0');
$test = $pad.$myString; 
```

或更好

```
 $x = 4;
 $test = str_pad('', $x, '0').$myString; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-09T05:57:42.997

您在 str_function 中指定的长度小于输入字符串阅读文档正确尝试这个它会为您工作

您的字符串是 5 个字符，例如 $myString=24896; 现在你想在左边加 5 个零

那么你的长度就是你 string + 5 实际是 5+5=10;

现在将它传递给函数你的函数将是这样的

$test = str_pad($myString, 10, "0", STR_PAD_LEFT);

回声$测试；

输出：0000024896

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-03T06:46:09.283

您要添加多少个零？没有添加零，因为填充长度小于给定的 $myString 长度。

请试试这个

```
$number = 24896; 
$number = sprintf('%06d', $number); 
echo $number; 
```

或使用这个

```
$number = 24896;
$number = str_pad($number, 6, '0', STR_PAD_LEFT);//here 6 is padding length
echo $number; 
```

输出

```
024896 
```

# magento - 目录产品中的 Magento Admin 自定义选项卡

> ID：14689142
> 
> 赞同：0
> 
> 时间：2013-02-04T14:45:14.220
> 
> 标签：magento, magento-1.7

我在目录产品下创建了一个自定义选项卡，该选项卡很好，但是当我单击该选项卡时，该块的模板没有加载。它回显我输入的内容，但没有获取模板。我在类 HTC_Csvpricing_Block_Adminhtml_Catalog_Product_Tab 中编写了这个函数 extends Mage_Adminhtml_Block_Template implements Mage_Adminhtml_Block_Widget_Tab_Interface

```
public function _construct()
{
    parent::_construct();
    echo "I m here";
    $this->setTemplate('csvpricing/tab.phtml');
} 
```

这是我在 app/design/adminhtml/default/default/layout/csvpricing.xml 中写的

```
<csvpricing_adminhtml_csvpricing_index>
    <reference name="content">
        <block type="csvpricing/adminhtml_csvpricing" name="csvpricing" />
    </reference>
</csvpricing_adminhtml_csvpricing_index>

<adminhtml_catalog_product_edit>
    <reference name="product_tabs">
        <action method="addTab">
            <name>csvpricing_tab</name>
            <block>csvpricing/adminhtml_catalog_product_tab</block>
        </action>
    </reference>
</adminhtml_catalog_product_edit> 
```

请指导我所缺少的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:21:13.263

您可以执行以下操作：模块 config.xml

```
<config>
    <adminhtml>
        <layout>
            <updates>
                <your_module>
                    <file>your-module.xml</file>
                </your_module>
            </updates>
        </layout>
    </adminhtml>
</config> 
```

在 /app/design/adminhtml/default/default/layout/your-module.xml 中创建布局 XML：

```
<?xml version="1.0"?>
<layout>
    <adminhtml_catalog_product_edit>
        <reference name="product_tabs">
            <action method="addTab">
                <name>your_module_some_tab</name>
                <block>your_module/adminhtml_catalog_product_tab</block>
            </action>
        </reference>
    </adminhtml_catalog_product_edit>
</layout> 
```

在 {your_module}/Block/Adminhtml/Catalog/Product/Tab.php 中创建选项卡块：

```
class Your_Module_Block_Adminhtml_Catalog_Product_Tab 
    extends Mage_Adminhtml_Block_Template
    implements Mage_Adminhtml_Block_Widget_Tab_Interface
{
    /**
     * Set the template for the block
     */
    public function _construct()
    {
        parent::_construct();

        $this->setTemplate('catalog/product/tab/some-tab.phtml');
    }

    /**
     * Retrieve the label used for the tab relating to this block
     *
     * @return string
     */
    public function getTabLabel()
    {
        return $this->__('Some Tab');
    }

    /**
     * Retrieve the title used by this tab
     *
     * @return string
     */
    public function getTabTitle()
    {
        return $this->__('Some Tab');
    }

    /**
     * Determines whether to display the tab
     * Add logic here to decide whether you want the tab to display
     *
     * @return bool
     */
    public function canShowTab()
    {
        return true;
    }

    /**
     * Stops the tab being hidden
     *
     * @return bool
     */
    public function isHidden()
    {
        return false;
    }
} 
```

如果您的模块还没有，您需要创建一个数据助手来支持翻译。

在 /app/design/adminhtml/default/default/template/catalog/product/tab/some-tab.phtml 中制作标签模板：

```
<div class="entry-edit">
    <div class="entry-edit-head">
        <h4>Some Heading</h4>
    </div>
    <div class="fieldset fieldset-wide">
        <div class="hor-scroll">
            <!-- your content here -->
        </div>
    </div>
</div> 
```

# python - 如何通过 xmlrpc (python) 传输二进制数据？

> ID：14689143
> 
> 赞同：5
> 
> 时间：2013-02-04T14:45:18.387
> 
> 标签：python, python-2.7, xml-rpc, xmlrpclib

顾名思义`xmlrpc`，这个传输协议依赖于`XML`携带数据，不能传输二进制数据，或者不可打印的 ASCII 字符（\n、\b、chr(2)、...）[或者可以吗？]。

我想知道是否有一种方法可以安全地将字符串从客户端传输到服务器，而对编码的影响最小（即仅在客户端）。我尝试了这`xmlrpclib.Binary`门课，但这似乎只适用于文件。

测试代码，server.py：

```
def output(text):
    print "-".join([str(ord(x)) for x in text])

from SimpleXMLRPCServer import SimpleXMLRPCServer
server = SimpleXMLRPCServer(('localhost', 1234))
server.register_function(output)
server.serve_forever() 
```

客户端.py：

```
import xmlrpclib
device = xmlrpclib.ServerProxy("http://localhost:1234/RPC2")
device.output(".\n."+chr(2)) 
```

预期结果：

```
46-10-46-2 
```

看到的结果（在服务器端）：

```
xmlrpclib.Fault: <Fault 1: "<class 'xml.parsers.expat.ExpatError'>:not well-formed (invalid token): line 7, column 1"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-12T19:25:39.133

我认为预期的答案是使用 xml-rpc base64 类型。在 python 中，在客户端，您必须使用类型手动指定字符串包含二进制数据`xmlrpclib.Binary`。

```
import xmlrpclib
device = xmlrpclib.ServerProxy("http://localhost:1234/RPC2")
device.output(xmlrpclib.Binary(".\n."+chr(2))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:51:36.297

您可以尝试在客户端将二进制数据编码为文本格式，然后在服务器中将其解码回二进制。您可以使用的一种编码是 base64。

在您的客户中：

```
import xmlrpclib
import base64
device = xmlrpclib.ServerProxy("http://localhost:1234/RPC2")
device.output(base64.b64encode(".\n."+chr(2))) 
```

在您的服务器中：

```
import base64
def output(text):
    print "-".join([str(ord(x)) for x in base64.b64decode(text)])

from SimpleXMLRPCServer import SimpleXMLRPCServer
server = SimpleXMLRPCServer(('localhost', 1234))
server.register_function(output)
server.serve_forever() 
```

# visual-studio - Qt OpenGL Window Example 拖动窗口时黑屏和冻结，为什么？

> ID：14689151
> 
> 赞同：2
> 
> 时间：2013-02-04T14:45:33.423
> 
> 标签：visual-studio, qt, visual-c++, opengl

我遵循了这个例子：[OpenGL Window Example](http://qt-project.org/doc/qt-5.0/qtgui/openglwindow.html "OpenGL 窗口示例") using Qt 5 built for msvc2012。当我运行应用程序时，窗口是黑色的，当我尝试调整窗口大小或拖动窗口时，应用程序会冻结，直到我将焦点从应用程序转移（alt-tap）并再次回到它。我可以最大化、最小化和关闭带有标准窗口装饰的应用程序（而不是冻结）。

# c - 引导跨平台编译器

> ID：14689154
> 
> 赞同：1
> 
> 时间：2013-02-04T14:45:43.903
> 
> 标签：c, compiler-construction, bootstrapping

假设您正在为一种名为 Foo 的新语言设计和编写编译器，它的优点之一是它特别适合实现编译器。一个经典的方法是用 C 编写编译器的第一个版本，然后用它用 Foo 编写第二个版本，之后它就可以自编译了。

这确实意味着您必须小心保留二进制文件的备份副本（与大多数程序相反，您只需保留源的备份副本）；一旦语言从第一个版本演变而来，如果您丢失了二进制文件的所有副本，您将无法编译当前版本。随它吧。

但假设它旨在同时支持 Linux 和 Windows。只要它实际上在两个平台上都运行，它可以在每个平台上自行编译，没问题。然而，假设您在一个平台上丢失了二进制文件（或有理由怀疑它已被攻击者破坏）；现在有一个问题。并且必须为每个受支持的平台保护二进制文件至少比我能接受的故障点多一个。

一种解决方案是让它成为一个交叉编译器，这样任何一个平台上的二进制文件都可以针对这两个平台。

这并不像听起来那么容易 - 虽然选择二进制输出格式没有问题，但每个平台都以 C 头文件的形式提供系统 API，这些头文件通常只存在于它们的本机平台上，例如没有保证代码`stdio.h`即使编译成 Linux 二进制格式，针对 Windows 编译也可以在 Linux 上运行。

也许这个问题可以通过将 Linux 头文件下载到 Windows 机器上并使用 Windows 二进制文件交叉编译 Linux 二进制文件来解决。

我缺少该解决方案是否有任何警告？

另一种解决方案可能是在 Python 中维护一个单独的最小引导编译器，它将 Foo 编译成可移植的 C，只接受主 Foo 编译器所需的语言子集并执行最小错误检查而不进行优化，目的是引导编译器因此将保持足够简单，以便在后续语言版本中维护它不会花费太多。

同样，我缺少该解决方案是否有任何警告？

过去人们用什么方法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:25:40.380

这是 C 编译器本身的问题。它通常完全按照您的建议通过使用交叉编译器来解决。

交叉编译编译器的过程并不比交叉编译任何其他项目更困难：也就是说，它比您想要的要复杂，但绝不是不可能的。

当然，您首先需要交叉编译器本身。这可能意味着对您的构建配置系统进行一些大手术，并且您需要从目标中获取某种“sysroot”（标头，库，您需要在构建中引用的任何其他内容）。

因此，最终这取决于您的编译器的结构。要么使用历史源重新引导更容易，重复你首先经历的语言兼容性的每个阶段（你确实使用了源版本控制，对吗？），或者更容易实现交叉编译器配置。我不能告诉你从这里是哪个。

多年来，GCC 编译器总是只用符合标准的 C 代码编写，正是因为这个原因：他们希望能够在任何操作系统上启动它，只给该系统的本机 C 编译器。直到 2012 年，它才决定 C++ 现在已经足够广泛，编译器本身可以用它来编写。即使这样，他们也只允许自己使用该语言的一个子集。将来，如果有人想将 GCC 移植到还没有 C++ 的平台，他们将需要使用交叉编译器，或者首先移植 GCC 4.7（最后一个主要的 C-only 版本），然后迁移到最新的.

此外，GCC 构建过程并不“信任”它构建时使用的编译器。当您键入“make”时，它首先构建自身的简化版本，然后使用该构建的完整版本。最后，它使用完整版本重建*另一个*完整版本，并比较两个二进制文件。如果两者不匹配，它就知道原始编译器有错误并引入了一些错误代码，并且构建失败。

# asp.net - 使用 ObjectDataSource 和 Repeater 时获取更新的对象

> ID：14689155
> 
> 赞同：0
> 
> 时间：2013-02-04T14:45:45.640
> 
> 标签：asp.net, vb.net, webforms, .net-4.5

我有一个绑定到页面上的 ObjectDataSource 的数据转发器。我有选择工作，但更新有问题。当我调用 Save 按钮时，我想做的是调用 UpdateMethod 中指定的函数并将其传递给转发器更改对象的参数。问题是我不知道如何将对象从中继器中取出。我不想将每个单独的字段指定为更新参数，因为这真的很笨拙并且违背了数据绑定的目的。对此的任何帮助都会很棒。

```
 <%@ Page Language="VB" %>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>
</head>
<body>
<form id="form1" runat="server">
    <asp:Repeater ID="Repeater1" runat="server" DataSourceID="ObjectDataSource1" ItemType="CompanyObject">
        <ItemTemplate>      
    <asp:Label ID="Label2" runat="server" CssClass="clsLabel">Company:</asp:Label>  
    <asp:TextBox ID="txtCompany" runat="server" Text='<%# BindItem.Company%>'></asp:TextBox>
        </ItemTemplate>
     </asp:Repeater>
        <asp:ObjectDataSource ID="ObjectDataSource1" runat="server"
        SelectMethod="GetData" TypeName="WebApplication1.CompanyObject"
        UpdateMethod="UpdateCompany" DataObjectTypeName="CompanyObject"></asp:ObjectDataSource>
    </form>
</body>
</html> 
```

这是我要调用的代码：

```
Public Function UpdateCompany(ByVal company As tblCompany)
'Save the Value here except that company is always null
End Function

Private Sub btnSave_Click(sender As Object, e As EventArgs) Handles btnSave.Click
    ObjectDataSource1.Update()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:15:49.307

您不能使用Repeater 控件来做到这一点：它不会保留它所绑定的对象的副本。它不进行双向绑定。

但其他控件可以。查看[FormView](http://msdn.microsoft.com/en-us/library/ms227970%28v=vs.100%29.aspx)、[GridView](http://msdn.microsoft.com/en-us/library/2s019wc0%28v=vs.100%29.aspx)和[DetailsView](http://msdn.microsoft.com/en-us/library/s3w1w7t4%28v=vs.100%29.aspx)。有关该主题的完整处理，请参见[此处](http://msdn.microsoft.com/en-us/library/ms228214%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T10:59:39.640

**这对于您所遵循的方法是不可能的。**

我们可以肯定地开发一个自定义的 Post Back 来实现所需的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T00:02:25.887

我不确定我是否完全了解这里发生的事情，而且我没有足够的声誉在评论中提问。你的保存按钮在哪里？我猜它在中继器之外。您是要保存中继器中出现的所有公司，还是只有一家公司？你想从中继器中取回什么？只是文本框中的公司名称？更多详细信息可能会提供您正在寻找的帮助。

`OnUpdating`此外，向您添加一个事件`ObjectDataSource`并在您的代码中处理它可能会有所帮助。

```
<asp:ObjectDataSource ID="ObjectDataSource1" runat="server"
SelectMethod="GetData" TypeName="WebApplication1.CompanyObject"
UpdateMethod="UpdateCompany" DataObjectTypeName="CompanyObject" 
OnUpdating="Company_Updating"></asp:ObjectDataSource> 
```

然后是你的代码：

```
Private Sub Company_Updating(ByVal s As Object, ByVal e As ObjectDataSourceMethodEventArgs)
    ' use e.InputParameters here to pass in the values you need
End Sub 
```

您可以[在此处](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.objectdatasourcemethodeventargs.inputparameters.aspx)查看如何使用的示例`InputParameters`。

**更新**

要回答您的问题，您应该能够使用以下内容从转发器的文本框中获取值：

```
Protected Sub Company_Updating(ByVal s As Object, ByVal e As ObjectDataSourceMethodEventArgs)
    If (Repeater1.Items.Count > 0) Then
        e.InputParameters.Add("CompanyName", CType(Repeater1.Items(0).FindControl("txtCompany"), TextBox).Text
    End If
End Sub 
```

但我认为中继器对于您在这里尝试做的事情是不必要的。转发器通常用于显示项目的集合。如果你的目标是简单地展示一家公司，你不能在你的代码中设置控件的`Text`属性吗？`TextBox`

```
Protected Sub Page_Load(ByVal s As Object, ByVal e As EventArgs) Handles Me.Load
    If (Not Page.IsPostBack) Then
        txtCompany.Text = yourCompanyObject.Name
    End If
End Sub 
```

# vba - 在 Excel 中查找 VBA 代码，而不是在正确的单元格中复制数据（只需要在我的代码中进行一个小修复）

> ID：14689156
> 
> 赞同：1
> 
> 时间：2013-02-04T14:45:45.463
> 
> 标签：vba, excel

我需要一些帮助来修复我编写的 VBA 代码。问题：

我在 sheet1 上有一个包含 3 列的 excel 文件（“名称”、“ID”和“名称数据”）：“名称数据”是一个空白列。

```
Name        ID      Name Data
Albert      4235 
John        4237 
Robert      4239 
Micky       4241 
Minnie      4243 
Donalid     4245 
Edited      4247 
Goofy       4249 
```

在工作表 2 上，有一个类似的 ID 列，只有一个 ID：例如：

```
ID
4243 
```

我有 vlookup 代码来匹配 sheet2 上的 ID 值（例如，这将是“4243”）与工作表 1 上的 ID 值，并将与该 ID 关联的名称复制到 sheet1 的“名称数据”。最终结果应如下所示：

```
Name       ID    Name Data
Albert    4235 
John      4237 
Robert    4239 
Micky     4241 
Minnie    4243     Minnie
Donalid   4245 
Edited    4247 
Goofy     4249 
```

问题：此代码的问题在于它将名称复制到“名称数据”下的第一个单元格中。例如：它执行以下操作：

```
Name      ID      Name Data
Albert    4235     Minnie
John      4237 
Robert    4239 
Micky     4241 
Minnie    4243 
Donalid   4245 
Edited    4247 
Goofy     4249 
```

名称“minnie”应复制到“名称数据”下的第 5 行，而不是第 1 行（不包括标题行）

谁能建议我在代码中修复什么？

万分感谢！

这是代码：

```
Sub lookup()
x = 2
Set rng1 = Worksheets("Sheet1").Range("b4:b8")
Set rng2 = Worksheets("Sheet2").Range("A2:A2")
For Each c1 In rng1
For Each c2 In rng2
If c1.Value = c2.Value Then
Worksheets("sheet1").Cells(x, 3).Value = c2.Value
If c1.Value <> c2.Value Then
Worksheets("Sheet1").Cells(x, 3).Value = Worksheets("Sheet1").Cells(x, 3).Value
x = x + 1
End If
End If
Next
Next
End Sub 
```

我知道这与这条线有关：

```
Worksheets("sheet1").Cells(x, 3).Value = c2.Value 
```

但我无法弄清楚是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:04:39.130

我完成了以下代码：

```
Sub lookup()

Set rng1 = Worksheets("sheet1").Range("B2:B19")
Set rng2 = Worksheets("sheet2").Range("A2:A2")

For Each c1 In rng1
    For Each c2 In rng2
        If c2.Value = c1.Value Then
            Worksheets("sheet1").Cells(c1.Row, 3).Value = Worksheets("sheet1").Cells(c1.Row, 1).Value
        End If
    Next
Next

End Sub 
```

您更正的文件已共享：[https ://www.dropbox.com/s/0nsr1iuwnzt1s1x/VlookupVBA.xlsm](https://www.dropbox.com/s/0nsr1iuwnzt1s1x/VlookupVBA.xlsm)

# iphone - 如何在 iPhone 中使 Uilabel 闪烁

> ID：14689158
> 
> 赞同：0
> 
> 时间：2013-02-04T14:45:55.477
> 
> 标签：iphone, ios, objective-c, uilabel

> **可能重复：**
> [UILabel 上的闪烁效果](https://stackoverflow.com/questions/6224468/blinking-effect-on-uilabel)

如何`UILabel`在 iPhone 中眨眼。我也尝试过谷歌搜索和SO。但是这些问题正在使标签动画化以改变颜色。但我不需要改变颜色。我只需要 UILabel 闪烁。是否可以？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T15:14:21.997

这是代码片段：

在您的控制器中创建一个 NSTimer 属性：

```
@property (strong, nonatomic) NSTimer *timer; 
```

在您的**viewDidLoad**方法中，启动计时器：

```
self.timer = [NSTimer scheduledTimerWithTimeInterval:0.2 target:self selector:@selector(toggleLabelAlpha) userInfo:nil repeats:YES]; 
```

最后编写切换标签的函数

```
- (void)toggleLabelAlpha {

    [self.label setHidden:(!self.label.hidden)];
} 
```

玩得开心

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:08:31.757

1：在你的类中创建一个 NSTimer 对象

```
NSTimer *updateTimer 
```

2：实例化定时器 -

```
updateTimer = [NSTimer scheduledTimerWithTimeInterval:1000 
                                               target:self 
                                               selector:@selector(appUpdate:)
                                               userInfo:nil
                                               repeats:YES]; 
```

3：编写定时器使用的Selector（方法）——

```
- (void)appUpdate:(NSTimer*)theTimer
{
    //Toggle the Text between a empty string and the text you want to display here
} 
```

# r - 根据ggplot2中的聚合数据放置线性线

> ID：14689163
> 
> 赞同：1
> 
> 时间：2013-02-04T14:46:05.063
> 
> 标签：r, ggplot2

```
dput(x)
structure(list(Date = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 
2L, 3L, 3L, 3L, 3L), .Label = c("1/1/2012", "2/1/2012", "3/1/2012"
), class = "factor"), Server = structure(c(1L, 2L, 3L, 4L, 1L, 
2L, 3L, 4L, 1L, 2L, 3L, 4L), .Label = c("A", "B", "C", "D"), class = "factor"), 
    Storage = c(10000L, 20000L, 30000L, 15000L, 15000L, 25000L, 
    35000L, 15700L, 16000L, 27000L, 37000L, 16700L)), .Names = c("Date", 
"Server", "Storage"), class = "data.frame", row.names = c(NA, 
-12L)) 
```

我想创建一个堆栈栏 x=Date, y=Storage 并根据总存储量放置一条线性线。

我想出了这条 ggplot 行：

```
ggplot(x, aes(x=Date, y=Storage)) + geom_bar(aes(x=Date,y=Storage,fill=Server), stat="identity", position="stack") + geom_smooth(aes(group=1),method="lm", size=2, color="red") 
```

它有点工作，但线性线不是基于日期框架 x 上给定日期的总存储量。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:59:28.127

通常最简单的方法就是计算 ggplot2 之外的值。所以计算总数：

```
dd = as.data.frame(tapply(x$Storage, x$Date, sum))
dd$Date = rownames(dd)
colnames(dd)[1] = "Storage" 
```

然后添加一个`geom_smooth`调用但指定数据：

```
ggplot(x, aes(x=Date, y=Storage)) + 
    geom_bar(aes(x=Date,y=Storage, fill=Server), stat="identity", position="stack") + 
    geom_smooth(data = dd, aes(x=Date, y=Storage, group=1),method="lm") 
```

# http - AngujarJS 异步“经过身份验证”检查

> ID：14689164
> 
> 赞同：0
> 
> 时间：2013-02-04T14:46:07.350
> 
> 标签：http, angularjs

我想根据用户是否经过身份验证在我的 HTML 中显示/隐藏元素。我的 HTML 是静态的，`GET /check`当有一个名为`session`. 以下作品：

HTML：

```
<div class="ng-cloak" ng-show="loggedIn()">Foo</div>
<div class="ng-cloak" ng-hide="loggedIn()">Bar</div> 
```

咖啡脚本：

```
angular.module('app', ['ngCookies']).run ($cookies, $http, $rootScope) ->
    if $cookies.session
        $http.get('/check').success (data) -> $rootScope.user = data

    $rootScope.loggedIn = ->
        if $rootScope.user then true else false 
```

问题是，当用户通过身份验证时（`user`不为空，因此`loggedIn()`为真），仍有一小段时间 Bar 仍然显示，因为脚本仍在等待`GET /check`返回（因此`user`仍然为空，因此`loggedIn()`为假）。我该如何解决？

**更新：**小提琴： http: [//jsfiddle.net/dexrN/1/](http://jsfiddle.net/dexrN/1/)（删除`$cookies`并替换`$http`为`$timeout`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:59:43.680

由于您需要三种状态（不是两种），因此使用[ng-switch](http://docs.angularjs.org/api/ng.directive%3angSwitch)（而不是 ng-hide/ng-show）来切换三种状态：未知、已登录、未登录。您可能需要使用另一个 $scope 属性这。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:50:49.573

@mark-rajcok 是正确的，但对我来说太冗长了。这是我最终使用的解决方案，主要介绍`loggedOut()`：

```
<div class="ng-cloak" ng-show="loggedIn()">Foo</div>
<div class="ng-cloak" ng-show="loggedOut()">Bar</div> 
```

咖啡脚本：

```
angular.module('app', ['ngCookies']).run ($cookies, $http, $rootScope) ->
    if $cookies.session
        $http.get('/check')
            .success (data) ->
                $rootScope.user = data
            .error -> 
                $rootScope.user = {}
                delete $cookies.session
    else
        $rootScope.user = {}

    $rootScope.loggedIn = -> $rootScope.user and $rootScope.user.username
    $rootScope.loggedOut = -> $rootScope.user and not $rootScope.user.username 
```

# html - 拉伸浏览器窗口时防止有序列表移动

> ID：14689166
> 
> 赞同：0
> 
> 时间：2013-02-04T14:46:07.773
> 
> 标签：html, css, list, window

我确定这可以追溯到基本的 web 101，我很惭愧地问，但我有一个有序的号码列表，我已经在图像下设置了。当您单击任何数字时，图像将变为不同的图像。

一切正常，直到我调整浏览器窗口的大小 - 数字保持在它们所在的位置（它们的位置是相对的）并且其他所有东西都移动到页面的中心（因为我希望它这样做）。

这是实时页面的链接 - [http://thewiredlife.net/kelseytest/fish.html](http://thewiredlife.net/kelseytest/fish.html)

```
<div id="sectionwrap" class="svw">
<ul>
<li><img src="images/fish_full.png" width="1024" height="602" alt="fish"></li>
<li><img src="images/fish_full_2.png" width="1024" height="602" alt="jj"></li> 
</ul></div>

#sectionwrap {
width: 1024px;
height:340px;
margin-left: auto;
margin-right: auto;
margin-top:20px;}

.svw {width: 50px; height: 102px;}
.svw ul {position: relative; left: -999em;}

.stripViewer {
position: relative;
overflow: hidden;
margin: 0 0 1px 0;
}
.stripViewer ul
margin: 0;
padding: 0;
position: relative;
left: 0;
top: 0;
width: 1%;
list-style-type: none;
}
.stripViewer ul li {
float:left;
}
.stripTransmitter {
overflow: auto;
width: 1%;
}
.stripTransmitter ul {
margin-top:6px;
margin-left: 60px;
padding: 0;
list-style-type: none;
}
.stripTransmitter ul li{
width: 20px;
float:left;
margin: 0 1px 1px 0;
}
.stripTransmitter a{
font-family: 'OpenSansLight', Helvetica, Arial, sans-serif;
font-size:14px;
text-align: center;
line-height: 22px;
color: #BCBCBC;
text-decoration: none;
display: block;
} 
```

调整窗口大小时，有什么解决方案可以使数字跟随其余内容？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:59:54.617

First- your numbers are not in the class you posted above, take a look at your source. Your numbers are inside `stripTransmitter0`. I would suggest making those numbers stand out a little more. Second - you've given it a witdh, now add a `margin: 0 auto` to center `stripTransmitter0` just like `sectionwrap`.

# c# - 将 .txt 文件加载到 FlowDocument 中

> ID：14689170
> 
> 赞同：1
> 
> 时间：2013-02-04T14:46:24.780
> 
> 标签：c#, richtextbox, converter, flowdocument, typeconverter

如何加载 .txt 文件`FlowDocument`以将其放入 .txt 文件中`RichTextBox`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:44:11.843

下面是一个非常简单的方法。

```
using (var fs = new FileStream(FileName, FileMode.OpenOrCreate))
{
     var range = new TextRange(Document.ContentStart, Document.ContentEnd);
     range.Load(fs, DataFormats.Text);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:52:53.817

你试过谷歌吗？

[http://www.c-sharpcorner.com/uploadfile/mahesh/loading-a-text-file-in-a-wpf-flowdocumentreader/](http://www.c-sharpcorner.com/uploadfile/mahesh/loading-a-text-file-in-a-wpf-flowdocumentreader/)

[将 XAML 转换为 FlowDocument 以在 WPF 中的 RichTextBox 中显示](https://stackoverflow.com/questions/2830987/convert-xaml-to-flowdocument-to-display-in-richtextbox-in-wpf)

# tsql - SSRS - 优化 T-SQL 查询中的 WHERE 条件

> ID：14689176
> 
> 赞同：0
> 
> 时间：2013-02-04T14:46:53.980
> 
> 标签：tsql, parameters, ssrs-2008, reporting-services

我正在开发一份报告，该报告应根据用户指定的参数返回结果。有 3 个报告参数，一个是带有“Locations”的下拉列表，另外两个是要在“user_id”和用户的名字或姓氏中搜索的文本参数。这是我目前正在使用的：

```
SELECT * 
FROM UserTable1
WHERE Location = @Location
AND (user_id LIKE '%'+@SearchUserID+'%'
AND first_name LIKE '%'+@SearchUserName+'%' 
OR last_name LIKE '%'+@SearchUserName+'%') 
```

如果用户将 @SearchUserID 参数字段留空，则应返回所有 user_ids（满足其他 2 个参数）。如果指定，它将返回在 user_id 中具有该子字符串的 user_ids。@SearchUserName 参数字段也是如此。如果留空，它应该返回满足其他参数的所有用户。如果指定，它应该返回在其 first_name 或 last_name 中具有该子字符串的所有用户（但仅返回满足其他参数的结果）。如果两者都留空，它应该返回所有用户。

我上面的查询不起作用。它似乎只返回满足 @SearchUserName 参数的结果，但忽略了 @SearchUserID 参数。有没有办法解决这个问题？我已将@SearchUserID 过滤器放在tablix 本身上，使用表达式：=" *" & 参数！SearchUserID.Value & "* " 但这导致性能严重受阻..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:53:44.313

试试这个。`NULL`如果参数为空白（空），则必须通过。

```
SELECT * 
FROM UserTable1
WHERE Location = @Location
AND (user_id LIKE '%'+@SearchUserID+'%'
       OR @SearchUserID IS NULL
    )
AND (first_name LIKE '%'+@SearchUserName+'%'
       OR last_name LIKE '%'+@SearchUserName+'%'
       OR @SearchUserName IS NULL
    ) 
```

“....但忽略 @SearchUserID 参数。” 什么数据类型`user_id`？

# php - 在动态创建的表单字段 Jquery .insertBefore 之前添加标题

> ID：14689180
> 
> 赞同：4
> 
> 时间：2013-02-04T14:47:10.783
> 
> 标签：php, jquery, wordpress, insert

我有一个动态创建的表单，所以我无法编辑表单本身的布局。但是，我想在表单中的一个文本输入字段上方添加一个标题。我为该字段提供了一个唯一的 css ID，并使用以下脚本尝试在它之前添加我的标题：

```
<script type="text/javascript">
$('<h5 class="form_title">Calculate Return</h5>').insertBefore('#price');
</script> 
```

出于某种原因，这不起作用，任何人都可以想到为什么会这样。这是有问题的页面

[http://www.theres-a-thought.com/client-yourdream/?page=property_submit](http://www.theres-a-thought.com/client-yourdream/?page=property_submit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:49:37.973

将准备好的文档添加到您的代码中 -

```
<script type="text/javascript">
$(document).ready(function() {
    $('<h5 class="form_title">Calculate Return</h5>').insertBefore('#price');
});
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T14:54:09.600

查看您的页面，我看不到在哪里`#price`定义。也许它是稍后通过 JS 添加的，我错过了它..

您在无冲突模式下使用 jquery，并且需要将代码包装在准备好的文档中。

```
<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery('<h5 class="form_title">Calculate Return</h5>').insertBefore('#price');
});
</script> 
```

运行这个；但是，对页面没有影响（据我所知）。

下面的代码有效，因为 ID 存在。这不是你想要完成的，但它应该让你开始。

```
<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery('<h5 class="form_title">Calculate Return</h5>').insertBefore('#property_name');
});
</script> 
```

# web-applications - Websockets：丢失的 Ping 怎么办？

> ID：14689183
> 
> 赞同：1
> 
> 时间：2013-02-04T14:47:21.133
> 
> 标签：web-applications, web, websocket, ping, latency

我正在尝试实现一个协议，以将收到的 Pong 与相应的 Ping 进行匹配。

但是对于我发送但没有收到 Pong 的 Ping，我该怎么办？这会发生吗？还是保证所有 ping 都会有相应的 Pong，并且从未收到 Pong 表示连接丢失？websocket 协议文档对此保持沉默。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:58:59.457

符合要求的 WebSocket 实现必须在收到 ping 时返回一个 pong。通常，在合理的时间后没有 pong 意味着网络错误或远程端点上的其他东西正忙或损坏。有一些注意事项。

*   只有最近的 ping 必须被确认。如果您发送两个 ping，您可能只会收到一个 pong。
*   ping 和 pong 是控制帧。WebSocket 没有单独的控制帧通道。大数据帧可能会延迟接收紧随其后的 ping。实现可以分段数据消息以改善控制消息延迟。
*   收到关闭帧后不会发送 pongs。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:56:36.740

Websockets 基于 TCP 协议，可确保按顺序处理所有数据包，并在继续处理传入数据之前重新传输丢失或损坏的数据包。

因此，丢失 pong 的唯一可能解释是在连接的另一端执行 ping/pong 协议时出现错误。

在浏览网页时可以很容易地看到 TCP 协议的可靠性及其排序。当您的互联网连接不佳时，网站加载可能会在进行过程中中断，但那些加载的部分始终处于正确的顺序并且没有任何 errohETHgf%$/GHfDw(&IjfdsAyW$§REggnfdER§$HHxM+FD5

# oracle - 我可以通过 Oracle 的 DB LINK 连接到哪些数据库？

> ID：14689186
> 
> 赞同：0
> 
> 时间：2013-02-04T14:47:22.173
> 
> 标签：oracle, dblink

我可以通过 DB Link 连接到哪些 DB，形成一个 Oracle DB？有清单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:57:54.383

如果您使用的是 ODBC 网关（不需要额外的许可），您可以连接到任何可以获得 ODBC 驱动程序的数据库。

如果您询问使用平台特定网关之一（确实需要额外许可），Oracle 有适用于 SQL Server、Sybase、Teradata 和 Informix 以及 VSMA、IMS、DRDA、APPC 和 Adabas 的网关。您可以查看 Oracle 文档中所有这些网关的[各种用户指南](http://www.oracle.com/pls/db112/portal.all_books#index-GAT)。

# cakephp - 在 CakePHP 2 中如何在不创建表单的情况下插入输入字段？

> ID：14689189
> 
> 赞同：0
> 
> 时间：2013-02-04T14:47:24.290
> 
> 标签：cakephp, cakephp-2.0, formhelper

我想用表单助手创建格式良好的表单元素，但不创建表单本身。所以我写道：

```
$this->Form->input(
    'Kid.id', 
    array(
        'type' => 'text',
    )
); 
```

这是“儿童”控制器响应中的 ajax，我想在用户进行一些操作后更新表单。

我不知道该怎么做，除了手动编写 HTML 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T12:35:49.183

真丢人。这很有效，我只是忘了`echo`在行首添加一个。

# ios - 如何为 UITableViewCell 的颜色设置动画？

> ID：14689190
> 
> 赞同：0
> 
> 时间：2013-02-04T14:47:24.430
> 
> 标签：ios, uitableview, uikit, uiviewanimation

我想让用户在应用程序中的几个调色板之间切换，IE XCode 和其他文本编辑器如何让你在浅色和深色背景之间切换。我能够简单地完成所有这些，但现在我试图将更改包装在一个简单的动画块中，以便颜色更改淡入。除了我的表格视图单元格之外，一切都很好。颜色会改变，但它们不会动画。

```
[UIView animateWithDuration:0.5 animations:^{
    self.tableView.backgroundColor = [UIColor whiteColor];

    for (UITableViewCell *cell in self.tableView.visibleCells)
    {
        cell.textLabel.textColor = [UIColor blueColor];
    }
}]; 
```

我试图不重新加载整个表格，因为这会导致很多我不想要的东西再次布局。坦率地说，我已经尝试了几次，但它仍然不起作用。

对于它的价值，我的 UITableView 是分组的，尽管我认为这并没有真正影响我的解决方案。

此处列出的答案很有趣，但我认为与我的问题无关 - 我正在更改从不动画的文本颜色：[动画 UITableViewCell's backgroundColor in block animation](https://stackoverflow.com/questions/10984002/animating-uitableviewcells-backgroundcolor-in-block-animation)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:00:52.647

The problem is that text properties are not animatable. In order to animate your changes I would recommend adding a custom view in your table cell's `contentView` than you can use a view transition animation to swap the old view for the new one (with the new colours set). This will mean doing your own layout for the view you put into the `contentView` since you're not using one of the predefined styles any more.

See docs here: [http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:18:29.890

谢谢大家，@shadowhorst 链接真的很有帮助。我能够通过使用交叉溶解过渡而不是 animateWithDuration 方法来完成我想要的。代码如下 -

```
[UIView transitionWithView:self.tableView
                  duration:0.25
                   options:UIViewAnimationOptionTransitionCrossDissolve | UIViewAnimationOptionAllowAnimatedContent
                animations:^{
                    self.tableView.backgroundColor = [UIColor whiteColor];;

                    for (UITableViewCell *cell in self.tableView.visibleCells)
                    {
                        cell.textLabel.textColor = [UIColor blueColor];
                    }
                }
                completion:nil]; 
```

我确实注意到分组单元的边缘周围仍然存在一些伪影，这就是为什么我将动画的持续时间降低到四分之一秒的原因。

# jodatime - 用于显示两个最重要单位的期间格式化程序（例如“年，星期一”表示长时间，“小时，分钟”简称？）

> ID：14689192
> 
> 赞同：8
> 
> 时间：2013-02-04T14:47:28.473
> 
> 标签：jodatime

我有一个定义如下的 Joda 时间段格式化程序。我希望它只显示两个最重要的单位。

因此，在很长一段时间内，它可能会产生“x 年，y 月”。短时间“x 小时，y 分钟”。

使用 Joda 实现这一目标的最佳方法是什么？

```
val periodFormatter: PeriodFormatter = new PeriodFormatterBuilder()
    .printZeroNever().appendYears().appendSuffix(" year", " years")
    .appendSeparator(", ")
    .printZeroNever().appendMonths().appendSuffix(" month", " months")
    .appendSeparator(", ")
    .printZeroNever().appendDays().appendSuffix(" day", " days")
    .appendSeparator(", ")
    .printZeroNever().appendHours().appendSuffix(" hr", " hrs")
    .appendSeparator(", ")
    .printZeroRarelyLast().appendMinutes().appendSuffix(" min", " mins")
    .toFormatter(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:04:54.183

该方法`minimumPrintedDigits`适用于“下一个和后面的附加字段”。由于您使用的是`printZeroNever`，我建议将方法放在`minimumPrintedDigits`附加方法之前。编辑：只使用它会更好`printZeroNever`。

# django - {% URL %} 标签的问题

> ID：14689193
> 
> 赞同：-1
> 
> 时间：2013-02-04T14:47:29.387
> 
> 标签：django, django-templates

我一直在尝试在我的 Django 应用程序中实现超链接，其中显示项目列表，单击每个项目将带您进入详细说明有关该项目的更多信息的页面。

我一直在与 {% URL %} 标签搏斗，尽管在这里搜索，互联网和有关此事的书籍，我还没有让它工作。

在views.py中：

```
def Link(request):
    return render_to_response('Search_Page.html') 
```

在 Urls.py 中：

```
urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'ParkManager.views.home', name='home'),
    # url(r'^ParkManager/', include('ParkManager.foo.urls')),
    url(r'^test/', Search_Page),
    url(r'^search/', Search),
    url(r'^details/', Details_Main),
    url(r'^Link/(d+}/$', Link),
    url(r'^$', 'Parks.views.Link', name="home"), 
```

在我的模板中：

```
 <a href="{% url home %}">test</a> 
```

谢谢你的时间 ：）

编辑错误：

页面加载，但是当我添加时，链接仅将您带到 127 .0 .0 .1 /8000：测试

我得到：

```
NoReverseMatch at /search/
Reverse for 'name' with arguments '(u'North West Thrill Centre',)' and keyword arguments '{}' not found.

Request Method:

GET

Request URL:

http://127.0.0.1:8000/search/?search=a&type=parks&submit=Search

Django Version:

1.4.2

Exception Type:

NoReverseMatch

Exception Value:

Reverse for 'name' with arguments '(u'North West Thrill Centre',)' and keyword arguments '{}' not found. 

Exception Location:

C:\Python27\lib\site-packages\django\template\defaulttags.py in render, line 424

Python Executable:

C:\Python27\python.exe

Python Version:

2.7.3

Python Path:

['C:\\Users\\User\\Documents\\Django\\ParkManager',
 'C:\\Windows\\system32\\python27.zip',
 'C:\\Python27\\DLLs',
 'C:\\Python27\\lib',
 'C:\\Python27\\lib\\plat-win',
 'C:\\Python27\\lib\\lib-tk',
 'C:\\Python27',
 'C:\\Python27\\lib\\site-packages'] 

Server time:

Mon, 4 Feb 2013 16:05:30 +0000

Error during template rendering

In template C:\Users\User\Documents\Django\ParkManager\Templates\Details_Main.html, error at line 23

Reverse for 'name' with arguments '(u'North West Thrill Centre',)' and keyword arguments '{}' not found. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:44:33.473

一条线索：异常位置：
_compile 中的 C:\Python27\lib\re.py，第 242 行

您的问题与 url 标签无关。它是您的 urls.py 中格式错误的正则表达式。

## 网址.py

```
urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'ParkManager.views.home', name='home'),
    # url(r'^ParkManager/', include('ParkManager.foo.urls')),
    url(r'^test/', Search_Page),
    url(r'^search/', Search),
    url(r'^details/', Details_Main),
    # LINE BELOW has an open parentheses and not a closed parentheses. 
    url(r'^Link/(d+}/$', Link), 
    #url(r'^Link/(d+)/$', Link), #line fixed 
    url(r'^$', 'Parks.views.Link', name="home"), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:51:36.810

不平衡括号是这一行的问题：

```
url(r'^Link/(d+}/$', Link), 
```

您忘记关闭括号。

如果您在 Django < 1.5 中使用 {% url %} 标记，请以这种方式使用它：

```
{% load url from future %}

{% url 'namespace:viewname' arg1, arg2 %}
{% url 'namespace:viewname' kwarg1=val, kwarg2=val2 %} 
```

如果您使用的是 Django 1.5，则不必加载特殊的 url 标签。如果您不使用命名空间（如果您使用的是列表、详细信息等通用视图名称，并且您想区分应用程序，例如：作者：列表或书籍：列表），则仅使用视图名称。检查文档，关于 url 标签有一个很好的部分 - [https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#url](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#url)

# sql - 从oracle中的表中选择员工

> ID：14689194
> 
> 赞同：1
> 
> 时间：2013-02-04T14:47:31.160
> 
> 标签：sql, oracle11g

大家好，我有以下与以下问题相关的问题

```
From tables emp and dept find number of employees working in every departments by their jobs.
Showing number not more than 5. 
```

我写了下面的东西

```
select count(*)
from emp  e,dept d
where  e.department_id=d.department_id  and  count(*)<5

group by   e.department_id,e.job; 
```

但它向我显示了以下错误

```
Error at Command Line:3 Column:23
Error report:
SQL Error: ORA-00933: SQL command not properly ended
00933\. 00000 -  "SQL command not properly ended"
*Cause:    
*Action: 
```

什么问题？请帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:48:14.513

尝试使用`HAVING`子句

```
SELECT  COUNT(*)
FROM    emp  e 
        INNER JOIN dept d 
            ON e.department_id=d.department_id  
GROUP   BY   e.department_id,e.job
HAVING  count(*)<5 ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T14:52:00.587

由于您尝试根据`count(*)`值进行过滤，因此需要使用`HAVING`子句。`HAVING`子句使用聚合函数进行过滤。

虽然[@JW 的答案](https://stackoverflow.com/questions/14689194/select-employees-from-table-in-oracle/14689211#14689211)没有任何问题，但我会稍微更改它以使用 ANSI`JOIN`语法而不是子句中的`JOIN`语法：`WHERE`

```
select count(*) Total
from emp e
inner join dept d
    on e.department_id=d.department_id  
group by e.department_id, e.job 
having count(*) < 5 
```

或者，您可以使您的查询成为子查询，以使用以下方式进行过滤`WHERE`：

```
select Total
from
(
   select count(*) Total
   from emp e
   inner join dept d
      on e.department_id=d.department_id  
   group by e.department_id, e.job 
) src
where total < 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T14:51:31.883

尝试这个：：`having`

```
select count(*)
from emp  e,dept d
where  e.department_id=d.department_id  

group by   e.department_id,e.job having count(*)<5; 
```

# jquery - $.getJSON 得到响应但 console.log 不会输入

> ID：14689195
> 
> 赞同：0
> 
> 时间：2013-02-04T14:47:32.267
> 
> 标签：jquery, json, jsonp

我使用以下 jQuery 从 x 服务器获取一些 JSON：

```
$(function(){
    $.getJSON("/json.php?method=getStupid&jsoncallback=?",
        function(json){
            console.log('Success: ' + json);
        }
    );
}); 
```

每个浏览器的控制台都是空的，但是当我检查网络选项卡时，它似乎一切正常。

```
HTTP/1.1 200 OK
Date: Mon, 04 Feb 2013 14:14:01 GMT
Server: Apache/2.2.16 (Debian)
X-Powered-By: PHP/5.3.3-7+squeeze9
Cache-Control: no-cache, must-revalidate
Expires: Mon, 26 Jul 1997 05:00:00 GMT
Content-Length: 33
Keep-Alive: timeout=15, max=99
Connection: Keep-Alive
Content-Type: application/json 
```

这就是响应的样子：

```
({"a":1,"b":2,"c":3,"d":4,"e":5}) 
```

感觉 function(json) { } 中的所有内容都被忽略了。是错字吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:51:51.993

正如您`jsoncallback=?`在 URL 中所看到的那样，服务器正在使用 JSONP 进行响应。

服务器正在尝试构建

```
functionName({"a":1,"b":2,"c":3,"d":4,"e":5}) 
```

并且由于`getJSON`没有给出函数名称，因此您以

```
({"a":1,"b":2,"c":3,"d":4,"e":5}) 
```

这不是 JSON。

您可以通过`jsoncallback=?`从 URL 中删除来解决您的问题。

如果服务器只能以 JSONP 回答（我对此表示怀疑），那么您最好使用通用的[$.ajax](http://api.jquery.com/jQuery.ajax/)函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:53:29.587

您正在附加`jsoncallback=?`，这意味着您正在请求 JSONP。这*仅*用于跨域通信。如果此 URL 在您的域中，则只需使用 JSON。

丢失响应中 JSON的`jsoncallback=?`, 和. `()`那么它将是有效的 JSON。

如果需要使用 JSONP，则需要正确格式化请求。

首先，JSONP*不是*JSON。它实际上是附加到页面的脚本标签。所以，它`Content-type`应该是`text/javascript`。

其次，`jsoncallback`参数很重要。发回响应时，您需要将数据“包装”在该参数的值中。

因此，如果请求是`/json.php?method=getStupid&jsoncallback=test123`，则响应应该是：

```
test123({"a":1,"b":2,"c":3,"d":4,"e":5}) 
```

# php - html电子邮件的textarea中的wp_mail换行符

> ID：14689196
> 
> 赞同：4
> 
> 时间：2013-02-04T14:47:37.290
> 
> 标签：php, html, wordpress, email

我在使用 wp_mail 功能时遇到问题，希望有人能帮助我。

我需要在用户添加到文本区域“消息”的电子邮件中插入换行符。

有人可以帮忙吗？

我目前有以下代码从联系表发送电子邮件：

```
<?php

if( !isset($_REQUEST) ) return;

require('../../../../wp-load.php');
function wpse27856_set_content_type(){
return "text/html";
}
add_filter( 'wp_mail_content_type','wpse27856_set_content_type' );

$name = $_REQUEST['name'];
$phone = $_REQUEST['phone'];
$email = $_REQUEST['email'];
$msg = $_REQUEST['message'];

$headers = 'From: '.$name.' <'.$email.'>' . "\r\n";
$message = '
<html>
<body>
Someone has made an enquiry on the online contact form:

<br /><br />
        <b>Contact Details:</b><br />
        '.$name.'<br />
        '.$phone.'<br />
        '.$email.'<br /><br />
        <b>Message:</b><br />
        '.$msg.'<br />

        <br /><br />

</body>
</html>
            ';

wp_mail('email@email.co.uk', 'Contact form Message' , $message, $headers);

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:27:57.123

默认情况下，wp_mail() 以纯文本形式发送消息，因此电子邮件客户端不会解析 HTML。

在您的电子邮件中包含以下标题：

```
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

由于您的电子邮件采用 HTML 格式，因此最好使用适当的 HTML 样板（HTML、HEAD、BODY...）使其有效。

或者，您可以用
回车符 (\r\n) 替换您的标签，尽管您仍然需要摆脱标签。

这已经包含在 mail() 的 PHP 文档中，wp_mail() 围绕该文档进行包装。

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T14:49:39.277

如果您的 textarea 包含 html，您可以在邮件中添加标题

```
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T14:49:58.637

`$msg = nl2br($_REQUEST['message']);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-04T11:31:53.553

使用此标头在电子邮件中发送 html

```
$headers  = "MIME-Version: 1.0" . "\n";
    $headers .= "Content-type: text/html; charset=iso-8859-1" . "\n";
    $headers .= "X-Priority: 1 (Higuest)\n";
    $headers .= "X-MSMail-Priority: High\n";
    $headers .= "Importance: High\n";

    $headers .= "From: Approprice <".$mailfrom.">" . "\n";
    $headers .= "Return-Path: Approprice <".$mailfrom.">" . "\n";
    $headers .= "Reply-To: Approprice <".$mailfrom.">"; 
```

# c# - 从图片框中删除图像引用（C#）

> ID：14689203
> 
> 赞同：0
> 
> 时间：2013-02-04T14:47:54.897
> 
> 标签：c#, lilypond

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;

namespace MyProject
{
    public partial class MyForm : Form
    {
        Process MyProcess;

        public MyForm()
        {
            InitializeComponent();
        }

        private void MyForm_KeyPress(object sender, KeyPressEventArgs e)
        {
            switch (e.KeyChar)
            {
                case 'a':
                    this.MyPictureBox.Image = null;
                    this.MyProcess = new Process();
                    this.MyProcess.StartInfo =
                        new ProcessStartInfo("\"C:\\Program Files (x86)\\LilyPond\\usr\\bin\\lilypond.exe\"", "--png tmp.ly");
                    this.MyProcess.Start();
                    this.MyProcess.WaitForExit();
                    this.MyPictureBox.Image = new Bitmap("tmp.png");
                    break;
                default:
                    break;
            }
        }
    }
} 
```

`"C:\Program Files (x86)\LilyPond\usr\bin\lilypond.exe" --png tmp.ly`命令创建`tmp.png`. 当我`a`第一次按下键时，MyProcess 返回 0，但下一个 - 总是返回 1。我认为问题出在`tmp.png`MyPictureBox 正在使用的覆盖文件中，但我不知道如何修复它。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:56:30.080

据我所知，lilypond 没有提供使用命令行参数覆盖的选项。如果我是对的，那么您可以在 MyProcess 启动之前包含代码以删除然后 png 文件（如果存在）。

```
if (System.IO.File.Exists(path))
{
    System.IO.File.Delete(path);
} 
```

# javafx-2 - 使用 weinre 调试 JavaFX Web 视图

> ID：14689204
> 
> 赞同：0
> 
> 时间：2013-02-04T14:47:57.527
> 
> 标签：javafx-2, weinre

有没有人尝试使用 weinre 调试在 javafx Web 视图中呈现的网页？这是可能的还是网络视图缺乏必要的基础设施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:02:57.933

由于浏览器的 Weinre 接口只是 JavaScript 并且 JavaScript 在 WebView 中执行得很好，WebView 具有使用 weinre 的“必要基础设施”。

为了说明如何在 WebView 的上下文中执行 JavaScript，您可以查看我使用基于 JavaScript 的 Firebug Lite 工具调试 WebView 的代码：[JavaFX WebView 中的 Html/Javascript 调试](https://stackoverflow.com/questions/9398879/html-javascript-debugging-in-javafx-webview)。该代码是 Firebug Lite 小书签中代码的略微修改版本。由于 Weinre 也有一个可用于启动它的小书签，因此您可以为 Weinre 执行类似的翻译，就像我为 Firebug Lite 所做的那样。

此外，可以通过在目标网页中放置一个脚本标签来使用 Weinre。看看我为将 jQuery 脚本库嵌入到 WebView 中创建的一些[示例代码- 您可以对 Weinre 脚本库执行相同的操作。](https://gist.github.com/3077942)

我怀疑以前是否有人尝试过将 WebView 与 Weinre 一起使用。

# javascript - 在外部访问 jQuery Closure 函数

> ID：14689205
> 
> 赞同：1
> 
> 时间：2013-02-04T14:48:01.830
> 
> 标签：javascript, jquery, jquery-ui, closures

我将此代码嵌入到我的文件中，用于管理会话超时。这是来自[http://www.fairwaytech.com/2012/01/handling-session-timeout-gracefully/](http://www.fairwaytech.com/2012/01/handling-session-timeout-gracefully/)

> 我想调用 SessionManager.extend() 来完成所有 ajax 请求。所以我可以自动刷新我的会话管理器时间。

这是我试过的

```
<script type="text/javascript">
    $(document).ajaxSuccess(function (event, xhr, settings) {
        if (xhr.status === 200) {
            SessionManager().extend();
        }
    });
</script> 
```

**收到未找到 SessionManager 对象的错误。我们怎么称呼它？**

以下是取自该站点的库代码

```
$(function () { // Wrap it all in jQuery documentReady because we use jQuery UI Dialog
// HtmlHelpers Module
// Call by using HtmlHelpers.getQueryStringValue("myname");
var HtmlHelpers = function () {
    return {
        // Based on http://stackoverflow.com/questions/901115/get-query-string-values-in-javascript
        getQueryStringValue: function (name) {
            var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
            return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
        }
    };
} ();

// StringHelpers Module
// Call by using StringHelpers.padLeft("1", "000");
var StringHelpers = function () {
    return {
        // Pad string using padMask.  string '1' with padMask '000' will produce '001'.
        padLeft: function (string, padMask) {
            string = '' + string;
            return (padMask.substr(0, (padMask.length - string.length)) + string);
        }
    };
} ();

// SessionManager Module
var SessionManager = function () {
    // NOTE:  globalTimeoutPeriod is defined in _Layout.cshtml

    var sessionTimeoutSeconds = HtmlHelpers.getQueryStringValue('smt') || (globalTimeoutPeriod),
        countdownSeconds = HtmlHelpers.getQueryStringValue('smc') || 300,
        secondsBeforePrompt = sessionTimeoutSeconds - countdownSeconds,
        $dlg,
        displayCountdownIntervalId,
        promptToExtendSessionTimeoutId,
        originalTitle = document.title,
        count = countdownSeconds,
        extendSessionUrl = '/Session/Extend',
        expireSessionUrl = '/Session/Expire?returnUrl=' + location.pathname;

    var endSession = function () {
        $dlg.dialog('close');
        location.href = expireSessionUrl;
    };

    var displayCountdown = function () {
        var countdown = function () {
            var cd = new Date(count * 1000),
                minutes = cd.getUTCMinutes(),
                seconds = cd.getUTCSeconds(),
                minutesDisplay = minutes === 1 ? '1 minute ' : minutes === 0 ? '' : minutes + ' minutes ',
                secondsDisplay = seconds === 1 ? '1 second' : seconds + ' seconds',
                cdDisplay = minutesDisplay + secondsDisplay;

            document.title = 'Expire in ' +
                StringHelpers.padLeft(minutes, '00') + ':' +
                    StringHelpers.padLeft(seconds, '00');
            $('#sm-countdown').html(cdDisplay);
            if (count === 0) {
                document.title = 'Session Expired';
                endSession();
            }
            count--;
        };
        countdown();
        displayCountdownIntervalId = window.setInterval(countdown, 1000);
    };

    var promptToExtendSession = function () {
        $dlg = $('#sm-countdown-dialog')
            .dialog({
                title: 'Session Timeout Warning',
                height: 250,
                width: 350,
                bgiframe: true,
                modal: true,
                buttons: {
                    'Continue': function () {
                        $(this).dialog('close');
                        refreshSession();
                        document.title = originalTitle;
                    },
                    'Log Out': function () {
                        endSession(false);
                    }
                }
            });
        count = countdownSeconds;
        displayCountdown();
    };

    var refreshSession = function () {
        window.clearInterval(displayCountdownIntervalId);
        var img = new Image(1, 1);
        img.src = extendSessionUrl;
        window.clearTimeout(promptToExtendSessionTimeoutId);
        startSessionManager();
    };

    var startSessionManager = function () {
        promptToExtendSessionTimeoutId =
            window.setTimeout(promptToExtendSession, secondsBeforePrompt * 1000);
    };

    // Public Functions
    return {
        start: function () {
            startSessionManager();
        },

        extend: function () {
            refreshSession();
        }
    };
} ();

 SessionManager.start();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:05:44.423

从 SessionManager 中删除 var 前缀。

这里有一些关于范围的信息， http: [//msdn.microsoft.com/en-us/library/ie/bzt2dkta (v=vs.94).aspx](http://msdn.microsoft.com/en-us/library/ie/bzt2dkta(v=vs.94).aspx)

# css - CSS: Div width as wide as it's content

> ID：14689213
> 
> 赞同：1
> 
> 时间：2013-02-04T14:48:18.577
> 
> 标签：css, html

I have a problem with the width of a div, I want to have the width of the div equaled to the width of it's content.

The problem I have is, if I resize the browser down to a width of 1024 the content doesn't float anymore, which is correct but I'd need the div around it to be as wide as it's content.

Here is the code im using to test it:

Thanks in advance!!!

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Content with Menu</title>
    <style type="text/css">
        .box {
            border: 1px solid #AAA;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 20px;
            display: -moz-inline-stack;
            display: inline-block;
            vertical-align: top;
            zoom: 1;
            *display: inline;
        }

        div.box ol li label {
            font-size: 12px;
            position: relative;        
            float: left;
            width: 11em;
            margin-right: 1em;
            padding-top: 0.5em;
        }

        input {
            border:1px solid #CCC;
            font: 12px Arial,Helvetica,sans-serif;  
            width: 160px;
        }
    </style>
</head>
<body>
    <div class="box">
        <div class="box">
            <ol>
                <li>
                    <label>
                    TEST 1.1
                    </label>
                    <input type="text" disabled="disabled" />
                    <input type="text"/>
                    <span></span>
                    <span></span>
                </li>
                <li>
                    <label>
                        TEST 1.2
                    </label>
                    <input/>
                </li>
                <li>
                    <label>
                        TEST 1.3
                    </label>
                    <input/>
                </li>
            </ol>
        </div>

        <div class="box">
            <ol>
                <li>
                    <label>
                    TEST 2.1
                    </label>
                    <input type="text" disabled="disabled" />
                    <input type="text"/>
                    <span></span>
                    <span></span>
                </li>
                <li>
                    <label>
                        TEST 2.2
                    </label>
                    <input/>
                </li>
                <li>
                    <label>
                        TEST 2.3
                    </label>
                    <input/>
                </li>
            </ol>
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:01:17.530

To prevent such things as misplacement of content when window is resized to a low size, use `min-width`. This way, you can expand your content, but you set a minimum width, so that your content doesn't get "squeezed"...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:41:29.200

agreeing with what @lvozor said,

your markup become's like this :

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Content with Menu</title>
    <style type="text/css">
        .box {
            border: 1px solid #AAA;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 20px;
            display: -moz-inline-stack;
            display: inline-block;
            vertical-align: top;
            zoom: 1;
            *display: inline;
        }

    div.box ol li label {
        font-size: 12px;
        position: relative;        
        float: left;
        width: 11em;
        margin-right: 1em;
        padding-top: 0.5em;
    }

    input {
        border:1px solid #CCC;
        font: 12px Arial,Helvetica,sans-serif;  
        width: 160px;
    }
</style>
</head>
<body>
<div class="box" style="min-width:1024px;">
    <div class="box">
        <ol>
            <li>
                <label>
                TEST 1.1
                </label>
                <input type="text" disabled="disabled" />
                <input type="text"/>
                <span></span>
                <span></span>
            </li>
            <li>
                <label>
                    TEST 1.2
                </label>
                <input/>
            </li>
            <li>
                <label>
                    TEST 1.3
                </label>
                <input/>
            </li>
        </ol>
    </div>

    <div class="box">
        <ol>
            <li>
                <label>
                TEST 2.1
                </label>
                <input type="text" disabled="disabled" />
                <input type="text"/>
                <span></span>
                <span></span>
            </li>
            <li>
                <label>
                    TEST 2.2
                </label>
                <input/>
            </li>
            <li>
                <label>
                    TEST 2.3
                </label>
                <input/>
            </li>
        </ol>
    </div>
</div>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-19T12:32:16.443

With `React` and `styled-components`.

Render:

```
<StyledInput
      value={value}
      length={String(value).split('').filter(v => typeof +v === 'number').length}
    /> 
```

Styling (with `rem`):

```
const StyledInput = styled.input`
   width: ${p => `${p.length * 0.9}rem`}; // adjust the number accordingly
`; 
```

Styling (with `px`):

```
const StyledInput = styled.input`
   width: ${p => `${p.length * 16}px`}; // adjust the number accordingly
`; 
```

# ios - 我在仪器中的能源使用测试什么也没显示（iOS）

> ID：14689214
> 
> 赞同：3
> 
> 时间：2013-02-04T14:48:19.887
> 
> 标签：ios, cocoa-touch, instruments

我正在使用`Instrument's`能源使用功能测试我的应用程序的能源使用情况。

但是，当我测试我的应用程序时，该能源使用栏没有显示如下图所示的任何内容。

![在此处输入图像描述](../Images/24b57457e5b25a7728211107d70d20dd.png)

这是什么意思？

这意味着我的应用程序不会消耗太多能源？

我对能源测试很陌生。我正在用 iPad2 测试我的应用程序。

请解释一下。谢谢。

# c++ - c++中的排序函数是如何工作的？

> ID：14689215
> 
> 赞同：1
> 
> 时间：2013-02-04T14:48:25.533
> 
> 标签：c++, sorting

在下面的代码中，`sort()`函数是如何工作的？例如，如果我们有一个数组：

```
a [5] = {1,2,3,4,5}; 
```

我使用我的函数按降序对它进行排序`bool cmp()`，我想知道：它是如何工作的，哪个元素是哪个元素`int a`（函数`int b`中的参数`bool cmp()`），什么时候排序，什么时候`bool cmp()`返回 1，什么时候返回0?

```
#include <iostream>
#include <algorithm>

using namespace std;
bool cmp (int a , int b)
{
    return (a > b );
}

int main ()
{
    int a[100];
    int n;
    cin >> n;
    for (int i=0 ; i<n ;i++)
        cin >> a[i];

    sort(a,a+n,cmp);
    cout << endl << endl;
    for (int i=0 ; i<n ;i++)
        cout << a[i] << " ";

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:53:42.197

如何实现取决于标准库的实现。它保证具有`O(Nlog(N))`复杂性。常见的实现使用[quicksort](http://en.wikipedia.org/wiki/Quicksort)或[introsort](http://en.wikipedia.org/wiki/Introsort)。

`true`比较函数是一个二进制函数，如果第一个参数*严格小于*第二个，则必须返回。该实现使用此函数来比较容器的两个元素，以确定哪些应该先于其他元素 - 因此`a`并且`b`可能是容器中的任何两个元素。此函数必须对元素进行严格的弱排序。那是：

*   一个元素永远不会小于它自己
*   如果`x < y`，那么情况并非如此`y < x`
*   如果`x < y`和`y < z`，那么`x < z`

如果您不提供比较功能，`operator<`则使用。等效地，您可以`std::less`作为比较函数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:53:50.960

在此处查看排序方法的参考：http: [//en.cppreference.com/w/cpp/algorithm/sort](http://en.cppreference.com/w/cpp/algorithm/sort)

第一个参数是起始指针。第二个参数是结束指针。第三个参数是可选的。它是定义如何排序的比较函数。

# html - 文档类型的引导位置

> ID：14689218
> 
> 赞同：1
> 
> 时间：2013-02-04T14:48:42.257
> 
> 标签：html, twitter-bootstrap, doctype

正如 Bootstrap 网站中所说，HTML 文档结构必须是这样的（[http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)）

```
<!DOCTYPE html>
<html lang="en">
  ...
</html> 
```

但是我注意到，这会导致一个问题，即输入高度比平时大，当我删除 doctype 声明时它就变得正常了。

如何解释这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:20:42.023

我想这是默认行为，当您使用 HTML5 文档类型时您无能为力。

您可以使用 CSS 重置来清除浏览器/文档类型为您的元素创建的任何默认格式。这是一个非常常用的，虽然它不包含任何输入标签。：http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/) 对于输入大小，你可以尝试一些这样的css ：

```
input {
    height:30px;
} 
```

或者你想要的任何高度。如果我在这里走错了方向，请告诉我。

# ubuntu - Ubuntu 12.04.1 中缺少 Aptana 启动器图标

> ID：14689220
> 
> 赞同：1
> 
> 时间：2013-02-04T14:48:44.233
> 
> 标签：ubuntu, aptana, ubuntu-12.04, aptana3

全部，

按照这个在 Ubuntu 12.04.1 中安装 Aptana 的[重要说明](http://www.samclarke.com/2012/12/how-to-install-aptana-studio-3-3-1-in-ubuntu-12-10-quantal-quetzal/)后，启动器图标不见了——它只有一个带问号的灰色方块。

知道如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T06:25:30.230

目前针对该行为开出了一张票：[https](https://jira.appcelerator.org/browse/TISTUD-2330) ://jira.appcelerator.org/browse/TISTUD-2330 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:42:11.500

图片的链接可能是错误的。更改图标应该很容易 - 您的安装文件夹中可能有一个，或者您可以在网上找到一个复制到该文件夹​​并使用。可以在[此处](https://askubuntu.com/questions/35347/how-do-i-get-custom-icon-for-apps-in-unity-dash)（以及许多其他地方）找到设置说明和图标。如果您可以右键单击启动器图标并选择在文本编辑器中查看它，那么应该很明显图标的路径在哪里，并对其进行更正，使其指向现有（且可读）的图像。

# php - 使用 Google Maps API v3 按名称搜索 mySQL 数据库

> ID：14689222
> 
> 赞同：0
> 
> 时间：2013-02-04T14:48:53.083
> 
> 标签：php, mysql, google-maps-api-3

我目前使用 Google Maps API v3 创建了一个定位器。它搜索存储在数据库中的位置。

这些位置有名称。我想绑定一个按名称或位置搜索数据库的搜索功能。我查看了 Google Places API，但不确定在哪里应用这种文本搜索功能。我还没有看到一个很好的例子来说明如何做到这一点，或者它是否可能。

任何建议或建议或示例将不胜感激。

谢谢！

**更新：**语言 - PHP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:30:05.897

您的 pastebin 使用已弃用的**[mysql_ 扩展名](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)**。对于新代码，您应该使用**[MySQLi](http://www.php.net/manual/en/book.mysqli.php)**或**[PDO](http://www.php.net/manual/en/book.pdo.php)**。以下代码使用 PDO

```
try {
    //Connect to database
    $dbh = new PDO("mysql:host=$host;dbname=$database", $username, $password);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
    // Prepare statement 1
    $searchStmt = $dbh->prepare("SELECT lat,lng FROM markers WHERE name LIKE ? ");
    // Assign parameters
    $searchStmt->bindParam(1,$name);
    $searchStmt->setFetchMode(PDO::FETCH_ASSOC);
    $searchStmt->execute();
    $row = $searchStmt->fetch();
    $center_lat = $row['lat'];
    $center_lng = $row['lng'];
    // Start XML file, create parent node
    $dom = new DOMDocument("1.0");
    header("Content-type: text/xml");
    $node = $dom->createElement("markers");
    $parnode = $dom->appendChild($node);
    // Prepare statement 2
    $markerStmt = $dbh->prepare("SELECT  name, lat, lng, ( 3959 * acos( cos( radians(?) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(?) ) + sin( radians(?) ) * sin( radians( lat ) ) ) ) AS distance FROM markers HAVING distance < ? ORDER BY distance LIMIT 0 , 20");
    // Assign parameters
    $markerStmt->bindParam(1,$center_lat);
    $markerStmt->bindParam(2,$center_lng);
    $markerStmt->bindParam(3,$center_lat);
    $markerStmt->bindParam(4,$radius);
    //Execute query
    $markerStmt->setFetchMode(PDO::FETCH_ASSOC);
    $markerStmt->execute();
    //Default for zero rows
    if ($markerStmt->rowCount()==0) {
        $node = $dom->createElement("marker");
        $newnode = $parnode->appendChild($node);
        $newnode->setAttribute("name", "No Records Found");
        $newnode->setAttribute("lat", $center_lat);
        $newnode->setAttribute("lng", $center_lng);
        $newnode->setAttribute("distance", 0);
                }
    else {
    // Iterate through the rows, adding XML nodes for each
    while($row = $markerStmt->fetch()) {
        $node = $dom->createElement("marker");
        $newnode = $parnode->appendChild($node);
        $newnode->setAttribute("name", $row['name']);
        $newnode->setAttribute("lat", $row['lat']);
        $newnode->setAttribute("lng", $row['lng']);
        $newnode->setAttribute("distance", $row['distance']);
        }
    }
echo $dom->saveXML();

}

catch(PDOException $e) {
    echo "I'm sorry I'm afraid you can't do that.". $e->getMessage() ;// Remove or modify after testing 
    file_put_contents('PDOErrors.txt',date('[Y-m-d H:i:s]').", mapSelect.php, ". $e->getMessage()."\r\n", FILE_APPEND);  
 }
//Close the connection
$dbh = null; 
```

`$searchStmt`在数据库中搜索名称。它使用为 找到的坐标`$markerStmt`。

```
if ($markerStmt->rowCount()==0) {
...
} 
```

如果未找到记录，则用于在搜索位置提供标记。

# hibernate - 仅对对象使用 JPQL 选择列的子集

> ID：14689223
> 
> 赞同：3
> 
> 时间：2013-02-04T14:48:54.013
> 
> 标签：hibernate, jpa, jpa-2.0, jpql

我有实体 Team、Game 和 TeamInGame。要选择按上一场比赛排序的球队，我使用：

```
Query query = em.createQuery("select tg.team, max(tg.game.gameDate) as maxDate" +
" from TeamInGame tg" +
" group by tg.team" +
" order by maxDate desc");

return Lists.transform(query.getResultList(), new Function<Object[], Team>() {
            @Override
            public Team apply(Object[] input) {
                return (Team) input[0];
            }
       }); 
```

有没有办法摆脱这种转变？此查询不起作用：

```
return em.createQuery("select tg.team, max(tg.game.gameDate) as maxDate" +
    " from TeamInGame tg" +
    " group by tg.team" +
    " order by maxDate desc", Team.class).getResultList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T23:33:41.220

简短的回答是否定的。`order by`如果没有在`select`子句中定义排序键，您不能在 JPQL`TypedQuery`中不返回子句中的元素`select`，因为这就是查询的作用！

就个人而言，我认为您所拥有的 Transform 方法是最简洁、最符合代码的方法。下一个最好的方法是 @SJuan76 建议使用[JPQL Constructor Expressions](http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_constructor)。也许您甚至可以在`Team`其自身上使用复制构造函数，这样您就不必创建中间`TeamResult`类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:52:21.953

您可以创建自己的对象来保存数据并从 JPQL 填充它。例如：

```
 ...("select new myPackage.TeamResult(tg.team, max(tg.game.gameDate)) from ..." 
```

TeamResult 必须：

a) 有一个与参数匹配的构造函数。

b) 完全合格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:14:34.663

“此查询不起作用” - 您是否遇到异常？另外，您是否可以在 Team 实体中为 maxDate 添加属性？不确定这是否适用于 JPQL，但您可以尝试以下方法：

select a.teamid from (select teamid, max(g.gamedate) as maxdate from teaminggame tg, game g where tg.gameId = g.pk group by teamid order by maxdate desc) 作为

# arrays - 如何使用 Gson 反序列化只有值的嵌套数组 json？

> ID：14689225
> 
> 赞同：4
> 
> 时间：2013-02-04T14:49:06.080
> 
> 标签：arrays, json, nested, gson

输入的json是：

```
{
    "players":
    [
        [
            [
              "192.168.1.0",
              "8888"
            ],
            "id_1"
        ],            
        [
            [
              "192.168.1.1",
              "9999"
            ],
            "id_2"
        ]
    ],
    "result":"ok"
} 
```

我从服务器收到此消息。服务器告诉我结果和玩家名单。每个玩家都有一个唯一的 id 和几个联系地址，可能不止一个（ip+port）。对我来说困难的部分是数组中的项目只有价值。它不像字符串：值。

谁能告诉我如何用 gson 反序列化它？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:36:19.307

你所拥有的`players`是一个`Map`表示为 JSON 数组。

这是一张*丑陋*的地图，但它仍然是`Map`. 键是`List<String>`（IP 和端口），值为 a `String`（“id”）

几乎就像编写服务器的人犯了一个错误并且倒退了一样，特别是考虑到您对这*应该*是什么的描述。它真的应该看起来像：

> ["id_1",[["192.168.1.0","8888"], [另一个 ip/端口], ... ]

对于每个条目。这会更有意义，因为 ( `String`) “id” 是键和`List<List<String>>`值。

这仍然很难看，因为他们真的应该使用对象来表示 IP/端口。理想情况下，您会想要：

> ["id_1",[{"ip":"192.168.1.1", "port":"8888"},{ "ip":"192.168.1.2","port":"8889"}]]

下面演示了它当前的编写方式：

```
public static void main( String[] args )
{
    String json = "{\"players\":[[[\"192.168.1.0\",\"8888\"],\"id_1\"],[[\"192.168.1.1\",\"9999\"],\"id_2\"]],\"result\":\"ok\"}";

    Gson gson = new GsonBuilder().create();
    MyClass c = gson.fromJson(json, MyClass.class);
    c.listPlayers();

}

class MyClass 
{
    public String result;
    public Map<List<String>, String> players;

    public void listPlayers()
    {
        for (Map.Entry<List<String>, String> e : players.entrySet())
        {
            System.out.println(e.getValue());
            for (String s : e.getKey())
            {
                System.out.println(s);
            }
        }
    }
} 
```

输出：

> id_1
> 192.168.1.0
> 8888
> 
> id_2
> 192.168.1.1
> 9999

您可以通过以下方式获得一些创意并使地图的密钥更有用：

```
class IpAndPort extends ArrayList<String> {

    public String getIp() {
        return this.get(0);
    }

    public String getPort() {
        return this.get(1);
    }

} 
```

然后改变：

```
public Map<List<String>, String> players; 
```

到：

```
public Map<IpAndPort, String> players; 
```

在`MyClass`

# php - 无限滚动 + foreach -> 只回显一次

> ID：14689226
> 
> 赞同：-1
> 
> 时间：2013-02-04T14:49:07.280
> 
> 标签：php, foreach, infinite-scroll

我在我的一个页面上使用无限滚动，并结合了 foreach 循环。我的相关代码：

```
<div id="container" class="infinite-scroll span12"> 
   <?php foreach ($items as $item): ?> 
      <div class="element">
         <?php echo $this->Html->image($item); ?> 
      </div> 
   <?php endforeach; ?>
</div> 
```

进一步向下滚动会加载无限滚动插件。#container 得到更新。

**我现在只想在第一页的开头显示一个图像。**

***知道如何实现吗？***

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:54:04.857

如果您只想要第一个元素，则不需要 foreach 循环，只需回显单个元素：

```
<div id="container" class="infinite-scroll span12"> 
    <div class="element"><?=$this->Html->image($items[0])?></div> 
</div> 
```

如果您想显示一个随机项目，请从数组中获取一个随机数并使用它：

```
<div id="container" class="infinite-scroll span12"> 
    <div class="element"><?=$this->Html->image(rand(0,sizeof($items)-1))?></div> 
</div> 
```

# c++ - 初始化列表与初始化方法

> ID：14689227
> 
> 赞同：2
> 
> 时间：2013-02-04T14:49:08.097
> 
> 标签：c++

至少有两种方法可以在 C++ 中初始化一个类。

(1) 初始化列表

```
struct C
{
  int i;
  C() : i(0) {}
}; 
```

(2) 初始化方法

```
struct D
{
  int i;
  C() { init(); }
  void init() {
    i = 0;
  }
}; 
```

我需要不时重新初始化我班级的对象。使用第二种解决方案，我可以简单地调用`obj.init()`. 对于第一个解决方案，我要么必须添加一个`init()`基本上复制初始化列表效果的函数，要么使用`obj = C()`.

对于这里的哪种变体更好，是否存在或多或少的共识？使用初始化方法是否有缺点（除了[C++ FAQ 中提到](http://www.parashift.com/c++-faq/init-lists.html)的可能的性能损失）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T14:55:29.183

主要区别在于不使用初始化列表，而是创建成员，然后为它们分配值。使用初始化列表时，成员是使用给定值直接创建的。

使用初始化很重要的一种情况是，当您的类将一些引用作为成员时，有必要在构造这些成员时正确初始化它们：

```
class A
{
public:
    A(B& bRef) : bRef_(bRef) { }
private:
    B& bRef_;   
} 
```

这个问题也可以帮助您：[在这种特定情况下，使用成员初始化程序列表和在构造函数中分配值之间有区别吗？](https://stackoverflow.com/questions/4589237/c-initialization-lists)

你的`init()`方法很好。正如您自己所提到的，您希望在构造此类的实例时比第一次初始化这些成员更多次，因此为了可重用性和简单性，将其保留在方法中是正确的。**除非您确实需要，否则不要试图提高代码的性能。**

有人说，**做一个正确的程序比做一个快速的程序正确容易。**;)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T14:51:52.057

当创建一个数组（使用向量，或使用动态分配`new`）时，您必须`init`在使用构造函数时显式调用它的每个成员，它将自动为所有元素调用。

我更喜欢将基本初始化放在构造函数中，将更复杂的逻辑放在 init 方法中。在我看来，构造函数不应该执行任何复杂的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-28T12:21:57.253

Below are the scenarios when initializer list is used:

*   For initialization of non-static const data members.
*   For initialization of reference members.
*   For initialization of member objects which do not have default constructor.
*   For initialization of base class members.
*   When constructor’s parameter name is same as data member.
*   For Performance reasons.

# c# - WCF 异步调用的同步包装器

> ID：14689233
> 
> 赞同：0
> 
> 时间：2013-02-04T14:49:32.487
> 
> 标签：c#, wcf, silverlight, asynchronous, synchronization

我们异步调用 WCF 服务。

```
public partial class ServiceClient : System.ServiceModel.ClientBase<MyService>, MyService 
{
    ......
}

ServiceClient _serviceclient;
void Getproducts(string filter, string augument, EventHandler<GetCompletedEventArgs> callback)
{
    _serviceclient.GetAsyncGetproducts(filter, argument, callback);
} 
```

我希望 Getproducts 函数是同步的。实现此目的的最佳方法是什么，如下所示

```
void Getproducts(string filter, string augument, EventHandler<GetCompletedEventArgs> callback)
{
    _serviceclient.GetAsyncGetproducts(filter, argument, callback);
    //wait until callback comes back and return
} 
```

编辑：代理提供任何同步调用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:37:46.757

您**不能在 Silverlight 中**从 UI 线程发出同步网络请求。没有办法解决这个问题。即使您尝试欺骗异步方法以同步行为，它也不起作用。那是因为如果可能的话，UI 线程将被阻塞，并且应用程序看起来会被冻结。发生这种情况是因为 SL 中对网络请求的响应总是传递给 UI 线程；如果您在 UI 线程本身上等待它，那么您将创建一个死锁。

您基本上有两种选择：首选的是实际走异步路线。如果您只习惯于同步编程，一开始很难，但这是一项非常有价值的技能。另一种选择是在后台线程上进行调用。我试过了，效果很好，有些人在[博客](http://weblogs.asp.net/razan/archive/2010/01/14/emulating-synchronous-web-service-call-in-silverlight.aspx)上写过，所以你也可以试试。但是 AFAIK 它没有得到官方支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:01:33.347

除了将回调参数作为回调传递之外，您还需要分配自己的回调来执行该方法以及执行其他操作。您实际上只需要触发某种事件。我已经演示了一种使用任务的方法，但您也可以轻松地使用自动重置事件或任意数量的其他同步方法之一。

```
void Getproducts(string filter, string augument, EventHandler<GetCompletedEventArgs> callback)
{
    var tcs = new TaskCompletionSource<bool>();
    _serviceclient.GetAsyncGetproducts(filter, argument, args =>
    {
        callback(args);
        tcs.SetResult(true);
    });

    tcs.Task.Wait();
} 
```

# python - django 中的“经理”是什么？

> ID：14689237
> 
> 赞同：25
> 
> 时间：2013-02-04T14:49:42.343
> 
> 标签：python, django

我已经阅读了官方 Django[文档](https://docs.djangoproject.com/en/dev/topics/db/managers/)中的定义，但我仍然对 a 的`Manager`作用感到困惑。

文档说它们允许您对数据库表/模型进行操作，但我仍然不明白这一点。

有人可以向我解释经理及其角色吗？最好有一个例子的答案。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-04T14:57:43.247

管理器通常是隐藏在 django 程序员之外的东西，django 使用它来连接`model`代码和数据库后端。

当您查询 django ORM 时，您可以通过调用

```
from my_app.models import MyModel

mms = MyModel.objects.all() 
```

在这种情况下，`objects`函数的一部分是管理器返回的。如果您希望 MyModel 只获取`blue` `MyModel`实例（数据库也可能包含`red`模型），那么您可以创建一个管理器并破解您的模型

```
class BlueManager(models.Manager):
    def get_query_set(self):
        return super(BlueManager, self).get_query_set().filter(colour='Blue')

class MyModel(models.Model):
     colour = models.CharField(max_length=64)
     blue_objects = BlueManager() 
```

并打电话

```
MyModel.blue_objects.all() 
```

只会返回带有`colour`as 的对象`blue`。请注意，这是过滤模型的一种非常糟糕的方法！

`Manager`如果他们要修改`QuerySet`管理器通常会返回的 s 或者如果您需要添加“表”级别的查询（而不是常规的 django “行”级别），通常需要修改接口。管理器的[文档](https://docs.djangoproject.com/en/dev/topics/db/managers/)非常完整，包含几个示例。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-04T15:02:27.790

管理器是应用程序和数据库之间的某种“门”。一件好事是您可以为模型定义自己的基本查询集。例如：如果您有带有“可用性”字段的模型“书”，您可以准备自己的查询集，它过滤特定类型的可用性类型：

模型.py：

```
class AvailableBookManager(models.Manager):
    def get_query_set(self):
        return super(AvailableBookManager, self).get_query_set().filter(availability=1)

class Book(models.Model):
   (...)#fields definition

   objects = models.Manager() #default manager
   available_objects = AvailableBookManager() #own manager 
```

现在你可以像这样使用：

```
books = Book.available_objects.all() 
```

而不是使用：

```
books = Book.objects.filter(available=1) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-07-26T03:07:45.737

## 定义

从文档：

> Manager 是一个 Django 类，它提供数据库查询操作和 Django 模型之间的接口。

换句话说，在 Django 模型中，管理器是与数据库交互的接口。例如，当您想从数据库中检索对象时，您需要在模型类上`QuerySet`通过 a构造一个。`Manager`

默认情况下，可以通过该`Model.objects`属性使用管理器。这位经理是`django.db.models.Manager`。但是，扩展它并更改默认管理器非常简单。

## 自定义管理器

从[文档](https://docs.djangoproject.com/en/3.0/topics/db/managers/#custom-managers)：

> 您可以通过扩展基础 Manager 类并在模型中实例化您的自定义 Manager 来在特定模型中使用自定义 Manager。

您可能想要自定义 Manager 的原因有两个（它们都不是独占的）：

1.  添加额外的 Manager 方法
2.  修改 Manager 返回的初始 QuerySet

### 示例：向 Manager 添加额外的方法

```
from django.db import models

class DocumentManager(models.Manager):
    def pdfs(self):
        return self.filter(file_type='pdf')

    def smaller_than(self, size):
        return self.filter(size__lt=size)

class Document(models.Model):
    name = models.CharField(max_length=30)
    size = models.PositiveIntegerField(default=0)
    file_type = models.CharField(max_length=10, blank=True)

    objects = DocumentManager()

    def __str__(self) -> str:
        return self.name 
```

### 示例：修改 Manager 返回的初始 QuerySet

```
from django.db import models

class AuthorManager(models.Manager):
    def get_queryset(self):
        return super().get_queryset().filter(first_name__startswith='M')

class Author(models.Model):
    first_name = models.CharField(max_length=100)
    last_name = models.CharField(max_length=100)
    email = models.EmailField()

    objects = AuthorManager()

    def __str__(self) -> str:
        return f"{self.first_name} {self.last_name}" 
```

### 示例：同时有多个经理

同一模型可以有多个管理器。

```
from django.db import models
from django.db.models.functions import Length

class BookTitleManager(models.Manager):
    def short_titles(self):
        return self.annotate(length=Length('title')).filter(length__lte=20)

    def long_titles(self):
        return self.annotate(length=Length('title')).filter(length__gt=20, length__lte=30)

    def very_long_titles(self):
        return self.annotate(length=Length('title')).filter(length__gt=30)

    def starts_with(self, letter):
        return self.filter(title__startswith=letter)

class BookPagesManager(models.Manager):
    def small_books(self):
        return self.filter(pages__lt=200)

    def medium_books(self):
        return self.filter(pages__gte=200, pages__lt=300)

    def large_books(self):
        return self.filter(pages__gte=300, pages__lte=500)

class Book(models.Model):
    title = models.CharField(max_length=255)
    author = models.CharField(max_length=255)
    pages = models.IntegerField()

    objects = models.Manager()
    titles = BookTitleManager()
    sizes = BookPagesManager()

    def __str__(self) -> str:
        return f'{self.title} by {self.author}' 
```

在前面的代码示例中，有 3 个管理器：分别为default和`models.Manager`分配给`BookTitleManager`和。`BookPagesManager``objects``titles``sizes`

以前的管理器的问题是您不能将它们链接如下：

```
>>> Book.titles.long_titles().starts_with('P')
AttributeError: 'QuerySet' object has no attribute 'starts_with' 
```

### 示例：自定义管理器和查询集（允许使用链）

如果要链接管理器中定义的方法，则应定义一个自定义 QuerySet，如下所示：

```
from django.db import models
from django.db.models.functions import Length

class AuthorQuerySet(models.QuerySet):
    def long_first_name(self):
        return self.annotate(length=Length("first_name")).filter(length__gte=10)

    def short_last_name(self):
        return self.annotate(length=Length("last_name")).filter(length__lte=10)

class AuthorManager(models.Manager):
    def get_queryset(self):
        return AuthorQuerySet(self.model, using=self._db)

    def long_first_name(self):
        return self.get_queryset().long_first_name()

    def short_last_name(self):
        return self.get_queryset().short_last_name()

class Author(models.Model):
    first_name = models.CharField(max_length=100)
    last_name = models.CharField(max_length=100)
    email = models.EmailField()

    objects = AuthorManager()

    def __str__(self) -> str:
        return f"{self.first_name} {self.last_name}" 
```

### 示例：用作管理器的自定义查询集

在管理器中仅定义自定义`QuerySets`时，可以简单地扩展并将其`QuerySet`设置为管理器。

```
from django.db import models
from django.db.models.functions import Length

class PublisherQuerySet(models.QuerySet):
    def long_name(self):
        return self.annotate(length=Length("name")).filter(length__gte=15)

    def long_address(self):
        return self.annotate(length=Length("address")).filter(length__gte=25)

    def country_starts_with(self, letter):
        return self.filter(country__startswith=letter)

class Publisher(models.Model):
    name = models.CharField(max_length=100)
    address = models.CharField(max_length=255)
    country = models.CharField(max_length=100)

    objects = PublisherQuerySet.as_manager() # uses QuerySet as Manager

    def __str__(self) -> str:
        return self.name 
```

### 也要记住

*   如果要`objects`用作字段名称，或者要使用 Manager 以外的名称`objects`，则可以按模型重命名。要重命名给定类的管理器，请在该模型上定义类型为 models.Manager() 的类属性。

```
class Document(models.Model):
    name = models.CharField(max_length=30)
    size = models.PositiveIntegerField(default=0)
    file_type = models.CharField(max_length=10, blank=True)

    stuff = models.Manager()

    def __str__(self) -> str:
        return self.name 
```

在前面的代码示例中，调用`Document.objects`将生成`AttributeError`异常，因为默认管理器已被重命名，现在可以使用的是`Document.stuff`.

*   管理器只能通过模型​​类而不是模型实例来访问，以强制区分“表级”操作和“记录级”操作。

*   如果模型具有 ForeignKey，则外键模型的实例将有权访问返回第一个模型的所有实例的 Manager。默认情况下，此 Manager 名为`FOO_set`，其中`FOO`源模型名称为小写。

# mysql - 获取一行，然后其他人按 id 排序

> ID：14689238
> 
> 赞同：2
> 
> 时间：2013-02-04T14:49:43.557
> 
> 标签：mysql, sql

我怎样才能得到一个特定的行（id=x）然后是提醒？就像是：

```
SELECT * FROM table ORDER BY id=5 FIRST THAN id DESC 
```

我尝试使用 UNION ALL，例如：

```
(SELECT * FROM table WHERE id=5) 
 UNION ALL 
(SELECT * FROM table WHERE id!=5 ORDER BY id DESC) 
```

但结果出乎意料，因为第二个 SELECT 不返回按 id (desc) 排序的寄存器。另外，这种方式要多写一些。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T14:56:03.117

```
SELECT * FROM table ORDER BY id = 5 DESC, id ASC 
```

这会给你类似的东西：5、1、2、3、4、6、7，...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T14:55:20.420

您可以在一行中放置多个子句`order by`：

```
select *
from t
order by (case when id = 5 then 1 else 0 end) desc, id desc 
```

此外，SQL 中的表和结果集是无序的。一个例外是`order by`用于结果集。我不希望该`union all`方法有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:53:35.403

这会给你'5's first，然后'not 5's

```
SELECT * 
FROM table 
ORDER BY case when id=5 then 0 else 1 end ASC 
```

# excel - Excel：工作簿中的所有模型是否共享所有全局变量？

> ID：14689242
> 
> 赞同：0
> 
> 时间：2013-02-04T14:50:00.513
> 
> 标签：excel, vba, scope

我试图寻找这个问题的答案，但无处可去。所以我明白如果我在子/函数之外声明一个变量，那么该模块中的所有子/函数都可以访问它。其他模块呢？我必须申报吗？或者我可以在不声明的情况下使用它吗？

例如，我有一个用于登录多个模块的 textstream 对象。基本上我想要做的是初始化它们一次，我模块中的所有函数都可以使用相同的 objTF 对象写入日志文件。这些对象在 commandbutton_click 事件中初始化。但是我在哪里声明它们呢？

```
Dim objFSO As FileSystemObject
Dim objTF As TextStream 
```

我必须将它们放在所有模块的开头吗？或者只有一个模块就足够了？正确的方法是什么？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:10:49.267

试试这个（在子或函数之外）：

```
Public objFSO As FileSystemObject
Public objTF As TextStream 
```

这应该全局声明它们，以便可以从项目中的任何模块访问它们。

编辑：

[在这个问题](https://stackoverflow.com/questions/3815547/what-is-the-difference-between-dim-global-public-and-private-as-modular-field)的接受答案中有一个很好的解释 vba 变量范围。

# jquery - 在花式框中使用 AJAX 调用

> ID：14689243
> 
> 赞同：0
> 
> 时间：2013-02-04T14:50:02.480
> 
> 标签：jquery, ajax, fancybox

我正在创建一个网上商店，在该网上商店中单击产品时，我使用带有 iframe 的fancybox 来显示产品的详细信息页面。

在产品的详细信息页面中，您可以通过 AJAX 调用购买产品。该调用将购买发送到数据库并更新购物车金额。

但是，当我第一次单击购买按钮时，iframe 只是刷新。从第二次开始，按钮就可以正常工作了，但我不能再关闭fancybox了（既不能通过单击关闭按钮，也不能通过使用代码）。我也没有收到任何 javascript 错误，并且在自行打开产品详细信息页面（而不是在花哨的框中）时，一切正常。

由于我在任何地方都没有出现任何错误，并且没有fancybox，一切都可以正常工作，所以我真的不知道应该放哪段代码。

Fwiw 我正在运行 jquery 版本 1.8.3 和 fancybox 版本 1.3.4

编辑：这是相关代码

**打开我的fancybox的javascript函数**

```
function ShowAssetDetail(lngAssetID) {
    $.fancybox(
    {
        'modal': false,
        'width': 500,
        'height': 500,
        'autoscale': false,
        'type': 'iframe',
        'href': '/Code/Webshop/WS_Detail_Layout_2.asp?AssetID=' + lngAssetID
    });
} 
```

**在 fancybox 中显示的 iframe**

```
<div name="SHOPPINGCART" id="SHOPPINGCART" border="1">
<table class="ShoppingCart" title="Naar het detail van uw winkelmandje / Naar de kassa">
    <tr>
        <td>
            <a href="/Code/Webshop/WS_Order_Detail.asp?"> 
                €&amp;nbsp;96,00
            </a>
        </td>
        <td>
            <a href="/Code/Webshop/WS_Order_Detail.asp?"> 
                <img src="/code/_Images/WS_basket_go.gif" width="16" height="16" border="0" title=""> 
            </a>
        </td>
    </tr>
</table>
</div>

<table class="AssetDetail_BuyAsset_Table" cellspacing="0" cellpadding="3px" width="100%">
<tr class="TableHeading1">       
    <td>P. iBTW</td>
    <td colspan="2">&nbsp;</td>
</tr>
<tr class="Normal_Text_1">           
    <td>€&amp;nbsp;25,00</td>        
    <td><input type="text" name="X_PurchaseQuantity" id="X_PurchaseQuantity" size="5" value="3" onclick="this.select()">
    <td><a href="#AddProductToShoppingCart" onclick="AddProductToShoppingCart(X,Y,document.getElementById('X_PurchaseQuantity').value,Z)"><img src="/code/_Images/WS_basket_add.gif" border="0"></a></td>      
</tr> 
</table> 
```

**javascript 函数和 AJAX 调用**

```
<script language="JavaScript" type="text/JavaScript">
var strShoppingCartContainerElemID
var ajaxShoppingCartResponse;
var ajaxAssetAmountResponse;
var lngAjaxFinished;
var lngAjaxToFinish;
function AddProductToShoppingCart (lngAssetID,lngPriceID,dblPurchaseQuantity,dblAssetPrice) {
if (typeof(lngAssetID) == 'undefined' || typeof(lngPriceID) == 'undefined') return false;           

StartUserWait(); //This just generates a spinner

lngAjaxFinished = 0;
lngAjaxToFinish = 1; //change into 2 when the orderitem amount/value is ever displayed again

var strShoppingCartURL = '/Code/_CommonCode/AJAX_Generic.asp?Proc=WS_AddAssetToShoppingCart';
ajaxShoppingCartResponse = CallAJAXURL(strShoppingCartURL,ReceiveAJAXShoppingCartResponse);

var strAssetAmountURL = '/Code/_CommonCode/AJAX_Generic.asp?Proc=WS_AmountAndValueOfAssetInShoppingCart';
ajaxAssetAmountResponse = CallAJAXURL(strAssetAmountURL, ReceiveAJAXAssetAmountResponse);
} 
function ReceiveAJAXShoppingCartResponse(){
if (ajaxShoppingCartResponse) if (ajaxShoppingCartResponse.readyState == 4){
    var records = ajaxShoppingCartResponse.responseText.split("<br>"); 
    var results = records[0].split("___");

    var lngOrderHeadID = parseInt(results[0]);
    var dblTotalValue = parseInt(results[1]);
    var strFormattedCurrency = results[2];

    /*Write child's shoppingcart*/
    WriteShoppingCart('SHOPPINGCART', dblTotalValue, strFormattedCurrency, 0);
    /*Write parent's shoppingcart*/
    WriteShoppingCart('SHOPPINGCART', dblTotalValue, strFormattedCurrency, 1);

    ajaxShoppingCartResponse = undefined;

    /*UpdateAjaxFinished();*/
}
}
function ReceiveAJAXAssetAmountResponse(){
if (ajaxAssetAmountResponse) if (ajaxAssetAmountResponse.readyState == 4)
{
    var records = ajaxAssetAmountResponse.responseText.split("<br>"); 
    var results = records[0].split("___");

    var lngAssetID = parseInt(results[0]);
    var dblTotalPurchaseQuantity = parseInt(results[1]);
    var strTotalPurchasePrice = results[2];

    if(parent.document.getElementById('AssetRow_' + lngAssetID)) {
        if(dblTotalPurchaseQuantity > 0) {
            parent.document.getElementById('AssetRow_' + lngAssetID).style.fontWeight = 'bold';
            parent.document.getElementById('NOUnits_' + lngAssetID).value = dblTotalPurchaseQuantity;
        } else {
            parent.document.getElementById('AssetRow_' + lngAssetID).style.fontWeight = 'normal';
            parent.document.getElementById('NOUnits_' + lngAssetID).value = '';
        }
    }

    document.getElementById('X_PurchaseQuantity').value = dblTotalPurchaseQuantity;

    ajaxAssetAmountResponse = undefined;

    UpdateAjaxFinished();
}
}
function WriteShoppingCart(strContainerElemID, dblTotalValue, strFormattedCurrency, bitParent){
if (strContainerElemID == '') strContainerElemID = strShoppingCartContainerElemID
var container;
if(bitParent == 0) {
    container = document.getElementById(strContainerElemID);
} else {
    container = parent.document.getElementById(strContainerElemID);
}
if (!container) return false;
strShoppingCartContainerElemID = strContainerElemID;
var strHTML = '';
dblTotalValue = parseInt(dblTotalValue);
strHTML += '<table class="ShoppingCart">' + '\n';   
strHTML += '    <tr>' + '\n';

if (dblTotalValue > 0){
    strHTML += '        <td>' + '\n';
    strHTML += '            <a href="/Code/Webshop/WS_Order_Detail.asp?"> \n';
    strHTML += '                ' + strFormattedCurrency + '\n';
    strHTML += '            </a>' + '\n';
    strHTML += '        </td>' + '\n';
    strHTML += '        <td>' + '\n';
    strHTML += '            <a href="/Code/Webshop/WS_Order_Detail.asp?"> \n';
    strHTML += '                <img src="/code/_Images/WS_basket_go.gif" width="16" height="16" border="0" TITLE=""> \n';
    strHTML += '            </a>' + '\n';
    strHTML += '        </td>' + '\n';
} else {
    strHTML += '        <td>&euro;&nbsp;0,00</td>' + '\n';
}   
strHTML += '    </tr>' + '\n';  
strHTML += '</table>' + '\n';           

container.innerHTML = strHTML;
}
function UpdateAjaxFinished(){
    if (typeof(lngAjaxFinished) == 'undefined') lngAjaxFinished = 0;
    if (typeof(lngAjaxToFinish) == 'undefined') lngAjaxToFinish = 1;
    lngAjaxFinished++;
    if (lngAjaxFinished >= lngAjaxToFinish) EndUserWait(); //this stops the spinner
}
</script> 
```

# php - PHP MySQL UPDATE查询无效

> ID：14689244
> 
> 赞同：0
> 
> 时间：2013-02-04T14:50:04.383
> 
> 标签：php, mysql

我是一个新的 PHP 编码器，我开始了一个 cms 面板项目，开始时有三个选项：新文章、删除文章和编辑文章。我的项目中甚至没有一个错误，但是，当我尝试编辑一篇文章时，一切都很顺利，除了保存。帖子没有保存！！！并且没有任何错误！我正试图从昨天开始解决这个问题。这很烦人。

这是我的代码的一部分：

编辑处理.php：

```
 <!DOCTYPE html>
<?php
    include("includes/functions.php");
    $ctreat = getTreat($_GET["id"]);
?>
<html lang="en">
    <head>
        <script type="text/javascript" src="ckeditor/ckeditor.js"></script>
        <meta charset="utf-8" />
        <title>Control panel</title>
    </head>
    <body>
        <form action="doEditt.php" method="post">
            <table>
                <tr>
                    <td>
                        <label for="tName">:Title</label>
                    </td>
                    <td>
                        <input type="text" name="tName" value="<?php echo $ctreat["Title"]; ?>"></input>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label for="tContent">:Content</label>
                    </td>
                    <td>
                        <textarea name="tContent"> <?php echo $ctreat["Content"]; ?> </textarea>
                        <script type="text/javascript">
                            CKEDITOR.replace('tContent');
                        </script>
                    </td>
                </tr>
                <tr>
                    <td colspan="2"><input type="submit" name="submit" value="Edit"></input></td>
                    <td> <input type="hidden" name="id" value="<?php echo $_GET["ID"]; ?>" /></td>
                </tr>
            </table>
        </form>
    </body>
</html> 
```

doEditt.php：

```
 <?php
    include("includes/functions.php");
    if(isset($_POST["submit"])) {
        if(isset($_POST["tName"])) {
            editTreat($_POST["tName"],$_POST["tContent"],$_POST["id"]);
            header("Location: treatments.php");
        } else {
            echo "Please fill the title";
            include("editTreat.php");
        }
    } else {
        header("Location: editTreat.php");
    }
?> 
```

我的 include/functions.php 的一部分：

```
 function editTreat($tName, $tContent, $id) {
    $id = (int) $id;
    $query = mysql_query("UPDATE `treatments` SET title = '$tName', content = '$tContent' WHERE ID = '$id'") or die(mysql_error());
    header("Location: treatments.php");
}

function getTreat($id) {
    $id = (int) $id;
    $query = mysql_query("SELECT * FROM `treatments` WHERE ID = '$id'") or die(mysql_error());
    return mysql_fetch_assoc($query);
} 
```

所以，如果你能帮助我，请帮助我。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:02:03.253

在第 4 行，您引用 id 小写字母

```
$ctreat = getTreat($_GET["id"]); 
```

注意小写id

然后在您引用 ID 大写的表格中

```
<?php echo $_GET["ID"]; ?> 
```

PHP 区分大小写... id 是大写还是小写

发布 ID 未发送到提交表单，这似乎是您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:32:34.400

一些明显的问题：

1.  我确定**id**列不是字符串，所以为什么要引号？

    ```
    UPDATE `treatments` SET title = '$tName', content = '$tContent' WHERE ID = $id 
    ```

2.  您应该转义任何用户输入。

    ```
    $tName = mysql_real_escape_string($tName); 
    ```

3.  PHP 区分大小写，您对`$_GET["id"]`. 我确定你想用`$_GET["id"]`！

    ```
    $ctreat = getTreat($_GET["id"]);
    VERSUS
    echo $_GET["ID"]; 
    ```

# java - Oracle 日期模式到 Java 日期模式

> ID：14689247
> 
> 赞同：1
> 
> 时间：2013-02-04T14:50:23.603
> 
> 标签：java, oracle11g

是否有任何实用程序可以`java.text.SimpleDateFormat`从 Oracle`to_char`格式模式返回模式？

```
create or replace type type_sample as object (
  f_id number,
  f_name varchar2(100),
  f_start_date date,
  f_end_date date
)
/

SET SERVEROUTPUT ON
DECLARE
  xmltype1            SYS.XMLType;
  message             type_sample;
BEGIN
  message := new type_sample(1, 'Manohar', current_date, sysdate);
  xmltype1 := XMLtype.createXML(message);
  DBMS_OUTPUT.PUT_LINE('out_errm : '|| xmltype1.getStringVal());
END;
/

<TYPE_SAMPLE><F_ID>1</F_ID><F_NAME>Manohar</F_NAME><F_START_DATE>26-JAN-13</F_START_DATE>**<F_END_DATE>26-JAN-13</F_END_DATE>**</TYPE_SAMPLE> 
```

我有上面的 XML 来自数据库。根据运行上述代码的会话，日期格式以不同的格式出现。

我可以在这里做的是，可以从 Java 端获取该会话的日期格式模式。如果我可以将该日期格式模式（oracle db）转换为`java.text.SimpleDateFormat`模式，我的问题就解决了。你能帮帮我吗？

* * *

我在这里没有得到预期的答案。可能是我的演示文稿没有清楚地解释问题。

我现在要问一个直截了当的问题。据我所知，java.text.SimpleDateFormat 毕竟是 java.text.DateFormat 的实现。DateFormat 的这个实现可以理解以下模式字母

```
G   Era designator
y   Year
M   Month in year
w   Week in year
W   Week in month
D   Day in year
d   Day in month
F   Day of week in month
E   Day in week
a   Am/pm marker
H   Hour in day (0-23)
k   Hour in day (1-24)
K   Hour in am/pm (0-11)
h   Hour in am/pm (1-12)
m   Minute in hour
s   Second in minute
S   Millisecond
z   Time zone
Z   Time zone 
```

java.text.DateFormat还有其他的实现，可以理解一些其他的模式字母组吗？如果有，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:06:39.203

XML 中的日期之一是 26-JAN-13。那将是`SimpleDateFormat`“dd-MMM-yy”

```
SimpleDateFormat oracleFormat = new SimpleDateFormat("dd-MMM-yy");
Date date = oracleFormat.parse(dateString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:44:32.573

不完全是您所要求的，但这里有一种不同的方法来避免会话 NLS 参数的不确定性。您可以在对象中进行转换，因此您可以使用显式日期格式掩码，并且在将其转换为 XML 时它已经是一个字符串：

```
create or replace type type_sample as object (
    f_id number,
    f_name varchar2(100),
    f_start_date varchar2(10),
    f_end_date varchar2(10),
    constructor function type_sample(self in out nocopy type_sample,
        f_id number, f_name varchar2, f_start_date date, f_end_date date)
        return self as result
)
/

create or replace type body type_sample as
    constructor function type_sample(self in out nocopy type_sample,
        f_id number, f_name varchar2, f_start_date date, f_end_date date)
        return self as result is
    begin
        self.f_id := f_id;
        self.f_name := f_name;
        self.f_start_date := to_char(f_start_date, 'YYYY-MM-DD');
        self.f_end_date := to_char(f_end_date, 'YYYY-MM-DD');
        return;
    end;
end;
/ 
```

创建对象的方式没有变化：

```
set serveroutput on
declare
    xmltype1 sys.xmltype;
    message type_sample;
begin
    message := new type_sample(1, 'Manohar', current_date, sysdate);
    xmltype1 := xmltype.createxml(message);
    dbms_output.put_line('out_errm : '|| xmltype1.getStringVal());
end;
/

out_errm : <TYPE_SAMPLE><F_ID>1</F_ID><F_NAME>Manohar</F_NAME><F_START_DATE>2013-02-04</F_START_DATE><F_END_DATE>2013-02-04</F_END_DATE></TYPE_SAMPLE> 
```

日期始终`YYYY-MM-DD`采用 XML 格式，与会话无关`NLS_DATE_FORMAT`（恰好`DD-MON-RR`在此会话中）。当然，您可以使用任何您想要的固定格式，您只需要在对象和 Java 之间同意该格式。

（我想我假设这是该对象的唯一用途；否则将日期放入字符串不是一个好主意......）。

# html - CSS：如何用封闭的 div 覆盖类样式

> ID：14689249
> 
> 赞同：2
> 
> 时间：2013-02-04T14:50:29.847
> 
> 标签：html, css

我有一个 P 元素，其样式无法更改。我想用 DIV 将其括起来以强制使用新的字体大小。为什么内部 P 忽略了 div 字体大小？

例子：

```
<html>
<head>
    <style>
        .para1 { font-size:small; }
    </style>
</head>

<div style="font-size:300% !important">
    <p class="para1">I must have been asleep, for certainly if I had been fully awake I must have noticed the approach to such a remarkable place. In the gloom the courtyard looked of considerable size, and as several dark ways led from it under great round arches it perhaps seemed bigger than it really is. I have not yet been able to see it by daylight.</p>
</div>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:56:57.517

您可以为包装 div 设置一个类，就像我在这里所做的那样：http: [//jsfiddle.net/3Zvrg/](http://jsfiddle.net/3Zvrg/)

HTML：

```
<div class="out_of_para1">
    <p class="para1"> 
```

CSS：

```
.out_of_para1 p {font-size: 300%;} 
```

编辑：基于 OP 的最后评论

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:55:24.217

我知道你不能改变班级，但你为什么不能这样做。

```
<div style="font-size:300% !important">
<p>I must have been asleep</p>
</div> 
```

并且不将您的“p”与任何课程相关联？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:54:02.800

只有当属性的值为 时，样式才会被继承`inherit`。在该段落中，该属性的值为`small`。因此*div*的字体大小是`300%`，但段落的字体大小是`small`.

您必须明确设置段落元素的字体大小。

您可以使用样式表中的后代选择器来执行此操作：

```
div .para1 {
    font-size: 300%;
} 
```

# javascript - `storageArea.set` 上的 Chrome 扩展“Uncaught SyntaxError: Unexpected identifier”

> ID：14689250
> 
> 赞同：0
> 
> 时间：2013-02-04T14:50:30.537
> 
> 标签：javascript, google-chrome-extension

```
var getShortenedUrl = function () {

  chrome.tabs.getSelected(null, function (tab) {

    var request_data = {
      'command': 'generate',
      'params': {
        'url': tab.url,
        'code': text_field.value
      }
    }

    chrome.extension.sendRequest(request_data, function (data) {
      switch (data.status) {
        case 'OK':
          setTextField(data.shortened_url)
          bindBtnToCoopy()
          chrome.storage.local.get(data.shortened_url, function (arr) {
            if (!arr[data.shortened_url]) {
              chrome.storage.local.set(
                {data.shortened_url:
                 tab.url}) /* <-- this thing throws an error */
            }
          })
          break
          /* ... */
      }
    })
  })
} 
```

见[https://github.com/noformnocontent/git-io-chrome/blob/master/chrome/popup.js#L96](https://github.com/noformnocontent/git-io-chrome/blob/master/chrome/popup.js#L96)

* * *

如果我把这`chrome.storage.local.set`部分评论出来，一切都是“完美的”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:13:42.327

正如@pimvdb 提到的[问题一样，要保存一个对象，我必须使用一个对象。](https://stackoverflow.com/questions/11692699/chrome-storage-local-set-using-a-variable-key-name)

```
if (!arr[data.shortened_url]) {
  var urlPair = {}
  urlPair[data.shortened_url] = tab.url
  chrome.storage.local.set(urlPair)
} 
```

* * *

从那时起，我还发布了“Git.io for Chrome”的 v.0.5，请参阅[http://git.io/crome](http://git.io/crome)了解更多信息

# javascript - superagent 和 nock 如何协同工作？

> ID：14689252
> 
> 赞同：16
> 
> 时间：2013-02-04T14:50:36.707
> 
> 标签：javascript, node.js, request, superagent, nock

在 node.js 中，我无法让 superagent 和 nock 一起工作。如果我使用请求而不是超级代理，它会完美运行。

这是一个超级代理无法报告模拟数据的简单示例：

```
var agent = require('superagent');
var nock = require('nock');

nock('http://thefabric.com')
  .get('/testapi.html')
  .reply(200, {yes: 'it works !'});

agent
  .get('http://thefabric.com/testapi.html')
  .end(function(res){
    console.log(res.text);
  }); 
```

res 对象没有“文本”属性。出问题了。

现在，如果我使用请求做同样的事情：

```
var request = require('request');
var nock = require('nock');

nock('http://thefabric.com')
  .get('/testapi.html')
  .reply(200, {yes: 'it works !'});

request('http://thefabric.com/testapi.html', function (error, response, body) {
  if (!error && response.statusCode == 200) {
    console.log(body)
  }
}) 
```

模拟内容正确显示。

我们在测试中使用了 superagent，所以我宁愿坚持下去。有谁知道如何使它工作？

非常感谢，泽维尔

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T15:59:56.170

我的假设是 Nock 响应`application/json`为 mime 类型，因为您响应的是`{yes: 'it works'}`. 在`res.body`Superagent 中查看。如果这不起作用，请告诉我，我会仔细看看。

**编辑：**

尝试这个：

```
var agent = require('superagent');
var nock = require('nock');

nock('http://localhost')
.get('/testapi.html')
.reply(200, {yes: 'it works !'}, {'Content-Type': 'application/json'}); //<-- notice the mime type?

agent
.get('http://localhost/testapi.html')
.end(function(res){
  console.log(res.text) //can use res.body if you wish
}); 
```

或者...

```
var agent = require('superagent');
var nock = require('nock');

nock('http://localhost')
.get('/testapi.html')
.reply(200, {yes: 'it works !'});

agent
.get('http://localhost/testapi.html')
.buffer() //<--- notice the buffering call?
.end(function(res){
  console.log(res.text)
}); 
```

现在任何一个都有效。这就是我相信正在发生的事情。nock 没有设置 mime 类型，并且假定为默认值。我假设默认是`application/octet-stream`. 如果是这种情况，superagent 不会缓冲响应以节省内存。你必须强制它缓冲它。这就是为什么如果你指定一个 mime 类型，你的 HTTP 服务无论如何都应该使用它，superagent 知道如何处理`application/json`以及为什么你可以使用`res.text`或者`res.body`（解析的 JSON）。

# passwords - TIBCO Active Matrix 密码字段不再存在？

> ID：14689253
> 
> 赞同：0
> 
> 时间：2013-02-04T14:50:37.967
> 
> 标签：passwords, tibco, automated-deploy

将我的应用程序解散到 Tibco ActiveMatrix Administrator 后，我转到属性，属性类型现在更改为“字符串”，即使我将其设置为“密码”类型。（哦，但是它然后像“#！jZ8MsfxWv2PCwTMAngz67w = =”一样加密）使用加密值作为字符串很好，但是如果我更改值（例如，密码123到456），它就不再加密了

这是我的问题..

1) TIBCO ActiveMatrix Administrator 3.2.0 版中是否不再存在密码类型字段？

2) 如果您对使用 TFS**进行自动构建有任何经验**，我所说的“更改属性”是指脚本文件夹中的属性文件。我的存档、ear、daa 文件将其存储为密码类型，但如果我将其分解为 TIBCOM AMX 管理员，它会自动更改为“字符串”类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:59:59.730

1.  管理员支持修改密码。你会看到这样的。 ![密码管理员-tibco](../Images/97cff3a5eb48d3705ae55c8a8d4222b6.png)

2.  如果您想通过脚本更改/更新密码 - 您必须加密密码。您可以使用 /bin 文件夹中的 obfuscate.exe。在 TRA 文档中阅读此内容。

TRA 脚本部署指南中的“使用密码”部分可能也很有趣。

# html - 将段落垂直对齐到 div 的底部不起作用

> ID：14689258
> 
> 赞同：2
> 
> 时间：2013-02-04T14:50:59.263
> 
> 标签：html, css

我有以下问题：

我有一个 div，在这个 div 中我有一个包含 5 个图像的段落（ p 标签）。我希望将整个段落定位在 div 容器的底部，但我无法完成它，我尝试过让段落显示内联框或表格单元格，并将其垂直对齐到底部，但没有作品。

也许有人可以帮助我？

代码：

分区容器：

```
#info {
    float:left;
    text-align:center;
    width:770px;
    height:600px;
    background:#fcfcfc;
    border:thin solid;
    border-color:#CCC;
    -moz-border-radius: 5px;    
    -webkit-border-radius: 5px; 
    -o-border-radius: 5px;
    font-family: "Myriad Pro";
    font-size: 12px;
} 
```

应该在 div 底部的段落

```
 <p style="display:inline-block; vertical-align:bottom;">
        <!-- Twitch Chat - Insert Twitch Id -->
        <a href="http://de.twitch.tv/chat/embed?channel=guardsmanbob&amp;popout_chat=true"><img id="ov" src="../Images/List/diverse/button_twitchchat.png"  /></a> 
        <!-- IRC Chat - Insert Quakenet id -->
        <a href="http://webchat.quakenet.org/?channels=guardsmanbob"><img id="ov" src="../Images/List/diverse/button_ircchat.png"  /></a>
        <!-- Facebook - Insert Facebook URL --> 
        <a href="https://www.facebook.com/pages/Guardsman-Bob/316802258368275"><img id="ov" src="../Images/List/diverse/button_facebook.png" /></a>
        <!-- Twitter - Insert Twitter URL --> 
        <a href="https://twitter.com/GuardsmanBob"><img id="ov" src="../Images/List/diverse/button_twitter.png"  /></a> 
        <!-- Leaguepedia - Insert Leaguepedia URL -->
        <a href="http://leaguepedia.com/wiki/GuardsmanBob"><img id="ov" src="../Images/List/diverse/button_leaguepedia.png"  /></a>
        </p> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T14:57:36.313

正如你知道你的 p 标签的高度，它总是一样的，你可以使用这样的东西：

为段落的父容器添加以下样式：

```
.parent {position:relative; padding-bottom:20px; /*height of your images plus any padding for your paragraph*/} 
```

然后你可以绝对定位你的图像：

```
 p {position:absolute; bottom:0; left:0;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:02:28.873

也许这对你有用：

```
<div id="info" style="position:relative;">
    <div style="position:absolute; bottom: 50px;">
        <p>[your images]</p>
    </div>
</div> 
```

上面的“50px”需要等于`<p>`标签中图像的高度。

**或者，如果图像高度是可变的**，您可以使用此处找到的技术：[http](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html) ://www.jakpsatweb.cz/css/css-vertical-center-solution.html 。您必须以某种方式修改边距以产生所需的定位，但链接到的技术会满足您的需求。

# sql-server - 我可以从 Microsoft SQL Server 2012 通过 DB LINK 连接到哪些 DB？

> ID：14689259
> 
> 赞同：1
> 
> 时间：2013-02-04T14:51:01.097
> 
> 标签：sql-server, sql-server-2012, dblink

我想知道我可以通过 DB Link 从 Microsoft SQL Server 2012 DB 连接到哪些 DB？

有清单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:49:06.307

我假设“数据库链接”是指“链接服务器”？没有列表，因为正如[文档](http://msdn.microsoft.com/en-us/library/ms188279.aspx)所述：

> SQL Server 分布式查询旨在与任何实现所需 OLE DB 接口的 OLE DB 提供程序一起使用。但是，SQL Server 仅针对 SQL Server Native Client OLE DB 提供程序和某些其他提供程序进行了测试。

和：

> OLE DB 提供程序在所需参数的类型和数量方面差别很大。例如，某些提供程序要求您使用 sp_addlinkedsrvlogin (Transact-SQL) 为连接提供安全上下文。某些 OLE DB 提供程序允许 SQL Server 更新 OLE DB 源上的数据。其他仅提供只读数据访问。有关每个 OLE DB 提供程序的信息，请参阅该 OLE DB 提供程序的文档。

换句话说，您可以使用任何 OLE DB 提供程序来创建链接服务器，但配置和行为会有很大差异。

MSDN 包含经过测试的提供程序[列表](http://technet.microsoft.com/en-us/library/ms187072%28v=sql.105%29.aspx)，尽管该页面没有 SQL Server 2012 版本。

# javascript - google.visualization.DataTable过滤重绘时需要重新计算列值

> ID：14689262
> 
> 赞同：1
> 
> 时间：2013-02-04T14:51:17.780
> 
> 标签：javascript, jquery, google-visualization

我有以下代码：

```
 //creates a DataTable. don't worry about this. this works
var projectData = createDataView(json);

// Create and draw the visualization.
var table = new google.visualization.ChartWrapper({
    chartType: "Table",
    containerId: "projectChart"
});

// add user filter
var userFilter = new google.visualization.ControlWrapper({
    'controlType': 'StringFilter',
    'containerId': 'userFilter',
    'options': {
        'filterColumnLabel': 'User'
    }
});

var dashboard = new google.visualization.Dashboard(
            document.getElementById('projectChartContainer'))
        .bind(userFilter, table);

function drawTable() 
{
    dashboard.draw(projectData, {
        'allowHtml': true,
        showRowNumber: true,
        title: "Project Data",
        width: middleWidth
    });

    // google visualization styles
    $(".google-visualization-table-td-number").addClass("small");
    $(".google-visualization-table-td-center").addClass("eighty");
}

// set width 
middleWidth = $("#contentMiddle").width();
drawTable();

// if user resized the browser, change the width and redraw.  
//this is ugly, but the only way i could find. 100% was buggy
$(window).resize( function() {
    middleWidth = $(window).width()-142;
    drawTable();
});

// add a change listener to table
google.visualization.events.addListener(table, 'ready', function() {                    
    // get hour totals
    var workedHours = 0;
    var billedHours = 0;

    // THIS IS WHERE I NEED HELP!!!!!       
    /*var dataLength = table.getNumberOfRows();
    for (var x = 0; x < dataLength; x++)
    {
        workedHours += table.getValue(x, 7);
        billedHours += table.getValue(x, 9);
    }
    $("#totalWorked").text(workedHours);
    $("#totalBilled").text(billedHours);
    $("#totalsContainer").show();*/

    console.log(projectData.getValue(1,1));
}); 
```

就表格显示和过滤而言，一切正常。我需要的是一种获取新过滤表的列总数的方法。我可以使用 projectData.getValue() 第一次获取值，但无论过滤掉什么，它都会返回相同的值。我可以在新绘制的表格中没有行，它将显示与最初相同的值。我并不感到惊讶，因为我实际上只是在更改表格并听取它的重绘。但我无法从表中获取任何值。我上面的表函数（即...table.getNumberOfRows()）不存在。这正是我希望发生的事情。关于如何获取过滤表的新列值的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:22:45.737

我的建议是先将表数据转换为数据表`var tableData = table.getDataTable();`

该数据表将被过滤和排序，如表中所示。然后，您可以在 tableData 上运行 for() 循环：

```
for (var x = 0; x < tableData.getNumberOfRows(); x++)
{
    workedHours += tableData.getValue(x, 7);
    billedHours += tableData.getValue(x, 9);
}
$("#totalWorked").text(workedHours);
$("#totalBilled").text(billedHours);
$("#totalsContainer").show(); 
```

# git - git commit 推送到远程分支，但无法拉到另一个开发人员的仓库

> ID：14689263
> 
> 赞同：0
> 
> 时间：2013-02-04T14:51:19.523
> 
> 标签：git, branch, shared

我们在中央服务器上有一个共享的“开发”存储库，具有不同的分支，称为 v4、v5、v6

开发人员（“Alice”）已提交 v6，一切看起来都不错。我有一个接收后挂钩，它收集了所有相关细节，持续集成服务器可以克隆存储库并检查这个提交并处理它——一切都很好。

但是，当我在我的个人副本和 git pull 中签出 v6 时，我根本没有得到提交“Alice”。它根本不会出现在日志中，也不会被拉到我的机器上。

当我通过 cgit 浏览 repo 时，提交不会显示在“日志”中 - 但如果我从 SHA 和分支构建查看 URL，我可以看到提交。

就像 Alice 已经推送到中央（裸）repo 中的一个不可见的并行 v6 分支。如何让这个无形的分支显露出来？

那么可能发生了什么？在 Alice 提交之前几个小时，我使用命令删除了中央仓库上的 v6 分支`git push origin :v6`。v6 是空的，基于原始母版，但我希望它源自最新的 v5 作品。为此，我检查了 v5，进行了 git pull，然后将其检查到 v6。然后我将此 v6 推送到共享仓库。

所以看起来我的删除不起作用，并且以某种方式 Alice 推送到了 v6，而不是 git 认为的 v6。

我的修复？修改裸仓库上的 refs/heads/Release_6 以包含 Alice 提交的 SHA。

但这是正确的做法吗？git 如何在不严重抱怨的情况下维护或允许影子分支？Git 没有在我的仓库或 Alice 的..

回答： 看起来裸 repo refs/heads/v6 被我笨拙的 rebase 尝试弄坏了。在将 Alice 的提交的 SHA 写入裸 repo refs/heads/v6 之后，一切都出现在它应该做的事情上。

# POST_MORTEM 分析。

服务器“裸”存储库实际上是从一些原始工作中克隆的（使用 --bare）。原始仓库有 v4、v5、v6。

周末有一个脚本在`git fetch origin +refs/heads/*:refs/heads/*`裸仓库上运行，我猜是因为“+”修饰符，很容易覆盖了我们用原始仓库中的“旧”v6 创建的“新”v6。

这就解释了为什么 v6 工作似乎有效，然后在周末消失了。

没有 git 的错，很明显是我自己犯的错误。是时候坐在顽皮的台阶上了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:09:49.657

您还没有给出我怀疑的所有命令，但这就是我的看法。

你、Alice 和“origin”（中央存储库）都有一个 v6 分支。这些将在您的存储库 v6、alice/v6、origin/v6 中调用（假设您有一个远程指向 alices 存储库）。你用你的'git push origin:v6'删除了中心那个。这让您和 alice 拥有 v6 分支（除非您还使用 'git branch -d v6' 删除了本地分支或在推送后执行了 'git fetch origin --prune'）。

此时没有origin/v6。alice/v6 和您的本地 v6 指的是同一个提交。Alice 确实工作并推动到 origin/v6 重新创建分支，并在顶部添加新工作。

您现在 fetch 将在本地带回 origin/v6。但是除非您签出 v6 并执行 git pull 或 git merge origin/v6，否则您的本地分支将不会更新以匹配 origin/v6。

您真正的问题是您计划在当前 v5 上重新设置 v6。如果你想这样做，你必须让所有相关的开发人员都同意。如果你在 Alice 做出承诺之前就这样做了——应该会非常恼火。重新阅读 Git 书籍中关于变基已发布分支的部分，并考虑将新工作从 v65 合并到 v6。

# css - 一个：链接在Firefox中不起作用

> ID：14689264
> 
> 赞同：0
> 
> 时间：2013-02-04T14:51:24.457
> 
> 标签：css, firefox

我的链接样式有问题 - 悬停和活动作品，但链接没有，我做错了什么？我该如何解决这个问题？

```
 #nav{padding: 5px 230px 10px 230px;}

#nav li{
    display: inline-block;
    list-style: none;
    margin: 5px;
    padding: 1px;
    font: 20px Century Gothic;      
}

    a.navlink:link{
        color:#06AD00;
        background: white;
        border-top: 1px #958A7E solid;  
        border-bottom: 1px #958A7E solid;
        cursor:pointer;
    }
    a.navlink:visited{}
    a.navlink:hover {
        color: black; 
        background: white; 
        border-top: 1px black solid;    
        border-bottom: 1px black solid; 
        cursor:pointer;
    }
    a.navlink:active {
        color: red; 
        background: white;
        border:0;
        cursor:pointer;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:05:54.640

你的 CSS 在我的 FireFox 上效果很好。确保根据 CSS 正确定义 HTML 标记和属性。

另外，请注意，您可能会看到错误的样式，因为您的链接已经被访问过。尝试放置一些您没有访问过的 URL。（例如：sdfdsfdsfsfdhgsdf.com 等...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:06:18.323

我在某些版本的 Opera 和旧版 IE 上也遇到过同样的问题。我一直避免使用`:link`伪类而只支持自然`a`风格 - 从来没有完全理解原因，但`:link`始终是 50/50，而自然`a`从未失败过。

试试这个，而不是你的`:link`风格：

```
a.navlink{
    ...
} 
```

这只会为您的`a.navlink`元素创建默认状态 - 其他伪类仍将正确修改它。如果它不能为你解决问题，那么我的下一个猜测是你在某个地方有一种冲突的风格。如果不了解其他来源，很难确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T00:05:46.843

`:link`根据规范，仅匹配未访问的链接。如果要匹配所有链接，则必须执行类似的操作`a.navlink:link, a.navlink:visited {}`

# css - 使用 Sprite 重复背景图像

> ID：14689266
> 
> 赞同：0
> 
> 时间：2013-02-04T14:51:28.387
> 
> 标签：css, background, css-sprites

我已经阅读了这些主题，但我不知道如何找到答案。

问题是（对于身体）：

```
background: url('image1.png') top left repeat-x, 
        url('image2.png') bottom left repeat-x, 
        #eeeeee; 
```

这行得通。

如何在精灵中设置这些图像？因为我可以得到图像形式的精灵：

```
 background-position: -211px -0px; width: 8px; height: 110px; 
```

但我需要从 sprite 中获取 image1.png 或 image2.png，我还需要在 x 上重复图像。就像是：

```
background: url('image1.png') "-211px -0px; width: 8px; height: 110px" repeat-x, 
        url('image2.png') "-211px -0px; width: 8px; height: 110px" repeat-x, 
        #eeeeee; 
```

我以这种方式知道是不可能的。

你能帮助我吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:23:53.367

这是不正确的：

```
background: url('image1.png') "-211px -0px; width: 8px; height: 110px" repeat-x, 
    url('image2.png') "-211px -0px; width: 8px; height: 110px" repeat-x, 
    #eeeeee; 
```

相反，你应该这样写：

```
background: url('image1.png') repeat-x -211px -0px / 8px 110px, 
    url('image2.png') repeat-x -211px -0px / 8px 110px;
background-color:  #eeeeee; 
```

但是您需要 2 个单独的图像，您将无法使用精灵来做到这一点。

# git - git - 终端窗口 - imac - diff 不能再输入

> ID：14689268
> 
> 赞同：-1
> 
> 时间：2013-02-04T14:51:33.983
> 
> 标签：git, github

```
diff --git a/hellokitdoc.rtf b/hellokitdoc.rtf

    index e906e3b..703dd99 100644
    --- a/hellokitdoc.rtf
    +++ b/hellokitdoc.rtf
    @@ -4,4 +4,6 @@
     \margl1440\margr1440\vieww10800\viewh8400\viewkind0
     \pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx79

    -\f0\fs24 \cf0 my hello kit doc starts there}
    \ No newline at end of file
    +\f0\fs24 \cf0 this is newly updated line.\
    +\
    +}
    \ No newline at end of file
    (END) 
```

在（END）最后一行之后..我无法在终端窗口中输入任何内容..我必须关闭终端窗口并重新导航，然后再发出命令。这是为什么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:55:44.797

只需按`Q`键即可退出寻呼机。使用`H`钥匙获得帮助。使用`K`和`L`您可以一次向上和向下滚动一行。`U`并`D`做同样的事情，但当时只有半个屏幕。`/`++向前搜索，而`string`++向后搜索。也可以是正则表达式。滚动到顶部，+到底部。这些是我使用的最重要的命令，但还有更多，请参阅[手册页](http://manpages.ubuntu.com/manpages/en/man1/less.1.html)。`ENTER``string``?``string``ENTER``string``G``SHIFT``G`

# python - 在 numpy 中，用空元组和省略号对数组进行索引有什么作用？

> ID：14689270
> 
> 赞同：14
> 
> 时间：2013-02-04T14:51:41.540
> 
> 标签：python, arrays, numpy, indexing

我刚刚偶然发现一个数组 in`numpy`可能被一个空元组索引：

```
In [62]: a = arange(5)

In [63]: a[()]
Out[63]: array([0, 1, 2, 3, 4]) 
```

我在[numpy wiki ZeroRankArray](http://projects.scipy.org/numpy/wiki/ZeroRankArray)上找到了一些文档：

> （萨沙）首先，无论对 x[...] 和 x[()] 做出何种选择，它们都应该是相同的，因为 ... 只是“尽可能多：必要时”的语法糖，在零的情况下排名导致 ... = (:,)*0 = ()。其次，零级数组和 numpy 标量类型在 numpy 中是可以互换的，但是 numpy 标量可以在 ndarrays 不能的某些 python 结构中使用。

因此，对于 0-d 数组`a[()]`，`a[...]`应该是等价的。它们也适用于高维数组吗？他们强烈地看起来是：

```
In [65]: a = arange(25).reshape(5, 5)

In [66]: a[()] is a[...]
Out[66]: False

In [67]: (a[()] == a[...]).all()
Out[67]: True

In [68]: a = arange(3**7).reshape((3,)*7)

In [69]: (a[()] == a[...]).all()
Out[69]: True 
```

**但是**，它*不是*语法糖。不适用于高维数组，甚至不适用于 0-d 数组：

```
In [76]: a[()] is a
Out[76]: False

In [77]: a[...] is a
Out[77]: True

In [79]: b = array(0)

In [80]: b[()] is b
Out[80]: False

In [81]: b[...] is b
Out[81]: True 
```

然后是空*列表*索引的情况，它完全做其他事情，但看起来等同于使用空索引`ndarray`：

```
In [78]: a[[]]
Out[78]: array([], shape=(0, 3, 3, 3, 3, 3, 3), dtype=int64)

In [86]: a[arange(0)]
Out[86]: array([], shape=(0, 3, 3, 3, 3, 3, 3), dtype=int64)

In [82]: b[[]]
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)

IndexError: 0-d arrays can't be indexed. 
```

因此，看起来`()`和`...`相似但并不完全相同，并且索引`[]`完全意味着其他东西。And `a[]`or `b[]`are `SyntaxError`s。使用列表进行索引记录在[索引数组](http://docs.scipy.org/doc/numpy/user/basics.indexing.html#index-arrays)中，并且有一个关于使用元组索引的简短通知[中，并且在同一文档的末尾](http://docs.scipy.org/doc/numpy/user/basics.indexing.html#dealing-with-variable-numbers-of-indices-within-programs)。

这就留下了一个问题：

`a[()]`和之间的区别是`a[...]`设计那么设计是什么？

（问题让人想起：[空的`()`在Matlab矩阵上做了什么？](https://stackoverflow.com/q/13679749/974555)）

**编辑：**

事实上，即使是*标量*也可能被一个空元组索引：

```
In [36]: numpy.int64(10)[()]
Out[36]: 10 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T18:12:21.877

的处理`A[...]`是一种特殊情况，经过优化以[始终返回`A`自身](https://github.com/numpy/numpy/blob/master/numpy/core/src/multiarray/mapping.c#L991)：

```
if (op == Py_Ellipsis) {
    Py_INCREF(self);
    return (PyObject *)self;
} 
```

任何其他应该等价的东西，例如`A[:]`, `A[(Ellipsis,)]`, `A[()]`,`A[(slice(None),) * A.ndim]`都将返回一个整体的*视图*`A`，其`base`是`A`：

```
>>> A[()] is A
False
>>> A[()].base is A
True 
```

这似乎是一种不必要且过早的优化，因为`A[(Ellipsis,)]`并且`A[()]`总是会给出相同的结果（关于 的完整视图`A`）。从查看[https://github.com/numpy/numpy/commit/fa547b80f7035da85f66f9cbabc4ff75969d23cd](https://github.com/numpy/numpy/commit/fa547b80f7035da85f66f9cbabc4ff75969d23cd)看来，它最初是必需的，因为索引 with`...`在 0d 数组上无法正常工作（之前为[https://github.com/numpy/numpy /commit/4156b241aa3670f923428d4e72577a9962cdf042](https://github.com/numpy/numpy/commit/4156b241aa3670f923428d4e72577a9962cdf042)它将元素作为标量返回），然后扩展到所有数组以保持一致性；从那时起，索引已固定在 0d 数组上，因此不需要优化，但它设法保留下来（并且可能有一些代码取决于`A[...] is A`真实情况）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T17:38:46.477

虽然在您给出的示例中，空元组和省略号给出了类似的结果，但通常它们用于不同的目的。索引数组时，`A[i, j, k] == A[(i, j, k)]`特别是`A[...] == A[(Ellipsis,)]`. 在这里，元组只是用作索引元素的容器。当您需要将索引作为变量进行操作时，这可能很有用，例如，您可以执行以下操作：

```
index = (0,) * A.ndim
A[index] 
```

请注意，因为元组是索引元素的容器，所以它不能与其他索引组合，例如`A[(), 0] == A[[], 0]`和`A[(), 0] != A[..., 0]`。

`A`因为可以使用比 更少的索引来索引数组，所以`A.ndim`使用空元组进行索引是该行为的自然扩展，并且在某些情况下可能很有用，例如，上面的代码片段可以在`A.ndim == 0`.

简而言之，元组作为索引元素的容器，允许为空，而省略号是可能的索引元素之一。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-10-24T03:19:23.453

根据[官方 Numpy 文档](https://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#detailed-notes)，区别很明显：

> 空（元组）索引是零维数组的完整标量索引。**如果是零维****`x[()]`则返回标量，否则返回视图。`x`**另一方面，**`x[...]`总是返回一个 view**。
> 
> 当省略号 ( `...`) 存在但没有大小（即替换零 `:`）时，结果仍将始终是一个数组。如果不存在高级索引，则为视图，否则为副本。

```
>>> import numpy as np
>>> # ---------------------------------- #
>>> # when `x` is at least 1 dimensional #
>>> # ---------------------------------- #
>>> x = np.linspace(0, 10, 100)
>>> x.shape
(100,)
>>> x.ndim
1
>>> a = x[()]
>>> b = x[...]
>>> id(x), id(a), id(b)
(4559933568, 4561560080, 4585410192)
>>> id(x.base), id(a.base), id(b.base)
(4560914432, 4560914432, 4560914432)
>>> # ---------------------------- #
>>> # when `z` is zero dimensional #
>>> # ---------------------------- #
>>> z = np.array(3.14)
>>> z.shape
()
>>> z.ndim
0
>>> a = z[()]
>>> b = z[...]
>>> type(a), type(b)
(<class 'numpy.float64'>, <class 'numpy.ndarray'>)
>>> id(z), id(a), id(b)
(4585422896, 4586829384, 4561560080)
>>> id(z.base), id(a.base), id(b.base)
(4557260904, 4557260904, 4585422896)
>>> b.base is z
True 
```

# java - 跨多个线程的 Spring bean 引用

> ID：14689279
> 
> 赞同：7
> 
> 时间：2013-02-04T14:52:02.817
> 
> 标签：java, multithreading, spring, dependency-injection

我遇到了如下场景：

MyBean - 在 XML 配置中定义。

我需要将 MyBean 注入多个线程。但我的要求是：1）在两个不同线程中检索到的引用应该不同 2）但无论我从单线程检索 bean 多少次，我都应该得到相同的引用。

例如：

```
Thread1 {

    run() {
        MyBean obj1 = ctx.getBean("MyBean");
        ......
        ......
        MyBean obj2 = ctx.getBean("MyBean");
    }
}

Thread2 {

    run(){
        MyBean obj3 = ctx.getBean("MyBean");
    }
} 
```

所以基本上`obj1 == obj2`但是`obj1 != obj3`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T14:56:44.677

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T14:56:35.793

您需要的是一个新的**Thread Local 自定义范围**。您可以实现自己的，也可以[使用此处的](http://www.springbyexample.org/examples/custom-thread-scope-module.html)。

> Custom Thread Scope 模块是用于提供线程范围 bean 的自定义范围实现。每个对 bean 的请求都会为同一个线程返回同一个实例。

# javascript - 如果使用它，“use strict”会使我的 CasperJS 测试崩溃

> ID：14689280
> 
> 赞同：2
> 
> 时间：2013-02-04T14:52:05.097
> 
> 标签：javascript, casperjs, use-strict

这是代码：

```
(function() {
    /*global casper:true */
   "use strict";

   this.run = function(casper) {
       // code test here
   };

   this.run(casper);
})(); 
```

`casperjs test myfile.js`返回：

```
TypeError: 'undefined' is not an object (evaluating 'this.run = function(casper) {

   }')
#    type: uncaughtError
#    error: "TypeError: 'undefined' is not an object (evaluating 'this.run = function(casper) {\n       \n   }')" 
```

如果我删除“use strict”，它只会挂起（预期的行为，因为这个测试不完整）。我想围绕 use strict 有一条我不理解的规则，但返回的错误并不明显。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:55:30.020

在严格模式下，`this`将在这样的立即函数内部未定义，而不是全局对象（没有严格模式）。使您的代码工作的一种方法是显式创建全局变量（如果这是您正在寻找的）：

```
window.run = function(casper) {
    // code test here
};
window.run(casper); 
```

或者，如果您不是在寻找全局变量，只需在本地声明您的方法：

```
var run = function(casper) {
    // code test here
};

run(casper); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:55:36.357

在严格模式下，“this”在不是对象方法的函数中无效。在非严格模式下，“this”指的是像你这样的全局函数中的“window”。

# windows - 在 windows xp 远程会话命令行中指定用户名和密码

> ID：14689284
> 
> 赞同：0
> 
> 时间：2013-02-04T14:52:25.987
> 
> 标签：windows, remote-desktop

我有一个带有以下命令的批处理文件：

`mstsc.exe /v:SOME_REMOTE_COMPUTER`

我还希望能够在这个批处理文件中指定用户名和密码，这可能吗？

另外，当我运行这个批处理文件时会打开一个 cmd 框，我必须手动关闭它，有没有办法在启动远程会话后自动退出 cmd 提示？

**编辑：**

我现在有：

```
START mstsc.exe /v:SOME_REMOTE_COMPUTER
exit 
```

这将关闭 cmd 提示窗口。我仍在寻找将用户名和密码传递给远程会话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:30:21.920

首先，开始>所有程序>附件>远程桌面连接

输入计算机名称和时钟选项

选中显示保存凭据的框

现在连接，系统将提示您输入用户名/密码。输入它们。

现在您应该连接到远程计算机。

关闭远程会话。

创建一个包含以下命令的 .bat 文件：`START mstsc.exe /v:SOME_REMOTE_COMPUTER & exit`

运行 .bat 文件，远程桌面会话应该会自动打开并提交您保存的凭据。

# google-drive-api - Googleapi 按标题搜索驱动器始终返回 0 项

> ID：14689286
> 
> 赞同：1
> 
> 时间：2013-02-04T14:52:31.913
> 
> 标签：google-drive-api

我正在使用google api dot net client，我有点困惑。

以下代码返回特定文件夹的完整列表（ID：XXXXXXXXXXXXXXXXXXXXX）。

```
List<File> result = new List<File>();
FilesResource.ListRequest request = service.Files.List();
request.Q = "'XXXXXXXXXXXXXXXXXXXXX' in parents";
request.MaxResults = 35;
FileList files = request.Fetch(); 
```

例如，此 FileList 的一项是

```
"id": "0B5XhOfl0NZ2cZ1M1aVBPcVlTUTA",
"title": "87BC1CAE-A01C-43A1-BB21-BE3DA6D6C7DC" 
```

如果我更改查询，搜索标题，我总是收到一个空的 FileList。

```
List<File> result = new List<File>();
FilesResource.ListRequest request = service.Files.List();
request.Q = "title = '87BC1CAE-A01C-43A1-BB21-BE3DA6D6C7DC'";
request.MaxResults = 35;
FileList files = request.Fetch(); 
```

运算符是 '=' 还是 'contains' 或仅搜索目录名称的一部分都没有关系：

```
title contains '87BC1CAE' 
```

我只有通过搜索 ID 才能收到正确的结果。以下代码完美无缺：

```
File file = service.Files.Get(fileId).Fetch();

Console.WriteLine("Title: " + file.Title);
Console.WriteLine("Description: " + file.Description);
Console.WriteLine("MIME type: " + file.MimeType); 
```

请帮忙 ：）

@AliAfshar 原始 HTTP 响应：第一种情况（标题 = '87BC1CAE-A01C-43A1-BB21-BE3DA6D6C7DC'）

```
request.Fetch()
TestGoogleApi.vshost.exe Information: 0 : DotNetOpenAuth, Version=4.0.0.11165, Culture=neutral, PublicKeyToken=2780ccd10d57b246 (official)
TestGoogleApi.vshost.exe Information: 0 : Preparing to send AssertionFlowMessage (2.0) message.
TestGoogleApi.vshost.exe Information: 0 : Sending AssertionFlowMessage request.
TestGoogleApi.vshost.exe Information: 0 : HTTP POST https://accounts.google.com/o/oauth2/token
TestGoogleApi.vshost.exe Information: 0 : The following required parameters were missing from the DotNetOpenAuth.OAuth2.Messages.AccessTokenFailedResponse message: {error,}
   TestGoogleApi.vshost.exe Information: 0 : Received UnauthorizedResponse response.
   {Google.Apis.Drive.v2.Data.FileList}
_etag: "\"Q0cVodxX8sh4vfxZTlOyWcmmc0k/vyGp6PvFo4RvsFtPoIWeCReyIC8\""
_items: Count = 0
_kind: null
_nextLink: null
_nextPageToken: null
_selfLink: null
ETag: "\"Q0cVodxX8sh4vfxZTlOyWcmmc0k/vyGp6PvFo4RvsFtPoIWeCReyIC8\""
Items: Count = 0
Kind: null
NextLink: null
NextPageToken: null
SelfLink: null 
```

第二种情况（父母中的'XXXXXXXXXXXXXXXXXXXXXXXX'）

```
request.Fetch()
TestGoogleApi.vshost.exe Information: 0 : DotNetOpenAuth, Version=4.0.0.11165, Culture=neutral,  PublicKeyToken=2780ccd10d57b246 (official)
TestGoogleApi.vshost.exe Information: 0 : Preparing to send AssertionFlowMessage (2.0) message.
TestGoogleApi.vshost.exe Information: 0 : Sending AssertionFlowMessage request.
TestGoogleApi.vshost.exe Information: 0 : HTTP POST https://accounts.google.com/o/oauth2/token
TestGoogleApi.vshost.exe Information: 0 : The following required parameters were missing from the  DotNetOpenAuth.OAuth2.Messages.AccessTokenFailedResponse message: {error,}
TestGoogleApi.vshost.exe Information: 0 : Received UnauthorizedResponse response.
{Google.Apis.Drive.v2.Data.FileList}
_etag: "\"Q0cVodxX8sh4vfxZTlOyWcmmc0k/Jyx7utsp71-_JwU5RHnI_VZmL5o\""
_items: Count = 1575
_kind: null
_nextLink: null
_nextPageToken: null
_selfLink: null
ETag: "\"Q0cVodxX8sh4vfxZTlOyWcmmc0k/Jyx7utsp71-_JwU5RHnI_VZmL5o\""
Items: Count = 1575
Kind: null
NextLink: null
NextPageToken: null
SelfLink: null 
```

* * *

**更新于 2013 年 2 月 2 日** 好的，请原谅我的延迟。我使用了提琴手，这是捕获的结果：

* * *

第一个请求：

```
POST https://accounts.google.com/o/oauth2/token HTTP/1.1
Content-Type: application/x-www-form-urlencoded; charset=utf-8
User-Agent: DotNetOpenAuth/4.0.0.11165
Host: accounts.google.com
Cache-Control: no-store,no-cache
Pragma: no-cache
Content-Length: 603
Connection: Keep-Alive

grant_type=assertion&assertion_type=http%3A%2F%2Foauth.net%2Fgrant_type%2Fjwt%2F1.0%2Fbearer&assertion=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiI0MjYwNjE5OTE1NzktYXEzMHBhcmVsYmpsb3BrMjlqcXFvdjhsdWhic2o3YjdAZGV2ZWxvcGVyLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJzY29wZSI6Imh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmUiLCJhdWQiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20vby9vYXV0aDIvdG9rZW4iLCJleHAiOjEzNjAwNjA0NDMsImlhdCI6MTM2MDA1Njg0M30.dk7Vdu-................-LIw0sFrVko-VWL7-elhz59VQcU_......... 
```

第一个答案：

```
HTTP/1.1 200 OK
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Date: Tue, 05 Feb 2013 09:34:03 GMT
Content-Type: application/json
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Server: GSE
Content-Length: 128

{
  "access_token" : "ya29.AHES6ZS-...........-a8HRHfMZ-NxXekx",
  "token_type" : "Bearer",
  "expires_in" : 3600
} 
```

第二个请求：

```
GET https://www.googleapis.com/drive/v2/files?alt=json&fields=items(id%2Ctitle)%2CnextPageToken&prettyPrint=true&maxResults=2000&q=title%20%3D%20'87BC1CAE-A01C-43A1-BB21-BE3DA6D6C7DC' HTTP/1.1
Authorization: Bearer ya29.AHES6ZS-...........-a8HRHfMZ-NxXekx
Content-Type: application/json; charset=utf-8
User-Agent: TestGoogleApi google-api-dotnet-client/ Win32NT/6.1.7600.0 (gzip)
Host: www.googleapis.com
Accept-Encoding: gzip, deflate 
```

第二个答案：

```
HTTP/1.1 200 OK
Expires: Tue, 05 Feb 2013 09:34:04 GMT
Date: Tue, 05 Feb 2013 09:34:04 GMT
Cache-Control: private, max-age=0, must-revalidate, no-transform
ETag: "Q0cVodxX8sh4vfxZTlOyWcmmc0k/vyGp6PvFo4RvsFtPoIWeCReyIC8"
Content-Type: application/json; charset=UTF-8
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Content-Length: 17
Server: GSE

{
 "items": []
} 
```

* * *

如您所见，项目数为 0。

如果我通过 Web 界面 [https://developers.google.com/drive/v2/reference/files/list](https://developers.google.com/drive/v2/reference/files/list)提出相同的请求，它会给我 2 个项目，应该是。

这是用[https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)

```
GET /drive/v2/files?alt=json&fields=items(id%2Ctitle)%2CnextPageToken&prettyPrint=true&maxResults=2000&q=title%20%3D%20'87BC1CAE-A01C-43A1-BB21-BE3DA6D6C7DC' HTTP/1.1
Host: www.googleapis.com
Content-length: 0
Authorization: OAuth ya29.AHES6ZSDr7bDFMQxjR........ObzyEhkzQmN

HTTP/1.1 200 OK
Content-length: 220
Via: HTTP/1.1 GWA
Content-location: https://www.googleapis.com/drive/v2/files?alt=json&fields=items(id%2Ctitle)%2CnextPageToken&prettyPrint=true&maxResults=2000&q=title%20%3D%20'87BC1CAE-A01C-43A1-BB21-BE3DA6D6C7DC'
X-content-type-options: nosniff
Etag: "Q0cVodxX8sh4vfxZTlOyWcmmc0k/oUg90Ml6_g3EsaXCogiJOEMkZ-M"
X-google-cache-control: remote-fetch
-content-encoding: gzip
Server: GSE
Reason: OK
X-xss-protection: 1; mode=block
Cache-control: private, max-age=0, must-revalidate, no-transform
Date: Tue, 05 Feb 2013 15:30:09 GMT
X-frame-options: SAMEORIGIN
Content-type: application/json; charset=UTF-8
Expires: Tue, 05 Feb 2013 15:30:09 GMT
{
 "items": [
  {
   "id": "0B5XhOf....VlTUTA",
   "title": "87BC1CAE-A01C-43A1-BB21-BE3DA6D6C7DC"
  },
  {
   "id": "0B5XhO....EbGRLVVVReGM",
   "title": "87BC1CAE-A01C-43A1-BB21-BE3DA6D6C7DC"
  }
 ]
} 
```

非常感谢，非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:05:27.177

看起来混乱是由于您在代码中使用了服务帐户，但将结果与您在 Web 界面中看到的结果进行了比较。

使用 Web 界面或 OAuth Playground 时，您授权应用程序使用您的个人帐户，而不是服务帐户。服务帐户无权访问您有权访问的相同文件，因为它实际上是应用程序拥有的帐户。

如果您想使用服务帐户来访问您的文件，您应该按照[https://developers.google.com/drive/delegation中的说明执行域范围的委派](https://developers.google.com/drive/delegation)

这仍然无法解释为什么某些查询返回结果而其他查询不返回结果，但请在不使用服务帐户的情况下重试所有操作，如果仍然无法按预期工作，请更新问题。

# javascript - 通过单击按钮更改 SELECT OPTION 下拉数据

> ID：14689293
> 
> 赞同：1
> 
> 时间：2013-02-04T14:53:11.630
> 
> 标签：javascript

我正在尝试通过 javascript 操作下拉列表，但似乎每次单击按钮时都会得到此代码：

> 类型错误：objDropDownMenu.options 未定义
> 
> objDropDownMenu.options[1].selected = true;

这是我的代码：

```
<FORM NAME="myform" ACTION="" METHOD="GET">
<SELECT class="select diff_data" style="WIDTH: 165px" name=CarPick>
<OPTION value=1>Audi</OPTION>
<OPTION value=2>BMW</OPTION>
<OPTION value=3>Mercedes</OPTION>
</SELECT>

<INPUT TYPE="button" NAME="button2" Value="Write" onClick="writeText(this.form)">
</FORM>

<SCRIPT LANGUAGE="JavaScript">
var objDropDownMenu = document.getElementsByName("CarPick");

function writeText (form) {
    objDropDownMenu.options[30].selected = true;
}
</SCRIPT> 
```

安宇知道为什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:55:06.587

`getElementsByName`总是返回一个`array`of `objects`。

所以你必须使用： `objDropDownMenu[0].options[30].selected = true`

解决此问题的更好方法是为您的选择设置一个*ID*，然后使用`document.getElementById('yourid')`它始终只返回一个对象（因为该 ID 在 HTML 文档中应该始终是唯一的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:59:20.717

我不确定您的代码是否只是一个示例，但如果不是，则有许多不匹配的名称。让我们解决这个问题：

```
<FORM NAME="myform" ACTION="" METHOD="GET">
<SELECT class="select diff_data" style="WIDTH: 165px" name="CarPick">
<OPTION value="1">Audi</OPTION>
<OPTION value=2>BMW</OPTION>
<OPTION value=3>Mercedes</OPTION>
</SELECT>

<INPUT TYPE="button" NAME="button2" Value="Write" onClick="writeText(this.form)">
</FORM>

<SCRIPT LANGUAGE="JavaScript">
var objDropDownMenu = document.getElementsByName("CarPick")[0];   //It is get elementS - all alements with that name are returned

function writeText (form) {
    objDropDownMenu.options[2].selected = true;  //Here I wonder if 30th entry exists, 2 surelly does
}
</SCRIPT> 
```

# delphi - Windows Crypto Api 长度错误

> ID：14689294
> 
> 赞同：0
> 
> 时间：2013-02-04T14:53:12.967
> 
> 标签：delphi, cryptoapi

我找到了一个用于生成 RSA KeyPair 和加密/解密的简单单元。它适用于小字符串，但在较大的文本上我得到错误：错误长度。

可能是什么原因，这里是单位，单位 wcrypt2 你可以[在这里下载](http://stuff.irsoft.de/CryptoAPI2.zip)

在德尔福 2010 上测试

```
unit Crypt_RSA;

interface

uses
  Windows, Classes, SysUtils, WCrypt2;

function RSAGenerateKeys(var PrivateKey, PublicKey: String): Boolean;
function RSAEncrypt(Source, Key: String): String;
function RSADecrypt(Source, Key: String): String;

implementation

function RSAGenerateKeys(var PrivateKey, PublicKey: String): Boolean;
const
  RSA1024BIT_KEY = $04000000;

var
  RSA: HCRYPTPROV;
  HKeyPair: HCRYPTKEY;
  Pair: TStringStream;
  buflen: DWORD;

  function SetKey(BlobDef: Cardinal; var Key: String): Boolean;
  begin
    Result := Bool(CryptExportKey(HKeyPair, 0, BlobDef, 0, nil, @buflen));
    if Result then
    begin
      Pair.SetSize(buflen);
      Result := Bool(CryptExportKey(HKeyPair, 0, BlobDef, 0, PByte(Pair.Memory), @buflen));
    end;

    Key := Pair.ReadString(buflen);
    Pair.Seek(0, soBeginning);
  end;

begin
  Pair := TStringStream.Create;

  Result := Bool(CryptAcquireContext(@RSA, nil, nil, PROV_RSA_FULL, CRYPT_VERIFYCONTEXT));
  if Result then
    Result := Bool(CryptGenKey(RSA, AT_KEYEXCHANGE, RSA1024BIT_KEY or CRYPT_EXPORTABLE, @HKeyPair));

  if Result then
    Result := SetKey(PRIVATEKEYBLOB, PrivateKey);
  if Result then
    Result := SetKey(PUBLICKEYBLOB, PublicKey);

  CryptDestroyKey(HKeyPair);
  CryptReleaseContext(RSA, 0);
  FreeAndNil(Pair);
end;

function RSAEncrypt(Source, Key: String): String;
var
  KeyPair: TStringStream;
  RSA: HCRYPTPROV;
  HPair: HCRYPTKEY;
  DDataSize, EDataSize: DWORD;

begin
  Result := '';
  KeyPair := TStringStream.Create(Key);
  if CryptAcquireContext(@RSA, nil, nil, PROV_RSA_FULL, CRYPT_VERIFYCONTEXT) then
  try
    if CryptImportKey(RSA, PByte(KeyPair.Memory), KeyPair.Size, 0, 0, @HPair) then
    try
      EDataSize := SizeOf(Source);
      if CryptEncrypt(HPair, 0, true, 0, nil, @EDataSize, 0) then
      begin
        Result := Source;
        SetLength(Result, EDataSize);
        DDataSize := Length(Source) * SizeOf(Char);
        if not(CryptEncrypt(HPair, 0, True, 0, PByte(PChar(Result)), @DDataSize, EDataSize)) then
          Result := '';
      end;
    finally
      CryptDestroyKey(HPair);
    end;
  finally
  CryptReleaseContext(RSA, 0);
  end;
  FreeAndNil(KeyPair);
end;

function RSADecrypt(Source, Key: String): String;
var
  KeyPair: TStringStream;
  RSA: HCRYPTPROV;
  HPair: HCRYPTKEY;
  EDataSize: DWORD;

begin
  KeyPair := TStringStream.Create(Key);
  Result := '';
  if CryptAcquireContext(@RSA, nil, nil, PROV_RSA_FULL, CRYPT_VERIFYCONTEXT) then
  try
    if CryptImportKey(RSA, PByte(KeyPair.Memory), KeyPair.Size, 0, 0, @HPair) then
    try
      Result := Source;
      EDataSize := Length(Result);
      if not Bool(CryptDecrypt(HPair, 0, True, 0, PByte(PChar(Result)), @EDataSize)) then
        EDataSize := 0;
      SetLength(Result, EDataSize div SizeOf(Char));
    finally
      CryptDestroyKey(HPair);
    end;
  finally
    CryptReleaseContext(RSA, 0);
  end;
  FreeAndNil(KeyPair);
end;

end. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:07:59.123

简而言之，C# 说明文比密钥大小的 1/2 长得多会导致错误。出于安全目的，大多数语言可能都是相同的。对于较长的消息，使用 RSA 传递密钥以进行对称加密，例如 AES。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-27T12:46:14.173

非对称加密将数据限制为小于密钥大小，存在诸如 OAEP 之类的 42 字节的填充。

如果您必须进行非对称加密，即需要一个密钥对，请使用混合加密，这基本上就是 https 所做的。请参阅[混合密码系统](https://en.wikipedia.org/wiki/Hybrid_cryptosystem)。

对于混合加密，基本上您创建一个随机对称加密密钥，使用非对称加密加密对称密钥，使用对称密钥加密数据并将两种加密打包在一起。

你为什么不想要对称加密？它更快并且基本上可以处理任何数据大小？AES 是加密的主力。

# c - getopt_long 长选项有效，但短选项无效

> ID：14689298
> 
> 赞同：0
> 
> 时间：2013-02-04T14:53:19.243
> 
> 标签：c, getopt, getopt-long

> **可能重复：**
> [getopt_long()——正确的使用方法？](https://stackoverflow.com/questions/7489093/getopt-long-proper-way-to-use-it)

我在我的 C 程序中遇到了 getopt_long 的问题。代码：

```
const struct option long_options[] = { 
    { "help", 0, NULL, 'h' },
    { "num", 1, NULL, 'n' },
    { NULL, 0, NULL, 0 } 
};  
do {
    next_option = getopt_long(argc, argv, short_options, 
        long_options, NULL);
    switch(next_option) {
        case 'h':
            print_usage(stdout, 0); 
        case 'n':
            printf("num %s\n", optarg);
            break;
        case '?':
            print_usage(stderr, 1); 
            break;
        default:
            abort();
    }   
} while(next_option != -1); 
```

这有效：

```
./a.out --num 3
num 3 
```

这有效（为什么？！）：

```
./a.out --n 3            
num 3 
```

这不会：

```
./a.out -n 3  
num (null) 
```

so long 选项有效，short 有两个'-'（为什么？），而 short 选项不起作用（`printf`prints `NULL`），这是为什么呢？非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T15:06:02.903

您还需要传递一个简短的选项字符串，如下所示：

```
const char *short_options ="hn:"; 
```

注意`:`手段`-n`接受一个论点。

# delphi - 在 Delphi 中枚举一条记录

> ID：14689299
> 
> 赞同：2
> 
> 时间：2013-02-04T14:53:25.043
> 
> 标签：delphi, delphi-7

我有一条记录，其中包含一堆我想释放的指针。

```
type 
 FreeStruct = record
 Addr1 : Pointer;
 Addr2 : Pointer;
 Addr3 : Pointer;
 // ....
end; 
```

所以我想做类似的事情：

```
var
 MyStruct : FreeStruct:
begin
 //MyStruct.Addr1 := ...;
 for i := 0 to NumberOfFieldsInRecord do begin
  VirtualFree (ValueOfFieldNumberOfMyStruct[I],0, MEM_RELEASE);
 end;
end; 
```

我听说有类似RTII的东西，但我不知道如何在记录和Delphi 7中正确使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:01:22.240

As far as I'm aware there are no methods to support record field iteration. You can however play with the record structure on a low level basis (look here: [http://www.delphigroups.info/2/18/295611.html](http://www.delphigroups.info/2/18/295611.html))

Maybe you are better off restructuring your code so you will not need records for pointer storage.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:40:34.070

您的 Delphi-7 版本没有 Rtti 解决方案。

如果您不想在记录中使用指针数组来实现@ain 的建议，这里有一个使用 a[`variant part in the record`](http://docwiki.embarcadero.com/RADStudio/XE3/en/Structured_Types#Variant_Parts_in_Records)来完成类似事情的建议。您可以自由地使用`myStruct.AddrX`名称以使代码更清晰，也`myStruct.allAddresses[X-1]`可以解决相同的字段。

```
Type
  FreeStruct = 
    record          
      intExample : Integer;  // not in the variant part

      case boolean of // Variant structure where the different parts overlap in memory
      true : ( Addr1 : Pointer;
               Addr2 : Pointer;
               Addr3 : Pointer);
      false : (allAddresses : array[0..2] of Pointer);          
    end;

procedure ClearFreeStruct( var AStruct : FreeStruct);
var
  i: Integer;
begin
  for i := 0 to High(AStruct.allAddresses) do 
  begin
    // Dispose of allocated pointers
  end;
end; 
```

您可以使用更多指针扩展结构，还可以包括其他字段（在变体部分之前）。

* * *

可以在记录中使用指针数组而不放弃清晰度。通过使用`enumeration`，可以使用相关名称来寻址每个指针。

> 示例：myStruct.Addr[peAddr1]

```
Type
  PointerEnum = (peAddr1,peAddr2,peAddr3);

  FreeStruct =
    record
      intExample : Integer;

      Addr : array[PointerEnum] of Pointer;
    end;

procedure ClearFreeStruct( var AStruct : FreeStruct);
var
  pe : PointerEnum;
begin
  for pe := Low(PointerEnum) to High(PointerEnum) do
  begin
    // Dispose(AStruct.Addr[pe]);
  end;
end; 
```

# c# - .NET 4.5 中的序列化中断

> ID：14689305
> 
> 赞同：15
> 
> 时间：2013-02-04T14:53:39.590
> 
> 标签：c#, web-services, serialization, .net-4.5

我们有一个仅在 .NET 4.5 中发生的序列化问题 - 相同的代码在 .NET 4 中运行良好。我们正在尝试序列化具有几个字段的继承类型，基类和继承类都标有**SerializableAttribute**。我们在Web服务的客户端得到一个异常，说服务端有一个**MethodAccessException**，服务端本身并没有抛出任何异常，这似乎是客户端序列化过程的问题。需要注意的是，我们是在 .NET 4 而非 .4.5 中编译的

更新：在实现**ISerailize**并忽略“Value”属性后，程序确实运行正确，但这意味着我们不得不放弃序列化该字段。

非常感激任何的帮助。谢谢， 奥马尔

异常详情：

```
System.Web.Services.Protocols.SoapException occurred
  HResult=-2146233087
  Message=System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> System.InvalidOperationException: There was an error generating the XML document. ---> System.MethodAccessException: Attempt by method 'Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write88_DeviceSiteTypeInfo(System.String, System.String, IOSIGHT.Info.DeviceSiteTypeInfo, Boolean, Boolean)' to access method 'IOSIGHT.Info.DeviceSiteTypeInfo.get_Value()' failed.
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write88_DeviceSiteTypeInfo(String n, String ns, DeviceSiteTypeInfo o, Boolean isNullable, Boolean needType)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write1310_GetSiteTypesResponse(Object[] p)
   at Microsoft.Xml.Serialization.GeneratedAssembly.ArrayOfObjectSerializer2089.Serialize(Object objectToSerialize, XmlSerializationWriter writer)
   at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
   --- End of inner exception stack trace ---
   at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
   at System.Web.Services.Protocols.SoapServerProtocol.WriteReturns(Object[] returnValues, Stream outputStream)
   at System.Web.Services.Protocols.WebServiceHandler.WriteReturns(Object[] returnValues)
   at System.Web.Services.Protocols.WebServiceHandler.Invoke()
   --- End of inner exception stack trace ---
  Source=System.Web.Services
  Actor=""
  Lang=""
  Node=""
  Role=""
  StackTrace:
       at System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall)
       at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters)
       at IOSIGHT.BLL.localhost.IOSightWS.GetSiteTypes() in C:\IOSIGHT\Common\IOSight.BLL\Web References\localhost\Reference.cs:line 25019
       at IOSIGHT.BLL.TypeBankBLL.GetSiteTypes() in C:\IOSIGHT\Common\IOSight.BLL\Entities\TypeBanksBLL.cs:line 477
  InnerException: 
```

附件是基类和继承类代码： ***Base***：

```
[Serializable()]
public class TypeBankInfo
{

    #region "Fields"
    private int _id = 0;
    private string _Name = string.Empty;
    private string _description = string.Empty;
    private object _value = null;

    #endregion

    #region "Constructors"
    public TypeBankInfo()
    {
    }

    public TypeBankInfo(int ID, string name)
        : this()
    {
        this._id = ID;
        this.Name = name;
    }

    public TypeBankInfo(int ID, string name, string description)
        : this(ID, name)
    {
        this._description = description;
        this._value = Value;
    }

    public TypeBankInfo(int ID, string name, string description, object value)
        : this(ID, name, description)
    {
        this._value = value;
    }

    #endregion

    #region "Properties"
    public virtual string Name
    {
        get
        {
            return this._Name;
        }
        set
        {
            this._Name = value;
        }
    }

    public virtual string Description
    {
        get
        {
            return _description;
        }
        set
        {
            _description = value;
        }
    }

    public virtual int ID
    {
        get
        {
            return _id;
        }
        set
        {
            _id = int.Parse(value.ToString());
        }
    }

    public virtual object @Value
    {
        get
        {
            return this._value;
        }
        set
        {
            this._value = value;
        }
    }

    #endregion

} 
```

***内置***：

```
[Serializable()]
public class DeviceSiteTypeInfo : TypeBankInfo, ISerializable
{

    #region "Fields"
    private EntityTypeEnum _entitytype = EntityTypeEnum.Site;
    private DeviceIOTemplateInfo[] _IOTemplates;
    private CaptionInfo[] _Captions;
    private int _parentClassID;
    #endregion

    #region "Constructors"
    public DeviceSiteTypeInfo()
    {
    }

    public DeviceSiteTypeInfo(int id, string name)
        : base(id, name)
    {
    }

    public DeviceSiteTypeInfo(int id, string name, string description)
        : base(id, name, description)
    {
    }

    // The special constructor is used to deserialize values. 
    public DeviceSiteTypeInfo(SerializationInfo info, StreamingContext context)
    {
        //parent  fields
        ID = (int)info.GetValue("_id", typeof(int));
        Name = (string)info.GetValue("_Name", typeof(string));
        Description = (string)info.GetValue("_description", typeof(string));

        //my fields
        _entitytype = (EntityTypeEnum)info.GetValue("_entitytype", typeof(EntityTypeEnum));
        _IOTemplates = (DeviceIOTemplateInfo[])info.GetValue("_IOTemplates", typeof(DeviceIOTemplateInfo[]));
        _Captions = (CaptionInfo[])info.GetValue("_Captions", typeof(CaptionInfo[]));
        _parentClassID = (int)info.GetValue("_parentClassID", typeof(int));

    }

    #endregion

    #region "Properties"
    public EntityTypeEnum EntityTypeID
    {
        get
        {
            return this._entitytype;
        }
        set
        {
            this._entitytype = value;
        }
    }

    [EditorBrowsable(EditorBrowsableState.Never), Browsable(false), DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    private new object Value
    {
        get
        {
            return base.Value;
        }
        set
        {
            base.Value = value;
        }
    }

    public CaptionInfo[] Captions
    {
        get
        {
            return this._Captions;
        }
        set
        {
            this._Captions = value;
        }
    }

    public DeviceIOTemplateInfo[] IOTemplates
    {
        get
        {
            return this._IOTemplates;
        }
        set
        {
            this._IOTemplates = value;
        }
    }

    public int ParentClassID
    {
        get
        {
            return this._parentClassID;
        }
        set
        {
            this._parentClassID = value;
        }
    }

    #endregion

    #region Methods

   /// <summary>
   /// Called on serialization
   /// </summary>
   /// <param name="info">serialiation info</param>
   /// <param name="context">context</param>
    public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        // parent fields
        info.AddValue("_id", ID, typeof(int));
        info.AddValue("_Name", Name, typeof(string));
        info.AddValue("_description", Description, typeof(string));

        //my fields
        info.AddValue("_entitytype", _entitytype, typeof(EntityTypeEnum));
        info.AddValue("_IOTemplates", _IOTemplates, typeof(DeviceIOTemplateInfo[]));
        info.AddValue("_Captions", _Captions, typeof(CaptionInfo[]));
        info.AddValue("_parentClassID", _parentClassID, typeof(int));
    }

    #endregion

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-05T03:16:16.757

在 4.5 中，XmlSerializer 的实现被替换为不依赖于 C# 编译器的实现。虽然它提供了更好的启动性能和稳定性，但您可能会遇到实现之间的兼容性问题。您可以尝试将以下内容添加到您的 app.config 文件中，看看是否可以解决问题？

```
<configuration>
  <system.xml.serialization>
    <xmlSerializer useLegacySerializerGeneration="true"/>
  </system.xml.serialization>
</configuration> 
```

如果您担心在 4.0 上进行这项工作，您可以尝试在运行时检测框架的版本，并在运行时为 4.5 或更高版本时动态更改配置。不久前我写了一篇博客文章，解释了如何做到这一点：

[http://blogs.msdn.com/b/youssefm/archive/2010/01/21/how-to-change-net-configuration-files-at-runtime-including-for-wcf.aspx](http://blogs.msdn.com/b/youssefm/archive/2010/01/21/how-to-change-net-configuration-files-at-runtime-including-for-wcf.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T23:44:49.653

我们希望在即将推出的 .NET Framework 4.5 更新中解决此问题。更新发布后，我将使用下载链接更新帖子。如果您有受影响的关键任务应用程序，请联系 Microsoft dot com 的 netfx45compat，并且迫切需要修复。我可以帮助您获得可帮助您处理请求的 Microsoft 支持。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-10T18:35:05.670

我也有这样的序列化失败。在我的情况下，它是由`[DefaultValue(..)]`属性的类型不匹配引起的。对于 type 的属性，我有一个附加的默认值`"1.0d"`(a double) `decimal`。似乎 XmlSerializer 的新实现不能再转换这些值，但旧实现可以。还可以通过在“App.config”中添加属性来切换回旧版本的 XmlSerializer，但 Microsoft（和我）不建议这样做。希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T17:00:07.690

我更仔细地查看了您的类型，问题可能是由以下冲突引起的：

```
public virtual object @Value
{
} 
```

在基地和：

```
private new object Value
{
} 
```

在派生类上。以下是我会尝试的两件事：

1.  尝试公开“新对象值”。可能存在成员访问问题。
2.  尝试将 Base 的“@Value”重命名为“BaseValue”或其他适当的名称。您使用“@”符号可能有问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-21T11:13:19.860

我最近遇到了同样的问题，并找到了实际原因和正确的解决方案。

此问题是由 XML 序列化程序测试属性/字段的默认值引起的。如果字段值与 DefaultValue 属性匹配，则不会对其进行序列化以节省空间。“十进制”类型的 DefaultValue 没有重载，因此十进制值将转换为浮点数，这是重载之一。

您必须明确告诉属性它是小数：

```
[DevaultValue(typeof(decimal), "1.56")] 
```

请注意，在字段上使用 DefaultValue 不会在反序列化时将该字段设置为该值。您仍然必须在构造函数中设置正确的值，或者作为字段初始值设定项：

```
[DefaultValue(typeof(decimal), "1.56")]
decimal MyValue { get; set; } = 1.56; 
```

# php - Symfony 2 - 致命错误：无法在第 532 行的 C:\...\app\cache\dev\classes.php 中重新声明类 SessionHandlerInterface

> ID：14689307
> 
> 赞同：20
> 
> 时间：2013-02-04T14:53:44.033
> 
> 标签：php, symfony

重新安装我的 wamp 环境后，我打开 app_dev.php 后屏幕上会显示此错误消息：

> 致命错误：无法在第 532 行的 C:...\app\cache\dev\classes.php 中重新声明类 SessionHandlerInterface

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-12T17:24:05.690

我解决了它清除缓存：

```
app/console cache:clear 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-04T16:11:24.773

PHP **5.4**版引入了一个新的会话管理系统，它基于一个名为的接口`SessionHandlerInterface`，看起来您的 Symfony2 代码在全局命名空间中声明了一个具有相同名称的类，因此存在名称冲突。

以下是文档：[http ://www.php.net/manual/en/class.sessionhandlerinterface.php](http://www.php.net/manual/en/class.sessionhandlerinterface.php)

> SessionHandlerInterface 是一个接口，它定义了用于创建自定义会话处理程序的原型。为了使用其 OOP 调用将自定义会话处理程序传递给 session_set_save_handler()，该类必须实现此接口。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-07-21T21:55:57.150

简单的清除缓存对我不起作用。它要求使用以下命令清除生产缓存。

```
php app/console cache:clear --env=prod --no-debug 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-12-05T10:10:26.323

只需尝试使用以下一个（或全部）命令清除 Symfony2 缓存：

```
php app/console cache:clear --env=prod --no-debug (on production mode) 
```

或 / 和

```
php app/console cache:clear --env=dev --no-debug (on development mode) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-09-16T07:56:22.647

只有这对我有用`rm -rf app/cache/*`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-15T16:23:19.850

确保您在接口 SessionHandlerInterface 中定义了命名空间

**前任：**

```
namespace app\cache\dev; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-10-21T20:53:21.993

即使在使用 app_dev.php 时，我也遇到了缓存问题。我会更改路线，但当我尝试通过浏览器访问它时它不会更新。

我尝试注释掉其中缓存的任何内容（如上所述）。这些都没有奏效。

如果我运行控制台缓存：清除它会修复它，但下一次路由更改会再次中断。我必须在每次保存时运行缓存：清除，这太荒谬了。

我的问题原来是因为我通过 SFTP 远程工作，PHP Storm（我的编辑器）在其部署配置中“保留时间戳”。一旦我更改了该配置，问题就消失了。显然，即使在开发环境中，也有一些正在查看文件时间戳的缓存。

# sed - 在同一文本文件中按不同块的顺序连接行

> ID：14689315
> 
> 赞同：-2
> 
> 时间：2013-02-04T14:54:17.747
> 
> 标签：sed, awk

我有一个文件分成如下块：

```
AGGATAGGTTTTGGTGTTTGAGGTTAATTTTGTTTTATTTTGGGG
AGGTAGTTATTATTTTTTTGGTTTTTAGTATTTAATTGAGTGTTT
ATGTAGGTGTTTATGTATTAGTTTTTTTTAGGTTTAGGGTGTTGT
ATTTAGGTTTTGTGTTTTGTGTATTATTGAATTTAATTAAAGTTA

AGGATAGGTTTTGGTGTTTGAGGTTAATTTTGTTTTATTTTTTTT
AGTTTTTTTTTATTTGTCGGGATATTTTAGTTGATTTTAGATTGC
TATATTTTTAGTTTCGATTCGTCGTAAGTTTTATTTTTTTTTAAT
GGATAGGTTTTGGTGTTTGAGGTTAATTTTGTTTTATTTTTTTTT 
```

为了清楚起见，我已经截断/包裹了线条，但想象一下很长的线条。我的问题的重点是我想要一个看起来像这样的最终文件：

```
AGGATAGGTTTTGGTGTTTGAGGTTAATTTTGTTTTATTTTGGGGAGGATAGGTTTTGGTGTTTGAGGTTAATTTTGTTTTATTTTTTTT
AGGTAGTTATTATTTTTTTGGTTTTTAGTATTTAATTGAGTGTTTAGTTTTTTTTTATTTGTCGGGATATTTTAGTTGATTTTAGATTGC
ATGTAGGTGTTTATGTATTAGTTTTTTTTAGGTTTAGGGTGTTGTTATATTTTTAGTTTCGATTCGTCGTAAGTTTTATTTTTTTTTAAT
ATTTAGGTTTTGTGTTTTGTGTATTATTGAATTTAATTAAAGTTAGGATAGGTTTTGGTGTTTGAGGTTAATTTTGTTTTATTTTTTTTT 
```

这个新区块的位置：

1.  与初始块相同的行数，
2.  结果块的每一行都是初始块中具有相同行号的行的串联。
3.  这种连接应该是有序的（即“第一个块的第一行”+“第二个块的第一行”等

是否有可能使用`sed`and/or来实现这个最终块`awk`，你能告诉我它是如何完成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:11:05.583

`bash`与`paste`：_

```
$ paste <(head -4 file) <(tail -4 file) | tr -d '\t'
AGGATAGGTTTTGGTGTTTGAGGTTAATTTTGTTTTATTTTGGGGAGGATAGGTTTTGGTGTTTGAGGTTAATTTTGTTTTATTTTTTTT
AGGTAGTTATTATTTTTTTGGTTTTTAGTATTTAATTGAGTGTTTAGTTTTTTTTTATTTGTCGGGATATTTTAGTTGATTTTAGATTGC
ATGTAGGTGTTTATGTATTAGTTTTTTTTAGGTTTAGGGTGTTGTTATATTTTTAGTTTCGATTCGTCGTAAGTTTTATTTTTTTTTAAT
ATTTAGGTTTTGTGTTTTGTGTATTATTGAATTTAATTAAAGTTAGGATAGGTTTTGGTGTTTGAGGTTAATTTTGTTTTATTTTTTTTT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:13:40.350

```
awk -F'\n' -v RS= '{for (i=1;i<=NF;i++) {str[i] = str[i] $i} END {for (i=1;i<=NF;i++) print str[i]}' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:08:24.467

尝试这个：

```
 awk -vOFS="" '$0{a[NR]=$0}END{for(i=1;i<=NR/2;i++)print a[i],a[i+5]}' file 
```

用你的例子测试：

```
kent$  cat tmp.txt
AGGATAGGTTTTGGTGTTTGAGGTTAATTTTGTTTTATTTTGGGG
AGGTAGTTATTATTTTTTTGGTTTTTAGTATTTAATTGAGTGTTT
ATGTAGGTGTTTATGTATTAGTTTTTTTTAGGTTTAGGGTGTTGT
ATTTAGGTTTTGTGTTTTGTGTATTATTGAATTTAATTAAAGTTA

AGGATAGGTTTTGGTGTTTGAGGTTAATTTTGTTTTATTTTTTTT
AGTTTTTTTTTATTTGTCGGGATATTTTAGTTGATTTTAGATTGC
TATATTTTTAGTTTCGATTCGTCGTAAGTTTTATTTTTTTTTAAT
GGATAGGTTTTGGTGTTTGAGGTTAATTTTGTTTTATTTTTTTTT

kent$  awk -vOFS="" '$0{a[NR]=$0}END{for(i=1;i<=NR/2;i++)print a[i],a[i+5]}' tmp.txt
AGGATAGGTTTTGGTGTTTGAGGTTAATTTTGTTTTATTTTGGGGAGGATAGGTTTTGGTGTTTGAGGTTAATTTTGTTTTATTTTTTTT
AGGTAGTTATTATTTTTTTGGTTTTTAGTATTTAATTGAGTGTTTAGTTTTTTTTTATTTGTCGGGATATTTTAGTTGATTTTAGATTGC
ATGTAGGTGTTTATGTATTAGTTTTTTTTAGGTTTAGGGTGTTGTTATATTTTTAGTTTCGATTCGTCGTAAGTTTTATTTTTTTTTAAT
ATTTAGGTTTTGTGTTTTGTGTATTATTGAATTTAATTAAAGTTAGGATAGGTTTTGGTGTTTGAGGTTAATTTTGTTTTATTTTTTTTT 
```

# ruby - 无论如何要停止从浏览器加载页面？

> ID：14689318
> 
> 赞同：0
> 
> 时间：2013-02-04T14:54:34.133
> 
> 标签：ruby, selenium-webdriver

```
require 'rubygems'
require 'selenium-webdriver'
require 'win32ole'

driver = Selenium::WebDriver.for :firefox
driver.manage.timeouts.implicit_wait = 10
driver.get "https://prod.example.com/"
link_name = wait.until {

    element = driver.find_element(:link_text, "Company")
    element if element.displayed?
}

link_name.click if link_name 
```

但是由于页面加载未完成，我的脚本每次都会失败，产生以下错误：

```
C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:146:in `rescue in rbuf_fill': Timeout:
:Error (Timeout::Error)
        from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:140:in `rbuf_fill'
        from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'
        from C:/Ruby193/lib/ruby/1.9.1/net/protocol.rb:132:in `readline'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:2562:in `read_status_line'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:2551:in `read_new'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1319:in `block in transport_r
equest'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1316:in `catch'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1316:in `transport_request'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1293:in `request'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1286:in `block in request'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:745:in `start'
        from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:1284:in `request'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.27.2/lib/s
elenium/webdriver/remote/http/default.rb:83:in `response_for'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.27.2/lib/s
elenium/webdriver/remote/http/default.rb:39:in `request'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.27.2/lib/s
elenium/webdriver/remote/http/common.rb:40:in `call'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.27.2/lib/s
elenium/webdriver/remote/bridge.rb:615:in `raw_execute'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.27.2/lib/s
elenium/webdriver/remote/bridge.rb:593:in `execute'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.27.2/lib/s
elenium/webdriver/remote/bridge.rb:561:in `find_element_by'
        from C:/Ruby193/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.27.2/lib/s
elenium/webdriver/common/search_context.rb:42:in `find_element'
        from C:/Documents and Settings/rakshiar/My Documents/userdata/Ruby/Scrip
ts/answerlist.rb:29:in `rescue in <main>'
        from C:/Documents and Settings/rakshiar/My Documents/userdata/Ruby/Scrip
ts/answerlist.rb:21:in `<main>' 
```

因此，我希望在 20 秒后停止页面加载，然后像我在上面的代码中输入的那样点击元素。因为如果我尝试查看页面源，我检查了页面何时开始加载，我没有得到任何网络元素。但是在页面加载开始后，如果我从开始到 10-12 秒关闭它，并尝试查看网页源代码，那里有所有必需的元素。

所以我想在程序上做同样的事情。知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:16:23.343

在 Selenium2 API 中，默认情况下没有停止页面加载的选项。它将等待页面完成加载。

**试试这个代码：**

```
 driver.manage().timeouts().pageLoadTimeout(10, TimeUnit.SECONDS); 
```

上面的代码将等待页面加载长达 10 秒。如果页面加载退出时间，它将抛出`TimeoutException`. 您捕获异常并满足您的需求。我不确定它是否会在抛出异常后退出页面加载。我还没有尝试过这段代码。想试一试。

了解更多[信息。](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html)

# php - 如何将php连接到vb应用程序中的数据库？

> ID：14689319
> 
> 赞同：0
> 
> 时间：2013-02-04T14:54:34.467
> 
> 标签：php, sql-server, vb.net, apache

`SQLServer`我的计算机上有一个使用 Microsoft 数据库文件的 VB 应用程序。我想使用`PHP`. 我已经在我的计算机上安装了 Apache 和 PHP。

问题是我不知道如何将我`PHP`的 VB 应用程序连接到数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:16:57.033

首先，看看这个关于[PHP 的 MS SQL (Microsoft SQL) library 的](http://www.php.net/manual/en/book.mssql.php)链接。

您需要使用 MS SQL 函数连接到数据库并检索您需要的相关信息。

我不是 MS SQL 专家，但您需要类似于以下的代码：

```
$server = "EDDYSPC\SQLEXPRESS"; // Server address
$user = "root";
$pass = "";
$db = "MyDatabase";

$msSQL = mssql_connect($serverm $user, $root);

if (!$msSQL) { // If there was an error connecting to the database
    die("An error occurred.");
}

mssql_select_db($db); // Select the datbase to use

$query = mssql_query("SELECT name FROM users WHERE name = 'Eddy'");

while ($row = mssql_fetch_assoc($query)) { // Loop through each returned row
    print($row['name'] . "<br />\n");
} 
```

希望这会有所帮助。

# java - 使用带有选择器的 android 滑动菜单库

> ID：14689321
> 
> 赞同：0
> 
> 时间：2013-02-04T14:54:52.353
> 
> 标签：java, android, listener, invalidation, slidingmenu

我已经尝试在滑动菜单中使用选择器 2 天了，但没有成功。

这是我想做的：

我有一个菜单，里面有一个 ListView。我希望选择器指向一个特定的项目并在滚动列表视图时随项目一起移动。

所以基本上选择器指向正确的项目，但是当我滚动时，选择器不会在我的手机（android 4.0.4）上移动，但它适用于模拟器（4.1.2）。当我要求他这样做时，您知道为什么菜单没有自行失效吗？

```
 /*Setting the sliding menu */  

        setBehindContentView(R.layout.menu);
        setSlidingActionBarEnabled(true);      

        getSlidingMenu().setMode(SlidingMenu.LEFT);
        getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);

        getSlidingMenu().setFadeEnabled(true);
        getSlidingMenu().setFadeDegree(0.35f);
        getSlidingMenu().setShadowWidth(15);
        getSlidingMenu().setShadowDrawable(R.drawable.shadow);
        getSlidingMenu().setSelectorEnabled(true);
        getSlidingMenu().setSelectorDrawable(R.drawable.selector);

        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);

        getSlidingMenu().setBehindWidth((int) (metrics.widthPixels * 0.8));
        getSlidingMenu().setSelectedView(null);

        /*Creating the content of the sliding menu*/

                    /*Now we generate the menu below */
        maListViewPerso = (ListView) this.findViewById(R.id.listviewperso);

        maListViewPerso = SlidingMenuListCreator.getListView(this, (String) this.getTitle(), maListViewPerso, isMissionSelected, isTourneeOpened);

        getSlidingMenu().setOnOpenListener(new OnOpenListener() {

            @Override
            public void onOpen() {

                                    int wantedPosition = 5; // Whatever position you're looking for
                int firstPosition = maListViewPerso.getFirstVisiblePosition() - maListViewPerso.getHeaderViewsCount();                  int wantedChild = wantedPosition - firstPosition;
                                    if (wantedChild < 0 || wantedChild >= maListViewPerso.getChildCount()) {
                                        } else {
                    selectedView = maListViewPerso.getChildAt(wantedChild);
                                        }

                getSlidingMenu().setSelectedView(selectedView);
                getSlidingMenu().invalidate();

            }
        });

        OnTouchListener mOnTouchListener = new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                maListViewPerso.onTouchEvent(event);

                int wantedPosition = 5;                 int firstPosition = maListViewPerso.getFirstVisiblePosition() - maListViewPerso.getHeaderViewsCount();                  int wantedChild = wantedPosition - firstPosition;
                                    if (wantedChild < 0 || wantedChild >= maListViewPerso.getChildCount()) {

                } else {
                    selectedView = maListViewPerso.getChildAt(wantedChild);                 }

                getSlidingMenu().setSelectedView(selectedView);
                getSlidingMenu().getmViewBehind().invalidate();

                                    return true;
            }
        };

        maListViewPerso.setOnTouchListener(mOnTouchListener); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-18T11:27:36.757

毕竟我从来没有找到解决办法。

但 ：

1.  我切换到 viewpager 导航模式，因为这是用户的首选（并发现，是的，片段很棒）

2.  谷歌终于通过支持库和抽屉布局添加了这种导航模式“官方”，它对我来说效果很好=）

# c# - 无法将 Gridview 的更改更新到数据库

> ID：14689324
> 
> 赞同：0
> 
> 时间：2013-02-04T14:55:15.360
> 
> 标签：c#, winforms

编辑网格视图后无法更新对数据库的更改。没有抛出错误，但数据库中的表中的更改没有更新。我在这里使用 Sql 服务器，我有两个名为 Form1 和 Form 2 的 Winform。一个按钮（Form1 中的 btnSearchAll）打开 Form2 中的 gridview 并加载所有数据。当我尝试在 gridview（在 Form2 中）编辑数据并尝试更新时，它不会更新更改。请帮忙

下面是我的表格1：

```
 namespace Tailor_app
{
    public partial class Form1 : Form
    {
        DataSet ds = new DataSet();
        SqlConnection con = new SqlConnection("server=(local);Database=MSNETDB;Integrated Security=true;");
        SqlDataAdapter da;
        DataTable dt;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        //SqlConnection con = new SqlConnection("server=(local);Database=MSNETDB;Integrated Security=true;");
        txtFirstName.Focus();
        da = new SqlDataAdapter("select * from Measurement", con);
        da.Fill(ds, "Measurement");
        dt = ds.Tables["Measurement"];
        SqlCommandBuilder cb = new SqlCommandBuilder(da);
        cb.ConflictOption = ConflictOption.CompareAllSearchableValues;
    }

    private void btnSave_Click(object sender, EventArgs e)
    {
            DataRow dr = dt.NewRow();
            dr["CellNumber"] = txtCellNo.Text.Trim();
            dr["FirstName"] = txtFirstName.Text;
            dr["LastName"] = txtLastName.Text;
            dr["Shirt"] = txtShirt.Text;
            dr["Pant"] = txtPant.Text;
            dr["DueDate"] = txtDueDate.Text;
            dr["Date"] = txtDate.Text;
            if (dr["CellNumber"] == "")
            {
                MessageBox.Show("Please enter Cell Number");
            }
            else if (dr["CellNumber"] != "")
            {
                dt.Rows.Add(dr);
                MessageBox.Show("Success");
            }

                try
                {
                    da.Update(ds, "Measurement");
                }
                catch (DBConcurrencyException ex)
                {
                    MessageBox.Show(ex.Message);
                    dt.Clear();
                    da.Fill(ds, "Measurement");
                }
        }

    private void btnSearchAllCustomers_Click(object sender, EventArgs e)
    {
        this.Hide();
        frmDgv_SearchResult frm2 = new frmDgv_SearchResult();
        frm2.Show();

        using (da = new SqlDataAdapter())
        {
            try
            {
                da.SelectCommand = new SqlCommand("Select * From Measurement", con);
                ds.Clear();
                da.Fill(ds,"Measurement");
                dt = ds.Tables["Measurement"];
                frm2.dgvSearchResults.DataSource = dt;
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message.ToString());
            }
        }
    }
} 
```

}

下面是我的表格2：

```
namespace Tailor_app
{

public partial class frmDgv_SearchResult : Form
{
    DataSet ds = new DataSet();
    SqlConnection con = new SqlConnection("server=(local);Database=MSNETDB;Integrated Security=true;");
    SqlDataAdapter da;
    DataTable dt;

    public frmDgv_SearchResult()
    {
        InitializeComponent();
    }

    private void dgvSearchResults_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {

    }

      private void frmDgv_SearchResult_Load(object sender, EventArgs e)
    {
        da = new SqlDataAdapter("select * from Measurement", con);
        da.Fill(ds, "Measurement");
        dt = ds.Tables["Measurement"];
        SqlCommandBuilder cb = new SqlCommandBuilder(da);
        cb.ConflictOption = ConflictOption.CompareAllSearchableValues;
    }

    private void btnUpdate_Click(object sender, EventArgs e)
    {
        try
            {
                da.Update(ds, "Measurement");
            }
            catch (DBConcurrencyException ex)
            {
                MessageBox.Show(ex.Message);
                dt.Clear();
                da.Fill(ds, "Measurement");
            }
            finally
            {
                MessageBox.Show("success");
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:15:05.300

您应该`dt.AcceptChanges();`在插入、更新或删除之后。`AcceptChanges`提交自上次`AcceptChanges`调用以来对数据表所做的所有更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:49:30.327

尝试为您的数据适配器请求更新命令：-

```
 private void frmDgv_SearchResult_Load(object sender, EventArgs e)
    {
        da = new SqlDataAdapter("select * from Measurement", con);
        da.Fill(ds, "Measurement");
        dt = ds.Tables["Measurement"];
        SqlCommandBuilder cb = new SqlCommandBuilder(da);

        cb.GetInsertCommand();
        cb.GetUpdateCommand();
        cb.GetDeleteCommand();

        cb.ConflictOption = ConflictOption.CompareAllSearchableValues;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T18:26:05.067

我的看起来更像这样：

```
da.Fill(dt)

Dim cb As SqlCommandBuilder = New SqlCommandBuilder(da)

da.MissingSchemaAction = MissingSchemaAction.AddWithKey     ' includes default field value settings
da.InsertCommand = cb.GetInsertCommand      ' instantiate for transaction
da.UpdateCommand = cb.GetUpdateCommand 
```

# algorithm - 哈密 顿路径与最短路径

> ID：14689325
> 
> 赞同：4
> 
> 时间：2013-02-04T14:55:19.537
> 
> 标签：algorithm, complexity-theory

在研究了这两个问题之后，我无法得出它们之间有什么区别。

**哈密​​顿路径**

哈密​​顿路径是图的两个顶点之间的路径，每个顶点恰好访问一次。给定一个图`G`和两个不同的节点`S`和，从到`E`是否有哈密顿路径？`G``S``E`

我发现这个问题是NP-Complete

**最短路径**

在图论中，最短路径问题是在图中找到两个顶点（或节点）之间的路径，使得其组成边的权重之和最小化的问题。这个问题是P

它们之间的实际区别是什么？它们的复杂性是如何计算的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T14:59:39.817

The Hamiltonian Path problem is actually looking for a *longest simple path* in a graph. It is easy to see that the two problems are basically equivalent (longest simple path and hamiltonian path). This problem is indeed a classic NP-Complete Problem.
It is NP-Complete since there is a polynomial reduction from another (already proved) NP-Hard Problem to this problem, and thus (from transitivity of polynomial reductions) this problem is NP-Hard as well. Since it is also in NP, it is NP-Complete.

The shortest path on the other hand is a different one, it asks what is the **shortest** way from point A to point B, and it is in P because there is a polynomial time algorithm that solves it ([Dijkstra's algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm), [Bellman-Ford](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm), [BFS](http://en.wikipedia.org/wiki/Breadth-first_search) for non weighted graphs).

* * *

Regarding `"And how is there complexity calculated?"` I assume you mean how do we determine their *complexity classes* - in this case, Shortest Path is in P because we have a deterministic polynomial time algorithm that solves it (some mentioned above), while the complexity class of Hamiltonian Path is NP-Complete because it is both NP-Hard (there is polynomial reduction from another proven NP-Hard problem), and NP (we can solve it easily in polynomial time on non-determinitic turing machine).
Note that we DO NOT KNOW if Hamiltonian Path is in P or not, because we do not know if [P=NP](http://en.wikipedia.org/wiki/P_versus_NP_problem).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-03T01:55:14.670

任意节点间最长路径和最短路径的区别在于最短路径问题有一个最优子结构，因此可以用动态规划求解；最长路径问题没有最优子结构，无法使用动态规划求解。如果可以从其子问题的最优解构造最优解，则称该问题具有最优子结构。[例子](https://i.stack.imgur.com/lej1l.jpg)

一个例子就是上图。从 q 到 t 的最短路径包括从 q 到 r 的最短路径。但是q到t的最长路径是qrt，q到r的最长路径是qstr，不包含在qrt中。这是因为最长路径的子问题不是相互独立的。从 q 到 r 的最长路径是 qsrt。从 r 到 t 的最长路径是 rqst。这两个问题有重叠，所以它们不是独立的，所以这个问题没有最优子结构，所以不能用动态规划和贪心算法来解决。

# c# - 获取选项的名称

> ID：14689329
> 
> 赞同：1
> 
> 时间：2013-02-04T14:55:28.247
> 
> 标签：c#, excel

我希望我的 C# 返回显示在 Excel 自己的 GUI 上的文本，包括菜单和选项。例如，使用名为“信任对 VBA 项目对象模型的访问”的复选框。我希望能够阅读该文本。或者使用“文件”菜单，我希望能够返回文本“文件”

如果用户将他们的机器设置为另一种语言，我希望能够阅读以他们的语言显示的文本。因此，如果我询问“文件”菜单的名称并且他们的机器说德语，那么它将是德语单词而不是英语单词。

我不想关心人们设置了什么语言设置，我只想返回他们看到的文本，以便我可以将用户引导到正确的选项。

# php - 循环内循环

> ID：14689332
> 
> 赞同：0
> 
> 时间：2013-02-04T14:55:29.987
> 
> 标签：php, math, loops

我有这个艰巨的任务（至少对我来说）。这是一个抽象的问题，我会说是数学问题。假设我有 2 个输入：

1.  关键字（字符串）
2.  一个数字（深度级别）

和提交按钮。

此关键字从数据库中返回与此字符串类似的 8 个其他关键字。对于这 8 个关键字中的每一个，我需要调用相同的函数，该函数将返回我已经返回的所有这 8 个字符串的另外 8 个相似关键字。这里是“级别”数字。我需要根据我输入的级别号深入了解每个返回的字符串。

例如：如果层数为 2，那么我们将调用该函数 9 次。原始关键字第一次，每个返回关键字8次。如果级别数为 3，则该函数将被调用 73 次。与前面的示例一样，但我们返回了另外 8 个关键字。我认为循环内会有几个循环，但我自己无法弄清楚。将感谢您的建议。

这是我编写的可能不够充分的主要代码：

```
$keywords = preg_split('/$\R?^/m', trim($_POST['keyword']));
$keywords = array_map('trim', $keywords);
$level = $_POST['level'];
if (!$level || $level < 2) {
    echo '<b>Level was either 1 or null</b>';
}
foreach ($keywords as $keyword) {
    $results = getResults($keyword);
    if ($level && $results) {
        for ($i = 0; $i < sizeof($results); $i++) {
            $results1 = getResults($results[$i]);
            for ($j = 0; $j < $level; $j++) {
                $results1 = getResults($results1[$i])
            }
        }
    }
} 
```

输出应该是这样的：

```
1->
   2
   ->
      3
      3
      3
      3
      3
      3
      3
      3
   2->
   2->
   2->
   2-> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T15:02:37.420

您需要了解在代码中使用它的`recursion` [含义](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)以及如何使用它。基本上，您需要在其内部调用相同的函数，n 次，其中 n 是您的请求的深度级别。

从一些像斐波那契数列这样的小例子开始，你会找到实现你的函数的方法。

一切都基于一个条件`($deepness > 0)`。

根据我的理解，这是一个小建议（伪代码）。

```
function findSimilar($words,$deepness) {
    if($deepness == 0) {
        return similarWordsOf($words);
    } else {
        return similarWordsOf(findSimilar($words,$deepness -1));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:17:20.730

正如其他人已经指出的那样，解决方案的关键是使用递归函数，即使用减小的深度值对每个相似词再次调用自身的函数。

我的 PHP 有点生疏，所以这里有一些伪代码（又名 Python）：

```
def printSimilar(word, deepness=1, indent=0):
    print ("  " * indent) + word
    if deepness > 0:
        for similar in similarWords(word):
            printSimilar(similar, deepness - 1, indent + 1) 
```

假设`similarWords`返回相似词的列表，这应该会产生所需的输出。

# maven-2 - aar 文件未添加到战争中 axis2-aar-maven-plugin

> ID：14689333
> 
> 赞同：2
> 
> 时间：2013-02-04T14:55:32.197
> 
> 标签：maven-2, axis2, maven-plugin

我正在尝试使用 Axis2 和 Maven 来处理示例 web 服务，而 aar 文件正在生成但在 aar 中，因为首先生成了 war 文件，然后生成了 aar 文件。有人可以在这里提供一些帮助。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.prash</groupId>
<artifactId>test.webservice</artifactId>
<packaging>war</packaging>
<version>0.0.1-SNAPSHOT</version>
<name>test.webservice Maven Webapp</name>
<url>http://maven.apache.org</url>
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.2.1-b03</version>
    </dependency>
    <dependency>
        <groupId>org.apache.axis2</groupId>
        <artifactId>axis2</artifactId>
        <version>1.6.2</version>
        <type>pom</type>
    </dependency>
    <dependency>
        <groupId>org.apache.axis2</groupId>
        <artifactId>axis2-aar-maven-plugin</artifactId>
        <version>1.6.2</version>
        <type>maven-plugin</type>
    </dependency>
    <dependency>
        <groupId>axis2</groupId>
        <artifactId>axis2-xmlbeans</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>org.apache.axis2</groupId>
        <artifactId>axis2-adb</artifactId>
        <version>1.6.2</version>
    </dependency>
</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-aar-maven-plugin</artifactId>
            <version>1.6.2</version>
            <extensions>true</extensions>

            <configuration>
            <!--  Set true  if you want Depending Jar to be included into AAR file-->
            <includeDependencies>false</includeDependencies>
                <aarName>StockQuoteService</aarName>
                <outputDirectory>${basedir}/src/webapp/</outputDirectory>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>aar</goal>
                    </goals>
                </execution>

            </executions>
        </plugin>
    </plugins>
    <finalName>test.webservice</finalName>

</build> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:10:39.877

问题解决了。我已经对 pom.xml 进行了以下更改

```
<plugins>
            <plugin>
                <groupId>org.apache.axis2</groupId>
                <artifactId>axis2-aar-maven-plugin</artifactId>
                <version>1.6.2</version>
                <extensions>true</extensions>
                <configuration>
                <!--  Set true  if you want Depending Jar to be included into AAR file-->
                <includeDependencies>false</includeDependencies>
                    <aarName>StockQuoteService</aarName>
                    <outputDirectory>${basedir}/target/test.webservice/WEB-INF/services</outputDirectory>
                </configuration>
                <executions>
                    <execution>
                        <phase>prepare-package</phase>
                        <goals>
                            <goal>aar</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins> 
```

# java - 我们是否必须放置任何 .XML 标记来包含或继承 GWT 中的 .properties 文件？

> ID：14689335
> 
> 赞同：1
> 
> 时间：2013-02-04T14:55:42.750
> 
> 标签：java, google-app-engine, gwt

我做了这个[答案中提到的步骤](https://stackoverflow.com/questions/10327559/get-value-of-key-from-properties-file-in-gwt)

但页面不会出现并抛出此错误

```
 [ERROR] - Line 45: No source code is available for type com.cbd.main.properties.UserProperties; did you forget to inherit a required module? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:07:32.407

此错误意味着 GWT Java-to-JS 编译器无法访问该类的源代码。该类`com.cbd.main.properties.UserProperties`必须在您的客户端包中，并且源代码必须对 GWT Java-to-JS 编译器可见。

编译器扫描源路径（在应用程序的 module.gwt.XML 中定义）和继承模块的所有源路径。如果在其中找不到源，则会出现上述错误。

# matlab - Matlab - 梯形隶属函数

> ID：14689337
> 
> 赞同：0
> 
> 时间：2013-02-04T14:55:49.373
> 
> 标签：matlab, set, membership, fuzzy-logic

我已经使用了如图所示[的](http://www.mathworks.fr/fr/help/fuzzy/trapmf.html)`trapezoidal membership function`通道。`matlab`

我在matlab中写了以下内容：

```
>> x=1:5;
>> y=trapmf(x,[1 3 4 5]); 
```

而且，对于`y`，我得到以下结果：

```
>> y

y =

         0    0.5000    1.0000    1.0000         0 
```

我的问题如下：

我们如何读取`y`上面显示的向量？它是否显示集合中元素的成员资格程度`x`？

例如，我们可以这样说吗？

*   `1`在集合中的隶属度`x`是`0`
*   `2`在集合中的隶属度`x`是`0.5000` 。. 。ETC

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:16:33.573

是的..你是仪式......这就是你阅读你的方式......
我不能为此提供任何参考，但你通常可以查看这些关于模糊集的维基文章......

[http://en.wikipedia.org/wiki/Membership_function_(数学)](http://en.wikipedia.org/wiki/Membership_function_(mathematics)) [http://en.wikipedia.org/wiki/Fuzzy_set](http://en.wikipedia.org/wiki/Fuzzy_set)

# drag-and-drop - 像skydrive一样在IE9上拖放

> ID：14689338
> 
> 赞同：0
> 
> 时间：2013-02-04T14:55:49.940
> 
> 标签：drag-and-drop, internet-explorer-9, onedrive

嗨，我一直在寻找拖放文件上传。我知道可以使用 html 5 文件 API 在 chrome 等其他浏览器上执行此操作，但不能在 IE 9 上执行此操作。但是我注意到您可以使用 IE 9 在 Sky-drive 站点上拖放上传。

我只是想知道他们过去是做什么的？我有一种感觉，它可能是银色的，但可能是完全错误的。

如果有人能给我一个见解，那将是非常感谢的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:00:56.640

SkyDrive works with Silverlight, or uses HTML5 when available (Internet Explorer 10, Google Chrome, Firefox and Safari).

Since IE9 does not support HTML5, SkyDrive uses Silverlight on that browser.

# ruby-on-rails - 有没有办法只在特定路由上启用 Rails 3 中的 XML/JSON 解析？

> ID：14689340
> 
> 赞同：0
> 
> 时间：2013-02-04T14:55:50.510
> 
> 标签：ruby-on-rails, ruby, xml, json, security

鉴于当前的 Rails 安全警报四处流传，我正在考虑保护一些应用程序的应用程序。他们中的大多数几乎不使用 XML/JSON 解析，当他们这样做时，是将特定页面或挂钩与 3rd 方服务集成。

我已经看到删除默认解析器以完全关闭该功能的能力，但是有没有办法在可能受 http 基本身份验证或其他方式保护的特定路由上启用它/将其列入白名单？这至少需要有人试图利用这些类型的漏洞来了解启用它的具体位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:58:21.647

您正在谈论的行为是作为 Rack 中间件实现的，它在传入请求到达您的控制器之前对其进行处理。

这个中间件作用于为不同的 mime 类型启用的解析器列表。如果您想在给定请求上使用不同的参数解析逻辑时添加自定义规则，您可以通过重新打开它来修补此行为。

[这是源代码的链接。](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/params_parser.rb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:06:14.960

当前 XML/YAML 解析漏洞的主要风险与为您提供更丰富的对象重新序列化的回调有关。因此，一种可能的方法是只使用为您提供 XML/YAML 解析树的较低级别的 API，但不要在 Ruby 标量（字符串、数字、哈希等）之外进行任何水合。如果这对您不起作用，使用[Yajl 之](http://lloyd.github.com/yajl/)类的解析器，或者在许多情况下，只需升级到最新版本的 gem，就足以让解析继续进行。

此外，解析的主要风险在于参数解析，而不是响应解析。响应解析（特别是如果您可以信任该服务并通过安全通道进行通信）的风险要低得多，因为您可以控制它发生的时间和地点。

# android - 在智能手机中运行的页面选项卡应用程序

> ID：14689341
> 
> 赞同：1
> 
> 时间：2013-02-04T14:55:52.990
> 
> 标签：android, facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk

我在我的页面上安装的 Facebook 选项卡应用程序甚至无法在智能手机上查看。有哪些不同的方法可以使它们可见？Facebook 是否正在为此做些什么？我无法将网络链接 (URL) 作为墙贴粘贴到我的应用程序中。这很便宜。任何其他建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:07:31.820

如此处所述[，](https://stackoverflow.com/questions/7220579/is-it-possible-to-show-a-facebook-app-as-a-page-tab-on-mobile-devices)无法在移动 Facebook 网站上查看带有应用程序的页面选项卡，您只能创建应用程序的移动版本，用户在从移动设备访问时将被重定向到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:16:05.537

Facebook 不支持智能手机上的页面标签应用程序。所以你需要制作移动应用程序。但是，您可以通过同一程序制作页面标签应用程序和移动应用程序。

[https://shindan-social.herokuapp.com/sss2.salesforce.com/sites](https://shindan-social.herokuapp.com/sss2.salesforce.com/sites)

我认为这对开发您的应用程序很有帮助。您知道 Facebook 页面通过从您的服务器获取页面来使用 POST 方法。您可以通过 POST 或 GET 方法和用户代理区分哪个浏览器用户使用。

# wpf - 如何确保在加载新元素之前不处理我的按键？

> ID：14689343
> 
> 赞同：0
> 
> 时间：2013-02-04T14:56:02.117
> 
> 标签：wpf

我有一个子元素，它将自身内部的适当元素集中在其 Loaded 事件上。我们发现一些手指快速的测试人员能够按下按键来打开元素，并且下一个按键会转到父容器而不是新聚焦的容器！因此，按键正在击败 WPF 运行的任何异步进程以加载子控件。

父控件和子控件中的目标都是一个简单的文本框。

是否有保证的方法来确保不会发生这种情况？

# jekyll - 我在github上投了一篇文章，但是我的博主没有显示

> ID：14689347
> 
> 赞同：0
> 
> 时间：2013-02-04T14:56:08.857
> 
> 标签：jekyll

就在一个月前，我可以使用以下命令发布一篇文章：

```
rake post title="test"
git add .
git commit -m"test"
git push origin master 
```

但是，即使我已经提交给 Github，现在这些命令也不起作用！

图如下： ![在github上](../Images/e40ada37ba81412816f94287961c230f.png) ![不显示在博客上](../Images/1d8140eb7729521c0dd158b2c1f15cb5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:42:20.747

我找到了原因。因为我一次提交了好几篇论文，有的有问题，其他的都提交到github了，显示不出来。我想也许页面功能有抛出异常，无论如何，我会检查我在我的文章中犯了什么样的错误。

# java - 使用 Mockito 模拟 Spy 方法

> ID：14689348
> 
> 赞同：13
> 
> 时间：2013-02-04T14:56:09.170
> 
> 标签：java, unit-testing, junit, mocking, mockito

我正在为一个`FizzConfigurator`看起来像这样的类编写单元测试：

```
public class FizzConfigurator {
    public void doFoo(String msg) {
        doWidget(msg, Config.ALWAYS);
    }

    public void doBar(String msg) {
        doWidget(msg, Config.NEVER);
    }

    public void doBuzz(String msg) {
        doWidget(msg, Config.SOMETIMES);
    }

    public void doWidget(String msg, Config cfg) {
        // Does a bunch of stuff and hits a database.
    }
} 
```

我想编写一个简单的单元测试来存根该`doWidget(String,Config)`方法（这样它实际上不会触发并命中数据库），但这允许我*验证*调用是否`doBuzz(String)`最终执行`doWidget`。Mockito 似乎是适合这里工作的工具。

```
public class FizzConfiguratorTest {
    @Test
    public void callingDoBuzzAlsoCallsDoWidget() {
        FizzConfigurator fixture = Mockito.spy(new FizzConfigurator());
        Mockito.when(fixture.doWidget(Mockito.anyString(), Config.ALWAYS)).
            thenThrow(new RuntimeException());

        try {
            fixture.doBuzz("This should throw.");

            // We should never get here. Calling doBuzz should invoke our
            // stubbed doWidget, which throws an exception.
            Assert.fail();
        } catch(RuntimeException rte) {
            return; // Test passed.
        }
    }
} 
```

这*似乎*是一个很好的游戏计划（至少对我来说）。但是当我实际编写代码时，我在测试方法内的第 2 行得到以下编译器错误（`Mockito.when(...)`行：

> Mockito 类型中的 when(T) 方法不适用于参数 (void)

我看到 Mockito 无法模拟返回的方法`void`。所以我问：

1.  我是否正确地接近了这个测试设置？或者有没有更好的、Mockito 推荐的、在后台`doBuzz`调用的测试方法`doWidget`？和
2.  我可以做些什么来模拟/存根`doWidget`，因为它是我整个`FizzConfigurator`班级中最关键的方法？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-04T15:55:55.413

我不会使用异常来测试它，而是使用验证。另一个问题是您不能使用`when()`返回 void 的方法。

这是我的做法：

```
FizzConfigurator fixture = Mockito.spy(new FizzConfigurator());
doNothing().when(fixture).doWidget(Mockito.anyString(), Mockito.<Config>any()));
fixture.doBuzz("some string");
Mockito.verify(fixture).doWidget("some string", Config.SOMETIMES); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T00:55:22.133

这清楚地表明`doWidget`方法应该属于另一个`FizzConfigurator`依赖的类。

在您的测试中，这个新依赖项将是一个模拟，您可以轻松验证其方法是否使用`verify`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-25T13:56:06.127

就我而言，对于我试图存根的方法，我传入了不正确的匹配器。

我的方法签名（对于我试图存根的超类方法）：字符串，对象。

我正在传递：

`myMethod("string", Mockito.nullable(ClassType.class))`并得到：

`Hints: 1\. missing thenReturn() 2\. you are trying to stub a final method, which is not supported 3: you are stubbing the behaviour of another mock inside before 'thenReturn' instruction if completed`

在另一个参数中使用匹配器时，我们还需要为字符串使用一个：

`myMethod(eq("string"), Mockito.nullable(ClassType.class))`

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-28T07:36:26.847

这不是问题的直接答案，但我在尝试解决我的问题时遇到了它，并且此后没有找到更相关的问题。

如果您尝试存根/模拟标记为 Spy 的对象，则 Mockito 仅在使用`do...when`JB Nizet 暗示的约定创建存根时才会选择存根：

```
doReturn(Set.of(...)).when(mySpy).getSomething(...); 
```

它没有被以下人员拾取：

```
when(mySpy.getSomething(...)).thenReturn(Set.of(...)); 
```

与中的评论相匹配`MockHandlerImpl::handle`：

```
// stubbing voids with doThrow() or doAnswer() style 
```

# c# - 如何遍历 XDocument 的 XElement 节点并添加到另一个 XElelement？

> ID：14689349
> 
> 赞同：0
> 
> 时间：2013-02-04T14:56:12.187
> 
> 标签：c#, xml, linq-to-xml, xelement

我有一个如下所示的 XML 文档：

```
<Person>
  <LastName>LastName1</LastName>
  <FirstName>FirstName1</FirstName>
  <MiddleName>MiddleName1</MiddleName>
</Person> 
```

最初我有一种方法来创建这个结构，如下所示：

```
public XElement ToXML()
{
  return new XElement("Person",
    new XElement(this.LastName.ToXML()),
    new XElement(this.FirstName.ToXML()),
    new XElement(this.MiddleName.ToXML()));
} 
```

`Person`问题是除了使用根中的 Name 值之外，还有很多其他节点。所以我尝试做的是将 , 和 元素重构`FirstName`为`LastName`它们`MiddleName`自己的可重用类，并使用一种`ToXMLDoc()`方法将这些元素返回为 a`XDocument`而不是 a `XElement`（因为根将由需要名称 children 的类决定；可能是`Person`，`Employee`， ETC。）

这是我的新`ToXMLDoc`回报：

```
return new XDocument(new XElement(this.LastName.ToXML()),
                     new XElement(this.FirstName.ToXML()),
                     new XElement(this.MiddleName.ToXML())); 
```

我的问题是我现在想将此内容添加到我的班级添加*的*根目录中。我尝试做类似下面的事情，但我没有正确使用构造函数并得到“***模棱两可的构造函数引用***”错误。`XElement``Person`

 *```
return new XElement("Person",
    foreach (XElement xe in NameType.ToXMLDoc().Nodes())
    {
      new XElement(xe.Value);
    }
); 
```

如何从`ToXMLDoc()`方法中获取内容并将它们添加到`XElement`正在为其创建的节点`Person`？任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:58:42.730

您当前正在尝试*在*构造函数调用中嵌入`foreach`循环。那是行不通的——但实际上很简单：

 *```
return new XElement("Person", NameType.ToXMLDoc()
                                      .Nodes()
                                      .Select(xe => new XElement(xe.Value)); 
```

你*确定*你不只是想批发复制元素吗？在这种情况下，它只是：

```
return new XElement("Person", NameType.ToXMLDoc().Nodes()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:59:28.687

I would return an `XElement`, rather than an `XDocument`

This way you could just do:

```
new XElement("Person", NameType.ToXMLDoc()) 
```**

# linux - Virtualbox：“USB设备正在被其他人使用”错误，如何让（mac）主机放开？

> ID：14689354
> 
> 赞同：35
> 
> 时间：2013-02-04T14:56:27.630
> 
> 标签：linux, ubuntu, virtualbox, modem

我正在尝试通过 Virtual Box 在 Ubuntu 中设置 USB 传真调制解调器，但我不知道该怎么做。

```
Host OS = Mac OS X
Virtual Box Guest OS = Ubuntu 12.04
56k USB Fax/Modem = Lenovo 43R1786 (43R1815) by Conexant 
```

在主机操作系统上，我可以看到 /dev/tty.usbmodem24680241。我启用了 USB 控制器，发现我的调制解调器是“Conexant USB 调制解调器”，所以我启用了它。现在，当我运行来宾操作系统时，从该操作系统的 Virtual Box 菜单中，我转到设备 > USB 设备 > Conexant USB 调制解调器，它显示：

无法将 USB 设备科胜讯 USB 调制解调器连接到虚拟机 Ubuntu32。其他人正在使用 USB 设备。看起来这意味着主机（mac）首先抓住了设备。我怎样才能让它放开以便客人可以使用它？我是否以正确的方式设置它？

谢谢！

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-02-06T14:15:56.493

我想到了。你应该：

1.  插上设备，让主机抓取
2.  在主机中，转到虚拟框，并编辑来宾使用 USB 的配置，并添加一个过滤器以包含插入的设备
    *   注意，您可能需要安装[扩展包](https://www.virtualbox.org/wiki/Downloads)才能启用 USB 2.0
3.  拔下设备
4.  启动来宾操作系统
5.  当来宾操作系统运行时，插入设备。

虚拟盒子将抓取 USB 设备并使其可供客人使用。然后，访客将继续尝试识别和配置设备。

完毕。

注意：
在更改设置时已完成运行或保存的来宾（虚拟机）实例。

# c# - 通过 C# 访问 HeaderFooter.Range 会更改文档外观

> ID：14689360
> 
> 赞同：2
> 
> 时间：2013-02-04T14:56:37.220
> 
> 标签：c#, ms-word

我正在使用 C# 自动化 Word，并发现如果我访问 HeaderFooter 对象的 Range 属性，Word 将使页眉和页脚可见，即使其中没​​有任何内容，当稍后使用 Word 打开文档时。

页眉和页脚的“正常”行为（至少在 Word 2007 和 2010 中）似乎是，如果页眉或页脚没有内容，它应该隐藏页眉/页脚区域，包括隐藏页眉/页脚的边距页脚。

我看到的是，如果我只是访问 HeaderFooter 对象的 Range 属性，甚至无需更改任何内容，访问的页眉/页脚就会保持可见。就好像访问 Range 属性会自动在文档中创建一些内容（如果它不存在）。

如果其中有任何内容，特别是 Range.InlineShapes，我只对访问页眉/页脚的内容感兴趣。有没有办法在不访问 Range 的情况下确定页眉/页脚是否有任何内容？HeaderFooter.Exists 在这种情况下似乎没有帮助。

# c# - Linq 查询 - 列上的不同数据类型

> ID：14689364
> 
> 赞同：2
> 
> 时间：2013-02-04T14:56:55.310
> 
> 标签：c#, linq, dataset

我正在运行以下查询：-

```
var Values = from data in DtSet.Tables["tblCosts"].AsEnumerable()
            group data by new
            {
                InvNo = data.Field<double>("InvoiceNo"),
                AccRef = data.Field<double>("SiteRefNum"),
            }
            into g
            select new
            {
                Code = "1",
                InvType = "I",
                Account = g.Key.AccRef,
                InvNo = g.Key.InvNo,
                ChargeTotal = g.Sum(d => d.field<double>("Charge")
            }; 
```

由于数据导入数据表（从 Excel）的方式，有时 AccRef 的数据类型是`double`，有时是`string`. 有没有办法在运行时克服这个问题，因为我不希望用户在导入之前修改 Excel 中的源数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:07:45.847

您可以[`Convert.ToDouble`](http://msdn.microsoft.com/en-us/library/kx3x7f55%28v=vs.100%29.aspx)与对象一起使用，因此它应该适用于双精度和字符串：

```
var Values = from data in DtSet.Tables["tblCosts"].AsEnumerable()
             group data by new
             {
                 InvNo = data.Field<double>("InvoiceNo"),
                 AccRef = Convert.ToDouble(data["SiteRefNum"]),
             }
             into g
             select new
             {
                 Code = "1",
                 InvType = "I",
                 Account = g.Key.AccRef,
                 InvNo = g.Key.InvNo,
                 ChargeTotal = g.Sum(d => d.Field<double>("Charge"))
             }; 
```

当然，只有在`SiteRefNum`实际可转换为`double`.

# html - 无法解决填充问题

> ID：14689368
> 
> 赞同：0
> 
> 时间：2013-02-04T14:56:58.587
> 
> 标签：html, css, padding, html-email

我似乎无法弄清楚页面顶部 1 或 2 像素的填充来自何处。我已经在 Chrome 和 Safari 中运行了它，但 JSFiddle 似乎没有生成它。

可能只是浏览器将其打印到页面的方式吗？如果是这样，有没有办法对抗 CSS 或 JS 中的效果？

这是 JS Fiddle 示例：

[我的 JSFiddle 示例](http://jsfiddle.net/BhHUq/)

这是对您来说更容易的代码

```
<html>
<head>

<style>
* {padding:0; margin:0;}

h1{font-family: Arial, Helvetica, sans-serif; font-size:36px;}
h2{font-family: Arial, Helvetica, sans-serif; font-size:28px;}
h3{font-family: Arial, Helvetica, sans-serif; font-size:20px; font-weight:normal;}
h4{font-family: Arial, Helvetica, sans-serif; font-size:12px; font-weight:normal; line-height:16px;}
h5{font-family: Arial, Helvetica, sans-serif; font-size:9px;}

span{margin:0 auto;}

#wrapper{
    width:800px;
    height:auto;
    margin:0 auto;
}

#wrapper .header{
    background-image: url('http://i.imgur.com/dY8Tuu5.png');
    background-repeat: no-repeat;
}

#wrapper .header span h1{
    position:relative; 
    top:65px; 
    left:35px;
}

#wrapper .header span h2{
    position:relative;
    color:white;
    text-shadow:1px 1px 1px #333; 
    top:115px; 
    left:25px;
}

</style>

</head>

<body>

<table id="wrapper">
    <tr>
        <td class="header" height="450" >
            <span>
                <h1>Big Flashy <br /> Headlines Here</h1>
            </span>

            <span>
                <h2>Sub-Headers and such <br /> can go Here</h2>
            </span>
        </td>

    </tr>    
</table>

</body>
</html> 
```

我必须使用表格而不是 DIV，因为它将通过电子邮件发送。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:10:27.537

如果它用于电子邮件内联样式是必需的

```
 <table id="wrapper" cellpadding="0" cellspacing="0"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:02:45.420

在 Chrome 上，问题是用户代理样式表将 2px 添加到`table`for `border-spacing`. 尝试：

```
table {border-spacing: 0px;} 
```

# json - 如何在 extjs4 中访问 json 文件中的额外参数？

> ID：14689370
> 
> 赞同：1
> 
> 时间：2013-02-04T14:57:10.093
> 
> 标签：json, extjs, yii

我正在使用 extjs4 MVC plus yii 框架。我遇到了一个问题，即如何访问来自服务器的 jason 文件中的额外参数并在 extjs4 中将其处理到客户端。我的代码：- 1）我的 json 文件是：--

```
{
    'users': [
        {
            "userId": 1,
            "userName": 'Who will win the series11111111?',
            "message":"You are welcome",
        }
    ]
} 
```

2) 我在 extjs4 中的 userModel 类：-- 在这个文件中没有任何可用的“消息”属性。

```
Ext.define('Balaee.model.sn.UserModel',{

extend: 'Ext.data.Model',

fields: ['userId','userName','password'],
proxy:
{
    type:'ajax',
    api:
    {
        read:'http://localhost/balaee/Balaee/index.php?r=SocialNetworking/user/AuthenticateLogin',
        create:'http://localhost/balaee/Balaee/index.php?r=SocialNetworking/user/AuthenticateLogin',
    },//end of api
    reader:
    {
        type:'json',
        root:'users'
    },//end of reader
    writer:
    {
        type:'json',
        root:'records',
    },//End of writer
}//end of proxy
}); 
```

3）这是我的视图文件，我将在其中访问来自 json 文件的用户名和消息字段。

```
Ext.define('Balaee.view...',
        {
                extend:'Ext.view.View',
                store:'kp.UserStore',
                config:
                {
                    tpl:'<tpl for=".">'+
                        '<div id="main">'+
                        '</br>'+
                        '<b>userName :-</b> {userName}</br>'+
                        '<b>message :-</b> {message}</br>'+
                        '</div>'+
                        '</tpl>',
                    itemSelector:'div.main',    
                }
        });// End of login class 
```

但它不起作用。它显示用户名字段值但不显示消息字段值。

实际上我想访问一个在 extjs4 的模型类中不存在的消息字段。访问这种没有任何关系的字段是否正确？如何访问此类字段。请给我一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:09:59.707

An`Ext.data.Model`只知道它定义的字段。[从文档中](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model)的示例可以清楚地看到这一点。

如果您希望消息对您的视图可用，它也必须在您的模型中可用：

```
Ext.define('Balaee.model.sn.UserModel',{
    extend: 'Ext.data.Model',
    fields: ['userId', 'userName', 'password', 'message'],
    // ...
}); 
```

# java - 如何将多维向量从 C++ 转换为 Java？

> ID：14689371
> 
> 赞同：1
> 
> 时间：2013-02-04T14:57:16.160
> 
> 标签：java, translate, multidimensional-array

所以，我用 C++ 轻松完成了一个项目，却发现我应该用 Java 编写它。这没什么大不了的，除了我的代码使用多维向量，比如：

```
vector <vector<int> > arr 
```

Java中是否有等效的东西可以在无需彻底重写程序的情况下给出相同的结果？

这是我在翻译时遇到问题的 C++ 程序的代码片段：

```
vector <vector <int> > arr;

cin >> n;

while (n > 0)
{
    vector <int> row;
    int u;

    for (int i = 0; i < n ; ++i)
    {
        cin >> u;
        row.push_back(u);
    }

    arr.push_back(row);

    n = comb(row.size(), k);
    k++;
}

for (int i = 0; i < arr.size(); i+=2)
    for (int j = 0; j < arr[i].size(); ++j)
        sum += arr[i][j];

for (int i = 1; i < arr.size(); i+=2)
    for (int j = 0; j < arr[i].size(); ++j)
        diff += arr[i][j]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:03:36.763

[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)如果您将其声明为`ArrayList<ArrayList<Integer>>`. 您对`push_back()`的调用等同于对 的调用[`add()`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#add%28E%29)。您将丢失数组索引访问表示法，但这可以通过链接调用来解决[`get()`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#get%28int%29)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T15:06:01.883

您可以使用 ArrayList 来调整您的代码。这是一个小例子。

```
 ArrayList <ArrayList<Integer>> aa = new ArrayList<ArrayList<Integer>>();
    aa.add(new ArrayList<Integer>());
    aa.get(0).add(10); 
```

编辑

你的代码看起来像这样

```
 ArrayList <ArrayList<Integer>> arr = new ArrayList<ArrayList<Integer>>();
    BufferedReader br = new BufferedReader (new InputStreamReader(System.in));

    int n;
    n=br.read();
    while (n>0)
    {
        ArrayList<Integer> row = new ArrayList<Integer>();
        int u;
        for (int i=0;i<n;i++)
        {
            u=br.read();
            row.add(u);

        }
        arr.add(row);
        //I don't know this function
        n=com(row.size(),k);
        k++;
    }
    for (int i=0;i<arr.size();i+=2)
        for (int j=0;j<arr.get(i).size())
            sum+=arr.get(i).get(j); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T15:02:52.820

Java 也有多维向量。只需使用

```
ArrayList<ArrayList<Integer>>arr=new ArrayList(); 
```

# ios - 模拟标签外观的按钮（有点）

> ID：14689383
> 
> 赞同：0
> 
> 时间：2013-02-04T14:58:05.003
> 
> 标签：ios, objective-c

iOS中获得以下内容的最佳方法是什么：

![截屏](../Images/ad28ed9b8bd6ddd3be07967ea68d4b34.png)

3 个按钮（？），将更改点击后显示的信息。我有一些想法，但我想听听有经验的人的意见。我在问如何获得它的外观，最好一个接一个地使用按钮，如果是这样，如何仅从一侧更改边框？如果不是怎么办？另外，如果它是某种转发，我很抱歉，无法通过搜索找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:08:20.570

这似乎是一个非常标准的分段控制对象，每个按钮都有一个自定义渐变或图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:10:40.800

最好的方法是使用 UISegmentedControl

这是创建切换器的标准方法：

```
UISegmentedControl *switcher = [[UISegmentedControl alloc] initWithItems: items];
                switcher.segmentedControlStyle = UISegmentedControlStyleBar;
                switcher.tintColor = self.navigationController.navigationBar.tintColor;
                [switcher addTarget:self action: @selector(switcherTapped:)
                         forControlEvents: UIControlEventValueChanged]; 
```

“items”是您要在其中切换的 3 个项目的数组。

# linux - pppd IP-UP 脚本拨出调制解调器

> ID：14689384
> 
> 赞同：0
> 
> 时间：2013-02-04T14:58:09.497
> 
> 标签：linux

需要从 PC 拨出到具有调制解调器的设备。设备有小工具序列号。所以 PC usb 可以连接到设备的 usb 并且使用驱动程序可以将设备检测为串行端口。现在需要绕过通过设备上的小工具串行端口接收的拨出命令到通过设备上的 uart 连接的调制解调器。

如何通过 c++ 代码配置 pppd 在设备上执行相同的操作。

# java - 如何在 JBoss 上部署 JAR 文件？

> ID：14689387
> 
> 赞同：4
> 
> 时间：2013-02-04T14:58:12.423
> 
> 标签：java, spring, deployment, jboss, jar

`Spring`我有一个使用和`Hibernate`的Java 应用程序`JMX`。

现在我想将它部署在 JBoss 上。我将它导出到一个 Jar 文件并复制到 JBoss 的部署文件夹中。但是当我启动 JBoss 时，该应用程序没有部署。

我看到JBoss找不到Spring和Hibernate的库文件的错误。那么大家如何在JBoss上部署文件Jar？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:12:02.500

Java 企业应用程序不是部署为 jar 文件，而是部署为 .war 文件（用于 Web 应用程序）或 .ear 文件（用于完整的企业应用程序，包括 EJB）。

您可能会考虑将您的应用程序打包为 .war 文件。即使它不是“Web 应用程序”，也需要将其打包为一个以部署到 JBOSS 等 Java 企业/Web 容器中。

我建议浏览 Oracle 提供的[教程](http://docs.oracle.com/javaee/6/tutorial/doc/)以了解更多信息。

# asp.net-mvc - 在 MVC 4 托管的 IIS 中部署 MVC 3 应用程序

> ID：14689388
> 
> 赞同：0
> 
> 时间：2013-02-04T14:58:14.520
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis-7, asp.net-mvc-4

我已经创建了 MVC 3 应用程序，一切正常。

现在我们开始部署。但是 IIS 7 已经安装了 MVC 4 并运行其他 MVC 4 应用程序。

我可以简单地托管我的 MVC 3 应用程序吗？或者我是否需要对`web.config`,`global.asax`等进行任何更改？会发生什么故障吗？

我用 Razor 开发了 MVC 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:01:45.357

您可以并排安装 MVC3 和 MVC4，但您可能需要遵循[此处的建议](https://stackoverflow.com/questions/9471263/mvc-4-beta-side-by-side-installation-error.)

如果您不想在服务器上安装 MVC3，只需 BIN 部署它并在附加链接中进行更改。这样，您就不会冒险影响其他应用程序。

# java - 用于大量数据输入的斐波那契数列的第 n 项（无递归或循环）

> ID：14689390
> 
> 赞同：-1
> 
> 时间：2013-02-04T14:58:16.847
> 
> 标签：java, c, algorithm, fibonacci

> **可能重复：**
> [次线性时间的第 n 个斐波那契数](https://stackoverflow.com/questions/1525521/nth-fibonacci-number-in-sublinear-time)

我正在创建一个与楼梯问题相关的程序，即您有*n 个*楼梯，玩家可以使用它们一个接一个地爬上楼梯或跳过一个...

现在要解决这个问题，我需要*n* th ( *n* +1) 项来表示*n*个楼梯的斐波那契数，但问题是我的输入范围是 1 ≤ *n* ≤ 1000000。

如果我使用基于循环的方法或递归来计算斐波那契，那么对于更大的*n*值，该方法需要非常多的时间和空间。我没有。

那么请你告诉我Java或C中的一些方法来处理斐波那契数列直到该范围并具有正确的输出？

注意：请我不需要任何具有递归或循环的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:16:57.027

看看下面的页面，也许会有所帮助：[https ://www.nayuki.io/page/fast-fibonacci-algorithms](https://www.nayuki.io/page/fast-fibonacci-algorithms)

对我来说，他们的 Java 示例设法计算了第 1000000 个斐波那契数。它的长度为 208988 位。

# sql-server - SQL Server 2012 是否支持具有可更新订阅的事务复制？

> ID：14689391
> 
> 赞同：1
> 
> 时间：2013-02-04T14:58:22.340
> 
> 标签：sql-server, replication, sql-server-2012, transactional-replication

在[此页面上](http://msdn.microsoft.com/en-us/library/ms143550%28v=SQL.110%29.aspx)，Microsoft 声明：

> 本主题介绍 **SQL Server 2012 中仍然可用**的已弃用复制功能。这些功能计划在 SQL Server 的未来版本中删除。不推荐使用的功能不应在新应用程序中使用。
> 
> 可更新订阅，包括即时更新和使用快照和事务发布的排队更新。
> 
> 我们建议您改用对等事务复制。

在[这个页面上](http://technet.microsoft.com/en-us/library/539d5bb0-b808-4d8c-baf4-cb6d32d2c595)，微软甚至教你如何启用可更新订阅。

> 启用更新订阅
> 
> 在新建发布向导的发布类型页面上，选择 **具有可更新订阅的事务性发布**。

但是，我只是在 SQL Server 2012 的发布类型页面上找不到**具有可更新订阅的复制类型事务发布，请参见下图：**

![在此处输入图像描述](../Images/427356113371f204e575bdd94127ec84.png)

任何人都可以确认，我们是否在 SQL Server 2012 中具有此功能？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T17:33:52.710

它受支持但已弃用，这意味着它将在未来的版本中删除。正如 Remus 提到的，您将需要使用 T-SQL 来设置它，因为*新发布向导*不再提供该选项。

# delphi - Delphi - 发送包含换行符的电子邮件

> ID：14689393
> 
> 赞同：2
> 
> 时间：2013-02-04T14:58:33.773
> 
> 标签：delphi, mailto

使用 Delphi 2010，我正在尝试发送电子邮件的正文需要多行的电子邮件。我无法让多线部分工作。我尝试插入#13、#10 和'%0d'。它要么忽略并将所有内容打印为一行，要么我得到一个外部异常。

这是我的源代码。

```
 strEmail := 'address@domain.com';
  strSubject := 'Update Request: ';
  strBody := 'Line1 ' +#13 + 'Line 2';

  Param := 'mailto:' + strEmail + '?subject=' + strSubject + '&Body=' + strBody;
  Shellexecute(Main.Handle, 'open', PChar(Param), nil, nil, SW_SHOWNORMAL); 
```

如何在我的电子邮件正文中的不同行中获取 Line1 和 Line2？您可以假设唯一的电子邮件客户端是 Outlook。（可以使用不同的版本。）

谢谢，

GS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:02:10.527

根据 mailto URL 方案[`RFC 2368`](http://www.ietf.org/rfc/rfc2368.txt)，您必须使用`%0D%0A`for 换行符。直接有一个关于它的注释（删除了双引号）：

> 另请注意，消息正文中的换行符必须使用 %0D%0A 进行编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:35:05.530

正如 TLama 所指出的，RFC 需要回车和换行来换行电子邮件中的行。

修改你的第三行阅读：

```
strBody := 'Line1 ' + #13#10 + 'Line 2'; 
```

每当我在编写一个不仅仅使用嵌入式回车符和换行符的程序时，我都会声明一个常量：

```
const
  CRFL = #13#10; 
```

知道我应该在整个代码中使用常量而不是 #13#10 可以减少我忘记某个部分或向后输入它们的机会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-02T00:31:19.987

添加

`'Line1 ' + #13#10 + 'Line 2'`

在 TidMessage.Body.Text 也为我工作。Outlook 完成了其余的工作，即使使用纯文本也将 www 更改为链接。

谢谢埃里克。使用 Indy 9 对 Delphi 7 很好。

# c# - 具有自动调整大小的水平滚动条的列表框

> ID：14689397
> 
> 赞同：1
> 
> 时间：2013-02-04T14:58:42.783
> 
> 标签：c#, winforms

我正在尝试使用以下代码来查找列表框中最长项目的宽度，然后更改列表框的`HorizontalExtent`属性以适应水平滚动条范围内的项目：

```
Graphics widthFinder = listBox_Transactions.CreateGraphics();
int needScrollWidth = 0; int checkVal = 0;
for (int i = 0; i < listBox_Transactions.Items.Count; i++)
{
    checkVal = (int)widthFinder.MeasureString(listBox_Transactions.Items[i].ToString(), listBox_Transactions.Font).Width + 1;
    if (needScrollWidth < checkVal)
    { needScrollWidth = checkVal; }
}

listBox_Transactions.HorizontalScrollbar = true;
listBox_Transactions.HorizontalExtent = needScrollWidth;
listBox_Transactions.Invalidate(); 
```

代码似乎按预期工作，但`widthFinder.MeasureString(listBox_Transactions.Items[i].ToString(), listBox_Transactions.Font).Width`始终返回 164 的异常。我已经搜索了可能发生这种情况的原因，但没有找到任何原因。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:52:20.170

很难确定，可悲的是，当我写这篇文章时，我没有要求澄清作为评论的声誉，但是......

我已经尝试过你的代码，它对我来说很好。我能想到的是，如果您使用不同的 DisplayMember 和 ValueMember，那么我假设您将对象添加到 Items 属性而不是简单类型。在这种情况下，您的

```
listBox_Transactions.Items[i].ToString() 
```

最终会为您提供对象的名称，而不是您希望的值。

假设我有一个 Foo 类列表并将其添加到您的列表框中

```
List<Foo> fooList = new List<Foo>();
fooList.Add(new Foo() { Bar = 1 });
fooList.Add(new Foo() { Bar = 2 });
fooList.Add(new Foo() { Bar = 3 });
fooList.Add(new Foo() { Bar = 45 });

listBox_Transactions.Items.AddRange(fooList.ToArray());
listBox_Transactions.DisplayMember = "Bar";
listBox_Transactions.ValueMember = "Bar"; 
```

然后当我到达时在你的代码中

```
listBox_Transactions.Items[i].ToString() 
```

我会得到价值

```
"Namespace.Foo" 
```

而不是我想要得到的价值。因此，这总是会给出相同的字符串长度。

要解决此问题，请在上面的代码中转换回您的对象类型，如下所示：

```
((Foo)listBox_Transactions.Items[i]).Bar.ToString() 
```

希望这会有所帮助。

# mysql - 一次按两列分组还是？

> ID：14689398
> 
> 赞同：1
> 
> 时间：2013-02-04T14:58:45.943
> 
> 标签：mysql

我正在尝试使用以下查询编写报告：

```
SELECT
    DATE_FORMAT(date, '%Y-%m-%d') AS 'Date',
    CONCAT(UCASE(MID(name,1,1)),MID(name,2)) AS 'Username',
    COUNT(admin_id) AS 'Surveys Carried Out'
FROM
    `customer_surveys`
LEFT JOIN `admin` ON customer_surveys.admin_id = admin.adminid
GROUP BY DATE_FORMAT(date, '%Y-%m-%d') 
```

它需要按日期（因为它是逐日报告）和 admin_id（因为它是对该 ID 进行了多少调查的计数）进行分组

这在理论上应该有效。但是看看它返回的内容，并将其与实际数据进行比较，它每天都在显示它，但会合并 admin_ids，因此当天第一个出现的就是显示的那个。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:03:24.403

如果要显示每个管理员的日期记录，则必须*至少按日期和 admin_id 对其进行分组*

```
GROUP BY DATE_FORMAT(date, '%Y-%m-%d'), admin_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:03:34.393

听起来您只需要添加一个`GROUP BY admin_id`：

```
SELECT
    DATE_FORMAT(date, '%Y-%m-%d') AS 'Date',
    CONCAT(UCASE(MID(name,1,1)),MID(name,2)) AS 'Username',
    COUNT(admin_id) AS 'Surveys Carried Out'
FROM `customer_surveys`
LEFT JOIN `admin` 
   ON customer_surveys.admin_id = admin.adminid
GROUP BY DATE_FORMAT(date, '%Y-%m-%d'), admin_id 
```

按两者分组将为您提供`DATE_FORMAT(date, '%Y-%m-%d')`和`admin_id`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T15:04:06.243

您不需要 group by 中的所有非聚合体吗？Concat 不是聚合体

```
SELECT
    DATE_FORMAT(date, '%Y-%m-%d') AS 'Date',
    CONCAT(UCASE(MID(name,1,1)),MID(name,2)) AS 'Username',
    COUNT(admin_id) AS 'Surveys Carried Out'
FROM
    `customer_surveys`
LEFT JOIN `admin` ON customer_surveys.admin_id = admin.adminid
GROUP BY DATE_FORMAT(date, '%Y-%m-%d'), CONCAT(UCASE(MID(name,1,1)),MID(name,2)) 
```

# jquery - 拖动时为 div 设置动画

> ID：14689400
> 
> 赞同：0
> 
> 时间：2013-02-04T14:58:51.180
> 
> 标签：jquery, html, jquery-animate, drag

当我拖动另一个 div 时，我正在尝试为 div 设置动画。

我在 div 中有一个图像，当我拖动这个图像时，我想以另一种速度为其他 div 设置动画/移动。

所以主要问题是如何在拖动其他元素时为 div 设置动画？

谁能帮我这个？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:01:19.603

jQuery UI does this very nicely:

[http://jqueryui.com/draggable/#visual-feedback](http://jqueryui.com/draggable/#visual-feedback)

# jquery - Angular js找不到控制器？

> ID：14689401
> 
> 赞同：4
> 
> 时间：2013-02-04T14:58:52.197
> 
> 标签：jquery, angularjs

我正在使用角度 js，我在两个不同的 jsp 文件中编写了代码。显示了两个不同的视图。如果我渲染单个视图，它可以正常工作。但是如果我在同一页面上渲染两个视图，我会收到此错误

`Error: Argument 'UserCtrl' is not a function, got undefined`

jsp中的js代码片段如下。

在我的第一个 jsp 文件中是

```
// Bootstrap the Application
var App = angular.module('module', []);
// Set up a controller and define a model
App.controller('UserCtrl', function($scope) {
    $scope.user = {};
    jQuery.get("<c:url value='${someUrl}'/>",
            function(data) {
            angular.element('#user_detail').scope().user = data;
            angular.element('#user_detail').scope().$apply();
}, "json");
}); 
```

第二个是

```
// Bootstrap the Application
var App = angular.module('module', []);

// Set up a controller and define a model
App.controller('ProfileCtrl', function($scope) {
    $scope.profile = {};
    jQuery.get("<c:url value='${someUrl}'/>",
            function(data) {
            angular.element('#profile').scope().profile = data;
            angular.element('#profile').scope().$apply();
}, "json");
}); 
```

我尝试为模块提供不同的名称，但这对我也不起作用。感谢任何帮助。谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T08:33:39.623

得到它的工作。这是由于 ng-app 变量，我已经将它绑定在两个 jsp 页面上。所以现在我将它绑定到两个 jsp 的主体包装器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T15:09:14.563

我认为您正在重新初始化应用程序变量，请尝试以下代码

```
 var App  = App  ||angular.module('module', []); 
```

工作小提琴是 [http://jsfiddle.net/e6A5q/](http://jsfiddle.net/e6A5q/)

# solr - Solr 模式的自定义版本号

> ID：14689404
> 
> 赞同：1
> 
> 时间：2013-02-04T14:58:59.840
> 
> 标签：solr, schema, versioning

是否可以在 Solr 架构中的某处存储自定义版本号，以便客户端可以检索它以验证它是否连接到兼容的 Solr 实例？

当我将应用程序的新版本部署到 QA 或生产时，我需要确保我的应用程序连接到的所有数据源（Solr、RDBMS 等）都已正确更新/迁移。所以我想在启动时进行一些验证。使用数据库很容易（例如将当前模式版本存储在 VERSION 表中），但在哪里存储 Solr 模式的版本信息就不太明显了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:13:20.180

[SystemInfoHandler](http://wiki.apache.org/solr/SystemInformationRequestHandlers#SystemInfoHandler)将提供版本以及有关 Solr 实例的其他信息。在更高版本的 Solr（3.x 和 4.x）中，这已作为管理 requestHandler 的一部分启用。

您可以通过`http://localhost:8983/solr/admin/system`随 Solr 分发的示例站点访问信息。为您的 Solr 配置相应地修改 url。

注意：如果您运行的是旧版本的 Solr，可以通过在 solrconfig.xml 文件中添加以下行来启用此功能。

```
 <requestHandler name="/admin/system" class="solr.admin.SystemInfoHandler" /> 
```

**更新：** 对于知道schema何时改变的特定场景（例如schema的版本），可以通过每次修改schema文件时更新根节点的name属性来完成。然后，此名称值将在 SystemInfoHandler 响应中可用。

# ios - NSDictionary writetofile 不起作用

> ID：14689406
> 
> 赞同：1
> 
> 时间：2013-02-04T14:59:08.217
> 
> 标签：ios, objective-c, nsdictionary

我正在尝试使用 NSDictionary writetofile 保存一些用户设置，但它不起作用。

我已经检查了类似的问题，但我无法找出问题所在。

这是我的代码：

```
NSDictionary *settings;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
NSString *settingsPath = [NSString stringWithFormat:@"%@/UserSettings.plist", [paths objectAtIndex:0]];
BOOL settingsExist = [[NSFileManager defaultManager] fileExistsAtPath:settingsPath];
if(settingsExist){
    NSLog(@"file found!");
    settings = [NSDictionary dictionaryWithContentsOfFile:settingsPath];
}else{
    NSLog(@"file not found!");
    settings = [[NSDictionary alloc] initWithObjectsAndKeys:@"iPhone",@"device", nil];
    [[NSFileManager defaultManager] createFileAtPath:settingsPath contents:nil attributes:nil];
    if([settings writeToFile:settingsPath atomically:YES]){
        NSLog(@"success!");
    }else{
        NSLog(@"fail!");
    }
} 
```

它不断返回“失败！”。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:02:26.683

您需要指定`NSDocumentDirectory`而不是`NSDocumentationDirectory`.

# php - URL重写问题

> ID：14689407
> 
> 赞同：0
> 
> 时间：2013-02-04T14:59:14.677
> 
> 标签：php, jquery, url-rewriting

我想以一种友好的方式将参数传递给我的 PHP 页面，所以这是我在 .htaccess 文件中写的内容

```
 RewriteRule ^confirm\/(([a-z0-9]).+)\/(([a-z0-9]).+)$ www.example.com/confirm.php?email=$1&order=$2 
```

它运行良好，我可以使用 PHP 获取参数

```
explode('/', $_SERVER['REQUEST_URI']) 
```

我有两个问题，

1-当我提交此页面时，我需要它直接转到confirmation.php，而不是提交到www.example.com/confirm/example@mail.com/12-HDYF/confirmaction.php !!! 这怎么能改变。

2-该页面最初运行良好，但是当我输入友好的 URL 时，所有 jquery 文件都会给我以下错误，这似乎真的不相关。

![在此处输入图像描述](../Images/050db703b2c73d266b6c4f379d482a6c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:09:41.357

更改您的 url 结构以避免原始和友好 URL 的 ^confirm，这应该使事情更容易调试（并避免循环）。这是一个猜测，因为您尚未发布失败的输入。

```
RewriteRule ^orderconf\/(([a-z0-9]).+)\/(([a-z0-9]).+)$ www.example.com/confirm.php?email=$1&order=$2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:13:44.227

这是因为客户端（浏览器）看到了它正在浏览的页面`www.example.com/confirm/example@mail.com/12-HDYF/`，当它分析它并解析 html 时，它看到的内容类似于：

```
<script src="jquery.js"></script>
<form action="confirmation.php"... > 
```

因此，浏览器会看到他当前所在页面的相对 url。因此，如果您告诉他`jquery.js`在与他当前所在的文件夹相同的文件夹中搜索文件，他将尝试从 下载`www.example.com/confirm/example@mail.com/12-HDYF/jquery.js`，并且在您提交表单时会发生同样的事情。

为避免这种情况，请使用绝对 URL（注意前导斜杠）：

```
<script src="/jquery.js"></script>
<form action="/confirmation.php"... > 
```

如果您的文件位于 的子文件夹中`DocumentRoot`，请将该子文件夹放在 URL 的开头。

# javascript - 在backbone.js 中形成JSON 请求

> ID：14689408
> 
> 赞同：0
> 
> 时间：2013-02-04T14:59:16.550
> 
> 标签：javascript, json, backbone.js

这是我需要形成的 JSON 对象。

```
{
    "Header1": {
        "Login": {
            "SiteId": "",
            "UserName": "",
            "UserPassword": "",
            "UserAlias": ""
        },
        "Credential": {
            "Login": "",
            "Password": ""
        }
    },
    "Header2": {
        "DestinationID": "",
        "UserID": "",
        "SourceID": ""
    }
} 
```

单击登录时，我需要形成此 JSON 并使用主干.js 发送到我的服务。我只是对在backbone.js中形成这个感到困惑

```
var Client = Backbone.Model.extend({
    defaults: {

    }
}); 
```

我应该将我的 JSON 对象添加到默认值并使用它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:35:41.157

主干模型通常与服务器端的模型或数据库表相关。考虑到这一点，您可以使用 @model.set(attributes) 设置模型中的值，然后使用 @model.save 发送到服务器。如果您在服务器模型上存储对象，只需在模型中设置之前在主干中定义它们。

```
@model = new Client()

new_object = new Object()
new_object.site_id = ""
new_object.UserName = ""
etc..

@model.set(
  Header1: new_object,
  Header2: somethingelse
)

@model.save() 
```

如果不是这种情况并且模型与服务器上的模型或表不对应，那么您最好使用 JQuery Ajax 调用并手动构造您需要的 JSON，如上所述。希望这可以帮助。

# jquery - asmx MVC4写的代码无法执行

> ID：14689409
> 
> 赞同：1
> 
> 时间：2013-02-04T14:59:19.233
> 
> 标签：jquery, asp.net-mvc-4

大家好，我使用以下代码检查数据是否存在

这是我的输入设计

```
<label>
 @Html.LabelFor(u => u.Username)</label>
<input type="text" id="username" />
 &nbsp;
<label id="UserNameAvailabilityLabel" class="input_text">
</label>
 <span class="input_error">
 @Html.ValidationMessageFor(u => u.Username)
</span>
</label>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script type="text/javascript">
var emptyUserNameMessage = 'Please enter the username';
var progressUserNameMessage = 'Checking...';
var availableUserNameMessage = 'Username is available';
var usedUserNameMessage = 'Username has been taken';

$(function () {
    var userNameAvailabilityLabel = $("#UserNameAvailabilityLabel");

    $("#username").blur(function () {
        var userNameTextBox = $("#username");
        var userName = userNameTextBox.val();
        if ($.trim(userName) == '') {
            userNameAvailabilityLabel
                        .removeClass()
                        .addClass('required1')
                        .html(emptyUserNameMessage);
        }
        else {
            userNameAvailabilityLabel.html('');
            $("#ProgressDiv").show();

            $.ajax({
                type: 'POST',
                url: 'Checkavailability.asmx/CheckUserNameAvailability',
                data: '{userName: \'' + userNameTextBox.val() + '\'}',
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: OnCheckUserNameAvailabilitySuccess,
                error: OnCheckUserNameAvailabilityError
            });
        }
        return false; //Prevent postback
    });

    function OnCheckUserNameAvailabilitySuccess(response) {
        $("#ProgressDiv").hide();
        if (response != null && response.d != null) {
            var data = response.d;
            switch (data) {
                case 0:
                    userNameAvailabilityLabel
                        .removeClass()
                        .addClass('available')
                        .html(availableUserNameMessage);
                    $("#btnSubmit").removeAttr('disabled');
                    break;
                case 1:
                    userNameAvailabilityLabel
                        .removeClass()
                        .addClass('used')
                        .html(usedUserNameMessage);
                    $("#btnSubmit").attr('disabled', 'disabled');
                    break;
            }
        }
    }
    function OnCheckUserNameAvailabilityError(xhr, ajaxOptions, thrownError) {
        alert(xhr.statusText);
    }
}); 
```

这在我在普通`aspx`页面中使用它时有效，但是当`MVC`执行第一个脚本时，这意味着如果我从文本框移动而没有输入数据，它会根据需要显示错误，如果输入一些文本并离开文本框弹出一个内部服务器错误可能是什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:16:10.780

`url: 'Checkavailability.asmx/CheckUserNameAvailability',`刚改成`url: "../Checkavailability.asmx/CheckUserNameAvailability",`

# codeigniter - Short table name for SQL Query with Codeigniter database library

> ID：14689414
> 
> 赞同：0
> 
> 时间：2013-02-04T14:59:25.363
> 
> 标签：codeigniter

I'm using CodeIgniter, I want to using short table name for my SQL Query like that:

```
select pr.name  from product pr where pr.id=12; 
```

by using `db` class, I supposed to do:

```
$this->db->select('pr.name')->from('product pr')->where('pr.id', 12)->get(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:15:45.697

这在 CI 2.1.3 上完美运行。不要忘记使用`result()`.

示例对我有用：

```
function test(){
    $this->load->database();
    $sql = $this->db->select('pr.order_id')->from('items_table pr')->where('pr.order_id', 2)->get();
    foreach($sql->result() as $item){
        echo $item->order_id;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:23:13.447

你可以这样做：

```
$this->db->select('pr.name');
$this->db->from('product as pr');
$this->db->where('pr.id', 4);
return $this->db->get()->row_array(); 
```

使用 row_array() 你会得到一行，使用 result_array() 你会得到数组的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-22T12:05:17.283

有这么多的解决方案..我更喜欢 HMVC，但为了演示目的来解释“它是如何工作的”，控制器内部的解决方案（可怕，糟透了！！！！）

使用 shorts 表作为别名的答案，请阅读 rtfm 或使用简单查询并生成结果

对于连接方法，您也可以使用。快乐编码

![演示方法，](../Images/97d5c0239b2d85b6e323bbd125cbaa62.png)

![自定义错误](../Images/105ece9d1043085321f1e782f39980ac.png)

# java - Robotium - Waiting for an Activity's tasks to complete

> ID：14689422
> 
> 赞同：1
> 
> 时间：2013-02-04T14:59:41.073
> 
> 标签：java, android, testing, robotium

I've just started learning to use Robotium for testing my app. I have written a test case that resets a list of stats, and then checks if the values are equal to 0\. The code is below:

```
public void testClearStats() {
    solo.clickOnButton("Clear Stats");
    solo.clickOnButton("Yes");
    TextView views = (TextView) solo.getView(R.id.textViewsNum);
    TextView prompts = (TextView) solo.getView(R.id.textPromptsNum);
    TextView completions = (TextView) solo.getView(R.id.textCompleteNum);
    assertEquals("0", views.getText().toString());
    assertEquals("0", prompts.getText().toString());
    assertEquals("0", completions.getText().toString());
} 
```

The test was failing when it shouldn't because it was checking the values of the TextViews before their results were reset. To get around this, I added this line:

```
solo.waitForActivity(solo.getCurrentActivity().toString()); 
```

With this statement the test passes but it seems to take an unnecessary long time to complete. I was wondering if there was a better/correct way of way doing this, or is this the best way of doing it?

Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:15:37.253

您将不得不等待某些事情，您选择的内容将取决于您的应用程序，如果不看它，我无法回答什么是最好的等待。

您有哪些视觉指标可以让重置发生？你有新的活动开放吗？是否有文字告诉它已完成？如果它实际上只是三个文本字段。如果是这样，那么您可能会设法使用 solo.waitfortext("0") 尽管更好的方法是使用新的条件概念并使用 solo.waitForCondition(method) （条件可能是等待文本为 0，但您会将条件放在一个位置，然后如果您以后找到更好的方法，那么您只需更改一次）。

```
public class WaitForReset implements Condition
{

    public boolean isSatisfied()
    {
        TextView views = (TextView) solo.getView(R.id.textViewsNum);
        TextView prompts = (TextView) solo.getView(R.id.textPromptsNum);
        TextView completions = (TextView) solo.getView(R.id.textCompleteNum);
        if(isViewZero(views) && isViewZero(prompts) && isViewZero(completions))
        {
            return true
        }
        else
        {
            return false;
        }
    }

    private isViewZero(TextView textView)
    {
        if((textView!=null) && (textView.getText().toString() ==0))
        {
            return true;
        }
        else
        {
            return false;
        }
    }
} 
```

然后，您可以断言 waitforcondition 的值为真！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-24T14:27:52.083

您始终可以使用 waitForActivity 并选择特定的超时。`solo.waitForActivity(YourActivity.class, timeout);`

# r - Use a value from the previous row in an R data.table calculation

> ID：14689424
> 
> 赞同：88
> 
> 时间：2013-02-04T14:59:49.810
> 
> 标签：r, data.table

I want to create a new column in a data.table calculated from the current value of one column and the previous of another. Is it possible to access previous rows?

E.g.:

```
> DT <- data.table(A=1:5, B=1:5*10, C=1:5*100)
> DT
   A  B   C
1: 1 10 100
2: 2 20 200
3: 3 30 300
4: 4 40 400
5: 5 50 500
> DT[, D := C + BPreviousRow] # What is the correct code here? 
```

The correct answer should be

```
> DT
   A  B   C   D
1: 1 10 100  NA
2: 2 20 200 210
3: 3 30 300 320
4: 4 40 400 430
5: 5 50 500 540 
```

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-02-04T15:02:24.710

在[v1.9.6](https://cran.r-project.org/package=data.table)`shift()`中实现，这非常简单。

```
DT[ , D := C + shift(B, 1L, type="lag")]
# or equivalently, in this case,
DT[ , D := C + shift(B)] 
```

* * *

来自[新闻](https://github.com/Rdatatable/data.table/blob/master/README.md)：

> 5.  新函数`shift()`实现`lead/lag`了*vector*、*list*、*data.frames*或*data.tables*的快速。它需要一个`type`参数，可以是*"lag"* (默认) 或*"lead"*。`:=`它可以与or一起使用非常方便`set()`。例如：`DT[, (cols) := shift(.SD, 1L), by=id]`。请查看`?shift`更多信息。

* * *

有关以前的答案，请参阅历史记录。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2015-04-27T01:52:21.077

使用`dplyr`你可以做：

```
mutate(DT, D = lag(B) + C) 
```

这使：

```
#   A  B   C   D
#1: 1 10 100  NA
#2: 2 20 200 210
#3: 3 30 300 320
#4: 4 40 400 430
#5: 5 50 500 540 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-08-01T16:24:39.313

几个人已经回答了具体问题。请参阅下面的代码，了解我在这种情况下使用的通用功能，它可能会有所帮助。您可以根据需要在“过去”或“未来”中查看尽可能多的行，而不仅仅是获取前一行。

```
rowShift <- function(x, shiftLen = 1L) {
  r <- (1L + shiftLen):(length(x) + shiftLen)
  r[r<1] <- NA
  return(x[r])
}

# Create column D by adding column C and the value from the previous row of column B:
DT[, D := C + rowShift(B,-1)]

# Get the Old Faithul eruption length from two events ago, and three events in the future:
as.data.table(faithful)[1:5,list(eruptLengthCurrent=eruptions,
                                 eruptLengthTwoPrior=rowShift(eruptions,-2), 
                                 eruptLengthThreeFuture=rowShift(eruptions,3))]
##   eruptLengthCurrent eruptLengthTwoPrior eruptLengthThreeFuture
##1:              3.600                  NA                  2.283
##2:              1.800                  NA                  4.533
##3:              3.333               3.600                     NA
##4:              2.283               1.800                     NA
##5:              4.533               3.333                     NA 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-05-04T04:25:05.617

根据上面@Steve Lianoglou 的评论，为什么不只是：

```
DT[, D:= C + c(NA, B[.I - 1]) ]
#    A  B   C   D
# 1: 1 10 100  NA
# 2: 2 20 200 210
# 3: 3 30 300 320
# 4: 4 40 400 430
# 5: 5 50 500 540 
```

并避免使用`seq_len`or`head`或任何其他功能。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-02-04T15:53:25.323

遵循 Arun 的解决方案，无需参考即可获得类似的结果`.N`

```
> DT[, D := C + c(NA, head(B, -1))][]
   A  B   C   D
1: 1 10 100  NA
2: 2 20 200 210
3: 3 30 300 320
4: 4 40 400 430
5: 5 50 500 540 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-03T22:03:58.380

我添加了一个填充参数并更改了一些名称并将其命名为`shift`。[https://github.com/geneorama/geneorama/blob/master/R/shift.R](https://github.com/geneorama/geneorama/blob/master/R/shift.R)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-05T10:51:14.643

这是我的直观解决方案：

```
#create data frame
df <- data.frame(A=1:5, B=seq(10,50,10), C=seq(100,500, 100))`
#subtract the shift from num rows
shift  <- 1 #in this case the shift is 1
invshift <- nrow(df) - shift
#Now create the new column
df$D <- c(NA, head(df$B, invshift)+tail(df$C, invshift))` 
```

在这里`invshift`，行数减 1 为 4。`nrow(df)`为您提供数据框或向量中的行数。同样，如果您想取更早的值，请从 nrow 2、3、...等中减去，并将 NA 相应地放在开头。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2020-01-29T19:52:33.890

它可以在一个循环中完成。

```
# Create the column D
DT$D <- 0
# for every row in DT
for (i in 1:length(DT$A)) {
  if(i==1) {
    #using NA at first line
    DT[i,4] <- NA
  } else {
    #D = C + BPreviousRow
    DT[i,4] <- DT[i,3] + DT[(i-1), 2]   
  }
} 
```

使用 for，您甚至可以使用此新列的行的先前值 `DT[(i-1), 4]`

# shell - How do I close background jobs when I quit iTerm2?

> ID：14689425
> 
> 赞同：4
> 
> 时间：2013-02-04T14:59:53.600
> 
> 标签：shell, iterm

OS X's Terminal application closes background jobs when you quit the application. How do I achieve this behavior in iTerm2?

Thanks a lot!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:38:59.157

[这个简短的屏幕共享](http://youtu.be/pRua1Iwnjag)演示了 iTerm2在关闭产生后台进程的选项卡时*确实会*杀死后台进程。什么流程留给您？

# unity3d - renderWithShader texture passing

> ID：14689429
> 
> 赞同：2
> 
> 时间：2013-02-04T15:00:20.577
> 
> 标签：unity3d

i wish to create a nightvision effect with a shader for my camera. I have written the shader for a normal material, in which i mass a noise mask and a texture (in my camera example, the texture should be the image i get from the camera itself).

I have some questions: first, i see that i can pass a shader to the camera using Camera.renderWithShader. The thing is that i don't know how to link the image from what i see through my camera and my shader. I would also like to put the noise mask to my shader and don't know how to pass it. This is different then having a material to which you could link the textures.

I found some code on the net how to link the shader and the camera.. the thing is that i don't know if it's good due to the fact that i can't see the final nightvision effect because i don't know how to pass textures to the camera. I can see the view altering but don't know if it's right.

```
void Start () {
     nightVisionShader = Shader.Find("Custom/nightvisionShader");
        Camera.mainCamera.RenderWithShader(nightVisionShader,"");
    }

void OnRenderImage (RenderTexture source, RenderTexture destination) 

    {
       RenderTexture sceneNormals = RenderTexture.GetTemporary (source.width, source.height, 24, RenderTextureFormat.ARGB32);
       transform.camera.targetTexture = sceneNormals;
       transform.camera.RenderWithShader(nightVisionShader, "");

        transform.camera.targetTexture = null;
            // display contents in game view
         Graphics.Blit (sceneNormals, destination);
         RenderTexture.ReleaseTemporary (sceneNormals);              

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:18:03.923

找到了怎么做！

```
void OnRenderImage (RenderTexture source,  RenderTexture destination) {     

    overlayMaterial.SetTexture ("_MainTex", Resources.Load("nightvision/") as Texture2D);
    overlayMaterial.SetTexture ("_noiseTex", Resources.Load("nightvision/noise_tex6") as Texture2D);
    overlayMaterial.SetTexture ("_maskTex", Resources.Load("nightvision/binoculars_mask") as Texture2D);    
    overlayMaterial.SetFloat ("_elapsedTime", Time.time);   
    Graphics.Blit (source, destination, overlayMaterial, 0);
} 
```

# iphone - 更改 UI 标签栏显示颜色

> ID：14689436
> 
> 赞同：1
> 
> 时间：2013-02-04T15:00:51.577
> 
> 标签：iphone, ios, uitabbarcontroller

我是ios新手。我想在标签栏中制作应用程序

现在，此屏幕截图中的标签栏颜色。

![](../Images/bcfd97d2717beaa5dbe3ad991f611d18.png)

我在 iphone 中想要的 UI 是这张图片
![](../Images/1f2d33ff9ae17ef955216de737a4bb61.png)

在标签栏的每个图标中，我使用了黑色图像

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:07:25.520

您必须`UITabBarItems`使用以下内容分别设置每个：

```
UITabBarItem *tabBarItem1 = [[UITabBarItem alloc] initWithTitle:@"Title1" image:[UIImage imageNamed:@"image1.png"] tag:1];
[tabBarItem1 setFinishedSelectedImage:nil withFinishedUnselectedImage:[UIImage imageNamed:@"image1.png"]];
[[myTabBarController.viewControllers objectAtIndex:0] setTabBarItem:tabBarItem1]; 
```

对于您的每个视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:12:04.410

在`didFinishLaunchingWithOptions`应用程序委托的方法中，您需要添加一些这样的代码。

```
//Get the Tab Bar
UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;
tabBarController.delegate = self;
UITabBar *tabBar = tabBarController.tabBar;

//You may want to set the background of the tab bar (optional)
[tabBar setBackgroundImage:[UIImage imageNamed:@"CustomTabBar.png"]];

//You will need to repeat this code for each tab bar item
UITabBarItem *tabBarItem3 = [tabBar.items objectAtIndex:2];
tabBarItem3.title = @"Settings";
tabBarItem3.image = nil;
[tabBarItem3 setFinishedSelectedImage:[UIImage imageNamed:@"settings-button-selected.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"settings-button.png"]]; 
```

不要忘记为视网膜支持制作@2x 图像。

您还可以更改每个 tabBarItem 的其他设置 - 查看[文档](http://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/TabBarControllers.html#//apple_ref/doc/uid/TP40011313-CH3-SW28)以了解更多信息。

# html - Editing a basic contact form using hre

> ID：14689437
> 
> 赞同：0
> 
> 时间：2013-02-04T15:00:51.153
> 
> 标签：html, contact-form

I have this template where I customized whats on it BUT i got stuck on the contact page where the contact form upon clicking the button clear OR send button nothing happens. I really don't know much about most of the stuff ALL are from research through net but can't get to fix this. Am I missing something here?

Questions I have in mind: 1\. Do I need to put something or create in "action" 2\. What do I have to put in "href" to clear or send the form to my email?

Or you have a better idea.

```
<h2 class="p0">Contact Form</h2>
          <form id="contact-form" action="#" method="post" enctype="multipart/form-data">
            <fieldset>
              <label><span class="text-form">Name:</span>
                <input name="p1" type="text" />
              </label>
              <label><span class="text-form">Email:</span>
                <input name="p2" type="text" />
              </label>
              <div class="wrapper">
                <div class="text-form">Message:</div>
                <textarea></textarea>
              </div>
              <div class="buttons"> <a class="button-2" href="#">Clear</a> <a class="button-2" href="#">Send</a> </div>
            </fieldset>
          </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:15:09.597

使用真正的按钮，不要只给它们一个名为`buttons`.

在`action`中，记下将处理此表单的服务器文件的名称，例如`action="contact_form.php"`. 如果您想发送电子邮件，请放下`action="MAILTO:someone@example.com"`。

```
<h2 class="p0">Contact Form</h2>

<form id="contact-form" action="MAILTO:someone@example.com" method="post" enctype="multipart/form-data">
    <fieldset>
        <label><span class="text-form">Name:</span>

            <input name="name" type="text" />
        </label>
        <label><span class="text-form">Email:</span>

            <input name="email" type="text" />
        </label>
        <div class="wrapper">
            <div class="text-form">Message:</div>
            <textarea name="message"></textarea>
        </div>
        <div class="buttons">
            <input type="button" value="Clear" onclick="document.getElementById('contact-form').reset()"
            />
            <input type="submit" value="Send" />
        </div>
    </fieldset>
</form> 
```

# r - List shp files fails with large number of files

> ID：14689441
> 
> 赞同：0
> 
> 时间：2013-02-04T15:00:58.640
> 
> 标签：r, loading, shapefile

I have been using the following to important .shp files into R fine for ages:

```
require(maptools)
require(rgeos)

shp <- lapply(list.files(pattern="*.shp"), readShapePoly) 
```

If I am loading a handful of files it works fine. However, I am trying to load in ~1000 files and I just get the (common) error message:

```
Error in getinfo.shape(filen) : Error opening SHP file 
```

I have been searching online but have not been able to find a solution. The working directory is set correctly, the accompanying .dbf .shx and .prj files are present for each shapefile. Also,

```
list.files(getwd(),pattern="shp") 
```

does return every file. So I'm a bit confused, am I missing something obvious?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:05:34.737

要么改变你`lapply`的循环或使用[`options(error=recover)`技巧](https://stackoverflow.com/questions/4442518/general-suggestions-for-debugging-r)来找出哪个文件给你带来麻烦。

不幸的是，R shapefile 函数往往对文件扩展名很挑剔。确保共同构成 shapefile 的所有不同文件的所有大小写一致。

如果你认为它是一个特定的文件，你可以使用`try`or`tryCatch`来捕捉错误。

# sql-server-2008 - BI Project Planning Cognos/SQL Server

> ID：14689442
> 
> 赞同：1
> 
> 时间：2013-02-04T15:01:03.177
> 
> 标签：sql-server-2008, business-intelligence, etl, project-planning, cognos

I have a **BI project** to be carried out using `SQL Server 2008 and Cognos 8`. Client seems to be using legendary adhoc/home grown applications. Where as some reports have been using an older version of Cognos. ***Client has no plan or what so ever*** as of now but in a real hurry to migrate all older version of Cognos reports to Cognos 8 (which they consider as the brand new version). Going forward Client also want to make reports available on `Sharepoint` with presently migrating .Net platform.

Given past exposure, I think, looking at all the underlying data/data sources required by the business users/their reports would be a better place to start, then followed by ETL, Data Warehousing to settle Database layer. That will give full performance management control over to BI platform. Where we can proceed with a prototype engaging meta data and presentation layers for a given business user object/department.

This is more of a brain-storming question that highly appreciates relevant ideas in terms of:

*   Better approach/better practice for planning a BI project on SQL Server/Cognos

*   Does it make sense to migrate old reports to new version of Cognos using IT resources or start on data sourcing/massaging with requirements gathering from business users? (as client is *thinking out loud* to integrate all other departments data/reporting into this BI platform in the future.) If latter is more inlined a successful project planning, how to convince the client?

*   Or should I share with the client that SQL Server 2008, specially 2012 MS BI is competent in BI, so wouldn't it be a huge cost cutting to use SQL Server/MS BI package totally instaed of mixing it with Cognos? (Client had not disclose any reason why they want to use Cognos at all)

*   Anyone who had used `Cognos/SQL Server` combo for BI, please provide with suggestions/tips/watch-outs/software-barriers(limits)/tips../*2cents* :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:17:12.747

似乎是一个相当主观的问题，但这里有一些建议。对它们都持保留态度，因为您的情况和客户情况并非如此，并且无法在此处完全描述。

需求驱动技术选择，而不是相反。考虑可扩展性要求、可维护性（行业专业可用性和费率）等。这些是您的“能力”，请仔细考虑它们，并在需要时要求业务部门进行澄清。考虑额外或隐藏的成本/节省。SQL Server 附带分析服务、集成服务，并与 SharePoint 很好地集成。

从小处着手，然后搬出去。敏捷方法可以创造奇迹，尽管它有自己的缺陷。寻找项目发起人，即业务中可以及时满足其需求的人。提供快速、有能力和称职的解决方案。其他业务部门和用户会注意到，与仅仅试图用图表和承诺说服人们相比，你会更快、更容易地获得支持。尽快开始创造价值。

您真的不想一口气进行大规模升级。这是极其困难的，而且很可能以失败告终，至少在某种形式上是这样。查看大型公司进行的一些 SAP 实施以及随之而来的诉讼和损失（仅作为示例，不是为了获得 SAP）。

不要害怕一个多阶段的项目。在一年之内，当业务爱你的时候，从有点脱节的单个项目（这些项目都是建立在 SQL Server、SSIS、SSRS 和称职的、现代的设计之上）转移到一个统一的整体，比从多种语言、平台、架构师转移更容易以及随之而来的一系列数据问题。

# c# - 在随机数组中搜索特定值

> ID：14689446
> 
> 赞同：3
> 
> 时间：2013-02-04T15:01:21.210
> 
> 标签：c#, arrays, for-loop

嗨，我被告知要“编写代码，通过从末尾开始向后遍历数组并将搜索值与数组中的值。搜索后，如果找到该值，则打印“已找到该值”，否则打印“未找到该值”。

我了解随机数组的创建，但我被困在如何通过它向后工作并找到特定值。

这是到目前为止的代码

```
class Program
{
    static void Main(string[] args)
    {
        int[] myArray = new int[10];
        Random rand = new Random();

        for (int i = 0; i < myArray.Length; i++)
        {
            myArray[i] = rand.Next(19);
        }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:03:02.390

要向后退，只需使用带有迭代器的 for 循环 to `i--`。

```
for (int i = myArray.Length - 1; i >= 0; i---)
{
    if(// Check if myArray[i] equals the value to find)
    {
         // If it is the case, you can get out from the for loop with break
         break;
    }
} 
```

`for`循环分为 4 个部分：

```
for (initializer; condition; iterator)
    body 
```

1.  在`initializer`循环中的第一次迭代之前执行（这里你想从数组中的最后一个索引开始`myArray.Length - 1`：）
2.  对`condition`每次迭代进行评估，如果此条件为真，则进入 3（您想留在`for`循环中 while `i >= 0`），否则退出`for`循环
3.  `body`为满足条件的每次迭代执行
4.  被`iterator`执行（在这里你想向后退，你想减少`i`）
5.  然后它回到2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:03:25.313

使用从最大到最小索引开始的循环。

```
 bool found = false;
 for (int i = myArray.Length - 1; i >=0 ; i--) 
     if(myArray[i] == 5)
        found = true;
 if(found)
 {

 }
 else
 {

 } 
```

# javascript - I write this code sample code to hide 2 rows but it did not work

> ID：14689449
> 
> 赞同：-2
> 
> 时间：2013-02-04T15:01:25.650
> 
> 标签：javascript, html, css

I am trying to hide two rows, `<tr><td>line 1</td></tr>` and `<tr><td>line 2</td></tr>`, by wrapping them in a div with `display:none` set, but these rows are not hidden. Why?

```
<script type="text/javascript">
  function toggle() {
    var ele = document.getElementById("toggleText");
    var text = document.getElementById("displayText");
    if(ele.style.display == "block") {
      ele.style.display = "none";
      text.innerHTML = "Show";
    } else {
      ele.style.display = "block";
      text.innerHTML = "Hide";
    }
  } 
</script>

<table>
  <tr>
    <td>
      <a id="displayText" href="javascript:toggle();">Show</a>
    </td>
  </tr>

  <div id="toggleText" style="display: none;">
    <tr><td>line 1</td></tr>
    <tr><td>line 2</td></tr>
  </div>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:09:39.680

您的 HTML 标记无效，您不能将 div 作为表格中的子元素！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:13:49.410

当您想将 div 放在表格中时，它需要位于表格单元格中，即在 td 中。请注意，我按类名选择两个 div，因为 id 是唯一的。

```
<script language="javascript"> 
 function toggle() {
    var ele = document.getElementsByClassName("toggleText");
    var text = document.getElementById("displayText");
    if(ele[0].style.display == "block") {
        ele[0].style.display = "none";
        ele[1].style.display = "none";
        text.innerHTML = "Show";
    }
    else {
        ele[0].style.display = "block";
        ele[1].style.display = "block";
        text.innerHTML = "Hide";
    }
} 
</script>
<table>

    <tr><td>
    <a id="displayText" href="javascript:toggle();">Show</a>
    </td></tr>

    <tr><td><div class="toggleText">line 1</div></td></tr>
    <tr><td><div class="toggleText">line 2</div></td></tr>

</table> 
```

# php - 如何处理序列化 - Campaign Monitor API

> ID：14689451
> 
> 赞同：0
> 
> 时间：2013-02-04T15:01:30.073
> 
> 标签：php, serialization, http-post

我正在使用 Campaign Monitor API 发送电子邮件。API 允许通过名为 create_from_template() 的方法创建模板化电子邮件。正如[文档所说](http://www.campaignmonitor.com/api/campaigns/)，我需要添加一些格式化参数。以下是活动监视器 create_from_template() 方法实现的内容：

```
/**
     * Creates a new campaign from a template based on the info provided.
     * At least on of the ListIDs and Segments parameters must be provided
     * @param string $client_id The client to create the campaign for
     * @param array $campaign_info The campaign information to use during creation.
     *     This array should be of the form
     *     array(
     *         'Subject' => string required The campaign subject
     *         'Name' => string required The campaign name
     *         'FromName' => string required The From name for the campaign
     *         'FromEmail' => string required The From address for the campaign
     *         'ReplyTo' => string required The Reply-To address for the campaign
     *         'ListIDs' => array<string> optional An array of list ids to send the campaign to
     *         'SegmentIDs' => array<string> optional An array of segment ids to send the campaign to
     *         'TemplateID' => string required The ID of the template to use
     *         'TemplateContent' => array required The content which will be used to fill the editable areas of the template
     *     )
     * @access public
     * @return CS_REST_Wrapper_Result A successful response will be the ID of the newly created campaign
     */
    function create_from_template($client_id, $campaign_info)
    {
        return $this->post_request($this->_base_route . 'campaigns/' . $client_id . '/fromtemplate.json', $campaign_info);
    } 
```

因此我给出了 $campaign_info 参数

```
 $list = array($list_id);
        $data = array(
            'Name' => $name_string,
            'Subject' => $subject_string,
            'FromName' => $some_name,
            'FromEmail' => "contact@email.org",
            'ReplyTo' => "contact@email.org",
            'ListIDs' => $list_id,
            'SegmentIDs' => array(),
            'TemplateID' => 'a6dd1168417a6d7d7f94da70c3cafe15'
            'TemplateContent' => array(
                                       'Singlelines' => array('Content' => $a_string ,
                                                              'Href' =>  $a_href
                                                              ),
                                        'Multilines' => array('Content' => $content
                                                             ),
                                        'Images' => array('Content' => $some_url,
                                                          'Href' => $some_href,
                                                         )

                                      )
                  ); 
```

但是当向活动的监控服务器发起我的 api 发布请求时，我不断收到一条消息：

```
object(CS_REST_Wrapper_Result)#32 (2) { ["response"]=> object(stdClass)#29 (2) { ["Code"]=> int(400) ["Message"]=> string(110) "Failed to deserialize your request. Please check the documentation and try again. Fields in error: campaign" } ["http_status_code"]=> int(400) } 
```

有谁知道它可能来自哪里？

编辑：如果我传递这些参数

```
$template_content = array(
  'Singlelines' => array(),
  'Multilines' => array(),
  'Images' => array(),
  'Repeaters' => array()
); 
```

然后在数组`$data` `'TemplateContent' => $template_content`中，一切正常，但是当我添加一些参数时，它就不起作用了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:15:27.523

G'day user1611830,

根据[github repo 中的示例](https://github.com/campaignmonitor/createsend-php/blob/master/samples/campaign/create_from_template.php)，Singlelines、Multilines 和 Images 中的每一个都需要`array`是`arrays`.

最好`array`为中继器包括一个空的。

所以你可能正在寻找这样的东西（如果我遗漏了任何括号，请道歉，但只要你将单行、多行和图像中的每一个包装在另一个中，`array()`你就应该是对的：

```
$template_content = array(
    'Singlelines' => array(
        array(
            'Content' => $a_string,
            'Href' =>  $a_href
        )
    ),
    'Multilines' => array(
        array('Content' => $content)
     ),
    'Images' => array(
        array(
            'Content' => $some_url,
            'Href' => $some_href,
        )
    ),
    'Repeaters' => array()
); 
```

# macos - 我们可以使用 HTTPS 网页中的 javascript 从/向 localsorage 写入/读取数据吗？

> ID：14689452
> 
> 赞同：0
> 
> 时间：2013-02-04T15:01:31.223
> 
> 标签：macos, https, safari, local-storage

当我们打开 HTTPS web pahe 时，我需要从 localstorage 写入和读取数据。有可能还是Safari afari sequrity dosent允许它？允许它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:04:24.973

是的。

无论用于加载页面的协议如何，本地存储都可以工作。

请注意，由于同源策略，HTTPS 和非 HTTPS 页面不能相互交互。

# java - Thread.interrupt 后如何清理资源、连接、挂起？

> ID：14689454
> 
> 赞同：1
> 
> 时间：2013-02-04T15:01:36.610
> 
> 标签：java

有人可以解释一下如何在执行 thread.interrupt 后清理资源吗？

一个。在读取/写入文件期间 I/O 长时间挂起 b. 通过 hibernate c 执行查询时，数据库查询需要更多时间。调用了第三方API，很长时间没有收到响应。d。应清理任何其他资源。

谢谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:02:40.433

听起来像是用于`try`//块`catch`。`finally`记录您的句柄等并在`finally`块中关闭。请注意，如果有可能，您的句柄引用不为空。请参阅[此处](http://docs.oracle.com/javase/tutorial/essential/exceptions/finally.html)了解更多信息。请注意，这并不特定于中断后的清除。您应该在所有情况下正确处理资源清理。

如果您使用的是 Java 7，请查看[try-with-resources 构造](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)，它是上述更简洁的形式。

> try-with-resources 语句是声明一个或多个资源的 try 语句。资源是程序完成后必须关闭的对象。try-with-resources 语句确保每个资源在语句结束时关闭。任何实现 java.lang.AutoCloseable 的对象，包括所有实现 java.io.Closeable 的对象，都可以用作资源。

# python - Python openCV 2.4.3 cv2.SolvePnP 错误

> ID：14689455
> 
> 赞同：2
> 
> 时间：2013-02-04T15:01:36.147
> 
> 标签：python, opencv, numpy

我是 Python、OpenCV 和 Numpy 的新手。我一直在尝试实现 C++ 代码的 python 版本，该代码确定相机与已知标记的相对姿势。该代码使用 cv2.SolvePnP 函数，我一直在机智地运行该函数。我在网上搜索过，但除了这个功能类似的混乱之外，什么也没找到。似乎无论我以什么形式传递我的数据，功能都不愉快。我一直在使用的测试用例是：

```
## target image points

tPoints = np.zeros((4,2),dtype=np.float64)
tPoints[0,0] = 384.3331
tPoints[0,1] = 162.23618
tPoints[1,0] = 385.27521
tPoints[1,1] = 135.21503
tPoints[2,0] = 409.36746
tPoints[2,1] = 165.64435

## actual marker point set

mPoints = np.zeros((4,3),dtype=np.float64)
mPoints[0,0] = -88.0
mPoints[0,1] = 88.0
mPoints[0,2] = 0
mPoints[1,0] = -88.0
mPoints[1,1] = -88.0
mPoints[1,2] = 0
mPoints[2,0] = 88.0
mPoints[2,1] = -88.0
mPoints[2,2] = 0
mPoints[3,0] = 88.0
mPoints[3,1] = 88.0
mPoints[3,2] = 0

camMatrix = np.zeros((3,3),dtype=np.float64 )
camMatrix[0][0] = 519.0
camMatrix[0][2] = 320.0
camMatrix[1][1] = 522.0
camMatrix[1][2] = 240.0
camMatrix[2][2] = 1.0

retval, rvec, tvec = cv2.solvePnP(objectPoints = tPoints, imagePoints = mPoints, cameraMatrix = camMatrix, distCoeffs = None) 
```

返回的错误是：

> cv2.error: C:\slave\WinInstallerMegaPack\src\opencv\modules\calib3d\src\solvepnp.cpp:52: >error: (-215) npoints >= 0 && npoints == std::max(ipoints.checkVector (2, CV_32F), >ipoints.checkVector(2, CV_64F))

帮助执行此操作，以及有关我哪里出错的信息将不胜感激。还有很多东西要学！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:22:27.170

您给出的参数的形状`solvePnP`不正确。 `objectPoints`应该是 Nx3，并且`imagePoints`应该是 Nx2。如果我在您的示例中切换了这些参数的分配方式`tPoints`和`mPoints`分配方式，则不会引发异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-30T14:12:23.950

如果您尝试将数组切片作为输入，这也会导致问题。取自 [这里](http://answers.opencv.org/question/1073/what-format-does-cv2solvepnp-use-for-points-in-python/?answer=56353#post-id-56353)

```
World = array([[-0.5, -0.5,  3\. ],
               [ 0.5, -0.5,  3\. ],
               [ 0.5,  0.5,  3\. ],
               [-0.5,  0\. ,  3\. ]])
keyPoints = array([[ 279.03286469,  139.80463604,    1\.        ],
                     [ 465.40665724,  136.70519839,    1\.        ],
                     [ 465.40665724,  325.1505936 ,    1\.        ],
                     [ 279.03286469,  230.927896  ,    1\.        ]])

objectPoints = World
imagePoints = keyPoints[:,:2] # <--- THIS SLICE IS A PROBLEM CAUSER!!!
cv2.solvePnP(objectPoints, imagePoints, np.eye(3), np.zeros(5)) 
```

# jquery - 滑动以返回 jquery

> ID：14689462
> 
> 赞同：1
> 
> 时间：2013-02-04T15:02:16.190
> 
> 标签：jquery, html, ios, jquery-mobile

使用 jquery mobile，我将如何启用向右滑动并返回主页面的功能？就像放置一个后退按钮启用并自动返回上一页一样，我希望向右滑动。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T15:42:09.883

你必须绑定到swiperight

```
$(document).bind('swiperight', function () {
    history.back();
}); 
```

我创建了一个 Fiddle 来向您展示您必须做什么。看这里，[http://jsfiddle.net/wumm/WHT69/](http://jsfiddle.net/wumm/WHT69/)！

# asp.net-mvc - ASP.NET MVC URL 路由或 URL 重写

> ID：14689464
> 
> 赞同：1
> 
> 时间：2013-02-04T15:02:17.407
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我是 ASP.NET MVC 的新手，并试图确定以下任务的最佳方法。我有以下从 Web 窗体应用程序继承的 URL，我想通过在 MVC 中返回以下路径来继续运行：

1.  [http://example.com/Default.aspx](http://example.com/Default.aspx) -> [http://example.com/](http://example.com/)
2.  [http://example.com/about.aspx](http://example.com/about.aspx) -> [http://example.com/about](http://example.com/about)
3.  [http://example.com/keyword1-keyword2-contact.aspx](http://example.com/keyword1-keyword2-contact.aspx) -> [http://example.com/contact](http://example.com/contact)

我应该创建一个新的 Map Route 还是使用 URL Rewrite 模块？请举例说明您提倡的方法。该应用程序托管在 IIS 7.5 中，并使用 ASP.NET 4.5 和 MVC 4.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:13:31.517

我也是新手，但我会尽力帮助你。

在 App_Start/RouteConfig.cs

**1**

```
routes.MapRoute(
   null,
   "Default.aspx",
   defaults: new { controller = "Default", action = "Index"},
); 
```

**2**

```
routes.MapRoute(
   null,
   "about.aspx",
   defaults: new { controller = "Default", action = "About"},
); 
```

**3**

```
routes.MapRoute(
   null,
   "{keyword1}-{keyword2}-contact.aspx",
   defaults: new { controller = "Default", action = "Contact"},
); 
```

# emacs - 打开 org-protocol 时如何将焦点放在 emacsclient 窗口？

> ID：14689471
> 
> 赞同：3
> 
> 时间：2013-02-04T15:02:29.187
> 
> 标签：emacs, org-mode

我有`(require 'org-protocol)`.emacs。现在在 bash 中：

```
emacsclient org-protocol://capture://something 
```

我得到了我想要的，除了 emacs 窗口没有聚焦。为了使其集中，我可以例如`-c`给`emacsclient`. 有没有办法（也许是`-e`开关）可以做到这一点`-c`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:26:42.683

找到此代码来修复它：

```
(defadvice raise-frame (after make-it-work (&optional frame) activate)
    "Work around some bug? in raise-frame/Emacs/GTK/Metacity/something.
     Katsumi Yamaoka posted this in 
     http://article.gmane.org/gmane.emacs.devel:39702"
     (call-process
     "wmctrl" nil nil nil "-s" "1")
     (call-process
     "wmctrl" nil nil nil "-i" "-R"
     (frame-parameter (or frame (selected-frame)) 'outer-window-id)))
(add-hook 'server-switch-hook 'raise-frame) 
```

Apparenty`raise-frame`仍然存在错误，因此`wmctrl`被使用。

# ruby-on-rails-3 - 渲染集合的部分

> ID：14689472
> 
> 赞同：0
> 
> 时间：2013-02-04T15:02:29.477
> 
> 标签：ruby-on-rails-3, partials

渲染部分函数是否采用任何类型的集合？我尝试传入一个 Set (@dogs)，但它似乎不起作用：

```
<%= render(:partial => "dog", :collection => @dogs, :as => :dog) %> 
```

[我尝试在文档http://guides.rubyonrails.org/layouts_and_rendering.html](http://guides.rubyonrails.org/layouts_and_rendering.html)上查找它，但它似乎并没有暗示对集合有任何限制......我错过了什么或另一种方式来找出答案？

谢谢。

PS 但是，当我尝试将非常集合转换为数组时，它起作用了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:43:13.880

它不适用于集合，因为该[`PartialRenderer#collection`](https://github.com/rails/rails/blob/3-2-stable/actionpack/lib/action_view/renderer/partial_renderer.rb#L318)方法尝试使用以下方法将集合强制转换为数组`to_ary`：

```
def collection
  if @options.key?(:collection)
    collection = @options[:collection]
    collection.respond_to?(:to_ary) ? collection.to_ary : []
  end
end 
```

但是`Set`s 不实现`to_ary`，因此，正如您所发现的，您必须像这样传递集合：

```
:collection => @dogs.to_a 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T15:31:57.280

正确的方法是将集合传递给部分是

`<%= render partial: "cat", locals: {cats: @cats} %>`

# teamcity - 通过 HTTP 触发时，是否可以强制 TeamCity 构建重建依赖项？

> ID：14689474
> 
> 赞同：1
> 
> 时间：2013-02-04T15:02:33.253
> 
> 标签：teamcity, teamcity-7.1

根据 TeamCity 文档，我可以看到可以通过 http 触发构建：

[http://confluence.jetbrains.com/display/TCD7/Accessing+Server+by+HTTP](http://confluence.jetbrains.com/display/TCD7/Accessing+Server+by+HTTP)

例如，

```
http://testuser:testpassword@teamcity.jetbrains.com/httpAuth/action.html?add2Queue=bt10 
```

但是，我需要强制构建在添加到队列时也重建某些依赖项。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T19:06:37.050

如果将rebuildDependencies=true 添加到查询字符串，则可以强制TeamCity 重建所有依赖项：

```
http://testuser:testpassword@teamcity.jetbrains.com/httpAuth/action.html?add2Queue=bt10&rebuildDependencies=true 
```

也可以部分重建依赖关系，但这并不容易，因为您需要以某种方式检索一些内部 id，但这些 id 通常不会显示在页面上的任何位置。

# javascript - 选择一个单选按钮后如何隐藏/禁用我的单选按钮

> ID：14689478
> 
> 赞同：1
> 
> 时间：2013-02-04T15:02:41.430
> 
> 标签：javascript, jquery, knockout.js

一旦选择了单选按钮，我想禁用或隐藏单选按钮 - 这样用户就无法比较价格，因为单选按钮链接到价格并在选中单选按钮后显示价格。我正在使用 knockout.js 链接选定的单选按钮并显示价格。并在 jquery 上找到了一种隐藏未选择单选按钮的方法，但我无法将两者合并在一起。

请看下面的代码：

```
<div class="stepTwo">
    <div class="middleTitle">
        <p>
        </p>
    </div>
    <div data-bind="with: bin2ViewModel">
        <div class="divRadiobtns" data-bind="foreach: availableGroups">
            <input type="radio" id="makeOpacityHide" class="radioOptions" name="retailerGroup"
                data-bind="checked: $parent.selectedGroupOption, value: retailerproductId" /><span
                    class="radioOptionsA" data-bind="css: { 'radioOptionsA-checked': $parent.selectedGroupOption()==retailerproductId() }">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
        </div>
        <div data-bind="with: selectedRetailerGroup">
            <span class="actualPrice" data-bind="text: price" />
        </div>
        <div data-bind="with: selectedRetailerGroup">
            <input type="hidden" name="retailerProductId" id="retailerProductId" class="retailerProductId"
                data-bind="value: retailerproductId" />
        </div>
    </div>
</div>
<script type="text/javascript">
//<![CDATA[
    //jquery
    $(document).ready(function () {
        $("input[name$='retailerGroup']").click(function () {
            var test = $(this).val();

            $("input.radioOptionsA").hide();

        });
    });

    //knockout
    var Bin2ViewModel = function () {
        var self = this;
        this.selectedRetailerGroup = ko.observable();
        this.selectedGroupOption = ko.observable();
        this.selectedGroupOption.subscribe(function (newVal) {
            var items = $.grep(self.availableGroups(), function (item) { return item.retailerproductId() == newVal; });
            self.selectedRetailerGroup(items[0]);
        });
        this.selectedGroup = ko.observable();
        this.availableGroups = ko.observableArray(
            [new RetailerViewModel("21290", "£1.80"),
                new RetailerViewModel("302852", "£2.55"),
                new RetailerViewModel("422974", "£2.55")
            ]);
    };

    var RetailerViewModel = function (retailerproductId, price) {
        this.retailerproductId = ko.observable(retailerproductId);
        this.price = ko.observable(price);
    };
    ko.applyBindings({ bin2ViewModel: ko.observable(new Bin2ViewModel()) });
//]]>
</script> 
```

有谁知道让它们一起工作的方法，或者有没有一种很好的方法可以在淘汰赛中隐藏单选按钮？

[http://jsfiddle.net/afnguyen/MMqzv/3/](http://jsfiddle.net/afnguyen/MMqzv/3/)

我还在 jsfiddle 中附加了 jquery - 这显示了我想要的，因为选定的单选按钮类名称发生了变化，因此不应该隐藏：

[http://jsfiddle.net/afnguyen/5mmt2/1/](http://jsfiddle.net/afnguyen/5mmt2/1/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:19:43.910

如果你想拥有一个纯粹的 Kncokout 解决方案，你可以在[enable binding](http://knockoutjs.com/documentation/enable-binding.html)的帮助下达到同样的效果：

因此，您希望在没有选择任何一个按钮时启用该按钮，这将转换以下绑定：

```
data-bind="enable: !$parent.selectedGroupOption()" 
```

因此，您的代码的完整示例：

```
<input type="radio" id="makeOpacityHide" 
       class="radioOptions" name="retailerGroup"
       data-bind="checked: $parent.selectedGroupOption, 
                  value: retailerproductId, 
                  enable: !$parent.selectedGroupOption()" /> 
```

演示[JSFiddle](http://jsfiddle.net/jT2fU/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:44:20.803

尝试这个。您可以将 css 属性“禁用”更改为 =“禁用”：

```
 $(".class").attr(
        'disabled', 'disabled'
    ); 
```

# javascript - 为什么我的 Magento 商店中不能合并 CSS 和 Javascript？

> ID：14689479
> 
> 赞同：1
> 
> 时间：2013-02-04T15:02:42.433
> 
> 标签：javascript, css, magento, merge

我的 Magento 商店加载速度非常慢，我决定修复一些问题并使其加载速度更快。我通读了一些关于该主题的指南，发现了多个可以帮助我解决速度问题的插件。但是每次我尝试安装其中一个插件，例如 Fooman Speedster 和 GTmetrix 的 GTspeed，并尝试合并和/或合并 JS 和 CSS 文件时，商店的前端和后端都会变得一团糟。CSS 和 Javascript 文件不再起作用。布局消失了，下拉菜单也不显示。

我彻底（以我的拙见）搜索了解决我的问题的提示，但我找不到一个清楚地解释应该做什么的提示。我希望有人能给我一个答案，因为现在的加载时间不到 5 秒，这是一个地狱般的加载时间！

我要提前感谢大家的努力！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-28T14:21:32.737

I had the same problem. I saw in the chrome inspector, when looking at the large concatenated css file that there were red dots from one of the css files. It turned out the file encoding was wrong. I converted the file in sublime text to save the encoding as UTF-8 by going into File...Save with encoding..UTF-8\. The encoding before was UTF-16 LE with BOM. Once I changed it to UTF-8 the css was displaying properly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:19:00.293

如果遇到问题，可能会在 firebug 控制台或 Magento 日志中显示一些错误消息。检查它是否有助于解决此问题。

如果你想要一个真正闪电般的速度，你需要安装类似 Varnish 缓存服务器端的东西来获得极快的速度。

问候，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:08:35.050

如果需要，我认为您正在使用的插件已经合并了 JS 和 CSS 文件。

您也可以尝试为 Apache 安装 Google PageSpeed 插件 - 尚未尝试过，因此请在测试环境中进行。

尝试查看您的数据库，看看您是否有很长的查询，可以通过添加索引等来优化......

尝试为图像和静态文件（如 JS 和 CSS）使用 CDN，以便它们从不同的服务器并行加载。

Magento 的加速插件非常不稳定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T15:15:28.170

这里可能会发生一些不同的事情。

我会检查你没有冲突。例如，如果两个不同的模块在不同的时间包含 jQuery，这可能会导致冲突，而这种冲突在您合并 Javascript 文件之前通常不会出现。

我强烈建议不要使用内置的合并工具。如果 Fooman 或 GTSpeed 已启用，我不确定是否会禁用它们，但我建议在 System -> Config 菜单中禁用它们。我很肯定这两个模块不尊重该设置，但我不确定如果两者都启用，Magento 会做什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-31T13:38:33.557

我在使用 CSS 合并时遇到了设计中断问题。实际原因是我的一个 CSS 文件中使用了“ **import** ”方法。

检查您的任何组合 CSS 文件是否使用了“ **import** ”方法。这可能会导致设计中断，因为当您组合它们时，导入的 CSS 将不起作用。例如：

```
@import url("style.css") 
```

您可以创建一个单独的 CSS 文件，并在该单独的 CSS 文件中记下所有导入的 CSS 文件代码，而不是使用导入。

或者，您可以使用“链接”HTML 标记包含文件，如下所示：

```
<link rel="style.css" href="style.css" type="text/css"> 
```

> 在 Magento 中，您可以包含来自 *app/design/frontend/YOUR_PACKAGE/YOUR_THEME/layout/local.xml的 CSS 文件*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-13T10:51:12.173

也许您的 javascript 和 css 行没有正确关闭。当您在未合并和压缩的情况下运行脚本时，浏览器会在 js 语句的末尾使用结束分号以及您在编写代码时可能忘记的一些其他语法来解释代码，但如果代码被合并和压缩，浏览器会崩溃并且您的 magento 回退到默认或基本文件。

# rest - 访问 Alfresco REST API

> ID：14689480
> 
> 赞同：3
> 
> 时间：2013-02-04T15:02:45.473
> 
> 标签：rest, alfresco

Alfresco REST API 是否仅在云中运行时可用，还是我可以将它们与我们的内部安装一起使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T15:09:28.660

Alfresco 公开了许多不同的类似 REST 的 API。您可能指的是最新的[Cloud API](http://wiki.alfresco.com/wiki/Alfresco_API)，它确实仅适用于 Cloud 实例。

还有许多其他的 REST API，它们总是出现在 Alfresco 的每个安装中，包括本地安装。假设您在本地安装了 Alfresco，并且它响应`http://localhost:8080/alfresco`，您可以通过转到“浏览所有可用的 REST API”

```
http://localhost:8080/alfresco/service/index 
```

编辑：您需要管理员权限才能访问该 URL。如果您不是该实例的管理员，您可以通过访问了解您可以访问哪种 API

```
http://cmis.alfresco.com/service/index 
```

凭据将是`admin:admin`. 该实例运行 Alfresco 4.0.0 社区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:24:21.537

是的，您需要管理员权限。默认情况下，安装时会创建一个管理员用户（通常是“管理员”）。请联系服务器的安装者/管理员 (cms.ejiw.com)

或者下载源代码并在 webscripts 中查找 URL 或安装本地社区版本进行开发

# java - 由 Maven Central 建模的所有依赖关系的可视化图表

> ID：14689482
> 
> 赞同：4
> 
> 时间：2013-02-04T15:02:47.607
> 
> 标签：java, maven, maven-central

[以前关于 Stack Overflow](https://stackoverflow.com/q/4084669/521799)的问题表明，可以绘制 Maven 托管项目中所有模块的图表。

我想知道是否有人已经完成并发布了 Maven Central 管理的所有依赖项的权威可视化表示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-03T12:59:49.807

有一个工具可以帮助你实现目标，它叫做**Pom Explorer**。

你可以在这里找到网站：[github.com/learno/pom-explorer](https://github.com/ltearno/pom-explorer)

它是处理 maven 项目图的工具。作为预告片，我可以说在我的机器上它在 4 秒内分析了 4000 个 pom.xml 文件。然后在分析的 pom 图上方提供了许多功能：

*   依赖分析（谁依赖GAV，这个GAV依赖哪个gav，具有传递性），
*   分辨率（pom explorer 知道定义的属性在哪里，它管理依赖项和 bom 导入），
*   操作（您可以使用它来转换您的 pom 图，假设您希望许多项目使用新版本的依赖项），
*   构建（pom explorer 分析你的 pom 图表并知道它们应该按什么顺序构建，然后它会构建所有东西！它甚至可以观察你的项目目录是否有变化），
*   导出（今天有 CSV 和 GRAPHML 导出），
*   可视化（pom explorer 可以向您展示项目图表的交互式 3D 可自定义可视化）。

它现在正在积极开发中，所以不要犹豫尝试它，报告错误并要求有用的功能！文档还没有完成，所以再次不要犹豫！

谢谢

# ruby-on-rails - 取消归档序列化模型时如何跳过载波上传器回调？

> ID：14689484
> 
> 赞同：2
> 
> 时间：2013-02-04T15:02:49.053
> 
> 标签：ruby-on-rails, ruby, upload, carrierwave

我的问题是，当我销毁一些载波模型时：

**附件.rb**

```
mount_uploader :attachment, AttachmentUploader 
```

我将其从数据库中删除并将其序列化到另一个带有修订的表中。

当用户重新确认已删除的附件时，我需要将行插入回来但跳过特定的载波回调（我猜跳过安装上传器）。

下面的代码可以做到这一点，但不幸的是它从模型中删除了所有回调，我需要它们。所以我必须只跳过载波上传器，否则在创建时会抛出“无效附件”异常。

```
 model.class.skip_callbacks do 
    model.save
  end 
```

有可能吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:21:47.063

[您可以使用用 lambda 指定的skip_callback](http://apidock.com/rails/ActiveSupport/Callbacks/ClassMethods/skip_callback)跳过特定的回调。[将它与您试图避免](https://github.com/jnicklas/carrierwave/blob/master/lib/carrierwave/orm/activerecord.rb#L28)的特定回调结合起来，您应该能够实现您正在寻找的控制。

```
class Attachment
  mount_uploader :attachment, AttachmentUploader

  skip_callback :save, :after, :store_attachment!, if: :skip_storage?

  private

  def skip_storage?
    # some skipping logic
  end
end 
```

# php - 画廊在我的 wordpress 网站中不起作用

> ID：14689500
> 
> 赞同：-1
> 
> 时间：2013-02-04T15:03:47.343
> 
> 标签：php, css, wordpress, gallery

我几乎每个画廊插件都有问题......它们在我的主页上不起作用，

查看：

[http://ntm.at/r0sa/?page_id=116](http://ntm.at/r0sa/?page_id=116)

有谁知道该怎么做？我的 php 或 css 文件有问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:24:00.873

我无法对其进行测试，但我认为此错误是因为 jQuery 在页面上包含了两次（一次在本地，一次使用 googleapi）。

在您拥有的标题块中。

```
<script type='text/javascript' src='http://ntm.at/r0sa/wp-includes/js/jquery/jquery.js?ver=1.8.3'></script> 
```

在你的身体块中。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script> 
```

一个需要被移除。

# linux - linux watch 刷新输出的横幅

> ID：14689501
> 
> 赞同：1
> 
> 时间：2013-02-04T15:03:54.470
> 
> 标签：linux, banner, watch

我想运行这样的东西：

```
watch banner `my command` 
```

问题是 - 我的命令只被评估一次，我希望它每次都被评估......

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:09:21.177

避开反引号：

```
watch banner \`my command\` 
```

.

# jquery - 是否可以为 $.data() 使用 JSON 属性？

> ID：14689502
> 
> 赞同：0
> 
> 时间：2013-02-04T15:03:55.973
> 
> 标签：jquery, json

我正在尝试将 JSON 推送到 div 中。

data[i].restaurant.name 理想情况下作为文本进入 div。data[i].restaurant.ambienceRating 理想情况下作为 .data("ambienceRating") 进入 div

无论如何，这就是我想要完成的。

```
$.getJSON('data.json', function(data) {
        console.log(data[0].restaurant.ambienceRating);
        var output="<ul>";
        for (var i=0; i < data.length; i++) {
            output+="<li id=" + i + ">" + data[i].restaurant.name + "</li>";
        }

        output+="</ul>";
        document.getElementById("films").innerHTML=output;

}); 
```

我应该如何以及在哪里推动 ambienceRating 以便以后能够检索它？我尝试放入`$( this ).data("ambienceRating", data[i].restaurant.ambienceRating)`for 循环，但它作为 [Object object] 字符串出现。

编辑： for 循环内的日志记录（ this ）返回 data.json 对象

data[i].restaurant.ambienceRating 为“10”（字符串，NaN）

[http://jsfiddle.net/techii/JtQyr/](http://jsfiddle.net/techii/JtQyr/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:41:19.267

通过向 li 添加数据属性将数据添加到 li。

```
$.getJSON('data.json', function(data) {
        console.log(data[0].restaurant.ambienceRating);
        var output="<ul>";
        for (var i=0; i < data.length; i++) {
            output+="<li data-ambience-rating='" + data[i].restaurant.ambienceRating + "' id='" + i + "'>" + data[i].restaurant.name + "</li>";
        }

        output+="</ul>";
        document.getElementById("films").innerHTML=output;

}); 
```

现在您可以稍后访问它`console.log( $(oneli).data("ambienceRating") )`

# xcode - LLDB的奇怪输出

> ID：14689504
> 
> 赞同：1
> 
> 时间：2013-02-04T15:04:13.117
> 
> 标签：xcode, lldb

`(char *) text = 0x0dbf3c50 "\x91\xde\x91\xf4\x90\xc1\x90\xc0\x91\xff\x91\xfc\x91\xf1\x91\xfa\x90\xcd\x91\xfc\x91\xf1\x90\xcea\x91\xf3\x91\xf4\x90\xc1\x90\xc0\x91\xf9\x90\xcea\x91\xd1\x91\xfa\x91\xf4\x91\xfb\xd1"`
`\xcea`真正的意思是什么 ？
应该是原始的`\xce`。`a`我希望在控制台中打印有效的 C (Obj-C) 文字。如果我将此文字放入 C 源代码中，xcode 会警告`Hex escape sequence out of range`. 所以这个文字有问题。
Xcode 的版本是 4.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:09:59.120

这些是十六进制转义码。`\xcea`实际上是两个字符：其中一个是数字代码`0xce`和字符`'a'`.

# asp.net-mvc-4 - ModelBinder 和子模型

> ID：14689505
> 
> 赞同：8
> 
> 时间：2013-02-04T15:04:14.887
> 
> 标签：asp.net-mvc-4, asp.net-web-api, model-binding

我在某些模型中使用了一个子模型类（UserInfo），它应该包含一些与用户相关的信息。该子模型可用于各种模型，例如

```
public class Model
{
     int string Value { get; set; }
     public UserInfo User { get; set; }
} 
```

我创建了一个模型绑定器并在 WebApiConfig 中注册了它

```
config.BindParameter(typeof(UserInfo), new UserModelBinder()); 
```

问题是 WebApi 处理管道没有调用 UserModelBinder。似乎子模型没有调用这些模型绑定器。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:28:01.620

> **HttpConfigurationExtensions.BindParameter**方法注册将使用模型绑定器绑定 Action 上的给定参数类型。

所以你所做的类似于：

```
void Action([ModelBinder(UserModelBinder)] UserInfo info) 
```

仅当操作参数为指定类型 (UserInfo) 时才有效。

尝试将模型绑定器声明放在 UserInfo 类本身上，以便它是全局的：

```
[ModelBinder(UserModelBinder)] public class UserInfo { } 
```

但是，WebAPI 和 MVC 绑定参数的方式存在一些差异。这是 Mike Stall 的详细[解释](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:31:57.293

看看这个问题[ASP.net Web API中MVC的DefaultModelBinder是什么等价物？](https://stackoverflow.com/questions/14705794/what-is-the-equivalent-of-mvcs-defaultmodelbinder-in-asp-net-web-api/14706108#14706108)有关绑定将在何处发生的一些详细信息。

我怀疑您`Model`是否正在消息正文中传递？

如果是，那么 WebApi 将使用格式化程序来反序列化您的类型并处理模型，默认`XmlMediaTypeFormatter`值为`JsonMediaTypeFormatter`或`FormUrlEncodedMediaTypeFormatter`。

如果您在正文中发布模型，则根据您请求或接受的内容类型是（应用程序/xml、应用程序/json 等），您可能需要自定义序列化器设置或包装或实现您自己的`MediaTypeFormatter`.

If you are using application/json then you can use `JsonConverters` to customise the serialisation of your UserInfo class. There is an example of this here [Web API ModelBinders - how to bind one property of your object differently](https://stackoverflow.com/questions/14653211/web-api-modelbinders-how-to-bind-one-property-of-your-object-differently/14698930#14698930) and here [WebApi Json.NET custom date handling](https://stackoverflow.com/questions/12856853/webapi-json-net-custom-date-handling)

```
internal class UserInfoConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeOf(UserInfo);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue,
                                JsonSerializer serializer)
    {
        //
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        //
    }
} 
```

# android - Zxing 读取条码后退出

> ID：14689508
> 
> 赞同：2
> 
> 时间：2013-02-04T15:04:25.363
> 
> 标签：android, zxing

我在我的应用程序中包含了来自源代码的 Zxing 条码阅读器。一切正常，除了条形码阅读器在成功读取条形码后退出。它不会抛出任何错误，`onActivityResult`甚至没有调用我的应用程序。

我如何称呼 Zxing：

```
Intent intent = new Intent("com.aeon.android2chrome.android.SCAN");
Intent.putExtra("com.google.zxing.client.android.SCAN.SCAN_MODE", "QR_CODE_MODE");
startActivityForResult(intent, 0); 
```

注意：我正在使用`com.aeon.android2chrome`（我的包），因此如果 zxing 已经安装，手机不会询问使用哪个条形码阅读器打开。我已经在 Zxing 清单中适当地更改了它。

我还在日志中收到一个奇怪的错误

> 02-04 20:29:46.710: W/IInputConnectionWrapper(29716): showStatusIcon on inactive InputConnection

没有其他错误。有人可以给我几点关于什么是错的或什么可能是错的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:39:58.753

经过很多挠头，我发现了问题所在。问题是我的活动清单中有标签`android:noHistory="true"`。删除它解决了问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:28:09.957

我想我在尝试包含 Zxing 源代码时遇到了类似的问题。我通过使用打开条形码扫描仪应用程序的 zxing.integration.android 包解决了这个问题（或向用户显示安装它的链接）。打开已安装的条形码扫描仪应用程序而不使用您碰巧下载的某些非最新源版本是一种更好、更清洁的做法。

# google-maps - Google Maps v3 jquery mobile 获取中心经纬度

> ID：14689510
> 
> 赞同：0
> 
> 时间：2013-02-04T15:04:33.497
> 
> 标签：google-maps, jquery-mobile, google-maps-api-3

初始化地图后，我正在尝试在地图上绘制标记。但是我需要知道中心点 lng lats。

我已经尝试使用这两种方法，但是在 chrome js 中出现“未捕获 RangeError：超出最大调用堆栈大小”；

```
$('#map_canvas').gmap('get', 'map').getCenter()); and also 
$('#map_canvas').gmap('option', 'center');

<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" src="jquery-ui-map-3.0-rc/ui/jquery.ui.map.js"></script>
<script type="text/javascript" src="jquery-ui-map-3.0-rc/ui/jquery.ui.map.extensions.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />

<script>
$('#map_page').live("pageshow", function() {
    function add_markers() {
        var location = $('#map_canvas').gmap('option', 'center');
    $.getJSON( 'http://localhost/motherly/android/index.php/api/venues?lat=' + location.lat() + '&lng=' + location.lng(), function(data) { 

        console.log(data['response']);

        $.each(data.response, function(i, marker) {
            // console.log(marker.lat, marker.lng);
            $('#map_canvas').gmap('addMarker', { 
                'position': new google.maps.LatLng(marker.lat, marker.lng), 
                'bounds': true 
            }).click(function() {
                $('#map_canvas').gmap('openInfoWindow', { 'content': marker.name }, this);
            });
        });
    }); 
    }

    function initialize(lat,lng) {
        $('#map_canvas').gmap({'center' : new google.maps.LatLng(lat, lng), 'callback': function(){
            add_markers();
        }});
    }

    if(navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position){
            console.log(position);
            initialize(position.coords.latitude,position.coords.longitude);
            // google.maps.event
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:20:18.233

抱歉，伙计们，我意识到问题是我在地图的构造函数中调用了 draw 方法**，**这使得地图对象未初始化是有道理的。

所以回顾一下这个问题是这个构造函数内部的 add_markers() 方法（将 add_markers() 移到这一行下面）；

```
$('#map_canvas').gmap({'center' : new google.maps.LatLng(lat, lng), 'callback': function(){

}}); 
```

# spring - JNDI/Tomcat 没有找到合适的服务处理程序，即使应用程序仍在工作

> ID：14689513
> 
> 赞同：1
> 
> 时间：2013-02-04T15:04:44.753
> 
> 标签：spring, jakarta-ee, tomcat, ejb, jndi

我有一个在从 Tomcat 7 扩展的 vFabric tc 服务器上运行的 Spring 应用程序。当前应用程序有大约三个数据源需要更改为 JNDI。我已将连接池放入并在和中`Server/context.xml`调用 JNDI 服务。`web.xml``applicationContext.xml`

问题出现在启动应用程序时，Spring初始化框架servlet时抛出异常，如下所示：

```
INFO: Initializing Spring FrameworkServlet 'MyAppName'
Feb 3, 2013 7:34:38 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory D:\STS_3.1\vfabric-tc-server-developer-2.7.2.RELEASE\baseInstance\webapps\manager
Feb 3, 2013 7:35:08 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory D:\STS_3.1\vfabric-tc-server-developer-2.7.2.RELEASE\baseInstance\webapps\ROOT
Feb 3, 2013 7:35:09 PM org.apache.naming.NamingContext lookup
WARNING: Unexpected exception resolving reference
java.sql.SQLException: Listener refused the connection with the following error:
ORA-12519, TNS:no appropriate service handler found

at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:412)
at oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:531)
at oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:221)
at oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
at oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:503)
at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:278)
at org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:182)
at org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:699)
at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:631)
at org.apache.tomcat.jdbc.pool.ConnectionPool.init(ConnectionPool.java:485)
at org.apache.tomcat.jdbc.pool.ConnectionPool.<init>(ConnectionPool.java:143)
at org.apache.tomcat.jdbc.pool.DataSourceProxy.pCreatePool(DataSourceProxy.java:116)
at org.apache.tomcat.jdbc.pool.DataSourceProxy.createPool(DataSourceProxy.java:103)
at org.apache.tomcat.jdbc.pool.DataSourceFactory.createDataSource(DataSourceFactory.java:539)
at org.apache.tomcat.jdbc.pool.DataSourceFactory.getObjectInstance(DataSourceFactory.java:237)
at org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:143)
at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:304)
at org.apache.naming.NamingContext.lookup(NamingContext.java:843)
at org.apache.naming.NamingContext.lookup(NamingContext.java:154)
at org.apache.naming.NamingContext.lookup(NamingContext.java:831)
at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
at org.apache.catalina.core.NamingContextListener.addResource(NamingContextListener.java:1061)
at org.apache.catalina.core.NamingContextListener.createNamingContext(NamingContextListener.java:671)
at org.apache.catalina.core.NamingContextListener.lifecycleEvent(NamingContextListener.java:270)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1100)
at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1618)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: oracle.net.ns.NetException: Listener refused the connection with the following error:
ORA-12519, TNS:no appropriate service handler found

at oracle.net.ns.NSProtocol.connect(NSProtocol.java:385)
at oracle.jdbc.driver.T4CConnection.connect(T4CConnection.java:1042)
at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:301)
... 38 more
Feb 3, 2013 7:35:09 PM org.apache.catalina.core.NamingContextListener addResource
WARNING: Failed to register in JMX: javax.naming.NamingException: Listener refused the connection with the following error:
ORA-12519, TNS:no appropriate service handler found 
```

我必须强调有三个 JNDI 数据源，但`no appropriate service handler found`异常反复抛出`5 times`。

但在那之后，应用程序仍然可以正常运行，没有任何问题。

那么这些异常是如何产生的以及如何克服它们呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:31:56.333

发现问题：

在 Tomcat（Context.xml 中的元素）中设置 JNDI 连接池时，我给池允许的连接太多

```
<Resource name="jdbc/schema_A" auth="Container" type="javax.sql.DataSource"
    driverClassName="oracle.jdbc.driver.OracleDriver" url="jdbc:oracle:thin:@hostname:1521:orcl"
    username="app_A" password="app_A" maxActive="20" maxIdle="10" maxWait="-1" /> 
```

上述设置（maxActive/maxIdle）对于本地 oracle 服务工作负载（生产服务器很好）可能太多了，因此异常并且应用程序仍在运行。所以我把它改成

```
<Resource name="jdbc/schema_A" auth="Container" type="javax.sql.DataSource"
    driverClassName="oracle.jdbc.driver.OracleDriver" url="jdbc:oracle:thin:@hostname:1521:orcl"
    username="app_A" password="app_A" maxActive="1" maxIdle="1" maxWait="-1" /> 
```

现在一切正常……干杯……

# c# - 列表到文本文件

> ID：14689516
> 
> 赞同：0
> 
> 时间：2013-02-04T15:04:56.640
> 
> 标签：c#, text-files

我有一个包含一组人的对象列表。每个人都有名字、姓氏、地址和电话号码。

我想将该列表导出到一个文本文件中，如下所示：

> groupA
> 名字-大卫
> 姓氏
> -kantor 地址-意大利电话号码
> -123456

我应该怎么办？到目前为止，我设法只导出对象类型名称：

```
public List<PhoneBookCore> elements = new List<PhoneBookCore>();

string[] lines = elements.Select(phoneBookCore =>
    phoneBookCore.ToString()).ToArray();
System.IO.File.WriteAllLines(path, lines); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:20:36.973

您只有对象类型名称，因为`PhoneBookCore.ToString()`为您提供了对象类型名称。

您必须指定您希望文件的外观。正如 MikeCorcoran 一样，一个很好的方法是使用序列化。这是一种非常强大的方式来存储和从文件中检索数据。

```
List<string> lines = new List<string>();
foreach(var phoneBookCore in elements)
{
    lines.Add(phoneBookCore.GroupName);  // Adds the Group Name
    foreach(var person in phoneBookCore.Persons)
    {
        // Adds the information on the person
        lines.Add(String.Format("FirstName-{0}", person.FirstName));
        lines.Add(String.Format("LastName-{0}", person.LastName));
        lines.Add(String.Format("Address-{0}", person.Address));
        lines.Add(String.Format("PhoneNumber-{0}", person.PhoneNumber));
    }
}
System.IO.File.WriteAllLines(path,lines); 
```

# c# - JSON十进制翻倍

> ID：14689517
> 
> 赞同：3
> 
> 时间：2013-02-04T15:04:58.310
> 
> 标签：c#, json, datacontractjsonserializer

有没有办法设置 JSON 将变量解码为双倍而不是十进制？

例子：

```
[DataContract]
class ReturnData
{
    [DataMember]
    public object[] array { get; set; }
}

public ReturnData DecodeJsonString()
{
    string str = "{ \"array\" : [\"custom array\", 0.1, 0.2, 0.3, 0.4] }";
    var json = new DataContractJsonSerializer(typeof(ReturnData));
    var stream = new MemoryStream(Encoding.UTF8.GetBytes(str));
    var obj = json.ReadObject(stream);
    stream.Close();
    return (ReturnData)obj;
} 
```

我得到包含十进制数字的“obj”数组，但我需要它是双倍的。我不想自己转换成双倍。有没有办法教 JsonSerializer 这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:25:39.047

你真的受限于使用`typeof(object)`吗？

您可以创建自己的自定义合同类：

```
[DataContract]
class MyClass
{
    [DataMember]
    public double[] array { get; set; }
} 
```

然后从第二行引用它：

```
var json = new DataContractJsonSerializer(typeof(MyClass)); 
```

作为参考，这是我开始工作的完整控制台应用程序代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Runtime.Serialization.Json;
using System.Runtime.Serialization;

namespace ConsoleApplication1
{
    [DataContract]
    class MyClass
    {
        [DataMember]
        public double[] array { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            GetStuff();
        }

        static object GetStuff()
        {
            string str = "{ \"array\" : [0.1, 0.2, 0.3, 0.4] }";

            var json = new DataContractJsonSerializer(typeof(MyClass));
            var stream = new MemoryStream(Encoding.UTF8.GetBytes(str));
            var obj = json.ReadObject(stream);
            stream.Close();
            return obj;
        }
    }
} 
```

# c# - 如何使用 keyUP 和 keyDown 更改 listBoxSelecteditem？

> ID：14689518
> 
> 赞同：1
> 
> 时间：2013-02-04T15:05:00.330
> 
> 标签：c#, wpf

我想更改 listBoxselectedItem。但我只能通过鼠标单击进行更改。我想用 keyup 和 keydown 进行更改。如果您知道可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-03T06:46:59.750

这个对我有用。您必须注意，如果您按下键，ListBox 以索引 0 开头，您必须增加 .SelectedIndex 以便选择索引为 1 的项目

```
 //Key Up
        if(e.KeyCode==Keys.Up && (listBox.SelectedIndex - 1) > -1)
        {
            listBox.SelectedIndex--;
        }

        //Key Down
        if (e.KeyCode==Keys.Down && (listBox.SelectedIndex + 1) < listBox.Items.Count)
        {
            listBox.SelectedIndex++;
        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T15:31:13.247

**在 keyDown 事件上试试这个：**

```
private void listBox_KeyDown(object sender, KeyEventArgs e) 
{ 
    if (e.Key==Key.Up && listBox.SelectedIndex+1<listBox.Items.Count) 
    { 

        listBox.SelectedIndex++; 
    } 
     if (e.Key == Key.Down && listBox.SelectedIndex-1<-1) 
     { 
         listBox.SelectedIndex--; 
     } 
} 
```

# css - 我可以在 CSS 中使用变量吗？

> ID：14689519
> 
> 赞同：1
> 
> 时间：2013-02-04T15:05:04.317
> 
> 标签：css, variables

我想知道是否可以将 CSS 属性定义为变量。例如，我可以执行以下操作：

```
<div class="wide(20)"></div> 
```

在 .css 中：

```
.wide(x)
{
width : x% ;
}

.tr-speed(y)
{
-webkit-transition: y s;
} 
```

我知道这可以用 JavaScript 完成，但我想要一个完整的 CSS 解决方案，如果有的话。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:07:00.870

看看[LESS](http://lesscss.org/)或[SASS](http://sass-lang.com/)，它们是支持变量和其他特性的服务器（或客户端）端解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:07:50.730

[SASS](http://sass-lang.com/)是一种非常强大的语言，可以编译成 CSS。

它只是带有变量和函数之类的 CSS 语法。它是一个非常流行的工具，可以帮助您编写 DRY CSS。

[http://sass-lang.com/](http://sass-lang.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-01T12:50:14.707

CSS 变量有一个新的 W3C 草案。

看一下：

[http://dev.w3.org/csswg/css-variables/](http://dev.w3.org/csswg/css-variables/)

也许很快就会有主流浏览器的支持：

[https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables#Browser_compatibility](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables#Browser_compatibility)

# asp.net-mvc-3 - 在 mvc 表单上添加输入验证的最佳方法？

> ID：14689521
> 
> 赞同：0
> 
> 时间：2013-02-04T15:05:07.017
> 
> 标签：asp.net-mvc-3, jquery-ui, validation

我需要对几个输入字段进行以下验证：

```
01 - Unicode String. No line breaks or tabs. DATA_MAX_LENGTH applies.
02 - Unicode Memo. Line breaks permitted. No tabs. DATA_MAX_LENGTH applies.
03 - Non-negative integer, as string.
04 - Non-negative Money (precision 18,2), as string.
05 - Date, as string, in the U.S. 4-digit-year format (e.g. 12/31/2012).
06 - Boolean (aka "Bit", "Yes/No"), as string, with "1" for True, "0" for False. 
```

是否有提供所有这些验证（或可以扩展）的 Jquery 插件，或者使用多个插件是个好主意。我正在使用 MVC3，我需要它们用于表单上的动态控件。

我的模型问题（这些问题将为动态测验表单创建）：

```
public class Question
    {

        public int QuestionID { get; set; }
        public string QuestionText { get; set; }
        public Nullable<bool> Required { get; set; }
        public int DisplayOrder { get; set; }
        public int StepID { get; set; }
        public Nullable<int> DataType { get; set; }   // validation relate here (1-6)
        public Nullable<int> ControlType { get; set; }
        public string Choices { get; set; }
        public Nullable<int> MaxLength { get; set; }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:23:37.197

我个人是 Fluent Validation 的忠实粉丝——它是一个非常强大的选项，允许您使用 lambda 语法定义验证规则。请参阅[此处](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)以获取来自 codeplex 站点的 MVC 集成信息，并[在此处](http://blog.sdbarker.com/2011/07/16/enable-custom-fluent-validation-validators-on-the-client-side/)获取有关如何使其与 jQuery 一起使用的详细信息的博客文章。

# spss - 计数案例的语法

> ID：14689523
> 
> 赞同：1
> 
> 时间：2013-02-04T13:14:38.000
> 
> 标签：spss

我使用 SPSS，很难找到/生成用于计数案例的语法。

我有大约 120 个案例和五个变量。我需要知道只有一个、多个或所有案例的值为 1（二分变量）的案例的数量/比例。然后我需要计算一个新变量，该变量显示包含所有上述案例（也是二分法）的案例数量/比例。

例如案例一：var1=1, var2=1, var3=1, var4=0, var5=0 --> newvariable=1。案例二：var1=0, var2=0, var3=0, var4=0, var5=0 --> newvariable=1。等等...

有人可以帮我语法吗？帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:12:20.200

在这里，我们可以使用变量的总和来确定您的条件。因此，使用作为总和的临时变量，我们可以在您的示例中查看它是否等于 1、大于 1 或 5。

```
compute #sum = SUM(var1 to var5).
compute just_one = (#sum = 1).
compute more_one = (#sum > 1).
compute all_one = (#sum = 5). 
```

类似地，`all_one`可以使用`ANY`命令来计算是否存在任何零，即`compute all_one = ANY(0,var1 to var5).`。这些代码片段假定在数据框中是连续的，如果不是，它们只需要在所有给定实例`var1 to var5`中替换。`var1,var2,var3,var4,var5`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:13:07.780

您可以阅读命令语法参考手册中的逻辑函数 ANY，如果您用“0”否定 ANY 的测试，那么这实际上是对所有“1”的测试。使用 COUNT 命令将是另一种方法。

# linux - 通过 USB 将 Linux 本机文件系统作为 VFAT 或 NTFS 导出到 Windows

> ID：14689526
> 
> 赞同：1
> 
> 时间：2013-02-04T15:05:21.133
> 
> 标签：linux, windows, filesystems, usb, emulation

如何通过 USB 向 Windows 呈现 Linux 本机文件系统，例如 YAFFS2、ext3，使其显示为 VFAT 或 NTFS？我目前使用 g_file_storage 内核模块共享一个 VFAT 环回文件。理想情况下，有一些可用的转换层将一个文件系统呈现为另一种类型的文件系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:17:49.653

通常我使用 Ext2Fsd 在 Windows 中显示 ext3 和 ext4 文件系统，但我不确定它对回送文件的表现如何。[在http://www.ext2fsd.com](http://www.ext2fsd.com)上试试。然而，我从未尝试过使用 YAFFS2，但绝对值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-28T14:28:32.403

程序[vsFat - Virtual Synthetic filesystem(github)](https://github.com/SeanMollet/vsFat)似乎在做，你正在（也许仍然）试图做的事情。或者其他读者。

> 该程序在给定本地系统目录的情况下生成合成 FAT32 文件系统。这种安排的主要目的是通过 Linux usb 小工具将 FS 导出到无法连接到网络驱动器的物理设备。
> 
> 根据 FAT32 规范，此 FS 是只读的，总大小限制为 2TB，最大文件大小为 4GB。

[这](https://gist.github.com/gbaman/50b6cca61dd1c3f88f41)是一个描述，如何通过 USB 公开这个虚拟块设备。它适用于 Raspberry PI0w，但这些说明适用于任何具有`/sys/class/udc/`after内容的设备`modprobe libcomposite`。“UDC” -> “USB DualRole 控制器”

# javascript - 在 Extjs 4 中使用 getClass 隐藏操作列图标

> ID：14689527
> 
> 赞同：4
> 
> 时间：2013-02-04T15:05:34.883
> 
> 标签：javascript, extjs, extjs4

我在操作列中有 3 个图标，编辑、删除、发布网格视图中的每一行。现在我想要隐藏发布图标并在某些条件下更改为取消发布图标。（我的记录来自mysql db）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-16T19:12:18.593

这是我项目中的一个示例。

使用 actioncolumn 项的 getClass 属性来实现这一点。要隐藏它，请返回“x-hide-display”类名。

```
xtype: 'actioncolumn',
  items: [
      {
      getClass: function(v, metadata, r, rowIndex, colIndex, store) {
          // hide this action if row data flag indicates it is not deletable
          if(r.data.deletable == false) {
              return "x-hide-display";
          }
      },
      handler: function(view, rowIndex, colIndex, item, e, record, row) {
          //do something
      },
      icon: 'icons/delete.png'
      }
  ]                             
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:23:43.910

我不得不面对类似的情况，但我的要求发生了变化，没有时间实施一些人建议的帮助。

你可以在

[http://www.sencha.com/forum/showthread.php?149763-How-to-Change-action-column-icon-dynamically](http://www.sencha.com/forum/showthread.php?149763-How-to-Change-action-column-icon-dynamically)

# jquery - jQuery隐藏和显示具有多个设置延迟的div，代码不起作用

> ID：14689529
> 
> 赞同：0
> 
> 时间：2013-02-04T15:05:39.930
> 
> 标签：jquery, html, css, delay, show-hide

我下面有一些 jQuery 不能正常工作。当我单击按钮时，我需要发生以下情况：

*   加载 gif 显示 5 秒
*   一旦这淡出，我需要一个感谢 div 出现 5 秒钟。
*   然后一旦完成，我就需要隐藏当前的 div，然后显示第一个 div (page1)

然而，加载 gif div 和感谢 div 同时显示，并且隐藏/显示 page1 和 2 覆盖上述内容。

这是我的代码：

```
 $('a.myLink').click(function(e){ 
                // show loading gif for 5 seconds then fade out
                $(".myGif").show().delay(5000).fadeOut();

                //once loading gif has finished then show thank you message for 5 seconds then fade out
                $(".thanksAgain").show().delay(5000).fadeOut();

                // once thank you message has finished go back to main screen
                $('.page2').hide();
                $('.page1').show();
            }); 
```

我将如何做到这一点，以便一切都按正确的顺序工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:11:26.583

您可以在函数上使用回调函数`fadeout();`，而不是尝试匹配时间。函数运行完成后会发生回调。

它看起来像这样：

```
$(".myGif").show().delay(5000).fadeOut(400, function() {
    $(".thanksAgain").show().delay(5000).fadeOut();
}); 
```

这将允许`.thanksAgain`div 显示，只有在`.myGif`它的`fadeOut()`功能完成后。

对于`fadeout();`函数，回调是第二个参数。您可以通过查看 jQuery 文档来验证这一点：http: [//api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:11:50.220

```
$('a.myLink').click(function(e){ 
                // show loading gif for 5 seconds then fade out
                $(".myGif").show().delay(5000).fadeOut(400,function(){
                       $(".thanksAgain").show().delay(5000).fadeOut(400,function(){

                                $('.page2').hide();
                                $('.page1').show();
                       });

                });

}); 
```

# python - 如何匹配原始字符串中的换行符？

> ID：14689531
> 
> 赞同：46
> 
> 时间：2013-02-04T15:05:45.097
> 
> 标签：python, regex, re, rawstring

我对 Python 原始字符串有点困惑。我知道，如果我们使用原始字符串，那么它将被`'\'`视为正常的反斜杠（例如`r'\n'`是`\`and `n`）。但是，我想知道如果我想匹配原始字符串中的换行符怎么办。我试过`r'\\n'`了，但没有用。

有人对此有什么好主意吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-04T15:22:51.010

在正则表达式中，您需要指定您处于多行模式：

```
>>> import re
>>> s = """cat
... dog"""
>>> 
>>> re.match(r'cat\ndog',s,re.M)
<_sre.SRE_Match object at 0xcb7c8> 
```

请注意，`re`将`\n`（原始字符串）转换为换行符。正如您在评论中指出的那样，您实际上并不**需要** [`re.M`](http://docs.python.org/2/library/re.html#re.M)它匹配，但它确实有助于匹配`$`并且`^`更直观：

```
>> re.match(r'^cat\ndog',s).group(0)
'cat\ndog'
>>> re.match(r'^cat$\ndog',s).group(0)  #doesn't match
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'NoneType' object has no attribute 'group'
>>> re.match(r'^cat$\ndog',s,re.M).group(0) #matches.
'cat\ndog' 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-04T15:06:24.643

最简单的答案是根本不使用原始字符串。您可以使用`\\`.

如果您在某些段中有大量反斜杠，那么您可以根据需要连接原始字符串和普通字符串：

```
r"some string \ with \ backslashes" "\n" 
```

（Python 自动连接字符串文字，它们之间只有空格。）

请记住，如果您在 Windows 上使用路径，最简单的选择就是使用正斜杠 - 它仍然可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-06T11:41:25.513

您还可以使用 [\r\n] 匹配新行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-15T16:09:22.530

```
def clean_with_puncutation(text):    
    from string import punctuation
    import re
    punctuation_token={p:'<PUNC_'+p+'>' for p in punctuation}
    punctuation_token['<br/>']="<TOKEN_BL>"
    punctuation_token['\n']="<TOKEN_NL>"
    punctuation_token['<EOF>']='<TOKEN_EOF>'
    punctuation_token['<SOF>']='<TOKEN_SOF>'
  #punctuation_token

    regex = r"(<br/>)|(<EOF>)|(<SOF>)|[\n\!\@\#\$\%\^\&\*\(\)\[\]\
           {\}\;\:\,\.\/\?\|\`\_\\+\\\=\~\-\<\>]"

###Always put new sequence token at front to avoid overlapping results
 #text = '<EOF>!@#$%^&*()[]{};:,./<>?\|`~-= _+\<br/>\n <SOF>\ '
    text_=""

    matches = re.finditer(regex, text)

    index=0

    for match in matches:
     #print(match.group())
     #print(punctuation_token[match.group()])
     #print ("Match at index: %s, %s" % (match.start(), match.end()))
        text_=text_+ text[index:match.start()] +" " 
              +punctuation_token[match.group()]+ " "
        index=match.end()
    return text_ 
```

# installation - Spotify 使用什么样的安装程序？

> ID：14689538
> 
> 赞同：2
> 
> 时间：2013-02-04T15:06:21.197
> 
> 标签：installation, spotify

我注意到 Spotify 加载了一个 ~90kb 的安装程序，然后下载了所需的组件。我无法弄清楚这是自定义构建还是他们使用免费/购买的安装程序系统。那么 Spotify 使用什么样的安装程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:25:58.663

从技术上讲，小型 Spotify 安装程序不是安装程序——它是一个使用系统 API 下载和提取完整 Spotify 下载的小型应用程序，其中包括一个适当的安装程序。下载完成后，微型安装程序会启动适当的安装程序，接管安装过程。

免责声明：我为 Spotify 工作并编写了 Mac 安装程序的第一个版本。

# javascript - 在链接后插入图片

> ID：14689540
> 
> 赞同：0
> 
> 时间：2013-02-04T15:06:35.970
> 
> 标签：javascript

我有一个大表，其中一列包含电子邮件地址（+/- 60），有人告诉我在每个地址后添加一个电子邮件图标。我一直在尝试使用`anchors`,`.href`并`.indexof`选择电子邮件链接，但没有得到任何地方（因此没有代码）。

`<img src="/a/path/email.jpg" alt="e-mail" />`如果链接`href`包含`mailto`使用**vanilla JavaScript***而非 jQuery*，我能否获得有关如何添加的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:25:26.250

这是您可以使用的功能：

```
(function(allLinks)
{
    var i, imgHTML = '<img src="mail.png" alt="mail" />';
    for (i = 0; i < allLinks.length; i++)
    {
        if (allLinks[i].getAttribute('href').indexOf('mailto') > -1)
        {//or allLinks.item(i).getAttribute('href').indexOf('mailto')
         //calling the item method is said to be faster, on most browsers
            allLinks[i].innerHTML += imgHTML;
        }
    }
}(document.getElementsByTagName('a'))); 
```

你当然可以把这个 IIFE 变成一个常规函数，在加载事件或其他东西上被调用......
分叉@adardesign 的小提琴，[这里是](http://jsfiddle.net/EkcgR/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:22:24.900

## HTML

```
<table id="table">
    <tr>
        <td><a href="mailto:yankel@frieman.com">yankel@frieman.com</a></td>
    </tr>
</table> 
```

## javascript

```
var table = document.getElementById("table"),
    links = table.getElementsByTagName("a"),
    linksLength = links.length,
    i = 0,
    link,
    href,
    text;

   for(; i>linksLength; i++){
      link = links[i];
      href=link.href,
      text = link.childNodes[0].nodeValue;

      if(href.indexOf("mailto:")){
         link.childNodes[0].nodeValue += text+ "<img src='path/to/email.png'>";
      }
 } 
```

## 见[http://jsfiddle.net/adardesign/jJZCd/](http://jsfiddle.net/adardesign/jJZCd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:35:33.927

你可以使用 CSS 来解决这个问题

## CSS

```
a[href^="mailto:"]:after{
    content:url("path/to/email.png")
} 
```

## 见[http://jsfiddle.net/adardesign/QWsVM/](http://jsfiddle.net/adardesign/QWsVM/)

# ruby-on-rails - Ruby on Rails 中的多对多关系

> ID：14689549
> 
> 赞同：0
> 
> 时间：2013-02-04T15:07:08.000
> 
> 标签：ruby-on-rails, ruby, many-to-many

我一直在尝试在 Ruby on Rails 中创建网络应用程序，它会收集不同餐厅的菜单并将其显示在我的应用程序中。我想创建多对多关联，但在那里我有点困惑。我用谷歌搜索了多对多关系并阅读了有关 HABTM 或 has_many/belongs_to 的信息，仍然有点困惑。我的课程：

餐厅 = {名称}

菜单 = {名称，价格}

并加入表：

menu_restaurant = {日期}

我在这里很困惑。我读过我不能在连接表中使用带有额外值的 HABTM。而且我不应该有使用HABTM的连接表模型。

我当前的模型：app/models/menu.rb

```
class Menu < ActiveRecord::Base
  attr_accessible :cenaStudent, :name
  has_many :restaurants, dependent: :destroy
  validates :priceStudent, presence: true
  validates :name, presence:true
end 
```

应用程序/模型/restaurant.rb

```
class Restaurant < ActiveRecord::Base
  attr_accessible :name
  has_many :menus, dependent: :destroy

  validates :name, presence: true 
end 
```

应用程序/模型/menu_restaurant.rb

```
class MenuRestaurant < ActiveRecord::Base
  attr_accessible :date
end 
```

这些是我的数据库表 db/migrate/{timestamp}_create_restaurants.rb 和类似的 {...}menu.rb

```
class CreateRestaurants < ActiveRecord::Migration
  def self.up
    create_table :restaurants do |t|
      t.string :name

      t.timestamps
    end
  end

  def self.down
    drop_table :restaurants
  end
end 
```

db/migrate/{timestamp}_create_menus_restaurants.rb

```
class CreateMenusRestaurants < ActiveRecord::Migration
  def up
    #create the association table
    create_table :menus_restaurants, :id => false do |t|
      t.integer :menu_id, :null => false
      t.integer :restaurant_id, :null => false
      t.date :date
    end

    #add index
    add_index :menus_restaurants, [ :menu_id, :restaurant_id]

  end

  def down
    remove_index :menus_restaurants, :column => [ :menu_id, :restaurant_id]
    drop_table :menus_restaurants
  end
end 
```

我应该使用 ruby​​ on rails 中的什么关系？我需要什么型号？

我还有第二个与 RoR MVC 架构相关的问题。因为有关系，所以就写在这里。

我在 ruby​​ 中创建了一个函数，用于下载包含菜单列表的 pdf 文件。解析菜单名称和价格。餐厅名称与 pdf 文件匹配。所以我有数据需要将它们插入到数据库中。我该怎么做？在哪里做？我猜有些部分应该在控制器中，函数应该在 lib 目录中？这是我第一个使用任何架构的应用程序。这也是我的第一个 stackoverflow 问题，希望我没有忘记任何事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:14:26.847

如果要向关联表添加属性，则应[通过关联使用 has_many](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)。

```
class Menu < ActiveRecord::Base
 has_many :menu_restaurants
 has_many :restaurant, :through => :menu_restaurants
 attr_accessible :cenaStudent, :name
 validates :priceStudent, presence: true
 validates :name, presence:true
 ...
end

class MenuRestaurant < ActiveRecord::Base
 belongs_to :menu
 belongs_to :patient
 attr_accessible :date
 ...
end

class Restaurant < ActiveRecord::Base
  has_many :menu_restaurants
  has_many :menus, :through => :menu_restaurants
  validates :name, presence: true 
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:19:38.317

我想你快到了，你的迁移和模型似乎没问题，除了处理连接表：menu_restaurants。

我已经更改了您的模型，以便连接表将所有内容连接起来

```
class Menu < ActiveRecord::Base
  attr_accessible :cenaStudent, :name
  has_many :menu_restaurants
  has_many :restaurants, through: :menu_restaurants , dependent: :destroy
  validates :priceStudent, presence: true
  validates :name, presence:true
end

class Restaurant < ActiveRecord::Base
  attr_accessible :name
  has_many :menu_restaurants
  has_many :menus, through: :menu_restaurants , dependent: :destroy
  validates :name, presence: true 
end

class MenuRestaurant < ActiveRecord::Base
  attr_accessible :date
  belongs_to :menu
  belongs_to :restaurant
end 
```

另外我认为你的连接表应该被称为 menu_restaurants （在菜单上单数）

# ios - ios - 无法在滚动视图中嵌入屏幕（我的第一次尝试）

> ID：14689553
> 
> 赞同：2
> 
> 时间：2013-02-04T15:07:29.387
> 
> 标签：ios, ios5, storyboard, scrollview

我正在使用情节提要，并且我有一个屏幕，其中所有元素都不适合 3.5 英寸屏幕。

我想要做的是将我想要使用的屏幕放在焦点上，转到 Editor --> EmbedIn --> 但是滚动视图选项被禁用。

有什么我做的不对吗？使我的屏幕可滚动的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:15:57.250

Command + 单击要嵌入到滚动视图中的对象，然后执行编辑器 -> 嵌入 -> 滚动视图，它应该被启用。我的猜测是您选择了最高级别的视图（或根本没有选择），您不能这样做，因为该视图需要保持在顶部。

# objective-c - 使用 valueForKeyPath 获取 NSImageView 子类数组的最小 x 和 y 原点

> ID：14689557
> 
> 赞同：1
> 
> 时间：2013-02-04T15:07:36.027
> 
> 标签：objective-c, cocoa

我有一个 Cocoa-Application，其中有一个 NSMutableArray，其中包含 NSImageView 子类的实例。

我要做的是获取 ImageViews 边界原点的 x 值的最小值。

我努力了：

```
double minx =[[robots valueForKeyPath:@"@min.bounds.origin.x"] doubleValue]; 
```

也：

```
double minx =[[robots valueForKeyPath:@"@min.self.bounds.origin.x"] doubleValue]; 
```

但是我收到以下错误：

```
[<NSConcreteValue 0x100597a20> valueForUndefinedKey:]: this class is not key value coding-compliant for the key origin. 
```

我搜索了互联网和 NSKeyValueCoding 协议参考，但没有找到解决问题的方法。我知道我可以循环遍历 NSMutableArray，但我猜使用 valueForKeyPath 会是更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:33:24.240

错误是因为`NSRect`（来自 的返回值`[NSImageView bounds]`）是一个简单的`struct`而不是 Objective-C 对象。

我建议`NSImageView`对这些值进行子类化并将其公开为属性，以便它们符合键值编码。

# matplotlib - Matplotlib - 缩放/平移后返回数据集

> ID：14689558
> 
> 赞同：1
> 
> 时间：2013-02-04T15:07:41.883
> 
> 标签：matplotlib

我正在尝试在同一个图上创建一对散点图

如果散点图 1 被缩放或平移，我想重新显示散点图 2，以便只显示新数据集

子图共享相同的基础数据集，但不共享等效轴，因此我不能使用 sharex、sharey 等，例如，散点图 2 是对散点图 1 中显示的相同数据应用不同函数的结果，导致不同的轴

我想我需要以某种方式提取每个 tme 散点图 1 被缩放/平移显示的数据集，并将该数据传递给绘制散点图 2 的函数，但我找不到任何关于如何做到这一点的信息

一定很常见——我很惊讶我没有为它挖掘出任何食谱类型的脚本

我有一些运气使用“选择器”事件返回散点索引集 - 我真正需要的是返回缩放/平移事件后触发的所有可见点的散点索引的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:36:49.470

您可以检索轴视图间隔：

```
xinterval, yinterval = ax.xaxis.get_view_interval(), ax.yaxis.get_view_interval() 
```

然后使用间隔来确定哪些点在第一个子图中可见，并使用它来决定什么/如何显示第二个子图。例如：

```
plt.scatter(xs, ys)

xmin, xmax = ax.xaxis.get_view_interval()
ymin, ymax = ax.yaxis.get_view_interval()
indices = np.where((xmin <= xs) & (xs <= xmax) & (ymin <= ys) & (ys <= ymin)) 
```

# c# - c# 循环和求和数据

> ID：14689562
> 
> 赞同：0
> 
> 时间：2013-02-04T15:07:51.960
> 
> 标签：c#, image

我在 PictureBox1 中有 image_1。我想扫描这张图片中间的一个矩形部分，比如 x 轴上大约 300 到 500，y 轴上大约 300 到 450。当我浏览这一部分时，我想将所有像素的值相加并得到它们的平均值。

然后我在测试图像 PictureBox2 中有 image_2。这是第一个图像的副本，但 PictureBox2 上有一个滚动条。如果我随后在与第一张图像相同的位置扫描第二张图像，则对该矩形内的每个像素值求和并获得它们的平均值，这些值应该与我使用 image_1 获得的值完全相同。

现在，我将使用 PictureBox2 上的滚动条在垂直 y 轴上稍微向上移动 image_2，然后在与之前相同的固定位置重新扫描，将像素值相加并获得它们的平均值。这些值应该不同，因为我正在扫描图像的不同部分。然后我重复这个过程，在 image_2 上的 y 轴上有不同程度的差异，以获得值读数。

这只是为了证明一个概念。在固定的矩形位置扫描图像，求和和平均值足以最终缩小值，以便可以定位对象的开始。

无论这是否被认为是可能的，我都想尝试一下。请指教最简单的方法。现阶段没有必要尝试最快或最有效的方法，纯粹是目前最好的最简单的方法

我可以简单地这样做吗？

```
namespace imageAlign
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        private void button1_Click(object sender, EventArgs e)
        {
            Bitmap myImage1 = (Bitmap)pictureBox1.Image;
            OpenFileDialog ofd1 = new OpenFileDialog();
            if (ofd1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {
                pictureBox1.Image = Image.FromFile(ofd1.FileName);

                        // get pixel value and store it in array, sum and average it so it can Be compared to image2
                int sum = 0;
                         for (int i = 0; i > 300 && i < 500; i++)
                         {
                             for (int j = 0; j > 300 && j < 450; i++)
                            {
                                int[] img1 = new int[i];
                                sum += img1[i];
                                MessageBox.Show(sum);
                                 //Color pixel = img1.GetPixel(i,j);
                                 //sum and average pixel values in array
                    }
                }
            }

        } 
```

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:53:22.547

您对循环工作方式的概念是错误的。这个循环永远不会循环。

```
 for (int i = 0; i > 300 && i < 500; i++) ... 
```

因为`i`是`0`在开头，所以条件`i > 300`不满足，循环甚至不会开始循环。改为这样写：

```
 for (int i = 300; i < 500; i++) ... 
```

* * *

我假设您尝试通过将第二张图像与第一张（非滚动）图像进行比较来找出第二张图像滚动了多少。（你正在谈论一个你没有解释的问题的解决方案。）

为什么要使用平均值？这将非常昂贵，因为您必须为每个可能的位置计算数万像素的平均值。

首先我们需要知道滚动是如何发生的。仅水平，或仅垂直，或两者兼而有之？这将影响算法。

如果两个图像完全相同，我将只比较单个像素，如果您找到匹配的像素，则比较它旁边的像素，直到所有可用像素匹配或您检测到差异。

这是我想到的算法的粗略草图（在伪代码中）：

```
for every x in image1 up to image1.width - pattern.width
    for every y in image1 up to image1.height - pattern.height
        if match_found(x, y) then
            return x, y      -- this is the desired result
        end if                
    next
next
if we reach this point, we didn't find a match.

function match_found(x, y)
    for every xp in pattern     -- where pattern is a portion of image 2
        for every yp in pattern
            if image1[x + xp, y + yp] not equal pattern[xp, yp]
               return false
        next
    next
    return true
end function 
```

您还可以尝试调整为搜索字符串模式而开发的算法，例如 Boyer-Moore 算法，以解决此图像问题。基本上，如果找不到匹配项，Boyer-Moore 会尝试使用距离表跳过尽可能多的位置。请参阅Wikipedia 上[的 Boyer–Moore 字符串搜索算法](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)。

# asp.net - 需要强命名程序集 绑定时找不到零星文件

> ID：14689564
> 
> 赞同：0
> 
> 时间：2013-02-04T15:07:54.693
> 
> 标签：asp.net, iis-7, .net-assembly, strongname, fusion

我们的 asp.net 网络服务器偶尔会出现绑定问题，导致页面无法显示给最终用户。按刷新通常有效。

如果您查看事件日志，您会看到以下条目：

```
Exception information: 
    Exception type: FileLoadException 
    Exception message: A strongly-named assembly is required. (Exception from HRESULT:     0x80131044) 
```

我们的程序集确实有一个强大的名称，但是考虑到这在 99.9% 的情况下都有效，我不认为这是问题所在。我已经打开了融合绑定日志，当错误发生时，我们会得到一个绑定日志文件。

```
The operation failed.
Bind result: hr = 0x80070002\. The system cannot find the file specified.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll
Running under executable  C:\Windows\SysWOW64\inetsrv\w3wp.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = WEBFUND\WF6User
LOG: Where-ref bind. Location = C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET     Files\clients\6c02a9d4\233e1482\App_Web_emailpdf.aspx.afcecd13.5bzg9b2a.dll
LOG: Appbase = file:///D:/FinancialExpress/ClientsV21/
LOG: Initial PrivatePath = D:\FinancialExpress\ClientsV21\bin
LOG: Dynamic Base = C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\clients\6c02a9d4
LOG: Cache Base = C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\clients\6c02a9d4
LOG: AppName = 233e1482
Calling assembly : (Unknown).
===
WRN: Native image will not be probed in LoadFrom context. Native image will only be probed in default load context, like with Assembly.Load().
LOG: Start binding of native image App_Web_emailpdf.aspx.afcecd13.5bzg9b2a, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null.
LOG: IL assembly loaded from C:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET     Files\clients\6c02a9d4\233e1482\App_Web_emailpdf.aspx.afcecd13.5bzg9b2a.dll.
WRN: No matching native image found.
LOG: Bind to native image assembly did not succeed. Use IL image. 
```

我已经在服务器上复制了depends.exe 并运行它。它给出了两个未找到的文件：GPSVC.DLL 和 IESHIMS.DLL。但这会是问题吗？鉴于大多数页面都正确显示，如果这些文件丢失，它不应该总是不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:05:07.313

我认为这个问题的答案是避免将强命名的程序集放在 bin 文件夹中。显然微软不支持这一点，尽管它可能看起来有效。强命名程序集应放置在 GAC 中。

# asp.net - 排序时将 nvarchar 值“XX”转换为数据类型 int 时转换失败

> ID：14689565
> 
> 赞同：1
> 
> 时间：2013-02-04T15:07:56.650
> 
> 标签：asp.net, sql, sorting

我想按文章标题对我的网格视图进行排序，下拉列表如下图所示。我将我的网格视图连接到 dataSqlsouce。但它给了我这个错误：将 nvarchar 值“XX”转换为数据类型 int 时转换失败。 ![在此处输入图像描述](../Images/fd200794f924bdcf54a93825bd0b005b.png)

我在 datasqlsource 中的 Sql 代码是：

```
SELECT addtitle.title, 
       submitmanuscript.status, 
       addarticletype.type, 
       addarticletype.username                           AS Expr1, 
       addarticletype.articletype, 
       submitmanuscript.date, 
       submitmanuscript.articlenum, 
       addarticletype.articleid, 
       CONVERT (VARCHAR(10), submitmanuscript.date, 103) AS date1, 
       addarticletype.checkfinish, 
       rolinfo.* 
FROM   addarticletype 
       INNER JOIN addtitle 
               ON addarticletype.articleid = addtitle.articleid 
       INNER JOIN submitmanuscript 
               ON addarticletype.articleid = submitmanuscript.articleid 
       INNER JOIN rolinfo 
               ON addarticletype.username = rolinfo.username 
WHERE  ( addarticletype.articleid IN (SELECT articleid 
                                      FROM   addupload_4 AS AddUpload_4_1 
                                      WHERE 
         ( addarticletype.checkfinish = '0' )) ) 
       AND ( addarticletype.type = @Type ) 
ORDER  BY CASE 
            WHEN @order = 'AddArticleType.ArticleID' THEN addarticletype.articleid 
            WHEN @order = 'Title' THEN CONVERT(VARCHAR, title) 
            WHEN @order = 'family' THEN family 
            WHEN @order = 'AddArticleType.ArticleType' THEN 
            addarticletype.articletype 
          END 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:13:44.173

我认为问题出在您的 ORDER BY CASE 语句中-您正在尝试按整数和/或 nvarchars 进行排序，但它不允许这样做：

看到这个小提琴：

[http://sqlfiddle.com/#!3/db37b/1](http://sqlfiddle.com/#!3/db37b/1)

您可以通过将所有排序值转换为 nvarchar 来解决此问题，尽管@Gordons 的答案似乎更合适：

```
ORDER  BY CASE 
        WHEN @order = 'AddArticleType.ArticleID' THEN CONVERT(nvarchar,addarticletype.articleid) 
        WHEN @order = 'Title' THEN CONVERT(nvarchar, title) 
        WHEN @order = 'family' THEN CONVERT(nvarchar, family)
        WHEN @order = 'AddArticleType.ArticleType' THEN 
         CONVERT(nvarchar, addarticletype.articletype )
      END 
```

您可能只需要在 ArticleId 字段上使用 CONVERT，但我继续将它放在所有字段上，因为我不知道它们的数据类型。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:13:31.677

`case`语句必须选择一种类型才能返回。第一个`then`是导致问题的数字。

只需将子句拆分为单独的`case`语句：

```
ORDER BY (CASE WHEN @order = 'AddArticleType.ArticleID' THEN AddArticleType.ArticleID  end),
         (case WHEN @order = 'Title' then CONVERT(VARCHAR,Title) end),
         (case WHEN @order = 'family' THEN family end),
         (case WHEN @order = 'AddArticleType.ArticleType' THEN AddArticleType.ArticleType END) 
```

# php - PHP PCRE Unicode 转义

> ID：14689567
> 
> 赞同：2
> 
> 时间：2013-02-04T15:08:01.503
> 
> 标签：php, unicode, pcre, unicode-escapes

我正在使用一个包含带有“\uXXXX”的表达式的正则表达式数据库，这当然会破坏 PHP PCRE。

那么，两个部分的问题，有没有办法告诉 PCRE 接受这些序列？

我解决了这个问题，幸运的是，这只是一个序列，方法是：

> $regx = str_ireplace('\u00a7', '\xa7', $regx);

但是当我试图这样做时：

> $regx = preg_replace("/\\u(\w+)/i", "\x$1", $regx);

我仍然得到 -

> 警告：preg_replace() [function.preg-replace]：编译失败：PCRE 在偏移量 1 处不支持 \L、\l、\N{name}、\U 或 \u

它需要双重转义 \u => \\\\u，而不仅仅是 \\u，为什么/有更好的方法？注意：我实际上必须做同样的事情，更重要的是，才能将正确的字符串放入这篇文章。

更新：在我们的服务器上运行 5.3.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:14:11.730

```
$regx = preg_replace("/\\u(\w+)/i", "\x$1", $regx); 
```

这不起作用的原因是您需要双重转义反斜杠。

就目前而言，`\\u`是在 PHP 双引号字符串中，这意味着`\\`PHP 将其转义为单个斜杠。

然后将这个单斜杠提供给 PRCE，因此正则表达式解析器只看到`\u`. 这失败了，因为`\u`它不是正则表达式中的有效转义序列。

如果要实际匹配 PHP 正则表达式中的反斜杠字符，则需要实际提供四个反斜杠。

```
$regx = preg_replace("/\\\\u(\w+)/i", "\x$1", $regx); 
```

是的。它很丑。但就是这样。

从技术上讲，这适用于任何正则表达式反斜杠，所以理论上你`\w`也应该有一个双反斜杠，但是你可以摆脱它，以及大多数其他的，因为`\w`对 PHP 没有意义，所以它不会解析它。这是很有帮助的行为，但是当它出错时确实会让事情变得更加混乱，就像在这种情况下一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:28:11.330

\u 不适用于 PHP，但 \x 可以。PCRE文档的解释：

```
\x{hhh..} character with hex code hhh.. (non-JavaScript mode)
\uhhhh    character with hex code hhhh (JavaScript mode only) 
```

修饰符 u 不应该被遗忘。（“Javascript 模式”是一个“内部”标志）

另一种解释 Unicode 序列（\u 为 \U）的解决方案是使用 intl/Transliterator（PHP >= 5.4）：

```
$in = '\u0041\U00000062';
$out = transliterator_create('Hex-Any')->transliterate($in);
var_dump($out); # string(2) "Ab" 
```

# java - 如何检查偏好是否存在

> ID：14689570
> 
> 赞同：1
> 
> 时间：2013-02-04T15:08:18.590
> 
> 标签：java, android, menu, android-preferences

我将首选项菜单分为三个部分。如何在创建之前检查**“update_button”**是否存在`ClickListener`，因为我得到了`NullPointerException`，如果我要对没有**“update_button”**的地方进行分段。还是有其他方法？感谢您的时间和回答。

```
public static class PrefsFragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle aSavedState) {
        super.onCreate(aSavedState);
        Context anAct = getActivity().getApplicationContext();
        int thePrefRes = anAct.getResources().getIdentifier(
                getArguments().getString("pref-resource"), "xml", anAct.getPackageName());
        addPreferencesFromResource(thePrefRes);
        try {
            Preference button = (Preference) findPreference("update_button");
            button.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {
                @Override
                public boolean onPreferenceClick(Preference arg0) {
                    Toast.makeText(getActivity(), "Update Done.",Toast.LENGTH_LONG).show();
                    return true;
                }
            });
        } catch(Exception e) {
            e.printStackTrace();
        }               
    }    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:09:35.607

一种方法是检查 if `button`is `null`。

例子：

```
Preference button = (Preference) findPreference("update_button");
if (button != null) {
    button.setOnPreferenceClickListener(
        new Preference.OnPreferenceClickListener() {
            // code
        });
} 
```

# css - 在css中使用自定义字体？

> ID：14689578
> 
> 赞同：1
> 
> 时间：2013-02-04T15:08:51.707
> 
> 标签：css, fonts

有人可以帮忙吗，我正在尝试在我下载的css中生成自定义字体。

我一直在阅读应该可以工作的代码，但我认为我可能做错了。

我的字体叫做：ShadowsIntoLight.ttf

我正在尝试使其成为我的 div social_header 的字体系列。

这是我的代码：

```
@font-face {
    font-family: ShadowsIntoLight;
    src: url('assets/fonts/ShadowsIntoLight.ttf');
}

social_header {
font: 100% 'ShadowsIntoLight', Arial, Helvetica, sans-serif;
font-size:12px;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:15:52.517

看起来您没有`social_header`正确识别您的 div。有多种方法可以做到这一点，但下面是一些示例。

如果 social_header 是一个 ID：

```
#social_header { ... } 
```

如果 social_header 是一个类：

```
.social_header { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:47:05.340

首先，只需检查 ttf 的路径，然后试试这个：

```
.social_header {
    font-size:  12px;
    font-family: ShadowsIntoLight, Arial, Helvetica, sans-serif ; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T15:16:47.203

在 HTML 的头部输入此代码：

```
<link href='http://fonts.googleapis.com/css?family=Shadows+Into+Light' rel='stylesheet' type='text/css'> 
```

CSS：

```
font-family: 'ShadowsIntoLight', Arial, Helvetica, sans-serif; 
```

# django - 如何设置会话引擎？

> ID：14689579
> 
> 赞同：4
> 
> 时间：2013-02-04T15:08:53.253
> 
> 标签：django

在尝试使用 cookie 时，我尝试遵循供应商的文档。在文档中，我看到了这句话`Set SESSION_ENGINE to "django.contrib.sessions.backends.cache" for a simple caching session store.` ，但我找不到更改会话设置的地方。如何设置会话引擎？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-04T15:11:03.127

试着把`settings.py`

```
SESSION_ENGINE = "django.contrib.sessions.backends.cache" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T15:14:31.240

你完成教程了吗？如果没有，这是一个非常好的起点。

所有 Django 设置都在[`project/settings.py`文件](https://docs.djangoproject.com/en/dev/topics/settings/)中。

**更新评论：**

默认设置在`django/conf/global_settings.py`. ***请勿***修改此文件！那里的所有设置都可以在您的项目`settings.py`文件中被覆盖。

# java - 在 MBS 自定义页面中选择项目类型（新建 C 项目向导）

> ID：14689580
> 
> 赞同：2
> 
> 时间：2013-02-04T15:08:52.847
> 
> 标签：java, eclipse, eclipse-plugin, wizard, project-types

我到处搜索并在 cdt 论坛上问过这个问题，但无济于事。任何帮助将非常感激。

我已经使用 org.eclipse.cdt.managedbuilder.ui.newWizardPages 扩展了 New C Project 向导。我创建了几个用于输入用户参数的自定义页面，并且一切正常。

我要做的就是从新的 C 项目向导的第一页获取项目类型。

我已经看到，在单步执行 CDTConfigWizardPage （新 C 项目向导的第二页的类）时：

```
 IProjectType pt = handler.getProjectType(); 
```

其中 handler 是传递给 CDTConfigWizardPage 的构造函数的 MBSWizardHandler。

如何在我的自定义页面之一中获取此处理程序？

提前致谢，

安东尼

# tridion - Tridion 2011 with DD4T - UI 2012 设置似乎没有使用 BluePrint Context

> ID：14689583
> 
> 赞同：7
> 
> 时间：2013-02-04T15:09:12.457
> 
> 标签：tridion, dd4t

我试图在我的应用程序中解决 UI2012 的几个问题，并且似乎无法让我的组件在正确的上下文中可编辑。我总是必须单击“在任何地方编辑此组件”或“本地化此组件”才能编辑某些内容。

我的蓝图目前非常简单：

*   00 - 空礼物
*   01 - 模式
*   02 - 通用功能
*   03c - 内容（id = 5）
*   03d - 设计
*   06 - 网站（id = 9）

这是我的 siteedit_config.xml

```
<?xml version="1.0" encoding="utf-8"?>
<siteEdit enabled="true" style="SiteEdit2012" tridionHostUrl="http://mycmsurl">
  <contextPublications>
    <contextPublication id="9" componentPublication="5" pagePublication="9" publishPublication="9" />
  </contextPublications>
</siteEdit> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T16:13:42.587

**蓝图上下文设置**在Experience Manager 仪表板中定义。打开任何启用 XPM 的页面，然后：

*   单击仪表板选项卡
*   点击设置
*   单击蓝图上下文设置
*   选择要更改默认设置的出版物（“已发布”出版物）
*   选择为此出版物创建新组件和页面的位置
*   应用更改

这应该这样做。

# python - 如何在 bash 脚本中捕获来自 Python 的输入

> ID：14689584
> 
> 赞同：1
> 
> 时间：2013-02-04T15:09:12.660
> 
> 标签：python, bash

我正在尝试通过以下方式将几个参数从 python 脚本传递到 bash 脚本：

```
input_string = pathToScript + " " + input1 + " " + input2 + " " + input3 + " " + input4 + " " + \
input5 + " " + input6 + " "  + input7 + " " + input8 + " "  + input9 + " "  + input10

args =  shlex.split(input_string)

p = subprocess.Popen(args) 
```

所有的`inputX`都是字符串。这些参数中的每一个都应传递给脚本，其路径存储在变量中`pathToScript`。我现在希望能够像往常一样在 bash 脚本中捕获这些参数：

```
#No input check yet...
history_file = "$1"
folder_history_file = "$2"
folder_bml_files = "$3"
separate_temperature = "$4"
separate_temperature_col_index = "$5"
separate_sight = "$6"
separate_sight_col_index = "$7"
separate_CO = "$8"
separate_CO_col_index = "$9"
separate_radiation = "$10" 
```

这会导致`line 61: separate_CO_col_index: command not found`所有这些行的错误，并且错误不会以与行排序相同的方式出现。换句话说，第 61 行的此类错误有时会在第 60 行的错误之前被捕获，这似乎来自 Eclipse 中的输出（我在 Eclipse 中使用 PyDev）。

不能像这样运行bash脚本吗？我已经尝试按照 ch 中的方法进行操作。17.1.1.1 这里，但我可能没有正确理解：[python docs](http://docs.python.org/2/library/subprocess.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:21:02.467

bash 中的错误出现是因为您在`=`. 你应该使用

```
history_file="$1" 
```

代替

```
history_file = "$1" 
```

当您在此处放置空格时，Bash 认为该行是命令调用并尝试`history_file`作为命令运行。

* * *

在您的 Python 脚本中，您可以简单地使用：

```
args = [pathToScript, input1, input2, ....] 
```

而不是你所拥有的。这更简单，并且如果参数包含空格（您当前的代码将失败），它将正常工作。构建`input_string`字符串只是为了将其拆分回下一行是没有意义的。

# c# - 根据值分隔 csv 文件

> ID：14689591
> 
> 赞同：0
> 
> 时间：2013-02-04T15:09:32.987
> 
> 标签：c#, csv

请考虑以下用分号分隔的 csv。

```
27356456;2;4001;3005;2100;20130125;
27356457;2;4001;3005;2100;20130125;
27356458;2;4001;3005;2100;20130125;
27356459;2;4002;3005;2100;20130125;
27356460;2;4002;3005;2100;20130125;
27356461;2;4006;3006;2104;20130125;
27356462;2;4006;3006;2104;20130125;
27356463;2;4006;3006;2104;20130125;
27356464;2;4006;3006;2104;20130125; 
```

我想根据位置 2、3 和 4 的值将以上行存储在单独的 csv 文件中（即，一个 csv 文件中的所有行 4001、3005、2100 和另一个文件中的所有 4002、3005、2100 以及所有行4006、3006 和 2104 在另一个文件中）。

这些位置的值在实际数据中可能会有所不同。我认为可以用Linq还是？任何提示将不胜感激。

```
private void ProcessTextFile(FileInfo csvFile)
{
  using (StreamReader sr = new StreamReader(csvFile.FullName, Encoding.UTF8))
  {
    while (sr.Peek() >= 0)
    {
       string line = sr.ReadLine();
       string[] words = line.Split(";");
       ...
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:17:56.663

```
var pathTemplate = @"C:\PrepareImport\{0}\{1}\{2}\filename.csv";
File.ReadAllLines(fileName)
    .GroupBy(x => x.Split(';').Skip(2).Take(3))
    .ToList()
    .ForEach(x => File.AppendAllLines(
        string.Format(pathTemplate, x.Key[0], x.Key[1], x.Key[2]), x)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:15:50.597

您只需要为每个文件创建一个唯一的密钥......就像......

```
string fileKey = string.Format("{0}.{1}.{2}", words[2], words[3], words[4]); 
```

只需附加到基于`fileKey`发现的新文件。

```
string filePath = @"C:\output\" + fileKey + ".csv";
File.AppendAllText(filePath, line); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:32:59.543

也许对于所有文件一个查询：

```
var allCsv = Directory.EnumerateFiles(dir, "*.csv")
    .Select(path => new
    {
        Path = path,
        Lines = File.ReadLines(path)
            .Select(l => new { Split = l.Split(';')})
            .Where(x => x.Split.Length >= 6)
            .Select(x => new { 
                Columns= x.Split
                    .Where((s, i) => i >= 2 && i <= 4) 
                    .ToList()
            }).ToList()
    })
    .ToList();

// now you have all you need:
foreach (var csv in allCsv)
    foreach(var csvLine in csv.Lines)
        Console.WriteLine("File:{0} Columns:{1}", csv.Path, string.Join(",", csvLine.Columns)); 
```

（**编辑**：我必须承认这是 Linq 不再可读的地方）：

# c# - nuget 2.2.3 中 nuget 包的 OutputPath 错误

> ID：14689601
> 
> 赞同：0
> 
> 时间：2013-02-04T15:10:12.480
> 
> 标签：c#, nuget, nuget-package

我正在命令行上创建一个 NuGet 包，如下所示：

```
nuget pack MyProject.csproj -Properties "Configuration=Release;Platform=AnyCPU;OutputPath=." -Build 
```

这适用于 NuGet.exe 2.1.3，但是当我使用 NuGet.exe update -self 更新到 NuGet.exe 2.2.3 时，现在运行此命令会中断并出现以下错误：

```
The output path property is not set for project 'MyProject.csproj'. Please check to make sure that you have specified a valid combination of Configuration and Platform for this project. Configuration='Debug' Platform='AnyCPU'. You may be seeing this message because you are trying to build a project without a solution file, and have specified a non-default Configuration or Platform that doesn't exist for this project.
Done building project "MyProject.csproj"
Failed to build 'MyProject.csproj' 
```

MyProject 确实存在于一个更大的解决方案中，但它不依赖于该解决方案中的任何其他项目。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:18:21.363

这是通过[http://nuget.codeplex.com/workitem/2920](http://nuget.codeplex.com/workitem/2920)解决的问题，应该很快更新。

# c# - 获取 ListView 的选中项

> ID：14689602
> 
> 赞同：1
> 
> 时间：2013-02-04T15:10:16.880
> 
> 标签：c#, windows-runtime, windows-store-apps

如何从 WinRT 中的 ListView 获取所选项目（对象）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:37:10.727

使用该[`SelectedItem`](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.primitives.selector.selecteditem)物业。您可以使用绑定：

```
<ListView x:Name="myListView" ItemsSource="{Binding Items}" SelectedItem="{Binding SelectedItem}" /> 
```

或者您可以从后面的代码访问该属性：

```
var item = myListView.SelectedItem; 
```

如果您[`SelectionMode`](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.selectionmode)不`Single`使用它[`SelectedItems`](http://msdn.microsoft.com/en-US/library/windows/apps/windows.ui.xaml.controls.listviewbase.selecteditems)。

# javascript - 在 iframe 中加载 Facebook 的替代方法

> ID：14689605
> 
> 赞同：1
> 
> 时间：2013-02-04T15:10:29.583
> 
> 标签：javascript, facebook, iframe, code-injection

我被要求建立一个网站，比如 2010 Skittles 社交媒体活动，你们中的一些人可能还记得（[http://blog.thoughtpick.com/2010/02/learn-social-media-by-example-skittles-steals- the-social-media-rainbow.html](http://blog.thoughtpick.com/2010/02/learn-social-media-by-example-skittles-steals-the-social-media-rainbow.html)）。

我的第一个想法是在 iFrame 中加载 Facebook。当然，不起作用（X-Frame-options）。下一个想法：注入 javascript 来创建叠加层：不，在 Facebook 上不可能，但在 YouTube 上工作。我能想到的最后一件事是重建 Facebook 的布局并通过他们的 API 捕获内容。这不是一个简单的解决方案。

长话短说：有没有一种流畅的方法可以在 Facebook 上创建叠加层或将网站加载到我网站的背景中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:13:05.490

您可以使用**PHP**作为 iframe 的替代方案来获取带有[cURL的页面。](http://php.net/manual/en/book.curl.php)

 **```
$header = NULL;
$cookie = NULL;    
$ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, $header);
    curl_setopt($ch, CURLOPT_NOBODY, $header);
    curl_setopt($ch, CURLOPT_URL, "http://www.facebook.com");
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_COOKIE, $cookie);
    curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_COOKIEFILE, dirname(__FILE__). '/cookies.txt');
    curl_setopt($ch, CURLOPT_COOKIEJAR, dirname(__FILE__) . '/cookies.txt'); //save cookies here
    curl_setopt($ch, CURLOPT_REFERER, "http://www.facebook.com"); // you don't need that line; it's just the referer
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);;
    $output = curl_exec($ch);
curl_close($ch);
echo $output; 
```

此外，使用 cURL，您将能够在页面输出处进行修改。**

# google-chrome - 天空中的铬

> ID：14689608
> 
> 赞同：1
> 
> 时间：2013-02-04T15:10:33.133
> 
> 标签：google-chrome, cloud

谷歌搜索并没有立即产生任何有用的东西，所以我想我会在这里问。有没有办法让我在远程位置运行的多个不同 Chrome 浏览器上测试我的 web 应用程序？我的意思不是仅仅取回截图——而是能够登录到有问题的 web 应用程序，尝试一些典型的操作......。

如果问题不太清楚 - 云测试服务中是否有浏览器，而不是像云中的 Mac 一样租用虚拟 mac 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:14:45.217

SauceLabs 有你需要的东西，但可能非常昂贵：

[https://saucelabs.com/](https://saucelabs.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:18:53.447

看看[http://www.browserstack.com/](http://www.browserstack.com/)

您可以在那里获得免费试用，（当前）个人每月费用为 19 美元。

# wmi - 远程检索序列号

> ID：14689621
> 
> 赞同：0
> 
> 时间：2013-02-04T15:11:07.627
> 
> 标签：wmi, serial-number

我试图创建一个程序或脚本来远程检索所有硬件（计算机、打印机等）的序列号，我只是想知道是否需要 WMI。

我知道基本的

```
wmic /NODE: "Computername" bios get serialnumber 
```

但这也会产生一些访问问题，因为如果我理解正确并且远程计算机配置为允许传入的 WMI 请求，您需要两台计算机上的管理员权限。

是否有必要为此使用 WMI，或者有其他方法可以解决这个问题吗？我知道 WMI 知道您可能想了解的有关计算机的任何信息，但我现在只对序列号感兴趣，而且我可能还会添加 Windows 环境。

因此，如果有任何我在寻找解决此问题的任何其他方式的提示，除了使用 WMI，因为它会导致许多其他挑战，并且目标是让用户尽可能简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-21T23:30:33.133

添加用户开关以提示管理登录，

wmic /USER: 管理员 /NODE: "计算机名" bios 获取序列号

还必须在目标节点防火墙上允许远程管理，否则它将失败，管理员与否

# git - Git-如何在 Teamcity 中签出特定版本（提交哈希）？

> ID：14689630
> 
> 赞同：8
> 
> 时间：2013-02-04T15:11:34.030
> 
> 标签：git, teamcity

我已经为 SVN 做了这个，但我找不到任何关于 Git 的说明。我想从一个分支构建到一个特定的提交哈希，如何在 TeamCity 中指定哈希？我相信配置应该进入**Branch Specification**。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T11:21:58.013

如果 TeamCity 知道此提交（即您可以在 TeamCity 更改日志中看到提交），那么您可以从该更改开始构建。每个提交的更改日志中都有一个小的运行构建图标。或者您可以使用自定义构建并从列表中选择此更改。

如果 TeamCity 对此提交一无所知，则目前无法触发构建，另请参阅[http://youtrack.jetbrains.com/issue/TW-5610](http://youtrack.jetbrains.com/issue/TW-5610)

# git - 如何解决 Git 中两个未合并提交的冲突？

> ID：14689631
> 
> 赞同：0
> 
> 时间：2013-02-04T15:11:34.983
> 
> 标签：git, github

有两个有冲突的提交。它们都没有被合并，那么如何解决冲突并重新设置主分支？

我现在只在我自己的分支上工作，我的提交与另一个开发人员的提交有冲突。我无法从远程获取她的代码，因此无法使用 mergetool 来解决冲突。

版本控制新手，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:42:25.063

从[git 文档](http://www.kernel.org/pub/software/scm/git/docs/v1.7.3/user-manual.html#resolving-a-merge)：

您会在有冲突的文件中看到类似的冲突标记。根据它应该是什么编辑你的文件并删除标记。

```
<<<<<<< HEAD:file.txt
Hello world
=======
Goodbye
>>>>>>> 77976da35a11db4580b80ae27e8d65caf5208086:file.txt 
```

或者您可以使用合并工具。您将获得一个很棒的 gui，向您展示每个提交的相互矛盾的部分。您必须安装一个合并工具。如果你这样做了，在 git 提示你合并冲突类型之后：

```
git mergetool 
```

如果您没有安装合并工具，请安装一个！

我用融合。[融合](http://meldmerge.org/)。您可以使用安装它

```
apt-get meld 
```

其他不错的选择是[Vimdiff](http://vimdoc.sourceforge.net/htmldoc/diff.html) [kdiff](http://kdiff3.sourceforge.net/)和[p4merge](http://www.perforce.com/product/components/perforce_visual_merge_and_diff_tools)

# html - 质量数怎么写 带有特定名称的标签？文件夹/服务器中命名的文件

> ID：14689632
> 
> 赞同：0
> 
> 时间：2013-02-04T15:11:46.267
> 
> 标签：html, image, file, tags, rewrite

我在一个服务器目录中有一堆图像文件

```
servername/images/picture-name.jpg 
servername/images/differentname.jpg  
servername/images/hundredmore.jpg 
```

我想一次性把它们变成一堆html标签。

```
<li><img src="http://domain.com/images/picturename.jpg"/></li>
<li><img src="http://domain.com/images/differentname.jpg"/></li>
<li><img src="http://domain.com/images/hundredmore.jpg"/></li> 
```

我的硬盘上的文件夹中也有图像。知道如何获取文件名并构建这些列表吗？为了参考我的技能水平，我只知道 html/css/ 和一点 javascript。我猜你必须以某种方式获取文件名并制作一个在获取的名称`"<li><img...."`之前和`"/></li>`之后写入的程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:34:00.887

如果您将文件命名为 1.jpg、2.jpg 等，那么这很容易。在 php 中它看起来像这样（编辑以反映名称而不是数字）：

```
$dir = "path to image folder";
$dh = opendir($dir);

$link = '"http://domain.com/images/';

while(($file = readdir($dh)) !== false)
{
   echo '<li><img src='.$link.$file.'" /></li>';

}

closedir($dh); 
```

javascript 看起来与此非常相似。如果要保留描述性文件名，则需要手动执行，或添加代码以从目录中读取文件名

# c++ - 我可以在调用纯虚函数时禁用异常吗？

> ID：14689639
> 
> 赞同：6
> 
> 时间：2013-02-04T15:12:08.310
> 
> 标签：c++, gcc

我有一些看起来像这样的代码：

```
class Writable {
public:
    virtual void putc(const char ch) = 0;
protected:
    virtual ~Writable() {};
};

class Readable {
public:
    virtual char getc() = 0;
protected:
    virtual ~Readable() {};
}; 
```

注意两个虚函数。编译这个（连同我的其他代码）使用`arm-none-eabi-gcc`，并链接`-fno-exceptions`产生这个输出：

```
arm-none-eabi-size  --format=berkeley bareCortexM.elf
   text    data     bss     dec     hex filename
 108948    2304    2372  113624   1bbd8 bareCortexM.elf 
```

用方法存根代替纯虚函数再次运行它会产生：

```
arm-none-eabi-size  --format=berkeley bareCortexM.elf
   text    data     bss     dec     hex filename
  47340    2296     304   49940    c314 bareCortexM.elf 
```

这种巨大的差异似乎是由于例外。有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T15:12:08.310

这篇博文对此进行了描述：[Smaller binary size with C++ on baremetal (g++)](http://elegantinvention.com/blog/information/smaller-binary-size-with-c-on-baremetal-g/)

> ### 提供一个`__cxa_pure_virtual()`实现
> 
> 如果你在任何地方使用纯虚函数但禁用了异常，你可能会注意到你的代码突然又膨胀了。
> 
> 这发生在我身上，花了一段时间才找到，哎呀！
> 检查最终二进制文件的汇编列表（来自`objdump -h -C -S`），看起来异常又回来了！
> 
> 我尝试过的一件事是与 链接`-nostdlib`，完全将 libstdc++ 排除在外。我提供了 malloc、realloc、free 和其他一些我使用的 stdlib 函数的虚拟实现，但随后`avr32-g++` 抱怨了一些我以前从未见过的东西：我丢失了 `__cxa_pure_virtual()`.
> 
> “<em>啊哈，”我想，“<em>这就是它！” 在 libstdc++ 中找到的该特定函数的源代码中，是对 的调用 `std::terminate()`，请[参见此处](http://gcc.gnu.org/svn/gcc/tags/gcc_4_4_3_release/libstdc++-v3/libsupc++/pure.cc)。那个电话在我可怜的 AVR32 的闪存中引发了一场可爱的派对， `-fno-exceptions`在他们进来的路上践踏。
> 
> 无论如何，`__cxa_pure_virtual()`当您调用纯虚函数时实际调用的是什么。就像`new`and一样`delete`，这可能是您无论如何都想要覆盖的东西，因此您自己的调试/跟踪代码可以为您提供有用的反馈。实现很简单，只要确保`extern "C"`名称不会被破坏：
> 
> ```
> extern "C" void __cxa_pure_virtual() { while(1); } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T10:44:14.660

我有同样的问题，但实现**__cxa_pure_virtual**对我没有帮助。

但对我来说，解决方案是在**-fno-exceptions**选项旁边添加**-fno-rtti 。**

# angularjs - 如何使用指数退避实现 angular.js 重试？

> ID：14689642
> 
> 赞同：3
> 
> 时间：2013-02-04T15:12:16.317
> 
> 标签：angularjs

如何在 angular.js 中使用指数回退实现重试逻辑？

1.  逻辑的正确位置是在 $httpProvider.requestInterceptors 中吗？
2.  我可以选择性地将它与某些 $http 服务一起使用而不是其他服务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-10T07:27:58.607

这是一个旧帖子，但这是我的想法。我会用一个`responseInterceptor`. 由于您可以返回另一个承诺，因此您可以决定如何重试。您可以访问拦截器中的 $http `config`，因此您可以添加特殊配置来确定回退应该是什么（或者是否应用重试逻辑）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-19T06:48:20.547

对于即将到来的人：使用一些预先可用的组件和模块似乎更 Angular。因此，您可以尝试其中一种[backo2](https://libraries.io/npm/backo2)或[angular-backoff](https://github.com/fraserxu/angular-backoff)

每个链接都有用法。但是不要使用 setTimeout，它不是那么 Angular，你应该使用 $interval 或 $timeout。

# c++ - 对 Boost timer::auto_cpu_timer 的未定义引用

> ID：14689657
> 
> 赞同：1
> 
> 时间：2013-02-04T15:13:27.117
> 
> 标签：c++, boost, cmake, static-libraries

我有一个 CMake 项目，它使用来自 boost 的 unit_test_framework 和文件系统库。我正在尝试使用`boost::timer::auto_cpu_timer`但无法将其链接到 Ubuntu 12.04。Win32 上的构建工作正常。

有问题的代码。

```
#include <boost/timer/timer.hpp>

long some_function()
{
    boost::timer::auto_cpu_timer t;
    ...rest omitted...
} 
```

我使用手工构建的 boost 1.52.0（完整；版本化；d、mt、mt-d、mt-s、mt-sd、s、sd；静态和共享）。

我在主 CMakeLists.txt 中使用以下配置（发现提升；工作正常）

```
set (Boost_USE_STATIC_LIBS ON)
set (Boost_USE_MULTITHREADED ON)
if (MSVC)   
    set (Boost_USE_STATIC_RUNTIME OFF)
else () 
    set (Boost_USE_STATIC_RUNTIME ON)
endif ()

find_package (
    Boost ${BOOST_VERSION_MAJOR}.${BOOST_VERSION_MINOR}.${BOOST_VERSION_MICRO} COMPONENTS           
    system filesystem unit_test_framework chrono timer REQUIRED
)

if (Boost_FOUND)
    include_directories (${Boost_INCLUDE_DIRS})
endif () 
```

在可执行文件的子项目中，我使用以下说明。如果没有 chrono，Win32 项目将无法链接。我还尝试使用 rt 和 pthread 库（来自发行版的 pthread），但无济于事。

```
target_link_libraries (
    <exename> ${Boost_SYSTEM_LIBRARY} ${Boost_FILESYSTEM_LIBRARY} ${Boost_UNIT_TEST_FRAMEWORK_LIBRARY} ${Boost_CHRONO_LIBRARY} ${Boost_TIMER_LIBRARY}       
    <other company libs>
) 
```

正是结果命令给了我错误。我添加了该`-Q -v -Wl,-t`部分以查看链接器正在尝试做什么。（boost 也是用`-std=c++0x`标志编译的，否则文件系统将无法工作）

```
/usr/bin/c++ -Q -v -Wl,-t -Wextra -fPIC -std=c++0x  -Wextra -fPIC -std=c++0x -D_DEBUG \
    <our object files> -o ../bin/<exe name> -rdynamic \
    <some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_system-gcc46-mt-sd-1_52.a \
    <some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_filesystem-gcc46-mt-sd-1_52.a \
    <some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a \
    <some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_timer-gcc46-mt-sd-1_52.a \
    <some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_chrono-gcc46-mt-sd-1_52.a \
    <our other static libs> 
```

来自链接器的日志。

```
/usr/bin/ld: mode elf_i386
/usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu/crt1.o
/usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu/crti.o
/usr/lib/gcc/i686-linux-gnu/4.6/crtbegin.o
/lib/i386-linux-gnu/libpthread.so.0
-lrt (/usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu/librt.so)
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_system-gcc46-mt-sd-1_52.a)error_code.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_filesystem-gcc46-mt-sd-1_52.a)operations.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_filesystem-gcc46-mt-sd-1_52.a)path.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)framework.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)progress_monitor.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)results_collector.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)results_reporter.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)test_tools.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)unit_test_log.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)unit_test_main.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)unit_test_monitor.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)unit_test_parameters.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)unit_test_suite.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)xml_log_formatter.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)xml_report_formatter.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)compiler_log_formatter.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)debug.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)execution_monitor.o
(<some dir>/libs/boost_1_52_0/stage_x86/lib/libboost_unit_test_framework-gcc46-mt-sd-1_52.a)plain_report_formatter.o
<our object files>
-lstdc++ (/usr/lib/gcc/i686-linux-gnu/4.6/libstdc++.so)
-lm (/usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu/libm.so)
-lgcc_s (/usr/lib/gcc/i686-linux-gnu/4.6/libgcc_s.so)
/lib/i386-linux-gnu/libc.so.6
(/usr/lib/i386-linux-gnu/libc_nonshared.a)elf-init.oS
(/usr/lib/i386-linux-gnu/libc_nonshared.a)stat64.oS
(/usr/lib/i386-linux-gnu/libc_nonshared.a)lstat64.oS
(/usr/lib/i386-linux-gnu/libc_nonshared.a)stack_chk_fail_local.oS
/lib/i386-linux-gnu/ld-linux.so.2
-lgcc_s (/usr/lib/gcc/i686-linux-gnu/4.6/libgcc_s.so)
/usr/lib/gcc/i686-linux-gnu/4.6/crtend.o
/usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu/crtn.o 
```

似乎它没有使用计时器库中的任何东西。这是我不明白的部分。有没有人遇到过类似的问题？我是否缺少依赖项？产生的错误很简单：

```
<some file>.cpp:(.text+0x38): undefined reference to `boost::timer::auto_cpu_timer::auto_cpu_timer(short)'
<some file>.cpp:(.text+0x4e8): undefined reference to `boost::timer::auto_cpu_timer::~auto_cpu_timer()'
<some file>.cpp:(.text+0x543): undefined reference to `boost::timer::auto_cpu_timer::~auto_cpu_timer()' 
```

我希望我没有忘记提及任何事情。提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:24:01.060

如果您遇到来自静态库的未定义引用的问题，您可以尝试明确告诉链接器包含整个存档，即使它（出于某种原因）认为不需要它。相关的编译器选项`-Wl,--whole-archive`必须放在它应该影响的静态库之前。更多背景可以在[这个问题](https://stackoverflow.com/questions/6054942)中找到。

# ios - UISlider 值的不同密度？

> ID：14689658
> 
> 赞同：1
> 
> 时间：2013-02-04T15:13:29.723
> 
> 标签：ios, cocoa-touch

关于如何在 UISlider 中实现不同的值密度，你有什么巧妙的想法/解决方案吗？我的意思是我们将在 UISlider 的左半边有 20 步，在 UISlider 的右半边有 100 步。这意味着最小值为 0，最大值为 120。但它们不会均匀分布，但左侧的密度会小得多。像这样>

|0---------------20----------------120|

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:32:44.360

假设您希望上半场从 0-20 线性发展，下半场从 20-120 线性发展，然后执行以下操作：

将滑块的范围设置为 0 - 200。然后，当您需要所需的值时，使用以下公式将滑块的值转换为所需的值：

```
if (slider.value <= 100) {
    desiredValue = slider.value / 5.0;
} else {
    desiredValue = slider.value - 80;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:19:08.973

我最近做了类似的事情，使用 n 次根数学来确定我`UISlider`的位置。我有几个滑块可以指示一个范围内的最小值和最大值，但由于大多数时候这些值倾向于全频谱的较低范围，所以我想更加强调它。为了实现这一点，我使用（在我的例子中）一个平方根函数来计算滑块的位置：

```
slider.value = sqrt(intValue/127.f); 
```

`127`是我范围内的最大值，这使我更加强调值谱的较低范围。有了这个，我在滑块上打了半满，值只有 32，而不是 64。您可以将其概括为：

```
slider.value = pow(intValue/127.f, (1/root)); 
```

where`root`是另一个供您使用的变量。值越高，`root`曲线在开始时越陡峭，在接近结束时越浅。

相反，如果您想将滑块的当前位置作为值读取，则只需反转上面的该函数：

```
myValue = (slider.value*slider.value) * 127; 
```

同样，您可以概括为：

```
myValue = pow(slider.value, root) * maxValue; 
```

# iphone - Cordova：本地通知的 iOS 限制

> ID：14689661
> 
> 赞同：0
> 
> 时间：2013-02-04T15:13:34.153
> 
> 标签：iphone, ios, objective-c, cordova, cordova-2.0.0

> **可能重复：**
> [每天在不同时间触发本地通知](https://stackoverflow.com/questions/10341476/fire-local-notification-every-day-on-different-times)

我正在使用[插件](https://github.com/DrewDahlman/Phonegap-LocalNotification)来创建本地通知。在 android 上，我只需创建所有本地通知，就完成了。在 iOS 上，通知[限制为 64 个。](http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html#//apple_ref/occ/cl/UILocalNotification)

我的问题：谁可以处理这个限制？

一些想法：

我可以创建某种缓冲区，但我不确定如何在 xcode 中做到这一点。此外，我需要定期检查是否可以将通知从缓冲区发送到 iOS。但是，如果应用程序没有运行，我怎么能这样做呢？我可以使用通知 AppDelegate handleOpenURL 吗？即使应用程序关闭，我将如何保留缓冲区？

# c# - 当单元测试时，在这个例子中使用验证来间接测试方法好吗？

> ID：14689667
> 
> 赞同：3
> 
> 时间：2013-02-04T15:13:57.853
> 
> 标签：c#, unit-testing, mocking

我想在下面的代码中测试 FindPolicyToBeResent()。我有几个可用的选项，但想知道如果我的方法（即最后一个选项可以），其他人将如何处理这种情况？

*   公开 FindPolicyToBeResent()。这不是一个选项，因为它仅出于测试原因而公开实现并使接口混乱
*   仅使用公共 API 进行单元测试，但这可能很困难，因为我从不直接在 return 语句中公开我正在过滤的集合，并且出于安全原因不能这样做。这意味着我只能进行有限的测试
*   通常我会在这种情况下将代码分解成一个新对象，但在这种情况下感觉不对，我无法预见这个过滤器会在系统中的其他任何地方重用，所以它不会比将方法公开和之前更好任何人都用单一责任棒打我（这是合理的），编码是一种平衡行为，我觉得它会打破保持简单的原则。感觉就像是创建一个类来为测试服务，而不是它实际上具有单独的单一职责。再加上它会导致文件和类膨胀。
*   我可以使代码成为 IEnumerable 的扩展方法，这将使其可测试，但我再次无法预见此过滤器会在其他任何地方使用，因此如果它保留在此类中会更有意义
*   最后一个选项并且更喜欢但可能被视为有点 hack 是使用 verify() 进一步测试 documentResenderRepository.CanPolicyBeResent(policy.Id) 的模拟，以查看它被击中了多少次。我不确定这是否是个好主意？想法？

我的偏好是最后一个选项，但它确实感觉有点脏，我在底部有一个例子

```
public class DocumentResendService : IDocumentResendService
{
    #region Member Variables
    ...
    #endregion

    #region Constructors
    ...
    #endregion

    #region Accessors
    ...
    #endregion

    #region Methods
    public IDocumentResendResponse ResendDocuments()
    {
        if (!IsInputsValid())
        {
            return response;
        }

        RecordRequestAttempt();

        if (RequestLimitIsReached())
        {
            return response;
        }

        FindPolicyToBeResent();

        if(PolicyCanNotBeResent())
        {
            return response;
        }

        RequestDocumentToBeResent();

        return response;
    }

    private bool IsInputsValid()
    {
        ..
    }

    private void RecordRequestAttempt()
    {
        ...
    }

    private bool RequestLimitIsReached()
    {
        ...
    }

    // I want to test this method which basically just filters the policies
    private void FindPolicyToBeResent()
    {
        var allPolicies = policyDocumentRepository.GetPolicy(AgentCode, Email, PostCode, SearchDate, BirthDate);

        policies = allPolicies.Where(currentPolicy => currentPolicy.IsActive() || currentPolicy.IsInTheFuture());

        if (policies.Count() == 0 )
        {
            policies = allPolicies.FilterToPolicyThatHasEndedMostRecently();          
        }
     }

    private bool PolicyCanNotBeResent()
    {
        if (policies == null || !policies.Any())
        {
            response.Add(ErrorCode.PolicyCanNotBeFound);

            return true;
        }

        foreach (var policy in policies)
        {
           // I could mock this line and use a verify here which policy id's are passed in
            if (documentResenderRepository.CanPolicyBeResent(policy.Id) == false)
            {
                response.Add(ErrorCode.UnableToResendDocument);
            }  
        }

        return response.Errors.Any();
    }

    private void RequestDocumentToBeResent()
    {
        ...
    }

    #endregion
} 
```

这是最后一个选项的单元测试解决方案，但是

```
[TestFixture]
public class FindPolicyToBeResentTest : DocumentResenderTestsBase
{
    private readonly List<Policy> allPolicies = new List<Policy>();

    public FindPolicyToBeResentTest()
    {
        var day = -250;

        for (int i = 1; i < 6; i++)
        {
            var policy = new Policy
            {
                Id = i,
                StartDate = DateTime.Now.AddDays(day)
            };
            day = day + 100;
            policy.EndDate = DateTime.Now.AddDays(day);
            allPolicies.Add(policy);
        }
    }

    private void SetUpDocumentResender(IEnumerable<Policy> policies)
    {

        SetUpObjectDefaultsForDocumentResenderCreation();

        policyRepositoryMock.Setup(y => y.GetPolicy(It.IsAny<string>(),
                                                    It.IsAny<string>(),
                                                    It.IsAny<string>(),
                                                    It.IsAny<DateTime>(),
                                                    It.IsAny<DateTime>()))
            .Returns(policies);

        documentResendService = CreateDocumentResendService();

        SetDocumentResenderDefaults();
    }

    [Test]
    public void PoliciesThatAreNotActiveOrAreInThePastShouldBeFilteredOut()
    {
        SetUpDocumentResender(allPolicies);

        documentResendService.ResendDocuments();

        foreach (var policy in allPolicies)
        {
            if (policy.IsActive() || policy.IsInTheFuture())
            {
                documentResenderRepositoryMock.Verify(x => x.CanPolicyBeResent(policy.Id), Times.AtLeastOnce());
            }
            else
            {
                documentResenderRepositoryMock.Verify(x => x.CanPolicyBeResent(policy.Id), Times.Never());
            }
        }
    }

    [Test]
    public void IfNoPoliciesAreFoundThatAreSuitableForDocumentResendingThenGetThePolicyThatHasMostRecentlyExpired()
    {
        var unsuitablePolicies = allPolicies.Where(x => x.IsActive() == false && x.IsInTheFuture() == false).OrderBy(x => x.EndDate);

        var policyWithClosestToEndDateToNow = unsuitablePolicies.ToList().Last();

        SetUpDocumentResender(unsuitablePolicies);

        documentResendService.ResendDocuments();

        documentResenderRepositoryMock.Verify(x => x.CanPolicyBeResent(policyWithClosestToEndDateToNow.Id), Times.AtLeastOnce());

        foreach (var policy in allPolicies.Where(policy => policy != policyWithClosestToEndDateToNow))
        {
            documentResenderRepositoryMock.Verify(x => x.CanPolicyBeResent(policy.Id), Times.Never());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T15:23:57.583

通过公共方法测试私有方法很好。如果您的代码足够模块化，则不应该有太多的设置代码才能使条件正确以进入您的私有方法。如果您确实发现自己设置了很多东西只是为了进入您的私有方法，那么您很可能在一堂课上做的太多了。

在您的情况下，我很想遵循您的第 3 点），并创建一个 PolicyFinder : IPolicyFinder 类。也许你现在不需要重用它，它让你的代码在未来更容易修改，让两个类更容易测试

（见[http://en.wikipedia.org/wiki/Single_responsibility_principle](http://en.wikipedia.org/wiki/Single_responsibility_principle)）

编辑：我没有完全阅读你的 3）要点，很抱歉用单一责任棒打你；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:15:59.653

您可以将方法标记为内部方法，而不是私有方法，然后使用 AssemblyInfo.cs 文件中的[InternalsVisibleTo](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)属性来允许单元测试程序集访问这些内部方法。例如，我的程序集 OVReadySDK 的 AssemblyInfo 文件中的此语句：

```
[assembly: InternalsVisibleTo("OVReadySDKUT, PublicKey=002400000480...5baacad")] 
```

允许我的单元测试程序集 OVReadySDKUT 中的测试方法访问 OVReadySDK 中的类和方法，就好像测试方法是相同的程序集一样。

通过搜索“InternalsVisibleTo 单元测试”，您可以找到很多该技术的示例。`InternalsVisibleTo`请注意，如果您的程序集已签名，则需要在语句中提供公钥参数。

# java - 正则表达式撇号

> ID：14689668
> 
> 赞同：1
> 
> 时间：2013-02-04T15:14:04.367
> 
> 标签：java, regex

我做了一个正则表达式：

`\b\w+((\w'\b)|('\w\w\b)|(\w'\w\b))`

我正在尝试匹配以下单词：`that's`、、`you're`和`something'`

我的问题是，虽然这是匹配的，但它并不匹配整个单词。 `that's`以匹配`that'`为例。

请问我做错了什么？

这是java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:30:05.357

问题是你的交替顺序。

匹配的原因`that'`是因为您的第一个替换是`\w'\b`. 如果您将第一个更改为`\w'\w\b`您应该会发现它`that's`现在可以正确匹配。

您应该[查看此页面](http://www.regular-expressions.info/alternation.html)以获取有关交替的更多信息。具体来说，底部涵盖了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:06:36.157

为什么不使用简单的正则表达式： ([a-zA-Z]*'[a-zA-Z]*)

* * *

### 演示：

```
String str = " something' that's you're my";
Pattern p = Pattern.compile("([a-zA-Z]*'[a-zA-Z]*)");
Matcher m = p.matcher(str);
while (m.find()) {
  String match = m.group();
  System.out.println(match);
} 
```

请参阅**[此演示](http://ideone.com/nSfnaY)**。

# linux - linux下的Plink超时和代理

> ID：14689671
> 
> 赞同：10
> 
> 时间：2013-02-04T15:14:21.453
> 
> 标签：linux, proxy, timeout, plink

我在 bash 中创建了一个脚本，它创建了与服务器列表的连接。每次连接后，如果成功，我执行一个命令。连接处于循环之下。

知道我使用 Plink。我的脚本可以工作，但是当服务器无法访问时，它会花费太多时间。当我想通过代理访问服务器时遇到了另一个问题。

我有两个目标：

*   在 Linux 下的命令行中配置 Plink 的超时时间以使其更短（“FATAL ERROR: Connection timed out”需要很长时间才会出现）。

*   将 Plink 的代理配置配置为具有等效的 SOCKS5 和 PuTTY 的代理主机名。

我不知道这是否可能。如果你有更好的方法，我会很高兴知道

问候， Mageni

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-29T18:44:58.787

由于您的客户端运行的是 Linux，我建议使用几乎可以肯定附带的 openSSH ssh 客户端，而不是 plink。

1) OpenSSH 的 ssh 客户端支持从命令行设置连接超时，例如让它在 5 秒后超时，您可以使用：

```
 ssh -o ConnectTimeout=5 <server> 
```

2）不完全是你所说的这个目标的意思。您是尝试通过 socks5 代理连接到 SSH 服务器，还是尝试通过使用 ssh 客户端将流量代理到运行 SSH 服务器的远程系统来在本地配置 socks5 代理？如果您详细说明，我可以修改此回复以包括如何做任何一个。

# vb.net - Visual basic 2012 IgnoreCase on if textbox.text = ""

> ID：14689674
> 
> 赞同：3
> 
> 时间：2013-02-04T15:14:26.743
> 
> 标签：vb.net, visual-studio-2010, ignore-case

如何忽略大写/小写字母这是我的代码：

```
if COMMAND_TEXT.Text = "command" then
    CONSOLE.AppendText("command entered!" & Environment.NewLine)
else
     CONSOLE.AppendText("Invalid command" & Environment.NewLine)
end if 
```

我正在制作一个简单的控制台，但是当我尝试输入 : Command 它没有找到任何东西，但是当我输入 : command 它只是执行我想要的代码。

我必须制作所有可能的文字吗？像这样 ：

```
if COMMAND_TEXT.Text = "command" then
    CONSOLE.AppendText("command entered!" & Environment.NewLine)
elseif COMMAND_TEXT.Text = "Command" then
    CONSOLE.AppendText("command entered!" & Environment.NewLine)
elseif COMMAND_TEXT.Text = "COMMAND" then
    CONSOLE.AppendText("command entered!" & Environment.NewLine)
else
     CONSOLE.AppendText("Invalid command" & Environment.NewLine)
end if 
```

还是有其他更简单的方法，例如 Java EqualsIgnoreCase

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T15:18:58.157

我不会*像*其他人建议的那样推荐大写或小写。这可能会在某些文化中引起问题，尤其是土耳其语。相反，使用[`String.Equals(String, StringComparison)`](http://msdn.microsoft.com/en-us/library/c64xh8f9.aspx)：

```
If COMMAND_TEXT.Text.Equals("command", StringComparison.CurrentCultureIgnoreCase) 
```

您可能想使用`InvariantCultureIgnoreCase`or `OrdinalIgnoreCase`- 这取决于上下文。

我还强烈建议您避免使用大喊大叫的名称，`COMMAND_TEXT`而改用更传统的名称。

# quickbooks - IPP .NET CustomerQuery 排除作业

> ID：14689675
> 
> 赞同：0
> 
> 时间：2013-02-04T15:14:29.770
> 
> 标签：quickbooks, intuit-partner-platform

我们如何使用 IPP .NET（QuickBooks Online）从 CustomerQuery 中过滤出 Jobs？

请参阅此线程以供参考（似乎未解决？）： [https ://idnforums.intuit.com/messageview.aspx?catid=87&threadid=16282](https://idnforums.intuit.com/messageview.aspx?catid=87&threadid=16282)

以下是*应该*排除乔布斯的相关行，但它不起作用......

```
Dim cq As New Qbo.CustomerQuery
cq.IncludeJobs = False
customers = cq.ExecuteQuery(Of Qbo.Customer)(context).ToList() 
```

谢谢，凯尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T02:31:00.240

这是 DevKit 中的一个错误。它没有通过请求正文中的 IncludeJobs 过滤器。

它将在下一个版本中修复，但这里有一个使用 DevDefined 的解决方法。

```
IEnumerable<Customer> customers = GetQboCustomers(dataService, 1, 100, false);

public List<Intuit.Ipp.Data.Qbo.Customer> GetQboCustomers(DataServices dataServices, int startPage, int resultsPerPage, bool includeJobs)
{
    StringBuilder requestXML = new StringBuilder();
    StringBuilder responseXML = new StringBuilder();

    var requestBody = String.Format("PageNum={0}&ResultsPerPage={1}", startPage, resultsPerPage);
    if (!includeJobs) { requestBody += "&Filter=IncludeJobs :EQUALS: false"; }

    HttpWebRequest httpWebRequest = WebRequest.Create(dataServices.ServiceContext.BaseUrl + "customers/v2/" + dataServices.ServiceContext.RealmId) as HttpWebRequest;
    httpWebRequest.Method = "POST";
    httpWebRequest.ContentType = "application/x-www-form-urlencoded";
    httpWebRequest.Headers.Add("Authorization", GetDevDefinedOAuthHeader(httpWebRequest, requestBody));
    requestXML.Append(requestBody);
    UTF8Encoding encoding = new UTF8Encoding();
    byte[] content = encoding.GetBytes(requestXML.ToString());
    using (var stream = httpWebRequest.GetRequestStream())
    {
        stream.Write(content, 0, content.Length);
    }
    HttpWebResponse httpWebResponse = httpWebRequest.GetResponse() as HttpWebResponse;
    using (Stream data = httpWebResponse.GetResponseStream())
    {
        Intuit.Ipp.Data.Qbo.SearchResults searchResults = (Intuit.Ipp.Data.Qbo.SearchResults)dataServices.ServiceContext.Serializer.Deserialize<Intuit.Ipp.Data.Qbo.SearchResults>(new StreamReader(data).ReadToEnd());
        return ((Intuit.Ipp.Data.Qbo.Customers)searchResults.CdmCollections).Customer.ToList();
    }

}

protected string GetDevDefinedOAuthHeader(HttpWebRequest webRequest, string requestBody)
{

    OAuthConsumerContext consumerContext = new OAuthConsumerContext
    {
        ConsumerKey = consumerKey,
        ConsumerSecret = consumerSecret,
        SignatureMethod = SignatureMethod.HmacSha1,
        UseHeaderForOAuthParameters = true

    };

    consumerContext.UseHeaderForOAuthParameters = true;

    //URIs not used
    OAuthSession oSession = new OAuthSession(consumerContext, "https://www.example.com",
                            "https://www.example.com",
                            "https://www.example.com");

    oSession.AccessToken = new TokenBase
    {
        Token = accessToken,
        ConsumerKey = consumerKey,
        TokenSecret = accessTokenSecret
    };

    IConsumerRequest consumerRequest = oSession.Request();
    consumerRequest = ConsumerRequestExtensions.ForMethod(consumerRequest, webRequest.Method);
    consumerRequest = ConsumerRequestExtensions.ForUri(consumerRequest, webRequest.RequestUri);
    if (webRequest.Headers.Count > 0)
    {
        ConsumerRequestExtensions.AlterContext(consumerRequest, context => context.Headers = webRequest.Headers);
        if (webRequest.Headers[HttpRequestHeader.ContentType] == "application/x-www-form-urlencoded")
        {
            Dictionary<string, string> formParameters = new Dictionary<string, string>();
            foreach (string formParameter in requestBody.Split('&'))
            {
                formParameters.Add(formParameter.Split('=')[0], formParameter.Split('=')[1]);
            }
            consumerRequest = consumerRequest.WithFormParameters(formParameters);
        }
    }

    consumerRequest = consumerRequest.SignWithToken();
    return consumerRequest.Context.GenerateOAuthParametersForHeader();
} 
```

# xhtml - XHTML facebook 喜欢按钮

> ID：14689681
> 
> 赞同：0
> 
> 时间：2013-02-04T15:14:54.043
> 
> 标签：xhtml, facebook-like

我目前正在加入一个像这样的 facebook 按钮

```
<div id="fb-root"></div>
<script type="text/javascript">
//<![CDATA[
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
//]]></script>
...
<span class="fb-like"></span> 
```

我的问题：

![facebook喜欢按钮](../Images/842892e4e1688e1adc1112303da40710.png) 类似的文字太宽。通常你使用数据标签来确定宽度

```
<span class="fb-like" data-width="150"></span> 
```

这将导致文档无效（数据标签不是 XHTML 有效的）。有没有办法在不破坏 XHTML 验证的情况下设置宽度？

```
<span class="fb-like" style="width:50px;"></span> 
```

将不起作用，因为跨度类中的 div 具有更大的宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:18:42.510

我不确定我是否了解您的目的，但我认为这就是您想要的：

```
<span class="fb-like" style="overflow: hidden; width: 50px;"></span> 
```

# iphone - 当我按下 UIButton 时，如何在主视图中创建小型自定义 UIView？

> ID：14689683
> 
> 赞同：1
> 
> 时间：2013-02-04T15:15:02.917
> 
> 标签：iphone, uiview, uibutton

亲爱的朋友，当我单击新建/添加视图按钮时，我如何在主视图中创建小的自定义 UIView，并且我需要为标签提供应该动态存储的文本，即当我打开该视图的应用程序以及该视图的相应文本时。

最后我需要安排像

```
 A      B
                     C      D
                     E      F
                     etc,, 
```

这里 ABCDEF 是带有文本标签的 UIView ...

请向我提出一些想法，我该如何实施

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:34:56.250

在 .h 文件中添加这个

```
NSString * LRStr;
int count;
int y; 
```

并在 .m 文件中

```
 -(void)viewDidLoad
        {
        LRStr = @"left";
        count=0;
        y=0;
        }

        - (IBAction)addView:(id)sender {

        if(count == 2 )
        {
        y=y+60;
        count = 0;
        }

            if ([LRStr isEqualToString:@"left"])
        {
           UIView * bGView = [[UIView alloc] init];
            bGView.frame = CGRectMake(10,y,50,50);
            bGView.backgroundColor = [UIColor clearColor];
            bGView.alpha = 0.8 ;
            [self.view addSubview:bGView];

            UILabel * alabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 50, 50)];
            alabel.text = @"Write here";
            alabel.adjustsFontSizeToFitWidth = NO;
            alabel.autoresizingMask = UIViewAutoresizingFlexibleWidth;
            alabel.backgroundColor = [UIColor clearColor];
           [bGView addSubview:alabel];
    LRStr = @"right"
        }else
        {
        UIView * bGView = [[UIView alloc] init];
            bGView.frame = CGRectMake(260,y,50,50);
            bGView.backgroundColor = [UIColor clearColor];
            bGView.alpha = 0.8 ;
            [self.view addSubview:bGView];

            UILabel * alabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 50, 50)];
            alabel.text = @"Write here";
            alabel.adjustsFontSizeToFitWidth = NO;
            alabel.autoresizingMask = UIViewAutoresizingFlexibleWidth;
            alabel.backgroundColor = [UIColor clearColor];
           [bGView addSubview:alabel];
    LRStr = @"left"
        }

 count++;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:37:27.507

在按钮单击事件上，根据您的需要以编程方式使用框架创建 UIView 您可以在循环本身的视图中添加标签或创建 UIView 的子类以在其中包含标签并将此视图添加到循环中的主视图.

# php - 重写从mysql到PDO的连接和查询

> ID：14689684
> 
> 赞同：0
> 
> 时间：2013-02-04T15:15:04.250
> 
> 标签：php, mysql, pdo

一直`MySQL`与典型的 PHP 一起使用`mysql_query`，`mysql_fetch_array`但现在我正在转向，`PDO: Prepared Statement`因为它将是未来。

我是新手并将其用于个人，所以我决定问你如何在规则中重写所有这些`PDO: Prepared Statement`

假设我们有以下数据库`users(id,name,job,number)`

```
CREATE TABLE `users` (
  `id` bigint(20) unsigned NOT NULL auto_increment,
  `name` varchar(255) default '0',
  `job` varchar(255) default NULL,
  `number` varchar(255) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=3 ;

INSERT INTO `users` VALUES (1, 'John', 'Plumber', '555');
INSERT INTO `users` VALUES (2, 'Iva', 'Reporter', '666');
INSERT INTO `users` VALUES (3, 'Robert', 'Writer', '777');
INSERT INTO `users` VALUES (4, 'Irin', 'Writer', '888'); 
```

现在这些都是正常的Mysql，所以任何人都可以重写以使用`PDO: Prepared Statement`

**1) 连接**

```
$DB["host"]   = "localhost";
$DB["dbName"] = "dbname";
$DB["user"]   = "dbuser";
$DB["pass"]   = "dbpass";
$link = mysql_connect($DB["host"],$DB["user"],$DB["pass"]) or die("Connection Failed");
mysql_select_db($DB["dbName"]); 
```

**2）从数据库中调用准确的条目**

```
$sql = "select * from users where job='Plumber'";
$reg = mysql_query($sql) or die(mysql_error());
$aee = mysql_fetch_array($reg);

echo $aee[name]; // should gives name John 
```

**3) 从数据库结果调用**

```
$qry="select * from users where job='Writer'";
$result=mysql_query($qry) or die($qry);

if(mysql_num_rows($result)=='0'){

echo "No results"; // if not found any for this conditional job

}else{
while($line=mysql_fetch_array($result)){

echo $line[name]."<br>"; // should gives Robert <br> Irin

}
} 
```

这真的对我有很大帮助，并且不鼓励我打开下一个新问题，`insert,update,delete`因为我相信这对像我这样的新手很有帮助~谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:31:08.077

[PDO 手册](http://php.net/manual/en/book.pdo.php)是在几乎任何情况下学习 PDO 的绝佳资源。准备好的陈述一开始可能看起来很奇怪而且很难，但是一旦你掌握了一些基础知识，你就会爱上它们……

PDO `SELECT`...

```
$db = new PDO("mysql:host=localhost;dbname=db", "user", "password");

$query = "SELECT * FROM users WHERE name = " . $db->quote($name);

$result = $db->query($query);

while($row = $result->fetch(PDO::FETCH_ASSOC)) {
    print_r($row);
}

$result->closeCursor(); 
```

PDO `INSERT`...

```
$query = $db->prepare("INSERT INTO users (first_name, last_name, email) VALUES (:fname, :lname, :email)");

// bind params
$query->bindParam(":fname", $firstName);
$query->bindParam(":lname", $lastName);
$query->bindParam(":email", $email);

// execute the query
$query->execute(); 
```

尽管有最后一个（简单）示例，我还鼓励您学习如何在一个查询中`INSERT`对[多个值进行查询](https://stackoverflow.com/questions/10060721/pdo-mysql-insert-multiple-rows-in-one-query)。它不仅比做许多 single `INSERT`s 快，它也被认为是一种很好的做法。

# java - 用于解析此字符串的正则表达式或 java 解决方案

> ID：14689688
> 
> 赞同：0
> 
> 时间：2013-02-04T15:15:15.387
> 
> 标签：java, android, regex, parsing

我正在输入命令`show vlan`并以这种格式接收数据，它是一个字符串：

```
switch# show vlan
VLAN Name                             Status    Ports                           
---- -------------------------------- --------- ------------------------------- 
1    default                          Active    Fa1/0, Fa1/1, Fa1/4, Fa1/6      
                                                Fa1/7, Fa1/8, Fa1/9, Fa1/10     
                                                Fa1/11, Gi0                     
2    VLAN0002                         Active                                    
3    VLAN0003                         Active    Fa1/5                           
6    VLAN0006                         Active                                    
999  VLAN0999                         Active    Fa1/2, Fa1/3
switch# 
```

我希望创建以 VLAN 编号开头并在达到 VLAN 编号时结束的新字符串。所以这里的字符串是：

```
(1)    1    default                          Active    Fa1/0, Fa1/1, Fa1/4, Fa1/6      
                                                       Fa1/7, Fa1/8, Fa1/9, Fa1/10     
                                                       Fa1/11, Gi0                     
(2)    2    VLAN0002                         Active                                    
(3)    3    VLAN0003                         Active    Fa1/5                           
(4)    6    VLAN0006                         Active                                    
(5)    999  VLAN0999                         Active    Fa1/2, Fa1/3 
```

我会在这里做什么，一个正则表达式，它测试一个数字后跟一个空格，但在它之前有一个 \r 或 \n？或者在 java 中使用 .charAt(i) 等类似的东西？然后子串呢？

我需要将这些字符串中的每一个拆分为带有空格分隔符的标记。我会使用 for 循环来遍历我猜的每个字符串。

如果后面跟着一个数字，我尝试在 \r\n 处拆分，对吗？

```
String[] parts = finalCommand.split("\r\n?=\\d"); 
```

但它不起作用？！我真的不明白为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:22:54.577

我不认为`split()`是您正在寻找的工具。看一下这个：

```
List<String> matchList = new ArrayList<String>();
Pattern p = Pattern.compile("(?m)^\\d+.*$(?:\r?\n(?!\\S).*$)*");
Matcher m = p.matcher(s);
while (m.find()) {
    matchList.add(m.group());
} 
```

正如您所说，续行的特征是行分隔符后面的空格。`\S`此正则表达式通过在行分隔符之后立即对非空白字符 ( ) 执行负前瞻来识别它们。

`(?m)`打开多行模式，允许并`^`匹配`$`各行的开头和结尾。请注意，在行分隔符中可选的是*回车*符( ) `\r`，而不是换行符 ( `\n`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:01:11.600

> 如果后面跟着一个数字，我尝试在 \r\n 处拆分，对吗？
> 
> ```
> String[] parts = finalCommand.split("\r\n?=\\d"); 
> ```
> 
> 但它不起作用？！我真的不明白为什么。

如果`finalCommand`是在你已经去掉了前导`#switch\r\n`和尾随`\r\nswitch#`之后，并且如果行中的行`finalCommand`确实由 分隔`\r\n`，那么 - 是的，这*几乎*是正确的。您唯一需要更改的是，您需要编写`(?=\d)`而不是`?=\d`：括号是前瞻断言语法的一部分。（否则`\n?=`被解释为“一个可选的`\n`，后跟`=`。）所以：

```
String[] parts = finalCommand.split("\r\n(?=\\d)"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T17:01:22.233

答案很简单，是某种括号问题

这不起作用：

```
String[] parts = finalCommand.split("\r\n?=\\d"); 
```

这样做：

```
String[] parts = finalCommand.split("(\r\n)(?=\\d)"); 
```

# .net - 实体框架模型优先导航属性约定

> ID：14689697
> 
> 赞同：1
> 
> 时间：2013-02-04T15:15:51.393
> 
> 标签：.net, entity-framework, entity-framework-5, navigation-properties, ef-database-first

我正在使用带有 edmx 文件的模型优先实体框架，该文件已从现有数据库“逆向工程”。

在大多数情况下，实体和导航属性已根据我的约定自动检测到，但缺少一些导航属性 - 例如：

**目前`Works.EditorUserID`是 的外键`Users.UserID`，但 Entity Framework 不会自动`Editor`在生成的对象上包含导航属性。**

我可以在我的数据库上使用更好的命名约定来允许这种情况发生吗？

谢谢

***更新：*** *我刚刚意识到实际上正在创建导航属性，但它的名称不是很有用 - 它正在创建一个名为`User`而不是`Editor`.*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T11:26:47.863

从现有数据库（也称为“[数据库优先](https://www.google.dk/search?q=ef%20database%20first)”）生成模型时，导航属性会自动指定相关表的名称。EF 不会尝试从外键列名称中提取额外的“元数据”来为导航属性确定更合适的名称。

如果您对给定的名称不满意，只需在模型中更改它。

# c++ - 使用类型特征调用 C++ 条件函数

> ID：14689699
> 
> 赞同：2
> 
> 时间：2013-02-04T15:15:53.857
> 
> 标签：c++, templates, typetraits

假设我有一个类模板`template <typename T> class X`

是否有可能使用类型特征或类似技术来调用 T 的（静态）方法，但前提是类型 T 声明了这样的方法，例如：

```
template <typename T> 
class X {
    static void foo(){
       if(has_method(T,bar)) //Something like this      
         T::bar(); //If T has no bar() method, then foo does nothing
    }

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:31:29.823

```
template <typename T>
class X {
public:
    static void foo() {
        foo_impl(static_cast<T*>(nullptr));
    }
private:
    // foo_impl #1
    template <typename U>
    static auto foo_impl(U*) -> decltype(U::bar(), void()) {
        U::bar();
    }

    // foo_impl #2
    static void foo_impl(...) {}
}; 
```

由于 SFINAE 规则， #1不是有效表达式`foo_impl`时不在重载集中，而是调用 #2。如果 #1 的类型推导确实成功，则它总是比省略号更好的转换。`U::bar()``foo_impl``foo_impl`

Ideone 演示：http: [//ideone.com/UKVmIB](http://ideone.com/UKVmIB)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:29:38.807

首先，您需要在编译时做出决定，否则，即使您从未进入分支，您也需要提供该函数。我可以想象这样的事情：

```
template <typename T, void (T::*)() > struct HasBar;

template <typename T>
void doBar( HasBar<&T::bar>* ) { T::bar(); }

template <typename T>
void doBar( ... ) {}

template <typename T>
class X
{
    static void f()
    {
        doBar<T>( 0 );
    }
}; 
```

这或多或少是一个经典的把戏。如果`&T::bar`失败（因为T没有成员bar），那么实例化`doBar( HasBar<...>)`失败，函数不加到重载集中，所以调用另一个。if`&T::bar`是一个合法的表达式，两个函数模板都可以成功实例化，并且在`0`匹配之前选择转换为指针`...`（这始终是确定函数重载决议时的最后手段）。

编辑：

我错过了函数是静态的这一事实。以上是针对非静态函数的。对于静态函数，将第一行更改为：

```
template <typename T, void (*)() struct HasBar; 
```

其余的应该按原样工作。

# android - 如何避免在 Android 中自动调用 OnFocusChangeListener

> ID：14689702
> 
> 赞同：1
> 
> 时间：2013-02-04T15:16:12.883
> 
> 标签：android, dynamic, focus

我的安卓应用有这个问题...

我有一个动态生成的屏幕，其中有几个 UI 组件，例如文本框等...我的问题是，当我单击调用此屏幕的按钮并创建文本框时，它们的处理程序（更具体地说：OnFocusChangeListener）是无需用户干预即可自动调用...

我该如何解决这个问题？是否有任何方法可以防止将焦点放在最近创建的元素上？

请帮帮我！

这是一些代码！

满足条件时，将创建这些控件！

```
if(tipoP.equals("TEXTO LIBRE")){

                //Variables a crear dinamicamente
                EditText et = new EditText(this);
                LayoutParams params2 = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT, (float) 0.3);

                //Se preparan dichas variables
                params2.setMargins(20, 0, 20, 0);
                et.setLayoutParams(params2);
                //et.setOnKeyListener(lii);
                et.requestFocusFromTouch();
                et.setOnFocusChangeListener(l);
                ll.addView(et);
                if(filas.length != 0){
                    //Log.e("la longitud es mayor que cero",filas2.length+"");
                    for(int j=0;j<filas.length;j++){
                        //Log.e("estoy en el for",j+"");
                        if(c.getInt(c.getColumnIndex("id_medicion")) == Integer.parseInt(filas[j][0])){
                            //Log.e("mediciones iguales",c.getInt(c.getColumnIndex("id_medicion"))+ " = "+ Integer.parseInt(filas2[j][0]));
                            et.setText(filas[j][1]);
                        }
                    }
                }
                if(filas2.length != 0){
                    //Log.e("la longitud es mayor que cero",filas2.length+"");
                    for(int j=0;j<filas2.length;j++){
                        //Log.e("estoy en el for",j+"");
                        if(c.getInt(c.getColumnIndex("id_medicion")) == Integer.parseInt(filas2[j][0])){
                            //Log.e("mediciones iguales",c.getInt(c.getColumnIndex("id_medicion"))+ " = "+ Integer.parseInt(filas2[j][0]));
                            et.setText(filas2[j][1]);
                        }
                    }
                }
                guardar g = new guardar();
                g.idmedicion = c.getInt(c.getColumnIndex("id_medicion"));
                otro2.add(g);
                ids.add(c.getInt(c.getColumnIndex("id_medicion")));
            } 
```

上面控件相关事件的处理程序！

```
OnFocusChangeListener l = new OnFocusChangeListener(){
        public void onFocusChange(View v, boolean hasFocus) {
            EditText et = (EditText) v;
            if(hasFocus == false){
                Log.e("OnFocusChangeListener","l");
                for(int i=0;i<rows.length;i++){
                    Log.e("for",i+"");
                    if(otro2.lastElement().idmedicion == rows[i][0]){
                        Log.e("iguales",otro2.lastElement().idmedicion + " == " + rows[i][0]);
                        otro2.lastElement().resultado = (String) et.getText().toString();
                        Log.e("resultado",otro2.lastElement().resultado);
                        break;
                    }
                }
            }
        }
    }; 
```

创建文本框时会自动调用最后一个！

# iphone - UIImageView 动画不起作用

> ID：14689704
> 
> 赞同：0
> 
> 时间：2013-02-04T15:16:20.070
> 
> 标签：iphone, ios, xcode, ipad, uiimageview

我正在尝试使用 UIImageView 为灯打开和关闭设置动画。我有两张图片，一张有发光，另一张没有。这应该很简单，我确信我之前已经完成了，没有问题，但我的代码无法正常工作。这是我所拥有的：

```
UIImage *glow = [UIImage imageNamed:@"Glow.png"];
UIImage *noGlow = [UIImage imageNamed:@"No Glow.png"];
NSArray *images = [NSArray arrayWithObjects:noGlow, glow, nil];

self.lampImage.animationImages = images;
self.lampImage.animationDuration = 1.0;

[self.lampImage startAnimating];

NSLog(@"%d", self.lampImage.isAnimating); // prints 1 
NSLog(@"%d", self.lampImage.animationRepeatCount); // prints 0 
```

目前我的 viewDidLoad 中有这段代码。如果我使用上面的代码运行应用程序，我看到的只是 NoGlow 图像。如果我交换图像数组中的顺序（glow、noGlow、nil）并再次运行应用程序，我只会看到 Glow 图像。

根据日志，它正在制作动画并且重复次数为 0，这意味着它应该无限期地保持动画。为什么我没有看到任何动画？

我在 iOS 5.1 和 6.1 模拟器中对此进行了测试，两者的结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:58:00.180

也许您的错误是文件或图像名称的不同名称。尝试用 No_Glow.png 重命名文件 No Glow.png 以免出错

# java - 如何从列表中投射 使用 Hibernate 查询语言时？

> ID：14689706
> 
> 赞同：1
> 
> 时间：2013-02-04T15:16:24.403
> 
> 标签：java, hibernate, nhibernate-mapping

我一直在研究一个hibernate/JPA项目，在开发过程中我创建了一个方法来检索一个名为**Appel_Offre** .java的对象列表，并且在运行时发生了一个异常......这是方法：我有一个对象**Appel_Offre.java**和另一个名为**Modalite_Appel_Offre.java**的对象 这里是这两个对象的映射：Appel_Offre.java

```
 @Entity
     @Table(name="Appel_offre")
     public class Appel_Offre {

@Id
@Column(name="num_app_offre",nullable=false, updatable=true)
private String num_app_offre;

@Column(name="nom_maitre",nullable=false, updatable=true)
private String nom_maitre;

@Column(name="objet",nullable=false, updatable=true)
private String objet;

@Column(name="date_depot",nullable=false, updatable=true)
@Temporal(TemporalType.TIMESTAMP)
private Date date_depot;

@Column(name="date_soumission",nullable=false, updatable=true)
@Temporal(TemporalType.DATE)
private Date date_soumission;

@Column(name="garantie",nullable=false, updatable=true)
private int garantie;

@Column(name="delai_livraison",nullable=false, updatable=true)
private int delai_livraison;

@Column(name="caution_provisoir_total",nullable=false, updatable=true)
private float caution_provisoir_total;

@Column(name="commentaire",nullable=false, updatable=false)
private String commentaire;

@Column(name="etat",nullable=false, updatable=true)
private String etat;

@OneToMany(targetEntity=Lot.class,mappedBy="appel_offre", cascade= CascadeType.PERSIST,fetch= FetchType.LAZY)
private List<Lot>  lots;

@OneToMany(targetEntity=Modalite_Appel_Offre.class,mappedBy="ao", cascade= CascadeType.PERSIST,fetch= FetchType.EAGER)
private List<Modalite_Appel_Offre>  mod; 
```

**Modalite_Appel_Offre.java**：

```
 @Entity
    @Table(name="Modalite_appel_offre")
    public class Modalite_Appel_Offre {

@Id
@TableGenerator(name="mod_id", table="modalite_id",pkColumnName="id_mod",        pkColumnValue="value of the id",allocationSize=1)
@GeneratedValue(strategy= GenerationType.TABLE, generator="mod_id")
private int id_mod;

@Column(name="nom_modalite")
private String nom_mod;

@ManyToOne
@JoinColumn(name="ao")
private Appel_Offre ao;
 //Getters & Setters 
```

在我的方法中，我想通过**Modalite_Appel_Offre.nom_mod检索****Appel_Offre**列表，这是代码：

 **```
 public static List<Appel_Offre> getAppelOffreByModalite(Modalite_Appel_Offre mod){
    List <Appel_Offre> lm=null;
    try{
         session=sf.openSession();
    session.beginTransaction();
     lm=(List <Appel_Offre>)session.createQuery("from Appel_Offre m , Modalite_Appel_Offre mod where mod.nom_mod= ?").setString(0, mod.getNom_mod()).list();
    }
   catch(Exception e){

   }
    finally{
        session.close();
    }
    return lm;
} 
```

当我在返回的列表上循环时：

```
 int i = 0;
    for (Appel_Offre ap : lap) {
        data[i][0] = ap.getNum_app_offre();
        data[i][1] = ap.getNom_maitre();

        i++;
    } //data is an array of String 
```

发生异常：

```
 java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to gest.BO.Appel_Offre 
```

我不明白的是我在**Appel_Offre**列表上循环，而循环类型是**Appel_Offre**为什么休眠会触发此异常？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:25:55.380

我认为这是您的查询：

```
从 Appel_Offre m ， Modalite_Appel_Offre mod where mod.nom_mod= ？

```

这不仅仅是要求 Appel_Offre 实例......它要求 Appel_Offre 加入 Modalite_Appel_Offre （您在 FROM 子句中有多个表）。所以，Hibernate 让你成为一个奇怪的列表，它将是这两个表的复合连接：不仅仅是 Appel_Offre 实例。我可能误解了查询应该做什么。但是，无论如何，您只需要 FROM 子句中的 Appel_Offre。就像是：

```
来自 Appel_Offre，其中 m.ao = ?

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:25:04.550

解决此问题的一种更简洁的方法是使用[addEntity](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html#objectstate-querying-nativesql)和[this](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)。

例子：

```
List cats = session.createSQLQuery(
    "SELECT {cat}.ID AS {cat.id}, {cat}.SEX AS {cat.sex}, " +
           "{cat}.MATE AS {cat.mate}, {cat}.SUBCLASS AS {cat.class}, ... " +
    "FROM CAT {cat} WHERE ROWNUM<10")
    .addEntity("cat", Cat.class)
.list() 
```

如果您不想使用方法，我认为您可以做的唯一方法是获取 List 并迭代并构造您想要的对象类型。**

# mpi - 如何知道 MPI 中进程在哪个内核上运行？

> ID：14689707
> 
> 赞同：0
> 
> 时间：2013-02-04T15:16:30.087
> 
> 标签：mpi

我目前正在从事一个项目，我需要知道该进程当前在 MPI 中运行的处理器的 coreid？MPI 中有一个名为**MPI_Get_processor_name( char *name, int *resultlen )**的函数。这只给出了进程正在运行的节点的名称。我想知道它正在运行的核心的 ID？可能吗？如果是这样，任何人都可以给我代码片段吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:27:45.593

这是为绑定它们的每个进程提供 coreid 的代码。这需要 Hristo Iliev 在上一个答案的评论中建议的 hwloc 库。

```
 #include <stdio.h>
    #include "mpi.h"
    #include <hwloc.h>

    int main(int argc, char* argv[])
    {
        int rank, size;
        cpu_set_t mask;
        long num;
        int proc_num(long num);

        hwloc_topology_t topology;
        hwloc_cpuset_t cpuset;
        hwloc_obj_t obj;

        MPI_Init(&argc, &argv);
        MPI_Comm_rank(MPI_COMM_WORLD, &rank);
        MPI_Comm_size(MPI_COMM_WORLD, &size);

        hwloc_topology_init ( &topology);
        hwloc_topology_load ( topology);

        hwloc_bitmap_t set = hwloc_bitmap_alloc();
        hwloc_obj_t pu;
        int err;

        err = hwloc_get_proc_cpubind(topology, getpid(), set, HWLOC_CPUBIND_PROCESS);
        if (err) {
        printf ("Error Cannot find\n"), exit(1);
        }

        pu = hwloc_get_pu_obj_by_os_index(topology, hwloc_bitmap_first(set));
        printf ("Hello World, I am %d and pid: %d coreid:%d\n",rank,getpid(),hwloc_bitmap_first(set));

        int my_coreid = hwloc_bitmap_first(set);
        int all_coreid[size];
        hwloc_bitmap_free(set);
        hwloc_topology_destroy(topology);
        MPI_Finalize();
        return 0;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:55:53.483

您的问题假设每个 MPI 进程都运行绑定到单个 CPU 内核。这不是许多集群 MPI 实现的默认行为。例如，Open MPI 具有必要的绑定机制，但必须使用`--bind-to-core`or`--bind-to-socket`选项显式启用它。另一方面，现代英特尔 MPI 版本出于性能原因默认启用绑定。由于这种差异，大多数集群 MPI 实现`MPI_GET_PROCESSOR_NAME`只是简单地返回执行节点的主机名，因为在一般情况下无法识别特定的处理器。

当每个进程运行绑定到一个核心时，通常可以通过读取进程的亲和掩码来获得绑定。这取决于操作系统，但有一些库可以将其抽象出来，例如[hwloc 库](http://www.open-mpi.de/projects/hwloc/)（Open MPI 的一部分，但作为一个完全独立的项目开发，因此可以单独使用）。在一般情况下也可以读取关联掩码 - 当进程未绑定时，关联掩码将简单地匹配系统关联掩码（即允许在所有处理器上执行）。

有些平台绑定是系统硬件工作的一部分，例如 IBM Blue Gene。每个 MPI 进程在一个且唯一可识别的处理器上执行，并`MPI_Get_processor_name`在每个调用进程中返回一个唯一的字符串值。

# d - 使用 Dlang 计算目录中的文件

> ID：14689708
> 
> 赞同：6
> 
> 时间：2013-02-04T15:16:30.650
> 
> 标签：d

我想要一种简单的方法来使用 D 计算目录中的文件数。

据我从 D 手册中可以看出， dirEntries 返回一个范围，但这没有长度属性。因此，我必须用计数器遍历结果，或者在传统数组中收集名称，我可以找到长度......有没有更好的方法？

```
auto txtFiles = dirEntries(".", "*.txt", SpanMode.shallow);

int i=0;
foreach (txtFile; txtFiles)
    i++;

writeln(i, " files found.."); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-04T18:40:04.247

范围通常没有`length`属性，除非它可以在`O(1)`. 任何不能更好地计算其长度的范围都不会`O(n)`具有`length`属性，因为它的效率太低了。获取没有属性的范围长度的惯用方法`length`是使用[`std.range.walkLength`](http://dlang.org/phobos/std_range.html#walkLength). `length`如果范围定义，则使用`length`；否则，它只是迭代范围并计算有多少元素。

您也可以使用[`std.algorithm.count`](http://dlang.org/phobos/std_algorithm.html#count)，但它旨在计算与谓词匹配的元素的数量，虽然它默认为为每个元素返回的谓词，`true`但效率低于`walkLength`，因为`walkLength`在迭代时不会调用元素上的任何内容它们，`length`如果它已被定义，它将使用它，而`count`永远不会。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T16:20:45.443

您可以使用[`count`来自`std.algorithm`](http://dlang.org/phobos/std_algorithm.html#count).

```
import std.algorithm, std.stdio, std.file;

void main() {
    writeln(count(dirEntries(".", "*.txt", SpanMode.shallow)), " files found");
} 
```

# java - 使用 HttpServletRequestWrapper 的请求中的自定义标头不会出现在客户端

> ID：14689712
> 
> 赞同：2
> 
> 时间：2013-02-04T15:16:37.380
> 
> 标签：java, http, servlets, header, request

我想在 Servlet 请求中添加一个自定义标头。

起初，我建立了一个`HttpServletRequestWrapper`类

```
public class HeaderRequest_DEBUG extends HttpServletRequestWrapper {

    private static final String DEBUG_NAME="Authorization";
    private static final String DEBUG_VALUE="foccalabindella";

    public HeaderRequest_DEBUG(HttpServletRequest request) {
        super(request);
    }

    @Override
    public String getHeader(String name) {
        if(name.equalsIgnoreCase(HeaderRequest_DEBUG.DEBUG_NAME)){
            return HeaderRequest_DEBUG.DEBUG_VALUE;
        }
        return super.getHeader(name);
    }

    @Override
    public Enumeration getHeaderNames() {
        //create an enumeration of the request headers

        //create a list
        List list = new ArrayList();

        //loop over request headers from wrapped request object
        HttpServletRequest request = (HttpServletRequest)getRequest();
        Enumeration e = request.getHeaderNames();
        while(e.hasMoreElements()) {
            //add the names of the request headers into the list
            String n = (String)e.nextElement();
            list.add(n);
        }

        list.add(HeaderRequest_DEBUG.DEBUG_NAME);

        //create an enumeration from the list and return
        Enumeration en = Collections.enumeration(list);
        return en;
    }

} 
```

因此，我构建了一个`Fileter`来包装标准请求：

```
public class Filter_DEBUG implements Filter{

    @Override public void init(FilterConfig config) throws ServletException {}
    @Override public void destroy() {}

    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {

        //if the ServletRequest is an instance of HttpServletRequest
        if(servletRequest instanceof HttpServletRequest) {
            //cast the object
            HttpServletRequest httpServletRequest = (HttpServletRequest)servletRequest;
            //create the FakeHeadersRequest object to wrap the HttpServletRequest
            HeaderRequest_DEBUG request = new HeaderRequest_DEBUG(httpServletRequest);
            //continue on in the filter chain with the FakeHeaderRequest and ServletResponse objects
            filterChain.doFilter(request, servletResponse);
        } else {
            //otherwise, continue on in the chain with the ServletRequest and ServletResponse objects
            filterChain.doFilter(servletRequest, servletResponse);
        }      
    }
} 
```

最后，我建立了一个测试页面：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>

    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Initial page</title>
    </head>
    <body>
         header: <%=request.getHeader("Authorization")%>
    </body>
</html> 
```

因此，对于 Firefox/Firebug，我遇到了这种情况：在浏览器窗口中，我收到了以下消息：

```
header: foccalabindella 
```

但在 Firebug 中，我没有看到该标题：

```
GET /myServer/jsp/welcome.jsp HTTP/1.1
Host: localhost:8080
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: it-IT,it;q=0.8,en-US;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Cookie: JSESSIONID=465C24CC9A113E270F72829E35155BBB
Connection: keep-alive 
```

为了确认这一点，如果我添加一个提交按钮并在 servlet 中读取请求，我没有那个标题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T17:36:37.437

当然，它不会出现在 Firebug 中。设置该标题的不是浏览器。在收到来自浏览器的请求**后**，是您自己在服务器端的代码执行此操作。在服务器端对该请求所做的任何更改，以欺骗浏览器发送的堆栈中剩余的服务器端代码，这些更改不会反映在浏览器发出的原始请求中。浏览器检索回来的只是 HTTP 响应。无法从 HTTP 响应更改初始 HTTP 请求。

无论您想到什么功能要求，您认为这是正确的解决方案，都需要以不同的方式解决。

# stanford-nlp - 是否可以获得一组包含短语的特定命名实体标记

> ID：14689717
> 
> 赞同：1
> 
> 时间：2013-02-04T15:16:47.147
> 
> 标签：stanford-nlp, named-entity-recognition

我正在使用斯坦福 CoreNLP 解析器来处理一些文本，并且有一些日期短语，例如“十月的第二个星期一”和“过去的一年”。该库会将每个标记适当地标记为 DATE 命名实体，但是有没有办法以编程方式获取整个日期短语？不仅仅是日期，ORGANIZATION 命名实体也会这样做（例如，“国际奥林匹克委员会”可能是给定文本示例中标识的实体）。

```
String content = "Thanksgiving, or Thanksgiving Day (Canadian French: Jour de"
        + " l'Action de grâce), occurring on the second Monday in October, is"
        + " an annual Canadian holiday which celebrates the harvest and other"
        + " blessings of the past year.";

Properties p = new Properties();
p.setProperty("annotators", "tokenize, ssplit, pos, lemma, ner, parse");
StanfordCoreNLP pipeline = new StanfordCoreNLP(p);

Annotation document = new Annotation(content);
pipeline.annotate(document);

for (CoreMap sentence : document.get(CoreAnnotations.SentencesAnnotation.class)) {
    for (CoreLabel token : sentence.get(CoreAnnotations.TokensAnnotation.class)) {

        String word = token.get(CoreAnnotations.TextAnnotation.class);
        String ne = token.get(CoreAnnotations.NamedEntityTagAnnotation.class);

        if (ne.equals("DATE")) {
            System.out.println("DATE: " + word);
        }

    }
} 
```

在斯坦福注释器和分类器加载之后，将产生输出：

```
DATE: Thanksgiving
DATE: Thanksgiving
DATE: the
DATE: second
DATE: Monday
DATE: in
DATE: October
DATE: the
DATE: past
DATE: year 
```

我觉得图书馆必须识别短语并将它们用于命名实体标记，所以问题是数据是否通过 api 以某种方式保存和可用？

谢谢，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:11:22.273

在对邮件列表进行讨论后，我发现 api 不支持这一点。我的解决方案是只保留最后一个 NE 的状态，并在必要时构建一个字符串。nlp 邮件列表中的 John B. 有助于回答我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:27:21.357

非常感谢，我也打算这样做。然而，斯坦福 NER API 支持`classifyToCharOffset`（或类似的东西）获取整个短语。我不知道，也许这只是您想法的实现：D。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-08T19:04:59.083

**命名实体**标注器和词性**标注**器是 CoreNLP 管道中不同的算法，似乎 API 使用者的任务是集成它们。

请原谅我的 C#，但这是一个简单的类：

```
 public class NamedNounPhrase
    {
        public NamedNounPhrase()
        {
            Phrase = string.Empty;
            Tags = new List<string>();
        }

        public string Phrase { get; set; }

        public IList<string> Tags { get; set; }

    } 
```

以及一些代码来查找所有顶级名词短语及其关联的命名实体标签：

```
 private void _monkey()
    {

        ...

        var nounPhrases = new List<NamedNounPhrase>();

        foreach (CoreMap sentence in sentences.toArray())
        {
            var tree =
                (Tree)sentence.get(new TreeCoreAnnotations.TreeAnnotation().getClass());

            if (null != tree)
                _walk(tree, nounPhrases);
        }

        foreach (var nounPhrase in nounPhrases)
            Console.WriteLine(
                "{0} ({1})",
                nounPhrase.Phrase,
                string.Join(", ", nounPhrase.Tags)
                );
    }

    private void _walk(Tree tree, IList<NamedNounPhrase> nounPhrases)
    {
        if ("NP" == tree.value())
        {
            var nounPhrase = new NamedNounPhrase();

            foreach (Tree leaf in tree.getLeaves().toArray())
            {
                var label = (CoreLabel) leaf.label();
                nounPhrase.Phrase += (string) label.get(new CoreAnnotations.TextAnnotation().getClass()) + " ";
                nounPhrase.Tags.Add((string) label.get(new CoreAnnotations.NamedEntityTagAnnotation().getClass()));
            }

            nounPhrases.Add(nounPhrase);
        }
        else
        {
            foreach (var child in tree.children())
            {
                _walk(child, nounPhrases);
            }
        }
    } 
```

希望有帮助！

# css - 带有css的div中的图像放置

> ID：14689720
> 
> 赞同：1
> 
> 时间：2013-02-04T15:16:59.240
> 
> 标签：css, image, html

对于我正在制作的网站，我必须创建以下块。

![替代文字](../Images/1bb2bea4a2ba910d43e5f3a80f877ca4.png)

我有以下 CSS，当与下面的 HTML 一起使用时，它会创建一个带有圆边和阴影的白框。

```
<style type="text/css">
    .stripeblock {
        width: 310px;
        border-radius: 12px;
        background-color: #fff;
        padding: 10px;
        box-shadow: 0 8px 6px -6px black;
    }
</style>

<div class="stripeblock">
    <h1>Just some title</h1>
    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to...</p>
</div> 
```

唯一缺少的是绿色水平条纹，我尝试了几件事，但无法正确插入。
我希望它通过 CSS 包含在内，而不是 div 中的单独元素。
这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:26:01.017

您完全可以做到这一点，无需任何额外的图像或标记。

只需使用 ':before' 伪元素来设置块的样式并将其放置在需要的位置。

试试这个：

```
.stripeblock:before {
    background: #c8d300;
    content: "";
    display: block;
    height: 7px;
    position: absolute;
    top:0;
    left: 20px;
    width: 125px;   
} 
```

并确保您添加`position: relative;`到块`.stribeblock`的`:before;`位置正确。

```
.stribeblock {
    position: relative;
} 
```

在这里查看结果：http: [//jsfiddle.net/qVFeT/](http://jsfiddle.net/qVFeT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:23:09.863

好吧，用背景图片来做

```
.stripeblock {
    width: 310px;
    border-radius: 12px;
    /*background-color: #fff;*/
    background:#fff url('some-rectangular-green-image.gif') no-repeat 0 0;
    padding: 10px;
    box-shadow: 0 8px 6px -6px black;
} 
```

# java - 跨多个类 JAVA 共享字符串

> ID：14689721
> 
> 赞同：0
> 
> 时间：2013-02-04T15:17:08.600
> 
> 标签：java

我想在java中的几个类之间共享一个字符串，但是字符串不是常量，所以通常的方法`public static final`不起作用。

我的意思是，我更新了字符串的值，这因使用而异。

目前我使用的代码是：

```
public String NewDestination;

 destination = "D:/Documents/NetBeansProjects/printing~subversion/fileupload/web/Uploaded/"; // main location for uploads (CHANGE THIS WHEN USING PREDATOR)
            File theFile = new File(destination + "/" + username);
            theFile.mkdirs();// will create a sub folder for each user (currently does not work, below hopefully is a solution) (DOES NOW WORK)
            System.out.println("Completed Creation of folder");
            NewDestination = destination + username + "/"; 
```

上面，它是通过将目标 + 用户名 + "/" 相加创建的，因此它不能是静态最终的，因为每次登录都会更改，但我仍然需要将值传递给另一个类，我该怎么做？

编辑：

我现在所做的是：

添加`public static String NewDestination;`到我的 FileUploadController.java

在我的 Mybean.java 中，我添加了`System.out.println(FileUploadController.NewDestination);`它，它仍然打印出 null :(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:19:53.047

听起来你想要一个`public static`非`final`字段。

但是，这将允许其他类也更改它。
最好是创建一个`private static`字段，以及一个`public static getDestination()`允许其他类读取它的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:20:26.110

请注意，您*不能*更改`String`. 字符串是不可变的。您正在传递对 a的*引用*`String`，它是会改变的*引用*，而不是底层的`String`.

如果每个类都需要一个正在变化的引用`String`，为什么不简单地`String`根据需要在方法中生成并让每个类调用：

```
originatingObject.getDestinationPath(); 
```

这在线程环境中更容易处理（当然比使用对使用`static`做出一些假设的实例更容易）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:33:32.017

Java 中的字符串数据类型是不可变的。在您的情况下，由于存储在变量“destination”中的值发生了变化，我建议使用 StringBuilder （这是 String 的可变伴生类）。

# java - Java 中的 ValueOf(80,8) 与 toString(80,8)

> ID：14689722
> 
> 赞同：0
> 
> 时间：2013-02-04T15:17:12.783
> 
> 标签：java, tostring, value-of

我有几个与这些包装类的方法有关的问题。

首先，为什么 Long（或 Integer）方法在 valueOf 方法中将 String 作为参数？而是在 toString 方法中采用数字原语？（见下面的例子）

其次，为什么下面列出的第二行代码不起作用（通过将 String 作为第一个参数）而第一行工作正常（通过将 long（或 int）作为第一个参数）。

两种方法都应分别以 String 和 Long 类型返回第一个参数中所述值的值，该值转换为第二个参数中指定的基数（在本例中为 8）。

```
String s = Long.toString(80,8)// takes a numeric primitive and it works fine.

Long l = Long.valueOf("80",8)// takes a string as first argument it does not compile,
                              //(as it was because in radix 8 cannot "read" the number 8
                              // and therefore it prompts an NumberFormatException. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:20:34.363

鉴于拥有多个方法做同样的事情是没有意义的，不同的方法用不同的参数做不同的事情是合乎逻辑的，一点也不奇怪。

> 首先，为什么 Long（或 Integer）方法在 valueOf 方法中将 String 作为参数？

所以它可以解析字符串并给你一个`Long`or`Integer`作为文档状态。

> 而是在 toString 方法中采用数字原语？

valueOf 将字符串转换为对象，toString 接受一个值并将其转换为字符串。鉴于这些几乎与您期望的相反的事情相反。

> 其次，为什么下面列出的第一行代码不起作用（通过将 String 作为第一个参数）而第二行工作正常（通过将 long（或 int）作为第一个参数）。

`80`是一个有效的十进制数，可以转换为八进制数。 `80`不是有效的八进制（或二进制），因此您无法将其解析为八进制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T15:21:15.157

1.  这些方法`String`分别从表示转换和转换为表示。你会期待什么？

2.  第一行代码调用了一个不带`String`参数的方法。它转换为 a `String`，那为什么要输入呢？这是输出

“80”不是有效的八进制数。8 不是八进制的数字。值 8 是“10”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T15:35:43.450

`Long.valueOf(String, int)`将 String 转换为`Long`.

`Long.toString(long. int)`将 a 转换`long`为字符串。

这两个函数都采用用于转换的基数。

[`Long.toString(long, int)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html#toString%28long,%20int%29)我建议看一下and的 JavaDoc [`Long.valueof(String, int)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html#valueOf%28java.lang.String,%20int%29)。该文档很棒，并且很好地解释了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T15:23:16.307

实际上这两种方法都是绑定的：

```
/** 
 * Returns the string representation of the <code>long</code> argument. 
 * <p> 
 * The representation is exactly the one returned by the 
 * <code>Long.toString</code> method of one argument. 
 * 
 * @param   l   a <code>long</code>. 
 * @return  a string representation of the <code>long</code> argument. 
 * @see     java.lang.Long#toString(long) 
 */ 
public static String valueOf(long l) { 
    return Long.toString(l, 10); 
} 
```

似乎`Long.toString()`第一个参数需要很长时间，请参见上面的代码。

# sql - SQL：返回包含具有相同值的行数的列

> ID：14689724
> 
> 赞同：2
> 
> 时间：2013-02-04T15:17:21.713
> 
> 标签：sql, sql-server-2008

我有一个查询，它从我的数据库中返回系统和区域，如下所示：

```
SELECT  Areas.ID AreaID,
    Areas.Name AreaName,
              Systems.*

FROM Systems
INNER JOIN Areas ON Areas.ID = Systems.AreaID
WHERE .... 
```

这将返回如下所示的数据：

```
|  AreaID   |  AreaName   | SystemName  | ...
|     1     |    area1    |     sys1    |
|     1     |    area1    |     sys2    |
|     1     |    area1    |     sys3    |
|     1     |    area1    |     sys4    |
|     2     |    area2    |     sys5    |
|     2     |    area2    |     sys6    | 
```

我想返回一个附加列，其中包含返回的每个区域中的系统数量，所以我最终得到如下内容：

```
|  AreaID   |  AreaName   | SystemName  |  noOfSystems  | ...
|     1     |    area1    |     sys1    |       4       |
|     1     |    area1    |     sys2    |       4       |
|     1     |    area1    |     sys3    |       4       |
|     1     |    area1    |     sys4    |       4       |
|     2     |    area2    |     sys5    |       2       |
|     2     |    area2    |     sys6    |       2       | 
```

IE 有 4 个系统的 area id 为 1 和 2 的 area id 为 2。

如何才能做到这一点？我确定我听说过这样做的内置函数，但我找不到我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:20:01.797

您将需要使用聚合函数`COUNT()`，然后`GROUP BY`. 这可以在相关子查询中完成：

```
SELECT  Areas.AreaID AreaID,
    Areas.areaname AreaName,
    s1.SystemName,
    (select count(systemname) 
     from systems s2
     where s1.areaid = s2.areaid
     group by areaid) noOfSystems
FROM Systems s1
INNER JOIN Areas 
    ON Areas.AreaID = s1.AreaID
WHERE .... 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8d60e/13)

或者您可以使用您加入的子查询来获取总数：

```
SELECT  Areas.ID AreaID,
    Areas.Name AreaName,
    s1.SystemName,
    s2.NoOfSystems
FROM Systems s1
INNER JOIN Areas 
    ON Areas.ID = s1.AreaID
INNER JOIN
(
    select COUNT(SystemName) NoOfSystems,
        AreaID
    from systems
    group by AreaID
) s2
    on s1.AreaID= s2.AreaID
WHERE .... 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8d60e/9)

此版本使用子查询来获取总计数，然后`Systems`如果需要，您可以将其连接回表以返回其他列。

或者，如果您的 RDBMS 具有此选项，则可以使用窗口函数[`Count() over()`](http://msdn.microsoft.com/en-us/library/ms189461%28v=sql.105%29.aspx)：

```
SELECT  Areas.ID AreaID,
    Areas.Name AreaName,
    Systems.SystemName,
    COUNT(SystemName) over(partition by Areas.ID, Areas.AreaName) as NoOfSystems
FROM Systems
INNER JOIN Areas 
    ON Areas.ID = Systems.AreaID
WHERE .... 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8d60e/10)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:19:21.750

使用这样的相关子查询：

```
SELECT 
  a.ID AreaID,
  a.Name AreaName,
  s1.*,
  (SELECT COUNT(s2.SystemName)
   FROM Systems s2 
   WHERE a.id = s2.AreasID) AS noofSystem
FROM Systems s1
INNER JOIN Areas a ON a.ID = S1.AreaID
WHERE .... 
```

**或者：**

```
SELECT  
    Areas.ID AreaID,
    Areas.Name AreaName,
    Systems.SystemName,
    COUNT(Systems.SystemName) AS noOfSystems  
FROM Systems
INNER JOIN Areas ON Areas.ID = Systems.AreaID
WHERE ...
GROUP BY 
    Areas.ID AreaID,
    Areas.Name AreaName,
    Systems.SystemName; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:23:42.807

这将为我们提供与当前行具有相同 AreaID 和 AreaName 的结果中的行数。由于我不确定 AreaName 是否是唯一的，因此我将其包括在计算中：

```
;WITH cte AS (
    -- Original query
    SELECT Areas.ID AreaID,
        Areas.Name AreaName,
        Systems.SystemName
    FROM Systems
        INNER JOIN Areas ON Areas.ID = Systems.AreaID
    --WHERE...
)
SELECT AreaID,
    AreaName,
    SystemName
    -- Here's where we get the count of rows returned for each unique area
    (SELECT COUNT(*) FROM cte WHERE AreaID = c.AreaID AND AreaName = c.AreaName) AS noOfSystems
FROM cte c 
```

以这种方式使用[公共表表达式](http://msdn.microsoft.com/en-us/library/ms190766.aspx)将允许我们使用原始查询而无需更改它。

# php - 服务器上的 jQuery keyup 更新文件

> ID：14689725
> 
> 赞同：0
> 
> 时间：2013-02-04T15:17:21.717
> 
> 标签：php, jquery, html

我的代码类似于下面的代码：

```
<?php
...
$file3 = fopen('.../rate.txt','r');
$rate_a = array(100);
for ($i=1; $i<=$n; $i++)
{
   $rate_a[$i]=fgets($file3);
}
fclose($file3);
for ($i=1; $i<=$n; $i++)
{
$x = $x.'
<select id="rate'.$i.'_" name="'.$rate.'">
<option value="'.$rate_a[$i].'" selected="selected">'.$rate_a[$i].'</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
</select>
<br>';
}
?>

<html>
<form action="sendreplayadmin" method="POST" enctype="multipart/form-data">

<?php echo $x; ?>

</form>
</html> 
```

一切正常，我的 HTML 代码使用 rate.txt 中每一行的选定值生成得很好。现在，当有人选择另一个值时，我想自动更新 txt 文件。我可以使用 jQuery 的 keyup 函数获取值，但我不知道如何编辑 txt 文件。我是否必须在 jQuery 中以某种方式执行 php 代码？或不？我不知道。

# oracle - Oracle：使用 JDBC url 的连接间歇性问题

> ID：14689727
> 
> 赞同：0
> 
> 时间：2013-02-04T15:17:26.773
> 
> 标签：oracle, oracle-sqldeveloper, database-administration

SQL 开发人员提供了多种连接数据库实例的方法。

如果我选择单独`Basic`提供`hostname`,`port`和`SID`输入框的方法，数据库连接运行没有任何问题。

但是，如果我选择`Advanced`方法，它整体提供了以下JDBC url：</p>

```
jdbc:oracle:thin:@hostname:port:SID 
```

并点击`Test`按钮，有时状态会显示`Success`，但有时会弹出如下错误消息：

```
Status : Failure -Test failed: Listener refused the connection with the following error:
ORA-12519, TNS:no appropriate service handler found 
```

那么这两种方法为什么以及如何存在这种差异呢？它是来自 SQL 开发人员的错误吗？

## 更新 1

我发现这个问题恰好发生在我运行具有 JNDI 连接到同一个数据库实例的 Java EE 应用程序时，所以如果其中一个是 JNDI，数据库实例侦听器不能容忍多个访问？我想我只是弥补...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:40:10.907

找到问题，简而言之，问题可以通过以下两种选择之一来解决：

1.  增加 Oracle 允许的连接大小
2.  减少 JNDI 允许的连接大小

第一个解决方案由 DBA 操作，但第二个可以由开发人员实现，在我的应用程序的 JNDI 设置中（我们在 Tomcat 上测试 JNDI），允许到池的最大连接数对于当前 Oracle 服务可以处理的太多：

```
<Resource name="jdbc/schema_A" auth="Container" type="javax.sql.DataSource"
    driverClassName="oracle.jdbc.driver.OracleDriver" url="jdbc:oracle:thin:@hostname:1521:orcl"
    username="app_A" password="app_A" maxActive="20" maxIdle="10" maxWait="-1" /> 
```

`maxActive="20" maxIdle="10"`太多因此错误消息，所以我将其更改为

```
<Resource name="jdbc/schema_A" auth="Container" type="javax.sql.DataSource"
    driverClassName="oracle.jdbc.driver.OracleDriver" url="jdbc:oracle:thin:@hostname:1521:orcl"
    username="app_A" password="app_A" maxActive="1" maxIdle="1" maxWait="-1" /> 
```

现在一切正常……干杯……

# html - 仅使用 CSS 使共享计数气泡的尖端部分

> ID：14689733
> 
> 赞同：0
> 
> 时间：2013-02-04T15:18:00.130
> 
> 标签：html, facebook, css

我最近在《卫报》的网站上发现了一个[不错的技巧。](http://www.guardian.co.uk/science/2013/feb/04/richard-iii-dna-bones-king)他们创造了这个漂亮的假 Facebook 分享按钮。

![在此处输入图像描述](../Images/f051f375fddb0a1a99475b3d8a349e2b.png)

有趣的一点是他们如何使份额计数泡沫的尖锐部分。这一切都是用 CSS 和 .facebook-share-count 跨度中的两个空元素完成的，这会产生气泡。这是HTML：

```
<span class="facebook-share">
    <a class="facebook-share-btn" href="http://www.facebook.com/dialog/feed?app_id=180444840287&amp;link=http://www.guardian.co.uk/science/2013/feb/04/richard-iii-dna-bones-king&amp;display=popup&amp;redirect_uri=http://static-serve.appspot.com/static/facebook-share/callback.html&amp;show_error=false" data-href="http://www.guardian.co.uk/science/2013/feb/04/richard-iii-dna-bones-king" data-link-name="Facebook Share">
        <span class="facebook-share-icon"></span>
        <span class="facebook-share-label">Share</span>
    </a><span class="facebook-share-count"><i></i><u></u>197</span>
</span> 
```

这是CSS。不过，我无法确切地弄清楚 the 和 the 是如何创建这个尖锐的位的。在我的检查员中，它们的计算宽度均为 0，高度为 1px。谁能告诉我他们是怎么做到的？

```
.facebook-share-count {
    float: left;
    background-color: #fff;
    border-width: 1px;
    border-style: solid;
    border-color: #cdd5e5;
    margin-left: 6px;
    margin-top: 1px;
    padding: 1px 2px;
    position: relative;
    height: 14px;
}

.facebook-share-count i,
.facebook-share-count u {
    border: solid transparent;
    border-right-color: #D7D7D7;
    top: 4px;
    left: -5px;
    display: block;
    position: absolute;
    height: 1px;
    border-width: 4px 5px 4px 0;
}

.facebook-share-count i {
    left: -3px;
    z-index: 5;
    border-right-color: white;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:39:35.223

您可以使用`:before`CSS 中的伪选择器插入一个看起来像箭头的块。实际的箭头形状由 CSS 中的边框技巧组成。

您可以在此处阅读有关此技术的更多信息： [http ://www.yuiblog.com/blog/2010/11/22/css-quick-tip-css-arrows-and-shapes-without-markup/](http://www.yuiblog.com/blog/2010/11/22/css-quick-tip-css-arrows-and-shapes-without-markup/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:54:00.293

正如 Axel 所说，它使用 :before 伪选择器和 :after 以及边框、边距和定位属性。如果您正在寻找一种很好的资源来帮助您构建带有示例中边框的箭头：http: [//cssarrowplease.com/](http://cssarrowplease.com/)

# c++ - C++ 的正则表达式有那么具体吗？

> ID：14689737
> 
> 赞同：-3
> 
> 时间：2013-02-04T15:18:22.293
> 
> 标签：c++, regex, c++11

很抱歉，这类似于家庭作业。但是，我无法使用 std::regex 解析天、月和年。我只是看不到缺少什么。

```
#include<iostream>
#include<string>
#include<vector>
#include<regex>

int main()
{
    std::vector<std::string> series;
    series.push_back("2013-02-01,54.87,55.20,54.67,54.92,2347600,54.92");
    series.push_back("2013-01-31,54.74,54.97,53.99,54.29,3343300,54.29");
    series.push_back("2013-01-30,54.84,55.35,54.68,54.68,2472800,54.68");

    const std::regex date("(\\d{4})-(\\d{2})-(\\d{2})");
    std::smatch dates;

    for (unsigned int  i = 0; i < series.size() ; i++)
    {
        if (std::regex_match(series[i], dates, date))
            std::cout << dates[1] << "\t" << dates[2] << "\t" << dates[3] << std::endl;
        else
            std::cout << "No match!" << std::endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T15:47:11.750

为此，请使用`regex_search`，而不是`regex_match`。`regex_match`要求正则表达式匹配**整个**目标文本；`regex_search`查找目标文本匹配的任何部分。或者您可以将正则表达式更改为以“.*”结尾以吞下目标文本的其余部分。

# php - 来自 facebook graph api 的多级 JSON 数据

> ID：14689743
> 
> 赞同：-2
> 
> 时间：2013-02-04T15:18:49.497
> 
> 标签：php, facebook, json, facebook-graph-api

嗨，我正在尝试从这里访问纬度和经度值->

```
https://graph.facebook.com/79537378027/albums 
```

这是我正在尝试的

```
$File= file_get_contents('https://graph.facebook.com/79537378027/albums');
$p=json_decode($File);
foreach ($p->data as $loc)
{
echo $loc->place[0].latitude;} 
```

但我没有得到价值。如果我尝试简单`$loc->latitude`，它不会给我任何东西，因为纬度是地方的子孩子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:36:26.877

试试这个：

```
<?php

$File= file_get_contents('https://graph.facebook.com/79537378027/albums');
$p=json_decode($File);
foreach ($p->data as $loc)
{
    if($loc->place) {
        echo $loc->place->location->latitude;
    }
}

?> 
```

# visual-studio-2010 - NuGet 2.2.3 扩展问题。无法连接到服务器？

> ID：14689747
> 
> 赞同：0
> 
> 时间：2013-02-04T15:19:03.040
> 
> 标签：visual-studio-2010, nuget, nuget-server

我有使用 NugGet 的项目。

我正在尝试构建项目，但出现下一个错误：

```
 ...

Error   88  Unable to find version '2.1.505.2' of package 'Unity'.  Common

Error   84  Unable to find version '1.0' of package 'CommonServiceLocator'. Common

Error   90  The command ""D:\Development\root\.nuget\nuget.exe" install "D:\Development\root\Common\packages.config" -source ""  -RequireConsent -solutionDir "D:\Development\root\ "" exited with code 1\.  common 
```

尝试在 NuGet 包管理器中下载包时，我也遇到错误。

**尝试还原软件包时出错。请再试一次** ![在此处输入图像描述](../Images/79f781052971f9f95a626e5ef37d495f.png)

默认的 Visual Studio 在线扩展搜索工作没有问题！

我没有使用代理：

![在此处输入图像描述](../Images/df45f2158972d94cfaa76580b10e08ed.png)

VS 2012 在管理员权限下运行。

还修改了 Visual Studio 配置：

```
<system.net>
<defaultProxy useDefaultCredentials="true" enabled="true">
<proxy usesystemdefault="True"/>
</defaultProxy>
<settings>
<servicePointManager expect100Continue="false" />
<ipv6 enabled="true"/>
</settings>
</system.net> 
```

但这无济于事。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T15:11:26.790

我也遇到了这个问题，但发现这是 NuGet 包管理器的故障。虽然我的包源已定义（默认的 nuget.org 和内部 nuget 库），但我必须取消选择，单击“确定”，然后重新打开并再次选择源。这样做后，“恢复丢失的包”选项成功。这是一个非常令人沮丧的故障，奇怪的是只影响了我的一个 VS2010 解决方案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:36:43.887

发现问题。默认情况下，Visual Studio 2012 中未设置 NuGet 的源。

![在此处输入图像描述](../Images/baeb1433c07d221f1fe9aa9c6607cd88.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-30T06:34:05.470

在包存储库中不存在一个/多个需要包的项目。我们有本地 nuget 存储库，在将项目添加到新 PC 后，无法恢复丢失的包，因为它们是旧的，并且只有存储库中存在的那些包的较新版本。

# javascript - 使用箭头键和 jQuery 移动项目

> ID：14689752
> 
> 赞同：0
> 
> 时间：2013-02-04T15:19:20.340
> 
> 标签：javascript, jquery, events

我有一个可以在形状内拖动的项目。我还可以使用键盘上的箭头键移动项目，使用：

```
$(document).bind('keypress', function(event) {
  if(event.which === 63232){ // up arrow key
    if(!event.shiftKey) howMuch = -1;   
    else if(event.shiftKey) howMuch = -10;   
    moveText(howMuch);   
  }
}); 
```

但是，至少在 FF 中，这不再起作用了。我警告了箭头按下时发生的事件，所有四个都返回零。

如何检测箭头键按下？哦，是的...javascript 或 jQuery。

谢谢你的时间，托德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:23:18.677

您使用的键码错误，向上箭头为 38：

```
$(document).bind('keypress', function(event) {
    if (event.which === 38) {
        moveText(event.shiftKey ? -10 : -1);   
    }
}); 
```

箭头键代码供参考：

*   左：37
*   上：38
*   右：39
*   下降：40

要查找其他键码，请查看[API 中的 keyPress()示例](http://api.jquery.com/keypress/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:27:05.440

不就是：

```
$(document).on('keypress', function(e) { // Note I used .on()
    if (e.keyCode == 38) {                // I never use .which
        howMuch = (e.shiftKey) ? -10 : -1;
    }
    moveText(howMuch); // never seen this function before, isn't that it?
}); 
```

# jakarta-ee - Google oAuth2 API 提供 401 UNAUTHORIZED

> ID：14689755
> 
> 赞同：0
> 
> 时间：2013-02-04T15:19:30.120
> 
> 标签：jakarta-ee, spring-social, google-oauth

我正在尝试通过 Spring Social 使用 google 凭据实现 Google oAuth2 API 以登录到我的 web 应用程序。

对谷歌的查询如下

```
 googleConnectionFactory = new GoogleConnectionFactory(myKey, mySecret);
    oauthOperations = googleConnectionFactory.getOAuthOperations();
    final String redirectUri = "http://localhost/googleCallback";
    final OAuth2Parameters params = new OAuth2Parameters();
    params.setRedirectUri(redirectUri);
    params.setScope("https://www.googleapis.com/auth/userinfo.profile");
    final String authorizeUrl = oauthOperations.buildAuthorizeUrl(
            GrantType.AUTHORIZATION_CODE, params);
    response.sendRedirect(authorizeUrl); 
```

一旦请求，我将被带到 Google 登录页面。网址显示`scope=https://www.googleapis.com/auth/userinfo.profile`

登录后，用户将被重定向回我的 webapp，并调用以下方法

```
 final String callbackUrl = "http://localhost/googleCallback";
    final AccessGrant accessGrant = oauthOperations.exchangeForAccess(code,
            callbackUrl, null);
    // THIS CRASHES WITH 401
    final Connection<Google> connection = googleConnectionFactory
            .createConnection(accessGrant);
    // THIS CRASHES TOO WITH 401
    new GoogleTemplate(accessGrant.getAccessToken()).userOperations().getUserProfile(); 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:07:31.917

我必须手动将访问令牌连接到 API url 才能使其工作。显然 Spring Social 在发送查询时没有设置访问令牌......

```
LegacyGoogleProfile profile = new GoogleTemplate(
accessGrant.getAccessToken()).getRestTemplate().getForObject(
"https://www.googleapis.com/oauth2/v2/userinfo?access_token="
                    + accessGrant.getAccessToken(),
LegacyGoogleProfile.class); 
```

# grails - Grails自定义侦听器，更新属性会生成其他事件吗？

> ID：14689759
> 
> 赞同：2
> 
> 时间：2013-02-04T15:19:42.703
> 
> 标签：grails, google-maps-api-3, listener, grails-orm

我需要从客户端域中的某些地址字段计算坐标，因此为了将域类与此要求分离，我添加了一个自定义侦听器，该侦听器使用 Google Maps API 来获取正确的值。

一切正常，但调试'我已经意识到更新侦听器内部的域属性会启动另一个更新事件，并且我的侦听器会为每次更新**调用两次 Google API 。**

有人遇到这个问题？？我究竟做错了什么？？

**领域：**

```
class Client{
  String address
  String city
  String country
  String postalCode
  double lat
  double lng
  ....
} 
```

**服务：**

```
class GoogleMapsService{
      static transactional=false
      def grailsApplication

      def geocode(String address){
        address=address.replaceAll(" ", "+")
        def urlApi=grailsApplication.config.googleMaps.apiUrl+"&address=${address}"     
        def urlJSON = new URL(urlApi)
        def geoCodeResultJSON = new JsonSlurper().parseText(urlJSON.getText())              
        return geoCodeResultJSON            
      }
} 
```

**事件监听器：**

```
class ClientListener extends AbstractPersistenceEventListener{
public boolean supportsEventType(Class<? extends ApplicationEvent> eventClass) {
    switch(eventClass){
        case [PreInsertEvent,
                        PreUpdateEvent, 
                        PostInsertEvent,
                        PostUpdateEvent,
                        PostDeleteEvent]:
            return true
        default:
            return false
    }
}        

protected void onPersistenceEvent(AbstractPersistenceEvent event) {
    if(!(event.entityObject instanceof Client)){
        return
    }

    switch(event.eventType) {
        //GOOGLE MAPS geocode
        case [EventType.PreInsert,EventType.PreUpdate]:
            this.updateCoords(event.entityObject)
            break

        //OTHER STUFF (notifications, no changing inside)
        case EventType.PostUpdate:
            //....
    }
}

private String composeAddress(Client cli){
    def resul=[cli.address,cli.city,cli.country,cli.postalCode]     
    return resul.findAll{it}.join(",")          
}

private void updateCoords(Client cli){
    def fullAddress=this.composeAddress(cli)
    if(fullAddress){
        def coords=googleMapsService.geocode(fullAddress)
        if (coords.status=="OK"){
            //**IMPORTANT STUFF THESE TWO LINES RAISE AN EVENT
            cli.lat=coords.results.geometry.location.lat[0]
            cli.lng=coords.results.geometry.location.lng[0]
        }
    }
}        
} 
```

**更新：**

实体在侦听器中为空，因此我无法从 preUpdate 使其工作，看起来有一个未解决的问题（[http://jira.grails.org/browse/GRAILS-9374](http://jira.grails.org/browse/GRAILS-9374)）

打算试试 SaveOrUpdate...

* * *

**大更新：**

我越来越近了，但仍然无法避免重复的呼叫。

由于我需要一个“saveOrUpdate”侦听器，而这个侦听器是特定于 Hibernate 的侦听器，因此我最终有两个侦听器：

*   ClientMailListener（Grails 自定义监听器，postinsert，postupdate，postdelete，对象没有变化）
*   ClientGeoListener（休眠监听器，映射为“保存更新”）

这个组合的状态是：

*   更新：好的，两个监听器都只调用一次
*   插入：KO！！，让我们更深入地了解一下。

**1.**它做了一个插入并调用postInsert grails监听器，**为什么？？？？**

```
ClientMailListener.onPersistenceEvent(AbstractPersistenceEvent) line: 45    
ClientMailListener(AbstractPersistenceEventListener).onApplicationEvent(ApplicationEvent) line: 46  
SimpleApplicationEventMulticaster.multicastEvent(ApplicationEvent) line: 97 
GrailsWebApplicationContext(AbstractApplicationContext).publishEvent(ApplicationEvent) line: 324    
ClosureEventTriggeringInterceptor.publishEvent(AbstractEvent, AbstractPersistenceEvent) line: 163   
ClosureEventTriggeringInterceptor.onPostInsert(PostInsertEvent) line: 129   
EntityIdentityInsertAction.postInsert() line: 131   
EntityIdentityInsertAction.execute() line: 90   
ActionQueue.execute(Executable) line: 273   
ClosureEventTriggeringInterceptor.performSaveOrReplicate(Object, EntityKey, EntityPersister, boolean, Object, EventSource, boolean) line: 250   
ClosureEventTriggeringInterceptor(AbstractSaveEventListener).performSave(Object, Serializable, EntityPersister, boolean, Object, EventSource, boolean) line: 203    
ClosureEventTriggeringInterceptor(AbstractSaveEventListener).saveWithGeneratedId(Object, String, Object, EventSource, boolean) line: 129    
ClosureEventTriggeringInterceptor(DefaultSaveOrUpdateEventListener).saveWithGeneratedOrRequestedId(SaveOrUpdateEvent) line: 210 
ClosureEventTriggeringInterceptor(DefaultSaveOrUpdateEventListener).entityIsTransient(SaveOrUpdateEvent) line: 195  
ClosureEventTriggeringInterceptor(DefaultSaveOrUpdateEventListener).performSaveOrUpdate(SaveOrUpdateEvent) line: 117    
ClosureEventTriggeringInterceptor(DefaultSaveOrUpdateEventListener).onSaveOrUpdate(SaveOrUpdateEvent) line: 93  
ClosureEventTriggeringInterceptor.onSaveOrUpdate(SaveOrUpdateEvent) line: 108   
SessionImpl.fireSaveOrUpdate(SaveOrUpdateEvent) line: 685 
```

**2.**然后调用save-update监听器，更新de对象

```
ClientGeoListener.onSaveOrUpdate(SaveOrUpdateEvent) line: 34    
SessionImpl.fireSaveOrUpdate(SaveOrUpdateEvent) line: 685   
SessionImpl.saveOrUpdate(String, Object) line: 677  
SessionImpl.saveOrUpdate(Object) line: 673 
```

**3.**随后再次调用postUpdate grails 监听**器，:(**

* * *

**最后更新**

最后尝试只使用一个听众来保持简单。看起来重点是在插入之后执行休眠“保存更新”侦听器，详细信息：

如果我禁用自定义侦听器离开休眠侦听器 (GEO)，则会发生以下情况：

**1.**插入客户端（空白坐标）并调用saveupdate监听器：

```
ClientGeoListener.onSaveOrUpdate(SaveOrUpdateEvent) line: 34    
SessionImpl.fireSaveOrUpdate(SaveOrUpdateEvent) line: 685   
SessionImpl.saveOrUpdate(String, Object) line: 677 
```

**2.**坐标更新，有更新

抱歉这个大更新，想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T07:10:14.760

Grails 在后台使用 Hibernate。通常，您不会更新`PreUpdate`事件内的属性。您可以这样做，但如果您不同时更新属性和底层证券`PersistentEntity`，您最终可能会出现一些不受欢迎的行为。

解释为什么您会收到两个更新的工作流程：

1.  您对域对象进行了更改，是时候持久化该事件了。
2.  Hibernate 决定要坚持什么。
3.  BeforeUpdate 触发，更新`lat`/`lng`属性。
4.  Hibernate 保留对象，但使用`lat`/的旧值`lng`。
5.  域对象现在`dirty`
6.  Hibernate 决定它需要持久化脏对象（现在使用正确的值）。
7.  BeforeUpdate 触发，从 API获取相同的`lat`/值。`lng`
8.  Hibernate 使用新值持久保存对象。
9.  域对象和持久对象现在匹配。冬眠很开心。

**避免双重更新的最简单解决方案是使用`SaveOrUpdate`事件，而不是`BeforeUpdate`因为这实际上发生在过程的早期。**

**但是，**由于您的目标是最大限度地减少不必要的 API 调用的数量，因此仍然值得使用它，`BeforeUpdate`因为在调用 API 之前手动检查您的实体是否肮脏可能比它值得付出更多的努力。因此，正如@Andrew 建议的那样，您要做的就是确保更新属性*和*实体，即：

```
event.entity.setProperty('lat', coords.results.geometry.location.lat[0])
event.entity.setProperty('lng', coords.results.geometry.location.lng[0])
cli.lat = coords.results.geometry.location.lat[0]
cli.lng = coords.results.geometry.location.lng[0] 
```

更新：我假设检查域对象是否脏可能很烦人，实际上是基于我必须为 NHibernate 编写的代码。这当然是 Grails，它应该像这样简单：

```
if (event.entityObject.isDirty()) { /* Call API */ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:19:39.160

而不是直接`lat`/ `lng`setter 访问，也许尝试使用`EntityAccess`. 有关示例，请参阅Grails 核心中的[AutoTimestamp 侦听器。](https://github.com/SpringSource/grails-data-mapping/blob/master/grails-datastore-gorm/src/main/groovy/org/grails/datastore/gorm/events/AutoTimestampEventListener.java#L74)

# sql-server-2008 - 选择多列 11 秒，仅选择一列 - 2 秒

> ID：14689770
> 
> 赞同：0
> 
> 时间：2013-02-04T15:20:19.653
> 
> 标签：sql-server-2008

```
with my_cte as
(
...
)
select c1
from my_cte 
```

这工作得很快（2 秒），但这

```
with my_cte as
(
...
)
select c1, c2, .. c9
from my_cte 
```

工作缓慢（11 秒）。

我知道您需要查询和执行计划，但恐怕我不能在这里发布它们。也许您可以为此提供一些理论上的理由？

**编辑** 罪魁祸首列似乎是来自具有大量记录的表的 nvarchar 列。我只从该表中选择 id - 它很快，但是当我选择 id 和 name 时 - 它很慢。

从执行计划来看 - 无论是（快速和慢速），Table spool（Lazy spool）的成本都超过 50%，不管是什么。

# c# - 为什么拖放在我的鼠标右键单击时不起作用？

> ID：14689771
> 
> 赞同：1
> 
> 时间：2013-02-04T15:20:22.290
> 
> 标签：c#, winforms, drag-and-drop, contextmenu

以下代码拒绝在鼠标右键单击时进行拖放。当我右键单击鼠标时，我确实看到了正确的上下文菜单，但我无法拖放，尽管我确实有 DragDrop、DragEnter 和 DragOver 的事件处理程序。是因为我不能有上下文菜单并在同一次右键单击时拖放吗？我究竟做错了什么？非常感激您的帮忙。

```
private void treeList1_MouseDown(object sender, MouseEventArgs e)
{
    TreeList tree = sender as TreeList;
    Point pt = tree.PointToClient(MousePosition);
    TreeListHitInfo info = tree.CalcHitInfo(pt);

    if (e.Button == MouseButtons.Right && ModifierKeys == Keys.None && tree.State == TreeListState.Regular)
    {
        if (nodeType == typeof(X))
        {
            tree.ContextMenuStrip = XContextMenu;
            tree.FocusedNode = info.Node;
            treeList1.AllowDrop = true;
            tree.AllowDrop = true;
        }
        currentFocusNode = tree.FocusedNode;
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:25:25.570

您没有调用**[DoDragDrop](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dodragdrop.aspx)**方法。

这是使用 DragDrop的[示例](http://codebetter.com/petervanooijen/2007/07/07/basic-drag-and-drop-in-winforms/)

在您的示例中，在`return;`

```
treeList1.DoDragDrop(currentFocusNode, DragDropEffects.Copy); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:11:29.117

例如，这是如何对 listView 进行拖放操作：

```
private void Form1_Load(object sender, EventArgs e)
{
    listView1.AllowDrop = true;
    listView1.DragDrop += new DragEventHandler(listView1_DragDrop);
    listView1.DragEnter += new DragEventHandler(listView1_DragEnter);
}

void listView1_DragEnter(object sender, DragEventArgs e)
{
    e.Effect = DragDropEffects.Copy;
}

void listView1_DragDrop(object sender, DragEventArgs e)
{
    listView1.Items.Add(e.Data.ToString());
} 
```

# syncfusion - PaletteGroupBar 出错

> ID：14689780
> 
> 赞同：0
> 
> 时间：2013-02-04T15:20:38.670
> 
> 标签：syncfusion

将 PaletteGroupBar 拖到我的网页上后，我变成了一条错误消息：

```
"Error Rendering Control - Palette GroupBar1 An unhandled exception has occurred. Value 
 does not fall within the expected range". 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:17:22.373

感谢您使用 Syncfusion 产品。

我们最终无法重现报告的问题。您能否与我们分享更多详细信息，例如您的 Essential Studio 和 .NET 框架版本，这将有助于我们进一步研究并尽快提供更好的解决方案？

此外，您可以通过 Direct-Trac 联系我们的支持团队，并会为您的查询获得及时的帮助。

[http://www.syncfusion.com/support/directtrac](http://www.syncfusion.com/support/directtrac)

谢谢，Syncfusion 团队。

# php - 对多个 codeigniter 项目使用相同的配置文件

> ID：14689787
> 
> 赞同：1
> 
> 时间：2013-02-04T15:20:59.993
> 
> 标签：php, codeigniter, directory-structure

我正在建立一个项目，我希望在其中使用相同的 codeigniter 系统 + 在不同网站之间共享一些通用模型、库甚至配置文件。

我已经将我的系统文件夹和一个缩小的应用程序文件夹放在 docs/include/codeigniter 中，并且我在每个网站的索引文件中定义了系统文件夹的路径。我想，为了使用这个应用程序文件夹中的模型、库和配置文件，我应该使用[https://www.codeigniter.com/userguide3/libraries/loader.html中的 add_package_path() 函数](https://www.codeigniter.com/userguide3/libraries/loader.html)

但是我在哪里可以拨打这个电话以确保它尽早加载？我什至希望能够共享 autoload.php 配置文件，但是如果我在索引控制器的构造函数中调用此方法，我会收到错误消息，因为 CI 需要在开始加载控制器之前使用一些配置文件.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T13:49:09.157

我不知道使用的解决方案`add_package_path()`，但这可以工作：

# 配置

首先，检查`application/config/autoload.php`.`$autoload['config']`

如果由于某种原因不适合您的目的：CodeIgniter 配置文件也只是 PHP 文件。因此，您可以制作自己的`common_config.php`文件，然后`require '../some_common_folder/common_config.php';`在 CodeIgniter 项目的配置文件中使用。

# 楷模

再次，参见`application/config/autoload.php`。`$autoload['model']`

您还可以在每个 CodeIgniter 项目的文件中定义自己`function __autoload($classname) {}`的`index.php`文件，您可以在其中加载/要求/包含任何您想要的内容。

# git - 多个 github 帐户：.ssh/config 中 Host 的值是什么？

> ID：14689788
> 
> 赞同：13
> 
> 时间：2013-02-04T15:21:01.397
> 
> 标签：git, github, ssh, ssh-keys

我试图了解 .ssh/config 和 .git/config 下的配置如何交互。

情况如下：我有两个独立的 github 帐户，我们称它们为 GH0 和 GH1，我想“无密码”地与这两个帐户进行交互，即在`~/.ssh/id_rsa.GH0.pub`和中使用 ssh 键`~/.ssh/id_rsa.GH1.pub`。目前这适用于 GH0，但不适用于 GH1。（例如，`push`对 GH1 的命令以`ERROR: Repository not found.\nfatal: The remote end hung unexpectedly.`;终止`ssh -T git@github.com`，但仅因为它连接`GH0`.）

这意味着对于这些 github 帐户中的每一个，我必须在 ~/.ssh/config 中有一个相应的部分，指定要使用哪个 ssh 密钥文件。（例如，GH0 的部分会有类似的东西`IdentityFile ~/.ssh/id_rsa.GH0`，等等）

问题是：我还必须在这些部分中添加什么？进一步来说，

> 我必须将什么作为`Host`关键字 in的参数`~/.ssh/config`？

到目前为止，我在这方面找到的信息对我来说毫无意义。在某些示例中，我看到类似

```
Host github.com
    Hostname github.com
    User git
    IdentityFile ~/.ssh/id_rsa

Host ac2.github.com
    Hostname github.com
    User git
    IdentityFile ~/.ssh/id_rsa_ac2 
```

“ac2”在哪里？第二个前缀是`Host`从哪里来的？？？

> 我在哪里可以找到我的 github 帐户的相应帐户？

我发现的一些信息导致人们猜测`Host`关键字的参数实际上是任意的，这意味着以下内容也可以

```
Host omgwtfbbq
    Hostname github.com
    User git
    IdentityFile ~/.ssh/GH0

Host 4.8.15.16.23.42
    Hostname github.com
    User git
    IdentityFile ~/.ssh/GH1 
```

但如果是这样，这就提出了另一个问题：（或 github）***如何`git`知道这两个部分中的哪一个用于任何给定的命令？***

同样，我*猜*¹这将在项目`.git/config`文件中的某个`[remote ...]`部分下指定，但是如何？

¹[我必须求助于猜测，因为一方面，我无法找到解释 .git/config 中键值对的文档。我找到的最接近的是 git-config 的手册页，但我在此页面中找不到任何关于某个部分`url = ...`下的字段的文档。`[remote ...]`git-remote 的手册页也没有关于该字段的文档。]

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T09:21:18.683

请执行下列操作：

```
$ git remote add omgwtfbbq git@omgwtfbbq:user/repo.git
$ git pull omgwtfbbq master 
```

这将使用`Host`您`~/.ssh/config`在 git 主机中定义的别名，因此将使用您设置的 IdentityFile。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T17:15:07.000

是的，`Host`.ssh/config 文件中的行是别名。您使用它来代替`github.com`，并且任何可以正确使用 SSH 的东西都将读取文件并交换真实的主机名，并且还使用给定的密钥文件和用户名（如果已给出）。

# xcode - 找不到设置 Xcode 标志的位置

> ID：14689790
> 
> 赞同：0
> 
> 时间：2013-02-04T15:21:03.037
> 
> 标签：xcode, build, parsekit

我正在尝试在最新的 Xcode 版本（4.6？）中存档 ParseKit 并继续停止在未使用的标志中：

```
clang: error: argument unused during compilation: '-flto' 
```

我已经仔细检查了该项目，似乎没有设置异常标志。我已经用谷歌搜索了这可能意味着什么，但找不到任何东西。`clang -cc1 --help`尽管我承认我可能在那里遗漏了一些东西，但似乎并没有多大帮助。

有没有人设法用最新的 Xcode 归档 ParseKit？如何从构建过程中删除该标志？

* * *

说清楚：我将 ParseKit 添加为依赖项目或创建调试版本没有问题。我不能做的是存档，发布版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:31:50.007

将调试和发布版本的链接时间优化更改为“否”，一切都很好。

# winforms - checkedListBox 事件 - 获取选定项/对象属性

> ID：14689791
> 
> 赞同：1
> 
> 时间：2013-02-04T15:21:05.187
> 
> 标签：winforms, events, object, checkedlistbox

我正在用一个对象填充一个复选框，该对象将路径处理为组件。如何从与所选索引关联的对象中获取特定属性？我目前正在使用 SelectedIndexChanged 事件，我尝试过 SelectedItem、SelectedValue、SelectedIndex。我可以通过checkedListBox1.SelectedValue.GetType().GetProperty("fullPath") 获取属性类型，但不能获取值。谢谢。

```
 Class1 c1;
            List<object> files = new List<object>();

            foreach(var value in filteredFiles1)
            {
                c1 = new Class1(value);
                checkedListBox1.DisplayMember = "fileName";
                files.Add(c1);                    
            }

            checkedListBox1.DataSource = files; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:57:58.473

您应该能够将`CheckedListBox` `SelectedItem`转换为您的类的实例，然后访问范围内的任何属性。这是一个例子：

```
 private void checkedListBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        Class1 c = (Class1)checkedListBox1.SelectedItem;
        MessageBox.Show(c.fileName);
        MessageBox.Show(c.fullPath);
    } 
```

我建议做一些额外的检查以确保对象不为空（即如果`SelectedIndex`变成-1）。

# xmonad - 向后旋转布局

> ID：14689793
> 
> 赞同：3
> 
> 时间：2013-02-04T15:21:12.023
> 
> 标签：xmonad

在默认键绑定中，M-Space 通过“sendMessage NextLayout”旋转到下一个布局。我需要向 sendMessage 提供什么参数才能在布局中向后旋转？这些东西记录在哪里？我用谷歌搜索但没有看到任何东西......

# java - 具有动态键和值的 Spring bean 映射

> ID：14689797
> 
> 赞同：4
> 
> 时间：2013-02-04T15:21:22.130
> 
> 标签：java, spring, hashmap, spring-ioc

现在我已经在 spring bean 映射中应用了相关的数据，并将这个映射作为参考传递给其他类。

地图定义如下

```
<bean id="sampleMap" class="java.util.HashMap">
    <constructor-arg index="0" type="java.util.Map">
        <map key-type="java.lang.Integer" value-type="java.lang.Float">
            <entry key="1" value="5"/>
            <entry key="2" value="10"/>
            <entry key="3" value="15"/>             
        </map>
    </constructor-arg>
</bean> 
```

此映射在其他 bean 中称为

```
<bean id="config" class="com.example.Config" abstract="false">      
    <property name="sampleMap" ref="sampleMap"/>
    .
    .
</bean> 
```

我只想从数据库表中检索映射值并将其注入其他类。我怎么能在春天做到这一点。基本上，该表包含与应用程序相关的数据。地图的键和值将是 int,Configuration。

加载配置数据的最佳位置是什么？我们可以使用spring beans map还是有任何其他好的方法来从数据库加载配置并将其引用到服务、委托和DAO等应用程序的其他地方？

帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:35:15.627

你应该使用弹簧的`FactoryBean`.

```
public class MyHashMapFactoryBean implements FactoryBean<Map<Integer, Float>>{

  @Autowired
  private Datasource datasource; 

  public Map<Integer, Float> getObject(){
    return <load from database>;
  }

  public Class<Map> getObjectType() { return Map.class ; }

  public boolean isSingleton() { return true; }
}

<bean id="sampleMap" class="my.package.MyHashMapFactoryBean">
  <here you could pass some properties e.g. jdbc datasource>
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:49:07.580

[FactoryBean 的答案](https://stackoverflow.com/a/14690037/342852)是正确的，但[它是旧的做事方式](http://blog.springsource.org/2011/08/10/beyond-the-factorybean/)。

相反，使用一个`@Configuration`类

```
@Configuration
public class DBConfiguration{

    @Autowired
    private DataSource dataSource;

    @Bean
    public Map<Integer, Float> configMap(){
        // use dataSource to get map values
    }

} 
```

这种方法的众多优点之一是您可以将其自动装配`DataSource`到配置类中。

顺便说一句，使用地图作为 bean 感觉不对。我会在地图周围创建一个包装器对象并将其用作 Spring Bean，但对此意见不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-06T13:07:48.010

我今天实际发现的是，当您需要将 bean 名称映射到特定接口的实例时，不需要`@Qualifier`'s 和任何类型的`FactoryBean`代码。Spring 会为你找到并注入候选人。一点点魔法，但它似乎是这样工作的。

# python - Pipe端点可以在进程之间共享吗？

> ID：14689801
> 
> 赞同：0
> 
> 时间：2013-02-04T15:21:50.213
> 
> 标签：python, multiprocessing, pipe, tornado

我有一个设置，我使用 Tornado 处理 Web 请求并将任务排队到一堆 Python 进程。这些进程之一是控制进程，而其他进程是工作进程。我想实现一个功能，允许该服务器的计算部分被关闭、重新启动等等。当 Tornado 作为单个进程运行时，这非常有效。但是，当使用多个服务器进程时，即：

```
server = tornado.httpserver.HTTPServer(app)
server.bind(8888)
server.start(2)
tornado.ioloop.IOLoop.instance().start() 
```

这会产生三个进程（一个控件和两个处理程序）。当我决定停止计算进程时，我得到一个错误：

```
AssertionError: can only join a child process 
```

我将其解释为 Tornado 处理程序进程试图停止计算进程，但 Tornado 控制一个是它们的父进程。

我正在考虑使用管道，以便我可以向控制计算进程发送停止消息，但是再次出现的问题是，管道端点是否可以在 2 个处理程序进程之间共享？

作为第二个问题，我的方法/架构是否完全错误，什么是正确的方法/架构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:37:33.943

我认为您需要包含更多示例代码来帮助`AssertionError`. 但基本上只有创建新线程或进程的线程才能加入它（如消息所示）。

关于`Pipe`s，您可以创建两个管道（每个子流程一个），因为一旦消息被一个读取，其他管道将无法使用。项目可以在 之间`tornado.web.Handlers`共享`tornado.web.RequestHandler.settings`。

但是，请记住，处理程序是为请求创建的。但听起来您可能正在使用它们进行后台处理？如果是这种情况，您可以简单地与他们共享一个队列并“毒化”它。

# php - phpunit：使用基于主机根的路径

> ID：14689802
> 
> 赞同：0
> 
> 时间：2013-02-04T15:21:56.703
> 
> 标签：php, path, phpunit, require

我将 phpunit 安装为 PHar：

1.  [从 wget http://pear.phpunit.de/get/phpunit.phar](http://pear.phpunit.de/get/phpunit.phar)下载 PHar 文件
2.  将其保存在 (/usr/share/phpunit) 中。
3.  使其可执行（`chmod +x phpunit.phar`）。
4.  在 /usr/bin 中创建了指向它的链接。

现在我可以调用它了，但是我必须在 require 调用中定义测试类的路径，或者从目录中定义相对论，我从目录中调用 phpunit（例如示例 1），或者绝对从根目录（例如示例 2 ）。

示例 1（文件 /var/www/sandbox/phpunit/tests/FooTest.php）

```
<?php
require_once('../Foo.php');

class FooTest extends PHPUnit_Framework_TestCase {
    public function testBar() {
        $input = 5;
        $this->assertEquals(5, (new Foo())->bar());
    }
} 
```

示例 2（文件 /var/www/sandbox/phpunit/tests/FooTest.php）

```
<?php
require_once('/var/www/sandbox/phpunit/Foo.php');

class FooTest extends PHPUnit_Framework_TestCase {
    public function testBar() {
        $input = 5;
        $this->assertEquals(5, (new Foo())->bar());
    }
} 
```

为了能够使用基于主机根的路径，我需要配置什么（以及如何配置）？例如，如果 /var/www/sandbox/phpunit/ 是我网站的根文件夹：

```
<?php
require_once('/Foo.php');

class FooTest extends PHPUnit_Framework_TestCase {
    public function testBar() {
        $input = 5;
        $this->assertEquals(5, (new Foo())->bar(5));
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:42:13.867

好吧，如果您不通过 Web 运行程序，您将无法引用 Web 根目录。这是相当明显的。

我能想到的最佳解决方案是将 Web 根目录硬编码为变量或常量到 phpunit 配置或引导文件中，或者使用魔术常量`__DIR__`来引用相对于当前文件的文件。

无论如何，我倾向于使用后者，即使我通过网络加载，因为它允许我的代码从子目录托管，而不必担心网络根在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:18:03.323

谢谢你的回复！

我已经用 Arne Blankerts 的[Autoload / phpab](https://github.com/theseer/Autoload)解决了这个问题。它`spl_autoload_register`以闭包作为第一个参数调用该函数，并在此匿名函数中定义一个生成的类名数组及其文件（带有像'myclass' => '/path/to/MyClass.php' 这样的元素）。我已将生成的文件包含在我的 phpunit bootstrap.php 中。现在它正在工作。:)

```
# phpab -o autoload.inc.php . 
```

我的文件结构：

```
/qwer
/qwer/Foo.php
/tets
/tets/FooTest.php
/tets/phpunit.xml
/autoload.inc.php
/bootstrap.php 
```

/qwer/Foo.php

```
<?php
class Foo {
    public function bar($input) {
        return $input;
    }
} 
```

/tets/FooTest.php

```
<?php
class FooTest extends PHPUnit_Framework_TestCase {
    public function testBar() {
        $input = 5;
        $this->assertEquals(5, (new Foo())->bar(5));
    }
} 
```

/tets/phpunit.xml

```
<phpunit bootstrap="../bootstrap.php" colors="true">
</phpunit> 
```

/autoload.inc.php

```
<?php
// @codingStandardsIgnoreFile
// @codeCoverageIgnoreStart
// this is an autogenerated file - do not edit
spl_autoload_register(
    function($class) {
        static $classes = null;
        if ($classes === null) {
            $classes = array(
                'foo' => '/qwer/Foo.php',
                'footest' => '/tests/FooTest.php'
            );
        }
        $cn = strtolower($class);
        if (isset($classes[$cn])) {
            require __DIR__ . $classes[$cn];
        }
    }
);
// @codeCoverageIgnoreEnd 
```

/bootstrap.php

```
<?php
require_once 'autoload.inc.php'; 
```

编辑：

这种方法的一个缺点是，每次创建新类后我都必须启动 phpab。好的，对于小型测试项目，可以使用两个突击队的组合：

```
# phpab -o ../autoload.inc.php .. && phpunit . 
```

或与 . 之类的别名相同`myprojectphpunit`。

# ios - 如何将按钮放在不会在 iOS 中随表格滚动的 UITableView 上

> ID：14689805
> 
> 赞同：65
> 
> 时间：2013-02-04T15:22:07.703
> 
> 标签：ios, objective-c, uitableview

我想把按钮放在`UITableView`屏幕的同一位置，不会滚动`UITableView`。当我尝试`addSubview`按钮时，它们会显示但会滚动`UITableView`。

放置按钮的原因`UITableView`是让用户对其进行一些操作。我不是在谈论在单元格中有按钮。它们是永远不会移动位置的浮动按钮。

我正在使用`UITableViewController`，我不想为此使用页眉或页脚。还有另一个酒吧（`UIToolbar`例如）对我来说不是一个选择。

提前致谢。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-04-29T14:45:37.480

你也可以这样做`UITableViewController`（不需要普通的`UIViewController`，它嵌套你的表或VC）

## **使用 SafeAreas 更新 iOS11+**

您想使用自动布局将视图保持在底部

```
{
    [self.view addSubview:self.bottomView];
    [self.bottomView setTranslatesAutoresizingMaskIntoConstraints:NO];
    UILayoutGuide * safe = self.view.safeAreaLayoutGuide;
    [NSLayoutConstraint activateConstraints:@[[safe.trailingAnchor constraintEqualToAnchor:self.bottomView.trailingAnchor],
                                              [safe.bottomAnchor constraintEqualToAnchor:self.bottomView.bottomAnchor],
                                              [safe.leadingAnchor constraintEqualToAnchor:self.bottomView.leadingAnchor]]];
    [self.view layoutIfNeeded];
} 
```

并确保视图始终位于顶部

```
- (void)viewDidLayoutSubviews {

    [super viewDidLayoutSubviews];

    [self.view bringSubviewToFront:self.bottomView];

} 
```

## **以前的旧解决方案**

**通过滚动表格，您需要调整“浮动”视图的位置，就可以了**

如果您在 UITableViewController 中，只需

**如果你想在 UITableView 的顶部浮动视图**

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    CGRect frame = self.floatingView.frame;
    frame.origin.y = scrollView.contentOffset.y;
    self.floatingView.frame = frame;

    [self.view bringSubviewToFront:self.floatingView];
} 
```

**如果你想浮动 UITableView 底部的视图**

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    CGRect frame = self.floatingView.frame;
    frame.origin.y = scrollView.contentOffset.y + self.tableView.frame.size.height - self.floatingView.frame.size.height;
    self.floatingView.frame = frame;

    [self.view bringSubviewToFront:self.floatingView];
} 
```

我相信这就是你问题的真正答案

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2013-11-23T01:39:31.007

如果您使用的是导航控制器，您可以将视图添加到其中：

```
[self.navigationController.view addSubview:yourView]; 
```

例子：

```
UIButton *goToTopButton = [UIButton buttonWithType:UIButtonTypeCustom];
goToTopButton.frame = CGRectMake(130, 70, 60, 20);
[goToTopButton setTitle:@"Scroll to top" forState:UIControlStateNormal];
[goToTopButton addTarget:self action:@selector(goToTop) forControlEvents:UIControlEventTouchUpInside];
[goToTopButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
[goToTopButton.layer setBorderColor:[[UIColor whiteColor] CGColor]];
goToTopButton.titleLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:13];
[self.navigationController.view goToTopButton]; 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2015-02-25T19:01:46.537

如果你想显示一个覆盖表格视图的静态控件视图，你有三个选项：

1) 不要使用 UITableViewController。而是创建一个带有 UITableView 子视图的 UIViewController 并将您的 Table View 委托/数据源代码放在 UIViewController 中。此选项可能会或可能不会起作用，具体取决于您的应用程序的架构。例如，如果您尝试使用大量自定义逻辑实现 UITableViewController 的子类，这并不理想。

2) WWDC 2011 方法。请参阅 WWDC 2011 Session 125 “UITableView Changes, Tips & Tricks”，从 32:20 开始。这种在表格视图滚动时调整视图位置的方法是在 AutoLayout 被引入 iOS 之前以及在我们有这么多不同的屏幕尺寸需要处理之前，Apple 推荐的。我不推荐它，因为您将自己管理所有不同屏幕尺寸的位置。

3)**我建议使用 UIViewController 和包含 UITableViewController 的容器视图。** 这样，您可以在 UITableViewController 中保持表格视图逻辑分开。UIViewController 为 UITableViewController 托管一个“哑”容器，它还包含静态控件视图。为此，将 UIViewController 拖到情节提要并在其中拖入“容器视图”。删除自动附加到容器视图的 UIViewController，然后通过将控件从约束视图拖到表视图控制器并选择“嵌入”来附加要在容器视图中显示的表视图控制器。现在，您可以将静态控件作为子视图添加到 UIViewController，它将显示在表格视图的顶部。它看起来像这样：

![故事板对于容器视图内的 UITableViewController](../Images/0e013b331f325674a16908411ee47659.png)

我更喜欢这种方法，因为 UIViewController 可以处理控制逻辑，而 UITableViewController 处理表格视图逻辑。这里的其他一些答案建议将静态控件作为子视图添加到导航控制器或窗口。这些仅在您从未将另一个视图控制器添加到导航控制器或窗口时才有效。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2013-02-04T16:05:35.807

对此的一种解决方案是扩展`UIViewController`而不是`UITableViewController`. 您将需要添加自己的表格视图并设置所有内容。然后您可以将按钮添加到视图控制器的视图而不是表格视图。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-11-04T16:52:41.593

对于迅速：

```
override func scrollViewDidScroll(scrollView: UIScrollView){
    var frame: CGRect = self.floatingView.frame
    frame.origin.y = scrollView.contentOffset.y
    floatingView.frame = frame

    view.bringSubviewToFront(floatingView)
} 
```

每次滚动时都会调用此函数。然后在里面你得到你的 UIView 的框架并根据你滚动的程度更新它的位置。您的 UIView 会随着您的 UIScrollView 不断移动，因此对用户来说它看起来像是浮动的。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-11-30T11:08:04.027

您可以在 UIWindow 上添加按钮，无需将其扩展到 UIViewController 而不是 UITableviewController。只需在窗口上添加按钮。

```
UIWindow *window = [[UIApplication sharedApplication] keyWindow];
UIButton *btn =[UIButton buttonWithType:UIButtonTypeCustom];
[btn setFrame:CGRectMake(60, 200,40, 60)];
[btn addTarget:self action:@selector(btnClicked:) forControlEvents:UIControlEventTouchUpInside];
[window addSubview:btn]; 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-02-25T08:56:48.233

我创建了一个库，以便更轻松地在**UITableView** / **UICollectionView** / **UIScrollView**顶部添加浮动按钮。称为[MEVFloatingButton](https://github.com/manuelescrig/MEVFloatingButton)。

这些是使用它的步骤。

**1-导入类别文件**

`#import "UIScrollView+FloatingButton.h"`

**2 - 添加委托和可选的委托方法。**

```
 @interface ViewController () <MEVFloatingButtonDelegate>

  #pragma mark - MEScrollToTopDelegate Methods

  - (void)floatingButton:(UIScrollView *)scrollView didTapButton:(UIButton *)button; 
```

**2 - 创建一个 MEVFloatingButton 对象。**

```
MEVFloatingButton *button = [[MEVFloatingButton alloc] init];
button.animationType = MEVFloatingButtonAnimationFromBottom;
button.displayMode = MEVFloatingButtonDisplayModeWhenScrolling;
button.position = MEVFloatingButtonPositionBottomCenter;
button.image = [UIImage imageNamed:@"Icon0"];
button.imageColor = [UIColor groupTableViewBackgroundColor];
button.backgroundColor = [UIColor darkGrayColor];
button.outlineColor = [UIColor darkGrayColor];
button.outlineWidth = 0.0f;
button.imagePadding = 20.0f;
button.horizontalOffset = 20.0f;
button.verticalOffset = -30.0f;
button.rounded = YES;
button.hideWhenScrollToTop = YES; 
```

**4 - 将按钮和委托分配给 UITableView。**

```
[self.tableView setFloatingButtonView:button];
[self.tableView setFloatingButtonDelegate:self] 
```

**演示结果**

**[![演示](../Images/0378ccf25c36aded63faa60a59f4c783.png)](https://i.stack.imgur.com/cQfOR.gif)**[![演示](../Images/808e34e6c2c95326ec5281aac2a18e97.png)](https://i.stack.imgur.com/7OrIG.gif)[![演示](../Images/a6b7ac172d5a6bf3b87ae899f14bae4e.png)](https://i.stack.imgur.com/1JtqS.gif)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-12-23T16:04:01.253

有一个更好的解决方案。您可以通过禁用相应`Button`或任何`UIView` 浮动按钮的 Auto Layout(button.translatesAutoresizingMaskIntoConstraints = false) 属性来执行此操作：

斯威夫特 4

```
//create a button or any UIView and add to subview
let button=UIButton.init(type: .system)
button.setTitle("NEXT", for: .normal)
button.frame.size = CGSize(width: 100, height: 50)
self.view.addSubview(button)

//set constrains
button.translatesAutoresizingMaskIntoConstraints = false
if #available(iOS 11.0, *) {
     button.rightAnchor.constraint(equalTo: tableView.safeAreaLayoutGuide.rightAnchor, constant: -10).isActive = true
     button.bottomAnchor.constraint(equalTo: tableView.safeAreaLayoutGuide.bottomAnchor, constant: -10).isActive = true
} else {
     button.rightAnchor.constraint(equalTo: tableView.layoutMarginsGuide.rightAnchor, constant: 0).isActive = true
     button.bottomAnchor.constraint(equalTo: tableView.layoutMarginsGuide.bottomAnchor, constant: -10).isActive = true
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-12-16T16:12:31.607

我刚刚看了 WWDC 2011 TableView、Tips and Tricks 视频。浮动视图完全一样。您所要做的就是将框架更改回scrollViewDidScroll上的原始位置。

[https://developer.apple.com/videos/wwdc/2011/](https://developer.apple.com/videos/wwdc/2011/)

查看视频 TableViews 提示和技巧。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-04T16:36:26.233

我希望我的类成为`UITableViewController`子类，并且子视图需要是常规子视图，使用自动布局（如果我愿意）。
所以，这就是我所做的：

```
 private weak var _tableView:UITableView?
    override var tableView: UITableView!{
        get {
            return self._tableView
        }
        set {
            self._tableView = newValue
        }
    }

    override func viewDidLoad() {
        // Re-root
        let tableView = super.tableView! // keep a reference to the original tableview
        self.tableView = tableView
        view = UIView() // Create my own view
        tableView.translatesAutoresizingMaskIntoConstraints = true
        view.addSubview(tableView)
        tableView.leadingAnchor.constraint(equalTo: view.leadingAnchor).isActive = true
        tableView.trailingAnchor.constraint(equalTo: view.trailingAnchor).isActive = true
        tableView.topAnchor.constraint(equalTo: view.topAnchor).isActive = true
        tableView.bottomAnchor.constraint(equalTo: view.bottomAnchor).isActive = true
    } 
```

您现在可以将任何您想要的内容添加到`view`视图控制器，而`tableView`原始表格视图是。
我知道问题出在 Objective C 中，但代码相当简单，我只是从自己的代码中复制粘贴。

# direct2d - 如何将 ID2D1RenderTarget 的内容保存到文件中

> ID：14689806
> 
> 赞同：0
> 
> 时间：2013-02-04T15:22:12.190
> 
> 标签：direct2d, wic

我有一个将 Direct2D 内容绘制到 ID2D1RenderTarget 的现有组件，我想将该绘图保存到图像文件中。[这里](https://stackoverflow.com/questions/11447489/how-to-save-id2d1bitmap-to-png-file)、[这里](https://stackoverflow.com/questions/14261226/how-to-save-a-id2d1bitmap-to-a-file-using-wic)和[这里](https://stackoverflow.com/questions/14536610/how-to-save-bitmap-to-file-using-direct2d-and-id2d1hwndrendertarget)的问题虽然对我有所帮助，但并没有提供一个明确的答案来说明如何去做。

我的第一个想法是尝试官方的[MSDN 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/hh994451%28v=vs.85%29.aspx)。不幸的是，它在 Win7 中不可用。

我的第一个想法是修改绘图例程，使其接受 RenderTarget 作为参数并使用 ID2D1Factory::CreateWicBitmapRenderTarget 直接绘制到 IWICBitmap 中，但结果对我来说非常困难（因为需要修改不是只有绘图例程本身，还有该组件的所有用户的绘图回调（用 Delphi 编写的代码使用 Embarcadero 的[TDirect2DCanvas](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Direct2D.TDirect2DCanvas)，因此不需要管理所有 Direct2D 资源，如渲染目标或画笔）。

[我的第二个想法是创建一个 ID2D1Bitmap，用已经使用 ID2D1Bitmap::CopyFromRenderTarget 绘制的内容填充它，然后将该 ID2D1Bitmap 绘制到 WicBitmapRenderTarget（这是关于这里](https://stackoverflow.com/questions/14536610/how-to-save-bitmap-to-file-using-direct2d-and-id2d1hwndrendertarget)所做的）。我和那些问我链接到的问题的人遇到了同样的问题：不同的资源亲和力，正如[Kenny Kerr 简要解释](https://stackoverflow.com/a/14382226/1465896)的那样。

那么在Win7下是否可以不用实现我的第一个想法，你会怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:26:00.237

如果您安装平台更新，则 Windows 7 支持 Direct2D 1.1。不幸的是，如果不先创建另外两个，这并不能解决您的问题：1）它仍然是预发布/测试版，2）它增加了另一个安装依赖项，让您担心。

# redirect - how to redirect pages in jsf 2?

> ID：14689808
> 
> 赞同：0
> 
> 时间：2013-02-04T15:22:18.377
> 
> 标签：redirect, jsf-2

i have a simple menu on jsf:

```
 <h:panelGroup id="panelMenu">
    <h:form id="menuForm">
    <ul class="nav nav-tabs" id="myTab">
        <li class="active"><h:outputLink value="contenido/Agrupaciones.xhtml"><h:outputText value="Agrupaciones" /></h:outputLink></li>
        <li><h:outputLink value="contenido/Usuarios.xhtml" ><h:outputText value="Usuarios" /></h:outputLink></li>
        <li><h:outputLink value="contenido/Modulos.xhtml" ><h:outputText value="Modulos" /></h:outputLink></li>
        <li><h:outputLink value="contenido/Roles.xhtml" ><h:outputText value="Roles" /></h:outputLink></li>
    </ul>
    </h:form>
    </h:panelGroup> 
```

it works ok, but when im on one of my pages.. let say "users.xhtml" and from that page i go to another like "details" `<h:outputLink value="../contenido/detalleUsuario.xhtml">`, when i click again in my principal menu to go back to "users" the url looks like this:

contenido/contenido/Usuarios.xhtml when it should be contenido/Users.xhtml. so i get a "page not found error".

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:28:36.173

Use [`<h:link>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/link.html) instead of [`<h:outputLink>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/outputLink.html). The `<h:link>` treats the path as navigation case outcome and will always resolve it relative to the context path. So you can safely start the outcome with `/` without worrying about the context path.

```
<li class="active"><h:link value="Agrupaciones" outcome="/contenido/Agrupaciones.xhtml" /></li>
<li><h:link value="Usuarios" outcome="/contenido/Usuarios.xhtml" /></li>
<li><h:link value="Modulos" outcome="/contenido/Modulos.xhtml" /></li>
<li><h:link value="Roles" outcome="/contenido/Roles.xhtml" /></li> 
```

Note that those links doesn't require a form at all. So the whole `<h:form>` as you've in your code is completely superfluous.

# extjs4.1 - EXTJS Ext.Ajax.request() 问题

> ID：14689809
> 
> 赞同：0
> 
> 时间：2013-02-04T15:22:19.387
> 
> 标签：extjs4.1

所以我想我可能错过了 Ext.Ajax.request();

所以我有执行以下操作的代码：

```
Ext.Ajax.request({
   url : 'myurl',
   success : function(){
     alert('success 1');   
   },
   callback : function(){
     alert('callback');
   }

}); 
```

然后，我又进行了一次这样的 ajax 调用：

```
Ext.Ajax.request({
   url : 'myurl',
   success : function(){
     alert('success 2');   
   }

}); 
```

如果我没有定义回调函数，第一次调用的旧函数仍然设置。所以当它运行时，它仍然调用之前定义的旧回调函数。所以我将监听器添加到

```
Ext.Ajax.on('beforerequest', function(c, o, e){
     //The options has all my previous options
}); 
```

所以我在这里放了一个断点并查看了选项，如果在我的第二次调用或任何其他 ajax 调用之后不使用 emptyFunction() 或任何其他请求配置覆盖回调或任何其他选项，则之前的值会保留。因此，如果在我的第二次调用中我没有重新定义成功函数，那么第一次调用成功函数仍然存在。有没有办法在下次通话时清除所有以前的选项？我可以在每次新通话时清除它们。但我不明白为什么如果电话不相关，我上次电话的选择仍然存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:31:51.947

正如[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax)所述，`Ext.Ajax`是单例。

如果您查看它的[代码](http://docs.sencha.com/ext-js/4-1/source/Connection.html#Ext-data-Connection-method-request)，您会看到`option`配置将在调用之间保留。

所以我不敢说你用错了方法。理想情况下，您应该定义每次调用成功或失败时会发生什么。

看起来这确实可行：

```
var iAjax = new Ext.data.Connection();
iAjax.request({
    // unique config here.
}); 
```

# jenkins - 这是受支持的 Jenkins 主从配置吗？

> ID：14689811
> 
> 赞同：0
> 
> 时间：2013-02-04T15:22:26.427
> 
> 标签：jenkins, hudson, master-slave

我们有一个在 Linux 系统上运行的主 Jenkins。使用“通过在主节点上执行命令启动从节点”将同一主节点连接为节点。它与 JENKINS_HOME 具有相同的 FS 根目录。命令是 ssh "machine_name" "shell_script"

shell 脚本获取最新的 slave.jar 并运行它。

主节点有 0 个执行者。该节点已被赋予 7。我在构建中看到了奇怪的行为，例如每天删除一次工作区等。我不确定这是否与 Jenkins 主从配置的方式有关。

如果这是受支持的配置，有什么想法吗？

# php - PHP 脚本可以包含在我的文件系统之外吗？

> ID：14689812
> 
> 赞同：1
> 
> 时间：2013-02-04T15:22:27.657
> 
> 标签：php, security

我有一个名为 的 PHP 脚本`constants.php`，里面有很多有价值的数据，比如我的 MySQL 信息等。

是否可以在我的机器之外访问该脚本？可以说，使用以下内容：`include http://www.fakewebsite.com/config/constants.php`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:28:24.033

嗯，是的，也不是。

**是**：他们将能够访问文件的输出`constants.php`（但很可能它是空白的）。

**否**：他们将无法访问您的变量。您只能在 PHP 被解析之前访问它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:38:15.550

让我们阅读[文档](http://php.net/include)：

> 如果在 PHP 中启用了“URL fopen 包装器”（它们在默认配置中），您可以使用 URL 指定要包含的文件（通过 HTTP 或其他支持的包装器 - 请参阅支持的协议和包装器以获取协议列表）而不是本地路径名。如果目标服务器将目标文件解释为 PHP 代码，则可以使用与 HTTP GET 一起使用的 URL 请求字符串将变量传递给包含的文件。严格来说，这与包含文件并使其继承父文件的变量范围不同。该脚本实际上正在远程服务器上运行，然后将结果包含到本地脚本中。

因此，您实际上可以加载外部文件（如果您的管理员允许）。但是，它对您的情况有用吗？在您的网络浏览器中打开`http://www.fakewebsite.com/config/constants.php`并打开“查看源代码”菜单。无论您在那里看到什么，它都是您的 PHP 脚本所看到的（很可能是一个空白页面）。

最后但同样重要的是……假设远程服务器配置为*不*执行`*.php`文件*或*包含生成 PHP 代码的 PHP 脚本，为什么要将所有有价值和敏感的数据发布到 Internet？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T15:41:19.263

如果 URL 可以公开访问，那么可以，任何人都可以从 URL 中读取它，包括脚本。

然而，这里的关键部分是他们将访问 的**输出**，`constants.php`而不是文件本身。如果您从 Web 浏览器访问该文件，它们将获得完全相同的输出。

他们不能做的是通过调用 URL 来包含您的实际 PHP 代码。URL 不是直接连接到 PHP 文件；它是与 Web 服务器的连接。然后，Web 服务器处理 PHP 文件并提供输出。只要 Web 服务器在发送输出之前处理 PHP 文件，那么您的 PHP 代码就是安全的。它不能通过 URL 看到。

可能还有其他方法可以解决它，但不是那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T15:24:22.043

是的，只要您有权访问该脚本，您就可以将其包含在您自己的脚本中。

# java - 了解 MapReduce 性能？

> ID：14689814
> 
> 赞同：1
> 
> 时间：2013-02-04T15:22:30.570
> 
> 标签：java, performance, hadoop, mapreduce

嗨，我想更好地了解地图降低性能。

是什么主导了 Hadoop 中实现的 MapReduce 算法的性能？

如果一个节点需要处理大量数据，是计算时间，还是磁盘写入和读取时间？

当我运行一些 map reduce 程序时，我观察到与磁盘读取时间相比，磁盘写入时间需要很长时间。

我想知道磁盘写入的开销是否远大于计算时间（CPU 时间），需要在节点处处理大量数据。与 I/O 访问相比，CPU 时间是否微不足道？

下面的算法是在每个 reduce 节点上发生的情况：我想知道与从 HDFS 读取输入然后处理将输出写入 HDFS 相比，执行此算法的 CPU 时间是否微不足道。

```
 Input : R is a multiset of records sorted by the increasing order of their sizes; each    record has been canonicalized by a global ordering O; a Jaccard similarity threshold t
  Output : All pairs of records hx, yi, such that sim(x, y) > t

  1 S <- null;
  2 Ii <- null (1 <= i <= |U|);
  3 for each x belongs to R do
  4 p <- |x| - t * |x| + 1;
  5 for i = 1 to p do
  6 w <- x[i];
  7 for each (y, j) belongs to Iw such
  that |y|>= t*|x| do /* size filtering on |y| */
  8 Calculate similarity s = (x intersection y) /* Similarity calculation*/ 
  9 if similarity>t
     S <- S U (x,y);
  10 Iw <- Iw Union {(x, i)}; /* index the current prefix */;

  11 return S 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:36:00.900

一般来说 - 这取决于您正在进行的处理类型。但是可以指出除了代码之外什么需要时间和资源。
我们将回顾 MR 作业流程并指出明显的资源消耗。1\. 从 HDFS 读取您的拆分。除非进行本地读取优化——数据通过套接字（CPU）和/或网络+磁盘 IO 传递。MD5 也在读取期间计算。1.输入格式。输入数据应该被切割成 Mapper 的键值。考虑到它是java，它总是动态内存分配和解除分配。解析输入通常需要 CPU 时间。
2\. 从记录读取器到映射器 - 没有严重的开销。
3.Mapper输出是排序和序列化的（很多CPU）+本地磁盘。
4\. 数据由reducer 从mapper 机器中提取。很多网络。
5\. 在reducer端合并数据。CPU + 磁盘。
6\. reducer 的输出写入 HDFS。x3 的数据大小磁盘 IO + x2 的网络流量，因为复制。

简而言之，3、4、5 通常是最耗费时间和资源的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:32:09.223

这可能有助于您对问题的理解：

```
L1 cache reference                            0.5 ns
Branch mispredict                             5   ns
L2 cache reference                            7   ns             14x L1 cache
Mutex lock/unlock                            25   ns
Main memory reference                       100   ns             20x L2 cache, 200x L1 cache
Compress 1K bytes with Zippy              3,000   ns
Send 1K bytes over 1 Gbps network        10,000   ns    0.01 ms
Read 4K randomly from SSD*              150,000   ns    0.15 ms
Read 1 MB sequentially from memory      250,000   ns    0.25 ms
Round trip within same datacenter       500,000   ns    0.5  ms
Read 1 MB sequentially from SSD*      1,000,000   ns    1    ms  4X memory
Disk seek                            10,000,000   ns   10    ms  20x datacenter roundtrip
Read 1 MB sequentially from disk     20,000,000   ns   20    ms  80x memory, 20X SSD
Send packet CA->Netherlands->CA     150,000,000   ns  150    ms 
```

来源：[https ://gist.github.com/2841832](https://gist.github.com/2841832)

# jquery - 在 jQuery 中从 JSON 值创建字符串

> ID：14689817
> 
> 赞同：1
> 
> 时间：2013-02-04T15:22:32.023
> 
> 标签：jquery, json, string, google-books

我想从 JSON 对象创建一串 ISBN，以在 Google 图书中搜索多本图书。

我可以通过使用以下路径解析 Google Books 的 JSON 来获取 ISBN：

```
volumeInfo.industryIdentifiers[0].identifier 
```

（这里我这样做是为了得到一个简单的书单：[jsfiddle.net/LyNfX](http://jsfiddle.net/LyNfX)）

如何将每个值串在一起以获得此查询结构，其中每个 ISBN 前面都有“isbn：”，在第一个 ISBN 之后用“OR”分隔

```
https://www.google.com/search?btnG=Search+Books&tbm=bks&q=Springfield+isbn:1416549838+OR+isbn:068482535X+OR+isbn:0805093079+OR+isbn:0306810328 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:26:28.547

从一个名为的 ISBN 字符串数组开始`list`：

```
list.map(function(v){return "isbn:"+v;}).join("+OR+") 
```

至于建立您的 ISBN 列表，我认为这是`identifier`您的支柱`industryIdentifiers`（如果`industryIdentifier`是真正的`Array`）：

```
var list = [];
volumeInfo.industryIdentifiers.forEach(function(e,i){list.push(e.identifier);}); 
```

您也可以一举构建最终的字符串而不构建数组，但这意味着需要额外的逻辑来防止插入额外`+OR+`的分隔符（作为分隔符）

```
var output = "";
volumeInfo.industryIdentifiers.forEach(function(e,i){output += "isbn:"+e.identifier+"+OR+";});
output.slice(0,-4); // clear out last +OR+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:28:02.770

```
var arrayOfISBNs = [123,456,789...];
var result = "isbn:" + arrayOfISBNs.join(" OR isbn:") 
```

只需使用数组连接。

# php - 插入列作为类型 的标题

> ID：14689819
> 
> 赞同：0
> 
> 时间：2013-02-04T15:22:40.057
> 
> 标签：php, mysql

我有一个 MySql 表，我想按类型列出内容并插入标题。我会使用什么类型的查询？

由此：

```
| Fluffy   | Harold | cat        | f    | 1993-02-04 | NULL       |
| Claws    | Gwen   | cat        | m    | 1994-03-17 | NULL       |
| Buffy    | Harold | dog        | f    | 1989-05-13 | NULL       |
| Fang     | Benny  | dog        | m    | 1990-08-27 | NULL       |
| Bowser   | Diane  | dog        | m    | 1979-08-31 | 1995-07-29 |
| Chirpy   | Gwen   | bird       | f    | 1998-09-11 | NULL       |
| Whistler | Gwen   | bird       | f    | 1997-12-09 | NULL       |
| Slim     | Benny  | snake      | m    | 1996-04-29 | NULL       |
| Dalli    | Alli   | canine     | m    | 2001-12-20 | NULL       |
| Tara     | David  | canine     | f    | 2002-05-17 | NULL       |
| Mimi     | Alli   | guinea pig | m    | 2004-05-17 | NULL       | 
```

对此：

```
<h2>Cat</h2>

<ul>
<li>Fluffy</li>
<li>Claws</li>
</ul>

<h2>Dog</h2>

<li>Buffy</li>
<li>Fang</li>
<li>Bowser</li>
</ul> 
```

等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:40:30.783

您的第一个查询是：

```
SELECT DISTINCT type FROM table ORDER BY type ASC 
```

使用您的 PHP，我相信您可以从此查询中获得结果并循环遍历它。下一个是在循环中放置另一个查询，为您提供属于当前类型的动物列表：

```
SELECT name FROM table WHERE type='$type' ORDER BY name ASC 
```

`$type`只是保持当前类型的变量。我假设列名和表名，所以请更改它以适合您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:43:04.573

不要试图用 SQL 来做所有这些（只做一个标准的选择查询），使用 PHP 对结果进行分组，然后呈现它。做到这一点的最好方法是拥有一个可以为您进行分组的对象，因为您可能不止一次需要它。例如，您的课程可能如下所示：

```
<?php
class Arrays
{
    public static function group($array,$key)
    {
        if(NULL == $array)
            return NULL;

        $grouped = NULL;

        foreach($array as $item)
        {
            $grouped[$item[$key]][] = $item;
        }

        return $grouped;
    }
}
?> 
```

您的用例可能类似于：

```
<?php
$result = ...; // The result of your database query.

$grouped_by_type = Arrays::group($result,"type");

foreach($grouped_by_type as $type => $group)
{
    echo "<h2>".ucwords($type)."</h2>";
    echo "<ul>";

    foreach($group as $animal)
    {
        echo "<li>".$animal['first_name']."</li>"; // Assumes the query brought back first_name...
    }

    echo "</ul>";
}
?> 
```

# php - 正则表达式检查两个字符串

> ID：14689827
> 
> 赞同：0
> 
> 时间：2013-02-04T15:23:15.973
> 
> 标签：php, regex

嗨，想知道是否有人可以提供帮助 - 我正在尝试使用正则表达式检查两个可能字符串之一的出现 - 但我对正则表达式的了解非常有限，所以我没有太多成功。

我正在尝试寻找“电子邮件”和“eMailConfirm”，这是我到目前为止所拥有的，正在为电子邮件工作

subject 是输入字段的 id，所以它可以是 'name','Email','eMailConfirm'

```
$subject = $getPromoOuter['label'];
$pattern = '/^Email/';
preg_match($pattern, $subject, $matches, PREG_OFFSET_CAPTURE, 0); 
```

我尝试了一些潜在的表达式来尝试合并第二个字符串，但我似乎无法让它发挥作用（加上一些基于其他的猜测）

知道如何连接这两个字符串并检查其中任何一个的出现吗？

感谢您的关注

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:42:55.913

我将在这里给出一个答案，因为我认为我很清楚您的要求是什么。

您当前的正则表达式是 /^Email/ 匹配任何以“电子邮件”开头的字符串。（我不清楚它是否必须从它开始）。

如果您需要匹配电子邮件或电子邮件确认，而不是在字符串的开头，您应该选择

```
/Email|eMailConfirm/ 
```

如果匹配项确实需要位于字符串的前面，只需在两者前面加上一个 '^' 字符：`/^Email|^eMailConfirm/`

# c# - 奇怪的过早验证控制

> ID：14689831
> 
> 赞同：1
> 
> 时间：2013-02-04T15:23:22.823
> 
> 标签：c#, asp.net, asp.net-mvc

我正在学习一个新创建的默认简单 MVC4 Web 项目。

在索引页面中，我有一个链接供用户使用他的帐户登录网站。之后，他将被重定向到一个表单以输入新名称、新密码。

我已准备好使用此表单进行验证`[Required]`。但是一旦重定向页面完全加载，这些控件（用户名和密码）也完成了验证（`Field needs be filled in`）。

这是用户使用他的帐户登录后的POST代码

```
if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
{
    return RedirectToCreateUser(returnUrl);
}

// If we got this far, something failed, redisplay form
ModelState.AddModelError("", "The user name or password provided is incorrect.");
return View(model); 
```

这是方法 RedirectToCreateUser

```
private ActionResult RedirectToCreateUser(string url)
{
    if (Url.IsLocalUrl(url))
    {
        return Redirect(url);
    }
    else
    {
        return RedirectToAction("CreateNewUser", "Account");
    }
} 
```

最后是用于 http GET 的 CreateNewUser 方法

```
public ActionResult CreateNewUser(CreateNewUserModel model)
{         
    return View(model);
} 
```

还有一个我认为尚未访问的http POST。

```
[HttpPost]
public ActionResult CreateNewUser(CreateNewUserModel model, string url)
{
    if (ModelState.IsValid)
    {
        // Attempt to register the user
        try
        {
            WebSecurity.CreateUserAndAccount(model.UserName, model.Password, null, true);
            WebSecurity.Login(model.UserName, model.Password);
            return RedirectToAction("CreateUserSuccess", "Account");
        }
        catch (MembershipCreateUserException e)
        {
            ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
        }
    }
    else
    {
    }
    return View(model);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:01:25.467

你的问题在这里

最后是用于 http **GET的 CreateNewUser 方法**

```
public ActionResult CreateNewUser(CreateNewUserModel model)
{         
    return View(model);
} 
```

您不能将对象作为参数传递给 get 请求。可能该签名应该是

```
public ActionResult CreateNewUser()
{    
    var model = new CreateNewUserModel();     
    return View(model);
} 
```

或类似的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:26:25.397

该`CreateNewUser`操作正在触发`[HttpPost]`并尝试使用无效（空）凭据进行发布。

您需要使用以下方法添加一些内容`[HttpGet]`：

```
[HttpGet]
public ActionResult CreateNewUser(CreateNewUserModel model)
{         
    return View(model);
} 
```

# python - python __getattribute__ 覆盖和@property 装饰器

> ID：14689836
> 
> 赞同：1
> 
> 时间：2013-02-04T15:23:48.247
> 
> 标签：python, class, attributes

我不得不编写某种覆盖的类`__getattribute__`。基本上我的类是一个容器，它保存每个用户添加的属性，`self._meta`其中是一个字典。

```
class Container(object):
    def __init__(self, **kwargs):
        super(Container, self).__setattr__('_meta', OrderedDict())
        #self._meta = OrderedDict()
        super(Container, self).__setattr__('_hasattr', lambda key : key in self._meta)

        for attr, value in kwargs.iteritems():
            self._meta[attr] = value

    def __getattribute__(self, key):
        try:
            return super(Container, self).__getattribute__(key)
        except:
            if key in self._meta : return self._meta[key]
            else:
                raise AttributeError, key

    def __setattr__(self, key, value):
        self._meta[key] = value
#usage:
>>> a = Container()
>>> a
<__main__.Container object at 0x0000000002B2DA58>
>>> a.abc = 1 #set an attribute
>>> a._meta
OrderedDict([('abc', 1)]) #attribute is in ._meta dictionary 
```

我有一些继承`Container`基类的类，它们的一些方法有@property 装饰器。

```
class Response(Container):
    @property
    def rawtext(self):
        if self._hasattr("value") and self.value is not None:
            _raw = self.__repr__()
            _raw += "|%s" %(self.value.encode("utf-8"))

            return _raw 
```

问题是`.rawtext`无法访问。（我得到属性错误。）每个键都是可访问的，基类`._meta`添加的每个属性都是可访问的，但@property 装饰器的方法到属性不是。我认为这与我在基类中覆盖的方式有关。我应该怎么做才能使属性变得可访问？`__setattr__``object``__getattribute__``Container``@property`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T15:27:47.647

我认为您可能应该考虑查看[`__getattr__`](http://docs.python.org/2/reference/datamodel.html#object.__getattr__)而不是[`__getattribute__`](http://docs.python.org/2/reference/datamodel.html#object.__getattribute__)此处。不同之处在于： `__getattribute__`如果存在则无条件调用-`__getattr__`仅当python无法通过其他方式找到该属性时才调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:35:05.097

我完全同意 mgilson。如果您想要一个与您的代码等效但与属性配合良好的示例代码，您可以尝试：

```
class Container(object):
    def __init__(self, **kwargs):
        self._meta = OrderedDict()
        #self._hasattr = lambda key: key in self._meta  #???
        for attr, value in kwargs.iteritems():
            self._meta[attr] = value

    def __getattr__(self, key):
        try:
            return self._meta[key]
        except KeyError:
            raise AttributeError(key)

    def __setattr__(self, key, value):
        if key in ('_meta', '_hasattr'):
            super(Container, self).__setattr__(key, value)
        else:
            self._meta[key] = value 
```

我真的不明白你的`_hasattr`属性。你把它作为一个属性，但它实际上是一个可以访问的函数`self`......它不应该是一个方法吗？其实我认为你应该简单地使用内置函数`hasattr`：

```
class Response(Container):
    @property
    def rawtext(self):
        if hasattr(self, 'value') and self.value is not None:
            _raw = self.__repr__()
            _raw += "|%s" %(self.value.encode("utf-8"))

            return _raw 
```

请注意，`hasattr(container, attr)`也将返回`True`for `_meta`。

令我困惑的另一件事是你为什么使用`OrderedDict`. 我的意思是，您迭代`kwargs`，并且迭代具有随机顺序，因为它是正常的`dict`，并将项目添加到`OrderedDict`. 现在你有了`_meta`它包含随机顺序的值。如果您不确定是否需要特定订单，只需使用`dict`并最终切换到`OrderedDict`以后。

顺便说一句：永远不要*在*没有`try: ... except:`指定要捕获的异常的情况下使用。在您的代码中，您实际上只想捕获`AttributeError`s 所以您应该这样做：

```
try:
    return super(Container, self).__getattribute__(key)
except AttributeError:
    #stuff 
```

# php - 在 json_encode 中添加数组并计算它们

> ID：14689839
> 
> 赞同：0
> 
> 时间：2013-02-04T15:23:59.690
> 
> 标签：php, json

我想一起计算所有数组，但不知道我的问题

```
$output = array(
    'facebook'=> isset($finfo[0]) ? $finfo[0]->total_count : NULL,
    'twitter'=> isset($tinfo->count) ? $tinfo->count : NULL,
    'delicious'=> isset($dinfo[0]) ? $dinfo[0]->total_posts : NULL,
    'pinterest'=> isset($pinfo->count) ? $pinfo->count : NULL,
    'googlePlus'=> isset($gplus[0]['result']) ? $gplus[0]['result']['metadata']['globalCounts']['count'] : NULL

);

function getSocialCount($output){
    return json_encode($output[facebook]) + json_encode($output[twitter]) + json_encode($output[pinterest]) + json_encode($output[googlePlus]);
}

<div>All: <?php echo getSocialCount(); ?></div> 
```

我写错了语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:26:40.697

是的，您的函数需要一个参数，而您没有给它任何参数。

改变：

```
 <?php echo getSocialCount(); ?> 
```

到：

```
 <?php echo getSocialCount($output); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:26:55.633

也许你应该将你的数组添加`$output`到你的函数中..

`<?php echo getSocialCount($output); ?>`

# c++ - 缺少分号的 Bison C++ 多错误恢复

> ID：14689849
> 
> 赞同：0
> 
> 时间：2013-02-04T15:24:25.117
> 
> 标签：c++, bison, mode, panic, error-recovery

我正在开发自己的编译器，但在 java 语法的恐慌模式下的错误恢复设计存在问题。

我想过多种解决方案，但真正的问题是：

我怎么能用 bison c++ 做到这一点？

我这样做了：

> 包 2
> 
> 导入java.lang.*；

错误必须消耗到第一个分号，并且使用规则正确运行

> package_rule: 包错误 ';'

但是如果我写了这段代码：

> 包 2
> 
> 导入 java.lang.*
> 
> 类 y { void 方法（） { int m }
> 
> }

我需要像标准编译器这样的解析器来报告错误：

> 包装行应有标识符。失踪 ';' 在导入指令行报告一个包。发短信';' 在 int m 线。

我的意思是我需要在包错误之后使用令牌直到第一个分号或在声明它们之前在最后一行找到类或接口声明时停止！并报告行后发现的任何其他错误：

> int m // 缺少 ';'

请帮助我，在我看来有多种解决方案，但是如何使用 bison c++ for java 语法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:19:57.833

好吧，您的基本问题是您希望它如何尝试从语法错误中恢复。当您有一个输入序列时

```
package x import 
```

您是否希望它假设那里应该有一个分号，或者您是否希望它假设在分号之前有其他东西被卡住并且它应该扔掉东西直到它到达一个分号？

后者就是你所拥有的——规则`package: PACKAGE error ';'`正是这样做的——每当它看到关键字`PACKAGE`但它之后的内容与规则的其余部分不匹配时`package`，它应该丢弃输入，直到它看到 a`';'`并尝试从那里继续。

如果你想要前者，你可以使用这样的规则`package: PACKAGE name error`——如果它看到`PACKAGE`的东西看起来像一个有效的包名但没有分号，则将其视为那里有一个分号并尝试继续。

让它能够同时做上述两件事是非常困难的。最接近的是让语法看起来像：

```
package: PACKAGE name ';'  /* normal package decl */
       | PACKAGE name      /* missing semicolon -- treat this as a semantic error */
       | PACKAGE error ';' /* no name -- skip up to the next semicolon to recover */ 
```

但是，这种事情可能会给您带来难以解决的语法冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:57:46.280

您不会介意以 C++ OOP 方式而不是野牛方式来解决该问题，对吗？

考虑您定义了这些类型的 AST 节点

```
struct BaseExpression {
    virtual std::string toIdentifier() = 0;
    // other member. remember to declare a virtual destructor
};

struct IntLiteral : BaseExpression {
    std::string toIdentifier() {
        error::toAnIdentifier();
        return "";
    }
};

struct Identifier: BaseExpression {
    std::string ident;

    explicit Identifier(std::string id) : ident(id) {}

    std::string toIdentifer() {
        return ident;
    }
}; 
```

定义这样的规则

```
%union {
    BaseExpression* expr_type;
}

%type <expr_type> simple_expr

package_expr: simple_expr
{
    $1->toIdentifer(); // thus integers or float numbers would generate errors
    // do sth with that identifer
}
;

package_expr: package_rule '.' simple_expr
{
    $3->toIdentifer(); // same trick
    // do sth with that identifer
}
; 
```

`simple_expr`在哪里

```
simple_expr: int_literal { return new IntLiteral; }
           | ...
           | identifier { return new Identifier(yytext); }
; 
```

# objective-c - 在使用故事板导航期间保持 uiviewcontroller 的状态

> ID：14689851
> 
> 赞同：0
> 
> 时间：2013-02-04T15:24:27.550
> 
> 标签：objective-c, uiviewcontroller, storyboard, state

在任何 iPhone 应用程序中，请考虑以下顺序 (VC=ViewController)：

1.  显示 VC-A ... 用户点击按钮加载 VC-B
2.  VC-B 现在被推送并显示...用户将滑块从 0 移动到 5...然后点击导航栏上的返回
3.  VC-B 被弹出，VC-A 被显示...用户再次点击按钮加载 VC-B
4.  VC-B被推并显示...但滑块回到0

发生这种情况是因为上面第 2 步中的 VC-B 实例与第 4 步中的 VC-B 实例不同，因此状态丢失。为了避免这种情况，我可以使 VC-B 成为单例，或者在某处保留对 VC-B 的强引用并重用它而不是创建新实例。

当我从 nib 加载我的 VC 时，这个逻辑曾经运行良好，因为我会在代码中手动创建 VC 的实例。对于故事板，这不起作用，因为它是自动创建实例的 segue。那么我怎样才能确保我重复使用我的 VC 呢？

我尝试了以下技巧来维护单例：

```
 - (id) initWithCoder:(NSCoder *)aDecoder{
    if(instance==nil){
        NSLog(@"LMHomeViewController init called");
        instance = [super initWithCoder:aDecoder];
        super.screenType = [NSNumber numberWithInt:home_screen];
    }
    return instance;
} 
```

但我遇到了运行时错误：

```
Terminating app due to uncaught exception 'NSGenericException', reason: 'This coder requires that replaced objects be returned from initWithCoder:' 
```

这里有什么建议吗？我的兴趣是在用户在导航树中来回移动时保持 VC 的状态。

注意：在我的例子中，*状态*是一个 UIWebView，因此它不可能保持它的状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:59:33.233

这可能是使用的情况`NSUserDefaults`- 在 on 中读取状态，在 上`viewWillAppear`写出状态`viewWillDisappear`，（以及其他任何适当的地方）

在任何情况下，MVC 最好保留在您的模型中，而不是保留在视图层次结构中。所以如果不是 NSUserDefaults，考虑一个只需要存储状态数据的单例。

另一个想法。如果您*确实*想保留 viewController 对象 - 不要使用故事板转场。在属性中保持强引用并使用

```
 [self.navigationController pushViewController:self.persistingViewController]; 
```

访问器可以第`persistingViewController`一次延迟实例化 viewController。只要保留引用，就可以重用：

```
 - (UIViewController*) persistingViewController
  {
     if (!_persistingViewController) {
       UIStoryboard *story = [UIStoryboard storyboardWithName:@"MainStoryBoard" bundle:nil];
     _persistingViewController = [story instantiateViewControllerWithIdentifier:@"myViewController"];

   }

   return self.persistingViewController 
```

}

# c - 是什么阻止了 mtd 被读取？

> ID：14689857
> 
> 赞同：1
> 
> 时间：2013-02-04T15:25:02.997
> 
> 标签：c, linux, filesystems, embedded, linux-device-driver

我有一个小程序，我用它来尝试在我的嵌入式 Linux 平台上读取 MTD 的详细信息。我遇到了大多数块无法读取的问题，而且我不是 100% 确定为什么会发生这种情况。

检查`/dev`目录显示 8 `mtd`s 都具有相同的权限：

```
# ls -al | grep "mtd*"
crwxrwxrwx    1 root     root      90,   0 Jan  1  1970 mtd0
crwxrwxrwx    1 root     root      90,   2 Jan  1  1970 mtd1
crwxrwxrwx    1 root     root      90,   4 Jan  1  1970 mtd2
...
crwxrwxrwx    1 root     root      90,  14 Jan  1  1970 mtd7 
```

我的应用程序也以 root 身份运行：

```
# ls -al mtd_test
-rwxrwxrwx    1 root     root        19688 Nov 30 01:18 mtd_test 
```

检查`/proc`我可以看到 8 个 mtd 中有 7 个已安装（所以我预计`mtd7`无法读取）

```
# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00020000 00020000 "u-boot (128 kB)"
mtd1: 00020000 00020000 "u-boot Environment (128 kB)"
mtd2: 00040000 00020000 "Reserved (256 kB)"
mtd3: 00200000 00020000 "Kernel (2048 kB)"
mtd4: 00000064 00020000 "rootFS header"
mtd5: 003fff9c 00020000 "rootFS (4096 kB)"
mtd6: 00180000 00020000 "Permanent Storage (1536 KB)" 
```

奇怪的是，只有`mtd1`并且`mtd6`能够被读取，所有其他人都因错误“权限被拒绝”而失败，有人知道为什么会这样吗？

我怀疑这是我的代码，但这里是：

```
int main()
{
    mtd_info_t mtd_info;
    int count, fd;
    char devs[][15] = { {"/dev/mtd0"},{"/dev/mtdblock0"},
                        {"/dev/mtd1"},{"/dev/mtdblock1"}, 
                        {"/dev/mtd2"},{"/dev/mtdblock2"}, 
                        {"/dev/mtd3"},{"/dev/mtdblock3"}, 
                        {"/dev/mtd4"},{"/dev/mtdblock4"}, 
                        {"/dev/mtd5"},{"/dev/mtdblock5"},
                        {"/dev/mtd6"},{"/dev/mtdblock6"}, 
                        {"/dev/mtd7"},{"/dev/mtdblock7"}, };  
    for(count = 0; count < 16; count++) {
        fd = open(devs[count], O_RDWR);
        if(fd > 0) {
            ioctl(fd, MEMGETINFO, &mtd_info);
            printf("For dev: %s\nMTD Type: %u\nMTD total size: %u bytes\nMTD erase size: %u bytes\n",
            devs[count], mtd_info.type, mtd_info.size, mtd_info.erasesize);
            close(fd);
        }
        else
          printf("Failed for %s: error - %s\n", devs[count], strerror(errno));
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:52:30.537

如果您使用的是 ext 系列 FS，则命令 lsattr 在访问权限的更深层次上起作用，但通常不适用于`/dev/*`- 您无论如何都可以尝试。*jffs2* FS[计划](http://www.cs.fsu.edu/~baker/devices/lxr/http/diff/linux/fs/jffs2/ioctl.c?v=2.6.25;diffval=2.6.31.13;diffvar=v)实施`lsattr`- 不确定他们是否实施。

`O_RDONLY`访问而不是有助于`O_RDWR`读取内存 - 某些设备需要写入特定协议，而可以自由允许读取。

也许玩`man 2 open`标志 - 比如`O_SYNC`等等...... - 可能会有所帮助。

有[这个页面](http://www.linuxforu.com/2012/01/working-with-mtd-devices/)，但作者`O_RDWR`也使用。

# jquery - 将类添加到数组中的特定 div

> ID：14689863
> 
> 赞同：1
> 
> 时间：2013-02-04T15:25:28.113
> 
> 标签：jquery, html, addclass

我有一组动态创建的表单字段。我试图以该数组中的第 16 个 div 为目标，并使用 JQuery 向它添加一个不同的类。这是我目前拥有的代码：

```
<script type="text/javascript">
jQuery(document).ready(function() {
    jQuery("div.form_row.clearfix:nth-child("+16+")").addClass("form_row_price");
});
</script> 
```

但它似乎没有将类添加到 div 中。如何才能将“form_row_price”类添加到表单的第 16 个 div 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:26:45.033

使用[eq()](http://api.jquery.com/eq/)而不是[nth-child()](http://api.jquery.com/nth-child-selector/)。

```
jQuery(document).ready(function() {
    jQuery("div.form_row.clearfix:eq(16)").addClass("form_row_price");
}); 
```

# mercurial - Mercurial 错误合并？

> ID：14689868
> 
> 赞同：0
> 
> 时间：2013-02-04T15:25:49.660
> 
> 标签：mercurial, merge

我有一个回购！我们已经使用书签、标签和许多其他扩展程序使用它很长时间了，没有任何问题，远程或本地。我刚刚遇到了一个问题，虽然合并似乎忽略了提交的变更集。我已经挖得足够远以找出*问题*所在，但我完全不知道为什么。我会尽我所能详细说明发生的事情，我希望得到建议作为下一步的研究方向。

所以我们有 3 个匿名头用于快速特征分支。A='Live'，B='Fred' & C='Jeff'。我们在需要时将它们合并（通常仅从 A 到 B/C）。

今天早上运行两次合并虽然有一些奇怪的结果。我这样做了：

```
-----o-------o(2)----------B
            /
o(0)-------o(1)-----o(4)---A
               \
--o-------------o(3)-------C 
```

显然，这被简化了，因为我们在 repo 中有超过 1500 次提交，并且有 2 个命名分支在这些分支旁边运行，但这是要点。

所以变更集`1`有 3 个孩子（`2`, `3`& `4`），但据我所知，`1`自上次合并（在图中）以来在 + 所有历史中实际所做的更改`0`尚未合并到`3`中，但已成功出现在`2`&中`4`。

我一生都无法弄清楚为什么，它没有在随后的提交中反转它们，`1`对文件进行了更改，`2`并`4`包含了该更改，但`3`没有。

我从哪说起呢？

**更新**
我在 B + C 上执行了合并，并使用`hg merge A`with`internal:merge`作为合并工具。不需要合并冲突或手动解决方案。如果我合并成功，我通常只是提交它并在事后进行测试以进行更改。这就是这里发生的事情。

# jquery - jQuery分级进度条

> ID：14689878
> 
> 赞同：1
> 
> 时间：2013-02-04T15:26:30.180
> 
> 标签：jquery

我已经用谷歌搜索了大约一个小时左右，试图找到一个接近我想要做的事情的 jquery 控件（或者我可以调整的控件），但找不到任何东西。

也许任何人都可以分享链接或提出不同的方法。我正在努力实现以下目标：

我有一个针对经销商（不是公众）的网站。每个经销商都有一个预定义的资金目标。例如，经销商 A 的目标是 59K。经销商 B 的目标是 21K。此外，我们目前有 3 条规则。

*   如果达到客户目标的 2%，我们提供 20% 的折扣。
*   如果达到客户目标的 4%，我们提供 40% 的折扣。
*   如果达到客户目标的 6%，我们提供 60% 的折扣。

我试图找到某种进度条，除了用户当前的数量之外，它还会显示 3 条规则。例子：

> ------8K----------------|------------------|-------- -----------------|
> 
> ```
>  20%         40%            60% 
> ```

8K 代表当前登录经销商的当前金额。另一个示例（对于不同的登录经销商）可能是：

> ---------|--------27K------------|-------- ----------------|
> 
> ```
>  20%           40%             60% 
> ```

如何创建（或调整）这样的控件？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:24:03.093

尝试这样的事情：[**现场演示**](http://jsfiddle.net/tCq9y/)

**HTML**

```
<div id="main" >
    <div id="first">20%</div><div id="second">40%</div><div id="third">60%</div>

    <div id="cur">12000</div>
</div> 
```

**CSS**

```
#main {
    width:400px;
    height:60px;
    border:1px solid black;
}

#first,#second,#third {
    display:inline-block;
    position: relative;
    left: 0%;
    top:0%;
    height:100%;
    text-align:right;
    font:Courier;
    color:#fff;
    font-size:90%;
    padding-right:4px;
}

#first {
    background: #800;
    width:20%;
}

#second {
    background: #880;
    width:20%;
}

#third {
    background: #080;
    width:20%;
}

#cur {
    display:block;
    float:left;
    position: relative;
    left: 0%;
    top:-65%;
    height:30%;
    width:40%;
    border:1px solid blue;
    background: #fff;
    text-align:right;
    font-family: Courier;
    font-weight:bold;
    padding-right: 4px;
} 
```

**jQuery**

```
$(document).ready(function() {
    function showBar(target, current) {
        perc = current / target * 100;

        console.log(perc);

        l = perc * 4;

        console.log(l);

        $("#cur").css('width', perc + '%');
        $("#cur").text(current);
    }

    showBar(12000, 6000);
}); 
```

只需`showBar`使用目标值和当前值调用即可。

# javascript - span 内部按钮，在 Firefox 中不可点击

> ID：14689879
> 
> 赞同：10
> 
> 时间：2013-02-04T15:26:30.460
> 
> 标签：javascript, jquery, css, html

**我的代码**

* * *

*HTML：*

```
<p id="console"></p>
<button>Click <span class="icon"></span>
</button> 
```

*JS：*

```
$('.icon').click(function () {
    $('#console').html('Icon has been clicked');
    return false;
});

$('button').click(function () {
    $('#console').html('Button has been clicked');
}); 
```

*CSS：*

```
.icon {
    background-position: -96px 0;
    display: inline-block;
    width: 14px;
    height: 14px;
    margin-top: 1px;
    line-height: 14px;
    vertical-align: text-top;
    background-image: url("http://twitter.github.com/bootstrap/assets/img/glyphicons-halflings.png"); 
    background-repeat: no-repeat;
} 
```

[演示](http://jsfiddle.net/jashwant/vFyp2/)

**问题**

* * *

我可以`.icon`在 Chrome 中单击，但不能在 Firefox 中单击。当我单击时`.icon`，它会单击整个`button`。

**问题：**

* * *

我的代码无效吗？如果我的代码有效，这个问题的解决方案是什么。

**我试过的**

* * *

1.  我试过`$('.icon').click()`从控制台做，它在 ff 中完美运行，所以我猜问题是`span`里面不可点击`button`。

2.  `e.preventDefault()`并且`e.stopPropagation`也不工作。

3.  我试过把它`&nbsp;`放进去`span`，但它也不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T16:00:55.707

请参阅[规范](http://www.w3.org/TR/html401/interact/forms.html#h-17.5)，最值得注意的是禁止的内容（在 SGML 定义中；为了帮助阅读，[请看这里](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.3)）：`a`s、`form`s、表单“控件”（`input`、、`select`等）和`fieldset`s。

虽然您断言`span`s （和`div`s 等）是`button`元素的合法内容是正确的，但非法元素都与具有除布局/样式之外的任何功能的按钮内容有关。

我在规范中没有看到任何排除您正在尝试做的事情，但我确实看到了很多令人沮丧的事情，如果各种浏览器也通过不支持它来“阻止”它，我不会感到惊讶。

也就是说：如果您想获得跨浏览器支持，请找到另一种方法来做您想做的事。我不明白你实际上想要做什么，所以我认为不可能提出替代方案。我知道您希望对单击按钮和图标做出不同的反应——但这是（很好，顺便说一句）您不想发生的事情的演示，而不是对您要解决的实际问题的解释。

一种方法可能是不使用按钮，而是使用另一个`span`或 a `div`：

```
<p id="console"></p>
<div class="button_replace">Click <span class="icon"></span></div>
<script>
  $('.icon').click(function () {
    $('#console').html('Icon has been clicked');
    return false;
  });
  $('.button_replace').click(function () {
    $('#console').html('Button has been clicked');
  });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-09T10:10:19.090

如果你在这里，也许这个解决方案对你有用，即使它与问题没有直接关系。

如果您已申请

*   `$("button").click()`听众，和
*   您的按钮包含 a`<span>`或任何其他`<tag>`，并且
*   你的`.click`回调函数是指`$(this)`（甚至`this`）

**然后，如果您单击该按钮，`this`则可能是您单击的最顶部的标签。**

这通常会（例如在我的情况下）错误地归因于调用者，从而导致脚本错误。

希望它可以帮助那里的人！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-05T09:14:02.793

使用以前的答案，我发现只需更改 my 即可解决问题并允许我在按钮内包含内容。样式几乎相同，我只是在其中留下了相同的引导按钮类和元素，它的行为与以前相同。tabindex 在那里，因为我在按钮内使用了一个下拉列表，以便按钮（现在是 div）可以被聚焦并在 Angular 中具有（模糊）或（焦点输出）事件。

# c# - X # 个列表的深度差异

> ID：14689880
> 
> 赞同：2
> 
> 时间：2013-02-04T15:26:34.043
> 
> 标签：c#, algorithm, data-structures

我已经查看了这些问题，这些问题没有给我我想要的东西：[Comparing arrays in C#](https://stackoverflow.com/questions/713341/comparing-arrays-in-c-sharp) and [Compare Two Arrays Of different Lengths and Show Differences](https://stackoverflow.com/questions/1022986/compare-two-arrays-of-different-lengths-and-show-differences)

我有未知数量的`List`未知长度的对象，因此可能有 2、10 等列表。

我考虑过使用类似集合的结构，但意识到虽然它可以确定所有列表是否相等，但它不会告诉我“列表 2 有元素 A 而不是元素 B，列表 3 缺少元素 C，而列表 7 有一个额外的元素 D。

最后，元素是对象，所以我必须实现一个 Equals() 函数来比较两个元素是否相等。例如，元素可以是`car`包含一个`string`for 制造商和一个`int`for price 的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:37:38.220

好的，因此您要查找每个列表并确定它具有的至少不在另一个列表中的项目，以及至少在另一个列表中没有的所有项目。

为此，首先要查找所有列表中的所有项目；那是每个列表的“交集”。

一旦你有了它，你就可以`Except`完成所有的工作。给定列表中的所有项目`except`都会为您提供交集中但不在该特定列表中的项目，交集中`Except`的项目列表是交集中缺少的所有项目。

```
public static IEnumerable<SetDifference<T>> ComputeDifferences<T>(IList<List<T>> lists)
{
    if (lists.Count == 0)
        yield break;

    var intersection = new HashSet<T>(lists.First());
    foreach (var list in lists.Skip(1))
    {
        intersection.IntersectWith(list);
    }

    var output = new List<SetDifference<T>>();
    foreach (var list in lists)
    {
        yield return new SetDifference<T>(
            list: list,
            additionalObjects: list.Except(intersection),
            missingObjects: intersection.Except(list));
    }
} 
```

这是用于提供输出的简单数据保持器。

```
public class SetDifference<T>
{
    public SetDifference(List<T> list, IEnumerable<T> additionalObjects,
            IEnumerable<T> missingObjects)
    {
        List = list;
        AdditionalObjects = additionalObjects;
        MissingObjects = missingObjects;
    }
    public List<T> List { get; private set; }
    public IEnumerable<T> AdditionalObjects { get; private set; }
    public IEnumerable<T> MissingObjects { get; private set; }
} 
```

请注意，由于我使用`HashSet`的是 LINQ 以及其他集合操作，因此它将依赖于`GetHashCode`每个项目的方法，因此它必须具有给定该对象的方法的适当实现`Equals`。

# web-services - 在 REST 中的每个请求中嵌入版本协议号的方法？

> ID：14689883
> 
> 赞同：1
> 
> 时间：2013-02-04T15:26:43.113
> 
> 标签：web-services, rest, ios5, soa, restful-architecture

在开发应用程序时，您的服务器和您的 iPhone 会不断发展，并不总是可以实现向后兼容。我想在每个请求中添加一个协议版本号应该可以解决问题（而不是说另一个协议版本的 Web 服务）。亚马逊在每个请求中都这样做（这里是一个示例）： [https](https://forums.aws.amazon.com/message.jspa?messageID=269876) ://forums.aws.amazon.com/message.jspa?messageID=269876 因此，当应用程序对于当前协议来说太旧时，它会显示一条消息阻止应用程序并要求用户进行更新。否则，使用旧应用程序的客户会看到运行不佳的应用程序。这不好。

我的问题是：如何在不干扰解析器、对象映射和实体映射的情况下在 JSON 回复中实现类似的版本控制模式？有什么建议吗？

也许还有另一种模式，例如在每个请求的标头中传递应用程序版本，如果出现错误，服务器会返回错误消息，例如（来自 twitter）：{"errors":[{"message":"Sorry, that page doesn't存在","代码":34}]}

我想知道你是如何解决这个问题的。问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:41:18.417

您可以使用媒体类型对 API 进行版本控制。例如，如果您的媒体类型是`application/vnd.ricardo+json`并且您需要进行不向后兼容的更改，您将创建一个`application/vnd.ricardo-v2+json`媒体类型。

新版本的应用程序将`Accept`媒体`application/vnd.ricardo-v2+json`类型并获取新内容。旧版本的应用程序将继续`Accept`使用`application/vnd.ricardo+json`并且永远不会看到不兼容的更改。

当你想淘汰旧版本的应用程序时，只需有只接受`application/vnd.ricardo+json`return的请求`406 Not Acceptable`。然后，您可以在您的应用程序中使用它来触发逻辑以提示用户升级。

如果（无论出于何种原因）您需要允许该应用程序支持多个版本的服务器，您可以拥有它`Accept` `application/vnd.ricardo-v2+json, application/vnd.ricardo+json; q=0.5`。`application/vnd.ricardo-v2+json`在这种情况下，如果可以，服务器将响应内容，`application/vnd.ricardo+json`否则。

您可以使用它来更好地控制新功能的“发布”。例如，您可以发布和更新应用程序，使用请求统计信息来确定何时有足够数量的用户升级。然后，您可以通过在服务器上翻转功能开关并同时进行营销工作来协调发布新功能。

# file - txt文件压缩可用的文件压缩算法有哪些？

> ID：14689884
> 
> 赞同：0
> 
> 时间：2013-02-04T15:26:43.047
> 
> 标签：file, compression

我正在为文件压缩（面向文本）开发 as/w 的项目，该项目可提供有效的结果。我搜索了这个网站，但没有任何关于文件压缩基础的问题得到解答。我可以使用 java、c、c++ 进行编码。请建议我一些网站、书籍和特定算法来做到这一点。以及如何看待可用的标准文件压缩s/ws的编码？感谢您考虑这个太基本的问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-19T14:20:45.983

以下是一些最著名且可以轻松实现的文件压缩算法，并且大多数都适用于文本文件，因为它们提供无损压缩。

[游程编码 (RLE)](https://en.wikipedia.org/wiki/Run-length_encoding)

[霍夫曼编码](https://en.wikipedia.org/wiki/Huffman_coding)

Lempel-Ziv 压缩（LZ77 和 LZ78）

DEFLATE – 结合 Lempel-Ziv

Lempel-Ziv-Markov 链算法 (LZMA)

伦佩尔-齐夫-奥伯胡默 (LZO)

Lempel–Ziv–Storer–Szymanski (LZSS)

伦佩尔-齐夫-韦尔奇 (LZW)

# javascript - Hammer.js 与纯 javascript

> ID：14689887
> 
> 赞同：1
> 
> 时间：2013-02-04T15:26:52.343
> 
> 标签：javascript, hammer.js

如何仅使用普通的 Javascript 方法在没有 JQuery 选择器的情况下使用锤子 JS 事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:37:05.953

> 将锤子绑定到容器元素：

```
var hammer = new Hammer(document.getElementById("container")); 
```

> 现在，在容器元素上执行的每个手势上，您都会收到一个包含手势信息的回调对象。

一些示例函数：

```
hammer.ondragstart = function(ev) { };
hammer.ondrag = function(ev) { };
hammer.ondragend = function(ev) { };
hammer.onswipe = function(ev) { }; 
```

hammer.js 可以作为完全独立的版本使用，因此您不需要导入 jquery 资源。见：[http ://eightmedia.github.com/hammer.js/](http://eightmedia.github.com/hammer.js/)

完整文档：[https ://github.com/eightmedia/hammer.js#documentation](https://github.com/eightmedia/hammer.js#documentation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:31:18.460

快速浏览一下 GitHub 文档：

```
var hammer = new Hammer(document.getElementById("container")); 
```

创建一个没有 jQuery 的“锤子”。之后你可以设置回调函数，你也不需要任何 jQuery。但要小心！HammerJS 内部可能需要 jQuery，因此您可能不能省略`<script src="path/to/jquery.js"></script>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T15:52:05.167

简短的回答是：只需使用普通的旧 DOM API。包含 jQuery 后，您没有*义务*或*被迫*只使用 jQuery。

```
var someElements = document.querySelectorAll('.someClass');//not jQuery, perfectly valid
var byId = document.getElementById('someId');
var sameScript = $('#anotherId');//nothing stops me from doing this... using jQ for some things 
```

如果您发现 DOM API 有点笨拙（确实如此），您不妨这样做：

```
var pureDOMRef = $('someID')[0];//returns "normal" Element object, removes jQ wrapper
var multiple = Array.prototype.slice.apply($('.classSelector'),[0]);//returns Array 
```

随便玩，如果你想来回切换，没有错

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-11T00:34:39.887

新版本的hammer.js 提供了一个JQuery 插件，首先必须了解它不是来自JQuery 的插件——它是FOR JQuery。因此，如果您将 JQuery 用于您的站点用于其他目的，那么您基本上可以在 JQuery 选择器上从锤子中“应用”一个插件，如下所示：

```
$(element).hammer(options).bind("pan", myPanHandler); 
```

由于hammer.js 具有现代OOP 模式，它可以一次使用实例处理多个数据，因此绑定到hammer 的每个JQuery 元素都是一个实例。（恕我直言）如果您不介意使用此插件或继续使用 Vanilla，JQuery 会减慢几毫秒。

[http://hammerjs.github.io/jquery-plugin/](http://hammerjs.github.io/jquery-plugin/)

# jquery - 使用 jQuery .delegate() 重写函数

> ID：14689893
> 
> 赞同：1
> 
> 时间：2013-02-04T15:27:27.033
> 
> 标签：jquery, modernizr

我有[这个工作代码](http://jsfiddle.net/LpESM/)，它为还没有它的浏览器添加了占位符功能：

```
$(document).ready(function() {

    //show placeholder text when browser doesn't support placeholder attribute
    if(!Modernizr.input.placeholder){
        $('[placeholder]').focus(function() {
          var input = $(this);
          if (input.val() == input.attr('placeholder')) {
            input.val('');
            input.removeClass('placeholder');
          }
        }).blur(function() {
          var input = $(this);
          if (input.val() == '' || input.val() == input.attr('placeholder')) {
            input.addClass('placeholder');
            input.val(input.attr('placeholder'));
          }
        }).blur();
        $('[placeholder]').parents('form').submit(function() {
          $(this).find('[placeholder]').each(function() {
            var input = $(this);
            if (input.val() == input.attr('placeholder')) {
              input.val('');
            }
          });
        });

    }
}); 
```

问题是如果我用占位符动态添加字段，上面的代码不会显示它们。FF 显示新的占位符，但 IE 不显示。`.delegate()`我的理解是，如果我希望 jQuery 监视当前和未来的 DOM 元素，我需要使用它。所以我尝试如下重写我的函数。这是一个[jsFiddle](http://jsfiddle.net/VbjV2/1/)。不幸的是，新版本既不作用于现有的也不是动态添加的占位符。我做错了什么？

```
$(document).ready(function() {

    if(!Modernizr.input.placeholder){
        $('form').delegate('[placeholder]','focus',function() {
          var input = $(this);
          if (input.val() == input.attr('placeholder')) {
            input.val('');
            input.removeClass('placeholder');
          }
        }).delegate('[placeholder]','blur', function() {
          var input = $(this);
          if (input.val() == '' || input.val() == input.attr('placeholder')) {
            input.addClass('placeholder');
            input.val(input.attr('placeholder'));
          }
        }).blur();
        $('[placeholder]').parents('form').submit(function() {
          $(this).find('[placeholder]').each(function() {
            var input = $(this);
            if (input.val() == input.attr('placeholder')) {
              input.val('');
            }
          });
        });

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:22:32.583

```
$(document).ready(function() {

    if(!Modernizr.input.placeholder){
        $('form').on('focus', '[placeholder]',function() {
          var input = $(this);
          if (input.val() == input.attr('placeholder')) {
            input.val('');
            input.removeClass('placeholder');
          }
        }).on('blur', '[placeholder]', function() {
          var input = $(this);
          if (input.val() == '' || input.val() == input.attr('placeholder')) {
            input.addClass('placeholder');
            input.val(input.attr('placeholder'));
          }
        }).blur();
        $('[placeholder]').parents('form').submit(function() {
          $(this).find('[placeholder]').each(function() {
            var input = $(this);
            if (input.val() == input.attr('placeholder')) {
              input.val('');
            }
          });
        });

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:12:49.190

您是否尝试过使用 .on() 事件[http://api.jquery.com/on/](http://api.jquery.com/on/)？如果您从“直接和委托事件”向下阅读，它会解释它是如何工作的。我认为它应该可以解决您的问题。在使用像把手这样的无逻辑模板时，我将它用于类似的问题。

# ruby-on-rails - 如何在 Windows 上完全卸载 ruby on rails（使用 RailsInstaller 安装）？

> ID：14689898
> 
> 赞同：7
> 
> 时间：2013-02-04T15:27:33.977
> 
> 标签：ruby-on-rails, ruby

我是一个完整的 ruby​​ on rails 初学者，并且正在学习有关 Skillshare 的教程。我按照说明在 Windows 7 上安装了 rails，但一直遇到问题。

我想完全卸载它并重新开始。

我看到了一些与此相关的帖子，但是 gem uninstall rails 之类的命令不起作用，因为我不确定当我输入该命令时应该在哪个文件夹中。

此外，本教程是在 Mac 中完成的，所以我无法完全按照它进行操作。

如果有办法卸载 rails（使用 railsinstaller 安装），请告诉我。非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T15:51:58.603

`Program and Features`您可以从控制面板中卸载它。之后，您可以删除安装它的目录。如果你没有改变它，那么它就是`C:\Program Files(x86)\Railsinstaller`

但是，刷新软件安装只是极端的一步。您遇到什么问题？您可以评论或将这些添加到您的问题中。

# ios - presentViewController 不适用于动画：否

> ID：14689899
> 
> 赞同：0
> 
> 时间：2013-02-04T15:27:40.580
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, ios6

我`[self presentModalViewController:head animated:NO];`在 ios 4.3 中使用并寻找 ios 5 及更高版本的替代品。我更喜欢为所有 iOS 版本使用通用的东西，但`if (iOS is lower than 6)`也可以很好。**我的**问题是，`[self presentViewController:head animated:YES completion:nil];`仅当设置为. 知道为什么吗？我不希望它动画。**如果我不**使用，还有什么可以使用的吗？**`animated``YES`**`StoryBoards`****

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T16:13:38.147

应用程序是否完全失败？你启用了 NSZombies 吗？

如果你正在做这样的事情

```
- (id)init {
    self = [super init]

    if (self) {
       ViewController * viewController = [[ViewController alloc] init];
       [self presentViewController:viewController animated:YES];
    }

    return self;
} 
```

这是因为视图尚未启动，请使用以下方法之一

```
- (void)viewDidAppear:(BOOL)animated {
   [super viewDidAppear:animated];

   ViewController * viewController = [[ViewController alloc] init];
   [self presentViewController:viewController animated:YES];

}

// OR

- (void)viewDidLoad {
   [super viewDidLoad];

   ViewController * viewController = [[ViewController alloc] init];
   [self presentViewController:viewController animated:YES];

} 
```

我知道这可能无法回答您的问题，但您没有发布它所在的启动器。但这是一个常见错误，所以我想我会发布它以解决您的问题。****

# windows-8 - 如何检查因“显示方向”更改而触发的 Window.VisibilityChanged 事件？

> ID：14689900
> 
> 赞同：2
> 
> 时间：2013-02-04T15:27:42.293
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我在我的应用程序中使用 Window.VisibilityChanged 事件。是否可以检查由于“显示方向”更改而触发的 Window.VisibilityChanged 事件？（VisibilityChangedEventArgs 类只有 2 个公共属性：Handled、Visible）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:21:05.150

**2013 年 2 月 6 日编辑：这不是答案，而是观察到的可能有趣但脆弱的行为：)**

根据经验**，在模拟器**中，方向变化似乎会触发以下序列

```
VisibilityChanged  
OrientationChanged  
VisibilityChanged 
```

所以你可以在[OrientationChanged中设置一个哨兵值，在](http://msdn.microsoft.com/en-us/library/windows/apps/windows.graphics.display.displayproperties.orientationchanged.aspx)[VisibilityChanged](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.window.visibilitychanged.aspx)中测试它，然后在那里重置它。您将能够检测到第二次出现，这听起来像是您想要的。

同一个示例应用程序虽然在设备上的行为不同，我观察到没有 VisibilityChanged 事件，而应用程序保持焦点并且设备被转动，但是当应用程序暂停、设备旋转和应用程序恢复时，最后有两个额外的 VisibilityChanged 事件。

# image - 图像处理（Matlab）：索引超出矩阵维度

> ID：14689901
> 
> 赞同：0
> 
> 时间：2013-02-04T15:27:44.690
> 
> 标签：image, matlab, image-processing

好吧，我是 matlab 编程的新手，我一直在与索引问题作斗争。我目前正在研究图像处理，这让我发疯。无论如何，让我们跳到问题。我有以下代码

```
perm=randperm(size(X,2));
CX=X(:,perm(1:nclus)); 
```

我尝试运行代码，但它触发了一个错误，提示“索引超出了矩阵维度。据我所知，我认为这是因为`(:,perm(1:nclus))`高于矩阵维度。我想知道如何解决这个问题。

请注意，X：是列 nclus：簇数中的输入点。

如果你们向我澄清错误原因和可能的解决方案，我非常感谢。

谢谢

萨米人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:38:07.453

猜测您只想`nclus`从 2 维矩阵中获取随机列`X`，试试这个：

```
perm=randperm(size(X,2));
CX=X(:,perm<=nclus); 
```

您遇到的错误不应该来自`X`被调用的维度太多，可能是因为超出了 perm 的维度。尝试逐行运行：

```
perm = randperm(size(X,2)); %Should be ok
idx = perm(1:nclus); %Probably fails
X(:,idx) 
```

# iphone - iOS上的缓存，如何在重新启动时删除

> ID：14689904
> 
> 赞同：0
> 
> 时间：2013-02-04T15:27:57.640
> 
> 标签：iphone, ios, xcode, caching

我决定将这个项目导入我在 github [lockscreen](https://github.com/Krishna/Lock-Screen)上找到的应用程序中。本质上，它就像 iOS 密码锁屏一样工作，但在这种情况下，它可以保护应用程序不被随机的窥探者使用。锁屏工作我的问题是，如果我设置了密码锁销并从我的 iPhone 上删除应用程序并重新安装它，锁屏仍然要求输入密码。我相信这是由存储应用程序设置的密码的缓存引起的。是在重新启动或删除应用程序时删除缓存的方法吗？我想这将在委托中实现？你怎么能这样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:44:10.997

好吧，是的，不是的。密钥存储在钥匙串中，您需要从中删除它。这样做的方法是在启动时检查它是应用程序的新安装，并从钥匙串中清除密钥的当前值。

由于在删除您的应用程序时没有执行代码，因此您无法在删除应用程序之后或删除应用程序时真正执行此操作。

# jquery-ui - jquery ui可拖动元素中的flot

> ID：14689910
> 
> 赞同：1
> 
> 时间：2013-02-04T15:28:16.093
> 
> 标签：jquery-ui, flot, jquery-ui-draggable

任何人都可以帮助解决以下问题。Draggable 移动 div 元素，但在停止时，仅移动浮动轴标签。我相信这是因为 flot 创建的画布元素使用了绝对定位的画布元素。

```
<!DOCTYPE html>
<html lang="en-US">
<head>
    <title>Flot Mockup</title>
    <meta charset="utf-8"/>

    <!-- Flot recommends using this for IE < 9 for canvas emulator see https://github.com/flot/flot/blob/master/README.md -->
    <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="js/flot/excanvas.min.js"></script><![endif]-->

    <!-- Note: Many extended libraries make use of jQuery.browser which has been deprecated in jquery 1.9 - use 1.8 -->
    <!--<script language="javascript" type="text/javascript" src="js/jquery-1.9.0.js" ></script>-->
    <script language="javascript" type="text/javascript" src="js/jquery-1.8.0.js" ></script>

    <script language="javascript" type="text/javascript" src="js/jquery-ui-1.10.0.custom.js" ></script>

    <script language="javascript" type="text/javascript" src="js/flot/jquery.flot.js" ></script>
    <script language="javascript" type="text/javascript" src="js/flot/jquery.flot.resize.js"></script>

    <link rel="stylesheet" type="text/css" href="css/jquery-ui-1.10.0.custom.css" />

    <!-- CUSTOMIZE/OVERRIDE THE DEFAULT CSS -->
    <style type="text/css">

        html {
            height: 100%;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100%;
        }

        /* Headers & Footer in Center & East panes */
        h3, h4 { 
            font-size:      1.1em;
            background:     #EEF;
            border:         1px solid #BBB;
            border-width:   0 0 1px;
            padding:        7px 10px;
            margin:         0;
        }

        /* Need this or close button on tab will wrap */
        .ui-tabs-nav li .ui-icon-close { 
            float: left; 
            margin: 0.4em 0.2em 0 0; 
            cursor: pointer; 
        }

        /*
        *   TAB-THEME ADJUSTMENTS
        */
        .ui-tabs-nav li {
            white-space:    nowrap;
        }
        .ui-tabs-nav li a {
            font-size:      1em !important;
            padding:        4px 1.5ex 3px !important;
        }
        .ui-tabs-panel {
            font-size:      1em !important;
            /* padding:     0 1em !important;*/ 
        }

        #workSpaceTabs{
            padding-bottom: 0 !important;
        }

        .isi-default-plot {
            padding: 20px;
            width: 90%;
            height: 90%;
            font-size: 14px;
            line-height: 14px;
        }
    </style>

</head>
<body>

    <!-- Center Layout Panel - Workspace -->
    <div class="ui-layout-center">
    <div id="workSpaceTabs" >

        <ul class="ui-tabs-nav">
            <li><a href="#tabs-1">Tab 1</a><span class='ui-icon ui-icon-close' role='presentation'>Remove Tab</span></li>
        </ul>

        <div id="tabs-1" class="ui-tabs-panel isi-layout-content">
            <div id="t1-sort">
                <div id="t1-c1" class="ui-state-active isi-container" style="width:100%; height:300px">
                    <h3 class="ui-widget-header">Drag Me - Flot 1</h3>
                    <div id="t1-c1-p1" class="isi-default-plot isi-flotPlot"></div>
                </div>

                <div id="t1-c2" class="ui-state-active isi-container" style="width:100%; height:250px">
                    <h3 class="ui-widget-header">Drag Me - Flot 2</h3>
                    <div id="t1-c2-p2" class="isi-default-plot isi-flotPlot"></div>
                </div>

                <div id="t1-c3" class="ui-state-active isi-container" style="width:100%; height:300px">
                    <h3 class="ui-widget-header">Drag Me 3</h3>
                    <p> TODO: Try putting a plot inside me</p>
                </div>
            </div>
        </div>
    </div>  
    </div>

    <!-- Layout scripting logic -->
    <script type="text/javascript">

        var tabs = $("#workSpaceTabs").tabs({
            heightStyle:    "fill"

        });

        $("#t1-sort").sortable({
            revert: true
        });

        $(".isi-container").draggable({
            scroll: true
            , connectToSortable: "#t1-sort"
            , containment: "parent" 
            , stop: function( event, ui ) {onContainerDragStop(event, ui);}
        });

    </script>

    <!-- Flot Plotting Logic -->
    <script type="text/javascript">
        //
        // Global Plots
        //
        var flotPlots = new Array();

        //
        // Std Data Series' from examples
        //
        var d1 = [];
        for (var i = 0; i < 14; i += 0.5) {
            d1.push([i, Math.sin(i)]);
        }

        var d2 = [[0, 3], [4, 8], [8, 5], [9, 13]];

        // A null signifies separate line segments
        var d3 = [[0, 12], [7, 12], null, [7, 2.5], [12, 2.5]];

        //
        // Draw a flot plot in each container
        //
         $(".isi-flotPlot").each(
            function(){

                var thisID = $(this).attr("id");
                var thisSelectorID = "#" + thisID;
                var plot = $.plot(thisSelectorID, [ d1, d2, d3 ]);

                flotPlots.push( {id: thisID, plot: plot} );
            });

    </script>

    <!-- Event Handlers -->
    <script type="text/javascript">

        //
        // Drag/Sort doesn't move the canvas elements.  
        // Try refreshing them all to work out a fix.
        // 
        function onContainerDragStop(event, ui){

             for(var i = 0 ; i < flotPlots.length; i++){
                //alert("ReDrawing: " + flotPlots[i].id);
                flotPlots[i].plot.resize();
                flotPlots[i].plot.setupGrid();
                flotPlots[i].plot.draw();
             }
        }

    </script>
</body>
</html> 
```

修改后--这里是拖拽操作前后生成的源码--

拖动前：

```
<div id="t1-c1" class="ui-state-active isi-container ui-draggable" style="width: 100%; height: 300px; position: relative;">
    <h3 class="ui-widget-header">Drag Me - Flot 1</h3>
    <div style="padding: 0px; position: relative;" id="t1-c1-p1" class="isi-default-plot isi-flotPlot"><canvas height="270" width="1634" class="base"></canvas><canvas style="position: absolute; left: 0px; top: 0px; width: 1634px; height: 270px;" height="270" width="1634" class="overlay"></canvas><div class="tickLabels" style="font-size:smaller"><div class="xAxis x1Axis" style="color:#545454"><div class="tickLabel" style="position:absolute;text-align:center;left:-26px;top:256px;width:108px">0</div><div class="tickLabel" style="position:absolute;text-align:center;left:93px;top:256px;width:108px">1</div><div class="tickLabel" style="position:absolute;text-align:center;left:211px;top:256px;width:108px">2</div><div class="tickLabel" style="position:absolute;text-align:center;left:330px;top:256px;width:108px">3</div><div class="tickLabel" style="position:absolute;text-align:center;left:449px;top:256px;width:108px">4</div><div class="tickLabel" style="position:absolute;text-align:center;left:567px;top:256px;width:108px">5</div><div class="tickLabel" style="position:absolute;text-align:center;left:686px;top:256px;width:108px">6</div><div class="tickLabel" style="position:absolute;text-align:center;left:805px;top:256px;width:108px">7</div><div class="tickLabel" style="position:absolute;text-align:center;left:923px;top:256px;width:108px">8</div><div class="tickLabel" style="position:absolute;text-align:center;left:1042px;top:256px;width:108px">9</div><div class="tickLabel" style="position:absolute;text-align:center;left:1161px;top:256px;width:108px">10</div><div class="tickLabel" style="position:absolute;text-align:center;left:1279px;top:256px;width:108px">11</div><div class="tickLabel" style="position:absolute;text-align:center;left:1398px;top:256px;width:108px">12</div><div class="tickLabel" style="position:absolute;text-align:center;left:1517px;top:256px;width:108px">13</div></div><div class="yAxis y1Axis" style="color:#545454"><div class="tickLabel" style="position:absolute;text-align:right;top:242px;right:1613px;width:21px">-2.5</div><div class="tickLabel" style="position:absolute;text-align:right;top:207px;right:1613px;width:21px">0.0</div><div class="tickLabel" style="position:absolute;text-align:right;top:172px;right:1613px;width:21px">2.5</div><div class="tickLabel" style="position:absolute;text-align:right;top:137px;right:1613px;width:21px">5.0</div><div class="tickLabel" style="position:absolute;text-align:right;top:102px;right:1613px;width:21px">7.5</div><div class="tickLabel" style="position:absolute;text-align:right;top:67px;right:1613px;width:21px">10.0</div><div class="tickLabel" style="position:absolute;text-align:right;top:32px;right:1613px;width:21px">12.5</div><div class="tickLabel" style="position:absolute;text-align:right;top:-3px;right:1613px;width:21px">15.0</div></div></div></div>
</div> 
```

拖动后：

```
<div class="ui-state-active isi-container ui-draggable ui-draggable-dragging" style="width: 100%; height: 300px; position: relative; left: auto; top: auto; display: block;">
    <h3 class="ui-widget-header">Drag Me - Flot 1</h3>
    <div style="padding: 0px; position: relative;" id="t1-c1-p1" class="isi-default-plot isi-flotPlot"><canvas height="270" width="1634" class="base"></canvas><canvas style="position: absolute; left: 0px; top: 0px; width: 1634px; height: 270px;" height="270" width="1634" class="overlay"></canvas><div class="tickLabels" style="font-size:smaller"><div class="xAxis x1Axis" style="color:#545454"><div class="tickLabel" style="position:absolute;text-align:center;left:-26px;top:256px;width:108px">0</div><div class="tickLabel" style="position:absolute;text-align:center;left:93px;top:256px;width:108px">1</div><div class="tickLabel" style="position:absolute;text-align:center;left:211px;top:256px;width:108px">2</div><div class="tickLabel" style="position:absolute;text-align:center;left:330px;top:256px;width:108px">3</div><div class="tickLabel" style="position:absolute;text-align:center;left:449px;top:256px;width:108px">4</div><div class="tickLabel" style="position:absolute;text-align:center;left:567px;top:256px;width:108px">5</div><div class="tickLabel" style="position:absolute;text-align:center;left:686px;top:256px;width:108px">6</div><div class="tickLabel" style="position:absolute;text-align:center;left:805px;top:256px;width:108px">7</div><div class="tickLabel" style="position:absolute;text-align:center;left:923px;top:256px;width:108px">8</div><div class="tickLabel" style="position:absolute;text-align:center;left:1042px;top:256px;width:108px">9</div><div class="tickLabel" style="position:absolute;text-align:center;left:1161px;top:256px;width:108px">10</div><div class="tickLabel" style="position:absolute;text-align:center;left:1279px;top:256px;width:108px">11</div><div class="tickLabel" style="position:absolute;text-align:center;left:1398px;top:256px;width:108px">12</div><div class="tickLabel" style="position:absolute;text-align:center;left:1517px;top:256px;width:108px">13</div></div><div class="yAxis y1Axis" style="color:#545454"><div class="tickLabel" style="position:absolute;text-align:right;top:242px;right:1613px;width:21px">-2.5</div><div class="tickLabel" style="position:absolute;text-align:right;top:207px;right:1613px;width:21px">0.0</div><div class="tickLabel" style="position:absolute;text-align:right;top:172px;right:1613px;width:21px">2.5</div><div class="tickLabel" style="position:absolute;text-align:right;top:137px;right:1613px;width:21px">5.0</div><div class="tickLabel" style="position:absolute;text-align:right;top:102px;right:1613px;width:21px">7.5</div><div class="tickLabel" style="position:absolute;text-align:right;top:67px;right:1613px;width:21px">10.0</div><div class="tickLabel" style="position:absolute;text-align:right;top:32px;right:1613px;width:21px">12.5</div><div class="tickLabel" style="position:absolute;text-align:right;top:-3px;right:1613px;width:21px">15.0</div></div></div></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T13:35:33.283

Found the solution. Turns out draggable is not required with sortable in my use case. Seems that usage of draggable and sortable together with a flot element inside gets confounded. Commenting out the logic as shown in the sample below, solves the problem.

```
 <!DOCTYPE html>
<html lang="en-US">
<head>
    <title>Flot Mockup</title>
    <meta charset="utf-8"/>

    <!-- Flot recommends using this for IE < 9 for canvas emulator see https://github.com/flot/flot/blob/master/README.md -->
    <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="js/flot/excanvas.min.js"></script><![endif]-->

    <!-- Note: Many extended libraries make use of jQuery.browser which has been deprecated in jquery 1.9 - use 1.8 -->
    <!--<script language="javascript" type="text/javascript" src="js/jquery-1.9.0.js" ></script>-->
    <script language="javascript" type="text/javascript" src="js/jquery-1.8.0.js" ></script>

    <script language="javascript" type="text/javascript" src="js/jquery-ui-1.10.0.custom.js" ></script>

    <script language="javascript" type="text/javascript" src="js/flot/jquery.flot.js" ></script>
    <script language="javascript" type="text/javascript" src="js/flot/jquery.flot.resize.js"></script>

    <link rel="stylesheet" type="text/css" href="css/jquery-ui-1.10.0.custom.css" />

    <!-- CUSTOMIZE/OVERRIDE THE DEFAULT CSS -->
    <style type="text/css">

        html {
            height: 100%;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100%;
        }

        /* Headers & Footer in Center & East panes */
        h3, h4 { 
            font-size:      1.1em;
            background:     #EEF;
            border:         1px solid #BBB;
            border-width:   0 0 1px;
            padding:        7px 10px;
            margin:         0;
        }

        /* Need this or close button on tab will wrap */
        .ui-tabs-nav li .ui-icon-close { 
            float: left; 
            margin: 0.4em 0.2em 0 0; 
            cursor: pointer; 
        }

        /*
        *   TAB-THEME ADJUSTMENTS
        */
        .ui-tabs-nav li {
            white-space:    nowrap;
        }
        .ui-tabs-nav li a {
            font-size:      1em !important;
            padding:        4px 1.5ex 3px !important;
        }
        .ui-tabs-panel {
            font-size:      1em !important;
            /* padding:     0 1em !important;*/ 
        }

        #workSpaceTabs{
            padding-bottom: 0 !important;
        }

        .isi-default-plot {
            padding: 20px;
            width: 90%;
            height: 90%;
            font-size: 14px;
            line-height: 14px;
        }
    </style>

</head>
<body>

    <!-- Center Layout Panel - Workspace -->
    <div class="ui-layout-center">
    <div id="workSpaceTabs" >

        <ul class="ui-tabs-nav">
            <li><a href="#tabs-1">Tab 1</a><span class='ui-icon ui-icon-close' role='presentation'>Remove Tab</span></li>
        </ul>

        <div id="tabs-1" class="ui-tabs-panel isi-layout-content">
            <div id="t1-sort">
                <div id="t1-c1" class="ui-state-active isi-container" style="width:100%; height:300px">
                    <h3 class="ui-widget-header">Drag Me - Flot 1</h3>
                    <div id="t1-c1-p1" class="isi-default-plot isi-flotPlot"></div>
                </div>

                <div id="t1-c2" class="ui-state-active isi-container" style="width:100%; height:250px">
                    <h3 class="ui-widget-header">Drag Me - Flot 2</h3>
                    <div id="t1-c2-p2" class="isi-default-plot isi-flotPlot"></div>
                </div>

                <div id="t1-c3" class="ui-state-active isi-container" style="width:100%; height:300px">
                    <h3 class="ui-widget-header">Drag Me 3</h3>
                    <p> TODO: Try putting a plot inside me</p>
                </div>
            </div>
        </div>
    </div>  
    </div>

    <!-- Layout scripting logic -->
    <script type="text/javascript">

        var tabs = $("#workSpaceTabs").tabs({
            heightStyle:    "fill"

        });

        $("#t1-sort").sortable({
            revert: true
        });
/*
        $(".isi-container").draggable({
            scroll: true
            , connectToSortable: "#t1-sort"
            , containment: "parent" 
            , stop: function( event, ui ) {onContainerDragStop(event, ui);}
        });
*/
    </script>

    <!-- Flot Plotting Logic -->
    <script type="text/javascript">
        //
        // Global Plots
        //
        var flotPlots = new Array();

        //
        // Std Data Series' from examples
        //
        var d1 = [];
        for (var i = 0; i < 14; i += 0.5) {
            d1.push([i, Math.sin(i)]);
        }

        var d2 = [[0, 3], [4, 8], [8, 5], [9, 13]];

        // A null signifies separate line segments
        var d3 = [[0, 12], [7, 12], null, [7, 2.5], [12, 2.5]];

        //
        // Draw a flot plot in each container
        //
         $(".isi-flotPlot").each(
            function(){

                var thisID = $(this).attr("id");
                var thisSelectorID = "#" + thisID;
                var plot = $.plot(thisSelectorID, [ d1, d2, d3 ]);

                flotPlots.push( {id: thisID, plot: plot} );
            });

    </script>

    <!-- Event Handlers -->
    <script type="text/javascript">
/*
        //
        // Drag/Sort doesn't move the canvas elements.  
        // Try refreshing them all to work out a fix.
        // 
        function onContainerDragStop(event, ui){

             for(var i = 0 ; i < flotPlots.length; i++){
                //alert("ReDrawing: " + flotPlots[i].id);
                flotPlots[i].plot.resize();
                flotPlots[i].plot.setupGrid();
                flotPlots[i].plot.draw();
             }
        }
*/
    </script>
</body>
</html> 
```

# c++ - 均匀分布的随机数生成

> ID：14689914
> 
> 赞同：6
> 
> 时间：2013-02-04T15:28:30.857
> 
> 标签：c++, math

为什么这段代码会生成均匀分布的数字？我理解它有一些困难。有人可以解释一下吗？谢谢。

```
int RandomUniform(int n) {  
  int top = ((((RAND_MAX - n) + 1) / n) * n - 1) + n;  
  int r;  
  do {  
    r = rand();  
  } while (r > top);  
  return (r % n);  
} 
```

更新：我明白为什么 rand()%n 没有给你一个均匀分布的序列。我的问题是为什么

```
top = ((((RAND_MAX - n) + 1) / n) * n - 1) + n; 
```

这里有什么顾虑？我认为一个简单的 top = RAND_MAX / n * n 就可以了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T15:45:40.590

函数假设`rand()`是均匀分布的；这是否是一个有效的假设取决于`rand()`.

给定一个制服，我们可以通过计算`rand()`得到一个范围内的随机数。但是，总的来说，这不会很统一。例如，假设是 3 和7：`[0,n)``rand()%n``n``RAND_MAX`

```
rand()      0 1 2 3 4 5 6 7
rand() % n  0 1 2 0 1 2 0 1 
```

我们可以看到 0 和 1 的概率为 3/8，而 2 的概率仅为 2/8：分布不均匀。

您的代码会丢弃任何`rand()`大于或等于`n`它可以生成的最大倍数的值。现在每个值都有相等的概率：

```
rand()      0 1 2 3 4 5 6 7
rand() % n  0 1 2 0 1 2 X X 
```

所以 0,1 和 2 都得出 1/3 的概率，只要我们不是那么倒霉以至于循环永远不会终止。

关于您的更新：

> 我认为一个简单的 top = RAND_MAX / n * n 就可以了。

如果`RAND_MAX`是排他界限（比实际最大值多一个），那将是正确的。既然是包容界限，我们需要加一个来得到独占界限；并且由于以下逻辑与`>`包含边界进行比较，因此在计算后再次减去：

```
int top = ((RAND_MAX + 1) / n) * n - 1; 
```

但是，如果`RAND_MAX`等于`INT_MAX`，则计算会溢出；为避免这种情况，`n`请在计算开始时减去，然后在末尾再次添加：

```
int top = (((RAND_MAX - n) + 1) / n) * n - 1 + n; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-04T15:40:16.950

根本问题是这样的：假设您有一个随机数生成器`my_rand()`，它产生 0 到 6（含）的值，并且您想要生成 0 到 5（含）的值；如果您运行生成器并返回`my_rand() % 6`，您将不会得到均匀分布。当`my_rand()`返回 0 时，你得到 0；当它返回 1 时，你会得到 1，以此类推，直到`my_rand()`返回 6；在这种情况下`my_rand() % 6`是 0。所以总的来说，`my_rand() % 6`返回 0 的频率是任何其他值的两倍。解决这个问题的方法是不要使用大于 5 的值，也就是说，不要`my_rand() % 5`编写一个循环并丢弃`my_rand()`太大的值。这基本上就是问题中的代码正在做的事情。我没有追查过，但通常的实现是计算最大的倍数`n`小于或等于`RAND_MAX`，并且每当`rand()`返回大于该倍数的值时，返回并获取新值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T16:02:07.520

我没有跟踪计算顶部的代码，而是可以返回`RAND_MAX`的最大值；将是一个更好的上限，但如果是，比如说，结果将是不可预测的。所以也许所有的代码都试图避免溢出。`rand()``(RAND_MAX + 1) / n * n``RAND_MAX``INT_MAX`

# visual-studio-2010 - OpenGL Visual studiio 2010 C++ Windows7 运行时错误

> ID：14689916
> 
> 赞同：2
> 
> 时间：2013-02-04T15:28:36.177
> 
> 标签：visual-studio-2010, visual-c++, opengl, windows-7-x64

我刚买了一台新的 64 位计算机，它具有上面标题中的特征，并试图运行一个只有 glutInit() 并在 main() 中返回 0 的简单 OpenGL 程序。它构建但在调试下运行会打开一个黑屏窗口，然后另一个弹出窗口显示“应用程序无法正确启动（0xc000007b）。单击确定关闭应用程序。” 我重新检查了 .h、.lib 和 .dll 文件的位置，它们符合我在网上找到的建议。我认为我的项目设置是正确的，否则它不会构建。我忘了做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:30:30.923

我使用 Visual Studio 2010 和 FreeGlut / GLEW 为 OpenGL 3.2（或更高版本）编写了一个小型入门程序。

[https://github.com/mortennobel/OpenGL_3.2_VS_2010_freeglut](https://github.com/mortennobel/OpenGL_3.2_VS_2010_freeglut)

需要注意的重要一点是设置`glewExperimental = GL_TRUE;`（否则程序可能会在某些 OpenGL 驱动程序上崩溃）。

# ruby - Ruby 会话总是产生新会话 (sudo)

> ID：14689917
> 
> 赞同：0
> 
> 时间：2013-02-04T15:28:35.920
> 
> 标签：ruby, shell, sudo

我有一些简单的代码创建一个会话对象（使用[会话 gem）](http://rubygems.org/gems/session)来运行一些 shell 命令。我在同一个 BEGIN 块中多次使用 sudo，并且在每个命令上都会提示我输入 sudo 密码。我相信它应该只在创建会话后第一次被询问，然后重用会话以避免这种情况。

```
#!/usr/bin/env ruby

require 'rubygems'
require 'date'
require 'mysql2'
require 'session'

begin
  sh = Session::Shell.new
  puts "Starting file system copy."
  $WWW_ROOT = "~/Downloads/"
  $MASTER='/git/library/dev/.git'
  $DOMAIN = ARGV[1].to_s
  $DOC_ROOT = [$WWW_ROOT, $DOMAIN].join

  stdout, stderr = sh.execute ("cd #{$WWW_ROOT} && ls && sudo git clone -q #{$MASTER} #{$DOMAIN}")
  if stderr.length > 0
    puts stderr
    puts 'Error on git cloning.'
  else
    puts stdout, stderr
puts "Git cloning finished."    
  end

  stdout, stderr = sh.execute ("cd #{$DOC_ROOT} && sudo git checkout lib_dev")
  if stderr.length > 0
    puts stderr
    puts 'Error on Git lib_dev checkout.'
  else
    puts stdout, stderr
puts "Git lib_dev checkout finished."   
  end

end 
```

**如何使*sudo*密码提示只出现一次？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T11:47:23.827

*不要为会话*必须以 root 身份运行的每个命令发出“sudo”，而是让会话切换到*root*，只需一次：

```
sh.execute "sudo su" 
```

确保保留该会话实例。现在将“sudo”前缀留给您在会话中运行的命令。

```
sh.execute "cd #{$WWW_ROOT} && ls && git clone -q #{$MASTER} #{$DOMAIN}"
...
sh.execute "cd #{$DOC_ROOT} && git checkout lib_dev" 
```

如果您的脚本必须以 root 身份执行某些操作，并且必须以用户身份执行某些操作，那么请保留*两个*会话，其中只有一个是 root：

```
user_sh = Session.new
root_sh = Session.new
root_sh.execute "sudo su"
user_sh.execute "some_ordinary_command"
root_sh.execute "some_command_needing_root_privileges" 
```

# sublimetext2 - Sublime Text 2 添加了额外的换行符。怎么解决？

> ID：14689918
> 
> 赞同：2
> 
> 时间：2013-02-04T15:28:37.157
> 
> 标签：sublimetext2

当我使用 Sublime Text 2 通过 FTP 打开某些文件时，例如 .css 或 .php 文件，ST2 在每行之后添加一个额外的换行符。结果是大量不必要的空白使文件难以再次扫描和清理。

有人可以指导我如何将首选项设置为在打开文件时不添加额外换行符的位置吗？

非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T18:50:16.337

去`Settings - Default`并找到这个选项 -

```
// Set to true to ensure the last line of the file ends in a newline
// character when saving
"ensure_newline_at_eof_on_save": false, 
```

# css - 调整窗口大小时隐藏的页脚？

> ID：14689919
> 
> 赞同：0
> 
> 时间：2013-02-04T15:28:36.493
> 
> 标签：css, footer

我有一个固定位置的页脚，我试图将其保留在页面底部，但当我调整它的大小时，它也让它不跟随浏览器窗口。因此，如果我从底部拖动 Firefox，它就会被隐藏。

我尝试过相对位置，这使页脚跳起来并坐在页眉下方。我也尝试过绝对位置，我认为这是正确的使用，但它似乎与固定位置做同样的事情。

**CSS：**

```
html, body {
    height: 100%;
    width: 100%;
    overflow-x: hidden;
    margin: 0;
    padding: 0;
    font-family: Tahoma, Geneva, sans-serif;
    font-size: 12px; 
    -webkit-font-smoothing: antialiased; 
    font-smoothing: antialiased;
}               
#wrapper {
    min-height: 100%;
    position: relative;
}
#header {
    width: 100%;
    padding: 10px; 
    background-color: #fff;
    position: relative;
    -webkit-box-shadow: 0px 0px 30px #7a7a7a; 
    -moz-box-shadow: 0px 0px 30px #7a7a7a; 
    box-shadow: 0px 0px 30px #7a7a7a;
}
#content {
    padding: 10px;
    padding-bottom :45px;
}
#footer {
    width: 100%;
    height: 45px;
    position: absolute;
    bottom: 0;
    left: 0;
    background: #222;
    margin: 0;
    padding: 0;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:15:54.313

我相信我已经解决了你的问题。您需要`position: absolute;`像以前一样使用，但不是从底部指定位置/位置，您必须像这样从顶部指定它：`top: 500px;`这样您就可以在页脚上方插入内容，并且即使您调整大小，它也会保持原位浏览器窗口！

编辑：经过一些研究，我发现另一种方法是将内容放在**包含块中**（这是一个定位为**relative**、**absolute**或**fixed**的元素），然后将其放在文档源的底部，并且从那里去。

# linux - 带有 gnu 屏幕的 Vim 背景

> ID：14689925
> 
> 赞同：9
> 
> 时间：2013-02-04T15:29:21.007
> 
> 标签：linux, vim, gnu-screen

我的配色方案有问题`vim`。使用在 GNU 屏幕中启动的 vim 会话编辑文件时，文本背景无法正确呈现。在屏幕外的会话中，整个背景是灰色的（应该是这样的）。对于屏幕内的 vim 窗口，只有文本正后方的背景显示为灰色。其余为黑色。

我的TERM`xterm-256color`和. 我的有`.cshrc``.screenrc``.vimrc``set t_Co=256`

我正在使用`csh`.

编辑：我正在通过`cygwin`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T14:28:30.230

[填写OP，见评论]

OP发现了问题：

> 我需要这套：
> 
> ```
> defbce "on" 
> ```
> 
> 这会强制刷新背景颜色。
> 
> > “更改背景颜色擦除设置。如果`bce`设置为“开”，则所有通过擦除/插入/滚动/清除操作清除的字符都将以当前背景颜色显示。否则使用默认背景颜色。
> 
> – 拉维 19 小时前

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T18:57:56.060

[如此处所述](http://snk.tuxfamily.org/log/vim-256color-bce.html)，通过清除终端选项（在 Vim 中运行，然后按+刷新终端显示）禁用**背景颜色擦除**(BCE)，以便在 tmux 和 GNU 屏幕中使用 Vim 时颜色方案正常工作。`t_ut``:set t_ut=``Control``L`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-16T15:20:31.967

要使 vim、bash 和 screen 设置一起工作：

1）在 .bashrc 添加以下内容：

```
export TERM=xterm-256color 
```

2）在 .screenrc 添加以下内容：

```
altscreen on
defbce on
set term=screen-256color 
```

# python - 如何使用 numpy a la numexpr 进行就地极坐标变换

> ID：14689926
> 
> 赞同：1
> 
> 时间：2013-02-04T15:29:25.210
> 
> 标签：python, caching, numpy, numexpr

Numexpr 是一个 python 模块，它允许 jitting 一些表达式来处理 numpy 数组。现在，如果它允许我这样做会很酷：

```
ne.evaluate( """
    r = y 
    cita = 2*pi*x/x_span
    nx = CENTER_X + cos( cita ) * r 
    ny = CENTER_Y + sin( cita ) * r
    """, local_dict={ 'x': xy_array[:,0],
                  'y': xy_array[:,1],
                  'x_span': x_span,
                  'y_span': y_span,
                  'pi': 3.141592,
                  'nx': nxy[:0],
                  'ny': nxy[:1],
                  'CENTER_X': ...,
                  'CENTER_Y': ...,            
                }, 
     ) 
```

我可以重新使用计算的值`cita`来计算`nx`和`ny`。另外，因为我必须检索一次 x 和 y 并且它们在内存中一个接一个，所以我也会减少缓存未命中；和 的书写也是`nx`如此`ny`。但是，据我了解，就目前而言，这种代码不可能使用 Numexpr。

所以，我的问题：

python + numpy 是否有更高级的东西可以做到这一点？（numexpr的一些超集）

或者，我错了，这可以简单地用 numpy 和 numexpr 来完成？

注意 1：我知道我可以在 C/C++/其他语言中以多种方式实现这个小功能，或者我可能不太关心性能，并且可以使用或不使用 numexpr 进行涉及 numpy 的 hack。

注意 2：我知道[weave](http://www.scipy.org/Weave)，但我把它放在“不酷、不维护的解决方案，这些解决方案会涉及弄乱 C”中。

# java - 玩！模板语法

> ID：14689927
> 
> 赞同：0
> 
> 时间：2013-02-04T15:29:26.767
> 
> 标签：java, playframework, playframework-1.x

我正在使用 Play Framework 1.2.5。有什么区别：

```
@{Application.render()} 
```

和

```
@Application.render() 
```

第一个最好用于表单动作，而第二个可用于锚模板。他们都将生成一个 URL，因此无法理解第一个我需要一个`{}`大括号。

请让我知道这件事。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:42:18.937

`@{}`是基于反向路由（Controller.method -> URL）生成相对 url 的捷径

`@@{}`为您提供绝对 URL

`#{}`参考标签。恰好有一个`#a`标签，你可以这样做

```
#{a @Application.logout()}Disconnect#{/a} 
```

因为在标签中，您实际上是在做时传递 ActionDefinition `@Application.logout()`，而不是 URL。

见[http://www.playframework.org/documentation/1.2.5/tags](http://www.playframework.org/documentation/1.2.5/tags)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:38:51.443

据我所知，在模板中使用它时需要花括号，例如： `<form action="@{Application.post}">`.

我只是尝试不使用花括号，结果是确切的字符串（@Application.render）而不是 URL。

我在模板中的代码：

```
@Application.index()<br />
@{Application.index()}<br /> 
```

在我的浏览器中生成以下 HTML：

```
@Application.index()<br />
/<br /> 
```

# powershell - Powershell v2.0 动态参数可以位于位置 0 吗？

> ID：14689931
> 
> 赞同：5
> 
> 时间：2013-02-04T15:29:39.433
> 
> 标签：powershell, dynamic, parameters, position

我找不到正在解决的这个特定问题，所以我会在这里问：我似乎无法将 dynamc 参数设为位置 0 参数。当我尝试时，似乎在位置 1 定义的第一个静态参数将提升或继承位置 0，然后在下一个可用位置（位置 1）添加为位置 0 定义的动态参数：

```
 $x=[string]::Empty;

    Function foo {
        [cmdletbinding()]
        Param (
            [Parameter(ParameterSetName="set1",
                       Position=1,
                       ValueFromPipeline=$true)]
                $InputObject,
            [Parameter()]
            [switch]
                $RequireFilePath
        )
        DynamicParam {
            $mand = $script:x -eq $null -or `
                $script:x -eq [string]::Empty -or `
                $RequireFilePath.IsPresent;

            $attrs = New-Object System.Management.Automation.ParameterAttribute;
            $attrs.ParameterSetName = "set1";
            $attrs.Mandatory = $mand;
            $attrs.Position = 0;

            $attrCollection = New-Object `
                System.Collections.ObjectModel.Collection[System.Attribute];
            $attrCollection.Add($attrs);

            $FilePath = New-Object System.Management.Automation.RuntimeDefinedParameter `
                "FilePath", string, $attrCollection;

            $paramDictionary = New-Object `
                System.Management.Automation.RuntimeDefinedParameterDictionary;
            $paramDictionary.Add("FilePath", $FilePath);

            $paramDictionary;
        }
        Begin {
            if ( $FilePath.Value -eq $null -or $FilePath.Value -eq [string]::Empty) {
                $FilePath.Value = $script:x;
            } else {
                $script:x = $FilePath.Value;
            }
            Write-Output ("(foo)        FilePath: {0}" -f $FilePath.Value);
            Write-Output ("(foo) RequireFilePath: {0}" -f $RequireFilePath.IsPresent);
            Write-Output ("(foo)        script:x: {0}" -f $script:x);
        }
        Process {
            Write-Output ("(foo)     InputObject: {0}" -f $InputObject);
        }
        End {
        }
    }

    foo "filename2.txt" "zxcv"; 
```

执行时，我得到这个：

```
 (foo)        FilePath: zxcv
    (foo) RequireFilePath: False
    (foo)        script:x: zxcv
    (foo)     InputObject: filename2.txt 
```

我想我的期望是动态参数将是位置 0，而静态参数将是位置 1。有人可以权衡一下吗？是否可以将动态参数定义为低于（早于）静态参数的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:55:03.153

在玩了一点之后，我发现将**ValueFromRemainingArguments**参数属性添加到 $InputObject 参数似乎最接近所需的行为；但是，我不完全确定为什么。

```
 Param (...
    [Parameter(ParameterSetName="set1",
               Position=1,
               ValueFromPipeline=$true
               ValueFromRemainingArguments=$true)]
        $InputObject,
    ...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-02T03:05:15.643

对我有用的另一种方法是将 CmdletBinding 属性的 PositionalBinding 参数设置为 $False。然后，如果只有动态参数设置了位置，那么它们会正确设置位置值。

这当然假设您不希望任何静态参数有一个位置。

# android - 如何在Android软键盘上捕捉“下一步”按钮

> ID：14689932
> 
> 赞同：6
> 
> 时间：2013-02-04T15:29:41.197
> 
> 标签：android, android-edittext

我有 6 个 Edittexts 分组在 6 个不同的布局中，都在同一个视图中。我的问题是我的应用程序被迫进入横向模式，并且通过按下“下一步”按钮，我想自动开始编辑另一个 editText，而不是默认情况下设置我的一个 android。示例：我在 EditText1 上写作，按下一步，焦点由位于第一个下方的 EditText 获取。我想编辑一个对它来说是正确的。

抱歉我的英语不好 :( 该设备是银河标签，带有 Google API8/Android 2.2 谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-04T15:49:58.140

没有测试过，但这应该可以

```
 some_edittext.setOnEditorActionListener(new OnEditorActionListener() {
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            if (actionId == EditorInfo.IME_ACTION_NEXT) {
                some_button.performClick();
                return true;
            }
            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:39:41.257

我可能是错的，但我认为没有任何隐含的方式可以做到这一点。您需要编写自己的`EditorAction`.

您需要监视用户输入的所有内容，并且每当他按下**'NEXT'**时，您必须使用[EditorInfo.IME_ACTION_NEXT](http://developer.android.com/reference/android/view/inputmethod/EditorInfo.html#IME_ACTION_NEXT)手动将焦点转移到下一个 EditText 。

# php - 替换字符串中的嵌套括号对

> ID：14689933
> 
> 赞同：2
> 
> 时间：2013-02-04T15:29:43.787
> 
> 标签：php, regex, recursion, replace, nested

在 PHP 中，我有一些字符串标签（伪代码）：

```
[TAG_A]              = X
[TAG_B]              = Y
[TAG_X]              = Z 
```

所以当我在字符串中替换这些标签时：

```
[TAG_A] and [TAG_B] are connected with [TAG_[TAG_A]] 
```

它应该输出：

```
X and Y are connected with Z 
```

问题在于嵌套标签。它需要递归，首先替换内部标签。所有可能的标签（及其值）都存储在一个大数组中。

我想要一种替换方法，它不仅使用蛮力通过`foreach`在标签数组上使用来替换所有标签，而且实际上只在字符串中搜索`[]`-pairs，然后在标签数组中查找值。

我认为，正则表达式不是正确的方法，但是做这样的事情最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:41:12.000

替换字符串中的标签，然后检查处理后是否出现新标签。再次运行代码，直到不再有要替换的标签。

```
$string = '[TAG_A] and [TAG_B] are connected with [TAG_[TAG_A]]';
$search = array(
    '[TAG_A]'   => 'X',
    '[TAG_B]'   => 'Y',
    '[TAG_X]'   => 'Z'
);
$continue = true;
while ($continue) {
    foreach ($search as $find => $replace) {
        $string = str_replace($find, $replace, $string);
    }
    $continue = false;
    foreach ($search as $find => $replace) {
        if (strpos($string, $find) !== false) {
            $continue = true;
            break;
        }
    }
}
echo $string; // prints "X and Y are connected with Z" 
```

正则表达式解决方案：

```
$string = '[TAG_A] and [TAG_B] are connected with [TAG_[TAG_A]]';
$search = array(
    'TAG_A' => 'X',
    'TAG_B' => 'Y',
    'TAG_X' => 'Z'
);
while(preg_match_all('/\[([^\[\]]*?)\]/e', $string, $matches)) {
    $string = preg_replace('/\[([^\[\]]*?)\]/e', '$search["$1"]', $string);
}
echo $string; 
```

# mongodb - 从没有锁的mongodb读取

> ID：14689934
> 
> 赞同：6
> 
> 时间：2013-02-04T15:29:46.037
> 
> 标签：mongodb

我们在工作中使用 MongoDB 2.2.0。数据库包含大约 51GB 的数据（目前），我想对我们迄今为止收集的用户数据进行一些分析。问题是，它是活机器，我们现在买不起另一个奴隶。我知道 MongoDB 有一个读锁，它可能会影响任何发生的写入，尤其是复杂查询时。有没有办法告诉 MongoDB 以最低优先级处理我的（特定）查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T20:55:41.103

在 MongoDB 中，读取和写入确实会相互影响。读锁是共享的，但读锁会阻止获取写锁，当然在持有写锁时不会发生其他读取或写入。MongoDB 操作会定期产生以防止其他等待锁的线程饿死。[您可以在此处](http://docs.mongodb.org/manual/faq/concurrency/#does-a-read-or-write-operation-ever-yield-the-lock)阅读有关详细信息的更多信息。

这对您的用例意味着什么？因为没有办法告诉 MongoDB 在没有读锁的情况下访问数据，也没有办法确定请求的优先级（至少目前还没有）读取是否显着影响写入性能取决于您有多少“净空”在写入活动进行时可用。

我可以提出的一个建议是，在弄清楚如何运行分析时，而不是扫描整个数据集（即对所有历史数据进行聚合查询）尝试在短时间片上运行较小的聚合查询。这将完成两件事：

1.  读取作业的寿命会更短，因此会更快完成，这将使您有机会评估查询对“实时”性能的影响。
2.  您不会一次将所有旧数据拉入 RAM - 通过随着时间的推移将这些分析查询间隔开，您将最大限度地减少它对当前写入性能的影响。

取决于您买不起另一台服务器的原因——您可能会考虑获得一个寿命短的 AWS 实例，它可能不是很强大，但可用于针对您的数据集副本运行长时间的分析查询。在制作数据副本时要小心 - 对生产系统进行完全同步会对其造成沉重的负担（更有效的方法是使用最近的备份/文件快照来恢复）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T15:39:08.520

这样的操作最好留给副本集的从属。一方面，可以共享读锁以允许一次多次读取，但写锁会阻止读取。而且，虽然您无法确定查询的优先级，但 mongodb 会产生长时间运行的读/写查询。[他们的并发文档](http://docs.mongodb.org/manual/faq/concurrency/#does-a-read-or-write-operation-ever-yield-the-lock)应该会有所帮助

如果你买不起另一台服务器，你可以在同一台机器上设置一个从属服务器，前提是你有一些空闲的 RAM/磁盘空间，并且你偶尔/偶尔使用从属服务器。但是你必须小心，你的磁盘 I/O 会显着增加。

# html - css 无法以正确的方式加载字体

> ID：14689937
> 
> 赞同：0
> 
> 时间：2013-02-04T15:30:00.560
> 
> 标签：html, css

我必须从文件夹将字体加载到 css 中，但它不起作用

html

是 ：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <style>
        @font-face { font-family: 'HelveticaWorld'; font-style: normal; font-weight: bold; src: URL("../Fonts/HelveticaWorld-Bold.ttf") format('ttf'); }
    </style>
</head>
<body>
            <div style="margin-bottom: 15px; font-weight: bold;font-family: HelveticaWorld"">Setup</div>

</body>
</html> 
```

**[下载物理 html 文件 (zip)](http://www8.zippyshare.com/v/99800201/file.html)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:32:12.850

查看 zip 文件，您的字体路径和格式错误。尝试：

```
@font-face { font-family: 'HelveticaWorld'; font-style: normal; font-weight: bold; src: URL("font/HelveticaWorld-Bold.ttf") format('truetype'); } 
```

# android - ProgressBar 未从 AsyncTask 更新

> ID：14689938
> 
> 赞同：3
> 
> 时间：2013-02-04T15:30:02.487
> 
> 标签：android, android-progressbar

我正在使用 ProgressBar 来尝试显示下载和保存文件的进度。ProgressBar 出现，但保持为 0，直到任务完成后关闭。我尝试了不同的方法，但它不会更新。代码有问题吗？

```
class downloadData extends AsyncTask<Void, Integer, Void>
{

    @Override
    protected void onPreExecute()
    {
        super.onPreExecute();
    }

    @Override
    protected Void doInBackground(Void... params)
    {
        int count; 
        try 
        {

            URL url = new URL("http://google.com");
            URLConnection conexion = url.openConnection();
            conexion.connect();
            int lenghtOfFile = conexion.getContentLength();
            InputStream is = url.openStream();
            File testDirectory = new File(MainActivity.this.getFilesDir(), "downloadedData.txt");
            if (!testDirectory.exists()) 
            {
                testDirectory.mkdir();
            }
            FileOutputStream fos = new FileOutputStream(testDirectory+"/downloadedData.txt");
            byte data[] = new byte[1024];
            long total = 0;
            while ((count = is.read(data)) != -1) 
            {
                total += count;

                int neki = (int)(((double)total/lenghtOfFile)*100);
                this.publishProgress(neki);

                fos.write(data, 0, count);
            }
            is.close();
            fos.close();
        } 
        catch (Exception e) 
        {
            Log.e("ERROR DOWNLOADING","Unable to download" + e.getMessage());
        }

        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values)
    {
        super.publishProgress(values);
        progressDialog.setProgress(values[0]);

    }

    @Override
    protected void onPostExecute(Void result)
    {
        super.onPostExecute(result);
        progressDialog.dismiss();
    }
} 
```

**创建**

```
 progressDialog = new ProgressDialog(this);
    progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    progressDialog.setCancelable(true);
    progressDialog.setMax(100);
    progressDialog.setMessage("Downloading Data"); 
```

当单击开始下载的按钮时：`progressDialog.show();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:33:49.173

尝试调试计算进度的位置。这可能是演员阵容问题，您可以尝试分两步进行，以避免在除法后得到 0。但是你应该再次使用这个进度值创建一个变量，在那里放置一个断点并查看转换问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:02:00.223

这可能听起来有点迟钝，但您是否`invalidate()`在设置进度后尝试过 ProgressBar？我不确定它会在您设置进度时自动执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:36:13.410

我不确定您的代码中可能存在什么问题，但是您可以尝试一下 **`progressDialog.incrementProgressBy(incrementValue);`**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-08T23:44:54.757

我也面临同样的问题并花了几个小时。问题在于进度值的计算。

```
 int neki = (int)(((double)total/lenghtOfFile)*100); 
```

相反，您应该分两步进行计算：

```
int neki = total * 100;
neki = (int)(neki/lengthOfFile);

publishProgress(neki); 
```

这解决了我的问题。希望这会有所帮助。

# java - 初学者Java变量类型

> ID：14689942
> 
> 赞同：0
> 
> 时间：2013-02-04T15:30:08.057
> 
> 标签：java, variables

这对你们中的许多人来说可能看起来很简单，但是......当我声明这样一个句子时：-

```
 Room room = findRoom(nbBeds, date_Entrance, date_Exit); 
```

房间里有什么？它是否保存 findroom 的输出？这个叫什么？我应该阅读什么来理解创建变量类型类的概念？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:31:36.803

你`findRoom(nbBeds, date_Entrance, date_Exit);`应该返回一个 type 的对象`Room`。

您`room`引用该对象。请注意，该对象可以为空。

如果您在问题中指的“输出”是控制台的输出（`System.out.print`例如）。输出与返回值无关。你可以输出任何东西，但你必须返回一个`Room`类型对象。否则，您会在该行出现编译错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:33:49.700

`findRoom(nbBeds, date_Entrance, date_Exit)`通过查看方法的返回类型应该已经清楚了

并且就您的代码显示而言，它似乎返回一个`Room`将分配给`room`

**编辑**：正如您在评论`findRoom`方法中发布的那样，定义为：

*   `private Room findRoom(.....){ .... }`

（之后你会看到这段`Room`代码`private`- 它表明`return`方法的类型将是`Room`类型

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T15:32:21.250

if`findRoom(nbBeds, date_Entrance, date_Exit)`返回一个`Room Object`then `room`（引用变量）只是保存 findroom 返回的 Object 的地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T15:35:19.277

变量 room 引用 Room 的一个实例（room 包含指向包含对象的堆内存的地址）。

# performance - 每次迭代中涉及 ODE 求解器的 Matlab 代码向量化

> ID：14689943
> 
> 赞同：0
> 
> 时间：2013-02-04T15:30:16.947
> 
> 标签：performance, optimization, vectorization, fast-enumeration, ode

我想编写一个快速的 MATLAB 代码，我需要编写一个 for 循环，并且每次都需要求解一个常微分方程。有没有办法对代码进行矢量化？以下是部分代码：

```
 tspan=0:0.01:20;
        dw=rand(p,1);
        M0=repmat([0 0 1],p,1)';
        for p=1:ns
       [t,M(:,:,p)]=ode45(@(t,M) testfun(t,M,dw(p)),tspan,M0(:,p));
       end 
```

在哪里

```
 function  dM=testfun(t,M,w1) 
      M_x=M(1);
      M_y=M(2);
       M_z=M(3);
      dM=[w1*M_y;-w1*M_x+w1*M_z-2*w1*M_y;-w1*M_y-(1-M_z)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:57:48.207

试试这个，让我知道它是如何工作的。

*   ODE 系统的右手边：

    ```
     function  dM = testfun(t,M,w1)

          dM = zeros(length(M), 1);

          M_x  =  M(1:3:end, 1);
          M_y  =  M(2:3:end, 1);
          M_z  =  M(3:3:end, 1);

         dM(1:3:end)  =              (w1.*M_y)';
         dM(2:3:end)  = (-w1.*M_x - 2*w1.*M_y + w1.*M_z)';
         dM(3:3:end)  =             (-w1.*M_y -  (1-M_z))';
       end 
    ```

*   主程序：

    `clear all`
    `clc`

    `ns = input('Please tell me how many time you need to integrate the ODE system: ');`

    `tspan = 0:0.01:20;`

    `dw = rand(ns,1);`

    `M0 = repmat([0; 0; 1], 1, ns);`

    `[t, my_M] = ode45(@(t,my_M) testfun(t,my_M,dw), tspan, M0);`

    `s = size(my_M);`

    `for i = 1:ns`

    ```
     M(:, 1:s(2)/ns, i) = my_M(:, s(2)/ns*(i-1)+1:s(2)/ns*i); 
    ```

    `end`

# c++ - O(logn) 中 O(logn) 删除和索引访问的数据结构

> ID：14689944
> 
> 赞同：0
> 
> 时间：2013-02-04T15:30:21.900
> 
> 标签：c++, data-structures

请推荐一个具有 O(logn) 删除的数据结构，我想要 O(1) 或 O(logn) 的数据结构中的元素索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:58:31.640

大多数自平衡有序二叉树可以修改以保持每个节点中的子节点数量，并且在每次操作的 lg(n) 时间内保持这一点非常容易。

他们显然每次操作修改的节点少于 lg(n) 个节点，并且根据我的经验，他们修改的节点通常是“垂直相关的”。它不是免费的，但它往往不会很贵。 ¹

一旦您在树的节点中获得了该数据，`n`就很容易找到第 th 个元素（如果`n`在左子树中大于 #，则从左子树中减去 #`n`并递归到右子树，否则递归到未更改的左子树`n`）。

这也适用于非二元自平衡树，例如 B 树。

据我所知，没有`std`容器支持随机对数删除、插入和索引操作。我往后找了一个。我还快速检查了 boost，甚至查看了多索引容器，但找不到让它工作的方法。

*脚注：*

¹当您修改一棵树时，您希望在该节点处获得节点的子节点数量的成本为 O(1)，您必须修改从更改到根的节点。每个修改节点最多有 lg(n) 个。但是，如果节点彼此“垂直相关”，则您需要修复的节点在每个节点更改时几乎都是相同的。

另一方面，假设您的树再平衡算法以某种方式设法修改了 lg(n) 完全不相关的节点，那么维持计数的成本将高达 lg(n)*lg(n)。

# javascript - Raphaël - transformPath() 返回直线而不是曲线

> ID：14689947
> 
> 赞同：4
> 
> 时间：2013-02-04T15:30:43.897
> 
> 标签：javascript, svg, raphael

是否可以让 Raphael.transformPath() 返回由线组成的路径而不是由曲线组成的路径？

```
 var path = "M10,20L30,40";
                var trans = "t100,100s2,2";
                var trpath = Raphael.transformPath(path, trans);
                console.log('trpath: ' + trpath); 
```

将输出：

```
trpath: M100,110C100,110,140,150,140,150 
```

我需要这条只有直线的路径！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T19:05:11.957

奇怪，不知道为什么拉斐尔选择这样做。但不是太难绕过：

如果您查阅.transformPath() 方法[的源代码](https://github.com/DmitryBaranovskiy/raphael/blob/master/raphael.core.js#L2168)，您会发现它是其他两种实用方法的组合：

```
transformPath = R.transformPath = function (path, transform) {
    return mapPath(path, toMatrix(path, transform));
} 
```

非常简单： .toMatrix() 将该转换字符串解析为矩阵，然后 mapPath 将该矩阵应用于路径字符串。

出于某种原因， mapPath 包含对[.path2curve() 方法](http://raphaeljs.com/reference.html#Raphael.path2curve)的调用，这就是您遇到问题的原因。所以我们需要[获取该方法的源代码](https://github.com/DmitryBaranovskiy/raphael/blob/master/raphael.core.js#L294)并对其进行修改：

```
var mapPathStraight = function (path, matrix) {
    if (!matrix) {
        return path;
    }
    var x, y, i, j, ii, jj, pathi;
    //replace following line with .parsePathString(), which also parses path string into an array without adding curves
    //path = path2curve(path);
    path = Raphael.parsePathString(path);
    for (i = 0, ii = path.length; i < ii; i++) {
        pathi = path[i];
        for (j = 1, jj = pathi.length; j < jj; j += 2) {
            x = matrix.x(pathi[j], pathi[j + 1]);
            y = matrix.y(pathi[j], pathi[j + 1]);
            pathi[j] = x;
            pathi[j + 1] = y;
        }
    }
    return path;
}; 
```

现在我们可以实现这样的直线：

```
var trpath = mapPathStraight(path, Raphael.toMatrix(path, trans)); 
```

这给了我一个输出：

```
trpath: M100,110L140,150 
```

这是[jsFiddle](http://jsfiddle.net/Pattj/1/)

# c# - Tiff 转换反转

> ID：14689948
> 
> 赞同：0
> 
> 时间：2013-02-04T15:30:44.480
> 
> 标签：c#, tiff

我正在将 8bpp tif 文件转换为 8bpp 灰度，但文件大小会变大。我引用了以下 url [wischik](http://www.wischik.com/lu/programmer/1bpp.html)，我尝试过 atalasoft，文件大小很好，但某些文件在 irfanview 中变为负数。

你们能告诉我解决上述两个问题（文件大小，否定）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:43:17.653

图像大小取决于许多因素，如 bpp、压缩、颜色..等 由于您​​有两个 tiff 8bpp 图像，我相信最重要的因素是压缩，因为两个图像都包含调色板。理想情况下，当使用相同的压缩时，两个图像的大小应该接近（需要内存），但彩色图像很可能会更小。我有一个名为leadtools 的sdk，我在开发中使用它，它给了我上面的结果。

还有一个小提示，也许如果您可以提供有关您面临问题的图像的样本，我们可以为您提供更多帮助。

# c - 使用 gdb 调试 c

> ID：14689950
> 
> 赞同：1
> 
> 时间：2013-02-04T15:30:57.890
> 
> 标签：c, gdb, protocol-buffers

我在终端中运行这个命令，

```
gcc -g -I/usr/include -g sample_client.c lsp.o lspmessage.pb-c.o -o sample_client -L/usr/lib -lprotobuf-c 
```

在我的文件目录中，我可以看到一个 sample_client 文件。它的属性是可执行的。但是，当我跑步时

```
(gdb) sample_client 
```

我懂了，

```
Undefined command: "sample_client". 
```

我该如何调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:32:21.557

```
$ **gdb ./sample_client**
(gdb) **run** 
```

要将命令行参数传递给您的程序，请使用`--args`：

```
$ **gdb --args ./sample_client arg1 arg2 arg3**
(gdb) **run** 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:32:58.297

当您启动 gdb 时，您需要告诉它要调试哪个二进制文件（可执行文件）：

```
$ gdb ./sample_client 
```

然后，要在 gdb 中运行程序，请使用以下[`run`命令](http://sourceware.org/gdb/current/onlinedocs/gdb/Starting.html#Starting)：

```
(gdb) run 
```

您可能应该给[精美的文档](http://sourceware.org/gdb/current/onlinedocs/gdb/)一些高质量的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:58:11.397

```
gdb <binary file here>
run < <flags here> 
```

此外，请参阅此快速参考以了解未来的操作： http: [//www.stanford.edu/class/cs107/other/gdbrefcard.pdf](http://www.stanford.edu/class/cs107/other/gdbrefcard.pdf)

# objective-c - dismissViewControllerAnimated 是否删除控制器的实例

> ID：14689951
> 
> 赞同：2
> 
> 时间：2013-02-04T15:31:03.817
> 
> 标签：objective-c, cocoa-touch, oop, instance, multiple-instances

对于我的应用程序，我想拥有同一个视图控制器的几个不同实例。现在，我只是创建一个这样的新实例：

```
iSafeViewController *tab = [[iSafeViewController alloc] init];

[tab setModalPresentationStyle:UIModalPresentationFullScreen];
[tab setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];

[self presentViewController:tab animated:YES completion:nil]; 
```

伟大的。而且由于无论如何这都是在 iSafeViewController 类中完成的，所以我有另一个按钮，当前只是关闭堆栈上的最新控制器。

```
 - (IBAction)closeTab:(id)sender {
    [self dismissViewControllerAnimated:YES completion:nil];
 } 
```

好的，但是，我真的希望能够回到这些实例。所以，我有两个问题。

1.  确实`dismissViewControllerAnimated`从内存中删除该控制器的实例。如果没有，有没有办法我可以重新呈现它。

2.  那么可能有更好的方法来浏览 viewController 实例`presentViewControllerAnimated`。至少，有没有更好的方法来创建一个视图控制器的新实例并能够导航到每个实例，希望不在堆栈中。换句话说，如果有三个 viewController 实例，有没有办法从第三个到主要的？

任何想法，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T16:44:51.640

“是否`dismissViewControllerAnimated`从内存中删除了该控制器的实例？如果没有，有没有办法我可以重新呈现它。”

调用`dismissViewControllerAnimated`不会显式地从内存中删除视图控制器，但如果代码的其他部分没有存储对视图控制器的强引用，一旦呈现的视图控制器关闭您的 VC，它可能会按照正常的内存管理系统被释放。

因此，如果您确保代码中的某些内容引用了您的视图控制器（除了以模态方式呈现它的 VC 之外），它在被解雇后不会消失，是的，这意味着您可以重新使用它。

**至于对视图控制器的“随机访问”：**您可以使用`UINavigationController`和使用诸如`popToViewController:animated:`和多次调用`pushViewController:animated:`（没有动画！）之类的方法来创建前往任意视图控制器的效果。**这感觉有点像 hack。**

或者，最好，您可以编写自己的**自定义容器视图控制器**。这是一个处理呈现其他视图控制器的视图控制器。请参阅[Apple 文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)。

这是一个很好的 WWDC 视频：[Implementing UIViewController Containment](https://developer.apple.com/videos/wwdc/2011/?id=102)

进一步阅读：

*   [容器视图控制器示例](https://stackoverflow.com/questions/7755498/container-view-controller-examples)

*   [http://subjective-objective-c.blogspot.co.uk/2011/08/writing-high-quality-view-controller.html](http://subjective-objective-c.blogspot.co.uk/2011/08/writing-high-quality-view-controller.html)

*   [自定义容器视图控制器](https://stackoverflow.com/questions/4268530/custom-container-view-controller)

# php - Memcache 和 Mysqli Prepared Statement 问题

> ID：14689956
> 
> 赞同：0
> 
> 时间：2013-02-04T15:31:12.530
> 
> 标签：php, mysqli, memcached

这一直让我发疯，问题是我无法解决如何获取和设置要在我的视图中显示的缓存数据。

```
public function get_something($id, $account_name)
{
    $sql = "SELECT one,two,three FROM table WHERE id = ? and account_name = ? ";
    $key = md5("SELECT one,two,three FROM table WHERE id = $id and account_name = $account_name ");

    $get_result = $this->Core->Core->Memcache->get($key);

    if($get_result)
    {
      // How would I set the Data
    }
    else
    {
     $stmt = $this->Core->Database->prepare($sql);
     $stmt->bind_param("is", $id, $account_name);
     $stmt->execute();
     $stmt->store_result();
     $stmt->bind_result($one, $two, $three);
     $stmt->fetch();
     //Below is how i set the data
     $this->Core->Template->set_data('one', $one);  
     //Set the Memcache
     $this->Core->Memcache->set($key, $stmt, TRUE, 20);
} 
```

所以我的问题是如何从 memcache 中的准备好的语句获取和设置数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:09:58.113

Memcache 是一个 key/value 存储系统，key 和 value 都需要序列化。从[php.net](http://php.net/manual/en/memcache.set.php)页面：

> 请记住，资源变量（即文件和连接描述符）不能存储在缓存中，因为它们不能在序列化状态下充分表示。

看来您的 sql 语句正在单行中查找三个值。我不是 mysqli 方面的专家，但这是您想要做的事情：

```
public function get_something($id, $account_name){
  $sql = "SELECT one,two,three FROM table WHERE id = ? and account_name = ? ";
  $key = md5("SELECT one,two,three FROM table WHERE id = $id and account_name = $account_name ");

  $get_result = $this->Core->Core->Memcache->get($key);

  if($get_result){
    return $get_result;//#1 just return it, the format is an array like what is being built below
  }
  else{
   $stmt = $this->Core->Database->prepare($sql);
   $stmt->bind_param("is", $id, $account_name);
   $stmt->execute();
   $stmt->store_result();
   $stmt->bind_result($one, $two, $three);
   $stmt->fetch();
   //Below is how i set the data
   $this->Core->Template->set_data('one', $one);//#2 I don't know what this line does or is for, presumably for something else besides memcache stuff, maybe it acts like return
   //Set the Memcache
   $array=array();//#3
   $array[]=$one;
   $array[]=$two;
   $array[]=$three;

   $this->Core->Memcache->set($key, $array, TRUE, 20);
   //this is a function, do you want to return your values somewhere?
 } 
```

一些注意事项，#1 你的问题的答案很简单，只需 return `$get_result`。它应该是一个包含三个值的数组。#2 我不熟悉这条线，也不熟悉它的作用。这是您将值“返回”给控制器的方式吗？ 如果是这样，你会想模仿我把#3放在`return`里面的那条线，这是你的问题。`if`您不能将`$stmt`变量保存在 memcache 中，它是一个 mysqli 对象，而不是您想要的数据。您需要构建一个数组，然后保存该数组。那应该为你做。

还有其他细微差别要做，您可以循环返回值。你应该检查 mysql 没有返回任何东西。但这是实现这一目标的基本起点。

让我知道这是否适合您。

# javascript - 在模式对话框中打开共享点列表项表单时访问被拒绝消息

> ID：14689957
> 
> 赞同：0
> 
> 时间：2013-02-04T15:31:13.187
> 
> 标签：javascript, sharepoint, infopath

我需要在模式对话框中显示一个 Infopath 新的 Sharepoint 列表项表单。我已经设法使用一些 javascript 和内容编辑器 Web 部件显示此表单，但是在用户单击“提交”后，页面上出现“访问被拒绝”错误，并且页面/模式对话框不会自动关闭。

编辑：（添加了javascript代码）

```
<script type="text/javascript">
var options = {
url: "http://myurl/NewForm.aspx",
        title: "New Event Log Entry",
        allowMaximize: true,
        showClose: true,
        width: 825,
        height: 525,
        dialogReturnValueCallback: silentCallback};
function open() {SP.UI.ModalDialog.showModalDialog(options);}
function silentCallback(dialogResult, returnValue) {
}
function refreshCallback(dialogResult, returnValue) {
    SP.UI.Notify.addNotification('Operation Successful!');
    SP.UI.ModalDialog.RefreshPage(SP.UI.DialogResult.OK);
}</script>

<a href="javascript:open()"><img width="16" height="16" class="ms-asset-icon ms-rtePosition-4" src="/SiteAssets/Event%20Reporting.png" alt="" style="width: 40px; height: 40px"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:20:12.457

您是否仔细检查了权限？根据您的问题不确定您已经完成了什么样的问题解决步骤，但通常每当我收到“拒绝访问”错误时，它与权限有关。

也许用户没有编辑列表的权限。

# python - 多种类型的字符串检查

> ID：14689959
> 
> 赞同：0
> 
> 时间：2013-02-04T15:31:14.263
> 
> 标签：python

我有一个包含字符串的变量（从 XML 提要中提取）。字符串值可以是整数、日期或字符串类型。我需要将它从字符串转换为给定的数据类型。我正在这样做，但它有点难看，所以我问是否有更好的技术。如果我要检查更多类型，我将以非常嵌套的 try 结束 - 除了块。

```
def normalize_availability(self, value):
    """
    Normalize the availability date.
    """
    try:
        val = int(value)
    except ValueError:
        try:
            val = datetime.datetime.strptime(value, '%Y-%m-%d')
        except (ValueError, TypeError):
            # Here could be another try - except block if more types needed
            val = value 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T15:53:17.057

使用方便的辅助函数。

```
def tryconvert(value, default, *types):
    """Converts value to one of the given types.  The first type that succeeds is
       used, so the types should be specified from most-picky to least-picky (e.g.
       int before float).  The default is returned if all types fail to convert
       the value.  The types needn't actually be types (any callable that takes a
       single argument and returns a value will work)."""
    value = value.strip()
    for t in types:
        try:
            return t(value)
        except (ValueError, TypeError):
            pass
    return default 
```

然后编写一个解析日期/时间的函数：

```
def parsedatetime(value, format="%Y-%m-%d")
    return datetime.datetime.striptime(value, format) 
```

现在把它们放在一起：

```
value = tryconvert(value, None, parsedatetime, int) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:42:38.043

正确的方法是从 xml 中知道每个应该是什么类型。这将防止碰巧是数字字符串的事物最终成为 int 等。但假设这是不可能的。

对于 int 类型我更喜欢

```
if value.isdigit():
    val = int(value) 
```

对于日期，我能想到的唯一其他方法是将其拆分并查看各个部分，这会更混乱，然后让 strptime 引发异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:49:16.707

```
def normalize_availability(value):
    """
    Normalize the availability date.
    """
    val = value
    try:
        val = datetime.datetime.strptime(value, '%Y-%m-%d')
    except (ValueError):
        if value.strip(" -+").isdigit():
            val = int(value)

    return val 
```

# php - openssl_csr_sign return false 无法获取证书

> ID：14689968
> 
> 赞同：3
> 
> 时间：2013-02-04T15:31:42.297
> 
> 标签：php, openssl, certificate, sign

因此，我尝试使用 PHP 和 Openssl 创建自己的 CA（证书颁发机构）。我尝试创建用户 CSR 并对其进行签名。

```
function addcsr(){
    $dn = array(
        "countryName" => $_POST['CountryName'],
        "stateOrProvinceName" => $_POST['StateOrProvince'],
        "localityName" => $_POST['LocalityName'],
        "organizationName" => $_POST['OrganizationalName'],
        "organizationalUnitName" => $_POST['OrganizationalUnitName'],
        "commonName" => $_POST['CommonName'],
        "emailAddress" => $_POST['EmailAddress']
    );

    $configArgs = array(
        'private_key_bits' => 2048
    );
    $key = openssl_pkey_new($configArgs);

    openssl_pkey_export($key, $privkey);

    $pubkey = openssl_pkey_get_details($key);
    $pubkey = $pubkey["key"];

    $csr = openssl_csr_new($dn, $privkey);
    openssl_csr_export($csr, $csrstring);

    $cacert = "file://ca.pem";
    $privkeyca = array("file://ca.key", "daniel123");

    $usercert = openssl_csr_sign($csrstring, $cacert, $privkeyca, 365);

    // test
    $this->load->view('create_view', $data); 
```

在 openssl_csr_sign($csrstring, $cacert, $privkeyca, 365) 之前，Everyting 工作得非常好。$usercert 返回 false 并出现错误：

> 消息：openssl_csr_sign() [function.openssl-csr-sign]: cannot get cert from parameter 2

我试图改变：

> authorityKeyIdentifier=keyid:always,issuer:always 改成 authorityKeyIdentifier=issuer:always 不好，还是一样的错误。

我还尝试了 $cacert 和 $privkeyca 的所有可能性，但仍然错误:(

或者也许我必须更改我的 openssl.cnf 文件中的某些内容？这是我的 openssl.cnf 文件（我只是复制并粘贴它）：

```
#
# OpenSSL example configuration file.
# This is mostly being used for generation of certificate requests.
#

# This definition stops the following lines choking if HOME isn't
# defined.
HOME            = .
RANDFILE        = $ENV::HOME/.rnd

# Extra OBJECT IDENTIFIER info:
#oid_file       = $ENV::HOME/.oid
oid_section     = new_oids

# To use this configuration file with the "-extfile" option of the
# "openssl x509" utility, name here the section containing the
# X.509v3 extensions to use:
# extensions        = 
# (Alternatively, use a configuration file that has only
# X.509v3 extensions in its main [= default] section.)

[ new_oids ]

# We can add new OIDs in here for use by 'ca' and 'req'.
# Add a simple OID like this:
# testoid1=1.2.3.4
# Or use config file substitution like this:
# testoid2=${testoid1}.5.6

####################################################################
[ ca ]
default_ca  = CA_default        # The default ca section

####################################################################
[ CA_default ]

dir                 = ./demoCA                  # Where everything is kept
certs               = $dir/certs                # Where the issued certs are kept
crl_dir             = $dir/crl                  # Where the issued crl are kept
database            = $dir/index.txt            # database index file.
#unique_subject     = no                        # Set to 'no' to allow creation of
                                                # several ctificates with same subject.
new_certs_dir       = $dir/newcerts             # default place for new certs.

certificate         = $dir/cacert.pem           # The CA certificate
serial              = $dir/serial               # The current serial number
crlnumber           = $dir/crlnumber            # the current crl number
                                                # must be commented out to leave a V1 CRL
crl                 = $dir/crl.pem              # The current CRL
private_key         = $dir/private/cakey.pem    # The private key
RANDFILE            = $dir/private/.rand        # private random number file

x509_extensions     = usr_cert                  # The extentions to add to the cert

# Comment out the following two lines for the "traditional"
# (and highly broken) format.
name_opt            = ca_default                # Subject Name options
cert_opt            = ca_default                # Certificate field options

# Extension copying option: use with caution.
# copy_extensions   = copy

# Extensions to add to a CRL. Note: Netscape communicator chokes on V2 CRLs
# so this is commented out by default to leave a V1 CRL.
# crlnumber must also be commented out to leave a V1 CRL.
# crl_extensions    = crl_ext

default_days        = 365                       # how long to certify for
default_crl_days= 30                            # how long before next CRL
default_md  = sha1                              # which md to use.
preserve    = no                                # keep passed DN ordering

# A few difference way of specifying how similar the request should look
# For type CA, the listed attributes must be the same, and the optional
# and supplied fields are just that :-)
policy      = policy_match

# For the CA policy
[ policy_match ]
countryName     = match
stateOrProvinceName = match
organizationName    = match
organizationalUnitName  = optional
commonName      = supplied
emailAddress        = optional

# For the 'anything' policy
# At this point in time, you must list all acceptable 'object'
# types.
[ policy_anything ]
countryName     = optional
stateOrProvinceName = optional
localityName        = optional
organizationName    = optional
organizationalUnitName  = optional
commonName      = supplied
emailAddress        = optional

####################################################################
[ req ]
default_bits        = 2048
default_keyfile     = privkey.pem
distinguished_name  = req_distinguished_name
attributes      = req_attributes
x509_extensions = v3_ca # The extentions to add to the self signed cert

# Passwords for private keys if not present they will be prompted for
# input_password = secret
# output_password = secret

# This sets a mask for permitted string types. There are several options. 
# default: PrintableString, T61String, BMPString.
# pkix   : PrintableString, BMPString.
# utf8only: only UTF8Strings.
# nombstr : PrintableString, T61String (no BMPStrings or UTF8Strings).
# MASK:XXXX a literal mask value.
# WARNING: current versions of Netscape crash on BMPStrings or UTF8Strings
# so use this option with caution!
string_mask = nombstr

# req_extensions = v3_req # The extensions to add to a certificate request

[ req_distinguished_name ]
countryName         = Country Name (2 letter code)
countryName_default     = AU
countryName_min         = 2
countryName_max         = 2

stateOrProvinceName     = State or Province Name (full name)
stateOrProvinceName_default = Some-State

localityName            = Locality Name (eg, city)

0.organizationName      = Organization Name (eg, company)
0.organizationName_default  = Internet Widgits Pty Ltd

# we can do this but it is not needed normally :-)
#1.organizationName     = Second Organization Name (eg, company)
#1.organizationName_default = World Wide Web Pty Ltd

organizationalUnitName      = Organizational Unit Name (eg, section)
#organizationalUnitName_default =

commonName          = Common Name (eg, YOUR name)
commonName_max          = 64

emailAddress            = Email Address
emailAddress_max        = 64

# SET-ex3           = SET extension number 3

[ req_attributes ]
challengePassword       = A challenge password
challengePassword_min       = 4
challengePassword_max       = 20

unstructuredName        = An optional company name

[ usr_cert ]

# These extensions are added when 'ca' signs a request.

# This goes against PKIX guidelines but some CAs do it and some software
# requires this to avoid interpreting an end user certificate as a CA.

basicConstraints=CA:FALSE

# Here are some examples of the usage of nsCertType. If it is omitted
# the certificate can be used for anything *except* object signing.

# This is OK for an SSL server.
# nsCertType            = server

# For an object signing certificate this would be used.
# nsCertType = objsign

# For normal client use this is typical
# nsCertType = client, email

# and for everything including object signing:
# nsCertType = client, email, objsign

# This is typical in keyUsage for a client certificate.
# keyUsage = nonRepudiation, digitalSignature, keyEncipherment

# This will be displayed in Netscape's comment listbox.
nsComment           = "OpenSSL Generated Certificate"

# PKIX recommendations harmless if included in all certificates.
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid,issuer

# This stuff is for subjectAltName and issuerAltname.
# Import the email address.
# subjectAltName=email:copy
# An alternative to produce certificates that aren't
# deprecated according to PKIX.
# subjectAltName=email:move

# Copy subject details
# issuerAltName=issuer:copy

#nsCaRevocationUrl      = http://www.domain.dom/ca-crl.pem
#nsBaseUrl
#nsRevocationUrl
#nsRenewalUrl
#nsCaPolicyUrl
#nsSslServerName

[ v3_req ]

# Extensions to add to a certificate request

basicConstraints = CA:FALSE
keyUsage = nonRepudiation, digitalSignature, keyEncipherment

[ v3_ca ]

# Extensions for a typical CA

# PKIX recommendation.

subjectKeyIdentifier=hash

authorityKeyIdentifier=keyid:always,issuer:always

# This is what PKIX recommends but some broken software chokes on critical
# extensions.
#basicConstraints = critical,CA:true
# So we do this instead.
basicConstraints = CA:true

# Key usage: this is typical for a CA certificate. However since it will
# prevent it being used as an test self-signed certificate it is best
# left out by default.
# keyUsage = cRLSign, keyCertSign

# Some might want this also
# nsCertType = sslCA, emailCA

# Include email address in subject alt name: another PKIX recommendation
# subjectAltName=email:copy
# Copy issuer details
# issuerAltName=issuer:copy

# DER hex encoding of an extension: beware experts only!
# obj=DER:02:03
# Where 'obj' is a standard or added object
# You can even override a supported extension:
# basicConstraints= critical, DER:30:03:01:01:FF

[ crl_ext ]

# CRL extensions.
# Only issuerAltName and authorityKeyIdentifier make any sense in a CRL.

# issuerAltName=issuer:copy
authorityKeyIdentifier=keyid:always,issuer:always

[ proxy_cert_ext ]
# These extensions should be added when creating a proxy certificate

# This goes against PKIX guidelines but some CAs do it and some software
# requires this to avoid interpreting an end user certificate as a CA.

basicConstraints=CA:FALSE

# Here are some examples of the usage of nsCertType. If it is omitted
# the certificate can be used for anything *except* object signing.

# This is OK for an SSL server.
# nsCertType            = server

# For an object signing certificate this would be used.
# nsCertType = objsign

# For normal client use this is typical
# nsCertType = client, email

# and for everything including object signing:
# nsCertType = client, email, objsign

# This is typical in keyUsage for a client certificate.
# keyUsage = nonRepudiation, digitalSignature, keyEncipherment

# This will be displayed in Netscape's comment listbox.
nsComment           = "OpenSSL Generated Certificate"

# PKIX recommendations harmless if included in all certificates.
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid,issuer:always

# This stuff is for subjectAltName and issuerAltname.
# Import the email address.
# subjectAltName=email:copy
# An alternative to produce certificates that aren't
# deprecated according to PKIX.
# subjectAltName=email:move

# Copy subject details
# issuerAltName=issuer:copy

#nsCaRevocationUrl      = http://www.domain.dom/ca-crl.pem
#nsBaseUrl
#nsRevocationUrl
#nsRenewalUrl
#nsCaPolicyUrl
#nsSslServerName

# This really needs to be in place for it to be a proxy certificate.
proxyCertInfo=critical,language:id-ppl-anyLanguage,pathlen:3,policy:foo 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-08T12:06:54.077

这是一个常见的误解：`file://`代表资源或文件内容。因此，摆脱错误消息的最简单方法`openssl_csr_sign() [function.openssl-csr-sign]: cannot get cert from parameter 2`（这意味着带有证书的文件路径不够好`openssl_csr_sign(args)`）是：

```
$cacert = file_get_contents("/path_to_file/ca.pem");
$privkeyca = array(file_get_contents("/path_to_file/ca.key"), "daniel123"); 
```

# api - 当我以编程方式更新/添加内容时，内容编辑器未在 Sitecore 中更新

> ID：14689970
> 
> 赞同：3
> 
> 时间：2013-02-04T15:31:46.830
> 
> 标签：api, editor, sitecore

我正在以编程方式在主数据库中添加/编辑内容，并且我知道它可以正确保存，因为如果我运行另一个“应用程序”，我可以看到我创建/更新的内容。但是我在内容编辑器中看不到内容。但是，如果我转到与我创建/编辑的内容相关联的“模板”，并进行细微更改，然后保存它。我收到了我希望看到的消息“正在更新内容”……（它正在将模板更改应用于内容）。然后我可以看到我创建/编辑的内容......所以看起来需要触发一些东西来修改模板触发我不是。有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:29:11.803

感谢所有的投入。问题是缓存没有被清除。折叠/展开树不起作用。我真的必须清除缓存并且它起作用了。谢谢你们。希望如果其他人有这个问题，我的回答可以帮助他们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:16:34.777

内容树不会在内容结构的外部更改后自动更新（例如，另一个用户在您正在查看的节点下添加/删除某些内容）。如果您折叠并展开以编程方式创建内容的父节点，则应该足以显示新创建的内容。

# python - 按线条图案分组线条

> ID：14689974
> 
> 赞同：1
> 
> 时间：2013-02-04T15:31:54.953
> 
> 标签：python

我有一个文件，其行如下所示：

```
saldkfjaslk
    asdlkfja
    alsdkfjlk
aslkda;kdfsdlkfaj
sladkfjalskdfjlaskd
    sldkfaj
    lsadkfj
qwewrewst
se0polkjlkj
lpoerlwoej
    alskdjf
    asldkfjljlkjlk
sadlkfa 
```

我想将以字符（不是空格）开头的行与以空格开头的后续行组合在一起。我还想省略下一行不以空格开头的行。使用上述示例的所需输出如下所示：

```
[('saldkfjaslk', 'asdlkfja', 'alsdkfjlk'),
 ('sladkfjalskdfjlaskd', 'sldkfaj', 'lsadkfj'),
 ('lpoerlwoej', 'alskdjf', 'asldkfjljlkjlk')] 
```

如何在 Python 中解析这个文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T15:37:34.750

```
>>> regex = re.compile(r"^\S.*(?:\n\s.*)+", re.MULTILINE)
>>> [tuple(match.split()) for match in regex.findall(s)]
[('saldkfjaslk', 'asdlkfja', 'alsdkfjlk'), 
 ('sladkfjalskdfjlaskd', 'sldkfaj', 'lsadkfj'), 
 ('lpoerlwoej', 'alskdjf', 'asldkfjljlkjlk')] 
```

**解释：**

```
^    # Start of line
\S   # Match a non-whitespace character
.*   # Match the rest of the line
(?:  # Match...
 \n  #  a newline character
 \s  #  a whitespace character
 .*  #  and the rest of the line
)+   # once or more 
```

# mysql - mysql中的高级选择查询

> ID：14689975
> 
> 赞同：1
> 
> 时间：2013-02-04T15:31:55.213
> 
> 标签：mysql, sql

我有一个名为“连接”的表，其中包含以下字段：

```
entry_id
user_id
connector_id
cat_id 
```

让我们放一些行

```
 | entry_id | user_id | connector_id |cat_id        |
    |:---------|---------|:------------:|:------------:|
    | 1        |       11|     33       | 1
    | 2        |       13|     11       | 2
    | 3        |        9|     11       | 4
    | 4        |       11|     33       | 6
    | 5        |       33|     11       | 11
    | 6        |        9|     11       | 8 
```

**伪代码** （使用 id = 11 和 oid = 9 之间的连接）

```
Select cat_id FROM connections c
if cat_id is between 1 and 5 
   where c.connector_id = id OR c.user_id = id
   AND  c.connector_id = oid OR c.user_id = oid
else if cat_id is greater than 5
   where oid = user_id and id = connector_id 
```

**用英语;**
如果 cat_id 在 1 和 5 之间，它应该从 oid 和 id 都在 connector_id 或 user_id 中的地方选择 cat_ids，只要它们在一个或另一个中，不管是哪个顺序，但如果 cat_id 大于5，它应该只选择cat_ids，其中oid是user_id，id是connector_id。

结果（对于 id = 11 和 oid = 9 之间的连接）

```
 | cat_id     | 
    |:-----------|
    | 4          |        
    | 8          | 
```

再举一个例子：
结果（用于 id = 33 和 oid = 11 之间的连接）

```
 | cat_id     | 
   |:-----------|
   | 1          |        
   | 6          | 
```

请询问它们是否是不清楚的部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:54:53.143

您应该能够通过逻辑地遵循 if 语句来完成此操作。就像是：

```
Select cat_id FROM connections c
where 
(id between 1 and 5 AND (c.connector_id = id OR c.user_id = id)
   AND  (c.connector_id = oid OR c.user_id = oid)) 
OR id > 5 AND (oid = user_id and id = connector_id) 
```

注意：同意一些评论 - 确保这是您需要做的。我对您如何从伪代码中获得逻辑做了一些假设，这些可能是错误的 - 所以请在复制和粘贴之前考虑一下。这特别适用于您在 where 子句中构建 OR / AND 的方式。

# ruby - 对数组进行 Mongoid 排序，忽略 sunday(0)

> ID：14689976
> 
> 赞同：0
> 
> 时间：2013-02-04T15:31:55.877
> 
> 标签：ruby, mongoid

我将天数 0-6 存储在文档的数组中。

我希望文件始终按正确的顺序排列，但星期天（0）会造成麻烦，因为它会在星期一（1）之前。我怎样才能以另一种方式进行此订购？

```
default_scope asc(:days) 
```

**更新：**

因此，在尝试实现自定义序列化时，我遇到了一个问题：

```
class Schedule
  include Mongoid::Document
  field :days, type: Days  
  default_scope order_by([[:days, :asc]])
end  

class Days
  include Mongoid::Fields::Serializable

  # Convert Ruby wday format, sunday(0) - saturday(6).
  def deserialize(days)
    days.map { |day| (day + 1)%7 }
  end

  # Convert to MongoDB friendly format, monday(0) - sunday(6).
  def serialize(days)
    days.map { |day| (day + 6)%7 }
  end
end 
```

到目前为止一切顺利，自定义字段序列化按预期工作：

```
s2 = Schedule.create(days: [0])
s.days 
# Deserialized value => [0]
s.read_attribute :days
# Stored value => [6] 
```

但是，Mongoid 似乎对反序列化的对象进行排序？

```
s2 = Schedule.create(days: [1,2,3,4,5])
s2.days
# Deserialized value => [1, 2, 3, 4, 5]
s2.read_attribute :days
# Stored value => [0, 1, 2, 3, 4] 

Schedule.all
# Sorted as => [s1, s2]
# Expected sort order => [s2, s1] 
```

通过删除反序列化进行确认，这将以正确的顺序返回文档。可能值得注意的是，这是一个嵌入式文档，我猜可能排序是以不同的方式完成的。

**更新 2：** 我最终创建了第二个字段 sortable_days，我使用了序列化程序，但没有使用反序列化程序，然后改为在该字段上进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:51:28.100

MongoDB 仅允许对字段进行排序以获取正向/反向值。通过使用 0 表示星期日，没有办法保留 1-6 的顺序，而是将 0 放在末尾。在 Postgres 或其他 SQL 服务器中，您可以使用自定义排序函数来实现这一点，但在 MongoDB 中没有类似物。

您需要为此更改值编码。您可以创建该值的非规范化版本，该版本具有该字段的转换 (0 => 7) 值，并对该字段进行排序。

# xaml - 如何在 C# WinRT 项目中使用 Common/StandardStyles？

> ID：14689985
> 
> 赞同：1
> 
> 时间：2013-02-04T15:32:23.183
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml, windows-store-apps

我正在用 C# 开发一个 WinRT 项目

我想使用类似的东西：`{StaticResource EditAppBarButtonStyle}` 这是在`Common/StandardStyles.xaml`

但是当我尝试编译我的项目时，我得到了资源无法解析的错误。我想我需要添加`Common/StandardStyles.xaml`但我不知道如何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:37:55.363

`<!-- ... -->`解决方案：我只需要删除`Common/StandardStyles.xaml`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-05T04:51:07.160

几年太晚了，但可能对从 bing 搜索中偶然发现这个问题的其他人有所帮助：对于 Windows 8.1 应用程序，这不再是你的做法了。

由于大多数人从未使用过 StandardStyles.xaml 中的大多数样式，因此出于性能原因删除了此文件。在 Windows 8.1 中，您可以使用 AppBarButton

```
<AppBarButton Icon="Edit" Label="Edit" /> 
```

从[这篇博文中获取的信息就在这里](http://timheuer.com/blog/archive/2013/10/29/remove-standardstyles-xaml-from-windows-8-1-winrt-projects.aspx)

# jquery - 在 Fancy Box 中，我想在缩略图下添加标签

> ID：14689991
> 
> 赞同：0
> 
> 时间：2013-02-04T15:32:45.493
> 
> 标签：jquery, html

我想在缩略图下添加标签，但对于我的生活，我似乎无法弄清楚。

```
<div class="sixteen columns">
<h3>Wood veneer finishes:</h3>
<p class="crumbs"></p>
    <div class="sixteen columns">
         <a class="fancybox-effects-c" href="woodveneers/VBO_Biscotti.jpg" data-fancybox-group="woodveneers" title="VBO Biscotti"><img src="woodveneers/VBO_Biscotti.jpg" alt="VBO Biscotti" width="72" height="72"/><p></p></a><a class="fancybox-effects-c" href="woodveneers/VBO_Biscotti.jpg" data-fancybox-group="woodveneers" title="VBO Biscotti">VBO Biscotti</a>
     </div>
</div> 
```

如果我添加另一个图像/缩略图，它会将其放置在原始图像下方而不是它旁边......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:40:33.057

你试过这样

```
<a class="fancybox-effects-c" href="woodveneers/VBO_Biscotti.jpg" data-fancybox-group="woodveneers" title="VBO Biscotti">
<img src="woodveneers/VBO_Biscotti.jpg" alt="VBO Biscotti" width="72" height="72"/><br/>
VBO Biscotti 
```

# android - 在 Android 中选择图库图片导致问题

> ID：14689992
> 
> 赞同：3
> 
> 时间：2013-02-04T15:32:47.417
> 
> 标签：android, imageview, android-gallery

我正在使用一个非常简单的代码从图库中选择图像，它可以在我的手机上使用。但在三到四部手机（Galaxy S3、平板电脑等）上测试它不起作用。

工作环境：如果我拍摄的图像大小或在画廊中低于 500kb，那么它可以工作

环境它不起作用：如果我拍摄的图像大小或在画廊中超过 500kb，那么它可以工作

```
ImageView myimg;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Toast.makeText(this, UUID.randomUUID().toString(),
        // Toast.LENGTH_LONG).show();

        myimg = (ImageView) findViewById(R.id.imageView1);

        mybutton = (Button) findViewById(R.id.myButton);
        mybutton.setOnClickListener(this);

    }

    public void onClick(View v) {

        if (v == mybutton) {

            Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
            intent.setType("image/*");
            startActivityForResult(intent, 0);

        }

    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode,
            Intent imageReturnedIntent) {
        switch (requestCode) {
        case 0:
            if (resultCode == RESULT_OK) {
                Uri selectedImage = imageReturnedIntent.getData();
                String[] filePathColumn = { MediaStore.Images.Media.DATA };

                Cursor cursor = getContentResolver().query(selectedImage,
                        filePathColumn, null, null, null);
                cursor.moveToFirst();

                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String filePath = cursor.getString(columnIndex); // file path of
                                                                    // selected
                                                                    // image
                cursor.close();
                // Convert file path into bitmap image using below line.
                Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);

                // put bitmapimage in your imageview
                myimg.setImageBitmap(yourSelectedImage);
            }
        }

    } 
```

任何人都对如何处理这种情况有所了解？

任何帮助，将不胜感激。

# enthought - EDP 7.3.2 Mac Osx 10.8.2 的编辑器

> ID：14689993
> 
> 赞同：-1
> 
> 时间：2013-02-04T15:32:49.907
> 
> 标签：enthought

我对 python 很陌生，并且已经安装了 EPD 7.3.2 学术包。

我无法在包中包含的库中找到 mac osx 10.8.2 的编辑器。

该软件包的唯一编辑器部分是 scite，但这仅适用于 Linux 和 Windows。Mac 版本仅可通过 mac 应用商店以 42 美元的价格购买。

因此，我想知道如何让编辑器与 EPD 包一起运行？安装后是否有特定的编辑器可以直接识别？或者哪个编辑器与包兼容。

希望一切安好，

卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:43:53.247

试试Textmate。这对 Python 和许多其他语言来说非常有用。

它现在是开源的，你可以在这里得到它：[https ://github.com/textmate/textmate](https://github.com/textmate/textmate)

还有一个预构建的二进制文件：[https ://api.textmate.org/downloads/beta](https://api.textmate.org/downloads/beta)

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:55:12.833

我为 Enthought 工作，我们有一个处于测试阶段的下一代 EPD 版本。它包括一个以 Python 为中心的文本编辑器、集成的 IPython 提示、包管理和许多其他典型功能。该应用程序专注于编写代码以支持其工作的科学家和工程师的需求，而不是全职软件开发团队的需求。也就是说，其目的是保持轻量级和易于使用，重点是数据分析和可视化，而不是与 Eclipse 或 Visual Studio 等工具竞争。

如果有兴趣，您可以通过单击此页面右侧的“EPD Reloaded”图形请求访问测试程序：[http](http://www.enthought.com/products/epd.php) ://www.enthought.com/products/epd.php 。测试版目前支持 Mac OS 和 Windows。

问候，杰森

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:45:06.920

这里列出了很多 Mac OSX 的免费编辑器：[http ://wiki.python.org/moin/PythonEditors](http://wiki.python.org/moin/PythonEditors)

我使用过 Editra ( [http://editra.org/](http://editra.org/) )，没有任何抱怨。我从未尝试过它的 PyStudio 插件，但它看起来很有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T17:29:38.357

可以试试 Enthought 的新 Canopy 产品，它嵌入了 IDE。CanopyExpress 版本不需要许可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T12:47:28.790

您还应该了解 Spyder，它有一个可用的 Mac 版本。Spyder 是一个科学的 Python 编辑器，它提供了一个类似于 Matlab 的环境。另一个科学的 Python 发行版 Python(x,y) 使用 Spyder。我认为让 Mac 上的 Spyder 与 EPD 一起工作可能很棘手，但可能值得。它没有专业的 Enthought 支持，但它有一个很棒的社区。

我对 python 也有些陌生，我仍在寻找最适合我的方法。Enthought 正在构建一个编辑器我并不感到惊讶，因为这是他们尚未提供的主要功能之一——我真的很期待看到它与 Spyder 的比较。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-06T00:39:11.110

我使用[Sublime Text和](http://www.sublimetext.com)[BBEdit](http://www.barebones.com/products/bbedit/)取得了巨大成功。我不确定，但我认为您也可以使用 BBEdit 的免费 TextWrangler。

我已经使用 Beta Jason 指出了一些东西（虽然 - 我似乎无法在当前的学术发行版中找到它，但也许我只是看起来不够努力）。一旦部署，它将非常酷。

# c - 从 PCM 中删除频道

> ID：14689998
> 
> 赞同：2
> 
> 时间：2013-02-04T15:33:03.610
> 
> 标签：c, audio, pcm

我已经扩展了“libtinyalsa”（ALSA 的一个非常小的版本），其中包含一种重新采样输入和输出 PCM 音频的方法（使用 libresample，例如从 48 kHz 到 44.1 kHz）。

现在我想用“downMixing”（这是正确的词吗？）方法来扩展它。

我有 5.1 声道 PCM，只需要 2 声道立体声音频（左和右）：

*   “downMixing”是正确的词吗？
*   我怎么能在 C 中做到这一点？

我对 C 和 PCM 没有真正的了解 - 非常欢迎简单的答案。

提前致以诚挚的问候和感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:21:38.940

我相信将 5.1 PCM 流缩混为立体声可以这样完成：

```
L = clamp((FL + RL + C*0.708 + LFE*0.708) / 2) 
R = clamp((FR + RR + C*0.708 + LFE*0.708) / 2) 
```

例如，您可以参考[Android 中的缩混效果](https://www.codeaurora.org/gitweb/quic/la/?p=platform/frameworks/av.git;a=blob;f=media/libeffects/downmix/EffectDownmix.c;h=5bf052aeee3025e2d3f86a2da7ad711499702ab8;hb=refs/heads/jb_mr1_rb1.8)作为示例。

或者只选择您将保留的两个通道（例如 FL 和 FR）并跳过来自其他通道的样本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:58:29.303

5.1 PCM 可能已经以这样的方式编码，它可以有效地混合到 2 个通道。如果是这种情况，您应该可以忽略 5.1 通道并将其视为两个通道。如果是这种情况，但您需要摆脱 5.1 PCM 的所有痕迹，而不仅仅是让它在 2 通道输出上正确播放，您需要首先使用 5.1 通道解码器库。

如果你真的有一个真正的 5.1 声道编码输出，那么你会得到它：

```
for(i = 0; i < buffer_end; i += 6) {
    front_left = buffer[i + 0];
    front_right = buffer[i + 1];
    center = buffer[i + 2];
    lfe = buffer[i + 3]; // (sub-woofer)
    back_left = buffer[i + 4];
    back_right = buffer[i + 5];
} 
```

那么混音将是：

```
left = (front_left + back_left)/2 + (lfe + front_center)/4;
right = (front_right + back_right)/2 + (lfe + front_center)/4; 
```

这将以相同的方式交错，即

```
output_buffer[i] = left;
output_buffer[i + 1] = right; 
```

请注意，根据您想要的结果和您的限制，有不同的方法可以进行混音。但那是一整罐蠕虫。

您还应该问问自己，您是否真的在使用正确的工具来完成这项工作。存在做所有这些事情的库，而 ALSA 本身已经能够进行相当复杂的混音。有关其他一些解决方案，请参见此处：[http ://www.halfgaar.net/surround-sound-in-linux](http://www.halfgaar.net/surround-sound-in-linux)