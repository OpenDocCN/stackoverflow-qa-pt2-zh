# StackOverflow 问答 13868000-13868999

# asp.net-mvc - 在 asp.net mvc 中创建可重用的表单联系人组件

> ID：13868002
> 
> 赞同：0
> 
> 时间：2012-12-13T20:32:43.823
> 
> 标签：asp.net-mvc

我是 asp.net mvc 的新手，我正在尝试为 asp.net mvc 开发一个可重复使用的联系表单组件。

我试图用表单创建一个 PartialView，我不知道这是否是更好的方法，用于创建一个可重用的组件

我的部分视图是

```
@model MyModel.ContactData

@using (Html.BeginForm("ContactForm", "ContactForm", FormMethod.Post)) {
<fieldset>
    <p>
        @Html.LabelFor(model => model.MailAddress)
        @Html.EditorFor(model => model.MailAddress)
    </p>
    <p>
        @Html.LabelFor(model => model.Message)
        @Html.TextAreaFor(model => model.Message)
    </p>
    <input type="submit" value="Save" />
</fieldset> 
```

}

问题从控制器开始，控制器是仅针对此部分视图的特定控制器。

```
public class ContactFormController : Controller
{
    [HttpPost]
    public ActionResult ContactForm(ContactData contactData)
    {
        if (ModelState.IsValid)
        {
            return PartialView("MessageSend");
        }

        return PartialView();
    }
} 
```

我的问题是如果某些必填字段为空，在这种情况下，控制器仅返回部分视图，而不是在其父上下文中返回部分视图。我尝试将父视图中的 PartialView 调用为 @Html.Partial、@Html.RenderAction、@Html.RenderPartial，同样的情况也会发生。

如何在其父上下文中返回部分视图？我曾尝试使用返回视图（ParentViewsName，contactData），但我不喜欢它，因为在提交表单时，它会将地址栏上的 URL 从 /Contact 更改为 /ContactForm/ContactForm。

也许我试图用错误的方法创建一个可重用的组件？最好只用 ajax 更新 PartialView？备择方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:50:13.413

据我了解，您希望在用户成功提交表单后显示状态消息，这是部分视图。我认为 tempdata 将适合这种情况。

```
public class ContactFormController : Controller
{
    [HttpPost]
    public ActionResult ContactForm(ContactData contactData)
    {
        if (ModelState.IsValid)
        {
            TempData["success"] = true;             
            return RedirectToAction("parentpage");
        } 

        return View(contactData);
    }
} 
```

在父页面中，检查 TempData["success"] 是否为空，并显示部分视图“MessageSend”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:17:00.860

最后，正如 Sundeep 解释的那样，我已经使用 ajax 完成了此操作，例如[Partial ASP.NET MVC View submit](https://stackoverflow.com/questions/4050596/partial-asp-net-mvc-view-submit)。

谢谢你的帮助。

# python - 使用 jQuery mobile 在 Flask 中调用重定向（url_for（'xxx'））后浏览器中的 URL 未更新

> ID：13868007
> 
> 赞同：9
> 
> 时间：2012-12-13T20:33:25.397
> 
> 标签：python, jquery-mobile, flask, flask-login

我有一个使用 Flask 的非常简单的 python 程序，如下所示。它通过弹出和注销处理登录。问题是浏览器中的 url 没有被 redirect(url_for()) 调用更新。

```
@app.route('/')
def index():
    if not 'username' in session:
        # contains a button showing a login popup form with action set to '/login'
        return render_template('welcome.html')
    else:
        # contains a logout button with a href to '/logout'
        return render_template('webapp.html') 

@app.route('/login', methods=['POST'])
def login():
    session['username'] = request.form['username']
    return redirect(url_for('index'))

@app.route('/logout')
def logout():
    session.pop('username', None)
    return redirect(url_for('index')) 
```

访问“/”时会显示欢迎页面。当我单击该按钮时，会显示登录弹出窗口，并且其表单操作会重定向到“/login”。这有效，并且 login() 函数被调用并执行。重定向也是如此，但浏览器不会更新显示的 url。

所以 webapp 页面显示为 /logon url。当我单击重新加载时，我收到一个错误，因为它尝试重新加载 /logon，而它应该重新加载已重定向的“/”。

/logout 也是如此。当显示 webapp 页面并单击注销按钮时，将加载 /logout 页面，该页面执行 logout() 函数并重定向到 index.html。但是该网址留待注销。

如果我然后重新加载页面，它会成功，因为 /logout 接受 GET 方法，然后 url 更新为 / ，因为它应该首先出现。

我的印象是这是一个 jQuery 移动问题，但无法找出问题所在。从 python 和 Flask 的角度来看，它与我能找到的所有登录示例匹配。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T20:45:48.963

写完问题后终于解决了。

该问题是由 jQuery mobile 和缺少 data-url 属性引起的。

通过在页面 div 中添加 data-url 属性，浏览器中的 url 会更新并且一切正常。

```
<div data-role="page" id="welcome" data-url="{{ url_for('index') }}"> 
```

# eventbrite - 通过重定向 URL 将 Eventbrite 与会者参数传递到自定义订单确认页面

> ID：13868008
> 
> 赞同：5
> 
> 时间：2012-12-13T20:33:29.707
> 
> 标签：eventbrite

有没有办法在 Eventbrite 订单确认工作流程中为重定向 URL 提供参数？

我想将与会者 ID/订单 ID（或逗号分隔的 ID）作为参数转发到我的自定义页面，以便我可以执行查找并显示与该与会者相关的自定义信息。使用静态重定向 URL，每个人都会看到相同的“订单确认页面”，没有个性化设置。

我要做的是为每个与会者生成一个行程。当他们购买机票时，他们会被问到一系列问题，这些问题决定了他们的行程将是什么样子。一旦他们完成订单，我想将他们发送到他们的个性化行程页面（例如`http://custom.com/.../<attendee_id>`），然后他们可以在他们的移动设备上添加书签。

如果这不可能，我唯一的其他选择是将他们重定向到他们必须手动输入订单号或条形码编号的页面。出于多种原因，这不是最优雅的选择。

请指教！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T20:40:40.730

如果您在订单确认 URL 中的任何位置包含“$event_id”或“$order_id”，那么这些值将自动为您交换。

# c# - 带子项的 XML 序列化

> ID：13868016
> 
> 赞同：-1
> 
> 时间：2012-12-13T20:34:07.303
> 
> 标签：c#, xml-serialization

我正在尝试序列化从某些库代码派生的一些对象，并且我试图弄清楚如何在不接触库的情况下完成此操作（这不是由我管理的）。

这是基本场景，替换了对象。Basket 和fruit 都是图书馆类，所有的basket 都有一系列的水果。

```
class MyBasket : Basket
{
    public MyBasket () : base () { ... }
}

class Apple : Fruit
{
    public Apple () : base () { ... }
} 
```

MyBasket 会自行序列化，但是当我添加一个 Apple 并尝试序列化时，我收到以下错误：

```
There was an error generating the XML document.
The type Fruit[] may not be used in this context. 
```

我有时还会看到告诉我在 Fruit 类上使用 XMLInclude 的错误，但我不能这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:50:52.433

如果您无法触摸库并且未正确设置库类以进行序列化 - 那么我认为您不会在当前限制下完成您想要的。您要么需要：

1.  修改库类
2.  创建您自己的类来镜像库的类但正确实现序列化（然后从库类复制到您自己的类并序列化）

# html - 水平滚动响应式导航菜单

> ID：13868018
> 
> 赞同：4
> 
> 时间：2012-12-13T20:34:12.837
> 
> 标签：html, css, mobile, menu, nav

我正在尝试复制谷歌移动网站的一部分。

[http://www.imgur.com/9DdQz.png](http://www.imgur.com/9DdQz.png)

他们网站底部附近的区域有他们的“地点”菜单，您可以在其中使用手指水平滚动浏览不同的选项，然后点击您想要的图标。

我想复制的功能是水平滚动，同时将页面设置为特定宽度，这样窗口就不会只是重新调整大小，从而否定滚动功能。

我尝试使用适用于 Chrome 的 Android 远程调试工具获取用于创建此代码的代码副本，但我找不到该网站这一部分的特定代码，我认为它必须通过单独的 .js 加载文件。我也做了足够多的谷歌搜索，尝试另一个搜索字符串的前景与将我的头撞到砖墙上试图重新装修我的工作场所一样。简而言之，我迷路了，超出了我的深度，正在寻求帮助。任何指针或帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T20:43:24.307

```
<div id="scrollcontainer" >
    <div id="scrollplane" >
         <a class="nav" href="?">Link 1</a>
         <a class="nav" href="?">Link 2</a>
         <a class="nav" href="?">Link 3</a>
    </div>
    </div> 
```

CSS：

```
#scrollcontainer {
        width: 100%;
        overflow-x: auto; 
        overflow-y: hidden;
        height: // some height
}

#scrollplane { 
 height: // less than scroll container ;
 width: // greater than scroll container; 
```

}

然后我会建议你的链接在滚动平面上相对定位。这应该在移动浏览器上实现所需的效果，但会在桌面上显示滚动条

# android - Android RatingBar 右对齐

> ID：13868027
> 
> 赞同：-1
> 
> 时间：2012-12-13T20:34:41.720
> 
> 标签：android, android-ui

我有一个自定义评分栏，我在其中编辑了本教程（[http://kozyr.zydako.net/2010/05/23/pretty-ratingbar/](http://kozyr.zydako.net/2010/05/23/pretty-ratingbar/)）

我只想显示完整的 cookie 而不是空的，因此我只用透明图像替换了 empty-cookie.png。

我的问题是，在我的 UI 中，我希望我的可见 cookie 右对齐，换句话说，从右到左而不是当前从左到右显示。

我怎样才能做到这一点？我不需要显示半个 cookie，这仅用作指示符 ( `android:isIndicator="true"`)

替代的非评级栏解决方案也受到欢迎。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:16:53.780

我通过设置存储在数组中的多个 ImageView 的可见性并最终使用 RelativeLayout 显示来解决这个问题。

```
private void setClocksVisible(int numClocks) {
    if(numClocks == 0 || numClocks == -1) {
        for(int i=0; i< holder.ratingClocks.length; i++) {
            holder.ratingClocks[i].setVisibility(View.INVISIBLE);
        }
    } else {
        for(int i=0; i<numClocks; i++) {
            holder.ratingClocks[i].setVisibility(View.VISIBLE);
        }
    }
} 
```

# c# - 为什么这段代码没有收到来自外部命令的完整输出？

> ID：13868029
> 
> 赞同：1
> 
> 时间：2012-12-13T20:34:51.280
> 
> 标签：c#, cmd, processstartinfo

我正在开发一种能够在特定驱动器上找到 PST 的工具。此代码采用项目路径只是因为它用于测试目的。

我的问题是，当我尝试在外部命令处理器中获取 shell 命令的执行输出时，我只得到了前 2 行：

```
Process p = new Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = true;
p.StartInfo.FileName = "cmd.exe";
p.StartInfo.Arguments = "/C dir /s *.pst";
p.Start();
string output = p.StandardOutput.ReadToEnd();
MessageBox.Show(output);
p.WaitForExit(); 
```

我的结果：

> 驱动器 D 中的卷是数据卷序列号是 7C64-9650

预期结果：

> 驱动器 D 中的卷是数据卷序列号是 7C64-9650
> 
> D:\PATH 目录 13/12/2012 01:49 PM 1,014,047,744 Archives.pst 4 文件 1,355,919,360 字节

没有可用的错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:39:35.270

也许[另一种给猫剥皮的方法](http://msdn.microsoft.com/en-us/library/8ta62wh3.aspx)会更容易？您当前的代码不值得麻烦。

```
// .Net 2.0
string[] psts = Directory.GetFiles(".", "*.pst", SearchOption.AllDirectories);

// .Net 4.0+
var psts = Directory.EnumerateFiles(".", "*.pst", SearchOption.AllDirectories); 
```

像这样使用：

```
MessageBox.Show(String.Join(", ", psts)); 
```

# c# - EntityFramework 将新对象添加到嵌套对象集合

> ID：13868030
> 
> 赞同：2
> 
> 时间：2012-12-13T20:34:57.207
> 
> 标签：c#, entity-framework

这个问题是以下问题的延续：

[EntityFramework 将新对象添加到集合中](https://stackoverflow.com/q/13867609/1268570)

现在我明白了，使用`DbSet`EF 时不会将整个集合加载到内存中

但是，如果我有类似以下代码的内容怎么办：

```
public class User
{
    public int UserID { get; set; }
    public string UserName { get; set; }
    public ICollection<Role> Roles { get; set; }
}

public class Role
{
    public int RoleID { get; set; }
    public string RoleName { get; set; }
    public User User { get; set; }
}

public class MyContext : DbContext
{
    public DbSet<User> Users { get; set; }
    public DbSet<Role> Roles { get; set; }
}

public class SomeClass
{
    public void AssignRoleToUser(int userID, Role role)
    {
        var ctx = new MyContext();
        var user = ctx.Users.First(x => x.UserID.Equals(userID));

        user.Roles.Add(role);

        ctx.SaveChanges();
    }
} 
```

在这种情况下，我没有使用`DbSet`对象向*角色*`ICollection`集合添加新对象，而是使用集合向特定用户添加新角色

那么在这种情况下会发生什么？

EntityFramewrk 是否必须将所有用户角色加载到内存中才能执行插入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:47:04.050

在上面提供的代码中，您没有添加新角色，因为您的 ctx.Users 仅用于检索数据。[这篇 SE 文章Linq To Entities-how to filter on child entity](https://stackoverflow.com/q/4720573/1437962)解决了一些类似的问题。

我建议您查看这篇简短而有用的文章 - [Entity Framework 4.0 FAQ – Getting Started Guide](http://www.dotnetcurry.com/ShowArticle.aspx?ID=599)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T04:28:40.617

不需要。EF 不需要知道用户拥有什么“角色”。您需要了解变更跟踪会发生什么：

1.  运行查询后，更改跟踪器会收到“用户”的对象条目。此用户的状态为“未更改”

2.  您将新角色添加到用户的角色集合。这只是为这个新角色添加了一个更改跟踪器条目并将其标记为“已添加”

3.  在 SaveChanges() 上，EF 将查看您的更改跟踪器并查看用户对象没有更改，因此无需在此处进行任何操作。新角色还有一个条目，指出需要添加它。因此将编写一个 SQL 查询来插入此角色。

就那么简单。您始终可以调试并添加监视更改跟踪器的状态。可以通过调用 DbContext.ChangeTracker.Entries() 找到这些条目。

EF 会盲目地将“添加”发送到数据库。

# css - li:after auto size & :after 在 :after 元素上？

> ID：13868033
> 
> 赞同：0
> 
> 时间：2012-12-13T20:35:04.510
> 
> 标签：css

我有一些 CSS 问题。

1.  我有一个`li`具有一定宽度的元素。我还想要一个`:after` 元素`li`并将其用作工具提示。是否可以给工具提示一个自动宽度并将其居中`li`？
2.  如果我在`li:after`元素中有工具提示，我仍然需要一个小三角箭头，因此我需要在`:after` 元素上应用一个`:after`元素。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:49:31.867

如果顺序是三角形，后跟工具提示文本，则可以通过使用 :before 和 :after 来实现（如评论中所建议的那样）。下面的例子，也可以在 dabblet 上找到，应该给你一个想法。
[http://dabblet.com/gist/4280779](http://dabblet.com/gist/4280779)

HTML：

```
<ul>
 <li>first - no tooltip</li>
 <li data-tooltip="Tooltip second">Second</li>
 <li data-tooltip="Tooltip third">third</li>
</li> 
```

CSS：

```
li {
  color: #900;
}

li:hover {
  color: red;
  position: relative;
}

li[data-tooltip]:hover:after {
  content: attr(data-tooltip);
  padding: 4px 6px 4px 20px;
  color: yellow;
  position: absolute;
  left: 0; 
  top: -150%;
  white-space: nowrap; 
  z-index: 20;
  border-radius: 5px; 
  box-shadow: 0px 0px 2px #333;  
  background-color: black; 
 }

 li[data-tooltip]:hover:before {
  content: "\0394";
  padding-left: 3px;
  position: absolute;
  left: 0px; 
  top: -150%;
  color: yellow;
  z-index: 21;  
 } 
```

您可以通过将背景颜色替换为背景图像/渐变等来使工具提示看起来不错。

# regex - 如何删除R中字符串中的正则表达式？

> ID：13868035
> 
> 赞同：4
> 
> 时间：2012-12-13T20:35:17.663
> 
> 标签：regex, string, r

字符串是`"\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tLocation\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tSan Francisco, CA;Oakland, CA"`，我希望它显示为`"Location","San Francisco, CA;Oakland, CA"`.

有这个功能吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T20:44:29.470

您可以使用正则表达式来删除特殊字符：

```
x <-"\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tLocation\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tSan Francisco, CA;Oakland, CA"

gsub('[\r\n\t]', '', x) 
```

但是，如果你真的有一个包含所有这些`\`的字符串，那么答案就会变得更像：

```
gsub('\\\\[a-z]', '', x) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T20:50:27.067

目前尚不清楚您是否希望将字符串的两个部分分开。如果你这样做了，你可以使用：

```
test <- c("\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tLocation\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tSan Francisco, CA;Oakland, CA")
result <- unlist(strsplit(test,"\\r|\\n|\\t"))
result <- result[result!=""]
result
[1] "Location"                      "San Francisco, CA;Oakland, CA" 
```

# javascript - jQuery自动刷新div故障

> ID：13868037
> 
> 赞同：0
> 
> 时间：2012-12-13T20:35:21.090
> 
> 标签：javascript, jquery, load, refresh

有谁知道我做错了什么？

基本上，我将内容（图像）加载到 div 标签中，然后每 x 秒刷新一次。所以这就是我想出的，它工作得很好，直到它淡出它手动刷新的文件。

当前流程如下所示：

加载...淡出，淡入然后消失并在几秒钟后重新出现。

应该发生的情况如下：

加载......淡出，淡入......淡出，淡入......（你明白了，循环）

编码：

```
$(document).ready(function () {
     $("#webcam").load("image.html").fadeIn("slow");
   var refreshId = setInterval(function() {
      $("#webcam_img").fadeOut("slow");
      $("#webcam").load('image.html');
      $("#webcam_img").fadeIn("slow");
   }, 5000);
}); 
```

在线文件可以在这里找到：[http ://colourednoise.co.uk/scripts/webcam.htm](http://colourednoise.co.uk/scripts/webcam.htm)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:40:05.657

尝试将您的淡入淡出移动到淡出的回调函数中，以便它先等到淡出完成

```
 $("#webcam_img").fadeOut("slow",function(){
      $("#webcam").load('image.html');
      $("#webcam_img").fadeIn("slow");   
   }); 
```

这是完整的例子

```
$(document).ready(function () {
   $("#webcam").load("image.html").fadeIn("slow");
   var refreshId = setInterval(function() {
      $("#webcam_img").fadeOut("slow",function(){ // <-- added callback function
         $("#webcam").load('image.html'); // now this
         $("#webcam_img").fadeIn("slow"); // and this waits for fadeOut to complete first  
      });
   }, 5000);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T20:54:44.307

`load`是异步的。您正在调用`fadeIn`一个元素，然后将其替换为`load`. 您需要`fadeIn`在回调内`load`确保元素存在。

```
$("#webcam").load('image.html', function(){
    $("#webcam_img").fadeIn("slow");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T22:10:41.123

这是一种稍微不同的方法，可确保在下一次刷新排队之前完全加载每个图像：

```
$(document).ready(function () {
    $("#webcam").load("image.html").fadeIn("slow", function () { setTimeout(refreshImage, 5000) });

    function refreshImage() {
        $("#webcam_img").fadeOut("slow",function(){
            $("#webcam").load('image.html');
            $("#webcam_img").fadeIn("slow", function() { setTimeout(appendDateToBody, 5000) });
        });
    }
}); 
```

# performance - three.js 中的 setTexture 性能问题

> ID：13868038
> 
> 赞同：0
> 
> 时间：2012-12-13T20:35:24.430
> 
> 标签：performance, three.js, freeze, particles

当我更改网格的纹理时，在某些计算机上，应用程序会冻结半秒钟。我在 100 个不同的网格上这样做。在 Chrome 分析器上，我看到 Three.js 方法`setTexture`在 CPU 使用率之上。

我用来应用下一个纹理的方法是最简单的：

```
this.materials.map = this.nextTexture; 
```

这是有效的，但我不知道如何优化它。如果改用粒子系统，会有所改善吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:56:44.097

你真的使用了 100 种不同的纹理吗？

尝试根据纹理对对象进行排序，以最大程度地减少纹理交换。

纹理更改是更昂贵的 GPU 操作之一。

# c++ - C++ 在一个参数中传递多个参数

> ID：13868039
> 
> 赞同：1
> 
> 时间：2012-12-13T20:35:25.957
> 
> 标签：c++, function, arguments, c-preprocessor

这可能听起来令人困惑，但是如何在一个 ARGUMENT 中传递 MULTIPLE ARGUMENTS。

我尝试过的是以下内容：

```
#define CALL(v, look, param, expect) v(param){look(expect);} 
```

使用时的示例（不起作用）：

```
void CALL(InitD3D, engine->InitD3D, (HWND hWnd, bool windowed), (hWnd, windowed))

// Which should give(i want it to):
// void InitD3D(HWND hWnd, bool windowed){engine->InitD3D(hWnd, windowed);}
// But it may give: InitD3D((HWND hWnd, bool windowed)){engine->InitD3D((hWnd, windowed));}
// Or something similar or not... 
```

基本单词也是如此，我怎样才能在一个参数中传递多个参数，而不会搞砸......

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:46:33.973

```
#define CALL(v, look, param, expect) v param {look expect;}

namespace foo {
  void bob(int x, int y) {}
}
CALL(void bob, foo::bob, (int x, int y), (x,y))

int main() {
  bob(7,2);
} 
```

我建议不要使用这种技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:53:46.617

传递多个参数的最简单方法是使用结构。

例子：

```
typedef struct{
    int arg1;
    std::string arg2;
    int arg3;
} fn_args;

void bob( fn_args a )
{
   //access them using a.arg1, a.arg2, etc.
} 
```

编辑：你提到了 VA_ARGS。当您要传递的参数数量是可变的时使用它。您通常可以解决大多数问题而无需使用 VA_ARGS。

您可能想要查看的另一种技术称为[Named Parameter Idiom](http://www.parashift.com/c++-faq/named-parameter-idiom.html)，它更多的是不关心函数参数传入的顺序。由于它不完全清楚您在这里尝试做什么，我给了你一个几种可能的方法。

# javascript - 仅在字符串中显示唯一字符一次

> ID：13868043
> 
> 赞同：10
> 
> 时间：2012-12-13T20:35:44.683
> 
> 标签：javascript, string, character, unique

我有一个带有重复字母的字符串。我希望多次重复的字母只显示一次。例如，我有一个字符串`aaabbbccc`，我希望结果为`abc`. 到目前为止，我的功能是这样的：

*   如果字母不重复，则不显示
*   如果重复一次，则只显示一次（即 aa 显示 a）
*   如果重复两次，则显示全部（即 aaa 显示 aaa）
*   如果重复 3 次，则显示 6（如果 aaaa，则显示 aaaaaa）

```
function unique_char(string) {
    var unique = '';
    var count = 0;
    for (var i = 0; i < string.length; i++) {
        for (var j = i+1; j < string.length; j++) {
            if (string[i] == string[j]) {
                count++;
                unique += string[i];
            }
        }
    }
    return unique;
}

document.write(unique_char('aaabbbccc')); 
```

该函数必须在循环内带有循环；这就是为什么第二个`for`在第一个里面。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2016-06-20T21:51:14.143

用字符填充 a`Set`并连接其唯一条目：

```
function makeUnique(str) {
  return String.prototype.concat(...new Set(str))
}

console.log(makeUnique('abc'));    // "abc"
console.log(makeUnique('abcabc')); // "abc"
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-03-01T20:09:35.120

首先将其转换为数组，然后在[此处](https://stackoverflow.com/a/23282057)使用答案，然后重新加入，如下所示：

```
var nonUnique = "ababdefegg";
var unique = nonUnique.split('').filter(function(item, i, ar){ return ar.indexOf(item) === i; }).join(''); 
```

一站式服务:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-27T12:38:54.840

可能为时已晚，但我对这篇文章的回答仍然是我的版本：

```
function extractUniqCharacters(str){
    var temp = {};
    for(var oindex=0;oindex<str.length;oindex++){
        temp[str.charAt(oindex)] = 0; //Assign any value
    }
    return Object.keys(temp).join("");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-13T22:20:57.963

您可以将[正则表达式](http://www.regular-expressions.info/)与[自定义替换函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)一起使用：

```
function unique_char(string) {
    return string.replace(/(.)\1*/g, function(sequence, char) {
         if (sequence.length == 1) // if the letter doesn't repeat
             return ""; // its not shown
         if (sequence.length == 2) // if its repeated once
             return char; // its show only once (if aa shows a)
         if (sequence.length == 3) // if its repeated twice
             return sequence; // shows all(if aaa shows aaa)
         if (sequence.length == 4) // if its repeated 3 times
             return Array(7).join(char); // it shows 6( if aaaa shows aaaaaa)
         // else ???
         return sequence;
    });
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-14T15:07:30.670

使用[lodash](https://lodash.com/docs/4.17.0#uniq)：

```
_.uniq('aaabbbccc').join(''); // gives 'abc' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-13T20:52:12.573

根据实际问题：“如果字母不重复，则未显示”

```
function unique_char(str)
{
    var obj = new Object();

    for (var i = 0; i < str.length; i++)
    {
        var chr = str[i];
        if (chr in obj)
        {
            obj[chr] += 1;
        }
        else
        {
            obj[chr] = 1;
        }
    }

    var multiples = [];
    for (key in obj)
    {
        // Remove this test if you just want unique chars
        // But still keep the multiples.push(key)
        if (obj[key] > 1)
        {
            multiples.push(key);
        }
    }

    return multiples.join("");
}

var str = "aaabbbccc";
document.write(unique_char(str)); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-13T20:59:04.957

您的问题是`unique`每次在`string`. 真的，您可能应该这样做（因为您指定答案必须是嵌套的 for 循环）：

```
function unique_char(string){

    var str_length=string.length;
    var unique='';

    for(var i=0; i<str_length; i++){

        var foundIt = false;
        for(var j=0; j<unique.length; j++){

            if(string[i]==unique[j]){

                foundIt = true;
                break;
            }

        }

        if(!foundIt){
            unique+=string[i];
        }

    }

   return unique;
}

document.write( unique_char('aaabbbccc')) 
```

在这里，我们只添加找到的字符`string`，`unique`如果它不存在的话。这根本不是一种有效的方法......但根据您的要求，它应该可以工作。

我无法运行它，因为我没有任何方便的东西可以在其中运行 JavaScript……但是这种方法中的理论应该有效。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-07-01T00:01:20.447

**这是最简单的功能**

```
 function remove(text) 
    {
      var unique= "";
      for(var i = 0; i < text.length; i++)
      {
        if(unique.indexOf(text.charAt(i)) < 0) 
        {
          unique += text.charAt(i);
        }
      }
      return unique;
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-17T21:08:31.967

如果重复字符必须显示一次，请尝试此操作，即对于 i/p:aaabbbccc o/p:abc

```
var str="aaabbbccc";
Array.prototype.map.call(str, 
  (obj,i)=>{
    if(str.indexOf(obj,i+1)==-1 ){
     return obj;
    }
  }
).join("");
//output: "abc" 
```

如果只需要显示唯一字符（字符串轰炸算法），请尝试此操作，添加另一个“and”条件以删除多次出现的字符并仅显示唯一字符，即对于 i/p: aabbbkaha o/p: kh

```
var str="aabbbkaha";
Array.prototype.map.call(str, 
 (obj,i)=>{
   if(str.indexOf(obj,i+1)==-1 && str.lastIndexOf(obj,i-1)==-1){ // another and condition
     return obj;
   }
 }
).join("");
//output: "kh" 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-06-23T17:37:19.990

```
<script>
    uniqueString = "";

    alert("Displays the number of a specific character in user entered string and then finds the number of unique characters:");

    function countChar(testString, lookFor) {
        var charCounter = 0;
        document.write("Looking at this string:<br>");

        for (pos = 0; pos < testString.length; pos++) {
            if (testString.charAt(pos) == lookFor) {
                charCounter += 1;
                document.write("<B>" + lookFor + "</B>");
            } else
                document.write(testString.charAt(pos));
        }
        document.write("<br><br>");
        return charCounter;
    }

    function findNumberOfUniqueChar(testString) {
        var numChar = 0,
            uniqueChar = 0;
        for (pos = 0; pos < testString.length; pos++) {
            var newLookFor = "";
            for (pos2 = 0; pos2 <= pos; pos2++) {
                if (testString.charAt(pos) == testString.charAt(pos2)) {
                    numChar += 1;
                }
            }
            if (numChar == 1) {
                uniqueChar += 1;
                uniqueString = uniqueString + " " + testString.charAt(pos)
            }
            numChar = 0;
        }
        return uniqueChar;
    }

    var testString = prompt("Give me a string of characters to check", "");
    var lookFor = "startvalue";
    while (lookFor.length > 1) {
        if (lookFor != "startvalue")
            alert("Please select only one character");
        lookFor = prompt(testString + "\n\nWhat should character should I look for?", "");
    }
    document.write("I found " + countChar(testString, lookFor) + " of the<b> " + lookFor + "</B> character");
    document.write("<br><br>I counted the following " + findNumberOfUniqueChar(testString) + " unique character(s):");
    document.write("<br>" + uniqueString)
</script>
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-10-20T15:01:40.200

```
const countUnique = (s1, s2) => new Set(s1 + s2).size 
```

基于@le_m 答案的更短方式

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-07T07:19:52.197

如果要在数组中返回值，可以使用下面的函数。

```
 const getUniqueChar=(str)=>str.split('').filter((item, index, arr)=> 
    arr.slice(index+1).indexOf(item)===-1);

    console.log(getUniqueChar("aaabbbccc")); 
```

或者

您可以使用 Set 构造函数

```
 cosnt getUniqueChar=(str)=>
    new Set(str.split(''));
    console.log(getUniqueChar('aaabbbccc')); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-01-07T00:09:04.427

一种解决方案是使用 Set。`const chars = [...new Set(s.split(''))];`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-01-20T14:47:57.070

**这是执行该 pt 的最简单的功能。2**

```
const showUniqChars = (text) => {
  let uniqChars = "";

  for (const char of text) {
    if (!uniqChars.includes(char))
      uniqChars += char;
  }
  return uniqChars;
}; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-10-30T05:02:13.603

```
let unique=myArray.filter((item,index,array)=>array.indexOf(item)===index) 
```

# spring - Spring Entitymanager java.lang.ClassFormatError

> ID：13868044
> 
> 赞同：0
> 
> 时间：2012-12-13T20:35:50.093
> 
> 标签：spring, hibernate, datasource, entitymanager

这是我在这个问题上苦苦挣扎的第二天。我们有一个使用 spring 和 hibernate 的网络应用程序。现在我们正在尝试向命令行公开一些功能。所以我们应该能够从命令行运行一个类（没有 web 应用程序），所以它应该可以访问 spring 和 hibernate。

```
<context:annotation-config/>

<context:component-scan base-package="com.x.y.z"/>

<jpa:repositories base-package="com.x.y" />

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
    <property name="jpaProperties">
        <props>
            <prop key="javax.persistence.validation.mode">NONE</prop>
            <prop key="hibernate.validator.apply_to_ddl">false</prop>
            <prop key="hibernate.validator.autoregister_listeners">false</prop>
            <prop key="hibernate.format_sql">false</prop>
        </props>
    </property>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="generateDdl" value="false" />
            <property name="database" value="SQL_SERVER" />
            <property name="showSql" value="false" />
        </bean>
    </property>
</bean> 
```

在这里，我使用的是[LocalEntityManagerFactoryBean](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/orm/jpa/LocalEntityManagerFactoryBean.html)但似乎没有办法为其设置数据源。它来自persistance.xml

如果我使用[LocalContainerEntityManagerFactoryBean](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/orm/jpa/LocalContainerEntityManagerFactoryBean.html)我可以设置数据源（它有数据源属性）

持久性.xml：

```
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
<persistence-unit name="oms-jpa">
    <class>com.domain.User</class>
</persistence-unit> 
```

在persistance.xml 中，我没有为数据源定义任何数据库信息，因此LocalEntityManagerFactoryBean 不适用于此。

我得到了什么：

```
Error creating bean with name 'entityManagerFactory' defined in file [C:\Users\ekamoliddinov\IdeaProjects\web\conf\spring-config.xml]: Invocation of init method failed; nested exception is java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/validation/Validation 
```

谷歌搜索然后有人说：

*   Jar 版本搞砸了
*   jee-api.jar 丢失

但我有jee-api.jar。

我的问题：

*   是什么导致了上述异常？
*   我可以`LocalContainerEntityManagerFactoryBean`在没有 Web 容器的情况下使用吗？Spec对此没有说什么。
*   如果我不能使用`LocalContainerEntityManagerFactoryBean`，那么我该如何设置 LocalEntityManagerFactoryBean 所以它应该使用我的数据源而不是来自persistance.xml（我不能在persistance.xml 中定义任何东西）。

我正在使用带有休眠 4.1.8.Final 的 spring 版本 3.1.3，并且我在命令行中（我没有 jee 环境）

对多个问题感到抱歉，但我认为所有问题都源于同一个根源。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:07:16.813

尝试 3 天后，我解决了这个问题。jars 搞砸了 :) 这是因为我的类路径中有 jee-api.jar 并且我从命令行运行代码，我没有 web env。所以我的环境中没有任何 jee-api.jar 的实现。这就是它给出上述例外的原因。我删除了 jee-api.jar 并消失了。

我可以告诉的另一件事：我们可以`LocalContainerEntityManagerFactoryBean`从命令行使用。我正在使用它。

最后一件事：我们不能将数据源设置为`LocalEntityManagerFactoryBean`

这是我对某人的帮助。

# arrays - 如何让 VBA 子例程调用将数组传递给子例程中的另一个函数的函数

> ID：13868045
> 
> 赞同：3
> 
> 时间：2012-12-13T20:35:49.267
> 
> 标签：arrays, vba, syntax, sanity-check

我试图让我的 VBA 子例程运行一个创建数组的函数，然后将该数组传递给另一个函数，该函数进一步处理这些数组项。我制作了一个非常简单的示例，其功能与我的实际代码完全相同。如下：

```
Sub SubRoutine()
ProcessArray CreateArray
End Sub
Function ProcessArray(Arr() As Variant) As Variant
End Function
Function CreateArray() As Variant
Dim Array1(1 To 4) As Variant
CreateArray = Array1
End Function 
```

只是这两个函数和调用这两个函数的子程序。编译器拒绝编译我的代码并向我解释：

编译错误：

类型不匹配：需要数组或用户定义类型

我只能说一切都是相同的数据类型，传递的参数确实是一个数组。以防万一您想知道，是的，我尝试过使用已分配数据的数组。

我知道我在 VBA 语法中缺少一些微妙的东西，但我还没有看到这样的例子。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T20:39:55.707

将此行更改
`Function ProcessArray(Arr() As Variant) As Variant`
为：
`Function ProcessArray(Arr As Variant) As Variant`

这样，您的函数现在将接受包含数组的变体，而不是寻找变体数组。正如你所说，一个微妙但显着的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T19:16:34.687

我认为仍然没有回答的是为什么
1.`MySub(MyArg)`
工作得很好，但
2.`MyOtherSub(MyArg1, MyArg2)`
没有

[这篇博文很好地解释了这一点。](http://blogs.msdn.com/b/ericlippert/archive/2003/09/15/52996.aspx)

本质上，您可以将通常是 byref 的参数作为 byval 传递：
`Call MySub(Arg1, (Arg2)) 'Arg1 is passed byref, Arg2 is passed byval`

代码 #1。之所以有效，是因为 VBA 认为您正在传递一个参数 byVal，因此它不算作在没有关键字的`Sub`调用中使用的括号。如其他答案中所述，没有关键字的调用`Call`中不允许使用括号。`Sub``Call`

`Call`关键字需要括号中的参数。所以 with`Call`关键字`Call MySub(MyArg)`实际上会通过`MyArg`byRef 因为括号被用作参数的外壳。

代码 #2 不起作用，因为没有有效的方法来证明语法中的括号（它只允许使用`Call`关键字。

# c# - 模拟运算符，例如“?? 的逆”

> ID：13868046
> 
> 赞同：2
> 
> 时间：2012-12-13T20:35:51.387
> 
> 标签：c#, operators

`a ?? b`

*   如果`a`不是`null`=> 则返回`a`。
*   否则（`a`是`null`）=> 返回`b`。

我想模拟类似它的逆的东西（AFAIK 没有运营商可以做到这一点）：

*   如果`a`是`null`=> 返回`a`。
*   否则（`a`不是`null`）=> 返回`b`。

这个想法是，这`b`将是一个接收`a`并需要避免`null`参数的函数的结果。像这样：`a XX fn(a)`其中 XX 将是运算符（如果存在）。

我仅有的两个变体是：

*   `a == null ? a : fn(a)`
*   `a == null ? null : fn(a)`

有没有办法简化这段代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:43:20.603

不确定您要完成什么？像这样的东西？

```
TResult NullFn<TParam, TResult>(TParam a, Func<TParam, TResult> method)
{
if(a == null) return null;
return method(a);
}

...

var result = NullFn(a, a => fn(a)) 
```

但是最好的解决方案恕我直言，`fn`如果它传递了一个空值，则只返回空值。

编辑：

顶部的方法只是一个示例。您可能希望在特定区域一遍又一遍地进行大量相同操作并且您无法更改 fn 的情况下使用类似的东西，因为它会使您更容易专注于其余部分代码，并且您可能希望在将来一次更改所有操作的空处理行为。（我假设是这种情况，因为您首先要问。）但是我不会在整个应用程序中使用它，因为如果您没有`NullFn`前面的功能，不清楚会发生什么你的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:38:18.543

简单条件有什么问题？

```
if (a != null) b = fn(a); 
```

另一种选择 - 为您的方法添加条件：

```
public B fn(A a)
{
    if (a == null)
        return null;

    return new B();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T20:47:15.643

我个人更喜欢

```
(a != null) ? fn(a) : null 
```

因为我认为它使意图更加明显，但我想不出一种方法来简化那么多。如果您愿意，可以使用扩展方法。

```
a.CallIfNotNull(fn) 
```

使用以下扩展方法

```
internal static T CallIfNotNull<T>(this T value, Func<T, T> function)
    where T : class
{
    return (value != null) ? function(value) : null;
} 
```

不是真的更好，但可能更不容易出错并且更容易输入 IntelliSense。

（假设函数返回的值与问题所暗示的参数类型相同。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T20:45:07.957

如果您拥有`T a;`并`T fn(T a);`使用相同的用户定义类型 T，那么您可以编写`a && fn(a)`并将其扩展为`T.False(a) ? a : T.&(a, fn(a))`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T20:52:55.463

您已经用底部的 ?: 实现回答了您自己的问题。

我建议的唯一改进是将功能包装在一种方法中，使其更清洁且不易出错。

```
object SafeB(object a)
{
    return a==null ? a : b(a);
} 
```

编译器可能会内联它，这样你就不会失去性能。

您甚至可以将其实现为提供 b 的类的扩展方法，从而使其成为更加集成的解决方案。

# git - 如何将 DiffMerge 配置为在 Windows 7 或 Windows 2012 上与 Git 一起使用？

> ID：13868052
> 
> 赞同：12
> 
> 时间：2012-12-13T20:36:02.323
> 
> 标签：git, diffmerge

所以我看到了一些关于让 DiffMerge 成为git`mergetool`的问题。`difftool`从本质上讲，它归结为在您的 DiffMerge (sgdm.exe) 中`PATH`，`.gitconfig`它看起来像：

```
[diff]
    tool = DiffMerge
[difftool "DiffMerge"]
    cmd = 'C:/Program Files/SourceGear/Common/DiffMerge/sgdm.exe' "$LOCAL" "$REMOTE"
[merge]
    tool = DiffMerge
[mergetool "DiffMerge"]
    cmd = 'C:/Program Files/SourceGear/Common/DiffMerge/sgdm.exe' -merge -result="$MERGED" "$LOCAL" "$BASE" "$REMOTE"
    trustExitCode = true
    keepBackup = false 
```

当我跑步时`git difftool file1 file2`，什么也没有发生。没有错误代码，没有启动 DiffMerge。从 Git Bash 和 Windows 命令行，我可以运行`sgdm file1 file2`并启动 DiffMerge。

我已将`cmd`中的修改`.gitconfig`为没有路径或扩展名（例如`sgdm`只有），但仍然无济于事。

有没有人遇到过这个？我缺少一些明显的东西吗？我觉得我错过了一些明显的东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-13T20:55:14.120

我`.gitconfig`使用 SourceGear DiffMerge 的方法是：

```
[mergetool "diffmerge"]
cmd = \"C:\\program files\\sourcegear\\common\\diffmerge\\sgdm.exe\" --merge --result=$MERGED $LOCAL $BASE $REMOTE 
```

（显然，翻转`$LOCAL`，`$REMOTE`如果你更喜欢它们在另一边。）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-04-18T14:48:01.850

以下为我工作-

```
git config --global diff.tool diffmerge
git config --global difftool.diffmerge.cmd 'C:/Program\ Files/SourceGear/Common/DiffMerge/sgdm.exe "$LOCAL" "$REMOTE"'
git config --global merge.tool diffmerge
git config --global mergetool.diffmerge.trustExitCode true
git config --global mergetool.diffmerge.cmd 'C:/Program\ Files/SourceGear/Common/DiffMerge/sgdm.exe -merge -result="$MERGED" "$LOCAL" "$BASE" "$REMOTE"'
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-20T19:34:13.020

这对我来说已经很长一段时间了。（Windows 7，最新版本的 Git。）

确保 sgdm.exe 在环境路径中。

```
[diff]
    tool = sgdm
[difftool "diffmerge"]
    cmd = sgdm $LOCAL $REMOTE
[merge]
    tool = sgdm
[mergetool "diffmerge"]
    cmd = sgdm --merge --result=$MERGED $LOCAL $BASE $REMOTE
    trustexitcode = false
[difftool "sgdm"]
    cmd = sgdm $LOCAL $REMOTE
[mergetool "sgdm"]
    trustexitcode = false
    cmd = sgdm --merge --result=$MERGED $LOCAL $MERGED $REMOTE --title1=Mine --title2='Merged: $MERGED' --title3=Theirs 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-25T10:36:19.120

[这](http://sourcegear.com/diffmerge/webhelp/sec__git__windows__msysgit.html)对我有用：

```
C:\> git config --global diff.tool diffmerge
C:\> git config --global difftool.diffmerge.cmd
    "C:/Program\ Files/SourceGear/Common/DiffMerge/sgdm.exe
        \"$LOCAL\" \"$REMOTE\""

C:\> git config --global merge.tool diffmerge
C:\> git config --global mergetool.diffmerge.trustExitCode true
C:\> git config --global mergetool.diffmerge.cmd 
    "C:/Program\ Files/SourceGear/Common/DiffMerge/sgdm.exe
        /merge /result=\"$MERGED\" \"$LOCAL\" \"$BASE\" \"$REMOTE\"" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-31T15:32:42.793

当其他人都没有这样做时，这个为我做了：

```
[core]
    autocrlf = false
[user]
    email = XYZ
    name = ABC
[merge]
    tool = diffmerge
[mergetool "diffmerge"]
    trustExitCode = true
    cmd = C:/Program\\ Files/SourceGear/Common/DiffMerge/sgdm.exe --merge --result=$MERGED $LOCAL $BASE $REMOTE
[mergetool]
    keepBackup = false
[difftool "diffmerge"]
    cmd = C:/Program\\ Files/SourceGear/Common/DiffMerge/sgdm.exe \"$LOCAL\" \"$REMOTE\"
[diff]
    tool = diffmerge
[push]
    default = matching 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T13:30:05.687

此配置适用于 Git 1.7.9 和 Windows 7 64 位。我的出发点是 Pro Git 书籍[http://git-scm.com/book/en/Customizing-Git-Git-Configuration](http://git-scm.com/book/en/Customizing-Git-Git-Configuration)。Windows 与 Mac 的变化是 a) 差异，只需将 / 替换为 \\ 并在包含空格的路径周围加上引号 b) 用于合并参数与您的参数相同，但带有引号。因此：

**.gitconfig**

```
[merge]
     tool = extMerge
[mergetool "extMerge"]
    cmd = extMerge "$BASE" "$LOCAL" "$REMOTE" "$MERGED"
    trustExitCode = false
[diff]
    external = extDiff 
```

PATH 上的两个脚本文件

**扩展合并**

```
#!/bin/sh
"C:\\Program Files\\SourceGear\\Common\\DiffMerge\\sgdm.exe" "-merge" "-result=$4" "$2" "$1" "$3" 
```

**扩展差异**

```
#!/bin/sh
[ $# -eq 7 ] && "C:\\Program Files\\SourceGear\\Common\\DiffMerge\\sgdm.exe" "$2" "$5" 
```

# php - 如何使用 basename-function 将文件名保存在变量中

> ID：13868053
> 
> 赞同：-1
> 
> 时间：2012-12-13T20:36:06.113
> 
> 标签：php, html, function

您好，我认为拥有干净的网址会更好。

所以我想使用 basename`basename($_SERVER['SCRIPT_NAME'])`

我想将基本名称保存到一个变量中，我可以将其用于标题函数，如下所示：

```
$basename = basename($_SERVER['SCRIPT_NAME']);

if ($pref_language == 'af'){
    header('Location:en'.$basename;
    exit;
} 
```

什么不起作用。因此，如果有人可以告诉我如何以正确的方式使用它，我将不胜感激。

多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:38:37.443

`)`您的代码中缺少

尝试：

```
$basename = basename($_SERVER['SCRIPT_NAME']);

if ($pref_language == 'af'){
    header('Location:en'.$basename);
    exit;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:40:14.463

看来你走错了路。您需要在 Web 服务器层开始寻找干净的 URL。因为 Web 服务器需要知道如何将请求路由到实际不匹配任何文件名的实际文件以进行处理。在 Stack Overflow 和整个 Web 上，有成千上万个关于如何执行“干净 URL”或“服务器重定向”的示例。如果您使用的是 Apache，请专门寻找`mod_rewrite`评论。

# typescript - TypeScript：公共类扩展了私有类：不可能吗？

> ID：13868057
> 
> 赞同：6
> 
> 时间：2012-12-13T20:36:29.123
> 
> 标签：typescript

我正在做与这个问题非常相似的事情：

[TypeScript：使类仅在模块内可见](https://stackoverflow.com/questions/12781767/typescript-make-class-visible-inside-module-only)

除了我正在扩展私人课程。VS2012 在我面前抛出一个警告： **exported class MyExportedClass extends private class MyPrivateClass**

我的代码如下所示：

```
module MyModule {
    class MyPrivateClass {
        constructor(public name: string) {
        }
        getName() {
            return this.name;
        }
    }

    export class MyExportedClass extends MyPrivateClass { // Error: exported class MyExportedClass extends private classMyPrivateClass
        constructor(name: string) {
            super(name);
        }        
    }
} 
```

我的理解是否正确，这是不可能的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T04:14:07.523

这是不可能的，因为它会允许模块外的任何人调用您的私有类的成员。如果他们允许的话，你基本上会提升班级的知名度。

如果您查看它们生成的代码，您会发现私有类实际上在文件之外是不可见的，因为它们没有使其成为 MyModule 的成员：

```
(function (MyModule) {
    var MyPrivateClass = (function () {
        function MyPrivateClass(name) {
            this.name = name;
        }
        MyPrivateClass.prototype.getName = function () {
            return this.name;
        };
        return MyPrivateClass;
    })();    
    var MyExportedClass = (function (_super) {
        __extends(MyExportedClass, _super);
        function MyExportedClass(name) {
                _super.call(this, name);
        }
        return MyExportedClass;
    })(MyPrivateClass);
    MyModule.MyExportedClass = MyExportedClass;    
})(MyModule || (MyModule = {})); 
```

这并不意味着生成的代码不起作用，但我的期望是该类对模块内的任何人都是可见的，并且假设一个模块可以跨越多个文件，这实际上是不可能的。

他们不允许这样做的主要原因很可能是因为升级代码可见性的概念问题，但我确实想指出还有一个微妙的技术问题。

# sql - 在视图中查找动态数据库名称

> ID：13868059
> 
> 赞同：1
> 
> 时间：2012-12-13T20:36:36.427
> 
> 标签：sql, sql-server

在 SQL Server 数据库中，我有这种表：

```
EVENT201201.dbo.EvAcc
EVENT201202.dbo.EvAcc
EVENT201203.dbo.EvAcc
EVENT201204.dbo.EvAcc
EVENT201205.dbo.EvAcc
...
EVENTYYYYMM.dbo.EvAcc 
```

我也有`DBACCES1.dbo.*`。我创建了一个这样的查询：

```
DECLARE @SQL varchar(511)
DECLARE @SQL_ACC varchar(250)
DECLARE @SQL_UClass varchar(250)
DECLARE @SQL_UClassDef varchar(250)
DECLARE @TABLENAME varchar(250)

SELECT @TABLENAME ='EVENT' + CONVERT(char(4), YEAR(GETDATE() - 1)) + CONVERT(char(2), MONTH(GETDATE() - 1))
SELECT @SQL_ACC = '' + QuoteName(@TABLENAME) + '.dbo.EvAcc ON EvAcc.fpointeur = cards.fpointeur'
SELECT @SQL_UClass = 'dbacces1.dbo.UClass ON UClass.fpointeur = cards.fpointeur AND MClass = 1'
SELECT @SQL_UClassDef = 'dbacces1.dbo.UClassDef ON UClassDef.SClass = UClass.SClass'

SELECT @SQL = 'SELECT cards.FPointeur, Ref, Peri, cout, cin, edate FROM dbacces1.dbo.cards INNER JOIN ' + @SQL_ACC + ' INNER JOIN ' + @SQL_UClass

EXEC(@SQL) 
```

它有效，但我需要把它放在一个视图中。它不起作用。我有这个错误（对不起法语）：

```
La construction ou l'instruction SQL Déclarer un curseur n'est pas prise en charge. 
```

它说不允许在视图中声明。

我试图创建一个有值的表函数，但它不起作用，因为我不能在函数`exec`中使用带有字符串的函数。我有这个错误：

```
Invalid use of side-effecting or time-dependent operator in 'EXECUTE STRING' within a function. 
```

我也尝试创建过程，但我不能将它用作查询中的表。我试图创建一个仅返回数据库名称的函数，但它不再起作用。

你有什么解决办法吗？

**编辑 1 - 解决方案**

我创建了一个每月执行的脚本。这是我的脚本：

```
DECLARE @start_date DATETIME
DECLARE @end_date DATETIME
DECLARE @sql VARCHAR(MAX)
DECLARE @dbname VARCHAR(15)
DECLARE @year VARCHAR(4)
DECLARE @month VARCHAR(2)

--Start the SQL request
SET @sql = 'CREATE VIEW dbo.viewEvAcc AS '

SET @start_date = convert(DATETIME, '01/01/2011', 101)
SET @end_date = GETDATE()

--Loop from the start date to now
WHILE @start_date < @end_date
BEGIN
    --Find new year and month
    SET @year = CONVERT(CHAR(4), YEAR(@start_date))
    SET @month = RIGHT('0' + RTRIM(MONTH(@start_date)), 2);

    --Create the db name with year and month
    SET @dbname = 'EVENT' + @year + @month

    --Concat the SQL Request
    SET @sql = @sql + 'SELECT * FROM ' + @dbname + '.dbo.EvAcc'

    --Update the start date for the month after
    SET @start_date = CONVERT(VARCHAR(8),DATEADD(MONTH,1,CONVERT(VARCHAR(8),@start_date,112)),112)

    --If the date is not the last date, it add a union
    IF @start_date < @end_date
    BEGIN
        SET @sql = @sql + ' UNION ALL '
    END
END

-- drop and create a view with new information
USE dbacces1
IF EXISTS (SELECT TABLE_NAME FROM INFORMATION_SCHEMA.VIEWS WHERE TABLE_NAME = 'viewEvAcc')DROP VIEW dbo.viewEvAcc; 
EXEC(@sql) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:46:39.530

也许你可以使用同义词：http: [//msdn.microsoft.com/en-us/library/ms187552 (v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms187552(v=sql.100).aspx)

您制作了一个静态视图，该视图从同义词对象中选择数据，但在从视图中选择之前，您将同义词从您需要的数据库中重新分配给表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:30:20.023

视图只能包含静态选择语句，因此如果要实现[动态 SQL](http://www.sommarskog.se/dynamic_sql.html)，则需要将其放置在存储过程中。您可以按照以下步骤操作：

1.  使用您的动态 sql 创建存储过程 - sp_1
2.  使用您的其他查询创建存储过程 - sp_2
3.  在这个存储过程中，调用你的 sp_1 并将[结果插入到一个临时表中](https://stackoverflow.com/questions/662049/dynamic-sql-results-into-temp-table-in-sql-stored-procedure)
4.  在您的查询中加入这个临时表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:04:21.110

如果视图定期更改（即每天），您可以编写作业脚本以根据需要删除并重新创建（更改）视图。它可能是创建和/或填充该新表的工作的一部分。

如果空表是提前创建的，请考虑创建一个分区视图来合并它们。然后，您可以将查询与连接放在上面，并将日期约束添加到该查询的 where 子句。

[分区视图](http://msdn.microsoft.com/en-us/library/ms190019%28v=sql.105%29.aspx)

# jboss7.x - JBoss 7.1.1 Final Jasperreports 4.0.2 作为一个模块

> ID：13868061
> 
> 赞同：0
> 
> 时间：2012-12-13T20:36:41.730
> 
> 标签：jboss7.x

我正在尝试 JB7 的这个新的类加载功能，女巫听起来不错，我想在一个新项目中实现，但我有点卡在这一点上......这就是我得到的：

```
<module xmlns="urn:jboss:module:1.1" name="net.sourceforge.jasperreports">
    <resources>
        <resource-root path="commons-javaflow-20060411.jar"/>
        <resource-root path="iText-2.1.0.jar"/>
        <resource-root path="jasperreports-4.0.2.jar"/>
        <resource-root path="jcommon-1.0.15.jar"/>
        <resource-root path="jfreechart-1.0.14.jar"/>
    </resources>
    <dependencies>
        <module name="javax.api"/>
        <module name="org.apache.commons.beanutils"/>
        <module name="org.apache.commons.collection"/>
        <module name="org.apache.commons.digester" slot="1.7"/>
        <module name="org.apache.commons.logging"/>
    </dependencies>
</module> 
```

如果没有`<module name="org.apache.commons.logging"/>`依赖项，跟踪堆栈会显示它丢失的错误，即使默认情况下这个特定的 jar 已经与应用程序一起部署，所以我从 app java libs 文件夹中取出 jar 并为它制作了一个模块，现在我的应用程序在需要模块 net.sourceforge.jasperreports 时挂起，我有什么遗漏吗？

如果需要，这是 JBoss 部署结构：

```
<jboss-deployment-structure>
    <deployment>
        <dependencies>
            <module name="org.apache.commons.collections"/>
            <module name="org.apache.commons.logging"/>
            <module name="net.sourceforge.jasperreports"/>
            <module name="org.apache.log4j"/>
        </dependencies>
        <resources>
            <resource-root path="."/>
        </resources>
    </deployment>
</jboss-deployment-structure> 
```

它是一个部署为战争的 Java EE 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:45:32.923

我有`<module name="org.apache.commons.collection"/>` 并且应该是`<module name="org.apache.commons.collections"/>`

就是这样……”-.-

这很奇怪，因为当 Jboss 结构中的模块无法加载时，战争部署失败并在控制台中显示错误，在这种情况下，它应该是关于“org.apache.commons.collection not found”的东西，但不知何故，我的应用程序运行正常，并且由于缺少模块依赖关系，使用的任何 jasper 报告 sevlet 都会永远挂起。

编辑：`Jboss`当依赖项丢失时不显示任何错误，它只是挂在该行中。但是当模块无法加载资源时，它确实会显示错误。

# google-drive-api - 是否有构建适用于 android 的驱动器应用程序的实时演示的源代码？

> ID：13868062
> 
> 赞同：0
> 
> 时间：2012-12-13T20:36:44.473
> 
> 标签：google-drive-api

有关于修改笔记应用程序以与驱动器集成的现场演示。它的源代码可用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:23:23.683

现在可以在以下链接中找到它，

[https://developers.google.com/drive/examples/android](https://developers.google.com/drive/examples/android)

# android - Android 模拟器不会禁用硬件按钮

> ID：13868066
> 
> 赞同：4
> 
> 时间：2012-12-13T20:36:54.190
> 
> 标签：android, android-emulator, emulation

我想在没有硬件按钮的情况下在 ICS/JB 上测试我的应用程序。我将硬件返回/主页键配置为“否”（附加图像），但按钮显示在模拟器中（附加图像）。我错过了什么吗？SDK 是最新的，Eclipse 版本：4.2.0 构建 ID：I20120608-1400 谢谢。

截图（抱歉，stackoverflow 政策阻止我发布图片）：

AVD 配置： http: [//postimage.org/image/44jppptjv/](http://postimage.org/image/44jppptjv/)

模拟器： http: [//postimage.org/image/s9kf7fduj/](http://postimage.org/image/s9kf7fduj/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:40:57.203

我相信有一种更简单的方法，进入 AVD 管理器菜单，编辑你想要的没有硬件按钮的虚拟设备，然后取消选中“显示带有硬件控件的皮肤”

# cocos2d-iphone - 如何在 cocos2D 2.0 中使用偷偷摸摸的输入

> ID：13868071
> 
> 赞同：1
> 
> 时间：2012-12-13T20:37:08.033
> 
> 标签：cocos2d-iphone

这是我第一次在 iPhone 上使用 cocos2d，所以现在我认为自己是个菜鸟。

我正在尝试将 SneakyInput 与 cocos2D 2.0 一起使用，但我似乎无法让它正常工作。

有谁知道我怎样才能启动并运行它？我看到的所有教程似乎都已经过时了。

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:04:01.297

您在使用 SneakyInput 时遇到的问题是什么？如果你的 cocos2D 项目没有使用 SneakyInput 源文件编译，我能想到的唯一原因是 SneakyInput 没有启用 ARC，否则一切都应该像 cocos2d 1.0 一样工作。

如果您遇到 ARC 相关错误，您可以从 Xcode 菜单中选择 Edit-> Refactor-> Convert to Objective-C ARC，只选择您的项目，然后继续将其转换为 ARC。

或者，您可以在 Targets 下选择您的项目，然后选择 Build Phases -> Compile Sources，然后选择 SneakyInput 文件并为每个文件添加以下标志：

```
–fobjc-no-arc 
```

希望这可以帮助。

# css - 在 CSS 文件中格式化 WebGrid

> ID：13868074
> 
> 赞同：3
> 
> 时间：2012-12-13T20:37:29.280
> 
> 标签：css, asp.net-mvc-3, formatting, webgrid

在我的一个视图中，我有一个 webgrid。我想添加一些样式属性，但是当我在项目的 css 文件中添加它们时它不起作用。但是，当我在视图中使用样式标签添加它时，它可以工作。此外，视图的所有其他元素都根据 css 文件进行格式化，除了 webgrid。

可以从 CSS 文件格式化 webgrid 吗？

**编辑**

```
var grid = new WebGrid(canPage: true, rowsPerPage: 10, canSort: true, ajaxUpdateContainerId: "grid");
grid.Bind(model, rowCount: Model.ToList().Count(), autoSortAndPage: false);
grid.Pager(mode:WebGridPagerModes.All, 
    firstText:"First", lastText:"Last", 
    previousText:"Previous", 
    nextText:"Next", 
    numericLinksCount: 15);
    @grid.GetHtml(htmlAttributes: new { id = "grid" },
    tableStyle: "webgrid",
    headerStyle: "webgrid-header",
    footerStyle: "webgrid-footer",
    alternatingRowStyle: "webgrid-alternating-row",
    selectedRowStyle: "webgrid-selected-row",
    rowStyle: "webgrid-row-style",
    columns: grid.Columns(
        grid.Column(columnName: "column1", header: "column 1r"),
        grid.Column(columnName: "column2", header: "column 2", canSort:true),
        grid.Column(format: (item) => Html.ActionLink("Detail", "Detail", new { JobNumber = item.JobNumber, @style="color:#CCC;" })),
        grid.Column(format: (item) => Html.ActionLink("Edit", "Edit", new { EmployeeID = item.JobNumber }))
)); 
```

这是CSS

```
.webgrid
{
 width: 100%;
 border: 0px;
 border-collapse: collapse;
 white-space:nowrap;
 }

.des {
    width:50%;
}

.webgrid a
{
color: #000;
}

.webgrid-header
{
padding: 6px 5px;
text-align: center;
background-color: #e8eef4;
border-bottom: 2px solid #3966A2;
height: 40px;
border-top: 2px solid #D6E8FF;
border-left: 2px solid #D6E8FF;
border-right: 2px solid #D6E8FF;
}

.webgrid-footer
{
padding: 6px 5px;
text-align: center;
background-color: #e8eef4;
border-top: 2px solid #3966A2;
height: 30px;
border-bottom: 2px solid #D6E8FF;
border-left: 2px solid #D6E8FF;
border-right: 2px solid #D6E8FF;
 }

.webgrid-alternating-row
{
height: 30px;
background-color: #f2f2f2;
border-bottom: 1px solid #d2d2d2;
border-left: 2px solid #D6E8FF;
border-right: 2px solid #D6E8FF;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:05:40.673

我猜你错误地包含了 CSS 文件。确保您已使用 url 帮助程序来引用文件，而不是硬编码 url。所以把这些规则放在一个自定义的 CSS 文件中，然后像这样包含这个文件：

```
<link href="@Url.Content("~/Content/MyCustomStyle.css")" rel="stylesheet" type="text/css" /> 
```

# javascript - 请解释一下javascript中冒号的用法

> ID：13868078
> 
> 赞同：12
> 
> 时间：2012-12-13T20:37:40.197
> 
> 标签：javascript, syntax, colon

我正在制作一个库，我经常检查 Closure Compiler 的输出结果以了解它是如何做事的（我确实有单元测试，但我仍然希望看到编译后的代码以了解它如何更好地压缩的提示）。

所以，我发现了这段非常奇怪的代码，这是我以前从未见过的。

```
variable : {
    some();
    code()
} 
```

*注意：这**不是对象字面量！**此外，没有`?`任何地方可以使它[成为`?:`有条件](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators#conditional_operator)的.*
***该代码位于常规功能块***（[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)）中。

`variable`，在这种情况下，是一个未定义的变量。*没有代码使它成为 true 、 false 或任何东西*，只是为了确保我把 a`console.log`放在那里，确实，我得到了`ReferenceError`.

请注意，我也在 IE8 中测试我的代码，所以这不仅仅是在现代浏览器中。它似乎是标准的、普通的旧 javascript。

所以让我们来试验一下。启动 Chrome 的控制台，我得到了这个：

```
undeclaredVariable:{console.log('does this get logged?')} // yes it does.
trueValue:{console.log('what about this?')}               // same thing.
falseValue:{console.log('and this?')}                     // same thing. 
```

但是之后...

```
(true):{console.log('does this work too?')} // SyntaxError: Unexpected token : 
```

...和...

```
so?{console.log('is this a conditional?')}:{alert(123)} // Unexpected token . 
```

那么它有什么作用呢？

```
thisThing:{console.log('is used to declare a variable?')}
thisThing // ReferenceError: thisThing is not defined 
```

拜托，如果有人可以向我解释这段代码的用途，或者至少是它的作用，我会很高兴。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T20:42:52.790

这是一个[标签](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/label)

> 提供带有标识符的语句，您可以使用 break 或 continue 语句引用该标识符。
> 
> 例如，您可以使用标签来标识循环，然后使用 break 或 continue 语句来指示程序是应该中断循环还是继续执行。

你看到的另一个常见的地方是当人们把美妙而无用的东西`javascript:`放在事件处理程序上时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T20:43:40.743

这是一个[*标签*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/label)（以冒号结尾的位），后跟一个*块*（用大括号括起来的代码）。

**块**通常遵循控制语句，例如`if(...) { /*block*/ }`，但它们也可以简单地独立存在，如您的示例所示。

**标签**`continue`允许使用or一次跳转多个循环`break`；有关几个示例，请参见链接的 MDN 页面，例如：

```
var itemsPassed = 0;
var i, j;

top:
for (i = 0; i < items.length; i++){
  for (j = 0; j < tests.length; j++)
    if (!tests[j].pass(items[i]))
      continue top;
  itemsPassed++;
} 
```

这里，`top:`是一个标签，内循环内的代码可以跳转到，以便逃到外循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T17:44:46.090

对于任何不知道 JSON 是什么的人，并且在实际上可能是一个对象中看到一个冒号，并试图弄清楚它是什么，并找到这个讨论，JSON 中也使用了一个冒号。有一种在 JSON 对象中嵌入函数的做法。对于第一次碰巧看到这个的人来说，这可能会令人困惑（就像对我一样）。（并不是每个人都生来就将 JSON 和 JavaScript 的知识编程到他们的大脑中。）所以，如果你发现自己在这个讨论中，并且你认为每次你在 JavaScript 中看到一个冒号，它是一个标签，它可能不是. 它可能是标签后的冒号，也可能是 JSON 的一部分。事实上，JSON 中的冒号显示为字符串，比标签更常见。对象形式的 JSON，将显示为`[object Object]`, 隐藏所有内容。因此，除非 JSON 是字符串形式，并且您向控制台显示一个对象 (console.log(object))，否则您将看到的只是`[object Object]`. 编写包装在对象中的 JavaScript 代码是一种常见的做法。在这种情况下，您将以代码的形式看到 JSON。那时你会问自己，“这是什么？那个冒号是干什么用的？” 然后你会发现自己在这个讨论中，并被告知它是一个标签，而它实际上是 JSON 的一部分。本次讨论的主题是：“请解释一下javascript中冒号的这种用法”，然后将“正确答案”标记为与标签有关。正确的答案是冒号的使用方式不止一种。所以，如果你不知道 JSON 是什么，或者认为你知道（就像我一样， [JSON.org](http://www.json.org/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-13T20:40:16.460

That is just a `label`.

you can use `continue [label name]` (or `break`) in a loop to go to a label.

More explanations of what they are can be seen throughout the interwebs.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-13T20:43:11.347

它用于标记 jsvascript 中的语句。在[此处](http://www.w3resource.com/javascript/statements/label.php)查看更多详细信息。

带标签的语句可以`break`与`continue`以后一起使用。

# java - AndEngine SetAlpha 不影响子实体

> ID：13868080
> 
> 赞同：3
> 
> 时间：2012-12-13T20:37:56.440
> 
> 标签：java, android, andengine

我在子实体上设置 Alpha 时遇到问题。我创建一个 Rectangle 实体并将一个 Text 实体附加到矩形，如下所示：

```
m_background = new Rectangle(0.0f, 0.0f, m_activity.getCamera().getWidth(), m_activity.getCamera().getHeight(), m_activity.getVertexBufferObjectManager());
m_background.setColor(0.0f, 0.0f, 0.0f);

FontFactory.setAssetBasePath("font/");

final ITexture fontTexture = new BitmapTextureAtlas(m_activity.getTextureManager(), 256, 256, TextureOptions.BILINEAR);
this.m_Font = FontFactory.createFromAsset(m_activity.getFontManager(), fontTexture, m_activity.getAssets(), "Droid.ttf", 48, true, android.graphics.Color.WHITE);
this.m_Font.load();

Text text = new Text(100, 300, this.m_Font, "LoadingScreen", new TextOptions(HorizontalAlign.RIGHT), m_activity.getVertexBufferObjectManager());
    m_background.attachChild(text); 
```

现在我想将此背景实体的 Alpha 设置为 0：

```
m_background.setAlpha(0.0f); 
```

我的印象是子实体也会受到影响，不是吗？除了直接在子实体上设置 alpha 之外，我怎么能做到这一点？有没有更好的办法？

提前致谢， 泽德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T21:11:22.753

不幸的是，不，子实体仅受其父实体的位置影响（它是附加的）。如果你想有一个带有文本的矩形并在它们两个上应用 alpha 修改，或者你也将 alpha 应用到文本，或者如果你想更频繁地使用这个概念并做除了改变 alpha 通道之外的其他事情，您创建自己的课程。

可能是这样的：

```
public class Background extends Entity {

    private Text text;

    public Background(float x, float y, float width, float height, Font font, String textMessage, VertexBufferObjectManager vertexBufferObjectManager) {
         this.setPosition(x, y);
         this.attachChild(new Rectangle(0, 0, width, height, vertexBufferObjectManager));
         this.text = new Text(0, 0, font, textMessage, vertexBufferObjectManager);
         this.attachChild(text);
    }

    @Override
    public void setAlpha(float pAlpha) {        
         super.setAlpha(pAlpha);
         this.text.setAlpha(pAlpha);
    }   
} 
```

这只是一个例子。如果您需要对矩形进行更多操作（调整大小等），您只需创建自己的方法来处理矩形和文本。唯一对两者都是自动的就是位置（这里我将文本放置在矩形的 0,0 位置）。

希望这可以帮助

*   克里斯托夫

# javascript - 如何获取 XML 子节点的长度

> ID：13868082
> 
> 赞同：1
> 
> 时间：2012-12-13T20:37:58.923
> 
> 标签：javascript, xml

我的问题很简单。我要做的就是获取**员工**标签内有多少**员工**标签。我的 XML 看起来像这样......

 **```
<employees>
   <employee>
      <name></name>
      <city></city>
   </employee>
   <employee>
   .
   .
   .
</employees> 
```

我一直在使用这个 javascript 来尝试长度，但它一直为零......

```
items=request.responseXML.getElementsByTagName("employees")[0].childNodes;
alert(items.length); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:43:11.540

除非您有嵌套的员工标签，否则您可以简单地使用：

```
request.responseXML.getElementsByTagName("employee").length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:49:16.093

```
items=request.responseXML.getElementsByTagName("employee");
alert(items.length);​ 
```**

# scala - Scala - 推断类型参数

> ID：13868085
> 
> 赞同：4
> 
> 时间：2012-12-13T20:38:21.123
> 
> 标签：scala

为什么这段代码会产生错误

```
def test[A](a: List[A], f: A => A) = a.map(f)

println(test(List(1,2,3), _*2))

error: missing parameter type for expanded function ((x$2) => x$2.$times(2)) 
```

Scala 不应该能够判断 A 是 Int 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T20:42:49.740

您需要第二个参数列表才能使其正常工作。我不确定规范中是如何定义的，但是我以前见过。

```
scala> def test[A](a: List[A])(f: A => A) = a.map(f)
test: [A](a: List[A])(f: (A) => A)List[A]

scala> test(List(1))(_+1)
res1: List[Int] = List(2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-19T20:09:39.030

这就是示例，如何在不更改任何内容的情况下使其适用于您的情况。

```
scala> println(test(List(1,2,3), (i: Int) => i * 2 )) 
```

Scala 的类型推断是有限的，有时你应该帮忙！

这是文章[充分利用 Scala 的（极其有限的）类型推断](http://pchiusano.blogspot.com/2011/05/making-most-of-scalas-extremely-limited.html)

# ruby-on-rails - skip_before_filter doesn't actually skip

> ID：13868089
> 
> 赞同：0
> 
> 时间：2012-12-13T20:38:42.430
> 
> 标签：ruby-on-rails, ruby, devise, ruby-on-rails-3.2

So, i have model User

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me
end 
```

I've created scaffold to that model using rails generators, in controller i added following lines:

```
class UsersController < ApplicationController
  before_filter :authenticate_user!

  skip_before_filter :require_no_authentication, :only => [:create]

  # ...
end 
```

Finally, when I'm trying to create user I've got this:

```
Started POST "/users" for 127.0.0.1 at 2012-12-13 22:33:34 +0100
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"wkJ8ZxVUg9eaFiL+Guu+QIfjGiwGANReiv2bTu3YQPg=", "user"=>{"email"=>"test@test.pl", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Save"}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Redirected to http://localhost:3000/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.3ms) 
```

So, according to log skip_before_filter didn't work. What am I doing wrong?

* * *

EDIT: I don't want give possibility to create user when someone isn't logged in, so skipping :authenticate_user! isn't option. btw. registerable is only temporary in User model.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:01:21.803

在这种情况下，您需要将更改应用到正确的控制器`Devise::RegistrationsController`。像这样简单地扩展它（未经测试，但原理应该有效）：

```
# app/controllers/registration_controller.rb
class RegistrationsController < Devise::RegistrationsController
  skip_before_filter :require_no_authentication, :only => [:create]
end 
```

并确保设计使用：

```
# routes.rb
devise_for :users, :controllers => { :registrations => "registrations" } 
```

您可以在优秀的[Devise Wiki](https://github.com/plataformatec/devise/wiki/_pages)中搜索有关扩展 Devise 控制器的许多示例。

# c++ - C++ Fastest way to parse through a file

> ID：13868090
> 
> 赞同：0
> 
> 时间：2012-12-13T20:38:46.203
> 
> 标签：c++, string, boost, char

I have a file which I have opened using:

ifstream ifile(FilePath)

The file contains, say 10 lines of data and each line contains an evenly-incrementing number of comma separated values (like a pyramid). So first line has 1 value, second line has 2 values and so on....

I wanted to do the following, all within one function (whilst traversing the file char array just the once):

-Every time I encounter a newline character, I can increment a parameter passed in by value (which, when the function exits, I have the number of lines in the file).

-I also wanted to store each line of the file in an array. What would be the best way to "glue" together all the characters between newline characters?

I'd prefer to use statically-allocated arrays, but the problem is I only know the size of the array once I have performed step 1 (counting how many new line characters there are). Would it be quicker to perform a double-parse for this (one parse to count how many lines, then use that value to allocate a static array) or single parse, but insert into a dynamic array?

The emphasis on this is to write fast code (so not being OO-friendly is not a concern)

Apologies if I am asking a lot, hopefully you can see I have given this some thought.

EDIT, example file:

> a
> 
> b,c
> 
> d,e,f,g,h
> 
> j,k,l,m,n,o,p

From this file I would want to achieve:

*   Knowledge that there are 4 lines in the file
*   A non-dynamic array containing each line
*   The number of elements in the second line

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:51:22.907

现有帖子中有很多关于如何执行此操作的示例。

如果您想使用 ifstream 读取文件一次，您可以执行以下操作：

```
std::ifstream in("myfile");

std::stringstream buffer;
buffer << in.rdbuf();

std::string contents(buffer.str()); 
```

# php - 使用递归时记住对象的第一个字符串

> ID：13868097
> 
> 赞同：0
> 
> 时间：2012-12-13T20:39:28.013
> 
> 标签：php, recursion

这是我遇到问题的功能的一个非常简化的版本：

```
function example(&$form) {
     $name = $form->getName();

     foreach ($form as $sub) {
          if ($sub instanceof Form) {
               example($sub);
          }
          // need this to be the first entry of $name
          echo $name;
      }

 }

 example($this->form); 
```

我需要一种方法来保持第一个条目的值`$name`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:41:34.477

尝试向函数添加另一个参数

```
function example(&$form, $firstFormName = null) {
    $name = $form->getName();

    if(is_null($firstFormName))
        $firstFormName = $name;

    foreach ($form as $sub) {
        if ($sub instanceof Form) {
           example($sub, $firstFormName);
        }
    }
    // need this to be the first entry of $name
    echo $name;
}

example($this->form); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:43:43.813

只需将值作为参数传递

```
function example(&$form, $init_name = null) {
    $name = $form->getName();
    if (empty($init_name)) {
        $init_name = $name;
    }

     foreach ($form as $sub) {
          if ($sub instanceof Form) {
               example($sub, $init_name);
          }
          // current name
          echo $name;
          // initial name
          echo $init_name;
      }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T20:45:20.763

这些方面的东西应该可以为您解决问题。

```
$first_name = "";
foreach ($form as $sub) {
   if ($first_name == "") {
      $first_name = $sub;
   }
// The rest of your for loop here... 
```

# python - Error parsing XML with em dash

> ID：13868099
> 
> 赞同：1
> 
> 时间：2012-12-13T20:39:34.430
> 
> 标签：python, xml, xml-parsing

I'm working on a web app that pulls in a list of tweets through a python script. When I pull in a tweet that contains an em dash, I'm unable to parse the XML file.

My script is:

```
#! /usr/bin/python
import cgi
from peewee import *
from sql_connect import *
import sql_connect
import sys

xmlString = ""

# Create XML string
xmlString += "<TweetList>"

tweets = Tweet_Info.select()
for tweet in tweets:
    xmlString += "<Tweet>"
    xmlString += "<UserName>"
    xmlString += tweet.user
    xmlString += "</UserName>"
    xmlString += "<UserImage>"
    xmlString += tweet.user_image_url
    xmlString += "</UserImage>"
    xmlString += "<Text>"
    xmlString += tweet.text
    xmlString += "</Text>"
    xmlString += "</Tweet>"

xmlString += "</TweetList>"

# Print beginning xml stuff
print "Content-Type: text/xml"
print
print '<?xml version="1.0" encoding="UTF-8"?>' 
print xmlString 
```

The error it gives when I load the python script in the browser is:

```
XML Parsing Error: no element found
Location: http://localhost/cgi-bin/GetTweets2.py
Line Number 2, Column 1: 
```

I feel like the solution to this is probably fairly simple. I've tried using a variety of different encoding types for the xml, but with no success. Is there a specific encoding type that I should use? Or is there a simple way of filtering out a special character that I'm missing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:45:25.117

如果要生成 XML，最好以正确的方式进行：创建一个数据结构来保存要序列化的数据，并使用内置的 Python 功能将其转换为 XML。这种方法还有一个优点，就是您不必担心编码错误和奇怪的输入。（想想如果一条推文包含文本，你当前的脚本会发生什么`</Text>`。）

# gis - Remove records from a shapefile

> ID：13868105
> 
> 赞同：0
> 
> 时间：2012-12-13T20:40:08.147
> 
> 标签：gis, shapefile

I have a complete shapefile, but I just need 30% of the .dbf records. I clean the .dbf easily in SQL, but the connection with the shapefile is lost.

So, how can clean the entire shapefile of the records I don't need?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:11:44.613

好的，我找到了解决方案。

1）进行查询删除不需要的元素：右键单击（RC）图层>属性>定义查询>查询生成器> ...>确定

2) RC on Layer > Open Attribute Table > table Options Button > Select All Records > Close the Table

3) RC on Layer > Data > Export Data > Select target folder > Save as type "Shape file" in the scroll-down menu

4) 将询问您是否要将新形状文件添加为当前项目中的图层 Y/N

5) 完成！

更多细节[在这里](http://barbareeduke.com/downloads/HOWTO%20Export%20data%20ArcMap9.pdf)：

# email - In phonegap 1.4.1 in iOS6 unable to attach xml file from to mail client

> ID：13868107
> 
> 赞同：1
> 
> 时间：2012-12-13T20:40:12.827
> 
> 标签：email, cordova, attachment

to get help , I followed this post [http://www.thoughtsonmobile.com/category/development/crossplattform-app-development](http://www.thoughtsonmobile.com/category/development/crossplattform-app-development)

My objective is to use PhoneGap 1.4.1 plugin in iOS to write to an XML file and send that xml file via attachment in mail client

I am able to create an empty XML file in the path **/var/mobile/Applications/D7558E05-1345-443E-A2E6-.../Document/readme.xml** which I verified under Iexplorer to be under the Documents folder

I followed the steps in the mentioned site, exactly, but there is one confusion on how to pass the path to the Phonegap.exec command.. Should I pass the complete path "/var/mobile/Applications/D7558E05-1345-443E-A2E6-.../Document/readme.xml"

should I pass as follows

**window.plugins.emailComposer.showEmailComposerWithCB(null, "subject", "body", "hello@gmail.com","ccsupport@test.com","bccsupport@test.com", false,XMLFilePath); where var XMLFilePath = window.rootFS.fullPath + "/" + "readme.xml"; or should it be just XMLFilePath = window.rootFS.fullPath**

As mentioned in the site, in the EmailComposer.js I added
**if(attachment) args.attachment = attachment;** and checked, by alerting if the args.attachment is getting the path, its coming as /var/mobile/Applications/D7558E05-1345-443E-A2E6-.../Document/readme.xml

I added snippet as per the site, "NSString* attachmentPath = [options valueForKey...."to the EmailComposer.m code from "https://github.com/phonegap/phonegap-plugins/blob/master/iOS/EmailComposer/EmailComposer.m" which I am using

When I run the code I am NOT getting the attachment, am oly getting the subject, to and body

Please help

It would be very useful if you could upload a sample, complete xcode project for mail attachment.

# html - Display CDATA as text in html

> ID：13868114
> 
> 赞同：0
> 
> 时间：2012-12-13T20:40:34.907
> 
> 标签：html

How can I display `<!CDATA[` as text in an html document? I tried wrapping it in `<pre>` tags but that didn't work.

```
<! DOCTYPE html >
<html>
<body>
    <div>This should show <pre><!CDATA[</pre> when the page renders</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T20:44:47.873

浏览器不支持`text/html`文档中的 CDATA 标记。改用字符引用（`&lt;`,`&amp;`等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T22:05:56.013

正如其他人所写，您应该转义“<” 作为`&lt;`. HTML 标记喜欢*或*`pre`不`code`改变内容的解析方式，使用“<” 作为标记显着。您可以在此处使用例如标记，因为内容是计算机代码，并且此标记可能有一些优势，但这是一个不同的问题。示例：。*`code``<code>&lt;!CDATA[</code>`*

 *但是，有一个半秘密的标记：`<xmp><!CDATA[</xmp>`. 在一个`xmp`元素中，一切都是字面意思；仅识别此元素的结束标记。这种标记被许多人认为是非常过时的，并且已经从 HTML 规范中删除，但它实际上仍然有效。*

# windows-8 - XAML WebView 的操作事件是否“可捕获”？

> ID：13868118
> 
> 赞同：0
> 
> 时间：2012-12-13T20:40:49.307
> 
> 标签：windows-8, webview, winrt-xaml

我看到了 WebView 控件的操作事件，但我注意到似乎没有触发。是否可以处理 WebView 控件的操作事件？

我有 ManipulationMode="All"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:04:52.263

不，他们不是。至少不是 WebView 控件的一部分。它必须在 InvokeScript 可能是解决方案的页面的 JavaScript 中完成。但这也很棘手。

参考：[如何在 WebView 中使用 InvokeScript 处理 JS 事件](https://stackoverflow.com/questions/13869690/how-to-handle-a-js-event-with-invokescript-in-a-webview#comment19100558_13869690)

# php - The PHP function filemtime returning a negative value or very large value

> ID：13868119
> 
> 赞同：11
> 
> 时间：2012-12-13T20:40:54.543
> 
> 标签：php, filemtime

I am creating a WordPress plugin and can see that on some servers, for certain files, the [`stat`](http://php.net/stat) (or [`filemtime`](http://php.net/filemtime)) returning invalid *mtime* value. In some cases it is a negative value or a very large value (more than 3 billion).

In FTP I can see that the timestamp is correct though.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T10:13:36.140

当您在任何 PHP 时间戳中获得负数时，它只是 Unix 纪元之前的秒数，这不限于`filemtime`

**示例 A**

```
echo strtotime("1950-1-1"); // Outputs  -631155600
                                        ^------- negative value 
```

**示例 B**

输出负值并不意味着如果您尝试无法正确格式化它

```
echo date("Y-m-d",-631155600); // Output  1950-01-01 
```

**最后**

`FTP I can see that the timestamp is correct though`

您的 FTP 应用程序绝对不是 PHP 并且有自己的内部日期系统 .. 它的日期系统可能不会在时间戳中使用负值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:38:13.823

为 filemtime 返回负值的文件有多大？

它在这里说： http: [//php.net/manual/en/function.stat.php](http://php.net/manual/en/function.stat.php) “由于 PHP 的整数类型是有符号的并且许多平台使用 32 位整数，因此某些文件系统函数可能会为大于 2GB 的文件返回意外结果。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T20:44:11.227

如果我理解正确，那么您正在寻找一个非常大的值 - 这是一个 Unix 时间戳。

你尝试过这样的事情吗？

```
date ("F d Y H:i:s.", filemtime($filename)) 
```

`filemtime`返回自 1970 年 1 月 1 日以来经过的秒数，这确实应该是一个非常大的值；您可以使用上面的示例将这些秒数转换为人类可读的内容。

另一方面，如果您意识到这一点并且您认为您的大值仍然是错误的，那么发布该值的示例以及您期望的日期可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T17:38:18.187

unix 时间戳的当前值约为 1,356,197,722，因此十亿是合理的。

虽然这不太可能是问题，但值得了解[http://php.net/manual/en/function.clearstatcache.php](http://php.net/manual/en/function.clearstatcache.php)并在调用 filemtime() 之前使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T15:10:40.327

当您的服务器运行 ntp 守护程序时，这可能是在请求中设置时间的结果。这也发生在 apache 日志和其他依赖于 unix 系统功能的东西上。

# wcf - WCF Security Using Windows Authentication

> ID：13868120
> 
> 赞同：2
> 
> 时间：2012-12-13T20:40:56.160
> 
> 标签：wcf, wcf-security

What is the correct WCF security implementation/configuration that allows:

*   Using existing Windows accounts to authenticate with the service
*   Allow adding of a Service Reference from another project without providing credentials
*   Limiting the users that can call the service

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:17:50.163

**使用现有 Windows 帐户对服务进行身份验证**

为此，您应该将`transport clientCredentialType`绑定配置的属性设置为`Windows`.

```
<bindings>
   <wsHttpBinding>
      <binding>
         <security mode="Message">
            <transport clientCredentialType="Windows" />
         </security>
      </binding>
   </wsHttpBinding>
</bindings> 
```

**允许在不提供凭据的情况下从另一个项目添加服务引用**

为此，请`mex`为您的服务端点创建一个端点。

```
<services>
   <service name="Services.SampleService" behaviorConfiguration="wsDefaultBehavior">
      <endpoint address="mex"  binding="mexHttpBinding" contract="IMetadataExchange" />
   </service>
</services> 
```

**限制可以调用服务的用户**

这个涉及更多一点。我发现基于每个用户保护服务的方式需要自定义授权策略。执行授权的类必须实现该`IAuthorizationPolicy`接口。这是我的授权类的完整代码：

```
namespace Services.SampleService.Authorization
{
    /// <summary>
    /// Handles the default authorization for access to the service
    /// <para>Works in conjunction with the AuthorizedUsersDefault setting</para>
    /// </summary>
    public class DefaultAuthorization: IAuthorizationPolicy
    {

        string _Id;

        public DefaultAuthorization()
        {
            this._Id = Guid.NewGuid().ToString();
        }

        public bool Evaluate(EvaluationContext evaluationContext, ref object state)
        {
            bool isAuthorized = false;
            try
            {
                //get the identity of the authenticated user
                IIdentity userIdentity = ((IIdentity)((System.Collections.Generic.List<System.Security.Principal.IIdentity>)evaluationContext.Properties["Identities"])[0]);
                //verify that the user is authorized to access the service
                isAuthorized = Properties.Settings.Default.AuthorizedUsersDefault.Contains(userIdentity.Name, StringComparison.OrdinalIgnoreCase);
                if (isAuthorized)
                {
                    //add the authorized identity to the current context
                    GenericPrincipal principal = new GenericPrincipal(userIdentity, null);
                    evaluationContext.Properties["Principal"] = principal;
                }
            }
            catch (Exception e)
            {
                Logging.Log(Severity.Error, "There was an error authorizing a user", e);
                isAuthorized = false;
            }
            return isAuthorized;
        }

        public ClaimSet Issuer
        {
            get { return ClaimSet.System; }
        }

        public string Id
        {
            get { return this._Id; }
        }
    }
} 
```

“魔法”发生在`Evaluate`方法中。在我的情况下，授权用户列表保存在名为 的 Properties.Settings 变量（类型`ArrayOfString`）中`AuthorizedUsersDefault`。这样，我可以维护用户列表，而无需重新部署整个项目。

然后，要在每个服务的基础上使用此授权策略，请在`ServiceBehaviors`节点中设置以下内容：

```
<behaviors>
   <serviceBehaviors>
      <behavior name="wsDefaultBehavior">
         <serviceAuthorization principalPermissionMode="Custom">
        <authorizationPolicies>
           <add policyType="Services.SampleService.Authorization.DefaultAuthorization, MyAssemblyName" />
        </authorizationPolicies>
     </serviceAuthorization>
      </behavior>
   </serviceBehaviors>
</behaviors> 
```

# mysql - Cannot create MySQL table with "if not exists"

> ID：13868121
> 
> 赞同：1
> 
> 时间：2012-12-13T20:41:00.923
> 
> 标签：mysql, perl

Here is my code:

`$STH1000=$DBH->query("CREATE TABLE IF NOT EXISTS '".$dept.$year."' ( `ID` INT( 255 ) NOT NULL AUTO_INCREMENT , `URL` VARCHAR( 255 ) NOT NULL , PRIMARY KEY ( `ID` )) ") or die "Could not prepare sql statement";`

All I'm trying to do is create a table if $dept$year doesn't exist but the way I have it now, it throws errors.

I believe there is a way to create a table is mysql returns an error on a select but I'm not sure how to do that either. Any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T20:52:33.247

```
$STH1000=$DBH->query("CREATE TABLE IF NOT EXISTS ".$dept.$year." ( `ID` INT( 255 ) NOT NULL AUTO_INCREMENT , `URL` VARCHAR( 255 ) NOT NULL , PRIMARY KEY ( `ID` )) ") or die "Could not prepare sql statement"; 
```

表名不得关闭`''`（但我可以选择关闭````）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:53:50.597

`'".$dept.$year."'`只需从as中删除引号`".$dept.$year."`

您的查询将是这样的

```
$STH1000=$DBH->query("CREATE TABLE IF NOT EXISTS ".$dept.$year." ( `ID` INT( 255 ) NOT NULL AUTO_INCREMENT , `URL` VARCHAR( 255 ) NOT NULL , PRIMARY KEY ( `ID` )) ") or die "Could not prepare sql statement"; 
```

# php - 使用 php 变量的 preg_match 问题

> ID：13868125
> 
> 赞同：2
> 
> 时间：2012-12-13T20:41:03.937
> 
> 标签：php, regex

我有一个变量要在 preg_match 中使用，并结合一些正则表达式：

```
$string = "cheese-123-asdf";
$find = "cheese";
if(preg_match("/$find-/d.*/", $string)) {
    echo "matched";
} 
```

在我的模式中，我尝试使用奶酪进行匹配，然后是 - 和 1 位数字，然后是其他任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T21:17:12.993

1.  更改`/d`为`\d`
2.  没有必要使用`.*`
3.  如果您的字符串是由用户定义的（或可能包含一些字符（例如：`/`或`*`或`...`）），这可能会导致您的匹配出现问题。

代码：

```
<?php
$string = "cheese-123-asdf";
$find = "cheese";
if(preg_match("/$find-\d/", $string)) 
{
    echo "matched";
}
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T20:42:09.177

`/`您输入错误`\`：

```
if(preg_match("/$find-\d.*/", $string)) { 
```

这`.*`也不是真正必要的，因为模式将匹配任何一种方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T20:42:13.390

对于数字，它是`\d`

```
if(preg_match("/$find-\d.*/", $string)) { 
```

# c# - 变量名“@VarName”已声明问题

> ID：13868128
> 
> 赞同：1
> 
> 时间：2012-12-13T20:41:12.530
> 
> 标签：c#, asp.net

我根据下拉列表中的选择将多个项目插入表中。当我从下拉列表中选择一个项目时，一切正常，但是当我选择多个项目时，我收到此错误

```
The variable name '@CompName' has already been declared. Variable names must be unique within a query batch or stored procedure. 
```

我究竟做错了什么？谢谢这是我的代码

```
protected void DV_Test_ItemInserting(object sender, DetailsViewInsertEventArgs e)
    {
        foreach (ListItem listItem in cblCustomerList.Items)
        {
            if (listItem.Selected)
            {
                string Name= listItem.Value;
                sqlcon.Open();
                string CompName= ((TextBox)DV_Test.FindControl("txtCompName")).Text.ToString();
                string Num = ((TextBox)DV_Test.FindControl("txtNum")).Text.ToString();
                SqlCommand cmd = new SqlCommand("select CompNamefrom MyTable where CompName= '" + CompName+ "' and Num = '" + Num + "' and Name= '" + Name+ "'    ", sqlcon);
                SqlDataReader dr = cmd.ExecuteReader();
                if (dr.Read())
                {
                    lblmsg.Text = "Not Valid";
                }
                else
                {
                    dr.Close();

                    sqlcmd.CommandText = "INSERT INTO MyTable(CompName, Num, Name) VALUES(@CompName, @Num, @Name)";
                    sqlcmd.Parameters.Add("@CompName", SqlDbType.VarChar).Value = CompName;
                    sqlcmd.Parameters.Add("@Num", SqlDbType.VarChar).Value = Num;
                    sqlcmd.Connection = sqlcon;                 
                    sqlcmd.ExecuteNonQuery();
                    DV_Test.ChangeMode(DetailsViewMode.Insert);
                    sqlcon.Close();
                }
                sqlcon.Close();               
            }

         }
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T20:45:52.490

每次通过循环时，您都在添加参数`@CompName`和查询。`@Num`

您需要将调用移到`Add`循环外部并使用以下内容更新它们：

```
sqlcmd.Parameters["@CompName"].Value = CompName;
sqlcmd.Parameters["@Num"].Value = Num; 
```

所以你的代码变成：

```
sqlcmd.CommandText = "INSERT INTO MyTable(CompName, Num, Name) VALUES(@CompName, @Num, @Name)";
sqlcmd.Parameters.Add("@CompName", SqlDbType.VarChar);
sqlcmd.Parameters.Add("@Num", SqlDbType.VarChar);

foreach (ListItem listItem in cblCustomerList.Items)
{
    if (....)
    {
        ....
    }
    else
    {
        dr.Close();

        sqlcmd.Parameters["@CompName"].Value = CompName;
        sqlcmd.Parameters["@Num"].Value = Num;
        sqlcmd.Connection = sqlcon;                 
        sqlcmd.ExecuteNonQuery();
        DV_Test.ChangeMode(DetailsViewMode.Insert);
        sqlcon.Close();
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-25T09:43:18.433

`sqlcmd.Parameters.Clear();`在最后添加。这样每个参数在每个循环结束时都不会存在。

例子：

```
// ...
sqlcmd.CommandText = "INSERT INTO MyTable(CompName, Num, Name) VALUES(@CompName, @Num, @Name)";
                    sqlcmd.Parameters.Add("@CompName", SqlDbType.VarChar).Value = CompName;
                    sqlcmd.Parameters.Add("@Num", SqlDbType.VarChar).Value = Num;
                    sqlcmd.Connection = sqlcon;                 
                    sqlcmd.ExecuteNonQuery();
                    DV_Test.ChangeMode(DetailsViewMode.Insert);
                    sqlcon.Close();
                    sqlcmd.Parameters.Clear();
//... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T20:48:59.933

我在这里的假设是因为您已经`sqlcmd`在循环范围之外声明了；因此，当您对其进行迭代时，您可能会多次添加相同的参数名称。

请修复这一行： `SqlCommand cmd = new SqlCommand("select CompNamefrom MyTable where CompName= '" + CompName+ "' and Num = '" + Num + "' and Name= '" + Name+ "' ", sqlcon);` 因为它正在等待 SQL 注入发生。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-27T11:46:55.090

只需添加以下内容：

```
SqlCmd.Parameters.Clear(); 
```

在您的代码中，在添加参数之前。它将清除已添加的参数列表并将您的参数视为新参数。

# html - Targeting Different Screen Widths with Multiple CSS files

> ID：13868129
> 
> 赞同：3
> 
> 时间：2012-12-13T20:41:13.780
> 
> 标签：html, css, mobile, media-queries

Here are links to my CSS files:

```
 <link  rel="stylesheet" href="css/mobile_css_320.css" media="screen and (min-device-width: 0px) and (max-device-width: 320px)" />
        <link  rel="stylesheet" href="css/mobile_css_480.css" media="screen and (min-device-width: 321px) and (max-device-width: 480px)" />
        <link  rel="stylesheet" href="css/mobile_css_640.css" media="screen and (min-device-width: 481px) and (max-device-width: 640px)" />
        <link  rel="stylesheet" href="css/mobile_css_720.css" media="screen and (min-device-width: 641px) and (max-device-width: 720px)" />
        <link  rel="stylesheet" href="css/styles.css" media="screen, projection" /> 
```

Here is my link in styles.css (for Web Browsers on PC's)

```
#form_wrapper {
      width: 320px;
      margin: 0 auto;
} 
```

In all other CSS files (targeting Mobile Devices), I do this:

```
#form_wrapper {
      width: 92%;
      margin: 0 auto;
} 
```

However, in all Mobile devices, it goes straight to the last CSS file, styles.css and I get that div 320px on all devices no matter what.

I have only tested on Google's Chrome for Android on mobile devices as well as the stock Android webkit browser (for Android 4.0+). Is my code handling wrong?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T20:44:00.547

它可能会加载所有相关的样式，并且由于最后一个是最通用的（移动设备将匹配媒体屏幕），它会覆盖之前样式表中定义的所有样式。在特异性并列的情况下，CSS 是最后的胜利。

尝试将您的通用样式表放在首位，或者直接在样式表本身中使用媒体查询将它们组合起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:47:12.023

CSS 特殊性指出，如果两个规则相同，例如

```
.text { color: blue; }
.text { color: red; } 
```

然后最后一个总是占上风（在这种情况下，任何具有类的东西`text`都会有红色文本）

因此，由于您的最后一个样式表没有附加媒体查询，因此它始终在加载，并且始终覆盖您在其之前的移动样式表中放置的任何样式。

为了解决这个问题，您可以：

1）先放桌面样式表

2) 在最后一个样式表上使用最小宽度媒体查询，例如

```
<link  rel="stylesheet" href="css/styles.css" media="media="screen and (min-device-width: 720px)" /> 
```

# javascript - Parse area code out of phone number

> ID：13868130
> 
> 赞同：1
> 
> 时间：2012-12-13T20:41:16.973
> 
> 标签：javascript, regex, string

I have a list of phone numbers which are formatted in multiple ways such as: `(212)-555-1234` or `212-555-1234` or `2125551234`.

Using JavaScript, what would be the best way to extract only the area code out of these strings?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T20:45:04.273

首先，删除所有不是数字的内容以获得纯数字。然后，通过切片获取前三位：

```
return myString.replace(/\D/g,'').substr(0, 3); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T20:45:28.733

获取前 3 个连续数字...

```
/[0-9]{3}/.exec("(212)-555-1234")[0] 
```

样本（[小提琴](http://jsfiddle.net/XCpZW/)）：

```
console.log(/[0-9]{3}/.exec("(212)-555-1234")[0]); // 212
console.log(/[0-9]{3}/.exec("212-555-1234")[0]); // 212
console.log(/[0-9]{3}/.exec("2125551234")[0]);​ // 212 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T20:45:01.697

取 10 位数字的前 3 位数字，或以 1 开头的 11 位数字的 1 后的前 3 位数字。这假设您的域是美国电话号码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-01T10:12:25.853

你也可以使用我的图书馆。

[https://github.com/Gilshalem/phoneparser](https://github.com/Gilshallem/phoneparser)

**例子**

```
parsePhone("12025550104");
result: { countryCode:1, areaCode:202, number:5550104, countryISOCode:"US" } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T20:43:44.983

正则表达式`'^\(*(\d{3})'`应该这样做。从比赛中获得第一组。

这里`^`将从头开始匹配，`\d{3}`将匹配 3 个数字。`\(*`将匹配可选的起始括号。**您无需关心区号后的下一个数字或符号。**

# jquery - Fancybox: iframe doesn't work

> ID：13868132
> 
> 赞同：15
> 
> 时间：2012-12-13T20:41:24.000
> 
> 标签：jquery, fancybox

Very simple test.html page:

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script type="text/javascript" src="fancybox/jquery.fancybox.pack.js"></script>

    <link rel="stylesheet" href="fancybox/jquery.fancybox.css" type="text/css" media="screen"/>

    <script type="text/javascript">
        $(document).ready(function () {
            /* This is basic - uses default settings */

            $("a.iframe").fancybox();

        });
    </script>
</head>
<body>
<a class="iframe" href="http://www.google.be/">This goes to iframe</a>
</body>
</html> 
```

Yet, fancybox just won't work... The references to the js file and css are correct. JQuery functions normally. But clicking the link acts just a normal link. Ie: I get redirect to google.be. FYI: It's not just with google, it's with every single URL I put there. What am I missing here?

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-13T21:08:30.573

我成功地将锚上的*课程*`fancybox fancybox.iframe`更改为.

```
<a class="fancybox fancybox.iframe" href="http://www.google.be/">This goes to iframe</a>
<script type="text/javascript">
    $(document).ready(function() {

        $('a.fancybox').fancybox();

    });
</script> 
```

不知道为什么会这样，但它对我有用。

**编辑**：还需要更新到最新版本的 jQuery

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-13T22:34:02.077

就像@imjared 说的解释一样：

> 不知道为什么会这样，但它对我有用。

由于您正在尝试打开外部页面，因此合乎逻辑的步骤是以`iframe`模式打开 fancybox，但是 fancybox 无法知道它必须将内容包装在`iframe`标签中。

有三种方法可以告诉 fancybox 这样做：

1）。添加`type: "iframe"`到您的自定义脚本中，例如：

```
$('a.fancybox').fancybox({
   type: "iframe"
}); 
```

2）。将属性添加`data-fancybox-type="iframe"`到您的`<a>`锚标记，例如：

```
<a class="iframe" href="http://www.google.be/" data-fancybox-type="iframe">This goes to iframe</a> 
```

不过它需要 HTML5 `DOCTYPE`。

3）。将特殊类添加`fancybox.iframe`到您的`<a>`锚标记中，如接受的答案中所示。

fancybox 脚本能够评估上述任何状态，但您应该至少选择其中一个以使其工作（您可以使用多个或一起使用，它会工作，但它是多余的）

**注意**：这仅对 fancybox v2.x+ 有效（...并且需要 jQuery v1.6 或更高版本）

顺便说一句：由于安全限制，某些网站无法在*google*或*facebook*`iframe`中打开。您应该始终考虑使用 iframe 和 ajax 内容的**[同源策略。](http://en.wikipedia.org/wiki/Same_origin_policy)**

 *** * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-18T16:30:42.847

感谢@JFK的说明，这对我有用：

```
<!DOCTYPE HTML>
<html>
<head>
    <!-- Add jQuery library -->
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

    <!-- Add mousewheel plugin (this is optional) -->
    <script type="text/javascript" src="/fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>

    <!-- Add fancyBox -->
    <link rel="stylesheet" href="/fancybox/source/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
    <script type="text/javascript" src="/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

    <!-- Optionally add helpers - button, thumbnail and/or media -->
    <link rel="stylesheet" href="/fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen" />
    <script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
    <script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.6"></script>

    <link rel="stylesheet" href="/fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen" />
    <script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>

    <script type="text/javascript">
        $('a.fancybox').fancybox({
            type: "iframe"
        });
    </script>

</head>
<body>

<a class="fancybox" href="http://www.w3schools.com/" data-fancybox-type="iframe">This goes to iframe</a>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-20T11:41:49.750

似乎跨域链接没有打开。我正在使用本地主机，并且`href="http://localhost/example/?page_id=7896"`仅使用有效。如果我写`href="http://google.com"`它不起作用。如果您可以通过将您的网站放在域上并使用`href="http://example.com?page_id=7896"`

在 html 中：

```
<a id="iframe" href="http://localhost/example/?page_id=7896">Link</a> 
```

在js中：

```
$("#iframe").fancybox({
        'type' : 'iframe'
}); 
```**

# android - 如何在 Android SDK 中编辑或生成 PDF

> ID：13868133
> 
> 赞同：2
> 
> 时间：2012-12-13T20:41:28.123
> 
> 标签：android, html, pdf, android-droidtext

我在一个应用程序中工作，我需要哪个应用程序可以生成一个 PDF 文件，其中应用程序数据保存在 XML 中。我需要以两种方式之一来制作它，但我不知道如何，方法是：

*   从现有 HTML 生成 PDF
*   编辑现有 PDF 并添加文本。

我不知道 iText 或 droidText 如何帮助我。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:31:10.690

看看这篇 StackOverflow 帖子怎么样？

[Android - 如何将 html 转换为 pdf？](https://stackoverflow.com/questions/8669083/android-how-to-convert-html-to-pdf)

我猜你的问题需要类似的，如果不完全相同的方法。

（顺便说一句，对“从 HTML android 生成 PDF”执行 Google 搜索会产生 305,000,000 个其他结果，其中许多似乎是您问题的合理答案......）

# node.js - 将多个身份验证与护照、快递和 NodeJS 相结合

> ID：13868137
> 
> 赞同：0
> 
> 时间：2012-12-13T20:41:35.230
> 
> 标签：node.js, passport.js

我正在尝试将 a`LinkedInStrategy`与现有的`LocalStrategy`（用户已经过身份验证）结合起来。

这是来自护照文档的示例：

```
schema.statics.passportLinkedInStrategy = function(token, tokenSecret, profile, done) {
    // asynchronous verification, for effect...
    process.nextTick(function () {
        // To keep the example simple, the user's LinkedIn profile is returned to
        // represent the logged-in user.  In a typical application, you would want
        // to associate the LinkedIn account with a user record in your database,
        // and return that user instead.
        return done(null, profile);
    });
}; 
```

问题是我无权`req.user`检查此回调中的现有会话。

关于我可以/应该怎么做的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T06:27:24.000

[请参阅指南的授权](http://passportjs.org/guide/authorize/)章节中标题为“验证回调中的关联”的部分。

您可以设置一个`passReqToCallback`选项，它将`req`作为第一个参数传递给验证回调。

# html - 在 UTF-8 页面中显示 latin 1 字符

> ID：13868140
> 
> 赞同：3
> 
> 时间：2012-12-13T20:41:57.233
> 
> 标签：html, utf-8, character-encoding

这是一个 test.html 文件，用我的文本编辑器以 latin 1 格式保存：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
è
</body>
</html> 
```

如果在 chrome 中查看文件，è 字符将显示为问号。我不明白为什么：è 是 latin 1 的一部分，而 latin 1 应该与 utf-8 的（子集）兼容，因此字符 è 的代码在 latin 1 和 utf-8 中不应该相同?

如果我将字符集更改为 ISO-8859-1，当然一切都很好。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T20:50:04.850

您将字符集/代码页的概念与编码混淆了。UTF-8 和 ISO-8859-1 (Latin-1) 是编码，它们是如何以字节表示字符的系统，而不是您选择的字符列表。

您将文件保存为 ISO-8859-1，因此您的文件具有`0xE8`. 你告诉浏览器文件是用 UTF-8 编码的，所以浏览器会尝试根据 UTF-8 的规则来解码你的文件。并且`0xE8`在 UTF-8 中无效。

当您告诉浏览器在 ISO-8859-1 中对其进行解码时，它会起作用，因为它在 ISO-8859-1`0xE8`中有效，并且根据 的值从 ISO-8859-1 的代码页中显示一个字符`0xE8`。

此外，ISO-8859-1 是*unicode*（utf 编码的“代码页”）的子集，而不是 UTF-8。这意味着 ISO-8859-1 代码页中的前 256 个字符与 unicode 中的前 256 个字符相同。

还有更多。浏览器实际上从不使用 ISO-8859-1 来解码您的页面，而是秘密地使用 Windows-1252。这也已在[HTML-5 草案中指定](http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html#character-encodings-0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-25T01:46:42.640

如果将文件保存为 Latin 1，则编码为 UTF-8 的 charset 属性声明不正确。您必须以 charset 属性声明的编码保存文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T20:45:28.607

128-255 范围内的 Latin-1 字符在 UTF-8 上下文中无效。尽管它们确实共享相同的字符代码，但在 UTF-8 中它们的表示方式不同。例如，`è`在 UTF-8 中实际上是`Ã¨`. `0xE8`不是 UTF-8 字符串中的有效字符，除非它后面跟着`\x80`to`\xBF`范围内的两个字符，因此您会得到替换字符。

# c# - 如何配置结构映射以提供具体类型的不同配置实例

> ID：13868141
> 
> 赞同：3
> 
> 时间：2012-12-13T20:41:59.223
> 
> 标签：c#, dependency-injection, ioc-container, structuremap

我如何使用结构图给我配置两种不同可能方式之一的相同具体类型？例如，我有一个类配置为在一个实例中侦听用户队列，但在另一个实例中配置为设施队列。关于对象的其他一切都是一样的。

我创建对象以在构造函数中接受枚举，并且基于枚举值，该对象将侦听设施队列或用户队列。那么如何配置结构映射以将两个不同配置的相同类型的对象传递给我呢？该类实现了我的接口，所以它看起来像这样：

```
public class Configuration : IConfiguration {
    public Configuration(enum configType) {
        if (configType == enum.users) {
            /* code */
        } else if(configType == enum.facilities) {
            /* code */
        }
    }
} 
```

然后，我试图设置父类两次接受配置对象，一次为设施配置，一次为用户配置。我该怎么做？我想也许我可以根据两个类的实例名称来做到这一点，但我在文档或其他地方找不到任何可以解释如何做到这一点的东西。这是父类的样子：

```
public class Parent : IParent {
    public Parent(IConfiguration facilityConfig, IConfiguration userConfig) {
    }
} 
```

因此，在父类中，我希望“facilityConfig”成为传入 enum.facilities 的 Configuration 实例，而“userConfig”对象将是同一 Configuration 类的实例，但传入 enum.users。让我知道我的要求是否没有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T21:38:33.420

此问题的一种解决方案可能是拥有两个单独的配置类，而不是一个基于`enum`值进行切换的配置类。

您可以像这样定义`IConfiguration`实现：

```
public class UsersConfiguration : IConfiguration
{
    /* code for user */
}

public class FacilitiesConfiguration : IConfiguration
{
    /* code for facilities */
} 
```

然后，在您的容器配置中，您可以使用`Ctor`指定将构造函数参数解析为的类型：

```
var c = new StructureMap.Container();

c.Configure(x =>
    {
        x.For<IParent>().Use<Parent>()
            .Ctor<IConfiguration>("facilityConfig").Is<FacilitiesConfiguration>()
            .Ctor<IConfiguration>("userConfig").Is<UsersConfiguration>();
    }); 
```

完成此注册后，您可以创建一个`IParent`实例：

```
var p = c.GetInstance<IParent>(); 
```

并注意容器正确设置了两个依赖项。

* * *

**更新：**

如果有不同的实现`IConfiguration`是有问题的，那么你可以告诉 StructureMap 如何实例化 a `Parent`：

```
var c = new Container(x =>
{
    x.For<IParent>().UseSpecial(i => i.ConstructedBy(ConstructParent));
}); 
```

该`ConstructParent()`方法可以这样定义：

```
private static IParent ConstructParent()
{
    return new Parent(
                new Configuration(ConfigType.facilities),
                new Configuration(ConfigType.users));
} 
```

如果您愿意，您可以一次性完成所有操作：

```
var c = new Container(x =>
{
    x.For<IParent>().UseSpecial(i => i.ConstructedBy(
        _ => new Parent(
            new Configuration(ConfigType.facilities),
            new Configuration(ConfigType.users))));
}); 
```

但是，在这种情况下（*“除了这个配置值完全一样”*），我更愿意提取基类（可能是抽象类）中的通用定义，并有两个只定义不同配置值的派生类。

# c# - 动画精灵

> ID：13868149
> 
> 赞同：0
> 
> 时间：2012-12-13T20:42:20.200
> 
> 标签：c#, xna-4.0

我正在开发像“泡泡龙”这样的游戏。到目前为止，我已经完成了物理和碰撞检测。现在我想让我的英雄（矩形精灵）动画。如果有人可以解释简单动画角色的简单脚本或一些不错的动画链接，我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:51:20.520

XNA 文档包括一整篇关于[动画 Sprite](http://msdn.microsoft.com/en-us/library/bb203866.aspx)的文章。基本技术是使用一个`AnimatedTexture`类，该类包含在[动画精灵示例代码](http://msdn.microsoft.com/en-us/library/bb203866%28v=xnagamestudio.31%29.aspx)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:57:36.077

高级想法是使用图形 API 将纹理加载到内存中。由于您使用的是 C#，这很可能是通过 XNA 完成的。

您已加载的此纹理包含所需的每一帧动画，并且可能跨越多个纹理。当你去渲染你的'sprite'对象时，你向XNA API传递你想要使用的纹理，以及围绕你想要在该纹理中的特定动画帧的源矩形坐标。

由您来管理此过程。我创建了组合这些源矩形并存储每个精灵具有的每个特定动画的元数据的工具；比如哪个矩形，每帧的持续时间等等。

# java - 在 Swing 中做一个非方形的游戏板

> ID：13868150
> 
> 赞同：1
> 
> 时间：2012-12-13T20:42:22.470
> 
> 标签：java, swing

我目前正在开发一款益智游戏，其中一款是一款名为 Sixpack 的游戏。这些碎片是三角形的，并组装成六边形，六边形组组装成菱形。它看起来像这样：

![六包板](../Images/4b0406cf2c44b7cd085ff8b81b2bcef1.png)

我的第一个想法是在你看到的那个图像上放一堆 jbuttons，这是我在 illustrator 中使用精确定位制作的。但是我想知道是否有其他任何人都可以想到的更好、更具可扩展性的方法，它使用一个摆动布局管理器。

# cocoa - RestKit 是否支持带宽限制？

> ID：13868152
> 
> 赞同：1
> 
> 时间：2012-12-13T20:42:27.627
> 
> 标签：cocoa, post, restkit, rate-limiting, bandwidth-throttling

我正在使用 RestKit 来发布大文件，它运行良好，占用了尽可能多的可用带宽。如何限制数据速率？我一次发送一个文件，因此无法进一步降低并发性。

我知道一个简单的方法——在发送文件之间等待。但是，这些文件很大，因此在很长一段时间内其他所有内容都缺乏带宽。关于如何限制上传单个文件时消耗的带宽的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:11:41.063

RestKit 0.2 使用 AFNetworking 处理网络请求。[它支持通过http://afnetworking.github.com/AFNetworking/Protocols/AFMultipartFormData.html#//api/name/throttleBandwidthWithPacketSize:delay](http://afnetworking.github.com/AFNetworking/Protocols/AFMultipartFormData.html#//api/name/throttleBandwidthWithPacketSize:delay)限制带宽：我自己没有尝试过，但你可以。请让我们知道结果！

但是话又说回来，如果您使用的是 0.10，您将很难快速切换到 0.2。但我认为这应该值得。

# sql-server - 使用 VBA 更新 Form 的 RecordSource 时在链接表中插入重复行

> ID：13868153
> 
> 赞同：3
> 
> 时间：2012-12-13T20:42:32.407
> 
> 标签：sql-server, vba, ms-access-2010

我正在对 Microsoft Access 2010 中的链接表应用程序进行一些维护工作，并遇到了这个小问题。该应用程序链接到 SQL Server 2008 数据库。该应用程序有一个主表单，允许用户选择公园代码和资源的组合，并弹出一个编辑表单以获取该特定组合的详细信息。如果数据库中不存在该组合，则应用程序会插入一条新记录，但问题是插入了 2 条记录。

这是问题代码的位置，当我需要在详细信息弹出表单中插入新记录时会调用它：

```
Private Sub New_Rec(unit_code As String, resource As String, sql As String)

   DoCmd.RunSQL ("INSERT INTO PARK_RESOURCES (unit_code, resource, sensitivity) VALUES " _
    & "('" & unit_code & "','" & resource & "','public')")

   'Force an explicit save
   'http://www.pcreview.co.uk/forums/update-cancelupdate-without-addnew-edit-t1150554.html
   If Me.Dirty Then
      Me.Dirty = False
   End If

   Me.RecordSource = sql
End Sub 
```

创建“新”记录会导致 2 条记录插入到 Recordset 中。在设置 RecordSource 之前或之后移动显式保存代码似乎并不重要。以任一顺序（并在任一顺序后停止）都会在数据库中插入 2 条新记录（通过在 SSMS 中查询来验证）。

当我设置 RecordSource 属性并逐步执行代码时，事件链看起来像：Me.RecordSource = sql --> Form_BeforeUpdate() --> Form_AfterUpdate() --> Form_After_Insert() --> Form_Current()。在更新前结束时不存在副本，但是当我到达更新后时，副本已经被插入。BeforeUpdate 和 AfterUpdate 之间会发生什么导致这种情况发生？

根据[MSDN，顺序是](http://msdn.microsoft.com/en-us/library/office/ff835397%28v=office.14%29.aspx)：BeforeInsert → BeforeUpdate → AfterUpdate → AfterInsert。他们还声明通过 Visual Basic 设置控件的值不会触发这些事件。但是当我在代码中更新 RecordSource 时，最后 3 个事件肯定会触发；BeforeInsert 是唯一一个不会停止单步执行的方法。

根据 Daniel Cook 的要求，这里是调用代码。

```
Private Sub Form_Load()
   On Error GoTo Err_Form_Load

   Me.KeyPreview = True
   If Not IsNull(Me.OpenArgs) Then
      ProcessOpenArgs (Me.OpenArgs)
      Me.lblHeader.Caption = Me.unit_code & ": Resource - " & Me.resource
   Else
      Me.lblHeader.Caption = "Information Needs"
   End If
   ... (error trapping)
End Sub 
```

和 ProcessOpenArgs 子（OpenArgs 设置为“公园；资源”）：

```
Private Sub ProcessOpenArgs(open_args As String)
   On Error GoTo Err_ProcessOpenArgs

   Dim Args() As String
   Args = Split(open_args, ";")

   Me.unit_code = Args(0)
   Me.resource = Args(1)

   'Check to see if there are records in the database for current unit/resource combo'
   Dim rs As DAO.Recordset
   Dim sql As String
   sql = "SELECT * FROM PARK_RESOURCES " & _
    "WHERE resource='" & Me.resource & "' AND unit_code='" & Me.unit_code & "'"
   Set rs = CurrentDb.OpenRecordset(sql, dbOpenDynaset, dbSeeChanges)

   'if there aren''t, create a new record'
   If (rs.RecordCount = 0) Then
      New_Rec Me.unit_code, Me.resource, sql
   Else 'go to the current listing'
      Me.RecordSource = sql
   End If

Exit_ProcessOpenArgs:
   Exit Sub
Err_ProcessOpenArgs:
   MsgBox Err.Number & Err.description
   Resume Exit_ProcessOpenArgs
End Sub 
```

我将继续梳理事件文档，作为最后的手段，我可​​能会完全发疯，只是将所有可能的事件粘贴到我的 VBA 代码中并逐步执行它们，但有谁知道可能发生什么导致重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:42:53.167

在您的`ProcessOpenArgs`, 该`If (rs.RecordCount = 0) Then`行可能是一个问题，除非您第一次使用`rs.MoveLast`- 请参阅[此处](http://msdn.microsoft.com/en-us/library/ff821452%28v=office.14%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T01:10:17.133

当我在这里设置`Me.unit_code`时`Me.unit`：

```
Private Sub ProcessOpenArgs(open_args As String)
   On Error GoTo Err_ProcessOpenArgs

   Dim Args() As String
   Args = Split(open_args, ";")

   Me.unit_code = Args(0)
   Me.resource = Args(1) 
```

该代码正在创建 1 条记录，然后`New_Rec`在数据库中插入第二条记录。当 Form 自动 Requeries after`Me.RecordSource = sql`时，它会将第一条记录（由 Me.xxx = yyyy 语句创建的`ProcessOpenArgs`也插入数据库，然后将两者都拉回 Form Recordset。这就是双插入的来源。

为了更正它，我将`Me.unit_code`和更改`Me.resource`为局部子程序变量`l_unit_code`，`l_resource`并在`ProcessOpenArgs`. 这解决了这个问题以及我遇到的第二个问题，即记录从一种资源类型渗入其他资源类型。

谢谢大家的协助！

# git - git http 推送失败

> ID：13868155
> 
> 赞同：4
> 
> 时间：2012-12-13T20:42:41.550
> 
> 标签：git, push

我正在尝试完成这项工作，但它不起作用。

当我推送到服务器时，我通常没有问题，但现在我不断得到这个：

```
git push origin master
Password for 'https://JZ0258213@111.23.15.321':
Fetching remote heads...
refs/
refs/tags/
refs/heads/
updating 'refs/heads/master'
from 0000000000000000000000000000000000000000
to   1c51a98a88f51fa3fe9ab527a6413f117fade432
sending 1468 objects
PUT 55113af6418f7w77c9a87b3b470c53a64e62e314 failed, aborting (22/403)
Updating remote server info
UNLOCK HTTP error 400
fatal: git-http-push failed 
```

当我尝试从服务器克隆文件或尝试使用任何其他命令时，它工作正常，只是“推送”命令不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:49:13.137

我找到了解决方案，我只需要使用'git gc'，当我再次推动它时它就起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-02T10:31:25.060

httpd 用户需要对所有 repo 文件的写入权限。最好的选择是 chown -R 所有文件给 httpd 用户。

# z3 - Z3 实数算术和数据类型理论整合得不是很好

> ID：13868156
> 
> 赞同：3
> 
> 时间：2012-12-13T20:42:44.273
> 
> 标签：z3

这与我之前在[Z3 SMT 2.0 与 Z3 py 实现](https://stackoverflow.com/questions/13826217/z3-smt-2-0-vs-z3-py-implementation)中提出的问题有关， 我实现了具有无穷大的正实数的完整代数，并且求解器行为不端。当注释的约束为约束提供实际解决方案时，我在这个简单的实例上变得未知。

```
# Data type declaration
MyR = Datatype('MyR')
MyR.declare('inf');
MyR.declare('num',('re',RealSort()))

MyR = MyR.create()
inf = MyR.inf
num  = MyR.num
re  = MyR.re

# Functions declaration
#sum 
def msum(a, b):
    return If(a == inf, a, If(b == inf, b, num(re(a) + re(b))))

#greater or equal 
def mgeq(a, b):
  return If(a == inf, True, If(b == inf, False, re(a) >= re(b)))

#greater than
def mgt(a, b):
  return If(a == inf, b!=inf, If(b == inf, False, re(a) > re(b)))

#multiplication  inf*0=0 inf*inf=inf  num*num normal
def mmul(a, b):
    return If(a == inf, If(b==num(0),b,a), If(b == inf, If(a==num(0),a,b), num(re(a)*re(b))))

s0,s1,s2 = Consts('s0 s1 s2', MyR)

# Constraints add to solver
constraints =[
  s2==mmul(s0,s1),
  s0!=inf,
  s1!=inf
]
#constraints =[s2==mmul(s0,s1),s0==num(1),s1==num(2)]

sol1= Solver()
sol1.add(constraints)

set_option(rational_to_decimal=True)

if sol1.check()==sat:
  m = sol1.model()
  print m
else:
  print sol1.check() 
```

我不知道这是令人惊讶还是意料之中。有没有办法让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T21:37:09.753

你的问题是非线性的。Z3 中新的（和完整的）非线性算术求解器 ( `nlsat`) 没有与代数数据类型等其他理论集成。见帖子：

*   [使用 Z3_solver_get_unsat_core 获取未饱和核心](https://stackoverflow.com/questions/13590129/getting-unsat-core-using-z3-solver-get-unsat-core)
*   [非线性算术和未解释的函数](https://stackoverflow.com/questions/10669503/non-linear-arithmetic-and-uninterpreted-functions)

这是当前版本的限制。未来的版本将解决这个问题。

同时，您可以通过使用不同的编码来解决此问题。如果您只使用实数算术和布尔值，问题将在`nlsat`. 一种可能性是编码`MyR`为 Python 对：Z3 布尔表达式和 Z3 实数表达式。

这是部分编码。我没有对所有运算符进行编码。该示例也可在[http://rise4fun.com/Z3Py/EJLq在线获得](http://rise4fun.com/Z3Py/EJLq)

```
from z3 import *

# Encoding MyR as pair (Z3 Boolean expression, Z3 Real expression)
# We use a class to be able to overload +, *, <, ==
class MyRClass:
    def __init__(self, inf, val):
        self.inf = inf
        self.val = val
    def __add__(self, other):
        other = _to_MyR(other)
        return MyRClass(Or(self.inf, other.inf), self.val + other.val)
    def __radd__(self, other):
        return self.__add__(other)
    def __mul__(self, other):
        other = _to_MyR(other)
        return MyRClass(Or(self.inf, other.inf), self.val * other.val)
    def __rmul(self, other):
        return self.__mul__(other)
    def __eq__(self, other):
        other = _to_MyR(other)
        return Or(And(self.inf, other.inf),
                  And(Not(self.inf), Not(other.inf), self.val == other.val))
    def __ne__(self, other):
        return Not(self.__eq__(other))

    def __lt__(self, other):
        other = _to_MyR(other)
        return And(Not(self.inf),
                   Or(other.inf, self.val < other.val))

def MyR(name):
    # A MyR variable is encoded as a pair of variables name.inf and name.var
    return MyRClass(Bool('%s.inf' % name), Real('%s.val' % name))

def MyRVal(v):
    return MyRClass(BoolVal(False), RealVal(v))

def Inf():
    return MyRClass(BoolVal(True), RealVal(0))

def _to_MyR(v):
    if isinstance(v, MyRClass):
        return v
    elif isinstance(v, ArithRef):
        return MyRClass(BoolVal(False), v)
    else:
        return MyRVal(v)

s0 = MyR('s0')
s1 = MyR('s1')
s2 = MyR('s2')

sol = Solver()
sol.add( s2 == s0*s1,
         s0 != Inf(),
         s1 != Inf(),
         s0 == s1,
         s2 == 2,
         )
print sol
print sol.check()
print sol.model() 
```

# groovy - 将配置应用于 gradle 构建脚本中的特定项目

> ID：13868177
> 
> 赞同：13
> 
> 时间：2012-12-13T20:43:58.407
> 
> 标签：groovy, gradle

我有一个包含 java 应用程序和 android 应用程序的 gradle 项目。

```
root/
  build.gradle
  settings.gradle
  java1/
  java2/ 
  android1/
  android2/
  java3/ 
```

等等

构建构建脚本的最佳实践是什么？我是一个完全的 gradle 新手，正在将项目从 maven 迁移到 gradle。

我想做点什么而不是

```
configure(subprojects) {} 
```

应用插件和其他特定的东西。

如

```
configure(java1, java2, java3) { // java specifics }
configure(android1, android2) { // android specifics } 
```

我可能是从错误的方式来解决这个问题的。

更明确地说，我只需要为 java 项目应用插件 java，为 android 项目应用 android 插件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-13T22:32:06.003

```
configure(subprojects.findAll {it.name == "java1" || it.name == "java2"}) { 
```

[在指南中的过滤部分下](https://docs.gradle.org/current/userguide/multi_project_builds.html#sub:project_filtering)

希望这可以帮助其他人。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-13T22:50:27.243

有多种方法，取决于你想要什么......一些例子：

```
// Configures just project java1
project(":java1") { ... }

// Configures projects java1 and java2
["java1","java2"].each { name ->
  project(":$name") { ... }
} 
```

您可以使用普通的 groovy 来查找/迭代所有项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-21T21:17:16.587

另外一个选项：

```
configure([ project(':sub1'), project(':sub2'), ... ]) {
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-29T01:28:44.587

最短和最简单的选择：

```
configure(subprojects.findAll()) {
   if (it.name.equals('MY_PROJECT')) {
     ...
   } else {
     ...
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-01T15:09:19.633

另一种方法...

在 settings.gradle 中，您确实可以像这样定义您的项目：

```
gradle.ext.javaProjects=[]
gradle.ext.androidProjects=[]

javaProject('java1')
javaProject('java2')
javaProject('java3')
androidProject('android1')
androidProject('android2')

def javaProject(String name) {
    gradle.ext.javaProjects.add(name)
    include ":$name"
}

def androidProject(String name) {
    gradle.ext.androidProjects.add(name)
    include ":$name"
} 
```

现在您可以在根 build.gradle 中引用它们：

```
def javaProjects = subprojects.findAll {gradle.ext.javaProjects.contains(it.name)};
def androidProjects = subprojects.findAll {gradle.ext.javaProjects.contains(it.name)};

configure(javaProjects) {
...
}
configure(androidProjects) {
...
} 
```

也许那是矫枉过正......但我通常在我的settings.gradle中有项目定义方法。例如，如果您想将所有 java 项目放在 java 文件夹下，您可以定义如下内容：

```
def javaProject(String name) {
    gradle.ext.javaProjects.add(name)
    include ":$name"
    project(":$name").projectDir = file('java/'+ name)
} 
```

# android - 我可以在发布我的应用程序时留下对 android.test.runner 的引用吗？

> ID：13868186
> 
> 赞同：1
> 
> 时间：2012-12-13T20:44:13.463
> 
> 标签：android, android-manifest, google-play, apk

在开发过程中，我在清单中添加了以下行：

```
<uses-library android:name="android.test.runner" /> 
```

可以像这样发送清单还是应该评论/删除这一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T20:49:50.620

如果它需要那个库也没关系，否则你可能想要添加：

```
android:required="false" 
```

# mono - 是否有任何用于 xUnit.net 的高级控制台测试运行器

> ID：13868187
> 
> 赞同：4
> 
> 时间：2012-12-13T20:44:16.963
> 
> 标签：mono, xunit.net

我正在为 xUnit.net 寻找一个基于控制台的高级测试运行器。要求是：

*   它应该能够列出所有已执行的测试
*   它应该能够列出程序集中的所有测试
*   您应该能够按命名空间、类名和方法名过滤测试
*   它应该与单声道一起使用
*   编译后自动重新执行测试会很好

你知道任何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-10T22:56:33.520

新的 AssemblyRunner 现在应该能够执行您的需求列表中的一些事情，例如列出测试

有关它的使用示例，请参见 github 上的示例。 [https://github.com/xunit/samples.xunit/blob/master/TestRunner/Program.cs](https://github.com/xunit/samples.xunit/blob/master/TestRunner/Program.cs)

现有的 xunit.runner.console 也可以使用特征过滤测试

# c# - 在 c# 中为不同的异常提供程序实现抽象工厂模式

> ID：13868191
> 
> 赞同：1
> 
> 时间：2012-12-13T20:44:27.507
> 
> 标签：c#, design-patterns, factory-pattern

我计划通过使用抽象工厂模式来解决特定问题。我成功实现了工厂模式，但无法将工厂模式扩展到抽象工厂

我有两个不同的地方可以存储异常详细信息

1.  文件系统
2.  数据库

我已经使用工厂模式从客户端抽象出对象创建细节

**界面**

```
public interface ILogException
{
    void LogException();
} 
```

**文件系统记录器**

```
public class FileExceptionLogger : ILogException
{
    public  void LogException()
    {
        Console.WriteLine("File Exception Logger");
    }
} 
```

**数据库系统记录器**

```
public class DBExceptionLogger : ILogException
{
    public  void LogException()
    {
        Console.WriteLine("DB Exception Logger");
    }
} 
```

**工厂实施**

```
public class ExceptionFactory
{
    const int i = 1;       
    public static ILogException GetFactory()
    {
        if (i == 1)
        {
            return new FileExceptionLogger();
        }
        else if (i == 2)
        {
            return new DBExceptionLogger();
        }
        else
        {
            return new ServiceExcetionLogger();
        }
    }
} 
```

我知道这不是最好的实现，但我计划改变它。

现在`FileSystemLogger`，`DatabaseLogger`它本身就是一个工厂，我想将以下实现分组`FileSystemLogger`，`DatabaseLogger`以便客户可以拥有`FileSystemLoggerFactory`和`DatabaseLoggerFactory`

**文件系统记录器**

1.  平面文件系统记录器
2.  XMLFileSystemLogger

**数据库记录器**

1.  SQLSERVER记录器
2.  甲骨文记录器

我应该如何继续定义`FileSystemLoggerFactory`and `DatabaseLoggerFactory`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:50:33.097

如果您愿意，可以将工厂方法设为通用方法：

```
public static ILogException GetFactory<T>() where T : ILogException
{
    return (ILogException)Activator.CreateInstance<T>();
} 
```

像这样称呼它：

```
ILogException logger = ExceptionFactory.GetFactory<FileExceptionLogger>(); 
```

您可能还想看看 NInject、Unity 等依赖注入库。这些可以简化此类问题，允许您集中逻辑，以便将哪些接口绑定到哪些实现。（即，您可以在应用程序或请求范围内绑定实现。）

# jquery - 在 jQuery UI 中向 Accordion 小部件动态添加和刷新元素

> ID：13868192
> 
> 赞同：18
> 
> 时间：2012-12-13T20:44:27.623
> 
> 标签：jquery, jquery-ui, accordion, jquery-ui-accordion

这里关于 SO 的[几个](https://stackoverflow.com/questions/3008243/jquery-ui-accordion-adding-rows-without-destroying-and-recreating)[问题引用了这个](https://stackoverflow.com/questions/5927365/jquery-accordion-with-dynamic-content)[开放的 jQuery UI 功能请求](http://bugs.jqueryui.com/ticket/4672)，以便能够从 Accordion 小部件动态添加/删除面板。票证本身已标记（已关闭功能：已修复），从[单元测试](https://github.com/petersendidit/jquery-ui/blob/3dd2ef0f367c7423f9f3d2e4faf71f0a7287c716/tests/unit/accordion/accordion_methods.js)和从他们的 Git 存储库中提取的信息来看，它似乎已在最新版本中实现。

但是，如果我尝试像他们在上面的单元测试中那样添加一个 div：

```
var element = $("#accordion");
$("#accordion").append("<h3>3</h3><div>3</div>");
$("#accordion").accordion("refresh"); 
```

我无法让它工作。

但是[这种方法](https://stackoverflow.com/questions/3008243/jquery-ui-accordion-adding-rows-without-destroying-and-recreating)有效：

```
$("#accordion").append("<h3>sec</h3<div>test</div>").accordion("destroy").accordion(); 
```

但我不想“破坏”手风琴，我只想附加（或预先添加）一个元素并刷新它。

查看我在 Chrome 的检查器中添加的 div 显示我添加的元素没有添加与手风琴其余部分相同的 CSS 样式：

![在此处输入图像描述](../Images/51817791935082e21c87344d94146add.png)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-23T18:59:22.203

unibasil 是正确的，jQuery UI 1.10.0 已经更新了[refresh](http://api.jqueryui.com/accordion/#method-refresh)方法现在允许这种行为。

这是关于更新的 1.10.0 变更[日志](http://jqueryui.com/upgrade-guide/1.10/#added-ability-to-add-remove-panels)说明。

> refresh 方法现在将识别已添加或删除的面板。这使手风琴与分析标记以查找更改的选项卡和其他小部件保持一致。

**设置**

```
<div class="questions">
    <div>
        <h3><a href="#">Question 1\. My First Question ?</a></h3>
        <div>
            First content<br />
        </div>
    </div>
</div>
<div>
    <button id="addAccordion">Add Accordion</button>
</div> 
```

**Javascript**

```
$('#addAccordion').click( function() {
    var newDiv = "<div><h3>Q2 New Question</h3><div>New Content</div></div>";
    $('.questions').append(newDiv)
    $('.questions').accordion("refresh");        
}); 
```

**例子**

**[jsFiddle](http://jsfiddle.net/a6rCu/57/)**展示了您可以即时添加新的手风琴，而不必破坏旧的手风琴。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-15T12:14:59.747

感[谢贾雷克](https://stackoverflow.com/questions/13868192/dynamically-adding-and-refreshing-elements-to-the-accordion-widget-in-jquery-ui/14487304#14487304)！就我而言，它是否可以在不包含 div 的情况下运行。div 导致创建下一个手风琴。

```
$('#addAccordion').click( function() {
  var newDiv = "<h3>Q2 New Question</h3><div>New Content</div>";
  $('.questions').append(newDiv)
  $('.questions').accordion("refresh");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T05:14:33.017

实际上讨论的行为包含在 jQuery UI 1.10.0（刚刚[发布](http://jqueryui.com/)）中，对我来说很好用。

# ruby-on-rails - 如何忽略路线中的术语？

> ID：13868207
> 
> 赞同：0
> 
> 时间：2012-12-13T20:45:20.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在创建一个应该有一个可选/忽略的最后一个术语的路线。

像这样：

`/product/12345/Dark-Knight-Rises # last term is just there for a nice URL`

通过阅读文档，我在想，我只能对最后一个术语进行通配符：

`match 'product/:uid/*full_name' => 'product#view', :via => [:get]`

那没有用。我确实让这个工作：

```
match 'product/:uid/:full_name'   => 'product#view', :via => [:get]
match 'product/:uid'              => 'product#view', :via => [:get] 
```

但是，好吧，这似乎应该**在一行中是可行的。**是的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:51:42.417

`match 'product/:uid(/:full_name)' => 'product#view', :via => [:get]`是你要找的

括号使 full_name 成为一个可选参数，您可以忽略它，因为您想要的只是一个漂亮的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:52:44.697

下面单行应该可以工作

```
match 'product/:uid/:full_name'   => 'product#view', :via => [:get] 
```

# objective-c - 尝试解压缩 zlib 数据时 Z_BUF_ERROR -5

> ID：13868211
> 
> 赞同：1
> 
> 时间：2012-12-13T20:45:31.553
> 
> 标签：objective-c, ios, zlib

我正在尝试使用来自[ObjectiveZlib](https://github.com/JeremyOT/ObjectiveZlib)示例代码的 dataByDecompressingData: 方法解压缩一些 zlib 数据，我有一些帮助将其转换为与 Objective-c 而不是 c++ 一起使用。下面的代码

```
- (NSData*) dataByDecompressingData:(NSData*)data{
    Byte* bytes = (Byte*)[data bytes];
    NSInteger len = [data length];
    NSMutableData *decompressedData = [[NSMutableData alloc] initWithCapacity:COMPRESSION_BLOCK];
    Byte* decompressedBytes = (Byte*) malloc(COMPRESSION_BLOCK);

    z_stream stream;
    int err;
    stream.zalloc = (alloc_func)0;
    stream.zfree = (free_func)0;
    stream.opaque = (voidpf)0;

    stream.next_in = bytes;
    err = inflateInit(&stream);
    CHECK_ERR(err, @"inflateInit");

    while (true) {
        stream.avail_in = len - stream.total_in;
        stream.next_out = decompressedBytes;
        stream.avail_out = COMPRESSION_BLOCK;
        err = inflate(&stream, Z_NO_FLUSH);
        [decompressedData appendBytes:decompressedBytes length:(stream.total_out-[decompressedData length])];
        if(err == Z_STREAM_END)
            break;
        CHECK_ERR(err, @"inflate");
    }

    err = inflateEnd(&stream);
    CHECK_ERR(err, @"inflateEnd");

    free(decompressedBytes);
    return decompressedData;
} 
```

[一旦运行，我就会得到 Z_BUF_ERROR，我在这里](http://allseeing-i.lighthouseapp.com/projects/27881/tickets/91-asidatadecompressor-does-not-handle-z_buf_error)读过，我知道它指的是 ASIHTTPReqest，但我认为可能正在使用 xcode 提供的相同 zlib 类进行解压缩，他们说这是缓冲区大小的错误不是能够处理由于空间而导致的文件解压缩。

我不完全确定这是否正确，他们提供了两种解决方案来修复，第一种是拆分数据包……这不是 imo 的选择，另一件事是增加缓冲区大小……我是想知道A，我怎么能这样做？B、有没有更好的第三种选择？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:09:55.813

请参考[http://www.zlib.net/zlib_how.html](http://www.zlib.net/zlib_how.html)

> Z_BUF_ERROR 将在下面进一步解释，但只要说这只是表明 inflate() 不能消耗更多输入或产生更多输出就足够了。可以使用更多输出空间或更多可用输入再次调用 inflate()，这将在此代码中。

我看到的一些错误：

1/每次你设置`stream.next_in`，你也应该设置`stream.avail_in`。请注意，`stream.avail_in`当您不提供下一个输入块时，您不应该更改。`avail_in`在调用之前设置初始值`inflateInit`可能是一个好主意。

2/ 使用`inflateInit2(&stream, -MAX_WBITS)`可能是个好主意。请注意，普通版本`inflateInit`不检查压缩类型（gzip 或 zlib）的数据，如果选择 gzip，您的解压缩将失败。

（应该可以工作，无需测试即可编写）

```
-(NSData*)decompressData:(NSData*)compressedData {
    z_stream stream;

    stream.zalloc = Z_NULL;
    stream.zfree = Z_NULL;
    stream.opaque = Z_NULL;

    //we set the input, no need to change the values later
    stream.next_in = (Bytef *) [compressedData bytes];
    stream.avail_in = compressedData.length;  

    int result = inflateInit2(&stream, -MAX_WBITS);

    if (result != Z_OK) {
        return nil;
    }

    NSMutableData* uncompressedData = [NSMutableData data];
    //make buffer big enough - 128KB
    int bufferLength = 128 * 1024;
    char *buffer = malloc(bufferLength);

    while (true) {
        stream.next_out = buffer;
        stream.avail_out = bufferLength;

        //calling with Z_FINISH because we already have all the input
        result = inflate(&stream, Z_FINISH);

        if (result != Z_OK && result != Z_STREAM_END) {
             inflateEnd(&stream);
             free(buffer);
             return nil;
        }

        [uncompressedData appendBytes:buffer length:(bufferLength - stream.avail_out)];

        if (result == Z_STREAM_END) {
            break;
        }
    }

    inflateEnd(&stream);
    free(buffer);

    return uncompressedData;
} 
```

# mysql - MySQL查询选择多行

> ID：13868213
> 
> 赞同：0
> 
> 时间：2012-12-13T20:45:33.380
> 
> 标签：mysql, select, group-concat

我有下表：

```
surveys
comp_id    question
4          What is your name?
4          How are you?
4          Where do you live?
5          Who are you?
5          What is your birthday? 
```

我需要帮助编写一个查询，它给我以下输出：

```
comp_id    my_questions
4          What is your name?How are you?Where do you live?
5          Who are you?What is your birthday? 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:49:37.210

您正在寻找该`GROUP_CONCAT()`功能。像这样使用它：

```
SELECT comp_id, GROUP_CONCAT([DISTINCT] question [ORDER BY some_field ASC/DESC] [SEPARATOR '']) as my_questions
FROM surveys
GROUP BY comp_id 
```

注意我已经展示了一些可选的值来传递到 GROUP_CONCAT 中`[]`。要获得与您展示的完全一样的信息，请使用`GROUP_CONCAT(question SEPARATOR '')`. 可选项目可让您查找不同的问题值或按任何字段（包括问题本身）对它们进行排序。

# security - 运行 Erlang 集群时有哪些安全风险？

> ID：13868214
> 
> 赞同：4
> 
> 时间：2012-12-13T20:45:38.670
> 
> 标签：security, erlang

就运行 Erlang 系统时必须注意的事项而言，这是一个更普遍的问题。例如，我知道原子耗尽攻击。还有哪些其他可能的攻击以及如何使您的系统更安全？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T01:10:33.337

运行集群意味着它们共享一个 cookie，如果知道 cookie，它们就可以附加到您的任何节点（假设它们连接到您的网络）并执行任意 Erlang 命令或程序。

所以我的想法是集群意味着至少有两个文件（和一些人）知道 cookie 是什么（或在哪里找到它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T07:12:23.517

首先，您希望您的集群处于封闭的 VPN 中（如果它们相距很远并且可能通过 WAN 进行通信）。然后，您想在硬化`UNIX`或`LINUX`. 另一个重要的想法是关闭所有与集群的 epmd 连接，即使通过使用`net_kernel:allow(Nodes).`

Erlang Vms 的主要弱点之一（我已经意识到）获得了 cookie 是内存消耗。我认为，如果一个 Erlang 平台为许多用户提供服务并且它没有受到 DOS 攻击的保护，那么它真的很容易受到攻击。您需要限制 Web 服务器允许的并发连接数，以便您可以轻松阻止一些*`script boys in the neighbourhood`*. 另一种情况是分布式/复制`Mnesia`整个集群的数据库。Mnesia 复制数据，但我不确定该数据是否已加密。最后，确保您是集群中所有机器的唯一管理员。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T22:51:46.593

我会害怕部署在您系统中的应用程序中的错误。otp 的一个很好的例子是 SSL 应用程序，它在 3 年前被完全重写。接下来是 http 客户端 - 内存泄漏。Xmerl 从来都不是系统的重要组成部分。

此外，小心使用 3rd 方 Erlang 应用程序：新的 Web 服务器（可能比 inets 更好，但如果您不需要所有性能，请考虑稳定的 Yaws），ejabberd - 直接命中操作系统的技术数量，Riak - 与文件系统的交互，ulimit， iostats等

# php - 如何向 Blueimp Uploader 提交额外的表单数据？

> ID：13868215
> 
> 赞同：15
> 
> 时间：2012-12-13T20:45:44.643
> 
> 标签：php, mysql, jquery-ui, blueimp

我正在尝试通过 Blueimp jquery 文件上传器向 MYSQL 插入额外的表单数据。但我有一些问题。

我正在使用演示设置并将模板上传更改为以下代码（* 我添加了 Notunuz 输入）

```
<script id="template-upload" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-upload fade">
        <td class="preview"><span class="fade"></span></td>
        <td class="title"><label>Notunuz: <input name="title[]"></label></td>
        {% if (file.error) { %}
            <td class="error" colspan="2"><span class="label label-important">Hata</span> {%=file.error%}</td>
        {% } else if (o.files.valid && !i) { %}
            <td>
                <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>
            </td>
            <td class="start">{% if (!o.options.autoUpload) { %}
                <button class="btn btn-primary">
                    <i class="icon-upload icon-white"></i>
                    <span>Başlat</span>
                </button>
            {% } %}</td>
        {% } else { %}
            <td colspan="2"></td>
        {% } %}

    </tr>
{% } %}
</script> 
```

*   如何获取额外的表单数据？
*   如何更改`.js`和`UploadHandler.php`归档？

* * *

我的第二个问题是*如何重定向到特定的 URL 上传完成？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-26T11:32:19.660

发送额外的 FormData 有多种方法，

1.静态表单数据（如果表单数据在运行时从未更改）：

使用 , 初始化 FileUpload

```
 $('#fileupload').fileupload({
         formData: {
            "data1": data1,
            "data2": data2
        }
     }); 
```

2.动态表单数据

用于`fileuploadsubmit`在提交事件上设置 FormData

```
$('#formData').fileupload({
   .........
}).on('fileuploadsubmit', function (e, data) {
    data.formData = {
         "data1": data1,
         "data2": data2
    };
}); 
```

有关更多详细信息，请参阅：

*   [如何提交额外的表单数据](https://github.com/blueimp/jQuery-File-Upload/wiki/How-to-submit-additional-form-data)
*   [如何异步检索和设置表单数据。](https://github.com/blueimp/jQuery-File-Upload/wiki/Submit-files-asynchronously)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:31:20.880

我用过，

```
$('#fileupload').fileupload({
    formData: {example: 'test'}
}); 
```

为了更有活力，

```
 <input type="text" name="name" value="" id="inpName" /> /* example 1 */
 <span id="spnHash" style="display:none">ttt-vvv-hh</span> /* example 2 */
 $('#fileupload').fileupload({
    var $formData = {
        "name": $("#inpName").val(),
        "hash": $("#spnHash").text()
    }
     formData: $formData
 }); 
```

对于重定向：

[https://github.com/blueimp/jQuery-File-Upload/issues/670#issuecomment-2291997](https://github.com/blueimp/jQuery-File-Upload/issues/670#issuecomment-2291997)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T12:42:48.073

```
 $('#file-upload').fileupload({
      formData: {key: 'value'}
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-09T07:46:37.303

在文件上传表单中添加一个输入元素，如下所示：

```
<form id="fileupload" action="/server/php" method="POST" enctype="multipart/form-data">
    <input type="text" name="additional_data" value="your_value" hidden >
</form> 
```

然后在 UploadHandler.php 中，您可以使用 $_REQUEST['additional_data'] 获取输入的值

例如：

```
$myData = $_REQUEST['additional_data']; 
```

然后将数据插入mysql：

```
$conn = new mysqli($servername, $username, $password, $dbname);
$conn->query("INSERT INTO your_tbl(your_field) VALUES ('$myData')"); 
```

# php - 在 Joomla 中使用 AJAX 填充 PHP/mySQL 内容的#id

> ID：13868217
> 
> 赞同：0
> 
> 时间：2012-12-13T20:45:46.827
> 
> 标签：php, jquery, ajax, joomla

我有一个 jQuery 函数，它从表单中获取数据并将其作为字符串（现在）放入`#content`.

```
$(document).ready(function() {

    $('form').submit(function() {
        var results = $(this).serialize();
        var url = '<php? echo JURI::base(); ?>index.php?option=com_mls&task=ListData&' + results;
        $('#content').html(url);
        return false;
    });
}); 
```

所以，我知道如何从表单构建查询字符串。

我的控制器中有一个任务，它从 URL 运行 mySQL 查询字符串。

```
function ListData()
{
    error_reporting(E_ALL);
    $db =& JFactory::getDBO();
    $sort = JRequest::getVar('sort');

        ...some other stuff...

    $query = [some big nasty thing]        

    $db->setQuery($query);
    $array = $db->loadRowList();

    return $array;
} 
```

所以我知道如何查询 mySQL DB 并获得一个`array()`.

然后，我有一个 PHP 脚本，可以将数组数据提取为 HTML 格式：

```
<?php 

    $array = $this->disparray;

    foreach($array as $key => $value){
        $mlsnum = $value['1'];
            ...some other data gets....
        echo '<div>' . $mlsnum . '</div>';
    }
?> 
```

这就是我卡住的地方。我不知道如何从 jQuery 获取 URL 查询到控制器任务，然后`array()`将该任务返回的返回到 PHP 脚本中，该脚本将构建 HTML，然后让 AJAX/jQuery 将该数据放入`#content`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:35:50.563

行动分三步进行。首先 ajax 调用 view.raw.php 然后你从模型中加载/添加/删除一些数据，并根据需要自定义它。然后以 JSON 格式打印它 - 将其发送回 ajax，然后 ajax 将其放入 html。

```
$(document).ready(function() {
    var url = '<php? echo JURI::base(); ?>index.php?option=com_mls&task=ListData&format=raw&' + results;
    $.ajax({
        url: url,
        dataType: 'json',
        success: function(json) {

            if (json['output']) {
                $('#content').html(json['output']);
            }

            if (json['redirect']) {
                location = json['redirect'];
            }
        }
    });
}); 
```

这将与 /com_mls/(default_view)/view.raw.php

在那里，你可能应该做类似的事情

```
class mlsView_your_view... extends JView
{
    public function display($tpl = null) {

        $task = JRequest::getCmd('task', 0);
        // see what should we do now
        switch( $task ){
            case 'ListData':
                $data = $this->get_data();
            break;
        }

        // Get the document object.
        $document = JFactory::getDocument();

        // Set the MIME type for JSON output.
        $document->setMimeEncoding('application/json');

        // Change the suggested filename.
        //JResponse::setHeader('Content-Disposition','attachment;filename="resp.json"');

        // Output the JSON data.
        echo json_encode($data);
    }

    function get_data() {

        // load model
        $model = $this->getModel('ajax');

        // get data from model
        $data = $model->getSomeData();

        if( is_null($data) ){
            return array( 'error' => 'missing data.');
        }

        $data['output'] = $model->prepareData($data);

        return array( $data );
    } 
```

....ETC.... }

# python - 在python中的子进程上发送命令

> ID：13868221
> 
> 赞同：0
> 
> 时间：2012-12-13T20:45:57.313
> 
> 标签：python, subprocess

我只想在我的树莓派上构建一个小的 python 音乐客户端。我安装了“mpg321”，效果很好，但现在是我的问题。发送命令后

```
os.system("mpg321 -R testPlayer") 
```

python 等待用户输入，如播放、暂停或退出。如果我在我的终端上写这个，播放器会暂停音乐或退出。完美，但我希望 python 这样做，所以我发送命令

```
os.system("LOAD test.mp3") 
```

其中 LOAD 是加载此 mp3 的命令。但什么也没有发生。当我通过终端退出播放器时，出现错误：

```
sh: 1: LOAD: not found 
```

我认为这意味着

```
os.system("mpg321 -R testPlayer") 
```

完成整个过程，在我退出后，python 尝试执行命令 LOAD。那么我如何让这些东西一起工作呢？

我的代码：

```
import os

class PyMusic:
    def __init__(self):
        print "initial stuff later"

    def playFile(self, fileName, directory = ""):
        os.system("mpg321 -R testPlayer")
        os.system("LOAD test.mp3")

if __name__ == "__main__":
    pymusic = PyMusic()
    pymusic.playFile("test.mp3") 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T20:49:28.017

首先，您几乎不应该使用`os.system`. 请参阅[子流程](http://docs.python.org/library/subprocess.html)模块。

使用的一个主要优点`subprocess`是你可以选择你想要的任何行为——在后台运行它，启动它并等待它完成（如果它返回非零则抛出异常），与它交互`stdin`并`stdout`显式地进行交互，无论做什么感觉。

在这里，您不是尝试运行另一个命令`"LOAD test.mp3"`，而是尝试将其作为输入传递给现有进程。所以：

```
p = subprocess.Popen(['mpg321', '-R', 'testPlayer'], stdin=PIPE) 
```

然后你可以这样做：

```
p.stdin.write('LOAD test.mp3\n') 
```

这大致相当于从 shell 执行此操作：

```
echo -e 'LOAD test.mp3\n' | mpg321 -R testPlayer 
```

但是，您可能应该阅读有关[通信](http://docs.python.org/library/subprocess.html#subprocess.Popen.communicate)的内容，因为只要有可能弄清楚如何使您的代码工作`communicate`，它就比尝试处理通用 I/O 简单得多（特别是如果您从未使用管道、套接字、等等）。

或者，如果您尝试与命令行 UI 交互（例如，在得到正确提示之前您不能发送命令），您可能希望查看“expect”库。其中有一些可供选择，因此您应该[在 PyPI 上搜索](http://pypi.python.org/pypi?%3aaction=search&term=expect&submit=search)以找到适合您的那个（尽管我可以说我过去曾成功使用过[pexpect](http://pypi.python.org/pypi/pexpect/2.4)，并且文档中充满了获得想法的示例比大多数`expect`文档要快得多）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T20:47:46.443

您正在寻找一种将数据发送到`stdin`. 这是一个使用 Popen的[示例：](https://stackoverflow.com/questions/163542/python-how-do-i-pass-a-string-into-subprocess-popen-using-the-stdin-argument)

```
from subprocess import Popen, PIPE, STDOUT

p = Popen(['mpg321', '-R testPlayer'], stdout=PIPE, stdin=PIPE, stderr=STDOUT)

mpg123_stdout = p.communicate(input='LOAD test.mp3\n')[0]
print(mpg123_stdout) 
```

你建立指向`stdin`和的指针`stdout`，然后在你开始你的过程之后，你与 进行通信`stdin`并从中读取`stdout`。确保发送新行（回车）

# jquery - 当一侧打开时关闭其他

> ID：13868224
> 
> 赞同：0
> 
> 时间：2012-12-13T20:46:04.017
> 
> 标签：jquery, class, click

我有这个代码：

JS：

```
 $(document).ready(function(){
       $('nav ul li').click(function () {
          $('aside.' + this.className).toggleClass('opened');
       });
    }); 
```

HTML：

```
<nav>
 <ul>
    <li class="index">Home</li>
    <li class="index2">some text</li>
</ul>
  </nav>

  <aside class="index">
    <div class="picture"></div>
    <h2>Lorem Ipsum</h2>
    <p>Lorem ipsum dolor sit amet</p>
  </aside>

  <aside class="index2">
    <div class="picture"></div>
    <h2>Lorem Ipsum 2</h2>
    <p>Lorem ipsum dolor sit amet 2</p>
  </aside> 
```

现在我希望当我打开 One Aside 时所有其他的都被关闭？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:53:50.970

```
$('aside').not('.' + this.className).removeClass('opened');
$('aside.' + this.className).toggleClass('opened'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:47:19.857

```
$(document).ready(function(){
   $('nav ul li').click(function () {
      $('aside').removeClass('opened');
      //just do the 1st one at index `0`
      $('aside.' + this.className).eq(0).toggleClass('opened'); 
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T20:48:12.460

```
$('aside').click(function(){
    $('aside').not(this).removeClass('opened');
}); 
```

# c# - Paypal IPN 无效返回，不知道为什么

> ID：13868225
> 
> 赞同：1
> 
> 时间：2012-12-13T20:46:14.677
> 
> 标签：c#, asp.net-mvc, paypal, paypal-ipn

这是我的设置，我会尽量保持代码简短。这是一个 ASP.NET MVC4 应用程序

我在这里设置信息：

```
 @Html.Hidden("cmd", Model.PayPal.Cmd)
@Html.Hidden("business", Model.PayPal.Business)
@Html.Hidden("return", Model.PayPal.Return)
@Html.Hidden("cancel_return", Model.PayPal.CancelUrl)
@Html.Hidden("notify_url", Model.PayPal.NotifyUrl)
@Html.Hidden("currency_code", Model.PayPal.CurrencyCode)
@Html.Hidden("item_name", Model.PayPal.PlanName)
@Html.Hidden("item_number", Model.Id)

@Html.Hidden("src", Model.PayPal.AutoRecurring)
@Html.Hidden("a3", Model.PayPal.Price)
@Html.Hidden("p3", Model.PayPal.Interval)
@Html.Hidden("t3", Model.PayPal.IntervalType)
@Html.Hidden("txn_type", "subscr_signup")
<input type="image" name="submit"
    src="https://www.paypalobjects.com/en_US/i/btn/btn_subscribe_LG.gif"
    alt="PayPal - The safer, easier way to pay online">
<img alt="" border="0" width="1" height="1"
    src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif"> 
```

我在控制器中设置变量：

```
PayPal paypal = new PayPal();
        bool useSanbox = true;

        if (useSanbox)// for test
            paypal.ActionUrl = "https://www.sandbox.paypal.com/cgi-bin/webscr";
        else//real
            paypal.ActionUrl = "https://www.paypal.com/cgi-bin/webscr";

        paypal.Cmd = "_xclick-subscriptions";
        paypal.Business = "david_1355300634_biz@domain.com";
        paypal.CancelUrl = "http://localhost:25914/home/";
        paypal.Return = "http://localhost:25914/home/ipn";
        paypal.NotifyUrl ="http://localhost:25914/home/ipn";
        paypal.AutoRecurring = "1";
        paypal.Price = ctx.SubscriptionPlans.First(x => x.Name == signInModel.SubscritionPlan).Price.ToString();
        paypal.Interval = "1";
        paypal.IntervalType = "M";
        paypal.CurrencyCode = "USD";
        paypal.PlanName = signInModel.SubscritionPlan;
        paypal.Amount = ctx.SubscriptionPlans.First(x => x.Name == signInModel.SubscritionPlan).Price.ToString(); 
```

然后我有这个 IPN 控制器操作：

```
//Answer from PayPal
    public ActionResult IPN()
    {
        var signInModel = Session["SignUp"] as SignUp;
        //Post back to either sandbox or live
        string strSandbox = "https://www.sandbox.paypal.com/cgi-bin/webscr";
        //string strLive = "https://www.paypal.com/cgi-bin/webscr";
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(strSandbox);

        //Set values for the request back
        req.Method = "POST";
        req.ContentType = "application/x-www-form-urlencoded";
        byte[] param = Request.BinaryRead(this.Request.ContentLength);
        string strRequest = Encoding.ASCII.GetString(param);
        strRequest += "&cmd=_notify-validate";
        req.ContentLength = strRequest.Length;

        //Send the request to PayPal and get the response
        StreamWriter streamOut = new StreamWriter(req.GetRequestStream(), System.Text.Encoding.ASCII);
        streamOut.Write(strRequest);
        streamOut.Close();
        StreamReader streamIn = new StreamReader(req.GetResponse().GetResponseStream());
        string strResponse = streamIn.ReadToEnd();
        streamIn.Close();

        if (strResponse == "VERIFIED")
        {
            //any param from form
            var text = Request.Form["custom"];
            ctx.SignIns.Add(signInModel);
            ctx.SaveChanges();
            //check the payment_status is Completed
            //check that txn_id has not been previously processed
            //check that receiver_email is your Primary PayPal email
            //check that payment_amount/payment_currency are correct
            //process payment
            return View("RegistrationConfirmation", signInModel);
        }
        else if (strResponse == "INVALID")
        {
            //log for manual investigation
            return View("SignUp", signInModel);
        }
        else
        {
            //log response/ipn data for manual investigation
        }
        //change view
        return View("SignUp", signInModel);
    } 
```

让我失望的是我很好地被路由到了贝宝沙箱，我用一个测试用户登录，确认支付金额，然后点击返回网站。返回会命中我的 IPN 操作，但我得到的响应是“无效”。我在这里错过了一个变量还是什么？我对api比较陌生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T09:24:58.397

另一个， cmd=_notify-validate 应该是需要发送的第一个参数值。

根据官方文档

“验证您的响应是否包含完全相同的 IPN 变量和值以相同的顺序，以 cmd=_notify-validate 开头。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T21:36:44.340

您正在尝试在本地进行测试，好吧，贝宝不知道本地主机。您必须上传代码并使用实时 url 对其进行测试

# javascript - 我正在尝试附加悬停动作，但正在立即调用悬停动作

> ID：13868229
> 
> 赞同：0
> 
> 时间：2012-12-13T20:46:41.867
> 
> 标签：javascript, jquery, jquery-plugins, jquery-events

我正在编写我的第一个 jQuery 插件。我正在尝试添加悬停动作，但会立即调用悬停响应。这是我的插件：

```
(function($){
  var Help = function(element, options) {
    this.$element = element;
    this.options = $.extend({}, $.fn.help.defaults, options);
  };

  Help.prototype.hover = function(name){
    alert(name);
  };

  $.fn.help = function(option){
    return this.each(function () {
      var $this = $(this);
      var help = $this.data('help');
      var options = "";
      var data = $this.data('help-id');
      if(!help) {
        $this.data('help', (help = new Help(this, options)));
      }
      $this.on('hover', help.hover(data));
    });
  };
})(jQuery); 
```

我附加了我的插件`$('#one').help()`，但这会立即调用悬停功能。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T20:47:24.210

您不是将函数传递给函数，`on`而是函数调用的结果。

代替

```
$this.on('hover', help.hover(data)); 
```

和

```
$this.on('hover', function(){help.hover(data)}); 
```

# positioning - 强加 ul li 菜单项

> ID：13868231
> 
> 赞同：0
> 
> 时间：2012-12-13T20:47:03.240
> 
> 标签：positioning, css

我想制作一个`ul li`菜单，我想将每个 li 元素放在前一个元素上。

我不知道我是否可以用文字解释我的意思，所以我制作了一张显示所需效果的图像： [![图片](../Images/4d9a023e2735aa2e42236bcdabb7ed4b.png)](https://i.stack.imgur.com/0f9RA.png)

如何使用纯 CSS 做到这一点？有可能，还是我必须使用javascript？

这是我迄今为止尝试过的：

```
ul {
    margin: 0;
    padding: 0;
    list-style: none;
}

li {
    position: relative;
}

li a {
    display: block;
    position: absolute;
    top: -30px;
    z-index: 1;
    width: 225px;
    height: 115px;
} 
```

但每个都`li`出现在与前一个相同的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T20:50:37.650

您可以使用负边距顶部来“提升” li 元素。

[http://jsfiddle.net/tomprogramming/mbe9W/](http://jsfiddle.net/tomprogramming/mbe9W/)

相关的 CSS

```
li { padding:10px; border:1px solid #000; margin-top:-10px; }
li:first-of-type {
 margin-top:0;   
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T20:55:21.173

我认为这很接近：

```
​&lt;ul>
<li><a class="a" href="#">A</a></li>
<li><a class="b" href="#">B</a></li>
<li><a class="c" href="#">C</a></li>
</ul> 
```

​</p>

CSS：

```
ul {
    margin: 0;
    padding: 0;
    list-style: none;
    padding-top:30px;
}

li {
    position: relative;
    height:50px;
}

li a {
    display: block;
    position: absolute;
    height:20px;
    top: -30px;
    left:0;
    width:225px;
    height:115px;

}

.a {
     border:1px solid #ff0000   
}
.b {
     border:1px solid #00ff00  
}

.c {
     border:1px solid #ffff00   
}
​ 
```

# android - 在导入项目期间，R 无法解析为变量

> ID：13868233
> 
> 赞同：-2
> 
> 时间：2012-12-13T20:47:10.917
> 
> 标签：android

****在这里我粘贴问题详细信息 R 无法解析为变量是常见问题，我检查了我的 res 文件夹，完成刷新项目，清理项目，验证 **仍然错误未解决帮助我...**

```
 [2012-12-14 02:12:38 - com.example.android.livecubes.cube2.CubeWallpaper2Settings] res\drawable\ic_launcher_wallpaper.png:0: error: Resource entry ic_launcher_wallpaper is already defined.
        [2012-12-14 02:12:38 - com.example.android.livecubes.cube2.CubeWallpaper2Settings] res\drawable\ic_launcher_wallpaper.html:0: Originally defined here.
        [2012-12-14 02:12:38 - com.example.android.livecubes.cube2.CubeWallpaper2Settings] res\xml\cube1.xml:0: error: Resource entry cube1 is already defined.
        [2012-12-14 02:12:38 - com.example.android.livecubes.cube2.CubeWallpaper2Settings] res\xml\cube1.html:0: Originally defined here.
        [2012-12-14 02:12:38 - com.example.android.livecubes.cube2.CubeWallpaper2Settings] res\xml\cube2.xml:0: error: Resource entry cube2 is already defined.
        [2012-12-14 02:12:38 - com.example.android.livecubes.cube2.CubeWallpaper2Settings] res\xml\cube2.html:0: Originally defined here.
        [2012-12-14 02:12:38 - com.example.android.livecubes.cube2.CubeWallpaper2Settings] res\xml\cube2_settings.xml:0: error: Resource entry cube2_settings is already defined.
        [2012-12-14 02:12:38 - com.example.android.livecubes.cube2.CubeWallpaper2Settings] res\xml\cube2_settings.html:0: Originally defined here.
        [2012-12-14 02:12:38 - com.example.android.livecubes.cube2.CubeWallpaper2Settings] F:\sample projects\Cube\res\values\index.html:112: error: Error parsing XML: mismatched tag
        [2012-12-14 02:12:38 - com.example.android.livecubes.cube2.CubeWallpaper2Settings] F:\sample projects\Cube\res\values\shapes.html:112: error: Error parsing XML: mismatched tag
        [2012-12-14 02:12:38 - com.example.android.livecubes.cube2.CubeWallpaper2Settings] F:\sample projects\Cube\res\values\strings.html:112: error: Error parsing XML: mismatched tag
        [2012-12-14 02:12:38 - com.example.android.livecubes.cube2.CubeWallpaper2Settings] F:\sample projects\Cube\res\xml\cube1.html:112: error: Error parsing XML: mismatched tag
        [2012-12-14 02:12:38 - com.example.android.livecubes.cube2.CubeWallpaper2Settings] F:\sample projects\Cube\res\xml\cube2.html:112: error: Error parsing XML: mismatched tag
        [2012-12-14 02:12:38 - com.example.android.livecubes.cube2.CubeWallpaper2Settings] F:\sample projects\Cube\res\xml\cube2_settings.html:112: error: Error parsing XML: mismatched tag
        [2012-12-14 02:12:38 - com.example.android.livecubes.cube2.CubeWallpaper2Settings] F:\sample projects\Cube\res\xml\index.html:112: error: Error parsing XML: mismatched tag

/*
 * Copyright (C) 2009 Google Inc.
 * 
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy of
 * the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */

package com.example.android.livecubes.cube2;

import com.example.android.livecubes.cube2.*;

import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceActivity;

public class CubeWallpaper2Settings extends PreferenceActivity
    implements SharedPreferences.OnSharedPreferenceChangeListener {

    @Override
    protected void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        getPreferenceManager().setSharedPreferencesName(
                CubeWallpaper2.SHARED_PREFS_NAME);
        addPreferencesFromResource(R.xml.cube2_settings);
        getPreferenceManager().getSharedPreferences().registerOnSharedPreferenceChangeListener(
                this);
    }

    @Override
    protected void onResume() {
        super.onResume();
    }

    @Override
    protected void onDestroy() {
        getPreferenceManager().getSharedPreferences().unregisterOnSharedPreferenceChangeListener(
                this);
        super.onDestroy();
    }

    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
            String key) {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:46:14.733

似乎你有`res\drawable\ic_launcher_wallpaper.png`和`res\drawable\ic_launcher_wallpaper.html`。不知道为什么你的 drawable 文件夹中有 HTML，但是重命名或删除这两个对象之一，然后清理并重建你的项目。

请记住，资源仅由目录文件名 ( `drawable/a.png == drawable/a.html == drawable/a.jpg -> R.drawable.a`) 引用。它们必须具有唯一的文件名。

附录：同样适用于其他文件。您有`cube1.xml`和`cube1.html`在您的`xml`文件夹中（以及您的日志中列出的其他人）。这些都得照顾。似乎这些 HTML 文件甚至不应该存在，因为它试图将它们解析为 XML（它可能无法管理）。

# asp.net - ASP.Net MVC + 脚手架 + 授权

> ID：13868240
> 
> 赞同：0
> 
> 时间：2012-12-13T20:47:31.170
> 
> 标签：asp.net, .net, asp.net-mvc, authorization

我喜欢 MVC 现在拥有的内置脚手架功能。而且我已经看到可以通过多种方式增强它的地方。好奇是否有任何东西可以帮助在脚手架代码中连接一些授权逻辑？默认情况下，生成的代码对公众开放。即使它只是生成了迫使人们添加授权所需的各个部分的存根，这也将是完成任务并强制执行覆盖率的好方法。

# iis - 不支持视频格式或 MIME 类型。IIS 确实具有正确的 MIME 类型。

> ID：13868241
> 
> 赞同：1
> 
> 时间：2012-12-13T20:47:33.073
> 
> 标签：iis, mime-types, mp4

这真让我抓狂。当我尝试查看嵌入到页面中的视频时，我在 Firefox 中收到以下错误“不支持视频格式或 MIME 类型”。

我在 IIS 上，并且我确实有 MP4 的正确 MIME 类型。还有什么我可以检查的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T18:21:34.303

问题最终来自我们的 CMS。

MP4 文件正在通过脚本加载，该脚本的名称包含“-”，CMS 决定将其替换为“.”。只需打开 Firebug 的 Net 选项卡，我就可以在几分钟内修复错误。

Firefox 无论如何都不支持 H264，因此 MP4 文件必须通过 Flash 加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T08:13:21.110

我在使用 Firefox 时遇到了问题，因为我只有一个 mp4 文件，但是这个 javascript 似乎可以正常工作。

使用新的视频标签，并提供目标代码作为后备。当 Firefox 找不到不存在的 ogv 文件时，它会抛出一个错误，该错误会运行 javascript 以删除视频标签并只留下在 Firefox 中运行良好的后备目标代码。（我正在使用 JQuery，但同样可以使用普通的 javascript 来实现。）

```
<script  type="text/javascript">
  function kill_video_tag() {
    // Remove source tags
    $('#vidid').children('source').remove();

    // Grab everything else inside
    var ob = $('#vidid').html();

    // Add the fallback code before the video tag
    // and then remove the video tag
    $('#vidid').before(ob).remove();
  }
</script>

<video id="vidid" width="320" height="256" controls>
  <source src="http://www.mysite.com/nice_video.mp4" type="video/mp4" />
  <source src="http://www.mysite.com/this_does_not_exist.ogv" type="video/ogg" onerror="kill_video_tag();" />
<OBJECT CLASSID="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" CODEBASE="http://www.apple.com/qtactivex/qtplugin.cab" WIDTH="320" HEIGHT="256" >
  <PARAM NAME="src" VALUE="http://www.mysite.com/nice_video.mp4" >
  <PARAM NAME="autoplay" VALUE="false" >
  <EMBED SRC="http://www.mysite.com/nice_video.mp4" TYPE="image/x-macpaint" PLUGINSPAGE="http://www.apple.com/quicktime/download" WIDTH="320" HEIGHT="256" AUTOPLAY="false"></EMBED>
</OBJECT>
</video> 
```

# javascript - ExpressJS - 通过 .prototype 全局添加功能？

> ID：13868246
> 
> 赞同：0
> 
> 时间：2012-12-13T20:47:50.760
> 
> 标签：javascript, node.js, express, knockout.js

好的，我希望您理解这个想法 - 因为也许有更好的解决方案：

我为 expressJS 创建了一些模型，它是渲染引擎翡翠。但是因为无论如何它们都是 JS 模型，所以我想在客户端使用它们：作为 KnockoutJS 模型。

为此，每个模型都有 2 个功能：enableKO 和 disableKO 功能。到目前为止，一切都很好：但现在我正在尝试使用一些我想在服务器端和客户端上使用的逻辑。

为了获取这些值 - 无论它们是默认的 JS 对象还是 Knockout-observeable，我都添加了 2 个函数：

```
Function.prototype.getValue = function() { return this(); }
Object.prototype.getValue = function() { return this; } 
```

现在我可以调用 model.value.getValue() 并得到我正在寻找的值 - 理论上。
如果我实际调用该函数，我得到的错误是“500 RangeError：超出最大调用堆栈大小”，这几乎毫无价值。

我已经在我的 app.js 文件以及客户端将调用的 js 文件中定义了这两个函数。

这就是我提出问题的原因：还是有更好的方法来实现我的目标？谢谢！

# grid - 需要一个很好的例子来隐藏/显示 EXTJS 4.1.1a 的网格列

> ID：13868249
> 
> 赞同：0
> 
> 时间：2012-12-13T20:47:57.897
> 
> 标签：grid, extjs4.1

我需要一个很好的例子来隐藏/显示 EXTJS 4.1.1a 的网格列，在这里我可以单击一个按钮并根据 dataIndex 名称显示/隐藏一个列（对于每一列，我都有一个 itemcontextmenu 来获取它的 dataIndex 名称列），或者根据抓取的数据索引名称动态显示/隐藏列。

我找到了一个使用列数组（ jsfiddle.net/MjFp3/ ）的按钮隐藏列的好例子，但这不适用于我的场景，因为我需要能够显示/隐藏一个或多个列在网格用数据渲染后从网格中提取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:07:14.450

我没有找到任何本机方法来查找列，`dataIndex`但这里有一个使用 ComponentQuery 来搜索它需要的小提琴：

[http://jsfiddle.net/dbrin/9YphM/](http://jsfiddle.net/dbrin/9YphM/)

# java - java - 如何在java中以yyyyMMddHHmm格式接收输入？

> ID：13868251
> 
> 赞同：3
> 
> 时间：2012-12-13T20:48:14.417
> 
> 标签：java, jdbc

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMddHHmm");
java.util.Date parsedDate = sdf.parse("201212130900");
java.sql.Timestamp timestamp = new java.sql.Timestamp(parsedDate.getTime());
try
{
  PreparedStatement pstmt = connection.prepareStatement(
    "select count(*) as counter from table1 where table_key > ?");
  pstmt.setTimestamp(1,new java.sql.Timestamp(timestamp.getTime()));  
  ResultSet rs = pstmt.executeQuery();  
  while(rs.next()){
    System.out.println(rs.getInt( 1 ));
  }
  connection.close();
}
catch(Exception g){
  System.err.println(g.getMessage());
} 
```

在输出中我收到一个错误

> ORA-01843: 无效的月份。

任何人都可以协助解决上述错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:11:31.843

您从字符串到时间戳的转换是可以的。（我测试并工作）。

* * *

您的问题可能出在时区或其他方面。尝试改用这种方法，

```
setTimestamp(int parameterIndex, Timestamp x, Calendar cal) 
```

例子：

```
setTimestamp(1, timestamp , Calendar.getInstance(TimeZone.getTimeZone("UTC"))) 
```

* * *

**更新：**（table1.table_key 是一个 CHAR(24)）

你应该给你一个字符串中的java日期，假设key_value被格式化为“yyyyMMddhhmm”......（出于明显的原因，其他格式不起作用）

其他选项是在您的查询中将 key_value 转换为 TIMESTAMP

试试：（我假设你正在使用 oracle db，我做了一些搜索）

1）对时间戳进行“强制转换”

“从时间戳（table_key）> 的 table1 中选择计数（*）作为计数器？”

2）使用[http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions193.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions193.htm)。我不知道你是否可以这样做：

“从 table1 中选择 count(*) 作为计数器，其中 TO_TIMESTAMP(table_key,'YYYYMMDDHHMMHH24MI') > ？”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:03:49.477

在 java 中，要获取格式化的日期，您可以执行以下操作：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMddHHmm");
String sdf.format(myDate); 
```

[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)中有很多选项。我已为您附上了 JavaDoc。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T21:24:45.160

我已经解决了上述问题。

我将日期转换为“yyyyMMdd”格式，并将时间转换为“HHmm”格式，将它们存储为 2 个不同的字符串。

# javascript - 问题声明然后与 require.js 共享模块

> ID：13868255
> 
> 赞同：1
> 
> 时间：2012-12-13T20:48:29.560
> 
> 标签：javascript, requirejs, js-amd

我目前正试图围绕 require.js 库进行思考，但我遇到了一个问题，即使我遇到了问题，似乎也无法解决它。我首先创建了一个 main.js 文件：

```
/*
 *
 * Require.js configuration for app
 */
require.config({
 baseUrl: 'assets/js',
 paths:{
    "async": 'vendor/requirejs-plugins/async',
    "jquery": "http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min",
    "common": "modules/common",
    "jquery-fineuploader": "vendor/jquery-fineuploader/jquery.fineuploader-3.0",
    "google" : "vendor/google/maps/google.init",
    "jqueryui" : "vendor/jquery-ui/jquery-ui-1.9.2.custom.min",
    "jqcookie": "http://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.2/jquery.cookie.min"
},
shim: {
    'jqueryui': {
        deps: ['jquery']
    },
    'bootstrap' : {
        deps: ['jquery']
    },
    'common': {
        deps: ['jquery', 'bootstrap']
    },
    'google': {
        deps: ['jquery' , 'bootstrap']
    },
    'index':{
        deps: ['jquery' , 'bootstrap']
    },
    'jqcookie': {
        deps: ['jquery']
    },
    'jquery-fineuploader': {
        deps: ['jquery']
    }
}
 });

 require(["google", "index"], function() {
// Bisous 
 }); 
```

该文件旨在加载我的应用程序运行所需的各种文件。

然后，为了保持整洁，我创建了一个 common.js 文件，作为我的常用助手模块：

```
//Calling define with module ID, dependency array, and factory function
define(['jquery', 'bootstrap'], function () {

return{
    /*
     *
     * All-in-one modal content handler
     *
     */
    modalRefresh : function(redirectUrl, method, data){

        console.log(redirectUrl);
        console.log(method);
        console.log(data);

        $.ajax({
            url: redirectUrl,
            type: method,
            dataType: "json",
            data: (data) ? data : '',
            success: function( json, textStatus, xhr ) {

                if(json.redirect){
                    modalRefresh(json.redirect, 'GET');
                    return false;
                }

                if(!$('#submitDialog').length){
                    console.log('not found');

                    $('<div class="modal hide fade submitModal" id="submitDialog">' + json.data + '</div>').modal();
                }else{

                    console.log('found');
                    $('#submitDialog').empty().html(json.data);
                }
            },
            error: function( xhr, textStatus, errorThrown ) {}
        });
    }
}
}); 
```

该文件目前仅包含我在整个应用程序中处理我的对话框窗口所需的内容，即使它旨在在不久的将来处理更多的应用程序帮助程序。

我的问题是我似乎无法访问 modalRefresh 执行以下操作：

```
define(['jquery','jqueryui', 'bootstrap','common','async!http://maps.googleapis.com/maps/api/js?key=AIzaSyA9NdU3m2ysLvAiK1vjHnba3yQtck-pSFE&sensor=false',"vendor/google/maps/clusterer.min", "tmp/clusteringData"],
function(common){
  common.modalRefresh('test/call','POST', data = {test : 1});  
}); 
```

我真的怀疑我的模块没有按应有的方式实现，因为我找不到问题所在。感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:52:51.447

您的函数参数需要匹配它之前的数组中的参数。

换句话说：

```
define(['jquery','jqueryui', 'bootstrap','common','async!http://maps.googleapis.com/maps/api/js?key=AIzaSyA9NdU3m2ysLvAiK1vjHnba3yQtck-pSFE&sensor=false',"vendor/google/maps/clusterer.min", "tmp/clusteringData"],
function(common) {... 
```

应该：

```
define(['jquery','jqueryui', 'bootstrap','common','async!http://maps.googleapis.com/maps/api/js?key=AIzaSyA9NdU3m2ysLvAiK1vjHnba3yQtck-pSFE&sensor=false',"vendor/google/maps/clusterer.min", "tmp/clusteringData"],
function(jquery, jqueryui, boostrap, common) {... 
```

当然，对于不直接使用的导入（例如 jQuery），您不需要参数，所以我为避免编写它们所做的就是将此类导入放在最后。换句话说，我会将你的重写`define`为：

```
define(['common', 'jquery','jqueryui', 'bootstrap', 'async!http://maps.googleapis.com/maps/api/js?key=AIzaSyA9NdU3m2ysLvAiK1vjHnba3yQtck-pSFE&sensor=false',"vendor/google/maps/clusterer.min", "tmp/clusteringData"],
function(common) {... 
```

# python - if 语句的结果

> ID：13868256
> 
> 赞同：-1
> 
> 时间：2012-12-13T20:48:29.823
> 
> 标签：python, if-statement, eoferror

*编辑：以另一种方式解决了 Grades=[71,70,72] results=['y','n','x'] for index, grade in enumerate(grades): grades.index(grade) if grade in grades:成绩=输入（'成绩：'）打印（成绩[索引]，结果[索引]）* ...................... ..................................................... ……

我的代码应该给

```
>>>71
[71, 'y']
>>>70
[70, 'n']
>>>72
[72, 'error'] 
```

但它需要随机（？）值形成我的 if 语句。它给

```
>>> 
grade: 71
[72, 'n']
grade: 
```

另外，我在 input() 行得到一个 EOFerror，如果我把 raw_input()

代码是：

```
grades = [70,71,72]
result1 = 'y'
result2 = 'n'
result3 = 'error'
r = 'x'
grade = input('grade: ')

def get_result(r):   
    """
    (str) -> (str)
    you're in or out

    >>>71
    [71, 'y']

    >>>70
    [70, 'n']

    >>>72
    [72, 'error']

    """

    r = 'x'
    for grade in grades:
        list=[grade, r]

        if grade is 71:
            r = result1             
        elif grade is 70:
            r = result2           
        else:
            r = result3           
    return(list)
print(get_result(r)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T21:13:11.730

```
r = 'x'
for grade in grades:
    list=[grade, r]

    if grade is 71:
        r = result1             
    elif grade is 70:
        r = result2           
    else:
        r = result3
return(list) 
```

这些`if`语句都不会改变任何东西，因为您已经`list=[grade, r]`使用 的旧值进行了创建`r`，并且永远不会使用 的新值做任何事情`r`。

尝试在语句`list=[grade, r]`之后移动。`if`

但是，当您使用它时，您真的不应该命名变量`list`，因为这是内置类型的名称。

而且，你不会对变量做任何事情，而是返回它，所以你甚至都不需要它。

所以：

```
 if grade is 71:
        r = result1             
    elif grade is 70:
        r = result2           
    else:
        r = result3
    return [grade, d] 
```

但是，您的代码还有一些其他问题。一方面，您正在遍历`grades`，每个都重新定义`list`，因此您只返回最后一个。那么循环的意义何在？我想你想要这样的东西：

```
retval = []
for grade in grades:
    r = 'x'
    if grade is 71:
        r = result1             
    elif grade is 70:
        r = result2           
    else:
        r = result3
    retval.append([grade, r])
return retval 
```

此外，您可能需要考虑将结果放入 a`dict`中，而不是放入三个单独的变量中，因为它会使您的代码更简单：

```
results = { 71: 'y', 70: 'n', 72: 'error' }
retval = []
for grade in grades:
    retval.append([grade, results.get(grade, 'x')])
return retval 
```

而且您可能会认识到“创建一个空列表，围绕附加到它做一个简单的循环”的模式正是列表推导的用途，因此您可以使其更简单：

```
results = { 71: 'y', 70: 'n', 72: 'error' }
return [[grade, results.get(grade, 'x')] for grade in grades] 
```

同时，为什么您将`r`参数传递给`get_result`，而您从不访问它，实际上您重新绑定`r`到局部变量？（如果你运行`pylint`或类似的工具，它会捕捉到这样的问题。）也许你真正想要的是一个`grades`参数？

从您后来的评论中，听起来您真正想要的是一个`grade`参数，因此您可以获得特定成绩的结果。您不需要为此遍历每个年级。让我们稍微改写一下：

```
def get_result(grade):
    return [grade, results.get(grade, 'x')] 
```

而已。现在，这是整个脚本：

```
results = { 71: 'y', 70: 'n', 72: 'error' }

def get_result(grade):
    return [grade, results.get(grade, 'x')]

grade = input('grade: ')
print(get_result(grade)) 
```

# asp.net-mvc - MVC、DbContext 和多线程

> ID：13868264
> 
> 赞同：5
> 
> 时间：2012-12-13T20:49:13.007
> 
> 标签：asp.net-mvc, entity-framework, thread-safety, dbcontext

关于这些主题分别有很多问题，每个人都有自己的看法。也许有人可以就以下问题给我一个很好的答案。

我有一个使用 EntityFramework 访问数据库的 Asp.NET MVC Web 服务。每次用户向 Web 服务发出请求时，都会创建一个控制器，并创建一个控制器实例。每个请求都很快。它只是从数据库中获取一些数据，对其进行更改然后保存。

问题当然是**如何维护 DbContext（因为它不是线程安全的）**？在控制器的 ctor 上，我创建了一个 DbContext 实例。在控制器的 Dispose() 上，我处理 DbContext。

我在一些帖子中看到，为每个请求创建一个实例并不是一个好习惯。不是吗？

谢谢，艾迪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T20:55:47.867

DbContext 旨在随每个请求实例化。它实现了 IDisposable 并且实例化是一种低成本的操作。与数据库的连接池在内部处理。

更多信息：

[实体框架和连接池](https://stackoverflow.com/questions/3653009/entity-framework-and-connection-pooling/3653082#3653082)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T20:55:25.430

DbContext 是一个非常轻量级的对象，它被设计为为每个操作（=请求）创建然后释放。在幕后，ado.net 负责重用连接池中的数据库连接。

# ruby-on-rails - Rails Simple_form - 如何将 error_notification 包装在 div 中

> ID：13868267
> 
> 赞同：0
> 
> 时间：2012-12-13T20:49:16.250
> 
> 标签：ruby-on-rails, simple-form

我在 Rails 中使用 simple_form gem 来创建一个表单。为了处理我正在使用的服务器端错误：

```
<%= f.error_notification %> 
```

当提交表单并生成服务器端错误时，它们会在 ap 标签中生成，如下所示：

```
<p class="error_notification">Here are all the errors....</p> 
```

**我想在p**元素周围包裹一个**div**，因为我想通过 CSS 为消息容器创建一个红色背景，并且我不想直接设置**P**元素的样式。有没有办法在 Rails 内部使用 simple_form 来做到这一点？

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:22:09.437

我在这里看到了这个：[https](https://github.com/plataformatec/simple_form/blob/master/lib/generators/simple_form/templates/config/initializers/simple_form.rb) ://github.com/plataformatec/simple_form/blob/master/lib/generators/simple_form/templates/config/initializers/simple_form.rb ，第65行

```
# Default tag used for error notification helper.
  config.error_notification_tag = :div 
```****

# java - android通过http上传图片

> ID：13868274
> 
> 赞同：0
> 
> 时间：2012-12-13T20:49:48.840
> 
> 标签：java, android, file-upload, connection

我正在尝试使用不久前发布的方法将图像文件（jpeg）上传到我的测试服务器：

```
 try {
         String pathToOurFile = path;
         FileInputStream fileInputStream = 
         new FileInputStream(new File(pathToOurFile) );

         BufferedInputStream bis = new BufferedInputStream(fileInputStream,3000);
         byte[] bt=new byte[bis.available()];

        HttpURLConnection connection = 
        (HttpURLConnection)new  URL(string).openConnection();
         connection.setDoOutput(true);
         connection.setRequestMethod("POST");
         connection.connect();

        FileOutputStream input =  (FileOutputStream) connection.getOutputStream();
        input.write(bt);
        bis.close();

    } catch (MalformedURLException e) {
        Context context = null;

        Toast.makeText(context, "error in writing", Toast.LENGTH_LONG).show();

        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();
    }

    } 
```

我在这一行收到 ClassCastException： FileOutputStream input = (FileOutputStream) connection.getOutputStream(); 认为 Eclipse 不会将其标记为错误。我该如何解决？

PS 该项目是针对 API lvl 17 编译的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:53:13.903

返回的流`getOutputStream()`不是 a `FileOutputStream`，因此您的演员阵容失败。Eclipse 不会发出警告，因为通过强制转换，您是在告诉它您知道结果将是`FileOutputStream`.

只需将变量类型更改为`OutputStream`并删除演员表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:54:49.457

只需将 FileOutputStream 更改为 OutputStream

# java - 我如何从数组的末尾开始并从头开始？

> ID：13868283
> 
> 赞同：0
> 
> 时间：2012-12-13T20:50:17.207
> 
> 标签：java

我正在尝试生成将搜索从数组末尾开始的元素并从头开始工作的代码，直到找到我要查找的内容。到目前为止我有这个，但它似乎没有工作：

```
 for (int i = randomList.length - 1; i > 0; i--)
            {
             if (randomList[i].equals(findThis))
                {
                    System.out.println("The index of what you're looking for in the array is: " + i);

                }                
            } 
```

当我编译并运行它时，它会产生与此相同的答案：

```
 for (int j = 0; j < randomList.length; j++)
            {
            if (randomList[j].equals(findThis))
                {
                    System.out.println("What you're looking for is located at this index: " + j);
                }           
            } 
```

这很奇怪，因为它从数组的前面开始，一直到最后。我很感激所有的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:59:14.160

获取索引的一种快速方法是执行以下操作：

```
int idx = randomList.lastIndexOf(findThis); 
```

简单的一行代码，将返回给定对象的最后一个索引。如果你想要第一个索引，还有这个：

```
int idx = randomList.indexOf(findThis); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T20:52:53.320

注意：

```
for (int i = randomList.length - 1; i > 0; i--) 
```

应该：

```
for (int i = randomList.length - 1; i >= 0; i--) 
```

但否则它看起来是正确的；你确定你用你的IDE正确清理/重建吗？

如果可以，请提供额外的上下文，例如代码在哪里运行、您的数据是什么，以及预期与实际结果是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T20:53:45.520

如果搜索的值在您的数组中多次存在，您只会得到不同的答案。顺便提一句。如果您想检查数组中的第一个元素，您的条件应该是 i >= 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T20:53:51.663

如果你有一个数组：

[“狗”、“猫”、“有袋动物”、“胡椒博士”、“百事可乐”]

那么无论你从哪个方向搜索，“Dr. Pepper”的索引都将始终为 3。

编辑：我们在这里使用 0 索引数组。:D

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T20:54:54.510

当数组的元素等于您正在寻找的元素时，您正在显示`i`和值是数组中元素的位置。`j`

您的代码是正确的，您只是返回要搜索的元素的索引，因此从开头或结尾开始它将返回相同的索引（相同的元素位置），除非您有多个等于该元素的元素你正在寻找然后你会注意到差异。

为了了解发生了什么，您应该更改您的代码，如下所示：

```
 for (int i = randomList.length - 1; i > 0; i--)
        {
         System.out.println("Actual index =" + i);
         if (randomList[i].equals(findThis))
            {
                System.out.println("The index of what you're looking for in the array is: " + i);

            }                
        } 
```

当我编译并运行它时，它会产生与此相同的答案：

```
 for (int j = 0; j < randomList.length; j++)
        {
         System.out.println("Actual index =" + j);
         if (randomList[j].equals(findThis))
            {
                System.out.println("What you're looking for is located at this index: " + j);
            }           
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T20:56:04.327

您正在返回找到的元素的索引，该索引在任一方向上都是相同的（即`array[4]`，无论您如何搜索，它都是相同的）

如果你想在另一个方向计数，你可以这样做：

```
for (int i = 0; i < randomList.length; i++)
{
  if (randomList[randomList.length - i - 1].equals(findThis))
    {
      System.out.println("The count from the back of the array is: " + i);
    }                
} 
```

# xamarin.ios - 在 MonoDevelop 的 Monotouch 项目中组织 ViewControllers 的正确方法是什么？

> ID：13868293
> 
> 赞同：5
> 
> 时间：2012-12-13T20:50:41.163
> 
> 标签：xamarin.ios, monodevelop

在 iOS 应用程序上使用 MonoDevelop，我需要开始将一些文件组织到子目录中。

我首先在项目的主目录中创建了一个新的 ViewControllers 文件夹。主要是，我刚刚尝试将 Xcode 故事板创建的文件拖放到这个新文件夹中。这给了我文件丢失的错误，有时我不得不手动编辑情节提要文件以删除或修复文件的位置。

虽然我在这方面取得了一些成功，但有时这也会导致故事板文件在 Xcode 中进行更改后没有更新 Designer.cs 文件。

有没有人找到正确的方法来组织一个没有这些问题的大型项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-17T17:09:37.820

看看这个[关于 Xamarin 的错误报告](https://bugzilla.xamarin.com/show_bug.cgi?id=6130)：错误 6130 - 移动文件与依赖关系中断参考。

* * *

移动父文件后，文件中的`DependentUpon`属性不会更新。`csproj`例如，在 Xamarin Studio 上创建一个新的控制器类，然后将其移动到子文件夹会破坏依赖关系。

修复它的唯一方法是手动编辑 csproj 并在 Xamarin Studio 中重新加载项目。每次添加新文件时都必须这样做。

看起来 Xamarin Studio 添加而不是更新`csproj`. 这是我将文件移动到子文件夹之前的 csproj：

```
<Compile Include="TestViewController.cs" />
<Compile Include="TestViewController.designer.cs">
  <DependentUpon>TestViewController.cs</DependentUpon>
</Compile> 
```

将文件移动到 Controller 子文件夹后。

```
<Compile Include="TestViewController.designer.cs">
  <DependentUpon>TestViewController.cs</DependentUpon>
</Compile>
<Compile Include="Controller\TestViewController.cs" />
<Compile Include="Controller\TestViewController.designer.cs">
  <DependentUpon>TestViewController.cs</DependentUpon>
</Compile> 
```

# ssis - SSIS 2008，从查询到excel

> ID：13868303
> 
> 赞同：0
> 
> 时间：2012-12-13T20:51:21.607
> 
> 标签：ssis

嗨，我在 SQL Server 2008 中使用 SSIS。

我有一个 sql 查询：

```
select name, age, lastname
from table1 
```

我希望 ssis 将其传递给 excel 文件（xls）。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:02:50.053

您将需要创建一个模板表来将数据放入其中。获得模板工作表后，您需要在工作中定义一个“excel 连接”。

一旦你有了 excel 连接，你就可以在`dataflow`.

[http://msdn.microsoft.com/en-us/library/ms139836(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms139836(v=sql.105).aspx)

[http://msdn.microsoft.com/en-us/library/ms137643(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms137643(v=sql.105).aspx)

这些是一些关于 Excel 连接和目标的 MSDN 资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:53:00.550

在 Excel 中插入数据的一些示例 -

[http://www.mssqltips.com/sqlservertutorial/211/sql-server-integration-services-ssis-data-flow/](http://www.mssqltips.com/sqlservertutorial/211/sql-server-integration-services-ssis-data-flow/)

# ruby-on-rails - 使用 Devise 在 Heroku 上运行 Rails 应用程序

> ID：13868306
> 
> 赞同：0
> 
> 时间：2012-12-13T20:51:31.240
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, oauth, devise

我正在尝试使用 PG 在 Heroku 上设置 Rails 应用程序，并使用设计和 oauth 与 Yahoo Sports api 进行交互。

我遇到了一个问题，当用户去验证 Heroku 日志时告诉我：

```
ActiveRecord::StatementInvalid (PG::Error: ERROR:  value too long for type character varying(255) 
```

因此，在阅读了这篇 Stack Overflow 帖子[PostgreSQL string(255) limit - Rails, Ruby and Heroku](https://stackoverflow.com/questions/9784622)之后，我尝试将令牌从字符串更改为文本，因为这似乎是可能导致超过 255 限制的最长的事情。我的迁移看起来像这样：

```
class AddAccessTokenToAuthentications < ActiveRecord::Migration
  def change
    add_column :authentications, :token, :text, :limit => nil
    add_column :authentications, :secret, :string
  end
 end 
```

但是由于某种原因，它似乎将所有内容都更改为文本。当我在迁移后查看我的架构时，它显示：

```
create_table "authentications", :force => true do |t|
  t.integer  "user_id"
  t.text     "provider",   :limit => 255
  t.text     "uid",        :limit => 255
  t.datetime "created_at",                :null => false
  t.datetime "updated_at",                :null => false
  t.text     "token",      :limit => 255
  t.text     "secret",     :limit => 255
 end 
```

当我推送到 Heroku 并尝试在 Heroku 上迁移时，我收到此错误：

```
 -- create_table("authentications", {:force=>true})
     NOTICE:  CREATE TABLE will create implicit sequence "authentications_id_seq" for serial column "authentications.id"
   rake aborted!
   PG::Error: ERROR:  type modifier is not allowed for type "text"
   LINE 1: ...serial primary key, "user_id" integer, "provider" text(255),...
   : CREATE TABLE "authentications" ("id" serial primary key, "user_id" integer, "provider" text(255), "uid" text(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "token" text(255), "secret" text(255)) 
```

我不确定如何解决这个问题或我应该研究什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:00:52.577

```
PG::Error: ERROR:  type modifier is not allowed for type "text" 
```

意味着你不能使用`:limit`

你可以做的是：

```
t.text "provider" # = varchar(max) 
```

或者

```
t.string "provider",   :limit => 2147483647 # for max limit based on your db 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T20:53:15.910

您的`text`字段无法对其进行限制。也许您打算`string`改用？

# entity-framework-4 - 使用 MergeOption 将存储过程映射到实体框架

> ID：13868311
> 
> 赞同：0
> 
> 时间：2012-12-13T20:51:50.723
> 
> 标签：entity-framework-4

有没有办法以 ExecuteFunction 使用 MergeOption 参数和 NoTracking 选项的方式将存储过程映射到实体框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:59:13.817

您可以更新 T4 模板文件以添加“MergeOption.NoTracking”作为第二个参数。然后只需 R 键单击 .edmx 并选择“运行自定义工具”。

这是一个快速的解决方法，但我也想知道一个更长期的解决方案。如果这是唯一的解决方案，是否可以更新默认的 T4 模板，以便使用新的 EntityModel 自动进行，并且它们是否已存储。

{实体模型}.Context.tt 第 290 行：

```
"return ((IObjectContextAdapter)this).ObjectContext.ExecuteFunction{0}(\"{1}\", MergeOption.NoTracking{2});", 
```

我在我的 Repository 构造函数中设置了以下内容，但 MergeOption 似乎更干净

```
context = new Entities();
context.Configuration.AutoDetectChangesEnabled = false;
context.Configuration.ValidateOnSaveEnabled = false; 
```

# python - 引发 Child_Exception/OSError：[Errno 2] 没有此类文件错误

> ID：13868314
> 
> 赞同：0
> 
> 时间：2012-12-13T20:51:53.540
> 
> 标签：python, python-2.7

我正在使用[WARC Tools](http://mandal.ca/web.cgi/HelpOnWarcTools)，这是一个用于处理 WARC 文件的 python 库。我已经安装了所有东西，除了最后一个命令外，一切似乎都可以工作。虽然我怀疑你们中的许多人可能没有使用过这个工具，但也许你可以为我理解错误消息。

当我运行这个命令时：

`python /path/filesdump.py filtered.warc`根据文档，我立即收到此错误消息：

```
html/811cac8c-7430-403b-96a4-7d77137b0d46.html
Traceback (most recent call last):
  File "/users/ianmilligan1/desktop/warc/warc-tools-mandel/filesdump.py", line 63, in <module>
    sys.exit(main(sys.argv))
  File "/users/ianmilligan1/desktop/warc/warc-tools-mandel/filesdump.py", line 34, in main
    dump_archive(fh,name)
  File "/users/ianmilligan1/desktop/warc/warc-tools-mandel/filesdump.py", line 57, in dump_archive
    txt = record.filedump(content=True)
  File "/Users/ianmilligan1/Desktop/WARC/warc-tools-mandel/warctools/record.py", line 140, in filedump
    p = Popen(['lynx', '-dump', '-stdin', '-nomargins', '-unique_urls', '-width=120'], stdout=PIPE, stdin=PIPE, stderr=STDOUT)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 1228, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

这里发生了什么？你会建议我从哪里开始寻找？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:13:51.133

您需要安装[lynx](http://lynx.isc.org/)，这是 WARC Tools 似乎需要的命令行 Web 浏览器。这样就解决了。

发生的事情是 warctools/record.py 在第 140 行调用 lynx，而 Python 的子进程库没有找到 lynx 可执行文件，因此它抛出了异常。他们真的应该包装异常并提供更清晰的信息......无论如何。尝试一下，看看它是否可以解决它。

# visual-c++ - 开发使用不同运行时版本的 Cuda DLL

> ID：13868319
> 
> 赞同：1
> 
> 时间：2012-12-13T20:52:32.517
> 
> 标签：visual-c++, cuda

我对使用 Cuda 用 Visual C++ 开发的库有疑问。我想在不同的计算机上使用我的 dll，全部使用 NVIDIA 驱动程序，但这取决于 CUDART32_42_9.DLL 和 CUBLAS32_43_9.DLL；因此，根据 32_42_9，它不适用于任何不同的 cuda 版本：既不劣（这是合理的）也不优越（这是我的问题）。您对如何解决问题有任何建议吗？我是否必须部署带有 CUDART32_42_9.DLL 和 CUBLAS32_43_9.DL 的库？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T21:40:04.060

应用程序开发人员有责任随应用程序重新分发必要的 CUDA 库。CUDA Toolkit doc 目录中的 EULA.txt 文档有一个定义 Redistributable Software 的部分 Attachment A。可再发行软件包括但不限于 cudart* 和 cublas*。有关详细信息，请参阅 EULA.txt。

最终用户需要为其平台下载兼容版本的 NVIDIA 图形驱动程序。

# java - 如何取消 Spring 计时器执行

> ID：13868323
> 
> 赞同：11
> 
> 时间：2012-12-13T20:52:38.410
> 
> 标签：java, spring, scheduling

我需要取消 Spring 计时器的执行，或者至少根据某些条件更改执行频率。正在使用`org.springframework.scheduling.quartz.SimpleTriggerBean`和`org.springframework.scheduling.timer.ScheduledTimerTask`。找不到如何做的方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-13T22:07:36.230

**注意**：这适用于 Spring 3.0+

1.  阅读[有关调度任务的 Spring 文档](http://static.springsource.org/spring/docs/3.0.x/reference/scheduling.html)

2.  使用`TaskScheduler`服务，例如 a`TimerManagerTaskScheduler`或`ThreadPoolTaskScheduler`。

3.  通过调用一些`TaskScheduler.schedule*()`方法来安排你的任务**并存储返回的`ScheduledFuture`**.

4.  当您想取消执行时，调用`ScheduledFuture.cancel()`. 这将停止进一步调用您的任务。此时，您可以根据需要通过`TaskScheduler.schedule*()`使用不同参数调用您的任务来重新安排时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:44:32.933

到目前为止，这不是最好的解决方案，但是如果您想不出其他任何方法，则可以始终使用布尔值，每次触发事件时都会检查该布尔值，如果布尔值为 false，则 timertask 的 run 方法应立即终止.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T14:19:46.110

解决方案是为 org.springframework.scheduling.timer.TimerFactoryBean 分配一个 id，然后从应用程序中检索此 bean，将其转换为 Timer 并在该对象上调用取消方法。

# actionscript-3 - 从外部类更改主类上的变量

> ID：13868339
> 
> 赞同：0
> 
> 时间：2012-12-13T20:53:40.353
> 
> 标签：actionscript-3, class, variables, public-method

我想通过外部类video01中的函数terug将我的Main.as中的var filmAan更改为false。

这是我的 Main.as

```
package 
{
import flash.display.MovieClip;
import flash.events.MouseEvent;
import fl.video.*;

public class Main extends MovieClip 
{
    public function Main() 
    {
        trace( "hij werkt" ); 

        btn_1.addEventListener(MouseEvent.CLICK,speel1);
        btn_2.addEventListener(MouseEvent.CLICK,speel2);
        btn_3.addEventListener(MouseEvent.CLICK,speel3);
        btn_4.addEventListener(MouseEvent.CLICK,speel4);
        btn_5.addEventListener(MouseEvent.CLICK,speel5);
        btn_6.addEventListener(MouseEvent.CLICK,speel6);
        btn_7.addEventListener(MouseEvent.CLICK,speel7);
        btn_8.addEventListener(MouseEvent.CLICK,speel8);
        btn_9.addEventListener(MouseEvent.CLICK,speel9);

        var mc_video01:MovieClip = new video01();
        var mc_video02:MovieClip = new video02();
        var mc_video03:MovieClip = new video03();
        var mc_video04:MovieClip = new video04();
        var mc_video05:MovieClip = new video05();
        var mc_video06:MovieClip = new video06();
        var mc_video07:MovieClip = new video07();
        var mc_video08:MovieClip = new video08();
        var mc_video09:MovieClip = new video09();

        public var filmAan = false;

        function speel1(evtObj:MouseEvent):void 
        {
            if (filmAan == false) 
            {
                trace("knop 1 werkt");              

                addChild(mc_video01);
                mc_video01.x=340; 
                mc_video01.y=227;
                mc_video01.width=1360;
                mc_video01.height=1060;

                filmAan = true;
            }
            else
            {
                trace("knop 1 uitgeschakeld");
            }
        }

        function speel2(evtObj:MouseEvent):void 
        {
            if (filmAan == false) 
            {               
                trace("knop 2 werkt");

                addChild(mc_video02);
                mc_video02.x=340; 
                mc_video02.y=227;
                mc_video02.width=1360;
                mc_video02.height=1060;

                filmAan = true;
            }
            else
            {
                trace("knop 2 uitgeschakeld");
            }
        }

        function speel3(evtObj:MouseEvent):void 
        {           
            if (filmAan == false) 
            {
                trace("knop 3 werkt");

                addChild(mc_video03);
                mc_video03.x=340; 
                mc_video03.y=227;
                mc_video03.width=1360;
                mc_video03.height=1060;

                filmAan = true;
            }
            else
            {
                trace("knop 3 uitgeschakeld");
            }
        }

        function speel4(evtObj:MouseEvent):void 
        {
            if (filmAan == false) 
            {
                trace("knop 4 werkt");

                addChild(mc_video04);
                mc_video04.x=340; 
                mc_video04.y=227;
                mc_video04.width=1360;
                mc_video04.height=1060;

                filmAan = true;
            }
            else
            {
                trace("knop 4 uitgeschakeld");
            }
        }

        function speel5(evtObj:MouseEvent):void 
        {
            if (filmAan == false) 
            {
                trace("knop 5 werkt");

                addChild(mc_video05);
                mc_video05.x=340; 
                mc_video05.y=227;
                mc_video05.width=1360;
                mc_video05.height=1060;

                filmAan = true;
            }
            else
            {
                trace("knop 5 uitgeschakeld");
            }
        }

        function speel6(evtObj:MouseEvent):void 
        {
            if (filmAan == false) 
            {
                trace("knop 6 werkt");

                addChild(mc_video06);
                mc_video06.x=340; 
                mc_video06.y=227;
                mc_video06.width=1360;
                mc_video06.height=1060;

                filmAan = true;
            }
            else
            {
                trace("knop 6 uitgeschakeld");
            }
        }

        function speel7(evtObj:MouseEvent):void 
        {
            if (filmAan == false) 
            {
                trace("knop 7 werkt");

                addChild(mc_video07);
                mc_video07.x=340; 
                mc_video07.y=227;
                mc_video07.width=1360;
                mc_video07.height=1060;

                filmAan = true;
            }
            else
            {
                trace("knop 7 uitgeschakeld");
            }
        }

        function speel8(evtObj:MouseEvent):void 
        {
            if (filmAan == false) 
            {
                trace("knop 8 werkt");

                addChild(mc_video08);
                mc_video08.x=340; 
                mc_video08.y=227;
                mc_video08.width=1360;
                mc_video08.height=1060;

                filmAan = true;
            }
            else
            {
                trace("knop 8 uitgeschakeld");
            }
        }

        function speel9(evtObj:MouseEvent):void 
        {
            if (filmAan == false) 
            {
                trace("knop 9 werkt");

                addChild(mc_video09);
                mc_video09.x=340; 
                mc_video09.y=227;
                mc_video09.width=1360;
                mc_video09.height=1060;

                filmAan = true;
            }
            else
            {
                trace("knop 9 uitgeschakeld");
            }
        }
    }
}   
} 
```

这是我的 video01.as

```
package
{
import flash.display.MovieClip;
import flash.events.MouseEvent;

public class video01 extends MovieClip
{
    public function video01()
    {
        trace("movieclip 1 geladen");
        btn_terug.addEventListener(MouseEvent.CLICK, terug);
    }

    public function terug(evt:MouseEvent):void 
    {
        trace("knop ingedrukt");
        this.parent.removeChild(this);  

    }
}
} 
```

如何从 video01 类中更改 Main.as 中的 var？

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:24:01.197

看起来您的`video01`班级是 Main 班级的孩子。因此您可以使用`parent`关键字来访问`Main`该类。您需要强制转换 parent 以免引发编译器错误：

来自您的 video01 课程：

```
 Main(parent).filmAan = false; 
```

# regex - 如果是单词的一部分，MATLAB regexp 会跳过

> ID：13868348
> 
> 赞同：2
> 
> 时间：2012-12-13T20:53:54.433
> 
> 标签：regex, matlab

给定以下示例：

```
str = 'deriv*dot(N,iv)';
expr = 'iv';
idx = regexp(str,expr); 
```

这将返回带有 4 和 13 的 idx。如何只找到不属于单词的“iv”？

我尝试在 expr 中使用 Lookaround Operators，但无法得到我想要的结果。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T20:56:58.850

[似乎 Matlab 有它自己的单词边界转义序列。](http://www.mathworks.co.uk/help/matlab/matlab_prog/regular-expressions.html#f0-42983)

```
expr = '\<iv\>'; 
```

这将单词定义为由字母、数字和下划线组成的任何内容。如果您想要自己的定义（即只有字母），那么您需要环顾四周：

```
expr = '(?<![a-zA-Z])expr(?![a-zA-Z])'; 
```

# rest - force.com 标注异常无法通过代理进行隧道传输

> ID：13868350
> 
> 赞同：3
> 
> 时间：2012-12-13T20:53:59.153
> 
> 标签：rest, exception, force.com, callout

我们使用 REST API 从一个 Salesforce 组织调用另一个 Salesforce 组织。这一直有效到 11 月底。我们没有对受影响的类或配置进行任何更改。现在，在向 REST API 发送请求时，将抛出一个标注异常，并显示以下消息：“无法通过代理进行隧道。代理返回“HTTP/1.0 503 Service Unavailable”。对 REST API 的授权由会话 ID 完成。有谁知道问题是什么？

这里的代码剪断：

```
final String WS_ENDPOINT = 'https://login.salesforce.com/services/Soap/c/24.0'; 
final String REST_ENDPOINT = 'https://eu2.salesforce.com/services/apexrest/UsageReporterService';
final String USERNAME = '*****'; 
final String PASSWORD = '*****'; 

HTTP h = new HTTP();
HTTPRequest req = new HTTPRequest();
req.setMethod('POST');
req.setEndpoint(REST_ENDPOINT);
req.setHeader('Content-Type', 'application/json');
req.setTimeout(60000);
HTTP hLogin = new HTTP(); 
HTTPRequest reqLogin = new HTTPRequest(); 
reqLogin.setMethod('POST'); 
reqLogin.setEndpoint(WS_ENDPOINT);
reqLogin.setHeader('Content-Type', 'text/xml'); 
reqLogin.setHeader('SOAPAction', 'login'); 
reqLogin.setTimeout(60000); 

reqLogin.setCompressed(false); 
// get a valid session id
String sessionId;
String loginSoap = '<?xml version="1.0" encoding="UTF-8"?>';    
loginSoap += '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:urn="urn:enterprise.soap.sforce.com">';     
loginSoap += '<soapenv:Body>';     
loginSoap += '<urn:login>'; 
loginSoap += '<urn:username>' + USERNAME + '</urn:username>';     
loginSoap += '<urn:password>' + PASSWORD + '</urn:password>'; 
loginSoap += '</urn:login>';     
loginSoap += '</soapenv:Body>';     
loginSoap += '</soapenv:Envelope>';     
reqLogin.setBody(loginSoap); 

HTTPResponse respLogin; 
try {
    respLogin = hLogin.send(reqLogin);
} catch(CalloutException c){        
    return null;
}       

System.debug('++++++'+respLogin.getStatus() + ': ' + respLogin.getBody());
Dom.Document doc = new Dom.Document();
doc.load(respLogin.getBody());
Dom.XMLNode root = doc.getRootElement();
String ns = root.getNamespace();
Dom.XMLNode bodyEl = root.getChildElements()[0];

 if(bodyEl.getChildElements()[0].getName().equals('loginResponse')){
      sessionId = bodyEl.getChildElements()[0].getChildElement('result', ns).getChildElement('sessionId', ns).getText();
}

 // finished getting session Id     
  if(sessionId != null){ // login was successfull
    req.setHeader('Authorization', 'Bearer ' + sessionId);  
   // serialize data into json string
   UsageReporterModel usageReporterData = new UsageReporterModel();
   String inputStr = usageReporterData.serialize();
   req.setBody('{ "usageReportData" : ' + inputStr + '}');       
   // fire!
   HTTPResponse resp;
   try {
    resp = h.send(req);
   } catch(CalloutException c){             
        return null;
   }            
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T14:23:46.357

我怀疑这将与未正确列入白名单（或添加到“网络访问”对象）的组织之一的 IP 地址更改有关。由于它是 Salesforce 到 Salesforce，我希望 Salesforce.com 支持可以提供帮助吗？

# list - Prolog，我如何在列表中找到对？

> ID：13868358
> 
> 赞同：1
> 
> 时间：2012-12-13T20:54:50.143
> 
> 标签：list, prolog, logic

我有一个问题，我有一个包含数字元素的列表，例如示例中的。我想找到所有的配对，然后数一数。（每个元素只能是一对的一部分）

```
?- num_pairs([4,1,1,1,4],N).
N=1; 
```

谁能帮我解决这个问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:23:09.993

您需要几件事才能使其工作：

*   计算列表中项目重复次数的能力
*   从列表中删除与值匹配的所有元素的能力
*   有条件地增加数字的能力

以下是您可以计算的方法：

```
count([], _, 0).
count([H|T], H, R) :- count(T, H, RT), R is RT + 1.
count([H|T], X, R) :- H \= X, count(T, X, R). 
```

可以使用 SWI 的`delete/3`谓词进行删除；这是一个内置谓词。

有条件地添加一个需要两个规则 - 一个是当计数等于 1 时，另一个是当计数不等于 1 时。

```
add_if_count_is_one(H, T, RT, R) :- count(T, H, 1), R is RT + 1.
add_if_count_is_one(H, T, R, R) :- count(T, H, X), X \= 1. 
```

最后，计数对可能如下所示：

```
num_pairs([], 0).
num_pairs([H|T], R) :- delete(T, H, TT),
                       num_pairs(TT, RT),
                       add_if_count_is_one(H, T, RT, R). 
```

空列表没有对；当一个项目被计为一对的一部分时，它的副本将从列表的其余部分中删除。

[这是ideone上的这个运行程序。](http://ideone.com/AkZy3B)

# python - Python 类属性可以添加吗？

> ID：13868362
> 
> 赞同：0
> 
> 时间：2012-12-13T20:55:13.137
> 
> 标签：python, list, inheritance

我有一个具有以下类结构的项目：

```
class A(object):
    elems = [1, 2, 3]

class B(A):
    pass

class C(B):
    elems = [20, 100]

class D(B):
    elems = [4, 5] 
```

目前，Python 的默认继承行为是`elems`在每个后​​续属性声明中覆盖该属性，例如：

```
A.elems == [1, 2, 3]
B.elems == [1, 2, 3]
C.elems == [20, 100]
D.elems == [4, 5] 
```

我希望能够访问这些值的*附加*列表。换句话说，我希望能够检索以下列表：

```
A.collated() == [1, 2, 3]
B.collated() == [1, 2, 3]
C.collated() == [1, 2, 3, 20, 100]
D.collated() == [1, 2, 3, 4, 5] 
```

我不知道该怎么做。任何帮助将不胜感激。

在此先感谢，
-B

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T20:59:30.003

这里最简单的解决方案是明确：

```
class A(object):
    elems = [1, 2, 3]
    @classmethod
    def collated(cls):
      return sorted(cls.elems)

class B(A):
    pass

class C(B):
    elems = B.elems + [20, 100]

class D(B):
    elems = B.elems + [4, 5]

print "A.collated() == ", A.collated()
print "B.collated() == ", B.collated()
print "C.collated() == ", C.collated()
print "D.collated() == ", D.collated() 
```

你可以做*一些*棘手的事情来让它更加自动化，但我认为你不想这样做。（如果您认为需要，请先阅读描述符或元类的工作原理，然后再提出具体问题。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T20:59:32.287

只需明确并访问您要扩展的父级的类实例......

```
class A(object):
    elems = [1, 2, 3]

class B(A):
    elems = A.elems # or pass

class C(B):
    elems = B.elems + [20, 100]

class D(B):
    elems = B.elems + [4, 5]

print A.elems, B.elems, C.elems, D.elems
# [1, 2, 3] [1, 2, 3] [1, 2, 3, 20, 100] [1, 2, 3, 4, 5] 
```

# xml - 内容模型中不允许的元素

> ID：13868363
> 
> 赞同：1
> 
> 时间：2012-12-13T20:55:13.200
> 
> 标签：xml, validation, schema

那里。

我正在尝试使用自己制作的架构验证 xml 文档，但我不断收到此错误： **验证在第 40 行第 12 列停止：内容模型'(book*|article*|mastersthesis' 不允许元素'article' *|进行中*)'**

我的 xsd 文件格式正确，就像我的 xml 文件一样。第 40 行只是我的 xml 文档 ( `</bibEntry>`) 的结尾。

这是我的 xsd 文件的一部分：

```
<xs:element name="bibEntry" type="entryType"/>
 <xs:complexType name="entryType">
  <xs:choice>
    <xs:element ref="book" minOccurs="0" maxOccurs="unbounded"/>
    <xs:element ref="article" minOccurs="0" maxOccurs="unbounded"/>
    <xs:element ref="mastersthesis" minOccurs="0" maxOccurs="unbounded"/>
    <xs:element ref="inproceedings" minOccurs="0" maxOccurs="unbounded"/>
  </xs:choice>
 </xs:complexType>

<xs:element name="author" type="xs:string"/>
<xs:element name="title" type="xs:string"/>
<xs:element name="publisher" type="xs:string"/>
<xs:element name="year" type="xs:string"/>
<xs:element name="edition" type="xs:string"/>
<xs:element name="ISBN" type="xs:string"/>
<xs:element name="journal" type="xs:string"/>
<xs:element name="volume" type="xs:positiveInteger"/>
<xs:element name="number" type="xs:positiveInteger"/>
<xs:element name="pages" type="xs:string"/>
<xs:element name="school" type="xs:string"/>
<xs:element name="booktitle" type="xs:string"/>

<xs:element name="book" type="bookType"/>
 <xs:complexType name="bookType">
  <xs:sequence>
    <xs:element ref="author"/>
    <xs:element ref="title"/>
    <xs:element ref="publisher"/>
    <xs:element ref="year"/>
    <xs:element ref="edition"/>
    <xs:element ref="ISBN"/>
   </xs:sequence>
  <xs:attribute name="id" type="xs:NMTOKEN"/>
 </xs:complexType>

 <xs:element name="article" type="articleType"/>
  <xs:complexType name="articleType" mixed="true">
   <xs:sequence>
    <xs:element ref="author"/>
    <xs:element ref="title"/>
    <xs:element ref="year"/>
    <xs:element ref="journal"/>
    <xs:element ref="volume"/>
    <xs:element ref="number"/>
    <xs:element ref="pages"/>
   </xs:sequence>
   <xs:attribute name="id" type="xs:NMTOKEN"/>
 </xs:complexType> 
```

这是我的xml：

```
<bibEntry xmlns="http://www.w3schools.com"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.w3schools.com bibEntry.xsd">

  <book>
    <author>José Saramago</author>
    <title>Ensaio Sobre a Cegueira</title>
    <publisher>Caminho</publisher>
    <year>1995</year>
    <edition>1ª</edition>
    <ISBN>9722110217</ISBN>
  </book>

  <article>
    <author>Regev, Oded</author>
    <title>On Lattices, learning with errors, random linear codes and cryptography</title>
    <year>2009</year>
    <journal>Journal of the ACM</journal>
    <volume>56</volume>
    <number>13</number>
    <pages>34</pages>
  </article>

  <mastersthesis>
    <author>Menno den Hollander</author>
    <title>Automatic Unit Test Generation</title>
    <school>Delft University of Technology</school>
    <year>2010</year>
  </mastersthesis>

  <inproceedings>
    <author>Thomas Tilley</author>
    <title>Tool Support for FCA</title>
    <booktitle>ICFCA</booktitle>
    <year>2004</year>
    <pages>104-111</pages>
  </inproceedings>

</bibEntry> 
```

你能看出我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-19T13:47:59.337

您似乎过早地关闭了元素标签。代替

```
<xs:element name="article" type="articleType"/> 
```

尝试

```
<xs:element name="article" type="articleType">
 (....)
</xs:element> 
```

# php - 不同输入文本的不同数组

> ID：13868369
> 
> 赞同：2
> 
> 时间：2012-12-13T20:55:28.707
> 
> 标签：php, html

嗨，我想将每个输入文本的值存储在不同的数组中如何做到这一点，例如将输入文本 1 的值存储在数组 1 中，将输入文本 2 的值存储在数组 2 中等等如何实现这是打印的代码输入文本

```
for($r=1;$r<=10;$r++)
{
    echo"<form id='ponts'>
    <table>
    <tr>
   <td>Enter point number$r</td><td> <input type='text' id='pt$r' name='pt$r' pattern='[0-9.]+'/></td>

    </tr>
    </table>
    </form>";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:17:33.633

我想我不太了解，但下面的脚本可能是你想要的。

```
<?php

$g=$_GET;

if( isset($g['pt']) ){
  // the form has been submitted.
  $ptValues=$g['pt'];

  print_r($ptValues);

}

echo "<form id='ponts'><table>";

for($r=1;$r<=10;$r++) 
{
       echo "<tr><td> Enter point number$r</td><td> <input type='text' id='pt$r' name='pt[]' pattern='[0-9.]+'/> </td></tr>";
}

echo "</table></form>";

?> 
```

也许是这样：

```
<?php

$g=$_GET;

if( isset($g['pt0']) ){
  // the form has been submitted.
  $ptValues=array();

  for($i=0; isset($g['pt'.$i]); $i++ )
    $ptValues[]=$g['pt'.$i];  

  print_r($ptValues);

}

echo "<form id='ponts'><table>'";

for($r=1;$r<=10;$r++) 
{
       echo "<tr><td> Enter point number$r</td><td> <input type='text' id='pt$r' name='pt$r' pattern='[0-9.]+'/> </td></tr>";
}

echo "</table></form>";

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:19:23.997

也许这就是你正在寻找的

```
echo"<table id='points'>";
   for($r=1;$r<=10;$r++)
     {
   echo"
 <tr>
 <td>Enter point number".$r."</td><td> <input type='text' id='pt".$r."' name='pt".$r."' pattern='[0-9.]+'/></td>

  </tr>
  ";
}
echo "</table>"; 
```

我不知道你为什么在这里使用表单标签。

# jquery - ajax 在 jquerymobile 中工作，但在 phonegap 中不工作

> ID：13868374
> 
> 赞同：0
> 
> 时间：2012-12-13T20:55:53.620
> 
> 标签：jquery, cordova, jquery-mobile

我正在使用 jquerymobile 并用 phonegap 包装它。我正在使用 AJAX 从服务器检索数据，它在我的浏览器上运行良好，但是当我尝试使用 phonegap 应用程序时，ajax 调用似乎不起作用。在 AJAX 调用中，我调用了一个本地 php 文件，该文件使用代码行“file_get_contents”从服务器检索数据。我的 phonegap 版本是 2.0.0，我还尝试在 res\config.xml 文件中添加一个带有服务器 url 的访问标签，并且我允许在应用程序中连接互联网。

谢谢

这是我正在使用的 ajax 代码，当我向服务器提供直接 url 时，ajax 调用失败，当我向本地 php 文件（不在服务器中）提供 url 时，从服务器，ajax调用成功。

$.ajax({ url : url + query, dataType : 'html', success : function (response) {

```
 $.mobile.loading('hide');

        $('body').append(response);

        $.mobile.changePage('#page3');
    },
    error    : function () {           
        alert('loading error') ;
        $.mobile.loading('hide');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:09:14.650

确保您的服务器被列入白名单（即使它是本地的）。在此处查看详细信息：http: [//docs.phonegap.com/en/2.2.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.2.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

您只需添加“*”即可将所有网址列入白名单。此外，请确保您从绝对 URL 而非相对 URL 引用文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:11:53.103

另外，当您说“本地 php 文件”时，您是指本地服务器上的文件，还是同一文件目录中的文件？PhoneGap 不会处理PhoneGap 应用程序中目录结构中的PHP 文件。PHP 文件必须驻留在可以处理 PHP 的 Web 服务器上。

# javascript - 运行onbeforeunload后如何调用注销代码

> ID：13868375
> 
> 赞同：1
> 
> 时间：2012-12-13T20:56:01.097
> 
> 标签：javascript, onbeforeunload

在我的主页上有这样的东西：

```
<script language="javascript">

   window.onbeforeunload = function(evt) {
        var message = 'Are you sure you want to leave?';
        if (typeof evt == 'undefined') {
            evt = window.event;
        }       
        if (evt) {
            evt.returnValue = message;
        }
        return message;
    } 

</script> 
```

我想要做的是调用我的注销代码以释放所有资源，但只有当用户按下离开页面底部时，这可能......知道用户选择了女巫选项吗？

谢谢大家，最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:01:17.600

使用`onunload`事件：

```
window.onunload = function () {
    // your logout code
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-29T11:50:26.583

```
var myclose = false;
$(window).on('beforeunload', function(){
     var messege = 'You have closed the browser. Do you want to logout from your application?';
    setTimeout('myclose=false',10);
    myclose=true;
    return myclose;
});
$(window).on('onunload', function(){
    if (myclose==true) 
    {
        //the url of your logout page which invalidate session on logout 
        alert('hello');
        location.replace('logout.php') ;
    }
});

```
 var myclose = false;
    $(window).on('beforeunload', function(){
         var messege = 'You have closed the browser. Do you want to logout from your application?';
        setTimeout('myclose=false',10);
        myclose=true;
        return myclose;
    });
    $(window).on('onunload', function(){
        if (myclose==true) 
        {
            //the url of your logout page which invalidate session on logout 
            alert('hello');
            location.replace('logout.php') ;
        }
    });
```

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
``` 
```

# javascript - 表单提交按钮不起作用

> ID：13868378
> 
> 赞同：1
> 
> 时间：2012-12-13T20:56:17.040
> 
> 标签：javascript, css, forms, mailchimp, submit-button

我正在使用 mailchimp 嵌入代码来生成弹出式时事通讯注册表单。我不确定我哪里出错了。我已经为表单设置了样式并隐藏了一些字段。

现在它完成了，看起来表单提交按钮不会提交。任何想法，我已经阅读了一些问题并试图排除故障无济于事。我没有在萤火虫中发现任何错误。我认为问题可能与css有关。

您可以在网站上查看表单，它会在几秒钟后弹出。网站地址是[http://www.truechase.co.za](http://www.truechase.co.za)。任何想法，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:10:53.030

> 我已经为表单设置了样式并隐藏了一些字段。

那么那里（很可能）是你的问题:-) MailChimp 可能需要这些字段，但是因为你隐藏了它们而`display:none`它们没有提交。

查看这个 Stack Overflow 问题，了解如何在提交时隐藏字段*而不*丢失它们：

[在 display:none 元素中提交表单字段](https://stackoverflow.com/questions/8318428/submit-form-fields-inside-displaynone-element)

# c# - 确定列表中当前指向的项目

> ID：13868380
> 
> 赞同：2
> 
> 时间：2012-12-13T20:56:35.763
> 
> 标签：c#

我正在处理列表。我已经能够确定列表中项目的第一个和最后一个位置。我正在`getPostion`通过`Label`. 我的表单中的三个按钮：（`ShowFirstItem` `ShowNextItem`不起作用）并`ShowLastItem`在标签中显示相应的项目。我的下一个项目有问题。我没有持有当前`fruit_tree`. 所以我不确定如何添加一个`int`成员或另一个`fruit_tree`名为`current`. 我怎样才能找到下一个（第一个之后的项目）并显示结果？

```
 public class ListForTrees
 {

        public fruit_trees GetNextTree()
            {
                current = 0;
                fruit_trees ft = first_tree;
                int i = 0;
                while (i != current)
                {
                    ft = ft.next_tree;
                    i++;

                }

                return ft;
            }

            }

            ListForTrees mainlist = new ListForTrees();     

            private void BtnGo_Click(object sender, EventArgs e)
            {
                fruit_trees[] ar_items = {   new fruit_trees("cherry", 48, 12.95, 3),
                                                 new fruit_trees("pine", 36, 9.95, 8),
                                                 new fruit_trees("oak", 60, 14.95, 2),
                                                 new fruit_trees("peach", 54, 19.95, 3),
                                                 new fruit_trees("pear", 36, 11.85, 2),
                                                 new fruit_trees("apple", 62, 13.45, 5)
                                             };   
                mainlist = new ListForTrees(ar_items);
                fruit_trees current = mainlist.first_tree;   

                while (current != null)
                {
                    TxtOutput.AppendText(current.ToString() + Environment.NewLine);
                    current = current.next_tree;
                }
            }

            private void ShowFirstItem_Click_1(object sender, EventArgs e)
            {
            // Show First Item
        labelSpecificTree.Text = mainlist.first_tree.GetTreeType;

            } 

            private void ShowLastItem_Click(object sender, EventArgs e)
            {
            //Show Last Item
        labelSpecificTree.Text = mainlist.last_tree.GetTreeType;
            }

        private void ShowNextItem_Click(object sender, EventArgs e)
            {
            //Show Next Item
 fruit_trees obj = mainlist.GetNextTree();

            if (obj == null)
            {
                labelSpecificTree.Text = "No more trees!";
            }
            else
            {
                mainlist.current++;
                labelSpecificTree.Text = obj.next_tree.GetTreeType.ToString();                
            }   
            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:23:05.420

我不确定这是否能解决您的问题，但您可以添加

```
public fruit_trees current_tree; 
```

课堂上的领域`ListForTrees`。

然后，您可以轻松添加显示下一个并将项目指针移动到列表中的下一个项目的方法。记住当前项目可以避免每次想要列表中的下一棵树时浏览整个列表。代码可能如下所示：

```
public fruit_trees GetNextTree()
{
    //save currently pointed tree
    fruit_trees tree = this.current_tree;
    if (tree != null)
    {
        //move current_tree to the next tree, to be returned next time
        current_tree = current_tree.next_tree;
        //return saved tree object
    }
    return tree;
} 
```

为了使其工作，您还应该记住在`current_tree`添加到列表中的第一棵树时启动 的值。您还可以编写某种`ResetNextTreePointer()`方法将其指向列表中的第一棵树。

对代码的更多建议：

*   我想在你的类中使用属​​性会更好，所以改变

    ```
    public fruit_trees first_tree; 
    ```

    进入

    ```
    private fruit_trees first_tree;
    public fruit_trees First_tree { get { return first_tree; } 
    ```

    因为它会禁用你的类之外的任何类来显式地修改这些字段。

*   这段代码：

    ```
    if (count == 0)
    {
        ...
    }
    else if (count != 0)
    {
        ...
    } 
    ```

    可以改成：

    ```
    if (count == 0)
    {
        ...
    }
    else
    {
        ...
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:22:06.577

我会补充

```
public int current; 
```

到树列表。在构造函数中将其设置为 0；

然后创建一个返回当前fruit_trees对象的方法

```
public fruit_trees getCurrent()
{
    fruit_trees ft = first_tree;
    int i = 0;   
    while(i != current)
    {
       ft = ft.next_tree;
       i++;
    }
    return ft;
 } 
```

现在这个方法返回当前而不是下一个对象。因此，您在下一个按钮事件中有 2 个选项。
这里的问题是每次单击按钮时是否要移动到下一个树对象？如果是这样，增加当前属性，然后调用 getcurrent 来显示。如果您希望保留当前而不移动（即一遍又一遍地单击下一步将导致相同的结果），则显示 getcurrent().next_tree.tree_type 不增加当前。

# c# - 包含<>() 在匹配时不返回 true

> ID：13868381
> 
> 赞同：-5
> 
> 时间：2012-12-13T20:56:42.283
> 
> 标签：c#, string, contains

我有一个字符串

```
String input = "nbfs;jlt;\""; 
```

有了这个字符串，我使用 .Contains<>()

```
if (input.Contains<String>("nbfs;jlt;"))
{
    Console.WriteLine("True");
} 
```

还

```
 if (input.Contains("nbfs;jlt;"))
    {
        Console.WriteLine("True");
    } 
```

不起作用。为什么上面的 if 语句返回 false？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:02:19.887

`input.Contains<String>("nbfs;jlt;")`期待字符串的枚举。

采用：`input.Contains("nbfs;jlt;")`

**编辑**
作为对许多评论的回应，该`.Contains<T>`方法不会在标准字符串上编译：

```
string input = "nbfs;jlt;";
input.Contains<String>("nbfs;jlt;") // this will never compile 
```

该`.Contains<T>`方法需要某种类型的可枚举输入，例如以下编译：

```
input.Select( x => x.ToString() ).Contains<String>( "nbfs;jlt;" ) 
```

鉴于 OP 说代码可以编译，我建议打开一个新的控制台项目并从头开始。并输入所有内容，不要复制/粘贴。

附带说明：当您从文件复制/粘贴时，可能会隐藏一些奇怪的实体字符，因此这可能是 Contains 方法不适用于您的字符串的一个原因。

**编辑 2**
这将根据您的示例字符串编译并返回 true。将其复制/粘贴到控制台应用程序中，并确保不要在控制台应用程序中包含除默认程序集以外的任何程序集：

```
string input = "nbfs;jlt;\"";

bool isContained = input.Contains( "nbfs;jlt;" );

Console.WriteLine( isContained ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T20:57:51.877

`.Contains<String>`除非您使用某种扩展方法，否则这将无法编译？这可能是您不知道的自定义类吗？

你应该只使用字符串的内置包含`input.Contains("string");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T21:03:11.660

只需删除`<String>`并使用：`if (input.Contains("nbfs;jlt;"))`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T21:03:41.410

[String.Contains 不是泛型方法](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)，因此您不需要指定类型参数。

试试这个。

```
if (input.Contains("nbfs;jlt;"))
{
    Console.WriteLine("True");
} 
```

# iis - 有没有办法将 Web 角色部署的子目录指向 Azure 网站？

> ID：13868382
> 
> 赞同：3
> 
> 时间：2012-12-13T20:56:50.830
> 
> 标签：iis, azure

我希望能够让我的 ASP.NET Web 应用程序在 Web 角色上运行以实现可伸缩性，并有一个指向 Azure 网站的子目录。像这样：

[http://www.mysite.com](http://www.mysite.com) -> 解析为我的网络角色部署。

[http://www.mysite.com/blog](http://www.mysite.com/blog) -> 解析为部署在 Azure 上的 WordPress 网站。

我知道在虚拟机上我可以通过安装 WordPress 并将我的主站点下的虚拟目录指向 WordPress 应用程序的位置来做到这一点。我熟悉使用 ARR Web 场和 URL 重写在 IIS 中完成类似操作的能力，但这可以在 Azure Web 角色中完成吗？有没有更简单的方法？（比如使用一些非常棒的 Azure URL 重写工具）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:13:10.020

如果您使用的是 MVC，请注册一个路由：

```
routes.MapRoute(
    name: "Blog",
    url: "blog",
    defaults: new { controller = "Home", action = "Blog" }
); 
```

并让控制器/动作重定向：

```
public ActionResult Blog()
{
    return Redirect("http://blog.com")
} 
```

如果您使用网络表单，请将路由映射到重定向 aspx 页面，并在 Page_Load 中重定向。

最后，您可以通过在 web.config 中包含以下内容来使用 URL 重写：

```
<rewrite>
    <rules>
        <rule name="Blog">
            <match url="^.*/blog.*" />
            <action type="Rewrite" url="http://blog.com" />
        </rule>
    </rules>
</rewrite> 
```

# c# - 要移除的节点不是该节点的子节点

> ID：13868386
> 
> 赞同：2
> 
> 时间：2012-12-13T20:57:19.467
> 
> 标签：c#, xml, c#-2.0

我的代码应该要么将[XmlElement](http://msdn.microsoft.com/en-us/library/system.xml.xmlelement%28v=vs.80%29.aspx)添加到文档的根元素，要么替换现有元素（如果有的话）。这是我的代码：

```
if (existingInfo != null)
{
    existingInfo.ParentNode.ReplaceChild(existingInfo, newInfo);
}
else
{
    this.rootElement.AppendChild(info)
}
configDocument.Save(this.filePath); 
```

如果我要附加一个新项目，这不是问题。但是，当我尝试添加一个新项目时，我得到一个[ArgumentException](http://msdn.microsoft.com/en-us/library/system.argumentexception%28v=vs.80%29.aspx)说明“要删除的节点不是该节点的子节点”

这是一个 2.0 应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T21:06:53.930

如[文档中所述](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.replacechild%28v=vs.80%29.aspx)，第一个参数`ReplaceChild`必须是新节点，而不是旧节点。

因此，尝试：

```
existingInfo.ParentNode.ReplaceChild(newInfo, existingInfo); 
```

# c# - 将此 sql 查询转换为 LINQ to Lambda Left Outer Join

> ID：13868395
> 
> 赞同：0
> 
> 时间：2012-12-13T20:58:08.133
> 
> 标签：c#, sql, entity-framework-4

我试图将此 sql 查询转换为 Linq 到 lambda，但我没有成功我只有在表中与表中的 id 匹配的记录 requireddocuments 我也想要空值。sql 查询工作正常，但 lambda 不

SQL 查询。

```
 SELECT Document, Place, Record
   FROM RequiredApplicationDocuments LEFT OUTER JOIN Places ON
     RequiredApplicationDocuments.Id = Places.RequiredApplicationDocumentId
       WHERE Places.SecondPlaceId = 4 OR Places.SecondPlaceId IS NULL 
```

拉姆达

```
Database.RequiredApplicationDocuments.Join(Database.Placess, 
            ra => ra.Id, fa => fa.RequiredApplicationDocumentId, (fa, ra) =>
            new {Places = fa, RequiredApplicationDocument = ra}).DefaultIfEmpty().toList().Select(fa => new Places
                           {
                  FileName = fa.RequiredApplicationDocument.FileName,
                  LoanApplicationId = fa.RequiredApplicationDocument.LoanApplicationId,
                  Name = fa.RequiredApplicationDocument.Name,
                  RequiredApplicationDocument = fa.RequiredApplicationDocument.RequiredApplicationDocument,
                  Id = fa.Places.Id,
                  CreationDate = fa.RequiredApplicationDocument.CreationDate,
                  Contents = fa.RequiredApplicationDocument.Contents,
                  RequiredApplicationDocumentId = fa.RequiredApplicationDocument.RequiredApplicationDocumentId,
                  LoanApplication = fa.RequiredApplicationDocument.LoanApplication,
                  Type = fa.RequiredApplicationDocument.Type 
            }).AsQueryable(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:38:30.743

使用 GroupJoin

这更针对您的 SQL，而不是针对您的 LINQ

```
 var res = RequiredApplicationDocuments.GroupJoin(Places,
            p => p.Id,
            d => d.RequiredApplicationDocumentId,
            (d, places) => new
            {
                Document = d,

                Place = places.Where(p => p.SecondPlaceId == 4).FirstOrDefault(),

                // if don't want to exclude documents with "non-4" places only, 
                // remove this and last where clause
                // but this is what your SQL does
                HasNoPlaces = places.Count() == 0 

            }).Where(r => r.HasNoPlaces || r.Place != null); 
```

# html - 堆叠的浮动图像

> ID：13868398
> 
> 赞同：0
> 
> 时间：2012-12-13T20:58:18.600
> 
> 标签：html, css

我正在尝试在电影中创建一个演员列表，在演员姓名及其伴随角色的左侧有一个小的个人资料图像，但是我的图像奇怪地堆叠在一起，我不知道为什么。演员名称、他们的角色和图像都是从外部 API 动态提取的。

下面是当前布局的图像： ![当前布局](../Images/e2b9010df492bfbe3f454043223111f4.png)

随附的 HTML 和 CSS 如下： **HTML**

```
<?php
    foreach($tmdb_cast['cast'] as $castMember){
        if ($tmp++ < 10)
            echo '<img src="http://cf2.imgobject.com/t/p/w45' . $castMember['profile_path'] . '" class="actor_image" alt="' . $castMember['name'] . '" title="' . $castMember['name'] . '" />';
            echo '<p>' . $castMember['character'] . ' - ' . $castMember['name'] . '</p>';
    }
    echo '<p id="morecast"><a href="http://www.imdb.com/title/' . $imdb_id . '/fullcredits" alt="View full cast list on IMDb">[...view all cast]</a></p>'
?> 
```

**CSS**

```
#cast {
    margin-left: 50%;
    border: solid 1px red;
}

.actor_image {
    float: left;
}

#morecast {
    text-align: right;
} 
```

我试图实现的布局类似于 IMDb 上展示的布局，演员的姓名和角色与图像垂直对齐： ![想要的布局](../Images/14d614d6ebf6fb37b2929849c62828f7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:04:12.363

看起来您正在浮动图像，但没有在图像+文本单元之间应用“清除”。尝试应用“clear: both;” 每个演员实例之间？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:18:50.457

将 image 和 p 元素包装在一个 div 中，并在 div 上有 clear:both 。将内联样式设置为一个类。我将它内联作为一个快速而肮脏的例子。

```
foreach($tmdb_cast['cast'] as $castMember){
    if ($tmp++ < 10)
        echo '<div style="clear: both;">'
        echo '<img src="http://cf2.imgobject.com/t/p/w45' . $castMember['profile_path'] . '" class="actor_image" alt="' . $castMember['name'] . '" title="' . $castMember['name'] . '" />';
        echo '<p>' . $castMember['character'] . ' - ' . $castMember['name'] . '</p>';
        echo '</div>'
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T21:21:31.927

我不方便创建一个包装每个图像和文本组的 css 类：

```
echo '<div class="actor">
         <img src="http://cf2.imgobject.com/t/p/w45' . $castMember['profile_path'] . '"      class="actor_image" alt="' . $castMember['name'] . '" title="' . $castMember['name'] . '"   />';
echo     '<p>' . $castMember['character'] . ' - ' . $castMember['name'] . '</p>
      </div>'; 
```

并浮动每个容器

```
.actor{
    float:left;
    clear: left;
} 
```

现在你有一个围绕图像+文本组的框，你可以浮动。如果这不能解决问题，下一步是定义`.actor` “宽度”属性

# ruby-on-rails - 本地主机上的 Webrick 和 Firefox - 每种 JavaScript 文件类型的重复请求

> ID：13868400
> 
> 赞同：2
> 
> 时间：2012-12-13T20:58:27.963
> 
> 标签：ruby-on-rails, ruby-on-rails-3, webrick

# 问题：

使用***Firefox***和***Webrick***，every`JavaScript` `(.js)` `file type`被***重复请求***，这导致每一个*页面加载*太慢。

# 使用 Internet Explorer：

使用 Internet Explorer，every 的重复请求`JavaScript` `(.js)` `file type`不会在每次*页面加载*时发生。

*每次页面加载*的*处理消息*类似于以下示例：

 *```
Started GET "/home/css_middle_two" for *[localhost]*
Processing by HomeController#css_middle_two as HTML
  Rendered home/css_middle_two.html.erb within layouts/application (0.0ms)
Completed 200 OK in 62ms (Views: 62.4ms | ActiveRecord: 0.0ms) 
```

# 使用火狐：

在***Firefox***中，它确实与重复出现的处理消息一起发生`304 Not Modified`。

在***Firefox***中清除`cache`和，将导致 every 的***第一次***请求成功 - 但在那之后，***每次页面加载***时every的*重复请求*仍然会发生。`cookies`**`JavaScript` `(.js)` `file type`*`JavaScript` `(.js)` `file type`***

 ***每条*处理消息*都类似于此示例：

```
Started GET "/assets/jquery-ui-1.9.2.custom/development-bundle/ui/jquery.ui.effe
ct-drop.js?body=1" for *[localhost]*
Served asset /jquery-ui-1.9.2.custom/development-bundle/ui/jquery.ui.effect-drop
.js - 304 Not Modified (15ms) 
```

# 问题：

是什么导致了这种情况 - 即使清除了***Firefox***`cache`的and ？`cookies`

 ** * *

重复请求由 Firefox 的缓存完成。但是，是什么导致重复请求的调用？这意味着，重复请求的调用是由哪个因素引起的？*****

# sql-server - SQL Server 服务不接受连接

> ID：13868407
> 
> 赞同：0
> 
> 时间：2012-12-13T20:58:43.053
> 
> 标签：sql-server, sql-server-2008, service

我在服务器上随机发生了一个奇怪的问题。有些早上，我们的客户会打电话说他们的网站无法正常工作，并出现以下错误消息：

> 基础提供程序在打开时失败。

我为此找到的临时解决方法是手动进入并重新启动 SQL Server 服务。一旦完成，它就可以正常工作，直到下一个随机时间发生。所以我的问题是，有人知道到底发生了什么吗？如果是这样，我以后如何防止这种情况发生？

我已经尝试到处搜索这个，唯一的解释是更新正在应用于服务并且它没有正确重新启动。但我找不到任何修复程序。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:15:10.280

这个错误：

```
'FCB::Open failed: could not open file (LDF file) for the file number 2\. OS error: 32( The process cannot access the file because it's being used by another process) 
```

很麻烦，不应该发生，除非您刚刚重新启动 SQL 服务。它很容易导致您看到的问题。我会把这个带到 GoDaddy。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-06T08:57:05.290

如果您通过 Nagios 检查收到此错误。确保取消选择“自动关闭”作为数据库上的选项。

您可以在以下选项中选择选项：数据库属性-> 选项此处在自动关闭处选择：false

# tortoisecvs - 修复 CVSNT 2.5.05

> ID：13868408
> 
> 赞同：4
> 
> 时间：2012-12-13T20:58:45.690
> 
> 标签：tortoisecvs, cvsnt

TortoiseCVS 带有捆绑的 CVSNT 二进制文件。
较旧的版本附带 CVSNT 2.5.03，结果证明存在安全漏洞。
最新版本 (1.12.5) 带有 CVSNT 2.5.05，它有几个问题：

*   它会弹出提示您购买商业版本的弹出窗口。
*   它将广告插入到提交注释中。
*   它有一个错误，导致 Windows 命令行控制台处于混乱状态。
*   源代码 (GPL) 不容易获得。

一些参考资料：
- [CVSNT 发生了什么？](https://stackoverflow.com/questions/5327285/what-is-going-on-with-cvsnt)
-[批处理脚本不再起作用？](https://stackoverflow.com/questions/5913296/batch-scripts-no-longer-work)

最近，有人将其发布到 TortoiseCVS 邮件列表：

> 我找到了来源并进行了以下修复
> version_fu.h - 设置“套件”标志以避免弹出窗口和广告
> win32.cpp - 保存原始代码页并在退出时恢复它
> 
> 从[http://www.mediafire.com/?ys93oh4bdj1auby 获取](http://www.mediafire.com/?ys93oh4bdj1auby)
> 
> 只有 cvsnt.dll 需要编译

我下载了源代码并尝试编译它们。不幸的是，他们似乎需要相当多的其他软件包（openssl、iconv、mysql、postgres 等......我数不清了）是开源的，但仍然需要寻找......
结合我有限的时间和缺乏工具（我没有 VS2008） 我放弃了自己构建它的努力。

我尝试联系消息的作者，但他处于类似的位置（并且不再使用 CVSNT）。

联系 TortoiseVCS 维护者也被证明是徒劳的：

> 这不是我要承担的项目。
> 如今，TortoiseCVS 在我的优先级列表中非常低。

如果有人愿意从提供的源代码构建“固定”CVSNT.DLL 并使其可用，我将不胜感激！

谢谢，
亚历克斯。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-12-19T06:10:34.823

当然——你可以在这里得到它——在一个安装程序中编译，其中包括 TortoiseCVS 和带有大量错误修复的最新 CVSNT 代码：http: [//march-hare.com/cvsnt/features/tortoise/](http://march-hare.com/cvsnt/features/tortoise/)

我们收取的少量费用是用于支付我们开发和分发软件的成本，包括 MSDN 的许可费用以及对相关项目的财务贡献，例如 TortoiseCVS 项目、Bugzilla 项目、FSF 等。源代码包含在价格中.

请记住，自由软件是关于自由（如自由新闻）而不是价格： [http ://www.gnu.org/philosophy/free-sw.html](http://www.gnu.org/philosophy/free-sw.html)

# android - 更改android开发设备ID

> ID：13868411
> 
> 赞同：3
> 
> 时间：2012-12-13T20:58:58.433
> 
> 标签：android, adb

我想将多个 android 设备连接到同一台机器并由 adb 管理它们。不幸的是，一些 android 模型向 adb 显示了相同的开发设备 ID。有没有办法更改开发设备ID？

```
$ adb devices
List of devices attached 
LG_ANDROID_E0OPEN_GB_   device
LG_ANDROID_E0OPEN_GB_   device 
```

请注意，这个问题与[9786928](https://stackoverflow.com/questions/9786928/how-can-i-change-the-device-name-adb-devices)有关。据我了解，OP被误解了，问题仍未得到解答。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T01:57:45.377

不是不改变adb。adb“服务器”（即在您的工作站上运行的部分）仅使用它从设备获得的值，而这些值又由引导加载程序设置。理论上，您可以修改 adb 服务器以在字符串中包含其他信息，例如插入设备时分配的 USB 设备编号（如果您在 Linux 上，运行`lsusb`并想象“bus”和“device”值是包含在设备 ID 中）。

您也可以通过安装自定义 ROM 来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:30:47.690

对于 LG E400，有一个固件更新 (V10i-JUN-01-2012) 可解决此问题。

在更新之前，我看到所有设备的 ID 都与您一样，更新后的设备具有唯一的 ID。

# postgresql - 无法与具有可延迟主键的表建立关系

> ID：13868418
> 
> 赞同：1
> 
> 时间：2012-12-13T20:59:30.387
> 
> 标签：postgresql, pgadmin

我正在构建我的第一个 PostgreSQL 数据库。现在它只是两个表（表 A 与表 B 的关系为 1：N）。表 A 有一个不可延迟的主键，而表 B 有一个可延迟的主键。当我尝试使用指向表 B 的主键（另一个 1:N 关系）的外键添加表 C 时，PgAdmin 拒绝创建表并返回错误消息：

> 错误：不能对引用的表“table_B”使用可延迟的唯一约束

从我之前的搜索来看，可延迟主键似乎是正常的解决方案。在 PgAdmin 中真的有可能吗？我需要一些特殊的技巧才能运行吗？

我在 32 位 Windows XP 上使用 PostgreSQL 9.1.3 和 PgAdmin III 1.14.3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T21:26:09.823

我相信这是不可能的。引用 PostgreSQL[文档](http://www.postgresql.org/docs/9.4/static/sql-createtable.html)中关于外键的内容：

> 被引用的列必须是被引用表中不可延迟的唯一或主键约束的列。

# php - 使用 PHP 基本名称将 ID 回显到具有锚标记的链接？

> ID：13868420
> 
> 赞同：0
> 
> 时间：2012-12-13T20:59:41.627
> 
> 标签：php

我想知道如果链接都在同一页面上，是否可以在 PHP 中使用 basename 函数来回显链接的新 ID（以便我可以根据用户所在的位置设置它们的样式）？具体来说，我的网站是一个向下滚动的网站，所以一切都在一个页面上。我意识到如果我的网站有多个页面，您可以执行以下操作：

```
<?php $currentPage = basename($_SERVER['SCRIPT_FILENAME']); ?>
<ul>
    <li><a href="index.php" <?php if ($currentPage == 'index.php') {
                        echo 'id="here"';} ?>>HOME</a></li> 
```

当然，您只需使用 CSS 设置“此处”样式以反映用户的当前页面。但是如果我使用锚标签呢？

```
<?php $currentPage = basename($_SERVER['SCRIPT_FILENAME']); ?>
    <ul>
        <li><a href="index.php" <?php if ($currentPage == 'index.php#home') {
                            echo 'id="here"';} ?>>HOME</a></li> 
```

这不起作用。这可以使用PHP来完成吗？如果没有，是否有 JavaScript 方法可以做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:03:39.507

片段不发送到服务器。服务器所知道的就是您在`index.php`.

但是，您可以使用`:target`伪类来识别片段中引用的元素。

因此，例如，如果我去`http://example.com/index.php#section`那个页面有：

```
<h1 id="section">Some title</h1> 
```

和：

```
:target {background-color:#ccc;} 
```

然后`<h1>`标签将被突出显示。

# ios - 当 musicPlayer 使用 setQueueWithItemCollection:playlist 时播放错误的播放列表

> ID：13868425
> 
> 赞同：1
> 
> 时间：2012-12-13T20:59:58.340
> 
> 标签：ios, mpmusicplayercontroller, mpmediaitemcollection

我正在尝试使用以下代码从我的 iTunes 库中加载播放列表。该代码适用于所有播放列表名称，但名为“Christmas & pop mix”的播放列表名称除外（其他播放列表名称的名称中也有一个 &）。对于“Christmas & pop mix”，音乐播放器正在加载名为“3, 4, & 5 Star Music”的播放列表。请注意，在下面的 for 循环中可以找到播放列表“Christmas & pop mix”。但实际播放的集合是错误的。任何想法我可以如何追踪这个问题？

```
 NSString *nameOfPlaylistToPlay = @"Christmas & pop mix";
        // Get a collection of all playlists on the device
        MPMediaQuery *playlistsQuery = [MPMediaQuery playlistsQuery];
        NSArray *localPlaylists = [playlistsQuery collections];

        // Check each playlist to see if it is the right one
        for (MPMediaItemCollection *playlist in localPlaylists) {
            NSString *playlistName = [playlist valueForProperty: MPMediaPlaylistPropertyName];
            if ([playlistName isEqualToString:nameOfPlaylistToPlay]) {
                // Add the playlist to the player's queue and get out of here
                [musicPlayer setQueueWithItemCollection:playlist];
                playlistFound = YES;
                break;
            }
        }

        [musicPlayer play]; 
```

# java - Java 对我的 jar 没有任何作用 - 来自 VB.net

> ID：13868428
> 
> 赞同：0
> 
> 时间：2012-12-13T20:59:59.433
> 
> 标签：java, vb.net, minecraft

我制作了一个用于启动游戏的项目（.jar 文件），但它不起作用。我尝试了很多东西，最后；Java 推出。没有错误。但是1个问题。游戏本身没有启动，我确信我使用了正确的参数，因为我会得到一个错误。这是我的代码。我弹出一个 CMD 窗口，标题为“[path to java]\java.exe”并立即消失。

```
 Dim process As New Process
    Dim info As New ProcessStartInfo
    info.FileName = GetJavaHome() + "\java.exe"
    info.CreateNoWindow = False
    info.UseShellExecute = False
    info.RedirectStandardError = False
    info.RedirectStandardOutput = True
    '''' Dim args As String = "-jar ""{6}"" -datafolder{0} -natives{1} -lwjgl{2} -mlcfg{3} -mlmod{4} -j{5} -u{6} -s{7}"
    'Got error: Corrupt jar file... Someone with Minecraft Experience can help me to launch it?
    Dim args As String = "-jar ""{6}"" -datafolder ""{0}"" -natives ""{1}"" -lwjgl ""{2}"" -mlcfg ""{3}"" -mlmod ""{4}"" -j ""{6}"" -u ""{7}"" -s ""{8}"""
    ' Got CMD window popping up with error and disappearing
    info.Arguments = String.Format(args, Application.StartupPath, My.Application.Info.DirectoryPath & "\bin\natives\", My.Application.Info.DirectoryPath & "\bin\lwjgl.jar", My.Application.Info.DirectoryPath & "\config\", My.Application.Info.DirectoryPath & "\mods\", My.Application.Info.DirectoryPath & "\mods\", Application.StartupPath & "\bin\minecraft.jar", TextBox1.Text, result)
    'info.Arguments = info.Arguments.Replace("\bin\minecraft.jar", My.Application.Info.DirectoryPath + "\bin\minecraft.jar")
    process.StartInfo = info
    process.Start() 
```

现在，错误是：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: org/lwjgl/LWJGLException 
```

而且我很确定我通过测试定义了 LWJGL jar 文件：

```
 "C:\Program Files (x86)\Java\jre7\bin\java.exe" -jar "C:\Users\Max Korlaar\Dropbox\Max & Alex\MineCraft Launcher\MineCraft Launcher\bin\Debug\bin\minecraft.jar" -lwjgl "C:\Users\Max Korlaar\Dropbox\Max & Alex\MineCraft Launcher\MineCraft Launcher\bin\Debug\bin\lwjgl.jar" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T23:00:38.410

您应该检查的地方是[从命令行启动 Minecraft - 使用名称和密码作为前缀](https://stackoverflow.com/questions/14531917/launch-minecraft-from-command-line-usename-and-password-as-prefix)。例子：

```
java -Xms512m -Xmx1g -Djava.library.path=natives/ -cp "minecraft.jar;lwjgl.jar;lwjgl_util.jar" net.minecraft.client.Minecraft <username> <sessionID> 
```

# java - 简单的碰撞检测 Java

> ID：13868429
> 
> 赞同：-1
> 
> 时间：2012-12-13T21:00:09.557
> 
> 标签：java, collision

我检查了以下链接：

[http://www.ehow.com/how_12134402_detect-rectangle-collision-java.html](http://www.ehow.com/how_12134402_detect-rectangle-collision-java.html)

我已经在我的播放器和房子周围制作了 2 个矩形，但对我的 if 语句应该是什么样子感到困惑，我在 x 上设置了一个布尔值，这意味着如果我的矩形相交 x 将返回 true，所以我知道我从

```
if(x=true){
    //what to type in here for my collision?
} 
```

我的 2D 状态更改游戏需要这种碰撞，我有一个玩家通过按键输入和地图上的房子四处移动，我希望我的玩家不能穿过房子。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:02:31.440

用于`Rectangle2D.Double rect = new Rectangle2D.Double(x,y,w,h))`定义您的碰撞盒。

然后检查

```
rect.contains(x,y); 
```

或者

```
bool isCollision = rectOne.intersects(rectTwo); 
```

或者更完整的例子

```
// returns true at the first collision
// returns false if no collision with none of the houses
Rectangle2D.Double player = new Rectangle2D.Double(x,y,w,h);
Rectangle2D.Double[] houses = map.getHouseBounds();
boolean isAnyCollision = false;
int i = 0;
while (!isAnyCollision && cnt < houses.length) {
   isAnyCollision = player.intersects(houses[i]);
}
return isAnyCollision; 
```

# jquery - 如何防止在 jquery 中为 asp.net 站点缓存

> ID：13868430
> 
> 赞同：0
> 
> 时间：2012-12-13T21:00:12.490
> 
> 标签：jquery, asp.net-mvc

我有一个带有 jquery 的带有 asp.net 的 MVC4 应用程序，该项目在第一时间加载所有页面，然后通过 ajax 更新内容。

注销应用程序后，所有页面都保留在缓存中。导致下次登录时，新数据与旧数据混合或重复某些数据。

如何在注销时删除所有缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:03:21.527

我假设浏览器是缓存页面的浏览器。如果是这种情况，您不能在浏览器注销时简单地从浏览器中删除缓存。

相反，您需要告诉浏览器不要缓存任何页面。

您可以使用简单的操作过滤器来执行此操作并覆盖该`OnResultExecuting`方法

```
 public override void OnResultExecuting(ResultExecutingContext filterContext)
    {
        filterContext.HttpContext.Response.Cache.SetExpires(DateTime.UtcNow.AddDays(-1));
        filterContext.HttpContext.Response.Cache.SetValidUntilExpires(false);
        filterContext.HttpContext.Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
        filterContext.HttpContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);

        base.OnResultExecuting(filterContext);
    } 
```

# asp.net - SQL Server Express 和 SQL Server Compact Edition

> ID：13868438
> 
> 赞同：0
> 
> 时间：2012-12-13T21:01:13.233
> 
> 标签：asp.net, sql-server, sql-server-ce, umbraco, sql-server-express

我刚刚建立了我的第一个 Umbraco 站点，现在我想将它移交给 Web 服务器上的部署。但是，我使用 Web Matrix 在本地计算机上构建了站点，它使用了一个 SQL Server Compact Edition 数据库，该数据库在一个`.sdf`文件中表示。

我有点担心这对我将站点传递给的人是否有用（他们有许多使用 SQL Server 在此服务器上运行的基于 Umbraco 的站点） - 所以我安装了 SQL Server Express 并迁移了数据库从精简版到快捷版。但是（再次），我似乎找不到将完整数据库导出到文件的任何方法，然后可以将其导入到 Web 服务器上的数据库中。

我猜有几点 - 首先，精简版`.sdf`文件实际上是否足以让某人将数据库导入 SQL Server Standard？如果做不到这一点，我将如何将数据库从 SQL Server Express 导出到可用于此目的的文件？

在此先感谢 - 这是我第一次涉足 .net 开发，所以我很感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:38:19.767

您可以将 SQL CE 数据库 (.sdf) 提供给管理 Web 服务器的人员。默认情况下，SQL CE 数据库可以在 .NET 网络服务器上运行。如果出于某种原因，您希望将其迁移到 SQL Server，您可以通过 Web Matrix ( [http://www.microsoft.com/web/](http://www.microsoft.com/web/) )进行此操作

当您已经将 SQL CE 数据库转换为 SQL Server 时，您可以：

1.  通过 SQL Server Management Studio 工具进行备份并在 Web 服务器上恢复备份
2.  或者您可以使用 SQL Server Management Studio 工具将数据库脚本编写为可以在 Web 服务器上执行的 .sql 文件

我更喜欢第一个选项。

# javascript - JavaScript中兄弟元素的停止事件

> ID：13868441
> 
> 赞同：-1
> 
> 时间：2012-12-13T21:01:57.050
> 
> 标签：javascript, jquery, events, animation, fadeout

我有一个事件列表，发生了一个悬停动画序列。最后出现了社交图标。当我将鼠标悬停在社交图标上时，鼠标离开事件在另一个兄弟姐妹上触发，社交按钮消失。

这是源代码：

```
<li>
    <a href="/events/Festival/testing+2-2">
        <div class="upcoming-event" style="background-color: rgb(255, 255, 255);">
            <div class="ue-content">
                <div class="ue-category" style="height: 20px; background-color: rgb(255, 255, 255);"><span><h5>Festival</h5></span></div>
                <img src="http://www.domain.gr/image.php?source=events%2Fce06e21958cd6e9d8c5da37a7f7bf9e9%2Fimages%2Fdefault%2F34-rvca-flyer.jpg&amp;w=150&amp;h=220&amp;out=raw" alt="Event photo">
                <div class="ue-corner" style="width: 0px;"></div>
                <div class="slider" style="height: 50px;">
                    <div class="ue-title"><span><h5 style="padding:5px;">testing 2</h5></span></div>
                    <div class="ue-info"><span>ffs</span></div>
                </div>
            </div>
        </div>
    </a>
    <div class="add-this" style="display: none;">

    <div class="addthis_toolbox addthis_default_style">
    <a class="addthis_button_preferred_1 addthis_button_facebook at300b" addthis:title="testing 2" addthis:description="ffs" addthis:url="http://www.domain.gr/events/Festival/testing+2-2" title="Facebook" href="#"><span class="at16nc at300bs at15nc at15t_facebook at16t_facebook"><span class="at_a11y">Share on facebook</span></span></a>
    <a class="addthis_button_preferred_2 addthis_button_twitter at300b" addthis:title="testing 2" addthis:description="ffs" addthis:url="http://www.domain.gr/events/Festival/testing+2-2" title="Tweet This" href="#"><span class="at16nc at300bs at15nc at15t_twitter at16t_twitter"><span class="at_a11y">Share on twitter</span></span></a>
    <a class="addthis_counter addthis_bubble_style" style="display: block;" href="#"><a class="addthis_button_expanded" target="_blank" title="View more services" href="#">0</a><a class="atc_s addthis_button_compact"><span></span></a></a>
    <div class="atclear"></div></div>

    </div>
</li> 
```

当我将鼠标悬停在社交图标上时，我想停止动画。

这是JavaScript

```
var upcomingEvents = 0;
var addthisOver = false;
function fetchEvents(poffset, plimit, uoffset, ulimit){

        //console.log(poffset + ' - ' + plimit + ' - ' + uoffset + ' - ' + ulimit)

        var request = $.ajax({
          url: "/fetch_events.php",
          type: "POST",
          data: {
                'poffset': poffset,
                'plimit' : plimit,
                'uoffset': uoffset,
                'ulimit' : ulimit
                },
          dataType: "json"
        })

        request.done(function(msg)
        {
            //console.log(msg)

            if(msg != null && typeof(msg['promoted'])=='object' && (msg['promoted'] instanceof Array))
            {
                handleEvents(msg['promoted'], msg['promoted'].length, 'promoted');

            }
            if(msg != null && typeof(msg['upcoming'])=='object' && (msg['upcoming'] instanceof Array))
            {
                upcomingEvents = parseInt(upcomingEvents + msg['upcoming'].length);
                handleEvents(msg['upcoming'], msg['upcoming'].length, 'upcoming');
            }
        })

        request.fail(function(jqXHR, textStatus) {
            //alert( "Error: " + jqXHR.responseText );
            //console.log(jqXHR.responseText);
            //console.log(jqXHR.statusText);
            //console.log(textStatus);
            //console.log(jqXHR);
        })

        request.complete(function(){
            //console.log("Ajax request complete!");
        })

}

$(document).ready(function(){
    $("#more-upcoming-events").click(function(){
        new fetchEvents(0,4,upcomingEvents,8);
    });
});

function handleEvents(data, num, type)
{

    var html = '';

    for(i = 0; i < num; i++)
    {
        html += data[i];
    }

    if(type == 'upcoming')
    {

            $('.add-this').mouseenter(function(){
                addthisOver = true;
            })

            $('.add-this').mouseleave(function(){
                addthisOver = false;
            })

        $("#upcoming-event").off();

        $("#upcoming-events").append(html);

        $('.upcoming-event').mouseenter(function(){
            $(this).find('div.ue-category').stop(true,true).animate({height:'0px',queue:false},100);
            $(this).stop(true,true).delay(100).animate({backgroundColor:'#a00000',queue:false},250);
            $(this).find('div.slider').stop(true,true).delay(350).animate({height:'221px',queue:false},250);
            $(this).find('div.ue-corner').stop(true,true).delay(600).animate({width:'58px',queue:false},100);   //58
            $(this.parentNode.parentNode).find('div.add-this').delay(700).fadeIn(100);
        });

        $('.upcoming-event').mouseleave(function(event){

            /*
            trg = $(this.parentNode.parentNode).find(event.target);

            if(event.target != trg[0])
            {

            }
            */

            if(addthisOver == false)
            {
                $(this.parentNode.parentNode).find('div.add-this').fadeOut(100);
                $(this).find('div.ue-corner').delay(100).animate({width:'0px',queue:true},100);
                $(this).find('div.slider').delay(200).animate({height:'50px',queue:true},250);
                $(this).delay(450).animate({backgroundColor:'#ffffff',queue:true},250);
                $(this).find('div.ue-category').delay(700).animate({backgroundColor:'#ffffff',height:'20px',queue:true},100);
            }           
        });

    }
    else if(type == 'promoted')
    {
        var cells = '';
        for(y = 0; y < parseInt(4 - num); y++)
        {
            cells += '<td valign="top"></td>';
        }

        var tableHTML = '<table cellpadding="0" cellspacing="0"><tr>' + html + cells + '</tr></table>';
        $("#top-events-table").html(tableHTML); 
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:29:47.593

试试这些：

```
$('.upcoming-event').mouseover(function(){

$('.upcoming-event').mouseout(function(event){ 
```

编辑：实际上，我明白你的问题是什么——你的“add-this”div 和你的社交图标在“upcoming-event”div 之外，导致 mouseleave 触发。将“add-this” div 移动到“upcoming-event” div 中，您应该可以开始了。

```
<li>

        <div class="upcoming-event" style="background-color: rgb(255, 255, 255);">\
          <a href="/events/Festival/testing+2-2">
            <div class="ue-content">
                <div class="ue-category" style="height: 20px; background-color: rgb(255, 255, 255);"><span><h5>Festival</h5></span></div>
                <img src="http://www.evented.gr/image.php?source=events%2Fce06e21958cd6e9d8c5da37a7f7bf9e9%2Fimages%2Fdefault%2F34-rvca-flyer.jpg&amp;w=150&amp;h=220&amp;out=raw" alt="Event photo">
                <div class="ue-corner" style="width: 0px;"></div>
                <div class="slider" style="height: 50px;">
                    <div class="ue-title"><span><h5 style="padding:5px;">testing 2</h5></span></div>
                    <div class="ue-info"><span>ffs</span></div>
                </div>
            </div>
          </a>
            <div class="add-this" style="display: none;">
                <div class="addthis_toolbox addthis_default_style">
                    <a class="addthis_button_preferred_1 addthis_button_facebook at300b" addthis:title="testing 2" addthis:description="ffs" addthis:url="http://www.evented.gr/events/Festival/testing+2-2" title="Facebook" href="#"><span class="at16nc at300bs at15nc at15t_facebook at16t_facebook"><span class="at_a11y">Share on facebook</span></span></a>
                    <a class="addthis_button_preferred_2 addthis_button_twitter at300b" addthis:title="testing 2" addthis:description="ffs" addthis:url="http://www.evented.gr/events/Festival/testing+2-2" title="Tweet This" href="#"><span class="at16nc at300bs at15nc at15t_twitter at16t_twitter"><span class="at_a11y">Share on twitter</span></span></a>
                    <a class="addthis_counter addthis_bubble_style" style="display: block;" href="#"><a class="addthis_button_expanded" target="_blank" title="View more services" href="#">0</a><a class="atc_s addthis_button_compact"><span></span></a></a>
                    <div class="atclear"></div>
                </div>
            </div>
        </div>
</li> 
```

# audio - 状态机图：如何判断一个转换引发另一个转换？

> ID：13868443
> 
> 赞同：0
> 
> 时间：2012-12-13T21:02:07.837
> 
> 标签：audio, uml, real-time, aggregate-functions, state-machine

我有一个实时聚合声音的类。聚合意味着它计算声音参数，如平均幅度、噪声级别等，时间单位比声音帧长。帧是 PCM 并且持续时间小于毫秒，而聚合单元是 1/10 秒或更长。

我想画这个类的UML状态机图。

它由两个较小的状态图组成，一个跟踪帧，另一个跟踪聚合单元，按周期。如果第一个图检测到接收到完整的帧，它应该启动第二个图，其中处理帧并更新一个单元的聚合数据。

我画了下面这张图。

我的问题是：如何绘制从全帧状态到初始状态的第一台机器转换引发第二台机器的转换？

我将第二张图上的问题转换命名为“框架”。

![在此处输入图像描述](../Images/5fa5bdc03b70ce599280320e8472e915.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:57:33.650

您需要的是第一台机器在`Full frame received`输入时向第二台机器发送一个事件。有几种方法可以做到这一点。您可以在导致 的过渡上添加效果`Full frame received`，或者，您也可以为 定义“进入动作” `Full frame received`。

一旦您在进入时发送了一个事件`Full frame received`，您就可以在第二个状态机中定义一个对其做出反应的转换。

在[UML 规范中。2.4.1](http://www.omg.org/spec/UML/2.4.1/)中，第 561 页描述了“进入动作”，`effect`第 581 页上的转换。

# objective-c - UIWebView 方向问题

> ID：13868446
> 
> 赞同：0
> 
> 时间：2012-12-13T21:02:22.200
> 
> 标签：objective-c, ios, uiwebview

我有一个显示文本的 UIWebView。文本超出了 iPhone 屏幕的高度，因此用户必须滚动才能找到超出 iPhone 屏幕的文本。

我想在方向更改期间将位于 UIWebView 左上角的单词保留在 UIWebView 的左上角。

因此，如果用户正在纵向阅读并且左上角的大部分文本是纵向的“欢迎来到......”。当设备将其方向更改为横向时，我希望 SAME 文本位于左上角。

这个功能可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:24:28.483

我认为你必须使用 javascript 来实现它。

首先找到 webview 在旋转之前的位置，在旋转之后找到 pageOffset 并使用类似这样的东西来滚动：

```
NSString* goToOffsetFunc = [NSString stringWithFormat:@" function pageScroll(xOffset){ window.scroll(xOffset,0); } "];
NSString* goTo =[NSString stringWithFormat:@"pageScroll(%f)", pageOffset];

[webview stringByEvaluatingJavaScriptFromString:goToOffsetFunc];
[webview stringByEvaluatingJavaScriptFromString:goTo]; 
```

另一种方法是在 webView 中获取 scrollView 并直接滚动它。

# android - 从android上的java应用程序分析coredump

> ID：13868451
> 
> 赞同：0
> 
> 时间：2012-12-13T21:02:55.490
> 
> 标签：android, gdb, dalvik, coredump

我有一个来自 dalvik 进程的核心转储（它是 com.android.browser）。我绝对知道，该进程在 JNI 模块中的某处被终止。

另外，我有该设备的所有调试符号。但我不能为此核心转储调用 gdb。我正在尝试这样：

```
arm-eabi-gdb ../symbols/system/bin/dalvikvm android.browser_5879_1354575922.core 
```

但 gdb 说：

```
warning: core file may not match specified executable file.
.....
warning: Unable to find dynamic linker breakpoint function.
GDB will be unable to debug shared library initializers
and track explicitly loaded dynamic code.
Core was generated by `com.android.browser'          
Program terminated with signal 11, Segmentation fault. 
```

所以`(gdb) info sharedlibrary`什么都不显示：

```
No shared libraries loaded at this time. 
```

如何正确加载 dalvikvm 进程的 coredump？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:09:51.857

好的，答案是提供 app_process 作为图像名称：

arm-eabi-gdb 符号/系统/bin/ **app_process** android.browser_5879_1354575922.core

# javascript - 带有伪函数的 pivot.js 总结

> ID：13868458
> 
> 赞同：0
> 
> 时间：2012-12-13T21:03:29.950
> 
> 标签：javascript, pivot-table

尽管汇总字段的伪函数具有两个字段的划分，但我一直遇到一些麻烦。

原来的两个字段是：

```
{name: 'purchasers',    type: 'integer',  rowLabelable: false, summarizable: 'sum', displayFunction: function(value){ return accounting.formatNumber(value)}},    
{name: 'spend',    type: 'float',  rowLabelable: false, summarizable: 'sum', displayFunction: function(value){ return accounting.formatMoney(value)}} 
```

伪函数为：

```
{
    name: 'spendperpurch', type: 'float', pseudo: true,      
    pseudoFunction: function(row){ return row.spend / row.purchasers },       
    summarizable: 'sum', displayFunction: function(value){ return accounting.formatMoney(value)}    
} 
```

它只是没有从 granu 聚合

我想做的基本上是通过过滤器而不是 a

对于第 Σ 行中的 i (row.spend/row.purchasers) ，这是当前正在发生的事情。

例如，如果我有 100 行计算出的字段支出/购买者

```
date, purchasers, spend, spendperpurch
1   , 10        , 100  , 10
2   , 15        , 200  , 13.3 
```

如果在我的桌子上我只想要

```
purchasers, spend, spendperpurch 
```

当前代码给了我：

```
purchasers, spend, spendperpurch
25        , 300  , 23.3 
```

我真正想要的是：

```
purchasers, spend, spendperpurch
25        , 300  , 12 
```

有任何想法吗？我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:21:46.310

我研究了这个，因为我最近需要做同样的事情。

该`pseudoFunction`属性不支持这一点，因为它仅在加载 CSV 时逐行运行。

相反，您想使用自定义汇总函数。试试这个例子：

```
var fields=[
    {name:"purchasers", type:"float", summarizable:"sum"},
    {name:"spend", type:"float" summarizable:"sum"},
    {name:"spendperpurch", type:"float",
     summarizable:true,
     summaryFunction:function(rows,field){
        var totalPurchasers=0, totalSpend=0, i=0;
        for(i=0;i<rows.length;i++){
            totalPurchasers+=rows[i]["purchasers"];
            totalSpend+=rows[i]["spend"];
        }
        if(totalPurchasers==0){return 0; /*or whatever you want*/}
        return totalSpend/totalPurchasers;
     }
    ]; 
```

编辑：根据另一位用户（我自己没有测试过），在较新版本的库中，`summaryFunction`现在调用了 field 属性`summarizeFunction`，所以如果上述方法不适合您，请尝试更改该属性的名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T01:10:37.713

```
{
  name: 'spendperpurch', type: 'float', pseudo: true, summarizable: 'avg',      
  pseudoFunction: function(row)
  { 
     return row.spend / row.purchasers 
  },       
  displayFunction: function(value)
  { 
     return accounting.formatMoney(value)
  }    
} 
```

# php - 如何在新表中记录 MySQLi 查询

> ID：13868459
> 
> 赞同：0
> 
> 时间：2012-12-13T21:03:37.853
> 
> 标签：php, mysql, sql, mysqli

使用 PHP5，以及用于执行 MySQL 查询的 MySQLi 类，如何将使用 MySQLi::query 处理的每个查询记录在当前连接数据库的新表中？

是否可以对函数进行一些扩展，比如在 Java 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:18:32.820

如果您使用支持触发器的 mysql 版本。只需创建一个触发器，这样您就不必用不必要的业务逻辑污染代码

[http://dev.mysql.com/doc/refman/5.0/en/triggers.html](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)

从 MySQL 5.0.2 开始包括对触发器的支持。因此，当您部署应用程序时，您会在创建表的同时创建触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:28:02.117

为您的日志定义一个表

```
create table querylog (
tm timestamp,
query varchar(4096)); 
```

当您进行查询时，将查询字符串记录在此表中

```
insert into querylog (tm, query)
values(now(), '$query_string') 
```

您可以在每个查询中显式执行此操作，也可以在函数中执行此操作`my_query`，您可以定义和调用，而不是`mysqli_query`像@E_p 建议的那样，在触发器中执行此操作。

# scala - 将对列表减少为键映射及其聚合计数的惯用方法？

> ID：13868465
> 
> 赞同：13
> 
> 时间：2012-12-13T21:03:51.873
> 
> 标签：scala

我正在尝试在一个简单的 Scala 程序中重新创建 Hadoop 的[字数图/减少逻辑以进行学习](http://hadoop.apache.org/docs/r1.1.1/mapred_tutorial.html)

这是我到目前为止所拥有的

```
val words1 = "Hello World Bye World"      
val words2 = "Hello Hadoop Goodbye Hadoop"

val input = List(words1,words2)           
val mapped = input.flatMap(line=>line.split(" ").map(word=>word->1))
    //> mapped  : List[(String, Int)] = List((Hello,1), (World,1), (Bye,1), 
    //                                       (World,1), (Hello,1), (Hadoop,1), 
    //                                       (Goodbye,1), (Hadoop,1))

mapped.foldLeft(Map[String,Int]())((sofar,item)=>{
    if(sofar.contains(item._1)){
        sofar.updated(item._1, item._2 + sofar(item._1))
    }else{
        sofar + item
    }
})                              
    //>Map(Goodbye -> 1, Hello -> 2, Bye -> 1, Hadoop -> 2, World -> 2) 
```

这似乎可行，但我确信有一种更惯用的方式来处理减少部分（foldLeft）

我在考虑也许是一个多图，但我有一种感觉 Scala 有办法轻松做到这一点

有没有？例如**，一种添加到地图的方法，如果键存在，而不是替换它，将值添加到现有值**。我确定我在某处看到过这个问题，但找不到它，也没有答案。

我知道`groupBy`这可能是在现实世界中实现它的方法，但我正在尝试尽可能接近上面链接中的原始映射/减少逻辑来实现它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T01:17:02.373

您可以使用[Scalaz 的](https://github.com/scalaz/scalaz) `|+|`运算符，因为`Maps`它们是[Semigroup](http://dnene.bitbucket.org/docs/scalaz-guide/ref-identity.html#id1)类型类的一部分：

`|+|`运算符是 Monoid`mappend`函数（Monoid 是可以“添加”在一起的任何“事物”。许多事物可以像这样添加在一起：字符串、整数、映射、列表、选项等。例如：

```
scala> import scalaz._
import scalaz._

scala> import Scalaz._
import Scalaz._

scala> val map1 = Map(1 -> 3 , 2 -> 4)
map1: scala.collection.immutable.Map[Int,Int] = Map(1 -> 3, 2 -> 4)

scala> val map2 = Map(1 -> 1, 3 -> 6)
map2: scala.collection.immutable.Map[Int,Int] = Map(1 -> 1, 3 -> 6)

scala> map1 |+| map2
res2: scala.collection.immutable.Map[Int,Int] = Map(1 -> 4, 3 -> 6, 2 -> 4) 
```

**因此，在您的情况下，**而不是创建 a `List[(String,Int)]`，创建 a `List[Map[String,Int]]`，然后对它们求和：

```
val mapped = input.flatMap(_.split(" ").map(word => Map(word -> 1)))
mapped.suml 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-13T21:13:23.500

您可以使用返回 0 作为默认值的映射。地图提供了默认值：

```
def withDefaultValue[B1 >: B](d: B1): Map[A, B1] 
```

具有给定默认值的同一地图：

```
val emptyMap = Map[String,Int]().withDefaultValue(0)
mapped.foldLeft(emptyMap)((sofar,item) => {
    sofar.updated(item._1, item._2 + sofar(item._1))
}) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-08T10:50:04.313

如果我错了，请纠正我，但这个怎么样：

```
val w = words.groupBy(_.toString).map(x => (x._1,x._2.size)).toList 
```

假设 words 是单词列表：

```
val words1 = "Hello World Bye World"
val words2 = "Hello Hadoop Goodbye Hadoop"
val words = words1.split(" ") ++ words2.split(" ")
val w = words.groupBy(_.toString).map(x => (x._1,x._2.size)).toList
//List((Goodbye,1), (Hello,2), (Bye,1), (Hadoop,2), (World,2)) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-14T11:19:40.777

另一个版本：

```
 val words1 = "Hello World Bye World"             
//> words1  : java.lang.String = Hello World Bye World
 val words2 = "Hello Hadoop Goodbye Hadoop"       
//> words2  : java.lang.String = Hello Hadoop Goodbye Hadoop

 val words = words1.split(" ") ++ words2.split(" ")
//> words  : Array[java.lang.String] = Array(Hello, World, Bye, World, Hello, Hadoop, Goodbye, Hadoop)

 words.map(m => (m, (0 /: words)
   ((x, y) => if (y == m) x + 1 else x))).
     toList.distinct.toMap
 //> res0: scala.collection.immutable.Map[java.lang.String,Int] = Map(Goodbye -> 1, Hello -> 2, Bye -> 1, Hadoop -> 2, World -> 2) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-09T18:26:22.807

开始`Scala 2.13`，大多数集合都提供了[groupMapReduce](https://www.scala-lang.org/api/2.13.x/scala/collection/immutable/List.html#groupMapReduce[K,B](key:A=%3EK)(f:A=%3EB)(reduce:(B,B)=%3EB):scala.collection.immutable.Map[K,B])方法，可以看作是`Hadoop's map/reduce`逻辑的近似模拟：

```
val words = List(words1, words2).flatMap(_.split(" "))

words.groupMapReduce(identity)(_ => 1)(_ + _)
// immutable.Map[String,Int] = HashMap(Goodbye -> 1, Hello -> 2, Bye -> 1, Hadoop -> 2, World -> 2) 
```

这：

*   从 2 个输入列表中拆分和合并单词

*   `group`s 元素本身（身份）（**组**MapReduce 的组部分）

*   `map`s 每个分组值出现为 1（映射组**Map** Reduce 的一部分）

*   `reduce`s 值在一组值 ( `_ + _`) 中，通过对它们求和（减少 groupMap **Reduce**的一部分）。

这是可以通过以下方式翻译的[一次性版本](https://github.com/scala/scala/blob/v2.13.0-M5/src/library/scala/collection/Iterable.scala#L604)：

```
words.groupBy(identity).mapValues(_.map(_ => 1).reduce(_ + _)) 
```

# drupal-7 - drupal 7 cron问题

> ID：13868466
> 
> 赞同：0
> 
> 时间：2012-12-13T21:04:00.850
> 
> 标签：drupal-7

在托管在负载均衡器后面的两台服务器上的 drupal 网站中，“尝试在它已经运行时重新运行 cron”。cron 最终成功，但我想知道为什么/如何多次调用它。问题是多个 crons 减慢了网站的速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:55:20.917

如果您使用多服务器，则必须重新定义[crontabs](http://drupal.org/cron)，并且您将能够使用您的 cron 选项卡从一台服务器切换到另一台服务器。

如果不重新定义它们，DP 将执行所有 crontab 两次（因为 2 个服务器）

# html - 如何使复选框在 ie 7 和 8 中工作

> ID：13868471
> 
> 赞同：1
> 
> 时间：2012-12-13T21:04:26.767
> 
> 标签：html, css, image, forms

基本上在表格中当你点击图片时，也应该勾选这个框。这适用于除 IE7 和 IE8 之外的所有浏览器。有人有想法么？

```
<form>
<input type="checkbox" name="interest1" id="interest1" value="x">
<input type="checkbox" name="interest2" id="interest2" value="x">
<input type="checkbox" name="interest3" id="interest3" value="x"></p>   
<p align="center"><label for="interest1"><img src="/images/interest1.jpg" width="152" height="152" alt="" /></label>
<label for="interest2"><img src="/images/interest2.jpg" width="152" height="152" alt="" /></label>
<label for="interest3"><img src="/images/interest.jpg" width="152" height="152" alt="" /></label></P><!-- code making checkbox be an image-->
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:38:47.853

似乎 IE < 9 不喜欢标签中的子节点（非输入）。一种解决方法是将图像设置为标签的背景并制作标签，`inline-block`以便您可以设置其大小。在 IE8 中测试[http://jsfiddle.net/K9FEk/8/](http://jsfiddle.net/K9FEk/8/)

**CSS**

```
label {
    border:1px solid red;
    display:inline-block;
}

#label-interest1 {
    background-image: url(http://www.gravatar.com/avatar/36fa212d5215d9f282033375834ba0c0?s=120&d=identicon&r=PG);
    width: 152px;
    height:152px;
} 
```

**HTML**

```
<form>    
  <input type="checkbox" name="interest1" id="interest1" value="x">        
  <p align="center">    
    <label id="label-interest1" for="interest1"></label>
  </p>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:19:57.757

不知道问题是什么，但这个 CSS 使它在使用 IE9 的 IE8 和 IE7 模式下为我工作。

```
label {
    display:inline-block; /* "block" would also work */
}
img {
    position:relative;
    z-index:-1;
} 
```

演示：http: [//jsfiddle.net/K9FEk/3/](http://jsfiddle.net/K9FEk/3/)

这可能是因为图像在页面上的空间超出了`display:inline`styled `<label>`，或者它在标签“上方”，劫持了点击事件。

# sql - 使用没有匹配的 Rails 查找记录（未清除故障的故障）

> ID：13868474
> 
> 赞同：0
> 
> 时间：2012-12-13T21:04:31.430
> 
> 标签：sql, ruby-on-rails

我正在尝试在 Rails 中编写一个站点，制造厂的用户可以在其中看到哪些设备出现故障。存储警报数据的程序在设备发生故障时存储一个条目，然后在设备修复时存储另一个条目。条目仅通过在`EventAssociationID`列中具有相同值来链接。我如何在 Rails 中编写一个命名范围来检查哪些错误已修复，哪些未修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:31:17.687

我无法在命名范围内执行此操作，但是，我能够为解决问题的模型定义一个方法：

```
def inAlarm
  return ConditionEvent.count(:all, :conditions => ['EventAssociationID = ?', self.EventAssociationID]) == 1
end 
```

# nagios - 为什么我的插件返回 2，但我的服务状态正常？

> ID：13868477
> 
> 赞同：1
> 
> 时间：2012-12-13T21:05:02.150
> 
> 标签：nagios

我正在使用 Nagios XI (R1.9)

我有一个带有检查命令的服务，该命令返回 2（严重）。为了验证，我可以在命令行运行命令，我得到与 nagios 在服务状态页面的状态信息中获取/显示的相同（文本）输出，然后我执行 echo $? 并得到一个 2。

但是，当我在服务状态页面上查看服务时，该主机的服务状态显示“Ok”，但状态信息（即检查命令的输出）显示“Critical：文件服务.....” ，正如我所提到的，与我在命令行运行并获得返回码 2 时看到的文本相同。

此 nagios 实例中有多个主机和服务正常运行。该服务是最近添加的。

关于问题可能是什么或如何测试的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:10:54.493

问题是我使用 tee 将输出重定向到日志文件，例如：

```
 2>&1 | tee -a /tmp/nagdebug 
```

Nagios 从 tee 获得退出代码 0 :-/

# python - python通过rabbitmq传递二进制文件

> ID：13868479
> 
> 赞同：1
> 
> 时间：2012-12-13T21:05:05.300
> 
> 标签：python, rabbitmq, pika

我正在尝试通过 pika（rabbitmq 的 python 驱动程序）通过 rabbitmq 传递二进制文件

```
channel.exchange_declare(exchange=exchange_name,type="fanout",durable=True)
channel.queue_declare(queue=queue_name,durable=True)
channel.queue_bind(exchange=exchange_name,queue=queue_name,routing_key="#")
channel.confirm_delivery()
confirmed = channel.basic_publish(exchange=exchange_name,routing_key="",body=data) 
```

数据是我的二进制文件。我想将文件名作为参数传递，这样我就可以知道我排队到 rabbimq 的文件是什么。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:07:26.883

有两种方法可以做到这一点。如果您可以序列化您的数据，您可以将其作为常规消息发送。因此，如果您可以将数据文件加载为对象，则可以使用 yaml XML 或 Json 将其序列化为文本。并将序列化的文本作为消息发送。并在消费者端反序列化。否则，您可以将主体视为字节数组。字符串是字节数组，因此消息作为文本将毫无意义，但将是您文件的字节表示。

另一种方法是根本不发送文件。相反，每条消息都是一个链接，因此消费者知道在哪里可以找到文件。然后它可以读取或下载文件。

# android - 如何在我的应用程序中实现 AT 命令调用？

> ID：13868483
> 
> 赞同：3
> 
> 时间：2012-12-13T21:05:12.457
> 
> 标签：android, android-ndk, adb, at-command, aidl

我必须获取一些无法通过 Android 框架 API 访问的低级别信息，例如 RxLev、BLER、RxQual 等。我发现替代方法是 AT 命令。我使用的是三星 Galaxy S。在上一篇文章中，关于发送 AT 命令的过程有很多困惑。在某些帖子中，它得到了回答，但是当我尝试 adb shell -> su -> echo -e "AT\r" > /dev/smd0\. 它没有显示结果。您能否提供以下信息：

1.  是否可以使用 AT 命令获取所需的信息？
2.  是否可以通过 adb shell & 在 3rd 方 Android 应用程序中调用 AT 命令？
3.  我是否需要执行 AIDL/NDK 并与 RIL/内核交谈？
4.  流程怎么办？

如果我的方向错误，请告诉我。

任何指针将不胜感激。提前致谢。

-Shravan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:10:42.763

如果你安装了busybox，你可以使用`microcom`applet：

```
echo "AT\r" | busybox microcom -t 500 /dev/smd0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T14:07:37.353

您可以使用[atinout](http://atinout.sourceforge.net/)程序非常轻松地发送 AT 命令并检索响应：

```
$ echo AT | atinout - /dev/smd0 -
AT
OK
$ 
```

# sql-server - 带有临时表的 iBatis 无效 columnName

> ID：13868485
> 
> 赞同：0
> 
> 时间：2012-12-13T21:05:19.267
> 
> 标签：sql-server, ibatis

当我尝试从我的应用程序运行 SQL 映射时，我得到一个无效的列名。基本上我有两个独立的映射文件，它们基本上做同样的事情，除了创建一个不同名称的列。请注意，我故意留下了 DROP TABLE 来说明这个问题。我知道这是一种不好的做法，但我正在寻找为什么会发生这种情况。此后，我们通过显式删除每个 SQL 映射中的表来纠正此行为。

查询1：

```
<select id="Query1"   parameterClass="query1Criteria">   

    IF Object_Id('tempdb..##severity') IS NOT NULL     
    BEGIN
      DROP TABLE ##severity
    END     

    CREATE TABLE ##severity( valueCode VARCHAR(255) NOT NULL, displayOrder INT NOT NULL)
    INSERT INTO ##severity
        SELECT DISTINCT valueCode,MAX(displayOrder) FROM DataDictionaryValue
        WHERE zoneID = #zoneID# AND categoryCode = 'SEVERITY'
        GROUP BY valueCode 

    SELECT valueCode FROM ##severity

</select> 
```

查询 2：

```
<select id="Query2" parameterClass="query2Criteria">   

    IF Object_Id('tempdb..##severity') IS NOT NULL     
    BEGIN
      DROP TABLE ##severity
    END     

    CREATE TABLE ##severity( severityCode VARCHAR(255) NOT NULL, displayOrder INT NOT NULL)
    INSERT INTO ##severity
        SELECT DISTINCT valueCode,MAX(displayOrder) FROM DataDictionaryValue
        WHERE zoneID = #zoneID# AND categoryCode = 'SEVERITY'
        GROUP BY valueCode 

    SELECT severityCode FROM ##severity

</select> 
```

从应用程序中，我运行 Query1。执行得很好，我看到了在 SQL Management Studio 中创建的临时表。然后我执行 Query2，并获得以下堆栈跟踪：

```
org.springframework.jdbc.BadSqlGrammarException: SqlMapClient operation; bad SQL grammar []; nested exception is com.ibatis.common.jdbc.exception.NestedSQLException:   
--- The error occurred in com/test/model/safety/reports/Query2Map.xml.  
--- The error occurred while applying a parameter map.  
--- Check the Query2.getResults-InlineParameterMap.  
--- Check the statement (query failed).  
--- Cause: java.sql.SQLException: Invalid column name 'severityCode'.
    at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.translate(SQLErrorCodeSQLExceptionTranslator.java:276)
    at org.springframework.orm.ibatis.SqlMapClientTemplate.execute(SqlMapClientTemplate.java:212)
    at org.springframework.orm.ibatis.SqlMapClientTemplate.executeWithListResult(SqlMapClientTemplate.java:249)
    at org.springframework.orm.ibatis.SqlMapClientTemplate.queryForList(SqlMapClientTemplate.java:296)
    at com.test.model.BaseSqlMapDao.executeQueryForList(BaseSqlMapDao.java:53)
    at com.test.model.safety.reports.Query2SqlMapDao.getOpenIssues(Query2SqlMapDao.java:124)
    at com.test.model.safety.reports.Query2SqlMapDao.getResults(Query2SqlMapDao.java:50)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
```

如果我在 SMS 中运行 Query2 的 SQL，它将正确执行。事实上，这两个查询都将在 SMS 中正确执行。我不了解 iBatis 的详细工作原理，但是 iBatis 似乎看到了在 Query1 中创建的临时表，并针对该模式验证了 Query2 的语法，在这种情况下会抛出无效的列名异常。然而，这意味着 iBatis 保留对临时表的引用，这与 SQL 服务器范式相矛盾，其中临时表的范围仅限于连接。

谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:14:03.320

也许您可以使用表变量而不是临时表。

它看起来像：

```
DECLARE @severity as TABLE ( valueCode VARCHAR(255) NOT NULL, displayOrder INT NOT NULL)

INSERT INTO @severity
    SELECT DISTINCT valueCode,MAX(displayOrder) FROM DataDictionaryValue
    WHERE zoneID = #zoneID# AND categoryCode = 'SEVERITY'
    GROUP BY valueCode 

SELECT valueCode FROM @severity 
```

您也可以删除`DISTINCT`关键字。`GROUP BY valueCode`已经确保了不同的 valueCode 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-15T09:16:51.540

由于插入数据的表的列名与从中获取数据的表的列名不匹配，它会引发错误。

```
 CREATE TABLE ##severity( severityCode VARCHAR(255) NOT NULL, displayOrder INT NOT NULL)
INSERT INTO ##severity
    SELECT DISTINCT valueCode,MAX(displayOrder) FROM DataDictionaryValue
    WHERE zoneID = #zoneID# AND categoryCode = 'SEVERITY'
    GROUP BY valueCode 

SELECT severityCode FROM ##severity 
```

在前面的代码片段中，您在内部查询中选择 valueCode 并将其插入到没有 valueCode 列名称的 ##severity 临时表中。

# php - PHP 回显 DateTime 对象

> ID：13868486
> 
> 赞同：1
> 
> 时间：2012-12-13T21:05:24.430
> 
> 标签：php, datetime, dateinterval

当我尝试输出 DateTime 对象时，它实际上是在打印格式，例如

```
Y-m-d H:i:s 
```

**代码**

```
$db = new PDO('mysql:host=localhost;dbname=xxx;charset=utf8', 'xxx', 'xxx');
$dbTime = new DateTime(current($db->query('SELECT NOW()')->fetchAll(PDO::FETCH_COLUMN, 0)));
$myTime = new DateTime();
$diff = $myTime->diff($dbTime);
echo $diff->format('Y-m-d H:i:s'); 
```

通过阅读其他问题和示例，这应该可以工作，所以我很困惑为什么不可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T21:08:04.977

该`DateTime::diff`方法返回一个`DateInterval`对象。`DateInterval`你得到了意想不到的结果，因为你在一个与对象上的实现不同的对象上调用格式`DateTime`。有关如何使用它的更多信息，请参阅[http://php.net/manual/en/dateinterval.format.php 。](http://php.net/manual/en/dateinterval.format.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T21:08:06.783

[DateTime::diff()](http://www.php.net/manual/en/datetime.diff.php)的输出是一个 DateInterval 对象，它具有相当不同的[格式](http://www.php.net/manual/en/dateinterval.format.php)含义......特别是阅读有关溢出的内容。还要注意使用 % 符号来强制格式化字符，否则它们将被视为字符串字符

# multithreading - 为什么线程很危险？

> ID：13868488
> 
> 赞同：3
> 
> 时间：2012-12-13T21:05:31.187
> 
> 标签：multithreading

我一直被告知要对多个线程将访问的变量加锁，我一直认为这是因为你想确保你正在使用的值在写回之前不会改变，即

```
mutex.lock()
int a = sharedVar
a = someComplexOperation(a)
sharedVar = a
mutex.unlock() 
```

这是有道理的，你会锁定它。但在其他情况下，我不明白为什么我不能不使用互斥锁。

线程 A：

```
sharedVar = someFunction() 
```

线程 B：

```
localVar = sharedVar 
```

在这种情况下可能会出现什么问题？特别是如果我不在乎线程 B 读取线程 A 分配的任何特定值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T21:08:53.367

这在很大程度上取决于 的类型`sharedVar`、您使用的语言、任何框架和平台。在许多情况下，分配单个值`sharedVar`可能需要多条指令，在这种情况下，您可能会读取该值的“半集”副本。

即使不是这种情况，并且分配是原子的，如果没有[内存屏障](http://en.wikipedia.org/wiki/Memory_barrier)，您可能看不到最新值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T21:17:51.483

MSDN Magazine 对您在多线程代码中可能遇到的不同问题有很好的解释：

*   忘记同步
*   不正确的粒度
*   读写撕裂
*   无锁重新排序
*   锁定车队
*   两步舞
*   优先级反转

您问题中的代码特别容易受到读/写撕裂的影响。但是您的代码既没有锁也没有内存屏障，也受到无锁重新排序（可能包括*推测性写入*，其中线程 B 读取线程 A 从未存储的值），其中副作用对第二个线程可见与它们在源代码中出现的顺序不同。

它继续描述了一些避免这些问题的已知设计模式：

*   不变性
*   纯度
*   隔离

该文章可[在此处获得](http://msdn.microsoft.com/en-us/magazine/cc817398.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T21:16:25.723

主要问题是赋值运算符（C++ 中的 operator=）并不总是保证是原子的（甚至对于原始的内置类型也不保证）。用简单的英语来说，这意味着分配可能需要一个以上的时钟周期才能完成。如果在此过程中线程被中断，则变量的当前值可能已损坏。

让我以您的示例为基础：

可以说`sharedVar`是一些`operator=`定义如下的对象：

```
object& operator=(const object& other) {
    ready = false;
    doStuff(other);
    if (other.value == true) {
        value = true;
        doOtherStuff();
    } else {
        value = false;
    }
    ready = true;
    return *this;
} 
```

如果您的示例中的线程 A 在此函数的中间被中断，那么当线程 B 开始运行时，ready 仍然为假。这可能意味着当线程 B 尝试将对象复制到局部变量中时，该对象仅被部分复制，或者处于某种中间的无效状态。

对于这方面的一个特别讨厌的例子，想想一个数据结构，其中一个被删除的节点被删除，然后在它被设置为 NULL 之前被中断。

（有关不需要锁的结构（又名，是原子的）的更多信息，[这里](https://stackoverflow.com/questions/930897/c-atomic-operations-for-lock-free-structures)是另一个问题，对此进行了更多讨论。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T21:11:43.330

这可能会出错，因为线程可以由线程调度程序暂停和恢复，因此您无法确定这些指令的执行顺序。它也可能按以下顺序：

线程 B：

```
localVar = sharedVar 
```

线程 A：

```
sharedVar = someFunction() 
```

在这种情况下，`localvar`将为 null 或 0（或不安全语言中的某个完全意外的值），可能不是您想要的。

顺便说一句，互斥锁实际上不会解决这个特定问题。您提供的示例不适合并行化。

# hibernate - 为什么我得到 Grails SessionFactoryProxy？

> ID：13868489
> 
> 赞同：1
> 
> 时间：2012-12-13T21:05:35.330
> 
> 标签：hibernate, grails, sessionfactory

我继承了一个较旧的 Grails 1.2 应用程序，并且正在尝试将其升级到最新的 Grails 2.1.2。Grails 发生了一些变化，因为 resources.groovy 中的这段代码曾经可以工作：

```
searchIndexBuilder(SearchIndexBuilder) {bean ->
    bean.singleton = true
    indexManager = ref("indexManager")
    sessionFactory = ref("sessionFactory")
} 
```

结合 SearchIndexBuilder.java 中的这段代码：

```
private void injectHibernateEventListener() {
    try {
        HibernateEventListener hel = initHibernateEventListener();
        SessionFactoryImpl hibernateSessionFactory = (SessionFactoryImpl) sessionFactory; //fails here
        EventListeners hibernateEventListeners = hibernateSessionFactory.getEventListeners();
etc.... 
```

代码在强制转换时失败，因为我得到了一个不扩展 SessionFactoryImpl 的 SessionFactoryProxy 实例。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:34:29.117

这是 Grails 2.0 中的新功能，它支持域类重新加载。在 2.0 之前，在 run-app 期间更改域类会导致应用程序重新启动，但是对于新的重新加载代理，这不是必需的。但由于持久性配置可能已更改，Grails 会重新构建`SessionFactory`. 但是由于 Hibernate 的配置方式，其他类都有对旧类的引用，因此在不知道每个类都有引用的情况下无法替换它。所以使用代理来包含可替换的真实实例，每个人都调用代理上的方法。当它`SessionFactory`被替换时，它完全是代理内部的，其他用户不知道发生了什么。

这意味着`SessionFactory`不会是 a `SessionFactoryImpl`，但接口的重点是抽象出具体的实现类，因此强制转换为您期望的真实类是一种不好的做法。这应该适用于旧版本和当前版本的 Grails：

```
SessionFactory hibernateSessionFactory = (SessionFactory)sessionFactory; 
```

# c# - 将嵌套结构从 C# 编组到 C++ DLL

> ID：13868490
> 
> 赞同：1
> 
> 时间：2012-12-13T21:05:37.260
> 
> 标签：c#, c++, struct, enums, marshalling

我试图从 C# 调用一个函数到一个用 Borland C++ 编写的 .DLL，其签名是：

```
extern "C" __declspec(dllexport) ls50errortype __stdcall Ls50P2Open(ls50p2apiconfiginfostruct &configinfo); 
```

C#中对应的调用：

```
[DllImport("C:\\Lumistar\\LDPS_8x\\Ls50P2_Dll.dll", EntryPoint = "Ls50P2Open", CallingConvention = System.Runtime.InteropServices.CallingConvention.StdCall, CharSet = CharSet.Ansi, SetLastError = true)]
public static extern void Ls50P2Open(ref ls50p2apiconfiginfostruct configinfo); 
```

感兴趣的结构（ls50p2apiconfiginfostruct）由嵌套结构和枚举组成（从 C++ 标头复制）：

```
typedef enum
{
    MFMODEL_LS50P1,
    MFMODEL_4422PCI,
    MFMODEL_LS50P2,
    MFMODEL_LS70P2,
    MFMODEL_LS5070,
    MFMODEL_LAST
}ecardmodel;    

typedef enum
{
    CHANNELDEVICE_NONE,
    CHANNELDEVICE_50,
    CHANNELDEVICE_70,
    CHANNELDEVICE_LAST
}ls50p2channeldevicetype;

typedef enum
{
    LS50V2DCARD_NONE, 
    LS50V2DCARD_40V1_10,
    LS50V2DCARD_40V1_20,
    LS50V2DCARD_40V2_10,
    LS50V2DCARD_40V2_20,
    LS50V2DCARD_38,
    LS50V2DCARD_LAST
}ls50p2daughtercardtype;

typedef struct
{
    bool HasDaughterCard;
    ls50p2daughtercardtype DCardType;
    bool SpecialStatusCapable;

    int MaxBitsyncInputs;
    bool HasBitsyncConfidenceLevel;

    bool HasBitsync2ndCh;
    bool SpecialStatusCapable2ndCh;
    bool HasBitsyncConfidenceLevel2ndCh;

    ls50p2daughtercardtype DCardType2ndCh;
    int MaxBitsyncInputs2ndCh;
}ls50p2daughtercardinfostruct;

typedef struct
{
    ecardmodel DeviceModel;
    ls50p2channeldevicetype ChannelDataTypeAry[2];
    ls50p2daughtercardinfostruct DaughterCardInfo;

    bool HasExtendedBertPatterns;

    int FirmwareVersionAry[2];
    int NumPremodFiltersAry[2];
    double Ls50SimPreModFilterKhzAry[2][LS50V2_MAX50SIMPREMODFILTERS];
    double Ls50SimMinFmDeviationKhzAry[2];
    double Ls50SimMaxFmDeviationKhzAry[2];
}ls50p2cardconfigstruct;

typedef struct
{
    unsigned char *DataBuf;
    HANDLE hNewDataRdy;
    DWORD MaxBufLength;
    DWORD CurrentBufLength;
    int NumHeaderBytes;
}ls50p2carddatastruct;

typedef struct
{
    ls50p2cardconfigstruct CardConfigInfo[MAXMFCARDS];
    int Ls50P2CardCount;
    ls50p2carddatastruct DataInfo[MAXMFCARDS][2];
}ls50p2apiconfiginfostruct; 
```

这是 C# 中的相应结构：

```
 public enum ecardmodel
    {
        MFMODEL_LS50P1,
        MFMODEL_4422PCI,
        MFMODEL_LS50P2,
        MFMODEL_LS70P2,
        MFMODEL_LS5070,
        MFMODEL_LAST
    }

    public enum ls50p2channeldevicetype
    {
        CHANNELDEVICE_NONE,
        CHANNELDEVICE_50,
        CHANNELDEVICE_70,
        CHANNELDEVICE_LAST
    };

    public enum ls50p2daughtercardtype
    {
        LS50V2DCARD_NONE,
        LS50V2DCARD_40V1_10,
        LS50V2DCARD_40V1_20,
        LS50V2DCARD_40V2_10,
        LS50V2DCARD_40V2_20,
        LS50V2DCARD_38,
        LS50V2DCARD_LAST
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct ls50p2daughtercardinfostruct
    {
        public bool HasDaughterCard;
        public ls50p2daughtercardtype DCardType;
        public bool SpecialStatusCapable;

        public int MaxBitsyncInputs;
        public bool HasBitsyncConfidenceLevel;

        public bool HasBitsync2ndCh;
        public bool SpecialStatusCapable2ndCh;
        public bool HasBitsyncConfidenceLevel2ndCh;

        public ls50p2daughtercardtype DCardType2ndCh;
        public int MaxBitsyncInputs2ndCh;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct ls50p2cardconfigstruct
    {
        public ecardmodel DeviceModel;
        public ls50p2daughtercardtype[] ChannelDataTypeAry;
        public ls50p2daughtercardinfostruct DaughterCardInfo;

        public bool HasExtendedBertPatterns;

        public int[] FirmwareVersionAry;
        public int[] NumPremodFiltersAry;
        public double[] Ls50SimPreModFilterKhzAry;
        public double[] Ls50SimMinFmDeviationKhzAry;
        public double[] Ls50SimMaxFmDeviationKhzAry;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct ls50p2carddatastruct
    {
        public StringBuilder DataBuf;
        public IntPtr hNewDataRdy;
        public uint MaxBufLength;
        public uint CurrentBufLength;
        public int NumHeaderBytes;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct ls50p2apiconfiginfostruct
    {
        public ls50p2cardconfigstruct[] CardConfigInfo;
        public int Ls50P2CardCount;
        public ls50p2carddatastruct[,] DataInfo;
    } 
```

这是我用来调用该函数的 C# 代码：

```
 ls50p2apiconfiginfostruct lscfg = new ls50p2apiconfiginfostruct();

    lscfg.CardConfigInfo = new ls50p2cardconfigstruct[8];
    for (int i = 0; i < 8; i++)
    {
        lscfg.CardConfigInfo[i].ChannelDataTypeAry = new ls50p2daughtercardtype[2];
    }

    lscfg.DataInfo = new ls50p2carddatastruct[8, 2];

    Ls50P2Open(ref lscfg); 
```

我曾尝试在 C# 中制作此结构，但没有取得太大成功（枚举、二维数组、固定大小缓冲区的问题）。在 C# 中创建此结构的正确方法是什么？这需要在不安全的环境中进行吗？

现在由于某种原因，我在运行代码时收到以下错误：

> ```
> An unhandled exception of type 'System.Runtime.InteropServices.COMException' occurred in Library.dll
> 
> Additional information: Old format or invalid type library. (Exception from HRESULT: 0x80028019 (TYPE_E_UNSUPFORMAT)) 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:10:39.423

你的 C# 结构是什么样的。你在使用 StructLayoutAttribute 吗？ [http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx)

您可以将其与选项顺序一起使用，因此您只需要用正确顺序的字段填充您的 c# 结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:15:38.880

我相信数组问题在这里或多或少得到了解答；[封送处理不当：C# 数组到 C++ 非托管数组](https://stackoverflow.com/questions/7309838/improper-marshaling-c-sharp-array-to-a-c-unmanaged-array)

接受的答案显示了如何安全地编组动态分配的数组。

至于枚举，它们不应该造成任何问题，有一个干净的 1:1 映射。事实上，我会按照这个 msdn 帖子中的描述进行操作；[http://blogs.msdn.com/b/abhinaba/archive/2007/08/27/sharing-enums-across-c-and-c.aspx](http://blogs.msdn.com/b/abhinaba/archive/2007/08/27/sharing-enums-across-c-and-c.aspx)

您可以简单地在 .cs 文件中定义所有枚举，然后将其包含在两个项目中，一切都会正常工作。

# python - 不能使用 Postgres 和 Python “复制自”

> ID：13868492
> 
> 赞同：2
> 
> 时间：2012-12-13T21:05:40.577
> 
> 标签：python, postgresql, import, copy, psycopg2

作为主题，这是代码，没有错误消息，但没有插入数据。这是我的代码，谁能告诉我它有什么问题？

```
import psycopg2
import sys
import os
import glob 
import csv

#open the csv folder
dictfile='******'
os.chdir(dictfile)
total=[]
for file in glob.glob("*.csv"):
    total.append(file)
con = None
try: 
    con = psycopg2.connect(host='localhost',database='*****',user='postgres', password='*****') 
    cur = con.cursor()
    for i in range(0,1):   
        filename='/Users/Shared'+'/'+total[0]
        print filename
        #better move all files into shared folder
        x="copy public.crossref_sample from "+ "'"+filename+"'"+" DELIMITERS ',' CSV"
        print x
        cur.execute(x)  
except psycopg2.DatabaseError, e:
    print 'Error %s' % e    
    sys.exit(1) 
finally:
    if con:
        con.close() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T00:31:02.763

正如@a_horse_with_no_name 所暗示的，您正在关闭 PostgreSQL 数据库连接，但您没有先提交事务。

如果还没有交易，psycopg2 会为您打开交易。它希望您在完成工作后提交此事务。

除非您*明确*提交事务，否则关闭连接将*回滚*已完成的任何工作。

`con.commit()`在最后一个复制命令之后尝试。

# java - 通过套接字java传输文件客户端-服务器

> ID：13868493
> 
> 赞同：0
> 
> 时间：2012-12-13T21:05:48.587
> 
> 标签：java, sockets, client-server, file-transfer

如果文件大于 12MB 大于块发送的文件，我正在尝试在客户端-服务器之间传输文件，否则它会正常发送。我的主要问题是每次我传输的东西都会比原来的字节多，我需要在完成后使用摘要消息，所以它不会按原样工作，另一个是当我尝试发送文件时通过网络，客户端读取要发送的文件比服务器写入它的速度更快，因此客户端关闭程序关闭连接，从而损坏文件。我的转移代码如下：

这是客户端转移代码：

```
 if(fSize>maxfileSize){
        totbLidos = 0;
        byte[] fBytes = new byte[fBsize];
        while(totbLidos < fSize){
            int bRemain = (int) f.length() - totbLidos;
            if(bRemain < fBsize){
                fBsize = bRemain;
            }
            int bRead = tFile.read(fBytes, 0, fBsize);
            tServidor.write(fBytes, 0, fBsize);
            tServidor.flush();
            if(bRead>0){
                totbLidos+=bRead;
            }

            System.out.println("Total Bytes Lidos: " + totbLidos);

        }

        tFile.close();
        System.out.println("Ficheiro enviado");
        cliente.close();
    }
    else{
        totbLidos = 0;
        byte[] fBytes = new byte[fSize];
        while(totbLidos < fSize){
            int bRead = tFile.read(fBytes,0,fSize);
            if(bRead>0){
                totbLidos+=bRead;
            }
            tServidor.write(fBytes, 0, fSize);
            System.out.println("Total Bytes Lidos: " + totbLidos);
            tServidor.flush();
        }
        tFile.close();
        System.out.println("Ficheiro enviado");
        cliente.close();
    }
 } 
```

服务器传输代码：

```
if(fSize > maxfileSize){
            totbLidos = 0;
            DataInputStream tFile = new DataInputStream(cliente.getInputStream());
            BufferedOutputStream fos = new BufferedOutputStream(new FileOutputStream(fName));
            byte[] fBytes = new byte[fBsize];
            while(totbLidos < fSize){
                int bRemain = size - totbLidos;
                if(bRemain < fBsize){
                    fBsize = bRemain;
                }
                int bRead = tFile.read(fBytes, 0, fBsize);
                fos.write(fBytes);
                fos.flush();
                if(bRead>0){
                    totbLidos+=bRead;
                }
                System.out.println("Bytes lidos: " + bRead);
                System.out.println("Total Bytes Escritos: " + totbLidos);
            }
            System.out.println("Ficheiro recebido");

            fos.close();
            tFile.close();
            cliente.close();
            servidor.close();
        }
        else if(fSize < maxfileSize){
            totbLidos = 0;
            DataInputStream tFile = new DataInputStream(cliente.getInputStream());
            BufferedOutputStream fos = new BufferedOutputStream(new FileOutputStream(fName));
            byte[] fBytes = new byte[fSize];
            while(totbLidos < fSize){
                int bRead = tFile.read(fBytes,0,fSize);
                fos.write(fBytes);
                fos.flush();
                if(bRead>0){
                    totbLidos+=bRead;
                }
                System.out.println("Total Bytes Escritos: " + totbLidos);
            }
            System.out.println("Ficheiro recebido");
            fos.close();
            tFile.close();
            cliente.close();
            servidor.close();
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:08:41.350

您写入的字节数与您在此处读取的字节数不同。

```
fos.write(fBytes); 
```

尝试使用

```
fos.write(fBytes, 0, bRead); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:23:33.560

In addition to @Peter Lawrey answer I suggest you to reuse Apache Commons IO API to avoid this kind of bugs in future:

```
IOUtils.copyLarge(InputStream input, OutputStream output, long inputOffset, long length) 
```

# android - Android：如何为所有像素密度使用单个图像资源？

> ID：13868494
> 
> 赞同：3
> 
> 时间：2012-12-13T21:05:59.283
> 
> 标签：android, android-drawable

我有一张我想用作我的一个视图的背景图案的图像。作为一种模式，它被平铺，因此与分辨率无关：我希望图像中的一个像素在屏幕上显示为一个像素，无需缩放，无论设备的像素密度如何。

现在，我当然可以通过制作四个相同的图像副本并将它们放到我的 mdpi、ldpi、hdpi 和 xhdpi 目录中来做到这一点。但这似乎是多余和臃肿的。有没有办法告诉 SDK 在每种情况下都只使用一个图像？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T21:08:23.473

是的！您可以将它放在一个简单的`drawable`目录中（与您的密度指定的同级），或者更准确地说，将它放入`drawable-nodpi`并从任何其他可绘制目录中省略它。

系统将始终寻找最佳匹配，如果没有特定密度/尺寸/等的匹配。结合起来，它会回落到下一个最好的位置，直到它落在不合格的资源目录或（在你的情况下）说它适用于所有 DPI 的目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:18:10.107

有关 nodpi 和其他屏幕支持问题的更多信息，[这里](http://developer.android.com/guide/practices/screens_support.html)是 Android 文档的链接。

# c++ - Qt QSplitter 和无响应的 GUI (cpu 100%)

> ID：13868495
> 
> 赞同：1
> 
> 时间：2012-12-13T21:06:01.363
> 
> 标签：c++, qt, cpu, qsplitter

我正在尝试实现以下布局

```
|~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~|
|               |                |
|               |                |
|   QTABWIDGET  |  QGLWIDGET     |
|               |                |
|               |                |
|_______________|________________|
|                                |
|                                |
|          TEXTEDIT              |
|________________________________| 
```

在 TabWidget 和 GLWidget 之间，布局由水平方向的 QSplitter 控制。在前一个拆分器和 QTextEdit 小部件之间需要另一个具有垂直方向的 QSplitter，以便我可以选择隐藏 textedit。

目前我的实现如下（`this`是指向`MainWindow`类的指针）：

```
QVBoxLayout *mainWindowLayout = new QVBoxLayout(ui->centralWidget);
// Here we setup an horizontal splitter between the TabWidget and the QGLWidget
QSplitter *glTabSplitterHorizontal = new QSplitter(Qt::Horizontal,this);
glTabSplitterHorizontal->addWidget(ui->tabWidget); // seems to produce the high CPU load
glTabSplitterHorizontal->addWidget(this->glWidget);

// add the horizontal splitter as first row of the layout
QSplitter *splitterConsoleVertical = new QSplitter(Qt::Vertical,this);
splitterConsoleVertical->setOrientation(Qt::Vertical);
// as first row it must be the previously allocated horizontal layout tabWidget
splitterConsoleVertical->addWidget(glTabSplitterHorizontal);
mainWindowLayout->addWidget(glTabSplitterHorizontal); 
```

我的应用程序似乎可以正常工作，但是当我将其最大化时，CPU 负载会跳到 90% 及以上，并且 gui 界面很慢！

我发现你不能把布局放在 QSplitter [http://qt-project.org/doc/qt-4.8/qsplitter.html](http://qt-project.org/doc/qt-4.8/qsplitter.html)

所以我试图评论这条线`glTabSplitterHorizontal->addWidget(ui->tabWidget);`并且CPU没有重载。问题是我需要那个tabWidget！

我怎样才能解决这个问题，保持我的布局与拆分器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:40:17.367

我通过以下方式重组了我的代码：

```
QSplitter *splitHorizontal = new QSplitter;
QSplitter *splitVertical = new QSplitter;
QVBoxLayout *layout = new QVBoxLayout;
QWidget *container = new QWidget;
QVBoxLayout *container_layout = new QVBoxLayout;
splitHorizontal->addWidget(ui->tabWidget);
splitHorizontal->addWidget(this->glWidget);
container_layout->addWidget(splitHorizontal);
container->setLayout(container_layout);
splitVertical->setOrientation(Qt::Vertical);
splitVertical->addWidget(container);
splitVertical->addWidget(new QTextEdit());
layout->addWidget(splitVertical);
this->centralWidget()->setLayout(layout);
this->centralWidget()->show(); 
```

遵循此答案中的建议

[Qt - 同时使拆分器水平和垂直](https://stackoverflow.com/questions/8685005/qt-making-a-splitter-horizontal-and-vertical-at-same-time?rq=1)

CPU现在不再重载。

# python - 如何冻结本地无法满足的需求？

> ID：13868503
> 
> 赞同：1
> 
> 时间：2012-12-13T21:07:12.717
> 
> 标签：python, heroku, pip

我正在编写一个 Python 应用程序来部署在 Heroku 上。根据[Heroku 的指南](https://devcenter.heroku.com/articles/python)，我需要在 Pip`requirements.txt`文件中列出包要求。该指南指示我在本地安装软件包，然后运行`pip freeze > requirements.txt`以编写冻结的需求文件。

*但是*，我想在 Heroku 上部署的软件包之一**无法在本地安装**。它与我的操作系统不兼容。

那么我该如何编写一个`requirements.txt`包含这个适合 Heroku 的包呢？

我能想到的唯一方法是手工编写——但这会很乏味，因为有**问题的包有很多自己的依赖项**。此外，这违背了包管理器的观点。

* * *

将 Ruby 应用程序部署到 Heroku 时，Bundler 让这一切变得简单。在我的 Gemfile 我写

```
gem "pg", :group => :production
gem "sqlite3", :group => :development 
```

然后该命令`bundle install`会写入一个冻结版本列表`Gemfile.lock`（类似于`requirements.txt`）。它不会*安装*“生产”组下列出的软件包，但仍会冻结一致的版本化软件包列表。

示例：[Gemfile](https://github.com/matt-hickford/placeboxy/blob/master/Gemfile)和[Gemfile.lock](https://github.com/matt-hickford/placeboxy/blob/master/Gemfile.lock)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:39:30.643

您可以拥有多个文件，并称它们为不同的东西，但 Heroku 确实需要一个 requirements.txt。例如，对于 dev，您可以维护一个 dev_requirements.txt

您可以在本地运行：

```
$ pip freeze > dev_requirements.txt 
```

等等，以及

```
$ pip install -r dev_requirements.txt 
```

Heroku 将运行：

```
$ pip install -r requirements.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:20:53.560

这是不可能的。问题报告给 pip [https://github.com/pypa/pip/issues/747](https://github.com/pypa/pip/issues/747)

# c++ - 来自映射另一个向量的一行 std::vector ctor？

> ID：13868506
> 
> 赞同：2
> 
> 时间：2012-12-13T21:07:24.400
> 
> 标签：c++, stl, c++11, iterator

C++11

*最后两*行应该有一个单行版本。

```
 typedef std::pair<T1, T2> impl_node;
        std::vector<impl_node> impl;
        /* do stuff with impl */
        std::vector<T1> retval(impl.size());
        std::transform(impl.cbegin(), impl.cend(), retval.begin(),
                         [](const impl_node& in) { return *in.first; }); 
```

我尝试编写某种自定义迭代器适配器，但类型越来越多。什么是“正确”的解决方案？（它可能推广到各种其他适配器。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:47:29.253

这仍然是两行，但打字更少（在两种意义上）：

```
std::vector<T1> retval(impl.size());
for (const auto& p : impl) retval.push_back(p.first); 
```

实际上，现在我看它，我更喜欢三行：

```
std::vector<T1> retval;
retval.reserve(impl.size());
for (const auto& p : impl) retval.push_back(p.first); 
```

（编辑删除移动，因为没有证据表明它是合适的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:28:27.580

我不知道有一种方法可以仅使用 C++11 中的标准 STL 在一行中执行此操作，而无需先编写至少一个（模板化的）辅助函数。

您可能正在寻找一个概念，其中 2 个迭代器成为一个对象，并且 C++ 开始支持类似于 .NET 中的 LINQ 扩展方法的行为：http: [//www.boost.org/doc/libs/1_52_0/libs/range/ doc/html/index.html](http://www.boost.org/doc/libs/1_52_0/libs/range/doc/html/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T21:46:56.227

通过使用插入迭代器，您可以获得至少一半的内容。

`vector`在不指定大小的情况下分配，

```
std::vector<T1> retval; 
```

...然后使用`back_inserter`(from `#include <iterator>`) 填充它：

```
std::transform(impl.cbegin(), impl.cend(), back_inserter(retval),[](const impl_node& in) { return *in.first; }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T21:50:22.880

好吧，我们可以从这个开始：

```
template<typename Output, typename Input, typename Transformation>
auto transform( Input const& input, Transformation t )->Output {
  Output retval;
  retval.reserve(input.size());
  using std::cbegin; using std::cend;
  std::transform(cbegin(input), cend(input), std::back_inserter(retval));
  return retval;
} 
```

然后做这样的事情：

```
namespace aux{
  using std::cbegin;
  template<typename T>
  auto adl_cbegin( T&& t )->decltype(cbegin(std::forward(t)));
}
template<typename Input, typename Transformation>
auto transform_vec( Input const& input, Transformation t )->
    std::vector<typename std::remove_ref<decltype(t(*adl_cbegin(input)))>::type>
{
  typedef std::vector<typename std::remove_ref<decltype(t(*adl_cbegin(input)))>::type> Output;
  Output retval;
//      retval.reserve(input.size()); -- need a way to do this if Input has an easy way to get size.  Too lazy to bother right now.
  using std::cbegin; using std::cend;
  std::transform(cbegin(input), cend(input), std::back_inserter(retval));
  return retval;
} 
```

注意：这需要任何可迭代的东西（向量、数组、迭代器对）并生成 a 并从那里升级到在输入范围上生成 a `std::pair`of `boost::transform_iterator`，因此我们可以将生成的转换插入任意容器中，我们只做如果我们实际上取消引用迭代器，则转换工作。

或者，你知道，直接使用`std::back_inserter(input)`。:) 这种方法的缺点是它不做储备，所以会影响性能。

# haskell - 读取文件后 Haskell 文件会自动关闭吗？

> ID：13868516
> 
> 赞同：8
> 
> 时间：2012-12-13T21:08:35.663
> 
> 标签：haskell, io, lazy-evaluation

我想使用 Haskell 函数

```
readFile :: FilePath -> IO String 
```

将文件的内容读入字符串。在[文档](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/base-4.2.0.1/System-IO.html#v%3areadFile)中，我读到“文件是根据需要延迟读取的，就像 getContents 一样。”

我不确定我是否完全理解这一点。例如，假设我写

```
s <- readFile "t.txt" 
```

执行此操作时：

*   文件被打开。
*   s 中的字符实际上是在需要评估某些表达式时（但不会很快）从文件中读取的（例如，如果我评估文件的`length s` **所有**内容将被读取并且文件将被关闭）。
*   一旦读取了最后一个字符，与此调用关联的文件句柄`readFile`就会关闭（自动）。

我的第三个陈述正确吗？那么，我可以自己调用`readFile`而不关闭文件句柄吗？只要我没有消耗（访问）整个结果字符串，句柄会保持打开状态吗？

**编辑**

这是有关我的疑问的更多信息。假设我有以下内容：

```
foo :: String -> IO String
foo filename = do
                  s <- readFile "t.txt"
                  putStrLn "File has been read."
                  return s 
```

当`putStrLn`执行时，我会（直觉地）期望

1.  `s`包含文件的全部内容`t.txt`，
2.  用于读取文件的句柄已关闭。

如果不是这种情况：

*   `s`执行时包含什么`putStrLn`？
*   执行时文件句柄处于什么状态`putStrLn`？
*   如果 when `putStrLn`is executed`s`不包含文件的全部内容，什么时候会真正读取这个内容，什么时候会关闭文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T21:27:57.393

> 我的第三个陈述正确吗？

不完全，文件没有关闭“一旦最后一个字符被读取”，至少通常不会，它在读取期间处于半关闭状态，IO-manager/runtime下次执行此类操作时将关闭它。如果您正在快速打开和读取文件，如果操作系统限制不是太高，那么该延迟可能会导致您用完文件句柄。

然而，对于大多数用例（以我有限的经验）来说，关闭文件句柄是足够及时的。[有些人不同意，认为惰性 IO 在所有情况下都极其危险。它肯定有陷阱，但 IMO 的危险往往被夸大了。]

> 那么，我可以自己调用`readFile`而不关闭文件句柄吗？

是的，当您使用`readFile`时，当文件内容被完全读取或注意到文件句柄不再被引用时，文件句柄会自动关闭。

> 只要我没有消耗（访问）整个结果字符串，句柄会保持打开状态吗？

不完全是，`readFile`将文件句柄置于半关闭状态，在文档中进行了描述`hGetContents`：

> 计算`hGetContents hdl`返回对应于 管理的通道或文件的未读部分的字符列表，将`hdl`其置于中间状态，半关闭。在这种状态下，实际上是关闭的，但项目会按需`hdl`读取并累积在由返回的特殊列表中`hdl``hGetContents hdl.`

* * *

```
foo :: String -> IO String
foo filename = do
              s <- readFile "t.txt"
              putStrLn "File has been read."
              return s 
```

~~啊，那是另一端惰性 IO 的陷阱之一。此处文件在其内容被读取之前关闭。返回时`foo`，不再引用文件句柄，然后关闭。s 结果的使用者`foo`然后会发现它`s`是一个空字符串，因为当`hGetContents`尝试从文件中实际读取时，句柄已经关闭。~~

`readFile`我将 的行为与的行为混淆了

```
bracket (openFile file ReadMode) hClose hGetContents 
```

那里。仅在不再引用`readFile`文件句柄后才关闭文件句柄，因此它的行为在此处按预期正确。`s`

> 当`putStrLn`执行时，我会（直觉地）期望
> 
> 1.  `s`包含文件的全部内容`t.txt`，
> 2.  用于读取文件的句柄已关闭。

不，`s`除了可能从文件句柄中获取一些字符的配方外，还没有任何内容。文件句柄是半封闭的，但不是封闭的。`s`当文件内容被完全读取或超出范围时，它将关闭。

> 如果不是这种情况：
> 
> *   `s`执行时包含什么`putStrLn`？
> *   执行时文件句柄处于什么状态`putStrLn`？
> *   如果 when `putStrLn`is executed`s`不包含文件的全部内容，什么时候会真正读取这个内容，什么时候会关闭文件？

前两个问题已经回答了，第三个问题的答案是“内容被消费时会读取文件”，当内容全部被读取或不再被引用时会关闭。

这与上面的`bracket`调用不同 -`bracket`保证最终操作，`hClose`即使其他操作抛出异常也会运行，因此通常建议使用它。但是，返回`hClose`时运行`bracket`，然后`hGetContents`无法从现在真正关闭的文件句柄中获取任何内容。但`readFile`如果发生异常，不一定会关闭文件句柄。

这是惰性 IO 的危险或怪癖之一，文件在需要其内容之前不会被读取，如果你错误地使用惰性 IO，那就太迟了，你不会得到任何内容。

这是一个很多人（甚至大多数人）一次又一次陷入的陷阱，但是在被它咬伤之后，人们很快就会知道什么时候 IO 需要非懒惰并在这些情况下非懒惰地去做。

替代方案（迭代器、枚举器、管道、管道......）避免了这些陷阱[除非实现者犯了错误]，但在惰性 IO 完全没问题的情况下使用起来就不太好用了。另一方面，他们更好地处理不希望懒惰的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T21:54:40.440

> 当 putStrLn 被执行时，我会（直观地）期望它`s`包含文件 t.txt 的全部内容，

您需要考虑一下您在这里使用惰性 IO 的事实。从文件中读取只会创建一个未经评估的字符串计算，如果以后需要，它将读取文件。

通过使用惰性 IO，您可以将 IO 推迟到需要该值为止。

Once the last character of your file has been read, or all references to the open file are dropped (e.g. your `s` value), your open file will be closed by the garbage collector.

# ajax - 复选框 ajax 表单将单词数组发布到电子邮件

> ID：13868521
> 
> 赞同：1
> 
> 时间：2012-12-13T21:08:58.687
> 
> 标签：ajax, arrays, email, post, checkbox

我正在尝试使用现有的联系 form.js 脚本和来自模板怪物的 mailhandler.php 制作带有复选框的预订表格。所有 text 和 textarea 输入都可以正常工作，但复选框仅返回单词数组。

以下是部分代码：

html

```
 <form action="bin/MailHandler.php" method="post" id="booking-form" >
        <fieldset>
        <div class="grid_12">
        <div class="bookingformwrapper">
          <div class="headerbar">WAXING</div>

                intrested in:<br/>
            <input type="checkbox" name="waxing[]" value="kidum_esek" id="wax1"/>aaa<br />
            <input type="checkbox" name="waxing[]" value="mitug_esek" id="wax2"/>bbb<br />
            <input type="checkbox" name="waxing[]" value="laikim" id="wax3"/>CCC<br />
            <input type="checkbox" name="waxing[]" value="aher" id="wax4"/>DDD<br /> 
```

ajax jQuery

```
 ,submitFu:function(){

var data = { 'waxing[]' : []};
$(":checked").each(function() {
  data['waxing[]'].push($(this).val());
   });

                        _.validateFu(_.labels)                          
                        if(!_.form.has('.'+_.invalidCl).length)

                            $.ajax({
                                type: "POST",
                                url:_.mailHandlerURL,
                                data:{
                                    choice:'waxing[]',
                                    name:_.getValFromLabel($('.name',_.form)),
                                    email:_.getValFromLabel($('.email',_.form)),
                                    phone:_.getValFromLabel($('.phone',_.form)),
                                    fax:_.getValFromLabel($('.fax',_.form)),
                                    state:_.getValFromLabel($('.state',_.form)),
                                    message:_.getValFromLabel($('.message',_.form)),
                                    message2:_.getValFromLabel($('.message2',_.form)),
                                    datepicker:_.getValFromLabel($('#datepicker',_.form)),
                                    owner_email:_.ownerEmail,
                                    stripHTML:_.stripHTML
                                },
                                success: function(){
                                    _.showFu()
                                }
                            })          
                    }, 
```

php

```
 <?php
$owner_email = $_POST["owner_email"];
$headers = 'From:' . $_POST["email"];
$subject = 'A message from your site visitor ' . $_POST["name"];    
$messageBody = "";

if($POST['waxing[]'] !='nope'){
    $messageBody .= '<p>Choice: ' . explode(",", $_POST['waxing[]']);
    $messageBody .= '<br>' . "\n";
}

if($_POST['name']!='nope'){
    $messageBody .= '<p>Visitor: ' . $_POST["name"] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}
if($_POST['email']!='nope'){
    $messageBody .= '<p>Email Address: ' . $_POST['email'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}else{
    $headers = '';
}
if($_POST['state']!='nope'){        
    $messageBody .= '<p>State: ' . $_POST['state'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}
if($_POST['phone']!='nope'){        
    $messageBody .= '<p>Phone Number: ' . $_POST['phone'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}   
if($_POST['fax']!='nope'){      
    $messageBody .= '<p>Fax Number: ' . $_POST['fax'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}
if($_POST['datepicker']!='nope'){
    $messageBody .= '<p>Date: ' . $_POST['datepicker'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}
if($_POST['message']!='nope'){
    $messageBody .= '<p>Address: ' . $_POST['message'] . '</p>' . "\n";
}
if($_POST['message2']!='nope'){
    $messageBody .= '<p>Notes: ' . $_POST['message2'] . '</p>' . "\n";
}
if($_POST["stripHTML"] == 'true'){
    $messageBody = strip_tags($messageBody);
}

try{
    if(!mail($owner_email, $subject, $messageBody, $headers)){
        throw new Exception('mail failed');
    }else{
        echo 'mail sent';
    }
}catch(Exception $e){
    echo $e->getMessage() ."\n";
}

?> 
```

这是在电子邮件中返回的内容：

```
Choice: Array
Visitor: Father Christmas

Email Address: father@christmas.com

Phone Number: 01234 567890

Date: 25th December

Address: North Pole

Notes: Mince Pies 
```

在哪里说选择：数组，我需要它给我选择/选中复选框的值。

# css - 如何在浏览器窗口的一侧创建一个选项卡集？

> ID：13868524
> 
> 赞同：2
> 
> 时间：2012-12-13T21:09:28.613
> 
> 标签：css, tabs, transform

我正在尝试在浏览器窗口的一侧创建一个侧向选项卡集 - 如下所示：

![在此处输入图像描述](../Images/f72553d65e37db6f1e5692f5a1724e2f.png)

到目前为止相关的css代码：

```
left: -29px;
transform: rotate(-270deg);
-ms-transform: rotate(-270deg); /* IE 9 */
-webkit-transform: rotate(-270deg); /* Safari and Chrome */
-o-transform: rotate(-270deg); /* Opera */
-moz-transform: rotate(-270deg); /* Firefox */
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1); /* for earlier versions of IE */ 
```

这对于 Firefox、Chrome 和 IE9 非常有效——但对于以前版本的 IE，该选项卡不会显示。问题似乎出在`left: -29px;`代码上；如果我将它设置为 0，它在 IE8 和更早版本中看起来是正确的，但在 IE9、Firefox 或 Chrome 中则不正确。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:15:21.900

作为临时 hack，您可以添加一个 IE 版本的条件样式表，将`left`属性覆盖为 0：

```
<!--[if lt IE 9]>
    <style>

    #myElement {
        left: 0px;
    }

    </style>
<![endif]--> 
```

这里的问题可能是发生旋转的原点不一样。我会看看是否能找到任何关于指定转换原点的信息。

# objective-c - 以编程方式将文件加载到 iBooks

> ID：13868526
> 
> 赞同：1
> 
> 时间：2012-12-13T21:09:30.127
> 
> 标签：objective-c, ios, ibooks

我不确定为什么这段代码不起作用。有任何想法吗？iBooks 打开，但没有显示任何内容。

```
NSString *fileToOpen = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"ibooks"]; 
NSString *stringURL = [NSString stringWithFormat:@"itms-books:%@", fileToOpen];
NSURL *url = [NSURL URLWithString:stringURL];
[[UIApplication sharedApplication] openURL:url]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:32:12.767

`itms-books:`URL 方案用于指向 iBookstore 的链接。如果您想要允许用户在 iBooks 中打开 PDF 或 ePub 文件，请查看[`QLPreviewController`](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/QLPreviewController_Class/Reference/Reference.html)或[`UIDocumentInteractionController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDocumentInteractionController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009304)。

# java - JOptionPane 和扫描仪输入问题

> ID：13868528
> 
> 赞同：2
> 
> 时间：2012-12-13T21:09:36.860
> 
> 标签：java, string, window, java.util.scanner, joptionpane

我正在编写一个程序，有时我需要使用 JOptionPane 在窗口上打印一个字符串。该行的代码如下所示：

```
JOptionPane.showMessageDialog(null, "Name: " + a.getName()); 
```

getName 函数引用我创建的对象 a，它有一个返回字符串的方法。但是，当我的代码达到这一点时，程序似乎进入了某种无限循环，因为窗口永远不会弹出，并且在使用调试时，它似乎永无止境。

主要的是，当我使用 getName 时，我允许用户在主驱动程序中使用不同的函数设置此名称。

getName() 基本上就是一行，返回名称；

我的 setName() 函数的代码基本上是：

```
Scanner a = new Scanner(System.in);
System.out.print("Pick a name: ");
name = in.nextLine();
a.close(); 
```

Name 是类中的私有变量。close() 不是必需的，但我尝试了它是否有任何效果。

我注意到的是，如果我使用上面的代码，窗口永远不会弹出，我会陷入无限循环。但是，如果我只是将 name = 行更改为任何内容，例如：

```
name = "foo"; 
```

代码运行流畅，弹出窗口，我没有陷入循环。即使在程序提示我时我没有输入名称，导致空字符串，窗口仍然没有弹出。任何人都可以帮助和建议我为什么会这样吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:00:33.987

使用操作在使用的类`Scanner`中创建一个块，用于检查非调度线程是否不受阻塞 IO 的影响。调用不会解除阻塞线程。`WaitDispatchSuport``JOptionPane``Scanner.close()`

`showMessageDialog`一种解决方案是从[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)调用：

```
Scanner a = new Scanner(System.in);
System.out.print("Pick a name: ");
final String name = a.nextLine();

SwingUtilities.invokeLater(new Runnable() {

   @Override
   public void run() {
      JOptionPane.showMessageDialog(null, "Name: " + name);             
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-13T07:34:35.443

此代码段可以帮助您

```
public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        final String s = scanner.nextLine();
        SwingUtilities.invokeLater(() -> {
            JDialog dialog = new JDialog();
            dialog.setAlwaysOnTop(true);
            JOptionPane.showMessageDialog(dialog, s);
        });
} 
```

# mysql - 查询以选择以特定字符结尾的字符串

> ID：13868532
> 
> 赞同：17
> 
> 时间：2012-12-13T21:09:53.793
> 
> 标签：mysql

我有一列包含字符串：

```
aaa_1
aaa_11 
```

我需要查询以 . 结尾的字符串`_1`。我尝试了以下方法： select col from table where col like `%_1`; `_1`但是查询给了我以and结尾的字符串`_11`。我该如何纠正这个？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-13T21:15:05.630

试试这个：

```
select col from table where col like '%\_1' 
```

字符`_`是一个快乐的，像％，但它只匹配一个字符，所以你必须用它来转义它`\`

见这里：[http ://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-12-13T21:14:09.953

你会想要使用更多与子字符串相关的东西。

尝试使用 where 子句，例如：

```
SELECT col from table WHERE RIGHT(col, 2) = '_1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T21:24:16.837

您应该转义`%`并`_`添加反斜杠`\`，因为它们是 mysql 中的通配符：

[http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)

```
String |     Description
\%     |     Matches one “%” character
\_     |     Matches one “_” character 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T21:28:45.677

其中许多会选择诸如`%_12`or之类的东西`%_111121`。确保您测试了各种案例，以确保这些`SELECT`语句为您提供了正确的子集。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-20T08:46:32.650

```
SELECT col FROM table WHERE col REGEXP '_1[[:>:]]' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-28T09:59:05.173

您可以快速使用此查询过滤掉以特定字符结尾的字符串。
下面的查询输出将给出所有以“er”结尾的名称。

```
select column_name
from table
where column_name regexp '.*er$'; 
```

# visual-studio-2010 - VSS & VS：当我打开设计器文件时，如何停止自动检出？

> ID：13868544
> 
> 赞同：3
> 
> 时间：2012-12-13T21:10:51.617
> 
> 标签：visual-studio-2010, visual-sourcesafe

我正在运行 Visual Source Safe 2005 和 Visual Studio 2010。该项目使用 Visual Basic。

首先：我已经进入工具 > 选项 > 源代码管理 > 环境，设置全部“关闭”，“签入项目行为”的“保存时”和“编辑时”都设置为“自动签出” 。”

令我困惑的是，我可以打开 .vb 文件，但它们不会自动检出。但是当我打开一个设计器文件时，该文件会自动检出给我。

当我进行比较时，它表明什么都没有改变；都在 .designer.vb 和 .resx 中。

我真的不希望这种情况发生，因为很难确定我实际更改了哪个文件与我只查看了哪个文件。

如果有人知道如何阻止这种情况发生，我会很感激的。但我也想知道是否无法阻止自动结帐的发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-30T09:31:36.227

定期我一直在互联网上搜索这个问题的答案，认为这是一个回归错误，这一次又一次我去工具>选项>源代码控制>环境，确实所有都被选中并且都有“保存” &“编辑时”设置为“自动签出”。只需设置将“保存时”和“编辑时”都设置为“提示结帐”。解决了烦人的问题，现在的行为就像我喜欢的那样，包括在打开 aspx 设计器文件时提示结帐

# typescript - 重载 Function.prototype 时出现编译错误

> ID：13868548
> 
> 赞同：0
> 
> 时间：2012-12-13T21:11:19.290
> 
> 标签：typescript

我在 common.js 文件中有以下方法。当我将“common.js”文件包含到打字稿文件中时，第一行出现编译错误。

我应该如何解决这个问题？

```
Function.prototype.method = function (name, func) {
    ///<summary>
    ///Create a new method if it not ready exists
    ///</summary>
    if (!this.prototype[name]) {
        this.prototype[name] = func;
        return this;
    }
};

String.method('trim', function () {
    return this.replace(/^\s|\s+$/g, '');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:35:17.243

找到了。

只需将 common.js 文件移动到 common.ts 文件即可。然后在扩展“原型”的行之前添加以下代码

```
interface Function {
   method(name: string, func: Function): any;
} 
```

# javascript - Jquery Cycle 即时更改选项

> ID：13868550
> 
> 赞同：0
> 
> 时间：2012-12-13T21:11:23.620
> 
> 标签：javascript, jquery, jquery-cycle

我想在页面上动态更改 jquery 循环的选项。具体来说，我希望速度下降。根据其中一位创建者的说法，您可以使用“cycle.opts”来执行此操作。在我的例子中，我特别

```
$('.cycle-streams').cycle({
    fx: 'scrollVert',
    continuous: 1,
    speed: 1000,
    delay: 0,
    easing: 'linear'
});

var changedOpts = $('.cycle-streams').data('cycle.opts');

$('.cycle-streams').mouseover(function() {
    var changedOpts = $('.cycle-streams').data('cycle.opts');
    changedOpts.speed = 1000000000000;
    $('.cycle-streams').data('cycle.opts', changedOpts);
}); 
```

我已经为此工作了一段时间，并且对自己做错了什么感到迷茫。任何帮助，将不胜感激。jsfiddle 在这里... [http://jsfiddle.net/bmXgj/](http://jsfiddle.net/bmXgj/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:54:22.870

我把你的小提琴改成了这样：

```
var changedOpts = $('.cycle-streams').data('cycle.opts');

$('.cycle-streams').mouseover(function() {
    //hover in
    $('.cycle-streams').cycle('pause');
    changedOpts.speedIn = 500;
    changedOpts.speedOut = 500;
    $('.cycle-streams').cycle('next');
    $('.cycle-streams').cycle('resume');   
});

$('.cycle-streams').mouseout(function() {
    //hover out
    $('.cycle-streams').cycle('pause');
    changedOpts.speedIn = 3000;
    changedOpts.speedOut = 3000;
    //$('.cycle-streams').cycle('next');
    $('.cycle-streams').cycle('resume');
});​ 
```

我注意到您出于某种原因重新声明了“changedOpts”。当我在控制台中看到这个变量时，它显示为未定义。既然你已经定义了它，我就继续使用它。

你也从来没有重置循环的状态。我添加了 pause 和 resume ~~。它现在似乎可以工作，但并不完美。最后一面需要在使用新速度之前清除，因此在尝试加速时剧烈跳跃（例如 3000 到 500）会导致明显的延迟。~~我还添加了下一条语句。

我注意到，当插件接下来处理它时，它正在清除超时。所以我想如果我存储剩余时间（暂停），然后移动到下一张幻灯片（下一张），然后恢复显示（恢复）时间将恢复。这似乎奏效了。

从快到慢时不需要“下一个”动作，因为离开容器时您通常不会注意到“孤儿”滑动，因为它正在快速循环。我把它放在那里是为了很好的衡量，以防你的速度相差不远。

我还注意到你只改变了一种速度。~~我假设，不看插件的内容，“速度”选项仅在初始化时使用。添加其他两种速度后，我得到了正确的动作。~~在查看了插件的“胆量”之后，我确信速度选项用于同步其他两种速度。如果它们都不匹配，您可能会不同步。初始化代码使用'speed'来设置'speedIn'和'speedOut'，所以我们需要改变这两个来影响'running'速度。

[http://jsfiddle.net/bmXgj/6/](http://jsfiddle.net/bmXgj/6/)

编辑：不需要暂停和恢复。

EDIT2：我确实需要暂停和恢复，但我还需要下一个。此外，“速度”选项一旦设置为第一次开始循环，就可以忽略。它似乎是 speedIn = speedOut = X 的简写

# java - 避免批量查询中的不同关键字

> ID：13868552
> 
> 赞同：2
> 
> 时间：2012-12-13T21:11:30.393
> 
> 标签：java, jpa, eclipselink

使用 Eclipselink 2.4.1，我试图避免“distinct”关键字出现在批处理查询中。文档表明，当使用批处理类型 EXISTS 时，不使用 distinct 关键字，但是根据我的经验，在检索多对一关系时，它在所有情况下都使用。例如，我在 oracle 中针对 SCOTT 演示模式编写了以下类：

```
@Entity
public class Emp implements Serializable {
    @Id private long empno;
    private String ename;
    @ManyToOne
    @JoinColumn(name="DEPTNO")
    private Dept dept;
    public Emp() { }
    public long getEmpno() { return this.empno; }
    public void setEmpno(long empno) { this.empno = empno; }
    public String getEname() { return this.ename; } 
    public void setEname(String ename) { this.ename = ename; } 
    public Dept getDept() { return this.dept; }
    public void setDept(Dept dept) { this.dept = dept; }
}

@Entity
public class Dept implements Serializable {
    @Id private long deptno;
    private String dname;
    public Dept() {}
    public long getDeptno() { return this.deptno; }
    public void setDeptno(long deptno) { this.deptno = deptno; }
    public String getDname() { return this.dname; }
    public void setDname(String dname) { this.dname = dname; }
} 
```

我正在尝试通过批量获取来检索员工和部门：

```
Query query = em.createQuery("select emp from Emp as emp ");
query.setHint(QueryHints.BATCH_TYPE, BatchFetchType.EXISTS);
query.setHint(QueryHints.BATCH, "emp.dept");
List<Emp> resultList = query.getResultList();
resultList.get(0).getDept(); 
```

生成以下 SQL：

```
[EL Fine]: sql: 2012-12-12 17:04:21.178--ServerSession(1034011695)--Connection(312759349)--SELECT EMPNO, ENAME, DEPTNO FROM SCOTT.EMP
[EL Fine]: sql: 2012-12-12 17:04:21.286--ServerSession(1034011695)--Connection(312759349)--SELECT distinct t0.DEPTNO, t0.DNAME FROM SCOTT.DEPT t0 WHERE EXISTS (SELECT t1.EMPNO FROM SCOTT.EMP t1 WHERE (t0.DEPTNO = t1.DEPTNO)) 
```

除了使用 EXISTS 批处理类型来避免批处理查询中的 distinct 关键字之外，是否还需要做一些额外的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:18:20.677

请记录一个错误。它应该只用于 JOIN 批处理。

您可以在查询上将 distinct 设置为 false 以避免它。（没有提示，您需要在根 ObjectLevelReadQuery 上调用 dontUseDistinct()）。

```
((ObjectLevelReadQuery)((JpaQuery)query).getDatabaseQuery()).dontUseDistinct(); 
```

# php - 从头开始的 WordPress 主题，小部件不起作用

> ID：13868555
> 
> 赞同：1
> 
> 时间：2012-12-13T21:11:34.213
> 
> 标签：php, wordpress, widget

我知道这个话题已经讨论了很多，但我已经尝试了我能在网上找到的所有东西，但没有任何效果。我的自定义模板中需要一个小部件区域。我从头开始编写 if 并且没有使用准系统类型的启动器，因此我没有可以从 functions.php 开始。

在 wp-admin 中，它会按原样显示我的小部件，但是当该区域中有小部件并且重新加载页面时，它会重置。换句话说，小部件不会持续存在于它应该存在的区域中。我错过了什么吗？我的 wordpress 安装不好吗？

这是我的functions.php的全部内容

```
<?php
register_sidebar
    (
        array(
            'name' => 'Header Widget',
        'id' => 'headerBanner',
        'before_widget' => '<div id="banner">',
        'after_widget' => '</div>',
        'before_title' => '',
        'after_title' => '',
    )
) 
```

?>

和我的 index.php

```
<?php if ( !dynamic_sidebar (1)) : ?>
<h1>it didn't work</h1>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:14:16.347

尝试：

```
<?php if(!dynamic_sidebar ('headerBanner')) : ?>
<h1>it doesn't work</h1>
<?php endif; ?> 
```

调用时需要传入要显示的侧边栏的id`dynamic_sidebar`

另请注意，`dynamic_sidebar`如果侧边栏中没有添加任何小部件，则将返回 false，因此向其添加小部件并查看它是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:02:40.497

您是否尝试过这种其他方法？

```
<?php dynamic_sidebar( 'headerBanner' ); ?> 
```

# iphone - 设备旋转后滚动变得不稳定

> ID：13868564
> 
> 赞同：0
> 
> 时间：2012-12-13T21:12:19.017
> 
> 标签：iphone, objective-c, ios, ipad

我有一个带有一些自定义单元格的 UICollectionView，它使用流式布局，横向有 3 列，纵向有 2 列。当我在横向上启动应用程序时，滚动给我 55-60 FPS，这相当不错。但是，在我出于某种原因旋转后，它会下降到 30 FPS 及以下。知道旋转如何在滚动中破坏 FPS 吗？

我在 WWDC 视频中听到一些关于光栅化可能导致它的说法。我必须在旋转时关闭并打开背面光栅化，这是真的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:55:37.417

*   您是否在滚动时运行任何其他动画？这些都会影响性能。
*   您是否在任何元素上使用 CALayer 阴影属性？使用阴影图像可能会更好。
*   你的界面元素（或任何移动的东西）是否包含透明度？通过使用模拟器并选择 Debug - Color Blended Layers 来检查这一点。

混合会大大降低性能，因此尽可能使用不透明视图。

# dojo - 格式化 dijit.form.DateTextBox

> ID：13868565
> 
> 赞同：1
> 
> 时间：2012-12-13T21:12:25.273
> 
> 标签：dojo

我正在使用 Dojo`dijit.form.DateTextBox`小部件。我的客户希望将日期显示为`dd-MMM-yyyy`(13-Dec-2012)。这不是问题。但是，他希望能够使用键盘使用`ddMMyyyy`格式输入条目。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T06:34:36.683

如何在 instaciationg 时设置类似的`constraints`-property ：`dijit.form.DateTextBox`

```
var dateTextBox = new dijit.form.DateTextBox({
    value: new Date(),  // or what ever
    constraints: {datePattern: 'ddMMyyyy'}
}); 
```

# php - Codeigniter Tank Auth 激活和注销错误

> ID：13868566
> 
> 赞同：-1
> 
> 时间：2012-12-13T21:12:52.270
> 
> 标签：php, codeigniter, tankauth

我已经开始在我的 CodeIgniter 应用程序中使用 Tank Auth，我已经按照一些教程步骤进行了设置，只要它有效，它就会在帐户激活和注销期间产生大量错误消息。以下是错误：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined index: session_id

Filename: libraries/Session.php

Line Number: 272

A PHP Error was encountered

Severity: Notice

Message: Undefined index: ip_address

Filename: libraries/Session.php

Line Number: 272

A PHP Error was encountered

Severity: Notice

Message: Undefined index: user_agent

Filename: libraries/Session.php

Line Number: 272

A PHP Error was encountered

Severity: Notice

Message: Undefined index: last_activity

Filename: libraries/Session.php

Line Number: 272

A PHP Error was encountered

Severity: Notice

Message: Undefined index: session_id

Filename: libraries/Session.php

Line Number: 288

A PHP Error was encountered

Severity: Notice

Message: Undefined index: last_activity

Filename: libraries/Session.php

Line Number: 289

A PHP Error was encountered

Severity: Warning

Message: Cannot modify header information - headers already sent by (output started at /projekt/system/core/Exceptions.php:185)

Filename: libraries/Session.php

Line Number: 675

A PHP Error was encountered

Severity: Warning

Message: Cannot modify header information - headers already sent by (output started at /projekt/system/core/Exceptions.php:185)

Filename: helpers/url_helper.php

Line Number: 542 
```

这是参考点的代码：

```
 foreach (array('session_id','ip_address','user_agent','last_activity') as $val)
    {
        unset($custom_userdata[$val]);
        $cookie_userdata[$val] = $this->userdata[$val]; //272 line
    }

    $this->CI->db->where('session_id', $this->userdata['session_id']); //288 line
    $this->CI->db->update($this->sess_table_name, array('last_activity' => //289 line $this->userdata['last_activity'], 'user_data' => $custom_userdata)); 
```

> ```
>  setcookie( // 675 line
>               $this->sess_cookie_name,
>               $cookie_data,
>               $expire,
>               $this->cookie_path,
>               $this->cookie_domain,
>               $this->cookie_secure
>           ); 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:28:09.137

这些错误看起来并不严重，因为它们仍然只在错误层次结构的通知级别上。我会查看 code-igniter 的源代码，看看发生了什么。该源值得了解如何编辑和导航，因为它会在以后节省时间。由于我没有使用 Tank Auth，我不确定确切的问题是什么。我建议在您的源代码中设置 var_dump 语句来跟踪它发生了什么。在您的库或您正在使用的任何其他第三方工具的上下文中，看起来确实不存在某些模型或会话变量。您可能需要声明一个 codeigniter 实例才能使用这些第三方工具，因为它们存在于 codeigniter 范围之外。

```
$_CI =& get_instance(); // creates a CI instance that can exist outside of the MVC setup 
```

您可以在本教程的以下部分查看更多信息：在您的库中使用 CodeIgniter 资源 [http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

# jsf-2 - 如何使 p:selectOneMenu 显示当前值？

> ID：13868568
> 
> 赞同：1
> 
> 时间：2012-12-13T21:13:03.600
> 
> 标签：jsf-2, primefaces

我必须`<p:selectOneMenu>`从中选择一个项目的类别。默认情况下，菜单显示`someBean.selectedParty.categories`为选中的第一个条目。但是该项目已经有一个`someBean.selectedItem.category`我想要显示/选择的当前类别。我怎样才能做到这一点？

```
<p:selectOneMenu value="#{someBean.selectedItem.category}" converter="omnifaces.SelectItemsConverter">
    <f:selectItems value="#{someBean.selectedParty.categories}" var="category" itemLabel="#{category.name}"/>   
</p:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:02:00.120

只要 someBean.selectedItem.category 的 getter 返回列表中可用的值，它就会将该值显示为选中状态。

但是有一些陷阱：
1）可能应该在 bean 构造函数中设置默认值

2) bean (someBean) 不能有 RequestScope - 因为每一个 HTTP 请求，包括 Ajax 请求，都会创建一个全新的 bean 实例，所有属性都设置为默认值。如果您的 bean 是 RequestScope，请更改为 ViewScope

3）当您从 someBean 到 selectedItem 再到 category 时，请注意 selectedItem 和 selectedParty 必须相同（不仅内容相同，而且内存地址相同），否则 JSF 的生命周期将停止。我猜你是在更早地设置选定的对象。如果您使用的是 AJAX，请尝试使用下拉菜单向新页面发布“完整”请求以进行调试。

4）为了简化这一点，您可以尝试将类别和类别直接移动到 someBean 中，这样页面应该看起来像

```
<p:selectOneMenu value="#{someBean.category}" converter="omnifaces.SelectItemsConverter">
    <f:selectItems value="#{someBean.categories}" var="category" itemLabel="#category.name}"/>    
</p:selectOneMenu> 
```

# parameters - 使用 Tessellation 在 HLSL 中传递参数

> ID：13868570
> 
> 赞同：-1
> 
> 时间：2012-12-13T21:13:17.307
> 
> 标签：parameters, directx, shader, hlsl, tessellation

我的问题希望非常简单，但我似乎无法正确处理数据流。问题是如何将纹理坐标和法线数据从顶点着色器通过曲面细分阶段（外壳和域着色器）传递到像素着色器进行渲染。

我遇到的问题是，在使用镶嵌之前，数据可以简单地从顶点传递到像素着色器。现在这两个着色器之间有多个步骤，一个补丁常量函数是外壳着色器，然后是域着色器。

如果有人能给我一些关于如何通过这些部分传递数据的见解，如果可能的话，也许可以用一些快速的伪代码来演示它，我将非常感激。如果您需要更多信息或我当前的代码（即使它不起作用），请告诉我。

额外信息：该程序是使用 C++ 编写的，使用 DirectX 11 api 使用 HLSL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:14:44.407

This is the code that I used to create the tessellation, I hide the some code to show only the necessary for you. ps: tess_factor is a parameter of constant buffer.

```
HS_OUTPUT_DATA hs_patch(InputPatch<VERTEX_PASS, 3> ip, uint pid : SV_PrimitiveID)
{
HS_OUTPUT_DATA ret;
float tess = tess_factor;
ret.edges[0] = ret.edges[1] = ret.edges[2] = tess;
ret.inside = tess; // same value that edges
return ret;
}

[domain("tri")]
[partitioning("integer")] // integer, fractional_even, fractional_odd
[outputtopology("triangle_cw")]
[outputcontrolpoints(3)]
[patchconstantfunc("hs_patch")]
HS_OUTPUT hs(InputPatch<VERTEX_PASS, 3> ip, uint index : SV_OutputControlPointID)
{
HS_OUTPUT ret;
ret.pos = ip[index].pos;
return ret;
}

[domain("tri")]
VERTEX_PASS ds(HS_OUTPUT_DATA input, float3 dl : SV_DomainLocation, const     
OutputPatch<HS_OUTPUT, 3> bp)
{
    VERTEX_PASS ret;
    ret.pos = bp[0].pos * dl.x + bp[1].pos * dl.y + bp[2].pos * dl.z;
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:40:10.420

Vertex、Hull、Domain和Pixel Shader的常量缓冲区是分开的。在应用程序后面的代码中，在您使用的常量缓冲区中设置参数：

```
ID3D11DeviceContext::PSSetConstantBuffers
ID3D11DeviceContext::HSGetConstantBuffers 
```

第一个函数将常量缓冲区设置为像素着色器使用。船体着色器的第二组。但是在您的情况下，您必须使用结构向前传递参数。这是我只传递颜色的代码：

```
struct VERTEX_PASS
{
    float4 pos : SV_POSITION;
    float4 color : COLOR;
};

struct HS_OUTPUT_DATA
{
    float4 pos : WORLDPOS;
    float4 color : COLOR;
    float edges[3] : SV_TessFactor; // not using in this example
    float inside : SV_InsideTessFactor; // not using in this example
};

HS_OUTPUT_DATA hs_patch(InputPatch<VERTEX_PASS, 3> ip, uint pid : SV_PrimitiveID)
{
    HS_OUTPUT_DATA ret;
    ret.color = ip[pid].color; // pass the color to forward
    return ret;
} 
```

纹理坐标是相同的想法，但是所有顶点的颜色都是恒定的，在纹理坐标的情况下，在域着色器阶段，您必须像计算最终顶点位置一样计算新的 UV 坐标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T15:13:18.503

我认为您需要一个简单的示例，因为您没有像错误消息等那样解释您的情况。

这是一个：[http ://www.rastertek.com/dx11tut38.html](http://www.rastertek.com/dx11tut38.html)

作者几乎对每一行代码都进行了简单的解释，可以看tessellation stage部分来了解如何定义渲染管线各stage之间的数据结构。

我还建议您在启用调试信息的情况下编译着色器代码。 [http://msdn.microsoft.com/zh-tw/library/windows/desktop/ff476261(v=vs.85).aspx](http://msdn.microsoft.com/zh-tw/library/windows/desktop/ff476261(v=vs.85).aspx)

这样你就可以知道你的着色器程序出了什么问题，也许你可以立即自己解决它。

我只想在下面发表评论，但不知何故评论按钮消失了。

# spring - 扫描多模块maven spring项目的services模块中的组件

> ID：13868571
> 
> 赞同：0
> 
> 时间：2012-12-13T21:13:19.547
> 
> 标签：spring, maven

我有一个具有以下结构的 Maven 多模块项目：

*   Site-Parent
    -- Site-UI
    -- Site-Entities
    -- Site-Services
    -- Sites-Repository

我的站点-UI web.xml：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>com.mysite.app.web.spring</param-value>
`</context-param> 
```

com.mysite.app.web.spring 中的 AppConfig.java：

```
@Configuration
@ImportResource({ "classpath*:contextConfig.xml",
        "classpath*:securityConfig.xml" })
@ComponentScan(basePackages = "com.mysite.app.web.controller")
public class AppConfig
{
    @Bean
    public AnnotationMethodHandlerAdapter annotationMethodHandlerAdapter()
    {
        ...
    }

    @Bean
    public SpringTemplateEngine templateEngine()
    {
        ...
    }

    ...
} 
```

com.mysite.app.web.spring 中的 WebConfig.java：

```
@EnableWebMvc
@ComponentScan({ "com.mysite.app.web.controller" })
@Configuration
public class WebConfig extends WebMvcConfigurerAdapter
{

    public WebConfig()
    {
        super();
    }

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry)
    {
        registry.addResourceHandler("/css/**").addResourceLocations("/css/");
        registry.addResourceHandler("/js/**").addResourceLocations("/js/");
        registry.addResourceHandler("/img/**").addResourceLocations("/img/");
    }

    @Override
    public void addInterceptors(InterceptorRegistry reg)
    {
        reg.addInterceptor(new BaseInterceptor());
        reg.addInterceptor(new SecurityInterceptor());
        //reg.addInterceptor(new AddCardInterceptor());
    }
} 
```

这是我的控制器之一：

```
@Controller
public class PurchaseController extends AppController
{
    static Logger logger = LoggerFactory.getLogger(PurchaseController.class);

    @Autowired
    private IPurchaseService purchaseService;

        ...
} 
```

启动应用程序时出现以下错误：

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'purchaseController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.mysite.services.IPurchaseService com.mysite.app.web.controller.PurchaseController.purchaseService; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.mysite.services.IPurchaseService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.mysite.services.IPurchaseService com.mysite.app.web.controller.PurchaseController.purchaseService; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.mysite.services.IPurchaseService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 23 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.mysite.services.IPurchaseService] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:924)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:793)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:707)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:478)
    ... 25 more 
```

我知道这是因为我的服务没有被扫描。

我的服务模块中有以下内容：

```
@Configuration
@ComponentScan(basePackages = "com.mysite.services")
public class ServicesConfig
{
} 
```

我需要知道的是如何配置我的应用程序来扫描它们？我想在代码中尽可能多地维护配置，并避免使用 xml 文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:52:15.747

想出了解决办法。

我需要为每个模块指定我的 spring 配置文件的包位置，我在我的 Site-UI 模块的 web.xml 中执行此操作。

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>com.mysite.app.web.spring com.mysite.services.spring com.mysite.persistence.spring</param-value>
</context-param> 
```

可能有更好的方法可以做到这一点，我愿意接受建议。

# visualvm - 使用 --openjmx 时命名 JMX 连接

> ID：13868572
> 
> 赞同：0
> 
> 时间：2012-12-13T21:13:20.833
> 
> 标签：visualvm, jvisualvm

我正在使用 Java Visual VM 命令行打开远程 JMX 连接。我这样使用它：

```
jvisualvm.exe --userdir "user-config" --openjmx hostname:port 
```

这工作得很好。但视图中的连接名称显示为`hostname:port`。有什么办法可以将逻辑名称传递给这个连接？我可以从视图重命名连接，但是当我重新打开时它不会粘住。我有大约 10 个来自同一个主机名的连接，所以想从逻辑上分离出各个连接。

有任何想法吗？如果可以将名称粘贴在用户配置中，它甚至会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T13:02:23.870

您可以启动您的应用程序，`-Dvisualvm.display.name="Your_name"`您的应用程序将在 VisualVM 中命名为“Your_name”。有关详细信息，请参阅[此](http://java.net/jira/browse/VISUALVM-290)和[此](http://java.net/jira/browse/VISUALVM-496)功能请求。请注意，您必须使用 VisualVM 1.3.4+ 或来自 JDK 7 Update 6 或更高版本的 Java VisualVM。

# django - Django 手动提交不管理 django QuerySet.update()？

> ID：13868575
> 
> 赞同：1
> 
> 时间：2012-12-13T21:13:30.583
> 
> 标签：django, transactions

Django`QuerySet.update`不处理`transaction.commit_manually`, 并自动提交。

我像这样构建了一个自定义的 django 视图......

### 类Foo（查看）

```
@method_decorator(transaction.commit_manually)
def post(self, request, *args, **kwargs):
    try:
        Model.objects.all().update(rank=10)
        data_to_update = resquest.
        for d in data_to_update:
            model = Model.objects.get(pk=d['id'])
            model.rank = d['rank']
            model.save()
        transaction.commit()
        status_code = 200
    except Exception, e:
        # do some stuff
        transaction.rollback()
        status_code = 500

    return HttpResponse(content='Foo', status=status_code) 
```

`Model.objects.all().update(rank=10)`...如果 在`transaction.rollback()`_
为每个人调用 save 方法（性能原因）。

# iphone - 根据导航栏自动调整 Storyboard Webview 大小

> ID：13868582
> 
> 赞同：1
> 
> 时间：2012-12-13T21:14:12.557
> 
> 标签：iphone, xcode, uiwebview, ios6, storyboard

我在带有导航栏和工具栏的视图控制器中有一个 webview。我有一个隐藏工具栏和导航栏按钮，但是当它们隐藏时，webview 的大小不会调整以适应屏幕。我使用了这段代码：

```
-(IBAction)hide:(id)sender {
myView.frame = CGRectMake(0,0,320,480);
[[[self navigationController] navigationBar]  setHidden:YES];
[[[self navigationController] toolbar] setHidden:YES];
   [self.view addSubview:myView];
 }

 -(BOOL)canBecomeFirstResponder {

return YES;

 }

 -(void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event {

if (event.subtype == UIEventSubtypeMotionShake) {

    myView.frame = CGRectMake(0,0,320,382);
    [[[self navigationController] navigationBar]  setHidden:NO];
    [[[self navigationController] toolbar] setHidden:NO];
    [self.view addSubview:myView];

}

 } 
```

它们隐藏得很好，但我怎样才能正确调整大小？我使用故事板顺便说一句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:49:32.000

什么是我的视图？

`-(void)viewDidLoad`尝试在 Interface Builder/Storyboard 中或通过 Interface Builder/Storyboard在 UIViewView 的实例上设置以下内容：

```
webView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

通过设置如图所示的自动调整掩码，当视图的超级视图更改其边界时，webview 将随之增长和缩小。

# asp.net - 如何在 asp.net 中显示来自单独代码模块的警报

> ID：13868584
> 
> 赞同：0
> 
> 时间：2012-12-13T21:14:19.580
> 
> 标签：asp.net, vb.net, visual-studio-2010, web-applications

如何在 asp.net 中显示来自单独代码模块的警报，而不是页面的代码隐藏，这很简单。

这是从页面后面的代码执行此操作的一种方法。

```
ScriptManager.RegisterStartupScript(Page, Me.GetType, "alert('Hello')", True) 
```

不过，我不确定如何从单独的代码模块中实现这一点。它需要一个控制和控制类型分别用于第一个参数。所以上面的代码会在前 2 个参数上出错。有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:18:13.137

您需要将当前请求的 Page 对象传递给这个外部模块。然后你可以在`RegisterStartupScript`函数中使用它。例如：

一些外部课程：

```
Public Class MyClass
    Public Shared Sub DoSomething(Page As Page)
        ' do something
        ScriptManager.RegisterStartupScript(Page, Page.GetType, "alert('Hello');", True)
    End Sub
End Class 
```

在`aspx`页面或 CodeBehind 中：

```
' ...
MyClass.DoSomething(Page)
' ... 
```

# jquery - removeEvents 仅删除当月的事件

> ID：13868586
> 
> 赞同：0
> 
> 时间：2012-12-13T21:14:34.743
> 
> 标签：jquery, fullcalendar

当我使用`$('#calender).fullCalendar('removeEvents');`时，这只删除了当月（12 月）的事件，而不是其他月（11 月、1 月、2 月 ....）的事件。

如何删除所有事件？

```
$(document).ready(function(){
    var UsrAux;        
    UsrAux=$('#name').val();                  
    $('#name').blur(function(){    
        UsrAux=$('#name').val();                        
        var source =   {
            url: 'CalendarServer.php',
            type: 'POST',
            data: {                            // Parms
                uno: 'Somenthing',    
                UsrCdg: UsrAux                                            
            },
            error: function() {
                alert('error!');
            },
            color: '#e2ebef',   // a non-ajax option
            textColor: 'black' // a non-ajax option
        };                                 
        $('#calendar').fullCalendar('removeEvents');
        $('#calendar').fullCalendar('addEventSource', source);
    });  

    $('#calendar').fullCalendar({
        draggable: true, 
        height: 400,    
        cache: true, 
        eventSources: [
        // your event source
        {
            url: 'CalendarServer.php',
            type: 'POST',
            data: {                            // Parms
                uno: 'something',    
                UsrCdg: $('#name').val()                                            
            },
            error: function() {
                alert('error!');
            },
            color: '#e2ebef',   // a non-ajax option
            textColor: 'black' // a non-ajax option
        }]       
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:41:28.847

如果您想删除事件的子集，在这种情况下，我们将通过添加到每个事件的添加类名称（“模板”）进行过滤：

```
$myCal.fullCalendar( 'removeEvents', function( event ) {
     if( _.indexOf( event.className, 'template' ) > -1 ) {
          return true;
     }
     else {
          return false;
     }
} ); 
```

在您的情况下，我*认为*每个月的更改都是从给定的来源重新加载的。我避免这种行为的一种方法是将源加载到日历之外，然后注入数组。例如：

```
var myCalEvents = fetchEvents(...);

// this is not reload with each change in calendar view 
$myCal.fullCalendar( 'addEventSource', myCalEvents ); 
```

**编辑**

我会分解问题。

首先创建一个函数来下拉每个人的日历

```
function getCalByPersonId( perId ) {
  // returns an array of fullcalender events pulled from the server
  // note each event will have a css class added by the name of
  // 'perid_x' where 'x' ist he perId parameter
  return ...{ajax call goes here}
} 
```

接下来创建一个函数来处理人员更改事件。

```
function handlePersonChangeEvent( event ) {
  // first extract person id
  var perId = ... {code to get the person id}

  // clear any existing events for a previously selected person
  if( currentPerId && currentPerId !== perId ) {
    ...{remove code from above goes here, but replace 'template' with 'perId_x' where x is the currentPerId}
  }

  // add the new person's events to the calendar
  $myCal.fullCalendar( 'addEventSource', function() {
    return getCalByPersonId( perId );
  } );

  // set the current person id
  currentPerId = perId;
} 
```

我相信这或多或少会做你想要完成的事情。

# git - GitHub 源错误报告其文件位置

> ID：13868587
> 
> 赞同：2
> 
> 时间：2012-12-13T21:14:39.770
> 
> 标签：git, compiler-errors, cache-control

我们有来自 gitHub 的非常奇怪的行为。直到两天前，我们一直从 gitHub 拉出没问题。一个类的本地副本似乎起源于我的协作者机器，如下面的跟踪堆栈所示：

异常错误：ArgumentError：错误必须是 global/org.hamcrest.core::throws()[E:\hudson\jobs\hamcrest-as3\workspace\hamcrest\src\org\hamcrest\core\throws 的 Class 或 Matcher .as:34]

```
at modules.channelSelector.model.proxy::CS_SkinProxy/spriteLoadCompleteHandler([/Users/MY_COLLABORATOR/His file path/CS_SkinProxy.as:85]
at org.osflash.signals::Slot/execute()[/Users/ME/My file path/Slot.as:88]
at org.osflash.signals::OnceSignal/dispatch()[/Users/ME/My file path/OnceSignal.as:132]
at sem.bitmap::BitmapUtil/completeHandler()[/Users/ME/My file path/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at com.greensock.loading.core::LoaderCore/_completeHandler()[/Users/ME/My file path/LoaderCore.as:399]
at com.greensock.loading::LoaderMax/_loadNext()[/Users/ME/My file path/LoaderMax.as:819]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent() 
```

我们已经尝试了一切。将更改提交到类并推送。通过 git rm -file --cached -f、文件删除等从 gitHub 源中删除有问题的类。提交此删除，然后再次拉取。当它不是 GitHub 源当前存储库的一部分时重建该类。所有这些都具有相同的堆栈跟踪，告诉我们该类不在我的机器上！

对此 CS_SkinProxy 类的任何代码更改都不会更新，尽管该类之外的其他更新正在按预期更新。基本上我们有一个新的 switch case 语句跳转到错误的语句，导致 Hamcrest 错误。所有这些都发生在 FDT 和 IntelliJ 上。任何帮助将不胜感激。

伊恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T03:55:30.347

当同事无意中提交了二进制文件的调试版本时，我也发生过类似的事情。调试版本通常包含对机器特定文件位置的引用。

更糟糕的是，一旦提交了调试二进制文件，即使在`.gitignore`文件中也不会被忽略。这意味着即使在重建后，拉动也可以轻松地将二进制文件放回原处。

要解决此问题，如果确实是问题，则需要从存储库历史记录中删除二进制文件，该问题在以下问题中进行了讨论：[Remove sensitive files and their commits from git history](https://stackoverflow.com/questions/872565/remove-sensitive-files-and-their-commits-from-git-history)。

关于您的脚注，更改类名以及文件以及对它的所有引用都不会产生什么影响。调试二进制文件是在程序集级别构建的，是它包含的所有文件的编译。这将更改二进制文件，但不会更改其名称，因为这通常也是在程序集级别确定的。

# python - 如何设置 Selenium 以使用多个 Firefox 配置文件？

> ID：13868589
> 
> 赞同：1
> 
> 时间：2012-12-13T21:14:43.353
> 
> 标签：python, selenium

我正在使用 selenium，并希望为 3 个不同的脚本使用单独的 firefox 配置文件。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:24:02.517

不确定您是如何执行脚本的，但是当您实例化您的`webdriver`对象时，您可以指定 a`FirefoxProfile`作为`firefox_profile`参数。这是通过创建一个`FirefoxProfile`对象（下面的示例）并提供目标配置文件的路径作为参数来完成的：

```
from selenium import webdriver
# ...
profile = webdriver.firefox.firefox_profile.FirefoxProfile('/path/to/your/profile')
driver = webdriver.Firefox(firefox_profile=profile) 
```

据我所知，您无法在`driver`实例化后修改配置文件（尽管我可能错了 - 如果这是您需要做的，值得尝试:)）。在这种情况下，在您的每个脚本中，您将创建一个指向您要使用的配置文件的配置文件，然后使用指向由创建的对象`driver`的参数实例化.`firefox_profile``profile``FirefoxProfile`

# jquery - 返回数值和addClass

> ID：13868590
> 
> 赞同：0
> 
> 时间：2012-12-13T21:14:53.943
> 
> 标签：jquery

我需要在 div 中找到数值并相应地添加一个类。如何找到数值？到目前为止，这似乎只返回“中等”类。

```
<h4 class="days">Over <span class="filterUrgency">71</span> Days</h4>

$('.days').addClass(function() {
    if ($('.filterUrgency').val() >100) {
        return 'urgent';
    } else {
        return 'medium';
    }
}); 
```

或者

```
$('.days').addClass(function() {
var number = parseInt($('.filterUrgency').text());
    if (number >100) {
        return 'urgent';
    } else {
        return 'medium';
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:16:31.823

您可以执行以下操作：

```
$('.days').addClass(function() {
    if (Number($(".filterUrgency").html()) >100) {
        return 'urgent';
    } else {
        return 'medium';
    }
}); 
```

这个解决方案更好：

```
$.each($('.days'),function()
{
if (Number($(this).find(".filterUrgency").html()) >100) {
        $(this).addClass('urgent');
    } else {
        $(this).addClass('medium');
    }
}); 
```

# php - PHP & Mysqli - 选择一列作为字符串而不是数组

> ID：13868591
> 
> 赞同：0
> 
> 时间：2012-12-13T21:14:59.373
> 
> 标签：php, database, select, mysqli

我想知道是否有一种方法可以使用 PHP 和 MySQLI 从数据库中选择一个详细信息（某人的 ID）而不将其设为数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:20:37.150

您可以将结果放入对象中，然后选择列。例如，要从查询中选择列`name`，您可以使用

```
$query = $mysqli->query("SELECT * FROM `table` WHERE `id` = '1'");
echo $query->fetch_object()->name; 
```

而不是使用更常见的

```
$query = $mysqli->query("SELECT * FROM `table` WHERE `id` = '1'");
$data = $query->fetch_array();
echo $data['name']; 
```

如果查询返回多行，您可以将其放入 while 查询中，例如使用一组结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:19:23.200

使用 group_concat()：

```
$query = 'SELECT GROUP_CONCAT(name SEPARATOR ", ") FROM tblUser';

if($result = $mysqli->query($query)) {
    $row = $result->fetch_object();
    echo $row['name'];
} 
```

这将返回 1 列（名称）和 1 个值（表中每个用户 ID 的逗号分隔列表/字符串）

示例表：

```
tblUser
+--------+-----------+
| userid | name      |
+--------+-----------+
|  3     |    Joe    | 
|  4     |    Mike   |
|  5     |    Sharon | 
+--------+-----------+ 
```

使用上述查询将返回：

```
+----------------------+
| name                 |
+----------------------+
| `Joe, Mike, Sharon`  |
+----------------------+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:12:48.170

```
function getColumn($field,$table){

$db=new mysqli("server","user","pass","db");

$rs=$db->query("select $field from $table");

$str="";

while($row=fetch_array()){
$str.=$row[0]."<br/>";
}

return $str;

}

//then call it as follows:

$col=getColumn("fieldName","tableName");

echo $col;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T21:23:52.287

那是不可能的。由于数据库处理列和行，几乎所有 API 至少都有使用列表（数组）的表示

但是您可以相对快速地轻松获得单个结果：

```
// Query results a single result
$result = $mysqli->query("SELECT somecolumns FROM table WHERE somecondition");
$row = $result->fetch_row();
echo $row[0]; // The desired field 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T21:27:44.880

```
function getColumn($field,$table){

  $db=new mysqli("server","user","pass","db");

  $rs=$db->query("select $field from $table");

  return $rs;
}

//then call it as follows:

$r=getColumn("fieldName","tableName");

while($col=$r->fetch_array()){

 echo "$col[0]";

} 
```

# vba - VBA：将颜色设置为 Excel 列，从文本文件导入颜色

> ID：13868592
> 
> 赞同：0
> 
> 时间：2012-12-13T21:15:04.340
> 
> 标签：vba, excel

Excel VBA：我的任务是根据文本文件中给出的输入修改几列的背景颜色。我能够使用十六进制颜色来做到这一点。现在我需要支持简单英语的颜色。文本文件现在将包含如下数据

```
columnname1,red
columnname2,green 
```

所以我必须将这个“红色”映射到 colorConstant 数字 3 以使其工作。如果我需要允许所有支持的颜色 [在此处检查](http://www.pcreview.co.uk/forums/get-list-color-constants-t2746407.html)，我是否需要为所有颜色编写 IF ELSE。有一个简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:10:17.490

您可以使用**Collection**来存储映射：

```
Public indexOf As Collection

Sub map(color As String, index As Integer)
    Call indexOf.Add(index, color)
End Sub

Sub init()
    Set indexOf = New Collection

    map "red", 3
    map "green", 4
    map "blue", 5
End Sub

Sub test()
    init

    [A1].Interior.ColorIndex = indexOf("red")
    [A2].Interior.ColorIndex = indexOf("green")
    [A3].Interior.ColorIndex = indexOf("blue")
End Sub 
```

# linux - 将 JVM 移植到 MINIX

> ID：13868601
> 
> 赞同：1
> 
> 时间：2012-12-13T21:16:01.887
> 
> 标签：linux, jvm, porting, minix

正如您从标题中看到的那样，出于某种原因，我需要使在 Minix 上运行 .class 文件成为可能（不需要编译器）。那么有人可以指出我的任何方向，建议一些文献或提供一些建议吗？一般来说，你会怎么做？

直到现在我才发现`OpenJDK`（但这并不是我想要的）。我还阅读了 Tanenbaum 的“操作系统设计和实现”。它让我对 minix 内部结构有了很多了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:42:07.683

如果您只想运行`.class`文件而不关心性能，您可以创建一个字节码解释器，这可能比移植/创建一个完整的编译器更简单。[您可以在此处](http://docs.oracle.com/javase/specs/jls/se5.0/html/j3TOC.html)找到这些类文件的详细格式，以及[此处](http://docs.oracle.com/javase/specs/jvms/se5.0/html/ClassFile.doc.html)指定的 VM 的行为。

您还需要选择一个运行时——OpenJDK 和 GNU Classpath 可能是最好的选择——并通过`native`在 C 中实现其方法将其移植到 MINIX。`native`方法通常与特定于平台的东西有关，例如对文件 I/ 的调用O，因此无法在独立于平台的 Java 语言中实现。

在[此 Wiki 页面](https://github.com/int3/doppio/wiki)上，您可能会发现许多其他有用的链接和资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-11T16:06:33.483

Jainja [JVM](https://jainja.thenesis.org)（我是作者）可以在 Minix 3.2 上工作（未使用 3.3 测试）。它是一个带有 Java 5 标准库的解释器（即没有 JIT）。使用 X11 后端对 AWT/Swing 的支持有限。

# iphone - 沿圆形 UIImage 添加白色边框

> ID：13868604
> 
> 赞同：1
> 
> 时间：2012-12-13T21:16:10.497
> 
> 标签：iphone, objective-c, ios, ipad

我使用以下蒙版生成了一个圆形 UIImage（其中 masked_circle 是一个黑色圆圈）：

```
CGContextRef context = UIGraphicsGetCurrentContext();
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    UIImage *maskImage = [UIImage imageNamed:@"masked_circle.png"];
    CGImageRef maskImageRef = [maskImage CGImage];

    // create a bitmap graphics context the size of the image
    CGContextRef mainViewContentContext = CGBitmapContextCreate (NULL, maskImage.size.width, maskImage.size.height, 8, 0, colorSpace, kCGImageAlphaPremultipliedLast);

    CGFloat ratio = 0;
    ratio = maskImage.size.width/ self.image_.size.width;

    if(ratio * self.image_.size.height < maskImage.size.height) {
        ratio = maskImage.size.height/ self.image_.size.height;
    }

    CGRect rect1  = {{0, 0}, {maskImage.size.width, maskImage.size.height}};
    CGRect rect2  = {{-((self.image_.size.width*ratio)-maskImage.size.width)/2 , -((self.image_.size.height*ratio)-maskImage.size.height)/2}, {self.image_.size.width*ratio, self.image_.size.height*ratio}};

    CGContextClipToMask(mainViewContentContext, rect1, maskImageRef);
    CGContextDrawImage(mainViewContentContext, rect2, self.image_.CGImage);

    CGImageRef newImage = CGBitmapContextCreateImage(mainViewContentContext);
    CGContextRelease(mainViewContentContext);

    UIImage *theImage = [UIImage imageWithCGImage:newImage]; 
```

现在我想在圆形图像周围添加一个 1px 的白色边框，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-31T01:09:53.497

这是一个更简单的解决方案，可以将任何视图，特别是 UIImageView 转换为具有不同大小和颜色的边框的圆圈。这当然假设您正在处理像图标这样的方形图像。

```
#import <UIKit/UIKit.h>

@interface UIView (Shapes)
- (void)makeCircle;
- (void)makeCircleWithBorderColor:(UIColor *) color Width:(CGFloat) width;
@end

@implementation UIView (Shapes)

- (void)makeCircle {
    CALayer *lyr = self.layer;
    lyr.masksToBounds = YES;
    lyr.cornerRadius = self.bounds.size.width / 2; // assumes image is a square
}

- (void)makeCircleWithBorderColor:(UIColor *) color Width:(CGFloat) width {
    [self makeCircle];
    CALayer *lyr = self.layer;
    lyr.borderWidth = width;
    lyr.borderColor = [color CGColor];
}
@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T21:26:25.250

这是一些在具有角半径的框架周围绘制边框的代码。使半径等于一半大小，你就有了一个圆！

```
CGFloat strokeWidth =1.0;
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetLineWidth(context, strokeWidth);
CGContextSetStrokeColorWithColor(context, [UIColor grayColor].CGColor);

CGFloat radius = 7.0;
CGRect rrect = self.bounds;
rrect.size.width = rrect.size.width - strokeWidth*2;
rrect.size.height = rrect.size.height - strokeWidth*2;
rrect.origin.x = rrect.origin.x + (strokeWidth / 2);
rrect.origin.y = rrect.origin.y + (strokeWidth / 2);
CGFloat width = CGRectGetWidth(rrect);
CGFloat height = CGRectGetHeight(rrect);

if (radius > width/2.0)
    radius = width/2.0;
if (radius > height/2.0)
    radius = height/2.0;   

CGFloat minx = CGRectGetMinX(rrect);
CGFloat midx = CGRectGetMidX(rrect);
CGFloat maxx = CGRectGetMaxX(rrect);
CGFloat miny = CGRectGetMinY(rrect);
CGFloat midy = CGRectGetMidY(rrect);
CGFloat maxy = CGRectGetMaxY(rrect);
CGContextMoveToPoint(context, minx, midy);
CGContextAddArcToPoint(context, minx, miny, midx, miny, radius);
CGContextAddArcToPoint(context, maxx, miny, maxx, midy, radius);
CGContextAddArcToPoint(context, maxx, maxy, midx, maxy, radius);
CGContextAddArcToPoint(context, minx, maxy, minx, midy, radius);
CGContextClosePath(context);
CGContextDrawPath(context, kCGPathFillStroke); 
```

# themes - 在哪里可以找到主题短代码中使用的标签？以及 pyroCMS 中使用的通用标签？

> ID：13868607
> 
> 赞同：1
> 
> 时间：2012-12-13T21:16:32.867
> 
> 标签：themes, shortcode, pyrocms

我想知道在哪里可以找到要键入的标签以利用主题中编程的短代码。许多主题都有它们，例如下面的主题。但是，我永远无法在自述文件或现场文档中找到使用它们所需的信息。这使我无法使用它们。是否有与每个主题一致并显示它们的特定 html、css 或 php 文件？

鉴于缺乏关于使用哪些标签的说明，这表明主题创建者希望人们知道在哪个文件中找到它们。

[https://www.pyrocms.com/uploads/default/store/listings/11-25-2012_9-41-20_PM.png](https://www.pyrocms.com/uploads/default/store/listings/11-25-2012_9-41-20_PM.png)

[https://www.pyrocms.com/uploads/default/store/listings/11-25-2012_9-41-20_PM.png](https://www.pyrocms.com/uploads/default/store/listings/11-25-2012_9-41-20_PM.png)

在更多 PyroCMS 而不是特定主题的注释上，是否有所有标签及其用途的列表？例如 {{ settings:site_name }} 或页面正文标记。我找到的每个列表链接都表明该列表已被移动。

再次感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:25:23.537

打开您的文件目录并导航到：

```
path/to/your/files/system/cms/plugins/theme.php 
```

此处列出了您可以使用的每一个以及功能描述中的示例。此文件夹中的每个插件都以相同的方式排列（文件、会话、资产等）。您应该能够查看每一个并尝试如何将它们合并到您的项目中。

编辑：此外，您可以在此处找到更多信息：http: [//docs.pyrocms.com/2.1/manual/plugins](http://docs.pyrocms.com/2.1/manual/plugins) 请注意，这是特定于 2.1 版的。如果您不使用 2.1，请在顶部导航中添加单击文档，然后选择您的版本。

# objective-c - Objective c，相当于 C# 中的 CopyTo

> ID：13868609
> 
> 赞同：-1
> 
> 时间：2012-12-13T21:16:35.617
> 
> 标签：objective-c

我有一个 C# 代码，它将字节从特定索引复制到字节数组，如下例所示：

```
string headerInfo = String.Format(source + "<>" + destination + "<>" + sessionId);
headerInfo = headerInfo.TrimEnd('\n', '\0', '\r');
byte[] headerInfoBytes = Encoding.UTF8.GetBytes(headerInfo);
byte[] headerInfoLength = BitConverter.GetBytes(headerInfo.Length);

//create an byte Array with proper size.
byte[] sendData = new byte[4 + 4 + headerInfoBytes.Length + dataContractBytes.Length];

headerInfoLength.CopyTo(sendData, 0);
dataContractLengthBytes.CopyTo(sendData, 4);
headerInfoBytes.CopyTo(sendData, 8);
dataContractBytes.CopyTo(sendData, 8 + headerInfoBytes.Length);
m_clientSocket.Send(sendData); 
```

我的问题是，如何以客观 c 方式实现 CopyTo？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:39:33.683

查看[本指南](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/BinaryData/Tasks/WorkingMutableData.html#//apple_ref/doc/uid/20002150)，了解如何处理可变数据。

如果您特别需要索引部分，可以使用`replaceBytesInRange:withBytes:`. 否则，只需附加数据：

```
NSString *headerInfo = [NSString stringWithFormat:@"%@<>%@<>%@", source, destination, sessionId];
NSData *headerData = [headerInfo dataUsingEncoding:NSUTF8StringEncoding];

NSMutableData *data = [NSMutableData dataWithCapacity:headerData.length + ...];
[data appendData:headerData]; 
```

# npm - 仅当正在安装的软件包不是最新的时如何“npm install”

> ID：13868610
> 
> 赞同：10
> 
> 时间：2012-12-13T21:16:36.977
> 
> 标签：npm

如果 npm 注册表中有更新的包，我`npm install package`该如何做才会安装包。

我的意思是它甚至不会检查依赖项，而只会检查我想要的主包。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T21:25:56.570

`npm update package`应该这样做。

# c# - 将 xml 绑定到组合框

> ID：13868611
> 
> 赞同：0
> 
> 时间：2012-12-13T21:16:37.587
> 
> 标签：c#, wpf, xml

我难住了。我有以下 XML，我认为它实际上来自另一个 StackOverflow 问题。

```
<?xml version="1.0" encoding="utf-8" ?>
<HousingShapes>
<Shape Name="Rectangular" id="1/3"/>
<Shape Name="Circular" id="1/34" />
<Shape Name="Triangular" id="1/23" />
<Shape Name="Other Shape" id="1/15" />
</HousingShapes> 
```

我在 XAML 中绑定了这样的数据

```
<Window.Resources>
    <XmlDataProvider x:Key="xmlData" Source="d:\people.xml" XPath="HousingShapes"/>
</Window.Resources> 
```

下面是我的组合框

```
 <ComboBox Height="23" HorizontalAlignment="Left" Margin="97,52,0,0" Name="comboBox1" VerticalAlignment="Top" Width="120" ItemsSource="{Binding Source={StaticResource xmlData}, XPath=./Shape}" DisplayMemberPath="@Name" SelectedValuePath="{Binding Source={StaticResource xmlData}, XPath=./Shape}" SelectedValue="@id" /> 
```

我希望用户在组合框中看到“形状名称”，即矩形。这一点有效。但我希望在添加数据时使用 id。作为测试，我写了以下内容

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        MessageBox.Show(comboBox1.SelectedValuePath);
    } 
```

期望在选择矩形时看到 1/3，或者在选择“其他形状”时看到 1/15，但什么也没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:45:47.697

```
<ComboBox ... DisplayMemberPath="@Name" SelectedValuePath="{Binding Source={StaticResource xmlData}, XPath=./Shape}" SelectedValue="@id" /> 
```

应该：

```
DisplayMemberPath="@Name" SelectedValuePath="@id" 
```

没有`SelectedValue`设置。您走在正确的道路上，只是将属性混淆了一点。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:52:39.573

这里有2个问题，首先你需要将`SelectedValuePath`@id设置为

```
 <Window.Resources>
        <XmlDataProvider x:Key="xmlData" Source="C:\people.xml" XPath="HousingShapes/Shape"/>
    </Window.Resources>

    <Grid>
        <ComboBox Height="23" ItemsSource="{Binding Source={StaticResource xmlData}}" DisplayMemberPath="@Name" SelectedValuePath="@id" />
    </Grid> 
```

第二个 MessageBox 显示`SelectedValuePath`，它应该是`Selectedvalue`

```
 MessageBox.Show(comboBox1.SelectedValue.ToString()); 
```

`Selectedvalue`返回中定义的值`SelectedValuePath`

# ipad - ipad 2和ipad 3默认浏览器的区别？

> ID：13868613
> 
> 赞同：0
> 
> 时间：2012-12-13T21:16:43.787
> 
> 标签：ipad, safari

Safari 的两个版本叫什么？

在发展方面有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:34:14.047

由于 Apple 积极支持 iPad 2 和第三代 iPad，因此它们使用相同的默认浏览器 - Mobile Safari 6。

# character-encoding - 试图找出字符集

> ID：13868615
> 
> 赞同：0
> 
> 时间：2012-12-13T21:16:49.950
> 
> 标签：character-encoding

我正在从 Google Docs 下载 CSV，其中的字符“保存为 \xE2\x80\x9C 和”保存为 \xE2\x80\x9D。

我的问题是......那些被保存的字符集是什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:26:01.557

它采用 UTF-8 格式。您可以通过将其解码为 UTF-8 来判断它并显示正确的字符。

UTF-8 也有一个独特且非常独特的模式，仅 3 个字节的最高位设置形成一个有效的 UTF-8 序列就足以以 99% 的置信度判断某事物是否为 UTF-8。即使设置了最高位的 2 个字节形成了有效的 UTF-8 序列，您已经可以达到 90%。

* * *

在某种情况下，它不是 UTF-8，而是一些 8 位代码页，仅通过查看字节是不可能分辨的。如果没有任何其他信息，您基本上必须通过各种 8 位编码对其进行解码，然后查看它是否正确。另一种可能性是使用一种算法，该算法将自动通过编码，并查看其结果是否在任何语言中都有意义。

有了更多信息，例如文件保存在哪个操作系统和语言环境中，您可以大量减少可能要尝试的编码数量。

# c# - C# 中的函数调用和事件之间是否存在性能差异？

> ID：13868617
> 
> 赞同：7
> 
> 时间：2012-12-13T21:17:01.840
> 
> 标签：c#, events, delegates

我将尝试澄清我的问题：

我有一个名为 Draw 的函数（有人（XNA）每秒调用她 60 次），我有很多对象要绘制，所以我有以下代码： void Draw() { obj1.draw(); obj2.draw(); obj3.draw(); ....}

如果我将创建一个由 Draw() 引发的事件，并且所有对象都将注册该事件，是否会对性能产生影响？

如果我不清楚我要问的是：通过注册事件来调用函数与常规调用不同吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T21:30:25.427

关于性能，我认为[Jon Skeet 的例子](https://stackoverflow.com/questions/2082735/performance-of-calling-delegates-vs-methods)非常有说服力，代表不会给性能增加任何显着的开销，甚至可能会改善它。

对于事件/委托，您需要考虑的一个因素是处理监听事件的解除挂钩对象，否则您的引用计数将无法正确重置，并且您会发现自己存在内存泄漏。避免使用匿名方法，除非您准备存储对它们的引用，以便它们可以在 Dispose 等上不连线。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T22:04:54.277

ildasm 显示函数的直接调用是使用“call method”命令执行的，而通过事件调用是使用“callvirt delegatename::Invoke()”执行的。看起来直接调用应该更快，但让我们考虑一下什么是 Invoke()。Invoke 不是 Delegate 或 MulticastDelegate 类的成员。这是编译器生成的特殊方法

```
.method public hidebysig virtual instance void 
            Invoke(string s) runtime managed
{
} 
```

此方法不包含任何实现，这可能看起来很奇怪。但是如果我们注意“运行时”规范，魔法就会消散。“运行时”意味着代码将在运行时生成，而且我们知道，它只会发生一次。所以理论上两者在生产力方面应该是相同的。

至于 Jon Skeet 的测试，我多次启动它并在委托的帮助下将直接呼叫与呼叫互换，并没有得到委托提高性能的确认。有时代表赢了，有时直接打电话赢了。我认为这是因为 GC 或 .NET 中的其他东西影响了测试，或者只是通过 Windows 切换进程。

# c++ - 使用 BOOST 线程属性导致绑定编译错误

> ID：13868619
> 
> 赞同：3
> 
> 时间：2012-12-13T21:17:02.480
> 
> 标签：c++, multithreading, boost, compilation, bind

好的.. 首先，我不得不说我正在使用 BOOST 及其源代码（我必须这样做）。我既是 BOOST 又是 C++ 新手，但我对编码并不陌生（我更习惯于托管语言）。我在一个有点大的项目中遇到了这个问题，然后我在我在这里展示的这个小代码片段中重现了它：

```
#include <boost/thread.hpp>

void foo(int bar) {
    printf("Chu %d!",bar);
}

int main() {
    boost::thread_attributes attrs;

    boost::thread causeTrouble(attrs,foo,42); // <-- Probably problematic line
    causeTrouble.join();
} 
```

根据[BOOST 1.52.0 文档](http://www.boost.org/doc/libs/1_52_0/doc/html/thread/thread_management.html#thread.thread_management.tutorial)，这个片段应该既可以编译又可以正常运行；但是，它在 BOOST 库头文件中给了我一个奇怪的编译问题（不存在其他错误或警告）：

```
<boost_path>/bind/bind.hpp:313: error: no match for call to '(boost::thread_attributes) (void (*&)(int), int&) 
```

对我来说，看起来没有实际的 boost::thread(boost::thread_attributes,F f) 构造函数，即使它应该根据先前链接的文档。无论如何，有趣的是以下两行都*可以正常编译*：

```
boost::thread noTrouble(attrs,foo); 
```

和

```
boost::thread noTroubleEither(foo,42); 
```

即使我彻底搜索了 StackOverflow 和互联网的其余部分，我也不知道该从哪里转头 :( 事实上这是我第一次被迫*提出一个新问题*。求助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T21:31:18.587

你说，

> 看起来没有实际的 boost::thread(boost::thread_attributes,F f)

不过，这不是您要调用的构造函数。你在打电话`boost::thread(attrs, foo, 42)`。根据链接，看起来没有`boost::thread(boost::attributes, F, Args)`实现构造函数，因此投诉。

首先尝试使用`boost::bind`显式绑定`42`到`foo`绑定的函数对象上并启动线程。

像这样的东西：

```
boost::function< void > f = boost::bind( foo, 42 );
boost::thread( attrs, f ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:25:34.347

看起来像一个转发问题。尝试定义一个`int`值为 42 的变量并将其作为第三个参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T18:31:28.080

需要的过载

```
template <class F, class Arg, class ...Args>
thread(attributes const& attrs, F&& f, Arg&& arg, Args&&... args) 
```

仅当编译器支持可变参数模板和右值引用时才定义。这可以解释你的问题。

我想可以改进文档以清楚地表明这一点。请问你能创建一个 Trac 票来关注这个问题吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-29T05:40:17.387

您可能需要使用`boost::bind`，如下所示：

```
boost::function< void > f = boost::bind( foo, 42 );

boost::thread( attrs, f ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-16T22:19:44.437

您应该为属性提供 stacksize，这是一个示例：

```
 #include <boost/thread.hpp>
    #include <boost/chrono.hpp>
    #include <iostream>

    void wait(int seconds)
    {
    boost::this_thread::sleep_for(boost::chrono::seconds{seconds});
    }

    void thread()
    {

    try
    {
        for (int i = 0; i < 5; ++i)
        {
        wait(1);
        std::cout << i << '\n';
        }
    }
    catch (boost::thread_interrupted&) {}
    }

    int main()
    {
    boost::thread::attributes attrs;
    attrs.set_stack_size(1024);
    boost::thread t{attrs, thread};
    t.join();
    } 
```

# ruby-on-rails - rack-offline Gem:如何从缓存中排除某些文件

> ID：13868622
> 
> 赞同：1
> 
> 时间：2012-12-13T21:17:22.717
> 
> 标签：ruby-on-rails, gem, cache-manifest, html5-appcache

我 在我的 rails 应用程序中使用 gem rack 离线（ [https://github.com/wycats/rack-offline ）进行离线缓存。](https://github.com/wycats/rack-offline)

由于某种原因，我需要确保某些 HTML 文件永远不会离线缓存，并且总是从服务器加载。我知道，这很糟糕。但我的应用程序并非设计为离线工作，现在被迫制作一部分（客户需求！ )，特别是只有 3 个页面，离线工作。所以我需要确保只有这 3 个页面被缓存..并且没有其他 HTML 文件被缓存。

我该如何做到这一点？

PS：我已经浏览了 gem 的 Github 页面，我想我可以通过操作“network”属性来完成此操作。但无法找到如何..

# mobile - 移动 Web 开发风格指南

> ID：13868627
> 
> 赞同：0
> 
> 时间：2012-12-13T21:17:47.957
> 
> 标签：mobile, mobile-website

我正在开发网站的移动版本，我有兴趣在 iPhone 和 Android 的样式指南和规格方面遵循最佳实践。有没有官方文档或者网上好的资源可以参考？

例如，我想知道垂直按钮之间应该有多少空间，推荐的最小字体大小是多少等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:20:18.653

苹果和安卓都有很多信息。看看他们各自的网站：

[https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)

和

[http://developer.android.com/design/index.html](http://developer.android.com/design/index.html)

这些适用于本机应用程序，但 html 应用程序应遵循相同的“规则”

快乐阅读。

# sas - 如何将 DFBETAS 输出到 PROC REG 中的 SAS 数据对象

> ID：13868631
> 
> 赞同：2
> 
> 时间：2012-12-13T21:18:08.453
> 
> 标签：sas, regression

我一直在试图找出一种将 PROC REG 中生成的 DFBETAS 输出到 SAS 数据对象的方法。我知道可以使用输出选项输出残差、内部和外部学生化残差和杠杆，例如：

```
proc reg data=dataset;
     model y = x1 + x2;
     output out=influence_stats r=r student=int_r rstudent=ext_r h=leverage;
run; 
```

但似乎 PROC REG 没有提供输出 DFBETAS 的选项。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:30:30.840

[http://www.ats.ucla.edu/stat/sas/webbooks/reg/chapter2/sasreg2.htm](http://www.ats.ucla.edu/stat/sas/webbooks/reg/chapter2/sasreg2.htm)

ODS OUTPUT 是您的答案（对于基本上这样的任何事情 - 如果它没有出现在输出数据集上，ODS OUTPUT 几乎可以得到任何进入输出窗口的东西）。书中的示例风格不是很好——我不会将 ODS OUTPUT 语句放在 proc 的中间——但它应该可以工作。（您可能需要 ODS OUTPUT CLOSE; 稍后声明。）我会怎么做：

```
ods output outputstatistics=outstats;
proc reg data=dataset;
     model y = x1 + x2;
     output out=influence_stats r=r student=int_r rstudent=ext_r h=leverage;
run;
ods output close; 
```

有关 ODS 输出的更多信息：[http](http://www2.sas.com/proceedings/forum2008/086-2008.pdf) ://www2.sas.com/proceedings/forum2008/086-2008.pdf - 特别是阅读他们向您展示如何使用 ODS TRACE 来确定要使用哪个表的部分。

# javascript - 如何使用 openlayers 在 ios 模拟器中绘制手绘多边形？

> ID：13868634
> 
> 赞同：1
> 
> 时间：2012-12-13T21:18:09.177
> 
> 标签：javascript, ios, ios-simulator, openlayers, openstreetmap

在我的浏览器应用程序中，我可以使用 shift 键执行此操作。但是有谁知道如何使用 ios 模拟器来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:22:47.270

只需将适当的选项传递给`DrawFeature`控制处理程序 ( `freehand`)：

```
new OpenLayers.Control.DrawFeature(vectorLayer, OpenLayers.Handler.Path, {
    handlerOptions: {
        freehand: true
    }
}); 
```

然后，您将始终处于徒手模式，无需使用 shift 键。

# c# - 在递归排序算法中通过引用传递数组的困惑

> ID：13868642
> 
> 赞同：2
> 
> 时间：2012-12-13T21:18:38.613
> 
> 标签：c#, algorithm, sorting

我对通过引用传递数组感到困惑。由于数组存储在堆上，我相信当它们作为参数传递时，参数的值就是堆中的位置。这可能会混淆变量所代表的内容。

1.  `ref`如果数组存储在堆上，那么在将数组传递给方法时，关键字究竟是什么意思？我相信更改被调用方法中的数组会更改调用方法，因为它是按值传递的，并且该值包含对数组的引用。

2.  如果我跳过`Sort`而是`DoSort`直接调用，那么`unsortedArray`排序正确。在下面的程序中，为什么`unsortedArray`在执行结束时从不排序？这与这是一个递归算法有关吗？

这是代码：

```
public class Program {
    static void Main(string[] args) {
        int[] unsortedArray = new[] { 9, 7, 5, 3, 1 };
        Sort(unsortedArray);
    }

    public static void Sort(int[] sortArray) {
        DoSort(ref sortArray);
    }

    public static void DoSort(ref int[] doSortArray) {
        if (doSortArray.Length == 1) {
            return;
        }
        int midpoint = doSortArray.Length / 2;

        // divide the array into the left portion
        int[] left = new int[midpoint];
        for (int i = 0; i < midpoint; i++) {
            left[i] = doSortArray[i];
        }

        // divide the array into the right portion 
        int[] right = new int[doSortArray.Length - midpoint];
        int j = 0;
        for (int i = midpoint; i < doSortArray.Length; i++) {
            right[j] = doSortArray[i];
            j++;
        }

        DoSort(ref left);
        DoSort(ref right);

        doSortArray = Merge(left, right);
    }

    /// <summary>
    /// Merges the specified unmerged array.
    /// </summary>
    /// <param name="left">The left.</param>
    /// <param name="right">The right.</param>
    private static int[] Merge(int[] left, int[] right) {
        int i = 0;
        int[] result = new int[left.Length + right.Length];

        int leftIndex = 0;
        int rightIndex = 0;
        while (leftIndex < left.Length || rightIndex < right.Length) {
            if (leftIndex < left.Length && rightIndex < right.Length) {
                if (left[leftIndex] <= right[rightIndex]) {
                    result[i] = left[leftIndex];
                    leftIndex++;
                } else {
                    result[i] = right[rightIndex];
                    rightIndex++;
                }
            }
            else if (leftIndex < left.Length) {
                result[i] = left[leftIndex];
                leftIndex++;
            }
            else if (rightIndex < right.Length) {
                result[i] = right[rightIndex];
                rightIndex++;
            }
            i++;
        }

        return result;
    }
} 
```

[将数组作为参数传递（C# 编程指南）](http://msdn.microsoft.com/en-us/library/hyfeyz71.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:22:42.347

区别如下：

```
int[] array = null;
DoSort(array)
//array is still null

DoSort(int[] array)
{
 array = new int[10];
} 
```

...

```
int[] array = null;
DoSort(ref array)
//array is new int[10]

DoSort(ref int[] array)
{
 array = new int[10];
} 
```

无论哪种情况，您都可以更改数组的内容。只有通过引用传递，才能在调用者中改变引用的实际值。

您的示例需要`ref`因为这条线

```
doSortArray = Merge(left, right); 
```

# javascript - JS parseInt() 返回 0

> ID：13868643
> 
> 赞同：2
> 
> 时间：2012-12-13T21:18:46.803
> 
> 标签：javascript

> **可能重复：**
> [为什么 parseInt() 会这样工作？](https://stackoverflow.com/questions/8444980/why-parseint-works-like-this)

我遇到了 parseInt() 意外返回 0 的问题，这是一个示例：

```
parseInt('-06') = -6
parseInt('-07') = -7
parseInt('-08') = 0 
```

为什么结果为 0？如果我继续下降（-09、-10 等），也一样。字符串的格式来自我的框架，所以我需要处理它。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T21:20:18.647

使用时需要传递一个基数参数`parseInt`

```
parseInt('-08', 10); 
```

如果您不这样做，并且您正在解析的字符串具有前导零，`parseInt`则会根据您的浏览器产生不同的结果。最常见的问题是字符串将被视为以 8 为基数的数字，这就是您所看到的。

这就是为什么这适用于“-06”和“-07”——它们都是有效的以 8 为基数的数字。由于“-08”不是有效的以 8 为基数的数字，因此解析失败，并返回 0。

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)

> 基数
> 
> 一个整数，表示上述字符串的基数。虽然此参数是可选的，但始终指定它以消除读者混淆并保证可预测的行为。当未指定基数时，不同的实现会产生不同的结果。

* * *

另请注意，您可以使用一元运算`+`符将这些字符串转换为数字：

```
​var str = '-08';
var num = +str;

console.log(num);​​​

//logs -8 
```

[**演示**](http://jsfiddle.net/XAdWH/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T21:22:55.407

你也可以试试这个：

```
'-06' * 1 = -6
'-07' * 1 = -7
'-08' * 1 = -8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T21:24:23.670

这是一个错误`firefox`，请改用。[在此处](https://bugzilla.mozilla.org/show_bug.cgi?id=507993)`parseFloat`获取有关此错误的更多详细信息。

[在这里](http://jsfiddle.net/U6tTb/)检查`parseFloat`结果。

# php - MeekroDB 错误“命令不同步；您现在无法运行此命令”

> ID：13868648
> 
> 赞同：2
> 
> 时间：2012-12-13T21:18:59.763
> 
> 标签：php, mysql, meekro

我有一个包含以下几行的 PHP 脚本：

```
require_once 'meekrodb.2.1.class.php';
DB::$user = 'usr';
DB::$password = 'pwd';
DB::$dbName = 'db';
DB::$encoding = 'utf8';

$results = DB::queryFirstField("
    CALL getSequence('time_id', %i); // ***** Stored procedure call *****
", TENANT_ID);

DB::insert('timeentry', array(
    'tenant_id' => TENANT_ID,
    'time_id' => $results,
    'timestart' => DB::sqleval("now()"),
    'assig_id' => $assig_id
)); 
```

我收到以下错误：

> 查询：插入`timeentry`( `tenant_id`, `time_id`, `timestart`, `assig_id`) 值 (1, '42', now(), '1')
> 
> 错误：命令不同步；你现在不能运行这个命令

如果我用 SELECT 语句替换对存储过程的调用，一切正常。

```
$results = DB::queryFirstField("
    SELECT 45; // ***** SELECT statement *****
");

DB::insert('timeentry', array(
    'tenant_id' => TENANT_ID,
    'time_id' => $results,
    'timestart' => DB::sqleval("now()"),
    'assig_id' => $assig_id
)); 
```

我还没有分析 MeekroDB 库 (http://www.meekro.com) 的内部结构。

我尝试将每个语句包装在事务中，但是在调用存储过程之后立即执行 COMMIT 时出现相同的错误。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:29:18.317

调用 MySQL 中的存储过程会产生多个结果集。也就是说，一个存储过程*可能*有多个 SELECT，因此客户端必须遍历多个结果集才能完成对 CALL 的处理。

请参阅此问题的答案中的示例：[Retrieving Multiple Result sets with stored procedure in php/mysqli](https://stackoverflow.com/questions/1683794/retrieving-multiple-result-sets-with-stored-procedure-in-php-mysqli)

在 CALL 的所有结果完成之前，它不会被视为关闭，并且 MySQL 不允许您在当前查询完全完成之前运行另一个查询。

我不太了解 MeekroDB 库，但看了一眼在线文档，我看不出有任何方法可以遍历多个结果集。所以可能没有任何方法可以安全地调用存储过程。建议您联系作者获取具体支持： [http](http://www.meekro.com/help.php) ://www.meekro.com/help.php 。

# android - 如何从android服务中获取数据？

> ID：13868649
> 
> 赞同：1
> 
> 时间：2012-12-13T21:18:59.293
> 
> 标签：android, google-maps, android-service

我为我的应用程序创建了一个 GPS 服务，我想获取从 GPS 服务获得的数据以用于我的另一个列表活动并显示它。问题是它不能显示在列表中。

启动 GPS 服务的启动代码：

```
public class splash extends Activity
{   
    @Override
    public void onCreate(Bundle icicle)
    {
        super.onCreate(icicle);
        setContentView(R.layout.splash);

        new Handler().postDelayed(new Runnable() {
            public void run() {
                startService(new Intent("com.example.geotask.gpsservice"));
                    Intent mainIntent = new Intent(splash.this, MainActivity.class);
                    splash.this.startActivity(mainIntent);
                    splash.this.finish();
            }
        }, 1000);
     } 
```

GPS服务代码：

```
public class GPSservice extends Service
{
    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }
    public  ArrayList<String> position = new ArrayList<String>(); 
    public  ArrayList<Long> time=new ArrayList<Long>();
    public  ArrayList<Integer> lat= new ArrayList<Integer>(); 
    public  ArrayList<Integer> lon= new ArrayList<Integer>(); 
public void onCreate()
{
    super.onCreate();

}
public void onStart(Intent intent, int startID)
{LocationManager locationManager=(LocationManager)getSystemService(Context.LOCATION_SERVICE);
String provider = locationManager.GPS_PROVIDER;
Location location = locationManager.getLastKnownLocation(provider);
locationManager.requestLocationUpdates(provider, 2000, 10, locationListener);
}
private void additem(Location location){
     String latLongString = "Lat:" + location.getLatitude() + "\nLong:" + location.getLongitude();
     position.add(latLongString);
     long t=location.getTime();
     time.add(t);

}

private void addgeo(Location location){
    int x=(int)location.getLatitude()*1000000;
    int y=(int)location.getLongitude()*1000000;
    lat.add(x);
    lon.add(y);

}

LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
            additem(location);
                    addgeo(location);
            Intent intent= new Intent("com.example.geotask.gpsdata");
            intent.putIntegerArrayListExtra("lat", (ArrayList<Integer>) lat);
            intent.putIntegerArrayListExtra("lon", (ArrayList<Integer>) lon);
            intent.putStringArrayListExtra("data", (ArrayList<String>) position);
            sendBroadcast(intent);    }

        public void onProviderDisabled(String provider){

        }

        public void onProviderEnabled(String provider) {

        }

        public void onStatusChanged(String provider, int status, Bundle extras) {}
      };
} 
```

列表活动代码：

```
public class list extends Activity{ 
    ArrayList details = new ArrayList();
    private BroadcastReceiver gpsreceiver;
    /** Called when the activity is first created. */ 
    @Override 
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        IntentFilter intentFilter=new IntentFilter("com.example.geotask.gpsdata");
        intentFilter.addAction("com.example.geotask.gpsdata");
        gpsreceiver=new BroadcastReceiver()
        {
            @Override 
            public void onReceive(Context context, Intent intent)
            {
                List<String> ex=intent.getStringArrayListExtra("data");
                int i=0;
                for(i=0; i<ex.size(); i++)
                {
                    listdetails Detail = new listdetails();
                    Detail.setIcon(R.drawable.ic_launcher);
                    Detail.setPlace(ex.get(i));
                    Detail.setTime("2012.12.2");
                    details.add(Detail);
            }
            }
        };
        this.registerReceiver(gpsreceiver, intentFilter);

        setContentView(R.layout.list); 
        ListView listView; 
        listView = (ListView)findViewById(R.id.listView1);
        customlist Adapter = new customlist(details, this);
        listView.setAdapter(Adapter);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:26:07.880

您需要注册您的接收器

```
registerReceiver(gpsreceiver, intentFilter); 
```

记得取消注册 onDestroy。

# linux - git pull 失败并出现错误：cannot fork() for git-upload-pack

> ID：13868650
> 
> 赞同：4
> 
> 时间：2012-12-13T21:19:12.413
> 
> 标签：linux, git, ssh

我只是想从我的 linux 服务器（通过 SSH）做一个 git pull - 它今天早些时候工作，现在它给了我这个：

```
fork: Resource temporarily unavailable error: cannot fork() for
git-upload-pack: Resource temporarily unavailable fatal: The remote
end hung up unexpectedly 
```

编辑：顶部显示我有足够的备用 CPU 和 MEM ......

编辑：好的，事实证明服务器上运行了数百个幽灵 ssh-agent 进程，主要由 git 用户拥有。一旦我杀了他们，一切又开始工作了。我投票决定重新提出这个问题，因为在搜索我的问题时我找不到关于这个解决方案的任何好的信息——也许这可以帮助其他人？

# javascript - ExtJS MVC 添加工具栏

> ID：13868651
> 
> 赞同：1
> 
> 时间：2012-12-13T21:19:19.420
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

我有以下情况，我正在尝试将工具栏 ( `Ext.toolbar.Toolbar`) 添加到网格 ( `Ext.panel.grid`) 中。网格`Ext.window.Window`位于我的主 app.js 中的 a 内部，看起来像这样：

```
Ext.application({
    name: 'FileBrowser',
    appFolder: '/Scripts/dashboard/FileBrowserApp',
    controllers:['BrowserController'],
    launch: function() {
    win = Ext.create('Ext.window.Window', {
        title: 'Document Library',
        width: 700,
        height: 500,
        layout: 'border',
        bodyStyle: 'padding: 5px;',
        items: [
            {
                xtype:'tree_dir'
            },
            {
                xtype:'grid_file',
            }

        ]
    });
    win.show();
}
 }) 
```

我的问题是，我该怎么做？我是否在控制器中动态添加工具栏？如果是这样，我如何`grid_file`从控制器访问上述内容？我应该以某种方式将它添加到我的`grid_file`视图中吗？那么如何访问工具栏视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:28:44.797

```
 myPanel.addDocked({
        xtype: 'toolbar',
        dock: 'top',
        items:[
            {
                xtype:'button',text:'Open Win1',ref:'win1Button'
            },{
                xtype:'button',text:'Open Win2',ref:'win2Button'
            }]
        }); 
```

# jquery - Valums 上传插件 - 在表单提交时上传文件

> ID：13868652
> 
> 赞同：1
> 
> 时间：2012-12-13T21:19:21.283
> 
> 标签：jquery, asp.net, file-upload, asp.net-mvc-4, fine-uploader

我在 asp.net mvc4 中使用 Valums 上传器插件进行文件上传。但我想在表单提交时上传文件。所以我使用以下代码并将“autoUpload”选项设置为false。这是我的代码：-

```
$(document).ready(function () {
          var manualuploader = $('#manual-file-uploader').fineUploader({
              request: {
                  endpoint: ''  
              },
              autoUpload: false,
              text: {
                  uploadButton: '<i class="icon-plus icon-white"></i> Select Files'
              },
              debug: true,
          });

   }); 
```

如您所见，我没有将任何 url 传递给端点，因为我需要在表单 post 的数据库中保存文件和所有模型属性。我试图在我的控制器操作中访问“qqfile”属性但没有运气。这是我的控制器动作

```
 [HttpPost]
        public ActionResult Create(ViewModel model,string qqfile)
        {
        } 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:07:33.197

你必须指定一个端点。如果要延迟上传，只需将 autoUpload 设置为 false，就像您已经完成的那样，然后在要开始上传时调用 uploadStoredFiles() 函数。

# java - Java中泛型集合的多态性

> ID：13868659
> 
> 赞同：0
> 
> 时间：2012-12-13T21:20:14.160
> 
> 标签：java, generics, collections, polymorphism

鉴于此方法：

```
public static <E extends Number> List<E> process(List<E> num) 
```

我想做这个 ：

```
ArrayList<Integer> input = null ;
ArrayList<Integer> output = null ;

output = process(input); 
```

我得到一个例外：类型不匹配：无法转换`List<Integer>`为`ArrayList<Integer>`

我知道我可以有这样正确的东西：

```
List<Integer> list = new ArrayList<Integer>; 
```

为什么它在这里不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T21:22:55.313

问题是返回类型。`process()`返回 a`List<E>`并且您正试图将其填充到`ArrayList<E>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:27:05.547

您的流程方法需要返回接口 List 的实现。这也可能与 ArrayList 不兼容，例如。一个链表。编译器注意到并禁止它。

# android - 共享存储在内存中的图像

> ID：13868662
> 
> 赞同：7
> 
> 时间：2012-12-13T21:20:19.083
> 
> 标签：android, storage

我有一个应用程序，其中设置了 ImageView 并且可以单击以在图库中打开。

默认情况下，我使用以下代码从外部存储中获取文件目录来存储我的 jpeg：

```
File picsDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),"MyCameraApp"); 
```

但！假设外部存储未安装或根本不存在（Galaxy Nexus），这不起作用。所以我围绕它写了一个 if 语句，并将内部缓存目录作为后备。

```
String state = Environment.getExternalStorageState()
if(Environment.MEDIA_MOUNTED.equals(state)){ 
    File picsDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),"MyCameraApp");    
}else{
    context.getCacheDir();
} 
```

图像在 ImageView 中显示良好，但在我的意图启动时不显示。

```
Intent intent = new Intent();             
intent.setAction(android.content.Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(imgFile), "image/jpeg");
startActivity(intent); 
```

图库已加载，但显示黑屏。大概是因为画廊无法访问我的应用程序缓存目录中的文件。

作为替代方案，我尝试使用使用 的媒体内容提供程序`MediaStore.Images.Media.INTERNAL_CONTENT_URI`，但这会在尝试插入图像时导致错误：

```
java.lang.UnsupportedOperationException: Writing to internal storage is not supported. 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:36:46.210

我想这里的问题是您正在尝试使用画廊打开保存在私有内存空间中的文件（getCacheDir 返回相对于您的应用程序的路径，并且只有您的应用程序可以访问该内存路径）

如果您无法保存在外部存储器中，您可以尝试保存在公共路径中（但这样您的媒体文件可以被每个应用程序操作，如果您卸载您的应用程序，它不会清除您保存在那里的生成媒体）

如果你想使用私有内存，你可以写你的 ContentProvider

我编辑发布我用来完成我所说的内容提供者。这是我的内容提供商（我刚刚发布了您需要的相关部分）：

```
public class MediaContentProvider extends ContentProvider {
private static final String TAG = "MediaContentProvider";

// name for the provider class
public static final String AUTHORITY = "com.way.srl.HandyWay.contentproviders.media";

private MediaData _mediaData;

// UriMatcher used to match against incoming requests
private UriMatcher _uriMatcher;

@Override
public int delete(Uri uri, String selection, String[] selectionArgs) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public String getType(Uri uri) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public Uri insert(Uri uri, ContentValues values) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public boolean onCreate() {
    uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);

    // Add a URI to the matcher which will match against the form
    // 'content://com.stephendnicholas.gmailattach.provider/*'
    // and return 1 in the case that the incoming Uri matches this pattern
    _uriMatcher.addURI(AUTHORITY, "*", 1);

    return true;
}

@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public ParcelFileDescriptor openFile(Uri uri, String mode) throws FileNotFoundException {

    Log.v(TAG, "Called with uri: '" + uri + "'." + uri.getLastPathSegment());

    // Check incoming Uri against the matcher
    switch (_uriMatcher.match(uri)) {

    // If it returns 1 - then it matches the Uri defined in onCreate
        case 1:

            // The desired file name is specified by the last segment of the
            // path
            // E.g.
            // 'content://com.stephendnicholas.gmailattach.provider/Test.txt'
            // Take this and build the path to the file
            // String fileLocation = getContext().getCacheDir() + File.separator + uri.getLastPathSegment();
            Integer mediaID = Integer.valueOf(uri.getLastPathSegment());

            if (_mediaData == null) {
                _mediaData = new MediaData();
            }
            Media m = _mediaData.get(mediaID);

            // Create & return a ParcelFileDescriptor pointing to the file
            // Note: I don't care what mode they ask for - they're only getting
            // read only
            ParcelFileDescriptor pfd = ParcelFileDescriptor.open(new File(m.filePath), ParcelFileDescriptor.MODE_READ_ONLY);
            return pfd;

            // Otherwise unrecognised Uri
        default:
            Log.v(TAG, "Unsupported uri: '" + uri + "'.");
            throw new FileNotFoundException("Unsupported uri: " + uri.toString());
    }
} 
```

那么你需要在清单中引用你的内容提供者，在我的例子中是

```
<provider
        android:name=".contentproviders.MediaContentProvider"
        android:authorities="com.way.srl.HandyWay.contentproviders.media" >
    </provider> 
```

然后像这样使用它

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse("content://" + MediaContentProvider.AUTHORITY + "/" + m.id), "image/jpg"); 
```

在我的情况下，m 是一个存储指向 sqlite db 的 id 的实体，我使用一个获取数据的类来再次填充对象（使用 _mediaData），您可以更改代码以满足您的需求

这样我在我的应用程序中解决了你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:11:11.123

我知道不需要这种后备。具有 Google Play 的设备保证至少有 2 GB 可用的`Environment.getExternalStorageDirectory()`.

我想在 Galaxy Nexus 中，这是标记为外部的内部存储器上的一个分区。如果它不可用，我只会显示警告。

# asp.net - 重用 Web 服务客户端类实例的性能提升

> ID：13868664
> 
> 赞同：1
> 
> 时间：2012-12-13T21:20:38.710
> 
> 标签：asp.net, performance, web-services, asmx

我正在考虑需要使用不同参数快速连续地对同一个 Web 服务进行数百次调用的场景。客户端和服务都是用 ASP.NET 编写的。客户端类是从 WSDL 自动生成的。

撇开是否进行异步调用、使用并行线程或服务是否可以处理这么多命中的问题不谈，我还有一个关于性能的问题。

为所有调用重新使用 Web 服务客户端类的实例将节省为每个调用重新创建和拆除客户端实例的成本。我已经知道了。但是重用该实例还有其他性能优势吗？如果每次调用都使用相同的客户端实例，与服务的通信（或处理结果）是否运行得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:55:35.963

您是否正在创建任何可以在运行时调用任何 WSDL 的动态客户端？否则没有必要在服务器中维护客户端实例。客户端实例不能对服务器性能做任何事情。

# java - 为什么列出 新列表 = 新数组列表 () 违反类型安全？

> ID：13868667
> 
> 赞同：0
> 
> 时间：2012-12-13T21:20:59.007
> 
> 标签：java, ocpjp

> **可能重复：**
> [`List<Dog>` 是 `List<Animal>` 的子类吗？为什么 Java 的泛型不是隐式多态的？](https://stackoverflow.com/questions/2745265/is-listdog-a-subclass-of-listanimal-why-arent-javas-generics-implicit)

我已经声明了这些类：

```
class Cereal{} 
```

和：

```
public class Flakes extends Cereal{
    public static void main(String[] args) {
       List<Cereal> newList = new ArrayList<Flakes>();
    }
} 
```

但是当我尝试编译这些Java源代码时，出现了这个编译错误：

```
Type mismatch: cannot convert from ArrayList<Flakes> to List<Cereal> 
```

我的问题是：为什么不可能进行这种转换？是否违反了类型安全规则？或者？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:23:28.940

因为类型是刚性的，除非定义。您想在下面尝试：

```
 List<? extends Cereal> newList = new ArrayList<Flakes>(); 
```

这意味着它的列表对象扩展`Cereal`，因此上面的语句变得有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T21:25:13.847

**一句话：** `Polymorphism`不适用`generic type arguments`。

但是您可以使用将 Cereal 作为上限的通配符。

```
List<? extends Cereal> list = new Arraylist<Flakes>(); 
```

现在这个列表接受任何是谷物的东西，但请记住，除了 null 之外，您不能添加任何东西。

```
List<? super Flakes> list = new ArrayList<Cereal>(); 
```

这个列表接受任何是 Flakes 和超类型 Flakes 的东西。IE。一个谷物和一个 java.lang.Object。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T21:23:55.640

```
 ArrayList<Flakes> newList = new ArrayList<Flakes>();
   ArrayList<Cereal> moreGeneralList = newList;
   moreGeneralList.add(new NonFlakeCereal()); 
```

是什么类型的`newList.get(0)`？会`Cereal`但不是`Flakes`。Yet `newList`'s`get`应该会回来的`Flakes`。

# c - 无限循环，应该是在寻找 JPEG 标头

> ID：13868670
> 
> 赞同：-2
> 
> 时间：2012-12-13T21:21:10.170
> 
> 标签：c, file-io, do-while, cs50

再一次，我正在尝试编写一个从 .raw 文件复制 jpeg 的程序。它发现第一个标头（0xffd8ffe0 或 0xffd8ffe1）正常，然后继续将标头写入 outptr，然后继续以 512 位块复制 jpeg 数据。我尝试编写 do-while 循环，以便它读取 512 位数组并检查每个数组以确保它不包含新标头（在数组的前四个字节中），这将使它停止并再次启动while循环，复制下一个，但它似乎永远不会找到另一个标题，即使我知道它在那里，它应该立即出现在最后一个512位块之后。

```
#include <stdio.h>
#include <stdint.h>

#define READFILE "/home/cs50/pset5/card.raw"

int
main(void)
{
// open readfile
FILE *inptr = fopen(READFILE, "r");
if (inptr == NULL)
{
    printf("Could not open file.\n");
    return 1;
}

while (feof(inptr) == 0)
{
    // counter for writefilename
    int writeCounter = 0;

    // find a header by iterating until it finds a 0xff
    int byte[4];
    if (byte[0] != 0xff)
        byte[0] = fgetc(inptr);
    else
    {
        // then check if the next byte is 0xd8, if not, look for the next 0xff
        byte[1] = fgetc(inptr);
        if (byte[1] != 0xd8)
            break;
        else
        {
            // then check if the next byte is 0xff, if not, ditto
            byte[2] = fgetc(inptr);
            if (byte[2] != 0xff)
                break;
            else
            {
                // then check if the next byte is 0xe0 or 0xe1, if not, ditto
                byte[3] = fgetc(inptr);
                if (byte[3] == 0xe0 || byte[3] == 0xe1)
                {
                    // since it's a header, start writin'
                    // open writefile
                    char filename[7];
                    sprintf(filename, "0%.2d.jpg", writeCounter);
                    FILE *outptr = fopen(filename, "w");
                    writeCounter++;

                    // replace byte[0] since sprintf seems to make it 0 for some reason
                    byte[0] = 0xff;
                    // write the header that's in array byte[]
                    fwrite(&byte, 4, 1, outptr);

                    // write pixels in 64-byte chunks until a new header is found
                    char pixel[64];
                    do
                    {
                        fread(&pixel, 64, 1, inptr);
                        if (pixel[0] == 0xff && pixel[1] == 0xd8 && pixel[2] == 0xff && (pixel[3] == 0xe0 || pixel[3] == 0xe1))
                        {
                            fseek(inptr, -64, SEEK_CUR);
                            break;
                        }
                        else
                            fwrite(&pixel, 64, 1, outptr);
                    } while (pixel[0] != 0xff && pixel[1] != 0xd8 && pixel[2] != 0xff && (pixel[3] != 0xe0 || pixel[3] != 0xe1));
                }
                else
                    break;
            }
        }
    }    
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:40:29.073

您编写的`if`- `else`-`break`构造不起作用。它和其余代码中有几个错误：

`byte`数组未初始化：

```
int byte[4];
// If you are here for the first time, byte[0] can be anything
if (byte[0] != 0xff)
    byte[0] = fgetc(inptr); 
```

如果找到部分匹配项（如`0xFF 0xD8`）并且您使用`break`，则循环继续使用旧`byte`值，从而导致无限循环。

此外，正如 H2CO3 在他的评论中提到的：

```
char filename[7];
sprintf(filename, "0%.2d.jpg", writeCounter); 
```

我认为这应该是这样的（生成文件名`00.jpg`，`01.jpg`等等）：

```
char filename[7];
sprintf(filename, "%02d.jpg", writeCounter); 
```

这也解决了您之前的内存损坏问题（因为旧文件名占用了超过 7 个字符，因此其他变量使用的内存被覆盖，正如您在其中一条评论中所述并解决了 - 这不再需要了：

```
// replace byte[0] since sprintf seems to make it 0 for some reason
byte[0] = 0xff; 
```

您以文本模式打开文件，但实际上应该像这样以[二进制模式](http://www.cplusplus.com/reference/cstdio/fopen/)打开它（感谢@WhozCraig 指出这一点）：

```
FILE *inptr = fopen(READFILE, "rb"); 
```

您的第二个标题搜索例程也不起作用：

```
fread(&pixel, 64, 1, inptr);
if (pixel[0] == 0xff && pixel[1] == 0xd8 && pixel[2] == 0xff && (pixel[3] == 0xe0 || pixel[3] == 0xe1)) 
```

它只会在 64 字节块的开头捕获序列，尽管它可能在其他任何地方或跨越 64 字节边界。

作为解决主要解析问题的一种方法，我建议改用[状态](http://en.wikipedia.org/wiki/Finite_state_machine)变量，如下所示：

```
int state = 0;
int c;
while (feof(inptr) == 0) {
  c = getc(inptr);
  switch (state) {
    case 0:
      if (c == 0x00) {
        state = 1;
      }
    case 1:
      if (c == 0x01) {
        state = 2;
      } else {
        state = 0;
      }
    case 2:
      if (c == 0x02) {
        state = 3;
      } else {
        state = 0;
      }
    case 3:
      if ((c == 0x03) || (c == 0x04)) {
        // We found 0x00010203 or 0x00010204, place more code here
        state = 4; // Following states can parse data and look for other sequences
      } else {
        state = 0;
      }

    // More states here

    default:
      printf("This shouldn't happen\n");
  }
} 
```

另请注意，我替换`fgetc`为`getc`- 对于某些编译器，它会更快，因为它是缓冲的 - 并且它具有与`fgetc`.

最后，正如 Jigsore 在评论中提到的，JPEG 解析实际上更复杂，您使用的序列是两个标记组合。基本的标记顺序和可选部分的解释可以在[JPEG 规范](http://www.w3.org/Graphics/JPEG/itu-t81.pdf)的 B.2.1 ff 部分中找到。

# postgresql - Postgres 触发器打开 http 连接

> ID：13868671
> 
> 赞同：1
> 
> 时间：2012-12-13T21:21:13.223
> 
> 标签：postgresql, triggers

每次使用触发器和 HTTP GET 或 POST 在 Postgres 表中发生插入时，我都需要 ping 一些 HTTP 服务？

有什么简单的方法可以通过标准的 PostgreSQL 安装来实现吗？

如果没有，有没有办法用额外的库来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T00:26:45.120

您可以使用 PL/perlu 或 PL/pythonu 来做到这一点。但是，我强烈建议您不要这样做。DNS 问题、服务器问题等将导致您的 PostgreSQL 后端停止，严重破坏数据库性能并可能导致您耗尽 max_connections。

相反，让触发器在更改发生时发送 a `NOTIFY`，并让触发器将详细信息插入日志表。有一个`LISTEN`通知客户端应用程序，读取触发器插入到日志表中的记录，并发出任何适当的 HTTP 请求。

`SELECT ... FOR UPDATE`客户端应该在请求成功时从日志表中一一获取请求`DELETE`。

有关更多详细信息，请参阅[有关从数据库内发送电子邮件的答案。](https://stackoverflow.com/a/12003516/398670)

# pydev - 使用 Pydev 访问 Eclipse 项目路径？

> ID：13868673
> 
> 赞同：0
> 
> 时间：2012-12-13T21:21:14.623
> 
> 标签：pydev

我有一个带有 src/ 目录和 data/ 目录的 Pydev/Eclipse 项目。是否有一种简单的方法可以从 Python 脚本（在 src 中）中访问数据/（以及那里的文件）的完整路径，而无需明确指定完整的数据路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:29:55.477

你可以做

```
import os
print os.getcwd() 
```

然后只需删除 /src/ 部分并添加 /data/。从技术上讲，这将是完整路径，但它会使用 src 和 data 位于同一个顶级文件夹的假设来工作。

[编辑]

像这样的东西（如果你在 *nix 上）

```
import os
path = os.getcwd()
split_path = path.split('/')

new_path = ''.join([s + '/' for s in split_path[:-1]])
new_path += 'data/' 
```

猜猜它在Windows上会相似

# sql-server - 选择维度转到列标签而不是 Excel (SSAS) 中的行

> ID：13868674
> 
> 赞同：1
> 
> 时间：2012-12-13T21:21:30.490
> 
> 标签：sql-server, excel, ssas, olap-cube

为 SSAS excel 选择维度属性将使用数据透视表上的列标签而不是行标签。在我向维度添加新属性之前，它曾经正常工作。有人可以告诉我应该更改什么属性以将其默认为行标签吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T23:42:47.570

在 BIDS 中打开维度。在 Dimension 属性中，将 Type 更改为 Time 以外的内容。

# php - PHP/MYSQL：如何计算字段+其他字段+其他字段的值

> ID：13868676
> 
> 赞同：1
> 
> 时间：2012-12-13T21:21:38.183
> 
> 标签：php, mysql

我有一个 mysql 表，其中包含一个名为“id”、“name”和“number”的字段。

每行的“数字”字段都有一个数字。

```
id   name   number

1    test 30

2    test2  40

3    lala   23

total = 93 
```

如何计算（加）所有行数？

```
$row['number']+$row['number']+$row['number'] = .. an other number. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:24:11.347

`SELECT name, SUM(number) FROM table GROUP BY name`

我假设您想按名称进行总和。

`SELECT SUM(number) FROM table`

不分组。

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum)了解更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:26:53.193

尝试这样做

```
 select number ,sum(number) as total from table; 
```

然后做

```
$row['total']  // and it gives u the total sum 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T21:27:04.393

在 PHP 级别：

```
$cnt = 0;
while($row = mysql_fetch_assoc($result)) {
   $cnt += $row['yourfield'];
} 
```

在 MySQL 级别：

```
SELECT SUM(yourfield)
FROM yourtable
GROUP BY yourfield 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T21:23:47.060

您可以像这样查询表：

```
select sum(number) from table; 
```

并让mysql为你计算。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T21:26:18.743

尝试这个

```
SELECT SUM(number) AS total FROM table; 
```

# asp.net - 通过 SQLDataSource 更新文本框中的数据

> ID：13868678
> 
> 赞同：1
> 
> 时间：2012-12-13T21:21:46.917
> 
> 标签：asp.net, sql-server

使用 Visual Studio 2012 和 SQL Server 2012

情况如下：

我正在构建的网站不会更新从 SQLDataSource 加载到字段中的数据。数据可以很好地加载到相应的文本框中，但是当我去编辑数据并激活按钮单击时，看起来修订已被清除并且页面刷新为原始加载的数据。据我所知，我的代码看起来是正确的，但显然不是这样。

补充资料：

我在带有母版页的容器占位符中设置了页面。

这是我的标记：

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">

<!-- Job Title -->

<div class="lbljobtitle">
    <asp:Label ID="lblJobTitle" runat="server" Text="Job Title"></asp:Label>
</div>

<div class="txtjobtitle">
    <asp:TextBox ID="txtJobTitle" runat="server" Height="22px" Width="250px"></asp:TextBox>
</div>

<!-- Employee Type -->

<div class="lblemployeetype">
    <asp:Label ID="lblEmployeeType" runat="server" Text="Employee Type"></asp:Label>
</div>

<div class="txtemployeetype">
    <asp:TextBox ID="txtEmployeeType" runat="server" Height="22px" Width="250px"></asp:TextBox>
</div>

<!-- Location -->

<div class="lbllocation">
    <asp:Label ID="lblLocation" runat="server" Text="Location"></asp:Label>
</div>

<div class="txtlocation">
    <asp:TextBox ID="txtLocation" runat="server" Height="22px" Width="250px"></asp:TextBox>
</div>

<!-- Job Description -->

<div class="lbljobdescription">
    <asp:Label ID="lblJobDescription" runat="server" Text="Job Description"></asp:Label>
</div>

<div class="txtjobdescription">
    <asp:TextBox ID="txtJobDescription" runat="server" Height="160px" Width="250px" TextMode="MultiLine"></asp:TextBox>
</div>

<!-- Requirements -->

<div class="lblrequirements">
    <asp:Label ID="lblRequirements" runat="server" Text="Requirements"></asp:Label>
</div>

<div class="txtrequirements">
    <asp:TextBox ID="txtRequirements" runat="server" Height="160px" Width="250px" TextMode="MultiLine"></asp:TextBox>
</div>

<!-- Experience -->

<div class="lblexperience">
    <asp:Label ID="lblExperience" runat="server" Text="Experience"></asp:Label>
</div>

<div class="txtexperience">
    <asp:TextBox ID="txtExperience" runat="server" Height="22px" Width="250px"></asp:TextBox>
</div>

<!-- Date Posted -->

<div class="lbldateposted">
    <asp:Label ID="lblDatePosted" runat="server" Text="Date Posted"></asp:Label>
</div>

<div class="txtdateposted">
    <asp:TextBox ID="txtDatePosted" runat="server" Height="22px" Width="250px"></asp:TextBox>
</div>

<!-- Start Date -->

<div class="lblstartdate">
    <asp:Label ID="lblStartDate" runat="server" Text="Start Date"></asp:Label>
</div>

<div class="txtstartdate">
    <asp:TextBox ID="txtStartDate" runat="server" Height="22px" Width="250px"></asp:TextBox>
</div>

<asp:Button ID="btnUpdate" runat="server" Text="Update Job" OnClick="btnUpdate_Click" />
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:bgrecruit_d01ConnectionString %>"
    SelectCommand="SELECT job_title, employee_type, location, job_description, requirements, experience, date_posted, start_date, requisition_id FROM jobopening_tbl WHERE (requisition_id = @requisition_id)"
    UpdateCommand="UPDATE [jobopening_tbl] SET [job_title] = @job_title, [employee_type] = @employee_type, [location] = @location, [job_description] = @job_description, [requirements] = @requirements, [experience] = @experience, [date_posted] = @date_posted, [start_date] = @start_date WHERE [requisition_id] = @requisition_id">

    <SelectParameters>
        <asp:QueryStringParameter Name="requisition_id" Type="String" QueryStringField="req_id" />
    </SelectParameters>

    <UpdateParameters>

        <asp:Parameter Name="job_title" Type="String" />
        <asp:Parameter Name="employee_type" Type="String" />
        <asp:Parameter Name="location" Type="String" />
        <asp:Parameter Name="job_description" Type="String" />
        <asp:Parameter Name="requirements" Type="String" />
        <asp:Parameter Name="experience" Type="String" />
        <asp:Parameter Name="date_posted" Type="String" />
        <asp:Parameter Name="start_date" Type="String" />
        <asp:Parameter Name="requisition_id" />
    </UpdateParameters>

</asp:SqlDataSource> 
```

还有我的 C#：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Data;
using System.Configuration;

public partial class UpdateDetail : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    DataView dv = (DataView)SqlDataSource1.Select(DataSourceSelectArguments.Empty);
    DataRowView row = dv[0];

    txtJobTitle.Text = row["job_title"].ToString();
    txtEmployeeType.Text = row["employee_type"].ToString();
    txtLocation.Text = row["location"].ToString();
    txtJobDescription.Text = row["job_description"].ToString();
    txtRequirements.Text = row["requirements"].ToString();
    txtExperience.Text = row["experience"].ToString();
    txtDatePosted.Text = row["date_posted"].ToString();
    txtStartDate.Text = row["start_date"].ToString();             

}
protected void btnUpdate_Click(object sender, EventArgs e)
{
    DataView dv = (DataView)SqlDataSource1.Select(DataSourceSelectArguments.Empty);
    DataRowView row = dv[0];

    SqlDataSource1.UpdateParameters["job_title"].DefaultValue = txtJobTitle.Text.ToString();
    SqlDataSource1.UpdateParameters["employee_type"].DefaultValue = txtEmployeeType.Text.ToString();
    SqlDataSource1.UpdateParameters["location"].DefaultValue = txtLocation.Text.ToString();
    SqlDataSource1.UpdateParameters["job_description"].DefaultValue = txtJobDescription.Text.ToString();
    SqlDataSource1.UpdateParameters["requirements"].DefaultValue = txtRequirements.Text.ToString();
    SqlDataSource1.UpdateParameters["experience"].DefaultValue = txtExperience.Text;
    SqlDataSource1.UpdateParameters["date_posted"].DefaultValue = txtDatePosted.Text;
    SqlDataSource1.UpdateParameters["start_date"].DefaultValue = txtStartDate.Text;
    //requisition_id = @requisition_id
    SqlDataSource1.UpdateParameters["requisition_id"].DefaultValue = row["requisition_id"].ToString();

    SqlDataSource1.Update();

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:25:02.303

添加以下`if`块，使 page_load 中的代码如下所示：

```
if(!Page.IsPostBack)
{
  DataView dv = (DataView)SqlDataSource1.Select(DataSourceSelectArguments.Empty);
  DataRowView row = dv[0];

  txtJobTitle.Text = row["job_title"].ToString();
  txtEmployeeType.Text = row["employee_type"].ToString();
  txtLocation.Text = row["location"].ToString();
  txtJobDescription.Text = row["job_description"].ToString();
  txtRequirements.Text = row["requirements"].ToString();
  txtExperience.Text = row["experience"].ToString();
  txtDatePosted.Text = row["date_posted"].ToString();
  txtStartDate.Text = row["start_date"].ToString();  
} 
```

问题是 page_load 在每次回发时都会运行（包括按钮点击）。我怀疑您只想在页面最初加载时运行该代码，这就是添加的`if`作用。

请记住这一点，因为如果您继续使用 .NET 进行编程，您将再遇到大约 28972 次此问题。

# r - sample() 中的别名方法

> ID：13868679
> 
> 赞同：4
> 
> 时间：2012-12-13T21:21:48.057
> 
> 标签：r

在 R 中，当应用 sample() 时，如果 replace 为真，当有超过**250 个**合理可能的值时，将使用 Walker 的别名方法。有没有办法让 sample() 总是使用别名方法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:34:31.197

一种选择是将您的向量`x`和`prob`向量复制足够多的时间，以使结果向量的长度超过 250 个元素。当然，这是一个 hack，但很有趣！

```
sampleWalker <- function(x, size, prob) {
    nx <- length(x)
    nrep <- 251 %/% nx + 1
    sample(x = rep(x, nrep), size = size, replace = TRUE, prob = rep(prob, nrep))
}

sampleWalker(1:3, 10, prob = 1:3)
#  [1] 3 1 2 3 3 2 2 1 2 3
# Warning message:
# In sample.int(length(x), size, replace, prob) :
#   Walker's alias method used: results are different from R < 2.2.0 
```

# php - 根据用户输入和现有 dbms 数据更新 dbms 记录(2)

> ID：13868690
> 
> 赞同：0
> 
> 时间：2012-12-13T21:22:53.703
> 
> 标签：php, database

[这是使用此代码的页面。](http://www.davidsdomaindesign.com/marknutt/emails/all.php)我有一个 php 页面，它从包含电子邮件地址的 dbms 中提取数据。这行得通。然后它会显示电子邮件地址和其他存储的 dbms 数据。然后，用户可以选择在 php 页面中设计的名为 emailselected 的字段中放置一个“X”。这也有效。我现在想根据存储的电子邮件地址使用新字段更新 dbms，但更新语句不起作用。请帮忙。代码在这里列出：

```
 include("db.php");
if (isset($_POST['ssubmit']))
    {
    $id_save = $test['id'];
    $emailselected_save = $_POST['emailselected'];
    $email_save = $test['email'];

    $rc = mysql_query("UPDATE emails SET selected='$emailselected_save' WHERE id = 'id'");
if (!$result) {
    die('What?: ' . mysql_error());
}
$num = mysql_affected_rows();
printf("Updated %d rows\n", $num);

    echo "<input type='button' value='Email(s) sent' onclick='goBack()' />";
mysql_close($conn);
    } else {echo "hello";}
?>
<form method='post'>
    <div id='headd'>
    <br />
    <input type='button' value='Close this window without Sending' onclick='goBack()' />
    <input type='submit' name='ssubmit' id='ssubmit' value='Send Email Now!!!' />
    <p>Place an "X" in the emails you wish to send!!!</p>
    </div>
        <br /><br/>

<?php
    include("db.php");  
    $result = mysql_query("SELECT * FROM emails WHERE unsubscribe  != 'x' ORDER BY lastname ASC");
            while($test = mysql_fetch_array($result))
            {
?>
    <table border='1' width='78%'>
    <tr align=\"left\">
        <td width='4%'><font color='black'><input type='text' size='1' id='emailselected' name='emailselected' /></font></td>
        <td width='15%'><font color='black'><?php echo $test['lastname']?></font></td>
        <td width='15%'><font color='black'><?php echo $test['firstname']?></font></td>
        <td width='40%'><font color='black'><?php echo $test['email']?></font></td>
        <td width='4%'><font color='black'><?php echo $test['id']?></font></td>
    </tr>
</table>
<?php
            }
?>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:27:55.723

错误是：

```
$rc = mysql_query("UPDATE emails SET selected='$emailselected_save' WHERE id = 'id'"); 
```

应该：

```
$rc = mysql_query("UPDATE emails SET selected='$emailselected_save' WHERE id = '$id_save'"); 
```

**您的代码易受 SQL 注入攻击。**所以你应该过滤你的数据。但我只想切换到 PDO 并使用准备好的语句。

[http://php.net/manual/en/pdo.prepare.php](http://php.net/manual/en/pdo.prepare.php)

# java - 空的无限循环和 GC (JVM)。请说明效果

> ID：13868693
> 
> 赞同：6
> 
> 时间：2012-12-13T21:22:59.977
> 
> 标签：java, garbage-collection

我的空无限循环

```
 public static void main(String[] args) {
        while (true) {}
    } 
```

以及在 Java VisualVM 中进行分析（图片） ![视觉GC](../Images/f5000ad2c12f9555d111154f9fefe3de.png)

如您所见，我不创建对象。为什么要更改堆？

请说明效果。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T21:33:30.273

基本上**任何**Java 应用程序都是多线程的，您的主线程不分配内存这一事实并不意味着其他线程也不分配内存。事实上，很可能通过 VisualVM 附加并显示 GC 选项卡，您已经在 VM 中生成了一些线程来监控 GC 资源并为 VisualVM 提供成为那些闪亮图表的指标。并且该监控可能会分配自己的一些资源来完成其工作。

# vba - 比较 object.Value = Null 不会产生预期的结果

> ID：13868695
> 
> 赞同：7
> 
> 时间：2012-12-13T21:23:07.447
> 
> 标签：vba, ms-access

所以我有一个令人沮丧的简单问题，我似乎无法解决。

```
If Me.Bank_Credit.Value = Null Then
Me.Bank_Credit.Value = 0
End If 
```

基本上，我有一个未绑定的框，用户输入数据然后点击一个按钮。在确认框为“是”后，未绑定框上的数据将复制到绑定框。但是，如果用户没有输入任何内容，则会创建一个空的绑定字段，这可能会严重影响后续查询。

话虽这么说，上面的代码根本不适合我。例如，如果我设置 If Me.Bank_Credit.Value = 1 然后运行它，1 会变成 2，这应该会发生。但它只是拒绝为 Null 甚至 "" 工作。

我很确定这个问题有一个简单的解决方案，我就是想不通。

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-13T21:46:00.763

没有任何东西等于 Null，甚至没有另一个 Null。没有什么不等于 Null，即使是另一个 Null。

当`Bank_Credit` *为*Null 时，以下表达式将返回 Null ...`True`与您预期的不同，甚至`False`.

```
Debug.Print (Me.Bank_Credit.Value = Null) 
```

这与立即窗口中出现此结果的原因相同：

```
Debug.Print Null = Null
Null 
```

使用该`IsNull()`功能。

```
If IsNull(Me.Bank_Credit.Value) Then 
```

此外，请查看`Nz()`帮助主题以了解它是否有用。你可以做到这一点，尽管这并不是对`IsNull()`. 但是`Nz()`对于其他 VBA 代码可以很方便。

```
Me.Bank_Credit = Nz(Me.Bank_Credit, 0) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T06:04:28.397

HansUp 的回答是正确的，但我认为需要补充一点，“Nothing”有一个类似的结构，它基本上是取消引用对象的 VBA 关键字。你必须使用像这样的语句

```
If myRange is Nothing Then 
```

您将在整个 VBA 帮助文件中看到这类语句（实际上是在具有与此类似的关键字的其他语言中）。

# sencha-touch - 如何在 Ext.Button 处理程序中使用 up()

> ID：13868699
> 
> 赞同：2
> 
> 时间：2012-12-13T21:23:23.287
> 
> 标签：sencha-touch, sencha-touch-2

**背景**：我正在使用 sencha touch 2 开发 MVC 应用程序。我正在处理一个有两个选项卡的页面。在第一个选项卡中，我在标题栏中有一个按钮。

**问题**：我无法从按钮处理程序调用任何其他函数。我认为，调用函数的范围存在问题。

这是我的代码。

```
Ext.define('WUPOC.view.WUHomePage', {
  extend: 'Ext.TabPanel',
  requires:['Ext.TitleBar','Ext.dataview.List','Ext.data.proxy.JsonP'],
  alias: 'widget.wuHomePageView',

  config: {
    fullscreen: true,

    defaults: {
      styleHtmlContent: true
    },

    items: [{
      title: 'Home',
      iconCls: 'home',

      items: [{
        xtype: 'titlebar',
        title: 'Hello',
        docked: 'top',
        items: [{
          xtype: 'button',
          text: 'LogOut',
          ui: 'action',
          itemId: 'newButton',
          align: 'right',
          handler : function(btn){
            console.log('LogOut is tapped');  // This is printed
            this.up.onNewButtonTap();  // Throws error
          }
        }],
      }],
    }, {
      title: 'Contact',
      iconCls: 'user',
      html: 'Contact Screen'
    }]
  },

  onNewButtonTap: function () {
    alert('newNoteCommand');
  },
}); 
```

我收到如下错误。

```
Uncaught TypeError: Object function (selector) {
        var result = this.parent;

        if (selector) {
            for (; result; result = result.parent) {
                if (Ext.ComponentQuery.is(result, selector)) {
                    return result;
                }
            }
        }
        return result;
    } has no method 'onNewButtonTap' 
```

我认为设置按钮的范围存在问题。请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:25:05.910

首先，`up`是一个函数，所以你需要这样调用它：

```
this.up(); 
```

然后`this.up()`只会带到按钮的容器中，它没有方法`onNewButtonTap`。你可以继续做 up() 直到你得到正确的组件，但这会让我更聪明：

*   将 xtype 添加到您的视图中
*   将此 xtype 用作 up 函数中的选择器：`this.up('myXType').onNewButtonTap();`

[例子](http://www.senchafiddle.com/#UT18y)

希望这可以帮助

# math - 创建这一系列数字的最优雅的方法是什么？

> ID：13868704
> 
> 赞同：1
> 
> 时间：2012-12-13T21:23:34.300
> 
> 标签：math, collections, language-agnostic, series, code-formatting

我在一个集合中有 N 个项目，我从 1 开始分配值，在列表的“中心”下降到 0，然后线性返回到 1。

因此，如果您有 5 个项目：

```
0   1   2   3   4
1   0.5 0   0.5 1 
```

对于 6 个项目，中心的 2 个项目将具有相同的值 0。

```
0   1   2   3   4   5
1   0.5 0   0   0.5 1 
```

现在我有一堆 if 语句检查`index`然后决定值应该从 1 上升还是下降。但这似乎太混乱了。

有没有一种优雅的方法来创建这样的一系列数字（特别是如果可能的话没有 if 语句）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T21:42:58.993

如果`N >= 3`是奇数，那么

```
f(x) = fabs(2*x-N+1)/(N-1) 
```

如果`N >= 4`是偶数，那么

```
f(x) = (fabs(2*x-N+1) - 1)/(N-2) 
```

要完全摆脱 if 语句，您可以将其写为

```
f(x) = (fabs(2*x-N+1) + (N%2) - 1)/(N-2 + (N%2)) 
```

它适用于 的偶数和奇数值`N >= 3`。

# types - COQ 中 prod 和 sig 类型之间的关系

> ID：13868705
> 
> 赞同：4
> 
> 时间：2012-12-13T21:23:37.480
> 
> 标签：types, coq, proof-system

在 COQ 中，类型 prod（具有一个构造函数对）对应于笛卡尔积，类型 sig（具有一个构造函数）对应于依赖求和，但是如何描述笛卡尔乘积是依赖求和的特例这一事实？我想知道 prod 和 sig 之间是否存在联系，例如一些定义相等，但我在参考手册中没有明确找到它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T02:11:07.920

事实上，该类型更`prod`类似于：`sigT``sig`

```
Inductive prod (A B : Type) : Type :=
  pair : A -> B -> A * B

Inductive sig (A : Type) (P : A -> Prop) : Type :=
  exist : forall x : A, P x -> sig P

Inductive sigT (A : Type) (P : A -> Type) : Type :=
  existT : forall x : A, P x -> sigT P 
```

从元理论的角度来看，prod 只是 sigT 的一个特例，您的`snd`组件不依赖于您的`fst`组件。也就是说，您可以定义：

```
Definition prod' A B := @sigT A (fun _ => B).

Definition pair' {A B : Type} : A -> B -> prod' A B := @existT A (fun _ => B).

Definition onetwo := pair' 1 2. 
```

* * *

但是，它们不能在定义上相等，因为它们是不同的类型。你可以显示一个双射：

```
Definition from {A B : Type} (x : @sigT A (fun _ => B)) : prod A B.
Proof. destruct x as [a b]. auto. Defined.

Definition to {A B : Type} (x : prod A B) : @sigT A (fun _ => B).
Proof. destruct x as [a b]. econstructor; eauto. Defined.

Theorem fromto : forall {A B : Type} (x : prod A B), from (to x) = x.
Proof. intros. unfold from, to. now destruct x. Qed.

Theorem tofrom : forall {A B : Type} (x : @sigT A (fun _ => B)), to (from x) = x.
Proof. intros. unfold from, to. now destruct x. Qed. 
```

但这不是很有趣...... :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T20:25:59.683

乘积是从属总和的特殊情况，恰好当从属总和与常见产品类型同构时。

考虑一个系列的传统求和，其项不依赖于索引：一系列`n`项的总和，所有这些项都是`x`. 由于`x`不依赖于索引，通常表示为`i`，我们将其简化为`n*x`。否则，我们会有`x_1 + x_2 + x_3 + ... + x_n`，其中每个`x_i`都可以不同。这是描述 Coq 所拥有的一种方式`sigT`：一种类型，它是 s 的索引族`x`，其中索引是通常与变体类型相关联的不同数据构造函数的概括。

# delphi - 在 SOAP Body 中包装 TXMLData 并在 HTTP 标头中修改 Content-Type

> ID：13868723
> 
> 赞同：0
> 
> 时间：2012-12-13T21:24:42.647
> 
> 标签：delphi, soap, http-headers, webservice-client

我和这个几乎有同样的问题[，](https://stackoverflow.com/questions/12307943/delphi-wrapping-txmldata-in-soap-request-with-schema-tag)但我只需要在 SOAP 正文中发送 [MyXML]。就像这样：

```
POST /soap HTTP/1.1
Accept-Encoding: gzip,deflate
Content-Type: application/octet-stream
SOAPAction: "getData"
Content-Length: 1664
Host: abc.com

    <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://xy.com/ns1">
       <soapenv:Header>
          <ns1:metadata>
             <ns1:processGroup>PG</ns1:processGroup>
             <ns1:processName>PN</ns1:processName>
             <ns1:applReqID>445526687456</ns1:applReqID>
             <ns1:receiver>XY</ns1:receiver>
             <ns1:documentVersion>2<ns1:documentVersion>
          </ns1:metadata>
       </soapenv:Header>
       <soapenv:Body>
    <sh:StandardBusinessDocument>
       <sh:StandardBusinessDocumentHeader>
          <sh:HeaderVersion>1.0</sh:HeaderVersion>
    ...
    </sh:StandardBusinessDocument>
       </soapenv:Body>
    </soapenv:Envelope> 
```

在delphi 2010中是否有可能以及如何做到这一点？

另一个问题是我将如何更改 Content-Type，因为您可以看到 web 服务请求是 application/octet-stream？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:56:01.783

使用 Rio.OnBeforeExecute 处理程序，您可以将 XML 替换为您想要的任何内容。

# oracle - 首次尝试学习 oracle 触发器

> ID：13868726
> 
> 赞同：1
> 
> 时间：2012-12-13T21:24:59.933
> 
> 标签：oracle, triggers

我刚开始学习触发器，所以请多多包涵。如果插入的行中的礼物与表中已有的任何礼物相同，则打印一条消息，说明该礼物已从捐赠者处赠送给接收者。

```
create or replace TRIGGER Same_Gift_Given
  BEFORE INSERT ON GIVING
  FOR EACH ROW
DECLARE
  giftgiven varchar(255);
BEGIN
  SELECT giftname INTO giftgiven from GIVING;
  IF :new.giftname = giftgiven then
    dbms_output.put_line(giftgiven || ' has already been gifted to ' || giving.receiver || ' by ' || giving.donor);
  end if;
END; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T21:55:38.803

这是一个非常糟糕的家庭作业问题。你永远永远不会触发我们在真实系统中做这样的事情。它会破坏大多数`INSERT`操作，如果有多个用户，它将失败。实际上，您将使用约束。实际上，如果由于某种原因您被迫在枪口下使用扳机，您将需要一系列三个扳机、一个包和一个集合才能正确执行此操作。

**教授可能在寻找什么**

只是强调一下，你永远不会考虑在真实系统中这样做

```
create or replace trigger same_gift_given
  before insert on giving
  for each row
declare
  l_existing_row giving%rowtype;
begin
  select *
    into l_existing_row
    from giving
   where giftname = :new.giftname
     and rownum = 1;

  dbms_output.put_line( :new.giftname || 
                           ' has already been gifted to ' ||
                           l_existing_row.receiver ||
                           ' from ' ||
                           l_existing_row.donor );
exception
  when no_data_found
  then
    null;
end; 
```

这不会阻止您插入重复的行。`INSERT ... VALUES`如果您尝试在`giving`桌子上做任何事情，它将引发变异触发器错误。这是低效的。它不处理多个会话。简而言之，这是绝对不应该在任何实际系统中使用的残暴代码。

**你在现实中会做什么**

实际上，您将创建一个约束

```
ALTER TABLE giving
  ADD CONSTRAINT unique_gift UNIQUE( giftname ); 
```

这将在多用户环境中工作。它不会抛出变异触发器异常。它效率更高。它的代码要少得多。它实际上可以防止插入重复的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:56:10.863

让我们尝试一些不同的东西：

```
CREATE OR REPLACE TRIGGER GIVING_COMPOUND_INSERT
  FOR INSERT ON GIVING
  COMPOUND TRIGGER

  TYPE STRING_COL IS TABLE OF VARCHAR2(255) INDEX BY VARCHAR2(255);

  colGiftnames   STRING_COL;
  aGiftname      VARCHAR2(255);
  nCount         NUMBER;

  -- Note that the way the associative array is used here is a bit of a cheat.
  -- In the BEFORE EACH ROW block I'm putting the string of interest into the
  -- collection as both the value *and* the index.  Then, when iterating the
  -- collection only the index is used - the value is never retrieved (but
  -- since it's the same as the index, who cares?).  I do this because I'd
  -- rather not write code to call a constructor and maintain the collections
  -- size - so I just use an associative array and let Oracle do the work for
  -- me.

  BEFORE EACH ROW IS
  BEGIN
    colGiftnames(:NEW.GIFTNAME) := :NEW.GIFTNAME;
  END BEFORE EACH ROW;

  AFTER STATEMENT IS
  BEGIN
    aGiftname := colGiftnames.FIRST;
    WHILE aGiftname IS NOT NULL LOOP
      SELECT COUNT(*)
        INTO nCount
        FROM GIVING
        WHERE GIFTNAME = aGiftname;

      IF nCount > 1 THEN
        DBMS_OUTPUT.PUT_LINE('Found ' || nCount || ' instances of gift ''' ||
                             aGiftname || '''');
        RAISE_APPLICATION_ERROR(-20001, 'Found ' || nCount ||
                                        ' instances of gift ''' ||
                                        aGiftname || '''');
      END IF;

      aGiftname := colGiftnames.NEXT(aGiftname);
    END LOOP;
  END AFTER STATEMENT;
END GIVING_COMPOUND_INSERT; 
```

同样，这是尝试保证唯一性的糟糕方式。实际上，执行此操作的“正确方法”是使用约束（UNIQUE 或 PRIMARY KEY）。仅仅因为你*可以*做某事并不意味着你*应该*做。

分享和享受。

# postgresql - Mountain Lion（OS X 服务器）中缺少套接字文件“/var/pgsql_socket/.s.PGSQL.5432”

> ID：13868730
> 
> 赞同：97
> 
> 时间：2012-12-13T21:25:17.197
> 
> 标签：postgresql, osx-mountain-lion, postgresql-9.2, osx-server

我刚刚使用 OS X Server 将我的 MacMini Server 从 Lion Server 升级到了 Mountain Lion。我在使用 PostgreSQL 时遇到了与去年第一次安装 Lion Server 时相同的问题。

当我尝试执行任何类型的 PostgreSQL 终端命令时，我会收到以下臭名昭著的错误消息，许多人多年来都收到了这些错误消息：

```
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

当我收到错误时，我正试图更改 _postgres 的密码。我尝试了几个命令，但得到了同样的错误。我刚刚重新启动了我的服务器，但没有运气。我以 root 身份登录以查看 /var/pgsql_socket 并且该文件夹为空。文件夹 /var/pgsql_socket_alt 也是空的。

我在网上查过这个。然而，我读过的几乎所有解决方案，包括关于 Stack Overflow 的，都建议删除并重新安装 PostgreSQL。我不知道，但这似乎不是一个合理的选择，因为服务器应用程序上的几个选项使用 PostgreSQL。我联系了 Apple 企业支持（未达成协议），并被告知我的问题必须由开发人员解决，费用为 695 美元。

我有一个网站现在关闭了，因为我无法重建它。在这一点上，我不知道在哪里寻求帮助。我会继续上网看看能不能找到什么。但是我希望有人可以快速给我一个答案，以便我可以重建我的数据库。

**更新：2012 年 12 月 13 日 15:33 GMT-6**

这是我对 ps auwx|grep postg 的输出：

```
_postgres      28123   0.0  0.1  2479696   7724   ??  Ss    3:01PM   0:00.04 /Applications/Server.app/Contents/ServerRoot/usr/bin/postgres_real -D /Library/Server/PostgreSQL For Server Services/Data -c listen_addresses= -c log_connections=on -c log_directory=/Library/Logs/PostgreSQL -c log_filename=PostgreSQL_Server_Services.log -c log_line_prefix=%t  -c log_lock_waits=on -c log_statement=ddl -c logging_collector=on -c unix_socket_directory=/Library/Server/PostgreSQL For Server Services/Socket -c unix_socket_group=_postgres -c unix_socket_permissions=0770
server1        28216   0.0  0.0  2432768    620 s000  R+    3:02PM   0:00.00 grep postg
_postgres      28138   0.0  0.0  2439388    752   ??  Ss    3:01PM   0:00.01 postgres: stats collector process                           
_postgres      28137   0.0  0.0  2479828   1968   ??  Ss    3:01PM   0:00.00 postgres: autovacuum launcher process                           
_postgres      28136   0.0  0.0  2479696    544   ??  Ss    3:01PM   0:00.00 postgres: wal writer process                           
_postgres      28135   0.0  0.0  2479696    732   ??  Ss    3:01PM   0:00.01 postgres: writer process                           
_postgres      28134   0.0  0.0  2479696    592   ??  Ss    3:01PM   0:00.00 postgres: checkpointer process                           
_postgres      28131   0.0  0.0  2439388    368   ??  Ss    3:01PM   0:00.00 postgres: logger process 
```

**更新：2012 年 12 月 13 日 18:10 GMT-6**

经过激烈的网络搜索，找到了这个视频。我能够让 PostgreSQL 工作并消除错误。我可以使用 pgadmin 和 phppgadmin 进行连接。由于纯粹的挫败感，我正要回到 Lion Server。现在我不必了。

[http://www.youtube.com/watch?v=y1c7WFMMkZ4](http://www.youtube.com/watch?v=y1c7WFMMkZ4)

* * *

## 回答 #1

> 赞同：304
> 
> 时间：2013-04-25T00:23:34.653

我能够将以下内容添加到我的 .bash_profile 以防止出现错误：

```
export PGHOST=localhost 
```

这有效[，因为](https://www.postgresql.org/docs/9.6/static/app-psql.html)：

> 如果省略主机名，psql 将通过 Unix 域套接字连接到本地主机上的服务器，或通过 TCP/IP 连接到没有 Unix 域套接字的机器上的 localhost。

您的操作系统支持 Unix 域套接字，但 PostgreSQL 的`psql`需要的 Unix 套接字要么不存在，要么位于与预期不同的位置。

明确指定主机名以`localhost`强制`psql`使用 TCP/IP。设置环境变量`PGHOST`是实现这一目标的方法之一。它记录在[psql 的手册](https://www.postgresql.org/docs/9.6/static/app-psql.html)中。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-08-14T16:19:58.437

尝试在控制台中粘贴：

```
$ mkdir /var/pgsql_socket/ 

$ ln -s /private/tmp/.s.PGSQL.5432 /var/pgsql_socket/ 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-09-06T06:08:46.780

我可以通过简单地为 PostgreSQL 主机地址填写 127.0.0.1 而不是将其留空来解决。（Django 示例）

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'database_name',
        'USER': 'database_user',
        'PASSWORD': 'pass',
        'HOST': '127.0.0.1',
        'PORT': '',
        }
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-10-09T09:54:56.697

在您喜欢的编辑器中打开“postgresql.conf”。查找变量“unix_socket_directories”，它很可能如下所示：

```
unix_socket_directories = '/private/tmp/' 
```

将行更改为：

```
unix_socket_directories = '/var/pgsql_socket/' 
```

请注意，如果您希望多个目录中的套接字文件用逗号分隔它们。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-08-13T03:01:46.563

一个更简单的解决方案（感谢[http://daniel.fone.net.nz/blog/2014/12/01/fixing-connection-errors-after-upgrading-postgres/](http://daniel.fone.net.nz/blog/2014/12/01/fixing-connection-errors-after-upgrading-postgres/)）。我已经升级到 postgres 9.4。就我而言，我需要做的就是（经过一天的谷歌搜索但没有成功）

```
gem uninstall pg
gem uninstall activerecord-postgresql-adapter
bundle install 
```

重启webrick，大功告成！

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-04-08T09:51:45.870

正如其他人在评论中提到的，这个问题的一个非常简单的解决方案是在数据库配置中声明数据库“主机”。添加这个答案只是为了让阅读本文的人更清楚一点。

例如，在 Ruby on Rails 应用程序中，编辑 /config/database.yml：

```
development:
  adapter: postgresql
  encoding: unicode
  database: database_name
  pool: 5
  host: localhost 
```

注意：添加的最后一行用于指定主机。在更新到 Yosemite 之前，我从来不需要以这种方式指定主机。

希望这可以帮助某人。

干杯

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-02-23T07:29:36.150

检查数据库的状态：

```
service postgresql status 
```

如果数据库没有运行，启动数据库：

```
sudo service postgresql start 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-12-13T21:29:24.633

你能检查你的 postgresql.conf 文件吗？

您的 postgres 在哪个端口上运行？

我认为它没有在端口 5432 上运行。如果不将其更改为 5432

或在终端使用

```
psql -U  postgres -p YOUR_PORT_NUMBER database_name 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-10-06T16:04:26.800

我对 Django 有这个问题。

通过将主机名显式设置为“localhost”来修复它。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-03-27T09:17:49.477

对于 RubyOnRails 应用添加`localhost` 如果您使用自定义 Postgresql 版本

```
# config/database.yml
default: &default
  host: localhost 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-09-13T09:10:01.423

我这样做是为了：

```
dpkg-reconfigure locales 
```

并选择您喜欢的语言环境

```
pg_createcluster 9.5 main --start 
```

（9.5 是我的 postgresql 版本）

```
/etc/init.d/postgresql start 
```

然后它字！

```
sudo su - postgres
psql 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-11-11T19:41:59.503

如果您有上述问题，但您是从 Yosemite 升级的，则需要采用不同的方法，因为升级解决方案可能会破坏一些文件。[安装最新版本的 OS X（Yosemite 或 El Capitan）后，“pg_tblspc”缺少](https://stackoverflow.com/questions/25970132/pg-tblspc-missing-after-installation-of-os-x-yosemite)更多详细信息。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-01-23T12:27:29.577

```
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket"/var/pgsql_socket/.s.PGSQL.5432"? 
```

我不断收到上述错误，上述解决方案均不适合我。最后，以下解决方案解决了我在 Mac OS X 上的问题

使用 brew 安装 postgres

```
brew install postgres 
```

安装冲泡服务

```
brew tap homebrew/services 
```

将 postgres 作为后台服务启动

```
brew services start postgresql 
```

手动停止 postgres

```
brew services stop postgresql 
```

我们也可以使用 brew services 来重启 Postgres

```
brew services restart postgresql 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-09-07T06:36:35.390

检查 postgres 服务器是否正在使用以下代码运行

```
sudo service postgresql status 
```

如果 postgres 服务器处于非活动状态，请编写以下命令。

```
sudo service postgresql start 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-08-18T09:32:50.987

```
apt-get install postgres-xc-client
apt-get install postgres-xc 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-06-03T09:23:03.433

首先删除已安装的 postgres：

```
sudo apt-get purge postgr*
sudo apt-get autoremove 
```

然后安装“突触”：

```
sudo apt-get install synaptic
sudo apt-get update 
```

然后安装 Postgres

```
sudo apt-get install postgresql postgresql-contrib 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-05-15T05:03:05.477

我的电脑死机并自行重新启动后出现此错误。在此页面上没有找到适合我的解决方案，而是在另一个具有相同错误[psql: could not connect to server: No such file or directory (Mac OS X)的](https://stackoverflow.com/questions/13573204/psql-could-not-connect-to-server-no-such-file-or-directory-mac-os-x#answer-13573207)*评价很高的*SO 问题上。答案：只需删除此文件，然后就可以了。在执行此操作之前，请注意有关杀死 postgres 进程的链接答案的警告，否则您可能会永久损坏您的数据库。`/usr/local/var/postgres/postmaster.pid``brew services restart postgresql`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-12-14T12:15:18.400

我花了一段时间，但在浏览了所提供的建议并完成了额外的网络搜索后，我终于能够完成这项工作。我使用了 Mactasia 创建的以下 YouTube 视频中的信息：

[http://www.youtube.com/watch?v=y1c7WFMMkZ4](http://www.youtube.com/watch?v=y1c7WFMMkZ4)

当我这样做时，我看到了以 .lock 作为扩展名的文件。但是，当我继续使用 PostgreSQL 处理 Rails 应用程序时，尝试启动 Rails 服务器时仍然出现错误。这次我得到了一个权限被拒绝的错误。这时我才想起我不仅必须更改 plist 中的 listen_addresses，而且还必须将 unit_socket_permissions 更改为 0777。我还以 root 身份登录以更改 var/pgsql_socket 文件夹的权限，我可以在该文件夹中访问它用户级别。Postgres 现在工作正常。我正在从我的 SQL 备份中重新加载我的数据。

我不明白的是，当我打开 wiki 时，PostgreSQL 应该在我执行 sudo serveradmin fullstatus postgres 时工作，但我仍然收到错误。那好吧。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-10-14T17:38:20.910

文件权限对 Mac OS 拥有的 Postgres 数据库有限制。这些权限在重新启动或 Postgres 重新启动后被重置：例如 serveradmin start postgres。

因此，暂时重置权限或所有权：

```
sudo chmod o+rwx /var/pgsql_socket/.s.PGSQL.5432
sudo chown "webUser"  /var/pgsql_socket/.s.PGSQL.5432 
```

权限重置不安全，因此请安装您拥有的数据库版本以获得解决方案。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-12-04T21:47:25.593

我刚刚创建了一个对我有用的新集群​​，我使用的是（PostgreSQL）9.3.20：

```
sudo pg_createcluster 9.3 main --start 
```

# c# - 如何重构这个 switch 语句？

> ID：13868731
> 
> 赞同：4
> 
> 时间：2012-12-13T21:25:22.117
> 
> 标签：c#, refactoring, switch-statement

```
string liquidClass = string.Empty;

switch (cmbLiquidClass.Text)
{
    case "LiquidClass1":
        liquidClass = Settings.Default.LiquidClass1;
        break;
    case "LiquidClass2":
        liquidClass = Settings.Default.LiquidClass2;
        break;
    case "LiquidClass3":
        liquidClass = Settings.Default.LiquidClass3;
        break;
    case "LiquidClass4":
        liquidClass = Settings.Default.LiquidClass4;
        break;
    case "LiquidClass5":
        liquidClass = Settings.Default.LiquidClass5;
        break;
    case "LiquidClass6":
        liquidClass = Settings.Default.LiquidClass6;
        break;
    case "LiquidClass7":
        liquidClass = Settings.Default.LiquidClass7;
        break;
    case "LiquidClass8":
        liquidClass = Settings.Default.LiquidClass8;
        break;
    case "LiquidClass9":
        liquidClass = Settings.Default.LiquidClass9;
        break;
} 
```

试图进入一个局部变量当前类的内容。由于字符串的工作方式（表现得像值类型），我不能使用字典。有什么方法可以重构它，以便不需要这么多行来找到所选的液体类？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T21:40:56.680

您可以使用属于`Settings.Default`（使用 .Net 4.0 测试）的索引器：

```
var liquidClass = Settings.Default[cmbLiquidClass.Text].ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:30:45.557

您可以使用一些 lambda 魔法轻松地将其转换为字典。

```
Dictionary<string, Func<string>> stringsToSettings = new ...
stringsToSettings.Add("LiquidClass1", () => Settings.Default.LiquidClass1);

var liquidClass = stringsToSettings["LiquidClass1"](); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T21:35:31.343

我假设您正在研究一种将字符串“转换”为类名的方法。

您可以使用反射，它允许您按名称查找类，但它很慢，如果您决定在未来版本中重命名您的类，您的代码将无法工作。

另一种方法是在初始化的某个点有一个查找字典（诅咒词！），它将每个类绑定到一个字符串。

# java - java web应用程序的即时LESS编译器？

> ID：13868734
> 
> 赞同：15
> 
> 时间：2012-12-13T21:25:36.157
> 
> 标签：java, css, jakarta-ee, servlets, less

我正在寻找一种在开发过程中按需在服务器端编译 CSS LESS 文件的方法。例如，如果浏览器向 /assets/css/foo.css 发出请求，我希望服务器注意到有一个 /assets/css/foo.less 文件，然后编译该文件并返回结果 css。我猜一定有一个LESS servlet可以做到这一点？

我正在使用 Spring MVC 应用程序运行 tomcat 7

如何配置 Java Web App 以进行动态 LESS 编译？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T21:32:32.210

我认为您正在寻找的是[Servlet Filter](http://www.oracle.com/technetwork/java/filters-137243.html)。我**不**知道有一个现成的可以进行 LESS 编译并且会开始使用[lesscss-java](https://github.com/marceloverdijk/lesscss-java)进行编译的，但是现在我可以看到有一个更大的项目，名为[Web Resource Optimizer for Java-wro4j](http://wro4j.github.io/wro4j/)，具有服务器端[LESS 支持](http://code.google.com/p/wro4j/wiki/LessCssSupport)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T21:54:09.653

在构建 webapp 期间，首先将 less 文件编译为 css 文件会**更简单（也更有效）。**
例如，在使用**Maven**时，我们使用[lesscss-maven-plugin](https://github.com/marceloverdijk/lesscss-maven-plugin)（*编译*目标，*进程源*阶段）从 less 文件生成 css 文件。然后只使用*css*文件并将其打包在 webapp 中。动态使用的文件*不少*。
另一个优点是在部署 webapp 之前编译的文件更少，因此可以更快地检测到编译错误。

pom.xml 中的配置示例：

```
<plugin>
    <groupId>org.lesscss</groupId>
    <artifactId>lesscss-maven-plugin</artifactId>
    <version>1.3.0</version>
    <configuration>
        <sourceDirectory>${project.basedir}/src/main/webapp/less</sourceDirectory>
        <outputDirectory>${project.build.directory}/${project.build.finalName}/css</outputDirectory>
        <compress>true</compress>
        <includes>
            <include>main.less</include>
        </includes>
    </configuration>
    <executions>
        <execution>
            <goals>
                <goal>compile</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-16T23:18:33.663

我们所做的是我们有两种模式：开发和生产。

对于 dev，使用官方的 less css js 编译器，它可以即时编译：

```
<link type="text/css" rel="stylesheet/less" href="${...}/style.less" />
<script>(window.less = window.less || {}).env = 'development';</script>
<script src="${staticContext}/lib/less-1.3.3.js"></script> 
```

在您的 HTML 中

对于 prod，请使用[https://github.com/marceloverdijk/lesscss-maven-plugin编译的样式](https://github.com/marceloverdijk/lesscss-maven-plugin)

```
<link type="text/css" rel="stylesheet" href="${staticContext}/css/style.css" /> 
```

# c# - 如何转换不同格式的日期

> ID：13868738
> 
> 赞同：0
> 
> 时间：2012-12-13T21:25:43.850
> 
> 标签：c#, date, date-format

所以我有一个字符串，它可能是不同格式的日期。我想创建一种方法，尝试每个方法直到成功，然后返回转换后的日期，或者如果它不匹配任何格式则抛出错误。我写了这个：

```
private string ConvertDate(string toConvert)
{
    if (string.IsNullOrEmpty(toConvert)) { return ""; }

    DateTime date;
    bool success = DateTime.TryParseExact(toConvert,
            "MMddyy",
            new CultureInfo("en-US"),
            DateTimeStyles.None,
            out date);

    if (!success)
    {
        success = DateTime.TryParseExact(toConvert,
            "MMddyyyy",
                new CultureInfo("en-US"),
            DateTimeStyles.None,
            out date);
    }
    if (!success)
    {
        success = DateTime.TryParseExact(toConvert,
            "MM/dd/yy",
            new CultureInfo("en-US"),
            DateTimeStyles.None,
            out date);
    }
    if (!success)
    {
        success = DateTime.TryParseExact(toConvert,
            "MM/dd/yyyy",
            new CultureInfo("en-US"),
            DateTimeStyles.None,
            out date);
    }
    if (!success) throw new Exception("Date formats are not recognized");

    return date.ToString();
} 
```

它有效，但我觉得写这一切很愚蠢，我认为必须有一种更简单的方法来一次检查许多不同的日期格式。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:46:48.640

这至少更容易维护。尽管函数名称具有误导性。它可能应该类似于 StandardizeDateFormat。

```
private string ConvertDate(string toConvert)
{
    if (string.IsNullOrEmpty(toConvert)) { return ""; }

    string[] dateFormats = new string[]{"MMddyy","MMddyyyy","MM/dd/yy","MM/dd/yyyy"};
    DateTime date;
    bool success = false;
    for(int i = 0;i<dateFormats.Length &&!success;i++)
    {
        success = DateTime.TryParseExact(toConvert,
        dateFormats[i],
            new CultureInfo("en-US"),
            DateTimeStyles.None,
            out date);
    }
    if (!success) throw new Exception("Date formats are not recognized");

    return date.ToString();
} 
```

编辑：实际上，我可能会像这样进一步简化它

```
private string ConvertDate(string toConvert)
{
    if (string.IsNullOrEmpty(toConvert)) { return ""; }

    string[] dateFormats = new string[]{"MMddyy","MMddyyyy","MM/dd/yy","MM/dd/yyyy"};
    DateTime date;
    for(int i = 0;i<dateFormats.Length ;i++)
    {
        if(DateTime.TryParseExact(toConvert, dateFormats[i], new CultureInfo("en-US"), DateTimeStyles.None, out date))
            return date.ToString();
    }
    throw new Exception("Date formats are not recognized");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T22:01:12.477

尝试这样的事情。假设`MM`始终是第一个，年份是`2000 or later`（对于`yy`格式）

```
string date = "10/25/2011";
string[] arr = date.ToArray() 
              .Where(ch => ch > 47 && ch < 58 ) //Filter out all but numbers
              .Select(s => s.ToString()).ToArray(); 

if(arr.Length >5)
{
   string ISOformattedDate = string.Format( arr.Length == 6 ? 
          "{4}{5}-{0}{1}-{2}{3}T00:00:00" : 
          "{4}{5}{6}{7}-{0}{1}-{2}{3}T00:00:00", arr);
   DateTime mydate = Convert.ToDateTime(ISOformattedDate);
} 
```

# http - 使用 HTTP Post 从客户端流式传输数据

> ID：13868742
> 
> 赞同：11
> 
> 时间：2012-12-13T21:25:57.403
> 
> 标签：http, post, stream, restlet

我想将数据从客户端流式传输到服务器。

我的应用程序将音频数据流式传输到服务器。我不知道当我开始流式传输音频时会持续多久。我想通过在记录数据时传输数据来减少延迟。上传完所有数据后，我将对其进行处理。

所以，我想要的是一个 HTTP POST，其中流式传输正文。在客户端，POST 将在数据可用时发送。在服务器端，我希望它像普通的 POST 一样到达，并带有完整的收集数据主体。

我目前正在使用 Restlet，并将我的流实现为 Restlet 框架的分块 POST。

但是，我找不到允许我开始 POST，然后开始流式传输数据的客户端 API。

我没有找到任何有用的搜索存档。任何人都可以在这里给我一个指针。HTTP POST 可以这样使用吗？我可以为此使用 Restlet 吗？是否有另一种标准模式/API 用于从客户端流式传输到服务器？

非常感谢提前彼得

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T13:27:15.283

将为后面的人回答我自己的问题。

这是一个关于使用 Apache HttpClient 流式传输请求的好教程

搜索“请求流式传输：”

[http://hc.apache.org/httpclient-3.x/performance.html#Request_Response_entity_streaming](http://hc.apache.org/httpclient-3.x/performance.html#Request_Response_entity_streaming)

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-12-13T22:14:22.683

> 我找不到允许我开始 POST 的客户端 API

您总是可以[使用浏览器](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)。服务器端它只是相同的aa文件上传。

# delphi - Delphi中对RC文件的依赖检查

> ID：13868748
> 
> 赞同：7
> 
> 时间：2012-12-13T21:26:09.087
> 
> 标签：delphi, delphi-ide

如果修改了 RC 文件，Delphi 将重新编译它。如果 RC 文件具有引用已更改文件的 RCDATA 或 BITMAP 声明，则 Delphi 不会再次将 .RC 文件重新编译为 .RES，直到我通过删除 .RES 文件或执行“触摸”（修改文件时间戳）来强制它在顶级 .RC 文件上。

这是一个示例 TEST.RC 文件：

```
SAMPLE   RCDATA "File.txt" 
```

修改 TEST.RC 时，将导致重新编译，当修改“File.txt”时，Delphi 不会在“编译”上重新编译资源。我不愿意只使用“构建”，因为它将我的时间从几秒钟增加到几分钟。

有没有人让 Delphi 与 .RC 文本文件和依赖项一起正常工作？授予某些人添加资源并且从不更改它们，但我已经开始使用 .RC 文件来处理我可能经常更改的内容，例如 .RC 文件中 RCDATA 部分中的二进制或文本数据。

请注意，尝试在预构建或构建后放置“删除 .res”步骤似乎会破坏 Delphi IDE/编译器。在 IDE 外部构建时，我可以从外部解决这个问题（在运行 msbuild 之前始终删除某些 .res 文件），但在 IDE 内部，Delphi 并没有给我太多选择。

有没有人有解决方案？（我在 Delphi 2007 中遇到了这个问题，但是任何适用于从 2007 到 XE3 的任何版本的 Delphi 的解决方案都将受到欢迎。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:05:44.380

这不是一个完美的答案，因为下面的示例没有进行依赖性检查，但是资源没有足够频繁地重建的基本问题通过每次都重建来解决，这已经足够好了。

最后，这比 Delphi 的内置行为更正确，后者从 (a) 在您从 {$R foo.res foo.rc} 声明构建时没有足够频繁地重新编译，当您在 IDE 中使用它时，它会变得更糟(b) 如果您在 .dpr 文件中包含 {$R foo.res foo.rc} 声明，则根本不从命令行构建。

因此，尽管如此，这是一个有效的预构建步骤，它执行 David 建议我做的事情：

```
 call $(PROJECTDIR)\SubDir\foo.cmd $(PROJECTDIR) 
```

这是我的 foo.cmd 包含的内容：

```
 cd %1\SubDir
  rc.exe foo.rc
  echo compiled foo RCDATA 
```

对于任何想知道 foo.rc 可能包含什么的人来说，它可能看起来像这样：

```
 SQL_QUERY_1  RCDATA  "SqlDir1\MYSQL.SQL" 
```

勘误表：

我发现`{$R foo.res foo.rc}`只有在 IDE 中才能在 Delphi 2007 中正确构建。从命令行 MSBUILD，它不会构建。您只会得到“DCC ERROR 1”并且构建中止而没有真正的错误消息。您可能有兴趣知道，当 RC.exe 返回错误级别时，delphi MSBUILD 编译神秘中止而在错误日志或标准输出中没有任何错误输出的原因之一。RC.exe 输出一个真正的错误消息（嘿，Delphi，你给我发送了无效的命令行参数，我放弃了），或者 Delphi`DCC32`没有将它转发给你，或者它以某种方式被吞噬并且没有返回给用户，这样他们就可以有足够的信息来了解他们的构建为什么会神秘地中断。讨厌的小 msbuild-dcc32 集成错误功能，那个。

而不是 {$R subdir\foo.res subdir\foo.rc}，你应该在你的 DPR 中有这个：

```
 {$R SubDir\foo.res} 
```

这意味着“链接该二进制资源并且不要尝试重新编译，因为我们已经这样做了”。以上所有内容只是为了明确大卫在评论中的建议。给大卫的帽子小费。

# java - 在java中将整数数组转换为对象数组

> ID：13868753
> 
> 赞同：2
> 
> 时间：2012-12-13T21:26:23.323
> 
> 标签：java, arrays, casting

我使用的是 JDK 1.6，但以下代码段中的第二行在 Eclipse 中给出了编译错误：

```
long[] css = new long[]{1, 2, 3};
Object[] objs = Arrays.copyOf(ccs, ccs.length, Object[].class ); 
```

错误是：Arrays 类型中的方法 copyOf(long[], int) 不适用于参数 (long[], int, Class)

铸造是必需的

```
org.hibernate.criterion.Restrictions.in("PropertyName", objs ); 
```

有什么想法或推荐的方法吗？

TIA。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T21:30:53.173

你不能在java中做到这一点。`long`是原始类型，因此不扩展`Object`。`Long`, 它是 , 的包装类`long`，并且可以强制转换为`Object`. 要从 a 创建一个`Long[]`，`long[]`您需要遍历每个值`long[]`并将其复制到`Long[]`：

```
long[] primitiveLong;
Long[] wrappedLong = new Long[primitiveLong.length];
for (int i=0; i<primitiveLong.length; i++) {
    wrappedLong[i] = primitiveLong[i];
} 
```

然后你可以把它转换成一个数组`Object`：

```
Object[] objs = wrappedLong; 
```

或者您甚至可以`Object`直接制作类型的 WrappedLong，这样您就不需要强制转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T21:27:16.127

使用 Apache Commons'`ArrayUtils.toObject`正是这样做的。

# sql-server-2008 - SQL 连接一个表两次，一次是外键匹配，然后是非匹配

> ID：13868755
> 
> 赞同：0
> 
> 时间：2012-12-13T21:26:51.210
> 
> 标签：sql-server-2008, join, common-table-expression, multiple-tables

我有以下表结构：

```
table: user
user_id | join_date
    101 | '2012-4-13'
    102 |  '2012-6-4'
    103 |        NULL
    104 |        NULL

table: job
job_id | user_id
    20 |      101
    21 |      103 
```

我想返回一个包含以下内容的用户记录结果集：

1.  在作业表中匹配的所有用户的结果。
2.  join_date 为空的所有用户的结果，并且在作业表中没有记录。

这是我希望看到的 user_id 的结果集：

```
user_id
    101 <-- has a job
    103 <-- has a job
    104 <-- never joined, AND also does not have a job 
```

我需要使用公用表表达式来执行此操作，还是可以在子查询中执行此操作？

请注意，为简洁起见，我省略了实际细节。这不是一个简单的内连接案例。

以下是我单独运行的每个查询：

这是返回正确结果的查询 #1

```
SELECT DISTINCT u.*   
FROM [user] u, job uj
WHERE u.user_id = uj.user_id 
```

这是返回正确结果的查询 #2

```
SELECT DISTINCT u.*   
FROM [user] u  
FULL JOIN job uj ON u.user_id = uj.user_id   
WHERE u.join_date IS NULL AND uj.user_id IS NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:31:02.177

要获得``101`, `103`& `104`，请尝试：

```
 select distinct u.user_id 
    from [user] u LEFT JOIN job j
    on u.user_id = j.user_id
    where (u.join_date is not null and j.job_id is not null)
          or u.join_date is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:37:06.187

这应该这样做：

```
select u.user_id from [user] u
left join job j on u.user_id = j.user_id
where j.job_id is not null or (j.job_id is null and u.join_date is null) 
```

编辑：这在逻辑上是相同的并且“更简单”，但第一种方式“读取”就像问题陈述：

```
select u.user_id from [user] u
left join job j on u.user_id = j.user_id
where j.job_id is not null or  u.join_date is null 
```

# javascript - Backbone.js 中的动态 el 值

> ID：13868758
> 
> 赞同：0
> 
> 时间：2012-12-13T21:26:55.150
> 
> 标签：javascript, backbone.js

我想使用诸如 post-header-id-23 之类的值作为 el id 值。我只是要像这样使用jQuery：

```
$('#post-header-id-' + this.model.id).after(compiled_template); 
```

但看起来事件并没有连接起来。有没有办法解决这个问题，以便 jQuery 选择器不会抑制普通选择器。或者，它看起来像：

```
el: $('#post-header-id' + this.model.id ), 
```

但是我将如何在渲染函数中进行设置？还是我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:33:38.250

这里的关键是你必须决定什么*时候*是决定什么是“el”的正确时间；不幸的是，您不能只给 Backbone 一个选择器并期望它神奇地保持最新。

所以，记住这一点，如果“渲染”是设置你的 el 的正确时间（通常初始化或渲染是正确的位置），你只需要使用 Backbone 的（有点新的）`setElement`函数：

```
var SomeView = Backbone.View.extend({
    render: function() {
        this.setElement($('#post-header-id' + this.model.id));
        return this;
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T02:06:13.120

从 0.9.9 版本开始

> 在声明视图时，如果您希望在运行时确定它们的值，现在可以将选项、el 和 tagName 定义为函数。

这样的事情应该这样做：

```
id: function() {
  return '#post-header-id' + this.model.id
} 
```

# java - Eclipse 中的餐巾纸自定义 LookAndFeel

> ID：13868759
> 
> 赞同：0
> 
> 时间：2012-12-13T21:26:57.890
> 
> 标签：java, swing, look-and-feel

**前提**

我对 GUI 编程还很陌生，但我正在寻找一种通过 Eclipse 将 Napkin 外观和感觉放到我的应用程序中的方法。

**到目前为止我所做的**

我环顾四周，从我所看到的情况来看，我需要将餐巾 .jar 放入我的构建路径中。我尝试通过右键单击导航器并选择导入-> 文件系统并突出显示与 Napkin 关联的 .jar 来执行此操作。

在我的 Main 中，我添加了以下代码：

```
try{
    UIManager.setLookAndFeel("net.sourceforge.napkinlaf.NapkinLookAndFeel");
}catch(Exception e){
    e.printStackTrace();
} 
```

我认为应该应用餐巾外观和感觉，不幸的是，我不断收到此错误：

```
java.lang.ClassNotFoundException: net.sourceforge.napkinlaf.NapkinLookAndFeel
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at javax.swing.SwingUtilities.loadSystemClass(Unknown Source)
    at javax.swing.UIManager.setLookAndFeel(Unknown Source)
    at yulfy.alterd.FrameTest.main(FrameTest.java:8) 
```

**问题**

我到底做错了什么？（如果它非常明显，我很抱歉！）

谢谢你的时间！

**链接**

餐巾纸网站： http: [//napkinlaf.sourceforge.net/](http://napkinlaf.sourceforge.net/)

**笔记**

*   似乎最新的是 1.2 而不是 alpha001，它是 Sourceforge 上第一个可用的文件。

*   如果需要任何进一步的澄清/信息，请不要犹豫发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:11:14.657

右键单击您的项目，转到构建路径，单击“添加外部 jar”并选择 jar

# ios - 需要帮助转换从 NSMutableArray 检索的对象并显示其参数

> ID：13868763
> 
> 赞同：0
> 
> 时间：2012-12-13T21:27:08.263
> 
> 标签：ios, uitableview, nsmutablearray

我有一个 NSMutableArray，其中包含“MyClass”类型的对象列表，每个对象都有一个名为“name”的参数，它的类型为“NSString”。我需要在 TableView 中显示此列表，并且在我的“cellForRowAtIndexPath”方法中，我有以下行：

```
cell.textLabel.text = [[SingletonClass sharedInstance].myArray objectAtIndex:[indexPath row]].name; 
```

在这里，SingletonClass 是我的 DataLayer，myArray 是包含对象列表的 NSMutableArray。我收到错误消息：在“id”类型的对象上找不到“属性名称”，因此我需要弄清楚如何正确转换为“MyClass”，并检索其“名称”参数以便显示在表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:28:49.513

```
((MyClass*)[[SingletonClass sharedInstance].myArray objectAtIndex:[indexPath row]]).name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:30:20.973

如果你想要丑陋的代码：

```
cell.textLabel.text = (MyClass *)([[SingletonClass sharedInstance].myArray objectAtIndex:[indexPath row]]).name; 
```

如果您想要更易读的代码，请改用消息发送样式调用：

```
cell.textLabel.text = [[[SingletonClass sharedInstance].myArray objectAtIndex:[indexPath row]] name]; 
```

# wcf - 尝试从远程专用队列中提取时，远程计算机不可用

> ID：13868765
> 
> 赞同：0
> 
> 时间：2012-12-13T21:27:30.807
> 
> 标签：wcf, msmq, was, msmqintegrationbinding

我有一个远程私人队列，我可以毫无问题地写入。我正在尝试创建一个 WAS 托管的 WCF 服务来提取数据进行处理。我需要服务在与队列不同的机器上；我目前将它与写作服务放在同一个站点 - 相同的应用程序池但不同的应用程序。

我的目标队列被调用`PersistenceService/Log.svc`并且是事务性的和经过身份验证的。我的服务正在运行`http://appdev.me.com/PersistenceService/Log.svc`。以下包含我的端点和绑定：

```
<bindings>
  <msmqIntegrationBinding>
    <binding exactlyOnce="true" durable="true" serializationFormat="Xml" maxReceivedMessageSize="2147483647"
             closeTimeout="00:00:30" sendTimeout="00:00:30" receiveTimeout="00:00:30" timeToLive="24:00:00"
             receiveRetryCount="1" maxRetryCycles="1" retryCycleDelay="00:10:00" receiveErrorHandling="Move">
      <security mode="Transport" />
    </binding>
  </msmqIntegrationBinding>
</bindings>

<services>
  <service name="Me.Logging.Persistence.PersistenceService">
    <endpoint address="msmq.formatname:DIRECT=OS:DIRECT=OS:meserver\private$\persistenceservice/log.svc"
              binding="msmqIntegrationBinding"
              bindingNamespace="http://me.logging/services/2012/11"
              contract="Me.Logging.Service.Shared.Service.Contracts.ICatchAll" />
  </service>
</services> 
```

我得到的错误如下：

```
An error occurred while opening the queue:The remote computer is not available. (-1072824215, 0xc00e0069). The  message cannot be sent or received from the queue. Ensure that MSMQ is installed and running. Also ensure that the queue is available to open with the required access mode and authorization. 
```

我通过关闭 McAfee 为通信[扫清了道路，因此它不会阻塞流量。](http://blogs.msdn.com/b/johnbreakwell/archive/2008/04/29/clear-the-way-msmq-coming-through.aspx)我已暂时授予对队列的匿名登录访问权限 - 尽管它应该作为我正在写入队列的同一用户进入，并且该用户对队列具有完全权限。

WCF 跟踪不会显示除此错误之外的任何内容。任何关于在哪里看的想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T16:00:03.637

您的端点看起来不正确。你有两次“DIRECT = OS：”。尝试：

```
<endpoint address="msmq.formatname:DIRECT=OS:meserver\private$\persistenceservice/log.svc"
          binding="msmqIntegrationBinding"
          bindingNamespace="http://me.logging/services/2012/11"
          contract="Me.Logging.Service.Shared.Service.Contracts.ICatchAll" /> 
```

# xml - 从 XML 更新 Access 中的表

> ID：13868773
> 
> 赞同：1
> 
> 时间：2012-12-13T21:27:54.680
> 
> 标签：xml, database, vba, ms-access

Access 2007 中是否可以通过从 XML 文件加载数据来更新记录？例如，我有许多产品，每个产品都有一个唯一的条形码。当我读取 XML 文件时，如果条码不在数据库中，则应将其添加，但如果在数据库中，则应更新与该条码关联的字段。这可能与Access有关，还是我应该在其他地方寻找？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:22:19.350

您可以使用[Application.ImportXML 方法](http://msdn.microsoft.com/en-us/library/office/bb237973%28v=office.12%29.aspx)将数据导入 Access 表。从那里，Access SQL 很容易识别主条形码表中的哪些现有记录需要更改并`UPDATE`相应地更改它们，或者是`INSERT`新的条形码记录。然而，`ImportXML`除了最简单的 XML 模式之外，其他所有模式都令人窒息。

或者，您可以将 XML 文档作为 MSXML DOMDocument 打开，并使用其方法提取所需的值，然后与存储的条形码记录进行比较，`UPDATE`或`INSERT`根据需要进行比较。如果你想走那条路，你可以在这个 SO 答案中找到一些提示：[stackoverflow.com/a/3398999/77335](https://stackoverflow.com/a/3398999/77335)

# php - 比较是否与希伯来字母

> ID：13868778
> 
> 赞同：2
> 
> 时间：2012-12-13T21:28:20.090
> 
> 标签：php, hebrew

我编写的代码只适用于英文字母。当我尝试用希伯来字母来做这件事时，我得到了错误。

编码：

```
<?php
$idan="emr";
$firstletter = mb_substr($idan, 0, 1, 'UTF-8');
if ($firstletter=='e') 
echo "tov";
else echo "lo tove";
?> 
```

工作好。但代码：

```
<?php
$idan="אבהבה";
$firstletter = mb_substr($idan, 0, 1, 'UTF-8');
if ($firstletter=='א') 
echo "tov";
else echo "lo tove";
?> 
```

不工作，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:42:14.067

你知道`mb_substr`从左到右有效吗？（希伯来语是从右到左写的吗？）因此，您正在阅读的第一个字符`ה`不是`א`. 要获取右边的第一个字母（最后一个），请`-1`用作起始索引：

```
$firstletter = mb_substr($idan, -1, 1, 'UTF-8'); 
```

您还可以使用`mb_internal_encoding("UTF-8");`为每个调用设置编码，而不是传播它（如果您对`mb_`函数进行多次调用）

**编辑：**根据您的评论，这是一个根据语言处理字母的脚本的快速示例：

```
$desiredLetter = 'e';
$startIndex = 0;

// some condition to figure out the language
if(mb_detect_encoding($idan, 'ASCII', true) == FALSE)
{
    $desiredLetter = 'א';
    $startIndex = -1;
}

$firstletter = mb_substr($idan, $startIndex, 1, 'UTF-8');
if ($firstletter == $desiredLetter) 
    echo "tov";
else 
    echo "lo tove"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T07:25:11.480

当我将它保存到 PHP 文件并运行它时，您的代码可以正常工作（*例如*打印）。`tov`如果您看到不同的结果，您可能需要检查您的文本编辑器设置并确保您将文件保存为 UTF-8。

# c# - TraceSource 名称如何在 .NET 程序中解析？

> ID：13868782
> 
> 赞同：6
> 
> 时间：2012-12-13T21:28:32.760
> 
> 标签：c#, .net, app-config, tracesource

TraceSource 类的 MSDN 文档有一个示例，说明 app.config 文件如何列出 TraceSource 实例的信息：

[http://msdn.microsoft.com/en-us/library/system.diagnostics.tracesource.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracesource.aspx)

但是，没有关于 TraceSource 值存储在哪里的信息......现有的 TraceSource 对象存储在哪里？它们是什么时候（编辑：它们的意思是配置的实例）构造的？TraceSource 对象如何知道在创建 TraceSource 对象时如何返回命名实例（编辑：应该配置实例）而不是新实例？我可以在不使用反射的情况下找到现有 TraceSource 对象的列表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:07:01.880

TraceSource 类保留一个私有的源列表。但除了 TraceSource 类本身之外，任何人都无法访问。

.config 文件部分旨在为跟踪源配置*侦听器。*因此，当您在代码中创建 TraceSource 时，它​​会使用您在构造函数中传递的名称并查看 .config 文件以查看应该自动添加或删除哪些侦听器。

所以代码创建一个源，.config 文件配置它。不是相反，.config 文件不能创建源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:07:11.997

> TraceSource 对象存储？

在静态集合中（因此每个应用程序域一个副本），但在 .NET 版本中，它们与弱引用一起存储，如果创建太多可能导致内存泄漏。如果我没记错的话，单声道版本没有这个问题。

有关详细信息，我建议阅读源代码——Mono 源代码更容易追踪，因为它们是正式开放的。

> 它们是什么时候建造的？

当正在编写跟踪的应用程序写入 TraceSource source = new TraceSource();

> TraceSource 对象如何知道在创建 TraceSource 对象时如何返回命名实例而不是新实例？

没有把握。

> 我可以在不使用反射的情况下找到现有 TraceSource 对象的列表吗？

过去可以使用 RedGate Reflector 做到这一点。System.Net 和 WCF 库使用 Systems.Diagnostics，但很少有人这样做。API 中没有办法只询问当前跟踪源的运行时，这将是一个不错的功能。

# drag-and-drop - 拖放到 Fabric.js 画布中

> ID：13868783
> 
> 赞同：14
> 
> 时间：2012-12-13T21:28:34.943
> 
> 标签：drag-and-drop, fabricjs

如何将项目（如图像或其他画布中的其他对象）拖放到由 fabricjs 管理的画布中？我找到了许多如何在画布内移动项目的示例，但我想将项目从外部元素拖放到画布中。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-18T17:14:33.340

既然你问了一个例子，而我自己还没有尝试过，这里是：

# [示例小提琴](http://jsfiddle.net/natchiketa/w8kkc/)

* * *

# 标记

```
<div id="images">
    <img draggable="true" src="http://i.imgur.com/8rmMZI3.jpg" width="250" height="250"></img>
    <img draggable="true" src="http://i.imgur.com/q9aLMza.png" width="252" height="295"></img>
    <img draggable="true" src="http://i.imgur.com/wMU4SFn.jpg" width="238" height="319"></img>
</div>

<div id="canvas-container">
    <canvas id="canvas" width="800" height="600"></canvas>
</div> 
```

# JS 故障

## 1.`Fabric.canvas`实例

首先我们想要我们的画布，当然：

```
var canvas = new fabric.Canvas('c'); 
```

## 2.特征检测（可选）

不确定这是必要的，因为您拥有画布这一事实使得浏览器很可能也具有拖放功能。如果你要使用它，你可以这样做，使用[Modernizr](http://modernizr.com/)：

```
if (Modernizr.draganddrop) {
    // Browser supports HTML5 DnD.

    // Bind the event listeners for the image elements

    // Bind the event listeners for the canvas
} else {
    // Replace with a fallback to a library solution.
    alert("This browser doesn't support the HTML5 Drag and Drop API.");
} 
```

## 3\. 活动

同样，与下面的源文章不同，源元素和目标元素是不同的（在该文章的示例中，您只需`div`在同一个父容器中移动 s），因此我没有注意到某些事件是针对被拖动，但大多数都绑定到您要放入的元素。

*注意：我知道这在技术上是关于 Fabric.js 的问题，但在使用 Fabric.js 将对象添加到的上下文中，这确实是关于拖放的问题`<canvas>`，这就是为什么我要更深入一点现在关于 DnD 的东西。*

为了`<img>`

*   `dragstart`（我在这里添加了一个类来降低不透明度）
*   `dragend`（并在此处删除了该课程）

对于`#canvas-container`：

*   `dragenter`（添加了一个类来为画布容器提供漂亮的虚线）
*   `dragover`：您可以在此处设置`event.dataTransfer.dropEffect`属性以显示其中一种本机光标类型。默认设置在`'move'`此处，但我将其设置为，`'copy'`因为我实际上并没有删除`<img>`元素（实际上在小提琴中你可以，例如创建几个[McClures](http://www.youtube.com/watch?feature=player_detailpage&v=oC7TVRU5nho#t=2s)）。
*   `dragleave`（这里去掉了虚线）
*   `drop`：此事件的处理程序创建并添加`fabric.Image`对象（参见小提琴）。

```
if (Modernizr.draganddrop) {
    // Browser supports HTML5 DnD.

    // Bind the event listeners for the image elements
    var images = document.querySelectorAll('#images img');
    [].forEach.call(images, function (img) {
        img.addEventListener('dragstart', handleDragStart, false);
        img.addEventListener('dragend', handleDragEnd, false);
    });
    // Bind the event listeners for the canvas
    var canvasContainer = document.getElementById('canvas-container');
    canvasContainer.addEventListener('dragenter', handleDragEnter, false);
    canvasContainer.addEventListener('dragover', handleDragOver, false);
    canvasContainer.addEventListener('dragleave', handleDragLeave, false);
    canvasContainer.addEventListener('drop', handleDrop, false);
} else {
    // Replace with a fallback to a library solution.
    alert("This browser doesn't support the HTML5 Drag and Drop API.");
} 
```

资料来源：

*   [HTML5 Rocks - 原生 HTML5 拖放](http://www.html5rocks.com/en/tutorials/dnd/basics/)
*   [现代化](http://modernizr.com/)
*   [Web 平台文档 > DOM > 属性 - dropEffect](http://docs.webplatform.org/wiki/dom/properties/dropEffect)
*   [Web 平台文档 > DOM > 事件](http://docs.webplatform.org/wiki/dom/events)
    *   [拖动启动](http://docs.webplatform.org/wiki/dom/events/dragstart)
    *   [拖动端](http://docs.webplatform.org/wiki/dom/events/dragend)
    *   [拖拉机](http://docs.webplatform.org/wiki/dom/events/dragenter)
    *   [拖车](http://docs.webplatform.org/wiki/dom/events/dragover)
    *   [拖离](http://docs.webplatform.org/wiki/dom/events/dragleave)
    *   [降低](http://docs.webplatform.org/wiki/dom/events/drop)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-02-04T07:21:18.240

我经历了@natchiketa 的小提琴，并解决了问题，只需检查这个小提琴..

[http://jsfiddle.net/Ahammadalipk/w8kkc/185/](http://jsfiddle.net/Ahammadalipk/w8kkc/185/)

```
 window.onload = function () {

        var canvas = new fabric.Canvas('canvas');

        /* 
        NOTE: the start and end handlers are events for the <img> elements; the rest are bound to 
        the canvas container.
        */

        function handleDragStart(e) {
            [].forEach.call(images, function (img) {
                img.classList.remove('img_dragging');
            });
            this.classList.add('img_dragging');
        }

        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault(); 
            }

            e.dataTransfer.dropEffect = 'copy';
            return false;
        }

        function handleDragEnter(e) {                
            this.classList.add('over');
        }

        function handleDragLeave(e) {
            this.classList.remove('over'); 
        }

        function handleDrop(e) {               
            if (e.stopPropagation) {
                e.stopPropagation(); // stops the browser from redirecting.
            }

            var img = document.querySelector('#images img.img_dragging');

            var newImage = new fabric.Image(img, {
                width: img.width,
                height: img.height,
                // Set the center of the new object based on the event coordinates relative
                // to the canvas container.
                left: e.layerX,
                top: e.layerY
            });
            newImage.hasControls = newImage.hasBorders = false;
            canvas.add(newImage);

            return false;
        }

        function handleDragEnd(e) {
            // this/e.target is the source node.
            [].forEach.call(images, function (img) {
                img.classList.remove('img_dragging');
            });
        }

        if (Modernizr.draganddrop) {

            var images = document.querySelectorAll('#images img');
            [].forEach.call(images, function (img) {
                img.addEventListener('dragstart', handleDragStart, false);
                img.addEventListener('dragend', handleDragEnd, false);
            });

            var canvasContainer = document.getElementById("canvas-container");
            canvasContainer.addEventListener('dragenter', handleDragEnter, false);
            canvasContainer.addEventListener('dragover', handleDragOver, false);
            canvasContainer.addEventListener('dragleave', handleDragLeave, false);
            canvasContainer.addEventListener('drop', handleDrop, false);
        } else {

            alert("This browser doesn't support the HTML5 Drag and Drop API.");
        }
    } 
```

谢谢

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-16T12:11:05.863

好吧，这个问题很老了^^

我已经更新了小提琴，不，它也可以在 Firefox 中使用。

[小提琴](http://jsfiddle.net/w8kkc/486/)

```
function handleDrop(e) {
    // this / e.target is current target element.

    e.preventDefault(); //I've altert this line for FireFox 
```

# spring - 在 Spring 3-1 中，如何将 bean 引用指定为参数解析器？

> ID：13868784
> 
> 赞同：6
> 
> 时间：2012-12-13T21:28:40.100
> 
> 标签：spring, spring-mvc

这是一个关于 Spring 配置的语法问题（参考 spring-beans-3.1.xsd 和 spring-mvc-3.1.xsd）。

我有一个特定的 bean 定义 (id="SecurityRequestParametersArgumentResolver")，我想将其注册为自定义参数解析器。xml片段是：

```
<bean id="SecurityRequestParametersArgumentResolver"
    class="xxx.security.web.SecurityRequestParametersArgumentResolver">
    <property name="credentialsManager" ref="CredentialsManager" />
    <property name="tokenService" ref="TokenService" />
</bean>

... AND I would like to use a bean reference.  The following three lines don't obey the xsd-grammar ( what should be the correct tag declaration here? )
<mvc:annotation-driven>
    <mvc:argument-resolvers>
        <bean ref="SecurityRequestParametersArgumentResolver"/>
    </mvc:argument-resolvers>
</mvc:annotation-driven> 
```

...我看到的所有示例看起来都像这样，因此都在使用默认的无参数构造函数

```
<mvc:annotation-driven>
    <mvc:argument-resolvers>
        <bean class="class="xxx.security.web.SecurityRequestParametersArgumentResolver"/>
    </mvc:argument-resolvers>
</mvc:annotation-driven> 
```

重复这个问题，为了使用 bean 引用作为自定义参数解析器，Spring 语法应该是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:12:55.597

至少可以轻松解决构造函数参数问题

```
<mvc:annotation-driven>
    <mvc:argument-resolvers>
        <bean class="class="xxx.security.web.SecurityRequestParametersArgumentResolver">
           <constructor-arg value="123"/>
        </bean>
    </mvc:argument-resolvers>
</mvc:annotation-driven> 
```

但我不知道有什么方法可以在`<mvc:argument-resolvers>`. 但是根据您想要做什么，有几种解决方法。

*   使用 Bean 工厂
*   创建一个代理类来实现并将每次调用转发到另一个实例，然后您可以像普通bean一样`HandlerMethodArgumentResolver`拥有自己的代理并在该部分中注册代理。`SecurityRequestParametersArgumentResolver``<mvc:argument-resolvers>`

代理：

```
class HandlerMethodArgumentResolverProxy
       implements HandlerMethodArgumentResolver{
    HandlerMethodArgumentResolver delegate;

    publicHandlerMethodArgumentResolverProxy
                   (HandlerMethodArgumentResolver delegate){
        this.delegate=delegate;
    }

    public boolean supportsParameter(MethodParameter parameter) {
        this.delegate.supportsParameter(parameter);
    }

    //delegate for resolveArgument        
} 
```

配置：

```
<bean id="securityRequestParametersArgumentResolver"
    class="xxx.security.web.SecurityRequestParametersArgumentResolver">
    ...
</bean>

<mvc:annotation-driven>
    <mvc:argument-resolvers>
        <bean class "HandlerMethodArgumentResolverProxy">
             <constructor-arg 
                 ref="securityRequestParametersArgumentResolver"/>
        </bean>
    </mvc:argument-resolvers>
</mvc:annotation-driven> 
```

# ios - 调整 UITableViewController 的大小以在弹出窗口中显示

> ID：13868789
> 
> 赞同：1
> 
> 时间：2012-12-13T21:28:49.577
> 
> 标签：ios, uitableview, uipopovercontroller, uistoryboard

我有一个`UITableViewController`我试图在`UIPopoverController`. 不管做什么，表格视图总是在弹出框内以全尺寸显示。

在我的 StoryBoard 中，我将`UITableViewController`'s Size 设置为 Freeform。我已经`UITableView`在 Size 检查器中明确设置了 ' 的高度和宽度。

这是我设置控制器和弹出框的方法：

```
UIStoryboard* sb = [UIStoryboard storyboardWithName:@"MainStoryboard-iPad" bundle:nil];

self.settingsController = [sb instantiateViewControllerWithIdentifier:@"SettingsViewControllerID"];

self.settingsPopover = [[UIPopoverController alloc] initWithContentViewController:_settingsController]; 
```

我还尝试过明确设置控制器的弹出框大小：

```
self.settingsController.contentSizeForViewInPopover = CGSizeMake(400.0, 400.0); 
```

当我运行应用程序并激活弹出框时 - 它几乎与主屏幕一样高。

我在这里遗漏了一些明显的东西吗？

提前致谢， CS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T08:51:02.940

您可以使用以下代码更改 tableView 大小。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
      UIStoryboardPopoverSegue *popoverSegue;
      popoverSegue = (UIStoryboardPopoverSegue *)segue;
      UIPopoverController *popOverController = popoverSegue.popoverController;
      [_popOverController setPopoverContentSize:CGSizeMake(width, height)];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T22:23:29.293

UITableViewController 总是希望成为窗口的完整大小，或者弹出框（这是一种特殊的窗口）。如果您想要一个较小的表格视图，请使用 UIViewController 作为弹出框的内容控制器。然后你应该能够在 IB 中调整它的大小。

# php - 与自定义表和键名的模型关联

> ID：13868791
> 
> 赞同：3
> 
> 时间：2012-12-13T21:28:53.897
> 
> 标签：php, phpactiverecord

我正在使用[php.activerecord](http://www.phpactiverecord.org)，并且正在尝试链接两个表。

我有`contacts`和`contactCompanyLinks`。每个联系人可以在链接表中包含一行或多行。表中的字段名称不遵循任何合理的约定，但我无法更改它，因为它会破坏使用同一个表的另一个应用程序。

的主键`contacts`被调用`contactID`，外键`contactCompanyLinks`被调用`inspectorID`。

php.activerecord 做了太多的假设，我不知道如何让它将我的表链接在一起。

这是我的模型：

`Contact.php`：

```
<?php
class Contact extends ActiveRecord\Model {
    static $primary_key = 'contactID';

    static $has_many = array(
        array(
            'contactCompanyLinks',
            'class_name' => 'ContactCompanyLink',
            'foreign_key' => 'inspectorID'
        )
    );
} 
```

`ContactCompanyLink.php`：

```
<?php
class ContactCompanyLink extends ActiveRecord\Model {
    static $table_name = 'contactCompanyLinks';

    static $belongs_to = array(
        array('contact')
    );
} 
```

这看起来不错，但是当我试图排成一行时，它不起作用。我做了以下事情：

```
<?php
var_dump(Contact::find(1234)->contactcompanylinks); 
```

我打印到屏幕上的只是`NULL`！如果我尝试了其他属性，如`contactcompanylink`or`ContactCompanyLink`或`ContactCompanyLinks`，我会收到“未定义属性”错误。

`var_dump(Contact::find(1234)`工作得很好。它向我显示了`contacts`表格中的字段。

当我试图告诉它如何将 2 个表链接在一起时，如何告诉 php.activerecord 停止假设事情并听我说？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T07:54:26.360

未定义的属性错误可能来自您的`ID`. `phpactiverecord`假定，不强制所有属性为小写。

这意味着**所有字段**都应该被称为小写。例如，您的密钥应该是`inspectorid`and `contactid`。

并不是说这仅适用于列。类名（php 类）显然应该是它们实际的情况，表名也应该如此。

我总是明确定义连接的所有元素以避免该假设问题。这意味着这两个连接都将为我提供所有元素：

```
static $belongs_to = array(
  array('somename',
        'foreign_key'=>'someid',
        'primary_key'=>'id', 
        'class_name'=>'Models\\NameSpace\\YourModelClassName')
); 
```

但 . 也需要相同的字段`has_many`。中的primary`belongs_to`是OTHER表的id，外键是这个表的key（我说的key是指列名）。因为属于外键的是另一张表中的键，主键是本表中的键。

另外，请注意命名空间的双斜杠。

# ckeditor - 尝试使用 ckeditor 创建一个简单的插件

> ID：13868796
> 
> 赞同：-1
> 
> 时间：2012-12-13T21:28:57.533
> 
> 标签：ckeditor

我以前创建过插件，但我必须缺少一些简单的东西。我已经回到教程并尝试添加一个非常简单的插件。下面的代码：

我在控制台上没有收到错误，并且在编辑器中没有看到该图标

任何帮助将不胜感激

**在我的 PHP 中，我有**

```
CKEDITOR.replace( 'editor1',
    {
    toolbar : 'MyToolbar',
    customConfig : '/admin/ckeditor/my_config.js?v=5.1',
    height : '400px',
    }); 
```

my_config.js 看起来像 :: CKEDITOR.editorConfig = function( config ){ config.enterMode = CKEDITOR.ENTER_BR; 全页：真；extraPlugins : 'pdf';

```
 config.toolbar = 'MyToolbar';
    config.toolbar_MyToolbar =
[
        { name: 'document', items : [ 'Source' ] },
        { name: 'tools', items : [ 'Maximize', 'ShowBlocks','-','About','Pdf' ] }
];    

}; 
```

**插件目录中的目录结构是：**

ckeditor

-->插件

------>pdf

--------->图片

------------>pdf.png

--------->plugin.js

**和 plugin.js 看起来像：**

```
CKEDITOR.plugins.add( 'pdf', 
{
init: function( editor )
{
    editor.addCommand( 'insertPdf',
        {
            exec : function( editor )
            {    
                var timestamp = new Date();
                editor.insertHtml( 'The current date and time is: <em>' + timestamp.toString() + '</em>' );
            }
        });
    editor.ui.addButton( 'Pdf',
    {
        label: 'Insert PDF',
        command: 'insertPdf',
        icon: this.path + 'images/pdf.png'
    } );
}
} ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:44:46.967

发现了问题。在我的 my_config.js 中

```
extraPlugins : 'pdf'; 
```

代替

```
config.extraPlugins = 'pdfs'; 
```

# android - 在eclipse中构建项目时编译错误

> ID：13868798
> 
> 赞同：-2
> 
> 时间：2012-12-13T21:28:59.640
> 
> 标签：android, eclipse

我正在使用一个 android 应用程序，它使用了我的 eclipse 工作区中存在的另外两个项目的 jar 文件！android 应用程序是 api 级别 16 android 4.1.2。就在编译之前，我通过 android sdk 管理器升级了 android sdk，使我认为有必要的所有可用更新。之后，Eclipse 控制台在将应用程序编译为 android 项目时出现以下错误：

```
[2012-12-14 01:51:18 - OcrServiceSampleApp] Dx 1 error; aborting
[2012-12-14 01:51:18 - OcrServiceSampleApp] Conversion to Dalvik format failed with error 1
[2012-12-14 01:56:55 - Dex Loader] Unable to execute dex: Multiple dex files define Lmicrosoft/hawaii/hawaiiClientLibraryBase/ConditionalCompilation;
[2012-12-14 01:56:55 - OcrServiceSampleApp] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lmicrosoft/hawaii/hawaiiClientLibraryBase/ConditionalCompilation;
[2012-12-14 02:01:57 - Dex Loader] Unable to execute dex: Multiple dex files define Lmicrosoft/hawaii/hawaiiClientLibraryBase/ConditionalCompilation;
[2012-12-14 02:01:57 - OcrServiceSampleApp] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lmicrosoft/hawaii/hawaiiClientLibraryBase/ConditionalCompilation;
[2012-12-14 02:07:56 - Dex Loader] Unable to execute dex: Multiple dex files define Lmicrosoft/hawaii/hawaiiClientLibraryBase/ConditionalCompilation;
[2012-12-14 02:07:56 - OcrServiceSampleApp] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lmicrosoft/hawaii/hawaiiClientLibraryBase/ConditionalCompilation;
[2012-12-14 02:17:04 - Dex Loader] Unable to execute dex: Multiple dex files define Lmicrosoft/hawaii/hawaiiClientLibraryBase/ConditionalCompilation;
[2012-12-14 02:17:04 - OcrServiceSampleApp] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lmicrosoft/hawaii/hawaiiClientLibraryBase/ConditionalCompilation;
[2012-12-14 02:17:51 - Dex Loader] Unable to execute dex: Multiple dex files define Lmicrosoft/hawaii/hawaiiClientLibraryBase/ConditionalCompilation;
[2012-12-14 02:17:51 - OcrServiceSampleApp] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lmicrosoft/hawaii/hawaiiClientLibraryBase/ConditionalCompilation; 
```

我查看了堆栈溢出，尝试以下解决方案查看其他帖子：

-清理我的项目。

- 从再次添加的工作区中删除我的项目，然后再次清理。

- 从 bin 文件夹中删除 dexed 库，然后再次清理项目。

- 删除外部罐子。安卓罐子也是。然后使用项目修复，然后再次清理。

但仍然无法解决问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:14:58.317

创建一个空项目，添加您尝试使用的库/jar，然后导出空项目，看看会发生什么。

所以你会发现问题出在哪里。

# php - 将 PHP Simple HTML DOM 结果存储到 MySQL DB

> ID：13868799
> 
> 赞同：0
> 
> 时间：2012-12-13T21:29:03.663
> 
> 标签：php, mysql, parsing, dom

我正在尝试获取解析的数据并将其存储到数据库中。按照目前的设置方式，它仅将引用网站上的第一项存储在数据库中。我需要它循环遍历并将每个项目保存到表中的一行。我需要在哪里修改我的代码？

```
<?php

include('simple_html_dom.php');
// Create DOM from URL
$html = file_get_html('http://www.hiddenurl.com/whatever/');

// Find all article blocks
foreach ($html->find('li.search-result') as $sitelisting)
    $con = mysql_connect("localhost", "admin", "mypasshere");
if (!$con) {
    die(mysql_error());
}

mysql_select_db("dataminer", $con);

$debugquery = mysql_query("INSERT INTO extract (listing) 
VALUES ('$sitelisting')");
if (!$debugquery) {
    die(mysql_error());
}

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:34:54.807

# asp.net-mvc - MVC4 授权属性覆盖；如何通过角色？

> ID：13868801
> 
> 赞同：6
> 
> 时间：2012-12-13T21:29:13.290
> 
> 标签：asp.net-mvc, asp.net-mvc-4, authorize-attribute

我正在尝试创建自己的 [Authorize] 属性，以便我可以使用自己的授权逻辑来拥有分层角色。

如果有人`[Authorize(Roles = "Admin")]`在控制器或操作上执行我如何在我的 AuthorizeCore 函数中获取字符串“Admin”？

我正在使用这段代码：

```
public class Authorize : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        //authorize role logic
            if (true)
                return true;

        return false;
     }
    } 
```

MVC4、.net 4.5、c#、VS 2012

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T21:35:08.223

这是您面临的常见问题。

这篇文章中的建议应该在 MVC4 中工作，因为它在 MVC 3 中工作： - [ASP.NET MVC - 角色提供者的替代品？](https://stackoverflow.com/q/4837103/1437962)

```
 protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        bool isAdmin;
        if(Roles.Contains("Admin"))
           isAdmin = true;

        return isAdmin ;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:35:30.397

角色是公共财产。你应该能够做到这一点：

```
public class Authorize : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {

        if(Roles.Contains("MyRole"))
           return true;

        return false;
    }
} 
```

或者你需要做什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T21:43:33.553

如果您需要获取允许的角色列表，您可以简单地获取 Roles 属性。它将列出在属性装饰中指定的字符串。

```
public class Authorize : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var allowedRoles = Roles;
    }
} 
```

[您可以在AuthorizeAttribute 定义](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/0541d027e040#src/System.Web.Mvc/AuthorizeAttribute.cs)中看到这一点

# java - 在Java中使用一种方法对单链表进行排序

> ID：13868802
> 
> 赞同：1
> 
> 时间：2012-12-13T21:29:15.833
> 
> 标签：java, list, sorting

实现一个链表，最多存储 10 个名称，先入先出。然后实现两种方法，其中一种方法是按姓氏的字母顺序对其进行排序。这是我遇到麻烦的地方。这是我尝试过的：

1.  递归。该方法调用两个节点，比较它们，如果需要交换，然后调用自身。不适用于奇数个名称，并且往往是完整的错误。

2.  收藏，但我对它的了解还不够，无法有效地使用它。

3.  排序算法（例如冒泡排序）：我可以浏览列表，但很难让节点交换。

我的问题是：最简单的方法是什么？

```
public class List
{
    public class Link
    {
        public String firstName;
        public String middleName;
        public String lastName;
        public Link next = null;

    Link(String f, String m, String l)
    {
        firstName = f;
        middleName = m; 
        lastName = l;
    }
}

private Link first_;
private Link last_;

List()
{
    first_ = null;
    last_ = null;
}

public boolean isEmpty()
{
    return first_ == null;
}

public void insertFront(String f, String m, String l)
{
    Link name = new Link(f, m, l);
    if (first_ == null)
    {
        first_ = name;
        last_ = name;
    }
    else
    {
        last_.next = name;
        last_ = last_.next;
    }
}

public String removeFront()
{
    String f = first_.firstName;
    String m = first_.middleName;
    String l = first_.lastName;
    first_ = first_.next;
    return f + " " + m + " " + l;
}

public String findMiddle(String f, String l)
{
    Link current = first_;
    while (current != null && current.firstName.compareTo(f) != 0 && current.lastName.compareTo(l) != 0)
    {
        current = current.next;
    }
    if (current == null)
    {
        return "Not in list";
    }
    return "That person's middle name is " + current.middleName;
}
}

public class NamesOfFriends
{
    public static void main(String[] args)
    {
        List listOfnames = new List();
        Scanner in = new Scanner(System.in);

    for(int i = 0; i < 3; i++)
    {
        if(i == 0)
        {
            System.out.println("Please enter the first, middle and last name?");
            listOfnames.insertFront(in.next(), in.next(),in.next());
        }
        else
        {
            System.out.println("Please enter the next first, middle and last name");
            listOfnames.insertFront(in.next(), in.next(),in.next());
        }
    }

    System.out.println("To find the middle name, please enter the first and last name of the person.");
    System.out.println(listOfnames.findMiddle(in.next(),in.next()));
    }
} 
```

# 编辑

经过一番努力，我想出了如何对它进行排序。为此，我正在尝试实现一种删除方法，该方法可以删除列表中任何位置的节点。虽然它确实编译，但当我运行程序时它什么也不做。

```
public Link remove(String lastName)
{
    Link current_ = first_;
    Link prior_ = null;
    Link temp_ = null;
    while (current_ != null && current_.lastName.compareTo(lastName) != 0)
    {
        prior_ = current_;
        current_ = current_.next;
    }
    if (current_ != null)
    {
        if (current_ == last_)
        {
            temp_ = last_;
            last_ = prior_;
        }
        else if (prior_ == null)
        {
            temp_ = first_;
            first_ = first_.next;
        }
    }
    else
    {
        temp_ = current_;
        prior_.next = current_.next;
    }
    return temp_;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:35:03.917

2：收藏是最简单的，但在你的作业中似乎不允许

3：BubbleSort 很简单，但最出名的排序算法，但是对于你的作业来说它可能没问题

1：这与冒泡排序相同，但最好不要递归

在 BubbleSort 中，您一次又一次地循环遍历元素，直到不再需要交换，然后您就准备好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:38:29.767

收集是完成此任务的最简单方法。

*   实施`Comparable`
*   覆盖`hashcode`和`equals`
*   `Collection.sort()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T23:00:49.690

您已经实现了链表，这很好。

您是否考虑过将 MergeSort 实现为排序算法？作为分而治之的算法，你最终只会得到两个元素来形成一个列表。

合并部分会更棘手，但也很容易。基本上，您只需创建一个新列表并开始用您通过比较两个合并集的第一个值获得的元素填充它。

因此，例如，如果您有两组要合并：

```
[A]->[C]->[D]
[B]->[E]->[F] 
```

合并过程将：

```
[A]

[C]->[D]
[B]->[E]->[F] 
```

* * *

```
[A]->[B]

[C]->[D]
[E]->[F] 
```

* * *

```
[A]->[B]->[C]

[D]
[E]->[F] 
```

* * *

```
[A]->[B]->[C]->[D]

[E]->[F] 
```

* * *

```
[A]->[B]->[C]->[D]->[E]

[F] 
```

* * *

```
[A]->[B]->[C]->[D]->[E]->[F] 
```

# php - 通过向特定地址发送电子邮件来使用 PHP 更新 MySQL 表

> ID：13868803
> 
> 赞同：0
> 
> 时间：2012-12-13T21:29:17.580
> 
> 标签：php, mysql, sql-update

每当 john@example.com 收到电子邮件时，我想更新 MySQL 中的条目，并且仅当电子邮件包含某些文本时。

例如，当 john@example.com 收到一封主题为 的电子邮件时`Contact Confirmation`，我想在电子邮件中搜索字符串`DEALERID`并将后面的 6 个字符（在本例`ABC123`中为 ）记录到我的 MySQL 表中的一个条目中。

我知道通常这可以使用 php-IMAP 完成，但由于我在共享服务器上，所以这不是一个选项。

还有另一种方法可以做我想要完成的事情吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-13T21:51:40.167

1.  编写一个使用[PHP 的 IMAP 库](http://us3.php.net/manual/en/book.imap.php)检查用户邮箱的脚本。
2.  让您的主机配置一个 cron 作业来调用该脚本。
3.  ？？？
4.  利润。

# silverlight - Silverlight 如何创建属性可自定义的用户控件

> ID：13868806
> 
> 赞同：0
> 
> 时间：2012-12-13T21:29:23.977
> 
> 标签：silverlight, silverlight-5.0

我敢肯定这是一个真正的初学者问题；我只是无法弄清楚如何搜索它。

我有一个简单的 UserControl (MyNewControl)，它只有三个控件，其中一个是以下标签：

```
<sdk:Label x:Name="Title" /> 
```

然后，在另一个控件中，我想使用 MyNewControl，如下所示：

```
<local:MyNewControl Grid.Column="1" x:Name="MyNewGuy" /> 
```

例如，我需要做什么才能使第二个控件可以为我的标题标签设置渐变背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:50:05.860

首先，您在 UserControl 中定义所需的依赖属性：

```
public partial class MyUserControl : UserControl
{
    public Brush LabelBackground
    {
        get { return (Brush)GetValue(LabelBackgroundProperty); }
        set { SetValue(LabelBackgroundProperty, value); }
    }
    public static readonly DependencyProperty LabelBackgroundProperty =
        DependencyProperty.Register("LabelBackground", typeof(Brush), typeof(MyUserControl), new PropertyMetadata(null));

    public MyUserControl()
    {
        InitializeComponent();
    }
} 
```

要将属性的值分配给子标签，可以使用绑定的 ElementName 属性进行绑定：

```
<UserControl x:Class="SilverlightApplication1.MyUserControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
         xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
         d:DesignHeight="300"
         d:DesignWidth="400"
         mc:Ignorable="d"
         x:Name="UserControl"
         >

<Grid x:Name="LayoutRoot">
    <sdk:Label x:Name="Title"
               HorizontalAlignment="Center"
               VerticalAlignment="Center" Content="Title" Background="{Binding LabelBackground, ElementName=UserControl}" />
</Grid>
</UserControl> 
```

当您使用 Silverlight 5 时，您还可以将[RelativeSource](http://www.codeproject.com/Articles/202484/Silverlight-5-Features-Ancestor-Relative-Source-Bi)设置为您的绑定，而不是在内部命名您的 UserControl：

```
<sdk:Label Background="{Binding LabelBackground, RelativeSource={RelativeSource AncestorType=UserControl}}" /> 
```

然后，在使用您的 UserControl 时，您只需将 LabelBackground 设置（或绑定）为所需的值：

```
<local:MyUserControl LabelBackground="Red"/> 
```

请注意，您还可以创建[CustomControl](http://www.codeproject.com/Articles/176829/How-to-create-a-Custom-Control-in-Silverlight)而不是 UserControl，以相同的方式向其添加依赖属性，并[在定义其模板时使用 TemplateBinding](http://www.codeproject.com/Articles/177974/How-to-implement-Template-Binding-in-Silverlight-C)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:16:24.830

您可以使用自定义控件中的[依赖属性来做到这一点。](http://msdn.microsoft.com/en-us/library/cc221408%28v=vs.95%29.aspx)假设您将 LableBG 定义为自定义控件中的依赖属性，并与您在 xaml 中定义的 Label 控件的背景进行绑定。当您在另一个控件中使用自定义控件时，您可以从 xaml 或从后面的代码设置它的 LableBG。

注意：您定义的依赖属性的类型应该是 Brush

例如：

在自定义控件的 cs 文件中定义依赖属性：

```
/1\. Declare the dependency property as static, readonly field in your class.
    public static readonly DependencyProperty LableBGProperty = DependencyProperty.Register(
        "LableBG",                      //Property name
        typeof(Brush),                  //Property type
        typeof(MySilverlightControl),   //Type of the dependency property provider
        null );//Callback invoked on property value has changes

<sdk:Label x:Name="Title" Background="{Binding LableBG }" /> (Custom Control)

<local:MyNewControl Grid.Column="1" x:Name="MyNewGuy" LableBG="Red" /> (Another control) 
```

# google-maps - 谷歌地图不显示在框架中间

> ID：13868807
> 
> 赞同：0
> 
> 时间：2012-12-13T21:29:34.510
> 
> 标签：google-maps, jquery-mobile, google-maps-api-3

我创建了一个带有嵌入 Google 地图的 Jquery 移动端，由于某些原因，地图不会显示在框架的中间，并且不允许移动到中间。请在哪里可以调整它的任何帮助：

[http://johnd.smartagent.co.nz/users/92/properties/54634](http://johnd.smartagent.co.nz/users/92/properties/54634)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:11:01.300

使用这个小提琴[http://jsfiddle.net/wptc/SWfRa/](http://jsfiddle.net/wptc/SWfRa/)来帮助更详细地测试问题。在不更改标记或代码的情况下，对齐中心似乎可以在 Chrome 中运行；可以尝试其他浏览器来缩小问题范围。

### 地图

```
 <div align="center" data-role="content">
        <div  id="map_canvas"></div>
    </div>

     </p> 
```

# javascript - 单击每个项目时显示内容

> ID：13868812
> 
> 赞同：1
> 
> 时间：2012-12-13T21:29:46.330
> 
> 标签：javascript, jquery, html, css

我有一个列表，我想在单击每个项目并隐藏前一个项目时显示内容。唯一的限制是我必须使用 jquery 1.4.2

```
<ul class="list">
<li>1</li>
<li>2</li>
<li>3</li>
</ul>

<div>
<div class="content">1.1</div>
<div class="content">1.2</div>
<div class="content">1.3</div>
</div>

--script--
$('.content').hide();
$('#list li').live('click', function(){
    $('.content').eq($(this).index()).show();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:32:01.883

您缺少隐藏的兄弟姐妹部分并为您的 ul 使用了错误的选择器类型

```
$('.content').hide();
$('.list li').live('click', function(){
    $('.content').eq($(this).index()).show().siblings().hide(); // <-- here
}); 
```

[http://jsfiddle.net/zcgYw](http://jsfiddle.net/zcgYw)

对于 jQuery 1.3.2，你必须改变你使用索引的方式

```
$('.content').hide();
$('.list li').live('click', function(){
    var ind = $('li').index(this); // <-- this is how you have to use it
    $('.content').eq(ind).show().siblings().hide(); // <-- here
});​ 
```

[http://jsfiddle.net/vvrqK/](http://jsfiddle.net/vvrqK/)

根据[jQuery 文档](http://api.jquery.com/index/)`.index()`，另一个`.index('selector')`直到 jQuery 1.4 才添加

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:32:11.493

可能是你的错字

`$('#list li')`应该`$('.list li')`

```
$('.list li').live('click', function(){
    $('.content').hide().eq($(this).index()).show();
});​ 
```

[http://jsfiddle.net/vjAmQ/2/](http://jsfiddle.net/vjAmQ/2/)

# jquery - VideoJS：.flv 不在 IE 中播放

> ID：13868815
> 
> 赞同：3
> 
> 时间：2012-12-13T21:30:03.213
> 
> 标签：jquery, html5-video

我正在使用[VideoJS](http://videojs.com/)（一个 jQuery 视频播放器）。当我`.flv`向播放器添加文件时，VideoJS 元素在 Firefox/Chrome/Opera 中有效，但在 Internet Explorer 中失败。

如何让视频在 Internet Explorer 9 中正常播放？

HTML 代码：

```
<video id="example_video_1" class="video-js vjs-default-skin" controls preload="none" width="640" height="264"
      poster="http://video-js.zencoder.com/oceans-clip.png"
      data-setup="{}">
    <source src="http://klaus.geekserver.net/ming-video/test.flv" type='video/mp4' />
</video> 
```

我在[这里](http://jsfiddle.net/BBKING/5VsAh/)发布了一个 JSFiddle 示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T05:39:32.183

我知道我迟到了，但如果您仍在寻找答案，这将对您有所帮助。

在您的源标签中，将类型从 video/mp4 更改为 video/flv，您就可以开始了。

这是代码示例

`<source src="http://klaus.geekserver.net/ming-video/test.flv" type='video/flv' />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T11:16:48.323

我不得不在 ie8 上升级我的 flash 播放器。

另一件事可能是： [videojs Flash Fallback Not Working In IE8](https://stackoverflow.com/questions/13585439/videojs-flash-fallback-not-working-in-ie8)

# vim - urxvt 光标形状设置为 |

> ID：13868817
> 
> 赞同：7
> 
> 时间：2012-12-13T21:30:07.397
> 
> 标签：vim, terminal

我希望在插入模式下像 vim 一样设置光标`|`（在 gnome-terminal 中很容易，但我想切换到 urxvt）。我没有找到一个好方法（`_`有可能，但我真的更喜欢`|`）。我敢肯定，只要有一点想象力，在 urxvt 中一切皆有可能。

有没有你知道的方法（或只是一个想法）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T17:15:44.437

`DECSCUSR`传统上，DEC 不通过序列 ( )提供 I 型光标，仅提供实心块或下划线`CSI Sp q`：

```
CSI 1 Sp q  == blinking block
CSI 2 Sp q  == solid block
CSI 3 Sp q  == blinking underbar
CSI 4 Sp q  == solid underbar 
```

最近在`xterm`我们扩展了这个枚举来定义

```
CSI 5 Sp q  == blinking vertical bar
CSI 6 Sp q  == solid vertical bar 
```

可以建议`urxvt`采用类似的编码方案。

# c++ - 如何动态加载 C++ 函数

> ID：13868819
> 
> 赞同：0
> 
> 时间：2012-12-13T21:30:15.013
> 
> 标签：c++, function, dynamic, load

我有一个 C++ 应用程序，如何从函数中加载`test.cpp`函数并执行它？我需要适用于 Windows 和 Linux 的解决方案。我需要这个，因为我的应用程序用户应该根据他们的需要更改此功能。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:34:46.167

这在纯 c++ 中几乎是不可能的。这是因为你必须先编译你的函数。当你有一个对象时，你可以动态地将它链接到你的程序中，但这不是你打算做的，我期望。

您可能想查看诸如 LUA 等脚本语言，这些语言具有可在 c++ 中使用的详细记录的 API（等等）

您还可以随应用程序提供 gcc 并从应用程序本身调用它 (exec..()) 但这很重。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:50:45.050

在共享库“dll 左右”linux“”中创建此函数，然后您可以使用“extern”和库 (.lib) 或“LibraryLoad (Windows) 或 dlopen (linux)”动态调用它。这是用 c++ 做的方法..但是你必须让你的函数调用从你的程序中理解为静态的..

# bash - 用于删除超过 n 天的目录的 Shell 脚本

> ID：13868821
> 
> 赞同：193
> 
> 时间：2012-12-13T21:30:19.483
> 
> 标签：bash, shell

我的目录命名为：

```
2012-12-12
2012-10-12
2012-08-08 
```

如何使用 bash shell 脚本删除超过 10 天的目录？

* * *

## 回答 #1

> 赞同：448
> 
> 时间：2012-12-13T21:44:01.760

这将为您递归地执行此操作：

```
find /path/to/base/dir/* -type d -ctime +10 -exec rm -rf {} \; 
```

**解释：**

*   `find`：用于查找文件/目录/链接等的unix命令。
*   `/path/to/base/dir`：开始搜索的目录。
*   `-type d`: 只查找目录
*   `-ctime +10`: 只考虑修改时间超过 10 天的
*   `-exec ... \;`：对于找到的每个此类结果，请执行以下命令`...`
*   `rm -rf {}`：递归强制删除目录；该`{}`部分是从前一部分替换查找结果的位置。

* * *

**或者，使用：**

```
find /path/to/base/dir/* -type d -ctime +10 | xargs rm -rf 
```

效率更高一些，因为它相当于：

```
rm -rf dir1 dir2 dir3 ... 
```

相对于：

```
rm -rf dir1; rm -rf dir2; rm -rf dir3; ... 
```

就像在`-exec`方法中一样。

* * *

使用现代版本的`find`，您可以替换`;`with `+`，它会为您执行等效的`xargs`调用，传递适合每个 exec 系统调用的尽可能多的文件：

```
find . -type d -ctime +10 -exec rm -rf {} + 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-09-12T15:10:24.817

如果要删除 下的所有子目录`/path/to/base`，例如

```
/path/to/base/dir1
/path/to/base/dir2
/path/to/base/dir3 
```

但是你不想删除 root `/path/to/base`，你必须添加`-mindepth 1`和`-maxdepth 1`选项，它只会访问下面的子目录`/path/to/base`

`-mindepth 1``/path/to/base`从匹配项中排除根。

`-maxdepth 1`只会**匹配**紧接在`/path/to/base`诸如下的子目录`/path/to/base/dir1`，但不会以递归方式列出这些子目录的子目录。所以这些示例子目录将不会被列出：`/path/to/base/dir2``/path/to/base/dir3`

```
/path/to/base/dir1/dir1
/path/to/base/dir2/dir1
/path/to/base/dir3/dir1 
```

等等。

`/path/to/base`因此，删除所有超过 10 天的子目录；

```
find /path/to/base -mindepth 1 -maxdepth 1 -type d -ctime +10 | xargs rm -rf 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2016-05-10T08:45:11.513

`find`支持`-delete`操作，所以：

```
find /base/dir/* -ctime +10 -delete; 
```

我认为有一个问题是文件也需要早 10 天以上。没试过，评论里有人可以确认。

这里缺少投票最多的解决方案，`-maxdepth 0`因此在删除它后它将调用`rm -rf`每个子目录。这没有意义，所以我建议：

```
find /base/dir/* -maxdepth 0  -type d -ctime +10 -exec rm -rf {} \; 
```

上面的`-delete`解决方案不使用`-maxdepth 0`，因为`find`会抱怨目录不为空。`-depth`相反，它自下而上暗示和删除。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-20T11:21:34.150

我正在努力使用上面提供的脚本和其他一些脚本来解决这个问题，特别是当文件和文件夹名称有换行符或空格时。

终于偶然发现了 tmpreaper，到目前为止它对我们来说效果很好。

```
tmpreaper -t 5d ~/Downloads

tmpreaper  --protect '*.c' -t 5h ~/my_prg 
```

原始来源[链接](http://www.thegeekstuff.com/2013/10/tmpreaper-examples/)

具有像测试这样的功能，它递归地检查目录并列出它们。能够删除符号链接、文件或目录，以及删除时特定模式的保护模式

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-31T11:10:16.510

或者

```
rm -rf `find /path/to/base/dir/* -type d -mtime +10` 
```

更新，更快的版本：

```
find /path/to/base/dir/* -mtime +10 -print0 | xargs -0 rm -f 
```

# java - 使用 Netbeans 导入现有数据库

> ID：13868829
> 
> 赞同：0
> 
> 时间：2012-12-13T21:30:53.723
> 
> 标签：java, database, netbeans, import

我有一个Java程序的情况；它适用于数据库。

我想知道是否可以导入一个转储文件存储在我项目的源文件中的数据库。

我不想使用文件的绝对路径，例如：

`C:\PATH\FILE.SQL`

相反，我想使用类似的东西：

`\FILE.SQL`

在我的项目中，我使用这行代码来导入转储文件，它工作正常，但使用绝对 PATH。

`String[] executeCmd = new String[]{"mysql", "--user=root", "--password=" + psw, "control_schema", "-e", "C:/DataBase/DataBase.sql"};`

因为我不想要这个绝对的 PATH `C:/DataBase/DataBase.sql`，所以我需要你的帮助。

是否可以使用相对路径`/DataBase/DataBase.sql`来导入存储在我的 src 项目文件夹中的转储文件？

# java - 切换选项卡后小程序组件进入默认布局

> ID：13868834
> 
> 赞同：1
> 
> 时间：2012-12-13T21:31:13.427
> 
> 标签：java, applet

我使用 setLocation(x, y) 将组件放置在基于 AWT 的小程序中，但是当我切换选项卡时，组件的位置会回到它们的默认布局。

```
import java.applet.*;
import java.awt.*;

public class AppletEx extends Applet {

  Label test;

  public void init() {

      test = new Label("test");
      add(test);   

  }

  public void start() {
  }

  public void stop() {
  }

  public void destroy() {
  }

  public void paint() {
      test.setLocation(10, 10);
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:49:46.593

```
import java.awt.BorderLayout;
// it is the 3rd millennium, time to use Swing
import javax.swing.*;
import javax.swing.border.EmptyBorder;

/** <applet code='AppletEx' width='120' height='50'></applet> */
public class AppletEx extends JApplet {

  JLabel test;

  public void init() {
      test = new JLabel("test");
      // a border can be used for component padding
      test.setBorder(new EmptyBorder(10,10,10,10));
      // default layout of Applet is FlowLayout,
      // while JApplet is BorderLayout
      add(test, BorderLayout.PAGE_START);
  }
} 
```

其他提示。

*   不要尝试在`paint()`其中创建或更改任何组件会导致循环。
*   `paint()`除非进行自定义绘画，否则不要覆盖。
*   不要在or之`paint()`类的顶级容器中覆盖，而是在可以添加到其中 的or之类的东西中覆盖。`Applet``Frame``Panel``JPanel`
*   ***使用布局*** （与无意义的`null`布局相反）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T21:39:16.217

如果要使用绝对定位，则不需要使用布局管理器：

```
setLayout(null);
test = new Label("test");
add(test);
test.setLocation(10, 10);
test.setSize(test.getPreferredSize()); 
```

# c - C中的碰撞检测

> ID：13868836
> 
> 赞同：1
> 
> 时间：2012-12-13T21:31:20.047
> 
> 标签：c, collision

我一直在尝试用 C 编写一些碰撞检测代码，下面是我目前拥有的函数，它每帧调用一次，但是由于某种原因，当 2 个精灵重叠时，碰撞不起作用

```
short int Collision(int x1, int y1, int w1, int h1, int x2, int y2, int w2, int h2)
{
    int left1, left2;
    int right1, right2;
    int top1, top2;
    int bottom1, bottom2;

    left1 = x1;
    left2 = x2;
    right1 = x1 + w1;
    right2 = x2 + w2;
    top1 = y1;
    top2 = y2;
    bottom1 = y1 + h1;
    bottom2 = y2 + h2;

    if ((bottom1 < top2)||(top1 > bottom2)||(right1 < left2)||(left1 > right2)) 
    {
        return(1);
    }

    else
    {
        return(0);
    }

    };

    if (Collision ==1)
    {
    //code for collision here
    } 
```

任何指向正确方向的指针将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:03:06.810

我知道，有一个正确的单一条件，有 32 个标签和 16 个运算符，但它无法阅读并且容易搞砸。我的建议是：写更多但更简单的条件。

```
bool collision = false;
do {
  if (top1 > bottom2) break;  // 1 is under 2
  if (top2 > bottom1) break;  // 1 is beyond 2
  if (left1 > right2) break;  // 1 is right to 2
  if (left2 > right1) break;  // 1 is left to 2
  // I think we listed all the non-collide cases  
  collision = true;
} while (false); 
```

如果“触摸”算作非碰撞，则应使用 >= 代替 > -s。一个好的编译器应该从这个和一个很长的复杂条件生成相同的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:38:42.513

请记住，(0,0) 顶点是左上角而不是左下角。因此，y（垂直轴）向下增加，x（水平轴）向右增加。

所以，`bottom1 < top2`意味着如果没有碰撞和类似情况是你的其他条件

# c++ - 我可以在运行时更改 Log4Qt 配置的文件名吗？

> ID：13868838
> 
> 赞同：1
> 
> 时间：2012-12-13T21:31:33.083
> 
> 标签：c++, qt, logging, log4cplus

我正在使用[Log4qt](http://log4qt.sourceforge.net)，并按照[官方步骤](http://log4qt.sourceforge.net/html/init.html)配置日志文件。我想知道是否可以在运行时动态更改配置。假设默认文件是“myapp.log”

```
// Set logging level for Log4Qt to TRACE
s.beginGroup("Log4Qt");
s.setValue("Debug", "TRACE");

// Configure logging to log to the file C:/myapp.log using the level TRACE
s.beginGroup("Properties");
s.setValue("log4j.appender.A1", "org.apache.log4j.FileAppender");
s.setValue("log4j.appender.A1.file", "C:/myapp.log");
s.setValue("log4j.appender.A1.layout", "org.apache.log4j.TTCCLayout");
s.setValue("log4j.appender.A1.layout.DateFormat", "ISO8601");
s.setValue("log4j.rootLogger", "TRACE, A1");

// Log first message, which initialises Log4Qt
Log4Qt::Logger::logger("MyApplication")->info("Hello World"); 
```

我想在运行时更改文件名，像这样？

```
QSettings s;
s.beginGroup("Properties");
s.setValue("log4j.appender.A1.file", "C:/NewFile.log");

// Log first message, into new file
Log4Qt::Logger::logger("MyApplication")->info("Hello World"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:34:22.833

看起来在您更改 QSettings 后，它们会反映在那里，您需要使用：

[`Log4Qt::Properties::load()`](http://log4qt.sourceforge.net/html/class_log4_qt_1_1_properties.html#3efeb516f1ccab1bcf05dfd61c8ca208)

或者

[`Log4Qt::PropertyConfigurator::configure()`](http://log4qt.sourceforge.net/html/class_log4_qt_1_1_property_configurator.html#1605298cf59cbf14c9eacd4169bd6da2)

参考您的 QSettings 变量。如果这不应用文件名更改，您可能需要寻找一种在 Log4Qt 单例上运行启动的方法。

希望有帮助。

# python - 使用 Boto 通过 Python 连接到 S3

> ID：13868841
> 
> 赞同：7
> 
> 时间：2012-12-13T21:31:44.627
> 
> 标签：python, amazon-web-services, amazon-s3, boto

我正在尝试使用 Boto 访问 AWS，但它不起作用。我已经安装了 Boto 和 /etc 中的 boto.cfg。这是我的代码：

```
import requests, json
import datetime
import hashlib
import boto

conn = boto.connect_s3() 
```

这是错误：

```
Traceback (most recent call last):
  File "boto.py", line 4, in <module>
    import boto
  File "/home/mydir/public_html/boto.py", line 6, in <module>
    conn = boto.connect_s3()
AttributeError: 'module' object has no attribute 'connect_s3' 
```

我勒个去？这并不复杂。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-13T21:43:16.767

看起来您正在处理的文件名为`boto.py`. 我认为这里发生的事情是您的文件正在自行导入——Python 在包含执行导入的文件的目录中查找模块，然后再查找您的`PYTHONPATH`. 尝试将名称更改为其他名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T16:52:54.813

使用连接类。

例如

```
from boto.s3.connection import S3Connection
from boto.sns.connection import SNSConnection
from boto.ses.connection import SESConnection

def connect_s3(self):
  return S3Connection(AWS_ACCESS_KEY_ID,AWS_SECRET_ACCESS_KEY)

def connect_sns(self):
  return SNSConnection(AWS_ACCESS_KEY_ID,AWS_SECRET_ACCESS_KEY)

def connect_ses(self):
  return SESConnection(AWS_ACCESS_KEY_ID,AWS_SECRET_ACCESS_KEY) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-21T02:05:44.543

@valdogg21

我正在按照您的指示将其放入我的代码中：

```
from boto.s3.connection import S3Connection
conn = S3Connection('<aws access key>', '<aws secret key>') 
```

但是，尽管我的意图很好，但它导致了一个小错误。我已经做了

`sudo pip install boto --upgrade` 以确保我安装了最新版本。

这是错误信息。只是想知道我是独狼还是其他人遇到这个问题......

> 从 boto.s3.connection 导入 S3Connection ImportError：无法导入名称 S3Connection

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T21:39:14.377

您可能需要做一些类似于我`EC2Connection`在某些代码中必须使用该类的方法，如下所示：

```
from boto.ec2.connection import EC2Connection
conn = EC2Connection(...) 
```

此外，从他们的文档（[http://boto.s3.amazonaws.com/s3_tut.html](http://boto.s3.amazonaws.com/s3_tut.html)）：

```
>>> from boto.s3.connection import S3Connection
>>> conn = S3Connection('<aws access key>', '<aws secret key>') 
```

编辑：我知道文档页面具有您尝试使用的快捷方式功能，但是在尝试使用 EC2 执行相同类型的快捷方式时，我看到了类似的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-21T02:31:11.557

我已经尝试了您所有的解决方案，但似乎没有一个有效。我一直在查看 StackOverFlow，因为我看不到其他人没有这个相当小的问题。有点奇怪的事实是，在服务器中它就像一个魅力。问题出在我的 Mac 上

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-18T19:56:36.247

我遇到了这个问题，并且在使用 boto3 和 moto 模拟 s3 存储桶时遇到了同样的错误。

```
boto3.connect_s3() 
```

我将我的图书馆切换回boto，它工作正常。看起来 boto3 已将 connect_s3() 迁移到 resources()：

```
boto.connect_s3() //works
boto3.resources('s3')  //works 
```

我也可以为 AWS Lambda 解决类似的问题：

```
boto.connect_awslambda() //works
boto3.client('lambda')  //works 
```

# objective-c - Objective-C 中的 C#“as”关键字

> ID：13868842
> 
> 赞同：1
> 
> 时间：2012-12-13T21:32:00.680
> 
> 标签：objective-c, xcode, oop, casting

Objective-C 中是否有类似 C# ( `as`) 的 cast 关键字：

```
Foo bar = new Foo();
Foo tmp = bar as Foo; 
```

这在Objective-C中可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T21:35:33.247

`as`在 Objective-C 中没有直接的等价物。有常规类型转换（C 风格）。

如果要检查对象的类型，请务必调用`isKindOfClass:`.

写相当于：

```
Foo bar = new Foo();
Foo tmp = bar as Foo; 
```

你会写：

```
Foo *bar = [Foo new];
Foo *tmp = ([bar isKindOfClass:[Foo class]]) ? (Foo *)bar : nil; 
```

你总是可以把它写成一个类别，比如：

```
@implementation NSObject (TypeSafeCasting)

- (id) asClass:(Class)aClass{
   return ([self isKindOfClass:aClass]) ? self : nil;
}

@end 
```

然后你可以这样写：

```
Foo *bar = [Foo new];
Foo *tmp = [bar asClass:[Foo class]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:47:23.077

不，不存在这样的关键字，但您可以使用宏来模拟这样的行为。

```
#define AS(x,y) ([(x) isKindOfClass:[y class]] ? (y*)(x) : nil)

@interface Foo : NSObject
@end
@implementation Foo
@end

int main(int argc, char *argv[])
{
    @autoreleasepool {

        Foo *bar = [[Foo alloc] init];
        Foo *tmp = AS(bar, Foo);

        NSLog(@"bar as Foo: %@", tmp);

        bar = [NSArray array];
        tmp = AS(bar, Foo);
        NSLog(@"bar as Foo: %@", tmp);
    }
} 
```

输出：

> bar as Foo: `<Foo: 0x682f2d0>`
> bar as Foo: (null)

我建议直接检查`isKindOfClass:`而不是使用名称不佳的宏，例如`AS`. 此外，如果宏的第一个参数是表达式，例如 ( `[foo anotherFoo]`)，它将被计算两次。`anotherFoo`如果有副作用，这可能会导致性能问题或其他问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-13T21:34:24.057

类型转换（只是 C）：

```
Foo *foo = [[Foo alloc] init];
Bar *bar = (Bar *)foo; 
```

注意：你可以用这个射击自己的脚，小心。

# mysql - Cakephp 和 Mysql Tinyint(1) 返回 Null

> ID：13868845
> 
> 赞同：-1
> 
> 时间：2012-12-13T21:32:16.037
> 
> 标签：mysql, cakephp, tinyint

所以这是我的问题。

我的数据库中有一个名为 maillist 的字段，类型为 tinyint(1)。使用 phpmyadmin 我将值 0 和 1 插入到一些字段中。
当我从数据库中读取时，这里是返回的数组。

```
Array
(
    [User] => Array
        (
            [maillist] => 
        )

) 
```

邮件列表应该是 0 或 1，因为在我的数据库中，邮件列表上的所有字段都已填写。
所以我决定将字段上的类型更改为 tinyint(4) 并解决问题，这里是返回的数组。

```
Array
(
    [User] => Array
        (
            [maillist] => 0
        )

) 
```

请注意，我没有更改任何值，我只是将类型从 tinyint(1) 更改为 tinyint(4)。
虽然问题已解决，但我想知道是什么导致了这种行为？我对使用 cakephp 检索数据缺乏了解吗？我错过了什么重要的事情吗？或者这可能是一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:33:57.503

尝试`var_dump($array)`代替`pr($array)`

`pr()`不显示变量类型，也永远不会显示布尔值，因为没有`true`or`false`字符。

[http://codepad.viper-7.com/tUvSTu](http://codepad.viper-7.com/tUvSTu)

# c# - 嵌套 foreach 循环读取 .xml 并将对象写入列表

> ID：13868847
> 
> 赞同：5
> 
> 时间：2012-12-13T21:32:45.267
> 
> 标签：c#, xml, debugging, foreach

我有一个在 form_load 事件上执行的方法，它似乎可以正常工作，省略一行。

```
private int ReadInPeople()
{
    XmlNodeList nodeList = m_xmlDoc.DocumentElement.ChildNodes;
    foreach (XmlNode PersonNode in nodeList)
    {
        Employee ccontact = new Employee();
        foreach (XmlNode PersonTag in PersonNode.ChildNodes)
        {
            switch (PersonTag.Name)
            {
                case "Employee":
                    ccontact.EmployeeNumber = PersonTag.FirstChild.Value;
                    break;
                case "FirstName":
                    ccontact.FirstName = PersonTag.FirstChild.Value;
                    break;
                case "LastName":
                    ccontact.LastName = PersonTag.FirstChild.Value;
                    break;
                default:
                    break;
            }
        }
        this.AddContact(ccontact);
    }
    return nodeList.Count;
} 
```

AddContact 方法将 Employee 对象添加到静态列表中；但是，该行：

```
this.AddContact(ccontact); 
```

没有被执行。

XML 文件的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<people>
  <person>
    <Employee>123456789</Employee>
    <FirstName>John</FirstName>
    <LastName>Smith</LastName>
  </person>
  <person>
    <Employee>987654321</Employee>
    <FirstName>Ellen</FirstName>
    <LastName>Wayne</LastName>
  </person>
</people> 
```

我曾尝试设置断点和调试，果然，该行被完全跳过，就好像它甚至不存在一样。

根据 Alan 的建议，我更改了 PersonTag.FirstChild.Value，因为它试图引用一个不存在的 ChildNode。

更新的工作方法：

```
private int ReadInPeople()
{
    XmlNodeList nodeList = m_xmlDoc.DocumentElement.ChildNodes;
    foreach (XmlNode PersonNode in nodeList)
    {
        Employee ccontact = new Employee();
        foreach (XmlNode PersonTag in PersonNode.ChildNodes)
        {
            switch (PersonTag.Name)
            {
                case "Employee":
                    ccontact.EmployeeNumber = PersonTag.InnerText;
                    break;
                case "FirstName":
                    ccontact.FirstName = PersonTag.InnerText;
                    break;
                case "LastName":
                    ccontact.LastName = PersonTag.InnerText;
                    break;
                default:
                    break;
            }
        }
        this.AddContact(ccontact);
    }
    return nodeList.Count;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:09:04.123

您确定您不只是遇到异常吗？将您的逻辑包装在 try/catch 中，看看它是否成功。

像这样的行可能会导致空引用异常，并且可能是您没有点击该行代码的原因：

```
PersonTag.FirstChild.Value 
```

我会想象在 Employee、FirstName 或 LastName 上的 FirstChild 上调用它会返回 null，因为它们不包含子节点。

也许尝试：

```
PersonTag.InnerText 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T22:11:01.043

您可以使用 LINQ to XML 轻松解析您的 xml：

```
XDocument xdoc = XDocument.Load(path_to_xml);   
var employees = xdoc.Descendants("person")
                    .Select(p => new Employee()
                    {
                        FirstName = (string)p.Element("FirstName"),
                        LastName = (string)p.Element("LastName"),
                        EmployeeNumber = (long)p.Element("Employee")
                    });

foreach (var ccontact in employees)
    this.AddContact(ccontact); 
```

* * *

XmlDocument 解决方案：

```
XmlNodeList nodeList = m_xmlDoc.DocumentElement.SelectNodes("person");
foreach (XmlNode PersonNode in nodeList)
{
    Employee ccontact = new Employee();
    ccontact.LastName = PersonNode["LastName"].InnerText;
    ccontact.FirstName = PersonNode["FirstName"].InnerText;
    ccontact.EmployeeNumber = PersonNode["Employee"].InnerText;
    this.AddContact(ccontact);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:24:31.073

`Build -> Rebuild Solution`?

众所周知，它有时会有所帮助。

也许：`Debug -> Exceptions... -> Thrown`

# c# - 使用在 XAML 资源中声明的数组

> ID：13868849
> 
> 赞同：3
> 
> 时间：2012-12-13T21:33:03.280
> 
> 标签：c#, xaml

我的目标是`ObservableCollection<Color>`从 XAML 资源文件中检索出一个，但我使用的是 .NET 3.5，所以我不能直接在 XAML 中声明泛型类型。我目前的解决方案是在 XAML 中声明一个 Color 数组：

```
<x:Array Type="Color" x:Key="ColourPickerStandardColours">
    <Color>#974806</Color>
    <Color>#FF0000</Color>
    <Color>#FFC000</Color>
    ...
    <Color>#7030A0</Color>
</x:Array> 
```

并在代码中检索它：

```
var standardColours = new ObservableCollection<Color>(
    (Color[])TryFindResource("ColourPickerStandardColours")); 
```

当我尝试运行它时，我得到了这个异常：

```
InvalidCastException
Unable to cast object of type 'System.Windows.Markup.ArrayExtension' to type
    'System.Windows.Media.Color[]'. 
```

ArrayExtension 有`IList Items`，但我需要泛型`IEnumerable<T>`来构造一个`ObservableCollection<T>`. 我想我可以使用`ProvideValue(IServiceProvider)`，但我不确定我应该传递给它什么。

我是在做错什么，还是只是遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T00:08:38.713

WPF 在那里使用无类型的集合。只需使用`Items.Cast<Color> ()`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T21:49:18.103

转换为 ArrayExtension，您的值在 Items 属性中

# c++ - 如何访问和更改来自不同类的 CDialog 成员

> ID：13868850
> 
> 赞同：1
> 
> 时间：2012-12-13T21:33:06.400
> 
> 标签：c++, visual-studio, dialog

我有一个基于对话框的应用程序。默认情况下，Visual Studio 创建了一个 App 和一个 Dlg 类。在 App 的 InitInstance 中，为了显示对话框，有一个声明 CMyDlg dlg，然后是一个 dlg.DoModal()。

我的问题是，我如何从其他班级访问 dlg 成员？例如，我创建了一个带有与之关联的控制变量的编辑框。我希望我的其他类之一设置编辑框的文本并显示它。

非常感谢帮助。

# multithreading - 如何发送字符串（串口），等待（超时）并捕获回复字符串？

> ID：13868851
> 
> 赞同：2
> 
> 时间：2012-12-13T21:33:19.483
> 
> 标签：multithreading, delphi, function, serial-port, communication

在阅读了关于 stackoverflow 的这个非常有趣的主题之后 -->[如何在循环中发送更多数据之前等待 COM 端口接收事件](https://stackoverflow.com/questions/9050045/how-to-wait-for-com-port-receive-event-before-sending-more-data-in-a-loop)

我遇到了很多问题，我尝试了很多解决方案......不幸的是，没有任何效果！

许多串行端口库是事件驱动的，我很难理解它们。

我尝试过使用 Asyncpro、Synaser 和 TComport。

有没有可能有这样的功能：

SerialSendandReply(tx string here,timeout) 返回 rx 字符串，如果超时则发送错误字符串

来自设备的响应是毫秒级的阻塞方式会更好吗？

像这样：

```
Dosomething here
showmessage(SerialSendandReply('test',100 )); //100 ms timeout
dosomething else 
```

使用此代码

```
TForm1 = class(TForm)
 ...
private
    IOEvent           : THandle; // used for IO events
    IORx              : string;
    Comport           : TapdComport;
...

procedure TForm1.ComportTriggerAvail(CP: TObject; Count: Word);

var i       : integer;

begin
 for i:=1 to Count do
  IORx:=IORx+Comport.GetChar;
 SetEvent(IOEvent);
end;

function TForm1.SerialSAWR(tx : string; TimeOut : integer) : boolean;
begin
 Result := False;
 try
  IORx := ''; // your global var
  ResetEvent(IOEvent);
  Comport.PutString(tx);
  Result := WaitForSingleObject(IOEvent, TimeOut) = WAIT_OBJECT_0;
 except
  on E : Exception do
   // dosomething with exception
 end;
end;

// constructor part
IOEvent := CreateEvent(nil, True, False, nil);
// destructor part
 if IOEvent <> 0 then
  CloseHandle(IOEvent); 
```

然后我试图调用这个函数：

```
if SerialSAWR('test'; 5000) then showmessage(IORx); 
```

**发送效果很好，但不返回字符串中的任何内容。**

有什么建议吗？

非常感谢你！

问候，劳伦特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:40:19.893

我使用 TComPort 并创建了以下例程来执行您的要求。TComPort 监视器在其监视线程中接收到字符，并且我的例程在不调用 Application.ProcessMessages 的情况下等待字符。它可能不是最优雅的代码，但可以正常工作。

```
function TArtTComPort.SerialPort_AwaitChars(AMinLength: integer;
      ATerminator: char; AQtyAfterTerm: integer; ARaise: boolean): string;
    var
      fDueBy : TDateTime;

      function IsEndOfReplyOrTimeout( var AStr : string ) : boolean;
      var
       I : integer;
      begin
        Result := False;
        If ATerminator <> #0 then
          begin
          I := Length( AStr ) - AQtyAfterTerm;
          If I > 0 then
            Result := AStr[I] = ATerminator;
          end;
        If not Result then
          Result := Length(AStr) >= AMinLength;

        // Un-comment this next line to disable the timeout.
        //Exit;

        If not Result then
          begin
          Result := Now > fDueBy;
          If Result then
            If ARaise then
              raise EArtTComPort.Create( 'Serial port reply timeout' )
            else
              AStr := '';
          end;
      end;

    var
      Events : TComEvents;
      iCount : integer;
      S : string;
    begin
      Assert( AMinLength > 0, 'Invalid minimum length' );

      If not FComPort.Connected then
        begin
        Result := '';
        Exit;
        end;

      fDueBy := Now + (FTimeoutMS * TDMSec );

      Result := '';

      Repeat

          // Setup events to wait for:
          Events := [evRxChar, evTxEmpty, evRxFlag, evRing, evBreak,
                   evCTS, evDSR, evError, evRLSD, evRx80Full];

          // Wait until at least one event happens.
          FComPort.WaitForEvent(
            Events,
            FStopEvent.Handle,
            FTimeOutMS);

          If Events = [] then // timeout
            begin
            If ARaise then
              raise EArtTComPort.Create( 'Serial port reply timeout' )
            end
           else
            begin
            If evRxChar in Events then
              begin
              iCount := FComport.InputCount;
              FComPort.ReadStr( S, iCount );
              Result := Result + S;
              end;
            end;

      until IsEndOfReplyOrTimeout( Result );

    end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T15:30:42.150

我切换到 nrComm Lib (v9.31)... 使用非常简单并且得到很好的支持。

唯一的缺点是它不是免费和开源的......但它是值得的！

它也是线程安全的，这也很好:)。

非常感谢大家的回复！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:45:55.760

您正在尝试从主线程执行异步 I/O。这永远不会与 GUI 配合得很好。

执行复杂的异步 I/O 更适合在单独的线程中。我有一个阻塞串行通信包（我认为 Synaser 也有阻塞模式）和这样的功能：

```
function TransmitReceive(const msg: AnsiString; var reply: AnsiString; 
  timeOut: Integer): Boolean; 
```

将复杂的代码逻辑放在 a`thread.execute`中，并用事件信号触发逻辑的开始。

`PostMessage`例如，通过调用将结果等传达给主线程。

# objective-c - Objective-C：“铸造一个结构”

> ID：13868856
> 
> 赞同：1
> 
> 时间：2012-12-13T21:33:43.220
> 
> 标签：objective-c, ios, casting, struct

我需要找到一种方法来告诉我的程序的 C 编译器某个结构与另一个结构相同（它们的定义相同）。我认为选角就足够了，但也许这不是一个好主意？

我不只是使用一个结构的原因是因为结构是在非常繁重的框架类中定义的，而且我自己有很多不同的类，导入需要在其中使用结构的类`.h`。

那么，考虑到它们是相同的，如果可能的话，我怎么能告诉编译器`Struct A`可以用于需要的函数呢？`Struct B`

* * *

为了说明这一点，在我的例子中，我有一个单例，大约有 14 个类可以访问和使用它。单例中的一些函数与其他类一起工作，并为它们的特定导入提供资源和数据。其中之一是 MapKit 框架。我一直在使用 MapKit 框架中的许多结构（尤其是 MKUserLocation.h），但会导入许多其他类并在定义中添加很多内容。

对我来说，一个具体的例子是使用 CLLocationCoordinate2D，我必须在我的单例中重新创建它，以便并非所有 14 个类都从 MapKit 框架导入。只是显得过分了。

我知道如何使这一切正常工作，但是除了强制转换或导入所有内容之外，应该有一个很好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:08:43.403

你能简单地编写一个全局函数来从一个结构转换到另一个结构吗？

```
void OneStructToAnotherStruct( struct FromStruct* from, struct ToStruct* to )
{
   to->x = from->x;
   to->y = from ->y;
   to->z = from->z;
} 
```

# excel - 从 INDEX 函数返回数组？

> ID：13868867
> 
> 赞同：0
> 
> 时间：2012-12-13T21:34:50.297
> 
> 标签：excel, excel-formula

我必须在 Excel 表中做一个计算字段，汇总表中的值与域表中的值。例如，有带有名称和数量的商品表和带有商品名称和价格的域表价格表。目标是查找每个商品行的价格，将其乘以价格并将其相加。有些商品行可能会重复，有些可能会丢失，因此无法进行矢量乘积。

事实上，实际情况要复杂一些。

我可以用 MATCH 和 INDEX 函数和数组公式做很多事情。但我的亮点是 INDEX 函数不能根据传入的索引数组返回找到的值数组。这个公式总是以值 1 结束，而不是我期望的数组：

```
{=COUNT(INDEX({1,2,3},{3,2,1}))} 
```

请注意，我不能使用 LOOKUP 函数，因为它们需要排序列表......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:53:09.017

INDEX（如 VLOOKUP）不返回值数组（某些复杂情况除外）

如果您在第一个表中有 Name1 和 Count，在第二个表中有 Name2 和 Price，那么您可以使用此公式获得**总价**

=SUMPRODUCT(Count,SUMIF(Name2,Name1,Price))

[SUMIF 部分正在做我认为您正在尝试使用 INDEX 做的事情]

假设第二个表中的 Name2 没有重复

# asp.net - asp.net 4 中的性能优化

> ID：13868868
> 
> 赞同：-1
> 
> 时间：2012-12-13T21:34:51.253
> 
> 标签：asp.net, database, menu

我正在创建一个站点，它是一个图书馆管理系统，这里有两种类型的用户，`Host (SuperUser), Faculty`. 现在我想显示菜单，这些菜单应该基于登录的用户，比如如果超级用户已经登录，他应该能够看到所有内容，而如果教员已经登录，他/她应该只能看到他/她的详细信息，现在我有 `3`想法了：

1.  从数据库生成基于用户的菜单。我的意思是我会将菜单项保存在数据库中，并根据登录的用户获取菜单
2.  直接在页面中编码，以便根据登录用户启用禁用菜单项。
3.  根据用户生成包含菜单的 xml 文件，并根据登录的用户从那里获取菜单。

因为我想从我的网站进行更多的性能优化，哪种技术可以节省我的性能，或者有没有其他最好的方法来轻松和性能地填充菜单。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:42:00.620

尝试使用站点地图： http: [//msdn.microsoft.com/en-us/library/ms178428](http://msdn.microsoft.com/en-us/library/ms178428(v=VS.100).aspx) (v=VS.100).aspx 。它可以处理角色。

# android - 为什么我的 overridePendingTransition 不能在一个 Activity 上工作

> ID：13868873
> 
> 赞同：3
> 
> 时间：2012-12-13T21:35:09.490
> 
> 标签：android, android-activity, transition, activity-finish

我有一个**非常**奇怪的问题。它与 overridePendingTransition 仅在 1 个活动转换（按下后退按钮后）和仅在运行 Honeycomb 的 Galaxy Tab 10.1 上无法正常工作有关。

这是情况。我有一个扩展 Activity 的 BaseActivity 类。我使用它来添加一些远离 android 默认值的转换更改。我像这样覆盖 finish() 函数：

```
@Override 
    public void finish()
    {
        super.finish();
        Log.i(StaticValues.TAG, "Calling finish in ActivityBase");
        overridePendingTransition(getAnimationId("slide_in_right") ,getAnimationId("slide_out_right"));
    } 
```

我必须使用 getAnimationId ，因为我正在使用 unity 并且不能使用 R.anim.slide_in_right/left

对于任何可能想知道的人来说，getAnimationId 也是以下函数：

```
protected int getAnimationId(String animName)
{
    if(mResources == null)
    {
        mResources = this.getResources();
    }

    return mResources.getIdentifier(animName, "anim", mPackage);
} 
```

现在奇怪的部分来了。当从我的nexus S 手机上的主Activity 调用任何基于ActivityBase 的Activity 时，这非常有用。在我的 Galaxy Tab 10.1 上调用两个活动（只是信息活动、网页链接等）时，它也很有效，但是当调用第三个活动（录音机）时，过渡可以（幻灯片）但退出时（要么通过调用完成或后退按钮）看起来方向更改为横向（标准主屏幕，因为这是平板电脑）然后将主要活动加载回原来的方式。

既然我给了你这件事的历史。有人能告诉我为什么这可能只发生在那个活动上，而且只发生在平板电脑上。

```
public void finish()
{
    removeUnsavedRecording();
    super.finish();

} 
```

以上是我的录音机活动中覆盖的完成功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:53:17.080

好的，我已经修复了这个错误，并以一种奇怪的方式修复了它。我的 AudioRecorderActivity 在测试阶段是一个启动器类。出于某种原因，设备为此缓存了退出动画。（奇怪的）。所以我通过将我的 ActivityBase finish() 方法的覆盖更改为另外两个动画（有效）来解决问题，然后将它们改回来。

所以我唯一的选择是相信应用程序以某种方式缓存了这个活动的默认动画（从它是一个启动器活动开始）。没有看到任何其他解释。

# routing - 糕点路线和由此产生的路线差距？

> ID：13868874
> 
> 赞同：1
> 
> 时间：2012-12-13T21:35:09.677
> 
> 标签：routing, p2p

我一直在为个人项目研究糕点 DHT，我真的很喜欢它，但路由让我感到困惑。

路由是使用前缀路由完成的，并使用叶子集来表示近节点（IE 节点与本地节点具有共同前缀），而路由集则用于更远的节点。

现在我的困惑来自以下几点：DHT 由 5 个节点引导。充当引导程序的服务器将每个加入的节点添加到它的路由集中，并将其提供给之后加入 DHT 的每个节点。

因此，如果前缀 A 加入，引导程序会将其添加到它的路由集中。如果前缀 F 在 A 之后加入，它将从包含 A 的引导程序接收路由集。

如果 A 需要路由到 F 怎么办？它永远不会知道它的存在，因为规范没有指定仅在叶子集节点之间复制路由表。

这是一个小例子，我希望它很清楚。糕点中是否可能存在布线间隙？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T06:36:57.797

我不清楚您提到的有关路由表维护的场景。

但是对于下面的问题，

> 如果 A 需要路由到 F 怎么办？它永远不会知道它的存在，因为规范没有指定仅在叶子集节点之间复制路由表。

如果 A 找不到 F，A 将通过匹配 nodeIds 的前缀来路由到与 F 最接近的节点（例如节点“G”），该前缀表示对等节点的更近的引擎盖。然后节点 G 路由到 F 如果 F 在它的路由表中或者它是最近的，等等......

希望您对这个概念很清楚....

# javascript - 如何仅更改网页静态页面的内部？

> ID：13868881
> 
> 赞同：0
> 
> 时间：2012-12-13T21:35:43.853
> 
> 标签：javascript, html

我写了一个静态网页——此时没有服务器。所有页面的页眉和页脚都是相同的。标题上有 4 个按钮。单击页眉中的按钮时，我只想更改页眉和页脚之间的页面部分。例如，有 4 个按钮主页、活动等。如果我单击活动，则页面的页眉和页脚应保留，活动页面应位于页眉和页脚之间。我怎样才能做到这一点？再一次 - 目前没有服务器，所以 ajax 对我不起作用。此时，我在单独的 html 文件中有按钮代码（例如，在我按下活动按钮后显示的页面）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:49:42.733

尝试这个：

HTML：

```
 <input name="" type="button"onclick="hideLayer('btn2content'); hideLayer('btn3content'); hideLayer('btn4content'); showLayer('btn1content');" value="btn1" />
  <input name="" type="button"onclick="hideLayer('btn1content'); hideLayer('btn3content'); hideLayer('btn4content'); showLayer('btn2content');" value="btn2" />
  <input name="" type="button"onclick="hideLayer('btn1content'); hideLayer('btn2content'); hideLayer('btn4content'); showLayer('btn3content');" value="btn3" />
  <input name="" type="button"onclick="hideLayer('btn1content'); hideLayer('btn2content'); hideLayer('btn4content'); showLayer('btn4content');" value="btn4" /> 
```

名为“content-wrapper”的新区域（如下）是您所有内容的所在；这一切都显示在同一页面上。

```
<div id="content-wrapper">
  <div id="btn1content" style="display:block;" onclick="">stuff</div>
  <div id="btn2content" style="display:none;">more stuff</div>
  <div id="btn3content" style="display:none;">other stuff</div>
  <div id="btn4content" style="display:none;">that stuff</div>
</div> 
```

Javascript：

```
<script type="text/javascript">
<!--
    function hideLayer(id) {
        var e = document.getElementById(id);
        if(e.style.display == 'block')
        e.style.display = 'none';
    }
//-->
</script>
<script type="text/javascript">
<!--
    function showLayer(id) {
        var e = document.getElementById(id);
        if(e.style.display == 'none')
        e.style.display = 'block';
    }
//-->
</script> 
```

不需要服务器:)

# objective-c - Objective C - 定义宏来调用方法？

> ID：13868883
> 
> 赞同：11
> 
> 时间：2012-12-13T21:35:53.060
> 
> 标签：objective-c, macros

我想定义一个宏来调用以下内容，这可能吗？我也希望它接受格式字符串。

```
- (void)logString:(NSString *)string withLogLogLevel:(LogLevel)logLevel
{
   // Sav log to file
}

DLog("text");
[Logger logString:text withLogLevel:LogLevelDebug];

ILog("text");
[Logger logString:text withLogLevel:LogLevelInfo];

ELog("text");
[Logger logString:text withLogLevel:LogLevelInfo]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T21:39:14.793

假设`logString:withLogLevel:`除了日志级别之外还有一个字符串参数，这应该是可能的：

```
#define DLog(x) [Logger logString:(x) withLogLevel:LogLevelDebug] 
```

注意宏参数周围的括号，它在使用复合表达式调用宏时很有用。

假设记录器获取`NSString`对象，而不是 C 字符串，您应该使用如下宏：

DLog(@"文本");

但是，在这种情况下，不清楚为什么人们更喜欢宏而不是简单的函数调用：

```
void DLog(NSString *str) {
    [Logger logString:str withLogLevel:LogLevelDebug];
} 
```

# sql - 我可以在 Select CASE SQL 中覆盖列的值吗

> ID：13868884
> 
> 赞同：3
> 
> 时间：2012-12-13T21:35:57.677
> 
> 标签：sql, case

我是否可以覆盖列中的值，以便如果情况为真，它会告诉值 x 等于查询中的另一个动态值。这是伪代码。我知道这行不通。

```
Select jobTitle, managerTitle, bigBossTitle,
    CASE WHEN jobtitle like '%DEVELOP%' THEN managerTitle = bigBossTitle
    END 
From PeopleTable
inner join... other tables... 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T21:40:09.353

试试这个：

```
Select     
    jobTitle, 
      CASE WHEN jobtitle like '%DEVELOP%' 
      THEN bigBossTitle 
      ELSE managerTitle 
      END as managerTitle, 
    bigBossTitle,

From PeopleTable
inner join... other tables... 
```

您只需将 case 语句放在 managerTitle 列所在的位置，然后将结果别名为 managerTitle。这种逻辑有效地为您提供了您正在寻找的东西。要真正“替换”一个值，您需要执行更高级的 T-SQL，这并不是真正必要的。

**在连接谓词中使用 case 语句的示例：**

```
...
inner join otherTable 
on otherTable.bossTitle = 
      CASE WHEN jobtitle like '%DEVELOP%' 
      THEN bigBossTitle 
      ELSE managerTitle 
      END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:40:55.340

试试这个：

```
Select jobTitle,
    CASE
        WHEN jobtitle like '%DEVELOP%'
        THEN bigBossTitle
        ELSE managerTitle 
    END as managerTitle,
   bigBossTitle
From PeopleTable
inner join... other tables... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T21:41:00.890

你非常亲近。你`CASE`会是这样的：

```
Select jobTitle, bigBossTitle,
    CASE 
          WHEN jobtitle like '%DEVELOP%' 
          THEN bigBossTitle 
          ELSE managerTitle
    END as managerTitle
From PeopleTable
inner join... other tables... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T21:38:51.107

尝试这样的事情：

```
Select jobTitle, managerTitle, bigBossTitle, IF(jobtitle like '%DEVELOP%', bigBossTitle, OTHER_VALUE_IF_FALSE) AS managerTitle 
From PeopleTable
inner join... other tables... 
```

# java - 如果 HashMap 名称为 Emply，则打印消息

> ID：13868887
> 
> 赞同：1
> 
> 时间：2012-12-13T21:36:07.960
> 
> 标签：java, hashmap

我有一个程序，当你输入

> 圈子名称

在终端中，“名称”进入 HashMap，然后我可以输入

> 名称可见

圆圈将出现在画布上，或者

> 名字看不见

然后会消失。我正在使用 if else 语句来调用方法。我还创建了一个名为忘记的语句，所以当我输入

> 名字忘记

它将从 HashMap 中删除“名称”，然后如果圆圈可见，则使圆圈不可见。

```
private void execute(String[] commands)
{

    String basicCommand = commands[0];
    Shape name = maps.get(commands[0]);
    if (commands.length >1) {
    if(basicCommand.equals("circle")) {
    //This Names the object Circle and Create a new Circle 
       maps.put(commands[1], new Circle());
    }
    else if(name != null && "visible".equals(commands[1])) {
        makeACircle(name);
    }
    else if(name != null && "forget".equals(commands[1])) {
        makeItInvisible(name);
        maps.remove(commands[0]);
    }
    else if(name != null && "invisible".equals(commands[1])) {
        makeItInvisible(name);
    }
    else if(basicCommand.equals("help")) {
        printHelp();
    }

        //This Should Print A Message if there is no Circle name 
        // in HashMap
    else if(commands[0] != null ) {
        System.out.println("Not In HashMap " + basicCommand);
    }
    else {
        System.out.println("Unknown command: " + basicCommand);
    }
} 
```

}

如果我使用

> 名字忘记

它将从 HashMap 中删除名称

如果您键入“名称可见”的内容，我需要它在“名称”不在 HashMap 中时打印一条消息，我需要一条打印类似“不在 HashMap 中”的消息。

我用我的 if else 语句尝试了它，但它下面的任何东西都不起作用，也无法让它工作

![在此处输入图像描述](../Images/0659aad1ac34ad80fd667e3777c7ba8b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:07:50.800

看起来像一个拼写错误。在您的程序中，它写成“circle”，而您输入了带有大写字母的“Circle”。

尝试使用equalsIgnoreCase 而不是equals。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T21:57:54.950

在 hashmap 中搜索键是所有语言（包括 Java）的一种非常标准的方法。只需使用您的“名称”键在您的哈希图上调用以下内容。

public boolean containsKey(对象键)

更多信息在这里：

[http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#containsKey(java.lang.Object](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#containsKey(java.lang.Object) )

每当用户请求对他们认为在画布上的对象执行操作时，都可以使用它。对于您的代码：

```
if(!maps.containsKey(name))  {
    System.out.println("No object with name" + name);
} 
```

# ruby - 尝试使用 Ruby 中的正则表达式从 json 字符串中删除 \"id\":x

> ID：13868897
> 
> 赞同：0
> 
> 时间：2012-12-13T21:37:01.377
> 
> 标签：ruby, regex, json

我有一个看起来像的 JSON 字符串，`{\"heading\":\"Test\",\"id\":1}`我想从字符串中擦除 ID 数据。

我试过`test.gsub(/\,\\"id\\"\:d+/, '')`了，但这不起作用。

如何最好地实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:48:29.990

Sergio 的 JSON.parse 是您应该考虑的。但是，除此之外，您看到的那些`\`' 可能并不是字符串的一部分。这就是 irb 的显示方式。

所以`test.gsub(/,"id":\d+/, '')`应该是你想要的。（还修复了正则表达式中的一些其他小错误）。

# android - Android隐藏的Xml文件

> ID：13868901
> 
> 赞同：0
> 
> 时间：2012-12-13T21:37:08.133
> 
> 标签：android, xml

我正在 Android 中创建一个应用程序，我想在其中指定特定格式的数据，以便以后可以从文件中进行排序和检索。

我已经阅读了一些关于解析 XML 文件的内容，但我不希望我的文件在存储中可见，而是应用程序本身的一部分“隐藏在应用程序中”。

有没有人这样做过？

//亨里克

# c++ - 使用 GCC 构建和导入 Boost.python 模块的过程？

> ID：13868903
> 
> 赞同：3
> 
> 时间：2012-12-13T21:37:12.250
> 
> 标签：c++, python, gcc, boost, boost-python

我已经设法编译了一个 Boost.Python 的“第一次尝试”，但我不确定如何将它导入 python 并调用它包含的方法。我的源文件如下：

```
#include <stdlib.h>
#include <string>
#include <boost/python.hpp>

using namespace boost::python;

int test(int i)
{
       fprintf(stderr, "%s:\n", __FUNCTION__);
       return i * 5;
}

BOOST_PYTHON_MODULE(ipg)
{
       using namespace boost::python;
       def("test", test);
} 
```

我的makefile包含：

```
# Which compiler?
CC=c++

# Which flags for object files?
OFLAGS=-c -Wall -fPIC

# Which flags for the output binary?
BFLAGS=-Wall -shared -o ipg

# Which flags for boost python?
BPFLAGS=-I/usr/include/python2.7
BLIBS=-lpython2.7 -lboost_python -lboost_system

# Make.
all: source/python.cpp
    $(CC) $(BOUT) $(BFLAGS) $(BPFLAGS) $? $(BLIBS) 
```

和我的测试脚本：

```
import sys

# My modules.
import ipg

ipg.test() 
```

输出二进制文件放在测试脚本旁边，然后运行测试脚本。这会导致以下错误：

> Traceback（最近一次调用最后一次）：文件“test.py”，第 4 行，在 import ipg ImportError: No module named ipg

我应该使用什么标志来编译我的输出二进制文件，我应该如何将它导入 python？我以前在 Windows 上使用过 boost.Python，但那是很久以前的事了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T22:14:39.793

在 Linux 上，如果您的模块被调用`ipg`，那么您需要创建一个名为`ipg.so`. 这是一个简单的makefile；

```
ipg.o:
    g++ -o ipg.o -c ipg.cc -Wall -fPIC -I/usr/include/python2.7
ipg.so: ipg.o
    g++ -shared -o ipg.so ipg.o -lpython2.7 -lboost_python -lboost_system 
```

# javascript - javascript regexp exec 不一致

> ID：13868904
> 
> 赞同：2
> 
> 时间：2012-12-13T21:37:18.147
> 
> 标签：javascript, regex

多次执行相同的正则表达式匹配时，我看到了一个奇怪的行为：

```
var r = /(.*)/g
var d = "a"

console.log(r.exec(d))
console.log(r.exec(d)) 
```

这会产生：

```
["a", "a"]
["", ""] 
```

为什么它第二次不匹配任何东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T21:39:00.523

这就是`g`旗帜的作用。当您使用它时， exec 将从上一个匹配的末尾继续下一个搜索。但是在您的第一个匹配 ( `a`) 之后，字符串中没有任何内容，因此您得到一个空匹配。此空匹配通常用于终止`exec`-loop。如果您知道只有一个匹配项，请删除`g`（这意味着“全局”搜索）。

请注意，您可以（并且应该）摆脱这些括号。它们只会让你付出代价。没有它们，您将只能`a`在结果数组中得到一个。

如果您确实想考虑多个匹配项，但忽略最后一个空匹配项，请使用循环技术：

```
var match;
while(match = r.exec(d))
    // process match[0] here 
```

请注意，如果您确实有（有意义的）捕获组，则仅需要此循环。如果没有（如果您只想获得完全匹配），您可以使用`match`elclanrs 指出的：

```
var matches = d.match(r); 
```

**编辑：**

我才意识到，我所说的大部分内容都是部分正确的，但不是真正的原因`["", ""]`。真正发生的是：第一次`.*`匹配`a`。引擎在上一次匹配之后（之后`a`）第二次尝试继续搜索。由于您的模式有`.*`（这意味着 0 个或更多字符），它现在将继续匹配空字符串（因为它们与模式匹配）。并且匹配一个空字符串也不会提高下一次搜索的位置。因此，即使有`.match`你也会得到`["a", ""]`（`match`在这种情况下足够聪明地中止）。

实际上，如果您使用带有循环技术的正则表达式，您将得到一个无限循环（因为`match = ["", ""]`显然不会导致循环终止）。但无论如何，你应该意识到你的模式是荒谬的，因为`*`. 它可以匹配任何东西（包括任何东西）。至少使用`.+`. 无论出于何种目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:39:20.117

`exec`返回第一个匹配项并将内部指针向前移动。这样，第二次调用将返回第二次匹配。

由于只有一个匹配项，因此第二次调用返回一个空结果。

# c++ - 无论方向如何，从一个整数循环到另一个整数，开销最小

> ID：13868906
> 
> 赞同：2
> 
> 时间：2012-12-13T21:37:25.727
> 
> 标签：c++, algorithm

假设我得到两个无符号整数：

```
size_t A, B; 
```

它们加载了一些随机数，A 可能大于、等于或小于 B。我想从 A 循环到 B。但是，比较和增量都取决于哪个更大。

```
for (size_t i = A; i <= B; ++i) //A <= B
for (size_t i = A; i >= B; --i) //A >= B 
```

显而易见的蛮力解决方案是将这些嵌入到 if 语句中：

```
if (A <= B)
{
 for (size_t i = A; i <= B; ++i) ...
}
else
{
 for (size_t i = A; i >= B; --i) ...
} 
```

请注意，我必须**从**A循环**到**B，因此我不能有两个中间整数并将 A 和 B 扔到正确的插槽中，然后进行相同的比较和增量。在“A 更大”的情况下，我必须递减，反之必须递增。

我可能会有许多需要相同设置的嵌套循环，这意味着每个 if/else 都会有一个函数调用，我必须通过它传递大量变量，或者另一个 if/else 与另一个 if/else 等。

在不牺牲太多速度的情况下，是否有任何棘手的捷径可以避免这种情况？函数指针和紧密的、经常重复的循环中的东西对我来说听起来非常痛苦。有一些疯狂的模板解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T21:40:24.557

我的错误，最初误解了这个问题。

要从 to 创建一个包容性循环`A`，`B`您遇到了一个棘手的情况。你需要循环一个*过去*的B。所以你在循环之前计算出那个值。我在`for`循环中使用了逗号运算符，但为了清楚起见，您始终可以将其放在外面。

```
int direction = (A < B) ? 1 : -1;
for( size_t i = A, iEnd = B+direction; i != iEnd; i += direction ) {
    ...
} 
```

如果您不介意修改`A`and `B`，您可以这样做（`A`用作循环变量）：

```
for( B+=direction, A != B; A += direction ) {

} 
```

我玩了一会……不知道函数指针的内联规则是什么，或者这是否更快，但无论如何这是一个练习。=)

```
inline const size_t up( size_t& val ) { return val++; }
inline const size_t down( size_t& val ) { return val--; }

typedef const size_t (*FnIncDec)( size_t& );

inline FnIncDec up_or_down( size_t A, size_t B )
{
    return (A <= B) ? up : down;
}

int main( void )
{
    size_t A = 4, B = 1;
    FnIncDec next = up_or_down( A, B );

    for( next(B); A != B; next(A) ) {
        std::cout << A << endl;
    }

    return 0;
} 
```

* * *

对此作出回应：

> 这不适用于 A = 0, B = UINT_MAX 的情况（反之亦然）

那是对的。问题是由于溢出，初始值`i`和变得相同。`iEnd`为了解决这个问题，您将改为使用`do->while`循环。这删除了初始测试，这是多余的，因为您将*始终*至少执行一次循环体......通过删除第一个测试，您第一次遍历*终止*条件。

```
size_t i = A;
size_t iEnd = B+direction;

do {
    // ...
    i += direction;
} while( i != iEnd ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T22:10:25.920

```
size_t const delta = size_t(A < B? 1 : -1);
size_t i = A;
for( ;; )
{
    // blah

    if( i == B ) { break; }
    i += delta;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T23:44:29.053

你打算如何处理迭代值？

如果这将是数组中的某个索引，您应该使用相关`iterator`或`reverse_iterator`类，并围绕这些实现您的算法。您的代码将更加健壮，并且更易于维护或发展。此外，标准库中的很多工具都是使用这些接口构建的。

实际上，即使你不这样做，你也可以实现一个返回自己索引的迭代器类。

您还可以使用一点元编程魔法来定义您的迭代器将如何根据`A`and的顺序运行`B`。

在继续之前，请考虑这仅适用于和的**常数值**。`A``B`

```
template <int A,int B>
struct ordered {
    static const bool value = A > B ? false: true;
};

template <bool B>
int pre_incr(int &v){
    return ++v;
}

template <>
int pre_incr<false>(int &v){
    return --v;
}

template <int A, int B>
class const_int_iterator : public iterator<input_iterator_tag, const int>
{
    int p;
  public:
    typedef const_int_iterator<A,B> self_type;
    const_int_iterator() : p(A) {}
    const_int_iterator(int s) : p(s) {}
    const_int_iterator(const self_type& mit) : p(mit.p) {}
    self_type& operator++() {pre_incr< ordered<A,B>::value >(p);return *this;}
    self_type operator++(int) {self_type tmp(*this); operator++(); return tmp;}
    bool operator==(const self_type& rhs) {return p==rhs.p;}
    bool operator!=(const self_type& rhs) {return p!=rhs.p;}
    const int& operator*() {return p;}
};

template <int A, int B> 
class iterator_factory {    
  public:
    typedef const_int_iterator<A,B> iterator_type;
    static iterator_type begin(){
        return iterator_type();
    }
    static iterator_type end(){
        return iterator_type(B);
    }
}; 
```

在上面的代码中，我定义了一个`iterator`从 A 到 B 的值的准系统类。有一个简单的元编程测试来确定 A 和 B 是否按升序排列，并选择正确的运算符 ( `++`or `--`) 来遍历这些值。

最后，我还定义了一个简单的工厂类来保存`begin`和`end`迭代方法，使用这个类可以让你的依赖类型值 A 和 B 只有一个声明点（我的意思是你只需要使用 A 和 B 一次这个容器，以及从那里生成的迭代器将取决于这些相同的 A 和 B，从而在一定程度上简化了代码）。

这里我提供一个简单的测试程序，输出值从 20 到 11。

```
#define A 20
#define B 10

typedef iterator_factory<A,B> factory;

int main(){

   auto it = factory::begin();

   for (;it != factory::end();it++)
      cout << "iterator is : " << *it << endl;

} 
```

不过，使用标准库可能会有更好的方法来做到这一点。

使用`O`and `UINT_MAX`for `A`and的问题`B`被提出来了。我认为应该可以通过使用这些特定值重载模板来处理这些情况（留给读者作为练习）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T22:09:41.517

```
size_t A, B;

if (A > B) swap(A,B);  // Assuming A <= B, if not, make B to be A

for (size_t i = A; A <= B; ++A) ... 
```

# java - 如何设置框架以在摇摆中显示新面板？

> ID：13868908
> 
> 赞同：1
> 
> 时间：2012-12-13T21:37:54.137
> 
> 标签：java, swing, jframe, jpanel

我显然在这里遗漏了一些东西。

如何更改摆动框架以显示全新的面板？

如： 1\. 显示一个带有新内容的全新面板或 2\. 显示使用我的新添加清除的相同面板

我已经在另一个程序中显示了我的新面板，它可以正确创建和显示。

但是，当带有我的按钮的面板以前在框架中时，它永远不会显示我的新面板。

我调用 contentPane.revalidate(); 在我的代码中更新了几次按钮，这些按钮完美地更新了它们，只有当我尝试删除旧按钮并添加新按钮时才会出现问题。

将新面板添加到 contentPane 后，我尝试过：

```
contentPane.validate();
contentPane.revalidate();
contentPane.removeAll();        
contentPane.repaint();
setContentPane(contentPane); 
```

但它永远不会改变。

```
 @Override
public void actionPerformed(ActionEvent e) 
{
    String buttonPressed = e.getActionCommand();
    int pos = Integer.valueOf(buttonPressed);

    if (Control.model.cardsRemaining == 0) 
    {
        contentPane.removeAll();
        //contentPane.validate();
        //contentPane = new JPanel();
        //contentPane.add(createSuccess());
        contentPane = createSuccess();
        contentPane.revalidate();
        contentPane.repaint();      

        System.out.println("entered success");
    }

    else 
    {
        System.out.println("Cards left: " + Control.model.cardsRemaining);
        action = Control.model.ReceiveCardsTurned(pos);

        keypadArray[pos].setIcon(myIcons[pos]);
        currentTime.setText("" + Control.model.time);
        currentScore.setText("" + Control.model.score);

        System.out.println("this card: " + pos + "last card: "
                + Control.model.lastCard);

        if (action == "unturn") 
        {
            try 
            {
                Thread.sleep(1000);
            }

            catch (InterruptedException e1) 
            {
                e1.printStackTrace();
            }

            contentPane.revalidate();
            keypadArray[pos].setIcon(back);
            keypadArray[Control.model.lastCard].setIcon(back);
        }

        //System.out.println(action);
    }
}

private JPanel createSuccess() 
{
    //final 
    JPanel Success = new JPanel();
    JLabel image = new JLabel(success);
    Success.add(image);

    return Success; 
} 
```

这也在我的代码中更进一步：

```
ImageIcon success = new ImageIcon("icons/success.png"); 
```

和：

```
JPanel contentPane = new JPanel(); 
```

刚试过：

```
contentPane = createSuccess(); 
frame.setContentPane(contentPane);  
frame.pack(); 
```

第 268 行是：frame.setContentPane(contentPane);

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at pairs.GUI.actionPerformed(GUI.java:268)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$200(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.awt.EventQueue$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

谢谢我的朋友完美地工作：

```
contentPane.removeAll();
contentPane.add(createSuccess());
setContentPane(contentPane); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T22:21:44.660

您的代码为变量分配了一个新的引用`contentPane`，这不会改变屏幕上已经存在的内容，它只是将`contentPane`引用的内容（可能是屏幕上的内容）移动到其他内容，而将屏幕上的内容准确地留在原处。

尝试将新面板添加到`contentPane`

```
contentPane.removeAll();
contentPane.add(createSuccess()); 
```

如果要切换视图，[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)是更好的选择。

如果您只是想“重置”视图，则必须实际编写代码以将视图的内容返回到“默认”状态。在这种情况下，您实际上最好创建一个包含视图所需字段并提供管理方法的自定义组件。

# azure - Azure 中的关联组

> ID：13868910
> 
> 赞同：2
> 
> 时间：2012-12-13T21:38:04.060
> 
> 标签：azure, azure-sql-database, azureservicebus, azure-affinity-group

我不明白为什么某些 Azure 资源可以与 Affinity Group 对齐，而其他资源则不能。

示例：我刚刚尝试创建一个服务总线命名空间。我想将其与现有的关联组对齐，但我只能选择一个区域。我在尝试创建 SQL 数据库服务器时遇到了同样的问题。

这很可能是我对 Affinity Groups 究竟如何工作的误解，但我不明白其中的不一致之处。

我在这里错过了什么？有人可以解释无法将服务总线命名空间与关联组对齐的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:49:40.700

这不完全是技术原因。这与微软在名为 Windows Azure 的平台启动时的内部协调方式有关。您必须记住，不同的团队创建了服务总线（以前是 Biztalk 服务）、SQL 数据库（以前是 SQL Azure、SQL Server 数据服务等）和 Windows Azure（以前是 Red Dog）。每个服务都是独立创建的，实际上甚至不依赖于另一个（至少在开始时）。

我现在什至不记得那里有无数不同的品牌和平台——这不再重要了。现实情况是，仍然有不同的团队来构建这些产品，而且他们一开始并不总是一致的。SQL 数据库曾经被部署到不同的集群中（不确定这是否是真的），所以关联组不相关。与服务总线相同。现在，请记住关联组仅适用于 Windows Azure 计算和存储。随着时间的推移，我会期待一个更有凝聚力的体验（比如门户）。但是，一些概念仍然植根于构建它们的团队所在的位置。

# java - Javassist - 是否可以将类从私有更改为公共

> ID：13868912
> 
> 赞同：0
> 
> 时间：2012-12-13T21:38:19.347
> 
> 标签：java, javassist

是否可以使用 javassist api 将 jar 中的类从私有更改为公共。我已经知道如何解压缩 jar、加载 ctclass、进行更改（例如修改派生类名称），然后将所有内容压缩到一个新的 jar 中。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:47:42.667

应该可以只调用[CtClass.setModifiers()](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/html/javassist/CtClass.html#setModifiers%28int%29)。

# delphi - 使用delphi 2010替换UTF-8文件中的unicode字符

> ID：13868914
> 
> 赞同：1
> 
> 时间：2012-12-13T21:38:27.490
> 
> 标签：delphi, delphi-2010

我正在尝试用字符（十进制值 65）替换 UTF-8 文件中的字符（十进制值 197）

我可以加载文件并将其放入字符串中（尽管可能不需要这样做）

```
SS := TStringStream.Create(ParamStr1, TEncoding.UTF8);
SS.LoadFromFile(ParamStr1);
//S:= SS.DataString;
//ShowMessage(S); 
```

但是，如何将所有 197 替换为 65，并将其另存为 UTF-8？

```
 SS.SaveToFile(ParamStr2);
 SS.Free; 
```

- - - - - - - 编辑 - - - - - - - -

```
reader:= TStreamReader.Create(ParamStr1, TEncoding.UTF8);
 writer:= TStreamWriter.Create(ParamStr2, False, TEncoding.UTF8);

 while not Reader.EndOfStream do
 begin
  S:= reader.ReadLine;
  for I:= 1 to Length(S)  do
  begin
   if Ord(S[I]) = 350 then
   begin
    Delete(S,I,1);
    Insert('A',S,I);
   end;
  end;
  writer.Write(S + #13#10);
 end;

 writer.Free;
 reader.Free; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T23:02:03.577

十进制`197`是十六进制`C5`，十进制`65`是十六进制`41`。

`C5`本身不是一个有效的 UTF-8 八位字节，但`41`它是。所以我不得不假设你实际上指的是 Unicode 代码点`U+00C5 LATIN CAPITAL LETTER A WITH RING ABOVE`，而`U+0041 LATIN CAPITAL LETTER A`不是。

`U+00C5`在 UTF-8 中编码为`C3 85`，并被`U+0041`编码为`41`。要执行您的要求，您必须解码 UTF-8，替换代码点，然后重新编码回 UTF-8。 `StringReplace()`可以很好地解决这个问题，例如：

```
SS := TStringStream.Create('', TEncoding.UTF8);
SS.LoadFromFile(ParamStr1);

S := StringReplace(SS.DataString, 'Å', 'A', [rfReplaceAll]);

SS2 := TStringStream.Create(S, TEncoding.UTF8);
SS2.SaveToFile(ParamStr2);

SS2.Free;
SS.Free; 
```

或者：

```
reader := TStreamReader.Create(ParamStr1, TEncoding.UTF8);
writer := TStreamWriter.Create(ParamStr2, False, TEncoding.UTF8);

while not Reader.EndOfStream do
begin
  S := reader.ReadLine;
  S := StringReplace(S, 'Å', 'A', [rfReplaceAll]);
  writer.WriteLine(S);
end;

writer.Free;
reader.Free; 
```

**更新：**根据其他评论，看起来您实际上对 Unicode codepoint 并不感兴趣`U+00C5 LATIN CAPITAL LETTER A WITH RING ABOVE`，而是对`U+015E LATIN CAPITAL LETTER S WITH CEDILLA`以 UTF-8 编码为`C5 9E`. 如果这是真的，那么在 UTF-8 数据解码后调用时只需替换`Å`为：`Ş``StringReplace()`

```
S := StringReplace(S, 'Ş', 'A', [rfReplaceAll]); 
```

# .net - 在不停止服务的情况下如何清除正在运行的 Windows 服务的 System.Runtime.Caching.MemoryCache？

> ID：13868917
> 
> 赞同：0
> 
> 时间：2012-12-13T21:38:33.817
> 
> 标签：.net, caching, service, memorycache

我有一项服务，我想在其中使用 MemoryCache，但是，我的要求之一是我需要能够手动清除所述 MemoryCache，而无需停止服务。

目前我们正在使用企业库中的 CacheManager（使用独立存储，所以我认为它在内存中，然后在需要时转储到文件），我们通过删除文件手动清除缓存。关于如何使用新的缓存库做类似事情的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-13T21:09:58.193

听起来您当前使用企业库的缓存具有文件系统依赖性。[您可以通过将HostFileChangeMonitor](http://msdn.microsoft.com/en-us/library/vstudio/system.runtime.caching.hostfilechangemonitor%28v=vs.100%29.aspx)与每个缓存项相关联来对 MemoryCache 执行相同的操作。当监控的文件在磁盘上发生变化时，缓存项将被清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:37:09.903

无法清除服务外部的缓存，因为它绑定到 AppDomain。您需要自己实现一个清除缓存的入口点。

之后，只需[处理](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.dispose.aspx)内存缓存并创建一个新缓存。

# ruby-on-rails - 使用 Rails/CarrierWave 上传图像：部署应用后 ImageMagick 如何工作？

> ID：13868918
> 
> 赞同：0
> 
> 时间：2012-12-13T21:38:34.167
> 
> 标签：ruby-on-rails, imagemagick, carrierwave

我正在尝试为我的 Rails 应用程序中的模型启用图像上传。我正在使用 CarrierWave gem，但为了进行任何图像处理，例如缩略图调整大小，我必须在实际计算机上安装 Imagemagick 才能与 Rmagick gem 一起使用。

问题是：我将把这个应用程序交给一位画家，她将登录并上传她自己的艺术作品。这意味着她不会在我安装了 Imagemagick 的开发环境中。我真的很困惑 Imagemagick 在这里的作用——当应用程序被部署时，图像操作会不再起作用，还是它会以某种方式持续存在？

如果我对此的理解完全错误，请随时纠正我。或者，有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T21:41:31.367

必须安装 ImageMagick 才能安装 RMagick；RMagick 是 ImageMagick 库的接口，并调用 ImageMagick 的函数来进行处理。

如果部署的机器上不存在 ImageMagick 库和开发头文件，则 RMagick 安装将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:49:53.807

**当您将**您的应用程序“移交”给painter 时，这真正意味着您将把您的应用程序部署到像[**Heroku**](http://www.heroku.com)这样的平台（即生产环境），该平台将为您托管您的Rails 应用程序。如果您选择 Heroku，一切都会好起来的，因为他们的 Rails 设置包含 Imagemagick，您无需执行任何操作。

这里的关键是确保无论您使用哪个提供商来托管您的 Rails 应用程序，他们要么安装了 Imagemagick，要么您可以手动执行此操作。

就我个人而言，我会选择 Heroku 之类的东西，它很简单，而且界面光滑漂亮。这是他们的设置指南：[https ://devcenter.heroku.com/articles/rails3](https://devcenter.heroku.com/articles/rails3)

# iphone - HTML5 输入类型数字在 iPhone 上删除小数位

> ID：13868919
> 
> 赞同：1
> 
> 时间：2012-12-13T21:38:35.680
> 
> 标签：iphone, html

> **可能重复：**
> [如何使 HTML5 数字字段显示尾随零？](https://stackoverflow.com/questions/7790561/how-can-i-make-the-html5-number-field-display-trailing-zeroes)

我正在尝试输入像“1.00”这样的货币值，但是当我输入这个值时，0 被删除并变为“1”，但如果我输入 1.11，它仍然是 1.11。

我正在使用`<input type="number">`. 我尝试过使用模式，但总是删除额外的 0。这也只发生在 type="number" 的 iPhone 上

有谁知道如何解决这个问题？也许是一种使用 type="text" 的方法，但是让手机打开数字视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T21:46:23.307

这是我用于移动购物[计算器](http://calc.btask.net)的内容。

```
<input type="number" name="price" step="0.01" min="0.01" max="99" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T21:41:27.340

这是一个可能的技巧：

使用`position:absolute`and `visilibity:hidden`，将您的`number`输入置于输入之上`text`。然后，在数字输入上使用`onchange`事件处理程序，将`parseFloat(this.value).toFixed(2)`其放入文本输入中。

# python - Python 队列 - 最多运行 n 个线程

> ID：13868922
> 
> 赞同：3
> 
> 时间：2012-12-13T21:38:41.380
> 
> 标签：python, multithreading, queue

场景：

我有一个非常大的数据库模型迁移正在进行一个新的构建，我正在研究如何将当前实时数据从 web 应用程序迁移到本地测试数据库。

我想在 python 中设置一个脚本，该脚本将同时处理我的模型的迁移。我有我的模型实例`from_legacy`的`to_legacy`方法。到目前为止，我已经加载了我的所有实例并`threads`为每个实例创建，每个线程都从核心`threading`模块子类化，并使用一种`run`方法来进行转换并保存结果。

我想让程序中的主循环构建这些线程的一大堆实例，并开始一个一个地处理它们，在它工作时最多同时运行 10 个，并输入下一个在其他人完成迁移时进行处理。

我不知道如何正确利用队列来做到这一点？如果每个线程都代表迁移的全部任务，我是否应该先加载所有实例，然后创建一个设置为 10 的实例`Queue`，`maxsize`并且只跟踪当前正在运行的队列？大概是这样的？

```
currently_running = Queue()
for model in models:
  task = Migrate(models) #this is subclassed thread
  currently_running.put(task)
  task.start() 
```

在这种情况下，依靠`put`调用来阻塞，而它是在容量？如果我要走这条路，我会怎么打电话`task_done`？

或者更确切地说，队列是否应该包括所有任务（不仅仅是开始的任务）并用于`join`阻止完成？调用`join`线程队列是否会启动包含的线程？

解决“最多有 N 个正在运行的线程”问题的最佳方法是什么？队列应该扮演什么角色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T21:59:39.553

[尽管没有记录](https://stackoverflow.com/a/3386632/190597)，该`multiprocessing`模块有一个`ThreadPool`类，顾名思义，它创建了一个线程池。它[与 multiprocessing.Pool 类共享相同的 API](http://docs.python.org/2/library/multiprocessing.html#module-multiprocessing.pool)。

然后，您可以使用以下命令将任务发送到线程池`pool.apply_async`：

```
import multiprocessing.pool as mpool

def worker(task):
    # work on task
    print(task)     # substitute your migration code here.

# create a pool of 10 threads
pool = mpool.ThreadPool(10)
N = 100

for task in range(N):
    pool.apply_async(worker, args = (task, ))

pool.close()
pool.join() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:53:03.773

这可能应该使用信号量来完成，[文档](http://docs.python.org/2/library/threading.html#semaphore-objects)中的示例暗示了您要完成的工作。

# sql - 使用错误的 xml 命名空间解析 SQL

> ID：13868927
> 
> 赞同：0
> 
> 时间：2012-12-13T21:38:56.480
> 
> 标签：sql, xml, tsql, xml-parsing

您好我有以下 SQL 来尝试解析 xml 并提取“OrderNumber”。我遇到的问题是这个 xml（我无法控制）有一个奇怪的 xml 命名空间。我只是为了这个例子把它改成了 abc.com，但它是别的东西。无论如何，当存在该命名空间时，T-SQL 在结果中返回空值。所以它不能很好地与命名空间配合使用。如果我手动删除命名空间或通过 T-SQL 进行搜索和替换，它工作得很好。我想我可以做一个搜索和替换，但那个解决方案让我很困扰。想知道是否有其他人现在有更好的解决方法？也许可以解释为什么它不喜欢命名空间？非常感谢一些建议。谢谢！

```
Declare  @Transmission xml

set  @Transmission = '<Transmission>
  <Requests>
    <SubmitOrdersRequest>
      <Orders>
        <Order xmlns="http://www.abc.com">
          <OrderNumber>123</OrderNumber>
        </Order>
      </Orders>
    </SubmitOrdersRequest>
  </Requests>
</Transmission>'

select @Transmission.value('(Transmission/Requests/SubmitOrdersRequest/Orders/Order/OrderNumber/text())[1]', 'varchar(100)') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T21:47:44.220

子节点继承父节点的命名空间，除非自己给定命名空间。您必须使用 定义名称空间`WITH XMLNAMESPACES`，并使用它们正确限定节点名称。

```
Declare  @Transmission xml
set  @Transmission = '<Transmission>
  <Requests>
    <SubmitOrdersRequest>
      <Orders>
        <Order xmlns="http://www.abc.com">
          <OrderNumber>123</OrderNumber>
        </Order>
      </Orders>
    </SubmitOrdersRequest>
  </Requests>
</Transmission>';

with xmlnamespaces('http://www.abc.com' as ns1)
select @Transmission.value('(Transmission/Requests/SubmitOrdersRequest/Orders/ns1:Order/ns1:OrderNumber/text())[1]', 'varchar(100)') 
```

注意：命名空间的原因是名称是上下文的东西。 `Order`在您的情况下可能意味着购买，但在另一种情况下，它可能意味着展示架订单。命名空间使名称更具唯一性。

# c# - 如何满足既可以为空也可以为空的对象

> ID：13868938
> 
> 赞同：1
> 
> 时间：2012-12-13T21:39:41.850
> 
> 标签：c#, .net, sql, sql-server, oop

我有一个对象，特别是以下内容：

`table.ExtendedProperties["MS_Description"].Value`

如果没有属性，`Value`则为空。如果有一个属性，但它是空的，`Value.toString()`则为`""`。

因此，我想创建一个满足两种可能性的 if 语句。这是我到目前为止所做的：

```
if (table.ExtendedProperties["MS_Description"] == null ||
    table.ExtendedProperties["MS_Description"].Value.ToString().Equals("")) 
```

问题是，如果它为空，它仍在检查右侧的条件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:42:19.463

你可以做：

```
if (table.ExtendedProperties["MS_Description"] == null || string.IsNullOrEmpty(table.ExtendedProperties["MS_Description"].Value)) 
```

您的代码错误的原因是因为您不检查是否`table.ExtendedProperties["MS_Description"].Value`为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T21:42:04.737

因此`Value`不是字符串，那么您必须处理所有条件：

```
var description = table.ExtendedProperties["MS_Description"];
if (description == null ||
    description.Value == null || 
    description.Value.ToString().Equals(""))
    // no value 
```

*顺便说一句*，您的代码不太正确

```
if (table.ExtendedProperties["MS_Description"] == null ||
    table.ExtendedProperties["MS_Description"].Value.ToString().Equals("")) 
```

不是检查值是否为空，而是检查是否`table.ExtendedProperties["MS_Description"]`不为空。确实如此。你走得更远，但如果`table.ExtendedProperties["MS_Description"].Value`是 null （你没有检查，还记得吗？），你会得到 NullReferenceException `ToString()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T21:59:28.947

我不确定您指的是`DataTable.ExtendedProperties`属性还是其他东西，但如果是，属性返回 a `System.Data.PropertyCollection`，它继承自`System.Collections.HashTable`.

大部分方法和属性，包括这里讨论的索引器（“Item”），都是直接继承自HashTable，所以一般来说table.ExtendedProperties[key]可以返回任何对象，包括null。

请注意，您还可以调用`DataTable.ExtendedProperties.ContainsKey(object key)`以确定 PropertyCollection 是否包含特定键。

您知道调用时要检索的对象类型`table.ExtendedProperties["MS_Description"].Value`吗？

如果是这样，您可能可以使用其他属性来确定该属性是否已设置等。

根据对象`table.ExtendedProperties["MS_Description"]`的类型，您甚至可以执行以下操作：

```
if ((table.ExtendedProperties["MS_Description"] ?? "").ToString().Length == 0) {
      .....
} 
```

这将考虑到所有的可能性：

*   密钥不存在
*   键存在，但值为空
*   键存在且值为空

只要`table.ExtendedProperties["MS_Decription"]`对象在其 Value 属性为 null 或为空时返回“”。因此，有关返回的对象的更多信息可能会有很长的路要走！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T21:42:28.960

```
string.IsNullOrEmpty(table.ExtendedProperties["MS_Description"].Value) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T21:48:15.033

看起来`table.ExtendedProperties["MS_Description"]`永远不会为空，您应该为空检查`Value`属性

```
string value = table.ExtendedProperties["MS_Description"].Value;
if (value == null || value.ToString().Equals(""))
// OR 
if (String.IsNullOrEmpty(value)) 
```

如果`table.ExtendedProperties["MS_Description"]`可以返回null，那么你需要

```
if (table.ExtendedProperties["MS_Description"] == null ||
    String.IsNullOrEmpty(table.ExtendedProperties["MS_Description"].Value.ToString() ) 
```

并且由于`table.ExtendedProperties["MS_Description"].Value`可能返回null，那么您需要

```
if (table.ExtendedProperties["MS_Description"] == null ||
    table.ExtendedProperties["MS_Description"].Value == null ||
    String.IsNullOrEmpty(table.ExtendedProperties["MS_Description"].Value.ToString() ) 
```

# php - 推送到负载均衡器上的多个 EC2 实例

> ID：13868943
> 
> 赞同：13
> 
> 时间：2012-12-13T21:40:17.257
> 
> 标签：php, git, nginx, amazon-ec2, load-balancing

我正在尝试找出一种向 ELB（负载均衡器）后面的一组 EC2 服务器实例推送新提交的好方法。每个实例都运行 Nginx 和 PHP-FPM

我想执行以下工作流程，但我不确定向负载均衡器后面的所有实例推出新版本的好方法。

*   开发是在本地机器上完成的
*   准备好更改后，我执行“git push origin master”以将更改推送到 BitBucket（我在其中托管所有 git 存储库）
*   被推送到 bitbucket 后，我​​希望将新版本同时推送到所有 EC2 实例。
*   我想这样做，而不必通过 SSH 连接到每个实例（显然）。

有没有办法配置远程服务器接受远程推送？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T21:10:08.600

是的，我一直这样做（实际上，使用相同的应用程序堆栈）。

1.  使用来自受信任来源的基础 AMI，例如默认的“Amazon Linux”，或者您自己的。

2.  作为启动配置的一部分，使用“用户数据”字段在启动时引导配置过程。这可以像一个 shell 脚本一样简单，它运行`yum install nginx php-fpm -y`并从 S3 存储桶复制文件或从您的存储库中拉取文件。如果您需要更多的灵活性，Amazon 创作的 AMI 还包括对[cloud-init脚本的支持。](https://launchpad.net/cloud-init)如果您需要更强大的功能，您可以使用更改管理和编排工具，例如[Puppet](http://puppetlabs.com/)、[Chef](http://www.opscode.com/chef/)或[Salt](http://saltstack.org/)（我个人最喜欢的）。

3.  至于更新现有实例的代码：有两种思想流派：

    *   充分利用云，并启动一个全新的实例队列，在启动时获取新代码。然后翻转负载平衡器以指向新的队列。它是即时的，如果出现问题，它可以让您快速恢复到旧舰队。几小时（或几天）后，您将关闭旧实例。
    *   您可以使用[Fabric](http://docs.fabfile.org/en/1.5/)或[Capistrano](https://github.com/capistrano/capistrano)之类的工具一次对所有实例进行并行“推送”部署。这通常只是重新执行服务器在启动时运行的相同脚本。Salt 和 Puppet 的 MCollective 也提供了与其基本“拉”配置相结合的类似功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T21:43:33.143

**选项一**

1.  把它推到一台机器上。
2.  在上面创建一个 git 钩子[http://git-scm.com/book/en/Customizing-Git-Git-Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)。
3.  使钩子运行拉到其他机器上。

唯一的问题是，您必须维护要运行更新的机器列表。

**另外的选择**

从您的 bitbucket 帐户中提取 cron 作业。在一个常规的基础上。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T01:01:30.583

这项工作的工具是 Capistrano。

我使用了一个很棒的 gem，叫做[capistrano-ec2group](https://github.com/logandk/capistrano-ec2group)，以便将 capistrano 角色与 EC2 安全组映射。

这意味着您只需将 EC2 安全组（例如 app-web 或 app-db）应用到您的实例，以便 capistrano 知道向它们部署什么。

这意味着您不必在应用程序中维护服务器 IP 列表。

对您的工作流程的更改将是，您将推送然后执行，而不是专注于自动部署推送到 bitbucket

```
cap deploy 
```

如果您真的不想执行步骤，请创建别名：D

```
alias shipit=git push origin master && cap deploy 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-10T05:37:50.153

这个解决方案建立在 E_p 的想法之上。E_p 说问题是你需要在某个地方维护一个服务器列表，以便告诉每个服务器拉新的更新。如果是我，我会在 ec2 中使用标签来帮助识别一组服务器（例如“Role=WebServer”）。这样您就可以使用 ec2 命令行界面列出实例并在每个实例上运行 pull 命令。

```
for i in \
    `ec2din --filter "tag-value=WebServer" --region us-east-1 \
    | grep "running" \
    | cut -f17`\
; do ssh $i "cd /var/www/html && git pull origin"; done 
```

***注意****：我已经测试了获取所有标记实例的 IP 地址并通过 ssh 连接到它们的代码，但没有测试特定`git pull`命令。*

您需要将亚马逊 cli 工具安装在您希望它运行的任何位置，以及为您尝试更新的服务器安装的 ssh 密钥。不确定 bitbucket 的功能是什么，但我猜这段代码将无法在那里运行。您要么需要按照 E_p 的建议进行操作，并将更新推送到单独的管理实例，然后将此代码包含在您的 post-commit 挂钩中，**或者**如果您想避免头痛，您可以像我所做的那样只安装本地计算机上的 CLI 工具，并在您想要部署更新时手动运行它。

感谢 AdamK 对另一个问题的回答，这使得从`ec2din`输出中提取 ip 地址并迭代结果变得很容易：[如何从命令行中终止我的所有 EC2 实例？](https://stackoverflow.com/questions/638352/how-can-i-kill-all-my-ec2-instances-from-the-command-line)

EC2 CLI 工具参考：[http ://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/Welcome.html](http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/Welcome.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T16:52:11.223

您最好的选择可能是实际使用 AMI 进行部署。

就个人而言，我通常有一个暂存实例，我可以将任何 repo 更改拉入其中。一旦我确认它以我想要的方式运行，我就会从该实例创建一个 AMI。

对于部署，我在负载均衡器后面使用了一个自动缩放组（不需要动态缩放或任何东西）。在一个简单的设置中，自动缩放组中有固定数量的服务器（例如 10 个实例）。我会将与自动缩放组关联的 AMI 更改为新的 AMI，然后开始在自动缩放组中一次终止几个实例。所以，假设我有 10 个实例，我终止了两个以将其减少到 8 个实例。自动缩放组配置为至少有 10 个实例，因此它将使用新 AMI 自动启动两个新实例。然后，您可以以对您的负载水平有意义的任何速率继续删除实例，以免影响您的队列的性能。

您显然可以手动执行此操作，即使没有自动缩放组，也可以直接从 ELB 添加/删除实例。

如果您希望实现完全自动化（即持续部署），那么您可能需要考虑使用构建系统，例如 Jenkins，它允许提交启动构建，然后运行必要的 AWS 命令​​来构建AMI 并部署它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-13T18:51:25.133

我正在寻找相同问题的解决方案。我偶然发现了这篇文章，并认为这是一个有趣的方法

[https://gist.github.com/Nilpo/8ed5e44be00d6cf21f22#pc](https://gist.github.com/Nilpo/8ed5e44be00d6cf21f22#pc)

转到“将更改推送到多个服务器”

基本上这个想法是创建另一个远程调用它“生产”或任何你想要的，然后将多个 url（所有服务器的 ip）添加到该远程。这可以通过编辑来完成`.git/config`

然后你可以运行`git push production <branch>`它应该推送到“生产”下列出的所有 url

这种方法的一个要求是服务器上的存储库需要是裸存储库，并且您需要有一个`post-receive`挂钩来更新工作树。

这是一个如何做到这一点的示例：[为裸回购设置接收后挂钩](https://stackoverflow.com/questions/14453411/setting-up-post-receive-hook-for-bare-repo)

# r - 如何在剪贴板中保存或复制使用 Statet/R/Eclipse 制作的图表？

> ID：13868948
> 
> 赞同：2
> 
> 时间：2012-12-13T21:40:29.183
> 
> 标签：r, graphics, graph, statet

我的设置：**Eclipse**、 **R**和**Statet**

我正在使用 Statet 从 Eclipse 内部使用 R。

我制作了一个图表（这是时间序列的图表，以防这是相关信息）。

我现在希望将此图形保存为 JPG 图像（或 BMP 等...），或将此图像复制到剪贴板中。我需要 PowerPoint 演示文稿中的图表。

有谁知道这是怎么做到的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:43:52.213

`jpeg('foo.png')``?jpeg`通过在 statet 提示符下键入可以获得更多帮助。`clipboard`根据您的平台，您还可以使用目标而不是文件名来写入剪贴板- 请参阅`?connections`更多详细信息。

# java - Primefaces 扩展时间轴自动高度值不起作用

> ID：13868954
> 
> 赞同：0
> 
> 时间：2012-12-13T21:41:02.517
> 
> 标签：java, jsf, xhtml, primefaces, primefaces-extensions

我正在使用 primefaces 扩展的时间线组件，当我设置组件“自动”的高度时，另一方面，当我设置高度值时，页面上没有任何组件的视觉视图，它成功地看到了。但是组件的行数（演示中的组数）在我的应用程序中是动态的。我找到了一个解决方案，方法是在渲染之前计算行数，并使用提供计算高度值的 getter 方法在 xhtml 中设置组件的高度值。

五、0.6.1

为什么身高参数的自动值不起作用？有什么想法和最佳解决方案吗？

```
<pe:timeline id="timeline" value="#{scheduleBean.timelines}" 
     axisPosition="top"  
     eventStyle="box"  
     var="event"
     height="auto" width="100%" widgetVar="timelineWidget"> 
```

[http://fractalsoft.net/primeext-showcase-mojarra/sections/timeline/advancedUsage.jsf](http://fractalsoft.net/primeext-showcase-mojarra/sections/timeline/advancedUsage.jsf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:41:53.887

我向 primefaces 扩展开发人员提出了一个问题，他们认为这是一个缺陷。这是组件的错误。

[问题链接](http://code.google.com/p/primefaces-extensions/issues/detail?id=319&colspec=ID%20Stars%20Type%20Status%20Priority%20TargetVersion%20Reporter%20Owner%20Summary)

此问题已由修订版[r1598 关闭。](http://code.google.com/p/primefaces-extensions/source/detail?r=1598)

# regex - 解析文本组

> ID：13868955
> 
> 赞同：-2
> 
> 时间：2012-12-13T21:41:20.163
> 
> 标签：regex

假设我有一个如下所示的文本文件：

```
group 1
group 1
 arbitrary text
group 1
 arbitrary text
group 2
 arbitrary text
 arbitrary text
group 2
group 2
 arbitrary text
# 
```

我想将每个组信息都放在自己的列表中，然后停在“#”处。

清单 1：

```
group 1
group 1
 arbitrary text
group 1
 arbitrary text 
```

清单 2：

```
group 2
 arbitrary text
 arbitrary text
group 2
group 2
 arbitrary text 
```

我已经尝试了几件事，但都没有接近，而我的 lambda 技能几乎不存在。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:02:33.897

使用 System.Text.RegularExpressions.RegEx 类（.NET 框架），这是一个简单的模式，几乎可以满足您的需求：

`group\ (\d+)[\w\W]*group\ \1`

问题是，它没有在下一组开始之前捕获最后一个“任意文本”，并且没有检查 # 字符来停止捕获。但我认为这是一个好的开始:)

```
Regex regex = new Regex(@"group\ (\d+)[\w\W]*group\ \1", RegexOptions.Multiline); 
```

# html - 有没有办法获取 Facebook 的位置更新并将其镜像到另一个网站上？

> ID：13868961
> 
> 赞同：0
> 
> 时间：2012-12-13T21:41:34.353
> 
> 标签：html, css, facebook, checkin

当我在 Facebook 上更新我的位置（或“签到”）到单独的网站时，是否可以镜像？

我正在尝试找出是否有可能，以便如果有人在他们的业务 Facebook 页面上签到，那么“签到”或位置更新会反映在另一个网站上，这样实际上不使用 Facebook 的人就可以看到他们是那里。

如果这是不可能的，那么不用担心 - 只是想看看是否有一个相当简单的过程来实现这一点，然后再进入细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:11:48.490

是的，可以转到 facebook 开发人员。然后工具 › 图形 API 资源管理器获取访问令牌时尝试检查发布签入。您可以使用它来查看您实际获得的数据。您可以使用 jquery ajax 调用它。

# r - 在 R 中的最小和最大允许值之间剪辑值

> ID：13868963
> 
> 赞同：21
> 
> 时间：2012-12-13T21:41:38.200
> 
> 标签：r, vectorization, clip, clamp

在 Mathematica 中，有`Clip[x, {min, max}]` 给出`x`for `min<=x<=max`、`min`for`x<min`和`max`for的命令`x>max`，请参见

[http://reference.wolfram.com/mathematica/ref/Clip.html](http://reference.wolfram.com/mathematica/ref/Clip.html) （[镜像](https://web.archive.org/web/20170816183037/http://reference.wolfram.com/language/ref/Clip.html)）

在 R 中实现这一目标的最快方法是什么？理想情况下，它应该是一个可列出的函数，并且理想情况下应该在单个值、向量、矩阵或数据帧上工作......

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-13T23:26:54.757

`Rcpp`为此`clamp`：

```
cppFunction('NumericVector rcpp_clip( NumericVector x, double a, double b){
    return clamp( a, x, b ) ;
}') 
```

这是一个快速基准测试，显示了它与讨论的其他方法相比如何执行：

```
pmin_pmax_clip <- function(x, a, b) pmax(a, pmin(x, b) )
ifelse_clip <- function(x, a, b) {
  ifelse(x <= a,  a, ifelse(x >= b, b, x))
}
operations_clip <- function(x, a, b) {
  a + (x-a > 0)*(x-a) - (x-b > 0)*(x-b)
}
x <- rnorm( 10000 )
require(microbenchmark)

microbenchmark( 
  pmin_pmax_clip( x, -2, 2 ), 
  rcpp_clip( x, -2, 2 ), 
  ifelse_clip( x, -2, 2 ), 
  operations_clip( x, -2, 2 )
)
# Unit: microseconds
#                        expr      min        lq   median        uq       max
# 1     ifelse_clip(x, -2, 2) 2809.211 3812.7350 3911.461 4481.0790 43244.543
# 2 operations_clip(x, -2, 2)  228.282  248.2500  266.605 1120.8855 40703.937
# 3  pmin_pmax_clip(x, -2, 2)  260.630  284.0985  308.426  336.9280  1353.721
# 4       rcpp_clip(x, -2, 2)   65.413   70.7120   84.568   92.2875  1097.039 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-13T22:45:35.180

这是一个嵌套`pmin`和`pmax`设置边界的方法：

```
 fenced.var <- pmax( LB, pmin( var, UB)) 
```

很难找到更快的方法。包装在默认范围为 3 和 7 的函数中：

```
fence <- function(vec, UB=7, LB=3) pmax( LB, pmin( vec, UB))

> fence(1:10)
 [1] 3 3 3 4 5 6 7 7 7 7 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-13T21:51:19.153

这是一个适用于向量和矩阵的函数。

```
myClip <- function(x, a, b) {
    ifelse(x <= a,  a, ifelse(x >= b, b, x))
}

myClip(x = 0:10, a = 3,b = 7)
#  [1] 3 3 3 3 4 5 6 7 7 7 7

myClip(x = matrix(1:12/10, ncol=4), a=.2, b=0.7)
# myClip(x = matrix(1:12/10, ncol=4), a=.2, b=0.7)
#      [,1] [,2] [,3] [,4]
# [1,]  0.2  0.4  0.7  0.7
# [2,]  0.2  0.5  0.7  0.7
# [3,]  0.3  0.6  0.7  0.7 
```

这是另一个：

```
myClip2 <- function(x, a, b) {
    a + (x-a > 0)*(x-a) - (x-b > 0)*(x-b)
}

myClip2(-10:10, 0, 4)
# [1] 0 0 0 0 0 0 0 0 0 0 0 1 2 3 4 4 4 4 4 4 4 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-10T03:19:44.693

我相信那将[`clamp()`](https://www.rdocumentation.org/packages/raster/versions/2.6-7/topics/clamp)来自`raster`包装。

```
library(raster)
clamp(x, lower=-Inf, upper=Inf, ...) 
```

# python - Arduino串行通信和Python

> ID：13868967
> 
> 赞同：1
> 
> 时间：2012-12-13T21:41:51.813
> 
> 标签：python, arduino

> **可能重复：**
> [Arduino 的 Pyserial 问题 - 适用于 Python shell 但不适用于程序](https://stackoverflow.com/questions/1618141/pyserial-problem-with-arduino-works-with-the-python-shell-but-not-in-a-program)

所以我刚给自己买了一个[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)，现在我正在尝试使用[USB](http://en.wikipedia.org/wiki/Universal_Serial_Bus)与它通信。我已经让它与 Arduino IDE 提供的串行监视器一起工作，现在我正在用[Python](http://en.wikipedia.org/wiki/Python_%28programming_language%29)对其进行测试。

当从 USB 读取数据时，程序应该使板上的 LED 闪烁。

我这样做的方式是：

```
#!/usr/bin/env python
import serial

ser = serial.Serial("/dev/ttyACM0", 9600)
ser.write("something") 
```

这不起作用，但在交互式 shell 中执行每个步骤都有效：

```
>>> import serial
>>> ser = serial.Serial("/dev/ttyACM0", 9600)
>>> ser.write("something") 
```

我试过在关闭之前在脚本中使用超时，但这没有帮助。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:58:47.997

我希望这个链接对你有帮助：[arduino-python](http://principialabs.com/arduino-python-4-axis-servo-control/)

--- 已编辑 ---- 我的道歉

这个概念是从 python 脚本向 arduino 发送一些东西。因此，arduino 可以将其解释为打开或关闭 LED 的命令。

在 Python 空闲

```
>>> import serial
>>> ser = serial.Serial('com7', 9600)
>>> ser.write('ON') 
```

同时在arduino：

```
int LedPin = 13;
char msg = ' ';

void setup(){
  pinMode(LedPin, OUTPUT);
  Serial.begin (9600);
}

void loop()
{
  while (Serial.available()>0)
  {
    msg = Serial.read();
  }

  if (msg=='ON')
  {
    digitalWrite(LedPin, HIGH);
    msg=' ';
  } 
  else if (msg=='ON')
  {
    digitalWrite(LedPin, LOW);
  }

} 
```

# opencv - 无法形成二元分类并使用 predict_prob(): Random Forest, opencv

> ID：13868970
> 
> 赞同：1
> 
> 时间：2012-12-13T21:42:02.460
> 
> 标签：opencv, random, binary, classification

我用opencv做随机森林，我已经成功地建立了森林。但是我需要使用 predict_prob 来知道样本属于第二类的确切机会。我现在它是如何工作的，但是有一个错误说我的森林不是二元分类，我不能使用 predict_prob。如何使我的森林二进制文件？我尝试了很多方法并到处搜索，但没有找到任何线索。

这是我的代码

```
CvMat* data = 0;  
CvMat* responses = 0;  
CvMat* var_type = 0;  

//I skipped some lines

data=cvCreateMat(row_s,1024,CV_32FC1);
responses=cvCreateMat(row_s,1,CV_32FC1);

//load data and responses, responses consist of only 1 and 0

var_type = cvCreateMat( data->cols + 1, 1, CV_8U );  
cvSet( var_type, cvScalarAll(CV_VAR_ORDERED) );  
cvSetReal1D( var_type, data->cols, CV_VAR_CATEGORICAL ); 

CvRTrees forest;
forest.train(data,  CV_ROW_SAMPLE, responses, 0, 0, var_type, 0, 
CvRTParams( 5, 20, 0, false, 2, 0, false, 100, 10, 0, CV_TERMCRIT_ITER )); 
```

在此之后，我可以正确使用 predict() 但我不能使用 predict_prob()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:22:17.930

你用的是哪个版本的opencv？我对 2.4.3 版做同样的事情。我看到我们所做的唯一主要区别是我使用的是 c++ 风格的代码。这是我的代码，这对我有用。

```
void train(){
    cv::Mat types(numberOfClassifierDimensions + 1, 1, CV_8UC1);
    types.setTo(cv::Scalar(CV_VAR_NUMERICAL));
    types.at<char>(numberOfClassifierDimensions, 0) = CV_VAR_CATEGORICAL;

    cv::Mat dataset(0, numberOfClassifierDimensions, CV_32FC1);
    cv::Mat classes(0, 1, CV_8UC1);
    for (int i = 0 ; i < featureWeightsPositive.rows ; ++i){
        dataset.push_back(featureWeightsPositive.row(i));
        classes.push_back(1);
    }
    for (int i = 0 ; i < featureWeightsNegative.rows; ++i){
        dataset.push_back(featureWeightsNegative.row(i));
        classes.push_back(0);
    }

    classifier.train(dataset, classes, types);
}

//the classifier.train() function
void train(cv::Mat trainingData, cv::Mat classifications, cv::Mat varType){

    std::vector<float> priorsVect(numberOfClasses, 1);
    float* priors = &priorsVect[0];

        // define the parameters for training the random forest (trees)
        CvRTParams params = CvRTParams(25, 5, 0, false, 15, priors, false, 4, 100, 0.01f, CV_TERMCRIT_ITER | CV_TERMCRIT_EPS );

        // train random forest classifier (using training data)
        rtree->train(trainingData, CV_ROW_SAMPLE, classifications,
                     cv::Mat(), cv::Mat(), varType, cv::Mat(), params);

} 
```

在这个初始化之后，我可以调用：

```
rtree->predict_prob(sample); 
```

希望这可以帮助你

# php - PHPExcel中是否有将PHP数组直接写入一行的方法？

> ID：13868972
> 
> 赞同：34
> 
> 时间：2012-12-13T21:42:11.500
> 
> 标签：php, phpexcel

我知道我需要编写一个循环在其中使用`SetCellValue('cell_name', 'value')`；但是 PHPExcel 中是否有一种方法只接受一个数组并将其写入 Excel 工作表行？

就像是：

```
$testArray = array('testcelltext1', 'testcelltext2', testcelltext3');
PHPExcel::writeArraytoRow($testArray);
//做其他PHPExcel的东西来实际写入文件
.
.
.
// 输出一个将 PHP 数组写入第一行的 excel 文件

```

我在随附的文档中找不到类似的东西，但这可能只是糟糕的 PDF 搜索技能......

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-12-13T21:45:17.727

```
$objPHPExcel->getActiveSheet()->fromArray($testArray, NULL, 'A1'); 
```

它在许多示例中使用

API 文档中描述的参数

```
/**
 * Fill worksheet from values in array
 *
 * @param   array   $source                 Source array
 * @param   mixed   $nullValue              Value in source array that stands for blank cell
 * @param   string  $startCell              Insert array starting from this cell address as the top left coordinate
 * @param   boolean $strictNullComparison   Apply strict comparison when testing for null values in the array
 * @throws Exception
 * @return PHPExcel_Worksheet
 */ 
```

# java - 如何将特定列设置为在 JTable 中可选？

> ID：13868974
> 
> 赞同：0
> 
> 时间：2012-12-13T21:42:13.200
> 
> 标签：java, swing, jtable, listener, listselectionlistener

如何确保我的 JTable 中只有一些列是可选的（意味着它们路由到我的 ListSelectionListener）？

我添加了我的听众，如下所示：

```
table.getSelectionModel().addListSelectionListener(new ListSelectionListener() {...}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:57:48.383

最简单的解决方案可能是创建自己的选择模型：

```
table.getColumnModel().setSelectionModel(new DefaultListSelectionModel() {
    private boolean isSelectable(int index0, int index1) {
        // TODO: Decide if this column index is selectable
        return true;
    }

    @Override
    public void setSelectionInterval(int index0, int index1) {
        if(isSelectable(index0, index1)) {
            super.setSelectionInterval(index0, index1);
        }
    }

    @Override
    public void addSelectionInterval(int index0, int index1) {
        if(isSelectable(index0, index1)) {
            super.addSelectionInterval(index0, index1);
        }
    }
}); 
```

另请注意，如果您想侦听列选择，您希望将侦听器添加到列模型的选择模型（而不是表的选择模型）。

# asp.net-mvc - 在 MVC 4 中的另一个表单中验证 JQuery UI 模式表单

> ID：13868980
> 
> 赞同：2
> 
> 时间：2012-12-13T21:42:32.653
> 
> 标签：asp.net-mvc, jquery-ui, asp.net-mvc-4, jquery-ui-dialog, form-submit

我在 MVC 4 中有一个包含多个字段的表单，并且根据组合的值，我需要打开一个模态对话框表单并加载到其中一个 3 个附加字段，这些字段将影响我正在创建的同一实体/在主窗体中进行编辑。对于这个模态对话框，我使用的是 jQuery UI 中的那个。

现在，我需要做的是验证（必需）模式对话框中的字段，以允许用户保留输入的值，这些值稍后将由主表单提交。

我的问题是如何在模态表单中执行这 3 个字段的验证（因为在对话框关闭之前他们无法提交主表单）。

任何提示或想法？

问候，塞萨尔。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T07:11:49.397

您可以使用 AJAX 将表单模式提交到服务器。模态表单当然会有一个与之关联的单独的视图模型。让我们举例说明：

主视图模型：

```
public class MyViewModel
{
    [DisplayName("select a value")]
    public string SelectedValue { get; set; }
    public IEnumerable<SelectListItem> Values { get; set; }
    public string SomeOtherProperty { get; set; }
} 
```

模态对话框视图模型：

```
public class DialogViewModel
{
    [Required]
    public string Prop1 { get; set; }
    [Required]
    public string Prop2 { get; set; }
    [Required]
    public string Prop3 { get; set; }
} 
```

然后你可以有一个包含 4 个动作的控制器：

```
public class HomeController : Controller
{
    // Renders the main form
    public ActionResult Index()
    {
        var model = new MyViewModel
        {
            Values = new[]
            {
                new SelectListItem { Value = "1", Text = "item 1" },
                new SelectListItem { Value = "2", Text = "item 2" },
                new SelectListItem { Value = "3", Text = "item 3" },
            }
        };
        return View(model);
    }

    // Processes the submission of the main form
    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        return Content(
            string.Format(
                "Thanks for filling out the form. You selected value: \"{0}\" and other property: \"{1}\"",
                model.SelectedValue,
                model.SomeOtherProperty
            )
        );
    }

    // Renders the partial view which will be shown in a modal
    public ActionResult Modal(string selectedValue)
    {
        var model = new DialogViewModel
        {
            Prop1 = selectedValue
        };
        return PartialView(model);
    }

    // Processes the submission of the modal
    [HttpPost]
    public ActionResult Modal(DialogViewModel model)
    {
        if (ModelState.IsValid)
        {
            // validation of the modal view model succeeded =>
            // we return a JSON result containing some precalculated value
            return Json(new
            {
                value = string.Format("{0} - {1} - {2}", model.Prop1, model.Prop2, model.Prop3)
            });
        }

        // Validation failed => we need to redisplay the modal form
        // and give the user the possibility to fix his errors
        return PartialView(model);
    }
} 
```

接下来你可以有一个主视图（`~/Views/Home/Index.cshtml`）：

```
@model MyViewModel

@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(x => x.SelectedValue)
        @Html.DropDownListFor(x => x.SelectedValue, Model.Values, new { id = "ddl" })
    </div>
    <div>
        @Html.LabelFor(x => x.SomeOtherProperty)
        @Html.TextBoxFor(x => x.SomeOtherProperty, new { id = "otherProperty" })
        @Html.ActionLink(
            "click here to open a modal and help you fill the value",
            "Modal",
            "Home",
            null,
            new { id = "showModal" }
        )
    </div>
    <button type="submit">OK</button>
}

<div id="modal"></div> 
```

以及包含模态形式 ( `~/Views/Home/Modal.cshtml`) 的部分视图：

```
@model DialogViewModel

@using (Ajax.BeginForm(new AjaxOptions { OnSuccess = "handleModalSubmit" }))
{
    <div>
        @Html.LabelFor(x => x.Prop1)
        @Html.EditorFor(x => x.Prop1)
        @Html.ValidationMessageFor(x => x.Prop1)
    </div>
    <div>
        @Html.LabelFor(x => x.Prop2)
        @Html.EditorFor(x => x.Prop2)
        @Html.ValidationMessageFor(x => x.Prop2)
    </div>
    <div>
        @Html.LabelFor(x => x.Prop3)
        @Html.EditorFor(x => x.Prop3)
        @Html.ValidationMessageFor(x => x.Prop3)
    </div>
    <button type="submit">OK</button>
} 
```

好的，现在剩下的就是编写一些 javascript 来让整个事情变得生动起来。我们首先确保我们首先包含了所有必需的脚本：

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.20.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

然后编写我们自己的：

```
$(function () {
    $('#showModal').click(function () {
        $.ajax({
            url: this.href,
            type: 'GET',
            cache: false,
            data: { selectedValue: $('#ddl').val() },
            success: function (result) {
                $('#modal').html(result).dialog('open');
            }
        });
        return false;
    });

    $('#modal').dialog({
        autoOpen: false,
        modal: true
    });
});

function handleModalSubmit(result) {
    if (result.value) {
        // JSON returned => validation succeeded => 
        // close the modal and update some property on the main form
        $('#modal').dialog('close');
        $('#otherProperty').val(result.value);
    } else {
        // validation failed => refresh the modal to display the errors
        $('#modal').html(result);
    }
} 
```

# refresh - Tableviewer refresh() 不起作用。仅在调整窗口大小后显示数据

> ID：13868981
> 
> 赞同：2
> 
> 时间：2012-12-13T21:42:36.530
> 
> 标签：refresh, jface, tableviewer

一个 2 扇形的窗扇。一个是 3 级`TreeViewer`，另一个是一个`TableViewer`。当它开始时，没有选择任何项目，`TreeViewer` 并且`TableViewer`显示所有可用的第一级对象的列表。为了实现这一点，`TreeViewerContainer`实例化了`TableViewerContainer`然后调用它的`showFirstLevelItemList( )`方法：

```
public class TableViewerContainer {
private Table table;
private TableViewer tableViewer;
private TableColumnLayout layout;

public TableViewerContainer(SashForm sashForm) {

    Composite composite = new Composite(sashForm, SWT.NONE);
    composite.setLayout(new GridLayout(1, false));      
    tableViewer = new TableViewer(composite, SWT.BORDER
            | SWT.FULL_SELECTION);
    table = tableViewer.getTable();
    table.setHeaderVisible(true);
    table.setLinesVisible(true);

    // Add TableColumnLayout
    layout = new TableColumnLayout();
    composite.setLayout(layout);
}

public void showFirstLevelItemList( FirstLevelItemListContainer obj ) {
    // Add the only column
    TableViewerColumn tableViewerColumn = new TableViewerColumn(
            tableViewer, SWT.NONE);
    TableColumn tblclmnFirst = tableViewerColumn.getColumn();

    layout.setColumnData(tblclmnFirst, new ColumnWeightData(10,
            ColumnWeightData.MINIMUM_WIDTH, false));

    tblclmnFirst.setText("Description");

    // assign providers and show the table 
    tableViewer.setLabelProvider(new FirstLevelItemLabelProvider());
    tableViewer.setContentProvider(new FirstLevelItemContentProvider());
    tableViewer.setInput(obj);      
} 
```

这工作正常。

接下来，`TreeViewer`在 tableViewer 中选择一个项目会相应地更新数据。为了实现这一点，我添加了一个`SelectionChangedListener()`：

```
treeViewer.addSelectionChangedListener(new ISelectionChangedListener() {
        public void selectionChanged(SelectionChangedEvent event) {
            IStructuredSelection selection = (IStructuredSelection) event
                    .getSelection();
            Object obj = selection.getFirstElement();
            if (obj instanceof firsLevelDetail ) {  
                FirstLevelDetail fld = (FirstLevelDetail) obj;
                tableViewer.showFirstLevelDetail(fld);               

            } else if (obj instanceof SecondLevelDetail )
                SecondLevelDetail sld = (SecondLevelDetail) obj;
                tableViewer.showSecondLevelDetail(sld);              

            else if (obj instanceof ThirdLevelDetail)
            ThirdLevelDetail tld = (ThirdLevelDetail) obj;
                tableViewer.showSecondLevelDetail(tld);
        }
    });` 
```

这样当用户选择一个时`firstLevelItem`，`TableViewer`就会显示相应的数据。所有调用的方法都遵循以下模式：

```
private void showFirstLevelDetail( FirstLevelDetailObj obj ) {

    Table tbl = tableViewer.getTable();
    tbl.setRedraw(false);

    // Dispose former columns 
    while (tbl.getColumnCount() > 0) {
        tbl.getColumns()[0].dispose();
    }

    // add new columns  
    TableViewerColumn tableViewerColumn = new TableViewerColumn(
            tableViewer, SWT.NONE);
    TableColumn tblclmn = tableViewerColumn.getColumn();
    layout.setColumnData(tblclmn, new ColumnWeightData(1,
            ColumnWeightData.MINIMUM_WIDTH, true));
    tblclmn.setText("Code FL Item");

    tableViewerColumn = new TableViewerColumn(tableViewer, SWT.NONE);
    tblclmn = tableViewerColumn.getColumn();
    layout.setColumnData(tblclmn, new ColumnWeightData(1,
            ColumnWeightData.MINIMUM_WIDTH, true));
    tblclmn.setText("Description FL Item");

    tbl.setRedraw(true);

    // to avoid an Exception 
    tableViewer.setInput(null);

    // Assign new providers and show the data
    tableViewer.setLabelProvider(new FirstLevelDetailLabelProvider());
    tableViewer.setContentProvider(new FirstLevelDetailContentProvider());
    tableViewer.setInput(obj);
} 
```

ContentProviders 的`getElements()`方法遵循下一个模式：

```
public Object[] getElements(Object inputElement) {
return ((FirstLevelDetail)inputElement).getArrayItems();                
} 
```

我的问题是在这个过程之后，表格在调整大小之前不会显示标题或任何数据。然后它会正常工作，直到选择另一个项目，无论该项目是什么级别。

`tableViewer.refresh()`不起作用。
`tableViewer.getTable().redraw()`不起作用。

`showXxxxLevelDetail ()`如果首先调用它们而不是 `showFirstLevelItemList()`方法，则所有工作都将`tableViewer.setInput(null)`被注释掉。

我正在运行 Eclipse Indigo、jface 3.8、Windows XP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:37:06.527

我会试着打电话

```
composite.layout(); 
```

在调用任何这些 showXXXLevelDetail() 方法之后。

# objective-c - 比较 UItextField 中的文本和 COre Data 中的数据

> ID：13868982
> 
> 赞同：0
> 
> 时间：2012-12-13T21:42:50.620
> 
> 标签：objective-c, ios, core-data

我有带有字符串“login”和“pass”的实体 LoginPass。我创建了注册，现在我需要比较我的 UItextField isEqual 中的文本是否与 Core Data 中的“登录”之一。如果创建了这样的登录，我需要比较密码 UITextField 中的文本，如果它相等，我的应用程序将打开主视图。我对谓词有疑问，我不明白如何使用 fetchResult 使用 LoginPass * newEntity 初始化新实体

更新：好的，我会试着理解我想要什么。我的英语不好那是我的文字不正确。我有实体“LoginPass”的核心数据，由“登录”（保存昵称）、“密码”（保存登录密码）和一些数据组成。我需要检查 UITextField“登录”中的昵称是否包含在核心数据中。如果没有这样的登录会出现警报，如果在 Core Data 中有这样的登录，我会检查密码，并且在成功自动恢复后会出现主视图。

```
//from standart singleton Appdelegate i delegated manageObjectContext
AppDelegate * appDelegate = (AppDelegate *) [[UIApplication sharedApplication]delegate];
NSManagedObjectContext *context = appDelegate.managedObjectContext;
//assigning. Can I use myEntity in my further mode of action to change datas in entity
NSEntityDescription * myEntity = [NSEntityDescription entityForName:@"LoginPass" inManagedObjectContext:context];
NSFetchRequest * fetchRequest = [[NSFetchRequest alloc]init];
//I need search in Core Data with nickname that's in UITextField "login"
NSPredicate *predicateMe = [NSPredicate predicateWithFormat:@"login==%@",login.text];
//login.text - text from UITextField, myEntity.login - string value in key "login" in COre Data
//Or i must write:
NSPredicate *predicateMe = [NSPredicate predicateWithFormat:@"%@ LIKE %@",myEntity.login,login.text];
fetchRequest.predicate = predicateMe;
[fetchRequest setEntity:myEntity];
[fetchRequest setFetchBatchSize:20];
NSSortDescriptor * sortirovka = [[NSSortDescriptor alloc] initWithKey:@"login" ascending:YES];
NSArray * sortArray = [NSArray arrayWithObjects:sortirovka,nil];
[fetchRequest setSortDescriptors:sortArray];
NSFetchedResultsController * fetchResult = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:context sectionNameKeyPath:nil cacheName:@"Login"];
//thanks for this part of code, i understand that is must be
 NSError *error = nil;
if (![fetchResults performFetch:&error]) {
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}
//can i use myEntity for changing datas in my "LoginPass" or i need create:
LoginPass *newEntity = ?; 
```

但我不明白如何创建 LoginPass *newEntity 以更改用户 witj 昵称的数据，输入字段“登录”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:03:51.693

然后执行获取：

```
NSError* error;
if(![fetchResult performFetch  : &error])
{
    NSLog(@"Failed with error: %@",error);
    return;  // do whatever to exit from the method (return the proper value
             // if it doesn't return void).
}
NSArray* fetchedObjects=[fetchResult fetchedObjects];
// Do this assertion if you expect that this will fetch no less
// and no more than one object:
NSAssert(fetchedObjects.count==1, @"Zero or too many objects"); 
NSManagedObject* newEntity= fetchedObjects[0]; 
```

我不确定，因为我没有测试过，也没有完全理解你的代码。但我认为它应该可以工作。

更多信息：[NSFetchedResultsController 文档](http://developer.apple.com/library/ios/documentation/CoreData/Reference/NSFetchedResultsController_Class/)。

# java - 在java中从类名动态创建一个对象，并使用带有数据的List来设置类字段

> ID：13868986
> 
> 赞同：17
> 
> 时间：2012-12-13T21:43:15.717
> 
> 标签：java, reflection

我有一个包含字符串类型数据的列表->`["classField1", "classField2", "classField3"]`

我有一个方法 ( `myMethod(List list, String className)`) 接受列表作为参数。所以，我可以通过参数将这个 List 传递给 myMethod(List list, String className)。

在`myMethod`中，我想创建一个对象，它将是 className 的实例，即第二个参数。之后，我想通过使用列表的数据来设置类的字段。由于我想动态获取类的字段，上面的结果是我必须将列表的每个 String 值强制转换为类的每个字段的类型。

我确信 List 中的字符串的顺序是正确的，并且对应于具有相同顺序的类的字段。

有人知道如何执行上述操作吗？

**例子：**

`["StringtempValue", "StringUnitOfMeasurement"]`=>

创建实例对象：

```
public class TempStruct {

   private double tempValue;
   private String unitOfMeasurement;

   public TempStruct(double tempValue, String unitOfMeasurement) {
     this.tempValue = tempValue;
     this.unitOfMeasurement = unitOfMeasurement;
   }

} 
```

我尝试通过以下方式给出解决方案：

实际上我想创建一个现有类的对象，我试图通过反射来做到这一点。我使用以下代码：

```
Class<?> cls = Class.forName(name);
Object clsInstance = (Object) cls.newInstance();
Field[] objectFields = clsInstance.getClass().getDeclaredFields(); 
```

但是当第二行尝试创建新对象时，我得到了一个例外。正如@JB Nijet 所说，我不知道 getDeclaredFields() 方法不会返回已排序的字段。

实际上，我有一个只接受字符串列表的方法，所以通过使用反射我将对象转换为字符串列表，然后我想做相反的事情。我没有想到任何其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-14T03:20:48.067

对象的动态实例化可能会变得非常复杂，并且您的场景涉及几个方面：

*   将对象值从转换`String`为适当的类型
*   从类名加载正确的类并创建一个实例
*   将这些值分配给对象

对这些要点的深入讨论将占据一整章，毫无疑问地把 Java 作为一种动态语言进行处理。但是，假设你没有时间学习这些错综复杂的东西，或者依赖于一些庞大的第三方库，让我们来做一些让你上路的事情。请始终将双手放在车内，因为骑行会变得颠簸。

让我们先解决类型转换的问题。这些值提供为`Strings`，但您的对象会将它们存储为`double`、`long`、`int`等。因此我们需要一个将 a 解析`String`为适当目标类型的函数：

```
static Object convert(Class<?> target, String s) {
    if (target == Object.class || target == String.class || s == null) {
        return s;
    }
    if (target == Character.class || target == char.class) {
        return s.charAt(0);
    }
    if (target == Byte.class || target == byte.class) {
        return Byte.parseByte(s);
    }
    if (target == Short.class || target == short.class) {
        return Short.parseShort(s);
    }
    if (target == Integer.class || target == int.class) {
        return Integer.parseInt(s);
    }
    if (target == Long.class || target == long.class) {
        return Long.parseLong(s);
    }
    if (target == Float.class || target == float.class) {
        return Float.parseFloat(s);
    }
    if (target == Double.class || target == double.class) {
        return Double.parseDouble(s);
    }
    if (target == Boolean.class || target == boolean.class) {
        return Boolean.parseBoolean(s);
    }
    throw new IllegalArgumentException("Don't know how to convert to " + target);
} 
```

啊。这很丑陋并且只处理内在类型。但我们不是在这里寻求完美，对吧？所以请酌情加强。请注意，从转换`String`到其他类型实际上是一种反序列化形式，因此您对客户（无论是谁给您`Strings`）施加了约束，以便以特定格式提供它们的值。在这种情况下，格式由`parse`方法的行为定义。练习 1：在将来的某个时候，以向后不兼容的方式更改格式以引起某人的愤怒。

现在让我们进行实际的实例化：

```
static Object instantiate(List<String> args, String className) throws Exception {
    // Load the class.
    Class<?> clazz = Class.forName(className);

    // Search for an "appropriate" constructor.
    for (Constructor<?> ctor : clazz.getConstructors()) {
        Class<?>[] paramTypes = ctor.getParameterTypes();

        // If the arity matches, let's use it.
        if (args.size() == paramTypes.length) {

            // Convert the String arguments into the parameters' types.
            Object[] convertedArgs = new Object[args.size()];
            for (int i = 0; i < convertedArgs.length; i++) {
                convertedArgs[i] = convert(paramTypes[i], args.get(i));
            }

            // Instantiate the object with the converted arguments.
            return ctor.newInstance(convertedArgs);
        }
    }

    throw new IllegalArgumentException("Don't know how to instantiate " + className);
} 
```

我们在这里走了很多捷径，但这不是我们正在创建的西斯廷教堂。只需加载类并搜索参数数量与参数数量（即，arity）匹配的构造函数。重载相同数量的构造函数？不，不会工作。可变参数？不，不会工作。非公共构造函数？不，不会工作。如果你不能保证你的类会像你的例子一样提供一个设置所有字段的构造函数`TempStruct`，那么我会收工并喝杯啤酒，因为这种方法是 DOA。

一旦我们找到构造函数，就循环遍历`String`args 以将它们转换为构造函数所期望的类型。假设可行，然后我们通过反射调用构造函数，挥动魔杖并说 abracadabra。瞧：你有一个新对象。

让我们用一个非常人为的例子来试试：

```
public static void main(String[] args) throws Exception {
    TempStruct ts =
        (TempStruct)instantiate(
            Arrays.asList("373.15", "Kelvin"),
            TempStruct.class.getName());

    System.out.println(
        ts.getClass().getSimpleName() + " " +
        ts.tempValue + " " +
        ts.unitOfMeasurement);
} 
```

输出：

```
TempStruct 373.15 Kelvin 
```

辉煌

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T21:47:57.563

我曾经遇到过同样的问题，结果证明 hashMap 是我的解决方案。

看看： [http ://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:59:44.613

看看[http://commons.apache.org/beanutils/](http://commons.apache.org/beanutils/)包。它允许按名称访问字段。

# c# - 设置“点击”方法立即执行

> ID：13868989
> 
> 赞同：0
> 
> 时间：2012-12-13T21:43:22.867
> 
> 标签：c#, methods

我有一个工作方法

```
something_Click(object sender, EventArgs e)
{
    code
}
... 
```

它当然在有人单击元素后执行。我需要做的是，在元素出现在屏幕上后立即执行此方法（它是`StripStatusLabel`）。我只是尝试将方法调用添加到代码的开头，但它什么也没做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T21:47:08.897

您可以在事件处理程序中调用[`Button.PerformClick`](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.performclick.aspx)您的按钮。[`Form.Load`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.load.aspx)

您可能还想考虑将该逻辑移动到它自己的方法中，并从按钮处理程序和`Load`事件中调用该方法，因为这样会更清楚。（显然，您希望触发的代码不仅仅是“按钮单击”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T21:46:51.563

根据您所针对的框架（WPF 与 Winforms），您可能能够处理 Load 事件。当元素出现在屏幕上时触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:06:14.483

触发通常来自用户的表单事件不是最佳实践。从某种意义上说，您正试图“伪造”点击。想想未来的调试，或者可能继承你项目的同事。在检查代码时，您会期望 something_Click 仅在单击“某物”时被触发。

更好的解决方案是将代码片段中的“代码”部分放入名称反映其实际作用的方法中。

他们可以在不同的区域使用这种方法。在点击、加载、任何地方触发它。

```
something_Click(object sender, EventArgs e)
{
    DoStuff();
}

OnAppearToScreen()
{
    DoStuff();
}

DoStuff()
{
    //code that actually does stuff
} 
```

稍后，当您想检查“这些东西”何时对您的对象完成时，您可以通过代码检查轻松判断。

# r - 大量贷款的快速贷款利率计算

> ID：13868990
> 
> 赞同：4
> 
> 时间：2012-12-13T21:43:26.517
> 
> 标签：r, finance

我有一个大数据集（大约 20 万行），其中每一行都是一笔贷款。我有贷款金额，付款次数和贷款付款。我想知道贷款利率。R没有计算这个的函数（至少base R没有它，我找不到它）。编写 npv 和 irr 函数并不难

```
Npv <- function(i, cf, t=seq(from=0,by=1,along.with=cf)) sum(cf/(1+i)^t)
Irr <- function(cf) { uniroot(npv, c(0,100000), cf=cf)$root } 
```

你可以这样做

```
rate = Irr(c(amt,rep(pmt,times=n))) 
```

问题是当您尝试计算大量付款的费率时。因为 uniroot 没有向量化，并且 rep 花费了惊人的时间，所以最终计算速度很慢。如果您进行一些数学运算并确定您正在寻找以下等式的根，则可以使其更快

```
zerome <- function(r) amt/pmt-(1-1/(1+r)^n)/r 
```

然后将其用作 uniroot 的输入。对于我的 200k 数据库，这在我的电脑中运行大约需要 20 秒。

问题是我正在尝试做一些优化，这是优化的一个步骤，所以我试图加快速度。

我已经尝试过矢量化，但是因为 uniroot 没有矢量化，所以我不能走得更远。是否有任何矢量化的求根方法？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T22:51:24.557

您可以使用线性插值器，而不是使用根查找器。您必须为`n`（剩余付款次数）的每个值创建一个插值器。每个插值器将映射`(1-1/(1+r)^n)/r`到`r`. 当然，您必须构建一个足够精细的网格，这样它才能恢复`r`到可接受的精度水平。这种方法的好处是线性插值器快速且矢量化：您可以在`n`对相应插值器的一次调用中找到具有相同剩余付款数 ( ) 的所有贷款的利率。

现在一些代码证明它是一个可行的解决方案：

首先，我们创建插值器，每个可能的值都有一个`n`：

```
n.max <- 360L  # 30 years

one.interpolator <- function(n) {
    r <- seq(from = 0.0001, to = 0.1500, by = 0.0001)
    y <- (1-1/(1+r)^n)/r
    approxfun(y, r)
}

interpolators <- lapply(seq_len(n.max), one.interpolator) 
```

请注意，我使用了 1/100 百分比 (1bp) 的精度。

然后我们创建一些假数据：

```
n.loans <- 200000L
n     <- sample(n.max, n.loans, replace = TRUE)
amt   <- 1000 * sample(100:500, n.loans, replace = TRUE)
pmt   <- amt / (n * (1 - runif(n.loans)))
loans <- data.frame(n, amt, pmt) 
```

最后，我们解决`r`：

```
library(plyr)
system.time(ddply(loans, "n", transform, r = interpolators[[n[1]]](amt / pmt)))
#    user  system elapsed 
#   2.684   0.423   3.084 
```

它很快。请注意，一些输出速率是`NA`，但这是因为我的随机输入没有意义，并且会返回我选择的 [0 ~ 15%] 网格之外的速率。你的真实数据不会有这个问题。

# c - 确定 C 中的文件/文件夹

> ID：13868994
> 
> 赞同：1
> 
> 时间：2012-12-13T21:43:37.173
> 
> 标签：c, file, directory

我在 C 中有以下代码：

```
DIR *mydir = opendir("/");
struct dirent *entry = NULL;

while((entry = readdir(mydir)))
{
    printf("%s\n", entry->d_name);
    //printf("%i\n", entry->d_type);
}

closedir(mydir); 
```

它可以正常工作并正确显示该位置的文件/文件夹。

但是，我想知道它是文件夹还是文件。我怎样才能做到这一点？我尝试使用 d_type （如您在代码中所见）但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:49:17.853

使用[`stat()`](http://pubs.opengroup.org/onlinepubs/009695299/basedefs/sys/stat.h.html)：

```
struct stat st;
stat("nodename", &st);
int isDirectory = S_ISDIR(st.st_mode); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:50:56.577

你应该使用[stat()](http://pubs.opengroup.org/onlinepubs/009695399/functions/stat.html)函数来获得一个统计结构。

```
struct stat s;
if( stat(path,&s) == 0 )
{
    if( s.st_mode & S_IFDIR )
    {
        //it's a directory
    }
    else if( s.st_mode & S_IFREG )
    {
        //it's a file
    }
    else
    {
        //something else
    }
}
else

{
    //error
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T21:52:17.763

您可以使用这样的内置宏：

```
#include <sys/stat.h>
#include <unistd.h>
#include <stdio.h>

int main(void)
{
  DIR *mydir = opendir(/);
  struct dirent *entry = NULL;
  struct stat buf;

  while((entry = readdir(mydir)))
  {
     printf("%s\n", entry->d_name);
     if (stat(entry, &buf))
     {
        perror("stat");
        exit(-1);
     }
     if ( S_ISDIR(buf.st_mode) ) 
     {
        printf("%s is a directory\n", entry);   
     }
     if ( S_ISREG(buf.st_mode) )
     {
        printf("%s is a regular file\n", entry);
     }
  }

  closedir(mydir);

  return 0;
} 
```

有关更多信息，请参阅`man 2 stat`shell。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T21:54:13.107

这是特定于系统的，如果不了解您的操作系统和可能的其他设置，我们无法给出完全可靠的答案。

d_type 实际上至少适用于某些系统。您的代码在 RedHat Linux 上给出了一个有用的答案，目录值为 4，常规文件为 8，其他文件类型为其他值。这是对拼写错误的修复，在对 opendir 的调用中用引号将名称 / 括起来。

# javascript - 防止正文元素在触摸设备上滚动

> ID：13868996
> 
> 赞同：0
> 
> 时间：2012-12-13T21:43:46.263
> 
> 标签：javascript, ios, web-applications, scroll

**问题：**

我在 iOS 主屏幕上有一个 Web 应用程序，所以没有浏览器窗口，它看起来和功能都很好。我已经弄清楚如何让内部 div 元素执行触摸滚动事件并在 iOS 中使用动量/反弹样式，并且效果很好......我现在遇到的问题是反弹滚动（再次，仅限 iOS ) 搞乱了我在页面上的任何固定元素或与站点相关的动画。

当我尝试以下操作时：

```
document.ontouchmove = function(e) {e.preventDefault()}; 
```

问题停止了，但现在我无法在我的应用程序的*任何地方*滚动。

**我需要的：**

我希望身体完全锁定在适当的位置......如果有人抓住我的侧边栏或导航栏然后拉动页面，身体会反弹！但是，如果有人在内容区域内，则完全没有问题——应用程序可以完美滚动并且看起来很棒。如果我停止在侧边栏或导航栏或正文上滚动，则应用程序中的所有滚动都将不起作用并且基本上不起作用。

**tl; dr：身体在滚动时反弹。我想要一个滚动的内容区域，而在其他任何地方都没有滚动。身体不应该移动，但我认为可以在身体内滚动的元素应该。**

*作为旁注，我浏览了以下热门问题/解决方案（以及许多其他问题）：*

[1](https://stackoverflow.com/questions/7768269/ipad-safari-disable-scrolling-and-bounce-effect) [2](https://stackoverflow.com/questions/9108599/disabling-ios-elastic-body-scroll-keep-native-scrolling-working) [3](https://stackoverflow.com/questions/7798201/document-ontouchmove-and-scrolling-on-ios-5)

*我只是想在人们认为我没有进行任何搜索之前将其发布...我已经在这里工作了几个小时，并且看到的解决方案比上面发布的还要多，但我想获得上面列出的最受欢迎的解决方案所以没有人认为这是一个重复的问题。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:39:42.830

几天前我发现了这一点，并设置了这个方便的 jsbin 来演示我为完成这项工作所做的工作：

[我的工作 jsbin 示例](http://jsbin.com/usudoh/1)

当您在 iPad 上打开此链接时，文本应该是可滚动的。当当前没有当前的 touchmove 事件有效时，请尝试拉动屏幕的其余部分。

如果您使用它，您会注意到只有内部文本字段按预期移动。这是通过将我`.scrollable`的班级放在班级中来确定的`.container`。该类`.scrollable`占据了它的父容器的全部高度。

现在使容器的高度更大，例如`height: 500px`. 这里的目标是让它足够大，不会溢出，但又足够小，以便在 iPad 上还有其他空白。尝试滚动或拉动它...没有触发 touchmove 事件并且屏幕保持原位。

我的 JS 确定一个对象在被触摸后是否溢出。如果是，它会滚动。如果没有，则不会发送滚动事件。

玩它，让我知道我是否可以提供更好的例子，如果你遇到任何错误......现在我唯一知道的是你是否真的想打破它并开始在网站周围拉扯正在触发当前的 touchmove 事件，或者页面正在首次加载...我不会将这些视为“错误”，但如果您也可以找到解决这些问题的方法，我会全神贯注！