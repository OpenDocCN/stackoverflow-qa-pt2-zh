# StackOverflow 问答 15049000-15049999

# vb.net - Visual Basic 使用 Drawline - 使用循环绘制 3 条线

> ID：15049002
> 
> 赞同：0
> 
> 时间：2013-02-24T05:34:06.260
> 
> 标签：vb.net

我需要绘制三个随机长度的均匀线，它们至少足够大，以便可以看到这些线。最大长度应该是一个按钮的大小。三条线应在按钮下方绘制。我必须使用循环。我有 1 行的基本代码，但是如何将其变成具有上述要求的循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:57:20.223

您需要确定间距，并为您的起始位置和长度设置一些变量，使用 Random.Next 方法在您选择的参数内设置长度。看看这样的东西是否适合你。

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    drawLine()
End Sub

Private Sub drawLine()
    Dim g As Graphics = CreateGraphics()
    Dim spacing As Integer = 5
    Dim xStart As Integer = 50 ''Start of line
    Dim xEnd As Integer  'End of Line
    Dim minLength As Integer = 10
    Dim maxLength As Integer = 70
    Dim rndm As New Random
    Dim i As Integer
    Dim y As Integer = 50 'Top of first Line
    g.Clear(Me.BackColor) 'Reset Drawing

    Do Until (i = 3)
        xEnd = rndm.Next(minLength, maxLength)
        g.DrawLine(Pens.Red, New Point(xStart, y), New Point(xStart + xEnd, y))
        y += spacing
        i += 1
    Loop
    g.Dispose()
End Sub 
```

# android - Android 备份服务 - 备份的时间和频率？

> ID：15049004
> 
> 赞同：15
> 
> 时间：2013-02-24T05:34:53.897
> 
> 标签：android, android-backup-service

我想使用[Android 备份服务](http://developer.android.com/google/backup/index.html)备份我的应用程序的数据，但我担心网络使用情况。我有大约 500KB 的数据需要为每个备份操作上传。不多，但如果每天备份 10 次，可以轻松达到 5MB。

我的问题是，Android 决定何时以及多久执行一次备份？在我致电`dataChanged()`. 它没有解释什么条件构成了“时机”。

> 您可以随时通过调用请求备份操作 `dataChanged()`。此方法通知备份管理器您要使用备份代理备份数据。然后，备份管理器会`onBackup()`在将来的适当时间调用您的备份代理的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-01-03T04:48:25.223

您的问题有两个部分：

1.  什么时候
2.  多常

让我们从＃2开始，**多久一次**。我认为文档足以回答这个问题。每当您的应用程序调用该`dataChanged()`方法时，就有可能进行备份。因此，谨慎地限制调用此方法的频率。如何处理这取决于您。您可能要考虑的一种方法是仅在应用程序中的重大/重要数据更改时调用它。也就是说，不要调用它来更改用户偏好（例如背景颜色），但要调用它来处理任何类型的事务数据。

至于#1，**when** : 这很难准确回答。该文档对此不置可否。这使 Android 可以自由更改此算法，而不会违反任何开发人员的期望。我认为以下假设是合理的：备份可能会很快发生，可能在条件合适的最快时间发生。如果它没有“很快”发生，那么它不会是一项非常有用的服务，不是吗？Android 可能会等待一些简单的条件（只是猜测，但这可能是可用线程、可用网络连接而没有其他网络活动）。请注意，文档声明“*它将使用设备上启用的任何传输方式进行备份*”。听起来它旨在使备份尽早进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-11T23:06:23.420

我进一步研究了 Android Backup Manager Service 并发现了以下内容：

1.  根据 [http://developer.android.com/guide/topics/data/backup.html](http://developer.android.com/guide/topics/data/backup.html)中的“请求备份部分” “如果您连续多次调用 dataChanged()，在备份管理器向您的代理请求备份之前，您的代理仍然只收到一个 onBackup() 调用。”

我将此解释为我们应用程序中的每个 DataChanged() 调用通过传输通知备份管理器服务。备份管理器服务只会对我们应用程序的备份代理的 onBackup() 执行一次调用，即使在备份管理器服务想要响应之前多次调用 DataChanged（请参阅下面关于备份管理器响应频率的第 2 项）。

2.  根据这个测试器（我刚才还进行了备份频率测试）：[https](https://advancedweb.hu/2014/12/09/practical_measurement_of_the_android_backup_manager/) ://advancedweb.hu/2014/12/09/practical_measurement_of_the_android_backup_manager/ 备份管理器服务每小时响应一次（我也在测试中证明了这一点）只要因为自上次数据备份以来的一小时内至少调用了一个 DataChanged()。

# ruby-on-rails - RefineryCMS - 使用 Dragonfly 的自定义图像引擎在上传时多次调整大小 - 尝试将 uid 提交到数据库时出现 MassAssign 错误

> ID：15049005
> 
> 赞同：0
> 
> 时间：2013-02-24T05:35:14.383
> 
> 标签：ruby-on-rails, database, refinerycms, dragonfly-gem

我从宝贵的资源 stackoverflow 中学到了很多东西。我非常感谢做出的许多出色贡献。开源和使其成为现实的开源万岁！

对于这里的所有重要信息，我无法在这里找到解决我的问题的正确方法。让我解释。

使用 RefineryCMS v. 2.0.9 我在 Rails 应用程序中生成了一个引擎，用于呈现“投资组合”。'投资组合' has_many ':exhibits'。':exhibit' belongs_to ':portfolio' 根据以下模型。

模型属性 :img_orginal - 包含 Dragonfly 图像上传的 uid。这可以正常工作，图像上传 uid 已提交到数据库，并且可以按预期调用到 views/portfolios/show.html.erb 视图。该网站旨在响应。如果要响应，它需要一套从原始生成的调整大小的拇指。这些需要在 :img_original 通过后端表单上传和提交时由 Dragonfly 生成。到目前为止，我无法在展览模型中使用 Dragonfly image_accessor 来实现这一点。我在创建尝试时收到以下异常。

**无法批量分配受保护的属性：img_original ActiveModel::MassAssignmentSecurity::Error in Refinery::Portfolios::Admin::ExhibitsController#create**

两个数据库都存在并且通过“exhibits”模型中的“:portfolio_id”外键正确链接。根据当前的 Rails 最佳实践，所有模型属性都被列入白名单。

我错过了什么？我认为控制器方法不正确，我无法弄清楚它们应该如何。是否需要修改引擎控制器以在实例中调用 Page Image 类或 Dragonfly 本身？我需要更改 routes.rb。有人可以建议我如何定义控制器的创建和更新方法。是否有必要，因为它们应该已经由主要炼油厂应用程序的 page_images 控制器定义。

我已经使用 image_accessor 尝试了 Dragonfly 文档中建议的方法，但无济于事。以下是迄今为止采取的一些方法。

IE。

```
image_accessor :img_original do
after_assign :crop_thumb     #method defined below
            #:resize_mobile,
            #:resize_tablet,
            #:resize_desktop
# OR
#  copy_to(:img_thumb) do
#    |a| a.thumb('100x100')
#    end
# OR different block syntax
#  copy_to(:img_thumb) do {|a| a.thumb('100x100')}
end

def crop_thumb
  @exhibit.img_thumb = @exhibit.img_original.process(:resize_and_crop,
                                                     :width => 100,
                                                     :height=> 100,
                                                     :x => :x_focus,
                                                     :y => :y_focus).encode(:jpg, '-quality 60').apply
end

#def resize_mobile,
   @exhibit.img_mobile = @exhibit.img_original.process(etc.
#end

#def resize_tablet,
   etc. 
```

我对此很陌生，到目前为止，我一直在努力研究以实现它。然而我来到这个并且无法破解它。我将不胜感激任何人可能提供的帮助。谢谢你。

下面的代码示例和环境信息。

环境; Ubuntu 12.10 RubyMine IDE Ruby 1.9.3 RVM 处理 gems Rails 3.2.9 SQLite 开发数据库 RefineryCMS（包括 page_images 和查询插件） Dragonfly 0.9.14

使用这些迁移生成的投资组合引擎

```
 # This migration comes from refinery_portfolios (originally 1)
 class CreatePortfoliosPortfolios < ActiveRecord::Migration

 def up
 create_table :refinery_portfolios do |t|
  t.string :title
  t.integer :year
  t.text :description
  t.integer :publication_id
  t.integer :commentary_id
  t.integer :position
  t.timestamps
end
end

def down
if defined?(::Refinery::UserPlugin)
  ::Refinery::UserPlugin.destroy_all({:name => "refinerycms-portfolios"})
end

if defined?(::Refinery::Page)
  ::Refinery::Page.delete_all({:link_url => "/portfolios/portfolios"})
end

drop_table :refinery_portfolios
end
end 
```

和

```
# This migration comes from refinery_portfolios (originally 2)
class CreatePortfoliosExhibits < ActiveRecord::Migration

def up
create_table :refinery_portfolios_exhibits do |t|
  t.string :title
  t.integer :cat_num
  t.integer :year
  t.string :medium
  t.integer :width
  t.integer :height
  t.integer :img_original_id
  t.string :img_thumb
  t.string :img_mobile
  t.string :img_tablet
  t.string :img_desktop
  t.integer :x_focus
  t.integer :y_focus
  t.text :history
  t.integer :portfolio_id
  t.boolean :sold
  t.integer :position

  t.timestamps
  end

  end

def down
 if defined?(::Refinery::UserPlugin)
  ::Refinery::UserPlugin.destroy_all({:name => "refinerycms-portfolios"})
end

if defined?(::Refinery::Page)
  ::Refinery::Page.delete_all({:link_url => "/portfolios/exhibits"})
end

drop_table :refinery_portfolios_exhibits

end

end 
```

并且refinery_portfolios_exhibits 表列标题已更改

```
 Exhibits table column header changed via migration
 class FixColumnName < ActiveRecord::Migration
  def change
   rename_column :refinery_portfolios_exhibits, :img_original_id, :img_original_uid
   rename_column :refinery_portfolios_exhibits, :img_thumb, :img_thumb_uid
   rename_column :refinery_portfolios_exhibits, :img_mobile, :img_mobile_uid
   rename_column :refinery_portfolios_exhibits, :img_tablet, :img_tablet_uid
   rename_column :refinery_portfolios_exhibits, :img_desktop, :img_desktop_uid
  end
 end 
```

投资组合模型包含投资组合元数据，称为 'portfolio.rb' has_many 展示模块 Refinery 模块 Portfolios 类 Portfolio < Refinery::Core::BaseModel self.table_name = 'refinery_portfolios'

```
 attr_accessible :title,
                  :year,
                  :description,
                  :publication_id,
                  :commentary_id,
                  :position

  acts_as_indexed :fields => [:title]

  validates :title, :presence => true, :uniqueness => true

  belongs_to :publication, :class_name => '::Refinery::Resource'
  belongs_to :commentary, :class_name => '::Refinery::Resource'

  # destroy all exhibits when a portfolio is destroyed
  has_many :exhibits, :dependent => :destroy

end
end
end 
```

展览模型包含图像链接和相关元数据，称为“exhibit.rb”；属于_to 投资组合

```
require 'dragonfly/rails/images'

module Refinery
module Portfolios
class Exhibit < Refinery::Core::BaseModel

attr_accessible   :title,
                  :cat_num,
                  :year,
                  :medium,
                  :width,
                  :height,
                  :img_original_uid,   #image upload uid from refinery_images table
                  :img_thumb_uid,      #commit resize uid here
                  :img_mobile_uid,     #here
                  :img_tablet_uid,     #here
                  :img_desktop_uid,    #and here
                  :x_focus,
                  :y_focus,
                  :history,
                  :portfolio_id,   #foreign key, associates exhbit with portfolio
                  :sold,
                  :position

  acts_as_indexed :fields => [:title, :medium, :year, :cat_num]

  validates :title, :presence => true, :uniqueness => true
  validates :year, :length => { :is => 4,
                                :message => "Four digit year format,(yyyy) eg. 2013"}
  validates :img_original_uid, :presence => true, :uniqueness => true                             
  validates :portfolio_id, :presence => true
  validates_associated :portfolio
  validates :x_focus, :presence => true
  validates :y_focus, :presence => true
  validates :sold, :inclusion => {:in => [true, false]}

  belongs_to :img_original, :class_name => '::Refinery::Image'
  belongs_to :portfolio, :class_name => 'Portfolio', :foreign_key => 'portfolio_id'
  end
  end
  end 
```

控制器'admin/exhibit.rb'

```
 module Refinery
  module Portfolios
   module Admin
    class ExhibitsController < ::Refinery::AdminController
      before_filter :find_all_portfolios

      crudify :'refinery/portfolios/exhibit', :xhr_paging => true

      protected

      def find_all_portfolios
        @portfolios = Refinery::Portfolios::Portfolio.all
      end

    end
  end
 end
end 
```

控制器'exhibit.rb'

```
 module Refinery
 module Portfolios
  class ExhibitsController < ::ApplicationController

   before_filter :find_all_exhibits
   before_filter :find_page

  def index
    #@exhibits = Exhibit.all(:include => :portfolio)

    # you can use meta fields from your model instead (e.g. browser_title)
    # by swapping @page for @exhibit in the line below:
    present(@exhibit)
  end

  def show
    @exhibit = Exhibit.find(params[:id])

    # you can use meta fields from your model instead (e.g. browser_title)
    # by swapping @page for @exhibit in the line below:
    present(@exhibit)
  end

  protected

  def find_all_exhibits
    @exhibits = Exhibit.order('position ASC')
  end

  def find_page
    @page = ::Refinery::Page.where(:link_url => "/exhibits").first
  end

   end
  end
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T14:13:59.117

我猜你在 10 个月前问过之后就不再关心这个了，但是在你的展览模型中，你有没有尝试过改变

```
attr_accessible :img_original_uid 
```

至

```
attr_accessible :img_original 
```

错误出现在 img_original 字段上，但您正在为 img_original_uid 提供可访问性。我也是蜻蜓的新手......

# html - 创建链接表单外部列表

> ID：15049010
> 
> 赞同：-1
> 
> 时间：2013-02-24T05:36:18.127
> 
> 标签：html, list, hyperlink, indexing

我需要在很多网页上创建链接。但是这些链接会发生很大的变化。所以我想索引它们，然后在我的 html 页面中调用它们。这样，如果我需要更改 url，我可以从一个地方进行，即 csv 文件或文本文件。理想情况下，我想使用 html 或 java ...

所以步骤是：

*   1.  在文件中有 url 索引：

变量 1 = [http://www.site.com](http://www.site.com)

变量 2 = [http://www.site2.com](http://www.site2.com)

*   1.  在 html 页面中使用变量而不是 url。

    <a href="变量 1" ></a>

这可能不使用php吗？（我不知道如何使用 php ......）

我发现的唯一解决方法是创建一堆 html 重定向页面并使用那些较小的 url。但它非常混乱......

谢谢你的帮助。

昆汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:47:32.723

如果您使用的是 PHP，请执行以下操作：

链接.php

```
$link1 = "http://www.link.com";
$link2 = "http://www.link2.com"; 
```

并在您的 HTML 中包含 links.php 页面在您的另一个 php 页面中

```
include_once "links.php";
global $link1;
global $link2;

<b> this is my page <a href="$link1"> click here</a> and <a href="$link2"> and here </a> to find the actual links </b> 
```

# math - 查找第四行是否为四边形

> ID：15049013
> 
> 赞同：0
> 
> 时间：2013-02-24T05:36:52.150
> 
> 标签：math, geometry, vertex, plane

假设我在一个平面上有 9 个点，下图显示了我在这些点上放置线（顶点）的顺序。

![5/9 点连接](../Images/17b4bb7b76e2fef42151701a408cfa24.png)

我在向量中分别跟踪点和线。现在我放了另一条线（可以在任何地方），但下面是现在的样子

![第 6 点已连接](../Images/77e5bc9069ea66ef344603d8863fc8ed.png)

我怎样才能知道第 6 个顶点（或最近添加的顶点）是四个边的盒子（不一定是正方形，只要它们是封闭的盒子，就是这样）。

我知道找到两条线/顶点之间的距离可能是一个好的开始，但是有人可以解释一下这是怎么回事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:44:16.480

标记点：

```
a b c
d e f
g h i 
```

所以第 1 行连接 (ad)，第 2 行连接 (de)，依此类推。添加线时，请保留连接点的列表。因此，添加第 4 行后，列表为 {a,d,e} 和 {g,h,i}。第 5 行连接 (eh)，因此它将列表合并为 {a,d,e,g,h,i}。然后第6行连接（dg），**两个点已经在一个列表中，**所以它必须形成一个闭环。

# java - 获得黑暗的外观和感觉？

> ID：15049020
> 
> 赞同：2
> 
> 时间：2013-02-24T05:38:40.587
> 
> 标签：java, swing

我厌倦了 Swing 的标准外观和感觉，需要一些看起来很酷的深色和黑色主题。作为秋千的一部分的 DefaultMetal、Ocean、Motif 或 Windows 都不能满足我的需求。使用[nifty-gui](http://nifty-gui.lessvoid.com/)是个好主意，因为我需要有选项卡式窗格之类的东西吗？如果没有，我还有其他选择吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T10:48:40.303

看看[`JTatoo`](http://www.jtattoo.net/)外观设置，它是开源的，可以满足您的需求。

看看这个`NoireLookAndFeel`：

![黑色观感](../Images/11b2675428c2a76119140087e476c7d9.png)

```
UIManager.setLookAndFeel(NoireLookAndFeel.class.getName()); 
```

# javascript - 在 openerp POS 前视图中自动计算数量

> ID：15049022
> 
> 赞同：1
> 
> 时间：2013-02-24T05:39:21.853
> 
> 标签：javascript, openerp

我添加了两个新列。重量和推车重量。我不熟悉Javascript，我想在重量和购物车重量有变化时，javascript会自动计算数量。我设法修改了重量和购物车重量，但我无法更新数量列。</p>

让我再解释一下。我知道这个 javascript 函数会更新值。

```
setValue: function(val) {
            var param = {};
            param[this.numpadState.get('mode')] = val;
            var order = this.shop.get('selectedOrder');
            if (order.get('orderLines').length !== 0) {
               order.selected.set(param);
            } else {
                this.shop.get('selectedOrder').destroy();
            } 
```

行前或行后

```
order.selected.set(param); 
```

我想添加计算数量和更新字段的操作。

# mips - 在 MIPS 中的寄存器中按值偏移

> ID：15049024
> 
> 赞同：7
> 
> 时间：2013-02-24T05:39:30.200
> 
> 标签：mips

我有一个寄存器（$t2），它有一个随机生成的数字，然后乘以 4。我的问题是，在使用 lw 指令时是否可以使用 $t2 中的值作为偏移量？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T18:03:04.273

在 MIPS 中，您可以使用寄存器、偏移量或两者相加；但不是两个寄存器组成一个有效地址。

所以，如果你想将单个寄存器指向的单词加载到，比如说`$t0`，你会这样做：

```
lw $t0, ($t2) 
```

但是，如果您想将有效地址指向的字加载`$t1 + $t2`到`$t0`其中，则首先需要执行加法，然后从内存中加载该字，例如：

```
addu $t1, $t1, $t2
lw $t0, ($t1) 
```

考虑到执行加法会丢失`$t1`先前的值，因此您应该使用一些免费寄存器作为加法的目标。

# java - Android Wifi 带宽

> ID：15049030
> 
> 赞同：1
> 
> 时间：2013-02-24T05:40:29.540
> 
> 标签：java, android, android-wifi

最近我的任务是在 Nexus 7 平板电脑上开发 Android 应用程序，该应用程序将使用 wifi 通过 tcp 套接字与 pc 连接。

特别是我必须将图像流（例如未压缩的 BMP）传递给平板电脑。所以我做了简单的测试来检查带宽并且对结果感到失望。我将平板电脑放在 wifi 信号源前面，上面写着连接速度是每秒 54Mb，但考虑到测试结果，我每秒只能得到 ~16Mb。

**测试代码：**

个人电脑：

```
 public static void main(String[] args) throws Exception 
    {
        Socket socket = new Socket(androidIpAddr, port);

        OutputStream output = socket.getOutputStream();

        byte[] bytes = new byte[1024 * 100]; // 10K
        for (int i = 0; i < bytes.length; i++) {
            bytes[i] = 12;
        } // fill the bytes

        // send them again and again
        while (true) {
            output.write(bytes);
        }
     } 
```

安卓：

```
public class MyActivity extends Activity {
/**
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);       

    new Thread(new Runnable() 
      {
        public void run() 
         {
           ServerSocket server = new ServerSocket(port);
           Socket socket = server.accept();

           InputStream input = socket.getInputStream();
           long total = 0;
           long start = System.currentTimeMillis();

           byte[] bytes = new byte[1024 * 100]; // 10K

           // read the data again and again
           while (true) 
           {
             int read = input.read(bytes);
             total += read;
             long cost = System.currentTimeMillis() - start;
             if (cost > 100) 
             {
               double megaBytes = (total / (1024.0 * 1024));
               double seconds = (cost / 1000.0);

               System.out.println("Read " + total + " bytes, speed: " + megaBytes / seconds + " MB/s");
               start = System.currentTimeMillis();
               total = 0;
             }
           }                
        }
    }).start();

} 
```

}

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:56:30.300

好的，第一个 54Mbps 的 Wifi 是每秒54 x 1024 x 1024*位。*所以最大 6.75 MB/s。

我在我的网络上进行了实验，在我的 Windows 7 框中报告为 54 Mbps。在我的 Windows 7 机器（服务器）和 XP 机器（客户端）之间，我基本上使用上面的代码实现了 3.0 MB/s。

然后我在我的 Nexus 7（服务器）和 XP（客户端）之间运行相同的代码，得到 0.3 MB/s。因此速度显着下降。我将以下内容放在服务器线程的构造函数中：

```
android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO); 
```

在清单中：

```
<uses-permission android:name="android.permission.RAISED_THREAD_PRIORITY"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

我也搬到了路由器附近，关闭了wifi，然后重新打开。它在 Nexus 7 上报告为 54Mbps，当我运行它时，我得到了 3.0 MB/s。

所以此时与 Windows 7 相同的结果和大约 44% 的理论网络吞吐量。

使用多个 TCP 连接可以让我们接近 100% 的吞吐量。

# java - 为基于 Java 的游戏组织源代码

> ID：15049031
> 
> 赞同：0
> 
> 时间：2013-02-24T05:40:40.447
> 
> 标签：java, structure, organization

即使我不是java专家，我还是决定做一个小游戏。问题是，我不知道如何将我的代码组织到文件夹中，以及将特定类放在哪里。到目前为止，我只完成了非常小的程序，其中包括我将几个 .class 文件放在一个文件夹中并称之为一天。

到目前为止，我已经组织了一些代码，但我知道它不符合惯例，我想这样做。

这是我目前所拥有的，但我还没有深入编程，所以我现在可以改变一切。

-项目

*   源代码
    *   元素
        *   实体
            *   动物
            *   物品
            *   暴民
            *   全国人大
            *   播放器
        *   环境
            *   摇滚类
            *   树类
    *   主要的
        *   游戏类
        *   Board.class

我希望所有实体（动物、物品、生物、npc 和玩家）能够引用一个名为“实体”的类，并且所有元素（实体或环境下的任何东西）都能够引用一个类称为“元素”。

因此，在所有这些信息之后，这是我的问题：

1.  我应该如何组织这个？即使搜索了一段时间，我也没有找到任何关于约定的东西，即使那样，我仍然不知道在哪里放一些东西。（任何关于传统组织的教程或信息的链接都会很棒）

2.  最好将精灵和其他文件（例如声音）与每个元素一起存储在一个包中，还是存储在单独的“资源”文件夹中？

3.  我应该在哪里放置 Element.class 和 Entity.class 以便每个元素和实体都可以访问它们？

ps：很抱歉，如果我提供了额外的信息，上次我在这里发布了一些东西，它因为没有提供足够的信息而被删除

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:49:28.990

你在正确的轨道上。看一看 Maven 约定，它会将您的源代码`src/main/java`放在`src/main/resources`. 将所有代码命名在您“拥有”的包根目录下，例如`com.mydomain`.

您对实体和环境对象等的包的想法是有效的；但是，组织您的课程对您的应用程序有意义。除非您出于某种原因尝试使用 package-private（无修饰符），否则您不必必须将所有内容都放在同一个包中进行访问。

# c - 未初始化的值是由堆栈分配创建的

> ID：15049033
> 
> 赞同：6
> 
> 时间：2013-02-24T05:40:51.923
> 
> 标签：c, valgrind

```
==13890== Conditional jump or move depends on uninitialised value(s)
==13890==    at 0x4E7E4F1: vfprintf (vfprintf.c:1629)
==13890==    by 0x4E878D8: printf (printf.c:35)
==13890==    by 0x400729: main (001.c:30)
==13890==  Uninitialised value was created by a stack allocation
==13890==    at 0x400617: main (001.c:11) 
```

被引用的行：

```
int limit = atoi(argv[1]); 
```

我不知道如何解决它。我曾尝试在 stackoverflow 和 google 上搜索，但找不到解决方案。

代码（来自修订历史）：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    if (argc != 2) {
        printf("You must pass a single integer\n");
        exit(1);
    }

    int limit = atoi(argv[1]); 
    int numbers[limit / 2];
    int count = 0;
    int i;
    for (i = 3; i < limit; i++) {
        if (i % 3 == 0 || i % 5 == 0) {
            numbers[count] = i;
            count++;
        }
    }

    int sum = 0;

    for (i = 0; i < count; i++) {
        sum += numbers[i];
    }

    printf("The sum is: %d\n", sum);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T06:17:02.973

你检查`argc`过和内容`argv[1]`吗？`argv[1]`保证非`NULL`以适合作为输入吗`atoi`？由于非数字，是否有`atoi`可能返回表示未初始化值的陷阱表示？`argv[1]`

*编辑*：看到完整的代码后，我意识到这不是问题所在，您的诊断不正确。你的问题在这里：`for (i = 0; i <= count; i++) { sum += numbers[i]; }`当`i == count`,`numbers[i]`未初始化。这是因为 count`numbers[count]`在上一个循环中最后一次赋值后递增：`numbers[count] = i; count++;`。因此，打印 sum 会导致您的消息，因为 sum 本身取决于未初始化的值。也许你的意思是`for (i = 0; i < count; i++) { sum += numbers[i]; }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-24T14:17:45.163

int limit = atoi(argv[1]) 先用init值声明，然后使用。

# java - java中的html解析引发异常

> ID：15049035
> 
> 赞同：0
> 
> 时间：2013-02-24T05:40:54.063
> 
> 标签：java, parsing

当我尝试从维基百科解析时，我在控制台中得到了这个

```
Exception in thread "main" java.lang.IllegalArgumentException: usage: supply url to fetch
at org.jsoup.helper.Validate.isTrue(Validate.java:45)
at org.jsoup.examples.HtmlToPlainText.main(HtmlToPlainText.java:26) 
```

这是我的java代码：

```
 Document doc = Jsoup.connect("http://wikipedia.com/").get();
 Elements newsHeadlines = doc.select("#mp-itn b a");
 String news = newsHeadlines.toString();
 system.out.println(news); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T05:44:19.253

看来您实际上并没有执行您的代码，而是 Jsoup 提供的示例代码。（如果不是这种情况，我们不应该期望`org.jsoup.examples.HtmlToPlainText.main`在堆栈跟踪中看到。）

确保您实际上是在运行自己的代码，而不是示例 - 它期望在命令行上提供 URL（因为，您的当前是硬编码的）。

# opengl - 延迟渲染中的阴影贴图投影 (OpenGL 3.3)

> ID：15049036
> 
> 赞同：2
> 
> 时间：2013-02-24T05:41:20.117
> 
> 标签：opengl, deferred-rendering, shadow-mapping

我有一个有效的 G 缓冲区（颜色、法线、深度），对于每个聚光灯，我都有从灯光的角度看的深度图。问题出在光照贴图阶段，我无法让它工作。你能指出这里有什么问题吗？

这是我对这个过程的“理解”：

```
1\. Pass the G-buffer depth map to the lighting shader
2\. Pass the light's depth map to the lighting shader
3\. For each pixel in the G-buffer depth map:
    3.1\. Get the depth value from the texture
    3.2\. Convert the X and Y coordinates from texture space to clip space
        3.2.1\. pos.x = texcoord.x * 2.0 - 1.0;
        3.2.2\. pos.y = -(texcoord.y * 2.0 - 1.0);
    3.3\. Set pos.w to 1
    3.4\. Multiply the position by inverse view projection matrix to get the world space coordinate
    3.5\. Divide the new coordinates by w to "correct" the coords
    3.6\. Multiply the coordinates by light's view matrix
    3.7\. Change the coordinates from clip space to texture space
    3.8\. Compare the Z value of the pixel to the depth value in the light's depth map
    3.9\. If pos.z > depthmap.z, the pixel is in shadow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:22:22.617

这个过程实际上是相反的。您不会将纹理坐标转换为剪辑空间，而是将坐标从剪辑空间转换为纹理。为此，您需要将光照相机和投影传递给片段着色器（并且至少在 OpenGLES 2.0 中将位置从顶点着色器传递给片段着色器，不了解 OpenGL 3.3）。

*   将位置乘以相机和投影，您将获得灯光视图中的位置。
*   将 xyz 除以 w，您将获得光照视图剪辑空间中的位置。
*   将 x 和 y 乘以 0.5 并加上 0.5，您将获得阴影贴图的 uv 坐标。

现在您可以在 uv 处读取阴影贴图的深度并将其与像素的深度进行比较。

# r - 在 R 中更新 data.frame

> ID：15049039
> 
> 赞同：1
> 
> 时间：2013-02-24T05:42:53.303
> 
> 标签：r

一个data.frame“df”

```
 st1 st2 st3 st4 st5
1  0   0   0   0   0
2  0   0   0   0   0
3  0   0   0   0   0
4  0   0   0   0   0
5  0   0   0   0   0
6  0   0   0   0   0 
```

将基于向量进行更新。向量是从某个函数调用返回的，每次它可能包含不同数量的列，但向量列始终存在于 data.frame“df”中。

```
for (i in 1:10)
{
  x<-funcall()
  print(x)
  #           time.chosen
  #st3        2
  #st5        4
  // Update data.frame "df"
} 
```

有什么简单的方法可以在 R 中进行这种更新吗？

更新：让我们假设，对于 for 循环的第一次迭代，x 是

```
 time.chosen
st3        2
st5        4 
```

那么 data.frame df 应该如下所示

```
 st1 st2 st3 st4 st5
1  0   0   2   0   4
2  0   0   0   0   0
3  0   0   0   0   0
4  0   0   0   0   0
5  0   0   0   0   0
6  0   0   0   0   0 
```

循环的每次迭代对应于 data.frame df 中的一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:03:20.780

像这样的东西应该可以工作：

```
 df[iter,rownames(vector)] <- vector$time.chosen 
```

在这里，我假设向量是这样的 data.frame ：

这里有一个例子：

```
vector = data.frame(time.chosen= c(1,2))
rownames(vector) <- paste('t',c(2,3),sep='')
  time.chosen
t2           1
t3           2

df <- as.data.frame(diag(5)*0)
colnames(df) <- paste('t',c(1:5),sep='')

iter <- 1
df[iter,rownames(vector)] <- vector$time.chosen

t1 t2 t3 t4 t5
1  0  1  2  0  0
2  0  0  0  0  0
3  0  0  0  0  0
4  0  0  0  0  0
5  0  0  0  0  0

 iter <-4
 df[iter,rownames(vector)] <- vector$time.chosen

 t1 t2 t3 t4 t5
1  0  1  2  0  0
2  0  0  0  0  0
3  0  0  0  0  0
4  0  1  2  0  0
5  0  0  0  0  0 
```

# android - 当 Android 设备连接到 PC 时，从 PC 读取数据（作为 USB 数据）

> ID：15049040
> 
> 赞同：1
> 
> 时间：2013-02-24T05:43:13.733
> 
> 标签：android, usb, rfid, android-testing

我正在做一个项目，我们正在开发一个 Android 应用程序来从 USB 中的 RFID 芯片读取数据。Android 应用程序工作正常，当 USB（带有 RFID 芯片）连接到 Android 设备时读取 RFID 数据。但是我想在 Android 设备连接到 PC 时测试应用程序，并模拟来自 PC 的 USB 数据（RFID 数据）。可能吗？有没有人试过这个？
谢谢

# android - Android 4.0 中的后台视频录制

> ID：15049041
> 
> 赞同：23
> 
> 时间：2013-02-24T05:43:24.220
> 
> 标签：android, video, background, recording

**我尝试在 Android 4.0 中组织背景视频录制。但由于这些问题，我不能这样做：**

1.  虚拟表面在 MediaRecorder 中不起作用（错误：无效表面）

2.  如果在 Activity 上使用 Surface 1 x 1 px，Surface 在 Activity 暂停时被销毁（录制停止）

3.  如果您在 WindowsManager 上使用 Surface 1 x 1 px，Surface 会在应用程序暂停时被销毁（停止录制）

4.  SurfaceTexture 在 MediaRecorder.setPreviewDisplay(new Surface(SurfaceTexture)) 中不起作用

5.  小部件不允许处理 Surface 1 x 1 px

6.  状态栏不允许处理 Surface 1 x 1 px

**请帮我找到正确的方法。**

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-05-14T21:07:56.403

示例和简单代码（在 Jelly Bean、SGS2 上测试）：

```
public class BackgroundVideoRecorder extends Service implements SurfaceHolder.Callback {

    private WindowManager windowManager;
    private SurfaceView surfaceView;
    private Camera camera = null;
    private MediaRecorder mediaRecorder = null;

    @Override
    public void onCreate() {

        // Start foreground service to avoid unexpected kill
        Notification notification = new Notification.Builder(this)
            .setContentTitle("Background Video Recorder")
            .setContentText("")
            .setSmallIcon(R.drawable.ic_launcher)
            .build();
        startForeground(1234, notification);

        // Create new SurfaceView, set its size to 1x1, move it to the top left corner and set this service as a callback
        windowManager = (WindowManager) this.getSystemService(Context.WINDOW_SERVICE);
        surfaceView = new SurfaceView(this);
        LayoutParams layoutParams = new WindowManager.LayoutParams(
            1, 1,
            WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
            WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH,
            PixelFormat.TRANSLUCENT
        );
        layoutParams.gravity = Gravity.LEFT | Gravity.TOP;
        windowManager.addView(surfaceView, layoutParams);
        surfaceView.getHolder().addCallback(this);

    }

    // Method called right after Surface created (initializing and starting MediaRecorder)
    @Override
    public void surfaceCreated(SurfaceHolder surfaceHolder) {

        camera = Camera.open();
        mediaRecorder = new MediaRecorder();
        camera.unlock();

        mediaRecorder.setPreviewDisplay(surfaceHolder.getSurface());
        mediaRecorder.setCamera(camera);
        mediaRecorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));

        mediaRecorder.setOutputFile(
                Environment.getExternalStorageDirectory()+"/"+
                DateFormat.format("yyyy-MM-dd_kk-mm-ss", new Date().getTime())+
                ".mp4"
        );

        try { mediaRecorder.prepare(); } catch (Exception e) {}
        mediaRecorder.start();

    }

    // Stop recording and remove SurfaceView
    @Override
    public void onDestroy() {

        mediaRecorder.stop();
        mediaRecorder.reset();
        mediaRecorder.release();

        camera.lock();
        camera.release();

        windowManager.removeView(surfaceView);

    }

    @Override
    public void surfaceChanged(SurfaceHolder surfaceHolder, int format, int width, int height) {}

    @Override
    public void surfaceDestroyed(SurfaceHolder surfaceHolder) {}

    @Override
    public IBinder onBind(Intent intent) { return null; }

} 
```

不要忘记权限：

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-24T06:44:38.853

```
try { 
        mediaRecorder.prepare(); 
    } catch (Exception e) {}
    mediaRecorder.start();
    Timer t = new Timer();
    t.schedule(new TimerTask() {
        @Override
        public void run() {
            stopSelf();
        }
    }, 5000);
}catch(Exception e){} 
```

只需对上述代码稍作修改...它将 5sec 文件保存到您 sdcard 的根文件夹中...根据您的需要修改计时器。它也适用于 Nexus 4 和 Micromax..

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-02-26T09:22:00.073

我找到了答案：必须使用 WindowManager 并从 Service 中调用它。

# java - 通过从属性文件中读取来填充 HashSet

> ID：15049048
> 
> 赞同：0
> 
> 时间：2013-02-24T05:45:19.840
> 
> 标签：java, properties

下面是我的`config.property file`

```
TABLES: table1 table2

#For Table1
table1.url: jdbc:mysql://localhost:3306/garden
table1.user: gardener
table1.password: shavel
table1.driver: jdbc-driver
table1.percentage: 80
table1.column: column1
table1.column: column2
table1.column: column3

#For Table2
table2.url: jdbc:mysql://otherhost:3306/forest
table2.user: forester
table2.password: axe
table2.driver: jdbc-driver
table2.percentage: 20
table2.column: column1
table2.column: column2
table2.column: column3 
```

下面是我的代码，我在其中尝试读取上面的属性文件并`ReadTableConnectionInfo`通过使用不同的值填充它来创建对象，但不知何故，列 HashSet 没有填充与每个表对应的所有列名。`columns HashSet`我在每个表中只看到一个列名。

```
private static void readPropertyFile() throws IOException {

    prop.load(Read.class.getClassLoader().getResourceAsStream("config.properties"));

    tableNames = Arrays.asList(prop.getProperty("TABLES").split(" "));

    for (String arg : tableNames) {

        ReadTableConnectionInfo ci = new ReadTableConnectionInfo();

        String url = prop.getProperty(arg + ".url");
        String user = prop.getProperty(arg + ".user");
        String password = prop.getProperty(arg + ".password");
        String driver = prop.getProperty(arg + ".driver");
        String table = prop.getProperty(arg + ".table");
        double percentage = Double.parseDouble(prop.getProperty(arg + ".percentage"));

        String columnPrefix = arg + ".column";
        HashSet<String> columns = new HashSet<String>();
        for (String key : prop.stringPropertyNames()) {
            if (key.startsWith(columnPrefix))
                columns.add(prop.getProperty(key));
        }

        ci.setUrl(url);
        ci.setUser(user);
        ci.setPassword(password);
        ci.setDriver(driver);
        ci.setTableName(table);
        ci.setPercentage(percentage);
        ci.setColumns(columns);

        tableList.put(arg, ci);
    }
} 
```

我在这里填充列 HashSet 然后将列 HashSet 添加到这里有什么问题`ReadTableConnectionInfo class`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T05:59:09.400

问题是您在属性文件中多次重复相同的键，因此在加载它时，只有一个键被加载到`Properties`对象中：

```
table1.column: column1
table1.column: column2 //key: table1.column
table1.column: column3 //key: table1.column
//similar for table2 
```

只需将您的密钥名称更改为其他名称即可。

If you don't want to do that, you can concatenate all the values in a single key and then use `String#split` function to recover every value.

# javascript - .height() 函数在设置为 auto 时显示错误值

> ID：15049049
> 
> 赞同：1
> 
> 时间：2013-02-24T05:45:44.420
> 
> 标签：javascript, jquery, css

当我`jquery.load`在 div （其高度为 0px 并且溢出：隐藏）上使用将内容加载到该 div 然后快速`jquery.css`将其高度更改为自动然后使用该`.height()`函数获取值时，我遇到了这个问题它的`auto`高度，所以当我为它制作动画时，我知道动画的价值。问题是`.height()`我第一次运行函数时返回 0 作为值，但第二次返回正确的值。这是我正在使用的代码。

```
$('#adobe').click(function()
{
    $('#info').animate(
    {
        height:'0px'
    },600,function()
    {
        $('#info').load('projects/adobe.html',animateHeight());
    });
});

function animateHeight()
{
    console.log($('#info'));
    var temp = $('#info');
    var curHeight = temp.height();
    temp.css('height', 'auto');
    var autoHeight = temp.height();
    temp.css('height',curHeight);
    console.log(autoHeight);
    $('#info').animate(
    {
        height:autoHeight
    },600);

    $(window).scrollTo($('#info'),600,{axis:'y'});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:02:43.427

`animateHeight()`当你被调用时，DOM 将没有时间更新自己；您可以将其添加到您的点击处理程序中：

```
$('#info').load('projects/adobe.html', function() { 
    setTimeout(animateHeight, 0); 
}); 
```

这会将执行返回给浏览器，让 DOM 在依赖它之前更新其维度，尤其是当它们设置为`auto;`.

# .net - 服务间通信

> ID：15049051
> 
> 赞同：0
> 
> 时间：2013-02-24T05:46:17.133
> 
> 标签：.net, wcf, web-services, asp.net-mvc-4

我必须在从 .NET 服务获取的 ASP.NET MVC4 应用程序中存储和显示一个数字并描述架构。网站服务必须使用某种 WCF 绑定与 .NET 服务进行通信。服务方法应接受一个素数并返回下一个更大的素数......整个解决方案的最佳设计是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:18:17.183

有两个要素：

*   WCF 服务 - 有关一些很棒的教程链接，请参阅[此答案](https://stackoverflow.com/a/296104/30512)
*   使用服务的 ASP.NET 逻辑，[这篇 MSDN 文章](http://blogs.msdn.com/b/tess/archive/2009/01/12/wcf-101-creating-and-consuming-a-basic-wcf-service-hosted-in-iis.aspx)应该对此有所帮助。

# css - 垂直新闻提要设计

> ID：15049052
> 
> 赞同：-2
> 
> 时间：2013-02-24T05:46:22.080
> 
> 标签：css, html, feed

谁能解释 CSS 和 HTML 标记如何寻找垂直新闻提要设计，例如：[http ://dribbble.s3.amazonaws.com/users/41027/screenshots/619599/attachments/51139/TheSecret_Concept.png](http://dribbble.s3.amazonaws.com/users/41027/screenshots/619599/attachments/51139/TheSecret_Concept.png)

我真的很喜欢图标 + 右侧带有文字的线条。我知道 CSS 具有 content 属性，我可以为垂直线添加一个符号并使用边框，但我想知道如何使用图像/引导图标而不是在 CSS 中声明符号。

任何提示或教程将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:46:14.173

```
这是一些真正可怕的 CSS，我可能应该为此开枪，但是，它似乎有点像你发布的内容。那是; 假设这*就是*你所说的。无论如何，假设您正在谈论 Zane David 或其他任何人的那些小文本，图标在侧面，并且有一条线穿过图标，这是我用修改过的项目符号和一个无序列表来做这件事的可怕尝试hr 穿过它们。这绝对不是理想的选择，但是，我认为带有 li 和自定义子弹的 ul 是正确的选择。顺便原谅叶子。[http://jsbin.com/efiveq/1](http://jsbin.com/efiveq/1)

如果您完全忽略我可怕的定位等，您仍然应该能够看到无序列表可能是最好的方法。

编辑：切换 .news-feed .well:after 的代码：

.news-feed .well:after {
content:"";
position: absolute;
top: 60%;
left: 5px;
border-top: 20px solid #A5A5A5;
border-top-color: inherit;
border-left: 20px solid transparent;
border-right: 20px solid transparent;
-webkit-transform: rotate(90deg); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:04:34.190

您在这里提出的问题需要几页纸来解释。
我可以建议您通过以下 Youtube 教程来学习如何使用 css 处理图像。
观看这些视频并进行练习后，您将能够设计出比您在问题中上传的图像中的元素更好的设计。

*   [http://www.youtube.com/watch?v=GJ5CiFCpErE](http://www.youtube.com/watch?v=GJ5CiFCpErE)
*   [http://www.youtube.com/watch?v=QM6i5WglYbs](http://www.youtube.com/watch?v=QM6i5WglYbs)
*   [http://www.youtube.com/watch?v=fpObCDzAOIU](http://www.youtube.com/watch?v=fpObCDzAOIU)

如果需要，您可能应该观看类似的视频 :)

# php - PHP - 多维数组的自定义输出

> ID：15049053
> 
> 赞同：1
> 
> 时间：2013-02-24T05:46:30.260
> 
> 标签：php, arrays, multidimensional-array

在 PHP 中，我有一个名为 $listing 的二维数组，它将包含具有以下结构的数据：

```
(
    [1] => Array
        (
            [category] => tech
            [business_name] => Apple
        )

    [2] => Array
        (
            [category] => food
            [business_name] => McDonalds
        )

    [3] => Array
        (
            [category] => tech
            [business_name] => Dell
        )

) 
```

我想以按*类别*（按字母顺序）分组的纯文本输出，然后是 *business_name*（按字母顺序）。请注意，这只是显示方式的一个子集 - 可能有 50 个类别和 1000 个列表 - 所以代码需要考虑到这一点。

因此，使用上述 $listing 的输出，我需要它输出如下：

```
category: food
business_name: McDonalds

category: tech
business_name: Apple
business_name: Dell 
```

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T05:57:51.493

有很多方法可以做到这一点，但这应该让你开始。

```
$data = array();

foreach ($listing as $item) {
    $data[$item['category']][] = $item['business_name'];
}

ksort($data);

$data = array_map(function($names) {
    sort($names);
    return $names;
}, $data); 
```

未经测试...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T05:56:33.867

看看 PHP multiarray sort [http://www.php.net/manual/en/function.array-multisort.php](http://www.php.net/manual/en/function.array-multisort.php)对你的数组进行多排序，看看是否有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T06:54:10.480

我使用了[array_multisort()](http://www.php.net/manual/en/function.array-multisort.php) 函数。看下面的代码。

```
 <?php

                //array to sort 
                $data[0] = array('category'=> 'tech','business_name' => 'apple')  ;
                $data[1] = array('category'=> 'food','business_name' => 'McDonalds')  ;
                $data[2] = array('category'=> 'tech','business_name' => 'dell')  ;
                $data[3] = array('category'=> 'food','business_name' => 'subway')  ;

                foreach($data as $key => $val){
                 $cat[$key] = $val['category'];
                 $bus[$key] = $val['business_name'];
                }

                // Sort the data with category and business_name with ascending order
                array_multisort($cat, SORT_ASC, $bus, SORT_ASC, $data);
       //         echo "<pre>";print_r($data);echo "</pre>";unset($val);

                //put the category as key And business name as value with comma seperated.
                $category = array();
                foreach($data as $key => $val){
                    if(array_key_exists($val['category'],$category ))
                    {
                        $category[$val['category']] = $category[$val['category']].', '.$val['business_name'];
                    }
                    else
                    {
                        $category[$val['category']] = $val['business_name']; // $category 
                    }   
                }

                //print the sorted data

                foreach($category as $key => $val){
                    //print category
                    echo "<br /> <br />Category: ".$key;
                    $b_name = explode(',', $val);
                    //to print busniess name
                    foreach($b_name as $k => $v){
                        echo "<br />Business Name: ".$v;
                    }
                 }

                ?>

        //OUTPUT

       Category: food
       Business Name: McDonalds
       Business Name: subway

       Category: tech
       Business Name: apple
       Business Name: dell 
```

# html - 水平显示锚链接的背景图像

> ID：15049054
> 
> 赞同：0
> 
> 时间：2013-02-24T05:46:32.030
> 
> 标签：html, css, css-sprites

我正在尝试在我的网页中显示不同的图标，如下所示：

![在此处输入图像描述](../Images/936dd9848086dcce987b8051117026fc.png)

我已经尝试了以下 HTML 和 CSS 代码，但它是否垂直显示图标，如下所示：

![在此处输入图像描述](../Images/e5584d3ab3d35b26eafd9466f33b4a5e.png)

HTML

```
<div id="socialNetwork">
<a href="http://www.twitter.com" target="_blank" class="twitter"></a>
<a href="http://www.facebook.com" target="_blank" class="facebook"></a>
<a href="http://www.linkedin.com" target="_blank" class="linkedIn"></a>
</div> 
```

CSS

```
#socialNetwork a{
display:block;
height:35px; 
width:34px;
text-indent:-9999px;

}

.twitter {
background-image:url(twitter.png);
}

.twitter:hover {
background-image:url(twitter_hover.png);
}

.facebook {
background-image:url(facebook.png);
}

.facebook:hover {
background-image:url(facebook_hover.png);
}

.linkedIn {
background-image:url(linkedIn.png);
}

.linkedIn:hover {
background-image:url(linkedIn_hover.png);
} 
```

我认为代码是垂直显示图标，因为我`display:block;` 在`#socialNetwork a`. 但如果我删除 `display:block;`图标不会出现。

你能告诉我如何让图标像上面第一张图片那样水平显示吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:54:40.957

尝试使用：

```
#socialNetwork a { display: inline-block; } 
```

# java - 看不到 Java GUI 按钮的标签

> ID：15049058
> 
> 赞同：3
> 
> 时间：2013-02-24T05:46:58.993
> 
> 标签：java, swing, user-interface, layout-manager, null-layout-manager

我是二年级学生，我正在做我的 OOP 项目（计算器）。我已经完成了数字按钮和操作符的功能。现在我正处于重新排列按钮的阶段。起初，我只是将我的按钮大小设置为 (50,50)，它工作正常并且它的标签仍然可见，但是当我决定将它变小 (30, 30) 时，它的标签变成了“...” .

这是图片：

![GUI btn 显示 ... 而不是 MC、MR、MS 和 M+](../Images/366c2df30bcba8ebb8a77ab099c5a994.png)

这是我的代码：

```
 lblEdit.setBounds(-138,-5,180,50);    
  lblView.setBounds(-90,-5,180,50); 
  lblHelp.setBounds(-40,-5,180,50); 
  txt.setBounds(15,35,250,30);      // text pane
  txt2.setBounds(0,330,100,20); 
  blank.setBounds(15,80,30,30);     // this is just an extra button, no use at all, OK? :D 
  btnMC.setBounds(15,115,30,30);
  btnMR.setBounds(15,150,30,30);
  btnMS.setBounds(15,185,30,30);
  btnMp.setBounds(15,220,30,30); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T06:11:40.767

您的问题是您将按钮大小设置为开始。如果您改为使用适当的布局管理器并调用`pack()`JFrame 让 JButton 和 GUI 自行调整大小，您将获得一个外观不错的 GUI，它可以显示任何操作系统中的所有文本。解决方案：不要使用空布局，不要调用`setBounds(...)`、阅读和使用嵌套 JPanel 中的适当布局管理器，让这些布局管理器为您完成所有繁重的布局提升。

例如，您可以使用 GridLayout 创建一个按钮网格，并通过简单地更改按钮的字体大小来更改网格和按钮的大小。例如，运行下面的代码两次，更改按钮字体大小（在下面的代码中，浮动常量 BTN_FONT_SIZE）并查看 GUI 如何通过将按钮大小调整为最佳大小来自动适应按钮字体。

```
import java.awt.GridLayout;
import javax.swing.*;

public class CalcEg {
   private static final float BTN_FONT_SIZE = 20f;  // **** try using 40f here ****
   private static final String[][] BTN_LABELS = {
      {"7", "8", "9", "-"},
      {"4", "5", "6", "+"},      
      {"1", "2", "3", "/"},
      {"0", ".", " ", "="}
   };
   private JPanel mainPanel = new JPanel();

   public CalcEg() {
      int rows = BTN_LABELS.length;
      int cols = BTN_LABELS[0].length;
      int gap = 4;
      mainPanel.setBorder(BorderFactory.createEmptyBorder(gap, gap, gap, gap));
      mainPanel.setLayout(new GridLayout(rows, cols, gap, gap));
      for (String[] btnLabelRow : BTN_LABELS) {
         for (String btnLabel : btnLabelRow) {
            JButton btn = createButton(btnLabel);
            // add ActionListener to btn here
            mainPanel.add(btn);
         }
      }
   }

   private JButton createButton(String btnLabel) {
      JButton button = new JButton(btnLabel);
      button.setFont(button.getFont().deriveFont(BTN_FONT_SIZE));
      return button;
   }

   public JComponent getMainComponent() {
      return mainPanel;
   }

   private static void createAndShowGui() {
      CalcEg mainPanel = new CalcEg();

      JFrame frame = new JFrame("CalcEg");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel.getMainComponent());
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

* * *

如果您使用 JPanel 将按钮 JPanel 嵌套到 BorderLayout 中，并将 JTextField 添加到其 PAGE_START 或 NORTH 端，并且您使用不同的字体大小，您将看到如下内容：

![在此处输入图像描述](../Images/387dbc20e49a2e73e0507ebaf40439e4.png)

# java - 简单的线程同步问题

> ID：15049060
> 
> 赞同：-1
> 
> 时间：2013-02-24T05:47:52.923
> 
> 标签：java, multithreading, synchronization

在下面的代码中，如果我同步方法，它不会对输出产生影响`bar`- 我做错了什么？我相信同步“bar”会使“ThraOne”被打印10次，然后只打印“ThreadTwo”，但事实并非如此。我得到的输出如下：

* * *

```
我是测试线程：Thread OneOneOneOne
我是测试线程：Thread OneOneOneOne
我是测试线程：Thread OneOneOneOne
我是测试线程：Thread OneOneOneOne
我现在主要
我是测试线程：Thread OneOneOneOne
我是测试线程：线程二
我是测试线程：线程二
我是测试线程：Thread OneOneOneOne
我是测试线程：线程二
我是测试线程：Thread OneOneOneOne
我是测试线程：线程二
我是测试线程：Thread OneOneOneOne
我是测试线程：线程二
我是测试线程：Thread OneOneOneOne
我是测试线程：线程二
我是测试线程：Thread OneOneOneOne
我是测试线程：线程二
我是测试线程：线程二
我是测试线程：线程二
我是测试线程：线程二
我现在主要

```

等等。这是我的代码：

```
package com.rahul;

class ThreadTest implements Runnable{
    @Override
    public void run() {
        bar();
    }
    public synchronized void bar() {
        for(int i=0;i<10;i++){
            System.out.println("I am Test thread:"+Thread.currentThread().getName());
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    }
}

public class Test{
    public static void main(String[] args) {
        Thread t1 = new Thread(new ThreadTest(),"Thread OneOneOneOne");
        Thread t2 = new Thread(new ThreadTest(),"Thread Two");
        t1.start();
        try{
            Thread.sleep(4000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        t2.start();
        while(true){
            System.out.println("I am in main now");
            try {
                t2.join();
                Thread.sleep(4000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T05:51:09.397

您有*两个*. `ThreadTest`它们彼此无关；你打电话的不一样`bar()`

如果您改为这样做：

```
ThreadTest tt = new ThreadTest();
Thread t1 = new Thread(tt,"Thread OneOneOneOne");
Thread t2 = new Thread(tt,"Thread Two"); 
```

然后两个线程共享一个实例，`ThreadTest`并且一次只有一个线程能够`bar()`在该单个实例上调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T05:52:31.550

将方法声明为 `synchronized`不会产生您期望的效果。每个线程都在自己的 实例上同步`ThreadTest`，因此调用不会交互。您需要在共享对象上同步一个线程以阻止另一个线程。例如：

```
class ThreadTest implements Runnable{
    private static Object LOCK_OBJECT = new Object();
    @Override
    public void run() {
        bar();
    }
    public void bar() {
        synchronized (LOCK_OBJECT) {
            for(int i=0;i<10;i++){
                System.out.println("I am Test thread:"+Thread.currentThread().getName());
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T05:52:53.200

您正在同步的方法仅由一个线程访问，因为它们是实例方法，因此每个线程都在调用它*自己的*bar 方法。

也许您想将 bar 方法声明为`static`.

# javascript - Javascript 问题，我的 div 不会移动

> ID：15049061
> 
> 赞同：0
> 
> 时间：2013-02-24T05:47:55.557
> 
> 标签：javascript

昨天在课堂上，我的老师放了一些代码让我们在家测试，但我似乎无法让代码工作。代码应该做的是在按住鼠标的同时移动一个 div。我给我的朋友看了，我们认为问题出在：

```
calculator.style.top = getStyle(calculator, "top");
calculator.style.left = getStyle(calculator, "left");

function getStyle(object,styleName)
{
 if (window.getComputedStyle)
  {
    return document.defaultView.getComputedStyle(object, null).getPropertyValue(styleName);
  }
 else if (object.currentStyle)
   {
    return object.currentStyle[styleName];
   }
} 
```

但我们似乎仍然无法让它发挥作用。帮助将不胜感激。这里还有完整的代码，以防您需要查看它：

```
diffx = null;
diffy = null;
off = document.getElementById("buttonOff");
on = document.getElementById("calcButton");
calculator = document.getElementById("calculator");
calculator.style.top = getStyle(calculator, "top");
calculator.style.left = getStyle(calculator, "left");

function getStyle(object,styleName)
{
 if (window.getComputedStyle)
  {
    return document.defaultView.getComputedStyle(object, null).getPropertyValue(styleName);
  }
 else if (object.currentStyle)
   {
    return object.currentStyle[styleName];
   }
}

function grabCalculator(e)
{
            var evt = e || window.event;
            calculator = evt.target || evt.srcElement;
            var mousex = evt.clientX;
            var mousey = evt.clientY;
            diffx = parseInt(calculator.style.left) – mousex;
            diffy = parseInt(calculator.style.top) – mousey;
            addEvent(document, "mousemove", moveCalculator, false);
            addEvent(document, "mouseup", dropCalculator, false);
}

function moveCalculator(e)
{
            var evt = e || window.event;
            var mousex = evt.clientX;
            var mousey = evt.clientY;
            calculator.style.left = mousex + diffx + "px";
            calculator.style.top = mousey + diffy + "px";
}

function addEvent(obj, eventType, fnName, cap)
{
            if (obj.attachEvent)
            {
                        obj.attachEvent("on" + eventType, fnName);
            }

            else
            {
                        obj.addEventListener(eventType, fnName, cap);
            }
}

function removeEvent(obj, eventType, fnName, cap)
{
            if (obj.attachEvent)
            {
                        obj.detachEvent("off" + eventType, fnName);
            }

            else
            {
                obj.removeEventListener(eventType, fnName, cap);
            }
}

function dropCalculator(e)
{
            removeEvent(document,"mousemove", moveCalculator, false);
            removeEvent(document, "mouseup", dropCalculator, false);
}

function main() {
    alert("TEST");
    //store top and left values of calculator
    calculator.style.top = getStyle(calculator, "top");
    calculator.style.left = getStyle(calculator, "left");
    calcButtonState = true;

}

window.onload = main; 
```

再次感谢！桑德罗

* * *

编辑：添加 Jsfiddle 链接：http: [//jsfiddle.net/7225J/](http://jsfiddle.net/7225J/)

（而且输出看起来很糟糕，因为它不应该被调整到那么小）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T05:56:12.987

我认为您的问题出在 GrabCalculator 函数中。尝试改变：

```
diffx = parseInt(calculator.style.left) – mousex;
diffy = parseInt(calculator.style.top) – mousey; 
```

至：

```
diffx = parseInt(calculator.offsetLeft) – mousex;
diffy = parseInt(calculator.offsetTop) – mousey; 
```

也把它放在主要的：

```
addEvent(..., grabCalculator, ...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T23:36:23.070

在 main 中，设置初始计算器坐标，如下所示：

```
calculator.style.top = 0 + "px";
calculator.style.left = 0 + "px"; 
```

根本不要使用 getStyle 。之后直接访问即可。它将起作用，因为您将这两行放入主行。

# linux - 硬件启动 - 在新板上安装 uboot

> ID：15049064
> 
> 赞同：2
> 
> 时间：2013-02-24T05:48:24.533
> 
> 标签：linux, embedded, bsp

我非常了解本机和嵌入式系统上的 Linux。我已将 BSP 移植到 mini2440 和 Pandaboard。我还为 x86 和 arm 板交叉编译了几个包，包括从源代码自定义 VLC。

那么我想知道的是假设如果有一个新的板（在制造过程之后新到货），那么如何将它启动以运行 Linux，我知道首先我必须移植 Uboot 或任何 boorloader，但为此必须知道 Flash 存储器的地址大小。

我的问题是假设有新的板，那么假设我没有关于地址的任何信息，我如何将 uboot 移植到板上，板刚刚来自制造过程。就像许多公司都提供诸如芯片启动和电路板启动之类的服务一样，但是启动它需要哪些信息？

谈到 mini2440 和 pandaboard，我们可以得到公司的支持，但是假设任何新公司想要移植 Android/Linux，需要哪些信息或如何移植引导加载程序然后 Linux/Android？

按照 1 总结我的问题。如何将 Uboot 移植到新板上？2.如何将Kernel移植到板子中？3\. 芯片如何上板？

我想学习新事物，并希望比 BSP 移植到董事会领先一步。

期待专家的来信。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:50:15.357

我在开发新板方面有一些工作经验。我的回答是：（1）熟悉硬件设计，比如熟悉原理图；(2) 在 UBoot 源码树中，选择一个与新开发板相似的演示板。在此基础上开始培养；(3)Linux内核也一样；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:01:03.907

关于第三季度：

> 如何将芯片带入电路板

如果您可以访问 JTAG（或其他附加的）调试器，则可以加载完整的内核，然后使用标准的用户空间工具和附件继续。例如，使用 ftp 从服务器拉取 flash 镜像，使用 mtd-utils 写入 flash（例如使用`flash_erase`and `nandwrite`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:42:51.677

在 mini2440 中有带有 supervivi 引导加载程序（来自三星）的 NOR 闪存。这将有助于将 UBOOT 加载到 NAND 闪存。

如果我们有带有 NOR 闪存的新板，首先我们应该寻找一些可以在 NOR 上闪存的工具，然后我们可以看到如何将 Uboot 闪存到 NAND。

如果我们在新板上没有 NOR，那么我不确定，据我所知，我们不能直接从 NAND 执行指令，它必须加载到 RAM 中。

我在周末做同样的事情（提出新的董事会）。如果我有进一步的事情，我会告诉你的。

如果您有更多信息，请更正/添加您的评论。

谢谢， 哈里什

# sql - 在 sql 函数中使用子查询

> ID：15049068
> 
> 赞同：1
> 
> 时间：2013-02-24T05:48:57.467
> 
> 标签：sql

我想问一下我们是否可以在 sql 函数中使用子查询（同时考虑组和单个函数）。我一直在尝试这个简单的查询 -

```
select count(select empno from emp where sal<3000) from emp; 
```

它给出了错误“缺少表达”。这只是一个简单的例子。

我只想知道这个查询逻辑是错误的还是sql中不允许的，如果我们可以在sql函数中使用子查询，请注意举个例子。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:50:55.083

您的查询根本没有意义。你为什么不这样做呢？

```
select count(empno) from emp where sal<3000; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T05:57:21.877

我认为这是可能的。有关示例，请参见[http://www.akadia.com/services/sqlsrv_subqueries.html （在页面上找到“DATEDIFF”以查看它）。](http://www.akadia.com/services/sqlsrv_subqueries.html)但是，我不确定它是否适用于所有类型的 SQL。例如，我使用 SAS，它有自己相当简单的 SQL 实现，但它似乎不允许这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T06:44:47.720

即使您能够使用子查询，它本质上也必须返回一个表达式或列名，可以通过循环记录来评估和计数。因此，您应该尝试将子查询结果用作查询中的列或任何其他连接组合来完成您的工作。

# android - 我们可以在 html5 移动设计中使用 9patch 图像吗

> ID：15049070
> 
> 赞同：0
> 
> 时间：2013-02-24T05:49:31.770
> 
> 标签：android, html, android-layout, nine-patch

我是原生安卓开发者。在设计部分 9patch 对我来说非常有用。问题是我需要知道我是否可以在 html5 android 应用程序中使用 9patch 图像？如果我在其中使用它们，它们会像在 android（本机）应用程序中那样拉伸吗？除此之外，其他平台的 html5 应用程序（我的意思是黑莓、Windows、iPhone 等）也可以。我使用 phone-gap 创建其他版本。

`https://github.com/chrislondon/9-Patch-Image-for-Websites`答案还可以，但问题是我必须做一些工作来解决这个问题。没有更好的选择吗？这是决定我是选择 html5 还是原生应用程序的大问题。

# java - 指向Java中类的不同实例的对象数组

> ID：15049073
> 
> 赞同：-1
> 
> 时间：2013-02-24T05:50:18.947
> 
> 标签：java, arrays, object

我有一堂几何课。在另一个类中，我想创建一个 Geometry 实例数组并引用它们。

```
class Geometry {

    private static int edges[];
    private static int vertices[];
    private static sphere();
    private static circle();  
}

class Example {

    Geometry [] Shape = new Geometry [5];
    public draw(){
        Shape[0] = new Geometry();
        Shape[1] = new Geometry();
        Shape[0].circle();
        Shape[1].sphere();

        <code to draw shape for Shape[i]>
    }
} 
```

`Sphere()`并`Circle()`以不同的方式初始化边和顶点。我希望 Shape[0] 将其边缘和顶点分配给圆，并将 Shape[1] 分配给球体。当我遍历绘图函数中的每个对象时，它应该先绘制一个圆形，然后绘制一个球体，而不是像当前那样绘制 2 个球体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:04:47.103

你只有一个类，没有虚函数；所以这不是一个真正的面向对象的代码。相反，请尝试以下操作：

```
abstract class Geometry {
    private int edges[];
    private int vertices[];
    abstract void draw();
}

class Circle extends Geometry {
    void draw() {
       // Code to draw a circle here.
    }
}

class Sphere extends Geometry {
    void draw() {
       // Code to draw a shere here.
    }
}

class Example {

    Geometry [] shape = new Geometry [5];
    public draw() {
        shape[0] = new Circle();
        shape[1] = new Sphere();
        shape[0].draw(); // Will draw a circle.
        shape[1].draw(); // Will draw a sphere.
    }
} 
```

在这个例子中，函数 Geometry.draw() 是空的，但很可能你会想要放一些东西，甚至从子类中调用这个函数：

```
class Geometry {
    ...
    draw() { DoSomethingUseful(); }
}

class Circle extends Geometry {
    draw() {
       super.draw();
       // Remaining of the code to draw a circle here.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:00:14.757

你必须使用`Polymorphism`.

```
abstract class Geometry {

    private int edges[];
    private int vertices[];
    abstract void setdata();//Geometry class won't define this method, the classes deriving it must define it
    abstract void paintShape(Graphics graphics);//Geometry class won't define this method, the classes deriving it must define it  
}
class Circle extends Geometry
{
    public void paintShape(Graphics graphics)
    {
       //code to paint the circle
    }
    public void setdata()
    {
       //code to set the vertices and edges for a circle
    }
}
class Sphere extends Geometry
{
    public void paintShape(Graphics graphics)
    {
       //code to paint the sphere
    }
    public void setdata()
    {
       //code to set the vertices and edges for a sphere
    }
} 
```

我的评论几乎提供了您可能需要的所有解释。
当你想画这些时。

```
class Example {

    Geometry [] Shape = new Geometry [5];
    public draw(){
        Shape[0] = new Circle();
        Shape[1] = new Shape();
        Shape[0].setdata();
        Shape[1].setdata();

        //code to draw shape for Shape[i]
        Shape[0].draw(panel.getGraphics());
        Shape[1].draw(panel.getGraphics());
    }
} 
```

# python - 断言 `mock_calls` 等于预期调用列表

> ID：15049074
> 
> 赞同：3
> 
> 时间：2013-02-24T05:50:26.183
> 
> 标签：python, mocking

我正在尝试重新创建[mock_calls 示例](http://www.voidspace.org.uk/python/mock/mock.html#mock.Mock.mock_calls)，以便我可以检查预期的调用列表是否等于实际调用。但是，我收到一个`NameError`例外，因为`name 'call' is not defined`：

```
>>> from mock import MagicMock
>>> mock = MagicMock()
>>> result = mock(1, 2, 3)
>>> mock.first(a=3)
<MagicMock name='mock.first()' id='47645192'>
>>> mock.second()
<MagicMock name='mock.second()' id='47653440'>
>>> int(mock)
1
>>> result(1)
<MagicMock name='mock()()' id='47666064'>
>>> expected = [call(1, 2, 3), call.first(a=3), call.second(), call.__int__(), call()(1)]

Traceback (most recent call last):
  File "<pyshell#39>", line 1, in <module>
    expected = [call(1, 2, 3), call.first(a=3), call.second(), call.__int__(), call()(1)]
NameError: name 'call' is not defined 
```

我已经尝试将我的`expected`变量定义为字符串，但是这仍然不允许直接比较。

```
>>> expected = """[call(1, 2, 3), call.first(a=3), call.second(), call.__int__(), call()(1)]"""
>>> mock.mock_calls == expected
False
>>> mock.mock_calls
[call(1, 2, 3), call.first(a=3), call.second(), call.__int__(), call()(1)] 
```

关于如何让这个例子工作的任何想法？如果是这样，这是否与检查`mock_calls`具有预期调用列表的正确方法相同，并且顺序相同？

**编辑：**

这是`_CallList`类的源代码，它是`mock_calls`属性返回的对象的类型。

```
class _CallList(list):

    def __contains__(self, value):
        if not isinstance(value, list):
            return list.__contains__(self, value)
        len_value = len(value)
        len_self = len(self)
        if len_value > len_self:
            return False

        for i in range(0, len_self - len_value + 1):
            sub_list = self[i:i+len_value]
            if sub_list == value:
                return True
        return False

    def __repr__(self):
        return pprint.pformat(list(self)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T07:45:23.753

我没有使用过这个库，但是这个错误很常见。这基本上意味着您正在尝试使用某些属性而没有先定义它。由于`call`在模拟文档中引用了该属性，我的假设是它是由模拟库定义的（除了定义“MagicMock”），您需要将其导入程序才能使用。这很常见，库通常不能在单个属性中定义所有内容，您可能需要导入多个属性才能使其全部正常工作。

浏览mock文档，我发现它确实有一个[`call`](http://www.voidspace.org.uk/python/mock/helpers.html#call)方法。因此，您还需要将该`call`方法导入到您的脚本中。将第一行更改为...

```
from mock import MagicMock, call 
```

现在，您不仅要导入 MagicMock 属性，还要导入 call 属性。

# javascript - 通过传递函数参数来改变 Javascript 中 DIV 的不透明度？

> ID：15049081
> 
> 赞同：0
> 
> 时间：2013-02-24T05:51:36.003
> 
> 标签：javascript, html, opacity, function-parameter

我有以下代码，我想将两个 DIV 标签的不透明度更改为 0.5。我似乎无法让它像宽度和高度一样工作。我没有正确传递不透明度参数还是这`newdiv.style.opacity = opacity;`是不正确的部分？

```
<!DOCTYPE html>
<html>
<head>
</head> 
<script>
var my_div = null;
var newDiv = null; 
function creatediv(id, html, width, height, left, top, opacity) 
{ 
    var newdiv = document.createElement('div'); 
    newdiv.setAttribute('id', id);  

    newdiv.style.width =  width + "px";     
    newdiv.style.height = height + "px";     

    newdiv.style.position = "absolute";         
    newdiv.style.left = left + "px";         
    newdiv.style.top = top + "px";  

    newdiv.style.background = "#0CC"; 
    newdiv.style.border = "10px solid #000";    
    newdiv.style.opacity = opacity;
    newdiv.innerHTML = 'html n'; 
    document.body.appendChild(newdiv); 

    my_div = document.getElementById(id);
    document.body.insertBefore(newdiv, my_div);
}
</script> 
<body onload=" creatediv('xdiv1', 300, 300, 100, 100, .5);creatediv('xdiv2', 30, 30, 100, 100, .5)">
<div id='xdiv1'> </div>
<div id='xdiv2'> </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:03:28.513

您的调用中的参数数量错误。似乎不再使用 html 参数？尝试改变这个：

函数 creatediv(id, html, width, height, left, top, opacity)

对此：

函数 creatediv(id, width, height, left, top, opacity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T05:54:49.197

尝试使用其他标识符而不是不透明度。

“不透明度”是一个属性。我认为你不能有同名的标识符。

我不确定，但我认为这值得一试。

# java - Java：递归方法接受整数“n”并打印“n”个字符

> ID：15049082
> 
> 赞同：0
> 
> 时间：2013-02-24T05:51:40.757
> 
> 标签：java, recursion

**作业：寻找更好的策略或方法而不是完整的代码。**

当我试图确定这个问题的递归案例时，我完全糊涂了。我必须编写一个接受整数参数“n”的方法，然后打印出总共“n”个字符。中间字符应始终为 ' *' 或 '* *' 取决于原始整数是奇数还是偶数。下面是几个不同的方法调用和输出应该是这样的：

```
writeChars(1) -> *
writeChars(2) -> **
writeChars(3) -> <*>
writeChars(4) -> <**>
writeChars(5) -> <<*>>
writeChars(6) -> <<**>>
writeChars(7) -> <<<*>>>
writeChars(8) -> <<<**>>> 
```

我什至如何尝试识别递归案例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T05:57:16.340

你有两个基本情况：n == 1 和 n == 2。除此之外，递归规则是发出一个“<”，用 n-2 递归（考虑到你要在这个级别发出的两个字符)，然后发出一个“>”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T06:10:14.573

要识别递归，首先考虑如何解决给定 n 值的问题，假设您有一种方法可以解决较小情况的问题。尺寸 n 的解决方案与尺寸 n-1 的解决方案有何关系？

这样做之后，您会发现一个或多个您无法以这种方式解决的小案例。这些是你的基本情况。

最后，编写一个直接执行每个基本情况的方法。对于大于基本情况的 n，它调用自身为 n-1，然后修改该结果以获得大小为 n 的解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T06:24:40.113

我考虑递归的方式是传递两个状态（pos，string：s），它们在每个递归调用中都会发生变化，而三个状态（n，mid1，mid2）有助于决定如何实现下一个状态。

```
 public static void main(String... arg) {
        int n = 10, mid1, mid2;
        if (n % 2 == 0) {
            mid1 = n / 2;
            mid2 = n / 2 + 1;
        } else {
            mid1 = mid2 = n / 2 + 1;
        }

        System.out.println(recursion(1, n, mid1, mid2, ""));
    }

    private static String recursion(int pos, final int n, final int mid1, final int mid2, String s) {
        if (pos > n)
            return s;
        else if (pos == mid1 || pos == mid2)
            return recursion(pos + 1, n, mid1, mid2, s + "*");
        else if (pos < mid1)
            return recursion(pos + 1, n, mid1, mid2, s + "<");
        else
            return recursion(pos + 1, n, mid1, mid2, s + ">");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-22T01:24:29.297

我只假设两种基本情况，一种用于 n 为偶数时，一种用于 n 为奇数时。

现在在递归调用中我通过 n - 2; 在奇数 n 的情况下，它以 1 结尾，对于偶数 n，它以 2 结尾。

```
public static void writeChars(int n) {
    if(n < 1) 
        throw new IllegalArgumentException();

    if(n == 1)          //odd base case
        System.out.print("*");

    else if(n == 2)     //even base case
        System.out.print("**");

    else {              //recursive case
        System.out.print("<");
        writeChars(n - 2);
        System.out.print(">");
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T06:14:38.827

我可能会将问题分为 3 个部分 1\. 打印`<` 2\. 打印`*` 3\. 打印`>`

基于此，我们可以创建一个递归解决方案来打印每个组件。`<`和的数量`>`基于一个公式`i % 2 == 1 ? i / 2 : (i - 2) / 2`，然后我们可以编写一个函数以递归方式打印它们，然后再编写一个函数来打印`*`s。

```
public class SO15049082 {

    public static void main(String[] args) {
        for (int i = 0; i < 10; i++) {
            print(i);
        }
    }

    private static void print(int i) {
        if (i > 0) {
            System.out.print("writeChars(" + i + ") --> ");
            int c = i % 2 == 1 ? i / 2 : (i - 2) / 2;
            printleft(c);
            printstar(c % 2);
            printright(c);
        }
        System.out.println();
    }

    private static void printright(int i) {
        if (i > 0) {
            System.out.print(">");
            printright(i - 1);
        }
    }

    private static void printstar(int i) {
        if (i == 1) {
            System.out.print("*");
        } else {
            System.out.print("**");
        }
    }

    private static void printleft(int i) {
        if (i > 0) {
            System.out.print("<");
            printleft(i - 1);
        }
    }

} 
```

# android - 如何以通用方式为 RSS 阅读器设计应用程序

> ID：15049085
> 
> 赞同：0
> 
> 时间：2013-02-24T05:52:09.463
> 
> 标签：android, iphone, rss, rss-reader

我对 Pulse（android/iphone 应用）等 RSS 阅读器应用程序有疑问。在这种应用程序中，应用程序如何理解不同类型的 RSS 提要。来自不同来源的所有 RSS 信息是否具有相似的模式，如标题、来源 url、图像。我试图查看一些 RSS 信息，但我可以在一些但不是全部中找到图像标签.. 谁能告诉我我应该如何以通用方式为不同的提要设计应用程序，以便我的应用程序应该有标题、图像。如果我对 RSS 和应用程序的理解有误，请纠正。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:16:56.667

Pulse 与出版商有联系。所以（对于某些提要）它直接从它们那里获取图像。

RSS 图像标签通常是整个提要的图像。如果您想显示来自提要项目的图片，您可以查看附件、媒体：缩略图和媒体：内容标签。对于大多数提要，您需要从帖子内容中获取图像（寻找 <img> 标签、指向 youtube/vimeo 的链接等）。

# javascript - 如何将 Javascript 生成的文本包含到 HTML div 中并定义字体、大小等？

> ID：15049095
> 
> 赞同：0
> 
> 时间：2013-02-24T05:53:38.783
> 
> 标签：javascript, html, css

我正在制作一个关于某位英国政客的模仿页面，使用 Javascript 自动生成他的政策。

我已经让生成文本的 Javascript 在我的网站上正常工作。但是，我并没有设法让 Javascript 输出正确显示在 test.html 页面上的“语音气球”中（抱歉，如果发布 URL 违反了规则，我只是认为更容易说明什么我是说通过将人们指向实际页面）。

这里有几个问题：

1) 我正在使用 iframe 尝试将策略放入语音气球中。首先，我不确定如何制作 div 以便它始终处于相对于图片的正确位置。关于我需要的 CSS 代码的任何线索？还是完全放弃相对定位并使用绝对值会更好？

2) 更重要的是，如何让政策文本在气球内自动换行？它只需要在气球中的一个盒子内自动换行，我不需要任何花哨的东西，比如跟随气球的轮廓。

3）我如何给文本属性，如字体、大小等？

我搜索了类似的问题，但没有找到任何可以直接应用于我的特定项目的东西。

提前感谢您的帮助，这看起来是一个非常有用的网站。

更新：好的，伙计们，我显然在这里超出了我的深度，所以如果可能的话，一些关于实现这一目标的更简单方法的建议将不胜感激。

文本生成器的代码可以通过查看policies.html链接的源代码来查看。

我想要做的是让这个生成的文本出现在 test.html 页面上。但我只能让它以纯文本形式显示，没有任何格式，而且它也不包含在文本框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:03:43.980

使用 jQuery，您可能需要将图像切割成块以适合里面的文本。

```
<script type="text/javascript">
    function getRandomText()
    {
        var verbs=['Butcher','Punish','Impoverish','Annihilate','Dispossess','Humiliate','Denounce','Vilify','Torture','Execute','Shaft'];
        var victims=['single mothers','young people','the disabled','benefit scroungers','council tenants','council estate riff-raff','human rights lawyers','do-gooders','judges who say I am wrong','the poor'];
        var outcomes=['until they vote Tory','with a spoon','with a cattle prod','with a Taser','with a spoon','during a zombie apocalypse'];
        var endings=[' and then cut their benefits.',', then let Dementors suck out their lifeforce.',', then give bankers another bailout.',' and then make them work for nothing.','. I will pass emergency regulations to make it legal.',' and send their relatives to the workhouse.',', then let them eat cake.'];

        for(x=0;x<Math.round(Math.random()*10);x++){
            var _JuNk=Math.random();
        }

        return verbs[Math.round(Math.random()*(verbs.length-1))]+' '+victims[Math.round(Math.random()*(victims.length-1))]+' '+outcomes[Math.round(Math.random()*(outcomes.length-1))]+endings[Math.round(Math.random()*(endings.length-1))]+'\n';
    }

    $(document).ready(function() {
        $("#Refresh").click(function () {
            var randomText = getRandomText();
            $("#Result").html(randomText);
        })
    });
    </script>
</head>

<body>
    <div class="container">
        <div class="content">
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
                tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
                cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat
                non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
            </p>
            <button id="Refresh">More...</button>
            <div class="picture">
                <table class="table">
                    <tr>
                        <td>Top Left</td>
                        <td>Top Center</td>
                        <td>Rop RIght</td>
                    </tr>
                    <tr>
                        <td>Middle Left</td>
                        <td><div id="Result">Balloon Content</div></td>
                        <td>Middle Right</td>
                    </tr>
                    <tr>
                        <td>Bottom Left</td>
                        <td>Bottom Center</td>
                        <td>Bottom Right</td>
                    </tr>
                </table>
            </div>
    </div>
    <!-- end .content -->
    </div>
    <!-- end .container -->
    </div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:12:31.070

这可能与您的特定问题无关，但如果您想在 HTML 文档中使用 PHP，您会这样做。首先你有你的PHP脚本（在你的情况下是Javascript）然后在你的HTML文档中你会使用类似的东西

```
 <!--#include virtual="../quote.js" --> 
```

# android - Android MediaPlayer.reset() 正在调用 onCompletion

> ID：15049097
> 
> 赞同：11
> 
> 时间：2013-02-24T05:53:53.783
> 
> 标签：android, android-mediaplayer

我对以下代码有问题。我在 MediaController 上调用了 setPrevNextListener 并为 Prev 和 Next 定义了两个 onClickListener。当我单击下一个按钮而不是前进一首曲目时，我前进了两首曲目。这似乎是由于 onCompletion 以某种方式被调用的事实。MediaPlayer.reset() 是否调用 onCompletion？我已经包含了 logcat 输出和我的代码。如果我做错了什么，请告诉我。提前致谢。

日志猫：

```
02-24 00:36:34.826: D/MP(6675): Next Button Clicked, index was: 0
02-24 00:36:34.837: D/MP(6675): About to call Reset()
02-24 00:36:34.906: D/MP(6675): Inside setUpPlayer
02-24 00:36:34.917: D/MP(6675): Called setDataSource with index: 1
02-24 00:36:34.917: D/MP(6675): Leaving setUpPlayer
02-24 00:36:34.917: D/MP(6675): About to call prepareAsync()
02-24 00:36:34.937: D/MP(6675): Leaving next button
02-24 00:36:35.226: E/MediaPlayer(6675): Attempt to call getDuration without a valid mediaplayer
02-24 00:36:35.226: E/MediaPlayer(6675): error (-38, 0)
02-24 00:36:35.276: E/MediaPlayer(6675): Error (-38,0)
02-24 00:36:35.287: D/MP(6675): Inside onCompletion
02-24 00:36:35.337: D/MP(6675): About to call Reset()
02-24 00:36:35.347: D/MP(6675): Inside setUpPlayer
02-24 00:36:35.356: D/MP(6675): Called setDataSource with index: 2
02-24 00:36:35.356: D/MP(6675): Leaving setUpPlayer
02-24 00:36:35.356: D/MP(6675): About to call prepareAsync()
02-24 00:36:35.377: D/MP(6675): Leaving onCompletion
02-24 00:36:36.517: D/MP(6675): Inside onPrepared, index is: 2
02-24 00:36:36.577: D/MP(6675): Leaving onPrepared 
```

代码：

```
public class MusicPlayerActivity extends Activity implements OnPreparedListener, OnCompletionListener, MediaController.MediaPlayerControl {

    private MediaPlayer mp;
    private MediaController mc;
    private SonarDatabase db;
    private SubsonicAPIConnector sonic;
    ArrayList<String> songs;
    int index = 0;
    private Handler handler = new Handler();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.music_player);

        // Get params from intent
        Intent i = getIntent();
        String albumId = i.getStringExtra("albumId");
        String artistId = i.getStringExtra("artistId");
        String albumName = i.getStringExtra("albumName");
        String songName = i.getStringExtra("songName");
        String songId = i.getStringExtra("songId");
        String coverArt = "al-"+albumId+".jpeg";
        String duration = i.getStringExtra("duration");
        Log.d("MP", "results: albumName:" + albumName + ", songName: " + songName + ", songId: " 
                + songId + ", duration: " + duration + ", coverArt: " + coverArt + ", artistId: "
                + artistId + ", albumId: " + albumId);
        db = new SonarDatabase(getApplicationContext());
        sonic = new SubsonicAPIConnector(db.getURL(), db.getUsername(), db.getPassword());
        String artistName = db.getArtistNameById(artistId);
        setTitle("Now Playing");
        songs = db.getSongListForAlbum(albumId);
        index = songs.indexOf(songId); 
        Log.d("MP", "songid: " + songId + ", index: " + index);
        // Update text views with song information
        TextView txtArtist = (TextView) findViewById(R.id.txtArtistName);
        txtArtist.setText(artistName);
        TextView txtAlbum = (TextView) findViewById(R.id.txtAlbumName);
        txtAlbum.setText(albumName);
        TextView txtSong = (TextView) findViewById(R.id.txtSongName);
        txtSong.setText(songName);

        // Show the album art
        File img = new File(this.getFilesDir()+"/covers/"+coverArt);
        if(img.exists()) {
            Log.d("MP", "Found image at: " + img.toString());
            ImageView imgView = (ImageView) findViewById(R.id.cover_art);
            imgView.setImageBitmap(BitmapFactory.decodeFile(img.getPath()));
        } else {
            Log.d("MP", "Couldn't find image: " + img.toString());
        }

        // Create the media player and controller
        mp = new MediaPlayer();
        mp.setOnPreparedListener(this);
        mp.setOnCompletionListener(this);
        mc = new NonHidingMediaController(this);
        mc.setPrevNextListeners(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // next button clicked
                Log.d("MP", "Next Button Clicked, index was: " + index);
                playNextTrack();
                Log.d("MP", "Leaving next button");
            }
        }, new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // previous button clicked
                Log.d("MP", "Previous button clicked, index was: " + index);
                if(mp.isPlaying() && mp.getCurrentPosition() < 2000 && index != 0) {
                    Log.d("MP", "Start the prior song.");
                    playPreviousTrack();
                } else {
                    Log.d("MP", "Restart this song.");
                    restartCurrentTrack();
                }   
                Log.d("MP", "Leaving previous button");
            }
        });
        mc.setMediaPlayer(this);
        setUpPlayer();
        Log.d("MP", "About to call prepareAsync()");
        mp.prepareAsync();
    }

    @Override
    public void onCompletion(MediaPlayer mp) {
        Log.d("MP", "Inside onCompletion");
        //TODO add code for scrobbling here.
        playNextTrack();
        Log.d("MP", "Leaving onCompletion");
    }

    private void playNextTrack() {
        index++;
        TextView txtSong = (TextView) findViewById(R.id.txtSongName);
        txtSong.setText(db.getSongNameById(songs.get(index)));
        Log.d("MP", "About to call Reset()");
        mp.reset();
        setUpPlayer();
        Log.d("MP", "About to call prepareAsync()");
        mp.prepareAsync();
    }

    private void playPreviousTrack() {
        index--;
        TextView txtSong = (TextView) findViewById(R.id.txtSongName);
        txtSong.setText(db.getSongNameById(songs.get(index)));
        Log.d("MP", "About to call Reset()");
        mp.reset();
        setUpPlayer();
        Log.d("MP", "About to call prepareAsync()");
        mp.prepareAsync();

    }

    private void restartCurrentTrack() {
        mp.seekTo(0);
    }

    public void onPrepared(MediaPlayer mp) {
        Log.d("MP", "Inside onPrepared, index is: " + index);
        mc.setMediaPlayer(this);
        mc.setAnchorView(findViewById(R.id.music_player_view));
        mp.start();
        handler.post(new Runnable() {
            public void run() {
                mc.setEnabled(true);
                mc.show();
            }
        });
        Log.d("MP", "Leaving onPrepared");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_music_player, menu);
        return true;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        Log.d("MP", "OnTouchEvent called");
        mc.show();
        return false;
    }

    private void setUpPlayer() {
        Log.d("MP", "Inside setUpPlayer");
        mp.setAudioStreamType(AudioManager.STREAM_MUSIC);
        try {
            mp.setDataSource(sonic.streamString("&id=" + songs.get(index)));
            Log.d("MP", "Called setDataSource with index: " + index);
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.d("MP", "Leaving setUpPlayer");
    }

    @Override
    protected void onStop() {
        super.onStop();
        mc.hide();
        mp.stop();
        mp.release();
    }

    public void start() {
        mp.start();
    }

    public void pause() {
        mp.pause();
    }

    public int getDuration() {
        return mp.getDuration();
    }

    public int getCurrentPosition() {
        return mp.getCurrentPosition();
    }

    public void seekTo(int i) {
        mp.seekTo(i);
    }

    public boolean isPlaying() {
        return mp.isPlaying();
    }

    public int getBufferPercentage() {
        return 0;
    }

    public boolean canPause() {
        return true;
    }

    public boolean canSeekBackward() {
        return true;
    }

    public boolean canSeekForward() {
        return true;
    }

    public class NonHidingMediaController extends MediaController {
        public NonHidingMediaController(Context context, AttributeSet attrs) {
            super(context, attrs);
        }

        public NonHidingMediaController(Context context, boolean useFastForward) {
            super(context, useFastForward);
        }

        public NonHidingMediaController(Context context) {
            super(context);
        }

        @Override
        public void show(int timeout) {
            super.show(0);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-11T18:16:33.253

我对 android 源代码做了一些挖掘，发现任何未处理的错误都会导致 MediaPlayer 调用 onCompletion 处理程序。在这种情况下，您似乎在空闲、初始化或错误状态下调用 getDuration。可能从媒体控制器内部。我建议在任何调用 getDuration 的地方之前添加一些 Log.d() 以查看导致问题的调用在哪里。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-07-20T07:02:01.823

添加 MediaPlayer.OnErrorLisener 并从覆盖的方法返回 true

```
mediaPlayer.setOnErrorListener(new MediaPlayer.OnErrorListener() {
                    @Override
                    public boolean onError(MediaPlayer mp, int what, int extra) {
                        return true;
                    }
                }); 
```

# security - 管理员帐户的安全性如何

> ID：15049104
> 
> 赞同：1
> 
> 时间：2013-02-24T05:54:55.240
> 
> 标签：security

我正在开发一个项目，其管理员可以访问所有表单控件，但其他人不能。我怎样才能实现这个？

一个想法是，当用户想要使用管理员登录时，在登录软件之前必须检查互联网服务是否可用，如果互联网服务可用，然后邮寄必须从谷歌服务器选择的时间，并用登录信息邮寄该时间。因此管理员必须提醒有人使用您的帐户登录。

但是，如果那里没有可用的互联网服务，则将该信息保存在一个文本文件中，该文件必须放在系统中，当服务可用时，管理员只需获取该日志文件并询问用户谁使用管理员登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:15:44.647

我认为如果您在应用程序中使用日志记录并将其配置为在访问包含敏感信息的页面时执行您想要的任何操作，那会更好。您可以使用[log4net](http://logging.apache.org/log4net/release/config-examples.html)、[Microsoft Enterprise Library Logging Application Block](http://msdn.microsoft.com/en-au/library/ff647183.aspx)或[ELMAH](http://code.google.com/p/elmah/)。这样，您可以将信息存储在文本或 Xml 文件、数据库、发送电子邮件等中。

`C#`使用示例`log4net`：

```
private static log4net.ILog oLog = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

[HttpPost]
public ActionResult Login(LoginModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
            {
                if (this.User.IsInRole("Administrators"))
                {
                    oLog.Info("Administrator logged in.");
                }
                return Redirect(returnUrl);
            }
            else
            {
                return RedirectToAction("Index", "Home");
            }
        }
        else
        {
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

# three.js - THREE.js 自定义着色器不能正确抗锯齿

> ID：15049112
> 
> 赞同：5
> 
> 时间：2013-02-24T05:56:45.730
> 
> 标签：three.js, webgl

即使我`{ antialias: true }`在初始化渲染器时启用，线条也不会被多重采样，并且仍然看起来有锐利的边缘。我已经通过 JSFiddle 上的问题重新创建了，您可以[在此处](http://jsfiddle.net/rP5RW/)查看。

我怀疑问题的发生是因为线条是由片段着色器生成的，而不是几何本身的一部分。如果是这种情况，我能做些什么让它按我想要的方式工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:38:07.537

这个[页面可能会有所帮助](http://codeflow.org/entries/2013/feb/22/how-to-write-portable-webgl/#antialiasing)。WebGL 中的抗锯齿一开始就不是很好。我最终在 THREE.js 中使用了 FXAA 以获得更好的场景质量。

# c# - 用于在数据库中存储加密密钥的数据库类型

> ID：15049113
> 
> 赞同：0
> 
> 时间：2013-02-24T05:57:13.250
> 
> 标签：c#, database, rsa

我正在使用 RSACryptoServiceProvider 加密对称密钥。我为 RSA 对象使用 1024 位，但我不确定应该使用什么数据类型将加密密钥存储在我的数据库中。

二进制（128）是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T07:05:36.043

如果您需要特定产品的建议，我们需要知道您使用的是哪个数据库供应商。

但是，由于您使用 RSA 密钥进行加密，因此很容易预测您将存储的数据量。正如您所建议的，1024 位密钥将产生 128 字节的加密数据。例如，这应该存储为二进制类型，以避免因转换为不适当的字符集而丢失任何数据。

简而言之，“binary(128)”看起来可能是正确的，假设它是您的数据库供应商的有效数据类型。

# android - 在 json 字符串中获取所有带有名称和 id 的 facebook 好友列表

> ID：15049117
> 
> 赞同：0
> 
> 时间：2013-02-24T05:57:24.263
> 
> 标签：android, json, facebook

目前我正在像这样登录facebook。我需要属于该登录用户的好友列表。我怎么做？

```
Session.openActiveSession(this, true, new  Session.StatusCallback() {
        public void call(Session session, SessionState state, Exception exception) {
            if(session.isOpened()){
                // make request to the /me API
                Request.executeMeRequestAsync(session, new Request.GraphUserCallback(){
                    public void onCompleted(GraphUser user, Response response) {
                           if(user != null){
                            fb_login_button.setText("Login as "+user.getFirstName());
 }
                        else{

                        }
                    }                   

                });
            }           
        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:16:28.507

查看[Request.newMyFriendsRequest](https://developers.facebook.com/docs/reference/android/3.0/Request#newMyFriendsRequest%28Session,%20GraphUserListCallback%29)方法。

# android - 为什么在我的游戏中使用更大的位图会导致更多的内存？

> ID：15049118
> 
> 赞同：0
> 
> 时间：2013-02-24T05:57:29.960
> 
> 标签：android, memory-management

我的游戏的初始堆是12 Mb。现在加载大小为1280 * 800的位图后堆大小已增加到22 Mb。我的游戏还没有完成。只是一些基本设置。恐怕内存会达到很大程度这边走。我昨天也在玩一些游戏，它也使用了很多相同大小的差异图像，但它的大小只有 20 Mb。这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T05:58:59.817

为什么使用更大的位图需要更多的内存？因为*更大的位图更大*。还有更多数据要存储。

你已经达到了重言式的地步......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T06:04:28.470

您需要使用精灵表来降低内存使用量。

[什么是精灵表？](http://www.codeandweb.com/what-is-a-sprite-sheet)

# php - 数组缺少第一条记录

> ID：15049120
> 
> 赞同：0
> 
> 时间：2013-02-24T05:58:11.253
> 
> 标签：php, mysql, arrays, zip

以下脚本从我的数据库中获取图像文件并创建一个 zip 文件。由于某种原因，它错过了查询的第一个文件， print_r 在那里向我展示了它正在压缩的内容，并且每次 [0]=>myfile.jpg 实际上是第二个文件而不是第一个文件。

有谁知道为什么？

```
//create an empty array
$file_names = array();
//fetch the names from database
while ($row_rsParentGal = mysql_fetch_assoc($rsParentGal))
{
//Add the values to the array
  $file_names[] = $row_rsParentGal['filename'];
}

print_r ($file_names);

// instantate object
$zip = new ZipArchive();

// create and open the archive 
if ($zip->open("$zipfilename", ZipArchive::CREATE) !== TRUE) {
die ("Could not open archive");
}

// add each file in the file list to the archive
foreach($file_names as $files)
{
    $zip->addFile($sourcefolder.$files, $files);
    // uncomment to show list of files added to archive on results page
    echo $sourcefolder.$files."<br />";
}

$zip->close(); 
```

# php - 使用 PHP 和 javascript 的 SQL 循环？

> ID：15049124
> 
> 赞同：0
> 
> 时间：2013-02-24T05:59:05.380
> 
> 标签：php, javascript, sql, loops

因此，我试图通过获取 div id 的 innerHTML 并将其更改为上述值来根据存储在 SQL 数据库中的视频 id 显示 youtube 视频的标题和缩略图。只是它不这样做。这是我的代码：

```
<title>Web Editor</title>
<script>
    var vidtitle = new Array();
    var vidthumb = new Array();
    window.onload=function(){
    }
</script>
<?php
    mysql_connect("$host","$username","$pass");
    mysql_select_db("$db");
    $vidid;
    $result=mysql_query("SELECT * FROM ids");
    while($row=mysql_fetch_array($result))
    {
        $recid=$row['id'];
?>
<div id='video<?php echo $recid; ?>'>Loading..</div>
<script>
    document.getElementById("video<?php echo $recid; ?>").innerHTML=<?php echo $recid; ?>;
    var s<?php echo $recid; ?> = '';
    var k<?php echo $recid; ?> = '';
    var d <?php echo $recid; ?>='';
    function youtubeFeedCallback(data) {
        s<?php echo $recid; ?> = data.entry.title.$t;
        k<?php echo $recid; ?> = data.entry.media$group.media$thumbnail[2].url;
        d<?php echo $recid; ?> = data.entry.media$group.media$description.$t.replace();
        vidtitle[1]=s<?php echo $recid; ?>
        vidthumb[1]=k<?php echo $recid; ?>
    }
</script>
<script type='text/javascript' src='http://gdata.youtube.com/feeds/api/videos/<?php echo $recid; ?>?v=2&amp;alt=json-in-script&amp;callback=youtubeFeedCallback' >
</script>
<?php
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:04:56.897

为什么要将javascript函数放在循环函数中。要创建缩略图，您可以尝试这样的事情

```
<img src="http://img.youtube.com/vi/<insert-youtube-video-id-here>/0.jpg" /> 
```

[如何从 YouTube API 获取 YouTube 视频缩略图？](https://stackoverflow.com/questions/2068344/how-to-get-thumbnail-of-youtube-video-link-using-youtube-api)

# javascript - for循环内的jquery'click'事件

> ID：15049131
> 
> 赞同：-1
> 
> 时间：2013-02-24T06:02:02.090
> 
> 标签：javascript

我是 JavaScript 新手。我想在javascript中执行分页之类的任务。这是我的代码。

```
for(var i=1;i<=total_guest;i++)
{   
$("#Personal"+i).find("#Personal_details ").show();
$('#Personal'+i).find('.personal_info').click(function(e){
    alert(i);
        e.preventDefault();
        $("#Personal"+i).find("#Personal_details ").hide();

    }); 
} 
```

解释：

在循环中，我得到了 total_guest 值（示例 5）。开始时，我想获取第一位客人的页面。当我单击下一个按钮（class ='personal_info'）时，我应该明智地显示下一位客人的页面，直到第五位客人。

任何人都可以给出解决方案吗？

**编辑以包含 HTML：**

```
<div id='Personal1' > 
    <div id='Personal_details'> 
        <div class='personal_info'>button for next step</div> 
    </div> 
</div> 
<div id='Personal2' > 
    <div id='Personal_details'> 
        <div class='personal_info'>button for next step</div> 
    </div> 
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:12:50.823

为了让你的循环工作，你需要一个闭包来保持`i`click 函数内的常量值，但这一切似乎都是不必要的，你可以这样做：

```
$(".Personal_details").show().on('click', function(){
    $(this).hide();
}); 
```

请注意，ID 是唯一的，并且`.find(someID)`没有意义，因为该 ID 只能有一个元素。

**编辑：**基于新的 HTML，这是一个错误！您***不能***两次（或更多）拥有相同的 ID。

```
<div id='Personal1' > 
    <div class='Personal_details'> 
        <div class='personal_info'>button for next step</div> 
    </div> 
</div> 
<div id='Personal2' > 
    <div class='Personal_details'> 
        <div class='personal_info'>button for next step</div> 
    </div> 
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:30:45.510

`id="Personal1" to class="personal"` 试试这个，然后将 id 更改为 class

```
$('document').ready(function() {

    $('.personal').click(function() {
           $(this).children('.personal-details').show();
    });

    $('.personal_info').click(function() {
           $(this).parent().hide();
           $(this).parent().parent().next().children('.personal-details').show();
    });
}); 
```

# python - 使用 Pyfoobar 将歌曲长度更改为数字

> ID：15049132
> 
> 赞同：1
> 
> 时间：2013-02-24T06:02:03.773
> 
> 标签：python

在尝试使用[pyfoobar](https://code.google.com/p/pyfoobar/)为 foobar 制作正在播放的脚本时，我一直在尝试将当前曲目的长度（字符串）转换为常规整数。

```
from pyfoobar import foobar
import time

fb2k = foobar()
while(fb2k.isPlaying()==True):
    fb2k.playRandom()
    length=fb2k.lengthOfTrack()
    minute=int(length[0])*60
    second=int(length[2:])
    length=(minute+second)-1
    print "Now Playing: "+fb2k.getCurrentArtist()+" - "+fb2k.getCurrentTrack()
    time.sleep(length) 
```

为了更新每个新曲目，我使用了一个按当前曲目中的秒数延迟的循环。编译时，我收到以下错误：

```
Traceback (most recent call last):
  File "C:\Users\000\Downloads\pyfoobar\pyfoobar\playing.py", line 8, in <module>
    minute=int(length[0])*60
IndexError: string index out of range 
```

我可能缺少一些明显的东西，但我找不到修复错误的方法，特别是因为计算长度的行将返回正确的秒数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:31:58.520

你确定`playRandom`是同步的？`isPlaying`您在调用之前进行了测试`lengthOfTrack`，但可能在调用之后`playRandom`（以及在它完成执行之前）`isPlaying`是假的，所以`lengthOfTrack`会返回一些未定义的东西。我没有使用 COM 的经验，所以也许我在说一些愚蠢的话，但我会尝试的第一件事是`isPlaying`在循环内再次重新检查。

# mysql - MySql 仅选择来自不同线程的最新消息，按时间戳排序 - 类似于 Facebooks（2013 年）的私人消息收件箱

> ID：15049133
> 
> 赞同：1
> 
> 时间：2013-02-24T06:02:06.967
> 
> 标签：mysql, distinct, max, private-messaging

试图重新创建一个类似于 Facebook 近来设置的私人消息系统。我遇到问题的部分是仅选择来自不同线程的最新消息，按时间戳排序。

这是迄今为止我能想到的最接近的查询。问题是收件箱应该只为每个线程返回一行，目前我的查询从同一个线程返回多行：

```
SELECT m.created_on, m.thread_id, m.message_id, m.created_by, m.body, u.first_name, u.last_name, u.thumb_img

FROM pms_messages AS m, pms_recips AS r, users AS u

WHERE r.uid =19

AND r.status

IN ('A', 'N'
)

AND r.thread_id = m.thread_id

AND (SELECT max(r.message_id)) = m.message_id 

AND m.created_by = u.uid

ORDER BY created_on DESC 
```

这是我当前数据库设置的 img，如果它可以简化我的查询并完成工作，我愿意对我的表进行更改。再往下是对我的表格/收件箱规格的更详细说明。

![在此处输入图像描述](../Images/25d0b5be05b86243e22b69361ac69348.png)

更具体：

*任何两个用户之间的消息都发生在一个正在进行的线程上。任何 2 个用户之间的所有消息只是一个正在进行的对话（线程）的延续即使两个用户都删除了彼此之间的所有先前消息，任何未来的消息仍然会出现在同一个线程上。

*单个消息由 message_id 跟踪。

*每个线程在任何给定时间仅在收件箱中显示一次，并将显示该线程的最新消息。

*接收和发送的邮件将显示在同一个收件箱中，而不是收件箱和发件箱。

因此，如果我的用户 A 和我有一条消息我还没有从用户 B-20 分钟前阅读，我回复了用户 C 昨天 - 10 分钟前发送给我的一条消息，而来自用户 D 的另一条消息 - 2 分钟前我的收件箱应该看起来像这样：

带有用户 D 的线程 - 显示用户 D 发送给我的消息。

* * *

带有用户 C 的线程 - 显示我发送给用户 C 的消息

* * *

与用户 B 的线程 - 显示用户 B 发送给我的消息

* * *

*正在显示的线程将按从最近到最旧的顺序排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:06:19.280

`JOIN`带有以下内容的表格`pms_messages`：

```
SELECT thread_id, MAX(Created_ON) AS NewestDate
FROM messages 
GROUP BY thread_id 
```

然后它将删除所有消息，但最新消息具有`MAX(Created_ON)`. 像这样：

```
SELECT 
  m.created_on, 
  m.thread_id, 
  m.message_id, 
  m.created_by, 
  m.body, 
  u.first_name, 
  u.last_name, 
  u.thumb_img
FROM pms_messages AS m
INNER JOIN
(
   SELECT thread_id, MAX(Created_ON) AS NewestDate
   FROM messages 
   GROUP BY thread_id
) AS m2  ON m.created_on = m2.Newestdate
        AND m.thread_id  = m2.thread_id
INNER JOIN pms_recips AS r ON r.thread_id  = m.thread_id
INNER JOIN users      AS u ON m.created_by = u.uid
WHERE r.uid =19
  AND r.status IN ('A', 'N')
ORDER BY created_on DESC; 
```

* * *

## 更新 1

添加`r.message_id = m.message_id`到`JOIN`两个表之间的条件`pms_messages`，`pms_recips`。像这样：

```
SELECT 
  m.created_on, 
  m.thread_id, 
  m.message_id, 
  m.created_by, 
  m.body, 
  u.first_name, 
  u.last_name, 
  u.thumb_img
FROM pms_messages AS m
INNER JOIN
(
   SELECT thread_id, MAX(Created_ON) AS NewestDate
   FROM pms_messages
   GROUP BY thread_id
) AS m2  ON m.created_on = m2.Newestdate
        AND m.thread_id  = m2.thread_id
INNER JOIN pms_recips AS r  ON r.thread_id  = m.thread_id 
                           AND r.message_id = m.message_id
INNER JOIN users      AS u  ON m.created_by = u.uid
WHERE r.uid =19
  AND r.status IN ('A', 'N')
ORDER BY created_on DESC; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/959c4/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-11T14:41:46.580

```
 SELECT * FROM 
        (SELECT * FROM messages ORDER BY created_at DESC) messages
    GROUP BY IF(from_user_id < to_user_id, CONCAT_WS('_', from_user_id, to_user_id), CONCAT_WS('_', to_user_id, from_user_id)); 
```

# mongodb - 寻找从 mongodb 到 tableau 的中间件

> ID：15049134
> 
> 赞同：3
> 
> 时间：2013-02-24T06:02:35.593
> 
> 标签：mongodb, ssis, tableau-api

目前，我正试图让 mongodb 通过 SSIS 和 Microsoft SQL Server 2012 进入画面，主要问题是 mongodb 当然是一个面向文档的数据库，而 Microsoft SQL 有这个问题，因为它是一个关系数据库类型程序。

是否有任何程序可以用作 tableau 读取的中间件，它将面向文档的数据库转换为 tableau 可以理解的关系数据类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T18:47:09.223

Apache Drill 可能对您有用。它提供了一种开箱即用的方式来探索多种格式的数据，包括 Parquet、JSON、Hive。基本上，一个大数据 ODBC 连接器可以在没有可用模式的情况下动态发现模式。因此，即使您的数据具有一些嵌套结构，您也可以直接探索分析数据而无需进行大型摄取项目。适用于集群或独立。

这是一个简短的视频介绍，另一个展示了如何将它与 Tableau 一起使用。 [http://drill.apache.org/overview/](http://drill.apache.org/overview/)

10 分钟开始示例。 [https://cwiki.apache.org/confluence/display/DRILL/Apache+Drill+in+10+Minutes#ApacheDrillin10Minutes-StartDrill](https://cwiki.apache.org/confluence/display/DRILL/Apache+Drill+in+10+Minutes#ApacheDrillin10Minutes-StartDrill)

Tableau 还有一个数据提取 API，允许您从您喜欢的任何外部数据源创建数据提取（静态快照）。该 API 适用于 Java、C/C++、C# 和 Python。请参阅[http://www.tableausoftware.com/data-extract-api](http://www.tableausoftware.com/data-extract-api)或在其网站的支持下搜索 Tableau 知识库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T16:50:35.523

浏览 Tableau 社区论坛发现了一些可能感兴趣的事情。

1.  [Simba 的带有 SQL 连接器的 MongoDB ODBC 驱动程序](http://www.simba.com/MongoDB-ODBC-Driver-SQL-Connector.htm)
2.  [MongoDB 支持的社区创意页面](http://community.tableausoftware.com/ideas/1426)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-26T04:02:11.367

这是一个可靠的 ODBC 驱动程序，它还通过将嵌套的 MongoDB 数据模型作为一组关系表公开给 Tableau 和其他 ODBC 应用程序来帮助维护 mongoDB 数据的保真度：

[http://www.progress.com/products/datadirect-connect/odbc-drivers/data-sources/mongodb](http://www.progress.com/products/datadirect-connect/odbc-drivers/data-sources/mongodb)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-02T17:36:02.377

MongoDB 刚刚宣布了 Tableau 的连接器：http: [//techcrunch.com/2015/06/02/new-mongodb-connector-creates-direct-connection-to-data-visualization-tools/](http://techcrunch.com/2015/06/02/new-mongodb-connector-creates-direct-connection-to-data-visualization-tools/)，但我找不到任何详细信息在他们的网站上。

# python - 原始套接字编程 UDP Python

> ID：15049143
> 
> 赞同：1
> 
> 时间：2013-02-24T06:04:40.337
> 
> 标签：python, sockets, network-programming, udp

如何以 SOCK_RAW 格式在 python 中添加 IP 和 UDP 标头等自定义字段？我想在数据包中有一个自定义字段并在计算中使用该字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-03T09:54:40.023

您没有指定该自定义字段的位置。此示例允许您随意构建 UDP 标头（至少在 Linux 上 - 可能存在依赖于操作系统的行为）：

```
from socket import *
import struct
s = socket(AF_INET, SOCK_RAW, IPPROTO_UDP)
data = 'string'
sport = 4711    # arbitrary source port
dport = 45134   # arbitrary destination port
length = 8+len(data);
checksum = 0
udp_header = struct.pack('!HHHH', sport, dport, length, checksum)
s.sendto(udp_header+data, ('', 0)); 
```

经测试：

```
# socat -u UDP:localhost:4711 - &
# netstat -up
活跃的互联网连接（无服务器）
Proto Recv-Q Send-Q 本地地址 外部地址 状态 PID/程序名称
udp 0 0 本地主机：45134 本地主机：4711 已建立 2663/socat      
# tcpdump -ilo -vv -x
11:32:07.409163 IP (tos 0x0, ttl 64, id 0, offset 0, flags [DF], proto UDP (17), length 34)
localhost.4711 > localhost.45134：[无 cksum] UDP，长度 6
    0x0000: 4500 0022 0000 4000 4011 3cc9 7f00 0001
    0x0010: 7f00 0001 1267 b04e 000e 0000 7374 7269
    0x0020: 6e67

```

# regex - 如何在一个字符串中搜索多个 RTL 词？

> ID：15049148
> 
> 赞同：0
> 
> 时间：2013-02-24T06:05:59.853
> 
> 标签：regex, search, right-to-left

如何在阿拉伯语文本中搜索和查找三个单词，而这些单词的顺序并不重要？这三个词都必须存在于句子中，没有特定的顺序。[我在 Win 7 Pro 上使用 RegexBuddy。一个文件夹中有数千个文本文件。]

这里假设一个文本：

```
ما أهدى مسلم لأخيه هدية أفضل من كلمة حكمة يزيده الله بها هدى أو يرده بها عن أذى 
```

我想搜索单词`كلمة` **and** `أفضل` **和** `أذى` 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T18:49:59.300

如果我正确理解了您的问题，那么您可以像搜索任何其他语言的单词一样搜索它们。阿拉伯语从右到左书写不会影响正则表达式查找。

# ios - 为什么 XCode 给我错误“重新实现类”？

> ID：15049150
> 
> 赞同：2
> 
> 时间：2013-02-24T06:06:12.807
> 
> 标签：ios, xcode

XCode 给了我一个非常无益的错误，即不允许重新实现一个类。我搜索了又搜索，没有其他地方实现了该类名——被引用，但没有实现。

实际上，我进行了关键字搜索，并浏览了引用该类的项目的每一行，但没有找到任何试图实现它的东西。（而且，令人讨厌的是，网上没有任何东西可以帮助解决这个特定的错误——因此我为什么要包括自我回答，以帮助发生这种情况的下一个人）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-24T06:06:12.807

正如我最终发现的那样，关键在于格式错误的包含。我在使用自动完成时按错了按钮，另一个类包含 .m 文件而不是 .h 文件——结果实际上我实现了同一个类两次。不是因为我在两个地方都这样做，而是因为我实际上试图编译同一个文件两次！

# java - Java：在Driver类中捕获Worker类抛出的异常

> ID：15049153
> 
> 赞同：1
> 
> 时间：2013-02-24T06:06:21.897
> 
> 标签：java, exception-handling

我正在做家庭作业（Hangman）。它已经完成了，但是我需要添加一个异常并且遇到了困难。明天就要到期了，我还没有收到我导师的消息，所以我想我会在继续等待的同时在这里发帖。作业需要这样：

> *public boolean guessCharacter(char guess) throws Exception* - 此方法返回给定字符是否是关键短语的一部分。如果猜测的字符有效，则此方法应返回 true，否则返回 false。如果之前已经猜到了猜测，则应该抛出异常（这可以通过调用此方法的代码来处理）。

我假设我需要在工作类方法中抛出异常并在调用该方法的工作类中处理它。我搜索了SO并发现了这个：

> 在您的 GUI 中保留对您的工作人员的引用，并在您的工作中添加一个 try catch。在 catch 中将异常分配给一个变量并为其添加一个 getter。在您的 GUI 中，当您的工作人员完成后，只需检查工作人员中是否存在异常。

这看起来像是我需要做的，但我不确定如何实现它。我想要一个代码示例。这是我到目前为止所拥有的（*guessedLetters*是一个集合）：

```
public boolean guessCharacter(char guess) throws Exception
{   
    // Reset index
    if (index == keyPhrase.length())
        index = 0;

    // Determine if guessed letter is part of word
    if (guess == keyPhrase.charAt(index))
    {
        isValid = true;
        boardArray[index] = guess;  // If it is, place it correctly in array
        try {
            // SOME TYPE a = guessedLetters.add(Character.toString(guess));
        } catch (Exception e) {
        //  a = not sure what to do here;
        }
    } else
        isValid = false;

    index++;

    return isValid;
} 
```

需要注意的是，我根据单词的长度多次调用此方法，以检查用户对单词中每个字母的猜测。我敢肯定有一种更优雅的方式，我只是还没有想出一个。我也不确定对驱动程序类中的布尔结果有什么用处。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T06:10:35.580

您不应该在尝试的地方捕获异常，而应该抛出异常。

由于这是家庭作业，因此这是指导而不是实际代码：

首先，检查这组字母是否已经猜到。如果它已经存在于集合中，则抛出异常 ( `throw new Exception("That letter has already been guessed!"`)。否则，将字母添加到集合中，然后照常继续。

正如您的作业所述，此异常将“由调用此方法的代码处理”。您在演示的方法中负责的`guessCharacter`只是在需要时抛出适当的异常（由于重复猜测）。

# jquery - 复选框形式在rails中给出列表，如何使用jquery函数遍历控制器中的列表？

> ID：15049158
> 
> 赞同：0
> 
> 时间：2013-02-24T06:08:00.060
> 
> 标签：jquery, ruby-on-rails

我有一个带有复选框的表单，用于收集用户的 facebook id。我想使用这些 id 向他们发送应用请求。

提交我的表单后，它会生成一个 facebook id 列表并运行一个方法`sendrequest`。

这是我在视图 home.html.erb 中的表单

```
 <%= form_tag sendrequest_path do%>
        <%=check_box_tag "friendids[]", 12345 %>
        <%=check_box_tag "friendids[]", 67890 %>
        <%=submit_tag "send requests"%>
    <% end %> 
```

我想以某种方式在`sendrequest`提交表单时运行以下 javascript。但是需要注意的是它必须遍历friendsid[] 列表。

```
 <script>
  FB.init({
    appId  : 'YOUR_APP_ID',
    frictionlessRequests: true
  });

  function sendRequestToRecipients() {
    var user_ids = document.getElementsByName("user_ids")[0].value;
    FB.ui({method: 'apprequests',
      message: 'My Great Request',
      to: 
```

具体来说，它应该遍历 params[:friendids]。Facebook 允许多个请求，只要它是逗号分隔的，所以 `to: "12345,67890"`在这个例子中可以工作。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:36:40.933

如果您使用的是 jquery，那么您可以执行以下操作：

首先，我们为表单分配一个id

```
<%= form_tag sendrequest_path, id: 'send-request-form' do %> 
```

然后我们观察该表单的提交事件并获得所有选中复选框的列表。然后

```
$('#send-request-form').submit(function() {
  var friendIds = $(this).find(':checkbox:checked').map(function() { return this.value })
  // then you can use friendIds.join(',') as the comma separated list of friend ids
  sendRequestToRecipients(friendIds.joins(',')) 
});

function sendRequestToRecipients(ids) {
   // use ids in this function
} 
```

# c# - 从一种形式传递到另一种形式的值作为空值

> ID：15049160
> 
> 赞同：0
> 
> 时间：2013-02-24T06:08:52.307
> 
> 标签：c#, winforms

在我的 Windows 窗体应用程序中，我试图将其中一个值传递给另一个窗体，但是当代码到达另一个窗体时，当我使用断点时，该值显示为 null。

在 Form1 中，我有一种方法可以生成 OrderNumber，Form1 本身和 Form2 都在使用这个订单号。如果我从 Form2 调用 Form1.OrderNumber，它将生成不同的订单号。我希望两个表格都应该有相同的订单号。

所以在 Form1 我将全局变量声明为

```
public string ord; 
```

现在，这个“ord”变量从 Form1 中的以下方法获取其值。

```
 public string orderNumber()
            {
                string ord = "ORD" + DateTime.Now.Year + get_next_id();
               return ord;
} 
```

其中 get_next_id 是另一种根据数据库中的前一个数字生成数字的方法。

现在，当我在下面的代码中使用“ord”变量值时，form1 本身的值是 null。

```
InsertUser(maskedTextBox1.Text, comboBox1.Text, maskedTextBox2.Text, maskedTextBox3.Text, maskedTextBox4.Text, maskedTextBox5.Text,
                       maskedTextBox6.Text, maskedTextBox7.Text, maskedTextBox8.Text, maskedTextBox9.Text, listItems, DateTime.Now, maskedTextBox10.Text, ord, get_next_id());

   } 
```

form2 也是如此。

我不确定我错在哪里。我之前也发布了这个问题，但没有收到任何有用的答案。任何帮助请..

要将“ord”的值传递给 form2，我在表单 1 中调用此代码。

```
 SaveAllListItems();
                        //this.Close();
                        PrintOrder m = new PrintOrder(ord);
                        m.Show(); 
```

其中 PrintOrder 是 form2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:11:08.627

> 现在这个“ord”变量从 Form1 中的以下方法获取它的值。

它不是，**你在方法中再次定义了一个局部变量，**你没有在你的方法中设置类级别的变量。

```
public string orderNumber()
{
   string ord = "ORD" + DateTime.Now.Year + get_next_id();
   ^^^^^^^^^^
   //indicating a local variable, not class level
   return ord;
} 
```

应该：

```
public string orderNumber()
{
   ord = "ORD" + DateTime.Now.Year + get_next_id();
   return ord;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T06:25:33.827

```
public static string ord; 
```

Simple 使用了 static 关键字。静态关键字的优势。

1.  在整个应用程序中共享内存。
2.  如果任何用户更新该值，则该值将获得类似的更新值，一个用户更新值 int x=18 ，另一个用户获得值更新。
3.  编译时绑定使用的静态关键字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T06:10:59.987

代替

```
string ord = "ORD" + DateTime.Now.Year + get_next_id(); 
```

利用

```
ord = "ORD" + DateTime.Now.Year + get_next_id(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T06:14:29.090

这是因为在下面的代码中，您声明了一个名为 ord 的新局部变量。

```
public string orderNumber()
{
    string ord = "ORD" + DateTime.Now.Year + get_next_id();
    return ord;
} 
```

要使其工作，请将上述函数更改为：

```
public void OrderNumber()
{
    ord = "ORD" + DateTime.Now.Year + get_next_id();
} 
```

`OrderNumber`不需要返回值，因为`ord`无论如何您都会使用。

`OrderNumber`在您尝试检索 的值之前需要调用`ord`. 当您最初声明`ord`时，该值为空。调用`OrderNumber`会将其值从 null 更改为您喜欢的任何值。

# android - android在主要活动中获取扩展视图的尺寸

> ID：15049161
> 
> 赞同：0
> 
> 时间：2013-02-24T06:09:24.583
> 
> 标签：android, view, dimension

也许这是一个简单的问题......我现在正在开发一个绘图应用程序，其主要活动 (A) 正在扩展一个名为 DoodleView 的视图。

我知道如何简单地测量 DoodleView 中的尺寸`onSizeChanged(int w, int h, int oldW, int oldH)`，但我想知道如何测量 A 中 DoodleView 的尺寸。我研究了其他一些类似的问题，但似乎大多数人都在问如何在里面获取尺寸扩展视图。

我在 A 中尝试了以下内容`OnCreate`：

```
 private DoodleView doodleView;
  doodleView = (DoodleView) findViewById(R.id.doodleView);

  doodleViewWidth = doodleView.getMeasuredWidth(); 
  doodleViewHeight = doodleView.getMeasuredHeight(); 

  Toast.makeText(Doodlz.this, "W=" + doodleViewWidth + "H= "+doodleViewHeight, Toast.LENGTH_LONG).show(); 
```

吐司报告 W 和 H 均为 0。

是否可以在 Main Activity A 中获取扩展视图的尺寸？我想问这个，因为`GetActivityResult`在这个主要活动中还有一些需要根据 DoodleView 维度来操作导入图片。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:28:18.047

这应该做的工作：

```
doodleView.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        doodleViewWidth = doodleView.getWidth(); 
        doodleViewHeight = doodleView.getHeight();
        // here goes your code...
    }
}); 
```

编辑：请注意，在 onGlobalLayout() 至少没有被调用一次（或者它们将只是 0）之前，无法访问这两个变量。根据您需要的内容和时间，代码的值会有所不同。您可以只将使用这些值的代码放在 onGlobalLayout() 方法中，或者您可以使用 Handler 发送消息，然后在 Handler 的 handleMessage() 中进行处理。

# javascript - 如何合并数组然后连接它们

> ID：15049164
> 
> 赞同：0
> 
> 时间：2013-02-24T06:09:40.890
> 
> 标签：javascript, xml, arrays, merge, xmlhttprequest

我从我的 XMLHttpRequest responseXML 对象中检索了这组数组数据。在解析期间，我想格式化一个数组以传回使用。

数组`setup`应该像这样

`setup=['eMonth[0]','eDay[0]','holiStr[0]','eMonth[1]','eDay[1],'holiStr[1]' ,'eMonth[2]','eDay[2]','holiStr[2]']`

所以我试图先将设置放入一个数组，然后对于每个设置，连接另一个设置。

```
function parseXML(xmlData){
var setup;
    for(i=0;i< xmlData.getElementsByTagName('year').length;i++){
        var eYear = xmlData.getElementsByTagName('year')[i].firstChild.nodeValue;
        var eMonth = xmlData.getElementsByTagName('month')[i].firstChild.nodeValue;
        var eDay = xmlData.getElementsByTagName('day')[i].firstChild.nodeValue;
        var eHour = xmlData.getElementsByTagName('hours')[i].firstChild.nodeValue;
        var eMinute = xmlData.getElementsByTagName('minutes')[i].firstChild.nodeValue;
        var eTitle = xmlData.getElementsByTagName('title')[i].firstChild.nodeValue;
        var holiStr = eTitle[i] + '</br>' + eHour[i] + ":" + eMinute[i];
        setup = [eMonth[i],eDay[i],holiStr[i]];
    }   
        return setup;
} 
```

这返回空，我想我搞砸了。有人可以向我展示一种更优雅的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:15:58.030

怎么样：

```
var setup = [];
for(...){
  ...
  setup.push(eMonth[i]);
  setup.push(eDay[i]);
  setup.push(holiStr[i]);
}
return setup; 
```

我不确定您为什么要这样做，但它应该满足您提供的要求。

否则，将对象保留在数组中可能会更容易处理，而不是需要保留“3 个分组”。IE：

```
var setup = [];
for(...){
  ...
  setup.push({eMonth: eMonth[i], eDay: eDay[i], holiStr: holiStr[i]});
}
return setup; 
```

...这将允许您参考`setup[3].eDay`，例如。

# visual-studio-2010 - Visual Studio 发布和部署问题 - 无论如何都要使用旧程序集

> ID：15049165
> 
> 赞同：2
> 
> 时间：2013-02-24T06:09:47.933
> 
> 标签：visual-studio-2010, publish, web-deployment

我已经发布并部署了一个网站。它最初有一个硬编码的路径，我现在已将其删除。我已经清理、删除、更新并撞到了墙上，但部署的代码仍在引用硬编码路径。

看这里：

[http://www.iso15926.net](http://www.iso15926.net)

我检查了整个解决方案以确保路径不存在。当我运行它时，它可以在我的本地机器上运行，而不是在服务器上。

我已经检查了不同机器上的错误，以确保它不是浏览器缓存问题。

有任何想法吗？

# ruby-on-rails - Rails 设置资源路径

> ID：15049166
> 
> 赞同：3
> 
> 时间：2013-02-24T06:09:52.157
> 
> 标签：ruby-on-rails, bower

我正在开发 Rails 应用程序，并希望尽可能地将我的 javascript 与我的后端应用程序逻辑分开。我计划稍后使用这些资产在 phonegap 之上构建一个应用程序。对于我的依赖项（javascripts），我使用的是凉亭。我将我的 bower 包设置为安装在 vendor/javascripts 但想知道如何将此路径公开给我的 requirejs-rails 调用？

本质上，我想要做的是在我的 require-main.js 文件中需要这些文件，并可以从 rails 资产管道访问它们。

所以我的代码看起来像这样

```
vendor/javascripts/jquery/jquery.min.js //want to include this 
```

需要js.config {

```
 paths: {

            // following file is located in the vendor/javascripts folder...
        jquery: "javascripts/jquery/jquery.min.js"
    }
}

require ["jquery"], ($) ->

    console.log $ 
```

有没有人让 bower 和 rails 一起玩得很好？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T21:02:08.570

您可以做的是：在根文件夹中创建一个名为“.bowerrc”的文件，内容可以是路径：

例如：

```
{
  "directory" : "vendor/plugins"
} 
```

之后你应该`bower install`再次运行

# java - Selenium.Key Action 与 Java Webdriver

> ID：15049167
> 
> 赞同：0
> 
> 时间：2013-02-24T06:09:55.103
> 
> 标签：java, selenium-webdriver

Java WebDriver 最近发布的 firefoxbrowser 是我编写的唯一一个。这是为了自动化而不是测试。

忽略缺少标题等。我只是试图选择一个文本框。然后发送一个 ctrl-home 使光标位于框的开头。然后根据一些先前确定的标准，它应该发送删除命令 x 次。好吧，它选择了文本框，我可以看到光标在周围闪烁，但它似乎没有跳到顶部的起始位置，也没有删除任何内容。显然，我首先关心的是主场。

```
int a = 0;
int del = dateline_name.length();
del = del + 2 ;                                 
                driver.findElement(By.id("id_story")).click();
                    Actions action = new Actions(driver);
                    action.keyDown(Keys.CONTROL).sendKeys(Keys.HOME).keyUp(Keys.CONTROL).perform();
                        while (a <= del)
                            {
                            action.sendKeys(Keys.DELETE).perform();
                            a++;
                            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:23:09.283

You have miss build() call before doing perform(). Check below link

[http://www.google.co.in/url?sa=t&source=web&cd=3&ved=0CDgQFjAC&url=http%3A%2F%2Fselenium.polteq.com%2Fen%2Fperform-a-sequence-of-actions-with-selenium-webdriver%2F&ei=LdgqUafxKMHqrAet-YDwDg&usg=AFQjCNFte5BvMd6HS4Nk7jEgc_r-206dlg&sig2=suBy4U--uTGp2JxHK5otWw](http://www.google.co.in/url?sa=t&source=web&cd=3&ved=0CDgQFjAC&url=http%3A%2F%2Fselenium.polteq.com%2Fen%2Fperform-a-sequence-of-actions-with-selenium-webdriver%2F&ei=LdgqUafxKMHqrAet-YDwDg&usg=AFQjCNFte5BvMd6HS4Nk7jEgc_r-206dlg&sig2=suBy4U--uTGp2JxHK5otWw)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:54:44.050

我在 Firefox 上尝试过同样的操作，并观察到如果操作中没有 keyUp(Keys.CONTROL) ，它就可以工作。请尝试从操作序列中删除 keyUp。谢谢。

# php - 如何在phpexcel中设置pdf？

> ID：15049168
> 
> 赞同：1
> 
> 时间：2013-02-24T06:10:02.760
> 
> 标签：php, phpexcel

我的错误：

注意：请根据您的目录结构设置此脚本顶部的$rendererName 和 $rendererLibraryPath 值

我的位置

```
$rendererName = PHPExcel_Settings::PDF_RENDERER_MPDF;
$rendererLibrary = 'mpdf';
$rendererLibraryPath = $_SERVER['DOCUMENT_ROOT'].'/PHPExcel/Tests/PDF/' . $rendererLibrary; 
```

我的名字文件 mpdf.php 在 htdocs/PHPExcel/Tests/PDF/'

我该如何解决？如果我添加

```
 $randererLibrary = 'mpdf.php'; 
```

然后它创建一个pdf，但pdf损坏。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:11:18.133

像这样定义渲染的库路径

```
$rendererLibraryPath = dirname(__FILE__).'/PHPExcel/Tests/PDF/' . $rendererLibrary; 
```

您需要使用完整路径。

# asp.net-mvc - asp.net MVC/WEB API - 如何存储授权令牌

> ID：15049175
> 
> 赞同：3
> 
> 时间：2013-02-24T06:11:34.973
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我正在开发一个带有 WEB API 的 ASP.NET MVC 4 应用程序。MVC 客户端调用 WEB API 进行授权，并收到一个令牌作为回报。或者另一个预先授权的浏览器可能只是将令牌传递给 MVC 客户端，这不需要 MVC 客户端的重新授权。我想存储这个令牌以供进一步的 WEB API 调用。而且我也不想将其存储在 cookie 中。关于如何实现这一点的任何指示都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:28:33.880

您可以使用`session token support`

使用会话令牌支持，您可以这样做：

*   使用任意受支持的凭证（例如密码）来请求会话令牌。会话令牌端点直接内置在身份验证处理程序中。

*   会话令牌响应包含令牌本身和过期时间。

*   然后丢弃引导凭证并存储令牌。

*   当令牌过期时，用户必须重新认证才能获得新的令牌。然后重新开始。

> 这与例如 Google IDs long living authentication cookie 非常相似。他们会在有限的时间内（大约 2 周）建立 SSO 会话，然后您必须再次输入密码。

有关更多信息，请查看[**ASP.NET Web API 的会话令牌支持**](http://leastprivilege.com/2012/06/19/session-token-support-for-asp-net-web-api/)

我希望这对你有帮助。

# matlab - 查找旋转图像的边框

> ID：15049177
> 
> 赞同：2
> 
> 时间：2013-02-24T06:11:42.030
> 
> 标签：matlab, image-processing

我有一个这样的旋转图像：![在此处输入图像描述](../Images/78e7b534c81a1ba071aeb797d33fe81d.png)

我想做的是找到图像的边缘。那就是我想找到这张图片中看到的红色边缘： ![在此处输入图像描述](../Images/bec154833fde3663404784957373a569.png)

我试图找到第一个和最后一个非零元素，然后将它们用作边缘的坐标。这很好（如果我真的可以让它工作的话）但它是不可扩展的，因为可能需要扩展红色边框以获得“更厚”的边框。本质上，我试图找到边界，因为我需要移动出现在旋转图像边缘的效果，我需要摆脱这些效果。如果有人能指出我合适的答案的方向（类似于边界框或类似的东西），我将不胜感激！

**编辑根据**[@Jonas](https://stackoverflow.com/users/232610/jonas)的建议 将我的编辑移至答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:24:00.977

我找到了一个合适的答案。根据用户[Parag](https://stackoverflow.com/users/1586200/parag)的建议，我对图像进行了二进制阈值化（大于 0）。然后我应用了 Sobel 边缘检测。这将创建具有图像边缘的二值图像，然后我根据需要使用形态膨胀来“扩展”边界。

我使用的代码：

```
I = imread('outputTest.jpg');
B = I;
B(B > 0) = 255;
BW = edge(B,'sobel');
SE = strel('rectangle', [5 5]);
BW = imdilate(BW,SE);
I2 = I;
I2(BW > 0) = 0; 
```

正如[Parag](https://stackoverflow.com/users/1586200/parag)提到的，二值化图像并不是解决这个问题的最可靠的方法，但由于我的图像在我看到它们之前形成的方式，我确信这至少对我的情况来说已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-25T17:08:57.577

一种简单的方法是使用旋转角度来计算旋转图像的角点。

# graph - 可视化具有所需边缘交叉的图形

> ID：15049179
> 
> 赞同：0
> 
> 时间：2013-02-24T06:11:56.833
> 
> 标签：graph, visualization

给定一个带有顶点和边的图，是否有任何库或应用程序可用于 Java/C++ 中的可视化图

可用属性

*   该图是无向的，每个顶点可能有一个加权值。
*   每个顶点可以有一个半径；半径内的任何顶点都有机会相互连接（就像无线网络一样）。

目标

*   最大化边缘的交叉
*   尽量减少边缘的交叉（使其尽可能平面）

是否有任何布局或可视化算法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:10:39.187

听起来您既要图形生成脚本又要布局算法？我认为 Ron Davidson 和 David Harel 的论文“使用模拟退火很好地绘制图形”ACM Transactions on Graphics 第 15 卷第 4 期，1996 年 10 月第 301 - 331 页包含边缘交叉作为明确的可调标准。我不记得它是否包含顶点大小维度，而且我不知道 C 或 Java 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:26:31.197

看看 jGraph 它是 java 中的图形可视化：[http ://www.jgraph.com/jgraph.html](http://www.jgraph.com/jgraph.html)

# javascript - javascript计时器奇怪的行为

> ID：15049180
> 
> 赞同：0
> 
> 时间：2013-02-24T06:12:01.280
> 
> 标签：javascript, asp.net, timer

我正在开发一个 ASP.NET Web 项目，我使用 Javascript 计时器来执行定期操作（我在此计时器中更改页面内容），但我认为此计时器无法正常运行，例如当我设置其间隔时到 10000（10 秒），它以 10 秒的间隔打勾，但我在最后一个刻度后仅 1 秒就有一个刻度，它的刻度模式是这样的：

tick-1s-tic-----10 s-----tick-1s tick-----10s tick-1s-tick-----10s tick......

当我将间隔设置为 1 秒时，我在 100 毫秒后填充了一个额外的滴答声，这里出了什么问题？这个额外的勾号是什么？

这是我的 JS 代码：

```
pageload:
                ChangeNewsTimer(); 
```

...

```
 function ChangeNewsTimer() {
            var timer = setTimeout("ChangeNewsTimer()", 5000);
            var g = document.getElementById('<%=HFLux.ClientID %>').value.split(',');
            imgLuxIndex++;
            if (imgLuxIndex == g.length)
                imgLuxIndex = 0;

            document.getElementById('<%=hpLux1.ClientID %>').style.color = 'white';
            document.getElementById('<%=hpLux2.ClientID %>').style.color = 'white';
            document.getElementById('<%=hpLux3.ClientID %>').style.color = 'white';
            document.getElementById('<%=hpLux4.ClientID %>').style.color = 'white';
            document.getElementById('<%=hpLux5.ClientID %>').style.color = 'white';
            document.getElementById('<%=hpLux6.ClientID %>').style.color = 'white';
            document.getElementById('<%=hpLux7.ClientID %>').style.color = 'white';
            document.getElementById('<%=hpLux8.ClientID %>').style.color = 'white';

            if (imgLuxIndex == 0)
                document.getElementById('<%=hpLux1.ClientID %>').style.color = 'yellow';
            else if (imgLuxIndex == 1)
                document.getElementById('<%=hpLux2.ClientID %>').style.color = 'yellow';
            else if (imgLuxIndex == 2)
                document.getElementById('<%=hpLux3.ClientID %>').style.color = 'yellow';
            else if (imgLuxIndex == 3)
                document.getElementById('<%=hpLux4.ClientID %>').style.color = 'yellow';
            else if (imgLuxIndex == 4)
                document.getElementById('<%=hpLux5.ClientID %>').style.color = 'yellow';
            else if (imgLuxIndex == 5)
                document.getElementById('<%=hpLux6.ClientID %>').style.color = 'yellow';
            else if (imgLuxIndex == 6)
                document.getElementById('<%=hpLux7.ClientID %>').style.color = 'yellow';
            else if (imgLuxIndex == 7)
                document.getElementById('<%=hpLux8.ClientID %>').style.color = 'yellow';

            var gg = g[imgLuxIndex].split(';');
            document.getElementById('<%=imgLux.ClientID %>').src = gg[0];
            document.getElementById('<%=lblLuxResName.ClientID %>').value = document.getElementById('<%=lblLuxResName.ClientID %>').innerHTML = gg[1]; 
```

////////////////////////////

```
 var d = document.getElementById('<%=HFUserCooking.ClientID %>').value.split(',');
            usercookingINdex++;
            //alert(d.length);
            if (usercookingINdex == d.length)
                usercookingINdex = 0;

            var dd = d[usercookingINdex].split(';');
            //alert(usercookingINdex);
            document.getElementById('<%=imgUserCooking.ClientID %>').src = dd[0];
            document.getElementById('<%=lblImageSender.ClientID %>').value = document.getElementById('<%=lblImageSender.ClientID %>').innerHTML = dd[1];

            ///////////////

            var w = document.getElementById('<%=HFSlide.ClientID %>').value.split(',');
            imgMainIndex++;
            if (imgMainIndex == 3)
                imgMainIndex = 0;

            document.getElementById('<%=imgMain.ClientID %>').src = w[imgMainIndex];

            var q = document.getElementById('<%=hfHealthNews.ClientID %>').value.split('%');
            newsIndex++;
            var q2 = q[newsIndex].split('$');
            if (newsIndex == 10)
                newsIndex = 0;
            document.getElementById('<%=hpNewsHealthTitle.ClientID %>').value = document.getElementById('<%=hpNewsHealthTitle.ClientID %>').innerHTML = q2[0];
            document.getElementById('<%=lblNewsHealthSummary.ClientID %>').value = document.getElementById('<%=lblNewsHealthSummary.ClientID %>').innerHTML = q2[1];
            document.getElementById('<%=imgNewsHealth.ClientID %>').src = q2[2];
            var yourElement = document.getElementById('<%=hpNewsHealthTitle.ClientID %>');
            yourElement.setAttribute('href', q2[3]);

            var yourElement2 = document.getElementById('<%=hpNewsHealth.ClientID %>');
            yourElement2.setAttribute('href', q2[3]);

            //cooking
            q = document.getElementById('<%=HFCookingNews.ClientID %>').value.split('%');
            newsIndex2++;
            q2 = q[newsIndex2].split('$');
            if (newsIndex2 == 10)
                newsIndex2 = 0;
            document.getElementById('<%=hpCookingNewsTitle.ClientID %>').value = document.getElementById('<%=hpCookingNewsTitle.ClientID %>').innerHTML = q2[0];
            document.getElementById('<%=lblCookingNewsSummary.ClientID %>').value = document.getElementById('<%=lblCookingNewsSummary.ClientID %>').innerHTML = q2[1];
            document.getElementById('<%=imgCookingNews.ClientID %>').src = q2[2];
            var yourElement = document.getElementById('<%=hpNewsHealthTitle.ClientID %>');
            yourElement.setAttribute('href', q2[3]);

            var yourElement2 = document.getElementById('<%=hpCookingNews.ClientID %>');
            yourElement2.setAttribute('href', q2[3]);

            //comment 1
            q = document.getElementById('<%=HFComment1.ClientID %>').value.split('%');
            commentIndex++;
            q2 = q[commentIndex].split('$');
            if (commentIndex == 10)
                commentIndex = 0;

            document.getElementById('<%=hpNewsComment.ClientID %>').value = document.getElementById('<%=hpNewsComment.ClientID %>').innerHTML = q2[0];
            document.getElementById('<%=lblNewsComment.ClientID %>').value = document.getElementById('<%=lblNewsComment.ClientID %>').innerHTML = q2[2];
            var yourElement5 = document.getElementById('<%=hpNewsComment.ClientID %>');
            yourElement5.setAttribute('href', q2[1]);

            //comment 2
            q = document.getElementById('<%=HFComment2.ClientID %>').value.split('%');
            commentIndex2++;

            if (commentIndex2 == q.length - 1)
                commentIndex2 = 0;
            if (q[commentIndex2] != '') {
                q2 = q[commentIndex2].split('$');
                document.getElementById('<%=hpRevComment.ClientID %>').value = document.getElementById('<%=hpRevComment.ClientID %>').innerHTML = q2[0];
                document.getElementById('<%=lblRevComment.ClientID %>').value = document.getElementById('<%=lblRevComment.ClientID %>').innerHTML = q2[2];
            }
            //var yourElement6 = document.getElementById('<%=hpRevComment.ClientID %>');
            //yourElement6.setAttribute('href', q2[1]);

            //comment 3
            q = document.getElementById('<%=HFComment3.ClientID %>').value.split('%');
            commentIndex3++;
            q2 = q[commentIndex3].split('$');
            if (commentIndex3 == 10)
                commentIndex3 = 0;

            document.getElementById('<%=hpResComment.ClientID %>').value = document.getElementById('<%=hpResComment.ClientID %>').innerHTML = q2[0];
            document.getElementById('<%=lblResComment.ClientID %>').value = document.getElementById('<%=lblResComment.ClientID %>').innerHTML = q2[2];
            var yourElement7 = document.getElementById('<%=hpResComment.ClientID %>');
            yourElement7.setAttribute('href', q2[1]);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:28:34.683

您很可能在加载时不小心多次调用 ChangeNewsTimer。查看您的代码以确保您没有重复初始化它。另一种选择是使 ChangeNewsTimer 不能多次初始化。像这样的东西：

```
var ChangeNewsTimerInitialized = false;
function ChangeNewsTimer() {
    if (ChangeNewsTimerInitialized === true) return;
    ChangeNewsTimerInitialized = true;
    var func = function() {
        setTimeout(func, 10000);
        document.getElementById("findme").innerHTML += "<br />tick";
    }
    func();
} 
```

# c - 函数终止时的段错误

> ID：15049181
> 
> 赞同：0
> 
> 时间：2013-02-24T06:12:02.590
> 
> 标签：c, assembly, x86, 64-bit, att

我有一个用 64 位 x86 程序集（gcc 和 GAS 的 AT&T 语法）编写的函数，它执行一些 SSE2 操作。我已经通过使用带有反汇编的 gdb 并查看寄存器值来检查结果，所以我知道它产生了正确的结果。在 retq 指令之后，我得到一个分段错误。由于我是汇编新手（并且从未上过任何课程），我猜我没有正确处理函数/主程序接口。该函数接受 2 个指针和一个 int，并预计返回一个浮点数。这就是我在汇编函数中处理输入/输出的方式：

```
float foo(float *x,float *y,unsigned int s)
{
    __asm__ __volatile__(
    "movl   -0x14(%%rbp),%%ecx \n\t"   //ecx = s
    "movq   -0x8(%%rbp),%%rax \n\t"    //rax -> x
    "movq   -0x10(%%rbp),%%rdx \n\t"   //rdx -> y
    "subq   $4,%%rsp \n\t"             //function result
    #sse2 operations that end up with the answer in xmm4...
    "movss  %%xmm4,(%%rsp) \n\t"       //store result
    "flds   (%%rsp) \n\t"              //load function result
    "addq   $4,%%rsp \n\t"             //adjust stack
    "ret \n\t"
    :
    :"g"(s)
    :"%ecx","%rax","%rdx"
    );
} 
```

这是似乎导致段错误的行（这是反汇编中 ret 之后的指令）：

```
0x00007fffffffe0d0 in ?? ()
=> 0x00007fffffffe0d0:  00 00   add    %al,(%rax) 
```

我不知道为什么它在执行我的函数后将 rax 的低位中的值添加回 rax，但它似乎正在崩溃。我是否不允许在我的汇编函数中使用 rax，即使它是通用的并且我声明它已被破坏？

我不确定您是否需要查看这部分，但这是 gcc 期望处理该功能的方式；我已经包含了调用我的函数的行的反汇编：

```
 #asm dealing with function inputs
    callq  0x400520 <foo>
    movss  %xmm0,-0x48(%rbp)
    mov    -0x48(%rbp),%eax
    mov    %eax,-0x34(%rbp) 
```

这就引出了我的第二个问题，为什么将 xmm0 中的值任意移动到两个位置？我是否应该让我的函数以 xmm0 的结果结束，或者这是否意味着我应该避免使用 xmm0？我很困惑，不胜感激。提前感谢任何花时间阅读我的菜鸟帖子的人:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T07:12:26.733

您的问题是内联汇编不会替换该功能。您的函数编译为：

```
_foo:
 push   %rbp              ; function prologue
 mov    %rsp,%rbp
 mov    %rdi,-0x8(%rbp)
 mov    %rsi,-0x10(%rbp)
 mov    %edx,-0x14(%rbp)
 mov    -0x14(%rbp),%eax
 mov    %eax,-0x1c(%rbp)

 mov    -0x14(%rbp),%ecx  ; your code
 mov    -0x8(%rbp),%rax
 mov    -0x10(%rbp),%rdx
 sub    $0x4,%rsp
 movss  %xmm4,(%rsp)
 flds   (%rsp)
 add    $0x4,%rsp
 retq                     ; your return

 movss  -0x18(%rbp),%xmm0 ; function epilogue
 pop    %rbp
 retq                     ; gcc's return 
```

`retq`弹出堆栈的一个值，并跳转到它。如果一切顺利，这是一个被`callq`. `gcc`生成了一个函数序言（上面的前两条指令），包括`push %rbp`. 因此，当您`retq`运行时，它会弹出`rbp`（指向堆栈的指针）并跳转到它。这可能会导致分段错误，因为堆栈不可执行（也可能是因为 %rax 是无效指针，如果由于某种原因您的堆栈是可执行的）。它碰巧指向的堆栈上的值`00 00`（不出所料，在内存中出现了很多）并且巧合地反汇编为`add %al,(%rax)`.

现在，我是 SSE 的新手，我只使用过几次 GCC 内联汇编，所以我不确定这是否是一个可行的解决方案。您**真的**不应该查看堆栈或返回，因为不同的编译器将具有不同的函数，从而在代码运行时介绍堆栈上参数的相对位置。

尝试类似：

```
#include <stdio.h>

float foo(float *x,float *y,unsigned int s)
{
    float result;

    __asm__ __volatile__(
    "movss  (%%rax),%%xmm4 \n\t"       // xmm4 = *x
    "movss  (%%rdx),%%xmm5 \n\t"       // xmm5 = *y
    "addss  %%xmm5,%%xmm4  \n\t"       // xmm4 += xmm5

    "movss  %%xmm4,(%%rbx) \n\t"       // result = xmm4
    :
    :"c"(s), "a"(x), "d"(y), "b"(&result)  // ecx = s, eax = x, edx = y, ebx = &result
    :"memory", "cc"
    );

    return result;
}

int main() {
    float x = 1.0, y = 2.0;
    printf("%f", foo(&x, &y, 99));
    return 0;
} 
```

所有的堆栈分配、参数处理和返回都是在 C 中完成的。它还传入一个用于存储浮点结果的指针。

这会生成以下程序集，大致就是您要查找的程序集：

```
_foo:
 push   %rbp              ; prologue
 mov    %rsp,%rbp
 push   %rbx

 lea    -0xc(%rbp),%rbx   ; set up registers
 mov    %edx,%ecx
 mov    %rdi,%rax
 mov    %rsi,%rdx

 movss  (%rax),%xmm4      ; your code
 movss  (%rdx),%xmm5
 addss  %xmm5,%xmm4
 movss  %xmm4,(%rbx)

 movss  -0xc(%rbp),%xmm0  ; retrieve result to xmm0 (the return register)

 pop    %rbx              ; epilogue
 pop    %rbp
 retq 
```

另一种选择是始终将其写入汇编文件，然后将其与您的 C 代码链接。

我希望这有点帮助，但如果它没有完全回答你的问题，我很抱歉。

**编辑：**将代码更新为实际为我运行的东西。

# python - 使用 selenium python 脚本将值写入隐藏元素

> ID：15049182
> 
> 赞同：5
> 
> 时间：2013-02-24T06:12:09.220
> 
> 标签：python, selenium

我正在尝试使用我的 python selenium 代码写入文本框，但由于文本框的父标签被隐藏而出现错误。

```
driver.find_element_by_xpath("//input[@itemcode='XYZ']").send_keys(1) 
```

我看到了一个使用 java 的 Javascript 执行器解决方法，但需要一些类似的 python 脚本帮助。

提前致谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T06:23:08.677

试试这个解决方法（在 Firefox 和 Chrome 中测试）：

```
from selenium import webdriver
from selenium.common.exceptions import NoSuchElementException

browser = webdriver.Firefox() # Get local session(use webdriver.Chrome() for chrome) 
browser.get("http://www.example.com") # load page from some url
assert "example" in browser.title # assume example.com has string "example" in title

try:
    # temporarily make parent(assuming its id is parent_id) visible
    browser.execute_script("document.getElementById('parent_id').style.display='block'")
    # now the following code won't raise ElementNotVisibleException any more
    browser.find_element_by_xpath("//input[@itemcode='XYZ']").send_keys(1)
    # hide the parent again
    browser.execute_script("document.getElementById('parent_id').style.display='none'")
except NoSuchElementException:
    assert 0, "can't find input with XYZ itemcode" 
```

另一种解决方法甚至更简单（假设文本框的 id 是“XYZ”，否则使用任何可以检索它的 JS 代码）并且如果您只想更改文本框的值可能会更好：

```
browser.execute_script("document.getElementById('XYZ').value+='1'") 
```

# matlab - MATLAB：将具有不同长度但某些相同条目的矩阵组合在一列中

> ID：15049186
> 
> 赞同：0
> 
> 时间：2013-02-24T06:12:33.477
> 
> 标签：matlab, matrix, combinations

假设我测量了两个变量`a`并`b`具有不同的时间分辨率，例如我有一个 7x2 矩阵`A`（标题仅用于说明）：

```
time    value
t1      a1
t2      a2
t3      a3
t4      a4
t5      a5
t6      a6
t7      a7 
```

和一个 3x2 矩阵`B`：

```
time    value
t2      b1
t4      b2
t6      b3 
```

有没有一种优雅的方式（即没有循环`find`）将它们组合在一个 3x2 矩阵`C`中，该矩阵仅包括我测量`a`和测量的时间`b`：

```
time    value a     value b
t2      a2          b1
t4      a4          b2
t6      a6          b3 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:19:33.510

执行集合交集：

```
[~,IA,IB]=intersect(A(:,1),B(:,1),'rows');

C=[A(IA,:) B(IB,2)]; 
```

# mpi - MPI_Allgather 和 MPI_Alltoall 函数之间的区别？

> ID：15049190
> 
> 赞同：24
> 
> 时间：2013-02-24T06:13:04.180
> 
> 标签：mpi

MPI 中的 MPI_Allgather 和 MPI_Alltoall 函数之间的主要区别是什么？

我的意思是有人可以给我一些例子，说明 MPI_Allgather 会有所帮助而 MPI_Alltoall 不会？反之亦然。

我无法理解主要区别？看起来在这两种情况下，所有进程都将 send_cnt 元素发送到参与通信器的每个其他进程并接收它们？

谢谢你

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-02-24T13:27:00.680

一张图说千言万语，所以这里有几张ASCII艺术图：

```
rank    send buf                        recv buf
----    --------                        --------
 0      a,b,c         MPI_Allgather     a,b,c,A,B,C,#,@,%
 1      A,B,C        ---------------->  a,b,c,A,B,C,#,@,%
 2      #,@,%                           a,b,c,A,B,C,#,@,% 
```

这只是常规的`MPI_Gather`，只有在这种情况下所有进程都接收数据块，即操作是无根的。

```
rank    send buf                        recv buf
----    --------                        --------
 0      a,b,c          MPI_Alltoall     a,A,#
 1      A,B,C        ---------------->  b,B,@
 2      #,@,%                           c,C,%

(a more elaborate case with two elements per process)

rank    send buf                        recv buf
----    --------                        --------
 0      a,b,c,d,e,f    MPI_Alltoall     a,b,A,B,#,@
 1      A,B,C,D,E,F  ---------------->  c,d,C,D,%,$
 2      #,@,%,$,&,*                     e,f,E,F,&,* 
```

（如果每个元素都按发送它的等级着色，看起来会更好，但是......）

`MPI_Alltoall`作为组合工作`MPI_Scatter`-`MPI_Gather`每个进程中的发送缓冲区像 in 一样拆分`MPI_Scatter`，然后每一列块由各自的进程收集，其等级与块列的编号匹配。`MPI_Alltoall`也可以看作是全局转置操作，作用于数据块。

是否存在两种操作可以互换的情况？要正确回答这个问题，必须简单地分析发送缓冲区中数据的大小和接收缓冲区中数据的大小：

```
operation      send buf size      recv buf size
---------      -------------      -------------
MPI_Allgather  sendcnt            n_procs * sendcnt
MPI_Alltoall   n_procs * sendcnt  n_procs * sendcnt 
```

接收缓冲区大小实际上是`n_procs * recvcnt`，但是 MPI 要求发送的基本元素的数量应该等于接收的基本元素的数量，因此如果在发送和接收部分使用相同的 MPI 数据类型`MPI_All...`，则`recvcnt`必须等于`sendcnt`。

很明显，对于相同大小的接收数据，每个进程发送的数据量是不同的。为了使这两个操作相等，一个必要条件是两种情况下发送的缓冲区的大小相等，即`n_procs * sendcnt == sendcnt`，只有当 时才有可能`n_procs == 1`，即只有一个进程，或者如果`sendcnt == 0`，即没有数据正在发送一点也不。因此，实际上不存在两种操作真正可互换的情况。但是可以通过在发送缓冲区中重复多次相同的数据来模拟`MPI_Allgather`（`MPI_Alltoall`正如`n_procs`Tyler Gill 已经指出的那样）。这是`MPI_Allgather`使用单元素发送缓冲区的操作：

```
rank    send buf                        recv buf
----    --------                        --------
 0      a             MPI_Allgather     a,A,#
 1      A            ---------------->  a,A,#
 2      #                               a,A,# 
```

在这里同样实现`MPI_Alltoall`：

```
rank    send buf                        recv buf
----    --------                        --------
 0      a,a,a          MPI_Alltoall     a,A,#
 1      A,A,A        ---------------->  a,A,#
 2      #,#,#                           a,A,# 
```

反过来是不可能的——在一般情况下无法模拟`MPI_Alltoall`with的动作。`MPI_Allgather`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-12-06T02:49:02.943

这两张截图有一个快速的解释：

*MPI_Allgatherv*

[![MPI_Allgatherv](../Images/34668e50df0d38477dee4983a6be3a2f.png)](https://i.stack.imgur.com/D8tLU.jpg)

*MPI_Alltoallv*

[![MPI_Alltoallv](../Images/686d46dca0075b62899f879978759af6.png)](https://i.stack.imgur.com/AaFH6.jpg)

虽然这是 MPI_Allgatherv 和 MPI_Alltoallv 之间的比较，但它也解释了 MPI_Allgather 与 MPI_Alltoall 的不同之处。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-24T07:34:47.157

虽然这两种方法确实非常相似，但两者之间似乎存在一个关键区别。

MPI_Allgather 以每个进程在其接收缓冲区中具有完全相同的数据结束，并且每个进程为整个数组贡献一个值。例如，如果一组进程中的每一个都需要与其他人共享有关其状态的某个单一值，则每个进程都将提供它们的单一值。然后将这些值发送给每个人，因此每个人都会拥有相同结构的副本。

MPI_Alltoall 不会向其他进程发送相同的值。每个进程不提供应该与其他进程共享的单个值，而是指定一个值给其他进程。换句话说，对于 n 个进程，每个进程都必须指定 n 个值来共享。然后，对于每个处理器 j，它的第 k 个值将被发送到处理 k 在接收缓冲区中的第 j 个索引。如果每个进程对每个其他进程都有一条唯一的消息，这将很有用。

最后一点，运行 allgather 和 alltoall 的结果在每个进程用相同的值填充其发送缓冲区的情况下是相同的。唯一的区别是 allgather 可能会更有效率。

# javascript - 三.js 路上的汽车运动

> ID：15049192
> 
> 赞同：0
> 
> 时间：2013-02-24T06:13:06.563
> 
> 标签：javascript, three.js, webgl

我正在用 THREE.js 制作汽车游戏。我面临的问题是我做了一个平面路并将汽车放在上面。现在我制作了一个地形，但我不知道如何建立汽车和道路之间的关系，以便汽车应该在道路上而不是在道路上移动，就像在现实生活中一样。

我试图通过计算平面的顶点高度来解决这个问题，并将汽车位置设置在该高度之上，但这对我来说不起作用下面的代码。

```
for(var k = 0; k < ground.geometry.vertices.length; k++){

    localObject.position.y = ground.geometry.vertices[k].y + 1;
} 
```

在这方面帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:40:11.977

您需要像这样计算汽车的边界框

```
car.geometry.computeBoundingBox ();
var bBox = car.geometry.boundingBox; 
```

并将您的飞机放在 bBox.min.y；

```
ground.position.y = bBox.min.y; 
```

# django - Django Photo 应用程序不显示

> ID：15049194
> 
> 赞同：1
> 
> 时间：2013-02-24T06:13:42.387
> 
> 标签：django

我正在使用这个轻鸟教程制作照片应用程序。

问题是，我上传的图片。不会显示在页面上。我以前从未在 django 中显示过图片，我认为问题出在配置上

![在此处输入图像描述](../Images/8aedc7768b8b2f0706f75121992f3853.png)

![在此处输入图像描述](../Images/435197be077cf3db25d76db9ad1ccd92.png)

我的模型.py

```
 from django.db import models
  from django.contrib.auth.models import User
  from django.contrib import admin
  from string import join
  import os
  from PIL import Image as PImage
  from mysite.settings import MEDIA_ROOT

  class Album(models.Model):
      title = models.CharField(max_length=60)
      public = models.BooleanField(default=False)
      def __unicode__(self):
          return self.title
      def images(self):
          lst = [x.image.name for x in self.image_set.all()]
          lst = ["<a href='/media/%s'>%s</a>" % (x, x.split('/')[-1]) for x in lst]
    return join(lst, ', ')
      images.allow_tags = True
  class Tag(models.Model):
      tag = models.CharField(max_length=50)
      def __unicode__(self):
          return self.tag

  class Image(models.Model):
      title = models.CharField(max_length=60, blank=True, null=True)
      image = models.FileField(upload_to="images/")
      tags = models.ManyToManyField(Tag, blank=True)
      albums = models.ManyToManyField(Album, blank=True)
      created = models.DateTimeField(auto_now_add=True)
      rating = models.IntegerField(default=50)
      width = models.IntegerField(blank=True, null=True)
      height = models.IntegerField(blank=True, null=True)
      user = models.ForeignKey(User, null=True, blank=True)
      def save(self, *args, **kwargs):
          """Save image dimensions."""
          super(Image, self).save(*args, **kwargs)
          im = PImage.open(os.path.join(MEDIA_ROOT, self.image.name))
          self.width, self.height = im.size
          super(Image, self).save(*args, ** kwargs)

      def size(self):
          """Image size."""
          return "%s x %s" % (self.width, self.height)

      def __unicode__(self):
          return self.image.name

      def tags_(self):
          lst = [x[1] for x in self.tags.values_list()]
          return str(join(lst, ', '))

      def albums_(self):
          lst = [x[1] for x in self.albums.values_list()]
          return str(join(lst, ', '))

      def thumbnail(self):
          return """<a href="/media/%s"><img border="0" alt="" src="/media/%s" height="40" /></a>""" % (
                                                                (self.image.name, self.image.name))
thumbnail.allow_tags = True
      def __unicode__(self):
          return self.image.name

  class AlbumAdmin(admin.ModelAdmin):
      search_fields = ["title"]
      list_display = ["title"] 
```

我的观点.py

```
 from django.http import HttpResponseRedirect, HttpResponse
  from django.shortcuts import get_object_or_404, render_to_response
  from django.contrib.auth.decorators import login_required
  from django.core.context_processors import csrf
  from django.core.paginator import Paginator, InvalidPage, EmptyPage
  from django.forms import ModelForm
  from mysite.settings import MEDIA_URL

  from photo.models import *

  def main(request):
      """Main listing."""
      albums = Album.objects.all()
      if not request.user.is_authenticated():
          albums = albums.filter(public=True)

      paginator = Paginator(albums, 10)
      try: page = int(request.GET.get("page", '1'))
      except ValueError: page = 1

      try:
          albums = paginator.page(page)
      except (InvalidPage, EmptyPage):
          albums = paginator.page(paginator.num_pages)

      for album in albums.object_list:
          album.images = album.image_set.all()[:4]

      return render_to_response("photo/list.html", dict(albums=albums, user=request.user,
          media_url=MEDIA_URL))

        class TagAdmin(admin.ModelAdmin):
            list_display = ["tag"]

        class ImageAdmin(admin.ModelAdmin):
            search_fields = ["title"]
            list_display = ["__unicode__", "title", "user", "rating", "size", "tags_", "albums_",
    "thumbnail", "created"]
            list_filter = ["tags", "albums", "user"]

            def save_model(self, request, obj, form, change):
                obj.user = request.user
                obj.save()

        admin.site.register(Album, AlbumAdmin)
        admin.site.register(Tag, TagAdmin)
        admin.site.register(Image, ImageAdmin) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:48:33.783

好的，这就是为什么图片没有显示的问题。您调用不正确并覆盖图像的路径。请记住，您已经在模型中放置了缩略图，因此在模板中您必须只放置：

```
<ul>
    {% for album in albums.object_list %}
    <div class="title">{{ album.title }} ({{ album.image_set.count }} images)</div>
        <ul>
            {% for img in album.images %}
                {{img.thumbnail}}
            {% endfor %}
        </ul>
    {% endfor %}
</ul> 
```

这是正确的，但我的问题是当我测试它时，允许标签功能无效，因此输出是链接而不是图像。所以我修改了它并得到了图像显示。

```
{% for img in album.images %}
    <a href="{{MEDIA_URL}}{{ img.image}}">
        <img border="0" alt="" src="{{MEDIA_URL}}{{ img.image}}" />
    </a>
{% endfor %} 
```

# ruby - Ruby 类定义中的类级方法调用是否应该是幂等的？

> ID：15049197
> 
> 赞同：2
> 
> 时间：2013-02-24T06:13:54.287
> 
> 标签：ruby, conventions

我最近遇到了一个问题，`load`在 Ruby 类上调用两次会导致错误（这是一个[真实的示例](https://github.com/pluginaweek/state_machine/issues/163)）。这是因为在类主体中发生了有状态的方法调用，并`load`导致这些方法被执行两次。一个简单的例子如下：

`base.rb`：

```
class Base
  def foo
    puts "BASE"
  end
end 
```

`derived.rb`：

```
require "./base"

class Derived < Base
  alias_method :foo_aliased, :foo  

  def foo
    puts "DERIVED!"
  end
end 
```

从 REPL 执行：

```
$ load './derived.rb'
> true
$ Derived.new.foo
> DERIVED!
> nil
$ Derived.new.foo_aliased
> BASE
> nil
$ load './derived.rb'
> true
$ Derived.new.foo
> DERIVED!
> nil
$ Derived.new.foo_aliased
> DERIVED!
> nil 
```

在此示例中，第二个`load`原因`alias_method`破坏了原始别名。结果，我们破坏了任何依赖于原始方法具有完整别名的代码。

蛮力类重新加载很常见（例如，您在`each_run`使用 Spork 的 RSpec 配置的条款中看到了很多），完全禁止使用并不总是那么容易`load`。因此，似乎防止错误的唯一方法是确保类定义是“幂等的”。换句话说，您已经确保打算从类定义中调用的方法无论调用多少次都应该产生相同的结果。重新加载不会破坏更多代码的事实似乎暗示了一种不言而喻的约定。

是否有一些针对 Ruby 类设计的风格指南要求这样做？如果是这样，执行这些语义的常用技术是什么？对于某些方法，您可以只做一些记忆以防止使用相同的参数重新执行相同的方法，但其他一些事情`alias_method`似乎更难解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:10:50.093

你完全错了。假设所有类方法都是幂等的，这既不是代码在多次加载时不会中断的充分条件，也不是必要条件。

因此，很自然地没有样式指南可以强制执行。

# python - Python：索引具有特定条件的字符串

> ID：15049204
> 
> 赞同：0
> 
> 时间：2013-02-24T06:14:45.953
> 
> 标签：python, python-2.7

我需要帮助： **找出不包含五个元音和三个 y 的单词的数量。**

到目前为止，我有：

```
def no_vowels_yyy(s):
        count = 0
        list_of_vowels = ['a', 'e', 'i', 'o', 'u']
        for i in range(0, len(s)):
                if s[i] not in list_of_vowels and (s[i] == 'y') == 3:
                        return True
        return False 
```

这虽然行不​​通...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:23:34.467

您检查 y 的数量`(s[i] == 'y') == 3:`是导致它不起作用的原因。比较会给你一个布尔（真/假）结果，而不是匹配的数量`s[i]`。`'y'`由于您正在循环，您可以只计算您找到的 y 的数量。

```
def no_vowels_yyy(s):
    count = 0
    list_of_vowels = ['a', 'e', 'i', 'o', 'u']
    for i in range(0, len(s)):
            if s[i] in list_of_vowels:
                return False
            if s[i] == 'y':
                count += 1

    return count == 3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T09:30:53.590

既然其他人已经告诉你问题出在哪里，我将提供我自己的解决方案。这可能是最好的方法，我不明白为什么不使用`string.count()`-method：

```
def no_vowels_yyy(s):
    if any(c in {'a', 'e', 'i', 'o', 'u'} for c in s):
        return False
    return s.count('y') == 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T09:04:51.593

这是一个略有不同的解决方案。

首先，我们建立一个`set`元音。检查特定角色是否在此集合中非常快；比签入列表更快。此外，我们在函数外部构建它一次，而不是每次调用函数时都构建它。

我们使用`any()`生成器表达式来检查每个字符以查看它是否在集合中。如果任何字符在元音集中，我们返回 False。

接下来，我们使用`sum()`生成器表达式来计算有多少个`'y'`字符；对于每个字符 a `'y'`，该值`1`由`sum()`函数相加。我们返回此结果是否为 3。

这比使用索引遍历字符串并更新计数器变量要快一些。这更像是一个“Pythonic”解决方案。另一方面，这会在字符串上循环两次而不是一次。

```
_vowels = set(['a', 'e', 'i', 'o', 'u'])

def no_vowels_yyy(s):
    if any(ch in _vowels for ch in s):
        return False

    return s.count('y') == 3

print(no_vowels_yyy("zyzyxy")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T09:12:28.430

只是为了展示另一种方式......：

```
from collections import Counter
def func(text):
    freq = Counter(text)
    return freq['y'] == 3 and not (freq.viewkeys() & 'aeiou') 
```

仅具有一次解析的优势，但不会在元音上短路...

否则，要尽快短路：

```
y_count = 0
for ch in word:
    if ch in {'a', 'e', 'i', 'o', 'u'}:
        return False
    elif ch == 'Y':
        y_count += 1
        if y_count > 3:
            return False
return y_count == 3 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T13:58:04.757

```
def no_vowels_yyy(s, _vowels=set("aeiou")):
    return s.count("y") == 3 and _vowels.isdisjoint(s)
print(no_vowels_yyy("zyzyxy")) # -> True 
```

或者更易读的版本：

```
def no_vowels_yyy(s):
    return s.count("y") == 3 and all(c not in "aeiou" for c in s) 
```

# android - 在创建活动之前或之后加载数据？

> ID：15049205
> 
> 赞同：0
> 
> 时间：2013-02-24T06:15:31.900
> 
> 标签：android, android-asynctask, android-activity

我知道这是一个普遍的问题，但我不知道在哪里问这个问题。我想知道什么是好的设计实践：在创建活动之前加载数据；或创建活动、加载数据并填充 UI。

在我看来，之前获取数据并不是一个好主意，因为您必须将信息打包传递给下一个活动。此外，您正在处理与当前活动无关的信息。我看到这样做的唯一原因是，如果您有大量数据要加载，并且您暂时不想阻止用户与应用程序交互。

但是，我见过很多人在启动活动之前将信息加载到 AsyncTask 中，即使它只有几个字节。为什么？这是预期的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:37:55.253

这个问题你不能给出一个完美的答案，因为有很多不同的方法可以做到这一点。

如果您有类似于新闻应用程序的东西，您将能够在浏览列表时加载内容减去图像，如果用户查看详细信息，您可以动态加载图像并仅显示文本。但这只是一种方法。有些人可能更喜欢在显示详细信息屏幕之前加载图像。

我的建议是考虑您的用户和他们的工作流程，这样您就不会完全失败。并逐案处理这个问题。

# google-app-engine - 持久性管理器无法实例化

> ID：15049215
> 
> 赞同：4
> 
> 时间：2013-02-24T06:17:19.980
> 
> 标签：google-app-engine, gwt, web-applications, datanucleus, persistence-manager

我有一个使用 gwt 并使用谷歌应用引擎存储我的数据的 Web 应用程序项目。当我运行我的项目时，我收到以下错误：

```
 WARNING: Error for /proj/saat
 java.lang.NoSuchFieldError: NUCLEUS_CONTEXT_LOADER
     at org.datanucleus.api.jdo.JDOPersistenceManagerFactory.<clinit>(JDOPersistenceManagerFactory.java:101) 
```

saat 是我试图存储在我的谷歌应用程序引擎上的一个类。proj 是我的项目的名称。我尝试在服务器包中的 saatServiceImpl 中实例化我的 persistenceManager，如下所示：

```
 private static final PersistenceManagerFactory pmf = JDOHelper
        .getPersistenceManagerFactory("transactions-optional"); 
```

这是发出错误的行。我不知道如何解决这个问题。任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:51:45.597

您在 GAE 环境中使用了错误的`DataNucleus`库，请检查[此表](http://code.google.com/p/datanucleus-appengine/wiki/Compatibility)并在您的项目中设置适当的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-07T07:22:28.633

我不知道如何或为什么，但对我有用的是我打开了 com.google.appengine.eclipse.core.prefs 并更改了属性：

gaeDatanucleusVersion=v2 到 gaeDatanucleusVersion=v1

# windows - 批量切换到随机子目录

> ID：15049216
> 
> 赞同：1
> 
> 时间：2013-02-24T06:17:22.913
> 
> 标签：windows, batch-file, cmd

我试图用批处理更改为文件夹中的随机子目录

```
cd c:\* 
```

没用，实际上每次都带你去回收站

```
if exist * (
cd *
) 
```

没用

```
for %d in (*) do cd %d 
```

没用

所以我很茫然，有没有办法批量做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T15:19:41.567

```
@echo off
setlocal EnableDelayedExpansion
rem Create an array of dir. names
set n=0
for /D %%a in (c:\*) do (
   set /A n+=1
   set dir[!n!]=%%a
)
rem Select a random element from the array
set /A d=%random%*n/32768+1
rem And CD to it
cd "!dir[%d%]!" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T11:16:46.887

```
setlocal enabledelayedexpansion
set c=0
rem count dirs in c:\
for /d %%I in (c:\*) do set /a c+=1 >NUL
set /a c=%RANDOM% * %c% / 32768 + 1 >NUL
set loop=0
for /d %%I in (c:\*) do (
    set /a loop+=1
    if !loop!==%c% cd /d "%%I"
) 
```

# sql - 在 JOIN 中添加 WHERE 条件

> ID：15049218
> 
> 赞同：0
> 
> 时间：2013-02-24T06:17:48.780
> 
> 标签：sql, sql-server, performance, sql-server-2008, database-performance

我有以下查询来过滤给定城市和横幅中的活跃商店

```
SELECT ShopName,CityName 
FROM Shop S INNER JOIN City C ON C.CityId=S.CityId
WHERE S.Active=1 AND S.Banner like '%res%'

SELECT ShopName,CityName 
FROM Shop S INNER JOIN City C ON C.CityId=S.CityId AND S.Active=1
WHERE S.Banner like '%res%' 
```

如果您查看两个查询，它们会给出相同的结果，但在不同的地方使用 S.Active。一个是 IN JOIN 另一个是 WHERE 子句。

**哪个查询会执行得更好？**

> 我在 City 表中有 3000000 个城市，在 Shops 表中有 40000000 个商店。我为 (City,Active) 创建了非聚集索引

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T07:14:14.967

您应该阅读 Conor Cunningham 撰写的这篇博文：*[如何编写非 JOIN WHERE 子句](http://www.sqlskills.com/blogs/conor/how-to-write-non-join-where-clauses/)。*

如果连接类型是`INNER`[short] answer `usually no`。如果您在 AdventureWorks 数据库 (SQL 2008) 上运行这两个查询：

```
SET STATISTICS PROFILE ON
GO

SELECT  h.SalesOrderID, h.OrderDate, d.LineTotal
FROM    Sales.SalesOrderDetail d
INNER JOIN Sales.SalesOrderHeader h ON d.SalesOrderID = h.SalesOrderID
WHERE   h.OrderDate = '20010707'
AND     d.LineTotal < 100

SELECT  h.SalesOrderID, h.OrderDate, d.LineTotal
FROM    Sales.SalesOrderDetail d
INNER JOIN Sales.SalesOrderHeader h ON h.OrderDate = '20010707' AND d.SalesOrderID = h.SalesOrderID
WHERE   d.LineTotal < 100
GO

SET STATISTICS PROFILE OFF
GO 
```

然后你会得到这些执行计划：

```
 Rows                 Executes             StmtText                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              StmtId      NodeId      Parent      PhysicalOp          
    -------------------- -------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------- ----------- ----------- --------------------
    5                    1                    SELECT    h.SalesOrderID, h.OrderDate, d.LineTotal
    FROM    Sales.SalesOrderDetail d
    INNER JOIN Sales.SalesOrderHeader h ON d.SalesOrderID = h.SalesOrderID
    WHERE   h.OrderDate = '20010707'
    AND     d.LineTotal < 100                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        1           1           0           NULL                           NULL                           NULL                                                                                                                                                                                 
    0                    0                      |--Compute Scalar(DEFINE:([d].[LineTotal]=[AdventureWorks2008].[Sales].[SalesOrderDetail].[LineTotal] as [d].[LineTotal]))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          1           2           1           Compute Scalar      
    5                    1                           |--Nested Loops(Inner Join, OUTER REFERENCES:([h].[SalesOrderID]))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             1           3           2           Nested Loops        
    4                    1                                |--Index Seek(OBJECT:([AdventureWorks2008].[Sales].[SalesOrderHeader].[IX_SalesOrderHeader_OrderDate] AS [h]), SEEK:([h].[OrderDate]='2001-07-07 00:00:00.000') ORDERED FORWARD)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          1           4           3           Index Seek          
    0                    0                                |--Compute Scalar(DEFINE:([d].[LineTotal]=isnull((CONVERT_IMPLICIT(numeric(19,4),[AdventureWorks2008].[Sales].[SalesOrderDetail].[UnitPrice] as [d].[UnitPrice],0)*((1.0)-CONVERT_IMPLICIT(numeric(19,4),[AdventureWorks2008].[Sales].[SalesOrderDetail].[UnitPriceDiscount] as [d].[UnitPriceDiscount],0)))*CONVERT_IMPLICIT(numeric(5,0),[AdventureWorks2008].[Sales].[SalesOrderDetail].[OrderQty] as [d].[OrderQty],0),(0.000000))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                  1           5           3           Compute Scalar      
    5                    4                                     |--Clustered Index Seek(OBJECT:([AdventureWorks2008].[Sales].[SalesOrderDetail].[PK_SalesOrderDetail_SalesOrderID_SalesOrderDetailID] AS [d]), SEEK:([d].[SalesOrderID]=[AdventureWorks2008].[Sales].[SalesOrderHeader].[SalesOrderID] as [h].[SalesOrderID]),  WHERE:([AdventureWorks2008].[Sales].[SalesOrderDetail].[SalesOrderID] as [d].[SalesOrderID]>=(1) AND [AdventureWorks2008].[Sales].[SalesOrderDetail].[SalesOrderID] as [d].[SalesOrderID]<=(999999) AND isnull((CONVERT_IMPLICIT(numeric(19,4),[AdventureWorks2008].[Sales].[SalesOrderDetail].[UnitPrice] as [d].[UnitPrice],0)*((1.0)-CONVERT_IMPLICIT(numeric(19,4),[AdventureWorks2008].[Sales].[SalesOrderDetail].[UnitPriceDiscount] as [d].[UnitPriceDiscount],0)))*CONVERT_IMPLICIT(numeric(5,0),[AdventureWorks2008].[Sales].[SalesOrderDetail].[OrderQty] as [d].[OrderQty],0),(0.000000))<(100.000000)) ORDERED FORWARD)  1           6           5           Clustered Index Seek

and

Rows                 Executes             StmtText                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              StmtId      NodeId      Parent      PhysicalOp          
-------------------- -------------------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ----------- ----------- ----------- --------------------
5                    1                    SELECT    h.SalesOrderID, h.OrderDate, d.LineTotal
FROM    Sales.SalesOrderDetail d
INNER JOIN Sales.SalesOrderHeader h ON h.OrderDate = '20010707' AND d.SalesOrderID = h.SalesOrderID
WHERE   d.LineTotal < 100                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          1           1           0           NULL                           NULL                           NULL                                                                                                                                                                               
0                    0                      |--Compute Scalar(DEFINE:([d].[LineTotal]=[AdventureWorks2008].[Sales].[SalesOrderDetail].[LineTotal] as [d].[LineTotal]))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          1           2           1           Compute Scalar      
5                    1                           |--Nested Loops(Inner Join, OUTER REFERENCES:([h].[SalesOrderID]))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             1           3           2           Nested Loops        
4                    1                                |--Index Seek(OBJECT:([AdventureWorks2008].[Sales].[SalesOrderHeader].[IX_SalesOrderHeader_OrderDate] AS [h]), SEEK:([h].[OrderDate]='2001-07-07 00:00:00.000') ORDERED FORWARD)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          1           4           3           Index Seek          
0                    0                                |--Compute Scalar(DEFINE:([d].[LineTotal]=isnull((CONVERT_IMPLICIT(numeric(19,4),[AdventureWorks2008].[Sales].[SalesOrderDetail].[UnitPrice] as [d].[UnitPrice],0)*((1.0)-CONVERT_IMPLICIT(numeric(19,4),[AdventureWorks2008].[Sales].[SalesOrderDetail].[UnitPriceDiscount] as [d].[UnitPriceDiscount],0)))*CONVERT_IMPLICIT(numeric(5,0),[AdventureWorks2008].[Sales].[SalesOrderDetail].[OrderQty] as [d].[OrderQty],0),(0.000000))))                                                                                                                                                                                                                                                                                                                                                                                                                                                                  1           5           3           Compute Scalar      
5                    4                                     |--Clustered Index Seek(OBJECT:([AdventureWorks2008].[Sales].[SalesOrderDetail].[PK_SalesOrderDetail_SalesOrderID_SalesOrderDetailID] AS [d]), SEEK:([d].[SalesOrderID]=[AdventureWorks2008].[Sales].[SalesOrderHeader].[SalesOrderID] as [h].[SalesOrderID]),  WHERE:([AdventureWorks2008].[Sales].[SalesOrderDetail].[SalesOrderID] as [d].[SalesOrderID]>=(1) AND [AdventureWorks2008].[Sales].[SalesOrderDetail].[SalesOrderID] as [d].[SalesOrderID]<=(999999) AND isnull((CONVERT_IMPLICIT(numeric(19,4),[AdventureWorks2008].[Sales].[SalesOrderDetail].[UnitPrice] as [d].[UnitPrice],0)*((1.0)-CONVERT_IMPLICIT(numeric(19,4),[AdventureWorks2008].[Sales].[SalesOrderDetail].[UnitPriceDiscount] as [d].[UnitPriceDiscount],0)))*CONVERT_IMPLICIT(numeric(5,0),[AdventureWorks2008].[Sales].[SalesOrderDetail].[OrderQty] as [d].[OrderQty],0),(0.000000))<(100.000000)) ORDERED FORWARD)  1           6           5           Clustered Index Seek 
```

如果您将这些计划与 WinMerge 进行比较，您将看到不同之处： ![在此处输入图像描述](../Images/ca05784e29c6a460866cf8b40c5dd7f1.png)

对于`NodeId=1`（代表最终结果集的最后一步`SELECT ...`），您会得到差异，因为 SQL 语句不同。但是，对于前面的步骤 ( `NodeId=2..6`)，有`no differences`.

**注意 1**：在一些奇怪的情况下（`ANSI_NULSS ON/OFF`），你可能会得到 diff。结果和差异。执行计划：

```
SET ANSI_NULLS ON;

SELECT  *
FROM    (VALUES (1,100),(2,200),(3,NULL)) AS Customer(CustomerID,Limit)
INNER JOIN (VALUES (11,1),(12,1),(13,2),(14,3)) AS [Order](OrderID,CustomerID) 
ON      Customer.CustomerID=[Order].CustomerID 
AND     Customer.Limit=NULL

SET ANSI_NULLS OFF;

SELECT  *
FROM    (VALUES (1,100),(2,200),(3,NULL)) AS Customer(CustomerID,Limit)
INNER JOIN (VALUES (11,1),(12,1),(13,2),(14,3)) AS [Order](OrderID,CustomerID) 
ON      Customer.CustomerID=[Order].CustomerID 
WHERE   Customer.Limit=NULL

SET ANSI_NULLS ON; 
```

结果：

```
CustomerID  Limit       OrderID     CustomerID
----------- ----------- ----------- -----------
(0 row(s) affected)

CustomerID  Limit       OrderID     CustomerID
----------- ----------- ----------- -----------
3           NULL        14          3
(1 row(s) affected) 
```

![在此处输入图像描述](../Images/0eb2e0b0cfcce6ab58a75a7f51a76226.png)

**注2**：`ANSI_NULLS`设置应始终为`ON`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T07:06:22.830

不要强调哪个会表现更好。您必须了解 SQL 是一种声明性语言而不是一种过程性语言。简单来说，您的查询将由查询优化器转换为将要运行的实际代码。在所有可能的情况下，这将是完全相同的。

您可以查看查询计划确定，但即使它们不同，这种过早的优化也是浪费时间。当您知道自己有问题时进行优化，而不是在编写查询之前进行优化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T06:48:54.000

它们是相同的，但应该在 JOIN 中。

在过去，JOIN 没有 ON，因此连接在 WHERE 中。但是 ANSI 在 JOIN 中引入了 ON，现代 SQL 引擎会自动将 WHERE 转换为 ON。

在您的场景中，重要的是您在 C.CityId 上有一个索引

# multithreading - 多线程 httpWebRequest 的低带宽

> ID：15049220
> 
> 赞同：0
> 
> 时间：2013-02-24T06:17:58.033
> 
> 标签：multithreading, httpwebrequest, bandwidth

我有一个 wcf 服务，它使用 httpwebrequest.beginGetResponse() 异步调用 web 服务。我的问题是，当我使用 TPL（最大并发：300）从另一个服务调用它时，我的带宽下降并且无法连接到互联网。有没有人有一个好的解决方案来限制这种不良影响？我已经尝试在配置中进行配置

```
<connectionManagement>
    <add address="*" maxconnection="2000" />
</connectionManagement> 
```

但这不起作用

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:39:12.770

我明白了...在我的 wcf 服务中，我替换

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.PerSession)] 
```

和

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.PerCall)] 
```

现在工作正常。谁有解释？

# java - 为什么会出现模式不匹配？

> ID：15049222
> 
> 赞同：0
> 
> 时间：2013-02-24T06:18:05.950
> 
> 标签：java, regex

在尝试匹配以下模式时：

```
String regex_2 = "w+ w+ [d-]{10}";
System.out.println("Dev Anand 98-76-543210".matches(regex_2)); 
```

我得到`false`作为输出。这是为什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T06:28:53.973

如果要匹配数字，则需要`\d`，而不是`d`字符类。同样，您还需要`\w`代替`w`匹配“单词”字符。最后，您的号码是 12 个字符长（10 个数字加上两个破折号），而不是 10 个。把它们放在一起，这应该可以工作：

```
String regex_2 = "\\w+ \\w+ [\\d-]{12}";
System.out.println("Dev Anand 98-76-543210".matches(regex_2)); 
```

（请注意，`\`当 Java 字符串文字的一部分时，需要加倍，以便`\`在字符串中以单个结尾。字符文字也是如此：`'\\'`是单个`\`字符。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T06:20:41.223

您需要使用`\`s 来指示[预定义的字符类](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)，这反过来又需要`\\`字符串文字中的 s，因为[`\`它是 Java 字符串中的转义字符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.6)。

```
String regex_2 = "\\w+ \\w+ [\\d-]{10}"; 
```

此外，[如果](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches%28%29)[*整个*](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches%28%29)[模式匹配，而不仅仅是其中的一部分，则](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches%28%29)[`String#matches(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29)返回，因此您要么需要使用不同的方法（例如）`true` [](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches%28%29)*[`Matcher#find()`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)*

 *```
Pattern.compile("\\w+ \\w+ [\\d-]{10}")
    .matcher("Dev Anand 98-76-543210")
    .find(); // true 
```

或不同的模式：

```
"Dev Anand 98-76-543210".matches("\\w+ \\w+ [\\d-]{12}"); // true 
```

[http://ideone.com/Bn82cF](http://ideone.com/Bn82cF)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T06:30:56.940

尝试这个：

```
String regex_2 = "\\w+ \\w+ [\\d-]{12}"; 
```

你只匹配了其中的 10 个，而包括这两个`-`有 12 个*

# ios - 在后台线程上创建一个视图，将其添加到主线程上的主视图

> ID：15049224
> 
> 赞同：14
> 
> 时间：2013-02-24T06:18:44.543
> 
> 标签：ios, objective-c, xcode

我是 Objective C 的新手，来自 .NET 和 java 背景。

所以我需要异步创建一些 UIwebviews，我在我自己的队列上使用

```
 dispatch_queue_t queue = dispatch_queue_create("myqueue", NULL);
     dispatch_async(queue, ^{
        // create UIwebview, other things too
             [self.view addSubview:webView];
        }); 
```

正如您想象的那样，这会引发错误：

```
 bool _WebTryThreadLock(bool), 0xa1b8d70: Tried to obtain the web lock from a thread other  
   than the main thread or the web thread. This may be a result of calling to UIKit from a  
   secondary thread. Crashing now... 
```

那么如何在主线程上添加子视图呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-24T07:52:08.363

由于您已经在使用调度队列。我不会使用`performSelectorOnMainThread:withObject:waitUntilDone:`，而是在主队列上执行子视图添加。

```
dispatch_queue_t queue = dispatch_queue_create("myqueue", NULL);
dispatch_async(queue, ^{
    // create UIwebview, other things too

    // Perform on main thread/queue
    dispatch_async(dispatch_get_main_queue(), ^{
        [self.view addSubview:webView];
    });
}); 
```

`UIWebView`可以在后台队列上实例化。但是要将其添加为子视图，您必须在主线程/队列上。从`UIView`文档中：

**线程注意事项**

对应用程序用户界面的操作必须在主线程上进行。因此，您应该始终从应用程序主线程中运行的代码调用 UIView 类的方法。唯一可能不是绝对必要的情况是在创建视图对象本身时，但所有其他操作都应在主线程上进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T06:21:13.427

大多数 UIKit 对象，包括 的实例`UIView`，**只能**从主线程/队列中操作。您不能将消息发送到`UIView`任何其他线程或队列上。这也意味着您不能在任何其他线程或队列上创建它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T07:24:36.213

正如 rob 所说，UI 更改应该只在主线程上完成。您正在尝试从辅助线程添加。将您的代码`[self.view addSubview:webView];`更改为

`[self.view performSelectorOnMainThread:@selector(addSubview:) withObject:webView waitUntilDone:YES];`

# android - 在片段上渲染谷歌地图时出现黑色视图

> ID：15049225
> 
> 赞同：0
> 
> 时间：2013-02-24T06:18:46.747
> 
> 标签：android, google-maps, google-maps-api-2, slidingmenu

我正在使用 Android 的滑动菜单这里是[链接](https://github.com/jfeinstein10/SlidingMenu)，当我在渲染的地图片段上滑动时，滑动菜单变为空白。

这是我的地图片段代码。

```
public class BasicMapActivity extends SherlockFragment {
    private MapView mMapView;
    private GoogleMap mMap;

    @Override
    public View onCreateView(LayoutInflater inflater, 
                             ViewGroup container,
                             Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.basic_demo, null);
        // view.setBackgroundColor(0x00000000);
        mMapView = (MapView) view.findViewById(R.id.map);
        container.requestTransparentRegion(mMapView);
        mMapView.onCreate(savedInstanceState);
        return view;
    }
} 
```

这是我在其中渲染地图的家庭活动。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_home_frame);
    getSupportFragmentManager()
            .beginTransaction()
            .replace(R.id.home_screen, new BasicMapActivity())
            .commit();

    getSlidingMenu().setSecondaryMenu(
            getLayoutInflater().inflate(R.layout.resq_events_frame, null));
    getSupportFragmentManager()
            .beginTransaction()
            .replace(R.id.resq_events_screen, new EventsFragment())
            .commit();

    // set the Behind View
    setBehindContentView(R.layout.activity_settings_frame);

    getSupportFragmentManager()
            .beginTransaction()
            .replace(R.id.settings_screen, new SettingsFragment())
            .commit();

    // customize the SlidingMenu
    getSlidingMenu().setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
} 
```

我的 XML 文件看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/home_screen"
    android:layout_width="match_parent"
    android:layout_height="match_parent">        
</FrameLayout> 
```

如何克服这个问题？

这是图像的外观。

![在此处输入图像描述](../Images/a062e6c7d29780fac0525db0f8867a21.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-13T13:29:59.667

问题是由于 GoogleMap，您必须将此**map:zOrderOnTop="true"**添加到您的 XML 地图布局中，例如

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" >

    <fragment
        android:name="com.google.android.gms.maps.SupportMapFragment"
        xmlns:map="http://schemas.android.com/apk/res-auto"         
        android:id="@+id/map" 
        android:layout_width="match_parent" 
        android:layout_height="match_parent"
        map:zOrderOnTop="true" />

</LinearLayout> 
```

# asp.net-mvc - ASP.NET MVC 中的单元测试 Javascript 和访问 Html Helper 和模型的 Knockout

> ID：15049226
> 
> 赞同：0
> 
> 时间：2013-02-24T06:18:55.597
> 
> 标签：asp.net-mvc, unit-testing, knockout.js

我使用 Knockout 编写了一个视图模型，例如：

```
@model Application.Models.PageModel

<script type="text/javascript">

    $(function () {

    var publishUrl = '@Html.Raw(Url.Action<Application.Controllers.PageController>(x => ...;

    var initialData = @Html.Raw(new JavaScriptSerializer().Serialize(Model));

.... 
```

我的问题是如何仅针对 javascript 进行单元测试：javascript 取决于 - Html Helper (@Html.Raw...) 和 - @Html.Raw(...) 和 - Model

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:06:01.880

代码应该以可以进行单元测试的方式编写。在创建新的视图模型对象期间创建一个视图模型并将值传递给视图模型。

**定义视图模型**

```
function ViewModel(publishUrl, initialData)
{
   this.publishUrl=publishUrl;
   this.initialData=initialData;
} 
```

创建视图模型对象并传入外部依赖项的值，这样您就可以通过传递模拟值来测试视图模型。

**创建视图模型并传入外部依赖值**

```
var _viewModel = new ViewModel (@Html.Raw(Url.Action<Application.Controllers.PageController>(x => ...), @Html.Raw(new JavaScriptSerializer().Serialize(Model)) ) 
```

如您所知，视图模型总是可以被淘汰。

```
ko.applyBindings(_viewModel) 
```

您将一直在测试其中的 ViewModel 逻辑，因为它是松散耦合的，您应该能够传入任何您需要的值来测试 viewmodel 内部的逻辑。

# javascript - 制作处理密集型网络代码（国际象棋引擎）

> ID：15049227
> 
> 赞同：1
> 
> 时间：2013-02-24T06:18:57.313
> 
> 标签：javascript, c++, chess

我在**Processing**（一种简化的 Java 语言）中制作了一些国际象棋引擎，并想在网站上制作一个。我猜 JavaScript 将是最明显的东西，但我想知道在我进入它之前是否还有其他选择。我从来没有为网络制作过处理密集型的东西。

我环顾四周，似乎可以使 C++ 以某种方式与 Web 代码一起使用，但我从未这样做过，也不太了解它。是否可以做一些低强度的事情，比如在 JavaScript 中绘图和在 C++ 中生成移动？有更好的选择吗？

**编辑**：我将**处理**（语言）以粗体表示以区分它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:24:34.053

这取决于您想如何构建它。

如果你想让它在没有服务器端支持的情况下运行，你将非常受限于 JavaScript。（当然，您实际上可以托管现有的 Java 代码和库，可以作为 Java 小程序使用 - 或 Flash 或其他插件中的东西 - 但特别是考虑到 HTML 5 等，重点是 JavaScript。）

否则，您可以使用 JavaScript 实现 UI 和其他元素，并使用 AJAX 让它与后端服务器进行通信/卸载繁重的处理。（此时，您基本上需要托管一个国际象棋引擎以供您的网站使用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T06:25:17.263

如果您正在寻找跨浏览器客户端解决方案，那么没有单一的跨浏览器方式可以在查看器的浏览器中使用 C++。跨浏览器解决方案包括 javascript（推荐）、java（在台式机上逐步淘汰，通常在移动设备上不可用）和 Adob​​e Flash（在移动设备上不可用）。

如果您想要全部在客户端，我建议您使用客户端 javascript 编写并在作为单独执行线程的 webworkers 中进行尽可能多的处理。这些单独的线程可以根据需要进行尽可能多的计算，但需要使用消息传递与主 javascript 线程进行通信，以便实际修改 DOM 或与用户交互。

* * *

或者，作为浏览器 Web 应用程序，您可以将国际象棋逻辑保存在 C++ 或任何您想使用的服务器端语言中，并使用客户端 Ajax 调用请求服务器计算下一步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T06:27:02.480

用您想要的任何语言编写国际象棋引擎。创建一个与您的国际象棋引擎通信的接口，或者更好地使用现有的标准国际象棋引擎接口。使用以下两个“标准”接口之一

[http://en.wikipedia.org/wiki/Chess_Engine_Communication_Protocol](http://en.wikipedia.org/wiki/Chess_Engine_Communication_Protocol) [http://en.wikipedia.org/wiki/Universal_Chess_Interface](http://en.wikipedia.org/wiki/Universal_Chess_Interface)

一旦您彻底调试了您的国际象棋引擎并对其感到满意，您就可以将为其编写 Web UI 的问题作为一个完全独立的问题来处理。您可以通过您选择的中间层完成国际象棋引擎服务器和网络服务器/网站之间的通信。一种这样的选择是：

[http://en.wikipedia.org/wiki/Ajax_（编程）](http://en.wikipedia.org/wiki/Ajax_(programming))

此外，如果您使用标准国际象棋界面，您可以将自己的国际象棋引擎换成满足您选择的界面的任何第三方国际象棋引擎。

# objective-c - 将 MM-dd-yy 格式的 NSString 转换为 NSDate

> ID：15049228
> 
> 赞同：1
> 
> 时间：2013-02-24T06:19:11.567
> 
> 标签：objective-c, nsdate, nsdateformatter

在我的应用程序中，我得到一个日期为 01-22-12(MM-dd-yy) 的 NSString。现在我想将该字符串转换为 NSDate。我使用了下面的代码。但它给出的日期为 2012-01-04 05:00:00 +0000

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"MM-dd-yy"];
NSDate *dateFromString = [dateFormatter dateFromString:self.selectedWeek]; 
```

将我的字符串转换为 NSDate 的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:13:15.810

从你原来的问题我不完全清楚你是否想要：

1 字符串作为`NSDate`.

或者

2 能够`NSString`从`NSDate`实例中取回原始日期。

您的代码基本上是正确的。我只是运行了一个稍微改编的版本，它似乎工作正常：

```
NSString *dateString = @"01-22-12";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; 
[dateFormatter setDateFormat:@"MM-dd-yy"];
NSDate *date = [dateFormatter dateFromString:dateString];
NSString *outString = [dateFormatter stringFromDate:date];

NSLog(@"%@",date);
NSLog(@"%@",outString); 
```

这产生了：

```
2013-02-24 09:57:24.352 datesAgain.m.out[787:707] 2012-01-22 00:00:00 +0000
2013-02-24 09:57:24.352 datesAgain.m.out[787:707] 01-22-12 
```

因此，无论哪种方式，结果似乎都是您想要的。我怀疑您获得不正确值的原因是它`self.selectedWeek`没有您认为的值。我会在调试器中或使用`NSLog`. 如果您使用另一个格式字符串在其他地方创建它，请注意它们可能会很棘手并且有点不直观 - 例如`s`意味着秒，但`S`意味着几分之一秒。[此处](http://www.unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns)提供的文档-[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW1)的最新 Unicode 格式标准(ios6.0/OSX 10.8) - 也链接到上一个链接，所有以前的相关标准也是如此

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:57:23.657

您可以使用[descriptionWithCalendarFormat:timeZone:locale:](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/descriptionWithCalendarFormat%3atimeZone%3alocale%3a)

```
NSString * mydate =  [dateFromString descriptionWithCalendarFormat:@"%Y-%m-%d"
                                timezone:nil
                                  locale:nil]; 
```

# iphone - iPhone 应用程序的内存释放有多重要？

> ID：15049229
> 
> 赞同：-3
> 
> 时间：2013-02-24T06:19:14.097
> 
> 标签：iphone, objective-c, memory, memory-management

我是Objective C的初学者。我知道java编程并且在介绍级别的课程中，内存释放不包括在内（我不知道是否有更高级的课程或java编译器处理这个）。但是，即使在介绍级别，我也需要为 Objective C 程序手动释放内存。我知道这样做是一个好习惯，但它有多重要？特别是如果我想开发 iPhone 应用程序，内存释放是否非常紧迫（不这样做会导致处理速度显着减慢）？通过 iPhone 应用程序，我不是在谈论具有梦幻般的视觉效果、高质量音效和其他可能使内存释放变得重要的东西的大型 3D 游戏。我只是想开发一些小工具，比如计算器，提醒，或者日记本。那么内存释放有多重要呢？

我认为在过去，当 C 语言程序在可能没有太多内存和处理速度的超级旧计算机上运行时，内存释放很重要。但考虑到 iPhone 是一款相当先进的设备，手动释放内存是不是有点过时了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T06:30:33.883

> 我知道 java 编程，并且在介绍级别的课程中，不包括内存释放（我不知道是否有更高级的课程或 java 编译器处理这个）。

不完全是编译器，但 Java VM 有一个垃圾收集器，所以不必担心内存管理。

> 那么内存释放有多重要呢？

**很重要。**无论是运行时还是执行它的程序员，无论您使用 MRC 还是 ARC（在 Objective-C 中），您都应该通过正确管理内存来尽可能降低应用程序的内存指纹。

> 我认为在过去，当 C 语言程序在可能没有太多内存和处理速度的超级旧计算机上运行时，内存释放很重要。但考虑到 iPhone 是一款相当先进的设备，手动释放内存是不是有点过时了？

哦。我才明白为什么很多应用程序会占用我 iPhone 的所有可用 RAM。那是因为这是当今“开发者”的态度。我懂了...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T06:43:43.287

这取决于你在做什么。一般来说，正确释放内存是非常重要的，否则它会堆积并吃掉所有的内存。这对于像游戏这样的东西会很快发生，或者对于只有文本和数字的东西会非常缓慢地发生，尽管它仍然会在那里。然而，内存释放并不像听起来那么难。如果您使用的是 ARC，您几乎可以忘记它（但要注意有些奇怪的情况）。即使您不使用 ARC，Apple 也会为您做很多事情，例如在逻辑时间（例如在删除 viewController 时）对对象调用 release。

此外，内存管理通常只适用于使用面向对象的代码。如果你只是做一个简单的计算器，你可能不需要任何面向对象的东西，你可以在浮点数中工作。一个只处理浮点数的简单应用程序将没有内存管理。

# android - Android Proguard - dontobfuscate 不会禁用混淆

> ID：15049232
> 
> 赞同：13
> 
> 时间：2013-02-24T06:19:50.703
> 
> 标签：android, obfuscation, proguard

关于 android proguard 混淆的问题。出于某种原因，当使用 ant 生成 apk 时，我希望 proguard 缩小大小（删除未使用的类）但不进行名称混淆。在`proguard.cfg`中，我补充说：

```
-dontobfuscate 
```

中的所有其他人`proguard.cfg`要么是`-dontwarn`要么`-keep class`。但是反编译生成的apk( `dex2jar`)后，发现很多名字还是被混淆了。为什么会发生这种情况？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-09-08T10:47:57.467

由于没有人真正回答这个问题，这里是解决问题的帖子的链接：[Using Proguard with Android without obfuscation](https://stackoverflow.com/questions/9651703/using-proguard-with-android-without-obfuscation)

基本上，您需要在`-dontobfuscate`指令下方添加的是：

`-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*,!code/allocation/variable`

这里重要的是：`!code/allocation/variable`

# ruby - 为什么我在 Ruby 中收到分段错误错误？

> ID：15049234
> 
> 赞同：4
> 
> 时间：2013-02-24T06:21:02.153
> 
> 标签：ruby, rspec, ruby-1.9.3

在运行 RSpec 时，***有时***我会收到以下错误。只需保存文件即可运行 RSpec，有时它会消失。

```
[BUG] Segmentation fault
ruby 1.9.3p374 (2013-01-15 revision 38858) [x86_64-darwin11.4.2]

-- Control frame information -----------------------------------------------
c:0001 p:0000 s:0002 b:0002 l:000f38 d:000f38 TOP   

* Loaded features:

0 enumerator.so
1 /Users/george/.rbenv/versions/1.9.3-p374/lib/ruby/1.9.1/x86_64-darwin11.4.2/enc/encdb.bundle
2 /Users/george/.rbenv/versions/1.9.3-p374/lib/ruby/1.9.1/x86_64-darwin11.4.2/enc/trans/transdb.bundle
3 /Users/george/.rbenv/versions/1.9.3-p374/lib/ruby/1.9.1/rubygems/defaults.rb
4 /Users/george/.rbenv/versions/1.9.3-p374/lib/ruby/1.9.1/x86_64-darwin11.4.2/rbconfig.rb
5 /Users/george/.rbenv/versions/1.9.3-p374/lib/ruby/1.9.1/rubygems/deprecate.rb
6 /Users/george/.rbenv/versions/1.9.3-p374/lib/ruby/1.9.1/rubygems/exceptions.rb 
```

我的代码中的错误是`NoMethodError: undefined method`.

为什么这会产生段错误错误？如何关闭详细的 473 行输出？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T20:03:31.213

这次可能是硬件问题。不完全是。我有一个类似的问题，当我更换电脑时，问题就消失了。

# sql - SQL - 如何将 varchar 转换为带大小写的 int

> ID：15049242
> 
> 赞同：2
> 
> 时间：2013-02-24T06:22:11.743
> 
> 标签：sql

我有一张这样的桌子

```
productId Inventory 
--------------------    
1            1
2            Ab
3            12.5
4            6
6            2 
```

如何选择库存为`int`和其他值为零，在`Inventory`哪里`varchar`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T06:28:20.760

假设这是 SQL Server，那么您可以这样做：

```
SELECT productid, 
  CAST((CASE isnumeric(inventory) 
          WHEN 0 THEN 0 
          ELSE CAST(Inventory AS DECIMAL(10, 2)) 
        END) AS INT) AS Inventory 
FROM tablename 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/378c2/10)

这会给你：

```
| PRODUCTID | INVENTORY |
-------------------------
|         1 |         1 |
|         2 |         0 |
|         3 |        12 |
|         4 |         6 |
|         6 |         2 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T06:32:49.903

如果您希望像 12.5 这样的十进制值以整数而不是小数的形式出现，则必须执行以下操作来修剪小数位：

```
select case when isNumeric(Inventory) = 1 then cast(cast(Inventory as DECIMAL(10,0)) as INT) else 0 end as Inventory_INT, productId
from PRODUCTS 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T06:26:14.367

```
select case when isnumeric(inventory) then
       cast(inventory as INT)
else
       0
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T09:51:43.393

你使用起来更安全`PatIndex()`。*IsNumeric*不是在 sql-server 中检查数值的最佳方法，因为它也会为货币符号返回 1（例如，`isnumerc('$')` *等于*1）[msdn](http://msdn.microsoft.com/en-gb/library/ms186272.aspx)。

以下示例不四舍五入十进制值。如果您需要向上取整值，则将库存转换为小数。[Sql-Demo](http://sqlfiddle.com/#!3/6e48a/7)使用`Patindex()`函数。

```
select productId, case patindex('%[0-9]%',inventory) 
                  when 1 then convert(int,convert(decimal(10,2),inventory))
                  else 0 end inventory
from T

| PRODUCTID | INVENTORY |
-------------------------
|         1 |         1 |
|         2 |         0 |
|         3 |        12 |--NOTE
|         4 |         6 |
|         6 |         2 |
|         7 |         0 |--Extra data row added with '$' 
```

从库存中获取四舍五入的值；

```
select productId, case patindex('%[0-9]%',inventory) 
                  when 1 then convert(decimal,inventory)
                  else 0 end inventory
from T

| PRODUCTID | INVENTORY |
-------------------------
|         1 |         1 |
|         2 |         0 |
|         3 |        13 |--NOTE
|         4 |         6 |
|         6 |         2 |
|         7 |         0 |--Extra data row added with '$' 
```

# r - 在R中合并后合并列的函数

> ID：15049243
> 
> 赞同：-1
> 
> 时间：2013-02-24T06:22:22.400
> 
> 标签：r, merge

我想在合并两个数据框后合并列。现在，我正在编写 ifelse 语句来为每个变量获取一个统一的列。我想要一个函数来选择应该覆盖另一列的数据框（即 x）。

```
df$source<-ifelse(df$source.x=='',df$source.y,df$source.x)
df$id<-ifelse(df$id.x=='',df$id.y,df$id.x)
df$profile_url<-ifelse(df$profile_url.x=='',df$profile_url.y,df$profile_url.x) 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T06:32:20.667

这应该有望做到。（注意，没有经过测试，因为没有样本数据）

```
fixedColumn <- function(colm, myDF, keepx=TRUE) { 
  x <- myDF[[paste0(colm, ".x")]]
  y <- myDF[[paste0(colm, ".y")]]

  if(keepx)
    return(ifelse(x=='', y, x))
  # else  
  ifelse(y=='', x, y)
}

# columns that need fixing.  Don't include the suffixes
cols <- c("source", "id", "url")

# fix the .x columns
df[, paste0(cols, ".x")]  <- sapply(cols, fixedColumn, df)

# delete the .y columns
for (cc in paste0(cols, ".y"))
  df[[cc]] <- NULL 
```

使用@agstudy 的样本数据：

```
> df
  Row.names id.x source.x url.x
1         1    2        2     3
2         2    3        1     3
3         3    3        1     2
4         4    3        2     2
5         5    3        2     2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T07:36:46.553

为了避免交换列的这一步骤，您可以通过`sqldf`包使用 SQL 来交换列（如果您的真正问题涉及可以同时完成的合并）。使用`CASE`...`WHEN`语法，您可以编写与我们相同的 if/else 逻辑：

```
library(sqldf)
colnames(df) <- gsub('[.]','_',colnames(df))
sqldf(" SELECT 
             CASE  url_x    WHEN '' THEN url_y    ELSE url_x END as url ,
             CASE  source_x WHEN '' THEN source_y ELSE source_x END as source,
             CASE  id_x  WHEN '' THEN id_y ELSE id_x END as id 
      FROM df") 
```

**可重现的例子**

我们用一个可重现的例子来测试它：

```
# create some data
set.seed(1234)
df1 <- matrix(sample(c('a','b','d',''),3*5,rep=T),ncol=3)
df2 <- matrix(sample(c('c','b','','a'),3*5,rep=T),ncol=3)
colnames(df1) <- c('id','source','url')
colnames(df2) <- c('id','source','url')
df <- merge(df1,df2,by=0)   

# run
library(sqldf)
colnames(df) <- gsub('[.]','_',colnames(df))
sqldf(" SELECT 
             CASE  url_x    WHEN '' THEN url_y    ELSE url_x END as url ,
             CASE  source_x WHEN '' THEN source_y ELSE source_x END as source,
             CASE  id_x  WHEN '' THEN id_y ELSE id_x END as id 
      FROM df")

 url source id
1   d      d  a
2   d      a  d
3   b      a  d
4   a      d  d
5   b      d  c 
```

哪里`df`是：

```
Row_names id_x source_x url_x id_y source_y url_y
1         1    a        d     d    a        b     a
2         2    d        a     d    b        b      
3         3    d        a     b    b        c     a
4         4    d        d          c        c     a
5         5             d     b    c        c     c 
```

**使用辅助函数**

**(1)**如果我们有很多这些，那么我们可能想要使用一个辅助函数，该函数利用`fn$`gsubfn 包中的实现准 perl 样式的字符串替换：

```
xy <- function(s) {
    fn$identity("case $s_x when '' then $s_y else $s_x end as $s")
}

fn$sqldf("select `xy('url')`, `xy('source')`, `xy('id')` from df") 
```

**(2)**或者这样做——将 SQL 语句存储到`s`：

```
s <- fn$identity("select `xy('url')`, `xy('source')`, `xy('id')` from df")
sqldf(s) 
```

**更多信息**

请参阅[sqldf 主页](http://sqldf.googlecode.com)和[gsubfn 主页](http://gsubfn.googlecode.com)。`fn$`

# android - 用户 Agnet（浏览器/Chrome）以编程方式

> ID：15049247
> 
> 赞同：0
> 
> 时间：2013-02-24T06:22:49.753
> 
> 标签：android, google-chrome, browser, user-agent

我是 android 平台上的新开发人员，现在我有 Sony Xperia ST26，我注意到浏览器（com.android.browser）和 Chrome（com.android.chrome）之间的差异用户代理。

```
Chrome:  Mozilla/5.0 (Linux; Android 4.0.4; **ST26i Build**/11.0.A.7.5) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.166 Mobile Safari/535.19

Browser:  Mozilla/5.0 (Linux; U; Android 4.0.4; iw-il; **SonyST26i Build**/11.0.A.7.5) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30 
```

我需要一种方法来获取这些用户代理，

我尝试使用 WebView 像这样：

```
userAgent = new WebView(this).getSettings().getUserAgentString(); 
```

并且该字符串是“默认”用户 agnet 而不是嵌入式浏览器。

我也尝试这样做，现在浏览器（应用程序）显示正确的用户 agnet，但我需要将此 HTML 网站插入字符串。

```
String url = "http://whatsmyuseragent.com/";
String packageName = "com.android.browser";  
//String packageName ="com.android.chrome";
Intent internetIntent = new Intent(Intent.ACTION_VIEW,Uri.parse(url)); 
internetIntent.setPackage(packageName);
startActivity(internetIntent); 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:15:03.097

It looks like you are trying to get the user agent of the embedded webview. If you have Chrome installed, the embedded WebView still remains the same webview that is distributed with the OS. There is no Chromium based WebView.

You can also use `System.getProperty("http.agent")` as outlined in [http://cdrussell.blogspot.co.uk/2012/09/programmatically-get-user-agent-string.html](http://cdrussell.blogspot.co.uk/2012/09/programmatically-get-user-agent-string.html)

# c++ - 用户定义的 dll 引用另一个用户定义的 dll 时的链接器错误

> ID：15049255
> 
> 赞同：1
> 
> 时间：2013-02-24T06:25:08.443
> 
> 标签：c++, visual-c++, dll, linker-errors

我试图使用协议层设计模式来实现协议栈： [http ://www.eventhelix.com/realtimemantra/patterncatalog/protocol_layer.htm](http://www.eventhelix.com/realtimemantra/patterncatalog/protocol_layer.htm)

在我们的项目中，我将所有层作为单独的 dll。我拥有的图层是：

1.  应用层dll

2.  LLC层dll

3.  MAC层dll

4.  物理层dll

我在同一个解决方案中有另一个项目，它实现了设计模式并实现了协议层的一般功能。我所有的层都继承自协议层基类。项目之间的依赖关系如下： Protocol Layer Design Pattern dll：无依赖 Physical Layer dll：Protocol Design Pattern dll MAC Layer dll：Protocol Design Pattern dll and Physical Layer dll LLC Layer dll：Protocol Design Pattern dll and MAC Layer dll Application Layer dll：协议设计模式 dll 和 LLC 层 dll

基于设计模式，我们的每一层都有指向它上面和下面的层的指针。我们设计的流程是这样的：在应用层构造函数中，我们创建 LLC 层的对象，然后 LLC 层创建 Mac 层，MAC 层又创建物理层。它们都使用指针链接。

我的协议设计模式项目 dll 和物理层 dll 正确构建。但其他 dll 版本正在给出链接器错误。向底层的构造函数说未解决的外部问题。这些是我得到的错误。

====================================

> 1.  1>phLayer.obj : 错误 LNK2019: 无法解析的外部符号“public:
>     virtual __thiscall CProtocolLayer::~CProtocolLayer(void)”
>     (??1CProtocolLayer@@UAE@XZ) 在函数
>     __unwindfunclet$??0CPhysicalLayer@@QAE@PAVCProtocolLayer@中引用@@Z$0 1>phLayer.obj : 错误 LNK2019:函数
>     “
>     public: __thiscall CPhysicalLayer::CPhysicalLayer(class CProtocolLayer *)" (??0CPhysicalLayer@@QAE@PAVCProtocolLayer@@@Z) 1>phLayer.obj：错误 LNK2019：未解析的外部符号“公共：__thiscall CTransmitProtocolHandler::CTransmitProtocolHandler(类 CProtocolLayer *)"
>     (??0CTransmitProtocolHandler@@QAE@PAVCProtocolLayer@@@Z) 在函数“public: __thiscall CPhysicalLayer::CPhysicalLayer(class CProtocolLayer *)”中引用 (??0CPhysicalLayer@@QAE@PAVCProtocolLayer@@@Z)
>     1>phLayer.obj : 错误 LNK2019: 未解析的外部符号“public:
>     __thiscall CProtocolLayer::CProtocolLayer(class CProtocolLayer *,class CProtocolLayer *)” (??0CProtocolLayer@@QAE@PAV0@0@Z) 在函数“public: __thiscall
>     CPhysicalLayer::CPhysicalLayer ”中引用(class CProtocolLayer *)"
>     (??0CPhysicalLayer@@QAE@PAVCProtocolLayer@@@Z) 1>phLayer.obj : error LNK2019: unresolved external symbol "public: int __thiscall
>     CProtocolPacket::getBodyLength(void)"
>     (?getBodyLength@CProtocolPacket@@QAEHXZ) 在函数中引用
>     “public: virtual void __thiscall CPhysicalLayer::Data_req(class
>     CProtocolPacket *)”
>     (?Data_req@CPhysicalLayer@@UAEXPAVCProtocolPacket@@@Z) 1>phLayer.obj: 错误 LNK2019: 无法解析的外部符号“public: void __thiscall CReceiveProtocolHandler::Handle_Receive (class CProtocolPacket *)"
>     (?Handle_Receive@CReceiveProtocolHandler@@QAEXPAVCProtocolPacket@@@Z) 在函数 "private: void __thiscall
>     CPhysicalLayer::dataRead(void)" (?dataRead@CPhysicalLayer@@AAEXXZ)
>     1>phLayer.obj 中引用：错误 LNK2019：
>     在
>     函数
>     “private:类 CProtocolPacket __thiscall
>     CPhysicalLayer::convertToProtocolPacket(class
>     std::basic_string,class
>     std::allocator >)"
>     (?convertToProtocolPacket@CPhysicalLayer@@AAE?AVCProtocolPacket@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator @D@2@@std@@@Z) 1>phLayer.obj : 错误 LNK2019: 无法解析的外部符号 "public:
>     void __thiscall CProtocolPacket::AddHeader(int,char *)"
>     (?AddHeader@CProtocolPacket@@QAEXHPAD@Z ) 在函数
>     “private: class CProtocolPacket __thiscall
>     CPhysicalLayer::convertToProtocolPacket(class
>     std::basic_string,class
>     std::allocator >)”
>     中引用 (?convertToProtocolPacket@CPhysicalLayer@@AAE?AVCProtocolPacket@@V?$basic_string@DU?$char_traits @D@std@@V?$allocator@D@2@@std@@@Z)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:00:22.327

你是如何构建exe的？我看到了，您只面临链接器问题。要么你必须以错误的顺序链接，要么一定有什么地方出错了。尝试以正确的顺序链接它们。这应该可以解决问题。如果没有，请提供更多信息。

# wpf - WPF 和 Prism 4.1 垃圾收集/内存问题

> ID：15049256
> 
> 赞同：0
> 
> 时间：2013-02-24T06:25:09.193
> 
> 标签：wpf, memory, memory-leaks, prism

我使用 WPF、.Net 4、Prism 4.1 和 Unity 构建了一个 Prism 应用程序。我正在使用 DirectoryModuleCatalog 在运行时查找模块。我的视图显示在 TabControl (MainRegion) 中。当我从该区域中删除视图时，视图和视图模型仍保留在内存中并且永远不会被垃圾收集 - tabitem 被删除。经过几个小时的搜索，我无法弄清楚我做错了什么。

这是我的引导程序：

```
public class Bootstrapper : UnityBootstrapper
{
    protected override void InitializeShell()
    {
        base.InitializeShell();
        App.Current.MainWindow = (Window)Shell;
        App.Current.MainWindow.Show();
    }

    protected override DependencyObject CreateShell()
    {
        var shell = new Shell();
        return shell;
    }

    protected override IModuleCatalog CreateModuleCatalog()
    {
        return new DirectoryModuleCatalog() { ModulePath = @".\Modules" };
    }
} 
```

这是我的模块：

```
[Module(ModuleName = "ModuleA")]
public class Module : IModule
{
    private IRegionManager _regionManager;

    public Module(IRegionManager regionManager)
    {
        _regionManager = regionManager;
    }

    public void Initialize()
    {
        var view = new UserControl1();
        //_regionManager.RegisterViewWithRegion("MainRegion", typeof(UserControl1));
        _regionManager.Regions["MainRegion"].Add(view, "ModuleA");
        _regionManager.Regions["MainRegion"].Activate(view);
    }
} 
```

这是添加到该区域的我的视图的视图模型：

```
public class ViewModel
{
    public DelegateCommand RemoveView { get; set; }

    public ViewModel()
    {
        RemoveView = new DelegateCommand(() =>
            {
                var regionManager = ServiceLocator.Current.GetInstance<IRegionManager>();
                var view = regionManager.Regions["MainRegion"].GetView("ModuleA");
                regionManager.Regions["MainRegion"].Deactivate(view);
                regionManager.Regions["MainRegion"].Remove(view);
            });
    }
} 
```

这是视图背后的代码：

```
public partial class UserControl1 : UserControl
{
    public UserControl1()
    {
        InitializeComponent();

        this.DataContext = new ViewModel();
    }
} 
```

我读过这可能是因为我正在实例化模块中的视图，或者可能是视图中的视图模型？当我使用 Red Gate Memory Profiler 并通过 DelegateCommand 删除视图时，视图和视图模型都被标记为无法进行垃圾收集。我没有正确切割的参考在哪里？

这是来自 Ants 的保留图：[https ://docs.google.com/file/d/0B4XjO9pUQxBXbGFHS1luNUtyOTg/edit?usp=sharing](https://docs.google.com/file/d/0B4XjO9pUQxBXbGFHS1luNUtyOTg/edit?usp=sharing)

这是一个显示问题的[测试解决方案。](https://docs.google.com/file/d/0B4XjO9pUQxBXVEtJaW8yYWV1SGs/edit?usp=sharing)

[另外，我也在CodePlex](http://compositewpf.codeplex.com/discussions/434331)上发布了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:42:38.390

看起来您的保留图中仍有对它的绑定引用。

阅读并理解以下内容：

[在 Windows Presentation Foundation 中使用数据绑定时可能会发生内存泄漏](http://support.microsoft.com/kb/938416)

我认为这可能是你的问题，但你没有显示你的实际绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:21:49.097

终于找到了我的问题的根本原因......

在我们的 Shell.xaml`IsDefault`中，我们将其中一个按钮绑定到 PasswordBox `IsKeyboardFocused`：

```
<Button Style="{DynamicResource RedSubmitButtonStyle}" IsDefault="{Binding ElementName=passwordBox1, Path=IsKeyboardFocused}" Command="{Binding LoginCommand}" Content="Login" Height="23" HorizontalAlignment="Left" Margin="145,86,0,0" Name="button1" VerticalAlignment="Top" Width="75" /> 
```

`IsKeyboardFocused`, 是根据 MSDN 的依赖属性 - 所以在这方面应该很好。

它与我们在密码框上的附加属性有关，该属性允许我们绑定到输入的密码。即使在我们隐藏了 ChildWindow（来自 WPF 工具包扩展）之后，焦点仍停留在该密码框上。因此，我没有使用 IsDefault，而是向 PasswordBox 添加了一个 keydown 事件，如果它是 Key.Enter，我将更改聚焦的 UI 控件并将此人登录到程序中。

这是我们的 Shell.xaml 文件的全部内容

```
<Grid x:Name="MainGrid" core:SharedResourceDictionary.MergedDictionaries="TabControlThemes;MenuThemes;ButtonThemes;DataGridThemes;TreeViewThemes;ComboBoxThemes;ListBoxThemes;GroupBoxThemes;ToggleSwitchThemes">

    <DockPanel>
        <ContentControl x:Name="menuContent" DockPanel.Dock="Top" prism:RegionManager.RegionName="MenuRegion" />
        <ContentControl DockPanel.Dock="Bottom" prism:RegionManager.RegionName="FooterRegion" />
        <ContentControl DockPanel.Dock="Top" prism:RegionManager.RegionName="MainContentRegion" />
    </DockPanel>

    <StackPanel Orientation="Horizontal" Panel.ZIndex="4" HorizontalAlignment="Right" VerticalAlignment="Top">
        <Button Visibility="{Binding IsFullScreenToggleVisible, Converter={StaticResource visConv}}" Command="{Binding ToggleFullScreen}" Height="50" Name="button4" Width="70" HorizontalAlignment="Right" Margin="0,10,10,0" VerticalAlignment="Top">
            <Button.Content>
                <TextBlock FontSize="12" FontWeight="Bold" TextWrapping="Wrap" TextAlignment="Center" HorizontalAlignment="Center" VerticalAlignment="Center" Text=" Toggle Full Screen" />
            </Button.Content>
        </Button>

        <Button Visibility="{Binding IsAppCloseButtonVisible, Converter={StaticResource visConv}}" Command="{Binding ShutdownApplication}" Height="50" Name="button3" Width="50" HorizontalAlignment="Right" Margin="0,10,10,0" VerticalAlignment="Top">
            <Button.Content>
                <Image Source="..\Graphics\close.png" Name="image1" />
            </Button.Content>
        </Button>
    </StackPanel>

    <xctk:ChildWindow Name="loginChildWindow" Panel.ZIndex="3" CloseButtonVisibility="Collapsed" FocusedElement="{Binding ElementName=usernameTextBox}" WindowStartupLocation="Center" WindowState="{Binding IsVisible, Mode=TwoWay, Converter={StaticResource boolConverter}}" IsModal="True" OverlayOpacity="1" Caption="Pioneer Login" Height="164" Width="261">
        <xctk:ChildWindow.OverlayBrush>
            <ImageBrush Stretch="None" Viewport="0,0,46,29" ViewportUnits="Absolute" ImageSource="../Graphics/escheresque.png" TileMode="Tile" />
        </xctk:ChildWindow.OverlayBrush>
        <xctk:BusyIndicator IsBusy="{Binding IsLoginBusy}" BusyContent="Authenticating...">
            <Grid>
                <TextBox GotFocus="usernameTextBox_GotFocus" Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}" Height="23" HorizontalAlignment="Left" Margin="99,20,0,0" Name="usernameTextBox" VerticalAlignment="Top" Width="120">
                    <TextBox.InputBindings>
                        <KeyBinding Key="Enter" Command="{Binding LoginCommand}" />
                    </TextBox.InputBindings>
                </TextBox>
                <Label Content="Username" Height="28" HorizontalAlignment="Left" Margin="28,18,0,0" Name="label1" VerticalAlignment="Top" />
                <Label Content="Password" Height="28" HorizontalAlignment="Left" Margin="29,47,0,0" Name="label2" VerticalAlignment="Top" />
                <PasswordBox attach:PasswordBoxAssistant.BindPassword="True" attach:PasswordBoxAssistant.BoundPassword="{Binding Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Height="23" HorizontalAlignment="Left" Margin="100,50,0,0" Name="passwordBox1" VerticalAlignment="Top" Width="120" />
                <Button Style="{DynamicResource RedSubmitButtonStyle}" IsDefault="{Binding ElementName=passwordBox1, Path=IsKeyboardFocused}" Command="{Binding LoginCommand}" Content="Login" Height="23" HorizontalAlignment="Left" Margin="145,86,0,0" Name="button1" VerticalAlignment="Top" Width="75" />
                <Button Style="{DynamicResource RedSubmitButtonStyle}" Command="{Binding LazyLoginCommand}" Visibility="{Binding IsDebugMode, Converter={StaticResource visConv}}" Content="Quick Login" Height="23" HorizontalAlignment="Left" Margin="23,87,0,0" Name="button2" VerticalAlignment="Top" Width="89" />
            </Grid>
        </xctk:BusyIndicator>
    </xctk:ChildWindow>

</Grid> 
```

# c++ - 使用 C/C++ 在 Ubuntu 中查找 Arduino 连接到哪个 TTY 端口

> ID：15049257
> 
> 赞同：2
> 
> 时间：2013-02-24T06:25:16.100
> 
> 标签：c++, ubuntu, serial-port, arduino

我正在用[C++](http://en.wikipedia.org/wiki/C++)编写一个程序，它需要通过[USB](http://en.wikipedia.org/wiki/Universal_Serial_Bus)与 Arduino 通信。每次 Arduino 重启时，Arduino 连接的端口都可能发生变化（例如，位于`/dev/ttyAMC0`、Arduino 重启、连接在`/dev/ttyAMC1`）。

我正在使用的代码是

```
#include <fcntl.h>
...
arduino = open("/dev/ttyAMC0", O_RDWR | O_NOCTTY | O_NDELAY);
if(arduino != -1) 
    fcntl(_arduino, F_SETFL, 0);
... 
```

每次 Arduino 更改端口位置时，我都必须在我的代码中手动更改它，然后重新编译我的程序。

有没有办法准确地确定 Arduino 连接到哪个端口，并将位置作为字符串返回给我（即“/dev/ttyACM1”）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T05:40:39.800

怎么样：

*   尝试打开`/dev/ttyACM0`
*   如果失败尝试打开`/dev/ttyACM0`

像这样的东西：

```
#define SERIALIDX_MIN   0
#define SERIALIDX_MAX   1

int idxSerialPortIndex = SERIALIDX_MIN;
char strSerialPort[oxFF];

while (true) {
   sprintf(strSerialPort, "/dev/ttyAMC%d", idxSerialPortIndex);
   arduino = open("/dev/ttyAMC0", O_RDWR | O_NOCTTY | O_NDELAY);
   if(arduino != -1) {
       fcntl(_arduino, F_SETFL, 0);
       ...  // read serial port here
   }
   if (++idxSerialPortIndex > SERIALIDX_MAX) 
       idxSerialPortIndex = SERIALIDX_MIN;
} 
```

如果您担心其他设备会出现`/dev/ttyACM0`，`/dev/ttyACM1`您可以让您的 Arduino 响应简单的命令字符串。如果它`ID`后面跟着 LF（或 CR/LF，取决于你的系统），它可以用一些合适的字符串来响应，比如`**I AM THE MOTHERBUSTING ARDUINO**`，你的 C/C++ 程序将知道它是否确实连接到 Arduino。如果没有收到预期的响应，C/C++ 程序可以打开下一个串行端口。

# ruby-on-rails - websocket-rails gem 和身份验证

> ID：15049262
> 
> 赞同：1
> 
> 时间：2013-02-24T06:25:56.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, websocket

在 websocket-rails 的[wiki](http://github.com/DanKnox/websocket-rails/wiki/Using-Private-Channels)上，它有以下使用[CanCan](http://github.com/ryanb/cancan) gem 的示例。

这怎么行？对于普通的 http 请求，发送的 cookie 具有标识用户的令牌，但是使用 websockets 发送原始数据并且没有发送 cookie 那么服务器如何使用 CanCan gem 识别用户是谁？

```
class AuthorizationController < WebsocketRails::BaseController
  def authorize_channels
    # The channel name will be passed inside the message Hash
    channel = Channel.find_by_name message[:channel]
    if can? :subscribe, channel
      accept_channel current_user
    else
      deny_channel {:message => 'authorization failed!'}
    end
  end
end 
```

编辑：

在下面`dispatcher`创建的时候，应该发送一个包含`Upgrade: websocket`cookie 的 http 请求。但在下一行`subscribe_private`没有创建 websocket 连接，因此它不是 http 请求，并且可能无法自动访问 cookie。

```
// connect to server like normal
var dispatcher = new WebSocketRails('localhost:3000/websocket');

// subscribe to the channel
var private_channel = dispatcher.subscribe_private('channel_name'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T08:06:27.967

它不完全是原始数据，它是将 http 协议升级为保持连接打开的套接字，如果您查看[wikipedia](http://en.wikipedia.org/wiki/WebSocket)上的文档，在创建连接时的握手请求中，有一个信息流正在发送来自客户端，以及来自服务器的答案。

所以一个 websocket 连接请求的例子是

```
GET /mychat HTTP/1.1
Host: server.example.com 
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==
Sec-WebSocket-Protocol: chat
Sec-WebSocket-Version: 13
Origin: http://example.com 
```

它作为字节流通过套接字发送，但是同样的事情发生在一个普通的 http 请求中，然而，

如果您检查使用 rails-websocket 创建的请求，当您在 js 上运行代码时

```
var dispatcher = new WebSocketRails('localhost:3000/websocket'); 
```

您将看到通过网络连接的请求是

```
GET /websocket HTTP/1.1
Host: localhost:3000
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:19.0) Gecko/20100101 Firefox/19.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,es-ar;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate
Sec-WebSocket-Version: 13
Origin: http://localhost:3000
Sec-WebSocket-Key: dRpM9EesBFdk3SOH2QL/Tw==
Cookie: __utma=111872281.1938357651.1354053248.1355759500.1357797379.3; __utmz=111872281.1354053248.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); hblid=T1PaqE0vcRC9zDYrpFoBo5RD91766581; olfsk=olfsk5917359536568161; remember_admin_user_token=BAhbB1sGaQlJIiIkMmEkMTAkV0VhZzJaeXg3SzZFQWMzVUdPLktaTwY6BkVU--f84238cbbcb767e075117603de67f56a7150eb97; _stack_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFRkkiJTg0NGIwNzZmNWUyZjFiNTMwZDkwMWUyMGFiODMxOGE3BjsAVEkiEF9jc3JmX3Rva2VuBjsARkkiMWxIS1FHUjg1b2pDbjFybFY4RW8yemtzRWtVQUdHY1BxTGxtdzBWOFdBN009BjsARkkiE3VzZXJfcmV0dXJuX3RvBjsARiIZL2hvbWUvcHJpdmF0ZV9hY3Rpb24%3D--e4823c74756cf70af0675323fb752b1f87064f09
Connection: keep-alive, Upgrade
Pragma: no-cache
Cache-Control: no-cache
Upgrade: websocket 
```

因此，cookie 正在发送，最重要的是，在您的 AuthorizationController 上：

```
class AuthorizationController < WebsocketRails::BaseController
  def authorize_channels
    # The channel name will be passed inside the message Hash
    channel = Channel.find_by_name message[:channel]
    if can?(:subscribe, channel)
      accept_channel current_user
    else
      deny_channel({:message => 'authorization failed!'})
    end
  end
end 
```

如果你在 authorize_channels 方法上设置断点，你会看到你拥有所有的 cookie，就好像它是一个普通的 http 请求一样。

有关 websocket 的工作原理和方式的更多信息，您可以阅读[RFC](http://www.faqs.org/rfcs/rfc6455.html)，但这里重要的是，在创建连接时的握手时，客户端会发送 cookie 以及其他信息，比如它是否是某种 http请求时，服务器接收 websocket 请求，通过检查 cookie 来验证用户身份，并且它要么打开保持打开的连接作为全双工通信的套接字，要么关闭连接，因为凭据无效。

* * *

我不确定我是否理解你的问题。普通页面请求和 Web 套接字之间的主要区别在于，Web 套接字是用户 http 握手以启动连接的套接字。

在您的代码中，这些行发送带有 cookie 的 http 请求，并且服务器接受连接。

```
// connect to server like normal
var dispatcher = new WebSocketRails('localhost:3000/websocket'); 
```

所以此时你有一个全双工套接字（这意味着服务器或客户端都可以通过它发送数据而不会发生冲突）。任意数据。

然后在下一个代码上：

```
// subscribe to the channel
var private_channel = dispatcher.subscribe_private('channel_name'); 
```

客户端正在请求服务器（通过活动的连接，通过 websocket）订阅私有通道。

现在，要了解的主要重要事项是，如果您订阅了一个频道，您并没有打开一个新连接，您仍然会使用您现在要求订阅私人频道的同一个 Websocket，这是开始连接时发送 cookie 的同一个 websocket。

现在，如果您偶然可以在 websocket-rails gem 上设置断点，而不是文件 dispatcher.rb，在方法 route(event) 上，您会注意到在后台，websocket-rails 使用 faye-websocket-ruby 来处理websocket 连接，并且在请求中，您可以访问在 websocket 握手时发送的 cookie。

该路由会将请求路由到 websocket-rails 控制器 AuthorizationController，在大多数情况下，它的代码如下：

```
if can?(:subscribe, message[:channel])
  accept_channel current_user
else
  deny_channel({:message => 'authorization failed!'})
end 
```

并且因为它可以访问与通用 Rails 控制器相同的辅助方法，即 cancan？来自 cancan 的方法，将调用 current_user 帮助程序，并且此方法将具有对 cookie 的完全访问权限。

所以channels不是websocket RFC上描述的东西，websocket只是一个可以用来发送任何数据的socket，在这种情况下，公共和私有通道只是作者开发的一种通信行为gem websocket-rails 创建通信渠道并将消息广播到不同的客户端。

如果您进入 websocket-rails 问题，您会注意到甚至有创建单向安全通道的请求：[https ://github.com/DanKnox/websocket-rails/issues/52](https://github.com/DanKnox/websocket-rails/issues/52)

因此，它不像有人可以发送 subscribe_to_private 频道的流并访问该频道，在他们甚至可以发送订阅流之前，他们必须通过 http 请求创建 websocket 连接，如 rfc 所述，然后，通过该 websocket 连接，他们必须发送字节流，要求 ruby​​ gem 订阅该频道，当他们这样做时，在 rails 服务器上，您可以自动访问连接时发送的该 websocket 的 cookie被创建。

# ios - 是直接使用方法还是直接使用 Interface Builder 编辑属性？

> ID：15049266
> 
> 赞同：-2
> 
> 时间：2013-02-24T06:26:59.467
> 
> 标签：ios, objective-c, xcode, interface-builder

我必须在我的 iOS 应用程序中为按钮设置字体和颜色等属性。**使用getButtonTextFont()**和**getButtonTextColor()**等公共方法在代码中设置这些会更好，还是应该使用 Interface Builder 的实用程序窗口简单地设置属性？

***注意***：这些属性是静态的，在应用过程中不会改变。

此外，如果需要，请为这些方法建议正确的命名约定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:58:29.797

如果这些是静态属性，请不要为它们生成代码，只需在 XIB 中设置它们。

您的白色也可以通过`UIColor`名为 whiteColor 的类方法获得。

```
[UIColor whiteColor]; 
```

至于 Objective-C 中的命名约定，我会阅读 Apple 的这份名为[Programming with Objective-C: Conventions 的](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/Conventions/Conventions.html)指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:53:38.400

弄清楚了：

可以为按钮的不同状态轻松设置属性。脚步：

1.  选择包含按钮的 .xib 文件
2.  选择按钮并使用右上角的视图段栏启用实用程序区域。
3.  打开属性检查器
4.  使用“状态配置”下拉菜单选择要为其设置按钮属性的状态。
5.  相应地更改每个所需状态的属性。

您仍然可以使用以下方法更改属性：

> +(UIFont*)getButtonsTextFont14Bold{ return [UIFont fontWithName:@"Helvetica-Bold" size:14]; }
> 
> +(UIColor*) getButtonsTextColorWhite{
> 
> ```
> return [UIColor colorWithRed:255.0/255.0 green:255.0/255.0 blue:255.0/255.0 alpha:1]; } 
> ```

# node.js - ExpressJS 在每次页面更改时创建一个新会话

> ID：15049272
> 
> 赞同：1
> 
> 时间：2013-02-24T06:27:30.923
> 
> 标签：node.js, express, connect, passport.js

我正在尝试像这样实施快递和护照会议：

```
 app.use(connect.bodyParser());
  app.use(express.cookieParser());
  app.use(express.session({
    cookie: {
      path: "/",
      httpOnly: true,
      maxAge: null
    },
    store: redisStoreConnect,
    secret: "something",
    key: 'pksy.sid'
  }));
  app.use(passport.initialize());
  app.use(passport.session());

  passport.serializeUser (user, done) ->
    done null, user.email
    return

  passport.deserializeUser (email, done) ->
    User.findOne
        email: email
      , (err, user) ->
        done err, user
        return 
    return 
```

如果我导航到站点中的页面，则会创建一个新会话并将其存储在 redis 中。如果我刷新该页面，会话似乎会持续存在。如果我导航到新页面，或者即使我关闭选项卡并重新打开到同一页面，也会创建一个新会话。

这尤其令人沮丧，因为护照只验证为我的登录页面生成的会话。如何让我的会话跨页面持续存在？

**更新：**感谢@robertklep 提醒我检查浏览器实际发回的 cookie（我应该这样做才能开始）。事实证明，浏览器正在发回正确的 cookie，并且身份验证正在工作。会话实际上是持续存在的，但由于某种原因，每个页面请求都会创建一个新会话（浏览器未使用）。我怎样才能阻止这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T04:37:14.853

“哦，你不知道浏览器不会发送会话 cookie 和对 favicon 的请求吗？” 我的室友黑客说，他的同类创造了对以下单行代码的需求。

11 小时后的调试解决了这个问题：

```
app.use express.favicon() 
```

Express 将 favicon 视为任何其他资源，而浏览器则对其进行专门的、显然没有 cookie 的请求。Express 假设这个请求一定来自没有会话 cookie 的客户端，因此它为他们创建了一个新会话；一个永远不会被再次召集的会议。`express.favicon()`节省一天！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T10:31:53.713

就我而言，我必须使用

```
app.use(passport.initialize());
app.use(passport.session()); 
```

前

```
app.use(app.router); 
```

希望这能有所帮助。

# android - 隐藏主页按钮并禁用系统栏中的右侧选项

> ID：15049273
> 
> 赞同：1
> 
> 时间：2013-02-24T06:27:45.117
> 
> 标签：android, android-layout, mobile, android-activity, lockscreen

我发现非根应用程序能够从选项卡的底部系统栏中隐藏主页按钮（不是所有设备，而是许多三星选项卡）并禁用（不隐藏）右侧 wifi，系统栏中的设置进入面板（在所有工作测试设备）。很好的例子是具有 BIND_DEVICE_ADMIN 权限的 Lookout 高级应用程序的远程锁定屏幕。此锁定屏幕出现在本机 android 锁定屏幕的顶部，它具有在许多设备上工作的这些功能。

有没有办法创建一个像这样禁用系统栏的活动？是否与添加到活动布局参数的标志有关？否则如何实现？

谢谢。

# quartz-composer - Quartz Composer 查看器缩放

> ID：15049276
> 
> 赞同：1
> 
> 时间：2013-02-24T06:28:22.907
> 
> 标签：quartz-composer

我不确定我是怎么做到的，但由于某种原因，坐标系完全不合时宜。一切看起来都被完全放大了，在 Quartz Composer 之外也是如此，所以出现了一些奇怪的事情。有什么正常的方式可以发生这种情况，还是我在某处有某种腐败？ ![我的项目](../Images/7513b13d3ad8ee0be3992f91c0bc5e75.png)

所有这些都应该正常工作。我已经多次遵循这个逻辑，真的没有理由让它看起来像它一样放大。您会注意到我有两个我自己编写的自定义补丁。那“不应该”引起任何问题，但你永远不知道......

我刚刚发现问题的原因是我的自定义 AppleScript 补丁。该补丁按预期工作，但由于某种原因，当它被加载时，合成错误，我无法修复它，直到我从 Quartz Composer 卸载补丁（简单地从合成中删除它不起作用）。显然这是某种腐败问题，但我无法终生弄清楚问题是什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:59:49.520

您是否尝试删除您的声音补丁？有时，对于行为不符合预期的消费者，我也会遇到同样的问题。

您可能也想尝试将其放在“清除”补丁后面...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T16:14:25.187

尝试使用“在图像中渲染”补丁，它通常会使缩放固定。还有 Facebook 设计团队的 Origami 插件，它使用“电话”补丁将所有合成的大小固定到屏幕上。

# unity3d - Gui.Window ContextClick

> ID：15049277
> 
> 赞同：2
> 
> 时间：2013-02-24T06:28:26.317
> 
> 标签：unity3d

有没有办法在 Unity 编辑器脚本中将 Event.ContextClick 添加到 Gui.Window？

以下是我尝试从**OnGUI()**和窗口的**WindowFunction**调用的上下文菜单方法（调用站点在下面表示为“ **site: no** lucky ”）。除非我直接在主编辑器窗口中单击鼠标右键，否则我无法显示“成功”消息。如果我在我创建的任何 Gui.Windows 中单击鼠标右键，则不会显示 ContextClick 事件。

```
void OnStateContextMenu(){
    Event evt = Event.current;

    // Ignore anything but contextclicks
    if(evt.type != EventType.ContextClick)return;

    Debug.Log("Success");

    // Add generic menu at context point
    GenericMenu menu = new GenericMenu();
    menu.AddItem (new GUIContent ("AddState"),false,AddState,evt.mousePosition);
    menu.ShowAsContext ();
    evt.Use();
} 
```

和呼叫站点：

```
void doWindow(int id){
    // OnStateContextMenu(); //site1: no luck
    GUI.DragWindow();
}

void OnGUI(){
    OnStateContextMenu(); //site2: no luck here either
    BeginWindows();
    wndRect = GUI.Window(0,wndRect,doWindow,"StateWnd");   
    EndWindows();
} 
```

**更新**

作为参考，绿色区域响应右键单击，红色区域不响应。但我想要它。我创建的右键单击菜单具有特定的操作，我只希望鼠标光标在我的一个窗口内单击鼠标右键时可见，即图像中的“你好”。注意：忽略按钮，右键单击在该窗口内的任何地方都不起作用。

![在此处输入图像描述](../Images/d95bde639415fd210b4175a7aa6c0e8c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:18:43.003

这可能不会直接回答您的问题，但应该能够提供帮助

您正在尝试在红色框中实现右键单击功能（如图所示）我有一个类似的问题，但它不是右键单击而是鼠标悬停所以我想这可能会帮助你

```
string mouseover;  // first of i created a new string

 if (GUI.Button (new Rect (100,100,200,200),new GUIContent("Load game", "MouseOverOnButton0") ,menutexture ))
  {
     //added a mousoveronbutton command to my GUIcontent
      executestuff();
  }

     buttoncheck();       

}
        void buttoncheck()
        {
                mouseover = GUI.tooltip;
                if(mouseover == "MouseOverOnButton0")
                {
                        GUI.Box(new Rect(380,45,235,25),"Not a implemented function as of yet ");

                }

        } 
```

此代码在鼠标击中框的那一刻创建了一个新的 gui 框。

如果您在单独的框中创建了*hello ，您可以使用它*

```
if(mouseover == hello)
{
  if(rightclick == true)
  { 
    execute the stuff you want 
  }

} 
```

或类似的东西。希望这至少会有所帮助

***更新***

要获得右键单击事件，您必须使用

if(Event.current.button == 1 && Event.current.isMouse)

你必须把它放在 OnGUI 中才能正常工作

这样你首先触发收件箱部分，然后检查右键单击并执行你想要的东西。

# ckeditor - 如何将ckeditor ui颜色更改为纯色

> ID：15049279
> 
> 赞同：2
> 
> 时间：2013-02-24T06:28:36.703
> 
> 标签：ckeditor

我正在使用 Ckeditor 4。设置属性 uiColor 使其始终渐变。有没有办法设置纯色 ui 颜色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-09T08:06:16.390

使用带有“sharedspace”插件的内联编辑器：

```
CKEDITOR.on('instanceReady', function (e) {
  $('.cke_top').css('background','#eee');
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T14:49:20.390

您必须编辑和修改控制 uiColor 管理`skin.js`的部分以摆脱渐变。没有其他清洁和简单的方法。`/ckeditor_path/skins/skin_name/skin.js``CKEDITOR.skin.chameleon`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-04T19:37:36.233

我发现在 CKEditor 中做这样的事情非常令人沮丧。很长一段时间以来，我都尝试找到一种方法来执行此操作，并更改了 skin.js 文件和其他一些内容。最后，我通过在编辑器加载后用 jquery 更改属性来修复它。

```
$('.cke_inner').css('background','transparent'); 
```

您可以将“#012345”替换为“透明”，它将是纯色。

# matlab - 先验地打印长度未知的向量 :: MATLAB

> ID：15049280
> 
> 赞同：1
> 
> 时间：2013-02-24T06:28:41.600
> 
> 标签：matlab, printf

我有 3 个可变长度的向量，但在 1 和 5 之间（包括两者）。我需要在代码运行时将它们打印出来（以“好”的方式）。

Nice := 我想让所有向量都以这样一种方式打印，即每次迭代中每个向量的起始值都是对齐的。

**我试过的：**

*   当前错误版本

    因为它=1：长度（a）

    fprintf('%4.4f',a(it))

    结尾

和其他两个类似。

这使它们错位。如果第一个向量的长度仅为 1，那么一切都会搞砸。

*   马虎的输出版本

我用 0 填充空白位置并打印

```
for it=1:5

fprintf(' %4.4f ',a(it))

end 
```

但这很草率，因为它给读者留下了错误的印象。读者会相信向量是全长的，值为 0。

但是，这会正确打印出来。所有向量都适当对齐。

**样本**

在我的代码中 a,b,c 是数字，但假设 a,b,c 是字符串列表。a是我今天看到的动物，b是我午餐吃的，c是我今天去的地方。它们每天都在变化。

![在此处输入图像描述](../Images/484a3d9aeac912161ab6204967a1057c.png)

编辑：在最后一行，大象应该是红色的（在正确的版本中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T21:16:17.750

修改您的“草率版本”，您可以只打印空格而不是零：

```
for it=1:5

    if a(it) == 0
        % print 11 spaces
        fprintf('           ')
    else
        fprintf(' %4.4f ',a(it))
    end

end 
```

# c# - 在运行时使用字符串调用函数

> ID：15049284
> 
> 赞同：1
> 
> 时间：2013-02-24T06:29:47.670
> 
> 标签：c#, .net, vb.net

我正在尝试通过在文本框中键入函数名称并单击按钮来找到一种调用函数的方法，我有 417 个函数，它们不带任何变量

例如我想输入一个文本框

```
listproducts 
```

并单击一个按钮

然后`listproducts()`会被调用。

是否可以在不使用 select case 或 if 语句的情况下做这些事情？或者是否可以为函数分配一个字符串名称并用该名称调用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T06:56:46.030

你需要使用反射。假设您要调用的函数都是被调用类上的静态方法，`Foo`您可以执行类似的操作。

```
Dim functionName as String = "listproducts"
Dim fooType As System.Type = GetType(Foo)
Dim Method As System.MethodInfo = fooType.GetMethod(functionName)
Method.Invoke(Nothing, Nothing) 
```

# ruby-on-rails - mongoid 和 kaminari 抛出未定义的方法页面

> ID：15049292
> 
> 赞同：2
> 
> 时间：2013-02-24T06:31:21.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, kaminari, mongoid3

将 kaminari 与 mongoid 一起使用时，出现错误

```
undefined method `page' for #<Mongoid::Contextual::Mongo:0x007fe48c195af0> 
```

不知道出了什么问题。我什至尝试跑步

```
Item.page(params[:page]) 
```

我得到了错误

```
NoMethodError: undefined method `page' for Item:Class 
```

gem 存在于 Gemfile 中。双重检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-07T02:38:55.773

我看到你正在使用`mongoid`，在这种情况下添加到 Gemfile`will_paginate_mongoid gem`并运行`$ bundle`

更多信息可以在[这里](https://github.com/lucasas/will_paginate_mongoid)和[这里](https://github.com/mislav/will_paginate/blob/master/lib/will_paginate/mongoid.rb)找到。

# r - 继承`data.frame`的自定义类和替换方法

> ID：15049296
> 
> 赞同：3
> 
> 时间：2013-02-24T06:31:53.337
> 
> 标签：r, dataframe

我定义了一个类 ( `tdtfile`)，它继承了`data.frame`. 我现在正在尝试定义一个`[.data.frame`等效的替换方法来返回一个适当的类对象`tdtfile`而不是`data.frame`，但是我遇到了麻烦。

这是我在做什么：

```
# Define Class
setClass("tdtfile",
  representation(Comment = "character"),
   prototype(Comment = NULL),
   contains = c("data.frame"))

# Construct instance and populate
test <- new("tdtfile",Comment="Blabla")
df <- data.frame(A=seq(26),B=LETTERS)
for(sName in names(getSlots("data.frame"))){
  slot(test,sName) <- slot(df,sName)
}

# "Normal" data.frame behavior (loss of slot "Comment")
str(test[1])
# Works as well - will be trying to use that below
`[.data.frame`(test,1)

# Try to change replacement method in order to preserve slot structure 
# while accessing data.frame functionality
setMethod(
  `[`,
  signature=signature(x="tdtfile"),
  function(x, ...){
    # Save the original
    storedtdt <- x
    # Use the fact that x is a subclass to "data.frame"
    tmpDF <- `[.data.frame`(x, ...)
    # Reintegrate the results
    if(inherits(x=tmpDF,what="data.frame")){
      for(sName in names(getSlots("data.frame"))){
        slot(storedtdt,sName) <- slot(tmpDF,sName)
      }
      return(storedtdt)
    } else {
      return(tmpDF)
    }
  })

# Method does not work - data.frame remains complete. WHY?
str(test[1])

# Cleanup
#removeMethod(
#  `[`,
#  signature=signature(x="tdtfile")) 
```

当调用类似的东西时

```
tdtfile[1] 
```

这将返回`tdtfile`一个包含所有`data.frame`列的对象，而不仅仅是第一个……任何人都可以发现我缺少的东西吗？

谢谢您的帮助。

真诚的，乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:57:46.153

您的方法行为不端的原因是`i`,`j`和`drop`在您的方法中自动可用`[`，我相信这仅仅是`[`泛型工作方式的结果。这意味着您需要将这些参数按名称传递给`[.data.frame`而不是依赖于`...`. 不幸的是，这反过来又使您有责任正确处理各种形式的索引。

这是一个修改后的方法定义，它做得不错，尽管在`drop`参数的某些使用下它的行为可能与纯数据帧索引不完全相似：

```
setMethod(
    `[`,
    signature=signature(x="tdtfile"),
    function(x, ...){
        # Save the original
        storedtdt <- x
        # Use the fact that x is a subclass to "data.frame"
        Nargs <- nargs()
        hasdrop <- "drop" %in% names(sys.call())
        if(Nargs==2) {
            tmpDF <- `[.data.frame`(x, i=TRUE, j=i, ..., drop=FALSE)
        } else if((Nargs==3 && hasdrop)) {
            tmpDF <- `[.data.frame`(x, i=TRUE, j=i, ..., drop)
        } else if(hasdrop) {
            tmpDF <- `[.data.frame`(x, i, j, ..., drop)
        } else {
            tmpDF <- `[.data.frame`(x, i, j, ...)
        }
        # Reintegrate the results
        if (inherits(x=tmpDF, what="data.frame")){
            for(sName in names(getSlots("data.frame"))){
                slot(storedtdt, sName) <- slot(tmpDF, sName)
            }
            return(storedtdt)
        } else {
            return(tmpDF)
        }
    }) 
```

您的测试对象的一些示例：

```
> head(test[1])
Object of class "tdtfile"
  A
1 1
2 2
3 3
4 4
5 5
6 6
Slot "Comment":
[1] "Blabla"

> test[1:2,]
Object of class "tdtfile"
  A B
1 1 A
2 2 B
Slot "Comment":
[1] "Blabla" 
```

我不确定是否有更规范的方式来做到这一点。也许尝试查看一些 S4 包的源代码？

**编辑**：这是一种类似于上述提取方法的替换方法。在直接调用它之前，这会显式地将对象强制转换为数据框`[<-`，主要是为了避免在执行此操作时收到警告`[<-.data.frame`。同样，行为与纯数据帧替换方法并不完全相同，尽管可以通过更多的工作来做到这一点。

```
setMethod(
    `[<-`,
    signature=signature(x="tdtfile"),
    function(x, ..., value){
        # Save the original
        storedtdt <- x
        # Use the fact that x is a subclass to "data.frame"
        Nargs <- nargs()
        if (any(!names(sys.call()) %in% c("", "i", "j", "value"))) {
            stop("extra arguments are not allowed")
        }
        tmpDF <- data.frame(x)
        if(Nargs==3) {
             if (missing(i)) i <- j
             tmpDF[i] <- value
        } else if(Nargs==4) {
             tmpDF[i, j] <- value
        }
        # Reintegrate the results
        for(sName in names(getSlots("data.frame"))){
            slot(storedtdt, sName) <- slot(tmpDF, sName)
        }   
        return(storedtdt)
    }) 
```

例子：

```
> test[2] <- letters
> test[1,"B"] <- "z"
> test$A[1:3] <- 99
> head(test)
Object of class "tdtfile"
   A B
1 99 z
2 99 b
3 99 c
4  4 d
5  5 e
6  6 f
Slot "Comment":
[1] "Blabla" 
```

顺便说一句，如果提取/替换的工作与它们在数据帧上的工作*完全相同，我会考虑重写该类以拥有一个包含数据帧的插槽，而不是将 data.frame 作为超类。*组合优于继承！

# android - Android项目未加载，它产生异常错误

> ID：15049298
> 
> 赞同：-1
> 
> 时间：2013-02-24T06:32:00.110
> 
> 标签：android, eclipse, android-layout

在我的 android 应用程序中，我创建了一个简单的应用程序，在 eclipse 中通过**文件>项目>Androiapp**我已经放下了简单的活动，但应用程序给出了错误。

**布局文件**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

**代码文件**

```
package com.example.testapp;

import android.R;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

正如我所看到的，这段代码没有错误，但在 eclipse 中它仍然在`setContentView(R.layout.activity_main);`and处产生错误`getMenuInflater().inflate(R.menu.activity_main, menu);`。

我认为资源文件没有加载

> 请注意，我没有对**自动生成的代码**进行任何更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:34:55.697

删除此行。

```
import android.R; 
```

并清理项目，然后构建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:35:10.477

答案是

在您的导入中

```
import android.R;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu; 
```

删除此行

```
import android.R; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T06:39:46.153

你能删除这个：

```
import android.R; 
```

这将导入默认资源包，但您希望导入本地资源包。由于您正在加载活动，因此您不需要导入本地资源。

您可以参考以下任何一项：

[Android Eclipse 错误“Android 打包问题”](https://stackoverflow.com/questions/2865577/android-eclipse-error-android-packaging-problem)

[Android打包问题：resources.ap_不存在](https://stackoverflow.com/questions/4714711/android-packaging-problem-resources-ap-does-not-exist)

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/BvO5g6RMamo](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/BvO5g6RMamo)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T07:51:08.717

在这里大胆猜测：如果您在另一个 XML 文件中有错误，那么这可能会阻止自动生成的 R 文件的创建。在文件夹下查看`gen`并验证`R.java`文件是否存在且格式正确。

# android - android开发：android开发环境哪里报bug？

> ID：15049299
> 
> 赞同：-1
> 
> 时间：2013-02-24T06:32:17.973
> 
> 标签：android

我正在使用 ListView 开发应用程序，并且遇到了我在此链接中提到的问题：[当使用 scrollTo ListView 时不会刷新，但在手动滚动时会刷新](https://stackoverflow.com/questions/14923055/android-listview-when-using-scrollto-listview-does-not-refresh-but-when-manual)。

我在哪里可以在 Android 开发环境中报告此错误，以便可以修复此问题，并且我可以按照我想要的方式开发我的应用程序？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:36:12.050

你可以参考这个：[http](http://code.google.com/p/android/issues/list) ://code.google.com/p/android/issues/list 。这有一个完整的已知问题列表，您也可以记录新问题。

# scala - 如何从列表中删除重复项然后按最频繁排序

> ID：15049304
> 
> 赞同：3
> 
> 时间：2013-02-24T06:33:08.270
> 
> 标签：scala

我有一个包含可能重复的各种关键字的列表。我需要生成一个具有不同关键字的列表，但按它们在原始列表中出现的频率排序。

惯用的 Scala 会怎样呢？这是一个有效但丑陋的实现：

```
val keys = List("c","a","b","b","a","a")
keys.groupBy(p => p).toList.sortWith( (a,b) => a._2.size > b._2.size ).map(_._1)
// List("a","b","c") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T06:48:15.873

较短的版本：

```
keys.distinct.sortBy(keys count _.==).reverse 
```

然而，这并不是特别有效。该`groupBy`版本应该表现得更好，尽管它可以改进：

```
keys.groupBy(identity).toSeq.sortBy(_._2.size).map(_._1) 
```

`reverse`也可以通过声明一个来摆脱第一个版本中的`Ordering`：

```
val ord = Ordering by (keys count (_: String).==)
keys.distinct.sorted(ord.reverse) 
```

请注意，`reverse`在这个版本中，只生成一个`Ordering`与原始版本相反的新版本。这个版本还提出了一种获得更好性能的方法：

```
val freq = collection.mutable.Map.empty[String, Int] withDefaultValue 0
keys foreach (k => freq(k) += 1)
val ord = Ordering by freq
keys.distinct.sorted(ord.reverse) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T06:45:00.503

评论无法修复的实现没有错！说真的，把它分解一下，描述你采取每一步的原因和原因。

也许不是“简洁”，但 scala 中简洁代码的目的*是*使代码更具可读性。当简洁的代码不清楚时，是时候备份、分解（引入命名良好的局部变量）和注释了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T06:56:34.450

这是我的看法，不知道它是否不那么“丑陋”：

```
scala> keys.groupBy(p => p).values.toList.sortBy(_.size).reverse.map(_.head)
res39: List[String] = List(a, b, c) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T07:05:20.313

折叠版：

```
val keys = List("c","a","b","b","a","a")

val keysCounts =
    (Map.empty[String, Int] /: keys) { case (counts, k) =>
        counts updated (k, (counts getOrElse (k, 0)) + 1)
    }

keysCounts.toList sortBy { case (_, count) => -count } map { case (w, _) => w } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T06:48:54.450

怎么样：

```
keys.distinct.sorted 
```

新手没有仔细阅读问题。让我再试一次：

```
keys.foldLeft (Map[String,Int]()) { (counts, elem) => counts + (elem -> (counts.getOrElse(elem, 0) - 1))}
    .toList.sortBy(_._2).map(_._1) 
```

如果您愿意，可以使用可变 Map。负频率计数存储在地图中。如果这让您感到困扰，您可以将它们设为正数并否定 sortBy 参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-24T07:11:08.360

也许，

```
val mapCount = keys.map(x => (x,keys.count(_ == x))).distinct
// mapCount  : List[(java.lang.String, Int)] = List((c,1), (a,3), (b,2))

val sortedList = mapCount.sortWith(_._2 > _._2).map(_._1)
// sortedList  : List[java.lang.String] = List(a, b, c) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-24T09:19:01.557

与@Daniel 的第 4 版稍作改动，可能会有更好的性能：

```
scala> def sortByFreq[T](xs: List[T]): List[T] = {
     |   val freq = collection.mutable.Map.empty[T, Int] withDefaultValue 0
     |   xs foreach (k => freq(k) -= 1)
     |   xs.distinct sortBy freq
     | }
sortByFreq: [T](xs: List[T])List[T]

scala> sortByFreq(keys)
res2: List[String] = List(a, b, c) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-02T21:28:33.927

我喜欢的版本是：

*最规范/最具表现力？*

```
keys.groupBy(identity).toList.map{ case (k,v) => (-v.size,k)  }.sorted.map(_._2) 
```

*最短，可能是最有效的？*

```
keys.groupBy(identity).toList.sortBy(-_._2.size).map(_._1) 
```

*直截了当*

```
keys.groupBy(identity).values.toList.sortBy(-_.size).map(_.head) 
```

# c# - 在倒数计时器中保存剩余秒数

> ID：15049305
> 
> 赞同：0
> 
> 时间：2013-02-24T06:33:10.747
> 
> 标签：c#, countdowntimer

我有个问题。我想将剩余的秒数保存在倒数计时器中（例如，剩余时间 = 12 秒）我想将这 12 秒保存在一个变量中。这是我的代码

```
 int order = 0;
    bool right = true;
    DispatcherTimer timer1 = new DispatcherTimer();
    private void timer_start()
    {
        timer1.Interval = new TimeSpan(0, 0, 0, 1);
        timer1.Tick += new EventHandler(timer1_Tick);
        timer1.Start();

    }
    int remainingSecond;
    int tik = 15;
    void timer1_Tick(object sender, EventArgs e)
    {
        this.Timer.Text = tik.ToString();
        if (tik > 0)
        {
            tik--;
            if (this.order >= 5)
            {
                timer1.Stop();
                if (right)
                {
                    remainingSecond = tik;
                }
                else
                    remainingSecond = 0;
            }
        }
        else
        {
            remainingSecond = 0;
            timer1.Stop();
        }
    } 
```

每次我写“remainingSecond”时，它的值总是0。我希望这个`remainingSecond`值是12。请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:29:46.667

您在任何地方分配`order = 0`但没有增加它并设置此条件

`if (this.order >= 5)`这永远不会是真的。所以它会不断递减你`tik`的，最后你的这个条件`if (tik > 0)`会变成假的。所以 else 将被执行，它会将你设置`remainingSecond`为`ZERO`. 这就是为什么你得到零作为输出。

您的计时器每 1 毫秒计时一次。将`timer`开始，并且将`tick`立即开始，届时`order`将**为零**，并且您的 else 语句将被执行，该语句将设置`remainingSeconds`为**ZERo**并且`Stop`计时器也将执行。因此，单击按钮不会为您做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T06:38:06.413

尝试将间隔设置为 1 秒而不是 1 毫秒

# c# - 中继器中的数字分隔符

> ID：15049306
> 
> 赞同：0
> 
> 时间：2013-02-24T06:33:13.367
> 
> 标签：c#, asp.net

我在 ASP.NET 网页的转发器中有这一行：

```
<%# Eval(123456) %> 
```

我想用分隔符显示我的号码（123456）（如：123,456）

我必须做什么？

我对字符串格式有所了解。我使用一些字符串格式，如 "{N3}" 和 "{#,000)" 。但这对我没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:37:06.247

你在找这个吗？

```
string.Format("{0:n0}", 123456); 
```

# mysql - 根据 MESSAGEID 显示 IMAGE_POST_ID 和 POST_IMG_PATH

> ID：15049308
> 
> 赞同：0
> 
> 时间：2013-02-24T06:33:39.053
> 
> 标签：mysql, sql

我正在从多个表中获取数据，所有其他数据均已正确获取，但 **post_images 的 IMAGE_POST_ID POST_IMG_PATH**字段未根据 user_messages 的 messageid 显示。

我的桌子是

**1)post_images**

```
| IMAGE_ID |    SMALL_PIC_PATH |  LARGE_PIC_PATH |                        ADDDATE | VISIBILITY | USERID | MESSAGEID |
---------------------------------------------------------------------------------------------------------------------
|     i_i1 | /post/small/a.jpg | /post/img/a.jpg | January, 01 2012 00:00:00+0000 |     public |      2 |        m1 |
|     i_i2 | /post/small/b.jpg | /post/img/b.jpg | January, 01 2012 00:00:00+0000 |     public |      2 |        m1 |
|     i_i3 | /post/small/c.jpg | /post/img/c.jpg | January, 01 2012 00:00:00+0000 |     public |      2 |        m1 |
|     i_i4 | /post/small/d.jpg | /post/img/d.jpg | January, 01 2012 00:00:00+0000 |     public |      2 |        m1 |
|     i_i5 | /post/small/e.jpg | /post/img/e.jpg | January, 01 2012 00:00:00+0000 |     public |      3 |        m2 |
|     i_i6 | /post/small/f.jpg | /post/img/f.jpg | January, 01 2012 00:00:00+0000 |     public |      3 |        m2 | 
```

**2)user_messages**

```
| MESSAGEID |           MESSAGE |   ADDDATE | SENTBY | VISIBILITY | USERID |
----------------------------------------------------------------------------
|        m1 | Hello how are you | 23-2-2012 |      2 |     public |      1 |
|        m2 |            Hello  | 23-2-2012 |      3 |     public |      1 |
|        m3 |          Hiiiiiii | 23-2-2012 |      4 |     public |      1 | 
```

我想获取相关消息 id 的所有 image_id 和 small_pic_path。但是通过我的查询，它显示了所有带有 messageid 的 image_id small_pic_path。

这是我的查询

```
SELECT user_messages.messageid,user_messages.message,
user_messages.sentby,user_messages.visibility,

(
   SELECT GROUP_CONCAT(  `post_images`.`image_id` SEPARATOR ';')
    FROM  `post_images`
    JOIN user_messages
  ON `post_images`.`messageid` =user_messages.messageid
) AS  `Image_post_id`,
(
   SELECT GROUP_CONCAT(  `post_images`.`small_pic_path` SEPARATOR ';')
    FROM  `post_images`
    JOIN user_messages
  ON `post_images`.`messageid` =user_messages.messageid
) AS Post_Img_path,
(
  SELECT count(*) FROM likes
  WHERE element_id=user_messages.messageid
  )AS Total_Likes
, smsusers.fname as Msg_sender_fname,
smsusers.lname as Msg_sender_lname,
profile_pic.small_pic_path as Msg_sender_pic

FROM user_messages
      INNER JOIN smsusers ON
        user_messages.SENTBY = smsusers.id
 INNER JOIN profile_pic ON
 user_messages.SENTBY = profile_pic.userid
WHERE user_messages.userid='1'; 
```

这是我的[查询链接](http://sqlfiddle.com/#!2/d0fec/2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:54:58.743

我得到了答案。在这里我没有使用`group by`

# c# - 将数据插入两个表失败，因为 FK 冲突

> ID：15049309
> 
> 赞同：0
> 
> 时间：2013-02-24T06:34:04.510
> 
> 标签：c#, sql-server, sql-server-2008, ado.net, transactions

我创建了一个如下所示的存储过程：

```
INSERT DATA INTO TABLE_1 VALUES ('xx', 'yy', 'zz')
SET @id = @@identity

INSERT DATA INTO TABLE_2 VALUES (@id, 'text') -- throws exception 
```

我从 C# 代码中调用它，它包含在一个`SqlTransaction`. 问题是，它总是抛出`The INSERT statement conflicted with the FOREIGN KEY constraint`第二个 INSERT。

我调试了这个存储过程，它表明错误来自第二个插入语句。@id 设置正确。

我已经在 TABLE_1 中插入数据并获得了新的 ID。我不明白为什么它仍然会引发异常。

**更新**

表结构：

```
Table_1
id(int) PK
name_1 varchar(10)
name_2 varchar(10)
name_3 varchar(10)

Table_2
id(int) PK, FK to Table_1.id
text_1 varchar(10) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:58:03.030

一些建议：

1.  尝试在语句中指定列名`INSERT`，这样在重新排列列顺序时就不会搞砸了。
2.  使用`SCOPE_IDENTITY()`而不是`@@IDENTITY`检索新生成的身份。[您可以在此处](http://msdn.microsoft.com/en-us/library/ms190315.aspx)了解它们的差异。

# sql-server - 一对多数据库表关系

> ID：15049310
> 
> 赞同：0
> 
> 时间：2013-02-24T06:34:16.097
> 
> 标签：sql-server, database

我确实有两个来自数据库的表..

```
Consultation Table
-ConsultationNo -PK
-PatientNo -FK
-Diagnosis
-Etc...

VitalSign Table
-VitalSignNo -PK
-Weight
-Height
-HeartRate
-BloodPressure
-Etc 
```

我需要像这样加入这两个表..

```
Consultation Table
-ConsultationNo -PK
-PatientNo -FK
**-VitalSignNo** -FK
-Diagnosis
-Etc... 
```

但有时，我的 VitalSign 表不接受任何值，因此这两个表之间的关系不会被强制执行，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:39:15.213

像这样使用外部联接...

```
Select * from Consultation
Left join VitalSign on (Consultation.ConsultationNo = vitalsign.ConsultationNo) 
```

您将从咨询中获得所有行，并从 Vitalsign 获得匹配的行。当 Vitalsign 中没有行时，所有这些列都将返回 null，但您仍将获得咨询行。

这可能不完全适合您的情况，因为您问题中的表结构看起来并不完整。也就是说，您在任何一个表中都没有引用另一个表的 PK 的外键。

# java - Java和数据库连接

> ID：15049312
> 
> 赞同：0
> 
> 时间：2013-02-24T06:34:40.250
> 
> 标签：java, sql, database

我正在尝试编写一个将数据存储在独立 sql db 中的 java 程序。但是，我不知道如何用 java 创建一个 sql db 以及如何建立这个连接。谁能给我一些建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:59:59.473

将[H2](http://www.h2database.com/html/main.html)添加到您的类路径中，它非常简单：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

public class Jdbc {
    public static void main(String[] args) throws Exception {
        Connection connection = DriverManager.getConnection("jdbc:h2:mem:");
        Statement statement = connection.createStatement();
        statement.execute("create table chair(id int primary key auto_increment, legs int not null, color varchar(255))");
        statement.execute("insert into chair (legs, color) values (4, 'red')");
        statement.execute("insert into chair (legs) values (6)");
        ResultSet rs = statement.executeQuery("select * from chair");
        while (rs.next()) {
            String color = rs.getString("color") == null ? "" : rs.getString("color") + " ";
            System.out.println("Got a " + color + "chair with " + rs.getInt("legs") + " legs");
        }
        connection.close();
    }
} 
```

除了能够纯粹在内存中运行或作为独立服务器运行之外，H2 还带有一个内置的、基于 Web 的 sql 工作台。

注意：您应该从[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/index.html)开始，以帮助您避免主要的陷阱，例如连接泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T06:37:02.387

你考虑过[Apache Derby](http://db.apache.org/derby/)吗？

> Apache Derby 是 Apache DB 子项目，是一个完全用 Java 实现的开源关系数据库，可在 Apache 许可证 2.0 版下使用。一些关键优势包括：
> 
> *   Derby 占用空间很小——大约 2.6 MB 用于基本引擎和嵌入式 JDBC 驱动程序。
> *   Derby 基于 Java、JDBC 和 SQL 标准。
> *   Derby 提供了一个嵌入式 JDBC 驱动程序，使您可以将 Derby 嵌入到任何基于 Java 的解决方案中。
> *   Derby 还通过 Derby Network Client JDBC 驱动程序和 Derby Network Server 支持更熟悉的客户端/服务器模式。
> *   Derby 易于安装、部署和使用。
> 
> 如果您不熟悉 Derby，请查看快速入门页面。

这就是说，我忘记了H2。+1 瑞恩的建议。

# c - 用 c 写入 FIFO 文件

> ID：15049315
> 
> 赞同：1
> 
> 时间：2013-02-24T06:35:17.110
> 
> 标签：c, bash, raspberry-pi, fifo, raspbian

我对编程比较陌生。我想要完成的是写入一个我认为它被调用的 FIFO 文件。基本上，如果我在终端窗口中，我可以执行命令`echo "0=0" > /dev/pi-blaster`，它将按预期工作。所以我想做的是编写一个程序，它基本上会为我执行该命令，但会更改双引号之间的数字。我知道如何使用循环更改数字我只是无法让它实际写入文件。在编译或运行期间没有生成任何错误，它根本不像我要键入上面的命令那样起作用。就像我说的我是编程新手，所以也许我什至没有走在正确的道路上。我在下面包含了我的代码：

```
#include <stdio.h>
#include <stdlib.h>

   int main(void)
   {
      FILE *fp;
      int i;

      fp = fopen("/dev/pi-blaster", "w");
      if (fp == NULL) {
         printf("I couldn't open pi-blaster for writing.\n");
         exit(0);
      }

      for (i=0; i<=10; ++i)
         fprintf(fp, "echo %d=%d", i, i*i);

      return 0;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:39:49.193

您正在做的是将实际的`echo`shell*命令*写入文件，而不是例如`0=0`.

你应该只做

```
fprintf(fp, "%d=%d\n", i, i * i); 
```

PS。您不必担心刷新文件缓冲区，它会在文件关闭时自动完成，并且在进程退出时文件将被关闭（但明确关闭您打开的文件被认为是好的，即使它是技术上不需要）。

# php - 如何在类中检索数组变量

> ID：15049317
> 
> 赞同：0
> 
> 时间：2013-02-24T06:35:57.987
> 
> 标签：php, arrays, class, object

我是 OOP 的新手，对此非常困惑。一个根据传递的 ID 从数据库中收集用户信息的类：

```
class user {

    public $profile_data;
    public function __construct($profile_user_id) {
        $this->profile_data = user_data($profile_user_id, 'id', 'username', 'password', 'email', 'admin');
    }

}

$profile_data[] = new user(1); 
```

如何获取数组中的所有变量？`username`例如，我如何回显？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T07:06:39.893

简单地试试这个。

```
class user {

        public $profile_data;
        public function __construct($profile_user_id) {
            $this->profile_data = user_data($profile_user_id, 'id', 'username', 'password', 'email', 'admin');
        }

    }

    $userObj = new user(1);
    $profileData = $userObj->profile_data;
    echo $profileData['username']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T07:07:13.863

假设您的 user_data 函数返回一个关联的数据数组，您应该能够使用以下方式访问字段：

```
$profile = new user(1);
echo $profile->profile_data['username']; 
```

就像在 Lighthart 的示例中一样，创建私有变量以及访问它们的函数是一种很好的做法。

另一种选择是实现 ArrayAccess 接口 ( [http://php.net/manual/en/class.arrayaccess.php](http://php.net/manual/en/class.arrayaccess.php) ) 使用此接口，您可以像使用数组一样使用对象。也就是说，您可以使用：

```
echo $user['username']; 
```

作为起点，您可以尝试以下方法：

```
class user implements ArrayAccess {
  private $data;
  public function __construct($profile_user_id) {
    $this->data= user_data($profile_user_id, 'id', 'username', 'password', 'email', 'admin');    
  }

  public function offsetSet($offset, $value) {
    // Do nothing, assuming non mutable data - or throw an exception if you want
  }

  public function offsetExists($offset) {
    return isset($this->data[$offset]);
  }

  public function offsetUnset($offset) {
    // Do nothing, assuming non mutable data - or throw an exception if you want
  }

  public function offsetGet($offset) {
    return isset($this->data[$offset]) ? $this->data[$offset] : null;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T06:49:02.773

您给出的示例可能不适用于您要完成的工作。尚不清楚 userdata 的功能是什么。修改：

```
class User {
    private $id;
    private $username;
    private $password;
    private $email;
    private $admin;

    public function __construct($id, $username, $password, $email, $admin) {
        $profileData = user_data($profile_user_id
                                ,'id'
                                ,'username'
                                ,'password'
                                ,'email'
                                ,'admin');
        $this->id       = $profileData ['id'];
        $this->username = $profileData ['username'];
        $this->password = $profileData ['password'];
        $this->email    = $profileData ['email'];
        $this->admin    = $profileData ['admin'];

    }

    public function getId(){ return $this->id; }
    public function getUsername(){ return $this->username; }
    public function getEmail(){ return $this->email; }
    public function getAdmin(){ return $this->admin; }
    public function setAdmin($admin){ $this->admin = $admin; }

} 
```

变量设置为私有。只有用户对象才能直接访问数据。但是，其他对象可能想要检索数据，这就是有 4 个公共 get 函数的原因。getPassword 被省略了，因为您可能不希望该密码公开可用。此外，您可以设置一个新的管理员也是可以想象的，因此还添加了一个公共设置器功能。因此，您将实例化新用户（即，获取该类并对其进行真实示例）：

```
$user1 = new User(1); 
```

在使用过程中，您将通过以下方式回显这些变量：

```
echo $user1->getUsername(); 
```

请接受我没有直接回答您的问题的歉意，但这个例子会遇到麻烦。

# html - 从谷歌搜索隐藏登录字段

> ID：15049319
> 
> 赞同：0
> 
> 时间：2013-02-24T06:36:35.850
> 
> 标签：html, schema.org, search-engine-bots

**背景：** 我的网站允许注册用户上传和分享视频。

在主页上有一个“用户名”和“密码”字段，以便注册用户可以根据需要登录。

此外，在每个视频页面上，都有用于选择比特率和 Flash 播放器的文本链接。

（有关两者的示例，请参见[http://videoflier.com/](http://videoflier.com/)和[http://videoflier.com/movies/1360488842878341996730](http://videoflier.com/movies/1360488842878341996730)。）

或在谷歌上搜索“site:videoflier.com”来看看我在说什么。

**我的问题：** 当谷歌或任何搜索引擎索引它时，他们当然会看到登录文本和设置视频比特率的链接（看起来像“190 234 [698] 1247 kbps | osflv [jwplayer] flowplayer”）

（在谷歌搜索“site:videoflier.com”以查看示例。）

它看起来像这样：

纸板飞机 videoflier.com/movies/1352509017371554759177 纸板飞机 作者 jesseg 190 234 [698] kbps | osflv jwplayer [flowplayer] 这是用纸板和胶带制成的模型飞机。它配备了遥控...

（请注意比特率和播放器选择看起来如何丑陋和浪费空间。）

**到目前为止，我尝试以干净整洁的方式解决问题** （以及为什么我不喜欢其中任何一个。）

***使用图片代替文字：***我希望我的网站快速高效，所以如果我不需要，我不想使用图片作为文字。

***有一个单独的设置页面：***我希望该站点快速且易于使用。

***robots.txt：***如果搜索引擎无法读取页面，那么它就不会知道如何找到它们！

***使用 CGI 隐藏搜索机器人的东西***这是我所拥有的最好的想法 - 但我真的不想做一个肮脏的 hack，而且我的 CGI 似乎没有通用的方法来识别机器人。谷歌自己使用了几个不同的用户代理字符串，实际上没有一个包含“机器人”这个词。大多数包含“Googlebot”但不是全部。谁知道其他搜索引擎使用什么。

当然，我理解（谷歌也做出了这样的声明）为什么他们使用看起来像普通网络浏览器的代理字符串——因为不诚实的人试图向搜索引擎发送完全不同的内容来进行广告欺诈。

但我真的不想必须运行一个不断变化的黑名单来尝试识别所有可能的搜索引擎。听起来太像打击垃圾邮件了。此外，我只是想隐藏登录和比特率列表，以便搜索结果更易于阅读。

***javascript:*** Javascript 会带来自己的问题（浏览器兼容性问题、可访问性等）。当它是完成这项工作的最佳工具时，我会使用它，但当我可以拥有它时，我真的很喜欢纯净的 HTML。

***在一个理想的世界里：***我希望我有一个类似于 <NOBOT>username:password:</NOBOT> 的 HTML 标签——但据我所知，什么都不存在。理想情况下，这个虚构的标签也会阻止搜索引擎返回基于隐藏项目的结果。将“密码”这个词输入谷歌的人肯定不是试图找到我的网站——然而谷歌可能会仅仅因为它上面有一个登录字段而返回它。

***架构.org？***我最初对 schema.org 抱有希望，因为它允许在 HTML 的范围内指定数据类型。不幸的是，据我所知，它的所有类别和事物都是针对以下事物的：它似乎没有“忽略”或“管理对象”选项。

也许更全面的答案是将 schema.org 广泛用于其他所有内容，以便搜索引擎已经知道从哪里获取他们的作者、描述和标题文本，然后他们可能会跳过管理控制链接。

非常感谢，

杰西·戈登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:43:58.833

我认为向您的页面添加元描述更有意义。

例如：纸板飞机 videoflier.com/movies/1352509017371554759177 纸板飞机 作者 jesseg 190 234 [698] kbps | osflv jwplayer [flowplayer] 这是用纸板和胶带制成的模型飞机。它配备了遥控...

我只是将其添加到您的标题部分。 `<meta name="description" content="This is a model airplane built from cardboard and tape. It was outfitted with remote control and servos so it could be flown as an RC glider. It did fly but had a tendency to stall. " />`

# ruby-on-rails-3 - 使用 before_filter 检查管理员或用户是否已登录

> ID：15049320
> 
> 赞同：2
> 
> 时间：2013-02-24T06:36:39.070
> 
> 标签：ruby-on-rails-3, authentication, devise, before-filter

是否可以使用 Ruby on Rails 的`before_filter`方法来检查多件事中的一件是否正确？具体来说，我使用的是 Devise，其中我定义了一个用户和一个管理员，并且我想确保访问特定控制器的人是其中之一。我已经在文档和 SO 中寻找答案，但没有任何运气。

谢谢，这是我的版本（如果有帮助的话）：

*   红宝石 1.9.3
*   导轨 3.2.6
*   设计 2.2.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T12:48:12.100

有可能的。我很犹豫是否将其作为答案，因为它没有比这更简单的了。我假设您有一个`admin?`根据用户角色返回 true 或 false 的方法。

```
before_filter :check_if_admin

protected

def check_if_admin
  if signed_in?
    raise 'Only admins allowed!' unless current_user.admin?
  else
    # or you can use the authenticate_user! devise provides to only allow signed_in users
    raise 'Please sign in!'
  end
end 
```

# javascript - 如何在应用程序暂停后立即触发 Windows 8 的后台任务？

> ID：15049321
> 
> 赞同：-1
> 
> 时间：2013-02-24T06:36:43.307
> 
> 标签：javascript, windows-8, triggers

我是 Windows 8 编程的新手。我正在使用 JavaScript 构建倒数计时器。我希望即使我的应用程序关闭，用户也能够收到一个 toast 通知，告知计时器已到。所以我想我需要使用后台任务。

我搜索了很多合适的触发器（在应用程序关闭后立即启用任务）但没有找到。然而这是可能的，因为我在 Windows Store 中看到一个倒数计时器应用程序可以做到这一点。你能告诉我实现这个的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:20:51.493

您想使用计划的 toast 通知，计划为计时器到期。如果应用程序已关闭，这仍会显示。请参阅`[How to schedule a toast notification][1]`文档以及方案 1[中的计划通知示例](http://code.msdn.microsoft.com/windowsapps/scheduled-notifications-da477093)。这为您提供了所需的任何时间分辨率，因为您只需告诉 Windows 在给定时间显示 toast，应用程序是否正在运行、暂停都无关紧要，或终止。

请注意，文档页面为此在 Windows.UI.Notifications 中显示了 WinRT API，并且示例使用“通知扩展”库来构建 XML 有效负载（内部使用 WinRT）。（如果您想深入挖掘，我的免费[电子书的第 13 章会显示所有变体。）](http://aka.ms/BrockschmidtBook)

无论哪种方式都有效；只需记住在您的清单中将 Toast Capable 设置为 yes，如[http://msdn.microsoft.com/en-us/library/windows/apps/hh781238.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh781238.aspx)中所述。

# javascript - 询问 Javascript 中的对象定义？

> ID：15049324
> 
> 赞同：0
> 
> 时间：2013-02-24T06:37:24.293
> 
> 标签：javascript, requirejs, commonjs

我看到有人定义类

```
define(function (require) {

var Test = {}

Test.init = function() {
}

Test.init();

return Test;
} 
```

我想知道为什么使用 define(function (require) ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T06:42:59.957

在没有看到脚本的其余部分的情况下，我不得不假设正在使用[requirejs 。](http://requirejs.org/)

[using`define`为在 requirejs 中初始化模块提供了一种方便的机制。](http://requirejs.org/docs/api.html#define)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:43:25.957

这是一种模块化方法。[您可以在http://addyosmani.com](http://addyosmani.com/writing-modular-js/)上了解它

# ios - NSData 到自定义 NSObject

> ID：15049325
> 
> 赞同：2
> 
> 时间：2013-02-24T06:37:54.890
> 
> 标签：ios, objective-c, nsdata, nsobject

我正在尝试使用蓝牙在 2 台设备之间传输数据。设备 A 持有自定义 NSObject。设备 B 正在接收此自定义 NSObject 作为 NSData。

将收到的 NSData 解码为自定义 NSObject 的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T06:42:34.940

您必须实现自定义对象的`encodeWithCoder:`和`initWithCoder:`方法，以便它知道如何编码和解码到 NSData 对象中/从 NSData 对象中解码：

```
- (void)encodeWithCoder:(NSCoder *)coder{
    [coder encodeObject:self.property forKey:@"property"];
    // all other properties
}

- (id)initWithCoder:(NSCoder *)decoder {
    if (self = [super init]) {
        self.property = [decoder decodeObjectForKey:@"property"];
        // all other properties
    }
    return self;
} 
```

然后使用以下方法将其从 NSData 解码为 NSObject：

```
NSObject *object = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

另一种方式：

```
[NSKeyedArchiver archiveRootObject:object toFile:self.filePath]; 
```

# python - Python中的“受保护”访问 - 如何？

> ID：15049333
> 
> 赞同：5
> 
> 时间：2013-02-24T06:39:30.227
> 
> 标签：python, inheritance, python-3.x, protected

我想在 Python 3.2 中设置一个具有“受保护”访问权限的类层次结构：基类的成员仅在派生类的范围内，而不是“公共”。

双下划线使成员“私有”，单下划线表示警告，但成员保持“公开”。什么（如果有的话......）是指定“受保护”成员的正确语法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T06:46:14.997

Python 中的成员访问权限通过“谈判”和“条约”而非强制方式起作用。

换句话说，您班级的用户应该不做不属于他们业务的事情，但是除了我使用`_xxx`标识符绝对清楚地表明他们的访问权限（通常）不合适之外，您无法强制执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T07:11:22.900

双下划线不会使 C++ 或 Java 意义上的成员“私有”——Python 非常明确地避开了那种语言强制的访问规则。*按照惯例，单个*下划线将属性或方法标记为“实现细节”——也就是说，外部的东西仍然可以得到它，但这不是类接口的受支持部分，因此，保证该类可能使有关不变量或向后/向前兼容性不再适用。这以不同的方式解决了与“私有”（接口和实现的分离）相同的概念问题。

双下划线调用仍然不是“私有”的名称修饰 - 它只是上述的稍微更强的表述，其中： - 这个函数是这个类的一个实现细节，*但是* - 子类可能有理由期望有一个方法相同的名称*并不*意味着是原始版本的覆盖版本

这需要一点语言支持，其中`__name`包含类的名称 - 以便它的子类版本获得不同的名称而不是覆盖。如果子类或外部代码真的想调用该方法，它仍然很有可能调用该方法 - 名称修改的目标是明确地*不*阻止这种情况。

但正因为如此，“受保护”在 Python 中没有多大意义——如果你*真的*有一个方法可以破坏不变量*，除非被子类调用*（实际上，即使你认为你这样做，你也可能不会这样做)，Python 方式只是为了记录这一点。在您的文档字符串中添加注释以“假定仅由子类调用”，并假设客户会做正确的事情来运行 - 因为如果他们不这样做，它就会成为他们自己的问题。

# jquery - ajax jquery 不返回选择查询结果

> ID：15049337
> 
> 赞同：0
> 
> 时间：2013-02-24T06:39:46.787
> 
> 标签：jquery, codeigniter

因此，我的视图文件中有一个文本字段，用于获取员工代码，jquery 在控制器中调用一个函数来获取员工详细信息，以立即填写同一视图页面中的某些字段。但我是股票，并没有真正发生任何事情，请查看我的代码并帮助我做到这一点。谢谢！

jQuery：

```
$('#employee_code').change(function(){  
    var em_code = $('#employee_code').val();
    if (em_code != ""){
        var post_url = "<?php echo base_url();?>index.php/it_inventory/get_employee_details/" + em_code;
        $.ajax({
            type: "POST",
            url: post_url,
            success: function(name,position,department) 
            {
                $('#employee_name').val(name);
                $('#employee_position').val(position);
                $('#employee_department').val(department);
            }
        }); 
    }          
}); 
```

CI控制器：

```
function get_employee_details($em_code="") {
        header('Content-Type: application/x-json; charset=utf-8');
        echo(json_encode($this->it_inventory_model->get_employee_details($em_code)));
    } 
```

CI模型

```
function get_employee_details($em_code){
        $q = "select name,position,department from employees where code=?";
        $query_em_detail=$this->db->query($q,$em_code);

        $outputs = array();

        if($query_em_detail->result()){
            foreach ($query_em_detail->result() as $output) {
                $outputs['name'] = $output->name;
                $outputs['position'] = $output->position;
                $outputs['department'] = $output->department_code;
            }
            return $outputs;
        } else {
            return FALSE;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:54:06.157

您应该添加`dataType`您的 ajax 请求，例如：

```
$.ajax({
   type: "POST",
   url: post_url,
   dataType: "json",
   success: function(data) {
      console.log(data); //response from your controller
      console.log( data.name); //to get name
   },
   error: function() { alert("Something went wrong!"); }
}); 
```

和控制器：

```
function get_employee_details($em_code="") {
  header('Content-Type: application/json',true);
  echo(json_encode($this->it_inventory_model->get_employee_details($em_code)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:53:59.607

我认为`success: function(name,position,department)`应该是`success: function(result)`。然后你需要使用`result.name`等`result.position`

```
success: function(result) {
    $('#employee_name').val(result.name);
    $('#employee_position').val(result.position);
    $('#employee_department').val(result.department);
} 
```

# php - 如果在带有 php 的主页索引页面上显示不同的标题图像

> ID：15049340
> 
> 赞同：0
> 
> 时间：2013-02-24T06:40:10.797
> 
> 标签：php, url, uri

我在这里找到了一个类似的主题：[Using php to show a different header logo image if body class is home?](https://stackoverflow.com/questions/8962230/using-php-to-show-a-different-header-logo-image-if-body-class-is-home) 但它似乎不适合我的代码。

我正在尝试在网站主页上显示较大版本的标题，在所有其他页面上显示较小版本。我有这个脚本：

```
if(strpos($_SERVER['REQUEST_URI'], "index.php") !== false) {
    echo "<img src='images/header-full.png'/>";
} else {
    echo "<img style='margin: 10px 15px 0;' src='images/header-small.png'/>";
} 
```

但只有当他们点击“home”导航链接并且“index.php”位于 URL 中时才会显示。即使 URL 中没有“index.php”，我如何判断用户是否在主页上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:45:58.590

你当然可以这样做：

```
if ($_SERVER['REQUEST_URI'] == "/" || $_SERVER['REQUEST_URI'] == "/index.php") {
... 
```

# jquery - ace:chart : 如何改变图表的大小

> ID：15049343
> 
> 赞同：0
> 
> 时间：2013-02-24T06:40:37.253
> 
> 标签：jquery, icefaces-3

我正在使用 icefaces 3.2 ace 图表并在 IE8/firefox 上进行测试。我有一个条形图。我想知道如何设置图表的高度和宽度。问题是如果 x 轴标签长度增加，我注意到图表高度减小。只是为了突出icefaces图表框架是基于jquery的jqplot。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T17:23:49.650

添加一个CSS：

```
.jqplot-target {
    height: HEIGHT px;  
    width: WIDTH px;
} 
```

您还可以使用 setTickAngle() 属性以对角线显示标签

```
xAxis = new Axis();
xAxis.setAutoscale(true);
xAxis.setTickAngle(-30); 
```

# javascript - 如何使用javascript从gridview中获取隐藏字段的值？

> ID：15049344
> 
> 赞同：1
> 
> 时间：2013-02-24T06:41:24.103
> 
> 标签：javascript, asp.net, gridview

这是网格视图：

```
<ItemTemplate>                               
          <asp:TextBox ID="txtAction" Text='<%# Bind("ch_flcode") %>'  runat="server"
           Width="60%" Columns="50" OnChange="javascript:HandlerCodeTextChange1(this);" AutoPostBack="true"> </asp:TextBox>
           <asp:HiddenField ID="hidempCode1" runat="server" />
           <asp:HiddenField ID="hidempName1" runat="server" />
    </ItemTemplate> 
```

我想在 javascript 中使用 hiddenfields 值

Javascript代码：

```
function HandlerCodeTextChange1(txtBox1) {
            var gv = document.getElementById("<%=gridSIupdate.ClientID%>");
           //var Rows = gv.getElementsByTagName("tr");
            if (txtBox1.value.indexOf(':') == "-1") {
                txtBox1.value = "";
                txtBox1.focus();

                gv.getElementById('<%=hidempCode1.ClientID%>').value = "";
                gv.getElementById('<%=hidempName1.ClientID%>').value = "";
            }
            else {
                var code = txtBox1.value.split(':');
                gv.getElementById('<%=hidempCode1.ClientID%>').value = code[0];
                gv.getElementById('<%=hidempName1.ClientID%>').value = code[1];
            }
        } 
```

如何使用javascript获取隐藏字段值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:46:54.000

使用 jQuery？

```
jQuery('[id$=hidempCode1]').val();
jQuery('[id$=hidempName1]').val(); 
```

这将选择 id 以`hidempCode1`&结尾的元素`hidempName1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:44:22.047

`<asp:HiddenField>`呈现为：

```
<input type="hidden"> 
```

另外他们有一个 id 所以你可以用它来选择它：

```
field = document.getElementById("hidempCode1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T06:48:53.437

尝试这个：

```
<%= hidempName1.ClientID %> 
```

# objective-c - 使用 Date 数据类型列从数据库中获取数据。

> ID：15049345
> 
> 赞同：0
> 
> 时间：2013-02-24T06:41:29.777
> 
> 标签：objective-c, nsdate

我正在开发一个应用程序。其中保存了数据类型为整数、测试和日期的数据库。所以现在我尝试使用以下查询从数据库中获取数据。

```
 NSString *query = [NSString stringWithFormat:@"SELECT Sno,name FROM school where Date='%@'",date];. 
```

日期包含 NSDate 格式的数据。当我运行这个时，我没有得到单行数据。那么如何使用该日期值检索数据。（日期列数据格式为 MM-dd-yy（01-22 -12))。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:49:30.627

你需要一个 NSDateFormatter。

然后将日期格式化程序设置为数据库日期的格式。 [此页面](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW1)应该可以帮助您找到这种格式。

然后，对于您的查询，使用您的日期格式化程序 stringFromDate 方法，如下所示：

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"MM-mm-yy"];
NSString *query = [NSString stringWithFormat:@"SELECT Sno,name FROM school where Date='%@'",[df stringFromDate:date]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-10T12:38:58.487

这工作正常。

1.**创建表**

```
FMDatabase *db = [FMDatabase databaseWithPath:[Utility getDatabasePath]];

[db open];

[db executeUpdate:@"create table if not exists UserTbl(eventname text,eventdate date)"];

FMResultSet *results = [db executeQuery:@"SELECT * FROM UserTbl"];

while([results next])
{
     ReminderObject *Reminder = [[ReminderObject alloc] init];
     Reminder.EventTitleString = [results stringForColumn:@"eventname"];
     Reminder.EventDateString = [results stringForColumn:@"eventdate"];
     [ReminderListArray addObject:Reminder];
}
[db close]; 
```

2.**插入**

```
FMDatabase *db = [FMDatabase databaseWithPath:[Utility getDatabasePath]];

[db open];
NSDate *today = [NSDate date];
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat: @"dd-MM-yyyy"];
NSString *dateString=[dateFormat stringFromDate:today];
dateFormat.timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
dateFormat.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];

NSLog(@".........DateString...%@",dateString);
//NSString *query = [NSString stringWithFormat: @"INSERT INTO user (edited) VALUES (\"%@\")", dateString];
BOOL success =  [db executeUpdate:@"insert into UserTbl(eventname,eventdate) values(?,?);",
                 Reminder.EventTitleString,dateString, nil];
[db close]; 
```

# c++ - 当长表达式不匹配时，Boost::Regex 抛出错误

> ID：15049351
> 
> 赞同：0
> 
> 时间：2013-02-24T06:42:55.067
> 
> 标签：c++, regex, boost

我有两个正则表达式。一个匹配python风格的注释，一个匹配文件路径。

当我尝试查看注释是否与文件路径表达式匹配时，如果注释字符串长于 ~15 个字符，则会引发错误。否则，它会按预期运行。

如何修改我的正则表达式使其不存在此问题

示例代码：

```
#include <string>
#include "boost/regex.hpp"

using namespace std;
using namespace boost;

int main(int argc, char** argv)
{
    boost::regex re_comment("\\s*#[^\\r\\n]*");
    boost::regex re_path("\"?([A-Za-z]:)?[\\\\/]?(([^(\\\\/:*?\"<>|\\r\\n)]+[\\\\/]?)+)?\\.[\\w]+\"?");

    string shortComment = " #comment ";
    string longComment  = "#123456789012345678901234567890";
    string myPath       = "C:/this/is.a/path.doc";

    regex_match(shortComment,re_comment);    //evaluates to true
    regex_match(longComment,re_comment);     //evaluates to true

    regex_match(myPath, re_path);             //evaluates to true
    regex_match(shortComment, re_path);       //evaluates to false
    regex.match(longComment, re_path);        //throws error
} 
```

这是抛出的错误

```
terminate called after throwing an instance of
    'boost::exception_detail::clone_impl<boost::exception_detail
            ::error_info_injector<std::runtime_error> >'
what():  The complexity of matching the regular expression exceeded predefined
    bounds.  Try refactoring the regular expression to make each choice made by the
    state machine unambiguous.  This exception is thrown to prevent "eternal" matches
    that take  an indefinite period time to locate. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:32:20.437

我知道总是创建一个巨大的正则表达式来解决世界上所有的问题是很诱人的，确实这样做可能有性能原因，但是当你构建这样一个怪物时，你还必须考虑你正在创造的维护噩梦。话虽如此，我建议将问题分解为可管理的部分。

基本上处理引号，在 dir 分隔符上拆分字符串，并对路径的每个部分进行正则表达式。

```
#include <string>
#include "boost/regex.hpp"
#include "boost/algorithm/string.hpp"
using namespace std;
using namespace boost;

bool my_path_match(std::string line)
{
    bool ret = true;
    string drive = "([a-zA-Z]\\:)?";
    string pathElem = "(\\w|\\.|\\s)+";
    boost::regex re_pathElem(pathElem);
    boost::regex re_drive("(" + drive + "|" + pathElem + ")");

    vector<string> split_line;
    vector<string>::iterator it;

    if ((line.front() == '"') && (line.back() == '"'))
    {
        line.erase(0, 1); // erase the first character
        line.erase(line.size() - 1); // erase the last character
    }

    split(split_line, line, is_any_of("/\\"));

    if (regex_match(split_line[0], re_drive) == false)
    {
        ret = false;
    }
    else
    {
        for (it = (split_line.begin() + 1); it != split_line.end(); it++)
        {
            if (regex_match(*it, re_pathElem) == false)
            {
                ret = false;
                break;
            }
        }
    }
    return ret;
}

int main(int argc, char** argv)
{
    boost::regex re_comment("^.*#.*$");

    string shortComment = " #comment ";
    string longComment  = "#123456789012345678901234567890";
    vector<string> testpaths;
    vector<string> paths;
    vector<string>::iterator it;
    testpaths.push_back("C:/this/is.a/path.doc");
    testpaths.push_back("C:/this/is also .a/path.doc");
    testpaths.push_back("/this/is also .a/path.doc");
    testpaths.push_back("./this/is also .a/path.doc");
    testpaths.push_back("this/is also .a/path.doc");
    testpaths.push_back("this/is 1 /path.doc");

    bool ret;
    ret = regex_match(shortComment, re_comment);    //evaluates to true
    cout<<"should be true = "<<ret<<endl;
    ret = regex_match(longComment, re_comment);     //evaluates to true
    cout<<"should be true = "<<ret<<endl;

    string quotes;
    for (it = testpaths.begin(); it != testpaths.end(); it++)
    {
        paths.push_back(*it);
        quotes = "\"" + *it + "\""; // test quoted paths
        paths.push_back(quotes);
        std::replace(it->begin(), it->end(), '/', '\\'); // test backslash paths
        std::replace(quotes.begin(), quotes.end(), '/', '\\'); // test backslash quoted paths
        paths.push_back(*it);
        paths.push_back(quotes);
    }

    for (it = paths.begin(); it != paths.end(); it++)
    {
        ret = my_path_match(*it);             //evaluates to true
        cout<<"should be true = "<<ret<<"\t"<<*it<<endl;
    }

    ret = my_path_match(shortComment);       //evaluates to false
    cout<<"should be false = "<<ret<<endl;
    ret = my_path_match(longComment);        //evaluates to false
    cout<<"should be false = "<<ret<<endl;
} 
```

是的，它（可能）会比单个正则表达式慢，但它会起作用，它不会在 python 注释行上抛出错误，如果你发现路径/注释失败，你应该能够弄清楚是什么是错误的并修复它（即它是可维护的）。

# jquery - 提交带有验证的 Rails Jquery 模态表单不起作用

> ID：15049353
> 
> 赞同：2
> 
> 时间：2013-02-24T06:43:24.327
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3

3个并发问题：

*   模态表单内联验证未显示
*   模态表单未提交
*   在哪里定义 ajax 提交后发生的页面更改？UJS文件，js根目录下的jquery等。

对于上下文，这是流程：

1.  非用户点击“购买”按钮
2.  'transactions/form' 模态表单打开：包含一个创建新事务的表单和可选的 - 一个新用户（注册）
3.  表单包含条纹信用卡字段和可选的密码/电子邮件字段，还包含有关帖子信息的隐藏字段（id、价格等...）
4.  用户有两个选择 **：**只输入信用详细信息 **b.** 输入信用详细信息和密码/电子邮件，即注册
5.  点击提交
6.  IF：选项 a，仅输入了信用详细信息
    *   验证卡
    *   充值信用卡
    *   关闭模式并对页面进行适当的更改
7.  IF：选项b，信用卡+注册信息已输入
    *   验证卡和用户详细信息
    *   创建用户
    *   创建客户并收费客户
    *   关闭模式并对页面进行适当的更改
8.  帖子从“活动”更改为“非活动”

我正在使用 client_side_validations gem。

按照上述步骤的粗略顺序，这里是我的购买按钮、模态表单、jquery 和控制器的详细信息。

**查看：使用购买按钮和模式形式发布项目：**

```
/button that opens modal form
%a.btn.buy-button{remote: :true,"data-toggle" => "modal", :href => "#buy_modal", :role => "button"} Buy

/the modal form
%div#buy_modal.modal{:role => "dialog",:style=>"display:none"}
  =render :partial => 'transactions/form' 
```

**模态形式：**

```
 =form_for @transaction, :validate => true, :html => {:class => "form"} do |f|
    =yield(:user_validators)
    - if @user.errors.any?
      #error_explanation
      %h2= "#{pluralize(@user.errors.count, "error")} prohibited this group from being saved:"
      %ul
        - @user.errors.full_messages.each do |msg|
          %li= msg

    /POST DETAILS
    = f.hidden_field :stripe_card_token
    = f.hidden_field :price
    = f.hidden_field :tier_id
    = f.hidden_field :premium
    = f.hidden_field :notify_premium
    = f.hidden_field :user_id
    = f.hidden_field :customer_id
    /CREDIT CARD STUFF
    #credit-card{:style => @user.stripe_customer_id ? "display:none" : "display:block"}
      #credit-card-errors{:style => "display:none"}
        #stripe-error-message.alert-message.block-message.error
    %div.row-fluid
      = label_tag :credit_card_number
      = text_field_tag :credit_card_number, params[:credit_card_number], :class=>"credit-number span12"
    %div.row-fluid
      %div.span6
        = label_tag :expiry_date
        = date_select "", :expiry_date, {:discard_day => true, :order => [:month, :year], :use_month_numbers => true, :start_year => Date.today.year, :end_year => Date.today.year + 25}, {:class =>"credit-expiry inline"}
      %div.span3
      %div.span3.credit-cvv
        = label_tag :cvv, "CVV"
        = text_field_tag :cvv, params[:cvv], :class=>"credit-cvv input-block-level"

    /NEW USER STUFF
    =f.label :email
    =f.text_field :email
    =f.label :password
    =text_field_tag :password, params[:password]

    =f.submit "Save" 
```

**管理模式的 Jquery：**

```
$(document).ready(function() {
  var $buy_dialog = $('#buy_modal').dialog({ 
    autoOpen: false, 
    title: 'Edit',
    modal: true,
    draggable: false,
    buttons: {
                "Save": function() {
                        $("#new_transaction").submit(function(){
                            var valuesToSubmit = $(this).serialize();
                            $.ajax({
                                url: $(this).attr('action'), //sumbits it to the given url of the form
                                data: valuesToSubmit,
                                type: 'POST',
                                dataType: "JSON" // you want a difference between normal and ajax-calls, and json is standard
                            }).success(function(json){
                                //act on result.
                            });
                            return false;
                        });
                        $('#buy_modal').dialog( "close" );
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }

    }); 
```

**管理模式内联验证的 Jquery**

```
$(document).ready(function(){
    $('.form').enableClientSideValidations();
    $('.form').on('shown', function() {
      $(ClientSideValidations.selectors.forms).validate();
    });
}; 
```

**事务控制器，`create`动作：**

```
 def create
    @transaction = Transaction.new(params[:transaction])
    @user = User.new(:email => params[:transaction][:email], :password => params[:password])

    respond_to do |format|
      if params[:password]
        #let's make a user and a transaction object
        if @transaction.save
          @user.save_with_payment
          format.html { redirect_to @transaction, notice: 'Transaction was successfully created.' }
          format.json { render json: @transaction, status: :created, location: @transaction }
        else
          format.html { render action: "new" }
          format.json { render json: @transaction.errors, status: :unprocessable_entity }
        end
      else
        if @transaction.save
          @transaction.payment(params[:transaction][:tier_id],params[:transaction][:price],params[:transaction][:premium],params[:transaction][:premium_notify])
          format.html { redirect_to @transaction, notice: 'Transaction was successfully created.' }
          format.json { render json: @transaction, status: :created, location: @transaction }
        else
          format.html { render action: "new" }
          format.json { render json: @transaction.errors, status: :unprocessable_entity }
        end
      end
    end
  end 
```

**用户控制器，`create`动作：**

```
def create
    @user = User.new(params[:user])
    respond_to do |format|

      #OPTION A, explained above
      if params[:user][:password].nil?
        # Charge the card and don't make a user
        # get the credit card details submitted by the form
        token = params[:stripeToken]

        # create the charge on Stripe's servers - this will charge the user's card
        charge = Stripe::Charge.create(
          :amount => 1000, # amount in cents, again
          :currency => "usd",
          :card => token,
          :description => params[:email]
        )

      #OPTION B, explained above
      else
        # create user, customer, and charge them
        token = params[:stripeToken]
        if @user.save_with_payment(token)
          @user.payment()
          format.html { redirect_to @user, notice: 'User was successfully created.' }
          format.json { render json: @user, status: :created, location: @user }
        else
          #error message
          format.html { render action: "new" }
          format.json { render json: @user.errors, status: :unprocessable_entity }
        end
      end
    end
  end 
```

我意识到这是一个庞大的问题，但这是一个非常常见的项目元素。我已经通过堆栈溢出来寻找每个组件的答案，但没有任何东西符合要求。

[使用 jquery 以 ajax 方式在 Rails 中提交表单](https://stackoverflow.com/questions/6723334/submit-form-in-rails-3-in-a-ajax-way-with-jquery)

[Jquery 模态窗口和编辑对象](https://stackoverflow.com/questions/5766055/jquery-modal-windows-and-edit-object)

[Jquery modal box 表单验证](https://stackoverflow.com/questions/2638539/jquery-modal-box-form-validation)（尝试重新发明轮子，而不是轨道，并且指导不规范）

[使用 jquery 在模态窗口中验证表单输入时出现问题](https://stackoverflow.com/questions/6439672/problems-validating-form-input-in-a-modal-window-with-jquery)（此处没有 MVC，并且实际上没有回答问题）

[在 jquery 模态视图中带有 formtastic 的 client_side_validations gem 不起作用](https://stackoverflow.com/questions/14135148/client-side-validations-gem-with-formtastic-in-jquery-modal-view-not-working)（未回答）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T19:53:08.413

部分答案：

### 模态表单内联验证未显示

在这个问题上帮不了你

### 模态表单未提交

*   rails 具有内置的 CSRF 保护。您的请求可能会因为您没有传递所需的 CSRF 令牌而被踢出
*   你应该添加`remote: true`到你的表单选项。它将让不显眼的 Rails 驱动程序为您管理请求（无需表单序列化），并根据响应触发自定义事件。有关更多信息，请参阅[Rails 3 远程链接和表单](http://www.alfajango.com/blog/rails-3-remote-links-and-forms/)或只是[Rails AJAX 指南](http://guides.rubyonrails.org/ajax_on_rails.html)

### 在哪里定义 ajax 提交后发生的页面更改？UJS文件，js根目录下的jquery等。

您可以使用与 html.erb 文件相同的 js.erb 文件进行响应，其中包含将在客户端上下文中执行的 jQuery 逻辑。

我试图更详细地回答这个问题，但是您的逻辑非常拜占庭式（我认为您在复制/粘贴期间丢失了选项 A 中的一些语句，因为此选项没有保存/格式）。作为旁注，这种情况将使数据-上下文-交互架构相关。

# c# - 从 MDI 父控件访问 MDI 子控件

> ID：15049355
> 
> 赞同：0
> 
> 时间：2013-02-24T06:43:31.010
> 
> 标签：c#, winforms, textbox

我有一个名为的`MDIParent`表单、`MDIChild`表单和普通表单`form1`，`form1`它是从 MDIChild 继承的，并且表单一个有名为 textBox1 的文本框，在父表单中我有两个按钮新建和保存，当我单击新子表单时应该加载，当我单击保存时消息框应该弹出有`textbox1.text`值，问题是消息框弹出没有`textbox1`文本值

我使用下面的代码在父表单中加载子表单。

```
public partial class MDIParent1 : Form
{
    MdiClient mdi = null;
    string fname;

    public MDIParent1()
    {
        InitializeComponent();
        foreach (Control c in this.Controls)
        {
            if (c is MdiClient)
            {
                mdi = (MdiClient)c;
                break;
            }
        }
    }
} 
```

我用下面的代码调用加载表单函数[点击新按钮]

```
private void ShowNewForm(object sender, EventArgs e)
{
    load_form(new Form1());
} 
```

加载表单函数是

```
private void load_form(object form)
{
    foreach (Form f in mdi.MdiChildren)
    {
        f.Close();

    }
    if (form == null)
        return;
    ((Form)form).MdiParent = this;
    ((Form)form).Show();
    ((Form)form).AutoScroll = true;
    fname = ((Form)form).Name;
} 
```

我的表单正在加载..在保存按钮`onClick`功能中，我调用了名为 form1 的函数`getdata()`

```
public void getdata()
{
    messageBox.show(textBox1.text);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T07:55:01.957

```
 public partial class MDIChild : Form
    {
        public virtual string GetMessage()
        {
            return this.Name;
        }    
    }

    public class Form2 : MDIChild
    {
        TextBox textBox1 = new TextBox();

        public override string  GetMessage()
        {
            return textBox1.Text;
        }
    }

    public partial class MDIParent1 : Form
    {
        private MdiClient mdi = null;
        private string fname;
        private MDIChild currentActiveChild;

        public MDIParent1()
        {
            base.InitializeComponent();
            foreach (Control c in this.Controls)
            {
                if (c is MdiClient)
                {
                    mdi = (MdiClient) c;
                    break;
                }
            }
        }

        private void ShowNewForm(object sender, EventArgs e)
        {
            currentActiveChild = new Form2();
            load_form(currentActiveChild);
        }

        public void getdata()
        {
            if (currentActiveChild != null)
            {
                MessageBox.Show(currentActiveChild.GetMessage());
            }
        }
    } 
```

# google-maps-api-3 - Google Maps API 缩放而不平铺

> ID：15049356
> 
> 赞同：1
> 
> 时间：2013-02-24T06:43:34.033
> 
> 标签：google-maps-api-3

我正在使用 Google Maps API 浏览我自己的地图。问题是，我只有一个相当小的分辨率文件，我想在 0 级完全显示，这意味着缩放时它不会变得更准确。我仍然希望能够通过放大图像来进行缩放。这对于我打算在其上绘制的标记和多边形很有用，因为可以更详细地查看它们。

我可以只创建虚拟图块，其显示的分辨率不高于原始图块，但这似乎是一个迂回的解决方案，只会为地图文件创建更多不必要的服务器请求以及更多流量。

问题似乎是`getTileUrl()`功能，因为它是必需的。我也想不出一个聪明的方法来滥用它，只显示同一张地图的不同部分。

我知道它已经支持图像放大，因为您可以在放大时观察效果。问题是，如果您可以以某种方式使该效果永久化，并且如果没有提供新图像，则不会使图像消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:12:33.120

**建议：**

仅使用 ImageMapType 来隐藏图块（因此让我们`getTileUrl()`简单地 return `null`）

对于您自己的地图，不要使用图块，而是创建一个[GroundOverlay](https://developers.google.com/maps/documentation/javascript/overlays#GroundOverlays)。

# c++ - 为什么执行while主体？

> ID：15049360
> 
> 赞同：2
> 
> 时间：2013-02-24T06:44:02.477
> 
> 标签：c++

我有以下程序：

```
int main() {
  int i;
  while (cin >> i) {
    cout << abs(i) << endl;
  }
  return 0;
} 
```

（其中 abs 由 int abs(int val) 定义）

当我输入一个非整数数字时，例如-1.2，它将给出以下输出：

```
$ -1.2
1 
```

我的问题是：为什么 while 身体会被执行？我认为只要我输入一个非整数值，条件就会失败，程序应该终止。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:45:55.960

因为输入运算符读取`-1`, 并在点处停止。下一次循环时，输入运算符看到点并设置`fail`标志，终止循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T06:50:38.033

您的程序只读取一个整数，仅此而已。如果您使用`cin`读取 int 值，则运算符将仅读取 int，因此使用小数将使其仅读取到点。例如，输入 -55.365 实际上只会发送 -55。

# javascript - 是否可以在 url 链接中包含 javascript？

> ID：15049362
> 
> 赞同：1
> 
> 时间：2013-02-24T06:44:14.950
> 
> 标签：javascript, url

我想要做的是当我到达链接指南的站点时，然后执行一些 javascript

那么是否可以在 url 链接中包含 javascript 代码，或者我可以在 url 之后附加一个 javascript 文件链接？

**编辑：** 例如，当某人访问我的推特网站，然后执行一些js，js可以自动点击“关注”按钮

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T06:46:39.163

不，允许这样做会带来巨大的安全风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T06:49:26.800

**你需要看到这个：[书签](http://en.wikipedia.org/wiki/Bookmarklet)**

> 小书签是用 JavaScript 编写的不显眼的脚本，并存储为 Web 浏览器中书签的 URL 或网页上的超链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T06:49:06.687

不，您不能将 javascript 代码添加到 url 链接中。

# windows-phone-7 - 有人知道如何在 Phonegap 和 Windows Phone 7 中使用动态磁贴吗？

> ID：15049363
> 
> 赞同：0
> 
> 时间：2013-02-24T06:44:14.947
> 
> 标签：windows-phone-7, cordova, phonegap-plugins, live-tile

我想知道如何从 URL 中的 JSON 加载一些实时磁贴，但我从未使用过该选项，有人可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:07:17.857

PhoneGap“核心”不支持动态磁贴，换句话说，如果你想使用这个功能，它不会是跨平台的。为了支持平台特定的功能，PhoenGap 有插件的概念。您可以在此处找到动态磁贴插件：

[https://github.com/purplecabbage/phonegap-plugins/tree/master/WindowsPhone/LiveTiles](https://github.com/purplecabbage/phonegap-plugins/tree/master/WindowsPhone/LiveTiles)

根据文档，您可以按如下方式更新它：

```
navigator.plugins.liveTiles.updateAppTile(success, fail,
                  {title: 'title',
                   image:'Images/appbar.next.rest.png',
                   count: 5,
                   backTitle: 'Back title',
                   backContent:'Back side',
                   backImage : 'Images/appbar.close.rest.png'}); 
```

# groovy - 如何在 Groovy 中获取一系列具有增量的时间范围

> ID：15049374
> 
> 赞同：1
> 
> 时间：2013-02-24T06:46:24.853
> 
> 标签：groovy

我正在尝试获取增量为 15 分钟的时间序列列表。

例如：

```
5:00 AM

5:15 AM

5:30 AM

....
...
.....

11:30 PM 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T07:28:24.540

使用 Groovy [`TimeCategory`](http://groovy.codehaus.org/api/groovy/time/TimeCategory.html)，您可以很容易地进行时间操作（例如在日期上添加分钟数）。一个可运行的例子：

```
import groovy.time.TimeCategory

def start = Date.parseToStringDate('Sun Feb 24 05:00:00 GMT 2013')

use (TimeCategory) {
    // An array of 10 Dates separated by a 15 minute time interval from 'start'.
    def timeSeries = (0..9).collect { start + (it * 15).minutes }

    // Formatted output.
    println timeSeries.collect { it.format('KK:mm a') }.join('\n')
} 
```

输出（假设系统时区为 GMT）：

```
05:00 AM
05:15 AM
05:30 AM
05:45 AM
06:00 AM
06:15 AM
06:30 AM
06:45 AM
07:00 AM
07:15 AM 
```

**更新**

为了得到 a`start`和`end`date 之间的时间序列，一种类似于我们之前所做的函数式方法是：

```
import groovy.time.TimeCategory
import groovy.time.TimeDuration

def createTimeSeries(Date start, Date end, TimeDuration interval) {
    def step = interval.toMilliseconds() as int
    (start.time..end.time).step(step).collect { new Date(it) }
}

// Usage
use (TimeCategory) {
    def start = Date.parseToStringDate('Sun Feb 24 05:00:00 GMT 2013')
    def end = Date.parseToStringDate('Sun Feb 24 06:00:00 GMT 2013')
    def timeSeries = createTimeSeries(start, end, 15.minutes)

    assert timeSeries.size() == 5 // 5:00, 5:15, 5:30, 5:45 and 6:00
} 
```

我*真的*很希望 Range 对象及其[`step`](http://groovy.codehaus.org/api/groovy/lang/Range.html#step%28int%29)方法具有更多的多态性，因此`timeSeries = createTimeSeries(start, end, 15.minutes)`可以简单地替换为`timeSeries = (start..end).step(15.minutes)`（毕竟`start`and `end`areDates ，因此彼此之间是 Comparable ，并且`15.minutes`，这是一个 TimeDuration ，可以添加到它们）；不需要该`createTimeSeries`功能:)

但是，*不要使用此实现*。由于某种原因，这种`Range#step`方法在这种情况下非常缓慢；在我的笔记本电脑上获得 1 天日期差之间的时间序列需要几秒钟，即使它们只有 97 个元素：S

这是一个更迫切但更快的解决方案：

```
def createTimeSeries(Date start, Date end, TimeDuration interval) {
    def timeSeries = []
    while (start <= end) {
        timeSeries << start
        start += interval
    }
    timeSeries
}

// Usage is the same. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:57:03.203

例如：

```
Date start = ....
int periods = 26
int incrementMinutes = 15

return (1..periods).collect {
  new Date(start.time + TimeUnit.MINUTES.toMillis(it * incrementMinutes)
} 
```

# oop - 如果 Address 继承自 PhoneNumber，它违反了哪些 OOP 原则？

> ID：15049376
> 
> 赞同：3
> 
> 时间：2013-02-24T06:46:50.987
> 
> 标签：oop, object-oriented-analysis, liskov-substitution-principle

有一本书说有一个`PhoneNumber`类，然后我们会定义一个`Address`继承自的类，`PhoneNumber`我曾经说过，我们不能这样做，因为地址不是电话号码，并且要继承，它必须是“是”关系。如：狗是一种动物，我们可以`Dog`继承自`Animal`.

但是既然我们必须遵循[LSP -- Liskov Substitution Principle](http://en.wikipedia.org/wiki/Liskov_substitution_principle)，那么“是一个”规则实际上并不是这里的决定因素，因为一个正方形“是一个”矩形（宽度 == 高度），但是 LSP 说我们可以' t 定义一个`Square`类并从该类继承`Rectangle`。简单的英文解释，我想，就是对象`aRect`可以响应消息`setWidthAndHeight(w, h)`，但`aSquare`不能正确响应，让整个程序正常运行。

如此令人惊讶的是，`Address`继承类的`PhoneNumber`类违反了“is a”关系，但并不违反 LSP。那么正式地，它违反了哪些 OOP 原则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:50:13.603

**首先，这确实*违反*了LSP。**

通常，您不会期望能够用地址替换电话号码。这就是每个人在评论中都在谈论的“常识”。

OOP 理论的要点是，遵循正式规则将使您的类对变化和奇怪的用例等事情*具有鲁棒性。*即使书中的示例实际上并没有在违反 LSP 的情况下崩溃，我想如果您尝试扩展该类架构，它也会很快崩溃。因此，为避免未来课程出现潜在错误，您应该遵循 LSP - 即使选择不这样做也不会立即破坏任何内容。

**其次，它违反了ISP（接口隔离原则）。**

这表明类中可用的方法集应该是类对象起作用所需的*最小值。*

如果 Address 类继承（或可能合理地继承）一堆在处理实际街道地址时从未使用过的 PhoneNumber 方法（例如 getAreaCode() 方法，它对于住宅地址是未定义的），那么它的接口不是最小。

其要点是 OOP 原则实际上只是指导方针。编写违反 SOLID 原则但*实际上*并没有引入错误的奇怪示例代码绝对是可能的。这并不意味着您正在规避规则；这只是意味着一旦您尝试扩展课程，您就会遇到更多错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T05:19:14.137

使用继承或扩展主要有两个原因。

1.  重用实现（用于 DRY）
2.  子类型（LSP 相关）

我不知道所有的原则，但对于你的情况，它违反了@mpm 评论的常识。

因为即使您的代码满足所有原则，它仍然可能是不合适的。换句话说，原则不能涵盖一切。

# java - Java中的ArrayList方法toArray有@SuppressWarnings("unchecked")注解

> ID：15049381
> 
> 赞同：1
> 
> 时间：2013-02-24T06:47:14.793
> 
> 标签：java, generics

我正在阅读 Josh Bloch 的 Effective Java，遇到了第 24 条：消除未经检查的警告。

他们给出了一个类的 toArray() 方法的示例，该方法会生成未经检查的警告。

```
 ArrayList.java:305: warning: [unchecked] unchecked cast
    found : Object[], required: T[]
    return (T[]) Arrays.copyOf(elements, size, a.getClass()); 
```

我无法理解编译器如何诊断它会返回 Object[]？

可能是我无法理解其背后的类型擦除现象。

有人可以解释一下如何返回 Object[] 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:13:35.357

检查它的[API 文档](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28U%5B%5D,%20int,%20java.lang.Class%29)，它清楚地说

```
public static <T,U> T[] copyOf(U[] original,
                           int newLength,
                           Class<? extends T[]> newType) 
```

第三个参数指定**newType - 要返回的副本的类** 及其`return`语句状态
：

```
Returns:
     a copy of the original array, truncated or padded with nulls to obtain the 
     specified length 
```

检查[这个](http://www.javalobby.org/java/forums/t87043.html)以及`Object[]`返回
[什么更有效：System.arraycopy vs Arrays.copyOf？](https://stackoverflow.com/questions/2589741/how-to-effectively-copy-an-array-in-java)

**编辑：在 oracle 文档教程**[http://docs.oracle.com/javase/tutorial/java/generics/erasure.html](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html) 中检查类型擦除

它说：

将泛型类型中的所有**类型参数**`Object`（如 TKV）替换为它们的边界，或者如果类型参数是无界的。因此，生成的字节码只包含普通的类、接口和方法。

# ios6 - 在 iOS6 上通过短信发送用户位置的替代方法是什么？

> ID：15049382
> 
> 赞同：0
> 
> 时间：2013-02-24T06:47:27.273
> 
> 标签：ios6, gps, sms, message

我已经完成了一个安全应用程序，它可以定位 iPhone 并通过消息将手机的 GPS 位置发送到相关号码，此功能在 iOS 5 之前运行良好，但问题是在 iOS 6 中限制在用户不知情的情况下发送短信，所以我需要此处提供帮助而不是发送消息，是否有其他可能的方法或替代此功能？任何与此方法相关的答案表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:56:21.113

您尚未指定您的 ios 应用程序是否有服务器。如果是，您可以将位置传输到服务器，然后服务器可以通过特定的 API 将其传输给目标用户。

如果这不正确，[APNS](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)就是你的朋友。这是一种仅将消息发送到所需设备的方法，即通过您的应用程序显式注册的设备。

另一个相当等效的选择是将其存储在像[parse.com](http://parse.com)这样的公共后端中。一旦其他设备启动您的应用程序，它们就可以从那里提取您的位置。如果他们的设备已经上线，则 parse.com 可以确保在您更改其数据库中的位置值后立即通知他们。

# c++ - 类似于 Python 对 C/C++ 的“if x in y”的操作？

> ID：15049386
> 
> 赞同：1
> 
> 时间：2013-02-24T06:48:16.473
> 
> 标签：c++, python, c

我已经了解 Python 有一段时间了，试图了解 C。

我想知道是否有类似 Python 的东西

```
if x in y: 
```

例如 if `x`is`2`和`y`is`2540`语句为真，因为`y`contains`x`为数字。

C/C++ 有类似的东西吗？因为如果有的话我还没有找到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T06:50:35.627

在 C++ 中，如果`y`是一个`std::string`或标准集合，您可以使用 eg [`std::find`](http://en.cppreference.com/w/cpp/algorithm/find)（或集合自己的`find`方法）来查看它是否在集合中。

* * *

在 C 中，如果`y`是一个字符串，您可以使用它[`strchr`](http://en.cppreference.com/w/c/string/byte/strchr)来查看一个字符是否在字符串中。

* * *

对于整数，没有这样的方法。您可以将数字转换为字符串（[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)在 C++ 或[`strtol`](http://en.cppreference.com/w/c/string/byte/strtol)C 中使用），然后使用上述方法之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T07:20:03.070

**对于这个特定问题，我不会将数字转换为字符串**

只是因为没有必要。相反，请查看此函数（C 代码）：

```
#include <assert.h>

int is_digit_in_number(unsigned char digit, unsigned int number)
{
    assert(digit < 10);
    while(number)
    {
        if(number % 10 == digit)
            return 1;
        number /= 10;
    }
    return 0;
} 
```

这可以节省您将数字转换为字符串的开销，并为编译器提供一些智能优化的空间。此外，imo 让读者更清楚代码**应**该做什么，这总是一件好事:)

干杯，安迪

# java - 在 playframework 中克隆实体

> ID：15049391
> 
> 赞同：0
> 
> 时间：2013-02-24T06:49:02.173
> 
> 标签：java, hibernate, jpa, playframework, playframework-2.1

我在使用 play framework 2.1 创建的应用程序中克隆实体时遇到问题。当我在下面运行方法时，我得到 RollbackException：提交事务时出错。

我的问题是：在 playframework 中使用 jpa 克隆实体的正确方法是什么？

```
@play.db.jpa.Transactional
public static Result edit(final Long id) {
    final Client client = Client.findById(id);
    if (client == null) {
        return notFound(String.format("Client %s does not exist.", id));
    }
    if(client.address.id == client.corrAddress.id){
        client.corrAddress = client.address.clone();
    }
    Form<Client> filledForm = CLIENT_FORM.fill(client);

    return ok(form.render(filledForm, "Edycja danych klienta"));
} 
```

地址克隆方法：

```
public Address clone(){
    return new Address(this.street, this.postCode, this.city);
} 
```

* * *

更新：

我对代码进行了一些更改。正如@Christopher Hunt 建议的那样，我现在不使用方法克隆。我还遇到了另一个错误。

我在客户端类中创建了方法级联：

```
public void cascade(){
    if(address.equals(corrAddress)){
        if(address.id != null && corrAddress.id != null 
                && address.id.equals(corrAddress.id)){
            address.client = this;
            address.corrClient = this;
            address.saveOrUpdate();
            corrAddress = null;
        } else {
            address.client = this;
            address.corrClient = this;
            address.saveOrUpdate();
            corrAddress = null;
        }
    } else {
        if(address.id != null && corrAddress.id != null 
                && address.id.equals(corrAddress.id)){
            System.out.println("TEST");
            address.client = this;
            address.corrClient = null;
            address.saveOrUpdate();

            String street = this.corrAddress.street;
            String postCode = this.corrAddress.postCode;
            String city = this.corrAddress.city;

            corrAddress = null;

                    /** CODE BELOW CAUSES ERROR: **/

            corrAddress = new Address(street, postCode, city);
            corrAddress.client = null;
            corrAddress.corrClient = this;
            corrAddress.saveOrUpdate();

                    /** CODE ABOVE CAUSES ERROR: **/

        } else {
            address.client = this;
            address.saveOrUpdate();
            corrAddress.corrClient = this;
            corrAddress.saveOrUpdate();
        }
    }
} 
```

Client 类中地址引用的定义：

```
@Valid
@OneToOne(mappedBy="client", orphanRemoval=true, fetch = FetchType.EAGER)
public Address address;

@Valid
@OneToOne(mappedBy="corrClient", orphanRemoval=true, fetch = FetchType.EAGER)
public Address corrAddress; 
```

现在我收到错误：

> play.api.Application$$anon$1: 执行异常[[PersistenceException: org.hibernate.HibernateException: 发现有给定标识符的多行：2，对于类：models.Address]] 在 play.api.Application$ class.handleError(Application.scala:289) ~[play_2.10.jar:2.1.0] at play.api.DefaultApplication.handleError(Application.scala:383) [play_2.10.jar:2.1.0] 在玩.core.server.netty.PlayDefaultUpstreamHandler$$anon$2$$anonfun$handle$1.apply(PlayDefaultUpstreamHandler.scala:132) [play_2.10.jar:2.1.0] 在 play.core.server.netty.PlayDefaultUpstreamHandler$$ anon$2$$anonfun$handle$1.apply(PlayDefaultUpstreamHandler.scala:128) [play_2.10.jar:2.1.0] at play.api.libs.concurrent.PlayPromise$$anonfun$extend1$1.apply(Promise.scala :113) [play_2.10.jar:2.1.0] 在 play.api.libs.concurrent。PlayPromise$$anonfun$extend1$1.apply(Promise.scala:113) [play_2.10.jar:2.1.0] javax.persistence.PersistenceException: org.hibernate.HibernateException: 发现有多个具有给定标识符的行： 2、对于类：model.Address at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1360) ~[hibernate-entitymanager-4.1.1.Final.jar:4.1.1.Final] at org.hibernate。 ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1288) ~[hibernate-entitymanager-4.1.1.Final.jar:4.1.1.Final] at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1294) ~ [hibernate-entitymanager-4.1.1.Final.jar:4.1.1.Final] 在 org.hibernate.ejb.AbstractEntityManagerImpl.merge(AbstractEntityManagerImpl.java:877) ~[hibernate-entitymanager-4.1.1.Final.jar: 4.1.1。Final] at models.clients.Client.update(Client.java:58) ~[na:na] at models.clients.Client.saveOrUpdate(Client.java:110) ~[na:na] Caused by: org.hibernate .HibernateException：找到了多行具有给定标识符的行：2，对于类：models.Address at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:104) ~[hibernate-core-4.1.1 .Final.jar:4.1.1.Final] 在 org.hibernate.loader.entity.EntityLoader.loadByUniqueKey(EntityLoader.java:161) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final]在 org.hibernate.persister.entity.AbstractEntityPersister.loadByUniqueKey(AbstractEntityPersister.java:2209) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final] 在 org.hibernate.type.EntityType.loadByUniqueKey( EntityType.java:661) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final] 在 org.hibernate。type.EntityType.resolve(EntityType.java:441) ~[hibernate-core-4.1.1.Final.jar:4.1.1.Final] at org.hibernate.type.EntityType.replace(EntityType.java:298) ~ [hibernate-core-4.1.1.Final.jar:4.1.1.Final]

重要的是我不想使用 2 元素列表进行操作。我想在我的客户端类中有 2 个文件（地址，corrAddress）。

# python - 某些命令在命令提示符中不起作用

> ID：15049398
> 
> 赞同：0
> 
> 时间：2013-02-24T06:49:22.940
> 
> 标签：python, windows

我正在使用命令提示符在 Windows 上运行 CUDA。当我打开 cmd 时，当前目录指向主文件夹。当我输入 nvcc 时，输出为`nvcc : fatal error : No input files specified`. 这意味着我可以使用文件运行 nvcc。但是，当我输入 python 时，它显示

```
'python' is not recognized as an internal or external command,
operable program or batch file. 
```

我需要更改我的目录以运行 python。我的问题是，如何在不更改目录的情况下让 python 运行？是否像在 ubuntu 中输入关于库路径更改的 cmd 一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:57:21.183

Windows 和 Ubuntu 一样，具有“路径”的概念，它是一个目录列表，shell 将搜索这些目录以尝试找到您键入的命令。因此，nvcc 命令可能位于系统路径中的目录中，但 python 命令不是。

因此，您需要在系统上找到 python 命令的位置，并将该命令的目录放入路径中。因此，如果 python 位于`C:\Python26\python.exe`，则需要添加`C:\Python26`到路径中。

超级用户有一些答案可以[描述如何修改 windows 中的路径](https://superuser.com/questions/411565/setting-path-in-windows)，或者你可以谷歌如何做到这一点。具体步骤可能会有所不同，具体取决于您拥有的 Windows 版本。

此外，您还可以忽略路径并使用完整文件名运行 python 命令。`python`您可以键入（使用上面的示例），而不是键入`C:\Python26\python`。这将具有相同的效果，虽然会多一点打字。

# css - 绝对定位块的 Z-Index

> ID：15049406
> 
> 赞同：0
> 
> 时间：2013-02-24T06:50:24.260
> 
> 标签：css, position, z-index, absolute

我以这种方式创建了一个所谓的“下拉”列表：

HTML：

```
<span><img src="images/searchall.png" alt=""/>
  <ul>
    <li>WORKSPACES</li>
    <li>REPORTS</li>
    <li>PEOPLE</li>
    <li>COMMENTS</li>
    <li>ANNOTATIONS</li>
  </ul>
</span> 
```

CSS：

```
span {position:relative;}
span ul {position:absolute; display:none;}
span:hover > ul {display:block;} 
```

我的问题是 ul 应该出现`span:hover`在. 我已经尝试为所有元素设置索引，但它根本不起作用。`img``span`

我需要做什么？

PS：我知道我`ul`在`span`. 别担心。我会修复的。图形问题目前更重要！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T08:40:13.157

看看这是否按照您想要的方式工作：

```
span {float:left; width:200px;}
span img{float:left; width:200px;}
span ul {float:left; display:none;}
span:hover > ul {display:block;} 
```

您应该浮动所有块元素并定义它们的大小，以便框可以垂直分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:52:41.867

看来你只考虑IE7+。如果你想要img下的ul，你应该给img一个大于ul的z-index的z-index，但是请考虑img下的ul的一些内容是不可见的。`jsfiddle.net/XLzmc/1/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T08:08:10.997

```
span ul { z-index: 100; }
span:hover img { z-index: 101; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T08:10:10.807

使用这个 CSS 文件：

```
span {position:relative;}
span ul {position:absolute; min-height:20px;}
span ul li {display:none;}
ul:hover > li {display:block;} 
```

总是位移`ul`来控制`li`

# clojure - 如何在 clojurescript 中获取名称中带有破折号的属性？

> ID：15049413
> 
> 赞同：6
> 
> 时间：2013-02-24T06:51:17.733
> 
> 标签：clojure, clojurescript

我在想要获取其值的 javascript 对象中有一个名为“user-agent”的属性。我如何在 clojurescript 中做到这一点？

```
(js/eval "a = {'user-agent': 'curl/7.22.0'}")
(js/eval "a['user-agent']") ;=> curl/7.22.0
(.-user-agent js/a) ;=> (returns nothing)
(. js/a -user-agent) ;=> (returns nothing) 
```

这是因为这里使用点表示法而不是括号表示法检索属性吗？[https://github.com/clojure/clojurescript/blob/master/src/clj/cljs/compiler.clj#L734](https://github.com/clojure/clojurescript/blob/master/src/clj/cljs/compiler.clj#L734)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T08:09:22.027

使用`aget`：

```
(aget js/a "user-agent") 
```

点表示法不起作用，因为 clojurescript 编译器会进行一些名称修改以支持扩展，以便支持变量名称等`?`字符`!`。除其他外，名称 munging 还将破折号更改为下划线，因此诸如字段访问`(.-user-agent js/a)`被编译为类似`a.user_agent`.

只要您留在 clojurescript 中，名称 munging 是透明的，您通常不需要注意它，除非您正在执行 javascript 互操作。在这种情况下，您可以使用 interpo 功能，例如`aget`和`aset`。

# javascript - 如何在页脚中包含 jquery - 在页眉中使用 $(document).ready 时？

> ID：15049416
> 
> 赞同：1
> 
> 时间：2013-02-24T06:52:08.123
> 
> 标签：javascript, jquery, html, performance, include

最佳实践说：在页脚中包含所有 javascript。为了更快的页面加载。

同意..但是当您在遗留代码库中的所有语句都通过您的正文 html时，您如何处理您的`jquery`包含？`$`

或者

`$(document).ready`在`head`？

**更新** 这是否意味着 - 在基本包含类似之后，应该始终在页面的页脚中添加页内 javascript `jquery`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T06:55:10.090

你不能。在包含 jQuery 之后，必须包含使用 jQuery 的所有内容，这可能意味着在这种情况下，您必须将 jQuery 留在标题中。如果您担心性能，您可以在 CDN 中包含 jQuery，例如 Google：[https ://developers.google.com/speed/libraries/devguide](https://developers.google.com/speed/libraries/devguide)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T07:02:05.363

之前必须包含 JQuery：

*   插件扩展 JQuery
*   调用立即执行的 JQuery 函数，`$(...)`例如`document.ready`
*   使用 JQuery 绑定事件

JQuery 之前不需要包含（虽然它仍然需要在之后包含）

*   未绑定或后期绑定事件中对 JQuery 的引用
*   动态创建元素中的 JQuery 选择器
*   延迟但在其处理程序中使用 JQuery 的 HTML 事件

在这些情况下，JQuery 对象在其定义之后才会被评估，即使它出现得更早。

但是，在您的情况下，对于 HTML 中的遗留代码，最好将其留在标头中以确保安全。

# node.js - Socket.IO 0.9.0 在 Heroku 上 25 秒后断开连接

> ID：15049419
> 
> 赞同：0
> 
> 时间：2013-02-24T06:52:51.540
> 
> 标签：node.js, heroku, socket.io

我正在使用 Socket.IO 0.9.0 来避免此处讨论的断开连接错误：[https ://github.com/LearnBoost/socket.io/issues/777](https://github.com/LearnBoost/socket.io/issues/777)

在我的本地机器上一切正常，但在 Heroku 上，客户端每 25 秒继续断开连接。为什么会这样？

这是我的io配置：

```
 io.configure ->
    # For heroku
    # https://devcenter.heroku.com/articles/using-socket-io-with-node-js-on-heroku
    io.set "transports", ["xhr-polling"]
    io.set "polling duration", 10
    # Use Redis to store client logic
    # io.set "store", redisStoreSocketIO
    # Minify the client libraries
    io.enable 'browser client minification'
    # Tag for caching or something
    io.enable 'browser client etag'
    # GZIP client libraries
    io.enable 'browser client gzip'
    # Make it so sockets doesn't write to log every 3 seconds
    io.set 'log level', 1
    return 
```

我检查了我的 git 提交日志并确认 Heroku 使用了正确的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:06:56.083

通过切换到 NodeJits 解决了问题。:P 我很想听听其他人是否遇到过这个问题。

# node.js - 在 AWS EC2 中用于发布订阅和缓存的 Redis 配置

> ID：15049421
> 
> 赞同：3
> 
> 时间：2013-02-24T06:53:30.900
> 
> 标签：node.js, amazon-ec2, redis, node-redis

我在 EC2 上使用 Redis，我的问题是，对于唯一目的只是 pubsub 和缓存的 redis 实例来说，理想的配置是什么？

显然我可以关闭保存到磁盘，因为我没有持久化任何东西，但是具有高内存的小磁盘会是理想的吗？

假设有 10 万用户同时订阅了他们自己的 pubsub 频道。EC2 实例后面的 EC2 实例是否足够：

```
High-Memory Extra Large Instance

17.1 GiB of memory
6.5 EC2 Compute Units (2 virtual cores with 3.25 EC2 Compute Units each)
420 GB of instance storage
64-bit platform
I/O Performance: Moderate
EBS-Optimized Available: No
API name: m2.xlarge 
```

我很难估计，因为我不知道什么或如何测量 Redis 中 pubsub 的内存占用量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T08:51:43.057

redis 中的 pub/sub 是暂时的，不会持久化到磁盘，因此，确实，您不必担心持久化 redis。

估计 redis 内存占用的经验法则应该基于`expected number of messages per second`times `average size of message`。

这是相当保守的，因为它假设将消息转发给所有订阅者需要一秒钟。

使用上述估计，如果您的 100k 用户中的每一个用户每秒发送 1 条消息，那么您将能够容纳每个 150kb 的消息。

所以这应该足够了。

# c++ - 如何为 GDB 加载额外的库？

> ID：15049422
> 
> 赞同：16
> 
> 时间：2013-02-24T06:53:44.930
> 
> 标签：c++, emacs, cuda, gdb

我正在尝试调试 CUDA 程序，但是当我`gdb`像这样启动时：

```
$ gdb -i=mi <program name>
$ r <program arguments> 
```

我越来越：

```
/home/wvxvw/Projects/cuda/exercise-1-udacity/cs344/HW2/hw: 
error while loading shared libraries: libcudart.so.5.0: 
cannot open shared object file: No such file or directory

Process gdb-inferior killed 
```

*（为便于阅读而格式化）*

（我正在使用 gdb 运行`M-x``gdb`）如果这很重要，那么 CUDA 库在`.bashrc`

```
export PATH="/usr/local/cuda/bin:$PATH"
export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/usr/local/cuda/lib64" 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-24T16:48:35.843

> 加载共享库时出错：libcudart.so.5.0

此错误与 GDB 无关：您的可执行文件在从 GDB 内部运行时找不到所需的库。

> 导出 LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/usr/local/cuda/lib64"

GDB 在新的 . 中运行您的程序`$SHELL`，因此应该可以。我想知道是否与emacs有一些交互。

无论如何，这：

```
(gdb) set env LD_LIBRARY_PATH /usr/local/cuda/lib64
(gdb) run 
```

应该解决这个问题。

**更新**：

> 正如我之前提到的，ld 路径设置正确

不，**不是**。如果是的话，你就不会有问题了。

现在，我不知道*为什么*它没有正确设置。如果你真的想知道，首先在 emacs 之外运行 GDB（排除可能的 emacs 交互）。

如果问题仍然存在， gdb `show env`, `shell env`, 添加`echo "Here"`到 your`~/.basrc`等应该可以帮助您找到没有按预期工作的地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-27T19:49:31.993

我也遇到过这个问题。一种看待它的方法是，即使进入`show env`gdb 时 LD_LIBRARY_PATH 变量是正确的，但实际执行程序时它可能不正确，因为 gdb 执行`$SHELL -c <program>`是为了运行程序。试试这个作为测试，从命令行运行`$SHELL`，然后`echo $LD_LIBRARY_PATH`. 这是正确的吗？如果没有，那么您可能需要将其添加到您的 rc（在我的情况下为 .tcshrc）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-09T18:24:29.390

尝试在 Windows 7 上运行 gdb 时，我遇到了类似的问题。我使用 MobaXterm 访问 Linux 工具箱。[我从http://www.gnu.org/software/gdb/](http://www.gnu.org/software/gdb/)单独安装了 gdb 。我通过确保 gdb 可以找到 Employed Russian 提到的正确 .dll 文件来使其工作。如果您安装了 MobaXterm，则 .dll 文件应出现在您的主目录 MobaXterm/slash/bin 中。

但是，gdb 无法识别该`LD_LIBRARY_PATH`变量。对我来说，当我使用 PATH 变量时它起作用了：

```
 (gdb) set env PATH C:\Users\Joshua\Documents\MobaXterm\slash\bin
    (gdb) run 
```

如果您将正确的路径放置到库中，我认为使用`PATH`而不是可能对您有用。`LD_LIBRARY_PATH`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T06:59:27.633

gdb 正在寻找一个库，那么您为什么要关心包含路径呢？您可能想尝试将 gdb 选项“solib-search-path”设置为指向 libcudart.so.5.0 库的位置。

# android - 使用 facebook 身份验证和 android 客户端的 Web 服务

> ID：15049424
> 
> 赞同：1
> 
> 时间：2013-02-24T06:54:02.380
> 
> 标签：android, facebook

我们的计划是使用来自 Facebook 的身份验证来实现 Web 服务，我们将拥有三个实例：Web 服务器、Facebook 身份验证服务器和客户端。Web 服务器可以使用 access_token 检索用户在 Facebook 上的信息。

当客户端是 Web 浏览器时，这可以正常工作。现在，我们要在 Android 上实现客户端。我们目前有两种方法：

1/ 创建 Facebook Android 原生应用，使用 Facebook Android SDK 获取 access_token。这种方式的问题是，获取到的 access_token 是否可以传递给 web 服务器，以便 web 服务器可以检索用户在 Facebook 上的信息？

2/ 第二种方法是使用 Android 上的 Web 浏览器对 Web 应用程序进行授权并取回 access_token，然后将此 access_token 发送到 Web 服务器以进行进一步操作。

如果我们缺少其他方法，请给我们一些建议。任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:20:29.533

您可以使用 1\. 并将访问令牌传递回您的服务器。

# wpf - WPF 应用程序的 IoC 容器

> ID：15049429
> 
> 赞同：2
> 
> 时间：2013-02-24T06:54:45.823
> 
> 标签：wpf, ioc-container, structuremap

我想开始在现有 WPF 应用程序中使用 IoC 容器。
我需要良好的性能，但根据我的阅读，大多数容器的性能确实不是问题。
我最需要的是一个非常容易使用的容器，它可以很容易地集成到我的应用程序中。我阅读了有关 StructureMap 的建议（语法看起来很棒），但在他们的网站上，过去 3 年似乎没有更新，所以我对此有些怀疑。

请提供基本使用代码示例（初始化+使用）的建议。

**编辑**
我不是在寻找一个完整的框架。我只需要 IoC 容器能力，还有很多其他的选择。我在这里找到的最后一个相关讨论已经有几年了，我想刷新一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T03:23:11.600

Structuremap 没有[死](http://jeremydmiller.com/2013/02/22/big-update-on-structuremap-3-0-progress)。

我们将它用于我们的新绿地项目，当 v3 发布时，我们可能会迁移到它。ATM 使用 2.6.4。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T07:46:34.363

答案实际上取决于个人喜好和用例的详细信息。无论如何，在使用 Unity、MEF（我知道，不是真正的 IoC 容器）并编写了一些单独的解决方案之后，我现在正在使用[Autofac](http://code.google.com/p/autofac/wiki/ComponentCreation)并且非常喜欢它。使用时间越长，越容易深入挖掘并不断揭示其优势。与其他框架相比，它提供了流畅的界面并且速度很快（顺便说一句：容器的性能可能是一个非常重要的问题，具体取决于您想要做什么）。有关 Autofac 的用法和示例，请参见上面的链接。

为什么我喜欢它：

*   容易进入
*   流畅的界面
*   支持开放泛型
*   支持装配扫描
*   与 MEF 和其他框架的互操作性
*   够快（[IoC容器的性能对比](http://www.palmmedia.de/blog/2011/8/30/ioc-container-benchmark-performance-comparison)）

不过，这是个人选择，周围还有其他好的解决方案，对于您的特殊情况甚至可能更好。

而且，或多或少偏离主题，我可以推荐这篇文章，尤其是后半部分，作为一般考虑。这对我帮助很大。所以，以防万一：

[马丁·福勒的文章](http://www.martinfowler.com/articles/injection.html#ServiceLocatorVsDependencyInjection)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T07:06:05.367

您的问题是购物清单类型的问题，因此不会长时间打开。

有许多 IoC 类型的框架，其中一些需要声明性或编程操作来完成它们的工作，其中一些使用代码语义来连接。

我建议你从[Unity](http://msdn.microsoft.com/en-us/library/ff921141%28v=pandp.40%29.aspx) ¹开始，直到你开始熟悉事物，然后当你能体会到它们之间的差异时，再寻找一些更[奇特的框架。](https://stackoverflow.com/a/1280978/109702)

¹这是一篇不错的近期介绍文章：*[Visual Studio 杂志：使用 WPF、Prism 和 Unity 创建模块化](http://visualstudiomagazine.com/articles/2012/07/01/creating-modularity-with-wpf-prism-and-unity.aspx)*

# java - ArrayList for 循环的最有效实现是什么？

> ID：15049432
> 
> 赞同：0
> 
> 时间：2013-02-24T06:55:11.617
> 
> 标签：java, android, arraylist

我最近刚刚完成了一个 android 项目，我已经完成了一些 ArrayList 的广泛代码并在上面做循环的东西。我在这里有两组循环示例。

```
ArrayList<SomeObject> object = new ArrayList<SomeObject>();

for(int c=0;c<object.size();c++){

}

for(SomeObject obj: object){

} 
```

如果您不需要递增值，我认为第二个很好，而且我认为比第一个更具可读性和简洁性。但就速度、性能和内存使用而言，这两个循环中的什么是理想或高效的使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T01:38:02.303

[根据Android 文档](http://developer.android.com/training/articles/perf-tips.html#Loops)的建议，最有效的循环方法是：

```
public void one() {
    int sum = 0;
    Foo[] localArray = mArray;
    int len = localArray.length;

    for (int i = 0; i < len; ++i) {
        sum += localArray[i].mSplat;
    }
}

public void two() {
    int sum = 0;
    for (Foo a : mArray) {
        sum += a.mSplat;
    }
} 
```

请注意，这些方式对于具有 JIT 的设备具有相同的性能。因此，如果 JIT 处于关闭状态（例如，在使用 Eclipse 调试时），您可能会观察到不同的结果（`two()`将比更快`one()`）

**更新**
我还使用以下代码检查了 ArrayLists：

```
 final ArrayList<String> testArrayList = new ArrayList<String>(1000);

    for (int i = 0; i < 1000; i++) {
        testArrayList.add(String.valueOf(i<<2));
    }

    final TimingLogger timings = new TimingLogger("Loop", "ArrayLists");

    timings.addSplit("start");

    for (int loopCount = 0; loopCount < 1000; loopCount++) {
        int sum = 0;

        for (int i = 0; i < testArrayList.size(); i++) {
            sum += Integer.valueOf(testArrayList.get(i));
        }
    }

    timings.addSplit("zero()");

    for (int loopCount = 0; loopCount < 1000; loopCount++) {
        int sum = 0;
        final int len = testArrayList.size();

        for (int i = 0; i < len; i++) {
            sum += Integer.valueOf(testArrayList.get(i));
        }
    }

    timings.addSplit("one()");

    for (int loopCount = 0; loopCount < 1000; loopCount++) {
        int sum = 0;

        for (String item : testArrayList) {
            sum += Integer.valueOf(item);
        }
    }

    timings.addSplit("two()");
    timings.dumpToLog(); 
```

并获得以下输出（使用 JIT）：

```
ArrayLists: begin
ArrayLists:      0 ms, start
ArrayLists:      2713 ms, zero()
ArrayLists:      1753 ms, one()
ArrayLists:      1922 ms, two()
ArrayLists: end, 6388 ms 
```

因此，我们能够看到，变体`one()`并`two()`提供了相似的结果，并且这些结果比这些结果更快`zero()`（因此，结果看起来类似于数组文档中描述的结果）。

# sql - 自动增量附近的 SQL 创建语句语法不正确

> ID：15049434
> 
> 赞同：16
> 
> 时间：2013-02-24T06:55:41.383
> 
> 标签：sql, sql-server

我创建了下表，但出现错误；

> *'AUTO_INCREMENT' 附近的语法不正确。*

SQL

```
CREATE TABLE [dbo].[MY_TABLE] (
    [ID] INT NOT NULL AUTO_INCREMENT,
    [NAME]          NVARCHAR (100) NULL,
    [SCHOOL]             NVARCHAR (100) NULL,
    PRIMARY KEY (ID)
); 
```

我想我做的一切都是对的。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-24T06:56:14.963

它[`IDENTITY`](http://msdn.microsoft.com/en-us/library/ms186775.aspx)不在`AUTO_INCREMENT`SQL Server 中。

试试这个：

```
CREATE TABLE [dbo].[MY_TABLE] (
    [ID] INT NOT NULL IDENTITY(1, 1),
    [NAME]          NVARCHAR (100) NULL,
    [SCHOOL]             NVARCHAR (100) NULL,
    PRIMARY KEY (ID)
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T06:58:40.873

它不是[AUTO_INCREMENT](http://msdn.microsoft.com/en-us/library/dd338603.aspx)。这里是sqlfiddle的[演示](http://sqlfiddle.com/#!3/1fa93/1)

# javascript - 加载后更改 z-index

> ID：15049437
> 
> 赞同：0
> 
> 时间：2013-02-24T06:55:50.270
> 
> 标签：javascript, scroll

我有一个函数，当用户滚动以检查 scrollTop() 并在发生特定滚动后，它将菜单的 z-index 从 -1 更改为 1。但是，这只发生在滚动时，因此如果用户刷新站点在下一次滚动发生之前，该菜单实际上是无法使用的。

有没有办法让我调用它并检查滚动的屏幕量（在刷新而不是用户滚动之后）是否符合更改 z-index 的标准？

我的 JS：

```
 function getPosition(){
       var y = $(window).scrollTop();
       var status = (y > 880) ? true : false;
       //console.log(status);
       if(status)
           $('#actual-menu').css('z-index', 1);
       else
           $('#actual-menu').css('z-index', -1);
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:06:36.927

只需`getPosition`在您的`ready`活动中运行。

[运行示例](http://www.powerlessdynamo.com/stack_exchange/answers/15049437_change-z-index-after-load.html#end)

变量限制 = 50；

```
$(function () {

    function getPosition() {
             var y = $(window).scrollTop();
             var status = (y > limit) ? true : false;

             if (status) {
                     $('#actual-menu').css('zIndex', 1);
             } else {
                     $('#actual-menu').css('zIndex', -1);
             }
    }

    $(document).on('scroll', getPosition);

    getPosition();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T06:57:28.830

z-index 属性对非定位元素没有影响，该元素必须是相对定位、绝对定位或固定的。将您的行替换为：

尝试先添加这个，

```
$("#actual-menu").css('position', 'relative');

$('#actual-menu').css('z-index', 1); 
```

# java - 修改.class文件

> ID：15049438
> 
> 赞同：0
> 
> 时间：2013-02-24T06:55:53.110
> 
> 标签：java

我想知道以下哪种解决方案更好：我想修改一些 .class 文件，并且我意识到有两种方法可以做到这一点：

*   反编译.class文件，修改它，最后再次编译。-
*   直接用十六进制编辑器修改。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:05:02.653

在这两个不好的选择中，反编译、修改和重新编译更好。更改二进制中的任何内容都可能会更改其他内容的偏移量并且更容易出错。

据我所知，.class 文件没有任何校验和或错误检查，尽管字节码确实需要验证。即便如此，编译器的输出更安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T07:19:28.877

选项#3 - 如果你要搞乱字节码，你至少可以使用一些为它设计的库，以避免重新发明轮子。例如见[asm](http://asm.ow2.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T07:41:29.327

事实证明，JSP 源代码可用于这些类。所以一种更好的方法是在 JSP 源代码中进行修改，然后使用 JSP 编译器（比如[这个](http://docs.oracle.com/cd/E19146-01/821-0790/abxcc/index.html)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T07:28:36.947

如果您没有源代码，并且确定要修改`.class`文件，我建议结合使用[Javassist](http://www.jboss.org/javassist)库（用于字节码修改）和[Java Decompiler](http://java.decompiler.free.fr)（检查源代码）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T08:34:55.223

我支持选项#1。使用 JAD 或其他一些反编译器来制作 .java、进行更改、编译并用新版本替换旧的 .class。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-29T11:04:37.917

没有涉及到字节码文件的解决方案是一个好的解决方案。

好的解决方案是：

*   获取源代码并在源代码中进行所需的更改。然后重新编译、运行单元测试、构建 WAR、重新部署等等。

*   如果您无法获得源代码，请让编写源代码的人来解决问题。

*   如果您不能让他们免费解决问题，请付钱给他们。

*   如果即使你付钱他们也不会修复它......放弃产品，寻找替代品。

**如果以上都不**是可行的选择，则仅考虑反编译和/或字节码工程的不良解决方案。即便如此，你也需要开始计划一种方法，让自己摆脱目前所处的整体状态。因为糟糕的解决方案只会让事情变得更深。

* * *

老实说，我不能说哪个是最好的坏解决方案。这取决于：

*   代码的性质，
*   您必须对代码进行的更改的性质，以及
*   您在逆向工程字节码方面的技能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-04T14:03:55.483

我使用过 cavaj、JAD 和 JD-GUI，它们给出了完全相同的反编译结果。但是 JD-GUI 的结果比其他两个更好，因此对我来说是一个更好的选择。我想分享这个，以防有人正在寻找反编译器来选择。

# c++ - Qt 5.0方法原生事件的语法需要解释

> ID：15049439
> 
> 赞同：0
> 
> 时间：2013-02-24T06:56:09.583
> 
> 标签：c++, winapi, qt5

**我正在尝试将系统消息从父进程发送到子进程。**
1.我在父方法中注册了消息：

```
UINT msg = RegisterWindowMessageA("my message"); 
```

2.在子应用程序中，我重写方法nativeEvent。
我在 Qt 助手中找到了该方法的语法，但提供的信息不够，因为那里没有描述参数用法。

```
bool MainWindow::nativeEvent(const QByteArray& eventType, void* message,
        long* result)
{
    UINT mssg = RegisterWindowMessage(L"my message");
    UINT recivedMssg = *static_cast<UINT*>(message);
    if (recivedMssg == mssg)
    {
        *result = 0;
        QMessageBox::information(this,"",QString::number(recivedMssg));
        return true;
    }
    return false;
} 
```

我做了这个实现，但它没有像我预期的那样工作，我认为 void* 消息 - 是消息的数量。
所以**我的问题是：**如何在 nativeEvent 中获取从父进程发送的消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T07:13:17.257

我还没有玩过 Qt5，但我怀疑有什么区别。对于 Windows，您应该按如下方式投射消息：

```
MSG* msg = reinterpret_cast<MSG*>(message); 
```

MSG 是在某些 Windows 标头中声明的 Windows 特定结构（windows.h 肯定就足够了）

# javascript - 检测键盘输入javascript

> ID：15049449
> 
> 赞同：-2
> 
> 时间：2013-02-24T06:57:19.963
> 
> 标签：javascript, greasemonkey

我正在编写一个脚本，我需要知道用户是否按下了`ctrl+s`或`ctrl+p`。我该怎么做呢。帮助将不胜感激。问题是一旦用户按下`ctrl+s`页面就不会进入脚本，它会直接被保存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T07:02:03.457

更新：[**演示**](http://jsfiddle.net/4wSUS/)

```
$(document).keydown(function(e){
if (e.keyCode==80 && e.ctrlKey)
    $("body").append("<p>ctrl+p detected!</p>");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T07:01:25.443

您必须编写一个脚本来侦听并取消 onkeydown 事件，这样浏览器就不会执行默认行为。或者也许使用这样的脚本？[http://www.stepanreznikov.com/js-shortcuts/](http://www.stepanreznikov.com/js-shortcuts/)

# awk - 哇 | 比较其他文件中的字段后更新字段编号

> ID：15049452
> 
> 赞同：0
> 
> 时间：2013-02-24T06:57:26.803
> 
> 标签：awk

*   **输入文件1：file1.txt**
    MH=919767, **918975**
    DL= **919922**
    HR=919891,919394,919812
    KR=919999,918888

*   **输入文件2：file2.txt**
    aec,919922783456,a5,b3,,,asf
    abc,918975583456,a1,b1,,,abf
    aeci,919998546783,a2,b4,,,wsf

*   **输出文件**
    aec,919922783456,a5,b3, **DL** ,,asf
    abc,918975583456,a1,b1, **MH** ,,abf
    aeci,919998546783,a2,b4, **NOMATCH** ,,wsf

*   **笔记**

    *   需要在**Input file1.txt - 2nd field with "=" separted) 中比较电话号码（** **Input file2.txt - 2nd field** - 仅初始 6 位） 。如果电话号码的初始 6 位匹配，则 OUTPUT 应包含从文件（输入文件 1）到**第 5 字段输出的 2 位代码**
    *****   File1.txt 具有用于多个电话号码首字母的**单个代码**（例如 MH）。****

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:51:45.897

尝试类似：

```
awk '
  NR==FNR{
    for(i=2; i<=NF; i++) A[$i]=$1
    next
  } 
  {
    $5="NOMATCH"
    for(i in A) if ($2~"^" i) $5=A[i]
  } 
  1
' FS='[=,]' file1 FS=, OFS=, file2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:02:54.027

如果您有`GNU awk`，请尝试以下操作。像这样运行：

```
awk -f script.awk file1.txt file2.txt 
```

内容`script.awk`：

```
BEGIN {
     FS="[=,]"
     OFS=","
}

FNR==NR {
    for(i=2;i<=NF;i++) {
        a[$1][$i]
    }
    next
}

{
    $5 = "NOMATCH"
    for(j in a) {
        for (k in a[j]) {
            if (substr($2,0,6) == k) {
                $5 = j
            }
        }
    }
}1 
```

或者，这是单线：

```
awk -F "[=,]" 'FNR==NR { for(i=2;i<=NF;i++) a[$1][$i]; next } { $5 = "NOMATCH"; for(j in a) for (k in a[j]) if (substr($2,0,6) == k) $5 = j }1' OFS=, file1.txt file2.txt 
```

结果：

```
aec,919922783456,a5,b3,DL,,asf
abc,918975583456,a1,b1,MH,,abf
aeci,919998546783,a2,b4,NOMATCH,,wsf 
```

* * *

如果您有“旧” `awk`，请尝试以下操作。像这样运行：

```
awk -f script.awk file1.txt file2.txt 
```

script.awk 的内容：

```
BEGIN {
     # set the field separator to either an equals sign or a comma
     FS="[=,]"
     # set the output field separator to a comma
     OFS=","
}

# for the first file in the arguments list
FNR==NR {
    # loop through all the fields, starting at field two
    for(i=2;i<=NF;i++) {

        # add field one and each field to a pseudo-multidimensional array
        a[$1,$i]
    }

    # skip processing the rest of the code
    next
}

# for the second file in the arguments list
{
    # set the default value for field 5
    $5 = "NOMATCH"

    # loop though the array
    for(j in a) {

        # split the array keys into another array
        split(j,b,SUBSEP)

        # if the first six digits of field two equal the value stored in this array
        if (substr($2,0,6) == b[2]) {

            # assign field five 
            $5 = b[1]
        }
    }

# return true, therefore print by default
}1 
```

或者，这是单线：

```
awk -F "[=,]" 'FNR==NR { for(i=2;i<=NF;i++) a[$1,$i]; next } { $5 = "NOMATCH"; for(j in a) { split(j,b,SUBSEP); if (substr($2,0,6) == b[2]) $5 = b[1] } }1' OFS=, file1.txt file2.txt 
```

结果：

```
aec,919922783456,a5,b3,DL,,asf
abc,918975583456,a1,b1,MH,,abf
aeci,919998546783,a2,b4,NOMATCH,,wsf 
```****

# database - 将普通 Postgres 数据库转换为 PostGis 数据库

> ID：15049455
> 
> 赞同：13
> 
> 时间：2013-02-24T06:57:35.393
> 
> 标签：database, postgresql, postgis

我有一个包含大量地理编码数据的普通 postgres 数据库。这只是存在纬度和经度两列。

我想将此数据库转换为 PostGIs 数据库。任何人都可以建议我转换我拥有的数据库的方法吗？我不想创建一个新的基于 postgis tempalte 的数据库，然后一一移动整个数据。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-24T22:05:50.403

首先，确保系统上安装了 PostGIS，然后使用以下命令为数据库[创建](https://www.postgresql.org/docs/current/sql-createextension.html)PostGIS 扩展：

```
CREATE EXTENSION postgis; 
```

接下来，使用几何列在空间上启用每个表，并使用长/纬度数据点填充该列：

```
ALTER TABLE mytable ADD COLUMN geom geometry(Point,4326);
UPDATE mytable SET geom = ST_SetSRID(ST_MakePoint(long, lat), 4326); 
```

还可以考虑使用[地理](https://postgis.net/workshops/postgis-intro/geography.html)类型：

```
ALTER TABLE mytable ADD COLUMN geog geography(Point,4326);
UPDATE mytable SET geog = ST_MakePoint(long, lat)::geography; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-18T19:30:43.263

我知道这是旧的......但我会添加一些东西来解决以前的问题：

@Cerin，确保您 apt-get install postgresql-xx-postgis-2.1，而不仅仅是 apt-get install postgis。我之前也遇到过这个问题

# jquery - MVC4 从嵌套集合中添加/删除（使用 jQuery？）

> ID：15049463
> 
> 赞同：1
> 
> 时间：2013-02-24T06:59:10.007
> 
> 标签：jquery, asp.net-mvc-4, nested-attributes

在使用 webforms 很长一段时间后，我正在尝试学习 ASP.net MVC，如果我混淆了，请道歉。我无法超越每个模型的简单编辑页面结构。我有员工，他们被外部引用到项目，我想在一页上编辑这一切。

我有一个员工模型：

```
public class Employee
{
    public string UserID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public List<ProjectXref> Projects { get; set; }
} 
```

这是我的 ProjectXref 模型：

```
public class ProjectXref
{
    public Project Project { get; set; }
    public string Role { get; set; }
} 
```

我为 ProjectXref 创建了一个编辑器模板：

```
@model Relationships.Models.ProjectXref

<tr>
    <td><span class="h3"> @Model.Project.ProjectName </span> </td>
    <td>@Html.EditorFor(model => model.Role)</td>
    <td>
        @Html.HiddenFor(model => model.Project.ProjectKey)
        <a class="btnDel" > </a>
    </td>
</tr> 
```

...在我的员工编辑视图中，我只是使用 EditorFor 为与我的员工关联的每个项目呈现 tr 行。

```
@Html.EditorFor(model => model.Projects) 
```

我现在不知道该怎么处理这些。我开始使用一些 jQuery 来删除我的 ProjectXref：

```
$(".btnDel").live("click", function () {
    $(this).parents('tr').remove();
    return false;
}); 
```

看起来不错，但如果我删除第一个项目然后提交，以下项目都不会出现在我的帖子中。我认为这与正在发生的任何魔术绑定有关。我的“Projects_0__Title”字段丢失，因此 MVC 跳过尝试绑定其他任何内容。

我的目标：我想在我的页面上动态修改我的项目列表，这意味着能够删除项目、添加新项目或编辑项目（更改员工相对于项目的角色）。我试图让 MVC 这样做是错的吗？在我看过的教程中，大多数人会让你编辑和添加新的 ProjectXrefs，每个都有单独的页面，但这似乎是糟糕的 UI。

在我看来，我希望能够将新的 ProjectXref 编辑器 HTML 添加到我的表单中，并且在发布表单时，让 ASP.net 将其识别为新的 ProjectXref 并将其绑定。同时，如果我删除与现有 ProjectXref 关联的字段，我希望 ASP.net 能够识别我的 ProjectXrefs 之一的字段现在丢失，因此删除该 ProjectXref。我是否使用 EditorTemplates 走错了路？

**编辑：我的解决方案**

感谢@Parv Sharma，我最终为我的班级创建了一个新属性：

```
public string ProjectsJson
{
    get { return JsonConvert.SerializeObject(Projects); }
    set { Projects = JsonConvert.DeserializeObject<List<ProjectXref>>(value); }
} 
```

然后我将它作为隐藏添加到我的视图中：

```
@Html.HiddenFor(model => model.ProjectsJson) 
```

然后我使用 AngularJS（无论如何都要学一个）从我的领域读取 JSON 并将其呈现在我的 UI 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:25:38.380

我实现这一点的方法是保留一个隐藏字段，以跟踪添加或删除并且是集合的一部分的字段。
这样，每当您删除集合中的元素时，您只需要更新 JSON 并且在回发它时读取 json 并相应地更新集合
以序列化或反序列化，`JSON`您可以使用内置`JavaScriptSerializer`或`newtonsoft.json`

# php - javascript 删除了以 0 开头的变量

> ID：15049471
> 
> 赞同：1
> 
> 时间：2013-02-24T07:00:29.343
> 
> 标签：php, javascript, mysql

我有一个带有一个名为 ESN 的输入字段的表单，用户输入一个通常以 0 开头的数字，然后是一堆随机数（基本上就像一个序列号）。在这个 esn 之后，我有一个调用 javascript 代码的复选框

```
esn1 = 012345678998875
esn2 = 321446894441146 
```

这是我的脚本：

```
//change picked up to yes
function applyPickedUp(row_id){  
var ESN = row_id; //phoneID 
$.ajax({
    url: "savepickedup.php",  
    type: "GET",
      //pass data like this 
    data: {ESN:ESN},    
    cache: false,
    success: function(data) {  
    if (data=="1")
    $('#message').html("<div class='alert alert-success'>Record updated! Refresh to remove ESN from report.</div>" ); 
    } 

});  
//start the ajax            
} 
```

我的问题是，对于以 0 开头的 ESN，脚本会删除零，因此它不会更新我的数据库。因此，例如 esn 012345678998875 改为 12345678998875 。只要 ESN 不以 0 开头，我的代码就可以正常工作。请指教。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T07:05:20.030

尝试在 javascript 字符串中创建变量。改变这个：

```
esn1 = 012345678998875
esn2 = 321446894441146 
```

对此：

```
esn1 = "012345678998875";
esn2 = "321446894441146"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T07:09:29.093

嗯，你有两个问题。首先，如果您在 Javascript 中声明一个以前导 开头的数字变量`0`，您可能会编写一个八进制数。如果它不包含任何 8 或 9，Javascript 会将其解释为八进制。例如：

```
num = 012345678998875; // num is 12345678998875
num = 012345677777755; // num is 718048067565 (!) 
```

其次，无论如何您都无法将前导零编码为数字，而且这些数字足够长，如果您再添加一个数字，您将面临溢出 Javascript 数字范围的危险。本质上，如果这些数字主要用于识别而不是用于数学目的，则需要将它们视为字符串。

```
esn1 = "012345678998875"; 
```

# java - 正则表达式解析堆栈跟踪中的完全限定的 Java 名称

> ID：15049472
> 
> 赞同：2
> 
> 时间：2013-02-24T07:01:09.750
> 
> 标签：java, regex, stack-trace

`(at)(\\s)(\\w.+)(\\(\\w.+)(\\))`我为以下字符串编写了这个正则表达式：

```
at sun.reflect.NativeMethodAccessorImpl.invoke0(Method.java:585) 
```

但它没有用。你能帮我改写正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:22:26.730

这个正则表达式应该可以解决问题（[demo](http://fiddle.re/dbp66)）：

```
at (.*)\.(.*)\(([^:]*):?([\d]*)\) 
```

将返回第 1 组中的 package.class、第 2 组中的方法、第 3 组中的文件名和第 4 组中的最终行号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T07:09:28.657

你需要逃避这样的时期`\.`。还`\w`匹配单个单词字符，而不是整个单词。尝试这样的事情：

```
at\s(\w+\.)+\(\w+\.\w+:\d+\) 
```

# linux - 为什么 awk 中的双引号中的 ~ 会导致语法错误

> ID：15049476
> 
> 赞同：0
> 
> 时间：2013-02-24T07:01:30.763
> 
> 标签：linux, bash, awk

我要为我的设备编写脚本。这是我的初始代码：

```
dev_name=random_sting
major=`awk "\$2 ~ /^${dev_name}\$/ { print \$1 }" /proc/devices` 
```

然后发生错误

```
awk:  ~ /^random_string$/ { print  }
awk:  ^ syntax error 
```

同时，我做了一个实验：

```
var1=random_string
echo "\$ /^$var1\$/ \$" 
```

输出是

```
$ /^random_string$/ $ 
```

看来语法应该是正确的，有人可以给我答案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T07:22:44.853

您需要在反引号内进行额外的转义。尝试`major=$( .. )`改用..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T07:24:00.107

在这种情况下，您还可以绕过转义的需要，使用 的`-v`选项`awk`，像这样

```
major=`awk -v dev="$dev_name" '$2 ~ dev { print $1 }' /proc/devices` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T07:40:07.890

您在反引号内的表达式将通过 2 个 shell/unescape 阶段。

```
awk "\$2 ~ /^${dev_name}\$/ { print \$1 }" /proc/devices 
```

...将被您的 bash 扩展和取消转义为...

```
awk "$2 ~ /^random_string$/ { print $1 }" /proc/devices` 
```

...由反引号开始的外壳将再次扩展并取消转义到...

```
awk "~ /^random_string$/ { print  }" /proc/devices` 
```

...因为 $1 和 $2 没有定义。

您要做的是两次逃脱$ 1和$ 2；

```
awk "\\\$2 ~ /^${dev_name}\$/ { print \\\$1 }" /proc/devices 
```

...使执行的最终结果...

```
awk "$2 ~ /^random_string\$/ { print $1 }" /proc/devices 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-24T14:45:13.350

我就是这样解决问题的。让我们仔细检查这一行：

```
dev_name='loop' ; major=` awk "\\\$2 ~ /^\${dev_name}\\\$/ { print \\\$1 }" /proc/devices` ; echo $major 
```

bash 将其展开两次，并且双引号不会在反引号 (`) 之间展开，因此这将输出正确的结果。

# linux - 使用 AWK 从两个文件中减去 n 列

> ID：15049478
> 
> 赞同：5
> 
> 时间：2013-02-24T07:01:51.277
> 
> 标签：linux, perl, bash, awk, gawk

我有两个包含 N 列的文件

文件1：

```
A   1   2    3  .......  Na1
B   2   3    4  .......  Nb1 
```

文件2：

```
A   2   2    4  .......  Na2
B   1   3    4  .......  Nb2 
```

我想要一个输出，其中 File1 的第 1 列值将从 File2 的第 1 列中减去，这样直到第 N 列，如下所示：

```
A  -1   0    -1  ........ (Na1-Na2)
B   1   0     0  ........ (Nb1-Nb2) 
```

如何做到这一点是 AWK 或 Linux 环境中的 Perl 脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T08:29:24.107

这已经回答了，但我会添加一个单行。它使用`paste`, 连接文件，并`awk`减去：

```
paste file{1,2} | awk '{for (i=1;i<=NF/2;i++) printf "%s ", ($i==$i+0)?$i-$(i+NF/2):$i; print ""}' 
```

验证：

```
$ cat file1
A   1   2    3   4  5
B   2   3    4   5  6

$ cat file2
A   2   2    4 10 12 
B   1   3    4  3 5

$ paste file{1,2} | awk '{for (i=1;i<=NF/2;i++) printf "%s ", ($i==$i+0)?$i-$(i+NF/2):$i; print ""}'
A -1 0 -1 -6 -7 
B 1 0 0 2 1 
```

它要求两个文件具有相同的列数。非数字列应位于同一位置。如果不是数字，则打印第一个文件中的值，否则打印差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T09:24:31.430

尝试：

```
awk '{split($0,S); getline<f; for(i=2; i<=NF; i++) $i-=S[i]}1' OFS='\t' f=file1 file2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T09:20:18.530

```
awk 'FNR==NR{for(i=2;i<=NF;i++)a[FNR"-"i]=$i;next}{printf "\n"$1" ";for(i=2;i<=NF;i++){printf $i-a[FNR"-"i]" "}}' file1 file2
> cat file1
A   1   2    3
B   2   3    4
> cat file2
A   2   2    4
B   1   3    4
> awk 'FNR==NR{for(i=2;i<=NF;i++)a[FNR"-"i]=$i;next}{printf "\n"$1" ";for(i=2;i<=NF;i++){printf $i-a[FNR"-"i]" "}}' file1 file2 
A 1 0 1 
B -1 0 0 
> 
```

或者把它放在一个文件中

```
#!/usr/bin/awk
FNR==NR{
   for(i=2;i<=NF;i++)
   a[FNR"-"i]=$i;next
     }
   {
    printf "\n"$1" ";
    for(i=2;i<=NF;i++)
    {
     printf $i-a[FNR"-"i]" "
    }
   } 
```

并执行为：

```
awk -f file.awk file1 file2 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-24T13:07:58.043

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk File2 File1 | rev | column -t | rev 
```

内容`script.awk`：

```
FNR==NR {
    for(i=2;i<=NF;i++) {
        a[$1][i]=$i
    }
    next
}

{
    for(j=2;j<=NF;j++) {
        $j-=a[$1][j]
    }
}1 
```

或者，这是单线：

```
awk 'FNR==NR { for(i=2;i<=NF;i++) a[$1][i]=$i; next } { for(j=2;j<=NF;j++) $j-=a[$1][j] }1' File2 File1 | rev | column -t | rev 
```

结果：

```
A  -1  0  -1
B   1  0   0 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-24T07:25:45.043

大概是这样的？恐怕我无法测试这段代码，因为我目前手头没有电脑。

该程序需要两个文件的名称作为命令行参数，并将结果输出到`STDOUT`.

```
use strict;
use warnings;
use autodie;

my @fh;
for my $filename (@ARGV) {
  open my $fh, '<', $filename;
  push @fh, $fh;
}

until (grep eof $_, @fh) {
  my @records;
  for my $fh (@fh) {
    my $line = <$fh>;
    chomp $line;
    push @records, [ split ' ', $line ];
  }

  $records[0][$_] -= $records[1][$_] for 1 .. $#{$records[0]};
  print "@{$records[0]}\n";
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-24T07:22:28.543

像这样的东西：

```
use strict;
use warnings;

my (@fh, @v);
for (@ARGV) {
  open (my $handle, "<", $_) or die ("$!: $_");
  push @fh, $handle;
}
while (@v = map { [split ' ', <$_> ] } @fh and defined shift @{$v[0]}) {
  print join(" ", (shift @{$v[1]}, map { $_ - shift(@{$v[1]}) } @{$v[0]})), "\n";
}
close $_ for (@fh); 
```

跑步：

```
 perl script.pl input1 input2 
```

# android - 从服务创建活动

> ID：15049481
> 
> 赞同：-1
> 
> 时间：2013-02-24T07:02:03.653
> 
> 标签：android, android-intent, service, android-activity, android-pendingintent

我有活动 A、B、C、D 和服务 S。活动的层次结构是 A->B->C->D

当服务收到信号时，服务会添加一个通知，当用户单击它时，我想创建一个新活动 E。如果有现有任务，则将该活动创建为最底层活动的子项。（即A->B->C->E或A->E或A->B->E或A->B->C->D->E）在这种情况下，A,B,C, D 必须与以前的状态相同，E 是一个新活动。如果没有现有任务（没有正在运行的任务），则在另一个新的活动A下创建该活动。（即A->E）在这种情况下，A，E都是新活动。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:20:53.777

根据我的理解，如果你有

```
A -> B -> C -> D -> E 
```

那么这意味着当从 E 返回时，您最终会进入 D，然后是 C 等。否则，您对假设的陈述是**错误**的。

基本上你可以*做*的而不是做AE只是直接进入E并通过将这些数据打包到你的通知数据中来传递将导致相应对话的数据。

如果您可以转到 E，则无需转到 AE，如果用户使用后退按钮返回，您应该拦截它并处理流程以尊重您的设计。这样做应该始终从 EA 逐步进行。否则，您以糟糕的方式实现了应用程序的流程。

此外，您对 AD 的设置如何是**糟糕的设计**。您**应该**更改它以反映我所描述的内容。

## 一个例子

```
Main screen (A)

List Screen (B)

Message Screen (C)

Details Screen (D) 
```

这是有道理的，并且是更好的流程。直接前往 D，然后使用 Back 按钮从 D 向后遍历到 A。

## 笔记

任何设置屏幕**都不应该**出现在流程中，因为这会让用户感到困惑，因为他们没有遍历它，因此它是一个无*上下文*的屏幕来显示。而且您的服务也不应该是流程的一部分，它的状态应该由活动根据需要维护。

# google-chrome - 使用扩展脚本中的 chrome.storage api - 数据由页面 URL 命名？

> ID：15049484
> 
> 赞同：0
> 
> 时间：2013-02-24T07:02:33.583
> 
> 标签：google-chrome, google-chrome-extension

我正在使用 chrome.storage api，它应该允许我们在不需要后台页面的情况下访问用户的数据存储：

[https://developer.chrome.com/stable/extensions/storage.html](https://developer.chrome.com/stable/extensions/storage.html)

该扩展在任何特定页面上都可以正常工作，但似乎数据的存储方式使得在为具有不同 URL 的页面加载扩展时无法访问数据。

基本获取数据代码：

```
var key = 'commonKey';
chrome.storage.sync.get(key, function(items) {console.log(items);} 
```

我正在匹配[http://test.com/ABC](http://test.com/ABC)之类的 URL 上的内容脚本，并且数据在该页面的多个加载中正确地保留。但是，当我加载[http://test.com/CDE](http://test.com/CDE)时，它会获取并设置一组不同的数据（并且不会影响 ABC 页面上加载的数据）。

这里有一些行为是对每个 URL 的数据进行命名空间吗？我查看了文档和其他问题，但找不到任何类似的东西。

清单看起来像：

```
{
  "name": "Test script",
  "manifest_version": 2,
  "content_scripts" : [
    {
      "matches": ["http://www.test.com/*"],
      "js": ["jquery.min.js", "contentscript.js"]
    }
  ],
  "permissions": [
    "storage"
  ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:31:00.657

问题出在这里：

```
var key = 'commonKey';
chrome.storage.sync.get(key, function(items) {console.log(items);} 
```

设置数据时使用 key 代替 'commonKey' 导致数据存储在字符串 'key' 而不是预期的 'commonKey' 下。这加上其余代码中的逻辑导致了上述行为。

# c++ - Visual Studio 2012 c++ ATL/COM

> ID：15049492
> 
> 赞同：3
> 
> 时间：2013-02-24T07:05:09.957
> 
> 标签：c++, visual-c++, com, atl

我找不到任何关于使用 Visual Studio 2012 c++ 进行 COM+/ATL 开发的书籍。学习 ATL 的最佳资源是什么？2000-2003 年写的旧书是否仍然适用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T10:33:54.987

旧书仍然享有盛誉，在过去几年中，ATL 更改主要是错误修复和较小的改进（例如，很容易看出是否比较了 2008、2010 和 2012 Visual Studio 的 \VC\atlmfc\include\atl*.* 文件）。

# c# - 当前实现异步套接字客户端的实践标准是什么？

> ID：15049496
> 
> 赞同：9
> 
> 时间：2013-02-24T07:05:38.300
> 
> 标签：c#, sockets, asynchronous, tcp, networkstream

我寻找满足以下要求的最佳实践：

*   以异步方式处理多个客户端套接字的框架
*   每个传入消息协议规定每个消息都是格式字符串，并用换行符“\n”标记为完整。
*   我可以完全控制客户端，但不能控制服务器端。服务器接受并发送带有换行符的基于字符串的消息以标记消息的完成。
*   我希望能够在任何给定时间通过每个连接的套接字发送消息（每个套接字都可以接收和发送消息）。
*   传入消息应通过回调转发。
*   我希望能够在我的实现中选择是否将来自所有连接的套接字的所有传入完整消息路由到一个回调，或者每个套接字客户端是否实现自己的回调。
*   我最多连接 4 个客户端/套接字。因此，我寻找利用如此有限数量的套接字的建议，但是能够同时管理所有这些。

我想知道我使用的框架`BeginReceive`和`EndReceive`实现的 IAsyncResult 回调是否是最先进的，因为我的目标是 .Net 4.5。是否有更好的解决方案，例如使用 NetworkStream 或其他 API 选择？BeginReceive/EndReceive 实现真正困扰我的是，在 EndReceive 之后我必须再次调用 BeginReceive 并再次注册回调。对我来说，这听起来像是一个可怕的开销。为什么不能在任何时候异步添加新数据，同时另一个上下文构建完整的消息，然后通过引发的事件进行路由？

使用 IAsyncResult 的论点通常是在处理线程处理时给出的，但与以下内容相反的是：使用 NetworkStream 并简单地从流中读取和写入。如前所述，仅交换字符串消息，并且每个协议的每个消息都由换行符标记为完成。一个单独的任务/线程将通过`ReadLine()`. 它可能不会比这更简单，不是吗？

我基本上要问的是，如何才能使以下代码真正异步？

```
public class SocketClient
{
    private TcpClient client;
    private StreamReader reader;
    private StreamWriter writer;

    public event Action<string> MessageCallback;

    public SocketClient(string hostname, int port)
    {
        client = new TcpClient(hostname, port);

        try
        {
            Stream stream = client.GetStream();
            reader = new StreamReader(stream);
            writer = new StreamWriter(stream);
            writer.AutoFlush = true;

            //Start Listener on port
            StartListener();
        }
        catch (Exception e)
        {
            throw new Exception(e.ToString());
        }
    }

    public void StartListener()
    {
        Task task = Task.Factory.StartNew(() =>
            {
                while (true)
                {
                    if (MessageCallback != null)
                    {
                        MessageCallback(reader.ReadLine());

                    }

                    //Thread.Sleep(200);
                }
            });
    }

} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T17:30:23.037

目前没有现行标准或惯例。您有多种选择，每种选择都有优点和缺点：

1.  [将 TAP 方法包装](http://msdn.microsoft.com/en-us/library/hh873178.aspx)成`Task`s 并使用`async`/ `await`。
    *   优点：做起来很简单。
    *   缺点：级别低；您必须`async`自己在“无限”循环中管理所有各种操作，并处理每个连接的状态管理。
2.  [将 Socket`*Async`方法](http://blogs.msdn.com/b/pfxteam/archive/2011/12/15/10248293.aspx)包装成`Task`s 并使用`async`/ `await`。
    *   优点：速度。这是最快和最可扩展的选项。
    *   缺点：您仍然有低级的“无限”循环和状态管理，其中代码比选项（1）更复杂。
3.  将套接字完成转换为[Rx 事件](http://msdn.microsoft.com/en-us/data/gg577609.aspx)。
    *   优点：您可以封装“无限”循环并将完成视为事件流。
    *   缺点：Rx 的学习曲线很长，这不是一个简单的用例。管理每个连接的状态可能会变得复杂。
4.  将套接字完成转换为[TPL 数据流](http://msdn.microsoft.com/en-us/library/hh228603.aspx)。
    *   优点：（同Rx）：封装循环，获取数据流。
    *   缺点：学习曲线比 Rx 更容易，但是对于每个连接你仍然有一些复杂的状态管理。
5.  使用现有的库，例如我的[Nito.Async](http://nitoasync.codeplex.com/)库，它提供[EAP](http://msdn.microsoft.com/en-us/library/ms228969.aspx)套接字类。
    *   优点：非常容易使用；一切都是一个事件，没有多线程问题。此外，状态管理的复杂部分已为您完成。
    *   缺点：不能像较低级别的解决方案那样扩展。

对于您的情况（每秒几百条消息，少于一百个套接字），我建议使用我的 Nito.Async 库。这是这些选项中最容易开始工作的一种。

关于您的协议，您必须`\n`手动解析 s 并进行自己的缓冲。（以上所有选择都是如此）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T05:54:51.863

根据我的建议，请使用新的异步形式`XXXReceive`和“XXXSend”（其中 XXX 代表`Begin`和`End`），可用的新方法是[ReceiveAsync](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receiveasync.aspx)和[SendAsync](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.sendasync.aspx)方法，它们使用[SocketAsyncEventArgs](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketasynceventargs.aspx)来传递回调事件处理程序上的套接字和其他信息。

我在 msdn 存档上看到了一个很好的套接字客户端和服务器的工作示例，该示例可扩展至 500 个连接（正如我在其中一个项目改编中测试过的那样），但目前我无法从谷歌搜索中找到该链接.. 但在这里是来自 msdn 存档的关于同一主题的另一个链接，希望它对您有所帮助 - [Get Closer to the Wire with High-Performance Sockets in .NET](http://msdn.microsoft.com/en-us/magazine/cc300760.aspx) ..

## 更新

首先，**我**只能为您提供最终实现的想法，并尽可能提供一些简短的示例代码片段。好的，我在这里提供更多详细信息

**我想你可以跳到最后一段的链接。;)**

让我强调一次，因为我想，我说`SendAsync`而`ReceiveAsync`不是`BeginReceive/EndReceive`，`BeginSend/EndSend`即基于事件的异步模式（EAP）

> 使用异步形式的 Socket 方法的好处是它们是套接字编程的无异常方法，可以证明比 BeginSend/EndSend 方法更快。

这是我发现最多可用于 500 个并行连接的示例的链接 - [Networking Samples for .NET v4.0](http://archive.msdn.microsoft.com/nclsamples/Wiki/View.aspx?title=Socket%20Performance)

因为您需要使用 .NET 4.5 的等待/异步功能。这是 .NET 4.5 代码片段，显示了`WebSocket`类的用法，其中也可以适应`Socket`实现 -[支持 WebSockets 协议](http://www.asp.net/vnext/overview/aspnet/whats-new#_Toc318097383)（我猜 WebSocket`AspNetWebSocketContext`将是 Socket 的`SocketAsyncEventArgs`）

*我从[MSDN - Parallel Programming 团队博客中找到了](http://blogs.msdn.com/b/pfxteam)[Awaiting Socket Operations](http://blogs.msdn.com/b/pfxteam/archive/2011/12/15/10248293.aspx)示例代码，可用于从 .NET 4.5 框架实现 await/async。*

我希望这对您有所帮助。

# sockets - 检测连接丢失

> ID：15049497
> 
> 赞同：0
> 
> 时间：2013-02-24T07:06:01.170
> 
> 标签：sockets, tcp, client

我在java中有一个客户端和一个服务器程序。服务器正在通过 wifi 向客户端发送数据。客户端的 wifi 连接中断会导致它抛出异常并退出接收循环。服务器仍在继续发送数据。服务器使用的方法是oos.writeObject()。如何检测服务器客户端的 wifi 中断并导致服务器退出发送循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:22:10.307

您的客户端（在某些类型的 wifi 连接失败模式下）在连接消失时立即通知的原因是因为 wifi 接口是客户端本地的，并且操作系统一旦检测到它就将其删除。从服务器的角度来看，它是一个遥远的网络链接发生故障。

当连接断开时，首先服务器会继续缓冲数据。如果缓冲区（服务器的操作系统缓冲区加上 TCP 窗口大小）变满，如果服务器尝试发送更多数据，它将阻塞。

稍后，如果连接仍然断开，服务器将声明连接已超时，您将收到异常。相反，如果连接恢复，缓冲区将清空并恢复正常数据流。

即使可以，您实际上也不想更改任何内容，以便在任何遥远的网络跃点发生故障时服务器的连接立即超时。如果你这样做了，你的连接将非常脆弱：每一个小的网络重新收敛事件或短暂的短暂故障都会破坏你的连接。

# python - 如何确定我的 mod_wsgi 应用程序是否在 HTTPS 上运行？

> ID：15049503
> 
> 赞同：0
> 
> 时间：2013-02-24T07:06:26.687
> 
> 标签：python, https, apache2, mod-wsgi

我刚刚继承了一个在 Apache 2.4、mod_wsgi 3.4 和 Python 2.7 下运行的 Python 应用程序。同一个应用程序同时处理 HTTP 和 HTTPS 请求。

在现有代码中，它试图通过检查环境来确定请求是否为 HTTPS：

```
if context.environ.get('HTTPS') not in ['on', '1']: 
```

此检查失败，即使连接实际上是 HTTPS。在查看显示环境变量的扩展回溯时，我发现它`HTTPS`实际上不在从 Apache 传递的环境中。

所以我的问题是：

*   这是 Apache 配置问题吗？
*   此检查是否完全错误并且应该重写以检查其他内容？如果是这样，是什么？
*   或者我应该像我真正想做的那样放弃并用 nginx 替换 Apache？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T08:02:19.217

Apache`mod_ssl`可以配置为设置`HTTPS`环境变量，但出于性能原因[，默认情况下不这样做。](http://httpd.apache.org/docs/2.2/mod/mod_ssl.html)

您可以显式启用它，但由于您使用的是 WSGI 应用程序，因此检查[`wsgi.url_scheme`](http://www.python.org/dev/peps/pep-0333/#environ-variables)环境变量可能是一个更好的主意；WSGI 规范保证了它的存在，如果您最终迁移到 nginx，它不需要对您的应用程序进行任何进一步的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T07:58:08.220

使用 CGI、WSGI 或 SSI 时，您需要建议 Apache 发送`HTTPS`标头，否则它将为空。您可以使用配置中的[mod_env](http://httpd.apache.org/docs/2.0/mod/mod_env.html)或 .htaccess执行此操作

```
<IfModule mod_env.c>
   SetEnv HTTPS on
</IfModule> 
```

# ssis - 如何在固定长度平面文件中没有标识符的情况下删除第一行和最后一行？

> ID：15049506
> 
> 赞同：0
> 
> 时间：2013-02-24T07:06:49.970
> 
> 标签：ssis

我有一个带有页眉和页脚的固定长度的平面文件，但是这些行没有任何标识符，例如 H 代表页眉、T 代表预告片或 D 代表数据或类似的东西。

我所有的数据都从位置 1 开始，但页眉和页脚以行格式的不同位置开始。我尝试使用条件拆分，但无法得到我想要的结果。

请帮助我找到一些逻辑来从数据文件中获取页眉和页脚。我想将数据存储在 SQL Server 表中，并将页眉/页脚数据存储在平面文件中以供将来参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:40:06.670

由于您没有在问题中包含确切的文件格式，让我们假设看起来像这样：

```
 This is the header line with some spaces at the beginning.
This, is, real, line 1
This, is, real, line 2
       End of file. It has some spaces too at the beginning. 
```

如果这是您的情况的正确表示，您可以使用平面文件源，在一列中完整读取每条记录，例如 EntireRow，然后使用条件拆分来使用以下条件识别页眉/页脚：

```
LEN(EntireRow) > LEN(TRIM(EntireRow)) 
```

这里的问题是如何拆分有意义的行（上面示例中的实际第 1 行和第 2 行）。您可以将其转储到另一个文件中。现在，这个文件将是干净的，并删除了页眉和页脚。这是一个简单但不是最有效的解决方案。

解决方案2：

更好的解决方案是使用脚本组件。了解如何动态添加行。一个这样的例子：[http ://www.sqlis.com/post/The-Script-Component-as-a-Transformation.aspx](http://www.sqlis.com/post/The-Script-Component-as-a-Transformation.aspx)

现在，为了让您开始，一个示例代码将使用您的条件消除页眉/页脚，即它们不从位置 1 开始......没有错误处理。上面的链接将告诉您如何添加输出以及该输出中的列。确保您的列的数据类型与源文件的数据类型相匹配。

```
public override void Input0_ProcessInputRow(Input0Buffer Row)
{
    /*
      Add your code here
    */

    if ((Row.EntireRow.Length == Row.EntireRow.Trim().Length))
    {
        string[] sArrFields = Row.EntireRow.Split(',');

        MeaningfulBuffer.AddRow();
        MeaningfulBuffer.Col1 = sArrFields[0];
        MeaningfulBuffer.Col2 = sArrFields[1];
        MeaningfulBuffer.Col3 = sArrFields[2];
        MeaningfulBuffer.Col4 = sArrFields[3];

    }
} 
```

希望这么多指导足以解决您的问题，并且我提供的两种解决方案之一有效。请回复。

# javascript - 在 ASP.NET、Razor、javascript、dhtmlx 或纯 javascript 中启用本地化

> ID：15049507
> 
> 赞同：0
> 
> 时间：2013-02-24T07:07:06.220
> 
> 标签：javascript, asp.net-mvc-3, localization, razor-2

如何在 ASP.NET、MVC、Razor、javascript 和 dhtmlx 中启用全球化和本地化？我一直在寻找答案，我发现的所有参考资料都使用了 jquery 的 Globalization.js 库。有人有使用 dhtmlx 或纯 javascript 的示例代码吗？我知道如何使用 @using Resources 引用 .cshtml 文件 (Razor) 中的资源，但是如何在嵌入 cshtml 的 javascripts 中引用这些资源，例如 @Resources.UserID？我说的是 ~/Scripts/Global.js 之类的脚本。

当我将它放在 system.web 下的 web.config 中时，创建一个 resources.de.resx 文件并将 de-DE 添加到 IE 中的语言中，标题使用下面的代码按预期更改，我的问题是在 javascripts 中引用它，所以我可以更改表格上的文字等。

```
<globalization culture="auto" uiCulture="auto" enableClientBasedCulture="true"/> 
```

登录.cshtml：

```
@using SquishIt.Framework
@using SquishIt.Mvc
@using Resources 
@{
    Layout = null;
}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>@Resources.Title</title>
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="-1" />
    <link rel="shortcut icon" type="image/x-icon" href="@Url.Content("~/Content/favicon.ico")" />
    @(Bundle.Css()
          .Add("~/Scripts/dhtmlx/dhtmlxLayout/codebase/dhtmlxlayout.css")
          .Add("~/Scripts/dhtmlx/dhtmlxLayout/codebase/skins/dhtmlxlayout_dhx_skyblue.css")
          .Add("~/Scripts/dhtmlx/dhtmlxWindows/codebase/dhtmlxwindows.css")
          .Add("~/Scripts/dhtmlx/dhtmlxWindows/codebase/skins/dhtmlxwindows_dhx_skyblue.css")
          .Add("~/Scripts/dhtmlx/dhtmlxForm/codebase/skins/dhtmlxform_dhx_skyblue.css")
          .Add("~/Scripts/dhtmlx/dhtmlxForm/codebase/skins/dhtmlxform_dhx_skyblue_custom.css")
          .Add("~/Content/Site.css")
          .MvcRender("~/Content/SquishIt/BaseLogon_#.css"))
</head>
<body oncontextmenu="return false;">
    <!-- Empty on purpose, JavaScript populates HTML -->
    <!-- Text ruler used to measure text from JavaScript -->
    <span id="TextRuler" class="TextRuler"></span>
</body>
<script language="javascript" type="text/javascript">
    var SKIN_NAME          = "dhx_skyblue";

    var URL_WINDOWS_IMAGES = "@Url.Content("~/Scripts/dhtmlx/dhtmlxWindows/codebase/imgs/")";
    var URL_LOGIN_FORM     = "@Url.Content("~/XML/Forms/Base/Logon.xml")";
    var URL_LOGIN          = "@Url.Content("~/Base/Login/")";
    var URL_MAIN           = "@Url.Content("~/Base/Main/")";

    var LOGON_SESSION_ID   = "@(Session["LOGON_SESSION_ID"])";
    var LOGOFF_MESSAGE     = "@(ViewData.ContainsKey("LogOffMessage") ? ViewData["LogOffMessage"] : "")";
</script>
@(Bundle.JavaScript()
      .Add("~/Scripts/dhtmlx/dhtmlxLayout/codebase/dhtmlxcommon.js")
      .Add("~/Scripts/dhtmlx/dhtmlxLayout/codebase/dhtmlxlayout.js")
      .Add("~/Scripts/dhtmlx/dhtmlxLayout/codebase/dhtmlxcontainer.js")
      .Add("~/Scripts/dhtmlx/dhtmlxWindows/codebase/dhtmlxwindows.js")
      .Add("~/Scripts/dhtmlx/dhtmlxForm/codebase/dhtmlxform.js")
      .Add("~/Scripts/Global.js")
      .Add("~/Scripts/Utility/Browser.js")
      .Add("~/Scripts/Utility/XML.js")
      .Add("~/Scripts/Utility/ErrorHandler.js")
      .Add("~/Scripts/Utility/Form.js")
      .Add("~/Scripts/Utility/MessageBox.js")
      .Add("~/Scripts/Base/Logon.js")
    .MvcRender("~/Content/SquishIt/BaseLogon_#.js"))
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:14:53.210

看看这篇文章，它提供了我在我的网络应用程序上实现的另一种方法。

[http://madskristensen.net/post/Localize-text-in-JavaScript-files-in-ASPNET.aspx](http://madskristensen.net/post/Localize-text-in-JavaScript-files-in-ASPNET.aspx)

您将必须创建一个 HTML 处理程序，该处理程序将根据特定标签翻译您的 js 文件。

mvc的路由引擎也需要一些配置。这段代码应该在你的 global.asax.cs 中：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        //This will send .axd filse to the custom translate handler
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.IgnoreRoute("Scripts/{folder}/{resource}.js.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    } 
```

笔记！如果您使用 ISS 7，那么您应该像这样注册处理程序：

```
 <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers>
      <add name="ScriptTranslatorHandler" path="*.js.axd" verb="*" type="CamelotShiftManagement.HttpHandlers.ScriptTranslator" />
    </handlers>
  </system.webServer> 
```

用于`validateIntegratedModeConfiguration="false"`支持向后可比性并添加先前已知的 HTTP 处理程序元素。

```
 <system.web>
     <httpHandlers>
          <add path="*.js.axd" verb="*" type="CamelotShiftManagement.HttpHandlers.ScriptTranslator" />
          <add path="*" verb="*" type="System.Web.HttpNotFoundHandler" />
        </httpHandlers>
  </system.web> 
```

# c++ - C ++在堆和堆栈上分配内存？

> ID：15049509
> 
> 赞同：8
> 
> 时间：2013-02-24T07:07:17.447
> 
> 标签：c++, memory-management, heap-memory, stack-memory

来自 Java 背景，我对在 C++ 中分配内存仍然有些困惑。我很确定前两个陈述是正确的：

```
void method() {
    Foo foo;    // allocates foo on the stack, and the memory is freed
                // when the method exits
}

void method2() {
    Foo *foo = new Foo();   // allocates foo on the heap
    delete foo;             // frees the memory used by foo
} 
```

但是这样的事情呢？

```
void method3() {
    Foo foo = *new Foo();   // allocates foo on the heap, and then copies it to the stack?
                            // when the method exits, the stack memory is freed, but the heap memory isn't?
} 
```

假设我添加`foo`到一个全局数组里面`method3()`。如果我在方法退出后尝试访问其中一个`foo`数据成员，那会起作用吗？并且`method3()`容易出现内存泄漏？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T07:14:53.877

```
Foo foo(); 
```

通过名称声明一个函数，该函数`foo`返回一个`Foo`对象并且不接受任何参数。它被称为 C++ 中最令人头疼的解析。你可能的意思是：

```
Foo foo; 
```

`foo`它在本地/自动存储中创建对象。一旦声明对象的范围结束，对象就会自动释放`{ }`。

* * *

```
Foo *foo = new Foo();   // allocates foo on the heap
delete foo; 
```

这是真的，`foo`一旦你调用`delete`. 没有内存泄漏。

* * *

```
 Foo foo = *new Foo(); 
```

在 freestore 上分配一个`Foo`对象，然后使用该对象的副本来初始化`foo`. 由于您没有指向 freestore 分配对象的指针，因此会导致内存泄漏。请注意，如果析构函数`Foo`有一些导致副作用的代码，那么它不仅仅是内存泄漏，而是未定义的行为。

# java - 我如何在 Java roguelike 游戏中实现身体部位

> ID：15049510
> 
> 赞同：0
> 
> 时间：2013-02-24T07:07:23.963
> 
> 标签：java, roguelike

我正在用java制作Roguelike游戏，我希望每个生物都有身体部位（如矮人要塞）。我只是想知道实现这一点的最佳方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:10:25.770

像 Java 中的大多数东西一样，您可以开始在对象中对其进行建模。从您的要求中取出所有适当的名词（*生物*和身体*部位*）并找出它们的关系（一个*生物*有几个*身体部位*）。

```
public class Creature {
    private ArrayList<BodyPart> bodyParts;
        // could be array instead
}

public class BodyPart {
    public int health;
} 
```

至于如何在你的 rougelike 游戏中使用它，这取决于你想如何编写你的实际游戏。

* * *

**编辑：**

这是帮助您入门的要点：[https ://gist.github.com/spoike/5023039](https://gist.github.com/spoike/5023039)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:09:59.043

首先，我建议采用基于[原型的对象模型](http://en.wikipedia.org/wiki/Prototype-based_programming)。这通常比固定的 OOP 风格的继承层次结构更灵活。例如，在我的 roguelike [Tyrant](https://github.com/mikera/tyrant)中，所有游戏对象都有一个 HashMap 属性。

然后，我将为原型中的每个生物定义身体部位列表。通过这种方式，您可以为不同的生物定义不同的身体部位配置（例如，有些可能有翅膀......）

最后，我将使用*组合*来实现身体部位，即一个生物有一个身体部位列表（`ArrayList`也许？），这些身体部位对应于原型中定义的身体部位列表。这些身体部位本身应该是有效的游戏对象（即它们有自己的原型，它们可以与生物分离并散布在地图上等......）。首次创建生物时，您将创建必要的身体部位作为生物初始化的一部分。

# java - 什么是静态异常检查和动态异常检查？

> ID：15049511
> 
> 赞同：4
> 
> 时间：2013-02-24T07:07:46.880
> 
> 标签：java, exception, exception-handling

在一个在线论坛上，有人提到 Java 的静态异常检查不是很好，并且会导致可伸缩性和版本控制问题。

我认为类函数的变化会引发新的异常，破坏客户端代码可以归因于版本控制问题。但我不确定。

*   静态异常检查的可扩展性问题是什么？

*   什么是动态异常检查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T07:31:45.933

当程序员未能抛出适合该方法的异常时，Java 中的已检查异常可能会导致可伸缩性问题。（参见*Effective Java*，第 43 条：*抛出适合抽象的异常*）。

懒惰的程序员倾向于将异常附加到`throws`他们方法的子句中，而不考虑它们是否合适。因此，当您在应用程序架构中看起来越来越高时，方法会收集越来越多的异常。如果一个不小心，顶级方法可能会抛出十个或更多异常。

例如，在设计用于加密数据的方法中，可能会抛出许多低级异常（例如`IOException`，`NoSuchAlgorithmException`... `KeyNotFoundException`）。没有必要将这些公开给 API 用户。相反，`EncryptionFailed`可能会引发异常，并将血淋淋的细节存储在`cause`异常的字段中。

* * *

我认为“动态异常检查”可能是指捕获`Throwable`或`Exception`（根类之一）并根据某些外部刺激动态决定是否处理异常。例如：

```
List<Class<?>> exceptionTypes = new ArrayList<>();
exceptionTypes.add(IllegalArgumentException.class);
exceptionTypes.add(IOException.class);

try {
  // do something
} catch (Exception e) {
  if (exceptionTypes.contains(e.getClass())) {
    e.printStackTrace();
  }
} 
```

注意：上面的例子只是一个例子。但是想象一个代表用户执行代码并允许他们选择他们希望捕获的异常类的 IDE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:30:12.053

我想动态异常检查只是在运行时触发异常的另一个名称。

虽然我相信静态异常检查，但 Java 的静态异常检查方式确实存在涉及接口实现的问题。

说，我们有`IParser`。`parse()`它的方法可能会抛出哪些适当的异常？可能`SyntaxErrorException`。现在我们希望 a`ServerResponseParserFromURL`以这样的方式使用：

```
class ServerResponseParserFromURL implements IParser { .... };
....
try {
   IParser parser = new ServerResponseParser(new URL("http://example.com/test.htm"));
   parser.parse();
   ....
} 
```

这就是问题所在——`IParser`可能会触发的实现，例如`NoRouteToHostException`. 所以我们不能使用漂亮简洁的形式，需要回退到长形式：

```
class ServerResponseParser implements IParser { .... };
....
try {
   String response = getServerResponse(new URL("http://example.com/test.htm"));
   IParser parser = new ServerResponseParser(response);
   parser.parse();
   ....
} 
```

如您所见，在实践中，我们的`IParser`is `IStringParser`，而不是 generic `IParser`。

尽管在这种特殊情况下它可能是可以容忍的，但是当我们想要提供一个`IParser`作为函数的参数之一时它会使事情变得复杂`f`。比如说，为了能够解析 url 识别的服务器的响应，我们不能只提供`ServerResponseParser`对象和 url——我们需要找到一种方法来提供`getServerResponse`方法到`f`.

# assembly - MIPS 开发环境

> ID：15049518
> 
> 赞同：-1
> 
> 时间：2013-02-24T07:09:23.697
> 
> 标签：assembly, development-environment, mips

我将在 MIPS 中编写代码并寻找一种软件来为我提供一些调试功能。有谁知道好的软件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:35:38.213

查看[MARS（MIPS 汇编器和运行时模拟器）](http://courses.missouristate.edu/kenvollmar/mars/)。

# css - 如何在 CSS 中扩展导航

> ID：15049526
> 
> 赞同：-1
> 
> 时间：2013-02-24T07:10:16.520
> 
> 标签：css

我有一个 1000px 的 div；和一个也是 1000px 的导航栏；但它没有 div 扩展那么多。

请帮忙...

[索引.html]

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="icon" href="favicon.ico" type="image/x-icon">
<link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
<title>[phantzm]</title>
<link rel="stylesheet" type="text/css" href="style.css">
<center>
<div class="banner">
<IMG SRC="logo.png" class="logo" WIDTH=100 HEIGHT=100 ALT="pZ">
</div>
<center>
<div id="wrapper">
<div id="navMenu">
<ul>
<li>
<a href="#">fun stuff</a>
<ul>
<li><a href="#">jokes</a></li>
<li><a href="#">riddles</a></li>
<li><a href="#">facts</a></li>
</ul><!-- end of Second List -->
<li>
<a href="#">   my work   </a>
</li>
<li>
<a href="#">   my favourite songs   </a>
</li>
<li>
<a href="#">   my favourite links   </a>
</li>
<li>
<a href="#">   about me   </a>
</li>
<li>
<a href="#">   contact me   </a>
<ul>
<li><a href="#">phone</a></li>
<li><a href="#">e-mail</a></li>
<li><a href="#">mail</a></li>
</ul><!-- end of Second List -->
</li>
</li><!-- end of List Item -->
</ul><!-- end of Unordered List -->
</div><!-- end of navMenu div -->
</div><!-- end of wrapper div-->
</center>
</head>
<body bgcolor="#FFCECE">
</body>
</html> 
```

[样式.css]

```
body {
    background: SILVER;
    margin: 0;
    padding: 0 auto;
}

.banner {
   background: blue;
   width: 1000px;
   height: 70px;
}
.logo {
   margin-top: 10px;
   margin-right: 500px;
}

#navMenu {
   margin: 0;
   padding: 0;
   line-height: 30px;
   width: 1000px;
}

#navMenu ul {
   margin: 0;
   padding: 0;
   border: 1px white;
}

#navMenu li:hover {
    font-weight:normal;
    text-transform: capitalize;
    background:silver;
}

#navMenu ul li {
   margin: 0;
   padding: 0;
   list-style:none;
   float: left;
   position: relative;
   background: #4B8EE0;
   border: 1px white;
   border-left: 1px solid #0000ff;
    border-right: 1px solid #000ff;

}

#navMenu ul: hover {
   text-transform: capitalize;

}

#navMenu ul li a {
   text-align: center;
   font-family: "Arial";
   text-decoration: none;
   height: 30px;
   width: 150px;
   display: block;
   color: white;
}

#navMenu ul ul {
   position: absolute;
   visibility: hidden;
   top:30px;
   border: 1px white;
}

#navMenu ul li:hover ul {
   visibility: visible;
} 
```

我已经添加了样式和索引的代码。你可以看到横幅和导航菜单都有 1000px；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:12:36.460

使用 Chrome，右键单击每个元素并选择“检查元素”。向下滚动到“指标”。这将向您展示哪些其他属性正在影响每个元素的表观宽度（边距、边框、填充、框模型和定位）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T07:30:09.117

导航不是 1000px，因为每个项目都设置为固定宽度

您应该使用百分比更改每个项目的宽度，因此每个项目的宽度相对于 1000px 和项目数

但是，如果它仍然不起作用，您应该`<div style="clear:both;"></div>`在底部添加`<ul></ul>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T07:34:37.213

导航栏的长度由列表中的每个单独的项目符号点决定。你在哪里`width: 150px;`显示了每个人的长度`li`。所有这些的长度加起来就是导航栏的长度。您在`display: inline-block;`下添加`#navMenu ul li`以使其取决于原始宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T08:01:05.180

只需像这样更改您的 CSS：[**Live Demo**](http://jsfiddle.net/bAwwq/)

```
#navMenu ul li {
   margin: 0;
   padding: 0;
   list-style:none;
   float: left;
   position: relative;
   background: #4B8EE0;
   border: 1px white;
   border-left: 1px solid #0000ff;
    border-right: 1px solid #000ff;
    width:165.6px;
} 
```

165.6 是 (1000 - 5)/6（大约）

# performance - Mongo Db 设计（嵌入与参考）

> ID：15049533
> 
> 赞同：2
> 
> 时间：2013-02-24T07:11:21.997
> 
> 标签：performance, mongodb, web-applications, database-design

我已经阅读了很多关于该主题的文档、问答等（嵌入或使用参考）。我理解为什么您应该使用一种或另一种方法的要点，但我看不到有人讨论（询问）类似的情况：

我有 2 个 (`A`和`B`) 实体，它们之间的关系是 ONE_TO_MANY （`A`可能属于许多`B`），我可以使用`embed`（非规范化方法）并且没关系（我清楚地理解它），但是如果我想（稍后）修改其中一个怎么办使用，成许多`B`文档，`A`文档字段？修改不代表替换`A`为`A'`，而是将一些修改准确`A`记录下来。这意味着（`embed`以防万一）我必须在所有已经有版本的`B`文档中应用这些更改。`A`

基于此处的描述[http://docs.mongodb.org/manual/tutorial/model-embedded-one-to-many-relationships-between-documents/#data-modeling-example-one-to-many](http://docs.mongodb.org/manual/tutorial/model-embedded-one-to-many-relationships-between-documents/#data-modeling-example-one-to-many)

```
What If later we would like to change used in many documents address:name field ? 
What If we need the list of available addresses in the system ? 
```

**这些操作在 MongoDb 中完成的速度有多快？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:26:27.687

它基于主要使用的操作。如果您要插入和选择大量文档并且有可能，例如每月一次您将需要修改许多嵌套的子文档，我认为存储`A`在里面`B`是一种很好的做法，这就是 mongodb 应该是的。您只需选择一个文档即可节省大量时间，而无需加入另一个文档，并且每次可以忍受一次较慢的更新，而不会出现任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:15:34.883

我会提出更多关于速度的建议。

如果您有一个名为 A 的子文档，它嵌入到许多文档中 - 并且您想要更改 A 的实例...

*   请注意，文档不会随着更改而增长太多。如果 A 变得太大，那将损害性能，因为它将迫使 Mongo 将文档移动到内存中。

*   这显然取决于您拥有多少嵌入式实例。你拥有的越多，它就会越慢。

*   这取决于您如何匹配子文档。如果你在没有索引的情况下找到 A，它会很慢。如果您使用范围运算符来识别它，它会很慢。

*   有人已经提到文件的大小很可能会影响速度。

我听到的关于是否链接或嵌入的最佳建议是……如果实体（在本例中为 A）是可变的……如果它要经常变异/更改……然后链接它，不要嵌入它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T12:20:22.003

更新操作的速度显然取决于数据量。

关于是否使用嵌入式文档或参考的其他考虑因素是单个文档中的数据量是否会超过 16mb。这是很多文件的想法。

然而，在某些情况下，对整个文档进行非规范化是没有意义的，尤其是在其他地方使用/引用它们的地方。

以`User`文档为例，您通常不会对需要引用用户的每个集合中的所有用户属性进行非规范化。相反，您引用用户 [可能带有一些非规范化的用户详细信息]。

显然，当引用的用户更改时，每个额外的非规范化值（除非是审计）都需要更新，但您可以将更新排队等待后台进程处理 - 而不是让调用者等待。

# c++ - 为什么我不能调用'explicit a (string x)'？

> ID：15049542
> 
> 赞同：2
> 
> 时间：2013-02-24T07:12:46.763
> 
> 标签：c++, casting, constructor, explicit

我无法使用对象 a3 调用“显式 a（字符串 x）”，出现两个编译错误，例如：

> [错误] 从 'const char*' 到 'int' 的无效转换 [-fpermissive]
> 
> [错误] 初始化 'a::a(int)' 的参数 1 [-fpermissive]

我的预期输出是'int int double string'；

有人可以帮我消除这些错误吗？感谢您宝贵的时间。

```
#include<iostream>
#include<string.h>

using namespace std; 

struct a{

    a(int x=0){cout<<" int ";
    }
    inline a (double x){cout<<" double ";
    }
    explicit a (string x){ cout<<" string ";
    }

};

int main()
{
    a a0(NULL);
    a a1=9;
    a a2=1.1;
    a a3=("Widf"); //Error
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T07:17:48.400

在语法上，C++ 解释

```
a a3 = ("Widf"); 
```

作为“评估表达式`"Widf"`，然后构造一个`a`名为的类型的对象，该对象`a3`被初始化为等于它。” 由于`"Widf"`有 type ，C++ 只有在有可用的隐式转换构造函数时`const char[4]`才能初始化。由于您已明确标记了构造函数，因此此隐式转换不可用，因此出现错误。`a3``"Widf"``explicit`

要解决此问题，请尝试将行重写为

```
a a3("Widf"); 
```

这不会`"Widf"`首先尝试评估，而是直接将其作为参数传递给构造函数。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T07:18:59.113

必须通过结构/类名调用显式构造函数：

```
a("Widf") 
```

使用相等作为构造函数不是显式的构造函数调用。你可以使用这个：

```
a a3 = a("Widf") 
```

这将：

1.  创建一个临时对象 a
2.  使用复制构造函数创建 a3

编译器优化器应该能够对此进行优化。

或者，您可以只写

```
a a3("Widf") 
```

# android - android：如何在我的 sqlite 中获取我选择的 id

> ID：15049544
> 
> 赞同：1
> 
> 时间：2013-02-24T07:13:34.903
> 
> 标签：android, database, sqlite, fetch

我想从数据库中获取一些数据。我没有收到任何错误消息。这是不起作用的代码：

数据库助手：

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHelper extends SQLiteOpenHelper {

    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "recipename";
    public static final String KEY_INGRDNAME = "ingrdname";

    public static final String MENU_ID = "_id";
    public static final String RECIPE_NAME = "recipe";

    private static final String MYDATABASE = "recipebook.db";
    private static final int VERSION = 1;

    private static final String RECIPE_TABLE = "recipe";
    private static final String MENU_TABLE = "menu";
    static final String viewrecipe ="viewrecipe";

     public DatabaseHelper(Context context) {
         super(context, MYDATABASE, null, VERSION);
     }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

        db.execSQL("CREATE TABLE "+RECIPE_TABLE+" ("+KEY_ROWID+ " INTEGER PRIMARY KEY AUTOINCREMENT , " + KEY_NAME+ " TEXT, " + KEY_INGRDNAME+ "TEXT )");

        db.execSQL("CREATE TABLE "+MENU_TABLE+" ("+MENU_ID+" INTEGER PRIMARY KEY, "+
                RECIPE_NAME +" INTEGER NOT NULL ,FOREIGN KEY ("+RECIPE_NAME+") REFERENCES "+RECIPE_TABLE+" ("+KEY_ROWID+"));");

        db.execSQL("CREATE VIEW "+viewrecipe+
                " AS SELECT "+RECIPE_TABLE +"."+KEY_NAME+""+
            " FROM "+MENU_TABLE+" JOIN "+RECIPE_TABLE+
            " ON "+MENU_TABLE+"."+RECIPE_NAME+" ="+RECIPE_TABLE+"."+KEY_ROWID
        );
        //Inserts pre-defined departments
        InsertRecipe(db);

    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

        db.execSQL("DROP TABLE IF EXISTS "+MENU_TABLE);
        db.execSQL("DROP TABLE IF EXISTS "+RECIPE_TABLE);

        db.execSQL("DROP VIEW IF EXISTS "+viewrecipe);
        onCreate(db);
    }
    void InsertRecipe(SQLiteDatabase db) {          
        ContentValues values = new ContentValues();

        values.put(KEY_NAME, "Beef tapa");
        values.put(KEY_INGRDNAME, " 2 pounds beef round or chuck, sliced thinly against the grain , 1/2 cup lemon juice, 1/3 cup soy sauce , 2 tablespoons sugar, 1/4 teaspoon ground black pepper, 1 head garlic, minced, Canola or any cooking oil for frying " );
        db.insert(RECIPE_TABLE, KEY_NAME, values);

        values.put(KEY_NAME, "Bulalo");
        values.put(KEY_INGRDNAME, " 6 - 7 pounds Beef Shanks with Bone Marrow, 1 head Garlic, cut, 1 large Onion, cubed, 2 Carrots, roughly cut, 2 stalks Celery, roughly cut, 1 teaspoon Whole Peppercorns, 1 tablespoon Salt, Leeks (optional), 2 - 3 Potatoes, cubed, 2 Corn on the cob, cut in 1 1/2 inch, 2 stalks Pechay or Bok Choy, 1 gallon Water, or enough to cover meat" );
        db.insert(RECIPE_TABLE, KEY_NAME, values);

        values.put(KEY_NAME, "Caldereta");
        values.put(KEY_INGRDNAME, "2 pounds Beef, cut in 2 inch cubes, 1/2 head garlic, minced, 1/2 cup vinegar, 2 teaspoon salt, 2 pieces bay leaf (dahon ng laurel), enough water to cover the beef, 1/2 head garlic, minced, 1 medium onion, chopped, 1 small can tomato sauce, 6 small potatoes, quartered, 2-3 small Chili pepper, cut finely, 1 red bell pepper, cut in strips, 1/2 cup Green peas(optional), 1/2 cup Pickle Relish, 1 small can Liver Spread, 1/2 cup Olives, Salt and Pepper to taste, 2 teaspoon sugar, 2 tablespoons cooking oil, for sauteing, LIVER GRAVY INGREDIENTS (Optional), 1/2 pound beef liver, ground, 2 tablespoons vinegar, 2 tablespoons breadcrumbs, 1 cup beef broth, salt and pepper.");
        db.insert(RECIPE_TABLE, KEY_NAME, values);

        values.put(KEY_NAME, "Kare kare");
        values.put(KEY_INGRDNAME, "2 pounds Oxtail, cut in 1 thickness,1 pound beef tripe (tuwalya), pressure cooked, cut into 2 squares (optional), 1/2 pound string beans, sliced in 3 lengths, 2 pcs. eggplants, sliced in 3 wedges, 1 banana bud or heart(puso ng saging), sliced in strips(optional), 6 stalks Bok Choy(Pechay), leaves and stalk separated, cut in 2 lengths, 1/2 cup peanut butter, dissolved in 1 cup beef broth, 1/4 cup toasted rice, powdered, dissolved in 1/2 cup beef broth, 5 cups beef broth, 2 tablespoons achuete seeds, 1/4 cup cooking oil,3 cloves garlic, minced, 1 medium onion, chopped, 1 tablespoon salt,1 tablespoon sugar, 1/4 teaspoon pepper, Sauteed Shrimp Paste");
        db.insert(RECIPE_TABLE, KEY_NAME, values);

        values.put(KEY_NAME, "Mechado");    
        values.put(KEY_INGRDNAME, "    2 pounds Top or Bottom Round Beef Roast, cut in 2-3 inch tubes, 1/2 pound Pork Fat, cut in strips, 5-6 Potatoes, cubed, 4 cloves Garlic, minced, 1 medium Onion, chopped, 1/3 cup Vinegar, 1 - 2 cups water, 2 tablespoons Soy Sauce, 1 small can tomato sauce, 1 pc. Bay Leaf, Salt and Pepper,3 tablespoons cooking oil");
        db.insert(RECIPE_TABLE, KEY_NAME, values);
    }

    public String getRecipe(int id) {
    SQLiteDatabase db = this.getReadableDatabase();

        Cursor c = db.query(RECIPE_TABLE, new String[] { KEY_ROWID,
                    KEY_NAME, KEY_ROWID }, KEY_ROWID + "=?",
                    new String[] { String.valueOf(id) }, null, null, null, null);
        if (c != null)
            c.moveToFirst();

        String contact = new String(c.getString(id));
            // return contact
        return contact;
    } 
```

我的java类。我希望它在以下位置获取数据`textview`：

```
import android.app.Activity;
import android.content.Intent;

import android.os.Bundle;

import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class menucategory1a1 extends Activity {

    private DatabaseHelper db;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.beef1);

        TextView text = (TextView)findViewById(R.id.beeftapaingredients);
    text.setText(db.getRecipe(0));

        Button page1 = (Button) findViewById(R.id.button1);

        page1.setOnClickListener(new View.OnClickListener(){ 
            public void onClick(View view) { 
                Intent myIntent = new Intent(view.getContext(), menucategory1a1a.class);
                startActivityForResult(myIntent, 0);
            }

        });
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:16:14.137

您的问题在这里 `String contact = new String(c.getString(id));` getString(id) 采用列索引，而不是您尝试选择的行的 id。

# android - Android Google 云打印 - 缺少文档

> ID：15049547
> 
> 赞同：2
> 
> 时间：2013-02-24T07:13:49.773
> 
> 标签：android, mime, google-cloud-print

我想从我的 android 应用程序打印到我在 Google 云打印中注册的打印机。但是每次我尝试打印网页时，总是会出现文档丢失错误。这是我的代码，但我不知道是哪一行导致了错误。

```
public void print() {
    Uri docUri = Uri.parse("http://myserver.com/view/myusername");
    String docMimeType = "text/html";
    String docTitle = "myTestPage";
    Intent printIntent = new Intent(myContext, PrintDialogActivity.class);
    printIntent.setDataAndType(docUri, docMimeType);
    printIntent.putExtra("title", docTitle);
    startActivity(printIntent);
} 
```

所以基本上，[http](http://myserver.com/demo/view/myusername) ://myserver.com/demo/view/myusername是我要打印的网页，而 text/html 是我提供的 mime 类型。有人可以告诉我是哪一部分导致了错误，因为我尝试了笔记本电脑浏览器中的 URL 并加载了网页。非常感谢你。:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:07:42.690

好吧，我不确定我的代码有什么问题，而且我仍然不知道 mime 类型应该是什么。所以我想出了一个解决方案：

1.  以编程方式生成 html 文件
2.  用“text/html”类型打印

那应该完成它。:)

# java - 如何在 android 的画布上更改特定的矩形颜色？

> ID：15049552
> 
> 赞同：0
> 
> 时间：2013-02-24T07:14:47.303
> 
> 标签：java, android, colors, grid, android-canvas

当我触摸屏幕时，我一直在尝试更改矩形数组中特定矩形的颜色，但它似乎不起作用，这是我的代码：

```
public Paint blue = new Paint();
RandomColorGen rc;
ArrayList<Integer> colors = RandomColorGen.ColorList(5);
Random rand = new Random();
int columns = 50;
int rows = 50;
Rect square[][] = new Rect[rows][columns];

public boolean isTouched;
public Canvas canvas;

    @Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    this.canvas = canvas;

    for (int x = 0; x < rows; x++) {
        for (int y = 0; y < columns; y++) {

            square[x][y] = new Rect();

            blue.setColor(colors.get(rand.nextInt(colors.size())));
            blue.setStyle(Paint.Style.FILL);

            square[x][y].set(0, 0, (canvas.getWidth() - 10) / rows,
                    ((canvas.getHeight() - 100) / columns));
            square[x][y].offsetTo(x * ((canvas.getWidth() - 10) / rows), y
                    * ((canvas.getHeight() - 100) / columns));

            canvas.drawRect(square[x][y], blue);

        }
    }
    if(isTouched){
        blue.setColor(colors.get(rand.nextInt(colors.size())));
        blue.setStyle(Paint.Style.FILL);
        canvas.save();
        canvas.clipRect(square[1][1]);
        canvas.drawRect(square[1][1], blue);

        canvas.restore();

    }

}

@Override
public boolean onTouchEvent(MotionEvent event) {

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        isTouched = true;

        break;
    }

    return true;

} 
```

colors.get() 是一个颜色数组列表。我采取了错误的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:15:58.713

我刚刚测试了你的代码，它可以工作，但有几点值得注意：

*   在绘图期间分配对象是一种非常糟糕的行为（特别是在分配 50*50 时）！`onDraw()`如果要实现与现在相同的行为，请考虑将分配代码移动到构造函数并更改方法中矩形的位置。
*   您的使用`onTouchEvent()`不完整，只要用户没有举手，您就需要将isTouched设为true，可以按以下方式完成：

    ```
    @Override
    public boolean onTouchEvent(MotionEvent event) {

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        isTouched = true;

        break;
    case MotionEvent.ACTION_UP:
    case MotionEvent.ACTION_CANCEL:
        isTouched = false;
        break;

    }
    invalidate();
    return true; 
    ```

    }

*   每次收到**TouchEvent**时，也请求一个布局，方法是使用`invalidate()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:24:16.923

在执行 onTouch 操作后如何调用绘制函数...

OnTouch 动作是第一个动作，那么如何调用 Paint() 函数？

# haskell - 是否可以在 OS X 上静态链接 Haskell 应用程序？

> ID：15049553
> 
> 赞同：3
> 
> 时间：2013-02-24T07:14:51.590
> 
> 标签：haskell

我对*任何*语言的静态链接都相当陌生，但我正在尝试静态链接 Haskell 程序以在其他 Mac 上使用。我已经设法在 Linux 上进行静态链接，并通过使用以下选项确认它可以在其他 Linux 机器上运行：`-O2 -static -optl-static -optl-pthread`

当我尝试在 OS X 上使用这些选项时，我收到以下错误：

```
ld: library not found for -lcrt0.o
collect2: ld returned 1 exit status 
```

知道怎么了？我在做一些完全疯狂的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-19T06:57:50.417

Community-wiki 对后代的回答，来自评论：

通常，OS X 可执行文件会动态链接到系统提供的库；静态链接远不如在 Linux 上常见。您可以`otool -Lv`在可执行文件上运行以查看它动态加载的库。如果它们都在里面，`/usr/lib`或者`/System/Frameworks`它们不是你安装的东西，那么你可能已经没事了。

事实上，根据[这个答案](https://stackoverflow.com/questions/5259249/creating-static-mac-os-x-c-build)，mac系统库的静态链接是完全不允许的。

# php - 通过 PHP 将 MySQL 数据库显示为 HTML 编码表

> ID：15049556
> 
> 赞同：0
> 
> 时间：2013-02-24T07:15:21.937
> 
> 标签：php, mysql, html-table

我尝试使用此代码通过 PHP 将 MySQL 数据显示到编码的 HTML 表中：

```
<?php
    // Get all the data from the "login" table
    $result = mysql_query("SELECT * FROM login") or die(mysql_error());

    echo '<table class="table">
          <thead>
              <tr>
                  <th>FirstName</th> 
                  <th>LastName</th> 
                  <th>user</th> 
              </tr>
          </thead>
          <tbody>';

    // keeps getting the next row until there are no more to get
    while($row = mysql_fetch_array( $result )) {
        **if( $i % 2 == 0 )** {  //line 20
            $class = " class='odd'";
        }
        else {
            $class = "";
        }
        // Print out the contents of each row into a table
        echo "<tr" . $class . "><td>"; 
        echo $row['FirstName'];
        echo "</td><td>"; 
        echo $row['LastName'];
        echo "</td><td>"; 
        echo $row['user'];
        echo "</td><td>";  
    }
    echo "</tbody></table>";
?> 
```

但它向我显示了这个错误：

> 未定义变量：第 20 行中的 i

在上面的代码中，第 20 行错误文本被标记为粗体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:19:00.917

`$i=0;`在循环开始之前添加`while`，并在循环结束`$i++`之前增加它。`while`

```
$i = 0;

while($row = mysql_fetch_array( $result )) {

//your code

  $i++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T07:22:22.047

尝试这个

```
 $i=0;
 while($row = mysql_fetch_array( $result )) {
    if( $i % 2 == 0 ) {
        $class = " class='odd'";
    } else {
        $class = "";

    }
    // Print out the contents of each row into a table
    echo "<tr" . $class . "><td>"; 
    echo $row['FirstName'];
    echo "</td><td>"; 
    echo $row['LastName'];
    echo "</td><td>"; 
    echo $row['user'];
    echo "</td><td>";  
  $i++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T07:17:44.170

添加

```
$i = 0; 
```

在`while`您收到错误之前并在您的评估中使用 $i++

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T07:18:23.627

你从来没有增加你的`$i`

```
$i = 0; 

while($row = mysql_fetch_array( $result )) {
  if($i % 2 == 0)
  ....

  $i++;  //You need to increment your $i
} 
```

# forms - 在 SharePoint 2010 问题中更新 Info-path 2010 表单

> ID：15049559
> 
> 赞同：1
> 
> 时间：2013-02-24T07:16:37.570
> 
> 标签：forms, sharepoint, sharepoint-2010, infopath, infopath2010

我遇到了一个奇怪的问题。我有三个 SharePoint 列表，并且成功地使用列表中的 Infopath 编辑界面>>自定义表单选项。但是针对一个特定列表提出了问题。

最初，我使用 InfoPath 更改了它的外观并发布了它，但现在当我尝试更新任何进一步的更改时，它没有发生。

当我在 InfoPath 中打开表单时，它会显示所有更新的更改，但是每当我发布它然后尝试打开新项目或更新现有项目时，会显示以前的表单而不是更新的表单！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T20:07:52.947

您需要在 Central Admin 中部署更新的 InfoPath 表单。转到中央管理 > 常规应用程序设置 > 上传表单模板并上传您发布的 InfoPath 表单。然后，只要列表与表单相关联，当您创建新项目时，您就会看到新的 InfoPath 表单。遗憾的是，这不适用于列表中的现有项目，仅适用于新项目。

祝你好运！

# python - 为什么 PyGame 会跟踪图像？

> ID：15049561
> 
> 赞同：1
> 
> 时间：2013-02-24T07:16:53.357
> 
> 标签：python, pygame, trail

我正在尝试使用 pygame 和 IDLE 在 python 中开发一个简单的游戏。从昨天开始，我浏览了各种资源以了解该语言（以及一般的编程），即便如此，我还是遇到了一些问题和对它如何工作的误解。因此，如果有人可以就如何进行（或向我指出一些好的学习材料的方向）建议我，那么我将不胜感激。

到目前为止，我已经有了一小部分代码，这些代码构成了我的游戏理念的基础，所以我将把它贴在这里并列出我的一些问题。

```
import pygame

def main():

pygame.init()

logo = pygame.image.load("coolblack.jpg")
pygame.display.set_icon(logo)
pygame.display.set_caption("Battleship")

screenWidth = 800
screenHeight = 600
screen = pygame.display.set_mode((screenWidth, screenHeight))

bgd_image = pygame.image.load("grid.png")
#--------------------------------------------------------------------
#the image named 'image' should be above 'bgd_image' but below 'cv9'
#in fact, everything should be above bgd_image, especially 'cv9'
#--------------------------------------------------------------------
image = pygame.image.load("coolblack.jpg")
cv9 = pygame.image.load("ussessexcv9.gif").convert_alpha()

xposCv9 = 400
yposCv9 = 510

step_xCv9 = 1
step_yCv9 = 1

screen.blit(bgd_image, (0,0))
screen.blit(image, (400,300))
screen.blit(cv9, (xposCv9, yposCv9))

pygame.display.flip()
clock = pygame.time.Clock()
running = True

#---------------------------------------------
#I've got a pretty good idea (sort of) about
#what is happening in the section
#below this point, however it seems that
#the image 'cv9' creates a trail of itself
#every time it moves, so how could I make it 
#so that it doesn't do so?
#---------------------------------------------
while running:

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
        if event.type == pygame.KEYDOWN and event.key == pygame.K_ESCAPE:
            running = False
    if xposCv9>screenWidth-64 or xposCv9<0:
        step_xCv9 = -step_xCv9
    if yposCv9>screenHeight-64 or yposCv9<0:
        step_yCv9 = -step_yCv9
    xposCv9 += step_xCv9
    yposCv9 += step_yCv9
    screen.blit(cv9, (xposCv9, yposCv9))
    pygame.display.flip()
    clock.tick(60)

if __name__=="__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T07:23:46.883

pygame 的工作方式是它在内部具有您正在更新的屏幕的表示形式。所以，它开始完全是黑色的，然后你做你的第一个“blit”。这将更新内部表示。然后，当您调用“pygame.display.flip”时，它会在屏幕上显示该表示。但是，这不会自动将您的表示“清除”为下一帧的全黑。因此，在下一帧中，您再次进行 blit（例如，稍微向左），并且第一个 blit 仍然存在，从而创建了您的“轨迹”。

因此，对于您正在做的事情，最好的办法是在您的循环中，在开始绘制下一帧之前清除屏幕的内部表示。您可以通过用单一颜色填充屏幕来“清除”屏幕，就像这样......

```
BLACK = (0,0,0)
....
screen.blit(cv9, (xposCv9, yposCv9))
pygame.display.flip()
clock.tick(60)
screen.fill(BLACK) # Add this to "clear" the screen. 
```

请注意，如果您选择走这条路线，这意味着您需要在每一帧重绘所有元素（不仅仅是自上一帧以来更改的元素）。

顺便说一句，如果您想知道，最后没有自动清除框架是有充分理由的。在某些情况下，仅更新更新的屏幕部分可能会更快。这可能会导致某些应用程序的性能加速。但是，最好从清除屏幕开始，如上面的示例所示。

# c# - 如何以索引格式保存图像并获取它的调色板？

> ID：15049562
> 
> 赞同：1
> 
> 时间：2013-02-24T07:17:00.760
> 
> 标签：c#, image-processing

我想使用以下代码将图像保存为 Format8bppIndexed：

```
Bitmap imgsource = new Bitmap(sourceimage);
Bitmap imgtarget = new Bitmap(imgsource.Width, imgsource.Height, PixelFormat.Format8bppIndexed);
                for (int I = 0; I <= imgsource.Width - 1; I++)
                {
                    for (int J = 0; J <= imgsource.Height - 1; J++)
                    {
                        imgtarget.SetPixel(I, J, imgsource.GetPixel(I, J));
                    }
                }
imgtarget.Save(targetimage); 
```

但我面临错误“具有索引像素格式的图像不支持 Setpixel”

我想用索引保存图像我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T08:20:02.817

改用这个：

```
Bitmap imgtarget = imgsource.Clone(
    new Rectangle(0, 0, imgsource.Width, imgsource.Height),
    PixelFormat.Format8bppIndexed); 
```

编辑：

GDI+中 有两种[`Image`s ：](http://msdn.microsoft.com/en-us/library/system.drawing.image.aspx) [`Bitmap`s](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)和[`Metafile`s](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.metafile.aspx)。通常您从位图图像文件（`.jpg`、`.png`、`.bmp`、`.gif`和）`.exif`而`.tiff`不是元文件（`.wmf`或`.emf`）加载图像。因此，不要基于图像创建新位图，只需将`Image`对象转换为`Bitmap`：

```
Bitmap imgsource = (Bitmap)sourceimage; 
```

代码的第一行更改了图像的原始属性并将 DIP 重置为 96。

# regex - 如何匹配由开始/结束标签包裹的每一行？

> ID：15049563
> 
> 赞同：2
> 
> 时间：2013-02-24T07:17:15.040
> 
> 标签：regex

我想将我的博客从 Markdown 转换为 html。而且，我曾经`[crayon lang="cpp"]...[/crayon]`粘贴代码。我想得到由 包裹的每一行，`[crayon][/crayon]`然后在每行的开头添加 4 个空格。例如：

```
Some text

[crayon lang="bash"]
#!/bin/bash
[/crayon]

other text

[crayon lang="cpp"]
int main()
{
}
[/crayon] 
```

我希望它是：

```
Some text

    #!/bin/bash

other text

    int main()
    {
    } 
```

我不知道该怎么做`regex`。有人可以帮我吗？

这是我尝试过的：

*   `\[crayon.*?\]([\d\D]*?)\[\/crayon\]` `\1`匹配由 包裹的所有行`[crayon][/crayon]`，但我不能添加空格。
*   `(?'st'\[crayon.*?\])^.*$(?'-st'\[/crayon\])`不匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:30:02.703

一个（相对）简单的方法是分两步完成：

### 1

*在*每行的开头插入 4 个空格，但只有*前后* `'[crayon lang="..."]'`的行 *`'[/crayon]'`*

 *```
pattern     : (?ms)^(?=(?:(?!\[crayon\b).)*\[/crayon])
replacement : '    ' (4 spaces) 
```

### 2

删除所有`'[crayon lang="..."]'`和`'[/crayon]'`

```
pattern     : \[/?crayon.*?][ \t]*(\r?\n|$)
replacement : '' (empty string) 
```

一个 PHP 演示：

```
<?php

$text = 'Some text

[crayon lang="bash"]
#!/bin/bash
[/crayon]

other text

[crayon lang="cpp"]
int main()
{
}
[/crayon]';

$text = preg_replace('#^(?=(?:(?!\[crayon\b).)*\[/crayon])#ms', '    ', $text);

$text = preg_replace('#\[/?crayon.*?][ \t]*(\r?\n|$)#', '', $text);

echo "$text\n";

?> 
```

这将打印：

```
一些文字

    #!/bin/bash

其他文字

    主函数（）
    {
    }
```

快速解释，也许是简洁的正则表达式`^(?=(?:(?!\[crayon\b).)*\[/crayon])`：

```
^                    # match the start of a line
(?=                  # start positive look ahead
  (?:                #   start group
    (?!\[crayon\b).  #     match any char as long as it doesn't have `[crayon` in front of it
  )*                 #   end group and repeatr it zero or more times
  \[/crayon]         #   match '[/crayon]'
)                    # end positive look ahead 
```

用简单的英语写成：

> 匹配行的任何开头，*仅*当`[/crayon]`此行开始之前有 a ，*并且* 在此行开始之间`[/crayon]`不能有`[crayon`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:12:12.513

我有个主意。你可以使用它，如果你认为它没问题。

```
1\. Scan line by line:
    a. Look for \[crayon.+\] this pattern
    b. if you don't find this pattern then write the line as it present
    c. if you find this pattern then don't write anything and look for \[\/crayon\] this pattern
    d. until you find this pattern write every line by adding 4 spaces beginning of it.
    e. when you find (c) specified pattern then don't write anything and again start from (a) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-24T07:33:45.687

怎么样`\[crayon.*?\]\n(.*\n)*?\[\/crayon\]\n`。这种方式`\1`可以捕获每一行。*

# python - 如何防止Python删除“0005”中的前导零

> ID：15049564
> 
> 赞同：0
> 
> 时间：2013-02-24T07:17:20.253
> 
> 标签：python, list, numbers

我想创建一个从 00000 到 99999 的数字列表，并将其保存在一个文件中。但问题是 Python 删除了前导零，使 00000 只是 0。这是我的代码。

```
f=open("numbers","w")
x=00000
y=99999
while y>=x:
    zzz=str(x)+'\n'
    f.write(zzz)
    x=x+1 
```

我想像这样保存这些数字：

00000 00001 00002 以此类推……

我是 Python 新手，如果有任何帮助，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T07:21:29.400

只需使用[格式](http://docs.python.org/2/library/string.html#format-specification-mini-language)：

```
>>> print('{:05}'.format(1))
00001 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T07:21:55.850

第三种可能是[`zfill`](http://docs.python.org/2/library/stdtypes.html#str.zfill)：

```
str(x).zfill(5) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T07:20:24.837

使用`'%05d' % x`而不是`str(x)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T07:31:06.267

x=000 和 x=0 的存储方式与整数 0 完全相同。你想要的是打印你需要的格式的字符串。这是您要查找的内容：

这是您要查找的内容：

```
with open('numbers','w') as f:          # open a file (automatically closes)
    for x in range(10000):              # x = 0 to 9999
        f.write('{:05}\n'.format(x))    # write as a string field formatted as width 5 and leading zeros, and a newline character. 
```

# c++ - 如何使用 C/C++ 创建回调函数

> ID：15049568
> 
> 赞同：2
> 
> 时间：2013-02-24T07:17:51.387
> 
> 标签：c++, callback

C\C++ 是否支持回调函数机制？以及如何创建它？我已经编写了几个代码，在 C++ 中创建回调函数，但它失败了..

```
 #include<iostream>
    using namespace std;

    void callee()
    {
         printf("callee\n"); 
         printf("calleeeeeeeeee\n"); 
    }

    void callback(void* func)
    {
         printf("callback\n");     
    }

    int main()
    {
        void (*call)(void*);
        void (*call2)(void);
        call2 = &callee;
        call = &callback;
        call((void*)call2);    
        getchar();
        return 0;    
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T07:29:03.753

我不懂C++，我写了一些C代码，希望对你有帮助

```
#include <stdio.h>

void call( int, void ( *f )( int ) );
void called( int );

int main( int argc, char const *argv[] ){
    printf( "start\n" );
    call( 1, called );
    printf( "end\n" );
    getchar();
    return 0;
}

void call( int a, void ( *f )( int ) ){
    printf( "doing stuff\n" );
    printf( "a: %d\n", a );
    printf( "going to call back\n" );
    f( a * 2 );
}

void called( int b ){
    printf( "b: %d\n", b );
    printf( "b*2: %d\n", b*2 );
    printf( "call back function being called\n" );
} 
```

在函数中调用回调函数只不过是拥有一个函数指针，并在您完成计划的工作时调用该函数。

我修改了代码并使它更清楚地展示了你将如何使用回调。
如果您编译并运行它，您将看到以下结果：

```
start
doing stuff
a: 1
going to call back
b: 2
b*2: 4
call back function being called
end 
```

*好吧，要么作者编辑了问题，要么有人为他编辑了问题，不再有 C 标签。如果您不想看到纯 C 代码，请忽略此答案。我只是把它留在这里，以防有人感兴趣。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T07:34:53.870

好吧，你从来没有调用过“callee”——你用“call(void*)call2);”执行了“callback”，但是为了让你的“callee”函数执行，你需要在你的“callback”函数中运行它. 在这里，这有效：

```
#include <iostream>
#include <stdio.h>
using namespace std;

void callee()
{
     printf("callee\n");
     printf("calleeeeeeeeee\n");
}

void callback(void* func)
{
    void (*mCallbackFunc)(void);

    printf("callback\n");

    mCallbackFunc = (void(*)())func;
    mCallbackFunc();
}

int main()
{
    void (*call)(void*);
    void (*call2)(void);
    call2 = &callee;
    call = &callback;

    call((void*)call2);

    return 0;
} 
```

**输出：**

```
callback
callee
calleeeeeeeeee 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-08T06:55:26.973

这是一个使用接口回调的例子。

```
//listener observer design pattern
class MonitoringElements{
public:

//information to monitor

};

class ICondition{
public:
    virtual ~ICondition(){}

    virtual bool didTrigger(const MonitoringElements& current) = 0;
    virtual void risingEdge() = 0;
};

class MonitorManager final{
public:

    void addCondition(ICondition* condition){
        m_conditions.push_back(condition);
    }

    //constantly monitoring every x seconds
    void monitorOnce(){
        update();
        for(int i = 0; i < m_conditions.size(); ++i)
            if(m_conditions.at(i)->didTrigger(m_monitorElements)){
                m_conditions.at(i)->risingEdge();
            }
    }

private:
    void update(){
        //read sensor values here
        //update m_monitorElements;
    }

    MonitoringElements m_monitorElements;
    std::vector<ICondition*> m_conditions;
}; 
```

# php - 我下载了 aws.phar，但不能要求它

> ID：15049572
> 
> 赞同：1
> 
> 时间：2013-02-24T07:18:46.830
> 
> 标签：php, amazon-web-services, amazon-s3, phar

[我从AWS SDK for PHP 的官方存储库](https://github.com/aws/aws-sdk-php)下载了 aws.phar

我将下载的名为 aws.phar 的文件放入我的项目中。

```
require 'aws.phar'; 
```

它与我的 php 文件位于同一目录下。

任何人都知道如何处理它？完全一样：[https ://forums.aws.amazon.com/thread.jspa?messageID=399182ᝎ](https://forums.aws.amazon.com/thread.jspa?messageID=399182&#399182)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T13:53:24.710

如果您安装的 PHP 版本包含[Suhosin](http://www.hardened-php.net/suhosin/)（用于默认安装 PHP 以提高安全性的补丁），则默认情况下它不允许使用 phars。

Ubuntu 和 Debian 发行版都默认启用了 Suhosin。

为了让它工作，你需要为 phar 添加一个例外。

编辑位于 '/etc/php5/cli/conf.d/suhosin.ini' 的文件：

```
suhosin.executor.include.whitelist = phar 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T03:33:34.520

我已经解决了 Composer 的问题。起初，我以为 Composer 是针对 php 默认设置的，但它是针对您创建的项目的。您只需要在项目目录中创建一个名为“composer.json”的文件。首先导航到终端中的目录，其余步骤同在[aws/aws-sdk-php中显示](https://github.com/aws/aws-sdk-php#installing-via-composer)

# android - 如何检测音量是否设置为静音？

> ID：15049577
> 
> 赞同：9
> 
> 时间：2013-02-24T07:19:32.713
> 
> 标签：android, audio, volume

在开发 Android 应用程序时，如何检测音量是否设置为静音？

如果音量更改为静音或取消静音，我的应用程序如何获得通知？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-24T07:22:12.820

您可以使用 AudioManager 检查音量是否静音。

```
AudioManager audio = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
switch( audio.getRingerMode() ){
case AudioManager.RINGER_MODE_NORMAL:
   break;
case AudioManager.RINGER_MODE_SILENT:
   break;
case AudioManager.RINGER_MODE_VIBRATE:
   break;
} 
```

对于音量变化，有 BroadcastReceiver 。

```
public class VolumeKeyReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
       //Implement Logic
    }
} 
```

注册广播接收器

```
VolumeKeyReceiver keyReceiver = new VolumeKeyReceiver();
IntentFilter intentFilter = new IntentFilter();
intentFilter.addAction("android.media.VOLUME_CHANGED_ACTION");
registerReceiver(keyReceiver, intentFilter); 
```

# android - Play 商店的答案不一致（V2 帐单代码）

> ID：15049579
> 
> 赞同：0
> 
> 时间：2013-02-24T07:20:19.067
> 
> 标签：android, in-app-purchase, in-app-billing

我将其用于应用内托管项目 - 现在必须是 V2 计费代码，以便与旧操作系统兼容。

代码一切正常 - 直到现在。但是，使用测试电子邮件地址似乎陷入了困境。- 在 RESTORE_TRANSACTIONS 上查找以前的购买请求通过 OK，响应 OK，但在 PURCHASE_STATE_CHANGE 中没有列出以前的交易。很公平 - 有一次购买，但已被取消。- 但是，当尝试购买 Play 商店时会弹出一个对话框说“你已经拥有这个项目”，并且不允许购买它。- 更糟糕的是，如果在 Play 商店对话框中单击“详细信息...”以了解购买情况，Play 商店会崩溃。

因此，这似乎是 Play 商店/Google 服务器的问题。有没有人见过这个，你如何解决它？

还有一些其他问题，但没有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T09:39:53.680

清除这种不一致的方法是在设置>>应用程序下清除 Play Store 和 Play Store 服务的缓存。

# c# - 使用 Unity IoC 时如何实现 Ninject .InSingletonScope()

> ID：15049583
> 
> 赞同：2
> 
> 时间：2013-02-24T07:20:36.743
> 
> 标签：c#, asp.net-mvc, ninject, unity-container

我在我的应用程序中使用了ninject IoC，特别是以下内容：

```
kernel.Bind<RepositoryFactories>().To<RepositoryFactories>()
   .InSingletonScope(); 
```

我想使用 Unity IoC 来实现它，但有人可以告诉我如何使它相同，以及它是什么意思“InSingletonScope()”？以下工作，但我担心它没有正确完成，因为可能需要指定单例。

```
container.RegisterType<RepositoryFactories, RepositoryFactories>(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T07:37:49.117

Unity 使用`LifeTimeManager`'s.. 的概念，它带有本质上`LifeTimeManager`称为Singleton 的东西`ContainerControlledLifetimeManager`。您可以按如下方式使用它：

```
container.RegisterType<RepositoryFactories>(new ContainerControlledLifetimeManager(), /* other params */); 
```

我不确定您是否在问题中询问 Singleton 是什么：

> 还有“InSingletonScope()”是什么意思？

In the context of an IoC container such as Ninject and Unity, a Singleton is an object that is the same each time you request it. In your example, every time you ask your container to resolve a `RepositoryFactories` object.. it will always be the same object; not a new instance.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T07:37:10.330

根据[这个](http://msdn.microsoft.com/en-us/library/ff647854.aspx)你应该使用`ContainerControlledLifetimeManager`. 您的注册将是：

```
container.RegisterType<RepositoryFactories>(new ContainerControlledLifetimeManager()) 
```

# diagram - 上下文级DFD

> ID：15049587
> 
> 赞同：0
> 
> 时间：2013-02-24T07:21:20.980
> 
> 标签：diagram, modeling, dataflow-diagram

所以，不太确定这是否是正确的地方，但我有这个当前的上下文级别数据流程图，用于下面的规范提取，我以前从未做过，所以我想知道它是否正确或是否需要修复？任何帮助表示赞赏

这是我目前的一个屏幕的链接[http://i.imgur.com/S4xvutc.png](http://i.imgur.com/S4xvutc.png) 规范 目前办公室工作人员操作以下流程：

**添加/修改/删除会员资格** 当收到新的会员资格申请或当会员表示他/她希望对其详细信息进行修改时，这将按需运行。当会员资格由经理酌情终止时，它也会在极少数情况下运行。新成员分配了一个 ID 号（简单地从以前接受的成员资格增加）。出于会计目的，还保留会员余额。

另一个过程以类似的方式对与传输伙伴相关的数据进行操作。

**每月维护** 这在每个月的最后一天运行，以发出订阅到期的请求和提醒，并删除仍未支付费用的会员资格。还会生成标准字母。会员余额将酌情更新。

**付款更新** 这在每月维护之前运行，会员余额会相应更新。

此时也支付给合作伙伴的款项。

**新成员搜索** 只要将新成员添加到数据库，就会运行此搜索。合作伙伴根据车辆类别和位置进行划分。通常，在特定地点的合作伙伴选择有限（如果确实有任何选择），但对于一些受欢迎的目的地，有几个合作伙伴参与提供机场接送服务。因此，然后通过适当的部分以下列方式搜索可能的匹配项：然后根据性别进行搜索（许多女性乘客特别喜欢同性别的司机，特别是如果单独旅行或结伴旅行）。然后根据成本（如果有）、额外要求的设施（如儿童座椅、空调等）的可用性等因素选择匹配项。

**现有成员 - 其他搜索** 这些以与新成员搜索相同的方式按需运行。会员当然可以要求进行任意数量的此类搜索，但每次都需要单独付款。

所有财务交易（付款）也过帐到单独的帐户文件中，该文件还存储与运行成本相关的其他财务细节，以供公司会计师在财政年度结束时考虑。

感谢您的帮助，关于此级别 0 仅上下文 DFD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T05:40:01.213

它需要一些修复。

最明显的缺陷是您在数据流中使用动词。在某些情况下，只需丢弃动词即可轻松解决此问题。*返回余额和状态*不是数据流，但*余额和状态*是。

在其他情况下，这并不容易。*检查余额，是否出色？*听起来更像是一个*流程*而不是数据流。看起来会计负责做这项工作。那么会计会产生一份未清余额清单吗？或者它会返回一个单一的余额和状态，如果是这样，基于什么输入？您的 Airpot 运输系统会将*余额*清单发送给会计部门吗？

举个例子`Monthly Maintenance`。重要的是你想要

*   到期订阅请求和提醒
*   标准字母

这些需要在您的 DFD 中可见

您想要删除费用仍未支付的会员资格这一事实可能没有放在顶层图表中，因为这看起来像是内部事务。

一般来说，关注系统*产生*的东西。保持内部状态是次要的，是产生所需输出的必要条件。

# php - 带有子文件夹的 require_once

> ID：15049592
> 
> 赞同：7
> 
> 时间：2013-02-24T07:22:06.320
> 
> 标签：php, require-once

我的文件夹主页有两个子文件夹，如下所示

```
+Home  
 +include  
   - membersite_config.php

+iDiscover  
   -index.php 
```

在 index.php 中，我添加了 require_once 脚本来访问 membersite_config.php

```
<?PHP

require_once($_SERVER['DOCUMENT_ROOT'].'/include/membersite_config.php');
?> 
```

我收到以下错误：警告：require_once(./include/fg_membersite.php)：无法打开流：第 2 行的 D:\Home\include\membersite_config.php 中没有这样的文件或目录
致命错误：require_once()：在第 2 行的 D:\Home\include\membersite_config.php 中打开所需的 './include/fg_membersite.php' (include_path='.;C:\php\pear') 失败

错误说 No such file or directory 而 The path "D:\Home\include\membersite_config.php" is correct 。当我将 index.php 移动到 root 下时，页面运行良好。

我也尝试使用[此处](https://stackoverflow.com/questions/14776386/how-to-require-once-from-different-directories "这里")描述的以下代码， 但它给出了相同的错误

```
<?PHP

define('ROOT', 'D:Home\\');
require_once(ROOT ."/include/membersite_config.php");
?> 
```

编辑 ：

我也试过 require_once("../include/membersite_config.php"); 它给出了同样的错误

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T08:18:56.440

你必须包括这样

```
require_once(dirname(__FILE__) . '/include/membersite_config.php'); 
```

因为在 httpd.conf 中不能设置 DocumentRoot

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T07:42:33.193

该错误意味着您的要求在`membersite_config.php`第 2 行不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T08:17:04.430

```
require_once(dirname(dirname(__FILE__)).'/home/include/membersite_config.php'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T07:25:58.733

尝试这个：

```
require_once("../include/membersite_config.php"); 
```

**不要忘记检查文件/文件夹权限！**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T07:26:47.033

尝试这个：

```
<?PHP
require_once('../include/membersite_config.php');
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-24T07:39:11.787

'..' 表示返回

require_once('../include/membersite_config.php');

意思是取出你所在的文件夹，然后输入 include...

如果您必须取出三个文件夹，请执行此操作 ../../../include... 等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-24T08:23:56.947

调试试试这个：

```
<?php
$dir_files=glob($_SERVER['DOCUMENT_ROOT'].'/include/*');
print_r($dir_files);
?> 
```

运行此脚本后，您将查看文件名是否正确。

# php - 每次点击都会附加 Codeigniter url

> ID：15049593
> 
> 赞同：0
> 
> 时间：2013-02-24T07:22:06.927
> 
> 标签：php, codeigniter

每当我单击具有图像/上传操作的表单中的按钮或具有相同链接的超链接时，我都会遇到 CI 问题，每当我第二次单击它时就会附加该链接。比如说我的家是 localhost/admin 并且我单击一个按钮或一个具有图像/上传的链接.. 所以 url 现在将成为 localhost/admin/image/upload 但是当我第二次单击相同的按钮时 url 将现在 beh calhost/admin/image/image/upload wchich 然后导致 404 错误，这当然是错误，因为仅通过查看该 url 找不到该页面。每次我单击按钮或链接时都会附加它。

有知道的朋友请分享一下！

更新：顺便说一句，对于所有不知道或遇到此问题的人来说，这是一个提醒。使用锚或 CI 中的任何助手，因为如果您手动将链接放入 href 或表单标签上的操作而不放置 base_url ..您的 URL会搞砸的.. 助手会附加 base_url。:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T07:29:10.737

只需将**http://**放在您的链接前面。

或其他

更改您的配置文件：

```
$config['base_url'] =  'http://www.yourhost.com/home'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T07:29:11.437

查看 Codeigniter 文档和 URL Helper。那应该会有所帮助。

[http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)

我知道你会做的锚：

```
echo anchor('image/upload', 'Upload'); 
```

这会将 url 附加到基本 url，您不必担心更改任何内容或任何 404 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T07:26:54.580

尝试将 url 链接为`'/path-to-url'`. `'/'`网址前注意。

```
<a href="/image/upload"> Link </a> 
```

目前你可能会像下面这样

```
<a href="image/upload"> Link </a> 
```

也尝试改变

```
$config['base_url'] =  'http://localhost/home/'; 
```

# cakephp - 基于字段值的CakePHP模型关联？

> ID：15049605
> 
> 赞同：0
> 
> 时间：2013-02-24T07:23:26.633
> 
> 标签：cakephp, model

我有三张桌子（实际上还有几张，但我只需要三张来解决这个问题）。应用程序、Appattrs 和 Appcats。用 CakePHP 的说法（尽我所能，因为我仍在学习框架）应用程序有许多应用程序和应用程序属于应用程序。简单的。

当我想关联 Appattrs 和 Appcat 时，问题就来了——该关联基于 Appattrs 中的字段值和相应的外键。例如：

如果 appattrs.type = 'appcatid' 那么 appattrs.value 将指向 Appcat 表中的一条记录。

appattrs 表包含静态数据 appattrs.type='dateadded' 和 value='201201011300' 以及外键引用。我不想讨论为什么以这种方式存储数据，我只想弄清楚如何创建关联，让我提取应用程序记录、关联的 attr 记录，然后是带有关联行的 attr 记录从相应的表中。动态地。

在我看来，我应该能够基于查询创建模型，然后关联该模型——我似乎无法弄清楚如何做到这一点。

--

如果我需要发布三个表的架构，我可以。我也可以发布我当前的模型代码，但老实说，现在它只是关联变量，所以我认为它不会让任何人去任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:21:59.530

我不明白这个设计背后的逻辑，我想你正在寻找的是[动态创建和销毁关联](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#creating-and-destroying-associations-on-the-fly)。

在 CakePHP Docs 的这一部分，它描述了如何从相应的控制器中关联模型。

因此，例如，当您想将特定数据保存到`Appattr`模型时，您可以进行一些数据检查并使用`bind()`方法创建关联。

上面的一个非常抽象的方法是这样的

```
public function yourmethod() {
     ...
     if ($this->request->data['Appattr']['type'] == 'sometype') {
         $this->Appattr->bindModel(
                array(/*Your association*/ => array(/* Your attributes...*/)
         );
         /* Rest of the logic follows */
     }
 } 
```

这样你就可以完成工作，但很可能最终会在数据库中拥有非常复杂的数据，从而拥有非常复杂的代码。

我希望这有帮助

# ruby-on-rails - 如何更新红宝石路径？

> ID：15049608
> 
> 赞同：0
> 
> 时间：2013-02-24T07:24:13.503
> 
> 标签：ruby-on-rails, ruby, path

这次我正在使用正确的说明重新安装 ruby​​，但我的路径搞砸了

这就是我收到此错误的原因

```
Last login: Sun Feb 24 02:06:37 on ttys000
Fawads-MacBook-Pro:~ fawadnaseer$ rvm install 1.9.3
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p374.
Continuing with compilation. Please read 'rvm mount' to get more information on binary rubies.
Installing Ruby from source to: /usr/local/rvm/rubies/ruby-1.9.3-p374, this may take a while depending on your cpu(s)...
ruby-1.9.3-p374 - #downloading ruby-1.9.3-p374, this may take a while depending on your connection...
######################################################################## 100.0%
ruby-1.9.3-p374 - #extracting ruby-1.9.3-p374 to /usr/local/rvm/src/ruby-1.9.3-p374
ruby-1.9.3-p374 - #extracted to /usr/local/rvm/src/ruby-1.9.3-p374
ruby-1.9.3-p374 - #configuring
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --disable-install-doc --prefix=/usr/local/rvm/rubies/ruby-1.9.3-p374 --with-opt-dir=/usr/local/rvm/usr --disable-shared', please read /usr/local/rvm/log/ruby-1.9.3-p374/configure.log
There has been an error while running configure. Halting the installation. 
```

Configure.log 文件内容

这是configure.log文件[2013-02-24 02:09:37] ./configure current path: /usr/local/rvm/src/ruby-1.9.3-p374 command(7): env LDFLAGS=- L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --disable-install-doc --prefix =/usr/local/rvm/rubies/ruby-1.9.3-p374 --with-opt-dir=/usr/local/rvm/usr --disable-shared 检查构建系统类型... x86_64-apple-darwin12 .2.1 检查主机系统类型... x86_64-apple-darwin12.2.1 检查目标系统类型... x86_64-apple-darwin12.2.1 检查 C 编译器默认输出文件名... 配置：错误：C 编译器无法创建可执行文件

**更新：**

好的，我已经安装了 RVM 安装了 Ruby 安装了 Rails

当我输入 echo $PATH 时会发生什么

echo $PATH /Users/fawadnaseer/.rvm/gems/ruby-1.9.3-p392/bin:/Users/fawadnaseer/.rvm/gems/ruby-1.9.3-p392@global/bin:/Users/fawadnaseer/ .rvm/rubies/ruby-1.9.3-p392/bin:/Users/fawadnaseer/.rvm/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt /X11/bin

**这条路有什么问题吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:23:38.640

尝试使用 clang 编译器而不是默认编译器：

`rvm install 1.9.3 --with-gcc=clang`

# wordpress - WordPress：插件设置页面的分页出现问题

> ID：15049613
> 
> 赞同：1
> 
> 时间：2013-02-24T07:25:10.020
> 
> 标签：wordpress, plugins, pagination

在 WordPress 中开发一个插件并变得很好，但卡在插件页面的分页上。这是我从互联网下载的代码（从这里获得参考）

```
$items = $wpdb->get_var($wpdb->prepare("SELECT COUNT(*) FROM $wpdb->review_media GROUP BY post_id")); // number of total rows in the database 
```

// 测试并得到注释的结果 print_r($items); // 说这是输出值 2 echo $rm_options['list_per_page']; // 这是我设置为值 1 的选项

```
if($items > 0) {
        $p = new pagination;
        $p->items($items);
        $p->limit(empty($rm_options['list_per_page']) ? 20 : $rm_options['list_per_page']); // Limit entries per page
        $p->target("admin.php?page=moderate.php"); 
        $p->currentPage($_GET[$p->paging]); // Gets and validates the current page
        $p->calculate(); // Calculates what to show
        $p->parameterName('paging');
        $p->adjacents(1); //No. of page away from the current page

        if(!isset($_GET['paging'])) {
            $p->page = 1;
        } else {
            $p->page = $_GET['paging'];
        }

        //Query for limit paging
        $limit = "LIMIT " . ($p->page - 1) * $p->limit  . ", " . $p->limit;

} else {
    echo "No Record Found";
} 
```

当我不按 post_id 对查询进行分组时，它工作正常，但一旦我将其分组，它的行为就很奇怪。它正在创建分页链接并获取空白页面。我认为原因是对行进行分组。但不知道如何解决这个问题。

这是我的表格截图

![在此处输入图像描述](../Images/b2ff31f47ad2df37de257e46514a8ef6.png)

非常感谢你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T23:14:46.977

如果您使用 WordPress`WP_List_Table`类，它将处理分页并为用户提供默认的表格体验。

本[教程](http://wpengineer.com/2426/wp_list_table-a-step-by-step-guide/)涵盖了所有内容，分页部分是：

```
function prepare_items() {
  [...]
  $per_page = 5;
  $current_page = $this->get_pagenum();
  $total_items = count($this->example_data);

  // only necessary because we have sample data
  $this->found_data = array_slice($this->example_data,(($current_page-1)*$per_page),$per_page);

  $this->set_pagination_args( array(
    'total_items' => $total_items, //WE have to calculate the total number of items
    'per_page'    => $per_page     //WE have to determine how many items to show on a page
  ) );
  $this->items = $this->found_data;
} 
```

这是教程中显示[的完整插件。](https://gist.github.com/brasofilo/461bfe95216a2afde1d9)在这个[其他插件](https://github.com/franz-josef-kaiser/Internal-Link-Check)中，您可以看到`WP_List_Table`使用数据库数据的实际操作。

# node.js - 如何在 node.js 中将变量与异步回调同步

> ID：15049614
> 
> 赞同：0
> 
> 时间：2013-02-24T07:25:14.143
> 
> 标签：node.js, asynchronous

我对以下代码片段有疑问。

```
for(var i=0; i<5; i++){
    http.request(option, function(res){
        console.log(i)
    });
} 
```

这会将“i”的值打印为 5，五次。有什么方法可以使“i”的值与可以打印 0、1、2、3、4 的函数（res）同步

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T07:27:52.487

您必须为变量提供正确的范围。尝试这样的事情：

```
for(var i=0; i<5; i++){
    (function(key) {
        http.request(option, function(res){
            console.log(key)
        });
    })(i);
} 
```

# ios - UITextField 苹果的编辑效果

> ID：15049615
> 
> 赞同：1
> 
> 时间：2013-02-24T07:25:21.167
> 
> 标签：ios, uitextfield

UITextField处于编辑模式时如何重现Apple的蓝色褪色边框效果

# android - 通过选中/取消选中 CheckBoxPreference 来启动/停止服务

> ID：15049621
> 
> 赞同：3
> 
> 时间：2013-02-24T07:26:25.420
> 
> 标签：android, preferenceactivity, checkboxpreference

我正在编写一个通过选中或取消选中来启动或停止服务的应用程序`CheckBoxPreference` 我试图找到一些信息，例如示例代码或教程。但我还没有找到。如何通过选中或取消选中`CheckBoxPreference` in来启动或停止服务`PreferenceActivity`？我想在“service_toggle”键为真时启动服务，并在“service_toggle”键为假时停止服务是否有关于通过选中/取消选中启动/停止服务的示例代码或教程`CheckBoxPreference`？

这是我的代码：

* * *

***设置.java***

```
package kr.hybdms.sidepanel;

import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.preference.Preference;
import android.preference.Preference.OnPreferenceClickListener;

import com.actionbarsherlock.app.SherlockPreferenceActivity;
import kr.hybdms.sidepanel.R;

public class Settings extends SherlockPreferenceActivity implements OnPreferenceClickListener{

      @SuppressWarnings("deprecation")
      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.settings);

        Preference pAppName = (Preference)findPreference("blog_intent");
        Preference pAppVersion = (Preference)findPreference("appinfo_intent");

        pAppName.setOnPreferenceClickListener(this);
        pAppVersion.setOnPreferenceClickListener(this);
    }

    @Override
    public boolean onPreferenceClick(Preference preference)
    {

        if(preference.getKey().equals("blog_intent"))
        {
            Intent blog = new Intent(Intent.ACTION_VIEW);
            blog.setData(Uri.parse("http://hybdms.blogspot.kr"));
            startActivity(blog);
        }

        else if(preference.getKey().equals("appinfo_intent"))
        {
            Intent appinfo = new Intent(Settings.this, Appinfo.class); 
             startActivity(appinfo);
        }
        return false;
    }

} 
```

* * *

***设置.xml***

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen
        xmlns:android="http://schemas.android.com/apk/res/android">
    <CheckBoxPreference android:key="service_toggle" android:title="@string/pref_service_toggle" android:summary="@string/pref_service_toggle_sub" android:defaultValue="false"/>
    <CheckBoxPreference android:key="autostart_toggle" android:title="@string/pref_auto" android:summary="@string/pref_auto_sub" android:defaultValue="false" android:selectable="false" android:enabled="false"/>
    <Preference android:key="guide_intent" android:selectable="false" android:summary="@string/pref_guide_sub" android:title="@string/pref_guide" android:enabled="false"/>
    <Preference android:key="blog_intent" android:summary="@string/pref_blog_sub" android:title="@string/pref_blog"/>
    <Preference android:key="appinfo_intent" android:summary="@string/pref_appinfo_sub" android:title="@string/pref_appinfo"/>

</PreferenceScreen> 
```

* * *

***TouchDetectService.java***

```
package kr.hybdms.sidepanel;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.view.Gravity;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.WindowManager;
import android.widget.ImageView;
import android.graphics.PixelFormat;

public class TouchDetectService extends Service {
    private ImageView mTouchDetector;                           
    private WindowManager.LayoutParams mParams;     
    private WindowManager mWindowManager;       

    private OnTouchListener mViewTouchListener = new OnTouchListener() {
        @Override public boolean onTouch(View v, MotionEvent event) {
            switch(event.getAction()) {

                case MotionEvent.ACTION_MOVE:

                    Intent lsp = new Intent(getBaseContext(), LeftSidePanel.class);
                    lsp.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    getApplication().startActivity(lsp);
                    break;
            }

            return true;
        }
    };

    @Override
    public IBinder onBind(Intent arg0) { return null; }

    @Override
    public void onCreate() {
        super.onCreate();

            mTouchDetector = new ImageView(this);                                         
            mTouchDetector.setImageResource(R.drawable.detector);
            mTouchDetector.setOnTouchListener(mViewTouchListener);            

            mParams = new WindowManager.LayoutParams(
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.WRAP_CONTENT,
                WindowManager.LayoutParams.TYPE_PHONE,
                WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,  
                PixelFormat.TRANSLUCENT);                                        
            mParams.gravity = Gravity.LEFT | Gravity.CENTER;                  

            mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);  
            mWindowManager.addView(mTouchDetector, mParams);      permission 
        }

    @Override
    public void onDestroy() {
        if(mWindowManager != null) {        
            if(mTouchDetector != null) mWindowManager.removeView(mTouchDetector);
        }
        super.onDestroy();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T08:29:13.787

```
CheckBoxPreference checkboxPref = (CheckBoxPreference)getPreferenceManager().findPreference("service_toggle");

checkboxPref.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {            

    public boolean onPreferenceChange(Preference preference, Object newValue) {

        boolean myValue = (Boolean) newValue;

        if(myValue)
            startService(new Intent(Settings.this, TouchDetectService.class));
        else
            stopService(new Intent(Settings.this, TouchDetectService.class));

        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T08:27:37.993

```
public class Settings extends SherlockPreferenceActivity implements OnPreferenceClickListener, OnPreferenceChangeListener {

      @SuppressWarnings("deprecation")
      @Override
      public void onCreate(Bundle savedInstanceState) {
        .........

        CheckBoxPreference chkServiceToogle = (CheckBoxPreference)findPreference("service_toggle");
        chkServiceToogle.setOnPreferenceChangeListener(this);
    }

    @Override
    public boolean onPreferenceChange(Preference preference, String key)
    {
        if (key.equals("service_toggle")) {
            if(sharedPreferences.getBoolean(key, false)) {
                Intent intent = new Intent(getApplicationContext(), TouchDetectService.class);
                startService(intent);
            } else {
                Intent intent = new Intent(getApplicationContext(), TouchDetectService.class);
                stopService(intent);
            }
        }
    }
........
} 
```

# android - 使用 ksoap2 android 发送图像

> ID：15049631
> 
> 赞同：0
> 
> 时间：2013-02-24T07:27:51.810
> 
> 标签：android, web-services, android-ksoap2

我正在尝试使用 Ksoap2 从 Android 发送 .jpeg 图像，但是我尝试过的所有操作都收到错误消息“无法序列化”，这就是我正在做的事情：

```
 ByteArrayOutputStream out = new ByteArrayOutputStream();
    bitmap.compress(CompressFormat.JPEG, 100, out);
    byte[] raw = out.toByteArray();
    String encodedImage = Base64.encodeToString(raw, Base64.DEFAULT);

    SoapObject request = new SoapObject("http://tempuri.org/", "sendImage");
    request.addProperty("image", out);       
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);     
    envelope.setOutputSoapObject(request);
    envelope.dotNet = true;

    try {
        Toast.makeText(getApplicationContext(), "Sending Pic", Toast.LENGTH_LONG).show();
        HttpTransportSE androidHttpTransport = new HttpTransportSE("http://www.letstrend.com/spursService.asmx?WSDL");
        androidHttpTransport.call("http://tempuri.org/sendImage", envelope);
        SoapObject result = (SoapObject)envelope.bodyIn;
    } catch (Exception e) {
        e.printStackTrace();            
        Toast.makeText(getApplicationContext(), "in catch e=" + e.getMessage(), Toast.LENGTH_LONG).show();
    } 
```

我已经尝试发送原始和编码图像，但都以错误的形式返回。out 实际上是我认为它应该看起来的样子，也是我认为我的 .Net web 服务所期望的。网络服务期望：

```
 <myImage>base64Binary</myImage> 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T00:28:24.860

没关系，我明白了。这是我使用的代码：

```
 byte[] bytearray = null;
    try
    {
        is = new FileInputStream(_path);
        if(_path != null)
            try{
                bytearray = streamToBytes(is);                  
            }finally{
                is.close();
            }
    }catch (Exception e)
    {}

    SoapObject request = new SoapObject("http://tempuri.org/", "sendImage");        
    request.addProperty("myImage", bytearray);

    SoapSerializationEnvelope envelope=new SoapSerializationEnvelope(SoapEnvelope.VER11);
    new MarshalBase64().register(envelope);
    envelope.dotNet = true; 
    envelope.setOutputSoapObject(request);

    try {
        Toast.makeText(getApplicationContext(), "Sending Pic", Toast.LENGTH_LONG).show();
        Toast.makeText(getApplicationContext(), "array length=" + bytearray.length, Toast.LENGTH_LONG).show();
        HttpTransportSE androidHttpTransport = new HttpTransportSE("http://www.letstrend.com/spursService.asmx?WSDL");
        androidHttpTransport.call("http://tempuri.org/sendImage", envelope);
        SoapObject result = (SoapObject)envelope.bodyIn;
    } catch (Exception e) {
        e.printStackTrace();            
        Toast.makeText(getApplicationContext(), "in catch e=" + e.getMessage(), Toast.LENGTH_LONG).show();
        Toast.makeText(getApplicationContext(), "fault=" + ((SoapFault) envelope.bodyIn).faultstring, Toast.LENGTH_LONG).show();
    } 
```

然后我有一个程序叫做：

```
public static byte[] streamToBytes(InputStream is) {
    ByteArrayOutputStream os = new ByteArrayOutputStream(1024);
    byte[] buffer = new byte[1024];
    int len;
    try {
        while ((len = is.read(buffer)) >= 0) {
            os.write(buffer, 0, len);
        }
    } catch (java.io.IOException e) {
    }
    return os.toByteArray();
} 
```

代码来自： http: [//lakshman39.wordpress.com/2012/09/08/sending-byte-to-a-webservice-using-ksoap2-in-android/](http://lakshman39.wordpress.com/2012/09/08/sending-byte-to-a-webservice-using-ksoap2-in-android/)

在 Web 服务器上将其转换回图像，请执行以下操作：

```
Dim FilePath As String = Server.MapPath("~/folder/")
System.IO.File.WriteAllBytes(FilePath & "filename.jpg", myImage) 
```

# c++ - 需要结构包含/实现帮助 (c++)

> ID：15049632
> 
> 赞同：0
> 
> 时间：2013-02-24T07:28:00.147
> 
> 标签：c++, struct, header, typedef

我正在尝试修改一些代码，以便在我的 mysh.cpp 文件中包含和使用双向链表，我得到了

```
error: aggregate ‘linked_list list’ has incomplete type and cannot be defined 
```

在编译。readcommand.cpp 编译得很好，所以我只是想弄清楚头文件或 cpp 文件中需要更改的内容，以使其在 mysh 中顺利运行。

以下是使用的文件的相关部分：

**mysh.cpp**

```
#include "readcommand.h"

using namespace std;

int main (int argc, char** argv) {
  readcommand read;
  linked_list list; // THIS is the line that's causing the error

  ...
} 
```

**读取命令.h**

```
#ifndef READCOMMAND_H
#define READCOMMAND_H

#include <cstdio>
#include <iostream>
#include <cstring>
#include <cstdlib>

class readcommand {

  public:

  // Struct Definitions
  typedef struct node node_t;
  typedef struct linked_list linked_list_t;

  struct node;
  struct linked_list;

...
};

#endif 
```

**读取命令.cpp**

```
#include "readcommand.h"

using namespace std;

struct node {
  const char *word;
  node *prev;
  node *next;
};

struct linked_list {
  node *first;
  node *last;
};

... 
```

* * *

自从我在 c++ 或一般语言中使用标题以来已经有一段时间了。我已经尝试将有问题的行更改为

```
read.linked_list list; 
```

和

```
read.linked_list list = new linked_list; 
```

等等，但它只是将错误更改为

```
error: ‘class readcommand’ has no member named ‘linked_list’ 
```

和

```
error: invalid use of ‘struct readcommand::linked_list’ 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:33:03.987

你需要把这些...

```
struct node {
  const char *word;
  node *prev;
  node *next;
};

struct linked_list {
  node *first;
  node *last;
}; 
```

...编译器在使用它们*之前*会看到它们的地方`class readcommand`。可能最简单的做法是将它们放在 readcommand.h *before* `class readcommand`中。问题是你正在使用它，`node`但编译器不知道它们在编译时是什么。`linked_list``class readcommand`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T07:31:16.950

结构/类定义（而不仅仅是声明）需要在您使用时可见

1.  取消引用指向该结构/类的指针
2.  创建该结构/类的对象

编译器需要知道对象的大小及其字段的位置。

这就是为什么您可能希望将 node 和 linked_list 的定义放入 .h 文件的原因。通常，您只将成员函数的定义放入 .cpp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T07:31:33.100

您 `linked_list`在 cpp 文件中有定义...因此，如果包含 .h 文件，编译器将看不到该结构的定义。

将结构的定义移动到头文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T07:33:54.483

在 readcommend.h

linked_list 是 readcommand 类的成员，您可以通过 readcommand 对象访问它，或者如果 readcommand.cpp 将linked_list 移动到 readcommand.h insead 以便编译器知道“它是什么”

# javascript - 宽度为 100% 时的流体图像重叠 div；

> ID：15049633
> 
> 赞同：1
> 
> 时间：2013-02-24T07:28:17.750
> 
> 标签：javascript, html, css, fluid-layout

我试图弄清楚为什么我的 div 被其他 div 重叠。

标记看起来像

```
 <div  class="headerCarrousel">
    <img src="data/img/1_hero_carrousel/1.jpg" >
    <img src="data/img/1_hero_carrousel/2.jpg" >
    <img src="data/img/1_hero_carrousel/3.jpg" >
 </div>

 <div class="theStory">
    <p>aaaa</p>
 </div> 
```

而我的风格我使用的是 sass，这就是为什么这个代码结构。

```
.headerCarrousel {
   min-width: 1024px;
}

.headerCarrousel img{
    display: block;
    width: 100%;
    max-width: 100%;
    height: auto;

}

.theStory{
    margin: 0 auto; 
    text-align: center; 
} 
```

因此，由于某种原因，div“theStory”位于 div headerCarrousel 下方，被重叠。请注意，我必须将图像作为流体旋转木马，这就是我使用 width: 100%; 的原因。

链接说明： http: [//marceloduende.com/tango/](http://marceloduende.com/tango/)

有人有这个问题的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:59:59.877

问题解决了。

为了解决这个问题，我必须使用 jquery 动态添加我的高度。

```
$('.headerCarrousel')
.css('height', $('.headerCarrousel img').height()); 
```

谢谢你们。

# ios - 无法关闭键盘 iOS。没有任何效果

> ID：15049635
> 
> 赞同：0
> 
> 时间：2013-02-24T07:28:32.300
> 
> 标签：ios, keyboard, dismiss

我是 iPhone iOS 开发的新手。我无法关闭键盘，没有任何效果。请帮助我，也许我没有注意到什么？

我的 .h 文件：

```
#import "UIKit/UIKit.h"

@interface ViewController : UIViewController <UITextViewDelegate>
@property (weak, nonatomic) IBOutlet UITextField *textField;
@end 
```

我的 .m 文件：

```
#import "ViewController.h"
#import "UIKit/UIKit.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(BOOL) textFieldShouldReturn: (UITextField *) textField{
    [textField resignFirstResponder];
    return YES;
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T07:47:20.703

嗨，这是一个简单的错误。您尚未设置委托。你可以通过..

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    textField.delegate = self;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T07:50:27.250

请添加`textField.delegate = self;`到您的`viewDidLoad`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T07:46:19.317

您很可能忘记为 textField 设置委托。在故事板或 nib 文件中，将 UITextField 的委托拖到 ViewController。

# ios - 升级 Xcode 后项目有问题

> ID：15049637
> 
> 赞同：0
> 
> 时间：2013-02-24T07:28:40.037
> 
> 标签：ios, xcode, cocoa-touch, cocoa

我有一个我维护的旧应用程序。该应用程序最初是在 XCode 4.2 上编译的。如果我采用完全相同的项目在 XCode 4.6 上找到并编译它，我会遇到一些奇怪的错误，例如 ViewControllers 不刷新、Back 无法正常工作等。如果我将采用相同的项目并在我的另一台机器上的 xcode 4.2 上重新编译它，一切都会正常工作。在我深入研究代码之前，有人可以告诉我为什么会发生这样的事情吗？我的主要嫌疑人是每个 Xcode 的 Base SDK。那有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:11:52.677

我无法告诉您 4.2 和 4.6 之间是否会有差异，但从历史上看，设备上的 iOS 框架（以及在较小程度上，模拟器）*确实会*根据应用程序编译的 SDK 版本略有调整反对。你不能排除它。

一个经典（虽然现在很古老）的例子是背景。当按下 Home 按钮时，针对旧 SDK 构建的应用程序会退出，而不是获得更新的行为。最近（但微妙）的示例包括对表格视图的一些更改和对设备旋转的更改。

您不应*尝试*使用较新的编译器使用较旧的 SDK 进行构建。Apple 不支持这种配置。您应该始终使用最新的 SDK。无论如何，您不会想假装这些问题不存在：这些错误是真实的，它们之前只是被隐藏了。

您不太可能无法以旧版 iOS 继续运行的方式修复这些错误（尽管您可能会发现它会打开一堆您认为不值得为旧版操作系统修复的蠕虫）。

# ios - 尝试学习 iPhone Tweak Dev，“make”命令出现未知 Theos 错误

> ID：15049638
> 
> 赞同：0
> 
> 时间：2013-02-24T07:28:49.580
> 
> 标签：ios, makefile, cydia, tweak, theos

这就是终端中出现的内容。有什么建议吗？我已经在这个线程中完成了建议：[在 theos 中编译调整时出错，](https://stackoverflow.com/questions/10891846/error-compiling-tweak-in-theos)但它没有帮助。

```
Copying resource directories into the application wrapper...
Compiling main.m...
Compiling fooProjectApplication.mm...
Compiling RootViewController.mm...
Linking application fooProject...
collect2: ld terminated with signal 6 [Abort trap: 6]
ld(2090,0x7fff77045960) malloc: *** error for object 0x7fcaaa5009c0: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
collect2: ld terminated with signal 6 [Abort trap: 6]
ld(2094,0x7fff77045960) malloc: *** error for object 0x7fbeeb6003d0: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
lipo: can't open input file: /var/folders/nl/nffpk84n2vq1pg2lxcplx4mh0000gn/T//ccKO4deH.out (No such file or directory)
make[2]: *** [obj/fooProject.app/fooProject.ba964c90.unsigned] Error 1
make[1]: *** [internal-application-all_] Error 2
make: *** [fooProject.all.application.variables] Error 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T12:27:20.730

将此设置在您的 makefile 顶部

```
export ARCHS = armv7
export TARGET = iphone:latest:4.3
export GO_EASY_ON_ME=1 
```

我有同样的问题，所以这可能会帮助你解决它

# cocos2d-iphone - 如何动态更改 CCSequence 中的延迟？

> ID：15049645
> 
> 赞同：0
> 
> 时间：2013-02-24T07:29:57.673
> 
> 标签：cocos2d-iphone

我有一个我试图重复的序列，并随着重复的每次出现改变延迟时间......就像：

```
__block CCDelayTime *delayTime = [CCDelayTime actionWithDuration:myDelay];

[CCRepeat actionWithAction:[CCSequence actions:
                            [CCCallFunc actionWithTarget:self selector:@selector(doSomething)],
                            delayTime,
                            [CCCallBlock actionWithBlock:^{
                            delayTime.duration = delayTime.duration / 2
                        }.... 
```

我没有得到真正快速的地方.. 尽管 CCDelayTime 的 duration_ ivar 的实例实际上已正确设置为其先前值的一半，但在单步执行代码时，似乎只要控制到达其中一个基础class' (CCActionInterval) 方法，例如 step 或 update:，duration_ ivar 恢复到原始值（myDelay 设置的值）。

我花了很多时间浏览 cocos 代码，试图弄清楚为什么会这样，但最终决定放弃，看看这里是否有人可以帮助我。也许有更好的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T08:25:20.133

你在这里做的是：调用一个函数，等待一段时间（延迟），运行一个块来改变已经运行的动作的等待时间。

你需要用到的是CCSpeed，给它添加延迟动作，并保留对CCSpeed的引用，这样你就可以从序列*之外修改速度。*

# php - 处理羊群时会发生什么？

> ID：15049649
> 
> 赞同：1
> 
> 时间：2013-02-24T07:30:44.990
> 
> 标签：php, http, sync

在这种情况下我需要帮助，

在处理请求的过程中，由于某种原因我需要写入文件，所以我使用了flock来确保只有一个请求同时写入文件。

我的问题是当一个请求在被其他请求锁定期间调用群发时会发生什么。是等到释放还是只返回false而不打开文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T07:50:03.243

根据[文档](http://php.net/manual/en/function.flock.php)

> 默认情况下，此函数将阻塞，直到获得请求的锁

只要确保使用正确的锁（参见文档）

*   LOCK_SH 获取共享锁（读取器）。
*   LOCK_EX 获取排他锁（写入器）。

基本上，*写入者*等待排他锁，这意味着它等待所有读取者或当前写入者释放（ir）锁。而*读者*可能不止一个阅读文件。

并且，释放锁

*   LOCK_UN 释放锁（共享或独占）。

# javascript - 在由javascript创建的div标签中定位图像？

> ID：15049653
> 
> 赞同：0
> 
> 时间：2013-02-24T07:31:33.970
> 
> 标签：javascript, image, html, position

我正在尝试将图像放置在由 javascript 函数生成的 div 标记中。问题是图像的位置不是距左侧 75 像素和距顶部 40 像素，而是停留在 0,0。这是代码。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<HTML lang="en">
<HEAD>  
<META http-equiv="Content-Type" content="text/html">    
</HEAD> 
<SCRIPT language = "JavaScript">
var my_div = null;
var newDiv = null; 
function creatediv(id, width, height, left, top, opacity) 
{ 
    var newdiv = document.createElement('div'); 
    newdiv.setAttribute('id', id);  

    newdiv.style.width =  width + "px";     
    newdiv.style.height = height + "px";     

    newdiv.style.position = "absolute";         
    newdiv.style.left = left + "px";         
    newdiv.style.top = top + "px";  

    newdiv.style.opacity = opacity;

    document.body.appendChild(newdiv); 

    my_div = document.getElementById(id);
    document.body.insertBefore(newdiv, my_div);
}
</SCRIPT>
<BODY onload="  creatediv('logo', 792, 1000, 75, 40, 1)">
<div  id = "logo" style=" z-index:1; font-size:200%; ">         
        <img src="some.gif" width="10%" height="10%">           
</div>
</BODY>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:39:22.863

试试这个：[**现场演示**](http://jsfiddle.net/yTMTH/)

```
function updateDiv(id, width, height, left, top, opacity) 
{ 
    var mydiv = document.getElementById(id);
    mydiv.setAttribute('id', id);  

    mydiv.style.width =  width + "px";     
    mydiv.style.height = height + "px";     

    mydiv.style.position = "absolute"; 
    mydiv.style.left = left + "px";         
    mydiv.style.top = top + "px";  

    mydiv.style.opacity = opacity;
} 
```

**输出**

```
<body onload="  updateDiv('logo', 792, 1000, 75, 40, 1)">
<div id="logo" style="z-index: 1; font-size: 200%; width: 792px; height: 1000px; position: absolute; left: 75px; top: 40px; opacity: 1;">         
        <img src="1.jpg" width="10%" height="10%">           
</div>  
</body> 
```

* * *

**更新**

如果您需要将图像文件作为参数传递：

**HTML**

```
<BODY onload="  updateDiv('logo', 792, 1000, 75, 40, 1, '1.jpg')">
    <div  id = "logo" style=" z-index:1; font-size:200%; "></div>
</BODY> 
```

**Javascript**

```
function updateDiv(id, width, height, left, top, opacity, imgSrc) 
{ 
    var mydiv = document.getElementById(id);
    mydiv.setAttribute('id', id);  

    mydiv.style.width =  width + "px";     
    mydiv.style.height = height + "px";     

    mydiv.style.position = "absolute"; 
    mydiv.style.left = left + "px";         
    mydiv.style.top = top + "px";  

    mydiv.style.opacity = opacity;

    mydiv.innerHTML = '<img src="' + imgSrc + '" width="10%" height="10%">';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T07:41:11.440

如果要使图像位于 javascript 生成的 div 内，则可以使用以下代码：

```
function creatediv(id, width, height, left, top, opacity, imageurl) 
{ 
    var newdiv = document.createElement('div'); 
    newdiv.setAttribute('id', id);  

    newdiv.style.width =  width + "px";     
    newdiv.style.height = height + "px";     

    newdiv.style.position = "absolute";         
    newdiv.style.left = left + "px";         
    newdiv.style.top = top + "px";  

    newdiv.style.opacity = opacity;

    newdiv.innerHTML='<img src="' + imageurl + '" width="10%" height="10%">';

    document.body.appendChild(newdiv); 

    my_div = document.getElementById(id);
    document.body.insertBefore(newdiv, my_div);
} 
```

# java - 在浏览器上使用 java awt 机器人

> ID：15049655
> 
> 赞同：1
> 
> 时间：2013-02-24T07:32:23.330
> 
> 标签：java, oracle, awt, weblogic, awtrobot

尝试在已部署的应用程序中使用 java awt 机器人，最初得到无头异常，认为更改无头属性就可以了，但问题仍然存在

```
 try {
        Field defaultHeadlessField =      java.awt.GraphicsEnvironment.class.getDeclaredField("defaultHeadless");
        defaultHeadlessField.setAccessible(true);
        defaultHeadlessField.set(null,Boolean.FALSE);
        Field headlessField = java.awt.GraphicsEnvironment.class.getDeclaredField("headless");
        headlessField.setAccessible(true);
        headlessField.set(null,Boolean.FALSE);
        System.out.print(GraphicsEnvironment.isHeadless());
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (NoSuchFieldException e) {
        e.printStackTrace();
    }
    try {
        Robot robot = new Robot(); 
```

但现在它说

```
java.awt.HeadlessException
at sun.java2d.HeadlessGraphicsEnvironment.getDefaultScreenDevice(HeadlessGraphicsEnvironment.java:64) 
```

基本用例是在浏览器窗口上模拟 keypress(0)，需要一些帮助来解决这个问题。

# android - 安卓 GPS 速度

> ID：15049656
> 
> 赞同：3
> 
> 时间：2013-02-24T07:33:03.870
> 
> 标签：android, gps, location

我有一个关于 android.location.Location.getSpeed() 的问题。我已经实现了我的 LocationListener 并指定它的提供者使用 GPS。这样 getSpeed() 始终为 0.0。我读过这个，没问题。现在，当我设置标准并指定

```
criteria.setSpeedRequired( true ); 
```

再往下

```
String bestProvider = mLocationManager.getBestProvider( criteria, true );
mLocationManager.requestLocationUpdates( bestProvider, mIntervaltime, mDistance, locationListener ); 
```

bestProvider 又是 GPS 提供商，但我收到了速度值。为什么？LocationManager.GPS_PROVIDER 和 mLLocationManager.getBestProvider(criteria, true) 有什么区别；当两者都通过检查显示他们使用 GPS 提供商时：

```
Log.i( TAG, "  Provider: " + location.getProvider() ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:57:19.183

也许我误解了这个问题，但是您必须移动 GPS 才能报告大于零的速度值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:01:36.237

我认为记录和处理速度有一些开销。而且由于您并不总是需要知道速度，因此将启用选项设为可选是有意义的，即使提供者保持不变。

# php - Hotmail 联系人导入备用 PHP

> ID：15049658
> 
> 赞同：0
> 
> 时间：2013-02-24T07:33:17.430
> 
> 标签：php, api, hotmail

我有一个在本地工作的旧脚本，用于导入 hotmail 电子邮件地址。但找不到它在实时服务器中工作。说连接超时。

脚本详细信息： http: [//blog.outsourcingnepal.com/2013/02/importing-hotmail-contacts-via-php/](http://blog.outsourcingnepal.com/2013/02/importing-hotmail-contacts-via-php/)

也对替代想法感到满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T11:58:31.827

根据我的评论：如果您的脚本在本地运行但不是远程运行，那么听起来脚本在通过您这边的防火墙时遇到了麻烦。如果您在防火墙中创建一个规则，以便它允许 1863 上的流量，那么您应该很高兴。

# python - Skype4Py 检查是否群聊

> ID：15049661
> 
> 赞同：0
> 
> 时间：2013-02-24T07:33:52.130
> 
> 标签：python, skype, skype4py

有没有办法检查聊天是否是群聊？或者至少要找出一个组中有多少用户。

比如查用户号，如果是2，那么明明是1-1（Single），但如果是别的，那就是群聊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T06:28:47.343

这是我[在这里为另一个问题编写的代码的轻微修改。](https://stackoverflow.com/questions/17176009/how-can-i-send-a-message-to-a-group-conversation-with-skype4py-in-python/17176358#17176358)以下代码检查打开的聊天或已添加书签的聊天中是否有任何群组聊天。您应该传入 a`topic`以查找该主题的聊天。

```
def checkGroupChat(topic=""):
    """
    Checks if a group exists.
    """
    import Skype4Py as skype
    skypeClient = skype.Skype()
    skypeClient.Attach()
    for elem in skypeClient.ActiveChats:  # Looks in active chats and returns True if chat is found.
        if len(elem.Members) > 2 and elem.Topic == topic:
            return True

    for chat in skypeClient.BookmarkedChats: # Looks in Bookmarked Chats.
        if chat.Topic == topic:
            return True

    return False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T13:18:33.963

聊天对象的`Type`属性将是`chatTypeDialog`或`chatTypeMultiChat`与后者是群聊。您可以放心地忽略其他遗留枚举值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-10T12:35:00.560

这对我有用：

```
def on_message(message, status):
    len(message.Chat.Members) > 2:
        # this is a private chat

s = Skype4Py.Skype()
s.OnMessageStatus = on_message
s.Attach() 
```

`message.Chat.Type`总是为我挂起，然后几秒钟后与 Skype 的连接丢失。似乎是一个错误

# ios - mach_vm_allocate 和 vm_allocate 有什么区别？

> ID：15049662
> 
> 赞同：4
> 
> 时间：2013-02-24T07:33:53.817
> 
> 标签：ios, macos, kernel, mach

我想知道`mach_vm_allocate`和之间有什么区别`vm_allocate`。我知道`mach_vm_allocate`仅适用于 OS X 而不是 iOS，但我不知道为什么。`mach_vm_...`包含函数的所有函数原型的文件`(mach/mach_vm.h)`仅存`#error mach_vm.h unsupported.`在于 iOS 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T08:21:00.757

Mac OS X 10.4 中引入的新 Mach VM API。从程序员的角度来看，新 API 与旧 API 基本相同，但有以下主要区别。

> - 例程名称具有 mach_ 前缀例如， vm_allocate() 变为 mach_vm_allocate() 。
> 
> - 例程中使用的数据类型已更新为支持 64 位和 32 位任务。因此，新 API 可用于任何任务。
> 
> 新旧 API 分别由不同的 MIG 子系统导出： mach_vm 和 vm_map 。对应的头文件分别是 <mach/mach_vm.h> 和 <mach/vm_map.h> 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-09T11:10:45.190

Mac OS X 10.4 中引入的新 Mach VM API。从程序员的角度来看，新 API 与旧 API 基本相同，但有以下主要区别：

*   例程名称有`mach_ prefixfor`例子，`vm_allocate()`变为`mach_vm_allocate()`；

*   例程中使用的数据类型已更新为支持 64 位和 32 位任务。因此，新 API 可用于任何任务。

新旧 API 分别由不同的 MIG 子系统导出：`mach_vm`和`vm_map`。对应的头文件分别是`<mach/mach_vm.h>`和`<mach/vm_map.h>`。

该信息来自*OS X Internals A System Approach*一书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T03:24:08.197

这些将是 /usr/include/mach/mach_vm.h 和 /usr/include/mach/vm_map.h。您可以在 /usr/include/mach 中使用 grep 来获取这些内容。

在内核中，API 基本上使用相同的实现。在 iOS 上，您可以完美地使用“旧”API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-15T22:13:18.907

我对其他答案不满意。两个似乎引用了同一个来源（一个没有正确归因），这个来源相当具有误导性。

[旧 API](https://developer.apple.com/documentation/kernel/mach/vm)中的数据类型是可变大小的。如果你为 i386 CPU 架构编译，它们是 32 位的，如果你为 x86_64 CPU 架构编译，它们是 64 位的。

[新 API](https://developer.apple.com/documentation/kernel/mach/mach_vm)中的数据类型是固定大小且始终为 64 位。

由于 32 位进程只需要 32 位数据类型，而 64 位进程即使使用旧 API 也已经具有 64 位类型，因此根本不知道为什么需要新 API。但是如果你看一下苹果的内核设计就会变得很明显：

macOS 的真正内核是[Mach 3](https://en.wikipedia.org/wiki/Mach_(kernel))微内核。作为一个微内核，它只负责进程和线程管理、IPC、虚拟内存管理和进程/线程调度。就是这样。通常，使用 micros 内核时，其他所有操作都将在用户空间中完成，但这很慢，因此 Apple 采取了不同的方法。

Apple 采用 FreeBSD 单片内核并将其包裹在微内核周围，该微内核将 FreeBSD 内核作为具有特殊权限的单个进程（任务）执行（尽管是任务，但代码在内核空间而不是用户空间中运行，就像在系统）。组合内核的名称为[XNU](https://en.wikipedia.org/wiki/XNU)。

过去，Apple 支持在系统中混合 32 位和 64 位的任意组合：您的系统可以运行 32 位内核并在其上运行 32 位或 64 位进程，或者它可以运行 64 位内核并运行 32 位或 64 位对其进行处理。你可能已经看到了事情的发展方向，不是吗？

如果进程和内核的位宽不同，那么旧的 API 就没有用了。例如，32 位内核无法使用它与 64 位进程的内存进行交互，因为 API 调用的所有数据类型在 32 位内核任务中只能是 32 位，但 64 位进程甚至有 64 位内存空间如果内核本身没有。

实际上，该 API 甚至还有第三个版本。引用[Apple 内核源代码](https://opensource.apple.com/source/xnu/xnu-4570.31.3/osfmk/vm/vm_user.c.auto.html)的评论：

```
 * There are three implementations of the "XXX_allocate" functionality in
 * the kernel: mach_vm_allocate (for any task on the platform), vm_allocate
 * (for a task with the same address space size, especially the current task),
 * and vm32_vm_allocate (for the specific case of a 32-bit task). vm_allocate
 * in the kernel should only be used on the kernel_task. vm32_vm_allocate only
 * makes sense on platforms where a user task can either be 32 or 64, or the kernel
 * task can be 32 or 64\. mach_vm_allocate makes sense everywhere, and is preferred
 * for new code. 
```

只要您仅在用户空间中使用该 API 并且仅用于旧进程的内存管理，使用旧 API 仍然可以，即使对于 64 位进程，因为在这种情况下所有数据类型都是 64 位。

仅当跨进程边界工作并且不确定两个进程都是 32 位还是 64 位时才需要新的 API。但是，Apple 很久以前就放弃了 32 位内核支持，同时他们也放弃了 32 位用户空间支持，因为所有系统库从 10.15 (Catalina) 开始仅作为 64 位库提供。

在 iOS 上，从来不需要新的 API，因为你永远无法为 iOS 编写内核代码，而且 iOS 的安全概念禁止与其他进程空间直接交互。在 iOS 上，您只能使用该 API 与您自己的进程空间进行交互，因此它始终具有正确的数据类型。

# php - PHP 中的 CMS - 数据库设计

> ID：15049665
> 
> 赞同：2
> 
> 时间：2013-02-24T07:33:57.837
> 
> 标签：php, mysql, database-design, content-management-system

我正在开始 Web 开发并开始使用 PHP 和 MySQL。我正在尝试制作一个类似于技术博客的 CMS，并坚持数据库设计。每个帖子可以是以下任何一种类型。

1.  富文本 - 单部分
2.  富文本 - 多个部分
3.  视频链接 - 单部分
4.  视频链接 - 多个部分
5.  附件 - 单件
6.  附件 - 多个部分

* * *

（附件可以是pdf、doc、ppt）

每个帖子都在部分下。这些部分存储在一个表中。部分的示例是

教程 - 允许所有类型 代码片段 - 只允许 1 个 提示或黑客 - 只允许 1,2,3,4 新闻更新 - 只允许 1 和 3 评论 - 只允许 1 和 3

* * *

所以我的问题是

1.  如何存储和区分单篇文章和多篇文章？
2.  存储附件的可行/最佳方式是什么？
3.  如何关联部分和帖子？即，如何知道/存储特定部分可以支持帖子类型（全部、仅 1、仅 1 和 2 等）。

编辑：通过单一方式，我的意思是 1 个帖子只有 1 个部分，通过多部分，我的意思是 1 个帖子可以有几个部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:00:13.820

1.  我猜“单”是指一篇文章与一个部分相关，多部分是指几篇文章与一个部分相关？

    db-design 可能是...

    ```
    table section
    ---------------
    id (int, a-i)
    type (int) 1=tutorial, 2=code-snippet etc.
    name (varchar)
    ...

    table post
    ---------------
    id (int, a-i)
    section_id (int) key to section.id
    ordering (int) if multi for controlling which part is first, second etc. 
    type (int) 1=rich-text, 2=video, 3=attachment  <---- drop single/multi discrimination here
    single (int) 1=yes, 2=no <---- and put it here instead
    content (varchar) --> see below
    description (varchar) of this post 
    ```

    注意：单个是一个帖子，多个帖子链接到同一部分。

2.  **在哪里存储附件：** 在您的 Web 服务器的文件系统中，将文件名保存在`table.content`. 小型帖子类型（例如链接）可以直接存储在`table.content` --> 保持您的数据库精简和执行

3.  **相关章节和帖子：** 作者`post.section_id`。像这样，您可以将 1 个或多个帖子链接到一个部分。用于`post.ordering`将它们按正确的顺序排列。

    ```
    section
    -------------------------- 
    id     | 1
    name   | "How to build a CMS"
    type   | 1 (tutorial) 

    post
    --------------------------
    id         | 1 
    section_id | 1
    ordering   | 0
    type       | 1 (rich-text)
    content    | "/files/130224_1_1_cms.rtf"
    ... 

    id         | 2
    section_id | 1
    ordering   | 1
    type       | 3 (video link)
    content    | "http://www.youtube.com/hgstersh/showid=23jfjr&blabla"
    ... 
    ```

    **哪个`section.type`可以有哪个`post.type`？**

    *   在创建新部分时，`section.type`设置（例如表单中的下拉列表）
    *   `post-type`在为此部分创建新帖子时，仅提供基于 的允许类型的下拉列表`section.type`，这是在 php 脚本中使用`if...`or完成的`switch...case`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T09:28:47.197

如果一个帖子可以有多个图像、帖子、链接，这是一对多的关系，典型的模式是：

```
POST: id, title, ...
RICHTEXT: id, post_id, content
LINK: id, post_id, url 
```

如果您需要多对多关系，例如一个故事可以有多个链接，但同一个链接可以在多个故事上，您将拥有：

```
POST: id, title, ...
LINK: id, url
POSTS_LINKS: id, post_id, link_id 
```

还可以快速查看其他[流行平台的模式](http://codex.wordpress.org/Database_Description)

# asp.net-mvc - mvc 4 上覆盖方法的执行顺序是什么？

> ID：15049666
> 
> 赞同：0
> 
> 时间：2013-02-24T07:34:02.453
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我想知道执行序列中的重写方法。

我研究了生命周期关键字，但没有发现任何重要的东西。

谁能告诉我它们的顺序是什么：

*   初始化（System.Web.Routing.RequestContext requestContext）
*   OnActionExecuting(ActionExecutingContext filterContext)
*   OnAuthorization(AuthorizationContext filterContext)

我有层次顺序，有些页面有不同的授权条件。

*   CoreController 派生的所有页面
*   由 ModeratorController 派生的版主页面（也由 CoreController 派生）
*   AdminController 派生的管理页面（也由 CoreController 派生）

我想在这些控制器中使用覆盖方法（上述方法之一还是应该使用另一种？），但顺序是什么？我不知道，想学习。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:00:33.943

调用控制器方法的顺序是：

1.  初始化
2.  授权
3.  OnAction执行

# service - 重复的代码部分 - 转移到服务？

> ID：15049667
> 
> 赞同：1
> 
> 时间：2013-02-24T07:34:23.157
> 
> 标签：service, architecture, soa, code-duplication

我有一个`C#`应用程序可以让用户编写测试并执行它（`client`）。它还支持使用中央机器`server`和`agents`在所述机器上的多台机器上的分布式执行。
这`agent`实际上是原始执行能力的复制，但它是在一个独立的解决方案中。
我们想重构它，因为：

1.  代码重复。
2.  如果用户尝试在运行 的机器上编写和执行`agent`，则会出现有问题的冲突。

我正在考虑两种选择：

1.  将此执行移至两者都将使用的`client`服务`agent`。我的意思是将在本地运行的服务，而不是 Web 服务。
2.  合并`client`和`agent`- 我们没有`agent`，但`server`将与`client`作为 进行通信`agent`。

我没有使用服务的经验。这两种选择是否有任何已知的优点/缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:08:33.537

客户端和代理共享的公共库听起来更适合允许简单的情况，例如仅使用客户端，并避免必须在本地设置额外服务的开销。

# xcode - IB：使用自动布局？

> ID：15049672
> 
> 赞同：0
> 
> 时间：2013-02-24T07:34:53.407
> 
> 标签：xcode, cocoa

从我使用 C# 的 Windows 迁移到 Mac 环境后，我慢慢变得更适应在 Mac 环境中编程。

到目前为止，过渡一直很顺利，但适应 Objective-C 的学习曲线非常陡峭。我发现 Objective-C 是 C stye 语言的一个惊人的转折点，我很高兴我采取了行动。

我在 OSX 10.8.2 和 iOS 6.1.2 上使用 XCode 4.6

我正在处理的应用程序是一个 OSX 清单，需要与 iOS 等效项进行通信。

首先是 OSX 方面，它包括一个 NSOutlineView，可以像 SideBar 一样使用。

我在定位控件并将它们的大小设置为我希望它们执行的操作时遇到了一些麻烦。

我刚刚在 XCode 的 IB 中发现了一个可以解决问题的开关。

在文件检查器中有一个开关：使用自动布局，当前已勾选。当我构建项目时，我有一个运行的应用程序。

![在此处输入图像描述](../Images/1b5a3310d84f0fdd8f639c0e86f60dae.png)

一旦我删除勾号并重新构建应用程序，它就会崩溃并出现以下错误，以及更多：

```
2013-02-24 17:00:17.988 ServiceCheck[1633:303] *** Assertion failure in -[NSTableRowData insertRowsAtIndexes:withRowAnimation:], /SourceCache/AppKit/AppKit-1187.34/TableView.subproj/NSTableRowData.m:5408
2013-02-24 17:00:17.989 ServiceCheck[1633:303] An uncaught exception was raised
2013-02-24 17:00:17.989 ServiceCheck[1633:303] insertRowsAtIndexes:withRowAnimation: can not happen while updating visible rows! 
```

我在解决错误并允许我根据自己的喜好手动调整控件大小时遇到​​问题。

为了提供帮助，我可以附上我的代码（一旦我弄清楚如何），以便您更好地理解我所看到的。

# java - Generate Random SELECT sql with three columns name always in there

> ID：15049674
> 
> 赞同：0
> 
> 时间：2013-02-24T07:35:03.547
> 
> 标签：java, database, multithreading, jdbc, prepared-statement

I have a class named `ReadTableConnectionInfo` which contains details about the table such as `tableName` and it's `columns`. I have written a multithreaded code in which I am supposed to generate a random select sql by using the column values from `table.getColumns()`.

Suppose for table1 it has 8 columns such as-

```
ID
CREATION
DATE
ACCOUNT
ADVERTISE
SELLERS
GEOGRAPHIC
DEMOGRAPHIC 
```

Below is my code from which I am trying generate random select sql using the columns. Here `table` is the `ReadTableConnectionInfo` object.

```
@Override
public void run() {

        while (System.currentTimeMillis() <= 30 minutes) {

        final String selectSql = generateRandomSQL(table);

        preparedStatement = entry.getValue().prepareCall(selectSql);
        preparedStatement.setString(id);

        rs = preparedStatement.executeQuery();
    }
}   
    /**
     * A simple method that will construct the SQL
     * and return back
     * @param columns
     * @return sql
     */
    private String generateRandomSQL(ReadTableConnectionInfo table) {

        /* generate random columns from 
             * `table.getColumns`, not sure how to make that
             */
            final String sql = "SELECT ID, CREATION_DATE, LAST_MODIFIED_DATE,  from "+table.getTableName+" where id = ?";

        return sql;
    } 
```

Below is my `ReadTableConncectionInfo class` which will hold tableName and `columns list`

```
public class ReadTableConnectionInfo {

    public String tableName;
    public ArrayList<String> columns;

    public ArrayList<String> getColumns() {
        return columns;
    }

    public void setColumns(ArrayList<String> columns) {
        this.columns = columns;
    }

    public String getTableName() {
        return tableName;
    }

    public void setTableName(String tableName) {
        this.tableName = tableName;
    }
} 
```

Now I need to generate random select SQL in `generateRandomSQL` method from the `table.getColumns()` list. In all my SELECT sql, I will always have `ID, CREATION and DATE` and apart from that, it should be random

Sample SQL Example-

```
`SELECT ID, CREATION, DATE, ACCOUNT from table1 where id = ?`
`SELECT ID, CREATION, DATE, ACCOUNT, ADVERTISE from table1 where id = ?`
`SELECT ID, CREATION, DATE, ACCOUNT, SELLERS from table1 where id = ?`
`SELECT ID, CREATION, DATE, GEOGRAPHIC, DEMOGRAPHIC, ADVERTISE from table1 where id = ?`
`Other possible permutations` 
```

Can anyone help me in building random SELECT sql with ID, CREATION and DATE always in there? Any suggestions will be of great help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:54:11.090

```
private String generateRandomSQL(ReadTableConnectionInfo table) {
    Random r = new Random(table.getColumns.size());
    int rNumber = r.nextInt();

    List<String> suffledColumns = new ArrayList<String>(table.getColumns());
    Collections.shuffle(suffledColumns);

    String columnsList = "";

    for(int i = 0 ; i < rNumber ; i ++){
        columnsList += ("," + shuffledColumns.get(i));
    }

    final String sql = "SELECT ID, CREATION_DATE, LAST_MODIFIED_DATE" + columnsList +"  from " + table.getTableName() + " where id = ?";

        return sql;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:02:49.587

Something like that :

```
 String colPart="SELECT ID, CREATION_DATE, LAST_MODIFIED_DATE"
   Random rNo=new Random();
   int noOfCols=columns.size();
   int colCount=rNo.nextInt(noOfCols-3);
   for(int i=0;i<colCount;i++){
   string colToAdd=columns.get(3+rNo.nextInt(noOfCols-3));
   if(!colPart.contains(colToAdd))    
       colPart+=","+colToAdd;
   }        
    final String sql =colPart+" from "+table.getTableName+" where id = ?"; 
```

# java - 如何使用soap将apache ofbiz集成到liferay中

> ID：15049679
> 
> 赞同：2
> 
> 时间：2013-02-24T07:35:12.987
> 
> 标签：java, eclipse, web-services, liferay

我正在尝试基于 liferay 中的 WSDL 文件在 Eclipse Java EE IDE（Indigo Service Release 2，Windows 7 32 位）中创建 Web 服务，但是当我在创建向导中单击“完成”时，我总是得到：

IWAB0014E 发生意外异常。

```
 java.lang.NullPointerException
  at org.eclipse.wst.command.internal.env.common.FileResourceUtils.makeFolderPathAtLocation(FileResourceUtils.java:790)
  at org.eclipse.wst.command.internal.env.common.FileResourceUtils.makeFolderPathAtLocation(FileResourceUtils.java:833)
  at org.eclipse.wst.command.internal.env.common.FileResourceUtils.createFileAtLocation(FileResourceUtils.java:765)
  at org.eclipse.jst.ws.axis2.consumption.core.utils.ContentCopyUtils.copyDirectoryRecursivelyIntoWorkspace(ContentCopyUtils.java:111)
  at org.eclipse.jst.ws.axis2.consumption.core.command.Axis2ClientTestCaseIntegrateCommand.CopyJUnitJarToProject(Axis2ClientTestCaseIntegrateCommand.java:138)
  at org.eclipse.jst.ws.axis2.consumption.core.command.Axis2ClientTestCaseIntegrateCommand.execute(Axis2ClientTestCaseIntegrateCommand.java:73)
  at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.runCommand(CommandFragmentEngine.java:419)
  at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.visitTop(CommandFragmentEngine.java:359)
  at org.eclipse.wst.command.internal.env.core.fragment.CommandFragmentEngine.moveForwardToNextStop(CommandFragmentEngine.java:254)
  at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager$6.run(SimpleCommandEngineManager.java:294)
  at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
  at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
  at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:1029)
  at org.eclipse.wst.command.internal.env.ui.widgets.SimpleCommandEngineManager.runForwardToNextStop(SimpleCommandEngineManager.java:264)
  at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.runForwardToNextStop(WizardPageManager.java:91)
  at org.eclipse.wst.command.internal.env.ui.widgets.WizardPageManager.performFinish(WizardPageManager.java:262)
  at org.eclipse.wst.command.internal.env.ui.widgets.DynamicWizard.performFinish(DynamicWizard.java:382)
  at org.eclipse.jface.wizard.WizardDialog.finishPressed(WizardDialog.java:827)
  at org.eclipse.jface.wizard.WizardDialog.buttonPressed(WizardDialog.java:432)
  at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:624)
  at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
  at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
  at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
  at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
  at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
  at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)
  at org.eclipse.jface.window.Window.open(Window.java:801)
  at org.eclipse.ui.internal.handlers.WizardHandler$New.executeHandler(WizardHandler.java:257)
  at org.eclipse.ui.internal.handlers.WizardHandler.execute(WizardHandler.java:277)
  at org.eclipse.ui.internal.handlers.HandlerProxy.execute(HandlerProxy.java:293)
  at org.eclipse.core.commands.Command.executeWithChecks(Command.java:476)
  at org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:508)
  at org.eclipse.ui.internal.handlers.HandlerService.executeCommand(HandlerService.java:169)
  at org.eclipse.ui.internal.handlers.SlaveHandlerService.executeCommand(SlaveHandlerService.java:241)
  at org.eclipse.ui.internal.actions.CommandAction.runWithEvent(CommandAction.java:157)
  at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
  at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
  at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
  at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
  at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
  at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
  at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
  at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
  at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
  at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
  at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
  at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
  at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
  at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
  at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
  at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
  at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
  at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
  at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
  at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
  at java.lang.reflect.Method.invoke(Unknown Source)
  at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
  at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
  at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

提前感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T01:08:41.277

当您查看错误堆栈时

```
 at org.eclipse.wst.command.internal.env.common.FileResourceUtils.makeFolderPathAtLocation(FileResourceUtils.java:790)
  at org.eclipse.wst.command.internal.env.common.FileResourceUtils.makeFolderPathAtLocation(FileResourceUtils.java:833)
  at org.eclipse.wst.command.internal.env.common.FileResourceUtils.createFileAtLocation(FileResourceUtils.java:765) 
```

看起来在创建文件/文件夹时可能存在一些差异。检查提供的文件夹位置是否存在。如果是，则检查eclipse是否有足够的权限来创建/写入文件/文件夹到指定路径。

# php - 如何解决getElementById与php中的循环

> ID：15049680
> 
> 赞同：0
> 
> 时间：2013-02-24T07:35:22.300
> 
> 标签：php, javascript

如果可以的话，请指导我正确的方向。

**我的情况**

我有一个在`PHP`for 循环中提取数据的脚本。在那个循环中，有一个名为`Price`.In 的参数。在同一个循环中，我使用 javascript 函数将`Price`、 from转换`Jap Yen`为，`Aus Dollars`最后在 .In 中显示价格`Aus Dollars`。

**问题**

我`getElementById`用来显示澳元的价格，这是我的 js 功能

```
function CarCostCalculatorSINGLE(enteredPriceInYen,spanID){

    document.getElementById("calPriceInAudSINGLE"+spanID).innerHTML="$"+TotalCarCostInAUD.formatMoney(0, '.', ',');
} 
```

在我的 php 脚本中，我使用计数器将一个数字添加到跨度的末尾，这样`IDs`就不会发生冲突。

```
$callPriceInAudCounter++; 
<span id="calPriceInAudSINGLE<?php echo $callPriceInAudCounter; ?>">AUD Price Goes Here</span> 

<script>
    CarCostCalculator(<?php echo $fields['price']; ?>, <?php echo $callPriceInAudCounter; ?>);
</script> 
```

**我迷路了**

我现在迷路了，因为在某些页面上我必须`include`循环显示`Side bar content`等，而且`IDs`冲突很大。这不是解决这个问题的最佳方法，我不知道我还能做些什么来保持循环并在不复制功能的情况下显示价格。有没有替代方案，`getElementById`或者你们可以指导我解决这个问题的最佳方法是什么？

如果您想让我澄清更多，请告诉我，我非常乐意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:51:49.190

不是最好的解决方案，但您可以使用[uniqid](http://php.net/manual/en/function.uniqid.php)。

```
<?php $elementID = uniqid('calPriceInAudSINGLE'); ?>

<span id="<?php echo $elementID ?>">AUD Price Goes Here</span> 

<script>
    CarCostCalculator(<?php echo $fields['price']; ?>, "<?php echo $elementID ?>");
</script> 
```

如果您有可用的 jQuery，那么我可以为您提供更好的解决方案。

```
<span class="aud-price" data-yen-price="<?php echo $fields['price']; ?>">AUD Price Goes Here</span> 
```

然后在你的javascript中的某个地方：

```
// onload (assuming all the elements are loading at once (ie not AJAX))
$(function () {
    $(".aud-price").each(function () {
        var self = $(this);

        self.html( "$"+TotalCarCostInAUD.formatMoney(self.data("yen-price"), '.', ',') );
    });
}); 
```

# sql - 选择总体最高出价

> ID：15049688
> 
> 赞同：-1
> 
> 时间：2013-02-24T07:37:03.727
> 
> 标签：sql, database

我有用户表如下：

```
Userid| Username |city| state 
```

这里userid是主键并且有一个出价表

```
Userid|seller|iid|starttime|bidtime|bidprice 
```

这里 userid,seller,iid 构成主键

我想编写一个 sql 查询，以便显示总体出价最多的人的用户 ID 和姓名。我写的查询如下：

```
select u.userid,u.uname from user1 u, bid b where u.userid=b.bidder and
b.bidder=(select max(c) from (select count(*) as c, bidder from bid group by bidder)); 
```

但在这种情况下，内部选择显示不满足给定条件的最大值。我需要一些帮助来解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T07:42:25.237

这似乎是一种更简单的方法来实现这一点。

```
SELECT TOP 1 u.*
FROM User1 u
JOIN bid b ON (u.userid=b.bidder)
ORDER BY Count(b.*) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T22:39:02.477

```
select userid, uname from user1 
where userid in 
(select bidder from bid group by bidder having count(bidder) = 
(select max(c) from (select count(*) as c, bidder from bid group by bidder))); 
```

# objective-c - Objective C 变量计数

> ID：15049691
> 
> 赞同：-4
> 
> 时间：2013-02-24T07:37:26.777
> 
> 标签：objective-c

我有一些变量，例如`vh1` `vh2` `vh3`等。是否可以在 for 循环中计算 i 变量？

我的意思是`for(int i = 1; blablabla) { [[vh + i] setBackGroundColor blablabla];}`

问候

编辑：vh1 等是 UILabel ！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T07:53:18.580

虽然这可以通过[自省](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/Introspection/Introspection.html)来实现，但如果你有这样的变量，你最好将它们放在一个 NSArray 中，并使用索引访问它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:49:49.403

正如其他回答者所指出的那样，使用新的数组语法，您可以很容易地构造一个包含所有对象的数组，但即使您随后更改了原始 ivars 的值，它也会保留旧值。这可能是也可能不是你所追求的。

如果您一心想要将变量保留为单个对象（而不是数组），那么您可以使用键值编码以编程方式访问它们。键值编码也称为 KVC。

执行此操作的方法是`valueForKey:`并且可以在`self`和其他对象上使用。

```
MyClass *obj = ... // A reference to the object whose variables you want to access

for (int i = 1; i <= 3; i++) {
    NSString *varName = [NSString stringWithFormat: @"var%d", i];

    // Instead of id, use the real type of your variables
    id value = [obj valueForKey: varName];

    // Do what you need with your value
} 
```

[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html#//apple_ref/doc/uid/10000107-SW1)中有更多关于 KVC 的内容。

为了完整起见，这种直接访问之所以有效，是因为一个标准的 KVC 兼容对象继承了一个名为`accessInstanceVariablesDirectly`. 如果您*不想*支持这种直接访问，那么您应该覆盖`accessInstanceVariablesDirectly`它以使其返回`NO`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T08:26:47.217

如果您`UILabels` **从 XIB**加载，您可以使用`IBOutletCollection`.

申报财产：

```
@property (nonatomic, strong) IBOutletCollection(UILabel) NSArray *labels; 
```

现在您可以将 XIB 中的**多个标签链接**到此属性。然后在`-viewDidLoad`（加载 XIB 之后），您的数组被填充，您只需使用简单的`for-in`：

```
for (UILabel *label in self.labels) {
    label.backgroundColor = ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T08:21:03.223

您可以通过以下代码访问每个值。

```
UILabel *label1;
UILabel *label2;
UILabel *label3;
NSArray *array = @[label1, label2, label3];
for (int i = 0; i<3; i++) {
    [array objectAtIndex:i];
} 
```

向 NSArray 添加值可用于对其进行初始化。如果以后想添加值，可以使用 NSMutableArray。

* * *

我修改了我的代码。

```
UILabel *label1 = [[UILabel alloc] init];
UILabel *label2 = [[UILabel alloc] init];
UILabel *label3 = [[UILabel alloc] init];
NSArray *array = @[label1, label2, label3];
for (int i = 0; i<3; i++) {
    UILabel *label = [array objectAtIndex:i];
    label.frame = CGRectMake(0, i*100, 150, 80);
    label.text = [NSString stringWithFormat:@"label%d", i];
    [self.view addSubview:label];
} 
```

# json - 在多页模板上使用 jQuery Mobile 填充列表视图

> ID：15049697
> 
> 赞同：0
> 
> 时间：2013-02-24T07:38:30.797
> 
> 标签：json, listview, jquery-mobile

我正在尝试使用 jquery.mobile 在第二页上呈现列表视图。

我正在使用具有多个“页面”的单个 HTML。

```
 <div data-role="page" id="foo">
    <a href="#bar" data-role="button" data-inline="true" id="loadList)">List</a>

</div>

<div data-role="page" id="bar">
    <div id="ListDiv">
    <ul id="listview" data-role="listview" data-inset="true">
    </ul>
    </div>

</div>

<!--application UI goes here-->

<script type="text/javascript">
$("#loadList").click(function(){
    $.getJSON(
              "http://localhost/index.php/api/list",{format: "json"},
              function(data){
                  var output = '';
                      $.each(data, function(key, val) {
                          output += '<li><a href="#">' + val +'</a></li>';
                      });
                      $('#listview').append(output).listview('refresh');
                  });
    }); 
```

但是现在的问题是，当我单击#loadList 按钮时，它确实将我带到#bar 页面，但是，它似乎没有执行 $("#loadList").click()，因为列表没有显示在#bar 页面上。即，没有任何内容附加到#listView。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T08:59:19.730

首先这段代码有问题，**`$.getJSON`**加载逻辑是错误的。换页不能与**`$.getJSON`**.

有两种方法可以使这项工作：

1.  在第二页初始化期间删除 onclick 事件并加载您的数据：

    ```
    $(document).on('pagebeforeshow', '#bar', function(){       
        $.getJSON(
                  "http://localhost/index.php/api/list",{format: "json"},
                  function(data){
                      var output = '';
                          $.each(data, function(key, val) {
                              output += '<li><a href="#">' + val +'</a></li>';
                          });
                          $('#listview').append(output).listview('refresh');
                      });
        });
    }); 
    ```

    不幸的是，这个解决方案存在问题。已使用的页面事件不会等待**`$.getJSON`**，因此在某些情况下，当页面加载和内容突然出现时，您的列表视图将为空。所以这个解决方案不是很好。

2.  第二种解决方案是**`href="#bar"`**从按钮中删除属性，但留下一个点击事件。当**`$.getJSON`**动作成功时，使用**`changePage`**功能并加载下一页。如果在访问第二页列表视图时出现问题，请存储您的结果（在本文**[中](http://www.gajotres.net/document-onpageinit-vs-document-ready/)** ，您将找到方法或**[此处](https://stackoverflow.com/a/14469041/1848600)****）并在r**页面**`pagebeforeshow`**事件期间再次附加它。**`#ba`**

我给你做了一个工作**`jsFiddle`**示例：http: [//jsfiddle.net/Gajotres/GnB3t/](http://jsfiddle.net/Gajotres/GnB3t/)

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
        </div>        
        <div data-role="content">
            <a href="#" data-role="button" id="populate-button">Load JSON data</a>
        </div>
    </div>
    <div data-role="page" id="second">
        <div data-theme="a" data-role="header">
            <h3>
                Second Page
            </h3>
            <a href="#index" class="ui-btn-left">Back</a>
        </div>

        <div data-role="content">
            <h2>Simple list</h2>
            <ul data-role="listview" data-inset="true" id="movie-data" data-theme="a">

            </ul>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>      
</body>
</html> 
```

**JS：**

```
$(document).on('pagebeforeshow', '#index', function(){     
    $('#populate-button').on('click',function(e,data){     
        $.ajax({url: "http://api.themoviedb.org/2.1/Movie.search/en/json/23afca60ebf72f8d88cdcae2c4f31866/The Goonies",
            dataType: "jsonp",
            jsonpCallback: 'successCallback',
            async: true,
            beforeSend: function() {
                $.mobile.showPageLoadingMsg(true);
            },
            complete: function() {
                $.mobile.hidePageLoadingMsg();
            },
            success: function (result) {
                ajax.jsonResult = result;
                $.mobile.changePage("#second");
            },
            error: function (request,error) {
                alert('Network error has occurred please try again!');
            }
        });
    });        
});

$(document).on('pagebeforeshow', '#second', function(){       
    ajax.parseJSONP(ajax.jsonResult);
});

var ajax = {  
    jsonResult : null,
    parseJSONP:function(result){
        $('#movie-data').empty();
        $('#movie-data').append('<li>Movie name:<span> ' + result[0].original_name+ '</span></li>');
        $('#movie-data').append('<li>Popularity:<span> ' + result[0].popularity + '</span></li>');
        $('#movie-data').append('<li>Rating:<span> ' + result[0].rating+ '</span></li>');
        $('#movie-data').append('<li>Overview:<span> ' + result[0].overview+ '</span></li>');
        $('#movie-data').append('<li>Released:<span> ' + result[0].released+ '</span></li>');  
        $('#movie-data').listview('refresh');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:50:19.833

你有 id="loadList)"，也就是说，有一个右括号

```
<a href="#bar" data-role="button" data-inline="true" id="loadList)">List</a> 
```

也许这会导致您的问题？

# python - 如何在 Windows 8 中使用 python 更改代理设置？

> ID：15049699
> 
> 赞同：0
> 
> 时间：2013-02-24T07:39:04.443
> 
> 标签：python, windows-8, internet-explorer-10

如何在 windows8 中使用 python 设置代理设置？我试过这段代码但没有工作..设置没有改变

```
def inst_proxy5(self):
    """ sets institute proxy"""
    INTERNET_SETTINGS = winreg.OpenKey(winreg.HKEY_CURRENT_USER,
    r'Software\Microsoft\Windows\CurrentVersion\Internet Settings',
    0, winreg.KEY_ALL_ACCESS)
    def set_key(name, value):
        _, reg_type = winreg.QueryValueEx(INTERNET_SETTINGS, name)
        winreg.SetValueEx(INTERNET_SETTINGS, name, 0, reg_type, value)
    set_key('ProxyEnable', 1)
    set_key('ProxyOverride', u'*.local;<local>')  # Bypass the proxy for localhost
    set_key('ProxyServer', u'192.168.0.5:3128')
    root.destroy()` 
```

如果我评论它的工作..如何设置它

```
set_key('ProxyOverride', u'*.local;<local>')  # Bypass the proxy for localhost 
```

它给出了这个错误：

```
Exception in Tkinter callback
Traceback (most recent call last):
  File "C:\Python26\lib\lib-tk\Tkinter.py", line 1410, in __call__
    return self.func(*args)
  File "C:\py_pro\but1.py", line 82, in inst_proxy22
    set_key('ProxyOverride', u'*.local;<local>')  # Bypass the proxy for localhost
  File "C:\py_pro\but1.py", line 79, in set_key
    _, reg_type = winreg.QueryValueEx(INTERNET_SETTINGS, name)
WindowsError: [Error 2] The system cannot find the file specified 
```

# c++ - 从字符串转换为 char* - 传递函数指针

> ID：15049709
> 
> 赞同：0
> 
> 时间：2013-02-24T07:41:10.650
> 
> 标签：c++, string, pointers, parameter-passing

这篇文章基于[这里](https://stackoverflow.com/questions/347949/convert-stdstring-to-const-char-or-char)给出的解决方案，关于 SO

我编写了一个函数来获取给定的文件扩展名（字符串类型），例如：

```
void GetFileExtension(string filename, char* extension)
{
    vector<string> rec;

    StrDelimit(filename, '.', rec);

    //cout << rec[rec.size()-2].c_str()[1] << endl;

    //extension = rec[rec.size()-2].c_str()[0];

    //extension = &rec[rec.size()-2].c_str()[0];

    string str = rec[rec.size()-2];

    // conversion from string to char*
    vector<char> writable(str.size() + 1);

    std::copy(str.begin(), str.end(), writable.begin());

    //cout << writable << endl;

    extension = &writable[0];
} 
```

StrDelimit 工作正常，它接收一个字符串并通过给定的分隔符分隔子字符串的向量

如图所示，我使用“//从字符串到字符*的转换”将结果返回给调用主程序

没有编译错误，但结果是一串无意义的字符。这是什么问题？

任何帮助，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:58:02.853

char *extension 是字符串地址的*临时*副本。要真正将新数据放入其中，您必须将数据复制到它保存的地址。

这有帮助吗？

```
#include <stdio.h>
#include <string.h>

void getStringInoExistingBufer(char* existingBufferOut)
{
    strcpy(existingBufferOut, "someData");
}

void getStringIntoNonExistingBuffer(char **newBufferOut)
{
    *newBufferOut = strdup("someOtherData");
}

int main()
{
    char buffer1[100] = {};
    char *buffer2 = NULL;

    printf("buffer1 (before): '%s'\n", buffer1);
    getStringInoExistingBufer(buffer1);
    printf("buffer1 (after): '%s'\n", buffer1);

    printf("\n\n");
    printf("buffer2 (before): '%s'\n", buffer2);
    getStringIntoNonExistingBuffer(&buffer2);
    printf("buffer2 (after): '%s'\n", buffer2);
} 
```

**输出：**

```
buffer1 (before): ''
buffer1 (after): 'someData'

buffer2 (before): '(null)'
buffer2 (after): 'someOtherData' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T07:47:42.903

你的问题是你`writable`在堆栈上创建数据成员，然后用 BUT 指向它`extension`，可写的范围是函数，这意味着当函数返回时`writable`被清除，`extension`没有指向任何东西。

您可以为 char* 分配一个动态缓冲区，但这是比 C++ 更多的 C 方法。如果可能的话，我建议更改函数类型以返回字符串或向量，这将使其更容易，并且您可以在需要时将这些类型更改为 char*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T07:48:27.343

为什么不将扩展名返回为`std::string`？

例如：

```
std::string GetFileExtension(std::string filename)
{
    std::vector<string> rec;

    StrDelimit(filename, '.', rec);

    std::string extension = rec[rec.size() - 2];
    return extension;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T07:49:13.990

首先，您并没有真正返回任何东西。

```
void GetFileExtension(string filename, char* extension)
{
    ...
    extension = &writable[0];  // Assignment to local variable
} 
```

如果您打算更新传入的 char* `extension`，则需要将其作为 a `char**`（即指向您的 的指针`char*`）传递。

其次，即使你解决了这个问题，你也试图返回一个指向局部变量中数据的指针；

```
void GetFileExtension(string filename, char* extension)
{
    ...
    vector<char> writable(str.size() + 1);   // Local variable
    ...
    extension = &writable[0];       // writable disappears after this line
                                    // and extension will point to invalid memory
} 
```

只需返回 an`std::string`就会大大简化您的代码。

# r - R编程将数据从缺少值的excel传输到R

> ID：15049712
> 
> 赞同：3
> 
> 时间：2013-02-24T07:41:29.260
> 
> 标签：r, excel, edit, na, delimited

所以我有一个带有 NA 值的 excel 电子表格......复制数据并将其放入 R 的最佳方法是什么......我通常使用`data=read.delim("clipboard")...`. 但是由于这些缺失值....我不断收到此错误

```
Error in if (del == 0 && to == 0) return(to) : 
  missing value where TRUE/FALSE needed 
```

有哪些可能的方法可以消除此错误？...我尝试输入零而不是 NA 值，但这有点搞砸了代码正在做什么

[这是我正在使用R 编程修复错误](https://stackoverflow.com/questions/15018668/r-programming-complicated-way-of-getting-averages-means-and-fixing-error....it)的代码链接对我的数据问题非常有帮助。
本来想发全集的，不过限30000字

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T08:21:23.680

您需要将选项设置`fill`为 TRUE ，这将让您在行长度不等的情况下添加 NA 字段。

```
 read.table(fileName,header=TRUE,fill=TRUE) 
```

fileName 这里是你的 excel 文件路径。例如文件名 ='c:\temp\myfile.csv'。

这也适用`read.delim`于 read.table 的包装器。您可以给 read.table 一个 string ，但您设置的文本参数不是文件之一。例如：

```
read.table(text = '    Time Speed   Time    Speed
0.8 2.9 0.3 2.7
1.3 2.8 0.9 2.7
1.7 2.3 2.5 3.1
2.0 0.6 
2.3 1.7 13.6    3.3
3.0 1.4 15.1    3.5
3.5 1.3 17.5    3.3',head=T,fill=T)

  Time Speed Time.1 Speed.1
1  0.8   2.9    0.3     2.7
2  1.3   2.8    0.9     2.7
3  1.7   2.3    2.5     3.1
4  2.0   0.6     NA      NA
5  2.3   1.7   13.6     3.3
6  3.0   1.4   15.1     3.5
7  3.5   1.3   17.5     3.3 
```

# static-analysis - 如何从 JSON 对象 (AST) 构建控制流图 (CFG)

> ID：15049717
> 
> 赞同：1
> 
> 时间：2013-02-24T07:42:45.220
> 
> 标签：static-analysis, abstract-syntax-tree, procedural-programming, control-flow-graph, touchdevelop

我想从以 JSON 格式给出的 AST 构建控制流图 (CFG)。所以这个 AST 是在 TouchDevelop 中针对每个脚本自动创建的。而且由于 TouchDevelop 不是面向对象的编程，我还可以使用访问者模式吗？任何有用的指针将不胜感激。

**Update1：**​​我的问题是我不明白从哪里开始。从互联网上，我应该使用访问者模式遍历 AST 来访问每个节点并收集信息。从那里，我可以构建一个 CFG，然后进行数据流分析。但是有两个问题：

1) AFAIK，我需要面向对象的编程模型来使用访问者模式，（我可能错了）TouchDevelop 不是。

2) 下面给出的 AST 不是我在互联网上找到的 AST 格式。它是 JSON 格式。我想我可以解析 JSON 以将其转换为所需的 AST 结构，但我不太确定。

示例脚本的源代码

```
meta version "v2.2,nothing";
meta name "DivideByZero";
//
meta platform "current";

action main() {
  (5 / 0)→post_to_wall;
} 
```

生成的 AST（JSON 格式）如下所示：

```
{
    "type":"app",
    "version":"v2.2,nothing",
    "name":"DivideByZero",
    "icon":null,
    "color":null,
    "comment":"",
    "things":[
        {
            "type":"action",
            "name":"main",
            "isEvent":false,
            "outParameters":[
            ],
            "inParameters":[
            ],
            "body":[
                {
                    "type":"exprStmt",
                    "tokens":[
                        {
                            "type":"operator",
                            "data":"("
                        },
                        {
                            "type":"operator",
                            "data":"5"
                        },
                        {
                            "type":"operator",
                            "data":"/"
                        },
                        {
                            "type":"operator",
                            "data":"0"
                        },
                        {
                            "type":"operator",
                            "data":")"
                        },
                        {
                            "type":"propertyRef",
                            "data":"post to wall"
                        }
                    ]
                }
            ],
            "isPrivate":false
        }
    ]

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T12:01:41.450

我还没有找到对 TouchDevelop 脚本语言的引用。我不知道你能用它做什么，不能做什么。

您不一定必须使用访问者模式。访问者模式是当您的抽象语法树由类层次结构中的节点实例描述时使用的方法。从 AST 到 CFG 的转换比这更普遍。[抽象语法树是一种抽象数据类型，是树](http://en.wikipedia.org/wiki/Tree_%28data_structure%29)的特例。与任何其他抽象数据类型一样，它可以以多种方式表示。你如何做并不重要，但你唯一需要做的就是遍历这棵树。您使用的迭代方法取决于您使用的语言。这应该回答您的问题 2/：JSON 字符串可能是 AST 的表示。AST 是一种[抽象数据类型](http://en.wikipedia.org/wiki/Abstract_data_type#Advantages_of_abstract_data_typing)，而 JSON 字符串是这种抽象数据类型的*实现*。

在 JSON 中，您可以拥有值、数组或（键、值）关联集。我可能会假设您的 AST 节点将是一组（键，值）关联。我还假设这些节点中的每一个都有一个名为的键`type`，可让您识别它是哪种节点。

如果我是正确的，这回答了这个问题：为什么你不需要访问者模式。访问者模式允许我们提取每个节点的类型。（这就是所谓的“双重调度”）但是在这里，您不需要它，因为每个节点的类型都在`type`字段中进行了编码。

通常，从 AST 到 CFG 的转换是通过使用一组函数来完成的：一个函数用于 AST 中的每种类型的节点。这些函数中的每一个都需要编写与它作为参数的节点关联的 CFG 部分。它将递归调用子节点的转换函数。（在 OO-AST 的情况下，这就是访问者模式会做的事情）

例如，您将拥有一个函数`ConvertNode`。该函数将读取`type`节点的字段，并与节点调用相应的转换函数。你的根节点有 type `app`。然后该`ConvertNode`函数将分派给该`ConvertApp`函数。`ConvertApp`将读取一些字段，例如`name`并将遍历`things`数组并调用`ConvertNode`每个节点。然后再次`ConvertNode`将调用分派给适当的函数。

这些转换函数的调用方式完全遵循 AST 结构。迭代树时如何创建 CFG 取决于输入语言。每个转换函数都可能返回 CFG 的构造节点或转换，以允许调用者重用它。或者调用者可能会传递一个节点或转换作为参数，以允许被调用函数从那里继续构造。您可以自由选择适当的方式来构建 CFG 并打破一般规则：可能有巧妙的方法来简化构建。

# css - @include makeColumn() Bootstrap Mixin 不工作

> ID：15049719
> 
> 赞同：2
> 
> 时间：2013-02-24T07:43:27.033
> 
> 标签：css, ruby-on-rails, sass, mixins, bootstrap-sass

## 问题

为什么 bootstrap-sass makeColumn(X) mixin 的行为与 Bootstrap .spanX 类不同？例如，使用 makeColumn(9) 的类与使用 .span9 类的相同 div 看起来不同。

## 语境

我正在使用 Ruby on Rails 构建一个应用程序，并且在尝试使用 bootstrap-sass gem 中的 mixins 时遇到了重大问题。

当我使用我定义的类时，我没有得到与在 Bootstrap 中使用 .span 类相同的样式。我已经查看了整个互联网，无法弄清楚出了什么问题。我猜这是相当明显的事情，我只是没有看到，因为我已经盯着屏幕太久了。

## HTML

```
<div class="content">
  <div class="main">...</div>
  <div class="sidebar">...</div>
</div> 
```

## .scss 文件

```
@import "bootstrap";

body {
    .main-content {
        @extend .container;
    }

    .content {
        @include makeRow();
    }

    .content .main {
        @include makeColumn(9);
    }

    .content .sidebar {
        @include makeColumn(3);
    }

    .feature {
        @include makeColumn(4);
    }

    padding-top: 60px;
}

footer {
    @extend .container;
}

@import "bootstrap-responsive"; 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T17:51:39.273

我不确定您使用的是什么 SASS Adaptation，但在我使用的那个（[https://github.com/anjlab/bootstrap-rails](https://github.com/anjlab/bootstrap-rails)）中，没有很多文档和格式更改。

而不是 @include makeRow(); 你必须使用：

```
@include make-row(); 
```

而不是 @include makeColumn(3); 你必须使用：

```
@include make-column(3); 
```

更多文档可以在这里找到：[https ://github.com/anjlab/bootstrap-rails/blob/master/app/assets/stylesheets/twitter/bootstrap/_mixins.scss](https://github.com/anjlab/bootstrap-rails/blob/master/app/assets/stylesheets/twitter/bootstrap/_mixins.scss)

# c - 在 C 中创建延迟

> ID：15049720
> 
> 赞同：0
> 
> 时间：2013-02-24T07:44:20.063
> 
> 标签：c

我是编程新手。我一直试图找出一个时间延迟来减慢我的程序的执行速度。我一直在做研究，找不到一个我读过的有用的东西`nanosleep`，`sleep`我都试过了，但是当我把它们放在`for`循环中时，它会等待几秒钟，然后执行整个`for`循环，而不会在迭代之间暂停。也许我的代码有错误？我已经把它包括在下面了。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
   int main(void)
   {
      FILE *fp;
      int i;

      /* open the file */
      fp = fopen("/dev/pi-blaster", "w");
      if (fp == NULL) {
         printf("I couldn't open pi-blaster for writing.\n");
         exit(0);
      }

      /* write to the file */
    for(i=99;i>=0;i--){
      sleep(1);
      fprintf(fp, "0=0.%d\n",i);
    }
      /* close the file */
      fclose(fp);

      return 0;
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T07:48:36.100

`fp`正在缓冲 对文件的写入。`fflush(fp)`在 for 循环中，因此它在下一次迭代之前将数据写入文件。否则，它将向缓冲区写入一行，休眠一秒钟，写入缓冲区，休眠一秒钟等，然后在缓冲区填满或`fclose(fp)`调用时将缓冲区刷新到文件中。 `man fflush`更多细节。

# javascript - 找不到单词时匹配的正则表达式

> ID：15049722
> 
> 赞同：0
> 
> 时间：2013-02-24T07:45:56.207
> 
> 标签：javascript, regex, regex-negation

当字符串与关键字不匹配时，我需要一个返回某些内容（整个句子）的正则表达式。

也许这很奇怪，但我在 javascript 中需要这样的东西：

```
"any word".match(/.*(?!my key)/) => I would want ["any word"]
"my key".match(/.*(?!my key)/) => I would want null 
```

这个以前的不起作用。

我不能做类似的事情，这会起作用：

```
if "any word".match(/my key/)
  return null
else
  return "any word" 
```

因为我在一个接收正则表达式并在匹配时执行函数的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:50:36.413

在你的正则表达式中，`.*`首先匹配整个字符串，然后前瞻断言`(?!my key)`也成功（因为你不能`my key`在字符串的末尾匹配，当然）。

你要

```
"test string".match(/^(?!.*my key).*/) 
```

此外，如果您的测试字符串可能包含换行符，您可能需要使用`s`修饰符，并且您可能希望使用单词边界 ( `\b`) 来避免以下字符串的误报`army keypad`：

```
"test string".match(/^(?!.*\bmy key\b).*/s) 
```

# html - 在 HTML 中更改嵌入式 Flash swf 的大小

> ID：15049724
> 
> 赞同：0
> 
> 时间：2013-02-24T07:46:06.063
> 
> 标签：html, flash, swfobject

我有一个带有背景图像的 HTML 页面。我现在想在页面的角落添加一个闪光（swf）（可以剥离的纸状折叠）。问题是 flash 是一小部分 UI（折叠），稍后会打开一个更大的视图，覆盖更多的 HTML（单击时切换的 2 个状态）。我正在使用 swfObject.js 和 embedSwf：

```
swfobject.embedSWF("fold.swf", "pageFold", "auto", "400px", "9.0.0"); 
```

我的 HTML 是：

```
<div id="pageFold"></div> 
```

我对宽度和高度参数做了几次不同的尝试，包括修复它们，但我的问题是 swf 继续覆盖 HTML 的背景图像，即使 swf 处于较小的状态（折叠角）

理想情况下，我想拥有以下两者之一：

1.  为 swf 设置透明背景，以便我始终看到 HTML 背景图像。
2.  动态改变嵌入 swf 的大小 - 当它处于较小状态（折叠角）时，保持嵌入对象较小。当单击 swf 并因此放大 Flash UI 时，请在 HTML 中为嵌入对象留出更多空间。

这些有可能吗？还有其他选择或想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:22:12.170

```
swfobject.embedSWF(swfUrlStr, replaceElemIdStr, widthStr, heightStr, swfVersionStr, xiSwfUrlStr, flashvarsObj, parObj, attObj, callbackFn) 
```

你需要设置`parObj`和`attObj`作为`"wmode=transparent"`（也许`{wmode:"transparent"}`）

`StageScaleMode.NO_SCALE`你也可能需要在你的 swf 中使用 stage.scaleMode=

```
Where callbackFn is a JavaScript function that has an event object as a parameter:
function callbackFn(e) { ... }
Properties of this event object are:
success, Boolean to indicate whether the creation of a Flash plugin-in <object> DOM was successful or not
id, String indicating the ID used in swfobject.registerObject
ref, HTML object element reference (returns undefined when success=false) 
```

在回调函数中使用 id 参数来操作您的 Flash 对象 - 移动、调整大小等

# android - 将 pdf 文件从资产复制到 SD 卡

> ID：15049728
> 
> 赞同：1
> 
> 时间：2013-02-24T07:46:23.743
> 
> 标签：android

在我的资产文件夹中，我有一个名为 Lecture.pdf 的 pdf 文件。我正在尝试将此文件从资产复制到 sd 卡，以便从我的应用程序中读取 pdf，但文件无法写入 sd 卡。有人可以告诉我我做错了什么。这是写入sd卡目录的代码

公共类 XAclass 扩展 Activity {

```
WebView web;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.large);

   new Asyntasking();

    Intent intent = new Intent(getParent(), MyPdfViewerActivity.class);
    intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME,
            "mnt/sdcard/mylecture/lecture.pdf");

    startActivity(intent);

}

private class Asyntasking extends AsyncTask<Void,Void,Void>
{
 private void CopyAssets() {
        AssetManager assetManager = getAssets();
        String[] files = {};
        try {
            files = assetManager.list("lecture.pdf");
        } catch (IOException e) {
            Log.e("tag", e.getMessage());
        }

        for(String filename : files) {
            System.out.println("File name => "+filename);
            InputStream in= null;

            OutputStream out = null;
            try {
              in = assetManager.open("/mnt/sdcard/mylecture/"+filename);   // if files resides inside the "Files" directory itself
              out = new FileOutputStream("/mnt/sdcard/mylecture/"+filename);
              copyFile(in, out);
              in.close();
              in = null;
              out.flush();
              out.close();
              out = null;
            } catch(Exception e) { 
                Log.e("tag", e.getMessage());
            }
        }
    }
    private void copyFile(InputStream in, OutputStream out) throws IOException {
        byte[] buffer = new byte[1024];
        int read;
        while((read = in.read(buffer)) != -1){
          out.write(buffer, 0, read);
        }
    } 
```

@Override protected Void doInBackground(Void... params) { // TODO 自动生成的方法存根 CopyAssets(); 返回空值；}

```
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T07:57:10.353

试试这个代码

```
private class Asyntasking extends AsyncTask<Void,Void,Void>
    {
     private void CopyAssets() {
            AssetManager assetManager = getAssets();
            String[] files = {};
            try {
                files = assetManager.list("Files");
            } catch (IOException e) {
                Log.e("tag", e.getMessage());
            }

            for(String filename : files) {
                System.out.println("File name => "+filename);
                InputStream in= null;

                OutputStream out = null;
                try {
                  in = assetManager.open("Files/"+filename);   // if files resides inside the "Files" directory itself
                  out = new FileOutputStream(exportDirectory+filename);
                  copyFile(in, out);
                  in.close();
                  in = null;
                  out.flush();
                  out.close();
                  out = null;
                } catch(Exception e) { 
                    Log.e("tag", e.getMessage());
                }
            }
        }
        private void copyFile(InputStream in, OutputStream out) throws IOException {
            byte[] buffer = new byte[1024];
            int read;
            while((read = in.read(buffer)) != -1){
              out.write(buffer, 0, read);
            }
        }

@Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        CopyAssets();
                return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T07:49:07.430

要将数据写入外部存储，我们必须在 AndroidManifest.xml 中授予权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

现在您更新了 logcat 您可以使用 AsyncTask 或 Handler 解决此错误。

# c++ - 异常代码对 C++ 性能的影响？

> ID：15049729
> 
> 赞同：-1
> 
> 时间：2013-02-24T07:46:38.060
> 
> 标签：c++, exception, exception-handling

如果我们删除所有带有错误返回值的 try-catch 的异常处理代码，代码执行中是否会有持续的性能提升或 % 的性能提升？

是否有好的文章/参考资料可以解释第一次投掷的成本，try-catch 和后续投掷的成本，try-catch 块？

*   这个问题的目的不是要找到一个阈值，在这个阈值上人们可能会针对异常进行错误返回编码风格。我们都知道这很混乱。（更快但混乱）。

*   我希望量化 try-catch 的成本及其对 0 到 1 的 try-catch 块和 1 到 n 的 try-catch 块的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:00:24.567

这完全取决于编译器和 ABI——没有一个答案。

即使您不投掷，他们也可能会产生少量成本。例如，setjmp/longjmp 实现由 VC++ 使用。通常这是一个难以察觉的微不足道的成本，但它仍然存在。

零成本异常也是可能的——也就是说，它们在你抛出之前是免费的。这对于正确使用异常的代码通常更好（保持它们很少见并且......异常）。

异常有可能比你明显的 C 风格错误处理更便宜。一个聪明的编译器可以识别`catch`块将是稀有的，并将它们降级到单独的缓存行或页面中，确保“热”的非异常代码尽可能靠近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T07:56:08.490

性能影响取决于异常抛出和捕获的实现。

例如，`__try` `__except`用于 SSH 异常的开销与“常规”的 try catch 块不同。

如果您想亲自查看，只需在您的系统上进行基准测试。

异常中真正的“邪恶”在于它们破坏了程序的“正常”流程。

这通常会导致程序进入未定义的状态（取决于程序员处理它的程度）。

# networking - 在 udp 53 端口捕获 23 个数据包

> ID：15049730
> 
> 赞同：1
> 
> 时间：2013-02-24T07:46:53.570
> 
> 标签：networking, amazon-ec2, udp, telnet, wireshark

我正在使用wireshark从udp.port == 53捕获数据包。

当我执行“ping Domain”名称时。我可以在 udp.port == 53 上捕获 2 个数据包。

当我执行相同的 ping 操作时，我不会捕获任何必须更改域名才能捕获数据包的内容。

为什么会发生这种情况，或者实际发生了什么，为什么我首先要捕获它们？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:14:55.010

第一次执行“ping {domain name}”时，如果系统没有缓存{domain name}的IP地址，它会发送一个DNS请求来查找它并返回一个DNS响应，第一个一个去端口 53，第二个来自端口 53。

当第一次 DNS 查找完成时，解析器将缓存结果，以便后续查找 {domain name} 的尝试*不会*进行 DNS 查找 - 它们只会返回先前 DNS 查找的结果 - 因此会发生更快，并减少网络流量和 DNS 服务器上的负载。它不会永远记住结果，因为该主机名的 IP 地址可能会更改；查找的结果具有“生存时间”，并且在该时间到期后，缓存的结果将被丢弃并进行新的 DNS 查找。

有关 DNS ，请参阅[维基百科页面的“记录缓存”部分](http://en.wikipedia.org/wiki/Domain_Name_System#Record_caching)。

# nhibernate - NHibernate.Envers 实体属性更改日志

> ID：15049736
> 
> 赞同：2
> 
> 时间：2013-02-24T07:47:52.957
> 
> 标签：nhibernate, hibernate-envers

我想用 NHibernate.Envers 实现类似更改日志的东西。我怎样才能以最优雅的方式实现这一目标？假设我们有**blog (name)**和**post (body, createdat)**实体。博客有很多帖子。我需要获取博客更改的历史记录：

```
修改：名称从“a”更改为“b”
添加帖子：正文“示例”，创建于 2013 年 2 月 24 日

修改：名称从“b”更改为“c”
修改后：正文从“示例”更改为“示例”

```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:36:57.107

在 Envers 中，我认为 NEnvers 是相同的，对于这个用例没有任何特定的支持。您需要读取实体的所需修订范围（可能是全部），获取历史实体列表并在虚拟机中进行比较。

也可以看看：

[通过修订获取修改后的属性](https://stackoverflow.com/questions/14830956/getting-modified-properties-by-revision/14853016#14853016)

# extjs - Extjs 图表：使用chart.series.getAt(0) 作为系列删除如何？

> ID：15049737
> 
> 赞同：1
> 
> 时间：2013-02-24T07:48:01.473
> 
> 标签：extjs, charts, series

您好，我如何从图表中删除系列，我知道我可以使用 getAt(0) 或 getAt(1) 获取系列对象，具体取决于我在图表中获得了多少系列。我的问题是如何从图表中删除一个系列。主要原因是我让最终用户能够更改系列类型：条形、线条......所以我想通过删除系列并添加一个新系列来在运行时显示新的变化。

我试过 Chart.series.removeAt(0); 它删除了图例，但条形图或线条仍然显示！

我使用 extjs 4.1.1

谢谢你，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:26:02.343

我必须做同样的事情，让最终用户能够在运行时更改图表类型，以提供不同的数据可视化。我发现图表类型（条形图、折线图、饼图）涉及的内容更多，而不仅仅是系列。换句话说，要实现这一点，我不能只用不同的系列类型替换数据并将其添加到图表中。

我最终使用相同的数据存储为每种不同类型的图表创建了不同的配置。该图表包含在一个`Ext.panel.Panel`我将此函数添加到：

```
// toggle format between pie chart and bar chart
this.toggleFormat = function() {
    var chart = me.down('chart');

    this.remove(chart);
    if (chart.chartType == 'pie') {
        this.add(Ext.create('Ext.chart.Chart', bar));
    } else {
        this.add(Ext.create('Ext.chart.Chart', pie));
    }
}; 
```

该`bar`变量包含一个条形图配置和`pie`一个饼图配置，但两者都有相同的数据存储附加到它们的`store:`配置。

当用户按下格式按钮时，我调用此函数从面板中删除图表并创建一个具有不同格式的图表。它达到了预期的效果。

# c# - 显示 Visual Studio 2012 中特定方法发生的情况

> ID：15049742
> 
> 赞同：0
> 
> 时间：2013-02-24T07:48:51.430
> 
> 标签：c#, visual-studio, uml

我正在开发一个在方法上有一些复杂性的应用程序。现在我需要一个结构，它可以保存我在形状或类似的方法中所做的事情（即`sequence diagram`）。

Visual Studio 的序列图以完整的细节来完成，我不需要所有这些，只需要其中一些。

另一方面，我需要一些可以帮助其他开发人员轻松理解我的代码或方法并进行开发的东西。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:02:17.673

如果您对进行测试犹豫不决，请尝试以下操作：安装 JetBrains [ReSharper之类的辅助工具，并使用](http://www.jetbrains.com/resharper/)[“提取方法”](http://www.jetbrains.com/resharper/features/code_refactoring.html#Extract_Method)命令安全地重构您的代码。给他们起容易理解的名字。之后，您可能更容易编写评论中其他人指出的单元测试。

即宁愿在更好的方法上付出一些努力，而不是让其他人理解这个烂摊子。它还将帮助您生成更有意义的序列图。

免责声明：不隶属于 jetbrains。

# ruby - 负索引如何与 `Array#[]=` 一起使用？

> ID：15049744
> 
> 赞同：4
> 
> 时间：2013-02-24T07:48:57.427
> 
> 标签：ruby, arrays

我试着看看是如何`Array#[]=`工作的，然后玩了一下：

```
enum[int] = obj → obj
enum[start, length] = obj → obj
enum[range] = obj → obj 
```

**问题 1**

我有一个数组`b`保存`nil`在它的`0`索引处。

```
b = []
b[0]   # => nil 
```

我尝试在下面的代码`nil`中用整数替换。`10`

```
b[-1] = 10 # => IndexError: index -1 too small for array; minimum: 0 
```

为什么上面的代码不起作用，但下面的代码起作用？对于 size 的数组`1`，为什么索引`0`和`-1`处理方式不同？

```
b[0] = 5   # => 5
b[-1] = 10 # => 10 
```

**问题2**

我创建了一个 size 数组`2`，并执行了以下操作：

```
a = [1,2]

a[-3] = 3       # => IndexError: index -3 too small for array; minimum: -2
a[-3] = [3]     # => IndexError: index -3 too small for array; minimum: -2
a[-3..-4] = [3] # => RangeError: -3..-4 out of range 
```

我相信负索引永远不会增加数组的大小，但我不知道为什么。为什么下面的代码成功了？

```
a[-2..-3] = [3,4] #=> [3, 4] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T10:03:32.080

[我建议您查看Array 文档](http://www.ruby-doc.org/core-1.9.3/Array.html)中的第一段。它出人意料地说：“负索引被认为是相对于数组末尾的——也就是说，索引 -1 表示数组的最后一个元素，-2 是数组中的倒数第二个元素，因此开。”</p>

这意味着，`a[-N]`当且仅 . 时，您可以设置元素`|N| <= a.size`。这就是`a = [1,2] ; a[-3] = 3`失败的原因（3 > 2）。

另一方面，红宝石数组[可能]没有记录的功能：`a[INBOUNDS_IDX..NONSENSE_IDX]=SMTH`将在索引**之前****插入：** `SMTH` **`INBOUNDS_IDX`**

 **```
a=[1,2]
a[2..0]='a'
a[2..1]='b'
a[2..-100]='c'
# ⇒ [1, 2, "c", "b", "a"]
a[2..-1]='q'
# ⇒ [1, 2, "q"] 
```

这里的废话意味着“小于 INBOUNDS_IDX，**并且**不能作为负数表示的索引处理”（这就是为什么`a[2..-1]`在上面的示例中被视为`a[2..(a.size - 1)]`.）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:21:58.680

观察#1

-1 索引与最后一个元素相关，如果数组没有大小 []，则在使用一个或多个元素初始化它之前不能使用它。

观察#2：

是的，你是对的，如果只引用数组中的具体现有位置，负索引永远不会增加数组的大小。不要认为数组是循环的（0 索引指向 N-1 索引），所以你不能使用任何负索引认为它是有效的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T09:47:40.330

**Q1：**

一个空数组有 0 个元素，所以当你尝试将它的元素设置为 0 时，使用负索引`-1`，它会出错。因为负索引从末尾循环遍历数组。

所以 `a = []; a[-1] = 3`让人无法

a) 获取最后位置的元素，因为它的 null

b) 设置它的值。因为它从未被捕获。

`a[0] = 5`会起作用，因为你告诉编译器

a) 抓住第一个元素，

b）如果不存在，则创建一个，然后将其分配给您请求的值。

请参阅[官方 api 文档](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-5B-5D-3D)，特别提到正索引可以增加大小，超过数组开头的负索引会引发错误。

**Q2：**

上面的解释几乎也回答了第二个问题。

给定`a = [1,2]`

`a[-3] = 3`导致第一个中断点。您正在尝试从末尾访问第三个元素，该元素不存在。按照设计，它会崩溃。

While`a[-2..-3]`在定义数组的捕获范围内。

您要求解释器从最后一个元素（在这种情况下从前面的第一个）捕获第二个元素，并尝试调用一个要求它增加数组大小的范围，并用您请求的任何内容填充它。

令人高兴的是，一切都还好，如所愿。很高兴知道。**

# c++ - 究竟是什么问题。else if 逻辑有错误？else 之前的预期主要表达式

> ID：15049746
> 
> 赞同：0
> 
> 时间：2013-02-24T07:49:11.637
> 
> 标签：c++, expression

除了 else 部分之外的所有内容都给了我一个奇怪的（预期的主要表达式在 else 之前）错误。IM认为这可能与逻辑的局限性有关。但我似乎无法解决这个错误。

```
#include <iostream>

using namespace std;

int main()
{
int numberRegistered = 0;
const double feePerOneThroughFour = 0.0;
const double feePerFiveThroughTen = 0.0;
const double feeElevenOrMore = 0.0;

double moneyOwed = 0.0;

cout << " Enter in the Number of Registered people";
cin >> numberRegistered;

if (numberRegistered <= 0 );
{
cout << " You have entered in either the number 0 or a negative number" ;
}
        else 
             if  (numberRegistered == 1 ) ||  (numberRegistered == 2) || (numberRegistered == 3 ) ||  (numberRegistered == 4) 
             moneyOwed = numberRegistered * feePerOneThroughFour;
             cout << " Money Owed : $ " ;
             cin >> moneyOwed ;

            else if  (numberRegistered == 5 ) ||  (numberRegistered == 6) || (numberRegistered == 7 ) ||  (numberRegistered == 8) || (numberRegistered == 9)  || (numberRegistered == 10)
            moneyOwed = numberRegistered * feePerFiveThroughTen;
            cout << " Money Owed : $ " ;
            cin >> moneyOwed ;

                    else if  (numberRegistered >= 11) 
                    moneyOwed = numberRegistered * feeElevenOrMore;
                    cout << " Money Owed : $ " ;
                    cin >> moneyOwed ;

system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T07:56:24.540

在你的末尾有一个分号`if`：

```
if();
   ^^^^ 
```

* * *

此外，您`{ }`在条件语句后缺少大括号。

* * *

```
if  (numberRegistered == 1 ) ||  (numberRegistered == 2) || (numberRegistered == 3 ) ||  (numberRegistered == 4) 
```

您缺少括号：

```
if( (numberRegistered == 1 ) ||  (numberRegistered == 2) || (numberRegistered == 3 ) ||  (numberRegistered == 4) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T07:59:50.183

尝试为每个 if 和 else 使用括号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T08:00:35.237

if (numberRegistered <= 0 ); 您有一个额外的分号，并在嵌套 if /else 时尝试使用 { } 以避免逻辑问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T08:05:28.957

正如其他人所指出的， - 语句末尾的`if`分号是一个常见的错误。你的意思是：

```
if (numberRegistered <= 0)
{
    // [...]
} 
```

下一个`else if`区块还有另外几个问题。首先，您需要将整个表达式包装在括号中（这是您看到的编译器错误），然后将块包装在大括号中：

```
else if ((numberRegistered == 1) || (numberRegistered == 2) || (numberRegistered == 3 ) || (numberRegistered == 4))
{
    moneyOwed = numberRegistered * feePerOneThroughFour;
    cout << " Money Owed : $ " ;
    cin >> moneyOwed ;
} 
```

您可以缩短它以提高可读性：

```
else if ((numberRegistered >= 1 ) && (numberRegistered <= 4))
{
    moneyOwed = numberRegistered * feePerOneThroughFour;
    cout << " Money Owed : $ " ;
    cin >> moneyOwed ;
} 
```

你的其他`else if`块有同样的问题。

# java - ClassNotFoundException：ACtiveMQ 5.8 中的 KahaPersistenceAdapter

> ID：15049748
> 
> 赞同：0
> 
> 时间：2013-02-24T07:49:20.307
> 
> 标签：java, jms, activemq, message-queue

我将我的应用程序`ActiveMQ 5.5.1`从`ActiveMQ 5.8.0`. 我的应用程序在`activemq.xml`文件中有持久性配置，如下所示：

```
 <persistenceAdapter>
     <kahaPersistenceAdapter directory="${activemq.base}/data/msg" maxDataFileLength="20 Mb"/>
    </persistenceAdapter> 
```

但是当我启动activemq时，我在`wrapper.log`文件中得到以下异常：

```
INFO   | jvm 1    | 2013/02/24 10:43:28 | Caused by: java.lang.ClassNotFoundException: org.apache.activemq.store.kahadaptor.KahaPersistenceAdapter
INFO   | jvm 1    | 2013/02/24 10:43:28 |   at java.net.URLClassLoader$1.run(Unknown Source)
INFO   | jvm 1    | 2013/02/24 10:43:28 |   at java.security.AccessController.doPrivileged(Native Method)
INFO   | jvm 1    | 2013/02/24 10:43:28 |   at java.net.URLClassLoader.findClass(Unknown Source)
INFO   | jvm 1    | 2013/02/24 10:43:28 |   at java.lang.ClassLoader.loadClass(Unknown Source)
INFO   | jvm 1    | 2013/02/24 10:43:28 |   at java.lang.ClassLoader.loadClass(Unknown Source)
INFO   | jvm 1    | 2013/02/24 10:43:28 |   at org.apache.xbean.spring.context.v2c.XBeanQNameHelper.loadClass(XBeanQNameHelper.java:107)
INFO   | jvm 1    | 2013/02/24 10:43:28 |   at org.apache.xbean.spring.context.v2c.XBeanQNameHelper.getBeanInfo(XBeanQNameHelper.java:72) 
```

注意：我的应用程序在队列中有消息，这些消息由存储`activemq 5.5.1`且无法更改持久性配置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T11:48:51.177

在 v5.8.0 中，依赖关系已经被分解了一点，以允许您减少运行代理所需的 jar 数量。Kaha 适配器位于 activemq-amq-store 组件中，因此如果您想使用它，您需要将它带入您的项目中。

请注意，此适配器已被弃用，并将在 v5.9.0 中消失，因此移至受支持的适配器之一是个好主意。目前默认适配器是 KahaDB，位于 activemq-kahadb-store。你也可以试试 LevelDB 适配器，它有一个更快的索引，但还很年轻，可能有一些问题。

虽然没有迁移工具可以让您轻松地从旧存储迁移到新的 KahaDB 存储，但您可以通过使用 KahaDB 设置新代理并使用网络连接器将其连接到旧代理来完成此操作。一旦新代理注册了对您在旧代理上的旧存储中的消息的目的地的需求，mew 代理应该耗尽所有消息并将它们存储在 KahaDB 存储中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T10:12:20.797

你有没有放在`activemq-all-5.8.0.jar`类路径中？

已[弃用](https://issues.apache.org/jira/browse/AMQ-4125?page=com.atlassian.jirafisheyeplugin%3afisheye-issuepanel)，但仍包含在 jar 中`KahaPersistenceAdapter`。

# java - 切换到 Eclipse Juno 并且找不到过滤器类

> ID：15049749
> 
> 赞同：1
> 
> 时间：2013-02-24T07:49:22.973
> 
> 标签：java, eclipse, classpath, web.xml, eclipse-juno

我试图让一个项目在 Springsource Tool Suite 的服务器中运行（基于 Eclipse Juno）。它曾经在早期版本的 Eclipse 中运行。这是一个 Maven 项目，它可以从命令行很好地构建。

我现在看到的问题是它找不到引用的过滤器类，`web.xml`尽管在之前的 Eclipse 版本中，找到这个类没有问题。`web.xml`过滤子句如下所示：

```
<filter>
    <filter-name>hibernateFilter</filter-name>
    <filter-class>com.foo.bar.dao.hibernate.HibernateSessionFilter</filter-class>
    <init-param>
        <param-name>sessionFactoryBeanName</param-name>
        <param-value>sessionFactory</param-value>
    </init-param>
</filter> 
```

当我尝试在内部 Tomcat 6 服务器中运行它时，出现以下错误：

```
SEVERE: Exception starting filter hibernateFilter
java.lang.ClassNotFoundException: com.foo.bar.dao.hibernate.HibernateSessionFilter 
```

当我运行`jar tf app.war | grep HibernateSessionFilter`类时，war 文件中有：

```
$ jar tf imagewar.war | grep HibernateSessionFilter
WEB-INF/classes/com/foo/bar/dao/hibernate/HibernateSessionFilter.class 
```

也许它不属于 WEB-INF/classes？

正如我所说，这个应用程序用于在内部服务器中构建和运行。我需要用 Juno 做什么来告诉它我的应用程序的类在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:53:46.773

如果您通过 Eclipse 进行部署，您应该检查 Eclipse 是否正确部署了您的应用程序 - Eclipse 不使用 WAR 文件进行部署，而是将必要的文件直接复制到 appservers webapp 位置。

有时虽然 Eclipse 会搞砸这一点 - WTP 的部署存在已知的错误。

您应该检查 .metadata/.plugins/org.eclipse.wst.server.core- 文件夹及其子文件夹（每个子文件夹代表一个注册的服务器实例）。

有时您需要完全擦除 webapps 中的部署并在 Eclipse 中重新部署。这很神奇，但它有效。

您不应该检查的一件事：您的 WAR 文件：Eclipse 不会从 WAR 文件部署。请先检查已部署的类。

最后一个提示：如果你使用 m2e for Maven，你应该安装 m2e-wtp 插件以获得 WTP 支持。

# algorithm - 一种用于选择类似于浅色的深色的算法

> ID：15049753
> 
> 赞同：5
> 
> 时间：2013-02-24T07:50:20.827
> 
> 标签：algorithm, colors

我正在聊天，用户可以在其中选择自己喜欢的文本颜色。相同的聊天将显示在网站的多个位置。在某些地方，背景会很暗，而在其他地方，背景会很亮。因此，在某些聊天框中，大多数选定的颜色可能难以辨认。

所以我正在寻找一种算法，给定一种在一种类型的背景（浅色或深色）上效果很好的颜色，产生另一种在相反类型的背景上看起来不错并且与第一种颜色尽可能相似的颜色（所以用户得到的印象是他在任何地方都使用相同的颜色）。

我知道这可能不可能做到完美，但欢迎任何尝试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-03-08T10:01:52.870

好的，在这里和那里阅读了几件事之后。到目前为止，这是我能够找到的。

首先，我想强调几点，并确保阅读我的答案的任何人都能够理解我在这里所说的内容。

**什么是色彩空间？**

可以通过颜料的原色创建一系列颜色，然后这些颜色定义特定的颜色空间。颜色空间，也称为颜色模型（或颜色系统），是一种抽象的数学模型，它简单地将颜色范围描述为数字元组，通常为 3 或 4 个值或颜色分量（例如：RGB）。基本上，色彩空间是对坐标系和子空间的一种阐述。系统中的每种颜色都由一个点表示。

* * *

我们大多数开发人员使用以下颜色空间之一（**HEX**、**RGB**、**RGBA**），有些甚至会使用（**CMYK**、**HSV**和**HSL**等），它可以通过主颜色的组合为您提供**您**想要的任何颜色**（****红色**，**绿色**，**蓝色**，**阿尔法**）。

如果我们想知道一种颜色是否接近另一种颜色，我们会用眼睛观察它，但由于我们想让计算机以编程方式为我们做这件事，所以我们以数学方式看待它。

假设颜色**A**在**HEX**颜色空间**#FF0000**中是**红色**，颜色**B**在**HEX**颜色空间中也是**绿色****#00FF00**并且根据我们对**RGB**的理解，前两个值是**红色**的表示，后两个值是**绿色**的表示，最后两个值是**蓝色的表示**********************颜色，因为我们知道每一个这些值都是其值 (0-9) 的数字表示，所以 (A, B, C, D, F) = (10, 11, 12, 13, 14)。然后我们可以在 3D 维度中绘制颜色，并使用欧几里得等定律计算它们之间的距离。********************

 ******EX：A = (R1 = FF, G1 = 00, B1 = 00)
B = (R2 = 00, G2 = FF, B2 = 00)
我们这里有两个点，现在我们可以使用欧几里得定律
Distance = sqrt(( R2 - R1)^2 + (G2 - G1)^2 + (B2 - B1)^2)

到目前为止一切顺利，对吧？
***不***。

随着我们使用 HEX、RGBA、CMYK 或任何其他颜色空间，除了颜色空间中两种颜色之间的距离（有时可能是完全不同的颜色）之外，我们将一无所知，但它们之间的距离很小，因为它们不要考虑我们的眼睛如何看待颜色。

但是还有其他色彩空间（**科学**的）考虑到我们的眼睛看到颜色的方式以及我们的大脑如何解释它们。其中之一是**Lab**。

* * *

**颜色转换**

一般来说，一个绝对颜色空间中的颜色可以转换为另一个绝对颜色空间，然后再转换回来；但是，某些色彩空间可能有色域限制，并且转换超出该色域的颜色不会产生正确的结果。也可能存在舍入误差，特别是如果使用每个组件（8 位颜色）只有 256 个不同值的流行范围。

* * *

**什么是色域？**

在色彩再现中，包括计算机图形和摄影，色域或色域是颜色的某个完整子集。最常见的用法是指可以在给定环境中准确表示的颜色子集，例如在给定颜色空间内或由某个输出设备。

* * *

现在我们了解了我们将要实现的基本功能，让我们在知道以下等式的情况下开始编码。

**十六进制转 RGB**

我们有 HEX 作为十六进制值的颜色表示，我们只需要获取它们的十进制值，现在我们在 RGB 颜色空间中有我们的颜色。
A = RGB(255, 0, 0) 红色
B = RGB(0, 255, 0) 绿色

**RGB 转 XYZ**

我们必须遵循以下数学定律
color = current color / 255
if color > 0.04045
color = ( ( color + 0.055 ) / 1.055 ) ^ 2.4
else
color = color / 12.92
color = color * 100
X = colorRed * 0.4124 + colorGreen * 0.3576 + colorBlue * 0.1805
Y = colorRed * 0.2126 + colorGreen * 0.7152 + colorBlue * 0.0722
Z = colorRed * 0.0193 + colorGreen * 0.1192 + colorBlue * 0.9505
那就是它

例如：- A = RGB(255, 0, 0) 红色
colorRed = 255/255
colorGreen = 0/255
colorBlue = 0/255

```
if (colorRed > 0.04045){
    colorRed = ( ( colorRed + 0.055 ) / 1.055 ) ^ 2.4
}else{
    colorRed = colorRed / 12.92
}
if (colorGreen > 0.04045){
    colorGreen = ( ( colorGreen + 0.055 ) / 1.055 ) ^ 2.4
}else{<br/>
    colorGreen = colorGreen / 12.92
}
if (colorBlue > 0.04045){
    colorBlue = ( ( colorBlue + 0.055 ) / 1.055 ) ^ 2.4
}else{
    colorBlue = colorBlue / 12.92
} 
```

colorRed = colorRed * 100
colorGreen = colorGreen * 100
colorBlue = colorBlue * 100

X = (colorRed * 0.4124) + (colorGreen * 0.3576) + (colorBlue * 0.1805)
Y = (colorRed * 0.2126) + (colorGreen * 0.7152) + (colorBlue * 0.0722)
Z = (colorRed * 0.0193) + (colorGreen * 0.1192 ) + (colorBlue * 0.9505)

A XYZ(X, Y, Z)

**XYZ 到实验室**

// Reference-X、Reference-Y 和 Reference-Z 指的是特定的光源和观察者。

X = X / 参考-X
Y = Y / 参考-Y
Z = Z / 参考-Z

```
if ( X > 0.008856 ) {
    X = X ^ ( 1/3 )
}else{
    X = ( 7.787 * X ) + ( 16 / 116 )
}
if ( Y > 0.008856 ) {
    Y = Y ^ ( 1/3 )
}else{
    Y = ( 7.787 * Y ) + ( 16 / 116 )
}
if ( Z > 0.008856 ) {
    Z = Z ^ ( 1/3 )
}else{
    Z = ( 7.787 * Z ) + ( 16 / 116 )
} 
```

CIE-L* = (116 * Y) - 16
CIE-a* = 500 * (X - Y)
CIE-b* = 200 * (Y - Z)

* * *

**参考**

//2o 观察者 (CIE 1931)
// X2, Y2, Z2
CIE2_A = {109.850f, 100f, 35.585f} //白炽灯
CIE2_C = {98.074f, 100f, 118.232f}
CIE2_D50 = {96.422f, 100f, 82.521f }
CIE2_D55 = {95.682f, 100f, 92.149f}
CIE2_D65 = {95.047f, 100f, 108.883f} //日光
CIE2_D75 = {94.972f, 100f, 122.638f}
CIE2_F2 = {99.187f, 100f, 7.6f荧光
CIE2_F7 = {95.044f, 100f, 108.755f}
CIE2_F11 = {100.966f, 100f, 64.370f}

//10o 观察者 (CIE 1964)
// X2, Y2, Z2
CIE10_A = {111.144f, 100f, 35.200f} //白炽灯
CIE10_C = {97.285f, 100f, 116.145f}
CIE10_D50 = {96.720f, 100f, 81.427f }
CIE10_D55 = {95.799f, 100f, 90.926f}
CIE10_D65 = {94.811f, 100f, 107.304f} //日光
CIE10_D75 = {94.416f, 100f, 120.641f}
CIE10_F2 = {103.280f, 10} //0, 680f, 1.荧光
CIE10_F7 = {95.792f, 100f, 107.687f}
CIE10_F11 = {103.866f, 100f, 65.627f}

* * *

**Lap 颜色空间中两种颜色之间的距离**

像我们之前所做的那样将颜色视为 3d 维度，现在我们有了两种颜色相对于人眼的精确距离。

* * *

**包括**

更多地研究一种我们应该使用的技术来改变颜色，但具有相同的颜色，但对人眼来说感觉就像另一种颜色，通过它我们可以看到背景和使用相同颜色绘制在它上面的东西颜色。

--

**更新 #1 (10/09/2018)**

有一些数学方程可以计算关于人类感知的色差，称为 CIE。这些年来，它们已经有过几次迭代。（CIE 1976、CIE 1994、CIE 2000）。

**1976 年**

它是 3D 空间中两种颜色之间的距离，几乎是欧几里得距离公式。

**1994 年**

1994年，对原有的Delta E公式进行了改进。新公式将考虑每个亮度、色度和色调值的某些加权因子。

**CIE 2000**

CIE 组织决定通过引入 dE00 来解决亮度不准确的问题。它是目前可用的最复杂但最准确的 CIE 色差算法。

由于 CIE 2000 是最准确的，我们将直接使用它。

附言

你不需要自己实现它。我在 github [Is This Color Similar Repository](https://github.com/hamada147/IsThisColourSimilar)上用 Javascript 创建了一个版本。

运行代码后，我们将得到一个值，该值仅表示两种颜色相对于人类感知的差异，其值从 0 到 100。请查看下表以获得更多说明。

```
╔═══════════════╦════════════════════════════════════════╗
║ Delta E Value ║               Perception               ║
╠═══════════════╬════════════════════════════════════════╣
║ <= 1.0        ║ Not perceptible by human eyes.         ║
║ 1 - 2         ║ Perceptible through close observation. ║
║ 2 - 10        ║ Perceptible at a glance.               ║
║ 11 - 49       ║ Colors are more similar than opposite. ║
║ 100           ║ Colors are exact opposite.             ║
╚═══════════════╩════════════════════════════════════════╝ 
```

现在我们知道颜色 A 是否更接近颜色 B 或有点远。

这是第一点。现在我们知道了。我们应该怎么做才能处理这样的事情。我们可以在颜色值上玩 3 个东西。

Lab色彩空间在以下意义上是独一无二的。

亮度值 L* 表示 L* = 0 时最暗的黑色，以及 L* = 100 时最亮的白色。

a* 和 b* 用于绿色-红色和蓝色-黄色分量。

颜色通道 a* 和 b* 表示 a* = 0 和 b* = 0 处的真实中性灰度值。

a* 轴代表绿色-红色分量，绿色为负方向，红色为正方向。

b* 轴代表蓝黄色分量，蓝色为负方向，黄色为正方向。

由于我们想要相同的颜色，但此时您需要的颜色会更暗或更亮。

我们将采用该颜色的 Lab 值并更改 L 值。因为它负责颜色的明暗。通过在现有 L 值的一小部分 (0.05) 上添加（更多亮度）或从现有 L 值中减去（更多暗度）（0.05）。

在代码中提供了一个完整的工作示例，您可以查看以下 URL [Is This Color Similar Online 示例](https://hamada147.github.io/IsThisColourSimilar/)。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T08:05:32.757

查看[http://en.wikipedia.org/wiki/HSL_and_HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)

只要你保持色调和饱和度不变，它就会看起来是相同的颜色，你可以使用亮度来与背景形成对比

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T10:17:26.880

例如，要使颜色更深，请将 RGB 分量乘以 0.5 或 0.75。

缩放 RGB 值，每个都按相同的因子，具有使颜色更暗或更亮而不改变色调的效果。******

# r - 将 TS 对象转换为 data.frame 对象

> ID：15049754
> 
> 赞同：1
> 
> 时间：2013-02-24T07:50:25.977
> 
> 标签：r

我一直在试图弄清楚如何将 ts 对象转换为 data.frame，以便我可以在 ggplot 中绘制它。任何人都有一些很棒的想法是如何做到的？这是 ts 对象的样子

```
> austres
        Qtr1    Qtr2    Qtr3    Qtr4
1971         13067.3 13130.5 13198.4
1972 13254.2 13303.7 13353.9 13409.3
1973 13459.2 13504.5 13552.6 13614.3
1974 13669.5 13722.6 13772.1 13832.0
1975 13862.6 13893.0 13926.8 13968.9
1976 14004.7 14033.1 14066.0 14110.1
1977 14155.6 14192.2 14231.7 14281.5
1978 14330.3 14359.3 14396.6 14430.8
1979 14478.4 14515.7 14554.9 14602.5
1980 14646.4 14695.4 14746.6 14807.4
1981 14874.4 14923.3 14988.7 15054.1
1982 15121.7 15184.2 15239.3 15288.9
1983 15346.2 15393.5 15439.0 15483.5
1984 15531.5 15579.4 15628.5 15677.3
1985 15736.7 15788.3 15839.7 15900.6
1986 15961.5 16018.3 16076.9 16139.0
1987 16203.0 16263.3 16327.9 16398.9
1988 16478.3 16538.2 16621.6 16697.0
1989 16777.2 16833.1 16891.6 16956.8
1990 17026.3 17085.4 17106.9 17169.4
1991 17239.4 17292.0 17354.2 17414.2
1992 17447.3 17482.6 17526.0 17568.7
1993 17627.1 17661.5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T08:15:12.637

这里有办法。这个想法是以长格式重塑您的时间序列。在这里，我`reshape2`用来融化数据。

我创建了我的时间序列，请注意这里的频率

```
dat <- ts(rnorm(12*5, 17, 8), start=c(1981,1), frequency = 4) 
```

比我把我的数据放在长格式

```
library(reshape2)
library(zoo)
dat.m <- data.frame(yr=index(dat),value=melt(dat)$value) 
```

我绘制结果：

```
library(ggplot2)
qplot(x=yr,y=value,data=dat.m,geom='line') 
```

![在此处输入图像描述](../Images/45a1edf0f408be2e700872b64c23ce02.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:17:12.930

`autoplot`ggplot2的功能有一个zoo方法：

```
# first create some sample data
library(ggplot2)
library(zoo)
tt <- ts(rnorm(100), freq = 4, start = c(1971, 2)) # sample data

# convert to zoo and plot
z <- as.zoo(tt)
autoplot(z) 
```

或者有点花哨（如下所示）：

```
 autoplot(z) + 
    geom_vline(xintercept = time(z)[cycle(z) == 1], col = "grey", alpha = .7) 
```

![在此处输入图像描述](../Images/a5072899998019f45909dd1933c59a9c.png)

# php - 写错误日志但我不知道如何组织它

> ID：15049756
> 
> 赞同：0
> 
> 时间：2013-02-24T07:50:36.050
> 
> 标签：php, fopen, fwrite, fclose

我有两个函数做 preg_match 来检查 emp# 和电子邮件是否有效。如果一个或两个无效，它将被打印到 error.log 但我想以一种方式组织它嗯....让我看看我是否知道如何尽可能简单地举例。

假设如果 emp# 无效，则错误日志将显示

```
date()
emp# 
```

如果电子邮件无效，则会显示错误日志

```
date()
email 
```

如果两者都无效，则错误日志将显示

```
date()
emp#
email 
```

问题是当这两种情况都发生时，我不希望它打印日期两次或多个 emp# 或电子邮件无效日期不会重复只会打印

```
date()
emp#
emp#
emp$ 
```

希望我的解释是有道理的......我现在拥有的是

```
 if(((isEmailAddressWellFormed($column[3]) == false)) && ((isStudentNumberWellFormed($column[0]) == false)))
    {
        $filehandle = fopen("./courses/path/error.log","a+") or die ("File can not be opened");
        fwrite($filehandle, date("F t, Y (h:i:s a)") . PHP_EOL);
        fwrite($filehandle, "Improper email address from " . $_GET["filename"] . " :" . PHP_EOL);
        fwrite($filehandle, "$column[2] $column[1] $column[3]\n" . PHP_EOL);
        fwrite($filehandle, "Improper student numbers from " . $_GET["filename"] . " :" . PHP_EOL);
        fwrite($filehandle, "$column[2] $column[1] $column[0]\n" . PHP_EOL);
        fclose($filehandle);        
    }
    else
{
    if(isEmailAddressWellFormed($column[3]) == false)
    {
        $filehandle = fopen("./courses/path/error.log","a+") or die ("File can not be opened");
        fwrite($filehandle, date("F t, Y (h:i:s a)") . PHP_EOL);
        fwrite($filehandle, "Improper email address from " . $_GET["filename"] . " :" . PHP_EOL);
        fwrite($filehandle, "$column[2] $column[1] $column[3]\n" . PHP_EOL);
        fclose($filehandle);
    }

    if(isStudentNumberWellFormed($column[0]) == false)
    {
        $filehandle = fopen("./courses/path/error.log","a+") or die ("File can not be opened");
        fwrite($filehandle, date("F t, Y (h:i:s a)") . PHP_EOL);
        fwrite($filehandle, "Improper student numbers from " . $_GET["filename"] . " :" . PHP_EOL);
        fwrite($filehandle, "$column[2] $column[1] $column[0]\n" . PHP_EOL);
        fclose($filehandle);
    }
} 
```

但我知道它没有得到我想要的……有什么简单的方法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:04:41.470

```
$errors = array();

if(!isEmailAddressWellFormed($column[3]))
{
    $errors[] = "Improper email address from " . $_GET["filename"] . " :";
    $errors[] = "$column[2] $column[1] $column[3]";
}

if(!isStudentNumberWellFormed($column[0]))
{
    $errors[] = "Improper student numbers from " . $_GET["filename"] . " :";
    $errors[] = "$column[2] $column[1] $column[0]";
}

if (!empty($errors))
{
    $filehandle = fopen("./courses/path/error.log","a+") or die ("File can not be opened");
    fwrite($filehandle, date("F t, Y (h:i:s a)") . PHP_EOL);
    fwrite($filehandle, implode(PHP_EOL, $errors);
    fclose($filehandle);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:03:46.070

有很多方法可以解决这个问题。你可以这样做的一种方法是这样的：

```
$error = false;

if (!isEmailAddressWellFormed($column[3]))
{
    $emailError = "Improper email address from " . $_GET["filename"] . " :" . PHP_EOL . "$column[2] $column[1] $column[3]\n" . PHP_EOL;
    $error = true;
}

if (!isStudentNumberWellFormed($column[0]))
{
    $studentError = "Improper student numbers from " . $_GET["filename"] . " :" . PHP_EOL . "$column[2] $column[1] $column[0]\n" . PHP_EOL;
    $error = true;
}

if ($error)
{
    $handle = fopen("./courses/path/error.log","a+") or die ("File can not be opened");

    fwrite($filehandle, date("F t, Y (h:i:s a)") . PHP_EOL);

    if (isset($emailError))
        fwrite($handle, $emailError);

    if (isset($studentError))
        fwrite($handle, $studentError);

    fclose($handle);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T10:11:32.997

尝试使用日志类，写入错误

[https://github.com/soroushatarod/Loggerr](https://github.com/soroushatarod/Loggerr)

# path - 当有路径集（path.data）时，如何在elasticsearch中存储分片？

> ID：15049758
> 
> 赞同：1
> 
> 时间：2013-02-24T07:50:41.940
> 
> 标签：path, elasticsearch

我有一个节点 elasticsearch 集群，并配置了两条路径来存储 shadr，比如这里的 path.data:/partone,/parttwo。1 GB 硬盘安装在 /partone 文件夹中，5 GB 硬盘安装在 /parttwo 文件夹中。我使用了大约 483 MB 的文件来索引，然后在这个节点中出现了 536644 个文档。当我删除 /partone 文件夹中的孔文件时，文档数变为 531833。这意味着一些文档存储在 /partone 文件夹中。

我从elasticsearch网站上读到如下：多个数据位置允许对其进行条带化。条带化很简单，将整个文件放在其中一个位置，并根据可用空间最大的位置决定文件的放置位置。

我的问题是，如果条带化基于可用空间最大的位置，则孔文件应存储在大小大于 partone 文件夹的 parttwo 文件夹中，不是吗？为什么folderone中存在一个小文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:46:32.853

您引用的段落是指实际的 Lucene 索引。有一些与 ES 如何执行复制相关的细节，这些细节也可以存储在较小的驱动器上。当 ES 将数据刷新到 Lucene 时，这些会被清除。例如`-Des.path.data=/d/data/foo,/tmp/foo`，在索引维基百科几分钟并执行之后`-XPOST /_flush`，我看到：

```
% du -ks /d/data/foo /tmp/foo
205680  /d/data/foo
776     /tmp/foo
% df -h /d/data/foo /tmp/foo
Filesystem                     Size  Used Avail Use% Mounted on
/dev/sda5                      294G   28G  251G  10% /d
/dev/disk/by-uuid/074cc648...  106G   91G   11G  90% / 
```

然而，令我惊讶的是，在删除了一些文件之后`/partone`，您能够计算文档数。删除后我的索引不起作用`/tmp/foo`。

# ruby-on-rails - 在 lib 文件中找不到 flash_session_cookie_middleware.rb

> ID：15049762
> 
> 赞同：0
> 
> 时间：2013-02-24T07:51:04.937
> 
> 标签：ruby-on-rails, uploadify, carrierwave

我已经按照本[教程](https://stackoverflow.com/questions/8363698/rails-carrier-wave-with-jquery-uploader)使用carrierwave和uploadify，但我无法做到这一点。我正在使用 Rails 3.2.11。`flash_session_cookie_middleware.rb`你能帮我我在lib中找不到文件吗？是否要创建此文件？由于我在 lib 文件夹中创建了此文件并将该代码片段添加到`session_sore.rb`. 当我重新启动我的服务器时，它给出了这个错误`uninitialized constant FlashSessionCookieMiddleware (NameError)`。在这种情况下可以做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T05:52:28.903

检查`application.rb`是否包含此行：

```
config.autoload_paths += %W(#{config.root}/lib) 
```

# ruby-on-rails - 一些在模型中不重复功能的方法

> ID：15049771
> 
> 赞同：0
> 
> 时间：2013-02-24T07:52:07.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我将在很多模型中重用一些函数，在rails中，所以我认为必须有更好的方法来不重写代码或不在模型中加载帮助程序。

那么，实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T08:20:18.277

您可以将常用功能放在模块中

```
module CommonFunctions
  def common1
  end

  def common2
  end
end 
```

然后将它们包含在使用它们的模型中

```
class Comment
  include CommonFunctions
end

class Post
  include CommonFunctions
end 
```

# php - mysql_query 到 PDO

> ID：15049779
> 
> 赞同：1
> 
> 时间：2013-02-24T07:54:49.830
> 
> 标签：php, pdo

我在旧的“mysql_query”中有以下代码

```
$query = mysql_query("SELECT defe FROM information WHERE term = 1");
$fetch = $db->fetch_array($query);
print_r($fetch); 
```

我想将其转换为从数据库中检索信息的 PDO 方式。我尝试了以下（没有工作 - 不显示任何结果）：

```
$query = $db->prepare('SELECT defe FROM information WHERE term = 1');
$fetch = $query->fetch();
print_r($fetch); 
```

建立与数据库的连接并将其存储在`$db`变量中（仅 PDO）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T07:57:37.503

你必须[`execute`](http://php.net/manual/en/pdostatement.execute.php)查询

```
$query = $db->prepare('SELECT defe FROM information WHERE term = 1');
$query->execute();
$fetch = $query->fetch();
print_r($fetch); 
```

您也可以使用[`PDO::query`](http://www.php.net/manual/en/pdo.query.php)，因为您没有在查询中使用任何参数

```
$query = $db->query('SELECT defe FROM information WHERE term = 1');
$fetch = $query->fetch();
print_r($fetch); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T08:00:15.337

你可以简单地做

```
$query = $db->query('SELECT defe FROM information WHERE term = 1');  
$result = $query->fetch();  
print_r($result); 
```

但是如果你想准备它（可能是出于安全原因），你需要执行它。

所以它会是

```
$query = $db->prepare('SELECT defe FROM information WHERE term = 1');  
$query->execute();  
$result = $query->fetch();  
print_r($result); 
```

# sorting - CUDA 排序共享内存

> ID：15049783
> 
> 赞同：1
> 
> 时间：2013-02-24T07:56:15.473
> 
> 标签：sorting, cuda, parallel-processing

我想在不退出内核的情况下对共享内存中的数组进行并行排序。

我可以使用 Thrust for CUDA 对全局内存中的数组进行排序。但这只能在主机中完成。我必须为此退出内核。但这意味着当我重新启动另一个内核时，我将丢失线程中的所有本地内存，我将不得不重新填充本地内存。

这有什么图书馆吗？或者无论如何我会通过内核并来到主机并使用推力对设备中的数组进行排序然后恢复内核？

# xcode - sqlite xcode 查询子句

> ID：15049784
> 
> 赞同：0
> 
> 时间：2013-02-24T07:56:16.697
> 
> 标签：xcode, sqlite

我对 sqlite 的查询有一些奇怪的问题。当我的 firstvar 值介于 30000 和 100000 之间时，我的查询不会返回任何内容。但是当 var 低于 30000 且大于 100000 时，它会。它在我的 xcode 应用程序中与在 sqlite 浏览器中相同。

```
SELECT * FROM OFFERS WHERE price > firstvar AND price < secondvar 
```

这是一些示例数据： [http ://www.purespain.com/example%20data.png](http://www.purespain.com/example%20data.png)

所以当我执行查询时

```
 SELECT * FROM OFFERS WHERE price > 40000 AND price < 300000 
```

我没有输出，而有很多价格（prijs）应该符合标准的报价。

例如，当我表演时

```
 SELECT * FROM OFFERS WHERE price > 140000 AND price < 300000 
```

或 SELECT * FROM OFFERS where price > 0 AND price < 300000

然后我有正确的结果

执行查询的代码是：

```
-(NSMutableArray *)selectOffersWithOndergrens:(int)ondergrens andBovengrens:(int)bovengrens andSoort:(NSString *)soort{

NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask , YES);
NSString *docpath = [path objectAtIndex:0];
dbPathString = [docpath stringByAppendingPathComponent:@"puurspanje.db"];

Offers = [[NSMutableArray alloc] init];

// Get all newsitems from the sqlite database
sqlite3_stmt *get_offers_stmt;
NSString *querysql = [[NSString alloc]init];
if (sqlite3_open([dbPathString UTF8String], &puurspanjeDB)==SQLITE_OK){
    [Offers removeAllObjects];

    if (![soort isEqual: @"alle"]){
        querysql = [NSString stringWithFormat:@"SELECT * FROM OFFERS WHERE prijs > %d AND prijs < %d AND soort = (SELECT TYPE_ID FROM TYPES WHERE NAME LIKE '%@' )", ondergrens, bovengrens, soort];
    }else{
        querysql = [NSString stringWithFormat:@"SELECT * FROM OFFERS WHERE prijs > %d AND prijs < %d", ondergrens, bovengrens];

    }

    const char* query_sql = [querysql UTF8String];

    if (sqlite3_prepare(puurspanjeDB, query_sql, -1, &get_offers_stmt, NULL)==SQLITE_OK) {
        while (sqlite3_step(get_offers_stmt)==SQLITE_ROW) {
            NSString *listing_ID = [[NSString alloc]initWithUTF8String:(const char *) sqlite3_column_text(get_offers_stmt, 1)];
            NSString *titel = [[NSString alloc]initWithUTF8String:(const char * )sqlite3_column_text(get_offers_stmt, 2)];
            NSString *omschrijving = [[NSString alloc]initWithUTF8String:(const char * )sqlite3_column_text(get_offers_stmt, 3)];
            NSString *prijs = [[NSString alloc]initWithUTF8String:(const char * )sqlite3_column_text(get_offers_stmt, 4)];
            NSString *referentie = [[NSString alloc]initWithUTF8String:(const char*)sqlite3_column_text(get_offers_stmt, 5)];
            NSString *slaapkamer = [[NSString alloc]initWithUTF8String:(const char*)sqlite3_column_text(get_offers_stmt, 6)];
            NSString *verdiep = [[NSString alloc]initWithUTF8String:(const char*)sqlite3_column_text(get_offers_stmt, 7)];
            NSString *badkamers = [[NSString alloc]initWithUTF8String:(const char*)sqlite3_column_text(get_offers_stmt, 8)];
            NSString *woonoppv = [[NSString alloc]initWithUTF8String:(const char*)sqlite3_column_text(get_offers_stmt, 9)];
            NSString *perceeloppv = [[NSString alloc]initWithUTF8String:(const char*)sqlite3_column_text(get_offers_stmt, 10)];
            NSString *kenmerken = [[NSString alloc]initWithUTF8String:(const char*)sqlite3_column_text(get_offers_stmt, 11)];
            NSString *buurtkenmerken = [[NSString alloc]initWithUTF8String:(const char*)sqlite3_column_text(get_offers_stmt, 12)];
            NSString *indeling = [[NSString alloc]initWithUTF8String:(const char*)sqlite3_column_text(get_offers_stmt, 13)];
            NSString *hypotheek = [[NSString alloc]initWithUTF8String:(const char*)sqlite3_column_text(get_offers_stmt, 14)];
            NSString *soort = [[NSString alloc]initWithUTF8String:(const char*)sqlite3_column_text(get_offers_stmt, 15)];

            Offer *offer = [[Offer alloc]initWithListing_ID:listing_ID andTitel:titel andOmschrijving:omschrijving andPrijs:prijs andReferentie:referentie andSlaapkamers:slaapkamer andVerdiep:verdiep andBadkamers:badkamers andWoonoppv:woonoppv andPerceeloppv:perceeloppv andKenmerken:kenmerken andBuurtKenmerken:buurtkenmerken andIndeling:indeling andHypotheek:hypotheek andSoort:soort];
            [Offers addObject:offer];
        }
    }
}
return Offers; 
```

}

我不知道可能是什么原因。任何帮助表示赞赏。

乔纳斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:45:59.270

原因是我选择文本作为数据类型而不是数字，并且因为文本中有空格，结果没有显示正常。

# frequency-distribution - WinBUGS - 定义离散逐步分布

> ID：15049790
> 
> 赞同：0
> 
> 时间：2013-02-24T07:57:29.343
> 
> 标签：frequency-distribution, winbugs, winbugs14, r2winbugs

我想在我的模型中定义一个分布形式：P(x=10)=0.10, P(x=15)=0.20, P(x=20)=0.70

WinBUGS FAQ 说可以将我自己的离散均匀分布构造为具有统一先验的分类变量，并且可以采用必要的整数值。请参阅手册第一部分中的 blockerht 示例。

我查了这个例子，我认为是这个：“具有未知自由度的分层 t 分布”

在模型规范中，他们执行以下操作：

```
for (n in 1:Nbins) {
   prior[n] <- 1/Nbins;   # Uniform prior on v
}
 k ~ dcat(prior[]); 
```

它确实定义了一个离散的制服。但我不知道如何获得我需要的表格。谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:05:24.660

如果我正确理解您的问题，则不需要循环...

```
#BUGS script to obtain distribution
m1<-"model{
  ind ~ dcat(p[])
  pmix <- x[ind]
}"
writeLines(m1,"m1.txt")

#simulate from the distribution    
library("R2OpenBUGS")
m1.bug<-bugs(data = list(x=c(10, 15, 20), p=c(0.1,0.2,0.7)),
             inits = NULL,
             param = "pmix",
             model = "m1.txt", 
             n.iter = 1100, n.burnin = 100, n.chains = 1, n.thin=1, DIC=FALSE)

hist(m1.bug$sims.list$pmix) 
```

应该管用...

![在此处输入图像描述](../Images/266f44dc353885ba2c0f50d8025a954f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:31:16.633

我正在学习如何自己做这件事。我想知道你是否可以这样做：

```
prior[10] <- .1
prior[15] <- .2
prior[20] <- .7
x ~ dcat(prior[]) 
```

# sql-server-2008-r2 - SQL计算列，递归总结层次结构

> ID：15049793
> 
> 赞同：2
> 
> 时间：2013-02-24T07:57:44.083
> 
> 标签：sql-server-2008-r2, common-table-expression, recursive-query, calculated-columns

到目前为止的[简化]故事：

在 Visual Studio 2010 下的 .mdf DB 中，我有一个下表：

```
CREATE TABLE [dbo].[SandTable](
    [id] [int] IDENTITY(1,1) NOT NULL,
    [isDone] [bit] NOT NULL,
    [percentComplete]  AS ([dbo].[CompletePercent]([id],[isDone])),
    [parentId] [int] NULL,
 CONSTRAINT [PK_SandTable] PRIMARY KEY CLUSTERED 
(
    [id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON)
)
ALTER TABLE [dbo].[SandTable]  WITH CHECK ADD  CONSTRAINT [FK_SandTable_SandTable] FOREIGN KEY([parentId]) 
```

这个想法是将行形成为树/森林，parentId 用作指向父节点的“指针”。

“percentComplete”计算列使用函数 CompletePercent 来计算以该行为根的子树的完整程度，如下所示：

*   如果一行的“isDone”位为 1，那么我们认为整个子树是 100% 完成的（这是用户覆盖），因此返回 1.0。
*   但是，如果“isDone”为 0，我需要计算整个子树的“完整性”。我通过递归平均直接孩子的“完整性”来做到这一点，直接孩子这样做是为了他们的孩子，依此类推，直到叶子。

起初，我试图让“CompletePercent”平均直接孩子的“percentComplete”列。但是，正如我发现的（后来在网上确认），计算列不能用作计算列计算的一部分。

目前，使用 CompletePercent 的以下实现，我总是为 'isDone'=1 行获得 1 和 0 为 'isDone'=0 行而感到沮丧：

```
CREATE FUNCTION [dbo].[CompletePercent]
    (
    @id int, 
    @isDone bit = 0
    )
RETURNS float
AS
    BEGIN
        DECLARE @result float
        IF @isDone = 1
            SET @result = 1.0
        ELSE
            SET @result = 
                (SELECT 
                    CASE 
                        WHEN (COUNT(*) = 0) THEN 0.0
                        ELSE AVG(dbo.CompletePercent(id, isDone))
                    END
                FROM dbo.SandTable
                WHERE parentId = @id
                )
        RETURN @result
    END 
```

我希望这里有一些简单的东西，我只是想念它，因为盯着它看了这么久。

我的下一步是尝试使用我目前正在研究的递归 CTE。但是，我不确定如何编写所需的“特殊”条件平均。

如果有人能在我迄今为止的行动中发现错误，或指导我朝 CTE 方向发展，我将不胜感激。

*[编辑：]*即使在 CTE 轨道上，我也走到了死胡同，下面是疯狂的（如果可以运行的话，可能很浪费）查询：

```
WITH Weights AS (SELECT SandTable.id, COUNT(NULLIF (SandTable.isDone, 0)) AS isDone, 100.0 AS weight, COUNT(ST.id) AS kids
    FROM SandTable INNER JOIN
        SandTable AS ST ON SandTable.id = ST.parentId
    WHERE (SandTable.parentId IS NULL)
    GROUP BY SandTable.id
    UNION ALL
    SELECT SandTable_1.id, COUNT(NULLIF (SandTable_1.isDone, 0)) AS isDone, MyCTE_2.weight / MyCTE_2.kids AS weight, COUNT(ST_1.id) AS kids
    FROM SandTable AS SandTable_1 INNER JOIN
        MyCTE AS MyCTE_2 ON SandTable_1.parentId = MyCTE_2.id AND MyCTE_2.isDone = 0 INNER JOIN
        SandTable AS ST_1 ON SandTable.id = ST_1.parentId
    WHERE (SandTable_1.parentId IS NOT NULL)
    GROUP BY SandTable_1.id)
 SELECT SUM(weight)
    FROM Weights AS Weights_1
    WHERE (isDone > 0) 
```

这个想法是沿着层次结构向下移动（目前从根开始，但我计划修改它以从特定的 id 开始），并为每个节点计算子节点的数量并测试“isDone”（在此处作为聚合完成考虑用于执行计数的 JOIN，现在如果 isDone 不为 0，则在 CTE 的结果中将其视为“真”）。每个节点的“权重”（实际上是它占总数的百分比）是它的父节点的权重除以其兄弟节点（包括它自己）的数量，根集为 100%。

对于“isDone”节点或叶子节点，向下行程停止。两者都将有下一个递归步骤返回 0 行）。

最后，将“idDone”节点的总权重相加（其他节点仅用于递归）。

但是，这无法运行，因为结果错误表明：“在递归公用表表达式的递归部分中不允许使用 GROUP BY、HAVING 或聚合函数”。

同样，我们将不胜感激任何有关在任何方向取得进展的提示。

问候，ShaiB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T02:35:20.933

无论您选择哪种路线，这都可能是一项相当昂贵的操作。但是，这里有一些可能会有所帮助的想法：

首先，您是否考虑过使用视图？您可以将计算列放在表上并将其添加到视图中，这可能会让您绕过计算列约束。您还可以使视图可更新（通过而不是触发器），以便对您的应用程序而言，它的行为就像一个表。

其次，您可以通过存储过程来做到这一点。使用游标一次遍历基表一行，计算`percentComplete`列的值，并将结果存储在表变量中。（您可能会这样写，您只需访问基表中的每一行一次。）然后简单地返回（即，选择）表变量的结果。

第三，与第二个类似，编写一个触发器以在插入/更新/删除之后重新计算`percentComplete`每一行，而不是使用计算列。虽然这会给您带来非常快的读取速度，但写入速度可能会非常慢。

第四，您可以通过 CLR 函数（即，用 C# 编写并将其导入服务器）来执行此操作。对于带有 CLR 函数的函数，您可以摆脱许多 SQL Server 的（愚蠢的）规则。（虽然，这并不意味着它总是一个好主意。）

第五，可能也是最复杂的，您可以编写一个 CLR 表函数来读取表中的行（不带`percentComplete`）并计算该`percentComplete`列并将其附加到结果集中。然后，将此作为视图的基础（即`SELECT * FROM dbo.GetTheTree()`），然后使用而不是触发器使视图可更新（类似于第二个选项）。

希望能给你一些想法！

# c# - 集成测试实体框架，需要不同的数据库服务器吗？

> ID：15049794
> 
> 赞同：1
> 
> 时间：2013-02-24T07:57:55.897
> 
> 标签：c#, sql-server, entity-framework, testing, sql-server-ce

我正在尝试继续我的 Entity Framework + 测试经验。我在 NUnit 中编写了删除表、创建新数据库、在表中创建测试所需的行、进行测试并重复的测试。

有一篇关于[两种不同测试策略](http://www.codeproject.com/Articles/460175/Two-strategies-for-testing-Entity-Framework-Effort)`Effort`的好文章解释了使用（在内存数据库中）进行测试有一些缺点。无论如何，我确实非常喜欢针对实际数据库进行测试，因为这样我就可以验证*真实*数据库以验证事物是否以及如何最终进入数据库。

然后我看到了[这篇](https://stackoverflow.com/questions/5494158/entity-framework-4-1-code-first-setinitializer-not-being-called-again-after-da)文章，在那里我可以读到我应该/可以**为我的应用程序和测试使用不同的数据库服务器**。例如，应用程序针对 SQL Server 运行，而测试针对 SQL Server CE 运行。

我现在有几个在 SQL Server Express 上工作的集成测试。我的应用程序在相同的连接字符串上运行，针对相同的数据库服务器实例。

这是不明智的吗？

从长远来看，我有麻烦吗？

任何人都可以确认并解释是否需要/建议为应用程序（SQL Server）和集成测试（SQL Server CE）使用不同的数据库服务器？

提前非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T09:39:24.333

使用 SQL Server 作为数据库，使用 SQL Server CE 作为测试数据库可能是值得的。这很常见，因为在 SQL Server CE 上运行测试可能比在 SQL Server 上运行这些测试通常做的事情更快（创建整个数据库，执行快速事务，然后完全销毁它）。这也意味着您不需要在开发计算机上安装完整的 SQL Server。

但是，没有必要这样做。有些人可能也不想这样做。您甚至可能在程序中使用了仅在 SQL Server 上可用的功能，这基本上意味着您将无法使用 SQL Server CE。

最后，您的代码可能适用于 SQL Server CE，但不适用于 SQL Server，因此在测试期间不会出现问题。有一次，我针对 MySQL 运行了一个应用程序，但使用 sqlite 来运行一些测试。sqlite 与 MySQL 的工作方式略有不同，这导致我的程序在测试中运行良好，但在现场运行时失败。

因此，我仍然建议能够针对您将在现场使用的相同类型的数据库进行测试。您总是可以找到中间立场，例如针对 SQL Server CE 测试数据库进行开发，然后切换到 SQL Server 上的测试，然后再使用新版本来涵盖这种情况。

# c++ - 如何将“普通”C++ 类转换为模板？

> ID：15049795
> 
> 赞同：0
> 
> 时间：2013-02-24T07:57:58.287
> 
> 标签：c++, class, templates

我正在尝试将一个类从“普通”类转换为模板类，但我不理解正确的语法。下面是我开始的一个（非常简化的）示例。这是 Visual Studio 2010，C++，针对 x64 架构，Windows 7。

目标是将类 T 重写为模板来处理 TEntry 或新类 OtherTEntry，在概念上类似于 TEntry，具有相同的成员函数，但具有不同的数据成员。

我很感激关于如何最好地做到这一点的建议。如果可能的话，我想将头文件和实现文件分开。我特别关注对局部变量 T * 的引用，以及如何正确使用 sizeof()。

在文件 Th 中：

```
class T
{
    T(void);
    T(G *pGIn, const unsigned long s, char nIn);
    ~T(void);

    // Member functions
    public:
    bool Expand(const unsigned long newS);
    void Empty(void);

    private:
    G *pG;
    char n;
    unsigned long s;
    int f;
    TEntry *p;
}; 
```

在文件 TEntry.h 中：

```
class TEntry
{
    // Constructors
    public:
    TEntry();
    TEntry(int l);

    // Member functions
    public:
    void Relocate(int delta);

private:

    // Data members
    int k;
    TEntry *p;
}; 
```

在文件 T.cpp 中：

```
T::T()
{
    p=NULL; s=0; pG=NULL;
    Empty();
    return;
}

T::T(G *pGIn, const unsigned long m, char nIn)
{
    pG=pG; n=nIn;
    return;
}

T::~T(void)
{
    if(p!=NULL)
        delete[] p;
    return;
}

bool T::Expand(const unsigned long newS)
{
    T *pBefore=p;
    p=(T *)_realloc_dbg(p, newS*sizeof(T), _NORMAL_BLOCK,__FILE__,__LINE__);
    s=newS;
    return p!=NULL;
}

void T::Empty()
{
    f=0;
    return;
} 
```

在文件 TEntry.cpp 中：

```
T::T()
{
}

T::T(int i)
{
    k=i;
}

void T::Relocate(int delta)
{
    k+=delta;
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:34:00.450

最简单的方法是从一个完整的、工作的、非模板版本开始，`T`它是根据您以后要在模板中使用的一种类型编写的（这里的明显选择：）`TEntry`。

一旦你有了一个有效的实现，你就可以将它转换为一个模板。

1.  为您的模板参数选择一个名称。类型参数的常用名称是 T，但该名称已在您的项目中使用，因此我将使用`U`.
2.  用模板参数的名称替换所有出现的`TEntry`inside ( )`T``U`
3.  将模板头添加到类定义中`T`：

    ```
    template <class U>
    class T {
      //... 
    ```

4.  `T`将模板头添加到在类定义之外定义的每个成员：

    ```
    template <class U>
    «return type» T<U>::«member specification» //... 
    ```

5.  确保所有模板代码都在头文件中（直接或间接通过`#include`指令。模板不支持单独编译头文件和源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:31:46.393

> 我想将头文件和实现文件分开

虽然可以做到这一点，但这有点像一场噩梦。通常最好将模板的所有部分放在一起。

你可能想要的是这样的：

```
template< typename TYPE > class T
{
    // ...
    TYPE* p;
}; 
```

然后您可以使用`sizeof( TYPE )`.

你不能做的一件事，也不应该做的就是将 realloc 与 new 和 delete 混合。C++ 不支持重新分配使用 new 和 delete 分配的内存。相反，它有诸如`std::vector`为您管理内存的容器。

而且，正如已经提到的，一个字母的类和变量名称不是一个好主意。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T15:53:47.403

一般来说，最好将模板代码保存在 .h 文件中。如果绝对必要，可以将实现放在 .cpp 文件中，请参阅[C++ 模板：David Vandevoorde 和 Nicolai M. Josuttis 的完整指南](https://rads.stackoverflow.com/amzn/click/com/0201734842)，第 6 章，了解详细信息。

你可以这样（减少不太重要的细节）：

```
template <class T>
class YourClass
{
    YourClass()
       : p(NULL), s(0), pG(NULL)
    {
       Empty();
    }

    YourClass(G *pGIn, const unsigned long s, char nIn)
    {
       // ... implementation here
    }
    ~YourClass()
    {
        if(p!=NULL)
           delete p;
    }

public:
    bool Expand(const unsigned long newS)
    {
        T *pBefore=p;
        p=(T *)_realloc_dbg(p, newS*sizeof(T), _NORMAL_BLOCK,__FILE__,__LINE__);
        s=newS;
        return p!=NULL;
    }

private:
    G *pG;
    char n;
    unsigned long s;
    int f;
    T* p;
}; 
```

几点注意事项：

*   命名您的类模板`T`确实是个坏主意，因为使用`T`模板参数名称是一种常见的做法。
*   关于`sizeof`，在您的代码示例中，它没有应用于模板，而是应用于普通类，无论如何，`sizeof`在类、类模板或模板参数上使用应该没有任何问题。

# javascript - ajax调用还是可以同步调用的吧？

> ID：15049802
> 
> 赞同：2
> 
> 时间：2013-02-24T07:59:02.383
> 
> 标签：javascript, jquery, ajax

虽然 ajax 被称为“异步 JavaScript 和 XML，但我们仍然可以称它为同步，对吗？

使用异步：假

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:01:58.330

AJAX 是一种用于创建网站的通用技术。简单来说，它允许您通过从服务器异步检索数据来动态更新页面而无需完全重新刷新。然后使用此数据更新当前页面。此过程是异步的，但您可以选择通过等待响应使其同步。

如果您指的是 jQuery ajax 函数，是的，您可以按照手册中的说明使其同步`async:false`：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:03:24.317

当与jQuery 1.8一起使用时，它已被[弃用。](http://api.jquery.com/jQuery.ajax/)`jqXHR($.Deferred)`

# java - 技术用户破坏 JSP 页面的安全性

> ID：15049804
> 
> 赞同：-1
> 
> 时间：2013-02-24T07:59:14.520
> 
> 标签：java, html, security, jsp, frameworks

我已经在 J​​SP 页面中实现了基于字段的安全性。

如果该字段对用户是只读的，我将属性**readonly="true"** ;

但是有些用户是技术人员，他们知道Firefox中的firebug或相关工具，使用这些工具，他们从dom中删除只读属性并更改字段的值。

我该如何控制这个？或任何其他机制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T11:13:30.967

您不能对用户修改您提供的文档做任何事情。您发送给客户的任何内容都在他们的控制之下，不在您的控制之下。

但是只有一些技术可以避免或检测此类参数篡改：

*   **避免**：您向客户端提供的可用参数越少，可以篡改的参数就越少。如果您不希望更改某个参数（可能是任何隐藏的表单字段），请不要将其发送到客户端，而是将其保留在服务器端。您可以将这些参数存储在客户端会话内的某种容器中，并将其与当前表单相关联。然后发送到客户端的唯一信息是容器的随机标识符，该标识符引用服务器端存储的参数。
*   **检测：**您可以使用[MAC](http://en.wikipedia.org/wiki/Message_authentication_code)等加密哈希函数来验证客户端返回的数据与发送给它的数据是否相同。但请注意，这仍然允许[重放攻击](http://en.wikipedia.org/wiki/Replay_attack)。

# java - 编写高效且不冗余的测试

> ID：15049805
> 
> 赞同：2
> 
> 时间：2013-02-24T07:59:37.817
> 
> 标签：java, scala, testing, redundancy

首先，我使用`Scala`，但任何`Java`方法都可能有效。

我有一个带有数据库连接的应用程序，我想在不修改数据库或数据库脱机的情况下运行我的测试并开发我的应用程序。

说，我有一个连接到数据库的大类（或模块），做所有你想做的事情，我如何从外部访问该类或其参数？

例如，如果我希望该类正常运行，而不是`statement.executeUpdate( sql )`，我想要一个`println( "Did: " + sql )`, 而不是在此测试中调用第一个方法。

显然，一种方法是简单地替换这些语句 - 或复制整个文件并替换它们。但它很容易出错，如果我把它改回来，我可能会忘记一些东西。另外，它非常多余。

如何解决这个问题？怎么办`JUnit`？

免责声明：请不要使用“参数化您的课程”之类的解决方案。我希望我的构造函数有很少的参数，我不想在调用它时指定所有内容。测试类在我的应用程序中是二等公民，它们对实际类/实际开发几乎没有影响。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T08:20:01.313

您应该定义一个包含类中所有数据库方法的接口。然后，确保您现有的数据库类实现该接口。

现在您有了一个接口，您可以模拟该类或开发一个存根类进行测试。存根类可以只打印 SQL 或任何您想要的。模拟类更强大，可用于确保您的业务逻辑正常工作。

最后一步是确保使用数据库的任何地方都在构造函数中接受您的接口。例如

```
public class ClassThatUsesTheDatabase {

    public ClassThatUsesTheDatabase(DatabaseProvider provider) {
      //...
    }
} 
```

`DatabaseProvider`你的界面在哪里。这允许您`ClassThatUsesTheDatabase`使用存根或模拟进行测试。在生产中，您将使用您的具体实现来构建此类。

在我看来，这是编写依赖外部资源的应用程序的唯一明智的方法。

* * *

重新阅读您的问题后，我担心以下段落：

> 免责声明：请不要使用“参数化您的课程”之类的解决方案。我希望我的构造函数有很少的参数，我不想在调用它时指定所有内容。测试类在我的应用程序中是二等公民，它们对实际类/实际开发几乎没有影响。

测试班不是二等公民。如果您认真对待代码质量，它们与您的生产代码一样重要。是的，您经常必须设计生产代码以使其适合单元测试。这是不可避免的。然而，好处是巨大的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T08:02:37.993

> 请不要使用“参数化您的课程”之类的解决方案。

那么你做错了。您的数据库调用应该在易于用虚拟实现替换的模拟对象中。很有可能，如果您仍然使用 executeStatement，那么您很容易受到 SQL 注入的攻击。你应该重新考虑你的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T08:23:42.297

就我个人而言，我支持 Bob 大叔，因为您希望所有 DB 交互都被隔离到程序中的一个类中，这样您就可以在测试中用其他东西替换它。如果你不想参数化，还有蛋糕模式和依赖注入。

现在，如果您坚持对与数据库对话的库的依赖项进行硬编码，您仍然可以做一件事：模拟数据库。这可能很难做到，因为您必须实现数据库接口。

我实际上是在一个项目中这样做的，尽管它是一个基于 HTTP+JSON 的 NoSQL 数据库，所以模拟数据库就像模拟 Web 服务器一样简单——只需几十行未过滤的代码即可产生所有所需的响应。

然后只需在测试期间指向假数据库，就可以了。

尽管如此，使代码更容易测试可以使代码更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T08:22:35.217

使用 JUnit（和任何其他主流单元测试框架），标准的解决方案范围是某种依赖注入，这涉及到您所说的“参数化您的类”。没有王道，抱歉 :-) 但是，您可以通过各种方式来最小化或避免生产代码的中断。

处理这类问题的常用方法是将要测试的逻辑与数据库访问代码分离，方法是提取后者并将其隐藏在可模拟接口后面。然后在被测代码中，语句 like`statement.executeUpdate(sql)`被替换为调用 like `dataAccessor.updateFooBar(foo, bar)`。并且执行这些调用的数据访问器对象以某种方式注入到您的类中 - 它可能是一个可选的构造函数参数，它可能是一个默认值是真实数据访问器对象但它有一个具有包访问权限的设置器来设置单元测试期间的模拟数据访问器...

# android - 为什么 layout_width 应该设置为零？

> ID：15049807
> 
> 赞同：1
> 
> 时间：2013-02-24T07:59:51.990
> 
> 标签：android, fragment

当我学习片段时

[http://developer.android.com/reference/android/app/Fragment.html](http://developer.android.com/reference/android/app/Fragment.html)

我在 layout-land/fragment_layout.xml 中看到了以下代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent" android:layout_height="match_parent">

    <fragment class="com.example.android.apis.app.FragmentLayout$TitlesFragment"
            android:id="@+id/titles" android:layout_weight="1"
            android:layout_width="0px" android:layout_height="match_parent" />

    <FrameLayout android:id="@+id/details" android:layout_weight="1"
            android:layout_width="0px" android:layout_height="match_parent"
            android:background="?android:attr/detailsElementBackground" />

</LinearLayout> 
```

为什么片段和框架布局的布局宽度都设置为零？我在纵向、设置上尝试了相同的 xml `android:orientation="vertical"`，并显示了一个空白屏幕。那么里面有什么秘密呢？我的意思是垂直和水平之间有什么区别？那有什么特别之处`FrameLayout`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:21:36.527

您正在寻找的是重量属性，它将您`LinearLayout`分成两个相等的部分。

秘密是**android:layout_weight="1"** [了解更多](http://developer.android.com/guide/topics/ui/layout/linear.html#Weight)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T11:09:05.540

如果您的 LinearLayout 是垂直方向，则具有 layout_weight 属性的每个项目都必须将 layout_height 设置为 0

在水平 LinearLayout 的情况下，如果它具有 layout_weight，则必须将 layout_width 设置为 0

# c++ - opencv 错误乘以 2 Mat's

> ID：15049811
> 
> 赞同：7
> 
> 时间：2013-02-24T08:00:24.177
> 
> 标签：c++, opencv, matrix

我在opencv中乘以2个矩阵（Mat对象）。

这是第一个 Mat 的生成方式：

```
cv::Mat R(m, k, CV_8UC1);
rm.generateRandomMatrix(m, k, 255, R); 
```

以下是第二个的生成方式：

```
for (int i=0; i<=n; i++)
{
    randomMatrix_Xi rm;
    cv::Mat Xi(k, 1, CV_8UC1);
    rm.generateRandomMatrix(k, 1, 255, Xi);
    random_Xi_Vectors.push_back(Xi);
    sleep(2);
} 
```

这是我在两个地方都使用过的 generateRandomMatrix() 函数定义：

```
int randomMatrix_Xi::generateRandomMatrix(int m, int k, int range, cv::Mat R)
{
    typedef boost::mt19937 RNGType;
    RNGType rng(std::time(0));
    boost::uniform_int<> one_to_range( 1, range);
    boost::variate_generator< RNGType, boost::uniform_int<> > number_generator(rng, one_to_range);
    for (int j=0; j<k; j++)
    {
        for ( int i = 0; i < m; i++ ) 
        {
           int n = number_generator();
           R.at<uchar>(i,j) = n;
           //std::cout<<"Putting "<<n<<" at"<<i<<", "<<j<<std::endl;
        }
    }
} 
```

最后，这里是我做两个 Mat 相乘的地方：

```
for (int i = 0; i < n; i++)
    {
        std::cout<<" Sizes of matrices to be multiplied: "<<std::endl;

        cv::Size Xi_size = random_Xi_Vectors[i].size();
        cv::Size A_size = R.size();
        std::cout<<"R : "<<A_size.height<<" "<<A_size.width<<std::endl;
        std::cout<<"Xi : "<<Xi_size.height<<" "<<Xi_size.width<<std::endl;

            cv::Mat temp(960,1, CV_8UC1); 
        cv::Mat temp = random_Xi_Vectors[i] * R;
        shares.push_back(temp);
    } 
```

这是我得到的错误：

```
r@r-HP-Mini-110:~/l33t/Secret Sharing$ ./mainProgram  Sizes of matrices to be multiplied: 
R : 960 2
Xi : 2 1
OpenCV Error: Assertion failed (type == B.type() && (type == CV_32FC1 || type == CV_64FC1 || type == CV_32FC2 || type == CV_64FC2)) in gemm, file /build/buildd/opencv-2.3.1/modules/core/src/matmul.cpp, line 701
terminate called after throwing an instance of 'cv::Exception'
  what():  /build/buildd/opencv-2.3.1/modules/core/src/matmul.cpp:701: error: (-215) type == B.type() && (type == CV_32FC1 || type == CV_64FC1 || type == CV_32FC2 || type == CV_64FC2) in function gemm

Aborted (core dumped)
r@r-HP-Mini-110:~/l33t/Secret Sharing$ 
```

如您所见，第一个 Mat 中的列数与第二个 Mat 中的行数相匹配。此外，两个 Mat 的类型相同，即`CV_8UC1`. 那么为什么我会收到这个错误。请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T10:34:09.573

```
(type == CV_32FC1 || type == CV_64FC1 || type == CV_32FC2 || type == CV_64FC2) 
```

这清楚地表明，你只能乘浮点 Mat 的

所以使用`CV_32FC1`(float) 或`CV_64FC1`(double) Mats 而不是`CV_8UC1`

（这样的代码：

```
boost::variate_generator<RNGType,boost::uniform_int<>> number_generator(rng,one_to_range); 
```

那时可能也需要改变，不确定）

# c++ - jni 调用中未解决的外部符号错误

> ID：15049817
> 
> 赞同：0
> 
> 时间：2013-02-24T08:01:28.063
> 
> 标签：c++, visual-c++, java-native-interface

JNI 调用存在一些问题。我有一个`.cpp`文件，其中包含佳能 sdk。我的 Java 类`Check.java`有一个声明：

```
private native void check(); 
```

我的`Check.cpp`文件：

```
#include "stdafx.h"
#include "iostream"
#include "EDSDK.h"
#include "Check.h"

using namespace std;

int check();    
#define _CRT_SECURE_NO_WARNINGS
typedef UINT (CALLBACK* LPFNDLLFUNC1)(DWORD,UINT);

JNIEXPORT void JNICALL Java_Check_check  (JNIEnv *, jobject){
  check();
}

int check(){

HINSTANCE hDLL;               // Handle to DLL
LPFNDLLFUNC1 lpfnDllFunc1;    // Function pointer
hDLL = LoadLibrary("EDSDK.dll");
EdsError e = EdsInitializeSDK();
} 
```

基本上我的`Check.cpp`文件只是初始化相机。调用时：

> cl -I "C:\jdk1.7\include" -I"C:\jdk1.7\include\win32" /EHsc -LD Check.cpp -FeCheck.dll

它抛出错误

> Check.obj：错误 LNK2019：函数“int __cdecl check(void)”(?check@@YAHXZ) 中引用的未解析外部符号_imp *_EdsInitializeSDK* @0

同样，在调用任何相机函数时，都会引发类似的错误。问题是什么？作为一个独立的文件`Check.cpp`效果很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T11:55:20.350

此错误告诉您链接器无法解析 EdsInitializeSDK。这与 JNI 无关。它只与您使用图书馆的方式有关。如果您动态加载它，您还必须手动执行链接。这意味着您必须在调用之前使用[GetProcAddress找到 EdsInitializeSDK 的入口点。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)

关于您在这里所做的事情的旁注：您必须存储在`hDLL`某个地方以便以后可以访问它，以便能够在`FreeLibrary`不再需要该库后进行清理（例如）。小心`LoadLibrary`JNI 层中的资源分配（如 ），因为您必须释放分配的资源。否则，从长远来看，你会陷入热水中。

# sql - oracle sql查询创建聚合视图

> ID：15049821
> 
> 赞同：0
> 
> 时间：2013-02-24T08:01:54.997
> 
> 标签：sql, oracle, aggregate-functions

将公司日历存储在数据库中，如下所示。请注意，公司日历从周六到周五开始：-

```
 Date1      Week     Month   Quarter     Year    Shift
23-FEB-13   9       6        2         2013     ABC
23-FEB-13   9       6        2         2013     DEF
22-FEB-13   9       6        2         2013     ABC1
22-FEB-13   9       6        2         2013     DEF2
21-FEB-13   8       6        2         2013     DEF2 
```

我想做的是创建一个视图来存储 Week#、StartWeek、EndWeek，即存储当前一周的开始和结束日期，例如

```
Week   StartWeek    EndWeek

  9        22-FEB-13     23-FEB-13 
```

这就是我到目前为止所拥有的

```
SELECT START_DATETIME, F_WEEK, ROW_NUMBER( ) OVER (PARTITION BY F_WEEK, F_YEAR ORDER BY SHIFT DESC) RNUM FROM COMMON.FISCAL_CALENDAR  WHERE F_WEEK IN (SELECT F_WEEK FROM COMMON.FISCAL_CALENDAR WHERE TO_DATE(START_DATETIME, 'DD-MON-YY') = TO_DATE(SYSDATE, 'DD-MON-YY')) AND F_YEAR IN (SELECT F_YEAR FROM COMMON.FISCAL_CALENDAR WHERE TO_DATE(START_DATETIME, 'DD-MON-YY') = TO_DATE(SYSDATE, 'DD-MON-YY')) ORDER BY START_DATETIME DESC 
```

如果有人可以对此进行更多说明，将不胜感激？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T18:10:47.993

带有周开始/结束日期和周数的周年表 - 您可以使用您的日期作为开始和结束日期并添加您的计算：

```
SELECT start_date 
     , TRUNC(start_date, 'iw')                  wk_starts  
     , TRUNC(start_date, 'iw') + 7 - 1/86400    wk_ends
     , TO_NUMBER (TO_CHAR (start_date, 'IW'))   ISO_wk#  
 FROM
 (
  SELECT TRUNC(SYSDATE, 'YEAR')-1 + LEVEL AS start_date
    FROM dual
  CONNECT BY LEVEL <= 
  (
  SELECT TRUNC(ADD_MONTHS (SYSDATE, 12), 'Y')-TRUNC(SYSDATE, 'Y') "Num of Days in 2013"   
   FROM dual
  )
 )
/

START_DATE    WK_STARTS    WK_ENDS               ISO_WK#
----------------------------------------------------
1/1/2013    12/31/2012    1/6/2013 11:59:59 PM    1
1/2/2013    12/31/2012    1/6/2013 11:59:59 PM    1
 ....
....
1/7/2013    1/7/2013    1/13/2013 11:59:59 PM    2
1/8/2013    1/7/2013    1/13/2013 11:59:59 PM    2 
```

这些是快速修复建议。您可以添加更多计算，因为您知道您的表格和日期...对于公司日历，您需要在上述查询中添加一些计算和更改。您可以添加结束日期。我建立了年度表，但您可以将 CONNECT BY 中的日期替换为您的日期，例如您的日期之间的天数

```
...CONNECT BY LEVEL <= (your_end_date - your_start_date) 
```

其他修复：

1.  将 FROM 子句中的我的 start_date 替换为您的开始日期 - 这将是此更改后一年中的第一个 SAT。您可以选择任何其他 SAT 作为开始日期，不必是当年的第一个 SAT：

    ```
     SELECT Next_Day(Trunc(Sysdate,'Y'),'SAT') + LEVEL-1 AS start_date FROM dual... 
    ```

2.  将 CASE 添加到外部查询 - 在 ISO_Wk# 之后。删除不需要的列...：

    ```
    SELECT start_date 
     , TRUNC(start_date, 'iw')                  wk_starts  
     , TRUNC(start_date, 'iw') + 7 - 1/86400    wk_ends
     , TO_NUMBER (TO_CHAR (start_date, 'IW'))   ISO_wk# 
     , (CASE WHEN TO_CHAR(start_date, 'DY') = 'SAT' THEN start_date END) your_wk_start
     , (CASE WHEN TO_CHAR(start_date, 'DY') = 'FRI' THEN TRUNC(start_date, 'iw') + 7 - 1/86400 END) your_wk_end
      ....
    START_DATE    WK_STARTS    WK_ENDS    ISO_WK#    WK_DAY    YOUR_WK_START    YOUR_WK_END
    --------------------------------------------------------------------------------------
    1/5/2013    12/31/2012    1/6/2013 11:59:59 PM    1    SAT    1/5/2013    
    1/6/2013    12/31/2012    1/6/2013 11:59:59 PM    1    SUN        
    ....
    ....
    1/11/2013    1/7/2013    1/13/2013 11:59:59 PM    2    FRI                1/13/2013 11:59:59 PM
    1/12/2013    1/7/2013    1/13/2013 11:59:59 PM    2    SAT    1/12/2013    
    ....
    ....       
    1/18/2013    1/14/2013    1/20/2013 11:59:59 PM    3    FRI               1/20/2013 11:59:59 PM 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T08:09:01.010

我假设您的需求是按周分组的最小和最大日期：

```
SELECT Week, MIN(Date) As StartWeek, MAX(Date) As EndWeek  
FROM original_table
GROUP BY Week; 
```

如果您只对本周感兴趣：

```
SELECT Week, MIN(Date) As StartWeek, MAX(Date) As EndWeek  
FROM original_table
WHERE Week = TO_CHAR(sysdate, 'IW'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T16:32:17.200

就这个

```
SELECT MAX(DATE1) AS SHIFT_END_TIME, MIN(DATE1) AS SHIFT_START_TIME, WEEK, YEAR FROM MYTABLE GROUP BY WEEK, YEAR HAVING WEEK IN (SELECT WEEK FROM MYTABLE  WHERE TO_DATE(DATE1,   'DD-MON-YY') = TO_DATE(SYSDATE, 'DD-MON-YY')) AND YEAR IN (SELECT YEAR FROM MYTABLE WHERE TO_DATE(DATE1, 'DD- MON-YY') = TO_DATE(SYSDATE, 'DD-MON-YY')) 
```

# c# - 如何获取 POST 请求内容并使用 c#.NET 保存？

> ID：15049823
> 
> 赞同：0
> 
> 时间：2013-02-24T08:02:05.040
> 
> 标签：c#, asp.net, .net, vb.net, http

我有 android 应用程序`Http POST`向页面发出请求`asp.net`。

我想实现接收此请求的 asp.net 页面并将其内容保存到文件中（这是文件上传）。

给我样品将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:19:13.713

这是我在`asp.net`接收图像的应用程序中的操作方法`Android`，关于我收到的简单参数

```
context.Request["Yourparameter"]

public class RecieveMail : IHttpHandler
{
    private string _emailAdressTo;
    private string _imageUrl;
    private EmailFactory _emailFactory;

    public void ProcessRequest(HttpContext context)
    {
        ImageFactory factory = new ImageFactory(context);
        try
        {
            _imageUrl = factory.SaveImage("uploaded");

            if (string.IsNullOrEmpty(context.Request["from"]) || string.IsNullOrEmpty(context.Request["to"])) return;

            _emailFactory = new EmailFactory(_imageUrl);
            if (_emailFactory.SendMail(context.Request["from"], context.Request["to"]))
                context.Response.Write(!factory.DeleteImage(_imageUrl) ? "Email sent" : "Image deleted");
        }
        catch (Exception ex)
        {
            context.Response.Write(" error converting " + ex.Message);
        }
    }
    public bool IsReusable
    {
        get
        {
            return false;
        }
    }    
} 
```

// 这里是图像保存工厂

```
public class ImageFactory
{
    private readonly HttpContext _context;
    private Image _image;

    public ImageFactory(HttpContext context)
    {
        _context = context;
    }

    /// <summary>
    /// Get image by name from post
    /// </summary>
    /// <param name="ctxImageParamName">image that have been posted in email</param>
    /// <returns></returns>
    public string SaveImage(string ctxImageParamName)
    {
        if (string.IsNullOrEmpty(_context.Request[ctxImageParamName])) return null;
        string url = GenerateImagePath("FrameMe");
        ByteArrayToImageAndSave(Decode(_context.Request[ctxImageParamName]), url);
        return url;
    }

    public bool DeleteImage(string url)
    {
        try
        {
            if (!File.Exists(url)) return false;
            File.Delete(url);
            return true;
        }
        catch (Exception ex)
        {
            return false;
        }    
    }

    private string GenerateImagePath(string directory)
    {
        return _context.Server.MapPath(string.Format("~/Images/{1}/Image1_{0}.jpg", DateTime.Now.ToString("ddMMyyyyHHmmss"), directory));
    }

    private void ByteArrayToImageAndSave(byte[] byteArrayIn, string imageUrl)
    {
        try
        {
            MemoryStream ms = new MemoryStream(byteArrayIn);
            _image = Image.FromStream(ms);
            _image.Save(imageUrl, new ImageFormat(Guid.NewGuid()));
            _image.Dispose();
        }
        catch (Exception ex)
        {
            _image = null;
        }
    }

    private byte[] Decode(string str)
    {
        return Convert.FromBase64String(str);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:11:31.700

使用 asp.net 中的 Request 对象将发布的信息检索到页面。

例如：

```
Request.Form["NameOfVar"] 
```

# ffmpeg - Remux 到 MKV，但使用 FFmpeg 添加所有流

> ID：15049829
> 
> 赞同：8
> 
> 时间：2013-02-24T08:02:52.900
> 
> 标签：ffmpeg

我正在尝试自动化 FFmpeg 以将给定目录中的所有视频文件重新混合到 MKV。我目前正在使用

```
ffmpeg -i $INPUT -c copy $OUTPUT.mkv 
```

但是，某些流会以这种方式被跳过 - 例如，如果有 2 个音频流，则只有 1 个流到输出文件。

如何指定必须将来自输入的**所有**流复制到输出？

由于我正在尝试自动化 FFmpeg，因此最好不要更改每个文件的命令，即手动指定所有流`-map`将需要我首先解析每个文件。如果需要，我会这样做，但如果有更好的解决方案，我会更喜欢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-24T14:25:00.033

> 如何指定必须将来自输入的所有流复制到输出？

该`-map`选项可以使用快捷方式执行此操作`-map 0`。

例如：

```
ffmpeg -i input.mkv -c copy -map 0:0 -map 0:2 output.mkv 
```

将流 0:0 和 0:2 复制到 output.mkv。

```
ffmpeg -i input.mkv -c copy -map 0 output.mkv 
```

*将所有*输入流从输入 0 ( )复制`input.mkv`到输出（即使有多个视频、音频或字幕流）。

该`-map`值对应于输入编号（`0`是第一个输入，`1`是第二个输入等）：如果您添加一个额外的输入（-> 输入 1），并且还想复制所有内容，那么您需要添加`-map 1`.

您可以使用它`ffprobe`来分析文件并查看哪个流映射到哪里。`-fflags +genpts`如果遇到`unknown timestamp`错误，请尝试。有关详细教程，请参阅[FFmpeg Wiki 页面上的`-map`选项](https://trac.ffmpeg.org/wiki/Map)。

# url-rewriting - 如何从 Prestashop 的主页“重定向”到特定的产品页面？

> ID：15049831
> 
> 赞同：0
> 
> 时间：2013-02-24T08:03:34.247
> 
> 标签：url-rewriting, prestashop, redirect

我想要的是“简单地”将任何访问我的 Prestashop 网站的主要登录页面的人，例如：'http://www.myprestashop.com' 自动定向[到](http://www.myprestashop.com)特定的产品页面，例如：' [http://www .myprestashop.com/music-ipods/1-ipod-nano.html](http://www.myprestashop.com/music-ipods/1-ipod-nano.html) '

我在.htaccess中尝试了各种代码组合，但没有任何运气，尽管我不得不承认URL重写/修改不是我最擅长的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T21:58:02.010

将以下内容添加到您的 .htaccess

重定向 301 / [http://www.myprestashop.com/music-ipods/1-ipod-nano.html](http://www.myprestashop.com/music-ipods/1-ipod-nano.html)

# php - 重述父变量 PHP

> ID：15049832
> 
> 赞同：0
> 
> 时间：2013-02-24T08:03:36.993
> 
> 标签：php, variables

除了在自身内部重述父变量（`$username`）之外，还有其他方法吗？

```
$username = ($profile_is_admin == true) ? $username . $admin_symbol : $username; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T08:07:31.283

```
if ($profile_is_admin) {
    $username .= $admin_symbol;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T08:05:51.467

尝试这个？

```
$username .= ($profile_is_admin) ? $admin_symbol : ''; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T08:05:48.700

像这样

```
$username .= ($profile_is_admin == true) ? $admin_symbol : ''; 
```

# c# - 针对不同需求的不同表单域

> ID：15049836
> 
> 赞同：-5
> 
> 时间：2013-02-24T08:03:59.203
> 
> 标签：c#, asp.net

我正在处理一个`Job Application Project`,`Admin Panel`和`Front End`.Add Vacancy 从管理面板和从前端申请使用申请表的工作。要求是。

> 申请特定职位时，申请表中的输入字段可以针对不同的职位进行更改。就像有些工作可以要求性别，有些可以要求年龄..？

添加空缺时请指导，我怎样才能达到第1点..所以不同的工作有不同的要求......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T08:16:59.360

您需要根据需要显示的字段在运行时查看动态添加控件（文本框、复选框、下拉菜单）。这相当简单，一般来说，在 SO 和互联网上会有很多例子。

# node.js - windows 8 使用 npm 安装包找不到 vcbuild.exe，msbuild.exe 失败

> ID：15049850
> 
> 赞同：3
> 
> 时间：2013-02-24T08:06:45.547
> 
> 标签：node.js, windows-8, npm

我正在尝试安装`tower.js`. 我要做的是：

```
tower new towerBot
cd towerBot
npm install 
```

得到错误：

```
C:\Project\towerBot\node_modules\grunt-contrib\node_modules\grunt-contrib-image
min\node_modules\optipng-bin\node_modules\exec-sync\node_modules\ffi\node_modul
es\ref\build\binding.sln : error MSB3411: Could not load the Visual C++ compone
nt "VCBuild.exe". If the component is not installed, either 1) install the Micr
osoft Windows SDK for Windows Server 2008 and .NET Framework 3.5, or 2) install
 Microsoft Visual Studio 2008.
gyp ERR! build error
gyp ERR! stack Error: `C:\Windows\Microsoft.NET\Framework\v3.5\msbuild.exe` fail
ed with exit code: 1 
```

首先，我什至安装了 2012 版本。对于`msbuild.exe`，我不知道。你们能帮帮我吗？我正在使用 windows 8 64 位、`node.js`32 位 v0.8.20、`node-gyp`v0.8.4，`node-gyp`当我尝试`configure`它时也总是出错，错误与上述相同。有什么想法吗？

# logging - 如何使用soapui脚本（groovy）将测试套件或测试用例结果记录在文件中？

> ID：15049858
> 
> 赞同：1
> 
> 时间：2013-02-24T08:08:03.193
> 
> 标签：logging, groovy, soapui

我需要使用 SoapUI 脚本将 TestResults 记录在文本文件中，例如。Groovy 脚本。如果它是 TestSuite 结果或 TestCase 结果，将非常有帮助。任何人都可以给我脚本样本吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:59:13.600

如下创建一个变量

```
def object1= context.expand( '${object1#Response#declare namespace ns2=\'http://namespace.suha.com\'; //ns2:namespaceResponse[1]/methodname[1]}' ) 
```

您可以创建一个 .txt 文件并将变量写入该文件，如下所示。

```
today = new Date()
sdf = new java.text.SimpleDateFormat("dd-MM-yyyy-hh-mm")
todayStr = sdf.format(today)
new File( "D:/" + todayStr + "report.txt" ).write(object1, "UTF-8" ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T13:31:07.960

这是一个讨论如何轻松完成的论坛帖子。显示如何记录请求和/或响应。在我尝试了很多其他脚本之后，它第一次尝试对我有用。

[http://www.soapui.org/forum/viewtopic.php?f=2&t=5208](http://www.soapui.org/forum/viewtopic.php?f=2&t=5208)

# c# - string.Remove 不起作用

> ID：15049859
> 
> 赞同：6
> 
> 时间：2013-02-24T08:08:05.460
> 
> 标签：c#, regex, string

我有以下问题：

我编写了一个程序，它使用谷歌图像搜索来提取指向 jpg 文件的链接。但是在链接前面我有一个 15 字符长的字符串，我无法删除。

```
 public const int resolution = 1920;
    public const int DEFAULTIMGCOUNT = 40;

    public void getimages(string searchpatt)
    {
        string blub = "http://images.google.com/images?q=" + searchpatt + "&biw=" + resolution;
        WebClient client = new WebClient();

        string html = client.DownloadString(blub);                                              //Downloading the gooogle page;
        MatchCollection mc = Regex.Matches(html,
            @"(https?:)?//?[^'<>]+?\.(jpg|jpeg|gif|png)");

        int mccount = 0;                                                                        // Keep track of imgurls 
        string[] results = new string[DEFAULTIMGCOUNT];                                         // String Array to place the Urls 

        foreach (Match m in mc)                                                                 //put matches in string array
        {
            results[mccount] = m.Value;                
            mccount++;
        }

        string remove = "/imgres?imgurl=";
        char[] removetochar = remove.ToCharArray();

        foreach (string s in results)
        {
            if (s != null)
            {
                s.Remove(0, 15);
                Console.WriteLine(s+"\n");
            }
            else { }
        }
       //  Console.Write(html);

    } 
```

我尝试了删除和修剪启动，但它们都没有工作，我无法弄清楚我的失败。

我像这样解决了

```
 for (int i = 0; i < results.Count(); i++)
        {
            if (results[i] != null)
            {
                results[i] = results[i].Substring(15);
                Console.Write(results[i]+"\n");
            }
        } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-24T08:11:25.247

（我确定这是重复的，但我无法立即找到。）

.NET 中的字符串是不可变的。`string.Remove`等方法`string.Replace`不会更改*现有*字符串的内容 - 它们返回一个*新*字符串。

所以你想要这样的东西：

```
s = s.Remove(0, 15); 
```

或者，只需使用`Substring`：

```
s = s.Substring(15); 
```

# javascript - 为什么要一起使用 eval 和 parsonJson？

> ID：15049860
> 
> 赞同：0
> 
> 时间：2013-02-24T08:08:06.447
> 
> 标签：javascript, jquery

我认为 jquery $.parseJSON 可以将 jsons 字符串转换为 JavaScript 对象，为什么有人仍然一起使用 eval($.parseJSON) ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T08:44:37.440

似乎完全是多余的。

jQuery`parseJSON`函数在支持它的浏览器中使用原生 JSON。根据 Douglas Crockford（原始 JSON 规范的作者）的说法，*“parse 方法使用 eval 方法进行解析，用几个正则表达式保护它，以防止意外的代码执行危险。”* 如果浏览器本身不支持 JSON，则 jQuery 使用`new Function`构造函数返回解析后的对象，这与 eval() 等效，但有一些作用域差异。

# html - 单击按钮调用jquery ajax时，加载图像在长时间延迟后显示

> ID：15049862
> 
> 赞同：0
> 
> 时间：2013-02-24T08:08:23.590
> 
> 标签：html, jquery

我试图在单击按钮时显示加载图像，该按钮将通过 ajax 验证表单，但加载图像仅在一些延迟后显示（上传到服务器时显示图像需要 2 秒以上）。但我希望它在按钮单击事件的那一刻。我的代码如下。

```
$("#Save").click(function() {
    // shows theloading image (here I am expecting the loading image, it never shows.)
    $("#load_img").show();  
    // calls ajax for vaidation
    lookUpValidation($("#item1")) 
    // calls ajax for vaidation
    lookUpValidation($("#item2"))
})
function lookUpValidation(this_element,id) {
    url = "/validate/lookupid/"+id,
    lookUpValidationResult  = false;
    lookUpValidationData    = false;    
    if(this_element.val()!="") {
        $.ajax({
            url : url,
            type : "POST",
            async : false,
            data : {    
                "value"   : this_element.val()
            },      
            beforeSend : function(data) {
                // shows theloading image
                $("#load_img").show();
            },
            complete : function(data) {             
                if(data) {
                    var res = JSON.parse(data.responseText);
                    lookUpValidationData = res;
                        if(res.field) {    
                            lookUpValidationResult = 1;
                        }
                        else
                            // not found
                            lookUpValidationResult = 2;

                    }
                    else {
                        // not found
                        lookUpValidationResult = 2;
                    }       
                }
            });
        }
        else {
            // null
            lookUpValidationResult = 3;
        }
        return lookUpValidationResult;
} 
```

HTML

```
<div class="k-loading-image" id="load_img" style="display:none;">
    <div class="k-loading-color">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:28:06.237

Load that image already in your page with something like:

```
body {
   background: #fff url(path/to/load_image.gif?) no-repeat -1000px -1000px;
} 
```

BTW, you could validate all the items, process them and return an ok response (using json headers to avoid th parseJSON) to redirect with just one call.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:22:32.380

对服务器的调用是同步完成的，因此单击处理程序会阻止浏览器显示图像。

据我所知，没有跨浏览器的方式来强制和从 javascript 更新 ui。但是您可能会为此实施自定义解决方案。谷歌搜索应该有助于这一点。

处理这个问题的另一种方法是阻止对 click 事件的默认处理，并在所有异步验证成功后提交表单。

恕我直言，更好的解决方案是在用户填写表单时异步验证每个字段，并且仅在完成所有验证后才启用保存按钮。这可以使用`.blur()`这样来完成，以便在用户移动到下一个输入时验证每个输入。用户键入时的验证可以通过 和 的组合来`.keypress()`实现`setTimeout()`。下面是一个简短的例子来说明这一点：

```
<!doctype html>
<html lang="en">
<head></head>
<body>
    <form id="form" action="form.html">
        <label for="item1">Validate email on blur:</label><input id="item1" type="text"/><span id="item1-status">Invalid</span><br/>
        <lavel for="item2">Validate email while writing</lavel><input id="item2" type="text"/><span id="item2-status">Invalid</span><br/>
        <button id="Save" type="submit">Save</button>
    </form>

    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
    $(function () {
        var validState = {
            "set": function (name, state) {
                this[name] = state;
                updateUI();
            },
            "item1": null,
            "item2": null
        }

        function formIsValid() {
            var res = true;
            for(var name in validState) {
                res = res && validState[name];
            }

            return res;
        }

        function validString(val) {
            return val==null ? ""
                : val ? "Valid" : "Invalid"
        }

        function updateUI() {
            $("#item1-status").text( validString(validState.item1) );
            $("#item2-status").text( validString(validState.item2) );
            $("#Save").prop("disabled", !formIsValid());
        }

        function isEmail(str) {
            return /\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i.test(str);
        }

        function validateItem1() {
            validState.set("item1", isEmail($("#item1").val()));
        }
        function validateItem2() {
            validState.set("item2", isEmail($("#item2").val()));
        }

        // Validate after loosing focus
        $("#item1").blur(validateItem1);

        // Use timeout to validate when user has stopped typing
        $("#item2").blur(function() {
            var handle = $(this).data("validation-timer");
            if( handle ) clearTimeout(handle);
            validateItem2();
        }).keydown(function () {
            var self = $(this);
            var handle = self.data("validation-timer");
            if( handle ) clearTimeout(handle);
            var new_handle = setTimeout(validateItem2, 1000);
            self.data("validation-timer", new_handle);
        });

        updateUI();
    });
    </script>
</body>
</html> 
```

# algorithm - 检查边缘是否包含在线性时间的某些 MST 中（非不同值）

> ID：15049864
> 
> 赞同：23
> 
> 时间：2013-02-24T08:09:00.123
> 
> 标签：algorithm, minimum-spanning-tree

我正在研究一种算法来检查给定的边缘是否包含在所有可能的 mst 之一中。

对于这个问题，我们正在考虑非不同的值，并且我们的边 e 连接顶点 A 和 B。

到目前为止，我有： 如果一条从 A 到 B 的路径由权重小于或等于我们边 e 的权重的边组成——我们可以说边 e 不是任何 MST 的一部分。

我在这里遗漏了什么/关于更好算法的想法吗？

编辑：

对涉及循环属性的解决方案有何想法--因此，我们考虑所有边的权重小于我们正在考虑的边。如果我们可以用这些边创建一条从 A->B 的路径，我们可以说它不是任何 MST 的一部分？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-03-24T17:36:23.783

我们将使用[MST 循环属性](http://en.wikipedia.org/wiki/Minimum_spanning_tree#Cycle_property)来解决这个问题，它表示，“对于图中的任何循环 C，如果 C 的边 e 的权重大于 C 的所有其他边的权重，则该边不能属于MST。”

现在，运行以下`O(E+V)`算法来测试连接顶点 u 和 v 的边 E 是否会成为某个 MST 的一部分。

**第1步**

从边 E 的端点之一（u 或 v）运行 dfs，只考虑那些权重小于 E 的边。

**第2步**

**情况 1** 如果在这个 dfs 的末尾，顶点 u 和 v 连接起来，那么边 E 不能是某个 MST 的一部分。这是因为在这种情况下，图中肯定存在一个循环，边 E 具有最大权重，它不能是 MST 的一部分（来自循环属性）。

**情况 2** 但如果在 dfs 结束时 u 和 v 保持断开连接，则边 E 必须是某个 MST 的一部分，因为在这种情况下，E 始终不是它所属的所有循环中的最大权重边。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-05T01:29:18.760

我会写下我对这个问题的看法。
循环属性在这里非常重要：任何循环中的最大边不能在最小生成树中。
为了证明循环属性，假设有一个最小生成树 T 包含边 e，它是循环中最大的成本边。然后我们可以删除树T中的边e，我们得到两个集合S和T。那么这个循环必须包含连接集合S和T的除e之外的其他边。那么从cut性质来看，边e不能是在最小生成树中。

一旦我们有了循环属性，我们就继续断言某个边 e 是否在最小生成树中：
当且仅当存在时，边 e(v,w) 不属于任何最小生成树从 v 和 w 开始的一条路径，其中这条路径上的每条边都小于 e。

使用上述声明，算法如下：
删除所有大于 e 的边，现在我们有图 G'。运行 DFS 以检查 v 和 w 是否在 G' 中连接。如果 v 和 w 仍然连接，则边 e 不属于任何最小生成树。如果 v 和 w 没有连接，则边 e 在某个最小生成树中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T08:27:30.160

### 如果您从检查边缘的权重开始，那么很难达到您的 O(n) 限制。

为了检查一条边是否应该在 MST 中，您应该从检查将这条边添加到图中是否创建循环开始，我们都知道 MST 不能有任何循环。

*   如果是这样，那么只需找出至少两条路线中哪条路线的权重较小。如果你的边 e 的权重最小，那么它应该在 MST 中，否则它只是一个可以形成循环的边加上不是包含在图中的最佳边。

*   如果没有，它必须在 MST 中，除非以后有任何优势发挥作用并击败现有优势。

**通过这样做，您可以实现 O(n) 时间检查边缘是否在 MST 中。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T08:21:17.530

假设 AB 是您的图，而 e 是唯一的边。然后 e 是 MST 的一部分，但是有一条路径 AB 可以满足您的条件。

即使您要求 e 不是这样一条路径的一部分，它也是错误的。只需取一个在 A 和 B 之间具有相同权重的两条边 e1 和 e2 的图。

您还应该考虑一个图 ABC，它带有来自 AC 的附加边，其中所有边的权重为 1。无论您删除哪条边，您都可以获得最小生成树。因此，任何边都可以是 MST 的一部分。

# eclipse - 无法在 Eclipse 中启动 jboss 服务器

> ID：15049866
> 
> 赞同：2
> 
> 时间：2013-02-24T08:09:18.857
> 
> 标签：eclipse, jboss7.x

我正在开发一个 JSF 项目。我想使用 JBoss 作为服务器。我在 Eclipse 中定义了 jboss 服务器，但由于发生错误，我无法启动 JBoss 服务器。

错误：

```
 10:01:45,390 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
        10:01:51,312 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
        10:01:51,703 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
        10:02:03,109 ERROR [org.jboss.as.server] JBAS015956: Caught exception during boot: org.jboss.as.controller.persistence.ConfigurationPersistenceException: JBAS014676: Failed to parse configuration
            at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:141) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
            at org.jboss.as.server.ServerService.boot(ServerService.java:266) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
            at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:155) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
            at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_21]
        Caused by: java.lang.IllegalArgumentException: No enum const class java.util.concurrent.TimeUnit.MİLLİSECONDS
            at java.lang.Enum.valueOf(Unknown Source) [rt.jar:1.6.0_21]
            at org.jboss.as.threads.ThreadsParser.parseTimeSpec(ThreadsParser.java:874)
            at org.jboss.as.threads.ThreadsParser.parseUnboundedQueueThreadPool(ThreadsParser.java:518)
            at org.jboss.as.ejb3.subsystem.EJB3Subsystem12Parser.parseThreadPools(EJB3Subsystem12Parser.java:1103)
            at org.jboss.as.ejb3.subsystem.EJB3Subsystem12Parser.readElement(EJB3Subsystem12Parser.java:297)
            at org.jboss.as.ejb3.subsystem.EJB3Subsystem12Parser.readElement(EJB3Subsystem12Parser.java:55)
            at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110) [staxmapper-1.1.0.Final.jar:1.1.0.Final]
            at org.jboss.staxmapper.XMLExtendedStreamReaderImpl.handleAny(XMLExtendedStreamReaderImpl.java:69) [staxmapper-1.1.0.Final.jar:1.1.0.Final]
            at org.jboss.as.server.parsing.StandaloneXml.parseServerProfile(StandaloneXml.java:894) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
            at org.jboss.as.server.parsing.StandaloneXml.readServerElement_1_1(StandaloneXml.java:330) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
            at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:127) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
            at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:100) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
            at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110) [staxmapper-1.1.0.Final.jar:1.1.0.Final]
            at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69) [staxmapper-1.1.0.Final.jar:1.1.0.Final]
            at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:133) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
            ... 3 more

        10:02:03,171 FATAL [org.jboss.as.server] JBAS015957: Server boot has failed in an unrecoverable manner; exiting. See previous messages for details.
        10:02:03,218 INFO  [org.jboss.as] JBAS015950: JBoss AS 7.1.1.Final "Brontes" stopped in 0ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T19:34:32.873

是的，我已经下载了最新的 Jboss As 适配器。另一方面，我解决了这个问题。

错误：原因：java.lang.IllegalArgumentException：没有枚举常量类 java.util.concurrent.TimeUnit.MİLLİSECONDS

我在土耳其语的操作系统上工作。所以 Jboss 根据系统配置语言改变这个 Enum 的字符。

```
 MILLISECONDS -> MİLLİSECONDS 
```

我通过以下方式解决了这个问题：

打开 Eclipse。单击服务器栏。双击 Jboss 7.x。单击“打开启动配置。添加到 VM 参数行的“-Duser.language=en”末尾

如果你想图像，去 [http://blog.sahinyazilim.net/?p=123](http://blog.sahinyazilim.net/?p=123)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:53:46.260

您是否从 Eclipse Marketplace 下载了最新的 Jboss AS 适配器？服务器上是否已经部署了任何应用程序、连接池等？

# visual-studio-2010 - 引发异常“超出最大请求长度”时，Application_Error 未从 Global.asax 重定向到错误页面

> ID：15049869
> 
> 赞同：2
> 
> 时间：2013-02-24T08:09:31.630
> 
> 标签：visual-studio-2010, c#-4.0, file-upload, iis-7.5, asp.net-4.0

我正在使用 Visual Studio 2010/ASP.NET/C-Sharp 网站。

我基本上有一个 ASP.NET FileUpload 控件，为此我需要满足以下消息引发的异常：-
超出最大请求长度。

最大文件大小设置在 web.config 中设置如下：-

```
<system.webServer>
    <security>
          <requestFiltering>
        <requestLimits maxAllowedContentLength="41943040"/>
        </requestFiltering>
    </security>
</system.webServer> 
```

和

```
<system.web>
    <httpRuntime maxRequestLength="40960" requestValidationMode="2.0" />
</system.web> 
```

使用 Global.asax 在“Application_Error()”中验证文件大小，但它没有解决我的问题，当文件大小更大并且重定向到错误页面不起作用时，它在重定向时崩溃。

我想知道我怎样才能完成我的要求，因为这几天我就被困住了。请尽早在这方面帮助我。

我使用了以下代码，虽然它现在正在运行 Application_Error() 代码部分，但问题是它没有重定向到 About.aspx 页面。

```
 void Application_Error(object sender, EventArgs e) 
    { 
        // Code that runs when an unhandled error occurs
        Exception exc = Server.GetLastError();
        try
        {
            if (exc.Message.Contains("Maximum request length exceeded"))
            {
                Response.Redirect("~/About.aspx", false);                    
            }
            if (exc.InnerException.Message.Contains("Maximum request length exceeded"))
            {
                Response.Redirect("~/About.aspx", false);

            }
        }
        catch (Exception ex)
        {

        }
    } 
```

# xml - XNA XML 导入'找不到类型“Data.CompactLevelMap”。'

> ID：15049870
> 
> 赞同：1
> 
> 时间：2013-02-24T08:09:40.763
> 
> 标签：xml, import, xna

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace Data
{
    public class CompactLevelMap
    {
        public string name;
        public string species;
        public float weight;
        public int age;
    }
} 
```

这是 CompactLevelMap 类（它是一个临时的），在它自己的游戏库项目中。它已正确导入我的主游戏。

这是 XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<XnaContent>
  <Asset Type="Data.CompactLevelMap"> //The error occurs here
    <name>sdf</name>
    <species>sdf</species>
    <weight>32</weight>
    <age>12</age>
  </Asset>
</XnaContent> 
```

我将其加载到游戏中的方式是

```
CompactLevelMap compactLevel = new CompactLevelMap();

compactLevel = Content.Load<CompactLevelMap>("Level1"); 
```

我已经研究过这个问题，但我只是越来越困惑。顺便说一句，如果有人能告诉我如何导出 XML 文件，我也将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:49:16.740

`CompactLevelMap`您还需要添加对包含*内容*项目的程序集的引用，以便`XmlImporter`可以找到类型。右键单击内容项目并选择“添加引用”，然后选择“项目”选项卡。（你把它放在一个单独的程序集中的原因是你不会通过引用你的主游戏来创建循环依赖。）

* * *

要以这种格式导出 XML，您需要使用`IntermediateSerializer.Serialize`. 缺点是它`IntermediateSerializer`不是 XNA Framework 的一部分，而是 XNA Game Studio 的一部分——不可再分发。因此，您不能真正将其包含在游戏中——但如果您让您的用户也下载 VC# Express 和 XNA GS，则可能在编辑器中包含它。

它还需要针对完整的 .NET 4.0 框架（而不是客户端配置文件）。

[此答案](https://gamedev.stackexchange.com/a/11241/288)中有关此主题的更多详细信息。

# c# - 获取网络浏览器 cookie 以登录

> ID：15049877
> 
> 赞同：10
> 
> 时间：2013-02-24T08:10:31.563
> 
> 标签：c#, .net, cookies, webbrowser-control

我正在创建一个 Windows 窗体应用程序，其中有一个`webbrowser control`.

用户使用 登录后`webbrowser`，我也想使用相同或类似的帐户登录`Microsoft.Http.HttpClient`，`HttpWebRequest`它应该类似于`cURL`from `PHP`。

问题是该网页只允许每个帐户单点登录，如果我使用 HttpClient 登录，它将退出网络浏览器。

我想知道的是，是否有可能劫持`webbrowser`会话或获取`cookies`并在我的`HttpClient`或类似`api`的 .

我可以`webbrowser.Cookie`用来获取一些数据，但是如何将其推送到`HttpClient`？

这种事情甚至可能吗，我可以只拿 cookie 并使用相同的会话吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-24T14:25:20.703

从这里得到帮助：

[是否可以将身份验证从 Webbrowser 转移到 WebRequest](https://stackoverflow.com/questions/3382498/is-it-possible-to-transfer-authentication-from-webbrowser-to-webrequest)

Alkampfer 发布了解决方案。这正是我所需要的，并且奏效了。

此解决方案还需要`Http only`cookie。

> 您可以调用 GetUriCookieContainer 方法，该方法返回一个 CookieContainer，可用于后续调用 WebRequest 对象。

```
[DllImport("wininet.dll", SetLastError = true)]
    public static extern bool InternetGetCookieEx(
        string url, 
        string cookieName, 
        StringBuilder cookieData, 
        ref int size,
        Int32  dwFlags,
        IntPtr  lpReserved);

    private const Int32 InternetCookieHttponly = 0x2000;

/// <summary>
/// Gets the URI cookie container.
/// </summary>
/// <param name="uri">The URI.</param>
/// <returns></returns>
public static CookieContainer GetUriCookieContainer(Uri uri)
{
    CookieContainer cookies = null;
    // Determine the size of the cookie
    int datasize = 8192 * 16;
    StringBuilder cookieData = new StringBuilder(datasize);
    if (!InternetGetCookieEx(uri.ToString(), null, cookieData, ref datasize, InternetCookieHttponly, IntPtr.Zero))
    {
        if (datasize < 0)
            return null;
        // Allocate stringbuilder large enough to hold the cookie
        cookieData = new StringBuilder(datasize);
        if (!InternetGetCookieEx(
            uri.ToString(),
            null, cookieData, 
            ref datasize, 
            InternetCookieHttponly, 
            IntPtr.Zero))
            return null;
    }
    if (cookieData.Length > 0)
    {
        cookies = new CookieContainer();
        cookies.SetCookies(uri, cookieData.ToString().Replace(';', ','));
    }
    return cookies;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T08:46:15.180

可以，但是有点麻烦。将 InternetSetCookie 调用与来自 HttpWebRequest 的 CookieContainer 一起使用。

这是方法： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa385107 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385107(v=vs.85).aspx)

这是一个关于如何设置它的例子： http: [//social.msdn.microsoft.com/Forums/en-SG/csharpgeneral/thread/76a38eee-3ef6-4993-a54d-3fecc4eb6cff](http://social.msdn.microsoft.com/Forums/en-SG/csharpgeneral/thread/76a38eee-3ef6-4993-a54d-3fecc4eb6cff)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T08:23:40.150

我认为您可能将技术延伸得太远了。Windows 窗体中的 webbrowser 控件通常旨在为您提供本地文件或 Internet 的基本 html 呈现，但不应使用它来替换成熟的 web 浏览器。

如果要针对 SSO 提供程序进行身份验证，则必须使用正确的库，在本例中来自 Windows Identity Foundation，使用 Microsoft.IdentityModel，您将获得声明身份验证机制来处理来自 SSO 提供程序的声明。Cookies 不能在应用程序之间共享，事实上一些新的网络技术就是为了避免这种情况而设计的，所以在我看来，尝试使用 WIF 而不是网络浏览器控件。

希望能帮助到你，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-15T21:14:10.053

我这样做

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(address);
var cookies = new CookieContainer();
cookies.SetCookies(webBrowser.Document.Url, 
                          webBrowser.Document.Cookie.Replace(';', ','));
req.CookieContainer = cookies; 
```

# java - 在java中调用非静态方法

> ID：15049883
> 
> 赞同：0
> 
> 时间：2013-02-24T08:12:07.603
> 
> 标签：java, methods, static

我对 Java 中的静态方法有疑问。为什么我可以在另一个非静态方法中调用非静态方法而无需指定类的实例。例如，如果我有两个非静态方法 foo1() 和 foo2()，我可以说 foo2(){ foo() }。我不能在静态方法中做到这一点。例如 static void foo3(){ foo() }，这不会编译。这是。在非静态方法中调用其他方法时隐式？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T08:13:28.240

> 为什么我可以在另一个非静态方法中调用非静态方法而无需指定类的实例。

因为它隐含地调用它`this`：

```
public void foo1() {
    foo2();
} 
```

相当于：

```
public void foo1() {
    this.foo2();
} 
```

在静态方法中，*没有*隐`this`式用作调用的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T08:13:28.080

在非静态上下文中，您处于类的实例中。您可以在该类上调用其他非静态方法，因为您在`this`. 在静态上下文中，您没有`this`，因此您不能在没有特定实例的情况下调用方法。

# javascript - Meteor：登录按钮的 CSS 位置

> ID：15049886
> 
> 赞同：2
> 
> 时间：2013-02-24T08:12:16.567
> 
> 标签：javascript, meteor

我找不到`accounts-ui`软件包提供的登录按钮的 css 文件。

当我进去看`.meteor/local/build/static/packages`

我只看到`bootstrap`，我无法在我的 Mac 上进行全面搜索。

即使我在 javascript 控制台中看到它在`packages/accounts-ui`

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:26:57.017

原来accounts-ui包在：

```
.meteor/local/build/static-cacheable/packages 
```

并不是`static`

# node.js - 更好的 nodejs express 路由

> ID：15049887
> 
> 赞同：0
> 
> 时间：2013-02-24T08:13:07.787
> 
> 标签：node.js, routing, express

我是新来表达的，并且已经启动并运行了一个页面...

```
/*
 * Module dependencies
 */
var express = require('express'),
  stylus = require('stylus'),
  nib = require('nib'),
  app = express(),
  fs = require('fs'),
  path = require('path')

function compile(str, path) {
  return stylus(str).set('filename', path).use(nib())
}

app.set('views', __dirname + '/views')
app.set('view engine', 'jade')
app.use(express.logger('dev'))
app.use(stylus.middleware({
  src: __dirname + '/public',
  compile: compile
}))

app.use(express.static(__dirname + '/public'))

app.get('/', function(req, res) {
  res.render('index', {
    title: 'Home'
  })
})

app.use(function(req, res, next){

  // test if te file exists
  if(typeof fs.existsSync != "undefined"){
    exists = fs.existsSync
  } else {
    exists = path.existsSync
  }

  // if it does, then render it
  if(exists("views"+req.url+".jade")){
    res.render(req.url.replace(/^\//,''), { title: 'Home' })

  // otherwise render the error page
  } else {
    console.log("views"+req.url+".jade")
    res.render('404', { status: 404, url: req.url, title: '404 - what happened..?' });
  }

});

app.listen(3000) 
```

我遇到的问题是，我对文件系统的检查非常差，以确定页面是否存在。我认为有更好的方法来处理这个问题，但我的谷歌搜索没有产生任何结果。

如果我尝试使用`app.error`它会给我一条`undefined`消息。

我真的只想尝试呈现给定的任何地址，然后捕获错误，而不需要文件系统读取步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:51:20.530

您可以安装一个错误处理程序来捕获错误：

```
app.use(function(err, req, res, next) {
  // ... handle error, or not ...
  next(); // see below
}); 
```

理想情况下，您应该将其放置在尽可能靠近的位置`app.listen()`，使其成为链中最后的中间件之一。当您这样做时，您的“通用”处理程序可能如下所示：

```
app.use(function(req, res, next) {
  res.render(req.url.replace(/^\//,''), { title: 'Home' });
}); 
```

如果您调用`next()`错误处理程序（而不是以某种方式生成错误页面），失败的请求最终将导致 404（未找到）错误。根据您的情况，这可能会也可能不会。此外，*所有*错误都会被捕获，而不仅仅是缺少模板文件。

# regex - 正则表达式单独出现或出现空格时替换句点 (.) 但不是带小数点的数字 r

> ID：15049888
> 
> 赞同：5
> 
> 时间：2013-02-24T08:13:10.007
> 
> 标签：regex, r

给定输入向量 (iv)

```
iv <- c(.10,.15,"hello","."," . ",". ") 
```

我正在使用：

```
out <- sub(regexp,NA,iv) 
```

我想要这样的输出向量：

```
.10,.15,"hello",NA,NA,NA 
```

但是，不知道如何形成正则表达式来获得我需要的东西。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T09:50:03.527

您正在寻找的是`negative lookahead`正则表达式。您要检查`.`后面是否有 a`number (0-9)`并将其替换为`NA`. 如果这个逻辑是你想要的，那么它可以在 1 行中实现如下：

```
gsub("\\.(?![0-9])", NA, iv, perl=T)
# [1] "0.1"   "0.15"  "hello" NA      NA      NA 
```

逻辑：搜索后面没有数字的点并将其替换为`NA`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T08:26:12.643

如果你想用`NA`then 替换这些值，你将需要使用某种形式的赋值运算符。

一个简单的方法：

```
 iv[gsub(" ", "", iv)=="."] <- NA 
```

快速解释：

如果要替换的字符串都相同（即`"."`），那么您可以简单地调用 `iv[ iv=="."] <- NA`.

但是，为了捕捉所有多余的空格，您可以搜索无数的“。” 确保排除`.10`,`.15`等的组合，或者您可以删除所有空格，然后您可以使用更简单的情况`==`。

顺便说一句，如果你想在 R 的正则表达式中搜索一个句点，你需要转义正则表达式的句点`\.`，然后你需要转义`R`,`\\.`

* * *

编辑：请注意，上面的行不会永久删除`iv`. 看一下`gsub(" ", "", iv)=="."` 这会返回一个 T/F 向量，该向量又被用于过滤`iv`. 除`NA`数值外，`iv`保持不变。

**编辑＃2：** 如果您希望将更改保存到不同的向量，您可以使用以下内容：

```
 out <- iv
 out[gsub(" ", "", iv)=="."] <- NA 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T08:37:20.707

```
 gsub('^\\s*[.]\\s*$', 'NA',c(.10,.15,"hello","."," . ",". "))
  [1] "0.1"   "0.15"  "hello" "NA"    "NA"    "NA" 
```

**编辑**将“ `NA`”替换为`NA`

```
 gsub('^\\s*[.]\\s*$', NA,c(.10,.15,"hello","."," . ",". "))
[1] "0.1"   "0.15"  "hello" NA      NA      NA 
```

**编辑**使用`stringr`

```
library(stringr)
x <- c(.10,.15,"hello","."," . ",". ")
x[str_trim(x) == '.'] <- NA
x
[1] "0.1"   "0.15"  "hello" NA      NA      NA 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-24T08:20:12.137

正则表达式：

```
 "^ *\. *$" 
```

# c++ - 从 Visual Studio 2012 为 Windows 和 UNIX 机器编译项目

> ID：15049892
> 
> 赞同：1
> 
> 时间：2013-02-24T08:13:39.550
> 
> 标签：c++, windows, visual-studio, unix

我正在尝试找到一种使用 Visual Studio 2012（+我可能需要的任何其他东西）为 Windows 和 UNIX (AIX) 环境编译 C++ 项目的快速方法。

我主要对编译部分感兴趣，而不是代码本身所需的更改。如果 Visual Studio 没有支持，Cygwin 是一个好方法吗？有更好的吗？

谢谢！

*编辑：该项目旨在成为一个dll（等等） - 如果这改变了任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T08:38:55.343

简单的回答：你不能。

将您的 UNIX 和 Windows 开发环境分开，并通过一些软件管理存储库（例如 git 或 Perforce）共享代码。（我推荐后者。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T08:23:41.257

VS 不能生成 Unix 二进制文件。

作为 VS 构建的一部分，您可以运行一个脚本，该脚本将通过一些交叉编译器调用例如 Unix 编译。

**编辑**：根据 NikosC。注释 Cygwin 不生成 Unix 可执行文件。也许这个线程可以提供帮助：[如何在 Windows 上交叉编译 C 代码以使二进制文件也可以在 Unix（Solaris/HPUX/Linux）上运行？](https://stackoverflow.com/questions/579695/how-do-i-cross-compile-c-code-on-windows-for-a-binary-to-also-be-run-on-unix-so)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-07T14:44:19.150

您可以尝试相同的 netbeans 远程构建插件和调试。下面是相同的链接，我正在使用它在 linux 和 solaris 上构建。对于 Windows，您可以运行 sshserver

[https://netbeans.org/kb/docs/cnd/remotedev-tutorial.html](https://netbeans.org/kb/docs/cnd/remotedev-tutorial.html) 我希望这会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-23T15:39:05.313

对于 linux，从 Visual Studio 2017 开始，这已成为可能！但是，您确实需要访问 linux 机器，在该机器上将执行 linux 的实际构建。

> Visual Studio 2017 引入了 C/C++ Linux 开发工作负载。要安装它，请启动 Visual Studio 安装程序并选择安装或修改现有安装。滚动到底部。在“其他工具集”部分下，您将找到使用 C++ 进行 Linux 开发。
> 
> 您可以使用任何安装了 SSH、gdbserver 和编译器的 Linux 发行版。在您的 Linux 环境中，这很简单：
> 
> ```
> sudo apt install -y build-essential gdbserver 
> ```
> 
> 要在 Visual Studio 中创建新的 Linux 控制台应用程序，请在 New Project > Visual C++ > Cross Platform > Linux 下选择该项目类型。

有关更多详细信息，请查看[此博客文章](https://devblogs.microsoft.com/cppblog/linux-development-with-c-in-visual-studio/)

# mysql - 尝试使用 capistrano 进行部署 - 不断收到 pg bundle 错误 - 但我没有使用 pg

> ID：15049894
> 
> 赞同：0
> 
> 时间：2013-02-24T08:13:49.927
> 
> 标签：mysql, ruby-on-rails-3, gem, capistrano, bundler

大家好，我一直在尝试使用 capistrano 部署我的应用程序。但是我一直收到以下错误，不知道如何解决它。

```
* executing "cd /var/www/html/mysite.com/releases/20130224075438 && bundle install --gemfile /var/www/html/mysite.com/releases/20130224075438/Gemfile --path /var/www/html/mysite.com/shared/bundle --deployment --quiet --without development test"
    servers: ["166.78.22.204"]
    [166.78.22.204] executing command
 ** [out :: 166.78.22.204] Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
 ** [out :: 166.78.22.204] 
 ** [out :: 166.78.22.204] /usr/local/bin/ruby extconf.rb
 ** [out :: 166.78.22.204] checking for pg_config... no
 ** [out :: 166.78.22.204] No pg_config... trying anyway. If building fails, please try again with
 ** [out :: 166.78.22.204] --with-pg-config=/path/to/pg_config
 ** [out :: 166.78.22.204] checking for libpq-fe.h... no
 ** [out :: 166.78.22.204] Can't find the 'libpq-fe.h header
 ** [out :: 166.78.22.204] *** extconf.rb failed ***
 ** [out :: 166.78.22.204] Could not create Makefile due to some reason, probably lack of
 ** [out :: 166.78.22.204] necessary libraries and/or headers.  Check the mkmf.log file for more
 ** [out :: 166.78.22.204] details.  You may need configuration options.
 ** [out :: 166.78.22.204] 
 ** [out :: 166.78.22.204] Provided configuration options:
 ** [out :: 166.78.22.204] --with-opt-dir
 ** [out :: 166.78.22.204] --with-opt-include
 ** [out :: 166.78.22.204] --without-opt-include=${opt-dir}/include
 ** [out :: 166.78.22.204] --with-opt-lib
 ** [out :: 166.78.22.204] --without-opt-lib=${opt-dir}/lib
 ** [out :: 166.78.22.204] --with-make-prog
 ** [out :: 166.78.22.204] --without-make-prog
 ** [out :: 166.78.22.204] --srcdir=.
 ** [out :: 166.78.22.204] --curdir
 ** [out :: 166.78.22.204] --ruby=/usr/local/bin/ruby
 ** [out :: 166.78.22.204] --with-pg
 ** [out :: 166.78.22.204] --without-pg
 ** [out :: 166.78.22.204] --with-pg-dir
 ** [out :: 166.78.22.204] --without-pg-dir
 ** [out :: 166.78.22.204] --with-pg-include
 ** [out :: 166.78.22.204] --without-pg-include=${pg-dir}/include
 ** [out :: 166.78.22.204] --with-pg-lib
 ** [out :: 166.78.22.204] --without-pg-lib=${pg-dir}/lib
 ** [out :: 166.78.22.204] --with-pg-config
 ** [out :: 166.78.22.204] --without-pg-config
 ** [out :: 166.78.22.204] --with-pg_config
 ** [out :: 166.78.22.204] --without-pg_config
 ** [out :: 166.78.22.204] 
 ** [out :: 166.78.22.204] 
 ** [out :: 166.78.22.204] Gem files will remain installed in /var/www/html/mysite.com/shared/bundle/ruby/1.9.1/gems/pg-0.14.1 for inspection.
 ** [out :: 166.78.22.204] Results logged to /var/www/html/mysite.com/shared/bundle/ruby/1.9.1/gems/pg-0.14.1/ext/gem_make.out
 ** [out :: 166.78.22.204] An error occurred while installing pg (0.14.1), and Bundler cannot continue.
 ** [out :: 166.78.22.204] Make sure that `gem install pg -v '0.14.1'` succeeds before bundling.
    command finished in 95532ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /var/www/html/mysite.com/releases/20130224075438; true"
    servers: ["166.78.22.204"]
    [166.78.22.204] executing command
    command finished in 712ms
failed: "sh -c 'cd /var/www/html/mysite.com/releases/20130224075438 && bundle install --gemfile /var/www/html/fltctr.com/releases/20130224075438/Gemfile --path /var/www/html/fltctr.com/shared/bundle --deployment --quiet --without development test'" on 166.78.22.204 
```

我可以说 pg 无法安装，但是我的应用程序使用的是 mysql 而根本不是 pg。这是我的宝石文件。

```
require 'rbconfig'
HOST_OS = RbConfig::CONFIG['host_os']
source 'https://rubygems.org'

gem 'rails', '3.2.3'

gem 'mysql2'

gem 'activerecord-postgresql-adapter'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end
gem 'jquery-rails'
gem 'jquery-ui-rails'
gem "thin", ">= 1.5.0", :group => :production
gem "haml", ">= 3.1.7"
gem "haml-rails", ">= 0.3.5", :group => :development
gem "hpricot", ">= 0.8.6", :group => :development
gem "ruby_parser", ">= 3.1.1", :group => :development
gem "rspec-rails", ">= 2.11.4", :group => [:development, :test]
gem "database_cleaner", ">= 0.9.1", :group => :test
gem "email_spec", ">= 1.4.0", :group => :test
gem "cucumber-rails", ">= 1.3.0", :group => :test, :require => false
gem "launchy", ">= 2.1.2", :group => :test
gem "capybara", ">= 2.0.1", :group => :test
gem "factory_girl_rails", ">= 4.1.0", :group => [:development, :test]
gem "bootstrap-sass", ">= 2.2.2.0"
gem "devise", ">= 2.1.2"
gem "cancan", ">= 1.6.8"
gem "rolify", ">= 3.2.0"
gem "simple_form", ">= 2.0.4"
gem "quiet_assets", ">= 1.0.1", :group => :development
gem "figaro", ">= 0.5.0"
gem "better_errors", ">= 0.3.2", :group => :development
gem "binding_of_caller", ">= 0.6.8", :group => :development
gem "libv8", ">= 3.11.8"
gem "therubyracer", ">= 0.11.0", :group => :assets, :platform => :ruby, :require => "v8"
#gem 'wkhtmltopdf'
#gem 'wicked_pdf'
gem "handles_sortable_columns"

#custom gems go here
gem 'best_in_place'
gem 'bootstrap-datepicker-rails'
gem 'state_machine'
gem 'bootswatch-rails'
gem 'acts_as_commentable'
#gem 'wkhtmltopdf-binary'
#gem "pdfkit"  
gem 'kaminari'
gem 'has_scope'
#gem 'class-table-inheritance'
gem 'citier'
gem 'rails_sql_views', :git => 'git://github.com/DouweM/rails_sql_views.git'#,  :git=>'git://github.com/flwyd/rails_sql_views.git' #'git://github.com/DouweM/rails_sql_views.git' #'git://github.com/morgz/rails_sql_views.git' #
gem 'country_select'

group :development do
  gem 'rack-mini-profiler'
  gem 'spork', '~> 1.0rc'
  gem "guard", ">= 0.6.2"
  gem 'guard-spork'
  gem 'guard-livereload'
  gem "guard-bundler", ">= 0.1.3"
  gem "guard-rails", ">= 0.0.3"
  gem "guard-rspec", ">= 0.4.3"
  gem "guard-cucumber", ">= 0.6.1"
  case HOST_OS
  when /darwin/i
    gem 'rb-fsevent'
    gem 'growl'
  when /linux/i
    gem 'libnotify'
    gem 'rb-inotify'
  when /mswin|windows/i
    gem 'rb-fchange'
    gem 'win32console'
    gem 'rb-notifu'
  end
end

group :test do
  gem "shoulda-matchers"
  gem 'simplecov', :require => false

end 
```

我正在部署到云服务器 - 关于可能出现问题的任何想法？每次我使用时都会发生这种情况`cap deploy`

这是我的 Gemfile.lock

```
 GIT
  remote: git://github.com/DouweM/rails_sql_views.git
  revision: 0cf1af369a5f6553d33c90a13d331ea49e607d26
  specs:
    rails_sql_views (0.8.0.epublishing)
      activerecord

GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.3)
      actionpack (= 3.2.3)
      mail (~> 2.4.4)
    actionpack (3.2.3)
      activemodel (= 3.2.3)
      activesupport (= 3.2.3)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.1)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.1.2)
    activemodel (3.2.3)
      activesupport (= 3.2.3)
      builder (~> 3.0.0)
    activerecord (3.2.3)
      activemodel (= 3.2.3)
      activesupport (= 3.2.3)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activerecord-postgresql-adapter (0.0.1)
      pg
    activeresource (3.2.3)
      activemodel (= 3.2.3)
      activesupport (= 3.2.3)
    activesupport (3.2.3)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    acts_as_commentable (4.0.0)
    addressable (2.3.3)
    arel (3.0.2)
    bcrypt-ruby (3.0.1)
    best_in_place (2.1.0)
      jquery-rails
      rails (~> 3.1)
    better_errors (0.6.0)
      coderay (>= 1.0.0)
      erubis (>= 2.6.6)
    binding_of_caller (0.7.1)
      debug_inspector (>= 0.0.1)
    bootstrap-datepicker-rails (0.6.42)
      railties (>= 3.0)
    bootstrap-sass (2.3.0.1)
      sass (~> 3.2)
    bootswatch-rails (0.4.0)
      railties (>= 3.1)
    bourne (1.1.2)
      mocha (= 0.10.5)
    builder (3.0.4)
    cancan (1.6.9)
    capybara (2.0.2)
      mime-types (>= 1.16)
      nokogiri (>= 1.3.3)
      rack (>= 1.0.0)
      rack-test (>= 0.5.4)
      selenium-webdriver (~> 2.0)
      xpath (~> 1.0.0)
    childprocess (0.3.8)
      ffi (~> 1.0, >= 1.0.11)
    citier (0.1.15)
      rails_sql_views
    coderay (1.0.9)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.4.0)
    country_select (1.1.3)
    cucumber (1.2.1)
      builder (>= 2.1.2)
      diff-lcs (>= 1.1.3)
      gherkin (~> 2.11.0)
      json (>= 1.4.6)
    cucumber-rails (1.3.0)
      capybara (>= 1.1.2)
      cucumber (>= 1.1.8)
      nokogiri (>= 1.5.0)
    daemons (1.1.9)
    database_cleaner (0.9.1)
    debug_inspector (0.0.2)
    devise (2.2.3)
      bcrypt-ruby (~> 3.0)
      orm_adapter (~> 0.1)
      railties (~> 3.1)
      warden (~> 1.2.1)
    diff-lcs (1.1.3)
    em-websocket (0.4.0)
      eventmachine (>= 0.12.9)
      http_parser.rb (~> 0.5.3)
    email_spec (1.4.0)
      launchy (~> 2.1)
      mail (~> 2.2)
    erubis (2.7.0)
    eventmachine (1.0.0)
    execjs (1.4.0)
      multi_json (~> 1.0)
    factory_girl (4.2.0)
      activesupport (>= 3.0.0)
    factory_girl_rails (4.2.1)
      factory_girl (~> 4.2.0)
      railties (>= 3.0.0)
    ffi (1.4.0)
    figaro (0.5.4)
      rails (~> 3.0)
    gherkin (2.11.6)
      json (>= 1.7.6)
    guard (1.6.2)
      listen (>= 0.6.0)
      lumberjack (>= 1.0.2)
      pry (>= 0.9.10)
      terminal-table (>= 1.4.3)
      thor (>= 0.14.6)
    guard-bundler (1.0.0)
      bundler (~> 1.0)
      guard (~> 1.1)
    guard-cucumber (1.3.2)
      cucumber (>= 1.2.0)
      guard (>= 1.1.0)
    guard-livereload (1.1.3)
      em-websocket (>= 0.2.0)
      guard (>= 1.5.0)
      multi_json (~> 1.0)
    guard-rails (0.3.1)
      guard (>= 0.2.2)
      version (>= 1.0.0)
    guard-rspec (2.4.1)
      guard (>= 1.1)
      rspec (~> 2.11)
    guard-spork (1.4.2)
      childprocess (>= 0.2.3)
      guard (>= 1.1)
      spork (>= 0.8.4)
    haml (4.0.0)
      tilt
    haml-rails (0.4)
      actionpack (>= 3.1, < 4.1)
      activesupport (>= 3.1, < 4.1)
      haml (>= 3.1, < 4.1)
      railties (>= 3.1, < 4.1)
    handles_sortable_columns (0.1.3)
    has_scope (0.5.1)
    hike (1.2.1)
    hpricot (0.8.6)
    http_parser.rb (0.5.3)
    i18n (0.6.1)
    journey (1.0.4)
    jquery-rails (2.2.1)
      railties (>= 3.0, < 5.0)
      thor (>= 0.14, < 2.0)
    jquery-ui-rails (4.0.1)
      jquery-rails
      railties (>= 3.1.0)
    json (1.7.7)
    kaminari (0.14.1)
      actionpack (>= 3.0.0)
      activesupport (>= 3.0.0)
    launchy (2.2.0)
      addressable (~> 2.3)
    libnotify (0.8.0)
      ffi (>= 1.0.11)
    libv8 (3.11.8.13)
    listen (0.7.2)
    lumberjack (1.0.2)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    metaclass (0.0.1)
    method_source (0.8.1)
    mime-types (1.21)
    mocha (0.10.5)
      metaclass (~> 0.0.1)
    multi_json (1.6.1)
    mysql2 (0.3.11)
    nokogiri (1.5.6)
    orm_adapter (0.4.0)
    pg (0.14.1)
    polyglot (0.3.3)
    pry (0.9.12)
      coderay (~> 1.0.5)
      method_source (~> 0.8)
      slop (~> 3.4)
    quiet_assets (1.0.2)
      railties (>= 3.1, < 5.0)
    rack (1.4.5)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-mini-profiler (0.1.23)
      rack (>= 1.1.3)
    rack-ssl (1.3.3)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.3)
      actionmailer (= 3.2.3)
      actionpack (= 3.2.3)
      activerecord (= 3.2.3)
      activeresource (= 3.2.3)
      activesupport (= 3.2.3)
      bundler (~> 1.0)
      railties (= 3.2.3)
    railties (3.2.3)
      actionpack (= 3.2.3)
      activesupport (= 3.2.3)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (~> 0.14.6)
    rake (10.0.3)
    rb-inotify (0.9.0)
      ffi (>= 0.5.0)
    rdoc (3.12.1)
      json (~> 1.4)
    ref (1.0.2)
    rolify (3.2.0)
    rspec (2.12.0)
      rspec-core (~> 2.12.0)
      rspec-expectations (~> 2.12.0)
      rspec-mocks (~> 2.12.0)
    rspec-core (2.12.2)
    rspec-expectations (2.12.1)
      diff-lcs (~> 1.1.3)
    rspec-mocks (2.12.2)
    rspec-rails (2.12.2)
      actionpack (>= 3.0)
      activesupport (>= 3.0)
      railties (>= 3.0)
      rspec-core (~> 2.12.0)
      rspec-expectations (~> 2.12.0)
      rspec-mocks (~> 2.12.0)
    ruby_parser (3.1.1)
      sexp_processor (~> 4.1)
    rubyzip (0.9.9)
    sass (3.2.6)
    sass-rails (3.2.6)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    selenium-webdriver (2.30.0)
      childprocess (>= 0.2.5)
      multi_json (~> 1.0)
      rubyzip
      websocket (~> 1.0.4)
    sexp_processor (4.1.5)
    shoulda-matchers (1.4.2)
      activesupport (>= 3.0.0)
      bourne (~> 1.1.2)
    simple_form (2.0.4)
      actionpack (~> 3.0)
      activemodel (~> 3.0)
    simplecov (0.7.1)
      multi_json (~> 1.0)
      simplecov-html (~> 0.7.1)
    simplecov-html (0.7.1)
    slop (3.4.3)
    spork (1.0.0rc3)
    sprockets (2.1.2)
      hike (~> 1.2)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    state_machine (1.1.2)
    terminal-table (1.4.5)
    therubyracer (0.11.3)
      libv8 (~> 3.11.8.12)
      ref
    thin (1.5.0)
      daemons (>= 1.0.9)
      eventmachine (>= 0.12.6)
      rack (>= 1.0.0)
    thor (0.14.6)
    tilt (1.3.3)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.35)
    uglifier (1.3.0)
      execjs (>= 0.3.0)
      multi_json (~> 1.0, >= 1.0.2)
    version (1.0.0)
    warden (1.2.1)
      rack (>= 1.0)
    websocket (1.0.7)
    xpath (1.0.0)
      nokogiri (~> 1.3)

PLATFORMS
  ruby

DEPENDENCIES
  activerecord-postgresql-adapter
  acts_as_commentable
  best_in_place
  better_errors (>= 0.3.2)
  binding_of_caller (>= 0.6.8)
  bootstrap-datepicker-rails
  bootstrap-sass (>= 2.2.2.0)
  bootswatch-rails
  cancan (>= 1.6.8)
  capybara (>= 2.0.1)
  citier
  coffee-rails (~> 3.2.1)
  country_select
  cucumber-rails (>= 1.3.0)
  database_cleaner (>= 0.9.1)
  devise (>= 2.1.2)
  email_spec (>= 1.4.0)
  factory_girl_rails (>= 4.1.0)
  figaro (>= 0.5.0)
  guard (>= 0.6.2)
  guard-bundler (>= 0.1.3)
  guard-cucumber (>= 0.6.1)
  guard-livereload
  guard-rails (>= 0.0.3)
  guard-rspec (>= 0.4.3)
  guard-spork
  haml (>= 3.1.7)
  haml-rails (>= 0.3.5)
  handles_sortable_columns
  has_scope
  hpricot (>= 0.8.6)
  jquery-rails
  jquery-ui-rails
  kaminari
  launchy (>= 2.1.2)
  libnotify
  libv8 (>= 3.11.8)
  mysql2
  quiet_assets (>= 1.0.1)
  rack-mini-profiler
  rails (= 3.2.3)
  rails_sql_views!
  rb-inotify
  rolify (>= 3.2.0)
  rspec-rails (>= 2.11.4)
  ruby_parser (>= 3.1.1)
  sass-rails (~> 3.2.3)
  shoulda-matchers
  simple_form (>= 2.0.4)
  simplecov
  spork (~> 1.0rc)
  state_machine
  therubyracer (>= 0.11.0)
  thin (>= 1.5.0)
  uglifier (>= 1.0.3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:28:55.300

您的 Gemfile 包括`activerecord-postgresql-adapter`哪些取决于 pg gem。

# import - 如何使用自定义包

> ID：15049903
> 
> 赞同：193
> 
> 时间：2013-02-24T08:15:47.617
> 
> 标签：import, package, go

我正在尝试在 Go 中创建和使用自定义包。这可能是非常明显的事情，但我找不到太多关于此的信息。基本上，我在同一个文件夹中有这两个文件：

**mylib.go**

```
package mylib

type SomeType struct {

} 
```

**main.go**

```
package main

import (
    "mylib"
)

func main() {

} 
```

当我尝试时`go run main.go`，我收到此错误：

```
main.go:4:2: import "mylib": cannot find package 
```

我试图先运行`go build mylib.go`，但它似乎没有做任何事情（没有生成文件，没有错误消息）。所以知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2013-02-24T11:14:18.573

首先，一定要阅读并理解[“如何编写 Go 代码”](http://golang.org/doc/code.html)文档。

实际答案取决于您的“自定义包”的性质。

如果它打算用于一般用途，请考虑采用所谓的[“Github 代码布局”](http://code.google.com/p/go-wiki/wiki/GithubCodeLayout)。基本上，您使您的库成为一个单独的`go get`-table 项目。

如果你的库是供内部使用的，你可以这样：

1.  将包含库文件的目录放在项目目录下。
2.  在项目的其余部分，使用相对于包含项目的工作区根目录的路径来引用库。

展示：

```
src/
  myproject/
    mylib/
      mylib.go
      ...
    main.go 
```

现在，在顶层`main.go`，你可以`import "myproject/mylib"`并且它会正常工作。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2013-08-13T05:27:37.790

对于这种文件夹结构：

```
main.go
mylib/
  mylib.go 
```

最简单的方法是使用这个：

```
import (
    "./mylib"
) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-12-24T18:11:44.930

我是一位经验丰富的程序员，但是，对 Go 世界很陌生！而且我承认我在理解 Go 时遇到了一些困难......在尝试将我的 go 文件组织到子文件夹中时，我也遇到了同样的问题。我这样做的方式：

GO_Directory（分配给 $GOPATH 的那个）

```
GO_Directory //the one assigned to $GOPATH
__MyProject
_____ main.go
_____ Entites
_____ Fiboo // in my case, fiboo is a database name
_________ Client.go // in my case, Client is a table name 
```

在文件 MyProject\Entities\Fiboo\Client.go

```
package Fiboo

type Client struct{
    ID int
    name string
} 
```

在文件 MyProject\main.go

```
package main

import(
    Fiboo "./Entity/Fiboo" 
)

var TableClient  Fiboo.Client

func main(){
    TableClient.ID = 1
    TableClient.name = 'Hugo'

    // do your things here
} 
```

（我在 Ubuntu 16.04 上运行 Go 1.9）

请记住，我是 Go 新手。如果我在做的是不好的做法，请告诉我！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-07-06T15:08:56.987

对于托管在 GitHub 上的项目，人们通常会这样做：</p>

```
github.com/
  laike9m/
    myproject/
      mylib/
        mylib.go
        ...
      main.go 
```

mylib.go

```
package mylib

... 
```

main.go

```
import "github.com/laike9m/myproject/mylib"

... 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-22T16:14:35.473

另一种解决方案：
添加`src/myproject`到 $GOPATH.

然后`import "mylib"`会编译。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-07-21T17:14:43.260

我尝试了很多方法，但最好的方法是使用 go.mod 并放置

```
module nameofProject.com 
```

然后我从我使用的同一个项目中导入

```
import("nameofProject.com/folder") 
```

在任何地方创建项目都非常有用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-01T10:33:36.443

对于遇到这个问题的人，需要先初始化 go 模块，然后才能使用自定义包。

例如您的代码目录是：`../mycode/main.go`. 现在您要创建`diffcode`自定义包并将其导入到 main.js 中。您首先需要运行命令`go mod init mycode`（确保您在`../mycode`目录下）。现在你创建了包`diffcode`，它有一些文件。要导入此包，您需要将其放入`main.go`: `module/package`。在这种情况下，`mycode/diffcode`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-17T05:47:31.800

这里的基本问题是定制将包编译为库二进制文件的想法，然后在一些新的 go 项目中将二进制代码作为“net/http”或“fmt”等第三方库导入，而不是使用原始的 go 代码。我想知道这对于 Go 编程是否可行。

# ember.js - 使用 Ember.Select 绑定到具有 itemController 的 ArrayController

> ID：15049904
> 
> 赞同：1
> 
> 时间：2013-02-24T08:16:04.993
> 
> 标签：ember.js

我有一个**Ember.Select**视图，它有一个到 ArrayController 的 contentBinding。当我在 ArrayController 上设置 itemController 时，它突然抛出这个错误： **Uncaught TypeError: Cannot call method 'child' of null**

这是一个极简主义的例子：

```
<script type="text/x-handlebars" data-template-name="application">
    {{view Ember.Select viewName="select"
                    contentBinding="App.monstersController"
                    optionLabelPath="content.name"
                    optionValuePath="content.id"
                    prompt="Pick a monster:"
                    selectionBinding="App.stateController.selectedMonster"}}

</script> 
```

和javascript：

```
window.App = Em.Application.create();

App.ApplicationController = Em.Controller.extend({});

App.ApplicationView = Em.View.extend({
    templateName: 'application'
});

App.data = [{
    id: 1,
    name: "Grog",
    strength: 10,
    species: "Troll"
}, {
    id: 2,
    name: "Ognog",
    strength: 8,
    species: "Goblin"
}, {
    id: 3,
    name: "Fred",
    strength: 3,
    species: "Human"
}];

App.stateController = Em.Controller.create({
    selectedMonster: null
});

App.MonsterController = Em.ObjectController.extend({
    name: function() {
        return "Controller Modified " + this.get('name');
    }.property('content.name')
});

App.MonstersController = Em.ArrayController.extend({
    content: App.data/*,
    itemController: "monster"*/
});

App.monstersController = App.MonstersController.create({}); 
```

这是一个小提琴，演示了问题：http: [//jsfiddle.net/Malkyne/AkHhF/](http://jsfiddle.net/Malkyne/AkHhF/)

有谁知道这里发生了什么，或者我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:34:25.920

经过多次摆弄（哈！），我想我有一个可行的解决方案。以下是步骤：

1.) 添加一个**ApplicationRoute**规范来设置控制器。看起来像这样：

```
App.ApplicationRoute = Ember.Route.extend({
  setupController: function() {
    this.controllerFor('monsters').set('content', App.data);
  }
}); 
```

2.) 从**App.MonstersController中删除****内容**元素，因为该内容现在正在路由器中分配。现在，它看起来像这样：

 **```
App.MonstersController = Em.ArrayController.extend({
    itemController: 'monster'
}); 
```

3.) 将 Ember.Select 视图完全从模板中拉出，因为即使我称该视图为“怪物”，我似乎也无法找到将其内容绑定到怪物集合的方法。用这个替换它：

```
<script type="text/x-handlebars" data-template-name="application">    
    {{render monsters}}
</script> 
```

4.) 现在，让我们扩展 Ember.Select 来创建我们的新视图：

```
App.MonstersView = Ember.Select.extend({
    contentBinding: 'this.controller',
    prompt: "Pick a monster:",
    selectionBinding: 'App.stateController.selectedMonster',
    optionLabelPath: 'content.name',
    optionValuePath: 'content.id'
}); 
```

这是一个工作小提琴：http: [//jsfiddle.net/Malkyne/KGJXE/](http://jsfiddle.net/Malkyne/KGJXE/)

所以，这个故事的寓意是，在*最新*版本的 Ember 中，App 命名空间中的悬空控制器似乎表现不佳。如果您在 Route **setupController**函数中初始化控制器，它们的行为似乎要好得多。**

# html - Firefox 的奇怪边框问题

> ID：15049910
> 
> 赞同：5
> 
> 时间：2013-02-24T08:17:14.943
> 
> 标签：html, css, css-shapes

我正在尝试使用 CSS 创建三角形样式，但是如下所示，边框上出现了一条黑线。它只出现在 Firefox 中，而不出现在 Chrome 或 IE 中。

![在此处输入图像描述](../Images/b27090b3108fbc81dd480844eb49bc16.png)

是什么导致了这种情况以及如何解决这个问题？

这是我的代码：

**HTML：**

```
<div>
    <h1>Hello</h1>
</div> 
```

**CSS：**

```
div{
    margin: 20px;

}
h1{
    background: yellow;
    padding: 30px;  
    position: relative;
    color: #FFFFFF;
    float: left;
    margin-right: 20px;  
}

h1:before{
    position: absolute;
    left: 100%;
    top: 0;
    content: "";
    border: 20px solid yellow;
    border-width: 0px 50px 80px 0px;
    border-color: transparent transparent yellow transparent;
} 
```

**JSFiddle：http:** [//jsfiddle.net/TrQEH/](http://jsfiddle.net/TrQEH/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T08:41:16.640

尝试改变：

```
border-color: transparent transparent yellow transparent; 
```

到

```
border-color: transparent #FFF yellow transparent; 
```

更新[了 jsFiddle](http://jsfiddle.net/TrQEH/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T03:18:53.180

您可以将模糊边框声明为`border-style:inset`，并在 Firefox 中将其清除。只需从以下位置更改您的样式：

```
border: 20px solid yellow;  
border-width: 0px 50px 80px 0px;  
border-color: transparent transparent yellow transparent;</code> 
```

到

```
border-style:solid inset solid solid;  
border-width: 0px 50px 80px 0px;  
border-color: transparent transparent yellow transparent; 
```

在 Windows 7 上的 ff19 和 chrome 版本 26.0.1410.12 dev-m 中为我工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T09:44:22.307

尝试：边框样式：实心虚线

# ruby-on-rails-3.2 - Rails 3.2.x 渲染另一个具有特定 id 的模板视图

> ID：15049911
> 
> 赞同：0
> 
> 时间：2013-02-24T08:17:16.643
> 
> 标签：ruby-on-rails-3.2, rspec2, rails-activerecord, actionview, rails-models

我正在尝试以下代码字符串：

`class AppointmentsController < ApplicationController`

```
def create
    @appointment = Appointment.new(params[:appointment])
    @current_patient = @appointment.patient_id
    if @appointment.save
        flash[:success] = "Appointment scheduled!"
        redirect_to patient_path(@current_patient)
    else
        render 'patients/show'
    end
end 
```

目前正在通过三个控制器。其中两个似乎很重要。

```
class Appointment < ActiveRecord::Base
  attr_accessible :appointment_date, :appointment_notes, :appointment_time, :procedure_id, :patient_id
  belongs_to :patient
  belongs_to :procedure

  validates :procedure_id, presence: true
  validates :patient_id, presence: true
  validates :appointment_date, presence: true
  validates :appointment_time, presence: true 
```

```
class Patient < ActiveRecord::Base
  attr_accessible :address1, :address2, :city, :comment, :email, :first_name, :init_date, :init_time, :last_name, :mobile, :notes, :phone, :state, :zip
  before_validation :upcase_patient
  before_save { self.email.downcase! }
  has_many :appointments, dependent: :destroy
  has_many :procedures, through: :appointments 
```

我的创建方法效果很好。但是，当我提交数据并且未在约会中通过验证时，它应该呈现正确的 app.dev/patients/:id 页面，其中 :id 是我正在使用的当前页面。有问题的表格是创建约会的表格（通过患者/显示视图）。当提交不正确或零数据并且需要存在：true 时，我希望呈现相同的页面。我目前收到的是：

rspec

```
ActionView::Template::Error:
   undefined method `first_name' for nil:NilClass
 # ./app/views/patients/show.html.erb:1:in `_app_views_patients_show_html_erb__4137167421928365638_70201005779320'
 # ./app/controllers/appointments_controller.rb:11:in `create' 
```

我怀疑这与能够在正确的路径上相应地设置渲染有关，特别是调用正确的患者/ID。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T12:44:15.413

您最可能的问题是您使用的变量在`patients/show`验证失败并呈现模板时未在创建操作中声明。解决此问题的最佳方法是，如果验证失败，则在 create 操作上声明用于 show 操作的相同变量集

```
def show
  @patients = ...
  @files = ...
end

def create
  if @object_that_fails_validation.save
  else
    @patient = ...
    @files = ...
    #render the show action
  end
end 
```

如果您觉得这不是 DRY，尤其是当您声明大量变量时，请通过 ajax 提交表单或将变量移动到其他方法

```
def show
  set_variables
end

def create
  if @object_that_fails_validation.save
  else
    set_variables
    #render the show action
  end
end

protected

def set_variable
  @patient = ...
  @files = ...
end 
```

# jquery - jQuery - 如何根据我的情况减少重复代码

> ID：15049912
> 
> 赞同：1
> 
> 时间：2013-02-24T08:17:20.307
> 
> 标签：jquery

这是我的代码

```
jQuery(document).ready(function() {

    if(jQuery('input[name="email_notification"]').is(":checked"))
        jQuery('#your_email').show();
    else
        jQuery('#your_email').hide();

    jQuery('input[name="email_notification"]').click(function(){
        if(jQuery(this).is(":checked"))
            jQuery('#your_email').show();
        else
            jQuery('#your_email').hide();
    });
}); 
```

我有很多代码在做这项乏味的工作。页面加载时，检查一个元素是否被选中并显示/隐藏另一个元素。然后，绑定一个单击事件以再次执行此操作。

有没有办法可以减轻我的编码生活......

提前致谢。

英文不太好，希望有的编辑能给这个问题起一个更清晰的标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T08:22:29.840

只需绑定您的处理程序并在 DOM Ready 上触发事件。

```
$(document).ready(function() {
    $('input[name="email_notification"]').change(function(){
        $('#your_email').toggle(this.checked);
    }).change();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:20:26.357

尝试这样的事情：

```
function handleEmailDisplay($EmailContainer)
{
    if($EmailContainer.is(":checked"))
        jQuery('#your_email').show();
    else
        jQuery('#your_email').hide();
}

jQuery(document).ready(function() {

    handleEmailDisplay($('input[name="email_notification"]'))

    jQuery('input[name="email_notification"]').click(function(){
        handleEmailDisplay($(this))
    });

}); 
```

# scala - Scala - Spray.io - sbt-revolver - jrebel - 重新加载时看不到 HttpService（或任何东西）的变化

> ID：15049913
> 
> 赞同：2
> 
> 时间：2013-02-24T08:17:25.913
> 
> 标签：scala, jrebel, spray

我可以看到 sbt-revolver 已设置并在喷雾罐上运行，但是当我向服务发出请求时，我的更改没有出现。

您可以在日志中看到 jrebel 正在做的事情：

```
 [success] Total time: 1 s, completed Feb 24, 2013 3:13:18 AM
app: [INFO] [02/24/2013 03:13:19.497] [com-example-Boot-spray.io.io-bridge-dispatcher-7] [akka://com-example-Boot/user/io-bridge] akka://com-example-Boot/user/io-bridge started
app: [INFO] [02/24/2013 03:13:19.851] [com-example-Boot-akka.actor.default-dispatcher-2] [akka://com-example-Boot/user/http-server] akka://com-example-Boot/user/http-server started on localhost/127.0.0.1:9000
>                 ~products
[success] Total time: 0 s, completed Feb 24, 2013 3:13:23 AM
1\. Waiting for source changes... (press enter to interrupt)
[info] Compiling 1 Scala source to /Users/tripled153/Development/src/Foundationv2/spray-template/target/scala-2.10/classes...
[success] Total time: 2 s, completed Feb 24, 2013 3:13:33 AM
2\. Waiting for source changes... (press enter to interrupt) 
```

但是更改我的特征中的消息不会出现在刷新时。

```
package com.example

import akka.actor.Actor
import spray.routing._
import spray.http._
import MediaTypes._

// we don't implement our route structure directly in the service actor because
// we want to be able to test it independently, without having to spin up an actor
class MyServiceActor extends Actor with MyService {

  // the HttpService trait defines only one abstract member, which
  // connects the services environment to the enclosing actor or test
  def actorRefFactory = context

  // this actor only runs our route, but you could add
  // other things here, like request stream processing
  // or timeout handling
  def receive = runRoute(myRoute)
}

// this trait defines our service behavior independently from the service actor
trait MyService extends HttpService {

  val myRoute =
    path("") {
      get {
        respondWithMediaType(`text/html`) { // XML is marshalled to `text/xml` by default, so we simply override here
          complete {
            <html>
              <body>
                <h1>Say hello to <i>spray-routing</i> on <i>spray-can</i>!</h1>
              </body>
            </html>
          }
        }
      }
    }

} 
```

这是建立在带有左轮手枪的喷雾罐示例之上的。 [https://github.com/spray/spray-template](https://github.com/spray/spray-template)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T08:58:27.143

问题是该路由仅在服务启动时构建一次。尝试使用`dynamic`指令包装完整的路由，以便为每个请求重建它。

编辑：请参阅此主题的[邮件列表线程](https://groups.google.com/forum/#!searchin/spray-user/revolver%2420dynamic/spray-user/Zr_fJFYpAg4/wFWFRlyIiDgJ)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T09:07:08.217

请确保您已设置`JREBEL_PATH`为**绝对路径**`jrebel.jar`的副本。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-28T19:53:14.177

我正在使用重新启动命令，而 JRebel 没有发现任何变化。然后我这样做了：

在一个终端会话中启动 sbt 并运行启动命令（这是启动，而不是重新启动命令）

打开另一个终端会话并使用命令 ~compile 运行 sbt。

就是这样，在两个单独的窗口中运行 SBT，使用 start 和 ~compile 命令就可以了。

显然，JRebel 必须处于活动状态并具有有效的许可证。

请记住，当源代码发生更改时，JRebel 不会重新加载绝对所有内容。特别注意缓存的值，例如缓存的路由或数据。在这种情况下，您需要编写一个简单的技巧来强制缓存重新加载，可以是基于时间的，或者只是查询文件锁，甚至是 JRebel 实际上将刷新的可重新加载类中的简单属性。**

# android - 二维数组和网格之间的Android映射

> ID：15049917
> 
> 赞同：0
> 
> 时间：2013-02-24T08:18:21.917
> 
> 标签：android

我正在尝试在涉及 8 X 8 网格的 Android 中制作类似国际象棋的游戏。我在后端还有一个 8 x 8 二维矩阵，在前端有一些 64 个按钮（8 X 8）。

我的问题是我想要这个矩阵和按钮的一对一对应，即。(a) 当我按下一个按钮时，我想得到 (i,j) 以便我可以参考相应的矩阵条目和

(b) 当我从矩阵中获得 (i,j) 值时，我可以找出执行某些操作的按钮。

我不知道如何映射它们。请提出建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T08:24:02.800

使用视图的标签。它是放置您想要的任何元数据的地方。将标记设置为整数值 0-63。value/8 是行， tha vale%8 是列。`getTag()`您可以通过和获取和设置标签`setTag()`。

对于反向映射，有第二个视图对象矩阵。或者有一个类的矩阵，该矩阵具有该空间的视图以及您在该位置拥有的原始数据。

# ios - 将数据从 App 委托传递到视图控制器

> ID：15049924
> 
> 赞同：32
> 
> 时间：2013-02-24T08:19:31.300
> 
> 标签：ios, objective-c, nsuserdefaults

我需要将一个字符串从 App 委托传递给我的初始视图控制器，有人可以列出我最好的方法吗，我也尝试使用 NS 用户默认值保存和检索，但我不能正常工作。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-24T08:34:13.083

**界面：**

```
@interface MyAppDelegate : NSObject  {
  NSString *myString;
}
@property (nonatomic, retain) NSString *myString;
...
@end 
```

并在 App Delegate 的 .m 文件中编写：

```
@implementation MyAppDelegate
@synthesize myString;
    myString = some string;
@end 
```

然后，在 viewcontroller.m 文件中，您可以获取：

```
MyAppDelegate *appDelegate = (MyAppDelegate*)[[UIApplication sharedApplication] delegate];
someString = appDelegate.myString;  //..to read
appDelegate.myString = some NSString;     //..to write 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-02-10T17:49:11.743

这是给 Swift 的：

**视图控制器**

```
let appDelegate = UIApplication.sharedApplication().delegate as AppDelegate 
```

此外，如果您有一个想要在视图控制器之间传递的对象（例如，我有想要共享的 CloudKit 数据），请将其添加到**App Delegate**：

```
 /* Function for any view controller to grab the instantiated CloudDataObject */
func getCloudData() ->CloudData{
    return cloudDataObject
} 
```

然后回到**视图控制器**

```
var model : CloudData = self.appDelegate.getCloudData() 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-24T08:53:21.183

您可以从应用程序委托访问您的根视图控制器：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    MyViewController* mainController = (MyViewController*)  self.window.rootViewController;
    [mainController passData:@"hello"];

    return YES;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-28T09:10:47.540

*使用 Swift 4.2：*

**将数据从 AppDelegate 传递到 ViewController：**

```
let yourViewController = self.window?.rootViewController as? YourViewController
yourViewController?.passData(YOUR_DATA) // pass data
let data = yourViewController?.getData() // access data 
```

**将数据从 ViewController 传递到 AppDelegate：**

```
let appDelegate = UIApplication.shared.delegate as! AppDelegate
appDelegate.passData(YOUR_DATA) // pass data
let data = appDelegate.getData() // access data 
```

**将以下代码添加到 YourViewController 或 AppDelegate：**

```
private var data : String? // String? or any type you want
func getData() -> String? {
    return data
}
func passData(_ data : String?) {
    self.data = data
} 
```

# ios - 标签文本和导航栏标题更改不会在 iOS 模拟器中更新。

> ID：15049925
> 
> 赞同：1
> 
> 时间：2013-02-24T08:19:40.240
> 
> 标签：ios, text, storyboard, label

我已更改 Storyboard 中的标签占位符文本和导航栏标题文本，但在 iOS 模拟器中测试时未更新。

我曾尝试重置 iOS 模拟器的内容和设置，但没有成功。

我已经为 Storyboard 设置了其他语言的本地化，但我所做的更改是在基本语言中，iOS 模拟器是英文的，文本从未改变。

我对 Storyboard 所做的其他事情是 iOS 模拟器中的更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:13:20.307

我已经弄清楚了！我之前在本地化设置中删除了英语。因为我认为基本语言将永远是英语。但这是错误的。

如果您在本地化中删除了英语，则其他语言将成为基本语言，即使 iOS 设置选择英语和美国，并且您在 storyboardName.storyboard(Base) 中输入的文本是英语，它也会显示您选择的其他语言而是本地化。

# jquery - 检查文本输入使用 jQuery，为什么这段代码不起作用？

> ID：15049926
> 
> 赞同：2
> 
> 时间：2013-02-24T08:19:58.237
> 
> 标签：jquery, input, focus, blur

所以在我的网站上，我希望登录字段能够工作，如果我点击用户名字段，占位符“用户名”就会消失，然后我可以输入用户名。如果我不输入任何内容并单击离开，我希望占位符重新出现。我遇到的问题是，即使我输入了用户名并点击离开，占位符仍然会回到原位并替换输入的用户名。所以这是我为了解决这个问题而输入的代码。

```
$('#user').focus(function(){
    $(this).val('');
    $(this).css("color","black");
    }).blur(function(){
        var x = parseInt($(this).val(),10);
        if(x==0){
            $(this).val('Username');
        }
        else{
            $(this).val('youmessedup') /* I put this here just to see 
    if it was the conditional that wasn't working, which it was */;
        }
        $(this).css("color","grey");
}); 
```

这是我的html代码

```
<form>
    <br />
    <input id ="user" type=text value="Username">
</form> 
```

我也会发布密码输入，但它与#pass ID 完全相同。

我真的不知道我在这里做错了什么。我在想的是 val 是我认为的完全不同的数据类型？我知道 .val() 将获取文本区域内的值。是对的吗？如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T13:28:32.737

我认为 andri 的评论是最好的解决方案，但让我解释一下为什么你的代码不起作用。

问题来自这一行：

```
var x = parseInt($(this).val(),10); 
```

您正在使用`parseInt`可以包含任何字符的字符串。如果您查看[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)，您会看到

> 如果第一个字符不能转换为数字，则 parseInt 返回 NaN。

所以输入的用户名总是转换为`NaN`，不等于 0。因此你`x==0`总是失败。

您想将此行更改为：

```
var x = $(this).val().length; 
```

这样您就可以测试键入的用户名的长度。

现在的问题是，如果用户再次单击该字段，即使他输入了自己的用户名，它也会删除里面的内容。您可以通过测试该值是否不是“用户名”来防止此问题：

```
if ($(this).val() == 'Username') {
    $(this).val('');
} 
```

您的代码将是：

```
$('#user').focus(function(){
    if ($(this).val() == 'Username') {
        $(this).val('');
    }
    $(this).css("color","black");
}).blur(function(){
    var x = $(this).val().length;
    if(x==0){
        $(this).val('Username');
    }
    $(this).css("color","grey");
}); 
```

[我在这里](http://jsfiddle.net/dwntZ/)写了一个小的 jsFiddle 。希望能帮助到你 ：）

# c# - 通过 API 1.1 使用 Twitter OAuth，无需 3rd Party Library

> ID：15049927
> 
> 赞同：5
> 
> 时间：2013-02-24T08:19:58.590
> 
> 标签：c#, twitter, webforms, twitter-oauth

我在将 GET statuses/user_timeline 与 OAuth 一起使用时遇到了麻烦。

我是 Twitter 和编程的新手。我在文档中看到的大部分帮助都是针对 POST 的。

早些时候我使用的是：[http ://api.twitter.com/1/statuses/user_timeline.json?screen_name=userid](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=userid)

现在基于新的 API，我正在尝试使用：[https](https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=userid) ://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=userid 。但我得到“远程服务器返回错误：（400）错误请求”。

我在 dev.twitter.com 上做了一个应用程序。我还设法生成了一个签名。现在我不知道如何发布签名并获取输出。我使用 C# web forms .net 3.5。我不能使用像 twitterizer 这样的第三方库。

我关注了[获取 twitter 公共时间线、json+C#、没有 3rd 方库](https://stackoverflow.com/questions/10673158/get-twitter-public-timeline-jsonc-no-3rd-party-libraries)和两个后续线程中的线程。出了点问题。我假设它与 API 1.1 有关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T16:50:18.463

给你（更改“更新我”部分）：

```
 // oauth application keys
        var oauth_token = "update me";
        var oauth_token_secret = "update me";
        var oauth_consumer_key = "update me";
        var oauth_consumer_secret = "update me";

        // oauth implementation details
        var oauth_version = "1.0";
        var oauth_signature_method = "HMAC-SHA1";

        // unique request details
        var oauth_nonce = Convert.ToBase64String(
            new ASCIIEncoding().GetBytes(DateTime.Now.Ticks.ToString()));
        var timeSpan = DateTime.UtcNow
            - new DateTime(1970, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc);
        var oauth_timestamp = Convert.ToInt64(timeSpan.TotalSeconds).ToString();

        // message api details
        var status = "Updating status via REST API if this works";
        var resource_url = "https://api.twitter.com/1.1/statuses/user_timeline.json";
        var screen_name = "updateme";
        // create oauth signature
        var baseFormat = "oauth_consumer_key={0}&oauth_nonce={1}&oauth_signature_method={2}" +
                        "&oauth_timestamp={3}&oauth_token={4}&oauth_version={5}&screen_name={6}";

        var baseString = string.Format(baseFormat,
                                    oauth_consumer_key,
                                    oauth_nonce,
                                    oauth_signature_method,
                                    oauth_timestamp,
                                    oauth_token,
                                    oauth_version,
                                     Uri.EscapeDataString(screen_name)
                                    );

        baseString = string.Concat("GET&", Uri.EscapeDataString(resource_url), "&", Uri.EscapeDataString(baseString));

        var compositeKey = string.Concat(Uri.EscapeDataString(oauth_consumer_secret),
                                "&", Uri.EscapeDataString(oauth_token_secret));

        string oauth_signature;
        using (HMACSHA1 hasher = new HMACSHA1(ASCIIEncoding.ASCII.GetBytes(compositeKey)))
        {
            oauth_signature = Convert.ToBase64String(
                hasher.ComputeHash(ASCIIEncoding.ASCII.GetBytes(baseString)));
        }

        // create the request header
        var headerFormat = "OAuth oauth_nonce=\"{0}\", oauth_signature_method=\"{1}\", " +
                           "oauth_timestamp=\"{2}\", oauth_consumer_key=\"{3}\", " +
                           "oauth_token=\"{4}\", oauth_signature=\"{5}\", " +
                           "oauth_version=\"{6}\"";

        var authHeader = string.Format(headerFormat,
                                Uri.EscapeDataString(oauth_nonce),
                                Uri.EscapeDataString(oauth_signature_method),
                                Uri.EscapeDataString(oauth_timestamp),
                                Uri.EscapeDataString(oauth_consumer_key),
                                Uri.EscapeDataString(oauth_token),
                                Uri.EscapeDataString(oauth_signature),
                                Uri.EscapeDataString(oauth_version)
                        );

        // make the request

        ServicePointManager.Expect100Continue = false;

        var postBody = "screen_name=" + Uri.EscapeDataString(screen_name);//
        resource_url += "?" + postBody;
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(resource_url);
        request.Headers.Add("Authorization", authHeader);
        request.Method = "GET";
        request.ContentType = "application/x-www-form-urlencoded";

        WebResponse response = request.GetResponse();
        string responseData = new StreamReader(response.GetResponseStream()).ReadToEnd(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-12T21:59:45.213

我刚刚遇到了与此类似的问题，但以不同的方式解决了

[使用 Twitter API 1.1 oAuth 验证和请求用户的时间线](https://stackoverflow.com/questions/17067996/authenticate-and-request-a-users-timeline-with-twitter-api-1-1-oauth)

[我在https://github.com/andyhutch77/oAuthTwitterTimeline](https://github.com/andyhutch77/oAuthTwitterTimeline)创建了一个 GitHub 项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T13:36:35.997

我创建了一个简单的项目，它使用 ASP.net Web 服务来获取 JSON 数据。随后使用 javascript 处理 JSON。

[https://github.com/bmdeveloper/TweetService](https://github.com/bmdeveloper/TweetService)

# android - 如何将搜索中的引号转义到 ContentProvider？

> ID：15049934
> 
> 赞同：1
> 
> 时间：2013-02-24T08:20:30.853
> 
> 标签：android

如何将搜索中的引号转义到 ContentProvider？像这样查询：

```
String value = "O'Key" ;/ / string contains a quote

Cursor people = cr.query (ContactsContract.CommonDataKinds.Phone.CONTENT_URI, new String [] {Phone.DISPLAY_NAME, Phone.NUMBER}, Phone.DISPLAY_NAME + "= '" + value + "'", null, Phone.DISPLAY_NAME + "ASC "); 
```

这样的请求会产生错误，因为字符串中的引号被解释为行尾。需要转义字符，但是\'-在这里不起作用！抱歉英语不好。预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:25:59.023

关于什么

```
String value = "O'Key" ;/ / string contains a quote

Cursor people = cr.query (ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
    new String [] {Phone.DISPLAY_NAME, Phone.NUMBER},
    Phone.DISPLAY_NAME + "=?",
    new String[] {value},
    Phone.DISPLAY_NAME + "ASC "); 
```

# c# - 从数据网格中读取数据的异常

> ID：15049940
> 
> 赞同：1
> 
> 时间：2013-02-24T08:21:10.053
> 
> 标签：c#, datagridview, nullreferenceexception

我有一个奇怪的问题，我有一些嵌套循环，我正在从数据网格视图中读取数据。如果我在消息框中显示相同的内容，则不会引发异常，当我将相同的内容存储在字符串中时，会出现异常。这是代码，求助

```
 foreach (DataGridViewRow row in dataGridView1.Rows)
            {
            foreach (DataGridViewCell cell in row.Cells)
            {
                if (cell.ColumnIndex == 0) //Set your Column Index
                {

                   String auth = cell.Value.ToString();// here nullexception isthrown

                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:32:45.153

如果你想避免，`exception`那么你应该检查这些行，如果有一些行，那么所有的工作都应该完成，否则它是无用的。

```
 if(dataGridView1.Rows.Count>0)
 {
  foreach (DataGridViewRow row in dataGridView1.Rows)
        {
        foreach (DataGridViewCell cell in row.Cells)
        {
            if (cell.ColumnIndex == 0) //Set your Column Index
            {

               string auth = Convert.ToString(cell.Value); 

            } 
```

使用`Convert.ToString()`，因为它也处理`null`值。

# c# - 尝试取消保护字节数组“参数不正确”时出现 CryptopgraphicException

> ID：15049942
> 
> 赞同：0
> 
> 时间：2013-02-24T08:21:15.973
> 
> 标签：c#, exception, visual-studio-2012, cryptography, windows-phone-8

好的，我一直在尝试加密和解密文件一段时间，但我不断收到此异常

> System.Security.Cryptography.CryptographicException：参数不正确。

它完美地写入了文件，并且字节数组确实有合法的条目。但是当我尝试解密时仍然会抛出这个问题。

这是整个功能：

```
 private static void loadTimes()
    {
        try
        {

            short[] encShorts = new short[bestTimes.Length / 2];

            IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication();
            IsolatedStorageFileStream stream = new IsolatedStorageFileStream("test.txt", FileMode.Open, FileAccess.ReadWrite, store);

            StreamReader stmReader = new StreamReader(stream);
            int i = 0;
            while (!stmReader.EndOfStream)
            {
                encShorts[i] = short.Parse(stmReader.ReadLine());
                i++;
            }
            stmReader.Close();

            byte[] encBytes = new byte[bestTimes.Length];

            for (int j = 0; j < encShorts.Length; j++)
            {
                encBytes[j * 2] = (byte)(encShorts[j] / 256);
                encBytes[j * 2 + 1] = (byte)(encShorts[j] % 256);
            }

            bestTimes = ProtectedData.Unprotect(encBytes, null);

            checkForTimeAds();
        }
        catch (Exception e)
        {
            MessageBox.Show(e.ToString());
        }
    } 
```

基本上它是从文件中加载以获得游戏中的最佳时间分数，并且由于它们是短裤，我将它们分成两个位。

以下代码引发异常：

```
bestTimes = ProtectedData.Unprotect(encBytes, null); 
```

我到处看了看，似乎很多人还没有解决它，有些人说“比赛条件”，但我不完全确定这是否适用于此。为什么我会收到此异常？

Jon Skeet 要求的保存代码：

```
 private static void saveTimes()
    {
        try
        {
            byte[] encResult = ProtectedData.Protect(bestTimes, null);

            short[] encShorts = new short[bestTimes.Length / 2];
            for (int i = 0; i < encShorts.Length; i++)
            {
                encShorts[i] = (short) (encResult[i] * 256 + encResult[i + 1]);
            }

            IsolatedStorageFile store = System.IO.IsolatedStorage.IsolatedStorageFile.GetUserStoreForApplication();
            IsolatedStorageFileStream stream = new IsolatedStorageFileStream("test.txt", FileMode.Create, FileAccess.Write, store);

            StreamWriter writer = new StreamWriter(stream);
            foreach (short part in encShorts)
            {
                writer.WriteLine(part);
            }
            writer.Close();
        }
        catch (Exception)
        {
            MessageBox.Show("Couldn't save the file.");
        }

        checkForTimeAds();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:23:01.127

您的原始转换代码（到 a `short[]`）已损坏：

```
short[] encShorts = new short[bestTimes.Length / 2];
for (int i = 0; i < encShorts.Length; i++)
{
    encShorts[i] = (short) (encResult[i] * 256 + encResult[i + 1]);
} 
```

那应该是：

```
short[] encShorts = new short[encResult.Length / 2];
for (int i = 0; i < encShorts.Length; i++)
{
    encShorts[i] = (short) (encResult[i * 2] * 256 + encResult[i * 2 + 1]);
} 
```

注意在确定长度时使用的`encResult`代替，以及访问时加倍的。`bestTimes``i``encResult`

此外，如果`encResult`有奇数个字节，您还没有考虑最后一个字节。

从根本上说，不清楚为什么首先将 a 转换`byte[]`为 a`short[]`然后将其作为*文本*写入磁盘。如果您避免了所有这些转换并且只写出原始字节，那么您就不会遇到这个问题。

# python - 字符串 eval() 但忽略前导零（八进制）

> ID：15049955
> 
> 赞同：1
> 
> 时间：2013-02-24T08:23:02.923
> 
> 标签：python, regex

我有一个动态变化的字符串，它使用 eval() 进行评估。现在对于以“0”开头的数字，它使用八进制表示。例如。评估（'030'）= 24

现在有另一个线程有类似的问题（[Pythonic way to eval all octal values in a string as integers](https://stackoverflow.com/questions/9843033/pythonic-way-to-eval-all-octal-values-in-a-string-as-integers)）。线程中的解决方案提到了一个正则表达式

```
re.sub(r'\b0+(?!\b)', '', some_string) 
```

现在这在大多数情况下都可以正常工作，但是当我必须评估例如 '0.08' 时，上述正则表达式并不能很好地完成这项工作，因为它删除了小数点后的零（它转换了 '0.08' tp 0.8' 和 sin(0.08 ) 到 sin(0.8) 等等...) 。鉴于我对正则表达式的了解有限，我无法继续解决这个问题。所以基本上，我如何修改给定的正则表达式，使其在小数点后立即忽略零？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-30T14:27:23.670

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

我尝试过使用负面的lookbehind：`re.sub(r'(?<!\.)\b0+(?!\b)', '', a)`它似乎正在工作。你们觉得对吗？– 地壳3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T10:59:20.110

你真的需要使用`eval`吗？如果您只需要将字符串转换为数字，请使用`float`：

```
>>> float('0010.001')
10.001 
```

# javascript - 在javascript中传递事件触发器的索引

> ID：15049958
> 
> 赞同：1
> 
> 时间：2013-02-24T08:23:30.850
> 
> 标签：javascript, html, events

我有一个正在构建的小型自定义插件，当我点击某个项目时，我会在其中触发一个事件。当用鼠标左键单击项目时，会触发以下内容：

```
Holder.KeyboardPlugin.prototype.triggerExpansion = function() {
if(this.expandedItem){
    var changedGroupSource = null;
    Holder.events.trigger(this, 'groupselect', function(changedGroup){
    changedGroupSource = changedGroup;
    });
  }
}; 
```

`Holder.events.trigger`有以下代码：

```
function (object, event, properties) {
        var index = this.indexOf(object);
        var listener = this.listeners[index];
        if (listener) {
            var callbacks = listener.events[event];
            if (callbacks) {
                for (var i = 0, iMax = callbacks.length; i < iMax; i++) {
                    callbacks[i](properties);
                }
            }
        } 
```

这里的问题是，在我上面的 triggerExpansion() 方法中，现在功能上一切都很好。我将一个类函数传递给`triggerProperties`并通过该回调函数，我正在修改插件内部`changedSource`变量。
但是，除此之外，我还想将所选组的索引（一定数量）传递给我的 html（使用插件）中的侦听器。因为，我已经通过了回调函数，所以我无法在这里解决我应该如何传递某个索引以及回调函数。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:53:44.167

也许您可以执行以下操作：

```
Holder.events.trigger(this, 'groupselect', {
    index: theIndex,
    callback: function(changedGroup){...}
}); 
```

所以在事件监听器中你将拥有 event.index 和 event.callback。

那是你需要的吗？

# visual-studio-2012 - Item templates not showing up in Windows Store apps

> ID：15049963
> 
> 赞同：1
> 
> 时间：2013-02-24T08:23:52.773
> 
> 标签：visual-studio-2012, windows-store-apps

I used visual studio 2012 "Export Template..." to create a few single file C# item templates for myself. The ZIP files show up in My Exported Templates, and I can move them into the Templates directory. When I then create a C# console application the templates show up there just fine.

However, this is for a windows store application. And I created these guys to add to my windows store application. However, the Add Items dialog box in VS2012 does not how them there. I am guessing there is something wrong with the XML that VS2012 has generated. Anyone know?

```
<VSTemplate Version="3.0.0" xmlns="http://schemas.microsoft.com/developer/vstemplate/2005" Type="Item">
  <TemplateData>
    <DefaultName>KonaViewModelWithBack.cs</DefaultName>
    <Name>KonaViewModelWithBack</Name>
    <Description>&lt;No description available&gt;</Description>
    <ProjectType>CSharp</ProjectType>
    <SortOrder>10</SortOrder>
    <Icon>__TemplateIcon.ico</Icon>
  </TemplateData>
  <TemplateContent>
    <References />
    <ProjectItem SubType="Code" TargetFileName="$fileinputname$.cs" ReplaceParameters="true">ConnectToRTMViewModel.cs</ProjectItem>
  </TemplateContent>
</VSTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:21:26.743

After hunting around for XML elements in the VS2012 class file, I stumbled on [TemplateID](http://msdn.microsoft.com/en-us/library/ms171387.aspx). If you look there you'll notice that it refers to a TemplateGroupID.

If you look at the TempmlateGroupIDs(VsTemplate) for a WinRT based app (see the [registry location](http://msdn.microsoft.com/en-us/library/ms171387.aspx), along with the BTW note below) you'll find that "WinRT-Managed" is listed. If you change the template file to add a TemplateGroupID set to that, then VS2012 will find it correctly:

```
<VSTemplate Version="3.0.0" xmlns="http://schemas.microsoft.com/developer/vstemplate/2005" Type="Item">
  <TemplateData>
    <DefaultName>KonaViewModel.cs</DefaultName>
    <Name>Kona View Model With Back Button</Name>
    <Description>A Kona based View Model which implements a go back button ICommand</Description>
    <ProjectType>CSharp</ProjectType>
    <SortOrder>10</SortOrder>
    <RequiredFrameworkVersion>2.0</RequiredFrameworkVersion>
    <NumberOfParentCategoriesToRollUp>1</NumberOfParentCategoriesToRollUp>
    <Icon>__TemplateIcon.ico</Icon>
    <TemplateGroupID>WinRT-Managed</TemplateGroupID>
  </TemplateData>
  <TemplateContent>
    <References />
    <ProjectItem SubType="Code" TargetFileName="$fileinputname$.cs" ReplaceParameters="true">ConnectToRTMViewModel.cs</ProjectItem>
  </TemplateContent>
</VSTemplate> 
```

BTW, the docs at the [TemplateID](http://msdn.microsoft.com/en-us/library/ms171387.aspx) msdn page are incorrect, at least on my Win8 Pro with VS2012 Pro up-to-date installation. The registry info displayed there actually shows up in the DEFAULT user hive, not the LOCAL_MACHINE hive).

# ios - NSDate ivar 成为 ?

> ID：15049971
> 
> 赞同：0
> 
> 时间：2013-02-24T08:24:28.960
> 
> 标签：ios, objective-c, nsdate

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
   dueDate = [NSDate date];

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
    [formatter setDateStyle:NSDateFormatterShortStyle];
    [formatter setTimeStyle:NSDateFormatterShortStyle];
    self.lbDueDate.text = [formatter stringFromDate:dueDate];
} 
```

在 init 方法中我声明了dueDate = [NSDate date]。但是当我调试时，在这一行

```
 self.lbDueDate.text = [formatter stringFromDate:dueDate]; 
```

并输出： (NSDate *) dueDate = 0x0c497390 那么发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:16:03.973

这意味着该对象已被`-dealloc`编辑（除非它是`nil`）。因此，与 Zombies 一起运行并更频繁地向它发送消息——在运行静态分析器并查看您的代码之后。

源中的一个问题：`dueDate = [NSDate date];`应该是`dueDate = [[NSDate date] copy];`. 另一个问题是您没有在`-initWithCoder:`.

# jquery - 更改css背景属性在IE中不起作用

> ID：15049973
> 
> 赞同：0
> 
> 时间：2013-02-24T08:24:54.673
> 
> 标签：jquery, css

我有一个 html 表：

```
<table id=mytable>
<tr>
<th>Configurations</th>
<th>Dual 1.8GHz</th>
<th>Dual 2GHz</th>
<th>Dual 2.5GHz</th>
</tr>
</table> 
```

然后我写了以下内容：

```
 <script type="text/javascript">

$('#mytable tr').hover(
  function () {
    $(this).css("background","yellow");
  }, 
  function () { 
    $(this).css("background","");
  }

);

</script> 
```

当我将鼠标悬停在表格行上时，它在 Firefox 中变为黄色，但在 IE 中变为白色！有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:37:23.847

```
<style>
.someClass{/*all the proertiese you wanna set*/}
</style>
$('#mytable tr').hover(
  function () {
    $(this).addClass('someClass');
  }, 
  function () { 
    $(this).removeClass('someClass')
  }

); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:34:05.767

代替

```
$(this).css("backgroundColor","yellow"); 
```

和

```
$(this).css("backgroundColor",""); 
```

或者你可以传递一个 CSS 属性对象

```
$(this).css({
  background-color: 'yellow',
  background-image: 'url("blablabla")'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T08:34:32.067

做：

```
$(this).css("backgroundColor","yellow");
//or
$(this).css("background-color","yellow"); 
```

# http - 在浏览器中为 http 请求使用代理，显示“这应该可以通过处理的 php 和 CGI 代理来实现”

> ID：15049976
> 
> 赞同：0
> 
> 时间：2013-02-24T08:25:25.487
> 
> 标签：http, web, proxy, network-programming

我正在尝试使用代理来加载这样的 http 请求：

```
http://xx.xx.xx.xx:8080?url=http://mysite.com 
```

但我收到此错误：

> HTTP 流量在网络中存在环路。检查您的网络拓扑以及代理和防火墙配置

有谁知道请求有什么问题，或者我怎样才能以没有任何错误的方式修改请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:48:04.887

看起来像一个 MikroTik HttpProxy。[http://wiki.mikrotik.com/wiki/Manual:IP/Proxy](http://wiki.mikrotik.com/wiki/Manual:IP/Proxy)

我不相信它支持`?url=blah`语法。

尝试将您的浏览器配置为对所有流量使用代理 ip:port，然后尝试您的 url。

如果您使用 php + curl，请使用`CURLOPT_PROXY`ip:port 代理选项。

HideMyAss 有一个免费的网络代理服务，您可以使用： [http ://www.hidemyass.com/proxy/](http://www.hidemyass.com/proxy/)

他们有一个庞大的 ip:port 代理列表，而且他们的专业 vpn 也很出色——比如 40k 的唯一 ips。

# android - 广播接收器中的 postDelayed

> ID：15049981
> 
> 赞同：1
> 
> 时间：2013-02-24T08:26:14.017
> 
> 标签：android

我有一个在特定时间触发的 BroadcastReceiver（通过 AlarmManager）。它以编程方式安排，具体取决于用户设置的首选项。

BroadcastReceiver 做（简化和伪代码）：

```
public void onReceive(Context context, Intent intent) {
  handler = new Handler();
  wifiManager.setWifiEnabled(true);
  // Wait a few seconds to activate wifi and get IP
  handler.postDelayed(new Runnable() {
    void run() {
      doTheJob();
    }
  }, 30000);
}

public void doTheJob() {
  doSomethingAndTheOther(); // this starts service: context.startService(i);
  wifiManager.setWifiEnabled(false);
} 
```

我已经在 HTC Desire 中使用此代码多年，没有出现任何问题。此外，没有用户抱怨它不起作用。

但是，我最近购买了 Galaxy S3，但它并没有按预期工作。当我在未来几分钟设置警报（使用告知的首选项）时，它按预期工作：BroadcastReceiver 被唤醒，wifi 被打开，等待被等待，工作完成并且 wifi 被关闭。

但是，如果我在夜间设置闹钟（例如 3:00:00），它不会：闹钟被触发，wifi 被打开......没有别的了。既没有完成工作，也没有明显地最后没有关闭wifi。我创建了日志并调用了 postDelayed()，但从未调用过 Runnable.run()。

看来我的 BroadcastReceiver 进程在调用 run() 之前就死了。

知道为什么吗？关于如何避免它的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T08:49:52.900

广播接收器总是在使用后立即被销毁。我不确定它是否在以前的 Android 版本中发生了变化，但你永远不应该假设广播接收器的实例会保留。它们的目的是立即处理事件，像这样的延迟处理应该使用 AlarmManager 或在服务中发生。

# visual-studio - Visual Studio 2010 解决方案查看器或转换器？

> ID：15049986
> 
> 赞同：0
> 
> 时间：2013-02-24T08:26:53.313
> 
> 标签：visual-studio

我的电脑只有visual studio 2005。有一些2010年的项目需要通读，我不需要运行它们，只需要通读并学习。

最初我想将 2010 项目转换为 2005，但最好的转换器不支持 2010 项目。我考虑过手动操作，但 .vcxproj 文件有很大不同。

然后我考虑下载 2010 年的解决方案查看器或其他东西。微软用他们的办公室文件做到了这一点，所以旧办公室的人仍然可以查看 docx 和东西，但他们没有为 Visual Studio 项目这样做。

我怎样才能阅读项目解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:29:21.083

你试过下载[Visual Studio 2012 Express](http://www.microsoft.com/visualstudio/eng#products/visual-studio-express-products)吗？

还有[SharpDevelop](http://www.icsharpcode.net/OpenSource/SD/Default.aspx)。

# android - SyncAdapter 仅在 WIFI 上

> ID：15049987
> 
> 赞同：5
> 
> 时间：2013-02-24T08:27:17.360
> 
> 标签：android, sync

我想`SyncAdapter`在 Wifi 上运行我唯一的。在开始时`onPerformSync`，我可以检查 wifi 是否存在。如果不是，我想推迟到有 WIFI 可用。

我知道，`syncresult.delayUntil`但这意味着同步适配器每 x 分钟被无用地调用一次，尽管 wifi 可以被禁用，例如一整天。此外，如果您直接使用，我所阅读的内容`delayUntil`并不适用`triggerSync`。

这里最好的方法是什么？像印象笔记这样的应用似乎有这个只在 WIFI 上同步的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-13T12:07:58.753

不要将您的设置`SyncAdapter`为定期运行。

而是`BroadcastReceiver`使用此过滤器将 a 添加到您的应用程序中：

```
<intent-filter>
<action android:name="android.net.wifi.WIFI_STATE_CHANGED"/>
<action android:name="android.net.wifi.STATE_CHANGE"/>
</intent-filter> 
```

并在`BroadcastReceiver`代码中检查 WiFi 是否打开，如果打开，则调用：

```
ContentResolver.requestSync(<Your account, <Your authority>, extras); 
```

请求 Android 运行您的`SyncAdapter`.

# powershell - 使用 Powershell 将输出 csv/txt 中缺少的输入数据替换为“0”

> ID：15049988
> 
> 赞同：0
> 
> 时间：2013-02-24T08:27:25.997
> 
> 标签：powershell, csv, replace

我有一个 GIS 输入文件，其中包含数百个以下行（对象）：

```
{
    POSITION="[950.28174, 797.89899]";
    TYPE="Saltlake";
    AZIMUT="-25.722504";
    PARENT="";
};

    {
    POSITION="[900.71307, 777.2226, -3.8146973]";
    TYPE="Oak";
    AZIMUT="-168.15758";
    PARENT="";
}; 
```

**POSITION**表示长度、宽度、高度 [x,y,z]。目前我使用这个 powershell 脚本来转换下一个工具的输入：

```
$d=gc input.txt   
$rows=@()   
for ($i=0; $i -le $d.count -2; ++$i) {                                          
if( $d[$i] -match "POSITION" ) { 
 $pos = $d[$i].Replace('POSITION="[', '').Replace(',',';').Replace(']";','').Replace(' ', '').trim()  
 $typ = $d[$i+1].Replace('TYPE=', '').Replace(';', '').Replace(' ', '').trim() 
 $ori = $d[$i+2].Replace('AZIMUT="', '').Replace('"', '').Replace('PARENT=;', '').Replace(' ', '').trim() 
 $rows += $("{0};{1};{2}" -f $typ,$pos,$ori)            
} 
}

sc -path output.csv -value $rows 
```

output.txt 如下所示：

```
"Saltlake";950.28174;797.89899;-25.722504;
"Oak";900.71307;777.2226;-3.8146973e-006;-168.15758; 
```

发生的情况是下一个转换工具将“Saltlake”的 AZIMUT 值误认为其 Z 位置，因为在 input.txt 的 POSITION 中的 y 值之后没有给出输入 - 与“Oak”不同。

**现在，是否可以用“0”替换缺少的 Z 输入空间，当然，如果给出 Z 位置，不要替换它？**

目的是使 output.txt 看起来像这样：

```
 "Saltlake";950.28174;797.89899;0;-25.722504;
 "Oak";900.71307;777.2226;-3.8146973e-006;-168.15758; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:25:52.813

我添加了一行来完成这项工作。我使用`-split`运算符检查 POSITION 中有多少部分（通过在 separator 上拆分`;`）。如果等于二，则意味着必须添加零，否则不添加。

```
$d=gc .\tmp.txt
$rows=@()   
for ($i=0; $i -le $d.count -2; ++$i) {                                          
    if( $d[$i] -match "POSITION" ) { 
        $pos = $d[$i].Replace('POSITION="[', '').Replace(',',';').Replace(']";','').Replace(' ', '').trim()
        if (($pos -split ';').count -eq 2) {$pos += ";0"}
        $typ = $d[$i+1].Replace('TYPE=', '').Replace(';', '').Replace(' ', '').trim() 
        $ori = $d[$i+2].Replace('AZIMUT="', '').Replace('"', '').Replace('PARENT=;', '').Replace(' ', '').trim() 
        $rows += $("{0};{1};{2}" -f $typ,$pos,$ori)            
    } 
}
$rows 
```

# c - dlsym(RTLD_NEXT, "msgctl") 不返回默认版本

> ID：15049995
> 
> 赞同：5
> 
> 时间：2013-02-24T08:29:18.527
> 
> 标签：c, glibc, dlsym

如果库定义了同一符号的多个版本，`dlsym(RTLD_NEXT, "symbol")`即使旧符号不是默认符号，也会返回旧符号。

例如，libpthread 定义了两个版本的 pthread_cond_broadcast：

```
$:> nm -g /lib64/libpthread-2.15.so|grep pthread_cond_broadcast
000000000000bfc0 T pthread_cond_broadcast@@GLIBC_2.3.2
000000000000c310 T pthread_cond_broadcast@GLIBC_2.2.5 
```

*   “GLIBC_2.3.2”是与 libpthread 链接时获得的默认版本（不涉及任何 dlsym）。（注意表示默认符号的“@@”）
*   “GLIBC_2.2.5”是旧版本

现在，如果我使用 dlsym(RTLD_NEXT, "pthread_cond_broadcast")，我总是得到 GLIBC_2.2.5 版本而不是 GLIBC_2.3.2 版本。当然，可以使用 dlvsym 来获取默认版本，但是如果需要为大量符号执行此操作，并且其中许多符号具有不同的新/旧版本，这将变得复杂。

我明白 RTLD_NEXT 不应该总是返回最新的符号来保持兼容性，但为什么不返回默认符号呢？

有谁知道这背后的基本原理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-07-21T06:34:56.813

这已被报告为 glibc 错误：

*   [dlsym(handle, "foo") 和 dlsym(RTLD_NEXT, "foo") 使用版本化的 "foo" 返回不同的结果](https://sourceware.org/bugzilla/show_bug.cgi?id=14932)

据我所知，它还没有被修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T08:33:04.870

的重点`RTLD_NEXT`是在第一个默认符号之后返回符号。你不就是在找`RTLD_DEFAULT`吗？

# c++ - Visual Studio 2012 不存在 mfplatf.lib

> ID：15049999
> 
> 赞同：0
> 
> 时间：2013-02-24T08:29:33.597
> 
> 标签：c++, visual-studio-2012, ms-media-foundation, wrl

我想举个例子 [http://msdn.microsoft.com/en-us/library/vstudio/jj872764.aspx](http://msdn.microsoft.com/en-us/library/vstudio/jj872764.aspx) 当我编译库 c++ 时，我看到错误：错误 LNK1104：无法打开文件 'mfplatf.lib' 在哪里我能找到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T08:36:23.520

`Mfplat.lib`是此处可用的 Windows SDK 的一部分，[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663600%28v=vs.85%29.aspx)[包含](http://msdn.microsoft.com/en-us/windows//bb980924.aspx)头文件和库的列表。

你有更多关于`Windows Media Foundation` [这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms696274%28v=vs.85%29.aspx)的信息。