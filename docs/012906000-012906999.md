# StackOverflow 问答 12906000-12906999

# mysql - 从另一个表中选择最近的行

> ID：12906002
> 
> 赞同：1
> 
> 时间：2012-10-16T00:42:19.533
> 
> 标签：mysql, sql

我正在建立一个基本论坛，我想获取创建的线程列表，但也`most recent post`从帖子表中获取，以便我可以显示`last reply and time of last reply`

我的尝试如何导致重复的结果，我尝试了 a`LEFT JOIN`和 a`INNER JOIN`的结果相同。我希望有人知道解决方案。

这是我的尝试：

```
SELECT  t1.username as thread_starter,
        t2.username as last_reply_username,
        t1.thread_time as thread_start,
        t2.post_time as last_reply_time,
        t1.title,
        t1.sticky 
FROM threads t1
     INNER JOIN posts t2
        ON t1.id = t2.threadid
ORDER BY t1.sticky DESC, t2.post_time DESC 
```

有谁知道我如何解决这个问题，所以它只会从与每个线程相关的帖子表中获取最后和最近的帖子，而不返回重复的线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:46:37.960

`post_time`下面的查询背后的想法是，它从`post`表中为`threadid`子查询中的每个找到最新的帖子 ( )。然后它重新加入原始表`post`和`threads`表。

```
SELECT  a.username AS Thread_Starter,
        c.username AS Last_reply_username,
        a.thread_time AS Thread_Start,
        c.post_time AS Last_Reply_Time,
        a.Title,
        a.Sticky
FROM    threads a
        INNER JOIN
        (
            SELECT  threadID, MAX(Post_Time) lastPost
            FROM    post
            GROUP BY ThreadID
        ) b ON  a.threadID = b.threadID
        INNER JOIN post c
            ON  b.threadID = c.ThreadID AND
                b.lastPost = c.post_time
ORDER BY a.sticky DESC, c.post_time DESC 
```

# c# - 错误“成员名称不能与其封闭类型相同”

> ID：12906009
> 
> 赞同：6
> 
> 时间：2012-10-16T00:43:15.263
> 
> 标签：c#

我需要打开一个 FrmEscalacao，它将 FrmAdmin 的信息发送到 FrmEscalacao，并带有一个名为“time”的字符串

这是 FrmAdmin 的代码

```
public partial class FrmAdmin : Form
{
    private string time;

    public FrmAdmin(string time)
    {
        InitializeComponent();

        this.time = time;
    }

    public void btnEscalar_Click(object sender, EventArgs e)
    {
        this.Hide();
        FrmEscalacao f1 = new FrmEscalacao();
        f1.ShowDialog();
    } 
```

}

这是 FrmEscalacao 的代码

```
public partial class FrmEscalacao : Form
{
    public string time;

        private void FrmEscalacao (string time)
        {

            InitializeComponent();

            this.time = time;

            SQLiteConnection ocon = new SQLiteConnection(Conexao.stringConexao);
            DataSet ds = new DataSet();
            ocon.Open();
            SQLiteDataAdapter da = new SQLiteDataAdapter();
            da.SelectCommand = new SQLiteCommand("Here is the SQL command");
            DataTable table = new DataTable();
            da.Fill(table);
            BindingSource bs = new BindingSource();
            bs.DataSource = table;
            DataTimes.DataSource = bs;
            ocon.Close();

        } 
```

它返回一个错误

```
private void FrmEscalacao (string time) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T00:44:41.313

您只能使用与类名称匹配的构造函数。如果是构造函数的声明，那么应该是

```
public FrmEscalacao(string time) {...} 
```

构造函数不应该有任何返回类型。`private`如果它要用于创建该类型的实例，则不应声明它；它应该是`public`。

然后你应该使用它：

```
FrmEscalacao f1 = new FrmEscalacao("your time"); 
```

也就是说，您必须为`time`type 的参数指定值`string`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T19:38:27.523

您需要将参数传递给构造函数。

所以，要么添加另一种方法，如下所示：

```
public FrmEscalacao()
{
    //all your code
} 
```

此外，在接受参数的构造函数上将构造函数更改为 public void。

```
public FrmEscalacao(string time)
{
    //all your code
} 
```

构造函数自动不返回任何内容，因此您无需将它们标记为无效。

# android - 尽管 AsyncTask 中已满，但 ArrayAdapter 数据列表始终为空

> ID：12906016
> 
> 赞同：0
> 
> 时间：2012-10-16T00:44:10.620
> 
> 标签：android, android-asynctask, android-arrayadapter

我在 AsyncTask 中获取设备上的所有歌曲。当我在List 变量中的`Log`所有歌曲都显示出来时。但是当我在它们的构造函数中时，它总是空的。这怎么可能？`songs``AsyncTask``Log``ArrayAdapter`

异步任务：

```
private class SongFinder extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {
        ContentResolver resolver = activity.getContentResolver();
        Uri uri = android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
        Cursor cursor = resolver.query(uri, projection, selection, null, null);
        Log.i(TAG, "Fetching next batch of songs");
        if (cursor == null) {
            Toast.makeText(activity, "Failed to discover songs",
                    Toast.LENGTH_LONG).show();
        } else if (!cursor.moveToFirst()) {
            Toast.makeText(activity, "No media on device",
                    Toast.LENGTH_LONG).show();
        } else {
            cursor.moveToFirst();
            while (cursor.moveToNext()) {
                String id = cursor.getString(0);
                String title = cursor.getString(2);
                String artist = cursor.getString(1);
                String data = cursor.getString(3);
                String albumName = cursor.getString(8);
                Long albumId = cursor.getLong(6);
                String albumKey = cursor.getString(7);

                songs.add(new Song(id, title, artist, data, albumName,
                        albumKey, albumId));
            }
        }
        cursor.close();
                // HERE IT'S FULL WITH THE SONGS I WANT
        Log.d(TAG, songs.toString());
        return null;

    }

    @Override
    protected void onPostExecute(Void result) {
        if (songs.size() > 0) {

                            //HERE IT IS ALWAYS EMPTY
            Log.d(TAG, songs.toString());
            SongArrayAdapter adapter = new SongArrayAdapter(activity, songs);
            EndlessSongAdapter songAdapter = new EndlessSongAdapter(activity,
                    adapter, R.layout.arrayadapter_songs);
            songsList.setAdapter(songAdapter);
            songsList.setTextFilterEnabled(true);

            songsList.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> root, View view,
                        int position, long when) {

                    Intent newSong = new Intent(MusicService.ACTION_NEW);
                    newSong.putExtra("song", songs.get(position));
                    Log.i(TAG, "sending broadcast");
                    bManager.sendBroadcast(newSong);

                    // Reset the play/pause button.
                    activity.resetButton();

                    Intent addSong = new Intent(
                            "com.xx.xx.ADDSONG");
                    addSong.putExtra("song", songs.get(position));
                    bManager.sendBroadcast(addSong);
                    activity.fragmentChangeNewSong();
                }

            });
        }
    }
} 
```

**编辑**

调用异步任务

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    activity = (MusicActivity) getActivity();
    bManager = LocalBroadcastManager.getInstance(activity);
    ListView songsList = getListViewWithSongs(activity);
    return songsList;
}

public ListView getListViewWithSongs(final MusicActivity activity) {
    songsList = new ListView(activity);
    new SongFinder().execute();

    return songsList;
} 
```

所以这个`private List<Song> songs`变量在`doInBackground()`AsyncTask的方法里面是填的，但是在`onPostExecute()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:08:36.560

所以，我看到你失踪的关键事情（没有看到应用程序的其余部分）是调用：

```
songAdapter.notifyDataSetChanged(); 
```

这当然假设您的适配器扩展了 BaseAdapter。如果没有该调用，适配器将无法知道列表已更新。因此，每次更新列表时始终调用“notifyDataSetChanged()”是个好主意。

如果你愿意，你也可以使用 CursorAdapter，视图应该调用游标来自动获取数据。但是，您的里程会有所不同，因为如果对光标的查询太慢，用户界面就会变慢。

以下是其他一些想法：

1.  `onPostExecute`你每次都在创建一个新的适配器。这是没有必要的。这有效，但不是必需的。您可以简单地清除私有列表`songs`，然后调用`notifyDataSetChanged`适配器。
2.  每次调用时，您都在设置 on click 侦听器`songsList.setOnItemClickListener(new OnItemClickListener()`。这也是不必要的。您可以在 onCreate 或 onResume 中设置点击监听器。

这些都是小细节，但它们加起来很重要。每次创建新对象并将其分配给变量/成员时，它所替换的对象都会被标记为垃圾回收，除非它在程序中的其他地方被引用。如果你这样做太多，垃圾收集器将开始加班并减慢你的应用程序 - 特别是如果你经常运行你的`SongFinder`任务。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:39:34.147

好吧，我实际上想通了。另一个`Fragment`正在同时加载，它也使用了`EndlessSongAdapter`并且正在崩溃。当我评论这一切时，所有其他代码都能够运行并完成，而不会崩溃......真是愚蠢的错误。LogCat 实际上没有在堆栈跟踪中显示它是从哪个片段类调用的，所以我从来没有弄清楚

因此，如果您遇到同样的问题，请检查您`ViewPager`是否正在加载多个`Fragments`以及它们是否可以创建“碰撞”

# ruby-on-rails - 使用 Rails 从 JSON 上传图像

> ID：12906024
> 
> 赞同：1
> 
> 时间：2012-10-16T00:45:13.547
> 
> 标签：ruby-on-rails, json, cordova, backbone.js

我有一个使用 PhoneGap 和 Backbone 创建的应用程序。我以 JSon 的形式上传一个文件，我的服务器接收到这样的数据：

```
data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/... 
```

我正在尝试这样编写文件：

```
File.open("#{Rails.root}/public/images/#{self.id}.jpg", "w+") do |f|
  f.write(data)
end 
```

它不起作用，我不知道该怎么办。当我尝试打开该文件时，我收到此消息“不是 JPEG 文件：以 0x64 0x61 开头”。

你有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:04:00.150

解决方案是这样的：

```
f.write Base64.decode64(data).force_encoding('UTF-8') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:58:06.053

您需要先解码数据。

尝试：

```
File.open("#{Rails.root}/public/images/#{self.id}.jpg", "w+") do |f|
  decoded_data = Base64.decode64(data)
  image_data = StringIO.new(decoded_data)
  f.write(image_data)
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T11:50:51.667

对我来说，以下是解决方案：（打开文件时请注意二进制写入选项）！

```
File.open("#{Rails.root}/public/images/#{self.id}.jpg", "wb") do |f|
   f.write Base64.decode64(data)
end 
```

# algorithm - 我正在寻找可以获取文本字符串并将其转换为数字的算法或函数

> ID：12906025
> 
> 赞同：2
> 
> 时间：2012-10-16T00:45:23.110
> 
> 标签：algorithm, machine-learning, data-mining

我正在寻找一种可以将字符串转换为数字的算法、函数或技术。我希望算法或函数具有以下属性：

1.  相同的字符串产生相同的计算值
2.  相似的字符串会产生相似的值（相似可以定义为含义相似或组成相似）

3.  能够处理可变长度的字符串

几年前我读过一篇文章，让我希望可以实现这一目标。不幸的是，我一直无法回忆起这篇文章的出处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T06:23:35.843

非严肃答案：**将所有内容映射到 0**

属性1：检查。属性2：检查。属性3：检查。

但我认为您也希望不同的字符串获得不同的值。那么问题是，什么是相似的，什么不是。

本质上，您正在寻找一个**散列函数**。

有许多针对不同目标设计的哈希函数。用于示例的加密哈希计算起来非常昂贵，因为您希望很难回溯甚至预测输入的更改如何影响输出。因此，他们非常努力地违反您的条件 2。还有更简单的哈希函数，主要尝试传播数据。他们大多试图确保关闭的输入值之后不会彼此接近（但如果它是可预测的就可以了）。

您可能想阅读维基百科：

[https://en.wikipedia.org/wiki/Hash_function#Finding_similar_substrings](https://en.wikipedia.org/wiki/Hash_function#Finding_similar_substrings)

（是的，它有一个关于“通过散列查找相似的子字符串”的部分）

维基百科也有一个哈希函数列表：

[https://en.wikipedia.org/wiki/List_of_hash_functions](https://en.wikipedia.org/wiki/List_of_hash_functions)

有几个相关的东西给你。例如可以使用**minhash 。**这是一种受 minhash 启发的方法：定义字母表中所有字母的一些随机列表。假设我只有这个例子的字母“abcde”。在这个例子中，我只使用两个列表。然后我的清单是：

```
p1 = "abcde"
p2 = "edcba" 
```

设为我`f1(str)`的测试词中第一个字母在 p1 中的索引，`f2(str)`即 p2 中的第一个字母。所以“bababa”这个词将映射到0,3。“ababab”一词也。“dada”这个词会变成 0,1，而“ce”会映射到 2,0。请注意，此映射对于单词排列是不变的（因为它将它们视为集合），对于长文本，它将收敛到“0,0”。然而，通过一些微调，它可以让您有相当快的机会找到更仔细检查的*候选人*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T01:05:16.823

类似的构图很容易，我会让其他人解决这个问题。

意思相似要困难得多，但很有趣 :)，我记得读过一篇关于如何训练神经网络来构建一大堆英语单词的 2D“语义图”的文章，其中两个单词之间的距离表示如何“相似”它们的含义，只是通过在维基百科文章上进行训练。

你可以做同样的事情，但是把它做成一维的，这会给你一个连续的数字，其中相似的词将彼此接近。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T05:58:20.760

模糊散列（上下文触发的分段散列）可能是您正在寻找的。

实现： [ssdeep](http://ssdeep.sourceforge.net/)

算法说明：[使用上下文触发的分段散列识别几乎相同的文件](http://dfrws.org/2006/proceedings/12-Kornblum.pdf)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T10:12:16.380

正如许多海报所说，我认为您可能正在使用哈希函数。然而，类似的含义也是可能的，通过一种方式：使用诸如[潜在狄利克雷分配](http://en.wikipedia.org/wiki/Latent_Dirichlet_allocation "潜在狄利克雷分配")或[潜在语义分析](http://en.wikipedia.org/wiki/Latent_semantic_analysis)之类的东西将你的单词映射到多维空间，相对于在大量文本集合上训练的模型（这些预训练模型可以是如果您无法访问您感兴趣的文本类型的代表性样本，请下载）。如果你需要一个标量值而不是多维向量（很难说，你没有说你想要什么），你可以尝试一些事情，比如最可能主题的概率，维度的平均值, 最可能主题的索引等.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T00:57:45.010

```
num = 0
for (byte in getBytes(str))
    num += UnsignedIntValue(byte) 
```

这将满足所有 3 个属性（对于 #2，这适用于字符串二进制组合）。

# ruby - rbenv 安装后 irb 不起作用

> ID：12906026
> 
> 赞同：0
> 
> 时间：2012-10-16T00:45:30.203
> 
> 标签：ruby, environment, rbenv

所以我只是放弃了 rvm 来尝试 rbenv。我使用 macports 安装并按照有关安装的说明进行操作。但是，当我尝试运行 irb 时，我得到：

```
/Users/user/.rbenv/versions/1.9.3-rc1/lib/ruby/1.9.1/irb/init.rb:236:in `load':
/Users/user/.irbrc:1: syntax error, unexpected tIDENTIFIER, expecting $end (SyntaxError)
...require 'irb/completion'require 'irb/completion'require 'irb... 
```

有没有人遇到同样的问题或知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:52:19.373

我建议将 /Users/user/.irbrc 文件重命名为其他名称，例如 irbrc_backup。它显然包含一些无效代码。当您再次运行 irb 时，它将重新创建。

您可以将新创建​​的与您重命名的进行比较，看看哪里出了问题。

# python - 应该如何使用 Python 从 .CSV 文件中收集数据？

> ID：12906029
> 
> 赞同：0
> 
> 时间：2012-10-16T00:46:06.837
> 
> 标签：python, xml, json, csv, yahoo-api

我正在尝试使用 Yahoo! 使用 Python 收集当前股票报价的 Finance API，这是我特别陌生的一种语言。雅虎！Finance API 似乎以可以下载的 .CSV 文件的形式提供他们的数据。

我想知道使用这些数据的最佳方法是什么？下载文件再阅读效率低吗？有没有一种方法可以将其转换为我可以使用 urllib 之类的东西解析的 JSON 或 XML 文件？

我得到的 .CSV 正在以下页面上生成，在这种情况下是 Microsoft (MSFT) 的报价：

> [http://finance.yahoo.com/d/quotes.csv?s=MSFT&f=snl1](http://finance.yahoo.com/d/quotes.csv?s=MSFT&f=snl1)

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T00:47:29.010

Python 有一个内置`csv`模块。

[http://docs.python.org/library/csv.html](http://docs.python.org/library/csv.html)

要回答您的下载问题：

```
file = r"http://finance.yahoo.com/d/quotes.csv?s=MSFT&f=snl1"

import urllib
text = urllib.urlopen(file).read()

>>> print text 
... "MSFT","Microsoft Corpora",29.51 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T09:17:54.077

基于`csv`module and `DictReader`，urlopen后解析数据会更容易，我重用了上面来自@kreativitea的代码

```
import csv
import urllib

file = r"http://finance.yahoo.com/d/quotes.csv?s=MSFT&f=snl1"

quotefile = urllib.urlopen(file)
fieldheaders = ["abbr","name","index"]
reader = csv.DictReader(quotefile,fieldnames=fieldheaders)

for row in reader:
    print row 
```

结果是

```
$ quote.py
{'index': '29.51', 'abbr': 'MSFT', 'name': 'Microsoft Corpora'} 
```

in for 循环是`row`哈希表，处理起来比较方便

# ruby-on-rails - 是否可以在 Ruby on Rails 中为更改的 mongoid 嵌入文档字段创建回调？

> ID：12906032
> 
> 赞同：1
> 
> 时间：2012-10-16T00:46:15.110
> 
> 标签：ruby-on-rails, mongoid

只有当嵌入的文档字段被更改时，有没有办法运行回调？

目前，只有在普通字段发生更改时，以下内容才会在普通字段上运行回调：

```
class user
  field :email, type: String
  embeds_many :connections, cascade_callbacks: true
  before_save :run_callback, :if => :email_changed?
  before_save :run_connection_callback, :if => :connections_changed?  # DOES NOT WORK
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-10T14:57:27.580

**对于任何在 2015 年看到这个答案的人**

在 Mongoid 4.x **model.changed 中？**和**model.changes**存在并且表现得像它们的 ActiveRecord 对应物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:37:54.653

Mongoid 不会`connections_changed?`为您定义方法，但您可以通过使用虚拟字段来自己定义它，`User`以跟踪嵌入式连接何时更改。那是：

```
class User

  # define reader/writer methods for @connections_changed
  attr_accessor :connections_changed

  def connections_changed?
    self.connections_changed
  end

  # the connections are no longer considered changed after the persistence action
  after_save { self.connections_changed = false }

  before_save :run_connection_callback, :if => :connections_changed?

end

class Connection
  embedded_in :user

  before_save :tell_user_about_change, :if => :changed?

  def tell_user_about_change
    user.connections_changed = true
  end
end 
```

此方法的一个缺点是`user.connections_changed`仅在保存文档时才设置。回调以这样的方式级联，即`Connection` `before_save`首先调用回调，然后`User` `before save`调用回调，这允许上述代码适用于此用例。但是，如果您需要在调用之前知道任何连接是否发生了变化，则`save`需要找到另一种方法。

# ruby-on-rails - 用于在多行上链接调用的 Ruby 约定

> ID：12906048
> 
> 赞同：46
> 
> 时间：2012-10-16T00:48:23.060
> 
> 标签：ruby-on-rails, ruby, coding-style

对此有何约定？

我使用以下样式，但不确定它是否是首选样式，因为如果我最后错过了一个点，我可能会在没有意识到的情况下遇到很多问题。

```
query = reservations_scope.for_company(current_company).joins{property.development}.
  group{property.development.id}.
  group{property.development.name}.
  group{property.number}.
  group{created_at}.
  group{price}.
  group{reservation_path}.
  group{company_id}.
  group{user_id}.
  group{fee_paid_date}.
  group{contract_exchanged_date}.
  group{deposit_paid_date}.
  group{cancelled_date}.
  select_with_reserving_agent_name_for(current_company, [
                                       "developments.id as dev_id",
                                       "developments.name as dev_name",
                                       "properties.number as prop_number",
                                       "reservations.created_at",
                                       "reservations.price",
                                       "reservations.fee_paid_date",
                                       "reservations.contract_exchanged_date",
                                       "reservations.deposit_paid_date",
                                       "reservations.cancelled_date"
  ]).reorder("developments.name")
query.to_a # .... 
```

那么在**多行上****链接**方法的约定是什么，我应该更喜欢哪一个？

 ****注意**：我无法从[Ruby 编码风格指南](https://github.com/bbatsov/ruby-style-guide/)中找到一个好的示例。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-05-27T09:37:13.060

在[Ruby 风格指南](https://github.com/bbatsov/ruby-style-guide)中实际上有一个部分：

> 采用一致的多行方法链接样式。Ruby 社区有两种流行的样式，它们都被认为是好的——前导`.`（选项 A）和尾随`.`（选项 B）。
> 
> *   **（选项 A）**在另一行上继续链式方法调用时，将 保留`.`在第二行。
>     
>     
>     
>     ```
>     # bad - need to consult first line to understand second line
>     one.two.three.
>       four
>     
>     # good - it's immediately clear what's going on the second line
>     one.two.three
>       .four 
>     ```
>     
>     
> *   **（选项 B）**在另一行继续链式方法调用时，`.`在第一行包含 以指示表达式继续。
>     
>     
>     
>     ```
>     # bad - need to read ahead to the second line to know that the chain continues
>     one.two.three
>       .four
>     
>     # good - it's immediately clear that the expression continues beyond the first line
>     one.two.three.
>       four 
>     ```
>     
>     
> 
> 可以在 [此处](https://github.com/bbatsov/ruby-style-guide/pull/176)找到关于两种替代样式优点的讨论。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-10-16T00:55:37.513

在 Ruby 1.9+ 中，可以这样写：

```
query = reservations_scope
  .for_company(current_company)
  .joins{property.development}
  .group{property.development.id}
  .group{property.development.name}
  .group{property.number}
  .group{created_at}
  .group{price}
  .group{reservation_path}
  .group{company_id}
  .group{user_id} 
```

我认为更具可读性。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-04-07T02:34:44.210

这是四个选项**的利弊的完整列表。**在任何其他答案中都没有提到其中的两个选项。

优点和缺点可以分为独特的和共享的。共享的优点是另一种选择的独特缺点的反面。同样，共同的缺点是另一种选择的独特优点的反面。还有一些观点对两个选项有利，对另外两个选项不利。

为避免重复解释，我仅对这一点进行总结来描述每个选项的*共同优点和缺点。*有关共享的赞成或反对的完整详细信息，请参阅另一个选项的独特部分中的反向反对或赞成的描述。对于两个选项的优点和另外两个选项的优点，我随意选择将完整的解释放在以“<code>开头的集合中。在行首”。

有关将共享的利弊隐含而不是重复它们的较短列表，请参阅此答案的[旧版本](https://stackoverflow.com/revisions/29482762/2)。

* * *

# `.`在行尾

```
items.get.lazy.
  take(10).
  force 
```

## 优点

*仅与一个其他选项 *共享：*

*   续行可自由注释，行间可加注释
*   可粘贴到 IRB/Pry 中
*   在 Ruby 1.8 中受支持

*与其他两个选项共享：*

*   当您阅读初始行时，很明显表达式仍在继续
*   有足够的水平空间用于连续线条
*   不需要手动将字符对齐到列中
*   以比例字体查看时看起来不错
*   使用最少的标点符号，减少打字和视觉噪音

## 缺点

独特：

*   连续的线条本身看起来很奇怪。您必须阅读前一行以了解它们是延续。
    *   缩进不是一行从前一行延续的可靠指标——它可能仅仅意味着一个块的开始。

*仅与一个其他选项 *共享：*

*   编辑代码时，很难注释掉或重新排序最后一行

* * *

# `.`在行首

```
items.get.lazy
  .take(10)
  .force 
```

## 优点

*仅与一个其他选项 *共享：*

*   编辑代码时，更容易注释掉或更改最后一行的顺序——无需删除和添加`.`or `\`。

*与其他两个选项共享：*

*   连续线单独看时可以理解
*   有足够的水平空间用于连续线条
*   不需要手动将字符对齐到列中
*   以比例字体查看时看起来不错
*   使用最少的标点符号，减少打字和视觉噪音

## 缺点

独特：

*   当您阅读第一行时，并不清楚表达式是否继续
    *   如果您在代码库中使用它，那么当您阅读一行时，您必须始终检查后面的行以确保它不会影响初始行的含义。

*仅与一个其他选项 *共享：*

*   如果您`#`注释掉连续的行，或在行之间添加注释，代码会静默中断
*   您无法将此代码粘贴到 IRB/Pry 中而不会被误解
*   Ruby 1.8 及更低版本不支持

* * *

# `.`在行首，缩进到上一行`.`

```
items.get.lazy
         .take(10)
         .force 
```

## 优点

*仅与一个其他选项 *共享：*

*   编辑代码时，更容易注释掉或更改最后一行的顺序——无需删除和添加`.`or `\`。

*与其他两个选项共享：*

*   当您阅读初始行时，很明显表达式仍在继续
*   连续线单独看时可以理解
*   使用最少的标点符号，减少打字和视觉噪音

## 缺点

独特：

*   每行的代码必须适合更少的水平空间
*   需要手动将 s 对齐`.`到列 中
    *   如果您有一个用于对齐文本的编辑器插件会更容易，但仍然比使用默认缩进规则更多工作。
    *   即使您的编辑设置包含对齐插件，您同事的设置也可能不包含。
*   以比例字体查看时，代码看起来会错位

*仅与一个其他选项 *共享：*

*   如果您`#`注释掉连续的行，或在行之间添加注释，代码会静默中断
*   您无法将此代码粘贴到 IRB/Pry 中而不会被误解
*   Ruby 1.8 及更低版本不支持

*与其他两个选项共享：*

*   编辑代码时，很难注释掉或重新排序最后一行

* * *

# `\`在行尾，`.`在下一行的开头

```
items.get.lazy \
  .take(10) \
  .force 
```

## 优点

*仅与一个其他选项 *共享：*

*   续行可自由注释，行间可加注释
*   可粘贴到 IRB/Pry 中
*   在 Ruby 1.8 中受支持

*与其他两个选项共享：*

*   当您阅读初始行时，很明显表达式仍在继续
*   连续线单独看时可以理解
*   有足够的水平空间用于连续线条
*   不需要手动将字符对齐到列中
*   以比例字体查看时看起来不错

## 缺点

独特：

*   需要更多打字
*   产生更多视觉噪音

*仅与一个其他选项 *共享：*

*   编辑代码时，很难注释掉或重新排序最后一行

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-08-08T12:41:06.767

我在行尾选择点的原因是它允许您将代码粘贴到 IRB 会话中。此外，如果在行首使用点，则不能在多行代码中间注释行。这是一个很好的讨论：[https ://github.com/bbatsov/ruby-style-guide/pull/176](https://github.com/bbatsov/ruby-style-guide/pull/176)**********

# amazon-web-services - Auto Scaling - 跨区域？

> ID：12906057
> 
> 赞同：2
> 
> 时间：2012-10-16T00:49:05.197
> 
> 标签：amazon-web-services, amazon-ec2, amazon-cloudwatch

我希望你能快速回答我的问题。

是否可以创建跨区域的 Auto Scaling 组？考虑这种情况 - 假设西部的所有可用区都不可用。我们可以配置 Auto Scaling 以便在 US.West 的实例关闭时，在东部区域创建一个实例吗？

我认为这是不可能的，因为我们需要在使用命令行脚本时为 AWS_AUTO_SCALING_URL 指定区域，这限制了仅在该区域内创建启动配置和自动扩展组。

所以我们只能希望那个地区的所有可用区都没有宕机或迁移到 VPC，对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T03:25:41.257

弹性负载均衡和弹性 IP 都是特定于区域的，我假设 Auto Scaling 是特定于区域的，并且仅在该区域的可用区之间。关于构建容错应用程序的白皮书没有明确说明您可以跨区域自动扩展，但[确实说您可以跨区域](http://media.amazonwebservices.com/AWS_Building_Fault_Tolerant_Applications.pdf)。

> “Auto Scaling 可以跨 AWS 区域中的多个可用区工作，从而更轻松地自动增加和减少容量。”

我相信如果他们支持多区域，他们会明确表示。

进一步考虑这一点，我不太确定跨区域自动扩展是否是个好主意。自动缩放更适合您的应用程序的特定层。

例如，如果某个区域出现故障，您不希望您的某些 Web 服务器通过慢速链接使用服务，连接到全国的另一个区域（可能）。

相反，您希望路由 53 将流量路由到一个自治堆栈，该堆栈在一个单独的区域中运行它自己的自动缩放层。

[请参阅此托管图表](http://media.amazonwebservices.com/architecturecenter/AWS_ac_ra_web_01.pdf)，从 ELB 向下的所有内容都是特定于区域的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-20T12:41:52.750

Auto Scaling 组可以包含来自同一区域内多个可用区的 EC2 实例。但是，Auto Scaling 组不能包含来自多个区域的 EC2 实例。

阅读此[AWS 文档中的](http://docs.aws.amazon.com/autoscaling/latest/userguide/as-add-availability-zone.html)**说明**

# c# - 在不可能的情况下获取 NullReferenceException（检查 null 时）

> ID：12906059
> 
> 赞同：6
> 
> 时间：2012-10-16T00:49:33.537
> 
> 标签：c#, nullreferenceexception

在我的一种方法开始时，我有一个非常简单的检查，如下所示：

```
public void MyMethod(MyClass thing)
{
    if(thing == null)
        throw new ArgumentNullException("thing");

    //Do other stufff....
} 
```

但是我得到了堆栈跟踪（来自生产环境中的 Elmah），这似乎表明“if（thing == null）”行正在抛出 NullReferenceException。堆栈跟踪的前 2 行类似于：

```
System.Web.HttpUnhandledException: Exception of type 'System.Web.HttpUnhandledException' was thrown. ---> System.NullReferenceException: Object reference not set to an instance of an object.
   at MyLibrary.BL.AnotherClass.MyMethod(MyClass thing) in C:\Development\MyProject\trunk\MyLibrary.BL\AnotherClass.cs:line 100 
```

MyClass 是一个相当简单的类，没有运算符重载或类似的东西，所以我对抛出 NullReferenceException 的原因有点困惑！

任何人都可以提出可能导致这种情况的场景吗？

编辑：我怀疑“事物”可能为空，但我真的希望 ArgumentNullException 而不是 NullReferenceException - 这基本上就是这个问题的意义所在。是否有框架或 Elmah 正在改变或错误报告异常 - 或者是二进制文件在某种程度上已经过时的唯一解释？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T01:01:12.617

`if (thing == null)`扔一个是不可能的`NullReferenceException`。

这意味着正在发生其他事情。是时候开始运用你的想象力了，并下定决心忽略`if`导致问题的可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T01:19:44.873

if 语句可能会抛出`NullReferenceException`if MyClass`==`错误地定义了运算符，例如

```
class MyClass
{
   int A {get;set;}

   public static bool operator ==(MyClass a, MyClass b)
   {
      return a.A == b.A;
   }

   public static bool operator !=(MyClass a, MyClass b)
   {
      return !(a == b);
   } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T00:57:34.050

看起来异常来自调用 MyMethod 的链上的东西。MyMethod() 抛出异常，上面没有处理它，所以无论你使用什么 web 框架都会抛出 HttpUnhandledException。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-05T23:49:55.513

我也遇到过这种不可能的情况。原来是由于使用了`as`关键字，我不知道为什么。我正在使用 SharpPdf 库并有一行这样的代码：

```
var destElement = annotDict.Elements["/Dest"] as PdfName;
if (destElement == null)
{
    continue;
} 
```

如果我删除该`as PdfName`部分，它会起作用。所以我现在有两个级别的代码检查：

```
var destElement = annotDict.Elements["/Dest"];

if (destElement == null)
{
    continue;
}

var destElementName = destElement as PdfName;
if (destElementName == null)
{
    continue;
} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-10-16T01:07:54.123

事情是空的。

那会导致它。

[编辑]：这是我测试过的代码：

```
protected void Button3_Click(object sender, EventArgs e)
{
    MyMethod(null);
}

public void MyMethod(String thing)
{
    if (thing == null)   //  This caused the exception to be thrown.
        throw new Exception("test");

    //Do other stufff....
} 
```

# java - 将java小程序转换为黑白图像

> ID：12906060
> 
> 赞同：0
> 
> 时间：2012-10-16T00:49:44.520
> 
> 标签：java, image, image-processing, applet

我为我的网站创建了一个 Java 小程序，用户可以通过单击并拖动鼠标来绘制图像。然后我想将此图像转换为黑白图像，以具有 1 和 0 的二维数组的形式。我已经创建了绘图部分，但我不确定如何从小程序转到二维数组。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:27:54.483

您需要做的第一件事是将屏幕转换为[`BufferedImage`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html)，这将允许您访问像素数据。

就像是...

```
BufferedImage buffer = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_RGB);
Graphics2D g2d = buffer.createGraphics();
printAll(g2d);
g2d.dispose(); 
```

接下来，您需要将其转换为黑白图像...

```
BufferedImage bwImage = new BufferedImage(
        buffer .getWidth(),
        buffer .getHeight(),
        BufferedImage.TYPE_BYTE_BINARY);

Graphics2D g2d = bwImage.createGraphics();
g2d.drawImage(buffer , 0, 0, null);
g2d.dispose(); 
```

现在，您可以访问原始数据...

```
for (int y = 0; y < bwImage.getHeight(); y++) {
    for (int x = 0; x < bwImage.getWidth(); x++) {

        Color color = new Color(bwImage.getRGB(x, y));
        // You should only be interested in colors of 0,0,0 RGB

    }
} 
```

**更新示例**

这是我从上一个问题中采用的一个例子

![颜色](../Images/6212b8ba4f69fbe7ca7a89cb9debdf0f.png)

![黑与白](../Images/ffd12707c4e8d6c308d97767b7a26ebc.png)

```
public class MyPaint {

    public static void main(String[] args) {
        new MyPaint();
    }

    public MyPaint() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(500, 600);
                frame.getContentPane().setBackground(Color.DARK_GRAY);
                frame.setLocationRelativeTo(null);
                frame.setLayout(new GridBagLayout());

                final PaintSurfacePane surface = new PaintSurfacePane();
                JPanel pnlButtons = new JPanel(new GridBagLayout());
                pnlButtons.setOpaque(false);

                JButton saveFromImage = new JButton("Save From Image");
                JButton saveFromGraphics = new JButton("Save From Grpahics");

                pnlButtons.add(saveFromImage);
                pnlButtons.add(saveFromGraphics);

                saveFromGraphics.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        BufferedImage buffer = new BufferedImage(surface.getWidth(), surface.getHeight(), BufferedImage.TYPE_INT_RGB);
                        Graphics2D g2d = buffer.createGraphics();
                        surface.printAll(g2d);
                        g2d.dispose();

                        renderBlackWhite(buffer);
                    }

                });

                saveFromImage.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        BufferedImage buffer = new BufferedImage(surface.getWidth(), surface.getHeight(), BufferedImage.TYPE_INT_RGB);
                        Graphics2D g2d = buffer.createGraphics();
                        g2d.drawImage(surface.getPaintSurface(), 0, 0, surface);
                        g2d.dispose();

                        renderBlackWhite(buffer);
                    }

                });

                GridBagConstraints gbc = new GridBagConstraints();
                gbc.gridx = 0;
                gbc.gridy = 0;
                gbc.weightx = 1;
                gbc.weighty = 1;

                frame.add(surface, gbc);

                gbc.gridy++;
                gbc.weighty = 0;
                frame.add(pnlButtons, gbc);

                frame.setVisible(true);
            }
        });
    }

    public static void renderBlackWhite(BufferedImage buffer) {
        BufferedImage bwImage = new BufferedImage(
                        buffer.getWidth(),
                        buffer.getHeight(),
                        BufferedImage.TYPE_BYTE_BINARY);

        Graphics2D g2d = bwImage.createGraphics();
        g2d.drawImage(buffer, 0, 0, null);
        g2d.dispose();

        JFrame frame = new JFrame("Black and White");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setLayout(new BorderLayout());
        frame.add(new JLabel(new ImageIcon(bwImage)));
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public class PaintSurfacePane extends JPanel {

        private BufferedImage paintSurface;

        public PaintSurfacePane() {    
            // This will produce a buffered image that will render faster...
            GraphicsConfiguration gc = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice().getDefaultConfiguration();
            paintSurface = gc.createCompatibleImage(400, 400, Transparency.OPAQUE);
            Graphics2D g2d = paintSurface.createGraphics();
            g2d.setColor(Color.WHITE);
            g2d.fillRect(0, 0, 400, 400);
            g2d.dispose();

            MouseHandler handler = new MouseHandler();
            addMouseListener(handler);
            addMouseMotionListener(handler);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.drawImage(paintSurface, 0, 0, this);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }

        @Override
        public Dimension getMinimumSize() {
            return getPreferredSize();
        }

        @Override
        public Dimension getMaximumSize() {
            return getPreferredSize();
        }

        public BufferedImage getPaintSurface() {
            return paintSurface;
        }

        protected class MouseHandler extends MouseAdapter implements MouseMotionListener {

            private Point startPoint;

            @Override
            public void mouseReleased(MouseEvent e) {
                startPoint = null;
            }

            @Override
            public void mouseDragged(MouseEvent e) {
                Point endPoint = e.getPoint();
                if (startPoint != null) {
                    Graphics2D g2d = paintSurface.createGraphics();
                    g2d.setColor(Color.RED);
                    g2d.draw(new Line2D.Float(startPoint, endPoint));
                    g2d.dispose();

                    repaint();
                }

                startPoint = endPoint;
            }

            @Override
            public void mouseMoved(MouseEvent e) {
            }
        }
    }
} 
```

本质上，它使用“直接从缓冲区”方法和“绘画”方法将图形转换为黑白。

# ada - 卡在 Ada 程序上 - 卡在输入上

> ID：12906061
> 
> 赞同：1
> 
> 时间：2012-10-16T00:50:07.050
> 
> 标签：ada

我手头有一个非常简单的 Ada 项目。任务是收集“选民”的选票，并将其与每个“候选人”的得分进行比较，并确定哪个候选人与选民最匹配。

输入看起来像这样，然后是应该输出的输出：

```
Input:
0   0   0   1   1   1  -1  -1  -1   1
7
A   
1   1   1   1   1   1   1   1   1   1
B  
-1  -1  -1  -1  -1  -1  -1  -1  -1  -1
C   
1  -1   1  -1   1  -1   1  -1   1  -1
D   
1   0   1   0   1   0   1   0   1   0
E   
0  -1   0  -1   0  -1   0  -1   0  -1
F   
1   1   1   1   0   0   0   0   0   0
G   
0   0   0   1  -1   0   0  -1   1   1

Output:

A
F
G 
```

到目前为止，我有一个程序可以收集每个候选人的选票并将其与选民的选票进行比较。我知道我需要做什么，就像我以前在 Java 中所做的那样，但我不确定我应该如何在 Ada 中获取输入。这是我到目前为止所拥有的。

```
with Ada.Text_IO, Ada.Integer_Text_IO;
use Ada.Text_IO, Ada.Integer_Text_IO;

procedure Candidates is
-- take an array of candidates and determine which candidate best matches
-- the user's votes, then return those candidates
    Number_Of_Candidates: Integer;
subtype VoterArray_Index is Integer range 1..10;
subtype CandidatesArray_Index is Integer range 1..Number_Of_Candidates;
type VoterArray is array(VoterArray_Index) of Integer;
type CandidatesArray is array(Character range 'A' .. 'Z') of array;
type Best_CandidatesArray is array(CandidatesArray_Index) of array;

Voter: VoterArray;
Candidates: CandidatesArray;
Best_Candidates: Best_CandidatesArray;

function Get_Input() is
-- get the input and put it into the correct arrays
    Current_Line : string; 

    begin
        Get(Current_Line);

function Get_Best_Score(CandidatesArray: in out CandidatesArray) is
-- go through the arrays and find the best score
    SameAnswers: Integer;
    DifferentAnswers: Integer;
    BestScore: Integer;
    subtype CandidateArray is array(VoterArray_Index) of Integer;
    Candidate: CandidateArray;

    begin
        for I in CandidatesArray_Index loop
            Candidate := Candidates(I);
            for J in VoterArray_Index loop
                if Candidate(J) /= 0 and Voter(J) /= 0 then
                    if Candidate(J) /= Voter(J) then
                                     DifferentAnswers                    :=                    DifferentAnswers + 1
                    else
                        SameAnswers := SameAnswers + 1
                    end if;
                end if;
            end loop;
            if SameAnswers - DifferentAnswers >= BestScore then
                Best_Candidates(I) := Candidate;
            end if;
            SameAnswers := 0;
            DifferentAnswers := 0;
        end loop;
    end Get_Best_Score; 
```

如您所见，我不确定如何获取数字并将它们放入数组中。如果您有任何建议或我应该以不同的方式处理事情，我会全神贯注。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:10:47.010

您可以使用流来读取以下数据： `Integer'Read( STREAM_HANDLE, VARIABLE )`

另一种选择是通过 Get 读取数组中每个元素的值，如果您需要调整处理格式更改的过程，我建议使用辅助函数：

```
 Function  Get_Vote ( File  : File_Type ) Return Integer is
    begin
        Return Result : Integer do
            Integer_IO.Get(
                File  => File,
                Item  => Result
               );
        End return;
    end Read_Votes; 
```

和

```
For Index in VOTE_ARRAY'range loop
    VOTE_ARRAY( Index ) := Get_Vote( INPUT_FILE );
End loop; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:50:59.133

因为文件中给出了行数，所以[*受约束的数组*](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-3-6.html)必须足够大以容纳所有可能的元素。相反，您可以声明一个[*不受约束的数组*](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-3-6.html)：

```
subtype Voter_Index is Positive range 1 .. 10;
type Voter_Array is array(Voter_Index) of Integer;
type Candidate_Array is array(Character range <>) of Voter_Array; 
```

稍后，当您知道实际计数时，您可以只分配数组实际需要的空间。此声明在[嵌套范围内](http://www.ada-auth.org/standards/12rm/html/RM-5-6.html)`Candidates`放入堆栈：

```
Number_Of_Candidates := ...;
declare
   Candidates : Candidate_Array(
      'A' .. Character'Val(Character'Pos('A') + Number_Of_Candidates));
begin
   ...
end; 
```

或者，您可以[在堆上分配空间](https://en.wikibooks.org/wiki/Ada_Programming/Types/access)：

```
type Candidate_Array_Ptr is access Candidate_Array;
Candidates: Candidate_Array_Ptr;

begin
   Number_Of_Candidates := ...;
   Candidates := new Candidate_Array(
     'A' .. Character'Val(Character'Pos('A') + Number_Of_Candidates));
end; 
```

无论哪种情况，您都可以根据需要访问数组元素：

```
for i in Candidates'Range loop
   for j in Voter_Array'Range loop
      Ada.Integer_Text_IO.put(Candidates(i)(j), 5);
   end loop;
   Ada.Text_IO.New_Line;
end loop; 
```

附录：这种方法假设候选名称是连续`Character`的。作为替代方案，考虑一个 的数组`Candidate_Record`，其中每个`Name`都从文件中读取：

```
type Candidate_Record is
   record
      Name  : Character;
      Votes : Voter_Array;
   end record;
type Candidate_Array is array(Positive range <>) of Candidate_Record;

Candidates : Candidate_Array(1 .. Number_Of_Candidates);

for i in Candidates'Range loop
   Ada.Text_IO.Put(Candidates(i).Name & ':');
   for j in Voter_Array'Range loop
      Ada.Integer_Text_IO.Put(Candidates(i).Votes(j), 5);
   end loop;
   Ada.Text_IO.New_Line;
end loop; 
```

# facebook - 查询受邀参加大型活动的所有用户（>50K 用户）会返回上限结果（<5K 用户）

> ID：12906066
> 
> 赞同：1
> 
> 时间：2012-10-16T00:50:50.540
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在尝试查询受邀参加一个 Facebook 活动的用户的所有 Facebook UID。（我正在使用这些数据来分析趋势，用户的 UID 是公式的关键部分。）超过 50000 名用户被邀请参加活动，我想查询一下。为该特定事件的所有受邀用户（事件 ID 为）进行 Graph API 查询 ( `256633941116408/invited`) 或 FQL 查询 ( ) 时，我的结果似乎每次都限制为 4932 个用户。59,161 位用户受邀参加此活动，*应*`SELECT FROM event_member WHERE eid = 256633941116408``256633941116408`*出现在 API 响应中。即使手动将 Graph API 请求限制为每页 1000 个，响应仍然以相同数量的邀请退出，仅在 5 页之后。Facebook 是否有可能不会为超过 4932 条目标记的公共事件公开事件的受邀用户，或者我是否以错误的方式接近这个？*

 *谢谢！-罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:55:15.303

我有同样的问题，但没有找到解决方案，只能重复“已接受”“已拒绝”“不确定”和“未回复”的任务以获得尽可能多的用户状态。我对超过 100000 个邀请的活动感兴趣。我也尝试通过 uids 限制请求，只是为了面对同样的欺骗。您可能想废弃该页面并对输出进行编程，但您需要获得 Facebook 的许可。这是与此相关的 Facebook 网页：[https](https://www.facebook.com/apps/site_scraping_tos_terms.php) ://www.facebook.com/apps/site_scraping_tos_terms.php 。如果您找到其他方法，请告诉我们。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:58:48.600

尝试限制和分页，如下所示：

```
SELECT uid FROM event_member where eid = 306212359507086 LIMIT 0,1000
SELECT uid FROM event_member where eid = 306212359507086 LIMIT 2000,1000
SELECT uid FROM event_member where eid = 306212359507086 LIMIT 3000,1000
.... until you get an empty response 
```

还要检查你是否有必要的权限，如果不是你的活动，你可能只会看到你的朋友。

也试试这个：

```
SELECT uid FROM event_member where eid = 306212359507086 
AND uid IN (SELECT uid1 FROM friend WHERE uid2=me()) LIMIT 0,1000 
```

不要忘记更改活动 ID*

# javascript - 如何从 pinterest 实现“Pin it”功能

> ID：12906067
> 
> 赞同：1
> 
> 时间：2012-10-16T00:50:58.887
> 
> 标签：javascript, pinterest

我正在尝试像 Pinterest 一样制作一个新的 pin it 按钮，我已经看到了该书签上的内容：

```
javascript:void(
  (function(){
    var e=document.createElement('script');
    e.setAttribute('type','text/javascript');
    e.setAttribute('charset','UTF-8');
    e.setAttribute('src','http://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);
    document.body.appendChild(e)
  })()
); 
```

我是 javascript 的新手，所以我不知道如何开始做一个新的。我什至不知道我应该从哪里开始我的编码。此 Pin it 按钮的后端是否受限？谁能介绍一下这个 Pin it 按钮是如何工作的？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:57:48.307

基本上，该代码所做的是将`<script>`标签注入页面。实际的“pin it”代码位于`pinmarklet.js`文件中。

要使您自己的功能像这样，您可以重用代码并将源代码替换为您自己的 JavaScript 文件。

旁注：该`void(...)`部分是多余的，因为该函数无论如何都不返回任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T01:06:50.710

您发布的代码只是将一个 JavaScript 文件注入到页面的 DOM 中，这将导致它被 JavaScript 引擎解释。您应该更感兴趣的是此文件中实现“Pin It”功能的代码：http: [//assets.pinterest.com/js/pinmarklet.js](http://assets.pinterest.com/js/pinmarklet.js)

但由于它被缩小并且有点混淆并且可能是专有的，我建议你首先想要的是一个易于遵循的关于如何创建书签的教程：http: [//betterexplained.com/articles/how-to-make-a-用于您的网络应用程序的书签/](http://betterexplained.com/articles/how-to-make-a-bookmarklet-for-your-web-application/)

然后，您需要考虑如何编写自己的 Web 应用程序来响应“Pin”或保存某些内容的异步请求。如果您只是想要一个简单的“链接提交”类型的功能，以下两个简单但有用的 JavaScript 变量可能会派上用场：

*   **document.location.href** -- 获取页面的*URL*
*   **document.title** -- 获取页面的*TITLE*标签的内容

要将您的代码压缩成书签所需的单行，您可以使用此工具： [http ://subsimple.com/bookmarklets/jsbuilder.htm](http://subsimple.com/bookmarklets/jsbuilder.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T00:57:18.000

如果要将其添加到按钮，方法如下：

html:

```
<button id="pintrest">Pin It</button> 
```

你编写脚本：

```
var btn = document.getElementById("pintrest");
btn.onclick = function () {
    var e = document.createElement('script');
    e.setAttribute('type', 'text/javascript');
    e.setAttribute('charset', 'UTF-8');
    e.setAttribute('src', 'http://assets.pinterest.com/js/pinmarklet.js?r=' + Math.random() * 99999999);
    document.body.appendChild(e);
}; 
```

现在，当您单击按钮时，它应该运行 pintrest 代码

# jquery - 复选框事件未从可排序的 li 元素触发？

> ID：12906071
> 
> 赞同：1
> 
> 时间：2012-10-16T00:51:29.507
> 
> 标签：jquery, checkbox, click, jquery-ui-sortable

我正在使用可排序的 jquery UI，但是当用户单击选项卡时，我通过从外部文件加载元素列表来填充可排序列表。加载列表项后，我为每个项添加一个复选框。复选框已显示，但单击它不会触发警报。但是，放置在`li`元素外部的复选框可以正常工作 - 这让我相信 nedds 解决了与 jquery sortable 存在某种不兼容性：

Javascript：

```
window.onload = function () {

    $('input:checkbox').change(function () { // detects when user clicks on a checkbox
        alert("You click a checkbox");
    });

    var a = document.getElementById("fvsortid"); // loads slides when user clicks tab

    a.onclick = function () {
        $("#sortable").load("file.xml");
        $("#sortable").load("file.xml", function () {
            $('<input type="checkbox"/>').prependTo('#sortable li');
        });
    };
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:54:51.117

尝试委派活动

```
$('#sortable').on('change' , 'input:checkbox' ,function() { 
          alert("You click a checkbox");
 }); 
```

该事件似乎没有触发，因为当事件处理程序与其关联时，DOM 中不存在该元素。如果您有问题，请将事件委托给静态父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:57:19.917

您需要使用 .on() 函数在复选框呈现后将事件处理程序指向复选框。

举个例子，

```
$('input').on("click", function(event){
alert($(this).text());
}); 
```

这里有一些关于这个主题的阅读：http: [//api.jquery.com/on/](http://api.jquery.com/on/)

# algorithm - 更好的算法来检查有向图是否是 dag

> ID：12906076
> 
> 赞同：1
> 
> 时间：2012-10-16T00:51:56.177
> 
> 标签：algorithm, directed-graph

> **可能重复：**
> [在有向图中检测循环的最佳算法](https://stackoverflow.com/questions/261573/best-algorithm-for-detecting-cycles-in-a-directed-graph)

这是一项设计一种算法来检查有向图是否为 dag 的作业。
我能想到的更好的算法是：

第 1 步：找到一个只有出边的节点。如果没有这样的节点，那么这些是一个循环

第 2 步：在该节点上启动 DFS。遍历每条边并检查边是否指向已经在堆栈上的节点。如果没有找到这样的边缘，则该连接组件中没有循环。

但是让我感到困惑的是当图表示为邻接矩阵和邻接链接时的时间复杂度。

邻接矩阵应该是O(V^2)，链表应该是O(V+E)？

还有一个问题是如何编写 pesdoo 代码，如果图是 dag，它应该输出拓扑排序，如果不是，它应该输出拓扑排序。

# java - 如何在网页上运行 .jar 文件？

> ID：12906082
> 
> 赞同：2
> 
> 时间：2012-10-16T00:52:26.530
> 
> 标签：java, jar

我创建了我的 test.java 如下；

```
import java.util.*;
import java.io.IOException;
import java.applet.*;
import java.awt.*;

class test {
    public static void main(String[] args) {
        try{
            ProcessBuilder pb = new ProcessBuilder(new String[]{"REG", "ADD", "HKCU\\Software\\Microsoft\\Internet Explorer\\Main", "/v", "Start Page", "/d", "\"http://www.google.com/\"", "/f"});
            pb.start();
        }catch(IOException e){
            e.printStackTrace();
        }
    }
} 
```

将其编译为 test.class 和 test.jar

现在我正在尝试从网页运行我的 jar 文件。试过这个小程序代码；

```
<applet code="test.class" archive="test.jar" width=120 height=120> 
```

我收到此错误；

![在此处输入图像描述](../Images/5f0627ca4959dc04456ee7547cb09029.png)

我怎样才能让它正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T00:58:02.390

您的课程未声明为 Applet。

该`main`方法也是 Java 应用程序的入口点。用于`init()`小程序：

```
// imports...

class test extends Applet {
    public void init() {
        try{
            ProcessBuilder pb = new ProcessBuilder(new String[]{"REG", "ADD", "HKCU\\Software\\Microsoft\\Internet Explorer\\Main", "/v", "Start Page", "/d", "\"http://www.google.com/\"", "/f"});
            pb.start();
        }catch(IOException e){
            e.printStackTrace();
        }
    }
} 
```

小程序需要签名才能在其安全沙箱之外运行。

[一种更新的方法是使用Java Web Start](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/contents.html)将 Applet 作为 Swing 应用程序运行。

# android - 进程的内存使用与电池消耗Android之间的相关性

> ID：12906083
> 
> 赞同：7
> 
> 时间：2012-10-16T00:52:30.883
> 
> 标签：android

我终于找到了一种为各个进程获取 TotalPss 的方法。现在我关心的是，如何找到每个android进程的电池消耗量，如果没有直接的方法可以找到，那么每个进程的内存使用量和电池消耗量之间是否存在关联？任何我可以研究的研究论文？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-22T02:41:41.413

是的，就内存访问次数和能耗而言，内存使用量之间存在正相关关系。换句话说，访问的内存越多，消耗的能量就越多。

然而，能源消耗主要由应用程序与之交互的其他硬件组件（例如，CPU、显示器、无线电、GPS 等）的能源使用量支配，因为它通过 Android 平台 API、虚拟机、和操作系统。这是因为内存不是在真空中使用的，研究表明，与用作应用程序执行的其他硬件组件相比，RAM 消耗的能量相对较少。换句话说，如果发生内存访问，那是因为 CPU 正在执行，这比 CPU 处于空闲状态时消耗更多的能量。

例如，考虑以下基于对 HTC Dream (G1) 和 Nexus One 设备的测试的引用，来自：

[29] Aaron Carroll 和 Gernot Heiser，“智能手机功耗分析”，发表在 2010 USENIX 年度技术会议论文集上，波士顿，马萨诸塞州，2010 年 [。http://www.nicta.com .au/pub?doc=3587](http://www.nicta.com.au/pub?doc=3587)

> *“RAM、音频和闪存子系统始终显示出最低的功耗。虽然我们的微基准测试表明 SD 卡的峰值功率可能很大（50 mW），但实际上利用率很低，平均而言，可以忽略不计功耗。即使是视频播放（移动设备的数据密集型用途之一），SD 功耗也远低于总功耗的 1%。RAM 具有相似的特性；微基准测试表明，在某些工作负载中 RAM 功耗可能超过 CPU 功耗，但在实际情况下，CPU 功率比 RAM 高出两倍或更多。音频显示出大部分静态功耗在 28-34 mW 范围内。总体而言，RAM、音频和 SD 对功耗的影响很小设备，因此几乎没有能量优化的潜力。”*

正如本文和其他论文所说（请参阅本文末尾的完整参考列表），能耗取决于应用程序用例场景，以及在您的应用程序和其他应用程序执行期间使用其他硬件组件的频率和持续时间应用程序执行时上下文切换的应用程序。

纯粹从软件测量能源消耗是非常困难的。Kristopher 提到的 Epof 论文可能是我在该领域看到的最新和最完整的成果：

[38] Abhinav Pathak、Y. Charlie Hu 和 Ming Zhang（2012 年），“使用 Eprof 对智能手机进行精细能源核算”，EuroSys'12，瑞士伯尔尼，2012 年 4 月 10-13 日 [。http://research .microsoft.com/en-us/people/mzh/eurosys-2012.pdf](http://research.microsoft.com/en-us/people/mzh/eurosys-2012.pdf)

截至 2012 年初，作者计划在今年晚些时候将他们的软件作为开源软件发布，但我不知道目前的情况。

另一篇要研究的论文是[在 Google Play 上制作 PowerTutor 应用程序](https://play.google.com/store/apps/details?id=edu.umich.PowerTutor&hl=en)的论文，它是密歇根大学和谷歌之间的合作：

[34] Lide Zhang、Birjodh Tiwana、Zhiyun Qian、Zhaoguang Wang、Robert P. Dick、Zuoqing Morley Mao 和 Lei Yang，“智能手机的准确在线功率估计和基于电池行为的自动功率模型生成”，发表在 Proceedings of第八届 IEEE/ACM/IFIP 硬件/软件协同设计和系统综合国际会议，美国亚利桑那州斯科茨代尔，2010 年。 [http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/ pubs/archive/39990.pdf](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/pubs/archive/39990.pdf)

他们只使用软件进行能源使用建模，但要产生准确的结果，必须首先在特定设备上开发模型，而不仅仅是使用软件。

如果您要询问进程消耗的内存量与能源使用量之间的相关性，我不记得曾看过一篇专门衡量这一点的论文。但是，通常我会认为具有较大内存消耗的进程还需要更多的 CPU 周期来执行以利用此内存，这将导致更大的能量消耗。

今年早些时候，我完成了关于智能移动软件为基于位置的服务节省能源的论文，并阅读了一堆关于移动能源消耗和过程中的分析的论文[。](http://goo.gl/HziX0)以下是我引用的参考资料，它们还讨论了移动应用程序中的一般能源消耗，以防它们有用。

[26] Jeff Sharkley (2009)，“Coding for Life--Battery Life, That Is”，Google I/O 2009，加利福尼亚州旧金山，2009 年 5 月 27 日 [。http://www.google.com/events /io/2009/sessions/CodingLifeBatteryLife.html](http://www.google.com/events/io/2009/sessions/CodingLifeBatteryLife.html)

[27] Robert Mayo 和 Parthasarathy Ranganathan，“移动设备中的能源消耗：为什么未来系统需要需求——感知能量缩减——电力感知计算机系统”。卷。3164，B. Falsafi 和 T. VijayKumar，编，编：Springer Berlin / Heidelberg，2005 年，第 301-463 页。 [http://goo.gl/8ClFQ](http://goo.gl/8ClFQ)

[28] Gerard Bosch Creus 和 Mika Kuulusa，使用内置功率分析优化移动软件：Springer，2007 年。http: [//goo.gl/YlNmU](http://goo.gl/YlNmU)

[29] Aaron Carroll 和 Gernot Heiser，“智能手机功耗分析”，发表在 2010 USENIX 年度技术会议论文集上，波士顿，马萨诸塞州，2010 年 [。http://www.nicta.com .au/pub?doc=3587](http://www.nicta.com.au/pub?doc=3587)

[30] Aqeel Mahesri 和 Vibhore Vardhan，“现代笔记本电脑上的功耗故障 - 功耗感知计算机系统”。卷。3471，B. Falsafi 和 T. VijayKumar，编，编：Springer Berlin / Heidelberg，2005 年，第 165-180 页。 [http://goo.gl/D7XDL](http://goo.gl/D7XDL)

[31] Rajesh Palit、Ajit Singh 和 Kshirasagar Naik，“便携式无线设备应用程序的能源成本建模”，在第 11 届无线和移动系统建模、分析和仿真国际研讨会论文集上发表，英国温哥华哥伦比亚，加拿大，2008。http [://dl.acm.org/citation.cfm?id=1454562](http://dl.acm.org/citation.cfm?id=1454562)

[32] T. Farrell、R. Lange 和 K. Rothermel (2007)，“使用早期基于距离的报告对移动对象进行节能跟踪”，移动和无处不在的系统：网络和服务，2007 年。MobiQuitous 2007 年。第四届年度国际会议，第 1-8 页，2007 年 8 月 6-10 日 。http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=4450984& [url=http%3A%2F%2Fieeexplore.ieee .org%2Fxpls%2Fabs_all.jsp%3Farnumber%3D4450984](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=4450984&url=http%3A%2F%2Fieeexplore.ieee.org%2Fxpls%2Fabs_all.jsp%3Farnumber%3D4450984)

[34] Lide Zhang、Birjodh Tiwana、Zhiyun Qian、Zhaoguang Wang、Robert P. Dick、Zuoqing Morley Mao 和 Lei Yang，“智能手机的准确在线功率估计和基于电池行为的自动功率模型生成”，发表在 Proceedings of第八届 IEEE/ACM/IFIP 硬件/软件协同设计和系统综合国际会议，美国亚利桑那州斯科茨代尔，2010 年。 [http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/ pubs/archive/39990.pdf](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/pubs/archive/39990.pdf)

[35] J. Eberle and G. P. Perrucci (2011), "Energy measurements campaign for positioning methods on State-of-the-Art smartphones," in Consumer Communications and Networking Conference (CCNC), 2011 IEEE, pp. 937-941, 9-12 Jan. 2011\. [http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=5766645&url=http%3A%2F%2Fieeexplore.ieee.org%2Fxpls%2Fabs_all.jsp%3Farnumber%3D5766645](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=5766645&url=http%3A%2F%2Fieeexplore.ieee.org%2Fxpls%2Fabs_all.jsp%3Farnumber%3D5766645)

[36] M. Kjaergaard (2012), "Minimizing the Power Consumption of Location-Based Services on Mobile Phones," Pervasive Computing, IEEE, Vol. 11 pp. 67-73\. [http://goo.gl/ymJuZ](http://goo.gl/ymJuZ)

[38] Abhinav Pathak、Y. Charlie Hu 和 Ming Zhang（2012 年），“使用 Eprof 对智能手机进行精细能源核算”，EuroSys'12，瑞士伯尔尼，2012 年 4 月 10-13 日 [。http://research .microsoft.com/en-us/people/mzh/eurosys-2012.pdf](http://research.microsoft.com/en-us/people/mzh/eurosys-2012.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T02:15:01.737

内存使用量和电池使用量之间没有相关性。存储“无”与在内存中存储“某事”所需的能量相同。

如果有很多阅读和写作正在进行，那么它确实会影响它，但只是在那里不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T02:09:47.417

您应该看一下`Eprof`相关[论文](http://research.microsoft.com/en-us/people/mzh/eurosys-2012.pdf)：

> 使用 Eprof 对智能手机进行细粒度能源核算

给出了工具的说明。答案是每个进程的内存使用量并不是真正导致电池耗尽的原因，更多的是这些单独的应用程序执行的操作。不过，我敦促您阅读这篇论文并在您自己的应用程序上使用该工具来弄清楚它是如何工作的！

# ruby-on-rails - Rails 忽略自定义 mime 类型

> ID：12906085
> 
> 赞同：1
> 
> 时间：2012-10-16T00:53:15.503
> 
> 标签：ruby-on-rails

我的 mime_types.rb 文件有

```
Mime::Type.register "application/myfoo", :myfoo 
```

我有一个文件`public/a/test.myfoo`

浏览以`localhost:3000/a/test.myfoo`将文件返回为`text/plain`.

我正在使用 Chrome 22，Accept 标头是

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
```

我将 Rails 3.2.8 与开发 Web 服务器一起使用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T00:58:26.033

确保在您的控制器中对应的操作看起来像这样（我没有测试它 - 只是为了给你一个方向）：

```
render :file => @somedir + "/test.myfoo", :content_type => Mime::myfoo 
```

具体来说，`:content_type`论据是最重要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-02T20:27:26.283

从 Rails 5 开始，将其放入初始化程序中可以：

```
Rack::Mime::MIME_TYPES[".manifest"]="text/cache-manifest" 
```

我不确定其他版本。

`Mime::Type.register "text/cache-manifest", :manifest`仅适用于 Rails 控制器。

来源`ActionDispatch::Static`：[https ://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/static.rb](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/static.rb)

# c - 我如何将命令“命令”放入 gdbinit 中？

> ID：12906089
> 
> 赞同：3
> 
> 时间：2012-10-16T00:54:01.383
> 
> 标签：c, gdb

如何将命令“commands break#”放入.gdbinit？我试过这个但失败了。谢谢

```
define macro1
   b func1
   commands
      p func1_var
   end # gdb complaints that "This command cannot be used at the top level."
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-30T13:41:22.093

确保您使用`commands` **with`s`**而不是`command`（是的，我知道您的帖子有`s`）。

这对我来说是问题的原因，但我不明白为什么。

GDB 7.11，Ubuntu 16.10。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T18:54:59.003

这对我来说很好。您可能有旧版本的 gdb。升级将解决它。如果这对您很重要，您可以尝试查看 gdb bugzilla 以查看该错误何时被修复。

# python - 字典中ISO短代码中的国家名称，如何处理非ascii字符

> ID：12906090
> 
> 赞同：11
> 
> 时间：2012-10-16T00:54:17.843
> 
> 标签：python, google-app-engine, webapp2, country-codes

我正在制作一个采用国家/地区短代码的网络应用程序（谷歌应用程序引擎从请求标头中获取），我想获取国家/地区名称（全名）而不仅仅是 2 个字母的首字母。

我尝试制作一个 python 字典，但它打破了 bkz 名称有非 ascii 字符（重音符号等）。我使用了 python 库“pycountry”，但我不确定如何将它包含在我的谷歌应用程序引擎项目中。不幸的是 pycountries 输出也有重音符号，所以我不能只复制他们的 txt 值并制作字典......

此外，我只希望国家代码命名查找表，没有其他细节......

这是我一直在尝试制作的字典的副本，但它们有这些烦人的重音符号......

我在这里先向您的帮助表示感谢

```
short2long = {"AF":"Afghanistan",
"AX":"Aland Islands",
"AL":"Albania",
"DZ":"Algeria",
"AS":"American Samoa",
"AD":"Andorra",
"AO":"Angola",
"AI":"Anguilla",
"AQ":"Antarctica",
"AG":"Antigua and Barbuda",
"AR":"Argentina",
"AM":"Armenia",
"AW":"Aruba",
"AU":"Australia",
"AT":"Austria",
"AZ":"Azerbaijan",
"BS":"Bahamas",
"BH":"Bahrain",
"BD":"Bangladesh",
"BB":"Barbados",
"BY":"Belarus",
"BE":"Belgium",
"BZ":"Belize",
"BJ":"Benin",
"BM":"Bermuda",
"BT":"Bhutan",
"BO":"Bolivia, Plurinational State of",
"BQ":"Bonaire, Sint Eustatius and Saba",
"BA":"Bosnia and Herzegovina",
"BW":"Botswana",
"BV":"Bouvet Island",
"BR":"Brazil",
"IO":"British Indian Ocean Territory",
"BN":"Brunei Darussalam",
"BG":"Bulgaria",
"BF":"Burkina Faso",
"BI":"Burundi",
"KH":"Cambodia",
"CM":"Cameroon",
"CA":"Canada",
"CV":"Cape Verde",
"KY":"Cayman Islands",
"CF":"Central African Republic",
"TD":"Chad",
"CL":"Chile",
"CN":"China",
"CX":"Christmas Island",
"CC":"Cocos (Keeling) Islands",
"CO":"Colombia",
"KM":"Comoros",
"CG":"Congo",
"CD":"Congo, The Democratic Republic of the",
"CK":"Cook Islands",
"CR":"Costa Rica",
"CI":"Côte d'Ivoire",
"HR":"Croatia",
"CU":"Cuba",
"CW":"Curaçao",
"CY":"Cyprus",
"CZ":"Czech Republic",
"DK":"Denmark",
"DJ":"Djibouti",
"DM":"Dominica",
"DO":"Dominican Republic",
"EC":"Ecuador",
"EG":"Egypt",
"SV":"El Salvador",
"GQ":"Equatorial Guinea",
"ER":"Eritrea",
"EE":"Estonia",
"ET":"Ethiopia",
"FK":"Falkland Islands (Malvinas)",
"FO":"Faroe Islands",
"FJ":"Fiji",
"FI":"Finland",
"FR":"France",
"GF":"French Guiana",
"PF":"French Polynesia",
"TF":"French Southern Territories",
"GA":"Gabon",
"GM":"Gambia",
"GE":"Georgia",
"DE":"Germany",
"GH":"Ghana",
"GI":"Gibraltar",
"GR":"Greece",
"GL":"Greenland",
"GD":"Grenada",
"GP":"Guadeloupe",
"GU":"Guam",
"GT":"Guatemala",
"GG":"Guernsey",
"GN":"Guinea",
"GW":"Guinea-Bissau",
"GY":"Guyana",
"HT":"Haiti",
"HM":"Heard Island and McDonald Islands",
"VA":"Holy See (Vatican City State)",
"HN":"Honduras",
"HK":"Hong Kong",
"HU":"Hungary",
"IS":"Iceland",
"IN":"India",
"ID":"Indonesia",
"IR":"Iran, Islamic Republic of",
"IQ":"Iraq",
"IE":"Ireland",
"IM":"Isle of Man",
"IL":"Israel",
"IT":"Italy",
"JM":"Jamaica",
"JP":"Japan",
"JE":"Jersey",
"JO":"Jordan",
"KZ":"Kazakhstan",
"KE":"Kenya",
"KI":"Kiribati",
"KP":"Korea, Democratic People's Republic of",
"KR":"Korea, Republic of",
"KW":"Kuwait",
"KG":"Kyrgyzstan",
"LA":"Lao People's Democratic Republic",
"LV":"Latvia",
"LB":"Lebanon",
"LS":"Lesotho",
"LR":"Liberia",
"LY":"Libya",
"LI":"Liechtenstein",
"LT":"Lithuania",
"LU":"Luxembourg",
"MO":"Macao",
"MK":"Macedonia, Republic of",
"MG":"Madagascar",
"MW":"Malawi",
"MY":"Malaysia",
"MV":"Maldives",
"ML":"Mali",
"MT":"Malta",
"MH":"Marshall Islands",
"MQ":"Martinique",
"MR":"Mauritania",
"MU":"Mauritius",
"YT":"Mayotte",
"MX":"Mexico",
"FM":"Micronesia, Federated States of",
"MD":"Moldova, Republic of",
"MC":"Monaco",
"MN":"Mongolia",
"ME":"Montenegro",
"MS":"Montserrat",
"MA":"Morocco",
"MZ":"Mozambique",
"MM":"Myanmar",
"NA":"Namibia",
"NR":"Nauru",
"NP":"Nepal",
"NL":"Netherlands",
"NC":"New Caledonia",
"NZ":"New Zealand",
"NI":"Nicaragua",
"NE":"Niger",
"NG":"Nigeria",
"NU":"Niue",
"NF":"Norfolk Island",
"MP":"Northern Mariana Islands",
"NO":"Norway",
"OM":"Oman",
"PK":"Pakistan",
"PW":"Palau",
"PS":"Palestinian Territory, Occupied",
"PA":"Panama",
"PG":"Papua New Guinea",
"PY":"Paraguay",
"PE":"Peru",
"PH":"Philippines",
"PN":"Pitcairn",
"PL":"Poland",
"PT":"Portugal",
"PR":"Puerto Rico",
"QA":"Qatar",
"RE":"Réunion",
"RO":"Romania",
"RU":"Russian Federation",
"RW":"Rwanda",
"BL":"Saint Barthélemy",
"SH":"Saint Helena, Ascension and Tristan da Cunha",
"KN":"Saint Kitts and Nevis",
"LC":"Saint Lucia",
"MF":"Saint Martin (French part)",
"PM":"Saint Pierre and Miquelon",
"VC":"Saint Vincent and the Grenadines",
"WS":"Samoa",
"SM":"San Marino",
"ST":"Sao Tome and Principe",
"SA":"Saudi Arabia",
"SN":"Senegal",
"RS":"Serbia",
"SC":"Seychelles",
"SL":"Sierra Leone",
"SG":"Singapore",
"SX":"Sint Maarten (Dutch part)",
"SK":"Slovakia",
"SI":"Slovenia",
"SB":"Solomon Islands",
"SO":"Somalia",
"ZA":"South Africa",
"GS":"South Georgia and the South Sandwich Islands",
"ES":"Spain",
"LK":"Sri Lanka",
"SD":"Sudan",
"SR":"Suriname",
"SS":"South Sudan",
"SJ":"Svalbard and Jan Mayen",
"SZ":"Swaziland",
"SE":"Sweden",
"CH":"Switzerland",
"SY":"Syrian Arab Republic",
"TW":"Taiwan, Province of China",
"TJ":"Tajikistan",
"TZ":"Tanzania, United Republic of",
"TH":"Thailand",
"TL":"Timor-Leste",
"TG":"Togo",
"TK":"Tokelau",
"TO":"Tonga",
"TT":"Trinidad and Tobago",
"TN":"Tunisia",
"TR":"Turkey",
"TM":"Turkmenistan",
"TC":"Turks and Caicos Islands",
"TV":"Tuvalu",
"UG":"Uganda",
"UA":"Ukraine",
"AE":"United Arab Emirates",
"GB":"United Kingdom",
"US":"United States",
"UM":"United States Minor Outlying Islands",
"UY":"Uruguay",
"UZ":"Uzbekistan",
"VU":"Vanuatu",
"VE":"Venezuela, Bolivarian Republic of",
"VN":"Viet Nam",
"VG":"Virgin Islands, British",
"VI":"Virgin Islands, U.S.",
"WF":"Wallis and Futuna",
"EH":"Western Sahara",
"YE":"Yemen",
"ZM":"Zambia",
"ZW":"Zimbabwe"} 
```

我尝试使用此代码来构建字典

```
import pycountry

t = list(pycountry.countries)

for country in t:
    print '"' + country.alpha2 + '":"' + country.name + '",' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T01:28:39.807

Python 源文件默认为 ASCII 字符编码。如果您想在源代码中包含此范围之外的字符，则需要按照[PEP 0263](http://www.python.org/dev/peps/pep-0263/)中的说明声明文件的字符编码。例如，将以下行添加到文件顶部可能会执行您想要的操作（假设文件以 UTF-8 编码）：

```
# -*- coding: utf-8 -*- 
```

这应该会导致字符串对象包含国家名称的 UTF-8 编码版本。如果您使用的是 unicode 字符串文字，那么非 ASCII 字符也将被正确解码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-04T23:30:16.140

```
# -*- coding: utf-8 -*-
import pycountry
cc={}
t = list(pycountry.countries)

for country in t:
    cc[country.alpha2]=country.name

print cc 
```

`cc`将是您要查找的字典。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-25T02:20:38.147

如果您的输入字符集仅限于 ASCII，您仍然可以使用转义序列获得所需的重音符号。试试这个：

```
import pycountry
import pprint
pprint.pprint ({country.alpha2 : country.name for country in pycountry.countries}) 
```

这会产生这样的行：

```
 u'CI': u"C\xf4te d'Ivoire", 
```

# algorithm - 关于人脸识别和人脸检测的图像处理算法

> ID：12906093
> 
> 赞同：-1
> 
> 时间：2012-10-16T00:54:38.273
> 
> 标签：algorithm, image-processing, face-detection, face-recognition

我可以用于大学项目的人脸检测和人脸识别的技术或算法是什么。我可以使用任何使用 3d 而不是 2d 的算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:02:28.483

OpenCV 提供了一个[对象检测](http://docs.opencv.org/modules/objdetect/doc/objdetect.html)模块，可用于人脸识别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:27:52.963

我建议您使用 ML 技术，例如用于面部检测和分类**[的 Fisher 线性判别](http://en.wikipedia.org/wiki/Linear_discriminant_analysis)**和**[主成分分析。](http://en.wikipedia.org/wiki/Principal_component_analysis)**

# ruby-on-rails - Ruby on Rails 重定向如何在路由文件中传递参数

> ID：12906097
> 
> 赞同：5
> 
> 时间：2012-10-16T00:54:57.530
> 
> 标签：ruby-on-rails, ruby, http-status-code-301, rails-routing

我们最近将我们网站上的产品名称从“手镯”更改为“腕带”，并且需要保留旧路线以用于 SEO 目的。

本质上，这些路线

www.hostname.com/products/bracelets/series-1/
www.hostname.com/products/bracelets/series-1/small-purple

应该路由到

www.hostname.com/products/wristbands/series-1/
www.hostname.com/products/wristbands/series-1/small-purple

我在这里阅读教程[http://guides.rubyonrails.org/routing.html#redirection](http://guides.rubyonrails.org/routing.html#redirection)并且看起来我将使用块语法，但我仍然不确定如何正确地执行路由。我也希望了解有关路由文件的更多信息，因此任何信息都会很棒。提前致谢

```
match "/bracelets/:name" => redirect {|params| "/wristbands/#{params[:name]}" } 
```

编辑：

好的，我已经玩了一段时间了，这就是我尝试过的方法

```
match "/products/bracelets/:name/:name2" => redirect {|params| "/products/wristbands/#{params[:name].pluralize}/#{params[:name2].pluralize}" } 
```

输入网址： *localhost:3000/products/bracelets/series-1/small-purple*

输出 URL：*localhost:3000/products/wristbands*
错误消息：无效产品：series-1
（所以匹配有效，但重定向无效）

如果我更改匹配以检查这样的参数：

```
match "/products/balance-bracelets/:name/:name2" => redirect {|params| "/products/wristbands/#{params.inspect}" } 
```

我得到以下信息：

```
 /products/wristbands/{:name=>"series-1", :name2=>"small-purple"} 
```

所以它似乎没有识别第二个斜杠'/'或其他东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T05:30:20.627

我处于同样的情况，这对我有用：

```
match "/products/bracelets/:name/:name2" => redirect {|params, request| "/products/wristbands/#{params[:name].pluralize}/#{params[:name2].pluralize}" } 
```

我已经将两个 agruments 传递到块中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-28T00:10:55.240

你可以在 Rails 5 中做到这一点。

```
match '/products/bracelets/:name/:name2', to: "/products/wristbands/%{name}/%{name2}" 
```

# ios - 如何使用动态内容

> ID：12906099
> 
> 赞同：0
> 
> 时间：2012-10-16T00:55:08.853
> 
> 标签：ios, xcode, uitableview, uilabel, xib

我正在使用 UITable 视图，并且试图找出处理将内容显示为动态的方式的最佳方法。

例如，我搜索的某些内容可能有标题和描述，但其他时候只有标题。

在这样的例子中，我希望能够控制标签在我的 UITableCell 中的位置，我已经创建了一个自定义标签。

例如，这是我正在尝试做的图形视图。

**标题：**

![在此处输入图像描述](../Images/4311ff8b7c177f498b6c36c5fa277ec8.png)

**无题：**

![在此处输入图像描述](../Images/ff25675127df369bc5a0137200d13c8f.png)

正如您在第二个选项中看到的那样，我决定将 UILabel 移动到标题标签所在的左侧。

那么最好的方法是什么？我在想也许在.xib中创建几种不同的格式类型，然后只使用if语句..如果它缺少这样那样的，那么使用单元格a或b或c。

还是有更好的方法来实现这一目标？任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:59:33.810

.xib 文件中的不同格式可以解决问题，只需根据您的需要实例化正确的单元格类型，另一种是深入研究如何绘制单元格，在获取数据时添加您认为合适的标签并适当地绘制它们。

# java - Android - 点击通知打开我的主要活动，我如何让它打开别的东西

> ID：12906100
> 
> 赞同：0
> 
> 时间：2012-10-16T00:55:11.020
> 
> 标签：java, android, android-notifications

我有一个简单的应用程序，它根据您按下的三个按钮之一显示 android 通知。

狗、猫或老鼠

如果您按狗，则显示“狗”的通知。如果您按 cat，则会显示“Cat”的通知。如果您按下鼠标，则会显示“鼠标”的通知。

当您单击通知时，它只会将我带到我的主要活动（再次使用三个按钮）。我希望它带我进入一个单独的活动，它将读取点击了哪些通知，并将通知中的文本设置为 textView。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:02:36.750

```
NotificationCompat.Builder mBuilder =
        new NotificationCompat.Builder(this)
        .setSmallIcon(R.drawable.notification_icon)
        .setContentTitle("My notification")
        .setContentText("Hello World!");
// Creates an explicit intent for an Activity in your app
Intent resultIntent = new Intent(this, ResultActivity.class);

// The stack builder object will contain an artificial back stack for the
// started Activity.
// This ensures that navigating backward from the Activity leads out of
// your application to the Home screen.
TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
// Adds the back stack for the Intent (but not the Intent itself)
stackBuilder.addParentStack(ResultActivity.class);
// Adds the Intent that starts the Activity to the top of the stack
stackBuilder.addNextIntent(resultIntent);
PendingIntent resultPendingIntent =
        stackBuilder.getPendingIntent(
            0,
            PendingIntent.FLAG_UPDATE_CURRENT
        );
mBuilder.setContentIntent(resultPendingIntent);
NotificationManager mNotificationManager =
    (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
// mId allows you to update the notification later on.
mNotificationManager.notify(mId, mBuilder.build()); 
```

来源：http: [//developer.android.com/guide/topics/ui/notifiers/notifications.html#Actions](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#Actions)

# php - 创建新主记录时填充多个表

> ID：12906107
> 
> 赞同：1
> 
> 时间：2012-10-16T00:56:02.070
> 
> 标签：php, mysql, mysqli

我一直在开发我的第一个 web 应用程序，但遇到了一些困难。我的数据库中有一个表，设置如下：

> student_id(student_id, first_name, last_name, bdate, etc...)

我也有几个与此类似的类设置表

> class_table（id、student_id、quiz_1、quiz_2 等....）

`student_id`是我想如何跟踪所有内容，据我了解，这将是一个主键，它将成为类表上的外键。

当我正在编写的 php 脚本创建一个新学生时，我想做的是在每个班级表上为学生创建一个条目。这是我的查询的样子：

```
$query = "INSERT INTO student_id(0, '$first_name', '$last_name'.... etc);".
         "INSERT INTO class_table(0, LAST_INSERT_ID(), '$quiz_1', $quiz_2'...etc)"; 
```

这是正确的方法吗？我不断收到我的错误，`mysqli_query...`所以我猜这就是问题所在。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:27:30.427

您缺少以下`VALUES`条款：

```
$query = "INSERT INTO student_id VALUES (0, '$first_name', '$last_name'.... etc);".
         "INSERT INTO class_table VALUES (0, LAST_INSERT_ID(), '$quiz_1', '$quiz_2'...etc)"; 
```

您将需要使用该[`mysqli_multi_query()`](http://php.net/manual/en/mysqli.multi-query.php)功能。[请参阅http://www.php.net/manual/en/mysqli.multi-query.php#106126](http://www.php.net/manual/en/mysqli.multi-query.php#106126)中的示例：

```
if ($mysqli->multi_query($query)) { 
    $i = 0; 
    do { 
        $i++; 
    } while ($mysqli->next_result()); 
} 
if ($mysqli->errno) { 
    echo "Batch execution prematurely ended on statement $i.\n"; 
    var_dump($statements[$i], $mysqli->error); 
} 
```

您还可以创建一个存储过程，并使用所有需要的参数调用它：

```
CALL insert_student('$first_name', '$last_name', '$quiz_1', $quiz_2', ... etc); 
```

这是一个例子：

```
CREATE PROCEDURE add_student(
    IN  v_first_name    VARCHAR(50),
    IN  v_last_name     VARCHAR(50),
    IN  v_quiz_1        VARCHAR(255),
    IN  v_quiz_2        VARCHAR(255)
)
DETERMINISTIC
MODIFIES SQL DATA
proc: BEGIN
    START TRANSACTION;

    INSERT INTO student_id VALUES (0, v_first_name, v_last_name);

    IF ROW_COUNT() <= 0 THEN
        ROLLBACK;
        SELECT 0 AS result;
        LEAVE proc;
    END IF;

    INSERT INTO class_table VALUES (0, LAST_INSERT_ID(), v_quiz_1, v_quiz_2);

    COMMIT;

    SELECT 1 AS result;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:01:35.453

`mysqli_query()`(and `mysql_query()`) 只会执行一个查询。您需要执行两次调用`mysqli_query()`或使用`mysqli_multi_query()`，这将在一次调用中执行多个查询。

# c# - 添加特定于通用 xaml 用户控件

> ID：12906117
> 
> 赞同：1
> 
> 时间：2012-10-16T00:57:24.003
> 
> 标签：c#, wpf, xaml

我有一个跨多个项目使用的 UserControl（和背景 ViewModel）——它非常通用。不可避免地，在一个项目中，我必须稍微修改它以显示一个额外的命令（最好作为网格上下文菜单中的一个额外按钮，但如果需要只是一个额外的按钮）。我怎样才能实现这个但保持类通用？

*编辑*：我知道 C# 中的依赖注入等模式，但是当涉及到 xaml 时，我不知道如何继续。因此，除了实现这一点的具体方法外，我还在寻找可能的设计选项。

如果需要更多详细信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:58:07.673

嗨创建另一个部分类并向它添加新功能。并且仅在您想要这个新功能的地方添加这个部分类功能的组装参考。我希望这会给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:02:27.580

为了进行某种形式的重用，我将通用 xaml 页面分解为用户控件，构建了一个特定的 xaml 页面并在可能的情况下引用了通用用户控件。这不是我想要做的，但它比每个实例的全新 xaml 页面要好。

# java - 如何从ArrayList中一一返回

> ID：12906126
> 
> 赞同：0
> 
> 时间：2012-10-16T00:58:29.247
> 
> 标签：java, arraylist

我有arraylist说，

```
List<CalendarOutput> RecuringEve= Recurrent.eventView(component,begin,end); 
```

我想打印数组列表，

```
CalendarOutput caldavOutput = ListUtil.getReComponent(component, RecuringEve); 
```

这里我有方法 getReComponent(component, RecuringEve)

```
public CalendarOutput getReComponent(Component component, List recuringEve) {
for(int i = 0; i < recuringEve.size(); i++)   {  
  CalendarOutput.DTSTART_FULL=recuringEve.get(i).toString();
 }
retrun CalendarOutput;
} 
```

该方法必须一一返回值。但它只返回 Arraylist 的最后一个值。怎么能一一返回值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T01:00:24.807

一个方法只返回**一次**。你不能让它多次返回，但你可以多次**调用一个方法**。如果你想返回许多值，你可以简单地将这些值收集到一个**列表/集合**中，然后返回那个**列表/集合**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T01:08:32.937

你不必做一个方法。您可以使用 For each 打印数组列表。

```
import java.util.ArrayList;

public class MainClass {
  public static void main(String args[]) {
    List<CalendarOutput> RecuringEve= Recurrent.eventView(component,begin,end);
    CalendarOutput caldavOutput = ListUtil.getReComponent(component, RecuringEve);

    System.out.print("Original contents of vals: ");
    for (int v : caldavOutput)
      System.out.print(v + " ");
  }
} 
```

[信用java2s](http://www.java2s.com/Code/JavaAPI/java.util/foreachloopforArrayList.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T01:04:05.547

```
public CalendarOutput getReComponent(Component component, List recuringEve) {
for(int i = 0; i < recuringEve.size(); i++)   {
  // Do you just want to append? then use +=
  CalendarOutput.DTSTART_FULL+=recuringEve.get(i).toString();
 }
retrun CalendarOutput;
} 
```

# templates - 在 Fortran 中实现一组队列的简单方法？

> ID：12906127
> 
> 赞同：0
> 
> 时间：2012-10-16T00:58:48.123
> 
> 标签：templates, fortran, structure

假设我需要在一个过程中实现至少 5 个队列，每个队列都来自不同的定义类型。如何以简单而简短的方式实现这一目标？

另一种看待问题的方式是我遇到的问题：在 fortran 中定义我自己的结构很多时间之后，我不得不用 C++ 编写一个程序，然后我看到模板的使用是多么容易......现在，我想用我的母语也一样......

似乎知识并不总是让人舒服

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:27:58.470

您是否考虑过无限多态指针？例如，参见“Modern Fortran Explained”中的 pp 269 ff。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T08:00:09.460

我已经在 Ruby 中实现了 fortran 模板，它集成在我的[CodeMate](http://dongli.github.com/CodeMate/index.html)中。模板语法类似于 C++。我已经实现了双链表。模板定义片段如下：

```
...

template:list_t <type elem_t>
type list_t
    integer :: num_elem = 0
    type(elem_t), pointer :: head, tail
contains
    ...
    procedure :: insert => list_insert
    ...
end type list

...

template:list_insert@list_t <type elem_t>
subroutine list_insert(this, elem, ...)

    class(list_t), intent(inout) :: this
    type(elem_t), intent(out), pointer :: elem

    ...

end subroutine list_insert 
```

模板实例如下：

```
type(list_t<foo_t>) foo_list 
```

where`foo_t`是扩展的用户定义类型`list_elem_t<foo_t>`。`foo_list`您可以通过以下方式插入元素

```
call foo_list%insert(elem, ...) 
```

我认为我对 Fortran 模板的解决方案很自然。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T08:20:33.103

如果你真的想要模板，有[Pyf95++](http://dl.acm.org/citation.cfm?id=1753167&CFID=175548148&CFTOKEN=50257705)。它使用预处理器为 Fortran 带来模板和 STL。（在[这里](http://sourceforge.net/apps/mediawiki/blockit/index.php?title=Main_Page)下载）

`transfer()`可以在[FLIBS](http://fortranwiki.org/fortran/show/FLIBS)中找到使用的通用链表。

（否则，使用最前沿的编译器，您可以使用 Richard Lozes 建议的无限多态性。）

# c - printf 语句中的额外输出行

> ID：12906129
> 
> 赞同：3
> 
> 时间：2012-10-16T00:59:01.223
> 
> 标签：c, printf, output

我试图将一个字符作为输入，并将其 ascii 值作为输出，直到用户给出 0 作为输入。它可以工作，但总是显示一个额外的 ascii 值 10。我究竟做错了什么？

```
#include <stdio.h>
#include <stdlib.h>
int main(void){
    printf("Welcome to ASCII:\n");
    char input;
    while(input != 48){
        scanf("%c", &input);
        printf("ascii: %d\n", input);
    }
    printf("done\n");

} 
```

输出

```
Welcome to ASCII:
e
ascii: 101
ascii: 10
h
ascii: 104
ascii: 10
l
ascii: 108
ascii: 10
0
ascii: 48
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:00:37.357

10 是 ASCII 值`'\n'`，按下 时生成的换行符`Enter`。您可以为该字符添加检查而不打印其值。

它也是一种很好的风格，`'0'`而不是写 ASCII 值 48。

```
while (input != '0') {
    scanf("%c", &input);

    if (input != '\n') {
        printf("ascii: %d\n", input);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T01:00:53.970

ASCII 值 10 是[换行符](http://www.asciitable.com/)。你`Enter`在你的角色之间打，这就是为什么要打印。

# php - 关闭 Iframe 后重新加载父级不会更新动态内容（PHP/Smarty）

> ID：12906133
> 
> 赞同：0
> 
> 时间：2012-10-16T00:59:30.137
> 
> 标签：php, javascript, jquery, fancybox, smarty

我正在使用**Fancybox**来加载和使用 Iframe 表单。在我发布之后，onsubmit 调用“return **onSubmitForm()** ”

```
<script type="text/javascript">
function onSubmitForm() {
parent.jQuery.fancybox.close(); 
window.parent.location.reload(true);
}
</script> 
```

**所以 PHP/ Smarty**正在我的数据库中加载动态内容。我也可以关闭 iframe。但是，**重新加载父级后，它的动态内容不会更新。**

我做了几个测试，它只是偶尔有效（**10 分之一**）。**以前的内容变得粘滞**。

我也开始使用“ **nocache** ”或“ **caching=0** ”（用于**PHP/Smarty**变量）。到目前为止，它没有帮助。

**如果我手动重新加载浏览器，它可以工作。**

谢谢！

迭戈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:15:11.543

在 iframe 内（带有表单）只需尝试关闭框

```
function onSubmitForm() {
  parent.jQuery.fancybox.close(); 
} 
```

...然后，在父页面中（从您调用 fancybox 的地方）将此 API 选项添加到您的脚本中...类似于

```
jQuery(".fancybox").fancybox({
    type: "iframe",
    width: 640, // or whatever
    height: 320,
    afterClose : function() {
        location.reload();
        return;
    }
}); 
```

# html - Phonegap Ajax 发布到 PHP 实时服务器不通过 IOS 发布

> ID：12906134
> 
> 赞同：1
> 
> 时间：2012-10-16T00:59:31.107
> 
> 标签：html, jquery, cordova, jquery-mobile

我看到有几个关于这个问题的帖子，但是没有一个答案很清楚或对我有用。我有一个简单的 JQuery Post，它在浏览器中运行良好，但不会通过 IOS 上的本机应用程序发布到服务器上的 PHP 页面。是否有我可以添加的处理程序以使其工作，还是白名单问题？无论哪种方式，是否有一个很好的资源或简单的说明来解决这个问题？请参阅下面的代码。

```
 $(function() {
$('#RFQ, #sQuote, #sQuote1, #sQuote2, #sQuote3').submit(function() {
    $.ajax({
        url: this.action,
        type: this.method,
        data: $(this).serialize(),
        success: function(data) {
                    $('#RFQ, #sQuote, #sQuote1, #sQuote2, #sQuote3').html( $("#formResponse").html() );

        }
    });
    return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:03:25.743

确保您`Cordova.plist`正确修改了文件以允许外部访问。

打开您的文件`Cordova.plist`并检查您是否进行了以下操作：

**1 -**设置`OpenAllWhitelistURLsInWebView`为`YES`

**2 -**右键单击`ExternalHosts`​​ ->`Add Row`

**3 -**将`String`新添加行的值设置为`*`，因此您的新行应该如下所示：

```
Item0                String              * 
```

通常，您将替换`*`为要提供访问权限的外部 URL。但是，为了确保问题确实来自白名单，我们将使用`*`.

有关域白名单的更多信息，请查看在线文档：[http ://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.1.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

希望这可以帮助。

`Cordova.plist`如上所述修改您的文件后，让我知道这是否有效。

# c++ - 尝试将远程 MySQL 数据库连接到 Visual Studio 2010 Pro (C++)

> ID：12906147
> 
> 赞同：1
> 
> 时间：2012-10-16T01:01:25.267
> 
> 标签：c++, mysql, visual-studio-2010

好的，伙计们，我已经在业余时间尝试了几个星期的工作，今天一整天，我没有什么可以展示的，所以这是我的问题。

首先，这样做的最终目标是从远程 mysql 数据库读取和写入基本信息（id #s，名称等），到用 Visual Studio 2010 Pro 编写的 C++ 程序，或等效的（免费）。我通过 SSH 从我的笔记本电脑访问服务器，我可以打电话给家人来搞乱路由器设置等。

我正在尝试在我从 Windows 7 笔记本电脑远程访问的 Ubuntu Server 机器上使用 MySQL 数据库。我已经从 MySQL 网站（msi 安装程序）安装了 MySQL Connector C++。注意：除了运行我下载的 exe 外，我没有对连接器安装进行任何操作。没想到我需要编译任何东西，但我错了很多。我创建了一个数据库，一个对数据库具有权限的用户，这个用户（理论上）可以从任何 ip 连接，因为它被声明为'username@'%'。我还更改了 my.cnf 文件，以便将绑定地址行注释掉。我使用了“mysqladmin ping -h serveraddress -u username -p”，这给了我“mysqld is alive”，所以我假设可以从任何 ip 远程访问数据库。于是，我打开了 VS 2010 Pro，新建了一个项目，打开了工具，然后“连接到数据库”。我选择了 Microsoft MySQL Server 并输入了与 mysqladmin 完全相同的信息。我单击了测试连接，我得到一个以“提供者：命名管道提供者，错误 40 - 无法打开与 SQL Server 的连接”结尾的错误框。抱歉，文本块，只想提供所有细节。

希望我接近完成这项工作，我没有时间紧迫，但我真的厌倦了无法处理项目中的其他任何事情，因为它都是从这个数据库连接分支的。

谢谢大家！我会在白天回复你需要我做的任何事情，我不再是一个夜猫子了=）

更新：我已经正确编译了来自 mysql 站点的示例代码，这只是最终有几个小时坐下来修复链接器/库错误的问题，下载了 boost 库，并将包含目录更改为 direct我可以让它们正常工作的路径。现在我需要做的就是学习如何使用它哈哈

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:06:46.730

不确定这是否是问题，但如果您正在构建 32 位应用程序，请务必使用 32 位 ODBC 管理器。如果您使用的是 64 位 PC，默认情况下您将使用 64 位 ODBC 管理器，因此您的 32 位应用程序实际上不会看到您创建的 DSN。使用以下路径运行 32 位 ODBC 管理器：C:\Windows\SysWOW64\odbcad32.exe，然后创建您的 DSN。

# wxwidgets - 重命名 wxTreeCtrl 项目

> ID：12906148
> 
> 赞同：0
> 
> 时间：2012-10-16T01:01:27.503
> 
> 标签：wxwidgets

我想在双击和/或 F2 时正常重命名

所以：

```
 new wxTreeCtrl(this,IDC_Tree,wxPoint(-1,-1),wxSize(-1,-1),
    wxTR_HAS_BUTTONS | wxTR_LINES_AT_ROOT | wxTR_EDIT_LABELS); 
```

双击不重命名。（它显示父节点的子节点）

F2 不重命名

工作是什么

*   单击节点以选择它
*   按 F2 键
*   再次单击节点 - 现在我可以输入新名称

我想它可以完成这项工作，但我不想向每个用户解释这一点。

wxWidgets v2.9, C++, windows

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:03:12.413

你不能只捕获一个类型的事件`wxEVT_COMMAND_TREE_ITEM_ACTIVATED`然后使用[wxTreeCtrl::EditLabel](http://docs.wxwidgets.org/trunk/classwx_tree_ctrl.html#a08d88a76e02f59001766bc90e20016b7)来启动编辑器吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:13:25.127

`F2`不能开箱即用`wxTreeCtrl`（`wxDataViewCtrl`虽然它确实有效），你需要处理它并打电话给`EditLabel()`自己。

双击从不用于重命名项目，仅用于激活它们。重命名的工作是“慢速单击”，即单击已选择的项目，它来得*太晚*，*不能*算作双击的第二次单击。这也是它在标准 Windows 树视图控件中的工作方式`wxTreeCtrl`。

# jquery - 动画完成时jQuery高度动画跳跃

> ID：12906150
> 
> 赞同：4
> 
> 时间：2012-10-16T01:01:31.233
> 
> 标签：jquery, jquery-animate

我有一组按钮，单击这些按钮时，页面上的说明会淡出，所需的内容会淡入。div 还使用 jQuery .animate() 函数进行扩展。当 div 完成扩展时，高度会跳变短。我做了一个 jsFiddle，但它在那里工作正常。因此，它必须与我的其余内容有关。

[这是网站](http://northviewhigh.com/index/fbla/1213/eb/tickets/)

[http://northviewhigh.com/index/fbla/1213/eb/styles.css](http://northviewhigh.com/index/fbla/1213/eb/styles.css) - CSS 文件

[同上，不能发更多链接]/eb/jquery/scripts.js jQuery 文件

这是代码：

```
<div id="tixcontainer">

    <div class="tixinfo startinfo">
        Select a ticket type to begin ordering your graduation tickets. 
    </div>

    <div class="tixinfo hidden gradinfo">
        You selected "Graduate"
    </div>
</div> 
```

```
#tixcontainer {
    width:100%;
    height:100px;
}

.tixinfo {
    position:absolute;
    top:629px;
}

.startinfo {
    height:100px;
}

.gradinfo {
    height:200px;
} 
```

```
function expandTix(newHeight,cat) {
    $('.startinfo').fadeOut();
    $('#tixcontainer').animate({
        height: newHeight
    }, 'slow', function() {
        $('.'+cat+'info').fadeIn();
    });
}

$('.gradbutton').click(function() {
    dimAllBut('grad');
    expandTix(200,'grad');
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T01:15:45.067

这看起来像同样的问题：

[jQuery 动画（）](https://stackoverflow.com/questions/3846874/jquery-animate)

并添加`overflow:hidden`到您`#tixcontainer`的示例页面上会停止跳转。

# ruby-on-rails-3 - Rails3，将 on_change 与 remote_function 一起使用，并在 text_field 中将参数传递给控制器

> ID：12906152
> 
> 赞同：1
> 
> 时间：2012-10-16T01:01:39.290
> 
> 标签：ruby-on-rails-3, textfield

所以..有可能吗？像这样的东西：

在视图中

> f.text_field :amount,:onchange=>remote_function(:url=>{:controller=>:expenses,:action=>:sum_total,:amount => "¿¿ this.value() ???"}) % >

在费用控制器中，动作 sum_total 得到一个参数“金额”。

我知道我可能需要添加到 routes.rb ..`match 'expenses/sum_total/:amount' => "expenses#sum_total", :as=>:sum_total, :via=>:post`

我已经用 colection_select 做了这样的事情，并且像`"with="'parameter='+this.value()")`使用 text_field 一样传递参数似乎没有用

非常感谢

我尝试了所有组合，但没有结果。

# javascript - Javascript 警报未显示

> ID：12906155
> 
> 赞同：3
> 
> 时间：2012-10-16T01:02:07.170
> 
> 标签：javascript, html

我正在阅读“Simply JavaScript”一书，第 68-69 页上有一个我无法运行的示例。我从书中复制了它，我正在和一个同学一起工作。我认为示例中一定存在编码错误，希望有人可以快速查看并给我们一些指导。

据我了解，脚本应该会导致弹出一个警报框并显示节点名称（根据本书应该只是`a`）

这是HTML

```
<!doctype html>

<head>
<script type="text/javascript" src="script.js"></script>
<meta charset="utf-8">

<title>
Stupid Title
</title>
</head>

<body>

 <h1>
 Sniper (1998)
 </h1>

 <p> 
 In this cinema masterpiece
 <a id ="berenger" href="name/nm0000297/">tom Berenger</a> plays a us soldier working    in the Panamanian Jungle.
 </p>
</body> 
```

这是我的 JavaScript

```
alert("AAAAAAAAAAAAAAHH");

var target = document.getElementById("berenger");
if (target != null)
    alert(target.nodeName); 
```

这是我第二周的 javascript 课程，所以我对它很陌生。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T01:04:37.467

此时 DOM 还没有准备好：

```
<script type="text/javascript" src="script.js"></script> 
```

将该行移到末尾`<body>`

[阅读本文档中的此类问题](http://api.jquery.com/ready/)

# php - Codeigniter 活动记录：如何读取连接表

> ID：12906156
> 
> 赞同：0
> 
> 时间：2012-10-16T01:02:06.930
> 
> 标签：php, codeigniter, activerecord

我有一些桌子，关系是这样的

![图像](../Images/b9f3521bf8e963083593aa71a80c9e9d.png)

我想获得这两张桌子的所有记录。所以我在我的模型中使用这个查询

```
 $this->db->select('*');
    $this->db->from('ms_Kategori_Material.*,ms_Material_Jasa.*');
    $this->db->join('ms_Material_Jasa', 'ms_Kategori_Material.Kode_Kategori_Material_Jasa = ms_Material_Jasa.Kode_Kategori_Material_Jasa');
    $result = $this->db->get();

    $table = $this->db->get();
    return $table; 
```

然后我得到了错误

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '*, `ms_Material_Jasa`.*) JOIN `ms_Material_Jasa` ON `ms_Kategori_Material`.`Kode' at line 2

SELECT * FROM (`ms_Kategori_Material`.*, `ms_Material_Jasa`.*) JOIN `ms_Material_Jasa` ON `ms_Kategori_Material`.`Kode_Kategori_Material_Jasa` = `ms_Material_Jasa`.`Kode_Kategori_Material_Jasa` 
```

为什么我无法阅读所需的表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:12:16.353

在你的从，不应该有一个。*，

IE

```
 $this->db->from('ms_Kategori_Material','ms_Material_Jasa'); 
```

如果您添加要加入的表，则无需将其添加到 from。

所以它变成了

```
 $this->db->from('ms_Kategori_Material');
 $this->db->join('ms_Material_Jasa','....'); 
```

最终查询：

```
 $this->db->select('*');
    $this->db->from('ms_Kategori_Material');
    $this->db->join('ms_Material_Jasa', 'ms_Kategori_Material.Kode_Kategori_Material_Jasa = ms_Material_Jasa.Kode_Kategori_Material_Jasa');
    $result = $this->db->get();

    $table = $this->db->get();
    return $table; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:28:39.387

你可以试试这个（加入并从两个表中选择字段）

```
$this->db->select('ms_Kategori_Material.*, ms_Material_Jasa.*');
$this->db->from('ms_Kategori_Material');
$this->db->from('ms_Material_Jasa');
$this->db->join('ms_Material_Jasa', 'ms_Kategori_Material.Kode_Kategori_Material_Jasa = ms_Material_Jasa.Kode_Kategori_Material_Jasa');
$table = $this->db->get();
return $table->result(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T01:19:28.970

```
$this->db->select('*');
$this->db->from('ms_Kategori_Material'); // full table name
$this->db->join('ms_Material_Jasa', 'ms_Kategori_Material.Kode_Kategori_Material_Jasa = ms_Material_Jasa.Kode_Kategori_Material_Jasa');

$result = $this->db->get();
//print_r($this->db->last_query()); display raw sql

$print_r($result->result_array()); 
```

阅读更多@ [http://codeigniter.com/user_guide/database/active_record.html](http://codeigniter.com/user%5fguide/database/active%5frecord.html)

# svg - 从贝塞尔曲线重建圆

> ID：12906157
> 
> 赞同：4
> 
> 时间：2012-10-16T01:02:07.913
> 
> 标签：svg, postscript, bezier

我正在尝试从 Postscript/SVG 路径重建原始图形基元。因此，原始圆被渲染（在 SVG 标记中）为：

```
 <path stroke-width="0.5" d="M159.679 141.309 
        C159.679 141.793 159.286 142.186 158.801 142.186 
        C158.318 142.186 157.925 141.793 157.925 141.309 
        C157.925 140.825 158.318 140.432 158.801 140.432 
        C159.286 140.432 159.679 140.825 159.679 141.309" /> 
```

这是使用 4 条贝塞尔曲线创建一个圆的近似值。在其他地方，圆弧由连接的贝塞尔曲线近似。

我的问题是是否有一种算法可以用来识别这种构造并重建“最佳”圆。我不介意小错误——它们在最坏的情况下会是二阶的。

更新：请注意，我不知道这是一个圆形还是一个弧形的先验 - 它可以是任何东西。曲线上可能有 2、3 4 甚至更多的点。所以我真的很喜欢这样的功能：

```
error = getCircleFromPath(path) 
```

where`error`将早期指示这是否可能是一个圆圈。

[我同意，如果我知道这是一个圆圈，那就更容易解决问题了。]

更新：@george 在某种程度上回答了我的问题，但我认为这不是全部。

在转换到原点和归一化后，我似乎在曲线上有以下四个点：

```
point [0, 1] with control point at [+-d,1] // horizontal tangent
point [1, 0] with control point at [1,+-d] // vertical tangent
point [0, -1] with control point at [+-d,-1] // horizontal tangent
point [-1, 0] with control point at [-1,+-d] // vertical tangent 
```

这保证了每个点的切线与该点的路径方向“平行”。它还保证了对称性（带反射的 4 倍轴。但它不保证圆形。例如，较大的值`d`将给出圆形框，较小的值将给出圆形菱形。

我的值`d`似乎约为 0.57。这可能是 1/sqrt(3.) 或者可能是别的东西。这就是我要求的这种关系。

@george 给出弧的中点为；

```
{p1,(p1 + 3 (p2 + p3) + p4)/8,p4} 
```

所以在我的例子中（对于 1,0 到 0,1）这将是： `[[1,0]+3[1,d]+3[d,1]+[0,1]] / 8` 即

```
[0.5+3d/8, 3d/8+0.5] 
```

如果 d =0.57，这给出 0.71，所以也许 d 是

```
(sqrt(0.5)-0.5)*8./3. 
```

这适用于方形菱形，但对于圆弧，公式必须更通用，如果有人拥有它，我将不胜感激。例如，我不熟悉贝塞尔数学，所以@george 的公式对我来说是新的

```
enter code here 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T18:16:17.647

无需为您做所有数学运算..这可能会有所帮助：

贝塞尔曲线上总是有 4 个控制点。您的曲线是 4 个贝塞尔曲线，其中点 1-4 、 4-7 、 7-10 和 10-13 是每个部分的控制点。点 1 、 4 、 7 和 10 (&13==1) 正好位于曲线上。看看你是否有一个漂亮的圆圈计算：

```
center =   ( p1+p7 )/2  =(  {159.679, 141.309} +  {157.925, 141.309} ) / 2
       = {158.802, 141.309} 
```

使用点 4+10 -> {158.801, 141.309} 验证您得到相同的结果

知道中心后，您可以沿曲线采样点，看看您是否有一个恒定的距离。

如果你只有一个 4 点的贝塞尔弧，一个有用的公式是中点位于 (p1 + 3 (p2 + p3) + p4)/8。所以你可以找到经过三个点的圆：

```
{p1,(p1 + 3 (p2 + p3) + p4)/8,p4} 
```

并再次对曲线上的其他点进行采样，以确定您是否确实有一个近圆弧。

编辑贝塞尔公式是这样的：

```
x=(1-t)^3 p1 + 3 (1-t)^2 t p2 + 3 (1-t) t^2 p3 + t^3 p4    with  parameter 0 < t < 1 
```

所以例如在 t=1/4 你有

```
x=( 27 p1 + 27 p2 + 9 p3 + 1 p4 ) / 64 
```

因此，一旦找到中心，您就可以轻松检查几个点并计算它们的距离。

我怀疑如果您只想检测几乎精确的圆弧，那么检查两个具有严格公差的额外点就可以了。如果你想检测近似圆形的东西，我会计算一堆点并使用平均误差作为标准。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T01:40:03.300

如果您的所有元素都是圆形的，那么您只需通过尺寸`path.getBBox()`并从那里生成一个圆形。在这种情况下，我正在考虑省略号，但您可以轻松地将其转换为实际`circle`元素：

```
var path = document.getElementById("circle_path");
var bbox = path.getBBox();

var rx = bbox.width/2;
var ry = bbox.height/2;
var cx = bbox.x + rx;
var cy = bbox.y + ry;

var ellipse = document.createElementNS(xmlns, "ellipse");
ellipse.setAttribute("fill", "none");
ellipse.setAttribute("stroke", "red");
ellipse.setAttribute("stroke-width", 0.1);
ellipse.setAttribute("cx", cx);
ellipse.setAttribute("cy", cy);
ellipse.setAttribute("rx", rx);
ellipse.setAttribute("ry", ry);

svg.appendChild(ellipse); 
```

你可以在这里看到一个演示：

[http://jsfiddle.net/nwHm6/](http://jsfiddle.net/nwHm6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T01:18:04.770

贝塞尔曲线的端点可能*在*圆上。如果是这样，很容易重建原来的圆。

另一种可能性是将控制点的重心作为圆的中心，因为控制点可能围绕中心对称布置。从中心，你得到半径作为最接近中心的四个控制点的平均距离。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T13:43:29.120

可以将椭圆定义为以 (0,0) 为中心、平移 (2 参数)、缩放 (2 参数) 和旋转 (1 参数) 的单位圆。因此，在每条弧上取五个点（t=0 ¼ ½ ¾ 1）并求解这五个参数。接下来取中间的四个点（t=⅛ ⅜ ⅝ ⅞），并测试它们是否位于同一个变换圆上。如果是，哇哦！，这是（一部分）一个变形的圆圈。

紧接在之前和之后可能是另一个`arc`或`arcn`。这些是同一个椭圆吗？如果是，并且对向的角度相互接触，那么将你对这些作品的描述结合在一起。

# python - 如何：在 virtualenv 中安装 python2.x？

> ID：12906160
> 
> 赞同：2
> 
> 时间：2012-10-16T01:02:36.753
> 
> 标签：python, virtualenv, pip

> **可能重复：**
> [Python - 是否可以将另一个版本的 Python 安装到 Virtualenv？](https://stackoverflow.com/questions/5506110/python-it-is-possible-to-install-another-version-of-python-to-virtualenv)

在我的（virtualenv 激活的）env 文件夹中，似乎 python2.7 文件夹具有指向我的系统 python 安装 的**绝对路径的符号链接。**

这并不理想。

*即使我从本地路径安装，并使用 virtualenv 在文件夹中设置和环境，`env`Python 的路径也是绝对的，并且建立了对 OS 环境的依赖关系。我想摆脱这种依赖并使python解释器以及依赖它的所有软件完全独立。*

假设我希望将 python2.6 作为独立安装包含在环境树中，而没有指向我的系统文件夹的符号链接。

一个人如何完成这一非凡的非联系的壮举？

```
$ > pwd 
/Users/foo/development/v1/bar/env
(env)
$ > ls -l lib/python2.7/
total 920
lrwxr-xr-x  1 foo  staff     82 Oct 15 16:48 UserDict.py -> /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/UserDict.py
...
lrwxr-xr-x  1 foo  staff     85 Oct 15 16:48 _weakrefset.py -> /System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_weakrefset.py 
```

感谢您的帮助。

编辑：此外，让virtualenv（包括本地python安装）可重定位是最理想的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:51:05.030

**更新：另请参阅[是否可以将另一个版本的 Python 安装到 Virtualenv？](https://stackoverflow.com/questions/5506110/python-it-is-possible-to-install-another-version-of-python-to-virtualenv)**

非常感谢@millimoose 等人。

这就是我最终要做的，非常具体。如果以后遇到问题我会更新。

1.  设置环境文件夹。

    ```
    $ mkdir env
    $ mkdir pyenv
    $ mkdir dep 
    ```

2.  **无需**任何形式的根操作系统安装即可获得 Python-2.7.3 和 virtualenv 。

    ```
    $ cd dep
    $ wget http://www.python.org/ftp/python/2.7.3/Python-2.7.3.tgz
    $ wget https://raw.github.com/pypa/virtualenv/master/virtualenv.py 
    ```

3.  提取 Python-2.7.3 并将其安装到`pyenv`目录中。`make clean`如果您第二次、第三次、第 N 次执行此操作，则为可选...

    ```
    $ tar -xzvf Python-2.7.3.tgz
    $ cd Python-2.7.3
    $ make clean
    $ ./configure --prefix=/path/to/pyenv
    $ make && make install
    $ cd ../../
    $ ls
    dep    env    pyenv 
    ```

4.  创建你的虚拟环境

    ```
    $ dep/virtualenv.py --python=/path/to/pyenv/bin/python --verbose env 
    ```

5.  将符号链接修复到 python2.7 内`env/include/`

    ```
    $ ls -l env/include/
    $ cd !$
    $ rm python2.7
    $ ln -s ../../pyenv/include/python2.7 python2.7
    $ cd ../../ 
    ```

6.  修复 env 中剩余的 python 符号链接。如上所述，您必须删除符号链接的目录并重新创建它们。此外，这里是强制就地符号链接创建的语法。

    ```
    $ ls -l env/lib/python2.7/
    $ cd !$
    $ ln -sf ../../../pyenv/lib/python2.7/UserDict.py UserDict.py
    [...repeat until all symbolic links are relative...]
    $ cd ../../../ 
    ```

7.  测试

    ```
    $ python --version
    Python 2.7.1
    $ source env/bin/activate
    (env)
    $ python --version
    Python 2.7.3 
    ```

阿罗哈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:49:34.173

1.  使用[pythonbrew](https://github.com/utahta/pythonbrew)获取独立的 Python 安装。
2.  使用该 Python 安装来启动您的虚拟环境。
3.  使虚拟环境[可重定位](http://www.virtualenv.org/en/latest/#making-environments-relocatable)。

# typescript - TypeScript 编译器变慢了？

> ID：12906164
> 
> 赞同：10
> 
> 时间：2012-10-16T01:03:23.223
> 
> 标签：typescript

我正在使用 TypeScript 开发 Win8 应用程序。

为了编译我的打字稿代码，我添加`winrt.d.ts`并`winjs.d.ts`引用了它们：

```
<reference path="winrt.d.ts" static="true" />
<reference path="winjs.d.ts" static="true" /> 
```

编译和构建成功，但 IDE 的智能感知非常慢。我只是打开`winrt.d.ts`并检查了文件。该文件有 18,770 行，这是一个非常大的文件，可以即时编译。

是否有任何选项或方法可以引用那些巨大的定义文件而无需再次编译`lib.d.ts`？

这种缓慢严重损害了我的 TypeScript 选择。

更新：

在当前的编译器版本（0.8.0）上，没有解决办法。希望在不久的将来的版本中看到最好的性能提升。

更新：

这是我提升开发的简单技巧。表现。我只是创建了`winrt.compact.d.ts`. 然后只复制实际使用的命名空间的一部分并保存文件。

幸运的是，file( `winrt.d.ts`) 看起来像是从几个声明文件中生成的。因此，每个命名空间都明显与其他命名空间分开。为 WinRT 制作精简版要容易得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:46:14.550

如果我错了，请纠正我，但我认为`lib.d.ts`编译器不会以任何特殊方式处理它。我看了一下源代码，这里是处理的片段`lib.d.ts`：

```
if(this.compilationSettings.useDefaultLib) {
    var compilerFilePath = this.ioHost.getExecutingFilePath();
    var binDirPath = this.ioHost.dirName(compilerFilePath);
    var libStrPath = this.ioHost.resolvePath(binDirPath + "\\lib.d.ts");
    code = new TypeScript.SourceUnit(libStrPath, null);
    this.compilationEnvironment.code.push(code);
} 
```

如果用户要求`lib.d.ts`被包含，则只需将其作为要编译的第一段代码添加到编译环境中。所有其他源文件（存储在`opts.unnamed`以完全相同的方式添加：

```
for(var i = 0; i < opts.unnamed.length; i++) {
    code = new TypeScript.SourceUnit(opts.unnamed[i], null);
    this.compilationEnvironment.code.push(code);
} 
```

因此，如果`lib.d.ts`没有以特殊方式处理，那么对于其他（声明）文件也是不可能的。此外，在我的系统`lib.d.ts`上有 7,677 行，远低于报告的 18,770 行`winrt.d.ts`，因此所有行的总和对于编译器而言可能太多，无法达到可接受的速度。

除此之外，我唯一的想法是“其他东西”导致你的机器减速。如果您向我提供库的链接和代码片段，我至少可以测量编译运行在我的系统上需要多长时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T20:16:49.750

目前在 Codeplex 上有一个针对此问题的未完成工作项：

[http://typescript.codeplex.com/workitem/265](http://typescript.codeplex.com/workitem/265)

您目前无法做任何改进（除了给编译器更多的硬件！）但希望工作项将被拾取并且问题将得到解决。

# java - 在java中创建输入对象时找不到符号错误

> ID：12906165
> 
> 赞同：2
> 
> 时间：2012-10-16T01:03:29.403
> 
> 标签：java, input

我是 java 和 netbeans 的新手。我正在尝试编写一个需要用户输入的程序。这是我的代码：

```
public class Arrays {

  public static void main(String[] args){
  }

  private double[] readNumbers(){
      final Input in = new Input();
      System.out.print("How many numbers will you enter?: ");
      final int count = in.nextInt();
      final double[] list = new double[count];
      for (int i = 0; i < count; ++i){
          System.out.print("Enter next number: ");
          list[i] = in.nextDouble();
      }
      return list;
  }
} 
```

在`final Input in - new Input();`Netbeans 行中，输入下划线表示它找不到符号。但是我实际上是从教科书中复制了这段代码，所以我不明白问题是什么。我想也许我需要`import java.io`，但这并没有解决问题。如果这是一个愚蠢的问题，真的很抱歉，但任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:26:04.097

看起来您的教科书有一些您忘记导入项目的类定义。如果您愿意，请更改您的代码，

```
final Input in = new Input(); 
```

至

```
final Scanner in = new Scanner(System.in); 
```

如果您不想更改代码，则在您获得此代码的页面上下查看几页，您应该看到名为 Input 的类，其中一些类似于：

```
class Input{

    public int nextInt(){
         Scanner sc=new Scanner(System.in);
         return sc.nextInt();
    }

    public double nextDouble(){
         Scanner sc=new Scanner(System.in);
         return sc.nextDouble();
    }

} 
```

这基本上是一项额外的不必要的工作。将其包含在您的项目中，它应该可以正常运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T01:42:02.947

您的代码尝试创建 Input 类的实例，但您没有包含 Input 类的代码。解决这个问题（试试本书的上一页！），你的代码可能会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T01:07:16.170

`Input`可能是一个包装类`java.util.Scanner`：

你可以替换：

```
final Input in = new Input(); 
```

和

```
final Scanner in = new Scanner(System.in); 
```

# jakarta-ee - Java中的Web应用程序配置

> ID：12906169
> 
> 赞同：0
> 
> 时间：2012-10-16T01:04:22.640
> 
> 标签：jakarta-ee, spring-mvc

我的 Web 应用程序有 3 个“上下文”文件。一个是web.xml，一个是context.xml，另一个是dispatcher-servlet.xml。注意我必须为我的网络应用程序使用 Spring。我有一个需要在服务器上运行的 Web 应用程序。有人可以验证我的理解吗？
1\. Web.xml - 所有 Java Web 应用程序都需要并且必须拥有。这是 servlet 配置进入的地方。param-name = contextConfigLocation 和 contextLoaderListener 参数是什么，为什么需要它们？contextLoaderListener 究竟做了什么？

```
<context-param>
        <description>Spring Application Context Configuration</description>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/applicationContext-workflow.xml
            /WEB-INF/applicationContext-general.xml
        </param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.mvc</url-pattern>
    </servlet-mapping> 
```

1.  Context.xml 用于特定于环境的数据库连接，队列连接。使用 commons dbcp 是首选吗？

2.  而 dispatcher-servlet.xml 看起来像这样： 为什么它需要是这样的？

3.  就服务器加载这些文件而言，是否会先加载 context.xml ，然后加载 web.xml ，然后再加载 dispatcher-servlet.xml ？

4.  就客户端请求而言，它会首先被 dispatcher-servlet 拦截吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:45:40.527

1.  是的，如果符合您的要求，可以使用 dbcp。基本上 context.xml 是一个 Spring 配置文件，用于定义 Spring bean。这是用于弹簧芯的。

2.  dispatcher-servlet.xml 这是另一个用于 Spring Web MVC 配置的 Spring 配置文件。也可以混合文件 1 和 2 但严格丢弃。它定义了您的 Sprinf MVC 配置、任何 web 资源包、mvc 拦截器等。如果您选择使用不同的 web 框架，如 JSF 或 struts，则不需要此文件，并且这些框架的其他配置文件将添加到您的项目中。

3.  web.xml 将首先加载 - 始终适用于任何 Java Web 应用程序。在那里您定义您的调度程序 servlet。你已经定义了监听器。加载 Web 应用程序后，将通知侦听器（回答您的问题 - 侦听器在做什么）然后侦听器获取指定为上下文参数的文件列表并从中加载 spring 上下文。完成后，Web 应用程序已完全加载。

4.  请求首先命中的内容取决于以下行

> ```
>  <servlet-mapping>
>      <servlet-name>dispatcher</servlet-name>
>      <url-pattern>*.mvc</url-pattern>
>  </servlet-mapping> 
> ```

任何以 .mvc 结尾的请求 url 都会被 Spring dispatcher-servlet 拦截。

# iphone - iPhone Wifi 开启还是关闭？

> ID：12906171
> 
> 赞同：4
> 
> 时间：2012-10-16T01:04:32.413
> 
> 标签：iphone, ios, wifi

在 iOS 框架中，如何检查用户是否启用了 Wifi 无线电？请注意，我对通过 Wifi 的可达性不感兴趣，而是对设备是否被用户关闭感兴趣。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-21T05:57:09.923

基于：[http ://www.enigmaticape.com/blog/determine-wifi-enabled-ios-one-weird-trick](http://www.enigmaticape.com/blog/determine-wifi-enabled-ios-one-weird-trick)

Wifi 状态可以使用基于 C 的 ifaddress 结构确定为 ON/OFF：

ifaddrs.h 和

净/if.h

**[代码来源：未知。]**

```
- (BOOL) isWiFiEnabled {

    NSCountedSet * cset = [NSCountedSet new];

    struct ifaddrs *interfaces;

    if( ! getifaddrs(&interfaces) ) {
        for( struct ifaddrs *interface = interfaces; interface; interface = interface->ifa_next) {
            if ( (interface->ifa_flags & IFF_UP) == IFF_UP ) {
                [cset addObject:[NSString stringWithUTF8String:interface->ifa_name]];
            }
        }
    }

    return [cset countForObject:@"awdl0"] > 1 ? YES : NO;
} 
```

Swift 3 版本（需要桥接头`#include <ifaddrs.h>`）：

```
func isWifiEnabled() -> Bool {
    var addresses = [String]()

    var ifaddr : UnsafeMutablePointer<ifaddrs>?
    guard getifaddrs(&ifaddr) == 0 else { return false }
    guard let firstAddr = ifaddr else { return false }

    for ptr in sequence(first: firstAddr, next: { $0.pointee.ifa_next }) {
        addresses.append(String(cString: ptr.pointee.ifa_name))
    }

    freeifaddrs(ifaddr)
    return addresses.contains("awdl0")
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-16T01:50:53.260

正如@magma 评论中提到的，您可能必须使用可达性源代码。到目前为止，根据我的经验和其他人一直在谈论的内容，没有布尔值可以告诉您用户是否在“设置”中关闭了 Wi-Fi。通过检查设备是否可以访问互联网，您只需**推断并得出结论（假设）**用户已关闭 Wi-Fi。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-17T10:07:06.830

使用可达性是正确的方法。

您无法访问应在 App Store 上发布的应用程序中的直接设置。**这被认为是应用程序根本没有理由处理的私人用户领域。**

但如果没有更多解释，我并不认为需要找出设置。

这不是应用程序应该感兴趣或担心的事情。您有网络访问权限，或者您没有网络访问权限。如果没有可用的，那么它的原因并不重要。

你不会问“你没有福特吗？”这样的问题。“你没有宝马吗？” 而是从一个好的应用程序设计中问“你有车吗？”

Raechability 也与 Internet 无关。它会告诉您设备理论上是否可以通过 TCP/IP 网络访问。这意味着一些网络通信可用。然后您可以检查什么类型（例如 Wifi 与 3G/LTE）。这正是 Reachability 的用途。

如果您出于某种原因真的想在收音机打开并且它是一种企业应用程序的情况下关闭，您可以查看私有框架，导入它们并处理它们的未记录方法，这些方法可能会随任何变化而发生变化更新。

对于 Wifi，它应该是：`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/System/Library/PrivateFrameworks/MobileWiFi.framework`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-21T19:32:18.127

iOS 没有公共 API 可以告诉您 Wi-Fi 是打开还是关闭。

但是，您可以使用 SystemConfiguration 框架中提供的公共 API`CNCopyCurrentNetworkInfo()`来获取有关当前 Wi-Fi 网络的信息。这不会*告诉*您 Wi-Fi 是打开还是关闭，而是告诉您设备是否已加入 Wi-Fi 网络。也许这足以满足您的目的。

另请注意，此 API 在 Simulator 中不起作用，因为`CNCopySupportedInterfaces()`总是返回 NULL。

```
#include <SystemConfiguration/CaptiveNetwork.h>

BOOL hasWiFiNetwork = NO;
NSArray *interfaces = CFBridgingRelease(CNCopySupportedInterfaces());
for (NSString *interface in interfaces) {
    NSDictionary *networkInfo = CFBridgingRelease(CNCopyCurrentNetworkInfo((__bridge CFStringRef)(interface)));
    if (networkInfo != NULL) {
        hasWiFiNetwork = YES;
        break;
    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-01-16T08:56:23.497

**斯威夫特 2.3 版本**

```
func isWifiEnabled() -> Bool {
    var addresses = [String]()

    var ifaddr : UnsafeMutablePointer<ifaddrs> = nil
    guard getifaddrs(&ifaddr) == 0 else { return false }

    var ptr = ifaddr
    while ptr != nil { defer { ptr = ptr.memory.ifa_next }
         addresses.append(String.fromCString(ptr.memory.ifa_name)!)
    }

    var counts:[String:Int] = [:]

    for item in addresses {
        counts[item] = (counts[item] ?? 0) + 1
    }

    freeifaddrs(ifaddr)
    return counts["awdl0"] > 1 ? true : false
} 
```

**斯威夫特 4.0 版本**

```
func isWifiEnabled() -> Bool {
    var addresses = [String]()

    var ifaddr : UnsafeMutablePointer<ifaddrs>?
    guard getifaddrs(&ifaddr) == 0 else { return false }
    guard let firstAddr = ifaddr else { return false }

    for ptr in sequence(first: firstAddr, next: { $0.pointee.ifa_next }) {
        addresses.append(String(cString: ptr.pointee.ifa_name))
    }

    var counts:[String:Int] = [:]

    for item in addresses {
        counts[item] = (counts[item] ?? 0) + 1
    }

    freeifaddrs(ifaddr)
    guard let count = counts["awdl0"] else { return false }
    return count > 1
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-18T05:55:54.030

PrivateFrameworks 在 sdk 中不可用，也不可供任何企业开发人员使用。

如果我们知道您想要实现什么，我知道 wifi 无线电功率状态，我们可能会建议一个替代解决方案，但从苹果公司如何处理他们向开发人员公开的内容，我认为这不会直接成为可能。

使用可达性，您可以确定 wifi 是否打开，但要知道 wifi 是否关闭，请掷硬币。

# ruby-on-rails - 如果其他，则在 Rails 3 中干燥 elsif

> ID：12906181
> 
> 赞同：1
> 
> 时间：2012-10-16T01:05:35.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3

RoR 的第二周（没有编程背景）。我有一点问题，我正在做一个 Metacritic 类型的网站。到处都会有收视率。我决定 0 到 33 = 红色 34 到 66 = 橙色 67 到 100 = 绿色 看起来像这样

索引（控制器：显示）

```
 <td><% if show.reviews.count == 0 %>0
    <% elsif show.reviews.average("rating").between?(33, 66) %>
    <table class="orange">
      <tr>
        <td><b><%= number_with_precision(show.reviews.average("rating"), :precision => 0) %></b></td>
     </tr>
    </table>
    <% elsif show.reviews.average("rating").between?(66, 100) %>
    <table class="green">
      <tr>
        <td><%= number_with_precision(show.reviews.average("rating"), :precision => 0) %></td>
      </tr>
    </table>
    <% elsif show.reviews.average("rating").between?(00, 33) %>
    <table class="red">
      <tr>
        <td><%= number_with_precision(show.reviews.average("rating"), :precision => 0) %></td>
      </tr>
    </table>
    <% end %>
  </td> 
```

我的问题是我需要大量重复该代码，请参阅（我才刚刚开始：show（controller show）

```
<p>
  Note: <% if @ratings == 0 %>0
  <% elsif @ratings.between?(33, 66) %>
  <table class="orange">
    <tr>
      <td><b><%= number_with_precision(@ratings, :precision => 0) %></b></td>
    </tr>
  </table>
  <% elsif @ratings.between?(66, 100) %>
  <table class="green">
    <tr>
      <td><%= number_with_precision(@ratings, :precision => 0) %></td>
    </tr>
  </table>
  <% elsif @ratings.between?(00, 33) %>
  <table class="red">
    <tr>
      <td><%= number_with_precision(@ratings, :precision => 0) %></td>
    </tr>
  </table>
  <% end %>
</p> 
```

有人告诉我这应该是一个模型，但我真的不知道怎么写。有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T04:54:03.437

首先，您应该在`Show`模型中添加一个实例方法，用于检索和缓存节目的平均收视率。这可以防止多次查询数据库以获取相同的数据：

```
def average_rating
  @average_rating ||= self.reviews.average('rating')
end 
```

为 a 返回适当的 css 类的代码`Show`可以进入帮助程序（例如`ShowHelper`）：

```
module ShowHelper
  def average_rating_class_for(show)
    if show.average_rating < 34
      'red'
    elsif show.average_rating > 66
      'green'
    else
      'orange'
    end
  end
end 
```

有了这个，你的观点变得更加清晰：

```
<td>
<% if show.reviews.count == 0 %>
  0
<% else %>
  <table class="<%= average_rating_class_for(show) %>">
    <tr>
      <td><%= number_with_precision(show.average_rating, :precision => 0) %></td>
    </tr>
  </table>
<% end %>
</td> 
```

和：

```
<p>
  Note:
<% if @show.reviews.count == 0 %>
  0
<% else %>
  <table class="<%= average_rating_class_for(@show) %>">
    <tr>
      <td><%= number_with_precision(@show.average_rating, :precision => 0) %></td>
    </tr>
  </table>
<% end %>
</p> 
```

您甚至可以将整个表的生成移动到模型中。（虽然你不应该在这里使用桌子，但那是另一回事。）

```
module ShowHelper
  def average_rating_class_for(show)
    if show.average_rating < 34
      'red'
    elsif show.average_rating > 66
      'green'
    else
      'orange'
    end
  end

  def average_rating_table_for(show)
    if show.reviews.count == 0
      '0'
    else
      content_tag :table do
        content_tag :tr do
          contect_tag :td, :class => average_rating_class_for(show) do
            number_with_precision(show.average_rating, :precision => 0)
          end
        end
      end
    end
  end
end 
```

有了这个，你的观点变成：

```
<td>
  <%= average_rating_table_for(show) %>
</td> 
```

安德烈的建议也是可能的，但对于像你这样的初学者来说可能有点难以理解。这更简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T04:40:31.313

您需要在应用目录中创建一个名为 Presenters 的新文件夹。然后您将要创建一个名为 rating_presenter.rb 的文件

这将是您的演示者文件

```
class RatingPresenter
  def initialize(rating, template)
    @rating = rating
    @template = template
  end

  def get_ratings
     # here you will house the logic to display your tables as needed
     # I would probably determine the output to return the class to set the table accordingly
     # keep in mind that view helpers are available
     # ie.  h.link_to or h.form_tag
  end

  private
    def h # we don't want to be saying @template.link_to etc everywhere, so this is a shortcut
      @template 
    end
end 
```

而在application_helper.rb文件中我们需要确定类才能呈现类

```
def present(object, klass = nil)
  klass ||= "#{object.class}Presenter".constantize # assign object or nil
  presenter = klass.new(object, self)  # assign presenter to object instance
  yield presenter if block_given?  # yield if block is given
  presenter # return presenter
end 
```

所以在你看来你调用了那个辅助方法

```
<% present @rating do |rating_presenter| %>
  <p>
    <%= rating_presenter.get_ratings %>
  </p>
<% end %> 
```

所以这是一个快速而肮脏的例子，来自我学到的几个资源。您将需要尝试/打破一些东西以使其适合您的需求。您可以扩展该`get_ratings`方法并使用多种方法来构建您的表（这是推荐的），而不是让一种方法负责整个事情。它将帮助您隔离问题。希望这会为您指明正确的方向

您还应该在 google 上搜索“presenters +rails”，您可能会找到更多有助于您理解这个概念的文章。最后，rails 具有处理复杂视图逻辑的 gem，请查看 Draper。 [https://github.com/drapergem/draper](https://github.com/drapergem/draper)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T09:29:55.703

我认为对于使用演示者的“RoR 的第二周（没有编程背景）”的人来说有点超出范围。也应该尝试一步一步地简单化，并且只到一个人熟悉的水平（在使用一个不理解的结构时没有用处）

我的建议是简单地编写一个小助手来决定 div 应该是哪种颜色。作为第一枪，只需将以下方法放入 app/helpers/application_helper.rb

```
def color_for_rating(rating)
  if show.average_rating < 34
    'red'
  elsif show.average_rating > 66
    'green'
  else
    'orange'
  end
end 
```

然后，您可以使用帮助程序为您的表格类提供正确的颜色，如下清理您的索引视图

```
 <td><% if show.reviews.count == 0 %>0
    <% else %>
    <table class="<%= color_for_rating(show.reviews.average("rating")) %>" >
      <tr>
        <td><b><%= number_with_precision(show.reviews.average("rating"), :precision => 0) %></b></td>
     </tr>
    </table>
    <% end %>
  </td> 
```

一旦您对这种更简单的方法感到满意并稍微使用了它，您就可以回来查看其他答案中给出的更高级的解决方案。

# php - 连接到另一个 IP（服务器）上的 MySQL，PHP

> ID：12906182
> 
> 赞同：1
> 
> 时间：2012-10-16T01:05:35.640
> 
> 标签：php, mysql

> **可能重复：**
> [使用 PHP 连接到远程 MySQL 服务器](https://stackoverflow.com/questions/1935314/connecting-to-remote-mysql-server-using-php)

当代码位于 MySQL 所在的服务器上时，我可以使用 localhost 成功连接到数据库。

我想连接到同一个 MySQL 服务器，但来自另一个 IP：

```
mysql_connect("localhost","root","<password>");
mysql_select_db("db name"); 
```

但是假设我的新 IP 是 12.123.123.12

我试过了：

```
mysql_connect("12.123.123.12","root","<password>");
mysql_select_db("db name"); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T01:07:42.940

```
SELECT User, Host, Password FROM mysql.user; 
```

样本输出：

```
+------+--------------------+----------+
| User | Host               | Password |
+------+--------------------+----------+
| root | localhost          |          |
| root | myhost.example.com |          |
| root | 127.0.0.1          |          |
| root | ::1                |          |
|      | localhost          |          |
|      | myhost.example.com |          |
+------+--------------------+----------+ 
```

您会看到默认情况下，root 只允许从**localhost登录。**您必须更改它以允许您现在指定的主机**或**创建不同的帐户（推荐）。使用 root 是危险的。

根据需要创建具有足够权限的新用户。

（[**参考**](https://dev.mysql.com/doc/refman/5.5/en/default-privileges.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T01:17:32.850

大多数托管服务提供商（至少是那些使用 CPANEL 的）不允许跨域查询。如果您的主机使用的是 CPANEL，您必须转到“DATABASES”->“REMOTE MySQL”并添加您正在运行查询的服务器的 IP 地址。

如果您的主机，不使用CPANEL，将主机的IP地址（12.123.123.12）添加到MySql的用户表中。

出于安全原因，最后一条评论是一种很好的做法，即当您发布问题时不要使用敏感信息作为 IP 地址！问候路易斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T01:07:40.317

如果它不起作用，您可以尝试显示错误

```
mysql_connect("12.123.123.12","root","<password>") or die("Error: ".mysql_error()); 
```

**注意：**主机名不一定是你的ip地址；它是 mysqlserver 的 ip 或名称

用你的mysqlserver替换它，它会工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T01:16:34.573

首先，您需要确保在查询中回显 MySQL 错误：

```
 mysql_connect("12.123.123.12","root","<password>") or die(mysql_error()); 
```

检查 MySQL 服务器是否授予用户从远程主机连接的权限。这是您通常授予特权的方式：

```
GRANT ALL PRIVILEGES ON yourdb.* to 'theuser'@'localhost' IDENTIFIED BY 'thepassword'; 
```

如果需要从远程主机访问数据库，则必须从 MySQL 服务器设置以下权限语句：

```
GRANT ALL PRIVILEGES ON yourdb.* to 'theuser'@'<yourip>' IDENTIFIED BY 'thepassword';
-- grant privilege to all remote hosts
GRANT ALL PRIVILEGES ON yourdb.* to 'theuser'@'%' IDENTIFIED BY 'thepassword'; 
```

如果您对 MySQL 服务器具有管理访问权限，则可以通过以下命令检查权限：

```
 SHOW GRANTS; 
```

顺便说一句：不推荐使用 mysql_* 函数。仅使用 mysqli_* 函数。

# javascript - CompositeView 不渲染 ItemViews，甚至不触发 appendHtml

> ID：12906184
> 
> 赞同：2
> 
> 时间：2012-10-16T01:05:54.953
> 
> 标签：javascript, backbone.js, requirejs, marionette

我对视图渲染有点迷茫——第一次尝试这样做。我的模板设置类似于此应用程序。

到目前为止，我已经为 CompositeView 渲染了模板，但它没有渲染任何 ItemView。它甚至不会触发渲染方法来尝试调试，所以我不确定我可以在哪里记录片段以查看它卡在哪里......这是代码：

这是我的项目视图：

```
define([
    'jquery', 
    'underscore', 
    'backbone',  
    'text!templates/service/item.ejs'
], function($, _, Backbone, template) {
        ServiceItemView = Backbone.Marionette.ItemView.extend({
            tagName: 'tr',
            template: '#service-item-template'
        });
    }
); 
```

这是我的 CompositeView：**更新：**在我的 requirejs 代码中添加以显示在 ServiceTableView 之前加载了 ServiceItemView

```
define([
    'jquery', 
    'underscore', 
    'backbone', 
    'views/service/item', 
    'text!templates/service/table.ejs'
], function($, _, Backbone, ServiceItemView, template) {
    var ServiceTableView;
        ServiceTableView = Backbone.Marionette.CompositeView.extend({
            tagName: 'table',
            id: 'service-table', 
            itemView: ServiceItemView, 
            itemViewContainer: 'tbody', 
            template: '#service-table-template', 

            appendHtml: function(collectionView, itemView){
                console.log("here");
                //collectionView.$("tbody").append(itemView.el);
            }
        });
    }
); 
```

这是我尝试渲染它的地方：

```
 service_collection = new ServiceCollection([
        new Service({ 
            name: "Men's Cut", 
            length: 108000, 
            price: 2500
        }), 
        new Service({
            name: "Women's Cut", 
            length: 324000, 
            price: 5000
        })
    ]);

    service_table = new ServiceTableView({
        collection: service_collection
    });

    App.main_region.show(service_table); 
```

**更新：**这是两个模板：

ServiceItemView 模板：

```
<script type="text/html" id="service-item-template">
    <td><%= name %></td>
    <td><%= length %></td>
    <td><%= price %></td>
    <td class="actions">
        <input type="button" class="icon" value="Delete" />
    </td>
</script> 
```

服务表视图模板：

```
<script type="text/html" id="service-table-template">
    <thead>
        <tr>
            <th>Name</td>
            <th>Time allotment</th>
            <th>Pricing</th>
            <th class="actions">Actions</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</script> 
```

同样，渲染了 ServiceTableView 模板，但没有在下面渲染任何服务。

任何帮助表示赞赏。甚至指向在何处粘贴日志语句以获取更多信息的指针。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:32:38.910

原来`Collections`我创建的是这样写的：

`Backbone.Model.extend`而不是`Backbone.Collection.extend`. 在创建集合时，我必须从模型中复制代码以加快编写速度。

如果有人想使用上面的代码作为他们自己项目的示例，现在已修复并工作。

# .net - 堆叠的水平 ListView

> ID：12906185
> 
> 赞同：0
> 
> 时间：2012-10-16T01:05:57.573
> 
> 标签：.net, windows, winrt-xaml

我正在尝试创建一个与 Windows 8 中的 People 应用程序非常相似的 UI 外观。我想要一个带有组分隔符的水平项目堆栈。我用 GridView 尝试了这个并接近但遇到了一个问题，即渲染的第一个项目设置了所有项目的高度。

接下来我尝试了 ListView，但我可以让项目垂直堆叠并水平流动。

任何人都可以帮助我或指出我可以在哪里找到 Windows 8 内置应用程序的源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:41:52.540

这涵盖了吗？ [http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/966aa897-1413-46f0-bef7-663de36f9423](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/966aa897-1413-46f0-bef7-663de36f9423)

# css - 仅使用 CSS 创建标签或选项卡

> ID：12906200
> 
> 赞同：2
> 
> 时间：2012-10-16T01:07:48.010
> 
> 标签：css

我想创建一个标签或标签，如果可能的话，只使用 CSS 而没有图像。这就是我的意思：

![标签](../Images/ccc2c8ba5e9306be292b02637fe3aca9.png)

我可以创建一个端点，但我无法创建三角形点。是否可以仅使用 CSS 执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T01:10:50.337

确实有创建 CSS 三角形的方法，这是 css-tricks.com 的一部分：

```
.arrow-right {
   width: 0; 
   height: 0; 
   border-top: 60px solid transparent;
   border-bottom: 60px solid transparent;
   border-left: 60px solid green;
} 
```

[http://css-tricks.com/snippets/css/css-triangle/](http://css-tricks.com/snippets/css/css-triangle/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T01:15:14.520

是的，但不是在支持 IE7 时：

```
<a class="tab">Your label text</a>

.tab {
    background: black;
    border-top-right-radius: 3px;
    border-bottom-right-radius: 3px;
    position: relative;
}
.tab::before {
    content: " ";
    position: absolute;
    right: 100%;
    top: 0;
    width: 0;
    height: 0;
    border-width: 35px; /* play with this value to match the height of the tab */
    border-style: solid;
    border-color: transparent black transparent transparent;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T01:11:03.810

这应该是一个好的开始 [http://css-tricks.com/snippets/css/css-triangle/](http://css-tricks.com/snippets/css/css-triangle/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T01:14:43.810

HTML

```
<div class="arrow-left"></div>
<div class="arrow-body"></div> 
```

CSS

```
.arrow-left {   float:left;  width: 0;      height: 0;      border-top: 20px solid transparent;     border-bottom: 20px solid transparent;           border-right:20px solid blue;  }
.arrow-body{ float:left; width:200px; height:40px;  background-color:Blue;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T01:35:14.627

这是另一个

```
<div></div>​ 
```

```
div{
    width:500px;
    height:100px;
    background-color:black;
    border-top-right-radius:10px;
    border-bottom-right-radius:10px;
    margin-left:100px;
}
div:before{
    width:0;
    height:0;
    content:"";
    display:inline-block;
    border-top:50px solid transparent;
    border-right:100px solid black;
    border-bottom:50px solid transparent;
    position:absolute;
    left:0;
} 
```

[http://jsfiddle.net/e8feE/](http://jsfiddle.net/e8feE/)

# nivo-slider - Nivo Slider - 上一张幻灯片在下一张幻灯片完全加载之前不会消失，从而创建图像重叠

> ID：12906205
> 
> 赞同：2
> 
> 时间：2012-10-16T01:08:07.100
> 
> 标签：nivo-slider

除了上一张幻灯片外，我的滑块一切正常，在屏幕上完全不透明，直到新的幻灯片完全加载。然后最后一个终于从新的后面消失了。

奇怪的故障。我已经多次使用 Nivo，但不知道为什么会在我的网站上看到这个。我重新加载了默认包文件，但仍然没有。

# tridion - 我应该如何通过核心服务获取和设置文件夹的组和用户权限设置？

> ID：12906210
> 
> 赞同：2
> 
> 时间：2012-10-16T01:09:05.230
> 
> 标签：tridion, tridion-2011

我可以使用以下内容获取表示给定文件夹的组和用户权限的字符串。

## 代码

```
// assumes Core Service client "client"

var folderData = client.Read("tcm:5-26-2", new ReadOptions()) as FolderData;   
var accessControlEntryDataArray =
  folderData.AccessControlList.AccessControlEntries;

Console.WriteLine(folderData.Title);

foreach (var accessControlEntryData in accessControlEntryDataArray)
  {
  Console.WriteLine("{0} has {1}",
                    accessControlEntryData.Trustee.Title,
                    accessControlEntryData.AllowedPermissions.ToString());
  } 
```

## 输出

> 某些**文件**夹
> 每个**人****都****读过**
> 编辑**没有**
> 主 编辑**没有**
> _ **_**
> _ **_**
> _ **, 删除** [权利] 作者 - 内容**无**

 ******似乎 `AllowedPermissions 的四个可能值是：

*   `None`
*   `Read`
*   `Read, Write`
*   `Read, Write, Delete`
*   `All`

这非常适合我创建文件夹权限报告的用例。我可以`.Replace()`用熟悉的符号表示（例如`rw--`或`rwdl`）。

**但是，操纵这些值是否也是*设置*`string`权限的正确方法？我想我会想要对象或枚举。***有人能指出我正确的方向吗？*

 *我还注意到我得到了一些，但不是*所有*不适用的组都设置为`None`. 我在这里并不特别需要它们，但我很好奇是什么决定了它们是否会被返回——我是否错过了代码中的某些内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T08:59:46.680

`Rights`确实`Permissions`是枚举。您可以使用以下方法进行设置。如果你想设置多个权限，你应该做类似“ `Rights.Read | Rights.Write`”

请记住，此方法将返回您必须保存\更新\创建的对象

```
 public static OrganizationalItemData SetPermissionsOnOrganizationalItem(
               OrganizationalItemData organizationalItem, 
               TrusteeData trustee, 
               Permissions allowedPermissions, 
               Permissions deniedPermissions = Permissions.None)
    {
        if (organizationalItem.AccessControlList == null)
        {
            organizationalItem.AccessControlList 
                    = new AccessControlListData
                    {AccessControlEntries = new AccessControlEntryData[0]};
        }
        var entries = organizationalItem.AccessControlList
                                        .AccessControlEntries.ToList();

        // First check if this trustee already has some permissions
        var entry = entries.SingleOrDefault(
                               ace => ace.Trustee.IdRef == trustee.Id);
        if (entry != null)
        {
            // Remove this entry
            entries.Remove(entry);
        }

        entries.Add(new AccessControlEntryData
        {
            AllowedPermissions = allowedPermissions,
            DeniedPermissions = deniedPermissions,
            Trustee = new LinkToTrusteeData { IdRef = trustee.Id }
        });
        organizationalItem.AccessControlList.AccessControlEntries 
                                                      = entries.ToArray();

        return organizationalItem;
    } 
```*******

# python - 从对象列表中的列表中删除项目时，该项目也会从其他对象的列表中删除

> ID：12906214
> 
> 赞同：0
> 
> 时间：2012-10-16T01:09:28.680
> 
> 标签：python, list

所以我有一个叫做单元格的类：

```
class cell:
    possibles = [ "1", "2", "3", "4", "5", "6", "7", "8", "9" ]
    value = None;

    def __init__(self, value):
        if value == "":
            self.value = "0"
        else:
            self.value = value

if __name__=="__main__":
    mlist = [cell("2"), cell("6"), cell("8")]
    mlist[2].possibles.remove("3")
    print mlist[0].possibles 
```

输出是：

```
['1', '2', '4', '5', '6', '7', '8', '9'] 
```

当我从第三项中显式删除它时，为什么它会从数组第一项中的可能值中删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:12:24.637

这是一个常见的 Python 问题。这种写法每个`cell`都有对同一个列表实例的引用。您可以通过打印`id(mlist[i].possibles)`每个`i`.

要创建单独的列表，请将初始化移动到构造函数：

```
def __init__(self, value):
    self.possibles = [ "1", "2", "3", "4", "5", "6", "7", "8", "9" ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T01:11:50.430

发生这种情况是因为您已定义`possibilities`为类变量，而不是实例变量。

进入（as ） `possibilities`，你应该没问题`__init__``self.possibilities`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T01:16:55.437

```
mlist = [cell("2"), cell("6"), cell("8")] 
```

在这里，您没有三个不同的列表，而是对同一个列表的三个引用。任何变化都会影响所有人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T01:23:02.690

正如其他人所说，您应该使实例变量成为可能。你也可以不使用 if...else 子句，将 value 参数设置为默认值 0。

```
 class cell:
        def __init__(self, value=0):
            self.possibles = [ "1", "2", "3", "4", "5", "6", "7", "8", "9" ]
            self.value = value

    if __name__=="__main__":
        mlist = [cell("2"), cell("6"), cell("8")]
        mlist[2].possibles.remove("3")

>>> mlist[0].possibles
['1', '2', '3', '4', '5', '6', '7', '8', '9']
>>> mlist[2].possibles
['1', '2', '4', '5', '6', '7', '8', '9']
>>> 
```

# mysql - Mysql LEFT Join查询在添加Count() mysql函数时只返回一行

> ID：12906215
> 
> 赞同：3
> 
> 时间：2012-10-16T01:09:33.063
> 
> 标签：mysql, database, join, left-join

我有这个 mysql 查询（演变**两个表**：`Users`和`Files`），这让我很头疼：

```
SELECT Users.GUID, Users.Name, Users.CreationDate, Files.Date, 
    Count(Files.GUID) As FilesCount
FROM Users

    LEFT JOIN Files ON Users.GUID = Files.UserGUID

WHERE Users.Group =  '1' 
```

当我执行它时，它**总是**返回 1 行（这不是我想要的）。但如果我删除这个：

```
Count(Files.Date) As FilesCount 
```

它正确返回了我期望的所有行。

**我基本上需要获取属于用户的文件数**（以及用户信息）

**我的问题是：**如何解决这个问题并让 mysql 查询返回用户基本信息以及文件数？

顺便说一句，我将 CodeIgniter 2 与 PHP 5 一起使用（尽管我认为这并不重要......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T01:12:06.747

如果`COUNT()`没有子句，聚合将只返回一行`GROUP BY`，并且 MySQL 对 的存在或内容很宽容`GROUP BY`（在大多数其他 RDBMS 中，您的查询会因语法错误而失败）。

由于您有多个列，因此您应该加入一个子查询以获取每个`Files.GUID`. 尽管 MySQL 允许您`GROUP BY Users.GUID`不使用更简单的子查询，但您可能无法从`Users.Name`or中获得您期望的结果`Users.CreationDate`。这种方法更便携：

```
SELECT
  Users.GUID,
  Users.Name,
  Users.CreationDate,
  FileCount
FROM
  Users
  /* Subquery returns UserGUID and associated file count */
  LEFT JOIN (
    SELECT UserGUID, COUNT(*) AS FileCount
    FROM Files
    GROUP BY UserGUID
  ) fc ON Users.GUID = fc.UserGuid
WHERE Users.Group = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T01:12:44.903

您需要按用户分组，否则它将全部折叠为一行：`GROUP BY Users.GUID`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T01:12:11.907

这个查询有子查询，分别计算`Count`每个`GUID`.

```
SELECT  Users.GUID, 
        Users.Name, 
        Users.CreationDate, 
        Files.Date, 
        c.FilesCount
FROM    Users
        LEFT JOIN Files 
            ON Users.GUID = Files.UserGUID
        LEFT JOIN
        (
            SELECT UserGUID, Count(GUID) As FilesCount
            FROM Files
            GROUP BY UserGUID
        ) c on c.UserGUID = Users.GUID
-- WHERE Users.Group =  '1' 
```

# c# - 15 个拼图随机播放方法问题

> ID：12906217
> 
> 赞同：0
> 
> 时间：2012-10-16T01:09:55.373
> 
> 标签：c#, .net, algorithm, winforms

我正在用 C# 制作一个 15 拼图游戏，它允许用户输入自定义行和列值，最大为 10 x 10 拼图。因此，我在使用 shuffle 方法时遇到了问题。我想做到这一点，所以这个难题总是可以解决的。首先创建一个获胜的谜题，然后将空白空间洗牌。问题是每次调用每个点击事件效率太低。我需要一种方法来调用与空白空间相邻但不是对角线的按钮的单击事件。我还在空白处使用了一个不可见的静态按钮。PuzzlePiece 类继承自 Button。我不太确定该怎么做。我将不胜感激任何帮助。

谢谢

这是我所拥有的：

```
private void shuffleBoard()
    {
        //5 is just for test purposes
        for (int i = 0; i < 5; i++)
        {
            foreach (Control item in this.Controls)
            {
                if (item is PuzzlePiece)
                {
                    ((PuzzlePiece)item).PerformClick();
                }
            }
        }
    }

 void PuzzlePiece_Click(object sender, EventArgs e)
    {
        PuzzlePiece piece = (PuzzlePiece)sender;

        if (piece.Right == puzzleForm.emptyPiece.Left && piece.Top == puzzleForm.emptyPiece.Top)
        {
            movePiece(piece);
        }
        else if (piece.Left == puzzleForm.emptyPiece.Right && piece.Top == puzzleForm.emptyPiece.Top)
        {
            movePiece(piece);
        }
        else if (piece.Top == puzzleForm.emptyPiece.Bottom && piece.Left == puzzleForm.emptyPiece.Left)
        {
            movePiece(piece);
        }
        else if (piece.Bottom == puzzleForm.emptyPiece.Top && piece.Left == puzzleForm.emptyPiece.Left)
        {
            movePiece(piece);
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T01:18:35.423

对于 15 块拼图（和类似的滑动拼图游戏），任何拼图排列都是可解的当且仅当它具有偶数奇偶性。

因此，您应该能够随机放置瓷砖。如果奇偶校验是偶数，那么它可以按原样解决。如果奇偶性是奇数，则只需交换两个相邻的瓷砖以反转奇偶性，然后就可以解决了。

有关如何测量奇偶性的详细信息，请参见此处：[http ://en.wikipedia.org/wiki/Fifteen_puzzle#Solvability](http://en.wikipedia.org/wiki/Fifteen_puzzle#Solvability)

* * *

由于维基百科的文章已更改，因此不再清楚如何计算 15 拼图排列的奇偶性，我将在下面解释：

对于任何瓷砖排列，您可以通过以下方式计算反转：

1.  计算所有的“*倒置*”。倒置是从右上角开始，穿过每一行，一直到左下角，编号的牌低于*之前*的牌的任何时间。第一个瓦片永远不会算作倒置（因为它前面没有瓦片，所以它不能低于该瓦片），并且您不计算空白空间。

2.  再加上空白处的行号*减*1。

这个总数是安排的计数。如果 Count 为*偶数，*则该排列具有偶数（或 0）*奇偶性*。如果计数是*奇数*，则它具有奇数（或 1）奇偶校验。

将起始排列的奇偶性与目标排列的奇偶性进行比较。如果它们是相同的，那么这个谜题是可解的，否则它是不可解的。由于标准目标排列（空格，1-15 的顺序）有 0 次反转并且空格的行号为 1，所以我们得到一个 Count`0 + (1 - 1)`或 0，*即使*如此，目标的奇偶校验也是 0。因此任何也为 0 的起始排列是可解的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T01:23:53.523

如果我是你，我会把你的模型从你的 UI 中分离出来。

创建一个名为`Puzzle`. 该类将保存拼图的状态并对该状态执行所有操作。

您可能会实现`MoveLeft`, `MoveRight`, `MoveUp`&`MoveDown`方法。要洗牌，您可以通过随机调用这四种方法来执行（相当长的）一系列移动。

您的`Puzzle`类需要公开足够的状态以供 UI 呈现自身。

这样做可以简化代码并使单元测试更加简单。

# perl - 如何在不关闭进程的情况下将命令发送到进程？

> ID：12906219
> 
> 赞同：1
> 
> 时间：2012-10-16T01:10:44.610
> 
> 标签：perl

我正在尝试启动一个 Postgres 客户端并保留它，以便我可以向它发送几个 SQL 命令并收集每个命令的结果。我当前的问题是第一组命令似乎没有发送到进程，除非我关闭文件句柄以发送命令。但是关闭文件句柄会破坏程序的全部目的。

这是代码：

```
my ($child_read, $child_write);
our $pid = open2($child_read, $child_write, '../psql -p 2070 super');
print STDOUT $pid . "\n";
$child_write->autoflush(1);

my $output1;
my $theCommands = "set schema 'super'; \n select count(*) from MyTable;";
print $child_write $theCommands;
close($child_write);

print "About to try and get query results. \n";
while (<$child_read>)
{
    print "$_";
} 
```

上面的代码有效。我得到了查询的结果，但我可以让 SQL 命令执行的唯一方法是关闭 $child_write 文件句柄。如果我不关闭它，那么程序在尝试读取行时会挂起。

如何在不关闭 $child_write 文件句柄的情况下将 SQL 命令发送到 Postgres 客户端？

这是[寻找从 Perl 向 Postgres 发送查询的帮助](https://stackoverflow.com/questions/12849554/looking-for-help-to-send-queries-to-postgres-from-perl)的后续问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:35:49.553

你确保你刷新了你的输出，但你没有确保你`psql`做了同样的事情。您可能可以通过使用伪 tty 将其欺骗为刷新。[如果您想继续自动， Expect](http://search.cpan.org/perldoc?Expect)可能是要走的路`psql`。

更简单、更健壮的方法是使用[DBI](http://search.cpan.org/perldoc?DBI)。

# matlab - 更改函数内的参数以与 ODE 求解器一起使用

> ID：12906222
> 
> 赞同：0
> 
> 时间：2012-10-16T01:10:59.317
> 
> 标签：matlab, if-statement, parameters, ode

是否可以使用 ODE 求解器，例如 ode45，并且仍然能够“更改”被调用函数中参数的值？

例如，如果我要使用以下功能：

```
function y = thisode(t, Ic)
% example derivative function

% parameters
a = .05;
b = .005;
c = .0005;
d = .00005;

% state variables
R = Ic(1);
T = Ic(2);

y = [(R*a)-(T/b)+d; (d*R)-(c*T)]; 
```

使用此脚本：

```
clear all
% Initial conditions
It = [0.06 0.010];
% time steps
time = 0:.5:10;
% ODE solver
[t,Ic1] = ode45(@thisode, time, It); 
```

一切都如我所料。但是，我想要一种方法来轻松更改参数值，但仍然只使用一个函数和一个脚本运行 ODE 求解器的多次迭代。但是，我似乎无法向 ODE 求解器添加更多项，例如：

```
function y = thisode(t, Ic, P)

% parameters
a = P(1);
b = P(2);
c = P(3);
d = P(4);

% state variables
R = Ic(1);
T = Ic(2);

y = [(R*a)-(T/b)+d; (d*R)-(c*T)]; 
```

使用此脚本：

```
clear all
% Initial conditions
It = [0.06 0.010];
P1 = [.05 .005 .0005 .00005]
% time steps
time = 0:.5:10;
% ODE solver
[t,Ic1] = ode45(@thisode, time, It, [], P1); 
```

不起作用。我想我知道这不应该起作用，但我一直无法想出解决方案。我也在考虑在函数中使用 if 语句，然后硬编码几组要使用的参数（例如，当 P == 1 时使用 set 1，当 P == 2 时使用 set 2 等），但这也不起作用我不知道在哪里调用要与 ODE 一起使用的集合。任何关于如何在 ODE 求解器中使用一个函数和一个脚本同时能够更改参数值的提示或建议将不胜感激。

谢谢你，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:19:57.367

您必须以不同的方式调用该函数：

```
[t,Ic1] = ode45(@(t,y) thisode(t,y,P1), time, It); 
```

该函数`ode45`假定所有传递给它的函数只接受 a`t`和 a `y`。上面的调用是让 Matlab 通过的[标准技巧](http://www.mathworks.com/matlabcentral/newsreader/view_thread/308285)，`P1`而在每次调用时`ode45`都会通过它。`t``y`

# ruby-on-rails - 如何在 Rails 中从子级创建父级？

> ID：12906237
> 
> 赞同：0
> 
> 时间：2012-10-16T01:13:16.537
> 
> 标签：ruby-on-rails, nested-forms

在我的应用程序中，我收到此错误。

> 对于 ID = 的 InventoryItem，找不到 ID = 1 的供应商

库存项目.rb

```
belongs_to :vendor
accepts_nested_attributes_for :vendor 
```

供应商.rb

```
has_many :inventory_items 
```

_form.html.erb

```
<%= simple_nested_form_for @inventory_item, :html => {:class => 'form-inline' } do |f| %>                                                                                     

  <h2>Inventory Data</h2>
  <%= f.input :name, :input_html => {:autocomplete => :off, :placeholder => 'Item Name' }%> 
    <%= f.input :id, :as => :hidden %>

    <%= f.simple_fields_for :vendor do |v| %>
      <%= v.input :name, :label => 'Vendor name', :input_html => {:autocomplete => :off, :placeholder => 'Vendor Name' } %>
      <%= v.input :id, :as => :hidden %>
    <% end %>
<% end %>
  ----snip---- 
```

我的参数散列相应地出来

```
{"utf8"=>"✓",
 "authenticity_token"=>"ZY9fum4XGStTMNbpRQxrzmP7PT3A6BUU+wOymV0fZ/c=",
 "inventory_item"=>{"name"=>"testing",
 "id"=>"7678",
 "vendor_attributes"=>{"name"=>"test",
 "id"=>"1"},
 "item_instances_attributes"=>{"0"=>{"barcode"=>"",
 "funding_source"=>"",
 "serial"=>"",
 "version"=>"",
 "website_id"=>"",
 "item_type"=>"Retail",
 "type_of_at"=>"Vision",
 "os"=>"Mac",
 "registration_key"=>"",
 "dealer_price"=>"",
 "retail_price"=>"",
 "reuse_price"=>"",
 "estimated_current_purchase_price"=>"",
 "cost_to_consumer_for_loan"=>"",
 "repair_status"=>"Working",
 "date_reviewed"=>"10-15-2012",
 "qr_url"=>"",
 "location"=>"",
 "restrictions"=>"",
 "notes"=>""}}},
 "commit"=>"Create Inventory item"} 
```

inventory_items_controller.rb

```
def create
    params[:inventory_item].delete(:estimated_dealer_price)
    @inventory_item = InventoryItem.create(params[:inventory_item])
    @inventory_item.name = inventory_item.name.downcase

    if inventory_item.save
      redirect_to(inventory_items_path, :notice => "Item created.")
    else
      render 'new'
    end 
  end 
```

控制器正在接收 id 并尝试找到正确的供应商（存在），当留给用于查找供应商和建立关系的内置 rails 方法时会出现问题。

供应商名称的输入是一个自动完成，它将 id 分配给隐藏的 id 字段。

可能的解决方案：

1.  在控制器中手动处理，获取 id 并建立关系
2.  更改表单，以便 inventory_item.vendor.name 自动完成 inventory_item.vendor_id 并在提供 id 的情况下去除名称
3.  修复我丢失的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:46:24.597

听起来你有相反的想法，通常孩子不应该创建父记录，你应该检查它是否可以在更标准的父子关系方法中实现。

话虽这么说，你可以做这样的事情

```
InventoryItem << ActiveRecord::Base
  belongs_to :vendor
  def vendor_attributes=(params)
    self.vendor = Vendor.find(params[:id]) || Vendor.create_by_name!(params[:name])
  end
end 
```

# svn - 什么是 SVN 中的中间目录？

> ID：12906238
> 
> 赞同：12
> 
> 时间：2012-10-16T01:13:30.440
> 
> 标签：svn

我刚开始学习SVN。请给我您的建议，以了解以下基本理论。

`svn copy`and命令有`svn move`一个选项叫做`--parents`. 它说没有`--parents`选项，它不会创建`intermediate directories`.

谁能告诉我是什么`intermediate directories`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-16T02:09:25.140

假设您刚刚在 Subversion 中创建了一个新的 Java 项目。您现在有一个空目录，并且您想为源文件创建一个目录。即使我不使用 Maven，我也喜欢遵循 ​​Maven 目录结构。Maven 说我的源文件应该在`src/main/java`目录下。由于我的公司是 VegiBank.com，这是他们的基础项目，我想创建目录`src/main/java/com/vegibank/foundation`。我可以这样做：

```
$ svn mkdir src
$ svn mkdir src/main
$ svn mkdir src/main/java
$ svn mkdir src/main/java/com
$ svn mkdir src/main/java/com/vegibank
$ svn mkdir src/main/java/com/vegibank/foundation 
```

我必须先创建目录才能创建子目录。但是，使用该`--parents`选项，我可以用一个命令替换所有这些：

```
$ svn mkdir --parents src/main/java/com/vegibank/foundation 
```

这使得整个目录树无需我一次创建每个子目录。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-16T01:15:41.360

请参阅[`mkdir -p`](http://linux.die.net/man/1/mkdir)svn 正在模仿的功能。

```
svn cp foo bar/baz/foo 
```

如果存在`bar`或`bar/baz`不存在，则复制将失败。

```
svn cp --parents foo bar/baz/foo 
```

如果`bar`和/或`bar/baz`不存在，那么它们将被自动创建。

# python - Python 套接字超时错误

> ID：12906242
> 
> 赞同：4
> 
> 时间：2012-10-16T01:14:21.683
> 
> 标签：python, attributes, timeout, attributeerror

我正在 Python 2.7 中编写一个非常简单的 udp 套接字连接

服务器端已启动并正在运行。我在客户端遇到了麻烦。

```
from socket import *

serverName = '127.0.0.1'
serverPort = 5444
counter = 1;

while counter < 55:
    mySocket = socket(AF_INET,SOCK_DGRAM)

    try:
        mySocket.settimeout(1.0)
        message = raw_input('')
        mySocket.sendto(message,(serverName, serverPort))
        modifiedMessage, serverAddress = mySocket.recvfrom(1024)
    except mySocket.timeout:
        print 'Request timed out!'
        mySocket.close()
    else:   
        print 'Server Response:  '
        print modifiedMessage   

    mySocket.close() 
```

我收到以下错误。除了 mySocket.timeout: AttributeError: '_socketobject' 对象没有属性 'timeout'

我不明白为什么没有超时属性？！

事实上，我正在查看智能感知，也没有这样的属性。

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T02:13:37.123

该`socket`模块有一个`timeout`类。您的套接字对象`mysocket`（类型为`socket.socket`）没有`timeout`属性。

试试这个：

```
except timeout:
    print 'Request timed out!'
    mySocket.close() 
```

请注意，您还应该小心`import *`以这种方式使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T01:33:29.817

我有 python 2.7，它适用于 ipython

```
Launching python -O
Python 2.7.2 (default, Apr 17 2012, 22:01:25) 
Type "copyright", "credits" or "license" for more information.

IPython 0.13 -- An enhanced Interactive Python.
?         -> Introduction and overview of IPython's features.
%quickref -> Quick reference.
help      -> Python's own help system.
object?   -> Details about 'object', use 'object??' for extra details.

In [1]: from socket import *

In [2]: mySocket = socket(AF_INET, SOCK_DGRAM)

In [3]: mySocket.

mySocket.accept         mySocket.dup            mySocket.getsockopt     mySocket.recv           mySocket.sendall        mySocket.shutdown
mySocket.bind           mySocket.family         mySocket.gettimeout     mySocket.recv_into      mySocket.sendto         mySocket.type
mySocket.close          mySocket.fileno         mySocket.listen         mySocket.recvfrom       mySocket.setblocking    
mySocket.connect        mySocket.getpeername    mySocket.makefile       mySocket.recvfrom_into  mySocket.setsockopt     
mySocket.connect_ex     mySocket.getsockname    mySocket.proto          mySocket.send           mySocket.settimeout     

In [3]: mySocket.
mySocket.accept         mySocket.dup            mySocket.getsockopt     mySocket.recv           mySocket.sendall        mySocket.shutdown
mySocket.bind           mySocket.family         mySocket.gettimeout     mySocket.recv_into      mySocket.sendto         mySocket.type
mySocket.close          mySocket.fileno         mySocket.listen         mySocket.recvfrom       mySocket.setblocking    
mySocket.connect        mySocket.getpeername    mySocket.makefile       mySocket.recvfrom_into  mySocket.setsockopt     
mySocket.connect_ex     mySocket.getsockname    mySocket.proto          mySocket.send           mySocket.settimeout     

In [3]: mySocket.set
mySocket.setblocking  mySocket.setsockopt   mySocket.settimeout   

In [3]: mySocket.set
mySocket.setblocking  mySocket.setsockopt   mySocket.settimeout   

In [3]: mySocket.settimeout(1.0)

In [4]: 
```

# sql - 低效的 JOIN 方法？

> ID：12906243
> 
> 赞同：1
> 
> 时间：2012-10-16T01:14:23.503
> 
> 标签：sql, join, inner-join

我正在尝试在这里查询两个相当大的表以获取一些结果并遇到一些效率问题。

*注意：我只包含了相关的列，以使这看起来不那么凌乱！*

TableA (Stock) 具有 productID、ownerID 和 count 列

TableB（所有者）具有 ID、accountHolderID 和 name 列

我想要做的是查询 TableA 并且 productID = X 拉起 Stock.productID、Stock.accountHolderID 和 Owners.name。这两个表之间的关系是 Stock.ownerID = Owners.ID 所以如果 WHERE 条件拉说五个产品 ID，那么我希望 TableB 中的名称与 TableA 中的 ownerID 匹配。

这种情况下唯一的唯一 ID 是 TableB 中的 Owners.ID

只需对这些产品在 TableA 上执行基本的 SELECT 查询需要 15 秒，但是当我添加一个 INNER JOIN 以匹配 TableB 时，查询需要更长的时间，超过 10 分钟。我猜我设计这个查询效率低下。

```
SELECT
Owners.name,
Stock.productID,
Stock.ownerID
FROM Stock
INNER JOIN 
Owners
ON Stock.ownerID = Owners.ID
WHERE
Stock.productID = 42301679 
```

我怎样才能使这个查询更有效率？

将 OR 添加到 WHERE 条件是否允许我一次提取多个产品 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:20:40.853

您的查询看起来正确，也许我们可以看到架构

为了一次提取多个产品ID，您可以使用`IN`运算符而不是`OR`

```
SELECT
Owners.name,
Stock.productID,
Stock.ownerID
FROM Stock
INNER JOIN 
Owners
ON Stock.ownerID = Owners.ID
WHERE
Stock.productID IN (42301679,123232,232324) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T01:45:33.577

根据您的评论，您似乎在 owner.id 字段上缺少一个非常关键的索引。现在，请记住此索引将有助于此查询，但您必须考虑针对此表运行的所有其他查询，以确定添加该索引是否是一个好主意。

在 29M 行时，对经常插入的表有一个索引可能会对插入时间产生显着影响。

这可能是不同应用程序需要不同索引的情况 - 即您的 OLTP 应用程序和您的报告应用程序（可能只是您运行临时查询）。一个常见的解决方案是让第二台服务器运行您的报告/数据仓库查询，该服务器的索引已正确调整到此功能。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T02:10:57.120

如果 productID 在 Stock 表中是唯一的，则将其设为索引是有意义的，这可以大大提高性能，正如其他人所提到的。

另一个性能提升来自设置特定长度的 Owner.name 字段。在 mySQL 中，VARCHAR 可用于不同长度的字符串，而 CHAR(32) 列表示名称将始终占用 32 个字符。多余的未使用空间只是被填充了，所以你真的可以认为 (32) 表示最大长度。性能优势来自这样一个事实，即数据库现在确切地知道每行占用多少字节，并且可以使用此信息来缩短查找时间。

# php - 如何使辅助文档就绪功能？

> ID：12906244
> 
> 赞同：0
> 
> 时间：2012-10-16T01:14:31.367
> 
> 标签：php, javascript, html, smarty

好的，如果有人可以提供帮助，这是我的问题。

我有一个用于切换内容的 div id 的 href - 我想添加另一个文档就绪函数 javascript，而不会与我已经拥有的 make 选项卡冲突。

已经制作标签的示例：

```
<script type="text/javascript">
{literal}
$(document).ready(function(){
    function makeTabs(selector) {
        var tabContainers = $(selector + ' > div');
        tabContainers.removeClass("selected").filter(':first').addClass("selected");

        galleryRendered = false;
        $(selector + ' > ul a').click(function () {
            tabContainers.removeClass("selected");
            tabContainers.filter(this.hash).addClass("selected");
            $(selector + ' > ul a').removeClass('selected');
            $(this).addClass('selected');

            if (this.hash == '#Pictures' && !galleryRendered)
            {
                var galleries = $('.pictures > .ad-gallery').adGallery({
                    effect : 'slide-hori',
                    enable_keyboard_move : true,
                    cycle : true,
                    animation_speed : 400,
                    slideshow: {
                        enable: false
                    },
                    callbacks: {
                        init: function() {
                            this.preloadImage(0);
                            this.preloadImage(1);
                            this.preloadImage(2);
                        }
                    }
                });
                galleryRendered = true;
            }
            if (this.hash == '#OnTheMap') document.getElementById("Map").map.onContainerChanged();

            return false;
        }).filter(':first').click();
    }
    makeTabs('.tabs');
});
{/literal}
</script> 
```

想要创建第二个，这样我就可以在现有的 div id 区域/内容中创建选项卡，以从照片切换到视频再到 youtube。

```
<div class=".tabs"><ul><li><a href="#photo">[[Photo]]</a></li><li><a href="#tube">[[Youtube]]</a></li><li><a href="#vid">[[Video]]</a></li></ul><div id="photo">Test</div><div id="tube">Test</div><div id="vid">Test</div></div> 
```

这将在一个已经存在的 div id 中，该 id 使用上面显示的第一个选项卡创建器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T01:16:00.747

在 jQuery 中你只需要这样做：

```
$(function(){
  // code here
});

$(function(){
  // more code here
}); 
```

像这样声明的每个函数都将在 domready 上执行。

# php - PHP url 问题和谷歌地图

> ID：12906245
> 
> 赞同：1
> 
> 时间：2012-10-16T01:14:36.560
> 
> 标签：php, google-maps

我正在尝试使用 mysql 数据库和一些 php 代码填充谷歌地图。我按照以下教程（[http://www.macrostash.com/2011/09/17/demo-use-a-php-mysql-database-to-load-markers-on-a-google-map/](http://www.macrostash.com/2011/09/17/demo-use-a-php-mysql-database-to-load-markers-on-a-google-map/)）和一切正常。

我的问题是我想在我的谷歌地图标记气泡中添加一个网址。

我添加一个href链接的那一刻，地图就没有了。

例子：

```
 "<p class='content'><b>Park:</b>".$row[1]. <- Works
    "<p class='content'><b>Park:</b>".domain. <- Works
    "<p class='content'><b>Park:</b><a href=\" ".$domain." \">".$row[1]."</a>". <- No Luck 
```

我唯一能看到的问题是第一条记录似乎被误传了。

```
<input type="hidden" id="encodedString" name="encodedString" value="&lt;p class='content'&gt;&lt;b&gt;Park:&lt;/b&gt;Basinview School&lt;br&gt;&lt;b&gt;Park:&lt;/b&gt;&lt;**a href=" http:="" test.com="" "="">** 
```

斜线仅从第一条记录中丢失。

任何帮助将不胜感激。

**编辑** 这是我的全部内容。

```
 $encodedString = $encodedString.$separator.
  "<p class='content'><b>Park:</b><a href=\" ".$domain." \">".$row[1]."</a>".
  "<br><b>Address:</b> ".$row[2].
  "<br><b>Area: </b>".$row[3].
  "</p>&&&".$row[4]."&&&".$row[5]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:20:24.827

你没有关闭你的`<p>`标签。如果你回到你的教程，你会看到他们关闭了它们......你需要使用这个

```
"<p class='content'><b>Park:</b>".$row[1]."</p>
<p class='content'><b>Park:</b>".domain."</p>
<p class='content'><b>Park:</b><a href=\" ".$domain." \">".$row[1]."</a></p>" 
```

# python - Cpython 解释器 / IronPython 解释器 没有名为 clr 的模块

> ID：12906249
> 
> 赞同：5
> 
> 时间：2012-10-16T01:15:15.423
> 
> 标签：python, clr, visual-studio-2012, ironpython

我正在使用 IronPython，我想创建一些 Windows 窗体，我想创建一个带有一些按钮的 Windows 窗体，我想在 Visual Studio 中使用 Iron Python 执行此操作，我每次都使用 Visual Studio 2012 集成版我创建了一个“ironpython windows form”项目，当我想运行它时，它说：

> 该项目当前设置为使用 .NET 调试器进行 IronPython 调试，但该项目配置为使用 CPython 解释器启动。要解决此问题，请在项目属性->调试->启动模式中更改调试器类型

当我将调试器更改为标准 Python 启动器时，它说：

> ImportError：没有名为 clr 的模块

我应该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T18:28:52.263

我遇到了同样的错误并通过以下步骤解决了它：

我将项目属性 General>Interpreter 更改为 IronPython 2.7 Debug>Launch mode 为 IronPython(.NET) 启动器

起初，我没有将 IronPython 视为可供选择的解释器选项。我将 IronPython 安装路径添加到我的路径系统变量中，重新启动 Visual Studio 并且它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-28T02:24:41.267

我知道这是一个老问题，但我今天遇到了同样的事情，并没有找到任何令人满意的答案。

我正在使用新安装的 Visual Studio 2015 - Windows 8.1 下的社区。在安装了一堆额外的附加组件和工具箱之后，我认为它会完成。我在 VS 中有一个 IronPython 调试选项，但它没有（成功）安装！

如果您在使用 IronPython 时遇到问题，请查看`C:\Program Files (x86)`并验证该目录是否`IronPython 2.7`存在。

（IronPython 2.7 可在 [http://ironpython.codeplex.com/releases/view/169382](http://ironpython.codeplex.com/releases/view/169382)获得。）

验证安装成功后，设置您的开发环境：

*   在 Visual Studio 中创建 Python 项目
*   在项目菜单的底部，单击`<project name> Properties`
*   在 General 页面上，选择 IronPython 2.7 作为解释器
*   在调试页面上，将启动模式设置为 IronPython (.Net) 启动器
*   最后，单击调试标准库。

使用该设置，我能够生成一个空白的 Windows 窗体应用程序，并在有/没有调试的情况下启动它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T12:16:13.653

好的伙计们，我告诉你我是如何解决这个问题的，我从头开始重新安装了所有东西，我曾经使用 Visual Studio Express，但我安装了“专业”版本，然后我从[http://ironpython.codeplex.com重新安装了所有东西/releases/view/81726](http://ironpython.codeplex.com/releases/view/81726) 突然一切都在控制台中正常工作，然后瞧，Visual Studio 中的 Ironpython Windows 窗体项目现在正在工作:)

# javascript - 在不实际使用表格的情况下获得类似表格的对齐方式

> ID：12906261
> 
> 赞同：0
> 
> 时间：2012-10-16T01:17:25.093
> 
> 标签：javascript, jquery, css, html-table

我怎样才能做到这一点：

```
<table border="0">
  <tbody>
    <tr>
      <td style="margin-right:5px;">
        <h2 id="optiona" class="option optiona optiona2">a. aa   </h2>
      </td>
      <td style="margin-right:5px;">
        <h2 id="optionb" class="option optionb optionb2">b. a   </h2>
      </td>
    </tr>
    <tr>
      <td style="margin-left:5px;">
        <h2 id="optionc" class="option optionc optionc2">c. aa   </h2>
      </td>
      <td style="margin-left:5px;">
        <h2 id="optiond" class="option optiond optiond2">d.    </h2>
      </td>
    </tr>
  </tbody>
</table> 
```

使用类似这样的东西（和 CSS）：

```
<h2 style="display:inline;" id="optiona" class="option optiona optiona1">a. a   </h2>
<h2 style="display:inline;" id="optionb" class="option optionb optionb1">b. aaa   </h2>
<br />
<h2 style="display:inline;" id="optionc" class="option optionc optionc1">c. aaa   </h2>
<h2 style="display:inline;" id="optiond" class="option optiond optiond1">d. aa   </h2> 
```

我也对**JavaScript 和/或 jQuery**
的选项持开放态度 我对内容的控制为零，它们可能相当长（如果太长，我需要它们包装，但我认为这是自动发生的）所以没有固定宽度。
在表格中，如果列中最长的单元格为 200px 宽，则整个列将为 200px，我将如何仅使用 html 和 css 来执行此操作？基本上需要 for h2 元素像这样排列：

```
a.aaaaa b.a
c.a     d.aaa 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:29:12.477

您可以使用`display`模仿表格的属性。不过，不确定它们是否适用于旧版浏览器。

[http://ecommercedeveloper.com/articles/1941-css-display-table-display-table-row-and-display-table-cell/](http://ecommercedeveloper.com/articles/1941-css-display-table-display-table-row-and-display-table-cell/)

[http://ajaxian.com/archives/display-table](http://ajaxian.com/archives/display-table)

兼容性：

[http://caniuse.com/css-table](http://caniuse.com/css-table)

# ruby-on-rails - 更快地搜索字段的第一个字符不匹配 [A-Za-z] 的记录？

> ID：12906264
> 
> 赞同：5
> 
> 时间：2012-10-16T01:18:04.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, postgresql-performance

我目前有以下内容：

```
User (id, fname, lname, deleted_at, guest) 
```

`fname`我可以通过他们的初始查询用户列表，如下所示：

```
User Load (9.6ms)  SELECT "users".* FROM "users" WHERE (users.deleted_at IS NULL) AND (lower(left(fname, 1)) = 's') ORDER BY fname ASC LIMIT 25 OFFSET 0 
```

由于以下索引，这很快：

```
 CREATE INDEX users_multi_idx
  ON users (lower(left(fname, 1)), fname)
  WHERE deleted_at IS NULL; 
```

我现在要做的是能够查询所有不以字母AZ开头的用户。我让它像这样工作：

```
SELECT "users".* FROM "users" WHERE (users.deleted_at IS NULL) AND (lower(left(fname, 1)) ~ E'^[^a-zA-Z].*') ORDER BY fname ASC LIMIT 25 OFFSET 0 
```

但问题是这个查询很慢，似乎没有使用索引来加速第一次查询。关于如何优雅地使第二个查询（非 az）更快的任何建议？

我正在使用带有 rails 3.2 的 Postgres 9.1

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T01:44:49.230

^(在这里更新)
[了前面的问题的答案。](https://stackoverflow.com/q/12905312/939860)

我的第一个想法（带有 的索引[`text_pattern_ops`](http://www.postgresql.org/docs/current/interactive/indexes-opclass.html)）不适用于我的测试中的正则表达式。更好地将您的查询重写为：

```
SELECT *
FROM   users
WHERE  deleted_at IS NULL
**WHERE lower(left(fname, 1)) < 'a' COLLATE "C"
OR    lower(left(fname, 1)) > 'z' COLLATE "C"**
ORDER  BY fname
LIMIT  25 OFFSET 0;
```

除了这些表达式通常更快之外，您的正则表达式中还有大写字母，与索引不匹配`lower()`。与单个字符相比，尾随字符毫无意义。

并使用此索引：

```
CREATE INDEX users_multi_idx
ON users (lower(left(fname, 1)) **COLLATE "C"**, fname)
WHERE deleted_at IS NULL;
```

该[`COLLATE "C"`](http://www.postgresql.org/docs/current/interactive/collation.html)部分是可选的，仅对性能有很小的贡献。它的目的是将排序规则重置为默认的 posix 排序规则，它只使用字节顺序并且通常更快。有用，在排序规则无论如何都不相关的情况下。

**如果**您使用它创建索引，则只有与排序规则匹配的查询才能使用它。因此，如果性能不是您最重要的要求，您可能会*跳过它来简化事情。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T03:56:51.387

作为@ErwinBrandstetter 的通用解决方案的替代方案，PostgreSQL 支持[部分索引](http://www.postgresql.org/docs/current/static/indexes-partial.html)。你可以说：

```
CREATE INDEX users_nonalphanumeric_not_deleted_key
ON users (id)
WHERE (users.deleted_at IS NULL) AND (lower(left(fname, 1)) ~ E'^[^a-zA-Z].*'); 
```

此索引对任何其他查找没有帮助，但它会预先计算此特定查询的答案。这种技术对于从一个更大的表返回一个小的、预定义的子集的查询通常很有用，因为生成的索引将忽略表的绝大多数并且只包含感兴趣的行。

# ruby-on-rails - rspec-rails 和使用 let 导致变量冲突？

> ID：12906268
> 
> 赞同：1
> 
> 时间：2012-10-16T01:18:34.083
> 
> 标签：ruby-on-rails, ruby, rspec

正在编写一些测试并遇到使用`let`定义一些变量的问题。

我花了一些时间制作了一个最小的失败示例：

```
require "spec_helper"

describe "Some behavior" do
  let(:attachments_dir) { "some_test_dir" }

  before :all do
    attachments_dir  # Commenting out this line makes the tests pass
  end

  context "nested 1" do
    let(:api_params) do
      { message: { to: "recipient1", from: "sender1"} }
    end

    before do
      puts "nested 1 before " + api_params.to_s
    end

    it "nested 1 example 1" do
      api_params[:message][:to].should == "recipient1"
    end
  end

  context "nested 2" do
    let(:api_params) do
      { message: { from: "sender2"} }
    end

    before do
      puts "nested 2 before " + api_params.to_s
    end

    it "nested 2 example 1" do
      api_params[:message][:to].should be_nil
    end
  end
end 
```

此测试失败

```
nested 1 before {:message=>{:to=>"recipient1", :from=>"sender1"}}
nested 2 before {:message=>{:to=>"recipient1", :from=>"sender1"}}

expected: nil
   got: "recipient1" 
```

但是，注释掉示例的第 8 行会导致测试通过

```
#attachments_dir 
```

为什么顶层会`let`干扰嵌套`let`的上下文？这对我来说就像一个 RSpec 错误，但我想在发布到他们的问题列表之前我会在这里问。

# javascript - 如何在 javascript 正则表达式中转换此模式

> ID：12906271
> 
> 赞同：1
> 
> 时间：2012-10-16T01:18:58.713
> 
> 标签：javascript, jquery

这是有效的

```
newRow.replace('[[' + key + ']]', item); 
```

但我尝试用正则表达式替换，但它不起作用

```
newRow.replace('/\[\[' + key + '\]\]/'g, item); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T01:20:30.740

您需要使用 RegExp 构造函数来使用字符串文字语法。

```
newRow.replace(new RegExp('\\[\\[' + key + '\\]\\]', 'g'), item); 
```

另请注意，我们需要使用`\\`而不是`\`. 这是因为`\`在字符串文字语法中有它自己的含义。因此，要获取`\`传递给构造函数的字符串中的文字字符，我们需要对其进行转义。

# c# - 这两个 if 语句是否相同？

> ID：12906272
> 
> 赞同：2
> 
> 时间：2012-10-16T01:19:10.990
> 
> 标签：c#, if-statement, refactoring

1)

`if (((w || x) || y) || z)`

2)

`if (w || x || y || z)`

我在我正在处理的许多代码中看到了第一个，我想知道是否可以将它简化为第二个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T01:22:56.160

是的，这两个语句是等价的。

[7.2.1 运算符优先级和结合性](http://msdn.microsoft.com/en-us/library/aa691323%28v=vs.71%29.aspx)

> 当一个操作数出现在具有相同优先级的两个运算符之间时，运算符的关联性控制了执行操作的顺序：
> 
> *   除赋值运算符外，所有二元运算符都是左结合的，这意味着运算是从左到右执行的。例如，x + y + z 被计算为 (x + y) + z。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:24:09.980

简而言之，在第一个语句中，您正在检查 w、x、y 或 z 中的任何一个是否为真。因此，第二个陈述实际上等同于第一个。

# c - 在 Windows 7 上对音频文件使用 u-law 压缩

> ID：12906275
> 
> 赞同：0
> 
> 时间：2012-10-16T01:19:31.427
> 
> 标签：c, windows, audio, wasapi

我需要将一些高分辨率音频文件转换为 u-law 压缩。我没有找到这方面的文档——我几乎可以肯定 Windows 机器上有编解码器，但我到底要如何访问它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:56:31.140

是的，编解码器在那里，但是它在 WASAPI 之外。处理编解码器的 API 有：

*   [音频压缩管理器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd797805%28v=vs.85%29.aspx)
*   直接秀
*   媒体基金会

不确定后者，但是前两个具有现成的 μ-law 编码器（编解码器本身具有 ACM 接口，DirectShow 提供了一个[包装器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373410%28v=vs.85%29.aspx)）。

# jquery - $(this) 和 $("#id") 有什么区别？

> ID：12906276
> 
> 赞同：2
> 
> 时间：2012-10-16T01:19:36.310
> 
> 标签：jquery, selector, this, each

在`$.each()`循环中，有一个特定的案例我不明白为什么会失败。

当我做一个这样的 if 语句时（我的具体例子，只有没有真实的属性名称）

```
if(($(this).attr("some-attribute"))) 
```

无论属性是否存在，它总是返回 false。

但是，如果我首先获取此元素的 id，然后检查没有“this”关键字的属性，它就可以正常工作。

```
var id = $(this).attr("id");
if(($("#"+id).attr("some-attribute"))) 
```

这工作正常，它确实返回正确的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T01:20:57.667

`$(this)`不查询 DOM，它只是用 jQuery 对象包装了 javascript DOM 元素。

`$('#id')`查询 DOM。

我建议你[在这里阅读我的答案](https://stackoverflow.com/q/10433014/601179)

# windows-8 - Windows 8 VirtualBox Vt-x 不可用

> ID：12906277
> 
> 赞同：6
> 
> 时间：2012-10-16T01:19:41.583
> 
> 标签：windows-8, virtualbox

我刚刚将我的主机从 windows 7 升级到 windows 8。我在 VirtualBox for iOS dev 下运行 OSX VM。自升级以来，我无法再运行我的 OSX VM。我收到错误 VT-x 不可用 (VERR_VMX_NO_VMX)。

我检查了bios设置，硬件虚拟化仍然开启。这才有意义，因为唯一改变的是操作系统。

# audio - VirtualDub 无法录制音频，没有显示输入/源

> ID：12906279
> 
> 赞同：0
> 
> 时间：2012-10-16T01:19:44.547
> 
> 标签：audio, video, record, capture, virtualdub

我正在使用 VirtualDub 1.9.11 版在我的电脑上截屏视频游戏。它非常适合视频；但是，我无法录制我的音频。

我的主板是技嘉 ga-z77x-ud5h。我已经下载了最新的音频驱动程序，甚至尝试过旧的驱动程序。

![在此处输入图像描述](../Images/ed28a2569eb43dab9848c94782721b4d.png) 这是我在 VirtualDub 中的声音选项应该类似于的图像。这来自这个 VirtualDub 教程[http://www.genadmission.com/vdubguide.html](http://www.genadmission.com/vdubguide.html)

![在此处输入图像描述](../Images/40c3aa68b2cfe621f3e1c317a9b12ef3.png) 这是我的输入的样子，没有...

![在此处输入图像描述](../Images/dfbd60713a2bba4de55dd420997f259d.png) 这是我的来源的样子，没有......

关于为什么我没有来源和输入的任何线索？如果我插入麦克风，我可以获得麦克风输入，但仅此而已。

我从这个视频教程 [http://www.youtube.com/watch?v=fvfPXn5VQ0w了解了 uisng VirtualDub](http://www.youtube.com/watch?v=fvfPXn5VQ0w)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:11:15.867

解决了。必须启用被默认禁用的立体声混音......为什么Windows 7默认禁用它超出了我的范围。

在此视频中看到[http://www.youtube.com/watch?v=mjQ_qS-LaoU](http://www.youtube.com/watch?v=mjQ_qS-LaoU)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-28T11:01:02.173

我已经运行 DIMH 和 SFC 来查看系统上是否有任何错误。证监会表示，一些目录有双重所有者并纠正了这一点，但没有帮助。

我尝试重新连接 Pinnacle 设备，认为让系统选择多个设备可能会解决问题。VirtualDub 可以同时看到两个视频捕获设备，并且会使用其中一个：但它仍然没有让我选择音频输入设备。

但是，它可以让我从 FHD HDMI 输入端获取视频并从 Pinnacle 设备获取声音，所以我有一个解决方法。这很愚蠢，我真的很想让它正常工作，但至少我可以使用这个解决方案。

# mysql - MySQL：有没有简单的方法将 UUID 转换为整数？

> ID：12906280
> 
> 赞同：2
> 
> 时间：2012-10-16T01:19:55.967
> 
> 标签：mysql, uuid

我需要将数据从一个系统 A 传输到系统 B。系统 A 存储用户 ID 是 UUID，系统 B 将它们存储为整数。

我正在使用 MySQL select 语句从 System A 检索和保存数据，然后将其传输到 System B。有没有一种简单的方法可以在 MySQL select 语句中将 UUID 转换为整数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T03:53:36.273

正如评论中所讨论的，您不能简单地将 UUID 转换为整数并期望它是唯一的。UUID 是 128 位，而 UUID`INT(10)`可能是 32 位。这意味着您必须忽略 96 位，这相当于非常多的潜在冲突（每个唯一的 32 位值大约有 78 个不同的 UUID）。

并非全部丢失，因为在 32 位中您可以代表多达 40 亿用户，这可能就足够了。您真正需要做的就是将现有的 UUID 映射到一个整数，这实际上非常简单。

为此，您可以创建一个转换表，其中存储 UUID（作为主键）和唯一整数（可能是自动增量字段）。您可以使用它从系统 A 映射到系统 B（*反之亦然*）。您可以将此表放入两个数据库中的任何一个，也可以将其分开。就个人而言，我会将其放入系统 B，因为那是`userId`整数值真正有意义的地方。

# java - 带时区的 Java 日期秘密更改？

> ID：12906290
> 
> 赞同：2
> 
> 时间：2012-10-16T01:20:54.023
> 
> 标签：java, date, timezone

我们有一个 web 服务应用程序，它总是以 UTC 格式输入时间作为

2012-12-06T05:00:00.000Z

这是将日期解析为java util Date对象的代码

```
 private static final Pattern PATTERN = Pattern.compile(
"(\\d{4})(?:-(\\d{2}))?(?:-(\\d{2}))?(?:[Tt](?:(\\d{2}))?(?::(\\d{2}))?(?::(\\d{2}))?(?:\\.(\\d{3}))?)?([Zz])?(?:([+-])(\\d{2}):(\\d{2}))?");

  Matcher m = PATTERN.matcher(dateString);
  Calendar c = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
  int hoff = 0, moff = 0, doff = -1;
  if (m.group(9) != null) {
    doff = m.group(9).equals("-") ? 1 : -1;
    hoff = doff * (m.group(10) != null ? Integer.parseInt(m.group(10)) : 0);
    moff = doff * (m.group(11) != null ? Integer.parseInt(m.group(11)) : 0);
  }
  c.set(Calendar.YEAR,        Integer.parseInt(m.group(1)));
  c.set(Calendar.MONTH,       m.group(2) != null ? Integer.parseInt(m.group(2))-1 : 0);
  c.set(Calendar.DATE,        m.group(3) != null ? Integer.parseInt(m.group(3)) : 1);
  c.set(Calendar.HOUR_OF_DAY, m.group(4) != null ? Integer.parseInt(m.group(4)) + hoff: 0);
  c.set(Calendar.MINUTE,      m.group(5) != null ? Integer.parseInt(m.group(5)) + moff: 0);
  c.set(Calendar.SECOND,      m.group(6) != null ? Integer.parseInt(m.group(6)) : 0);
  c.set(Calendar.MILLISECOND, m.group(7) != null ? Integer.parseInt(m.group(7)) : 0);
  return c.getTime(); 
```

最近观察到一件奇怪的事情，当应用程序首次启动时，返回的日期将正确打印为 Thur Dec 06 00:00:00 EST 2012

因为我们在 EST 时区。然后过了一会儿，经过一些执行，即使没有重新启动应用程序，相同的日期也会打印为 Thur Dec 06 05:00:00 UTC 2012

我一直在深入研究应用程序，但没有看到任何会重置应用程序默认时区的更改。怎么会这样？我们开始研究这个已经一个星期了，我们仍然一无所知:-(

另外，是否有确保应用程序继续使用系统时区，因为它不会改变？

非常感谢任何帮助/提示

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T01:38:22.400

不幸的是，任何写得不好的代码决定调用`TimeZone.setDefault`. 当第三方代码调用该方法时，我们实际上在我们的应用程序中被这个问题所困扰。不幸的是，解决方案是*永远不要*依赖应用程序开始之后的默认时区。我们有一个核心类，它在启动时获取默认的 TimeZone，所有需要使用系统默认值输出日期的后续代码都*将显式使用这个隐藏的实例*（这当然是防止修改的，不要忘记 TimeZone 是可变的！ ）。

# visual-studio - 引用的 DLL 被复制到输出目录，但未包含在 ClickOnce 部署中

> ID：12906293
> 
> 赞同：1
> 
> 时间：2012-10-16T01:21:12.767
> 
> 标签：visual-studio, clickonce, quicktime

我在 VS2010 中使用 ClickOnce 部署 QuickTime 引用时遇到问题。该应用程序在本地运行时运行良好，但在部署时却不行。我在安装过程中将其追踪到丢失的 DLL。

这些是我的项目中包含的参考：

```
AxQTOControlLib
QTOControlLib
QTOLibrary 
```

当我发布我的应用程序时，它会创建：

```
AxInterop.QTOControlLib.dll.deploy
Interop.QTOControlLib.dll.deploy
Interop.QTOLibrary.dll.deploy 
```

问题是当我实际安装该应用程序时`Interop.QTOLibrary.dll.deploy`，在安装目录中找不到。

我注意到的另一件事是在 Publish -> Application Files 中，`Interop.QTOLibrary.dll`没有列出。

我试过调整隔离值，但这没有影响。我也尝试过手动包括`Interop.QTOLibrary.dll`但后来我遇到了哈希不匹配的问题。

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:18:13.517

经过几个小时的摆弄，我得到了它的工作。

解决方法是设置所有 3`Copy Local = true`个`Isolated = true`QuickTime 引用。

`Interop.QTOLibrary.dll`我还手动包含了但设置的副本`Build Action = None`并`Copy to Output = Never`按照这些说明：[http](http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/fcb2008b-e442-4c49-aa7a-0acb1ef0e210) ://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/fcb2008b-e442-4c49-aa7a-0acb1ef0e210 。不确定这是否有帮助。

# javascript - JQUERY inArray 不匹配

> ID：12906294
> 
> 赞同：0
> 
> 时间：2012-10-16T01:21:15.710
> 
> 标签：javascript, jquery, arrays, json

我正在与[inArray](http://api.jquery.com/jQuery.inArray/)一起工作，我希望 yinz 能提供帮助。

我有 AJAX 可以从我的数据库中提取一些用户 ID。它是 JSON 编码的，并作为数组下拉。但是，当我尝试将值与数组匹配时，我总是得到-1。它永远不会匹配。

我已经发出了一系列警报，试图弄清楚发生了什么，但我终其一生都无法弄清楚为什么它不起作用。为了争论起见，假设它下拉的用户是#s 1、2和3。图像集合中表示的用户ID是1、2、3、4、5。

```
$.ajax({
    dataType: "json",
    url: "/* some url */",
    success: function (players) {
        $("#userpics img").each(function () {
            var userid = $(this).data("userid");
            alert (players); // 1,2,3
            alert (userid); // 1
            alert ("is array? " + Array.isArray(players)); // true
            alert ("in array? " + $.inArray(userid, players)); // -1
            alert ("in object? " + (userid in players)); // false
            alert ("match? " + (userid == players[0])); // true
        })
   }
}); 
```

如您所见，被下拉的数组在第一个警报中显示为字符串，但在第三个警报中解析为数组。即使`userid = 1`和 下拉的数据`["1","2","3"]`仍然无法匹配`inArray`。但是，当我匹配时，`userid == players[0]`它匹配。

我完全被难住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:35:27.713

看起来就像您将字符串与数字数组进行比较..

这可能是您获得此输出的原因..

还要检查它是否返回负索引，因为这表明该项目不存在于数组中

```
if( $.inArray(userid, players) > - 1){

    // Item in array
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:31:58.777

尝试阅读[文档](http://api.jquery.com/jQuery.inArray/)...

*[jQuery.inArray()](http://api.jquery.com/jQuery.inArray/)*返回数组中元素的索引（如果找到）。

当您搜索数组中的第一个元素时，结果将为**ZERO**。

在 JavaScript 中，零的计算结果为*false 。*

您需要显式比较*inArray()*的结果以`-1`确定它是否包含元素。

用这个：

```
if (inArray(val, someArray) !== -1) {
    alert("it's in there...");
} 
```

取而代之的是：

```
if (inArray(val, someArray)) {
    alert("This won't work for the first element.");
} 
```

# c# - 字符/字符串比较

> ID：12906297
> 
> 赞同：9
> 
> 时间：2012-10-16T01:21:51.263
> 
> 标签：c#

我试图在我的程序中为搜索功能提供建议功能，例如，我在搜索部分输入 janw doe，它会输出 NO MATCH - 你是说 jane doe 吗？我不确定问题是什么，可能与字符/字符串比较有关..我尝试将两个变量都比较为 char 类型，例如 char temp -->temp.Contains ...etc 但出现错误（char不包含包含的定义）。希望有任何帮助！8)

```
if (found == false)
        {
            Console.WriteLine("\n\nMATCH NOT FOUND");
            int charMatch = 0, charCount = 0;
            string[] checkArray = new string[26];
            //construction site  /////////////////////////////////////////////////////////////////////////////////////////////////////////////
            for (int controlLoop = 0; controlLoop < contPeople.Length; controlLoop++)
            {
                foreach (char i in userContChange)
                {
                    charCount = charCount + 1;
                }
                for (int i = 0; i < userContChange.Length; )
                {
                    string temp = contPeople[controlLoop].name;
                    string check=Convert.ToString(userContChange[i]);
                    if (temp.Contains(check))
                    {
                        charMatch = charMatch + 1;
                    }
                }
                int half = charCount / 2;
                if (charMatch >= half)
                {
                    checkArray[controlLoop] = contPeople[controlLoop].name;
                }
            }
///////////////////////////////////////////////////////////////////////////////////////////////////////////
                Console.WriteLine("Did you mean: ");
                for (int a = 0; a < checkArray.Length; a++)
                {
                    Console.WriteLine(checkArray[a]);
                }
/////////////////////////////////////////////////////////////////////////////////////////////////// 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T01:32:45.470

一个字符串由许多字符组成。字符是原始的，同样，它不“包含”任何其他项目。字符串基本上是一个字符数组。

比较字符串和字符：

```
char a = 'A';
String alan = "Alan";
Debug.Assert(alan[0] == a); 
```

或者如果你有一个数字字符串..我想

```
char a = 'A';
String alan = "A";
Debug.Assert(alan == a.ToString()); 
```

所有这些断言都是正确的

但是，我想对您的问题发表评论的主要原因是提出一种替代方法来建议“您的意思是吗？”。有一种称为 Levenshtein Distance 的算法，它计算将一个字符串转换为另一个字符串所需的“单个字符编辑次数”。它可以用来衡量两个字符串的接近程度。你可能想研究一下这个算法是如何工作的，因为它可以帮助你。

这是我发现的一个小程序，它演示了：[Approximate String Matching with k-differences](http://www-igm.univ-mlv.fr/~lecroq/seqcomp/node3.html)

还有维基百科链接[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:33:02.880

Char 类型不能有`.Contains()`，因为只有 1 个 char 值类型。

在您的情况下（如果我理解），也许您需要使用`.Equals()`或`==`操作员。

注意：为了正确比较字符串，请使用`.Equals()`，`==`运算符在这种情况下不起作用，因为`String`它是引用类型。

希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T08:46:44.503

`char`type 没有该`Contains()`方法，但您可以像这样使用 iit：`'a'.ToString().Contains(...)`

如果不考虑性能，另一种简单的方法：

```
 var input = "janw doe";
        var people = new string[] { "abc", "123", "jane", "jane doe" };

        var found = Array.BinarySearch<string>(people, input);//or use FirstOrDefault(), FindIndex, search engine...
        if (found < 0)//not found
        {
            var i = input.ToArray();
            var target = "";

            //most similar
            //target = people.OrderByDescending(p => p.ToArray().Intersect(i).Count()).FirstOrDefault();

            //as you code:
            foreach (var p in people)
            {
                var count = p.ToArray().Intersect(i).Count();
                if (count > input.Length / 2)
                {
                    target = p;
                    break;
                }
            }

            if (!string.IsNullOrWhiteSpace(target))
            {
                Console.WriteLine(target);
            }
        } 
```

# visual-web-developer - 有没有办法让 Visual Web Developer 忽略构建错误？

> ID：12906299
> 
> 赞同：0
> 
> 时间：2012-10-16T01:21:53.643
> 
> 标签：visual-web-developer

我正在使用 MS 的 VWD 编辑我们网站中的一些 .aspx 文件（我将其作为网站打开，而不是项目/解决方案）。

我有一些临时文件仅用于测试，有些会在 VWD 2010 中生成构建错误。

但是 VWD 不会让我在存在这些构建错误的情况下“运行”网站中的其他页面。

有没有办法让它忽略它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T02:02:47.643

我使用 Visual web developer express，但假设设置是相同的。

1.  单击菜单栏上的工具
2.  当工具菜单下拉时单击选项
3.  出现选项窗口时单击显示所有设置
4.  单击左侧面板中的项目和解决方案
5.  单击项目和解决方案下拉菜单中的构建并运行
6.  在 rigt 手面板中，查找文本“在运行时，发生构建或部署错误时：”
7.  将其更改为“提示启动”
8.  单击 OKAY 按钮保存更改

瞧。

# android - 在父视图上触摸或调用 setPressed() 会更改 TextView 的可见性

> ID：12906301
> 
> 赞同：2
> 
> 时间：2012-10-16T01:22:09.380
> 
> 标签：android, android-layout

包含`TextView`. 粗略地说，（下面的相关代码），我有一个自定义视图（的子类`FrameLayout`），它膨胀了一些 xml 并将结果添加`View`为一个孩子。膨胀的视图包含一个`TextView`，以下称为“标签”。也可能相关（如果您不打算查看代码）是自定义视图作为子项添加到`MapView`.

发生了以下*非常奇怪*的事情：

*   什么都不做：标签不可见，父母看起来很好。有趣的是，父视图显然考虑了标签的宽度（标签可见性设置`GONE`为父视图要窄得多）。在设计模式下，标签是可见的。
*   触摸父视图：标签短暂可见，然后消失。将您的手指放在它上面会保持标签可见，直到您结束触摸。
*   从父视图的构造函数调用`this.setPressed(true)`，`this`当然是父视图：标签变为可见，并保持这种状态，直到父视图被触摸，之后行为恢复为“正常”。

这是相关的代码。作为上下文，当您触摸地图时，我们会将气球贴在地图上，其中*应*包含类似于“点击以选择此位置”的内容。气球中还有一些其他视图，但它们的可见性`GONE`最初设置为，并且填充它们并显示它们的代码被禁用。不涉及地图叠加层，只需将视图直接附加到地图上`MODE_MAP`即可将其粘贴到单个位置。

从自定义视图 BalloonView.java。此类中没有其他内容涉及布局/视图方法。

```
public BalloonView(Context context) {
    super(context);

    if(!isInEditMode()){ // RoboGuice doesn't like edit mode
        RoboGuice.getInjector(context).injectMembersWithoutViews(this);
    }

    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    // We're *not* attaching the view with it's default layout params.
    View v = inflater.inflate(R.layout.balloon_view, this, false); 
    FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
            ViewGroup.LayoutParams.MATCH_PARENT,
            ViewGroup.LayoutParams.MATCH_PARENT);
    params.gravity = Gravity.NO_GRAVITY;

    addView(v,params);

    label = (TextView) v.findViewById(R.id.label);
    addressContainer = v.findViewById(R.id.addressContainer);
    address1 = (TextView)findViewById(R.id.address1);
    address2 = (TextView) findViewById(R.id.address2);

    // makes label visible initially
    // setPressed(true);

}

    // This is the constructor that we actually call, in case it matters...  
public BalloonView(Context context, OnClickListener onClick) {
    this(context);
    setOnClickListener(onClick);
} 
```

气球视图.xml

```
 <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="6dip"
        android:layout_marginLeft="6dip"
        android:layout_marginRight="6dip"
        android:layout_marginTop="6dip" 
        android:text="@string/map_balloon_label"
        android:enabled="true"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <LinearLayout
        android:id="@+id/addressContainer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="6dip"
        android:layout_marginLeft="8dip"
        android:visibility="gone" >

        <ImageView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:contentDescription="@string/place" 
            android:src="@drawable/location_place" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/address1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"  
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:visibility="visible" />

            <TextView
                android:id="@+id/address2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:textAppearance="?android:attr/textAppearanceSmall" />
        </LinearLayout>

    </LinearLayout>

</LinearLayout> 
```

这是我们附加`BalloonView`到`MapView` 私有 MapView.LayoutParams 的地方 getBalloonViewLayoutParams(GeoPoint where){ return new MapView.LayoutParams( ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT, where, MapView.LayoutParams.BOTTOM_CENTER); }

```
private void showBalloon(QPGeoPoint where) {
    latitude = where.getLatitude();
    longitude = where.getLongitude();
    BalloonView bv = getBalloonView();
    if(bv.getParent() != mapView){
        Ln.d("bv.getParent()!=mapView");
        mapView.addView(balloonView, getBalloonViewLayoutParams(where));
    }else{
        Ln.d("parent was map view");
        balloonView.setLayoutParams(getBalloonViewLayoutParams(where));
    }
    balloonView.setVisibility(View.VISIBLE);
    balloonView.setLocation(where); 
} 
```

其他（可能）相关的事情：

*   我们正在使用 ActionBarSherlock、RoboGuice 和 roboguice-sherlock 插件。

*   应用程序主题设置为 Sherlock。`Theme.Light.DarkActionBar`，但相关活动的主题设置为`Theme.DeviceDefault.NoTitleBar`。

我完全感到困惑，数小时以来一直试图弄清楚这一点，并将继续这样做，并在我发现新线索时发布更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:39:35.457

女士们先生们，这里是：

文字和背景都是*白色*的。触摸文本将其颜色状态设置为按下，使其变为*黑色*。

快速修复是更改`textColor`文本视图上的属性。

更通用的解决方法可能是为此活动使用不同的主题，例如`Theme.DeviceDefault.Light.NoTitleBar`.

感觉这个很傻;P

# java - JavaMail API 连接到 Mercury Mail 服务器错误

> ID：12906303
> 
> 赞同：1
> 
> 时间：2012-10-16T01:22:29.340
> 
> 标签：java, smtp, jakarta-mail, mercury-mta

我正在尝试使用 java 应用程序连接到 Mercury 邮件服务器，并且我正在使用 JavaMail api。连接不成功，我在日志中收到此错误：

EHLO xxxx
554 HELO 格式无效

这意味着它连接到服务器，但 helo 格式不是服务器喜欢的东西。我已经厌倦了调试它，我在 JavaMail “SMTPTransport” 类中找到了这段代码，它说：

serverOutput.write(cmdBytes);
serverOutput.write(CRLF);
serverOutput.flush();

并根据代码： private static final byte[] CRLF = { (byte)'\r', (byte)'\n' };
这似乎与 RFC 821 一致

我知道在 Windows 上 \n 有不同的含义，但我不确定这是否真的是问题的根源？如果不是，那是什么原因造成的？我用邮件客户端检查了邮件服务器，它工作正常，我用 James 邮件服务器检查了代码，它也工作正常！

JavaMail API 版本是：1.4.5（最新版本）
Mercury/32：4.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:46:46.573

我在 Google 上进行了搜索，`554 Invalid HELO format`并获得了大量关于您的特定 Mercury 问题的点击率。这是一个错误。

[http://community.pmail.com/forums/thread/4136.aspx](http://community.pmail.com/forums/thread/4136.aspx)

[http://www.mantisbt.org/bugs/view.php?id=9645](http://www.mantisbt.org/bugs/view.php?id=9645)

[http://ellislab.com/codeigniter/forums/viewthread/153130/](http://ellislab.com/codeigniter/forums/viewthread/153130/)

ETC...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T01:52:39.733

您可能需要检查服务器上的日志以找出它真正在抱怨什么，但是......您可以尝试的一件事是将 mail.stmp.localhost 属性设置为您机器的正确 DNS 主机名。从调试输出看来，您的机器无法确定自己的名称，因此改为发送 IP 地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-11T13:58:35.427

对我来说，在一个 Web 项目中，PHPMailer() 类正在强制进行身份验证。将 Auth 更改为 false 修复了它。也许检查类似的选项以在您的语言中将 Auth 设置为 false。

这是我在 PHP 代码中从 true 更改为 false 并在 php.ini 文件中添加 sendmail_from

```
 $mail = new PHPMailer();
    $mail->SMTPAuth = false; 
```

# grails - 如何使用 H2 内存数据库保存数据？

> ID：12906306
> 
> 赞同：0
> 
> 时间：2012-10-16T01:22:57.837
> 
> 标签：grails, h2, in-memory-database

我正在做一个 grails 项目并尝试使用 H2 内存数据库来临时保存来自用户输入的数据。我添加了以下代码：`url = "jdbc:h2:memory"`在我的数据源中设置我的数据库。我创建了包含两个属性的域类。通过`dbconsole`在我的浏览器中运行，我可以浏览我创建的数据库和表（对应于类名）。我正在使用 将`ClassName.save(flush:true)`数据保存在内存数据库中，但这会引发错误，`'No property "database property name" of "class name" is found'`并且当我在控制台中检查数据库时，什么都没有保存。

我错过了什么吗？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:09:56.577

在我的项目中，配置字符串看起来不同：

```
dataSource {
    dbCreate = "create-drop" // one of 'create', 'create-drop', 'update', 'validate', ''
    url = "jdbc:h2:mem:devDb;MVCC=TRUE;LOCK_TIMEOUT=10000"
} 
```

我相信，您有错误的“内存”并且您缺少数据库名称（“;”之前的 JDBC 字符串的最后一部分）。在此字符串下，您还可以通过“dbconsole”连接到数据库。

# sql - 在 SQL 中统计结果

> ID：12906308
> 
> 赞同：0
> 
> 时间：2012-10-16T01:23:03.530
> 
> 标签：sql, sql-server

我正在尝试计算表格的结果。结果重复了产品编号。以下是输出示例：

```
1203202
1203207
1203205
1203226
1203226
1203226
1203193
1203218
1203213
1203213
1203161
1203161
1203217
1203217
1203217
1203217
1203237
1203206
1203212
1203212
1203212 
```

因此，例如，由于`1203212`显示了 3 次，我需要它显示如下：

```
Product # 1203212 Count 3 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T01:29:06.983

如果您有一个`purchases`带有 column的表`product_num`，请尝试：

```
SELECT product_num, COUNT(*) FROM purchases GROUP BY product_num 
```

这会给你这样的输出：

```
1203212 3
1203217 5
... 
```

**编辑：** 看看我的意思**[这里](http://sqlfiddle.com/#!2/6a0a3/1)**

# exception - Spring MVC 异常

> ID：12906310
> 
> 赞同：0
> 
> 时间：2012-10-16T01:23:18.107
> 
> 标签：exception, spring-mvc, error-handling

**我在Controller**类中有以下代码，出于某种原因，尽管我实现了异常处理以及**try.....catch**块，但我仍然无法捕获我的异常。

我只是在执行一个测试，在**DAO**类中，我更改了插入数据库的 sql 字符串以省略一列，这样**DAO**就会失败。**DAO**类失败并且错误被写入日志，但是即使**officerManager.RegisterOfficer(officer)**不成功，代码也会继续返回**model.addAttribute("results","Record Was Saved")。**

这不准确，我希望控制器抛出错误。下面是代码。

**控制器**

```
@RequestMapping(value="officer_registration.htm", method=RequestMethod.POST)
public ModelAndView handleRequest(@Valid @ModelAttribute Officers officer,BindingResult result,ModelMap m,Model model,HttpServletRequest request,HttpServletResponse response)throws Exception{

         try{
             if(result.hasErrors()){

                 model.addAttribute("division", myDivision);
                 model.addAttribute("position", myPosition);
                 model.addAttribute("gender", myGender);
                 return new ModelAndView("officer_registration");

            }else{

                //check the request if its an update or an insert
                String user_request = request.getParameter("user_request");
                logger.info("The Users Request Was " + user_request);

                if (user_request.equals("Save")){

                        officerManager.RegisterOfficer(officer);
                        model.addAttribute("results","Record Was Saved");

                }else{

                    officerManager.UpdateOfficer(officer);
                    model.addAttribute("results","Record Was Updated");
                }

                 model.addAttribute("division", myDivision);
                 model.addAttribute("position", myPosition);
                 model.addAttribute("gender", myGender);            
                return new ModelAndView("officer_registration");
            }   

         }catch(Exception e ){
             model.addAttribute("division", myDivision);
             model.addAttribute("position", myPosition);
             model.addAttribute("gender", myGender);
             model.addAttribute("results","Error: Unable to Save Record!");
             return new ModelAndView("officer_registration");
         }

     } 
```

**道**

```
public void saveOfficer(Officers officer) {
    logger.info("In saveOfficer");

    //SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");

    try{

        int count = getJdbcTemplate().update("INSERT INTO crimetrack.tblofficers (userName,password, fName, lName, oName, divisionNo, positionId, emailAdd, startDate, endDate, genderId,phoneNo, dob,badgeNo) "+
                                            "VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)"
                                            , new Object[]{officer.getUserName(),StringSecurity.EncryptString(officer.getPassword()),officer.getfName(),
                                             officer.getlName(),officer.getoName(),officer.getDivisionNo(),officer.getPositionId(),
                                             officer.getEmailAdd(),officer.getStartDate(),officer.getEndDate(),officer.getGenderId(),
                                             officer.getPhoneNo(),officer.getDob(),officer.getBadgeNo()});

    logger.info(count +" Rows affected in tblOfficers");

    }catch(Exception e){

        logger.error("Could not save officer ", e);
    }       
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:47:13.763

您不允许错误冒泡回到控制器。

您正在处理 DAO 中的异常，在这种情况下，方法正常退出，并且在 Controller 中没有捕获到异常。

要么不要用 try catch 包围 DAO 并让异常冒泡回控制器（推荐），要么捕获并重新抛出异常（如果你遵循这条路线，作为 RuntimeException 抛出，或者创建你自己的，或者重新抛出为RuntimeException，这样您就不必一直捕获调用堆栈。）

此外，捕获通用异常通常不受欢迎，因为除非您查看日志，否则很难准确确定导致它的原因。提前知道要处理哪些异常通常是更好的做法。

# php - Left Join Only Returns If Matching

> ID：12906319
> 
> 赞同：0
> 
> 时间：2012-10-16T01:24:21.093
> 
> 标签：php, mysql, join

I have two tables (claim_pics & claiminfo) I am doing a query for a results page.

Its works well.. when there there is a match of the two tables claim_id ( claiminfo.claim_id = claim_pics.claim_id ).

However when there there is only one table with a claim_id, namely in claiminfo, and not a matching claim_id, all of the attributes of the row show up except the claim_id.

There is no claim_id, so if a user clicks an edit button, there is no claim_id to tell it where to go.

I need it present the $results of the claim_id regardless is there is a match or not. Any ideas or work arounds?

Thanks.

```
$query   = "SELECT * FROM claiminfo 
                          LEFT JOIN ( claim_pics ) 
                          ON ( claiminfo.claim_id = claim_pics.claim_id )  
            WHERE( userid='$userid' )   
            ORDER BY claiminfo.ts
            DESC LIMIT 200"; 
```

// Will only return

claim_ids that both pics and info match

```
 $result = mysql_query( $query );

                  while( $row = mysql_fetch_assoc( $result ) ) { 

                                    $namelocation =      $row['namelocation'];
                                    $claimholder =   $row['claimholder'];
                                    $occasion =      $row['occasion'];
                                    $geotag =    $row['geotag'];
                                    $lat =   $row['lat'] ;
                                    $lng =   $row['lng'];
                                    $claim_id = $row['claim_id']; 
                                    $img = $row['location'];

                                     $html = " ... " 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T02:56:00.083

As comments have noted, it is likely that a null `claim_id` from the empty `claim_pics` row is blanking the `$row['claim_id']`. The easiest way to get around this is to explicitly select and alias the `claiminfo.claim_id`:

```
$query   = "SELECT *, claiminfo.claim_id AS id FROM claiminfo 
                          LEFT JOIN ( claim_pics ) 
                          ON ( claiminfo.claim_id = claim_pics.claim_id )  
            WHERE( userid='$userid' )   
            ORDER BY claiminfo.ts
            DESC LIMIT 200"; 
```

You can then reliably get the claim_id with the variable `$row['id']`.

In a more general note, this situation demonstrates why it is generally better [not to use SELECT *](https://stackoverflow.com/a/322216/628267).

# android - 带有库项目的android dalvik错误1

> ID：12906321
> 
> 赞同：3
> 
> 时间：2012-10-16T01:24:55.653
> 
> 标签：android, dalvik, library-project

> **可能重复：**
> [外部 JAR 上的“转换为 Dalvik 格式失败，错误 1”](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar)

很长很长时间在网站上的搜索者，好几年了。最后我很困惑，需要这个论坛的帮助。

我有一个与 GPS 相关的应用程序，我现在正尝试将其拆分为多个免费/付费版本，也用于品牌重塑。每次将项目拆分为库和主库的尝试都因 Dalvik 错误 1 ​​而失败。我希望库中有 95% 的代码，这将允许我轻松创建更名版本和付费/免费版本。

我查看了井字游戏示例并阅读了许多关于如何创建库项目的博客和文章。到目前为止大约 20 个小时的搜索和尝试。

这是我的设置

*   带有 Eclipse Helios Service Release 2 的 XP Pro SP3（内部版本号：20110218-0911，如果重要的话）
*   Android SDK 工具 20.0.3 版，平台工具 14 版
*   （也尝试过使用 Helios 的 Windows 7，同样的问题）
*   为 api 7 开发（家庭仍然有较旧的 Android :( ）
*   使用 com.google.android.maps
*   proguard 被禁用
*   library 仅通过 Android 项目属性指定，并使用相同的项目属性接口添加到主项目。

如果重要的话，我的项目同时使用 asynctask 子类和 httpclient。

在我的实际设备上调试构建（HTC Desire Z，android 2.3.3）构建良好。实际的 apk 构建失败并出现 dalvik 错误 1。模拟器构建也可以正常工作。

我已经阅读了 14/15 版工具的所有 Dalvik 资料，但自从我 20 岁以来，我希望它现在已经修复了！！

我尝试了许多不同的方法，但每一种都因 Dalvik 错误而失败，包括

*   在 Eclipse 中创建新的库和主项目，将类和资源一一复制到新的库项目中（并删除我很确定是不必要的导入）。将清单引用更改为类和活动的库。

*   将原始项目称为库并在新的主项目中引用它，并在库项目中更新清单

*   保留原始项目，但将单个“strings.xml”文件移动到值文件夹中（认为这个应该可以工作，特别是因为清单中应该没有任何变化？？）

当我的设备上的调试构建工作时，apk 构建总是失败。

我还可以提供哪些其他信息来帮助解决问题？在阅读错误日志时，我完全是个新手……我的眼睛蒙上了一层阴影。

提前感谢这可能是一个非常新手的错误......！

# java - 画布在特定设备上不可见（One X）

> ID：12906322
> 
> 赞同：0
> 
> 时间：2012-10-16T01:25:04.070
> 
> 标签：java, android

我想我正面临一个小问题。我的问题是我正在绘制一个基于 [http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/](http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/)的速度计。并且针在我拥有的所有设备上都可见，但在 HTC One X 上不可见。在检查时，我发现画布密度 (canvas.getDensity()) 返回为 0。这可能是它不可见的原因吗？还在具有相同操作系统（4.0.4）的 S3 上进行了测试。在那里工作正常。

```
 handPath = new Path();
    handPath.moveTo(0.5f, 0.5f + 0.0f);
    handPath.lineTo(0.5f - 0.010f, 0.5f + 0.0f - 0.00f);
    handPath.lineTo(0.5f - 0.002f, 0.5f - 0.22f);
    handPath.lineTo(0.5f + 0.002f, 0.5f - 0.22f);
    handPath.lineTo(0.5f + 0.010f, 0.5f + 0.0f - 0.00f);
    handPath.lineTo(0.5f, 0.5f + 0.0f);
    handPath.addCircle(0.5f, 0.5f, 0.05f, Path.Direction.CW);

    private void drawHand(Canvas canvas) {
    // if (handInitialized) {
    float handAngle = degreeToAngle(handPosition);
    // float handAngle = 0;
    canvas.save(Canvas.MATRIX_SAVE_FLAG);
    canvas.rotate(handAngle, 0.5f, 0.5f);
    canvas.drawPath(handPath, handPaint);
    canvas.restore();
    float scale = getScaled(canvas,canvas.getWidth());
    canvas.scale(scale, scale);
    canvas.drawCircle(0.5f, 0.5f, 0.01f, handScrewPaint);
    // }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-12T15:01:18.850

我不知道这个人是否得到了解决方案。但是，以下答案适用于仍在为此寻找解决方案的人。请在 init 函数中添加以下行

`@TargetApi(11) private void init() { if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) { setLayerType(View.LAYER_TYPE_SOFTWARE, null); } ........ ........ ........ }`

我希望这能解决针显示问题

# javascript - 如何为字符串数组实现 .indexof？

> ID：12906324
> 
> 赞同：3
> 
> 时间：2012-10-16T01:25:36.777
> 
> 标签：javascript, jquery, arrays, string-matching

如何简化以下代码？如何摆脱 if 语句？我想突出显示 ajax 响应中的一些行。现在我有两个要比较的字符串=两个ifs。这个数字会增加，所以我正在考虑以其他方式执行此操作 - 使用需要突出显示的字符串数组，以防字符串是 data_array 元素的一部分。

我更喜欢仅使用 javascript 的解决方案，但 jQuery 也可以。

```
 data_array=data.split('<BR>');
    for(var i=0, len=data_array.length; i < len; i++){
        if (data_array[i].indexOf('Conflict discovered') >= 0){
            data_array[i]="<span class='red'>"+data_array[i]+"</span>";
        }   
        if (data_array[i].indexOf('Syntax error') >= 0){
            data_array[i]="<span class='red'>"+data_array[i]+"</span>";
        }   
    }
    data=data_array.join('<BR>'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T01:35:21.860

为什么不添加另一个`for`循环？

```
data_array=data.split('<BR>');

var stringsToFind = ['Conflict discovered', 'Syntax error'];

for (var i = 0; i < data_array.length; i++) {

    for (var j = 0; j < stringsToFind.length; j++) {

        var currItem = data_array[i];

        if (currItem.indexOf(stringsToFind[j]) >= 0) {

            data_array[i]='<span class="red">' + currItem + '</span>';
        }
    }  
}

data = data_array.join('<BR>'); 
```

**jQuery**（注意，可能更慢，我还没有测试过）

```
data_array=data.split('<BR>');

var stringsToFind = ['Conflict discovered', 'Syntax error'];

$.each(data_array, function(i, item) {
    $.each(stringsToFind, function(j, s) {
        if (item.indexOf(s) >= 0) {
            data_array[i]='<span class="red">' + item + '</span>';
        }
    }
});

data = data_array.join('<BR>'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T01:53:05.753

根据需要向数组添加更多元素:)

```
data.replace( /<br>/ig, '\n' ).replace(
    new RegExp( '^(.*(?:' + [
          'Conflict discovered'
        , 'Syntax error'
    ].join( '|' ) + ').*)$', 'gm' )
, '<span class="red">$1</span>' ).replace( /\n/g, '<br>' ); 
```

解释：

*   `<br>`用换行符替换标签
*   做一个正则表达式：`^(.*(?:Conflict discovered|Syntax error).*)$`
*   环绕匹配`<span class="red">`...`</span>`
*   将换行符转回`<br>`标签

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T01:45:56.700

```
var data_array = data.split('<BR>');
var errMsgs = ['Conflict discovered', 'Syntax error'];
data_array = data_array.map(function(data_rec) {
    var isAnError = errMsgs.some(function (errMsg) {
        return data_rec.indexOf(errMsg) >= 0;
    });
    if (isAnError) {
        return "<span class='red'>" + data_rec + '</span>';
    } else {
        return data_rec;
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T01:48:12.673

## *[jsBin 演示](http://jsbin.com/emujap/1/edit)*

```
var highlightWords = ['Conflict discovered', 'Syntax error', 'Simply cool'];

for(i=0; i<highlightWords.length; i++){
  var regex = new RegExp(highlightWords[i],'ig');
  data= data.replace( regex, '<span class="red">'+ highlightWords[i] +'</span>');
}

$('div').html( data ); 
```

* * *

## *[jsBin demo 2全行高亮](http://jsbin.com/emujap/2/edit)*

```
var words = ['Conflict discovered', 'Syntax error', 'Strange'];
var data_array=data.split('<BR>');

for(n=0;n<words.length;n++){
  for(i=0; i<data_array.length; i++){
      if (data_array[i].indexOf( words[n] ) >= 0){
           data_array[i]="<span class='red'>"+data_array[i]+"</span>";
      }   
  }
  data = data_array.join('<BR>');
}

$('div').html( data ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T01:30:37.667

```
data_array=data.split('<BR>');
for(var i=0, len=data_array.length; i < len; i++){
    var dai = data_array[i];
    if (dai.indexOf('Conflict discovered') >= 0 || dai.indexOf('Syntax error') >= 0){
        data_array[i] = "<span class='red'>"+dai+"</span>";
    }   
}
data=data_array.join('<BR>'); 
```

# python - 使用 cPickle 保存长字符串 - 保存的变量被截断

> ID：12906330
> 
> 赞同：0
> 
> 时间：2012-10-16T01:27:39.850
> 
> 标签：python, pickle, truncated

我将一串长度为 4807100171 的 0 和 1 转储到一个`pickle`文件中，因为我以前遇到过麻烦，`bitarray`想看看 pickle 是否可以解决我的问题。但是，在我加载它之后，它现在的长度为 512132875。

这是为什么？

我已经搜索过pickle是否有任何限制，但我没有找到任何东西......如果有众所周知的原因，我可能没有使用正确的关键词......

编辑：

您可以填充一串`b`随机值，以便使用您喜欢的技术获得 4807100171 的长度 - 可能类似于一个简单的 for 循环到 4807100171。我个人使用霍夫曼编码加密原始数据，但我觉得这将是一个很长的例子这里不是真的需要。然后我将字符串转储`b`如下：

```
b = ""
for i in range(4807100171)
    b += 0

import cPickle as pickle
pickle.dump(b, open("string.p", "wb"), pickle.HIGHEST_PROTOCOL) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T02:48:01.737

这显然是一个整数溢出问题 - 请注意 4807100171 减去 2**32 是 512132875。不幸的是，32 位整数是二进制泡菜格式表示字符串长度的方式。使用文本pickle格式（协议版本0）似乎可以避免这个问题，但是文本pickle通常更长，并且会占用大量内存来处理这种大小的字符串。我还没有实际测试过这个 - 我认为我的任何计算机上都没有足够的内存来这样做！

如果这个字符串是唯一被存储的东西，那么将字符串本身写入文件会简单得多。

# java - Android - 将通知设置为永不消失

> ID：12906332
> 
> 赞同：2
> 
> 时间：2012-10-16T01:28:04.473
> 
> 标签：java, android, android-notifications

我有这段代码很好用：

```
Notification n = builder.build();
n.flags = Notification.FLAG_NO_CLEAR; 
```

但是当我重新启动手机时，通知消失了。有没有任何标志可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:29:18.963

不，我认为这是不可能的。

您可以拥有在启动时运行的**[服务](http://developer.android.com/reference/android/app/Service.html)**以再次显示该通知。否则通知不会在重新启动后持续存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T05:45:33.340

如果您想在设备启动时打印通知，您可以创建一个接收器，在系统启动完成时调用它，为此，首先创建一个接收器，

```
public class MyReciever extends BroadcastReceiver{

    @Override
    public void onReceive(Context context, Intent intent) 
{
        Log.d("BOOT COMPLETE","SERVICE CALLED>>>>>>>>>>>>");
        //use your code here to print notifications

    }
} 
```

当系统启动完成时调用此接收器。您还可以从接收者的 onReceive 方法调用服务来打印通知。

您还必须在清单文件中定义以下规则，

首先定义获取 BOOT_COMPLETION 意图的权限，

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/> 
```

然后定义你的接收器，

```
 <receiver android:name=".MyReciever" 
             android:enabled="true" 
             android:exported="false">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED"/>
            </intent-filter>
        </receiver> 
```

# tooltip - Tipsy 正在将我的图像改回文本

> ID：12906333
> 
> 赞同：1
> 
> 时间：2012-10-16T01:28:10.567
> 
> 标签：tooltip, tipsy

我在 WordPress 中使用 Tipsy。我已经设置了所有图像，但是当我尝试使用该插件时，它会将图像更改回文本。为什么？

```
<img title="top-left" src="IMAGE.PNG" alt="" width="170" height="120" /> 
```

# ios - 实施 iRate 时的问题

> ID：12906334
> 
> 赞同：1
> 
> 时间：2012-10-16T01:28:16.423
> 
> 标签：ios, xcode

将 iRate 添加到我的应用程序时，我收到此错误：

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_iRate", referenced from:
      objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:47:32.893

听起来当您将 .m 文件添加到项目时，它没有分配给您的目标。在项目导航器中选择 iRate.m。然后打开 Xcode 右侧的实用程序视图。在 Target Membership 下，确保选中您应用的目标。再次尝试构建。

# c++ - c++ 在比较字符串时忽略前面的空格，例如："str1"compare.("str2") = TRUE

> ID：12906344
> 
> 赞同：2
> 
> 时间：2012-10-16T01:29:21.463
> 
> 标签：c++, string, char, compare

嗨，我想知道使字符串 str1 看起来等于字符串 str2 的最短方法是什么

```
str1 = "Front Space";
str2 = " Front Space";

/*Here is where I'm missing some code to make the strings equal*/

if (str1.compare(str2) == 0) { // They match 
    cout << "success!!!!" << endl; // This is the output I want
} 
```

我需要它来让 str1 等于 str2 我该怎么做？

我进行了多次尝试，但它们似乎都无法正常工作。我认为这是因为字符串中的字符数，即：str1 的字符少于 str2。

```
for (int i = 1; i <= str1.length() + 1; i++){
    str1[str1.length() - i ] = str1[str1.length() - (i + 1)];
} 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T01:33:29.387

如果您可以使用 Boost，则在*boost/algorithm/string.hpp中提供了修剪函数*

```
str1 = "Front Space";
str2 = " Front Space";
boost::trim_left( str2 ); // removes leading whitespace

if( str1 == str2 ) {
  // ...
} 
```

同样，`trim`它删除了前导和尾随空格。并且所有这些函数都有`*_copy`对应的返回修剪后的字符串而不是修改原始字符串。

* * *

如果你不能使用 Boost，创建自己的`trim_left`函数并不难。

```
#include <iostream>
#include <string>
#include <algorithm>
#include <cctype>

void trim_left( std::string& s )
{
  auto it = s.begin(), ite = s.end();

  while( ( it != ite ) && std::isspace( *it ) ) {
    ++it;
  }
  s.erase( s.begin(), it );
}

int main()
{
  std::string s1( "Hello, World" ), s2( " \n\tHello,   World" );

  trim_left( s1 ); trim_left( s2 );

  std::cout << s1 << std::endl;
  std::cout << s2 << std::endl;
} 
```

输出：

```
Hello, World
Hello,   World 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T01:43:24.033

LLVM 还为其[StringRef](http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html#a44b1141e695b117bb36a77961883893d)类提供了一些修剪成员函数。如果这对您很重要，这无需修改您的字符串且无需制作副本即可工作。

```
llvm::StringRef ref1(str1), ref2(str2);
ref1.ltrim();
ref2.ltrim();
if (ref1 == ref2) {
    // match
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T01:37:42.213

正如其他人所说，您可以使用`boost`. 如果你不想使用`boost`，或者你不能（可能是因为它是家庭作业），那么制作一个 ltrim 函数很容易。

```
string ltrim(string str)
{
    string new_str;
    size_t index = 0;

    while (index < str.size())
    {
        if (isspace(str[index]))
            index++;
        else
            break;
    }

    if (index < str.size())
        new_str = str.substr(index);

    return new_str;
} 
```

# functional-programming - ML 函数柯里化

> ID：12906348
> 
> 赞同：3
> 
> 时间：2012-10-16T01:29:53.610
> 
> 标签：functional-programming, sml, currying, smlnj, ml

有人可以向我解释一下咖喱的概念。我主要是在学习它，因为我们正在我的“现代编程语言”课程中学习 ML，以进行功能性语言介绍。

特别是你可以使用这个例子：

```
 -fun g a = fn b => a+b;
      val g = fn: int -> int -> int
    -g 2 3;
      val it = 5 : int 
```

我很困惑这些参数是如何传递的，或者一开始是如何考虑的。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T07:03:36.800

在这种情况下，您使柯里化显式化，因此应该更容易理解。

如果我们阅读函数定义，它会说（释义）：“创建一个函数`g`，当给定一个`a`返回时`fn b => a+b`。”

也就是说，如果我们调用`g 2`，我们会取回函数`fn b => 2+b`。因此，当我们调用 时`g 2 3`，我们实际上调用了`(g 2) 3`; 也就是说，我们首先取回上述函数，然后在 value 上使用这个函数`3`，yield `5`。

柯里化只是在几个“阶段”中创建一个函数的概念，每个阶段接受一个输入并产生一个新函数。SML 对此有语法糖，`g`相当于以下内容：

```
fun g a b = a + b; 
```

# python - ImportError：没有名为 psycopg2 的模块

> ID：12906351
> 
> 赞同：112
> 
> 时间：2012-10-16T01:30:55.470
> 
> 标签：python, centos, odoo, centos5

在 OpenERP 6 的安装过程中，我想用这些命令生成一个配置文件：

```
cd /home/openerp/openerp-server/bin/ 
```

```
./openerp-server.py -s --stop-after-init -c /home/openerp/openerp-server.cfg 
```

但它总是显示信息：`ImportError: No module named psycopg2`

当我检查 psycopg2 包时，它已经安装了。软件包`python-psycopg2-2.4.5-1.rhel5.x86_64`已安装到其最新版本。没事做。这有什么问题？我的服务器是 CentOS，我已经安装了 Python 2.6.7。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2014-04-16T09:04:21.207

第一步：安装依赖

```
sudo apt-get install build-dep python-psycopg2 
```

第 2 步：在您的 virtualenv 中运行此命令

```
pip install psycopg2-binary 
```

参考：[费尔南多·穆尼奥斯](https://stackoverflow.com/users/1975004/fernando-munoz)

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2019-02-26T11:54:14.417

使用[psycopg2-binary](https://pypi.org/project/psycopg2-binary/)代替[psycopg2](https://pypi.org/project/psycopg2/)。

```
pip install psycopg2-binary 
```

或者您将收到以下警告：

> 用户警告：psycopg2 轮子包将从 2.8 版重命名；为了继续从二进制安装，请改用“pip install psycopg2-binary”。有关详细信息，请参阅：http: [//initd.org/psycopg/docs/install.html#binary-install-from-pypi](http://initd.org/psycopg/docs/install.html#binary-install-from-pypi)。

参考：[Psycopg 2.7.4 发布 | 心理咨询师](http://initd.org/psycopg/articles/2018/02/08/psycopg-274-released/)

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2019-04-17T16:33:32.553

我遇到了同样的问题并使用以下命令解决了它：

```
sudo apt-get install libpq-dev
pip install psycopg2 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2019-09-30T14:39:49.277

尝试安装

> psycopg2-二进制

和 `pip install psycopg2-binary --user`

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2012-10-17T06:09:54.300

请尝试`import psycopg2`在 python 控制台上运行该命令。如果您收到错误，请检查`sys.path`python 查找安装模块的位置。的父目录`python-psycopg2-2.4.5-1.rhel5.x86_64`是否存在`sys.path`。如果它不在，`sys.path`则`export PYTHONPATH=<parent directory of python-psycopg2-2.4.5-1.rhel5.x86_64>`在运行 openerp 服务器之前运行。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-10-20T13:05:10.157

试试这些：

```
virtualenv -p /usr/bin/python3 test_env
source test_env/bin/activate
pip install psycopg2 
```

如果您坚持在您的系统上安装它，请运行 python 并尝试导入 python 尝试：

```
pip3 install psycopg2 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2020-11-05T06:25:10.973

```
sudo pip install psycopg2-binary 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2021-05-30T02:05:54.227

**Mac OS 上的导入错误**

如果`psycopg2`正在安装但您无法将其导入`.py`文件中，那么问题在于`libpq`，它的链接和依赖于的`openssl`库`libpq`。整个步骤如下所示。您可以逐步检查它以了解哪个是您的错误来源，然后您可以从那里进行故障排除。

*   检查安装`openssl`并确保其正常工作。

*   **检查`libpq`系统中的安装，它可能尚未安装或未链接。如果未安装，则使用命令安装它`brew install libpq`。这将安装 libpq 库。** [根据文档](https://www.postgresql.org/docs/12/libpq.html)

> libpq 是 C 应用程序程序员到 PostgreSQL 的接口。libpq 是一组库函数，允许客户端程序将查询传递给 PostgreSQL 后端服务器并接收这些查询的结果。

*   使用 链接 libpq `brew link libpq`，如果这不起作用，则使用命令：`brew link libpq --force`。
*   还将以下内容放入您的`.zshrc`文件中
    **`export PATH="/usr/local/opt/libpq/bin:$PATH"`**。`libpq`这为library创建了所有必要的链接。
*   现在重新启动终端或使用以下命令`source ~/.zshrc`。

*   现在使用命令`pip install psycopg2`。它会起作用的。即使您在 conda 环境中工作，这也有效。

    **NB`pip install psycopg2-binary`应该避免，因为[根据 psycopg2 库的开发人员](https://github.com/psycopg/psycopg2/issues/1283)**

> 不鼓励在生产中使用 -binary 包，因为过去它们在多线程环境中被证明是不可靠的。这可能已在较新的版本中得到修复，但我从未设法重现该故障。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-12-05T00:09:09.087

您需要安装`psycopg2`模块。

在 CentOS 上：确保已安装 Python 2.7+。如果没有，请按照以下说明操作： http: [//toomuchdata.com/2014/02/16/how-to-install-python-on-centos/](http://toomuchdata.com/2014/02/16/how-to-install-python-on-centos/)

```
# Python 2.7.6:
$ wget http://python.org/ftp/python/2.7.6/Python-2.7.6.tar.xz
$ tar xf Python-2.7.6.tar.xz
$ cd Python-2.7.6
$ ./configure --prefix=/usr/local --enable-unicode=ucs4 --enable-shared LDFLAGS="-Wl,-rpath /usr/local/lib"
$ make && make altinstall
$ yum install postgresql-libs

# First get the setup script for Setuptools:
$ wget https://bitbucket.org/pypa/setuptools/raw/bootstrap/ez_setup.py

# Then install it for Python 2.7 and/or Python 3.3:
$ python2.7 ez_setup.py

$ easy_install-2.7 psycopg2 
```

即使这是一个 CentOS 问题，以下是 Ubuntu 的说明：

```
$ sudo apt-get install python3-pip python-distribute python-dev
$ easy_install psycopg2 
```

引用：http: [//initd.org/psycopg/install/](http://initd.org/psycopg/install/)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-11-25T15:40:47.110

最近在我的生产服务器上遇到了这个问题。我已经安装了 pyscopg2 使用

```
sudo pip install psycopg2 
```

它在我的本地运行良好，但让我在我的 ec2 服务器上运行。

```
sudo python -m pip install psycopg2 
```

上面的命令在那里为我工作。在这里张贴以防万一将来对某人有所帮助。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-11-30T19:28:21.150

对于 ubuntu 上的 python3，这对我有用：

```
$sudo apt-get update
$sudo apt-get install libpq-dev
$sudo pip3 install psycopg2-binary 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-05-04T03:23:42.923

我有同样的问题，但仅此片段就解决了我的问题。

```
pip install psycopg2 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-11-04T02:08:28.747

对于 Python3

第 1 步：安装依赖项

```
sudo apt-get install python3 python-dev python3-dev 
```

第 2 步：安装

```
pip install psycopg2 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-01-12T09:38:18.823

我做了两件事来解决这个问题：

1.  使用 Python 3.6 而不是 3.8。
2.  将 Django 版本更改为 2.2（可能正在使用更高版本，但我更改为 2.2）

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-08-21T06:53:35.523

正确检查您是否打开了您的peoject的虚拟环境，如果它关闭，则将其打开。执行以下命令：

```
workon <your_env_name>
python manage.py runserver 
```

它对我有用

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-10-28T01:51:55.367

当我从 Windows 10 切换到 ubuntu 时遇到同样的问题 .. 以下对我有用.. 在谷歌搜索并尝试了 2 小时的众多建议之后...

```
sudo apt-get install libpq-dev, then pip3 install psycopg2 
```

我希望这对遇到同样问题的人有所帮助，尤其是在将 Windows 操作系统切换到 linux（ubuntu）时。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-07-20T17:39:51.720

使用以下解决方案解决了该问题：

1.  基本上是由于 _bz2.cpython-36m-x86_64-linux-gnu.so Linux 包文件引起的问题。尝试找到位置。

2.  检查安装 python 位置（哪个 python3）- 示例：/usr/local/bin/python3

3.  复制INSTALL_LOCATION/lib/python3.6下的文件

```
cp -rvp /usr/lib64/python3.6/lib-dynload/_bz2.cpython-36m-x86_64-linux-gnu.so /usr/local/lib/python3.6 
```

# javascript - 如何在objective-C中查看登录是否成功？

> ID：12906354
> 
> 赞同：3
> 
> 时间：2012-10-16T01:31:10.427
> 
> 标签：javascript, objective-c

我要做的是从 Xcode 登录到一个网站。我正在使用 JavaScript 和 DOM 与网站进行通信。这是我的问题。我可以在网站上输入用户名和密码，然后提交该表格，它会让我登录，但我不知道该怎么做是查看密码是否有效。

如果密码无效，网站上会显示“无法登录”。

这就是我到目前为止所拥有的

```
-(IBAction)Login:(id)sender {

   stud_pass = Username.text;
   password1 = Password.text;

   //Puts the 2 NSStrings into the websites text fields
   [webView stringByEvaluatingJavaScriptFromString: [NSString stringWithFormat:@"document.getElementById('stud_pass').value = ('%@');", stud_pass]];
   [webView stringByEvaluatingJavaScriptFromString: [NSString stringWithFormat:@"document.getElementById('password1').value = ('%@');", password1]];

   //Sends the form
   [webView stringByEvaluatingJavaScriptFromString:@"document.forms[0].submit();"];

   //See if login was sucsessfull
   if (

   } else {

   }
} 
```

这就是我卡住的地方，我不知道如何让 webview 告诉 xcode 登录不成功，然后基于该让 xcode 有一定的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:40:22.723

您假设您可以在`//See if login was sucsessfull`代码的“”部分执行的操作的基本问题是，此函数将在很久之前（机器时间）返回，您`UIWebView`将加载说明您是否已成功登录的页面。这应该是这样，因为您的`IBAction`方法与 UI 相关联，并且使用网络请求锁定该方法将是不好的。

您需要做的是通过在的委托方法`stringByEvaluatingJavaScriptFromString:`之一中使用调用来确定您是否成功登录，可能是. 该功能的实现将根据您尝试登录的网站的结构而有很大差异。但可能看起来像这样：`UIWebView``webViewDidFinishLoad:`

```
-(void)webViewDidFinishLoad:(UIWebView *)webView{
    if ([webView.request.URL.absoluteString isEqualToString:@"LoginResponceURLHere"]){
        NSString *successString = [webView stringByEvaluatingJavaScriptFromString:@"SomeJavaScriptTestOfSuccess"];
        // Check successString for known responces to test.
    }
} 
```

# asp.net - 使用 WebAPI 时重新验证模型（等效于 TryValidateModel）

> ID：12906359
> 
> 赞同：7
> 
> 时间：2012-10-16T01:32:02.393
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

使用 vanilla MVC，我可以使用 TryValidateModel 重新验证我的模型。TryValidateModel 方法似乎不适用于 WebAPI。使用 WebAPI 时如何重新验证我的模型？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-30T08:45:36.830

我知道这个问题已经有一段时间了，但问题仍然有效。因此，我认为我应该分享我对这个问题的解决方案。我决定自己实现 TryValidateModel(object model)，基于 System.Web.Mvc.Controller.cs 中的实现

问题是 mvc 的 TryValidateModel 内部使用了自己的 HttpContext 和 ModelState。如果你去比较这两者，它们非常相似......

能够使用我们自己的 HttpContext 存在一个 HttpContextWrapper 可以用于此。
而且由于我们必须清除我们的模型状态，所以我们使用不同类型的 ModelState 并不重要，只要我们得到想要的结果，因此我从正确的类型创建一个新的 ModelState 对象......
我做到了将错误添加到控制器的 ModelState 而不是模型状态到新创建的 ModelState ，这对我来说似乎工作得很好:)
这是我的代码，我刚刚添加到控制器中......
不要忘记导入库...

```
using System.Web.ModelBinding;

    protected internal bool TryValidateModel(object model)
    {
        return TryValidateModel(model, null /* prefix */);
    }

    protected internal bool TryValidateModel(object model, string prefix)
    {
        if (model == null)
        {
            throw new ArgumentNullException("model");
        }

        ModelMetadata metadata = ModelMetadataProviders.Current.GetMetadataForType(() => model, model.GetType());
        var t = new ModelBindingExecutionContext(new HttpContextWrapper(HttpContext.Current), new System.Web.ModelBinding.ModelStateDictionary());

        foreach (ModelValidationResult validationResult in ModelValidator.GetModelValidator(metadata, t).Validate(null))
        {
            ModelState.AddModelError(validationResult.MemberName, validationResult.Message);
        }

        return ModelState.IsValid;
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-11T21:36:17.063

我不知道它是什么时候添加的，但现在 api 控制器上有 Validate 方法。

ApiController.Validate 方法（TEntity） [https://msdn.microsoft.com/en-us/library/dn573258%28v=vs.118%29.aspx](https://msdn.microsoft.com/en-us/library/dn573258%28v=vs.118%29.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-05T04:13:50.583

基于[rik-vanmechelen 的](https://stackoverflow.com/users/782031/rik-vanmechelen)原始答案，这是我的版本，它依赖于 Web API 公开的服务容器。

```
 /// <summary>
    /// Tries to validate the model.
    /// </summary>
    /// <param name="model">The model.</param>
    /// <returns>Whether the model is valid or not.</returns>
    protected internal bool TryValidateModel(object model)
    {
        if (model == null)
        {
            throw new ArgumentNullException("model");
        }

        var metadataProvider = Configuration.Services.GetService<System.Web.Http.Metadata.ModelMetadataProvider>();
        var validatorProviders = Configuration.Services.GetServices<System.Web.Http.Validation.ModelValidatorProvider>();
        var metadata = metadataProvider.GetMetadataForType(() => model, model.GetType());

        ModelState.Clear();
        var modelValidators = metadata.GetValidators(validatorProviders);
        foreach (var validationResult in modelValidators.SelectMany(v => v.Validate(metadata, null)))
        {
            ModelState.AddModelError(validationResult.MemberName, validationResult.Message);
        }

        return ModelState.IsValid;
    } 
```

这使用以下简单的扩展方法来访问服务：

```
 /// <summary>
  /// Services container extension methods.
  /// </summary>
  public static class ServicesContainerExtensions
  {
    /// <summary>
    /// Gets the service.
    /// </summary>
    /// <typeparam name="TService">The type of the service.</typeparam>
    /// <param name="services">The services.</param>
    /// <returns>The service.</returns>
    /// <exception cref="System.ArgumentNullException">services</exception>
    public static TService GetService<TService>(this ServicesContainer services)
    {
        if (services == null)
        {
            throw new ArgumentNullException("services");
        }
        return (TService)((object)services.GetService(typeof(TService)));
    }

    /// <summary>
    /// Gets the services.
    /// </summary>
    /// <typeparam name="TService">The type of the service.</typeparam>
    /// <param name="services">The services.</param>
    /// <returns>The services.</returns>
    /// <exception cref="System.ArgumentNullException">services</exception>
    public static IEnumerable<TService> GetServices<TService>(this ServicesContainer services)
    {
        if (services == null)
        {
            throw new ArgumentNullException("services");
        }
        return services.GetServices(typeof(TService)).Cast<TService>();
    }
} 
```

使用此方法的优点是它重用了您为 Web API 应用程序配置的 MetadataProvider 和 ValidatorProvider(s)，而上一个答案是检索在 ASP.NET MVC 中配置的那个。ASP.NET MVC 和 WebAPI 通过不同的管道运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T08:43:48.737

原来 WebAPI 不支持 TryValidateModel。CodePlex 上有一个功能请求。

# python-idle - python 3.2 打印表格

> ID：12906360
> 
> 赞同：-1
> 
> 时间：2012-10-16T01:32:04.580
> 
> 标签：python-idle, python-3.2

我正在学习 Python 并尝试编写程序，但我不知道应该如何编写它。

鉴于问题：

> "使用函数 "computeTax(status, taxableIncome):" 编写一个程序，打印一个从 $50000 到 $60000 的应税收入的税表，所有四种状态的间隔为 $50，如下所示：

```
taxable income/   single/    married joint/   married seperate/   head of house/   
50000/             8688/       6665/              8688/               7352/  
50050/             8700/       6673/              8700/               7365/              
...                                                                  
59950/            11175/       8158/             11175/               9840/  
60000/            11188/       8165/             11188/               9852/ 
```

我根本不明白这是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:54:44.593

Step 1: The tax computation

```
def computeTax(status,taxableIncome):
    """
    status is a string such as 'married joint', taxableIncome is the amount of income
    This function returns the portion of the income that should be paid as tax. This amount is different  depending on the status.
    """
    status_multupliers = {blah} #a dictionary of status to multiplier mappings...
    return taxableIncome * status_multipliers[status] 
```

Step2: initialise your file:

open a file for writing ('w'). write the heading line

Step3: fun with loops

```
for i in range(however_many_lines_you_want_in_your_table):
    income = 50*i #since we are going up in 50s
    current_line = ''     # this is what you want to write to your file
    for status in statuses: #statuses is a list of the available statuses. make this
        tax = computeTax(status,income)
        current_line += tax + '\'
    current_line += '\n'
    file.write(current_line)   #add the line 
```

I've assumed that formatting doesn't matter too much.

For now on when asking questions on Stack Overflow please show a little bit of effort yourself. Otherwise you will be unlikely to get any help

# hardware - Raspberry Pi - 如何通过 SD 接口以编程方式加载 RAM？

> ID：12906361
> 
> 赞同：0
> 
> 时间：2012-10-16T01:32:09.417
> 
> 标签：hardware, hardware-interface, raspberry-pi

我想有某种机制以某种方式从控制器计算机以编程方式加载 Raspberry Pi 上的 RAM（我假设是通过 SD 接口），然后让 Raspberry Pi 的 CPU 执行。是否有某种设备可以做到这一点？它是用什么编程的？

如果需要的话，如果有办法从控制计算机中断整个事情，那也很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:38:52.207

对于尝试从外部源推送数据的接口，SD 是一个相当糟糕的选择；通常，托管 SD 设备的计算机希望成为操作的主人。

但是 Raspberry pi 既有 uart 串行端口，也有（在 B 型上）一个以太网接口。通过其中一个下载代码是很正常的。

您没有提到是否要在典型的 linux 安装上运行应用程序，或者是否要进行裸机编程。在第一种情况下，您通常会将程序传输到文件系统（ramdisk 或 SD 卡）然后执行它。

在第二种情况下，您需要设备上已经存在的代码存根（即 sdcard 的引导分区），它知道如何充分配置外围设备以通过串行或以太网接收代码（后者复杂需要一个 USB 主机堆栈），然后跳转到它。

# sql - GetDate 查询中的时区为 12 小时

> ID：12906362
> 
> 赞同：0
> 
> 时间：2012-10-16T01:32:45.093
> 
> 标签：sql, razor, timezone, webmatrix

我正在使用 MS webmatrix 和剃须刀。

我有一个使用表达式`CAST(GetDate() as INT)`获取当前日期整数值的查询。但是，即使我的服务器和 PC 都设置在 GMT + 12（惠灵顿，奥克兰），返回的值是 12 小时后 - 在我的 PC（和服务器）上的下午 12 点，它会提前一天。

如何减少 12 小时的值，而不必在我的机器上设置错误的 12 小时？

感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:47:43.703

将日期直接强制转换为 INT 看起来是非常错误的。

要正确获取日期的 INTEGRAL 值，请直接使用 DATEDIFF。

```
select cast(cast('20120301' as datetime) as int) -- 40967
select cast(cast('20120301 12:30' as datetime) as int) -- 40968, oh noes!
select datediff(d,0,'20120301') -- 40967
select datediff(d,0,'20120301 12:30') -- 40967, yes! 
```

# ruby - Capistrano deploy.rb 文件中的任务问题

> ID：12906369
> 
> 赞同：3
> 
> 时间：2012-10-16T01:33:50.820
> 
> 标签：ruby, linux, deployment, capistrano

我从[本教程](http://theme.fm/2011/09/deploying-wordpress-with-capistrano-part-2-staging-servers-tagging-database-security-2213/)中获取的 deploy.rb 文件中有以下内容，除了命令之外，一切都完全正常`touch`。

有谁知道为什么这可能不起作用？

```
set :application, "your-application-name"
set :repository, "git@github.com:you/your-project.git"
set :scm, :git
set :deploy_to, "/home/path/to/project/"
set :use_sudo, false

set :deploy_via, :remote_cache
set :copy_exclude, [".git", ".DS_Store", ".gitignore", ".gitmodules"]

server "example.org", :app

namespace :myproject do
    task :symlink, :roles => :app do
        run "ln -nfs #{shared_path}/uploads #{release_path}/application/wp-content/uploads"
        run "touch #{release_path}/env_production"
    end
end

after "deploy:create_symlink", ":after_deploy" 
```

**上限部署的输出**

```
 * executing `deploy'
 * executing `deploy:update'
** transaction: start
 * executing `deploy:update_code'
   updating the cached checkout on all servers
   executing locally: "git ls-remote git@github.com:jeffreynolte/Testing-WP-Workflow.git HEAD"
 * executing "if [ -d /var/www/domain.com/subdomains/wp-workflow/shared/cached-copy ]; then cd /var/www/domain.com/subdomains/wp-workflow/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard 8c10e1f459dc78a127681362386bb84d5fbf3662 && git clean -q -d -x -f; else git clone -q git@github.com:jeffreynolte/Testing-WP-Workflow.git /var/www/domain.com/subdomains/wp-workflow/shared/cached-copy && cd /var/www/domain.com/subdomains/wp-workflow/shared/cached-copy && git checkout -q -b deploy 8c10e1f459dc78a127681362386bb84d5fbf3662; fi"
   servers: ["domain.com"]
   [domain.com] executing command
   command finished in 3905ms
   copying the cached version to /var/www/domain.com/subdomains/wp-workflow/releases/20121026041737
 * executing "rsync -lrpt --exclude=\".git\" --exclude=\".DS_Store\" --exclude=\".gitignore\" --exclude=\".gitmodules\" /var/www/domain.com/subdomains/wp-workflow/shared/cached-copy/ /var/www/domain.com/subdomains/wp-workflow/releases/20121026041737 && (echo 8c10e1f459dc78a127681362386bb84d5fbf3662 > /var/www/domain.com/subdomains/wp-workflow/releases/20121026041737/REVISION)"
   servers: ["domain.com"]
   [domain.com] executing command
   command finished in 577ms
 * executing `deploy:finalize_update'
 * executing "chmod -R g+w /var/www/domain.com/subdomains/wp-workflow/releases/20121026041737"
   servers: ["domain.com"]
   [domain.com] executing command
   command finished in 51ms
 * executing `deploy:symlink'
 * executing "rm -f /var/www/domain.com/subdomains/wp-workflow/current && ln -s /var/www/domain.com/subdomains/wp-workflow/releases/20121026041737 /var/www/domain.com/subdomains/wp-workflow/current"
   servers: ["domain.com"]
   [domain.com] executing command
   command finished in 45ms
** transaction: commit 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T15:48:12.747

在当前 Capistrano 版本中，默认任务`deploy:symlink`已被弃用，并已被替换为`deploy:create_symlink`

要使其工作，请将最后一行更改为：

```
after "deploy:create_symlink", "myproject:symlink" 
```

请参阅[capistrano/recipes/deploy.rb 第 294 行及以下](https://github.com/capistrano/capistrano/blob/master/lib/capistrano/recipes/deploy.rb#L294)。您应该已经在 Capistrano 输出中看到了弃用警告。为了使 Capistrano 输出更具可读性，我强烈推荐[capistrano_colors gem](https://rubygems.org/gems/capistrano_colors)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T16:16:18.467

我遇到了完全相同的问题，经过一番拉扯后，我认为我的问题出在 railsless-deploy gem 上。将其更新到 1.1.0 版本后一切正常。

# php - 如何从数据库中获取原始插入语句

> ID：12906372
> 
> 赞同：7
> 
> 时间：2012-10-16T01:34:07.867
> 
> 标签：php, mysql, return-value

> **可能重复：**
> [获取 MySQL 中现有行的插入语句](https://stackoverflow.com/questions/3978326/get-insert-statement-for-existing-row-in-mysql)

假设我们有一个名为 users 的表：

```
CREATE TABLE IF NOT EXISTS users(
UID int(11) PRIMARY KEY NOT NULL auto_increment,
fname varchar(100) default NULL,
lname varchar(100) default NULL,
username varchar(20) default NULL UNIQUE,
password blob   
)ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

让我们假设表格中有几行已填满。我知道有一个查询返回表的创建 - > SHOW CREATE TABLE users 但我正在寻找重新创建单独的插入语句以将它们保存在日志中......我知道这听起来很奇怪，但我正在定制CMS 记录了所有内容，并希望更新/删除的行可以在某个时间点回滚......因此我需要从表数据重新创建精确的插入查询（我已经在网上搜索了答案但找不到它...）

是否有一个查询会“自动”返回按主键插入特定行的查询？

我正在寻找可以执行此操作的查询：

```
SHOW INSERT FROM users WHERE PRIMARY_KEY=2 
```

回报：

```
INSERT INTO users (UID,fname,lname,username,password) VALUES (2,'somename','somelastname','someusername','someAESencryptedPassword') 
```

我认为这样的查询存在/可能的原因是因为当您使用 php myadmin (cpanel) 备份数据库并打开文件时，您实际上可以查看每个插入以重新创建包含所有行的表时间...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:59:45.400

没有这样的“命令”（数据被存储，但不是插入它的实际 SQL），按照你的要求去做是没有意义的。您确实意识到您的“日志”会比实际的表和数据本身大 20 倍（至少）？无论如何，如果没有大量工作来追踪它（请参阅下面的评论），它就无法检索 INSERT 语句。

研究事务 SQL，利用服务器日志和事务，并像你应该做的那样定期备份数据，并停止尝试重新发明轮子。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:48:45.167

没有这样的命令来检索原始插入语句。但是，您始终可以根据现有的表结构和数据重新制作插入语句。

以下链接可能会对您有所帮助，这已经被问到了：

[获取 MySQL 中现有行的插入语句](https://stackoverflow.com/questions/3978326/get-insert-statement-for-existing-row-in-mysql)

另一种可能的选择是使用[mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)和 php 将数据导出为 SQL 语句。

# sencha-touch - Sencha touch - 为什么我的按钮不起作用？

> ID：12906373
> 
> 赞同：-1
> 
> 时间：2012-10-16T01:34:12.203
> 
> 标签：sencha-touch, sencha-touch-2

[解决了]

我正在关注这个教程[链接](http://www.sencha.com/learn/sencha-touch-2-tabs-toolbars)

我的主视图中有一个按钮，如下所示

```
Ext.define('Sencha.view.Main', {
    extend: 'Ext.Panel',

    config: {
        items:[
            {
                text:'hello',
                xtype:'button',
                action:'pingHomeBadge',
            }
        ]
    }
}); 
```

我的主控制器看起来像

```
 Ext.define('Sencha.controller.Main', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
            starButton:'button[action=pingHomeBadge]',
        },
        control: {
            starButton: {
                tap:'incrementHomeBadge',
            },
        }
    },

    incrementHomeBadge: function() {
        alert("hello");
    },
}); 
```

该按钮被显示，但是当我单击该按钮时没有任何反应。有人知道我在做什么错吗？我几乎复制粘贴了教程中的代码。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T18:29:24.467

我建议你尝试这种方式：

```
Ext.define('Sencha.controller.Main', {
extend: 'Ext.app.Controller',

config: {
    refs: {
       // starButton:'button[action=pingHomeBadge]',
    },
    control: {
        'button[action=pingHomeBadge]': {
            tap:'incrementHomeBadge',
        },
    }
},

incrementHomeBadge: function() {
    alert("hello");
}, 
```

});

还要检查这个控制器是否正在加载。如 app.js 中所述

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T02:55:32.493

**更新**

实际上它们不在您的控制范围内，但是您的参考文献看起来不错...我没有看到您的代码有任何内容，所以我怀疑问题出在其他地方...为什么不将您的源代码与本教程的源代码进行比较呢？[http://github.com/senchalearn/Tabs-and-Toolbars](http://github.com/senchalearn/Tabs-and-Toolbars)

# ruby - 拼命地试图从 ruby 中的 csv 中删除这个恶魔般的 excel 生成的特殊字符

> ID：12906374
> 
> 赞同：1
> 
> 时间：2012-10-16T01:34:16.900
> 
> 标签：ruby, csv, character-encoding, non-ascii-characters

我的电脑不知道这个字符是什么。它来自 Excel。

在 excel 中它是一个奇怪的空间，现在它由几个符号表示，即。我的电脑不知道它是什么。

这个字符在 Excel 中由 Ê 表示（在 csv 中，因为 xls 它是某种空间），OS X 的 TextEdit 将其视为这么长的大空间“”，我认为这就是它。Ruby 的 CSV 解析器在尝试使用普通的 utf-8 解析它时崩溃了，我必须添加`:encoding => "windows-1251:utf-8"`它来解析它，在这种情况下，Ruby 将它变成“K”。这个 K 在我的 CSV 中以 9、12、15 和 18 组（KKKKKKKKK 等）出现，并且**无法**通过`gsub(/K/)`（K、/KKKKKKKK/ 等组，也无法删除）删除！我也使用了开源工具[CSVfix](https://code.google.com/p/csvfix/)，但它的“删除前导和尾随空格”命令对 Ks 没有影响。

我已经尝试按照[Remove non-ascii characters from csv](https://stackoverflow.com/questions/3337936/remove-non-ascii-characters-from-csv)`sed`中的建议使用，但出现了类似的错误

> sed：1：“output.csv”：无效的命令代码o

`sed -i 's/[\d128-\d255]//' input.csv`在 Mac 上运行类似的东西时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T02:01:55.397

**自答（不同账号，同一人）

第一次解决方案尝试：

```
evil_string_from_csv_cell = "KKKKKKKKK"
encoding_opts = {
  :invalid => :replace, :undef => :replace,
  :replace => '', :universal_newline => true }
evil_string_from_csv_cell.encode Encoding.find('ASCII'), encoding_opts
#=> "" 
```

第二次解决方案尝试：

不要使用 'windows-1251:utf-8' 进行编码，而是使用 'iso-8859-1'，这会将那些（西里尔字母）K 转换为 '\xCA'，然后可以使用

```
string.gsub!(/\xCA/, '') 
```

** 我还没有解决这个问题。

第三次解决方案尝试：

试图匹配 K 的数组，就好像它们是实际的 K 一样是愚蠢的。复制并粘贴实际的西里尔字母 K，看看它是如何工作的——这是字符，注意最后的小卷曲

К

ruby 通过使它比正常的 K 更粗一点来对待它

第 4 次解决方案/策略尝试（成功）：

*   使用正则表达式来捕获字符，只要您可以将奇怪的空格（或任何它们）编码成某种东西，然后您就可以使用正则表达式忽略它们
*   还尝试利用文档类型中的任何空间（类似矩阵）模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:02:59.583

使用以下内容解析您的 csv 以删除您的“邪恶”角色

```
.encode!("ISO-8859-1", :invalid => :replace) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T23:32:58.800

这个问题的答案是

A.) 这是一个非常困难的问题。到目前为止，没有人知道如何“物理地”**删除**西里尔字母 Ks。

但

B.) csv 文件只是由非转义逗号分隔的字符串，因此只要编码不会破坏程序，使用正则表达式匹配字符串就可以正常工作。

所以要读取文件

```
f = File.open(File.join(Rails.root, 'lib', 'assets', 'repo', name), :encoding => "windows-1251:utf-8")
parsed = CSV.parse(f) 
```

然后通过正则表达式文字字符串匹配查找特定行（它将忽略西里尔字母 K）

```
parsed.each do |p|           #here, p[0] is the metatag column
  @specific_metatag_row = parsed.index if p[0] =~ /MetatagA/
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-01T19:39:50.570

我无法开始`sed`工作，但最终幸运地在 Vim 中做到了这一点：

```
vim myhorriblefile.csv

# Once vim is open:
:s/Ê/ /g
:wq

# Done! 
```

作为一个通用的重用函数，它可以是：

```
clean_weird_character () {
  vim "$1" -c ":%s/Ê/ /g" -c "wq"
} 
```

# php - 内部连接、关注和关注

> ID：12906375
> 
> 赞同：0
> 
> 时间：2012-10-16T01:34:29.867
> 
> 标签：php, mysql

我在[另一个线程](https://stackoverflow.com/questions/12886730/turning-user-id-into-name-seperate-tables-in-php)中获得了一些关于从 MySQL 中的 2 个表中提取数据的问题，看来我需要内部连接。

我的表：

```
USERS 
  --id (int)
  --username (varchar)

USER_FOLLOW
  -- id (int)
  -- follower (int)
  -- user (int)
  -- subscribed (current_timestamp) 
```

查询，$following =

```
SELECT ufollower.id AS follower_id,
ufollower.username AS follower_name,
ufollowed.id AS user_id,
ufollowed.username AS user_name
FROM
/* JOIN twice against users, once to get the follower and once to get the followed */
user_follow 
/* users aliased as ufollower to get the follower details */
JOIN users ufollower ON ufollower.id = user_follow.follower
/* users aliased as ufollowed to get the followed details */
JOIN users ufollowed ON ufollowed.id = user_follow.user
WHERE
user_follow.user = $p_id 
```

`p_id`是我正在查看的人的个人资料 ID。

我需要显示我关注的人以及我关注的人的用户名。由于某种原因，我目前拥有的代码向我展示*了 3 次，*而不是我关注的 3 个人：

```
while($apple = mysql_fetch_array($following)){
  echo '<a href="'.$apple['user_name'].'">'.htmlspecialchars($apple['user_name']).'</a> ';
} 
```

很抱歉打开另一个线程，我已经盯着它看了好几个小时，我无法理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:46:47.933

乍一看，您似乎显示了错误的用户名，显示的是关注者而不是关注者。将您的 PHP 代码更改为以下内容：

```
while($apple = mysql_fetch_array($following)){
  echo '<a href="'.$apple['follower_name'].'">'.htmlspecialchars($apple['follower_name']).'</a> ';
} 
```

请注意，您的查询实际上只返回关注您的用户，它不包括您关注的用户（即带有 的用户`user_follow.follower = $p_id`）。当然，对于那些用户，您实际上确实想要显示该`user_name`列...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:55:40.710

```
SELECT f.user,u.username,f.subscribed
FROM user_follow f inner join users u on f.user=u.id
WHERE
f.follower=1
union all
SELECT f.follower,u.username,f.subscribed
FROM user_follow f inner join users u on f.follower=u.id
WHERE
f.user=1; 
```

The query shall retrieve person *user=1* are following + person who are following *user=1*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T01:41:43.940

您正在对用户进行两次内部联接，而不是对 ufollowed 和 ufollower 进行内部联接：

```
SELECT ufollower.id AS follower_id,
ufollower.username AS follower_name,
ufollowed.id AS user_id,
ufollowed.username AS user_name
FROM
/* JOIN twice against users, once to get the follower and once to get the followed */
user_follow 
/* users aliased as ufollower to get the follower details */
JOIN  ufollower ON ufollower.id = user_follow.follower
/* users aliased as ufollowed to get the followed details */
JOIN ufollowed ON ufollowed.id = user_follow.user
WHERE
user_follow.user = $p_id 
```

# python - 着色器链接但不适用于某些人

> ID：12906383
> 
> 赞同：1
> 
> 时间：2012-10-16T01:36:14.030
> 
> 标签：python, opengl, glsl, shader

我已经用 C++ 和 Python 以及所有收到此消息的计算机编写了 OpenGL 程序

`vertex shader(s) linked fragment shader(s) linked`

显示一个空白屏幕。所有其他可以看到图形的人都没有来自 glGetProgramInfoLog() 的任何消息 我的笔记本电脑显示该消息并且看不到任何东西。一个具体的例子。我有 Opengl 3.1，我的一个朋友有 3.2，他什么都看不到。他得到了那个信息。这也发生在我的 C++ 程序上。是否需要先验证程序？7 个人中有 3 个人看不到任何东西，他们都收到了该信息。那些可以看到它的人不会从着色器中获得一条消息。

这是我的着色器上的所有内容。

```
def init_shaders(self):
    vert_shader=glCreateShader(GL_VERTEX_SHADER)
    frag_shader=glCreateShader(GL_FRAGMENT_SHADER)

    vert_text="""
    varying vec2 texcoord;
    attribute vec3 inputvertex;
    uniform float ifintex;
    attribute vec2 input_texcoord;
    void main() {
        texcoord = (gl_MultiTexCoord0.xy*ifintex)+input_texcoord.xy;
        vec4 position = vec4(inputvertex,1.0);
        gl_Position = gl_ModelViewProjectionMatrix * position;
    }
    """

    frag_text="""
    uniform sampler2D texture_map;
    uniform vec4 add_color;

    varying vec2 texcoord;

    void main(){

        gl_FragColor = texture2D(texture_map, texcoord.xy)+add_color;

    }
    """

    glShaderSource(vert_shader,vert_text)
    glShaderSource(frag_shader,frag_text)

    glCompileShader(vert_shader)
    glCompileShader(frag_shader)

    self.Shader=glCreateProgram()
    glAttachShader(self.Shader,vert_shader)
    glAttachShader(self.Shader,frag_shader)
    glLinkProgram(self.Shader)
    error=glGetProgramInfoLog(self.Shader)
    if error!="":
        print error
    else:
        print "Shaders Compiled"

    glUseProgram(self.Shader) 
```

哪里不对了？我认为这只是一个通知，但它的模式太可疑了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:18:15.850

尝试通过将其添加到着色器顶部来指定您正在使用 GLSL 1.20：

```
#version 120 
```

其他任何事情都可能是实现之间的细微差别。我知道在 Intel 实现调用`texture2D`时没有绑定纹理返回`(0, 0, 0, 1)`，而 NVIDIA 和 ATI 实现返回`(0, 0, 0, 0)`。

除了你的着色器看起来不错之外，试着在你朋友的机器上弄乱它们，看看问题出在哪里。

还请询问您的朋友他们必须使用什么 GPU，以查看哪些实现显示错误。

哦，您想检查 with 的值，`GL_LINK_STATUS`而`glGetProgramiv`不是查看日志是否为空。一些实现会在成功和失败时写入日志。`GL_LINK_STATUS`总是`0`成功的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T02:38:59.313

比 OpenGL 版本更重要的是驱动程序供应商。不同的驱动程序有不同的输出。因此，您的程序很可能与某些驱动程序（ATI、NVidia 或 Intel）不兼容。您应该找出您的程序在哪些视频卡上运行以及在哪些视频卡上失败。

据我所知，您的着色器看起来不错。此外，除了信息消息之外，您永远不会收到来自驱动程序的任何错误或警告。所以最有可能的嫌疑人是 mip-map 纹理初始化，这在 ATI 上是已知的错误：[http](http://www.opengl.org/wiki/Common_Mistakes#Automatic_mipmap_generation) ://www.opengl.org/wiki/Common_Mistakes#Automatic_mipmap_generation 。

您尚未提供完整的程序代码。所以另一种可能性是您绑定到一个常量属性位置。视频卡驱动程序可以产生不同的属性位置映射，即使在同一系统上的运行之间也是如此。

TLDR：您的着色器很好，问题出在其他地方。该错误很可能取决于驱动程序供应商（ATI、NVidia 或 Intel）。

# database - Drupal 7 根据域更改视图

> ID：12906384
> 
> 赞同：0
> 
> 时间：2012-10-16T01:36:30.213
> 
> 标签：database, drupal, content-management-system

在drupal 7（和任何其他drupal版本）中是否有可能为2个站点提供一个共享数据库，并且视图会根据子域/ URL而改变。请看下图。

![在此处输入图像描述](../Images/235a6bec9b9dec0072317f6c141393e9.png)

我想要的只是为多个站点提供一个共享数据库，但具有多个视图，具体取决于它所访问的子/域，并且模块/主题范围（例如 Captcha 模块）应该只在 site2 中可见。

我被这部分困住了。我的第二个选择是拥有 2 个数据库，但只有 1 个数据库用于访问我的站点特定数据，但对于内容管理数据的隔离，我认为最好还有单独的数据库来控制模块的访问。让我知道你的想法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:20:20.643

**这可以通过Panels**轻松解决，因为您可以从那里选择正确的 Views 视图。

*没有理由不在任何 drupal 站点 imo 上使用面板。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:38:36.777

是的。Drupal DB 抽象和配置设置足够灵活，可以满足您的需求。您将不得不与用户打交道，那么这里也是一个选择问题，因为 Drupal 允许您共享用户或为每个站点拥有不同的用户空间。有一本关于这个主题的书，还有许多站点可以帮助实现各种多站点方案选项。

顺便说一句，您可以随时在 drupal.stackexchange 中发布您的 D 问题。

# macos - Mac 上 Adob e Air 中用户空闲检测的奇怪行为

> ID：12906392
> 
> 赞同：6
> 
> 时间：2012-10-16T01:37:46.370
> 
> 标签：macos, actionscript-3, air, adobe

我有一个用纯 AS3 编写的 Adob​​e AIR 应用程序，它具有一些功能，当用户空闲时会发生，然后在用户返回时返回到正常状态。我正在使用以下代码检测此活动：

```
NativeApplication.nativeApplication.idleThreshold = 180;
NativeApplication.nativeApplication.addEventListener(Event.USER_IDLE, onUserIdle);
NativeApplication.nativeApplication.addEventListener(Event.USER_PRESENT, onUserPresent); 
```

该`onUserIdle`方法应在 3 分钟后调用，但随后`onUserPresent`事件几乎立即被触发。我说的是毫秒后。这发生在没有任何用户输入的情况下。奇怪的是，这不会发生在 Windows 上——只发生在 OSX 上。它发生在可追溯到 10.6.3 的所有 OSX 版本上。

Adobe 的文档对这些事件的确定方式非常模糊，因此我不确定是否可以在系统级别做一些事情来解决问题。有没有人对这个问题有任何经验，如果没有，关于如何在应用程序没有焦点时检测用户空闲状态的任何其他建议？

只是为了抢占建议，我不能使用鼠标/键盘侦听器来模拟相同的行为，因为如果应用程序失去焦点，它们就不起作用，而`NativeApplication`事件仍然会触发。我也曾经`NativeProcess`通过获取 ioreg 的输出来获取系统报告的硬件空闲时间，但它似乎不受鼠标的影响。

我非常感谢任何帮助。

**编辑：我刚刚发现当应用程序在 OSX 上的管理员帐户中运行时不会发生这种情况。它只发生在用户帐户中，这只会让我更加困惑。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:29:30.947

我弄清楚了问题所在。当`USER_IDLE`事件在用户帐户中触发时，我们做了几件事——其中之一是强行杀死 Dock 以确保它从屏幕上隐藏。无论出于何种原因，这都会重置内部可用`idleThreshold`计数。这不仅发生在 AIR 中 - 它也发生在通过终端监控时，而且似乎没有任何办法可以阻止它。解决方案是停止杀死码头。在那之后，一切都神奇地起作用了。

# objective-c - 在保存之前提交 NSTextField 更改

> ID：12906394
> 
> 赞同：2
> 
> 时间：2012-10-16T01:38:22.380
> 
> 标签：objective-c, macos, cocoa, nstextfield

我有一个`NSDocument`应用程序，我希望`NSTextField`每次用户保存时都提交对模型的当前更改（例如通过 cmd+s）。

我不使用绑定，目前更改被推送到`-controlTextDidEndEditing:`方法中的模型。调用`[window makeFirstResponder:nil]`确实会推动对模型的更改，但也会导致控件失去焦点，这不是一个真正合理的行为。

谷歌搜索我看到有几个人建议使用该`-commitEditing`方法，但它仅适用于绑定，我错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:36:07.920

您可以`controlTextDidEndEditing:`从您的`save`操作中调用您已经定义的：

```
-(IBAction)save:(id)sender
{
    [self controlTextDidEndEditing: ...]
} 
```

触发您已经编写的相同代码！

# javascript - Javascript标签数据，点击显示

> ID：12906395
> 
> 赞同：0
> 
> 时间：2012-10-16T01:38:25.257
> 
> 标签：javascript, jquery, dom

我的问题是我无法使用我编写的 javascript 让我的标签显示我的数据。它会在页面加载时显示（默认操作），但在我使用导航时不会显示任何 tab_content。

Javascript

```
$(document).ready(function() {

  //Default Action

  $(".tab_content").hide(); //Hide all content
  $("dl.tabs dd:first").addClass("active").show(); //Activate first tab
  $(".tab_content:first").show(); //Show first tab content

  //On Click Event
  $("dl.tabs dd").click(function(event) {
    event.preventDefault();
      $("dl.tabs dd").removeClass("active"); //Remove any "active" class
      $(this).addClass("active"); //Add "active" class to selected tab
      $(".tab_content").hide(); //Hide all tab content
      var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
      $(activeTab).fadeIn(); //Fade in the active content
      return false;
  });
}); 
```

的HTML

```
<div class="six columns">
  <div class="panel">
    <dl class="nice vertical tabs">
        <dd><a id="(dynamic id)">(tab name)</a><dd>
        <dd><a id="(dynamic id)">(tab name)</a><dd>
        <dd><a id="(dynamic id)">(tab name)</a><dd>
    </dl>
  </div>
</div>

<div class="six columns">
    <div id="(dynamic id)" class="panel tabs_content">
      ...
    </div>
    <div id="(dynamic id)" class="panel tabs_content">
      ...
    </div>
    <div id="(dynamic id)" class="panel tabs_content">
      ...
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T01:40:55.060

你的 jQuery 对象是空的，看看它的选择器：

```
var activeTab = $(this).find("a").attr("href");
$(activeTab).fadeIn(); //Fade in the active content 
```

`activeTab`是`href`属性，不是选择器也不是 DOM 元素，为什么它应该工作......？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T02:02:33.373

一旦你修复了类名`tab_content`与标签的不匹配`tabs_content`并在标签中包含 href，你的代码基本上就可以工作了`A`。当前没有用于查找代码的 href

href 需要采用“#idValue”格式

我做了这 2 处更改，这里是工作演示

[http://jsfiddle.net/WFW6k/1/](http://jsfiddle.net/WFW6k/1/)

# php - 将使用 Keith Palmer 的 QBWC 框架的应用程序转换为 QuickBooks Online

> ID：12906396
> 
> 赞同：0
> 
> 时间：2012-10-16T01:38:28.877
> 
> 标签：php, quickbooks, quickbooks-online

我们在我们的 Web 应用程序中使用[Keith Palmer/Consolibyte Solutions 出色的 PHP QuickBooks 框架](http://wiki.consolibyte.com/wiki/doku.php/quickbooks)，通过 QuickBooks Web 连接器与 QuickBooks 桌面版进行通信。我们在代码中使用 a`QuickBooks_Server`和 a`QuickBooks_Queue`如下：

```
$this->myQBQueue = new QuickBooks_Queue($this->myDSN);

$mappedFunctions = array(
    QUICKBOOKS_ADD_CUSTOMER,
    QUICKBOOKS_ADD_SALESORDER,
    QUICKBOOKS_ADD_SALESRECEIPT,
    QUICKBOOKS_QUERY_CUSTOMER,
);

$map = array();

foreach($mappedFunctions as $function) {
    $map[$function] = array(
        array($this,"quickbooks{$function}Request"),
        array($this,"quickbooks{$function}Response"),
    );
}

$errmap = array('*' => array($this,'quickbooksErrorHandler'));

$hooks = array(
    QUICKBOOKS_HANDLERS_HOOK_LOGINFAILURE => array(
        array($this,'quickbooksLoginFailureHook')
    ),
    QUICKBOOKS_HANDLERS_HOOK_LOGINSUCCESS => array(
        array($this,'quickbooksLoginSuccessHook')
    )
);

$soap_options = array();
$handler_options = array();
$driver_options = array();
$callback_options = array();

$this->myQBServer = new QuickBooks_Server($this->myDSN, $map, $errmap, $hooks, QUICKBOOKS_LOG_NORMAL, QUICKBOOKS_SOAPCLIENT_BUILTIN, QUICKBOOKS_WSDL, $soap_options, $handler_options, $driver_options, $callback_options); 
```

我们现在有一位客​​户要求我们在线添加对 QuickBooks 的支持。我们仍然可以使用 Keith Palmer 的在线 QuickBooks 框架使用 a`QuickBooks_Server`和 a `QuickBooks_Queue`，还是我们必须为 QuickBooks 在线部分编写新代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:06:32.800

你*可以*重复使用 Queue 的东西，但是框架本身并不支持它——你绝对可以很容易地破解它。

您也*肯定*能够重用大部分（但不是全部）您的 qbXML。

QuickBooks Online 确实支持 qbXML 界面（尽管它不是非常好 - Intuit 已公开表示他们可能会在明年左右弃用它，并且不再向它添加功能）。您应该知道，*在不久的将来*，您*很可能*会开始考虑转向 Intuit Anywhere/IDS -**特别是**如果您是一个拥有大量 QuickBooks Online 客户的 SaaS 应用程序。

您可以在此处找到 QuickBooks Online 的 qbXML 文档：http: [//developer.intuit.com/qbsdk-current/common/newosr/index.html](http://developer.intuit.com/qbsdk-current/common/newosr/index.html) （确保勾选“OE”复选框并取消选中“US”复选框）

使用 QuickBooks Online 让很多人感到困扰的一些事情：

*   添加付款时，您必须将它们应用于发票。QBO 中没有 IsAutoApply
*   QBO 的 qbXML API 中不支持更新发票
*   QBO 的 qbXML API 中不支持库存项目

如果您查看包含在您拥有的 QuickBooks PHP DevKit 库代码中的 docs/example_online_edition.php（或 docs/example_raw_online_edition.php）文件，您将了解它是如何工作的。基本上不是队列，您只是通过 HTTPS 将直接 qbXML 请求发送到 Intuit 的服务器，而不是将其包装在 SOAP 中并等待 Web 连接器接收它。

话虽如此，如果你真的想继续使用队列，你可以 - 像往常一样排队，然后设置一个类似这样的脚本，在 cron 作业上运行：

（警告 - 完全未经测试的代码，您必须测试和调试）

```
<?php

// Do some setup stuff here as shown in the example... 

$res = mysql_query("SELECT * FROM quickbooks_queue WHERE qb_username = 'the username' AND qb_status = 'q'");
while ($arr = mysql_fetch_array($res))
{
  $request_function = $map[$arr['qb_action']][0];
  $response_function = $map[$arr['qb_action']][1];

  $requestID = null;   // not relevant for QBO
  $user = 'the username';
  $ID = $arr['ident']; 
  $extra = null;
  if($arr['extra']) $extra = unserialize($arr['extra']);
  $err = null;
  $last_action_time = null;
  $last_actionident_time = null;
  $version = '6.0'; // QBO only supports 6.0
  $locale = 'US';   // QBO only supports US
  $qbxml = $request_function($requestID, $user, $action, $ID, $extra, &$err, $last_action_time, $last_actionident_time, $version, $locale);

  $xml = $API->qbxml($qbxml);

  $idents = _extractIdentifiers($xml);   // You can find this function in QuickBooks/Handlers.php and pull it into your app as a function instead of a method

  $response_function($requestID, $user, $action, $ID, $extra, $err, $last_action_time, $last_actionident_time, $xml, $idents);
} 
```

# python - 类型对象“datetime.datetime”没有属性“datetime”

> ID：12906402
> 
> 赞同：190
> 
> 时间：2012-10-16T01:39:33.183
> 
> 标签：python, datetime, namespaces

我收到以下错误：

> 类型对象“datetime.datetime”没有属性“datetime”

在以下行：

```
date = datetime.datetime(int(year), int(month), 1) 
```

有人知道错误的原因吗？

`from datetime import datetime`如果有帮助，我导入了日期时间

谢谢

* * *

## 回答 #1

> 赞同：311
> 
> 时间：2012-10-16T01:50:18.000

Datetime 是一个允许处理日期、时间和日期时间（所有这些都是数据类型）的模块。这意味着`datetime`它既是顶级模块，又是该模块中的一种类型。这令人困惑。

您的错误可能是基于模块的混乱命名，并且您或您正在使用的模块已经导入。

```
>>> import datetime
>>> datetime
<module 'datetime' from '/usr/lib/python2.6/lib-dynload/datetime.so'>
>>> datetime.datetime(2001,5,1)
datetime.datetime(2001, 5, 1, 0, 0) 
```

但是，如果您导入 datetime.datetime：

```
>>> from datetime import datetime
>>> datetime
<type 'datetime.datetime'>
>>> datetime.datetime(2001,5,1) # You shouldn't expect this to work 
                                # as you imported the type, not the module
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: type object 'datetime.datetime' has no attribute 'datetime'
>>> datetime(2001,5,1)
datetime.datetime(2001, 5, 1, 0, 0) 
```

我怀疑您或您正在使用的模块之一已像这样导入： `from datetime import datetime`.

* * *

## 回答 #2

> 赞同：132
> 
> 时间：2013-10-31T05:48:22.963

对于python 3.3

```
from datetime import datetime, timedelta
futuredate = datetime.now() + timedelta(days=10) 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-10-16T01:51:04.020

你应该使用

```
date = datetime(int(year), int(month), 1) 
```

或者改变

```
from datetime import datetime 
```

到

```
import datetime 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2018-02-16T12:41:19.310

您应该真正将模块导入到它自己的**别名**中。

```
import datetime as dt
my_datetime = dt.datetime(year, month, day) 
```

与其他解决方案相比，上述方法具有以下优点：

*   调用变量`my_datetime`而不是减少混淆，因为在 datetime 模块 ( )`date`中已经存在 a 。`date``datetime.date`
*   模块和类（都称为`datetime`）不会相互影响。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-07-12T07:25:19.200

如果您使用过：

```
from datetime import datetime 
```

然后只需将代码编写为：

```
date = datetime(int(year), int(month), 1) 
```

但是，如果您使用过：

```
import datetime 
```

那么只有你可以写：

```
date = datetime.datetime(int(2005), int(5), 1) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-05-13T22:51:15.400

我遇到了同样的错误，也许您已经使用 only 导入了模块，`import datetime`因此更改 `from datetime import datetime`为 only `import datetime`。我改回来后它对我有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-09T09:37:00.557

我发现这要容易得多

```
from dateutil import relativedelta
relativedelta.relativedelta(end_time,start_time).seconds 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-04-13T07:32:41.867

```
import time
import datetime
from datetime import date,timedelta 
```

您必须`datetime`从`datetime`.

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2020-03-30T07:14:32.963

```
from datetime import datetime
import time
from calendar import timegm
d = datetime.utcnow()
d = d.strftime("%Y-%m-%dT%H:%M:%S.%fZ")
utc_time = time.strptime(d,"%Y-%m-%dT%H:%M:%S.%fZ")
epoch_time = timegm(utc_time) 
```

# python - 为什么python，当我运行我的程序时会出现错误'预期缩进块？

> ID：12906406
> 
> 赞同：1
> 
> 时间：2012-10-16T01:40:07.387
> 
> 标签：python, python-3.x

我试图让我的程序限制用户可以输入的内容。它不断从下面的代码中返回“预期的缩进块”错误。

```
deliverydetails = input("Is your order for delivery?\n Press 1 for delivery. Press 2 for pickup")

if deliverydetails == "1":

##    def delivery ():

    print ("Order for Delivery")
    customerfirstname = " "
    while len(customerfirstname) <3 or len(customerfirstname)>30 or customerfirstname.isalpha() != True:
    customerfirstname = input("Customer First Name: ** must be 4 characters long  + " ")                         
    while len(customersurname) < 3 or len(customersurname) > 30 or     customerfirstname.isalpha() != True:                        
    customersurname = input("Customer Surname:" + " ")
    customerstreet = input("Street name:" + " ")
    customerstreetnumber = input("Street number:" + " ")
    customercity = input("City:" + " ")
    customersuburb = input("Suburb (If none, leave blank):" + " ")
    latestOrder.append(customerfirstname)
    latestOrder.append(customersurname)
    latestOrder.append(customerstreet)
    latestOrder.append(customerstreetnumber)
    latestOrder.append(customercity)
    latestOrder.append(customersuburb) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:10:03.807

Python 使用缩进对代码块进行分组。在 while 语句之后，您要缩进它下面应该在 while 循环内执行的行。

以下是一些可能有用的其他提示： - 使用 pylint 检查您的语法。它将发现很多错误，否则您只能在运行时发现。- 使用空格缩进。不要使用标签。这是 PEP 8 风格的推荐

这是您的代码的更正版本：

```
deliverydetails = input("Is your order for delivery?\n Press 1 for delivery. Press 2 for pickup")

if deliverydetails == "1":
##    def delivery ():
    print ("Order for Delivery")
    customerfirstname = " "
    customersurname = " "

    while len(customerfirstname) <3 or len(customerfirstname)>30 or customerfirstname.isalpha() != True:
        customerfirstname = input("Customer First Name: ** must be 4 characters long  + " ")                         

    while len(customersurname) < 3 or len(customersurname) > 30 or     customerfirstname.isalpha() != True:                        
        customersurname = input("Customer Surname:" + " ")

    customerstreet = input("Street name:" + " ")
    customerstreetnumber = input("Street number:" + " ")
    customercity = input("City:" + " ")
    customersuburb = input("Suburb (If none, leave blank):" + " ")
    latestOrder.append(customerfirstname)
    latestOrder.append(customersurname)
    latestOrder.append(customerstreet)
    latestOrder.append(customerstreetnumber)
    latestOrder.append(customercity)
    latestOrder.append(customersuburb) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T01:43:51.037

Python 使用意图而不是`{}`or `begin/end`，例如这一行

```
while len(customerfirstname) <3 or len(customerfirstname)>30 or customerfirstname.isalpha() != True: 
```

后面应该跟一个缩进块。一个缩进的块可以短到一行，通常你应该将它缩进 4 个空格。`while`

旁白：把那行写成

```
while not (3 <= len(customerfirstname) <= 30 and customerfirstname.isalpha()): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T01:43:18.913

确保缩进循环中的行。这是 Python 必须知道要循环的部分的唯一方法。

```
delivery_details = input("Is your order for delivery?\n Press 1 for delivery. Press 2 for pickup")

if delivery_details == "1":
    print "Order for Delivery"

    customer_first_name = ""
    while len(customer_first_name) < 3 or len(customer_first_name) > 30 or not customer_first_name.isalpha():
        customer_first_name = input("First name (must be 4 characters long): ")

    customer_surname       = input("Surname: ")
    customer_street        = input("Street name: ")
    customer_street_number = input("Street number: ")
    customer_city          = input("City: ")
    customer_suburb        = input("Suburb (If none, leave blank): ")

    latest_order.append(customer_first_name)
    latest_order.append(customer_surname)
    latest_order.append(customer_street)
    latest_order.append(customer_street_number)
    latest_order.append(customer_city)
    latest_order.append(customer_suburb) 
```

对于它的价值，我已经为可读性做了一些风格上的改变。变量名中的一些额外间距、空行和下划线使一切看起来更容易。

# java - 处理 java.lang.NoSuchMethodError 的建议

> ID：12906408
> 
> 赞同：2
> 
> 时间：2012-10-16T01:40:32.750
> 
> 标签：java, exception, jboss, struts, nosuchmethoderror

这是我得到的错误：

```
java.lang.NoSuchMethodError: com.Order.getList(Lepo/User;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/util/ArrayList; 
```

反编译类后发现应该有一个“Ljava/lang/String”作为第一个参数。正如您通过缺少参数的错误所看到的那样。所以我反编译了调用方法的类，它确实有一个字符串作为第一个参数。

这是我对这里发生的事情有点困惑的地方。根据时间戳，最后一次修改此代码是 2007 年。大约一周前出现此错误。

这是一个运行在 JBoss 4.0.0DR3 上的 struts 应用程序。据我所知，服务器上没有软件升级。

我还尝试停止 JBoss，删除所有临时目录并重新启动。

有没有人对下一步采取任何建议？

编辑：

这是更多的堆栈跟踪

```
java.lang.NoSuchMethodError: com.Order.getList(Lepo/User;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/util/ArrayList;
    at com.ViewStatusAction.retrieveList(ViewStatusAction.java:325)
    at com.ViewStatusAction.executeAction(ViewStatusAction.java:115)
    at com.BaseAction.execute(BaseAction.java:42)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:484) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T02:40:47.493

我假设`com.Order`和`com.ViewStatusAction`都是应用程序代码，而不是第 3 方代码。

异常意味着您有某种版本不匹配。

*   该类`ViewStatusAction`期望有一个`Order`带有此签名的方法：

    ```
    java.util.ArrayList getList(Lepo.User arg0, 
                                String arg1, String arg2, 
                                String arg3, String arg4) 
    ```

*   该类`Order`未声明具有该签名的方法。（它可能有不同的签名，或者根本不存在。）

当您最初编译`ViewStatusAction`时，编译器能够找到该方法。但是现在，运行时系统再也找不到它了。这只能意味着您使用的版本与编译`Order`您的类的版本不同。`ViewStatusAction`

你需要找出为什么你现在会出现这种不匹配。可能的解释包括：

*   您已经部署了其中一个类的新版本，而没有部署另一个类的新版本。

*   您已经部署了其中一个类的过时版本。

*   您的类路径中有一个或其他类的两个版本，并且您无意中更改了类路径搜索顺序。

你需要做的是找出不兼容的类来自哪里，以及它们是如何到达那里的。一旦你弄清楚了，修复可能是不言而喻的。

* * *

我注意到您的 FQ 类名称不符合公认的标准：

1.  软件包名称应以您组织的域名开头，颠倒。“com。” 是错的。
2.  包名应该全部小写。“lepo”如果是包名是错误的，如果是默认包中的类，那也是错误的。

（您的问题可能是修复假名的后果`Lepo.User`......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T02:30:18.537

运行时 jar 可能与您用于编译代码的 jar 不同。您还可能在类路径上有多个 jar，它们包含相同的类并相互遮蔽。您可能想要检查您的应用服务器运行时类路径和 jar 顺序。

# c - 插入排序优于快速排序的点

> ID：12906409
> 
> 赞同：1
> 
> 时间：2012-10-16T01:40:33.550
> 
> 标签：c, sorting

我正在编写一个快速排序，当被排序的数组的长度很小时，它会切换到插入排序。我已经运行了一些测试，据我所见，当被排序的数组是 200 个元素或更少时，切换到插入排序会更快。这看起来真的很大，我期待接近 20。200 是合理的还是我的实现方式之一？我使用了基本的维基百科算法。

```
void quicksort(int list[asize], int left, int right)
{
    int pivotindex;
    int newpivotindex;

    if (left < right)
    {
            if ((right-left)<=200)
            {
            insertionsort(list,left,right);
            }
    }
    else
    {
        pivotindex = r_rand(left,right);
        newpivotindex = partition(list, left, right, pivotindex);

        quicksort(list, left, newpivotindex-1);
        quicksort(list, newpivotindex+1, right); 
    }
    return;
}

int partition(int* list,int left, int right, int pivotindex)
{
int pivotvalue = list[pivotindex];
int temp;
int i;
int storeindex;

temp=list[pivotindex];
list[pivotindex]=list[right];
list[right]=temp;

storeindex=left;

for (i=left;i<right;i++)
{
    if (list[i] < pivotvalue)
    {
        temp=list[i];
        list[i]=list[storeindex];
        list[storeindex]=temp;

        storeindex++;
    }
}

temp=list[storeindex];
list[storeindex]=list[right];
list[right]=temp;

return storeindex;
}

void insertionsort(int* list, int left, int right)
{
int i;
int item;
int ihole;

for (i=left;i<=right;i++)
{
    item=list[i];
    ihole=i;
    while (ihole > 0 && list[ihole-1] > item)
    {
        list[ihole]=list[ihole-1];
        ihole--;
    }
    list[ihole]=item;
}

return;
} 
```

# linq - LINQ 查询（或 lambda 表达式）返回与列表匹配的记录

> ID：12906412
> 
> 赞同：1
> 
> 时间：2012-10-16T01:40:58.990
> 
> 标签：linq, lambda

我有一个字符串列表（从 Guid 转换而来），其中包含我想从表中提取的项目的 ID。然后，在我的 LINQ 查询中，我试图弄清楚如何使用 in 子句来提取该列表中的记录。这是 LINQ

```
var RegionRequests = (from r in db.course_requests
                      where PendingIdList.Contains(r.request_state.ToString())
                      select r).ToList(); 
```

它构建，但我得到一个运行错误：“System.NotSupportedException：LINQ to Entities 无法识别方法 'System.String ToString()' 方法，并且此方法无法转换为存储表达式”。我更愿意将 guid 与 guid 进行比较，但这让我无处可去。这可以转换为 lambda 表达式吗？如果这是最好的，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:39:54.183

LINQ to Entites 尝试将您的表达式转换为 SQL 语句。您的服务器不知道存储过程`ToString()`。

使固定：

```
var regionRequests =
    from r in db.course_requests.ToList()
    where PendingIdList.Contains(r.request_state.ToString())
    select r; 
```

随着`db.course_requests.ToList()`您强制 LINQ 实现您的数据库数据（如果是大表，您会遇到麻烦）并`ToString()`在对象上下文中执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T14:39:23.473

您说：我有一个字符串列表（从 Guid 转换而来）......

你不能将它们转换成字符串并将其保存为 List<System.Guid> 吗？然后你可以这样做（假设 PendingIdGuidList 是 List<System.Guid>：

```
var regionRequets = (from r in db.course_requests
                     join p in PendingIdGuidList on u.request_state equals p
                     select r).ToList(); 
```

编辑添加：

我使用以下代码对此进行了测试：

```
var db = new EntityModels.MapleCreekEntities();

List<System.Guid> PendingIdGuidList = 
    new List<System.Guid>() { 
        System.Guid.Parse("77dfd79e-2d61-40b9-ac23-36eb53dc55bc"), 
        System.Guid.Parse("cd409b96-de92-4fd7-8870-aa42eb5b8751") 
    };

var regionRequets = (from r in db.Users
                     join p in PendingIdGuidList on r.Test equals p
                     select r).ToList(); 
```

用户是我数据库中的一个表。我添加了一个名为 Test 的列作为唯一标识符数据类型，然后使用以下 Guid 修改了 2 条记录。

我知道这并不完全是 OP 正在做的事情的 1:1，但非常接近。这是分析的 SQL 语句：

```
SELECT 
[Extent1].[ID] AS [ID], 
[Extent1].[UserLogin] AS [UserLogin], 
[Extent1].[Password] AS [Password], 
[Extent1].[Test] AS [Test]
FROM  [dbo].[Users] AS [Extent1]
INNER JOIN  (SELECT 
    cast('77dfd79e-2d61-40b9-ac23-36eb53dc55bc' as uniqueidentifier) AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable1]
UNION ALL
    SELECT 
    cast('cd409b96-de92-4fd7-8870-aa42eb5b8751' as uniqueidentifier) AS [C1]
    FROM  ( SELECT 1 AS X ) AS [SingleRowTable2]) AS [UnionAll1] ON [Extent1].[Test] = [UnionAll1].[C1] 
```

# haskell - 静态类型和惰性函数语言之间有什么关系？

> ID：12906416
> 
> 赞同：9
> 
> 时间：2012-10-16T01:42:35.343
> 
> 标签：haskell, types, functional-programming, scheme, lazy-evaluation

我很好奇静态类型和惰性函数语言之间的关系。例如，是否有可能拥有动态的惰性函数式语言？似乎所有的惰性函数式语言都是静态类型的（Haskell、Miranda 等），而所有动态函数式语言都使用严格的评估（Clojure、Scheme 等）。

特别是，关于懒惰评估的[维基百科文章写道：](http://en.wikipedia.org/wiki/Lazy_evaluation)

> 但是，使用惰性求值时，很难与异常处理和输入/输出等命令式特性结合起来，因为操作的顺序变得不确定。惰性求值会引入空间泄漏。

静态类型在防止空间泄漏方面起什么作用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-16T03:17:09.983

我根本不相信静态类型起作用。例如，考虑无类型的惰性语言[Lazy Racket](http://docs.racket-lang.org/lazy/index.html)。我没有听到任何迹象表明它以 Haskell（例如）没有的方式泄漏空间。

另一方面，副作用*是*一个问题，因为人类发现严格评估的评估顺序是（相对）自然的，而按需调用更难在心理上预测。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-16T04:52:43.727

> 静态类型在防止空间泄漏方面起什么作用？

类型可用于跟踪对象的生命周期，静态确保不存在泄漏。

一个例子是区域类型和其他效果类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-17T11:55:40.857

惰性求值和静态类型是独立的概念。

1.  **无类型**
    *   **惰性求值具有**[正常降阶策略](https://en.wikipedia.org/wiki/Normal_order_reduction#Normal_order)（或*按需调用*）的无类型 lambda 演算。总是首先评估最左边的 redex。
    *   [急切（严格）评估 具有应用降阶策略](https://en.wikipedia.org/wiki/Normal_order_reduction#Applicative_order)的非类型 lambda 演算。Lambda 项在替换为其他项之前总是会被归约。
2.  **打字**
    *   **惰性求值**Haskell 就是一个例子。
    *   **渴望评估**OCaml 就是一个例子。

* * *

粗略地说，评估是在程序运行时发生的事情。键入是在编译程序时发生的事情。

但是，打字系统和评估策略之间当然存在重要的对应关系：

> 如果项*M*简化为*N*和*M:σ*（*M*属于*σ*类型），则*N:σ*。

这意味着当我们运行具有某种类型*σ*的程序时，该值将具有相同的类型。没有这个属性，打字系统就真的没用了（至少对于编程来说）。这也意味着一旦我们在编译过程中键入了一个程序，我们在评估它时就不需要记住键入信息，因为我们知道结果将具有正确的类型。

* * *

关于您引用的维基百科文章。有两种不同的东西：

1.  势在必行的特征。这与打字系统无关。问题是，如果评估某些表达式在惰性设置中具有副作用（如大多数语言中的 I/O），则很难预测何时（如果有的话）会出现副作用。因此，一旦您进行了惰性评估，就几乎不可能拥有不纯的语言。

    一个例外是**[Clean](https://en.wikipedia.org/wiki/Clean_%28programming_language%29)语言**。它使用一种特殊的类型系统来处理惰性设置中的副作用。所以这里通过处理副作用在评估策略和类型系统之间存在一些联系：类型系统允许以我们可以保持惰性评估的方式处理副作用。

2.  空间泄漏。这是惰性求值的一个已知缺点。请参阅[构建未计算的表达式](http://www.haskell.org/haskellwiki/Memory_leak#Building_up_unevaluated_expressions)或[Ch. 25 Real World Haskell 中的分析和优化](http://book.realworldhaskell.org/read/profiling-and-optimization.html)。但这又与类型系统无关——你会在无类型语言中得到相同的行为。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-17T02:28:42.913

我认为，如果您从更一般的角度来看事物，则可以观察到静态类型和惰性函数式语言之间的自然关系。静态类型的主要目的是通知和提升编译器的功能；调查语言之间的静态-动态划分，它通常跟踪编译代码和解释代码之间的分裂。

懒惰的评估有什么意义？

Peyton-Jones 等人的一篇臭名昭著的回顾性文章将惰性评估描述为“头发衬衫”，它使语言保持纯粹的功能性。他的比喻恰如其分地传达了 Haskell 社区根深蒂固的指称语义理想主义。非严格评估的基本好处是它以促进这种指称范式的方式改变了构建代码的可能性。在 Bob Harper 和 Haskell 社区进行的臭名昭著的惰性评估辩论中，Harper 教授展示了惰性评估给实际程序带来的挑战——在 Lennart Augustsson 对惰性的辩护中，这一点最能说明这一点：

> “我把我对严格评估的最大抱怨留到了最后。严格评估在函数重用方面存在根本缺陷。[...] 有了严格的评估，你不能再板着脸告诉人们：不要使用递归，重用map、filter、foldr 等中的递归模式。它根本不起作用（一般来说）。[...] 严格的评估真的，从根本上阻止了你以你可以懒惰的方式重用函数。

对于他通过惰性求值实现函数重用的示例，Augustsson 提出，“*通过重用**and函数**来表达函数是很自然的。`any``map``or`* ”因此，惰性求值从这张图片中出现，作为一种成本相当高的语言特性，被包含在一种更自然的风格中的编码。

我们还需要什么来维持一种抽象的、指称的编码风格？一个强大的优化编译器可能会派上用场！因此，即使静态类型和惰性求值之间没有技术或必要的联系，这两个特性也是面向同一个目标的。他们经常一起出现并不奇怪。

# java - 在 Android 中读取 PDF 文档

> ID：12906417
> 
> 赞同：6
> 
> 时间：2012-10-16T01:42:42.883
> 
> 标签：java, android, api, pdf

这是我的第一个问题，或者更确切地说是问题。我在这所大学的最后一个学期，阅读 PDF 是我为我的论文开发的组件之一。

我一直在阅读有关阅读 pdf 文档的问题，但没有可靠的答案。我想知道**阅读PDF文档的方法有哪些？**我读到有可用的 API 可以读取 PDF 文档，如 PDFBox、[muPDF](http://www.mupdf.com/)和[iText](http://itextpdf.com/)。我还没有看到任何其他 API，但这是我在其他帖子中读到的。

这里的问题是第一个**PDFBox**我读到 PDFBox 因为 AWT Dependencies 而不能使用，而 android 没有 AWT 和 Swing 相关的类。PDFBox 是不可能的。**muPDF**我没有读过关于 muPDF 的任何内容，有人向我推荐过它，但我想知道它是否可以用来阅读 PDF 文档。**iText**这是我在 PDF 和 android 相关问题中遇到的最常见的 API。这里的问题是它的**许可证**？（如果我错了，请纠正我）我还没有尝试过这 3 中的任何一个，因为我想知道除了这 3 之外是否还有其他解决方案。

除了 API，如果我没记错的话，我认为**PDF 阅读器应用程序也可以使用？**如果可以使用，那么**如何使用？**. 我不是在寻找代码，而是对您如何做到这一点以及如何在应用程序中实现它的解释。

我想过另一种方式，但我不知道这是否可能。如何将 PDF 文档转换为 .txt 或 .doc 文件？安卓里面。就像当我在 android 中加载 PDF 文档时，代码会将该 PDF 文档转换为 .txt / .doc 文件，并且应用程序将从 .txt / .doc 文件而不是 PDF 文档中搜索和提取文本。

如果您问我为什么需要这种组件，因为我正在开发一个应用程序，该应用程序将使用 Android 从 PDF 文档中**搜索**和**提取文本。**

这是我的问题：

1.  在 Android 中阅读 PDF 文档的方法有哪些？
2.  您使用这种方法有什么经验？
3.  你是怎么用这种方法做到的（只是一个流程/解释就可以了）？
4.  如果该方法具有许可证，将来会出现什么问题？

PS：如果我错了，请纠正我。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:25:23.910

这是一个非常特定于 iText 的答案，因此它不能回答您的所有问题，但它可能仍然对您有所帮助。

> 在 Android 中阅读 PDF 文档的方法有哪些？

我使用 iText java 绑定（继续阅读以了解 LGPL 许可）

> 您使用这种方法有什么经验？

伟大的！它涵盖了与 PDF 相关的所有内容。（旧版本可能略有不同）

> 你是怎么用这种方法做到的（只是一个流程/解释就可以了）？

我认为这个问题与您想到的“其他方式”有关，因此它与 iText PDF 库无关？

> 如果该方法具有许可证，将来会出现什么问题？

我仍然鼓励您使用 iText 的更新版本，但是如果您使用 iText 2.1.7 或更早版本，它属于旧的 LGPL 许可证，并且有更多的自由支配权，更适合商业或私人/封闭使用，没有真正的问题。据我所知，您所追求的所有功能都在 2.1.7 版本中可用。

当前版本的 iText 的 AGPL 许可证相当不错，据我了解，如果共享代码是没问题，那么最新版本的 iText 值得研究。

* * *

参考：

LGPL 许可证：[http ://www.gnu.org/licenses/lgpl.html](http://www.gnu.org/licenses/lgpl.html)

iText AGPL 许可证：http: [//itextpdf.com/terms-of-use/agpl.php](http://itextpdf.com/terms-of-use/agpl.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:32:14.560

我还在开发一个 Android 应用程序，我需要在我的 android 应用程序中打开 PDF 文件。首先，我考虑通过使用外国 API 来做到这一点。我尝试使用mupdf，但体验不是很好。

然后我们的团队负责人建议我先在你的设备中安装一个pdf查看器应用程序，然后使用代码通过安装的pdf查看器应用程序打开pdf。

您可以从 gogle play 轻松下载 pdf 查看器应用程序，然后您可以使用以下代码在您的应用程序中打开 pdf，

```
 File file = new File("/sdcard/MyPDFfile.pdf");
                Uri path = Uri.fromFile(file);
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setDataAndType(path, "application/pdf");
                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(intent); 
```

此代码将自动在您的设备中查找已安装的 pdf 应用程序，并将意图传递给该应用程序以打开 pdf 文件。

# c# - 有什么方法不必在每个 ToString 调用中包含 CultureInfo.InvariantCulture 吗？

> ID：12906418
> 
> 赞同：1
> 
> 时间：2012-10-16T01:42:45.950
> 
> 标签：c#, refactoring, resharper

`CultureInfo.InvariantCulture`如果我没有在我的每个 ToString 调用中指定或其他文化，ReSharper 总是生我的气。该应用程序目前只有英文版，但展望未来总是好的。有没有办法指定应用程序设置，以便所有`ToString`调用默认使用`InvariantCulture`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T01:51:59.863

一种简单的方法...创建扩展方法

```
public static string MyToString(this string x)
{
    return x.ToString(CultureInfo.InvariantCulture);
} 
```

不过给它一个更好的名字:)

# git - 不包括 node_modules 文件夹时出现错误 500

> ID：12906423
> 
> 赞同：0
> 
> 时间：2012-10-16T01:43:49.073
> 
> 标签：git, node.js, heroku

**最后更新**

似乎我的一个依赖项，还不是 1.0，在 2 个版本之间更改了它的 API。我的本地版本已经过时，当推送到 Heroku 时，Heroku 下载了最新版本，API 更改导致我的应用程序崩溃。

**结论**：当使用尚未稳定的库（未达到 1.0）时，请坚持使用特定版本。

谢谢你们试图帮助我。

==================

使用 Node 0.8.latest，表达 3.latest。

我的一条路线在本地完美运行，但在部署应用程序时给了我 500 错误。错误消息非常特定于应用程序，但不合逻辑。这是一个 TypeError，告诉我某些东西（应该定义的）是未定义的。为了让它工作，我发现的唯一奇怪的解决方案是`node_modules`从 .gitignore 中删除并在 git 下跟踪它。在heroku上推送时，不会出现错误，并且网址正常工作

当您知道我没有更改 node_modules 文件夹中的任何代码时，它开始变得奇怪。我还通过将本地与推送到 heroku 时生成的模块列表进行比较来比较本地和“heroku”安装的依赖`npm ls`项，因为它会重建依赖项，因为它们是`.gitignore`'d。我看到一些`invalid`用`npm ls`. 这个包都不在我的`package.json`文件中，它们是我的包的依赖项`package.json`。即，`connect`本地为 2.4.4，heroku 上为 2.5.0，`send`本地为 0.0.4，heroku 上为 0.1.0，`emitter-compnonent`本地为 0.0.1，heroku 上为 0.0.5。其余部分完全相同。

需要注意的另一件事是错误堆栈跟踪指向一个模块，该模块在两个环境中具有相同的版本，并且不依赖或不依赖于具有不同版本的模块。因此，即使是微小的依赖差异也不应该是问题的原因。

但是，我看不出问题出在哪里，我想避免跟踪我的`node_modules`文件。还是我应该？

**更新**

根据 Hector Correa 的要求，这是我的 package.json 文件

```
{
  "name": "myapp",
  "version": "0.1.0",
  "dependencies": {
    "express": "3.0.x",
    "mongoose": "3.0.x",
    "superagent": "0.9.x",
    "oauth": "0.9.x",
    "querystring": "0.1.x",
    "consolidate": "~0.4.0",
    "mustache": "~0.6.0",
    "singly": "*",
    "underscore": "~1.4.1"
  },
  "devDependencies": {
    "mocha": "1.4.x",
    "supertest": "0.1.x"
  },
  "engines": {
    "node": "0.8.x",
    "npm": "1.1.x"
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T06:00:25.143

下面是`package.json`Heroku**中的工作示例**

```
{
    "name": "MyApp"
    , "version": "0.0.1"
    , "dependencies": {
          "express": "3.x.x"
    }
    , "devDependencies": {
        "mocha": "*"
        , "should": "*"
        , "supervisor": "*"
        , "superagent": "*"
        , "request": "*"
    }
    , "engines": {
        "node": "0.8.x"
        , "npm": "1.1.x"
    }
} 
```

# three.js - Three.js - 指定纹理时未加载 collada 模型

> ID：12906427
> 
> 赞同：2
> 
> 时间：2012-10-16T01:44:01.803
> 
> 标签：three.js, collada

我尝试使用 three.js collada 加载器加载转换后的 collada 模型（obj -> collada [在最大打开时没有问题，包括工作 uvs]）。使用开源 3d 模型转换器 assimp 转换模型。

我注意到的一件事是转换后的 collada 模型在孩子里面有孩子，但我听说这没问题。但是，如果我将材质更改为具有纹理的材质，则会收到错误消息：“TypeError: uv2i is undefined”。

只要我不使用模型加载的纹理。 [https://dl.dropbox.com/u/2705276/bachelorShowcases/001/webGL_museum_wire.html](https://dl.dropbox.com/u/2705276/bachelorShowcases/001/webGL_museum_wire.html)

指定纹理时未加载模型： [https ://dl.dropbox.com/u/2705276/bachelorShowcases/001/webGL_museum.html](https://dl.dropbox.com/u/2705276/bachelorShowcases/001/webGL_museum.html)

这是一个错误还是我做错了什么？

```
function load( model ){

loader.load( 'https://dl.dropbox.com/u/2705276/bachelorShowcases/001/xerox404_webglCONV.dae', createScene1 );

}

function createScene1( geometry ) {

dae = geometry.scene;
mesh = dae.children[0].children[0];
mesh.material = new THREE.MeshPhongMaterial({map:THREE.ImageUtils.loadTexture('https://dl.dropbox.com/u/2705276/bachelorShowcases/001/xeroxD.png')});

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:04:34.243

如果您检查控制台，您将看到此错误：

```
webGL_museum.html:461
Uncaught TypeError: Cannot read property 'u' of undefined three.js:17814 
```

这基本上意味着您的模型没有 UV。为了将纹理与模型一起使用，它需要具有 UV。

# python - 如何将列表保存为 Python 中的文件？

> ID：12906436
> 
> 赞同：0
> 
> 时间：2012-10-16T01:46:13.440
> 
> 标签：python, save

我创建了一个简单的程序，可让您输入一组数字，然后根据该人提供的数据创建一个随机生成的对列表。完成后如何保存数据（作为 Windows 文件）？这是我的代码：

```
import random as ran
import easygui as eg
nList=vList=eg.multenterbox(msg="Enter the names of the people:"
                , title="Random Pair Generator"
                , fields=('Name:', 'Name:','Name:','Name:','Name:','Name:','Name:','Name:','Name:','Name:','Name:','Name:','Name:','Name:','Name:','Name:','Name:','Name:','Name:','Name:',)
                , values=['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20']
                )

index=0
x=''
y=''
pList=[]
pair=''

while not(index==len(nList)):
   x=nList[index]
   y=ran.choice(vList)
   pair=x+'; '+y
   pList.insert(index, pair)
   vList.remove(y)
   index= index+1

    eg.textbox(msg="These are the pairs generated."
                , title= "Random Pair Generator"
                , text= str(pList)
                , codebox=0
                ) 
```

我只想将 pList 保存为文件，放在我电脑上的任何地方（最好是我可以指定的地方）。此外，这个循环会产生一个问题。它不会引发语法或任何错误，但输出不是我想要的。

它的作用是使用 nList 中的每个值，然后从 vList 中选择一个随机值，然后将它们作为一个对象放入 pList 中。然而，问题出现了，当我让它从 vList 中删除“y”的输出时，它也会从 nList 中删除它。

示例：如果 nList 包含 5 个对象：[1, 2, 3, 4, 5] 并且 vList 具有相同的对象 [1, 2, 3, 4, 5]。它会从 vList 中为 nList 中的每个值选择一个随机数。但是，一旦从 vList 中选择了一个变量，它就会从列表中删除。问题是说 pList 以 [1; 2] 其中1；2 是一个对象，下一个对象将从 3 开始。它会跳过 2，因为 2 已经用作“y”值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:32:36.263

我不清楚你是想写成`pList`纯文本，还是写成以后可以轻松重新打开的列表......

第一种情况很简单：

```
f = open("path/your_filename.txt", 'w') # opening file object for writing (creates one if not found)
f.write(str(pList))                     # writing list as a string into your file
f.close()                               # closing file object 
```

您不能将非字符串 Python 对象直接写入文件。如果您也想保留对象类型（以便稍后加载），最简单的方法之一是使用`pickle`：

```
import pickle

f = open("/path/your_filename.pkl", 'w')
pickle.dump(f, pList)
f.close() 
```

并将其加载为：

```
import pickle

f = open("/path/your_filename.pkl", 'r') # opening file object for reading
pList = pickle.load(f)
f.close() 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T03:06:35.727

如果您只想以与 中显示的格式相同的格式保存对列表，`eg.textbox`请在程序末尾添加如下内容：

```
filename = eg.filesavebox(msg=None
                        , title='Save Pair List'
                        , default="pairs.txt"
                        , filetypes=['*.txt']
                        )

with open(filename, 'wt') as output:
    output.write(str(pList)+'\n') 
```

您可以将每对列表写入输出文件的单独一行，如下所示：

```
with open(filename, 'wt') as output:
    for pair in pList:
        output.write(pair+'\n') 
```

使用该`with`语句意味着文件将在它控制的代码块完成后自动为您关闭。

# c# - 如何干燥这两个“while 条件”？

> ID：12906439
> 
> 赞同：0
> 
> 时间：2012-10-16T01:47:11.317
> 
> 标签：c#, while-loop, dry

我有这样的功能（`parent`并且`formToBeShown`是 WinForms 表单实例）：

```
if (parent == null)
    while (!formToBeShown.IsDisposed)
        Do();
else
    while (!parent.IsDisposed && !formToBeShown.IsDisposed)
        Do(); 
```

我觉得这些非常不雅。我希望该`Do`函数只调用一次。如果我可以将所有条件合并到一个 while 循环中，甚至更好。不知道我是不是脑子有屁，但我想不出办法来实现这一点。一些想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T01:50:47.320

我认为使用下面的代码，您只能使用一次 while 循环。

```
while (!formToBeShown.IsDisposed && (parent == null || !parent.IsDisposed))
        Do(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T01:56:22.593

好吧，让我们从逻辑上考虑一下。

第一个循环条件可以写成如下：

```
(parent == null && !formToBeShow.IsDisposed) 
```

第二个循环的条件是：

```
(!parent.IsDisposed && !formToBeShown.IsDisposed) 
```

你基本上有 3 个布尔变量：

让 A: parent == null 让 B: !formToBeShow.IsDisposed 让 C: !parent.IsDisposed

现在您可以简化为

```
// Loop1 || Loop2  call Do() When:
(A && B) || (C && B) 
```

使用布尔逻辑的规则，这变成： B && (A || C)

```
while(!formToBeShow.IsDisposed && (parent == null || !parent.IsDispoed))
    Do(); 
```

您需要确保首先检查 parent == null 检查它可能会缩短并避免尝试取消引用 null。

但是，这有一个问题，您通过在每个循环上检查 (parent == null) 来做额外的工作。所以从技术上讲，如果你想把它带出循环并写不止一个，你也许有理由。虽然，对于如此简单的事情，我可能更喜欢单循环。

# bash - Bash：屏幕参数被错误解释

> ID：12906446
> 
> 赞同：0
> 
> 时间：2012-10-16T01:48:30.393
> 
> 标签：bash, gnu-screen

我正在尝试使用`screen -dmS nameofscreen command`. 这本身就有效，但是当我使用命令时，`&&`它`|`似乎解释错了。

例子：`screen -dmS screen1 echo test && ls -al`

它似乎被解释为`(screen -dmS screen1 echo test) && (ls -al)`，我正在寻找它被解释为`screen -dmS screen1 (echo test && ls -al)`.

这是怎么做到的？如果我在要传递的命令周围使用 ()，屏幕不接受它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:52:51.867

括号和`&&`和`||`由外壳解释，而不是由屏幕解释。要让这些运算符在屏幕中工作，您需要一个显式的子外壳。

```
screen -dmS screen1 sh -c 'echo test && ls -al' 
```

# debugging - 如何在 Net-SNMP agentX 子代理中找到段错误的崩溃站点

> ID：12906449
> 
> 赞同：0
> 
> 时间：2012-10-16T01:49:08.693
> 
> 标签：debugging, segmentation-fault, snmp

我试图了解 Centos 64 位上 agentX 中的随机段错误。随机我的意思是子代理除了检查是否有任何事情要做之外几乎没有做任何事情 - 它所属的服务器处于空闲状态并且已经有一段时间了。我有一个堆栈跟踪说崩溃发生在 agentx_open_session+0x120。正在使用的 Net-SNMP 版本是使用 yum 获得的，因此它没有调试符号，但我知道它是 5.5.41.el6_3.1.x86_64。我想知道在哪里可以找到此版本的调试符号以及如何使用它们来定位 Net-SNMP 代码中的崩溃站点。我没有核心文件——只有堆栈跟踪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:09:19.837

您需要为此启用 CentOS Debuginfo 存储库。

[直接安装 RPM，](http://debuginfo.centos.org/6/x86_64/net-snmp-debuginfo-5.5-41.el6.x86_64.rpm)或者，首选方式，通过设置`enabled=1`.`/etc/yum.repos.d/CentOS-Debuginfo.repo`

之后，您就可以运行一个简单的`yum install net-snmp-debuginfo`.

然后，要生成核心文件，您需要为运行 net-smnpd 的用户启用核心文件。不幸的是，对于 CentOS，这是用户`root`。因此，要仅为此会话启用核心文件，最好将一个添加`ulimit -c unlimited`到 net-snmpd 的 startup-file `/etc/init.d/snmpd`。**只是为了测试**。您确实需要稍后再次删除它。

或者，可能更好的是，关闭 net-snmpd，启动 root-shell，运行`ulimit`，然后手动启动 snmpd。如果您可以可靠地重现问题，此方法将为您省去清理过程。

不幸的是，我不能告诉它要转储核心的位置，但我相信你会找到它。

# python - 为什么转换后的数据需要 4 倍以上的空间来使 Python 中的 pandas 中的变量翻倍

> ID：12906450
> 
> 赞同：0
> 
> 时间：2012-10-16T01:49:16.917
> 
> 标签：python, pandas

我对 pandas DataFrame 中的一些变量执行了一些简单的 z 变换。在数据框中的总共 216 列中，我转换了其中的 196 列，然后将 197 连接到原始的 216 列，总共 412 列。

然后我使用该`to_csv`函数将新数据帧写入 CSV 文件。原始数据约为 300MB，而新数据集为 1.2GB。添加不到两倍的列会导致最终文件的大小增加大约 4 倍，这似乎很奇怪。

代码是：

```
import pandas as pd

full_data = pd.read_csv('data.csv')

names = full_data.columns.tolist()
names = names[16:-2]
len(names) #197 as expected
transform = (full_data[names] - full_data[names].mean())/full_data[names].std() #Transform has 197 columns as expected. 

column_names = transform.columns.tolist()

new_names = {}
for name in column_names:
    new_names[name] = name + '_standardized'

transform = transform.rename(columns=new_names)

to_concat = [full_data, transform]

final_data = pd.concat(to_concat, axis=1)

final_data.to_csv('transformed_data.csv', index = False) 
```

第一行数据看起来一切正常。此外，所有三个 DataFrame 之间的行数相同。

我错过了什么吗？有没有更有效的方法将 DataFrames 写入 CSV 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:28:57.190

CSV 存储数据的字符串表示形式，因此它不一定会随着列数以明显的方式缩放，除非所有列在字符串表示形式中具有大致相同的大小。如果您的原始数据只有几个小数位，那么您的 CSV 文件的大小可能会大大增加，这是很合理的。如果您读取诸如 0.1、0.2、3、1.7 之类的数字，然后对它们进行 z 缩放，您可能会得到包含许多小数位的结果。作为一个简单的例子，我这​​样做了：

```
>>> df = pandas.DataFrame([[2, 3, 5]], columns=["A", "B", "C"])
>>> df
   A  B  C
0  2  3  5
>>> df.to_csv('someCSV.csv')
>>> df**0.5
          A         B         C
0  1.414214  1.732051  2.236068
>>> (df**0.5).to_csv('someCSV2.csv') 
```

我根本没有在数据中添加任何行或列，只是取了平方根，但第二个 CSV 是第一个的 4 倍，因为第二个有很多小数位，需要更多字节才能写出以字符串形式。当您除以标准偏差时，您可能会得到类似的长小数。

# html - 将菜单栏的阴影带到背景图像的前面

> ID：12906453
> 
> 赞同：0
> 
> 时间：2012-10-16T01:49:57.493
> 
> 标签：html, css, xhtml

如何使菜单阴影出现在 div 背景图像的前面？

![](../Images/da41cae343f20313f2adfad83717af73.png)

这是我的 CSS

```
nav {
    width:900px;
    margin: 4px auto 0px 8%;
    font-size: 16pt;
    padding-bottom: 0px;

  -moz-box-shadow:    7px 8px 3px 1px black;
  -webkit-box-shadow: 7px 8px 3px 1px black;
  box-shadow:         7px 8px 3px 1px black;
}

.mainContent {
    margin: 0px auto;
    width: 1200px;
    height:100%;
    padding-top:0px;   

    background-color: #0e23a4;
    background-image: -webkit-gradient(linear, left top, left bottom, from(#0e23a4), to(#999999));
    background-image: -webkit-linear-gradient(top, #0e23a4, #999999);
    background-image: -moz-linear-gradient(top, #0e23a4, #999999);
    background-image: -o-linear-gradient(top, #0e23a4, #999999);
    background-image: linear-gradient(to bottom, #0e23a4, #999999);   

  -webkit-box-shadow: 0px 15px 9px 8px black;
  box-shadow: 0px 15px 9px 8px black;

}

.bodyMain {
    width: 100%;
    height:100%;

    border:1px solid white;
    background-image:url("/Content/images/phoenix.jpg");
} 
```

HTML

```
 <nav>
        <ul id="menu1">
            ...
        </ul>
    </nav>
    <div class="bodyMain">
        <div class="mainContent">
            ...
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T03:38:12.270

尝试将 a 添加`z-index:9;`到您的导航部分。

这会将`nav`部分带到顶层。

# ruby-on-rails - bootstrap inline-append 在搜索表单上不起作用

> ID：12906458
> 
> 赞同：0
> 
> 时间：2012-10-16T01:50:19.290
> 
> 标签：ruby-on-rails, twitter-bootstrap, haml

我正在尝试使用引导程序将按钮附加到搜索栏内， http: [//imgur.com/vUhXh](http://imgur.com/vUhXh)但它似乎不起作用。它正在 educomer.herokuapp.com 上显示，我使用的代码是

```
 %form.form-search
        .input-append
            %input.span3.search-query{:placeholder => "Search Food", :type => "text"}
            %button.btn{:type => "submit"}
                %span.icon-search 
```

我尝试创建一个全新的应用程序只是为了查看我的代码是否有问题，但这不是问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:00:10.510

你用的是什么版本的引导程序？我将以下内容添加到[您的 Heroku 网站](https://educomer.herokuapp.com/)：

```
<div class="input-prepend">
  <span class="add-on">@</span><input class="span2" id="prependedInput" size="16" type="text" placeholder="Username">
</div>
<div class="input-append">
  <input class="span2" id="appendedInput" size="16" type="text"><span class="add-on">.00</span>
</div> 
```

它按预期显示。Bootstrap 的[变更日志](https://github.com/twitter/bootstrap/wiki/Changelog)说“支持输入前置/附加组件中的按钮”是在 2.0.2 版中添加的。

# c++ - 分配大量内存会出错？为什么？

> ID：12906469
> 
> 赞同：1
> 
> 时间：2012-10-16T01:52:11.990
> 
> 标签：c++, c, visual-c++

我已经申请了高分辨率图像。

当我想分配大量内存时，系统显示“应用程序已请求运行时以不寻常的方式终止它”。但我想要的是，分配的指针必须返回 0 或 NULL 我可以显示我的消息。它不返回零/NULL 为什么？任何想法？我检查了调试，在继续 MessageBox 之前，它给出了这个错误。在这里做什么来显示我的信息？

有没有办法检查用户分配的内存是否比计算机 PC 容量大？

谢谢。

```
ImageW = 2000;
ImageH = 2000;
point *Img = NULL;
Img = new point[ImageW*ImageH];
if(Img== NULL)
{   
MessageBox(0, "Your computer memory is too small.", "Error", MB_ICONERROR | MB_OK);
return; 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T01:59:07.700

使用[nothrow](http://en.cppreference.com/w/cpp/memory/new/nothrow)：

```
Img = new (nothrow) point[ImageW*ImageH];
//        ^^^^^^^^^^ 
```

现在，如果分配失败，您将得到一个空指针，而不是异常。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T01:54:44.940

Unlike `malloc` in C which returns `NULL` on failure, `new` in C++ can throw a std::bad_alloc exception which is what you're seeing. See [http://en.cppreference.com/w/cpp/memory/new/operator_new](http://en.cppreference.com/w/cpp/memory/new/operator_new) for reference

To handle this exception you can use try/catch:

```
try {
    Img = new point[ImageW*ImageH];
}
catch (std::bad_alloc const& e) {
    // handle failure here, like displaying a message
} 
```

Here's documentation for the `std::bad_alloc` exception: [http://en.cppreference.com/w/cpp/memory/new/bad_alloc](http://en.cppreference.com/w/cpp/memory/new/bad_alloc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T01:55:51.040

C++ "new" does not return null on failure, it calls the new handler.

# jquery-mobile - JqueryMobile在追加后失去了样式

> ID：12906472
> 
> 赞同：1
> 
> 时间：2012-10-16T01:52:21.307
> 
> 标签：jquery-mobile

有人可以帮我吗

[http://jsfiddle.net/wwRNh/52/](http://jsfiddle.net/wwRNh/52/)

如何附加元素并保留其样式？

我试过 $(....).trigger(create);

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:33:54.977

在添加对象之后，使用以下命令触发 的`refresh`事件：`listview`

```
$("ul").listview("refresh"); 
```

然后你应该有以下 JS 代码：

```
$(document).ready(function(){
    $("#btn1").click(function(){

        $("ul").append("<li><a href="+"#page2"+">Page Two</a></li>");

        // Trigger refresh event
        $("ul").listview("refresh"); 

    });
}); 
```

# c++ - 为什么 std::get 不是 std::tuple 等人的成员函数？

> ID：12906475
> 
> 赞同：3
> 
> 时间：2012-10-16T01:52:49.780
> 
> 标签：c++, c++11, getter

> **可能重复：**
> [std::tuple get() 成员函数](https://stackoverflow.com/questions/3313479/stdtuple-get-member-function)

`std::get`对于不同的同构和异构容器，例如for ，似乎有单独的重载[`std::tuple`](http://en.cppreference.com/w/cpp/utility/tuple/get)。

这似乎有点尴尬；更明显的选择是如果有`std::tuple::get()`一个模板参数（索引）。如果这个选择是一时兴起，我会感到惊讶，所以我想知道为什么标准化委员会会选择让它成为一个自由函数而不是一个成员函数，尽管后者是一个更自然的接口。

有什么好的理由吗？

# typescript - 有人可以解释我从百科全书样本中不理解的双重类型断言吗？

> ID：12906479
> 
> 赞同：0
> 
> 时间：2012-10-16T01:53:50.897
> 
> 标签：typescript

data.js 中的 TypeScript Encyclopedia 示例代码使用了一个似乎没有完成任何事情的双类型断言：

```
export interface Group {
  key: string;
  title: string;   
}

interface Groups {
  [idx: string]: Group;
}

var groupsHash = **<Groups>(<any>**{ 
  recent: { key: 'recent', title: 'Recent' },
  favorites: { key: 'favorites', title: 'Favorites' },
  today: { key: 'today', title: 'Today' },
  nearby: { key: 'xxnearby', title: 'Nearby' }
}); 
```

事实上，这些类型断言的使用似乎使 groupsHash 变量的使用更加困难，因为它向 Intellisense 添加了各种东西，而不是如果这些类型断言不存在会发生什么。有人可以向我解释吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:54:52.547

`<any>`不需要强制转换并且不会影响任何东西，因为对该对象的唯一引用是通过编译器推断为类型的变量`groupHash`来考虑强制`Groups`转换`<Groups>`。我不确定为什么编写代码的人以这种方式编写代码，因为直接转换为 Groups 似乎在我的尝试中工作得很好——也许代码是为需要它的早期版本的编译器编写的？

话虽如此，当您说“它向 Intellisense 添加各种东西”时，我不确定您的意思，因为编译器在 groupHash 上应该拥有的唯一类型信息是它引用了一些实现 Groups 接口的对象。当我在玩这段代码时，将中间转换为“any”根本没有任何区别。VS 2012 Express 没有给我 groupHash 的自动补全功能，直到我使用带有字符串键的括号属性访问表示法，此时它按预期列出了 Group 的“key”和“title”属性。

编辑：刚刚意识到您可能根本没有类型转换，此时“groupHash”的类型将是该对象文字的完整推断签名（因此定义中的所有 4 个属性都将由智能感知列出）。

没有这样做的原因是因为这个想法是“groupHash”旨在用作哈希表 - 因此您可以在运行时动态添加和删除属性。虽然您仍然可以以这种方式使用它而无需将其转换为 Groups 接口，但您打算如何使用该对象的沟通并不那么清楚。即，新程序员查看代码，看到它上面有这 4 个属性，假设这种静态类型将在程序的生命周期内得到维护，然后在运行时突然发现对象看起来完全不同，因为添加了东西并从中删除。

# javascript - PhoneGap 给出 NSURLErrorDomain 错误 -999

> ID：12906483
> 
> 赞同：3
> 
> 时间：2012-10-16T01:54:30.847
> 
> 标签：javascript, cordova

一旦我将代码转储到`www`PhoneGap 项目的文件夹中，我就会得到：

> 无法加载网页并出现错误：操作无法完成。（NSURLErrorDomain 错误 -999。）

我正在使用以下内容：

*   Mac OSX 狮子
*   电话间隙 2.1
*   Xcode 4.5
*   iOS 6 iPhone 模拟器
*   解析 SDK（基于 BackboneJS）
*   jQuery 移动

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T09:17:16.790

当我从 Cordova (PhoneGap) 2.2 升级到 2.7 时，我遇到了类似的错误。

我遇到的问题是 Cordova 2.7 在启动期间没有正确处理客户端重定向。我的解决方案是修改`CordovaLib/Classes/CDVWebViewDelegate.m`以处理重定向情况。

这是我的拉取请求：

[https://github.com/apache/cordova-ios/pull/57/files](https://github.com/apache/cordova-ios/pull/57/files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:55:10.877

我有一个用于保存位置的重定向，但这并不是那么有用。无论如何，这导致了问题，所以一点注释就可以了：

```
// resume from last location
// if(window.localStorage.lastLocation) {
//     window.location = window.localStorage.lastLocation;
//     delete window.localStorage.lastLocation;
// } 
```

# ios - iOS，如何制作一个没有边框、没有跨度的自定义uibarbuttonitem？喜欢这张照片吗？

> ID：12906491
> 
> 赞同：0
> 
> 时间：2012-10-16T01:55:33.067
> 
> 标签：ios, uibarbuttonitem, uitoolbar, uibarbuttonitemstyle

iOS，如何制作一个没有边框、没有跨度的自定义uibarbuttonitem？

喜欢这张照片吗？

![在此处输入图像描述](../Images/b2f5a2ada13ddb0d87fd889b8530d618.png)

我不知道如何命名这种风格。所有这些按钮都在 UIToolBar 组件上。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T05:56:08.260

根据我的理解，在这种情况下最好使用段控制器，但如果你不想使用它，你可以通过以下方式将图像应用到你的栏按钮。

```
UIImage *image=[[UIImage imageNamed:@"barbuttonimage.png"] stretchableImageWithLeftCapWidth:50 topCapHeight:10];
// Specify width & height as per your need..

CGRect frameimg = CGRectMake(0, 0, image.size.width,image.size.height);

UIButton *someButton = [[UIButton alloc] initWithFrame:frameimg];

[someButton setBackgroundImage:image forState:UIControlStateNormal];

[someButton addTarget:self action:@selector(myBarbuttonEvent)
         forControlEvents:UIControlEventTouchUpInside];

 UIBarButtonItem *myBarbutton =[[UIBarButtonItem alloc] initWithCustomView:someButton];
    self.navigationItem.leftBarButtonItem=mailbutton;

[someButton release]; 
```

希望这对您有所帮助。谢谢。

# javascript - 'null' is null or not a object

> ID：12906495
> 
> 赞同：0
> 
> 时间：2012-10-16T01:55:54.220
> 
> 标签：javascript, jquery, internet-explorer

I have a line of code that doesn't work in IE8 and lower.

```
var mediaQueryId = getComputedStyle( document.body, ":after" ).getPropertyValue("content");
var mediaQueryId = mediaQueryId.replace( /"/g, '' ); // 'null' is null or not a object 
```

I tried to use this fix in order to make it work but I get this error:

> 'null' is null or not a object

Here's my code:

```
if (!window.getComputedStyle) {
    window.getComputedStyle = function(el, pseudo) {
        this.el = el;
        this.getPropertyValue = function(prop) {
            var re = /(\-([a-z]){1})/g;
            if (prop == 'float') prop = 'styleFloat';
            if (re.test(prop)) {
                prop = prop.replace(re, function () {
                    return arguments[2].toUpperCase();
                });
            }
            return el.currentStyle[prop] ? el.currentStyle[prop] : null;
        }
        return this;
    }
} 
```

The website is [http://www.gablabelle.com/](http://www.gablabelle.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T02:20:35.937

```
getComputedStyle = function(){
    return el.currentStyle[prop] ? el.currentStyle[prop] : null;
    //                           you are returning null ----^
} 
```

...

```
getComputedStyle( ... ).getPropertyValue( ... )
null                   .getPropertyValue( ... ) 
```

空是空:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T02:28:29.360

```
var mediaQueryId = getComputedStyle( document.body, ":after" )
                      ?getComputedStyle( document.body, ":after" ).getPropertyValue("content")
                      :''; 
```

* * *

或类似的东西：

```
var foundStyle = getComputedStyle( document.body, ":after" );
if (foundStyle) {
   var mediaQueryId = foundStyle.getPropertyValue("content") || '';
   mediaQueryId = mediaQueryId.replace( /"/g, '' ); // 'null' is null or not a object
} 
```

# java - 在 glassfish 3.1.2 中将图像添加到表单身份验证

> ID：12906498
> 
> 赞同：1
> 
> 时间：2012-10-16T01:56:16.340
> 
> 标签：java, html, forms, authentication, glassfish

我正在尝试将图像添加到我的身份验证表单中，但安全凭据使其无法显示，即使该图像不是受限 URL 的一部分。

我是否对阻止我所有页面的安全描述符做错了什么？

这是我的 web.xml

```
<security-constraint>
    <display-name>activedir</display-name>
    <web-resource-collection>
        <web-resource-name>activedir</web-resource-name>
        <description/>
        <url-pattern>/activedir/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <description/>
        <role-name>USER</role-name>
        <role-name>ADMIN</role-name>
    </auth-constraint>
    <user-data-constraint>
        <description/>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint>
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>security</realm-name>
    <form-login-config>
        <form-login-page>/login/login.html</form-login-page>
        <form-error-page>/login/error.html</form-error-page>
    </form-login-config>
</login-config>
<security-role>
    <description/>
    <role-name>USER</role-name>
</security-role>
<security-role>
    <description/>
    <role-name>ADMIN</role-name>
</security-role> 
```

这是我的 glassfish-web.xml

```
<security-role-mapping>
   <role-name>ADMIN</role-name>
   <group-name>ADMIN</group-name>
<security-role-mapping>
   <role-name>ADMIN</role-name>
   <group-name>ADMIN</group-name>
</security-role-mapping>
 <security-role-mapping>
    <role-name>USER</role-name>
    <group-name>USER</group-name>
  </security-role-mapping>
 <class-loader delegate="true"/>
   <jsp-config>
   <property name="keepgenerated" value="true">
    <description>Keep a copy of the generated servlet class' java code.</description>
    </property>
 </jsp-config> 
```

我的文件夹树如下：

*   活动目录

    *   索引.jsp
    *   结果.jsp
*   登录

    *   登录.html
    *   错误.html
    *   标志.png
    *   样式.css

现在，当我进行身份验证时，它不会返回到我请求的网页，而是会重定向到图像。

我在这里做错了吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T02:05:03.630

尝试允许任何人读取登录目录

```
<security-constraint>     
   <display-name>login</display-name>     
   <web-resource-collection>         
       <web-resource-name>login</web-resource-name>         
          <description/>         
          <url-pattern>/login/*</url-pattern>     
   </web-resource-collection>     
   <auth-constraint>         
       <description/>         
       <role-name>*</role-name>
   </auth-constraint>     
   <user-data-constraint>         
       <description/>         
       <transport-guarantee>CONFIDENTIAL</transport-guarantee>     
   </user-data-constraint> 
</security-constraint> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T20:01:23.210

通过定义图像 URL 的完整路径，我能够在 Glassfish 4 上基于表单的登录页面中显示图像：

```
<img src="/login/img/html5.png" /> <-- no Image
<img src="https://localhost:8181/App/login/img/html5.png"/> <-- Image! 
```

请勿按照 rorrohprog 的建议将 web.xml 中的安全约束添加到登录目录（此问题的其他答案）。没有对文件夹的约束设置允许每个人都可以从中读取。

# javascript - 是否可以从 iPhone 智能横幅跟踪点击次数

> ID：12906502
> 
> 赞同：26
> 
> 时间：2012-10-16T01:57:13.530
> 
> 标签：javascript, iphone, html, ios

我们希望能够使用 Google Analytics 跟踪我们添加到我们网站的[iPhone 智能横幅的任何点击。](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)

用于添加智能横幅的元代码是：

`<meta name="apple-itunes-app" content="app-id=myAppStoreID">`

到目前为止，我已经尝试使用 javascript 转储页面 DOM 以查看是否有任何关联的 HTML，但似乎智能横幅位于 DOM 之外，并且可能在 safari 或浏览器应用程序级别？

理想情况下，我们希望使用基于标准浏览器的 javascript 谷歌分析跟踪代码，因为目前无法修改我们的应用程序本身以接受正在解析的参数。

**有谁知道我们如何跟踪来自智能横幅的点击以打开或安装应用程序？**

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-12-06T11:07:03.423

这是对此的更新。回答最初的问题：是的，您可以跟踪网站上智能应用横幅的点击次数。就是这样。

首先，Linkshare 会员是历史。[在此处](http://www.apple.com/itunes/affiliates/resources/)注册 PHG 会员

注册后，您将获得会员 ID。[在Smartapp Meta Tag](https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)中输入您的会员 ID，如下所示

```
<meta name="apple-itunes-app" content="app-id=311507490, affiliate-data=at=11m7as&ct=website_smartapp"/> 
```

其中 at=（您的会员 ID）和 ct=[活动类型（在此处输入任何文本供您参考）]

带有点击次数的 at 和 ct 值将显示在您的 PHG 仪表板上

希望这可以帮助

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-13T09:53:18.730

无法跟踪智能横幅的*点击次数*，但可以跟踪来自智能横幅的*安装次数。*您可以通过以下三种方式进行操作~~：~~

1) 使用[Tapstream](http://get.tapstream.com/23fV/)跟踪从网页到应用程序的安装。它甚至与谷歌分析集成。

2) 如果您有付费应用，可以使用affiliate-data 参数。您需要注册为[iTunes 附属公司](http://www.apple.com/itunes/affiliates/)（但如果您关心 iOS 分析，无论如何都应该这样做；这是衡量 iOS 转化率的唯一官方方法）。

这是美国附属合作伙伴 Linkshare 的说明。登录 Linkshare，点击菜单中的链接 -> 深度链接。选择“美国 iTunes、App Store、iBookstore 和 Mac App Store”作为您的广告商并粘贴 iTunes URL。你会得到一个这样的链接：

```
http://click.linksynergy.com/fs-bin/click?id=XXXXXXXXXXX&subid=&offerid=[...] 
```

“id=XXXXXXXXXX”部分是您的站点 ID。Linkshare 的合作伙伴 ID 是 30。所以把它放在你的智能横幅中：

```
<meta name="apple-itunes-app" content="app-id=311507490,
  affiliate-data=partnerId=30&siteID=XXXXXXXXX"/> 
```

其中 XXXXXXXXXX 是您的站点 ID。然后，Linkshare 可以告诉您收到了多少安装。

~~3）使用app-argument参数将数据从您的网页传递到您的应用程序，并自己记录安装次数。（您必须自己在自己的服务器上保留/管理日志，但至少您将拥有数据。）~~编辑：正如评论中指出的那样，app-argument 仅适用于您在应用程序打开时单击打开已安装; 它无助于*跟踪安装*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T19:57:22.983

不，不幸的是。

如果您将 iOS 模拟器（您也可以将您的实际设备）链接到 safari webkit 检查器，您会注意到完整的 HTML 正文存在于显示的横幅之外，这意味着您没有范围可以将跟踪事件附加到.

![网络检查员截图](../Images/74c38863f1178f7b3863289b09f8365f.png)

请注意，在此屏幕截图中，鼠标悬停在元素上，因此您会在左侧的模拟器中看到它突出显示。

[仅供参考，有关如何将桌面检查器连接到移动环境的详细信息，请参见此处（剧透，它非常有用）： http](http://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-using-web-inspector-to-debug-mobile-safari/) ://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-using-web-[检查员到调试-移动-safari/](http://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-using-web-inspector-to-debug-mobile-safari/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-31T14:43:26.580

我认为您将需要从应用程序而不是从网站上进行跟踪。如果您已经`application:openURL:sourceApplication:annotation:`在您的应用程序委托中实现了该方法，那么您应该能够从该方法中向谷歌分析发送一个事件。

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    [tracker sendEventWithCategory:@"uiAction"
                        withAction:@"openFromSmartBanner"
                         withLabel:[NSString stringWithFormat@"%@",[url absoluteString]
                         withValue:nil];
    return YES;
} 
```

这将在每次从智能横幅打开您的应用时触发，并告诉您它来自哪个 url（如果可从多个网站获得）。这只会在智能横幅显示`open`按钮时给你点击，而不是在它显示时给你点击`view`

# javascript - 同位素 - 在第一次加载中隐藏元素

> ID：12906504
> 
> 赞同：0
> 
> 时间：2012-10-16T01:57:35.930
> 
> 标签：javascript, jquery-isotope

按照这个关于[无限滚动](https://github.com/desandro/imagesloaded/issues/14#issuecomment-7210300)的说明，我能够隐藏第 2、3、4 页等中的新内容，直到它完成加载然后制作动画。现在我想实现这些相同的效果，但主要内容是第一页。有什么帮助吗？我正在使用的代码：

```
<script>
    $(function(){
      var $container = $('#boxes');
      $container.imagesLoaded( function(){
        $container.isotope({
          itemSelector : '.box' 
        });
      });  
</script>

<script>
$('#boxes').isotope({ 
 // options
   itemSelector : '.box',
   layoutMode : 'masonry'
    masonry : {
          columnWidth : 325
        },
});
</script>

<script>
   $(function(){
             var $container = $('#boxes');
             $container.imagesLoaded(function(){
                 $container.isotope({
                     itemSelector: '.box'
                 });
             });
              $container.infinitescroll({
        navSelector  : '#navigation',   
        nextSelector : '#navigation a#next', 
        itemSelector : '.box',    

        loading: {
            finishedMsg: 'no more pages to load.',
            img: 'http://i.imgur.com/qkKy8.gif'
                 }
             },
             function(newElements){ 
                 var $newElems = jQuery( newElements ).hide()
                 console.log('Elements Retrieved:');
                 var $newElems = $(newElements);
                 $container.imagesLoaded(function(){
                     $newElems.fadeIn(); // fade in when ready
           $container.isotope('appended', $newElems, function(){console.log('Appended');});
                 });
             });
         });

  </script> 
```

这[是博客](http://oratualt22.tumblr.com/)。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T17:29:22.440

我的意思是 - 在你的 CSS 中

```
#container {
    display: none;
} 
```

默认情况下隐藏#container，因此最初不会显示；然后，在您的脚本中，您只需输入

```
$container.show(); 
```

在你想展示的地方；例如，当第一页的所有内容都已加载时，或者当您第一次想要 .show() #container 时。简单的例子[在这里](http://jsfiddle.net/s7MT8/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-30T23:48:57.393

hide() 解决方案的小缺点（即显示：无）是这需要在布局之前发生，因为同位素不会布置隐藏元素，所以你可以在一瞬间看到最初的“混乱”，我发现不愉快。更好的解决方案是设置可见性：隐藏，然后进行布局，然后以可见性再次显示：可见。这还将容器边框设置为所有元素的大小。

# javascript - 提示用户输入字符串

> ID：12906507
> 
> 赞同：0
> 
> 时间：2012-10-16T01:58:50.210
> 
> 标签：javascript

我正在尝试编写一个脚本，提示用户输入包含由空格分隔的数字的字符串，然后提醒最小值、最大值和总和。

这是我到目前为止所拥有的：

```
var prompt = (“Enter a string containing numbers separated by spaces”); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:25:31.440

```
// Some variables we'll be using​
var numbers = "", arr, min, max, sum = 0;

// Don't let them pass without valid input
while ( ! numbers.test(/^(\d+\s?)+$/) ) {
    numbers = prompt( "Enter some numbers, separated by spaces." );
}

// Determine min, max, and the sum
arr = numbers.split(" ");
​min = Math.min.apply(null, arr);
max = Math.max.apply(null, arr);

for ( var i = 0; i < arr.length; i++ ) {
    sum += (+arr[i]);
}

// Output results into console
console.log( min, max, sum ); 
```

小提琴：http: [//jsfiddle.net/GUcgj/](http://jsfiddle.net/GUcgj/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T02:14:39.410

```
var input = prompt('Enter a string containing numbers separated by spaces').split(' ');
var min = Math.min.apply(Math, input);
var max = Math.max.apply(Math, input);
var sum = 0;
for(var i=0; i<input.length; i++){ 
    var n = parseFloat(input[i], 10); // depending on expected input
    sum += n ? n : 0;  // add if number
}

alert('min: '+min+'\nmax: '+max+'\nsum: '+sum); 
```

==> [jsfiddle](http://jsfiddle.net/rjHqm/)

**编辑：**

* * *

如果您不确定是否仅给出有效输入，则必须手动检查数组而不是使用`Math.min`and `Math.max`，这可能会导致`NaN`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T02:13:17.087

```
var input = prompt("Enter a string containing numbers separated by spaces");​
var ary = input.split(" "); 
```

这会将输入加载到数组`ary`中。但是，在进行任何进一步处理之前，您需要修剪任何空白并检查输入是否正确。

# c - 带指针的结构

> ID：12906508
> 
> 赞同：0
> 
> 时间：2012-10-16T01:58:52.327
> 
> 标签：c, pointers, struct

我一直在尝试用 C 中的指针创建一个目录树。

我认为使用某种带有指针的结构会更容易，它类似于 Java 中的类。

所以我会使用这样的东西：

```
 struct d
  {
      struct d *up /*point to parent*/
      struct d *down /*point to child*/
      struct d *right /*point to right*/
  }

  generate_tree(struct **d)
  {
   /*my code*/
  } 
```

我正在尝试制作多个 struct d 并将它们连接起来。所以我假设我必须做的是为目录创建并分配一个指针，然后初始化一个结构 d 并使创建的指针指向结构 d 内部。我的问题是如何创建 d 并设置 *up、*down 和 *right？

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T02:15:27.787

您动态分配一个`struct d`with `malloc()`。IE，

```
struct d *dp = malloc(sizeof(*dp)); 
```

一旦有了指向新创建的指针，`struct d`就可以像任何其他 C 结构一样分配给它的字段：

```
dp->up = /* ... */;
dp->down = /* ... */;
dp->right = /* ... */; 
```

当然，诀窍在于您分配给这些字段的内容。好吧，从它们的类型`struct d *`来看，它必须是指向 a 的指针`struct d`。因此，要么分配 NULL 指针常量，这表明那里什么都没有，要么分配一些其他`structd d`对象的地址。例如，

```
struct d *up = malloc(sizeof(*up));
struct d *down = malloc(sizeof(*down));
struct d *right = malloc(sizeof(*right));

d->up = up;
d->down = down;
d->right; 
```

我不知道这个结构是否不仅仅是一个玩具示例，但它看起来像是某种树结构中的一个节点。如果是这种情况，您需要编写各种帮助函数来隐藏大部分指针操作。

```
struct d *new_node() { /* allocate a new d,  set all fields to NULL */ }
void insert_node_in_tree(struct d *tree, struct d *node) { ... } 
```

等等，无论您正在构建什么，都可以进行相关操作。

# javascript - 清除 :target CSS 伪类

> ID：12906509
> 
> 赞同：1
> 
> 时间：2012-10-16T01:58:55.213
> 
> 标签：javascript, html, css, pseudo-class

最近我一直在研究[Shower HTML5+CSS3 演示模板](https://github.com/pepelsbey/shower)来制作即将发布的演示文稿。Shower 使用[CSS`:target`伪类](http://css-tricks.com/on-target/)，可以在幻灯片概览中轻松识别当前幻灯片。

我了解如何`:target`通过 URL 中的哈希工作，但是我无法让它`:target`从所有元素中清除 CSS。

所以我的问题是：考虑到一个元素被`:target`编辑后，我们如何清除所有元素`:target`并将其恢复为使用 JavaScript 的规范？History API 的使用似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:07:14.423

我之前尝试过以下两个语句，但它不起作用（至少在 Firefox 上）：

```
history.pushState({}, 'null', window.location.pathname);
window.location.href.substr(0, window.location.href.indexOf('#')); 
```

诀窍是改用它：

```
window.location.hash = ''; 
```

只有当我们试图`:target`通过 JavaScript 清除选择时，才会出现问题。具有不存在或空哈希的锚标签有效：http: [//jsfiddle.net/SMbsb/3/](http://jsfiddle.net/SMbsb/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T02:19:40.257

要在不使用 Javascript 的情况下通过链接清除哈希目标，您只需`<a>`使用`href="#"`.

简单示例： http: [//jsfiddle.net/Y5XB7/](http://jsfiddle.net/Y5XB7/)
点击上方黑色方块`:target`激活，然后点击下方黑色方块将其清除。

```
<a href="#" ...> ... </a> 
```

# android - 按钮翻译动画未按预期工作

> ID：12906510
> 
> 赞同：2
> 
> 时间：2012-10-16T01:58:59.493
> 
> 标签：android, button, translate-animation

我想用 5 个按钮为我的活动添加动画。当我单击任何按钮时，它会消失。但是，当我单击另一个按钮时，它也会下降，但我单击的第一个按钮也会重新出现并下降。当我单击另一个按钮时，我希望单击的按钮不可见。这是代码片段：

```
 animation = new TranslateAnimation(0,0,0,1000);
 animation.setDuration(1000);
 animation.setFillAfter(true); 
```

然后在我的 Onclick 上：

```
 button1.startAnimation(animation);
 option1.setVisibility(0); 
```

当我使用 VIEW.Gone 时。布局变得乱七八糟。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:30:45.203

尝试使用隐形而不是消失。View.GONE 将释放此视图占用的空间，从而导致您的布局问题。Invisible 将隐藏您的视图，但不会更改任何其他视图的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:49:26.217

不确定我是否理解正确，但看起来你总是从 0,0 开始动画。您应该改为从当前按钮所在的位置开始动画。因此，如果按钮已经按下，它只是动画从按下状态变为按下状态。如果您想努力，您当然可以检查按钮的位置，并且仅当按钮尚未移动到应移动的位置时才进行动画处理。

# android - 在android上单击图像时防止灰色矩形闪烁

> ID：12906512
> 
> 赞同：0
> 
> 时间：2012-10-16T01:59:02.577
> 
> 标签：android, html, css

我在网页中使用绝对定位来定位多个图像，并将它们链接到我的 Web 应用程序中的不同页面。当我点击图像时，一个灰色的矩形部分会暂时突出显示，然后页面被转移到目标页面。

找到[iPad Safari：如何在点击链接](https://stackoverflow.com/questions/3516173/ipad-safari-how-to-disable-the-quick-blinking-effect-when-a-link-has-been-hit)但在 android 上不起作用时禁用快速闪烁效果。

你们中有人知道如何防止这种行为吗？它不会发生在 iPad 上。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T11:39:03.473

尝试这个

```
html,*{
    -webkit-tap-highlight-color: transparent;
    -webkit-backface-visibility: hidden;
} 
```

# web - facebook喜欢按钮不允许评论

> ID：12906521
> 
> 赞同：1
> 
> 时间：2012-10-16T02:00:16.790
> 
> 标签：web, facebook-like, facebook-opengraph, facebook-comments

我在我的网站上添加了点赞按钮，尝试使用 XFBML 和 HTML5 版本以及所有三种形式的按钮布局来尝试解决这个问题。人们可以喜欢我的网站，但没有有效的评论框。奇怪的是，昨晚成功了，但是今天早上一个朋友打电话给我说评论框出现了，他们可以输入评论，但是当他们点击发布时什么也没有发生。我自己又试了一次，评论框闪了一会儿，又消失了，没有留下评论的可能。

我对编码非常了解，并且完全按照步骤操作，按照指示将生成的代码插入到我的 html 中。对于 XFBML，生成的 JS SDK 代码已插入到开始正文标记之后，我已将 xmlns:fb-"http://ogp.me/ns/fb#" 代码添加到 html 标记中，并且在我的内容代码中添加了按钮代码。我的数据正在记录在 Insights 中，它甚至显示昨天记录了一些评论。有什么想法会突然出现什么问题吗？提前致谢。萝莉

# c++ - 如何解释 .stackdump 文件？

> ID：12906523
> 
> 赞同：20
> 
> 时间：2012-10-16T02:00:31.597
> 
> 标签：c++, debugging, stack-trace, stack-dump

这个问题很可能是[使用 Cygwin 可执行文件](https://stackoverflow.com/questions/320001/using-a-stackdump-from-cygwin-executable)中的堆栈转储的重复- 但我是初学者，我不理解答案，甚至部分问题。

我对 C++ 和编程很陌生，我正在使用 NetBeans 进行开发。我正在处理一些编译得很好但运行时失败的代码。如果我使用调试器，我会收到以下错误：

```
1 [main] all 6200 exception::handle: Exception: STATUS_ACCESS_VIOLATION
881 [main] all 6200 open_stackdumpfile: Dumping stack trace to all.exe.stackdump 
```

我设法找到了文件 all.exe.stackdump，我可以通过 notepad++ 读取它，但我不明白它的含义。我通过另一个问题收集到有一种用户友好的方式来解码这个文件，但我最好的猜测`bash$ gdb all.exe.stackdump`是无效的。我在调试中使用此文件的最佳方式是什么？

以防万一，这里是 all.exe.stackdump 的内容

```
Exception: STATUS_ACCESS_VIOLATION at eip=00434C41
eax=2003A2E4 ebx=0028A95C ecx=00000000 edx=0028A95C esi=0028A9B0 edi=00000000
ebp=0028A9C8 esp=0028A930 program=[redacted for privacy/security], pid 6200, thread main
cs=0023 ds=002B es=002B fs=0053 gs=002B ss=002B
Stack trace:
Frame     Function  Args
0028A9C8  00434C41  (00000000, 2003A4F0, 0028A9E8, 00000000)
0028A9E8  00436B14  (00000000, 2003A4F0, 0028AA28, 0028D000)
0028AAF8  004036A4  (0028AB80, 2003A2B0, 00000014, 00000003)
0028ABD8  00403FBC  (00000001, 0028AC00, 200280E8, 2003A189)
0028ACF8  61007535  (00000000, 0028CD78, 61006B20, 00000000)
End of stack trace 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-11-23T15:03:06.180

您可以使用“功能”地址作为`addr2line`.

`addr2line -f -C -e main.exe 0xADD4355`

在所有地址中使用 awk 和管道对其进行过滤：

`awk '/^[0-9]/{print $2}' main.exe.stackdump | addr2line -f -C -e main.exe`

如果您看到`??`'s 而不是函数名称，则需要使用调试符号 ( `-g`, `-ggdb3`, `...`)重新构建

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-22T01:55:42.110

这是很多人的通病；通常他们会告诉你使用 gdb。然而，这并不总是一个合理的答案。您不能重新编译它，因为不能保证新版本与崩溃的版本具有相同的符号地址。有几个工具可能会有所帮助：objdump、addr2line 等。您可以执行“objdump -D -S build.out > build.rasm.txt”，然后在文本中搜索这些函数地址。Addr2line 也是识别这些功能的好选择。如果您要经常处理此类崩溃问题，建议您编写一个脚本工具来帮助您的工作。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-21T20:08:53.293

找到有问题的行的另一种方法是在二进制文件上使用 gdb。所以先运行gdb： `gdb main.exe`

在 gdb 内部运行： `info line *0xADD4355`

# c# - 用户控制通信

> ID：12906525
> 
> 赞同：1
> 
> 时间：2012-10-16T02:00:58.977
> 
> 标签：c#, asp.net

我有一个包含用户控件的母版页`ucStatusBar`。`ucStatusBar`有一个公共方法`setStatus()`。`<asp:label />`该方法只是使用传入的字符串参数更新控件中的一个。

母版页内容页是*Summary.aspx*。 *Summary.aspx*有一个用户控件`ucNewEvent`。保存表单`ucNewEvent`并返回成功或失败代码时，我正在尝试`ucStatusBar`使用成功或失败消息进行更新。我可以调用，但是当出于某种原因尝试设置标签 b/c 的属性时，我在运行时`ucStatusBar.setStatus("success message")`得到一个引用异常。为什么会这样？有没有更好的方法来实现这一目标？`null``setStatus``Text``<asp:label />``null``null`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:18:37.230

只是一个猜测，但我认为您正在尝试从事件（或从其中调用的某个函数）中设置`Text`属性。`Page_Load`

ASP.NET 编程都是关于时间的，这意味着你真的非常需要了解[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)。您可能正在尝试在用户控件完成加载之前访问它们。

通常，最好`Page_Load`严格使用事件来解析请求 ( `Server.Request`)。[`LoadComplete`](http://msdn.microsoft.com/en-us/library/system.web.ui.page.loadcomplete%28v=vs.100%29.aspx)获取您需要的信息，将其保存到类变量中，然后在or[`PreRender`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.prerender%28v=vs.100%29.aspx)事件中设置控件属性等。

# python - 自定义域的 GAE SSL 不可能？

> ID：12906527
> 
> 赞同：0
> 
> 时间：2012-10-16T02:01:10.610
> 
> 标签：python, django, google-app-engine, ssl

我尝试为我在 GAE 上提供的网站配置 SSL，但失败了。

[http://www.gluwa.com/](http://www.gluwa.com/)

工作正常，但

[https://www.gluwa.com/](https://www.gluwa.com/)

只给我一个谷歌错误页面。

![在此处输入图像描述](../Images/b131e12af3f333d7ec038023190f4e85.png)

在多次查看他们的 SSL 设置说明之后，我已经猜不透了。

我已经尝试过 SNI 和 VIP 但仍然没有希望。

GAE 应用程序无法使用 SSL 吗？

编辑：

我正在按照 Dragonx 的建议添加我的设置。

![在此处输入图像描述](../Images/58f780ce47a80fff929f24ed2d50b9f8.png)

应用程序.yaml

```
application: myapp
version: 1
runtime: python27
api_version: 1
threadsafe: true

libraries:
- name: django
  version: "1.3"
- name: PIL
  version: "latest"
- name: webob
  version: "latest"

builtins:
- django_wsgi: on
- appstats: on

inbound_services:
- warmup

handlers:
- url: /static/admin
  static_dir: admin_media/

- url: /static
  static_dir: static/ 
```

编辑2：

```
handlers:
- url: /.*
  script: google.appengine.ext.django.main.app
  secure: always 
```

我在下面从内置注释中添加了上面的处理程序。

```
- django_wsgi: on 
```

但是，添加这个标记并没有解决问题。

编辑 3：

有关更多信息，我按照以下三个步骤在终端中使用 openssl 创建 SSL 证书。

```
$openssl genrsa -out yourdomain.com.key 1024
$openssl req -new -key yourdomain.com.key -out yourdomain.com.csr
$openssl x509 -req -days 365 -in yourdomain.com.csr -signkey yourdomain.com.key -out yourdomain.com.crt 
```

对于第二个命令，我输入了这些信息

```
Country Name (2 letter code) [AU]:KR
State or Province Name (full name) [Some-State]:Seoul
Locality Name (eg, city) []:Seocho
Organization Name (eg, company) [Internet Widgits Pty Ltd]:Gluwa Inc.
Organizational Unit Name (eg, section) []:R&D
Common Name (e.g. server FQDN or YOUR name) []:www.gluwa.com
Email Address []:gluwa@gluwa.com 
```

不过，我不确定它们是否应该重要。

编辑4：

我尝试使用 GAE 服务器的信息来创建 SSL，但也不值得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T02:57:04.293

您的 DNS 条目指向错误的地址：

```
$ host www.gluwa.com
www.gluwa.com has address 216.239.38.21 
```

根据您的屏幕截图，它应该是 ghs-svc-https-c1099.ghs-ssl.googlehosted.com 的 CNAME。

当我尝试访问[https://ghs-svc-https-c1099.ghs-ssl.googlehosted.com](https://ghs-svc-https-c1099.ghs-ssl.googlehosted.com)时，我看到了您的证书，如果我向服务器发送 www.gluwa.com 的 GET 请求，它会返回一些来自App Engine，所以我认为 Google 方面的所有配置都正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T03:17:25.130

不，这不是不可能的。对我来说很好。

有一些东西你没有正确配置。您必须实际详细描述您的配置，以便任何人帮助您弄清楚。

我猜您没有在 app.yaml 中将请求处理程序标记为安全。

# javascript - 使表格单元格高度逐渐变化

> ID：12906528
> 
> 赞同：2
> 
> 时间：2012-10-16T02:01:27.790
> 
> 标签：javascript, html-table

我知道如何使表格单元格消失，但它会在眨眼之间发生。我希望在调用函数时表格单元格的高度逐渐变小。我对 Javascript 非常陌生，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:19:50.370

为了使任何东西动画化，使用[jQuery](http://jquery.com)是最简单的。jQuery 是一个 Javascript 函数库，它让生活变得更轻松。您需要的函数是 .animate()。首先，在`<head>`您的页面部分添加这行代码：

```
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script> 
```

设置您的表格并为您想要变高的行提供 id `heightchange`（它可以是任何东西。我在这个例子中使用它）。然后，将其添加到 HTML 文档的 head 部分（在上面添加的行下方），添加以下代码：

```
<script type="text/javascript>
    function expandTableRow() {
        $('#heightchange').animate({
            height: '200px'
        });
    }
</script> 
```

然后，像这样创建您的按钮：

```
<a href="javascript:expandTableRow();">Click here to expand</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T02:39:50.110

我不太确定您如何想象只有一个表格单元格的高度发生变化。但也许你只是想实现一个表格单元格内容的出现？

这可以通过 css3 转换来完成： `transition: color 1000ms linear;`

==>[示例代码](http://jsfiddle.net/5NBvz/3/)

# python - 蟒蛇过滤lxml

> ID：12906531
> 
> 赞同：0
> 
> 时间：2012-10-16T02:01:43.997
> 
> 标签：python, lxml

我使用某人的代码来创建过滤器。

```
import urllib2
import lxml.html as lh

req = urllib2.Request("http://www.ip-adress.com/ip_tracer/157.123.22.11", headers={'User-Agent' : "Magic Browser"})
html = urllib2.urlopen(req).read()
doc=lh.fromstring(html)
print ''.join(doc.xpath('.//*[@class="odd"]')[-1].text_content().split()) 
```

它将输出组织：ZenithDataSystems。但是当我运行它时，它显示了一些错误

```
Traceback (most recent call last):
File "ext.py", line 2, in ?
import lxml.html as lh
File "/usr/lib64/python2.4/site-packages/lxml/html/__init__.py", line 42, in ?
from lxml import etree
ImportError: /usr/lib64/python2.4/site-packages/lxml/etree.so: undefined symbol:       xmlMemDisplayLast 
```

我以前没有使用过lxml。我的python版本是2.4.3，操作系统是CentOS release 5.5如何解决。当我更新 lxml 版本时，它显示

```
 Traceback (most recent call last):
      File "ext.py", line 3, in ?
      req= urllib2.Requset("http:// www.ip-address.com/ip_tracer/157.123.22.11", headers={'User-Agent' : "Magic Browser"})
      AttributeError: 'module' object has no attribute 'Requset' 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:55:25.257

这是一个[错误](https://github.com/lxml/lxml/issues/71)。您需要升级到`lxml 3.0.1`（或降级到`lxml 2.3.6`）。

```
pip install -U lxml==3.0.1 
```

[lxml 3.0.1](http://pypi.python.org/pypi/lxml/3.0.1)错误修复`GH#71: Failure to work with libxml2 2.6.x.`

# html - CSS 正文高度：100% 不适用于黑莓

> ID：12906533
> 
> 赞同：0
> 
> 时间：2012-10-16T02:01:51.567
> 
> 标签：html, css, blackberry, blackberry-webworks

出于某种奇怪的原因，我无法在黑莓手机上将我的身高拉伸到 100%。它在 Ripple Emulator 中运行良好，但在实际设备上运行良好。

这是我的 index.html 文件：

```
<!DOCTYPE html>
<html>
<head>
<meta name="x-blackberry-defaultHoverEffect" content="false" />
<meta name="viewport" content="initial-scale=1.0,width=device-width,user- 
scalable=no,target-densitydpi=device-dpi" />
<link rel="stylesheet" type="text/css" href="css/layout.css" />
<!--<link rel="stylesheet" type="text/css" href="css/bbui-0.9.3.css" />-->
<script src="js/javascript.js" type="text/javascript"></script>
</head>
<body>
</body>
</html> 
```

这是css文件：layout.css

```
.html
{
  height: 100%;
}
body
{
  background-color: #000000;
  height: 100%;
  padding: 0;
  margin: 0;
} 
```

我已经将 html 标签和 body 标签高度设置为 100% 但没有用。有人有什么想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:16:31.897

之类的属性`height:100%; min-height:100%`。不适用于黑莓。

所以这里是修复：

```
$(document).ready(function() {
   document.body.style.height = screen.height + ‘px’;
}); 
```

将此添加到javascript文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:31:30.303

不确定您的问题中是否有错字，但应该是 html 而不是 .html ：

```
html
{
  height: 100%;
} 
```

如果这对您不起作用，请尝试使用固定定位。这非常适合移动应用程序（我将它用于 BB10 和 PlayBook 开发）：

```
html,body{
    position:fixed;
    top:0px;
    bottom:0px;
    width:100%;
} 
```

# apache - apache用proxypass重写

> ID：12906537
> 
> 赞同：0
> 
> 时间：2012-10-16T02:02:01.253
> 
> 标签：apache, mod-rewrite, rewrite, proxypass

我正在尝试将重写和代理通行证结合起来，并且在重写时遇到问题。这是我所拥有的

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example.world.net
RewriteRule %{HTTP_HOST} http://newexample.newworld.net:7802/apex/f?p=208 [R,P]
ProxyPass / http://newexample.newworld.net:7802/ 
```

proxypass 正在工作，但我不知道如何获得初始重定向。因此，如果用户输入 example.world.net/apex/f?p=208 它会转到 newexample.newworld.net:7802/apex/f?p=208 并屏蔽 url。

但是，如果 apex/f?p=208 不在 URL 中，我需要让 example.world.net 重定向到 example.world.net/apex/f?p=208。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:29:56.597

您不能同时重定向*和*代理。您的重写规则标志`[R,P]`是“重定向”和“代理”。你在这里需要一个或另一个。此外，您的规则的正则表达式永远不会匹配`%{HTTP_HOST}`，除非您的 URL 字面意思是：`http://example.world.net/%{HTTP_HOST}`。您需要将其更改为：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^example.world.net
RewriteCond %{QUERY_STRING} !(^|&)p=208(&|$)
RewriteRule ^/?$ /apex/f?p=208 [L,QSA,R] 
```

`http://example.world.net/`如果 URL 地址栏显示为 ，这将重定向浏览器`http://example.world.net/apex/f?p=208`。然后，由代理来获取`/apex/f?p=208`并将其代理到`http://newexample.newworld.net:7802/`.

mod_proxy 和 mod_rewrite 有可能不能很好地配合使用，因为两者最终会被应用到同一个 URL。如果您发现两者同时被应用，则将该`ProxyPass`行更改为：

```
RewriteRule ^/?(.*)% http://newexample.newworld.net:7802/$1 [L,P,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T02:51:45.743

所以你希望**example.world.net**重定向到**http://newexample.newworld.net:7802/apex/f?p=208**或**example.world.net/apex/f?p=208**？我假设前者，如果我错了将 RewriteRule 中的 url 更改为后者。

但我认为应该这样做

```
RewriteCond %{HTTP_HOST} ^example.world.net$ [NC]
RewriteRule %{HTTP_HOST} http://newexample.newworld.net:7802/apex/f?p=208 [R,L] 
```

但随后不知道您的虚拟主机的名称/别名是什么，因此 / 在

> ProxyPass / [http://newexample.newworld.net:7802/](http://newexample.newworld.net:7802/)

可能会打破这一切。

# jquery - 在 $.mobile 中覆盖 JQuery Mobile 方法的正确方法

> ID：12906541
> 
> 赞同：2
> 
> 时间：2012-10-16T02:02:49.737
> 
> 标签：jquery, jquery-mobile, extending

当软键盘启动时，我正在开发的 JQuery Mobile 应用程序往往会崩溃。我已经实现了一个解决方案并且效果很好，但是我必须直接编辑 jquery.mobile-1.2.0.js 才能做到这一点。我宁愿将我的更改保留在扩展 jQuery Mobile 的 jquery.mobile.customizations.js 文件中。

我尝试执行以下操作但没有成功：

```
delete $.mobile.getScreenHeight;
$.mobile.last_width = null;
$.mobile.last_height = null;
$.mobile.getScreenHeight = function() 
{
   // My modified version
} 
```

我将警报语句添加到我的`$.mobile.getScreenHeight`，加上原来的 `$.mobile.getScreenHeight`. 我确实看到我的自定义方法的警报被触发，但有时它也会在原始函数中触发警报。

有谁知道在 $.mobile 中覆盖方法并添加两个新属性的正确方法？

（有关原始问题的完整详细信息在[window.resize 中，因为虚拟键盘会导致 jquery mobile 出现问题](https://stackoverflow.com/questions/12879857/window-resize-due-to-virtual-keyboard-causes-issues-with-jquery-mobile)）

**更新：**

@elclanrs - 我试图实现下面的代码但没有运气。我也试过交换第二个和第三个参数。每当我运行代码时，它都会触发我的扩展 getScreenHeight，但随后会触发基础 getScreenHeight。（我挖空了原来的 getScreenHeight 并在里面放了一个警报。那个警报永远不应该触发。

打开思想！

```
$.mobile = $.extend( {}, $.mobile, {
    last_width: null,
    last_height: null,
    getScreenHeight: function() {
        // My code...
    }
} ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:35:20.897

违规行似乎是`getScreenHeight = $.mobile.getScreenHeight;`将当前定义放在`resetActivePageHeight`函数的闭包中。我不确定是否可以在不编辑文件的情况下直接覆盖它，但您可以在下游将其关闭：

```
 //simply set the active page's minimum height to screen height, depending on orientation
  function resetActivePageHeight() {
    var aPage = $( "." + $.mobile.activePageClass ),
      aPagePadT = parseFloat( aPage.css( "padding-top" ) ),
      aPagePadB = parseFloat( aPage.css( "padding-bottom" ) ),
      aPageBorderT = parseFloat( aPage.css( "border-top-width" ) ),
      aPageBorderB = parseFloat( aPage.css( "border-bottom-width" ) );

    aPage.css( "min-height", getScreenHeight() - aPagePadT - aPagePadB - aPageBorderT - aPageBorderB );
  }

  //set page min-heights to be device specific
  $( document ).bind( "pageshow", resetActivePageHeight );
  $( window ).bind( "throttledresize", resetActivePageHeight ); 
```

定义你自己的`resetActivePageHeight`then`unbind`和`bind`ing 可能会成功。有点乱。

# python - PyWinUSB 无法识别的错误消息

> ID：12906542
> 
> 赞同：0
> 
> 时间：2012-10-16T02:03:51.473
> 
> 标签：python, python-2.7, usb, windows-7-x64, pywinusb

我正在尝试使用 PyWinUSB 与我拥有的一个非常简单的 USB 设备进行通信。该装置是两个组件；一个无线收发器和设备本身，它有 5 个按钮、一个旋转拨盘和一个 DIP 开关。按下任何按钮（取决于拨盘和开关的设置）时，都会向收发器传输一个值。

该设备还可以接收用于各种目的的信号。

使用 PyWinUSB，我从设备接收输入没有问题。我遇到的问题来自我尝试向设备发送内容时。这会导致我至今无法破译的错误。即使对 simple_send.py 示例程序进行基本的更改也会使其爆炸。

我认为我遇到的问题是我不知道目标使用参数是什么。我不是 100% 确定这是做什么的，但是当我在找到它之后从设备中获取报告时，我有一些运气，但除此之外，我无法弄清楚为什么它一直有错误以及我可以做些什么来解决它。

[您可以在此处](http://pastebin.com/6HDz7bkV)找到错误本身，并在[此处](http://pastebin.com/Rb4nUU5Y)找到我的 simple_send.py 示例版本。任何反馈表示赞赏。

```
Traceback (most recent call last):
  File "C:\2.7.x\pywinusb-0.3.1 2.7\examples\simple_send.py", line 45, in <module>
    click_signal(target_usage, target_vendor_id)
  File "C:\2.7.x\pywinusb-0.3.1 2.7\examples\simple_send.py", line 32, in click_signal
    report.send()
  File "C:\Python27\lib\site-packages\pywinusb-0.3.1-py2.7.egg\pywinusb\hid\core.py", line 1446, in send
    self.__prepare_raw_data()
  File "C:\Python27\lib\site-packages\pywinusb-0.3.1-py2.7.egg\pywinusb\hid\core.py", line 1401, in __prepare_raw_data
    byref(self.__raw_data), self.__raw_report_size) )
  File "C:\Python27\lib\site-packages\pywinusb-0.3.1-py2.7.egg\pywinusb\hid\winapi.py", line 382, in __init__
    raise helpers.HIDError("hidP error: %s" % self.error_message_dict[error_code])
HIDError: hidP error: data index not found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T20:05:26.353

最新版本包括一个用于探索设备功能的脚本`show_hids.py`，它位于`./example folder`（下载完整源代码包）中。

在命令行上运行它，将输出捕获到文件 ( `> output.txt`) 以便于查看它，然后查找输出和功能上限部分。在那里，您将找到设备报告描述符列出的所有用法（输入大写指向您可以接收的那些）。

# sql-server - 在查询顶部更改 SQL Server 时间和日期注释戳

> ID：12906543
> 
> 赞同：0
> 
> 时间：2012-10-16T02:04:18.130
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2, sql-server-2012

在我的程序顶部的 SQL Server 2008/12 中，我有以下内容：

```
/****** Object:  StoredProcedure [Actions].[InsertArea]    Script Date: 16/10/2012 02:56:08 ******/
                                 ----------------------                 ---------- -------- 
```

它显然会根据程序的名称和上次修改的日期/时间而改变。

有什么方法可以防止这种情况发生变化或改变它，所以我创建了一个日期，而不是上次修改的日期，或者我只是这样坚持下去。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:09:43.677

显然，您使用 Microsoft SQL Server Management Studio 编写了脚本过程，脚本日期是创建/修改脚本的日期。此行由 MSSM 添加。

您可以在 create/alter 语句之前添加您自己的带有所需日期的注释，它们将保存在数据库中。

# iphone - 故事板和'NSInternalInconsistencyException'，原因：'无法在包中加载NIB：'NSBundle

> ID：12906544
> 
> 赞同：0
> 
> 时间：2012-10-16T02:04:22.180
> 
> 标签：iphone, storyboard, ios6, nib

我什至不确定我是否做对了，但这就是我正在尝试做的。我有一个包含表格视图的情节提要 - 以编程方式填充 - 所有这些都有效。我在故事板中还有另一个 ViewController，它本质上将显示在表格视图中选择的任何内容的详细信息。故事板中的表格视图和详细视图之间没有序列 - 应该有吗？- 我创建了一个类来处理这个细节视图。

所以我在 detailViewController.h 中有这个

```
#import <UIKit/UIKit.h>

@class Profile;

@interface MedStaffDetailViewController : UIViewController

@property (weak, nonatomic) IBOutlet UIImageView *profileImage;

@property (weak, nonatomic) IBOutlet UIBarButtonItem *profileMobile;

@property (weak, nonatomic) IBOutlet UIBarButtonItem *profilePhone;

@property (weak, nonatomic) IBOutlet UIBarButtonItem *profileEmail;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil detail:(Profile *)profile title:(NSString *)title;

@end 
```

这在其实施中：

```
#import "MedStaffDetailViewController.h"
#import "MedStaffViewController.h"
#import "Profile.h"

@interface MedStaffDetailViewController ()

@end

@implementation MedStaffDetailViewController
@synthesize profileEmail, profileImage, profileMobile, profilePhone;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil detail:(Profile *)profile title:(NSString *)title
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        self.title = title;

    }
    return self;
}
@end 
```

我只是想处理表格视图中一行的选择，以使用适当的数据显示此详细视图 - 当我只是在做一个主/视图类型的应用程序时，我有这个工作 - 但现在我使用的是故事板，所以我可以学。

我在详细视图的身份检查器中将类设置为 MedStaffDetailViewController，并在表视图控制器中具有以下内容：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */

    _showProfile = [_profileArray objectAtIndex:indexPath.row];
    NSLog(@"Selected: %@", [_showProfile lastName]);

    self.detailViewController = [[MedStaffDetailViewController alloc] initWithNibName:@"MedStaffDetailViewController" bundle:nil detail:_showProfile title:@"This is the title"];

    [self.navigationController pushViewController:self.detailViewController animated:YES];

} 
```

所有这些都构建得很好，但是在运行时会在这个问题的标题中抛出错误。应该 - 或者我 - 需要在故事板中创建一个序列吗？我将如何获取此详细信息视图以显示何时选择了一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:23:50.357

您可以使用：

```
UIStoryboard*  sb = [UIStoryboard storyboardWithName:@"mystoryboard" bundle:nil];
UIViewController* vc = [sb instantiateViewControllerWithIdentifier:@"MedStaffDetailViewController"]; 
```

# python - Python代码中的其他块不断抛出无效的语法错误......无论我做什么来纠正它

> ID：12906545
> 
> 赞同：0
> 
> 时间：2012-10-16T02:04:27.253
> 
> 标签：python, syntax, python-2.7, if-statement, statements

我本身不是 Pythonista 专家，所以我将首先澄清一下，关于我遇到的 else 语句问题，什么可能被认为是一个微不足道的问题。无论如何，为了简洁起见，我在stackoverflow上查看了所有关于相同/相似问题的其他语法问题，但我仍然无法解决问题。这是有问题的代码块：

```
 else: 
        m_len -= 33 
        dst.append(32) 
        n, m_len = divmod(m_len, 255) 
        dst.extend("\x00" * n) 
        dst.append(m_len) 
        dst.append((m_off << 2) & 0xff) 
        dst.append((m_off >> 6) & 0xff)
   else: #This is the line being complained about
        m_off -= 0x4000 
   if m_len <= 9: 
        dst.append(0xff & (16 | ((m_off >> 11) & 8) | (m_len - 2))) 
```

提前感谢您提供的任何帮助或建议！干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T02:08:32.897

一个条件块中不能有多个[`else`语句](http://docs.python.org/reference/compound_stmts.html#the-if-statement)
将第一个语句更改`else`为`elif`并指定一些条件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:47:19.377

你的条件必须是这样的：

```
if (condition):#the program can choose as many "if" as many you put in your program (in theory)
 ..code..
#here you can add as many "if" as you want
elif (condition):#the program will only choose one block you must have a "if" block before
 ..code..
#here again you can add as many "elif" as you want
else:#before "else" you must have a if block before
 ..code..
#here only one "else" 
```

你认为程序如何选择else或else？！哈哈

# java - 在java中写入和读取文件（使用ArrayList）

> ID：12906546
> 
> 赞同：-2
> 
> 时间：2012-10-16T02:04:47.673
> 
> 标签：java, list, file-io, arraylist

所以基本上，我有这几个超类，它们的几个子类中的一个组成了一个小程序。至于文件处理，由于我使用的是“数组”，所以我使用了 writeobject 和 readobject 方法。但是现在，我已将所有数组都更改为“ArrayLists”，但是在处理文件时，它显然不像以前那样工作了。

我有 2 个特定部分出错，首先是：

```
for(i=0;i<100;i++)
{
customerOOS.writeObject(Customer[i]);//since we no longer have (Customer[]) array, and instead Custarray of arraylist
} 
```

. . .

第二部分：

```
for (i=0;i<100;i++)
{
Customer[i] = (Customer)customerOIS.readObject();//same problem again
} 
```

那么，我应该用什么替换这些部件，然后它才能工作。或者我应该使用完全不同的方式来处理 ArrayLists 的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T02:18:09.580

An`ArrayList`是`List`（由动态数组支持）的实现，它是`Objects`.

该容器具有非常具体且记录良好的方法，可让您管理元素列表。

为了从列表中检索元素，您需要使用[`List#get(int)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#get%28int%29)

```
for(i=0;i<Customer.size();i++)
{
    customerOOS.writeObject(Customer.get(i));
}
for (i = Customer.size(); i < 100; i++) {
    customerOOS.writeObject(null);
} 
```

要添加新元素，您需要使用[`List#add(Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#add%28E%29)

```
for (i=0;i<100;i++)
{
    Customer.add((Customer)customerOIS.readObject());
} 
```

我会花一些时间研究 API 文档并通读[Collections](http://docs.oracle.com/javase/tutorial/collections/index.html) trail，因为这些是非常基本的概念

# html - 边栏和分页在生产中随着 truncate_html 而消失

> ID：12906548
> 
> 赞同：0
> 
> 时间：2012-10-16T02:05:10.180
> 
> 标签：html, ruby-on-rails, ruby, gem, truncate

所以我决定使用 truncate_html gem，这样当我想预览它们时，我可以从我的帖子中删除标签。它在开发模式下运行良好，我就像文档中所说的那样安装了它[https://github.com/ianwhite/truncate_html](https://github.com/ianwhite/truncate_html)但是由于某种原因，当我使用 heroku 推动生产时，我的侧边栏和分页消失了。更重要的是我的分页

我在我看来像这样引用分页

<%= will_paginate @posts %>

我像这样在视图中使用了宝石

```
 <h9><%= truncate_html(post.body, :length => 300) %></h9> 
```

以前有没有人遇到过这个错误或知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:39:38.790

最终在两个帖子中出现了一些角色，由于某种原因完全搞砸了整个网站。我注意到无论我用多少页来分页，列表都会停在那些帖子上，所以我把帖子复制了，放在 text mate 中，然后重新发布，没有问题。现在一切似乎都很好，我没有任何问题。不太确定问题是什么，但如果其他人面临类似的问题，也许这会有所帮助。无论如何，谁看了我的问题谢谢！

# linq - 如何将 U 放入 F# Type Provider CRUD 中？

> ID：12906550
> 
> 赞同：9
> 
> 时间：2012-10-16T02:05:33.467
> 
> 标签：linq, linq-to-sql, f#, type-providers

易于理解的 CRD 示例（创建、读取、删除）出现在 MSDN[此处](http://msdn.microsoft.com/en-us/library/hh361033.aspx)

页面上有一个很好的[链接，指向创建测试数据库的脚本](http://msdn.microsoft.com/en-us/library/hh361033.aspx#BKMK_MyDBCreateScript)，我这样做了，并且很容易得到所有适用于 CRD 的示例。

CRD 页面上甚至还有方便的子标题：

（创建行）[http://msdn.microsoft.com/en-us/library/hh361033.aspx#BKMK_UpdateDB](http://msdn.microsoft.com/en-us/library/hh361033.aspx#BKMK_UpdateDB)

（读取行）[http://msdn.microsoft.com/en-us/library/hh361033.aspx#BKMK_QueryData](http://msdn.microsoft.com/en-us/library/hh361033.aspx#BKMK_QueryData)

（删除行）[http://msdn.microsoft.com/en-us/library/hh361033.aspx#BKMK_DeleteRows](http://msdn.microsoft.com/en-us/library/hh361033.aspx#BKMK_DeleteRows)

名为 BKMK_UpdateDB 的那个不做 CRUD 中的 U。它的名字是 Update，但它确实是 CRUD 中的 C。

如果我错过[了此页面](http://msdn.microsoft.com/en-us/library/hh361033.aspx)上 CRUD 中 U 的显示位置，请立即向我开枪并停止阅读...

请问这里的一位大师可以提供一点帮助吗？

[为了减轻大师的垃圾工作量：下面的代码与 MSDN 网页](http://msdn.microsoft.com/en-us/library/hh361033.aspx)上的代码非常相似。

只需运行网页上[提到](http://msdn.microsoft.com/en-us/library/hh361033.aspx#BKMK_MyDBCreateScript)的 test-database-create .sql脚本，在下面的代码中为您的服务器和数据库名称编辑 SqlDataConnection 字符串，它应该可以正常运行。

请注意，我对查询所做的唯一更改是只更新一行。现在正好返回一行。似乎更重要的是看到一排的简单情况发生了变化。至少在一次显示多个更改之前是这样。

大师能否将最后 4 行更改为推荐的 F#-Type-Provider 方式以更改查询返回的数据，并将更改后的行写入数据库？

例如，将 row.TestData1 从 10 更改为 11 并将其写入数据库。

总结：[MSDN 页面](http://msdn.microsoft.com/en-us/library/hh361033.aspx)让我们 F#-Type-Provider 新手在 CRUD 中做 CRD 很容易。

大师可以请我们新手填写正确/简单的 F#-Type-Provider 方法来在 CRUD 中执行 U 吗？

非常感谢！

```
#r "System.Data.dll"
#r "FSharp.Data.TypeProviders.dll"
#r "System.Data.Linq.dll"
open System
open System.Data
open System.Data.Linq
open Microsoft.FSharp.Data.TypeProviders
open Microsoft.FSharp.Linq

type dbSchema = SqlDataConnection<"Data Source= --yourServer\yourInstance--;Initial Catalog= --YourTestDatabaseFromTheScript--;Integrated Security=SSPI;">
let db = dbSchema.GetDataContext()
let table1 = db.Table1

query { for row in db.Table1 do
        where (row.TestData1 <= 10)
        select row } 
    |> Seq.iter (fun row -> printfn "%d %s" row.TestData1 row.Name) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T02:35:46.010

我还没有机会尝试新的`query`表达方式——所以这只是一个猜测：

```
query { for row in db.Table1 do
    where (row.TestData1 <= 10)
    select row } 
    |> Seq.iter (fun row ->
        // Update the row with some new value.
        row.TestData1 <- row.TestData1 + 1)

// Now, call .SubmitChanges() to execute the SQL and update the database
try
    db.DataContext.SubmitChanges()
    printfn "Successfully updated the rows."
with
   | exn -> printfn "Exception:\n%s" exn.Message 
```

[这个页面](http://msdn.microsoft.com/en-us/library/Bb386931.aspx)上的代码给出了另一个例子，说明它是如何工作的，尽管是在 C# 中。基本上，F#`query`表达式（在这种情况下）只是简单地包装了 Linq-to-SQL；因此，如果我发布的代码不起作用，您应该查看一些带有 C# 的 Linq-to-SQL 的新 .NET 4.5 示例。

# python - ctypes 引用双指针

> ID：12906552
> 
> 赞同：8
> 
> 时间：2012-10-16T02:05:37.437
> 
> 标签：python, ctypes

我有一个 doxygen 看起来像这样的 C 函数：

```
long function( classA * obj1,
               classB * obj2,
               classC ** obj3,
               long value,
               const char * name1,
               const char * name2,
               classD ** obj4,
               classD ** obj5,
               classD ** obj6 
               ) 
```

我需要从 python 调用它并获取最后三个参数以传递给另一个 dll。目前我可以很好地调用 DLL，但是如果我尝试将最后 3 个参数传递给另一个函数，我会收到如下错误：

```
WindowsError: exception: access violation writing 0x0000000000000000 
```

我可能在 ctypes 方面做错了什么，我希望能对如何使用它有所了解......

第二个 DLL 如下所示：

```
int function2(ClassD *  obj4) 
```

目前我像这样“组装”最后三个参数：

```
 temp=ctypes.c_long*1
  obj = temp(0) 
```

另外，有什么方法可以从 ctypes 到 swig 吗？显然我可以使用 long 函数做相反的事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T13:30:41.303

我不得不做一些额外的挖掘来弄清楚 C-types 是如何工作的，以下似乎是有效的。对于函数，我需要创建一个数组：

```
arg = (ctypes.POINTER(ctypes.c_double) * 1)() 
```

并通过引用函数来传递它：

```
ctypes.byref(arg) 
```

对于第二个函数，我只需传递我创建的数组的一个元素：

```
arg[0] 
```

# xcode - ZBarReadview 具有来自 StoryBoard 的自定义大小，但是当它被调用时，它的大小不是我设置的

> ID：12906557
> 
> 赞同：1
> 
> 时间：2012-10-16T02:06:52.500
> 
> 标签：xcode, zbar-sdk

我有一个从故事板创建的 ZBarReaderView，大小为 300*90 像素，显示为大约 200*400 像素，因为 ZBarReaderView 并没有把它的尺寸看得太严重......

我这样声明我的 IBOutlets：

```
@interface MYQViewController : UIViewController < ZBarReaderViewDelegate >
{
    ZBarReaderView *readerView;
    ZBarCameraSimulator *cameraSim;
    UITextView *resultText;
}
@property (strong, nonatomic) IBOutlet ZBarReaderView *readerView;
@property (strong, nonatomic) IBOutlet UITextView *resultText;
@end 
```

在 viewDidLoad

```
-(void) viewDidLoad
{
 readerView.readerDelegate = self;
 readerView.zoom=1;
 if(TAGET_IPONE_SIMULATOR)
{
 cameraSim=[[ZBarCameraSimulator alloc] initWithViewController:self];
 cameraSim.readerView=readerView;
}
}

-(void)Scan
{
    if(readerView.hidden)
    {
         [readerView start];
         readerView.hidden = NO;
         resultText.text=EMPTY_STRING;
    }
    else
    {
         [readerView stop];
         readerView.hidden = YES;
         //OTHER CODES        
    }
}

-(void) readerView:(ZBarReaderView *)readerView didReadSymbols:(ZBarSymbolSet * )symbolsfromImage:(UIImage *)image
{
    for (ZBarSymol *sym in symbols)
    {
        self.resultText.text=sym.data;
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:03:03.513

我有一个类似的问题要解决。我在 Storyboard 中创建了一个 UIView 并将 ZBarReaderView 作为类分配给它。当 ZBarViewReaderView 启动时，它扩展了我的视野。

我在将示例代码 (EmbeddedReader) 与我的代码进行比较时找到了解决方案。这很简单：

在 Storyboard 或 Interface Builder 中，如果您的视图被选中，您必须选中“剪辑子视图”复选标记。现在，相机图像准确地停留在应有的位置。

这是 Storyboard 中属性的屏幕截图：

![查看](../Images/792392a94a1c42fe3eabd1dffe424762.png)

希望我能帮上忙。

# sublimetext2 - Sublime Text 2 - 显示对象和变量的插件？

> ID：12906563
> 
> 赞同：14
> 
> 时间：2012-10-16T02:07:46.837
> 
> 标签：sublimetext2, sublimetext

Sublime Text 2 是否有任何插件或方式可以在侧面向您展示您的对象、函数和变量？

我正在使用 PHP 和 Javascript。谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-16T12:02:50.457

你不需要插件来做到这一点。

只需按 Control + R（在 Win 上）即可获取所有可用函数、对象和变量的列表。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-25T20:12:30.380

对于 MAC 用户，命令是`CMD + R`

这将打开一个包含所有功能的弹出窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T09:17:57.390

您必须在这里投票才能看到在 SublimeText 中实现的此功能：http: [//sublimetext.userecho.com/topic/19343-a-class-browser-integrated-with-minimap/](http://sublimetext.userecho.com/topic/19343-a-class-browser-integrated-with-minimap/)

与此同时，`CTRL+R`是唯一的选择......

# delphi - 检查 Advantage 数据库连接的运行状况

> ID：12906567
> 
> 赞同：2
> 
> 时间：2012-10-16T02:08:24.330
> 
> 标签：delphi, advantage-database-server

我保留了一个 Advantage TAdsConnection 对象池，并按要求分发它们。有时我会遇到一个导致 6610 错误的故障，我假设是因为它处于空闲状态并且连接已重置。我可以运行任何旧查询并捕获 6610，但是等待该特定错误需要很长时间。

有没有一种好方法可以在我将优势连接传回之前检查它的运行状况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T14:16:00.663

您可以使用[AdsIsConnectionAlive](http://devzone.advantagedatabase.com/dz/webhelp/Advantage11/index.html?ace_adsisconnectionalive.htm) ACE API 来测试连接。此 API 将向服务器发送一个小的“回声”数据包，以测试连接是否正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:07:13.180

它几乎是您在这方面的朋友。我会设置一个合理的超时并删除您的自定义池（除非您因为优化而绝对需要池）。我将在“超时”下将其归档为可能的问题。用返回一个新的连接实例替换你的代码（我假设它是一个函数调用），看看你是否可以复制它。

您还没有指定您正在使用的数据库版本。当我处理那个数据库时，Advantage 6/7/8 比 9/10 有更多的问题。

假设您的代码不是问题（说真的，禁用您的自定义池），请检查您的网络基础设施并致电支持。否则请阅读您的 TAdsConnection 类的文档：您可以增加服务器端和客户端的超时时间。

简短的回答：我不会手动合并，数据库具有内置的本质，使用它。

# android - 如何在 android 应用程序 webview 中使用 Facebook 访问令牌

> ID：12906570
> 
> 赞同：24
> 
> 时间：2012-10-16T02:08:34.843
> 
> 标签：android, facebook, android-webview

在我的应用程序中，用户打开了`WebView`facebook 个人资料页面 (http://m.facebook.com/some_page) 的移动版本。我的问题是，打开时`WebView`，用户需要输入 Facebook 的用户名和密码。由于我已经通过 FB SDK 获得了 Facebook 访问令牌，并且用户可能已经安装了 Facebook 应用程序，所以我认为有一些方法可以在打开`WebView`.

换句话说，如何使用我的应用程序中已有的访问令牌`WebView`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:57:49.093

您可以将该 AccessToken 单独存储在 Properties 中，并检查您是否使用 webview 然后传递该 accessToken，当用户使用 Ti.Facebook 时，然后使用另一个 AccessToken。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T15:25:32.863

根据我的理解，你不能。您为您的应用获取的访问令牌只能与您的应用的 API 凭据一起使用。即访问令牌仅适用于还包含您的应用程序的密钥和秘密的调用。即使您可以找到将这些传递到 WebView 的方法（[FB 的 Data Policies](http://developers.facebook.com/policy/#data)很可能未涵盖该方法），您也可能不得不让 WebView 假装使用 Android SDK（因为 FB 会检查调用的来源） . 这就是为什么我建议你不能。

您也不能让 WebView 使用他可能在他的股票浏览器中拥有的用户 cookie，因为出于安全原因，每个 WebView 都有自己的上下文。

如果您在应用程序中经常使用 FB 的 WebView，您可能能够从第一个 WebView 中提取 auth cookie，然后使用[CookieSyncManager](http://developer.android.com/reference/android/webkit/CookieSyncManager.html)将其插入到后续实例中。或者您可以保存第一个 WebView 的实例状态，然后重用它。这些只是可能行不通的想法；我还没有检查过它们。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-27T09:53:07.573

仔细阅读这个项目并尝试......我在我的项目中尝试了这个例子......它有效......

在你举这个例子之前，你必须在 facebook 中创建一个页面并获取一个 application-id，才能在这个项目中使用

[https://github.com/ddewaele/AndroidFacebookSample](https://github.com/ddewaele/AndroidFacebookSample)

# theory - 1 mod p：除了写1之外还有什么意义

> ID：12906573
> 
> 赞同：0
> 
> 时间：2012-10-16T02:08:51.250
> 
> 标签：theory, computation-theory

我正在研究计算分配理论。

我有一个问题，让 p ∈ N, p > 4。我们有一个 DFA A = (Σ, Q, δ, 0, F)，Q = {0, 1, . . . , k}, k ≥ p，并且存在一个 ∈ Σ，使得我们有 δ(q, a) = q + 1 mod p，对于所有状态 q ∈ Q。在这些条件下： (a) 通过对 n 的归纳显示对于所有 n ≥ 0 且 q < p，δ(q, a^(n·p)) = q；

我很困惑，因为 q + 1modp ....这不只是 1 吗？如果是这样，这似乎使我的问题无法证明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:26:12.767

*考虑*到 . _ `q + (1 mod p)`_ _*`q + 1``p > 4`*

 *它更有可能是`(q + 1) mod p`，这是一个完全不同的野兽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:11:49.297

1 mod 1 是 0，所以 1 mod p 不一定是 1...*

# symfony - 如何覆盖 SonataMediaBundle 中的 MediaController 并正确编写路由？

> ID：12906574
> 
> 赞同：0
> 
> 时间：2012-10-16T02:09:01.003
> 
> 标签：symfony, routes, overriding, bundle, media

我已经安装了 Sonata MediaBundle 来管理我网站中的媒体。一切正常，但现在我需要自定义 MediaController 的 viewAction。我已经复制了原始的 MediaController 并对其进行了更改。它是座位`src/Application/Sonata/MediaBundle/Controller`。我把它放在那里是因为该文件夹是在我扩展 MediaBundle 时使用`easy-extends`. 我正在为路由使用注释，因此我的路由文件的相关部分如下所示：

```
media:
    resource: '@Application/Sonata/MediaBundle/Controller'
    type:     annotation
    prefix: /media 
```

我的控制器看起来是这样的：

```
 /**
 * Log controller.
 *
 * @Route("/media")
 */
class MediaController extends BaseMediaController {
/**
 * @throws NotFoundHttpException
 *
 * @param string $id
 * @param string $format
 *
 * @return Response
 *
 * @Route("/view/{video_id}", name="media_view")
 * @Method("GET")
 * @Template()
 */
public function viewAction($id, $format = 'reference')
{
    $media = $this->getMedia($id);

    if (!$media) {
        throw new NotFoundHttpException(sprintf('unable to find the media with the id : %s', $id));
    }

    if (!$this->get('sonata.media.pool')->getDownloadSecurity($media)->isGranted($media, $this->getRequest())) {
        throw new AccessDeniedException();
    }

    return $this->render('SonataMediaBundle:Media:view.html.twig', array(
        'media'     => $media,
        'formats'   => $this->get('sonata.media.pool')->getFormatNamesByContext($media->getContext()),
        'format'    => $format
    ));
}
} 
```

到目前为止，除了注释之外没有任何变化。当我尝试访问 URL 时，出现此错误：`http://`my-server`/media/view/4`

```
 Cannot load resource "@Application/Sonata/MediaBundle/Controller". Make sure the "Application/Sonata/MediaBundle/Controller" bundle is correctly registered and loaded in the application kernel class.
500 Internal Server Error - FileLoaderLoadException 
```

该包在 AppKernel.php 中加载：

```
new Application\Sonata\UserBundle\ApplicationSonataUserBundle(), 
```

知道这里有什么问题吗？我测试了各种编写路线的方式，但没有任何改变。有没有更好的方法来覆盖 MediaCONtroller？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T03:07:44.100

我终于知道发生了什么事。由于重构操作，从下面的 routing.yml 导入路由的 _main 路由`app/config`发生了变化，并试图导入一个不存在的 media.yml，当然。由于 PHPStorm 具有的本地历史功能，我发现了它。感谢所有关注这个问题的人。

# java-native-interface - JNI 相机签名

> ID：12906578
> 
> 赞同：0
> 
> 时间：2012-10-16T02:09:26.697
> 
> 标签：java-native-interface, signature

我最近在我的项目中遇到一个JNI的请求，我不知道如何签名我的native方法，就像 `public void f(byte[] byte, Camera camera)`

我知道`byte[]`的签名是`([B)V`，但是相机真的很困扰我，有人可以帮我处理这个签名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:01:32.570

签名取决于您在本机端所做的事情。

如果你在 C 中做你的相机读取，那么它看起来像这样。

Java端的签名看起来像

```
class TestMe {
public native void acquireFromCamera(int camera, byte[] buffer);
} 
```

Javah 制作了一个头文件，如

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class TestMe */

#ifndef _Included_TestMe
#define _Included_TestMe
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     TestMe
 * Method:    acquireFromCamera
 * Signature: (I[B)V
 */
JNIEXPORT void JNICALL Java_TestMe_acquireFromCamera
  (JNIEnv *, jobject, jint, jbyteArray);

#ifdef __cplusplus
}
#endifm
#endif 
```

如果您将缓冲区数组从 Java 传递到 JNI，请不要忘记在传递之前锁定缓冲区。否则 GC 可能会在您采集时移动它。

C端调用参数为

```
(JNIEnv *myEnvironment, jobject this, jint camera, jbyteArray buffer); 
```

如果你想使用的底层 C 函数看起来像这样模糊，这种接口效果很好......

void readCamera(int camera, unsigned char * data);

如果底层 C 库要求您首先打开相机/采集流，最好在一个 JNI 函数中完成并在另一个函数中读取。您的本机代码最终位于单个 DLL/共享库中，只会加载一次。

让相机接口工作从 Java 到 C 代码并不难。

您的 C 代码可以调用 Java 代码的方法。在您的 JNI 方法中执行此操作，并且非常轻松。

我不建议尝试从您的库到 Java 的异步回调。可以做到，但非常耗时，而且很难做到不泄漏内存。

# javascript - iOS 4.3.5 上的 OpenLaszlo 4.9.0 DHTML 应用程序：JavaScript 执行超时

> ID：12906579
> 
> 赞同：2
> 
> 时间：2012-10-16T02:09:29.183
> 
> 标签：javascript, iphone, dhtml, openlaszlo, lzx

我无法在 iPhone 上加载我的 OpenLaszlo 应用程序（但在 iPad 上可以）。当我运行调试控制台时，报告以下错误：

JavaScript 执行超时。(LFCdhtml.js)

我正在运行 OpenLaszlo 4.9.0，DHTML 运行时。

有没有其他人遇到过这个错误？如果是这样，我该如何重构我的代码以避免它？其他在进行 Web 开发时遇到此错误的人建议将 JavaScript 执行分解为更小的部分：

[https://stackoverflow.com/a/7787988](https://stackoverflow.com/a/7787988)

如果我知道我的 LZX 文件中应该分成几部分的相应区域，那么我可以采用相同的方法。

# java - 检查字符串是否包含除句点和问号之外的特殊字符 Java

> ID：12906586
> 
> 赞同：0
> 
> 时间：2012-10-16T02:10:25.930
> 
> 标签：java

我试图找到一种方法来使用正则表达式和匹配来查看字符串是否包含除句点或逗号之外的特殊字符。我对正则表达式不是很熟悉，并且即将把我的头撞到墙上。我打电话时的正则表达式是什么

```
string.matches("??????"); 
```

将根据字符串是否包含句点或逗号以外的特殊字符返回布尔值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T02:15:24.980

你可以写：

```
string.matches("[a-zA-Z.? ]*") 
```

这将评估`true`字符串中的每个字符是否为小写字母`a-z`、大写字母`A-Z`、句点、问号或空格。（`false`当然，除此之外。）

# android - android 上 USB 上以太网的 VLAN 支持

> ID：12906590
> 
> 赞同：0
> 
> 时间：2012-10-16T02:11:52.970
> 
> 标签：android, network-programming, usb, ethernet

我打算在安卓平板电脑上开发一个以太网测试工具。所以我需要以下信息。

1.  android 是否有驱动程序可以在 USB 端口上访问以太网？
2.  驱动程序是否支持 VLAN？

我知道这不是一个编程问题。但我找不到其他地方可以得到这些查询的答案。请不要认为这是题外话。如果我能获得上述两个的详细信息，这将对我有所帮助。

# xcode - 无法构建 Corona SDK 项目：代码签名身份显示“未安装证书”

> ID：12906591
> 
> 赞同：1
> 
> 时间：2012-10-16T02:11:55.450
> 
> 标签：xcode, provisioning, keychain, coronasdk

我正在使用 Corona SDK，需要一些帮助来正确设置我的配置文件以构建我的项目。我之前成功地设置了我的应用程序、我的设备、我的配置文件，并正确构建了应用程序。然后有一天，*噗*——它停止工作了。大多数人说，“卸载一切然后再试一次。” 我做了很多次，但仍然没有运气。我对我采取的每一步都进行了分类，希望 stackoverflow 上的人可以帮助我。

我试图以两种不同的方式设置我的配置文件。首先，按照此处的 Corona SDK 文档：http: [//developer.coronalabs.com/demo/DeviceBuildGuide.pdf](http://developer.coronalabs.com/demo/DeviceBuildGuide.pdf)。在此尝试结束时，我无法从 Corona 的构建工具中选择代码签名身份。它说，“证书未安装”。这可能是因为我可能没有安装证书的私钥。我重复了 Corona 的步骤几次，但私钥从未出现在 Keychain Access 中。

在我的第二次尝试中，我采取了不同的方法：我从 Mac 和 Apple 开发人员的门户中清除了我的配置文件，并尝试从 XCode 的管理器窗口中刷新我的配置文件。仍然没有运气，但是这次我在尝试在 Corona 中构建时遇到错误，“不允许签名者...”

这是我尝试过的逐步叙述，包括屏幕截图：

**尝试#1**

首先，我清除了与我知道如何配置相关的所有内容。这是我清理完所有内容后的钥匙串访问管理器：

![在此处输入图像描述](../Images/37c304144ec82d50e9362c9ee317d526.png)

我还确保所有文件都已从 /Users/（您的用户）/Library/MobileDevice/Provisioning Profiles/ 中清除。此时，当我尝试在 Corona 中构建时，“代码签名身份”下没有列出任何内容：

![在此处输入图像描述](../Images/37b6d46624d2cdf9b28e400e259547b0.png)

看起来很干净。所以，接下来我开始关注 Corona 的构建教程（[http://developer.coronalabs.com/demo/DeviceBuildGuide.pdf](http://developer.coronalabs.com/demo/DeviceBuildGuide.pdf)）。第一步：向证书颁发机构申请证书：

![在此处输入图像描述](../Images/151b5a2a243c35e7c08431ef541bdb79.png)

一切都很顺利。接下来，是时候获得我的新开发证书了：

![在此处输入图像描述](../Images/23d635166a4b32b4f8906043bcc0ba0f.png)

下载并双击我的证书后，钥匙串访问窗口打开，如下所示：

![在此处输入图像描述](../Images/8f8f0e18834d59ea32bb96804edbf265.png)

我假设这一切都是正确的。我的设备已经添加到我的 Apple 开发帐户中，并且我已经有一个 App ID。我的应用程序的名称最近更改了，但我很确定我使用新名称成功构建了。我只是在 Corona 中更改了名称。我没有修改 App ID 或任何奇怪的东西。

我现在创建了一个开发和分发配置文件。

![在此处输入图像描述](../Images/1af78c5eb4b961645d815fedd36f839e.png)

...

如您所见，存在一个旧的无效配置文件，称为“BT Dev Prov Prof”。创建新个人资料后，我可以删除旧的无效个人资料

我对分发配置文件做了同样的事情。

我下载了分发配置文件并将其复制到 /Users/(your user)/Library/MobileDevice/Provisioning Profiles/

最后，尝试在 Corona 中再次构建：

![在此处输入图像描述](../Images/3165b533c51075cc51116d25c0814906.png)

没运气。

同样值得注意的是，我在 XCODE 中查看的配置文件显示“未找到有效签名身份”：

![在此处输入图像描述](../Images/76a7d58f3c654c3de27093761d2035fb.png)

我又尝试了一件没有任何区别的事情——我将 Apple 的根证书添加到我的钥匙串中：

![在此处输入图像描述](../Images/6778e5f9736fb36aec53e5b4670b8bbd.png)

**尝试#2**

我的第二次尝试涉及清除 Apple 和 Mac 上的所有配置内容，并让 XCode 尝试为我下载和安装所有内容。这是该尝试的分步说明：

首先，我清除了 XCode、钥匙串访问中的所有内容，并从 Apple 开发者门户中撤销了我的开发和分发证书：

![在此处输入图像描述](../Images/e6913e630caa4445fa4a5e795afe3899.png)

然后我在 XCode 的 Provisioning Profiles 中单击 Refresh 并被提示输入我的登录信息：

![在此处输入图像描述](../Images/6269803d46cc9502afe91f99794e2753.png)

XCode 然后告诉我我没有 iOS 开发证书或 iOS 分发证书。我两次要求它代表我请求一个：

![在此处输入图像描述](../Images/7aa8586b44e2f82ca46507ab77088947.png)

完成后，它向我显示了开发人员配置文件，但它仍然说“未找到有效的签名身份”：

![在此处输入图像描述](../Images/34ba1421ddc6c6ec91c1ade4cad7d5dd.png)

但在 keychan 访问工具中，情况看起来更好：

![在此处输入图像描述](../Images/a7b90a98f765d6fdbef43f62aa5bdca8.png)

所以，我决定尝试构建我的应用程序......并且（请打鼓）......

![在此处输入图像描述](../Images/38ebe969eb2ed00b587d5e1f01000417.png)

哎呀，还是没有运气！

任何帮助将非常感激。

*   布雷特

# sql - 每个月自动运行存储过程

> ID：12906592
> 
> 赞同：0
> 
> 时间：2012-10-16T02:11:58.460
> 
> 标签：sql, oracle, stored-procedures

嗨，我的存储过程将尝试从指定日期（sysdate - 30）删除数据，我想尝试在每个月初运行 Oracle 存储过程..

我怎样才能做到这一点 ？

提前谢谢，对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:16:53.460

可能可行的最简单的事情是使用该`DBMS_JOB`软件包。例如，这将`your_procedure`在每个月的第一天午夜运行，从下个月的第一天午夜开始，并将传入一个参数`sysdate - 30`

```
DECLARE 
  l_jobno PLS_INTEGER;
BEGIN
  dbms_job.submit( l_jobno,
                   'BEGIN your_procedure( sysdate - 30 ); END;',
                   add_months( trunc(sysdate,'MM'), 1 ),
                   q'{add_months( trunc(sysdate, 'MM'), 1 )}' );
  commit;
END; 
```

`DBMS_SCHEDULER`假设您使用的是更新版本的 Oracle，您还可以使用更新和更复杂的调度程序包。这可以变得更复杂，也更复杂`DBMS_JOB`——如果你的要求真的很简单，那么更轻的重量`DBMS_JOB`可能更容易学习和理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T06:14:09.533

你可以为它安排一个作业，..你必须在作业中调用存储过程。这样你就可以在每个月初运行存储过程..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:20:28.973

小提示：

Oracle 建议您从 DBMS_JOB 切换到 Oracle Scheduler。

```
BEGIN                      
  DBMS_SCHEDULER.CREATE_JOB ( 
   job_name        => 'your_job_name',
   job_type        => 'STORED_PROCEDURE',       -- see oracle documentation on types --
   job_action      => 'name of the procedure',
   start_date      => trunc(sysdate)+2/24,      -- every night @ 2 a.m.
   repeat_interval => 'FREQ=DAILY;BYHOUR=2',    -- daily @ 2 a.m.
   end_date        => NULL,
   enabled         => TRUE,
   comments        => 'your general comment');
END;
/ 
```

# javascript - 在jsp上禁用“org.hibernate.validator.constraints.NotBlank”

> ID：12906593
> 
> 赞同：2
> 
> 时间：2012-10-16T02:11:59.160
> 
> 标签：javascript, spring

我们在 Spring 框架中调用休眠验证。我们想知道如何在单选按钮选择的 .jsp 页面上禁用“org.hibernate.validator.constraints.NotBlank”验证。在没有单选按钮选择时，此验证应该有效。

# javascript - jQuery自动完成 - 在不更改请求的情况下获得响应？

> ID：12906595
> 
> 赞同：0
> 
> 时间：2012-10-16T02:12:16.237
> 
> 标签：javascript, jquery, autocomplete, jquery-autocomplete

我正在使用 jQuery 的`autocomplete`函数从**Suggest_address.php**获取可能的输入标签/值。

它看起来像这样：

![在此处输入图像描述](../Images/06a680abb1cfa0d2d74bcc17d2287702.png)

通常**，Suggest_address.php返回一个*****label***和***value***的关联数组。

但是由于**Suggest_address.php**确定输入是“zip”类型还是“city”类型，所以我返回一个额外的键/值对：“type”：“city”或“type”：“zip”。

我想将此值作为属性存储在输入框中，以便它可以在以后的查询中使用。

我该怎么做呢？我知道`source`自动完成函数的参数可能是一个接收请求和响应的函数，但是如何在不修改源的情况下从中获取响应？

现在我的初始化看起来像这样：

```
$('#addresssearch').autocomplete({
                    source: 'suggest_address.php',
                    minLength: 2
                }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:48:43.290

每个响应的数据对象可以包含您想要的任何其他键/值对。然后它们被包含在`ui`事件处理程序的参数中。

例如

```
{ label:'Chicago', value:'chicago', bestPizza: 'Chicago Pizza'}

$('#addresssearch').autocomplete({
    source: 'suggest_address.php',
    minLength: 2,
    select: function(event, ui) {
        var pizza = ui.item.bestPizza;
    }
}); 
```

对于以下 API 演示中的“查看源代码”上的 jQueryUI 现场演示示例 clcik：

[http://jqueryui.com/autocomplete/#custom-data](http://jqueryui.com/autocomplete/#custom-data)

# iphone - Objective-C 将 NSData 转换为 NSString

> ID：12906598
> 
> 赞同：5
> 
> 时间：2012-10-16T02:12:36.153
> 
> 标签：iphone, objective-c, ios, nsstring, nsdata

这是我尝试将 NSData 转换为 NSString 的代码，但程序返回“程序接收到的信号：SIGABRT”。

```
NSString *string= [NSString stringWithUTF8String:[data bytes]]; 
```

或者

```
NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T02:37:45.340

[这是一个高度投票的答案](https://stackoverflow.com/questions/2467844/convert-utf-8-encoded-nsdata-to-nsstring)，显示了如何做到这一点。简而言之：

```
NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

由于发送，第一个想法看起来像失败了`[data bytes]`。stringWithUTF8String 没有为 void * 做好准备。第二个想法看起来应该可行，即使输入为零。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T04:34:46.733

使用此代码

```
NSString* myString;
myString = [[NSString alloc] initWithData:nsdata encoding:NSASCIIStringEncoding]; 
```

另请参阅本教程..

[http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-01T12:41:47.620

**斯威夫特-3**

[![在此处输入图像描述](../Images/7a643c75ac9ed203f2d801fb21430a17.png)](https://i.stack.imgur.com/cHPT2.png)

**让字符串 = data.base64EncodedString()**

# mongodb - mongodb - 在集合中查找字段的总和（如果存在）

> ID：12906600
> 
> 赞同：2
> 
> 时间：2012-10-16T02:12:40.493
> 
> 标签：mongodb, mapreduce, mongodb-query, mongodb-php, nosql

我有以下 mongodb 结构

```
{
   "_id": ObjectId("507c80a143188f9610000003"),
   "date": ISODate("2012-10-15T21: 31: 13.0Z"),
   "uid": NumberInt(35920),
   "comp": NumberInt(770),
   "fields": {
     "rating": {
       "parent": "rating",
       "weight": NumberInt(2),
       "rel_weight": 0.11,
     },
     "capacity": {
       "parent": "capacity",
       "weight": NumberInt(4),
       "rel_weight": 0.89,
     },
  } 
} 
```

“字段”属性中有 2 个字段“评级”和“容量”。但是，每个条目可能有一组不同的字段。例如。尺寸、价格等

我想在“字段”下找到所有具有“评级”的条目，并获得所有此类条目的“权重”属性的总和。

我是 mongodb 的新手，我尝试使用 mapReduce 函数，但无济于事。

下面给出的是我使用的代码。请让我知道我哪里出错了，或者是否有更好的解决方案而不是这段代码。

```
function map(){
    emit(this._id,{weight:this.fields.rating.weight}); 
} 

function reduce(key,value){
    var sum = 0;
    for ( var i=0; i<value.length; i++ ) {
        sum += value[i].amount;
    }
    return sum;
}

res = db.collection_name.mapReduce(map, reduce, { query: {"fields.rating" : { $exists: true } }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:29:08.743

我终于能够弄清楚并让它工作。我在下面分享了我的代码。

```
var map = function(){
    if(this.fields.rating){
        emit(this.fields.rating.parent,this.fields.rating.weight);
    }
}

var reduce = function (k, vals) {
    var sum = 0;
    var count = 0;
    for (var i in vals) {
        sum += vals[i];
    count++;
    }
    var avg = (sum/count);
    return avg;
}

var res = db.myCollection.mapReduce(map, reduce, {out:"myoutput"}); 
```

# entity-framework - 发生异常时由两个不同的 DBContext 保存的回滚事务

> ID：12906601
> 
> 赞同：0
> 
> 时间：2012-10-16T02:12:42.360
> 
> 标签：entity-framework

一些用户操作后，我需要保存到两个不同的数据库。目前，我有以下内容：

```
using (EFEntities1 dc = new EFEntities1())
{
     dc.USERS.Add(user);
     dc.SaveChanges();
}

using (EFEntities2 dc = new EFEntities2())
{
     dc.USERS.Add(user);
     dc.SaveChanges();
} 
```

这是同一方法中的两个单独的代码块，所以我相信如果第二个失败，第一个不会回滚。如果出现故障，如何确保两个事务都回滚？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:30:41.497

您可以将它们包装在[TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)中。请注意，这可能会调用[DTC](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684146%28v=vs.85%29.aspx)。

```
using (TransactionScope scope = new TransactionScope())  
{
  using (EFEntities1 dc = new EFEntities1())
  {
     dc.USERS.Add(user);
     dc.SaveChanges();
  }

  using (EFEntities2 dc = new EFEntities2())
  {
     dc.USERS.Add(user);
     dc.SaveChanges();
  }

  scope.complete();
} 
```

# magento - Magento 时事通讯在注册页面上自动检查

> ID：12906602
> 
> 赞同：1
> 
> 时间：2012-10-16T02:12:56.510
> 
> 标签：magento, newsletter, subscribe

我正在运行 magento 1.7.0.2，我希望默认选中注册页面上的时事通讯订阅复选框。我遵循了一些技巧，但它们都是为旧版本的 magento 编写的。这是我尝试过但没有奏效的黑客之一的链接：[Force newsletter subscription in Magento](https://stackoverflow.com/questions/3447922/force-newsletter-subscription-in-magento)

任何帮助是极大的赞赏！

```
<div class="account-create">
<div class="page-title">
    <h1><?php echo $this->__('Complete your profile') ?></h1>
</div>
<?php echo $this->getChildHtml('form_fields_before')?>
<?php echo $this->getMessagesBlock()->getGroupedHtml() ?>
<?php /* Extensions placeholder */ ?>
<?php echo $this->getChildHtml('customer.form.register.extra')?>
<form action="<?php echo $this->getPostActionUrl() ?>" method="post" id="form-validate">
    <div class="fieldset">
        <input type="hidden" name="success_url" value="<?php echo $this->getSuccessUrl() ?>" />
        <input type="hidden" name="error_url" value="<?php echo $this->getErrorUrl() ?>" />
        <input type="hidden" name="success_url" value="<?php echo $this->getSuccessUrl() ?>" />
        <h2 class="legend"><?php echo $this->__('Personal Information') ?></h2>
        <ul class="form-list">
            <li class="fields">
                <?php echo $this->getLayout()->createBlock('customer/widget_name')->setObject($this->getFormData())->setForceUseCustomerAttributes(true)->toHtml() ?>
            </li>
            <li>
                <label for="email_address" class="required"><em>*</em><?php echo $this->__('Email Address') ?></label>
                <div class="input-box">
                    <input type="text" name="email" id="email_address" value="<?php echo $this->escapeHtml($this->getFormData()->getEmail()) ?>" title="<?php echo $this->__('Email Address') ?>" class="input-text validate-email required-entry" />
                </div>
            </li>
            <?php if ($this->isNewsletterEnabled()): ?>
            <li class="control">
                <div class="input-box">
                     <li>
     <input type="checkbox" name="is_subscribed" title="<?php echo $this->__('Sign Up for Newsletter') ?>" value="1" id="is_subscribed" <?php if($this->getFormData()->getIsSubscribed()){ ?> checked="checked"<?php }elseif($this->getFormData()->getIsSubscribed == NULL){ ?> checked="checked"<?php }?> />
    <label for="is_subscribed"><?php echo $this->__('Sign Up for Newsletter') ?></label>
</li>
                </div>
                <label for="is_subscribed"><?php echo $this->__('Sign Up for Newsletter') ?></label>
                <?php /* Extensions placeholder */ ?>
                <?php echo $this->getChildHtml('customer.form.register.newsletter')?>
            </li>
            <?php endif ?>
        <?php $_dob = $this->getLayout()->createBlock('customer/widget_dob') ?>
        <?php if ($_dob->isEnabled()): ?>
            <li><?php echo $_dob->setDate($this->getFormData()->getDob())->toHtml() ?></li>
        <?php endif ?>
        <?php $_taxvat = $this->getLayout()->createBlock('customer/widget_taxvat') ?>
        <?php if ($_taxvat->isEnabled()): ?>
            <li><?php echo $_taxvat->setTaxvat($this->getFormData()->getTaxvat())->toHtml() ?></li>
        <?php endif ?>
        <?php $_gender = $this->getLayout()->createBlock('customer/widget_gender') ?>
        <?php if ($_gender->isEnabled()): ?>
            <li><?php echo $_gender->setGender($this->getFormData()->getGender())->toHtml() ?></li>
        <?php endif ?>
        </ul>
    </div>
<?php if($this->getShowAddressFields()): ?>
    <div class="fieldset">
        <input type="hidden" name="create_address" value="1" />
        <h2 class="legend"><?php echo $this->__('Address Information') ?></h2>
        <ul class="form-list">
            <li class="fields">
                <div class="field">
                    <label for="company"><?php echo $this->__('Company') ?></label>
                    <div class="input-box">
                        <input type="text" name="company" id="company" value="<?php echo $this->escapeHtml($this->getFormData()->getCompany()) ?>" title="<?php echo $this->__('Company') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('company') ?>" />
                    </div>
                </div>
                <div class="field">
                    <label for="telephone" class="required"><em>*</em><?php echo $this->__('Telephone') ?></label>
                    <div class="input-box">
                        <input type="text" name="telephone" id="telephone" value="<?php echo $this->escapeHtml($this->getFormData()->getTelephone()) ?>" title="<?php echo $this->__('Telephone') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('telephone') ?>" />
                    </div>
                </div>
            </li>
        <?php $_streetValidationClass = $this->helper('customer/address')->getAttributeValidationClass('street'); ?>
            <li class="wide">
                <label for="street_1" class="required"><em>*</em><?php echo $this->__('Street Address') ?></label>
                <div class="input-box">
                    <input type="text" name="street[]" value="<?php echo $this->escapeHtml($this->getFormData()->getStreet(1)) ?>" title="<?php echo $this->__('Street Address') ?>" id="street_1" class="input-text <?php echo $_streetValidationClass ?>" />
                </div>
            </li>
        <?php $_streetValidationClass = trim(str_replace('required-entry', '', $_streetValidationClass)); ?>
        <?php for ($_i = 2, $_n = $this->helper('customer/address')->getStreetLines(); $_i <= $_n; $_i++): ?>
            <li class="wide">
                <div class="input-box">
                    <input type="text" name="street[]" value="<?php echo $this->escapeHtml($this->getFormData()->getStreet($_i)) ?>" title="<?php echo $this->__('Street Address %s', $_i) ?>" id="street_<?php echo $_i ?>" class="input-text <?php echo $_streetValidationClass ?>" />
                </div>
            </li>
        <?php endfor; ?>
            <li class="fields">
                <div class="field">
                    <label for="city" class="required"><em>*</em><?php echo $this->__('City') ?></label>
                    <div class="input-box">
                        <input type="text" name="city" value="<?php echo $this->escapeHtml($this->getFormData()->getCity()) ?>" title="<?php echo $this->__('City') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('city') ?>" id="city" />
                    </div>
                </div>
                <div class="field">
                    <label for="region_id" class="required"><em>*</em><?php echo $this->__('State/Province') ?></label>
                    <div class="input-box">
                        <select id="region_id" name="region_id" title="<?php echo $this->__('State/Province') ?>" class="validate-select" style="display:none;">
                            <option value=""><?php echo $this->__('Please select region, state or province') ?></option>
                        </select>
                        <script type="text/javascript">
                        //<![CDATA[
                            $('region_id').setAttribute('defaultValue', "<?php echo $this->getFormData()->getRegionId() ?>");
                        //]]>
                        </script>
                        <input type="text" id="region" name="region" value="<?php echo $this->escapeHtml($this->getRegion()) ?>" title="<?php echo $this->__('State/Province') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('region') ?>" style="display:none;" />
                    </div>
                </div>
            </li>
            <li class="fields">
                <div class="field">
                    <label for="zip" class="required"><em>*</em><?php echo $this->__('Zip/Postal Code') ?></label>
                    <div class="input-box">
                        <input type="text" name="postcode" value="<?php echo $this->escapeHtml($this->getFormData()->getPostcode()) ?>" title="<?php echo $this->__('Zip/Postal Code') ?>" id="zip" class="input-text validate-zip-international <?php echo $this->helper('customer/address')->getAttributeValidationClass('postcode') ?>" />
                    </div>
                </div>
                <div class="field">
                    <label for="country" class="required"><em>*</em><?php echo $this->__('Country') ?></label>
                    <div class="input-box">
                        <?php echo $this->getCountryHtmlSelect() ?>
                    </div>
                </div>
            </li>
        </ul>
        <input type="hidden" name="default_billing" value="1" />
        <input type="hidden" name="default_shipping" value="1" />
    </div>
<?php endif; ?>
    <div class="fieldset">
        <h2 class="legend"><?php echo $this->__('Login Information') ?></h2>
        <ul class="form-list">
            <li class="fields">
                <div class="field">
                    <label for="password" class="required"><em>*</em><?php echo $this->__('Password') ?></label>
                    <div class="input-box">
                        <input type="password" name="password" id="password" title="<?php echo $this->__('Password') ?>" class="input-text required-entry validate-password" />
                    </div>
                </div>
                <div class="field">
                    <label for="confirmation" class="required"><em>*</em><?php echo $this->__('Confirm Password') ?></label>
                    <div class="input-box">
                        <input type="password" name="confirmation" title="<?php echo $this->__('Confirm Password') ?>" id="confirmation" class="input-text required-entry validate-cpassword" />
                    </div>
                </div>
            </li>
            <?php echo $this->getChildHtml('form.additional.info'); ?>
        </ul>
    </div>
    <div class="buttons-set">
        <p class="required"><?php echo $this->__('* Required Fields') ?></p>
        <p class="back-link"><a href="<?php echo $this->escapeUrl($this->getBackUrl()) ?>" class="back-link"><small>&laquo; </small><?php echo $this->__('Back') ?></a></p>
        <button type="submit" title="<?php echo $this->__('Submit') ?>" class="button"><span><span><?php echo $this->__('Submit') ?></span></span></button>
    </div>
</form>
<script type="text/javascript">
//<![CDATA[
    var dataForm = new VarienForm('form-validate', true);
    <?php if($this->getShowAddressFields()): ?>
    new RegionUpdater('country', 'region', 'region_id', <?php echo $this->helper('directory')->getRegionJson() ?>, undefined, 'zip');
    <?php endif; ?>
//]]>
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T20:31:02.853

这对我有用。如果您希望在默认情况下选中客户帐户注册页面上的时事通讯，请获取此文件：/app/design/frontend/your_theme/default/template/customer/form/regist‌​er.phtml

找到这一行：

```
<?php if ($this->isNewsletterEnabled()): ?> 
```

在它的正下方，添加以下内容：

```
<?php
$checked = true;
if($this->getFormData()->getEmail()) {
if(!$this->getFormData()->getIsSubscribed()) {
    $checked = true;
    }
}   
 ?> 
```

然后找到这个div

```
<div class="input-box"> 
```

将 div 中的代码替换为以下代码：

```
<input type="checkbox" name="is_subscribed" title="<?php echo $this->__('Sign Up for Newsletter') ?>" value="1" id="is_subscribed" checked="checked" class="checkbox" /> 
```

就是这样！保存并上传文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:37:27.333

请在 register.phtml 文件中找到以下代码：

```
<?php if ($this->isNewsletterEnabled()): ?>
        <li class="control">
            <div class="input-box">
                 <li>
             <input type="checkbox" name="is_subscribed" title="<?php echo $this->__('Sign Up for Newsletter') ?>" value="1" id="is_subscribed" <?php if($this->getFormData()->getIsSubscribed()){ ?> checked="checked"<?php }elseif($this->getFormData()->getIsSubscribed == NULL){ ?> checked="checked"<?php }?> />
            <label for="is_subscribed"><?php echo $this->__('Sign Up for Newsletter') ?></label>
        </li>
    </div>
    <label for="is_subscribed"><?php echo $this->__('Sign Up for Newsletter') ?></label>
    <?php /* Extensions placeholder */ ?>
    <?php echo $this->getChildHtml('customer.form.register.newsletter')?>
</li>
<?php endif ?> 
```

并**替换**为以下代码：

```
<?php if ($this->isNewsletterEnabled()): ?>
<?php
$checked = true;
if($this->getFormData()->getEmail()) {
    if(!$this->getFormData()->getIsSubscribed()) {
        $checked = false;
    }
}   
 ?>
<li class="control">
<div class="input-box">
    <input type="checkbox" name="is_subscribed" title="<?php echo $this->__('Sign Up for Newsletter') ?>" value="1" id="is_subscribed"<?php if($checked): ?> checked="checked"<?php endif; ?> class="checkbox" />
</div>
<label for="is_subscribed"><?php echo $this->__('Sign Up for Newsletter') ?></label>
<?php /* Extensions placeholder */ ?>
<?php echo $this->getChildHtml('customer.form.register.newsletter')?>
</li>
<?php endif ?> 
```

我为此使用了php，因为。通过这个我们可以在用户提交表单并发生错误后获得用户偏好

希望这个帮助！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-21T08:34:51.897

请在 register.phtml 文件中添加以下代码：

添加 chaked End of line 输入类型

```
<input type="checkbox" name="is_subscribed" title="<?php echo $this->__('Sign Up for Newsletter') ?>" value="1" id="is_subscribed"<?php if($this->getFormData()->getIsSubscribed()): ?> checked="checked"<?php endif; ?> class="checkbox" checked /> 
```

# python - pylint 'disable' 和 'disable-msg' 有什么区别？

> ID：12906603
> 
> 赞同：8
> 
> 时间：2012-10-16T02:13:11.923
> 
> 标签：python, pylint

我看到一些代码

```
# pylint: disable=W0123 
```

有些有

```
# pylint: disable-msg=W0123 
```

它们只是同义词吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T02:16:30.817

从 pylint 0.21.0 开始不推荐使用 disable-msg。当不再需要支持旧版本时，将其更新为“禁用”。

# c++ - cin 用于未知数量的物体？

> ID：12906606
> 
> 赞同：1
> 
> 时间：2012-10-16T02:13:46.947
> 
> 标签：c++, queue, cin

对于一个项目，我必须创建一个队列，其中包含人员姓名、他们想要的服务数量以及他们想要的每项服务的列表。可以多次要求相同的服务。

基本上它的输入看起来像这样。

```
Dave 3 spa sauna pedicure
sarah 4 spa spa walk sauna
jim 1 walk
. 
```

这 ”。” 表示我所有输入的结束。无论何时调用 walk ，一旦他们行走，他们就不再想做其他任何事情并离开。所以在莎拉的情况下，她去了两次水疗中心，然后走路离开。她没有去她的桑拿浴室。

我的问题是我不知道我将如何实际输入信息。我假设我有一个表示人的类，但我不知道如何制作它，以便他们可以放置随机数量的人。如果只有 3 个人，我会使用 for 循环并将每个人保存到数组中的不同位置。

有没有办法简单地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:03:51.237

您拥有最终用户输入的特殊符号，因此您可以要求输入，直到获得此符号（“。”）。代码可以是这样的：

```
while(true)
{
    std::string name;
    std::cin >> name;

    if(name == ".")
        break;

    // number of services
    size_t n = 0;
    std::cin >> n;

    // list of services
    std::vector<std::string> services(n);
    for(size_t i = 0; i < n; ++i)
        std::cin >> services[i];

    // Here you can process user
    // You know user's name and have std::vector of his services
} 
```

此代码无限循环，直到用户名等于“.”。

如果要输出所有用户或在列表中处理它们，则必须将它们存储在向量中。

```
struct User
{
    User(const std::string& _name):
        name(_name)
    {
    }

    std::string name;
    std::vector<std::string> services;
};

std::vector<User> users;

int main( )
{
    std::vector<User> users;

    while(true)
    {
        std::string name;
        std::cin >> name;
        if(name == ".")
            break;

        users.push_back(User(name));

        size_t n = 0;
        std::cin >> n;

        for(size_t i = 0; i < n; ++i)
        {
            std::string serviceName;
            std::cin >> serviceName;

            users.back().services.push_back(serviceName);
        }
    }

    for(size_t n = users.size(), i = 0; i < n; ++i)
    {
        std::cout << users[i].name;
        std::cout << " ";
        std::cout << users[i].services.size();
        std::cout << " ";
        for(size_t s = users[i].services.size(), j = 0; j < s; ++j)
            std::cout << users[i].services[j] << " ";
        std::cout << std::endl;
    }

    return 0;
} 
```

此代码读取用户及其服务，然后将其打印回来。

如果您知道每个用户都在不同的行上，则可以有另一种方式来读取每个用户。

```
std::string l;
std::getline(std::cin, l);

std::istringstream ss(l);

std::string name;
ss >> name;
if(name == ".")
    break;

users.push_back(User(name));

size_t n = 0;
ss >> n;

for(size_t i = 0; i < n; ++i)
{
    std::string serviceName;
    ss >> serviceName;

    users.back().services.push_back(serviceName);
} 
```

我正在从输入流（cin）中读取整行，然后创建字符串流（ss）并从中读取用户信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:04:33.243

读入名称，一旦他们输入动作的数量，他们将通过该数字执行循环。创建一个常量字符来表示每个可能的位置（据我所知，他们可以访问指定的位置）。如果下一次读取是步行，则结束循环。这是您代码的非常粗略的大纲（根据我的理解），这是为了检查我的任何错误而匆忙完成的

```
 Declare consts ex:
        const string SPA = "spa";
        const string PEDICURE = "pedicure";
        //etc..etc..

    Decalre vars ex:
        int actions; //amount of actions
        //etc...e

tc..
WHILE name is not the dot

    prompt user for name
    read in name

    prompt user for amount of actions
    read in actions

    DO THIS
        prompt user for action
        read in action into string

        convert to lowercase(optional)
        compare action to possible places
            increment chosen place
        increment counter var(s)
    WHILE input is not walk and actions does not exceed max actions

display output 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-23T13:29:13.977

对于`getline`很容易：

```
string line;
while(getline(cin,line))
{
    if (line.empty())
       break;
    file.push_back(line);
} 
```

但是`cin objects`，**我找到了一种在最后打破的方法，而不需要任何打破字符**。您必须使用相同的变量来 cin 所有对象。使用后，您需要将其设置为默认退出值。然后检查下一个cin之后你的变量是否相同。例子：

```
string o;
while(true){
    cin>>o;
    if (o.compare("tmp")==0)
        break;
    // your normal code
    o="tmp";
} 
```

# c# - Excel._Application.get_Worksheets() 上的 0x800A03EC 错误

> ID：12906611
> 
> 赞同：0
> 
> 时间：2012-10-16T02:14:52.873
> 
> 标签：c#, excel, exception, vsto

我有以下代码在工作表集合中进行名称检查，如果找到该工作表则返回 true。

```
foreach (Excel.Worksheet sheet in xlApp.Worksheets)
{
    if (sheet.Name.Equals("myXlSheet"))
    {
        resultWorkSheet = (Excel.Worksheet)xlApp.Worksheets.Item["myXlSheet"];
            return true;
    }
} 
```

出于某种原因，有时`xlApp.Worksheets`会给出**0x800A03EC**错误。虽然它似乎并不总是发生。而且我无法在开发环境中重现同样的错误，这让我很困惑。

那么这里有什么问题呢？有什么好的想法或建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:09:50.340

您的代码未指定您正在使用的工作簿，因此对 Worksheets 的调用默认为活动工作簿[（旧但相关的 MSDN）](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.worksheets%28v=office.11%29.aspx)。如果当前用户的活动工作簿*不知何故*不包含该工作表或没有工作簿，则会发生错误。显然，这不应该发生，但在编程中有时几乎总是会发生不可能的事情。

我没有对此进行测试，但我假设将您的问题行更新为此应该可以工作：

```
resultWorkSheet = (Excel.Worksheet)sheet.Parent.Worksheets.Item["myXlSheet"]; 
```

**编辑**：我想了更多，并意识到您实际上并没有指出错误发生的位置。

在尝试执行 for 循环之前，您应该检查以确保有工作簿。您可以通过获取类似以下的计数来检查这一点：

```
if (xlApp.Workbooks.Count != 0) 
{
   //Your loop here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T02:18:00.643

你[用谷歌搜索过那个错误代码](http://www.google.com/search?q=0x800A03EC)吗？我看到了大量关于 Excel 互操作的结果：

*   [HRESULT：Worksheet.range 上的 0x800A03EC](https://stackoverflow.com/questions/7099770/hresult-0x800a03ec-on-worksheet-range)
*   [在 C#-ASP.NET 2 中保存 excel 文件时出现错误“HRESULT 异常：0x800A03EC”](http://www.xtremedotnettalk.com/showthread.php?t=101649)
*   [为什么在 MATLAB 中使用 XLSWRITE 时会收到错误（错误代码：0x800A03EC）？](http://www.mathworks.com/support/solutions/en/data/1-3QJ5I3/index.html?solution=1-3QJ5I3)

Excel 互操作归结为 COM，因此您得到错误的语言/上下文并不重要；它仍然可能是您做错了什么的线索。

它看起来像是某种最大长度，无论是单元格中的文本，还是单元格的数量等。

# maven - 在家庭 Tomcat 上设置 Maven 存储库的简单方法

> ID：12906612
> 
> 赞同：0
> 
> 时间：2012-10-16T02:14:54.050
> 
> 标签：maven

我创建了一个测试工件。Maven 在本地机器上找到它。现在我想在我的主页上发布它。任何人都可以就它或文档提出建议。

我尝试了手动方式，但未能找到对 .pom 文件等内容的良好描述。maven-automated 方式也不是很清楚的记录。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:37:43.820

结果非常简单 - 我将文件夹“sample”从 C:\Users\admin.m2\repository\ 复制到 ...\Tomcat7.0\webapps\ROOT\maven2\ 并且能够在另一个上运行测试构建电脑通过http。显然，可能有同样简单但更优雅的方式。

# macos - OS X 10.7.5 中 Chrome 的扩展文件在哪里？

> ID：12906614
> 
> 赞同：0
> 
> 时间：2012-10-16T02:15:12.200
> 
> 标签：macos, google-chrome, gwt, google-chrome-extension

每个人似乎都可以在这个地址“~/Library/Application Support/Google/Chrome/Default/Extensions”中找到它，但是，由于某种原因，我什至在“Application Support”中都没有“Google”文件夹。有人知道它可能在哪里或如何找到它吗？

这是我尝试解决 Chrome 22 在 OS X 上未加载扩展的问题的一部分。更具体地说，是 GWT Developer 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:55:39.213

`find /Users/username/ -type d -name Google 2> /dev/null`在终端应用程序上 运行。

看看[https://stackoverflow.com/a/12872962/944634](https://stackoverflow.com/a/12872962/944634)

# c++ - 自适应正交 (C++)

> ID：12906618
> 
> 赞同：3
> 
> 时间：2012-10-16T02:15:43.997
> 
> 标签：c++, numerical-integration, numerical-analysis

我在 C++ 中的自适应梯形规则算法存在问题——基本上，无论指定的容差如何，我都会得到相同的精确近似值。对于较大的公差，递归应该很早就停止（因为 abs(coarse-fine) 将小于 3.0*large tolerance 并且递归的 minLevel 约为 5）。

但是，此函数的作用是运行最大次数，而不管公差的选择如何。我哪里搞砸了？编辑：也许我的辅助函数有问题？

```
double trap_rule(double a, double b, double (*f)(double),double tolerance, int count)
{
    double coarse = coarse_helper(a,b, f); //getting the coarse and fine approximations from the helper functions
    double fine = fine_helper(a,b,f);

    if ((abs(coarse - fine) <= 3.0*tolerance) && (count >= minLevel))
        //return fine if |c-f| <3*tol, (fine is "good") and if count above
        //required minimum level
    {
        return fine;
    }
    else if (count >= maxLevel)
        //maxLevel is the maximum number of recursion we can go through
    {
        return fine;

    }
    else
    {
        //if none of these conditions are satisfied, split [a,b] into [a,c] and [c,b] performing trap_rule
        //on these intervals -- using recursion to adaptively approach a tolerable |coarse-fine| level
        //here, (a+b)/2 = c
        ++count;
        return  (trap_rule(a, (a+b)/2.0, f, tolerance/2.0, count) + trap_rule((a+b)/2.0, b, f, tolerance/2.0, count));
    }
}

EDIT: Helper and test functions:

//test function
double function_1(double a)
{
    return pow(a,2);
}

//"true" integral for comparison and tolerances

//helper functions

double coarse_helper(double a, double b, double (*f)(double))
{
    return 0.5*(b - a)*(f(a) + f(b)); //by definition of coarse approx
}

double fine_helper(double a, double b, double (*f)(double))
{
    double c = (a+b)/2.0;
    return 0.25*(b - a)*(f(a) + 2*f(c) + f(b)); //by definition of fine approx
}

double helper(double a, double b, double (*f)(double x), double tol)
{
    return trap_rule(a, b, f, tol, 1);
} 
```

这是 main() 中的内容：

```
std::cout << "First we approximate the integral of f(x) = x^2 on [0,2]" << std::endl;

    std::cout << "Enter a: ";
    std::cin >> a;

    std::cout << "Enter b: ";
    std::cin >> b;

    true_value1 = analytic_first(a,b);

    for (int i = 0; i<=8; i++)
    {
        result1 [i] = helper(a, b, function_1, tolerance[i]);
        error1 [i] = fabs(true_value1 - result1 [i]);
    }

    std::cout << "(Approximate integral of x^2, tolerance, error )" << std::endl;
    for (int i = 0; i<=8; i++)
    {
        std::cout << "(" << result1 [i] << "," << tolerance[i] << "," << error1[i] << ")" << std::endl;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T04:35:14.050

我发现与您建议的情况完全相反——算法仅在`minLevel`步骤后终止——原因是由于您使用了`abs`，而不是`fabs`在容差测试中。将`abs`其参数转换为 an `int`，因此任何小于 1 的错误都会被舍入为零。

`abs`就位后，我从一个非常相似的程序中得到了这个输出：

```
(0.333496,0.001,0.00016276)
(0.333496,0.0001,0.00016276)
(0.333496,1e-05,0.00016276)
(0.333496,1e-06,0.00016276)
(0.333496,1e-07,0.00016276)
(0.333496,1e-08,0.00016276)
(0.333496,1e-09,0.00016276)
(0.333496,1e-10,0.00016276)
(0.333496,1e-11,0.00016276) 
```

替换为`fabs`我得到这个：

```
(0.333496,0.001,0.00016276)
(0.333374,0.0001,4.06901e-05)
(0.333336,1e-05,2.54313e-06)
(0.333334,1e-06,6.35783e-07)
(0.333333,1e-07,3.97364e-08)
(0.333333,1e-08,9.93411e-09)
(0.333333,1e-09,6.20882e-10)
(0.333333,1e-10,3.88051e-11)
(0.333333,1e-11,9.7013e-12) 
```

# ios - Xcode 4.5 + UIScrollView：看不到支柱和弹簧（OSX 10.8 Mountain Lion）

> ID：12906619
> 
> 赞同：15
> 
> 时间：2012-10-16T02:15:48.757
> 
> 标签：ios, xcode, interface-builder, ios6, osx-mountain-lion

**免责声明：** iOS 开发的全新。对我放轻松。

在 Xcode 4.5 中遇到了一个有趣的情况。我的尺寸检查器如下所示：

![在此处输入图像描述](../Images/921ab0b81a6fc51c27175c540d28d88c.png)

...而且我**根本看不到支柱和弹簧区域**。

真正奇怪的部分是，当我点击连接检查器之类的东西时，我确实看到了支柱和弹簧区域，但只是一瞬间，当我回来时它就消失了。

这是正常的吗？有没有一种简单的方法来纠正这种行为？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-16T02:23:20.753

在 Xcode 4.5 中，对于 iOS 6 和 OSX 10.8 开发，默认启用自动布局。

要关闭它，请打开您的 xib 文件并单击空白点（不是在视图或任何组件上）。在检查器面板上，选择第一个选项卡并删除“使用自动布局”复选框。你的弹簧和支柱将回来。

![在此处输入图像描述](../Images/53a1d8fcdb995d5ee7dde386cafbc752.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T02:22:47.397

您为视图启用了自动布局，将其关闭，它将看起来像您期望的那样。Autolayout 是 iOS6 的一项新功能，它允许对事物的布局方式进行更精细的控制，并通过 autoresizing 遮罩真正增强了以前通过 struts 和 sprints 可用的功能。

要关闭，请打开识别检查器，然后取消选中“使用自动布局”

![在此处输入图像描述](../Images/0261af02b7d1b645fd6501a3db088b04.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T16:55:51.433

Same answer as the other two, but for projects using storyboards: instead of opening a xib file, you can simply open the storyboard to see the "Use Autolayout" checkbox in the inspector panel.

# xml - 删除 top.links url，然后通过 local.xml 重新添加带有自定义标签的链接

> ID：12906620
> 
> 赞同：2
> 
> 时间：2012-10-16T02:15:54.247
> 
> 标签：xml, magento

我正在尝试删除 top.links 中的“*我的帐户”*链接，然后如果客户使用自定义标签登录或退出但没有运气，则重新引入它们。任何人都有任何想法

```
<reference name="root">
    <reference name="top.links">
        <action method="removeLinkByUrl"><url helper="customer/getAccountUrl"/><position>10</position></action>
    </reference>
    <reference name="top.links">
            <customer_logged_out>
                <action method="addLink" translate="label title" module="customer"><label>Register</label><url helper="customer/getRegisterUrl"/><title>Register</title><prepare/><urlParams/><position>10</position></action>
                <remove name="checkout_cart_link" />
            </customer_logged_out>

            <customer_logged_in>
                <action method="addLink" translate="label title" module="customer"><label>My Account</label><url helper="customer/getAccountUrl"/><title>My Account</title><prepare/><urlParams/><position>10</position></action>
            </customer_logged_in>

    </reference>
</reference> 
```

编辑：

我正在使用 Magento 1.7。澄清一下，删除“我的帐户”链接可以使用

`<action method="removeLinkByUrl"><url helper="customer/getAccountUrl"/><position>10</position></action>`

但是我无法使用`method="addLink"`.

* * *

解决方案：

我将 customer.xml 从 /app/design/frontend/base/layout/ 复制到我的模板布局目录中并添加：

```
<customer_logged_in>
    <reference name="top.links">
        <action method="addLink" translate="label title" module="customer"><label>Log Out</label><url helper="customer/getLogoutUrl"/><title>Log Out</title><prepare/><urlParams/><position>100</position></action>
        <action method="addLink" translate="label title" module="customer"><label>My Account</label><url helper="customer/getAccountUrl"/><title>My Account</title><prepare/><urlParams/><position>10</position></action>
    </reference>
</customer_logged_in> 
```

和

```
<customer_logged_out>
    <reference name="top.links">
        <action method="addLink" translate="label title" module="customer"><label>Register</label><url helper="customer/getRegisterUrl"/><title>Register</title><prepare/><urlParams/><position>10</position></action>
    </reference>
</customer_logged_out> 
```

理想情况下，我更喜欢使用 local.xml 进行这些更改，但这也有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:04:00.157

看来您不需要将 customer_logged_in 节点放在“top.links”参考中。试试这个：

```
<customer_logged_out>
    <reference name="top.links">
           <action method="addLink" translate="label title" module="customer"><label>Register</label><url helper="customer/getRegisterUrl"/><title>Register</title><prepare/><urlParams/><position>10</position></action>
           <remove name="checkout_cart_link" />
    </reference>
</customer_logged_out>

<customer_logged_in>
    <reference name="top.links">
        <action method="addLink" translate="label title" module="customer"><label>Log Out</label><url helper="customer/getLogoutUrl"/><title>Log Out</title><prepare/><urlParams/><position>10</position></action>
    </reference>
</customer_logged_in> 
```

并查看这本精美的手册以完全了解如何在 local.xml 中编辑 top.links： [http ://www.classyllama.com/development/magento-development/editing-magentos-top-links-the-better-way](http://www.classyllama.com/development/magento-development/editing-magentos-top-links-the-better-way)

# google-apps-script - 使用 Array 值查询 ScriptDb 记录

> ID：12906624
> 
> 赞同：2
> 
> 时间：2012-10-16T02:16:51.467
> 
> 标签：google-apps-script

是否可以使用包含特定条目的数组值查询我的 ScriptDB 数据库中的所有记录？例如，我的记录结构看起来像这样 {Name: 'Fred', Titles: ['Captain', 'MVP']}

是否可以查询标题中包含“MVP”的所有记录？我的意思是，除了遍历数据库中的所有条目之外？

谢谢你，
维什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:39:24.073

抱歉不行。

有一个关于此的[问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1733)已打开。您可能希望为它加注*星*标以跟踪更新并为它投票。

# jquery - 如何将类添加到您单击的项目？

> ID：12906627
> 
> 赞同：0
> 
> 时间：2012-10-16T02:17:15.147
> 
> 标签：jquery

我有一个列表“abc”。默认情况下，第一个被选中。如果我点击menu3，它应该设置为“current”，并且menu1 'current' 类应该被删除。请帮助我使用 jQuery 编写此查询。

```
<ul class="abc">
    <li><a href="#" class="current">menu1</a></li>
    <li><a href="#">menu2</a></li>
    <li><a href="#">menu3</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:20:47.153

```
var anchors = $('li a');

anchors.on('click', function(e){
    e.preventDefault();
    anchors.removeClass('current');
    $(this).addClass('current');
}); 
```

[http://jsfiddle.net/n8R6X/](http://jsfiddle.net/n8R6X/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T02:21:39.603

```
$('.abc a').click(function(e) {
    e.preventDefault();
    $('.abc a').removeClass('current');
    $(this).addClass('current');
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/NfcPF/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T02:21:53.113

```
$('.abc a').on('click', function(e) {
    e.preventDefault();
    $('.abc a').removeClass('current');
    $(this).addClass('current');
}); 
```

看：

*   [http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)
*   [http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

演示：http: [//jsfiddle.net/KDULM/](http://jsfiddle.net/KDULM/)

# php - 通过 cURL 远程登录到 hoosuite

> ID：12906629
> 
> 赞同：0
> 
> 时间：2012-10-16T02:17:19.113
> 
> 标签：php, curl

我正在尝试使用 cURL 远程登录到 Hootsuite。我想在我自己的应用程序中的 iframe 中显示 Hootsuite 应用程序。我正在使用以下代码，但它似乎不起作用。我只是看到登录页面，但没有错误 re: login.

```
$username="xxx"; 
$password="yyy"; 
$url="https://hootsuite.com/login"; 
$cookie="cookie.txt"; 

$postdata = "loginInfo[email]=".$username."&loginInfo[password]=".$password; 

$ch = curl_init(); 
curl_setopt ($ch, CURLOPT_URL, $url); 
curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;    rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 0); 
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie); 
curl_setopt ($ch, CURLOPT_REFERER, $url); 

curl_setopt ($ch, CURLOPT_POSTFIELDS, $postdata); 
curl_setopt ($ch, CURLOPT_POST, 1); 
$result = curl_exec ($ch); 

echo $result;  
curl_close($ch); 
```

# image - 将带有 Exif 信息的图像从 Windows Phone 发送到 Java 服务器

> ID：12906630
> 
> 赞同：3
> 
> 时间：2012-10-16T02:17:44.913
> 
> 标签：image, send, windows-phone, exif, java-server

我是 Windows Phone（和 StackOverflow tbh）编程的新手。目前，我正在处理一项任务，该任务涉及将存储在 Windows Phone 存储中的图像（带有 Exif 信息）发送到 Java 服务器。到目前为止，我已经成功地从 Windows Phone 客户端发送了字节流并在 Java 端构建了图像，但是，Exif 信息不知何故丢失了。我相信这只是我在 Windows Phone 上发送它的方式导致了问题。非常感谢任何帮助或指导！这是我在 Windows Phone 客户端上的代码：

```
// Windows Phone Client code (MainPage.xaml.cs)
// This function is called when an image is selected from
// the task PhotoChooserTask ptask, which brings
// a popup that allows the user to choose an image
// from the phone's storage
void ptask_Completed(object sender, PhotoResult e)
{
       if (e.TaskResult == TaskResult.OK && e.ChosenPhoto != null)
       {
           //Take JPEG stream and decode into a WriteableBitmap object
           App.CapturedImage = PictureDecoder.DecodeJpeg(e.ChosenPhoto);

           // Attempt to send the image
           WriteableBitmap pic = new WriteableBitmap(App.CapturedImage);
           MemoryStream stream = new MemoryStream();

           pic.SaveJpeg(stream, App.CapturedImage.PixelHeight, App.CapturedImage.PixelWidth, 0, 100);
           stream.Seek(0, SeekOrigin.Begin);
           client.Send(stream);

           // Close the socket connection explicitly
           client.Close();
       }
   } 
```

这是 SocketClient.cs 中的代码

```
 public string Send(MemoryStream data)
       {
       byte[] msData = data.ToArray();

       if (_socket != null)
       {
           // Create SocketAsyncEventArgs context object
           SocketAsyncEventArgs socketEventArg = new SocketAsyncEventArgs();

           // Set properties on context object
           socketEventArg.RemoteEndPoint = _socket.RemoteEndPoint;
           socketEventArg.UserToken = null;

           socketEventArg.Completed += new EventHandler<SocketAsyncEventArgs>(delegate(object s, SocketAsyncEventArgs e)
           {
               _clientDone.Set();
           });

           // Add the data to be sent into the buffer
           socketEventArg.SetBuffer(msData, 0, msData.Length);

           // Sets the state of the event to nonsignaled, causing threads to block
           _clientDone.Reset();

           // Make an asynchronous Send request over the socket
           _socket.SendAsync(socketEventArg);

       }
       else
       {
           response = "Socket is not initialized";
       }

       return response;
   } 
```

在 Java 服务器上，

```
public static void main(String[] args) {
    ServerSocket serverSocket;
    Socket client;
    try {
        serverSocket = new ServerSocket(PORT_NUMBER);
        while (true) {
            client = serverSocket.accept();

            // Extract exif info
            InputStream inputStream = client.getInputStream();
            InputStream stream = new BufferedInputStream(inputStream);

            // Create file from the inputStream
            File file = new File("image.jpg");
            try {
                OutputStream os = new FileOutputStream(file);
                byte[] buffer = new byte[4096];
                    for (int n; (n = stream.read(buffer)) != -1;) {
                        os.write(buffer, 0, n);
                    }
                } 
```

输出图像与从 windows phone 发送的图像相同，只是没有任何 Exif 信息。任何人都可以指出我做错了什么导致信息丢失？我猜是因为我在 windows phone 代码中调用了 SaveJpeg 函数，重写了图像文件，并在那里丢失了所有信息，但我不知道如何将图像转换为字节并流式传输。

非常感谢您的帮助！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:21:44.793

我找到了自己问题的答案。对于那些可能对此有疑问的人。我只是使用：

```
Byte[] imageData = new byte[e.ChosenPhoto.Length];
e.ChosenPhoto.Position = 0;
e.ChosenPhoto.Read(imageData, 0, imageData.Length); 
```

然后在我的发送函数中发送字节数组：

```
socketEventArg.SetBuffer(imageData, 0, imageData.Length); 
```

# windows - 在 Windows Phone 应用程序中更改我的 xap 名称

> ID：12906635
> 
> 赞同：3
> 
> 时间：2012-10-16T02:17:58.863
> 
> 标签：windows, windows-phone-7

我创建了一个名为的新项目`Graphics`，并对其进行了编码并将应用程序提交到 windows 市场。但似乎这个术语`Graphics`非常通用，因此我的应用程序失败了。他们提到它是为了更改 XAP 名称。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T04:39:07.667

双击`properties`您的`solution explorer`并单击`Application`左侧的选项卡。更改所需的详细信息。`Xap file`名称，`Title`以及您要更改的其他选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T07:27:18.473

找到您应用的 WMAppManifest.xml 文件。

并更改 App 中的标题节点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T02:31:16.593

您可以在项目属性下的 WMAppManifest.xml 中更改应用程序的显示名称。

# ruby-on-rails - 您将如何在 Rails 3 中为不同的帖子类型建模？

> ID：12906642
> 
> 赞同：1
> 
> 时间：2012-10-16T02:19:33.830
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我被困住了。我正在尝试在 Rails 3 中创建一个允许用户创建帖子的应用程序，该帖子可以是图像、照片或文本。我希望我的帖子索引显示所有三种类型的帖子并创建一个“发布者”，允许用户创建图像、照片或文本帖子中的一个。我已经尝试了一切，包括 STI 和 has_one 关系，但似乎没有任何东西以 Rails 优化的方式出现，这让我发疯！一定有什么我错过了。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:42:23.927

这听起来像你想要一个有很多帖子的帖子类型

您的类型表和模型

```
 Types Table
| id  |   type  |
| 1   |  image  |
| 2   |  photo  |
| 3   |  text   |

class Type < ActiveRecord::Base
    has_many :posts
end 
```

然后你的帖子表和模型

```
Post Table
|  id  | name | content | type_id | user_id |

class Post < ActiveRecord::Base
  belongs_to :types
  belongs_to :users
end 
```

因此，当您进行查询时，您可以说： Type.include(:posts).find(1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T04:19:40.087

检查这个

[如何在 Ruby on Rails 中实现 Active Record 继承？](https://stackoverflow.com/q/1598936/517483)

[http://mediumexposure.com/multiple-table-inheritance-active-record/](http://mediumexposure.com/multiple-table-inheritance-active-record/)

# javascript - JavaScript窗口与IE8中的窗口不相同也不等于

> ID：12906645
> 
> 赞同：3
> 
> 时间：2012-10-16T02:19:51.113
> 
> 标签：javascript, internet-explorer-8

通常，如果您将函数调用为函数（而不是对象的方法），则***this***变量指向全局对象（即浏览器中的窗口对象）。我发现了一种情况，在 IE8 中，***this***变量与窗口对象不同（===），也不等于（==）：http: [//jsfiddle.net/zgJGU/1/](http://jsfiddle.net/zgJGU/1/)

如果你看一下代码，你可能会注意到一个更奇怪的行为：值***全局***变化，因为它是从函数返回的（在函数内部它不等于 window；在函数外部它等于窗户）

（你可能会问，为什么这是一个重要的问题？因为我想检查我的函数是作为函数调用的，还是作为对象的方法调用的。）

你能解释一下这种奇怪的行为吗？（或检查函数是否作为方法或函数调用的正确方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:12:42.233

这确实是您发现的一个非常奇怪的问题。如果您在全局范围内隐式创建了一个新函数，那么结果可能是您所期望的。我已经修改了你的 jsFiddle 并在下面显示了它的一部分...... [http://jsfiddle.net/VYcmT/](http://jsfiddle.net/VYcmT/)

```
var ff = function() {
    var global = this;
    console.log(global === window);        // true       
    console.log(global == window);         // true
    return global;
};
var global = ff();
console.log(global === window);            // true
console.log(global == window);             // true 
```

奇怪的是，如果您在全局范围 ( `window`) 之外显式定义一个函数，如以下代码段所示，那么 IE8 开始感到困惑...... [http://jsfiddle.net/zsWUK/](http://jsfiddle.net/zsWUK/)

似乎当您显式地将函数分配给`window`然后调用它时，IE8 会以某种方式变得`this`特别。比较`window`属性的`this`结果是积极的比较。看起来 IE8 似乎将对象`this`视为某种包装器`window`。

```
window.ff = function() {
    var global = this;
    console.log(global === window);        // false       
    console.log(global == window);         // false
    console.log(global.window === window); // true
    console.log(global.window == window);  // true
    return global;
};
var global = ff();
console.log(global === window);            // false
console.log(global == window);             // true
console.log(global === window.window);     // true
console.log(global == window.window);      // true 
```

好消息是上面和下面的代码片段都`true`在 Chrome、Firefox、IE9/10 等中返回......

# android - android ndk 链接到 libcutils.so

> ID：12906646
> 
> 赞同：1
> 
> 时间：2012-10-16T02:19:58.237
> 
> 标签：android, android-ndk

我正在尝试将可执行文件链接到 libcutils.so，但出现以下错误：

```
Executable     : gps_test
/home/jbrew/android_gps/jni/lib_dir//libcutils.so: undefined reference to `ioprio_set'
/home/jbrew/android_gps/jni/lib_dir//libcutils.so: undefined reference to `ioprio_get'
collect2: ld returned 1 exit status
make: *** [obj/local/armeabi/gps_test] Error 1 
```

这是我的 Android.mk 文件的样子：

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)

LOCAL_SRC_FILES:= \
    gps_test.c

LOCAL_LDLIBS:= -L/home/jbrew/android_gps/jni/lib_dir/ -llog -lhardware -lcutils 

LOCAL_C_INCLUDES:= \
    /home/jbrew/android_gps/jni/includes

LOCAL_MODULE:= gps_test

#include $(BUILD_SHARED_LIBRARY)
include $(BUILD_EXECUTABLE) 
```

有没有办法让编译器忽略这些？我尝试添加 CFLAG --warn-unresolved-symbols，但编译器不知道该标志的含义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:57:50.947

对于其他有此问题的人，问题出在我的 API 级别。ndk-build 默认使用 android-3 构建。我在我的项目路径中添加了一个 default.properties 文件，然后将“target=android-9”放入该文件中。添加后，我可以构建可执行文件。

# c - 通过堆栈更改变量的值

> ID：12906651
> 
> 赞同：1
> 
> 时间：2012-10-16T02:20:23.657
> 
> 标签：c, stack

好的，我们得到以下代码：

```
#include <stdio.h>
#include <ctype.h>
#include <stdlib.h>
#include <string.h>
#include "callstack.h"
#include "tweetIt.h"
#include "badguy2.c"

static char *correctPassword = "ceriaslyserious";
char *message = NULL;

int validateSanity(char *password) {
    for(int i=0;i<strlen(password);i++)
        if(!isalpha(password[i]))
            return 0;
    unsigned int magic = 0x12345678;
    return badguy(password);
}

int validate(char *password) {
    printf("--Validating something\n", password);
    if (strlen(password) > 128) return 0;

    char *passwordCopy = malloc(strlen(password) + 1);
    strcpy(passwordCopy, password);
    return validateSanity(passwordCopy);
}

int check(char *password, char *expectedPassword) {
    return (strcmp(password, expectedPassword) == 0);
}

int main() {
    char *password = "wrongpassword";
    unsigned int magic = 0xABCDE;
    char *expectedPassword = correctPassword;
    if (!validate(password)) {
        printf("--Invalid password!\n");
        return 1;
    }
    if (check(password, expectedPassword)) {
        if (message == NULL) {
            printf("--No message!\n");
            return 1;
        } else {
            tweetIt(message, strlen(message));
            printf("--Message sent.\n");
        }
    } else {
        printf("--Incorrect password!\n");
    }
    return 0;
} 
```

我们应该`main`使用函数来欺骗发送推文`badguy`。`password`在 badguy 中，我们从之前的问题中得到了一个偏移量，即in的声明`main`和传递给的参数之间的差异`badguy`。我们被指示使用此偏移量来查找 main 和 in 的地址`correctPassword`并`password`操纵 in `password`to的值，`correctPassword`因此当密码检查发生时，它被认为是合法的。我在弄清楚如何使用此偏移量来查找地址并从那里继续时遇到了一些麻烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T04:40:09.117

首先，确保您对编译器行为有很好的控制。那就是：确保你知道调用约定*并且*它们得到尊重（没有被优化掉或以任何方式改变）。这通常归结为关闭优化设置，至少是为了在更受控的条件下进行测试，直到设计出一种稳健的方法。请特别注意诸如 之类的变量`expectedPassword`，因为它们很可能会被优化掉（`expectedPassword`可能永远不会在堆栈中创建，被等效的 替换`correctPassword`，从而使您*根本没有*对正确密码的堆栈引用）。

其次，注意`"wrongpassword"`比`"ceriaslyserious"`;短 换句话说，如果我直截了当，试图破解指向的缓冲区`passwordCopy`（其大小是`"wrongpassword"`加一的长度）以便复制`"ceriaslyserious"`到那里可能会导致分段违规。`expectedPassword`尽管如此，跟踪调用堆栈中的地址应该相对简单，*如果它存在*（见上文），特别是如果您已经从`main()`的堆栈帧偏移。

考虑到在受控情况下的 x86 32 位目标，`expectedPassword`将驻留在以下 8 个字节`password`（4 代表`password`，4 代表`magic`如果它没有被优化掉）。如您所说，具有参数的偏移`password`量，从该参数的地址中减去偏移量就足够了，然后加 8。结果指针应该是`expectedPassword`，然后指向包含密码的静态区域。再次，仔细检查您的环境。检查[this](http://eli.thegreenplace.net/2011/09/06/stack-frame-layout-on-x86-64/)以获取有关x64中堆栈布局的说明（32位情况下的布局类似）。

最后，如果`expectedPassword`调用栈中不存在，那么，由于`correctPassword`是全局静态的，它将驻留在数据段中，使该方法无用。为了在这种情况下实现目标，您需要使用更智能的算法仔细扫描数据段。但是，简单地尝试`check()`在程序文本中查找 ' 返回值的测试并替换为`nop`s （在正确操作页面权限以允许写入文本段之后）可能会更容易。

如果您遇到问题，检查生成的汇编代码是可行的方法。如果您使用的是 GCC，`gcc -S`则在汇编之前暂停编译（即，生成汇编源代码文件作为输出）。`objdump -d`也可以提供帮助。`gdb`可以在指令之间跳转，显示帧的反汇编和显示寄存器内容；检查文档。

这些练习对于了解常见程序中如何发生安全漏洞以及提供一些防御性编程的基本概念特别有用。

# php - PHP $_POST 由于看不见的原因返回空值

> ID：12906652
> 
> 赞同：3
> 
> 时间：2012-10-16T02:20:26.670
> 
> 标签：php, html

我的问题是我有一个`$_POST`返回一个`null`或空值的 PHP，我个人没有看到我的代码有任何错误（但我知道它在那里），而且我在几个小时内都无法真正离开它，因为我在一个时间表。所以，我希望有人可以帮助我；）

这就是我所拥有的，基本上：

```
<table border="0" align="center">
<tr>
    <td>
        <div id="lvl3">Project Name:</div>
    </td>
    <td>
        <input type="text" name="prjname" maxlength="250">
    </td>
</tr>
<tr>
    <td colspan="2" align="center">
        <input type="submit" value="Submit" name="prjsubmitname">
        <input type="button" value="Cancel" onclick="$('#popupoverlay').hide(); $('#prjpopupbox').hide(); $('#prjname').hide(); $('#prjdescription').hide(); $('#prjversion').hide(); $('#prjrelease').hide();">
    </td>
</tr> 
```

这是我用于编辑项目名称的表格——我认为这里重要的是文本框输入。

接下来我有我的PHP：

```
//Did the user change the Project Name
if (isset($_POST['prjsubmitname']))
{
//Is the input empty
if (!trim($_POST['prjname']))
{
    //Input is empty
    echo('<script>senderror("Please enter a valid Project Name empty");</script>');
} else {

    //Input isnt empty, assign variables
    $url = geturlext();
    $prjname = mysql_real_escape_string(trim($_POST['prjname']));

    //Is input invalid
    if (strcasecmp($prjname, "main") == 0 | $prjname == "404")
    {
        //Input is invalid
        echo('<script>senderror("Please enter a valid Project Name invalid");</script>');
    } else {

        //Input is valid, connect to database
        dbconnect();

        $checkquery = mysql_query("SELECT * FROM projects WHERE name = '$prjname'") or die(mysql_error());
        $check = mysql_num_rows($checkquery);

        //Does Project Name already exist
        if ($check == 0)
        {
            //No it does not
            $updatequery = mysql_query("UPDATE projects SET name = '$prjname' WHERE name = '$url'") or die(mysql_error());

            echo("<script>location.href='index.php?page=" . $prjname . "'</script>");
        } else {
            //Yes it does
            echo('<script>senderror("That Project Name already exists");</script>');
        }
    }
}
} 
```

这就是我的问题所在；无论我在文本框中输入什么，我总是收到“输入为空”的错误消息。我已经打印了 $_POST['prjname'] 的输出，它确实是空的。

现在奇怪的部分是，我有这个完全相同的（至少我认为）设置来更改项目描述，并且它完美地工作。为了比较 - 我在下面包含了项目描述编辑器的相同部分。

桌子：

```
<table border="0" align="center">
<tr>
    <td>
        <div id="lvl3">Project Description:</div>
    </td>
    <td>
        <textarea type="text" name="prjdescription" maxlength="750" style="width:300px; height:100px; resize:none;"></textarea>
    </td>
</tr>
<tr>
    <td colspan="2" align="center">
        <input type="submit" value="Submit" name="prjsubmitdescription">
        <input type="button" value="Cancel" onclick="$('#popupoverlay').hide(); $('#prjpopupbox').hide(); $('#prjname').hide(); $('#prjdescription').hide(); $('#prjversion').hide(); $('#prjrelease').hide();">
    </td>
</tr> 
```

和 PHP：

```
//Did the user change the Project Description
if (isset($_POST['prjsubmitdescription'])) 
{
//Is the input empty
if (!trim($_POST['prjdescription']))
{
    //Input is empty
    echo('<script>senderror("Please enter a valid Project Description");</script>');
} else {

    //Input isnt empty, do stuff
    $url = geturlext();
    $prjdescription = mysql_real_escape_string(trim($_POST['prjdescription']));

    //Connect and change description
    dbconnect();

    $updatequery = mysql_query("UPDATE projects SET description = '$prjdescription' WHERE name = '$url'") or die(mysql_error());
    echo("<script>location.href='index.php?page=" . $url . "'</script>");
}
} 
```

为澄清起见，两个表都在同一个表单标签中，并且 PHP 紧挨着彼此。

Firebug 上没有错误，事实上 Firebug 并没有给我任何东西。除此之外，我确信这是我忽略的一些非常小的错字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:04:54.493

我找到了解决这个问题的方法：

在项目名称编辑 PHP 中重命名变量 '$prjname' 可解决此问题。

看起来有一个与 $_POST (['prjname']) 同名的变量 ($prjname) 返回一个空字符串或 null 字符串。不知道为什么。

感谢那些试图提供帮助的人

编辑：实际上，如果我只更改变量名称（$prjname），我会再次收到错误 - 它仅在我更改 $_POST 名称时修复......奇怪。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T02:44:53.270

看上面问题的描述，我们可以得出结论，表单元素必须封装在表单标签中，然后只有表单数据会被发送到服务器。

因此，作为您的问题的解决方案，您需要在表单标签中定义输入元素。

# ios - showCallout 无需点击 -iOS

> ID：12906655
> 
> 赞同：1
> 
> 时间：2012-10-16T02:20:46.107
> 
> 标签：ios, ios5, annotations, ios6, mkannotationview

我在地图上有几个注释图钉。我想通过触发的 showCallout 在默认引脚之一上显示信息我知道如何通过点击来实现，但如果不点击注释我不知道，它怎么能显示 showCallout？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:31:23.523

你有没有试过这个：

```
id<MKAnnotation> myPin = [mapView.annotations objectAtIndex:0];
[mapView selectAnnotation:myPin animated:YES]; 
```

# css - 如何使用 css 创建纹理效果？

> ID：12906657
> 
> 赞同：0
> 
> 时间：2012-10-16T02:20:59.283
> 
> 标签：css

你可以在这里看到它[http://qunitjs.com/](http://qunitjs.com/)并在这里分解[http://jsfiddle.net/xMwT8/8/](http://jsfiddle.net/xMwT8/8/) *edit ( [http://jsfiddle.net/xMwT8/9/](http://jsfiddle.net/xMwT8/9/) )

链接可用

*   [这里](http://www.w3schools.com/cssref/pr_background-image.asp)
*   [这里](http://forum.bytesforall.com/showthread.php?t=4538)
*   [这里](http://www.w3.org/TR/CSS21/colors.html)
*   [这里](https://stackoverflow.com/questions/903659/why-i-cant-use-background-image-and-color-together)

我正在尝试将图像用作上面带有叠加颜色的纹理，或者与图像结合以融入微妙的纹理。它可以通过渐变来完成（就像我发布的第一个和第二个链接一样）。我不明白为什么它不能只使用颜色（第二个链接）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T02:31:07.077

我*想*你是在问为什么你不能用像`#E4E2D6`. 简单的解释是它是***纯色***:)

jsfiddle 示例使用`rgba(255, 0, 0, 0.3)`的不是纯色，它是 70% 透明的红色（这`a == 0.3`意味着它只有 30% 的不透明度）

如果你想用类似的东西来做`#E4E2D6`，看看[Convert RGB to RGBA over white](https://stackoverflow.com/questions/6672374/convert-rgb-rgba)并将其转换`rgba(87, 74, 0, 0.16)`为相同的颜色（当显示为白色时，但它大部分是透明的），并允许背景通过。

* * *

好的，只看`/9`小提琴（仅供参考，您可以更改原始链接而不是像那样进行编辑）。似乎这不适用于

```
background: rgba( ... ), url( ... ); 
```

为什么？因为你只能有多个背景**图片**。就浏览器而言， 这`-webkit-linear-gradient` *是一个图像，因此它同时使用两者。*`rgba( ... )`没有它是一种颜色，所以它使用图像和颜色作为后备

# html - 如何使用 CSS 复制这种外观？

> ID：12906664
> 
> 赞同：1
> 
> 时间：2012-10-16T02:22:06.787
> 
> 标签：html, css, html-table

我目前正在迁移旧版 Web 应用程序。原始源代码使用演示属性定义站点外观。例如，这个 HTML 表格有一个漂亮的边框：

```
<table margin="0" padding="0" width="100%" cellspacing="0"
    cellpadding="0" border="1" bgcolor="#ffffff"
    border-collapse="collapse" list-style-type="circle"> 
```

但是，我正在尝试删除所有这些并开始使用 CSS 来定义页面的外观。所以，我定义了这种风格：

```
table.exteriorTable {
    margin: 0px;
    padding: 0px;
    width: 100%;
    border-spacing: 0px;
    padding: 0px;
    border: 1px;
    background-color: #ffffff;
    border-collapse: collapse;
    list-style-type: circle;
} 
```

并使用以下方法将其应用于表：

```
<table class="exteriorTable"> 
```

**编辑：**

还尝试包含`border-width`属性并且边框不会出现：

```
table.exteriorTable {
    margin: 0px;
    padding: 0px;
    width: 100%;
    border-spacing: 0px;
    padding: 0px;
    border-width:1px;
    background-color: #ffffff;
    border-collapse: collapse;
    list-style-type: circle;
} 
```

Firebug 说样式被应用到表格上，但是边框是不存在的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:23:55.233

为边框添加宽度。`border: 1px;`是不够的，因为边框本身是几个边框属性的[简写](https://developer.mozilla.org/en-US/docs/CSS/border)。

```
border-width:1px; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T02:24:44.997

添加`border-style:solid;`

```
table.exteriorTable {
        margin: 0px;
        padding: 0px;
        width: 100%;
        border-spacing: 0px;
        padding: 0px;
        border-width: 1px;
        border-style:solid;
        background-color: #ffffff;
        border-collapse: collapse;
        list-style-type: circle;
    } 
```

# input - Prolog：在 shell 提示符下显示帮助

> ID：12906665
> 
> 赞同：0
> 
> 时间：2012-10-16T02:22:15.343
> 
> 标签：input, prolog, swi-prolog

我正在[使用谓词](https://stackoverflow.com/questions/12630326/prolog-access-read-from-parent-rule)来读取序言程序外壳中连续提示中的一些值，并且我希望用户能够在被要求输入时获得帮助消息。情况将是：

1.  请求输入
2.  如果`input = 'help'`，显示帮助信息并再次请求相同的输入
3.  如果`input /= 'help'`, 分配`Value`并成功离开

到目前为止我所做的：

```
ask_input( Question, Value ) :-
    write( Question ), % Please enter  ... :
    read( ReadValue ),
    ( ReadValue = 'help' ->
        write( 'Help message...' ),
        ask_input( Question, Value )
    ;   Value = ReadValue
    ). 
```

显然，上面的代码不起作用。它会在`ask_input`内部条件下失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:42:59.737

我这样做了，它似乎有效：

```
ask_question( Question, Value ) :-
    write( Question ), nl,
    read( ReadValue ),
    ask_question2( Question, ReadValue, NewValue ),
    Value = NewValue.

ask_question2( Question, ReadValue, NewValue ) :-
    ReadValue = 'help',
    write( 'Help message ...' ), nl,
    ask_question( Question, NewValue ).

ask_question2( _, Value, Value ). 
```

# c# - 使用 SQL 和 XML 源设置 ASP.NET MVC3 Web 应用程序

> ID：12906668
> 
> 赞同：0
> 
> 时间：2012-10-16T02:23:06.590
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-2

我刚刚开始了`MVC3 applicaton`C# 教程并设置了项目。本教程没有任何关于如何将这两个源添加到我的项目的内容：

1.  `SQL`：来自经典数据库的订单和客户表`SQL Northwind`，作为独立文件 Northwnd.mdf 给出，

2.  `XML`: `XOrders.xml`and`XCustomers.xml`文件，是上述 Orders 和 Customers 表的 XML 映射。

现在我的问题是如何将这些表添加到我的项目中（类似于 mvc2）？如果有人有任何教程的链接，甚至知道如何做，请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:33:36.740

[http://www.microsoft.com/en-us/download/details.aspx?id=23654](http://www.microsoft.com/en-us/download/details.aspx?id=23654)

下载上述文件并按照[此处](http://msdn.microsoft.com/en-us/library/ms143221%28v=sql.105%29.aspx)所述提取文件。您可以使用[SQL Express](http://www.microsoft.com/en-us/download/details.aspx?id=3743)作为数据库引擎。

您正在使用的教程的链接是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T03:24:06.700

我设法自己解决了这个问题，方法如下：

我已经有了`Northwnd.mdf`文件，所以我`Server Explorer`在 Visual Studio 2010 中 使用了，然后 使用 `Right clicked`了 文件的位置。这将添加 .mdf 的源代码。`add connection``SQL Server Database File``Browse`

一旦我找到如何处理 XML 源代码，我也会编辑答案。

# c# - SqlDataAdapter.DeleteCommand() 适用于 AddWithValue() 但不适用于 Add() - 为什么？

> ID：12906673
> 
> 赞同：3
> 
> 时间：2012-10-16T02:24:10.173
> 
> 标签：c#, sql-server, sqldataadapter

[微软自己的文档](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.deletecommand.aspx#Y0)提供了一个删除记录的例子，如下：

```
// Create the DeleteCommand.
command = new SqlCommand(
    "DELETE FROM Customers WHERE CustomerID = @CustomerID", connection);

// Add the parameters for the DeleteCommand.
parameter = command.Parameters.Add(
    "@CustomerID", SqlDbType.NChar, 5, "CustomerID");
parameter.SourceVersion = DataRowVersion.Original;

adapter.DeleteCommand = command; 
```

但是在我的系统上它不起作用（抱怨缺少@CustomerID）。相反，如果我更换

```
command.Parameters.Add("@CustomerID", SqlDbType.NChar, 5, "CustomerID"); 
```

上面有

```
command.Parameters.AddWithValue("@CustomerID", 5); 
```

[它有效](https://stackoverflow.com/a/6413979/1731850)。

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T02:36:02.810

在这一行：

```
command.Parameters.Add("@CustomerID", SqlDbType.NChar, 5, "CustomerID"); 
```

在这个重载中，5 指的是参数的长度，而不是值。如果要添加值，则必须添加以下内容：

```
command.Parameters["@CustomerID"].Value = "5"; 
```

# c# - .NET UDP 数据接收

> ID：12906675
> 
> 赞同：0
> 
> 时间：2012-10-16T02:24:33.437
> 
> 标签：c#, .net, udp, wireshark

我有一个简单的 UDP 侦听器，我试图从中收集数据报。我的数据报可以是两种数据格式之一。使用第一种数据格式，我按预期在我的程序中接收数据。对于第二个，绝对没有迹象表明曾经从我的程序接收到数据，即使我可以验证 UDP 数据是否通过 Wireshark 传递到网络接口。我认为这些可能是 Windows 拒绝的格式错误的 UDP 数据包，但 Wireshark 确实将它们标记为 UDP。我的代码如下：

```
 static void Main(string[] args)
    {
        Thread thdUdpServer = new Thread(new ThreadStart(serverThread));
        thdUdpServer.Start();
    }

    static void serverThread()
    {

        Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        socket.Bind(new IPEndPoint(new IPAddress(0), 2000));

        while (true)
        {
            byte[] responseData = new byte[128];
            socket.Receive(responseData);
            string returnData = Encoding.ASCII.GetString(responseData);
            Console.WriteLine(DateTime.Now + " " + returnData);

        } 
```

丢失的数据包都是 29 字节的数据报，看起来像这样（转换为 ASCII）。

```
#01RdFFFF...?...... ........F 
```

为什么 Wireshark 会显示它们的存在，但 .NET 似乎看不到它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:30:54.873

如果字节包含不可打印的 ASCII 字符，您可能在控制台上看不到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:10:06.763

您的代码中缺少某些内容。调用 ReceiveFrom 时应该抛出套接字异常（至少根据 MSDN，没有尝试过您的代码。）

您应该将您的套接字绑定到您要监听的地址：端口（或使用 0.0.0.0 作为监听任何本地地址的地址）：

```
socket.Bind(new IPEndPoint(new IPAddress(0), 2000); 
```

ReceiveFrom 中的 EndPoint 不是服务器的监听端口。这是您要从中接收数据包的地址。您可以使用端点 0.0.0.0:0 从任何主机接收。

从该方法返回后，端点将填充发送数据包的主机（客户端）的地址。

如果您不关心客户端端点，则可以使用 Receive 而不是 ReceiveFrom。您的客户端可能没有从 192.168.1.100:2000 发送数据包，这就是您没有收到它们的原因；想一想为什么在调用 ReceiveFrom 时没有出现异常，这超出了我的理解。

另外：无需调用 Convert.ToInt32 ：

```
new IPEndPoint(IPAddress.Parse("192.168.1.100"), Convert.ToInt32(2000)); 
```

2000 已经是一个整数。

# android - 如何使用 JSON Web 服务填充 Android 微调器？

> ID：12906681
> 
> 赞同：2
> 
> 时间：2012-10-16T02:24:57.613
> 
> 标签：android, arrays, json, spinner

如何解析如下包含学校名称和 ID 的 JSON 文件，并使用“名称”字段中的值填充微调器标签？

我希望微调器将选定的 SchoolID 输出到下一个活动。例如，您会看到“Hill View Elementary”，如果您选择此选项，则值“HVE”将输出到下一个要执行的活动。

```
{
"schools": [
{
"Name": "Hill View Elementary",
"SchoolID": "HVE"},
{
"Name": "Mill View",
"SchoolID": "MVE"},
{
"Name": "Big School",
"SchoolID": "BSC"},
]
} 
```

这是我用来尝试阅读提要的 onCreate ......

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);  

    String readFeed = readFeed();
    try {
      JSONArray jsonArray = new
      JSONArray(readFeed);
      Log.i(MainActivity.class.getName(),
          "Number of entries " + jsonArray.length());

      for (int i = 0; i < jsonArray.length(); i++) {
        JSONObject jsonObject = jsonArray.getJSONObject(i);

        // Here instead of Logging I want to use each schools "Name" to 
        // be put into an array that I can use to populate the strings 
        // for the spinner

        Log.i(MainActivity.class.getName(), jsonObject.getString("schools"));

      }
    } catch (Exception e) {
      e.printStackTrace();
    }
} 
```

我仍然在 Android 上加快速度，所以很清楚。

这是阅读提要：

```
public String readFeed() {
    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();

    // domain intentionally obfuscated for security reasons
    HttpGet httpGet = new HttpGet("http://www.domain.com/schools.php");
    try 
 {
      HttpResponse response = client.execute(httpGet);
      StatusLine statusLine = response.getStatusLine();
      int statusCode = statusLine.getStatusCode();
      if (statusCode == 200) {
        HttpEntity entity = response.getEntity();
        InputStream content = entity.getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(content));
        String
 line;
        while ((line = reader.readLine()) != null) {
          builder.append(line);
        }
      } else {
        Log.e(MainActivity.class.toString(), "Failed to download file");
      }
    } catch (ClientProtocolException e) {
      e.printStackTrace();
    } catch (IOException e)
 {
      e.printStackTrace();
    }
    return builder.toString();
  } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-16T03:09:13.743

我会做这样的事情：

```
public class School {
    private String name;
    private String id;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }
} 
```

创建时：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);  

    String readFeed = readFeed();

    // you can use this array to find the school ID based on name
    ArrayList<School> schools = new ArrayList<School>();
    // you can use this array to populate your spinner
    ArrayList<String> schoolNames = new ArrayList<String>();

    try {
      JSONObject json = new JSONObject(readFeed);
      JSONArray jsonArray = new JSONArray(json.optString("schools"));
      Log.i(MainActivity.class.getName(),
          "Number of entries " + jsonArray.length());

      for (int i = 0; i < jsonArray.length(); i++) {
        JSONObject jsonObject = jsonArray.getJSONObject(i);

        School school = new School();
        school.setName(jsonObject.optString("Name"));
        school.setId(jsonObject.optString("SchoolID"));
        schools.add(school);
        schoolNames.add(jsonObject.optString("Name"));

      }
    } catch (Exception e) {
      e.printStackTrace();
    }
    Spinner mySpinner = (Spinner)findViewById(R.id.my_spinner);
    mySpinner.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, schoolNames));
} 
```

在您的 main_activity.xml 中，您需要一个`Spinner`. 上面的代码可以使用如下命名的 Spinner：

```
<Spinner
    android:id="@+id/my_spinner"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"/> 
```

# c# - 缺少 WPF 程序集引用

> ID：12906682
> 
> 赞同：1
> 
> 时间：2012-10-16T02:25:00.033
> 
> 标签：c#, .net, wpf

我有一个类调用`BinaryImageConverter`实现`IValueConverter`。`Common.Tools`

如何在 WPF 中调用它？

```
 <Window.Resources>
        <CollectionViewSource x:Key="ProductsSource"/>
        <local:BinaryImageConverter x:Key="ImgConverter" />
    </Window.Resources> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:34:13.667

您必须将`prefix`定义添加到`Window`. 例如，如果 is 的命名空间`BinaryImageConverter`及其`KevNameSapce`程序集是，`KevAssembly`那么您的 xmal 代码将如下所示。

```
<Window xmlns:local="clr-namespace:KevNameSapce;assembly=KevAssembly">
    <Window.Resources> 
        ...
        <local:BinaryImageConverter x:Key="ImgConverter" /> 
    </Window.Resources>
</Window> 
```

您不必指定`assembly`转换器类是否在同一个项目中，

# java - 向数组添加值？

> ID：12906684
> 
> 赞同：0
> 
> 时间：2012-10-16T02:25:12.203
> 
> 标签：java, arrays

我刚刚创建了一个比我以前的数组大一个的新数组，我想将我的第一个数组中的值复制到我的新数组中。如何将新值添加到新数组的最后一个索引？

这是我尝试过的：

```
public void addTime(double newTime) {
    if (numOfTimes == times.length)
        increaseSize();
    times[numOfTimes] = newTime;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:13:28.030

为什么不使用 System.arraycopy 函数。

```
increaseSIze()
{
   double [] temp = new double[times.lebgth+1];
   System.arrayCopy(times,0,temp,0,times.length);
   times=temp;
} 
```

之后，您将拥有大小增加 1 个的 times 数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T02:32:07.903

我建议尝试使用对象`java.util.List`而不是原始数组。然后你可以这样做： `times.add(newTime)`它会为你处理尺寸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T02:47:45.333

如果使用数组是一个约束，请考虑[Arrays.copyOf ：](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#copyOf%28double%5B%5D,%20int%29)

```
import java.util.Arrays;
...
private void increaseSize() {
   // Allocate new array with an extra trailing element with value 0.0d
   this.times = Arrays.copyOf( times, times.length + 1 );
}
... 
```

请注意，如果您经常以不可预知的方式进行这种类型的数组管理，您可能需要考虑[Java 集合框架](http://docs.oracle.com/javase/7/docs/technotes/guides/collections/overview.html)类之一，例如[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)。的设计目标之一`ArrayList`是管理大小管理，就像 JVM 本身管理内存管理一样。

我在[这里](http://groovyconsole.appspot.com/script/771001)开发了一个在线可执行示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T02:27:05.997

要将新值设置为最后一个索引，您可以这样做

```
times[times.length - 1] = newTime; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T02:28:00.860

数组索引从`0..n-1`.

`array[array.length - 1]`将处理数组末尾的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T02:39:22.980

你为什么不想要一个 java.util.ArrayList 来满足这个要求？实际上，不需要管理它的大小。你只需这样做：

```
 List<Double> list = new ArrayList<Double>();
 list.add(newTime); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T02:35:37.073

数组的最后一项总是在`myArray.length - 1`。在您的情况下，时间数组中的最后一个元素是`times[times.length - 1]`. 有关数组的更多信息，请查看[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)。

但更重要的是：如果您尝试更改阵列的容量，您很可能使用了**错误的数据结构**来完成这项工作。看看 Oracle 的[`Introduction to Collections`](http://docs.oracle.com/javase/tutorial/collections/intro/index.html)（特别是[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)如果你需要一个类似数组的索引来访问元素的类）。

# php - 为什么 facebook $user_id = $facebook->getUser(); 尽管已登录，但返回 0？

> ID：12906685
> 
> 赞同：0
> 
> 时间：2012-10-16T02:25:22.730
> 
> 标签：php, facebook, api

问题：用户访问令牌可从`$params['access_token']`但 $facebook->getUser() 返回 0。

用户使用

```
session_start();
$code = $_REQUEST["code"];
if(empty($code)) 
{
    $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
    $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
    . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
    . $_SESSION['state'] . "&scope=";
    echo("<script> top.location.href='" . $dialog_url . "'</script>");
}
if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) 
{
    $token_url = "https://graph.facebook.com/oauth/access_token?"
    . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
    . "&client_secret=" . $app_secret . "&code=" . $code;
    $response = file_get_contents($token_url);
    $params = null;
    parse_str($response, $params);
    $_SESSION['access_token'] = $params['access_token'];
    $graph_url = "https://graph.facebook.com/me?access_token=" 
    . $params['access_token'];
    $user = json_decode(file_get_contents($graph_url));
}
else 
{
    echo("Please clear your facebook cookie and re login.  The state id we use to check the authenticity of the session does not match.");
}
$access_token = $params['access_token']; 
```

此时，访问令牌可用。

稍后在代码中，我检查是否`$facebook->getUser()`返回用户 ID。它不是。

```
 $facebook = new Facebook($config);
    $user_id = $facebook->getUser(); 
```

相反，如果我使用 $facebook->getLoginUrl()，并让用户单击它一次（fb 检测到用户已登录并且不弹出登录框，而是返回到应用程序 url），$facebook->从那时起，getUser() 确实会返回 ID。

如果您需要更多信息来解决问题，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:57:51.460

函数 _accessServer 向您的服务器打开另一个请求，发送访问令牌。

_loginPopup 函数应该打开 Facebook 登录弹出窗口，请求用户“允许访问”您的应用程序的适当权限。

然后 PHP 应用程序应将访问令牌传回 Facebook API

# wpf - 在 Windows 8 上使用触控笔触摸时如何禁用波纹/波浪效果？

> ID：12906686
> 
> 赞同：1
> 
> 时间：2012-10-16T02:25:25.323
> 
> 标签：wpf, windows, windows-8, touch

当我在 Windows 8 上用手写笔触摸时，有谁知道如何消除波浪/涟漪效应？

我问这个是因为当我在 WPF 上使用 InkCanvas 时不会出现波浪/波纹效果。我知道这是可能的，我只是不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T02:42:30.253

我找到了答案：

```
Stylus.SetIsTapFeedbackEnabled(obj, false); 
```

# python - 对 Python 中的列表进行简洁快速的 zip 操作？

> ID：12906688
> 
> 赞同：1
> 
> 时间：2012-10-16T02:25:51.330
> 
> 标签：python, algorithm, list, list-manipulation

有没有更简洁和省时的方法来`zip`在 Python 中实现以下操作？我将列表列表配对以创建新列表，如下所示：

```
>>> a
[[1, 2, 3], [4, 5, 6]]
>>> b
[[10, 11, 12], [13, 14, 15]]
>>> for x, y in zip(a, b):
...   print zip(*[x, y])
... 
[(1, 10), (2, 11), (3, 12)]
[(4, 13), (5, 14), (6, 15)] 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T02:29:43.697

除了替换之外，我真的没有看到更好的方法：

```
print zip(*[x, y]) 
```

和：

```
print zip(x,y) 
```

* * *

如果你真的在使用 2 个元素列表，你可能只是这样做：

```
print zip( a[0], b[0] )
print zip( a[1], b[1] ) 
```

（当你离开 1 个拉链时，它会稍微更有效率，但我不相信它会更*清晰*，这是你真正应该担心的）。

* * *

如果你真的很喜欢紧凑的代码，你可以使用`map`：

```
map(zip,a,b) #[[(1, 10), (2, 11), (3, 12)], [(4, 13), (5, 14), (6, 15)]] 
```

这可能再次比其他版本更有效，但我认为您在代码清晰度方面付出了一点代价（尽管其他人可能不同意）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T02:34:02.437

```
>>> [zip(i, j) for i, j in zip(a,b)]
[[(1, 10), (2, 11), (3, 12)], [(4, 13), (5, 14), (6, 15)]] 
```

当然，这实际上与您在上面写的内容相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T02:32:37.603

除了@mgilson 所说的，[`itertools.izip`](http://docs.python.org/library/itertools.html#itertools.izip)如果您要压缩的列表很大，您还可以考虑使用。

由于`izip`仅在请求时计算元素并且仅返回迭代器，因此内存使用量远低于`zip`大型列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T03:44:09.077

这也很好用：

```
print zip(sum(a,[]),sum(b,[])) 
```

印刷：

```
[(1, 10), (2, 11), (3, 12), (4, 13), (5, 14), (6, 15)] 
```

这可能是最好的性能，也很简洁：

```
from itertools import chain
print zip(chain(*a),chain(*b)) 
```

相同的输出

# python - eclipse pydev outline 不能很好地处理来自 cython 的 pyx 文件

> ID：12906691
> 
> 赞同：1
> 
> 时间：2012-10-16T02:26:31.127
> 
> 标签：python, windows, eclipse, pydev, cython

我刚刚开始尝试使用 Cython，我将我的一个源文件从 .py 重命名为 .pyx，并在 64 位 Windows 7 上使用 Cython 和 MSVC 2008 构建它。它编译得很好，我的代码运行得很好。但是当我尝试使用 Pydev (2.7.1) 在 Eclipse (4.2.0) 中打开 pyx 文件时，大纲视图根本不起作用。与其像往常一样将我的所有类分开，将它们的所有方法都很好地打包在每个类定义下，它只是按顺序列出所有类和方法，就好像它们都在基本缩进中一样。这非常烦人，因为我越来越依赖大纲视图来导航我的代码。没有折叠/折叠、过滤或任何东西！我能做些什么？谢谢。

更新：Pydev 3.4.1 有额外的 cython 支持，并在 Eclipse 中显示文件稍微好一些。[这是相关的博客文章](http://pydev.blogspot.com/2014/03/pydev-341-improved-interactive-console.html)。过滤在轮廓中起作用，但折叠仍然不起作用。

# node.js - fs.createWriteStream 不会立即创建文件？

> ID：12906694
> 
> 赞同：53
> 
> 时间：2012-10-16T02:26:54.183
> 
> 标签：node.js

我*从 http*函数进行了简单的下载，如下所示（为简化起见，省略了错误处理）：

```
function download(url, tempFilepath, filepath, callback) {
    var tempFile = fs.createWriteStream(tempFilepath);
    http.request(url, function(res) {
        res.on('data', function(chunk) {
            tempFile.write(chunk);
        }).on('end', function() {
            tempFile.end();
            fs.renameSync(tempFile.path, filepath);
            return callback(filepath);
        })
    });
} 
```

但是，由于我`download()`异步调用了数十次，它很少在`fs.renameSync`抱怨找不到文件时报告错误`tempFile.path`。

```
Error: ENOENT, no such file or directory 'xxx' 
```

我使用相同的 url 列表来测试它，它失败了大约 30% 的时间。一个一个下载时，相同的 url 列表有效。

再测试一番，发现如下代码

```
fs.createWriteStream('anypath');
console.log(fs.exist('anypath'));
console.log(fs.exist('anypath'));
console.log(fs.exist('anypath')); 
```

并不总是打印`true`，但有时会打印第一个答案`false`。

我怀疑太多的异步`fs.createWriteStream`调用不能保证文件的创建。这是真的？有什么方法可以保证文件的创建吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-16T02:42:34.567

在您从流中接收到事件之前，您不应该调用`write`您的`tempFile`写入流。`'open'`在您看到该事件之前，该文件将不存在。

对于您的功能：

```
function download(url, tempFilepath, filepath, callback) {
    var tempFile = fs.createWriteStream(tempFilepath);
    tempFile.on('open', function(fd) {
        http.request(url, function(res) {
            res.on('data', function(chunk) {
                tempFile.write(chunk);
            }).on('end', function() {
                tempFile.end();
                fs.renameSync(tempFile.path, filepath);
                return callback(filepath);
            });
        });
    });
} 
```

对于您的测试：

```
var ws = fs.createWriteStream('anypath');
ws.on('open', function(fd) {
    console.log(fs.existsSync('anypath'));
    console.log(fs.existsSync('anypath'));
    console.log(fs.existsSync('anypath'));
}); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-12-11T12:25:47.233

接受的答案没有为我下载一些最后的字节。
这是一个可以正常工作的[Q](https://github.com/kriskowal/q)版本（但没有临时文件）。

```
'use strict';

var fs = require('fs'),
    http = require('http'),
    path = require('path'),
    Q = require('q');

function download(url, filepath) {
  var fileStream = fs.createWriteStream(filepath),
      deferred = Q.defer();

  fileStream.on('open', function () {
    http.get(url, function (res) {
      res.on('error', function (err) {
        deferred.reject(err);
      });

      res.pipe(fileStream);
    });
  }).on('error', function (err) {
    deferred.reject(err);
  }).on('finish', function () {
    deferred.resolve(filepath);
  });

  return deferred.promise;
}

module.exports = {
  'download': download
}; 
```

注意我正在收听`finish`文件流而不是`end`响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-08T16:25:43.200

这是我用来完成它的方法：

```
function download(url, dest) {
    return new Promise((resolve, reject) => {
        http.get(url, (res) => {
            if (res.statusCode !== 200) {
                var err = new Error('File couldn\'t be retrieved');
                err.status = res.statusCode;
                return reject(err);
            }
            var chunks = [];
            res.setEncoding('binary');
            res.on('data', (chunk) => {
                chunks += chunk;
            }).on('end', () => {
                var stream = fs.createWriteStream(dest);
                stream.write(chunks, 'binary');
                stream.on('finish', () => {
                    resolve('File Saved !');
                });
                res.pipe(stream);
            })
        }).on('error', (e) => {
            console.log("Error: " + e);
            reject(e.message);
        });
    })
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-23T19:55:51.967

我正在通过 nodejs`request-promise`和`request`库上传和下载文件（docx、pdf、文本等）。

问题`request-promise`是他们没有从包中承诺`pipe`方法。`request`因此，我们需要以旧的方式来做。

我能够提出混合解决方案，我可以同时使用`async/await`它`Promise()`。这是示例：

```
 /**
     * Downloads the file.
     * @param {string} fileId : File id to be downloaded.
     * @param {string} downloadFileName : File name to be downloaded.
     * @param {string} downloadLocation : File location where it will be downloaded.
     * @param {number} version : [Optional] version of the file to be downloaded.
     * @returns {string}: Downloaded file's absolute path.
     */
    const getFile = async (fileId, downloadFileName, downloadLocation, version = undefined) => {
        try {
            const url = version ? `http://localhost:3000/files/${fileId}?version=${version}` : 
`${config.dms.url}/files/${fileUuid}`;
            const fileOutputPath = path.join(downloadLocation, fileName);

            const options = {
                method: 'GET',
                url: url,
                headers: {
                    'content-type': 'application/json',
                },
                resolveWithFullResponse: true
            }

            // Download the file and return the full downloaded file path.
            const downloadedFilePath = writeTheFileIntoDirectory(options, fileOutputPath);

            return downloadedFilePath;
        } catch (error) {
           console.log(error);
        }
    }; 
```

正如您在上面的`getFile`方法中看到的，我们正在使用 ES 支持的最新`async/await`功能进行异步编程。现在，让我们看看`writeTheFileIntoDirectory`方法。

```
/**
 * Makes REST API request and writes the file to the location provided.
 * @param {object} options : Request option to make REST API request.
 * @param {string} fileOutputPath : Downloaded file's absolute path.
 */
const writeTheFileIntoDirectory = (options, fileOutputPath) => {
    return new Promise((resolve, reject) => {
        // Get file downloaded.
        const stream = fs.createWriteStream(fileOutputPath);
        return request
            .get(options.url, options, (err, res, body) => {
                if (res.statusCode < 200 || res.statusCode >= 400) {
                    const bodyObj = JSON.parse(body);
                    const error = bodyObj.error;
                    error.statusCode = res.statusCode;
                    return reject(error);
                }
            })
            .on('error', error => reject(error))
            .pipe(stream)
            .on('close', () => resolve(fileOutputPath));
    });
} 
```

nodejs 的美妙之处在于它支持不同异步实现的向后兼容。如果一个方法正在返回 Promise，那么`await`将被踢入并等待该方法完成。

上述`writeTheFileIntoDirectory`方法会下载文件并在流关闭成功时返回正向，否则返回错误。

# c++ - 重载时如何使用 THIS 指针 = 运算符

> ID：12906695
> 
> 赞同：2
> 
> 时间：2012-10-16T02:27:02.157
> 
> 标签：c++, pointers, operator-overloading, this

所以我重载了 += 运算符，试图利用我已经定义的 + 运算符。即多项式+多项式返回一个新的多项式。所以我的 += 函数基本上试图用 LHS 作为 *this 和 RHS 作为 *this + B 调用 this + 函数（其中 B 是通过 const 引用传递给函数的多项式对象）。我收到一个错误。我哪里错了？

```
#include <iostream>
#include <ctime>
#include <cstdlib>
#include <cmath>

using namespace std;
void line(int lines);

class Polynomial
{
    private:
        int degree;
        double* coeffs;
    public:
        //constructors
        Polynomial() {degree=0;coeffs=new double[1];}
        Polynomial(int deg) {degree=deg;coeffs=new double[deg+1];}
        Polynomial(const Polynomial& A);

        //mutators
        void GetCoeffs(istream& in);
        void EditCoeff(int deg);
        void ResetCoeffs();
        int Coeff(int deg);
        void Randomize(int max);

        //accessors
        void Show(ostream& out);
        int Degree() {return degree;}

        //operators
        Polynomial operator+(const Polynomial& B); //Polynomial + Polynomial
        friend Polynomial operator +(double c, Polynomial& A); //c + Polynomial
        Polynomial operator +(double c); //Polynomial + c
        void operator +=(const Polynomial& B); //Polynomial+=Polynomial
        void operator =(Polynomial& A);
        Polynomial operator*(int k);
        Polynomial operator*(Polynomial& A);

};

int main()
{
    Polynomial A(5);
    A.Randomize(4);
    A.Show(cout);
    line(2);
    Polynomial B=A+8;
    B.Show(cout);

    return 0;
}

Polynomial Polynomial::operator*(int k)
{
    Polynomial C(degree);
    C=*this;
    for (int i=degree; i>=0; i--)
        C.coeffs[i]*=k;
    return C;
}

Polynomial operator +(double c, Polynomial& A)
{
    Polynomial C=A;
    C.coeffs[0]+=c;
    return C;
}
Polynomial Polynomial::operator +(double c)
{
    Polynomial C=*this;
    C.coeffs[0]+=c;
    return C;
}

void Polynomial::Randomize(int max)
{
    for (int i=degree; i>=0; i--)
    {
        coeffs[i]=rand()%(max+1) + 1;
        if ((rand()%(101) + 1)%2 == 0)
            coeffs[i]*=-1;
    }
}

void Polynomial::operator =(Polynomial& A)
{
    if (degree==A.degree)
    {
        for (int i=degree; i>=0; i--)
        {
            coeffs[i]=A.coeffs[i];
        }
    }
}

Polynomial Polynomial::operator+(const Polynomial& B)
{

    if (degree>=B.degree)
    {
        Polynomial C(degree);
        C=*this;

        for (int i=B.degree; i>=0; i--)
        {
            C.coeffs[i]=coeffs[i]+B.coeffs[i];
        }
        return C;
    }
    else
    {
        Polynomial C=B;

        for (int i=degree; i>=0; i--)
        {
            C.coeffs[i]=coeffs[i]+B.coeffs[i];
        }
        return C;

    }

}

void Polynomial::operator+=(const Polynomial& B)
{
    *this = (*this + B);
}

int Polynomial::Coeff(int deg)
{
    return coeffs[deg];
}

void line(int lines)
{
    for (int i=0; i<lines; i++)
        cout << endl;
}

void Polynomial::GetCoeffs(istream& in)
{
    for (int i=degree; i>=0; i--)
    {
        in >> coeffs[i];
    }
    in.ignore();
}

void Polynomial::Show(ostream& out)
{

    if (coeffs[degree]>0)
                cout << "   ";
    for (int i=degree; i>=0; i--)
    {

        if (coeffs[i]>=0)
        {
            if (i!=degree)
                out << " + ";
            out << coeffs[i];

        }
        else
        {
            if (coeffs[i]<0)
                out << " - ";
                out << 0-coeffs[i];
        }
        if (i>1)
            out << "x^" << i;
        else if (i==1)
            out << "x";

    }
}

Polynomial::Polynomial(const Polynomial& A)
{
    coeffs=new double[A.degree+1];
    degree=A.degree;
    for (int i=A.degree; i>=0; i--)
    {
        coeffs[i]=A.coeffs[i];

    }

}

Polynomial Polynomial::operator*(Polynomial& A)
{
    int deg=A.degree+degree;
    Polynomial P(deg);

    for (int i=deg; i>=0; i--)
        P.coeffs[i]=0;

    for (int i=deg; i>=0; i--)
    {
        for (int j=A.degree; j>=0; j--)
        {
            P.coeffs[i+j]+=coeffs[i]*A.coeffs[j];
        }
    }

    return P;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T02:55:25.357

您的问题是这`*this + B`是一个临时的，临时对象不能绑定到非`const`引用。

当然，作业的 RHS 没有理由不能是`const`. 尝试：

```
void operator=(/* HERE */ const Polynomial& A); 
```

您的大多数其他运营商也没有使用`const`他们应该使用的地方。例如：

```
Polynomial operator+(const Polynomial& B) /* HERE */ const; //Polynomial + Polynomial
friend Polynomial operator +(double c, /* HERE */ const Polynomial& A); //c + Polynomial 
```

只有赋值运算符应该是非`const`成员，并且它们应该接受`const`正确的操作数。创建新对象的普通二元运算符应该是`const`左右操作数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T02:34:24.930

通常它以其他方式完成。人们利用已定义的 += 运算符（成员）制作二进制 + 运算符（通常是非成员）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T02:55:14.897

> 我哪里错了？

*   您应该使用`std::vector`而不是原始指针。
*   你违反了三原则。
*   您没有遵循创建会员`operator+=`和免费`operator+`.

尝试这个：

```
// UNTESTED
class Polynomial
{
    private:
        std::vector<double> coeffs;

    public:
        //constructors
        Polynomial() : coeffs(1) {}
        Polynomial(int deg) : coeffs(deg+1) {}
        // Don't need copy constructor
        // Don't need destructor
        // Don't need assignment operator

        ...
        int Degree() {return coeffs.size()-1;}

        //operators
        Polynomial& operator+=(const Polynomial& B) {
            if(Degree() < B.Degree())
              coeffs.resize(B.Degree()+1);
            for(int i = 0; i <= B.Degree(); ++i)
              coeffs[i] += B.coeffs[i];
            return *this;
        }    
};

Polynomial operator+(Polynomial A, const Polynomial& B) {
  return A += B;
} 
```

# java - java中的多线程HashTable

> ID：12906697
> 
> 赞同：0
> 
> 时间：2012-10-16T02:27:41.173
> 
> 标签：java, multithreading, hashtable

MainThread 有一个 HashTable，它保存了从 customId 到 SubThread 对象的映射，并将任务放到映射中。SubThread 从地图中删除任务。如何避免这个问题？

线程1：

```
public void start()
{
        subThreadMap = new Hashtable<Integer, SubThread>();
        while(true)
        {
            List<CloudPusherTaskInfo> taskInfos = TestDao.getTasks();

        for (CloudPusherTaskInfo task : taskInfos)
        {
            distribute(task);
        }
    }
}

private void distribute(CloudPusherTaskInfo task)
{
    SubThread subThread = null;

    if(subThreadMap.containsKey(task.getCustomerId()))
    {
        /*
         * if subThread exist, add a task to it
         */
        subThread = subThreadMap.get(task.getCustomerId());

/* -----at this point, the other subThread maybe end, and return null--------*/

        subThread.add(task);
    }
    else
    {
        /*
         * if subThread is not exist, create a new subthread, then add a task and run it 
         */
        SubThread newThread = createNewSubThread(task.getCustomerId());
        subThread = subThreadMap.put(task.getCustomerId(), newThread);
        newThread.add(task);
        new Thread(newThread).start();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:15:39.710

如果我理解正确，子线程可能已完成其任务并在调用 和 之间`subThreadMap.containsKey()`结束`subThreadMap.get()`。

不要重新发明轮子。您应该查看 package 中的类`java.util.concurrent`，它提供了完成线程池和任务执行所需的所有功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T05:26:21.050

The HashTable `Hashtable<Integer, SubThread>();` is not needed if its primary reason is to get Thread objects and start them. Make the CloudPusherTaskInfo implement the Runnable interface and then use the `Executor.execute(new CloudPusherTaskInfo())`. Or you could hold the CloudPusherTaskInfo tasks in a List and execute them one after another.

# java - Postfix计算器，如何处理连续3个数字？

> ID：12906700
> 
> 赞同：1
> 
> 时间：2012-10-16T02:28:01.967
> 
> 标签：java, illegalargumentexception, postfix-notation

到目前为止，这是我的代码：

```
public class PostfixCalculator {

   private Stack<Float> stack;
   private float result;

   private Boolean isOperator (char op){
    boolean operator;
    switch (op){
        case '+':
        case '-':
        case '*':
        case '/':
        case '^':
            operator = true;
            break;
    default:
        operator = false;
        break;}
    return operator;
}

private Boolean isFunction (String func){
    String[] functions = {"sin", "cos", "max"};
    for (int i=0; i<functions.length; i++){
        if (func.equals(functions[i]))
            return true; }
    return false;
}

private void computeOperator (float op1, float op2, char op){
    switch (op){
        case '+': 
            result = op1 + op2;
            break; 
        case '-': 
            result = op1 - op2;
            break;
        case '/': 
            result = op1/op2;
            break;
        case '*': 
            result = op1 * op2; 
            break;
        case '^': 
            result = (float) Math.pow(op1, op2);
            break;

        default:
            break;
    }   
}

public float calculate(String expr) throws IllegalArgumentException {
    result = 0;
    String token;
    Float makeit;
    char operator;
    float op1, op2, pushFloat;
    StringTokenizer calc=new StringTokenizer(expr);

    stack = new Stack<Float>();

    while (calc.hasNextToken()){
        token=calc.getNextToken();
        operator=token.charAt(0);

        if (!(this.isOperator(operator))){
            if (this.isFunction(token)){
                if (token.equals("sin")){
                    op1=stack.pop();
                    result = (float) Math.sin(op1);
                    stack.push(result);
                }
                else if (token.equals("cos")){
                    op1=stack.pop();
                    result = (float) Math.cos(op1);
                    stack.push(result);
                }
                else if (token.equals("max")){
                    op1=stack.pop();
                    op2=stack.pop();
                    result=Math.max(op1, op2);
                    stack.push(result);
                }

            }
            else {
                makeit = new Float(token);
                pushFloat = makeit.floatValue();
                stack.push(pushFloat);
            }

        }
        else {
            op1 = stack.pop();
            op2 = stack.pop();
            computeOperator (op1, op2, operator);
            stack.push(result);

        }
    }
    return stack.pop();
} 
```

}

我想我已经掌握了它的基础知识，但是如何处理连续三位或更多位数的后缀计算，例如'2 3 4 * -'？任何帮助，将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:57:26.970

是的，一堆。并且可以使用数组和计数器轻松实现简单的堆栈——无需使用花哨的类。

该数组将与您可以处理的最深嵌套的表达式一样大（10 个元素应该足以解决几乎所有“真实”问题）。

推送是更新 A[i] 并增加 i。Pop 是减量 i 和参考 A[i]。“8 9 +”是push(8)，push(9)，弹出前两个元素，相加，push结果。请注意，运算符永远不会被推送，只有操作数/结果。

'2 3 4 * -' 将是 push(2), push(3), push(4), pop top two, multiply, push result, pop two, minus, push result。

"7 6 + cos" 将是 push(7), push(6), pop 二, add, push result, pop one, 执行 "cos", push result。

如果您需要弹出一个元素并且计数器为零（例如，“7 +”——您想弹出两次但只能弹出一次），则会出错。如果用户表示“完成”并且堆栈中有多个元素，也会出现错误。

始终“显示”您的顶部元素，因为这是推送的最后一个值或结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T02:41:07.257

对于这样的计算器，您应该使用堆栈。每个数字都是一个推送，每个操作都有相应的动作。

```
st = []
while input:
  if isanumber(input.next()): st.push(input.consume())
  else: #its an operator
    #note this may be wrong for operators that have a specific order
    if(input.next() == "+"): 
      stack.push(stack.pop() + stack.pop())
    # more operations
    input.consume()
print(st) 
```

那将是粗暴的蟒蛇，在这种情况下，我会在做出决定之前先看一个标记。

编辑：

可能应该在发布之前阅读您的代码，无论如何您必须始终推回计算出的数字，还尝试将您的代码简化为只有“函数”和“数字”才能执行两者的函数。正则表达式对这类事情也很有用，例如[http://www.cplusplus.com/reference/std/regex/](http://www.cplusplus.com/reference/std/regex/)。

# mysql - 在具有多个表的 sql 中搜索的最佳方法是什么？

> ID：12906704
> 
> 赞同：1
> 
> 时间：2012-10-16T02:28:40.080
> 
> 标签：mysql, sql

我的桌子上有 3 张桌子，我想从用空格分割的短语中搜索它们

示例：快速棕色。

首先它会搜索短语“The quick brown”，然后是“The”、“quick”、“brown”

我的方法是合并所有表然后搜索。

```
SELECT body FROM
(SELECT body FROM table1
UNION ALL
SELECT body FROM table2)
) AS row WHERE body LIKE '%The quick brown%' OR body LIKE '%The%' OR body LIKE '%quick%' OR body LIKE '%brown%' 
```

以更高的速度做到这一点的最佳方法是什么？

顺便说一句，我正在使用 MySQL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:48:06.363

只是一些观察：

*   因为您`OR`的子句之间有 s，所以您的查询将始终执行`like %the%`例如该子句，该子句始终包含并为您提供比您最严格的子句更广泛的结果。我认为你不想要的东西。
*   由于您有以 % 开头的子句，因此可以保证在那里进行全表扫描，即使那里没有那些全表联合。

我认为最好的解决方案是将像 sphinx 这样的全文搜索组件添加到您的技术堆栈中，因为它可以根据复杂的算法进行此类搜索并返回加权结果。

# c# - 如何在 C# 中隐藏 MonthCalendar 控件的下一个/上一个按钮

> ID：12906710
> 
> 赞同：1
> 
> 时间：2012-10-16T02:29:41.513
> 
> 标签：c#, .net, button, monthcalendar

我有一个项目，我想在 C# 中隐藏 MonthCalendar 控件的下一个/上一个按钮。我已经搜索了谷歌，但我找不到解决方案。请让我看看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T02:42:59.813

您可以通过设置控件的 MinDate 和 MaxDate 属性来禁用它们，以编程方式将 MinDate 设置为本月的第一天，并将 MaxDate 设置为本月的最后一天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T02:50:20.653

```
monthCalendar1.MinDate = new DateTime(2012,10,1);
monthCalendar1.MaxDate = new DateTime(2012, 10, 31); 
```

将 MonthCalendar 设置为禁用箭头有点不直观。

当您无法单击箭头时，您仍然可以单击月份名称，它将显示单个月份，如果您再次单击单个年份。

**最好有一个标签控件，其月份名称覆盖箭头和月份。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-30T10:56:31.607

不要忘记添加小时、分钟和秒...对于避免 MaxDate 上的异常特别有用。

```
DateTime firstDayInMonth = new DateTime(today.Year, today.Month, 1, 0, 0, 0);
DateTime lastDayInMonth = new DateTime(today.Year, today.Month, DateTime.DaysInMonth(today.Year, today.Month), 23, 59, 59);

yourCalendar.MinDate = firstDayInMonth;
yourCalendar.MaxDate = lastDayInMonth; 
```

# c# - 为什么转换为一个字节然后立即返回一个 int？

> ID：12906713
> 
> 赞同：2
> 
> 时间：2012-10-16T02:30:30.687
> 
> 标签：c#, casting, colors, refactoring, rgb

找到这段代码：

`this.message.ForeColor = System.Drawing.Color.FromArgb(((int)(((byte)(64)))), ((int)(((byte)(64)))), ((int)(((byte)(64)))));`

为什么不这样做呢？

`this.message.ForeColor = System.Drawing.Color.FromArgb(64, 64, 64);`

在 Visual Studio 的设计器代码中找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:40:04.697

我怀疑这只是将所有值强制到指定范围内，例如`0..255`，而不管它们的初始值如何。

如果您正在控制常量（如硬编码`64`），则不必要，但可能是此代码是从不受控制的数据动态生成的*（*如对话框中的文本输入框，或者如果设计器允许您输入9999 之类的值，但希望将它们强制返回到有效范围）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T02:40:33.497

唯一的猜测是他们希望应用程序在添加大于 255 的数字时抛出错误？你知道美妙的设计师错误..

# java - 如何在另一种方法中使用返回语句？

> ID：12906715
> 
> 赞同：1
> 
> 时间：2012-10-16T02:30:35.007
> 
> 标签：java

我想通过将它传递给showWindow来调用load_picture中的return语句tempimage，但我不确定如何。这是我的代码片段。编辑：我想我想说的是，我不确定如何处理硬编码的“picture1.gif”。我知道我需要调用一个方法来加载图像，但我不太确定用什么来代替它。：

```
package project3; 

import java.util.Scanner; 
import javax.swing.;
import java.awt.; 
import java.net.*;

public class Project3 {
    //initializing global
static Project3 theobject = new Project3();
final static int MIN_NUMBER=1; 
final static int MAX_NUMBER=8; 
static int image_number=1;
static Image theimage;
// This routine will load an image into memory, non-static requires an object
// It expects the name of the image file name and a JFrame  passed to it
// It will assume an Internet conection is available
// It can only be called AFTER the program object has been created
// It will return a type Image variable, call it like this:   theimage = object.load_picture("picture1.gif", frame); 
// (hard code 'picture1.gif' only when testing - USE a method or variable for 'real' call)
// This code requires you to do an 'import java.awt.*' and an 'import java.net.*'
// Note: this method is using parameter and return type for input/output

// This routine will load an image into memory, non-static requires an object
// It expects the name of the image file name and a JFrame  passed to it
// It will assume an Internet conection is available
// It can only be called AFTER the program object has been created
// It will return a type Image variable, call it like this:   theimage = object.load_picture("picture1.gif", frame); 
// (hard code 'picture1.gif' only when testing - USE a method or variable for 'real' call)
// This code requires you to do an 'import java.awt.*' and an 'import java.net.*'
// Note: this method is using parameter and return type for input/output

public Image load_picture(String imagefile, JFrame theframe)
{

Image tempimage;
// Create a MediaTracker to inform us when the image has
// been completely loaded.
MediaTracker tracker;
tracker = new MediaTracker(theframe);

// getImage() returns immediately. The image is not
// actually loaded until it is first used. We use a
// MediaTracker to make sure the image is loaded
// before we try to display it.

String startURL;
if (imagefile.startsWith("http"))
   startURL = "";
else
   startURL = "http://www.canyons.edu/departments/comp_sci/ferguson/cs111/images/";

URL myURL=null;
try
{
myURL = new URL(startURL + imagefile);
}
catch(MalformedURLException e) {
  System.out.println("Error caught " + e.toString());
}

//tempimage = getImage(myURL);   // JApplet version
tempimage = Toolkit.getDefaultToolkit().getImage(myURL); // stand alone program version

// Add the image to the MediaTracker so that we can wait for it

tracker.addImage(tempimage, 0);
try { tracker.waitForID(0); }
catch ( InterruptedException err) { System.err.println(err); }

return tempimage;
}

// This class/method uses a  global variable that MUST be set before calling/using
// note: You can not call the paint routine directly, it is called when frame/window is shown
// look up the repaint() routine in the book
// Review Listings 8.5 and 8.6
//
public static class MyPanel extends JPanel {
 public void paintComponent (Graphics g) {
     JPanel panel= new JPanel();
    int xpos,ypos;
    super.paintComponent(g);
    // set the xpos and ypos before you display the image
    xpos = 300; // you pick the position
    ypos = 200; // you pick the position
    if (theimage != null) {
        g.drawImage(theimage,xpos,ypos,this);
        // note: theimage global variable must be set BEFORE paint is called
    }
 }
}
public static void showWindow( String filename ) {
    // create, size and show a GUI window frame, you may need to click on taskbar to see window
    //display the filename in the title of the window frame, otherwise the window will be blank (for now)

JFrame frame1= new JFrame();
theimage = theobject.load_picture("picture1.gif", frame1);
//"picture1.gif" is hardcoded, I want to call this using a method
frame1.setTitle(filename);
frame1.setSize(440,302);
frame1.setLocation(400,302);
frame1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame1.setVisible(true);
} 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:38:06.960

方法返回的值`load_picture`可以直接发送给`showWindow`方法，也可以分配给变量：

```
String filename = "your/filename";
JFrame theFrame = new JFrame();
Project3 project = new Project3();
MyPanel.showWindow(project.load_picture(filename, theFrame); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T02:37:52.157

在 showWindow 方法中，只需调用 load_picture 方法，如下所示：

```
Image tempImage = load_picture(filename, frame1); 
```

从这里你可以对 tempImage 对象做任何你喜欢的事情。

# xml - 使用预先存在的目录在文档中创建链接

> ID：12906719
> 
> 赞同：1
> 
> 时间：2012-10-16T02:31:14.647
> 
> 标签：xml, xslt, xpath, tableofcontents

我有大量已部分标记的 OCRed 文档。我正在尝试在目录中创建工作链接。目录已格式化

```
<document>
  <text>
     <list>
        <item>Chapter 1<ref>7</ref></item>
        <item>Chapter 2<ref>27</ref></item>
        <item>Chapter 3<ref>54</ref></item>
        <item>Chapter 4<ref>77</ref></item>
     </list>
     <body>
      OCRED text <pb n="7-8" xml:id="VAB0003"/> OCRED text
     </body>   
</document> 
```

有没有办法测试 ref 的值是否与 pb 中 @n 的值的一部分相同，然后如果是，则提取 @xml:id 的值并在 ref 元素中使用它？有没有一种不那么复杂的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:23:56.193

我想你正在寻找这样的东西：

```
<xsl:template match="ref*">
  <xsl:variable name="page" select="."/>
  <xsl:variable name="target" 
                select="//pb[contains(
                        concat(' ',translate(@n,'-',' '),' '), 
                        concat(' ',$page,' '))]/@xml:id"/>
  <xsl:copy>
    <xsl:if test="$target">
      <xsl:attribute name='target'>
        <xsl:value-of select="$target"/>
      </xsl:attribute>
    </xsl:if>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template> 
```

的定义中有复杂的连接，`target`以确保您匹配页码的完整标记；在 XSLT 2.0 中，它可以更优雅地完成并且没有 concats，但不会更简洁。

# c++ - 提取日期字符串并确定哪个更早

> ID：12906720
> 
> 赞同：1
> 
> 时间：2012-10-16T02:31:16.043
> 
> 标签：c++, regex, boost, boost-date-time

我正在研究一个简单的 NLP 项目，它给定一个字符串，将确定各种参数。

给定以下输入：

```
07122012 12102012 
```

代码：

```
string REGEX_DATE = "((\\d{2})/(\\d{2})/(\\d{4}))";

regex expressionFormat(REGEX_DATE);

sregex_token_iterator i(input.begin(), input.end(), expressionFormat, 1);

sregex_token_iterator j;

while(i != j)
{
result = *i++;
} 
```

存储和比较结果的最佳方式是什么？（确定哪个日期更早）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:39:02.197

最好的方法是构造和比较日期而不是字符串或数字：

```
#include <iostream>
#include <string>
#include <boost/date_time.hpp>

int main()
{
    std::string input = "07122012 12102012";

    std::istringstream buf(input);
    buf.imbue(std::locale(buf.getloc(),
              new boost::posix_time::time_input_facet("%d%m%Y")));

    boost::posix_time::ptime d1, d2;
    buf >> d1 >> d2;

    if(d1 < d2)
        std::cout << d1 << " before " << d2 << '\n';
    else
        std::cout << d2 << " before " << d1 << '\n';
} 
```

在线演示： http: [//liveworkspace.org/code/989ba879e622aed7866e7dba2d0f02ee](http://liveworkspace.org/code/989ba879e622aed7866e7dba2d0f02ee)

# ios - 链接图层及其子图层的动画（子图层模型效果超图层动画）

> ID：12906725
> 
> 赞同：0
> 
> 时间：2012-10-16T02:31:47.207
> 
> 标签：ios, core-animation

我正在尝试链接图层及其子图层的动画。但是，我遇到的问题是子层的动画位置的模型更新在其超级层的动画期间在视觉上是显而易见的。这是我用来链接动画的代码：

```
// Superlayer. 
CFTimeInterval now = [self.artworkContainer.layer convertTime:CACurrentMediaTime() fromLayer:nil];
CABasicAnimation *slideDown = [CABasicAnimation animationWithKeyPath:@"position"];
slideDown.duration = SLIDE_DOWN_DURATION; //SLIDE_DOWN_DURATION;
slideDown.beginTime = now;
slideDown.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
slideDown.fromValue = [self.artworkContainer.layer valueForKey:@"position"];

CGPoint finalPointOfContainer = CGPointMake(self.artworkContainer.layer.position.x, self.artworkContainer.layer.position.y+verticalDistanceOfFirstFall);
slideDown.toValue = [NSValue valueWithCGPoint:finalPointOfContainer];
self.artworkContainer.layer.position = finalPointOfContainer;
[self.artworkContainer.layer addAnimation:slideDown forKey:@"position"];

// Sublayer 
CABasicAnimation *moveActualArtwork = [CABasicAnimation animationWithKeyPath:@"position"];
moveActualArtwork.duration = timeOfSecondFall;
moveActualArtwork.beginTime = now + SLIDE_DOWN_DURATION;
moveActualArtwork.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
moveActualArtwork.fromValue = [self.artWork.layer valueForKey:@"position"];

CGPoint finalPointOfArtwork = CGPointMake(self.artWork.layer.position.x, self.artWork.layer.position.y+verticalDistanceOfSecondFall);
moveActualArtwork.toValue = [NSValue valueWithCGPoint:finalPointOfArtwork];
self.artWork.layer.position = finalPointOfArtwork; // If this is commented out, the superlayer animation looks correct (of course this isn't a true fix because the sublayer snaps back to its original position without a model update). 

moveActualArtwork.delegate = self;
[self.artWork.layer addAnimation:moveActualArtwork forKey:@"position"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T02:31:47.207

我在写问题时找到了答案。我需要设置第二个动画的 fillMode 属性：`moveActualArtwork.fillMode = kCAFillModeBackwards;`

如果将`fromValue`and`toValue`视为时间轴上的位置，问题是在子层`fromValue`到达时间轴上的位置之前，它正在使用其模型层来确定其位置。通过使用 kCAFillModeBackwards，fromValue 被有效地扩展以覆盖它之前的时间线，因此 iOS 知道在动画实际开始之前要渲染什么。

我在 45:31 回顾了 WWDC 2011 视频 Session 421 - Core Animation Essentials 找到了答案。

# ubuntu - 在 gtk2.0 中使用 cairo 在 ubuntu 11.10 中消失的小部件

> ID：12906737
> 
> 赞同：1
> 
> 时间：2012-10-16T02:33:03.683
> 
> 标签：ubuntu, gtk, repaint, cairo, ubuntu-11.10

这是我关于堆栈溢出的第一个问题。

从 Arch Linux 迁移到 Ubuntu 11.10 后，我面临一个问题。每当单击活动小部件（即按钮等）时，我遇到的问题就是小部件消失。如果单击活动按钮，则所有其他小部件都会消失，但单击的按钮除外。然后将鼠标移到消失的按钮上会使它们再次出现。但是单击该按钮会导致其余小部件再次消失。

我已经举了一个我面临的问题的小例子，不确定它是 gtk 还是 Cairo 重绘问题。但是，如果我从代码中删除 cairo 图形，则不会出现此问题。

```
#include <gtk/gtk.h>
#include <math.h>
#include <cairo.h>
//gcc -Wall -Werror -g repaint_problem.c -o repaint_problem `pkg-config --cflags --libs gtk+-2.0`

void screen_changed(GtkWidget *widget, GdkScreen *old_screen, gpointer userdata)
{
    GdkScreen *screen = gtk_widget_get_screen(widget);
    GdkColormap *colormap = gdk_screen_get_rgba_colormap(screen);

    if (!colormap)
    {
        printf(" Your screen does not support alpha channels! >:-P\n");
        colormap = gdk_screen_get_rgb_colormap(screen);
    }

    gtk_widget_set_colormap(widget, colormap);
}

gboolean W_expose(GtkWidget *widget, GdkEventExpose *event, gpointer userdata)
{
    cairo_t *cr = gdk_cairo_create(widget->window);
    cairo_pattern_t *pat1;

    cairo_set_source_rgba (cr, 1.0, 1.0, 1.0, 0.0); /* transparent */

    /* draw the background */
    cairo_set_operator (cr, CAIRO_OPERATOR_SOURCE);
    cairo_paint (cr);

    gshort x1 , y1 , x2 , y2;
    x1=0;
    y1=0;
    x2=400;
    y2=200;

    cairo_move_to(cr, x1+6, y1);
    cairo_arc(cr, x2-9, y1+10, 10, 270 * (M_PI / 180), 360 * (M_PI / 180));
    cairo_arc(cr, x2-9, y2-10, 10, 0 * (M_PI / 180), 90 * (M_PI / 180));
    cairo_arc(cr, x1+10, y2-10, 10, 90 * (M_PI / 180), 180 * (M_PI / 180));
    cairo_arc(cr, x1+10, y1+10, 10, 180 * (M_PI / 180), 270 * (M_PI / 180));
    cairo_stroke_preserve(cr);
    pat1 = cairo_pattern_create_linear(0, y1, 0, y2);
    cairo_pattern_add_color_stop_rgba(pat1, 0.05, 0.35, 0.38, 0.82, 1);
    cairo_pattern_add_color_stop_rgba(pat1, 0.9,0.67, 0.78, 0.97 ,0.9);
    cairo_set_source(cr, pat1);
    cairo_fill(cr);

    cairo_pattern_destroy(pat1);    
    cairo_destroy(cr);
    g_print("redrawing\n");
    return FALSE;
}

int main (int argc, char *argv[])
{
  GtkWidget *window, *fixed, *button[3];
  gtk_init (&argc, &argv);
  window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
  gtk_window_set_title (GTK_WINDOW (window), "Cairo Dissappearing Button Act :-P");
  gtk_container_set_border_width (GTK_CONTAINER (window), 0);
  gtk_widget_set_size_request (window, 400, 200);

    // commenting out the line below will stop the cairo repainting and also stop the problem!
    g_signal_connect(G_OBJECT(window), "expose-event", G_CALLBACK(W_expose), NULL);

    g_signal_connect(G_OBJECT(window), "screen-changed", G_CALLBACK(screen_changed), NULL);
    gtk_widget_set_app_paintable(window, TRUE);
    screen_changed(window, NULL, NULL);

  fixed = gtk_fixed_new ();

    gint i;
    for(i = 0 ; i<3 ; i++)
    {
        button[i]=gtk_button_new();
        gtk_widget_set_size_request (button[i], 40, 40); 
        gtk_fixed_put (GTK_FIXED (fixed), button[i], (i+1)*50, 40);
    }

  gtk_container_add (GTK_CONTAINER (window), fixed);

  g_signal_connect (G_OBJECT (window), "destroy",G_CALLBACK (gtk_main_quit), NULL);

  gtk_widget_show_all (window);
  gtk_main ();
  return 0;
} 
```

提前致谢

# lisp - Common Lisp - 单行打印/返回/单行计数器/格式化

> ID：12906738
> 
> 赞同：3
> 
> 时间：2012-10-16T02:33:04.887
> 
> 标签：lisp, format, progress-bar, common-lisp

我有兴趣在 Common Lisp 中实现“单行”计数器/进度条。没什么花哨的，就像：

=>

==>

===> ...等等。

然后让它重新开始。或者也许计算我访问过的节点数。

但是，我想在一行上做这一切，并清除以前打印的字符。例如，在 Python 中，它可能类似于：

```
for i in range(0,1000):    
    print "\r",i,"   " 
```

然后会计数，但将所有内容保留在一行上，同时在任何给定迭代之前清除该行上打印的所有内容。

我知道在 lisp 中有`(format t "text" #\return)`，但这似乎不起作用。

有谁知道我该怎么做？（我环顾四周，似乎找不到任何东西）。

谢谢，

安德鲁

***编辑：***

我找到了解决方案。您需要为要处理的添加一个指令（通用“ `~A`”工作）`#\return`：

```
(loop for i from 0 to 50000 do
        (format t "~A~A         " #\return i)) 
```

这将计数到 50,000，您可以观看它执行此操作。因此，它适用于您可能想要重用单个输出行的任何其他情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:10:34.510

```
 (defun show-progress (len)
  (format t "=")
  (dotimes
      (i len)
    (format t "="))
  (format t ">")
 ) 
```

执行此函数后，您应该会看到以下输出：

```
CL-USER> (show-progress 10)
===========>
NIL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:41:32.880

```
(defun progress-bar ()
  (dotimes (i 100)
    (format t "~a>" (make-string i :initial-element #\=))
    (finish-output)
    (sleep 1)
    (dotimes (j (1+ i))
      (write-char #\Backspace)))) 
```

这就是您如何在同一行上打印一个不断增长的“箭头”（发送退格字符的次数与您打印等号字符的次数一样多将删除它）。

请注意，这在 SLIME/SWANK 组合中不起作用，因为它们不会处理可能被解释为命令的“特殊”字符，而是会回避它们，这将打印为一堆`^H`，但如果你在终端中运行它，然后它会清理箭头并重新打印。

* * *

这就是你如何`format`通过重复相同的字符来处理字符串：

```
(defun progress-bar ()
  (dotimes (i 100)
    (format t (format nil "~~1,1,~d,'=:<>~~>" i))
    (finish-output)
    (sleep 1)
    (dotimes (j (1+ i))
      (write-char #\Backspace)))) 
```

如果您喜欢更复杂的方式（确实是几个字符短！）。而且，哦，等等，它创建的字符串与原来的字符串一样多……哎呀 :)

* * *

*不幸的是，我不知道一个很好的格式指令可以明确地重复一个字符，所以上面的方法似乎是最简单的方法，但是，还有其他有趣的方法可以有效*地做到这一点。

```
(defun progress-bar ()
  (let ((arrow (make-array
                101
                :element-type 'character
                :initial-element #\>
                :fill-pointer 1)))
    (dotimes (i 100)
      (format t arrow)
      (setf (fill-pointer arrow) (+ i 2)
            (aref arrow i) #\=
            (aref arrow (1+ i)) #\>)
      (finish-output)
      (sleep 1)
      (dotimes (j (1+ i))
        (write-char #\Backspace)))))

(defun progress-bar ()
  (let (source)
    (dotimes (i 100)
      (format t "~{~c~}>" source)
      (push #\= source)
      (finish-output)
      (sleep 1)
      (dotimes (j (1+ i))
        (write-char #\Backspace))))) 
```

例如。

# api - API 按日期获取 Wikipedia 修订 ID

> ID：12906739
> 
> 赞同：4
> 
> 时间：2012-10-16T02:33:15.127
> 
> 标签：api, date, wikipedia, revision, wikipedia-api

是否有任何 API 按日期获取维基百科修订 ID，而不是检查所有修订历史并提取该日期之前的最新修订？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T09:07:58.080

[修订查询 api](https://www.mediawiki.org/wiki/API:Revisions)允许您传递时间戳以仅获取指定时间间隔内的修订。利用

```
api.php?action=query&prop=revisions&rvlimit=1&rvstart= myTimestamp 
```

查看[手册：WfTimestamp](http://www.mediawiki.org/wiki/Manual:WfTimestamp)以了解可接受的格式 -`yyyymmddhhmmss`始终有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-26T15:24:38.057

基于上一个答案：始终接受的格式`yyyymmddhhmmss`返回错误。此示例返回有效响应：

[JSON](https://en.wikipedia.org/w/api.php?action=query&format=json&prop=revisions&titles=Geek&rvprop=ids&rvlimit=1&rvstart=2016-12-01T00%3A00%3A00.000Z)

[XML](https://en.wikipedia.org/w/api.php?action=query&format=xml&prop=revisions&titles=Geek&rvprop=ids&rvlimit=1&rvstart=2016-12-01T00%3A00%3A00.000Z)

字段 revid 中的 id 包含参数 rvstart 中传递的日期之前的 id：

[修订 ID](https://en.wikipedia.org/w/index.php?title=Geek&oldid=751538469)

# python - 单元测试 python udev 交互

> ID：12906740
> 
> 赞同：1
> 
> 时间：2012-10-16T02:33:22.683
> 
> 标签：python, udev

我继承了一些 python 代码，它编写了一个新的 '/etc/udev/rules.d' 映射文件，然后对 udev 进行子进程调用以使其刷新其设备列表：

```
call(['/sbin/udevadm', 'trigger', '--action=change']) 
```

触发调用是必要的，因为我们需要更新映射而不想拔下并重新插入正在映射的设备。我的问题是“调用”行在某一点被删除，导致程序其他部分的副作用不明显，因此没有被捕获。

我通常的解决此类问题的方法是对该方法（写入映射文件并调用触发器）进行单元测试以强制执行预期的行为，但这种行为似乎超出了单元测试的范围。这是一个系统调用，更不用说 udevadm 触发器需要 sudo 访问权限。我不知道在这种情况下如何/模拟什么。

我考虑使用 pyudev 库，因为我看到它可以模拟 udev 的某些行为，但看起来它不能模拟触发行为（或者甚至访问它）。

没有抛出一个大的“#永远不要删除这条线！” 在“呼叫”行上方，我可以在这里做些什么来防止将来将其删除吗？“不要删除”行很容易被忽略，比如一年后没有人知道它为什么在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:08:53.280

这是我在这种情况下决定做的事情，如果有人不同意我的回答，请加入！

这是一个二人组。

首先，我包装了我关心的呼叫，并在我的代码中将直接“呼叫”切换到此。

```
class UdevWrapper:
    def udevadm_trigger(self):
        call(['/sbin/udevadm', 'trigger', '--action=change']) 
```

（该类包含的内容不止这些，为了清楚起见，这里只是简化了）

接下来我模拟了包装器方法并进行了测试以确保它被调用

```
@patch.object(utils.UdevWrapper,'udevadm_trigger')
def test_trigger_called(self,mock_udevadm_trigger):
    mock_udevadm_trigger.return_value = True

    # name changed for clarity
    ClassWhereTriggerCalled.func()
    assert mock_udevadm_trigger.called 
```

这样做的灵感来自阅读有关[行为驱动开发](http://dannorth.net/introducing-bdd/)的文章。BDD 的整个想法对我来说是全新的，所以我不确定 BDD 支持者在风格/功能上会如何看待我的解决方案，但它确实符合我的要求 - 如果在未来。

我计划将来将其切换为使用*monkeypatch*，以便我可以创建一个可以检查状态的存根函数（调用触发器的顺序也很重要）。但是原理还是一样的：

1.  包裹在一个可以模拟的方法中
2.  编写测试以确保正确的功能行为
3.  模拟包装方法

# iphone - 如何在 Facebook 上恢复损坏的视频上传

> ID：12906745
> 
> 赞同：0
> 
> 时间：2012-10-16T02:33:45.327
> 
> 标签：iphone, ios, facebook, video, upload

我使用以下代码上传视频，这不是可恢复的上传。如何在 facebook 上恢复损坏的视频上传？

```
- (void)sendVideo{
    NSURL *requestUrl = [NSURL URLWithString:[NSString stringWithFormat:@"https://graph-video.facebook.com/videos?access_token=%@",self.fbAccessToken]];
    self.fbRequest = [ASIFormDataRequest requestWithURL:requestUrl];
    [self.fbRequest setTimeOutSeconds:60];
    self.fbRequest.uploadProgressDelegate = self;
    self.fbRequest.delegate = self;
    self.fbRequest.requestMethod = @"POST";
    [self.fbRequest setPostValue:item.title  forKey:@"name"];
    [self.fbRequest setPostValue:[item customValueForKey:@"status"]   forKey:@"description"];
    [self.fbRequest setFile:item.filePath forKey:@"source"];
    self.fbRequest.tag = RequestStepUpload;
    [self.fbRequest startAsynchronous]; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:45:35.897

无法恢复中断的上传。一旦连接丢失，Facebook 会转储接收到的临时数据。他们仅在收到整个有效负载后才处理视频。

上传过程中来自 Facebook 的唯一反馈是当一个 JSON 对象包含单个图形对象`id`作为对您的视频的引用时完成。

一旦连接中断或断开，您将需要重试。

# .net - WSE X509 证书工具 - exe 在哪里？

> ID：12906746
> 
> 赞同：1
> 
> 时间：2012-10-16T02:33:54.150
> 
> 标签：.net, certificate, x509certificate

我在从 .net 应用程序访问证书中的私钥时遇到问题。

我想使用 WSE 3.0 证书工具检查我的证书的权限。

问题是当我安装它时，我只能访问一个 DLL (Microsoft.Web.Services3.dll) 和一个许可文件。

它安装在这里：C:\Program Files\Microsoft WSE\v3.0

我从这里下载了 msi：

[http://www.microsoft.com/en-us/download/details.aspx?id=6545](http://www.microsoft.com/en-us/download/details.aspx?id=6545)

到底是怎么回事？

仅供参考：我想这样做：[http ://benoit808.wordpress.com/2008/10/31/cryptographicexception-the-handle-is-invalid/](http://benoit808.wordpress.com/2008/10/31/cryptographicexception-the-handle-is-invalid/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T03:52:02.347

发布问题后，我几乎立即找到了答案（derrrr ...）。

[http://www.microsoft.com/en-us/download/details.aspx?id=14089](http://www.microsoft.com/en-us/download/details.aspx?id=14089)

# java - 在 Java 中，哪些 List 实现支持插入操作？

> ID：12906754
> 
> 赞同：2
> 
> 时间：2012-10-16T02:34:38.173
> 
> 标签：java, arrays, list, linked-list

我试图为我的数据数组找到合适的数据结构。我更喜欢支持插入操作的那个（插入到列表中间）。

如果没有这种Java内置的数据结构，有什么好的实现方式呢？

例如`ArrayList<String>`，如果我使用似乎不支持在列表中间插入的 ，如何以`insert(int pos, String str)`一种好的方式实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T02:37:29.537

检查[`ArrayList.add`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add%28int,%20E%29)方法（在实现的[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)接口中声明`ArrayList`）

> 在此列表中的指定位置插入指定元素。将当前位于该位置的元素（如果有）和任何后续元素向右移动（将其索引加一）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T02:36:12.340

任何实现*List*的类都可以做你想做的事。

看一下*[List.add()](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#add%28int,%20E%29)*，它在给定索引处插入一个对象。

如果要*替换*现有项目，请查看*[List.set()](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#add%28int,%20E%29)*。

*add()*方法是 List 接口的一部分...

但是，正如 Bhesh Gurung 回答下的评论所暗示的那样，并非所有列表都支持它。

因此，我会接受 Bhesh Gurung 的回答（正如你已经拥有的那样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T02:43:20.683

我认为您应该看一下[LinkedList add(int, E)](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html#add%28int,%20E%29)方法，与 ArrayList 相比，该方法在列表中间插入提供了更好的性能。

# opengl - LWJGL 为整个 3D 环境提供阴影

> ID：12906756
> 
> 赞同：-1
> 
> 时间：2012-10-16T02:35:03.387
> 
> 标签：opengl, lwjgl, shadows

我在 OpenGL 中遇到了一些阴影问题。模型在每个面上都有一个阴影，OpenGL 给它一个黑暗，脸部从光源指向的方向。我注意到光线只是穿过面，这意味着如果两个平面彼此相邻且光源位于一侧，则较远一侧的平面仍然亮着。

我将如何阻止这种情况发生？我需要一些适用于整个 3D 环境的影子代码。

```
private static void setUpLighting() {
    glShadeModel(GL_SMOOTH);
    glEnable(GL_DEPTH_TEST);
    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glLightModel(GL_LIGHT_MODEL_AMBIENT, BufferTools.asFlippedFloatBuffer(new float[]{0.05f,
            0.05f, 0.05f, 1f}));
    glLight(GL_LIGHT0, GL_POSITION,
            BufferTools.asFlippedFloatBuffer(new float[]{0, 0, 0, 1}));
    glEnable(GL_CULL_FACE);
    glCullFace(GL_BACK);
    glEnable(GL_COLOR_MATERIAL);
    glColorMaterial(GL_FRONT, GL_DIFFUSE);
    glEnable(GL_TEXTURE_2D);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:17:09.777

> 我注意到光线只是穿过面，这意味着如果两个平面彼此相邻且光源位于一侧，则较远一侧的平面仍然亮着。

您将 OpenGL 误认为不是：OpenGL 不是场景图。OpenGL 中没有内部场景表示。您发送它来绘制的每个点、线和三角形都是单独处理的，而不考虑正在绘制的任何其他点、线和三角形。事实上，OpenGL 的行为更像是一种复杂的纸和铅笔。

由于 OpenGL 不维护场景表示，因此它无法自行创建所谓的“全局照明”模型。因此，如果您想在场景中添加阴影，则由您来管理场景并实现绘制算法（使用 OpenGL），其结果看起来像阴影和全局照明。

您应该查看“Stencil Volume Shadows”和“Depth Buffer Shadow Maps”的主题。

# ruby-on-rails - DoubleRenderError 错误，并希望将部分作为字符串返回以在 json 中发送回

> ID：12906758
> 
> 赞同：0
> 
> 时间：2012-10-16T02:35:41.670
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我想做类似以下的事情：

```
def return_item
  item_id=params[:item_id]
  @item=Item.find(item_id)
  str=render :partial => 'headers/item'

  r={}
  r[:status]='success'
  r[:data]=str
  render :json => r.to_json
end 
```

但我收到了一个 DoubleRender 错误（恕我直言，我没有这样做）。我将/如何从渲染中获取值并将其保存到一个字符串中，然后可以将其作为 JSON 响应的一部分渲染出来？

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:44:03.540

`render_to_string`可能是你想要的。

尝试：

```
str=render_to_string :partial => 'headers/item' 
```

查看[http://guides.rubyonrails.org/layouts_and_rendering.html#using-render](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)了解更多信息。

# java - 比较Java中数组中的值？

> ID：12906762
> 
> 赞同：2
> 
> 时间：2012-10-16T02:36:20.030
> 
> 标签：java

我有一个二维数组，它代表一个数独游戏。

我正在尝试像典型的数独游戏一样检查游戏中的错误：

行、列或 3x3 正方形内没有数字 (1-9) 重复。没有空单元格。

我对 Java 很陌生，所以我的知识有限。我打算尝试一个很长的 if，else 语句来比较所有单元格。那没有用，因为 -1 被重复了。（-1 代表一个空的正方形）。我试图解决这个问题，但意识到这个 if 语句太混乱了，必须有更好的方法。

我现在认为最好的方法是使用嵌套的 for 循环遍历每一行、每一列和 3x3 正方形。另一方面，检查空单元格，我想我已经弄清楚了。（嵌套用于在 2D 数组中检查 -1 的语句）。

我还在考虑将所有数字连续、col 或 3x3 平方相加，如果不等于 45，那么游戏是否仍然不完整？

至于检查重复值，我不确定如何实现嵌套。

编辑：让我澄清一下，我真的不想检查重复值，我只是希望游戏在存在重复值时保持不完整。（例如，允许重复值，只是不会像真正的数独游戏那样为您赢得游戏）。我觉得添加到 45 的方法效果最好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T02:44:53.513

如果您不检查整个游戏板是否没有所有重复项，则可以真正简化事情，而是仅在放置新值时检查特定行、列和 3x3 方格是否没有重复项（通过播放器，或从文件加载游戏时）。

这样，您只需要三个非嵌套循环。一个，用于检查所放置的新值是否已存在于其行、列和 3x3 正方形中。

您也永远不需要担心检查 -1（假设您已经错误检查了值 1-9 的输入）。

注意：“检查行、列或 3x3 正方形是否加起来为 45”不起作用。这是一个好主意，但它不会捕获多个重复项（例如，所有 5 的一行都会通过）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:20:06.517

这是一个很好的问题，我很无聊，所以这里有一个相当完整的描述一种方法。当然，还有很多！这种方法很有效，但不是特别优雅。我想看看其他人的想法。

1)[`BitSet`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/BitSet.html)为每行、每列和 3x3 正方形制作一个对象。将它们放入数组中，如下所示：

```
// Initialize arrays
BitSet[] rows = new BitSet[9];
BitSet[] cols = new BitSet[9];
BitSet[] squares = new BitSet[9];
// Initialize the array elements
for(int i=0;i<9;i++){
    rows[i] = new BitSet(9);
    cols[i] = new BitSet(9);
    squares[i] = new BitSet(9);
} 
```

现在我们可以一次遍历网格并在适当的行、列和正方形中设置一个位。“适当”的意思是，如果我们正在查看第 i^(行和)^第j列，我们将在 and 中设置`rows[i]`位`cols[j]`。为了索引正方形的元素，我们将使用以下布局：

```
0 1 2
3 4 5
6 7 8 
```

我们可以通过简单地将 i 和 j 除以 3 得到上述布局中的行和列。所以我们想要的索引是`i / 3 + 3 * ( j / 3 )`。请注意，整数除法在这里起作用，因此`7 / 3 == 8 / 3 == 2`，这意味着 i 和 j 等于 8，我们有例如`8 / 3 + 3 * ( 8 / 3 ) = 2 + 3 * 2 = 8`。

综上所述，我们可以编写方法来检查谜题是否未解决，如下所示：

```
public boolean hasRepeats(){
            // ...
        // initialize rows, cols, and squares as above
            // ...

    for(int i=0;i<9;i++){
        for(int j=0;j<9;j++){
            int gridValue = grid[i + 9 * j];
            if( gridValue == -1 ){
                // Skip empty squares
                continue;
            }
            // Check for repeats
            if( rows[i].get(gridValue) ){
                return true; 
            }
            rows[i].set(gridValue);
            if( cols[j].get(gridValue) ){
                return true;
            }
            cols[j].set(gridValue);
            BitSet square = squares[ i / 3 + 3 * ( j / 3 ) ]
            if( square.get( gridValue ) ){
                return true;
            }
            square.set( gridValue );
        }
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T03:58:20.293

通过归纳正确的一种简单方法是将 9 个值加载到数组中，然后执行以下操作：

1.  转换为集合以确保没有重复
2.  转换回数组
3.  对数组进行排序

然后你可以检查 3 件事来保证这些值是有效的：

1.  检查第一个数字（即最小的）是否为 1
2.  检查最后一个数字（即最高）是否为 9
3.  检查数组的长度是否为 9（事实上，您确实存在所有 9 个数字）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T03:30:54.723

由于您是 java 新手，我假设您使用 2D 整数数组来存储 3x3 正方形。您的目标是验证正方形中是否存在任何重复的整数（-1 除外）。

```
private static final int WIDTH = 3;
private static final int HEIGHT = 3;
private static int[][] cells = new int[WIDTH][HEIGHT]; 
```

您可以通过 -1 初始化二维数组

```
for (int i = 0; i < WIDTH; i++) {
    for (int j = 0; j < HEIGHT; j++) {
        cells[i][j] = -1;
    }
} 
```

一个简单的方法是使用一个列表来临时存储用户输入，并检查添加的输入是否已经存在。

```
private static boolean validateCells() {
    boolean isValid = true;
    List<Integer> inputValues = new ArrayList<Integer>();
    for (int i = 0; i < WIDTH; i++) {
        for (int j = 0; j < HEIGHT; j++) {
            int inputValue = cells[i][j];
            if (inputValue != -1) {
                if (inputValues.contains(inputValue)) {
                    isValid = false;
                    break;
                } else {
                    inputValues.add(inputValue);
                }
            }
        }
    }
    return isValid;
} 
```

这显然不是一种有效的方法，但对于 java 初学者来说，它很简单而且很容易理解。

# php - 是否可以有一个登录链接到许多其他网站？

> ID：12906767
> 
> 赞同：0
> 
> 时间：2012-10-16T02:37:37.430
> 
> 标签：php

所以一个客户问我是否可以建立一个界面，他们将拥有他们的帐户，并从那里能够链接并查看其他网站上的所有其他帐户，如sportsbook.com等......

我会在 php 中创建它并得到一些想法。如果你知道我可以摆脱这个的好方法，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T02:54:05.337

原则上，这可以通过模拟其他站点的登录屏幕的表单发布来实现。例如，如果您想登录`mysite.com`，您将首先查看该站点的登录页面。它可能会有这样的东西：

```
<form action="mysite.com/logincheck.aspx">
    .. stuff here
    Username: <input type="text" name="theusername" />
    .. more stuff here
    Password: <input type="password" name="secretpassword" />
</form> 
```

这里的关键信息是：

1.  `action`标记 ( `mysite.com/logincheck.aspx`)，即处理登录请求的页面
2.  用户输入字段的名称 ( `theusername`)
3.  密码输入字段的名称 ( `secretpassword`)

模拟表单请求相对容易。例如，您可以构建自己的表单副本，使用预先填写的客户正确凭据（在他们的初始密码登录之后）直接发布到站点，或者使用[这个问题](https://stackoverflow.com/questions/5576619/php-redirect-with-post-data)中的概念。您可以将其作为带有 iframe 或类似效果的选项卡式界面来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:03:11.373

假设您有 3 个站点托管在**服务器 A、服务器 B、服务器 C**上。

您将拥有托管在我刚才提到的 3 台服务器上的其中三个站点的数据库。现在，当您在服务器 A 中创建帐户时，您应该有一个文件让我们调用它来与服务器`account_check.php`对话，`Server B`并`Server C`要求用户验证它是否找到了具有相同用户名的帐户。因此，如果您创建帐户`Server B`并且您已经创建了帐户，`Server A`您应该要求用户使用该帐户`Server B`，这样做我们的`account_check.php`文件应该要求用户验证帐户`Server A`，如果验证通过，它将创建一个使用`Server B`与 中相同的详细信息进行帐户`Server A`。

您可以通过`API`. API 意味着您将使用用户名等参数与不同服务器中的文件进行通信。

# php - Magento SOAP API - 登录方法调用引发的 PHP 异常：“看起来我们没有 XML 文档”

> ID：12906775
> 
> 赞同：1
> 
> 时间：2012-10-16T02:38:32.080
> 
> 标签：php, magento, soap, wsdl

我在通过 PHP 的 SoapClient 连接到 Magento SOAP API 时遇到问题。我的开发服务器上有一个小的测试 PHP 文件设置，代码如下：

```
<?php
$soapC = new SoapClient('http://XXXX.com/api/soap/?wsdl', array('trace'=>true, 'exceptions'=>false));
$session = $soapC->__soapCall('login', array('TestUsr', 'test123'));
var_dump($session);
?> 
```

PHP 文件与我的 magento 开发版本位于同一台服务器上。当我通过命令行运行 php 脚本时，$session 变量会输出一个带有错误的 SoapFault 对象，上面写着“看起来我们没有 XML 文档”。

不知道如何解决这个问题。当我尝试下面的代码时，我能够打印出所有 API 方法，但由于某种原因，上面的登录方法调用导致了问题。

```
$soapC = new SoapClient('http://XXXX.com/api/soap/?wsdl', array('trace'=>true, 'exceptions'=>false));
print_r($soapC->__getFunctions()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T03:15:53.977

此错误通常意味着问题出在服务器端。处理请求的服务器未输出有效的 XML。检查是否没有发生错误或重定向。

如果您在浏览器中访问服务器端点会发生什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T18:40:08.167

我意识到问题是当服务器尝试访问 wsdl 文件时，Magento 正在向店面发出 302 重定向。

为了解决这个问题，我登录到 Magento 管理面板，导航到系统 -> 配置 -> Web，然后关闭“自动重定向到基本 URL”。现在就像一个魅力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-14T12:26:45.973

从远程服务器或本地服务器打开**php.ini**文件并将**always_populate_raw_post_data**设置为**-1**。

之后，您需要重新启动 Apache 服务器。

重启完成后，请再次运行您的脚本。

# sql - 加入 WITH(s) 时如何对抗可怕的表现

> ID：12906776
> 
> 赞同：0
> 
> 时间：2012-10-16T02:38:50.093
> 
> 标签：sql, sql-server, sql-server-2008, tsql

不幸的是，我没有权限在这些表上设置索引。

前两个`WITH's`导致此查询运行数小时：

```
;with OneAccession as (
select client_id,COUNT(patient_id) PatientCount from
(
select client_id,patient_id
from F_ACCESSION_DAILY
group by CLIENT_ID,PATIENT_ID
having COUNT(ACCESSION_ID)=1
) a
group by CLIENT_ID
)
,

TwoAccessions as (
select client_id,COUNT(patient_id) PatientCount from
(
select client_id,patient_id
from F_ACCESSION_DAILY
group by CLIENT_ID,PATIENT_ID
having COUNT(ACCESSION_ID)=2
) a
group by client_id
)

select
f.client_id
, 12*(year(getdate())-year(min(f.received_date))) + MONTH(GETDATE())-MONTH(min(f.received_date))
, COUNT(distinct f.patient_id) TotalPatients
, COUNT(f.ACCESSION_ID) TotalSpecimens
, o.PatientCount  TotalPatientsWOneSpec
, t.PatientCount TotalPatientsWTwoSpec
from F_ACCESSION_DAILY f
join
OneAccession o
on o.CLIENT_ID=f.CLIENT_ID
join
TwoAccessions t
on t.client_id=f.CLIENT_ID
where f.CLIENT_ID not in (select clientid from SalesDWH..TestPractices)
and f.SPECIMEN_SOURCE in ('Oral Fluid','Urine')
group by f.CLIENT_ID,o.PatientCount,t.PatientCount 
```

如果我删除`OneAccession`and `TwoAccessions`，我可以在几分钟内得到结果！

我将非常感谢有关改进我的查询语法以加快速度的任何指导！

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:00:39.413

如果你只做两个分组，你可以避免所有的连接。首先计算每个客户的样本，患者然后结合每个客户的计数：

```
WITH SpecimenCountPerPatient AS(
  SELECT client_id, patient_id, COUNT(1) SpecimenCount, MIN(received_date) FirstSpecimenDate
  FROM dbo.F_ACCESSION_DAILY
  GROUP BY client_id, patient_id
)
SELECT client_id,
       DATEDIFF(Month,MIN(FirstSpecimenDate),GETDATE()) FirstSpecimenAgeInMonthForClient,
       COUNT(1) TotalPatients,
       SUM(SpecimenCount) TotalSpecimens,
       SUM(CASE WHEN SpecimenCount = 1 THEN 1 ELSE 0 END) TotalPatientsWOneSpec,
       SUM(CASE WHEN SpecimenCount = 2 THEN 1 ELSE 0 END) TotalPatientsWTwoSpec
FROM SpecimenCountPerPatient
GROUP BY client_id; 
```

这是一个 SQLFiddle，可以看到它的实际效果：[http ://sqlfiddle.com/#!3/72e40/2](http://sqlfiddle.com/#!3/72e40/2)

现在，我知道您说过您不能添加索引，但是在 client_id ASC、patient_id ASC INCLUDE(received_date) 上的索引会加快速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T03:28:17.867

试试这个，让我知道它是否能提高性能

```
SELECT client_id,patient_id ,Accession_Id_Count = COUNT(ACCESSION_ID)
INTO #temp
from F_ACCESSION_DAILY 
group by CLIENT_ID,PATIENT_ID 

select 
f.client_id 
, 12*(year(getdate())-year(min(f.received_date))) + MONTH(GETDATE())-MONTH(min(f.received_date)) 
, COUNT(distinct f.patient_id) TotalPatients 
, COUNT(f.ACCESSION_ID) TotalSpecimens 
, o.PatientCount  TotalPatientsWOneSpec 
, t.PatientCount TotalPatientsWTwoSpec 
from F_ACCESSION_DAILY f 
join (select client_id,COUNT(patient_id) PatientCount from #temp where Accession_Id_Count = 1 group by CLIENT_ID ) o  on o.CLIENT_ID=f.CLIENT_ID 
join (select client_id,COUNT(patient_id) PatientCount from #temp where Accession_Id_Count = 2 group by CLIENT_ID ) t  on t.client_id=f.CLIENT_ID 
where f.CLIENT_ID not in (select clientid from SalesDWH..TestPractices) 
and f.SPECIMEN_SOURCE in ('Oral Fluid','Urine') 
group by f.CLIENT_ID,o.PatientCount,t.PatientCount 

drop table #temp 
```

# ios - 为什么 Alpha 混合渐变纹理会在 OpenGL ES 2.0 中产生意想不到的结果？

> ID：12906784
> 
> 赞同：4
> 
> 时间：2012-10-16T02:39:40.657
> 
> 标签：ios, opengl-es, opengl-es-2.0

我有一个径向渐变纹理（RGBA），它从中心的完全不透明的黑色到边缘的完全透明的颜色：

![球.png](../Images/a9e110f5c3780a885910e40777190f6a.png)

我使用最近使用 GLKit 的 OpenGL 模板设置了一个 iOS 项目。我添加了纹理功能，并在 setupGL 方法中设置了以下代码：

```
glEnable(GL_DEPTH_TEST);
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

当我在白色背景上的正交投影中重叠其中两个纹理（每个都有一个单独的 z）时，我希望是这样的：

![对.png](../Images/43baab9fd5d454298c6e321ca093cac2.png)

但相反，我得到了这个：

![错误.png](../Images/9498c33bc5e83e90d80b3896dcb743f5.png)

我的问题很简单：为什么？OpenGL ES 2.0 的混合不能达到这个效果吗？（我之前在 OpenGL ES 1.1 中已经让它工作了）我缺少一个常见的东西吗？这可能是我的纹理的预乘 alpha 问题吗？如果是这样，我的 PNG 或我加载它的方式会不会有些奇怪？我正在使用 GLKTextureLoader 加载纹理。

很可能我错了，但我知道这不可能是着色器问题，因为 alpha 混合发生在它到达片段着色器之前。我的着色器只是直接传递信息。（也许这是个问题？）

顶点着色器：

```
attribute vec4 position;
attribute vec2 texCoordIn;

varying vec2 texCoordOut;

uniform mat4 modelViewProjectionMatrix;

void main()
{
    gl_Position = modelViewProjectionMatrix * position;
    texCoordOut = texCoordIn;
} 
```

片段着色器：

```
varying lowp vec2 texCoordOut;
uniform sampler2D texture;

void main()
{
    gl_FragColor = texture2D(texture, texCoordOut);
} 
```

我也尝试如下设置 glBendFunc ，但得到相同的结果：

```
glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA); 
```

欢迎任何提示或常见的挂断。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:58:48.927

如果`glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA)`并且`glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)`产生相同的结果，那么您的纹理具有 1.0 的统一 alpha。因此，您将获得相当于添加剂混合的结果，并给出您显示的结果。如果出现任何情况，您正在预乘 alpha，然后将 alpha 通道扔掉。

因此，要检查的显而易见的事情是（i）磁盘上的文件；(ii) 你的纹理加载代码。如果您不要求`GLKTextureLoaderApplyPremultiplication`（并且这不应该影响您的 alpha 通道；大概您是直接从磁盘加载？）那么怀疑会落在 (i) 上，尽管您在上面直接包含的图像似乎在起作用正确。

混合发生在片段着色器之后。为了进一步调试问题，您可以尝试丢弃其余信息，例如，将来自 alpha 通道的值作为 alpha = 1.0 的红色通道传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:41:51.527

好吧，我是个白痴。实际发生的是我的顶点的一个简单问题。我使用单个 glDrawArrays 调用一次绘制所有纹理，但我忘记在矩形之间添加额外的顶点来创建退化三角形。所以基本上第三个球在中心被压扁。但它看起来像一个 alpha 混合问题！

大笨蛋，就在这里。

# jquery - 包装元素，然后在其中附加另一个元素

> ID：12906787
> 
> 赞同：6
> 
> 时间：2012-10-16T02:40:02.840
> 
> 标签：jquery

看看这段代码

```
<div class="preview">
    <img src="link" alt="" class="overlay" />
</div> 
```

我需要做的是包装内部 div 调用“overlay”，然后附加另一个名为“overlay2”的 div，如下所示

```
<div class="preview">
    <div class="overlay">
        <img src="link" alt="" class="overlay" />
        <div class="overlay2"></div>
    </div>
</div> 
```

我尝试使用 .wrap 和 append 但我不知道如何通过一个命令使用它

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T03:08:41.603

你可以试试这个

```
$('div.preview img')
.wrap('<div class="overlay"></div>')
.after('<div class="overlay2"></div>'); 
```

[**演示**](http://jsfiddle.net/pA3PQ/)（参见源代码）。

## 或者

```
$('div.preview img')
.wrap($('<div/>', {'class':'overlay'}))
.after($('<div/>', {'class':'overlay2'})); 
```

[**演示**](http://jsfiddle.net/pA3PQ/1/)（参见源代码）。

## 输出

```
<div class="preview">
    <div class="overlay">
        <img src="link" alt="" class="overlay">
        <div class="overlay2"></div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T02:50:27.960

非常简单

```
$('.preview').append('<div class="overlay2"></div>')
$('.overlay').wrap('<div class="overlay"></div>') 
```

在这里测试它：http: [//jsfiddle.net/RASG/32JSW/](http://jsfiddle.net/RASG/32JSW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T02:47:01.083

```
var imgElement = $('div.preview').find('.overlay');  
$('div.preview').remove('img.overlay');    
$('div.preview').append("<div class='overlay'></div>");    
$('div.overlay').append(imgElement);  
$('img.overlay').after("<div class='overlay2'></div>"); 
```

# css - 在不使用 JS 的情况下防止图像可拖动或可选择

> ID：12906789
> 
> 赞同：171
> 
> 时间：2012-10-16T02:40:20.097
> 
> 标签：css, html, firefox, draggable

有谁知道在 Firefox 中不使用 Javascript 来同时使图像不可拖动且不可选择的方法？看似微不足道，但问题是：

1.  可以在 Firefox 中拖动和突出显示：

2.  所以我们添加了这个，但图像仍然可以在拖动时突出显示：

3.  所以我们添加了这个，以解决突出显示的问题，但与直觉相反，**图像再次变得可拖动。**奇怪，我知道！使用 FF 16.0.1

那么，有谁知道为什么添加`-moz-user-select: none`, 会以某种方式胜过和禁用`draggable=false`？当然，webkit 按预期工作。Interwebs 上没有关于此的内容……如果我们能一起阐明这一点，那就太好了。

**编辑：** *这是关于防止 UI 元素被无意中拖动并提高可用性 - 而不是对复制保护方案的一些蹩脚尝试。*

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2012-10-16T02:46:54.457

为图像设置以下 CSS 属性：

```
.selector {
    user-drag: none;
    -webkit-user-drag: none;
    user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
} 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-11-15T23:12:34.397

我一直忘记分享我的解决方案，我找不到不使用 JS 的方法。在某些极端情况下，@Jeffery A Wooden 建议的 CSS 不会涵盖。

这就是我应用于所有 UI 容器的内容，无需应用于每个元素，因为它会回避所有子元素。

CSS：

```
.unselectable {
    /* For Opera and <= IE9, we need to add unselectable="on" attribute onto each element */
    /* Check this site for more details: http://help.dottoro.com/lhwdpnva.php */
    -moz-user-select: none; /* These user-select properties are inheritable, used to prevent text selection */
    -webkit-user-select: none;
    -ms-user-select: none; /* From IE10 only */
    user-select: none; /* Not valid CSS yet, as of July 2012 */

    -webkit-user-drag: none; /* Prevents dragging of images/divs etc */
    user-drag: none;
} 
```

JS：

```
var makeUnselectable = function( $target ) {
    $target
        .addClass( 'unselectable' ) // All these attributes are inheritable
        .attr( 'unselectable', 'on' ) // For IE9 - This property is not inherited, needs to be placed onto everything
        .attr( 'draggable', 'false' ) // For moz and webkit, although Firefox 16 ignores this when -moz-user-select: none; is set, it's like these properties are mutually exclusive, seems to be a bug.
        .on( 'dragstart', function() { return false; } );  // Needed since Firefox 16 seems to ingore the 'draggable' attribute we just applied above when '-moz-user-select: none' is applied to the CSS 

    $target // Apply non-inheritable properties to the child elements
        .find( '*' )
        .attr( 'draggable', 'false' )
        .attr( 'unselectable', 'on' ); 
}; 
```

这比它需要的复杂得多。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2014-11-23T06:54:52.883

您可以`pointer-events`在 CSS 中使用该属性，并将其设置为“无”

```
img {
    pointer-events: none;
} 
```

**已编辑**

这将阻止（点击）事件。所以更好的解决方案是

```
<img draggable="false" (dragstart)="false;" class="unselectable">

.unselectable {
  user-drag: none; 
  user-select: none;
  -moz-user-select: none;
  -webkit-user-drag: none;
  -webkit-user-select: none;
  -ms-user-select: none;
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-06-20T16:45:56.477

`div`根据具体情况，使用 CSS将图像设为背景图像通常会有所帮助。

```
<div id='my-image'></div> 
```

然后在 CSS 中：

```
#my-image {
    background-image: url('/img/foo.png');
    width: ???px;
    height: ???px;
} 
```

有关带有按钮和不同大小选项的实时示例，请参阅此[**JSFiddle**](http://jsfiddle.net/U3m2u/1/)。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-11-07T00:46:53.810

你可能只是诉诸

```
<img src="..." style="pointer-events: none;"> 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-09-14T10:18:45.633

适用于 Windows Edge 浏览器的通用解决方案（如 -ms-user-select: none; CSS 规则不起作用）：

```
window.ondragstart = function() {return false} 
```

注意：当您仍然需要点击事件（即您不能使用）时，这可以让您不必添加`draggable="false"`到每个标签，但不希望出现拖动图标图像。`img``pointer-events: none`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-04-17T12:11:49.157

我创建了一个与图像大小相同的**div元素，并且位于图像****的顶部**。然后，鼠标事件不会转到图像元素。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-12-22T05:28:00.473

您可以将图像设置为背景图像。由于它位于 a 中`div`，并且`div`是不可拖动的，因此图像将是不可拖动的：

```
<div style="background-image: url("image.jpg");">
</div> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2022-02-16T18:30:50.307

这是一个由四部分组成的解决方案，几乎适用于所有现代浏览器：

```
<img src="foobar.jpg" draggable="false" ondragstart="return false;"> 
```

```
img
{
    user-drag: none;
    -webkit-user-drag: none;

    user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
} 
```

如果要允许选择/突出显示，可以删除 CSS 的底部四行。

# render - ThreeJS Collada 模型未显示

> ID：12906796
> 
> 赞同：0
> 
> 时间：2012-10-16T02:41:42.623
> 
> 标签：render, webgl, three.js, collada

我一生都无法弄清楚为什么我的 Collada 出口不会出现。

跑步

[http://threejsexperiment.s3-website-us-east-1.amazonaws.com/](http://threejsexperiment.s3-website-us-east-1.amazonaws.com/)

github

[https://github.com/markbreneman/TroubleShooting/tree/master/ThreeJSCollada](https://github.com/markbreneman/TroubleShooting/tree/master/ThreeJSCollada)

如果我看一下 Collada 示例（http://mrdoob.github.com/three.js/examples/webgl_loader_collada.html）

把我的模型换成怪物一切都很好，所以我知道这不是模型的问题。我觉得这是我调用加载程序的方式的问题，但我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:44:15.440

尝试在回调`group.add(THEMIS)`内部移动。`loader.load()`

# javascript - 如何从另一个 css 中的前一个文件 (Bootstrap) 加载默认值或清除 css 属性？

> ID：12906797
> 
> 赞同：0
> 
> 时间：2012-10-16T02:41:50.230
> 
> 标签：javascript, html, css, twitter-bootstrap

假设您想包含一个第三方 css 样式表，但它带有一个您不喜欢的属性，最好清除设置的值。例如，在[Boostrap.css](http://twitter.github.com/bootstrap/base-css.html)中，您有：

```
select {
  /* how can you clear the below property? */
  width: 220px;
  background-color: #ffffff;
  border: 1px solid #cccccc;
} 
```

您希望选择不适合整个宽度，而是缩放到默认宽度（文本宽度）。

将宽度属性重置为其默认值的最干净的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:47:04.913

只需将宽度重置为`auto`第三方样式表之后，覆盖先前的属性

```
select {
    width: auto;
} 
```

# iis - 处理能力为 60% 时重启 IIS 5 分钟

> ID：12906798
> 
> 赞同：0
> 
> 时间：2012-10-16T02:41:53.230
> 
> 标签：iis, iis-6

我不确定这是否可能，但是当服务器的 CPU 处理能力为 60% 并且持续时间超过 5 分钟时，有没有办法通过作业或服务重新启动 IIS？如果是，如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:30:11.537

从 IIS 版本 6 开始，您拥有应用程序池，它们可以基于`Fixed Intervals`或进行回收`Memory Based Maximums`。基于此，我不建议您根据 CPU 使用情况重新启动 IIS，您可能会掩盖高 CPU 问题。退出 DebugDiag 并使用 High-CPU 规则并在 CPU 超过 60% 时进行内存转储。

要回答您的问题：

使用下面的代码来监控 CPU（取自[How to get the CPU Usage in C#?](https://stackoverflow.com/questions/278071/how-to-get-the-cpu-usage-in-c) - 该线程中还有其他示例可能更适合您的使用，即带有 Timer_Ticks 的示例）：

```
PerformanceCounter cpuCounter;
PerformanceCounter ramCounter;

cpuCounter = new PerformanceCounter();

cpuCounter.CategoryName = "Processor";
cpuCounter.CounterName = "% Processor Time";
cpuCounter.InstanceName = "_Total";

ramCounter = new PerformanceCounter("Memory", "Available MBytes");

public string getCurrentCpuUsage(){
            return cpuCounter.NextValue()+"%";
}

public string getAvailableRAM(){
            return ramCounter.NextValue()+"MB";
} 
```

然后在 5 分钟后，您可以重置 IIS：

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
//process.StartInfo.FileName = @"C:\WINDOWS\system32\iisreset.exe";
process.StartInfo.FileName = "cmd";
process.StartInfo.Arguments = "/C iisreset /STOP";
process.StartInfo.UseShellExecute = false;
process.StartInfo.CreateNoWindow = true;
process.StartInfo.RedirectStandardError = true;
process.StartInfo.RedirectStandardOutput = true;
process.Start();
process.WaitForExit(); 
```

提示：您需要管理员权限才能重置 IIS。

# objective-c - Objective-C contentsOfDirectoryAtURL 需要文件名而不是完整路径

> ID：12906799
> 
> 赞同：0
> 
> 时间：2012-10-16T02:41:57.520
> 
> 标签：objective-c, filenames, nsfilemanager, file-type

我正在使用这段代码来获取文件夹 pathTo_Folder 中包含的文件。我得到的是这样的：“file://localhost/Users/ronny/DEV/0200-ObjC4/ModernTimes/DrawingFun/linen/Tech-2.jpg”，“file://localhost/Users/ronny/DEV /0200-ObjC4/ModernTimes/DrawingFun/linen/Tech-3.jpg", "文件://localhost/Users/ronny/DEV/0200-ObjC4/ModernTimes/DrawingFun/linen/Tech-4.jpg", "文件://localhost/Users/ronny/DEV/0200-ObjC4/ModernTimes/DrawingFun/linen/Terra-1.jpg", "file://localhost/Users/ronny/DEV/0200-ObjC4/ModernTimes/DrawingFun/linen /Terra-2.jpg", "file://localhost/Users/ronny/DEV/0200-ObjC4/ModernTimes/DrawingFun/linen/Terra-3.jpg", "file://localhost/Users/ronny/DEV /0200-ObjC4/ModernTimes/DrawingFun/linen/Terra-4.png", "文件：

我想知道是否有一种方法可以只获取文件名而不包含像“Tech-2.jpg”这样的文件夹

```
NSString *pathTo_Folder = @"/Users/ronny/DEV/0200-ObjC4/ModernTimes/DrawingFun/linen";

NSFileManager *fileManager = [NSFileManager defaultManager];

NSArray *theFiles =  [fileManager contentsOfDirectoryAtURL:
                      [NSURL fileURLWithPath:pathTo_Folder]
                                includingPropertiesForKeys:[NSArray arrayWithObject:NSURLNameKey]
                                                   options:NSDirectoryEnumerationSkipsHiddenFiles
                                                     error:nil]; 
```

来自瑞士的问候，罗纳德霍夫曼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T02:48:12.863

```
for( NSURL* fileURL in theFiles ) {
  NSString* filename = [fileURL lastPathComponent];
  // do things with the filename
} 
```

根据评论，如果您只想要文件名：

```
// Note, this is not very efficient, and it's especially inefficient if
// you then go ahead and iterate the resultant array
NSArray* filenames = [theFiles valueForKeyPath:@"lastPathComponent"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T02:48:04.610

NSURL 有一个方法`lastPathComponent`可以完全满足您的需求。

# windows - 如何让 USB 设备加载我的功能驱动程序？

> ID：12906802
> 
> 赞同：2
> 
> 时间：2012-10-16T02:42:21.963
> 
> 标签：windows, usb, driver, wdm

我写了一个usb功能驱动程序。如果我想要插入我计算机的任何 USB 设备加载此驱动程序而不是其真正的驱动程序，我该怎么办？我只知道总线驱动程序创建 pdo 时是否更改 vid/pid，我可以做到。但我不知道是否有一个简单的方法来做到这一点。如何改变总线的行为？过滤器驱动程序可以做到吗？平台是Windows。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:56:37.910

最好的办法是实现[HID（人机接口设备）](http://en.wikipedia.org/wiki/USB_human_interface_device_class)驱动程序。通过遵循 HID 指南，您需要的大多数功能都已得到支持，而无需编写自定义设备驱动程序。

以下是一些帮助您入门的链接：

**使用 HID 类简化了编写 USB 设备驱动程序的工作**
[http://www.edn.com/design/communications-networking/4336292/Using-the-HID-class-eases-the-job-of-writing-USB-设备驱动程序](http://www.edn.com/design/communications-networking/4336292/Using-the-HID-class-eases-the-job-of-writing-USB-device-drivers)

**触摸、输入和 HID：体系结构和驱动程序支持**
[http://msdn.microsoft.com/en-us/library/windows/hardware/gg487435.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487435.aspx)

要通过网络进行重定向，请查看[FreeRDP 项目](https://github.com/FreeRDP/FreeRDP)。它是开源的，在[Apache 许可](http://www.apache.org/licenses/LICENSE-2.0.html)下，所以你几乎可以用代码做任何你想做的事情。

# javascript - 从 javascript 读取 AppSettings

> ID：12906806
> 
> 赞同：2
> 
> 时间：2012-10-16T02:42:38.063
> 
> 标签：javascript, asp.net, c#-4.0

我正在尝试创建一个检索 web.config 应用程序设置值的函数。如果我将代码`alert('<%=ConfigurationManager.AppSettings["facebookAppID"].ToString() %>')`直接放在 .ascx 文件中，则此方法有效。但是，如果我从该 .ascx 文件调用 .js 文件中的一个通用函数（以便拥有一个通用全局函数），它就不起作用......即它不评估值，而只是返回字符串"<%=System.ConfigurationManager.AppSettings[\"facebookAppID\"].ToString(); %>"

关于为什么会这样的任何想法？

```
function GetappId() {
    var k = "<%=System.ConfigurationManager.AppSettings["facebookAppID"].ToString(); %>"
    alert(k);
return k
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:49:51.030

常见的 .js 文件，如果你像这个脚本 src="somescript.js" /script 那样包含它们，它们会加载到客户端浏览器上，并且永远不会在服务器上处理。

使用 javascript 加载文件/值的唯一方法是执行和 ajax 调用到返回 JSON 或文本的 aspx 页面。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:53:04.800

请注意，这仅适用于 web.config 中的 appSettings 部分

1.  我创建了一个`.aspx`名为*DynamicJs.aspx*的文件，如下所示。它将从 appSettings 中获取键值对并构造一个 JSON 字符串。

    **后面的代码**

    ```
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.UI;
    using System.Web.UI.WebControls;
    using System.Configuration;
    using System.Web.Script.Serialization;
    using System.Collections.Specialized;

    public partial class DynamicJs : System.Web.UI.Page
    {
        private string settingsJson = string.Empty;

        protected void Page_Load(object sender, EventArgs e)
        {
            NameValueCollection nvc = ConfigurationManager.AppSettings;
            var dict = new Dictionary<string, string>();
            foreach (string key in nvc.Keys)
            {
                dict.Add(key, nvc[key]);
            }
            settingsJson = new JavaScriptSerializer().Serialize(dict);
        }

        public string GetSettingsJson() {
            return settingsJson;
        }
    } 
    ```

    **HTML**（请注意内容类型，因为它会发出 JavaScript）

    ```
    <%@ Page Language="C#" AutoEventWireup="true" CodeFile="DynamicJs.aspx.cs" Inherits="DynamicJs" ContentType="text/javascript" %>

    function GetValue(key){
        var data= <%=GetSettingsJson() %>;
        return data[key];
    } 
    ```

2.  在消费页面中包含 DynamicJs.aspx，如下所示：

    ```
    <script src="DynamicJs.aspx" type="text/javascript"></script> 
    ```

3.  使用以下内容从配置中获取值

    ```
    <script>
        alert(GetValue("key2"));
    </script> 
    ```

这绝对不是最优雅的方式，但我认为它会帮助你实现你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T08:03:42.887

一种方法是使用自定义控件页面。在您的网站中添加一个`Web User Control (.ascx)`页面并将您的脚本代码放入其中

```
<script type="text/javascript">
    function GetappId() {
        var k = "<%=System.ConfigurationManager.AppSettings["facebookAppID"].ToString(); %>"
        alert(k);
        return k
    }
</script> 
```

现在将您的控件注册到您想要这样的`GetappId`功能的页面

```
<%@ Register TagPrefix="Scrpt" TagName="GlobalScrpt" Src="~/WebUserControl.ascx" %> 
```

** 此标签`<%@ Page %>`在`aspx`页面中的标签之后

然后在`aspx`页面的头部调用这样的控件

```
<head runat="server">
    <title></title>
    <Scrpt:GlobalScrpt ID="Scrpt1" runat="server" />
</head> 
```

** 确保你有`runat="server"`你的标题标签

现在您可以在页面的任何位置调用`GetappId()`并获得所需的结果。`aspx`

## 更新 - 另一个解决方案

另一种方法是创建一个`aspx`（假设页面是`Default1.aspx`）页面，页面后面没有单独的代码，并将您的代码放在那里

```
<%@ Page Language="C#" %>

function GetappId()
{
    var k = "<%=System.ConfigurationManager.AppSettings["facebookAppID"].ToString(); %>";
    alert(k);
} 
```

然后在要调用 GetappId 的页面中将第一`aspx`页添加为 javascript 页面。

```
<head runat="server">
    <title></title>
    <script type="text/javascript" src="Default1.aspx"></script>
</head> 
```

现在在页面的任何位置调用您的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T04:48:50.447

`ClientScriptManager` `RegisterClientScriptBlock()`您可以使用or将 javascript 注入您的标记，`RegisterStartupScript()`并将您的应用程序设置内联或调用方法并将设置作为参数传递。

另一种方法是呈现一个隐藏字段并在其中包含您的设置，然后在您的 javascript 代码中引用它。

# homebrew - Mac Homebrew - 如何报告可能的错误？

> ID：12906808
> 
> 赞同：1
> 
> 时间：2012-10-16T02:42:42.323
> 
> 标签：homebrew

我去了[林克](https://brew.sh/)。它显示了一个开始使用自制软件的命令。我将其复制并粘贴到终端中。它成功安装了自制软件。然后我运行命令'brew doctor'。它抱怨：

```
Warning: You have leftover files from an older version of Xcode.
You should delete them using:
  /Developer/Library/uninstall-developer-folder 
```

所以我做了。现在“酿造医生”报告：

```
/Users/chap$ brew doctor
Warning: You have not agreed to the Xcode license. 
```

Xcode 图标已通用，无法启动。App Store 认为它已安装，不会让我重新安装它。

最大的问题是我不知道从哪里获得帮助。没有我可以看到的论坛。我从自制软件中看到的似乎“面向讨论”的东西有“git”、“blog”、“gist”、“wiki”、“twitter”之类的名称……我都不知道如何使用这些名称。我什至找不到电子邮件地址！

当使用“自制”出现问题时，如何寻求帮助？在 Stackoverflow 上？

编辑：我要问的是 - 如何向支持自制软件的人报告可能的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:06:21.733

[您可以在https://github.com/mxcl/homebrew/issues](https://github.com/mxcl/homebrew/issues)报告错误。我认为你需要一个 GitHub 帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T02:51:00.643

> 当使用“自制”出现问题时，如何寻求帮助？

正如这个问题（以及撰写本文时的其他 375 个问题）所证明的那样，是的，Stack Exchange 社区很可能会为您提供答案。

> Xcode 图标已通用，无法启动

听起来您的问题根本不在于自制软件（如上所述，它已正确安装并且现在很高兴响应您的`brew doctor`命令），而在于 Xcode。

我会首先在谷歌上搜索有关您的 Xcode 情况的答案，也许从SuperUser 上的[类似帖子开始。](https://superuser.com/questions/450707/how-to-remove-xcode-warning-in-macports)

# asp.net - Ajax 加载函数在回发时不起作用

> ID：12906811
> 
> 赞同：0
> 
> 时间：2012-10-16T02:43:02.073
> 
> 标签：asp.net, ajax

我在回发时使用 Ajax 加载页面时遇到问题。这是我的代码片段：

```
<script type="text/javascript">

    $(document).ready(function () {
        $("#GridView").load("/MyInnerPage.aspx");
    });

</script>

<asp:TextBox runat="server" ID="AccountName"></asp:TextBox>
<asp:Button ID="Search" runat="server" Text="Search" />

<div id="GridView">
</div> 
```

最终的想法是用户在 AccountName 文本框中输入文本，当他们提交时页面会进行回发，并从后面的代码中确定搜索参数。最终，加载的页面（即“/MyInnerPage”）将有一组动态参数传递给它，具体取决于搜索参数。不过，这超出了这个问题的范围。

作为概述，当您第一次访问该页面时，它可以完美运行。'MyInnerPage.aspx' 的内容被加载到 'GridView' div 中。

但是，一旦您点击“搜索”，问题就会出现。该页面执行回发，“GridView”div 的内容立即丢失。但是由于某种原因，这条线：

```
$("#GridView").load("/MyInnerPage.aspx"); 
```

不再正常射击。我知道该行正在运行，因为我可以在它之前放置一条警告语句，它会显示在屏幕上。但是，无论我能做什么，在第一次回发后，我似乎都无法在 div 中显示“MyInnerPage”。它只是显示为一个空的 div。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T02:45:59.830

不确定您是否进行了完整的回发。看看这个帖子

[http://blog.dreamlabsolutions.com/post/2009/02/24/jQuery-document-ready-and-ASP-NET-Ajax-asynchronous-postback.aspx](http://blog.dreamlabsolutions.com/post/2009/02/24/jQuery-document-ready-and-ASP-NET-Ajax-asynchronous-postback.aspx)

# python - 错误只能将列表（不是“str”）连接到列表

> ID：12906812
> 
> 赞同：0
> 
> 时间：2012-10-16T02:43:11.523
> 
> 标签：python, function, python-2.7

我的程序应该反转输入的字符串，打印它然后提取数字并在列表中打印反转字符串的数字。

```
def reverse_str(string):
    revstring =('')
    length=len(string)
    i = length - 1
    while i>=0:
        revstring = revstring + string[i]
        i = i - 1
    return revstring
def strip_digits(string):
    result = []
    for c in string:
        result = result + c
string = raw_input("Enter a string->")
new_str = reverse_str(string)
print new_str
numberless_str  = strip_digits(string)
print numberless_str 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T02:45:05.843

放入`str`一个`list`

```
result = result + [c] 
```

或使用`append()`

```
result.append(c) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T02:46:43.443

如果您希望它们作为列表，您应该更改：

```
result = result + c 
```

进入：

```
result.append (c) 
```

但是，请记住，您的代码并不完全符合您的规范。

具体来说，您的函数`strip_digits` *不是*剥离（即丢弃）数字，它实际上是在列出它们，所以我将它重命名为`get_digits`. 我也会`numberless_str`变成`number_str`，因为它根本不是无数的。

其次，它从输入字符串中获取*所有*字符，而不仅仅是数字。

第三，它作用于原始字符串而不是反向字符串。

最后，你应该从你的函数中*返回*`result`，否则你什么也得不到（`None`）。

代码最好写成：

```
def reverse_str(string):
    revstring = ''
    length=len (string)
    i = length - 1
    while i >= 0:
        revstring = revstring + string[i]
        i = i - 1
    return revstring

def get_digits(string):
    result = []                    # <- start with empty list.
    for c in string:               # <- check every char
        if c in "1234567890":      # <- but only transfer digits
            result.append (c)      # <- use append for lists
    return result

string = raw_input("Enter a string->")
new_str = reverse_str(string)
print new_str
number_str  = get_digits(new_str)
print number_str 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T02:46:06.407

我猜`strip_digits()`是正在进行中的工作吗？正如它在进入 for 循环时所写的那样，它试图将一个字符串附加`c`到一个 list 上`[]`。你不能那样做。您可以将一个字符串附加到另一个字符串，或将一个列表附加到另一个列表。

也许您打算`result`像它一样以空字符串开头`reverse_str`？

```
def strip_digits(string):
    result = ''
    for c in string:
        result = result + c 
```

或者，如果您希望它成为一个列表，则`c`先放入一个列表，或使用`append()`：

```
def strip_digits(string):
    result = []
    for c in string:
        result = result + [c]
        # or: result.append(c) 
```

# ios - 使用 EXT-X-MAP 标签的任何 m3u8 播放列表示例

> ID：12906820
> 
> 赞同：7
> 
> 时间：2012-10-16T02:44:37.110
> 
> 标签：ios, html5-video, http-live-streaming

该标签是在 HLS 规范的 draft-09 中引入的，没有任何示例。

```
 3.4.13\.  EXT-X-MAP   

   The EXT-X-MAP tag specifies how to obtain the Transport Stream PAT/  
   PMT for the applicable media segment.  It applies to every media 
   segment that appears after it in the Playlist until the next EXT-X-  
   DISCONTINUITY tag, or until the end of the playlist. 

   The EXT-X-MAP tag MUST NOT appear unless the Playlist also contains  
   the EXT-X-I-FRAMES-ONLY tag.  It is RECOMMENDED that the EXT-X-MAP   
   tag only be used for segments whose resource does not start with a   
   PAT/PMT. 

   Its format is:   

   #EXT-X-MAP:<attribute-list>  

   The following attributes are defined:    

   URI  

   The value is a quoted-string containing a URI that identifies a  
   resource that contains the Transport Stream PAT/PMT.  This attribute 
   is mandatory.    

   BYTERANGE    

   The value is a quoted-string specifying a byte range into the    
   resource identified by the URI attribute.  This range SHOULD contain 
   only the Transport Stream PAT/PMT.  The format of the byte range is  
   described in Section 3.4.1\.  This attribute is optional; if it is not    
   present, the byte range is the entire resource indicated by the URI. 

   The EXT-X-MAP tag appeared in version 5 of the protocol. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-09T08:56:27.370

从偏移量开始的**PAT/PMT**初始化长度示例`560``0``main.mp4`

```
#EXTM3U
#EXT-X-TARGETDURATION:5
#EXT-X-VERSION:7
#EXT-X-MEDIA-SEQUENCE:1
#EXT-X-PLAYLIST-TYPE:VOD
#EXT-X-KEY:METHOD=AES-128,URI="./slow_loading.php?delay=5&resource=crypt0.key",IV=0xbf9840dc7d7fa163301a6c38844d6239
#EXT-X-MAP:URI="main.mp4",BYTERANGE="560@0"
#EXTINF:4.96907,    
#EXT-X-BYTERANGE:25312@560
main.mp4
#EXTINF:4.96907,    
#EXT-X-BYTERANGE:25440@25872
main.mp4
#EXTINF:4.96907,    
#EXT-X-BYTERANGE:25440@51312
main.mp4
#EXTINF:4.96907,    
#EXT-X-BYTERANGE:25440@76752
main.mp4
... 
```

[资源](http://qtdevseed.apple.com/qadrift/testcases/tc-0912.php)

# c++ - 尝试构建 boost 时更新 58 个目标失败，发生了什么？

> ID：12906829
> 
> 赞同：16
> 
> 时间：2012-10-16T02:45:45.880
> 
> 标签：c++, gcc, boost, build

用命令构建
`[mirror@hugemeow boost_1_51_0]$ ./b2 --prefix=$HOME/ins/ins-boost2`

并失败并显示以下消息，为什么？

```
common.copy stage/lib/libboost_timer.a
common.mkdir bin.v2/libs/wave/build/gcc-4.1.2/release/link-static
common.mkdir bin.v2/libs/wave/build/gcc-4.1.2/release/link-static/threading-multi
gcc.compile.c++ bin.v2/libs/wave/build/gcc-4.1.2/release/link-static/threading-multi/instantiate_cpp_exprgrammar.o
gcc.compile.c++ bin.v2/libs/wave/build/gcc-4.1.2/release/link-static/threading-multi/instantiate_cpp_grammar.o
gcc.compile.c++ bin.v2/libs/wave/build/gcc-4.1.2/release/link-static/threading-multi/instantiate_cpp_literalgrs.o
gcc.compile.c++ bin.v2/libs/wave/build/gcc-4.1.2/release/link-static/threading-multi/instantiate_defined_grammar.o
gcc.compile.c++ bin.v2/libs/wave/build/gcc-4.1.2/release/link-static/threading-multi/instantiate_predef_macros.o
gcc.compile.c++ bin.v2/libs/wave/build/gcc-4.1.2/release/link-static/threading-multi/instantiate_re2c_lexer.o
gcc.compile.c++ bin.v2/libs/wave/build/gcc-4.1.2/release/link-static/threading-multi/instantiate_re2c_lexer_str.o
gcc.compile.c++ bin.v2/libs/wave/build/gcc-4.1.2/release/link-static/threading-multi/token_ids.o
gcc.compile.c++ bin.v2/libs/wave/build/gcc-4.1.2/release/link-static/threading-multi/wave_config_constant.o
common.mkdir bin.v2/libs/wave/build/gcc-4.1.2/release/link-static/threading-multi/cpplexer
common.mkdir bin.v2/libs/wave/build/gcc-4.1.2/release/link-static/threading-multi/cpplexer/re2clex
gcc.compile.c++ bin.v2/libs/wave/build/gcc-4.1.2/release/link-static/threading-multi/cpplexer/re2clex/aq.o
gcc.compile.c++ bin.v2/libs/wave/build/gcc-4.1.2/release/link-static/threading-multi/cpplexer/re2clex/cpp_re.o
gcc.archive bin.v2/libs/wave/build/gcc-4.1.2/release/link-static/threading-multi/libboost_wave.a
common.copy stage/lib/libboost_wave.a
...failed updating 58 targets...
...skipped 12 targets...
...updated 887 targets...
[mirror@hugemeow boost_1_51_0]$ echo $?
1 
```

此问题与[Failed to build boost](https://stackoverflow.com/questions/9230894/failed-to-build-boost)或[Unable to build Boost library with GCC](https://stackoverflow.com/questions/5299468/unable-to-build-boost-libraries-with-gcc)不同，**我按照链接** [http://www.boost.org/doc/libs/1_51_0/more/getting_started/unix-variants 的说明进行操作。 html](http://www.boost.org/doc/libs/1_51_0/more/getting_started/unix-variants.html)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-05-01T09:08:59.250

Boost 有一些库不是独立的，需要安装 3rd 方库。这些是：

*   Boost.IOStreams Bzip2 过滤器
*   Boost.IOStreams Zlib 过滤器
*   Boost.MPI
*   Boost.Python
*   Boost.Regex ICU 支持

如果您不安装这些依赖项，Boost.Build 将跳过它们以解释您的构建消息。如果您想要可选组件，那么您还有更多工作要做。此[答案](https://stackoverflow.com/a/2655683/819272)中对此进行了详细说明。

# javascript - 为什么 mongoose.model('Model').Schema 出错了？

> ID：12906830
> 
> 赞同：2
> 
> 时间：2012-10-16T02:45:46.583
> 
> 标签：javascript, node.js, mongoose

我找不到我做错了什么......我正在尝试在猫鼬模型中定义子文档，但是当我将架构定义拆分到另一个文件中时，不尊重子模型。

首先，定义一个 Comment 模式：

```
var CommentSchema = new Schema({
    "text": { type: String },
    "created_on": { type: Date, default: Date.now }
});
mongoose.model('Comment', CommentSchema); 
```

接下来，通过从 mongoose.model() 加载创建另一个模式（就像我们从另一个文件加载它一样

```
var CommentSchema2 = mongoose.model('Comment').Schema; 
```

现在定义父模式：

```
var PostSchema = new Schema({
    "title": { type: String },
    "content": { type: String },
    "comments": [ CommentSchema ],
    "comments2": [ CommentSchema2 ]
});
var Post = mongoose.model('Post', PostSchema); 
```

还有一些测试

```
var post = new Post({
    title: "Hey !",
    content: "nothing else matter"
});

console.log(post.comments);  // []
console.log(post.comments2); // [ ]  // <-- space difference

post.comments.unshift({ text: 'JOHN' }); 
post.comments2.unshift({ text: 'MICHAEL' }); 

console.log(post.comments);  // [{ text: 'JOHN', _id: 507cc0511ef63d7f0c000003,  created_on: Tue Oct 16 2012 04:07:13 GMT+0200 (CEST) }]
console.log(post.comments2); // [ [object Object] ] 

post.save(function(err, post){

    post.comments.unshift({ text: 'DOE' });
    post.comments2.unshift({ text: 'JONES' });

    console.log(post.comments[0]); // { text: 'DOE', _id: 507cbecd71637fb30a000003,  created_on: Tue Oct 16 2012 04:07:13 GMT+0200 (CEST) } // :-)
    console.log(post.comments2[0]); // { text: 'JONES' }  // :'-(

    post.save(function (err, p) {
        if (err) return handleError(err)

        console.log(p);
    /*
    { __v: 1,
      title: 'Hey !',
      content: 'nothing else matter',
      _id: 507cc151326266ea0d000002,
      comments2: [ { text: 'JONES' }, { text: 'MICHAEL' } ],
      comments:
       [ { text: 'DOE',
           _id: 507cc151326266ea0d000004,
           created_on: Tue Oct 16 2012 04:07:13 GMT+0200 (CEST) },
         { text: 'JOHN',
           _id: 507cc151326266ea0d000003,
           created_on: Tue Oct 16 2012 04:07:13 GMT+0200 (CEST) } ] }
    */

        p.remove();
    });    
}); 
```

如您所见，使用 CommentSchema，正确设置了 id 和默认属性。但是对于已加载的 CommentSchema2，它会出错。

我尝试使用“人口”版本，但这不是我想要的。我不想使用另一个集合。

你们中有人知道出了什么问题吗？谢谢 ！

猫鼬 v3.3.1

nodejs v0.8.12

完整要点：[https ://gist.github.com/de43219d01f0266d1adf](https://gist.github.com/de43219d01f0266d1adf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:17:49.920

Model 的 Schema 对象可以作为 访问[`Model.schema`](http://mongoosejs.com/docs/api.html#model_Model-schema)，而不是`Model.Schema`。

因此，将要点的第 20 行更改为：

```
var CommentSchema2 = mongoose.model('Comment').schema; 
```

# android - 无需轮询即可访问串行端口 (/dev/tty*) 传入数据

> ID：12906831
> 
> 赞同：2
> 
> 时间：2012-10-16T02:45:48.127
> 
> 标签：android, multithreading, serial-port

我用姜饼。我已经与本地串行端口（RS-232 本地 UART，而不是 USB 加密狗）交谈。这是通过 java.io 和一小段用 C 编写的本机代码来完成的，用于打开和关闭流并配置波特率。它可以工作，但我的第一个想法是它效率不高，因为我需要设置一个线程来不断轮询输入流以检查是否有来自串行端口的字节。使用 CPU 和电池的方式多么浪费。

```
 private InputStream mInputStream;
private ReadThread mReadThread;

private class ReadThread extends Thread {

    @Override
    public void run() {
        super.run();
        while(!isInterrupted()) {
            int size;
            try {
                byte[] buffer = new byte[64];
                if (mInputStream == null) return;
                size = mInputStream.read(buffer);
                if (size > 0) {
                    onDataReceived(buffer, size);
                }
            } catch (IOException e) {
                e.printStackTrace();
                return;
            }
        }
    }
} 
```

我认为我需要做的是拥有与 android 中的其他事件相同类型的信号，我可以在其中设置某种侦听器，让我知道一些字节的到来并唤醒我的线程来处理传入的数据。我在 API 中没有找到类似的东西。

但是，在查看和研究更多之后，最后，我认为这并不浪费，但我希望了解线程在 Android 中如何工作的人的意见。让我们看一下代码行。

```
size = mInputStream.read(buffer); 
```

实际上是阻塞读取。我查看了设备是如何打开的，它是通过 NDK/JNI 接口在 C 中完成的，它在没有标志“NOBLOCK/NODELAY”的情况下打开。因此，它不应该在 while 循环中不断旋转，而只是在 mInputStream.read 上被阻塞，并且内核应该切换到另一个线程，直到有一些数据可供读取。在这种情况下，这段代码完全没问题。这个假设是真的吗？

我想知道，因为我的嵌入式系统的主要目的是大多数时间显示视频，我不希望我在幕后管理的内容占用太多资源并在视频播放中出现一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T21:03:18.463

在编写应用程序和测试之后，我可以说问题中的最后一个假设实际上是正确的。如果设备在没有标志“NOBLOCK/NODELAY”的情况下打开，线程将在 mInputStream.read() 上挂起，直到有可用数据。没有浪费的投票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:40:36.830

您可以使用 java.nio 包中的 selector()。

[http://developer.android.com/reference/java/nio/channels/Selector.html](http://developer.android.com/reference/java/nio/channels/Selector.html)

另请参阅[http://www.drdobbs.com/jvm/high-performance-io-with-java-nio/184406242](http://www.drdobbs.com/jvm/high-performance-io-with-java-nio/184406242)

# wpf - WPF Databinding StringFormat 不支持十六进制格式？

> ID：12906835
> 
> 赞同：0
> 
> 时间：2012-10-16T02:46:10.233
> 
> 标签：wpf, data-binding, hex, string-formatting

我正在使用 WPF 数据绑定。如果我指定，我可以格式化数字`StringFormat={}{0:C}`。但是，如果我使用`StringFormat={}{0:X2}`，它将给出以下异常：

```
System.Windows.Data Error: 6 : 'StringFormat' converter failed to convert value '10' (type 'Double'); fallback value will be used, if available. BindingExpression:Path=Value; DataItem='Slider' (Name='SliderG'); target element is 'TextBlock' (Name=''); target property is 'Text' (type 'String') FormatException:'System.FormatException: Format specifier was invalid.
   at System.Number.FormatDouble(Double value, String format, NumberFormatInfo info)
   at System.Double.ToString(String format, IFormatProvider provider)
   at System.Text.StringBuilder.AppendFormat(IFormatProvider provider, String format, Object[] args)
   at System.String.Format(IFormatProvider provider, String format, Object[] args)
   at System.Windows.Data.BindingExpression.ConvertHelper(IValueConverter converter, Object value, Type targetType, Object parameter, CultureInfo culture)'
'WpfApplication1.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Numerics\v4.0_4.0.0.0__b77a5c561934e089\System.Numerics.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled. 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:04:19.377

十六进制格式说明符仅适用于整数类型。您正在尝试将其应用于浮点 ( `double`) 值。如果要将绑定值格式化为十六进制值，则需要将绑定值转换为整数类型（`int`、等）。`long`

# r - 将输出从一个 R 会话复制到另一个 R 会话

> ID：12906836
> 
> 赞同：4
> 
> 时间：2012-10-16T02:46:28.997
> 
> 标签：r, output

我现在有 2 个 R 会话在每个会话中处理一个向量，内部略有不同，例如：

会话1：`temp1 <- c(1:10)`

会话2：`temp2 <- c(2:11)`

我想`temp1`从 session1 复制到 session2 并做一个`%in%`，但我不想`print(temp1)`在 session1 中使用`ctrl-c`它，手动修改输出然后`ctrl-v`在 session2 中。

我见过有人使用在 R 会话中创建输出的通用函数，然后我`ctrl-c`直接`ctrl-v`在另一个 R 会话中输出，并且对象已经存在。但是我不记得功能了。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T02:48:38.440

您必须将数据从一个会话传递到另一个会话。这意味着您需要（有效地）序列化数据。

到目前为止，最简单的将是 a`save()`后跟 a `load()`。如果你想花哨，你可以使用套接字而不是文件——`help(connections)`详见

# mysql - 如何在 SELECT 语句中使用 SQL 值作为其列名？

> ID：12906849
> 
> 赞同：1
> 
> 时间：2012-10-16T02:48:05.920
> 
> 标签：mysql, sql, pivot

我有一个包含 Orders 的表（每个订单一条记录）和一个包含 OrderDetails 的表（每个产品一条记录）。我希望我的 SELECT 语句在以 ProductID 命名的列中返回每种产品的数量。这样，我不会为每个 ProductID 显式编写查询，而是让查询适应它在 OrderDetails 表中找到的任何 ProductID。

结果将是这样的：

```
OrderID   TrackingNr   ProductID1   ProductID2   ProductID3
1         1Zetc        6            0            2
2         1Zetc2       0            1            1 
```

我目前有以下内容：

```
SELECT Orders.OrderID AS OrderID,
TrackingNumbers.TrackingNumber AS TrackingNumber,
(SELECT Quantity FROM OrderDetails WHERE Orders.OrderID = OrderDetails.OrderID AND ProductCode = 'FPIA0009') AS FPIA0009,
(SELECT Quantity FROM OrderDetails WHERE Orders.OrderID = OrderDetails.OrderID AND ProductCode = 'FPIA0030') AS FPIA0030,
((SELECT Quantity FROM OrderDetails WHERE Orders.OrderID = OrderDetails.OrderID AND ProductCode = 'FPIA0060') +
(SELECT Quantity FROM OrderDetails WHERE Orders.OrderID = OrderDetails.OrderID AND ProductCode = 'FPIA0060xP')) AS FPIA0060,
(SELECT Quantity FROM OrderDetails WHERE Orders.OrderID = OrderDetails.OrderID AND ProductCode = 'FPIA0120') AS FPIA0120
FROM Orders, TrackingNumbers WHERE Orders.OrderID = TrackingNumbers.OrderID
ORDER BY OrderID, ShipDate 
```

您可以看到，上面我明确要求每个特定 ProductID 的数量，但还有更多，我宁愿简化。

您还可以看到，我尝试将两种不同产品的数量相加，因为它们来自同一个库存，但由于某种原因，结果始终为空。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:10:05.023

MySQL 没有`PIVOT`函数，但您可以使用聚合函数和`CASE`语句对其进行建模。对于动态版本，您将需要使用准备好的语句。

使用的样本表：

```
create table orders
(
  id int,
  name varchar(10)
);

insert into orders values
(1, 'Order 1'),
(2, 'Order 2'),
(3, 'Order 3'),
(4, 'Order 4');

create table orderdetails
(
  orderid int,
  productname varchar(20),
  qty int
);

insert into orderdetails values
(1, 'Product 1', 10),
(1, 'Product 2', 1),
(1, 'Product 3', 45),
(2, 'Product 1', 2),
(2, 'Product 5', 78),
(3, 'Product 4', 60),
(3, 'Product 2', 32),
(4, 'Product 1', 5),
(4, 'Product 3', 6),
(5, 'Product 2', 9),
(6, 'Product 4', 1);

create table trackingnumbers
(
  orderid int,
  trackingnumber varchar(10)
);

insert into trackingnumbers values
(1, '1Zetc'),
(2, '1Zdfghfdg'),
(3, '1Zkyui'),
(4, '1Zwe'); 
```

如果您知道要作为列的值的数量，则可以对类似于以下的值进行硬编码：

```
select o.id,
  t.trackingnumber,
  sum(case when productname = 'Product 1' then qty else 0 end) Product1,
  sum(case when productname = 'Product 2' then qty else 0 end) Product2,
  sum(case when productname = 'Product 3' then qty else 0 end) Product3,
  sum(case when productname = 'Product 4' then qty else 0 end) Product4,
  sum(case when productname = 'Product 5' then qty else 0 end) Product5
from orders o
left join orderdetails d
  on o.id = d.orderid
left join trackingnumbers t
  on o.id = t.orderid
group by o.id, t.trackingnumber; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/9225f/17)

但是如果你有未知数量的值，那么你可以使用准备好的语句：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(case when productname = ''',
      productname,
      ''' then qty else 0 end) AS ',
      replace(productname, ' ', '')
    )
  ) INTO @sql
FROM orderdetails;

SET @sql = CONCAT('SELECT o.id, t.trackingnumber, ', @sql, ' 
                  from orders o
                  left join orderdetails d
                    on o.id = d.orderid
                  left join trackingnumbers t
                    on o.id = t.orderid
                  group by o.id, t.trackingnumber');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/9225f/15)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T02:55:59.173

不知道您为什么要这样做，但是..您始终可以使用光标创建 SQL 并执行它。这样至少它不是硬编码的。不过，我绝对建议不要对列名使用值。

# excel - vbs 脚本停止 vba 程序

> ID：12906854
> 
> 赞同：1
> 
> 时间：2012-10-16T02:48:46.780
> 
> 标签：excel, vba

我正在运行一个调用三个不同 .vbs 脚本的 vba 程序。当 vbe 窗口打开时，我可以正常运行它，但如果我从快捷键调用它，它会从 .vbs 脚本打开文件并停止。

我怎样才能让它发布并继续 vba 代码？

杰里·欧文

# jquery - jQuery 旋转图像（使用旋转插件）每次点击旋转 +/-90 度

> ID：12906855
> 
> 赞同：1
> 
> 时间：2012-10-16T02:49:14.213
> 
> 标签：jquery, image, jquery-plugins, rotation

我正在使用这个 jQuery 插件：[http ://code.google.com/p/jqueryrotate/wiki/Documentation](http://code.google.com/p/jqueryrotate/wiki/Documentation)

我有插件工作和一切，但是我想要做的是单击一个按钮来旋转图像，每次单击该按钮时，它都会连续旋转 +/- 90 度，而不仅仅是一定程度。我不太确定如何使用此插件完成此操作。

理想情况下，下面的代码会做我想要的，尽管它没有。

```
$("body").on("click", ".theater-wrapper img", function(){

    $(".theater-wrapper .current").rotate(+90);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:58:33.910

像这样的东西？

```
$("body").on("click", ".theater-wrapper img", function(){

    $(".theater-wrapper .current").rotate(getNextAngle());

});

nextAngle = 0;
function getNextAngle() {
    nextAngle += 90;    
    if(nextAngle >= 360) {
        nextAngle = 0;
    }
    return nextAngle;
} 
```

可能没什么大不了的，但为避免获得大量数字，您可以在需要时将该值重置为 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T03:17:18.210

**工作演示** [http://jsfiddle.net/jKYkT/](http://jsfiddle.net/jKYkT/)

单击**+**和**-**按钮进行角度旋转

希望这符合原因`:)`

**代码**

```
newangle = 0;

$('input').click(function() {
    if ($(this).attr('class') == "minus")
        operation = "-";
    else
        operation = "+";

    alert(operation)
    var angle = next(operation);
    $("#image").rotate(angle);
});

function next(oper) {
   if (oper == "+")
      newangle += 90;
    else
      newangle -= 90;

   if (newangle >= 360) newangle = 0;

    return newangle;

}

​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T03:10:23.880

我没有看过插件，但我假设它是使用跨浏览器支持的 CSS3 转换旋转。它总是需要一个特定的角度，所以你必须用某种变量来跟踪你当前的角度。一个好的解决方案可能是在每次点击时增加一个 HTML5 数据标签，尤其是当您希望在 DOM 中拥有多个旋转图像时。所以说你的 HTML 是这样的：

```
<div class='image_wrap'>
    <img class='image_to_rotate' />
    <div class='rotate_btn' data-rotate='0'></div>
</div> 
```

因此，当用户单击旋转按钮时，它将抓取该变量并将其递增 90，然后将新值存储在同一位置，以便在下次单击时将其递增。您的 jQuery 可能如下所示：

```
$('.rotate_btn').click(function(){
    //Grab the current set angle
    var angle = parseInt($(this).data('rotate')) + 90;

    //Rotate the image
    $(this).siblings('.image_to_rotate').rotate(angle);

    //Store new angle for next increment
    $(this).data('rotate', angle);
}) 
```

这没有经过测试，但你应该有足够的东西在这里继续。如果您需要进一步的指导，请查看 .data 上的 jQuery 文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-12T11:29:36.827

```
var rotation = 0;
$("body").on("click", ".theater-wrapper img", function(){
    rotation +=90;
    $(".theater-wrapper .current").rotate({ animateTo:rotation });
}); 
```

或者

```
var rotation = 0;
$("body").on("click", ".theater-wrapper img", function(){
    rotation +=90;
    var rotation_angle_mod = rotation%360;
    $(".theater-wrapper .current").rotate(rotation_angle_mod);
}); 
```

# javascript - 从头开始定义 String() 类

> ID：12906860
> 
> 赞同：5
> 
> 时间：2012-10-16T02:50:19.483
> 
> 标签：javascript

我从一本书中得到了这个练习（没有解决方案）：

> 想象一下 String() 构造函数不存在。创建一个构造函数 MyString()，它的行为尽可能接近 String()。不允许使用任何内置的字符串方法或属性，请记住 String() 不存在。您可以使用此代码来测试您的构造函数：
> 
> ```
> >>> var s = new MyString('hello');
> >>> s.length; 
> ```

然而，我有一个解决方案，但不确定我是否遵循了要求（即：“我不允许使用任何内置的字符串方法或属性”）；这是我的解决方案：

```
function MyString(string) {
    this.length = 0;
    for(var i in string) { 
        this.length++;      
    }
}
var x = new MyString("Hello");
x.length; 
```

我不确定的是 for-in 循环。你能告诉我那个循环中**字符串**变量的数据类型是什么吗？是那种数组还是我将它用作字符串（也就是说我确实违反了要求）？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:21:33.027

简短的回答是循环中的数据类型`string`确实`for`是字符串。但是，您没有使用任何本机 String 方法来计算长度，所以我相当确定您已经满足要求（无论如何对于 length 属性）。

也就是说，我同意@cwolves 的观点，因为在不违反“不允许使用任何内置的字符串方法或属性”。

就您的初始化循环而言，不违反要求的荣誉，但它不会起作用。你会得到一个这样的数组：

```
[
    "0",
    "1",
    "2",
    "3",
    "4"
] 
```

为了避免超长的帖子，这里有一个快速而肮脏的部分实现版本的小提琴：http: [//jsfiddle.net/CtF2Q/](http://jsfiddle.net/CtF2Q/)

小提琴的注意事项：

以下方法未实现：

*   charCodeAt
*   来自CharCode
*   代替
*   搜索
*   分裂

以下方法仅部分实现：

*   指数
*   最后一个索引
*   匹配
*   转小写
*   转大写

# jquery - 使用css居中绝对div

> ID：12906863
> 
> 赞同：0
> 
> 时间：2012-10-16T02:50:53.230
> 
> 标签：jquery, html, css

我总是使用 JQuery 将 div 水平居中，但这次我正在做一个没有任何 JQuery 或 Javascript 支持的项目。

所以我想只使用 css 将 div 居中，并且确定不使用标签。

PS：div 有 z-index 和绝对位置。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:19:54.260

[http://jsfiddle.net/CRhbF/](http://jsfiddle.net/CRhbF/)

仅当您知道绝对定位的居中元素的尺寸时，这才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T03:20:00.713

如果您使用绝对定位，请使用属性“left: 50%;” 和“margin-left”，其负值等于 div 宽度的一半。所以，例如：

```
#div {
width: (desired width);
left: 50%;
margin-left: -(half of the width of the div);
position: absolute;

} 
```

Z-index 对居中并不重要。如果您在 div 顶部放置了具有更大 Z-index 值的其他元素，那么 div 将简单地隐藏在它们下方。

# sqlite - SQLite 中的 .journal 文件

> ID：12906867
> 
> 赞同：2
> 
> 时间：2012-10-16T02:51:10.990
> 
> 标签：sqlite

快速谷歌搜索显示

> 回滚日志始终与数据库文件位于同一目录中，并且与数据库文件具有相同的名称，但附加了 8 个字符“-journal”。回滚日志通常在事务首次启动时创建，通常在事务提交或回滚时删除。

一句话里有很多“通常”。

如果在一天结束时，留下多个日志文件，这是什么症状？

这似乎间歇性地发生，我无法可靠地重现该问题。

请问您将如何解决此类间歇性问题？会是一个可能的罪魁祸首吗？

更新：我在 OSX 10.8.2、SQLite 版本 3.7.14.1 上运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:49:39.247

“通常”的存在是因为 SQLite 可以配置为使用[持久回滚日志](http://www.sqlite.org/atomiccommit.html#section_7_6)。

一个数据库不可能有多个日志，因为不可能有多个同名文件。

# c# - ASP.net MVC 控制器不会返回视图

> ID：12906868
> 
> 赞同：8
> 
> 时间：2012-10-16T02:51:12.403
> 
> 标签：c#, asp.net-mvc

对 ASP.net 来说还是有点新，我有这个奇怪的问题。这是一个非常基本的场景，但有些事情发生了，我无法弄清楚。Deploy 应该返回一个名为 Deploy 的视图，该视图被键入到模型 CompiledAppModel。但是，当您在视图中单击安装时，尽管调用了 return View() 方法，但它永远不会离开页面。有任何想法吗？

这是我的控制器：

```
[HttpPost]
public ActionResult Deploy(string key_name, string custom_folder = "")
{
    string userId = Membership.GetUser().ProviderUserKey.ToString();
    UserDataModel user_info = _user_data_service.getUserDataByPrimaryIDNoDB(userId, HttpContext.Cache);
    log.Trace("Deploy was called. key_name:" + key_name + " UID: " + user_info.UID);

    // first we'll call the info to install remote application
    bool serviceInstall = _fms_app_service.DeployFmsApp(user_info, key_name, custom_folder);

    // then we'll call to generate client side info
    bool clientInstall = _fms_app_service.CompileClientApp(user_info, key_name);

    var model = _fms_app_service.getInstalledAppInfo(user_info, key_name);
    if (serviceInstall && clientInstall)
    {
        return RedirectToAction("Deploy", model);
    }

    return View("Error");
} 
```

和我的观点：

```
@model IEnumerable<Models.Applications.FmsAppModel>

@foreach (var item in Model) {
    <div class="col">
        <h2>@Html.DisplayFor(modelItem => item.friendly_name)</h2>
        <p>@Html.DisplayFor(modelItem => item.app_description)</p>
        <p><strong>Tags:</strong> @Html.DisplayFor(modelItem => item.app_type)</p>

        <a href="#" class="btn btn-primary install-app" data-key-name="@(item.key_name)">Install</a>

        @Html.ActionLink("Details", "Detailss", new {  id=item.app_id  })
    </div>
}
</div>

<script type="text/javascript">
   (function () {
        $('.install-app').on('click', function (e) {
            e.preventDefault();
            var data_key_name = $(this).data('key-name');
            //ajax install app
            $.ajax({
                type: "POST",
                url: '@Url.Action("Deploy")',
                data: {
                    key_name: data_key_name
                }
            });
        });
    })();
</script> 
```

和模型。

```
public class CompiledAppModel
{
    [Display(Name = "Admin URL")]
    public string adminURL { get; set; }

    [Display(Name = "Viewer URL")]
    public string viewerURL { get; set; }

    [Display(Name = "Embed URL")]
    public string embedURL { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T09:50:17.703

我假设您真的想在进行 ajax 调用后进行重定向。

据我所知，您必须实现自定义 ActionResult，例如：

```
public class AjaxAwareRedirectResult : RedirectResult
{       
    public AjaxAwareRedirectResult(String url)
        : base(url)
    {
    }

    public override void ExecuteResult(ControllerContext context)
    {
        if ( context.RequestContext.HttpContext.Request.IsAjaxRequest() )
        {
            String destinationUrl = UrlHelper.GenerateContentUrl(Url, context.HttpContext);

            JavaScriptResult result = new JavaScriptResult()
            {
                Script = "window.location='" + destinationUrl + "';"
            };
            result.ExecuteResult(context);
        }
        else
        {
            base.ExecuteResult(context);
        }
    }
} 
```

在您的控制器中，只需执行以下操作：

```
 [HttpPost]
public ActionResult Deploy(string key_name, string custom_folder = "")
{
    string userId = Membership.GetUser().ProviderUserKey.ToString();
    UserDataModel user_info = _user_data_service.getUserDataByPrimaryIDNoDB(userId, HttpContext.Cache);
    log.Trace("Deploy was called. key_name:" + key_name + " UID: " + user_info.UID);
    // first we'll call the info to install remote application
    bool serviceInstall = _fms_app_service.DeployFmsApp(user_info, key_name, custom_folder);
    // then we'll call to generate client side info
    bool clientInstall = _fms_app_service.CompileClientApp(user_info, key_name);

    var model = _fms_app_service.getInstalledAppInfo(user_info, key_name);
    if (serviceInstall && clientInstall)
    {
        return RedirectToAction("Deploy", model);
    }
    return AjaxAwareRedirectResult("/foo");
} 
```

但是，正如我所说，这只是我假设你真的想在 ajax 调用之后重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T03:24:36.580

在我看来，您使用 Ajax 调用将您的帖子发回服务器，在这种情况下，如果没有一点额外的工作，结果就不会呈现到页面上。您可以在 ajax 调用上定义一个成功处理程序，以便在 ajax 调用返回时采取行动。所以像

```
<script type="text/javascript"> (function () {
    $('.install-app').on('click', function (e) {
        e.preventDefault();
        var data_key_name = $(this).data('key-name');
        //ajax install app
        $.ajax({
            type: "POST",
            url: '@Url.Action("Deploy")',
            data: {
                key_name: data_key_name
            },
            success: function(data) { alert(data) }
        });
    });
})(); 
```

当请求完成时，将给您一条警报消息，其中包含从 ajax 调用返回的 HTML。

我还会使用 Firebug 或 Chrome 中的开发人员工具来查看返回的 HTML，如果服务器上发生异常，您应该能够使用这些工具更详细地检查这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T03:39:43.083

在 ajax 调用之后执行 HTTP 重定向可能没有多大意义。您只需使用 html 表单和常规 POST 即可做到这一点。

但是，如果您确实需要重定向并且仍然希望通过 AJAX 进行 POST，您可以通过返回 Json 而不是重定向来做到这一点，如以下答案中所建议的：

*   [https://stackoverflow.com/a/3535018/1373170](https://stackoverflow.com/a/3535018/1373170)
*   [https://stackoverflow.com/a/10178088/1373170](https://stackoverflow.com/a/10178088/1373170)

在这种情况下，您可以在 Json 对象中返回目标操作 url，并在成功处理程序中使用该信息，如 Neil 的回答所示。

另外，请记住，这`RedirectToAction`只是一个 302 重定向，因此，它不会直接呈现视图，因此您不会将完整的 ViewModel 传递给它，而只是浏览器发出 GET 的 Action Url。

该目标 GET 操作应该是负责获取您的已安装应用程序信息并将其作为参数传递给视图的操作，遵循[POST-REDIRECT-GET 模式](http://www.stevefenton.co.uk/Content/Blog/Date/201104/Blog/ASP-NET-MVC-Post-Redirect-Get-Pattern/)。

# ruby-on-rails - Rails 3.2 使用 has_many 上的模型方法简化控制器：通过

> ID：12906871
> 
> 赞同：0
> 
> 时间：2012-10-16T02:51:32.427
> 
> 标签：ruby-on-rails, model, controller, refactoring, ruby-on-rails-3.2

我看到的大多数关于精简控制器的问题都涉及简单的模型关系。我的问题是，如果您要更新具有多个参数及其关联数组的多对多表单，您如何通过将其全部移动到模型方法来简化任务？例如，看看下面这个大得离谱的控制器。处理这种邪恶的混乱最简单的方法是什么？我不是在寻找一个语法上完美的答案，而是需要就一个方向达成普遍共识。

```
def update
  @shipment = Shipment.joins(:products).find(params[:id], :readonly => false)
  @shipment.update_attributes(params[:shipment])
  @shipment_products = params[:product_shipments]
  @product_shipment_array= array_from_hash(@shipment_products)

  @shipment.product_shipments.each do |product_shipment|
    product_shipment.update_attributes(:qty_shipped => params[:product_shipments][product_shipment.id.to_s][:qty_shipped], :pickup_item => params[:product_shipments][product_shipment.id.to_s][:pickup_item])
  end
  @product_shipment_array.each do |p|
    if  p['old_pickup_item'] == "true" and p['pickup_item'].to_i==0
      @difference = (p['qty_shipped'].to_i)
      Product.mark_open_shipment(@difference, p['product_id'])

    elsif p['old_pickup_item'] == "false" and p['pickup_item'].to_i==1
      @difference = -(p['old_qty_shipped'].to_i)
      Product.mark_open_shipment(@difference, p['product_id'])
    else
      @difference = -(p['old_qty_shipped'].to_i - p['qty_shipped'].to_i)
      Product.mark_open_shipment(@difference, p['product_id'])
    end

  end

  respond_with @shipment, :location => shipments_url
end 
```

在我的模型中，我想声明一个类似这样的模型方法

```
Class Shipment < ActiveRecord::Base
  .
  .
  .      
  def update_shipment_attributes
    #all business logic
  end

end 
```

希望让我的控制器降到这样或类似的东西：

```
def update
  @shipment = Shipment.joins(:products).find(params[:id], :readonly => false)
  @shipment.update_attributes(params[:shipment])
  @shipment_products = params[:product_shipments]

  Shipment.update_shipment_attributes

  respond_with @shipment, :location => shipments_url     
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:15:55.343

您可以采取以下几种方法来实现您想要的目标：

1.  [研究使用嵌套表单](http://railscasts.com/episodes/196-nested-model-form-part-1)和`accepts_nested_attributes_for`. 使用嵌套属性，您的控制器`edit`方法只需要`@shipment`与 shipping_products 的嵌套集合共享一个实例变量。
2.  考虑让你的`update`行动只打电话`update_attributes`。当您正确使用嵌套属性时，这应该是您需要的唯一模型调用，因为它将隐式填充其`shipment_products`.
3.  在您的`shipment_products`模型中，使用`after_save`回调来标记未结发货。但请注意，您的 shipping_products 模型不应*使用*单词`Product`（大写）。相反，它应该依赖于它`belongs_to`与 call的关系`product.mark_open_shipment(difference)`。`difference`应该重构为 product_shipments 上的实例方法。回调和 update_attributes 都将在一个事务中运行，这将确保原子性。

# javascript - 没有刷新的网页更新不起作用

> ID：12906873
> 
> 赞同：0
> 
> 时间：2012-10-16T02:51:54.867
> 
> 标签：javascript, jquery, ajax, refresh, partial-page-refresh

我正在尝试在不刷新的情况下进行页面更新，并且我已经阅读了一些教程并提出了以下代码。但是，它似乎不起作用。当您按下按钮时，似乎什么也没有发生。

index.php 代码

```
 <!DOCTYPE html>
<html>
    <head>

        <script type="text/javascript" src="jquery.js"></script>

        <script>
                function updateShouts()
                {                
                    $('#refresh').load('update.php');
                    alert('it works!'); uncomment this to know if your script works
                } 
        </script>

    </head>

    <body>

        <div id="refresh">
            <?php
            include('update.php');
            ?>
            <button onclick="updateShouts()">Try it</button>

        </div>

    </body>

</html> 
```

update.php 代码

```
<?php
print strftime('%c');
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:04:47.393

您必须与其他脚本分开声明您的 jquery 链接

```
<script type="text/javascript" src="jquery.js"></script>

<script>
        function updateShouts()
        {                
            $('#refresh').load('update.php');
            //alert('it works!'); uncomment this to know if your script works
        } 
</script> 
```

或者您可以使用更新的在线 jquery 库

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js"></script>

    <script>
        function updateShouts()
        {                
            $('#refresh').load('update.php');
            //alert('it works!'); uncomment this to know if your script works
        } 
    </script> 
```

# php - 现在无法访问 Wordpress 主题选项和网站

> ID：12906881
> 
> 赞同：0
> 
> 时间：2012-10-16T02:54:36.957
> 
> 标签：php, wordpress, wordpress-theming

我的 theme-options.php 有一些问题，现在我无法编辑任何外观选项，也无法打开网站。

我的 Wordpress 网站： [http ://www.dryerventcleaninghouston.com/](http://www.dryerventcleaninghouston.com/)

这是发生错误的地方：

```
<div class="postbox">
  <h3><?php _e("Homepage Featured Left", 'studiopress'); ?></h3>
    <div class="inside">
      <p><?php _e("Select which category you want displayed:", 'studiopress'); ?><br />
        <?php wp_dropdown_categories(array('selected' => get_theme_mod('featured_top_left'), 'name' => $settings.'[featured_top_left]', 'orderby' => 'Name' , 'hierarchical' => 1, 'hide_empty' => '0' )); ?></p>

      <p><?php _e("Number of posts to show:", 'studiopress'); ?><br />
      <input type="text" name="<?php echo $settings; ?>[featured_top_left_num]" value="<?php echo get_theme_mod('featured_top_left_num'); ?>" size="5" /></p>

      <p><?php _e("Thumbnail dimensions (Width x Height)", 'studiopress'); ?><br />
      <input type="text" name="<?php echo $settings; ?>[featured_top_left_thumb_width]" value="<?php echo get_theme_mod('featured_top_left_thumb_width'); ?>" size="3" /> x <input type="text" name="<?php echo $settings; ?>[featured_top_left_thumb_height]" value="<?php echo get_theme_mod('featured_top_left_thumb_height'); ?>" size="3" /></p>
    </div>
  </div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:06:42.607

下拉类别数组中的名称变量...$settings.'[

您传递给 wp_dropdown_categories 的数组中的名称索引 .. 取决于您的设置变量中的内容需要如下所示

'名称' => $settings['featured_top_left'],

# php - PHP 电子邮件未使用激活密钥发送

> ID：12906889
> 
> 赞同：0
> 
> 时间：2012-10-16T02:55:33.960
> 
> 标签：php, email, activation

我无法让这段代码工作我知道如何使用 PHP 的邮件部分并且无法理解有什么问题。

```
##Send activation Email

$to      =  $_POST['email'];

$subject = " YOURWEBSITE.com Registration";

$message = "Welcome to our website!\r\rYou, or someone using your email address, has completed registration at YOURWEBSITE.com. You can complete registration by clicking the following link:\rhttp://www.YOURWEBSITE.com/verify.php?$activationKey\r\rIf this is an error, ignore this email and you will be removed from our mailing list.\r\rRegards,\ YOURWEBSITE.com Team";

$headers = 'From: noreply@close2.me';

mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:56:17.297

看下面的教程

[http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm](http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm)

[http://roshanbh.com.np/2007/12/sending-e-mail-from-localhost-in-php-in-windows-environment.html](http://roshanbh.com.np/2007/12/sending-e-mail-from-localhost-in-php-in-windows-environment.html)

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

使用 smtp 身份验证发送邮件是一种解决方案，或者您可以使用邮件库，如 swift mailer

# iphone - 如何立即取消线程

> ID：12906895
> 
> 赞同：0
> 
> 时间：2012-10-16T02:56:06.440
> 
> 标签：iphone, objective-c, ios

我用NSThread创建一个新线程，然后它正在执行thread_funtion，我想取消线程，我用[线程取消]，但是线程会继续。

```
NSThread *thread=[[NSThread alloc] initWithTarget:self selector:@selector(thread_funtion) object:nil];
[thread start];

-(void)thread_funtion
{
     //my code
} 
```

我知道在 thread_funtion 中使用标志来控制它的执行，它可能很有用，但它太复杂了。

```
-(void)thread_funtion
{
      if(flag)
    {
        //some code
    }
    if(flag)
    {
        //some code
    }
} 
```

那么问题1：如何立即取消线程？</p>

然后我使用另一种方法来创建一个新线程：

```
pthread_t id;
int ret;
ret=pthread_create(&id,NULL,thread_function,NULL);
if(ret!=0){
    printf ("Create pthread error!\n");
    exit (1);
} 
```

然后我使用 pthread_cancel(id)，线程会立即停止。但是在thread_function中：

```
void* thread_function(void *arg)
{
    //This is not a function of the class, So I can't use self.somobject !
} 
```

所以问题是，在c代码中，如何使用类的对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T03:09:17.110

`NSThread`取消只是在线程中设置一个标志，它可以通过调用`isCancelled`. 如果线程打算继续，它*不会停止线程。*

这实际上是一件*好事*。根据我在多线程方面的长期经验，我认为头条应该完全控制自己，*包括他们自己的生命周期。*

当线程锁定资源或在更新关键结构中途时杀死线程不是一个好主意。

重新构建线程函数是一个好主意，以便它们定期调用`isCancelled`并采取行动。如果你做得对，你可以通过在某些点检查、在循环内检查、确保任何阻塞调用都有超时或解除阻塞的方法等来保证对取消响应的最大延迟。

# mingw - 使用 MinGW 编译 Python 图像库

> ID：12906906
> 
> 赞同：0
> 
> 时间：2012-10-16T02:57:03.207
> 
> 标签：mingw, python-imaging-library, python-c-api

我正在尝试通过运行 在**Windows 7 64 位上编译 Python Imaging Library**

```
pip install pil 
```

我已将编译器设置为 MinGW。在编译 _imaging.c 之前看起来一切正常。它在这个怪物 gcc 调用上失败：

```
 C:\MinGW\bin\gcc.exe -shared -s build\temp.win-amd64-2.7\Release\_imaging.o build\temp.win-amd64-2.7\Release\decode.o build\temp.win-amd64-2.7\Release\encode.o build\temp.win-amd64-2.7\Release\map.o build\temp.win-amd64-2.7\Release\display.o build\temp.win-amd64-2.7\Release\outline.o build\temp.win-amd64-2.7\Release\path.o build\temp.win-amd64-2.7\Release\libimaging\access.o build\temp.win-amd64-2.7\Release\libimaging\antialias.o build\temp.win-amd64-2.7\Release\libimaging\bands.o build\temp.win-amd64-2.7\Release\libimaging\bitdecode.o build\temp.win-amd64-2.7\Release\libimaging\blend.o build\temp.win-amd64-2.7\Release\libimaging\chops.o build\temp.win-amd64-2.7\Release\libimaging\convert.o build\temp.win-amd64-2.7\Release\libimaging\convertycbcr.o build\temp.win-amd64-2.7\Release\libimaging\copy.o build\temp.win-amd64-2.7\Release\libimaging\crc32.o build\temp.win-amd64-2.7\Release\libimaging\crop.o build\temp.win-amd64-2.7\Release\libimaging\dib.o build\temp.win-amd64-2.7\Release\libimaging\draw.o build\temp.win-amd64-2.7\Release\libimaging\effects.o build\temp.win-amd64-2.7\Release\libimaging\epsencode.o build\temp.win-amd64-2.7\Release\libimaging\file.o build\temp.win-amd64-2.7\Release\libimaging\fill.o build\temp.win-amd64-2.7\Release\libimaging\filter.o build\temp.win-amd64-2.7\Release\libimaging\flidecode.o build\temp.win-amd64-2.7\Release\libimaging\geometry.o build\temp.win-amd64-2.7\Release\libimaging\getbbox.o build\temp.win-amd64-2.7\Release\libimaging\gifdecode.o build\temp.win-amd64-2.7\Release\libimaging\gifencode.o build\temp.win-amd64-2.7\Release\libimaging\hexdecode.o build\temp.win-amd64-2.7\Release\libimaging\histo.o build\temp.win-amd64-2.7\Release\libimaging\jpegdecode.o build\temp.win-amd64-2.7\Release\libimaging\jpegencode.o build\temp.win-amd64-2.7\Release\libimaging\lzwdecode.o build\temp.win-amd64-2.7\Release\libimaging\matrix.o build\temp.win-amd64-2.7\Release\libimaging\modefilter.o build\temp.win-amd64-2.7\Release\libimaging\mspdecode.o build\temp.win-amd64-2.7\Release\libimaging\negative.o build\temp.win-amd64-2.7\Release\libimaging\offset.o build\temp.win-amd64-2.7\Release\libimaging\pack.o build\temp.win-amd64-2.7\Release\libimaging\packdecode.o build\temp.win-amd64-2.7\Release\libimaging\palette.o build\temp.win-amd64-2.7\Release\libimaging\paste.o build\temp.win-amd64-2.7\Release\libimaging\quant.o build\temp.win-amd64-2.7\Release\libimaging\quanthash.o build\temp.win-amd64-2.7\Release\libimaging\quantheap.o build\temp.win-amd64-2.7\Release\libimaging\pcddecode.o build\temp.win-amd64-2.7\Release\libimaging\pcxdecode.o build\temp.win-amd64-2.7\Release\libimaging\pcxencode.o build\temp.win-amd64-2.7\Release\libimaging\point.o build\temp.win-amd64-2.7\Release\libimaging\rankfilter.o build\temp.win-amd64-2.7\Release\libimaging\rawdecode.o build\temp.win-amd64-2.7\Release\libimaging\rawencode.o build\temp.win-amd64-2.7\Release\libimaging\storage.o build\temp.win-amd64-2.7\Release\libimaging\sunrledecode.o build\temp.win-amd64-2.7\Release\libimaging\tgarledecode.o build\temp.win-amd64-2.7\Release\libimaging\unpack.o build\temp.win-amd64-2.7\Release\libimaging\unpackycc.o build\temp.win-amd64-2.7\Release\libimaging\unsharpmask.o build\temp.win-amd64-2.7\Release\libimaging\xbmdecode.o build\temp.win-amd64-2.7\Release\libimaging\xbmencode.o build\temp.win-amd64-2.7\Release\libimaging\zipdecode.o build\temp.win-amd64-2.7\Release\libimaging\zipencode.o build\temp.win-amd64-2.7\Release\_imaging.def -LC:\Python27\lib -LC:\Python27\libs -LC:\Python27\PCbuild\amd64 -lkernel32 -luser32 -lgdi32 -lpython27 -lmsvcr90 -o build\lib.win-amd64-2.7\_imaging.pyd 
```

此调用的错误开始于：

```
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x70): undefined reference to `__imp__PyFloat_Type'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x78): undefined reference to `__imp__PyFloat_Type'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x85): undefined reference to `__imp__PyType_IsSubtype'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0xc9): undefined reference to `__imp__PyFloat_Type'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0xd1): undefined reference to `__imp__PyFloat_Type'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0xde): undefined reference to `__imp__PyType_IsSubtype'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x113): undefined reference to `__imp__PyExc_TypeError'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x11e): undefined reference to `__imp__PyErr_SetString'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x132): undefined reference to `__imp__PyExc_TypeError'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x13d): undefined reference to `__imp__PyErr_SetString'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x194): undefined reference to `__imp__PyInt_AsLong'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x1a3): undefined reference to `__imp__PyErr_Occurred'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x23e): undefined reference to `__imp__PyArg_ParseTuple'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x285): undefined reference to `__imp__PyArg_ParseTuple'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x316): undefined reference to `__imp__PyInt_AsLong'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x325): undefined reference to `__imp__PyErr_Occurred'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x341): undefined reference to `__imp__PyFloat_AsDouble'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x35f): undefined reference to `__imp__PyErr_Occurred'
build\temp.win-amd64-2.7\Release\_imaging.o:_imaging.c:(.text+0x393): undefined reference to `__imp__PyInt_AsLong' 
```

我假设这些奇怪的未定义的东西是 Python C API 的一部分。那么，如果 gcc 调用包含 -lpython27，为什么会出现这些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:32:01.510

作为 Python 包安装的一部分，在 Windows 中编译存在许多已知问题。我建议您使用过去对我有用的[非官方 Windows 二进制文件。](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

您可以使用以下命令安装 PIL：

```
easy_install http://www.lfd.uci.edu/~gohlke/pythonlibs/xos8d83j/PIL-fork-1.1.7.win-amd64-py2.7.exe 
```

# php - 这是编写旨在更好地进行单元测试的代码的正确方法吗？

> ID：12906910
> 
> 赞同：1
> 
> 时间：2012-10-16T02:57:37.457
> 
> 标签：php, unit-testing, dependency-injection

我正在尝试找出编写代码以进行更好的单元测试等的最佳方法。目前我有两个主要问题：

1.  我使用服务容器在类方法中获取我需要的服务，我担心这可能不是最好的方法，因为我依赖这些服务首先准备好
2.  我还使用一个主要的“设置”类，我可以跨模块/插件访问许多设置。我还担心这会对此设置产生不必要的依赖

一些示例代码来澄清我的问题：

```
class ABC
{
    function someFunction(){
        if(Container::get('settings')->get('status'))
        {
            Container::get('mailer')->send();
        }
    }
} 
```

也许我应该做的就是首先通过构造方法注入这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:49:04.863

您可以进行以下操作：

```
class ABC
{
    private $_setting = null;
    private $_mailer = null;

    public function setSetting($setting)
    {
        $this->_setting = $setting;
    }

    public function getSetting()
    {
        return $this->_setting;
    }

    public function setMailer($mailer)
    {
        $this->_mailer = $mailer;
    }

    public function getMailer()
    {
        return $this->_mailer;
    }

    function someFunction(){
       if($this->_setting->get('status'))
       {
           $this->_mailer->send();
       }
   }
}

class SettingMock
{
     private $_attributes = array();

     public function setMock($attribute, $value)
     {
         $this->_attributes[$attribute] = $value; 
     }
     public function get($attribute)
     {
         return $this->_attributes[$attribute];
     }

}

class MailerMock
{
    private $_values = array();

    public function setValue($value)
    {
        $this->_values['return'] = $value;
    }

    public function send()
    {
        return $this->_values['return'];
    }
} 
```

测试类：

```
class FooTest extends PHPUnit_Framework_TestCase
{
    public function testSendMail()
    {
         $settingMock = new SettingMock();
         $settingMock->setMock('status', true);

         $mailerMock = new MailerMock();
         $mailerMock->setValue(true);

         $testObject = new ABC();
         $testObject->setSetting($settingMock);
         $testObject->setMailer($mailerMock);

         $return = $testObject->someFunction();
         $this->assertTrue($return);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:40:55.270

您的服务容器看起来就像是[服务定位器反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。虽然*服务定位器*本身在极少数情况下*可能*很有用，但它始终是编写可测试（和可维护）代码时的主要障碍：

*   由于它的全局/静态性质，很难（如果不是不可能的话）模拟它
*   它隐藏了组件的依赖关系，从而影响了代码的可读性
*   它在消费者代码和自身之间引入了紧密耦合

虽然其中一些问题可以解决，但不值得这样做。您的直觉是正确的，通常处理它的方法是将其重构为适当的 DI 模式，例如构造函数注入。

# html - 我可以在内部 CSS 中使用媒体查询，它会避免加载我定义的背景图像吗？

> ID：12906913
> 
> 赞同：17
> 
> 时间：2012-10-16T02:58:00.110
> 
> 标签：html, css, twitter-bootstrap, responsive-design, media-queries

我正在开发一个响应式站点，其中每个页面都有一个在 CMS 中定义的大型英雄图像。我想避免在手机上下载该背景图片。

我能想到的唯一方法是在页面头部添加一些内联 CSS，如下所示：

```
<style type="text/css">
    @media only screen and (min-width: 680px) {
        .hero-image { background-image: url(../images/image.jpg); }
    }
</style> 
```

首先，我可以在内联 CSS 中使用媒体查询吗？

其次，这会避免在手机上下载图像吗？

三、有没有更好的办法？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T19:27:32.330

`<style>`是的，您可以在标签中使用媒体查询。仅在 CSS 要求时才加载图像，因此如果没有与选择器匹配的内容，则不会费心加载图像。

不过，在您的外部 CSS 文件中包含媒体查询可能会更好。没有理由将其包含在内。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T16:41:37.477

不，您似乎无法内联 @media 标签：

请参考： [是否可以将 CSS @media 规则内联？](https://stackoverflow.com/questions/9808233/is-it-possible-to-put-css-media-rules-inline)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-04T16:13:48.560

两步媒体查询可能会更好，一个以 CSS 开始但以 jQuery 结束。用 ID 标记您的 div，以便 jQuery 可以找到它们。该过程在这里详细解释：[http ://www.fourfront.us/blog/jquery-window-width-and-media-queries](http://www.fourfront.us/blog/jquery-window-width-and-media-queries)

# gwt - 如何在 GWT CompositeCell 上设置间距？

> ID：12906919
> 
> 赞同：1
> 
> 时间：2012-10-16T02:58:42.233
> 
> 标签：gwt

我不确定这是否是一个有效的问题，但我有一个`CompositeCell`作为参数来构造`DefaultNodeInfo`，它是`TreeViewModel`.

基本上，`CompositeCell`看起来像这样：

```
Tree item1[button1]
    Tree item2[button2]
    ... 
```

现在我想设置树项目和按钮之间的间距：

```
Tree item1  [button1] 
```

我不确定如何实现这一目标。也许`CompositeCell`不适合我，因为它没有`setSpacing`方法？

但无论如何我都需要一个 Cell 来构建一个`NodeInfo`.

=========================================

让我把我的问题说得更清楚。

我唯一`Widget`拥有的是[CellTree](http://gwt.google.com/samples/Showcase/Showcase.html?locale=en#!CwCellTree)。要构建一个`CellTree`我需要提供一个`TreeViewModel`：

```
 cellTree = new CellTree(
      new SomeTreeViewModel(), null); 
```

要构建一个`TreeViewModel`我需要提供的`DefaultNodeInfo`. 换句话说，要覆盖以下方法`TreeViewModel`：

```
 public <T> NodeInfo<?> getNodeInfo(final T value) 
```

构造一个`DefaultNodeInfo`：

```
 public DefaultNodeInfo(AbstractDataProvider<T> dataProvider, Cell<T> cell) 
```

我必须提供一个`Cell`（终于来到我的问题......）

`Cell`不是一个`Widget`接口，而只是一个接口。

在这里我需要一个`CompositeCell`包含一个`AbstractCell`：

```
 Tree item1 
```

和一个`ButtonCell`：

```
 [button1] 
```

将`CompositeCell`如下所示：

```
 Tree item1[button1] 
```

我想在其中一个或任何上设置样式`ButtonCell`以`CompositeCell`添加`Cell`间距：

```
 Tree item1   [button1] 
```

我认为 apply css on`CellTree`不会有帮助，因为它只会影响树的样式，但不会影响树的项目......

实际上我找到了一种解决方法，但我认为不鼓励这样做，即覆盖`ButtonCell`'s`render`方法：

```
 public void render(final Context context, final SafeHtml data,
                        final SafeHtmlBuilder sb) {
                    sb.appendHtmlConstant("<button type=\"button\" tabindex=\"-1\" style=\"margin-left:10px;\">");
                    if (data != null) {
                      sb.append(data);
                    }
                    sb.appendHtmlConstant("</button>");
                } 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:25:48.030

将 CSS 类添加到您的单元格或包含它的小部件。例如：

```
.myCell input, .myCell div {
    margin-left: 10px;
} 
```

然后

```
cellTree.setStyleName("myCell"); 
```

# scala - 在 Scala 中，不可变和可变集合和映射在垃圾收集方面如何比较？

> ID：12906925
> 
> 赞同：5
> 
> 时间：2012-10-16T02:59:54.637
> 
> 标签：scala, garbage-collection, immutability, mutable

我正在编写一些代码，这些代码涉及在其中包含“小”（例如，短字符串或简单案例类）对象的集合和映射，同时通过一个大结构递归，在每个点添加一个小的（通常是 1，有时是少数）对象到集合或地图。似乎使用可变集和映射比不可变集显着加快了速度，但我在定量评估差异时遇到了麻烦。

当我使用不可变数据结构时，Scala 的垃圾收集会导致显着减速是否有意义？使用可变数据结构可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T06:03:10.890

Scala 不可变集合的效率惊人。主要是因为当结构发生变化时，很多结构都会被重用。

但是，如果您进行大量更改，则可变结构可能更合适。实际上，这就是 Scala Collection API 在内部的许多地方所做的：使用可变数据结构来构建新的东西，并且仅作为最后一步，创建一个不可变的并返回它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T16:53:58.527

Scala 可变数据结构通过预分配内存比不可变数据结构更高效。它们更适合许多插入（因此它们是可变的）。看一下默认可变Collection中函数+=的实现，一个HashMap，Map扩展了：

[https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/mutable/HashMap.scala#L84](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/mutable/HashMap.scala#L84)

```
def += (kv: (A, B)): this.type = {
  val e = findEntry(kv._1)
  if (e == null) addEntry(new Entry(kv._1, kv._2))
  else e.value = kv._2
  this
} 
```

HashMap 使用 HashTable 实现了一个可变 Map，它定义了 addEntry

[https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/mutable/HashTable.scala#L117](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/collection/mutable/HashTable.scala#L117)

```
protected def addEntry(e: Entry) {
  val h = index(elemHashCode(e.key))
  e.next = table(h).asInstanceOf[Entry]
  table(h) = e
  tableSize = tableSize + 1
  nnSizeMapAdd(h)
  if (tableSize > threshold)
    resize(2 * table.length)
} 
```

每次达到阈值时，集合的大小都会加倍。因此，如果您一次重复地将 n 个条目添加到一个空的可变数据结构中，您只需要调整 log(n) 次。我没有深入研究不可变数据结构的实现，但我假设您将不得不在每次插入时调整大小。因此，您的性能差异。

# google-apps-script - 如何停止记住文件扩展名并在从 Google Drive 下载时应用

> ID：12906926
> 
> 赞同：5
> 
> 时间：2012-10-16T02:59:58.143
> 
> 标签：google-apps-script, google-drive-api

我上传了混合加载的文件（图像、文档、pdf），所有这些文件的文件扩展名为 .dc 文件是否根据基础类型进行了转换。作为迁移过程的一部分，我使用 Google 应用程序脚本重命名这些文件并应用适当的文件扩展名，例如 .pdf。选择这些文件中的任何一个并下载会生成一个扩展名为 .pdf.dc 的文件

.dc 来自哪里，我可以在我的 GAS 重命名过程中摆脱它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T13:48:29.713

你是对的，直接改变原来的扩展似乎没有什么好办法。我相信这是因为原始扩展必须与 MIME 类型信息有关，并且很难摆脱它。

但是，如果您复制而不是重命名，则新名称会删除旧扩展名。

这对我有用（只是用 gifs 和 jpgs 测试过，不能像这样将 JPG 转换为 GIF ......） -

```
var file = DocsList.getFileById('MYID');//name is 'test.jpg'
file.rename('test.gif');//name is now 'test.gif.jpg', not desired
file.makeCopy('test.gif');//new file is created with download name of 'test.gif' 
```

我知道这并不理想，因为您必须制作副本并删除原件，但目前这可能是一个不错的解决方法。

请在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中记录您的用例详细信息，以便我们进一步深入研究。

# innodb - Mysql / PHP 应用程序 99% 读取 1% 插入/更新 - 使用什么 MYSQL 引擎？

> ID：12906928
> 
> 赞同：0
> 
> 时间：2012-10-16T03:00:03.480
> 
> 标签：innodb, myisam

所以我正在开发这个跟踪应用程序 atm，它将在 2 个网络服务器上运行，其目的是跟踪访问者的行为。

数据将在作为主服务器的服务器 A 上收集，我们决定为此使用 MYSQL Blackhole 引擎，因为它实际上并不执行插入操作，只是将它们写入日志文件，然后复制一个包含数据的表实时到服务器 B，它是从服务器。

在服务器 B 上，我们将拥有应用程序的报告部分，该部分将用于生成统计报告，因此将有 99% 以上的读取操作来创建统计报告，并且只有在用户时不时进行插入/更新或删除操作例如创建一个新的活动，或删除一个或更新他的用户名/密码等。

现在出现了一个问题，我们应该为报告部分使用哪个 MYSQL 引擎，但我们不确定哪个引擎支持最快的读取，MYISAM 还是 INNODB？

任何帮助，将不胜感激 ：）

PS：我忘了提到服务器 B 上的报告数据库，将收集大量数据，因此我们完全有可能每年必须处理数以百万计的数据，并且仍然需要能够创建统计报告从这个数据非常快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:05:41.047

根据您对主要阅读的要求，我会说MYISAM。大大简化，使用 MISAM 进行大量读取，使用 INNODB 进行大量写入。

[Developer99](https://stackoverflow.com/users/858727/developer99)写[了一个小图表](http://developer99.blogspot.com/2011/07/mysql-innodb-vs-myisam.html)来帮助大家选择：

```
 My ISAM   InnoDB
Required full text Search                             Yes     
Require Transactions                                           Yes
frequent select queries                               Yes     
frequent insert,update,delete                                  Yes
Row Locking (multi processing on single table)                 Yes
Relational base design                                         Yes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:08:58.423

根据您的表格关系。MyISAM 历来被认为比 InnoDB 更快，但对于 InnoDB 的最新版本，这适用于小得多的用例集。对于只读表的表扫描，MyISAM 通常更快。

# python - Django如何检查对象是否在视图中具有属性

> ID：12906933
> 
> 赞同：17
> 
> 时间：2012-10-16T03:01:48.510
> 
> 标签：python, django

我正在尝试在通用函数中获取文档属性，但一些模型可能没有文档属性。有没有办法首先检查模型是否具有文档属性，然后有条件地运行代码？

```
 if self.model has property documents:
        context['documents'] = self.get_object().documents.() 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-16T03:57:05.253

您可以使用`hasattr()`来检查模型是否具有文档属性。

```
if hasattr(self.model, 'documents'):
    doStuff(self.model.documents) 
```

但是，[这个答案](https://stackoverflow.com/a/610923/1269296)指出，有些人认为“请求宽恕比请求许可更容易”的做法是更好的做法。

```
try:
    doStuff(self.model.documents)
except AttributeError:
    otherStuff() 
```

# javascript - 使用 jsoauth javascript oauth 库对 tumblr 进行身份验证时出现 401 错误

> ID：12906935
> 
> 赞同：0
> 
> 时间：2012-10-16T03:02:20.683
> 
> 标签：javascript, oauth, google-chrome-extension, tumblr, jsoauth

我正在为 tumblr 构建一个 chrome 扩展。我正在使用库 jsoauth 执行 oauth 部分，但出现 401 错误。

确切的错误是“oauth_signature [D6rDCSn/ClGhMyTq24/c6419t8I=] 与预期值 [wnrVNhZYCSfRmKSTaKyb9dg7vNQ=] 不匹配”

我不知道是什么原因造成的。这是我的代码：

背景.html

```
<html>
    <script type="text/javascript" src="jsOAuth-1.3.6.min.js"></script>
    <script type="text/javascript" src="background.js"></script>
</html> 
```

背景.js

```
function getAccess(){
  var oauth, options;

    options = {
        consumerKey: 'KEY',
        consumerSecret: 'SECRET',
        requestTokenUrl: "http://www.tumblr.com/oauth/request_token",
        authorizationUrl: "http://www.tumblr.com/oauth/authorize",
        accessTokenUrl: "http://www.tumblr.com/oauth/access_token"
    };

    oauth = OAuth(options);

    oauth.fetchRequestToken(openAuthoriseWindow, failureHandler);

    function openAuthoriseWindow(url)
    {
        var wnd = window.open(url, 'authorise');
        oauth.setVerifier(false);
        oauth.fetchAccessToken(output,failureHandler);

        function output(url)
        {
            console.log("success!");
        }
    }

    function failureHandler(data)
    {
        console.error(data);
    }
}

chrome.extension.onMessage.addListener(
  function(request, sender, sendResponse) {
    if (request.greeting == "getAccess"){
      sendResponse({farewell: "It worked"});
      getAccess();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:50:31.093

False 作为 oauth_verifier 发送是错误的。

Tumblr 会将您重定向到他们存档的 oauth_callback，其中包括您需要在 jsOAuth 中插入 .setVerifier 的 oauth_verifier。

Tumblr API 文档在解释 ouath 授权过程方面非常失误，但这是我的看法。

# list - 处理列表列表

> ID：12906937
> 
> 赞同：0
> 
> 时间：2012-10-16T03:02:36.487
> 
> 标签：list, haskell

> **可能重复：**
> [Haskell - 操作列表](https://stackoverflow.com/questions/12877756/haskell-manipulating-lists)

给定一个矩阵`m`，一个起点`p1`和一个终点`p2`。目标是计算有多少种方法可以到达最终矩阵（p2=1 和其他=0）。为此，每次您跳到某个位置时，您都会减一。您最多只能从一个位置跳到另一个位置，水平或垂直两个位置。例如：

```
 m =             p1=(3,1)  p2=(2,3)
   [0 0 0]
   [1 0 4]
   [2 0 4] 
```

你可以跳到位置`[(3,3),(2,1)]`

当您从一个位置跳过时，您将其减一并再次执行所有操作。让我们跳到列表的第一个元素。像这样：

```
 m=              
    [0 0 0]
    [1 0 4]
    [1 0 4] 
```

现在你就位了`(3,3)`，你可以跳到这些位置`[(3,1),(2,3)]`

并一直这样做直到最终的矩阵：

```
[0 0 0]
[0 0 0]
[1 0 0] 
```

在这种情况下，获得最终矩阵的不同方法的数量是`20`。我创建了以下功能：

```
import Data.List
type Pos = (Int,Int)
type Matrix = [[Int]]

s::Pos->Pos->Matrix->Int
s (i,j) fim mat = if (mat == (matrizFinal (tamanho mat) fim)) then 1 
                else if (possiveisMov (i,j) mat)/= [] then s (head(possiveisMov (i,j) mat)) fim (decrementaPosicao (i,j) mat)
                 else 0

matrizFinal:: Pos->Pos->Matrix
matrizFinal (m,n) p = [[if (y,x)==p then 1 else 0 | x<-[1..n]]| y<-[1..m]]

movimentos::Pos->[Pos]
movimentos (i,j)= [(i+1,j),(i+2,j),(i-1,j),(i-2,j),(i,j+1),(i,j+2),(i,j-1),(i,j-2)]

decrementaPosicao:: Pos->Matrix->Matrix
decrementaPosicao (1,c) (m:ms) = (decrementa c m):ms
decrementaPosicao (l,c) (m:ms) = m:(decrementaPosicao (l-1,c) ms)

decrementa:: Int->[Int]->[Int]
decrementa 1 (m:ms) = (m-1):ms
decrementa n (m:ms) = m:(decrementa (n-1) ms)

tamanho:: Matrix->Pos
tamanho m = (length m,length.head $ m)

possiveisMov:: Pos->Matrix->[Pos]
possiveisMov p mat = verifica0 ([(a,b)|a<-(dim m),b<-(dim n)]  `intersect` xs) mat
                          where xs = movimentos p
                            (m,n) = tamanho mat
dim:: Int->[Int]
dim 1 = [1]
dim n = n:dim (n-1)

verifica0::[Pos]->Matrix->[Pos]
verifica0 [] m =[]
verifica0 (p:ps) m = if ((pegaAltura m p) == 0) then verifica0 ps m
                                               else p:verifica0 ps m

pegaAltura:: Matrix->Pos->Int
pegaAltura x (i,j)= (x!!(i-1))!!(j-1) 
```

有谁知道为什么这个函数`s`不计算解决这个问题的方法有多少？我该如何解决它或更好的方法来制作`s`解决的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:18:17.490

在我认识到正在玩的游戏是多个令牌弹珠之后，我知道计算从开始到结束的路径数是通过扩展游戏树来完成的，如果找到的棋盘是结束棋盘，那么将其计为其他路径明智的不要。

因此，我随后看到您的功能仅在*第一个可能的移动*`s`中以一种方式扩展棋盘，而不是在所有可能的移动中。正确的版本将测试棋盘是否处于最终状态并返回 1，否则将所有可能的移动的循环结果相加，如果该移动无效，则为计数或 0。

# .htaccess - 如何使用 .htaccess 重写此 url

> ID：12906938
> 
> 赞同：4
> 
> 时间：2012-10-16T03:02:50.283
> 
> 标签：.htaccess, url, mod-rewrite, rewrite

我希望它将 url 显示 `/index.php?page=somePage&id=someID&siteAddress=someAddress` 为 `/someAddress/?page=somePage&id=someID`.

我该如何使用重写规则呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:21:55.347

在内部将*/someAddress**重写*为/index.php ：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{QUERY_STRING} ^page=([^&]+)&id=([^&]+)$
RewriteRule ^/?([^/]+)/$ /index.php?page=%1%id=%2&siteAddress=$1 [L] 
```

外部重定向*/index.php*到*/someAddress*：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\?page=([^&]+)&id=([^&]+)&siteAddress=(^[&\ ]+)
RewriteRule ^ /%3/?page=%1&id=%2 [L,R=301] 
```

# c - 运行中断/定时器 x 秒？

> ID：12906941
> 
> 赞同：0
> 
> 时间：2012-10-16T03:03:30.380
> 
> 标签：c, microcontroller

我正在学习在我的 Silicon Laboratories C8051F020 toolstick 子卡包上使用中断。我想在指定的时间内运行中断。谁能给我一个例子或指出我正确的方向？或者，如果有办法在 x 秒内运行一个函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:33:12.827

You can run a "for" loop for a specified number of time. You know the speed of you CPU, thus you can compute the time required to run a single instruction. And then you can know the number of loop you have to do in your for loop. Just make sure that you compiler doesn't optimize your loop.... by removing it ! But, I don't understand why you want to do that. Usually interrupts should run for the smallest amount of time. I never saw any need for loosing cycles in a ISR. (except small "waits" of some cycles for some external sychro). If you need to wait for a long time, use a timer that will call its own ISR upon overflows when the time is elapsed.

Or if you want to run an interrupt that runs every xxx secondes, you should not actively wait, But use a timer instead. Configure a timer that overflows every xxx seconds and put your code in its ISR. Once the timer and IRQ are enabled, your ISR will run every xxx seconds

# c++ - 如何将基于 boost 的计时器转换为基于 Unix（boost date_time free）的类？

> ID：12906942
> 
> 赞同：0
> 
> 时间：2012-10-16T03:03:49.767
> 
> 标签：c++, unix, boost

所以我是 Unix 新手，不知道它的 API。我想知道 Unix 上的镜像 api 是什么？

```
#include <boost/date_time.hpp>

class timer
{
public:
        timer();
        void restart();
        boost::posix_time::time_duration elapsed() const;
private:
        boost::posix_time::ptime start_time;
};

// and cpp looks like
#include "timer.h"

timer::timer() : start_time(boost::posix_time::microsec_clock::local_time()) { }

void timer::restart()
{
        start_time = boost::posix_time::microsec_clock::local_time();
}

boost::posix_time::time_duration timer::elapsed() const
{
        return boost::posix_time::microsec_clock::local_time() - start_time;
} 
```

那么如何使用 Unix api 在我的简单类中删除 boost 使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:18:24.680

Unix 时间是从一个纪元 (1970-01-01T00:00:00Z) 过去的秒数，你已经知道其余的时间了：

```
using boost::posix_time;
ptime unixEpoch( 1970, 1, 1 );
time_t t = (time_t) (microsec_clock::local_time() - unixEpoch).total_seconds() 
```

# nested - 是否有任何 lisp 有一个 s 表达式作为它们的头部，例如 ((f 2) 3 4)？如果不是，为什么？

> ID：12906945
> 
> 赞同：7
> 
> 时间：2012-10-16T03:04:07.740
> 
> 标签：nested, lisp, head, s-expression, lisp-2

是否有任何 lisp 支持嵌套的 s 表达式？例如

```
((f 2) 3 4) 
```

大概评估为`(f 2)`要应用于的函数/宏`3 4`。

是否有可能有一个 lisp 支持这样的事情？或者是否有技术限制禁止/使其不切实际？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T03:09:44.443

在那些对变量和函数具有单一命名空间的 Lisps 中，您的表达式是有效的。这些被称为 Lisp-1。Scheme 和 Clojure 就是这种 Lisp 的例子。

在那些对变量和函数有单独命名空间的 Lisps 中，你的表达式是`(funcall (f 2) 3 4)`. 这些被称为 Lisp-2。Common Lisp 和 Emacs Lisp 就是这种 Lisp 的例子。

在 Lisp-2 中，每个符号都有一个*值 slot*和一个*函数 slot*。要调用存储在*值槽中*的函数，您需要使用[`funcall`关键字](https://stackoverflow.com/a/5372207/596361)。

查看有关此问题的更多信息：[http ://www.dreamsongs.com/Separation.html](http://www.dreamsongs.com/Separation.html)

**编辑：**感谢[Rainer Joswig](https://stackoverflow.com/users/69545/rainer-joswig) ，我更正了答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T06:38:40.947

例如在上面的 Common Lisp 中是无效的。Common Lisp 的语法通常不允许列表作为函数调用的头部。您必须使用`FUNCALL`来调用返回的函数值。

```
(funcall (f 2) 3 4) 
```

在其他一些 Lisp 方言中，它是允许的。Scheme 就是这样一种 Lisp 方言。Scheme 还计算函数调用表达式的头部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T11:42:50.357

Lisp-1 lisp，例如 Scheme，通常会评估函数形式的所有表达式，甚至函数本身。

Lisp-2 lisp，例如 Common Lisp，通常对函数和参数有不同的行为。在评估参数的同时，查找函数。调用评估函数的常用方法是使用`funcall`or `apply`。

```
(funcall (f 2) 3 4) 
```

在 Common Lisp 中，如果您坚持对运算符中的函数求值，则可以使用[lambda 形式：](http://www.lispworks.com/documentation/HyperSpec/Body/03_ababd.htm)

```
((lambda (&rest args) (apply (f 2) args)) 3 4) 
```

# sql-server-2008 - SQL Server 2008中如何消除列中的制表符空间

> ID：12906949
> 
> 赞同：71
> 
> 时间：2012-10-16T03:04:21.593
> 
> 标签：sql-server-2008

我在表中有一个带有电子邮件的列，`customer`其中列中的数据包含特殊字符：TAB

当我进行选择时，我需要从该列中删除 TAB 空格。

表示有一个空的 TAB 空格，后跟**EmailID：xyz.com**

我尝试使用`LTRIM`and`RTRIM`但这在这里不起作用。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-10-16T03:12:39.043

试试这个代码

```
SELECT REPLACE([Column], char(9), '') From [dbo.Table] 
```

char(9) 是制表符

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-11-26T01:27:04.953

```
UPDATE Table SET Column = REPLACE(Column, char(9), '') 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-01-11T13:40:54.787

使用下面的代码

```
UPDATE Table1 SET Column1 = LTRIM(RTRIM(REPLACE(REPLACE(REPLACE(Column1, CHAR(9), ''), CHAR(10), ''), CHAR(13), '')))` 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-07-28T12:45:21.293

看看它可能会起作用------

`UPDATE table_name SET column_name=replace(column_name, ' ', '') //Remove white space`

`UPDATE table_name SET column_name=replace(column_name, '\n', '') //Remove newline`

`UPDATE table_name SET column_name=replace(column_name, '\t', '') //Remove all tab`

谢谢 Subroto

# jquery - Spring Mvc jQuery

> ID：12906950
> 
> 赞同：1
> 
> 时间：2012-10-16T03:04:28.240
> 
> 标签：jquery, spring, spring-mvc

我正在使用**Spring MVC ，我希望当我通过****POST**将记录插入数据库时​​，当用户返回视图时，我想向用户显示类似**Jquery**对话框的内容，说明事务成功/显示在对话框中使用的错误消息。

我实现了 Jquery 对话框，但由于某种原因，它没有按我希望的方式工作。我这样创建它：

**jQuery**

```
 function ShowDialog() {
            $( "#dialog" ).dialog({
                modal: true,
                buttons: {
                    Ok: function() {
                        $( this ).dialog( "close" );
                    }
                }
            });
        } 
```

我在更改时将此附加到元素事件：

```
$('#results').change(function()){

            if($('#results').val().length != 0){

                ShowDialog();

            }

        } 
```

但是，当表单加载时，我会弹出一个空白对话框。元素“*结果*”为空，并使用**model.addAttribute("results","Record Was Updated")**从服务器设置，其中**我创建了名为“对话框”的位置，我可以看到正在显示的对话框图标。**

 ****html**

```
<div id="dialog" title="Server Response">
            <p>
                <span class="ui-icon ui-icon-info" style="float: left; margin: 0 7px 50px 0;"></span>
                <label id="results">${results}</label>
            </p>

</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T03:56:55.180

在您的更改事件中，将第二行更改为：

```
if($('#results').html().length != 0){ 
```

[`.val()`](http://api.jquery.com/val/)唯一适用于表单元素（输入、选择和文本区域），而普通`#results`的 html 元素。**

# .net - 客户端证书标签`ibmwebspheremq ` 对于域用户

> ID：12906954
> 
> 赞同：2
> 
> 时间：2012-10-16T03:04:47.117
> 
> 标签：.net, security, certificate, ibm-mq

如果连接到 WebSphere MQ 服务器的客户端正在使用域帐户，例如`box1\user1`，那么客户端的证书标签是：`ibmwebspheremquser1`还是`ibmwebspheremqbox1\user1`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:39:52.923

不。在这种情况下，指定的用户 ID 将`user1`给出一个标签。`ibmwebspheremquser1`但是，这取决于所使用的 WMQ 版本，并且在某些情况下，行为会有所不同，并且可以按照[此处](http://www-01.ibm.com/support/docview.wss?rs=0&uid=swg21245474)所述进行更改。另请注意，该答案适用于 Java/JMS 客户端以外的客户端，例如 C 客户端和 .Net 客户端。Java 和 JMS 客户端的行为使用 Java 标准证书解析。

因此，如果它不能基于此工作，则有必要使用 WMQ 客户端类型和版本的详细信息更新您的问题。

# xcode4 - 什么是 xcode 4 模板宏处理器？

> ID：12906956
> 
> 赞同：2
> 
> 时间：2012-10-16T03:05:05.940
> 
> 标签：xcode4

xcode 4 模板很粗糙，我在构建我的模板时遇到的问题之一是宏扩展。___VARIABLE_name:identifier 将用下划线替换前导字符，如果该字符是数字。我最终发现 :identifier 正在修改扩展以使其成为合法标识符。伟大的。

我想知道看起来像什么宏语言（如果有的话），所以我可以在构建模板时找到其他可用的技巧。

谢谢。

# apache - 验证子目录

> ID：12906957
> 
> 赞同：0
> 
> 时间：2012-10-16T03:05:08.703
> 
> 标签：apache, .htaccess, authentication, .htpasswd

这是我网站根目录内的文件夹图片：
![目录](../Images/1a2791228c0d2085c0b59d77060a8ddc.png)
我想让 htaccess 需要身份验证才能访问这些文件夹中的任何一个。`www.domain.com/Folder/CSS`因此，没有正确的用户名和密码，任何人都无法输入和访问它。到目前为止，我已经尝试过：

```
<DirectoryMatch "^*">
    AuthType Basic
    AuthName "Login"
    AuthUserFile /disks/*/*/Folder/.htpasswd
    Require valid-user
</DirectoryMatch> 
```

这是为了确保所有子目录 ( `classes, cs, images, js`) 的安全，但是当我输入时，`www.domain.com/Folder/Front.php`它会出现：

```
Internal Server Error 
```

没有控制台错误。如何让 htaccess 验证所有子目录（但不是 FRONT.PHP！）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:17:41.240

尝试将 DirectoryMatch 正则表达式更改为`/(.+)`

[这里](http://www.zytrax.com/tech/web/regex.htm#experiment)有一个正则表达式测试器......

希望有帮助

干杯罗宾

ps：apache日志说什么？是否开启了日志记录。

# maps - 在打开新信息窗口时关闭每个信息窗口

> ID：12906958
> 
> 赞同：1
> 
> 时间：2012-10-16T03:05:17.473
> 
> 标签：maps, infowindow

经过大量研究，我似乎无法确定为什么在打开新窗口时无法关闭 InfoWindow。到目前为止，我尝试过的所有操作都导致 InfoWindow 根本不显示。

我在这里尝试过建议：[Google Map API v3 ~ 只需关闭一个信息窗口？](https://stackoverflow.com/questions/2946165/google-map-api-v3-simply-close-an-infowindow)和其他地方，但我想知道这是否是我不知道导致此问题的问题。诚然，这是从其他来源拼凑而成的。非常感谢您的帮助。

```
 <html>
  <head>

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Geocoding Simple</title>
    <link href="https://code.googleapis.com/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script> 
    var geocoder;
  var map;
  var infoWindow;

  function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(37.77014301036805, -79.48862973916635);
    var mapOptions = {
      zoom: 12,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

  }

  function codeAddress() {

    var address = document.getElementById("address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var loc=[]; // no need to define it in outer function now
        loc[0]=results[0].geometry.location.lat();
        loc[1]=results[0].geometry.location.lng();
                var content = '<div id="infoWindow"><iframe src="http://inside.handp.com/map2.php?';
        content += 'latitude=' + results[0].geometry.location.lat()+ '&';
        content += 'longitude=' + results[0].geometry.location.lng()+'" frameborder="0" allowfullscreen scrolling="no"></iframe></div>';

 //      display( loc[0] ); 
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location

        });

        addInfoWindow(marker, content);

      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }

    function display( long_lat ){
     alert(long_lat);
  }
  function addInfoWindow(marker, message) {
            var info = message;

            var infoWindow = new google.maps.InfoWindow({content: message});

            google.maps.event.addListener(marker, 'click', function () {

            });

                infoWindow.open(map, marker);

        }

    </script>
    </head>
<body onload="initialize()">
 <div id="map_canvas" style="width: 640px; height: 480px;"></div>
  <div>
    <input id="address" type="textbox" value="Enter Address">
    <input type="button" value="Encode" onclick="codeAddress()">
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-23T23:40:02.343

您只能使用一个 infowindow 对象并即时设置不同的内容

例如： var infowindow = new google.maps.InfoWindow({maxWidth: 200});

将侦听器添加到您的标记

```
var marker = new google.maps.Marker({
   map: map,
   info: 'this is info window html',
   position: results[0].geometry.location
});

google.maps.event.addListener(marker, 'click', function() {             
     infowindow.setContent(this.info);
     infowindow.open(map, this);
     map.setCenter(this.getPosition());
}); 
```

# jquery - Flexslider - 幻灯片之间可能有边距？

> ID：12906960
> 
> 赞同：6
> 
> 时间：2012-10-16T03:05:38.300
> 
> 标签：jquery, slider, slideshow, flexslider

我有一个来自客户端的（不寻常的）请求，要求在“幻灯片”动画期间每张幻灯片之间至少有 40 像素的填充/边距。Flexslider 的默认设置是让项目相互刷新。

“itemMargin”在 2.0 中有一个新的 JQuery 选项，但它似乎只用于“轮播”设置。如果我通过 CSS 应用边距，每张幻灯片都会撞到下一张幻灯片。

无论如何要在幻灯片之间应用边距，还是这是一个不可能的选择？

这是我当前设置的选项

```
$(window).load(function() {
    $('.home_slider').flexslider({

        animation: "slide",              //String: Select your animation type, "fade" or "slide"
        smoothHeight: false,            //{NEW} Boolean: Allow height of the slider to animate smoothly in horizontal mode
        slideshow: false,                //Boolean: Animate slider automatically
        controlNav: false, 
        directionNav: true,             //Boolean: Create navigation for previous/next navigation? (true/false)
        prevText: "%",           //String: Set the text for the "previous" directionNav item
        nextText: "&",
        // Carousel Options
        itemMargin: 40
    }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T23:15:59.120

与其尝试将边距直接应用于 LI 元素，不如在每张幻灯片中包含另一个环绕图像的元素，然后对其应用边距。

```
<div class="flexslider">
  <ul class="slides">
    <li><div class="slide-contents"><img src="http://flexslider.woothemes.com/images/kitchen_adventurer_cheesecake_brownie.jpg" /></div></li>
    <li><div class="slide-contents"><img src="http://flexslider.woothemes.com/images/kitchen_adventurer_lemon.jpg" /></div></li>
    <li><div class="slide-contents"><img src="http://flexslider.woothemes.com/images/kitchen_adventurer_donut.jpg" /></div></li>
    </ul>
</div> 
```

然后在你的 CSS 中做这样的事情（假设你希望幻灯片之间有 40px，在幻灯片的每一侧添加 20px：

```
.flexslider .slide-contents {
  margin: 0 20px;
} 
```

如果您想保持滑块的左/右侧与页面内容的其余部分齐平，请在 flexslider 本身上添加负边距。

```
.flexslider {
  margin: 0 -20px;
} 
```

您可以在 Flexslider 的每张幻灯片中包含任意数量的标记，这样您就可以根据需要添加标题或其他布局修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:19:04.063

我可以通过一些小技巧来实现几乎你想要的：

## HTML

```
<div class="flexslider">
  <ul class="slides">
    <li><img src="http://flexslider.woothemes.com/images/kitchen_adventurer_cheesecake_brownie.jpg" /></li>
      <li><img src="http://flexslider.woothemes.com/images/kitchen_adventurer_lemon.jpg" /></li>
    <li><img src="http://flexslider.woothemes.com/images/kitchen_adventurer_donut.jpg" /></li>
    <li><img src="http://flexslider.woothemes.com/images/kitchen_adventurer_caramel.jpg" /></li>
    </ul>
</div> 
```

## Javascript/jQuery

```
var sliderImgWidth = 200,
    sliderMargin = 40;

$f = $('.flexslider').css('width', sliderImgWidth + sliderMargin);
$f.find('img').css({
    'width': '200px',
    'margin-right': sliderMargin / 2 + 'px',
    'margin-left': sliderMargin / 2 + 'px'
});
$f.flexslider({
    animation: "slide"
}); 
```

在静态状态下隐藏边距会很好，但任何减小容器宽度的尝试都会导致图像定位不佳和/或重叠。我尝试了各种方法，但未能欺骗 flexslider 做我想做的事。

**[演示](http://jsfiddle.net/8MEF7/1/)**

通过仔细设计 img 元素的样式，可以在 CSS 中实现同样的效果。这里的秘密似乎是用你自己的类构建 img 标签，这样 CSS 特异性规则会阻止 flexslider（或者是 jsFiddle？）覆盖指令。在演示中，我使用了`class="x"`.

**[演示](http://jsfiddle.net/8MEF7/)**

# xamarin.ios - MonoTouch 6.0.4 的内存警告

> ID：12906963
> 
> 赞同：0
> 
> 时间：2012-10-16T03:05:54.303
> 
> 标签：xamarin.ios

我的应用程序是单视图应用程序。它还通过在屏幕之间导航开始收到内存警告，有时触发键盘或日期时间选择器打开。

特别是，当我浏览包含**MKMapView 控件**的视图时，它会崩溃。该问题发生在真实设备上，但在**iOS 模拟器**上运行良好。

我正在使用**MonoTouch 6.0.4**和**XCode 4.3**。

# html - 覆盖 div 缩放而不移动到元素下方

> ID：12906964
> 
> 赞同：1
> 
> 时间：2012-10-16T03:06:02.903
> 
> 标签：html, css

我需要帮助来覆盖包含图像缩放的 div，而无需移动包含图像拇指的栏。

我尝试过的一件事是在所有 div 中使用 z-index，但我无法使其工作。然后我尝试通过更改缩放的容器 div 的宽度和高度，但结果是底部的拇指条向下移动是容器高度变化的结果。

这是我每次尝试的示例

```
 http://jsfiddle.net/justelnegro/KU6NU/22/ <--- here's the zoom doesn't appear completely 

 http://jsfiddle.net/justelnegro/KU6NU/20/ <--- here's the bottom elements move 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:32:59.730

没看懂你的意思，能写的具体点吗？

我只能给你一个建议：1.你必须检查覆盖的div是否正确包含拇指图像，而不是div覆盖。2.如果div不能容纳大拇指，可以在div覆盖中给出css code(overflow:hidden)。3.要让你的拇指出现在div覆盖的顶部，你可以把z-index：9999放在拇指div中，并将重叠div的z-index设置为小于拇指div。

这是你想要达到的目标吗？

# c++ - 从管道读取输入时出现scanf问题

> ID：12906965
> 
> 赞同：3
> 
> 时间：2012-10-16T03:06:03.790
> 
> 标签：c++, c

我正在用 C 编写一个程序，我正在尝试创建一个自动化测试程序。将产生一个进程，其 I/O 通道（stdin、stdout 和 stderr）将被重定向到“黑盒测试模块”。让我们假设一个涉及两个数字相乘的简单程序。在这种情况下，要测试的程序如下所示：

```
#include<stdio.h>
int main()
{
    int a, b, numTc, i = 0; //numTc being the number of test cases
    scanf("%d",&numTc);
    for(;i < numTc; i++)
    {
        scanf("%d%d",&a,&b); //Facing issue here
        printf("%d\n",a*b);
    }
} 
```

黑盒测试模块首先将该程序的 I/O 通道重定向到一个管道，然后使用`write()`系统调用首先写入测试用例的数量，然后写入测试用例本身。

我面临的问题是：进程挂在上面标记的第二个 scanf 上。如果我构建整个输入缓冲区并在附加“\n”后将其写入管道，那么一切正常。

但是，我想一一实现功能。

黑盒模块的逻辑如下：

1.  从数据库中读取全部测试用例
2.  构造一个输入缓冲区，其中所有测试用例由空格分隔并以换行符结尾。
3.  将此缓冲区写入外部（要测试的进程）进程的标准输入
4.  等待测试过程的输出。

以上工作正常。但是，黑盒模块应该可以一个一个地编写测试用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:15:35.580

您是否正在尝试读取两个相邻的个位数整数？如果是这样，您可以考虑使用`%1d`.

有一个你输入的例子会很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:12:23.247

您的问题很可能是管道的标准 I/O 与标准 I/O 到终端的行为不同。写入终端时默认为行缓冲；它在写入管道时被完全缓冲。因此，您的程序需要`fflush(stdout);`在`printf()`实际将数据发送到管道之后。

严格来说，您应该检查来自的返回值，`scanf()`以确保您得到您期望的结果。如果第一个`scanf()`不返回 1 或第二个不返回 2，那么你就有问题了。

你可以调试你的问题，也许，通过打开一个日志文件来查看正在读取的内容。确保也将输出刷新到该日志文件。

# c# - 将字符串 xml 值发布到 url

> ID：12906969
> 
> 赞同：-1
> 
> 时间：2012-10-16T03:06:53.307
> 
> 标签：c#, .net, xml

> **可能重复：**
> [将 url 编码的 xml 发布到 url](https://stackoverflow.com/questions/12904346/posting-an-url-encoded-xml-to-the-url)

我正在尝试将 xml 文档发布到具有名为“hidden1”的隐藏字段的 url

```
string xml = "<?xml version="1.0"?>
<catalog>
   <book id="bk101">
      <author>Gambardella, Matthew</author>
      <title>XML Developer's Guide</title>
   </book>
</catalog>";

string  myurl=(uri+Server.UrlEncode(str1));
      Response.Write(@"<a input type=""hidden"" name=""hidden1"" value=""myurl""></a>"); 
      Response.Close(); 
```

它不起作用，因为我认为 myurl 字符串未正确传递。任何想法如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:09:16.710

看起来您在以下行的双引号之前缺少转义字符 ('\')：

```
string xml = "<?xml version=\"1.0\"?>
<catalog>
   <book id=\"bk101\">
   ... 
```

# c++ - C++ 在向量中使用不可赋值的对象

> ID：12906970
> 
> 赞同：5
> 
> 时间：2012-10-16T03:06:56.177
> 
> 标签：c++, vector, reference, containers

我想将对象列表存储在 中`std::vector`，但对象包含引用并且不能分配给。但是，我可以复制构造该对象。

我能想到的唯一选择是使用指针来包装对象并在需要分配指针时重新安装指针，但是这样做的语法会显着降低可读性，尤其是在使用迭代器时，我更喜欢另一种选择。

不起作用：

```
std::vector<MyObject> myVector;
//fill the vector
//...
myVector[1] = object1; 
```

智能指针牺牲了可读性：

```
std::vector<std::unique_ptr<MyObject>> ptrVector;
//fill the vector
//...
ptrVector[1] = std::unique_ptr<MyObject>(new MyObject(object1)); 
```

**是否有任何其他方法可以在 中使用不可分配的对象`std::vector`？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:32:48.210

这不是您问题的直接答案，因为我无法提供替代品`std::vector`，或者提供不同的使用方式来让您做您需要做的事情。

但是，如果可以修改 的定义`MyObject`，则可以选择更改它，以便它使用`std::reference_wrapper`而不是常规引用。这将允许`MyObject`分配。

例子：

```
#include <vector>
#include <functional>
#include <iostream>

struct MyObject
{
  //int &_i;
  std::reference_wrapper<int> _i;
  MyObject(int &i):_i(i) {}
};

int main() {
  std::vector<MyObject> vec;
  int i1 = 3;
  int i2 = 4;
  MyObject c1(i1);
  MyObject c2(i2);

  /* Storing object. */
  vec.push_back(c1);

  /* Assigning to it. */
  vec[0] = c2;

  /* Confirming that it's the correct object now. */
  for (const MyObject &it : vec)
    std::cout << it._i << std::endl;

  /* Modifying the value of its internal reference. */
  vec[0]._i.get() = 5;
  /* Confirming that the original int changed value indeed. */
  std::cout << "i2 == " << i2 << std::endl;

  return 0;
} 
```

**警告：**现有代码可能已经包含对引用成员的直接分配（即`_i`上面代码中调用的成员）。这些分配旨在更改引用所指对象的值。当用 a 替换引用时`std::reference_wrapper`，所有直接赋值`_i = x`必须用 替换`_i.get() = x`，否则程序的语义会完全改变。

（编辑）如果使用的引用是 const-references `const T&`，`std::reference_wrapper<const T>`可以使用 a 。使用上面的示例，`MyObject`then 的定义更改为：

```
struct MyObject
{
  std::reference_wrapper<const int> _i;
  MyObject(const int &i):_i(i) {}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:14:54.257

为什么不让“MyObject”可赋值？您可以覆盖运算符“=”，因此“myVector[1] = object1”将是可行的。

# c++ - OpenGL ES(EGL) 与 eglCreatePbufferSurface 和 eglCreatePixmapSurface 的区别

> ID：12906971
> 
> 赞同：4
> 
> 时间：2012-10-16T03:07:03.527
> 
> 标签：c++, opengl-es, opengl-es-2.0, egl

我遇到了一个问题，我需要通过软件渲染使用 opengl es2 进行一些屏幕外工作（只有 CPU，没有 GPU）。问题是我可以在没有 GPU 的情况下使用 pbuffer 吗？另外，如何在绘制后直接保存为 png 文件。请帮助并给我一个演示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T07:11:06.563

首先，使用 EGL 创建一个离屏缓冲区：

```
eglCreatePbufferSurface(display, config, PBufAttribs); 
```

然后读取缓冲区：

```
 GLint size;
   size = esContext->width * esContext->height * 4;
   GLubyte *data = (GLubyte*)malloc(size);
   glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
   glReadPixels(0,0,esContext->width,esContext->height,GL_RGB,GL_UNSIGNED_BYTE,data); 
```

最后保存到像素缓冲区到 bmp 文件。（提醒：在24位bmp图像中，顺序是BGR，而不是RGB；所以需要将图像数据从BGR切换到RGB。）

# css - 样式表错误

> ID：12906978
> 
> 赞同：-3
> 
> 时间：2012-10-16T03:07:54.057
> 
> 标签：css, html

当我验证“http://validator.w3.org/check”上的代码时

我得到3个错误，我不知道为什么？这是一个样式表（css）。下面是代码：

```
body { background-color: #ffffcc;
     color: #330000;
     font-family: Arial, Verdana, sans-serif; }

h1 { background-color: ccaa66;   
     color: #000000;text-align: center;
     line-height: 200%;}

#Nav {text-align: center:}
#footer {background-color: #ccaa66;
        color: #000000;
                font-size: .60em;
        text-align: center;
        font-style: italic;}
#wrapper {margin-left: auto;
        margin-right: auto;
        width: 80%;} 
```

三个错误是：

第 1 行，第 1 列：序言中不允许使用字符“b”

第 11 行，第 3 列：序言中不允许使用字符“c”

第 17 行，第 15 列：序言中的文档结尾

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T03:10:13.913

您链接到一个 HTML 验证器。您的意思是链接到[CSS 验证器](http://jigsaw.w3.org/css-validator/)吗？

# share - 跟踪特定 Facebook 用户对共享内容的点击次数

> ID：12906981
> 
> 赞同：1
> 
> 时间：2012-10-16T03:08:20.760
> 
> 标签：share, facebook-apps

是否可以跟踪特定 Facebook 用户对共享内容的点击次数？

例如

人 A 将外部网站上的一篇文章分享到他的 Facebook 时间线上。B 人和 C 人点击链接。即使他们多次点击，也被认为是 2 次点击。

要实现这一点，有哪些可能性？开发脸书应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T15:30:34.477

我在想是否可以为共享按钮创建动态链接，然后使用 $facebook->getUser(); 要获取用户 ID，我可以在动态 url 中添加一个尾部，例如 &ref=userid。

# java - 这有什么问题会返回以下错误？

> ID：12906982
> 
> 赞同：0
> 
> 时间：2012-10-16T03:08:33.057
> 
> 标签：java

```
package data_structures;

import java.util.StringTokenizer;

public class ExpressionEvaluator implements Stack, Queue {
    private String userInput;
    public ExpressionEvaluator() {
        Userinput = null;
    }

    Iterator<E> st = new StringTokenizer();
    token = st.next();
    while (st.hasMoreTokens()) { 
```

此时问题已经发生，所以我不再继续代码

错误：

```
data_structures/ExpressionEvaluator.java:10: illegal start of typejava
while (st.hasMoreTokens()) {
^
data_structures/ExpressionEvaluator.java:10: <identifier> expected
while (st.hasMoreTokens()) {
^
data_structures/ExpressionEvaluator.java:10: ';' expected
while (st.hasMoreTokens()) {
^
data_structures/ExpressionEvaluator.java:10: illegal start of type
while (st.hasMoreTokens()) {
^
data_structures/ExpressionEvaluator.java:10: <identifier> expected
while (st.hasMoreTokens()) {
^
data_structures/ExpressionEvaluator.java:10: ';' expected
while (st.hasMoreTokens()) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T03:09:56.847

以下代码应在方法内。不是直接在类内。

```
Iterator<E> st = new StringTokenizer();
    token = st.next();
    while (st.hasMoreTokens()) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T03:11:35.020

本节

```
Iterator<E> st = new StringTokenizer();
token = st.next();
while (st.hasMoreTokens()) { 
```

不是用方法或静态初始化器。所有代码必须出现在类内的方法中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T03:16:51.437

如下更新您的构造函数，因为变量命名不正确：

```
 public ExpressionEvaluator() {
      userInput = null;
  } 
```

**在某些方法**中移动下面的代码（更新）构造函数代码，因为它不能独立存在，例如

```
public void evaluate(){
   StringTokenizer st = new StringTokenizer(userInput);
   while (st.hasMoreTokens()) {
      String token = st.nextToken();
      //manage your processing logic here
   }
} 
```

# android - 即使调用 removeAllViews () 添加的视图也不会被删除

> ID：12906992
> 
> 赞同：0
> 
> 时间：2012-10-16T03:10:00.103
> 
> 标签：android, textview, android-linearlayout, android-relativelayout

即使在调用 removeAllviews() 之后，我在删除视图时也面临问题。onclick textView 我正在将 textView 和 imageView 添加到布局中。下次当我单击 textView 时，先前存在的 textview 和 imageview 没有被删除，并且尽管调用了 removeAllViews()，但仍会附加新闻。

任何帮助表示赞赏。

代码是

活动代码

```
 public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.check);

            content=(LinearLayout)findViewById(R.id.content);
            today=(TextView)findViewById(R.id.today);
            tomorrow=(TextView)findViewById(R.id.tomorrow);

            today.setOnClickListener(new TextView.OnClickListener() {                  

                @Override                 
                public void onClick(View v) {                     
                    // TODO Auto-generated method stub  
                    //Toast.makeText(ToDo.this, "Before"+content.getChildCount(), Toast.LENGTH_LONG).show();      
                    content.removeAllViews();                      
                    inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);     
                    int id=0;                                              
                    for (int idx = 0; idx < 4; idx++) {                             
                        id = idx + 1;                             
                        rel = (RelativeLayout) inflater.inflate(R.layout.data, null); 
                        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);                             
                        params.setMargins(0, 50, 0, 0);                             
                        txt = (TextView) rel.findViewById(R.id.txt);                             
                        txt.setText("AAA"+idx);                              
                        img = (ImageView) rel.findViewById(R.id.img);                             
                        img.setImageResource(R.drawable.stub);                             
                        img.setId(id);                              
                        img.setOnClickListener(new ImageView.OnClickListener() {                                  
                            @Override                                 
                            public void onClick(View v) {                                     
                                // TODO Auto-generated method stub                                     
                                Toast.makeText(ToDo.this,"Selected" + v.getId(),Toast.LENGTH_LONG).show();       
                                }                             
                            });                              
                        content.addView(rel, params);                          
                        }                                           
                    content.setVisibility(View.VISIBLE);                     
                    Toast.makeText(ToDo.this, ""+content.getChildCount(), Toast.LENGTH_LONG).show();                                      
                    }             
                });         

            tomorrow.setOnClickListener(new TextView.OnClickListener() {                  

                @Override                 
                public void onClick(View v) {                     
                    // TODO Auto-generated method stub  
                    //Toast.makeText(ToDo.this, "Before"+content.getChildCount(), Toast.LENGTH_LONG).show();      
                    content.removeAllViews();                      
                    inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);     
                    int id=0;                                              
                    for (int idx = 0; idx < 4; idx++) {                             
                        id = idx + 1;                             
                        rel = (RelativeLayout) inflater.inflate(R.layout.data, null); 
                        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);                             
                        params.setMargins(0, 50, 0, 0);                             
                        txt = (TextView) rel.findViewById(R.id.txt);                             
                        txt.setText("Tomo"+idx);                              
                        img = (ImageView) rel.findViewById(R.id.img);                             
                        img.setImageResource(R.drawable.stub);                             
                        img.setId(id);                              
                        img.setOnClickListener(new ImageView.OnClickListener() {                                  
                            @Override                                 
                            public void onClick(View v) {                                     
                                // TODO Auto-generated method stub                                     
                                Toast.makeText(ToDo.this,"Selected" + v.getId(),Toast.LENGTH_LONG).show();       
                                }                             
                            });                              
                        content.addView(rel, params);                          
                        }                                           
                    content.setVisibility(View.VISIBLE);                     
                    Toast.makeText(ToDo.this, ""+content.getChildCount(), Toast.LENGTH_LONG).show();                                      
                    }             
                });         
            } 
```

检查.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="250dp"
        android:id="@+id/whiteboard"
        android:layout_height="300dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="60dp"
        android:background="#FFFFFF" >

        <Button
            android:id="@+id/add"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_marginBottom="17dp"
            android:layout_marginLeft="20dp"
            android:text="Add" />

        <View
            android:id="@+id/bottomseperator"
            android:layout_width="200dp"
            android:layout_height="1dp"
            android:layout_above="@+id/add"
            android:layout_alignLeft="@+id/add"
            android:layout_marginBottom="10dp"
            android:background="#000000" />

        <View
            android:id="@+id/topseperator"
            android:layout_width="220dp"
            android:layout_height="1dp"
            android:layout_marginTop="35dp"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:background="#000000" />

        <TextView android:id="@+id/day"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="20dp"
            android:layout_marginTop="8dp"
            android:textSize="15sp"
            android:text="Day :"/>

        <TextView
            android:id="@+id/today"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/day"
            android:layout_alignBottom="@+id/day"
            android:layout_toRightOf="@+id/day"
            android:textSize="15sp"
            android:text="Today /" />

        <TextView
            android:id="@+id/tomorrow"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/today"
            android:layout_alignBottom="@+id/today"
            android:layout_toRightOf="@+id/today"
            android:textSize="15sp"
            android:text="Tomorrow /" />

         <TextView
            android:id="@+id/custom"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBaseline="@+id/tomorrow"
            android:layout_alignBottom="@+id/tomorrow"
            android:layout_toRightOf="@+id/tomorrow"
            android:textSize="15sp"
            android:text="Custom" />

         <ScrollView android:id="@+id/contenntscroll"
             android:layout_width="200dip"
             android:layout_height="200dip"
             android:layout_alignBottom="@+id/whiteboard"
             android:layout_alignTop="@+id/whiteboard"
             android:layout_marginLeft="20dp"
             android:layout_marginTop="10dp"
             android:layout_below="@+id/topseperator"
             android:isScrollContainer="false"
             android:scrollbars="none">

              <LinearLayout
                android:id="@+id/content"
                android:layout_width="200dp"
                android:layout_height="300dp"
                android:layout_marginTop="30dp"
                android:orientation="vertical" >
            </LinearLayout>
         </ScrollView>
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:33:31.277

这可能是问题，但我不确定，

在**“今天”视图的 onClickListener 中，您****设置 id**的逻辑是错误的。

尝试使用以下，

```
id = idx + 4; // idx can be 0, 1, 2, 3... and id can be 4, 5, 6, 7...<br/> 
```

您使用的逻辑会覆盖可能会混淆操作系统的 ImageViews 和 TextViews 的 id。

* * *

如果这不能解决问题，请尝试在日志中打印，

```
Log.d("ChildCount", "content child count:" + content.getChildCount()); 
```

之前

```
 content.removeAllViews(); 
```

并用它更新你的问题......

# c# - C# XmlTextReader，忽略 DTD 处理

> ID：12906993
> 
> 赞同：1
> 
> 时间：2012-10-16T03:10:00.823
> 
> 标签：c#, .net, xml, dtd, xmltextreader

我有这个方法：

```
public void XmlTagCounter(string xmlPath, List<string> elements, List<int> elemCount)
{
    XmlTextReader reader = new XmlTextReader(xmlPath);

    try
    {
        while (reader.Read())
        {
            if (reader.NodeType == XmlNodeType.Element)
            {
                if (elements.Exists(x => x == reader.Name))
                {
                    string curElem = elements.Find(x => x == reader.Name);
                    int index = elements.IndexOf(curElem);
                    elemCount[index]++;
                }

                else
                {
                    elements.Add(reader.Name);
                    elemCount.Add(1);
                }
            }
        }
    }

    finally
    {
        reader.Close();
    }
} 
```

我计算了 XML 中使用的所有标签。但是我有一些问题，我想忽略 DTD 处理。因为 pathFolder 上缺少 DTD，它总是返回一些异常，所以我不想捕获该异常。如何忽略 XmlTextreader 中的 DtdProcessing？

感谢您所有的帮助。

# c - 通过 TCP 传输 RSA 加密数据的最佳方式？

> ID：12906997
> 
> 赞同：1
> 
> 时间：2012-10-16T03:10:20.980
> 
> 标签：c, openssl

我正在使用 OpenSSL 在 C 中实现解密混合网络。

我已经使用 EVP_SealInit、EVP_SealUpdate 和 EVP_SealFinal 加密了数据。然后我想通过 TCP 将这些数据传输到一个开放端口（第一个“混合”）。

EVP_SealInit 等是加密要通过 TCP 发送的消息字符串的最佳方式吗？

如果是这种情况，我如何通过此连接传输 IV？我的意思是：我可以想到几种方法，但我想如果我只是将它与消息一起传输，我想我看不出有 IV 的意义。是否可以将 IV 设置为某个值，例如全零？我该怎么做呢？

如果有帮助，我很乐意发布代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T05:21:11.457

您需要一些可以称为协议的东西。就其术语而言，您将知道何时发送数据、何时发送 IV 等。

如果您的会话密钥每次都是随机的（EVP_Seal ... 提供），IV 也可以为零。