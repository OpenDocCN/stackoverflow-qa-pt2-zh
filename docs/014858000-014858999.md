# StackOverflow 问答 14858000-14858999

# python - 守护进程模式下的芹菜

> ID：14858000
> 
> 赞同：4
> 
> 时间：2013-02-13T16:19:20.663
> 
> 标签：python, celery

我使用 GNU screen 在控制台模式下运行 Celery，但我不想在生产服务器上使用它。我想知道如何守护芹菜。

我有 celery 的 virtualenv 设置。我想`%venv%/bin/celeryd`在守护程序模式下运行。我试过`./celeryd start`并得到：

```
Unrecognized command line arguments: start 
```

我还应该尝试以守护程序模式运行它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-03T12:19:46.007

试试这个**/etc/init.d/celeryd**脚本。

```
#!/bin/sh -e
### BEGIN INIT INFO
# Provides:          celeryd
# Required-Start:    $network $local_fs $remote_fs
# Required-Stop:     $network $local_fs $remote_fs
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: celery task worker daemon
### END INIT INFO

# ============================================
#  celeryd - Starts the Celery worker daemon.
# ============================================
#
# :Usage: /etc/init.d/celeryd {start|stop|force-reload|restart|try-restart|status}
# :Configuration file: /etc/default/celeryd
#
# See http://docs.celeryproject.org/en/latest/tutorials/daemonizing.html#generic-init-scripts

# some commands work asyncronously, so we'll wait this many seconds
SLEEP_SECONDS=5

DEFAULT_PID_FILE="/var/run/celery/%n.pid"
DEFAULT_LOG_FILE="/var/log/celery/%n.log"
DEFAULT_LOG_LEVEL="INFO"
DEFAULT_NODES="celery"
DEFAULT_CELERYD="-m celery.bin.celeryd_detach"

CELERY_DEFAULTS=${CELERY_DEFAULTS:-"/etc/default/celeryd"}

test -f "$CELERY_DEFAULTS" && . "$CELERY_DEFAULTS"

# Set CELERY_CREATE_DIRS to always create log/pid dirs.
CELERY_CREATE_DIRS=${CELERY_CREATE_DIRS:-1}
CELERY_CREATE_RUNDIR=$CELERY_CREATE_DIRS
CELERY_CREATE_LOGDIR=$CELERY_CREATE_DIRS
if [ -z "$CELERYD_PID_FILE" ]; then
    CELERYD_PID_FILE="$DEFAULT_PID_FILE"
    CELERY_CREATE_RUNDIR=1
fi
if [ -z "$CELERYD_LOG_FILE" ]; then
    CELERYD_LOG_FILE="$DEFAULT_LOG_FILE"
    CELERY_CREATE_LOGDIR=1
fi

CELERYD_LOG_LEVEL=${CELERYD_LOG_LEVEL:-${CELERYD_LOGLEVEL:-$DEFAULT_LOG_LEVEL}}
CELERYD_MULTI=${CELERYD_MULTI:-"celeryd-multi"}
CELERYD=${CELERYD:-$DEFAULT_CELERYD}
CELERYD_NODES=${CELERYD_NODES:-$DEFAULT_NODES}

export CELERY_LOADER

if [ -n "$2" ]; then
    CELERYD_OPTS="$CELERYD_OPTS $2"
fi

CELERYD_LOG_DIR=`dirname $CELERYD_LOG_FILE`
CELERYD_PID_DIR=`dirname $CELERYD_PID_FILE`

# Extra start-stop-daemon options, like user/group.
SUDOCMD=""
if [ -n "$CELERYD_USER" ]; then
    #DAEMON_OPTS="$DAEMON_OPTS --uid=$CELERYD_USER"
    SUDOCMD="sudo -u $CELERYD_USER "
    CELERYD_MULTI="$SUDOCMD $CELERYD_MULTI"
fi
if [ -n "$CELERYD_GROUP" ]; then
    DAEMON_OPTS="$DAEMON_OPTS --gid=$CELERYD_GROUP"
fi

if [ -n "$CELERYD_CHDIR" ]; then
    DAEMON_OPTS="$DAEMON_OPTS --workdir=$CELERYD_CHDIR"
fi

check_dev_null() {
    if [ ! -c /dev/null ]; then
        echo "/dev/null is not a character device!"
        exit 75  # EX_TEMPFAIL
    fi
}

maybe_die() {
    if [ $? -ne 0 ]; then
        echo "Exiting: $* (errno $?)"
        exit 77  # EX_NOPERM
    fi
}

create_default_dir() {
    if [ ! -d "$1" ]; then
        echo "- Creating default directory: '$1'"
        mkdir -p "$1"
        maybe_die "Couldn't create directory $1"
        echo "- Changing permissions of '$1' to 02755"
        chmod 02755 "$1"
        maybe_die "Couldn't change permissions for $1"
        if [ -n "$CELERYD_USER" ]; then
            echo "- Changing owner of '$1' to '$CELERYD_USER'"
            chown "$CELERYD_USER" "$1"
            maybe_die "Couldn't change owner of $1"
        fi
        if [ -n "$CELERYD_GROUP" ]; then
            echo "- Changing group of '$1' to '$CELERYD_GROUP'"
            chgrp "$CELERYD_GROUP" "$1"
            maybe_die "Couldn't change group of $1"
        fi
    fi
}

check_paths() {
    if [ $CELERY_CREATE_LOGDIR -eq 1 ]; then
        create_default_dir "$CELERYD_LOG_DIR"
    fi
    if [ $CELERY_CREATE_RUNDIR -eq 1 ]; then
        create_default_dir "$CELERYD_PID_DIR"
    fi
}

create_paths() {
    create_default_dir "$CELERYD_LOG_DIR"
    create_default_dir "$CELERYD_PID_DIR"
}

export PATH="${PATH:+$PATH:}/usr/sbin:/sbin"

_get_pid_files() {
    [ ! -d "$CELERYD_PID_DIR" ] && return
    echo `ls -1 "$CELERYD_PID_DIR"/*.pid 2> /dev/null`
}

stop_workers () {
    $CELERYD_MULTI stopwait $CELERYD_NODES --pidfile="$CELERYD_PID_FILE"
    sleep $SLEEP_SECONDS
}

start_workers () {
    $CELERYD_MULTI start $CELERYD_NODES $DAEMON_OPTS        \
                         --pidfile="$CELERYD_PID_FILE"      \
                         --logfile="$CELERYD_LOG_FILE"      \
                         --loglevel="$CELERYD_LOG_LEVEL"    \
                         --cmd="$CELERYD"                   \
                         $CELERYD_OPTS &
    sleep $SLEEP_SECONDS
}

restart_workers () {
    $CELERYD_MULTI restart $CELERYD_NODES $DAEMON_OPTS      \
                           --pidfile="$CELERYD_PID_FILE"    \
                           --logfile="$CELERYD_LOG_FILE"    \
                           --loglevel="$CELERYD_LOG_LEVEL"  \
                           --cmd="$CELERYD"                 \
                           $CELERYD_OPTS &
    sleep $SLEEP_SECONDS
}

check_status () {
    local pid_files=
    pid_files=`_get_pid_files`
    [ -z "$pid_files" ] && echo "celeryd not running (no pidfile)" && exit 1

    local one_failed=
    for pid_file in $pid_files; do
        local node=`basename "$pid_file" .pid`
        local pid=`cat "$pid_file"`
        local cleaned_pid=`echo "$pid" | sed -e 's/[^0-9]//g'`
        if [ -z "$pid" ] || [ "$cleaned_pid" != "$pid" ]; then
            echo "bad pid file ($pid_file)"
        else
            local failed=
            kill -0 $pid 2> /dev/null || failed=true
            if [ "$failed" ]; then
                echo "celeryd (node $node) (pid $pid) is stopped, but pid file exists!"
                one_failed=true
            else
                echo "celeryd (node $node) (pid $pid) is running..."
            fi
        fi
    done

    [ "$one_failed" ] && exit 1 || exit 0
}

case "$1" in
    start)
        check_dev_null
        check_paths
        start_workers
    ;;

    stop)
        check_dev_null
        check_paths
        stop_workers
    ;;

    reload|force-reload)
        echo "Use restart"
    ;;

    status)
        check_status
    ;;

    restart)
        check_dev_null
        check_paths
        restart_workers
    ;;
    try-restart)
        check_dev_null
        check_paths
        restart_workers
    ;;
    create-paths)
        check_dev_null
        create_paths
    ;;
    check-paths)
        check_dev_null
        check_paths
    ;;
    *)
        echo "Usage: /etc/init.d/celeryd {start|stop|restart|kill|create-paths}"
        exit 64  # EX_USAGE
    ;;
esac

exit 0 
```

我的示例**/etc/default/celeryd**用于虚拟环境中的芹菜。

```
# Name of nodes to start
# here we have a single node
CELERYD_NODES="w1"
# or we could have three nodes:
#CELERYD_NODES="w1 w2 w3"

ENV_MY="/home/stoyanov/wsapp"
CELERYD="$ENV_MY/bin/celeryd"
CELERYD_MULTI="$ENV_MY/bin/celeryd-multi"
CELERYCTL="$ENV_MY/bin/celeryctl"

# Where to chdir at start.
CELERYD_CHDIR="$ENV_MY/wslib/"
ENV_PYTHON="$ENV_MY/bin/python"
# Extra arguments to celeryd
CELERYD_OPTS="--app=PriceProviders --loglevel=WARNING --events --autoreload"
#"--time-limit=300 --concurrency=8"

# %n will be replaced with the nodename.
CELERYD_LOG_FILE="/var/log/celery/%n.log"
CELERYD_PID_FILE="/var/run/celery/%n.pid"
CELERY_CREATE_RUNDIR=0
CELERY_CREATE_LOGDIR=0

# Workers should run as an unprivileged user.
CELERYD_USER="stoyanov"
#CELERYD_GROUP="stoyanov" 
```

# python - 从多个列表中生成一个项目的每个组合

> ID：14858003
> 
> 赞同：3
> 
> 时间：2013-02-13T16:19:34.377
> 
> 标签：python, list, combinations

我想获取数量不定、长度不定的列表，并从每个列表中生成一个元素的每个可能组合。为了效率，我的目的是简单地迭代每个组合，而不是存储结果是可以接受的。

例如，以下列表列表：

```
[['A','B','C'],['w','x','y','z'],[1,2]] 
```

会成为：

```
['A','w',1],['A','w',2],['A','x',1],['A','x',2],...,['C','z',1],['C','z',2] 
```

不完全是 zip，也不完全是 itertools.permutation()... 如果您提前知道列表的数量，这样做很容易，但在这种情况下我不会。我确信我可以为此提供一个递归解决方案，但也许这已经解决了。有什么见解吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T16:20:50.733

[itertools.product](http://docs.python.org/2/library/itertools.html#itertools.product)是适合您的工具

```
>>> some_list = [['A','B','C'],['w','x','y','z'],[1,2]]
>>> list(itertools.product(*some_list))
[('A', 'w', 1), ('A', 'w', 2), ('A', 'x', 1), ('A', 'x', 2), ('A', 'y', 1), ('A', 'y', 2), ('A', 'z', 1), ('A', 'z', 2), ('B', 'w', 1), ('B', 'w', 2), ('B', 'x', 1), ('B', 'x', 2), ('B', 'y', 1), ('B', 'y', 2), ('B', 'z', 1), ('B', 'z', 2), ('C', 'w', 1), ('C', 'w', 2), ('C', 'x', 1), ('C', 'x', 2), ('C', 'y', 1), ('C', 'y', 2), ('C', 'z', 1), ('C', 'z', 2)] 
```

几个关键点

1.  `itertools.product`期望迭代作为参数。因此，您需要使用`splat`运算符将​​列表作为参数传递
2.  itertools.product 返回一个生成器。您需要将其转换为列表，以转储整个内容。或者，您可以迭代它或传递给期望可迭代的函数

    ```
    for e in itertools.product(*some_list):
        print e 
    ```

# java - 通过java做ssh

> ID：14858005
> 
> 赞同：1
> 
> 时间：2013-02-13T16:19:42.810
> 
> 标签：java, linux, ssh

我想通过一个java代码ssh abc@ubuntu来执行这个命令

我正在使用此代码，但它不能完全工作，它没有登录到服务器。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

public class JavaApplication4 {

/**
 * @param args the command line arguments
 */
    public static void main(String[] args) throws IOException, InterruptedException {
    // TODO code application logic here
    ProcessBuilder pb = new ProcessBuilder("ssh","usmanmahmood@ubuntu");
//pb.redirectErrorStream(); //redirect stderr to stdout 
Process process = pb.start();
InputStream inputStream = process.getInputStream();
BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));
String line = null;
while((line = reader.readLine())!= null) {
    System.out.println(line);
}

    int waitFor = process.waitFor();

   } 

   } 
```

请告诉我错误，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:23:38.507

您可能正在从 Windows 机器上运行它？除非您专门添加了 ssh，否则 ssh 不是 Windows 的有效命令。大多数人会建议使用 JSCH [http://www.jcraft.com/jsch/examples/Shell.java.html](http://www.jcraft.com/jsch/examples/Shell.java.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:31:45.580

问题是您正在等待`null`来自`Reader`.

在您的情况下，`ssh`正在远程服务器的命令提示符处等待您，而您正在等待`ssh`.

尝试将要运行的命令添加到传递给 ssh 的选项中。它只会登录并运行它。

一个可能更相关的问题是，你为什么要在 Java 中这样做？为什么不写一个shell脚本呢？

# assembly - INT 13h - 扩展读取 - DAPS 故障

> ID：14858009
> 
> 赞同：1
> 
> 时间：2013-02-13T16:19:47.593
> 
> 标签：assembly, bootloader

亲爱的 Stackoverflowers，

我写了一些汇编代码，最终应该读取根目录。然而问题是扩展读取功能没有将读取的数据放在正确的位置。或者我的段和偏移量有问题。

**我从这段代码中得到的结果是：A| |，这意味着打印函数找到了一个 0，同时期望第一个扇区的一些随机值。**

我真的不知道我做错了什么了

**BIOS_ReadFile.inc**

```
;*************************************************
;   Name: BIOS_ReadFile.inc
;   Description: Reads File from the FAT32 System
;*************************************************
[bits 16]

%ifndef BIOS_READFILE.INC
%define BIOS_READFILE.INC

%include "Constants.inc"

;-----------------------------------------------------------------  
; BIOS_ReadSectors function
;-----------------------------------------------------------------
ReadStatus: db UNKNOWN              ; 0 - Not Supported, 1 - Supported,     255 - Not known at given time

BIOS_ReadSectors:
mov si, DAPS                    ; Load DAPS Struct to DS:SI
mov ah, 0x42                    ; Read Functions
int 0x13                        ; Call the interrupt
jc .Failure                     ; If the read fails.
mov byte [ReadStatus], TRUE     ; Set the ReadStatus to True
ret                             ; Return

.Failure:
mov byte [ReadStatus], FALSE    ; Set the ReadStatus to False

mov ah, 0x0E                ; Print Letter B, Gives Indication of Failure
mov bh, 0x00
mov bl, 0x07
mov al, 'B'
int 0x10

ret 
; Return

;-----------------------------------------------------------------  
; BIOS_ReadFile function
;-----------------------------------------------------------------
FirstDataSector:     dw 0x0
RootDirectorySector: dw 0x0

BIOS_ReadFile:
; Calculating the First Data Sector
xor ax, ax
mov byte al, [Bios_Parameter_Block.FATS]
mul word [Extended_Bios_Parameter_Block.LargeSectorsPerFAT]
add word ax, [Bios_Parameter_Block.ReservedSectors]
mov word [FirstDataSector], ax

; Calculating the Root Directory Sector
mov word ax, [Extended_Bios_Parameter_Block.RootDirectory]
sub word ax, 2
mul byte [Bios_Parameter_Block.SectorsPerCluster]
add word ax, [FirstDataSector]
mov word [RootDirectorySector], ax

; Load Directory
;mov word [DAPS.SectorsToRead], 1

;mov word ax, [RootDirectorySector]
;mov word [DAPS.SectorStart], ax

call BIOS_ReadSectors

mov ah, 0x0E                ; Print Letter A, Gives Indication of Failure
mov bh, 0x00
mov bl, 0x07
mov al, 'A'
int 0x10

ret

;-----------------------------------------------------------------  
; Memory Data Structures and Other Variables
;-----------------------------------------------------------------
; Disk Address Packet Structure (Used For Loading Rest of OS)
DAPS:            db 0x10               ; Size of Structure (16 bytes)
                 db 0                  ; Always 0
.SectorsToRead   dw 1                  ; Number of Sectors to Read (1x512)
.Offset          dw 0x7E00             ; Offset to load to.
.Segment         dw 0x0000             ; Segment to load to.
.SectorStart     dq 0                  ; Read from Second Block

;----------------------------------------------------------------------------------------------------

%endif 
```

**引导加载程序.asm**

```
[bits 16]
[org 0x0]

jmp Start

%include "BIOS_Parameter_Block.inc"
%include "BIOS_Extensions.inc"
%include "BIOS_ReadFile.inc"
%include "Print.inc"

; Prepare stack segment
;-----------------------------------------------------------------
Start:
cli
mov ax, 0x07C0
mov ds, ax                  ; Load segments with 0
mov fs, ax
mov es, ax
mov gs, ax

mov     ax, 0x0000              ; set the stack
mov     ss, ax
mov     sp, 0xFFFF
mov     bp, 0xFFFF
sti

; Check support for extensions
;-----------------------------------------------------------------
call CheckExtensions
cmp byte [ExtensionsSupported], FALSE
jz short unsupported

; Read from the device.
;-----------------------------------------------------------------
call BIOS_ReadFile

mov ah, 0x0E                ; Print Letter B, Gives Indication of Failure
mov bh, 0x00
mov bl, 0x07
mov al, '|'
int 0x10

mov si, 0x200
call PrintString

mov ah, 0x0E                ; Print Letter B, Gives Indication of Failure
mov bh, 0x00
mov bl, 0x07
mov al, '|'
int 0x10

cli
hlt

jmp 0x0:0x7E00                  ; Jump to main

; Errors 
;-----------------------------------------------------------------
unsupported:
mov ah, 0x0E                ; Print Letter F, Gives Indication of Failure
mov bh, 0x00
mov bl, 0x07
mov al, 'F'
int 0x10

clc
hlt 

; Fill Out Rest of Bootloader
;-----------------------------------------------------------------
times 510-($-$$) db 0

db 0x55, 0xAA               ; Add Boot Record Signature 
```

**印刷公司**

```
;*************************************************
;   Name: Print.inc
;   Description: Printing on console using INT 10h
;   Function: PrintString(DS::SI nullTerminatedString)
;*************************************************
[bits 16]

%ifndef PRINT.INC
%define PRINT.INC

;---------------------------------------------------------------------------------
PrintString: 
lodsb               ; Load next byte from DI::SI to AL and increment SI by one
or  al, al          ; Null-Terminator check
jz  .Done           ; If found jump to end
mov ah, 0Eh         ; Move Function number in AH
int 10h             ; Else print character
jmp PrintString     ; Repeat until null terminator found

.Done:
mov ah, 0x0E                ; Print Letter B, Gives Indication of Failure
mov bh, 0x00
mov bl, 0x07
int 0x10

ret                 ; Return
;--------------------------------------------------------------------------------- 
```

％万一

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T19:54:34.177

最终结果是我不得不在读取函数之前放置“mov dl，0x80”。我仍然不知道为什么在启动过程开始时，根据大多数规范，DL 应该具有正确的驱动器号。

# twitter-bootstrap - Bootstrap Carousel，根据屏幕大小显示不同数量的项目

> ID：14858011
> 
> 赞同：1
> 
> 时间：2013-02-13T16:19:53.927
> 
> 标签：twitter-bootstrap, carousel

我正在使用[Bootstrap 的 Carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)创建一个显示一堆[Highcharts](http://www.highcharts.com/)小部件的仪表板。我已经成功实现了它，因此显示了 1 个图表并使用了一些“分块”逻辑一次显示 2 个小部件。这一切都很好，但我想增强一些东西：

1.  如果用户的屏幕尺寸足以容纳 2 个图表，则显示 2 个图表并按 2 分页。
2.  如果用户的屏幕尺寸很小，只适合 1 个图表，则显示 1 并按 1 分页。
3.  如果用户的屏幕尺寸 < 2 up，但 > 1，则显示 1.5 个图表并按 1 分页。

我正在使用 AngularJS 来构建 HTML。在单独的模板块中执行 #1 和 #2 很容易，然后根据屏幕大小显示/隐藏。但是，我对#3 有点困惑。我不知道如何显示 2 个图表，但只能分页 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:05:04.073

我最终编写了以下 JavaScript 来执行此操作。基本上，我正在渲染两个不同的部分（使用 .oneup 和 .twoup 类），然后在显示 .oneup 时添加“预览”。

```
<script type="text/javascript">
var chartBar = $('#chart-bar');

function chartPreview(firstChart) {
    var chartBarWidth = chartBar.width();
    if (chartBarWidth > 600) {
        var currentChart = $('.carousel-inner:visible .active');
        // append the next widget to the current item
        var chartToCheck = (firstChart) ? currentChart : currentChart.next();

        if (chartToCheck.next()) {
            chartToCheck.next().find('.widget').clone().appendTo(chartToCheck);
            $('.carousel-inner').css({'margin-left': '10px', 'width': '98.8%'})
        }
    } else if (chartBarWidth > 1040) {
        $('.carousel-inner').css({'margin-left': '0', 'width': '100%'})
    }
}
$(document).ready(function() {
    $('.widgets').sortable({
        cursor: "move",
        handle: ".heading"
    }).disableSelection();
    $('.boxes,.tasks').sortable();

    var carousel = $('.carousel');
    $(carousel).carousel({
        interval: 0
    });

    if (chartBar.width() < 1040) {
        chartBar.find('.oneup').show();
        chartPreview(true);

        carousel.bind('slide', function() {
            chartPreview(false);
        });
    } else {
        chartBar.find('.twoup').show();
    }
}); 
```

如果我不必同时渲染 oneup 和 twoup 那就太好了，但我不确定如何使用 AngularJS 来做到这一点。这是我的一个 ng-repeat：

```
<div class="carousel-inner">
    <div class="item chart"
         ng-repeat="widget in widgets | filter: {type: 'chart'} | orderBy: 'order'"
         ng-class="{active: $index == 0}">
        <chart class="widget" value="{{widget}}" type="{{widget.chartType}}"></chart>
    </div>
</div> 
```

与 twoup ng-repeat 相比：

```
<div class="carousel-inner">
    <div class="item chart"
         ng-repeat="widget in widgets | filter: {type: 'chart'} | chunk: 2 | orderBy: 'order'"
         ng-class="{active: $index == 0}">
        <chart class="widget" value="{{widget[0]}}" type="{{widget[0].chartType}}"></chart>
        <chart class="widget" value="{{widget[1]}}" type="{{widget[1].chartType}}"></chart>
    </div>
</div> 
```

# java - 如何使用 for 循环返回存储在数组中的打印行值

> ID：14858015
> 
> 赞同：-1
> 
> 时间：2013-02-13T16:20:08.983
> 
> 标签：java, arrays, for-loop

所以你可以做到这一点非常简单但很长，如下所示

```
System.out.println(myArray[1]); //This = 1.56
System.out.println(myArray[2]); //This = 1.72 
```

但是你将如何使用 for 循环来检索值并打印它们呢？所以它可能看起来像

```
for (int i = myArray[]; j < myArray.length; i++) {
    System.out.println(i);
} 
```

因此for循环将遍历数组并打印存储在其位置的所有值，例如[1] = 1.56，[2] = 1.72。你怎么能得到 for 循环来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:22:49.977

只需`myArray[i]`在循环中打印：

```
for (int i = 0; i < myArray.length; ++i) {
    System.out.println(myArray[i]);
} 
```

我还必须修复你的循环变量。

另一种方法是使用“for each”循环：

```
for (double val : myArray) {
    System.out.println(val);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T16:22:58.857

只需更改代码中的几件事即可为您提供答案：

```
for (int i = 0; i < myArray.length; i++) {
    System.out.println(myArray[i]);
} 
```

这最初设置 i = 0 ，只要 i 小于数组的长度，就会循环，并且每次迭代都会增加 i 。这将使 i 从 0 ... (myArray.length - 1) 开始，并打印所有值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T16:23:45.117

```
int[] myArray ={1,3,2};
for (int i : myArray) {
    System.out.println(i);
} 
```

你的意思是这样的使用 for-each 循环？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T16:26:17.360

使用[Formatter](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)以您想要的方式打印，并简单`for`地从数组中获取值。

```
for (int i = 0; i < myArray.length; i++) {
    System.out.format("[%d] = %.2f\n", i, myArray[i]);
} 
```

`{1.567, 1.444, ...}`对于像它将打印的数组

```
[0] = 1.57
[1] = 1.44 
```

您可以根据需要修改格式。

# c++ - 使用升压波

> ID：14858017
> 
> 赞同：7
> 
> 时间：2013-02-13T16:20:18.150
> 
> 标签：c++, boost, c-preprocessor

我正在努力解决助推波，到目前为止，我的运气并不好。

我尝试了网站上的示例代码。它在下面：

```
#include <iostream>
#include <iomanip>
#include <fstream>
#include <string>
#include <vector>

///////////////////////////////////////////////////////////////////////////////
//  Include Wave itself
#include <boost/wave.hpp>

///////////////////////////////////////////////////////////////////////////////
// Include the lexer stuff
#include <boost/wave/cpplexer/cpp_lex_token.hpp>    // token class
#include <boost/wave/cpplexer/cpp_lex_iterator.hpp> // lexer class

int main () {
    // The following preprocesses a given input file.
    // Open the file and read it into a string variable
    std::ifstream instream("lex_infile");
    std::string input(
        std::istreambuf_iterator<char>(instream.rdbuf()),
        std::istreambuf_iterator<char>());

    // The template boost::wave::cpplexer::lex_token<> is the  
    // token type to be used by the Wave library.
    // This token type is one of the central types throughout 
    // the library, because it is a template parameter to some 
    // of the public classes and templates and it is returned 
    // from the iterators.
    // The template boost::wave::cpplexer::lex_iterator<> is
    // the lexer iterator to use as the token source for the
    // preprocessing engine. In this case this is parametrized
    // with the token type.
    typedef boost::wave::cpplexer::lex_iterator<
            boost::wave::cpplexer::lex_token<> >
        lex_iterator_type;
    typedef boost::wave::context<
            std::string::iterator, lex_iterator_type>
        context_type;

    context_type ctx(input.begin(), input.end(), "lex_infile");

    // At this point you may want to set the parameters of the
    // preprocessing as include paths and/or predefined macros.
        //ctx.add_include_path("...");
        //ctx.add_macro_definition(...);

    // Get the preprocessor iterators and use them to generate 
    // the token sequence.
    context_type::iterator_type first = ctx.begin();
    context_type::iterator_type last = ctx.end();

    std::cout << "HERE" << std::endl;

    // The input stream is preprocessed for you during iteration
    // over [first, last)
        while (first != last) {
            std::cout << (*first).get_value() << std::endl;
            ++first;
        }
} 
```

它编译正常，但是当我将文件输入其中时，出现以下错误：

> 在抛出 'boost::exception_detail::clone_impl >' 的实例后调用终止
> what(): boost::wave::preprocess_exception
> Aborted

我试图“预处理”的代码位于一个名为 的文件`lex_infile`中，其内容如下：

```
#include <oglre>
#include <light>
#include <material>

in vec3 in_Position;
in vec2 in_Texture;
in vec3 in_Normal;

out vec2 textureCoord;
out vec4 pass_Color;

void main() {
    gl_Position = pvmMatrix * vec4(in_Position, 1.0);

    textureCoord = in_Texture;

    vec3 normalDirection = normalize(normalMatrix * in_Normal);
    vec3 lightDirection = normalize(vec3(lightSources[0].direction));

    vec3 diffuseReflection = vec3(lightSources[0].diffuse) * vec3(mymaterial.diffuse) * max(0.0, dot(normalDirection, lightDirection));

    /*
    float bug = 0.0;
    bvec3 result = equal( diffuseReflection, vec3(0.0, 0.0, 0.0) );
    if(result[0]) bug = 1.0;

    diffuseReflection.x += bug;
    */

    pass_Color = vec4(diffuseReflection, 1.0);
} 
```

我想我需要定义包含位置....我该怎么做呢？

对不起，如果这是简单的东西，我只是有点迷路。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T19:38:31.297

弄清楚了。

我需要扩展类`public wave::context_policies::default_preprocessing_hooks`，然后重写方法`found_unknown_directive`。

完成后，我需要将新的预处理钩子类`typedef boost::wave::context`作为模板参数传入。

它看起来像这样：

```
typedef boost::wave::context<
                std::string::iterator, 
                lex_iterator_type,
                load_file_to_string,
                custom_directives_hooks
            > context_type; 
```

和

```
class custom_directives_hooks
:   public wave::context_policies::default_preprocessing_hooks
{
public:

    template <typename ContextT, typename ContainerT>
    bool
    found_unknown_directive(ContextT const& ctx, ContainerT const& line, 
        ContainerT& pending)
    {
        typedef typename ContainerT::const_iterator iterator_type;
        iterator_type it = line.begin();
        wave::token_id id = wave::util::impl::skip_whitespace(it, line.end());

        if (id != wave::T_IDENTIFIER)
            return false;       // nothing we could do

        if (it->get_value() == "version" || it->get_value() == "extension") {
            // Handle #version and #extension directives
            std::copy(line.begin(), line.end(), std::back_inserter(pending));
            return true;
        }

        if (it->get_value() == "type") {
            // Handle type directive
            return true;
        }

        // Unknown directive
        return false;
    }
}; 
```

希望可以帮助其他遇到此问题的人。

# ios - #import 带有定义的前缀（可能是产品名称）

> ID：14858019
> 
> 赞同：0
> 
> 时间：2013-02-13T16:20:20.710
> 
> 标签：ios, objective-c, xcode

我可以导入带有预定义前缀的文件吗？

例如像这样的东西（伪代码）

`#import PRODUCT_NAME+"-Config.h"`

我想在 Xcode 中为我的应用程序设置不同的目标。每个目标都可以有自己的配置文件。但是，我希望这是自动的，因此如果该`PRODUCT_NAME`位可以是实际的目标产品名称，那将是最好的方法。

感谢你给与我的帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:28:49.963

`Other C Flags`在构建设置下为每个目标设置一个唯一的标志。然后您可以执行以下操作：

```
#if defined(TARGET1)
    #import "Target1Config.h"
#elif defined(TARGET2)
    #import "Target2Config.h"
#endif 
```

其中`TARGET1`和`TARGET2`每个仅针对相应目标的构建设置定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:30:56.960

只需为配置文件提供完全相同的名称，但将它们定位在不同的文件夹中。确保每个配置文件只勾选了相应的目标。然后就可以了`#import "Config.h"`，每次都会用到相关的Config.h。

# silverstripe - 通过 DataExtension Silverstripe3 添加选项卡

> ID：14858021
> 
> 赞同：1
> 
> 时间：2013-02-13T16:20:23.627
> 
> 标签：silverstripe

我想知道是否可以通过 DataExtension 添加选项卡？传递给 updateCMSFields 的 FieldList 参数似乎将 DataExtensions 新字段输出到详细信息选项卡上。所以我的第一次尝试是把我的领域推到那里：

```
public function updateCMSFields(FieldList $fields)  {  
    $secureFilesTab = $fields;
    $secureFilesTab->push(new HeaderField(_t('SecureFiles.GROUPACCESSTITLE', 'Group Access')));
    $secureFilesTab->push(new TreeMultiselectField('GroupPermissions', _t('SecureFiles.GROUPACCESSFIELD', 'Group Access Permissions')));
} 
```

这很好用，但是当我保存一个值时，CMS 会将 Tree_View 和 List_View 选项卡中的数据加载到详细信息选项卡上。下面的评论中提到的事实是，这是文件夹的 DataExtension。

然后我尝试使用 FormScaffolder 中的代码添加一个新选项卡：

```
public function UpdateCMSFields(FieldList $fields) {
    $fields->push(new TabSet('Root', $secureFilesTab = new Tab('Security')));
$secureFilesTab->setTitle(_t('SiteTree.TABSECURITY', 'Security'));
} 
```

这会将选项卡图标全部更改为 Tree_View 图标，并将我的新 DataExtension 字段放在所有选项卡上。

通过 DataExtension 添加选项卡的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:57:14.587

您可以使用 addFieldsToTab() 将新字段添加到现有选项卡或新选项卡，就像在 DataObjects 上使用 getCMSFields() 一样。

```
public function updateCMSFields(FieldList $fields)  {  
    if ($this->owner->ClassName != 'Folder' ){
        $fields->addFieldsToTab('Root.Security', array(
            new HeaderField(_t('SecureFiles.GROUPACCESSTITLE', 'Group Access')),
            new TreeMultiselectField('GroupPermissions', _t('SecureFiles.GROUPACCESSFIELD', 'Group Access Permissions'))
        ));     
    }
    if ($this->owner->ClassName == 'Folder' ){
        $fields->push(new HeaderField(_t('IMAFOLDER', 'I am a folder')));       
    }
} 
```

如果未找到安全选项卡，将通过传递 'Root.Security' 作为第一个参数来创建。点表示法用于创建 tabset 和 tabs 的嵌套结构。不可能简单地推送具有相同名称（“Root”）的新标签集，因为已经存在这样的标签集。如果您需要对选项卡进行进一步操作，可以使用 $fields->findOrMakeTab('TabSet.Tab') 访问它们的实例，即 $fields->findOrMakeTab('Root.Content');

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-02T14:19:00.957

我也有问题在成员扩展中启用选项卡，在功能

```
public function updateCMSFields(FieldList $fields) 
```

终于在我删除了字段顺序后它开始工作了

```
$fields->changeFieldOrder($order); 
```

试试看，也许对你有帮助。

# javascript - jQuery Masonry 可以垂直而不是水平定向 div 吗？

> ID：14858032
> 
> 赞同：4
> 
> 时间：2013-02-13T16:20:51.303
> 
> 标签：javascript, jquery, css, jquery-masonry

我希望有一个人可以帮助我。我正在使用 jQuery Masonry 在网格中对齐 div。唯一的问题是方向不适合我。

砌体对齐块，如：

```
1234
5678 
```

我需要块对齐：

```
1357
2468 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:30:14.127

我遇到了同样的问题，最终我只是切换了块，例如我将 div 3 移动到位置 2 等。无论如何，它会在不同的浏览器大小中有所不同。

# c# - 如何使用变量更改sql登录密码

> ID：14858034
> 
> 赞同：6
> 
> 时间：2013-02-13T16:20:54.377
> 
> 标签：c#, sql-server

我正在尝试使用 Alter LOGIN 更新现有 SQL 登录的密码

我知道以下作品

```
ALTER LOGIN [username1] WITH PASSWORD = 'somenewpassword123'; 
```

但是，当我尝试使用局部变量时

```
DECLARE @newpass nvarchar(max);
SET @newpass = 'P@ssw0rd12345';
ALTER LOGIN [username1] WITH PASSWORD = @newpass; 
```

这失败了。在变量中添加 [] 大括号似乎可以在 SSMS 查询编辑器中解决这个问题，但是通过在 C# 中写出查询以编程方式使用它会失败，因为上述语句具有相同的错误（PASSWORD 处的语法错误）

c# 应用程序中的代码

```
public static int UpdateSqlLoginPassword(DbContext context, string loginName, string password)
{
 try
 {
  string updatePassword =
         @"  SET NOCOUNT ON
          DECLARE @loginName AS nvarchar(max) = {0}
          DECLARE @password AS nvarchar(max) = {1}
          EXEC('
          USE master
          ALTER LOGIN ['+ @loginName + '] WITH PASSWORD = ['+ @password + ']
          ')";
  return context.Database.ExecuteSqlCommand(updatePassword, loginName, password);
 }
 catch (Exception)
 {  
  return -2;
 }
} 
```

我也尝试过对密码进行哈希处理（认为这是变量的问题），但这里的语法不被接受

```
DECLARE @newpass nvarchar(max);
SET @newpass = 'P@ssw0rd12345';
DECLARE @hashedpass varbinary(max);
SET @hashedpass = HASHBYTES('SHA1', CONVERT(nvarchar(max),@newpass));

ALTER LOGIN [newuser10] WITH PASSWORD = @hashedpass HASHED;
SELECT @hashedpass; 
```

谁能帮助我了解如何使用变量而不是固定值在 sql 中更新登录密码？

提前致谢

**更新**

根据查理的建议，我还尝试了以下方法

```
public static int UpdateSqlLoginPassword(DbContext context, string loginName, string password)
        {
            try
            {
                string updatePassword =
                    @"ALTER LOGIN [' + @loginName +'] WITH PASSWORD =  @password ";
                return context.Database.ExecuteSqlCommand(updatePassword, new SqlParameter("loginName", loginName), new SqlParameter("password", password));
            }
            catch (Exception)
            {  
               return -2;
            }
        } 
```

这仍然会生成 sqlException Incorrect Syntax new '@password'。如果我支撑参数

```
public static int UpdateSqlLoginPassword(DbContext context, string loginName, string password)
        {
            try
            {
                string updatePassword =
                    @"ALTER LOGIN [' + @loginName +'] WITH PASSWORD =  [' + @password +']";
                return context.Database.ExecuteSqlCommand(updatePassword, new SqlParameter("loginName", loginName), new SqlParameter("password", password));
            }
            catch (Exception)
            {  
               return -2;
            }
        } 
```

然后我在 PASSWORD 附近生成一个 sqlException Incorrect syntax。

**更新2**

使用 Charlie 的更新建议，我尝试使用 QuoteName 函数

```
 string sql = @"DECLARE @sql NVARCHAR(500)
              SET @sql = 'ALTER LOGIN ' + QuoteName(@loginName) +
                ' WITH PASSWORD = ' + QuoteName(@password, '''') 
                EXEC @sql";
        return context.Database.ExecuteSqlCommand(sql, new SqlParameter("loginName", loginName), new SqlParameter("password", password)); 
```

虽然查询字符串的格式似乎正确，但会引发以下 SQLException *名称 'ALTER LOGIN [newuser10] WITH PASSWORD = 't#P@ssw0rd'' 不是有效标识符。

**编辑**

经过更多阅读后，错误是由包装@sql的语法错误生成的，允许查询无错误地执行

```
 string sql = @"DECLARE @sql NVARCHAR(500)
                  SET @sql = 'ALTER LOGIN ' + QuoteName(@loginName) +
                    ' WITH PASSWORD = ' + QuoteName(@password, '''') 
                    EXEC(@sql)"; 
```

附带说明：只需构建字符串并将其运行为

```
string updatePassword = "USE MASTER ALTER LOGIN [" + loginName + "] WITH PASSWORD =  '" + password + "'";
return context.Database.ExecuteSqlCommand(updatePassword); 
```

以上也是一种变通方法，更新sql登录。虽然此代码的实现最大限度地减少了 sql 注入的可能性，但这并不是最理想的方法。

-谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T16:27:53.420

您需要在`DbContext`级别使用参数。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/5474264/how-to-pass-parameters-to-the-dbcontext-database-executesqlcommand-method)，但是，这是一个代码示例（改编自同一页面）：

```
string sql = "ALTER LOGIN @loginName WITH PASSWORD = @password";
ctx.Database.ExecuteSqlCommand(
    sql,
    new SqlParameter("loginName", loginName),
    new SqlParameter("password", password)); 
```

在此处（以及在任何地方）使用参数的目的是防止 SQL 注入攻击。鉴于您正在编写更改密码的代码，这一点尤其重要。

**更新**

ALTER LOGIN 语句不适用于变量；它必须通过动态 SQL 来完成。以下是更新代码的示例：

```
string sql = @"DECLARE @sql NVARCHAR(500)
               SET @sql = 'ALTER LOGIN ' + QuoteName(@loginName) + 
                    ' WITH PASSWORD= ' + QuoteName(@password, '''') 
               EXEC @sql ";
ctx.Database.ExecuteSqlCommand(
    sql,
    new SqlParameter("loginName", loginName),
    new SqlParameter("password", password)); 
```

请注意，我们仍然使用 SqlParameters 来防止 SQL 注入攻击。我们还使用 T-SQL 方法[QuoteName](https://stackoverflow.com/questions/5474264/how-to-pass-parameters-to-the-dbcontext-database-executesqlcommand-method)在我们生成的 SQL 中进行适当的引用；但是这种方法只是将任何`[`字符（在第一次调用中）或`'`字符（在第二次调用中）加倍。SQL注入攻击还有很多其他的载体，所以仅仅依靠`QuoteName`是不够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-02T15:54:32.107

我将上述答案与 Azure SQL 一起使用，并且在将“EXEC @sql”替换为“EXEC (@sql)”之前，我收到了“不是有效标识符”错误。请参阅[消息 203，级别 16，状态 2，不是有效标识符](https://stackoverflow.com/questions/13205827/msg-203-level-16-state-2-is-not-a-valid-identifier)

此外，我不得不使用“ALTER USER”而不是“ALTER LOGIN”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-04T07:06:56.690

在准备 SQL 查询字符串并使用 c# SQL 命令执行后，我总是收到 Invalid Identifier 错误。这是因为**QuoteName**应该在执行更改密码 sql 语句之前执行。所以我使用上述解决方案创建了存储过程，然后从 c# 调用过程，它对我有用。

```
Create procedure usp_updateSqlUsers(@loginName nVarchar(100), @pwd nvarchar(100))
as
 begin
DECLARE @sql NVARCHAR(500) 
set @sql='Alter LOGIN  '+QUOTENAME(@loginName)+' WITH 
  password=N'+ QUOTENAME(@pwd,'''')
  exec sp_sqlexec @sql

 end 
```

然后从 C# 执行

```
SqlCommand cmd = new SqlCommand("usp_updateSqlUsers", con) {CommandType = 
 CommandType.StoredProcedure};
 var passwordParam = new SqlParameter("@pwd", password);
 var sqlLoginParameter = new SqlParameter("@loginName", "SqlLoginName");
 cmd.Parameters.Add(passwordParam);
 cmd.Parameters.Add(sqlLoginParameter);
 cmd.ExecuteNonQuery(); 
```

# java - 为什么我不能在 Java 的内部类中创建枚举？

> ID：14858036
> 
> 赞同：72
> 
> 时间：2013-02-13T16:20:59.023
> 
> 标签：java, enums, nested, inner-classes

我尝试做的是：

```
public class History {
    public class State {
        public enum StateType { 
```

Eclipse 在`StateType`:上给了我这个编译错误`The member enum StateType must be defined inside a static member type`。

当我将`State`类设为静态时，错误消失了。我可以制作`State`静态，但我不明白为什么我不能`enum`在内部类中声明一个。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-02-13T16:23:47.840

`enum`定义为嵌套类型的类型始终是隐式的`static`（参见[JLS §8.9\. Enums](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9)）

您不能在非静态类型中使用静态嵌套类型（也称为“内部类”，请参阅[JLS §8.1.3。内部类和封闭实例](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.3)）。

因此，您不能`enum`在非静态嵌套类型中拥有内部类型。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-10-05T21:29:00.210

如果您声明这样的枚举：

```
enum Suit {SPADES, HEARTS, CLUBS, DIAMONDS} 
```

Java 编译器将为您综合生成以下类：

```
final class Suit extends java.lang.Enum<Suit> {
  public static final Suit SPADES;
  public static final Suit HEARTS;
  public static final Suit CLUBS;
  public static final Suit DIAMONDS;
  private static final Suit[] $VALUES;
  public static Suit[] values();
  public static Suit valueOf(java.lang.String);
  private Suit();
} 
```

除了已经在其中定义的那些静态字段之外，无意创建此类的其他实例（正如您可以从其私有构造函数中推断的那样），但最重要的是，正如接受的答案中提到的那样，内部类不能具有静态成员（[JLS §8.1.3\. Inner Classes and Enclosure Instances](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.3)），并且由于枚举合成类确实如此，因此它作为内部类是不可接受的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-30T10:08:02.917

+Joachim Sauer 已经提供了足够的信息，我只是添加了一些额外的细节。

只有当您的内部类是静态嵌套内部类时，您才能定义内部枚举。见下文

```
private static class DbResource {

    public enum DB {
        MERGE_FROM, MERGE_TO, MAIN;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-08T17:40:32.243

这适用于我的用例：

```
public class History {

    public interface HConstants{
         public enum StateType { PAST,CURRENT,FUTURE}
    }

    //Inner class
    public class State implements HConstants{
        public StateType stateField = StateType.PAST; 
```

# codeigniter - $this->db->insert_id() 给出致命错误 postgresql codeigniter

> ID：14858038
> 
> 赞同：1
> 
> 时间：2013-02-13T16:21:01.747
> 
> 标签：codeigniter, postgresql

我正在使用**Codeigniter 2.0.1 和 Postgresql 8.1**。我的代码使用 try-catch 块中的事务。

有时在一个简单的插入中我得到一个“致命错误”

> 致命错误：在第 357 行的 <...path...>/system/database/drivers/postgre/postgre_driver.php 中调用非对象的成员函数 row()

我的数据库配置是：

```
$db['default']['hostname'] = "localhost";
$db['default']['username'] = "***";
$db['default']['password'] = "***";
$db['default']['database'] = "***";

$db['default']['dbdriver'] = 'postgre';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = FALSE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';

$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

导致错误的模型代码的 lne 是“ **$id = $this->db->insert_id();** ”。我这么说是因为导致错误的行在 insert_id() 方法中，并且在模型中只使用一次。下面给出了模型的代码快照。

```
try {

    // CODE TO FILL UP $data ARRAY

    $this->DBquery("BEGIN");
    $this->DBinsert('<TABLE NAME>', $data);
    $id = $this->db->insert_id();

    // SOME MORE CODE
}
catch(Exception $e) {
    $this->DBquery("ROLLBACK");
    //echo $e->getMessage();
    return 0;
}
$this->DBquery("COMMIT");
return $id; 
```

$this->DBquery 和 $this->DBinsert 是我在扩展 CI_Model 类的基本模型类上创建的自定义方法。这些方法运行良好。

下面是 postgre_driver.php 中的 insert_id 方法，第 357 行是“ **$row = $query->row();** ”

```
function insert_id()
{
    $v = $this->_version();
    $v = $v['server'];

    $table  = func_num_args() > 0 ? func_get_arg(0) : NULL;
    $column = func_num_args() > 1 ? func_get_arg(1) : NULL;

    if ($table == NULL && $v >= '8.1')
    {
        $sql='SELECT LASTVAL() as ins_id';
    }
    elseif ($table != NULL && $column != NULL && $v >= '8.0')
    {
        $sql = sprintf("SELECT pg_get_serial_sequence('%s','%s') as seq", $table, $column);
        $query = $this->query($sql);
        $row = $query->row();
        $sql = sprintf("SELECT CURRVAL('%s') as ins_id", $row->seq);
    }
    elseif ($table != NULL)
    {
        // seq_name passed in table parameter
        $sql = sprintf("SELECT CURRVAL('%s') as ins_id", $table);
    }
    else
    {
        return pg_last_oid($this->result_id);
    }
    $query = $this->query($sql);
    $row = $query->row(); // LINE 357
    return $row->ins_id;
} 
```

它更令人困惑，因为问题并不总是如此。它有时会发生，但频率足以妨碍工作。该系统被大约 8-10 个用户使用，所以我想并发应该不是问题。另外，我正在使用 pconnect 并且连接数是无限的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T20:59:01.850

这听起来可能是您的某些插入语句失败了。如果像这样的事务内部出现错误，它可能会使事务无效。如果您查看日志文件，您可能会发现诸如“当前事务被中止，命令被忽略直到事务结束”之类的条目。（发生的事情是 insert_id 函数中的 $query 变量没有收到有效的查询结果值，因此在该点上调用函数失败）

处理此问题的最佳方法可能是修改您的自定义 DBinsert 函数以返回一个指示插入操作成功或失败的值。（您应该能够返回您在内部运行的任何插入命令的值）

然后，您可以执行以下操作：

```
$insert_ret_val = $this->DBinsert('<TABLE NAME>', $data);
if($insert_ret_val){
    //insert success!
    $id = $this->db->insert_id();
}else{
    //handle failed insert here, rollback, whatever
} 
```

# android - 我的视图内容上的组指示器

> ID：14858043
> 
> 赞同：1
> 
> 时间：2013-02-13T16:21:20.870
> 
> 标签：android

我一直在尝试使用可扩展列表视图。我为我的组 xml 文件使用了相对布局，并将图像设置为左对齐父级（即视图的最左侧）。

但是我注意到组指示箭头位于图像顶部。出于某种原因，我假设组 xml 从箭头的右侧开始。

我的问题是，我在 XML 中填充的视图内容左侧的箭头指示符如何

谢谢

# android - android：接听电话时将电话置于后台

> ID：14858049
> 
> 赞同：1
> 
> 时间：2013-02-13T16:21:30.717
> 
> 标签：android, phone-call

我正在开发一个 Android 应用程序，该应用程序有一个按钮可以在单击时启动呼叫电话。

我想检测来电电话何时被接听并自动将本机电话应用程序置于后台并再次显示我的应用程序。同时，呼叫电话在后台运行。

当您单击智能手机的后退按钮或在通话过程中手动打开我的应用程序时，结果必须看起来像。但这应该在不按任何按钮的情况下自动完成。

我知道当呼叫状态为响铃、摘机或空闲时，我有呼叫侦听器做某事，但问题是将呼叫应用程序从我的应用程序置于后台。

序列：

1.  用户单击我的应用程序中的按钮以启动本机电话应用程序（Android）。
2.  电话开始（通话状态：振铃）。
3.  电话摘机（通话状态：摘机）。
4.  自动，我的应用程序检测到它并将本机电话应用程序置于后台并将我的应用程序置于前台。

有可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:13:26.860

创建后台服务并实现 BroadcastReceivers 来监听呼叫状态触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T13:55:09.240

您可以在使用 Activity start 接听电话后将您的应用程序置于前台。

```
Intent i = getBaseContext().getPackageManager()
                        .getLaunchIntentForPackage(
                                getBaseContext().getPackageName());
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(i); 
```

现在的问题是启动的活动将是一个新的活动（它将清除所有以前的活动 - 没有这些标志，它不会从呼叫屏幕返回）。我不知道如何才能真正回到后台已经工作的活动。

# python - 在 popen.stdout.readline 上检测流的结尾

> ID：14858059
> 
> 赞同：6
> 
> 时间：2013-02-13T16:21:50.733
> 
> 标签：python, python-2.7, popen

我有一个 python 程序，它使用子进程启动子进程，`Popen`并在生成时几乎实时地使用它们的输出。相关循环的代码是：

```
def run(self, output_consumer):
    self.prepare_to_run()
    popen_args = self.get_popen_args()
    logging.debug("Calling popen with arguments %s" % popen_args)
    self.popen = subprocess.Popen(**popen_args)
    while True:
        outdata = self.popen.stdout.readline()
        if not outdata and self.popen.returncode is not None:
            # Terminate when we've read all the output and the returncode is set
            break
        output_consumer.process_output(outdata)
        self.popen.poll()  # updates returncode so we can exit the loop
    output_consumer.finish(self.popen.returncode)
    self.post_run()

def get_popen_args(self):
    return {
        'args': self.command,
        'shell': False, # Just being explicit for security's sake
        'bufsize': 0,   # More likely to see what's being printed as it happens
                        # Not guarantted since the process itself might buffer its output
                        # run `python -u` to unbuffer output of a python processes
        'cwd': self.get_cwd(),
        'env': self.get_environment(),
        'stdout': subprocess.PIPE,
        'stderr': subprocess.STDOUT,
        'close_fds': True,  # Doesn't seem to matter
    } 
```

这在我的生产机器上效果很好，但在我的开发机器上，`.readline()`当某些子流程完成时，调用挂起。也就是说，它将成功处理所有输出，包括最后的输出行“处理完成”，但随后将再次轮询`readline`并且永远不会返回。对于我调用的大多数子进程，此方法在开发机器上正确退出，但对于一个本身调用许多子进程的复杂 bash 脚本始终无法退出。

值得注意的是，在输出结束前多行`popen.returncode`设置为非`None`（通常）值。`0`所以我不能在设置循环时跳出循环，否则我会丢失在进程结束时吐出的所有内容，并且仍在缓冲等待读取。问题是当我在那个时候刷新缓冲区时，我不知道我什么时候结束，因为最后一次调用`readline()`挂起。通话`read()`也挂起。呼叫`read(1)`让我每一个字符都出来，但在最后一行之后也挂起。 `popen.stdout.closed`总是`False`。我怎么知道我什么时候结束？

所有系统都在 Ubuntu 12.04LTS 上运行 python 2.7.3。FWIW，`stderr`正在与`stdout`using合并`stderr=subprocess.STDOUT`。

为什么有区别？`stdout`是否因为某种原因无法关闭？子子流程能否以某种方式使其保持打开状态？可能是因为我是从我的开发盒上的终端启动进程，但在生产中它是作为守护进程启动的`supervisord`？这会改变管道的处理方式吗？如果是这样，我该如何规范它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T22:57:06.773

主代码循环看起来不错。可能是管道没有关闭，因为另一个进程使其保持打开状态。例如，如果脚本启动写入的后台进程，`stdout`则管道将不会关闭。您确定没有其他子进程仍在运行吗？

一个想法是在看到`.returncode`设置时更改模式。一旦你知道主进程已经完成，从缓冲区读取它的所有输出，但不要等待。您可以使用[select](http://docs.python.org/2/library/select.html)从管道中读取超时。设置几秒钟的超时，您可以清除缓冲区而不会卡住等待子进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T10:45:43.383

在不知道导致问题的“一个复杂的 bash 脚本”的内容的情况下，确定确切原因的可能性太多。

但是，如果您在 下运行 Python 脚本，则关注您声称它有效的事实，`supervisord`那么如果子进程试图从 stdin 读取，它可能会卡住，或者如果 stdin 是 tty，它的行为可能会有所不同，其中（我假定）`supervisord`将从 重定向`/dev/null`。

这个最小的例子似乎可以更好地处理我的例子`test.sh`运行子进程尝试从标准输入读取的情况......

```
import os
import subprocess

f = subprocess.Popen(args='./test.sh',
                     shell=False,
                     bufsize=0,
                     stdin=open(os.devnull, 'rb'),
                     stdout=subprocess.PIPE,
                     stderr=subprocess.STDOUT,
                     close_fds=True)

while 1:
    s = f.stdout.readline()
    if not s and f.returncode is not None:
        break
    print s.strip()
    f.poll()
print "done %d" % f.returncode 
```

否则，您总是可以回退到使用[非阻塞读取](https://stackoverflow.com/questions/375427/non-blocking-read-on-a-subprocess-pipe-in-python)，并在您的最终输出行显示“进程完成”时退出，尽管这有点小技巧。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-26T22:19:39.777

如果您使用 readline() 或 read()，它不应该挂起。无需检查返回码或 poll()。如果在您知道进程完成时它挂起，那么它很可能是一个保持管道打开的子进程，正如其他人之前所说的那样。

您可以做两件事来调试它： * 尝试使用最小脚本而不是当前复杂的脚本来重现，或者 * 运行该复杂脚本`strace -f -e clone,execve,exit_group`并查看该脚本开始的内容，以及是否有任何进程在主脚本中幸存下来（检查主脚本何时调用 exit_group，如果 strace 在那之后仍在等待，那么您有一个孩子还活着）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-30T13:06:59.013

我发现对`read`（或`readline`）的调用有时会挂起，尽管之前调用过`poll`. 所以我求助于打电话`select`来看看是否有可读的数据。但是，`select`如果进程关闭，没有超时也会挂起。所以我在半忙循环中调用 select ，每次迭代都有一个很小的超时（见下文）。

我不确定您是否可以将其调整为 readline，因为如果 final`\n`丢失，或者进程在关闭其 stdin 和/或终止它之前没有关闭其 stdout，readline 可能会挂起。您可以将其包装在生成器中，并且每次`\n`在 stdout_collected 中遇到 a 时，都生成当前行。

另请注意，在我的实际代码中，我使用伪终端 (pty) 来包装 popen 句柄（以更接近地伪造用户输入），但它应该可以在没有的情况下工作。

```
# handle to read from
handle = self.popen.stdout

# how many seconds to wait without data
timeout = 1

begin = datetime.now()
stdout_collected = ""

while self.popen.poll() is None:
    try:
        fds = select.select([handle], [], [], 0.01)[0]
    except select.error, exc:
        print exc
        break

    if len(fds) == 0:
        # select timed out, no new data
        delta = (datetime.now() - begin).total_seconds()
        if delta > timeout:
            return stdout_collected

        # try longer
        continue
    else:
        # have data, timeout counter resets again
        begin = datetime.now()

    for fd in fds:
        if fd == handle:
            data = os.read(handle, 1024)
            # can handle the bytes as they come in here
            # self._handle_stdout(data)
            stdout_collected += data

# process exited
# if using a pseudoterminal, close the handles here
self.popen.wait() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-27T09:44:51.197

为什么将 sdterr 设置为 STDOUT？

对子进程进行communicate() 调用的真正好处是您能够检索包含stdout 响应和stderr 消息的元组。

如果逻辑取决于他们的成功或失败，那么这些可能很有用。

此外，它可以使您免于不得不遍历行的痛苦。Communicate() 为您提供一切，并且没有关于是否收到完整消息的未解决问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-30T18:42:07.340

我用 bash 子进程编写了一个**演示**，可以轻松探索。在的输出中可以识别**封闭的管道**，而空行的输出是。 `''``readline()``'\n'`

```
from subprocess import Popen, PIPE, STDOUT
p = Popen(['bash'], stdout=PIPE, stderr=STDOUT)
out = []
while True:
    outdata = p.stdout.readline()
    if not outdata:
        break
    #output_consumer.process_output(outdata)
    print "* " + repr(outdata)
    out.append(outdata)
print "* closed", repr(out)
print "* returncode", p.wait() 
```

* * *

*输入/输出示例*：**在终止进程之前**明显**关闭管道**。这就是为什么应该使用而不是****`wait()`**`poll()`**

 **```
[prompt] $ python myscript.py
echo abc
* 'abc\n'
exec 1>&- # close stdout
exec 2>&- # close stderr
* closed ['abc\n']
exit
* returncode 0
[prompt] $ 
```

对于这种情况，您的代码确实输出了大量的空字符串。

* * *

*示例*`'\n'`：没有在最后一行的快速终止进程：

```
echo -n abc
exit
* 'abc'
* closed ['abc']
* returncode 0 
```**

# php - Html PHP Post Form 未将 Select 或 Datepicker 元素传递给电子邮件

> ID：14858061
> 
> 赞同：0
> 
> 时间：2013-02-13T16:21:53.817
> 
> 标签：php, forms, post

我之前确实进行了搜索，但找不到与我遇到的问题密切相关的内容。我最近使用表单元素和 PHP 设置了一个表单到 POST 方法。我可以确认我正在接收电子邮件和其余字段的信息，但是`<select>`Jquery 'datepicker' 元素没有将任何信息传递给电子邮件，它们解析为空白。

HTML代码如下：

```
 <form method="POST" action="mail.php" id="contactform" class="centered">
    <fieldset>
      <input type="text" name="first_name" placeholder="First Name" required>
      <div class="controls controls-row">
        <input type="text" name="last_name" placeholder="Last Name" required>
      </div>
      <input type="email" name="email" placeholder="Email Address" required>
      <div class="controls-row">
        <input type="text" id="datepicker" name="check_in" placeholder="Check-in" required> 
      </div>  
      <div class="controls-row">
        <input type="text" id="datepicker2" name="check_out" placeholder="Check-out" required>
      </div>      
      <div class="controls-row">
        <select id="modalselect" name="rooms">
          <option value="0" selected="selected">Number of Rooms</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5+</option>
        </select>  
      </div>
      <div class="controls-row">
        <select id="modalselect" name="people">
          <option value="0" selected="selected">Number of People</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="1">8</option>
          <option value="2">9</option>
          <option value="3">10+</option>
        </select>
      </div>

      <textarea rows="3" name="additional" input class="input-xparge" placeholder="Anything else?" class="span5"></textarea>
    </fieldset>    
  </form>  
</div>

<div class="modal-footer">
  <button type="submit" name="submit" input type="submit" form="contactform" class="btn btn-block btn-large btn-success"  value="submit">Submit</button> 
```

PHP代码如下：

```
<?php
$first_name = $_POST['first_name'];
$last_name = $_POST['last_name'];
$email = $_POST['email'];
$check_in = $POST['check_in'];
$check_out = $POST['check_out'];
$rooms = $POST['rooms'];
$occupants = $POST['people'];
$additional = $_POST['additional'];
$from = "From: Babbacombe Hall Mailserver";
$to = "lloyd.rees09@bathspa.ac.uk";
$subject = "New Booking Enquiry";

$body = "First Name: $first_name\n Last Name: $last_name\n Email: $email\n Check In: $check_in\n Check Out: $check_out\n Number of Rooms: $rooms\n Number of Occupants: $occupants\n Additional Information: $additional"; 

if ($_POST['submit']) {
 if (mail ($to, $subject, $body, $from)) { 
     echo '<p>Your message has been sent!</p>';
   } else { 
       echo '<p>Something went wrong, go back and try again!</p>'; 
   }
} 
```

?>

您的帮助和专业知识将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:34:46.310

替换这个：

```
$check_in = $POST['check_in'];
$check_out = $POST['check_out'];
$rooms = $POST['rooms'];
$occupants = $POST['people']; 
```

有了这个：

```
$check_in = $_POST['check_in'];
$check_out = $_POST['check_out'];
$rooms = $_POST['rooms'];
$occupants = $_POST['people']; 
```

# autohotkey - 使用自动热键解析文本文件

> ID：14858066
> 
> 赞同：-3
> 
> 时间：2013-02-13T16:22:13.580
> 
> 标签：autohotkey

我需要复制包含单词“make”、“model”、“year”的文档的每一行。这些词将永远彼此相邻。我需要将每一行放入一个名为 ahk-output.txt 的新文件中。

即原始数据：

模型本田模型公民年 2012

输出到文件：

本田思域 - 2012

我需要重复在我的文档文件夹中找到的许多文件。它们位于同一个文件夹中，所有复制的数据都将写入同一个文件。文档很长，但单词保证在前 30 行。

```
Loop, read, C:\Users\vangp.ENTERPRISE\Documents\*.txt, C:\ahk-output.txt
{
    IfInString, A_LoopReadLine, model, FileAppend, %A_LoopReadLine%`n
}
{
    IfInString, A_LoopReadLine, year, FileAppend, %A_LoopReadLine%`n
}
{
    IfInString, A_LoopReadLine, marketing name, FileAppend, %A_LoopReadLine%`n
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:03:22.480

我决定帮助你，因为没有其他人回应。这是一个简单的开始，随心所欲地修改。

```
FileDelete, C:\Temp\Results\Extracted.txt
Loop, C:\Temp\Source\*.txt
{
    Loop, read, C:\Temp\Source\%A_LoopFileName%
    {
        IfInString, A_LoopReadLine, model
        {
            StringReplace, CurrentLine, A_LoopReadLine, model, %A_Space%
            StringReplace, CurrentLine, CurrentLine, year, %A_Space%
            StringReplace, CurrentLine, CurrentLine, marketing name, %A_Space%-%A_Space%
            FileAppend, %CurrentLine%`n, C:\Temp\Results\Extracted.txt
        }
        If (A_Index >= 30)
            Break
    }
} 
```

# jquery - 选择选项显示 Div 并隐藏 Div - JQuery

> ID：14858074
> 
> 赞同：1
> 
> 时间：2013-02-13T16:22:34.190
> 
> 标签：jquery, html, css

我有一个选择选项

```
<select class="input_select" name="customer_type" id="central_company">
    <option value="standard">Standard</option>
    <option value="central">Central Station</option>
</select> 
```

和一个按钮

```
<div class="standardbutton">
     <label class="button_label">
         <input type="submit" class="standardbutton" name="button1" value="Submit Form" />
     </label>
</div> 
```

单击时使用此 Jquery

```
// Show Special Form Elements
$(".cleantestbox").hide();
$('#central_company').change(function() {
    var option = $(this).find('option:selected');
    $('.cleantestbox').toggle(option.hasClass('central'));
    $('.standardbutton').toggle(option.hasClass('standard'));
}).change(); 
```

隐藏标准按钮类并显示一个名为 .cleantestbox 的 div，但它似乎不起作用。它以前有效但似乎无法找到导致它不起作用的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:43:14.327

```
// Show Special Form Elements
$(".cleantestbox").hide();
$('#central_company').change(function() {
  if ($(this).val() == 'central') {
    $('.cleantestbox').show();
    $('.standardbutton').hide();
  } else {
    $('.cleantestbox').hide();
    $('.standardbutton').show();
  }
}); 
```

# git - 将开发分支设置为拉取请求的默认分支

> ID：14858075
> 
> 赞同：35
> 
> 时间：2013-02-13T16:22:38.293
> 
> 标签：git, github, git-flow, pull-request, hubflow

我想让拉取请求默认从功能分支合并到开发中。

我提倡使用 git flow，所以当一个功能提交拉取请求时，拉取请求需要合并到开发中，而不是 master。

一些经理评论说，作为人类，团队领导可能会忽略这一事实并错误地将拉取请求合并到 master 中，从而导致稍后的发布出现问题。

我们希望减轻合并地狱的风险，因此这将大大有助于实现这一目标。

编辑：我正在使用一个名为 hubflow 的 gitflow 分支（[http://datasift.github.com/gitflow/](http://datasift.github.com/gitflow/)）。默认情况下，当创建一个特性分支时 `git hf feature start [tik-123]` ，特性分支是根据规范创建的，但也会被推送到原点。我们想要这个进行合作。功能完成后，开发人员将转到 github 中的功能分支并发出拉取请求。然后，如果该功能计划在 sprint 中发布，则团队负责人将审查拉取请求并将该功能合并到 dev 中。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-13T16:35:17.283

或者，创建`develop`每个人在访问项目时看到的默认分支。缺点是任何克隆它的人都会默认获得一个不稳定的分支，但所有拉取请求也会默认转到开发分支。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-13T16:33:33.393

代替使用`master`and`develop`分支，使用`stable`and `master`。

然后在标记新版本之前将它们合并通常是好的，因此没有或只有很少的转移。我使用这个模式，通常会`stable`延迟`master`很小，合并大多是快进的。

为了保持`master`分支可部署，请在准备好功能分支时合并它们。但是既然你有`stable`分支，新特性就不必经过很好的测试。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-13T16:27:13.000

github 有自己的建议工作流程，称为[github flow](http://scottchacon.com/2011/08/31/github-flow.html)，按照惯例，所有拉取请求都默认为，`master`但您现在可以将其编辑到您喜欢的任何分支。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-30T07:17:40.947

在 github 中使用 gitflow 并将默认分支设置为 时`develop`，您将收到一条通知，告知`master`您已更改，并要求您`develop`在发布后创建一个 Pull Request。我不知道如何解决这个问题。

# wcf - WCF - 如何在每个 Web 请求上添加自定义 SoapHeader？

> ID：14858076
> 
> 赞同：0
> 
> 时间：2013-02-13T16:22:37.683
> 
> 标签：wcf, web-services, soap-client, soapheader

我想在来自客户端/用户的每个 Web 请求上将客户端地址标头（客户端的 IP 地址）添加到 SOAP 标头。

我使用WCF服务，我的实现类如下：

```
public class Service : IService
{
    public Guid UserId()
    {
        if (MemUser != null)
            return (Guid)MemUser.ProviderUserKey;
        else
            return Guid.Empty;
    }
    public void SystemLog(Nullable<Guid> Customer, ResultCode Result, FacilityCode Facility, int Code, string Info)
    {
        // get IP address out of the SOAP header, if any
        string clientAddress = string.Empty;
        if ((ClientAddress != null) && !String.IsNullOrEmpty(ClientAddress.IPAddress))
            clientAddress = ClientAddress.IPAddress;
        else if ((HttpContext.Current != null) && (HttpContext.Current.Request != null) && !String.IsNullOrEmpty(HttpContext.Current.Request.UserHostAddress))
        clientAddress = HttpContext.Current.Request.UserHostAddress;

        SystemLog(Customer, Result, Facility, Code, Info, clientAddress); //writes into database
    }
//other methods
} 
```

我的界面如下所示：

```
[ServiceContract(Name = "ServiceSoap", Namespace = "http://www.example.com/webservice"), XmlSerializerFormat]
public interface IService
{
    [OperationContract(Action = "http://www.example.com/webservice/UserId")]
    Guid UserId();

    //other implementations
} 
```

如果我有一个由 SoapHeader 继承的 ClientAddressHeader 类，例如

```
public class ClientAddressHeader : SoapHeader
{
    public string IPAddress;
    public ClientAddressHeader(){}
} 
```

我可以使用 [WebMethod] 在 wse 中轻松传递 SOAP 标头（ClientAddress），例如：

```
[WebService(Namespace = "http://www.example.com/webservice")]
public class Service : System.Web.Services.WebService
{
    public ClientAddressHeader ClientAddress;

    [WebMethod, SoapHeader("ClientAddress", Direction = SoapHeaderDirection.In)] //client request
    public Guid UserId()
    {
        if (MemUser != null)
            return (Guid)MemUser.ProviderUserKey;
        else
            return Guid.Empty;
    }
} 
```

那么有人知道我在使用 WCF 时如何传递 SoapHeader 吗？

如果有人清楚地向我解释如何实现这一点，我真的很感激。

PS：我还阅读了msdn和[Agent Message Inspector](http://msmvps.com/blogs/paulomorgado/archive/2007/04/27/wcf-building-an-http-user-agent-message-inspector.aspx)中的一些博客，它们都对我没有真正的用处，或者我不太了解。

# algorithm - 数据维度非常大的主成分分析

> ID：14858082
> 
> 赞同：0
> 
> 时间：2013-02-13T16:22:54.360
> 
> 标签：algorithm

我有一组样本（向量），每个样本的维度约为 M（10000），集合的大小也约为 N（10000），我想首先找到（具有最大特征值）这组的 10 个 PC。由于样本的维度很大，我无法在合理的时间内计算协变矩阵。是否有任何方法可以在不计算完整 cov 矩阵的情况下选择 PC，或者可以有效处理大维度数据的方法或类似的方法？所以这些方法应该比 O(M*M*N) 需要更少的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:29:38.690

NIPALS——非线性迭代偏最小二乘法

例如，请参见此处：[http ://en.wikipedia.org/wiki/NIPALS](http://en.wikipedia.org/wiki/NIPALS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-24T03:19:59.417

伙计们，也许它会有所帮助，我在 EM-PCA 方法系列中找到了解决方案（例如，[参见 http://www.cmlab.csie.ntu.edu.tw/~cyy/learning/papers/PCA_RoweisEMPCA。 .pdf](http://www.cmlab.csie.ntu.edu.tw/~cyy/learning/papers/PCA_RoweisEMPCA.pdf) )

# c# - 根据属性匹配从 XmlDocument 对象中删除节点和子节点

> ID：14858086
> 
> 赞同：0
> 
> 时间：2013-02-13T16:23:07.767
> 
> 标签：c#, linq, c#-4.0

我有一个带有分层数据的 xml 文件，我正在将其加载到 XmlDocument 对象中，到目前为止一切都很好，我现在要做的是删除所有节点和子节点，除了具有属性的节点和子节点之外

> AssetSysID="6288"

我不确定如何完成这项任务，感谢任何帮助。将数据绑定到树视图的代码：

```
 XmlDataSource xDS = new XmlDataSource();
            XmlDocument xmlDoc = new XmlDocument();
xmlDoc = WTLIB.WTDAL.Legacy.DataTools.AssetList_XML(rcmbAssetType.SelectedValue);
                    if (xmlDoc != null)
                    {
                        #region Grid Filters
                if (Request.QueryString["grid"] == null)
                {
                    // Grid launched from Asset Screen
                    if (Request.QueryString["AssetSysID"] == null)
                        hdnGridAssetSysID.Value = "AssetSysID=" + "6288"; // Request.QueryString["AssetSysID"];
                    LoadGridData(xmlDoc);
                }

                #endregion

                xDS.Data = xmlDoc.InnerXml;
                xDS.XPath = "/xml/AMASM";
                xDS.EnableCaching = false;

                //  bind to treeview
                rtrvAMASM.Visible = true;
                rtrvAMASM.DataSource = xDS;
                rtrvAMASM.DataBind();
            }
            else
            {
                rtrvAMASM.Visible = false;
            }  
        }
        else
        {
            xDS = null;
            xmlDoc = null;
            rtrvAMASM.Visible = false;
        } 
```

xml:

```
<xml>
  <AMASM AssetSysID="6288" Asset_ID="786387126" FROMLR="0.0000" Assets="786387126,(Facilities) , ( to ) Big tower-to-,Facilities">
    <AMACI ACISysID="10201" PAssetSysID="6288" Features="Sign, On the door" />
    <AMACI ACISysID="10115" PAssetSysID="6288" Features="Roof, Roof, NE corner" />
    <WMITM ITMSysID="5267" Equipment="220033,Truck #33">
      <AMSRQI SRQSysID="40" WorkOrders="E00006," />
      <AMSRQI SRQSysID="41" WorkOrders="E00007," />
      <AMSRQI SRQSysID="402" WorkOrders="E52,JDTest1" />
      <AMSRQI SRQSysID="603" WorkOrders="E0130,Wash" />
      <AMSRQI SRQSysID="656" WorkOrders="E0183,Program Error" />
      <AMSRQI SRQSysID="712" WorkOrders="E0239,Program Error" />
      <AMSRQI SRQSysID="986" WorkOrders="E0293,Testing Single Quote" />
      <AMSRQI SRQSysID="1534" WorkOrders="E0295," />
      <AMSRQI SRQSysID="1548" WorkOrders="E0296,Testing Extra fields" />
      <AMSRQI SRQSysID="1589" WorkOrders="E0299,Testing Extra fields" />
      <AMSRQI SRQSysID="1590" WorkOrders="30-2,Testing Extra fields" />
      <AMSRQI SRQSysID="2179" WorkOrders="PW12-00011,OilChange2" />
      <AMSRQI SRQSysID="2299" WorkOrders="30-3,Testing Extra fields" />
      <AMSRQI SRQSysID="2310" WorkOrders="30-4,Testing Extra fields" />
    </WMITM>
    <AMSRQI SRQSysID="1534" WorkOrders="E0295," />
    <AMSRQI SRQSysID="1548" WorkOrders="E0296,Testing Extra fields" />
    <AMSRQI SRQSysID="656" WorkOrders="E0183,Program Error" />
    <AMSRQI SRQSysID="712" WorkOrders="E0239,Program Error" />
    <AMSRQI SRQSysID="1589" WorkOrders="E0299,Testing Extra fields" />
    <AMSRQI SRQSysID="1590" WorkOrders="30-2,Testing Extra fields" />
    <AMSRQI SRQSysID="2165" WorkOrders="A00506,Test Inser" />
    <AMSRQI SRQSysID="2166" WorkOrders="A00507," />
    <AMSRQI SRQSysID="2167" WorkOrders="A00508,Test" />
    <AMSRQI SRQSysID="2299" WorkOrders="30-3,Testing Extra fields" />
    <AMSRQI SRQSysID="2310" WorkOrders="30-4,Testing Extra fields" />
    <AMFLI FLISysID="15" Floors="First Floor,Ground Level">
      <AMRMI RMISysID="21" Rooms="101,Admin Office">
        <AMSRQI SRQSysID="2165" WorkOrders="A00506,Test Inser" />
        <AMSRQI SRQSysID="2166" WorkOrders="A00507," />
        <AMSRQI SRQSysID="2167" WorkOrders="A00508,Test" />
      </AMRMI>
      <AMRMI RMISysID="22" Rooms="102,Security Office" />
      <AMRMI RMISysID="23" Rooms="103,Men's Washroom" />
      <AMRMI RMISysID="24" Rooms="104,Women's Washroom" />
    </AMFLI>
  </AMASM>
  <AMASM AssetSysID="6715" Asset_ID="HFBuild" FROMLR="0.0000" Assets="HFBuild,(Facilities) , High Falls Building,Facilities">
    <AMACI ACISysID="10132" PAssetSysID="6715" Features="" />
    <AMACI ACISysID="10133" PAssetSysID="6715" Features="" />
    <AMACI ACISysID="10134" PAssetSysID="6715" Features="" />
  </AMASM>
  <AMASM AssetSysID="6750" Asset_ID="F2000" FROMLR="0.0000" Assets="F2000,(Facilities) , Survey,Facilities" />
</xml> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:26:28.803

使用此代码

```
 XDocument doc = XDocument.Load("input.xml");

doc.Root.Element("Applications").Elements("ApplicationName").Remove();

doc.Save("output.xml"); // or overwrite the input if wanted with doc.Save("input.xml"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:44:59.210

[在这篇文章](https://stackoverflow.com/questions/5566228/remove-all-artist-node-from-an-xml-file)的帮助下解决了这个问题：

```
 int intLoop = 0;
                    XmlNodeList Nodes = xmlDoc.GetElementsByTagName("AMASM");            
                    //  Loop through the list
                    while (Nodes.Count != 0)
                    {
                        foreach (XmlNode Node in Nodes)
                        {
                            if ( ! ( (Node.Attributes["AssetSysID"].Value) == hdnGridAssetSysID.Value) )
                            {
                                Node.ParentNode.RemoveChild(Node); //   <--This line messes with our iteration and forces us to get a new list after each remove    
                                //  Stop the loop
                                break;
                            }                   
                        }
                        //  Get a refreshed list of offending nodes                
                        Nodes = xmlDoc.GetElementsByTagName("AMASM");
                        intLoop++;
                        if (intLoop > 5000) break;   // <-reason for that code is to break the loop out of infinity
                    }
                    Nodes = null;
                    intLoop = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:32:32.867

在没有看到您的 xml 的情况下，我会执行以下操作：

```
XDocument.Load("input.xml").Descendants().Where(x => x.Attributes().Any(z => z.Name == "AssetSysID" && z.Value == "6288") == false); 
```

# winforms - mvp模式中winforms之间的通信

> ID：14858091
> 
> 赞同：9
> 
> 时间：2013-02-13T16:23:14.133
> 
> 标签：winforms, design-patterns, communication, mvp

我正在处理开发我的应用程序的一个大问题。这是一个基于 C# 的 Winforms 基础应用程序，实现了 Model-View-Presenter 模式，但我不熟悉这种方法。我到处搜索，但没有找到我的问题的答案。

我需要知道如何使用这种模式来允许 winforms 之间的通信，以及演示者必须如何在不将演示者耦合到表单的情况下显示它们。我见过一种使用工厂模式的方法，但不明白如何实现它。

任何帮助或指向正确方向将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T23:11:01.963

在 MVP 中，winforms 不应该相互通信。Form A 知道它的 Presenter A，Form B 知道它的 Presenter B

通常情况下，你会通过Presenter A修改带有Form A的model。Presenter B会监听model的变化，并相应地刷新Form B

如果您需要更多协调，您可以考虑使用应用程序控制器

请参阅[http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx](http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T19:09:33.367

**断言**

Presenter 负责视图和模型之间的协调（如果遵循[被动视图](http://martinfowler.com/eaaDev/PassiveScreen.html)实现）。

**这可能看起来像：**

实例化 Presenter 并将自身注入 Presenter 的视图：

```
IPresenter presenter;
public View() { presenter = new Presenter(this) } 
```

Presenter 实例化一个或多个视图并将自己注入到视图中：

```
IView1 view1;
public Presenter() { view1 = new View1(this) } 

IView1 view1;
IView2 view2;
public Presenter() { view1 = new View1(this); view2 = new View2(this); } 
```

**例子**

在您的情况下，协调多个视图的 Presenter 可能看起来像这样（伪）：

```
public class Presenter : IPresenter
{
  IView1 view1;
  IView2 view2;
  public Presenter() 
  {
    view1 = new View1(this);
    view2 = new View2(this);
  }

  private WireViewEvents()
  {
    view1.OnButtonClick += HandleButtonClickFromView1;
  }

  public void HandleButtonClickFromView1()
  {
    view2.SetSomeData();
    view2.Show();
} 
```

在本例中，由 Presenter 处理引发的事件`View1`，数据设置在 中`View2`，并`View2`显示。

请记住，无论您的实现是什么，MVP 的目标是：

*   关注点分离（UI 与域逻辑分离）。
*   增加可测试性。

请记住，这只是演示者如何协调多个视图的基本示例。如果您想从演示者中抽象出您的视图创建，您可以将创建移动到演示者调用以创建视图并订阅其事件的另一个容器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T13:32:21.413

我只是展示了一个虚拟代码，其中 2 个视图试图通过 Presenter 使用接口相互通信。这是一个简单的例子，让 mw 知道是否有问题。老实说，我还没有测试过这段代码。

```
namespace WindowsFormsApplication1
{
    internal class View1 : IView1
    {
        public View1()
        {
            new Presenter(this);
        }

        public string Username { get; set; }
        public event EventHandler ShowDetails;
    }
}

namespace WindowsFormsApplication1
{
    internal class View2 : IView2
    {
        public View2()
        {
            new Presenter(this);
        }

        public string Position { get; set; }
    }
}

namespace WindowsFormsApplication1
{
    public class Presenter
    {
        private readonly IView1 _view1;
        private readonly IView2 _view2;

        public Presenter(IView1 view1)
        {
            _view1 = view1;
            _view1.ShowDetails += ShowDetails;
        }

        private void ShowDetails(object sender, EventArgs e)
        {
            _view2.Position = _view1.Username == "My Name" ? "Arhchitect" : "Project Manager";
        }

        public Presenter(IView2 view2)
        {
            _view2 = view2;
        }

    }

}

public interface IView1
{
    string Username { get; set; }

    event EventHandler ShowDetails;
}

public interface IView2
{
    string Position { get; set; }
} 
```

但是在这个例子之后有一些注意事项。从您的应用程序开始，尝试确定您想要使用 1 个`View`界面或 2 个界面的第一个天气。如果您可以使用单个界面，则可能会有机会甚至容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T16:06:14.403

我认为前面关于模型引发事件以使演示者了解更改的观点是正确的。我确实有一些评论，希望对您有用。

首先，View 实现可能不是一个单一的形式。有时，模型的一部分由一个单独的（可能是模态的）表单来维护是有意义的，该表单在视图中的作用就像一个复杂的控件。在这种情况下，表单之间的交互将是直接的。Presenter 不应该关心 View 的实现是如何完成的。

其次，当看起来需要交互的表单显然不是同一视图的一部分时（例如查找表单），我建议使用应用程序控制器模式。在这种情况下，当 Form A 需要执行某个功能（例如，“查找产品”或“编辑详细信息”）时，它将调用它自己的 Presenter 上的方法来执行此操作。然后，Presenter 在 Application Controller 上调用一个单独的方法（所有 Presenter 都引用它，它是一个单例），Application Controller 打开具有自己的 Presenter 的所需表单。在 WinForms 中，这一切都可以通过模态表单完成，在这种情况下，结果将通过调用链发回。或者，将需要应用程序控制器和演示者之间的一些事件引发 - 即

有关 MVP 中的应用程序控制器模式的更多信息，请参阅我的博客文章[使用 MVP 模式](http://thomassoftwareconsulting.blogspot.com/2012/09/using-mvp-pattern.html)

# mysql - 如何忽略 MySQL STR_TO_DATE 格式字符串中的文本？

> ID：14858093
> 
> 赞同：0
> 
> 时间：2013-02-13T16:23:17.170
> 
> 标签：mysql, parsing, datetime

我正在尝试解析 MySQL 表中的一些日期，但我无法让 STR_TO_DATE 正常播放：

```
SELECT STR_TO_DATE('Tue Feb 12 17:59:59 EET 2013', '%a %b %e %T EET %Y') 
```

将返回空值。

我怎样才能让它忽略**EET**文本？我不需要时区信息。

**更新：** MySQL 服务器版本是 4.1.14

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:52:14.980

我认为它仅适用于 5.x（在 5.5.x 上尝试过），因为解析器可以跳过字符串中匹配的模板，而 4.x 中没有实现。

您可以尝试以下语句，它在 5.x 中会很好，但在 4.x 中不会：

```
SELECT STR_TO_DATE('Tue XX Feb 12 17:59:59 SOME_DATA 2013', '%a XX %b %e %T SOME_DATA %Y') 
```

因此，您可以做的最好的事情是遵循您的解决方法（替换不需要的子字符串）。

旁注：MySQL 没有时区的概念。`UTC, EET, FET`因此，如果初始字符串包含等等，MySQL 不在乎并且不会在日期转换期间应用任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-29T10:38:02.647

```
SELECT STR_TO_DATE(CONCAT(LEFT('Wed Nov 28 20:41:25 GMT 2018',19), RIGHT('Wed Nov 28 20:41:25 GMT 2018',5)), '%a %b %d %H:%i:%s %Y'); 
```

这将很好地工作并将“GMT”视为通配符。在每种情况下，时区都固定为三个字符。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T16:51:10.390

%a 和 %b 处理的日期和月份的名称由您的服务器连接的区域设置控制。我从您的姓名和时区猜测您有一些用户的母语不是`'en_US'`“Tue”和“Feb”的默认语言。

给出这个命令来查看你的语言环境设置：

```
 SELECT @@lc_time_names; 
```

您可以尝试发行

```
 SET lc_time_names = 'en_US'; 
```

在您的问题中发出失败的命令之前，然后发出

```
 SET lc_time_names = 'ru_RU'; 
```

或者之后立即对您的用户正确的任何内容。

# c# - 使用先前插入的 IDENTITY 进行多个 LINQ to SQL 插入

> ID：14858095
> 
> 赞同：1
> 
> 时间：2013-02-13T16:23:25.490
> 
> 标签：c#, sql-server, linq

我想尝试插入到我的 SQL Server 数据库中的多个表中，但是我的第一个插入生成了一个外键，即我想在后续插入中使用它的 IDENTITY 值。我不确定如何在 LINQ to SQL 中进行此操作。我认为我可以在多个事务中执行此操作，但我更喜欢在一个地方执行此操作……也就是在 using 子句中。

我的伪代码算法如下：

1.  检查 TABLE1.COL2 列中是否存在 ID 值
2.  如果它不存在，则在 TABLE1 中插入一个新行
3.  从 TABLE1.COL1 列中获取新插入行的外键值。
4.  使用新的外键值创建一个对象并更新 TABLE2。

    ```
     using (var sms = new SmsDataDataContext(connection_string)
     {
        foreach(SomeObject i in ListofObject)
        {
          TABLE1 t1 = CheckID(sms, i.ID);

          if (t1== null)
          {
             TABLE1 new_row = new TABLE1();
             sms.TABLE1.InsertOnSubmit(new_row);

             //Ideally I want to do something like this even though i dont think it will work.
             sms.SubmitChanges();

             TABLE2 update_row = new TABLE2();
             update_row.ID = new_row.COL1.value;  //has the newly created identity value from my last insert.
             //Assume this update_row exist in my TABLE2 table.
             sms.TABLE2.InsertOnSubmit(update_row);

          }
        }
        sms.SubmitChanges();
      } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T21:52:33.417

LINQ to SQL 是围绕对象图上的工作单元模式构建的，而不是针对每一行的单独语句。假设您的父级 (Table1) 和子级 (Table2) 之间存在关联，您应该能够构建图表并发出单个 SubmitChanges。LINQ to SQL 将根据先前提交的值自动处理设置子项的父 ID。

```
using (var sms = new SmsDataDataContext(connection_string)
 {
    foreach(SomeObject i in ListofObject)
    {
      TABLE1 t1 = CheckID(sms, i.ID);

      if (t1== null)
      {
         TABLE1 new_row = new TABLE1();
         sms.TABLE1.InsertOnSubmit(new_row);

         TABLE2 update_row = new TABLE2();
         new_row.Table2s.Add(update_row);

      }
    }
    sms.SubmitChanges();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:23:47.500

您可以使用`TransactionScope`.

只需像这样将整个数据库调整块包装在其中：

```
using (var MyTran = new TransactionScope())
{
   try{
     //Insert #1
     //Insert #2
     ...
     MyTran.Complete();
   }catch{
     // if the flow of control comes here, transaction will not be committed
   }
} 
```

如您所见，如果您的代码在 Complete() 执行之前执行，您将获得回滚。

**参考**

*   [交易范围](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)
*   [完整代码示例（堆栈溢出）](https://stackoverflow.com/a/755804/127880)

# jquery - 如何检查我的 Jquery 函数是否成功完成？

> ID：14858098
> 
> 赞同：0
> 
> 时间：2013-02-13T16:23:38.057
> 
> 标签：jquery

我正在做 jquery 函数来对文本段落做一些动画，我在 Stackoverflow 中找到了一个很好的例子并对其进行了编辑以满足我的需要。

但是在最后一段动画完成后我怎么能提醒一些东西？

您可以通过下面的链接查看我的代码

[http://jsbin.com/araget/24/edit](http://jsbin.com/araget/24/edit)

```
(function ($) {
  // writes the string
  //
  // @param jQuery $target
  // @param String str
  // @param Numeric cursor
  // @param Numeric delay
  // @param Function cb
  // @return void
  function typeString($target, str, cursor, delay, cb) {
    $target.html(function (_, html) {
      return html + str[cursor];
    });

    if (cursor < str.length - 1) {
      setTimeout(function () {
        typeString($target, str, cursor + 1, delay, cb);
      }, delay);
    }
    else {
      cb();
    }
  }

  // clears the string
  //
  // @param jQuery $target
  // @param Numeric delay
  // @param Function cb
  // @return void
  function deleteString($target, delay, cb) {
    var length;

    $target.html(function (_, html) {
      length = html.length;
      return html.substr(0, length - 300);
    });

    if (length > 1) {
      setTimeout(function () {
        deleteString($target, delay, cb);
      }, delay);
    }
    else {
      cb();
    }
  }

  // jQuery hook
  $.fn.extend({
    teletype: function (opts) {
      var settings = $.extend({}, $.teletype.defaults, opts);

      return $(this).each(function () {
        (function loop($tar, idx) {
          // type
          typeString($tar, settings.text[idx], 0, settings.delay, function () {
            // delete
            setTimeout(function () {
              deleteString($tar, settings.delay, function () {
                loop($tar, (idx + 1) % settings.text.length);
              });
            }, settings.pause);
          });

        }($(this), 0));
      });
    }
  });

  // plugin defaults  
  $.extend({
    teletype: {
      defaults: {
        delay: 100,
        pause: 5000,
        text: []
      }
    }
  });
}(jQuery));

$('#target').teletype({
  text: [
    'Hi I am ShoBingg!',
    'A Mobile loyalty system that works on your smart phone.',
    'My job is to collect Binggz and redeem it for you so you get awarded!',
    'So what are Binggz?',
    'Binggz are the points you get from your favorite local merchants whenever you shop, dine or even visit!',
    'So you do not have to carry any more cards, I am with you all the time and work with home deliveries and wherever you go.',
    'Happy Rewarding!'
  ]
});

$('#cursor').teletype({
  text: ['_', ' '],
  delay: 0,
  pause: 500
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:21:39.207

您可以在您的插件中添加另一个选项，即电传打字机即将循环时的回调。例如，如果调用了该选项`loopCallback`，则此示例传入`callWhenFinished`包含警报的函数：

```
(function ($) {
  // writes the string
  //
  // @param jQuery $target
  // @param String str
  // @param Numeric cursor
  // @param Numeric delay
  // @param Function cb
  // @return void
  function typeString($target, str, cursor, delay, cb) {
    $target.html(function (_, html) {
      return html + str[cursor];
    });

    if (cursor < str.length - 1) {
      setTimeout(function () {
        typeString($target, str, cursor + 1, delay, cb);
      }, delay);
    }
    else {
      cb();
    }
  }

  // clears the string
  //
  // @param jQuery $target
  // @param Numeric delay
  // @param Function cb
  // @return void
  function deleteString($target, delay, cb) {
    var length;

    $target.html(function (_, html) {
      length = html.length;
      return html.substr(0, length - 300);
    });

    if (length > 1) {
      setTimeout(function () {
        deleteString($target, delay, cb);
      }, delay);
    }
    else {
      cb();
    }
  }

  // jQuery hook
  $.fn.extend({
    teletype: function (opts) {
      var settings = $.extend({}, $.teletype.defaults, opts);
      var numOfMessages = settings.text.length;

      return $(this).each(function () {
        (function loop($tar, idx) {
          // type
          typeString($tar, settings.text[idx], 0, settings.delay, function () {
            // delete
            if ((idx+1) % numOfMessages === 0)
               settings.loopCallback();    
            setTimeout(function () {
              deleteString($tar, settings.delay, function () {
                loop($tar, (idx + 1) % settings.text.length);
              });
            }, settings.pause);
          });

        } ($(this), 0));
      });
    }
  });

  // plugin defaults  
  $.extend({
    teletype: {
      defaults: {
        delay: 100,
        pause: 5000,
        text: [],
        loopCallback: callWhenFinished
      }
    }
  });
}(jQuery));

$('#target').teletype({
  text: [
    '<a href="a">Hi I am ShoBingg!</a>',
    'Happy Rewarding!'
  ]
});

function callWhenFinished() {
        alert("Finished. Looping...");
} 
```

# html - 在输入表单中添加图标，并在图标之后开始输入。

> ID：14858101
> 
> 赞同：0
> 
> 时间：2013-02-13T16:23:46.340
> 
> 标签：html, css, input

对于你们中的一些人来说，这将是一个简单的问题，但我在 CSS 和样式方面并不是最好的，我更喜欢后端开发。基本上我正在设计一个登录表单，我希望它看起来像这样：

![在此处输入图像描述](../Images/969016c9225497e6f5484d414653c23d.png)

背景，登录按钮都很好。简单。

我使用了一些 CSS 并且可以将图标放入输入中，但是当用户开始输入时，它会在图标上输入。我想要做的是分隔图标部分，用户在绿线之后开始输入。

```
#password {

    background-image:url('../images/pw_icon.png');
    background-repeat:no-repeat;
    height: 30px;
} 
```

那是我到目前为止的CSS。我已经看到这样做了，但经过几次 Google 搜索后找不到任何示例。

任何人都可以指导我举一个例子或有一些话来指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:37:47.453

**CSS**

```
#password {
    background-image:url('../images/pw_icon.png') no-repeat center left;
    height: 30px;
    padding-left: 30px;
} 
```

这应该适合你。

# sql - 使用查询结果在同一张表上获得另一个结果

> ID：14858102
> 
> 赞同：0
> 
> 时间：2013-02-13T16:23:46.963
> 
> 标签：sql, sql-server-2008

我正在为这个 SQL 查询而苦苦挣扎。

以下查询返回 v2_modules.id，然后我想在 v2_modules 表上再次运行它以获取所有具有 v2_modules.id 的行作为 parentId

```
select distinct v2_modules.id,v2_modules.name, v2_modules.url, v2_modules.parentId 
from v2_modules
            inner join v2_roles_permissions_modules
                on v2_modules.id =  v2_roles_permissions_modules.moduleId
                    inner join v2_admin_roles
                        on v2_roles_permissions_modules.roleId = v2_admin_roles.roleId
                            inner join admin
                                on v2_admin_roles.adminID = 89 
```

我对如何获得所需的结果感到震惊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:29:01.673

您可以将结果包装为子查询，并与表进行另一个联接：

```
select *
from
(
select distinct v2_modules.id,v2_modules.name, v2_modules.url, v2_modules.parentId 
from v2_modules
            inner join v2_roles_permissions_modules
                on v2_modules.id =  v2_roles_permissions_modules.moduleId
                    inner join v2_admin_roles
                        on v2_roles_permissions_modules.roleId = v2_admin_roles.roleId
                            inner join admin
                                on v2_admin_roles.adminID = 89
)
as table1
inner join v2_modules on v2_modules.parentId = table1.id 
```

加入条件可以颠倒，不知道是不是你要找的那个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:29:09.340

像这样？

```
select distinct 
    c.id,c.name, c.url, c.parentId 
from 
    v2_modules m    inner join
    (select distinct 
        m.id,m.name, m.url, m.parentId 
    from 
        v2_modules m    inner join 
        v2_roles_permissions_modules p  on 
        m.id =  p.moduleId
        inner join v2_admin_roles r on 
        p.roleId = r.roleId
        full outer join admin a
    where
        r.adminID = 89) c on
    m.parentid = c.id 
```

# php - 如果用户收藏夹为 13 或更少，则回显 div 1，否则回显 div 2？

> ID：14858114
> 
> 赞同：0
> 
> 时间：2013-02-13T16:24:07.447
> 
> 标签：php, mysql

我试图找到一种显示 div 的方法，上面写着“将此用户添加到您的收藏夹”，但我只想在用户的收藏夹少于 13 个时显示。因此，一旦他们有 13 个收藏夹，div1 将隐藏，div 2 将显示。

我目前正在将我的 div 显示在与用户收藏夹不同的页面上：

```
<?php
$account_type = account_type();
while ($acctype = mysql_fetch_array($account_type)) 

if ($profile_id == $_SESSION['user_id'])  { 
}else{
 if ($acctype['account_type'] == 'User')  {

    echo "<div class=\"infobox-profile\"><strong>Add to Favourites ".$profile[2]."</strong> - to add or remove this user to your favourites <a href=\"add_favorutie.php?to=".$profile_id."\">click here</a>";
echo "<div class=\"infobox-fav-close\"></div></div>";
 }}
 ?> 
```

然后在另一个页面上，我呼应了用户的最爱：

```
<?php
$favourites_set = get_favourites();
$fav_count = mysql_num_rows($favourites_set);
while ($fav = mysql_fetch_array($favourites_set)) {

    echo "<a href=\"profile.php?id={$fav['fav_id']}\"><img width=\"60px\" height=\"60px\" class=\"fav_pic\" src=\"data/photos/{$fav['duo_id']}/_default.jpg\" /></a>";

        } 
```

所以我想要的是，当“收藏夹”集回显了 13 个收藏夹时，询问用户是否要添加更多收藏夹的 div 消失并回显另一个 div，例如“超出用户收藏夹”

我已经尝试执行以下操作，但我是 php 新手，真的需要帮助，请有人告诉我我需要做什么。

```
 <? if(mysql_num_rows($favourites_set) < 13) {
        while ($fav = mysql_fetch_array($favourites_set)) {
        $account_type = account_type();
        if ($acctype['account_type'] == 'User')  {

        if ($profile_id == $_SESSION['user_id'])  { 

        echo "favourites exceeded";

}else{

     if ($acctype['account_type'] == 'User')  {

    echo "<div class=\"infobox-profile\"><strong>add favourites ".$profile[2]."</strong> - to add or remove this user to your favourites <a href=\"add_favourites.php?to=".$profile_id."\">click here</a>";
echo "<div class=\"infobox-fav-close\"></div></div>";
 }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:29:00.330

一个简单的方法是使用计数变量来计算循环完成了多少次迭代，并使用它来进行测试。

例子：

```
$count=1;

while ($fav = mysql_fetch_array($favourites_set)) 
{
    if ($count<13)
    {
        //loop has not yet iterated 13 times
        //do stuff
    }
    else
    {
        //this loop has iterated 13 times or more. do other stuff.
        //echo out your 'user favourites exceeded' div 
        //and optionally, break the loop to prevent repetition.
        break;
    }
    $count++; //increment the loop counter
} 
```

编辑：我不会用它来抨击你，而是使用`mysqli`or `PDO`，而不是`mysql`- 有关详细信息，请参阅对你问题的评论。

# javascript - Javascript DataTables - 插件问题

> ID：14858116
> 
> 赞同：2
> 
> 时间：2013-02-13T16:24:09.383
> 
> 标签：javascript, jquery, datatables

所以我使用`Datatables`插件（[http://datatables.net/](http://datatables.net/)）对我的表中的数据进行排序。

我存储的数据包括数字 (22.34)、货币 ($223,400) 和格式化数字 (233,623)。网站上有一个用于排序插件的部分（[http://datatables.net/plug-ins/sorting](http://datatables.net/plug-ins/sorting)）。

在过去的 2 个小时里，我一直试图让它工作，但无论我尝试什么，都会不断出错。

**这是我的代码：**

**包括以下脚本：**

```
<script src="assets/js/dataTables.plugins.js"></script> 
```

**其中包含以下内容：**

```
jQuery.extend( jQuery.fn.dataTableExt.oSort, {
"formatted-num-pre": function ( a ) {
    a = (a==="-") ? 0 : a.replace( /[^\d\-\.]/g, "" );
    return parseFloat( a );
},

"formatted-num-asc": function ( a, b ) {
    return a - b;
},

"formatted-num-desc": function ( a, b ) {
    return b - a;
}
} ); 
```

**然后是主要代码：**

```
<script>   
    $(document).ready(function() {

     var oTable = $('#sample_1').dataTable( {
            "sDom": "<'row-fluid'<'span4'l><'span4 tbl_time_frame'><'span4'f>r>t<'row-fluid'<'span4'i><'span4'><'span4'p>>",
            "sPaginationType": "bootstrap",
            "aoColumns": [
               { "sType": "numeric"  },
               null,
               { "sType": "formatted-num"},
               { "sType": "numeric"},
               null,
               null,
               null,
               null,
               null
             ],
            "oLanguage": {
                "sLengthMenu": "_MENU_ records per page",
                "oPaginate": {
                    "sPrevious": "Prev",
                    "sNext": "Next"
                }
            },
            "fnInitComplete": jQuery('.tooltips').tooltip()
     });
}); 
```

我在页面加载时出现以下错误：

```
Uncaught TypeError: Cannot read property 'oSort' of undefined 
```

然后，当我单击第三行时，交替出现以下错误：

```
Uncaught TypeError: Property 'formatted-num-asc' of object #<Object> is not a function jquery.dataTables.js:4038
Uncaught TypeError: Property 'formatted-num-desc' of object #<Object> is not a function 
```

任何人都可以帮忙吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:02:34.363

问题与包含文件的顺序有关。我改变了这个，它解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-20T16:54:11.867

在将 naturalSort.js 与 dataTables.js 一起使用时尝试解决相同的问题时，我刚刚遇到了这篇旧帖子。对我有用的是将 naturalSort.js 移到 dataTables.js 之后。简单的更改，但解决了问题。

# javascript - 篮子弹出窗口中的项目数

> ID：14858117
> 
> 赞同：0
> 
> 时间：2013-02-13T16:24:17.670
> 
> 标签：javascript, if-statement, shopping-cart

我希望有人能帮帮忙

基本上，我正在寻找一种方法来创建用户购物篮中有多少物品的弹出通知。

当用户将一个项目添加到他们的购物篮时，一个带有项目数量的红色圆圈会出现在购物篮图标旁边，当购物篮中的项目数量等于 0 时，红色圆圈就会消失。

这是我正在尝试编写的 JavaScript 编码：

```
if(document.querySelector('#no_items').innerText === '0'){
document.querySelector(".circle").style.display = 'none';

} else {
document.querySelector(".circle").style.display= 'inline';

} 
```

[http://jsfiddle.net/h2bwa/](http://jsfiddle.net/h2bwa/)

基本上，当基本为空时，弹出窗口消失，但在添加项目时出现。

如果没有 JQuery，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:36:17.370

好的，所以这是对您的 JSFiddle 的改造，它可以满足您的要求 - 我没有对其进行广泛的改造，只是足以提供一个工作示例（我将使用最新/最佳实践/模块化代码作为 OP 的练习！）：

```
<style>
.circle {
    width:20px;
    height:20px;
    border-radius:50px;
    font-size:12px;
    color:#fff;
    font-weight:bold;
    line-height:20px;
    text-align:center;
    background:#be1417;
    position: absolute;
    top: 30px;
    left: 17px;
    -moz-transition: all 1s;     /* Firefox 4 */
    -webkit-transition: all 1s;  /* Safari and Chrome */
    -o-transition: all 1s;       /* Opera */
    -ms-transition: all 1s;      /* IE10+ */
    transition: all 1s;          /* W3C */
}
</style>
<script>
    function checkValue() {
        if (document.getElementById("no_items").innerHTML === '0') {
            document.querySelector(".circle").style.MozTransform = "scale(0)";
            document.querySelector(".circle").style.WebkitTransform = "scale(0)";
            document.querySelector(".circle").style.OTransform = "scale(0)";
            document.querySelector(".circle").style.msTransform = "scale(0)";
        } else {
            document.querySelector(".circle").style.MozTransform = "scale(1)";
            document.querySelector(".circle").style.WebkitTransform = "scale(1)";
            document.querySelector(".circle").style.OTransform = "scale(1)";
            document.querySelector(".circle").style.msTransform = "scale(1)";
        }
    }

    function incrementValue() {
        var value = parseInt(document.getElementById('no_items').innerHTML, 10);
        value = isNaN(value) ? 0 : value;
        value++;
        document.getElementById('no_items').innerHTML = value;
        checkValue();
    }

    function decrementValue() {
        var value = parseInt(document.getElementById('no_items').innerHTML, 10);
        value = isNaN(value) ? 0 : value;
        (value >= 1) && value--;
        document.getElementById('no_items').innerHTML = value;
        checkValue();
    }
</script>
<div id="circle" class="circle">
    <div id="no_items" style="color:white">1</div>
</div>
<input type="button" onclick="incrementValue()" value="Buy Item" />
<input type="button" onclick="decrementValue()" value="Remove Item" /> 
```

### 但是，这不是完全跨浏览器兼容的。

它在最新的 Firefox、Opera、Chrome 和 IE 中运行良好，但对于旧版本，里程会有所不同。

原始脚本中有几个错误：

*   querySelector 选择 CSS 类名而不是元素 ID - 使用 getElementById 作为 ID
*   innerText 是特定于 IE 的，innerHTML 在这里可以安全使用 - 请参阅['innerText' 在 IE 中有效，但在 Firefox 中无效](https://stackoverflow.com/questions/1359469/innertext-works-in-ie-but-not-in-firefox)

一般有几点：

从您的 JSFiddle 看起来您想要动画显示/隐藏红色圆圈。我坚持使用您的 scale 方法，但请注意，它可能取决于浏览器，CSS 转换支持哪些 CSS 属性。

我不知道为什么必须在没有 jQuery 的情况下完成此操作，因为它消除了尝试执行此类操作时的许多跨浏览器问题，并且可以很容易地应用可见性/样式更改并为其设置动画。
但是，如果您需要从头开始编写所有内容，那么如果您为可见/隐藏状态创建 CSS 类并使用使用[JavaScript 更改元素的类中](https://stackoverflow.com/questions/195951/change-an-elements-css-class-with-javascript)详述的技术应用它们，将会更好、更灵活——那样你就不用不必在每次想要更改样式时都更改 JS 代码。

祝你好运！

# ruby - 一个简单的 Sinatra/Ruby 替换

> ID：14858119
> 
> 赞同：2
> 
> 时间：2013-02-13T16:24:26.530
> 
> 标签：ruby, sinatra

在 Sinatra 中，我有一个简单的助手来返回一个符号：

```
def sort_column
  params[:sort] ? params[:sort].to_sym : :client_id
end 
```

我的预订是通过以下方式订购的：

```
get '/bookings' do
  @bookings = Booking.all(order: sort_column)
  erb :bookings
end 
```

我希望根据另一个助手的输出对我的 Booking 进行升序或降序排序：

```
def sort_direction
  params[:direction] || "asc"
end 
```

这：

```
@bookings = Booking.all(order: sort_column.asc) 
```

还有这个：

```
@bookings = Booking.all(order: sort_column.desc) 
```

两者都工作正常。

但如果我使用：

```
@bookings = Booking.all(order: sort_column.sort_direction) 
```

我收到一个私有方法错误，如果我尝试：

```
@bookings = Booking.all(order: sort_column + "." + sort_direction) 
```

我得到一个“未定义的方法'+' for ...”错误

如何替换 sort_direction 的结果以确定 Booking 是按 asc 还是 desc 排序的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:27:05.030

```
Booking.all(order: sort_column.send(sort_direction)) 
```

# css - 浮动 div 中的绝对定位图像

> ID：14858123
> 
> 赞同：2
> 
> 时间：2013-02-13T16:24:47.310
> 
> 标签：css, image, html, absolute

我有一个顶栏，链接是使用浮动设置的。在其中一个链接中我有一个浮动的 div。在那个 div 中我想显示一个绝对定位的图像。我使用绝对是因为我不想显示完整的图像只会显示其中的一部分。这是通过使用 top 和 left 作为

**CSS**

```
div.cont{
    max-width:50px;
    min-width:50px;
    height:50px;
    overflow:hidden;
}
img{
    position:absolute;
    width:100px;
    height:100px;
    top:-10px;
    left:-15px;
} 
```

**HTML**

```
<div style="float:right;">
    <div class="cont">
        <img src="image url"/>
   </div>
</div> 
```

但由于图像是绝对定位的，它显示在该 div 之外。

如何克服这一点并在 div 中显示图像？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T16:34:14.270

在父 div 上设置位置：

```
div.cont{
      max-width:50px;
      min-width:50px;
      height:50px;
      overflow:hidden;
      position:relative;
} 
```

当你绝对定位某物时，它是相对于下一个定位的祖先定位的。如果您不指定定位，则祖先将是主体。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T16:34:29.903

默认情况下，绝对定位的元素是相对于视口定位的。添加`position: relative`到您的浮动 div。这会将图像相对于其父级定位在内部，而不是相对于视口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:34:22.393

在 img 上使用`margin-top`and`margin-left`代替`left:`and top:`。

# python - numpy/pylab 最小值，最大值

> ID：14858127
> 
> 赞同：3
> 
> 时间：2013-02-13T16:24:54.127
> 
> 标签：python, numpy

我有两个数字数组 t,x：

```
import numpy
t = numpy.arange(0,10,0.001)
x = numpy.sin(t) 
```

我想生成其他相同大小的数组，它们是逐个元素的最大值或最小值：

```
y1 = ?max(x,2)
y2 = ?min(x,t) 
```

在哪里`?max`和`?min`代表未知的功能。`numpy.max()`and似乎找到了整个数组的`numpy.min()`最大值和最小值，这不是我想要的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T16:26:50.770

您正在寻找[`numpy.minimum()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.minimum.html)and （不要与and[`numpy.maximum()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.maximum.html#numpy.maximum)混淆）。`numpy.min()``numpy.max()`

# javascript - 如何从 javascript 发布请求中获取响应

> ID：14858130
> 
> 赞同：3
> 
> 时间：2013-02-13T16:24:59.210
> 
> 标签：javascript, post, request

所以我正在使用我在这里找到的这个帖子请求，但我想知道我如何使用这个收到回复......

```
function post_to_url(path, params, method) {
    method = method || "post"; 
    var form = document.createElement("form");
    form.setAttribute("method", method);
    form.setAttribute("action", path);

    for(var key in params) {
        if(params.hasOwnProperty(key)) {
            var hiddenField = document.createElement("input");
            hiddenField.setAttribute("type", "hidden");
            hiddenField.setAttribute("name", key);
            hiddenField.setAttribute("value", params[key]);

            form.appendChild(hiddenField);
         }
    }ody.appendChild(form);
    form.submit();
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:28:30.677

此代码配置一个表单并提交它。您没有得到对 javascript 的任何响应，因为页面重新加载。

尝试使用 jQuery： [http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

或者纯 javascript AJAX：[https](https://developer.mozilla.org/en/docs/AJAX) ://developer.mozilla.org/en/docs/AJAX ，如果你想自己写整个事情

# .net - 解析 HTML 标头标签顺序的最有效方法

> ID：14858132
> 
> 赞同：1
> 
> 时间：2013-02-13T16:25:04.200
> 
> 标签：.net, regex, regex-negation, regex-lookarounds

我正在尝试确定给定页面是否不遵守标题标签（h1、h2 等）顺序。事实上，我希望能够解析一堆页面，并返回不遵循标题顺序的每个**页面**。

我的第一个目标是能够确定 an 后面是否紧跟 h2 以外的其他内容。我用以下模式实现了

```
(?<=<h1[^<>]*>.+?)(?<!<h1[^<>]*>.+?<h2[^<>]*>.+?)<h[3-6][^<>]*> 
```

以前的正则表达式对我有用，虽然它不是很有效并且远非完美。

因此，**首先**我希望得到一些帮助来改进这种模式，如果可能的话，我想解释一下我的旧模式以及为什么它如此低效。**其次**，我想升级/修改模式以实现最初的目标，即确保文档标题标签顺序得到尊重。

**注意：** 我使用 RegexHero 进行基准测试

[我知道正则表达式通常不是解析 HTML 的最佳实践，](https://stackoverflow.com/a/1732454/1048572)但这对我来说更像是一种练习，可以更有效地使用环视、原子分组等，谢谢您的理解。

我们可以使用以下模式和以下文本作为示例

**图案：**

```
 (?<=lol1.+?)(?<!lol1.+?lol2.+?)lol[3-6] 
```

**文本：**

> 哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:00:13.553

您可以做的是将您的标题序列提取到您可以操作的数组中。例如：

```
<h1><h3></h3></h1><h2><h3><h4></h4></h3></h2> 
```

会翻译成：

```
[1,3,-3,-1,2,3,4,-4,-3,-2] 
```

然后，您可以使用简单的操作来验证您的结构（例如，从一个值到下一个值的跳转是 +/-1）。

正则表达式：

```
/(<h\d|<\/h\d)/g 
```

# javascript - 在另一个 js 函数中定义一个 js 函数

> ID：14858133
> 
> 赞同：3
> 
> 时间：2013-02-13T16:25:08.310
> 
> 标签：javascript

我最近发现了这个代码片段：

```
function start() {

    function sleep(milliSeconds) {
        var startTime = new Date().getTime();
        while (new Date().getTime() < startTime + milliSeconds);
    }

    sleep(10000);
    return "Hello Start";
} 
```

我们以这种方式定义函数而不是使用“传统”方法有什么优势？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T16:28:10.323

这样做的好处是您的函数`sleep`不再在全局范围内定义。它的范围是 function `start`。

这是有利的，因为将所有函数放在全局范围内，可能会导致与其他脚本发生冲突。

将所有函数定义为全局函数并没有什么`traditional`意义，这只是一种一直存在的不好的做法。减少`global`占用空间是一种良好且负责任的做法，它将减少您的脚本与可能包含在您的应用程序中的其他脚本之间的冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:32:08.123

它与范围有关。[考虑获取最近发布的 JavaScript Ninja 的秘密](http://jsninja.com/)副本，以全面了解 JavaScript。但是我们可以使用您的浏览器控制台来试试这个（可能在 Internet Explorer 中不起作用，请使用 Chrome）：

```
> function start() { function bob() { console.log('bob'); } bob() };
> start()
> bob
> bob()
> ReferenceError: bob is not defined 
```

所以你可以看到`bob`里面的函数`start`不在`start`函数之外的范围内。这样做的原因有很多。

# cron - 我的 cron 工作不起作用

> ID：14858137
> 
> 赞同：3
> 
> 时间：2013-02-13T16:25:29.263
> 
> 标签：cron, crontab, cpanel

我在这里使用 cpanel 我设置了一个 cron

```
wget -O /dev/null http://www.mysite.com/cron.php?para1=value&para2=value2 
```

这是行不通的，但只有一次我收到过这样的电子邮件。

```
Resolving mysite.com... *ip address*  
Connecting to mysite.com|*ip address*|:80... connected.  
HTTP request sent, awaiting response... 200 OK  
Length: 164 [text/html]  
Saving to: `/dev/null'  

0K    100% 7.11M=0s 
```

请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T16:21:05.780

如果您使用的是最新版本的 cPanel，您将通过 jailshell 执行您的 cronjobs（除非您的 cPanel 帐户启用了 Normal bash shell）。因此，您需要：

1.  使用命令的绝对路径。
2.  使用 curl，因为在 jailshell 中未启用 wget。

以下是使用绝对路径并使用 curl 代替 wget 的修改命令：

```
/usr/bin/curl http://www.mysite.com/cron.php?para1=value&para2=value2 >/dev/null 2>&1 
```

您可以删除“ >/dev/null 2>&1 ”以启用命令的输出以及正在检查的任何 url 的来源，以便通过电子邮件发送给您。

# java - Java - MimetypesFileTypeMap 总是返回应用程序/八位字节

> ID：14858147
> 
> 赞同：2
> 
> 时间：2013-02-13T16:25:57.857
> 
> 标签：java, file, mime-types

我正在尝试从文件中获取 mime 类型，但它似乎总是返回

```
 application/octet

 MimetypesFileTypeMap mftm = new MimetypesFileTypeMap();
 System.out.println("Mime Type of " + file.getName() + " is " +
                     mftm.getContentType(file)); 
```

我知道有问题的文件是png

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:54:14.790

更好的尝试：

```
FileTypeMap.getDefaultFileTypeMap(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T04:53:36.597

仅供参考 - 如果这是 Java 7，则早期 Java 7 JRE 中有一个已知错误已修复：[http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7096063](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7096063)

# iphone - 是否可以对齐 UITextField 的 clearButton

> ID：14858153
> 
> 赞同：0
> 
> 时间：2013-02-13T16:26:16.327
> 
> 标签：iphone, ios, objective-c, uitextfield

是否可以对齐 UITextField 的**clearButton**？

我以编程方式将按钮添加到 textField：

```
_usernameTextField.clearButtonMode = UITextFieldViewModeWhileEditing; 
```

但它的位置比文本字段的中心低一点。

![在此处输入图像描述](../Images/5fd28cb8bd5f85b3f6700570d0872aea.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:30:32.633

您可以扩展`UITextField`和覆盖[`clearButtonRectForBounds:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextField_Class/Reference/UITextField.html#//apple_ref/occ/instm/UITextField/clearButtonRectForBounds%3a)并提供自定义矩形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:29:36.580

最终我`UITextField`继承了函数并覆盖了函数`clearButtonRectForBounds:`。

**。H**

```
#import <UIKit/UIKit.h>

@interface TVUITextFieldWithClearButton : UITextField

@end 
```

**.m**

```
#import "TVUITextFieldWithClearButton.h"

@implementation TVUITextFieldWithClearButton

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)awakeFromNib
{
    self.clearButtonMode = UITextFieldViewModeWhileEditing;
}

- (CGRect)clearButtonRectForBounds:(CGRect)bounds
{
    return CGRectMake(bounds.size.width/2-20 , bounds.origin.y-3, bounds.size.width, bounds.size.height);
}

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:54:20.307

您是否尝试过字段本身的 contentVerticalAlignment 属性？

```
usernameField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter; 
```

最初引用：[为什么清除按钮不与 UITextField 中的文本对齐？](https://stackoverflow.com/questions/3437884/why-doesnt-the-clear-button-aligned-with-the-text-in-a-uitextfield)

# php - PHPSoap 将不可重复的字段转换为数组以防多次出现

> ID：14858155
> 
> 赞同：0
> 
> 时间：2013-02-13T16:26:21.083
> 
> 标签：php, soap

我已经定义了一个 SOAP webservice，它的 xsd 类型定义了一个不可重复的字段。

如果我提供了该字段的多次出现，我希望 PHPSoap 抛出异常或错误，但它会将其转换为数组（如果允许重复，则如预期的那样）。

这是 WSDL 的 XSD 部分的摘录：

```
<xsd:complexType name="OrderItem">
    <xsd:sequence>
        <xsd:element type="xsd:string" name="orderId" maxOccurs="1"/> <!-- maxOccurs is useless as default value is 1 but to be suremore than ... -->
        <xsd:element type="xsd:string" name="sku"/>
    </xsd:sequence>
</xsd:complexType> 
```

如果我发送此请求消息，我会在 SOAP 层后面得到一个数组（我预计会出现异常）：

```
<OrderItem>
    <orderId>12345685</orderId>
    <sku>SKU123456</sku>
    <orderId>12345686</orderId>
</OrderItem> 
```

这是收到的 OrderItem 对象的 var_dump：

```
OrderItem::__set_state(array(
  'orderId' => 
    array (
      0 => '12345685',
      1 => '12345686',
   ),
  'sku' => 'SKU123456', 
```

)

这是正常的吗？

# load - 用 C 编程

> ID：14858156
> 
> 赞同：-1
> 
> 时间：2013-02-13T16:26:21.937
> 
> 标签：load, save

我需要有关此代码的帮助：

请删除我的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:44:18.310

我最近实际上做了一个“文件加密/解密”。它不仅有一个相当不错的选项菜单，它还处理文件处理。不是最好的评论，也许有点乱，但我很确定，如果你读了它，你会发现它很有用，或者至少得到一些启发。

我建议先阅读“man()”函数，或者使用“./a.out -h”编译并运行它，以便更轻松地了解代码。

```
#include <stdio.h>
#include <stdlib.h>

/* ENCRYPTING FILES
  15.Dec.2012
  By Morten Lund */

#define ALPHA "\\~!?=#)%(&[{]}|@,.;:-_*^+<>1234567890abcdefghijklmnopqrstuvwxyzABCDEFG HIJKLMNOPQRSTUVWXYZ/$"
#define CRYPT_ALPHA "/#UwVM{>12E+j,4amN&stin]Ao_6}Q|7q[!f(FJKcLBz^)XYdhZkl9e?Wv@u;35yHrg< P*pSGTx=Ib~%R0$O.8:-DC\\"
#define ALPHA_SIZE sizeof(ALPHA)

void man();
void crypt(FILE *fpIN, FILE *fpOUT, char mode);
void replaceOriginal(char *inFileName, char *outFileName);

int main(int argc, char* argv[]) {

// Check if ALPHA and CRYPT_ALPHA is same size
if (sizeof(ALPHA) != sizeof(CRYPT_ALPHA)) {
    printf("ALPHA and CRYPT_ALPHA is not the same size!!");
    return EXIT_FAILURE;
}

/*------START-------OPTIONS MENU:-------START-----*/

char *inFileName;               // Input file name/dir
char *outFileName = "out.txt";  // Output file name/dir

char mode = 'N';                // E=encrypt, D=decrypt mode. N=Not set
int replaceMode = 0;            // Replace original file :default is OFF

int x;
for (x = 1; x < argc; x++) {

    if (strcmp(argv[x], "-e") == 0) {    // Encryption mode
        mode = 'E';
    }
    if (strcmp(argv[x], "-d") == 0) {    // Decryption mode
        mode = 'D';
    }
    if (strcmp(argv[x], "-r") == 0) {    // Replace original file
        replaceMode = 1;
    }
    if (strcmp(argv[x], "-f") == 0) {    // Input file option
        x++;
        inFileName = argv[x];
    }
    if (strcmp(argv[x], "-o") == 0) {    // Output file option
        x++;
        outFileName = argv[x];
    }
}
/*------END-------OPTIONS MENU:--------END-------*/

FILE *fpIN, *fpOUT; // Creating file pointer to in and output file

// Check if mode is set to E OR D. Check if input and output file is set.
if (mode == 'E' || mode == 'D' && inFileName != NULL && outFileName != NULL) {

    // If inFileName exists and is readable, it is opened, else return EXIT_FAILURE 
    if ((fpIN = fopen(inFileName, "r")) == NULL) {
        printf("\nERROR! Input file: %s\nFile does not exist or is not readable!\n\n", inFileName);

        fclose(fpIN);
        return EXIT_FAILURE;
    }

    // Check if Output file allready exist.
    if ((fopen(outFileName, "r")) != NULL) {
        printf("\nOutput file: %s\nFile allready exist, do you want to overwrite it? [Y/N]: ", outFileName);

        char choice;
        scanf("%c", &choice);

        while (choice == 'N' || choice == 'n')
            return EXIT_FAILURE;
    }

    // If outFileName is writeble, it is opened, else return EXIT_FAILURE
    if ((fpOUT = fopen(outFileName, "w")) == NULL) {
        printf("\nERROR! Output file: %s\n File or location is not writeble!\n\n", outFileName);

        fclose(fpIN);  // Closing input pointer
        fclose(fpOUT); // and output pointer
        return EXIT_FAILURE;
    }

    printf("\nInput file: %s\n", inFileName);
    printf("Output file: %s\n", outFileName);
    printf("mode (E)ncryption (D)ecrypting: %c\n", mode);
    crypt(fpIN, fpOUT, mode);

    fclose(fpIN);  // Closing input pointer
    fclose(fpOUT); // and output pointer
} else
    man();

// Check if set, and if, then replace original file
if (replaceMode)
    replaceOriginal(inFileName, outFileName);

return EXIT_SUCCESS;
}

void crypt(FILE *fpIN, FILE *fpOUT, char mode) {

char *alphaFrom, *alphaTo;      // Alphabet to copy from, to

if (mode == 'E') {               // If mode=Encrypt, copy from ALPHA to CRYPT_ALPHA
    alphaFrom = ALPHA;
    alphaTo = CRYPT_ALPHA;
}
else if (mode == 'D') {          // If mode=Decrypt, copy from CRYPT_ALPHA to ALPHA
    alphaFrom = CRYPT_ALPHA;
    alphaTo = ALPHA;
}

char curChar; int i;                        // Current character, and counter (i)
while ((curChar = fgetc(fpIN)) != EOF) {    // Assign curChar from fpIN as long it's not EOF

    for (i = 0; i < ALPHA_SIZE; i++) {      // For every character in alphabet size

        if (curChar == alphaFrom[i])        // If character = alphaFrom, replace with alphaTO
            fputc(alphaTo[i], fpOUT);
    }

    if (curChar == '\n')                    // Finding \n and inserting with \n
        fputc('\n', fpOUT);
    if (curChar == '\t')                    // Finding \t and inserting with \t
        fputc('\t', fpOUT);
}

}

void replaceOriginal(char *inFileName, char *outFileName) {

    if (remove(inFileName) == 0) {                  // Remove inFileName
        if (rename(outFileName, inFileName) == 0)   // Rename outFileName
            printf("File %s successfully replaced\n", inFileName);
    } else
        printf("Couldn't delete %s.. Replace failed", inFileName);
}

void man() {

printf("\n.....Simple Crypter.....\n\nUsage: sCrypter [Arguments] -f [input file]\n\tOr: sCrypter -e -f file.txt\n\tOr: sCrypter -d -r -f file.txt\n\tOr: sCrypter -e -f file.txt -o file2.txt\n\n");
printf("  [-h]  This page.\n");
printf("  [-f]  Set input file.\n");
printf("  [-o]  Set output file [OPTIONAL] default: out.txt.\n");
printf("  [-e]  Encrypting input file.\n");
printf("  [-d]  Decrypting input file.\n");
printf("  [-r]  Replace the input file with the new output file.\n\n");

printf("Warning! If [-r] is used, out.txt will be used as tmp file.\n");
printf("[-o] can be used in combination with [-r] to insure that another tmp file is used.\n\n");
} 
```

对不起，我的英语不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:34:08.840

从您的问题 1 即菜单，1）我想要一个例如菜单：[l]oad - [s]ave，当我写“L”时，我会去：

printf("输入包含船舶信息的文件名：");

对于这部分，char inpChar；

```
do {
    printf("enter menu: [l]oad - [s]ave\n");
    scanf("%c", &inpChar);
} while((inpChar != 'l') && (inpChar != 'L') && (inpChar != 's') && (inpChar != 'S'));

if((inpChar == '1') || (inpChar == 'L'))
{
     printf("Enter the name of the file containing ship information: ");
     scanf("%s", filename);
} 
```

对于第二季度的打印归档，

```
file = fopen(filename, "a");
fprintf(file, "%s", line);
fclose(file); 
```

# ruby-on-rails - 查询帖子在哪里有标签，需要在每个类别中

> ID：14858163
> 
> 赞同：1
> 
> 时间：2013-02-13T16:26:32.240
> 
> 标签：ruby-on-rails, activerecord, rails-activerecord, rails-postgresql

我有一个可以有标签的帖子，一个标签有一个类别。现在我需要创建一个“已发布”的范围。只有在每个可用类别中都有标签时，才能发布帖子。换句话说。如果数据库包含 4 个 tagcategory 记录，则帖子应该在所有这 4 个类别中都有标签，才能被视为已发布。

一个帖子有很多标签（通过 tag_categories）。并且标签属于一个tag_category。一个标签类别有很多标签

在 post 实例上，我可以轻松创建这样的方法：

```
def has_tags_in_all_categories?
  #select all category id's
  category_ids = TagCategory.pluck(:id)
  #select all post tag id's
  tag_ids = self.tags.pluck(:tag_category_id)
  #create a new array with the category ids from the post.tags subtracted from all category ids
  remaining = category_ids.reject{|x| tag_ids.include? x}
  #if id's are left in the array -> Not all categories are filled in.
  remaining.empty?
end 
```

但是要在单个页面上显示所有已发布的帖子，我需要创建一个范围。遍历所有帖子并应用此方法，显然会导致大量不必要的数据库查询。

谁能帮我查询一下？

```
class Post < ActiveRecord::Base
    def self.published
      find(:all) #No clue here
    end
end 
```

数据库（对不起，我不知道如何使这个花哨）：

```
posts
    id
    title

posts_tags
    post_id
    tag_id

tags
    id
    tag_category_id
    name

tag_categories
    id
    name 
```

# batch-file - 将所有子目录内容向上复制到父目录的批处理文件？

> ID：14858166
> 
> 赞同：0
> 
> 时间：2013-02-13T16:26:32.197
> 
> 标签：batch-file, directory

我有一个目录，其中包含许多文本文件和其他存储在 RAR 文件中的数据位，但是每个 RAR 文件（出于一些我无法理解的荒谬原因）都存储在同名的目录中。因此，我有以下工作要做：

```
Parent Directory
 >AAAAA
  >AAAAA.rar
 >BBBBB
  >BBBBB.rar
 >CCCCC
  >CCCCC.rar 
```

通常我可以自己手动进入并提取每个子文件夹，但是有数百个这样的小子文件夹，每个子文件夹中都有一个文件。

使用 .bat 将每个 .RAR 文件向上拉到一个目录的最有效方法是什么，以便可以更轻松地一次选择和解压缩它们并节省我几个小时的痛苦提取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:34:34.493

我可以推荐：使用 Windows 搜索工具搜索 *.rar。选择所有结果并将它们拖到所需的文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:24:58.670

以下代码将为您工作，只需根据您的要求更改文件夹路径

```
 @Echo OFF
    SET PATH1= E:\BackUp\
    FOR /F %%G IN ('DIR /b %PATH1%') DO CALL :Folders "%%G" 

    EXIT /b

    :Folders
    SET str1=%~1
    Echo %str1%
    copy %PATH1%%str1% E:\BackUp 
```

# html - 为什么 CSS transform,translate 会改变旋转元素的旋转？

> ID：14858167
> 
> 赞同：3
> 
> 时间：2013-02-13T16:26:33.140
> 
> 标签：html, css, d3.js

我有许多旋转的元素，我想翻译它们以改变它们的水平位置。但是，当我执行简单的变换/平移时，元素的旋转丢失并恢复到原来的状态（没有旋转）。

我通过执行变换/平移/旋转以移动元素来解决此问题，但我很好奇为什么在平移 (x,y) 时旋转会丢失？我正在使用 d3.js，那么它与该库如何处理转换有关，还是 CSS 自然地做到了这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T16:33:10.390

这与每个 css 属性相同。

由于级联性质，如果您重新定义转换声明，则只会应用最新的更改：

```
.element{
   transform:rotate(angle);
   transform:translate3d(x,y,z);     /* now only the translation will be applied*/
} 
```

为了同时应用这两种转换，它们需要在一个声明中：

```
.element{
   transform:rotate(angle) translate3d(x,y,z);
} 
```

由于 D3 使用 CSS 进行转换，以前的将被最新的覆盖。

[小例子](http://jsfiddle.net/SYKLE/)

# phpstorm - 带有 PHPStorm 的 CodeSniffer 会产生错误

> ID：14858172
> 
> 赞同：1
> 
> 时间：2013-02-13T16:26:59.227
> 
> 标签：phpstorm, codesniffer

我正在使用 PHPStorm 开发一个 WordPress 项目。为了美化我的代码，我为 WP 下载了以下 CodeSniffer 规则并将它们放在我的项目文件夹中的构建目录中：[https ://github.com/mrchrisadams/WordPress-Coding-Standards](https://github.com/mrchrisadams/WordPress-Coding-Standards)

现在，当我将 PHPStorm 设置为使用 ruleset.xml 时，出现以下错误：

```
PHP Code Sniffer
phpcs: PHP Fatal error: Cannot redeclare class WordPress_Sniffs_Strings_DoubleQuoteUsageSniff in /var/www/projectname/build/CodeSniffer/Sniffs/Strings/DoubleQuoteUsageSniff.php on line 31
PHP Stack trace:
PHP 1\. {main}() /usr/bin/phpcs:0
PHP 2\. PHP_CodeSniffer_CLI->process() /usr/bin/phpcs:37
PHP 3\. PHP_CodeSniffer->process() /usr/share/php/PHP/CodeSniffer/CLI.php:561
PHP 4\. PHP_CodeSniffer->populateTokenListeners() /usr/share/phpPHP/CodeSniffer.php:458
PHP 5\. PHP_CodeSniffer::autoload() /usr/share/php/PHP/CodeSniffer.php:0 
```

我还在基于 Drupal 拥有自己的 ruleset.xml 的另一个项目（不是同时）工作 - 它可以正常工作。

有谁知道这样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-03T12:16:36.087

此错误与 PhpStorm 无关，由 PHP_CodeSniffer 自身生成。

当您的 Sniff 类没有正确命名时，它就会出现。他们必须严格遵循 Sniff 的目录结构和文件。

如果您的课程名为 WordPress_Sniffs_Strings_DoubleQuoteUsageSniff

它应该位于：/Standards/WordPress/Sniffs/Strings/DoubleQuoteUsageSniff.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T13:09:59.403

还要确保包含您的嗅探的文件夹与 ruleset.xml 中指定的名称相同。

例如，如果您的 ruleset.xml 说：

```
<ruleset name="Joomla"> 
```

或者

```
<ruleset name="Wordpress"> 
```

包含所有嗅探器的文件夹可以命名为：

```
/php/pear/PHP/CodeSniffer/Standards/Joomla/... <= inside you will have ruleset.xml and Sniffs folder 
```

或者

```
/php/pear/PHP/CodeSniffer/Standards/Wordpress/... <= inside you will have ruleset.xml and Sniffs folder 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T06:32:47.763

您自己的规则集似乎包含此规则（WordPress Strings DoubleQuoteUsageSniff）两次，这可能会导致您的规则集中止。

我建议您查看您的 ruleset.xml 并删除这两个嗅探之一。这可能是由于首先包含另一个规则集而引起的。

# c# - WebBrowser 控件 WebBrowserDocumentCompletedEventArgs LocalPath

> ID：14858173
> 
> 赞同：0
> 
> 时间：2013-02-13T16:26:59.413
> 
> 标签：c#, winforms, .net-4.0, webbrowser-control, uri

我有以下方法可以将 winforms `WebBrowser`Control 导航到`urlString`.

```
private void NavigateToUrl(string urlString)
{
    this.webContainer.Navigate(urlString);
} 
```

而且我已经覆盖`OnWebPageLoad`了方法，我在其中记录了`eargs.Url.LocalPath`属性。

```
public override void OnWebPageLoad(object sender, WebBrowserDocumentCompletedEventArgs eargs)
        {

LogMessage(LogFacilityName,
                    String.Format("OnWebPageLoad() : Unknown page was loaded (LocalPath = '{0}').", eargs.Url.LocalPath),
                    LogType.Warning);
} 
```

问题是有时`eargs.Url.LocalPath`等于“/”（单斜杠）。但是当我在调用导航之前记录 url 时，我知道它不等于“/”（单斜杠）并且是我的 html 表单之一。

**为什么会发生？任何想法？** [这是 eargs.Url.LocalPath MSDN 文档](http://msdn.microsoft.com/en-us/library/vstudio/system.uri.localpath%28v=vs.90%29.aspx)

# awk - awk中的整数除法

> ID：14858182
> 
> 赞同：34
> 
> 时间：2013-02-13T16:27:25.660
> 
> 标签：awk, integer, division

我想`awk`使用整数除法将两个数字相除，即截断结果。例如

```
k = 3 / 2
print k 
```

应该打印`1`

根据[手册](http://www.gnu.org/software/gawk/manual/html_node/Arithmetic-Ops.html)，

> 分配; 因为 awk 中的所有数字都是浮点数，所以结果***不会四舍五入为整数***

是否有任何解决方法来获取整数值？

原因是我想获取具有*整数*索引 [0 到 num-1]的数组的*中间元素。*

 ** * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-13T16:28:53.593

使用该`int`函数获取结果的整数部分，向 0 截断。这将生成最接近结果的整数，位于结果和 0 之间。例如，`int(3/2)`是 1，`int(-3/2)`是 -1。

资料来源：[AWK 手册 - 数值函数](https://www.gnu.org/software/gawk/manual/html_node/Numeric-Functions.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-02-19T00:12:02.383

在简单的情况下，您可以安全地使用`int()`which 截断为零¹：

```
awk 'BEGIN { print int(3 / 2) }'    # prints 1
gawk 'BEGIN { print int(-3 / 2) }'  # prints -1; not guaranteed in POSIX awk 
```

请记住，awk 始终使用双精度浮点数²和浮点算术³。获得整数和整数运算的唯一方法是使用外部工具，例如标准`expr`实用程序：

```
awk 'BEGIN { "expr 3 / 2" | getline result; print result; }'    # prints 1 
```

这真的很*尴尬*，又长又慢，……但安全又便携。

* * *

^(¹在[POSIX awk](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/awk.html#tag_20_06_13_12 "POSIX awk：算术函数")中，仅对正参数保证截断为零：*int(x) — 返回截断为整数的参数。当 x>0 时，截断应朝向 0。* [GNU awk](https://www.gnu.org/software/gawk/manual/gawk.html#Numeric-Functions "GNU awk：数值函数") (gawk) 使用向零截断，即使是负数：*int(x) — 返回最接近 x 的整数，位于 x 和零之间并被向零截断。例如，int(3) 是 3，int(3.9) 是 3，int(-3.9) 是 -3，int(-3) 也是 -3。*)
^(²数值表达式在 POSIX[中的 awk](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/awk.html#tag_20_06_13_02 "POSIX awk：awk 中的表达式")表达式中指定为双精度浮点数。)
^(³ *所有算术都应遵循 ISO C 标准规定的浮点算术语义（见[源自 ISO C 标准的概念](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap01.html#tag_17_01_02 "POSIX介绍：源自ISO C标准的概念")）。*— [POSIX awk：算术函数](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/awk.html#tag_20_06_13_12 "POSIX awk：算术函数"))

* * *

如果您选择使用浮点数，您应该了解它们的怪癖并准备好发现它们并避免相关的错误。几个可怕的例子：

*   无法表示的数字：

    ```
    awk 'BEGIN { x = 0.875; y = 0.425; printf("%0.17g, %0.17g\n", x, y) }'
    # prints 0.875, 0.42499999999999999 
    ```

*   [舍入误差](http://en.wikipedia.org/wiki/Round-off_error)累积：

    ```
    awk 'BEGIN{s=0; for(i=1;i<=100000;i++)s+=0.3; printf("%.10f, %d\n",s,int(s))}'
    # prints 29999.9999999506, 29999 
    ```

*   舍入错误会破坏比较：

    ```
    awk 'BEGIN { print (0.1 + 12.2 == 12.3) }'    # prints 0 
    ```

*   精度随幅度降低，导致无限循环：

    ```
    awk 'BEGIN { for (i=10^16; i<10^16+5; i++) printf("%d\n", i) }'
    # prints 10000000000000000 infinitely many times 
    ```

阅读更多关于花车如何工作的信息：

1.  Stack Overflow 标签[浮点](/questions/tagged/floating-point "显示标记为“浮点”的问题")wiki

2.  维基百科文章[浮点](https://en.wikipedia.org/wiki/Floating_point)

3.  [GNU awk 任意精度算术](https://www.gnu.org/software/gawk/manual/gawk.html#Arbitrary-Precision-Arithmetic "GNU awk：算术和任意精度算术与 gawk")- 包含有关特定实现和一般知识的信息

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-04T18:41:19.603

安全快速的 awk 整数除法可以通过以下方式完成：

```
q=(n-n%d)/d+(n<0) 
```*

# .net - 在 Windows 窗体上创建一个全局计数器来计算按钮按下次数

> ID：14858186
> 
> 赞同：0
> 
> 时间：2013-02-13T16:27:52.613
> 
> 标签：.net, winforms, c++-cli

这似乎是一个非常简单的问题，但对于我的生活（我对编码相当陌生）我找不到答案。

因此，基础是，我有一个名为 listbox1 的列表框，我通过按几个按钮中的一个（每个按钮都有一个要添加到列表的“值”）来填充各种条目，但我希望列表中的每个元素都是递增。例如：

1.  对象 Z
2.  对象 F
3.  对象 W

等等等等。但到目前为止，我所做的只是对每个单独的按钮进行计数，这意味着计数只会增加同一个按钮，而不是全部。例如：

1.  坚定的靴子
2.  怒火之靴
3.  怒火之靴
4.  坚定的靴子

图片显示我在列表框中得到的内容： [程序图片](http://i632.photobucket.com/albums/uu49/Jamy981/BDL-Glacorssnippet.png)

所以按下右边的按钮会在列表框中添加一个条目/

```
private: System::Void btn_steadfast_Click(System::Object^  sender, System::EventArgs^  e) 
     {
        static int i = 1;
        this->listBox1->Items->Add(i + ". Steadfast Boots ");
        i++;

private: System::Void btn_ragefire_Click(System::Object^  sender, System::EventArgs^  e) {
        static int i = 0;
        this->listBox1->Items->Add(i + ". Ragefire Boots ");
        i++;
     } 
```

我相信我需要一个全局计数器，每个按钮在按下时都会引用它，只是不知道如何去做。

任何帮助将非常感激。

问候杰米

* * *

额外信息

* * *

这是我尝试过的代码（注释掉的是我试图输入的内容，同时还删除了过时的信息，例如使用“i”并尝试将“Form1”更改为 BDLGlacors 以表示表单名称无济于事，因为是程序中的第二种形式）：

```
#pragma endregion
private: System::Void BDLGlacors_Load(System::Object^  sender, System::EventArgs^  e) {
         }
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {

             MessageBox::Show("Return to Menu?");
             BDLGlacors::Close();
         }
private: System::Void listView1_SelectedIndexChanged(System::Object^  sender, System::EventArgs^  e) {
         }
/*public ref class Form1 : public System::Windows::Forms::Form{
private:
    int buttonPressCount;

public:
    Form1()
    {
        buttonPressCount = 0;

    }*/
private: System::Void btn_steadfast_Click(System::Object^  sender, System::EventArgs^  e) 
     {
        static int i = 1;
        this->listBox1->Items->Add(/*buttonPressCount*/ i + ". Steadfast Boots ");
        //buttonPressCount++;
        i++;            
     }

private: System::Void btn_ragefire_Click(System::Object^  sender, System::EventArgs^  e) 
     {
        static int i = 1;
        this->listBox1->Items->Add(/*buttonPressCount*/i + ". Ragefire Boots ");
        //buttonPressCount++;
        i++;
     } 
```

为长时间的编辑道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:40:22.807

我不确定我是否理解，但也许您希望将计数作为一个字段：

```
public ref class Form1 : public System::Windows::Forms::Form
{
private:
    int buttonPressCount;

public:
    Form1()
    {
        buttonPressCount = 0;
        // ...
    }

private: System::Void btn_steadfast_Click(System::Object^  sender, System::EventArgs^  e) 
    {
        this->listBox1->Items->Add(buttonPressCount + ". Steadfast Boots ");
        buttonPressCount++;

private: System::Void btn_ragefire_Click(System::Object^  sender, System::EventArgs^  e) {
        this->listBox1->Items->Add(buttonPressCount + ". Ragefire Boots ");
        buttonPressCount++;
     }
}; 
```

# c# - 使用 IValueConverter 动态加载图像源

> ID：14858189
> 
> 赞同：3
> 
> 时间：2013-02-13T16:27:59.853
> 
> 标签：c#, wpf, ivalueconverter, imagesource, imultivalueconverter

我在使用 IValueconverter 时遇到问题并动态加载行网格图像：

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{

    string Type = (string)value;
    Uri uri;
    try
    {
        uri = new Uri("/XConsole;component/Images/" + Type + ".png", UriKind.Relative);
        return new System.Windows.Media.Imaging.BitmapImage(uri) { CacheOption = BitmapCacheOption.None };
    }
    catch (Exception e)
    {
        //donothing
    }
    uri = new Uri("/XConsole;component/Images/Type_SYSTEM.png", UriKind.Relative);
    return new System.Windows.Media.Imaging.BitmapImage(uri) { CacheOption = BitmapCacheOption.None };

} 
```

我想将对象的“类型”传递给转换器并加载不同的图像：

```
 <Image Grid.Column="0"  Width="25" Height="25" Margin="2,0" Source="{Binding Path=Type, Converter={StaticResource imageConverter}}" > 
```

但是有问题，因为没有加载图片！

如果我静态加载，没关系：

```
 <Image Grid.Column="0"  Width="25" Height="25" Margin="2,0" Source="/XconsoleTest;component/Images/Type_DB.png" > 
```

我在 UserControl.Resources 中加载了我的转换器：

```
<UserControl.Resources>
    <converters:ImageConverter x:Key="imageConverter"/>
</UserControl.Resources> 
```

帮我！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:11:14.073

如果您在代码中创建 URI，则必须编写完整的[Pack URI](http://msdn.microsoft.com/en-us/library/aa970069.aspx)，包括该`pack://application:,,,`部分。在 XAML 中，这不是必需的，因为它是由 string-to-ImageSource TypeConverter 自动添加的。

```
var type = (string)value;
var uri = new Uri("pack://application:,,,/XConsole;component/Images/" + type + ".png"); 
```

* * *

请注意，上面的代码示例使用小写`type`标识符而不是`Type`避免与`Type`类混淆。

# android - 架构困境 - tabhost 中的嵌套片段或活动

> ID：14858191
> 
> 赞同：0
> 
> 时间：2013-02-13T16:28:00.303
> 
> 标签：android, android-fragments, android-actionbar, android-tabhost, android-fragmentactivity

我需要实现这样的构造 - 我有 TabHost，其中包含嵌套的 FragmentActivities。我尝试将 ActivityGroup 用于嵌入式 FragmentActivities，但得到了一个`android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@405ceb00 is not valid; is your activity running?`

我将在 Gingerbread android 版本上发布我的应用程序。但我想为应用程序实现良好的版本维护 - 不要为较新版本重新制作整个应用程序。但我已经用 FragmentActivities 构建了整个应用程序。所以我有一个难题要解决：1）使用 FragmentActivities 保存解决方案并使其与 TabHost 嵌套；2）重写应用程序并实现Fragment而不是Activity，并且只使用一个FragmentActivity；3）实现ActionBar解决方案；

我想通过良好的维护使其变得容易。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:17:20.973

我决定在我的应用程序的第一个版本中使用已弃用的 ActivityGroup 和 TabActivity。然后我会为较新的版本实现片段。

我使用[了本](http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html)教程，一切对我来说都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:57:55.053

后来，我重构了我的应用程序。ActivityGroup 是一个非常糟糕的解决方案。我在 Tabs 中使用 FragmentActivities 并在其中嵌套 Fragments。一切正常，比使用 ActivityGroups 更快。

# python - 在 Python 中强制使用函数参数类型？

> ID：14858192
> 
> 赞同：12
> 
> 时间：2013-02-13T16:28:02.833
> 
> 标签：python, types, interface

我在 Python 类中有一个函数，可以将接口添加到列表中。

```
def RegisterAsListener(self, inListener):
    self.__TransitListeners.append(inListener) 
```

这很好，因为一个类只需要从我的接口继承，获取这个对象，并为所有更新注册自己。

```
class ITransit():
    def TransitUpdate(self, data):
        raise NotImplementedError("You must define this function.") 
```

（假设我正确地制作了一个界面）

因为我不是这个项目中唯一的人，所以我不希望有人使用不正确的数据类型调用 RegisterAsListener 函数。我可以输入代码来检查寄存器函数中的类型，但是如果编译器只是在程序员试图输入不正确的数据类型时对他们大喊大叫，那会更容易。

```
def RegisterAsListener(self, IListener inListener):
    self.__TransitListeners.append(inListener) 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T16:42:17.920

虽然我强烈建议不要这样做，只使用抽象基类（[http://docs.python.org/2/library/abc.html](http://docs.python.org/2/library/abc.html)）强制执行某些方法，但这是可能的。

这是一个关于如何做这样的事情的例子：[http ://www.artima.com/weblogs/viewpost.jsp?thread=101605](http://www.artima.com/weblogs/viewpost.jsp?thread=101605)

```
# mm.py
registry = {}                                                                   

class MultiMethod(object):                                                      
    def __init__(self, name):                                                   
        self.name = name                                                        
        self.typemap = {}                                                       
    def __call__(self, *args):                                                  
        types = tuple(arg.__class__ for arg in args) # a generator expression!  
        function = self.typemap.get(types)                                      
        if function is None:                                                    
            raise TypeError("no match")                                         
        return function(*args)                                                  
    def register(self, types, function):                                        
        if types in self.typemap:                                               
            raise TypeError("duplicate registration")                           
        self.typemap[types] = function                                          

def multimethod(*types):                                                        
    def register(function):                                                     
        function = getattr(function, "__lastreg__", function)                   
        name = function.__name__                                                
        mm = registry.get(name)                                                 
        if mm is None:                                                          
            mm = registry[name] = MultiMethod(name)                             
        mm.register(types, function)                                            
        mm.__lastreg__ = function                                               
        return mm                                                               
    return register                                                             

    if hasattr(function, "__lastreg__"):                                        
        function = function.__lastreg__ 
```

以及使用它的代码：

```
import mm                                                                       

@mm.multimethod(int)                                                            
def spam(a):                                                                    
    print 'Calling the int method'                                              
    print '%s: %r' % (type(a), a)                                               

@mm.multimethod(float)                                                          
def spam(a):                                                                    
    print 'Calling the float method'                                            
    print '%s: %r' % (type(a), a)                                               

spam(5)                                                                         
spam(5.0) 
```

示例输出：

```
Calling the int method
<type 'int'>: 5
Calling the float method
<type 'float'>: 5.0 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-13T16:34:54.740

> 由于我不是这个项目中唯一的人，我不希望有人使用不正确的数据类型调用 RegisterAsListener 函数

彻底记录函数，然后让不正确的参数引发异常。的用户`RegisterAListener`应该能够使用文档来了解函数期望的数据类型，并且 - 如果给定的参数不正确 - 所产生的异常应该清楚地表明用户的`RegisterAListener`错误。

# image-processing - 基于像素距离的梯度

> ID：14858194
> 
> 赞同：0
> 
> 时间：2013-02-13T16:28:09.340
> 
> 标签：image-processing

我有一种算法，可以根据到蒙版中最近像素的距离创建灰度渐变。我通过构造一个半径增加的圆并根据圆的像素对掩码中的所有像素进行采样来找到像素：

```
for (x = 0; x < width; x++){ 
   for (y = 0; y < height; y++) {
      bool pixelFound = false;
      for (radius = 0; radius < resolution, pixelFound == false; radius++) {
         for (alpha = 0; alpha < 2 * PI; alpha += 1/radius) {
            xx = x + cos(alpha)*radius;
            yy = y + sin(alpha)*radius;

            if ( MaskHasPixel(xx, yy) ) {
               pixelFound = true;
               gradient = 1 - Magnitude(xx-x, yy-y) / resolution;
               WriteGradientForPixel(x,y, gradient);
            }
         }
      }
   }
} 
```

目前该算法非常慢 - 对于 512x512 的图像和 128x128 的掩码大小，它必须进行 512*512*384*41 = 4 127 195 136 次比较，这需要大量时间在 CPU 上进行计算。一种选择是在 GPU 上进行计算，但是否可以优化此算法以使其工作得更快？我希望最终获得相对较快的平滑渐变。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:51:48.657

好吧，至于**随后的 dilations**。它们可以通过修改后的算法来完成。假设您在零背景上有一些掩码。把它放到你的图像上（通过放大零背景，这个阶段的图像可能是一个数组`unsigned short`或`unsigned int`取决于它的大小——我们需要输入它的距离像素值）。

接下来的操作是距离计算。为了更快地做到这一点，首先我们找到掩码的边框并将其保存到坐标数组中。之后，我们遍历该数组并填充 8 个连接的非零像素，同时填充一个新的边框数组。

在第一次迭代结束时，第`free()`一个边界数组并使用新数组运行第二次迭代，将 2 放入邻居并填充下一个边界数组。

重复迭代，直到最后一个边框数组将有 0 个成员。

* * *

**另一个变体**是直接算法，就像你的一样。计算并存储掩码的边界。好的。现在开始扫描扩展至图像大小蒙版的所有像素。

如果像素值 ==0，我们遍历边界的所有像素，计算到它们的距离并存储最小距离。这将是梯度的值。

可以通过仅计算距我们点一侧的边界像素的距离来改进该算法。为此，我们不仅应该存储边界像素的坐标，还应该存储从蒙版重心到它们的角度。然后在扫描边界时，我们可以丢弃与当前图像点角度相等的像素，并掩码重心±某个值（π/2？）。

另一种更快地进行计算的方法是用一些步长将正弦和余弦制成表格，如此之小，以至于相邻成员之间的值可以忽略不计。这一步可以是图像角度从其中心的角度像素大小。甚至更大。

* * *

当然对于这个问题还有很多其他不同的优化方法，也许其中一些会更快。这是调查的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:09:48.610

我找到了一种让算法快 3 倍的方法： 1\. 计算我的边框蒙版的几何中心。2\. 计算从当前像素到上述中心的方向： dir = (center - pixel).normalized 3\. 检查每一个朝向中心的像素是否是边界像素。4\. 如果是，则搜索结束。5.如果没有找到靠近中心的边界像素，则使用原始较慢的方法。

另一种加快速度的方法是缩小原始图像的大小。这会有很大帮助。

# android - 有没有办法实现Android的拖放到较低的Android版本？

> ID：14858196
> 
> 赞同：0
> 
> 时间：2013-02-13T16:28:14.877
> 
> 标签：android, facebook-android-sdk

我刚刚在 Android SDK 11 中发现了一个非常好的东西，那就是[Drag and Drop](http://developer.android.com/guide/topics/ui/drag-drop.html)。

我的问题是，此功能需要 API 级别 11。

我的问题是：

有什么办法可以在以前的 Android 版本（如 2.3）中使用此功能？（API 级别 10）

# list - 限制 SP2010 中的用户权限，以便他们可以添加列表项但一旦保存就不能编辑它们？

> ID：14858201
> 
> 赞同：0
> 
> 时间：2013-02-13T16:28:25.883
> 
> 标签：list, sharepoint-2010, rights-management

如果您能帮我解决这个问题，我将不胜感激。我很棒的公司使用 SP2010，我得到了使用它来解决这个问题的任务——尽管我不是程序员（基本的 html 仍然可以）。

我需要一个具有以下功能的简单年假清单：

1.  用户组（约 100 名成员）应该能够在包含年假数据的列表中创建列表项。列是：姓名、休假开始日期、休假结束日期、团队负责人等。

2.  一旦他们填写了新的项目表单，工作流就会通知团队负责人访问该项目并将“批准状态”列设置为“批准”或“拒绝”。

3.  根据此列值，另一个工作流会通知请求者该决定。

**4\. 直线经理将栏目设置为已批准后，项目应该被锁定，因此用户应该可以在列表中看到他们的项目，但他们应该不能编辑它。**

听起来很简单，但我对第 4 点有很大的问题。因为 Sharepoint 不区分列表项的创建和编辑权限。因此，请求者可以编辑批准项目的日期。

任何提示如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T00:08:04.370

SharePoint 确实区分了创建权限和编辑权限，只是在默认权限级别上没有区别。如果需要，您可以自由创建自己的权限级别。（您也可以修改默认权限级别，但我建议不要这样做，因为它只会导致混淆。）有关此主题的更多信息可以在 TechNet 上找到：[http ://technet.microsoft.com/en-us/library /cc263239(v=office.14).aspx](http://technet.microsoft.com/en-us/library/cc263239(v=office.14).aspx)

话虽如此，我认为这种方法不能解决您的问题。您可以使用您的工作流程将项目级别权限（只读）分配给已批准的项目。如果您通过 SharePoint Designer 创建工作流，此链接可能很有用：[http ://spcycle.blogspot.be/2012/01/how-to-create-workflow-to-change-item.html](http://spcycle.blogspot.be/2012/01/how-to-create-workflow-to-change-item.html)

# php - 我应该如何使用htmlentities来显示utfó（不是Ã³）

> ID：14858202
> 
> 赞同：1
> 
> 时间：2013-02-13T16:28:28.103
> 
> 标签：php, email, encoding, html-email

我正在用 PHP 写一篇小型时事通讯

我正在使用 PHP `htmlentities($str)`，所以我在客户端电子邮件中的编码没有问题。

这`$str`是从mysql出来的。

我看到`Ã³`它什么时候应该是`ó`在客户端。

我还在时事通讯中写了一些文本，我`echo "&oacute;";`和我在客户端中看到它为`ó`.

然后我想我必须在`$str`应用之前做一些处理，`htmlentities`但我不明白我该怎么做。

我怎么知道出了什么问题（我应该做什么治疗）`$str`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:47:00.130

这解决了问题

[https://stackoverflow.com/a/10539209/912450](https://stackoverflow.com/a/10539209/912450)

```
//You must manually specify the encoding (UTF-8) for htmlentities()
echo htmlentities($str, null, "UTF-8"); 
```

问题似乎是（根据文档），如果未指定 UTF-8，则在 5.4.0 之前的 PHP 版本中，ISO-8859-1 是`htmlentities`.

如果`$str`是 UTF8 编码，那么它只能在 PHP>=5.4.0 中正常工作，`htmlentities`如果没有指定编码，则 UTF-8 是默认编码。

# java - 从 PriorityQueue 中删除具有相同优先级的元素

> ID：14858205
> 
> 赞同：2
> 
> 时间：2013-02-13T16:28:39.333
> 
> 标签：java

执行此代码时：

```
Queue q=new PriorityQueue();
q.add(1);
q.add(1);
q.add(1);
q.add(2);
System.out.println(q);
System.out.println(q.remove(1));
System.out.println(q); 
```

输出是：

```
[1, 1, 1, 2]
true
[1, 2, 1] 
```

有人可以解释一下输出中值 1 发生变化的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:47:09.707

这是因为`System.out.println(q`); 打印 PriorityQueue.iterator 和 PriorityQueue API 返回的元素

```
The Iterator provided in method iterator() is not guaranteed to traverse the elements of the priority queue in any particular order. If you need ordered traversal, consider using Arrays.sort(pq.toArray()). 
```

# php - 在不刷新页面的情况下获取复选框值

> ID：14858206
> 
> 赞同：0
> 
> 时间：2013-02-13T16:28:42.563
> 
> 标签：php, javascript, html, ajax, get

我有一个复选框表：

```
<td><input id="box" name="box" type="checkbox" value="1" checked /></td>
<td><input id="box" name="box" type="checkbox" value="2" checked /></td>
<td><input id="box" name="box" type="checkbox" value="3" checked /></td> 
```

当我选中或取消选中该框（一次一个）时，我想提交复选框值**而不将页面刷新**到：

```
if (isset($_GET['box'])) {
   echo "Success!"
} 
```

到目前为止，我得到了这个 javascript 代码来检查该框是选中还是未选中：

```
function validate(){ 
if (document.getElementById('box').checked){
    alert("checked") ;
}else{
    alert("You didn't check it! Let me check it for you.")
}
} 
```

我想在它上面添加 AJAX，但是到目前为止我尝试的所有代码片段都不适合我的代码。我会感谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T16:40:45.347

您想使用 AJAX。这是一个没有 AJAX 的 jQuery 示例：

```
<td><input id="box1" class="box" name="box1" type="checkbox" value="1" checked /></td>
<td><input id="box2" class="box" name="box2" type="checkbox" value="2" checked /></td>
<td><input id="box3" class="box" name="box3" type="checkbox" value="3" checked /></td> 
```

JavaScript：

```
$(document).ready(function() {
  $('.box').on('change', function(event) {
    var checkbox = $(event.target);
    var isChecked = $(checkbox).is(':checked');
    alert('checkbox ' + checkbox.attr('id') + ' is checked: ' + isChecked);
  });
}); 
```

演示：http: [//jsbin.com/ipasud/1/](http://jsbin.com/ipasud/1/)

现在不再进行`alert`调用，而是对后端 URL 执行 $.post，该 URL 接受一个 id 和一个选中或未选中的值。例如，

```
$.post('/submit-checkbox.php', {id: checkbox.attr('id'), value: isChecked}); 
```

如果我们把它放回代码中，它看起来像这样：

```
$(document).ready(function() {
  $('.box').on('change', function(event) {
    var checkbox = $(event.target);
    var isChecked = $(checkbox).is(':checked');
    $.post('/whatever-your-url-is.php', {id: checkbox.attr('id'), value: isChecked});
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:48:07.050

您可以使用 jQuery：http: [//jquery.com/](http://jquery.com/)

```
<script type="text/javascript">
    $(document).ready(function(){
        $('#box').click(function(){
           var selectedValue = $(this).value();
           submitValue(selectedValue);
        });

    });

    function submitValue(valueSelected){

       var request = $.ajax({
                 url: URL_OF_YOUR_PHP_FILE,
                 type: "POST",
                 dataType: 'json',
                     data: {value: valueSelected}
              });

        request.done(function(results) {
           //DO WHAT YOU WANT WITH YOUR RESULTS
        });
    }
</script> 
```

然后在您的 PHP 文件中，您可以获得在 $_POST['value'] 中选择的值并返回您想要的值（以 JSON 格式）。

# java - 如何找到午夜过后最快的 Java 日期？

> ID：14858207
> 
> 赞同：2
> 
> 时间：2013-02-13T16:28:46.720
> 
> 标签：java, date, calendar

假设我有一个日期对象标记为 2013 年 2 月 13 日晚上 11 点。我试图在凌晨 3 点获得下一个最快的日期对象。所以在这种情况下，它将是 2013 年 2 月 14 日凌晨 3 点。

我可以简单地通过在日期字段中添加 1 天并将时间设置为凌晨 3:00 来做到这一点，但是以下情况呢：

我有一个日期对象标记为 2013 年 2 月 14 日凌晨 1 点。在这里，我不需要添加一天，而只需设置时间。

有没有一种优雅的方式来做到这一点？下面是我到目前为止所做的，我认为它会起作用，但我只是想知道是否有一个 api 可以让这更容易。getNextSoonestDate() 之类的东西

```
Calendar calendar = Calendar.getInstance();

//myDate is some arbitrary date, like one of the examples posted above (i.e. feb 13th 11pm)
calendar.setTime(myDate);

//set the calender to be 3am
calendar.set(Calendar.HOUR_OF_DAY, 3);

//check if this comes before my current date, if so we know we need to add a day
if (calendar.getTime().before(myDate)){
    calendar.add(Calendar.DAY_OF_YEAR, 1);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:07:45.103

我不认为有一个预先编写的方法可以做你想做的事情，但是编写一个实用方法很简单。

`myDate`话虽如此，您的代码很接近，但如果介于`3:00:00.001`and之间则无法正常工作`3:59:59.999`（在这种情况下，我假设您希望它在第二天返回该事件） - 您需要将不太重要的字段归零：

```
public static Date getNextTime(Date base, int hourOfDay) {
    Calendar then = Calendar.getInstance();
    then.setTime(base);
    then.set(Calendar.HOUR_OF_DAY, hourOfDay);
    then.set(Calendar.MINUTE, 0);
    then.set(Calendar.SECOND, 0);
    then.set(Calendar.MILLISECOND, 0);
    if (then.getTime().before(base)) {
        then.add(Calendar.DAY_OF_YEAR, 1);
    }
    return then.getTime();
}

Date nextOccurrenceOf3am = getNextTime(myDate, 3); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T16:40:34.927

检查当前日期（过去日期）的一天中的小时，并找出它是否大于或等于 3，如果是则取下一个日期。否则今天..不会吗？当您想要完全相同的日期在 3:00:00 时，它可能不会给出结果。

# java - Java JSON-Lib Set Field 只有一项

> ID：14858210
> 
> 赞同：0
> 
> 时间：2013-02-13T16:28:51.867
> 
> 标签：java, json, json-lib

我有一个正确的 JSON 字符串，它由对象 A 组成，包含一组其他对象 B。

当我现在尝试从 JSON 字符串中取回这个对象时，对象集 B 将只有一个条目，而不是 JSON 字符串中包含的所有条目。

有什么建议，还是我只是做了禁止的事情？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:30:16.277

对于那些可能会摔倒的人来说，这解决了 Set 的问题：

```
JSONArray jsonArray = JSONArray.fromObject(object);
JSONObject jsonObject = new JSONObject();
jsonObject.put("data", jsonArray.toString()); 
```

# android - 写入文件在Android中不起作用

> ID：14858212
> 
> 赞同：0
> 
> 时间：2013-02-13T16:28:58.403
> 
> 标签：android

我正在尝试在 Android 中写入文本文件。我的代码如下（在服务中运行）：

```
 File log;                 String state = Environment.getExternalStorageState();
    File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
    if (Environment.MEDIA_MOUNTED.equals(state) || Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        log = new File(path, "log.csv");
        System.out.println("Opening file");
    } else {
        System.err.println("Could not write to external storage medium. No log will be created");
        return;
    }
    String line = "stuff";
    if (!log.exists()) {
        try {
            log.createNewFile();
            System.out.println("Creating new log file.");
        } catch (IOException e) {
            System.err.println("Could not create new log file");
            e.printStackTrace();
            return;
        }
    }
    try {
        path.mkdirs();
        BufferedWriter bw = new BufferedWriter(new FileWriter(log, true));
        bw.append(line);
        System.out.println("Appending to log file.");
        bw.newLine();
        bw.flush();
        bw.close();
    } catch (IOException e) {
        System.err.println("Failed to write to log file");
        e.printStackTrace();
        return;
    } 
```

我在 AndroidManifest.xml 中添加了以下行：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

当我运行它时，LogCat 中会打印以下内容：

```
Opening file
Appending to log file. 
```

但是我在手机内存中找不到任何具有给定名称的文件，尽管查看了所需的目录并运行搜索以查看它是否在其他地方。

我不确定可能出了什么问题。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:35:42.520

如果它是真实设备（不是 AVD），那么我认为它是通过 USB 插入您的计算机的。某些设置不允许在插入计算机时浏览外部存储。拔掉它，然后寻找文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:16:13.117

我已经植根 4.2.1 GNexus，这就是我如何找到“电影”的“外部”目录...

```
127|shell@android:/storage # busybox find . -type l   // list symlinks in /storage                          
./sdcard0
./emulated/legacy
shell@android:/storage # ls -l sdcard0      // list the symlink for SDCRD

lrwxrwxrwx root     root              2013-02-12 06:57 sdcard0 -> /storage/emulated/legacy

shell@android:/storage # ls -l /storage/emulated/legacy  // follow it                        
lrwxrwxrwx root     root              2013-02-12 06:57 legacy -> /mnt/shell/emulated/0

shell@android:/storage # ls -l /mnt/shell/emulated/0                           

...
drwxrwxr-x root     sdcard_rw          2012-11-14 10:56 Alarms
drwxrwxr-x root     sdcard_rw          2012-11-14 10:56 Android
drwxrwxr-x root     sdcard_rw          2012-12-13 16:58 DCIM
drwxrwxr-x root     sdcard_rw          2013-02-05 14:29 Download
drwxrwxr-x root     sdcard_rw          2013-01-19 03:30 Evernote
drwxrwxr-x root     sdcard_rw          2013-01-10 14:17 LazyList
drwxrwxr-x root     sdcard_rw          2013-02-13 08:57 Movies
drwxrwxr-x root     sdcard_rw          2013-01-14 09:15 Music
drwxrwxr-x root     sdcard_rw          2012-11-14 10:56 Notifications
drwxrwxr-x root     sdcard_rw          2013-02-13 08:57 PictureComment
drwxrwxr-x root     sdcard_rw          2013-02-13 08:57 Pictures
drwxrwxr-x root     sdcard_rw          2012-11-14 10:56 Podcasts

ls -l /mnt/shell/emulated/0/Movies/                                                    <
-rw-rw-r-- root     sdcard_rw   517984 2012-12-31 14:53 20121231110404.mp4
-rw-rw-r-- root     sdcard_rw   937716 2013-01-02 13:32 20130102133041.mp4
-rw-rw-r-- root     sdcard_rw        0 2013-01-06 18:20 20130106181851.mp4
-rw-rw-r-- root     sdcard_rw  1015604 2013-01-10 14:17 20130110141521.mp4
-rw-rw-r-- root     sdcard_rw   310100 2012-12-13 16:57 me-2139628341.mp4
-rw-rw-r-- root     sdcard_rw   212589 2012-12-10 09:40 me-813905104.mp4
-rw-rw-r-- root     sdcard_rw   387913 2012-12-10 10:43 me-827018151.mp4
-rw-rw-r-- root     sdcard_rw   204403 2012-12-10 10:39 me-902796538.mp4
-rw-rw-r-- root     sdcard_rw   796636 2012-12-29 12:25 me-999888777.mp4
-rw-rw-r-- root     sdcard_rw   297690 2013-02-13 08:57 me115420782.mp4 
```

# android - 如何在 SurfaceView 中旋转视频 *.mp4？

> ID：14858214
> 
> 赞同：4
> 
> 时间：2013-02-13T16:28:59.713
> 
> 标签：android, media-player, surfaceview

朋友们。你可以帮帮我吗？

我需要在按钮单击或其他时旋转视频（视频必须始终播放）。我在 SurfaceView 内的 MediaPlayer 中显示视频并尝试这个：

```
@Override
public void surfaceCreated(SurfaceHolder holder) {
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_NORMAL);
        surfaceHolder.lockCanvas().rotate(90);
        mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mediaPlayer.setDisplay(surfaceHolder);

        try {
            mediaPlayer.setDataSource(stringPath);
            mediaPlayer.prepare();

        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }

        mediaPlayer.start();
    }
}
@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
                           int height) {
}
@Override
public void surfaceDestroyed(SurfaceHolder holder) {
} 
```

但是视频不想播放。（我不知道它是否旋转）帮助我......任何人......非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-25T19:27:00.593

也许你可以试试这个：

```
 surfaceView = (SurfaceView)findViewById(R.id.surfaceview);     
 DisplayMetrics displaymetrics = new DisplayMetrics();
 getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
 int h = displaymetrics.heightPixels;
 int w = displaymetrics.widthPixels;

 surfaceHolder = surfaceView.getHolder();

 if (w > h) { 
     surfaceHolder.setFixedSize(w,h);
 } else {
     surfaceHolder.setFixedSize(h,w);
 }

 surfaceHolder.addCallback(this);     
 mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
 mediaPlayer.setDisplay(surfaceHolder); 
```

另外，也许你想把上面的代码放在你的 onCreate() 上，而不是你的 surfaceCreated() 上。然后放置一些从某个按钮调用的 play() 方法：

```
protected void play() {
// TODO Auto-generated method stub

      if(mediaPlayer.isPlaying()){
       mediaPlayer.reset();
      }
    //Define here your filename:
    String stringPath = Environment.getExternalStorageDirectory().getPath() + "/BigBuckBunny_320x180.mp4";

      mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
      mediaPlayer.setDisplay(surfaceHolder);

      try {
       mediaPlayer.setDataSource(stringPath); 
       mediaPlayer.prepare();

      } catch (IllegalArgumentException e) {
       // TODO Auto-generated catch block
       e.printStackTrace();
      } catch (IllegalStateException e) {
       // TODO Auto-generated catch block
       e.printStackTrace();
      } catch (IOException e) {
       // TODO Auto-generated catch block
       e.printStackTrace();
      }

      mediaPlayer.start();
      } 
```

# html - CSS：输入上的目标主体：焦点

> ID：14858220
> 
> 赞同：3
> 
> 时间：2013-02-13T16:29:11.843
> 
> 标签：html, css

我一直在环顾四周，但没有运气是否可以（使用 css）定位 body 标签 `input:focus`，例如，当有人点击我希望 body 拥有的输入框时`background:red`，我不确定这是否真的可能。

提前致谢。

康纳

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T16:32:08.437

这将在未来通过[CSS4 父选择器](http://davidwalsh.name/css4-preview)实现，但现在您必须使用 JavaScript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T16:33:36.310

这在 CSS 中是不可能的。但它可以很容易地用 javascript / jQuery 实现 :)

这是如何在 jQuery 中做到这一点，

```
$("input[type=text]").focus(function() {
    $("body").css({"background-color" : "red"});
}); 
```

# ios - 类似 iOS 的 jsoup 库

> ID：14858223
> 
> 赞同：7
> 
> 时间：2013-02-13T16:29:22.867
> 
> 标签：ios, jsoup

我已经将 jsoup 用于 Android 项目，但我无法找到同一个库的 iOS 端口。iOS有类似的东西吗？

# iphone - 删除应用程序然后重新安装时的 iOS 推送通知行为

> ID：14858224
> 
> 赞同：24
> 
> 时间：2013-02-13T16:29:25.980
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

我遇到了一个不寻常的情况，当我的应用程序被删除然后重新安装时，用户继续收到通知。场景如下：

*   用户从应用商店安装应用
*   用户登录我们的应用程序，我们为他们注册通知
*   用户从他们的设备中删除应用程序
*   用户从应用商店重新安装应用
*   用户即使尚未启动应用程序、登录等也会收到通知

我对 APNs 架构的理解是，一旦你的应用程序从你的设备中删除，它就会被操作系统本身从 APNs 中注销。在您调用“registerForRemoteNotificationTypes”之前，重新安装应用程序不会重新启用通知 - 因此，如果使用旧令牌将便条发送到设备，APNs 将不会发送它，因为尚未调用上述方法。

这不准确吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-13T16:48:18.660

令牌保持不变。设备上的所有应用程序甚至都一样。它仅在您更改操作系统版本时更改。但是，这仍然不能解释您遇到的奇怪行为。

我相信只有在 Apple 确定该应用程序已从设备上卸载后（这通常发生在您在设备卸载后向特定设备上的应用程序发送通知时），它才会取消注册该应用程序。如果在卸载应用程序和重新安装时间之间卸载应用程序的设备上的应用程序没有收到通知，Apple 不知道该设备卸载了应用程序，因此它仍然注册了 APNS。

反馈服务的行为支持我的理论——如果你卸载应用程序并调用反馈服务，你将不会得到卸载应用程序的设备的设备令牌。只有在您尝试向该设备发送通知后，Apple 才会检测到卸载并在反馈服务中返回该设备令牌。

我应该添加的最后一件事 - 如果卸载的应用程序是设备上注册推送通知的最后一个应用程序，APN 服务将永远不会知道该应用程序已被卸载，因此它仍然会在重新注册后注册 APN -安装。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-13T16:50:56.177

当您删除应用程序时，操作系统不会从 APNS 中“取消注册”它。您必须向已删除该应用程序的设备发送通知才能“取消注册”它。这可能需要从 APNS 尝试几次，直到它确定应用程序已被删除。

# cocoa - View 还是 Controller 应该负责拖动处理？

> ID：14858228
> 
> 赞同：1
> 
> 时间：2013-02-13T16:29:32.847
> 
> 标签：cocoa, oop, model-view-controller, nsview, nsviewcontroller

通常，正确处理拖动的主要责任在哪里——在 NSView 或 NSViewController 中。

拖动操作的钩子都包含在 NSView 中，所以看起来 NSView 是自然的地方。此外，视图需要发挥*一些*作用，因为视图知道东西在哪里，所以它自然是拖动结束的专家。

但拖动通常与文档间或进程间通信有关——尤其是关于将文件从 Finder 拖动到文档中。拖动必然会导致模型的更改或添加。这就是控制器的工作。

最后，无论我们是在视图还是控制器上，我们通常会添加一堆方法来处理拖入过程，然后接收数据。人们是简单地将方法添加到视图或控制器，还是将它们转发到策略对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:01:42.400

NSView 是拖动处理的“前线”，因为正如您所指出的，“视图知道事物在哪里，因此它自然是拖动结束位置的专家。” 我不能代表所有人，但我看到的模式是，就像按钮这样的简单视图，当视图接收到“用户意图”时，它会将其传达给控制器对象。

简单的 NSControls 使用目标/动作范例来执行此操作，该范例可以连接到 IB 中。这里一种简单的方法可能是为您的视图指定一个目标/动作，当拖动操作进行到需要触发该动作的时候，视图可以这样做。视图需要传达给控制器的任何状态理论上都可以通过在`sender`动作参数中传递给控制器​​的视图来访问。

自然，目标/动作范式是相当有限的，但这里的重点是视图可以跟踪拖动，直到建立了“用户意图单元”，它可以被分派给控制器进行处理。确切的机制将取决于每个个体所需行为的需求。

# ffmpeg - ffmpeg 音频转换失真 - 半速率

> ID：14858233
> 
> 赞同：0
> 
> 时间：2013-02-13T16:29:41.060
> 
> 标签：ffmpeg

我正在尝试使用 ffmpeg 将 asf 音频转换为 mp3。但是我有一个特定的音频在中间会失真，并且开始时就像这个人在慢动作（以半速率）说话一样。

我正在使用的命令是：

ffmpeg - i input.asf -ac 2 output.mp3

我尝试了很多选项，但大约音频的中间是它失败的时候。原始文件听起来不错，所以不是录音。在传输过程中，由于某种原因，帧速率下降了。

谢谢大家！

[编辑]

作为 LordNeckbeard 的建议，我在运行命令后添加了控制台响应：

```
[root@mynasserver home]# ffmpeg -i recording-8532-1.asf -ac 2 -ab 64k -ar 44100 recording-8532-ac2-ar44100.mp3
FFmpeg version 0.6.5, Copyright (c) 2000-2010 the FFmpeg developers
built on Jan 29 2012 23:56:18 with gcc 4.1.2 20080704 (Red Hat 4.1.2-51)
configuration: --prefix=/usr --libdir=/usr/lib --shlibdir=/usr/lib --mandir=/usr/share/man --incdir=/usr/include --disable-avisynth --extra-cflags='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i386 -mtune=generic -fasynchronous-unwind-tables' --enable-avfilter --enable-avfilter-lavf --enable-libdirac --enable-libfaac --enable-libfaad --enable-libfaadbin --enable-libgsm --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libx264 --enable-gpl --enable-nonfree --enable-postproc --enable-pthreads --enable-shared --enable-swscale --enable-vdpau --enable-version3 --enable-x11grab
libavutil     50.15\. 1 / 50.15\. 1
libavcodec    52.72\. 2 / 52.72\. 2
libavformat   52.64\. 2 / 52.64\. 2
libavdevice   52\. 2\. 0 / 52\. 2\. 0
libavfilter    1.19\. 0 /  1.19\. 0
libswscale     0.11\. 0 /  0.11\. 0
libpostproc   51\. 2\. 0 / 51\. 2\. 0
[flv @ 0x86a4850]max_analyze_duration reached
[flv @ 0x86a4850]Estimating duration from bitrate, this may be inaccurate
Input #0, flv, from 'recording-8532-1.asf':
Metadata:
source          : STW MediaProxy v3.3.7.19894
Duration: 04:00:08.49, start: 0.000000, bitrate: N/A
Stream #0.0: Audio: aac, 44100 Hz, 2 channels (FC), s16
Output #0, mp3, to 'recording-8532-ac2-ar44100.mp3':
Metadata:
TSSE            : Lavf52.64.2
Stream #0.0: Audio: libmp3lame, 44100 Hz, 2 channels, s16, 64 kb/s
Stream mapping:
Stream #0.0 -> #0.0
Press [q] to stop encoding
size=  150906kB time=19315.93 bitrate=  64.0kbits/s    
video:0kB audio:150906kB global headers:0kB muxing overhead 0.000021% 
```

所以从上面的数据，你可以看到输入文件大约是 4hrs。输出最终约为 5 小时 20 分钟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T05:33:26.717

使用当前版本的 ffmpeg 为我解决了这个问题。

请注意，您的“asf”文件实际上是一个 FLV 文件。

```
Input #0, flv, from 'recording-8532-1.asf': 
```

此外，如果实际上不需要 MP3 格式，您可以像这样从 FLV 文件中提取 AAC 音频：

```
ffmpeg -i input.flv -acodec copy output.aac 
```

这将保持音频质量。

# c++ - 使用 find 在 unordered_set 中查找多个值

> ID：14858234
> 
> 赞同：1
> 
> 时间：2013-02-13T16:29:41.133
> 
> 标签：c++, c++11, equals, tr1, unordered-set

我想使用指定的 equal_to 函数 int unordered_set 示例代码是这样的：

```
struct myEqual
{       //string with one different character is considered equal
    bool operator()(const string &s1, const string &s2)const
    {

        if(s1.length() != s2.length()) return false;
        int dis = 0;
        for(unsigned int i = 0; i<s1.size(); i++)
        {
            if(s1[i] != s2[i])
            {
                dis++;
                if(dis >= 2) return false;
            }               
        }
        return true;
    }
};

int main()
{
    unordered_set<string, std::tr1::hash<string>, myEqual> myDict;
    myDict.insert("a");
    myDict.insert("b");
    myDict.insert("c");

    unordered_set<string, std::tr1::hash<string>, myEqual>::iterator it = myDict.find("k");
    if(it == myDict.end())
    {
        cout<<"myequal not work"<<endl;
    }
    else
    {
        cout<<*it<<endl;
    }
    return 0;
} 
```

根据 myEqual 函数，“a”、“b”、“c”三个值“等于”“k”，但是 find 只返回一个迭代器。反正有没有找到所有相等的价值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T16:35:51.993

这里有两个问题，都与*查找*元素无关：

1.  由于`"a"`,`"b"`并且`"c"`所有比较彼此相等，因此您只能将其中一个保留在`unordered_set`.
2.  您有比较相等但可能具有不同哈希码的元素。这违反了为了使无序集正常工作而必须履行的合同。

要记住的一个更普遍的问题是你的等价关系不是传递的：`"aa"`equals`"ab"`和`"ab"`equals `"bb"`。然而`"aa"`不等于`"bb"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:22:24.293

最好的方法是解决以下 4 件事

1.  使用`std:unordered_multiset`as 容器

2.  使用**相互一致**的哈希函数和密钥比较函数。特别是，哈希函数需要将相等的元素映射到相等的键。

3.  使用**等价关系**的比较函数。特别是，这意味着 if`A==B`和`B==C`, then `A==C`, where`==`对应于您的`myEqual`.

4.  `equal_range`使用返回一对迭代器的成员函数。如果第一个迭代器不等于容器的末尾，则可以循环。

代码：

```
auto res = myDict.equal_range("k");
if(res.first == myDict.end())
{
    cout<<"myequal not work"<<endl;
}
else
{
    for (auto it = res.first; it != res.second; ++it) 
        cout<<*it<<endl;
} 
```

您的散列函数和比较运算符目前都违反了 C++ 标准库的容器要求。您的哈希码不会将相等（在您的意义上`myEqual`）字符串映射到相等的哈希键。您的比较运算符不具有传递性（参见@NPE 的示例）。这意味着您不能使用`std::unordered_set`or `std::unordered_multiset`。如果这样做，您的代码会产生未定义的行为。

# .net - File.GetAttributes 语法

> ID：14858236
> 
> 赞同：0
> 
> 时间：2013-02-13T16:29:49.470
> 
> 标签：.net, file-io

我正在尝试调试我不熟悉的应用程序。

在代码的某处，我看到了这个：

```
File.GetAttributes(FileName) _
    .Equals(FileAttributes.Archive | FileAttributes.ReadOnly) 
```

`FileAttributes.Archive | FileAttributes.ReadOnly`（使用单个管道）测试究竟是什么？我猜是看文件是归档的还是只读的，但是文件是归档的，测试返回false。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:20:45.300

`FileAttributes.Archive | FileAttributes.ReadOnly`意味着组合（按位或）两个值。调用`Equal()`意味着比较是否相等。因此，`true`当且仅当文件*同时*设置了存档位*和*只读位时，它才会产生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:23:10.237

该代码完全是错误的。写它的人搞砸了，直到他们得到它的工作。FileAttributes 是具有 [Flags] 属性的 Enum 类型。这意味着可以设置任何标志*组合。*这就是 OR 运算符的作用，它结合了 Archive 和 ReadOnly 属性。

这是偶然的，一个文件通常打开了存档属性。一旦用户备份文件，代码就会惨遭失败。这会关闭 Archive 属性，并且 Equals() 方法不再起作用，即使文件仍然是只读的。

您必须修复此错误。让它看起来像这样：

```
If (File.GetAttributes(FileName) And FileAttributes.ReadOnly) = FileAttributes.ReadOnly Then
   '' It is read-only
   ''...
End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T17:27:33.247

```
 File.GetAttributes(FileName) _
    .Equals(FileAttributes.Archive | FileAttributes.ReadOnly) 
```

只有在以下情况下才会返回 true：

*   Archive 和 ReadOnly 位均已设置，

和

*   没有设置其他 FileAttributes 位（例如 Hidden、System、Compressed...）。

乍一看，这似乎不是一个非常有用的测试 - 为什么要排除压缩文件？

# c# - 无法使用命名管道连接服务器和客户端

> ID：14858243
> 
> 赞同：1
> 
> 时间：2013-02-13T16:30:08.917
> 
> 标签：c#, named-pipes

我在命名管道的互联网上阅读了很多示例。由于某种原因，我无法使其工作。无论如何，这是我的代码：

**服务器：**

```
 static void Main(string[] args)
    {
        NamedPipeServerStream server = new NamedPipeServerStream("1234");
        server.WaitForConnection();

        Console.Beep(); // connection successful! 
    } 
```

**客户：**

```
 static void Main(string[] args)
    {                    
        NamedPipeClientStream client = new NamedPipeClientStream("1234");
        client.Connect();

        Console.WriteLine("Connected!");
        Console.Read();
    } 
```

我有两个不同的可执行文件。我先启动服务器程序，然后启动客户端。为什么我无法连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:06:01.727

一个可能的原因：您正在从 2 个不同的安全上下文启动进程（即一个“以管理员身份运行”，另一个以普通用户身份运行）。在这种情况下，如果不在命名管道上设置安全性，就无法建立连接......

也可能存在具有此名称的现有命名管道（以某种方式或在另一个用户下孤立），但我希望在这种情况下至少有一个程序会失败。考虑重新启动您的机器以防万一（或者更好地使用 Sysitnerals 工具之一来查看是否已经存在具有此名称的管道）。

# php - 通过 PHP 回显 IP 地址的 WHOIS 信息

> ID：14858245
> 
> 赞同：0
> 
> 时间：2013-02-13T16:30:19.363
> 
> 标签：php, mysql, curl

我正在编写一个 php 类，它获取主机的 WHOIS 信息并将它们存储在变量中以将它们插入到数据库中，以防它们尚未插入并且每次访问都会发生此过程，我一直在使用 cURL 从 WHOIS 网站上删除信息但是在这种情况下服务器负载如何（每个连接都会导致外部连接、数据库搜索，如果找不到条目则插入它们）有些人建议我使用 mod_geoip2 Apache 模块但是如果使用我的课程的用户在共享主机上怎么办哪个没有安装 mod_geoip2 Apache 模块，有什么想法可以减轻服务器负载吗？

PS：这不是我的班级通常完成的，但这是我需要解决问题的部分！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:31:00.463

我能想到的唯一方法是智能地使用 WHOIS 返回的 IP 范围。

例如，如果查询`whois aaa.bbb.ccc.ddd`返回：

```
inetnum:        aaa.bbb.ccc.96 - aaa.bbb.ccc.127
... 
```

然后您可以存储整个 IP 地址范围的 WHOIS 信息。

此外，为避免再次查询数据库，您可以将当前检索到的 WHOIS 信息存储在会话变量中。

# ajax - ajax jquery - 成功的html响应

> ID：14858246
> 
> 赞同：1
> 
> 时间：2013-02-13T16:30:26.527
> 
> 标签：ajax

我有一个ajax表单。我正在尝试打印有关成功的相关消息。

所以jQuery：

```
 //start ajax
    $.ajax({
        url: $(this).attr('action'),
        type: "POST",
        data: data,
        cache: false,
        success: function (html) {
            if (html == 1) {
                $('#getquotepopup').fadeTo('slow', 0, function(){$('#cboxLoadingGraphic').remove();});
            } else {
                alert('Sorry, unexpected error. Please try again later.');
            }
        }
    }) 
```

和接收端的php：

```
if (wp_mail($to, $subject, $message)) {
    // the message was sent...
    //for Ajax, create response .OK.
    return 1;
} else {
    return 0;
} 
```

但问题是如果`(html == 1)`总是被评估为假。

你能指出我的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T08:21:37.677

尝试使用“===1”而不是“==1”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-29T20:39:19.853

我会从您的 PHP 脚本中返回一个文本字符串，例如“SUCCESS”，而不是 1 或 0。

在此之前，我还会尝试 javascript 比较，就好像它是一个带引号的字符串：

例如

```
if( html == "1" ) 
```

# c# - 修剪最后一次正则表达式匹配之前的所有文本

> ID：14858247
> 
> 赞同：2
> 
> 时间：2013-02-13T16:30:27.680
> 
> 标签：c#, regex

我试图在最后一次出现正则表达式匹配之前删除所有文本，而无需删除匹配项或将其替换为任何其他文本。这是我正在解析的文件中的几行示例行：

N3.C2.R1：19 00000000 00000000 00 ** 0000 00000000 00000000 00000000 00000000
N0.C0.R0N3.C3.R1：19 00000000 00000000 00000000 00000000 00000000 00000000 00000000
.N3.C3.R0：18 00000000 00000000 00000000 00000000 00000 * 00 00000000 00000000
写入等级 1...N3.C1.R3: -22 0000000* 00000000 00000000 00000000 00000*00 00000000 00000000

第一行是理想的行，与返回值相匹配。我的正则表达式模式如下：

```
string pattern = @"N\d\.C\d\.R\d:"; 
```

该模式返回所有上述字符串，但我需要修剪在模式最后一次出现之前出现的所有文本，以便返回一个看起来像第一个的行。我在这里查看了许多类似的问题，但我无法找到在我的代码中实际有效或对我有意义的答案。

请记住，上述示例并非详尽的可能性列表。这就是我尝试使用正则表达式而不是字符串方法的原因。

作为参考，以下是我在问这个问题之前阅读的类似问题：

[正则表达式+删除匹配前](https://stackoverflow.com/questions/8841129/regex-remove-all-text-before-match)
[的所有文本正则表达式文本中的多个匹配正则](https://stackoverflow.com/questions/4390847/regex-multple-matches-in-text?rq=1)
[表达式：过滤掉最后一次出现之前的文本](https://stackoverflow.com/questions/2821023/regex-filter-out-text-before-last-occurrence)

编辑：我应该指出，我正在使用的行是原始文件中包含的信息的一小部分。我发布的所有示例行都是“好”信息（即我可以使用的信息）的示例，但第一行是最终输出的样子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:35:44.957

尝试以下操作：

```
string str = Regex.Replace(input, @"(.+?)(N\d\.C\d\.R\d:)", "$2"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:02:13.203

此方法还返回可能跟随您的最后一场比赛的内容（例如，数字之后的行的其余部分）：

```
string pattern = @"^N\d\.C\d\.R\d:";
var matches = Regex.Matches(input, pattern, RegexOptions.Multiline);
if (matches.Count > 0) {
    string result = input.Substring(matches[matches.Count - 1].Index);
} 
```

我还包括`^`为了明确搜索行首。这需要`Multiline`正则表达式选项。

# xslt - XSLT 将 XML 转换为 XML 没有给出预期的结果......

> ID：14858248
> 
> 赞同：0
> 
> 时间：2013-02-13T16:30:37.940
> 
> 标签：xslt

这是编写此 xslt 的正确方法吗？首先是我要转换的 XML 片段，其次是我正在编写的 xslt，最后是结果：

```
<ysl:TableNodeStyle TableRenderingOrder="RowsFirst"> 
      <ysl:TableNodeStyle.Table> 
        <y:Table Insets="30,0,0,0" RelativeLocation="0,0"> 
          <y:Table.Rows

> 
                <y:Row MinimumSize="10" Size="185.389513343799" Insets="30,0,0,0" Style="{y:GraphMLReference 2}"> 
                  <y:Row.Labels> 
                    <y:Label LabelModelParameter="{x:Static ysl:StretchStripeLabelModel.West}" Style="{y:GraphMLReference 1}" PreferredSize="72,15"> 
                      <y:Label.Text>Development</y:Label.Text> 
                    </y:Label> 
                  </y:Row.Labels> 
                </y:Row> 
```

下一个

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl" xmlns:ysl="http://www.yworks.com/xml/yfiles-for-silverlight/1.0/xaml" 
> 
  <xsl:output method="xml" indent="yes"/> 

  <xsl:template match="/"> 

    <xsl:element name="graphml"> 
      <xsl:element name="graph"> 
        <xsl:element name="TableNodeStyle"> 
          <xsl:attribute name="TableRenderingOrder"><xsl:value-of select="TableRenderingOrder"/></xsl:attribute> 

          <xsl:element name="TableNodeStyle.Table"> 
            <xsl:element name="Table"> 
            <xsl:attribute name="Table"><xsl:value-of select="Table"/></xsl:attribute> 
              <xsl:element name="Table.Rows"> 
                <xsl:element name="Row"> 
                  <xsl:attribute name="Row"><xsl:value-of select="Row"/></xsl:attribute> 
                  <xsl:element name="Label"> 
                    <xsl:attribute name="Label"><xsl:value-of select="Label"/></xsl:attribute> 
                  <!--<y:Row.Labels> 
                    <y:Label LabelModelParameter="{x:Static ysl:StretchStripeLabelModel.West}" Style="{y:GraphMLReference 1}" PreferredSize="72,15"> 
                      <y:Label.Text>Development</y:Label.Text>--> 
                  </xsl:element> 
                </xsl:element> 
              </xsl:element> 
            </xsl:element> 
          </xsl:element> 
        </xsl:element> 
      </xsl:element> 
    </xsl:element> 
  </xsl:template> 
</xsl:stylesheet> 
```

最后，

```
 <?xml version="1.0" encoding="utf-8"?> 
<graphml> 
  <graph> 
    <TableNodeStyle TableRenderingOrder=""> 
      <TableNodeStyle.Table> 
        <Table Table=""> 
          <Table.Rows> 
            <Row Row=""> 
              <Label Label="" /> 
            </Row> 
          </Table.Rows> 
        </Table> 
      </TableNodeStyle.Table> 
    </TableNodeStyle> 
  </graph> 
</graphml> 
```

这显然没有按预期工作，我不确定我做错了什么。非常感激任何的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:55:25.170

样式表有几个问题。以 TableNodeStyle 输出元素为例，您的上下文节点`<xsl:value-of>`是文档的根。您可以在样式表中创建一个新模板以匹配`<ysl:TableNodeStyle>`输入文档中的元素：

```
<xsl:template match="TableNodeStyle">
    <xsl:element name="TableNodeStyle">
        <xsl:attribute name="TableRenderingOrder"><xsl:value-of select="@TableRenderingOrder"/></xsl:attribute>
        <xsl:apply-templates/>
    </xsl:element>
</xsl:template> 
```

在这里，您有一个与源 XML 中的 TableNodeStyle 元素匹配的模板，并且可以应用于`<xsl:apply-templates/>`：

```
<xsl:template match="/">
    <xsl:element name="graphml">
        <xsl:element name="graph">
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:element>
</xsl:template> 
```

其次，你`<xsl:value-of select="TableRenderingOrder"/>`应该是`<xsl:value-of select="@TableRenderingOrder"/>`- 你需要 @ 来指定你正在寻找`"@TableRenderingOrder"`.

然后，您可以为每个子元素创建一个模板并调用它们，可以通过 element 或通过`<xsl:call-templates/>`.

通过查看您的原始样式表，我认为在网络上找到一些简单的示例并在回到这个问题之前运行这些示例对您非常有用。应该有足够的内容让您可以了解更多关于您在这里尝试做的事情。

更新：好的，我已经为你创建了一个可能对你有用的样式表——它做了我认为你正在尝试做的事情，对你来说可能是一个很好的起点，但我真的建议找出它是如何工作的，而不是只是复制并希望：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl" xmlns:ysl="http://www.yworks.com/xml/yfiles-for-silverlight/1.0/xaml">
<xsl:output method="xml" indent="yes"/>
<xsl:template match="Label">
        <xsl:element name="Label">
            <xsl:attribute name="LabelModelParameter"><xsl:value-of select="@LabelModelParameter"/></xsl:attribute>
            <xsl:attribute name="Style"><xsl:value-of select="@Style"/></xsl:attribute>
            <xsl:attribute name="PreferredSize"><xsl:value-of select="@PreferredSize"/></xsl:attribute>
            <!--<y:Row.Labels> 
                <y:Label LabelModelParameter="{x:Static ysl:StretchStripeLabelModel.West}" Style="{y:GraphMLReference 1}" PreferredSize="72,15"> 
                  <y:Label.Text>Development</y:Label.Text>-->
        </xsl:element>
</xsl:template>
<xsl:template match="Row">
    <xsl:element name="Row">
        <xsl:attribute name="MinimumSize"><xsl:value-of select="@MinimumSize"/></xsl:attribute>
        <xsl:attribute name="Size"><xsl:value-of select="@Size"/></xsl:attribute>
        <xsl:attribute name="Insets"><xsl:value-of select="@Insets"/></xsl:attribute>
        <xsl:attribute name="Style"><xsl:value-of select="@Style"/></xsl:attribute>
        <xsl:apply-templates/>
    </xsl:element>
</xsl:template>
<xsl:template match="Table">
    <xsl:element name="Table">
        <xsl:attribute name="Insets"><xsl:value-of select="@Insets"/></xsl:attribute>
        <xsl:attribute name="RelativeLocation"><xsl:value-of select="@RelativeLocation"/></xsl:attribute>
        <xsl:element name="Table.Rows">
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:element>
</xsl:template>
<xsl:template match="TableNodeStyle.Table">
    <xsl:element name="TableNodeStyle.Table">
        <xsl:apply-templates/>
    </xsl:element>
</xsl:template>
<xsl:template match="TableNodeStyle">
    <xsl:element name="TableNodeStyle">
        <xsl:attribute name="TableRenderingOrder"><xsl:value-of select="@TableRenderingOrder"/></xsl:attribute>
        <xsl:apply-templates/>
    </xsl:element>
</xsl:template>
<xsl:template match="/">
    <xsl:element name="graphml">
        <xsl:element name="graph">
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:element>
</xsl:template>
</xsl:stylesheet> 
```

# mysql - mysql group_concat 加入

> ID：14858252
> 
> 赞同：0
> 
> 时间：2013-02-13T16:31:09.397
> 
> 标签：mysql, join, left-join

我有一个看起来像这样的查询：

```
SELECT 
    *, 
    GROUP_CONCAT(DISTINCT web_order_item.od_pcode) AS items, 
    GROUP_CONCAT(DISTINCT woi_id) AS woi_ids 
    FROM web_order 
JOIN web_order_item USING(od_id) 
JOIN customer_master ON customer_master.VC_CUSTOMER_CODE = web_order.p_vendor 
LEFT JOIN production_item ON production_item.ItemID IN (GROUP_CONCAT(DISTINCT woi_id)) AND QCStatus <> 'received' 
WHERE
   web_order.od_date >= FROM_UNIXTIME(1357257600) 
   AND web_order.od_date <= FROM_UNIXTIME(1359936000) 
   AND web_order.od_id > 0 
   AND 1 
GROUP BY web_order.od_id 
ORDER BY web_order.od_id DESC 
```

此查询引发错误

> 一般错误：1111 无效使用组功能

我在这里想念什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:55:13.833

```
SELECT 
*, 
GROUP_CONCAT(DISTINCT web_order_item.od_pcode) AS items, 
GROUP_CONCAT(DISTINCT woi_id) AS woi_ids 
FROM web_order 
JOIN web_order_item USING(od_id) 
JOIN customer_master ON customer_master.VC_CUSTOMER_CODE = web_order.p_vendor 
LEFT JOIN production_item ON production_item.ItemID IN (GROUP_CONCAT(DISTINCT woi_id))     AND QCStatus <> 'received' 
WHERE
web_order.od_date >= FROM_UNIXTIME(1357257600) 
AND web_order.od_date <= FROM_UNIXTIME(1359936000) 
AND web_order.od_id > 0 
AND 1 
GROUP BY items, woi_ids 
ORDER BY web_order.od_id DESC 
```

跳这有帮助

参考[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:49:54.917

您正在选择完整的原始记录，然后在 web_order_item 上进行分组连接，由于 DISTINCT 属性，这将产生单行，如果有多个记录，您将在那里分组，然后再次尝试分组...无论如何，您最后分组的目的是什么？没有聚合，一个 order by 就足够了。取出 group by...或更改 group by 以在组连接之前包含所有相关项目...

# php - 防止 Mp3 在浏览器 PHP 中播放

> ID：14858253
> 
> 赞同：0
> 
> 时间：2013-02-13T16:31:13.960
> 
> 标签：php, audio, header, download

目前我有一个收集 mp3 的脚本。所有歌曲都托管在外部网站上。

用户单击 mp3 链接将导致 mp3 在用户默认音频播放器（quicktime 等）的浏览器中播放

我只是想知道我可以使用什么代码（PHP）将 mp3 作为下载提示打开而不是播放。这很容易，尽管问题是它不能通过服务器处理（也就是不能使用带宽）

可以吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:34:23.373

乍一看，这似乎与[如何实施内容处置：附件？](https://stackoverflow.com/questions/8875949/how-to-implement-content-disposition-attachment).

然后我看到了“第 3 方网站”附带条件。

将客户端发送到那里时，无法覆盖远程站点发送的 HTTP 标头。你想要的东西是无法实现的。

# html - 为什么不能关闭 如果父元素是元素，则省略？

> ID：14858255
> 
> 赞同：2
> 
> 时间：2013-02-13T16:31:25.530
> 
> 标签：html

[http://www.w3.org/TR/html51/syntax.html#optional-tags](http://www.w3.org/TR/html51/syntax.html#optional-tags)

根据 HTML5 规范：

> 如果*p*元素后面紧跟*地址、文章、aside、blockquote、dir、div、dl、fieldset、footer、form、h1、h2、h3、h4、h5、h6、header，*则可以省略 p 元素的结束*标记**, hgroup, hr, menu, nav, ol, p, pre, section, table*或*ul* , 元素，或者如果父元素中没有更多内容并且**父元素不是** ***a*****元素。**

 ***[强调我的]

关于父元素不是`a`标签的最后一点是什么？为什么允许这样做：

```
<div>
<p>text...
</div> 
```

但这不是：

```
<a>
<p>text...
</a> 
```

根据规范，`p`理论上允许在[http://www.w3.org/TR/html51/text-level-semantics.html#the-a-element](http://www.w3.org/TR/html51/text-level-semantics.html#the-a-element)`a`中使用标签，那么为什么会有例外呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:44:49.070

我想那是因为该`<a>`元素是一个内联元素。

而列表中的所有其他元素（*地址、文章、搁置、块引用、目录、div 等*）都是块级别，因此它们可以关闭其他元素的范围，而内联元素则不然。

由于该`<a>`元素是唯一允许您将块级元素放入其中的元素（根据您提供的链接） - 这就是为什么他们在规范中特别提到了这个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T16:43:28.867

`<p>`因为在标签结束时总是结束标签是没有意义的`<a>`。在`<div>`'s 的情况下，如果你要关闭 ，`<div>`你几乎肯定也想关闭 the `<p>`，但对于`<a>`. 该超链接可以继续到下一段

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T16:44:45.497

由于 w3 定义段落的方式，可能不允许这样做：

在谈论列表如何不能在段落内时，[规范说](http://www.w3.org/TR/html51/grouping-content.html#the-p-element)：

> 段落，用 HTML 术语来说，**不是一个逻辑概念，而是一个结构概念**。在上面的精彩示例中，该规范实际上定义了五个段落：列表之前的一段，每个项目符号的一段，以及列表之后的一段。

在我看来，W3 打算将段落作为文本段落，而不是巨大的超链接，并且他们竭尽全力确保这一点。***

# c# - 后台线程上的火灾事件

> ID：14858261
> 
> 赞同：-4
> 
> 时间：2013-02-13T16:31:38.957
> 
> 标签：c#, asynchronous, publish-subscribe

抱歉，我的问题和努力不准确。我正在开发具有不同组件的控制台应用程序。现在我已经将它们解耦并希望它们使用异步发布者/订阅者方式进行交互；类似于 WPF。因此，在这种情况下，我将拥有一个始终存在的主线程，并且根据请求，它将调用事件，例如 DataRequested，该事件将在后台线程上触发。一旦后台线程完成进程，它将再次触发事件，例如 DataCompleted 应该返回到调用线程，即主线程。我希望我的解释清楚。

```
So far I have coded below; where I have EventBroker.

 public class EventBroker
    {

        public static event EventHandler SubscriptionAdded;
        public static event EventHandler SubscriptionRemoved;

        private static volatile EventBroker instance;
        private static object syncRoot = new Object();
        private static Dictionary<string, List<Delegate>> subscriptions;

        /// <summary>
        /// Initializes a new instance of the <see cref="T:EventBroker"/> class.
        /// </summary>
        private EventBroker()
        {

        }
        /// <summary>
        /// Gets the instance.
        /// </summary>
        /// <value>The instance.</value>
        public static EventBroker Instance
        {

            get
            {
                if (instance == null)
                {
                    lock (syncRoot)
                    {
                        if (instance == null)
                        {
                            instance = new EventBroker();
                            subscriptions = new Dictionary<string, List<Delegate>>();
                        }
                    }
                }

                return instance;

            }
        }

        /// <summary>
        /// Gets or sets the internal subscriptions dictionary.
        /// </summary>
        /// <value>The subscriptions.</value>

        private static Dictionary<string, List<Delegate>> Subscriptions
        {
            get { return EventBroker.subscriptions; }
            set
            {
                lock (syncRoot)
                {
                    EventBroker.subscriptions = value;
                }
            }
        }

        /// <summary>
        /// Raises the subscription added event.
        /// </summary>
        /// <param name="e">The <see cref="T:System.EventArgs"/> instance containing the event data.</param>
        private static void OnSubscriptionAdded(EventArgs e)
        {
            if (SubscriptionAdded != null)
                SubscriptionAdded(instance, e);
        }

        /// <summary>
        /// Raises the subscription removed event.
        /// </summary>
        /// <param name="e">The <see cref="T:System.EventArgs"/> instance containing the event data.</param>
        private static void OnSubscriptionRemoved(EventArgs e)
        {
            if (SubscriptionRemoved != null)
                SubscriptionRemoved(instance, e);
        }

        /// <summary>
        /// Subscribe method to the specified event.
        /// </summary>
        /// <param name="id">The id.</param>
        /// <param name="method">The method Delegate to be invoked when Event fires.</param>
        public static void Subscribe(string id, Delegate method)
        {

            //Check if there is a existing event
            List<Delegate> delegates = null;

            if (Subscriptions == null)
                Subscriptions = new Dictionary<string, List<Delegate>>();

            if (Subscriptions.ContainsKey(id))
            {
                delegates = subscriptions[id];
            }
            else
            {
                delegates = new List<Delegate>();
                Subscriptions.Add(id, delegates);
            }

            delegates.Add(method);
            OnSubscriptionAdded(new EventArgs());

        }

        /// <summary>
        /// Unsubscribe method from event notifications
        /// </summary>
        /// <param name="id">The id.</param>
        /// <param name="method">The method.</param>
        public static void Unsubscribe(string id, Delegate method)
        {
            if (Subscriptions.ContainsKey(id))
            {
                if (Subscriptions[id].Contains(method))
                {
                    Subscriptions[id].Remove(method);
                    OnSubscriptionRemoved(new EventArgs());
                }

                if (Subscriptions[id].Count == 0)
                    Subscriptions.Remove(id);

            }
        }

        /// <summary>
        /// Fire the specified event by and pass parameters.
        /// </summary>
        /// <param name="id">The id.</param>
        /// <param name="args">The args.</param>
        public static void Execute(string id, object sender, EventArgs e)
        {
            if (Subscriptions.ContainsKey(id))
            {
                for (int i = 0; i < Subscriptions[id].Count; i++)
                {

                    Delegate x = Subscriptions[id][i];
                    DynamicInvoke(id, x, sender, e);

                    if (!Subscriptions.ContainsKey(id))
                        break;
                }
            }
        }

        /// <summary>
        /// Checks to see if target of invocation is still a valid 
        /// (non-disposed objects). Then it dinamicly invokes Delegate.
        /// </summary>
        /// <param name="id">Event ID</param>
        /// <param name="x">Delegate to invoke</param>
        /// <param name="args">Object array of arguments</param>
        private static void DynamicInvoke(string id, Delegate x, object sender, EventArgs e)
        {

            if (x.Method != null)
            {
                if (x.Target is Control)
                {
                    Control ctl = (Control)x.Target;

                    if (ctl.IsDisposed)
                    {
                        Unsubscribe(id, x);
                        return;
                    }
                }

                if (x.Target == null)
                {
                    Unsubscribe(id, x);
                    return;
                }

                x.DynamicInvoke(sender, e); ***//this becomes blocking call untill EventHandle is completed and hangs Master Thread***

            }
        }
    } 
```

我使用这个 EventBroker 来跟踪我的订阅者，一旦发布者到来，我就会调用某个委托。但它只在主线程上被调用并被挂起。我想在单独的线程上调用 EventHandler。

```
 public class MasterClass
    {
    public MasterClass()
    {

    EventBroker.Subscribe("Topic2", new EventHandler<EventArgs<string>>(CallBackfromWorker));

    }

public void InvokeTest()
    {

EventArgs<string> EventArgs = new EventArgs<string>("Test");
EventBroker.Execute("Topic1", null, EventArgs); //I want both of this to be asynchronous.

    } 
            public void CallBackfromWorker(object sender, EventArgs<string> e)
            {

    Debug.Pring("Get Called Asynchronously from Worker thread through Event");

            }

    }

**//Worker Class**

        public class WorkerClass
        {
            public WorkerClass()
            {
                EventBroker.Subscribe("Topic1", new EventHandler<EventArgs<string>>(HandleRapRequest1));
            }

            public void HandleRapRequest1(string RAPRequest)
            //public void HandleRapRequest1(object sender, EventArgs<string> e)
            {
                Logger.LogToDisplay("WorkerClass Request" + RAPRequest);
                Logger.LogToDisplay("AsyncClient : " + System.Threading.Thread.CurrentThread.IsBackground);
                Logger.LogToDisplay("AsyncClient : " + System.Threading.Thread.CurrentThread.ManagedThreadId);

                Logger.LogToDisplay("Going to Sleep");

                System.Threading.Thread.Sleep(10000); ***//Hangs my Master Thread***
EventBroker.Execute("Topic2", null, EventArgs); //I want both of this to be asynchronous.

            }
} 
```

所以底线是我在控制台应用程序中寻找基于异步事件的发布者/订阅者......类似于 CAB 事件 sin SCSF 和 WPF ......

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T16:42:36.323

这很简单：

```
public class Foo
{
    public event Action MyEvent;

    public void FireEvent()
    {
        Action myevent = MyEvent;
        if (myevent != null)
        {
            Task.Factory.StartNew(() => myevent())
                .ContinueWith(t =>
                {
                    //TODO code to run in UI thread after event runs goes here
                }, CancellationToken.None
                , TaskContinuationOptions.None
                , TaskScheduler.FromCurrentSynchronizationContext());
        }
    }
} 
```

如果您使用的是 C# 5.0，则可以使用`await`它来简化此代码：

```
public class Foo
{
    public event Action MyEvent;

    public async Task FireEvent()
    {
        Action myevent = MyEvent;
        if (MyEvent != null)
        {
            await Task.Run(() => myevent());
            //TODO code to run in UI thread after event runs goes here
        }
    }
} 
```

如果您不需要在事件处理程序全部完成后启动在 UI 线程中运行的代码，而是可以同时继续在 UI 线程上运行，您还可以将代码简化为：

```
public class Foo
{
    public event Action MyEvent;

    public void FireEvent()
    {
        Action myevent = MyEvent;
        if (MyEvent != null)
        {
            Task.Factory.StartNew(() => myevent());

            //TODO code to run in UI thread while event handlers run goes here
        }
    }
} 
```

# c++ - std::cout 不会打印

> ID：14858262
> 
> 赞同：34
> 
> 时间：2013-02-13T16:31:41.017
> 
> 标签：c++, debugging, buffer, iostream, cout

有没有什么情况下`std::cout << "hello"`不工作？我有 ac/c++ 代码，但是`std::cout`不打印任何内容，甚至不打印常量字符串（例如“hello”）。

有什么方法可以检查是否`cout`能够/无法打开流？有一些成员函数，如`good()`, `bad()`, ... 但我不知道哪一个适合我。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-13T16:32:08.630

确保刷新流。这是必需的，因为输出流是缓冲的，除非您自己手动刷新缓冲区，否则您无法保证何时刷新缓冲区。

```
std::cout << "Hello" << std::endl; 
```

`std::endl`将输出换行符并刷新流。或者，*只会*`std::flush`进行冲洗。也可以使用流的成员函数完成刷新：

 *```
std::cout.flush(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-12-17T10:29:59.203

std::cout 不适用于 GUI 应用程序！

**特定于 MS Visual Studio**：当您想要一个控制台应用程序并使用 MS Visual Studio 时，将项目属性“链接器 -> 系统 -> 子系统”设置为控制台。在 Visual Studio 中创建新的 Win32 项目（用于本机 C++ 应用程序）后，此设置默认为“Windows”，这会阻止 std::cout 将任何输出放到控制台。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-13T16:40:45.543

由于缓冲（您正在编写的内容最终在缓冲区中而不是在输出中），这很可能`std::cout`不起作用。`std::cout`

您可以执行以下操作之一：

*   显式刷新`std::cout`：

    ```
    std::cout << "test" << std::flush; // std::flush is in <iostream> 
    ```

    ```
    std::cout << "test";
    std::cout.flush(); // explicitly flush here 
    ```

    ```
    std::cout << "test" << std::endl; // endl sends newline char(s) and then flushes 
    ```

*   改为使用`std::cerr`。`std::cerr`没有缓冲，但它使用不同的流（即，如果您对“查看控制台上的消息”感兴趣，则第二种解决方案可能不适合您）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-05-26T14:30:36.440

要有效地禁用缓冲，您可以调用它：

```
std::setvbuf(stdout, NULL, _IONBF, 0); 
```

或者，您可以调用您的程序并在命令行中禁用输出缓冲：

```
stdbuf -o 0 ./yourprogram --yourargs 
```

请记住，出于性能原因，通常不会这样做。*

# magento - Magento 设置了一个 no-cache 标头，所以 Varnish 不会缓存？

> ID：14858263
> 
> 赞同：1
> 
> 时间：2013-02-13T16:31:43.987
> 
> 标签：magento, varnish

我在 magento 设置上设置 Varnish。但是，magento 似乎一直在发送阻止 Varnish 缓存的无缓存参数。我怎样才能关闭它？

我在我的服务器上使用 NGINX，所以 htaccess 解决方案不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:56:50.090

看这篇文章“使用 Varnish 缓存的 Magento 性能优化”

[http://www.kalenyuk.com.ua/magento-performance-optimization-with-varnish-cache-47.html](http://www.kalenyuk.com.ua/magento-performance-optimization-with-varnish-cache-47.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-14T05:55:12.267

我发现`cacheable="false"`在渲染页面上的任何位置具有属性的布局文件以及使用参数调用布局工厂创建时都会引发此问题`['cacheable' => false]`；

仍在尝试确定如何以“缓存”方式显示这些块。也许需要对这些特定请求进行分类。

# android - SQL RawQuery 告诉我该列不存在

> ID：14858265
> 
> 赞同：1
> 
> 时间：2013-02-13T16:31:47.253
> 
> 标签：android, android-sqlite

有人可以告诉我我的 SQLite 查询有什么问题吗？它总是告诉我“plugins._id”列不存在，但我确信它确实存在。我正在阅读此查询上方的两行。

```
return mDatenbank.rawQuery("SELECT plugins._id, plugins.name, plugins.number, 
plugins.device_id, connections.plugin1, connections.plugin2, addedDevices._id,
addedDevices.name, connections._id FROM connections INNER JOIN (plugins INNER JOIN
addedDevices ON plugins.device_id = addedDevices._id) ON connections.plugin2 =
plugins.device_id OR connections.plugin1 = plugins.device_id WHERE connections.plugin1=?
OR connections.plugin2=?;", new String[] {PlugInName, PlugInName}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:42:24.007

也许不能解决您的问题，但查询不能以`;`. 走着瞧吧。[参考](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5B%5D,%20android.os.CancellationSignal%29)

# ios - 企业应用程序的内部分发与 Ad Hoc 分发之间有什么区别？

> ID：14858266
> 
> 赞同：42
> 
> 时间：2013-02-13T16:31:49.380
> 
> 标签：ios, provisioning-profile, ios-provisioning

我有一个 Apple iOS Enterprise 帐户并且正在创建一个分发配置文件，并且惊讶地发现我必须选择 In House 或 Ad Hoc 的分发方法。

这让我很困惑——如果我为非企业帐户创建分发配置文件，那么这里的选择将是 Ad Hoc 或 App Store，这是有道理的，因为有不同的配置文件用于测试和发布。但这是针对企业帐户的，我不明白企业应用程序的内部或 Ad Hoc 分发方法之间有什么区别。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-13T16:44:07.097

Ad-Hoc 版本必须提供给特定设备。您的帐户允许您注册多达 100 台设备。

In-House 用于分发到任何公司设备。

因此，在大多数情况下，In-House 可以满足您的所有需求。但是，如果您希望不属于您公司的人来测试某些东西，或者您希望将分发限制在特定设备上，您可以使用临时配置。

更新：Ad-Hoc 现在允许每种类型的设备最多 100 个。IE。100 部 iPhone、100 部 iPad、100 部 Apple TV 等

# r - 如何使用 tm 包计算 R 中的可读性

> ID：14858267
> 
> 赞同：6
> 
> 时间：2013-02-13T16:31:51.783
> 
> 标签：r, nlp, tm

库中是否有为此预先构建的功能`tm`，或者可以很好地使用它？

我当前的语料库被加载到 tm 中，如下所示：

```
s1 <- "This is a long, informative document with real words and sentence structure:  introduction to teaching third-graders to read.  Vocabulary is key, as is a good book.  Excellent authors can be hard to find." 
s2 <- "This is a short jibberish lorem ipsum document.  Selling anything to strangers and get money!  Woody equal ask saw sir weeks aware decay. Entrance prospect removing we packages strictly is no smallest he. For hopes may chief get hours day rooms. Oh no turned behind polite piqued enough at. "
stuff <- rbind(s1,s2) 
d <- Corpus(VectorSource(stuff[,1])) 
```

我尝试使用[koRpus](https://stackoverflow.com/questions/14835894/how-do-i-extract-contents-from-a-korpus-object-in-r)，但在与我已经使用的不同的包中重新标记似乎很愚蠢。我也遇到了矢量化它的返回对象的问题，这种方式允许我将结果重新合并到`tm`. （也就是说，由于错误，它返回的可读性分数通常会比我收藏的文档数量多或少。）

我知道我可以做一个简单的计算，将元音解析为音节，但想要一个更彻底的包来处理边缘情况（地址静默 e 等）。

我选择的可读性分数是 Flesch-Kincaid 或 Fry。

我最初尝试过的 d 是我的 100 个文档的语料库：

```
f <- function(x) tokenize(x, format="obj", lang='en')
g <- function(x) flesch.kincaid(x)
x <- foreach(i=1:length(d), .combine='c',.errorhandling='remove') %do% g(f(d[[i]])) 
```

不幸的是，x 返回的文档少于 100 个，因此我无法将成功与正确的文档相关联。（这部分是我对 R 中的“foreach”与“lapply”的误解，但我发现文本对象的结构非常困难，以至于我无法适当地标记化、应用 flesch.kincaid 并以合理的应用顺序成功检查错误声明。）

**更新**

我尝试过的另外两件事，试图将 koRpus 函数应用于 tm 对象......

1.  使用默认标记器将参数传递给 tm_map 对象： `tm_map(d,flesch.kincaid,force.lang="en",tagger=tokenize)`

2.  定义一个分词器，将其传入。

    ```
     f <- function(x) tokenize(x, format="obj", lang='en')
     tm_map(d,flesch.kincaid,force.lang="en",tagger=f) 
    ```

这两个都返回：

```
 Error: Specified file cannot be found: 
```

然后列出 d[ [1](https://stackoverflow.com/questions/14835894/how-do-i-extract-contents-from-a-korpus-object-in-r) ] 的全文。好像找到了？我应该怎么做才能正确传递函数？

**更新 2**

这是我尝试使用 lapply 直接映射 koRpus 函数时遇到的错误：

```
> lapply(d,tokenize,lang="en")
Error: Unable to locate
 Introduction to teaching third-graders to read.  Vocabulary is key, as is a good book.  Excellent authors can be hard to find. 
```

这看起来像一个奇怪的错误——我几乎不认为这意味着它无法找到文本，而是在转储定位的文本之前无法找到一些空白错误代码（例如，'tokenizer'） .

**更新 3**

使用重新标记的另一个问题`koRpus`是重新标记（与 tm 标记器相比）非常慢，并将其标记化进度输出到标准输出。无论如何，我尝试了以下方法：

```
f <- function(x) capture.output(tokenize(x, format="obj", lang='en'),file=NULL)
g <- function(x) flesch.kincaid(x)
x <- foreach(i=1:length(d), .combine='c',.errorhandling='pass') %do% g(f(d[[i]]))
y <- unlist(sapply(x,slot,"Flesch.Kincaid")["age",]) 
```

我的意图是将`y`上面的对象作为元数据重新绑定回我的`tm(d)`语料库，`meta(d, "F-KScore") <- y`.

不幸的是，应用于我的实际数据集，我收到错误消息：

```
Error in FUN(X[[1L]], ...) : 
  cannot get a slot ("Flesch.Kincaid") from an object of type "character" 
```

我认为我的实际语料库中的一个元素必须是 NA，或者太长，或者是其他令人望而却步的元素——而且由于嵌套的功能化，我无法准确追踪它是什么。

所以，目前，似乎没有预先构建的功能来阅读与`tm`图书馆很好地配合的乐谱。除非有人看到一个简单的错误捕获解决方案，否则我可以将其夹在我的函数调用中以处理无法标记一些明显错误、格式错误的文档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T08:07:54.553

你会得到一个错误，因为`koRpus`函数不能处理`corpus`对象。最好先创建一个`kRp.tagged`对象，然后 `koRpus`在其上应用所有功能。在这里，我将展示如何使用包`ovid`的数据来做到这一点`tm`。

我`list.files`用来获取源文件列表。您只需要为源文本文件提供正确的路径。

```
ll.files <- list.files(path = system.file("texts", "txt", 
                                    package = "tm"),
                 full.names=T) 
```

然后我构造一个`kRp.tagged`对象列表，使用`tokenize`它是包中给出的默认标记器`koRpus`（推荐使用`TreeTagger`，但您需要安装它）

```
ll.tagged <- lapply(ll.files, tokenize, lang="en") ## tm_map is just a wrapper of `lapply` 
```

一旦我有了我的“标记”对象列表，我就可以对其应用可读性公式。由于`flesch.kincaid`是 的包装`readability`，我将直接应用后者：

```
ll.readability <- lapply(ll.tagged,readability)          ## readability
ll.freqanalysis <- lapply(ll.tagged,kRp.freq.analysis)   ## Conduct a frequency analysis
ll.hyphen <- lapply(ll.tagged,hyphen)                    ## word hyphenation 
```

等等，....所有这些都会产生一个 S4 对象列表。该`desc`插槽可以轻松访问此列表：

```
lapply(lapply(ll.readability ,slot,'desc'),              ## I apply desc to get a list
         '[',c('sentences','words','syllables'))[[1]]    ## I subset to get some indexes
[[1]]
[[1]]$sentences
[1] 10

[[1]]$words
[1] 90

[[1]]$syllables
all  s1  s2  s3  s4 
196  25  32  25   8 
```

例如，您可以使用 slot`hyphen`获取包含两个列的数据帧，word（连字符）和 syll（音节数）。在这里，`lattice`我使用 绑定所有 data.frames，`dotplot`为每个文档绘制一个。

```
library(lattice)
ll.words.syl <- lapply(ll.hyphen,slot,'hyphen')     ## get the list of data.frame
ll.words.syl <- lapply(seq_along(ll.words.syl),      ## add a  column to distinguish docs
       function(i)cbind(ll.words.syl[[i]],group=i))
dat.words.syl <- do.call(rbind,ll.words.syl)
dotplot(word~syll|group,dat.words.syl,
        scales=list(y=list(relation ='free'))) 
```

![在此处输入图像描述](../Images/8c75452521380c10b27b800151397a3f.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-05T22:32:49.030

很抱歉，koRpus 包还没有与 tm 包顺利交互。几个月来，我一直在想办法在两个对象类之间进行转换，但还没有提出真正令人满意的解决方案。如果您对此有任何想法，请随时与我联系。

但是，我想向您`summary()`推荐 koRpus 生成的可读性对象的方法，该方法返回`data.frame`相关结果的浓缩。这可能比通过相当复杂的 S4 对象进行的替代爬网更容易访问；-) 您也可以尝试`summary(x, flat=TRUE)`。

@agstudy：漂亮的图表 :-) 为了节省一些时间，您应该在`hyphen()`before运行`readability()`，这样您就可以通过“连字符”参数重新使用结果。或者您可以在`readability()`之后简单地访问结果的“连字符”插槽。如果需要，它会自动断字，并保留结果。仅当您需要`hyphen()`在下一步之前更改输出时，才需要手动调用连字符。我可能会补充一点，0.05-1在这方面比它的前辈快得多*。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-28T04:59:27.557

从[qdap 版本 1.1.0](http://trinkerrstuff.wordpress.com/2014/02/23/qdap-1-1-0-released-on-cran/)开始，qdap 具有[许多](http://trinker.github.io/qdap/tdm.html)与 tm 包更兼容的功能。这是一种使用您提供的相同方法来解决您的问题的方法`Corpus`（请注意，Fry 最初是一个图形度量，并且 qdap 保留了这一点；也通过您的语料库和随机抽样 Fry 建议您的样本语料库不足以计算 Fry 的在）：

```
library(qdap)
with(tm_corpus2df(d), flesch_kincaid(text, docs))

##   docs word.count sentence.count syllable.count FK_grd.lvl FK_read.ease
## 1   s1         33              1             54       16.6       34.904
## 2   s2         49              1             75       21.6       27.610

with(tm_corpus2df(d), fry(text, docs))

## To plot it
qheat(with(tm_corpus2df(d), flesch_kincaid(text, docs)), values=TRUE, high="red") 
```

![在此处输入图像描述](../Images/e7d607b69f836be32ee9d9838f956e81.png)

# c# - 带有 Razor 视图模型和 @functions 的淘汰赛风格的动态页面？

> ID：14858269
> 
> 赞同：0
> 
> 时间：2013-02-13T16:31:59.557
> 
> 标签：c#, web-applications, asp.net-mvc-4, razor-2

我正在构建一个页面，用户可以在其中通过构建一组搜索条件来查询一组数据，类似于 Visual Studio TFS 插件让您搜索工作项的方式：一个条件表，您可以在其中继续添加行。您为连接条件选择“和”或“或”，然后选择一个字段，输入一个值，然后选择是否需要匹配或不匹配的内容：

```
1\. show items where [Field] [is|is not] [value]
2\.         [and|or] [Field] [is|is not] [value]
3\.         [and|or] [Field] [is|is not] [value]
etc... 
```

现在，我正在寻找构建它的方法，我有一个想法。过去，我使用过 Knockout，但这需要我在 Javascript 中使用模型来将数据映射到，当我已经在服务器端代码中使用 C# 中的这些模型时，这似乎是多余的。当然，我可以使用 Razor 代码在强类型视图中通过作为模型一部分的标准列表进行 foreach，但我找不到添加到此列表的整洁方法。

C# 中的模型结构（大致）是这样的：

*   `Field`：
    *   字段名称
    *   值的选项列表
    *   is/is not 选项的布尔值。
*   `Criterion`：
    *   `Field`
    *   选定值
    *   组合类型（和/或）
*   `Query`：
    *   s列表`Criterion`（不说标准看起来很奇怪）
    *   开始和结束日期
    *   用户的访问级别
    *   查看字段和排序选项
*   `QueryViewModel`：
    *   `Query`
    *   用于填充视图选项选择区域的分类列表
    *   页面上其他（不相关）显示的一些元数据

在 Knockout 中，我会在“添加搜索条件”按钮中添加一个单击方法，以将新条目添加到条件列表中。我可以使用 Razor 功能块 ( `@functions { ... }`) 来实现类似的结果吗？我已经尝试了一些东西，但是我发现视图模型似乎不在范围内，或者无法更新页面以显示视图模型的新内容（尽管我正在尝试一些涉及将新更新的视图模型传递给局部视图，这可能会以某种方式工作）。这可以做到吗，还是我需要深呼吸并回到 Javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:00:11.987

您可以使用标准 MVC 控制器和 JSONResult 或使用 MVC 4 中的 Web API 将 C# 对象序列化/反序列化为 JSON。这意味着您不必在 javascript 中显式地重新定义您的 c# 对象。

在浏览器中，如果需要，您可以使用敲除映射插件将您的 json 属性变成敲除 observables。

这通常是一种比从服务器动态加载和呈现 html 更清洁、更强大的方法（如果这就是您的建议 - 从您的帖子中没有 100% 清楚）。

# ios - Xcode 静态分析器在使用 ARC 时抱怨潜在的泄漏

> ID：14858271
> 
> 赞同：2
> 
> 时间：2013-02-13T16:32:02.990
> 
> 标签：ios, objective-c, memory-management, automatic-ref-counting

我正在使用 ARC 和 ios sdk 6.0。

我很确定我有一些内存泄漏，我很难追踪。

运行静态分析器后，我收到有关以下两种方法的警告：

```
+ (id<MXURLRequest>) requestWithURL:(NSURL*)url {    
  MXASIURLRequest *request = [[MXASIURLRequest alloc] init];

  [request setUrl:url];

  return request; // STATIC ANALYSER: Potential leak of an object stored into 'request' 
}

- (id)parseBody:(NSError *)error {    
  NSString *contentType = [[_request responseHeaders] objectForKey:@"Content-Type"];

  id body = nil;

  if ([contentType hasPrefix:@"application/json"] ||
      [contentType hasPrefix:@"text/json"] ||
      [contentType hasPrefix:@"application/javascript"] ||
      [contentType hasPrefix:@"text/javascript"]) {        
    body = [NSJSONSerialization JSONObjectWithData:[_request responseData] options:NSJSONReadingMutableLeaves error:&error];
  } else if ([contentType hasPrefix:@"image/"] ||
           [contentType hasPrefix:@"audio/"] ||
           [contentType hasPrefix:@"application/octet-stream"]) {        
    body = [_request responseData];
  } else {
    body = [[NSString alloc] initWithData:[_request responseData] encoding:NSUTF8StringEncoding];
  }

  return body; // STATIC ANALYSER : Potential leak of an object stored into 'body'
} 
```

警告如下...

```
Object leaked: object allocated and stored into 'request' is returned from a method
whose name ('requestWithURL:') does not start with 'copy', 'mutableCopy', 'alloc'
or 'new'.  This violates the naming convention rules given in the Memory Management 
Guide for Cocoa

Object leaked: object allocated and stored into 'body' is returned from a method
whose name ('parseBody:') does not start with 'copy', 'mutableCopy', 'alloc' or
'new'.  This violates the naming convention rules given in the Memory Management
Guide for Cocoa 
```

谁能看到我在这里做错了什么？这些警告是合法的，还是可以忽略？对我来说，这些方法看起来对 ARC 能够处理自动引用计数是有效的。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T16:52:37.347

对于正在编译的文件或整个项目，ARC 显然已关闭。静态分析器仅在 ARC 关闭时才会抱怨这些东西，因此我将进一步详细说明这一点。

编译器引用的 Cocoa 内存管理指南只允许一组严格的方法在正常情况下从构造函数返回非自动释放的对象（那些是 'init'、'copy'、'mutableCopy' 和 'new'）。注意到图案了吗？

因为您在便利构造函数中分配一个对象，然后将其交给调用者，所以您是拥有它的人，因为您创建了它。Cocoa 希望你做的是在返回的末尾附加一个自动释放，这样调用者的工作就是保持对新构造对象的引用：

```
+ (id<MXURLRequest>) requestWithURL:(NSURL*)url {
    MXASIURLRequest *request = [[MXASIURLRequest alloc] init]; +1, we own it

    [request setUrl:url];

    return [request autorelease]; // +0, it's the caller's problem now
} 
```

至于最后一种方法，Cocoa 抱怨你在内存方面不一致。由于您混合使用构造函数和便利性，该方法有可能返回具有 +1 或 +0 保留计数的对象。为了显示：

```
- (id)parseBody:(NSError *)error {    
  NSString *contentType = [[_request responseHeaders] objectForKey:@"Content-Type"];

  id body = nil;

  if ([contentType hasPrefix:@"application/json"] ||
      [contentType hasPrefix:@"text/json"] ||
      [contentType hasPrefix:@"application/javascript"] ||
      [contentType hasPrefix:@"text/javascript"]) {        
    body = [NSJSONSerialization JSONObjectWithData:[_request responseData] options:NSJSONReadingMutableLeaves error:&error]; //returns +0
  } else if ([contentType hasPrefix:@"image/"] ||
           [contentType hasPrefix:@"audio/"] ||
           [contentType hasPrefix:@"application/octet-stream"]) {        
    body = [_request responseData]; //potentially returns +1
  } else {
    body = [[NSString alloc] initWithData:[_request responseData] encoding:NSUTF8StringEncoding]; //returns +1
  }

  return body; // STATIC ANALYSER : Potential leak of an object stored into 'body'
} 
```

分析器要求一致性：要么只使用构造函数，要么一致地自动释放。

# vb.net - 如何从组合框中为数组赋值

> ID：14858279
> 
> 赞同：0
> 
> 时间：2013-02-13T16:32:16.780
> 
> 标签：vb.net

我的代码是：

```
Dim Dbase() As String = Nothing

Dbase(0) = Db_ComboBox.Text 
```

我已经声明`Dbase`为数组并分配了`Nothing`，`Db_ComboBox`是一个组合框。

对于该赋值语句，我收到以下错误：“ **Reference 'Dbase' has a value of 'Nothing'** ”

此错误的原因是什么，如何从组合框中获取值并将其保存在数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:28:43.857

你需要改变这个：

```
Dim Dbase() As String = Nothing 
```

为此（声明一个包含 1 个元素的数组）：

```
Dim Dbase(0) As String 
```

然后这条线将起作用：

```
Dbase(0) = Db_ComboBox.Text 
```

如果您需要更改数组大小，可以根据需要使用[Redim 或 Redim preserve](http://msdn.microsoft.com/en-us/library/w8k3cys2%28v=vs.71%29.aspx)。

如果您预计内容`Dbase`会经常更改，我完全同意@Joel 关于切换到`List(Of String)`而不是手动处理数组大小的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:51:18.157

让我们看看你的代码：

```
Dim Dbase() As String = Nothing

Dbase(0) = Db_ComboBox.Text 
```

尤其是第一行。*第一行创建了一个可以引用*数组的变量，但该`= Nothing`部分明确告诉它，“不要在此处创建真正的数组”。实际上，您有一个不指向任何东西的指针。

我到了这里，您真正需要的是一个可以随时间追加的 List 集合：

```
Dim Dbase As New List(Of String)()
Dbase.Add(Db_ComboBox.Text) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:37:39.650

`Dbase()`没什么。看这个例子：

```
cargoWeights = New Double(10) {}
atmospherePressures = New Short(2, 2, 4, 10) {}
inquiriesByYearMonthDay = New Byte(20)()() {} 
```

这就是你声明数组的方式。

更多示例：http: [//msdn.microsoft.com/en-us/library/vstudio/wak0wfyt.aspx](http://msdn.microsoft.com/en-us/library/vstudio/wak0wfyt.aspx)

# batch-file - 批量创建隐形文件夹

> ID：14858280
> 
> 赞同：3
> 
> 时间：2013-02-13T16:32:21.210
> 
> 标签：batch-file, mkdir, invisible

如何使用

```
mkdir or md 
```

但使文件夹不可见...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T16:52:45.527

您需要 attrib 命令来设置“隐藏”属性，假设当您说“不可见”时，您实际上是指 Windows 所称的“隐藏”：

```
mkdir foo
attrib +h foo /s /d 
```

# php - PHP CURL 使用代理 POST

> ID：14858284
> 
> 赞同：1
> 
> 时间：2013-02-13T16:32:36.477
> 
> 标签：php, post, curl, proxy

我正在尝试使用代理列表创建一个发布到 URL 的脚本。该脚本似乎可以在不设置代理的情况下正常工作（CURLOPT_PROXY 为 null），但如果设置了代理，它似乎无法正常工作。有人知道我在这里做错了什么吗？使用代理发布时遇到的错误是：

```
ERROR

The requested URL could not be retrieved

Invalid Request error was encountered while trying to process the request:

POST /###/ HTTP/1.1
Host: ###
Accept: */*
Proxy-Connection: Keep-Alive
Content-Length: 368
Expect: 100-continue
Content-Type: multipart/form-data; boundary=----------------------------9b24e849cac0
Some possible problems are:

Missing or unknown request method.

Missing URL.

Missing HTTP Identifier (HTTP/1.0).

Request is too large.

Content-Length missing for POST or PUT requests.

Illegal character in hostname; underscores are not allowed. 
```

我的代码是：

```
$url = 'urltopost';
$proxy = 'proxy:port';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_PROXY, $proxy);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_POST, true);

$data = array(
    'postname1' => 'value1',
    'postname2' => 'value2'
);

curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

$curl_scraped_page = curl_exec($ch);
curl_close($ch);

echo $curl_scraped_page; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:35:25.867

您缺少 PROXYPORT 选项...您不能使用 proxy:port 表示法

```
curl_setopt($ch, CURLOPT_PROXY,             "YOUR PROXY HOST");         
curl_setopt($ch, CURLOPT_PROXYPORT,         "YOUR PROXY PORT"); 
```

# javascript - SharePoint 2010 上下文菜单停止工作，直到页面刷新

> ID：14858285
> 
> 赞同：0
> 
> 时间：2013-02-13T16:32:40.300
> 
> 标签：javascript, sharepoint

问题：在 IE 8 中使用 SharePoint 2010；默认上下文菜单（如文档库项目菜单）在每个页面上仅工作一次，然后停止响应，除非页面被刷新。

状态栏错误显示 - “Javascript:;” 没有别的了。

Java 脚本在 IE 中启用，sharepoint 门户位于受信任的站点中。

那会是什么？有什么提示吗？

谢谢， 瓦尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:27:47.467

您是否尝试过更改缩放大小？我在列表项上遇到了类似的问题，并且当缩放设置设置为 125% 时能够重新创建它。当我将缩放设置设置为 100 % 时，问题就消失了。这很奇怪而且出乎意料，但它奏效了......

另一种方法/测试是查看 IE 9 是否出现此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T17:43:03.950

我遇到了完全相同的问题，经过几个小时的搜索，我终于发现它来自我的 XsltListViewWebpart 的 ToolbarType 参数。设置为标准，我有问题，但如果我设置 FreeForm，它可以工作！

我认为这是 SharePoint 2010 的错误。

希望这会有所帮助。

一些帮助的文章：

[这是一篇文章](https://social.msdn.microsoft.com/Forums/en-US/9e5f4650-3ce5-4aaa-a750-7d7a31211fef/xsltlistviewwebpart-item-drop-down-not-working-second-click?forum=sharepointdevelopmentprevious)

[另一个](http://bernado-nguyen-hoan.com/2015/09/22/programmatically-setting-toolbar-type-for-list-view-web-part-sharepoint/)

[最后一个](https://bertrandvergnault.sharepoint.com/blog/Lists/Billets/Post.aspx?ID=48)

[我的解决方案](https://social.technet.microsoft.com/Forums/en-US/eae6d14b-639d-4c23-989c-704f742423ba/adding-xsltlistviewwebpart-on-page-context-menu-issue-in-folders-sp2010?forum=sharepointgeneralprevious#d34c43f6-c0f3-4913-a2a8-1552a6fed672)（仅设置 ToolbarType 是不够的，我必须在 webpart 上应用更改）

# php - 为什么 phpunit 不在模拟类中运行 __destruct() 以及如何强制它？

> ID：14858286
> 
> 赞同：6
> 
> 时间：2013-02-13T16:32:50.800
> 
> 标签：php, unit-testing, mocking, phpunit, destructor

代码将解释一切：

```
<?php

class ATest extends PHPUnit_Framework_TestCase
{
    public function testDestructorOnOriginalClass() {
        $a = new A();                                             // It
        unset($a);                                                // works
        echo " great!";                                           // great!
        $this->expectOutputString('It works great!');
    }

    public function testDestructorOnMockedClass() {
        $a = $this->getMock('A', array('someNonExistingMethod')); // It
        unset($a);                                                // works
        echo " great!";                                           // great!
        $this->expectOutputString('It works great!');
    }
}

class A {
    public function __construct()
    {
        echo "It";
    }

    public function __destruct()
    {
        echo " works";
    }
} 
```

和输出：

```
# phpunit ATest.php 
PHPUnit 3.7.13 by Sebastian Bergmann.

.F

Time: 0 seconds, Memory: 3.50Mb

There was 1 failure:

1) ATest::testDestructorOnMockedClass
Failed asserting that two strings are equal.
--- Expected
+++ Actual
@@ @@
-'It works great!'
+'It great! works'

FAILURES!
Tests: 2, Assertions: 2, Failures: 1. 
```

正如您在第二个测试中看到的那样，它`works`以错误的顺序打印，可能是因为 phpunit 在某处存储对模拟的引用并`__destruct()`在测试结束时调用...好吧，我已经检查了`getMock()`方法，实际上它存储了对模拟对象的引用（`$this->mockObjects[] = $mockObject;`）有效地阻止对象被破坏，因此`__destructor()`永远不会被调用。

```
/**
 * Returns a mock object for the specified class.
 *
 * @param  string  $originalClassName
 * @param  array   $methods
 * @param  array   $arguments
 * @param  string  $mockClassName
 * @param  boolean $callOriginalConstructor
 * @param  boolean $callOriginalClone
 * @param  boolean $callAutoload
 * @param  boolean $cloneArguments
 * @return PHPUnit_Framework_MockObject_MockObject
 * @throws PHPUnit_Framework_Exception
 * @since  Method available since Release 3.0.0
 */
public function getMock($originalClassName, $methods = array(), array $arguments = array(), $mockClassName = '', $callOriginalConstructor = TRUE, $callOriginalClone = TRUE, $callAutoload = TRUE, $cloneArguments = FALSE)
{
    $mockObject = PHPUnit_Framework_MockObject_Generator::getMock(
      $originalClassName,
      $methods,
      $arguments,
      $mockClassName,
      $callOriginalConstructor,
      $callOriginalClone,
      $callAutoload,
      $cloneArguments
    );

    $this->mockObjects[] = $mockObject;

    return $mockObject;
} 
```

所以问题是 - 有没有办法防止这种情况发生？忽略`__destruct()`何时应该调用它是我认为不好的限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:47:55.157

问题是当您不将任何值传递给“ `getMock`”方法的第二个参数时，PHPUnit 将存根您正在模拟的类中的所有方法（包括“ `__destruct`”）。

但是，如果您指定了至少一种方法（甚至可能是不存在的方法），PHPUnit 将仅存根您在第二个参数中传递的这些方法。

因此，如果您想保留所有方法，但还想创建模拟，您应该这样做：

```
$mock = $this->getMock('A', array('someNonExistingMethod')); 
```

如果您更改此行，您的测试应该通过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:26:03.420

您只是在取消设置局部变量 - 您并没有破坏对象本身。

该对象也由 PHPUnit 自己保存。所以仍然有一个参考，因此你`unset()`不会导致`__destruct()`.

因此，当前的行为无法更改。在 phpunit 问题跟踪器中打开一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-13T10:52:46.613

如果我们`clone`模拟对象和`unset`它，`__destruct()`则可以在测试期间调用克隆对象。它可以帮助您测试`__destruct()`。

请注意，此方法不能阻止`__destruct()`在测试结束时调用原始模拟对象。

# .net - Try/Catch on Application.Run 在调试器中工作，但在运行实际应用程序时不起作用

> ID：14858287
> 
> 赞同：5
> 
> 时间：2013-02-13T16:32:49.810
> 
> 标签：.net, vb.net, error-handling

我在 VB.NET 中做了一个项目。如果我创建的应用程序会产生不需要的错误，它将创建一个包含错误的文本文件。在 Visual Studio 上运行它时我能够做到这一点，但在运行单独的应用程序时它不起作用，这是在 bin/Debug 上找到的可执行文件。

这是我所做的：

```
Sub Main(ByVal ParamArray args() As String)
  Try
System.Windows.Forms.Application.Run(New Form1)
  Catch ex As Exception
WriteErrorLogs(ex)
  End Try
End Sub

Sub WriteErrorLogs(Byval ex As Exception)
' create a textfile the write x.Message, x.Source, x.ToString
  Dim dnow As String = Now.ToString
  Dim filename As String = "Error " & removeInvalidChars(dnow)
  Dim saveto As String = New IO.FileInfo("Errors/" & filename).FullName & ".txt"
  Dim title As String = ex.Message
  Dim stacktrce As String = ex.StackTrace

  If Not IO.Directory.Exists(New IO.DirectoryInfo("Errors").FullName) Then IO.Directory.CreateDirectory("Errors")
  Dim fw As New IO.StreamWriter(saveto, False, System.Text.Encoding.UTF8)
  fw.WriteLine(title)
  fw.WriteLine()
  fw.WriteLine(stacktrce)
  fw.Close()
End Sub

Private Function removeInvalidChars(ByRef s As String)
  Dim invalidChars() As Char = "\/:*?""<>|".ToCharArray
  For Each i As Char In invalidChars
    s = s.Replace(i, ".")
  Next
  Return s
End Function 
```

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T17:07:12.910

```
 Try
      System.Windows.Forms.Application.Run(New Form1)
  Catch ex As Exception
      WriteErrorLogs(ex)
  End Try 
```

是的，当您在没有附加调试器的情况下运行它时，该 Catch 子句永远不会捕获异常。在 UI 线程上引发的异常会被*重新路由*并触发 Application.ThreadException 事件。默认情况下会显示一个对话框，您应该已经注意到，当您从 bin\Debug 目录运行它时。

当您连接了调试器时，它的工作方式会有所不同，当您需要调试未处理的异常时，该对话框确实会妨碍您。因此 ThreadException 事件被有意禁用，调试器会向您显示代码崩溃的位置。您编写的代码不会发生这种情况，因为 Catch 子句*确实*捕获了异常。

当您的程序由于工作线程上引发的未处理异常而崩溃时，Catch 子句也将不起作用，它只能在 UI 线程上看到异常。

您将需要一种更可靠的方法，您可以从 AppDomain.UnhandledException 事件中获取一个。*任何*未处理的异常都会引发，无论它是在哪个线程上引发的。让你的代码看起来像这样：

```
Module Module1
    Public Sub Main(ByVal args() As String)
        Application.EnableVisualStyles()
        Application.SetCompatibleTextRenderingDefault(False)
        If Not System.Diagnostics.Debugger.IsAttached Then
            Application.SetUnhandledExceptionMode(UnhandledExceptionMode.ThrowException)
            AddHandler AppDomain.CurrentDomain.UnhandledException, AddressOf LogUnhandledExceptions
        End If
        Application.Run(New Form1())
    End Sub

    Private Sub LogUnhandledExceptions(ByVal sender As Object, ByVal e As UnhandledExceptionEventArgs)
        Dim ex = DirectCast(e.ExceptionObject, Exception)
        '' Log or display ex.ToString()
        ''...
        Environment.Exit(System.Runtime.InteropServices.Marshal.GetHRForException(ex))
    End Sub
End Module 
```

使用 Debugger.IsAttached 可确保您可以使用调试器诊断未处理的异常。使用 Application.SetUnhandledExceptionMode 可确保永远不会显示对话框并记录所有异常。

# javascript - 在每个循环中访问“this”对象属性

> ID：14858290
> 
> 赞同：3
> 
> 时间：2013-02-13T16:32:53.583
> 
> 标签：javascript, mootools

在 foreach 循环中访问*testval*和*testoption的最佳方法是什么？*这是一份 mootools 草案。

```
var some = new Class({
   options: { testarray: [1,2,3], testoption: 6 },       
   initialize: function(options) {
      this.testval = '123';
      this.options.testarray.each(function(el) { 
         console.log(this.testval);
         console.log(this.options.testoption);
      });
    } 
}); 
```

**更新：** 我可以通过在数组上添加 bind(this) 来修复它，但这是要走的路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:38:25.067

如果我需要从一个函数中引用一些实例变量，这些实例变量会`this`引用我之前经常使用的其他东西`var self = this;`。我发现它比把东西到处装订要好得多；`self`变得明确地引用实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T16:58:40.680

是的，执行此操作的 mootools 方法是将您的函数与

```
this.options.testarray.each(function(el) { 
  console.log(this.testval);
  console.log(this.options.testoption);
}.bind(this)); 
```

或使用`Binds`mutator（在 Mootools 中提供更多，感谢@Dimitar Christoff）

```
var some = new Class({
 options: { testarray: [1,2,3], testoption: 6 },
 Implements: Optons,
 Binds: ['logOption'],
 initialize: function(options) {
   this.testval = '123';
   this.setOptions(options);
   this.options.testarray.each(this.logOptions);
 },
 logOptions : function(value, index, array) {
   // I don't really see the point, but here you are, this code will be executed
   // three times, with (1, 0, [1,2,3]), (2, 1, [1,2,3]) and (3, 2, [1,2,3])
   console.log(value, index, array);
   console.log(this.testval);
   console.log(this.options.testoption);
 }
}); 
```

我在initialize（）中移动了你的每个（而不是评论中所说的forEach），因为我不确定类描述符对象内的代码是否正常工作......另外你可能想在初始化中使用传递的选项`this.setOptions(options)`并实现 Options mutator。

此外，正如您在每条评论中所指出的那样，`var self = this;`这非常方便且易读。

# sql - 通过删除和插入新表来保留表中的前 1000 行？

> ID：14858291
> 
> 赞同：1
> 
> 时间：2013-02-13T16:32:56.183
> 
> 标签：sql, ssms

我正在为一个小项目缩减数据库。我听说将表减少到只有 1000 行的最有效方法是将这 1000 行复制到新表中删除旧表并重命名新表。

有人可以让我知道这是否正确以及大致如何做吗？

我知道如何选择前 1000 个，但不知道如何使用临时表等删除和创建表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:36:02.063

```
INSERT INTO NEW_TABLE
SELECT TOP 1000 * FROM OLD_TABLE

DROP TABLE OLD_TABLE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:36:09.433

您可以运行它来创建新表：

```
SELECT TOP 1000 * INTO NewTable FROM OldTable 
```

USING SELECT INTO 将创建一个新表。这种方法的缺点是您丢失了桌子上的钥匙。

或者，如果表存在，请使用

```
INSERT INTO NewTable SELECT * FROM OldTable 
```

但是，如果您有一个 Identity 字段，这将不起作用——您需要指定列名

```
INSERT INTO NewTable (Field1, Field2,...) SELECT Field1, Field2... 
```

如您所见，这实际上取决于您的情况。

要删除一个表，这很容易：

```
DROP TABLE OldTable 
```

祝你好运。

# php - ZF1 路由不适用于查看脚本子目录

> ID：14858292
> 
> 赞同：0
> 
> 时间：2013-02-13T16:33:04.840
> 
> 标签：php, zend-framework, zend-framework-routing

我正在使用 ZF1 并试图弄清楚为什么视图/脚本子目录路由不起作用。这是添加路线的引导程序中的代码。请让我知道我可能有什么问题。谢谢你的时间。

```
public function _initRoutes()
{

    $controller = Zend_Controller_Front::getInstance();

    $router = $controller->getRouter();

            //Route for user Account
    $account = new Zend_Controller_Router_Route(
        'ecommerce/account/:action',
        array(
            'module'     => 'ecommerce',
            'controller'     => 'user_account',
            'action'     => 'index'
        )
    );

            //Route for user Cart
            $cart = new Zend_Controller_Router_Route(
        'ecommerce/cart/:action',
        array(
            'module'     => 'ecommerce',
            'controller'     => 'user_cart',
            'action'     => 'index'
        )
    );
            //die(print_r($account));
            $router->addRoute('ecommerce/user_account/', $account);
            $router->addRoute('ecommerce/user_cart/', $cart);
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-14T05:15:58.997

you have to try this code

```
$router = Zend_Controller_Front::getInstance();
$router1 = $router->getRouter();
$router1->addRoute('category/:id/:name/*',
        new Zend_Controller_Router_Route('category/:user_id/:user_name/*', array(
        'controller' => 'user',
        'action'     => 'index'
        ))
); 
```

This will help you.

# backbone.js - “Uncaught TypeError: Object [object Object] has no method 'off'” 移动到主干时使用事件的错误 0.9.10

> ID：14858294
> 
> 赞同：7
> 
> 时间：2013-02-13T16:33:26.630
> 
> 标签：backbone.js, backbone-events

我对这个事件有一个看法：

```
var View = Backbone.View.extend({
  el: $('#test'),
  events: {
    "change input": "test"
  },
  test: function(e) {
    console.log("test");
  }
});

var view = new View(); 
```

使用主干 0.9.9 它可以工作，但是使用主干 0.9.10 我得到了这个错误：未捕获的类型错误：对象 [对象对象] 没有方法“关闭”。我需要改变什么来处理主干 0.9.10 上的事件？

我正在使用这个cdn

[http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js](http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js) [http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.10/backbone -min.js](http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.10/backbone-min.js)

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T14:35:39.847

我使用的是 jquery 1.5.2，并且在 jquery 1.7.0 上引入了 off 方法。Backbone 0.9.9 要求 el 包含 unbind 方法，而 Backbone 0.9.10 要求 el 包含 off 方法。jquery 1.5.2 上存在 unbind 方法，这就是我的代码与骨干 0.9.9 一起使用的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:13:06.800

试试这个...

```
var Test = Backbone.View.extend({
  events: {
    "change input": "test"
  },

  initialize: function() {
    this.setElement($('#test'));
  },

  test: function(e) {
    alert("test");
  }
});

var test = new Test(); 
```

或者，这样会更好……

```
var Test = Backbone.View.extend({
  events: {
    "change input": "test"
  },

  test: function(e) {
    alert("test");
  }
});

var test = new Test({
  el: $('#test')
}); 
```

# ios - CoreLocation 管理器不更新位置

> ID：14858298
> 
> 赞同：1
> 
> 时间：2013-02-13T16:33:38.430
> 
> 标签：ios, objective-c, gps, core-location

我试图实现一个单独的类来管理我的位置。每当我单击按钮时，我都想获得我的位置。

`gpsFilter.h`

```
#import <Foundation/Foundation.h>
#import <CoreLocation/CoreLocation.h>

@interface gpsFilter : NSObject <CLLocationManagerDelegate>

@property (nonatomic, retain) CLLocationManager *gpsManager;
@property (nonatomic, retain) NSString * latitude;
@property (nonatomic, retain) NSString * longitude;
@end 
```

`gpsFilter.m`.

```
#import "gpsFilter.h"

@implementation gpsFilter

- (id) init{
self = [super init];
if(self != nil){
    self.gpsManager = [[CLLocationManager alloc] init];
    self.gpsManager.delegate = self;
    [self.gpsManager startUpdatingLocation];
    BOOL enable = [CLLocationManager locationServicesEnabled];
    NSLog(@"%@", enable? @"Enabled" : @"Not Enabled");
}
return self;
}

- (void)gpsManager:(CLLocationManager *) manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{
NSLog(@"didUpdateToLocation: %@", newLocation);
CLLocation *currentLocation = newLocation;
if(currentLocation != nil){
    self.latitude = [NSString stringWithFormat:@"%.8f", currentLocation.coordinate.longitude];
    self.longitude = [NSString stringWithFormat:@"%.8f", currentLocation.coordinate.latitude];
}
}

- (void)gpsManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
NSLog(@"didFailWithError: %@", error);
}
@end 
```

我正在使用一个单独的类，因为我想在将来添加平滑过滤器。我没有得到任何更新。NSLog 永远不会被触发。我认为某些变量正在自动释放，但我不确定是哪一个。

viewController 代码如下。

```
#import "gpstestViewController.h"

@interface gpstestViewController (){

}

@end

@implementation gpstestViewController

- (void)viewDidLoad
 {
[super viewDidLoad];
self.location = [[gpsFilter alloc] init];
// Do any additional setup after loading the view, typically from a nib.
}

- (IBAction)getloca:(id)sender {
self.latitudeLabel.text = [self.location latitude];
self.longitudeLabel.text = [self.location longitude];

}

- (IBAction)getLocation:(id)sender {
self.latitudeLabel.text = [self.location latitude];
self.longitudeLabel.text = [self.location longitude];

}
@end 
```

很抱歉，我倾倒了很多代码，但我是 ios 编程的新手，我无法找到问题所在。

编辑：根本没有调用 updateLocation 委托方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:47:28.067

委托方法必须命名为`locationManager:didUpdateToLocation:fromLocation:`and `locationManager:didFailWithError:`。

您不能使用自定义方法名称，例如`gpsManager:didUpdateToLocation:fromLocation:`.

另请注意，`locationManager:didUpdateToLocation:fromLocation:`自 iOS 6 起已弃用，您应该使用`locationManager:didUpdateLocations:`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T16:37:56.923

你的 didUpdateToLocation 的签名是错误的：这是我的代码：

```
/** Delegate method from the CLLocationManagerDelegate protocol. */
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation 
           fromLocation:(CLLocation *)oldLocation    
{
  // here do 
} 
```

进一步设置`desiredAccuracy`为`CLLocationAccuracyBest`。

# java - 监控 javafx 任务是否完成

> ID：14858299
> 
> 赞同：2
> 
> 时间：2013-02-13T16:33:49.450
> 
> 标签：java, javafx

如何在不中断与任务进度关联的 progressIndicator 的情况下检查 javafx 后台任务是否已完成。

```
try
{
AddMeteorParents amp = new AddMeteorParents(textOpenDB.getText(), textMeteorData.getText(), DatabaseTools.meteorVersion.Meteor14);
proIndAddData.setVisible(true);
proIndAddData.progressProperty().bind(amp.progressProperty());
Thread th = new Thread(amp);
th.setDaemon(true);
th.start();
} 
```

AddMeteorParents 类从 Task 扩展而来。ProIndAddData 是一个 javafx 进度指示器。如果我添加 th.join() 或 th.isAlive() javafx progressIndicator 停止工作？我想在任务完成后显示一条消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:25:15.743

我能够使用 ExecutorService 一个接一个地运行一个后台任务（不会中断 progressIndicators）。

```
ExecutorService eservice = Executors.newFixedThreadPool(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:45:06.340

[javafx.concurrent.Task](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)的 javadoc说：

> 对状态变化做出一般反应
> 
> 有时您可能想要编写一个更新其进度、消息、文本的任务，或者在任务发生状态更改时以其他方式做出反应。例如，您可能希望在失败、成功、正在运行或已取消状态更改时更改任务的状态消息。

[http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html#onSucceededProperty](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html#onSucceededProperty)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-15T16:01:24.320

用于`javafx.concurrent.Task`包装您的任务代码，这`stateProperty`是您需要检查的。

看我的要点[https://gist.github.com/John-Chan/ee6b783c6e96c09c79a03a3da8fe14c4](https://gist.github.com/John-Chan/ee6b783c6e96c09c79a03a3da8fe14c4)

# php - Facebook 活动 使用 ticket_uri 立即购买

> ID：14858300
> 
> 赞同：1
> 
> 时间：2013-02-13T16:33:49.953
> 
> 标签：php, facebook-graph-api

看起来 Facebook 添加了一个新字段，您可以在 Facebook 活动中显示一个按钮，人们可以在其中购买门票。我试图将它添加到现有事件中，但只是调用了下面的调用，它只返回“1”，所以它看起来可以工作，但我没有看到任何地方出现“立即购买”按钮。有人有什么想法吗？

[access_token] => {mytoken} [ticket_uri] => {ticketurl}

参考：[https ://developers.facebook.com/docs/reference/api/event/](https://developers.facebook.com/docs/reference/api/event/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T20:22:08.533

您必须获得“页面访问令牌”，然后发布到 {page_id}/events。这是我在几个地方发布的步骤的副本：

1.  启用“事件时区迁移”
2.  以在我们希望将事件发布到的 FB 页面上具有管理员权限的用户身份登录 FB
3.  使用 APPLICATION 的 ID 构建此链接以授权管理页面 [https://www.facebook.com/dialog/oauth?client_id=MY_APP_ID&redirect_uri=MY_SITE_URL&scope=manage_pages,create_event&response_type=token](https://www.facebook.com/dialog/oauth?client_id=MY_APP_ID&redirect_uri=MY_SITE_URL&scope=manage_pages,create_event&response_type=token)
4.  perm 的交换令牌（更长的令牌） [https://graph.facebook.com/oauth/access_token?client_id=MY_APP_ID&client_secret=MY_CLIENT_SECRET&grant_type=fb_exchange_token&fb_exchange_token=](https://graph.facebook.com/oauth/access_token?client_id=MY_APP_ID&client_secret=MY_CLIENT_SECRET&grant_type=fb_exchange_token&fb_exchange_token=(token) （来自步骤 3 的令牌）
5.  访问此页面，找到您要发布的页面并复制新的 access_token [https://graph.facebook.com/me/accounts?access_token=](https://graph.facebook.com/me/accounts?access_token=) （来自步骤 4 的令牌）
6.  [根据https://developers.facebook.com/docs/reference/api/page/#events](https://developers.facebook.com/docs/reference/api/page/#events)上的说明，使用最后一个令牌（来自第 5 步）和 PAGE 的 ID 发布事件

请注意，如果您创建了很多事件，您将向每个点赞该页面的用户发送“垃圾邮件”。FB 最近添加了“no_feed_story”选项来防止这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T00:52:56.470

该事件是在旧事件后端创建的，因此它不支持 ticket_uri 字段。您需要转到高级设置并启用“事件时区”迁移，这会将您移动到新的事件后端。从那时起创建的事件将正确支持 ticket_uri 字段。

# asp.net - asp.net web 应用程序返回 IIS 信息而不是当前用户凭据

> ID：14858301
> 
> 赞同：0
> 
> 时间：2013-02-13T16:33:49.987
> 
> 标签：asp.net, webserver, iis-6

我正在使用自定义身份验证的 asp.net Web 应用程序。我编写了一个快速测试应用程序以在我们的 Web 服务器上发布，以确保我可以从用户那里获取必要的凭据。我正在尝试使用以下代码行获取当前登录的用户（我以前做过）：

```
 string username=System.Security.Principal.WindowsIdentity.GetCurrent().Name.ToString(); 
```

这通常返回格式为“域\用户”的字符串。我得到的是这样的： IIS APPPOOL\ASP.NET v4.0

我确定我遗漏了一些简单的东西，IIS 中是否有需要更改的设置？还是有其他方法来获取用户名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:39:31.833

尝试这个：

```
Page.User.Identity.Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:35:27.457

由于您使用的是自定义/表单身份验证，因此听起来您在用户通过身份验证后没有设置 IPrinicipal 详细信息。

您可以[按照此文档](http://msdn.microsoft.com/en-us/library/ff647070.aspx)（查找“创建表单身份验证 Cookie”部分）了解如何在您的应用程序中设置此代码。这并不像看起来那么难。

# javascript - 在 mouseup 上切换 CSS

> ID：14858302
> 
> 赞同：4
> 
> 时间：2013-02-13T16:33:55.673
> 
> 标签：javascript, jquery, html, css

我在我创建的工具上设置了控制台。单击时控制台可以最小化，再次单击时可以最大化。

然而问题是，一旦我最大化它，它就会在完成时最小化。我有哪些选择？

```
$('#consolebutton').mouseup(function() {
        if ($('#footconsole').height(200)) {
            $('#footconsole').animate({
                height: 14
            }, 100)
        } else if ($('#footconsole').height(14)) {
                $('#footconsole').animate({
                height: 200
            }, 100);
        }
}); 
```

（我确实意识到检查 div 的高度实际上是设置 div 的高度，这就是问题所在。）

[http://jsfiddle.net/VaDBW/3/](http://jsfiddle.net/VaDBW/3/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T16:36:58.300

试试这个...

```
$('#consolebutton').mouseup(function() {
    var $footconsole = $('#footconsole');
    if ($footconsole.height() == 200) {
        $footconsole.animate({
            height: 14
        }, 100)
    } else {
        $footconsole.animate({
            height: 200
        }, 100);
    }
}); 
```

它与高度进行比较（而不是设置它），并且我还将一个变量设置为 的值`$("#footconsole")`，而不是继续搜索它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:37:24.207

调用`height()`不带参数的方法。没有参数，它返回当前高度。传递参数时，它正在设置高度。

`if($('#footconsole').height() == 14)`例如。虽然在我看来你最好保存一个状态标志而`data`不是检查高度

```
if($('#footconsole').data('collapsed'))
{
    $('#footconsole').data('collapsed', false);
    /* do expand code */
} else {
     $('#footconsole').data('collapsed', true);
     /* do collapse code */
} 
```

您还可以使用类来定义设置，如果您需要做的不仅仅是切换类，您可以检查`hasClass`以进行进一步调整。很多选择。但是脱离原始高度似乎有点奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:37:02.977

我会在 click(function(){...}); 中使用 toggleClass(); 然后你不需要 if 语句，你可以把高度差异放在 CSS 中。

# c++ - 我想使用 64 位整数可以采用的全部范围。如何在 x86 Visual Studio 2008 中做到这一点？

> ID：14858309
> 
> 赞同：0
> 
> 时间：2013-02-13T16:34:15.460
> 
> 标签：c++, c, windows, visual-studio, visual-studio-2008

我在我的解决方案中包含了**stdint.h**并使用了**uint64_t**，但结果不是我想要的。这是我使用的代码。

```
#include <stdio.h>
#include "./stdint.h"

void    main (void)
{

    //-- to get the maximum value that the 32-bit integer can take
    unsigned int test = 0 ;
    test-- ;

    //-- to see if the 64-bit integer can take the value that the 32-bit integer can't take
    uint64_t test2 = test ;
    test2++ ;

    printf("%u\n", test) ;

    printf("%u\n", test2) ;

    while(1) { }

} 
```

这是结果。

```
4294967295
0 
```

我想使用 64 位整数可以采用的全部范围。我如何在 x86 Visual Studio 2008 中做到这一点？供您参考，我使用的是 32 位 Windows 7。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T16:35:52.720

的`%u`格式说明符`printf`用于无符号整数。使用`%llu`.

由于这是 C++，您不妨使用类型安全`std::cout`来避免程序员错误：

```
std::cout << test2; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T16:36:20.963

利用：

```
#include <inttypes.h>

/* ... */

printf("%" PRIu64 "\n", test2); 
```

打印一个`uint64_t`值。

`u`转换说明符用于打印一个`unsigned int`值。

请注意，该`PRIu64`宏是 C 宏。在 C++ 中，宏不存在，您可能必须使用`%llu`转换规范。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T16:38:09.567

由于您还将其标记为 C++，因此我将添加一种明显的方法来避免类型不匹配，就像您遇到的那样`printf`：使用 ostream 代替：

```
std::cout << test2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T16:41:15.247

> 在我拥有的一本书中，它说程序在计算时总是将任何变量转换为整数。是否可以将默认整数设为 64 位？

这是1）不正确，2）不，你不能告诉（大多数）编译器`int`你想要什么大小。你当然可以使用类似的东西：

```
 typedef Int int64_t;
 typedef Uint uint64_t; 
```

但是你不能重命名`int`为编译器应该是的东西——可能是 16、32、64、36 或 72 位——或其他一些 >= 16 的数字。

# php - PHP 注册资料信息

> ID：14858313
> 
> 赞同：0
> 
> 时间：2013-02-13T16:34:31.763
> 
> 标签：php, registration, profile

我正在做一个新项目，刚刚完成了注册系统。这个想法是在注册后，在第一次登录时，要求用户提供更多信息来填写他的个人资料。这包括 3 或 4 个步骤，其中之一是能够邀请朋友访问该网站。

我对这个过程有几个问题，希望这是问的正确地方。

1.  我认为应该检查这是否是用户第一次登录。实现这一目标的最佳方法是什么？将mysql数据库中的字段（firstlogin）设置为1并检查它？这样，每次用户登录时我都必须进行此检查。这是最好的方法还是有另一种更好/更简单的方法？

2.  如何实现 3/4 步骤的个人资料填写？是否有现有的框架或其他东西可以做到这一点，还是我必须自己编写代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:48:15.727

关于您的问题：

1.  在添加更多字段之前尝试利用您当前的架构。使用某人的个人资料中已经存在的字段。例如，您可能有一个名为`last_login_date`. 默认情况下，您会将其设置为 null。如果它为空，则用户以前从未登录过，否则该字段中有一个日期，因此表明他之前至少输入过一次。

2.  如果即使不是所有步骤都完成，也应该存储步骤的输入信息，那么您必须在某处（数据库）记录他当前在 X 步骤中，并在每个步骤中提交他的输入。另一方面，如果步骤不是那么关键，您可以将他的输入存储在会话 cookie 中，并在 4/4 步骤完成后一次性提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:45:33.107

我个人认为对于最后一个问题，您不需要这样做的框架。但是，对于第一步，我建议您（如您所说）向 mysql 添加一个名为 firstlogin 的布尔字段，并在您检查的每个页面中

```
<?php 
        include("database_connection_etcetera.php");
        if ($user['firstlogin'] == 0)
            {
                // show add fields
            }
        else
            {
                // show what you would have shown normally
            }
?> 
```

对于第二个问题，你的问题是什么？您只需在其中输入（例如）职业、公司名称、地址.. 等的简单 html 表单，然后使用简单的 mysql INSERT 将其放入表 users 中，其中 id 是 $user ['id']。

确保已经在mysql数据库中添加了职业，公司名称，地址...等字段并将其设置为NULL（DEAFULT NULL）。所以没有麻烦！

好的？我希望是的，我在这里为您提供所需的一切，最好的问候。

# php - 重定向时会话数据丢失 - Kohana 3.0

> ID：14858314
> 
> 赞同：0
> 
> 时间：2013-02-13T16:34:32.287
> 
> 标签：php, session, kohana-3

我有一个使用本机会话用 Kohana 3.0 编写的应用程序。在不到 1% 的用户中，会话数据在重定向时丢失。

发生这种情况时，用户无法使用其计算机上的任何浏览器登录。但是，他们可以在另一台计算机上登录。它们似乎都在 Windows 操作系统上，但版本不同。

它是一个独立的应用程序，但现在它通过另一个网站为一部分用户启动（在新窗口中）。只有那些用户有这个问题。

我无法重现该问题，并猜测它与用户的计算机有关。是否有任何类型的防病毒软件或任何与会话数据混淆的东西？

* * *

我的会话配置是：

```
'native' => array(
'name' => 'myappname',
'encrypted' => TRUE,
'lifetime' => 1209600,
), 
```

我添加了很多调试日志记录，并且丢失了会话数据的用户在这里：

```
2013-02-04 20:09:16 --- DEBUG: EC ******* start login - IP = 67.255.224.46
2013-02-04 20:09:16 --- DEBUG: EC cgl/user - logged in = 1 - IP = 67.255.224.46
2013-02-04 20:09:16 --- DEBUG: EC cgl/user ------- before redirect - user = 5 - logged in = 1 - redirect = bookshelf - $_SESSION =  id = 431a0b849f91a37d29b58a23bf130fe9  [ auth_user=>12874  ] - IP = 67.255.224.46
2013-02-04 20:09:16 --- DEBUG: bookshelf/before ~~~~~ NO USER = 0 - logged in = 0 - $_SESSION =  id = d502f35a37c7af525c1bda5476c9daac [  ]  - IP = 67.255.224.46
2013-02-04 20:09:17 --- ERROR: You must log in to see this page. $_SESSION = id = 66bf60812be3f6b5e3c1df42916e7f18 [ ], IP = 67.255.224.46 
```

“重定向之前”直接在我`Request::instance()->redirect('bookshelf');`的“书架/之前”之前在我的控制器的之前方法中。

未丢失会话数据的用户的日志如下所示：

```
2013-02-04 14:17:53 --- DEBUG: EC ******* start login - IP = 98.89.106.34
2013-02-04 14:17:53 --- DEBUG: EC cgl/user - logged in = 1 - IP = 98.89.106.34
2013-02-04 14:17:53 --- DEBUG: EC cgl/user ------- before redirect - user = 5 - logged in = 1 - redirect = bookshelf - $_SESSION =  id = 227e70d49c796ce03dc9f52d8a7b571e  [ auth_user=>13246  ] - IP = 98.89.106.34
2013-02-04 14:17:53 --- DEBUG: EC bookshelf/before - logged in = 1 - $_SESSION =  id = 227e70d49c796ce03dc9f52d8a7b571e  [ auth_user=>13246 last_active=>1360005473  ]  - IP = 98.89.106.34
2013-02-04 14:17:53 --- DEBUG: EC bookshelf/index - logged in = 1  - $_SESSION =  id = 227e70d49c796ce03dc9f52d8a7b571e  [ auth_user=>13246 last_active=>1360005473 school_id=>  ] - IP = 98.89.106.34 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T10:36:09.720

Kohana 3.3 中的会话也有同样的问题。**`'encrypted' => FALSE`**我通过在我的 config/session.php 中进行更改来解决它。像这样...

```
'database' => array(
        'name' => 'session_database', // Make sure the name is unique for each session type
        'encrypted' => FALSE,
        'lifetime' => 43200, // 43200 is 12hrs session time
        'group' => 'default',
        'table' => 'sessions',
        'columns' => array(
            'session_id'  => 'session_id',
            'last_active' => 'last_active',
            'contents'    => 'contents'
        ), 
```

# java - JAX-RS 接受图像作为输入

> ID：14858321
> 
> 赞同：10
> 
> 时间：2013-02-13T16:34:48.457
> 
> 标签：java, web-services, rest, jax-rs

很长一段时间以来，我一直在开发 JAX-RS Web 服务以满足我的开发需求。到目前为止，我编写的所有方法都接受 java 字符串或原始类型作为输入。

这种方法的一个例子：

```
@POST  
@Path("MyMethod")  
@Produces(MediaType.APPLICATION_JSON)  
public String MyMethod(@FormParam("username")String username, @FormParam("password")String passowrd) 
```

我现在要做的是接受图像作为输入。我读了很多关于这个的文章。一些人建议接受 base64 编码作为输入，而另一些人建议接受实际的 InputSteam。

但是，我还没有看到关于如何接受 InputStream 的完整示例。我读到了@consumer 注释和@Provider，但我仍然无法理解它。是否有文章、文档或示例以某种方式引导我实现这一目标？即关于如何实施而不是展示理论的逐步过程。

我知道base64编码可以工作，但出于好奇，我想知道另一种方法是如何工作的……在此先感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T18:32:39.367

这应该有效：

```
import org.apache.commons.io.IOUtils;
@POST
@Path("MyMethod") 
@Consumes("*/*") // to accept all input types 
public String MyMethod(InputStream stream) {
    byte[] image = IOUtils.toByteArray(stream);
    return "done";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-28T13:01:34.127

`InputStream`可能不是首选但与一个或多个路径参数组合的简单方法：

```
@POST
@Path("page/{page}")
@Consumes(MediaType.APPLICATION_OCTET_STREAM)
@Produces("image/jpeg")
public StreamingOutput generatePage(final InputStream inputStream, @Context UriInfo uriInfo) {
    final int page = Integer.parseInt(uriInfo.getPathParameters().getFirst("page"));
    return (outputStream) -> {
        service.generatePage(page, inputStream, outputStream);
    };
} 
```

# cakephp - cakephp：延迟闪烁消息

> ID：14858325
> 
> 赞同：1
> 
> 时间：2013-02-13T16:35:13.283
> 
> 标签：cakephp

是否有任何功能可以让我在其中执行诸如闪存消息之类的操作`cakephp`？我不想使用会话，因为它会在下一页显示 Flash 消息。

例如：用户类型链接错误`mysite?action=mistake`，如果没有这样的错误，我想检查控制器，所以我有一些允许的操作的数组，我检查是否`$this->params['url']['action']`存在。如果不是我想向用户显示错误，但此错误仅显示在第二页上（或者如果我重新加载）。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:51:38.003

您看到的错误只是`div`一个具体的样式。就像是：

```
<div id="flashMessage" class="error-message">Error</div> 
```

您可以做的是使用 Javascript 检查您想要检查的任何内容，如果它不符合预期，请将错误附加到`div`您想要的任何地方。

这就是我没有以某些形式实时显示错误的原因。

如果你想要更详细的东西，你可以试试这个： [http ://www.alfbd.com/cakephp-ajax-form-validation-with-jquery-and-jsonview/](http://www.alfbd.com/cakephp-ajax-form-validation-with-jquery-and-jsonview/)

# android - Switch - case 表达式必须是常量表达式

> ID：14858328
> 
> 赞同：3
> 
> 时间：2013-02-13T16:35:24.037
> 
> 标签：android, actionbarsherlock

我正在使用 ActionBarSherlock，然后`onOptionsItemSelected`在单击特定菜单项时启动新活动。代码在添加 ABS 之前工作正常，现在我`case expressions must be constant expressions`在`case`.

```
@Override
    public boolean onOptionsItemSelected(com.actionbarsherlock.view.MenuItem item) 
    {
        switch (item.getItemId()) {
        case R.id.about: //error
            startActivity(new Intent(this, AboutActivity.class));
            break;
        case R.id.feedback: //error
            //launch activity
            break;

        default:
            break;
        return super.onOptionsItemSelected(item);
    } 
```

在添加 ActionBarSherlock 之前，相同的代码运行良好。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-13T16:54:41.723

我已将`switch/case`声明替换为`if/else`. 如果您在 Eclipse 中，您只需单击`switch`然后按。`CTRL+1`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-13T16:55:08.020

按照 Sam 的建议作为答案发布：

如果您在库中，则必须将所有 switch/case 语句从 ADT 版本 14 更改为 if/else 块。

看：

[tools.android.com/tips/non-constant-fields](http://tools.android.com/tips/non-constant-fields)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-24T08:06:19.180

要从`switch`/`case`语句切换到`if`/ `for`，只需在 android studio 中使用`alt`+即可。`enter`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-07-12T05:38:50.623

开关盒缺少关闭“}”。

# java - Java EWS API - 从交换中读取电子邮件 - 可比选项

> ID：14858329
> 
> 赞同：0
> 
> 时间：2013-02-13T16:35:23.310
> 
> 标签：java, exchangewebservices, ewsjavaapi

我正在使用 Java EWS API 将我的应用程序连接到 MS Exchange 并读取用户电子邮件请求。然后通过系统工作流程处理这些请求。一天内的电子邮件数量限制为 50 封，因此整体数量较少。但是，我正在寻找一种有效且可靠的机制来使用 EWS API 从交换服务器中读取数据。另请注意，处理完电子邮件后，我们会将其移至子文件夹，因此收件箱仅包含未处理的请求

目前据我了解，以下方案用于连接到 Exchange 服务器并对邮箱执行各种操作。

1.  轮询 - 使用标准 Exchange 服务接口连接到 Exchange；查找所有新电子邮件并按顺序处理它们。客户端可以更好地控制读取和移动到已处理文件夹之间的故障和同步。不利的一面是，体验不是实时的，即使没有任何活动，也会建立联系以进行交换。

2.  拉取通知 - 此方法与前一种方法几乎相同，使用间隔订阅拉取通知，并在计时器事件发生时从收件箱中读取电子邮件。优点和缺点与方法 1 类似。

3.  推送通知 - 客户端订阅交换服务器以通过将自己注册到特定事件并定义回调机制（客户端 Web 服务）来接收通知来接收推送通知。从好的方面来说，通知几乎是实时的，并且只有在有事件时才会建立连接。不利的一面是，我看到订阅和水印需要在客户端进行管理，以免事件丢失。不确定这是否仍然是一种可靠的方法，因为在建立订阅之前已经在收件箱中的消息会发生什么情况；服务器启动时会重播这些事件吗？目前还不清楚。

4.  流式订阅 - 客户端建立流式连接，然后与服务器保持打开状态最多 30 分钟，在此期间交换将通知任何已注册的事件。一旦连接断开，就有能力恢复它，以便订阅保持活动状态。在我开始听到同步文件夹项目和保持同步状态的额外步骤之前，这似乎是最好的方法；需要定期进行，以便不会错过连接/断开连接的事件。

看看我的需求（可靠地从交换服务器读取电子邮件）和各种选项的分析，我觉得方法 1 简单且更可靠，因为它可以更好地控制整个过程。但同时如果我对框架在优缺点方面的理解是错误的，我想和其他熟悉 API 的人一起来纠正我。

我愿意接受该小组的任何建议，以使其变得更好，因为其目的是不错过任何电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:30:54.927

我会选择选项 1 的代码简单性。如果您每分钟连接一次，负载非常低（只是 FindItem 调用不返回任何内容）并且用户几乎可以立即体验到它。

您每天最多只能处理 50 个，因此“即时”的愿望有点矛盾（如果用户只进行那么多更新，他肯定可以等一分钟）。

# php - 如何更改通过 PHP 中的 get 方法传递的变量的值

> ID：14858345
> 
> 赞同：-3
> 
> 时间：2013-02-13T16:35:54.163
> 
> 标签：php, html, button, get

我希望能够修改变量“语言”的值，并通过单击页面中的按钮将其传递给浏览器。

基本上，用户可以点击网页中的一个按钮，然后整个页面将刷新为不同的语言。

任何线索如何用 HTML 标签做到这一点？

这是我做的代码，但它不起作用：

```
 <form method='get' action='myWebPage.php'>  
         <button type='button' name='Language' value='<?php echo $tLangValue["Language"]' ; ?> onclick='<?php if(isset($_GET['Language'])){Language=1;}else{Language=0;} ?>'>Switch Language</button>  
     </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:47:18.753

这个问题比第一眼看上去要复杂得多。这取决于您的数据是以不同的语言显示还是仅与用户界面有关。

当数据更改时，您可能还想更改其 URL。因此，请链接到不同的站点子树 -`http://example.com/en/`与`http://example.com/cz/`.

如果您的数据相同并且只有用户界面发生变化，您可以从[Accept-Language](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4) HTTP 标头自动检测语言。当用户更改语言时，为整个应用程序设置一个 cookie，为此，您可以使用 URL like`http://example.com/...?lang=en`并在服务器上处理更改。

您也可以在第一个 cas 中使用自动检测，只需将自动检测脚本放入 Web 根目录，这样访问的用户`http://example.com/`将立即被重定向到其语言的版本。

# php - 正则表达式：如何在没有下划线的情况下表示 \w

> ID：14858346
> 
> 赞同：38
> 
> 时间：2013-02-13T16:35:54.963
> 
> 标签：php, regex, url

有没有简洁的表达方式：

```
\w but without _ 
```

即“\w 中包含的所有字符，_ 除外”

我问这个是因为我正在寻找最简洁的方式来表达域名验证。域名可以包含小写和大写字母、数字、句号和破折号，但不能包含下划线。\w 包括以上所有内容，外加一个下划线。那么，有没有办法通过正则表达式语法从 \w 中“删除”下划线？

**编辑：**我在询问 PHP 中使用的正则表达式。

提前致谢！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-13T16:43:12.923

以下字符类（在 Perl 中）

```
[^\W_] 
```

`\W`是相同的`[^\w]`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-13T16:41:18.720

您可以使用[负前瞻](http://www.regular-expressions.info/lookaround.html)：`(?!_)\w`

但是，我认为写作`[a-zA-Z0-9.-]`更具可读性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T16:40:36.257

为了安全起见，通常我们会使用字符类：

```
[a-zA-Z0-9.-] 
```

上面的正则表达式“片段”匹配英文字母和数字，加上句点`.`和破折号`-`。即使使用最基本的正则表达式支持，它也应该可以工作。

越短越好，但前提是您确切知道它代表什么。

不知道你用的是什么语言。在很多引擎中，`\w`相当于`[a-zA-Z0-9_]`（有些需要“ASCII 模式”）。但是，某些引擎对正则表达式具有 Unicode 支持，并且可能会扩展`\w`以匹配 Unicode 字符。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-13T16:42:40.477

如果我的理解正确，则`\w`表示`[A-Za-z0-9_]`句号，不包括破折号。

信息： [http ://en.wikipedia.org/wiki/Regular_expression#POSIX_character_classes](http://en.wikipedia.org/wiki/Regular_expression#POSIX_character_classes)

所以我想你想要的是`[a-zA-Z0-9.-]`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T16:41:01.943

一些正则表达式风格具有您可能使用的否定后向语法：

```
\w(?<!_) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T16:43:10.363

我会从 [^_] 开始，然后想想我还需要拒绝哪些字符。如果您需要过滤键盘输入，枚举所有不需要的字符非常简单。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-18T13:59:35.653

你可以这样写：

```
\([^\w]|_)\u 
```

如果您将此字符串与 preg_filter 一起使用，则 \w 中的任何字符（不包括 _ 下划线）都将被过滤。

# open-source - 设计师的简单 CMS

> ID：14858349
> 
> 赞同：0
> 
> 时间：2013-02-13T16:36:02.427
> 
> 标签：open-source, content-management-system

我意识到这个问题可能会被否决，但我会尽可能清楚地概述我的需求。

基本上我一直在研究 Perch，这是一个非常简单的 CMS，可以在网站设计的最后添加。对我来说，它的核心优势在于它的易用性——只需为内容可能发生变化的区域添加一行代码。它还有一个非常简单的管理区域。

我看过concrete5，这似乎并不简单。

有人对简单的 CMS 有什么建议吗？我基本上是一名网页设计师，而不是开发人员，并且正在寻找像 Perch 一样快速设置但免费的东西。

通过简单的 CMS，我的意思是安装简单，对于没有技术知识的人来说，在管理方面也很容易理解。它的实现也很简单。

这些网站很简单，可能有博客功能，但除此之外只需要编辑文本和图像。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-28T14:39:02.867

如果您正在寻找 perch 的免费替代品，我认为您应该查看[couchcms](http://www.couchcms.com/)。它与 perch 非常相似，但它是开源的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-28T14:42:49.147

我推荐[AnchorCMS.com](http://anchorcms.com)，它简单、易于使用且开源（[Anchor - Github](https://github.com/anchorcms/anchor-cms)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T16:46:39.003

您没有提到任何特定的站点需求，这将是确定最佳 CMS 解决方案的一个因素。但是，根据您所说的，我建议您查看 Wordpress。它具有很多功能，并且可以扩展以适应大多数网站的需求。学习起来非常简单，并且有一个庞大的用户/开发人员社区可以帮助您快速使用 Wordpress。在我看来，Wordpress 是想要/需要学习 CMS 开发的人的最佳选择。稍后，您可能想要迁移到 Joomla 或 Drupal。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T16:58:30.700

定义“简单”？小代码库？易于管理？不需要一堆扩展？

我的 3 个标准是 WordPress、Joomla 和 Drupal，按网站需求的复杂性增加排序。经过一些经验，我可以在几个小时内与他们中的任何一个一起建立一个非常好的网站。没有学习曲线就没有 CMS。

# html - AJAX 表单请求未发送到 Express Web 服务器

> ID：14858350
> 
> 赞同：0
> 
> 时间：2013-02-13T16:36:03.480
> 
> 标签：html, forms, node.js, jquery, express

我开始学习 Expressjs、Twitter Bootstrap 和 BackBonejs。我已经使用命令行工具创建了基本的 Expressjs 应用程序，并为登录表单添加了一个 index.html。当用户单击附加了事件的“登录”按钮时，我检索表单信息并对“/登录”路由进行 ajax 调用，但它不起作用..

这里是必要文件的列表：

*   [索引.html](http://pastebin.com/WxF1cP6h)
*   [登录.js](http://pastebin.com/J1sadWWu)
*   [服务器.js](http://pastebin.com/L4cKnCe0)
*   [路由.js](http://pastebin.com/JSxjsGge)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:36:48.953

问题是表单仍然通过重定向提交，因为这是它的默认行为，并且没有被指示这样做。而且，由于重定向，浏览器正在中止 Ajax 请求。

为了防止重定向，您需要绑定到并使用的[`.submit()`事件](http://api.jquery.com/submit/)：`<form>`[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)

```
$(document).ready(function () {
    $('#login-form').submit(function (e) {
        e.preventDefault();
    });
}); 
```

将这个事件用于 Ajax 也可能是值得的，而不是`.click()`因为许多浏览器允许通过除了单击按钮`<button>`之外的其他操作提交（例如，当焦点位于 a 时按下）：`type="submit"``Enter``<input type="text">`

```
$(document).ready(function () {
    $('#login-form').submit(function (e) {
        e.preventDefault();

        var _login = $('#login').val(),
            _password = CryptoJS.SHA512($('#password').val()),
            _remember = $('input:checkbox:checked').val() ? 1 : 0;

        // etc.
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:17:43.280

一方面，您需要防止按钮单击的默认操作：

```
$('#btn-login').click(function () {
  // ...
});

// should accept the passed event and `prevenDefault`, like...

$('#btn-login').click(function (e) {
  e.preventDefault();
  // ...
}); 
```

# ruby-on-rails - 从架构中删除时间戳字段

> ID：14858358
> 
> 赞同：6
> 
> 时间：2013-02-13T16:36:29.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我使用默认生成器创建了一些表，它们`t.timestamp`的定义中都有，所以创建的模式也有 created_at 和 updated_at 字段。现在我被告知我的架构中不需要这两个字段，所以我转到原始的 create_table* 文件并从它们中取出 t.timestamp 行并运行`db:migrate`and`schema:load`命令但是当我转到我的 schema.rb 文件时我可以看到他们还在那里。

我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T16:54:40.557

跑

```
rails g migration remove_timestamps_from_table created_at updated_at 
```

是`table`你模特的名字。由于这遵循从 y 中删除 x 的模式，因此 rails 足够聪明，可以为您生成适当的迁移。

然后运行

```
rake db:migrate 
```

更新您的开发数据库和

```
rake db:test:prepare 
```

准备测试数据库，一切就绪！

[在此处](http://guides.rubyonrails.org/migrations.html)阅读有关迁移的更多信息。如果您仍然遇到问题，请考虑重新启动您的 rails 服务器或数据库服务器。

# php - Html flash 代码不适用于 FireFox

> ID：14858361
> 
> 赞同：1
> 
> 时间：2013-02-13T16:36:38.300
> 
> 标签：php, html, flash

这是您发布时 Adob​​e CS5 Flash Professional 生成的代码：

```
<div id="flashContent">
        <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="100%" height="100%" id="website" align="middle">
            <param name="movie" value="website.swf" />
            <param name="quality" value="high" />
            <param name="bgcolor" value="#CF9" />
            <param name="play" value="true" />
            <param name="loop" value="true" />
            <param name="wmode" value="window" />
            <param name="scale" value="noscale" />
            <param name="menu" value="true" />
            <param name="devicefont" value="false" />
            <param name="salign" value="t" />
            <param name="allowScriptAccess" value="sameDomain" />
            <param name="FlashVars" value="'.$flashvars.'" />
            <!--[if !IE]>-->
            <object type="application/x-shockwave-flash" data="website.swf" width="100%" height="100%">
                <param name="movie" value="website.swf" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#CF9" />
                <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="window" />
                <param name="scale" value="noscale" />
                <param name="menu" value="true" />
                <param name="devicefont" value="false" />
                <param name="salign" value="t" />
                <param name="allowScriptAccess" value="sameDomain" />
                <param name="FlashVars" value="'.$flashvars.'" />
            <!--<![endif]-->
                <a href="http://www.adobe.com/go/getflash">
                    <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
                </a>
            <!--[if !IE]>-->
            </object>
            <!--<![endif]-->
        </object>
    </div> 
```

还有我的 flashvars ......但不适用于 FireFox。因此，我通过 $_SERVER['HTTP_USER_AGENT'] 和自定义代码进行了检测，其中包含 [if !IE] 中的代码以使其正常工作。

我不知道这类标签，所以问题是：这段代码是错误的还是 FireFox 根本无法识别它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:02:24.260

在 HTML 中包含 Flash 的最佳做法是使用 SWFObject - 它是一个用于嵌入 Flash 内容的 javascript 库（我相信更新的 Flash Pro 版本使用它）。

它适用于所有浏览器，并具有方便的功能，例如检查 Flash 播放器版本并在未安装 Flash 播放器时提供替代内容。

该代码可在此处获得完整说明：[http ://code.google.com/p/swfobject/](http://code.google.com/p/swfobject/)

我还在这里写了一篇关于使用它的博客文章：http: [//blog.leeburrows.com/2011/07/javascript-for-flashers-swfobject/](http://blog.leeburrows.com/2011/07/javascript-for-flashers-swfobject/)

# java - 如果有对服务器的异步调用，如何在 UI 初始化结束时显示 GWT 对话框？

> ID：14858362
> 
> 赞同：0
> 
> 时间：2013-02-13T16:36:42.210
> 
> 标签：java, gwt

我初始化 UI，将所有元素添加到 VerticalPanel，并在初始化结束时检查用户密码是否过期。如果它即将到期，我会显示一个带有警告的对话框。

此页面的元素之一是带有 DataGrid 的 TabPanel，所有数据都是从服务器异步获取的。所以问题是，当密码过期对话框出现时，它位于 DataGrid 行的后面。当我在 Chrome 中检查元素时，我看到有 PopupGlassPanel -> DialogBox -> Table (with content)。但图片应该是：表格（有内容）-> PopupGlassPanel -> DialogBox。

但是我无法对服务器进行异步调用以检索数据。是否可以控制这些事情，以便从服务器检索所有数据，并且只有在它显示我的拨号框之后？

初始化方法如下：

```
public void initUI() {
    final VerticalPanel mainPanel = new VerticalPanel();

    Panel outer = new VerticalPanel();
    DataHolder dataHolder = new DataHolder(); //this class contains DataGrid and makes async calls to server for data
    outer.add(dataHolder.getContent());
    tabPanel.add(outer, "Important Data", true);

    mainPanel.add(tabPanel);

    checkPasswordExpiration(getPwdExpiring());

    RootPanel.get().add(mainPanel);
}

//...........

private void checkPasswordExpiration(int days) {
//...
//Show dialog box
//...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:52:15.243

您需要`checkPasswordExpiration()`在异步调用返回后调用。为此，您应该获取异步回调 ( `onSuccess()`) 来触发您有一个处理程序的事件，该处理程序将调用`checkPasswordExpiration(getPwdExpiring());`您可以`EventBus`用来触发事件并添加处理程序。

# android - Android 安全级别和密码机制

> ID：14858363
> 
> 赞同：-1
> 
> 时间：2013-02-13T16:36:45.660
> 
> 标签：android, security

当我问自己 Windows 和 Linux 系统过去曾被黑客入侵的问题并尝试在谷歌上搜索这个问题时，我正在考虑 android 操作系统的安全性。不幸的是，即使花了半天时间我也不满意我在互联网上发现的。我想知道android安全和密码机制是如何工作的。如果有人可以分享任何内容或将我引导至有用的链接:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:19:18.540

Android password handling is detailed in the sources at [LockPatternUtils.java](https://android.googlesource.com/platform/frameworks/base/+/HEAD/core/java/com/android/internal/widget/LockPatternUtils.java), near line 820:

```
public byte[] passwordToHash(String password) {
    if (password == null) {
        return null;
    }
    String algo = null;
    byte[] hashed = null;
    try {
        byte[] saltedPassword = (password + getSalt()).getBytes();
        byte[] sha1 = MessageDigest.getInstance(algo = "SHA-1").digest(saltedPassword);
        byte[] md5 = MessageDigest.getInstance(algo = "MD5").digest(saltedPassword);
        hashed = (toHex(sha1) + toHex(md5)).getBytes();
    } catch (NoSuchAlgorithmException e) {
        Log.w(TAG, "Failed to encode string because of missing algorithm: " + algo);
    }
    return hashed;
} 
```

It looks like the general idea is to force a bad you to guess a correct password constrained by both MD5 and SHA1\. That means a bad guy must get the intersection (not union) the MD5 and SHA-1 hashes.

Unfortunately, the MD5 component allows for password recovery. Perhaps a better strategy would have been folding MD5 into SHA-1 (to remove naked access to MD5).

By the way, there is a bug report for that (TM): [Lock Pattern/Password uses MD5 Hash (LockPatternUtils.java)](http://code.google.com/p/android/issues/detail?id=37213).

# python - Python - 在 For 循环中更新变量

> ID：14858364
> 
> 赞同：2
> 
> 时间：2013-02-13T16:36:48.357
> 
> 标签：python

所以我决定用 Python 编写 Monopoly，但我在更新玩家位置时遇到了一些麻烦。我编写了一个循环遍历玩家，为每个玩家掷骰子，然后更新他们的位置。问题是 location 变量没有保持最新的位置，它在 for 循环开始时一直重置回 0。这是我的代码：

```
player1location = 0

def turn(numberPlayers, player, player1location, Board):
    for player in range(numberPlayers):
        player = 'Player'+str(player+1)
        print 'It\'s', player, 'turn!'
        print player1location
        rollDice = raw_input('Press Enter to roll the dice!')
        diceRoll = random.randint(1,6)
        print player, 'rolled a', diceRoll
        player1location = player1location + diceRoll
        print 'You landed on', player1location
        print '\n'

while True:
    turn(numberPlayers, player, player1location, Board) 
```

如有必要，我可以提供更多代码，但我认为这是控制玩家位置的一切。谢谢！

编辑：显然我正在更改局部变量而不是全局变量。我将如何更改全局变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T16:39:15.703

您有与要更新的目标变量同名的函数参数。因此，您对函数参数所做的任何更改，而不是全局变量。那是因为`function`为您传递给函数的参数创建了一个本地范围。因此，它掩盖了全局同名定义的变量。

因此，要么更改函数参数`player1location`的名称，要么更改全局变量的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:50:47.643

请注意，您有两个变量被调用- 一个在第一行*全局*`player1location`定义（在任何函数之外）：，第二个在每次调用函数时在*本地*创建： 。尽管它们具有相同的名称，但它们在 python 中是两个不同的变量，因为它们是在[不同的范围](http://www.saltycrane.com/blog/2008/01/python-variable-scope-notes/)中定义的。*`player1location = 0`*`def turn(numberPlayers, player, player1location, Board)`**

 **有几种方法可以解决这个问题。

您可以`player1location`从函数定义中删除，然后您将始终更改全局范围的变量。但是，根据您的命名约定，我猜您也想为其他玩家重用该功能（尽管尝试它仍然没有坏处，以帮助您了解它的工作原理）。

更好的方法可能是在函数结束时返回新玩家位置 ( `return player1location`)，然后在返回时将其分配给全局范围的位置 ( `player1location = turn(numberPlayers, player, player1location, Board)`)。**

# java - Jackson JSON 生成器为丢失的对象创建空 JSON 值

> ID：14858369
> 
> 赞同：8
> 
> 时间：2013-02-13T16:37:05.397
> 
> 标签：java, json, jackson, gson

我已经开始使用 Jackson 作为 JSON 生成器，作为 google GSON 的替代品。我遇到了杰克逊生成对象的问题：如果对象确实为空，则为空。另一方面，GSON 在 JSON 中生成 NO 条目，这是我想要的行为。当一个对象丢失时，有没有办法阻止杰克逊生成空对象/值？

杰克逊

```
 ObjectMapper mapper = new ObjectMapper();
    StringWriter sw = new StringWriter();
    mapper.writeValue(sw, some_complex_object);
    String jackson = sw.getBuffer().toString();

    System.out.println("********************* START JACKSON JSON ****************************");
    System.out.println(jackson);
    System.out.println("********************* END JACKSON JSON ****************************"); 
```

生成这个：

{"eatwithrustyspoon":{ **"urlList":null** ,"device":"iPad","os":"iPhone OS","peer_id":

GSON 看起来像这样：

```
 Gson gson = new Gson();
    String json = gson.toJson(some_complex_object);

    System.out.println("********************* START GSON JSON ****************************");
    System.out.println(json);
    System.out.println("********************* END GSON JSON ****************************"); 
```

它会生成这个（这是我想要的 - 请注意“urlList”：null 没有生成）：

{"eatwithrustyspoon":{"device":"iPad","os":"iPhone OS","peer_id"

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T16:42:15.973

## 从[杰克逊常见问题解答](http://wiki.fasterxml.com/JacksonFAQ)：

我可以省略写入具有空值的 Bean 属性吗？（“如何防止写入空属性”，“如何抑制空值”）

是的。根据[JacksonAnnotationSerializeNulls](http://wiki.fasterxml.com/JacksonAnnotationSerializeNulls)，您可以使用：

```
 objectMapper.setSerializationInclusion(JsonSerialize.Inclusion.NON_NULL);
  // or (for older versions):
  objectMapper.configure(SerializationConfig.WRITE_NULL_PROPERTIES, false); 
```

瞧，没有更多的空值。请注意，您必须在 bean 序列化之前配置映射器，因为此设置可能与序列化程序一起缓存。因此，设置得太晚可能会阻止更改生效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-05T12:33:16.303

我的问题有点不同，实际上我得到了 POJO 类属性的 Null 值。

但是我通过在我的 pojo 类中映射属性来解决这个问题，如下所示：

@JsonProperty("PROPERTY_NAME")

认为它可以帮助某人:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-28T09:01:18.637

以下解决方案救了我。

```
 objectMapper.setSerializationInclusion(Include.NON_NULL); 
```

# css - Mac 上的 Chrome 渲染字体大小不一致

> ID：14858373
> 
> 赞同：1
> 
> 时间：2013-02-13T16:37:26.317
> 
> 标签：css, google-chrome, browser, cross-browser, em

我在运行相同操作系统 (10.7.5) 和相同版本 Chrome (24.0.1312.57) 的两台不同 Mac 上遇到问题。我遇到了一些非常奇怪的事情，似乎正文字体大小增加了 5%。我还注意到一些副本看起来稍大一些，并且图像/背景图像没有填满它们的正确容器。该站点使用和 em 编码`body { font-size: 100%; }`其他所有内容。我在电脑上做了一个测试，结果出现了问题，将正文字体大小更改为 95% 使一切看起来一致。

编辑：下面的图片示例。我能够使用这个[小提琴创建一个测试场景](http://jsfiddle.net/kDJM7/1/)

您将在第二张图片中看到，em 中的框超出了 400 像素的下划线。当字体大小为 100% 时，假设 25em = (400px / 16)。在第三张图片上，我将字体大小减小到 95%，现在 400px 等于 25em。

![在此处输入图像描述](../Images/710fe0078a1cbfd6e6d938ccf16a905d.png) ![在此处输入图像描述](../Images/12fb91c56219e1cb4d8b74d2545ffd3e.png) ![在此处输入图像描述](../Images/43fc41ee3d102045a2a0d2241b1e4f9d.png)

有任何想法吗？

# html - html中的下边距

> ID：14858378
> 
> 赞同：0
> 
> 时间：2013-02-13T16:37:37.473
> 
> 标签：html, css, iframe

我正在尝试制作一个用于嵌入 iframe 的 html 页面。

但即使我设置了所有边框、边距和填充。视频只有 560 x 315 PX。当我使我的 iframe 大小相同时，它会出现滚动条。它只发生在向上/向下滚动条上。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:38:56.243

在嵌入页面的 iframe CSS 上使用“溢出：隐藏”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:39:28.767

添加`overflow: hidden`到您的`#container_wrapper`元素以删除滚动条。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:40:00.453

你不需要 CSS。iFrame 中专门为此内置了一个属性。

使用 iFrame 中的滚动属性关闭滚动

```
<iframe scrolling="no" src="http://your_site/" width="560" height="315"></iframe> 
```

iFrame 上的设置`overflow: hidden`实际上不起作用。有没有人真正尝试过？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T16:40:18.810

只需将溢出：隐藏到您的 iframe 上。

```
iframe {
    overflow: hidden;
} 
```

# svn - svn/subversion pre commit hooks 文件夹

> ID：14858381
> 
> 赞同：-1
> 
> 时间：2013-02-13T16:37:40.513
> 
> 标签：svn

嗨，我正在尝试创建一个预提交挂钩，所以当用户提交代码时，它会检查 jira 关联。

我只希望它适用于特定项目，我该怎么做？

我的结构如下：（基础或任何项目中没有钩子文件夹）

//subversion.xxxx.net/svn/dev ->/com/text/project1 ->/com/text2/project2

1）我希望我的预提交挂钩仅适用于 project1，我应该将脚本放在哪里？它在 /com/text/project1/hooks 中吗？

还是我错了，我需要在 //subversion.xxxx.net/svn/dev/hooks 中创建文件夹？

2）对于全球项目提交，我是否将其放置//subversion.xxxx.net/svn/dev/hooks？

任何帮助都会很好，我只是不想添加它，因为目前每个人都在起诉它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:36:08.247

首先（我意识到这不是您问题的重点），您想查看[JIRA Commit Acceptance](https://studio.plugins.atlassian.com/wiki/display/CMMT/JIRA+Commit+Acceptance)插件。它完全符合您的要求，包括预提交挂钩 - 无需重新发明轮子。

对于你的问题，我喜欢你要去的地方——你肯定想要你的钩子在版本控制中。您不需要存储在使用它的存储库中的钩子。由于它仅在服务器上使用，因此团队无需检查它。

我建议您为钩子（称为钩子）创建一个新的存储库。我这样做并在服务器上检出这个 repo，然后`SUBVERSION_REPOSITORY_HOME/hooks/pre-commit.sh`在我的钩子检出中调用脚本。这很好，因为只需签入然后在服务器上执行 svn up 即可将更改应用于所有存储库。

# php - 以时间戳格式删除秒数 - php

> ID：14858389
> 
> 赞同：1
> 
> 时间：2013-02-13T16:38:08.047
> 
> 标签：php, time

我正在尝试转换一些日期“日期”（使用 current_timestamp() 创建），并显示 2013-02-13 17:38:08，我不希望出现秒数。但是当我使用时`date('Y-m-d H:i', $date)`，我得到

```
1970-01-01 01:33 
```

我想我没有使用正确的 php 方法，有人可以帮忙吗？

最好的，迈赫迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:39:41.913

[`date`](http://www.php.net/manual/en/function.date.php)接受一个参数作为时间戳，所以[`strtotime`](http://www.php.net/manual/en/function.strtotime.php)先用来转换：

```
date('Y-m-d H:i', strtotime($date)) 
```

可能更容易使用[`substr`](http://www.php.net/manual/en/function.substr.php)吗？

# .htaccess - htaccess 通过用户和 ip 进行身份验证，但特殊文件除外

> ID：14858398
> 
> 赞同：1
> 
> 时间：2013-02-13T16:38:37.443
> 
> 标签：.htaccess, apache2

我想根据远程IP和使用htaccess文件提供的用户名对apache2-webserver（2.2.9（Debian））上的某些文件进行访问控制。

规则：

1.  来自 localhost 的所有用户都可以访问所有文件，并且永远不应要求自己进行身份验证。
2.  来自远程主机的用户必须通过 http-basic 身份验证来验证自己。他们还可以访问除单个文件之外的所有文件，这些文件对他们来说是不可见的。

我在下面发布的 htaccess 文件允许远程用户登录和禁止访问 adm.php。不幸的是，本地主机用户需要输入密码。为了让本地用户在不弹出密码对话框的情况下访问 adm.php，我需要进行哪些更改？

```
AuthType Basic
Authname "Test-App"
AuthUserFile /etc/web_passwd
Require valid-user
Order Deny,Allow
Allow from 127.0.0.1
Deny from all
Satisfy Any

<Files adm.php>
   Order Deny,Allow
   Allow from 127.0.0.1
   Deny from all
   Satisfy all
</Files> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:50:24.857

启用 mod_setenvif 然后在您的`$DOCUMENT_ROOT/.htaccess`:

```
<Files "adm.php">
   Order Deny,Allow
   Deny from all
   Allow from 127.0.0.1
   Satisfy all
</Files>

<FilesMatch "(?!^adm\.php)^.*$">
   AuthType Basic
   Authname "Test-App"
   AuthUserFile /etc/web_passwd
   Require valid-user

   Order      deny,allow
   Deny from  all
   Allow from 127.0.0.1
   Satisfy    any
</FilesMatch> 
```

# html - PHP: li 不显示内联，尽管 display:inline

> ID：14858399
> 
> 赞同：-3
> 
> 时间：2013-02-13T16:38:39.990
> 
> 标签：html, css

我正在显示来自数据库的电影列表——它们应该是内联显示的，但它们是垂直显示的。这是一个[测试页](http://tinyurl.com/bkdqvf7)。

我已将 display:inline 添加到 li 和内部 div，但仍然没有运气-

```
.movienav {
    height: 500px;
    width:75%; 
    float:left;
    margin-top:25px; 
    clear:left;
    padding-bottom: 45px;
}

.movienav li {
    width: 340px;
    height: 450px;
    float: left;
    margin-right: 10px;
    position: relative;
    display:inline;
    list-style:none;

}

.movienav li div {
    backface-visibility:hidden;
    width: 340px;
    height: 450px;
    overflow: hidden;
    background: #161616;
    position: absolute;
    top: 0;
    left: 0;
    display:inline;

}

.movienav li div.back {
    backface-visibility:hidden;
    left: -999em;
    padding-bottom: 15px;  
    background-color:#161616; /*max-height:450px; overflow:auto;*/
    margin-top: 0;
    display:inline;

}

<div class="movienav">
<ul>
<li><div class="front"><img src="<?php echo $imglink; ?>" width="340" height="450" class="dvdcover" /></div>
<div class="back">

<p><?php echo $description; ?></p>
</div>
</li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:44:04.070

您让每个 LI 将其包装为自己的 UL 和 DIV。我只是猜测，但你可以用

```
.movienav {float: none;} 
```

# ruby-on-rails - gmaps4rails 在选项卡内映射时显示标记就在地图外

> ID：14858400
> 
> 赞同：3
> 
> 时间：2013-02-13T16:38:41.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3, google-maps, ruby-on-rails-3.2, gmaps4rails

我正在使用 Gmaps4rails，我设法让它在一个选项卡中工作，将此代码添加到选项卡功能中。

```
$(function() {
        $( "#tabs" ).tabs({
                        fx: { opacity: 'toggle' },
                        select: function(event, ui) {
                                jQuery(this).css('height', jQuery(this).height());
                                jQuery(this).css('overflow', 'hidden');
                        },
                        show: function(event, ui) {
                                jQuery(this).css('height', 'auto');
                                jQuery(this).css('overflow', 'visible');
                                google.maps.event.trigger(map, 'resize');
                        }

                }); 
```

[http://hik-fyp.heroku.com/en/events/31](http://hik-fyp.heroku.com/en/events/31)

正如您在此示例中看到的（向下滚动并单击“地图”选项卡），地图看起来不错，但标记就在左上角之外。标记在正确的位置，地图不在中心。

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:25:23.657

如果它只是地图的标记：

```
var lat = Gmaps.map.markers[0].lat;
var lng = Gmaps.map.markers[0].lng;
var centerpoint = new google.maps.LatLng(lat, lng);
Gmaps.map.map.setCenter(centerpoint); 
```

最好在创建标记时提供此线

# c# - 在 WCF 服务中模拟数据库

> ID：14858402
> 
> 赞同：0
> 
> 时间：2013-02-13T16:38:45.143
> 
> 标签：c#, database, wcf, unit-testing, mocking

我有一个 WCF 服务，我在其中操作数据库表。如何为服务传递一些参数以`MockDatabase`用于测试目的而不是生产`Database`。

服务内的 IDatabase 接口：

```
public interface IDatabase
{
    void addNewProduct(Product product);
} 
```

MockDatabase 实现 IDatabase：

```
public class MockDatabase : IDatabase
{
    public void addNewProduct(Product product)
    {
        //some impl
    }
} 
```

客户端获取服务实例：

```
AuthenticationClient authorise = new AuthenticationClient(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:07:54.077

抱歉，您的问题并不完全清楚，但如下所示。

如果您指的是单元测试而不是使用任何模拟对象框架，那么像这样..

```
//production code/project
public interface IDatabase {
    void addNewProduct(Product product);
}

public class SystemUnderTest {
    private IDatabase _database;
    public SystemUnderTest(IDatabase database) {
        _database = database;
    }

    public void DoSomthing(Product product) {
        _database.addNewProduct(product);
    }
}

//Unit Test project
public class MockDatabase : IDatabase {
    public void addNewProduct(Product product)
    { //mock implementation}
}

[TestClass]
public class UnitTest1
{
    [TestMethod]
    public void TestMethod1()
    {
        //Arrange
        var mock = new MockDatabase();
        var fakeProduct = new Product();
        mock.addNewProduct(fakeProduct );
        var sut = new SystemUnderTest(mock);

        //Act
        sut.DoSomthing(product);

        //Assert
        //Whatever you like to assert
    }
} 
```

我在这里使用构造函数注入，但您也可以使用属性注入。除非我有更多信息，否则很难准确地说出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:51:32.620

我建议只在单元测试项目中调用模拟数据库。我建议不要为每个服务调用添加 if 语句，以查看调用是要使用实时数据库还是模拟数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:59:44.397

我最终为我的所有数据库操作创建了一个接口`IDatabase`，并创建了一个`Database`实现`IDatabase`.

然后我创建了一个`DatabaseMock`类，它也实现了`IDatabase`，但在测试期间应该运行改变的方法体。

使用`Unity`并且`Moq`我能够配置`web.config`主项目的和`app.config`测试项目的以在运行时解析绑定：

```
<configSections>
    <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration"/>
  </configSections>

<unity xmlns="http://schemas.microsoft.com/practices/2010/unity">
    <assembly  name="Ecommerce_WCF"/>
    <assembly  name="Ecommerce_WCF_Test"/>

    <alias alias="IDatabase" type="Ecommerce_WCF.IDatabase, Ecommerce_WCF" />
    <alias alias="Database" type="Ecommerce_WCF.Database, Ecommerce_WCF" />
    <alias alias="DatabaseMock" type="Ecommerce_WCF.DatabaseMock, Ecommerce_WCF" />

    <container>
      <register type="IDatabase" mapTo="Database" />

      <!--<register type="IDatabase" mapTo="DatabaseMock" />-->
    </container>
  </unity> 
```

在`container`标签中，根据`register type`注释/未注释的内容，它会根据真实类或模拟来解析绑定，您可以根据您是否正在运行/测试进行更改

每当`Database`在我的应用程序中使用操作时，我都会使用以下代码：

```
var unity = new UnityContainer().LoadConfiguration();
            var proxy = unity.Resolve<IDatabase>();
            proxy.AddNewProduct(product); 
```

# php - 如何在php中静态获取类的名称？

> ID：14858403
> 
> 赞同：0
> 
> 时间：2013-02-13T16:38:50.800
> 
> 标签：php, class, introspection

使用此代码：

```
<?php

class a {
  public static function type() {
    echo get_class();
  }
}

class b extends a {
}

echo b::type(); 
```

它输出`a`. 我想要调用类的名称：`b`. 可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:42:38.523

如果您正在运行 PHP 5.3 或更高版本：`get_called_class()`将完成这项工作

# php - JOIN 2 个没有记录复制的表

> ID：14858404
> 
> 赞同：0
> 
> 时间：2013-02-13T16:38:52.727
> 
> 标签：php, mysql, magento

我有 2 张桌子：

1：

```
id | name
1  | test
2  | test1 
```

2.

```
id | related_id | additional
1  | 1          | 1         
2  | 1          | 2 
```

1 表中的 id 与 2 中的 related_id 相关

如何在没有复制记录的情况下将 1 个表与 2 个表连接起来，因此结果将只有来自第二个表的 1 行（related_id 和附加可以是任何）

```
id | name | related_id | additional
1  | test | 1          | 1
2  | test1| NULL       | NULL 
```

**更新** 如果我尝试在 INNER/LEFT JOIN 之后进行分组，结果是

```
id | name | related_id | additional
1  | test | 1          | 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:47:08.070

您可以使用主键对结果进行分组

```
select * 
from table1 left join table2
on table1.id = table2.related_id
group by table1.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:19:15.753

您可以使用连接

```
SELECT 
    *
FROM table1 as t1
LEFT JOIN (
        SELECT
            MAX(id),
            related_id
        FROM table2
    ) as t2
ON t1.id = t2.related_id 
```

# macos - 在 Mac OS X 中将应用程序复制到应用程序文件夹时会发生什么

> ID：14858407
> 
> 赞同：0
> 
> 时间：2013-02-13T16:38:55.933
> 
> 标签：macos

如何知道 Mac OS X 文件系统中的文件在哪里处理？以及哪些文件？

UPD：我问这个问题是因为我从其他目录中的应用程序中找到了一些文件，而不仅仅是在/Applications（即~/Library）中。那么这些文件是在我运行应用程序后创建的吗？（不是在复制？）很多人告诉复制应用程序就像在 Mac OS X 中安装一样，所以我认为应用程序可以在“安装”时将一些文件、首选项放在其他目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T00:50:18.370

Macintosh 上的应用程序被允许出于自己的目的写入某些特定目录。这些目录大部分都在Library中，要么是系统库

```
 /Library/... 
```

或用户的图书馆

```
 /Users/...username.../Library/.... 
```

传统上写成 ~/Library/...

在这些文件夹中，您可能会找到 Preferences（应用程序存储其首选项设置的位置）、Application Support（应用程序存储模板和可自定义资源等内容的位置）、Logs（如果出现问题，应用程序可能会在其中写入崩溃日志）、Caches（用于存储网页等信息）和服务（用于从“服务”菜单启动的内容）。

一般来说，应用程序不应该在没有询问的情况下在这些文件夹中安装 LARGE 的东西。因此，没有太多理由担心应用程序在此处安装的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:51:00.437

Mac OS X 上的应用程序文件夹是`/Applications`.

OS X 中的应用程序（以 .app 结尾的文件）实际上是目录。.app 目录中的所有内容都被复制到 /Applications。当您将应用程序放入您的应用程序文件夹时，您只是将一个以 .app 结尾的目录复制到 /Applications 目录。

您可以`ls -l /Applications/Preview.app`在命令行上进行确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-11T21:29:36.970

即使在应用程序运行之前，应用程序似乎也可以使用以下方法复制这些文件：

```
Applications can contain a helper application as a full application bundle,
stored inside the main application bundle in the Contents/Library/LoginItems directory.
Set either the LSUIElement or LSBackgroundOnly key in the Info.plist file of the helper
application’s bundle. 
```

在此处查看更多信息：[https ://developer.apple.com/library/content/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLoginItems.html](https://developer.apple.com/library/content/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLoginItems.html)

您可以通过将最新版本的 Docker for Mac OS X 复制到 Applications 文件夹但不运行它来查看此功能。

# javascript - 在页面加载时使用 ng-class 在 div 上设置一个类

> ID：14858409
> 
> 赞同：1
> 
> 时间：2013-02-13T16:38:58.280
> 
> 标签：javascript, angularjs

如标题所示，我试图在页面加载（而不是点击）的 div 上设置一个类，`ng-class`但我不知道如何或是否可能。它`div`被包装在一个模块和控制器中，我之前试图在其中设置变量，`$scope.frontpage`但它不起作用。

```
<div id="main" role="main" class="clearfix" data-ng-module="ValidationBoxModule" ng-controller="ValidationBoxClassController">
    <div validation-id="dataValidationSummary" validation-summary ng-class="frontpage" ></div>
    <asp:ContentPlaceHolder ID="MainContentPlaceHolder" runat="server"></asp:ContentPlaceHolder>
</div>

angular.module("ValidationBoxModule", []).controller("ValidationBoxClassController", ["$scope", function ($scope) {

    $scope.frontpage = "";

    ($("#main").find(".sliderBox")) ? $scope.frontpage = "frontpage" : $scope.frontpage = "";
}]); 
```

那么有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:16:47.460

你想要做的不是*angular way*。如：“不要在控制器中进行 DOM 操作”。而是使用指令，例如：

```
function Ctrl($scope) {
  $scope.frontpage = false;
}

angular.module('app', ['app.directives']);

angular.module('app.directives', []).directive('isFrontpage', function () {
  return {
    restrict: 'A',
    link: function (scope, element) {
      scope.frontpage = angular.element(element).find('#main .sliderBox').length > 0;
    }
  };
}); 
```

和：

```
<body ng-controller="Ctrl" is-frontpage>
  <div id="main">
    <div class="sliderBox"></div>
  </div>

  <div
    validation-id="dataValidationSummary"
    validation-summary
    ng-class="{frontpage: frontpage}">
  </div>
</body> 
```

**演示**：http: [//jsbin.com/unihon/4/](http://jsbin.com/unihon/4/)

# javascript - 获取可滚动数据内容的大小

> ID：14858410
> 
> 赞同：0
> 
> 时间：2013-02-13T16:39:00.033
> 
> 标签：javascript, jquery

我有一个`scrollbar`包含 >=0 数据元素的变量，其中添加了`addItemBefore`. 当`scrollbar`包含零个元素时，需要触发特定事件。我有所有的工作代码`scrollbar`和事件，虽然我不知道如何检查是否`scrollbar`不包含数据元素。

相关代码：

`var scrollbar = $("#scrollbar-id").data("scrollable");`

...

`function addElement(message) {`

...

`scrollbar.addItemBefore(message); }`

我想在另一个函数中检索滚动条中的项目数以触发事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:54:53.033

尝试计算 .data() 中的对象

[http://jsfiddle.net/CbugG/1/](http://jsfiddle.net/CbugG/1/)

```
function count(obj){
    var c = 0;
    for(var p in obj) {
        if(obj.hasOwnProperty(p)) ++c;
        log(obj[p]);
    }
    return c;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:43:15.060

打电话`scrollbar.getItems()`，然后检查`length`

```
if(scrollbar.getItems().length == 0) { no items } else { items } 
```

# security - 移动原生应用的认证

> ID：14858416
> 
> 赞同：3
> 
> 时间：2013-02-13T16:39:08.683
> 
> 标签：security, api, mobile

假设我有一个需要调用 API 的 Android 应用程序。我想对部署的应用程序进行身份验证，以确保未经授权的客户端无法使用我的 API。

我可以在应用程序中放入任何东西——对请求进行签名的 HTTP 标头，以及随机数。但是，如果有人反编译应用程序，他将能够复制身份验证方法，例如生成签名和共享密钥的算法。对于 Java 和 Android，这并非不可行。

有没有可能避免？可能不是，但我想确定密码学没有适合我的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:42:49.787

这个问题没有解决办法。您的服务器不可能知道它正在与“您的”客户端交谈。您唯一可以合理验证的是用户，而不是应用程序。也可以合理地验证某些安全的硬件设备，但是这样做非常昂贵，并且仍然不能确保您的客户端正在被使用；它仅表明用户可以访问您的安全硬件设备之一。

这已在 SO 中多次讨论过。这些帖子讨论了这个问题并链接到更多这些讨论：

*   [iOS 应用程序安全性的最佳实践](https://stackoverflow.com/questions/9448632/best-practices-for-ios-applications-security/9448821#9448821)
*   [iPhone 应用到网页的安全 https 加密](https://stackoverflow.com/questions/9181186/secure-https-encryption-for-iphone-app-to-webpage)

虽然上面的帖子是根据 iOS 设计的，但这个问题是普遍存在的。

# iphone - 放置两个不同对象的列表并按日期对它们进行排序，目标 C

> ID：14858424
> 
> 赞同：0
> 
> 时间：2013-02-13T16:39:38.400
> 
> 标签：iphone, ios, objective-c

列表 1 包含对象 As 的列表，列表 2 包含对象 Bs 的列表。

对象 A 包含

```
date
quantity
message 
```

对象 B 包含

```
date
email
first name
last name 
```

对象 As 和 Bs 都具有共同的属性日期。无论如何将它们合并到一个列表中并按日期排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:55:56.113

您应该将它们合并为一个数组（NSArray 的 arrayByAddingObjectsFromArray:，对吗？），然后您可以使用 NSArray 的 sortedArrayUsingComparator：

```
 NSArray *mergedArray = [array1 arrayByAddingObjectsFromArray:array2];

    NSArray *orderedArray = [mergedArray sortedArrayUsingComparator: ^(id obj1, id obj2) {
        NSDate *date1 = [obj1 date];
        NSDate *date2 = [obj2 date];
        return [date1 compare:date2];
    }]; 
```

我还没有测试过代码，但它会是这样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:57:00.533

```
NSArray *listA = [NSArray arrayWithObjects:objA0, objA1, objA2, nil];
NSArray *listB = [NSArray arrayWithObjects:objB0, objB1, objB2, nil];

NSMutableArray *allObjects = [NSMutableArray arrayWithArray:listA];
[allObjects addObjectsFromArray:listB];

[allObjects sortUsingComparator:(NSComparator)^(id obj1, id obj2){
    NSDate *date1 = obj1.date;
    NSDate *date2 = obj2.date;
    return [date1 compare:date2]; }]; 
```

# objective-c - 无法识别的选择器 - [NSView borderRect]

> ID：14858426
> 
> 赞同：1
> 
> 时间：2013-02-13T16:39:40.947
> 
> 标签：objective-c, macos, cocoa

我在获取视图边框的 NSRect 时遇到问题。我不断收到无法识别的选择器错误。

这是代码：

```
NSGradient *BorderGradient = [[NSGradient alloc] initWithStartingColor:[NSColor blackColor] endingColor:[NSColor whiteColor]];
[BorderGradient drawInRect:[self.window.contentView borderRect] angle:-90];
// Unrecognized Selector error here 
```

我正在尝试访问边框矩形以向边框添加颜色渐变。当我尝试自行访问borderRect时，代码也会崩溃，如下所示：

```
NSRect rect = [self.window.contentView borderRect];
NSLog(@"origin.x = %f", rect.origin.x); 
```

如果尝试将 drawInRect: 转换为 CGRect。像这样：

```
NSGradient *BorderGradient = [[NSGradient alloc] initWithStartingColor:[NSColor blackColor] endingColor:[NSColor whiteColor]];
[BorderGradient drawInRect:NSRectToCGRect([self.window.contentView borderRect]) angle:-90];
// Unrecognized Selector error here 
```

任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:42:15.037

`NSView`（从中返回的内容`self.window.contentView`）没有`borderRect`方法，这会导致*Unrecognized Selector 错误*。

您可能想要`frame`或`bounds`相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:43:00.373

`NSView`没有名为 的方法`-borderRect`。它是您实现的自定义方法吗？`NSBox`确实有`-borderRect`方法。您是否希望您的窗口的内容视图是 NSBox 的一个实例？你有没有检查过，这实际上是真的。

也许你真的想要`-frame`或`-bounds`？

# java - 如何将 sql 查询排除在 java 代码之外

> ID：14858429
> 
> 赞同：0
> 
> 时间：2013-02-13T16:39:42.020
> 
> 标签：java, oracle, jdbc

我写了一个小代码，其功能如下：

1.  读取输入文件
2.  读取其中的第一行并检查它是否`AAA`在某个位置具有值
3.  如果满足条件，则调用该方法`insertAAAmethod`并将数据加载到 oracle 表中
4.  如果记录`BBB`调用`insertBBBrmethod`具有不同的插入查询，请阅读下一行

问题是我在输入文件中有 15 条不同的记录，所以我有 15 种不同的方法，例如`insertAAAmethod`每种方法都有不同的插入查询：

```
public static void insertAAARecord() throws Exception {

    String sqlQuery = "insert into my_table(ColumnA,ColumnB,ColumnC,ColumnD,ColumnE,ColumnF,ColumnG)"
            + "values (?,?,?,?,?,?,?)";

    try {

        pstmt = conn.prepareStatement(sqlQuery);

        pstmt.setString(1, "AAA");
        pstmt.setDate(2,
                StringtoDate("AAA", CurrentLine.substring(150, 158)));
        pstmt.setDate(3,
                StringtoDate("AAA", CurrentLine.substring(158, 166)));
        pstmt.setString(4, CurrentLine.substring(24, 34));
        pstmt.setString(5, CurrentLine.substring(37, 45));
        pstmt.setString(6, CurrentLine.substring(147, 150));
        pstmt.setDate(7, headerDate);

        pstmt.executeUpdate();
    } catch (SQLException e) {
        e.printStackTrace(System.out);

    } finally {

        pstmt.close();

    }

} 
```

是否可以将 sql 查询保留在 java 代码之外？（例如在属性文件中）

**注意：**插入查询根据记录更改，如果它是记录“AAA”，则如果记录不同，则插入查询应遵循一个插入查询。插入查询应更改。

让我知道如何优化我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:00:44.170

是的，您应该创建一个包含所有查询的属性文件，并在启动时使用 Properties 对象加载它们，然后使用 Properties 来查找它们。您还可以通过 Spring 将查询注入到您的配置对象中。

我一直在构建数据库对象，将您的代码集成到数据库数据中，并且查询保留在那里，调试和管理要容易得多，因为您需要的一切都在一个地方。

让您的生活变得简单，避免使用 ORM 并调整您的 SQL 查询（或者让 DBA 这样做，这就是他们所做的并且他们擅长）。但是，如果您不喜欢 SQL 或不关心它的效率，那么像 Hibernate 这样的 ORM 可能就是您所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:14:44.417

也许这会比其他方法花费更多时间，但它会帮助您优化代码。

每个查询/进程都有共同的属性。

*   SQL 查询
*   字符串模式
*   参数

并且每个参数都有

*   位置
*   数据类型
*   ETC

如果您已经在使用 spring，您将能够在 config.xml 中将它们定义为 bean。如果没有，您仍然可以使用 xml 配置（而不是属性文件）

然后，您必须创建一些类来解析这些 bean 并创建自定义查询。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:58:01.293

您想使用 JPA。我建议通过一个简单的 JPA 教程，例如：http: [//glassfish.java.net/javaee5/persistence/persistence-example.html](http://glassfish.java.net/javaee5/persistence/persistence-example.html)

该教程将演示如何创建或修改对象并将这些更改保存在数据库中的基础知识。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T16:44:22.403

尝试使用任何 ORM 框架，如 Hibernate/JPA、Ibatis？

# ios - xCode iOS 开发 - ld：找不到 -lzbar 的库

> ID：14858430
> 
> 赞同：1
> 
> 时间：2013-02-13T16:39:54.427
> 
> 标签：ios, xcode, linker

各位下午好！我已将我的 iOS 应用程序（用 xCode 编写）减少到 1 个警告和 1 个错误。我的错误是：
**ld: library not found for -lzbar clang: error: linker command failed with exit code 1 (use -v to see invocation)**

如果有人对此感到满意，请看一下，如果您看到简单的问题，请告诉我。我意识到它缺少链接器文件。我找不到它，并且将此项目中的所有文档重新应用于新项目并不能解决问题。

有人介意帮助我吗？非常感谢。在发布此问题之前，我已尝试在 Google 上无情地回答此问题。不知何故，我找不到一个简明的答案，至于我的问题是什么。

感谢任何愿意提供帮助的人！

* * *

```
Ld /Users/PsychodelicFuzz/Library/Developer/Xcode/DerivedData/CHH-bmbqxvfwddzaupfaavvipxaqwvfx/Build/Products/Debug-iphonesimulator/CHH.app/CHH normal i386
cd "/Users/PsychodelicFuzz/Desktop/Hospital App"
setenv IPHONEOS_DEPLOYMENT_TARGET 6.1
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk -L/Users/PsychodelicFuzz/Library/Developer/Xcode/DerivedData/CHH-bmbqxvfwddzaupfaavvipxaqwvfx/Build/Products/Debug-iphonesimulator -F/Users/PsychodelicFuzz/Library/Developer/Xcode/DerivedData/CHH-bmbqxvfwddzaupfaavvipxaqwvfx/Build/Products/Debug-iphonesimulator -filelist /Users/PsychodelicFuzz/Library/Developer/Xcode/DerivedData/CHH-bmbqxvfwddzaupfaavvipxaqwvfx/Build/Intermediates/CHH.build/Debug-iphonesimulator/CHH.build/Objects-normal/i386/CHH.LinkFileList -dead_strip -Xlinker -objc_abi_version -Xlinker 2 -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.1 -framework CoreFoundation -framework CoreMedia -framework AVFoundation -framework CoreVideo -framework QuartzCore -framework SystemConfiguration -framework UIKit -framework Foundation -lzbar -o /Users/PsychodelicFuzz/Library/Developer/Xcode/DerivedData/CHH-bmbqxvfwddzaupfaavvipxaqwvfx/Build/Products/Debug-iphonesimulator/CHH.app/CHH 
```

ld：找不到 -lzbar 的库 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

# javascript - 如何从字符串中获取最后一个字母？

> ID：14858431
> 
> 赞同：2
> 
> 时间：2013-02-13T16:39:57.203
> 
> 标签：javascript, regex

我有以下字符串

```
str = '"Apples" AND "Bananas" OR Gala Me' 
```

我想在最后得到“Gala Me”。单词“AND”、“OR”或引号之间的任何内容都可以视为标记。我有这个正则表达式。

```
regex = /AND|OR|"[^"]+"/g 
```

它匹配我所有的标记，但我怎么能得到这个正则表达式的反义词来获得不匹配的子字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T16:46:24.663

您可以`split()`使用标记的字符串：

```
var parts = str.split(/\s*(?:AND|OR|"[^"]+")\s*/)

// ["", "", "", "", "Gala Me"] 
```

或者，您可以按长度过滤它们：

```
var parts = str.split(/\s*(?:AND|OR|"[^"]+")\s*/).filter(function(s) {
    return s.length > 0;
});

// ["Gala Me"] 
```

之后，您选择最后一个元素（如果适用）：

```
if (parts.length) {
  console.log(parts.pop());
}

// "Gala Me" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:48:47.353

> 匹配最后一个 'AND' 或 'OR' 之后的任何内容的正则表达式

```
.*(?:AND|OR)(.*)$
------------
 |
 |->matches greedily until the last AND or OR 
```

第 1 组捕获您所需的字符串..

# java - java.lang.NumberFormatException：对于 JSP 页面中的输入字符串

> ID：14858435
> 
> 赞同：7
> 
> 时间：2013-02-13T16:40:04.950
> 
> 标签：java, hibernate, jsp, jstl

嗨，有人可以帮助为什么在尝试在 JSP 页面中显示值时出现错误。我没有任何数字被转换或字符串被转换为数字，但是我得到 NumberFormatException

我的 Servlet 获得显示用户记录的请求

```
if(action.equalsIgnoreCase("update")){
        System.out.println("Came into Update");
        userId=(int) Integer.parseInt(request.getParameter("userid"));
        nbId=request.getParameter("nbId").trim();
        System.out.println("User iD and NBid: "+ userId + nbId);

        User user=new User();
        user.setUser_id(userId);
        user.setUser_nbk(nbId);

        List userRecords=UserDAO.getUserRecord(user);
        request.setAttribute("userRecords", userRecords);
        List owningOrg=Owning_Org_DB.getOwningOrgRecords();
        request.setAttribute("owningOrg", owningOrg);
        request.getRequestDispatcher("WEB-INF/JSP/TableMaintenance/UserNewAdd.jsp").forward(request, response); 
```

POJO：

```
 @Entity
 @Cache(usage=CacheConcurrencyStrategy.READ_WRITE)
  public class User {

@Id
private int user_id;
private String user_first_name;
private String user_middle_name;
private String user_last_name;

       //getters and setters methos
   } 
```

道：

```
public static List getUserRecord(User obj){

    Logger lo=LoggerFactory.getLogger("UserDAO.getUserRecord");
    Session session= Annotationsessionfactory.getAnnotationSession();
    Transaction tx=session.beginTransaction();

    lo.debug("Request for A user Record");
    //List<User> recList=new ArrayList<User>();
    List recList=null;
    try{

        //String userRecord="from User";
        Criteria userList=session.createCriteria(User.class)
                .add(Restrictions.eq("user_nbk", obj.getUser_nbk()))
                .add(Restrictions.eq("user_id", obj.getUser_id()));

         recList=userList.list();
        System.out.println(recList.size());

    }catch (Exception e){

        lo.info("Exception Occured in UserDAO.getUserRecord");
        lo.debug("Exception Occured in UserDAO.getUserRecord:"+e);
        tx.rollback();

    }finally{

        session.close();

        lo.info("Session Closed in UserDAO.userRecordslist finally block: ");
    }

    lo.debug("Record was sent to the requesting servlet or method: "+ recList);
    return recList;

} 
```

JSP 页面

```
<table>
 <tr>
  <td>First Name</td>
   <td><input type="text" id="firstname" name="firstname" maxlength="80" value="">${userRecords.user_first_name}</td>
</tr>
 <tr>
 <td>Middle Name</td>
 <td><input type="text" id="middlename" name="middlename" maxlength="80" value="${userRecords.user_middle_name}"></td>

....... 
```

我得到的例外：

```
SEVERE: Servlet.service() for servlet jsp threw exception
**java.lang.NumberFormatException: For input string: "user_first_name"**
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
at java.lang.Integer.parseInt(Integer.java:447)
at java.lang.Integer.parseInt(Integer.java:497)
at javax.el.ListELResolver.coerce(ListELResolver.java:166)
at javax.el.ListELResolver.getValue(ListELResolver.java:51)
at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)
at org.apache.el.parser.AstValue.getValue(AstValue.java:123)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:938)
at org.apache.jsp.WEB_002dINF.JSP.TableMaintenance.UserNewAdd_jsp._jspService    (UserNewAdd_jsp.java:77)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
at com.servicedbUpdate.UserUpdateDB_NewAdds.doPost(UserUpdateDB_NewAdds.java:79)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879)
at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600)
at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703)
at java.lang.Thread.run(Thread.java:619)
    Feb 13, 2013 10:30:49 AM org.apache.catalina.core.StandardWrapperValve invoke
    SEVERE: Servlet.service() for servlet UserUpdateDB_NewAdds threw exception
       **java.lang.NumberFormatException: For input string: "user_first_name"**
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
at java.lang.Integer.parseInt(Integer.java:447)
at java.lang.Integer.parseInt(Integer.java:497)
at javax.el.ListELResolver.coerce(ListELResolver.java:166)
at javax.el.ListELResolver.getValue(ListELResolver.java:51)
at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:54)
at org.apache.el.parser.AstValue.getValue(AstValue.java:123)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:186)
at org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate(PageContextImpl.java:938)
at org.apache.jsp.WEB_002dINF.JSP.TableMaintenance.UserNewAdd_jsp._jspService(UserNewAdd_jsp.java:77)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
at com.servicedbUpdate.UserUpdateDB_NewAdds.doPost(UserUpdateDB_NewAdds.java:79)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879)
at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600)
at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703)
at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-13T16:51:04.460

`${userRecords}`这里_

```
${userRecords.user_first_name}
${userRecords.user_middle_name} 
```

是 a `List<User>`，但是您尝试访问它，就好像它是单个`User`. 这是无效的。在 EL 中，a`List`只能通过整数索引访问，表示您要访问的列表项的位置，如下所示

```
${userRecords[0].user_first_name}
${userRecords[0].user_middle_name} 
```

异常也基本上告诉它需要一个整数值而不是字符串值。如果您仔细查看堆栈跟踪，您会发现`ListELResolver`涉及到 a。

但是，您的具体问题更大。您实际上应该遍历列表。为此使用[JSTL](https://stackoverflow.com/tags/jstl/info) `<c:forEach>`。例如（从你奇怪的代码片段简化）：

```
<table>
    <c:forEach items="${userRecords}" var="user">
        <tr>
            <td>${user.user_first_name}</td>
            <td>${user.user_middle_name}</td>
        </tr>
    </c:forEach>
</table> 
```

*（注意：如果您真的打算将它们重新显示为输入值，请记住[XSS 攻击漏洞）](https://stackoverflow.com/questions/2658922/xss-prevention-in-java/2658941#2658941)*

顺便说一句，我会处理你的[Java 代码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)。那些下划线真的不是Java-ish。

# windows - Windows Phone - 在 MediaElement 中使用 DependencyProperty

> ID：14858437
> 
> 赞同：1
> 
> 时间：2013-02-13T16:40:09.367
> 
> 标签：windows, silverlight, xaml

这是我在自定义 UserControl 中的代码：

通用的.xaml：

```
<UserControl x:Class="SoundControl.SoundClass"
             x:Name="Uc"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <StackPanel HorizontalAlignment="Stretch">
    <Grid x:Name="mygrid"
          Background="Transparent"
          Width="Auto">
      <Grid.RowDefinitions>
        <RowDefinition Height="70*" />
      </Grid.RowDefinitions>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="350*" />
        <ColumnDefinition Width="70*" />
      </Grid.ColumnDefinitions>
      <Button x:Name="SoundButton"
              Content="{Binding MyName, ElementName=Uc}"
              Grid.Column="0"
              Grid.Row="0"
              Click="RingtoneButton_Click" />
      <Button x:Name="RingtoneButton"
              Grid.Column="1"
              Grid.Row="0"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch"
              Click="RingtoneButton_Click">
        <Image Source="/Images/note.png"
               Stretch="Fill"
               Height="30"
               Width="30" />
      </Button>
      <MediaElement x:Name="SoundContainer"
                    Source="{Binding MySound, ElementName=Uc}"
                    AutoPlay="False" />
    </Grid>
  </StackPanel>
</UserControl> 
```

声音控制.cs

```
namespace SoundControl
{
    public partial class SoundClass : UserControl
    {
        SaveRingtoneTask saveRingtoneChooser;

        public SoundClass()
        {
            // For ringtone
            saveRingtoneChooser = new SaveRingtoneTask();
            saveRingtoneChooser.Completed += new EventHandler<TaskEventArgs>(saveRingtoneChooser_Completed);
        }

        public static readonly DependencyProperty SoundSourceProperty =
            DependencyProperty.Register("MySound", typeof(MediaElement), typeof(SoundClass), null);

        public static readonly DependencyProperty SoundNameProperty =
            DependencyProperty.Register("MyName", typeof(string), typeof(SoundClass), null);

        public MediaElement MySound
        {
            get { return (MediaElement)this.GetValue(SoundSourceProperty); }
            set { base.SetValue(SoundSourceProperty, value); }
        }

        public string MyName
        {
            get { return (string)this.GetValue(SoundNameProperty); }
            set { base.SetValue(SoundNameProperty, value); }
        }

        public SoundClass()
        {
            InitializeComponent();
        }

        private void SoundButton_Click(object sender, RoutedEventArgs e)
        {
            SoundContainer.Play();
        }

        private void RingtoneButton_Click(object sender, RoutedEventArgs e)
        {
            saveRingtoneChooser.Source = new Uri(SoundContainer.Source.AbsoluteUri);
            saveRingtoneChooser.DisplayName = MyName;
            saveRingtoneChooser.Show();
        }

        void saveRingtoneChooser_Completed(object sender, TaskEventArgs e)
        {
            switch (e.TaskResult)
            {
                //Logic for when the ringtone was saved successfully
                case TaskResult.OK:
                    MessageBox.Show("Ringtone saved.");
                    break;

                //Logic for when the task was cancelled by the user
                case TaskResult.Cancel:
                    MessageBox.Show("Save cancelled.");
                    break;

                //Logic for when the ringtone could not be saved
                case TaskResult.None:
                    MessageBox.Show("Ringtone could not be saved.");
                    break;
            }
        }

    }
} 
```

和我的 MainPage.xaml

```
<SoundControl:SoundClass
                        HorizontalAlignment="Left" 
                        Grid.Row="0" 
                        VerticalAlignment="Top" 
                        Grid.ColumnSpan="2" 
                        Width="456" 
                        MyName="TEST123"
                        MySound="/project/test.mp3"

/> 
```

问题是主页中的 XAML。MySound 属性给了我错误

```
The TypeConverter for "MediaElement" does not support converting from a string. 
```

您能提供的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:12:36.610

[`Source`MediaElement 类型](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.source(v=vs.95).aspx)的属性采用 Uri，而不是另一个 MediaElement 对象。将依赖属性的类型更改`MySound`为`Uri`，而不是`MediaElement`。（不要忘记也替换`typeof(MediaElement)`为`typeof(Uri)`within `SoundSourceProperty`。）

顺便说一句，我还建议将您拥有的两个依赖属性标识符 (`SoundSourceProperty`和`SoundNameProperty`) 分别重命名为`MySoundProperty`and `MyNameProperty`。有一个约定，依赖属性的标识符（即`public static readonly`字段）的名称是使用它的属性的名称（在您的情况下为`MySound`或`MyName`），后跟`Property`. 一些工具会期望遵循这个约定。

# r - 在 R 中复制向量

> ID：14858448
> 
> 赞同：6
> 
> 时间：2013-02-13T16:40:38.003
> 
> 标签：r, vector, replication

我有一个向量说`vec = c(1,1)`，我想将它（cbind）列复制 10 次，这样我就可以得到看起来像`matrix(1, 10, 2)`. 是否有`vec`可以执行此复制的功能？即代表（vec，10）？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T16:53:31.040

```
vec <- c(1,2)
rep(1,10) %*% t.default(vec)
      [,1] [,2]
 [1,]    1    2
 [2,]    1    2
 [3,]    1    2
 [4,]    1    2
 [5,]    1    2
 [6,]    1    2
 [7,]    1    2
 [8,]    1    2
 [9,]    1    2
[10,]    1    2 
```

或者正如@Joshua 指出的那样：

```
tcrossprod(rep(1,10),vec) 
```

一些基准：

```
library(microbenchmark)

microbenchmark(rep(1,10) %*% t.default(vec),
               matrix(rep(vec, each=10), ncol=2),
               t.default(replicate(10, vec)),
               tcrossprod(rep(1,10),vec),times=1e5)

Unit: microseconds
                                   expr    min     lq  median      uq       max
1 matrix(rep(vec, each = 10), ncol = 2)  2.819  3.699  4.3970  5.3700  2132.240
2         rep(1, 10) %*% t.default(vec)  2.456  3.185  3.6750  5.5370  2121.746
3         t.default(replicate(10, vec)) 57.741 62.987 64.3740 65.9590 26654.678
4           tcrossprod(rep(1, 10), vec)  2.192  2.924  3.3745  5.2465  2145.709 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T16:46:53.720

一种选择是：

```
vec <- c(1,1)
t(replicate(10, vec))

> t(replicate(10, vec))
      [,1] [,2]
 [1,]    1    1
 [2,]    1    1
 [3,]    1    1
 [4,]    1    1
 [5,]    1    1
 [6,]    1    1
 [7,]    1    1
 [8,]    1    1
 [9,]    1    1
[10,]    1    1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T16:45:59.207

关于什么：

```
R> vec = c(1,2)
R> matrix(rep(vec, each=10), ncol=2)
     [,1] [,2]
 [1,]    1    2
 [2,]    1    2
 [3,]    1    2
 [4,]    1    2
 .... 
```

# c# - 如何在 Visual Studio 中仅构建选定的类库项目，而不是任何依赖项

> ID：14858451
> 
> 赞同：0
> 
> 时间：2013-02-13T16:40:43.727
> 
> 标签：c#

我们有一个*非常*大的解决方案。我想找到一种在 Visual Studio 中选择 C# 类库项目并仅构建该项目的方法。

该解决方案由非托管 C++、托管 C++ 和 C# 项目组成。

启用“仅在运行时构建启动项目和依赖项”会导致可执行文件的性能非常好，它只编译可执行程序集。

但是选择一个 C# 类库项目并选择 Build Project 仍然会启动并构建所有这些 C++ 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:45:39.587

我不认为你能做到这一点。如果项目 A 引用项目 B，则编译器必须编译两个项目才能编译 A。解决此问题的一种方法是将对项目 B 的引用包含为程序集，而不是项目引用。这样，项目 A 依赖于项目 B 的编译结果，编译器不需要每次都构建它。我不喜欢有一个程序集引用，因为您必须管理程序集版本，并且可能将二进制文件签入到您的源代码管理中，这也是我不喜欢的。

说了这么多，你的构建应该是增量的。如果项目自上次构建以来没有任何变化，那么它们应该非常快。也许您的构建设置中的某些东西以这样一种方式引入了一个缺陷，即您的构建不再是增量的。如果您有自定义的前/后构建步骤，请检查这些步骤以确保没有发生此类情况。

# delphi - 在 Pascal 中使用不同参数从 C-DLL 声明函数

> ID：14858457
> 
> 赞同：0
> 
> 时间：2013-02-13T16:40:49.693
> 
> 标签：delphi, dll, pascal

我遇到以下问题：

我在我的 Lazarus 项目中加载了一个 C-DLL 的函数，比如

```
@dpstate_callCustomfunction:= GetProcAddress(mConnectorLibrary, 'dpstate_callCustomfunction'); 
```

这个函数在 C-DLL 中用不同的变量实现了不同的实现，所以我必须在 Lazarus 项目中声明它超过 1 次。我试过这样：

```
 var dpstate_callCustomfunction: function(plugin, method, paramName: string; customfunctionCallbackFunction: string; id: PChar): integer; stdcall; overload; override;
 var dpstate_callCustomfunction: function(plugin, method, paramName: string; resultParam: PChar): integer; stdcall; reintroduce; overload; 
```

但是编译器告诉我以下错误：“错误：procvar 声明中不允许过程指令“OVERRIDE””“错误：procvar 声明中不允许过程指令“OVERLOAD””

我究竟做错了什么？=/如果我删除它编译的“var”，但我认为我需要“var”还是我错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T16:49:47.270

由于您要声明变量，因此它们必须具有不同的名称。与可以重载同名的函数、过程和方法不同。

因此，通过为两个变​​量选择不同的名称来解决您的问题。

并删除`stdcall`两个变量声明中的所有内容。这些关键字仅适用于过程和方法，不适用于过程变量。

如果要使用 . 显式链接，则必须使用变量`GetProcAddress`。您需要一个变量来保存由`GetProcAddress`. 如果您使用`external`关键字隐式链接，那么您将没有变量。然后你可以声明重载的同名函数。

我必须承认，我很惊讶您为这些变量选择了相同的名称。它们在 C 代码中必须具有不同的名称，并且必须从 DLL 中以不同的名称导出。我希望您不要尝试使用不同的参数列表调用相同的函数。那肯定行不通。

我可以看到您遇到的另一个问题是您的`string`参数不可能与 C 库中使用的参数匹配。你需要使用`PChar`我怀疑。但这确实是另一个问题的主题。

# ruby-on-rails - 如何在 Rails 中的页面内执行操作而不呈现新页面

> ID：14858463
> 
> 赞同：3
> 
> 时间：2013-02-13T16:41:06.420
> 
> 标签：ruby-on-rails

在我的 Rails 应用程序中，我试图添加一个联系人用户弹出框，用于向用户发送电子邮件。

我有适当的 javascript 来显示弹出表单，这本身就是一个部分。

当用户在联系表单上单击提交时，它会调用一个控制器动作来传递邮件。提交消息后，我想留在同一页面上，但隐藏弹出框。我的问题是我无法获得传递邮件而不呈现自己的视图的控制器操作。我试过

```
render nothing: true 
```

但这只会呈现一个空白页面。

我的表格设置如下

```
= form_tag({:controller => 'users', :action => 'contact_user'}, :method => 'put') do 
```

在我的路线配置中，我有

```
resources :users
  collection do
     put 'contact_user'
  end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T16:45:56.950

如果您通过 AJAX 提交表单，您可以做您想做的事情。

添加`:remote => true`到您的表单将完成此操作：

```
= form_tag({:controller => 'users', :action => 'contact_user'}, :method => 'put', :remote => true) do 
```

现在，表单提交将作为 AJAX 请求到达您的控制器。然后，您应该能够按照您的建议不渲染任何内容，甚至可以执行类似 render a 之类的`.js.erb`操作来执行一些 Javascript（例如，隐藏您正在谈论的弹出窗口）。

# php - Eventbrite API PHP，如何对一个事件进行排序和显示？

> ID：14858474
> 
> 赞同：0
> 
> 时间：2013-02-13T16:41:29.670
> 
> 标签：php, api, eventbrite

我正在使用 Eventbrite API 的 php 库从用户那里获取所有事件的列表。默认调用按升序拉取列表：

```
$events = $eb_client->user_list_events(); 
```

1.  按降序获取列表的正确语法是什么？

2.  有没有办法只提取最早的即将发生的事件而不是整个列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:25:58.700

1.  user_list_events 的默认显示为升序，但您可以使用 asc_or_desc 参数对其进行修改。有效选项包括“asc”或以升序或“desc”或基于事件 start_date 的降序的结果。

2.  如果只想显示一个特定事件，可以使用 event_get 方法，该方法使用请求事件的 id 仅显示该事件。

# javascript - 如何触发调整 DIV 大小的 javascript 以尽快工作？

> ID：14858475
> 
> 赞同：1
> 
> 时间：2013-02-13T16:41:31.720
> 
> 标签：javascript

我将使用以下脚本：

```
<script type="text/javascript">
    window.document.onload = function(e){
        var aheight = document.getElementById("a").offsetHeight;
        var bheight = document.getElementById("b").offsetHeight;
        if(aheight > bheight) {
            document.getElementById("b").offsetHeight = aheight;
        }else {
            document.getElementById("a").offsetHeight = bheight;
         }
    }
</script> 
```

HTML：

```
<div>
    <div id="a" class="grid_6" style="background-color: #ff00ff">
        <div class="block-border">
            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
        </div>
    </div>
    <div id="b" class="grid_6" style="background-color: #ffff00">
        <div class="block-border">
            Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.
        </div>
    </div>
</div> 
```

和 CSS：

```
.grid_6 {
    width: 200px;
    display:inline;
    float: left;
    margin-left: 0.99%;
    margin-right: 0.99%;
} 
```

我将使用它来平衡页面上两个 DIV 之间的高度。有人能告诉我哪里是放置这个脚本的最佳位置，以便它尽快工作。window.document.onload 也是最好的触发器吗？我是否可以在加载元素 ID“a”和“b”的 DIV 上触发？我只是想避免用户看到 DIVS 的变化是大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:54:20.997

虽然表中的表中的表中的表中的空单元格用于填充是不好的，但使用与表相关的 CSS 非常好。考虑这个纯 CSS 解决方案：

```
<div id="parent">
    <div class="grid_6">
        <!-- content -->
    </div>
    <div class="grid_6">
        <!-- content -->
    </div>
</div> 
```

CSS：

```
#parent{
  display: table-row
}

.grid_6{
  display: table-cell
  width: 50%;
} 
```

小提琴：http: [//jsfiddle.net/NqXgd/](http://jsfiddle.net/NqXgd/)

请注意，不一定有带有`display: table`;的元素。浏览器会自动插入一个匿名元素。您也可以编写，并在单元格样式的 s 周围插入`#parent{display:table}`匿名。`table-row``div`

请注意，如果您没有设置明确的宽度，浏览器可以自由选择它们（例如，均衡高度）。这可能是有益的，或者您可以明确设置一些宽度来约束布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:43:31.770

如果大小`a`和`b`不依赖于外部资源，那么您不必等待`load`事件，您可以简单地将其放在正文的末尾（或任何可能影响大小的元素的定义之后的任何位置和`a`) `b`:

```
<script type="text/javascript">
var aheight = document.getElementById("a").offsetHeight;
var bheight = document.getElementById("b").offsetHeight;
if(aheight > bheight) {
    document.getElementById("b").style.height = aheight+'px';
}else {
    document.getElementById("a").style.height = bheight+'px';
 }
</script> 
```

[示范](http://jsbin.com/ubusid/5/edit)

请注意，我更改`offsetHeight =`为`style.height =`您无法更改`offsetHeight`元素的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:01:34.787

偏移大小是只读的，要更改脚本中的高度，您需要将元素的**style.height**设置为偏移数 +'px'。

# c - 将两个溢出的整数以三分之一为模相乘

> ID：14858476
> 
> 赞同：5
> 
> 时间：2013-02-13T16:41:32.713
> 
> 标签：c, bit-manipulation

给定三个整数 ,`a`和`b`with`c`我`a,b <= c < INT_MAX`需要计算`(a * b) % c`，但`a * b`如果值太大会溢出，这会给出错误的结果。

有没有办法通过bithacks直接计算这个，即不使用不会溢出有问题的值的类型？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T17:45:46.147

这里并不真正需要 Karatsuba 的算法。只需拆分一次操作数就足够了。

假设为简单起见，您的数字是 64 位无符号整数。设 k=2^32。然后

```
a=a1+k*a2
b=b1+k*b2
(a1+k*a2)*(b1+k*b2) % c = 
   a1*b1 % c + k*a1*b2 % c + k*a2*b1 % c + k*k*a2*b2 % c 
```

现在`a1*b1 % c`可以立即计算，其余的可以通过交替执行32`x <<= 1`或`x %= c`64 次来计算（因为 (u*v)%c=((u%c)*v)%c）。如果`c >= 2^63`. 然而，好消息是这对操作不需要按字面意思执行。要么`x < c/2`然后你只需要一个班次（并且没有溢出），或者`x >= c/2`和

```
2*x % c = 2*x - c = x - (c-x). 
```

（并且没有再次溢出）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-02T19:51:01.863

一些主要的编译器提供 128 位整数类型，您可以使用它进行此计算而不会溢出。

# amazon-web-services - 为什么我在 CloudWatch 中看不到所有 SQS 队列的指标

> ID：14858477
> 
> 赞同：0
> 
> 时间：2013-02-13T16:41:38.870
> 
> 标签：amazon-web-services, amazon-sqs, amazon-cloudwatch

我想针对特定队列的大小设置 CloudWatch 警报，但我只能看到列表中一个队列的指标。如何查看所有队列的指标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:57:07.427

SQS 仅为“活动”的队列生成指标。尝试对队列发出一些请求（例如 ReceiveMessage），然后查看是否开始获取 cloudwatch 指标。

# c - 如何通过函数将指针传递给 c 中未声明的可修改 1/2D 数组并保留它们的值？

> ID：14858480
> 
> 赞同：0
> 
> 时间：2013-02-13T16:41:47.843
> 
> 标签：c, arrays, function, pointers, reference

我正在用 C 语言编写一个函数，该函数需要在执行过程中修改多个变量，特别是最后 3 个参数。函数声明如下所示：

```
void Sample_v2(double cyl_radius, double thetaOx, double binsize, double ** newRx, double * binCenterThetas, double ** binCenters) 
```

我的变量如下：

```
int main() {
    // initialize function outputs
    double ** GPU_binCenters;
    double ** GPU_Rx;
    double * GPU_binCenterThetas;
    // set testing values
    double cyl_rad = 0.3;
    double theta = 1.5708;
    double binsiz = 0.0025;
    int n;

    Sample_v2(cyl_rad, theta, binsiz, GPU_Rx, GPU_binCenterThetas, GPU_binCenters);

    fprintf(stdout,"GPU_binCenters\n");
    for (n = 0; n < 188; n++) {
        fprintf(stdout, "%G\n", GPU_binCenterThetas[n]);
    }
} 
```

我用以下代码给我的数组值：

```
newRx = (double**) calloc((int)ceil(howmany) * 2, sizeof(double*));
for (ii = 0; ii < (int)ceil(howmany) * 2; ii++) {
    newRx[ii] = (double*) calloc(2, sizeof(double));
} 
```

或者

```
binCenterThetas = (double*) calloc((int)ceil(howmany)*2+1, sizeof(double)); 
```

当我尝试在 for 循环中的 fprintf 语句上运行它时，它第一次运行时会出现段错误。使用 gdb 我也无法手动读取值，但我可以看到指针地址。我认为当我传递指针时它正在被复制，但我尝试实现另一个解决方案，传递我需要通过引用修改的变量并且也有问题。代码如下：

```
Sample_v2(cyl_rad, theta, binsiz, &GPU_Rx, &GPU_binCenterThetas, &GPU_binCenters);

    ...........

void Sample_v2(double cyl_radius, double thetaOx, double binsize, double *** newRx, double ** binCenterThetas, double *** binCenters) {

    ...........

*newRx = (double**) malloc((int)ceil(howmany) * 2 * sizeof(double*));
for (ii = 0; ii < (int)ceil(howmany) * 2; ii++) {
    *newRx[ii] = (double*) malloc(2 * sizeof(double));
} 
```

在 for 循环中分配内存时，该代码会出现段错误。关于如何真正让我的数组在没有段错误的情况下传递或初始化的任何帮助。请注意，我没有使用 return 语句，因为我在函数中修改了 3 个数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:58:50.567

你打电话时

```
Sample_v2(cyl_rad, theta, binsiz, GPU_Rx, GPU_binCenterThetas, GPU_binCenters); 
```

接收到的参数`Sample_v2`是 in 指针的副本，对这些指针`main`所做的任何更改`Sample_v2`都不会影响 in 的指针`main`，因此当您进入`fprintf`循环时，`GPU_binCenterThetas`仍然是未初始化的指针，并且访问`GPU_binCenterThetas[n]`是未定义的行为，可能会导致段错误。

处理这个问题的正确方法确实是添加一个间接层并传递这些指针的地址（或者定义一个`struct`包含三个适当类型的指针并返回它；如果只有一个指针要修改，返回指针将是我的首选方式 - 如果返回指针，它们不需要作为参数传递）。

您尝试的问题

```
Sample_v2(cyl_rad, theta, binsiz, &GPU_Rx, &GPU_binCenterThetas, &GPU_binCenters);

    ...........

void Sample_v2(double cyl_radius, double thetaOx, double binsize, double *** newRx, double ** binCenterThetas, double *** binCenters) {

    ...........

*newRx = (double**) malloc((int)ceil(howmany) * 2 * sizeof(double*));
for (ii = 0; ii < (int)ceil(howmany) * 2; ii++) {
    *newRx[ii] = (double*) malloc(2 * sizeof(double));
} 
```

是你弄错了优先级。

```
*newRx[ii] 
```

是

```
*(newRx[ii]) 
```

但`newRx[ii]`只是 . 的有效指针`ii == 0`。你的意思是

```
(*newRx)[ii] 
```

（其他类似）。

# c# - 使用不同的 ActionResult 处理额外的 MVC 参数

> ID：14858482
> 
> 赞同：1
> 
> 时间：2013-02-13T16:41:55.037
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, routing

我正在一个有 4 个独立部分的网站上工作，每个部分都有自己的控制器。这些控制器共享一些模型，但是模型会根据调用它的控制器略有不同。

我想遵循的路线是`{controller}/{model}/{id}/{action}`我可以使用`controller1/cars/5/edit`而不是`controller1/editcar/5`.

有什么方法可以让我的控制器理解模型+动作组合并使用不同的 ActionResults 处理它们，还是我被迫在模型名称上使用 ActionResult 然后使用条件来确定要采取的动作？

在 Ruby 中，我可以使用`get "/controller1/cars/:id/edit" do`. 我只是在 MVC4 中寻找类似的东西。

**示例路线：**

*   `/controller1/cars`
    *   *（返回一个包含来自 controller1 的所有汽车的视图）*
*   `/controller1/cars/5`
    *   *（从 controller1 返回一个包含 ID 为 5 的汽车的视图）*
*   `/controller1/cars/5/edit`
    *   *（返回视图以从控制器 1 编辑 ID 为 5 的汽车）*
*   `/controller2/cars`
    *   *（返回一个包含来自 controller2 的所有汽车的视图）*
*   `/controller2/boats`
    *   *（返回一个包含来自控制器 2 的所有船的视图）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:25:07.610

我认为这条路线可以满足您的需求。它需要您的操作方法中有一些巧妙的逻辑，但应该为您提供处理它的工具。阅读我对行为的描述。

```
 routes.MapRoute(
            "Default", // Route name
            "{controller}/{model}/{id}/{action}", // URL with parameters
            new { controller = "Home", action = "View", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

*   此路由将默认为一个名为 View 的操作（可能用于显示），并且可以选择指向不同的操作。
*   `Model`并将`id`作为参数传递给您的操作方法。不幸的是，模型不会作为类型发送，而是作为字符串发送（您可以将其输入到工厂类中）。
*   如果 if 被忽略（例如`/controller2/boats`），它将作为 null 传递给您的操作。这需要处理逻辑，但为您提供处理它的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T16:53:44.067

感谢您的回复。我在这方面遇到这么多麻烦的原因是因为我无法弄清楚如何正确地将控制器与溃败分开。这导致我的想法脱离了 MVC 标准，几乎试图实现控制器的控制器。

当我最终偶然发现“区域”时，我很快意识到这就是我所需要的。我能够为我网站的每个部分（或区域）添加一个区域，并且在每个区域内，我可以定义单独的控制器和视图，而我的模型保留在所有区域之外的共享目录中。这现在完美无缺。

# android - 如何连接谷歌沙盒结账来测试应用内购买？

> ID：14858486
> 
> 赞同：0
> 
> 时间：2013-02-13T16:42:16.230
> 
> 标签：android, in-app-purchase, sandbox, google-checkout

我想知道是否可以（如果可以）使用 Google Checkout Merchant Sandbox 进行 android 应用内购买进行测试。我知道现在发生的情况是，即使是测试帐户也需要为测试购买付费。我也知道有 4 个购买代码实际上不会向信用卡收费，但它们对于现实世界的测试并没有真正有用。所以剩下的唯一选择就是如果可能的话，以某种方式使用商家沙箱。

所以我再次问是否可以使用谷歌沙盒帐户来测试应用内购买，如果可以，使用谷歌自己的 api 系统如何工作。

# php - SQL 按日期排序 (DM)

> ID：14858491
> 
> 赞同：1
> 
> 时间：2013-02-13T12:32:55.180
> 
> 标签：php, date, mysql

我的数据库中有一个文本字段，其中包含 DM 日期值。这一年是一个新的领域。所以按年订购 ASC 并不难。现在我也想按日期排序。唯一的问题是，ORDER BY year ASC，ORDER BY date 不起作用。我认为是因为文本字段。是否仍然可以按年、月、日 ASC 对它们进行排序？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:48:25.577

使用[SUBSTRING_INDEX()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)：

```
... ORDER BY year ASC, SUBSTRING_INDEX(date, '-', -1) ASC, SUBSTRING_INDEX(date, '-', 1) ASC 
```

*   `SUBSTRING(date, '-', -1)``-`（月）之后会给你一切。
*   `SUBSTRING(date, '-', 1)``-`会在（那天）之前给你一切。

# java - 生成没有默认构造函数的类的子类

> ID：14858493
> 
> 赞同：2
> 
> 时间：2013-02-13T16:42:24.127
> 
> 标签：java, java-bytecode-asm, cglib

我需要使用 cglib 为没有默认构造函数的类生成子类。我有以下代码适用于具有默认构造函数的类：

```
 Enhancer enhancer = new Enhancer();
    enhancer.setCallbackType(NoOp.class);
    enhancer.setUseCache(false);

    enhancer.setSuperclass(clazz);
    return enhancer.createClass(); 
```

新类应该有默认构造函数，需要从其超类调用一些非默认构造函数。

搜索了一下，发现cglib不能做这样的事情，需要使用asm。但是我找不到将默认构造函数添加到类的示例。

如果有人有一个如何实现它的例子，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T00:19:39.053

我解决了这个问题。它看起来和我之前想象的有点不同。Cglib 继承了所有构造函数，而不仅仅是我之前认为的默认构造函数。

但是，我似乎无法在不影响现有 cglib 构造函数构造代码的情况下替换构造函数。这是次要的含义，所以我只是从构造函数注入转移到方法注入。我在构造函数返回之前添加我的方法调用。这有效！我很高兴。

这就是我得到的：

cglib 增强器调用

```
Enhancer enhancer = new Enhancer();
        enhancer.setNamingPolicy(new IndexedNamingPolicy());
        enhancer.setCallbackType(NoOp.class);
        enhancer.setUseCache(false);
        enhancer.setStrategy(new DefaultGeneratorStrategy() {
            @Override
            protected ClassGenerator transform(ClassGenerator cg) throws Exception {
                return new TransformingClassGenerator(cg, new DefaultConstructorEmitter(key));
            }
        });

        enhancer.setSuperclass(clazz);
        return enhancer.createClass(); 
```

和我的 DefaultConstructorEmitter （嗯，它仍然以构造函数处理命名，没关系）

```
private class DefaultConstructorEmitter extends ClassEmitterTransformer {
        private final Signature CALL_SIGNATURE = TypeUtils.parseSignature("void someMethod(Object)");

        private String parametersKey;

        public DefaultConstructorEmitter(final String key) {
            parametersKey = key;
        }

        @Override
        public CodeEmitter begin_method(int access, Signature sig, Type[] exceptions) {
            final CodeEmitter emitter = super.begin_method(access, sig, exceptions);
            if (sig.getName().equals(Constants.CONSTRUCTOR_NAME)) {
                return new CodeEmitter(emitter) {
                    @Override
                    public void visitInsn(int arg0) {
                        if (arg0 == Opcodes.RETURN) {
                            Type classType = ...   
                            emitter.load_this();
                            emitter.push(parametersKey);
                            emitter.invoke_static(classType, CALL_SIGNATURE);
                        }
                        super.visitInsn(arg0);
                    }
                };
            }

            return emitter;
        }
    } 
```

希望这个例子能帮助人们不要像我一样花费几个小时。

# php - 在摘要页面上显示用户输入

> ID：14858495
> 
> 赞同：1
> 
> 时间：2013-02-13T16:42:29.257
> 
> 标签：php, jquery

我在产品旁边有几个数量框，因此用户可以输入他们想要的某种产品的数量。

设置使用使用 Jquery 的逐步过程，第一步由复选框组成，第二步由数量输入组成（我需要帮助！），最后一步显示已选择的内容......全部提交通过电子邮件发送给我。

带有复选框的第 1 步已完成（在 @Beetroot-Beetroot 的大量帮助下 -[带有选择摘要的逐步复选框过程](https://stackoverflow.com/questions/14727451/step-by-step-checkbox-process-with-summary-of-selections)）。第 2 步是我需要帮助的地方，如何在摘要页面上显示用户数量输入？

这是HTML：

```
<form id="customisesystem" method="post" action="">
  <div id="first-step">
    <div class="steps">
      <p><b>Step 1 of 3</b></p>
    </div>
    <div class="progress-buttons"></div>
    <div class="clear"></div>
    <div id="customise-area">
      <div id="customise-title">
        <p><b>1\. Hardware &amp; software options</b> <span>Please choose one or more of the following</span></p>
      </div>
      <div id="customise-area">
        <?php $posts = get_field('options');
                                if( $posts ):
                                $items = 0;
                                foreach( $posts as $post): // variable must be called $post (IMPORTANT)
                                    setup_postdata($post); ?>
        <div class="custom-option">
          <p><b>
            <?php the_title(); ?>
            </b></p>
          <br />
          <div> <?php echo the_content(); ?> </div>
          <?php $counter = 1; while(the_repeater_field('images')): ?>
          <?php if($counter <= 1) { ?>
          <img width="180" height="136" src="<?php the_sub_field('image'); ?>" alt="<?php the_title(); ?>" />
          <?php } ?>
          <?php $counter++; endwhile; ?>
          <p>
            <input type="checkbox" name="hardware[]" value="<?php the_title(); ?>">
            Select</p>
          <div class="clear"></div>
        </div>
        <?php $items++; endforeach;
                                wp_reset_postdata(); // IMPORTANT - reset the $post object so the rest of the page works correctly
                                endif; ?>
      </div>
    </div>
  </div>
  <!-- end first-step -->

  <div id="second-step">
    <div class="steps">
      <p><b>Step 2 of 3</b></p>
    </div>
    <div class="progress-buttons"></div>
    <div class="clear"></div>
    <div id="customise-area">
      <div id="customise-title">
        <p><b>2\. Accessories</b> <span>Please choose one or more of the following</span></p>
      </div>
      <div id="customise-area">
        <?php $posts = get_field('accessories');
                                if( $posts ):
                                $items = 0;
                                foreach( $posts as $post): // variable must be called $post (IMPORTANT)
                                    setup_postdata($post); ?>
        <?php if ($items&1) { ?>
        <div class="custom-option">
          <p><b>
            <?php the_title(); ?>
            </b></p>
          <br />
          <div> <?php echo the_content(); ?> </div>
          <?php $counter = 1; while(the_repeater_field('images')): ?>
          <?php if($counter <= 1) { ?>
          <img width="180" height="136" src="<?php the_sub_field('image'); ?>" alt="<?php the_title(); ?>" />
          <?php } ?>
          <?php $counter++; endwhile; ?>
          <p style="clear:right;float:right;width:180px;">
            <?php if(get_field('sizes')) { ?>
            <?php while(the_repeater_field('sizes')) { ?>
            <input type="text" name="quantity[]" style="width:15px;" value="0">
            <?php echo the_sub_field('size'); ?><br />
            <input type="hidden" name="product[]" value="<?php echo the_title(); ?> - <?php echo the_sub_field('size'); ?>">
            <?php } ?>
            <?php } else { ?>
            <input type="text" name="quantity[]" style="width:15px;" value="">
            <?php echo the_sub_field('size'); ?><br />
            <input type="hidden" name="product[]" value="<?php echo the_title(); ?>">
            <?php } ?>
          </p>
          <div class="clear"></div>
        </div>
        <?php } else { ?>
        <div class="custom-option">
          <p><b>
            <?php the_title(); ?>
            </b></p>
          <br />
          <div> <?php echo the_content(); ?> </div>
          <?php $counter = 1; while(the_repeater_field('images')): ?>
          <?php if($counter <= 1) { ?>
          <img width="180" height="136" src="<?php the_sub_field('image'); ?>" alt="<?php the_title(); ?>" />
          <?php } ?>
          <?php $counter++; endwhile; ?>
          <p style="clear:right;float:right;width:180px;">
            <?php if(get_field('sizes')) { ?>
            <?php while(the_repeater_field('sizes')) { ?>
            <input type="text" name="quantity[]" style="width:15px;" value="0">
            <?php echo the_sub_field('size'); ?><br />
            <input type="hidden" name="product[]" value="<?php echo the_title(); ?> - <?php echo the_sub_field('size'); ?>">
            <?php } ?>
            <?php } else { ?>
            <input type="text" name="quantity[]" style="width:15px;" value="">
            <?php echo the_sub_field('size'); ?><br />
            <input type="hidden" name="product[]" value="<?php echo the_title(); ?>">
            <?php } ?>
          </p>
          <div class="clear"></div>
        </div>
        <?php } ?>
        <?php $items++; endforeach;
                                wp_reset_postdata(); // IMPORTANT - reset the $post object so the rest of the page works correctly
                                endif; ?>
      </div>
    </div>
  </div>
  <!-- end second-step -->

  <div id="third-step">
    <div class="steps">
      <p><b>Step 3 of 3</b></p>
    </div>
    <div class="progress-buttons"></div>
    <div class="clear"></div>
    <div id="customise-area-3">
      <p>Summary</p>
      <div id="customise-area-3-child">
        <input type="submit" name="submit" id="submit" value="submit" />
      </div>
    </div>
  </div>
  <!-- end third-step -->

</form> 
```

这是Jquery：

```
jQuery(document).ready(function( $ ) {
    //Create nav wrapper
    var $nav = $('<div/>').addClass('prev-next');

    //Create Prev button, attach click handler and append to nav wrapper
    $('<a class="prev" href="#">Back</a>').on('click', function () {
        $(this).closest(".step").hide().prev(".step").show();
    }).prependTo($nav);

    //Create Next button, attach click handler and append to nav wrapper
    $('<a class="next" href="#">Next</a>').on('click', function () {
        $('.summary_text').html(makeSummary());
        var $step = $(this).closest(".step");
        if (validate($step)) {
            $step.hide().next(".step").show();
        }
    }).appendTo($nav);

    //In one long jQuery chain ...
    //* prepend nav to each step div
    //* hide all steps except the first
    //* convert first 'Back' link and last 'Next' link to spans.
    var $steps = $(".step").prepend($nav).hide()
        .filter(":first").show().find("a.prev").after('<a href="#" class="back-to-product">Back</a>').remove().end().end()
        .filter(":last").find("a.next").after('').remove().end().end();

    //Set step titles
    $steps.each(function (i, step) {
        $(step).find(".step-title").text('Step ' + (i + 1) + ' of ' + $steps.length);
    });

    $('a.back-to-product').click(function(){
        $(".customise").hide();
        $(".entire_product").show();
    });

    //Unfortunately, hidden form elements are not inlcuded in the submission,
    //so all steps must be shown before the form is submitted.
    var $submitButton = $("input[name='submit']").on('submit', function () {
        $steps.show();
        return true;
    });

    function validate($step) {
        //var valid = false;
        var valid = true; //for debugging

        //Perform validation
        switch ($step.index(".step")) { //index-origin is zero
            case 0:
                //Validate step 1 here
                //if valid, set `valid` to true 
                break;
            case 1:
                //Validate step 2 here
                //if valid, set `valid` to true 
                break;
            case 2:
                //No validatation required
                break;
        }
        return valid; //Important - determines behaviour after validate() returns.
    }

    function makeSummary() {
        var summary = [];
        $steps.not(":last").each(function (i, step) {
            $step = $(step);
            summary.push('<p><b>' + $step.data('name') + '</b></p>');
            var $ch = $step.find('input[type="checkbox"]:checked');
            if (!$ch.length) {
                summary.push('<p>No items selected</p><br />');
            } else {
                $ch.each(function (i, ch) {
                    summary.push('<p>' + $(ch).val() + '</p><br />');
                });
            }
        });
        return summary.join('');
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T06:06:17.037

首先，通过硬编码和在 HTML中使`quantity[]`和字段更容易选择。`product[]``class="quantity"``class="product"`

```
<input type="text" name="quantity[]" class="quantity" style="width:15px;" value="0">25 cm²<br />
<input type="hidden" name="product[]" class="product" value="Equipment Electrode Set - 25 cm²"> 
```

这是javascript：

```
function makeSummary() {
    var summary = [];
    $steps.not(":last").each(function (i, step) {
        $step = $(step);
        summary.push('<p><b>' + $step.data('name') + '</b></p>');
        var $ch = $('input[type="checkbox"]:checked', $step);
        var $qty = $('input.quantity', $step).filter(function() {
            return this.value !== '0';
        });
        var $selected = $ch.add($qty);//jQuery collection of checkeboxes, or quantity fields, or a mixture of both.
        if (!$selected.length) {
            summary.push('<p>No items selected</p><br />');
        } else {
            $selected.each(function (i, s) {
                var $s = $(s);
                var prefix = ($s.hasClass('quantity')) ? ($s.nextAll("input.product").val() + ' : ') : '';
                summary.push('<p>' + prefix + $s.val() + '</p><br />');
            });
        }
    });
    return summary.join('');
} 
```

通过这种方式，该功能在步骤数量以及每个步骤的组成方面保持通用；它将处理完全专业的“复选框步骤”和“数量步骤”，以及（如果您有需要）*混合*的“复选框/数量步骤”。在每种情况下，所选项目都将按照其原始 DOM 顺序进行汇总。

**[演示](http://jsfiddle.net/za3Nk/8/)**

# objective-c - 具有 web 服务目标 c 的葡萄牙语字符

> ID：14858496
> 
> 赞同：1
> 
> 时间：2013-02-13T16:42:32.990
> 
> 标签：objective-c, web-services

我正在调用网络服务并接收带有葡萄牙语字符的数据

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

[请求 addValue:@"application/json; charset=ISO-8859-1" forHTTPHeaderField:@"Content-Type"]; NSDictionary *allDataDictionary = [NSJSONSerialization JSONObjectWithData:webData 选项:NSISOLatin1StringEncoding0 错误:nil];

甚至将 iso-8859-1 添加到标题中，但总是收到这样的字典：

```
 {
    name = "Lu\U00eds Brito";  
    user = lbrito;
    userId = 16;
},
    {
    name = "Nelson Azevedo";
    user = nazevedo;
    userId = 17;
},
    {
    name = "M\U00f3nica Morais";
    user = mmorais;
    userId = 19;
}, 
```

试图输入 NSISOLatin1StringEncoding 选项，但没有做任何人知道解决方案的事情，四处搜索没有找到太多帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:51:59.940

JSON 被定义为始终以 UTF-8 编码（它也可以使用 UTF-16 和 UTF-32，但不能使用 ISO 8859-1）

# mysql - MySQL 中的 SQL 子查询

> ID：14858497
> 
> 赞同：0
> 
> 时间：2013-02-13T16:42:33.603
> 
> 标签：mysql, sql, wordpress

我有一个 sql 查询，但需要来自数据库的显式数据。

我已经上演了每个查询以获取我需要的数据。

```
SELECT wp_posts.id, 
       wp_posts.post_title, 
       wp_postmeta.meta_key, 
       wp_postmeta.meta_value 
FROM   wp_postmeta 
       LEFT JOIN wp_posts 
              ON wp_postmeta.post_id = wp_posts.id 
WHERE  wp_posts.post_type = 'bolton' 
       AND wp_postmeta.meta_key IN ( 'address', 'age', 'cricket_club', 
                                     'training_times', 
                                     'location', 'player_type', 'coach' ) 
```

使用此语句，它将地址、年龄、cricket_club 的每一行一起返回。

我需要它来获取地址行的值，而不是列出所有这些的 meta_value 行。

任何建议表示赞赏。

更进一步。

我涉足了一些代码：

```
SELECT post_id
FROM wp_postmeta
WHERE post_id = (
SELECT max( post_id )
FROM wp_postmeta ) 
```

但是我想得到这样的东西。

```
SELECT address
FROM meta_value
WHERE wp_post_meta.meta_key = address 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T05:54:01.643

我怀疑您想*取消透视*数据，即将不同的数据放入不同的列。（我还怀疑有两次，当您在问题中说*row*时，您实际上是指*column*，但这可能只是我。）

如果 unpivot 确实是您所追求的，那么您可以尝试以下方法：

```
SELECT
  p.id,
  p.post_title,
  MAX(CASE pm.meta_key WHEN 'address'        THEN pm.meta_value END) AS address,
  MAX(CASE pm.meta_key WHEN 'age'            THEN pm.meta_value END) AS age,
  MAX(CASE pm.meta_key WHEN 'cricket_club'   THEN pm.meta_value END) AS cricket_club,
  MAX(CASE pm.meta_key WHEN 'training_times' THEN pm.meta_value END) AS training_times,
  MAX(CASE pm.meta_key WHEN 'location'       THEN pm.meta_value END) AS location,
  MAX(CASE pm.meta_key WHEN 'player_type'    THEN pm.meta_value END) AS player_type,
  MAX(CASE pm.meta_key WHEN 'coach'          THEN pm.meta_value END) AS coach
FROM wp_postmeta pm
INNER JOIN wp_posts p ON pm.post_id = p.id
WHERE p.post_type = 'bolton'
  AND pm.meta_key IN ( 'address', 'age', 'cricket_club', 
                       'training_times', 
                       'location', 'player_type', 'coach' ) 
GROUP BY
  p.id,
  p.post_title
; 
```

几点注意事项：

1.  我用 INNER JOIN 替换了您的 LEFT JOIN，因为`wp_posts.type = 'bolton'`WHERE 子句中的条件具有基本相同的效果。如果你真的想要一个左连接，那么也许你需要将条件移动到 ON 子句，如下所示：

    ```
    ...
    FROM wp_postmeta pm
    INNER JOIN wp_posts p ON pm.post_id = p.id
                         AND p.post_type = 'bolton'
    WHERE pm.meta_key IN ( ...
    ... 
    ```

    但我不确定，你应该自己看看。

2.  另一个 WHERE 条件`wp_postmeta.meta_key IN ( ... )`在此查询中不是必需的，因为尽管查询将读取所有元键，但它只会返回那些在 SELECT 子句中定义的列。

    保留条件可能会使查询更有效，但扩展列列表会稍微不方便（以防您需要扩展它）：您必须同时扩展条件和 SELECT 子句。

    因此，就性能而言，离开该条件可能是有益的，而在维护方面将其移除可能会更好。当表中的行数不多时，性能上的差异应该可以忽略不计，但是您的情况是否会如此，您需要通过测试来确定。但是，一般的方法可能是首先采用更简单的解决方案，并仅在出现问题时进行优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:45:15.837

你能不只是改变

```
wp_postmeta.meta_key IN ('address','age',... 
```

到

```
wp_postmeta.meta_key = 'address'; 
```

# c# - 如何阻止 XSD 设计器在 XSD 代码隐藏中为表添加数据库名称前缀

> ID：14858507
> 
> 赞同：0
> 
> 时间：2013-02-13T16:43:01.307
> 
> 标签：c#, asp.net, vb.net, xsd

在 ASP.NET 应用程序中，我们有一个 XSD 文件和一个 web.config 文件。

在配置文件中，我们有这样指定的连接字符串：

```
<add name="DbConnectionString" connectionString="Data Source=sqldb;Initial Catalog=TestDB;Persist Security Info=True;User ID=user;Password=password;" providerName="System.Data.SqlClient"/> 
```

在 XSD 代码隐藏中，每个表适配器选择命令都有以下行（自动生成）：

```
<DbSource ConnectionRef="DbConnectionString (Web.config)" DbObjectName="dbo.CUSTOMER" ... 
```

但是，如果我在设计器中打开表适配器查询并修改 SQL，则后面代码中的行将更改为：

```
<DbSource ConnectionRef="DbConnectionString (Web.config)" DbObjectName="TestDb.dbo.CUSTOMER" ... 
```

它在 DbObjectName 中指定的表名的开头添加了“TestDb”。

显然，当我们将此网站发布到实时系统时这是错误的，因为即使我们在 web.config 中将连接字符串更改为“LiveDb”，它也会尝试从 TestDB 获取数据。

有没有人遇到过这种行为，有没有办法阻止 XSD 设计器停止为表添加数据库名称的前缀？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:22:48.317

当您将来自不同数据库的表添加到数据集时，就会发生这种情况。在向数据集添加表或查询时，不要获取不同的数据库或连接字符串。请检查您添加到数据集中的所有表。然后重新创建与当前数据集有相同问题的表。添加数据集表时不要更改连接名称。使用 Web 配置中指定的相同连接字符串。

谢谢

# c++ - 在 GCC 中编写 SIGSEGV 而不是 Clang

> ID：14858509
> 
> 赞同：1
> 
> 时间：2013-02-13T16:43:10.687
> 
> 标签：c++, gcc, c++11, clang, segmentation-fault

当使用 GCC (4.7.2-5ubuntu) 而不是 Clang (Apple LLVM 4.2) 编译时，此代码会在运行时生成 SIGSEGV

```
#include <functional>
#include <iostream>

using FuncType = std::function<int(int)>;

int func(FuncType f, int i) {
    return f(i)+1;
}

struct Alpha {
    FuncType f, g;
    Alpha(FuncType f) : f(f) {
        g = [&](int i) -> int {
            return func(f, i);
        };
    }
    int go(int i) {
        return g(i);
    }
};

struct Beta {
    int k = 0;
    Beta newBeta(int nk) {
        Beta beta = *this;
        beta.k = nk;
        return beta;
    }
};

struct Gamma {
    Beta beta;
    void go(int j) {
        auto f = [&](int i) -> int {
            int n = beta.newBeta(i).k+j;
            return n*n;
        };
        Alpha alpha(f);
        std::cout << alpha.go(beta.k) << std::endl;
    }
};

int main(int argc, char *argv[]) {
    Gamma gamma;
    gamma.go(7);
    return 0;
} 
```

`f`调试中，在调用lambda 时会发生崩溃`func`。`beta`报告为无效对象，即使在调用 lambda 时它应该仍然有效。

看起来这是[这个错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=53137)的结果，但据报道该错误已在 4.7.2 中修复。

**编辑：**为清楚起见进行了初始化`Beta::k`，不影响错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:25:12.587

这里有一个问题：

```
Alpha(FuncType f) : f(f) {
    g = [&](int i) -> int {
        return func(f, i);
    };
} 
```

您的 lambda 通过引用绑定`f`（构造函数的参数，因此构造函数的本地参数），因此在构造函数完成后，该引用悬空。当您稍后调用 时`g`，您会得到未定义的行为，因为它引用了这个悬空引用。

将 to更改为`[&]`按`[=]`值绑定，应该没问题。

# jquery - 试图附加/前置多个段落？

> ID：14858510
> 
> 赞同：0
> 
> 时间：2013-02-13T16:43:12.053
> 
> 标签：jquery

我在附加或附加文本时遇到问题，在段落之间自动放置换行符。例如：

```
<script>
    $(document).ready(function () {
        $('#somelink').click(function () {
            $('#somediv').append("<p>Here's my first paragraph blah blah blah</p>
    <p>Here's my second paragraph blah blah blah blah</p>
    <p>Oh here's a third paragraph blah blah</p>");
        });
    });
</script> 
```

由于段落之间的换行，似乎不起作用。我发现如果`<p>`标签彼此相邻，那很好，例如：

```
<p>first paragraph</p><p>second paragraph</p> 
```

而不是：

```
<p>first paragraph</p>
<p>second paragraph</p> 
```

希望这是有道理的。问题是这些附加放置的文本是用户生成的。如果我正在更新文本内容，那很好，因为我知道要消除我输入的文本的换行符。但是，如果我的客户最终接管更新并使用 CMS 的内置文本编辑器说添加新段落，它将自动创建换行符并中断脚本。基本上，文本编辑器会自动格式化文本，就像上面不工作的例子一样。

有什么方法可以让函数删除这些换行符并让`<p>`标签彼此相邻运行？或者有没有一种方法可以保留带有标签的文本，不会破坏脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:11:14.197

好的，对不起，如果我对这个答案不满意。

但是正如您所说的内容是由 cms 插入的，我正在考虑类似于文本区域的东西，用户在其中输入文本，单击链接，输入的内容应该显示在其他地方。这让我相信您需要一个动态脚本，而不是您使用示例代码编写的静态脚本。

动态脚本将从 textarea 获取内容并使用它，而不是在脚本中定义内容。

因此，也许您正在寻找更像这样的东西。您可以简单地复制粘贴到新文档中进行尝试。

如果您想在每次单击更新按钮时替换 contentholder 中的内容。你应该使用

```
$("#contentholder").html(inputData) 
```

代替

```
$("#contentholder").append(inputData) 
```

注意：如果你使用 .html() 函数

```
&lt;p&gt; 
```

将被看起来像`<p>`-tag 的文本替换，因此您可能需要先清理输入，具体取决于您要实现的目标。

```
<html>
<head>
    <title></title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type='text/javascript'>

        $(document).ready(function(){

            $("#update").on('click', function(){
                //take content from textare
                var inputData = $("#input").val();
                $("#contentholder").append(inputData);
            });

        })

    </script>
</head>
<body>
<!-- say this is the so called text editor -->
<textarea id='input' cols='50' rows='5'>
    &lt;p&gt;This is some sample text&lt;p&gt;

    &lt;p&gt;followed by some other text that was split by a linebreak and each text was wrapped in a p-element
</textarea>
<!-- submit the texteditor text -->
<button id='update'>click me to update</button>

<!-- put the text in a new something -->
<div id='contentholder'>
</div>
</body>
</html> 
```

希望这会有所帮助，必须去，没有时间重读，对任何错误深表歉意，但如果我理解你想要做什么，实际的脚本应该可以帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:48:49.637

Javascript 不支持您尝试的多行字符串。您必须使用`+`运算符或将所有文本行放入数组中，如下所示：

```
$('#somediv').append(
  [
    "<p>Here's my first paragraph blah blah blah</p>",
    "<p>Here's my second paragraph blah blah blah blah</p>",
    "<p>Oh here's a third paragraph blah blah</p>"
  ].join('')
); 
```

或与`+`运营商：

```
$('#somediv').append(
    "<p>Here's my first paragraph blah blah blah</p>" +
    "<p>Here's my second paragraph blah blah blah blah</p>" +
    "<p>Oh here's a third paragraph blah blah</p>"
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:51:56.040

尝试这个...

```
<script>
    $(document).ready(function () {
        $('#somelink').click(function () {
            $('#somediv').append("<p>Here's my first paragraph blah blah blah</p>\
                <p>Here's my second paragraph blah blah blah blah</p>\
                <p>Oh here's a third paragraph blah blah</p>");
        });
    });
</script> 
```

您可以通过使用 \ 转义换行符来继续下一行的字符串

# structure - Tesseract OCR：是否可以强制使用特定模式？

> ID：14858514
> 
> 赞同：5
> 
> 时间：2013-02-13T16:43:23.520
> 
> 标签：structure, ocr, design-patterns, tesseract

我正在使用 Tesseract，我想开发一个能够识别一系列字符的应用程序。我取得了不错的成绩，但并不出色。

我想阅读的字符序列**总是**有一个特定的模式，比如说：

**number number number number char char - (eg: 123AB)**

有没有办法“告诉” ocr 引擎结构始终是固定的，以提高识别结果？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-20T00:33:27.863

在 Tesseract 中尝试[集市匹配模式：](https://github.com/tesseract-ocr/tesseract/blob/master/tessdata/configs/bazaar)

```
\d\d\d\c\c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T15:01:19.967

您可以使用“tessedit_char_whitelist”参数

# three.js - 使用 Three.js 绘制图形的最佳方式

> ID：14858518
> 
> 赞同：23
> 
> 时间：2013-02-13T16:43:36.007
> 
> 标签：three.js

我想用 Three.js 画图，想知道什么是最好的方法。

这个框架在这里[https://github.com/davidpiegza/Graph-Visualization](https://github.com/davidpiegza/Graph-Visualization)解决了它使用球体作为节点和线作为边缘。

我需要在边缘添加标签，或者可以选择边缘。

还有什么其他的方法来绘制图表？有人有想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-17T19:18:16.560

您应该查看 MathBox [http://acko.net/blog/making-mathbox/](http://acko.net/blog/making-mathbox/)（它基于 three.js 和作者的着色器库 ShaderGraph.js）。MathBox 将他的库用于他博客上的许多交互式 3d 数学示例。[http://acko.net/blog/](http://acko.net/blog/)

# cuda - CudaDeviceSynchronize() 进入 for 循环错误 6

> ID：14858521
> 
> 赞同：0
> 
> 时间：2013-02-13T16:43:44.623
> 
> 标签：cuda, gpu, gpgpu

编辑：

我已经向 Cuda 申请了一个图像描述符......我将它测试到一个图像并且一切顺利......之后我想尝试它来测试许多图像（即 10000）以测试串行之间的时间差并平行。所以我把我的代码放到一个 for 循环中（不是分配和内存释放）。问题发生在这里......当我尝试这样做时，似乎应用程序和更具体的函数 cudaDeviceSynchronize() 崩溃并出现错误代码 6。现在，我进行了搜索，我发现一方面这个错误可能是因为在 cudaDeviceSynchronize() 之前调用的内核是异步的，事实是通常只有一个特定的 cudaDeviceSynchronize() 函数在特定内核之后调用崩溃。一到两次崩溃，下一个内核又在另一个内核之后。

另一方面，我发现了一些关于看门狗定时器的信息......当我用 Nsight 禁用它并再次运行我的程序时，电脑完全冻结了。所以我想由于某种原因，一些线程或所有线程都没有结束它们的操作，所以 cudaDeviceSynchronize() 不允许程序继续，并且在 2 秒（默认）后看门狗计时器停止应用程序。关于为什么内核滞后的任何想法？可能是因为我的设备？我正在使用具有 Capability 1.1、Cuda 版本 4.2、Windows 7 和 Visual Studio 2010 的 GeForce G 103M。

非常感谢！

# html - 使用 Django 进行菜单导航

> ID：14858522
> 
> 赞同：1
> 
> 时间：2013-02-13T16:43:58.493
> 
> 标签：html, django

我有这样的看法：

```
def about(request):
    return render(request, 'about.html', {'page_about_exist':1,}) 
```

在 html 我有这个代码：

```
<li {% if page_about_exist %} class="active" {% endif %}><a href="{% url about_project %}"> About</a></li> 
```

所以，如果我去关于页面，在菜单中它有类活动，我可以直观地看到它。没有字典还有其他方法吗？因为我在 url

```
url(r'^accounts/login/$', 'django.contrib.auth.views.login', name='login',), 
```

我用字典的方式在那里看起来不太好。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:49:24.603

你应该用模板继承来做这种事情。例如，您`base.html`可能包含一个导航列表，其中包含：

```
<li{% block products %}{% endblock %}><a href...>Products</a></li>
<li{% block about %}{% endblock %}><a href...>About</a></li> 
```

然后在你的`about`模板中（假设它继承自`base`）你有：

```
{% block about %} class="active"{% endblock %} 
```

这将使用您为活动页面定义的类呈现为纯 html。因为它使用简单的模板继承，所以您也可以通过它获得非常好的控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:55:29.770

我使用我自己的名为`ifnav`.

*   [http://pypi.python.org/pypi/django-ifnav-templatetag](http://pypi.python.org/pypi/django-ifnav-templatetag)
*   [https://bitbucket.org/bikeshedder/django-ifnav-templatetag](https://bitbucket.org/bikeshedder/django-ifnav-templatetag)

用法很简单。只需将其添加到您的`INSTALLED_APPS`并确保请求上下文处理器已激活。

之后你可以这样写：

```
<li {% ifnav "^/about/" %} class="active" {% endifnav %}><a href="{% url about_project %}"> About</a></li> 
```

对于当前项目，我使用负责渲染导航的 Django CMS。

# maven - 我可以教 Maven 解析 ivy.xml 并从那里获取依赖项吗？

> ID：14858527
> 
> 赞同：4
> 
> 时间：2013-02-13T16:44:09.093
> 
> 标签：maven, ivy

想象一下以下问题 - 一个具有 ivy 依赖项的项目，通过 maven repos 解决。

现在我想要一个 pom.xml，但我不想转换所有这些 ivy 依赖项（实际上并不重要——无论是手动还是自动，使用类似 ivy:makepom 之类的东西）。

所以，我基本上想要这样的东西：

```
 <dependencies>
     <some-kind-of-ivy-dependency-resolver/>
 </dependencies> 
```

它将解析 ivy.xml 获取依赖项并将它们放入常规的 Maven 缓存存储库。

一个会帮助我提示的人将是一个非常非常好的人）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T12:57:39.803

我的建议是为新建项目推荐 Maven。如果项目已经在使用 ivy，请鼓励他们，因为这使团队能够通过您共享的 Maven 存储库进行协作。以下答案概述了我的推理和逻辑：

*   [使用源代码签入依赖 jar 时使用 Maven 是否仍然有意义？](https://stackoverflow.com/questions/11438980/does-it-still-make-sense-to-use-maven-when-dependent-jars-are-checked-in-with-so/11440495#11440495)

# asp.net-mvc - 当我创建晚餐时，MVC 4 版本的 NerdDinner 存在绑定问题

> ID：14858531
> 
> 赞同：0
> 
> 时间：2013-02-13T16:44:15.333
> 
> 标签：asp.net-mvc, binding, asp.net-mvc-4, nerddinner

如果你去

[http://nerddinner.codeplex.com/SourceControl/changeset/view/b1a032d1532b](http://nerddinner.codeplex.com/SourceControl/changeset/view/b1a032d1532b)

获取 MVC4 版本。运行。举办晚宴。单击创建我总是收到此错误（屏幕截图）

这是我想用来帮助我学习的主要参考应用程序之一，所以如果有人知道我缺少什么，请告诉我

我不知道屏幕截图是否有效，但错误是：

LatLongStr 上这段代码中的 IndexOutOfRangeException

```
public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var valueProviderResult = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        if (valueProviderResult != null)
        {
            string[] latLongStr = valueProviderResult.AttemptedValue.Split(',');

            string point = string.Format("POINT ({0} {1})", latLongStr[1], latLongStr[0]);
            //4326 format puts LONGITUDE first then LATITUDE
            DbGeography result = DbGeography.FromText(point, 4326);
            return result;
        }
        return null;
    } 
```

![碎石](../Images/84a43f4be9f2dce92b223b182520a043.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:22:46.207

这可能是因为您输入的值是没有**,**字符的 LatLongString

这个命令

```
string[] latLongStr = valueProviderResult.AttemptedValue.Split(','); 
```

如果有 , 符号，则拆分给定的字符串以创建 lat long。

后面有两个值的引用

```
... latLongStr[1], latLongStr[0]); 
```

但是，如果输入的值不包含 a ，则 latLongStr 只有 1 项，因此 latLongStr[1] 超出范围。

您可以通过确保输入有效的 LatLong 来防止这种情况。

# android - 如何在 Android 中播放单词？

> ID：14858535
> 
> 赞同：-5
> 
> 时间：2013-02-13T16:44:24.137
> 
> 标签：android, text-to-speech

我目前正在开发一个能够读取我在 txt 文件中给出的文本（即文本应该播放为声音）的应用程序。安卓有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:47:25.010

在 android 中有一个用于 TextToSpeech（简称 TTS）功能的专用**API 。**您可以轻松地使用它来播放文件中的文本或即时播放。

这是文档页面：[TextToSpeech](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html)

还可以查看本教程以获取示例：[TTS 教程](http://mobile.tutsplus.com/tutorials/android/android-sdk-using-the-text-to-speech-engine/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:47:07.363

是的，只需使用内置的[文本转语音 (TTS) 包](http://developer.android.com/reference/android/speech/tts/package-summary.html)（更多详细信息请[点击此处](http://android-developers.blogspot.co.uk/2009/09/introduction-to-text-to-speech-in.html)）。

# asp.net-mvc - 如何在不引入依赖关系的情况下使用 Onion Architecture 实现 UnitOfWork？

> ID：14858536
> 
> 赞同：3
> 
> 时间：2013-02-13T16:44:25.693
> 
> 标签：asp.net-mvc, unit-of-work, onion-architecture

我正在设置一个 asp.Net Mvc 4 应用程序并希望使用[洋葱架构](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)模式对其进行配置。过去我使用过这样的工作单元模式

```
public class UnitOfWork : IUnitOfWork, IDisposable
{

private IRepository<CallModel> _callRepo;
private IRepository<UserModel> _userRepo;

    public IRepository<CallModel> CallRepo
    {
        get
        {
            if (_callRepo == null)
            {
                _callRepo = new Repository<CallModel>();
            }
            return _callRepo;
        }
    }

    public IRepository<UserModel> UserRepo
    {
        get
        {
            if (_userRepo == null)
            {
                _userRepo = new Repository<UserModel>();
            }
            return _userRepo;
        }
    }
} 
```

然后，我会将 UnitOfWork 类的实例传递给 Controller 以执行类似这样的简单 CRUD 操作。

```
 public class QuestionsController : Controller
{
    private IUnitOfWork _unitOfWork;

    [Inject]
    public QuestionsController(IUnitOfWork unitOfWork)
    {
        _unitOfWork = unitOfWork;
    } 
```

我已将应用程序分成三个项目。

1.  核
2.  基础设施
3.  网络

我在 Core 项目中有我的所有接口，在 Infrastructure 项目中有 IRepository 接口的实现。如果我将 UnitOfWork 类放在核心项目中，那么因为它在基础设施项目中需要一个新的存储库，所以我正在创建从核心到基础设施的依赖关系。如果我将它包含在基础架构中，那么 Web 项目（具有控制器）将依赖于基础架构，整个解决方案最终看起来不像洋葱，而更像意大利面条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:54:40.703

> 我在 Core 项目中有我的所有接口，在 Infrastructure 项目中有 IRepository 接口的实现。如果我将 UnitOfWork 类放在核心项目中，那么因为它在基础设施项目中需要一个新的存储库，所以我正在创建从核心到基础设施的依赖关系。

嗯，真的不是。您的工作单元类应该依赖于 IRepository，而不是 Repository 实现本身。如果您使用的是依赖注入，这应该不会造成问题，因为它应该找到正确的类型并在运行时提供它。我不确定在不使用 DI 的情况下是否可以使用 Onion 架构。

另请参阅 david.s 的回答，因为这正是我设置的方式 - 有一个项目仅用于连接依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:20:17.523

我希望 david.s 创建名为 DependencyResolution 的项目，但让它引用 Web、Core 和 Infrastructure。

在那个项目中，你可以这样做：

```
[assembly: PreApplicationStartMethod(typeof(Start), "Register")]

namespace DependencyResolution
{
    public static class Start
    {
        public static void Register()
        {
            UnityConfig.Register();
        }
    }
} 
```

并注册 DI。

```
namespace DependencyResolution
{    
    public static class UnityConfig
    {
        public static void Register()
        {
            DependencyResolver.SetResolver(new UnityDependencyResolver());
        }
    }
} 
```

因此，无需在 Web 和基础架构之间进行引用。

此致

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T12:24:28.807

值得一提的是，我实现了自己的库，它应用 UnitOfWork 模式与我之前在任何代码示例中看到的略有不同，但我发现它在实践中运行良好。简而言之：我通过创建一个范围然后在必要时在环境 unitofwork(-manager) 中征用资源来复制 .NET Transactions 的工作方式。基本上发生的是，当处理新消息/请求时，会执行以下代码：

```
public void Handle<TMessage>(TMessage message)
{
    using (var scope = CreateMessageProcessorContextScope())
    {
        HandleMessage(message);
        scope.Complete();
    }
} 
```

现在就像事务一样，只要线程仍在范围内，就会出现一个环境 UnitOfWork 控制器，其中在请求期间使用和更改的所有资源都可以动态登记。他们通过实现具有两种方法的 IUnitOfWork 接口来做到这一点：

```
public interface IUnitOfWork
{
    bool RequiresFlush();

    void Flush();
} 
```

然后，实现此接口的实例可以按如下方式登记自己：

```
MessageProcessorContext.Current.Enlist(this); 
```

通常，存储库类将实现此接口，并且当它检测到它的托管聚合被更改/添加/删除时，它可以自己登记（忽略双重登记）。

在我的例子中，该框架假定您正在使用一个 IOC 框架，它将为您解析所有消息处理程序和存储库，因此我通过让它注入当前 IUnitOfWorkManager 的实例来更容易地加入环境工作单元控制器需要的构造函数。这样，工作单元管理器的依赖关系和需要刷新的实际部分（存储库、服务等）被反转：

```
internal sealed class OrderRepository : IOrderRepository, IUnitOfWork
{
    private readonly IUnitOfWorkManager _manager;
    private readonly Dictionary<Guid, Order> _orders;

    public OrderRepository(IUnitOfWorkManager manager)
    {
        if (manager == null)
        {
            throw new ArgumentNullException("manager");
        }
        _manager = manager;
    }

    bool IUnitOfWork.RequiresFlush()
    {
        return _orders.Values.Any(order => order.HasChanges());
    }

    void IUnitOfWork.Flush()
    {
        // Flush here...
    }

    public void Add(Order order)
    {
        _orders.Add(order.Id, order);
        _manager.Enlist(this);
    }
} 
```

一旦成功处理了请求（没有抛出异常），将调用 scope.Complete() 触发控制器检查所有登记的项目是否（仍然）需要刷新（通过调用 RequiresFlush()），如果是，则刷新它们（通过调用 Flush()）。

总而言之，这允许一个非常可维护的解决方案（在我看来），可以在不更改任何主 unitofwork 类的情况下即时添加新的存储库和其他依赖项，就像 TransactionManager 不需要预先知道哪些项目可能参与任何给定的交易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T16:50:14.993

我所做的是有另一个名为的项目，它具有对我的 IoC 容器的`DependencyResolution`引用`Core`和配置的位置。`Infrastructure`然后我只能`DependencyResolution`从`Web`项目中引用。

# logic - 时序电路设计

> ID：14858546
> 
> 赞同：1
> 
> 时间：2013-02-13T16:44:58.163
> 
> 标签：logic, state-machine, fsm

时序电路有两个输入，x1 和 x2。表示用 2-out-of-5 代码编码的十进制数字的 5 位序列不时出现在 a:, 行上，与第三行上的时钟脉冲同步。行 x1 上的每五个连续位，在 x2 = 0 时出现，但紧跟一个或多个 x2 = 1 的输入，可被视为一个码字。单个输出 z 为 0，除了无效代码字的第 5 位。确定上述时序电路的状态表。5 个代码中的 2 个

*   0=00011
*   1=00101
*   2=00110
*   3=01001
*   4=01010
*   5=01100
*   6=10001
*   7=10010
*   8=10100
*   9=11000

我已经用 16 个州解决了这个问题。谁能告诉我有没有可能将州的数量减少到 16 个以下？

# php - 自定义表单类型 symfony

> ID：14858550
> 
> 赞同：1
> 
> 时间：2013-02-13T16:45:07.480
> 
> 标签：php, ajax, dynamic, symfony, symfony-2.1

我需要在 Symfony 中设置一个自定义表单类型，它使用选项类型作为父级，但实际上并不需要预加载选项。正如我希望能够使用 ajax 调用填充选择，然后使用调用中的选项之一提交而不会`This value is not valid.`出现错误，大概是因为它不是预加载的选项之一。

我不需要自定义数据转换器，因为我正在通过捆绑控制器执行此操作，我只需要 Symfony 在我使用最初不在列表中的选项提交时不要抱怨。这是我的自定义表单类型到目前为止的样子：

```
<?php

namespace ISFP\Index\IndexBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class NullEntityType extends AbstractType
{
    public function getDefaultOptions(array $options)
    {
        $defaultOptions = array(
            'em'                => null,
            'class'             => null,
            'property'          => null,
        );

        $options = array_replace($defaultOptions, $options);

        return $options;
    }

    public function getParent()
    {
        return 'choice';
    }

    public function getName()
    {
        return 'null_entity';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:10:20.870

老兄看看`EntityType`它有一个父母作为一个`choice`。但整个显示器由`ChoiceType`. 当我做类似的事情时，我从重载 Both`ChoiceType`和`EntityType`. 然后在重载实体中`getParent()`设置挖掘重载选项。

最后，在我的情况下，我修改了新的`choice`并将我的嵌入表单放在那里。做起来很棘手。而且会消耗很多时间。

但是通过这种方法，我对验证没有任何问题。

# database - 如何将excel电子表格中的数据转换为格式以上传到数据库

> ID：14858551
> 
> 赞同：0
> 
> 时间：2013-02-13T16:45:10.843
> 
> 标签：database, excel, format, vba

我需要一种将 900 个电子表格中的输入数据转换为适合上传到关系数据库（XML 或平面文件）的格式的好方法。电子表格是多页、多行的 Excel 2007，每一个由 7 个表格组成（所以它绝对不是一个简单的网格）。没有公式数据可以获取，只有文本、日期、整数数据。

900 个电子表格都采用相同的格式。我将需要某种脚本解决方案。

我希望我应该能够使用 excel 宏（并且我希望一个花哨的可编写脚本的编辑器也可以做到）或者可能是 SSIS 来做到这一点。

有人能告诉我，如果这是你的事，你会怎么做？

任何人都可以提供一些技术信息的链接，以了解这样做的好方法吗？

我是 excel 宏的新手，但习惯于编程和脚本语言、sql 等。

为什么？我们使用电子表格作为临时解决方案，然后我需要将数据导入数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:59:21.370

您可能希望将数据写入纯文本文件。使用 FileSystemObject 的 CreateTextFile 方法。此处的文档：

[http://msdn.microsoft.com/en-us/library/aa265018(v=vs.60).aspx](http://msdn.microsoft.com/en-us/library/aa265018(v=vs.60).aspx)

网上有很多关于如何迭代工作表、捕获数据然后使用 WriteLine 方法的示例。

```
Sub ExampleTextFile()
    Dim fso as Object
    Dim oFile as Object
    Dim fullExport as String

    'Script that will capture data from worksheet belongs here _
    ' use the fullExport string variable to hold this data, for now we will _
    ' just create a dummy string for illustration purposes

    fullExport = "Example string contents that will be inserted in to my text file!"

    Set fso = CreateObject("Scripting.FileSystemObject")

   'In the next line, replace "C:\filename.txt" with the specified file you want to create

    set oFile = fso.CreateTextFile("C:\filename.txt", Overwrite:=True, unicode:=True)  

    oFile.WriteLine(fullExport) '<-- inserts the captured string to your new TXT file
    oFile.Close

    Set fso = Nothing
    Set oFile = Nothing

End Sub 
```

如果您有字符编码问题（我最近遇到了 UTF16LE 与 UTF8 编码的问题，您将需要使用 ADODB.Stream 对象，但这将需要另一种写入文件的方法。

# django - 在 django admin 上编辑实际对象之前保存相关对象

> ID：14858559
> 
> 赞同：18
> 
> 时间：2013-02-13T16:45:45.960
> 
> 标签：django, django-models, django-admin, django-signals

是否可以在 django 管理表单上编辑实际对象之前保存相关对象？

例如：

在`models.py`

```
class Parent(model.Model):
    pass

class Child(model.Model):
    parent = models.ForeignKey(Parent)

@receiver(post_save,sender = Parent)
def notify_parent_save(sender, instance=None, **kwargs):
    print "Parent save"

@receiver(post_save,sender = Child)
def notify_child_save(sender, instance=None, **kwargs):
    print "Child saved" 
```

在`admin.py`

```
class ChildInline(admin.TabularInline):
    model = Child
    extra = 1

class ParentsAdmin(admin.ModelAdmin):
    inlines = [ChildInline]

admin.site.register(Parent,ParentsAdmin) 
```

现在，在 django admin 中，如果我保存父对象，它将在控制台上输出。

```
Parent save
Child save 
```

我需要以相反的顺序发生这种情况：

```
Child save
Parent save 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-13T18:44:10.870

以下将首先拯救孩子：

```
class ParentAdmin(admin.ModelAdmin):
    inlines = [ChildInline]

    def save_model(self, request, obj, form, change):
        pass # don't actually save the parent instance

    def save_formset(self, request, form, formset, change):
        formset.save() # this will save the children
        form.instance.save() # form.instance is the parent 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-02-01T20:54:34.003

我对这篇文章中的答案有疑问，所以我想出了一个更简洁的答案。我遇到了一个问题，因为使用 django-fsm，这里的其他答案会尝试多次保存模型（每个表单集一次）而不是最后一次。

```
def save_model(self, request, obj, form, change):
    if not obj.pk: # call super method if object has no primary key 
        super(YourAdmin, self).save_model(request, obj, form, change)
    else:
        pass # don't actually save the parent instance

def save_related(self, request, form, formsets, change):
    form.save_m2m()
    for formset in formsets:
        self.save_formset(request, form, formset, change=change)
    super(YourAdmin, self).save_model(request, form.instance, form, change) 
```

这基本只是翻转了[Django ModelAdmin 源中调用的 save_model 和 save_related 的顺序](https://github.com/django/django/blob/1.4.3/django/contrib/admin/options.py#L954)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-24T11:35:13.677

ccrisan 的回答让我走上了正轨，但我认为数据库中尚不存在的实例的保存行为存在缺陷。在这种情况下，不可能先保存相关对象，因为它们没有可以指向的外键。对我来说，以下扩展起到了作用：

```
class ParentAdmin(admin.ModelAdmin):
    inlines = [ChildInline]

    def save_model(self, request, obj, form, change):
        if not obj.pk: # call super method if object has no primary key 
            super(ParentAdmin, self).save_model(request, obj, form, change)
        else:
            pass # don't actually save the parent instance

    def save_formset(self, request, form, formset, change):
        formset.save() # this will save the children
        form.instance.save() # form.instance is the parent 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T17:32:53.910

根据您在信号中到底想做什么，您可以将子模型的 post_save 更改为 pre_save 吗？

# php - 如何使用 Wideimage 库转换图像类型

> ID：14858560
> 
> 赞同：1
> 
> 时间：2013-02-13T16:45:48.290
> 
> 标签：php, image, image-processing

我有一个表单，用户可以在其中上传图像，并且该图像会显示在网页上。我使用 Wideimage 库来调整图像大小并重命名图像。在显示代码中，我指定了名称和类型，但问题是我不知道如何转换 Wideimage 中的图像类型以便正确显示。我希望这是有道理的。

另一个可行的选择是，如果我能以某种方式获取文件名的图像类型，然后在显示代码中使用它。我在看，`php function getimagesize()`但我不能让它工作，也就是说，我必须运行一堆 if 语句来查看它是什么类型的图像。这似乎不实用。

# substitution - 在reStructuredText中使用没有前导空格的替换

> ID：14858562
> 
> 赞同：1
> 
> 时间：2013-02-13T16:45:49.473
> 
> 标签：substitution, restructuredtext

在 reStructuredText 中，这不起作用（|reg| 替换未完成）

```
.. include:: <isonum.txt>

foo bar|reg| baz
================ 
```

这确实有效，但我不想在 'bar' 和 |reg| 之间有空格：

```
.. include:: <isonum.txt>

foo bar |reg| baz
================= 
```

当替换与单词紧邻时，如何识别替换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:11:42.717

这似乎有效：

```
foo bar\ |reg| baz 
```

用反斜杠转义空格。

# java - NamedParameterJdbcTemplate + TomCat，打开和关闭数据库连接

> ID：14858565
> 
> 赞同：1
> 
> 时间：2013-02-13T16:45:57.087
> 
> 标签：java, tomcat, spring-mvc

我在 TomCat 服务器上部署了一个 Spring MVC 项目，但我一直遇到与数据库连接的问题。几个小时后，当用户尝试登录时，他们将遇到 500 错误和以下消息：

```
HTTP Status 500 - Request processing failed; nested exception is org.springframework.dao.RecoverableDataAccessException: The last packet successfully received from the server was 75,026,904 milliseconds ago. The last packet sent successfully to the server was 75,031,521 milliseconds ago. is longer than the server configured value of 'wait_timeout'. 
```

我相信这个问题是因为 TomCat 认为与 MySQL 的连接仍然打开，但是 MySQL 在 8 小时后关闭了连接。收到此错误后刷新页面后，一切正常。

我的问题是，有没有办法让我使用 NamedParameterJdbcTemplate 来查询数据库，每次使用时打开和关闭连接，而不是维护一个持久连接？或者有没有更好的方法来解决这个问题？

也许设置 autoReconnect=true？我现在正在尝试这个，但需要几个小时才能知道它是否有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:20:47.170

假设您使用的是 Tomcat 的连接池，您可以将池设置为 testOnBorrow="true" 和 validationQuery="SELECT 1 FROM my_test_table"。这样，将在线程签出之前检查连接。如果它已关闭，则会打开另一个并提供给为您的请求提供服务的线程。[您可以在此处](http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html)阅读 Tomcat 提供的选项的文档。

# java - 调用 WebService 并遇到 SSL/证书问题

> ID：14858567
> 
> 赞同：7
> 
> 时间：2013-02-13T16:46:18.723
> 
> 标签：java, tomcat, soap

我将从这样一个事实开始，即我对在 Java 中设置密钥库等方面了解不多

我正在尝试调用 SOAP Web 服务，我得到了 wsdl，生成了代码等。在我部署它并尝试触发 WS 调用之前，一切似乎都很好。

这是我的设置：

*   雄猫 7.0.35
*   Java，jdk 1.6.0_39
*   pfx 文件和密码
*   项目作为标准 Web 应用程序（战争）部署到 tomcat

当我运行代码时，出现以下异常：

```
Caused by: javax.net.ssl.SSLHandshakeException: SSLHandshakeException invoking https://tallyservices-qa.olson.com/tallyDemo2WebServices/tallyDemo2/sms: Received fatal alert: certificate_unknown
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.mapException(HTTPConduit.java:1336)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1320)
    at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)
    at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:622)
    at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)
    ... 27 more
Caused by: javax.net.ssl.SSLHandshakeException: Received fatal alert: certificate_unknown
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:136)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:1837)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1019)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1203)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1230)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1214)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:434)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:166)
    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1031)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:230)
    at org.apache.cxf.transport.http.URLConnectionHTTPConduit$URLConnectionWrappedOutputStream.setupWrappedStream(URLConnectionHTTPConduit.java:170)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleHeadersTrustCaching(HTTPConduit.java:1280)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.onFirstWrite(HTTPConduit.java:1231)
    at org.apache.cxf.transport.http.URLConnectionHTTPConduit$URLConnectionWrappedOutputStream.onFirstWrite(URLConnectionHTTPConduit.java:183)
    at org.apache.cxf.io.AbstractWrappedOutputStream.write(AbstractWrappedOutputStream.java:47)
    at org.apache.cxf.io.AbstractThresholdOutputStream.write(AbstractThresholdOutputStream.java:69)
    at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1293)
    ... 30 more 
```

我在这里遵循了建议：[How to convert .pfx file to keystore with private key？](https://stackoverflow.com/questions/4217107/how-to-convert-pfx-file-to-keystore-with-private-key)将证书安装到我的密钥库：

```
keytool -importkeystore -srckeystore C:\somefolder\mypfxfile.pxf -srcstoretype pkcs12 
-destkeystore C:\somefolder\clientcert.jks -deststoretype JKS 
```

我得到了：

```
Enter destination keystore password: <mypassword>
Re-enter new password: <mypassword>
Enter source keystore password: <pxf_password>
Entry for alias 67eb31f6 successfully imported.
Import command completed:  1 entries successfully imported, 0 entries failed or
cancelled 
```

所以到目前为止一切看起来都很好，我反弹了我的tomcat并再次点击了Servlet，但我仍然得到同样的错误。

我在这里还缺少什么？我需要告诉tomcat证书什么的吗？

提前感谢您对我在密钥库和证书领域的菜鸟的帮助和道歉。

**编辑：** 所以我从 Carlo Pellegrini 的帮助中得知，我需要将密钥库添加到 tomcat：所以现在，我的 tomcat 使用附加的 JAVA_OPTS 参数启动：

```
"-Djavax.net.ssl.trustStore=C:\somefolder\clientcert.jks -Djavax.net.ssl.trustStorePassword=somepassword" 
```

现在我得到了：

```
Caused by: javax.net.ssl.SSLException: java.lang.RuntimeException: Unexpected error: java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty 
```

从这里开始：[错误 - trustAnchors 参数必须为非空](https://stackoverflow.com/questions/6784463/error-trustanchors-parameter-must-be-non-empty)并[得到 java.security.InvalidAlgorithmParameterException：使用 cas 时 trustAnchors 参数必须为非空](https://stackoverflow.com/questions/6633164/got-java-security-invalidalgorithmparameterexception-the-trustanchors-parameter)- 似乎找不到我的信任库？

我想出了我之前的命令：

```
keytool -importkeystore -srckeystore C:\somefolder\mypfxfile.pxf -srcstoretype pkcs12 -destkeystore C:\somefolder\clientcert.jks -deststoretype JKS 
```

实际上将 pxf 放入**密钥库**，而不是信任库？

当我检查密钥库列表时：

```
C:\somefolder>keytool -list -keystore "C:\somefolder\clientcert.jks"
Enter keystore password:

Keystore type: JKS
Keystore provider: SUN

Your keystore contains 1 entry

67eb31f6, 13-Feb-2013, PrivateKeyEntry,
Certificate fingerprint (MD5): ... some fingerprint ... 
```

所以我不确定我在这里错过了什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T18:15:00.913

您需要信任服务器证书。这是如何做到的：

使用 Chrome（其他浏览器的说明可能会有所不同）：

*   浏览服务站点。（例如。`https://localhost/myService`）
*   如果浏览器不信任它，请单击`Proceed anyway`，单击地址栏中的挂锁图标，没有弹出窗口，选择`Connection`选项卡和`Certificate Information` 链接。
*   这应该会打开证书查看器窗口`Details`，您应该在其中选择 ，查看`Export ...`按钮。选择 Base 64 编码的单一证书并将其保存为`mysite.cer`文件。

这将获得证书，现在您需要将其导入信任库。

现在将证书导入密钥库：

```
keytool -import -file mysite.cer -keystore mykeystore 
```

`mykeystore`这会在当前目录中创建一个新的文件密钥库文件。

最后使用 JVM 参数启动 Web 服务客户端应用程序，如下所示`javax.net.ssl.trustStore`：

```
java -Djavax.net.ssl.trustStore=mykeystore ... MyClientClass 
```

或者，如果您在 Windows 中使用 Tomcat：

```
set JAVA_OPTS=-Djavax.net.ssl.trustStore=mykeystore
startup.bat 
```

或者，如果您在 Unix 中使用 Tomcat：

```
export JAVA_OPTS="-Djavax.net.ssl.trustStore=mykeystore"
startup.sh 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-02T14:42:39.807

我找到了解决方案，我应该使用 keyStore 而不是 trustStore，但更重要的是，我使用的库（cxf 2.7.1）似乎存在问题，我必须直接在代码中设置 SSL 属性：

```
// BEGIN FIX to avoid certificate error, need to set this up in the code for cxf
String storePath = System.getProperty("javax.net.ssl.keyStore");
String storePassword = System.getProperty("javax.net.ssl.keyStorePassword");
String storeType = System.getProperty("javax.net.ssl.keyStoreType");
KeyStore keyStore = KeyStore.getInstance(storeType);
keyStore.load(new FileInputStream(storePath), storePassword.toCharArray());
KeyManagerFactory factory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
factory.init(keyStore, storePassword.toCharArray());
KeyManager[] keyManagers = factory.getKeyManagers();
Client client = ClientProxy.getClient(port);
HTTPConduit conduit = (HTTPConduit) client.getConduit();
conduit.setTlsClientParameters(new TLSClientParameters());
conduit.getTlsClientParameters().setKeyManagers(keyManagers); 
```

# matlab - Matlab 引擎问题

> ID：14858568
> 
> 赞同：1
> 
> 时间：2013-02-13T16:46:18.523
> 
> 标签：matlab, 32bit-64bit, matlab-engine

我正在尝试在 Windows 7 上的 VS2010 中运行基本的 Matlab enginedemo.cpp，无论我做什么代码：

```
`if (!(ep = engOpen(""))) {
     fprintf(stderr, "\nCan't start MATLAB engine\n");
     return EXIT_FAILURE;
 }` 
```

总是出错。

我的计算机上同时安装了 MatlabR2012b 和 MatlabR2012a，但我卸载了 MatlabR2012a，然后从我的**路径**变量中删除了对它的所有引用。

我正在运行 x64 MatlabR2012b 并设置了我的 VisualC++ Win 32 控制台应用程序。

我也已经将调试环境设置为：**{MatlabRoot}\R2012b\extern\lib\win64\microsoft**

C/C++->其他包含目录：**{MatlabRoot}\R2012b\extern\include**

链接器->常规- >附加库目录：**{MatlabRoot}\R2012b\extern\lib\win64\microsoft**

链接器->输入->附加依赖：**libmx.lib;libmat.lib;libeng.lib**

我的 Matlab 版本也已注册，因此不应该导致错误。

我搜索了有关此问题的其他一些 stackoverflow 问题，其中大多数似乎通过从路径变量中删除旧版本的 matlab 来解决他们的问题，但它对我没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:38:31.193

您不能在 32 位应用程序中加载 64 位 DLL。如果要使用 64 位 matlab，则必须制作 64 位控制台应用程序。

您的 PATH 中应该有 {MatlabRoot}\bin\win64（有 libeng.dll 和其他 matlab 引擎库），以便您的应用程序可以在运行时找到 matlab 引擎库。

从命令提示符执行“matlab /regserver”。（从 Matlab 2012a 重新注册 COM 组件 - 可能不需要，但可以肯定）

希望这可以帮助。

# javascript - Node、Express 3 和 Passport：登录表单不起作用

> ID：14858572
> 
> 赞同：1
> 
> 时间：2013-02-13T16:46:36.337
> 
> 标签：javascript, node.js, express, passport.js

我是 Node 新手，有一个 Node、Express 和 Passport 设置并且看起来可以正常工作。也就是说，我看不到任何错误消息。

问题是当我进入登录页面并尝试登录时，没有任何反应。单击按钮后页面刷新，但未采取任何操作。

我已经粘贴了下面的代码。

这是我提交表单时的终端输出：

```
08:19:53 web.1  | POST /login 302 3ms - 68
08:19:53 web.1  | GET /login 304 11ms
08:19:53 web.1  | GET /stylesheets/base.css 304 1ms 
```

这是登录视图（Jade）：

```
- if (message)
  p
    strong =message

form(method="post", action="/login")
  fieldset
    label(for="username") Username
    input.text-input(type="text", name="username")

    label(for="password") Password
    input.text-input(type="password", name="password")

    button.btn-submit(type="submit") Login!

    a.btn-cancel(href="/") Cancel 
```

这是最初调用登录页面的代码（为了清楚起见，我取出了其他东西）：

**应用程序.js**

```
app.get("/login", routes.login); 
```

**路线/index.js**

```
(function() {
  var Post;

  Post = require('../models/Post');

  module.exports = {
    login: function(req, res) {
      return res.render("login", {
        user: req.user,
        message: req.flash("Login error!"),
        title: "Login | David Yeiser"
      });
    }
  };

}).call(this); 
```

这是处理帖子的**app.js**部分：

```
app.post("/login", passport.authenticate("local", {
    failureRedirect: "/login",
    failureFlash: true
}), function(req, res) {
    return res.redirect("/office");
}); 
```

最后，这是整个**app.js**：

```
(function() {
  var LocalStrategy, app, express, findById, findByUsername, flash, http, mongoose, passport, path, routes, user, users, util;

  express = require('express');
  routes = require('./routes');
  user = require('./routes/user');
  http = require('http');
  path = require('path');
  mongoose = require('mongoose');
  passport = require('passport');
  flash = require('connect-flash');
  util = require('util');
  LocalStrategy = require('passport-local').Strategy;

  users = [
    {
      id: 1,
      username: 'bob',
      password: 'secret',
      email: 'bob@me.com',
      id: 2,
      username: 'nancy',
      password: 'secrettoo',
      email: 'nancy@me.com'
    }
  ];

  findById = function(id, fn) {
    var idx;
    idx = id - 1;
    if (users[idx]) {
      return fn(null, users[idx]);
    } else {
      return fn(new Error('User does not exist'));
    }
  };

  findByUsername = function(username, fn) {
    var i, len;
    i = 0;
    len = users.length;
    while (i < len) {
      user = users[i];
      if (user.username === username) {
        return fn(null, user);
      }
      i++;
    }
    return fn(null, null);
  };

  passport.serializeUser(function(user, done) {
    return done(null, user.id);
  });

  passport.deserializeUser(function(id, done) {
    return findById(id, function(err, user) {
      return done(err, user);
    });
  });

  passport.use(new LocalStrategy(function(username, password, done) {
    return process.nextTick(function() {
      return findByUsername(username, function(err, user) {
        if (err) {
          return done(err);
        }
        if (!user) {
          return done(null, false, {
            message: "Unknown user " + username
          });
        }
        if (user.password !== password) {
          return done(null, false, {
            message: "Invalid password"
          });
        }
        return done(null, user);
      });
    });
  }));

  app = express();

  app.configure(function() {
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.favicon());
    app.use(express.logger('dev'));
    app.use(express.cookieParser());
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.session({
      secret: 'keyboard cat'
    }));
    app.use(flash());
    app.use(passport.initialize());
    app.use(passport.session());
    app.use(app.router);
    return app.use(express["static"](path.join(__dirname, 'public')));
  });

  app.configure('development', function() {
    mongoose.connect('mongodb://localhost/davidyeiser_dev');
    return app.use(express.errorHandler());
  });

  app.get("/", routes.index);

  app.get("/login", routes.login);

  app.post("/login", passport.authenticate("local", {
    failureRedirect: "/login",
    failureFlash: true
  }), function(req, res) {
    return res.redirect("/office");
  });

  app.get("/logout", function(req, res) {
    req.logout();
    return res.redirect("/");
  });

  app.get("/post/new", routes.newPost);
  app.post("/post/new", routes.addPost);
  app.get("/post/:id", routes.viewPost);
  app.get("/users", user.list);

  http.createServer(app).listen(app.get("port"), function() {
    return console.log("Express server listening on port " + app.get("port"));
  });

}).call(this); 
```

您看到的大部分内容来自 Passport Express 3 示例： [https ://github.com/jaredhanson/passport-local/blob/master/examples/express3/](https://github.com/jaredhanson/passport-local/blob/master/examples/express3/)

我很感谢你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T05:37:25.570

啊哈！用户数组构造不正确。

```
 users = [
    {
      id: 1,
      username: 'bob',
      password: 'secret',
      email: 'bob@me.com',
      id: 2,
      username: 'nancy',
      password: 'secrettoo',
      email: 'nancy@me.com'
    }
  ]; 
```

需要：

```
 users = [
    {
      id: 1,
      username: 'bob',
      password: 'secret',
      email: 'bob@me.com'
    },
    {
      id: 2,
      username: 'nancy',
      password: 'secrettoo',
      email: 'nancy@me.com'
    }
  ]; 
```

我发现它的方式是我只是减少到一个用户（在大约 1,000 件其他事情中），然后最终意识到这是错误的。其他一切都保持不变。

（之前没抓到的原因是因为我每次都用“bob”，从来没想过要试试“nancy”）

# wpf - WPF 对此的回答是什么？

> ID：14858573
> 
> 赞同：7
> 
> 时间：2013-02-13T16:46:36.040
> 
> 标签：wpf, winforms

我使用 WPF 开发了两个中等大小的应用程序。WPF 的简洁性及其功能给我留下了深刻的印象。当我向我的一位同事（碰巧开发业务应用程序）解释 WPF 的各种好处时，他向我提出了这个让我完全难过的问题：

**问题：**

他在大约 2 分钟内用以下方式编写了一个应用程序：

1.  打开一个新的 WinForms 项目。
2.  定义一个类`Loan`。
3.  构建项目。
4.  使用 定义对象数据源`Loan`。
5.  在数据源资源管理器中，将数据源的视图类型更改`Loan`为详细信息。
6.  将数据源拖到设计器中的窗体上。
7.  为数据源提供一个`Loan[]`包含一个对象。
8.  构建并运行应用程序。

编码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WinForms_DataBinding_Example
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        protected override void OnLoad(EventArgs e)
        {
            base.OnLoad(e);

            loanBindingSource.DataSource = new Loan[] { new Loan() };
        }
    }

    public class Loan
    {
        public decimal Amount { get; set; }
        public decimal Rate { get; set; }
        public decimal Total { get { return Amount * Rate; } }
    }
} 
```

设计师：

![在此处输入图像描述](../Images/cd29053ea27a62f25ab0e2437e0cc370.png)

应用程序：

![在此处输入图像描述](../Images/c0d6d904f7019dd70dd2dbe480735dc3.png)

现在，每当您在窗口中更改`Amount`或的值时， 的值都会相应更改。在解释了这是业务应用程序中非常有用的功能之后，您对实体中的一个属性所做的任何更改都会立即更新视图，其中计算的属性会立即刷新，从而使用户体验更好。考虑到典型的业务实体类有很多属性，这样就节省了很多编码。然后他让我在 WPF 中做同样的事情。`Rate``Total`

我首先向他解释说，我不明白这里发生了什么样的黑魔法。文本框如何`Total`自动更新？这是我的第一个问题：

Q1。该类`Loan`没有实现`INotifyPropertyChanged`或类似的东西。那么当or文本框失去焦点时，文本框是如何`Total`更新的呢？`Amount``Rate`

然后我告诉他，我不知道如何在 WPF 中如此轻松地做同样的事情。`TextBlock`但是，我在 WPF 中使用 3 s 和 3 `TextBox`s 在 UI中编写了相同的应用程序。我还需要让`Loan`类实现`INotifyPropertyChanged`。`Amount`在和中添加了支持字段`Rate`。每当设置这些属性时，我都会为该属性发出属性更改通知`Total`。最后，我得到了一个控件对齐很差的应用程序，它与 WinForms 应用程序做同样的事情。然而，这比 WinForms 方法更难做到。

我回到家，然后有了将数据源拖放`Loan`到 WPF 窗口的好主意（在我将视图模式更改为详细信息之后）。果然，我得到了与 WinForms 应用程序中相同的 UI，并且在将数据源设置为与`Loan[]`WinForms 应用程序相同后，它似乎就完成了。我运行了应用程序，更改了`Amount`和`Rate`字段，希望能`Total`自动看到更改本身。然而，我很失望。该`Total`字段没有改变：

![在此处输入图像描述](../Images/77384b319c1c6914259fdd01d9c2c6b3.png)

编码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using WinForms_DataBinding_Example;

namespace WPF_Grid_Example
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void Window_Loaded_1(object sender, RoutedEventArgs e)
        {

            System.Windows.Data.CollectionViewSource loanViewSource = ((System.Windows.Data.CollectionViewSource)(this.FindResource("loanViewSource")));
            // Load data by setting the CollectionViewSource.Source property:
            loanViewSource.Source = new List<Loan>() { new Loan() };
        }
    }
} 
```

xml:

```
<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:WinForms_DataBinding_Example="clr-namespace:WinForms_DataBinding_Example;assembly=WinForms_DataBinding_Example" mc:Ignorable="d" x:Class="WPF_Grid_Example.MainWindow"
        Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded_1">
    <Window.Resources>
        <CollectionViewSource x:Key="loanViewSource" d:DesignSource="{d:DesignInstance {x:Type WinForms_DataBinding_Example:Loan}, CreateList=True}"/>
    </Window.Resources>
    <Grid>
        <Grid x:Name="grid1" DataContext="{StaticResource loanViewSource}" HorizontalAlignment="Left" Margin="121,123,0,0" VerticalAlignment="Top">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Label Content="Amount:" Grid.Column="0" HorizontalAlignment="Left" Margin="3" Grid.Row="0" VerticalAlignment="Center"/>
            <TextBox x:Name="amountTextBox" Grid.Column="1" HorizontalAlignment="Left" Height="23" Margin="3" Grid.Row="0" Text="{Binding Amount, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" VerticalAlignment="Center" Width="120"/>
            <Label Content="Rate:" Grid.Column="0" HorizontalAlignment="Left" Margin="3" Grid.Row="1" VerticalAlignment="Center"/>
            <TextBox x:Name="rateTextBox" Grid.Column="1" HorizontalAlignment="Left" Height="23" Margin="3" Grid.Row="1" Text="{Binding Rate, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" VerticalAlignment="Center" Width="120"/>
            <Label Content="Total:" Grid.Column="0" HorizontalAlignment="Left" Margin="3" Grid.Row="2" VerticalAlignment="Center"/>
            <TextBox x:Name="totalTextBox" Grid.Column="1" HorizontalAlignment="Left" Height="23" Margin="3" Grid.Row="2" Text="{Binding Total, Mode=OneWay}" VerticalAlignment="Center" Width="120"/>
        </Grid>

    </Grid>
</Window> 
```

Q2。以前我对 WinForms 的黑魔法感到困惑，现在我很困惑，因为同样的黑魔法在 WPF 中不起作用。为什么？

Q3。如何使 WPF 版本`Total`像 WinForms 示例中那样自动更新字段？

Q4。对于此类业务应用程序开发，哪个平台更好/更快？如果我要代表 WPF 提出更好的论点，我应该看什么？

我希望我清楚这个问题。如果需要任何澄清，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T18:44:05.347

Q1：如果您查看 Windows 窗体的设计器文件，您将看到为您的 3 个文本框生成的大约 300 行代码。其中一些代码类似于：

```
this.amountTextBox.DataBindings.Add(
    new System.Windows.Forms.Binding("Text", 
        this.loanBindingSource, "Amount", true)); 
```

Binding 和 BindingSource 合作更新绑定值，并在每次值之一更改时（使用反射）更新所有绑定控件。

Q2：因为 WPF 设计器没有创建 .Designer.cs 文件和相关的代码混乱。您需要显式实现 INotifyPropertyChange，这可以通过使用 MVVM Light 的 ViewModelBase 来简化，例如

```
public class Loan : ViewModelBase
{
    public decimal Amount
    {
        get
        {
            return this.amount;
        }
        set
        {
            if (Set(() => Amount, ref this.amount, value))
            {
                RaisePropertyChanged(() => Total);
            }
        }
    } 
```

Q3：1) 当金额或费率更改时，会针对该属性以及计算属性“总计”发出属性更改通知。2) 修改您对金额和费率的绑定以`Binding="{Binding Amount, UpdateSourceTrigger=LostFocus}"`

Q4：WPF 毫无疑问（恕我直言）。WPF 方式更具可测试性、可维护性和可理解性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:24:27.943

回答 Q4：

无论 winform 是否能够为一个类生成 3 个愚蠢的文本框，WPF 都是一个更好、可扩展且功能强大的框架。由于硬件加速和诸如此类的原因，它具有更高的性能，并且需要更少或不需要代码来执行一些在 winforms 中需要大量代码的任务，例如[this](https://stackoverflow.com/questions/14565773/improving-winforms-performance-with-large-number-of-controls/14566539#14566539)或 this：

```
<CheckBox x:Name="chk"/>
<TextBox IsEnabled="{Binding IsChecked,ElementName=chk}"/> 
```

此外，典型的业务线应用程序必须处理数千或数十万条记录，而[UI 虚拟化会产生巨大的](http://www.youtube.com/watch?v=D3Y6DnFpHCA)影响。

最重要的是，无论是否有一些设计师的好东西（这是 Visual Studio 的一个功能，而不是 winforms 本身），winforms 就业务线而言远没有那么实用和充分。

# javascript - 如何让浏览器对 Ajax 获取的 gzip 文本文件进行压缩？

> ID：14858583
> 
> 赞同：8
> 
> 时间：2013-02-13T16:47:08.443
> 
> 标签：javascript, ajax, text-files, gunzip

假设服务器无法压缩对用户请求的响应。尽管如此，Web 开发人员仍会创建 a`myfile.txt.gz`并将其存储在`http://www.mysite.com/myfile.txt.gz`.

可以让浏览器自动将此压缩文本文件压缩为 Ajax 请求的一部分，并将结果存储在`var`? 如果是，如何？

如有必要，我对其他压缩算法持开放态度。

**更新**

我正在尝试使用以下 JQuery Ajax 调用：

```
var fetch = function() {

    $.ajax({
        type: 'GET',
        url:  "./data.txt.gz",
        headers: { "Accept-Encoding" : "gzip" },
        dataType: "text",
        async: true,
        success: function(result) {
            $("#midEnglob").text(result);
        },
        error: function(jqXHR, textStatus, errorThrown) {
            alert("Issue: "
                + textStatus + " "
                + errorThrown + " !");
        }

    });

} 
```

但我在浏览器中得到以下信息：

![在此处输入图像描述](../Images/cf3e08a229cd3943bc6e9bfcf6340439.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:04:36.110

让浏览器使用[Content-Encoding 解压缩它：gzip](http://en.wikipedia.org/wiki/HTTP_compression)可能是最好的。如果它不适用于您的场景，javascript 中有许多 LZW 实现，例如：[https ://gist.github.com/revolunet/843889](https://gist.github.com/revolunet/843889)

您可能必须尝试不同的实现，我自己没有检查任何一个。

# sql - 基于列的 SQL 求和或减法（事务类型）

> ID：14858596
> 
> 赞同：1
> 
> 时间：2013-02-13T16:47:36.273
> 
> 标签：sql, sql-server

我目前正在尝试获取 SQL 表中给定证券的交付总量。如果交易类型为正 (+) [txn 类型]，我想计算每一行并将它们相加，或者如果交易类型为负 (-)，则从其余结果中删除该总数。我目前可以使用以下代码返回所有行的总和

```
SELECT     [STOCK REC NO], 
SUM(ISNULL([QTY DELIVERED], 0) + ISNULL([QTY DUE IN], 0) - ISNULL([QTY DUE OUT], 0)) AS [TOTAL QUANTITY]
FROM         bla_bla
WHERE     ([EVENT DATE] < '09/26/2012')
GROUP BY [STOCK REC NO]

TXN TYPE    QTY DELIVERED   QTY DUE IN  QTY DUE OUT EVENT DATE
+             1                                      28/11/2005
+             2                                      07/02/2006
-             3                                      22/11/2006
+             20                                     18/04/2011
+             40                                     19/04/2011 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:53:48.673

如果我正确理解您的问题，请这样做

```
SELECT     [STOCK REC NO], 
SUM(ISNULL(CASE WHEN [TXN TYPE] = '-' THEN -1 ELSE 1 END * [QTY DELIVERED], 0) +
    ISNULL(CASE WHEN [TXN TYPE] = '-' THEN -1 ELSE 1 END * [QTY DUE IN], 0) - 
    ISNULL(CASE WHEN [TXN TYPE] = '-' THEN -1 ELSE 1 END * [QTY DUE OUT], 0)) 
 AS [TOTAL QUANTITY]
FROM         bla_bla
WHERE     ([EVENT DATE] < '09/26/2012')
GROUP BY [STOCK REC NO] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:35:57.063

如果`TXN_TYPE`总是*要么*`+`or ，你可以`-`试试这个小技巧：

```
SELECT     [STOCK REC NO], 
           SUM(
             **(TXN_TYPE + '1') * (**
             ISNULL([QTY DELIVERED], 0) + ISNULL([QTY DUE IN], 0) - ISNULL([QTY DUE OUT], 0)
             **)**
           ) AS [TOTAL QUANTITY]
FROM         bla_bla
WHERE     ([EVENT DATE] < '09/26/2012')
GROUP BY [STOCK REC NO] 
```

`TXN_TYPE + '1'`变为`'+1'`或`'-1'`。虽然它是一个字符串，但由于乘法，它会隐式转换为数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T16:55:05.877

```
SELECT  [STOCK REC NO],
        CASE TXN_TYPE
            WHEN '+' THEN SUM(ISNULL([QTY DELIVERED], 0) + ISNULL([QTY DUE IN], 0) + ISNULL([QTY DUE OUT], 0))
            ELSE SUM(ISNULL([QTY DELIVERED], 0) + ISNULL([QTY DUE IN], 0) - ISNULL([QTY DUE OUT], 0))
        END AS [TOTAL QUANTITY]
FROM    bla_bla
WHERE   ([EVENT DATE] < '09/26/2012')
GROUP BY
        [STOCK REC NO] 
```

# ajax - 如何通过 Ajax 将对象发送到 Servlet

> ID：14858597
> 
> 赞同：0
> 
> 时间：2013-02-13T16:47:44.403
> 
> 标签：ajax, object, servlets

如何通过 ajax 将对象类型的元素发送到 servlet？在 ajax 中，我传递的值如下：

```
data: { mapList : mapLists } 
```

要获取 Servlet 中的值，请执行以下操作：

```
Object o = request.getAttribute("mapList");
System.out.println(o); 
```

但是，返回值始终为**null**。我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:55:22.203

在 HTTP GET 或 POST 请求上，您只能将键/值对列表作为参数发送到服务器，因此您必须手动序列化您的对象才能以这种格式发送其属性。

你应该更好地使用`HttpServletRequest.getParameter(String)`代替`HttpServletRequest.getAttribute(String)`. 此外，作为 HTTP GET/POST 参数获得的内容将始终在 servlet 中作为`String`.

我假设您正在使用 jQuery 发送 ajax 请求。我还假设您的 mapLists 变量是一个 json 对象。据我所知，jQuery 不会自动将 json 对象转换为键/值对 HTTP 参数列表，因此您必须自己完成，然后在 servlet 中将其解析回。您可以使用[JSON.stringify()](http://www.json.org/js.html)来转换您的 json 对象，也可以手动对其进行序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:49:10.580

通过以下方式更改您的 ajax 数据：

```
data: { 'mapList' : mapLists } 
```

# android - 我怎样才能知道 webView 是否有前一页？

> ID：14858600
> 
> 赞同：0
> 
> 时间：2013-02-13T16:47:54.293
> 
> 标签：android, webview, android-webview

我有一个 webView 和一个操作栏。我添加了一个上一页菜单项

```
webView.goBack(); 
```

无论如何要找出是否存在上一页以实际返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:51:17.097

请参考 android 的 WebView 文档。

根据网站，您可以致电：

```
webView.canGoBack(); 
```

检查您的 webview 是否有上一页（可以返回）。

有关更多信息，请查看此链接：[WebView 参考](http://developer.android.com/reference/android/webkit/WebView.html#canGoBack%28%29)

# javascript - 带有继承对象参数的 Jquery AutoComplete

> ID：14858604
> 
> 赞同：1
> 
> 时间：2013-02-13T16:47:58.987
> 
> 标签：javascript, jquery

我正在使用 jquery-1.9.0 和 jquery-ui-1.10.0

```
var opts = {
            source: availableTags
        };

    var optsA = Object.create(opts, 
    {
        select: {
            value: function (event, ui) {}
        }
    });

    var optsB = Object.create(opts, 
    {
        select: {
            value: function (event, ui) {}
        }
    });

    $("#tags1").autocomplete(
        optsB
    );

    $("#tags2").autocomplete(
        optsA
    ); 
```

我正在尝试为我的自动完成建立两个单独的参数列表。对象似乎构造正确，但自动完成似乎无法识别我对继承对象中选择的定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:52:57.327

`Object.create`调用中缺少一个属性。

你应该添加`enumerable: true`

```
var opts = {
    source: availableTags
};

var optsA = Object.create(opts, 
{
    select: {
        value: function (event, ui) {},
        enumerable: true
    }
});

var optsB = Object.create(opts, 
{
    select: {
        value: function (event, ui) {},
        enumerable: true
    }
});

$("#tags1").autocomplete(
    optsB
);

$("#tags2").autocomplete(
    optsA
); 
```

问题是 jQuery 核心方法中的 for in 循环`extend`找不到该`select`属性，因为它没有被标记为`enumerable`所以这就是为什么它不能从`autocomplete`.

**[JSFiddle](http://jsfiddle.net/EBduF/308/)**

# java - 使用 PHP 管理服务器

> ID：14858605
> 
> 赞同：4
> 
> 时间：2013-02-13T16:48:02.813
> 
> 标签：java, php

我有一个 Java 服务器应用程序。我还有一个 PHP 页面，它显示与服务器相关的日志，页面和服务器共享同一个数据库。我希望能够通过我的页面停止/启动服务器（从 .bat 开始）。

完成此任务的最佳和最安全的方法是什么？

我尝试使用一些应该运行文件的功能`exec`，`system`但它们只是不起作用。我认为这是因为这些在 XAMPP 上被禁用。

Obs.：我无法杀死服务器进程，它会使端口处于使用状态。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:06:27.337

基于 Java 的服务器应该公开某种管理接口，例如套接字或 Web 服务。当它收到一条消息（意思是“关机”）时，它会开始有序关机。

作为一项安全措施，管理界面应该只监听`127.0.0.1`.

# python - 如何在 Pygame 中翻转 img，在我的代码中遇到问题？

> ID：14858608
> 
> 赞同：1
> 
> 时间：2013-02-13T16:48:09.800
> 
> 标签：python, image, transform, pygame, flip

我在 pygame 中翻转精灵时遇到问题（我可以让它向右移动，但我希望 img 在左键上翻转），
我研究了如何翻转图像并找到了`pygame.transform.flip`，但作为 pygame 的初学者，我'不知道如何使用它，教程对我来说没有意义。
任何人都可以帮助我使用下面的代码（我不确定我是否将 self.img1 放在正确的位置）？

```
import pygame, sys, glob 
from pygame import *

class Player:
    def __init__(self):      
        self.x = 200     
        self.y = 300   
        self.ani_speed_init = 6
        self.ani_speed = self.ani_speed_init 
        self.ani = glob.glob("walk\Pinks_w*.png")
        self.ani.sort() 
        self.ani_pos = 0
        self.ani_max = len(self.ani)-1
        self.img = pygame.image.load(self.ani[0])
        self.img1 = pygame.transform.flip(self.ani[0], True, False)

        self.update(0)

    def update(self, pos):
        if pos != 0: 
            self.ani_speed-=1
            self.x+=pos
            if self.ani_speed == 0:
                self.img = pygame.image.load(self.ani[self.ani_pos])
                self.ani_speed = self.ani_speed_init
                if self.ani_pos == self.ani_max:
                    self.ani_pos = 0
                else:
                    self.ani_pos+=1
        screen.blit(self.img,(self.x,self.y))

h = 400
w = 800
screen = pygame.display.set_mode((w,h))
clock = pygame.time.Clock()
player1 = Player()
pos = 0

while True:
    screen.fill((0,0,0))
    clock.tick(60)

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            sys.exit()
        elif event.type == KEYDOWN and event.key == K_RIGHT:
            pos = 1
        elif event.type == KEYUP and event.key == K_RIGHT:
            pos = 0
        elif event.type == KEYDOWN and event.key == K_LEFT:
            pos = -1
        elif event.type == KEYUP and event.key == K_LEFT:
            pos = 0

    player1.update(pos)

    pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T00:16:24.857

要翻转，你会这样做：

```
# input
if event.type == KEYDOWN:
    if event.key == K_RIGHT:
        flip_x = True
    elif event.key == K_LEFT:
        flip_x = False
    elif event.key == K_UP:
        flip_y = True
    elif event.key == K_DOWN:
        flip_y = False

# then to flip
new_image = pygame.transform.flip(original_image, flip_x, flip_y) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:54:02.770

你的`Player`课可读性不是很好。因为，你的名字不容易理解。
在我的代码版本中，我只更改了名称，并且添加了对值的检查`pos`并在需要时应用翻转。因此，您可能需要更改检查（如果条件），以获得所需的结果。

是的，您没有`pygame.Sprite`，所以在这种情况下， sprite 这个词具有误导性。

我的你的`Player`班级版本：

```
class Player:
    def __init__(self):      
        self.x = 200  
        self.y = 300   
        self.speed_init = 6
        self.images = [pygame.image.load(img) for img in glob.glob("walk\Pinks_w*.png")]
        self.index = 0
        self.max_index = len(self.images)-1
        self.speed = 0
        self.img = self.images[self.index]

    def update(self, pos):
        if pos != 0:
            self.speed -= 1
            self.x += pos
            if not self.speed:
                self.speed = self.speed_init
                if self.index < self.max_index:
                    self.index += 1
                else:
                    self.index = 0
            self.img = self.images[self.index]
        # change True to False if needed, or change the operator.
        if pos > 0:
            self.img = pygame.transform.flip(self.img,True,False)
        screen.blit(self.img,(self.x,self.y)) 
```

**更新**
功能 有一个小问题`update`。问题是，由于速度始终是恒定的，而不是`0`，所以`if not self.speed:`不起作用。因此，将`update`函数更改为：

```
def update(self, pos):
    if pos != 0:
        self.speed -= 1
        self.x += pos
        # no more self.speed checks
        if self.index < self.max_index:
            self.index += 1
        else:
            self.index = 0
        self.img = self.images[self.index]
    # change True to False if needed, or change the operator.
    if pos < 0:
        self.img = pygame.transform.flip(self.img,True,False)
    screen.blit(self.img,(self.x,self.y)) 
```

**更新 2**
您的代码中似乎有某种错字，
这是（我的版本）代码，整个事情。

```
import pygame, sys, glob 
from pygame import *

class Player:
    def __init__(self):      
        self.x = 200  
        self.y = 300   
        self.speed_init = 6
        self.images = [pygame.image.load(img) for img in glob.glob("walk\Pinks_w*.png")]
        self.index = 0
        self.max_index = len(self.images)-1
        self.speed = 0
        self.img = self.images[self.index]
        print self.max_index

    def update(self, pos):
        if pos != 0:
            self.speed -= 1
            self.x += pos
            print self.index, self.max_index
            if self.index < self.max_index:
                self.index += 1
            else:
                self.index = 0
            self.img = self.images[self.index]
        # change True to False if needed, or change the operator.
        if pos < 0:
            self.img = pygame.transform.flip(self.img,True,False)
        screen.blit(self.img,(self.x,self.y))

h = 400
w = 800
screen = pygame.display.set_mode((w,h))
clock = pygame.time.Clock()
player1 = Player()
pos = 0

while True:
    screen.fill((0,0,0))
    clock.tick(20)

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            sys.exit()
        elif event.type == KEYDOWN and event.key == K_RIGHT:
            pos = 2
        elif event.type == KEYUP and event.key == K_RIGHT:
            pos = 0
        elif event.type == KEYDOWN and event.key == K_LEFT:
            pos = -2
        elif event.type == KEYUP and event.key == K_LEFT:
            pos = 0

    player1.update(pos)

    pygame.display.update() 
```

# php - preg_match 返回完整的字符串

> ID：14858612
> 
> 赞同：0
> 
> 时间：2013-02-13T16:48:30.393
> 
> 标签：php, preg-match, preg-match-all

我正在尝试从字符串中获取数字，但我一直在获取带有数字而不是单独的数字的完整字符串

```
$string = "stuff here with id=485&other=123";
preg_match('(id=\d+)',$string,$match); 
```

上面的结果像 id=485 但我只想要 485

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T16:50:28.410

括号说明要收集什么。您还需要在两端使用分隔符

```
preg_match('/id\=(\d+)/',$string,$match);
print_r($match);

/* should be
0=>"id=485",
1=>"485"
*/

echo $match[1]; 
```

编辑：见神秘的答案，parse_str 很可能比 preg_match 快。大多数事情都是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T16:56:46.400

```
$string = "stuff here with id=485&other=123";

parse_str(strstr($string, 'id='), $output);

echo $output['id']; // 485 
```

不使用正则表达式。

# python - 为什么我在 Python 中使列表索引超出范围？

> ID：14858618
> 
> 赞同：0
> 
> 时间：2013-02-13T16:48:50.347
> 
> 标签：python, arrays, loops

我最近在这里问了一个问题：[如何查找 int 是否在数组数组中？](https://stackoverflow.com/questions/14856837/how-do-i-find-if-an-int-is-in-array-of-arrays)并且解决方案效果很好。我正在尝试编写代码，如果另一个数组不包含它，它将从数组中删除一个 int。我尝试使用的循环是：

```
for index in range(len(numbers)):
    if not any(numbers[index] in elem[:2] for elem in numbers2):
        numbers.remove(numbers[index]) 
```

说`numbers = [1, 2, 4]`然后`numbers2 = [[4,5,6], [2,8,9]]`在循环之后， numbers[] 应该是`numbers = [2, 4]`. 然而，上面的循环不断产生错误`exceptions.IndexError: list index out of range`，但我不明白为什么会不断抛出错误。任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T16:50:13.120

问题是`len(numbers)`在循环开始时只评估一次。

我会像这样重写整个事情：

```
In [12]: numbers = [1, 2, 4]

In [13]: numbers2 = [[4,5,6], [2,8,9]]

In [15]: n2s = set(reduce(operator.add, (n[:2] for n in numbers2)))

In [17]: [n for n in numbers if n in n2s]
Out[17]: [2, 4] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:54:57.433

创建一个临时列表并保存要删除的位置，然后在所有迭代完成后删除这些位置中的项目。请记住以相反的顺序删除以在删除时保留索引号。

```
to_remove = []
for index, number in enumerate(numbers):
    if not any(number in elem[:2] for elem in numbers2):
        to_remove.append(index)
for index in reversed(to_remove):
    del numbers[index] 
```

# java - JOGL - 移动相机

> ID：14858623
> 
> 赞同：0
> 
> 时间：2013-02-13T16:48:56.710
> 
> 标签：java, opengl, jogl

我在 JOGL 中构建了一些东西，并且我希望通过使用键盘或鼠标使相机移动，这并不重要，只要相机可以围绕对象平移并可能放大和缩小。如果使用键盘/鼠标很困难，那么我也不介意在应用程序中使用一些按钮，例如向上、向下、向左和向右箭头以及用于缩放的加号和减号按钮，但基本上是最简单的。我正在建造类似乐高的东西，但事实证明，如果不能移动相机，这非常困难。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T20:24:45.903

要移动“相机”，您需要在渲染函数的开头应用 glTranslate3f() 变换。如果您的相机的位置是

```
cameraPos = <cx, cy, cz> 
```

那么你应该使用

```
glTranslate3f( -cx, -cy, -cz ); 
```

这将抵消该向量绘制的所有内容。

为了使用键盘实现这一点，您需要使用 KeyListener 实现并定义接口指定的功能。

```
public void keyPressed( KeyEvent ke ){ // put something intelligent here... }
public void keyReleased( KeyEvent ke ){}
public void keyTyped( KeyEvent ke ){} 
```

确保将此实现类注册为您的 GLJPanel（或您正在使用的任何东西）的 KeyListener。然后，在 keyPressed(...) 函数中，检查哪个键被按下并增加相机的适当坐标。

如果您想变得真正花哨并允许鼠标​​让您环顾四周，您可以通过创建 MouseMotionListener 并注册它来做类似的事情。将其发挥作用所需的 OpenGL 转换可能会根据您正在寻找的鼠标行为类型而有所不同。如果您只想要一些简单的东西可以让您环顾四周，您可能可以在 x 和 y 方向上跟踪鼠标运动并允许它修改一些偏移角度。沿 x 方向移动鼠标会绕 y 轴旋转。y 方向的运动绕 x 轴旋转。作为 OpenGL 调用，与 glTranslate3f() 一样，您可以使用 glRotatef() 围绕每个轴旋转。

```
glRotatef( angleX, 1, 0, 0 ); // to rotate about the x-axis
glRotatef( angleY, 0, 1, 0 ); // to rotate about the y-axis 
```

同样，这只是一个快速简便的解决方案。它不会很漂亮，但它会起作用。如果你想实现一些更花哨的东西，你可以考虑计算一个任意轴旋转矩阵。

[http://inside.mines.edu/~gmurray/ArbitraryAxisRotation/](http://inside.mines.edu/~gmurray/ArbitraryAxisRotation/)
（该主题的众多资源之一）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-29T17:40:04.927

您使用了一个名为“gluLookAt(x 的位置, y 的位置, z 的位置, 相机所见位置的 x, 相机所见位置的 y, 相机所见位置的 z, 0, 1, 0) ;"

至于“0,1,0”部分，保持原样，就像您只是平移和放大一样。这只会影响相机的倾斜度。

# .htaccess - 两个 RewriteRules 干扰，一次只有一个有效

> ID：14858624
> 
> 赞同：0
> 
> 时间：2013-02-13T16:48:57.513
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

在具有两个 RewriteRules 的 htaccess 文件上，每个都单独工作，但不能同时工作

```
RewriteRule  ^([1-9]+)/.*/(.*) /sortir/index.php?com=page1&t=$1&l=$2 [QSA]

RewriteRule  ^([1-9]+)/([1-9]+)/.*  /sortir/index.php?com=page2&t=$1&v=$2 [QSA] 
```

如果我先删除，第二个作品。
如果我删除第二个，第一个工作。

第一个调用的链接如下：

`http://example.com/33/xxxx/city`所以 1 美元是 33 美元，2 美元是城市

第二个调用的链接如下：

`http://example.com/33/432/xxxx/city/yyyyy`所以 1 美元是 33，2 美元是 432

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:12:25.800

由于这个正则表达式，这两个条件都是重叠的：

```
^([1-9]+)/.*/(.*) 
```

也会匹配

```
^([1-9]+)/.*/(.*) 
```

因此只有一个会开火。您为什么不清楚地解释您的要求，那么我们可以帮助您以明确的方式编写 RewriteRule。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T01:47:55.420

虽然，正如 anubhava 所指出的，更多细节会有所帮助，但我至少可以指出您当前规则的一些问题。

首先，颠倒规则的顺序。第二条规则不太通用，因为它以两个数字部分和额外的文本部分开始。首先匹配，然后匹配更一般的规则。

其次，以 L 标志结束每个规则，否则在第一个规则完成后将继续处理第二个规则。

第三，更新你的匹配，使它们不匹配斜线。这会强制模式匹配您正在寻找的确切目录结构，而不是匹配任意数量的目录级别。

考虑到这些事情，这里有一些更新的规则可供使用：

第一条规则匹配`http://example.com/33/432/xxxx/city/yyyy`

第二条规则匹配`http://example.com/33/xxxx/city`

```
RewriteRule  ^([1-9]+)/([1-9]+)/[^/]+/[^/]+/.*  /sortir/index.php?com=page2&t=$1&v=$2 [QSA, L]
RewriteRule  ^([1-9]+)/[^/]*/([^/]*)$ /sortir/index.php?com=page1&t=$1&l=$2 [QSA, L] 
```

如果这不是您需要的确切规则集，它至少应该让您更接近。

# iphone - 下载 plist 作为 NSDictionary 返回 (null)

> ID：14858625
> 
> 赞同：0
> 
> 时间：2013-02-13T16:48:59.333
> 
> 标签：iphone, plist, nsdictionary

我在这里检查了许多关于从我的服务器下载 plist 文件并将其转换为可用的 NSDictionary 的问题。无论出于何种原因，当我`NSLog`从`NSDictionary`plist 文件创建时，我在控制台中得到了这个：

```
Timestamp: (null) 
```

我知道这是一个真实的文件： http: [//www.faithlifefellowship.us/iOS/sermons.plist](http://www.faithlifefellowship.us/iOS/sermons.plist)

代码：

```
NSDictionary* plist = [NSDictionary dictionaryWithContentsOfURL:[NSURL URLWithString:@"http://www.faithlifefellowship.us/iOS/sermons.plist"]];

NSLog(@"%@",plist); 
```

问题是什么？

这可能与 plist 文件被缩小这一事实有关吗？

**更新：**

使用以下代码获取文件：

```
NSString* pl = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://www.faithlifefellowship.us/iOS/sermons.plist"] encoding:NSUTF8StringEncoding error:nil];

NSLog(@"%@",pl); 
```

返回：

```
<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"><plist version="1.0"><dict><key>1</key><array><integer>1</integer><string>I've Been Redeemed</string><string>Ive Been Redeemed</string><array><string></string></array><array><string>03/20/09</string><string>04/02/09</string><string>04/10/09</string><string>04/24/09</string><string>05/13/09</string><string>05/23/09</string><string>06/06/09</string><string>06/13/09</string><string>06/20/09</string></array><string>http://faithlifefellowship.us/Sermons/Banners/Banner-IBR.png</string><integer>9</integer><array><string>Many Christians allow things in their lives, not realizing that they have been redeemed from them and because of ignorance of God's Word, do not walk in total freedom. This series will set you free in every area of your life!</string><string>It is important to be able to differentiate between a curse in our lives and suffering tribulation for the Lord's sake.</string><string>The same exact blessing that was on Abraham's life is now on our lives because of Jesus Christ. Don't let ignorance or unbelief keep you from all that God has for you!</string><string>Well, I guess God wants me to be sick to teach me a lesson, ever heard someone say that? Well that does not work EVER in the light of God's Word. Gal 3:13 Christ HAS redeemed us...</string><string>As we age the world says that we get weaker mentally, but God's Word does not agree with this. Part of what we have been redeemed from is an unsound and unstable mind.</string><string>Get up early, work late, still nothing ever seems to go your way why? Becasue of the curse. The Good News is that we have been redeemed from loss and failure in our lives!</string> 
```

等等等等等等……**都在那里**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:09:34.493

此文件中有未转义的 & 符号（即 ' `Pt 1 & 2`'），这是受限制的。您应该在您的服务器上替换它们`&amp;`，或者将文件的内容下载到 NSString 然后替换`&`为`&amp;`：

```
NSString *error;
NSString *str = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://www.faithlifefellowship.us/iOS/sermons.plist"]
                                         encoding:NSUTF8StringEncoding
                                            error:&error];

str = [str stringByReplacingOccurrencesOfString:@" & " withString:@" &amp; "];
NSData *plistData = [str dataUsingEncoding:NSUTF8StringEncoding];

NSPropertyListFormat format;
NSDictionary *plist = [NSPropertyListSerialization propertyListFromData:plistData
                                                       mutabilityOption:NSPropertyListImmutable 
                                                                 format:&format 
                                                       errorDescription:&error]; 
```

另外，标签匹配存在很大问题。[您可以使用http://www.xmlvalidation.com](http://www.xmlvalidation.com)验证您的 plist

# c++ - 我可以使用 QSortFilterProxyModel 创建汇总/聚合模型吗？

> ID：14858629
> 
> 赞同：0
> 
> 时间：2013-02-13T16:49:06.937
> 
> 标签：c++, qt, qt4, aggregate-functions, qsortfilterproxymodel

我有一个[QStandardItemModel](http://doc-snapshot.qt-project.org/4.8/qstandarditemmodel.html)项目，其中每一行对应一个对象，每一列对应于该对象的一个​​属性。以下是使用学生 ID 名册的示例：

```
ID      Gender      Grade   GPA
5       Male        12      3.8
4       Female      11      3.9
8       Female      12      3.5
19      Male        9       2.1 
```

我的最终目标是让用户从下拉列表中选择一个列名，并让第二个表显示值的聚合。例如，如果用户从列表中选择成绩，第二个表将显示每个成绩的平均 GPA，如下所示：

```
ID      Gender      Grade   GPA
                    12      3.65
                    11      3.9
                    9       2.1 
```

或类似地按性别：

```
ID      Gender      Grade   GPA
        Male                2.95
        Female              3.70 
```

Qt 中是否有任何东西可以执行该功能？[QSortFilterProxyModel](http://doc-snapshot.qt-project.org/4.8/qsortfilterproxymodel.html)似乎在功能方面很接近，但据我所知，它只是剔除和排序项目，而不是总结它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:32:50.810

好吧，既然没有人回答这个问题，我认为答案是“不”。因此，我继承`QAbstractProxyModel`并实现了我自己的`AggregateProxyModel`.

# php - PHP格式化字符串以删除特殊字符颜色代码并添加适当的颜色

> ID：14858632
> 
> 赞同：1
> 
> 时间：2013-02-13T16:49:12.107
> 
> 标签：php, regex, string, colors, format

Minecraft 使用某些特殊字符在其客户端上用颜色格式化字符串，我想从字符串中删除这些颜色代码，但也用适当的颜色格式化字符串。颜色代码的示例是：“§1”和“§6”您可以在此处查看完整列表：http: [//www.minecraftwiki.net/wiki/Formatting_codes](http://www.minecraftwiki.net/wiki/Formatting_codes)

以下是来自客户端的原始字符串示例：“§8here is the §6message of the §8day”我需要删除“§6”颜色代码并用适当颜色的 span 标签包围文本。这是我到目前为止所拥有的，我无法弄清楚。

我希望这个结果作为一个字符串：

```
<span style='color:#55555;'>here is the </span><span style='color:#FFAA00;'> message of the</span><span style='color:#55555;'> day</span> 
```

我的功能：

```
function formatMOTD($motd) {
$result = array();
$previous;

$result = split("§1", $motd);
if (!empty($result)) {
    foreach ($result as $value) {
        $previous .= "<span style='color:#0000AA;'>" . substr($value, 1) . "</span>";
    }
}
$result = split("§8", $motd);
if (!empty($result)) {
    foreach ($result as $value) {
        $previous .= "<span style='color:#55555;'>" . substr($value, 1) . "</span>";
    }
}
$result = split("§6", $motd);
if (!empty($result)) {
    foreach ($result as $value) {
        $previous .= "<span style='color:#FFAA00;'>" . substr($value, 1) . "</span>";
    }
}

$motd = $previous;
return $motd;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:49:15.530

这不是那么优雅的解决方案，但它有效，更好的解决方案是使用正则表达式，但这对我来说更简单，所以享受吧。

```
 function spanParser($str, $htmlColor)
    {
        $str = "<span style='color:#" . $htmlColor .";'>" . $str . "</span>";
        return $str;
    }

    $exampleString = "§8here is the §6message of the §8day";
    $arrayOfChunks = explode('§', $exampleString);
    $formatedString = "";
    foreach($arrayOfChunks as $chunk)
    {
        switch($chunk[0])
        {
        case '6':
            $chunk = substr($chunk, 1);
            $formatedString = $formatedString . spanParser($chunk, "FFAA00");
            break;
        case '8':
            $chunk = substr($chunk, 1);
            $formatedString = $formatedString . spanParser($chunk, "55555");
            break;
        default:
            break;
        }
    }

    echo $formatedString;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:05:56.967

正则表达式的另一种解决方案：

```
$txt = "test §8here is the §6message of the §8day";
echo preg_replace_callback('/§(\d+)([^§]*)/s', 
    function($match)
    {
        $color = '';
        switch($match[1]) {
            case '1': 
                $color = '0000AA';
                break;
            case '6': 
                $color = 'FFAA00';
                break;
            case '8': 
                $color = '555555';
                break;
            default:
                break;
        }
        return "<span style='color:#" . $color .";'>" . $match[2] . "</span>";
    },
    $txt); 
```

* * *

UPD 适用于 PHP 5.3 和更新版本。如果您有旧版本，您可以使用 create_function() 或用户定义的函数，而不是 preg_replace_callback() 中的匿名函数。

# automation - 取决于对 SSE 指令的支持的条件生成

> ID：14858635
> 
> 赞同：1
> 
> 时间：2013-02-13T16:49:23.107
> 
> 标签：automation, makefile, sse

仅当运行 make 的机器（本机目标）支持 SSE 指令集时，我才想制作某些程序。假设它运行linux，

```
grep sse /proc/cpu_info | wc -l 
```

如果不支持 SSE 指令，则返回 0，否则返回 >0。但是我怎样才能在我的makefile中使用它来促进条件make呢？

我目前使用 GNU Make 3.81，在 linux 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:55:07.403

在传统的 GNU 用法中，您不会让`make`做这项工作，而是`configure`将其输出写入`Makefile`. 毕竟，您不想每次运行时都重新检查您的环境`make`——在最好的情况下，您浪费时间重新检查未更改的环境，而在最坏的情况下，您的构建会变得不一致。

也就是说，一个只做的解决方案看起来像：

```
HAVE_SSE=$(filter-out 0,$(shell grep sse /proc/cpu_info | wc -l))
CFLAGS+=$(if $(HAVE_SSE),-msse)

ifneq ($(HAVE_SSE),)
    sse-target
endif 
```

shell 函数扩展为 shell 命令的输出。这`filter-out`使得非 SSE 输出一个空字符串，而不是`0`因为这更容易条件化。然后，您可以使用所示的`if`函数对值设置条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:15:17.373

所以我自己想出了一个（工作！）解决方案，类似于 thiton 的建议：

```
SSE     := $(shell grep sse  /proc/cpuinfo)
INVALID := $(shell grep non-sense /proc/cpuinfo)

ifneq ($(INVALID),$(SSE))
sse_target
endif 
```

# java - Java：将值存储在二维数组中

> ID：14858638
> 
> 赞同：0
> 
> 时间：2013-02-13T16:49:28.350
> 
> 标签：java, arrays, multidimensional-array

我在将值存储在多维数组中时遇到问题。这个想法的主要概念是我有一个名为 user_decide 的数组列表，我将它转换为一个数组。所以，decision 数组看起来像 [1, 45, 656, 8, 97, 897]，但所有行的元素数量都不相同。然后，我拆分了这个替换 [,] 和空格，我想将每个值单独存储在一个二维数组中。所以，我用“，”分割它，并尝试将每个值存储在不同的位置。一切似乎都打印得很好，甚至 cut[j] 是我想要存储的，但我得到了一个 java.lang.NullPointerException，我没有得到。count 变量其实就是 count = user_decide.size()

```
String [] decide = user_decide.toArray(new String[user_decide.size()]);
for (int i = 0; i < count; i ++){
   decide[i] =
      decide[i].replaceAll("\\s", "").replaceAll("\\[","").replaceAll("\\]", "");
}
String [][] data1 = new String[count][];
for (int i = 0; i < count; i++){
   String [] cut = decide[i].split("\\,");
   for (int j = 0; j < cut.length; j++){
      System.out.println(cut[j]);
      data1[i][j] = cut[j];
   }
} 
```

另一个问题是为什么我不能将它存储在 Int [][] 数组中？有没有办法做到这一点？

十分感谢。

** 编辑 **

接受问题后，我刚刚对我的答案进行了编辑。我正在尝试将其存储在 2D int 数组中。

```
String [][] data1 = new String[user_decide.size()][];
int [][] data = new int [user_decide.size()][];

for (int i = 0; i < user_decide.size(); i++){
    data1[i] = decide[i].split("\\,");
    for (int j = 0; j < data1[i].length; j++) {
        data[i] = new int [data1[i].length]; 
        data[i][j] = Integer.parseInt(data1[i][j]);
        System.out.println(data1[i][j]);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:51:31.937

在 java 中，您还需要 allocate `data[i]`，然后再复制内容：

```
for (int i = 0; i < count; i++){
  data1[i] = new String[cut.length];
  String [] cut = decide[i].split("\\,");
    for (int j = 0; j < cut.length; j++){
      System.out.println(cut[j]);
      data1[i][j] = cut[j];
    }
} 
```

复制内容前：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T16:55:21.163

Ivaylo Strandjev 的回答显示了您的问题的原因。但是有一个更简单的解决方案：

```
String [][] data1 = new String[count][];
for (int i = 0; i < count; i++){
  data1[i] = decide[i].split("\\,");
  System.out.println(Arrays.toString(data1[i]));
} 
```

此外，您不需要转义逗号。

**编辑**

看到你的编辑。有一个很大的错误，请参阅我在您的代码中的评论：

```
String [][] data1 = new String[user_decide.size()][];
int [][] data = new int [user_decide.size()][];

for (int i = 0; i < user_decide.size(); i++){
    data1[i] = decide[i].split("\\,");
    for (int j = 0; j < data1[i].length; j++) {
        data[i] = new int [data1[i].length]; // This line has to be prior to the
        // inner loop, or else you'll overwrite everything but the last number.
        data[i][j] = Integer.parseInt(data1[i][j]);
        System.out.println(data1[i][j]);
    }
} 
```

如果你想要的只是`int[]`，这就是我会做的：

```
int [][] data = new int [user_decide.size()][];

for (int i = 0; i < user_decide.size(); i++){
    String[] temp = decide[i].split(",");
    data[i] = new int [temp.length];
    for (int j = 0; j < temp.length; j++){
        data[i][j] = Integer.parseInt(temp[j]);
        System.out.println(data1[i][j]);
    }
} 
```

可能有更好的方法，但我不知道你为什么在循环中使用`user_decide.size()`（集合）作为条件和`decide[i]`（数组）。我没有充分的理由考虑混合它，因为它可能会导致错误。

# c - 为旧系统编写一个相对较大的线程应用程序

> ID：14858640
> 
> 赞同：2
> 
> 时间：2013-02-13T16:49:33.743
> 
> 标签：c, windows, multithreading

今天我的老板和我正在讨论我写的一些代码。我的代码从给定的 HTTP/HTTPS 链接下载 3 个文件。我进行了多线程下载，以便所有 3 个文件在 3 个单独的线程中同时下载。在这次讨论中，我的老板告诉我，代码将交付给最有可能运行旧硬件和软件的人（我说的是 Windows 2000）。

在此之前，我从未考虑过线程应用程序如何在旧硬件上扩展。我意识到如果 CPU 只有 1 个核心，线程是无用的，甚至可能会降低性能。我一直想知道这个下载任务是否是 I/O 操作。意思是，如果一个 API 在等待来自 HTTP/HTTPS 服务器的信息时被阻塞，是否会同时调度另一个想要进行计算的线程？较旧的操作系统会进行这样的调度吗？

他说的另一件事是：由于代码将在旧机器上运行，我的应用程序不应该占用 CPU。他说`Sleep()`在 CPU 密集型任务之后使用调用来给其他程序一些喘息的空间。现在我总是觉得`Sleep()`在任何程序中使用都很糟糕。我错了吗？什么时候使用`Sleep()`合理？

感谢您的关注！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T17:34:34.550

> 我一直想知道这个下载任务是否是 I/O 操作。意思是，如果一个 API 在等待来自 HTTP/HTTPS 服务器的信息时被阻塞，是否会同时调度另一个想要进行计算的线程？较旧的操作系统会进行这样的调度吗？

是的，他们这样做。这就是阻塞 IO 的笑话。线程被挂起并进行其他计算（线程），直到有事件唤醒被阻塞的线程。这就是为什么即使对于单核机器也将其拆分为线程而不是在单个线程中自己在下载之间进行一些糟糕的人工调度是完全有意义的。

当然，您的下载在带宽方面会相互影响，因此线程不会帮助加快下载速度:-)

> 他说的另一件事是：由于代码将在旧机器上运行，我的应用程序不应该占用 CPU。他说，在 CPU 密集型任务之后使用 Sleep() 调用可以让其他程序有一些喘息的空间。

实际上在任务完成后使用睡眠在这里无济于事。在进行计算之前进行一定时间的计算（进行时间切片）后进行睡眠可能会有所帮助。但这仅适用于协作系统（例如 Windows 3.11）。这对于调度程序使用时间片将计算时间分配给线程的抢占式系统不起作用。在这里考虑降低 CPU 密集型任务的优先级以给予其他任务优先级会更重要......

> 现在我总觉得在任何程序中使用 Sleep() 都很糟糕。我错了吗？什么时候使用 Sleep() 是合理的？

这真的取决于你在做什么。如果您实施某种忙于等待设置的某个标志，该标志可能在几秒钟后设置，最好在休眠一段时间后重新检查它是否设置，以便放弃您预定的时间片，而不是仅仅消耗 CPU 功率检查从未设置的标志。

在现代系统中，在计算中引入睡眠是没有意义的，因为它只会减慢您的计算速度。

调度取决于操作系统的调度程序。他是拥有“大局观”的人。在我看来，每一种“做得更好”的方法都只在特定应用程序的范围内有效，在这个应用程序的范围内，您可以概览某些对调度程序来说并不明显的关系。

附录：我做了一些研究，发现 Windows 支持从[Windows 95](http://support.microsoft.com/kb/117567)开始的抢占式多任务处理。Windows NT 系列（Windows 2000 所属的）始终支持抢先式多任务处理。

# json - 如何在 servicestack json 序列化程序中省略仅获取属性？

> ID：14858641
> 
> 赞同：30
> 
> 时间：2013-02-13T16:49:34.573
> 
> 标签：json, properties, servicestack

我有一个对象，我正在使用`ToJson<>()`ServiceStack.Text 命名空间中的方法对其进行反序列化。

如何`GET`在序列化过程中省略所有唯一的属性？是否有任何属性`[Ignore]`可以用来装饰我的属性，以便可以省略它们？

谢谢

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-13T18:00:38.993

[ServiceStack 的 Text 序列化](https://github.com/ServiceStack/ServiceStack.Text)程序遵循 .NET 的 DataContract 序列化程序行为，这意味着您可以使用 opt-out`[IgnoreDataMember]`属性忽略数据成员

```
public class Poco 
{
    public int Id { get; set; }

    public string Name { get; set; }

    [IgnoreDataMember]
    public string IsIgnored { get; set; }
} 
```

一个可选的替代方法是装饰你想要序列化的每个属性`[DataMember]`。其余属性未序列化，例如：

```
[DataContract]
public class Poco 
{
    [DataMember]
    public int Id { get; set; }

    [DataMember]
    public string Name { get; set; }

    public string IsIgnored { get; set; }
} 
```

最后还有一个不需要属性的非侵入式选项，例如：

```
JsConfig<Poco>.ExcludePropertyNames = new [] { "IsIgnored" }; 
```

## 动态指定应该序列化的属性

ServiceStack 的序列化器还支持动态控制序列化，通过提供常规命名的`ShouldSerialize({PropertyName})`方法来指示属性是否应该序列化，例如：

```
public class Poco 
{
    public int Id { get; set; }

    public string Name { get; set; }

    public string IsIgnored { get; set; }

    public bool? ShouldSerialize(string fieldName)
    {
        return fieldName == "IsIgnored";
    }
} 
```

[ConditionalSerializationTests.cs](https://github.com/ServiceStack/ServiceStack.Text/blob/master/tests/ServiceStack.Text.Tests/JsonTests/ConditionalSerializationTests.cs)中的更多示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T19:25:18.063

对于可为空的成员，您还可以在序列化之前将其设置为空。

如果您想创建一个可重复用于多个 API 调用的视图/api 模型，这将特别有用。服务可以在将其设置在响应对象上之前对其进行修改。

例子：

```
 public SignInPostResponse Post(SignInPost request)
    {
        UserAuthentication auth = _userService.SignIn(request.Domain, true, request.Username, request.Password);

        // Map domain model ojbect to API model object. These classes are used with several API calls.
        var webAuth = Map<WebUserAuthentication>(auth);

        // Exmaple: Clear a property that I don't want to return for this API call... for whatever reason.
        webAuth.AuthenticationType = null;

        var response = new SignInPostResponse { Results = webAuth };
        return response;
    } 
```

我确实希望有一种方法可以以每个端点的方式动态控制所有成员（包括不可为空的）的序列化。

# php - 如何使用 Symfony ACL 过滤我的 Doctrine 查询

> ID：14858642
> 
> 赞同：13
> 
> 时间：2013-02-13T16:49:39.440
> 
> 标签：php, symfony, doctrine-orm, doctrine, acl

Symfony ACL 允许我授予对实体的访问权限，然后检查它：

```
if (false === $securityContext->isGranted('EDIT', $comment)) {
    throw new AccessDeniedException();
} 
```

但是，如果我在数据库中有数千个实体并且用户只能访问其中的 10 个，我不想将所有实体加载到内存中并对其进行水合。

如何在仅过滤用户有权访问的实体（在 SQL 级别）时执行简单的“SELECT * FROM X”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-23T14:13:29.883

那么它就是：**这是不可能的**。

去年，我一直在研究一种替代 ACL 系统，该系统允许直接在数据库查询中进行过滤。

我公司最近同意开源，所以这里是： http: [//myclabs.github.io/ACL/](http://myclabs.github.io/ACL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-17T22:38:09.337

正如@gregor 在之前的讨论中指出的那样，

在您的第一个查询中，获取用户有权访问的所有 object_identity_ids（针对特定实体/类 X）的列表（带有自定义查询）。

然后，在查询实体/类 X 的对象列表时，**将“IN (object_identity_ids)”添加到您的查询**中。

Matthieu，我对回答更多的猜想并不满意（因为我的猜想并没有给谈话增加任何有价值的东西）。所以**我对这种方法做了一些基准测试**（Digital Ocean 5$/mo VPS）。

[![基准](../Images/ab0c7859e9e25916cd52f1acbc95e945.png)](https://i.stack.imgur.com/kOfZp.png)

正如预期的那样，使用 IN 数组方法时，表大小并不重要。但是大数组确实会让事情失控。

那么，`Join approach`与`IN array approach`?

当数组大小很大时，JOIN 确实更好。但是，这是假设我们不应该考虑表格大小。事实证明，**实际上 IN 数组更快**- 除非有一个大的对象表并且 acl 条目几乎涵盖了每个对象（请参阅链接的问题）。

我在一个单独的问题上扩展了我的推理。请参阅[使用 Symfony 的 ACL 时，使用 JOIN 查询还是 IN 数组查询更好？](https://stackoverflow.com/questions/38426584/when-using-symfonys-acl-is-it-better-to-use-a-join-query-or-an-in-array-query)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T08:26:56.667

你可以看看[Doctrine filters](http://docs.doctrine-project.org/en/latest/reference/filters.html)。这样您就可以扩展所有查询。我还没有这样做，并且记录了一些限制。但也许它对你有帮助。您将在[此处](http://symfony.com/doc/master/cookbook/security/acl_advanced.html)找到 ACL 数据库表的描述。

**更新**

每个过滤器都将返回一个字符串，所有这些字符串都将添加到 SQL 查询中，如下所示：

```
SELECT ... FROM ... WHERE ... AND (<result of filter 1> AND <result of filter 2> ...) 
```

表别名也被传递给过滤器方法。所以我认为你可以在这里添加子查询来过滤你的实体。

# spring - 从 Spring 中更改 hibernate.connection.url

> ID：14858643
> 
> 赞同：6
> 
> 时间：2013-02-13T16:49:40.720
> 
> 标签：spring, hibernate, hsqldb

我将 Hibernate 与 Spring 结合使用。作为数据库，我目前正在使用 HSQL，它将其数据存储在一个文件中（如 SQLite）。HSQL 文件的路径当前硬编码在 persistence.xml 中。如何在运行时访问和更改此值，以便用户可以从/向任意 HSQL 文件加载和保存？

**持久性.xml：**

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
                                 http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
             version="1.0">

    <persistence-unit name="something-unit">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>

        <properties>
            <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver" />
            <property name="hibernate.connection.url" value="jdbc:hsqldb:file:~/something-db/somethingdb" />
            <property name="hibernate.connection.username" value="sa" />
            <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect" />
            <property name="hibernate.hbm2ddl.auto" value="update" />
        </properties>
    </persistence-unit>

</persistence> 
```

春天**应用上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:data="http://www.springframework.org/schema/data/jpa"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="
               http://www.springframework.org/schema/beans
               http://www.springframework.org/schema/beans/spring-beans.xsd
               http://www.springframework.org/schema/context
               http://www.springframework.org/schema/context/spring-context-2.5.xsd
               http://www.springframework.org/schema/data/jpa
               http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
               http://www.springframework.org/schema/tx
               http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <!-- Database Setup -->

    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="something-unit" />
    </bean>

    <data:repositories base-package="com.something.playlist"/>

    <!-- Transaction Setup -->

    <tx:annotation-driven/>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory"/>
    </bean>

</beans> 
```

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:25:43.870

您可以指定一个 JNDI 数据源并将其传递给 Hibernate。或者您可以通过实现接口 org.hibernate.connection.ConnectionProvider 来定义自己的插件策略来获取 JDBC 连接

有关更多提示，请参阅：[http ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html)

**编辑 2/16：** StackOverflow 上有一个关于创建自定义 ConnectionProvider 的示例：[如何在创建 Hibernate SessionFactory 时设置数据源？](https://stackoverflow.com/questions/4406935/how-can-i-set-datasource-when-im-creating-hibernate-sessionfactory)

如果您要即时更改数据源，而不是在启动时更改，则必须重新启动 Hibernate 会话工厂。要正确执行此操作，您必须确保在重新启动时没有任何事务在其中运行。以下问题/答案将帮助您：[Hibernate Sessionfactory restart | 春天](https://stackoverflow.com/questions/13987720/hibernate-sessionfactory-restart-spring?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T22:07:57.323

一种常用的策略是在一个或多个 *.properties 文件中定义所有运行时配置，并使用 spring 的 PropertyPlaceholderConfigurer 加载值并替换 applicationContext.xml 中的占位符，在此处阅读更多信息：[Bestways to deal with properties values in XML file in Spring、Maven 和 Eclipse](https://stackoverflow.com/questions/13297157/best-ways-to-deal-with-properties-values-in-xml-file-in-spring-maven-and-eclips/13297686#13297686)。

应用程序属性：

```
# Dadabase connection settings:
hibernate.connection.driver_class=org.hsqldb.jdbcDriver
hibernate.connection.url=jdbc:hsqldb:file:~/something-db/somethingdb
hibernate.connection.username=sa
hibernate.connection.password=changeit
hibernate.dialect=org.hibernate.dialect.HSQLDialect
hbm2ddl.auto=update
... ... 
```

applicationContext-dataStore.xml：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="locations">
    <list>
      <!-- Default location inside war file -->
      <value>classpath:app.properties</value>
      <!-- Environment specific location, a fixed path on deployment server -->
      <value>file:///opt/my-app/conf/app.properties</value>
    </list>
  </property>
  <property name="ignoreResourceNotFound" value="true"/>
</bean>

... ...

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
  <property name="driverClassName" value="${hibernate.connection.driver_class}" />
  <property name="url" value="${hibernate.connection.url}" />
  <property name="username" value="${hibernate.connection.username}" />
  <property name="password" value="${hibernate.connection.password}" />
</bean> 
```

这里的一个问题是PropertyPlaceholderConfigurer 不解析persistence.xml，解决方案是将所有hibernate 配置移动到Spring 的applicationContext.xml 中，因为没有必要在persistence.xml 中设置它们。在此处阅读更多内容：[在 spring-context.xml 和 persistence.xml 中加载 .properties](https://stackoverflow.com/questions/1834954/loading-properties-in-spring-context-xml-and-persistence-xml/3979832#3979832)。

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
    version="1.0">
  <persistence-unit name="JPAService" transaction-type="RESOURCE_LOCAL"/>
</persistence> 
```

applicationContext-datSource.xml：

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
  <property name="driverClassName" value="${hibernate.connection.driver_class}"/>
  <property name="url" value="${hibernate.connection.url}"/>
  <property name="username" value="${hibernate.connection.username}"/>
  <property name="password" value="${hibernate.connection.password}"/>
</bean>

... ...

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"> 
  <property name="persistenceXmlLocation" value="classpath:./META-INF/persistence.xml"/>
  <property name="persistenceUnitName" value="JPAService"/>
  <property name="dataSource" ref="dataSource"/>

  <property name="jpaVendorAdapter"> 
      <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"> 
          <property name="databasePlatform" value="${hibernate.dialect}"/> 
          <property name="showSql" value="true" /> 
          <property name="generateDdl" value="true"/>
      </bean> 
  </property>
  <property name="jpaProperties">
    <!-- set extra properties here, e.g. for Hibernate: -->
    <props>
      <prop key="hibernate.hbm2ddl.auto">${hbm2ddl.auto}</prop>
    </props>
  </property>
</bean> 
```

请注意，每次更改 /opt/my-app/conf/app.properties 中的配置时都需要重新启动 Web 应用程序，以使更改生效。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T14:48:11.807

如果您希望通过 JPA 抽象使用休眠，您可以编写您的代码或服务以使用 javax.persistence.EntityManagerFactory。自动装配其中之一并调用 createEntityManager(Map map); 您可以在地图中提供数据源。您可以使用自己的实现包装实体管理器，该实现将参数从线程本地拉出以创建数据源。

编辑：误读上下文并看到您正在使用 EntityManagerFactory。在这种情况下，只需阅读最后一部分，您使用委托从线程本地创建正确的数据源来包装工厂。

# c++ - 如何枚举 vfs c 或 c++ 目录中的所有文件？

> ID：14858646
> 
> 赞同：2
> 
> 时间：2013-02-13T16:49:46.923
> 
> 标签：c++, c, linux, unix, vfs

我需要枚举文件夹中的所有文件，然后导航到子文件夹并执行相同操作（递归？当然）。

理想情况下，该算法应该在 linux 和 macos 上以相同的方式工作

免责声明：我在 POSIX 上提出了类似的问题：我现在知道 VFS，但我对使用 VFS 枚举目录感到困惑。有什么建议吗？我应该打开一个目录作为文件吗？唯一的方法是使用像 qt 这样的库跨平台？

更新：所以没有**VFS**方式来处理目录？“* *V* *irtual * *F* *ile * *S* *ystem 提供了用于访问各种不同文件系统的单一 API”，但无法枚举目录。

“readdir”等解决方案可以解决任何类型的 *NIX 问题吗？在 Windows 上没有什么比巨大的 MingW 库更好的了？或仅在某些胜利上工作的部分实现，例如： [https ://github.com/xbmc/xbmc/blob/master/tools/TexturePacker/Win32/dirent.c](https://github.com/xbmc/xbmc/blob/master/tools/TexturePacker/Win32/dirent.c)

BOOST 似乎是一个非常酷的解决方案，但它既复杂又学术。无论如何谢谢

**最后更新**：
我找到了更多文档，现在一切都更加清晰了。 **这个问题是重复的！** opendir() 和 readdir() 是 linux 上枚举和浏览目录的解决方案。如我的示例所示，将它们映射到 Windows 上非常容易（但是不相关的 windowz fs 使一切变得奇怪），并且 ntfw() 更加有用。

**VFS**（虚拟文件切换）是一个内核特性，它通过为文件系统操作创建一个抽象层来解决这个问题。此处关闭文档：[linux编程接口](http://my.safaribooksonline.com/book/programming/linux/9781593272203/file-systems/the_virtual_file_system_open_parenthesis)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:52:47.643

你想看看`nftw`。这是一个示例，它只是递归地打印 C 中目录的内容（未经测试）：

```
#define _XOPEN_SOURCE 500
#include <stdlib.h>
#include <unistd.h>
#include <stdio.h>
#include <ftw.h>

int
print( const char *path, const struct stat *s, int flag, struct FTW *f )
{
    puts( path );
    return 0;
}

int
main( int argc, char **argv )
{
    while( *++argv ) {
        if( nftw( *argv, print, 1024, FTW_DEPTH )) {
            perror( *argv );
            return EXIT_FAILURE;
        }
    }
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T17:39:27.373

这是我使用[Boost.Filesystem](http://www.boost.org/doc/libs/release/libs/filesystem/doc/index.htm)的方法：

```
#include "boost/filesystem.hpp"
#include <iostream>

int main () {
  for ( boost::filesystem::recursive_directory_iterator end, dir("./");
    dir != end; ++dir ) {
    // std::cout << *dir << "\n";  // full path
    std::cout << dir->path().filename() << "\n"; // just last bit
  }
} 
```

或者，更简洁地说：

```
#include "boost/filesystem.hpp"
#include <iostream>
#include <iterator>
#include <algorithm>

int main () {

  std::copy(
    boost::filesystem::recursive_directory_iterator("./"),
    boost::filesystem::recursive_directory_iterator(),
    std::ostream_iterator<boost::filesystem::directory_entry>(std::cout, "\n"));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T17:57:40.857

Unix/Linux/Windows 都有[readdir()](http://linux.die.net/man/3/readdir)的版本。您可以使用它来获取文件系统对文件的了解。

# python - numpy：使用运算符 - 使用包含 None 的数组

> ID：14858647
> 
> 赞同：6
> 
> 时间：2013-02-13T16:49:47.053
> 
> 标签：python, numpy, missing-data

我有一个数字列表，我将其放入一个 numpy 数组中：

```
>>> import numpy as np
>>> v=np.array([10.0, 11.0]) 
```

然后我想从数组中的每个值中减去一个数字。可以使用 numpy 数组来完成：

```
>>> print v - 1.0
[  9\.  10.] 
```

不幸的是，我的数据经常包含缺失值，由`None`. 对于这种数据，我收到此错误：

```
>>> v=np.array([10.0, 11.0, None])
>>> print v - 1.0
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for -: 'NoneType' and 'float' 
```

对于上面的例子，我想得到的是：

```
 [  9\.  10\.  None] 
```

如何以简单有效的方式实现它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T16:53:14.020

我的建议是使用掩码数组：

```
v = np.ma.array([10., 11, 0],mask=[0, 0, 1])
print v - 10
>>> [0.0 1.0 --] 
```

或 NaN

```
v = np.array([10.,11,np.nan])
print v - 10
>>> [  0\.   1\.  nan] 
```

我实际上更喜欢 NaN 作为缺失数据指标。

# wpf - RadBusyIndi cator 未从 ViewModel 显示 PRISM/MEF/WPF

> ID：14858652
> 
> 赞同：2
> 
> 时间：2013-02-13T16:50:03.950
> 
> 标签：wpf, mvvm, prism, backgroundworker, busyindicator

我正在为我的 WPF 应用程序使用 MVVM/PRISM/MEF。它有一个带有多条记录的 DataGrid，当双击一行时，一个单独的视图被添加到上面有多个控件的区域，新屏幕的控件初始化大约需要 10 秒，这就是为什么我想在那期间显示 RadBusyIndi​​cator时间。

遵循 XAML

```
<!-- This is Main View -->
<!-- Module: MainModule, ViewModel: MainViewViewModel -->
<telerik:RadBusyIndicator IsBusy="{Binding IsBusy}" BusyContent="{Binding BusyContent}">
<!-- All PRISM regions are here -->
</telerik:RadBusyIndicator> 
```

它的视图模型是

```
class MainViewViewModel : ViewModelBase
    {
        ImportingConstructor]
        public MainViewViewModel(IEventAggregator eventAggregator, IRegionManager regionManager, IServiceLocator serviceLocator)
            :base(eventAggregator, regionManager, serviceLocator)
        {
            eventAggregator.GetEvent<BusyStateChangedEvent>().Subscribe(OnBusyStateChanged,ThreadOption.BackgroundThread);
        }

        #region BusyStateChanged

        private void OnBusyStateChanged(bool newState)
        {
            IsBusy = newState;
        }

        #endregion
} 
```

而在其他视图中双击DataGrid行时调用ViewModelBase函数，如下

```
public class ViewModelBase
{
        private NavigationItem global_navItem = null;

        public virtual void OnNavigationItemChanged(NavigationItem item)
        {
            changeNav = true;
            global_navItem = item;

            //Firing event to change the state
            EventAggregator.GetEvent<BusyStateChangedEvent>().Publish(true);

            //Using BackgroundWorker, but its not showing any Busy Indicator as well
            var bw = new BackgroundWorker();
            bw.DoWork += bw_DoWork;
            bw.RunWorkerCompleted += bw_RunWorkerCompleted;

            bw.RunWorkerAsync();
        }

        void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            //Setting busy indicator to false
            EventAggregator.GetEvent<BusyStateChangedEvent>().Publish(false);
        }

        void bw_DoWork(object sender, DoWorkEventArgs e)
        {
            //DisplayView function is taking too long
            if (global_navItem != null) this.DisplayView(global_navItem);
        }
}

public void DisplayView(NavigationItem item)
        {
                    try
                    {
                        //This call is taking long as it initializes the View
                        MyCustomeUserControl view = this.ServiceLocator.GetInstance<MyCustomeUserControl>(item.viewName);

                        view.Region = this.Region;
                    }catch(Exception e)
                    {
                    }                   
        } 
```

事件被正确触发并且视图显示正确，但我的问题是忙碌指示器根本没有显示，当我双击 DataGrid 行时，GUI 变得无响应，并且在一段时间后出现了新视图。我怀疑这是 GUI 线程繁忙的问题，但我能做些什么来避免这种情况，我已经使用过`BackgroudWorker`？

**编辑**

1- 我正在为 IsBusy 属性引发 PropertyChanged 事件。我已经在事件订阅中尝试了 Thread 的所有选项。即和。`Thread.BackgroundThread`_ 但没有变化。`Thread.UIThread``Thread.PublisherThread`

2-我已经在 中进行`Thread.Sleep`了测试，并且它的显示正确，所以这意味着 GUI 控件正在 GUI 线程中初始化，无论我是否为它创建了一个。`DisplayView``bw_DoWork``RadBusyIndicator``BackgroundWorker`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:19:26.113

如果您使用`Thread.Sleep(5000)`而不是，指示符会出现`this.DisplayView(global_navItem)`吗？

我假设显示视图将使用 UI 线程，无论您使用`BackgroundWorker`与否，这都会阻塞 UI。

**编辑：**

由于您的 UI 加载操作似乎阻塞了 UI 线程，因此您的 BusyIndi​​cator，您可以尝试将其中一个托管在不同的线程中。[本文](http://blogs.msdn.com/b/dwayneneed/archive/2007/04/26/multithreaded-ui-hostvisual.aspx)解释了一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T07:34:18.820

最后我找到了解决方案。可以查看以下帖子以供参考。我使用本文中讨论的方法实现了一个带有 RadBusyIndi​​cator 的子无铬窗口。

[在 WPF 中创建多个 UI 线程](http://eprystupa.wordpress.com/2008/07/28/running-wpf-application-with-multiple-ui-threads/)

# mysql - 实体框架代码优先、MySQL 和 unicode 支持

> ID：14858660
> 
> 赞同：6
> 
> 时间：2013-02-13T16:50:18.503
> 
> 标签：mysql, entity-framework

我正在使用 EF Code-First (EFCF) 和 MySQL 来使用迁移创建我的数据库。我遇到的问题是字符列。

我不是 MySQL 专家，但根据我一直在阅读的内容，在 MySQL 中，您至少可以通过两种方式在表中支持 Unicode：

1.  将其设为整个表的默认值：`CREATE TABLE mytable (...) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE utf8_unicode_ci;`

2.  使每个特定列支持 Unicode：（`CREATE TABLE myTable (col1 VARCHAR(10) CHARSET utf8, OtherColNotUnicode VARCHAR(5), ...);`注意 MySQL 没有 NVARCHAR）

事实证明，EFCF Migrations 默认情况下创建不支持 Unicode 的表和列，我无法找到一种方法来覆盖它或在我的模型中注释属性，基本上迫使它使用选项*1*或*2*。

我该如何纠正这个问题？最好我想逐列设置它，但如有必要，我可能会使用整个表默认值。

如果它有任何帮助，我正在使用 EF 5.0、MySql.Data 和 MySql.Data.Entity v 6.6.4.0。

# jquery - InAppBrowser 不显示键盘

> ID：14858662
> 
> 赞同：0
> 
> 时间：2013-02-13T16:50:19.753
> 
> 标签：jquery, jquery-mobile, cordova, phonegap-build

好的，

所以我想我有一个蹩脚的问题，但 Cordova 2.3 InAppBrowser 是否允许用户更改 URL？当我设置选项“location=yes”时，我在我的应用程序中看到了 IOS 和 Android 的地址栏，但是当我点击它时，没有键盘可以更改 URL。

我发现了这个： [InAppBrowser 不显示键盘 [Cordova 2.3.0]](https://stackoverflow.com/questions/14303397/inappbrowser-not-showing-keyboard-cordova-2-3-0)

我认为他也有同样的问题。我错过了什么吗？

我正在使用 Phonegap-Build、Cordova 2.3、jQuery 1.9.1、Jquery Mobile 1.3 RC1

谢谢！

~红色

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T06:37:59.130

在 PhoneGap Google Group 中找到了答案。没有。据那里的管理员说：

> “不，InAppBrowser 仅设计为查看器。”

[https://groups.google.com/forum/?hl=en%3Fhl%3Den&fromgroups=#!topic/phonegap/Il6wQ_qNm70](https://groups.google.com/forum/?hl=en%3Fhl%3Den&fromgroups=#!topic/phonegap/Il6wQ_qNm70)

# math - crm 使用工作流检查是否创建了新记录

> ID：14858663
> 
> 赞同：0
> 
> 时间：2013-02-13T16:50:23.330
> 
> 标签：math, sharepoint, workflow, crm

一天结束了，我失去了所有的脑细胞。办公室里典型的一天啊！切入点，我们有将所有数据推送到 CRM 的 SSIS 流程（2011 年，内部部署）。

将数据推送到 CRM 的第三方服务有时会失败，我们必须手动将数据推送到他们的系统。但是，我们发现没有创建新记录的唯一方法是有人关闭！

**这是一个问题：** 我认为解决方案很简单。创建一个工作流，检查是否已创建新记录以及是否发送电子邮件。（不想做报告，因为我不想运行它来检查）在 SharePoint 中，我能够创建工作流，我可以在其中进行数学检查。但在 CRM 中我不能。

我只想检查 count(createdOn) = 0，发送电子邮件。

由于我是 CRM 新手，我不确定我是否遗漏了工作流程中的任何内容。我知道我可以检查值是否等于另一个值，但是您如何检查总记录是否大于或等于值？当然，CRM 可以让您做到这一点，而无需每天手动检查！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:23:06.143

好吧，您可以将 CRM 工作流设置为在创建时运行，但要检查记录总数

您将需要添加“自定义工作流活动”，它允许您在

工作流，在工作流活动中，您将编写获取总数的代码

记录。

# xslt - XSLT 1.0 版需要拉出字符串的最后一个单词

> ID：14858666
> 
> 赞同：1
> 
> 时间：2013-02-13T16:50:28.627
> 
> 标签：xslt, xpath

我需要从以下字符串中提取最后一个单词以使用姓氏：

```
<CUSTOMER_x0020_NAME>Mr Tim Cookson</CUSTOMER_x0020_NAME> 
```

所以我只需要使用 XSLT 拉出“Cookson”，我该怎么做？尝试了几种与 substring-after 的关系，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:51:21.970

**这是一个非递归解决方案，它适用于任何非字母字符的单词分隔符**（但最后一个单词之后的字符，如果有的话，应该只是空格）：

```
<xsl:stylesheet version="1.0" 
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:param name="pLower" select=
  "'abcdefghijklmnopqrstuvwxyz'"/>

 <xsl:param name="pUpper" select=
  "'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>

 <xsl:variable name="vAlpha" select="concat($pUpper, $pLower)"/>

 <xsl:template match="text()">
  <xsl:variable name="vText" select="normalize-space()"/>
  <xsl:variable name="vLength" select="string-length($vText)"/>
  <xsl:variable name="vPunct" select="translate(., $vAlpha, '')"/>

  <xsl:for-each select=
      "document('')//node()
      |document('')//@*
      |document('')//namespace::*">
   <xsl:variable name="vPos" select="position()"/>
   <xsl:variable name="vRemaining" 
                 select="substring($vText, $vPos)"/>

   <xsl:if test=
    "contains($vPunct, substring($vRemaining,1,1))
    and
     $vLength -$vPos 
       = string-length(translate($vRemaining, $vPunct, ''))
    ">
     <xsl:value-of select="substring($vRemaining,2)"/>
   </xsl:if>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<CUSTOMER_x0020_NAME>Mr Tim Cookson</CUSTOMER_x0020_NAME> 
```

**产生了想要的正确结果：**

```
Cookson 
```

**在此 XML 文档上应用相同的转换时**：

```
<CUSTOMER_x0020_NAME>Mr. Tim Berners-Lee</CUSTOMER_x0020_NAME> 
```

**再次产生正确的结果：**

```
Lee 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:29:49.563

您可以使用此递归模板来获取值的最后一个单词：

```
 <xsl:template name="GetLastWord">
    <xsl:param name="value" />
    <xsl:variable name="normalized" select="normalize-space($value)" />

    <xsl:choose>
      <xsl:when test="contains($normalized, ' ')">
        <xsl:call-template name="GetLastWord">
          <xsl:with-param name="value" select="substring-after($normalized, ' ')" />
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$normalized"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template> 
```

您可以将此模板添加到您的 XSLT，然后简单地调用它，如下所示：

```
 <xsl:call-template name="GetLastWord">
    <xsl:with-param name="value" select="CUSTOMER_x0020_NAME" />
  </xsl:call-template> 
```

# scala - 如何在 Scala 中泛化类型参数

> ID：14858681
> 
> 赞同：1
> 
> 时间：2013-02-13T16:51:20.527
> 
> 标签：scala, types

我有一个我正在调用 groupBy 的 Pairs 列表。但是， groupBy 在值中包含该对的两个部分，我只想包含该对中未“分组依据”的部分。

```
List(1->2, 1->3, 2->3) groupBy (_._1) 
```

> scala.collection.immutable.Map[Int,List[(Int, Int)]] = Map(1 -> List((1,2), (1,3)), 2 -> List((2,3) ))

我写了一个方法来映射 Map 条目并删除重复键：

```
def removeDupeKeyFromPair[A, B](m: Map[A, List[Pair[A, B]]]): Map[A, List[B]] =
  m map { case(k, vlist) => k -> { vlist map { case(dupe, b) => b } } } 
```

但是，我想将其概括`List[Pair[A,B]]`为`C[Pair[A,B]]`where `C<:Iterable`，所以我尝试了

```
def removeDupeKeyFromPair[A, B, C[Pair[A, B]] <: Iterable[Pair[A, B]]]
                         (m: Map[A, C[Pair[A, B]]]): Map[A, C[B]] 
```

但这产生了

> 错误：B 没有类型参数，预期：两个

如何正确表达这些类型？

**编辑：** 这对我来说是一个学习练习，所以我对如何正确表达给定类型更感兴趣，而不是寻找另一个解决方案。尽管了解其他解决方案也很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:57:52.410

如果您只想更改`Map`值，可以使用`mapValues`：

```
scala> List(1->2, 1->3, 2->3) groupBy (_._1) mapValues (_.map(_._2))
res2: scala.collection.immutable.Map[Int,List[Int]] = Map(2 -> List(3), 1 -> List(2, 3)) 
```

或者以更易读的方式：

```
scala> List(1->2, 1->3, 2->3) groupBy (_._1) mapValues (lst => lst.map { case(_ ,b) => b })
res3: scala.collection.immutable.Map[Int,List[Int]] = Map(2 -> List(3), 1 -> List(2, 3)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:32:32.920

为了使这些更通用，您可以使用专门的类型类。用于 和 等方法的`map`方法`flatMap`是`FilterMonadic`。

`FilterMonadic`将其 map 方法指定为使用`CanBuildFrom`. 大多数内置集合类都有其中一个可用。然后你可以像这样使用它：

```
def removeDupeKeyFromPair[A, B, 
  // Define a type C that has type arguments and extends FilterMonadic
  C[X] <: FilterMonadic[X, C[X]], 
  // Define the type that will be returned (provided by the implicit CanBuildFrom)
  That](
    // Use C instead of List    
    m: Map[A, C[(A, B)]])(
      // Define the CanBuildFrom that is required by the map method
      implicit bf:CanBuildFrom[C[(A, B)], B, That]): Map[A, That] =

        // actual logic
        m.map { case (k, vlist) =>
          k -> vlist.map { case (dupe, b) => b }
        } 
```

## 编辑

请注意，我使用了`(A, B)`符号而不是`Pair[A, B]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T18:05:05.067

使用有什么意义`C<:Iterable`？

如果你定义：

```
def removeDupeKeyFromPair[A,B](m: Map[A, Iterable[(A,B)]]) : Map[A, Iterable[B]]=
      m map { case(k, vlist) => k -> { vlist map { case(dupe, b) => b } } } 
```

并在列表上调用该方法，它将返回一个`Map[A, List[B]]`. 这是由于`Builder`scala 集合中的机制。

# javascript - 具有隔离范围的 AngularJS 指令 - 我真的必须在任何地方调用 $parent 吗？

> ID：14858682
> 
> 赞同：3
> 
> 时间：2013-02-13T16:51:30.313
> 
> 标签：javascript, angularjs

我有一个 angular.js 指令来创建一个按钮（悬停类、左右图标等）。我正在使用按钮左右图标的自动绑定，`scope: { uiButtonIconLeft: '@', uiButtonIconRight: '@' }`以便我可以将这些值绑定到来自父范围的数据。然而，这会导致 angularjs 创建一个“隔离”范围，这意味着在这种情况下使用我的指令不起作用：

```
<div ng-controller='someController'>
    <a ng-repeat='thing in things'
       ui-button
       ui-button-icon-left='{{thing.icon}}'
       ng-click='someMethodTheControllerPutOnTheScope(thing.id)'
       >
       I don't work, don't bother clicking me
    </a>
</div> 
```

相反，我必须这样做：

```
<div ng-controller='someController'>
    <a ng-repeat='thing in things'
       ui-button
       ui-button-icon-left='{{thing.icon}}'
       ng-click='$parent.someMethodTheControllerPutOnTheScope($parent.thing.id)'
       >
       Holy leaky abstractions, Batman, it works!
    </a>
</div> 
```

我的问题是：**这是惯用的吗？应该是这样吗？我做错了吗？我们的英雄能否清除标记中多余的、重复的、烦人的额外内容`$parent.<whatever>`？**

**编辑**

`attributes.$observe(...)`我为我的按钮“小部件”确定的答案是避免使用隔离范围并通过而不是通过范围绑定来观察左右图标的属性值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T17:25:03.790

有一种方法可以在不使用显式范围的情况下做到这一点，如果您正在编写一个不专门处理范围内元素的指令，最好这样做：

```
function MyDirective () {
    return {
        link: function (scope, iElement, iAttrs) {
            iAttrs.$observe("uiButtonLeft", function (val) {
                if (val) {
                    iElement.attr(src, val); // whatever you want to do
                }
            });
        }

} 
```

.

```
<img ui-button ui-button-left="{{item.leftBtn}}"></img> 
```

有时使用`{{val}}`会变得很麻烦，无论是对于干净的代码，还是您可能还想更改`val`. 这是你如何做到的。

```
function MyDirective () {
    return {
        link: function (scope, iElement, iAttrs) {
            iAttrs.$observe("uiButtonLeft", function (val) {
                scope.$watch(val, function (valInScope) {
                    if (valInScope) {
                        iElement.attr(src, valInScope); // whatever you want to do

                        // the following statement updates the value in scope
                        // it's kinda weird, but it works.
                        scope.$apply(val + "= Hello"); // if you are out of angularjs, like jquery event
                        scope.$eval(val + = "Hello"); // if you are in angualrjs
                        // $apply can handle string, it's like ngClick
                        // you use in templates. It updates the value correctly.
                    }
                }
            });
        }

} 
```

.

```
<img ui-button ui-button-left="item.leftBtn"></img> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T17:01:29.257

`@`仅适用于本地范围属性。尝试一下`&`，这允许您在父范围的上下文中执行表达式。

引用自[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

> `&`或`&attr`- 提供一种在父作用域的上下文中执行表达式的方法。如果未指定 attr 名称，则假定属性名称与本地名称相同。给定`<widget my-attr="count = count + value">`scope: 和 widget 定义`{ localFn:'&myAttr' }`，则isolate scope 属性`localFn`将指向`count = count + value`表达式的函数包装器。通常希望通过表达式将数据从隔离范围传递到父范围，这可以通过将局部变量名称和值的映射传递到表达式包装器 fn 来完成。例如，如果表达式是，`increment(amount)`那么我们可以`amount` 通过调用`localFn`as来指定值`localFn({amount: 22})`

John Lindquist 在他的网站[egghead.io](http://egghead.io/)视频的 17、18 和 19 中很好地介绍了这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T18:14:04.000

如果您希望您的指令使用隔离范围，并且如果您想从 HTML/标记中的同一元素调用在父/控制器范围上定义的方法，那么使用 $parent 就可以了。

通常，您不必在 ng-repeat 中使用 $parent，因为 ng-repeat 通常会创建一个子范围，该子范围在原型上继承自父/控制器范围。因此，在 ng-repeat 中调用方法会沿着原型链到达父作用域以找到该方法。

由于您的指令创建了一个隔离范围，因此每个 ng-repeat 迭代都被迫使用相同的隔离范围，而不是它通常使用的范围，因为它们是在同一个元素上定义的。获取定义在父作用域（来自 HTML）上的方法的唯一方法是使用 $parent，因为没有原型链可以从隔离作用域遵循。

我们编写的任何自定义指令都需要记录创建了哪种范围。例如，Angular 文档指出了哪些指令创建了新范围。有关此问题的更多讨论，请参阅对此答案的评论：[https ://stackoverflow.com/a/14345214/215945](https://stackoverflow.com/a/14345214/215945)

您的另一个选择是将指令更改为不使用隔离范围，并使用属性来指示指令应检查的范围属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-13T17:02:24.100

我想我明白你想要做什么。在您的指令中，只需配置隔离范围以通过 ng-click 属性映射到您想要在父级上的功能。

```
scope: {
    uiButtonIconLeft: '@',
    uiButtonIconRight: '@',
    clicky: '&ngClick'
} 
```

# android - 在 Android 中检索特定文件夹的图像

> ID：14858694
> 
> 赞同：7
> 
> 时间：2013-02-13T16:51:58.373
> 
> 标签：android, android-cursor, android-query

在我的应用程序中，我创建了`GridView`显示来自特定文件夹的图像。问题是我想从 DCIM/100ANDRO 文件夹中检索图像。应该通过查询传递哪种类型的参数来检索这种类型的图像？请给我解决方案。

我正在使用以下代码来检索这给了我相机捕获的图像

```
 //importing only camera images and storing in ArrayList of class Images     type
        String[] projection = {
        MediaStore.Images.Media._ID, MediaStore.Images.Media.BUCKET_DISPLAY_NAME,
        MediaStore.Images.Media.DISPLAY_NAME
        };
        String selection = MediaStore.Images.Media.BUCKET_DISPLAY_NAME + " = ?";
        String[] selectionArgs = new String[] {
            "Camera"
        };

        Cursor mImageCursor = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, projection, selection, selectionArgs, null ); 

        if (mImageCursor != null)
        {

            mImageCursor.moveToFirst();

            for (int i = 0; i < mImageCursor.getCount(); i++)
            {
                Images im=new Images();
                eachImageView=new ImageView(this);
                int imageId = mImageCursor.getInt((mImageCursor.getColumnIndex( MediaStore.Images.Media._ID)));
                Bitmap bm = MediaStore.Images.Thumbnails.getThumbnail(getContentResolver(), 
                    imageId, MediaStore.Images.Thumbnails.MINI_KIND, null);
                im.setBitmap(bm);
                eachImageView.setImageBitmap(bm);
                im.setImageView(eachImageView);

                arrayOfImages.add(im);

                mImageCursor.moveToNext();
            }
        } 
```

建议将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-01-30T12:26:46.967

```
File folder = new File(Environment.getExternalStorageDirectory().toString() + "/Folder Name/");
folder.mkdirs();
File[] allFiles = folder.listFiles(new FilenameFilter() {
    public boolean accept(File dir, String name) {
        return (name.endsWith(".jpg") || name.endsWith(".jpeg") || name.endsWith(".png"));
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T17:45:07.853

首先，断言您正在访问的路径，然后使用**Bitmap.DecodePath(path)**加载位图。试试这个。

```
File path = new File(Environment.getExternalStorageDirectory(),"DCIM/100ANDRO");
if(path.exists())
{
    String[] fileNames = path.list();
}
for(int i = 0; i < filename.length; i++)
{
     Bitmap mBitmap = Bitmap.decodeFile(path.getPath()+"/"+ fileNames[i]);
     ///Now set this bitmap on imageview
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T17:16:50.160

Once check this one

```
 File sdcardPath = new File(Environment.getExternalStorageDirectory()
    .getPath() + "/100ANDRO"); 
   Log.v(sdcardPath.getPath()); 
```

Check if this prints the correct path which you require If sdcardPath is not null then try the following logic

```
int imageCount = sdcardPath.listFiles().length;
  for (int count = 0; count < imageCount - 1; count++) {
   ImageView eachImageView= new ImageView(this);
   Bitmap bmp = BitmapFactory.decodeFile(sdcardPath.listFiles()[count].getAbsolutePath());
   eachImageView.setImageBitmap(bmp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T18:30:41.270

如果我理解正确，您希望 GridView 显示设备上某个文件夹中的图像。

在您的查询中，您使用以下 Uri: `MediaStore.Images.Media.EXTERNAL_CONTENT_URI`。这将在“主要”外部存储上到处搜索图像。如果您只想在特定文件夹中搜索 - 请使用特定 Uri。

您可以`File`使用您所在位置的路径创建一个对象，然后从该文件创建一个 Uri。例如：

```
File myFile = new File("/scard/myfolder");
Uri myUri = Uri.fromFile(myFile); 
```

然后在您的图像查询中，您可以改用此 Uri。也就是说，您将拥有：

```
Cursor mImageCursor = getContentResolver().query(myUri, projection, selection, selectionArgs, null ); 
```

然后你仍然可以用同样的方式处理返回的游标，因为数据的格式是一样的。但是，返回的数据将仅包含您所需文件夹中的图像。

希望这可以帮助 ：）

# iphone - 标签中显示的格式字符串

> ID：14858696
> 
> 赞同：0
> 
> 时间：2013-02-13T16:52:02.513
> 
> 标签：iphone, objective-c, c, xcode, xcode4

我正在创建一个小型 iPhone 计算器，我已经完成了通常的操作，但我唯一的问题是我的数字显示时带有小数点和六个零。所以当我按下带有标签 5 的按钮时，它会显示在显示标签上

```
---------------
|     5.000000|
--------------- 
```

我只有一个看到没有零的数字 5。有什么建议么？

这是我拥有的显示标签上按下的数字的代码：

```
- (IBAction)digitAction:(id)sender {
    currentNumber = currentNumber *10 + (double)[sender tag];
    display.text = [NSString stringWithFormat:@"%2f",currentNumber];
} 
```

我尝试了以下方法来格式化字符串，但它似乎不起作用：

而不是：`@"%2f"`我试过了`@"%f"`，`@"%d"`等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:31:59.667

```
//  Change "%2f" to "%.0f"

- (IBAction)digitAction:(id)sender {
    currentNumber = currentNumber * 10 + (double)[sender tag];
    display.text = [NSString stringWithFormat:@"%.0f", currentNumber];
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:54:03.463

将其转换为整数！

```
display.text = [NSString stringWithFormat:@"%d",[[NSNumber numberWithFloat:currentNumber] intValue]]; 
```

多田！

虽然，从一开始就使用整数会更有效：

```
int currentNumber = 5;
display.text = [NSString stringWithFormat:@"%d", currentNumber]; 
```

但是，这不允许你这样做`float division`；如果这是您的代码的必需元素，请使用第一个选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T18:16:12.547

我认为您需要 smt 更像，这是有条件的：

```
- (IBAction)digitAction:(id)sender {
    currentNumber = currentNumber *10 + (double)[sender tag];
    double integral, fraction;
    fraction = modf(currentNumber, &integral); //This calculates the fractional part of double value
    NSString *formatString = fraction == 0.0 ? @"%.0f" : @".3f"; // Set format string according whether you have fraction or not
    display.text = [NSString stringWithFormat:formatString,currentNumber];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T16:54:16.603

不要设置`stringValue`您的标签或使用`printf`-style 解决方案，请使用`NSNumberFormatter`. 它可以让您更好地控制数字的显示方式。

# ios - 检查 iOS 应用程序的签名

> ID：14858697
> 
> 赞同：15
> 
> 时间：2013-02-13T16:52:09.360
> 
> 标签：ios, xcode, signature

是否可以在应用程序运行时检查 iOS 应用程序是否由其开发人员签名？我尝试下载一些应用程序的 .ipa 并使用我的开发者 ID 将它们退出，几乎所有这些应用程序都在我的 iOS 设备上运行。但他们中的一些人没有，所以我猜他们以某种方式检查签名是否已经改变并禁止他们运行如果它是。

我知道，有适用于 OSX 的[代码签名服务](https://developer.apple.com/library/mac/#documentation/Security/Reference/CodeSigningRef/Reference/reference.html)，但我还没有找到在 iOS 中执行此操作的方法。

我也读过，在审查后，苹果用他们自己的签名签署了应用程序。_CodeSignature/CodeResources 和 embedded.mobileprovision 文件是否也在此过程中更改？我是否可以在运行时检查它是否使用苹果签名进行签名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-12-04T23:57:04.350

我写了一个小的签名检查器（使用 openssl）。它可以在这里找到： [https ://github.com/elnormous/signature_check/blob/master/SignatureCheck/main.c](https://github.com/elnormous/signature_check/blob/master/SignatureCheck/main.c)

第二个问题的答案是否定的，_CodeSignature/CodeResources 和 embedded.mobileprovision 没有被改变。Apple 仅更改 Mach-O 文件的签名。

# ios - 选择 UITextField 时向上移动 UIView

> ID：14858701
> 
> 赞同：2
> 
> 时间：2013-02-13T16:52:17.800
> 
> 标签：ios, uiview, uitextfield

我正在尝试以编程方式创建一些文本字段。它们出现在屏幕底部，选择时键盘覆盖它们。选择文本字段时，我需要向上移动视图。

这是我的视图代码：

标题：

```
@interface MESLoginViewController : UIViewController <PFLogInViewControllerDelegate, UITextFieldDelegate> {
    IBOutlet UITextField *usernameField;
} 
```

小鬼查看文件：

```
// Create sub view for Logo
    UIView *logoView =[[UIView alloc] initWithFrame:CGRectMake(0,0,320,280)];
    [logoView setBackgroundColor:[UIColor blueColor]];
    logoView.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight;

    // Create sub view for fields
    UIView *fieldView = [[UIView alloc] initWithFrame:CGRectMake(0, logoView.bounds.size.height, 320, 200)];
    [fieldView setBackgroundColor:[UIColor greenColor]];
    fieldView.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleTopMargin;

    // Setting up the text fields
    // Username field
    usernameField = [[UITextField alloc] initWithFrame:CGRectMake(10, 20, 300, 40)];
    usernameField.borderStyle = UITextBorderStyleRoundedRect;
    usernameField.textColor = [UIColor blackColor];
    usernameField.font = [UIFont systemFontOfSize:17.0];
    usernameField.placeholder = @"Username";
    usernameField.backgroundColor = [UIColor whiteColor];
    usernameField.autocorrectionType = UITextAutocorrectionTypeNo;
    usernameField.keyboardType = UIKeyboardTypeDefault;
    usernameField.returnKeyType = UIReturnKeySearch;
    usernameField.clearButtonMode = UITextFieldViewModeWhileEditing;
    usernameField.delegate = self;

    // Password field
    UITextField *passwordField = [[UITextField alloc] initWithFrame:CGRectMake(10, (usernameField.bounds.size.height + 30), 300, 40)];
    passwordField.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleTopMargin;
    passwordField.borderStyle = UITextBorderStyleRoundedRect;
    passwordField.textColor = [UIColor blackColor];
    passwordField.font = [UIFont systemFontOfSize:17.0];
    passwordField.placeholder = @"Password";
    passwordField.backgroundColor = [UIColor whiteColor];
    passwordField.autocorrectionType = UITextAutocorrectionTypeNo;
    passwordField.keyboardType = UIKeyboardTypeDefault;
    passwordField.returnKeyType = UIReturnKeySearch;
    passwordField.clearButtonMode = UITextFieldViewModeWhileEditing;
    passwordField.delegate = self;

    // Add fields/button to fieldView
    [fieldView addSubview:usernameField];
    [fieldView addSubview:passwordField];

    // Add subviews to main view
    [self.view addSubview:logoView];
    [self.view addSubview:fieldView]; 
```

我已添加此方法来移动视图，但无法正确计算最后一部分：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField{
    NSLog(@"textFieldDidBeginEditing");
    //If we begin editing on the text field we need to move it up to make sure we can still
    //see it when the keyboard is visible.
    //I am adding an animation to make this look better
    [UIView beginAnimations:@"Animate Text Field Up" context:nil];
    [UIView setAnimationDuration:.3];
    [UIView setAnimationBeginsFromCurrentState:YES];

    usernameField.frame = CGRectMake(usernameField.frame.origin.x,
                                        -200,
                                        usernameField.frame.size.width,
                                        usernameField.frame.size.height);

    [UIView commitAnimations];

} 
```

我真正想要的是完全改变视图，或者可能将其更改为上方的可滚动区域。尽管我在触摸到 endEditing 后确实实现了另一种方法。

似乎如果我移动一个字段，我必须完成代码才能移动所有......我怎样才能移动视图（完整视图）？

此外，在 textFieldDidEndEditing|textFieldShouldEndEditing 方法中视图返回正常状态还需要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:55:13.560

您正在使用我朋友的方法访问局部变量`usernameField`。那是编译器错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:02:16.943

如果我的理解是正确的——你实际上想改变“fieldView”——因为这两个 UITextFields 是这个视图的子视图。

您抛出该错误的原因是因为该方法无法访问该变量 - 您需要在头文件中声明一个实例变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:53:26.167

当您在键盘被选中后制作动画时 - 改为为整个视图制作动画。

首先声明 UIView 变量以使其可访问：

```
@interface MESLoginViewController : UIViewController <PFLogInViewControllerDelegate, UITextFieldDelegate> 
{ 
IBOutlet UITextField *usernameField; 
UIView *fieldView; 
} 
```

然后在您的实现中创建此视图

```
 // Create sub view for Logo
UIView *logoView =[[UIView alloc] initWithFrame:CGRectMake(0,0,320,280)];
[logoView setBackgroundColor:[UIColor blueColor]];
logoView.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight;

// Create sub view for fields
fieldView = [[UIView alloc] initWithFrame:CGRectMake(0, logoView.bounds.size.height, 320, 200)];
[fieldView setBackgroundColor:[UIColor greenColor]];
fieldView.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleTopMargin;

// Setting up the text fields
// Username field
usernameField = [[UITextField alloc] initWithFrame:CGRectMake(10, 20, 300, 40)];
usernameField.borderStyle = UITextBorderStyleRoundedRect;
usernameField.textColor = [UIColor blackColor];
usernameField.font = [UIFont systemFontOfSize:17.0];
usernameField.placeholder = @"Username";
usernameField.backgroundColor = [UIColor whiteColor];
usernameField.autocorrectionType = UITextAutocorrectionTypeNo;
usernameField.keyboardType = UIKeyboardTypeDefault;
usernameField.returnKeyType = UIReturnKeySearch;
usernameField.clearButtonMode = UITextFieldViewModeWhileEditing;
usernameField.delegate = self;

// Password field
UITextField *passwordField = [[UITextField alloc] initWithFrame:CGRectMake(10, (usernameField.bounds.size.height + 30), 300, 40)];
passwordField.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleTopMargin;
passwordField.borderStyle = UITextBorderStyleRoundedRect;
passwordField.textColor = [UIColor blackColor];
passwordField.font = [UIFont systemFontOfSize:17.0];
passwordField.placeholder = @"Password";
passwordField.backgroundColor = [UIColor whiteColor];
passwordField.autocorrectionType = UITextAutocorrectionTypeNo;
passwordField.keyboardType = UIKeyboardTypeDefault;
passwordField.returnKeyType = UIReturnKeySearch;
passwordField.clearButtonMode = UITextFieldViewModeWhileEditing;
passwordField.delegate = self;

// Add fields/button to fieldView
[fieldView addSubview:usernameField];
[fieldView addSubview:passwordField];

// Add subviews to main view
[self.view addSubview:logoView];
[self.view addSubview:fieldView]; 
```

然后为 fieldView 设置动画：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField{
NSLog(@"textFieldDidBeginEditing");
//If we begin editing on the text field we need to move it up to make sure we can still
//see it when the keyboard is visible.
//I am adding an animation to make this look better
[UIView beginAnimations:@"Animate Text Field Up" context:nil];
[UIView setAnimationDuration:.3];
[UIView setAnimationBeginsFromCurrentState:YES];

fieldView.frame = CGRectMake(fieldView.frame.origin.x,
                                    -200,
                                    fieldView.frame.size.width,
                                    fieldView.frame.size.height);

[UIView commitAnimations]; 
```

}

由于所有文本字段都是 fieldView 的子视图 - 它们将使用它进行动画处理。那应该排序！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-15T11:20:02.980

只需在您的 .h 和 .m 文件中使用以下代码，它对我来说效果很好。

- - - -。H - - -

```
CGFloat animatedDistance; 
```

-----.m----------

```
static const CGFloat KEYBOARD_ANIMATION_DURATION = 0.3;
static const CGFloat MINIMUM_SCROLL_FRACTION = 0.2;
static const CGFloat MAXIMUM_SCROLL_FRACTION = 0.8;
static const CGFloat PORTRAIT_KEYBOARD_HEIGHT = 216;
static const CGFloat LANDSCAPE_KEYBOARD_HEIGHT = 162;

- (void)textFieldDidBeginEditing:(UITextField *)textField
{

    CGRect textFieldRect =
    [self.view.window convertRect:textField.bounds fromView:textField];
    CGRect viewRect =
    [self.view.window convertRect:self.view.bounds fromView:self.view];
    CGFloat midline = textFieldRect.origin.y + 0.5 * textFieldRect.size.height;
    CGFloat numerator =
    midline - viewRect.origin.y
    - MINIMUM_SCROLL_FRACTION * viewRect.size.height;
    CGFloat denominator =
    (MAXIMUM_SCROLL_FRACTION - MINIMUM_SCROLL_FRACTION)
    * viewRect.size.height;
    CGFloat heightFraction = numerator / denominator;

    if (heightFraction < 0.0)
    {
        heightFraction = 0.0;
    }
    else if (heightFraction > 1.0)
    {
        heightFraction = 1.0;
    }

    UIInterfaceOrientation orientation =
    [[UIApplication sharedApplication] statusBarOrientation];

    if (orientation == UIInterfaceOrientationPortrait ||
        orientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        animatedDistance = floor(PORTRAIT_KEYBOARD_HEIGHT * heightFraction);
    }
    else
    {
        //animatedDistance = floor(LANDSCAPE_KEYBOARD_HEIGHT * heightFraction);
    }

    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y -= animatedDistance;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

    [self.view setFrame:viewFrame];

    [UIView commitAnimations];
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y += animatedDistance;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

    [self.view setFrame:viewFrame];

    [UIView commitAnimations];
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
}

- (IBAction) textFieldReturn:(id)textField
{
    [textField resignFirstResponder];
} 
```

我在[这里找到了解决方案](https://stackoverflow.com/questions/14809290/how-to-move-the-focussed-text-field-to-the-middle-of-the-view-after-keyboard-pop)

# php - 使用静态 url 重新加载 php 文件

> ID：14858704
> 
> 赞同：2
> 
> 时间：2013-02-13T16:52:26.597
> 
> 标签：php

我有一个 PHP 文件，其中包含一些加载 URL 的变量，例如：

```
<? php
$URL_1 = "http://local.web.site/my-test-page.html";
$URL_2 = ...;
...
?> 
```

这些用于链接内的不同页面：

```
<a href="<?=$URL_1?>">Click here</a> 
```

我更新了其中一个 URL，但链接仍然指向以前的 URL。

如何让页面显示更新后的 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:12:33.913

为了防止从缓存中加载页面，您可以编写以下页面标题：

```
<meta http-equiv="expires" content="0"> 
```

将内容设置为“0”会告诉浏览器始终从 Web 服务器加载页面。

# tsql - 带有表变量的 TSQL 范围

> ID：14858706
> 
> 赞同：0
> 
> 时间：2013-02-13T16:52:38.813
> 
> 标签：tsql, sql-server-2008-r2, transactionscope, sqltransaction

我有一个表列表，其中一些具有 Employee_ID 列。至少一张表缺少至少一个 Employee_ID。我想从其他表中找到缺少的 Employee_ID。

我运行以下命令，但在@temp_employees 上出现“必须声明标量变量”错误。我相信范围是正确的。

如何在 TSQL 中使用表变量 @temp_employees，同时保持其范围，以便在整个循环中使用它？

注意：多年来，该软件有许多版本，表结构也发生了许多变化。我不想为每个表结构更改编写特定于版本的脚本，因为缺少的 Employee_ID(s) 始终是软件中错误的根源。

```
/***************************************************************
*  Find missing employee id's regardless of software version   *
***************************************************************/
USE [database name]

DECLARE @i AS INT,
        @iMAX AS INT,
        @SQL AS nvarchar(MAX),
        @table AS nvarchar(MAX)

DECLARE @temp_tables TABLE (
    id int identity(1,1),
    table_name nvarchar(MAX) NULL
)       

DECLARE @temp_employees TABLE (
    id int identity(1,1),
    employee_id int NOT NULL,
    table_name nvarchar(255) NULL
)

INSERT @temp_tables (table_name) SELECT t.name FROM sys.tables t 
    INNER JOIN sys.columns c ON t.object_id = c.object_id WHERE c.name = 'employee_id'
SELECT * FROM @temp_tables

SELECT @i = MIN(id) FROM @temp_tables
SELECT @iMAX = MAX(id) FROM @temp_tables

WHILE (@i < @iMAX)
BEGIN
    SELECT @table = table_name FROM @temp_tables WHERE id = @i

    SELECT @SQL = N'INSERT ' + @temp_employees + ' (employee_id, table_name) SELECT employee_id, ''' + @table + ''' FROM ' + @table + ' WHERE employee_id NOT IN (SELECT employee_id FROM ' + @temp_employees + ')'
    EXEC sp_executeSql @SQL

SET @i = @i + 1
END

SELECT * FROM @temp_employees 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:40:26.353

`...SELECT @SQL = N'INSERT ' + @temp_employees + '...`

您正在将 nvarchar 与表变量混合。这就是为什么您会收到此错误“必须声明**标量**变量”

我认为你应该创建一个持久表

```
...
DECLARE temp_employees TABLE (
    id int identity(1,1),
    employee_id int NOT NULL,
    table_name nvarchar(255) NULL
)
...
    SELECT @SQL = N'INSERT temp_employees (employee_id, table_name)
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:58:04.547

当您使用 sp_executesql 时，它会在与脚本的其余部分不同的范围内执行。我在这里有一篇简短的博客文章来处理这个[问题](http://timothyawiseman.wordpress.com/2013/01/18/variable-scope-in-sql-server/)。

# jquery - jquery手机列表点击

> ID：14858707
> 
> 赞同：1
> 
> 时间：2013-02-13T16:52:42.170
> 
> 标签：jquery, listview, cordova, jquery-mobile

我在下面用 Jquery 创建了一个移动列表视图，它的渲染效果很好。当您单击特定列表元素时，我需要一些帮助 - 现在我将其设置为进入新页面并显示餐厅 ID。我想要尝试做的是，单击的特定列表视图条目的相同信息将呈现在新页面上，这意味着我之前在单击的列表元素中拥有的所有信息将仅在新页面上呈现简单的段落。是我试图弄清楚这个动态列表视图是我遇到麻烦的地方。有人可以帮忙吗？我真的很感激 - 数据库信息正在完美读取！

```
<html>
<head>
<meta charset="utf-8" />
<title>Find A Deal</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <style>
        img.fullscreen {
            max-height: 100%;
            max-width: 100%;
        }
        </style>

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script type="text/javascript">
    $(document).on('pagebeforeshow', '#index', function(){
        $("#list").empty();
        var url="http://localhost/test/json3.php";
        $.getJSON(url,function(json){
            //loop through deals
            $.each(json.deals,function(i,dat){
                $("#list").append("<li><a id='"+dat.restaurantid+"'><h1>"+dat.name+"</h1><p>"+dat.dname+"</p></a></li>");
                $(document).on('click', '#'+dat.restaurantid, function(event){  
                    if(event.handled !== true) // This will prevent event triggering more then once
                    {
                        listObject.itemID = $(this).attr('id'); 
                        $.mobile.changePage( "#index2", { transition: "slide"} );
                        event.handled = true;
                    }
                });            
            });
            $("#list").listview('refresh');
        });
    });

    $(document).on('pagebeforeshow', '#index2', function(){       
        $('#index2 [data-role="content"]').html('You have selected Link' + listObject.itemID);
    });

    var listObject = {
        itemID : null
    }    
</script>
</head>     
<body>    
<div data-role="page" id="index">
    <div data-role="header" data-position="fixed">
        <h1>Current Deals</h1>
    </div>

    <div data-role="content">
        <div class="content-primary">
            <ul id="list" data-role="listview" data-filter="true"></ul>
        </div>
    </div>

    <div data-role="footer" data-position="fixed">
        <div data-role="navbar">
            <ul>
                <li><a href="http://localhost/findadeal/index.html" data-icon="home">Home</a></li>
                <li><a href="http://localhost/findadeal/mydeal.html" data-icon="grid">My Deals</a></li>
            </ul>
        </div>
    </div>
</div>

<!--New Page --> 

<div data-role="page" id="index2">
<div data-role="header">
        <h1> Find A Deal </h1> 
    </div>

    <div data-role="content">
        <a data-role="button" href="#page1" data-icon="star" data-iconpos="left">Get Deal </a>
    </div>

    <footer data-role="footer" data-position="fixed">
        <nav data-role="navbar">
            <ul>
                <li><a href="index.html" data-icon="home">Home</a></li>
                <li><a href="#index" data-icon="grid">My Deals</a></li>
            </ul>
        </nav>
    </footer>   
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:04:15.433

在下面基于您发布的代码的示例中，选定的 id 从页面索引传递到页面 index2。

```
<html>
    <head>
        <meta charset="utf-8" />
        <title>Find A Deal</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <style>
            img.fullscreen {
                max-height: 100%;
                max-width: 100%;
            }
        </style>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script type="text/javascript">
            $(document).on('pagebeforeshow', '#index', function () {
                $("#list").empty();
                for (var i = 0; i < 5; i++) {
                    $("#list").append (
                        $(["<li><a id='id_",i ,"'><h1>H1_label_",i,"</h1><p>P_label_",i,"</p></a></li>"].join("")).
                        on('click', ['#id_',i].join (""), function(e){  
                            if(e.handled !== true) {
                                listObject.itemID = this.id;                                
                                $.mobile.changePage( "#index2", { transition: "slide"} );
                                e.handled = true;
                            }
                        })
                    );
                }
                $("#list").listview('refresh');
            });

            $(document).on('pagebeforeshow', '#index2', function () {

                //selected id on page transition
                alert(['selected id: ',listObject.itemID].join(""));
            });

            var listObject = {
                itemID: null
            }
        </script>
    </head>

    <body>
        <div data-role="page" id="index">
            <div data-role="header" data-position="fixed">
                 <h1>Current Deals</h1>

            </div>
            <div data-role="content">
                <div class="content-primary">
                    <ul id="list" data-role="listview" data-filter="true"></ul>
                </div>
            </div>
            <div data-role="footer" data-position="fixed">
                <div data-role="navbar">
                    <ul>
                        <li>
                            <a href="http://localhost/findadeal/index.html" data-icon="home">Home</a>
                        </li>
                        <li>
                            <a href="http://localhost/findadeal/mydeal.html" data-icon="grid">My Deals</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!--New Page -->
        <div data-role="page" id="index2">
            <div data-role="header">
                 <h1> Find A Deal </h1> 
            </div>
            <div data-role="content">
                <a data-role="button" href="#page1" data-icon="star" data-iconpos="left">Get Deal</a>
                <p></p>
            </div>
            <footer data-role="footer" data-position="fixed">
                <nav data-role="navbar">
                    <ul>
                        <li>
                            <a href="index.html" data-icon="home">Home</a>
                        </li>
                        <li>
                            <a href="#index" data-icon="grid">My Deals</a>
                        </li>
                    </ul>
                </nav>
            </footer>
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T17:51:59.163

在 Listview 中渲染数据，并在列表的每次单击/触摸开始时，在另一个页面上显示数据。

// 第一个函数

```
function render(){        
    var html="";
    html +=   "<li id="+index+"><a href='#'><img src='images/new-iaav-72.png' class='ui-   corner-none' style='width:50px;height:56px'>";

    html +=   "<div style='margin-left:-10%;margin-top:-2%'><h1>"+title +"</h1>  </div>";         
    html +=   "</a></li>";                         
    $("#xyz div:jqmData(role=content) #ul1").append (html);

   func1 = function() {showDetails(index,title,descrp,image_large);};
   document.getElementById(index).addEventListener("click", func1); 
```

}

// 在第二页上呈现数据的第二个函数。

```
 function showDetails(){

   if(image_large!="")
    $('#setDetailImage').attr("src",image_large);
else        
    $('#setDetailImage').attr("src",'images/defaultDog.png');

$('#setDetailTitle').text(title);   
$('#setDetailDescription').html(descrp).text();

 } 
```

# jsf - 不支持 Netweaver JSF 呈现文档类型

> ID：14858716
> 
> 赞同：1
> 
> 时间：2013-02-13T16:53:21.413
> 
> 标签：jsf, jakarta-ee, sap, lsf

我希望这里有一些 SAP-Netweaver-Experts ...

我在 SAP NWDS 中开发了一个非常简单的 JSF-Application

使用“适用于 JSF 的 SAP 组件库”

```
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="f" uri="http://java.sap.com/jsf/core"%>
<%@ taglib prefix="h" uri="http://java.sap.com/jsf/html"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<f:view>
<html>
    <head>
        <title>Hallo ?</title>
    </head>
    <body>
    <h:form>
    <h:messages/>
    <hr>
        <h:panelGrid border="0" columns="2">
            <h:outputText value="First Name" style="color: #808080; font-style: normal; font-size: 12px; font-family: Verdana, Arial, Sans-Serif; font-weight: bold"></h:outputText>
            <h:inputText value="#{person.name}"></h:inputText>
        </h:panelGrid>
        <h:commandButton value="Submit" action="submit"></h:commandButton>  
    </h:form>
    </body>
</html>
</f:view> 
```

如果我运行 JSF 应用程序，我会收到一个弹出警报，其中包含以下文本“致命应用程序错误：不支持标准呈现文档类型。请联系您的管理员”

我不知道“标准渲染文档类型”是什么以及我可以在哪里配置它。

任何想法或提示？

问候凯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:41:04.973

问题是线路

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

似乎这个 LSF-Framework 在 -Element 中给出了 DOCTYPE`<f:view>`并且错误与第二个 doctype 有关

# sql - SQL Server：使用自联接的问题

> ID：14858718
> 
> 赞同：-3
> 
> 时间：2013-02-13T16:53:24.087
> 
> 标签：sql, sql-server-2008, tsql

大家好，我在学校遇到这个问题：

有一个表叫它`clientProjectDetail`有以下列

```
Clientid, ClientName, ProjectName 
```

`Corp`数据库内。

每个客户都可以访问一个或多个项目。编写一个 SQL 查询以将多个`ProjectNames`next`Clientnames`作为单个逗号分隔列表返回。我真的无法弄清楚这已经有几个小时了......感谢任何可以分享一些见解的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:58:29.093

你应该能够使用这样的东西：

```
SELECT distinct c1.Clientid, 
  c1.ClientName,
  LEFT(projects , LEN(projects)-1) projects 
FROM clientProjectDetail c1
CROSS APPLY
(
  SELECT c2.ProjectName + ', '
  FROM clientProjectDetail c2
  where c1.Clientid = c2.Clientid
  FOR XML PATH('')
) m (projects) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d802c/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:04:30.897

解决这个查询：（STUFF 删除了第一个逗号和 FOR XML PATH('') 帮助您将文本连接到单行）

```
SELECT Clients.ClientName, 
       Projects = STUFF(
             (
                SELECT ', ' + clientProjectDetail.ProjectName
                FROM clientProjectDetail 
                WHERE clientProjectDetail.Clientid = Clients.Clientid
                FOR XML PATH('')
              ), 1, 2, '')
FROM clientProjectDetail AS Clients 
```

# javascript - JQuery Columnizer 在调整大小时创建重复的内容

> ID：14858719
> 
> 赞同：0
> 
> 时间：2013-02-13T16:53:30.653
> 
> 标签：javascript, jquery, pagination, multiple-columns, window-resize

我正在尝试使用 JQuery Columnizer 插件（[http://welcome.totheinter.net/columnizer-jquery-plugin/](http://welcome.totheinter.net/columnizer-jquery-plugin/)）为博客创建文章视图，以自动对我的内容进行列化和分页。到目前为止，这是我工作的 JSFiddle：http: [//jsfiddle.net/opanitch/YY9x3/1/](http://jsfiddle.net/opanitch/YY9x3/1/)

基本的 HTML 如下所示：

```
<div id="wrapper">
    <div class="page_template"><!-- Begin Paginate Template -->
        <div class='content'></div>
    </div><!-- End Paginate Template -->
    <div class="page">
        <div id="articleHeading">
            <p class="articleReturn"><a href="#">&laquo; Back to Newsroom</a></p>
                <h2 class="articleTitle">Article Title</h2>
                <p class="articleSubTitle">Subtitle</p>
                <div class="newsHR"></div>
                <div class="articlePic"></div>
            </div>
            <div id="articleContainer">
                <div id="articleBody">                        
                    <p class="articleCopy">
                         Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus luctus dictum felis id ultrices. Etiam nisi augue, porttitor ac rhoncus non, vulputate eget elit. Donec mollis justo in mauris lobortis semper. Fusce eleifend cursus tincidunt. Vivamus vitae nibh ante, a vestibulum elit. Pellentesque id varius mi. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean lacus lectus, porttitor eget eleifend at, eleifend eget urna. Maecenas in urna lobortis nisl facilisis tempus sed non ante. Sed in eros egestas magna posuere auctor eu ac nisl.
                    </p>
                </div>
            </div>
            <div class="clear"></div>
            <div class="articleNav">
                <p id="prevArticle" class="articlePagination"><a href="#">&laquo; Previous page</a></p>
                <p id="nextArticle" class="articlePagination"><a href="#">Next page &raquo;</a></p>
            </div>
        </div>
    </div> 
```

我正在使用插件的示例分页来通过这个 JQuery 调用来实现我的流体列/页面：

```
function buildNewsletter() {
    if($('#articleBody').contents().length > 0) {
        // when we need to add a new page, use a jq object for a template
        // or use a long HTML string, whatever your preference
        $page = $(".page_template:first").clone().addClass("newsPost").css("display", "block");

        // fun stuff, like adding page numbers to the footer
        $("#articleContainer").append($page);

        // here is the columnizer magic
        $('#articleBody').columnize({
             columns: 2,
             target: ".newsPost:last .content",
             overflow: {
                  height: pageHeight,
                  id: "#articleBody",
                  doneFunc: function(){
                       console.log("done with page");
                       buildNewsletter();
                  }
              }
          });
      }
  } 
```

它在初始化时运行良好，但是一旦调整窗口大小，分栏器就会创建更多“页面”并似乎随机地用冗余内容填充它们。谁能帮助弄清楚为什么会这样？如果还不是很明显，我想要的结果是一个带有流动列的页面（意味着内容在调整大小时重新分配），没有重复内容的问题。我似乎已经把流畅的部分记下来了，但额外的内容是个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T19:24:41.457

问题是内容被重新分类为与原始内容相同的内容。这意味着每次重新分列内容时，它只会添加到最终输出中，之前的分列页面永远不会被删除。

一种解决方案是手动管理原始内容的缓存，并在调整窗口大小时设置我们自己的 recolumnize 函数。

一个带有工作解决方案的 jsfiddle：http: [//jsfiddle.net/Bka8P/](http://jsfiddle.net/Bka8P/)

这个小提琴将所有内容放入一个不可见的 div 中：

`<div id="articleBodyCache">`

分为：

`<div id="articleBody">`

然后我们手动清空articleBody div，并在页面调整大小时重新列。由于我们是手动做的，所以我们还需要在分列的时候设置 buildOnce 属性，这样分列器的 onResize 监听器就不会和我们自己的冲突了。

```
 $('#articleBody').columnize({
        columns: 2,
        target: ".newsPost:last .content",
        buildOnce: true,
        ... 
```

# google-search-console - 集成 Google Webmaster Tools api 以从我的站点中提取数据

> ID：14858722
> 
> 赞同：0
> 
> 时间：2013-02-13T16:53:47.923
> 
> 标签：google-search-console

我正在做一个项目，我想在其中集成 Google Webmaster Tools Api。我有一个 webmastertool 帐户，我想构建一个程序，每天将我的网站的所有信息动态提取到 Excel 表中。我搜索但没有找到任何好的文档来在 C# 中实现 API。

谁能告诉我在哪里可以找到更好/更多的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:22:51.120

你当然可以从使用这个开始：[http ://code.google.com/p/google-gdata/](http://code.google.com/p/google-gdata/)

并使用一些代码，例如：

```
class Program
{
    private static int lastIndex = 0;

static int DumpCrawlErrors(int startFrom)
{

    WebmasterToolsService service = new WebmasterToolsService("exampleCo-exampleApp-1");
    service.setUserCredentials("myusername", "mypassword");
    string url = HttpUtility.UrlEncode("http://example.com");
    string slug = Utilities.EncodeSlugHeader("https://www.google.com/webmasters/tools/feeds/" + url + "/crawlissues/?start-index=" + startFrom + "&max-results=100");

    CrawlIssuesQuery feedQuery = new CrawlIssuesQuery(slug);

    CrawlIssuesFeed feed = service.Query(feedQuery);

    StringBuilder results = new StringBuilder();
    foreach (CrawlIssuesEntry crawlIssuesEntry in feed.Entries)
    {

        string crawlUrl = ((XmlExtension)crawlIssuesEntry.ExtensionElements[2]).Node.InnerText;
        if (crawlIssuesEntry.IssueType == "not-found")
        {
            results.AppendLine(string.Format("{0}\t{1}\t{2}\t{3}", crawlUrl, crawlIssuesEntry.IssueType, crawlIssuesEntry.IssueDetail, crawlIssuesEntry.LinkedFrom));

        }
    }

    System.IO.File.AppendAllText("result.log", results.ToString());

    return feed.Entries.Count;
}

static void Main(string[] args)
{
    lastIndex = 0;
    int numberOfEntriesAdded = 0;
    do
    {
        numberOfEntriesAdded = DumpCrawlErrors(lastIndex + 1);
        lastIndex += numberOfEntriesAdded;
    } while (numberOfEntriesAdded == 100);

    }
} 
```

完整的 Java 参考可以在这里找到：[https ://developers.google.com/webmaster-tools/docs/2.0/developers_guide_java](https://developers.google.com/webmaster-tools/docs/2.0/developers_guide_java)

我知道它不是 C#，但它会给你一个很好的起点。

# biztalk - 无法在 BizTalk 2010 中添加 Web 端口

> ID：14858729
> 
> 赞同：0
> 
> 时间：2013-02-13T16:54:16.277
> 
> 标签：biztalk, biztalk-2010, biztalk-orchestrations

我正在尝试从 BizTalk 业务流程调用 Web 服务 - 我创建对 Web 服务的 WSDL 的引用，然后尝试连接一个端口，但现有的端口类型没有显示出来。查看 BT 2010 的已知问题，我发现：

*当在设计工具中添加 Web 引用时在 Bi​​zTalk 业务流程设计器中不显示端口类型 BizTalk 设计工具中的意外行为是由于 Visual Studio 2010 的已知限制。解决方法：您需要为 Visual Studio 2010 安装 QFE 补丁来解决此问题.*

但我似乎找不到此 QFE 的实际链接。任何人？

（是的，我知道您可以使用生成项目向导以不同的方式完成此操作，但在这种情况下，我专门寻找此修复程序）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:59:44.410

你检查过这个吗？ [http://connect.microsoft.com/VisualStudio/Downloads](http://connect.microsoft.com/VisualStudio/Downloads)

它包含 Visual Studio 的所有 QFE 修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:32:39.513

正如我确定您所做的那样，我检查了所有 BizTalk 2010 累积更新（[1 到 5](http://support.microsoft.com/kb/2555976)），但没有发现任何提及此问题。我还发现在 Sandro Pereira 的博客文章中提到了您的问题，这似乎是[BizTalk Server 2010 自述文件](http://download.microsoft.com/download/0/F/F/0FFEF5D0-BE04-4D03-9125-75B8AD243E57/Readme.htm)的重新散列（此时我问自己重新发布此类细节的价值在哪里......）

我终于检查了[MSDN 存档](http://archive.msdn.microsoft.com/Project/ProjectDirectory.aspx?TagName=Visual%20Studio%202010)以了解有关此问题的 VS QFE 修复的详细信息，但没有运气。

我认为你最好的下一步是联系 MS 并拨打支持电话 - 我不认为这将是收费的，因为文档显然缺乏。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T23:57:45.713

BizTalk 中有一个特殊的工具可以从编排中执行 Web 服务。不要使用添加 Web 引用或添加服务命令！转到开始/BizTalk Server/BizTalk WCF 服务发布向导。完成后，您将在 IIS 中获得一个 Web 服务，该服务公开编排的接收端口。无需编排就可以创建 WS。在这种情况下，您必须在此向导中选择“将架构发布为 WCF 服务”选项。MSDN BizTalk Help 中有很多关于这个向导的博客和好文章。

# c# - Json Ajax 调用 - 已超出传入消息的最大消息大小配额 (65536)

> ID：14858731
> 
> 赞同：1
> 
> 时间：2013-02-13T16:54:17.767
> 
> 标签：c#, json, wcf, iis, cordova

我们有一个在 iOS 和 Android 上运行的 PhoneGap APP，它调用 WCF Webservices（在开发中托管在 IIS7 上）和 Azure（在生产中）。WCF 调用是使用 json Ajax 请求进行的。Phonegap 正在使用“文件传输”

当我们上传大图时，App 会发送图片，但 WebService 永远不会收到。小图像工作正常。

WebService 日志文件中的消息是：

已超出传入邮件的最大邮件大小配额 (65536)

我们已经搜索和搜索，并且我们已经在 WebService web.config 文件中几乎所有我们可以掌握的东西上增加了 maxSize - 但无济于事。

对此的任何帮助将不胜感激。

# php - Wordpress，删除特定字符之前的所有内容

> ID：14858732
> 
> 赞同：0
> 
> 时间：2013-02-13T16:54:20.280
> 
> 标签：php

我需要删除 Wordpress 标题中特定字符之前的所有内容

我已经尝试过在这里找到的不同代码，但我无法让它工作我需要这样的东西

```
echo strstr(get_the_title(),"-",true); 
```

或者

```
echo $str = 'get_the_title()';
$str = substr($str, 0, strpos($str, '-')); 
```

第一个代码只是输出正常的标题

在第二个我不确定我如何可以运行 php 代码而不是普通字符。

更新：

感谢 harryg & jrod，我现在可以正常工作了

```
$str = get_the_title(); //This would be your post title (get_the_title)
$char =  " - "; //Define the separator
$strpos = strpos($str, $char); //Find out where it occurs
$str = substr($str, $strpos+strlen($char)); //Extract the substring after the separator
echo $str; 
```

出于某种原因，wordpress 将我的 hpyhen 转换为破折号，所以我添加了它

```
remove_filter( 'the_title', 'wptexturize' ); 
```

到我的 funtions.php 并且它起作用了。也许它可以帮助将来的某人。感谢所有答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:10:43.330

这个应该做...

```
$str = "this comes before - this comes after"; //This would be your post title (get_the_title)
$char =  " - "; //Define the separator
$strpos = strpos($str, $char); //Find out where it occurs
$str = substr($str, $strpos+strlen($char)); //Extract the substring after the separator
echo $str; //Result will be "this comes after" 
```

请记住，这`$char`需要与标题中出现的分隔符完全匹配。如果它是 html 编码的（例如`&mdash;`对于 em-dash），您将需要使用 html 实体作为分隔符。它还将在分隔符的*第一个*实例上修剪标题的开头。如果您多次出现分隔符，则需要根据它们在标题中出现的位置调整代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:03:06.240

您也可以`preg_replace`为此使用：

```
$str = 'Lorem ipsum dolor sit amet - consetetur sadipscing elitr'; // your title
$sep =  ' - '; // separator
$short = preg_replace('/^(.*?)'.$sep.'(.*)$/si', '$2', $str, 1); // your short title
echo $short; // result: "consetetur sadipscing elitr" 
```

这将替换**第一次**出现分隔符之前的所有字符。如果分隔符多次存在`$str`并且您想在**最后一次**出现分隔符之前替换所有内容，请使用：

```
$short = preg_replace('/^(.*)'.$sep.'(.*)$/si', '$2', $str, 1); // your short title 
```

请记住，如果您在其中使用特殊字符，`$sep`则必须对其进行转义。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T17:05:01.323

`$char="enter the character before which you want to delete the connect here";
$str =get_the_title(); $substr = explode($char,$str); echo $substr[1];`

通过使用explode函数，您可以将字符串分解为具有特定字符的数组

# php - PHP对象序列化和反序列化无法正常工作

> ID：14858733
> 
> 赞同：1
> 
> 时间：2013-02-13T16:54:21.060
> 
> 标签：php, serialization

我有3个源文件如下：

第一个是 source_class.php

```
class MacMini
{
    public $memory = "16 Gigabytes";
    public $cpu = "Intel Core i7 @ 2.6GHz";
    public $HD = "1TB @ 5200 rpms";
    public function mem()
    {
        return $this->memory;
    }
    public function centralPU()
    {
        return $this->cpu;
    }
    public function hard_drive()
    {
        return $this->HD;
    }
} 
```

///////////////////////////////////////// /

第二个是serialize.php

```
include "source_class.php";
$myMini = new MacMini;
$myMini->cpu = "Intel Core i7 @ 3.4GHz";
$serialized = serialize($myMini);
file_put_contents("store", $serialized); 
```

//////////////////////////////////////

第三个是 unserialize.php

```
include "source_class.php";
$data = file_get_contents("store");
$unserialized = unserialize($data);

$myMini = new MacMini;
echo $myMini->cpu; 
```

它产生以下输出：“Intel Core i7 @ 2.6GHz”

为什么，如果在serialize.php文件中改变了cpu的属性，在反序列化中没有体现出来吗？我检查了序列化文件“存储”的原始数据内容，并且 cpu 属性反映在序列化文件中，但是当它在 unserialize.php 中反序列化时，不会反映属性更改。这是为什么？谁能解释一下？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T16:56:30.477

问题是您创建了一个新`$myMini`对象并输出了`cpu`这个新创建的对象的属性。序列化/反序列化以这种方式没有意义。

*将unserialize.php*更改为：

```
include "source_class.php";
$data = file_get_contents("store");
$myMini = unserialize($data);

echo $myMini->cpu; 
```

# java - java - 更改给定类的类加载器

> ID：14858735
> 
> 赞同：2
> 
> 时间：2013-02-13T16:54:22.597
> 
> 标签：java, classpath

所以这个项目中所有的资源读取都是这样完成的：

```
SomeLoadingClass.class.getResource(resource); 
```

对于测试，我想连接一个不同的配置文件以供使用。就像配置文件中包含正确内容的安全网一样。

鉴于我正在 test 中编写测试`class A`，并且上面的代码片段发生在其他地方，我怎么能 - 将一个新文件添加到类路径（可能是类`SomeLoadingClass`），以便使用我想要的配置文件，而不是那个这是在`.classpath`文件中设置的。

我宁愿能够“覆盖”现有的配置文件，而不是吹走的全部内容`.classpath`- 这可能吗？如果是这样，怎么做？

道歉 - 我在这里阅读了一些类路径条目，但它们似乎并没有完全符合我的要求。（它们都是关于覆盖当前线程的类加载器，这在这里似乎不合适 - 即不起作用）

编辑这个*测试*我想用类路径来调整。仅此而已，仅此而已。我不想更改其他所有测试。此外，没有使用 Maven。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:17:57.170

如果您使用的是 maven，我相信您可以将您的测试配置文件放在 src/test/resources 目录中并使用相同的名称，它会在测试时覆盖真实的配置文件。

# magento - 将时事通讯发送到特定的电子邮件 magento

> ID：14858742
> 
> 赞同：2
> 
> 时间：2013-02-13T16:54:41.917
> 
> 标签：magento, templates, newsletter

嗨，我的网站有**1000 多个**用户。我想向他们发送时事通讯，但在此之前我只想为一个用户测试它，是否可以将其发送给特定的**客户**进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T00:33:54.547

转到 /app/code/Mage/Newsletter/Model/Queue.php （或覆盖该模型的文件）

将第 126 行附近的方法 getSubscribersCollection() 修改为：

```
$this->_subscribersCollection = Mage::getResourceModel('newsletter/subscriber_collection')
                ->addFieldToFilter('subscriber_email', 'your-test@email.com')
                ->useQueue($this); 
```

时事通讯将仅发送给“your-test@email.com”用户

您可以通过打开 www.yoursite.com/index.php/admin/newsletter_queue/sending 手动运行时事通讯队列（您可能必须在管理面板的 URL 中禁用密钥）

# ssrs-2008 - 报告服务的查找功能 (visual studios 2008)

> ID：14858743
> 
> 赞同：0
> 
> 时间：2013-02-13T16:54:47.350
> 
> 标签：ssrs-2008, report, reporting, reporting-services

我目前正在构建一个需要两个数据集和两个数据源的报表。我正在尝试将两个数据集与一个公共字段组合在一起。

我的两个数据集是：DSSES（绑定到 SESSQL 源）和 DSQQST（绑定到 QQST 源）

我的 DSSES 有员工 ID 字段，我的 DSQQST 也有 Employee_ID 字段。我想使用这两个字段来比较两个数据集。基本上，这份报告的目的也是找出员工是否更改了姓名。我想使用查找函数来比较两个员工 ID 字段，然后生成每个数据集中的名字和姓氏的列表以生成答案。

以下是我的两个数据集的所有字段：

DSSES: EmployeeID EmployStatusCode LastName FirstName PreferredName EmployeeType

DSQQST：Employee_id company_id employeeid firstname middlename lastname supervisor_id active_yn department_id hide_dt sup_dept_id term terminateDate

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:37:05.413

制作一个包含五列链接到 DSSES 数据集的表。显示`EmployeeID`和`FirstName`字段`LastName`。在第四列中，输入以下公式：

```
=Lookup(Fields!EmployeeID.Value, Fields!Employee_id.Value, Fields!firstname.Value, "DSQQST") 
```

与第五列中的 LastName 类似。

现在将`Visibility`-`Hidden`表达式更改为：

```
=IIF((Fields!LastName.Value = Lookup(Fields!EmployeeID.Value, Fields!Employee_id.Value, Fields!lastname.Value, "DSQQST")) AND (Fields!FirstName.Value = Lookup(Fields!EmployeeID.Value, Fields!Employee_id.Value, Fields!firstname.Value, "DSQQST")), True, False) 
```

所以基本上显示每个数据集的匹配结果并隐藏名字和姓氏匹配的结果，从而只显示不同的结果。

# ruby-on-rails - 导轨选择表单数组错误

> ID：14858744
> 
> 赞同：0
> 
> 时间：2013-02-13T16:54:47.687
> 
> 标签：ruby-on-rails

我正在使用`.select`将“line_id”分配给“实例”。类“实例” `belongs_to`“线”。

```
<%= line_builder.select('instance', 'line.line_id', Line.all.collect {|p| [p.title, p.id ]}, { :include_blank => 'select line' }) %> 
```

此行返回此错误：

```
undefined method `merge' for #<Array:0x007fc3c389e868> 
```

不太确定这里出了什么问题，但我假设这是该`.select`方法的语法，因为我以前从未使用过它。

我还能告诉你什么来帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T16:56:38.810

尝试使用[options_for_select](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_for_select)：

```
<%= line_builder.select(:line_id, Line.all.collect {|p| [p.title, p.id ]}, { :include_blank => 'select line' }) %> 
```

# 它不起作用的原因：

> 您的选择中有一个额外的参数：表单构建器中的选择将调用更新的方法作为参数（在这里`line_id`，Rails 将调用`line_id`该对象并将其分配给选择框的值），第二个参数是选项对于选择，第三个选项是`html_options`as a `Hash`。由于您有一个额外的参数，Rails 期望您的选项是`html_options`哈希，这是您的选择选项。

# c# - MDI 表单无法更改光标

> ID：14858745
> 
> 赞同：3
> 
> 时间：2013-02-13T16:54:49.133
> 
> 标签：c#, cursor, mdiparent

我正在使用 MDI 窗体创建 Windows 窗体应用程序。在 MDI 表单中，我有一个 SplitContainer，在 Panel1 中是一个 TreeView，我将表单加载到 Panel2 中。

到目前为止，一切正常，只有一个例外，我无法关闭 WaitCursor。我尝试在代码和表单属性中更改它。在代码中更改它没有任何作用，当我尝试在表单属性中更改它时，它会自动恢复为 WaitCursor。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:54:11.097

我通过将 UseWaitCursor 属性更改为 false 找到了解决方案。它是如此简单，但我无法在任何地方找到答案

# ios - iOS AVPlayer 问题

> ID：14858751
> 
> 赞同：0
> 
> 时间：2013-02-13T16:55:04.907
> 
> 标签：ios, xcode, avplayer

我是新的 iOS 开发者。我正在尝试使正在播放栏（主屏幕底部栏）中的播放/暂停按钮模拟我的应用程序中的播放/暂停按钮。请提供任何帮助。

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback
                                       error:nil];
[[AVAudioSession sharedInstance] setActive:YES
                                     error:nil];
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
[self.player play];

UIBackgroundTaskIdentifier newTaskId = UIBackgroundTaskInvalid;
if([player play]){
    newTaskId = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:NULL];

    bgTask = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^(void) {
        [[UIApplication sharedApplication] endBackgroundTask: bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    //Your bg code here

    [[UIApplication sharedApplication] endBackgroundTask: bgTask];
    bgTask = UIBackgroundTaskInvalid; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T16:59:33.787

调用后：

```
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents]; 
```

在您的应用程序委托中，您将在按下按钮时收到事件......像这样处理它们：

```
-(void)remoteControlReceivedWithEvent:(UIEvent *)event
{
    switch(event.subtype)
    {
        case UIEventSubtypeRemoteControlPause:
            [player pause];
            break;
        case UIEventSubtypeRemoteControlPlay:
            [player play];
            break;

    }
} 
```

并为下一个/上一个/等添加其他案例......

# linux - Logrotate 清理带日期戳的文件

> ID：14858752
> 
> 赞同：33
> 
> 时间：2013-02-13T16:55:05.060
> 
> 标签：linux, oracle, logrotate

我目前正在尝试制定一种整理由 Cron 创建的 Oracle Recover 日志文件的方法...

目前，Cron 使用以下命令每 15 分钟调用一次我们的 Oracle 备用恢复过程：

```
0,15,30,45 * * * * /data/tier2/scripts/recover_standby.sh SID >> /data/tier2/scripts/logs/recover_standby_SID_`date +\%d\%m\%y`.log 2>&1 
```

这将创建如下所示的文件：

```
$ ls -l /data/tier2/scripts/logs/
total 0
-rw-r--r-- 1 oracle oinstall 0 Feb  1 23:45 recover_standby_SID_010213.log
-rw-r--r-- 1 oracle oinstall 0 Feb  2 23:45 recover_standby_SID_020213.log
-rw-r--r-- 1 oracle oinstall 0 Feb  3 23:45 recover_standby_SID_030213.log
-rw-r--r-- 1 oracle oinstall 0 Feb  4 23:45 recover_standby_SID_040213.log
-rw-r--r-- 1 oracle oinstall 0 Feb  5 23:45 recover_standby_SID_050213.log
-rw-r--r-- 1 oracle oinstall 0 Feb  6 23:45 recover_standby_SID_060213.log
-rw-r--r-- 1 oracle oinstall 0 Feb  7 23:45 recover_standby_SID_070213.log
-rw-r--r-- 1 oracle oinstall 0 Feb  8 23:45 recover_standby_SID_080213.log
-rw-r--r-- 1 oracle oinstall 0 Feb  9 23:45 recover_standby_SID_090213.log
-rw-r--r-- 1 oracle oinstall 0 Feb 10 23:45 recover_standby_SID_100213.log
-rw-r--r-- 1 oracle oinstall 0 Feb 11 23:45 recover_standby_SID_110213.log
-rw-r--r-- 1 oracle oinstall 0 Feb 12 23:45 recover_standby_SID_120213.log 
```

我基本上想删除早于 x 天的文件，我认为 logrotate 非常适合......

我已经使用以下配置文件配置了 logrotate：

```
/data/tier2/scripts/logs/recover_standby_*.log {
    daily
    dateext
    dateformat %d%m%Y
    maxage 7
    missingok
} 
```

为了获得理想的结果，我是否缺少某些东西？

我想我可以从 Crontab 日志文件中删除日期，然后让 logrotate 旋转该文件，但是日志文件中的日期不会反映日志生成的日期......即 010313 上的恢复将在文件中由于 logrotate 在 020313 上触发并旋转文件，因此日期为 020313...

还有其他想法吗？并提前感谢您的任何回复。

问候

加文

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-12-19T12:56:26.763

Logrotate 根据词法排序的旋转日志文件名列表中的顺序以及文件年龄（使用文件的最后修改时间）删除文件

*   **rotate**是旋转文件的最大数量，您可能会发现。如果轮换日志文件的数量较多，则它们的名称将按词法排序，并删除词法上最小的文件。

*   **maxage**定义了删除循环日志文件的另一个标准。任何超过给定天数的旋转日志文件都将被删除。请注意，日期是从文件上次修改时间检测到的，而不是从文件名中检测到的。

*   **dateformat**允许对旋转文件中的日期进行特定格式设置。手册页说明，该**格式应导致词法正确排序**。

*   **dateyesterday**允许在一天前的日志文件名中使用日期。

要在每日轮换文件中保留给定的天数（例如 7），您必须将`rotate`值设置为 7 并且您可以忽略`maxage`，如果您的文件是每天都创建和轮换的。

如果在几天内（例如 14 天）未创建日志，则轮换日志文件的数量仍将相同 (7)。

`maxage`将通过始终删除太旧的文件来改善“未生成日志”场景中的情况。在 7 天没有生成日志后，将不存在轮换的日志文件。

您不能`dateformat`用作 OP 节目，因为它不是词法可排序的。搞砸`dateformat`可能会导致删除其他轮换的日志文件，而不是您真正想要的。

**提示**：从命令行运行 logrotate 并带有`-d`执行空运行的选项：您将看到 logrotate 会做什么，但实际上并没有做任何事情。然后使用 (verbose) 执行手动运行`-v`，以便您可以确认所做的是您想要的。

## 解决方案：清理 cron 创建的日志

这个概念是：

让 cron 创建和更新日志文件，但对创建文件进行小修改，使用默认时遵循 logrotate 标准文件名`dateext`

```
/data/tier2/scripts/logs/recover_standby_SID.log-`date +\%Y\%m\%d`.log 
```

仅使用 logrotate 删除太旧的日志文件

*   针对不存在的日志文件`/data/tier2/scripts/logs/recover_standby_SID.log`
*   用于`missingok`让 logrotate 清理发生
*   设置`rotate`得足够高，以涵盖要保留的日志文件的数量（至少 7 个，如果每天会有一个“轮换”日志文件，但您可以安全地将其设置得非常高，例如 9999）
*   设置`maxage`为 7。这将删除最后修改时间超过 7 天的文件。
*   `dateext`仅用于确保 logrotate 搜索看起来像已旋转的旧文件。

Logrotate 配置文件如下所示：

```
data/tier2/scripts/logs/recover_standby_SID.log {
    daily
    missingok
    rotate 9999
    maxage 7
    dateext
} 
```

## 解决方法：直接通过 logrotate 每天旋转一次

我不确定，源恢复备用文件是如何创建的，但我会假设，Oracle 或您的某些脚本定期或持续附加到文件`/data/tier2/scripts/logs/recover_standby_SID.log`

这个概念是：

*   每天将文件旋转一次`logrotate`
*   直接使用包含恢复数据的日志文件`/data/tier2/scripts/logs/recover_standby_SID.log`
*   `daily`将导致每天一次轮换（就如何`cron`理解而言`daily`）
*   `rotate`必须设置为 7（或任何更高的数字）。
*   `maxage`设置为 7（天）
*   `dateext`使用默认的 logrotate 日期后缀
*   `dateyesterday`用于导致旋转文件中的日期后缀在一天前。
*   `missingok`即使不存在要旋转的新内容，也可以清理旧文件。

Logrotate 配置看起来像：

```
data/tier2/scripts/logs/recover_standby_SID.log {
    daily
    missingok
    rotate 7
    maxage 7
    dateext
    dateyesterday
} 
```

请注意，您可能需要使用`copytruncate`其他类似选项，这些选项与外部进程如何创建源日志文件以及它如何对轮换行为作出反应有关。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-13T18:42:35.597

您可以使用`find`命令轻松完成该任务！它将删除所有`7 Days`旧文件。将其放入`crontab`并每晚运行：

```
$ cd /data/tier2/scripts/logs/    
$ /usr/bin/find . -mtime +7 -name "*.log" -print -delete 
```

或者更好的方法

```
$ /usr/bin/find /data/tier2/scripts/logs/ -mtime +7 -name "*.log" -print -delete; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-04T17:05:33.793

（更新）您的选择是：

*   正如 Satish 回答的那样，放弃 logrotate 并在 cron 中放置一个查找脚本
*   您甚至可以使用 logrotate 并将 find 脚本放在 postrotate 命令中

最初，我认为更改日期格式以匹配您的日志可能会起作用，但正如 Reid Nabinger 指出的那样，日期格式无论如何都与 logrotate 不兼容。最近，我尝试配置相同的东西，但对于我希望 logrotate 删除的 Java 旋转日志。我尝试了下面的配置，但它一直试图删除所有日志

```
/opt/jboss/log/server.log.* {
    missingok
    rotate 0
    daily
    maxage 30
} 
```

我最终只是实现了 Satish 的建议——在 cron 中使用 rm 脚本进行简单查找。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-19T07:34:23.693

*（无法评论，因为没有足够的声誉）*

我有一个类似的问题。众所周知，logrotate 对于带有内置日期戳的文件名是无用的。

如果其他一切都相同，我可能会`find`从事 cron 工作。

由于我自己的原因，我想使用 logrotate 并最终找到了一种方法：[https ://stackoverflow.com/a/23108631](https://stackoverflow.com/a/23108631)

本质上，这是一种将 cron 作业封装在 logrotate 文件中的方法。也许不是最漂亮或最有效的，但就像我说的，我有我的理由。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-12T12:56:04.790

根据@Jan Vlcinsky，您可以让 logrotate 添加日期 - 只需用于`dateyesterday`获取正确的日期。

或者，如果您想自己输入日期，则可以“瞄准”没有日期的名称，然后将清除带有日期的名称。

但是，我发现如果那里没有日志文件，logrotate 不会清理带有日期的文件。

但是如果你准备好有一个空的日志文件，那么它就可以工作了。

例如，清理 /var/log/mylogfile。*yyyymmdd* .log 7 天后, `touch /var/log/mylogfile.log`, 然后配置 logrotate 如下：

```
/var/log/mylogfile.log
{
        日常的
        旋转 7
        最大 7
        日期文本
        日期格式 .%Y%m%d
        扩展名 .log
        空的
        创造
}

```

此条目与 mylogfile.log 的存在相结合，触发 logrotate 清理旧文件，就好像它们是由 logrotate 创建的一样。

`daily`，`rotate`加上`maxage`导致旧日志文件在 7 天后被删除（或 7 个旧日志文件，以先到者为准）。

`dateext`, `dateformat`plus`extension`导致 logrotate 匹配我们的文件名。

还要`ifempty`确保`create`那里仍然有一个空文件，否则日志轮换将停止。

另一个测试提示，准备编辑 /var/lib/logrotate.status 以重置“最后轮换”日期，否则 logrotate 不会为您做任何事情。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-29T18:41:34.847

仅供参考，我知道这是一个老问题，但它对你不起作用的原因是你的日期格式不是词法可排序的。从手册页：

```
 dateformat format_string
          Specify the extension for dateext using the notation similar to strftime(3)  function.  Only
          %Y  %m  %d  and %s specifiers are allowed.  The default value is -%Y%m%d. Note that also the
          character separating log name from the extension is part of the dateformat string. The  sys-
          tem  clock must be set past Sep 9th 2001 for %s to work correctly.  Note that the datestamps
          generated by this format must be lexically sortable (i.e., first the year,  then  the  month
          then  the  day.  e.g.,  2001/12/01 is ok, but 01/12/2001 is not, since 01/11/2002 would sort
          lower while it is later).  This is because when using the rotate option, logrotate sorts all
          rotated filenames to find out which logfiles are older and should be removed. 
```

解决方案是更改为年月日，或调用外部进程来执行清理。

# asp.net - 我在将空值传递给存储过程时遇到问题，例如，如果未在下拉列表中选择一个选项，如何将其作为空值通过 sqdatasource 传递到数据库。 我目前在我的页面上有许多下拉控件，它们保存参数值以传递给存储过程。 当我从这些控件中选择一些值时，gridvie 问问题 问问题 2013-02-13T16:56:08.670 8084 次 This question shows research effort; it is useful and clear 12 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我在将空值传递给存储过程时遇到问题，例如，如果未在下拉列表中选择一个选项，如何将其作为空值通过 sqdatasource 传递到数据库。 我目前在我的页面上有许多下拉控件，它们保存参数值以传递给存储过程。 当我从这些控件中选择一些值时，gridview 将显示它应该显示的结果，但我遇到的问题是，当没有选择任何值时，会将空值传递给 SP。我检查了 SP，当我执行它并传入空值时，它会得到正确的结果，所以我对 SP 很满意。我试过了 ConvertEmptyStringToNull="true" DefaultValue="" 控制参数中的设置没有运气，下拉菜单的“ALL”选项的值为“” sqldatasource 的代码是： <asp:sqldatasource id="SqlDataSource1" runat="server" connectionstring="<%$ ConnectionStrings:scConnString %>" selectcommand="spGetOrgTickets" selectcommandtype="StoredProcedure" cancelselectonnullparameter="false"><selectparameters></selectparameters></asp:sqldatasource>下拉列表之一是： <asp:dropdownlist style="width: 100%" id="drpStatus" runat="server" class="field select" appenddatabounditems="True" autopostback="True" datasourceid="SqlDataSource2_Status" datatextfield="status" datavaluefield="status_id"><asp:listitem value="">All</asp:listitem></asp:dropdownlist> 有任何想法吗？ 谢谢 排序...只需要在 sqldatasource 中使用 CancelSelectOnNullParameter="false"。 asp.nettsql 4 1 回答 1 This answer is useful 32 排序...只需要在 sqldatasource 中使用 CancelSelectOnNullParameter="false"。 于 2013-02-13T22:29:48.730 回答 Related 1 sql-server-2008 - 如何从 Access 调用标量值函数 1 jquery - 旋转后jQuery-ui可拖动更改轴 1 css - 给一个html选择jquery UI Autocomplete中使用的菜单的css样式 1 asp.net-mvc-4 - asp.net mvc4 创建子表单以在注册期间为用户添加多个地址 1 c# - 创建新线程时，如何传递以文本框为参数的方法？ 1 ruby-on-rails - 无法运行 rails s 1 python - Python将文件保存到csv 1 java - 我应该如何在 java 中实现一个小型搜索引擎，使用 nosql 数据库和 xml，并将其安装在站点上以搜索该站点 1 javascript - 卡住了 mootools 脚本。图像自动更换 1 eclipse - 在 Eclipse IDE 中以图形方式提取 svn 日志 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14858769
> 
> 赞同：12
> 
> 时间：
> 
> 标签：asp.net, tsql

我在将空值传递给存储过程时遇到问题，例如，如果未在下拉列表中选择一个选项，如何将其作为空值通过 sqdatasource 传递到数据库。

我目前在我的页面上有许多下拉控件，它们保存参数值以传递给存储过程。

当我从这些控件中选择一些值时，gridview 将显示它应该显示的结果，但我遇到的问题是，当没有选择任何值时，会将空值传递给 SP。我检查了 SP，当我执行它并传入空值时，它会得到正确的结果，所以我对 SP 很满意。我试过了

```
ConvertEmptyStringToNull="true" DefaultValue="" 
```

控制参数中的设置没有运气，下拉菜单的“ALL”选项的值为“”

sqldatasource 的代码是：

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:scConnString %>"
                    SelectCommand="spGetOrgTickets" SelectCommandType="StoredProcedure" CancelSelectOnNullParameter="false">
                    <SelectParameters>
                        <asp:SessionParameter Name="org_id" Type="Int32" SessionField="org_id" DefaultValue="" ConvertEmptyStringToNull="false" />
                        <asp:ControlParameter ControlID="drpPriority" Name="priority_id" PropertyName="SelectedValue"
                            Type="Int32" ConvertEmptyStringToNull="true" DefaultValue="" />
                        <asp:ControlParameter ControlID="drpStatus" Name="status_id" PropertyName="SelectedValue"
                            Type="Int32" ConvertEmptyStringToNull="true" DefaultValue=""/>
                    </SelectParameters>
                </asp:SqlDataSource> 
```

下拉列表之一是：

```
 <asp:DropDownList Style="width: 100%" ID="drpStatus" runat="server" class="field select"
                                AppendDataBoundItems="True" AutoPostBack="True" DataSourceID="SqlDataSource2_Status"
                                DataTextField="status" DataValueField="status_id">
                                <asp:ListItem Value="">All</asp:ListItem>
                            </asp:DropDownList> 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-13T22:29:48.730

排序...只需要在 sqldatasource 中使用 CancelSelectOnNullParameter="false"。

# c++ - C++11 std::atomic_fetch_add 与 __sync_fetch_and_add

> ID：14858770
> 
> 赞同：3
> 
> 时间：2013-02-13T16:56:09.203
> 
> 标签：c++, c++11

我目前无法正确理解新`std::atomic`类型的用法。对于我的情况，我有以下假设：

1.  我有一个`uint64_t`存储在内存中的值的连续内存位置
2.  我有两种访问简单增量和原子增量

最初我实现了这样的方法

```
uint64_t inc(const size_t pos) { return _data[pos]++; }
uint64_t atomic_inc(const size_t pos) { return __sync_fetch_and_add(&_data[pos], 1); } 
```

现在我想将它正确地移植到 C++11 并且想知道我应该如何正确处理它。根据我对[std::atomic_fetch_add](http://en.cppreference.com/w/cpp/atomic/atomic_fetch_add)的理解，基本上需要一个原子整数值来执行此操作。但是，我需要如何正确实现这一点，以便我可以使用原子变量指向一个位置并增加值？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T22:12:57.427

您不能使用 C++11 工具对未声明为原子类型的变量进行原子访问。您需要将数组替换`uint64_t`为`std::atomic<uint64_t>`. 在许多平台上，这将具有与 plain 相同的大小和对齐方式`uint64_t`，但所有操作都是原子的。

然后，您可以使用`data[pos].fetch_add(1,memory_order)`指定的`memory_order`. 如果您需要的内存顺序`std::memory_order_seq_cst`（这可能是最接近 GCC 的`__sync_fetch_and_add`），那么可以省略内存顺序，或者您可以使用增量运算符，例如`data[pos]++`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T17:48:55.230

你不能。

C++11 原子对象封装了它的基类型。它不提供对其值作为左值的访问，也不能将其设置为对基础类型的预先存在的对象（在给定的内存位置）提供原子操作。

根据平台，任何给定的原子类型可能有特殊要求（例如更强的对齐约束）或需要辅助数据（大多数原子类型不保证是无锁的）

做你想做的事仍然需要特定于平台的功能。

如果你想做非原子增量，你能得到的最接近的是：

```
 atomic<uint64_t> data(initial_value);
  data.store(data.load(memory_order_relaxed) + 1, memory_order_relaxed); 
```

这仍然会执行原子加载和存储，但不会执行内存隔离或原子读取-修改-写入操作。

# mysql - 转换为 unix 时间戳并再次返回会导致 MySQL 损失 1 天

> ID：14858771
> 
> 赞同：2
> 
> 时间：2013-02-13T16:56:11.023
> 
> 标签：mysql

我在将日期导入 MySQL 时遇到问题。我把它归结为这个......

```
select from_unixtime(unix_timestamp(str_to_date('201201', '%Y%m'))) 
```

它报告...

```
2011-12-31 00:00:00 
```

为了让它返回原始日期，我需要用 MYSQL 设置什么，还是我只是摆弄它并添加一天之类的东西？

我在 GMT 时区。

搜索返回了一些关于此的非常古老的错误，其他帖子说这是应该发生的，但我不明白你应该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:02:28.120

当我运行它时，`SELECT STR_TO_DATE('201201', '%Y%m')`返回无效的日期`2012-01-00`（1 月 0 日？！），所以我并不完全惊讶于往返`UNIX_TIMESTAMP()`并`FROM_UNIXTIME()`最终搞砸了。首先尝试添加一天以使其成为真正的日期 ( `2012-01-01`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:03:32.457

在 5.5.21 (OS X) 我得到`2012-01-01 00:00:00`. 尝试升级您的服务器。

# openmp - 如果我使用 OpenMP 刷新功能，我的操作系统如何知道刷新的方向？

> ID：14858773
> 
> 赞同：1
> 
> 时间：2013-02-13T16:56:25.037
> 
> 标签：openmp

读取共享变量的线程必须首先调用`flush`，然后写入共享变量的线程必须调用 OpenMP `flush`，以使共享变量在主内存和缓存中保持同步。函数如何`flush`知道要冲向哪个方向？它需要知道两个变量（主内存或缓存）中的哪一个更新。我假设，但我不确定，操作系统或 CPU 会以某种方式处理这个问题。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:33:01.290

`flush`不是函数 - 它是 OpenMP*编译器指令*。它影响编译器生成可执行代码的方式，并指示它同步刷新集中所有优化变量（存储在 CPU 寄存器或其他显式可编程缓存/线程本地内存中）的值。这类似于`volatile`storage 修饰符对代码生成的影响，但具有更有限的点局部效果。

它是如何工作的？在解析源代码时，编译器会分析语句流和受这些语句影响的数据（变量）。因此，编译器从代码构建执行图和数据依赖图。它确切地知道每个变量的值在哪里以及如何被使用，以及哪个代码块的执行会影响哪些变量。然后编译器尝试通过简化图形来优化代码，并通过使用 CPU 寄存器存储中间值或使用另一个更快的线程可寻址本地内存来减少昂贵的内存操作的数量。这`flush`指令在执行图中添加了特殊点，编译器必须显式地将线程的内存视图（寄存器变量和本地内存变量）与全局共享内存同步。由于编译器首先构建了依赖关系图，它确切地知道刷新集中的哪些变量被修改，因此必须写入共享内存；刷新集中的所有其他变量都必须从共享内存中读取。

因此，您的问题的答案是，通常是编译器处理`flush`指令，而不是操作系统，尽管编译器可能会调用操作系统来实际实现刷新，例如在具有显式可编程缓存/本地存储器的系统上。但也应该注意，OpenMP 是一种*抽象标准*，可以在许多不同的硬件平台上实现，并且其中一些平台提供了某些硬件，可以帮助更有效地实现 OpenMP 抽象（例如 IBM Blue Gene 中的 CPU ASIC/ Q 提供了许多这样的功能）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T11:01:51.170

您不需要调用 flush 来保持共享变量同步。硬件（CPU）确实会跟踪缓存的内存，如果存在冲突的访问，它们会减慢您的程序，因为缓存将被 CPU 刷新。

我理解 flush 指令更像是一个[条件屏障](https://computing.llnl.gov/tutorials/openMP/#FLUSH)。必须至少有两个线程遇到包含相同变量的刷新才能生效。当具有共同变量 a 的两个线程满足该指令时，*如果他们修改了它，*他们会将修改写回内存（而不是将其保存在局部变量或寄存器中），然后我想有一个障碍让两个线程在继续之前到达该点。如果变量 a 在刷新后使用，则从内存中重新读取。

# android - 为什么我的 ListFragment 中出现此错误？

> ID：14858774
> 
> 赞同：0
> 
> 时间：2013-02-13T16:56:28.217
> 
> 标签：android, android-listfragment

这是我很好奇的具体错误。

```
02-14 00:54:41.993: E/AndroidRuntime(2000): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.thesis.menubook/com.thesis.menubook.MenuMain}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

我研究并将listView放在我的xml中，`android:id = "@android:id/list"`但错误仍然存​​在。

这是我的 .java 文件

```
package com.thesis.menubook;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.annotation.TargetApi;
import android.app.ListFragment;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class MenuCategory extends ListFragment {
    JSONParser jsonParser = new JSONParser();
    ArrayList<HashMap<String, String>> categoryList = new ArrayList<HashMap<String, String>>();
    private ProgressDialog pDialog;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        new GetCategories().execute();
    }

    @Override
    public void onResume() {
      //onResume happens after onStart and onActivityCreate
        new GetCategories().execute();
        super.onResume() ; 
    }

    class GetCategories extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
             super.onPreExecute();
             pDialog = new ProgressDialog(getActivity().getApplicationContext());
             Log.d("Activity Context", getActivity().getApplicationContext().toString() + "");
             pDialog.setMessage("Loading Categories. Please wait...");
             pDialog.setIndeterminate(false);
             pDialog.setCancelable(false);
             pDialog.show();
        }

        /**
         * Getting product details in background thread
         * */
        protected String doInBackground(String... param) {
            Bundle b = getActivity().getIntent().getExtras();
            String ipaddress = b.getString("IPAddress");

            List<NameValuePair> params = new ArrayList<NameValuePair>();
            Log.d("IP ADDRESS", ipaddress +" ");

            JSONObject json = jsonParser.makeHttpRequest("http://"+ipaddress+"/MenuBook/selectCategories.php", "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Categories: ", json.toString() + " ");
            int num = 1;
            try {
                // Checking for SUCCESS TAG
                int success = json.getInt("success");

                if (success == 1) {
                    // products found
                    // Getting Array of Products

                    JSONArray category_list = json.getJSONArray("category_list");
                    Log.d("Category List JSON Array", category_list.toString() + "");
                    // looping through All Products
                    for (int j = 1; j < category_list.length(); j++) {
                        JSONObject c = category_list.getJSONObject(j);

                        // Storing each json item in variable
                        String category = c.getString("category");

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put("category", category);

                        Log.d("category #"+num+"", category + " ");
                        num = num + 1;
                        // adding HashList to ArrayList
                        if(categoryList.contains(map) != true)
                        {
                            categoryList.add(map);
                        }
                        Log.d("Category List", categoryList.toString() + " ");
                    }
                } 
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        @Override
        protected void onPostExecute(String result) {
            pDialog.dismiss();

            ArrayAdapter<ArrayList<HashMap<String, String>>> arrayAdapter = new ArrayAdapter<ArrayList<HashMap<String, String>>>
            (getActivity().getApplicationContext(), 
                    R.layout.activity_menu_category);
            arrayAdapter.add(categoryList);
            Log.d("Category List", categoryList.toString() + "" );
            setListAdapter(arrayAdapter);

        }

    }
} 
```

这是xml

```
<?xml version="1.0" encoding="utf-8"?>
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

</ListView> 
```

更新的 Java 文件

```
package com.thesis.menubook;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.annotation.TargetApi;
import android.app.ListFragment;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListAdapter;

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public class MenuCategory extends ListFragment {
    JSONParser jsonParser = new JSONParser();
    ArrayList<HashMap<String, String>> categoryList = new ArrayList<HashMap<String, String>>();
    private ProgressDialog pDialog;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        new GetCategories().execute();
    }

    class GetCategories extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
             super.onPreExecute();
             pDialog = new ProgressDialog(getActivity());
             Log.d("Activity Context", getActivity().getApplicationContext().toString() + "");
             pDialog.setMessage("Loading Categories. Please wait...");
             pDialog.setIndeterminate(false);
             pDialog.setCancelable(false);
             pDialog.show();
        }

        /**
         * Getting product details in background thread
         * */
        protected String doInBackground(String... param) {
            Bundle b = getActivity().getIntent().getExtras();
            String ipaddress = b.getString("IPAddress");

            List<NameValuePair> params = new ArrayList<NameValuePair>();
            Log.d("IP ADDRESS", ipaddress +" ");

            JSONObject json = jsonParser.makeHttpRequest("http://"+ipaddress+"/MenuBook/selectCategories.php", "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Categories: ", json.toString() + " ");
            int num = 1;
            try {
                // Checking for SUCCESS TAG
                int success = json.getInt("success");

                if (success == 1) {
                    // products found
                    // Getting Array of Products

                    JSONArray category_list = json.getJSONArray("category_list");
                    Log.d("Category List JSON Array", category_list.toString() + "");
                    // looping through All Products
                    for (int j = 1; j < category_list.length(); j++) {
                        JSONObject c = category_list.getJSONObject(j);

                        // Storing each json item in variable
                        String category = c.getString("category");

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put("category", category);

                        Log.d("category #"+num+"", category + " ");
                        num = num + 1;
                        // adding HashList to ArrayList
                        if(categoryList.contains(map) != true)
                        {
                            categoryList.add(map);
                        }
                        Log.d("Category List", categoryList.toString() + " ");
                    }
                } 
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        @Override
        protected void onPostExecute(String result) {
            pDialog.dismiss();

            ListAdapter arrayAdapter = new ArrayAdapter<ArrayList<HashMap<String, String>>>
            (getActivity(), 
                    R.layout.activity_menu_category, R.id.category);
            Log.d("Category List", categoryList.toString() + "" );
            setListAdapter(arrayAdapter);

        }

    }
} 
```

更新的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id = "@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <TextView
        android:id="@+id/category"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="6dip"
        android:paddingLeft="6dip"
        android:textSize="20sp"
        android:textStyle="bold" />
</LinearLayout> 
```

用 getActivity() 替换 getActivity().getApplicationContext() 和用 LsitAdapter 替换 ArrayAdapter 并更改 xml 文件后的 LogCat：

```
02-14 01:56:15.382: V/TLINE(2474): new: android.text.TextLine@4066b8e0
02-14 01:56:16.772: V/TLINE(2474): new: android.text.TextLine@406747c0
02-14 01:56:47.052: D/dalvikvm(2474): GC_FOR_ALLOC freed 160K, 5% free 6481K/6791K, paused 167ms
02-14 01:56:47.096: I/dalvikvm-heap(2474): Grow heap (frag case) to 6.927MB for 513744-byte allocation
02-14 01:56:47.566: D/dalvikvm(2474): GC_CONCURRENT freed 2K, 5% free 6981K/7303K, paused 24ms+26ms
02-14 01:56:48.123: D/NetWork Info(2474): NetworkInfo: type: mobile[UMTS], state: CONNECTED/CONNECTED, reason: simLoaded, extra: internet, roaming: false, failover: false, isAvailable: true
02-14 01:56:54.762: D/Response(2474): org.apache.http.message.BasicHttpResponse@4064d2f0--response from apache
02-14 01:56:54.762: D/IP Address(2474): 192.168.10.149:80
02-14 01:56:54.898: D/NEXT VALUE --in Async on postexecute(2474): true
02-14 01:56:58.702: D/dalvikvm(2474): GC_CONCURRENT freed 95K, 4% free 7297K/7559K, paused 9ms+21ms
02-14 01:57:04.461: D/URL(2474): http://192.168.10.149:80/MenuBook/checkTable.php
02-14 01:57:07.901: D/Check Table(2474): {"success":1,"tabledb":[{"table_location":"UP","table_seat":"5","table_status":"AVAILABLE","table_ID":"001"}]}
02-14 01:57:08.028: D/Table Status in doinbg(2474): AVAILABLE
02-14 01:57:08.518: D/Table Status in post execute(2474): AVAILABLE
02-14 01:57:10.718: D/Activity Context(2474): android.app.Application@40646bf8
02-14 01:57:10.982: D/IP ADDRESS(2474): 192.168.10.149:80 
02-14 01:57:12.905: D/dalvikvm(2474): GC_CONCURRENT freed 267K, 6% free 7451K/7879K, paused 10ms+22ms
02-14 01:57:17.432: D/All Categories:(2474): {"success":1,"category_list":[{"category":"MAIN DISH"},{"category":"MAIN DISH"},{"category":"DESSERT"}]} 
02-14 01:57:17.572: D/Category List JSON Array(2474): [{"category":"MAIN DISH"},{"category":"MAIN DISH"},{"category":"DESSERT"}]
02-14 01:57:17.572: D/category #1(2474): MAIN DISH 
02-14 01:57:17.638: D/Category List(2474): [{category=MAIN DISH}] 
02-14 01:57:17.862: D/category #2(2474): DESSERT 
02-14 01:57:18.022: D/Category List(2474): [{category=MAIN DISH}, {category=DESSERT}] 
02-14 01:57:18.672: D/Category List(2474): [{category=MAIN DISH}, {category=DESSERT}]
02-14 01:57:20.442: D/dalvikvm(2474): GC_CONCURRENT freed 371K, 8% free 7561K/8135K, paused 14ms+14ms
02-14 01:57:20.632: D/dalvikvm(2474): GC_FOR_ALLOC freed <1K, 8% free 7560K/8135K, paused 174ms
02-14 01:57:20.652: I/dalvikvm-heap(2474): Grow heap (frag case) to 7.726MB for 246508-byte allocation
02-14 01:57:20.882: D/dalvikvm(2474): GC_FOR_ALLOC freed 0K, 8% free 7801K/8391K, paused 148ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:00:21.217

为此更改您的 ListView：

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@id/android:list"
android:layout_width="match_parent"
android:layout_height="match_parent" >
</ListView> 
```

我将 id 更改为：`android:id="@id/android:list"`

根据[本](http://android-er.blogspot.hu/2012/01/listfragment.html)教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:28:35.813

我终于检索到数据，这是通过替换 onPostExecute 子句上的 ArrayAdapter 定义

```
 @Override
        protected void onPostExecute(String result) {
            pDialog.dismiss();

            ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>
            (getActivity(), 
                    R.layout.activity_menu_category, R.id.category);
            for(int i = 0; i<= categoryList.size() - 1; i++)
            {
                String value = categoryList.get(i).values().toString();
                value.replace('[', ' ');
                value.replace(']', ' ');
                arrayAdapter.add(value);
                Log.d("Specific Value Category List", value + "");
            }
            Log.d("Category List", categoryList.toString() + "" );
            setListAdapter(arrayAdapter);

        } 
```

# objective-c - 字符串的 Objective-C 特殊索引

> ID：14858780
> 
> 赞同：0
> 
> 时间：2013-02-13T16:56:43.927
> 
> 标签：objective-c, cocoa

我在 Cocoa 中有一个程序，我想将不同的文本加载到 Textfield 上。这不是困难的部分。我现在遇到的问题是我有几段文字。我想像人类语言一样，给每个段落一个名字（索引？？？）。例如，第 1 段为第 1 段，第 2 段为第 2 段。然后我想叫他们的名字。起初我在想 setValueForKey 但后来“键”是不可更改的，因为它是一个属性。有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:29:50.987

使用[NSMutableDictionary](http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/)

```
NSMutableDictionary *mParagraphs = [[NSMutableDictionary alloc] initWithObjectsAndKeys:@"1st paragraph ", @"Paragraph1",@"2nd paragraph ",@"Paragraph2",nil];
NSLog(@"%@", [mParagraphs objectForKey:@"Paragraph1"]); 
```

# full-text-search - Sugar CRM CE版全文检索

> ID：14858781
> 
> 赞同：2
> 
> 时间：2013-02-13T16:56:44.440
> 
> 标签：full-text-search, sugarcrm

我无法让 SugarCRM CE 进行全文搜索。

有谁知道如何完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:08:09.393

全文搜索在 SugarCRM Pro 中，利用弹性搜索...

[http://developers.sugarcrm.com/wordpress/2012/07/03/new-in-sugar-6-5-full-text-search-thru-elasticsearch/](http://developers.sugarcrm.com/wordpress/2012/07/03/new-in-sugar-6-5-full-text-search-thru-elasticsearch/)

# postgresql - PostgreSQL、枚举、JPA、EclipseLink

> ID：14858783
> 
> 赞同：4
> 
> 时间：2013-02-13T16:56:47.340
> 
> 标签：postgresql, jpa, enums, eclipselink

我想知道如何使用 JPA Java 枚举和 PostgreSQL 枚举类型进行映射？

在 PostgreSQL 方面，我创建了这种类型：

```
CREATE TYPE langage AS ENUM ('FR', 'EN', 'DE'); 
```

我有一个 Java 枚举：

```
public enum LangageEnum {   
   FR,
   EN,
   DE;
} 
```

我的 JPA 实体字段是这个：

```
@Enumerated(EnumType.STRING)
@Column(name="langage")
private LangageEnum langage = LangageEnum.FR; 
```

但我收到异常：

> 引起：org.postgresql.util.PSQLException: ERREUR: la Colonne « langage » est de type pretoria.langage mais l'expression est de type character varying Indice : Vous devez réécrire l'expression ou lui appliquer une transformation de type。

我想我可以[在这里](http://wiki.eclipse.org/EclipseLink/Examples/JPA/EnumToCode)`ObjectTypeConverter`使用as show成功

但是`ObjectTypeConverter`是一个`EclipseLink`注释，`JPA`所以我正在寻找另一种方法来做到这一点。

那么，我怎样才能将 Java 枚举映射到 PostgreSQL 枚举呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:09:50.133

看起来你已经在 Postgres 中创建了一个枚举类型，但是表中的字段呢？

这对我有用：

**枚举**

```
public enum CampaignState
{
    READY,
    RUNNING,
    PAUSED,
    FINISHED;
} 
```

**实体**

```
...
@NotNull
@Enumerated(EnumType.STRING)
private CampaignState state = CampaignState.READY;
... 
```

**桌子**

```
CREATE TABLE campaign
(
    id UUID PRIMARY KEY,
    ...
    state CHARACTER VARYING(64) NOT NULL, -- defined by application
    ...
); 
```

我希望它有所帮助。

**>> 编辑**

根据您的评论，请看一下这个[答案](https://stackoverflow.com/questions/12145403/jpa-enum-java-lang-classcastexception-org-postgresql-util-pgobject)。

# html - 使用 DXImageTransform 的 HTML 页面旋转会导致质量损失

> ID：14858784
> 
> 赞同：3
> 
> 时间：2013-02-13T16:56:53.717
> 
> 标签：html, css, internet-explorer

我正在旋转 HTML 文档中的一些页面，以便在同一个文档中，一些页面以纵向打印，而一些以横向打印。在当前使用 CSS3 变换旋转的浏览器中，这很容易做到。但是，我还需要支持以前的方法不起作用的 IE6。当浏览器是 IE7 或更低版本时，我通过使用一些条件 CSS 来解决这个问题。这将在每个页面的主 div 上使用它（所有其他页面内容都嵌入其中）：

```
 filter: progid:DXImageTransform.Microsoft.Matrix(
            M11=3.061515884555943e-16,
            M12=1,
            M21=-1,
            M22=3.061515884555943e-16,
            SizingMethod='auto expand'); 
```

这在 IE6 中可以正常工作，因为它可以正确旋转文档中所需的页面，并且就布局而言，它可以正确打印。但是，这些旋转页面上的打印输出质量不达标。与完美打印的 CSS3 解决方案不同。如果我缩放页面或使用 90,180 或 270 度以外的角度，我可以理解降级，但我不是。

这些页面由带有文本的表格组成。所有文本的质量都降低了，尤其是粗体文本。

有什么方法可以保证质量吗？

注意：我已经尝试使用 BasicImage 旋转它，它会产生完全相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:03:18.057

如果您只使用 90°、180° 和 270°，您可以尝试使用 BasicImage 而不是 Matrix：

```
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3); 
```

BasicImage 过滤器的旋转属性可以接受以下四个值之一：0、1、2 或 3，它们将分别将元素旋转 0、90、180 或 270 度。

有关详细信息和示例，请参阅[MSDN BasicImage 过滤器文档](http://msdn.microsoft.com/en-us/library/ms532972%28VS.85%29.aspx)。

# c# - 仅将 ASP.NET MVC 应用程序管理站点锁定到 LocalHost

> ID：14858787
> 
> 赞同：5
> 
> 时间：2013-02-13T16:56:56.610
> 
> 标签：c#, asp.net, asp.net-mvc, security, authentication

我有一个 ASP.NET MVC 网站，我想添加一个小的管理页面。我遇到的问题是我将全面部署它，并且我将无法使用 SSL。我可以要求管理员远程桌面并使用本地浏览器执行管理。

这可以做到吗？`<customeErrors mode="RemoteOnly" />`除了我的管理页面外，我基本上希望获得相同的行为。我可以通过 web.config 做到这一点吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T16:58:19.497

`Request.IsLocal`是你的朋友。

[http://msdn.microsoft.com/en-us/library/system.web.httprequest.islocal.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.islocal.aspx)

您可以使用它来检查请求是否来自本地计算机。

**自定义属性**

然后，您可以将其扩展为自定义属性，但这可能有点矫枉过正。如果这是您选择的路线，这是一个很好的例子，可以做类似的事情：

[ActionResult 上的自定义属性](https://stackoverflow.com/questions/1535535/custom-attributes-on-actionresult)

MVC3 及更高版本允许您在控制器级别设置属性，而不是方法，因此您可以锁定对负责管理页面的整个控制器的访问。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-18T10:58:16.370

我通过编写自定义属性来做到这一点，如下所示：

```
public class IsLocalAttribute : AuthorizeAttribute
{
    public bool ThrowSecurityException { get; set; }

    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        var isLocal = httpContext.Request.IsLocal;
        if (!isLocal && ThrowSecurityException)
            throw new SecurityException();
        return isLocal;
    }
} 
```

整个控制器的基本用法：

```
[IsLocal]
public class LocalOnlyController : Controller
{
    public ActionResult Index()
    {
        return View();
    }
} 
```

或在特定方法上：

```
public class SomeController : Controller
{
    [IsLocal]
    public ActionResult LocalOnlyMethod()
    {
        return View();
    }
} 
```

如果要抛出安全异常而不是 302 重定向：

```
public class SomeController : Controller
{
    [IsLocal(ThrowSecurityException = true)]
    public ActionResult LocalOnlyMethod()
    {
        return View();
    }
} 
```

# mysql - 可编辑网格 HTML

> ID：14858788
> 
> 赞同：1
> 
> 时间：2013-02-13T16:56:56.937
> 
> 标签：mysql, ajax, editablegrid

mySql DB 的可编辑网格有问题。它可以很好地加载数据，但是当我需要编辑时，他们只选择第一行的数据。它不会在更新文本框中加载其他单元格数据。

任何帮助将不胜感激。我正在使用这个 [http://www.editablegrid.net/en](http://www.editablegrid.net/en)模块

# sql-server-2008 - 将 FOR XML EXPLICIT UNION 的结果分配给变量

> ID：14858790
> 
> 赞同：0
> 
> 时间：2013-02-13T16:57:06.910
> 
> 标签：sql-server-2008, for-xml-explicit

此查询工作正常

```
SELECT 1 AS TAG, NULL AS parent, 1 [dog!1]
UNION (SELECT 1,NULL, 3) 
FOR XML EXPLICIT, ROOT('dogs') 
```

我想将它分配给一个变量。没有工会，这可以正常工作：

```
DECLARE @x xml
SET @x = ((
  (SELECT 1 AS TAG, NULL AS parent, 1 [dog!1]
   FOR XML EXPLICIT, ROOT('dogs'))
  )) 
```

一旦我介绍了工会，它就不起作用了：

```
DECLARE @x xml
SET @x = ((
  (SELECT 1 AS TAG, NULL AS parent, 1 [dog!1]
   UNION (SELECT 1,NULL, 3) 
   FOR XML EXPLICIT, ROOT('dogs'))
   )) 
```

尝试了各种各样的事情。我错过了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:08:03.107

您只需要再添加一个子查询级别，如下所示：

```
DECLARE @X XML = 
(
  SELECT * FROM
  (
    SELECT 1 AS TAG, NULL AS parent, 1 [dog!1]
    UNION 
    SELECT 1,NULL, 3
  )X
  FOR XML EXPLICIT, ROOT('dogs')
);

SELECT @X; 
```

# javascript - 如何更新在使用Javascript（jQuery）加载脚本时初始化的条件中使用的变量？

> ID：14858793
> 
> 赞同：0
> 
> 时间：2013-02-13T16:57:22.587
> 
> 标签：javascript, jquery, variables, conditional-statements

```
var foo = true;

// foo here is not being updated when set to false
if(foo) {
    // and this will always work
    $("#bar").on("click", function() {
        alert("hello");
    });
}

$("#set").on("click", function() {
    alert("foo is now false");
    foo = false;
}); 
```

```
<p id="bar">bar</p>
<input type="button" id="set" value="set to false" /> 
```

如果我把`if(foo)`里面的功能，它工作正常。

但是这里的情况是多个鼠标动作要检查的条件更多，我必须`if`为每个动作编写相同的检查......

```
$("#bar").on("mouseover", function() {
    if(foo && bar && baz && qux) {
        // do job A
    }
}).on("mouseout", function() {
    if(foo && bar && baz && qux) {
        // do job B
    }
}).on("click", function() {
    if(foo && bar && baz && qux) {
        // do job C
    }
}).on("dblclick", function() {
    if(foo && bar && baz && qux) {
        // do job D
    }
}); 
```

那么我怎样才能`if`用更新的 foo 编写唯一一次来完成这项工作呢？[在这里摆弄](http://jsfiddle.net/AT6RT/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:02:16.260

在点击处理程序中移动您的 if 条件：

```
$("#bar").on("click", function() {
    if(foo) { alert("hello");}
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/AT6RT/2/)**

请注意，如果所有事件的条件都相同，则可以在`.on()`调用中将事件串在一起，例如：

```
$('#bar').on('mouseover mouseout click dblclick', function(e) {
    if(foo && bar && baz && qux) {
        switch(e.type){
            case 'mouseover':
                // thing 1
            break;
            case 'mouseout':
                // thing 2
            break;
            case 'click':
                // thing 3
            break;
            case 'dblclick':
                // thing 4
            break;
        }
    }
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T17:02:16.170

你应该这样做：

```
var foo = true;

var check = function() {
     if(foo === true) //Add here your multiple checks
         return true;
    else
        return false;
}

$("#bar").on("click", function() {
    if(check())
        alert("hello");
});

$("#set").on("click", function() {
    alert("foo is now false");
    foo = false;
}); 
```

请参阅更新的[小提琴](http://jsfiddle.net/soyuka/AT6RT/1/)。

jquery 不解析，只执行函数，所以必须检查函数中的 var 或执行新函数来检查全局 var。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:42:02.947

好吧...`if`在事件处理程序中放置多个条件并不是唯一的选择。

在这里，我将事件处理程序包装在一个函数中，正如@jfriend00 所建议的，我在 set 时调用`off`了 on 。此外，添加了另一个按钮以设置回以说明事件处理程序的重新激活（重新绑定）。`#bar``foo=false``foo``true`

```
var foo = true;

function bar() {
    if(foo) {
        $("#bar").on("click", function() {
            alert("hello");
        })/*.on("mouseover/dblclick/...")*/;
    }
}
bar();

$("#set_false").on("click", function() {
    alert("foo is now false");
    foo = false;
    // unbind mouse actions
    $("#bar").off();
});

$("#set_true").on("click", function() {
    alert("foo is now true");
    foo = true;
    // re-activate mouse actions
    bar();
}); 
```

**小提琴**：http: [//jsfiddle.net/AT6RT/7/](http://jsfiddle.net/AT6RT/7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T17:02:39.883

在您的第一个代码示例中，`if (foo)`仅在初始化时评估，而不是在每次单击时评估，因此，它当然只作用于`foo`代码在初始化时运行时的值。如果您要`foo`在事件发生时检查 的值，则检查必须在事件处理程序内，因为这是在事件发生时实际运行的唯一代码。

您有以下选择：

1.  制作一组事件处理程序，然后`foo`在每个事件处理程序内部进行评估，以根据`foo`.
2.  当您更改 的值时`foo`，使用`.off()`删除以前的事件处理程序并安装新的事件处理程序。
3.  您可以更改父对象上的类名，而不是使用该变量，并为您可能使用的每个类名值使用委托事件处理和单独的事件处理程序。这样，您将使用 jQuery 的委托事件处理逻辑和选择器比较来决定在任何给定时间应该调用哪个事件处理程序。

您可以通过编写在多个事件处理程序中使用的通用函数来使选项 1 更高效或更干燥。但是，事实仍然是，如果您想在事件发生时检查变量的值，那么您必须在事件处理程序中检查它，因为这是在事件处理程序时运行的代码。

# java - 识别单个字母的代码？

> ID：14858795
> 
> 赞同：3
> 
> 时间：2013-02-13T16:57:42.323
> 
> 标签：java, android

嗨，我在编程方面有点菜鸟，但我想创建一个 IF 语句，无论 textview 是否（我已经引用过）在它的侧面包含一个字母，并且只有那个字母，例如我想改变任何带有“1”的文本视图是什么代码？这就是我所拥有的，有人可以帮我完成吗？

```
if ("!".contains(stuff.getText()) {
    stuff.setText("Incorrect Symbol");
}else {

} 
```

我知道我可以使用键盘来控制可以输入的内容，但我希望有人能告诉我如何这样做。顺便说一句，我一直在 stuff.gettext 上画一条红线，所以有人可以告诉我问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:12:42.493

我认为这里有两个主要问题：

*   你对语法有点困惑
*   Android 经常将 CharSequence 用于其文本值，而不是 String，因此它使其更复杂一些。

假设“stuff”是您的 TextView，您可以执行以下操作：

```
String stuffText = stuff.getText().toString();
if(stuffText.contains("1")) {
    stuff.setText("Incorrect Symbol");
} else {

} 
```

我不确定为什么在 stuff.getText() 上出现红线，但该行应该有相应的编译器错误，您可以在适当的视图中检查（假设您在 Eclipse 之类的 IDE 中）。

至于整体设计，这是一条糟糕的路。您可以通过设置 XML 来指定字段接受的字符：

```
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:inputType="phone|numberSigned"
    android:digits="0123456789" /> 
```

如果您真的想获得反馈，您可能需要使用[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)，这样您就可以在用户输入时做出响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:05:09.753

使用**[String.contains("yourCharacter")](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)**检查字符串中是否存在 yourCharacter。

所以，你的代码看起来像

```
if (stuff.getText().contains("!")) {
    stuff.setText("Incorrect Symbol"); // your text contains the symbol
}else {
    ..... // your text does not contain the symbol
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T17:05:30.373

如果你想看看它是否只有一个“1”——也就是说，所有输入的都是一个“1”——那么你会想使用一个`equals`，而不是一个包含。

假设`stuff.getText()`返回输入的文本：

```
if("1".equals(stuff.getText())) {
    // we'll end up here if the only thing in the input is 1
} else {
    // otherwise we'll end up here
} 
```

对于字母，您需要使用`equalsIgnoreCase`不区分大小写的比较。

如果您想检查输入是否*包含*字符，您将使用该`contains`方法而不是 equals：

```
if(stuff.getText().contains("1")) {
    // we end up here if the input text contains 1 somewhere in it
} else {
    // otherwise we'll end up here
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T17:07:19.773

```
if(stuff.gettext().toString().contains("!") {
    stuff.setText("Incorrect Symbol");
} else {

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T17:08:41.070

你可以做：

```
if (stuff.getText().contains("!")) 
```

或者

```
if(stuff.getText().indexOf("!") != -1) 
```

如果给定的字符不在字符串中，因为`indexOf`将返回。`-1`

如上所述，`indexOf`将单个字符作为参数，因此如果要查看字符串是否包含某个子字符串，请使用`contains`.

从[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#indexOf%28int%29)：

> 返回： 此对象表示的字符序列中字符第一次出现的索引，如果字符没有出现，则返回 -1。

# mono - 修改 CECIL 中的只读字段

> ID：14858798
> 
> 赞同：1
> 
> 时间：2013-02-13T16:57:50.000
> 
> 标签：mono, mono.cecil

我的一门课程中有以下字段声明

```
private readonly string name = "some name"; 
```

如何在运行时使用 FieldDefinition 或其他方式删除程序集中的“只读”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:13:58.710

我急于得到这个答案，后来自己尝试了。所以发现下面的属性会做到这一点

```
IsInitOnly 
```

# excel - 升序/降序vba excel

> ID：14858800
> 
> 赞同：1
> 
> 时间：2013-02-13T16:57:52.890
> 
> 标签：excel, vba

我想对一列进行排序（它是一个带有 Y/N 的标志列）。它应该在每次点击时在升序/降序之间切换。

我的代码不起作用..我是 VBA 新手。请提供任何帮助。

```
Private Sub CommandButton1_Click()

   Dim xlSort As XlSortOrder 
   Dim LastRow As Long 

   With ActiveSheet

       LastRow = .Cells(.Rows.Count, "E").End(xlUp).Row End With

       If (Range("E2").Value > Range("E" & CStr(LastRow))) Then
           xlSort = xlAscending
       Else
           xlSort = xlDescending
       End If

       .Sort Key1:=Range("E2"), Order1:=xlSort, Header:=xlNo, _
          OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
          DataOption1:=xlSortNormal    

    ActiveWorkbook.Save  

End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T17:43:43.493

这段代码对我有用：

```
 Private Sub CommandButton1_Click()

     Dim xlSort As XlSortOrder
     Dim LastRow As Long

     With ActiveSheet

         LastRow = .Cells(.Rows.Count, "E").End(xlUp).Row

         If (.Range("E2").Value > .Range("E" & CStr(LastRow))) Then
             xlSort = xlAscending
         Else
             xlSort = xlDescending
         End If

         .Range("E2:E" & LastRow).Sort Key1:=.Range("E2"), Order1:=xlSort, Header:=xlNo, _
            OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
            DataOption1:=xlSortNormal

     End With
     ActiveWorkbook.Save

  End Sub 
```

希望这能解决问题！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:47:03.967

如果您声明一个范围变量（下例中的“rng”），这将更容易。这段代码应该修复它。

```
Private Sub CommandButton1_Click()

Dim xlSort As XlSortOrder
Dim LastRow As Long
Dim rng As Range

With ActiveSheet
   LastRow = .Cells(.Rows.Count, "E").End(xlUp).Row
    Set rng = Range("E2").Resize(LastRow, 1)

    With rng
        If (.Cells(1).Value > .Cells(LastRow - 1).Value) Then
           xlSort = xlAscending
        Else
           xlSort = xlDescending
        End If

        .Sort Key1:=.Cells(1), Order1:=xlSort, Header:=xlNo, _
            OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
            DataOption1:=xlSortNormal
    End With
 End With

 ActiveWorkbook.Save

End Sub 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-31T03:48:07.973

使用 2 个键进行升序和降序排序

```
Sub Button1_Click()

     Dim xlSort As XlSortOrder
     Dim LastRow As Long

     With ActiveSheet

         LastRow = .Cells(.Rows.Count, "E").End(xlUp).Row

         If (.Range("E2").Value > .Range("E" & CStr(LastRow))) Then
             xlSort = xlAscending
         Else
             xlSort = xlDescending
         End If

         .Range("E2:E" & LastRow).Sort Key1:=.Range("E2"), Order1:=xlSort, Header:=xlNo, _
            OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
            DataOption1:=xlSortNormal

     End With
     ActiveWorkbook.Save

End Sub 
```

# actionscript-3 - AS3 使用 addChild() 和一个从 XML 中获取的变量

> ID：14858801
> 
> 赞同：0
> 
> 时间：2013-02-13T16:57:56.633
> 
> 标签：actionscript-3, flash

我创建了一个函数，该函数将使用由 xml 生成的变量从我的库中添加一个子项。

```
var ChosenGraphic:String = units.unit.(@titel==k1).graphic;
var mc:MovieClip = new ChosenGraphic;
addChild(mc); 
```

我知道我不能为此使用 :String ，但我不知道该使用什么。我现在正试图让它工作 2 个小时，这真的很令人沮丧。其他一切正常，我已经测试过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:14:23.880

您想使用[getDefinitionByName()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/package.html#getDefinitionByName%28%29)顶级函数。

下面是一个使用它的示例，直接从我链接到的文档中提取。请注意，类名字符串必须是完全限定的类名（即：它包括包名和类）。

```
package {
    import flash.display.DisplayObject;
    import flash.display.Sprite;
    import flash.utils.getDefinitionByName;

    public class GetDefinitionByNameExample extends Sprite {
        private var bgColor:uint = 0xFFCC00;
        private var size:uint = 80;

        public function GetDefinitionByNameExample() {
            var ClassReference:Class = getDefinitionByName("flash.display.Sprite") as Class;
            var instance:Object = new ClassReference();
            instance.graphics.beginFill(bgColor);
            instance.graphics.drawRect(0, 0, size, size);
            instance.graphics.endFill();
            addChild(DisplayObject(instance));
        }
    }
} 
```

# java - 编码用户界面与拖放

> ID：14858802
> 
> 赞同：1
> 
> 时间：2013-02-13T16:57:57.423
> 
> 标签：java, swing, netbeans

我目前第二学期在丹麦学习计算机科学，到目前为止，我们只使用 Netbeans 的内置拖放 GUI 构建器。

几周后我们将开始进行下一个考试项目，我想知道我是否最好开始学习在没有拖放的情况下对其进行编程。

在现实世界中，自己编写 GUI 代码会更好，还是拖放编辑器足够成熟，可以在实践中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:30:32.820

您可以使用辅助轮学习更快地骑自行车。但是，没有它们，您将能够更快地骑自行车。

GUI 构建器将使您的前几个 GUI 启动并运行得更快，但如果您手动学习，最终您将更快更好地构建它们。

此外，如果您的公司决定更改您的 IDE，手动操作意味着您不会与任何一个特定的 GUI 构建器绑定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T17:04:39.910

老实说，我会说只使用任何有效的方法。拖放式 GUI 编辑器完全是为懦夫设计的 :)，但是在“手工”设计了大量的 GUI 之后，我可以说我一直很想自己创建一个拖放式编辑器。在代码中编写 GUI 布局非常乏味，但我强烈建议您熟悉这样做。从头开始理解您负责的任何代码总是很重要的。如果有东西坏了，你应该总能找到它并确切地知道它为什么坏了。创建一个带有“黑匣子”的程序会很方便，直到它开始出现问题，在这种情况下，您可能希望自己完成这项工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T17:03:05.717

如果需要，最好知道如何做。任何困难都需要编码，而不是拖放。

# iphone - 移动到分组 TableView 中不同单元格中的下一个 UITextField

> ID：14858804
> 
> 赞同：0
> 
> 时间：2013-02-13T16:58:01.417
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我有一个添加了分组表视图的 ViewController。一些单元格包含文本字段。当用户按下返回键时，我想将第一响应者切换到单元格列表中的下一个文本字段。但是，我无法让它工作，我无法判断我是否选择了不正确的单元格或选择了不正确的文本字段。

我正在使用以下内容在 cellForRowAtIndexPath 中设置我的标签。

```
cell.tag = ((indexPath.section + 1) * 10) + indexPath.row; 
```

这将创建一个标签，其中十位是节值，个位是行值。IE。标签 11 是第 0 行第 1 行。

这是我的 textFieldShould Return 的代码

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{

[textField resignFirstResponder];

UITableViewCell *cell = (UITableViewCell *)textField.superview;
NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];

cell = [self tableView:_tableView cellForRowAtIndexPath:indexPath];

if (indexPath.section == 0)
{
    if (indexPath.row == 0)
    {
        [[cell viewWithTag:((indexPath.section + 1) * 10) + (indexPath.row + 1)] becomeFirstResponder];
    }
    if (indexPath.row == 1)
    {
        [[cell viewWithTag:((indexPath.section + 2) * 10)] becomeFirstResponder];
    }
}
return YES;
} 
```

最后一点，目前新标签的增量是硬编码的，但我希望能够转到新标签而无需每次硬编码实际值。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:22:34.747

如果您的所有单元格都包含 1 个 UITextField，我会说您可以继承 UITableViewCell 并添加一个引用单元格文本字段的属性，[就像我在这里所做](https://stackoverflow.com/questions/14582924/how-to-move-to-next-cell-row-in-table-view-with-textview/14588347#14588347)的那样。

但是你说只有你的一些单元格包含一个文本字段，所以另一个选择是创建一个指向 UITextFields 的指针数组（我在[这里](https://stackoverflow.com/questions/14851633/uitextfield-becomefirstresponder-returns-no)得到了这个想法）。然后按 Return 的用户将像这样循环浏览它们：

```
- (BOOL) textFieldShouldReturn:(UITextField*)textField {
    NSUInteger currentIndex = [arrayOfTextFields indexOfObject:textField] ;
    if ( currentIndex < arrayOfTextFields.count ) {
        UITextField* nextTextField = (UITextField*)arrayOfTextFields[currentIndex+1] ;
        [nextTextField becomeFirstResponder] ;
    }
    else {
        [textField resignFirstResponder] ;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:34:56.280

将标签设置为您的 textField 而不是单元格。

```
yourTextField.tag = ((indexPath.section + 1) * 10) + indexPath.row; 
```

# git - 乘客和 git “sh: 2: master: not found”的 capistrano 错误

> ID：14858807
> 
> 赞同：0
> 
> 时间：2013-02-13T16:58:06.070
> 
> 标签：git, ruby-on-rails-3.2, capistrano, passenger

我正在为我的一个项目设置 capistrano。（这是[带有 Git、Capistrano 和 Passenger 的 Rails 3 应用程序，](http://www.aaginskiy.com/technology/2011/02/deploying-rails-3-apps-with-capistrano/)
情况几乎相同，只是我的应用程序目录受 git 控制，所以我不得不

> git 远程 rm 起源

前

> git remote add origin ssh://h41319@h33.hvosting.ua/~/www/elmor.org.ua

如果我运行 cap deploy 我得到一个错误并且部署被回滚......错误如下

> ** 事务：开始
> * 2013-02-13 18:43:36 执行 `deploy:update_code' 在本地执行：“git ls-remote ssh://h41319@h33.hvosting.ua/~/www/elmor.org。 ua\n master" sh: 2:
> master: not found
> *** [deploy:update_code] 回滚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:57:24.007

在服务器上设置应用程序目录时出错，现在可以了：

> 设置 :applicationdir, "~/www/#{domain}"

# c# - 查询要打印的组

> ID：14858816
> 
> 赞同：-2
> 
> 时间：2013-02-13T16:58:32.300
> 
> 标签：c#, sql

我正在尝试按用户类型对所有用户进行分组，将它们添加到列表中：
代码：

```
 public string[] GroupByUserType()
    {
        using (DataBase db = new DataBase ())
        {
            var query = from e in db.Users
                        group db.Users by e.UserType;

            string[] groups;

            List<string> groupsByUserType = new List<string>();

            foreach (var name in query)
            {
                foreach (var item in name)
                {
                    groupsByUserType.Add(item);<--- error here
                }
            }
            groups = groupsByUserType.ToArray();

            return groups;
        }

    } 
```

我得到：

> 错误 1 ​​'System.Collections.Generic.List.Add(string)' 的最佳重载方法匹配有一些无效参数 C:\Users\Dev4\Documents\Visual Studio 2008\Projects\Linq\SqlQuery\QueryOnName.cs 27 25查询

和

> 错误 2 参数“1”：无法从“System.Data.Linq.Table”转换为“字符串”C:\Users\Dev4\Documents\Visual Studio 2008\Projects\Linq\SqlQuery\QueryOnName.cs 27 46 SqlQuery

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:03:58.367

问题是您的 linq 查询返回列表`System.Data.Linq.Table`，尝试访问 name 属性，如下所示：

```
public string[] GroupByUserType()
{
    using (DataBase db = new DataBase ())
    {
        var query = from e in db.Users
                    group db.Users by e.UserType;

        string[] groups;

        List<string> groupsByUserType = new List<string>();

        foreach (var name in query)
        {
            foreach (var item in name["name"])
            {
                groupsByUserType.Add(item);<--- error here
            }
        }
        groups = groupsByUserType.ToArray();

        return groups;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:01:35.653

将名称转换为字符串（），然后在制作字符串列表时

```
groupsByUserType.Add(item.Name); 
```

希望这可以帮助。

# java - 在尖括号中解释 Java 扩展 ... & 语法

> ID：14858818
> 
> 赞同：1
> 
> 时间：2013-02-13T16:58:40.483
> 
> 标签：java, generics

老实说，我不知道用谷歌搜索什么：

```
public static <T extends Fragment & OnClickListener> SomeListFragment instantiate(
        T target, int requestCode, DataSource<ResultItem> dataSource, int position) {

    SomeListFragment fragment = new ExposeListFragment();

    return fragment;
} 
```

它在 SomeListFragment 类中。我确实知道这是返回 SomeListFragment 的静态方法（作为 new SomeListFragment () 的替代方法），但是括号中的内容是什么？

```
<T extends Fragment & OnClickListener> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:04:18.617

这是使用泛型的代码。

在这种情况下，您将声明您的`SomeListFragment foo`as `SomeListFragement<T> foo`where T 是一个实现接口的类`Fragment`和`OnClickListener`. 然后，当您调用时，`instantiate`您传入一个 Object`target`类型的参数`T`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:20:07.893

当心！SomeListFragment 这里没有通用参数！唯一的参数化类型是`T target`引用。程序员决定这个`target`引用应该同时实现`Fragment`和`OnClickListener`接口（尽管他没有从`target`方法体内调用/使用任何方法）。

由于它是静态方法，因此这是唯一的方法。不能用泛型参数声明类，因为这总是与实例相关联。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:02:14.317

括号中的内容定义了用作目标参数类型的泛型类型 T。它表示类型 T 可以是扩展 Fragment 类并实现 OnClickListener 接口的任何类型。

用于文档的 Google Java 泛型。

# c - K 和 R 练习 1-24

> ID：14858820
> 
> 赞同：4
> 
> 时间：2013-02-13T16:58:47.997
> 
> 标签：c, escaping, kernighan-and-ritchie, kr-c

我正在用 Kernighan 和 Ritchie 编写的 C 编程语言编写程序。

我目前正在练习 1-24，它说：

> 编写一个程序来检查 C 程序中的基本语法错误，例如不平衡的括号、方括号和大括号。不要忘记引号，单引号和双引号，`escape sequences`以及注释。

我做得很好......但我不知道`escape sequences`这些括号，括号和大括号会如何影响？

为什么他们警告转义序列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:00:39.430

在`"\""`中，有三个双引号字符，但它仍然是有效的字符串文字。中间`"`被转义，意味着外面的两个相互平衡。同样，`'\''`是一个有效的字符文字。

圆括号、方括号和大括号不受影响，当然除非它们出现在字符串文字中，而您由于转义引号而无法正确解析。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T17:00:47.850

我猜他们的意思是你需要区分`"`（开始或结束一个字符串）和`\"`（这是一个`"`字符，可能在一个字符串内）

如果您要避免报告例如`strlen("\")");`括号不平衡，这一点很重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T17:00:56.720

明显的可能性是字符串中的转义引号。如果您不考虑转义，您可能会认为字符串在那里结束。例如：`"\")\""`。是字符串文字的`)`一部分，因此它不算作不匹配的括号。

# ruby-on-rails - 检查我是否处于delayed_job 进程中

> ID：14858827
> 
> 赞同：7
> 
> 时间：2013-02-13T16:59:20.150
> 
> 标签：ruby-on-rails, ruby, delayed-job

我有一个使用delayed_job 的Rails 应用程序。我想检测我是否处于delayed_job 进程中；就像是

```
if in_delayed_job?
  # do something only if it is a delayed_job process...
else
  # do something only if it is not a delayed_job process...
end 
```

但我不知道怎么做。这就是我现在正在使用的：

```
IN_DELAYED_JOB = begin
  basename        = File.basename $0
  arguments       = $*
  rake_args_regex = /\Ajobs:/

  ( basename == 'delayed_job' ) ||
  ( basename == 'rake' && arguments.find{ |v| v =~ rake_args_regex } )
end 
```

正如@MrDanA 所说，另一个解决方案是：

```
$ DELAYED_JOB=true script/delayed_job start
# And in the app:
IN_DELAYED_JOB = ENV['DELAYED_JOB'].present? 
```

但它们是恕我直言的弱解决方案。任何人都可以提出更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:44:31.307

也许是这样的。在您的类中添加一个字段并在您调用从延迟作业中完成所有工作的方法时设置它：

```
class User < ActiveRecord::Base
  attr_accessor :in_delayed_job

   def queue_calculation_request
     Delayed::Job.enqueue(CalculationRequest.new(self.id))
   end

   def do_the_work
     if (in_delayed_job)
       puts "Im in delayed job"
     else
       puts "I was called directly"
     end
   end

   class CalculationRequest < Struct.new(:id)
     def perform
       user = User.find(id)
       user.in_delayed_job = true
       user.do_the_work
     end

     def display_name
       "Perform the needeful user Calculations"
     end
   end
end 
```

这是它的外观：

从延迟的工作：

```
Worker(host:Johns-MacBook-Pro.local pid:67020)] Starting job worker
Im in delayed job
[Worker(host:Johns-MacBook-Pro.local pid:67020)] Perform the needeful user Calculations completed after 0.2787
[Worker(host:Johns-MacBook-Pro.local pid:67020)] 1 jobs processed at 1.5578 j/s, 0 failed ... 
```

从控制台

```
user = User.first.do_the_work
  User Load (0.8ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 101]]
I was called directly 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:51:14.643

我处理这些的方式是通过一个偏执狂的工人。我使用delayed_job 进行上传到我网站的视频转码。在视频模型中，我有一个名为 video_processing 的字段，默认设置为 0/null。每当视频被delayed_job 转码时（无论是创建还是更新视频文件），它都会使用delayed_job 中的钩子，并在作业开始时更新video_processing。作业完成后，已完成的钩子会将字段更新为 0。

在我的视图/控制器中，我可以做`video.video_processing? ? "Video Transcoding in Progress" : "Video Fished Transcoding"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-31T21:55:40.323

这对我有用：

```
def delayed_job_worker?
  (ENV["_"].include? "delayed_job")
end 
```

Unix 会将“_”环境变量设置为当前命令。

如果你有一个名为“not_a_delayed_job”的 bin 脚本，那就错了，但不要那样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-18T05:40:37.743

ENV['PROC_TYPE'] 怎么样
只说到heroku...但是当你是一个工人测功机时，这被设置为'工人'我用它作为我的“我在一个DJ”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-06T23:45:46.060

您可以为延迟作业创建插件，例如`is_dj_job_plugin.rb`在`config/initializers`目录中创建文件。

```
class IsDjJobPlugin < Delayed::Plugin

  callbacks do |lifecycle|
    lifecycle.around(:invoke_job) do |job, *args, &block|
      begin
        old_is_dj_job = Thread.current[:is_dj_job]
        Thread.current[:is_dj_job] = true
        block.call(job, *args) # Forward the call to the next callback in the callback chain
        Thread.current[:is_dj_job] = old_is_dj_job
      end
    end
  end

  def self.is_dj_job?
    Thread.current[:is_dj_job] == true
  end
end

Delayed::Worker.plugins << IsDjJobPlugin 
```

然后，您可以通过以下方式进行测试：

```
class PrintDelayedStatus
  def run
    puts IsDjJobPlugin.is_dj_job? ? 'delayed' : 'not delayed'
  end
end

PrintDelayedStatus.new.run
PrintDelayedStatus.new.delay.run 
```

# javascript - 匹配单个单词，结尾可能有标点符号或复数形式（正则表达式）

> ID：14858828
> 
> 赞同：7
> 
> 时间：2013-02-13T16:59:23.490
> 
> 标签：javascript, regex

我在 Regex 方面一直在进步，但我想出了一些超出我目前能力范围的东西。

我想构建一个函数来测试（返回真或假）来测试是否在字符串中找到一个单词。但是，如果在另一个词中找到了这个词，我不希望有一个肯定的匹配。我还想建立检查复数的可能性。

以下是我希望得到的结果的一些示例：

**要查找的单词：** “bar”

**“要搜索的字符串”//它应该返回的内容**

“富吧”//真

“富吧。” //真的

“富吧！” //true（对于“bar”之前或之后的任何其他标点符号也是如此）

“美式酒吧。” //真的

“foo 裸露。” //true（即使bares与bars有不同的含义，我也可以返回true，因为我需要检查以“es”复数形式的单词，并且我不希望构建一个正则表达式来知道哪些单词复数用“s”和“es”）

"my name is bart simpson" //false (bar 实际上是 "bart" 的一部分)

“巴特辛普森去了酒吧。” //真的

我将使用 javascript/jquery 来检查匹配项

非常感谢你的帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T18:08:24.847

```
var rgx = new RegExp('\\b' + word + '(?:es|s)?\\b');
rgx.test(string); 
```

这将返回`true`您在请求中指定的所有字符串。 `\b`表示“单词边界”，我认为它是`\W`（包括句点和感叹号）中的任何字符以及字符串的开头或结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T11:58:32.163

这已经得到了回答和接受，但我想我会提供一种*稍微*过度设计的方法，可以更好地匹配复数形式。除此之外，它使用与@ExplosionPills 解决方案完全相同的逻辑：

```
(function() {
  var isWord = function(word) { return /^[a-z]+$/i.test(word); },

      exceptions = {
        man:   'men',
        woman: 'women',
        child: 'children',
        mouse: 'mice',
        tooth: 'teeth',
        goose: 'geese',
        foot:  'feet',
        ox:    'oxen'
      },

      pluralise = function(word) {
        word = word.toLowerCase();

        if (word in exceptions) {
          // Exceptions
          return '(?:' + word + '|' + exceptions[word] + ')';

        } else if (word.match(/(?:x|s|[cs]h)$/)) {
          // Sibilants
          return word + '(?:es)?';

        } else if (word.match(/[^f]f$/)) {
          // Non-Geminate Labio-Dental Fricative (-f > -ves / -fs)
          return '(?:' + word + 's?|' + word.replace(/f$/, 'ves') + ')';

        } else if (word.match(/[^aeiou]y$/)) {
          // Close-Front Unround Pure Vowel (-Cy > -Cies)
          return '(?:' + word + '|' + word.replace(/y$/, 'ies') + ')';

        } else if (word.substr(-1) == 'o') {
          // Mid-Back Round Vowel (-o > -oes / -os)
          return word + '(?:e?s)?';

        } else {
          // Otherwise
          return word + 's?';
        }
      };

  String.prototype.containsNoun = function(singularNoun) {
    if (!isWord(singularNoun)) throw new TypeError('Invalid word');
    var check = new RegExp('\\b' + pluralise(singularNoun) + '\\b', 'gi');
    return check.test(this);
  };

  String.prototype.pluralException = function(plural) {
    if (!isWord(this) || !isWord(plural)) throw new TypeError('Invalid exception');

    var singular = this.toLowerCase();
    plural = plural.toLowerCase();

    if (!(singular in exceptions)) {
      exceptions[singular] = plural;
    }
  };
})(); 
```

它扩展了本机`String`对象，因此您可以像这样使用它：

```
'Are there some foos in here?'.containsNoun('foo'); // True 
```

有关在 Node.js 中完成的一些快速而简单的单元测试，请参阅[要点。](https://gist.github.com/Xophmeister/4952329)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T17:58:32.310

```
/ (bar((e)?s)?)[ !?.]/ 
```

取决于您到底需要什么，这可能会起作用。由于重叠的空格，它不会在字符串“bars bars”中找到两个小节。

```
/ (bar((e)?s)?)(?=[ !?.])/ 
```

自 js1.5 以来，这应该与“bars bar”（两个匹配项）一起使用，现在所有浏览器都支持它。

# php - 如何将下拉列表中的选定值添加到数据库中？

> ID：14858831
> 
> 赞同：1
> 
> 时间：2013-02-13T16:59:38.550
> 
> 标签：php, html, phpmyadmin, html-select

我可以从数据库中调用下拉框的值，但我无法将所选值保存在数据库中的新行中。有人可以告诉我哪里出错了吗？

```
if (isset($_POST["addDestination"]) && $_POST["addDestination"]=="yes")
{
    $countriesName=$_POST["countriesName"];
    $Name=$_POST["Name"];
    $photo=$_POST["photo"];
    $description=$_POST["description"];
    $Airport=$_POST["Airport"];
    $Airport2=$_POST["Airport2"];
    $Airline=$_POST["Airline"];
    $Airline2=$_POST["Airline2"];
    $Airline3=$_POST["Airline3"];
    $Airline4=$_POST["Airline4"];

    $dbQuery= "INSERT INTO destinations VALUES( NULL, '$countriesName', '$Name', '$photo', '$description', '$Airport', '$Airport2', '$Airline', '$Airline2', '$Airline3', '$Airline4')";
    $result= mysql_query($dbQuery,$db); 
```

从数据库中调用值的html代码和php代码是：

```
<form id="addDestination" name="addDestination" method="post" action="addDestination.php">
    <input type="hidden" name="addDestination" value="yes">
    <div id="countriesName" class="info"><span class="formLabel">Country (Please select one of the following)</span><br>
    <?php 
      echo "<p></p>";
      $dbQuery="SELECT Name FROM countries order by name asc";
      $dbResult=mysql_query($dbQuery);
      echo "<select name=\"Name\">";
      while ($dbRow=mysql_fetch_array($dbResult)) {
        $Name=$dbRow["Name"];
        echo "<option value='$Name'>$Name</option>";
      }
      echo "</select>";
      echo "<p> </p>";
    ?>
  </div> 
```

当我尝试保存选定的值时，数据库中的字段保持空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:14:39.240

我认为这可能是，而不是：

```
$countriesName=$_POST["countriesName"]; 
```

您可能需要使用：

```
$countriesName=$_POST["Name"]; 
```

`"Name"`是您的实际 HTML 选择的名称，而不是`"countriesName"`包含 div 的名称。

# jsp - jsp:usebean 标识符错误

> ID：14858836
> 
> 赞同：2
> 
> 时间：2013-02-13T17:00:02.163
> 
> 标签：jsp

```
<jsp:useBean id="employee" 
    class="com.delhiguru.test.dto.EmployeeBean" 
    scope="request" /> 
```

在执行此操作时，我收到此错误：

```
unknown type for identifier employee 
```

我的豆类是`com.delhiguru.test.dto.EmployeeBean`

我的主要任务是从 JSP 页面中的 beanclass 中获取值。

# solr - Tomcat 7 上的 Solr 3.6.2：.doc 文件只有在使用 OpenOffice 重新保存后才被接受？

> ID：14858837
> 
> 赞同：0
> 
> 时间：2013-02-13T17:00:05.120
> 
> 标签：solr

我有大量文件，我正在尝试编制索引，并且文件格式（如 pdf 或 html）没有问题。但是，一旦我通过 post.jar 添加 .doc 文件，就会出现错误 400（错误请求）。

重新保存它们后，文件被提交就好了。我找不到任何日志文件（即使我激活了日志记录）。以下架构有问题吗？

```
 <field name="id" type="string" indexed="true" stored="true" required="true" /> 
   <field name="name" type="string" indexed="true" stored="true"/>
   <field name="title" type="text_de" indexed="true" stored="true" multiValued="true"/>
   <field name="subject" type="text_de" indexed="true" stored="true"/>
   <field name="description" type="text_de" indexed="true" stored="true"/>
   <field name="comments" type="text_de" indexed="true" stored="true"/>
   <field name="author" type="string" indexed="true" stored="true"/>
   <field name="keywords" type="text_de" indexed="true" stored="true"/>
   <field name="content_type" type="string" indexed="true" stored="true" multiValued="true"/>
   <field name="last_modified" type="date" indexed="true" stored="true"/>
   <field name="links" type="string" indexed="true" stored="true" multiValued="true"/>
   <field name="text" type="text_de" indexed="true" stored="true" multiValued="true"/>
   <field name="sku" type="text_de_splitting_tight" indexed="true" stored="true" omitNorms="true"/>
   <field name="payloads" type="payloads" indexed="true" stored="true"/> 
```

谢谢，

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:20:40.133

已解决的问题：在原始 .doc 文件中使用了一个名为“company”的非多值字段。

# compiler-construction - “编译 asn.1”是什么意思？

> ID：14858838
> 
> 赞同：1
> 
> 时间：2013-02-13T17:00:11.647
> 
> 标签：compiler-construction, asn.1

我听过很多次“*在编译**asn.1**后出现很多错误*”或类似的东西。*但是“ compile asn.1* ”到底是什么意思呢？据我所知 asn.1 是一种描述数据结构的符号，它应该如何编译（从 asn.1 翻译成什么语言？）以及我如何处理这些编译的东西？

更新：

它只是某种编程语言中的结构编码器/解码器的一代吗？之后可以使用编码器和解码器将这些集成到一个信息系统中进行信息交换吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:52:12.513

ASN.1 规范描述了您希望与其他机器交换的消息。它以独立于编程语言或计算机体系结构的方式执行此操作。这意味着要使用 ASN.1 规范，需要一个工具来“编译”该 ASN.1 规范，在以目标编程语言为目标机器架构生成代码以进行编码之前检查语法错误和某些类型的语义错误并解码来自 ASN.1 规范的消息。请注意，除了基于生成的结构生成用于编码和解码消息的代码之外，ASN.1 编译器还会生成 C 结构、Java 类或 C++ 类。

有一个很好的地方可以在不处理实际生成的代码的情况下看到这个过程的发挥。[http://asn1-playground.oss.com](http://asn1-playground.oss.com)上有一个在线 ASN.1 编译器和运行时引擎，您可以在其中编译 ASN.1 规范和编码/解码消息，而无需使用目标编程语言编写任何代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T22:42:05.070

它是某种编程语言中数据结构编码器/解码器的一代。之后，可以使用这些编码器/解码器并集成到一个信息系统中进行信息交换。

# wpf - 具有嵌套集合的 WPF 数据绑定不会更新控件

> ID：14858841
> 
> 赞同：0
> 
> 时间：2013-02-13T17:00:13.657
> 
> 标签：wpf, data-binding, collections

我有`Objectmodel`一些嵌套的集合：

```
public class MainViewModel :  BaseViewModel
{
    private Dictionary<String, Diagram> _diagrams;

    public Dictionary<String, Diagram> Diagrams
    {
        get { return _diagrams; }
        set
        {
            _diagrams = value;
            OnPropertyChanged("Diagrams");
        }
    } 
```

}

基础 Viewmodel 实现`INotifyPropertyChanged`。里面`Diagram`有一组曲线：

```
public class Diagram
{
    private  ObservableCollection<DiagramCurve> curves;
    [JsonIgnoreAttribute]
    public ObservableCollection<DiagramCurve> Curves
    {
        get { return curves; }
    }

    public Diagram()
    {
        curves = new ObservableCollection<DiagramCurve>();
    }
} 
```

`DiagramCanvas`我绑定到我的 Xaml中的一个实例，如下所示：

```
 <wd:DiagramCanvas x:Name="diagramCanvas" 
                          Diagram ="{Binding Diagrams[Diagram1]}"  
                          Grid.Row="2" Grid.Column="1" 
                          Height="auto" Width="Auto"  
                          HorizontalAlignment="Stretch"  
                          VerticalAlignment="Stretch" 
                          Margin="10"   
                          Background="{StaticResource DiagrambackgroundBrush }" /> 
```

`MainView`如果我分配一个全新的 Diagrams 集合的 Diagrams 属性，它工作得很好。但我需要的是`DiagramCanvas`当曲线集合发生变化时控制得到更新。但这不会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:54:40.607

您的绑定在`MainViewModel` `Diagrams`属性上，并选择与“Diagram1”字符串对应的图表。在您的绑定路径中，没有提及属性，因此当曲线抛出事件`Curves`时绑定不会更新。`CollectionChanged`为了防止这种情况，您可以在您的 中注册此事件`MainViewModel`，然后在您的字典中抛出一个`PropertyChanged`好图表的事件。

但是......如果我没记错的话，.Net Dictionary 没有实现`INotifyCollectionChanged`，而且我不确定绑定是否会更新。你应该试着让我了解情况。

快乐编码，

安托万

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:57:06.677

我试图`Diagram`从“ObservableCollection”继承，但即使这也没有帮助，因为[ObservableCollection 依赖属性在删除集合中的项目时不会更新](https://stackoverflow.com/questions/4362278/observablecollection-dependency-property-does-not-update-when-item-in-collection)解释。

由于我的 CustomControl 的 DependencyProperty`DiagramCanvas`绑定到 Dictionary 的值项而`MainViewModel.Diagrams`不是实例的`Diagram`属性，因此当实例的属性发生更改时，不会触发`OnPropertyChanged`DependencyProperty 的事件。`DiagramCanvas``Diagram`

仅当为 Dictionary 内的值项分配新值时`MainViewModel.Diagrams`，才会触发此事件，因为这会为`DependencyProperty`of分配一个新值`DiagramCanvas`。

因此我必须手动订阅集合的事件：。

```
public class DiagramCanvas : Canvas
{
  // Is called only when new Items get inserted info the Dictionary
  static void OnDiagramPropertyChanged(DependencyObject obj, 
                                     DependencyPropertyChangedEventArgs args)
  {
      DiagramCanvas THIS = (DiagramCanvas)obj;

      Diagram new_diagram = (Diagram)args.NewValue;
      Diagram old_diagram = (Diagram)args.NewValue;

      if (old_diagram != null)
      {
        // Unsubscribe from CollectionChanged on the old collection
        old_diagram.Curves.CollectionChanged -= THIS.OnCollectionChanged;
      }

      if (new_diagram != null)
      {
        // Subscribe to CollectionChanged on the new collection
        new_diagram.Curves.CollectionChanged += THIS.OnCollectionChanged;
      }
  }

  //Is called everytime the Curves collecion changes
  void OnCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
  {

  }
} 
```

# multithreading - 空指针异常axis2 webservice

> ID：14858843
> 
> 赞同：1
> 
> 时间：2013-02-13T17:00:20.960
> 
> 标签：multithreading, web-services, nullpointerexception, axis2

我在axis2上有一个webservice，在这个类中，一个函数启动一个线程，另一个函数检查线程是否仍在运行，但是当我请求检查线程是否仍在运行的函数时，我收到此错误：

org.apache.axis2.AxisFault：尝试在 org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:531) 在 org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation) 调用服务方法 isTaskRunning 时发生异常.java:375) 在 org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421) 在 org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229) 在 org.apache.axis2。 client.OperationClient.execute(OperationClient.java:165) 在 be.kdg.cosys.thesis.ExecutorStub.isTaskRunning(ExecutorStub.java:487) 在 be.kdg.cosys.thesis.AllToPublicScheduler.executeTask(AllToPublicScheduler.java:158)在 be.kdg.cosys 的 be.kdg.cosys.thesis.AllToPublicScheduler.incomingApplication(AllToPublicScheduler.java:106)。论文.ParserToScheduler.run(ParserToScheduler.java:111) at java.lang.Thread.run(Unknown Source)

这是网络服务类：

公共类执行器{

```
private Task task = null;
private long startTime = 0;
private long runTime = 0;
private Thread taskThread=null;

public void execute(byte[] object){ 
    ObjectInputStream in = null;
    try {
        in = new ObjectInputStream(new ByteArrayInputStream(object));
        task = (Task) in.readObject();
        in.close();
    } catch (IOException | ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    runTime = task.getRunTime();
    startTime = System.currentTimeMillis();
    taskThread=new Thread(task);
    taskThread.start();
}
public long timeToFinish()
{
    return runTime-(System.currentTimeMillis()-startTime);
}
public boolean isTaskRunning()
{
    return taskThread.isAlive();        
}
public byte[] getTask()
{
    byte[] ser=null;
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ObjectOutput out = null;
    try {
      out = new ObjectOutputStream(bos);   
      out.writeObject(task);
      ser = bos.toByteArray();
      out.close();
      bos.close();
    } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    }   
    return ser;
} 
```

}

在网络服务的服务器上，我得到一个 nullpointerexeception（catalina 的日志）

谁能帮我？

约里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:04:43.920

是的，你会得到一个空指针异常——因为不会在启动线程的同一个类实例上调用 Web 服务方法。由于变量 taskThread 将为 null ，并且在方法 isTaskRunning() 中调用了 null 对象上的方法，因此会导致 NullpointerException

理想情况下，如果您需要使用 web 服务轮询线程，您应该使用说明线程状态的恐吓媒体。恐吓可以是存储线程状态的数据库表

# java - JavaFX 2 - 访问 windows 系统麦克风音量

> ID：14858847
> 
> 赞同：0
> 
> 时间：2013-02-13T17:00:32.117
> 
> 标签：java, system, javafx-2, volume, microphone

有什么方法可以访问和操作系统麦克风音量，就好像我在 Windows 声音管理器上一样？使用滑块，我应该设置我最喜欢的麦克风音量并可视化当前选定的音量。当然，我是在一个独立的应用程序上，而不是在一个基于网络的应用程序上。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:27:29.580

JFX jira 中与此相关的两个问题：javafx-jira.kenai.com/browse/RT-3458 和 javafx-jira.kenai.com/browse/RT-22200。根据他们的说法，现在不支持，我认为 8.0 将不支持。

可以关注一下JDK sound API：

[http://docs.oracle.com/javase/6/docs/technotes/guides/sound/programmer_guide/chapter6.html](http://docs.oracle.com/javase/6/docs/technotes/guides/sound/programmer_guide/chapter6.html)

特别是这个片段：

> 更改线路的音量 假设您的程序将特定的图形滑块与特定线路的音量控制相关联。使用以下 FloatControl 方法设置音量控件的值（即 FloatControl.Type.VOLUME）：
> 
> void setValue(float newValue) 检测到用户移动了滑块，程序获取滑块的当前值并将其作为参数 newValue 传递给上述方法。这会改变流经“拥有”控件的线路的信号音量。

关于捕获麦克风的stackoverflow问题：

[Java Sound API - 捕获麦克风](https://stackoverflow.com/questions/3705581/java-sound-api-capturing-microphone)

# tsql - 忽略相隔小于 X 时间的结果

> ID：14858850
> 
> 赞同：0
> 
> 时间：2013-02-13T17:00:43.180
> 
> 标签：tsql, sql-server-2012

我目前拥有的数据类似于下面的表格：

```
 UserId      VisitDate
 1           2012-01-01 00:15:00.000
 1           2012-01-01 00:16:00.000
 1           2012-01-12 00:15:00.000
 1           2012-01-12 00:16:00.000
 1           2012-01-24 00:15:00.000
 1           2012-01-24 00:16:00.000 
```

我想只返回相隔 10 天或更长时间的结果，看起来像这样：

```
 UserId      VisitDate
 1           2012-01-01 00:15:00.000
 1           2012-01-12 00:15:00.000
 1           2012-01-24 00:15:00.000 
```

也许比我做的更简单，但是如何在 transact-sql 中这样做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:12:32.710

在这种情况下，您可以使用新`lag()`功能：http: [//msdn.microsoft.com/en-us/library/hh231256.aspx](http://msdn.microsoft.com/en-us/library/hh231256.aspx)

就像是：

```
SELECT UserId, VisitDate
FROM(
  SELECT UserId,
         VisitDate, 
         LAG(VisitDate,1,'1900-01-01')OVER(PARTITION BY UserId ORDER BY VisitDate) PrevVisitDate
   FROM dbo.YourTable
)X
WHERE DATEDIFF(day,PrevVisitDate,VisitDate)>=10; 
```

你可以在这里看到它的作用：[http ://sqlfiddle.com/#!6/a0f02/1](http://sqlfiddle.com/#!6/a0f02/1)

# email - Google Apps：发送给用户的电子邮件也被发送到域的辅助联系人电子邮件地址

> ID：14858856
> 
> 赞同：-1
> 
> 时间：2013-02-13T17:00:54.733
> 
> 标签：email, gmail, google-apps

我新创建的域上有两个管理员用户。

发送到其中的电子邮件也会发送到在域设置 > 常规 > 联系信息 > 辅助电子邮件地址中设置的电子邮件地址。发送给其他用户（主要域联系人）的电子邮件不会发生这种情况。

我已经尝试取消选中该用户的“继承路由”，但没有任何区别（我在取消选中和重试之间等待了五个多小时）。

任何想法可能会发生什么？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:44:30.163

我打电话给 Google Apps 支持并能够解决这个问题。

事实证明，最初创建域的人设置了一个“接收路由规则”来自动将所有用户的所有电子邮件转发到他的个人地址。

可以通过 Google Apps cPanel 调整接收路由规则。转到设置，然后是电子邮件设置，然后转到接收路由，单击编辑，并检查您的规则以确保未选中“添加更多收件人”复选框（我的已选中并设置了个人电子邮件地址）或简单地删除如果没有设置其他选项，则规则。

# c# - 如何以及在何处为 MVP Winforms 正确设置 Castle Windsor v2.5

> ID：14858860
> 
> 赞同：1
> 
> 时间：2013-02-13T17:01:14.173
> 
> 标签：c#, .net, winforms, dependency-injection, castle-windsor

我对 Winforms 场景的 Castle Windsor 的正确实现感到困惑，我发现的所有文档都是关于 WCF 和 ASP.NET MVC 所以我寻求帮助以在 Windows 窗体中正确实现 Castle Windsor。现在这是我的代码...我从 MVP [http://dotnetchris.wordpress.com/2009/02/16/creating-a-generic-model-view-presenter-framework/这种方法开始](http://dotnetchris.wordpress.com/2009/02/16/creating-a-generic-model-view-presenter-framework/)

传递到 Winforms 我做了这个

```
public interface IPresenter<TViewModel>
{
    TViewModel View { get; set; }

    event EventHandler ViewInitialized;

    void OnViewInitialized(EventArgs e);

    event EventHandler ViewLoaded;

    void OnViewLoaded(EventArgs e);
} 
```

基本形式是

```
public partial class MvpForm<TPresenter, TViewModel> : Form
    where TPresenter : IPresenter<TViewModel>
    where TViewModel : class 
```

在第一部分之后，我的主持人是

```
public class PatientSearchCreatePresenter: IPresenter<IPatientFilterViewModel>
{
    IPatientBusinessService patient;

    /// <summary>
    /// Initializes a new instance of the <see cref="PatientFilterPresenter" /> class.
    /// </summary>
    public PatientSearchCreatePresenter(IPatientBusinessService Patient)
    {
        patient = Patient;
    } 
```

我的搜索和创建患者的表格是这样的

```
public partial class FormSearchCreatePatient : MvpForm<PatientSearchCreatePresenter,IPatientSearchCreateViewModel> , IPatientSearchCreateViewModel
{ 
```

我应该在哪里以及如何为 View 和 Presenter 服务属性执行 Castle 组件的安装和注册

太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:52:15.483

这是我前段时间的做法：

```
public class BusinessContainer : WindsorContainer
{
    public BusinessContainer()
    {
        RegisterComponents();
    }

    private void RegisterComponents()
    {
        // Presenters
        AddComponentWithLifestyle("HelloWorld.presenter", typeof(HelloWorldPresenter), LifestyleType.Transient);
    }
}
} 
```

由于包含 IoC 容器有点复杂，完整的一步一步看[这里](http://www.leniel.net/2010/02/model-view-presenter-mvp-castle-asp-net.html)。

# c# - xna 纹理坐标

> ID：14858861
> 
> 赞同：3
> 
> 时间：2013-02-13T17:01:15.293
> 
> 标签：c#, xna, coordinates, textures

我一直在尝试结合几个[riemers](http://www.riemers.net/eng/Tutorials/xnacsharp.php)教程来制作一个有纹理和光照的地形。我快到了，但我无法正确应用纹理。我相信问题出在 SetUpVertices() 与纹理坐标的设置中。我知道目前代码读取它们都设置为 (0, 0) 并且我需要将它们设置为纹理的角落，但我似乎无法正确获取代码。有没有人可以提供帮助？

```
private void SetUpVertices()
{
    vertices = new VertexPositionNormalTexture[terrainWidth * terrainHeight];
    for (int x = 0; x < terrainWidth; x++)
    {
        for (int y = 0; y < terrainHeight; y++)
        {
            vertices[x + y * terrainWidth].Position = new Vector3(x, -y, heightData[x, y]);
            vertices[x + y * terrainWidth].TextureCoordinate.X = 0;
            vertices[x + y * terrainWidth].TextureCoordinate.Y = 0;
        }
    }
} 
```

我已将 Game1.cs 的完整代码添加到这个馅饼[http://pastebin.com/REd8QDZA](http://pastebin.com/REd8QDZA)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:05:08.057

您可以通过从 0 到 1 的插值来拉伸整个表面的纹理：

```
vertices[x + y * terrainWidth].TextureCoordinate.X = x / (terrainWidth - 1.0);
vertices[x + y * terrainWidth].TextureCoordinate.Y = y / (terrainHeight - 1.0); 
```

# android - Android XML 序列化

> ID：14858865
> 
> 赞同：1
> 
> 时间：2013-02-13T17:01:30.900
> 
> 标签：android, xml, serialization, xml-serialization

我正在尝试通过使用简单 Xml 序列化来序列化我的应用程序中的对象。（[http://simple.sourceforge.net/home.php](http://simple.sourceforge.net/home.php)）。我正在尝试序列化我的人员类，但是当我在我的设备上运行它时，我找不到我创建的 xml 文件。请在下面查看我的代码：

人物类：

```
public class Person {

    public Person() {
    }

    public Person(String inFirstName, String inLastName) {
        SetFirstname(inFirstName);
        SetLastname(inLastName);
    }

    private String FirstName;

    public String GetFirstName() {
        return FirstName;
    }

    public void SetFirstname(String inFirstName) {
        FirstName = inFirstName;
    }

    private String LastName;

    public String GetLastName() {
        return LastName;
    }

    public void SetLastname(String inLastName) {
        LastName = inLastName;
    }

    @Override
    public boolean equals(Object inObject) {
        if (inObject instanceof Person) {
            Person inPerson = (Person) inObject;
            return this.FirstName.equalsIgnoreCase(inPerson.FirstName)
                    && this.LastName.equalsIgnoreCase(inPerson.LastName);
        }
        return false;
    }
} 
```

主要活动：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Person person1 = new Person("billy", "boontay");

        File xmlFile = new File(getFilesDir().getPath() + "/Person.xml");

        try {

            Serializer serializer = new Persister();

            serializer.write(person1, xmlFile);

        } catch (Exception e) {

            e.printStackTrace();

        }

    }

} 
```

谁能看到我哪里出错了？在有人建议之前，我已经将写入外部存储权限添加到我的清单中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:17:41.737

```
File xmlFile = new File(getFilesDir().getPath() + "/Person.xml"); 
```

我记得，getFilrsDir() 方法将返回应用程序文件夹路径，该路径位于 data/data 文件夹中，只有在您的设备植根后才能找到它，
试试这个：

```
File xmlFile = new File(Environment.getExternalStorageDirectory().getPath() +  "/Person.xml"); 
```

并且您可能还需要在您的 Person 类中添加一些注释：

```
@root (name = "person") <br>
public class Person {

    @Element (entry = "firstname")
    private String FirstName;
    @Element (entry = "lastname")
    private String LastName;

} 
```

希望这有帮助。

# powershell - 获取 Get-Counter commandlet 的属性

> ID：14858868
> 
> 赞同：0
> 
> 时间：2013-02-13T17:01:33.960
> 
> 标签：powershell

我正在探索 PowerShell 以获取几台服务器的 CPU 利用率样本。`Get-Counter`为此，我正在使用command-let。`"\Processor(_Total)\% Processor Time"`我需要某个样本和间隔的 CPU 利用率值，或者换句话说，计数器的熟值。我使用 commandlet 之类的东西

```
$temp_array=Get-Counter  -ComputerName server1  -Counter "\Processor(_Total)\% Processor Time" -MaxSamples 2 -SampleInterval 1
$temp_array[0].countersamples|Select-Object -Property CookedValue 
```

和输出就像

```
CookedValue
-----------
2.90508736147317 
```

我只需要价值。如果我使用

```
$array_temp=Get-Counter  -ComputerName pwisdevsql10  -Counter "\Processor(_Total)\% Processor Time" -MaxSamples 2 -SampleInterval 1  
[String]$var=$array_temp[0].countersamples|Select-Object -Property CookedValue 
echo $var 
```

它提供输出

```
@{CookedValue=12.6116279752759} 
```

类型 Cast to double 不起作用。如何仅提取值“12.6116279752759”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:14:16.877

这应该照顾它：

```
[String]$var=$array_temp[0].countersamples|Select-Object -ExpandProperty CookedValue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:15:29.183

只需`-ExpandProperty`使用`Select-Object`. `CookedValue`它返回属性的内容/值，而不是像你的 atm 那样具有属性的对象。像这样：

```
$temp_array=Get-Counter -Counter "\Processor(_Total)\% Processor Time" -MaxSamples 2 -SampleInterval 1
$temp_array[0].CounterSamples |Select-Object -ExpandProperty CookedValue 
```

# jquery - 如何将 Li 标签从第一个 li 移动到最后一个 li 以使滑块连续循环

> ID：14858871
> 
> 赞同：0
> 
> 时间：2013-02-13T17:01:35.140
> 
> 标签：jquery, html

我试图让我的滑块循环到第一个图像，而不是通过其他图像返回第一个图像，而是在按下下一个箭头时将第一个 Li 标签添加到最后一个 Li 标签，以便它始终添加以前的 Li 将里面的图像标记到最后。也需要它在以前的工作上工作。

到目前为止，我已经走了多远：

html:

```
<div class="slider corners">
        <ul>
            <li class="corners"><span class="corners"></span><img src="../images/slider/image_1.png" width="854" height="393" alt="Image" /></li>
            <li class="corners"><span class="corners"></span><img src="../images/slider/image_2.png" width="854" height="393" alt="Image" /></li>
            <li class="corners"><span class="corners"></span><img src="../images/slider/image_3.png" width="854" height="393" alt="Image" /></li>
        </ul>                                              
</div>
<div id="slider-nav">
    <button class="left_arrow" data-dir="prev"></button>
    <button class="right_arrow" data-dir="next"></button>
</div> 
```

查询：

```
$(function() {
var sliderUL = $('div.slider').css('overflow', 'hidden').children('ul'),
    imgs = sliderUL.find('img'),
    imgWidth = imgs[0].width,
    imgsLen = imgs.length,
    current = 1, 
    totalImgsWidth = imgsLen * imgWidth; 

$('#slider-nav').show().find('button').on('click', function() {
    var direction = $(this).attr('data-dir'),
    loc = imgWidth;     

    if ( direction === 'next' ) {
            $('.slider li').first().insertAfter( '.slider li:last');
        }else if ( direction === 'prev' ) {
            $('.slider li:last').insertAfter('.slider ul');
        }

    transition(sliderUL, loc, direction);
}); 

function transition( container, loc, direction ) {
    var unit; // -= +=

    if ( direction && loc !== 0 ) {
        unit = ( direction === 'next' ) ? '-=' : '+=';
    }

    container.animate({
        'margin-left': unit ? (unit + loc) : loc
    });
} 
```

});

我想知道这是否很明显，或者我是否完全错误地这样做了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:27:18.803

这有几件事不对：

```
$('.slider li:last').insertAfter('.slider ul'); 
```

会将最后一个 li 放在 UL 之后，如下所示：

```
 <ul>
    <li></li>
    <li></li>
    </ul>
    <li></li> <-- here! 
```

显然不是你想要的，改用这个：

```
$('.slider li:last').insertBefore('.slider ul li:first'); 
```

您的 html data-dir 值也可能是 += 和 -= ，因此您可以删除整个单元的内容，这将使其更容易。

将第一个或最后一个 li 移动到开始/结束后，您需要将 ul 重新定位回 margin-left: 0; 否则它将

# c# - 为 Lucene 索引准备 doc 和 docx 文件

> ID：14858874
> 
> 赞同：0
> 
> 时间：2013-02-13T17:01:48.180
> 
> 标签：c#, .net, lucene

我想问是否有一种快速的方法可以将文档内容放入单个文档字段中。我见过的所有例子都有相对较短的字符串。我无法将整篇期刊文章保存到字符串和索引中，有没有一种快速的方法可以告诉 lucene 索引文件中的所有单词？我为此应用程序使用 Lucene.net 3.03。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:14:21.927

仅传递文件不是一种简单的方法，您必须将整个内容提供给 lucene 以进行搜索索引。[这](https://stackoverflow.com/questions/1275722/how-might-i-index-pdf-files-using-lucene-net)是关于索引 PDF 的 Q/A 的答案，但对于每种类型的文档都是一样的，只需打开它并索引到 lucene。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:01:36.137

您可以将 a 传递`System.IO.TextReader`给 a `Field`。如果文件是纯文本或类似的文件，您应该能够在其上打开阅读器，并将其直接传递到字段中，例如：

```
System.IO.TextReader reader = new StreamReader("path/to/my/file.txt");
Field field = new Field("fieldName", reader);
document.add(field); 
```

# python - 将 txt 文件拆分为多个文件，根据它们在 Python 中的内容命名

> ID：14858879
> 
> 赞同：2
> 
> 时间：2013-02-13T17:01:58.310
> 
> 标签：python, split

我有一个 JSON 格式的大型 .txt 文件，其内容如下：

```
{
    "Name": "arbitrary name 1",
    "Detail 1": "text here",
    "Detail 2": "text here",
    "Detail 3": "text here",
},
{
    "Name": "arbitrary name 1",
    "Detail 1": "text here",
    "Detail 2": "text here",
    "Detail 3": "text here",
}, 
```

依此类推，2000 个条目。

我要做的是将此文件拆分为单独的 .txt 文件，同时保留 JSON 格式。

所以，本质上，我需要在 } 之后拆分文件，以制作 2000 个新的 .txt 文件，如下所示：

```
{
    "Name": "arbitrary name 1",
    "Detail 1": "text here",
    "Detail 2": "text here",
    "Detail 3": "text here",
} 
```

此外，这 2000 个新的 .txt 文件必须根据“名称”属性命名，因此该示例文件将命名为“任意名称 1.txt”。

对此的任何帮助将不胜感激。我可以使用 bash 拆分文件，但这不允许我需要的命名。

我希望有人可以帮助我找到一个 Python 解决方案，它也可以正确命名文件。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:59:54.437

```
import json
with open('file.txt', 'r') as f:
    data = json.loads(f.read())
for line in data:
    with open(line['Name'] + '.txt', 'w') as f:
        f.write(json.dumps(line)) 
```

请注意，结果 json 之后没有排序，但应该正确拆分。

# vb.net - Excel中的VB错误

> ID：14858880
> 
> 赞同：0
> 
> 时间：2013-02-13T17:01:59.003
> 
> 标签：vb.net, excel

当执行以下 VB 代码并打开“跟踪更改”功能时，我在 MS Excel 中遇到错误：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Column = 1 Then
        If IsEmpty(Target) Then
            Target.Offset(0, 1).Value = Empty
        Else
            Target.Offset(0, 5).Value = Now()
        End If

    End If

End Sub 
```

似乎我可以很好地将数据输入前 2 行，但是一旦我开始在第 3 行及以后填充数据，我就会收到一条错误消息，指出“运行时错误 '1004' 应用程序定义或对象定义错误”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:42:48.067

更改跟踪强制工作簿变为共享，这会禁用许多功能（例如，您无法在启用更改跟踪的情况下访问 VBA）。

我不完全确定*为什么*会抛出此错误，但避免看到此消息的解决方法是`Resume Next`在发生错误时：

`On Error Resume Next`

`If`只需添加有关您的第一个块 ( `If Target.Column = 1 Then`)的这行代码。请注意，理想情况下，您应该要找出此问题的根源，并且此解决方案是一种解决方法，这可能不是一个好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:45:49.630

我从第 2 行开始收到此代码并打开跟踪更改的错误。然而，无论错误如何，代码似乎都可以执行它应该执行的操作，因此我建议`On Error Resume Next`您解决此问题。

这不会解决更改跟踪的任何潜在问题，并且您的更改可能不会被跟踪。

# java - 在线程中创建 PDF

> ID：14858890
> 
> 赞同：0
> 
> 时间：2013-02-13T17:02:20.487
> 
> 标签：java, android, multithreading

在我的应用程序中，我正在生成 PDF。它可能需要长达 45 秒，所以我决定制作一个进度条。进度条需要从独立于 UI 线程的线程进行更新，因此我将“convertNotesToPDF”函数放在该线程中。进度条在 convertNotesToPDF 函数中更新。不幸的是，这引起了一些问题。大约 50% 的时间我在进度条线程中生成 pdf，会生成无法打开的 0 尺寸 PDF。其他 50% 的时间它工作正常，但这显然不会减少它。当我将 convert notestopdf 放在线程之外时，一切正常。

这里有一些代码供参考。首先，这是 50% 的工作时间的代码（我取出了一些不相关的代码）：

```
new Thread(new Runnable() {
        public void run() {

            convertDataToPDF(bmap); 
            convertNotesToPDF();            
            progressBar.dismiss();
            sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory())));
        }
    }).start();

            sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory()))); 
```

这是我在进度条线程之外转换notetopdf时的代码：

```
new Thread(new Runnable() {
        public void run() {

            convertDataToPDF(bmap); 

            progressBar.dismiss();
            sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory())));
        }
    }).start();
            convertNotesToPDF();    
            sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory()))); 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:10:15.990

当您提到 ProgressBarThread 时，我不知道您在说什么。而是尝试在 Thread 内运行 PDF 处理，并在其 run 方法内更新进度条，如下所示：

```
runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        //update your progressbar

                    }
                }); 
```

所以整体结构是：

```
Thread pdfThread=new Thread(
new Runnable()
{
   public void run()
   {
      convertDataToPDF(bmap); 
      convertNotesToPDF();
      runOnUiThread(new Runnable() {

                        @Override
                        public void run() {
                            //update your progressbar

                        }
                    });         
   }
}
);
pdfThread.start(); 
```

# combobox - GTK Sharp 刷新/重绘小部件

> ID：14858893
> 
> 赞同：0
> 
> 时间：2013-02-13T17:02:28.930
> 
> 标签：combobox, refresh, gtk#

我正在尝试开发一个非常简单的带有单声道和 GTK 锐利的 GUI。我有几个两个组合框，我需要根据第一个中的选定项目更改 secod 中可用的选项：

```
//Create window container
var mainContainer = new Table (3, 1, false);

//add form
var formContainer = new Table (1, 3, true);

//FIRST COMBOBOX
pdfSelect = new ComboBox(new string[] {"Monthly", "Monthly Offline", "Quarterly" }) { Active = 2 };
pdfSelect.Changed += new EventHandler(OnPdfSelectChanged);
formContainer.Attach (pdfSelect, 1, 2, 0, 1);

//MONTH COMBOBOX
monthSelect = new ComboBox(new string[] { "January","February","March","April","May","June","July","August","September","October","November","December" }){ Active = 0 };

formContainer.Attach(monthSelect, 2, 3, 0, 1);

mainContainer.Attach(formContainer, 0, 1, 0, 1);

win.Add(mainContainer); 
```

我的更改事件如下：

```
public static void OnPdfSelectChanged(object o, EventArgs args) {
    ComboBox combo = o as ComboBox;
    if (o == null) return;
    if (combo.ActiveText.Equals("Monthly") || combo.ActiveText.Equals("Monthly Offline"))
    {
        monthSelect = new ComboBox(new string[] { "January","February","March","April","May","June","July",
            "August","September","October","November","December" }) { Active = 0 };
    }
    else
    {
        monthSelect = new ComboBox(new string[] { "January", "April", "July", "October" }) { Active = 0 };
    }
    //TODO REFRESH WINDOW
} 
```

该代码有效，但第二个组合框似乎没有更新。我想我需要刷新窗口？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:28:06.223

问题是您正在为变量分配一个新`Gtk.ComboBox`的，`monthSelect`但这不会自动从窗口中删除旧的组合框并添加这个新的组合框。您想要的是清除组合框的内容并添加新内容。就像是：

```
monthSelect.Clear();
monthSelect.AppendText("January");
monthSelect.AppendText("April");
monthSelect.AppendText("July");
monthSelect.AppendText("October"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:33:09.673

我让它工作，这两个意思是`Clear()`像雾所说的那样调用（+1），但之后你需要分配一个单元格渲染文本，否则新项目将不会显示：

[Gtk.ComboBox.Clear 方法“取消设置此组合框的所有渲染器上的所有映射。”](http://docs.go-mono.com/?link=T%3aGtk.ComboBox/M)

```
public static void OnPdfSelectChanged(object o, EventArgs args) {
    ComboBox combo = o as ComboBox;
    if (o == null) return;
    //Set entries
    var entries = new string[] {  "January","February","March","April","May","June","July", "August","September","October","November","December" };
    if (combo.ActiveText.Equals("Quarterly"))
    {
        entries = new string[] { "January", "April", "July", "October" };
    }
    //clear previous data
    monthSelect.Clear();
    //cells data
    ListStore store = new ListStore(typeof(string));
    foreach (var item in entries) {
        store.AppendValues(item);
    }
    //assign data to combobox
    monthSelect.Model = store;
    //renderer for cells
    var cellRenderer = new CellRendererText();
    monthSelect.PackStart(cellRenderer, true);
    monthSelect.AddAttribute(cellRenderer, "text", 0);
    //set first item as active
    monthSelect.Active = 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T10:10:35.090

也许为时已晚，但...

```
((ListStore)combobox.Model).Clear(); 
combobox.AppendText("item"); 
```

# mysql - 在数据库中创建关系表

> ID：14858894
> 
> 赞同：0
> 
> 时间：2013-02-13T17:02:30.273
> 
> 标签：mysql, many-to-many, foreign-key-relationship

我在将下表关联在一起时遇到了一个重大问题。患者和护士之间是多对多的关系。

这是关系表：

```
Patient (PatientID (PK), Forename, surname, gender, date of birth, address, illness, prioirty)

seen_by (ID(PK) PatientID(FK to Patient.PatientID), NurseID(FK to Nurse.NurseID) )

Nurse (NurseID(PK), Forename, surname) 
```

我遇到的问题是，我希望将 PatientId 分配给 NurseID，这样我就知道哪个护士看到了哪个病人。请注意，ID 都是 auto_increment 值。

任何建议，提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:14:39.303

为什么不创建一个连接表来表示患者和护士之间的关系呢？

```
Table: Appointment (AppointmentID (PK), PatientID, NurseID) 
```

然后您可以将患者和护士分配到预约记录并跟踪关系。这也使您可以跟踪有关约会的其他信息，例如日期、处方等。

我不确定您使用的是什么开发环境，但 Rails 有一些很好的模式可以通过这些关系访问对象。

# android - 未捕获的错误：无法在 file:///android_asset/www/js/lib/less.js:15 加载 file:///android_asset/www/less/app.less (200)

> ID：14858898
> 
> 赞同：0
> 
> 时间：2013-02-13T17:02:39.123
> 
> 标签：android, cordova, less

尝试在我的开发机器上运行此 phonegap 1.4/adnroid 8 应用程序时出现以下错误：

未捕获的错误：无法在 file:///android_asset/www/js/lib/less.js:15 加载 file:///android_asset/www/less/app.less (200)

这个 android/phonegap 应用程序“在模拟器/手机上运行”，但没有显示样式（因为我猜它无法加载 less.js）。

这两个文件都是应用程序目录结构的一部分，因此我没有从 Internet 加载任何内容（因为我可以在 www 下看到这两个文件）。

互联网上的大多数解决方案都在谈论互联网连接，但这些文件存在于本地，但由于某种原因，应用程序无法加载！另外，为了确保这些文件不会从 Internet 加载任何内容，我添加了代理，并且 AndroidManifest.xml 中存在“uses-permission android:name="android.permission.INTERNET"。

我应该检查其他设置吗？有什么提示吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:20:41.890

解决方法：将您的 .less 文件编译为 css 文件，并将其直接包含在 HTML 页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:50:00.747

修改less js源文件，添加这一行：

```
href = href.replace( "file:///android_asset/www/", ""); 
```

在 loadStyleSheet 函数内部，在调用 xhr 函数之前（在 #4150 附近）。

那应该行得通。在较少的 1.3.3 上测试

在进行 ajax 调用以获取在“链接”标签中定义的 Less 文件时，Less 使用绝对路径。我们只是建立了绝对链接——相对的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:39:53.627

不要转换您的样式表扩展名，保持相同（例如：styles.css）但不是 styles.less

并遵循相同的

```
<link href="styles.css" rel="stylesheet/less" type="text/css" /> 
```

我在使用 less-1.3.3 版本时遇到了同样的问题！

# php - 在“转到上一页”上重新加载页面

> ID：14858905
> 
> 赞同：1
> 
> 时间：2013-02-13T17:02:54.377
> 
> 标签：php, javascript, refresh, page-refresh

当我去我的移动网站的上一页时，我想及时刷新页面。

当我在我的 javascript 脚本中添加下面的代码时，它会一直刷新页面。

```
 <script type="text/javascript">
        window.location.reload();
    </script> 
```

我在我的 php 文档中试过这个：

```
<body onload="document.refresh();"> 
```

但是，还是不行。有任何想法吗？

我想刷新它，因为我正在修改悬停时“.transparent_font”类的不透明度。这是我的代码：

```
 <script type="text/javascript">
    $(document).ready(function(){
    //window.location.reload();
    //$(".transparent_font").css({'opacity' : '0'});
    //$(".thumbnail_image_related_project .transparent_font").css({'opacity' : '0'});

        $(".thumbnail_image_related_project").hover(
            function(){
                $(this).children(".transparent_font").stop().animate({'opacity' : '0.7'}, 300); 
             },
            function(){
                $(this).children(".transparent_font").stop().animate({'opacity' : '0'}, 300); 
           }
        );
    }); 
```

# c# - 当使用相同的 User-Agent 字符串的浏览器返回内容时，为什么 C# 中的 httpwebrequest 没有内容并返回 OK 状态？

> ID：14858908
> 
> 赞同：1
> 
> 时间：2013-02-13T17:03:07.780
> 
> 标签：c#

我正在使用以下命令执行 Web 请求：

```
 // create http request
            HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
            // set user agent
            req.UserAgent = "Mozilla/5.0 (X11; U; Linux i586; de; rv:5.0) Gecko/20100101 Firefox/5.0";
            req.AllowAutoRedirect = true;
            req.MaximumAutomaticRedirections = 3;
            // retrieve response
            HttpWebResponse rep = (HttpWebResponse)req.GetResponse();
            HttpStatusCode  stc = rep.StatusCode; 
```

在某些 URL（但不是全部）上，状态返回 OK，内容长度为 -1，但如果我直接使用 Firefox，它会呈现。

我需要提供给 C# 的设置吗？示例链接[http://www.cbsstore.com/detail.php?p=382214&ecid=5511&pa=CSE-FGL&CAWELAID=1599172025](http://www.cbsstore.com/detail.php?p=382214&ecid=5511&pa=CSE-FGL&CAWELAID=1599172025)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:05:06.947

如果您从 获取内容长度`HttpWebResponse.ContentLength`，则 -1 的值并不意味着没有内容 - 它意味着“继续阅读，直到您到达流的末尾”（因为`Content-Length`尚未设置标题）。内容长度*为零*意味着没有内容。

基本上，如果您想查看内容，您应该实际尝试阅读它:)

# javascript - 无法让 Chrome popup.js 使用 console.log

> ID：14858909
> 
> 赞同：71
> 
> 时间：2013-02-13T17:03:11.830
> 
> 标签：javascript, google-chrome-extension

我在编写 JS 时大量使用 console.log 进行调试。我正在尝试使用它来编写 chrome 扩展，但它不起作用。这里有什么诡计吗？？？

popup.html

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <link type="text/css" rel="stylesheet" href="css/jquery-ui-1.10.0.custom.min.css" />
    <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.10.0.custom.min.js"></script>
    <script type="text/javascript" src="js/popup.js"></script>
</head>

<body style="width: 200px">
</body> 
```

popup.js

```
console.log('test1');
$(document).ready(function() {
    console.log('test2');
}); 
```

这些都没有出现在 JS 调试器中。

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2013-02-13T17:09:07.287

我一开始也有这个问题！确保您打开了正确的开发人员工具窗口...我的意思是，您可能打开了主页的开发人员工具窗口，而不是扩展程序的页面（即 popup.html）。

要打开开发人员工具窗口以检查弹出窗口，请右键单击弹出窗口，然后单击“检查元素”...这将打开正确的开发人员工具窗口。

我最初犯了这个愚蠢的错误并被卡住了.. :)

# git - Git忽略奇怪

> ID：14858914
> 
> 赞同：2
> 
> 时间：2013-02-13T17:03:42.440
> 
> 标签：git, gitignore, ignore

在我的仓库中，我有以下目录结构：

```
/
|-dir1
|    |-file1
|    |-file2
|    |-file3
|-dir2
|    |-file4
|    |-file5.derp
|    |-file6
|-dir3
     |-file7
     |-file8 
```

我的`.gitignore`文件（位于根目录）如下：

```
dir2/
!dir2/*.derp 
```

然而，`file5.derp`从来没有被`git add`...

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:22:30.833

试试这样的 .gitignore ：

```
dir2/*
!dir2/*.derp 
```

每个 gitignore 手册页：[http ://www.kernel.org/pub/software/scm/git/docs/gitignore.html](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html)

> 如果模式以斜线结尾，则出于以下描述的目的将其删除，但它只会找到与目录的匹配项。换句话说， foo/ 将匹配目录 foo 和它下面的路径，但不会匹配常规文件或符号链接 foo（这与 pathspec 在 git 中的一般工作方式一致）。

我怀疑它忽略了该目录中的所有文件，而没有达到使用 ! 进行检查的程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:19:34.890

你将不得不拥有它：

```
dir2/*
!dir2/*.derp 
```

在您尝试的操作中`dir2/`， 显然会忽略该目录，并且 git 不会进入该目录以取消忽略`.derp`文件。在上述情况下，它会忽略所有子级`dir2`而不是`dir2`自身，因为`dir2/*`然后您取消忽略`.derp`文件

# python - 对字符串的所有字符都为真

> ID：14858916
> 
> 赞同：5
> 
> 时间：2013-02-13T17:03:57.180
> 
> 标签：python, python-3.x

在 Python 3 中，检查谓词是否对字符串的所有字符都为真的最短方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T17:04:31.990

```
all(predicate(x) for x in string) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T18:02:23.713

```
all(map(predicate, string)) 
```

功能上与@Abe 的答案相同，但使用 map 代替（在 python3 中也很懒惰）

# php - PHP - 获取当前目录

> ID：14858919
> 
> 赞同：2
> 
> 时间：2013-02-13T17:04:07.780
> 
> 标签：php

我来布景...

1.  我有一个文件**example.php**
2.  该特定文件位于名为**test的文件夹中**
3.  完整的文件路径是 /root/user/website/htdocs/test/example.php

我想要的是回显文件所在的目录，即。**测试**

我已经通过阅读函数并创建下面的脚本来做到这一点，这是一种不好的方法吗？有没有更简单的方法？

```
<?php
$dir_array = explode('/', getcwd());
$dir_current = end($dir_array);

echo $dir_current;
?> 
```

输出`test`

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:08:22.693

PHP 有一个常量：

```
echo __DIR__; 
```

如果您只想拥有路径的最后一部分`test`- 在您的情况下，请使用[basename()](http://www.php.net/manual/en/function.basename.php)

```
echo basename(__DIR__); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:08:31.720

我建议您使用以下代码：

```
echo array_pop(explode('/', dirname(__FILE__))); 
```

如果您的 PHP 版本高于 5.3.0，则可以替换`dirname(__FILE__)`为`__DIR__`

对于您的问题，`getcwd()`可以阅读[here](http://www.php.net/manual/en/function.getcwd.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T16:12:58.403

考虑到这条路`store.com/products/electronics/index.php`

这也适用于`include()`

第三种组合应该适用于 OP。

* * *

```
$_SERVER['PHP_SELF']; 
```

/products/electronics/index.php

* * *

```
dirname($_SERVER['PHP_SELF']); 
```

/产品/电子产品

* * *

```
basename(dirname($_SERVER['PHP_SELF'])); 
```

电子产品

* * *

```
basename($_SERVER['PHP_SELF']); 
```

索引.php

* * *

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-13T17:08:26.470

几乎：

```
<?php
$dir_current = $dir_array[count($dir_array)-1];
?> 
```

# grails - 如何在连接到 CAS 的两个应用程序之间传递 jsessionid？

> ID：14858922
> 
> 赞同：0
> 
> 时间：2013-02-13T17:04:17.123
> 
> 标签：grails, spring-security, cas, httpbuilder

我当前的架构有问题。

我有以下架构：

![在此处输入图像描述](../Images/ff3d797f445675c585f30186a0030f6e.png)

API（休息）：Grails 应用程序  

“App-2”：Grails 应用程序（使用 Http Builder）  

两个应用程序（API 和 App-2）都使用 CAS 服务器进行身份验证，所以我安装了

两个应用程序中的插件“Spring-security-cas1.0.5”。  

两个应用程序都在 CAS 上进行了身份验证，但它们的会话不同

应用程序生成自己的 JSESSIONID。  

我试图从“App-2”中截取 Api jsessionid 并将其发送到每个的标头中

请求，但没有奏效。  

请问有什么想法或建议吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:39:44.337

当我们在控制器应用程序 Rest 上添加 @Secured(['ROLE_USER']) 时出现问题。

如果我们想从应用程序中通过 http builder 访问 API 2\. 将重定向到 CAS 身份验证页面。

# watir - 如何在 Watir 中发送击键 Enter

> ID：14858925
> 
> 赞同：11
> 
> 时间：2013-02-13T17:04:21.790
> 
> 标签：watir, keystroke

在文本字段中输入文本后，我需要自动执行按键盘上的“Enter”键的操作。我试过`@browser.send_keys :enter` 了，但这并没有采取行动。也试过`@browser.text_field(:name => 'q').send_keys :enter`or`@browser.text_field(:name => 'q').focus`然后send_keys。但一直没有帮助。

```
@browser.send_keys("{ENTER}") 
```

也无济于事，这实际上是类型 ("{ENTER}")

请让我知道其他的做法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T17:41:53.637

`browser.send_keys :enter`应该做的工作。请提供指向该页面的链接、指向类似页面的链接或相关的 HTML。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-13T22:36:32.933

尝试browse.send_keys：return在这里找到它[http://watirmelon.com/about/](http://watirmelon.com/about/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T01:09:48.250

给定 HTML：

```
<input type="text" size="30" class="searchText" dojoattachpoint="_searchTextAP" id="xwt_widget_uishell_Header17_2_search_searchTextAP" dojoattachevent="onfocus:_onFocus_searchTextAP,onblur:_onBlur_searchTextAP, onkeyup:_onKeyUp_searchTextAP"> 
```

看起来该元素正在侦听这些事件（通过 dojo）：`onfocus`, `onblur`,`onKeyUp`

要触发这些事件，您需要使用以下内容：

```
browser.text_field(:id => /.*searchTextAP$/).focus
browser.element(:id => 'someOtherElement').focus
browser.text_field(:id => /.*searchTextAP$/).fire_event "onkeyup" 
```

如果你想提交表单，你可能需要点击提交按钮（因为你提到了点击`:enter`）：

```
browser.button(:type => 'submit').click 
```

如果您真的只想发送`:enter`密钥，那么其他答案之一应该可以。

# c# - 使用自定义活动从保存的工作流 xaml 文件运行工作流 (WFF4)

> ID：14858926
> 
> 赞同：2
> 
> 时间：2013-02-13T17:04:23.717
> 
> 标签：c#, workflow-foundation-4

我已经坚持了一天了。我制作了一个解决方案，允许用户在设计器中创建工作流并保存它们，以及运行它们。现在我试图让这些保存的工作流文件从另一个从命令行参数获取文件名的解决方案中运行。我从另一个项目中引用了所需的 DLL，在本例中为 [companyname].Activities.dll。但是，当我尝试运行仅包含“SendEmailActivity”（位于Activities.Acd 下）或“RunWorkflow”（位于Activities 下）的工作流时，我仍然会收到此错误：

无法创建未知类型“{clr-namespace:[companyname].Activities.Acd;assembly=[companyname].Activities}SendEmailActivity”。

和

无法创建未知类型“{clr-namespace:[companyname].Activities;assembly=[companyname].Activities}RunWorkflow”。

我尝试过仅使用库存活动来制作工作流程，并且这些活动正在运行。只是我的自定义活动类中包含的活动很挑剔。这是我运行工作流程的主要方式：

```
Activity lActivity = ActivityXamlServices.Load(filename);    
lWFApp = new WorkflowApplication(lActivity);
lWFApp.Run(); 
```

如果有人对这种事情有任何经验，我很想给点小费。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:38:05.920

原来这只是一个环境问题。我为运行工作流而调整的解决方案是针对 4.0，而自定义活动是 4.5。对项目目标的快速更新修复了这一切。我讨厌这类问题。

# sbt - 将 sbt 工件发布到文件系统

> ID：14858927
> 
> 赞同：3
> 
> 时间：2013-02-13T17:04:30.620
> 
> 标签：sbt

我有一个内部 Maven 存储库，位于`file:///some/path/here`. 我想将我的 sbt 工件发布到这个位置。我发现以下应该有效。

```
publishMavenStyle := true

publishTo <<= version { (v: String) =>
  val path = "file:///some/path/here/"
  if (v.trim.endsWith("SNAPSHOT"))
    Some("snapshots" at nexus + "maven-snapshots")
  else
    Some("releases"  at nexus + "maven")
} 
```

但是，这会失败，但会出现以下异常。

```
[info]  delivering ivy file to .../target/scala-2.9.2/ivy-1.0-SNAPSHOT.xml
java.lang.UnsupportedOperationException: URL repository only support HTTP PUT at the moment
    at org.apache.ivy.util.url.BasicURLHandler.upload(BasicURLHandler.java:202)
    at org.apache.ivy.util.FileUtil.copy(FileUtil.java:150)
    at org.apache.ivy.plugins.repository.url.URLRepository.put(URLRepository.java:84) 
```

如何使用 sbt 将工件发布到文件路径指定的存储库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:43:49.080

使用此格式发布到本地文件路径：

```
publishTo := Some(Resolver.file("file", new File("/some/path/here"))) 
```

# actionscript-3 - 将剪辑动态添加到容器会导致随机图像幻灯片

> ID：14858931
> 
> 赞同：1
> 
> 时间：2013-02-13T17:04:36.363
> 
> 标签：actionscript-3, flash

因为我不想将我所有的 100 张图片加载到影片剪辑容器中，所以我决定这样做：

1）加载前5张图片并将它们添加到影片剪辑容器中：

```
private function onLoadingComplete(evt:Event):void
    {
        evt.target.removeEventListener(Event.COMPLETE,onLoadingComplete);

        var bitmap:Bitmap=evt.target.loader.content as Bitmap;
        bitmap.smoothing=true;
        bitmap.width=stage.stageWidth;
        bitmap.height=stage.stageHeight;

        var clip_mc:MovieClip=new MovieClip();
        clip_mc.addChild(bitmap);
        clip_holderArray.push(clip_mc);

        container_mc.addChild(clip_mc); 
```

2）在图 4，从 4 过渡到 5，我加载其他 5，依此类推。

由于加载速度很快，只有 5 张图片，用户不会注意到加载...无论如何，有些事情不正确，我看不到图片的确切顺序，我把它们放在容器上..为什么？

# fancybox - 重新打开 fancyBox 时创建的多个事件处理程序

> ID：14858935
> 
> 赞同：1
> 
> 时间：2013-02-13T17:04:40.210
> 
> 标签：fancybox, jquery

在调用页面上，我使用 href 绑定了我的 fancyBox，如下所示：

```
<a id="myId" href="myContent.cfm">Click me</a>
<script>
    $(document).ready(function(){
        $('a#myId').fancybox({
            // my initialization params 
        });
    });
</script> 
```

在 myContent.cfm 中，构建了一个默认的“过滤器”，其中包含添加和删除按钮。像这样的东西：

```
<div id="fd_0" class="eachFilter blank">
    <select name="filterBy" class="fl filterBy">
        <option selected="selected">-- Add a Filter --</option>
        <!--- add more options --->
    </select>
    <button type="button" class="addFilter default" title="Add a filter to the current filter set.">+</button>
    <button type="button" class="deleteThisFilter default" title="Delete this filter from the current filter set.">-</button>
</div> 
```

当点击 addFilter 按钮时，一个新的“默认”过滤器被添加到被点击过滤器之后的 dom 中，使用连续的 id。相反，单击 deleteFilter 按钮会导致该过滤器被删除，并且所有剩余的过滤器都重新编号；除了必须保留一个过滤器之外。我的原始代码使用 .live() 将事件处理程序附加到新创建的元素，如下所示：

```
$('.addFilter).live('click', function(){        
    // get number of existing filters
    // create new blank filter
    // add to the dom after the filter whose button was just clicked
});
$('.deleteThisFilter).live('click', function(){     
    // if there is more than one existing filter, use .remove() to remove the parent .eachFilter div
    // renumber the existing filter ids consecutively
}); 
```

在用户创建了他们需要的所有“过滤器”之后，他们可以“应用”它们，关闭fancybox并使用新的过滤参数重新加载网格，或者简单地取消并关闭fancybox。

这一切都在第一次正常工作，并且在重新打开fancybox 时，初始空白过滤器的添加按钮按预期工作。但是，在添加第二个过滤器之后，添加到 dom 的任何过滤器都会在 addFilter 和 deleteFilter 按钮中添加多个事件处理程序。如果我第一次添加了一个过滤器，然后第二次返回fancybox，然后通过单击默认过滤器的添加按钮添加过滤器，然后单击新创建的过滤器添加按钮，又添加了两个过滤器。如果我关闭，再次重新打开fancybox，添加一个过滤器，然后单击该过滤器添加按钮，又添加了三个过滤器。

所以这是我到目前为止所尝试的：

**1)将***.live(* ) 调用更改为

```
$(document).on('click', 'addFilter', function(){ // add my filter code}); 
```

**2）**将创建过滤器的代码放入一个函数中，最后使用*.bind()*将事件处理程序添加到新创建的过滤器中；其次是使用

```
$('.addFilter').unbind('click', fnCreateMyFilter()) 
```

关闭fancybox。

**3)**仅在新创建的过滤器元素上使用*.live()*，并在默认元素上使用常规点击处理程序

**4)**将 jQuery 从我们当前的版本升级到 1.8.3

**5)对fancybox** *.onClosed*函数内的所有元素调用*.remove()*（虽然我的印象是关闭fancybox 实际上确实从dom 中删除了元素）。

 *有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:44:51.660

与往常一样，这是最明显的事情，但并不明显。将 .js 代码从弹出窗口移到它自己的文件中解决了这个问题，这是我在让所有代码工作后打算做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:27:58.650

我正在使用 Fancybox2 [http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)和 Noty 弹出窗口[http://needim.github.com/noty/](http://needim.github.com/noty/)的组合，并且遇到了类似的问题。

我使用链接中的ajax将产品编辑表单加载到fancybox`class='fancybox.ajax'`中`href`。

当我单击保存按钮时，一切都保存得很好，直到我在 fancybox 中重新加载了另一个（或相同的）产品。

我正在使用此代码来触发我的保存按钮：

```
$(document).on("click",".save_product_button",function(){
  ... post to ajax file to save info
}); 
```

使用它会触发多个通知弹出窗口和保存（自刷新以来我每次加载一个幻想框一次），因为保存按钮已经在文档模型中加载了很多次。（我猜？？）

但是当我将我的更改`on()`为保存按钮的直接父级时，我所有的问题都消失了。

```
$("#productBox").on("click",".save_product_button",function(){
  ... post to ajax file to save info
}); 
```

从那时起，一切都保存了一次。

另外，这应该使代码更快一点。

希望这可以帮助某人不要像我刚刚那样浪费半天时间。*

# mks - MKS 清理无用文件的项目

> ID：14858939
> 
> 赞同：0
> 
> 时间：2013-02-13T17:05:04.450
> 
> 标签：mks, mks-integrity

我每天在 mi 工作中使用 MKS，我使用一个非常大的存储库，其中包含很多项目，结构非常丰富多彩。在我的部门，我们希望改进这个项目，删除所有可选文件（.suo、.pdb、.txt、bin 文件夹、obj 文件夹等）。我知道，我可以配置我希望 MKS 忽略的文件/文件夹

这里解释了（[MKS/PTC Integrity Source 相当于 svn:ignore](https://stackoverflow.com/questions/4377774/mks-equvilant-to-svnignore)）但是，有没有办法选择性地擦除所有这些类型的文件，而不必检查所有文件，删除我想要的所有文件，并再次签入这些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T17:44:16.173

（披露：我是一名 PTC 员工，在 Integrity Support 工作）

要删除这些文件，您应该删除它们。您可能没有删除权限，在这种情况下，您需要让拥有这些权限的人执行删除，或者将执行此操作的权限添加到您的权限集中。

假设您有权限，您可以选择要删除的成员，然后执行以下手势之一：

1.  从菜单：**成员->删除**
2.  从上下文菜单中：**删除成员**
3.  从键盘：[删除]

成员仍将存在于存档中，但将不再在您的存储库中可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T07:28:08.500

您可以创建具有指定过滤器的范围沙箱。请参阅[http://communities.ptc.com/message/227385#227385](http://communities.ptc.com/message/227385#227385)。

# jquery - 淘汰赛未在 $.getScript 上加载 costom 绑定

> ID：14858944
> 
> 赞同：0
> 
> 时间：2013-02-13T17:05:10.300
> 
> 标签：jquery, knockout.js

我正在运行我的 main.js，并从我的 main.js 中执行 $.getScript(app.js)。Knockout.js 正在运行，Viewmodel 来自 app.js。

当我现在尝试将一些自定义绑定插入到 app.js 中时，它们不会被淘汰赛加载。同一文件中的视图模型工作正常。当我将它们放到 main.js 的末尾时，它们会被加载并可用于 knockout.js

绑定定义如下：

```
ko.bindingHandlers.yourBindingName 
```

这是我的 app.js：

```
var _dragged;
ko.bindingHandlers.drag = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var dragElement = $(element);
        var dragOptions = {
            helper: 'clone',
            revert: false,
            start: function () {
                _dragged = valueAccessor().value;
            },
            cursor: 'default'
        };
        dragElement.draggable(dragOptions).disableSelection();
        alert('init');
    }
};

ko.bindingHandlers.drop = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var dropElement = $(element);
        var dropOptions = {
            drop: function (event, ui) {
                valueAccessor().value(_dragged);
            }
        };
        dropElement.droppable(dropOptions);
        alert('init');
    }
};

ko.bindingHandlers.sortable = {
    init: function (element, valueAccessor) {
        // cached vars for sorting events
        var startIndex = -1,
            koArray = valueAccessor();

        var sortableSetup = {
            // cache the item index when the dragging starts
            start: function (event, ui) {
                startIndex = ui.item.index();
            },
            // capture the item index at end of the dragging
            // then move the item
            stop: function (event, ui) {

                // get the new location item index
                var newIndex = ui.item.index();

                if (startIndex > -1) {
                    //  get the item to be moved
                    var item = koArray()[startIndex];

                    //  remove the item
                    koArray.remove(item);

                    //  insert the item back in to the list
                    koArray.splice(newIndex, 0, item);

                    //  ko rebinds the array change so remove duplicate item
                    ui.item.remove();
                }

            }
        };

        // bind
        $(element).sortable(sortableSetup);
    }
};

function LanesModel(lanes) {
    var self = this;
    this.lanes = ko.observableArray(lanes);
    this.observableLanes = ko.computed(function () {
        //for (var i = 0; i < self.lanes.length; i++) {
        //    self.lanes()[i].childs = new ko.observableArray(lanes[i].childs);
        //}
        //self.lanes().childs = ko.observableArray(); //ko.observableArray(lanes.childs);
    }, this);
} 
```

这就是我从 main.js 加载 app.js 的方式：

```
$.when(parseLanes()).done(function(o1) {
    //alert(o1); //!!debug
    $.when($.getScript("./Scripts/app_lanes.js"), $.getScript("http://code.jquery.com/ui/1.10.0/jquery-ui.js"))
        .done(function() {
            var vm = new LanesModel(uniqueLanes);
            ko.applyBindings(vm);
        });
}); 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:40:59.970

此标记正在工作，就像与 AMD (RequireJS) 一起使用的标记一样：

```
(function () {
    var _dragged;
    ko.bindingHandlers.drag = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            var dragElement = $(element);
            var dragOptions = {
                helper: 'clone',
                revert: false,
                start: function () {
                    _dragged = valueAccessor().value;
                },
                cursor: 'default'
            };
            dragElement.draggable(dragOptions).disableSelection();
            alert('init');
        }
    };

    ko.bindingHandlers.drop = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            var dropElement = $(element);
            var dropOptions = {
                drop: function (event, ui) {
                    valueAccessor().value(_dragged);
                }
            };
            dropElement.droppable(dropOptions);
            alert('init');
        }
    };

    ko.bindingHandlers.sortable = {
        init: function (element, valueAccessor) {
            // cached vars for sorting events
            var startIndex = -1,
                koArray = valueAccessor();

            var sortableSetup = {
                // cache the item index when the dragging starts
                start: function (event, ui) {
                    startIndex = ui.item.index();
                },
                // capture the item index at end of the dragging
                // then move the item
                stop: function (event, ui) {

                    // get the new location item index
                    var newIndex = ui.item.index();

                    if (startIndex > -1) {
                        //  get the item to be moved
                        var item = koArray()[startIndex];

                        //  remove the item
                        koArray.remove(item);

                        //  insert the item back in to the list
                        koArray.splice(newIndex, 0, item);

                        //  ko rebinds the array change so remove duplicate item
                        ui.item.remove();
                    }

                }
            };

            // bind
            $(element).sortable(sortableSetup);
        }
    };
}()); 
```

# git - 如何将分支推回私有 github 存储库

> ID：14858946
> 
> 赞同：4
> 
> 时间：2013-02-13T17:05:22.870
> 
> 标签：git, github

我已经将 github 中的一个私人仓库克隆到我的本地机器上。完成一些更改后，我想将分支推回 github 以提出合并（或拉取请求，如 github 所说）。

我怎么做？

我对 github 完全陌生（我通常使用 bzr/launchpad，命令是`bzr push lp:~<username>/<master-branch>/<name of the new child branch>`。这在 中的等价物是什么`git`？）。

[编辑：由于我对 git 的术语了解甚少，我发现我的措辞令人困惑，我将重新描述我所做的]

（`bar`是私人回购）

```
$git clone git@github.com:foo/bar.git
$cd bar
$touch <some file> # ie., make some changes
$git commit ...
$ <<<<< NOW I need to push this back to github here. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:24:10.030

根据您上面的评论和原始问题，您想在 github 上提出拉取请求，但您已经`master`在本地进行了修改……这是个问题。您想要做的是首先分支，进行更改，在本地提交，然后推送分支。然后，您可以从该分支在 github 上创建拉取请求。

首先，您需要做的是解决这个问题：

> git branch mytopicbranch
> git reset --hard origin/master

您现在有一个分支，并已`master`在本地重置为远程仓库中的内容。您现在可以使用以下命令推送您的分支：

> git push origin mytopicbranch

然后在 github 上，您将能够为该分支创建拉取请求。

正常流程是执行以下操作：

```
git clone <remote repo> 
<cd to directory>
git checkout -b mybranch 
<make changes> 
<commit changes>
git push origin mybranch
<create pull request on github> 
```

**编辑添加：**这是你问的原因；想做一个“拉请求”。如果你只是想推动`master`你只需这样做：

> git push 起源大师

并且您的更改将提交到远程掌握。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T17:44:42.300

> 私人主仓库不归我所有（即，我无权将我的仓库推回主仓库）。我想我只能将我的本地 repo 推回去，并请求所有者将其合并到 master

你似乎在这里混淆了很多东西。首先，存储库是一个单元。克隆存储库时，您将获得它的完整本地副本。

如果您克隆了一个不属于您自己并且您没有写入权限的存储库，那么您将无法将*任何更改*推送到该存储库。如果是这种情况，您需要先将其*分叉*到您自己的 GitHub 帐户。为此，请单击存储库视图中的 fork 按钮。这将在您自己的帐户中创建存储库的副本，您将拥有推送权限。

因此，如果您有存储库的本地克隆，您可以做任何您想做的事情。不会影响*远程*存储库，无论是原始存储库还是您的 GitHub 分支。您可以根据需要创建任意数量的分支并在任何地方提交。请注意，分支不是 Git 中的某种构造。分支是指向提交的简单指针，因此创建分支并没有多大作用，除非您真正开始提交，否则不会对您的结构产生影响。

如果您有要推送到远程存储库的提交，可以使用`git push`：

```
git push <remote> <local-branch>:<remote-branch> 
```

所以如果你想将你的本地`master`分支推送到`test`远程命名的分支中`origin`，你可以这样做`git push origin master:test`。当您明确推送到远程分支`test`（以前不需要存在）时，您将不会触及远程`master`分支。的其他变体`git push`只是上述命令的缩写。例如`git push <remote> <branch>`，这可能是第二种最常见的推送方式，将本地分支推`<branch>`送到跟踪远程分支（通常是同名的其他分支）。所以它或多或少等同于`<branch>:<branch>`. 最常见的方法是`git push`根据您的配置自行确定远程和分支，但为了安全起见，您可以明确指定它。

因此，回到您的用例，我假设您想要 fork 其他人的存储库以对其进行更改，并将该更改作为拉取请求提交给原始作者。为此，您应该按照以下步骤操作：

*   Fork GitHub 上的存储库
*   克隆你*自己的*存储库（即 fork）
*   在您现在的本地存储库中进行更改
*   将更改推送到您的 fork 中（任何分支都可以，但为了清楚起见建议使用单独的分支）
*   在 GitHub 上浏览你的 fork 时，单击 pull request 按钮以根据你推送的分支创建一个

# ruby-on-rails - 清除停止 Rails 服务器运行

> ID：14858948
> 
> 赞同：0
> 
> 时间：2013-02-13T17:05:29.507
> 
> 标签：ruby-on-rails, clearance

我安装了间隙并按照最后的步骤“导轨生成间隙：安装”。但是，当我尝试在终端中打开时，rails 服务器不会为我启动。

```
/Users/lexi87/areyoutaken/config/initializers/clearance.rb:4:in `block in <top (required)>': uninitialized constant Clearance::PasswordStrategies::BCrypt (NameError)
    from /Users/lexi87/.rvm/gems/ruby-1.9.3-p374/gems/clearance-0.16.3/lib/clearance/configuration.rb:36:in `configure'
    from /Users/lexi87/areyoutaken/config/initializers/clearance.rb:1:in `<top (required)>'
    from /Users/lexi87/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.12/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>' 
```

这是我的 Gemfile，里面有 bcrypt gem。

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'
gem 'bootstrap-sass', '2.1'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'
gem 'jquery-rails', '2.0.2'
gem 'annotate', '2.5.0'
gem 'clearance'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.11.0'
  gem 'guard-rspec', '1.2.1'
  gem 'guard-spork', '1.4.2'  
  gem 'spork', '0.9.2'
  gem 'rb-fsevent', '~> 0.9.1'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '4.1.0'
  gem 'cucumber-rails', '1.2.1', :require => false
  gem 'database_cleaner', '0.7.0'
  # gem 'launchy', '2.1.0'
  # gem 'rb-fsevent', '0.9.1', :require => false
  gem 'growl', '1.0.3'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:12:19.920

您似乎正在运行`0.16.3`不支持`Clearance::PasswordStrategies::BCrypt`密码策略的 gem 版本的清除。如果您升级到`v1.0.0.rc1`或更高版本应该可以工作。

中唯一受支持的密码策略`0.16.3`是`Clearance::PasswordStrategies::Blowfish`和`Clearance::PasswordStrategies::SHA1`。

如果你想尝试支持的版本`BCrypt`，你可以更新你`Gemfile`的说：

```
gem 'clearance', :git => "git://github.com/thoughtbot/clearance.git", :tag => "v1.0.0.rc4" 
```

这将提取该存储库的特定标签。您可以离开`:tag`GitHub 以获取最新版本。请记住，它可能不如`0.16.3`.

# html - HTML5 日期输入宽度

> ID：14858951
> 
> 赞同：21
> 
> 时间：2013-02-13T17:05:40.787
> 
> 标签：html

所以我在尝试强制输入日期大小时遇到​​问题。有没有其他人遇到过这个问题或知道如何解决它？

```
<input style="width:50px;" type="date" value=""> 
```

很简单，宽度只改变textarea，实际控件没有改变，固定在125px左右宽度。

我也在css中尝试了width =“”和max-width，但都不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-01T17:31:46.900

使用 chrome 45，我只需设置字体大小。它按比例更改了文本和控制手柄。不确定那是您正在寻找的效果（？）。

```
<input style="font-size: 3rem"  type="date" id="Date"> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T18:07:38.483

一个`<input type=date>`元素应该以适合浏览器运行环境的浏览器相关方式实现。所以它应该在浏览器的控制之下，而不是作者的。这也是许多人对这个想法持怀疑态度的原因之一。

为控件设置宽度确实是在黑暗中拍摄。在我的 Chrome（Win 7 上为 25beta）上，您的 CSS 代码在将小部件截断到给定宽度的意义上“有效”。它仍然有效，但看起来很奇怪：在小部件中，字母“v”和其他一些字母的一部分是可见的。它们实际上是符号“vvvv-kk-pp”（“yyyy-mm-dd”的本地化符号），我可以在没有任何宽度设置的小部件中看到它。

结论是：通过使用`<input type=date>`，您接受浏览器可能使用的任何依赖于浏览器的小部件，并且尝试控制例如其大小可能会搞砸事情，

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-08T13:19:49.790

```
<input type="date" name="tanggal" style="width:231px"> 
```

希望这有效！除了宽度，它不会改变任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T17:48:36.347

由于大多数浏览器还没有跟上 html5 的速度。我只会将日期选择器与 jquery 一起使用。

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Datepicker - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
  $(function() {
    $( "#datepicker" ).datepicker();
  });
  </script>
</head>
<body>

<p>Date: <input type="text" id="datepicker" /></p>

</body>
</html> 
```

我已经用过很多次了，而且效果很好。更有意义的是在点击时显示日历以及 imo。

这也是链接：http: [//jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)

# c# - SocketAsyncEventArgs UDP 服务器缓冲区偶尔充满零

> ID：14858952
> 
> 赞同：3
> 
> 时间：2013-02-13T17:05:45.237
> 
> 标签：c#, sockets, asyncsocket

我在[SocketAsyncEventArgs 缓冲区中](https://stackoverflow.com/questions/10836380/socketasynceventargs-buffer-is-full-of-zeroes)描述了一个类似的问题，其中我的 SocketAsyncEventArgs UDP 服务器实现接收具有以下内容的数据包：

1.  `SocketAsyncEventArgs.BytesTransferred > 0`
2.  里面没有数据`SocketAsyncEventArgs.Buffer`

这只会在负载下偶尔发生，并且可以在 3 台单独的机器上重现。我想这也是导致我的其他未解决的 SO 问题（[取消挂钩事件时检测到 FatalExecutionEngineError](https://stackoverflow.com/questions/14789628/fatalexecutionengineerror-detected-when-unhooking-event)）出现问题的原因。

到目前为止，这里是 UDP Server 的实现：

```
/// <summary>
/// Provides a basic implementation of a UDPSocket based on ISocket
/// </summary>
public class UDPSocket : ISocket
{
    #region "Private Variables"
    private Socket _socket;
    private IBufferManagerProvider _bufferManager;
    #endregion

    #region "Public Properties"
    public Int32 Port { get; private set; }
    public Int32 MessagePrefixLength { get; set; }
    public IPAddress ListeningAddress { get; private set; }
    public ILogProvider LogProvider { get; private set; }
    public bool AllowAddressReuse { get; private set; }
    #endregion

    #region "Constructors"
    private UDPSocket() { }
    public UDPSocket(String listeningAddress) : this(listeningAddress, 4444, null, null) { }
    public UDPSocket(String listeningAddress, Int32 port) : this(listeningAddress, port, null, null) { }
    public UDPSocket(Int32 port) : this("0.0.0.0", port, null, null) { }

    public UDPSocket(String listeningAddress, Int32 port, IBufferManagerProvider manager, ILogProvider logger)
    {
        // Setup the port
        if (port <= 0)
        {
            throw new ArgumentException("Port number cannot be less than 0.");
        }
        else
        {
            this.Port = port;
        }

        // check the ip address
        if (String.IsNullOrEmpty(listeningAddress))
        {
            throw new Exception("The listening address supplied is not valid.");
        }
        this.ListeningAddress = IPAddress.Parse(listeningAddress);

        // check the interfaces
        this.LogProvider = (logger == null) ? new DefaultLogProvider(LogLevel.None) : logger;
        _bufferManager = (manager == null) ? new DefaultBufferManager(100, 2048, null, null) : manager;

        // use a default message prefix
        this.MessagePrefixLength = 4;
    }
    #endregion

    #region "Event Handlers"
    #endregion

    #region "Internal handler methods"
    private void Receive()
    {
        SocketAsyncEventArgs args = _bufferManager.TakeNextSocketAsyncEventArgs();
        byte[] buff = _bufferManager.TakeNextBuffer();
        args.SetBuffer(buff, 0, buff.Length);
        args.Completed += PacketReceived;
        args.RemoteEndPoint = new IPEndPoint(IPAddress.Any, this.Port);

        try
        {
            if (!_socket.ReceiveMessageFromAsync(args))
            {
                OnPacketReceived(args);
            }
        }
        catch
        {
            // we should only jump here when we disconnect all the clients.
        }
    }

    private void PacketReceived(object sender, SocketAsyncEventArgs e)
    {
        OnPacketReceived(e);
    }

    private void OnPacketReceived(SocketAsyncEventArgs e)
    {
        // Start a new Receive operation straight away
        Receive();

        // Now process the packet that we have already
        if (e.BytesTransferred <= MessagePrefixLength)
        {
            // Error condition, empty packet
            this.LogProvider.Log(String.Format("Empty packet received from {0}. Discarding packet.", e.ReceiveMessageFromPacketInfo.Address.ToString()), "UDPSocket.OnPacketReceived", LogLevel.Minimal);
            ReleaseArgs(e);
            return;
        }

        //
        //  The buffer can occassionally be zero'd at this point in time
        //

        // Get the message length from the beginning of the packet.
        byte[] arrPrefix = new byte[MessagePrefixLength];
        Buffer.BlockCopy(e.Buffer, 0, arrPrefix, 0, MessagePrefixLength);
        Int32 messageLength = BitConverter.ToInt32(arrPrefix, 0);

        // the number of bytes remaining to store
        Int32 bytesToProcess = e.BytesTransferred - MessagePrefixLength;

        if (bytesToProcess < messageLength)
        {
            this.LogProvider.Log(String.Format("Missing data from {0}. Discarding packet.", e.ReceiveMessageFromPacketInfo.Address.ToString()), "UDPSocket.OnPacketReceived", LogLevel.Minimal);
            ReleaseArgs(e);
            return;
        }

        // Create a data buffer
        byte[] data = new byte[messageLength];

        // Copy the remaining data to the data buffer on the user token
        Buffer.BlockCopy(e.Buffer, MessagePrefixLength, data, 0, messageLength);

        // Data is safely stored, so unhook the event and return the SocketAsyncEventArgs back to the pool
        ReleaseArgs(e);

        // Thread safe way of triggering the event
        var evnt = OnDataReceived;

        if (evnt != null)
        {
            evnt(e, new SocketDataEventArgs(data));
        }
    }

    private void ReleaseArgs(SocketAsyncEventArgs e)
    {
        e.Completed -= PacketReceived;
        _bufferManager.InsertSocketAsyncEventArgs(e);
        _bufferManager.InsertBuffer(e.Buffer);
    }
    #endregion

    #region "ISocket implicit implementation"
    public void Start()
    {
        this.LogProvider.Log("Starting. Creating socket", "UDPSocket.Start", LogLevel.Verbose);
        _socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        _socket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.PacketInformation, true);
        _socket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, this.AllowAddressReuse);
        _socket.Bind(new IPEndPoint(this.ListeningAddress, this.Port));

        // use a default message prefix
        this.MessagePrefixLength = 4;

        // begin receiving packets
        Receive();

        this.LogProvider.Log("Socket created. Listening for packets", "UDPSocket.Start", LogLevel.Verbose);
    }

    public void Stop()
    {
        // do a shutdown before you close the socket
        try
        {
            _socket.Shutdown(SocketShutdown.Both);
            this.LogProvider.Log("Clean socket shutdown", "TCPSocket.CloseSocket", LogLevel.Verbose);
        }
        // throws if socket was already closed
        catch (Exception ex)
        {
            this.LogProvider.Log("Error closing socket - " + ex.Message, "TCPSocket.CloseSocket", LogLevel.Minimal);
        }

        // Close the socket, which calls Dispose internally
        _socket.Close();
        this.LogProvider.Log("Socket closed", "TCPSocket.CloseSocket", LogLevel.Verbose);
    }

    public event EventHandler<SocketDataEventArgs> OnDataReceived;
    #endregion
} 
```

如果需要，我可以制作完整的服务器/客户端演示，并发布其他类，例如缓冲区管理器。这是我第一次使用 SocketAsyncEventArgs，所以我的实现可能不是 100% 正确

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T11:43:35.090

我想我找到了问题所在。`Stack<T>`我没有使用 a 来管理缓冲区，而是使用 a来`Queue<T>`大大减少问题。对于那些感兴趣的人，这是我对缓冲区队列的实现：

```
/// <summary>
/// Creates a managed Queue that makes a program wait when the resources are depleated
/// </summary>
/// <typeparam name="T">The type of Queue to create</typeparam>
public sealed class ManagedQueue<T>
{
    #region "Constructors"
    public ManagedQueue(Int32 capacity = 400, bool fillQueue = false, Queue<T> queue = null)
    {
        Capacity = capacity;
        _queue = queue ?? new Queue<T>(capacity);
        _restrictor = new SemaphoreSlim((fillQueue) ? Capacity : 0, Capacity);

        if (fillQueue)
        {
            // Setup the queue with default values
            for (Int32 i = 0; i < Capacity; i++)
            {
                Insert(default(T));
            }
        }
    }
    #endregion

    /// <summary>
    /// Gets the defined over all queue Capacity
    /// </summary>
    public Int32 Capacity { get; private set; }

    // The queue to hold the items
    private readonly Queue<T> _queue;

    // The SemaphoreSlim to restrict access to the queue
    private readonly SemaphoreSlim _restrictor;

    /// <summary>
    /// Take the next resource available from the queue. This is a blocking operation if capacity is reached.
    /// </summary>
    /// <returns>The next resource available</returns>
    public T TakeNext()
    {
        // Sanity Check
        if (_queue == null)
        {
            throw new InvalidOperationException("The queue cannot be null");
        }

        // make us wait if necessary
        _restrictor.Wait();

        lock (_queue)
        {
            if (_queue.Count > 0)
            {
                return _queue.Dequeue();
            }
            throw new Exception("There has been a Semaphore/queue offset");
        }
    }

    /// <summary>
    /// Adds an item to the queue. This will release other threads if they are blocked
    /// </summary>
    /// <param name="item"></param>
    public void Insert(T item)
    {
        // Sanity Check
        if (_queue == null)
        {
            throw new InvalidOperationException("The queue cannot be null");
        }

        // Sanity Check
        if (item == null)
        {
            throw new ArgumentException("The item cannot be null");
        }

        lock (_queue)
        {
            _queue.Enqueue(item);
            _restrictor.Release();
        }
    }
} 
```

# html - 在 IE 6 和 7 中为图像使用数据 URI

> ID：14858955
> 
> 赞同：1
> 
> 时间：2013-02-13T17:05:55.170
> 
> 标签：html, internet-explorer-7, base64, internet-explorer-6, local-storage

我目前正在开发一个网络应用程序。它包含在服务器中动态生成的图像（因此在请求后需要一些时间才能出现）然后抛出。所以我想我会使用`HTML5 local-storage`API 来缓存图像，以便在后续请求同一图像时，可以立即提供服务。为此，我计划使用图像的 base64 编码作为源，而不是使用源 URL。

现在将首先检查该图像数据当前是否在本地存储中可用，而不是从服务器请求图像`JS`（例如，具有属性的图像`123`存储在本地存储中，以**123**作为键，以 base 64 编码作为值）。如果是，那么只需使用从那里获得的值更改图像的源。否则请求服务器发送编码，收到后将其存储在缓存中。

问题是`IE6`并且`IE7`不支持它。有一种解决方法，如此[处](http://www.phpied.com/mhtml-when-you-need-data-uris-in-ie7-and-under/)所述，但这涉及到一个服务器端 CSS 文件来包含图像数据。由于图像将即时生成，这不符合我们的目的。我还能如何在`IE6`and中实现这一点`IE7`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:26:09.450

设置标题以通知浏览器资源已缓存：

```
header("Last-Modified: " . date("D, d M Y H:i:s", getlastmod())); 
```

在 PHP 或

```
Response.Cache.SetLastModified(DateTime.Now); 
```

在.net

这样浏览器就会缓存资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:12:06.050

或者，不要尝试在客户端缓存任何内容。在服务器端缓存生成的图像并像平常一样托管这些图像。您不需要本地存储并将其缓存在客户端。

换句话说：

1.  使用您的脚本生成图像服务器端
2.  把它缓存在某个地方`/httpdocs/cache/images/whatever-hash.jpg`
3.  在您的文档中提供图像`<img src="/cache/images/whatever-hash.jpg">`

如果生成图像需要 5 秒，并且您有 120 个并发用户请求 100 个唯一页面，并且您的服务器脚本在任何给定时间只能处理 4 个线程，即 5 秒 x (120 /4) / 60 = **2.5 分钟**的服务器在为队列图像中的最后一个用户提供服务并将数据存储在本地存储之前的处理时间。

如果所有用户都请求相同的确切页面，则花费的时间相同。每个用户缓存并没有真正的好处，因为每个用户都必须要求服务器生成他们自己的图像。此外，由于 localstorage 经常会失效，用户做的越多，他们会觉得用户体验相当慢，我认为你的应用程序会保释。

恕我直言，在服务器上缓存文件将有更多好处。当然它会占用服务器存储空间，但现在它相当便宜，您可以使用云 CDN（例如 www.maxcdn.com）来应对负载。

如果您仍然决定需要缓存客户端，因为 IE6/IE7 不支持本地存储或数据 URI，请查看以下内容

*   你需要一个用于 IE6/IE7 的 Web Storage shim，在[https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills上有一个列表](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)
*   您需要一种将生成的图像临时存储为 blob 并将其粘贴到存储中的方法。示例：[http ://robnyman.github.com/html5demos/localstorage/](http://robnyman.github.com/html5demos/localstorage/)
*   您还可以使用 Canvas Shim 和 toBlob shim：[https ://github.com/eligrey/canvas-toBlob.js/](https://github.com/eligrey/canvas-toBlob.js/)

# php - 如何将变量形式的 javascript 发送到 php？

> ID：14858956
> 
> 赞同：-3
> 
> 时间：2013-02-13T17:05:56.213
> 
> 标签：php, javascript

如何从 java 脚本函数发送变量并将其用于 PHP 函数？

```
enter code here
<script>
    function showpopup(var1){
        document.getElementById('popup').style.display='block';
        document.getElementById('mane').value=var1;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:11:35.050

您所谈论的内容通常被认为是不可能的，`JavaScript`客户**端**和**服务器端**`PHP`也是如此

 **也就是说，如果您需要在页面加载**后**`PHP`运行一些东西，那么您将考虑需要[AJAX](http://www.w3schools.com/ajax/default.ASP)或 jQuery 的[.post()](http://api.jquery.com/jQuery.post/)之类的东西 。看看这些，你就能找到你需要的东西。**

# agile - 在 scrum 中，是否可以在 sprint 期间更改验收标准？

> ID：14858959
> 
> 赞同：4
> 
> 时间：2013-02-13T17:06:09.560
> 
> 标签：agile, criteria, scrum, sprint, acceptance

我的组织目前正在实施 Scrum。在处理产品待办事项以更改某些业务逻辑的处理方式时，我们意识到某些业务逻辑存在缺陷。PBI 及其验收标准目前面向修改现有业务逻辑的实现。PO 认为对业务逻辑本身的这种更改是一个高优先级，应该以某种方式进入 sprint，开发团队也同意，特别是因为从开发的角度来看，将这两件事一起做是很有意义的。

但是，我们不确定修改验收标准或创建新的 PBI 并立即将其拉入 sprint 是否更有意义。我个人倾向于新的 PBI，因为我觉得这是一个与原始 PBI 不同的故事和一组验收标准，而且我对在冲刺中期改变验收标准持怀疑态度。PO指出，这项新要求和原PBI将同时实施，如果没有新要求，原PBI毫无意义。因此，PO 认为调整原始 PBI 的验收标准会更合适，而不是创建两个独立的最终反映相同实施的标准。

这些方法中的一种是否比另一种更适合scrum？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T05:33:54.243

您应该只在团队同意的情况下修改故事，因为他们承诺提供一组标准。如果您在未经团队**一致**同意的情况下更改标准，那么您为什么要费心一开始就得到它？

摆弄 sprint backlog 是一件大事，因为那样你就会贬低团队在 sprint 期间交付特定故事集的承诺。

如果团队不愿意接受更改，PO 可以撤回原始故事并将新故事放在待办事项列表的顶部。它可能包含在当前 sprint 中，也可能不包含。

抵制你的每一根纤维，即 PO 可以在冲刺期间摆弄冲刺积压的想法。我的 PO 试图在最近的 sprint 快结束时放弃一个非常小的故事（基于一些非常虚假的推理）。

来自[http://www.scrum.org/scrum-guides/](http://www.scrum.org/scrum-guides/)：

> 只有开发团队可以在 Sprint 期间更改其 Sprint Backlog。

我认为这是个好建议，你应该怀着极大的恐惧无视它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T12:27:12.713

Scrum 有一些细微的差异需要理解。

在 Sprint 计划中，产品负责人根据团队的速度向团队提出他/她希望交付的次高价值要求。PO 解释要求，团队就具体细节向 PO 提出问题。

注意：这不应该是团队第一次看到需求，因为他们之前应该在梳理会议中看到过。

团队讨论他们的方法，完成他们的设计并创建大量任务来完成并同意预测。团队制定 sprint backlog、sprint 目标并开始工作。

没有人可以改变团队正在处理的核心需求；连团队都没有。如果 PO 认为继续工作没有任何价值，只有 PO 有权终止工作。在 PO 方面的不良计划与对需求的澄清之间有一条细线。

要求不是合同，团队应该拥有必须做的事情的核心。应收集详细信息并稍作修改以完成要求。团队可以完全更改他们正在处理的任务，添加更多任务或删除任务以帮助沟通和协作；只要它是交付请求的要求。澄清细节是完全可以接受的。

大多数团队面临的挑战是在哪里澄清会改变需求的含义。发生这种情况时，您应该在回顾中将问题扼杀在萌芽状态，并适应您编写需求的方式；从而消除歧义。这只是意味着你需要花更多的时间梳理。

**回答你的问题。** 请如果 PO 和团队认为改变某些东西是有意义的……就去做吧。但是，这应该是例外而不是规则。如果它一直在发生；你的修饰很糟糕。在 Sprint 中明确验收标准和提高质量并没有错。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-04T12:24:17.680

在这种情况下，我们通常让产品负责人从 sprint 中删除原始用户故事，这样可以在 sprint 中腾出时间。有了这段空闲时间，PO 可以请求将新的用户故事（具有更新的接受标准）包含在 sprint 中。当然，假设新用户故事可以在 sprint 的剩余时间内完成。

通过将流程拆分为 2 个独立的步骤，它可以确保 PO 了解某些工作必须从 sprint 中完成，然后才能进行更多工作，从而使流程能够抵抗未来的范围蔓延。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T04:06:40.073

通常，一旦估算出票证，更改票证 (PBI) 的 AC 是一个很大的禁忌，尤其是在 sprint 中。话虽这么说，你必须问这样做会导致什么问题。

即改变 AC 可能会导致估计不正确 - 即太低。所以呢？好吧，这可能会导致团队无法从 sprint 中完成提交的工单。那很糟。

在这种情况下，一张新票可能是个坏主意，因为它听起来不符合[INVEST](http://en.wikipedia.org/wiki/INVEST_%28mnemonic%29)故事的“独立”标准。

在尝试跟踪冲刺的添加故事/点时，修改当前工单可能会给您带来一些会计问题，但除此之外，我没有看到任何问题。这里的关键是重新估计，以便每个人都明白这是更多的工作。

尽量不要陷入“适合scrum”的事情。想想什么是有效的，不同的事情会给你带来什么问题，并据此做出决定。

最后，确保在回顾中出现这个问题，这样您就可以讨论为什么在这种情况下 AC 不正确或不完整，并查看团队是否可以采取可操作的步骤来防止将来发生这种情况。

PS，您可以在 pm.stackexchange.com 上找到有关此类问题的更多帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T16:14:33.687

我很快就解决了你的问题。事情就是这样。我们也有过类似的情况。我们创建了一个增量故事，并从当前 sprint 中提取了一些内容并将其移至另一个 sprint。只需将其称为 DELTA US 并提供 1.1 版即可。

它有帮助吗？

谢谢，克里斯。

# build-automation - 用于运行我的自动化测试的开源工具

> ID：14858960
> 
> 赞同：0
> 
> 时间：2013-02-13T17:06:14.590
> 
> 标签：build-automation

我想知道一个最好的开源工具，我可以用它来管理和维护每个构建和每个产品版本的自动化测试。

基本上，在每次构建期间，我都想点击一个链接来触发我所有的测试用例。然后，它应该生成一个带有内部版本号的链接，并列出失败和通过的数量，并有一个指向它们的链接以获取更多详细信息等。

我已经在 Selenium WebDriver 中使用 TestNG、Eclipse 和 Java 编程语言设置了框架。

早些时候，我们将 Atlassian Bamboo 用于我们的其他产品，但我们并没有更多地使用它。

我希望我清楚我在寻找什么。

谢谢，阿洛克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:58:21.493

我建议查看像 TeamCity 或 Jenkins 这样的构建服务器。它们都可以免费用于商业用途，带有可选的“企业”许可证，可以购买该许可证以提供额外的支持和功能，但它们不是开源的。我已经使用 TeamCity 大约一年了，它没有给我带来任何问题。请参阅以下网址：

[http://www.jetbrains.com/teamcity](http://www.jetbrains.com/teamcity) [http://jenkins-ci.org/](http://jenkins-ci.org/)

# java - 嵌入式 Jetty 关闭异常

> ID：14858963
> 
> 赞同：0
> 
> 时间：2013-02-13T17:06:23.967
> 
> 标签：java, embedded-jetty

嵌入式 Jetty 关闭问题。

我在我的 java 应用程序中嵌入了码头。我从控制台运行应用程序。但是，每当我按 CONTROL+C 关闭服务器时，服务器都会正常关闭，但会引发一些套接字异常。这是运行码头服务器的代码

```
public class WebServerWrapper {

    private Server server;
    private SmppServerWrapper sw;
    /**
     * 
     */
    public WebServerWrapper() {
        server = new Server();
        // Set some default attributes
        server.setAttribute("org.mortbay.jetty.Request.maxFormContentSize", 0);
        server.setGracefulShutdown(5000);
        server.setStopAtShutdown(true);     
    }

    public WebServerWrapper(int port){
        server = new Server(port);
    }

    public void setHandler(ContextHandlerCollection contexts) {
        server.setHandler(contexts);
    }

    public void addConnector(Connector connector){
        server.addConnector(connector);
    }

    public void start() throws Exception {
        server.start();
        server.join();      
    }

    public void stop() throws Exception {
        sw = SmppServerWrapper.getInstance();
        sw.shutdown();
        server.stop();
    }

    public boolean isStarted() {
        return server.isStarted();
    }

    public boolean isStopped() {
        return server.isStopped();
    }   
}

This is the method that starts the server
private static void boostrap() throws Exception {

        // Load the configuration file
        if(new UnitySmppPortalConfigDAO().initialize()){

            final URL location = WebStartup.class.getClassLoader().getResource(
                    WEB_ROOT);
            final String warUrlString = location.toExternalForm();

            WebContextBuilder contextBuilder = new WebContextBuilder();
            WebAppContext context = contextBuilder.buildAppContext();
            context.setResourceBase(warUrlString);
            // context.setResourceBase(WEB_ROOT);
            context.setClassLoader(Thread.currentThread().getContextClassLoader());

            // Session Manager
            SessionHandler sh = new SessionHandler();
            context.setSessionHandler(sh);

            // Set the System property to handle the compilation of the jsp file
            System.setProperty("org.apache.jasper.compiler.disablejsr199", "true");

            // Connector connector = new SelectChannelConnector();
            SocketConnector connector = new SocketConnector();
            /*
             * connector.setPort(Integer.parseInt(System.getProperty("jetty.port",
             * new PropertiesConfiguration("smpp-config.properties")
             * .getString("http_port").trim())));
             */connector.setPort(Integer.parseInt(System.getProperty("jetty.port",
                    PORTAL_PORT)));

            connector.setMaxIdleTime(60000);
            connector.setHost("localhost");

            ContextHandlerCollection contexts = new ContextHandlerCollection();
            contexts.setHandlers(new Handler[] { context });

            final WebServerWrapper serverWrapper = new WebServerWrapper();
            serverWrapper.addConnector(connector);
            serverWrapper.setHandler(contexts);

            logger.info("Starting Jetty Web Container....");
            serverWrapper.start();
            logger.info("Jetty Web Container running....");         
        }
        else{
            logger.debug("Default Configuration File cannot be loaded");
        }
    } 
```

这是我得到的错误代码

```
C:\Users\Arsene\Documents\UnitySmpp>2013-02-13/16:58:40.610  INFO: server.Server - Graceful shutdown SocketConnector@localhost:74
2013-02-13/16:58:40.685  INFO: server.Server - Graceful shutdown o.e.j.w.WebAppContext{/smpp,rsrc:com/smsgh/unitysmpp/Portal/}
2013-02-13/16:58:43.856 DEBUG: http.HttpParser - filled -1/0
2013-02-13/16:58:43.856 DEBUG: http.HttpParser - filled -1/0
2013-02-13/16:58:43.856 DEBUG: http.HttpParser - filled -1/0
2013-02-13/16:58:43.857 DEBUG: server.AbstractHttpConnection - closed BlockingHttpConnection@4ddf34bd,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=0,l=0,c=0},r=0
2013-02-13/16:58:43.858 DEBUG: server.AbstractHttpConnection - closed BlockingHttpConnection@62c524c1,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=0,l=0,c=0},r=0
2013-02-13/16:58:43.858 DEBUG: server.AbstractHttpConnection - closed BlockingHttpConnection@4794d608,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=0,l=0,c=0},r=0
2013-02-13/16:58:45.686 DEBUG: component.AbstractLifeCycle - stopping SocketConnector@localhost:74
2013-02-13/16:58:45.687 DEBUG: component.AbstractLifeCycle - stopping PooledBuffers [3/1024@6144,0/1024@16384,0/1024@-]/PooledBuffers [3/1024@6144,3/1024@32768,0/1024@-]
2013-02-13/16:58:45.687 DEBUG: component.AbstractLifeCycle - STOPPED null/null
2013-02-13/16:58:45.687 DEBUG: component.AbstractLifeCycle - STOPPED SocketConnector@localhost:74
2013-02-13/16:58:45.690 DEBUG: http.HttpParser -
java.net.SocketException: Socket Closed
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at org.eclipse.jetty.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:375)
        at org.eclipse.jetty.io.bio.StreamEndPoint.fill(StreamEndPoint.java:141)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.fill(SocketConnector.java:227)
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1035)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:280)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
        at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Unknown Source)
2013-02-13/16:58:45.694 DEBUG: http.HttpParser - HttpParser{s=-14,l=0,c=-3}
org.eclipse.jetty.io.EofException
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1041)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:280)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
        at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.net.SocketException: Socket Closed
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at org.eclipse.jetty.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:375)
        at org.eclipse.jetty.io.bio.StreamEndPoint.fill(StreamEndPoint.java:141)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.fill(SocketConnector.java:227)
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1035)
        ... 7 more
2013-02-13/16:58:45.702 DEBUG: bio.SocketConnector - EOF
org.eclipse.jetty.io.EofException
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1041)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:280)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
        at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.net.SocketException: Socket Closed
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at org.eclipse.jetty.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:375)
        at org.eclipse.jetty.io.bio.StreamEndPoint.fill(StreamEndPoint.java:141)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.fill(SocketConnector.java:227)
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1035)
        ... 7 more
2013-02-13/16:58:45.721 DEBUG: server.AbstractHttpConnection - closed BlockingHttpConnection@1ab979de,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=0,l=0,c=-3},r=7
2013-02-13/16:58:45.690 DEBUG: http.HttpParser -
java.net.SocketException: Socket Closed
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at org.eclipse.jetty.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:375)
        at org.eclipse.jetty.io.bio.StreamEndPoint.fill(StreamEndPoint.java:141)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.fill(SocketConnector.java:227)
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1035)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:280)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
        at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Unknown Source)
2013-02-13/16:58:45.738 DEBUG: http.HttpParser - HttpParser{s=-14,l=0,c=-3}
org.eclipse.jetty.io.EofException
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1041)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:280)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
        at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.net.SocketException: Socket Closed
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at org.eclipse.jetty.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:375)
        at org.eclipse.jetty.io.bio.StreamEndPoint.fill(StreamEndPoint.java:141)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.fill(SocketConnector.java:227)
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1035)
        ... 7 more
2013-02-13/16:58:45.752 DEBUG: bio.SocketConnector - EOF
org.eclipse.jetty.io.EofException
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1041)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:280)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
        at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.net.SocketException: Socket Closed
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at org.eclipse.jetty.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:375)
        at org.eclipse.jetty.io.bio.StreamEndPoint.fill(StreamEndPoint.java:141)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.fill(SocketConnector.java:227)
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1035)
        ... 7 more
2013-02-13/16:58:45.770 DEBUG: server.AbstractHttpConnection - closed BlockingHttpConnection@72d3b39a,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=0,l=0,c=-3},r=1
2013-02-13/16:58:45.690 DEBUG: http.HttpParser -
java.net.SocketException: Socket Closed
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at org.eclipse.jetty.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:375)
        at org.eclipse.jetty.io.bio.StreamEndPoint.fill(StreamEndPoint.java:141)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.fill(SocketConnector.java:227)
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1035)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:280)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
        at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Unknown Source)
2013-02-13/16:58:45.691 DEBUG: component.AbstractLifeCycle - stopping org.eclipse.jetty.server.handler.ContextHandlerCollection@6f91fefb
2013-02-13/16:58:45.786 DEBUG: http.HttpParser - HttpParser{s=-14,l=0,c=-3}
org.eclipse.jetty.io.EofException
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1041)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:280)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
        at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.net.SocketException: Socket Closed
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at org.eclipse.jetty.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:375)
        at org.eclipse.jetty.io.bio.StreamEndPoint.fill(StreamEndPoint.java:141)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.fill(SocketConnector.java:227)
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1035)
        ... 7 more
2013-02-13/16:58:45.787 DEBUG: handler.AbstractHandler - stopping org.eclipse.jetty.server.handler.ContextHandlerCollection@6f91fefb
2013-02-13/16:58:45.804 DEBUG: bio.SocketConnector - EOF
org.eclipse.jetty.io.EofException
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1041)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:280)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
        at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.net.SocketException: Socket Closed
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at org.eclipse.jetty.io.ByteArrayBuffer.readFrom(ByteArrayBuffer.java:375)
        at org.eclipse.jetty.io.bio.StreamEndPoint.fill(StreamEndPoint.java:141)
        at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.fill(SocketConnector.java:227)
        at org.eclipse.jetty.http.HttpParser.fill(HttpParser.java:1035)
        ... 7 more 
```

请协助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:24:46.803

Jetty 的调试输出非常冗长。您可以使用以下方法关闭它：

```
org.mortbay.log.Log.getLog().setDebugEnabled(false); 
```

# sql - 用于审计的数据库设计：答案多行与多列

> ID：14858967
> 
> 赞同：1
> 
> 时间：2013-02-13T17:06:37.177
> 
> 标签：sql, database-design, query-performance

我正在 SQL Server 2008 数据库中设计一个表结构，它将保存审计结果。审计目前有 65 个问题和 0-4 或 N/A 的可能答案。下面描述了我为保存这些数据（仍在测试中）而创建的表结构。提交后，会在 AuditDetail 表中为每个问题创建一条记录。如果选择的答案是 0、1 或 2，则用户必须输入详细信息，描述为什么它低、如何修复以及谁负责（这会在 AuditIssue 表中创建一条记录）。每个问题由两个不同的类别描述，分别名为 QuestionCategory 和 ItemCategory。

我担心的问题是，在我当前的表设计中，每次提交的审计都会在 AuditDetail 表中添加 65 行。这个审计每个月至少需要完成70次（很多部门都在用）。因此，此表结构每月将向 AuditDetail 表添加大约 4550 行。我担心这可能会对未来的性能产生负面影响，并且希望避免在将其移入生产环境后重新设计表结构。

我能想出的唯一其他解决方案是将 AuditDetail 表替换为一个表，该表包含一个针对每个问题的列，并将每个审计的分数存储在 1 行中，跨越 65 列以上。

我觉得我当前的设计遵循规范化规则，而我认为不会为每个问题创建一个列。我几乎可以肯定，这些问题将来会发生变化（可能很多次），包括添加/删除问题和更改现有问题。

我寻找这个问题的答案将我引向这两个来源：
[许多行或许多列](https://stackoverflow.com/questions/1201550/which-is-faster-many-rows-or-many-columns)
[将答案存储在列中](https://stackoverflow.com/questions/14227482/store-answers-in-sql-table-with-unique-id-and-store-each-answer-in-columns)

我了解每次问题更改时添加/删除列并不理想。 **我的问题是每月创建 4550 行对查询性能的影响有多大？**我不知道我的情况是否与“在列中存储答案”中描述的情况相同，因为他们的表中似乎只有 100 行。 **如果查询的性能将大幅降低，是否有更好的表结构是我没有想到的？**

我的查询将主要用于生成图表，显示每月完成的审计总数、打开的问题、已关闭的问题和过期问题、产生问题的前 10 个问题以及每月或每日审计分数（每个问题类别的答案/可能的总分或答案/可能的总分）。这些图表中的每一个都需要按部门、月份、区域等进行排序。

***忏悔：***我最终倾向于使用相关子查询来生成其中一些图表，我知道这已经降低了查询性能。我尝试解决它们，但由于我不是 SQL 大师，我最终陷入了困境。

我用于测试的当前表结构如下：

```
**AuditMain:**  
--AuditId  <-- PK  
--DeptNumber <-- FK to Dept Table  
--AuditorId  <-- FK to Auditor Table  
--StartDate  
--Area_Id    <-- FK to Area Table  

**AuditDetail**  
--DetailId  <-- PK  
--QuestionId  <-- FK to Question Table  
--Answer  
--NotApplicable  (boolean to determine if they chose N/A, needed to calcualte audit score)  
--AuditId  <-- FK to AuditMain  

**AuditIssue**  
--IssueId <-- PK  
--IssueDescription  
--Countermeasure  
--PersonResponsible  
--Status  
--DueDate  
--EndDate  
--DetailId <--FK to AuditDetail  

**AuditQuestion**  
--QuestionId <-- PK  
--QuestionNumber  (corresponds to the question number on the audit input form)  
--QuestionDescription  
--QuestionCategoryId <-- FK to QuestionCategory  
--ItemCategoryId <-- FK to ItemCategory  

**QuestionCategory**  
--QuestionCategoryId <-- PK  
--CategoryDescription  
--CategoryName  

**ItemCategory**  
--ItemCategoryId  <--PK  
--ItemCategoryDescription 
```

感谢您阅读如此多的解释。我想在信息太多而不是太少方面犯错，但是如果需要任何进一步的信息，请告诉我。我很感激任何和所有的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:17:29.010

除非您的生产环境严重不足，否则它应该能够在一个表中保存 50 万行而不会严重降低性能。检索性能将受到您用于查询的字段和您在其上构建索引的字段的极大影响。这可以在等待几秒钟和几分钟之间产生差异。

这里有太多细节需要介绍，但是有很多关于数据库设计的优秀教程。这些标题中最好的将教您如何设计，不仅要考虑性能，还要考虑未来的灵活性，这同样重要。

乍一看，您的表结构看起来相当不错。

# mysql - mysql .net 连接器连接池浪费了

> ID：14858969
> 
> 赞同：0
> 
> 时间：2013-02-13T17:06:43.513
> 
> 标签：mysql, asp.net-mvc-3, innodb, windows-server-2008-r2, mysql-connector

我有使用 mysql 数据库和 mysql .net 连接器的 asp.net mvc 3 应用程序。应用程序使用成员资格、角色、配置文件提供者和 subsonic3 作为数据层。应用程序能够浪费非常多的连接，最终它会因超时异常而崩溃。我克隆了服务器/应用程序设置，并设法重现了 10 个连接限制的问题。我现在拥有的信息如下。首先，innoDb 事务状态中的“清理”是什么意思？我找到了这个信息：[http ://dev.mysql.com/doc/refman/5.0/en/general-thread-states.html](http://dev.mysql.com/doc/refman/5.0/en/general-thread-states.html)但我看不到交易如何保持这种状态。当然，我迫切需要任何可以提供帮助的信息。我实际上调试了 Subsonic 代码，我没有看到它做错了什么。当我变得更加绝望时，我想我会再做一次。现在我想看看连接器中发生了什么。下面列出的连接是浪费的，即不可重复使用。连接：

```
mysql> SHOW FULL PROCESSLIST;
+----+------+-----------------+------------+---------+------+-------+-----------------------+
| Id | User | Host            | db         | Command | Time | State | Info                  |
+----+------+-----------------+------------+---------+------+-------+-----------------------+
|  2 | root | localhost:49167 | NULL       | Query   |    0 | init  | SHOW FULL PROCESSLIST |
| 15 | root | localhost:49360 | somedbname | Sleep   |  260 |       | NULL                  |
| 16 | root | localhost:49361 | NULL       | Sleep   |  260 |       | NULL                  |
| 19 | root | localhost:49437 | somedbname | Sleep   | 3969 |       | NULL                  |
| 20 | root | localhost:49439 | somedbname | Sleep   | 3702 |       | NULL                  |
| 21 | root | localhost:49440 | somedbname | Sleep   | 3396 |       | NULL                  |
| 22 | root | localhost:49457 | somedbname | Sleep   | 3102 |       | NULL                  |
| 23 | root | localhost:49460 | somedbname | Sleep   | 2802 |       | NULL                  |
| 24 | root | localhost:49478 | somedbname | Sleep   | 1929 |       | NULL                  |
| 26 | root | localhost:49497 | somedbname | Sleep   | 1629 |       | NULL                  |
| 27 | root | localhost:49498 | somedbname | Sleep   | 1329 |       | NULL                  |
+----+------+-----------------+------------+---------+------+-------+-----------------------+
11 rows in set (0.00 sec) 
```

InnoDb 状态：

```
=====================================
2013-02-13 07:54:01 790 INNODB MONITOR OUTPUT
=====================================
Per second averages calculated from the last 46 seconds
-----------------
BACKGROUND THREAD
-----------------
srv_master_thread loops: 311 srv_active, 0 srv_shutdown, 14316 srv_idle
srv_master_thread log flush and writes: 14623
----------
SEMAPHORES
----------
OS WAIT ARRAY INFO: reservation count 300
OS WAIT ARRAY INFO: signal count 296
Mutex spin waits 207, rounds 6140, OS waits 111
RW-shared spins 200, rounds 6000, OS waits 172
RW-excl spins 1, rounds 480, OS waits 15
Spin rounds per wait: 29.66 mutex, 30.00 RW-shared, 480.00 RW-excl
------------
TRANSACTIONS
------------
Trx id counter 7160
Purge done for trx's n:o < 7157 undo n:o < 0 state: running but idle
History list length 650
LIST OF TRANSACTIONS FOR EACH SESSION:
---TRANSACTION 7159, not started
MySQL thread id 27, OS thread handle 0xb6c, query id 11259 localhost ::1 root cleaning up
---TRANSACTION 7124, not started
MySQL thread id 26, OS thread handle 0xc88, query id 11080 localhost ::1 root cleaning up
---TRANSACTION 0, not started
MySQL thread id 2, OS thread handle 0x790, query id 11270 localhost ::1 root init
SHOW ENGINE INNODB STATUS
---TRANSACTION 7005, not started
MySQL thread id 24, OS thread handle 0xde0, query id 10510 localhost ::1 root cleaning up
---TRANSACTION 6865, not started
MySQL thread id 23, OS thread handle 0x1d0, query id 9615 localhost ::1 root cleaning up
---TRANSACTION 6697, not started
MySQL thread id 22, OS thread handle 0x874, query id 8824 localhost ::1 root cleaning up
---TRANSACTION 6647, not started
MySQL thread id 21, OS thread handle 0xfa8, query id 8546 localhost ::1 root cleaning up
---TRANSACTION 6531, not started
MySQL thread id 20, OS thread handle 0x910, query id 8019 localhost ::1 root cleaning up
---TRANSACTION 6243, not started
MySQL thread id 19, OS thread handle 0x740, query id 6886 localhost ::1 root cleaning up
---TRANSACTION 0, not started
MySQL thread id 15, OS thread handle 0x75c, query id 11268 localhost 127.0.0.1 root cleaning up
--------
FILE I/O
--------
I/O thread 0 state: wait Windows aio (insert buffer thread)
I/O thread 1 state: wait Windows aio (log thread)
I/O thread 2 state: wait Windows aio (read thread)
I/O thread 3 state: wait Windows aio (read thread)
I/O thread 4 state: wait Windows aio (read thread)
I/O thread 5 state: wait Windows aio (read thread)
I/O thread 6 state: wait Windows aio (write thread)
I/O thread 7 state: wait Windows aio (write thread)
I/O thread 8 state: wait Windows aio (write thread)
I/O thread 9 state: wait Windows aio (write thread)
Pending normal aio reads: 0 [0, 0, 0, 0] , aio writes: 0 [0, 0, 0, 0] ,
 ibuf aio reads: 0, log i/o's: 0, sync i/o's: 0
Pending flushes (fsync) log: 0; buffer pool: 0
1017 OS file reads, 3059 OS file writes, 2067 OS fsyncs
0.00 reads/s, 0 avg bytes/read, 0.00 writes/s, 0.00 fsyncs/s
-------------------------------------
INSERT BUFFER AND ADAPTIVE HASH INDEX
-------------------------------------
Ibuf: size 1, free list len 0, seg size 2, 0 merges
merged operations:
 insert 0, delete mark 0, delete 0
discarded operations:
 insert 0, delete mark 0, delete 0
Hash table size 17393, node heap has 1 buffer(s)
0.00 hash searches/s, 0.00 non-hash searches/s
---
LOG
---
Log sequence number 2556460
Log flushed up to   2556460
Pages flushed up to 2556460
Last checkpoint at  2556460
0 pending log writes, 0 pending chkp writes
852 log i/o's done, 0.00 log i/o's/second
----------------------
BUFFER POOL AND MEMORY
----------------------
Total memory allocated 8585216; in additional pool allocated 0
Dictionary memory allocated 142202
Buffer pool size   512
Free buffers       255
Database pages     256
Old database pages 0
Modified db pages  0
Pending reads 0
Pending writes: LRU 0, flush list 0 single page 0
Pages made young 0, not young 0
0.00 youngs/s, 0.00 non-youngs/s
Pages read 988, created 63, written 1772
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
No buffer pool page gets since the last printout
Pages read ahead 0.00/s, evicted without access 0.00/s, Random read ahead 0.00/s
LRU len: 256, unzip_LRU len: 0
I/O sum[0]:cur[0], unzip sum[0]:cur[0]
--------------
ROW OPERATIONS
--------------
0 queries inside InnoDB, 0 queries in queue
0 read views open inside InnoDB
Main thread id 1240, state: sleeping
Number of rows inserted 49, updated 955, deleted 0, read 5238
0.00 inserts/s, 0.00 updates/s, 0.00 deletes/s, 0.00 reads/s
----------------------------
END OF INNODB MONITOR OUTPUT
============================ 
```

Web 应用程序被以下异常卡住并且在应用程序池被回收之前无法使用。

```
System.Configuration.Provider.ProviderException: An exception occurred. 
Please check the Event Log. ---> MySql.Data.MySqlClient.MySqlException: 
error connecting: Timeout expired.  
The timeout period elapsed prior to obtaining a connection from the pool.  
This may have occurred because all pooled connections were in use and max 
pool size was reached. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:15:03.130

好的，我将提供一些可以在类似情况下重复使用的调试步骤，以给自己洗点。

我确实升级到了 Version=6.6.5.0。我下载了源代码并将调试器附加到连接器，并且池工作正常，但我仍然遇到同样的问题。来自池的连接未被重用。

我将手表添加到私有 MySqlPool.inUsePool；并看到所有卡住的连接都在那里使用。通过添加另一个手表（实际上是其中的 10 个）：inUsePool[0-10].reader.Command.CommandText 帮助我识别代码中没有关闭阅读器/连接的部分。所有卡住的连接确实被我的读者占用了。都有相同的 SQL 命令文本，在应用程序中只调用一次。

# iphone - 停止 UITableView 为键盘制作动画

> ID：14858970
> 
> 赞同：0
> 
> 时间：2013-02-13T17:06:42.793
> 
> 标签：iphone, objective-c, uitableview, animation, uitextview

我有一个`UITableView`包含`UITextView`. 当我调用`-becomeFirstResponder`时，`UITextView`我`UITableView`会被自动动画搞砸。这只发生在**必须**`UITextView`向下滚动到文本末尾时。
我已经尝试在`UITableView`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:53:14.760

根据您的界面的需要，您可以通过使父视图控制器成为`UIViewController`而不是的实例来完成您的要求`UITableViewController`（这就是提供“滑动以避开键盘”行为的原因）。

事实上，如果您的 UI 仅包含文本视图，您可能根本不需要表格视图。

# html - 通过css居中背景颜色

> ID：14858972
> 
> 赞同：0
> 
> 时间：2013-02-13T17:06:46.597
> 
> 标签：html, css

我在背景中有一个居中的图像，但我需要我的主要背景颜色来拉伸图像并保持在中心。

这是身体背景的CSS

```
body{padding:0; margin:0; background:url(/b.jpg) center 10px no-repeat;} 
```

这是主要背景的CSS

```
.main{background:#4e4645;} 
```

我试过背景位置和保证金百分比，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:33:44.333

您可以使用`margin: 0 auto`将您的`.main`div 在体内居中。然后您需要做的就是将宽度设置`.main`为等于您身体背景图像的宽度。

```
.main {
  margin: 0 auto;
  width: 300px;
  background: #4e4645;
} 
```

见[演示](http://jsfiddle.net/zaknotzak/uc56T/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:37:29.693

这是你想要达到的目标吗？

[http://jsfiddle.net/aX24s/1/](http://jsfiddle.net/aX24s/1/)

在示例中，我使用了两种背景颜色，显然替换了图像。我在内部 div 上设置了 50% 的不透明度，以显示它们的大小完全匹配（一个块是亮绿色，一个是红色，所以颜色混合）。

你有两个相同大小的背景，并且完全重叠。

HTML：

```
<body>
    <div class="outer_div">
        <div class="inner_div">
        </div>
    </div> 
</body> 
```

CSS：

```
.outer_div {
    width:50px;
    margin:0 auto;
    height:50px;
    background-color:#dd0000;
}

.inner_div {
    background:#00dd00;
    width:100%;
    opacity:0.5;
    height:100%;
} 
```

# regex - Emacs：使用正则表达式搜索缓冲区并在新缓冲区中显示结果？

> ID：14858973
> 
> 赞同：4
> 
> 时间：2013-02-13T17:06:47.233
> 
> 标签：regex, emacs

假设我在 emacs 中有一个 1000 行的缓冲区，并且在该缓冲区中点缀着 unicode 引用（例如 . `\u8226`）。我想将所有这些引用收集到另一个缓冲区中，然后我可以对其进行排序和唯一化。

在 (*nix) 命令行上，我可以执行以下操作：

```
grep -o "\\\\u[0-9]*" tmpfile | sort | uniq 
```

这是否可以直接在 emacs 中实现，而无需将任何缓冲区保存到磁盘？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T17:48:03.337

转到您的缓冲区，用 选择它`C-x h`，然后执行`M-| grep -o "\\\\u[0-9]*" | sort | uniq`（运行`shell-command-on-region`）。输出将转到`*Shell Command Output*`，除非输出足够长，否则不会显示，但它始终是创建的，无论如何您都可以切换到它。

还有`occur`（`M-s o`）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T20:05:27.917

> ```
> M-x occur RET [[:nonascii:]]+ RET
>   M-x other-window
>   M-x toggle-read-only
>   M-x sort-lines 
> ```

# google-visualization - Google Chart API 中的问题：条形图图例文本重复

> ID：14858976
> 
> 赞同：2
> 
> 时间：2013-02-13T17:06:58.810
> 
> 标签：google-visualization

我有一个关于 Google Chart API 的问题。

我正在制作条形图以显示堆积条形图。

这是一个图例文本重复的问题，如下图所示。

我设置了这样的选项。

```
 var options = {
        isStacked: true,
        legend: {position:'bottom'},
        backgroundColor: {fill:'#f5f5f5'},
        width: 350,
        colors:['#32bb32','#06abe8','#ffcb05','#f15a22']
    }; 
```

你有什么主意吗？

![在此处输入图像描述](../Images/f58ec109030577d9311b1b80f10aa1bd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-18T05:04:26.937

搞乱谷歌图表可能会有点混乱。完成工作的一个糟糕的解决方案是在标签后插入过多的空格，然后在文本样式下增加字体大小，如下所示：

`legend: { position: 'bottom', alignment: 'center', textStyle: { fontSize: 15,}},`

这是解决图例中烦人的重叠的快速而肮脏的解决方案。使用谷歌图表，几乎所有问题都可以使用自定义模板解决，但如果您只是想摆脱问题并继续前进，此解决方案将成立。

# internet-explorer - 如何在 Firefox 和 Chrome 中选择文档模式而不设置 DOCTYPE？

> ID：14858977
> 
> 赞同：4
> 
> 时间：2013-02-13T17:07:00.220
> 
> 标签：internet-explorer, google-chrome, firefox, browser, quirks-mode

我正在转换使用旧 Web 标准创建的网页以支持现代 Web 浏览器。该网页当前在 Internet Explorer 9、Firefox 和 Chrome 中以 Quirks 模式呈现。

在 IE9 中，我可以选择“文档模式”，我希望在其中呈现我正在查看的网页。这使事情变得更容易，因为我可以在 Quirks 模式和 IE9 标准模式之间跳转。我不必在网页代码中添加/修改 DOCTYPE 标记。

我可以在 Firefox 和 Chrome 中做同样的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T23:56:09.090

不。在大多数浏览器中——除了 IE——有三种不同的模式：

# 怪癖模式

这是浏览器故意不遵循某些标准以兼容损坏的内容的地方。IE < 10 在 IE5.5 时代的怪癖模式下被冻结。其他浏览器的 quirks 模式，包括 IE10 已经演变为可以相互操作，因此它们以更可预测的方式中断。

设置 quirks 模式的常用方法是不包含 doctype，或者在 doctype 之前包含内容。

强烈建议*不要*依赖 quirks 模式渲染。

## 几乎标准模式

这类似于标准模式，除了表格单元格的垂直大小调整行为。

使用以下文档类型触发：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

## 标准模式

这是开发人员应该使用的模式，浏览器的行为符合定义的标准。使用有效的文档类型触发，例如`<!DOCTYPE html>`

在非 IE 浏览器中无法设置任何其他模式。[您可以在http://hsivonen.iki.fi/doctype/](http://hsivonen.iki.fi/doctype/)找到更多信息

如果可以的话，我建议您尝试将网站更新为标准模式，因为它只会在旧版渲染模式中停留的时间越长，就会导致更多问题。它也不会利用现代版本 IE 中的增强功能，例如性能改进。

# r - 如何在 R 中多于和少于的类别中创建组数据？

> ID：14858979
> 
> 赞同：1
> 
> 时间：2013-02-13T17:07:14.200
> 
> 标签：r

我有一个数据集，我想将它们分组到一个类别中......但我希望该类别大于和小于某个数字？

这是我的数据集。

```
"gridcellname","lat","lon","avg.temp"
"Y12X46",68.79,37.798,6.93684
"Y13X49",68.973,39.706,8.9314
"Y14X49",69.197,39.755,5.7867
"Y14X50",69.178,40.386,5.48162
"Y14X53",69.106,42.271,4.1848
"Y14X54",69.078,42.896,3.7789 
```

我希望最后一列是这样的：

```
"gridcellname","lat","lon","avg.temp","temp_category"
"Y12X46",68.79,37.798,6.93684,(6>)
"Y13X49",68.973,39.706,8.9314,(6>)
"Y14X49",69.197,39.755,5.7867,(5,6]
"Y14X50",69.178,40.386,5.48162,(5,6]
"Y14X53",69.106,42.271,4.1848,(4,5]
"Y14X54",69.078,42.896,3.7789,(<4)
"Y40X44",75.102,37.191,1.99166,(<4) 
```

我知道如何根据个人温度的中断进行分类。

```
df<- cbind(df, temp_category=cut(df$avg.temp, breaks=c(0,1,2,3,4,5,6,7))) 
```

但我只想将 4、5、6 分组，其余的放入 <4 和 >6。这在R中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:09:37.807

这行得通吗？

```
df<- cbind(df, temp_category=cut(df$avg.temp, breaks=c(-Inf,4,5,6,Inf)))
#the following is more idiomatic
df$temp_category <- cut(df$avg.temp, breaks=c(-Inf,4,5,6,Inf)) 
```

# android - osmdroid bonuspack 显示信息窗口

> ID：14858982
> 
> 赞同：3
> 
> 时间：2013-02-13T17:07:30.517
> 
> 标签：android, overlay, infowindow, osmdroid

我试图将 osmdroid bonuspack 的 infowindow 与 mapview 中的多边形相关联。目的是当一个多边形被触摸时，我需要显示一些关于该多边形的信息。我查看了一些示例，但所有示例都与 ExtendedItemizedOverlay 一起使用。

是否可以将 infowindow 与包含多边形列表的自定义覆盖类相关联。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-01T12:26:57.493

在 Tutorial_1 中，您可以看到如何添加 InfoWindows：

[https://code.google.com/p/osmbonuspack/wiki/Tutorial_1](https://code.google.com/p/osmbonuspack/wiki/Tutorial_1)

另外，我做了一个小教程，让它们可以快速点击。

[http://mobiledevstories.wordpress.com/2014/03/01/osmdroid-bonus-pack-markers-with-clickable-infowindows/](http://mobiledevstories.wordpress.com/2014/03/01/osmdroid-bonus-pack-markers-with-clickable-infowindows/)

为了满足您的需求，我会做的是修改 bonuspack_bubble.xml 中的布局，并在 TextViews 中包含您需要的其他信息。如果您需要对地图中的多边形或其他对象的引用，只需修改 MyInfoWindow 构造函数以接收所需的对象。

希望能帮助到你！！

# javascript - setTimeout 时间值大于最大值

> ID：14858983
> 
> 赞同：-3
> 
> 时间：2013-02-13T17:07:36.140
> 
> 标签：javascript, html

如何处理值大于最大值的 java 脚本中的 setTimeout() 函数。

```
 <html>
    <body>
    <button onclick="funCall()">Try it</button>

    <script>
    function funCall()
    {
        setTimeout(function(){alert("Hello")},3147483647);
    }
   </script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:40:16.380

这似乎有效：

```
(function () {

    var timers = {};
    var id = 0;
    var maxT = 1000;  // can go up to (1 << 30)

    window.setLongTimeout = function (f, t) {
        var args = [].slice.call(arguments, 2);
        var now = (Date.now && Date.now()) || +(new Date);
        var end = now + t;
        var myid = ++id;

        (function loop() {
            var now = (Date.now && Date.now()) || +(new Date);
            var delta = end - now;
            if (delta <= 0) {
                delete timers[myid];
                f.apply(null, args);
            } else {
                timers[myid] = window.setTimeout(loop, Math.min(maxT, delta));
            }
        })();

        return id;
    };

    window.clearLongTimeout = function (myid) {
        window.clearTimeout(timers[myid]);
        delete timers[myid];
    };

})(); 
```

它会定期触发超时，直到最初指定的时间（不限于 32 位）已经过去。

如果您尝试使用它超过`2 ^ 52`毫秒，预计会出现精度错误；-)

见[http://jsfiddle.net/alnitak/zGdn5/](http://jsfiddle.net/alnitak/zGdn5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:12:05.420

setTimeout 使用 32 位有符号整数来存储延迟，因此高于此的每个数字都不起作用，代码会立即执行。

您可以创建一个具有最大值的 setTimeout，然后他们在您的函数中调用另一个具有最大值的 setTimeout。

# clickonce - Microsoft 产品是否安装为 Windows 更新维护的 ClickOnce 先决条件？

> ID：14858987
> 
> 赞同：1
> 
> 时间：2013-02-13T17:07:52.793
> 
> 标签：clickonce

ClickOnce 没有对安装 SQL Server Express 等先决条件的本机/固有支持。但是，Visual Studio 2010**中**的 ClickOnce 发布向导允许选择先决条件并由在 ClickOnce 部署过程之前运行的 setup.exe 处理。

如果我通过这条路线安装 SQL Server Express，它会被 Microsoft/Windows Update 更新吗？（假设它在底层 Windows 系统上启用）。

我找不到这个问题的明确答案，但我确实遇到了一条评论，指出Windows 更新**不会**更新先决条件安装：

[SQLServer Express 2008 R2 的引导程序包怎么样？](http://robindotnet.wordpress.com/2011/02/06/how-about-a-bootstrapper-package-for-sqlserver-express-2008-r2/)

> 如果您使用 ClickOnce 部署，请不要忘记它不会自动安装对先决条件的更新 - 它只会更新 ClickOnce 应用程序。您必须让您的客户在升级 ClickOnce 应用程序之前安装先决条件（只需要求他们再次运行 setup.exe），或者以编程方式为他们卸载并重新安装应用程序，包括新的先决条件。（代码在[这篇 MSDN 文章中](http://msdn.microsoft.com/en-us/library/ff369721.aspx)。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T07:21:25.680

那篇文章是指从一个主要版本更新到另一个主要版本，例如从[SQL Server](http://en.wikipedia.org/wiki/Microsoft_SQL_Server) 2008 R2 到 SQL Server 2012。为此，您必须自己处理。对于日常补丁和更新，现在大部分都是通过 Windows 更新推送的。当然，您必须确保您的客户安装它们。

# android - 字节序在不同设备上的行为是否不同

> ID：14858990
> 
> 赞同：1
> 
> 时间：2013-02-13T17:07:56.367
> 
> 标签：android, endianness, audiorecord

我`AudioRecord.read(byte[], int, int)`用来记录 16 位 PCM 数据。使用这种方法，我可以在我的设备上获取小端数据，但我不知道它是否适用于其他设备。尽管我看到了 API 参考，但我无法弄清楚。

字节序是否取决于本机顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:21:50.347

您不必担心，Android 会为您处理。

java中的数据始终表示为大端

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T10:52:41.060

不幸的是，它并不像之前（3 岁）的答案所暗示的那么简单。

如果您使用 16 位 PCM，Android 将对其进行原生字节序编码。请参阅[音频格式](https://developer.android.com/reference/android/media/AudioFormat.html#encoding)。测试显示在Nexus 5x上是BE，小米MI3s报LE。

要获得设备的字节序，您可以使用`ByteOrder.nativeOrder()`

# css - 列表（导航）项目不会延伸到向右浮动的 div

> ID：14858991
> 
> 赞同：0
> 
> 时间：2013-02-13T17:07:59.690
> 
> 标签：css, html, menu, z-index, nav

我目前正在尝试获得一个水平导航菜单以从整个容器中延伸。

它所在的 div 很好，但实际的列表项没有，我不确定为什么。

右侧栏、包含导航栏的容器和导航项的 CSS 为：

```
#rhs{
position: relative;
float: right;

height: 720px;
width: 200px;

background-color: #3D0099;
border-left:2px solid #616161;
}

nav{
display: block;
position: relative;

width: 1010px;
height: 50px;

margin-left: 7px;

background-color: #F0F0F0;

border-top: 1px solid #616161; 
border-bottom: 1px solid #616161; 

z-index: 99999;
 }

 nav li{
list-style: none;
display: inline;

margin-left: 10px;

z-index: 99999;
} 
```

完整的 jsfiddle：http: [//jsfiddle.net/zDzLs/](http://jsfiddle.net/zDzLs/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:22:05.483

将 rhs div 的 css 更改为：

```
#rhs{

position: absolute;
right:0px;
height: 720px;
width: 200px;
background-color: #3D0099;
border-left:2px solid #616161;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:27:19.487

你的代码让我的强迫症发疯了。

我在这里为你修改了一点。希望你喜欢。

[http://jsfiddle.net/zDzLs/3/](http://jsfiddle.net/zDzLs/3/)

```
<header>

        <a href="#"><img class="logo" src="images/header.png"/></a>

        <nav>
            <ul>
             <li class="active"><a href="#">Home</a></li>
             <li><a href="#">What is Counselling?</a></li>
             <li><a href="#">Personal Counselling</a></li>
             <li><a href="#">Relationship Counselling</a></li>
             <li><a href="#">Supervision of Counsellors</a></li>
             <li><a href="#">Life Coaching</a></li>
             <li><a href="#">Contact Me</a></li>
            </ul>
        </nav>

    </header>

    <div class="container">

        <div class="content-left"><div class="inner">LEFT</div></div>
        <div class="content-right"><div class="inner">RIGHT</div></div>

    </div>

* {
    padding: 0;
    margin: 0;
}

body{
    background-color: #F0F0F0;
    font: 14px Century Gothic;
}

header {
    width: 960px;
    margin: 30px auto;
}

header .logo {
    width: 300px;
}

nav {
    background: #F0F0F0;
    margin-top: 30px;
    overflow: hidden;
}

nav ul li {
    list-style-type: none;
    float: left;
    margin-right: 2px;
    font-size: 12px;
}

nav ul li a {
    display: inline-block;
    text-decoration: none;
    padding: 10px;
    background: #333;
    color: #fff;
    text-align: center;
}
nav ul li a:hover,
nav ul li.active a {
    background: #666;
}

.container {
    margin: 30px auto 0;
    width: 960px; /* 958px */
    border:2px solid #616161;
    overflow: hidden;
    background: #fff;
}

.content-left {
    float: left;
    width:628px;
    margin-right: 30px;
}

.content-right {
    float:left;
    width: 300px;
    background: #f9f9f9
}

.inner {
    padding: 20px;
} 
```

# c# - 从数独解决方案中删除单元格以使其成为一个难题

> ID：14858994
> 
> 赞同：3
> 
> 时间：2013-02-13T17:08:09.643
> 
> 标签：c#, .net, algorithm, sudoku

我正在编写一个数独应用程序，目前正在研究游戏生成算法。我设法弄清楚如何快速生成解决方案（不解决）。不过，我对如何删除一些数字以使其真正成为一个难题感到困惑。我的第一个倾向是根据难度随机删除一定数量的单元格，但这不是正确的算法，因为它经常呈现一个无法解决或有多个解决方案的谜题。它还可能生成不反映所请求难度的谜题。

这是我到目前为止的代码。我删除了大部分不相关的代码，但如果您想查看未实现但在下面使用的内容，请告诉我。如果您愿意，我也可以提供我对该方法的尝试`Puzzlefy`，但我选择不立即发布它，因为它明显错误（即使它“有效”）。

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace Sudoku
{
    public class Game
    {
        public enum Difficulty
        {
            VeryEasy,
            Easy,
            Medium,
            Difficult,
            Evil
        }

        private readonly int?[,] _currentItems = new int?[9,9];
        private readonly int?[,] _solution = new int?[9,9];
        private readonly int?[,] _startingItems = new int?[9,9];
        private readonly Difficulty _difficulty;

        public Game(Difficulty difficulty)
        {
            _difficulty = difficulty;
            GenerateSolution();
            Puzzlefy();
        }

        private void GenerateSolution()
        {
            var random = new Random();
            var availableNumbers = new Stack<List<int?>>(81);
            var x = 0;
            var y = 0;

            availableNumbers.Push(AllowableNumbers(_solution, 0, 0).ToList());
            while (x < 9 && y < 9)
            {
                var currentAvailableNumbers = AllowableNumbers(_solution, x, y).ToList();
                availableNumbers.Push(currentAvailableNumbers);

                // back trace if the board is in an invalid state
                while (currentAvailableNumbers.Count == 0)
                {
                    _solution[x, y] = null;
                    availableNumbers.Pop();
                    currentAvailableNumbers = availableNumbers.Peek();
                    x -= y >= 1 ? 0 : 1;
                    y = y >= 1 ? y - 1 : 8;
                }

                var index = random.Next(currentAvailableNumbers.Count);
                _solution[x, y] = currentAvailableNumbers[index];
                currentAvailableNumbers.RemoveAt(index);

                x += y < 8 ? 0 : 1;
                y = y < 8 ? y + 1 : 0;
            }
        }

        private void Puzzlefy()
        {
            CopyCells(_solution, _startingItems);

            // remove some stuff from _startingItems

            CopyCells(_startingItems, _currentItems);
        }
    }
} 
```

我不是在寻找代码，而是在寻找算法。我将如何从解决方案中删除数字以使其成为一个难题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:15:05.670

这是[一篇关于数独生成的论文](http://www.sudokuwiki.org/Sudoku_Creation_and_Grading.pdf)

我认为您将需要一个数独求解器，它还将计算可用解决方案的数量，然后以始终只有一个可用解决方案的方式减去数字。

您可以将相同的方法应用于向网格添加数字，然后检查可能的解决方案的数量，当解决方案的数量大于 1 时继续添加，当解决方案的数量为 0 时回溯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-23T22:35:03.303

由于删除过程不是线性的，因此没有“简单”的方法可以从已完成的数独网格中删除线索。

每次删除一个单元格或线索后，您需要检查数独是否只有一个独特的解决方案。

要检查这一点，您需要运行一个可以计算所有可能解决方案的求解器（您可以在找到 2 种可能性后停止它以节省时间）。

两种最流行的算法都用于解决数独，计算所有数独解决方案和删除单元格是回溯算法和跳舞链接算法。

这篇文章很好地解释了如何在数独中使用舞蹈链接算法：http: [//garethrees.org/2007/06/10/zendoku-generation/#section-2](http://garethrees.org/2007/06/10/zendoku-generation/#section-2)

这是用 JavaScript 编写的数独中舞蹈链接算法的另一种描述：http: [//www.sudokubum.com/documentation.html](http://www.sudokubum.com/documentation.html)

这是关于一般舞蹈链接算法的完整论文：http: [//lanl.arxiv.org/pdf/cs/0011047](http://lanl.arxiv.org/pdf/cs/0011047)

# objective-c - 关闭视图后，uiview animatewithduration 完成继续

> ID：14858995
> 
> 赞同：0
> 
> 时间：2013-02-13T17:08:10.140
> 
> 标签：objective-c, uiviewanimation

我有一个包含 UIView 动画的 modelViewController。当动画块完成时，它会调用自己，从而循环。

当我关闭调用 [_starView removeFromSuperview] 的 modelViewController (dismissInfo) 时，该函数被一次又一次地快速调用，NSLog 行每秒打印多次。

```
@implementation InfoVC
{
    NSArray *imgs;
    NSString *currentImg;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    _imageview.contentMode = UIViewContentModeLeft;
    _imageviewUnder.contentMode = UIViewContentModeLeft;

    imgs = [NSArray arrayWithObjects:
            @"01.jpg",
            @"02.jpg",
            @"03.jpg",
            @"04.jpg",
            @"05.jpg",
            @"06.jpg",
            nil];

    _imgInt = (arc4random()%6);

    [self initialImage];
}

- (void)viewWillAppear:(BOOL)animated{
}

- (void)viewDidAppear:(BOOL)animated{
    NSLog(@"viewDidAppear");
}

- (void)initialImage
{        
    _starView.contentMode = UIViewContentModeLeft;
    _imageviewUnder.contentMode = UIViewContentModeLeft;

    currentImg = [imgs objectAtIndex:_imgInt];
    UIImage *image = [UIImage imageNamed:currentImg];

    _starView = [[UIImageView alloc] initWithImage:image];

    // Size the image view to the image (it's bigger)
    _starView.bounds = CGRectMake(0.0, 44.0, 416.0, 416.0);

    NSLog(@"tarView.center %@", NSStringFromCGPoint(_starView.center) );

    _starView.alpha=1;

    int nextImgInt = _imgInt + 1 ;

    if (nextImgInt>5)
    {
        nextImgInt=0;
    }

    NSString *nextImg = [imgs objectAtIndex:nextImgInt];
    UIImage *nextImage = [UIImage imageNamed:nextImg];
    [_imageviewUnder setImage:nextImage];

    [self.view sendSubviewToBack:_imageviewUnder];

    _imgInt++;

    if (_imgInt>5) {
        _imgInt=0;
    }

    [UIView setAnimationBeginsFromCurrentState:YES];

    [UIView animateWithDuration:7.6f
                          delay:0.1f
                        options:UIViewAnimationCurveLinear
                     animations:^{
                         [_starView setCenter:CGPointMake(112, 208)];
                         [_starView setAlpha:0.0f];
                     }
                     completion:^(BOOL finished){
                         [_starView removeFromSuperview];
                         [self initialImage];
                     }];

    [self.view insertSubview:_starView atIndex:1];

}

- (void)visitTwitter
{    
    NSURL *URL = [NSURL URLWithString:@"http://twitter.com/"];
    SVWebViewController *webViewController = [[SVWebViewController alloc] initWithURL:URL];
    [self.navigationController pushViewController:webViewController animated:YES];

}

- (IBAction)dismissInfo:(id)sender
{
    [self cleanup];
    [self dismissModalViewControllerAnimated:YES];
}

- (void)cleanup
{
    [_starView.layer removeAllAnimations];
    [self.view.layer removeAllAnimations];
    [_starView removeFromSuperview];
}

- (void)viewDidUnload
{
    [self cleanup];
    [super viewDidUnload];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:16:04.353

让自己成为一个动画标志，在 viewDidLoad 中设置为 true，在 cleanup 中设置为 false。然后在您的 initialImage 方法中检查它：

```
if ( ! animating )
    return; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:33:27.283

这是我第二次遇到这种情况。一个可能的原因是在 viewDidLoad 中初始化的方法，但是子视图和图像没有及时准备好（动画循环的第一遍似乎无法向机器添加重影）。

我将调用移至 ViewDidAppear，确保显示初始化图像以停止白色闪烁。最后一个模态窗口中的无限动画

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    _imageview.contentMode = UIViewContentModeLeft;
    _imageviewUnder.contentMode = UIViewContentModeLeft;

    imgs = [NSArray arrayWithObjects:
            @"01.jpg",
            @"02.jpg",
            @"03.jpg",
            @"04.jpg",
            @"05.jpg",
            @"06.jpg",
            nil];

    _imgInt = (arc4random()%6);

    currentImg = [imgs objectAtIndex:_imgInt];
    UIImage *image = [UIImage imageNamed:currentImg];
    [_imageviewUnder setImage:image];
}

- (void)viewDidAppear:(BOOL)animated{
    [self initialImage];
}

- (void)initialImage
{        
    currentImg = [imgs objectAtIndex:_imgInt];
    UIImage *image = [UIImage imageNamed:currentImg];

    _starView = [[UIImageView alloc] initWithImage:image];

    // Size the image view to the image (it's bigger)
    _starView.bounds = CGRectMake(0.0, 44.0, 416.0, 416.0);

    NSLog(@"initialImage");

    _starView.alpha=1;

    [self.view insertSubview:_starView atIndex:1];

    int nextImgInt = _imgInt + 1 ;

    if (nextImgInt>5)
    {
        nextImgInt=0;
    }

    NSString *nextImg = [imgs objectAtIndex:nextImgInt];
    UIImage *nextImage = [UIImage imageNamed:nextImg];
    [_imageviewUnder setImage:nextImage];

    [self.view sendSubviewToBack:_imageviewUnder];

    _imgInt++;

    if (_imgInt>5) {
        _imgInt=0;
    }

    [UIView setAnimationBeginsFromCurrentState:YES];

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:7.6];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationCurve:UIViewAnimationCurveLinear];
    //[UIView setAnimationDidStopSelector:@selector(initialImage) ];
    [_starView setCenter:CGPointMake(112, 208)];
    [_starView setAlpha:0.0f];
    [UIView commitAnimations];

    [self performSelector:@selector(initialImage) withObject:nil afterDelay:7.6];
}

- (IBAction)dismissInfo:(id)sender
{
    [self cleanup];
    [self dismissModalViewControllerAnimated:YES];
}

- (void)cleanup
{
    [NSObject cancelPreviousPerformRequestsWithTarget:self];
    [_starView.layer removeAllAnimations];
    [self.view.layer removeAllAnimations];
    [_starView removeFromSuperview];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T08:47:12.953

如果你只想创建一个循环动画，最好的办法是使用选项：' ***UIViewAnimationOptionRepeat*** '。例如：

```
[UIView animateWithDuration:2.0
                      delay:0.0f
                    options:UIViewAnimationOptionRepeat
                 animations:^{
                            [myUIViewThing setCenter:CGPointMake(myUIViewThing.center.x - 100, myUIViewThing.center.y)];
                             }
                 completion:nil]; 
```

# reporting-services - SSRS 2008 多个 X 轴类别 - 删除括号

> ID：14858996
> 
> 赞同：2
> 
> 时间：2013-02-13T17:08:11.187
> 
> 标签：reporting-services, categories, brackets

我正在尝试将多个 X 轴类别添加到 SSRS 2008 折线图中，但默认情况下它会将这些括号添加到每个附加类别中。有没有办法去掉这些括号？我正在尝试显示大约 50 个数据点，括号导致类别中的数据被截断/压扁/不可读。或者，如果有更好的方法来显示多个 x 轴数据。任何帮助是极大的赞赏！谢谢。

有问题的括号：http: [//i44.photobucket.com/albums/f39/sethmo38/SSRSLineChart3_zps348f76b8.jpg](http://i44.photobucket.com/albums/f39/sethmo38/SSRSLineChart3_zps348f76b8.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:45:36.017

您应该可以单击轴 X 或 Y，直到看到选定的块轮廓，然后单击键盘上的“删除”并将其删除。如果您想执行超出规范的操作但保留某些选项，请单击属性。

默认窗格是轴选项，如果需要数字，可以将“类别”更改为“标量”。如果需要，您可以在此处设置表达式而不是自动。如果您不想这样做，但想要自定义标签，请转至“标签”窗格。您可以将标签全部隐藏起来，或者选择一个表达式来确定它们何时被隐藏。您可能还希望弄乱主要和次要刻度线。当您想要高度自定义轴时，您可能希望隐藏一些主要标记并可能关闭“类别”轴类型并手动设置所有内容。抱歉，我在工作中看不到你的照片，以便更了解你的情况，如果我遗漏了什么，请原谅我。