# StackOverflow 问答 14370000-14370999

# wpf - 为什么在设计器中创建的简单 WPF 绑定会引发此与强制转换相关的运行时错误？

> ID：14370002
> 
> 赞同：0
> 
> 时间：2013-01-16T23:51:23.537
> 
> 标签：wpf, xaml, visual-studio-2012

与在 Windows 窗体设计器中创建数据绑定类似，我通过将自定义简单对象的属性从“数据源”窗口拖放到空白 WPF 控件上来创建数据绑定项。它使用数据字段名称和文本框控件创建预期的标签，并且编译得很好。但是当我运行应用程序时，它会抛出以下错误：

> {“无法将“System.Windows.Controls.Grid”类型的对象转换为“System.Windows.Data.CollectionViewSource”类型。”}

我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:51:23.537

设计师生成的标记不起作用。`Grid`嵌套在标签和文本框周围的 具有 form 的属性`DataContext`，`{StaticResource mySimpleObjectViewSource}`但必须是 form `{Binding Source={StaticResource mySimpleObjectViewSource}}`。

# mysql - 使用 SQL RAND() 生成受约束的 DISTINCT 元素

> ID：14370005
> 
> 赞同：2
> 
> 时间：2013-01-16T23:51:28.040
> 
> 标签：mysql, sql, random, unique, distinct

我有一个 SQL (MySQL SQL) 语句，如下所示，从表中获取 10 条记录`bar`：

```
SET @foo:=1;
SELECT DISTINCT
    @start:=ROUND(RAND()*100),
    @start+ROUND(RAND()*100)+1,
    CONCAT("id-",@foo:=@foo+1)
FROM
    bar
LIMIT 10 
```

它生成独特的元素，例如：

```
...
14   72   id-2
...
9    10   id-8
... 
```

到目前为止，一切都很好。但我真正想做的是以`DISTINCT`不添加重复项的方式使用关键字，*仅基于第一列或第一列和第二列值的唯一性*。

例如，目前所有 10 条记录都是唯一的，因为`id-n`每条记录的元素总是不同的。所以这是可能的：

```
...
9    10   id-4
...
9    10   id-8
... 
```

我想做的是让第二个`9 10 id-8`元素不在结果集中（或者，或者，`9 10 id-4`我不在乎哪些近乎重复的元素被遗漏了）。有没有办法限制`DISTINCT`第一列或第一列和第二列？

我知道我可以`id-n`从 SQL 语句中省略该值，然后使用将其重新添加的下游脚本对结果进行后处理。但是，出于好奇，我想找到一个包含在 SQL 查询中的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:40:09.887

好吧，我不是 100% 确定这是您想要做的，但似乎您可以将查询结果放在子查询中，然后用于`MAX`获取最后一条记录。

也许是这样的：

```
SELECT rand1col, rand2col, CONCAT("id-",Max(fooidcol)) as col3
FROM 
(
    SELECT DISTINCT
        @start:=ROUND(RAND()*100) as rand1col,
        @start+ROUND(RAND()*100)+1 as rand2col, 
        @foo:=@foo+1  as fooidcol
    FROM bar
) t
GROUP BY rand1col, rand2col
LIMIT 10 
```

测试这个问题`RAND()`不会返回我测试所需的内容，所以我创建了这个[SQL Fiddle](http://www.sqlfiddle.com/#!2/0c1ea/2)，其中包含试图做到这一点的实际列，但它似乎也适用于上述查询。

这是带有上述查询的[小提琴——有时可以工作，只是保持刷新。](http://www.sqlfiddle.com/#!2/0c1ea/4)

# c# - CLI C++ 派生自 C# 一次性类

> ID：14370015
> 
> 赞同：2
> 
> 时间：2013-01-16T23:52:39.710
> 
> 标签：c#, .net, c++-cli, dispose

我正在尝试创建一个派生自`HashAlgorithm`. `HashAlgorithm`有一个`virtual Dispose(bool)`方法。我无法覆盖该`Dispose`方法，因为我收到一个编译错误，说明`dispose`是保留关键字。根据我在网上阅读的内容，只需添加一个终结器和 dtor，编译器就会处理其他所有事情。我这样做了，代码编译了。当我尝试使用时，出现以下错误：

```
System.TypeLoadException: Declaration referenced in a method implementation cannot be a final method 
```

当我查看编译器生成的代码时，我看到它把这个密封的关键字放在似乎是问题根源的方法上。该`Dispose`方法根本不需要，因为它已经存在于基类中。关于如何解决这个问题的任何想法。

```
public sealed override void Dispose() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:26:51.437

正如您所指出的，在 C++/CLI 中，我们实现了 ~ClassName 和 !ClassName，C++/CLI 编译器为我们编写了 Dispose(void) 和 Dispose(bool)。

我尝试从 HashAlgorithm 派生，并且能够使 dispose 和 finalize 都能正常工作。声明某些方法的方式可能存在细微差别。

这是我的测试代码：

```
public ref class CppDispose : HashAlgorithm
{
private:
    ~CppDispose() { Debug::WriteLine("~CppDispose"); }
    !CppDispose() { Debug::WriteLine("!CppDispose"); }

protected:
    virtual void HashCore(array<Byte>^ aray, int ibStart, int cbSize) override { }
    virtual array<Byte>^ HashFinal() override { return nullptr; }

public:
    virtual void Initialize() override { }
};

int main(array<System::String ^> ^args)
{
    {
        CppDispose foo;

        Debug::WriteLine("Disposing: ");
    }

    {
        CppDispose^ foo = gcnew CppDispose();

        Debug::WriteLine("Finalizing: ");
        foo = nullptr;
        GC::Collect();
    }

    return 0;
} 
```

输出：

```
处置：
~CppDispose
最终确定：
!CppDispose

```

为了让您可以看到幕后发生的事情，这里是 C++/CLI 编译器为我们编写的方法，反编译为 C# 语法。在这种情况下，父类已经实现了 Dispose(void)，所以这里不再重新实现。

```
[HandleProcessCorruptedStateExceptions]
protected override void Dispose([MarshalAs(UnmanagedType.U1)] bool flag1)
{
    if (flag1)
    {
        try
        {
            this.~CppDispose();
        }
        finally
        {
            base.Dispose(true);
        }
    }
    else
    {
        try
        {
            this.!CppDispose();
        }
        finally
        {
            base.Dispose(false);
        }
    }
}

protected override void Finalize()
{
    this.Dispose(false);
} 
```

# regex - 如何选择两个单词之间有 3 个或更多字符的单词

> ID：14370016
> 
> 赞同：-1
> 
> 时间：2013-01-16T23:52:45.063
> 
> 标签：regex, regex-negation, regex-lookarounds

下面的文本是使用正则表达式从一个巨大的文本中过滤出来的，我必须在其中找到没有 porc 和 pig 的 dog 和 cat 的句子。

```
What, a Dog, a Rat, a Mouse, a Cat to scratch a man to
Where Iuliet liues, and euery Cat and Dog,
Which first (perchance) shee'l proue on Cats and Dogs,
glass, and from setting up memorials of departed cats and dogs.
Thinking,' etc., 1873, p. 82.), "A dog frames a general concept of cats or
dog, who never passed a cat who lay sick in a basket, and was a great 
```

为了找到上面的内容，我使用了正则表达式：

```
^(?!.\*porc.\*)(?!.\*pig.\*)(?=.\*\bdog\b.\*)(?=.\*\bcat\b.\*).\* 
```

现在，我必须在 dog 和 cat 之间找到包含 3 个或更多字符的单词。

我试过了 ：

```
^(?!.\*porc.\*)(?!.\*pig.\*)(?=.\*\bdog\b.\*)(?=.\*\bcat\b.\*)dog(?:\s?\w{3,})+cat 
```

它不起作用。

任何人都知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:13:21.603

让我先说我对 Java 的熟悉程度不是最好的（我在声明任何语言隶属关系之前回答了这个问题）。话虽如此，我认为您的问题将需要两个正则表达式，因为（据我所知）Java 不支持捕获重复组。为了说明您需要什么，请考虑您正在寻找的整体模式。我在双星号中包含了您第一个示例中的匹配项（“什么，一只狗，一只老鼠，一只老鼠，一只猫抓一个人”）：

```
(?P<animal>    // Names the following group "animal" for later reference
    \b(dog|cat)    // **Dog**
)    // Ends "animal" group
[s]?\b\W+    // **, **
(?!\bporc\b\W+|\bpig\b\W+|(?P=animal)\W+)    // Not followed by porc, pig, or characters that match group "animal" (either 'cat' or 'dog')
.*?    // Characters up to first word of three characters or more **a **
(
    (
        (
            (
                (\b\w{3,}\b)    // The (repeated) group you are after (**Rat** / **Mouse**)
            \W+)+    // (**, ** / **, **)
        )
            (?:\b\w{0,2}\b\W+)*    // A group that will not be available after the search (**a ** / **a **)
        )+
    )
(?!    // Not followed by 
    (?P=animal)    // the characters that matched group "animal" above (either dog or cat)
)\b
(cat|dog)[s]{0,1}\b    // Followed by dog or cat, whichever was not the "animal" group above **Cat** 
```

由于 Java 只会捕获最后一个重复组（与 .NET 和其他允许捕获重复组的语言不同），因此您很可能需要分两步进行查询。首先，您需要找到 cat(s) or dog(s) 和 dog(s) or cat(s) 之间的所有字符串（只要第一组不同于第二组）。您可以使用如下的正则表达式找到这些字符串：

```
(?P<animal>\b(dog|cat))[s]{0,1}\b\W+(?!\bporc\b\W+|\bpig\b\W+|(?P=animal)\W+)(.*?)(?!(?P=animal))\b(cat|dog)[s]{0,1}\b 
```

您会想要找到第 3 组，即 (.*?)。

在每个相关字符串/句子中识别出第 3 组后，您可能希望使用类似以下内容（基于[此帖子](https://stackoverflow.com/questions/6835970/regular-expression-capturing-all-repeating-groups)）：

```
Pattern regex = Pattern.compile("\b\w{3,}\b");
Matcher regexMatcher = regex.matcher(subjectString);
while (regexMatcher.find()) {
    // matched text: regexMatcher.group()
    // match start: regexMatcher.start()
    // match end: regexMatcher.end()
} 
```

不幸的是，您不能只使用一个（合理的）正则表达式来捕获 Java 中需要的所有单词，因为您永远不知道单词 dog 和 cat 之间会出现多少个三个字母的单词。我希望这有帮助。

# c# - 无法清除 ASP.NET 中的 HTML 表

> ID：14370017
> 
> 赞同：1
> 
> 时间：2013-01-16T23:52:52.197
> 
> 标签：c#, asp.net

在我的**页面加载**方法中，我正在用数据填充 HTML 表。

默认情况下，表为空。

```
<table runat="server" id="categoriesTable">
</table> 
```

动态创建每一行后，我向其中添加 4 个单元格，并为每个单元格指定一个 ID，以供以后使用。

创建所有单元格后，我重新遍历此表，以便可以在每个单元格中添加一个列表`<li></li>`，这些列表中的数据是从数据库中获取的，这取决于之前给每个单元格的 ID。

当我刷新页面时，没有任何问题，但是在`PostBack`（单击某个 ASP 按钮或更改 DropDownList 的选定索引后），单元格的数量保持不变，但每个单元格内的列表增加了一倍。

意味着，如果我有这个：

```
Cell1
-Da
-Do
-Di
-Du
Cell2
-Ya
-Yo
Cell3
-Ka
-Ki 
```

在 PostBack 之后我会有这个：

```
Cell1
-Da
-Do
-Di
-Du
-Da
-Do
-Di
-Du
Cell2
-Ya
-Yo
-Ya
-Yo
Cell3
-Ka
-Ki
-Ka
-Ki 
```

这是代码，注意**cCategory**是我创建的一个类，它的方法返回一个`List<cCategory>`.

```
//Load Categories Into the Table
List<cCategory> mainCategoriesList = cCategory.SubCategories(null);
if(mainCategoriesList.Count!=0)
{
    //Categories Available
    HtmlTableRow Row = new HtmlTableRow();
    categoriesTable.Rows.Add(Row);
    HtmlTableCell Cell;
    int cellCounter = 0;
    while(cellCounter<mainCategoriesList.Count)
    {
        if (cellCounter % 4 == 0 && cellCounter!=0)
        {
            //Add a New Row
            Row = new HtmlTableRow();
            categoriesTable.Rows.Add(Row);
        }
        Cell = new HtmlTableCell();
        Cell.InnerHtml = "<a href=\"Category.aspx?id=" + mainCategoriesList.ElementAt(cellCounter).CategoryID() + "\">" + mainCategoriesList.ElementAt(cellCounter).Category()+ "</a>";
        Cell.ID = mainCategoriesList.ElementAt(cellCounter).CategoryID();
        Row.Cells.Add(Cell);
        cellCounter++;
    }
    //Now we must add the sub categories
    String subList = "";
    String newContents;
    int counter;
    List<cCategory> subCategoriesList;
    for (int i = 0; i < categoriesTable.Rows.Count; i++)
    {
        //For each Row, go through each Cell
        for (int j = 0; j < categoriesTable.Rows[i].Cells.Count; j++)
        {
            //For Each CELL, get the subCategories
            subCategoriesList = cCategory.SubCategories(categoriesTable.Rows[i].Cells[j].ID);
            counter = 0;
            while (counter < subCategoriesList.Count)
            {
                subList = subList + "<li><a href=\"Category.aspx?id=" + subCategoriesList.ElementAt(counter).CategoryID() + "\">" + subCategoriesList.ElementAt(counter).Category() + "</a></li>";
                counter++;
            }
            newContents = "<div class=\"subCategoriesList\"><ul>" + subList + "</ul></div>";
            subList = "";
            categoriesTable.Rows[i].Cells[j].InnerHtml = categoriesTable.Rows[i].Cells[j].InnerHtml + newContents;

        }
    }
} 
```

为什么 Cell 数据会翻倍？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:09:58.450

您在加载表格的 Page_Load 方法中是否有 IsPostBack() 检查？我猜不是，而且行加倍是因为它们是通过 ViewState 发回的，而您正在通过上面的代码再次添加它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:02:52.597

我认为您应该先清理[或删除] categoriesTable 表的数据，然后再执行逻辑。

# php - 检查日期是否在当前时间的 7 天内

> ID：14370018
> 
> 赞同：22
> 
> 时间：2013-01-16T23:53:03.530
> 
> 标签：php, mysql, date

所以我有一个 php 函数，它与数据库交互并提取数据。但是我有一个日期戳（在这种情况下是上传日期）。我想这样做，如果在过去 7 天内上传了某些内容，它会将其发布给用户，让他们知道它是“新的”。

到目前为止，我有这个：

```
if( strtotime($rows['Date']) > strtotime('now') ) {
    echo '<div class="l-new"><a href="#"><!-- --></a></div>';
} 
```

$rows 事情被处理并在这一行上方的一些其他代码中工作。但这是我关心的路线。

我想说“如果数据库中的日期早于当前时间，并且小于 7 天，请执行以下操作 { //echo the stuff about it is new }

问题是，我如何表达 if 语句以在 7 天内完成？完全想不到有多么不幸。我敢肯定这很简单！谢谢

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-16T23:56:33.330

```
if( strtotime($rows['Date']) > strtotime('-7 day') ) {
    echo '<div class="l-new"><a href="#"><!-- --></a></div>';
} 
```

`strtotime('-7 day')`部件返回 7 天前的时间。

# jquery - jQuery 删除 (RESTful)

> ID：14370023
> 
> 赞同：2
> 
> 时间：2013-01-16T23:53:27.807
> 
> 标签：jquery, asp.net-mvc, rest

我正在尝试通过 Ajax 执行 DELETE（首选）或 POST。

```
$(document).ready(function () {
    $("a.deleteOne").click(function () {
        var id = $(this).parents('td:first').children('.hiddenId').val();
        var title = $(this).parents('tr:first').children('td:first').text();
        if (confirm("Really delete the [" + title + "] document?")) {
            $.ajax({
                type: "POST",
                url: "/WebApp/Area/Documents/Delete/" + id,
                //data: { id: id },
                success: function () { alert("Document [" + title + "] deleted."); },
                failure: function () { alert("Document [" + title + "] was NOT deleted."); }
            });
        }
    });
    return false;
}); 
```

由于某种原因，控制器的操作没有被调用。

```
Action code looks like:
[ValidateAntiForgeryToken]
[Transaction]
[AcceptVerbs(HttpVerbs.Post)]
//[AcceptVerbs(HttpVerbs.Delete)]
public ActionResult Delete(int id)
{
    if (!BaseAuthorizationProvider.HasPermissionToPerform(App.Core.Security.Operations.CreateDocumentTask))
    {
        HandlePermissionException();
    }
    ActionConfirmation deleteConfirmation = DocumentManagementService.Delete(id);
    TempData[ControllerEnums.GlobalViewDataProperty.PageMessage.ToString()] = deleteConfirmation.Message;
    return RedirectToAction("Index");
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:29:29.293

试试这个，略有不同，我猜你用的是区域，只需替换 YourController 和 YourArea。

```
$.ajax({
    type: "POST",
    url: '@Url.Action("Delete", "YourController", new { area = "YourArea" })',
    data: { id: id },
    success: function () { alert("Document [" + title + "] deleted."); },
    error: function () { alert("Document [" + title + "] was NOT deleted."); }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:09:22.903

检查您的操作的 URL 模板还检查需要为字符串的方法原型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T20:00:09.707

原来我的网站不接受 DELETE 动词。删除了 WebDAVModule 并开始工作。现在，关于 AuthToken 的下一个问题。

```
<system.webServer>
<modules>
<remove name="WebDAVModule" />
... 
```

# php - 最后一个表列没有按应有的方式运行行跨度

> ID：14370029
> 
> 赞同：0
> 
> 时间：2013-01-16T23:53:56.720
> 
> 标签：php

有一个简单的问题，我似乎无法弄清楚。如果您打开 php fiddle，为什么在结果部分中最后一列没有其行跨度填充每一行？我已经包含了行跨度，就像我在其他需要行跨度的列中一样，但它不适用于该列。

有人知道是什么原因造成的吗？

[http://phpfiddle.org/main/code/get-rps](http://phpfiddle.org/main/code/get-rps)

全表代码：

```
<table id='penaltytbl'>
<thead>
<tr>
<th class='questionth'>Question No.</th>
<th class='questionth'>Question</th>
<th class='incorrectanswerth'>Incorrect Answer</th>
<th class='answermarksth'>Marks per Answer</th>
<th class='totalmarksth'>Total Marks</th>
<th class='noofmarksth'>Marks Remaining</th>
</tr>
</thead>
<tbody>
<?php

foreach($ques_ans as $questionNo => $inc_ans)
{
    $q_row_span = count($inc_ans);
    $row_count = 0;
    $inc_ans = array_values($inc_ans);

?>

<tr class="questiontd">

<td class="questionnumtd q<?php echo$questionNo?>_qnum" rowspan="<?php echo$q_row_span?>"><?php echo$questionNo?>
<input type="hidden" name="numQuestion" value="<?php echo$questionNo?>" />
    <input type="hidden" name="q<?php echo$questionNo?>_ans_org" class="q<?php echo$questionNo?>_ans_org" value="<?php echo$searchMarks[array_search($questionNo, $searchQuestionNo)]?>">
    <input type="hidden" name="q<?php echo$questionNo?>_ans" class="q<?php echo$questionNo?>_ans" value="<?php echo$searchMarks[array_search($questionNo, $searchQuestionNo)]?>">
    </td>

    <td class="questioncontenttd" rowspan="<?php echo$q_row_span?>"><?php echo$searchQuestionContent[array_search($questionNo, $searchQuestionNo)]?> </td>

<td class="answertd"><?php echo$inc_ans[$row_count];?>
<input type="hidden" id="hiddenincorrect" name="incorrect[]" value="<?php echo$inc_ans[$row_count];?>">
</td>

<td class="answermarkstd">
<input class="individualMarks q<?php echo$questionNo?>_mark"  q_group="1" name="answerMarks[]" type="text" data-type="qmark" data-qnum="<?php echo$questionNo?>" onkeypress="return isNumberKey(event)" maxlength="3" value="0" />
</td>

<td class="totalmarkstd" rowspan="<?php echo$q_row_span?>"><?php echo$totalMarks[array_search($questionNo, $searchQuestionNo)]?></td>

<td class="noofmarkstd q<?php echo$questionNo?>_ans_text"  q_group="1" rowspan="<?php$q_row_span?>"><?php echo"<strong>".$searchMarks[array_search($questionNo, $searchQuestionNo)]."</strong>"?></td>
</tr>
    <?php
        //remaining incorrect answers in separate row (if any) follows here
    if($row_count < $q_row_span - 1) 
    {
        for($i=($row_count + 1); $i<$q_row_span; $i++) { ?>     
            <tr>
            <td class="answertd"><?php echo$inc_ans[$i];?>
            <input type="hidden" id="hiddenincorrect" name="incorrect[]" value="<?php echo$inc_ans[$i];?>">
            </td>

            <td class="answermarkstd">
            <input class="individualMarks q<?php echo$questionNo?>_mark"  q_group="1" name="answerMarks[]" type="text" data-type="qmark" data-qnum="<?php echo$questionNo?>" onkeypress="return isNumberKey(event)" maxlength="3" value="0" />
            </td>
            </tr>
    <?php
        }
    }
}

?>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:08:42.133

您错过`echo`了以下行：

```
<td class="noofmarkstd q<?php echo $questionNo?>_ans_text"  q_group="1" rowspan="<?php$q_row_span?>"><?php echo"<strong>".$searchMarks[array_search($questionNo, $searchQuestionNo)]."</strong>"?></td> 
```

约 105-107 行

看[小提琴](http://phpfiddle.org/main/code/jd2-yi4)

顺便说一句，php 必须已将错误通知您。

# php - 通过 PHP 进行用户验证

> ID：14370030
> 
> 赞同：1
> 
> 时间：2013-01-16T23:54:01.917
> 
> 标签：php, mysql

为了避免 SQL 注入，我尝试使用准备好的语句制作 PHP 脚本。我还创建了 3 个 php 文件。

1.  `db_connect.php`（这里存储了连接数据库的所有信息）

2.  `functions.php`（创建会话，检查登录尝试和功能`login`- 我可能犯了一个错误但找不到它）

3.  `process_login.php`（上面两个文件的集合。如果没有 POST 变量发送到此页面，它还会重定向到`login_success`错误页面或打印**Invalid request ）。**

另外可能是错误所在，因为每次尝试插入一些值时我都会`functions.php`收到**无效请求。**无论字段是空的还是它们包含来自数据库用户的值。

```
<?php

function sec_session_start() {
    $session_name = 'sec_session_id'; // Set a custom session name
    $secure = false; // Set to true if using https.
    $httponly = true; // This stops javascript being able to access the session id.

    ini_set('session.use_only_cookies', 1); // Forces sessions to only use cookies.
    $cookieParams = session_get_cookie_params(); // Gets current cookies params.
    session_set_cookie_params($cookieParams["lifetime"], $cookieParams["path"], $cookieParams["domain"], $secure, $httponly);
    session_name($session_name); // Sets the session name to the one set above.
    session_start(); // Start the php session
    session_regenerate_id(true); // regenerated the session, delete the old one.   
}

function login($postcode, $ref, $mysqli) {
  // Using prepared Statements means that SQL injection is not possible.
 if ($stmt = $mysqli->prepare("SELECT ref_no, postcode FROM customers WHERE ref_no = ?           LIMIT 1")) {
  $stmt->bind_param('ss', $postcode,$ref); // Bind "$email" to parameter.
  $stmt->execute(); // Execute the prepared query.
  $stmt->bind_result($dbref,$dbpostcode); // get variables from result.
    // $stmt->fetch();
  $a = array();
while ($stmt->fetch()) {
$a = array('ref' => $dbref , 'postcode' => $dbpostcode);
}

  if ($_POST['ref']==$dbref && $_POST['postcode']==$dbpostcode){ // If the user exists
    // We check if the account is locked from too many login attempts
    if(checkbrute($ref, $mysqli) == true) {
        // Account is locked

        return false;
    } else {
    if($dbref == $ref) { // Check if the password in the database matches the password the user submitted.
        // Password is correct!

          $ip_address = $_SERVER['REMOTE_ADDR']; // Get the IP address of the user.
          $user_browser = $_SERVER['HTTP_USER_AGENT']; // Get the user-agent string of the user.

          if(preg_match("/^[0-9a-zA-Z]{5,7}$/", $_POST["postcode"]) === 0)
'<p class="errText">Please enter valid postcode!</p>';
          else{ $_SESSION['postcode'] = $postcode;}
          if(preg_match("/^[0-9]{4,6}$/", $_POST["ref"]) === 0) '<p      class="errText">Please enter valid reference number ! </p>';
          else{
          $_SESSION['ref'] = $ref;}
                        // Login successful.
          return true;   
    } else {
        // Password is not correct
        // We record this attempt in the database
        $now = time();
        $mysqli->query("INSERT INTO login_attempts (ref_no, time) VALUES ('$ref', '$now')");
        return false;
    }
  }
  } else {
    // No user exists.
    return false;
  }
  }
   }

function checkbrute($ref, $mysqli) {
  // Get timestamp of current time
  $now = time();
  // All login attempts are counted from the past 2 hours.
  $valid_attempts = $now - (2 * 60 * 60);

  if ($stmt = $mysqli->prepare("SELECT time FROM login_attempts WHERE ref_no = ? AND    time > '$valid_attempts'")) {
  $stmt->bind_param('i', $ref);
  // Execute the prepared query.
  $stmt->execute();
  $stmt->store_result();
  // If there has been more than 3 failed logins
  if($stmt->num_rows > 3) {
    return true;
  } else {
    return false;
  }
   }
}

?> 
```

这就是`process_login.php`用户验证失败的地方。

```
<?php
include 'db_connect.php';
include 'functions.php';

sec_session_start(); //

if(isset($_POST['postcode'], $_POST['ref'])) {

  if(login($postcode, $ref, $mysqli) == true) {
  // Login success
  echo 'Success: You have been logged in!';
 } else {
  // Login failed
  header('Location: ./login.php?error=1');
  }
} else {
  // The correct POST variables were not sent to this page.
  echo 'Invalid Request';
}

?> 
```

任何帮助都将受到欢迎。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:59:43.383

你只有一个 $variable 可以绑定。您正在尝试绑定两个：

```
if ($stmt = $mysqli->prepare("SELECT ref_no, postcode FROM customers WHERE ref_no = ?           LIMIT 1")) {
  $stmt->bind_param('ss', $postcode,$ref); // Bind "$email" to parameter. 
```

只有一个 ？还有两个bind_param……

应该：

```
if ($stmt = $mysqli->prepare("SELECT ref_no, postcode FROM customers WHERE ref_no = ?           LIMIT 1")) {
  $stmt->bind_param('s', $ref); // Bind "$email" to parameter. 
```

我没有对此进行测试，但我认为您需要登录功能：

```
function login($postcode, $ref, $mysqli)
{
// Using prepared Statements means that SQL injection is not possible.
if ($stmt = $mysqli->prepare("SELECT ref_no, postcode FROM customers WHERE ref_no = ? LIMIT 1"))
    {
        $stmt->bind_param('s',$ref); // Bind "$email" to parameter.
        $stmt->execute(); // Execute the prepared query.
        $stmt->store_result();
        $stmt->bind_result($dbref,$dbpostcode); // get variables from result.
    while ($stmt->fetch())
        {
        if($stmt->num_rows > 0)
            {
            $now = time();
            if ($_POST['ref'] == $dbref && $_POST['postcode'] == $dbpostcode)
                {// If the user exists
                    if(checkbrute($ref, $mysqli) == true)
                        {                               
                            $mysqli->query("INSERT INTO login_attempts (ref_no, time) VALUES ('".$dbref."', '".$now."')");
                            return false;
                        }
                    $ip_address = $_SERVER['REMOTE_ADDR']; // Get the IP address of the user.
                    $user_browser = $_SERVER['HTTP_USER_AGENT']; // Get the user-agent string of the user.
                    if(!preg_match("/^[0-9a-zA-Z]{5,7}$/", $_POST["postcode"]))
                        {
                            $mysqli->query("INSERT INTO login_attempts (ref_no, time) VALUES ('".$dbref."', '".$now."')");
                            $error = '<p class="errText">Please enter valid postcode!</p>';
                            return $error;
                        }
                    $_SESSION['postcode'] = $postcode;
                    if(!preg_match("/^[0-9]{4,6}$/", $_POST["ref"]))
                        {
                            $mysqli->query("INSERT INTO login_attempts (ref_no, time) VALUES ('".$dbref."', '".$now."')");
                            $error = '<p class="errText">Please enter valid reference number ! </p>';
                            return $error;
                        }
                    $_SESSION['ref'] = $ref;
            return true;
            }
        //no rows returned
        $mysqli->query("INSERT INTO login_attempts (ref_no, time) VALUES ('".$dbref."', '".$now."')");
        return false;       
        }
    //no statement fetched
    return false;
    }
//no statment prepared
return false;
} 
```

我将此添加回代码中，但我不明白它的用途。它不会在此范围内返回或使用：

```
$ip_address = $_SERVER['REMOTE_ADDR']; // Get the IP address of the user.
$user_browser = $_SERVER['HTTP_USER_AGENT']; // Get the user-agent string of the user. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:03:48.683

试试看 ：

```
if ($stmt = $mysqli->prepare("SELECT ref_no, postcode FROM customers WHERE ref_no = ?           LIMIT 1")) {
  $stmt->bind_param('%s%s', $postcode,$ref); // Bind "$email" to parameter. 
```

# android - BadParcelableException - BroadcastReceiver 意图崩溃

> ID：14370033
> 
> 赞同：8
> 
> 时间：2013-01-16T23:54:19.443
> 
> 标签：android, android-intent, broadcastreceiver, parcelable, badparcelableexception

这个错误似乎偶尔发生，这很奇怪。它通常工作正常，但偶尔会爬起来。这是我的代码，位于广播接收器中：

```
public void onReceive(Context context, Intent intent) {
    MyCustomResponseMsg message = new MyCustomResponseMsg((MyMessage) intent.getParcelableExtra(MyMessage.EXTRA_MESSAGE_KEY));

    // do stuff with the message

    setResultCode(Activity.RESULT_OK);
} 
```

这是一个例外：

```
01-16 10:05:03.834: ERROR/AndroidRuntime(13533): FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start receiver com.(path-to-broadcast-receiver).MyReqReceiver:   
android.os.BadParcelableException: ClassNotFoundException when unmarshalling:  com.(path-to-my-message).MyMessage
at android.app.ActivityThread.handleReceiver(ActivityThread.java:1805)
at android.app.ActivityThread.access$2400(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:981)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.os.BadParcelableException: ClassNotFoundException when unmarshalling:     com.(path-to-my-message).MyMessage
at android.os.Parcel.readParcelable(Parcel.java:1958)
at android.os.Parcel.readValue(Parcel.java:1846)
at android.os.Parcel.readMapInternal(Parcel.java:2083)
at android.os.Bundle.unparcel(Bundle.java:208)
at android.os.Bundle.getParcelable(Bundle.java:1100)
at android.content.Intent.getParcelableExtra(Intent.java:3437)
at     com.(path).MyReceiver.onReceive(My    ReqReceiver.java:23)
at android.app.ActivityThread.handleReceiver(ActivityThread.java:1794)
... 10 more 
```

该错误似乎发生在 getParcelableExtra 行上。“MyMessage”类（显然在我自己的项目中命名为不同的东西）确实存在；它包含在一个库中。它在大多数情况下都有效，但有时每次收到广播时我都会让它崩溃。

我意识到这没什么好做的，但我只是想看看是否有什么我可以在接收器中做不同的事情来捕捉它，这样它就不会导致崩溃。或者，如果它绝对是发送广播方面的事情，那么我可以在需要时专注于它。但在此期间，我只是想确保为我的目的正确设置。我已经检查了与此崩溃有关的其他类似帖子，但我似乎找不到任何涉及从 BroadcastReceiver 中的意图获取这种特定类型的 parcelable 的帖子。

提前感谢您对此的任何指导！

**编辑** 如果需要，这是 MyMessage 的构造函数的样子：

```
public MyMessage(Parcel in) {
    field1 = in.readInt();
    field2 = in.readString();
    field3 = in.readString();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T00:33:27.770

我见过的这个问题的大多数情况都是通过`ClassLoader`在解组自定义`Parcelable`类的过程中设置正确的来解决的。

仔细看看你的`MyMessage`构造函数，特别是你如何获得`ClassLoader`：

```
private MyMessage(Parcel in) {
    //...
    //causes ClassNotFoundException
    this.field=in.readParcelable(null); 
    //causes ClassNotFoundException, in fact it's equivalent to previous
    this.field=in.readParcelable(ClassLoader.getSystemClassLoader()); 

    //this one should work
    this.field=in.readParcelable(getClass().getClassLoader());
} 
```

更多细节可以[在这个问题](https://stackoverflow.com/questions/1996294/problem-unmarshalling-parcelables/3806769#3806769)中找到。

* * *

**更新：**另外，尝试设置正确`ClassLoader`的`Bundle`包含在您的`Intent`：

```
public void onReceive(Context context, Intent intent) {
    Bundle extras=intent.getExtras();
    extras.setClassLoader(getClass().getClassLoader());
    MyCustomResponseMsg message = new MyCustomResponseMsg((MyMessage) extras.getParcelable(MyMessage.EXTRA_MESSAGE_KEY));
    //...
} 
```

# mysql - 结果将第 1 列的行然后按第 2 列的 SUM 组合成总计 THEN 按 DESC 排序

> ID：14370034
> 
> 赞同：-2
> 
> 时间：2013-01-16T23:54:28.490
> 
> 标签：mysql, sum, multiple-columns

我有一个包含 4 列的数据库：

1.  地点
2.  日期
3.  队名
4.  分数

我需要结果页面来选择并组合“Team_Name”（当相等时）和“Score”总和，并且仅在单个位置“BW3Avon”显示当前月份。

这是我的代码

```
<?php
$con = mysql_connect("localhost","*******_admin","g********1");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("x0kqgoub_bw3avonscore", $con);

$sql = "SELECT * FROM bw3avonscore WHERE MONTH(myDate) = MONTH(CURRENT_DATE)";

$result = mysql_query("SELECT * FROM bw3avonscore Team_Name ORDER BY Score DESC");

while($row = mysql_fetch_array($result))
{
echo $row['Team_Name'] . " " . $row['Score'];
echo "<br />";
}
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:05:46.433

```
SELECT  Team_Name, SUM(Score) totalScore
FROM    tableName
WHERE   Location = 'BW3Avon' AND
        MONTH(Date) = MONTH(CURDATE())
GROUP   BY Team_Name 
```

# javascript - 如何检查用户是否没有在表单中输入数据（发送前）？

> ID：14370037
> 
> 赞同：0
> 
> 时间：2013-01-16T23:54:41.383
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一些关于姓名的输入表格：所有者、号码、城市

```
<input id="id_owner" type="text" name="owner" maxlength="250" />
<input id="id_number" type="text" name="number" maxlength="250" />
<input id="id_city" type="text" name="city" maxlength="250" /> 
```

如何检查用户是否未将数据输入到不显示此代码的此对话框的表单（发送前）：

```
<a type="submit" name"save-continue-to-review" data-toggle="modal" data-target="#dialog" href=""
class="btn primary btn-primary" title="Order">Order
</a> 
```

它会显示另一个

这是完整的代码：[http ://wklej.org/id/927806/](http://wklej.org/id/927806/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T23:59:23.760

最终您将能够使用 HTML5 表单验证。但在那之前，请使用一些像这样的 jQuery 代码。（只是因为你用 jQuery 标记了这个问题。你可以用 vanilla JS 来做。）

（未经测试的代码，但应该可以工作）

```
var fields = $('input')

$('form').submit(function(e){
    e.preventDefault()
    valid = true
    fields.each(function(){
        if ($(this).val() == null) {
            valid = false
        }
    });

    if (valid == true) {
        $('form').submit()
    } else {
        alert("At least one field was not valid!")
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:09:16.700

```
if ( !$(this).val() ) {
  valid = false
} 
```

也许[这篇文章](https://stackoverflow.com/questions/1854556/check-if-inputs-are-empty-using-jquery)对你有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:19:42.170

1）在你的表格上添加这个

```
onsubmit="return validateForm(this);" 
```

2）验证功能（检查字段是否为空）

```
function validateform(formObj)
{
  inputs = formObj.GetElementsByTagName('input');

  for(i=0; i < inputs.length; i++)
  {
    if($.trim(inputs[i].value) == '')
    {
       alert('Field: ' + inputs[i].name + ' is empty!');
       return false;
    }
  }  
  return true;
} 
```

# c++ - C/C++ - 是否推荐使用 const static 或 #define

> ID：14370039
> 
> 赞同：-4
> 
> 时间：2013-01-16T23:54:45.313
> 
> 标签：c++, c, global-variables

> **可能重复：**
> [C 中的“static const”与“#define”](https://stackoverflow.com/questions/1674032/static-const-vs-define-in-c)

我的第一个想法是这是隐含的，但是你有没有理由使用`const`而不是`#define`？

如果你设置了一个全局变量，你为什么要改变它，你又不想在全局范围内保护它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T23:55:42.800

const 通常替换`#define`

`#define`**是一个可以进行文本**替换的预处理器宏。您可以使用它来定义常量或宏或执行各种其他操作。

const 是一种定义编译时常量的类型安全方式

这两种机制在编译过程中出现的时间不同，但总的来说，创建 const 是为了纠正`#define`.

我很少看到人们做类似的事情

```
#define CONSTINT  const int 
```

但这是合法的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T23:59:56.427

`const`仅与在运行时传递的变量相关，以确保子例程无法更改它们。`#define`是一个预处理器编译时指令，它将您定义的任何内容替换为您定义的内容。因此，它们用于不同的目的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T00:04:25.383

**编辑**这是对您最初问题的回答，即您是否会使用`const`...`define`现在您已经编辑了问题以提出不同的问题，这真的没有意义。

A`#define`没有定义变量，所以无论如何你都不能改变它，所以这个问题没有意义。

这甚至是不可能的：

```
#define FOO 99

int main()
{
    FOO = 98;
} 
```

因为预处理器用宏`FOO`替换了替换`99`，所以编译器看到这段代码：

```
int main()
{
    99 = 98;
} 
```

And obviously that's nonsense. You can't assign to a literal, it's not a variable (const or not) it's just a value.

# c++ - 可以为 initializer_list 文字重载运算符吗？

> ID：14370043
> 
> 赞同：10
> 
> 时间：2013-01-16T23:55:18.603
> 
> 标签：c++, operator-overloading, initializer-list

我正在尝试为 重载运算符`std::initializer_list`，但以下内容既不在 GCC 4.7.2 也不在 Clang 3.2 中编译：

```
#include <initializer_list>

void operator+(const std::initializer_list<int>&, const std::initializer_list<int>&);

int main() {
   {1, 2} + {3, 4};
} 
```

13.5/6 规定操作员函数应至少有一个参数，其类型为类、枚举或对其中任何一个的引用，并且标准指定`initializer_list`为模板类，因此在我看来它应该是一致的。但是，显然 Clang 和 GCC 都认为我正在尝试使用他们的非标准块表达式。

海合会：

```
Compilation finished with errors:
source.cpp: In function 'int main()':
source.cpp:7:8: warning: left operand of comma operator has no effect [-Wunused-value]
source.cpp:7:9: error: expected ';' before '}' token
source.cpp:7:9: warning: right operand of comma operator has no effect [-Wunused-value]
source.cpp:7:13: error: expected primary-expression before '{' token
source.cpp:7:13: error: expected ';' before '{' token 
```

铛：

```
Compilation finished with errors:
source.cpp:7:5: warning: expression result unused [-Wunused-value]
   {1, 2} + {3, 4};
    ^
source.cpp:7:9: error: expected ';' after expression
   {1, 2} + {3, 4};
        ^
        ;
source.cpp:7:8: warning: expression result unused [-Wunused-value]
   {1, 2} + {3, 4};
       ^
source.cpp:7:13: error: expected expression
   {1, 2} + {3, 4};
            ^
2 warnings and 2 errors generated. 
```

这应该编译吗？如果不是，为什么不呢？

**编辑**：

毫不奇怪，VS 2012 的 11 月 CTP 也失败了：

```
error C2143: syntax error : missing ';' before '}'
error C2059: syntax error : '{'
error C2143: syntax error : missing ';' before '{' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T00:03:47.943

据我了解13.5/6，

> 操作符函数要么是非静态成员函数，要么是非成员函数，并且至少有一个类型为**类、类引用、枚举或枚举引用的参数**

这应该是不可能的。Braced-init-lists 与`std::initializer_list`s 不同，它们不可互换。但是，以下应该有效：

```
std::initializer_list<int>({1,2}) + std::initializer_list<int>({2,1}) 
```

或这个：

```
operator+({1,2}, {2,1}) 
```

**更新：**为了澄清，重点是语言语法中没有规则允许括号初始化列表出现在 OP 建议的上下文中。如果您愿意，括号初始化列表只能出现在即将初始化某些内容的上下文中。

# javascript - Javascript/Jquery幻灯片效果发生在错误的地方

> ID：14370047
> 
> 赞同：2
> 
> 时间：2013-01-16T23:55:55.020
> 
> 标签：javascript, jquery, css

我的页面有一部分包含 Jquery 幻灯片效果，但是`div`应该滑入原始位置的页面滑动得太低，然后就弹出到位。我不太确定它为什么会这样。我应该怎么做才能使新`div`幻灯片与原始幻灯片在同一平面上`div`？下面是我的 JS 以及指向小提琴的链接，所以你可以明白我的意思。谢谢！

[http://jsfiddle.net/vYDqC/](http://jsfiddle.net/vYDqC/)

```
$(document).ready(function() {
$("#content div").hide();
$("#tabs li:first").attr("id","current");
$("#content div:first").effect("slide", 800);
var animating = false;
$('#tabs a').click(function(e) {
    e.preventDefault();
    if ($(this).closest("li").attr("id") == "current"){
    return;       
    }
    else{
        if(!animating)             
            $("#content div").hide("slide", {direction: "right"}, 800, function() { animating = true; });
            $("#tabs li").attr("id","");
            $(this).parent().attr("id","current");
            $('#' + $(this).attr('name')).show("slide", {direction: "left"}, 800, function() { animating = false;});
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:23:14.927

我以前用 jQuery 的幻灯片效果遇到过这个问题。尝试添加`position: absolute`到您的`.con`课程中。然后，您需要为其添加`width: 100%`以填写父 div。

[http://jsfiddle.net/vYDqC/2/](http://jsfiddle.net/vYDqC/2/)

# ember.js - Ember.js 路由器 v2 App.Router.map 文档不一致？

> ID：14370051
> 
> 赞同：4
> 
> 时间：2013-01-16T23:56:23.997
> 
> 标签：ember.js

我正在使用 ember.js 创建一个应用程序。我从 PRE.2 开始，但最终使用了 ember-data v11，因此升级为 ember 的 master。这意味着必须更改为新的 v2 路由器接口（作为旁注，我认为这要好得多，所以谢谢。）

我在试图弄清楚它是如何工作的时候遇到了一些问题，我深入了解了指南，但是有一些不一致的地方我无法完全理解：

1)

似乎有两种不同的约定用于配置路由映射：

在“模板”部分，使用了 match().to() 接口

```
App.Router.map(function(match) {
  match('/').to('index');
  match('/posts').to('posts');
  match('/posts/:post_id').to('post');
}); 
```

（这种方法也用在了 Tom Dale 的[gist](https://gist.github.com/3981133 "要旨")中）

在“路由”部分中，使用了资源/路由接口：

```
App.Router.map(function() {
  this.resource('posts', function() {
    this.route('new');
  });
}); 
```

这里它指出“资源”应该用于名词路线，“路线”用于动词路线。

然后在“重定向到不同的 URL”部分，不遵循这个名词/动词约定：

```
App.Router.map(function(match) {
  this.resource('topCharts', function() {
    this.route('choose', { path: '/' });
    this.route('albums');
    this.route('songs');
    this.route('artists');
    this.route('playlists');
  });
}); 
```

我的第一个问题是：

*展望未来，创建路线的正确约定是什么？*

我的第二个问题紧随其后，与我的申请更相关：

*如何从顶级“资源”路由链接到嵌套的“路由”路由并通过适当的模型？*

（在“模板”文档的“链接”部分中有一个示例，但它与 match().to() 接口有关，我专门使用资源/路由接口）

这是我的例子：

我创建了一个基于流的简单站点结构，流由详细信息、一组帖子、句柄和历史记录组成。我的路由设置如下：

```
App.Router.map(function() {
  this.resource('streams');
  this.resource('stream', { path: '/stream/:stream_id' }, function(){
    this.route('details');
    this.route('posts');
    this.route('handles');
    this.route('history');
  });
}); 
```

我的流路线如下所示：

```
App.StreamsRoute = Ember.Route.extend({
  model: function() { 
    return App.Stream.find(); 
  },
  setupController: function(controller, model) { 
    controller.set('content', model); 
  }
}); 
```

和模板：

```
<script type="text/x-handlebars" data-template-name="streams">
  <ul>
  {{#each stream in controller}}
    <li>{{#linkTo "stream" stream}} {{stream.title}} {{/linkTo}}</li>
  {{/each}}
  </ul>
</script> 
```

我的流（单数）路线：

```
<script type="text/x-handlebars" data-template-name="stream">
  <nav>
    {{#linkTo "stream.details" }}Details{{/linkTo}}
  </nav>
  {{outlet}}
</script> 
```

现在，我想链接到我的子路由“详细信息”，但我不确定在 linkTo 中放置什么，以便我的模型（它是一个流）被传递到这个子路由中：

```
App.StreamDetailsRoute = Ember.Route.extend({ }); 
```

我的“详细信息”模板只显示了流对象的一些属性。

```
<script type="text/x-handlebars" data-template-name="stream/details">
  <h2>Stream Details</h2>
  <p>Id: {{id}}</p>
  <p>Title: {{title}}</p>
</script> 
```

我还希望链接到帖子、历史记录和处理子路由，并能够基于流模型显示这些聚合。我不确定该怎么做。我假设我需要使用 setupController 来显示要显示的项目，我只是不确定如何将流对象放入这些子路由中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:16:55.290

> 展望未来，创建路线的正确约定是什么？

[http://emberjs.com/guides/routing/defining-your-routes/](http://emberjs.com/guides/routing/defining-your-routes/)中描述的资源/路由方法

> 如何从顶级“资源”路由链接到嵌套的“路由”路由并通过适当的模型？

将路由的名称指定为第一个参数，后跟所需的任何上下文。因此，在您的示例中，从流模板创建指向“stream.details”的链接时，您需要指定`this`为上下文。

```
{{#linkTo "stream.details" this}}Details{{/linkTo}} 
```

[http://emberjs.com/guides/templates/links/](http://emberjs.com/guides/templates/links/)中描述的方法仍然涵盖了基础知识。

如有疑问，我建议检查 link_helper 的测试用例。例如：[https ://github.com/emberjs/ember.js/blob/master/packages/ember/tests/helpers/link_to_test.js#L249](https://github.com/emberjs/ember.js/blob/master/packages/ember/tests/helpers/link_to_test.js#L249)

# web-services - 调用 session.invalidate() 后，Tomcat 不会使会话无效

> ID：14370052
> 
> 赞同：0
> 
> 时间：2013-01-16T23:56:27.723
> 
> 标签：web-services, session, tomcat, invalidation

我在 jaxws 中有一个网络服务，我可以在登录后连接到该服务。一切正常，我通过登录名和密码并登录，我正在 WS 服务器上为该用户创建会话。毕竟我想注销，所以我删除了所有会话属性并调用 session.invalidate()。

属性被删除了，但是当我进入tomcat管理器时，我看到会话还在。

当我登录时，会话已将 setMaxInactiveInterval 设置为 7200 秒（2 小时）。当然，在这段时间之后会话将被销毁，但是如果不再使用该会话，那么保持空会话存活 2 小时有什么意义。

有没有办法完全销毁该会话？不用等2小时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:14:35.573

在您的回复中尝试这些

```
response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); 
response.setHeader("Pragma", "no-cache"); 
response.setDateHeader("Expires", 0); 
```

确保后续请求不会重新实例化您的会话。

# antlr - antlr 在 xtext 中的用途

> ID：14370057
> 
> 赞同：1
> 
> 时间：2013-01-16T23:56:43.233
> 
> 标签：antlr, xtext

我是 Xtext 的新手，想知道 antlr 在 xtext 中的用途是什么。到目前为止，据我所知，antlr 根据语法生成解析器，然后解析器处理文本模型。正确的？那么其他生成的东西呢，比如编辑器或ecore。xtext 背后是否有其他组件生成它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:01:20.100

Xtext 需要一个解析器生成器来为您定义的语言生成解析器。他们本可以建造自己的。他们选择使用 ANTLR。

我不知道他们可能选择使用什么其他第三方机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:56:06.187

我一直在破解一个基于 Xtext 的插件，据我所见，我认为它的工作原理是这样的：Xtext 有它自己的 BNF 语法，这与 ANTLR 非常相似。实际上它是子集。

Xtext 获取您的语法，并从中生成 ANTLR 语法（.g 文件）。生成的 ANTLR 语法将特定操作添加到您的 BNF 规则中。操作代码与 Xtext 运行时以及（可能）与 Eclipse 本身进行交互。使用一些旧版本的 ANTLR 处理 .g 文件并生成 .java 文件。然后编译该文件。

# jquery - jQuery选项卡 - 选择选项卡时加载jsp的一部分

> ID：14370062
> 
> 赞同：0
> 
> 时间：2013-01-16T23:57:13.277
> 
> 标签：jquery, jsp

我有一个 jsp 页面，页面内容被划分为不同的 jQuery 选项卡。

我的一个选项卡（第二个选项卡）包含一些需要运行许多相对昂贵的查询（java 后端）以加载结果的表。

但是，这些表格信息并不是每次加载页面时都必须加载的重要信息（当有人需要它们时，他们会单击该特定选项卡以查看他们需要的内容）。这对性能产生了负面影响。

我想知道除非有人选择/单击选项卡，否则内容是否不会加载。

只是要注意我没有使用 AJAX 来获取我的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:51:24.137

看看**jQuery-ui Tabs 插件**，它允许您创建选项卡并通过 Ajax 动态加载每个选项卡的内容。如果需要，您可以混合使用基本选项卡和 ajax 选项卡。

[http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)

# python - 读取带有重复标题的 CSV 文件

> ID：14370066
> 
> 赞同：3
> 
> 时间：2013-01-16T23:57:51.297
> 
> 标签：python, parsing, csv

我以前没有使用过`csv module`in `python`，但它看起来很方便使用。

问题是我试图读取的 CSV 文件也时不时地在文件中包含标题（索引）。

像这样的东西：

```
A, B, C, D, E, F
1, 2, 3, 4, 5, 6
1, 2, 3, 4, 5, 6
1, 2, 3, 4, 5, 6
A, B, C, D, E, F
1, 2, 3, 4, 5, 6
1, 2, 3, 4, 5, 6
A, B, C, D, E, F
1, 2, 3, 4, 5, 6
1, 2, 3, 4, 5, 6
1, 2, 3, 4, 5, 6
1, 2, 3, 4, 5, 6 
```

我可以按原样使用`csv module`，还是必须自己解析。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T00:06:12.880

您可以通过检查您是否只是阅读标题行来按原样使用它。例如，使用`DictReader`，您可能会这样做：

```
with open('file.csv') as f:
    reader = csv.DictReader(f)
    lines = [row for row in reader
             if not all(k == v for k, v in row.iteritems())] 
```

这将适用于您的示例文件的方式是：

1.  构造`DictReader`函数读取第一个标题行，确定字段名为`"A", "B", "C", "D", "E", "F"`。
2.  迭代`reader`然后返回像`{"A": "1", "B": "2", ...}`.
3.  中的列表理解`lines`查看每一行字典。它首先会看到像`{"A": "1", ...}`. `all(k == v for k, v in row.iteritems())`循环遍历行的键和值，设置 eg`k = "A"`和`v = "1"`. 无论它首先看到哪个，取决于字典决定如何迭代，它会看到`k != v`，因此`all()`调用将是`False`，这意味着该行将其放入 list `lines`。
4.  当它到达一个重复的标题行时，它会看到一个像`{"A": "A", "B": "B", ...}`. 然后，由于键等于每个字典元素的值，`all()`调用将返回`True`，列表推导中的条件将是`False`，这意味着该行不会进入最终列表。请注意，如果您的标题行可能有不同的间距，您需要先调用`.strip()`键/值，然后再在`all()`调用中比较它们。
5.  最后，`lines`您的示例文件将等于`[{"A": 1, "B": 2, ...}] * 9`; 重复的标题行已被删除。

如果您想逐行处理文件而不是一次将其读入一个列表，只需将列表推导更改为`lines`生成器表达式，方法是将 into 更改`[row for row ...]`为`(row for row ...)`. 然后你可以循环`lines`，但是在你循环之后，每一行都会被遗忘（就像你`for row in reader`一开始那样）。

# c# - 逐行比较两个文本文件

> ID：14370070
> 
> 赞同：9
> 
> 时间：2013-01-16T23:58:01.090
> 
> 标签：c#, file, text, compare, line

在这里，我描述了一个示例场景：

“FileA-Database.txt”包含以下名称：

KB200

KB300

KB400

“FileB-Slave.txt”包含以下名称：

KB600

KB200

KB400

KB700

我想将“FileA-Database.txt”与“FileB-Slave.txt”进行比较，并让缺失值自动填充到“FileA-Database.txt”文件中，我还需要在文本中显示缺失值名为“Results.txt”的文件。

代码需要与 C# (framework 4.0+) 兼容！

我需要一种简单的方法，但我的方法并不能完全按照我想要的方式工作：

```
 private void button_compare_Click(object sender, EventArgs e)
        {
            string fileA, fileB, fileC;
            fileA = "database-critical.txt";
            fileB = "patchlist.txt";
            fileC = "result.txt";

            string alphaFilePath = fileA;

            List<string> alphaFileContent = new List<string>();

            using (FileStream fs = new FileStream(alphaFilePath, FileMode.Open))
            using(StreamReader rdr = new StreamReader(fs))
            {
                while(!rdr.EndOfStream)
                {
                    alphaFileContent.Add(rdr.ReadLine());
                }
            }

            string betaFilePath = fileB;

            StringBuilder sb = new StringBuilder();

            using (FileStream fs = new FileStream(betaFilePath, FileMode.Open))
            using (StreamReader rdr = new StreamReader(fs))
            {
                while(! rdr.EndOfStream)
                {
                    string[] betaFileLine = rdr.ReadLine().Split(Convert.ToChar(","));

                    if (alphaFileContent.Contains(betaFileLine[0]))
                    {
                        sb.AppendLine(String.Format("{0}", betaFileLine[0]));
                    }
                }
            }

using (FileStream fs = new FileStream(fileC, FileMode.Create))
        using (StreamWriter writer = new StreamWriter(fs))
        {
            writer.Write(sb.ToString());
        }
    }

            //End
        } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-17T00:06:57.753

```
String directory = @"C:\Whatever\";
String[] linesA = File.ReadAllLines(Path.Combine(directory, "FileA-Database.txt"));
String[] linesB = File.ReadAllLines(Path.Combine(directory, "FileB-Database.txt"));

IEnumerable<String> onlyB = linesB.Except(linesA);

File.WriteAllLines(Path.Combine(directory, "Result.txt"), onlyB); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-17T00:00:07.413

由于您的问题似乎您没有做出任何努力，我将给您一个粗略的概述。

1.  逐行读取这两个文件，例如使用`File.ReadAllLines`或`File.ReadLines`。
2.  使用 LINQ 的`Except`方法。
3.  将结果写入新文件。

# windows-phone-7 - 如何将 Windows Phone 设备与 Arduino 连接？

> ID：14370071
> 
> 赞同：3
> 
> 时间：2013-01-16T23:58:02.587
> 
> 标签：windows-phone-7, arduino, sensors

我想使用 Arduino 和[Windows Phone](http://en.wikipedia.org/wiki/Windows_Phone_7)设备从传感器捕获距离。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:21:17.200

Windows Phone 7 SDK 无法访问手机上的 USB 端口或蓝牙，因此您无法使用它。所以我认为最好的方法（并且可能是 Windows Phone 7 上唯一的方法）是通过 Internet 或本地网络与 Arduino 通信，作为 Windows Phone 7 应用程序连接的服务器。

[以下是 Arduino Web 服务器](http://arduino.cc/en/Tutorial/WebServer)和[TCP 服务器](http://www.lauridmeyer.com/2012/04/simple-arduino-tcp-server-using-the-ethernetshield-and-a-java-client/)的一些示例。

对于 Windows Phone 客户端，我会检查[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)或[sockets](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202874%28v=vs.105%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T07:26:17.807

## Windows 电话 8 SDK：

[考虑通过蓝牙 API](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207007%28v=vs.105%29.aspx)建立 App 到设备的通信，该 API 在该版本中可供开发人员使用。MSDN 上提供的[蓝牙应用程序到设备应用程序示例是可行的方法。](http://code.msdn.microsoft.com/wpapps/Bluetooth-app-to-device-644870ba)

Windows Phone 8 中还有另一个选项，使用[Proximity](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207060%28v=vs.105%29.aspx)（一组与 NFC 一起使用的类），它更适用于短距离通信。

至于Arduino，肯定有蓝牙模块。

## Windows 电话 7 开发工具包：

无法与第三方设备建立对等通信。正如 Johan 所提议的，一种解决方法是通过网络将它们连接起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T01:15:43.123

我实际上已经制作了一个 Windows Phone 8 应用程序，它使用 Sparkfun 蓝牙银调制解调器连接到 Arduino。问题是，即使在我连接它们之后，我也无法让 Arduino 接收输入，或者我无法让 WP8 应用程序成功发送到 Arduino ......

我的项目 GitHub 是：[https ://github.com/lanceseidman/Arduino-Bluetooth-WinPhone8](https://github.com/lanceseidman/Arduino-Bluetooth-WinPhone8)

希望每个人都可以尝试并帮助该项目。

我的面包板照片很快就会出来，我的 Arduino 代码也会出来。

# ruby-on-rails - Websolr、solr search、Heroku 和 sunspot [Ruby on Rails]

> ID：14370075
> 
> 赞同：0
> 
> 时间：2013-01-16T23:58:29.767
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku, solr

所以我有一个问题。我目前在我的开发机器上使用 Sunspot gem 搜索我的 Rails 应用程序记录，这非常好，因为它可以通过文章进行全文搜索（这是我真正想要的功能），但不好的是我的应用程序是托管的在 Heroku 上，它需要 websolr 插件才能让 solr 服务器与他们的系统一起工作，每月花费 20 美元。作为超级破产的大学生，我现在正在寻找解决此托管成本的方法。有人知道吗？我知道 Solr 只是一个服务器，所以我可以将它托管在其他地方，然后通过该主机运行我的 solr 实例，但我真的不知道如何做到这一点（以及如何将它与 Heroku 集成）。有没有人有这方面的经验？如果这看起来很难，

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:24:41.603

Heroku 有[关于可用全文搜索选项的指南](https://devcenter.heroku.com/articles/full-text-search)，其中包括如何[运行您自己的 Solr 服务器](https://devcenter.heroku.com/articles/full-text-search#run-your-own-solr-server)。

Amazon Web Services 有一个[免费使用层](http://aws.amazon.com/free/)，因此该选项不应该花费您任何费用，至少在第一年不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:16:32.827

您可以在 Amazon EC2 上启动一台机器并在其上安装 solr。它的起价约为 10 美元/月。只要确保使用与 Heroku 相同的数据中心，我相信它是东海岸的数据中心。

# multithreading - 在 Groovy 中加入线程

> ID：14370076
> 
> 赞同：12
> 
> 时间：2013-01-16T23:58:30.607
> 
> 标签：multithreading, concurrency, groovy

该`join`方法有什么作用？
如：

```
def thread = Thread.start { println "new thread" }
thread.join() 
```

即使没有该`join`语句，此代码也可以正常工作。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-17T00:07:47.353

与在 Java 中所做的相同 - 它导致*调用* `join`的线程阻塞，直到被调用的`Thread`对象所代表的线程`join`终止。

`println`如果在生成新线程后让主线程执行其他操作（例如 a ），您可以看到不同之处。

```
def thread = Thread.start {
  sleep(2000)
  println "new thread"
}
//thread.join()
println "old thread" 
```

如果没有`join`这个 println 可能会在另一个线程仍在运行时发生，所以你会得到`old thread`，两秒钟后跟着`new thread`. 主`join`线程必须等到另一个线程完成，所以你会在两秒钟内什么也得不到，然后`new thread`，然后`old thread`。

# procedural-generation - 加快网格上对象的随机位置

> ID：14370078
> 
> 赞同：1
> 
> 时间：2013-01-16T23:58:36.260
> 
> 标签：procedural-generation

目前我正在做以下事情，我确信这是一种缓慢的方式。基本上我穿过一个网格并确定a）是否存在一颗星星，b）如果有一颗星星是什么类型。我认为我应该做的是使用我的已知值（例如 current_star_density * 0.25）并使用它来绘制一系列点。我想我不确定的部分是当我绘制该数量时如何防止重复。

任何帮助将不胜感激。这是代码的相关部分。

```
for (var z = 0; z < gridZ; z++) 
{
    for (var x= 0; x < gridX; x++) 
    {       
        star_chance = Random.value * 1000;   // * 1000      
        if (star_chance <= current_star_density)
        {
            star_class = Random.value * 100;
            if (star_class <=1) // add in the other star types etc
            {
                new_star = Instantiate(prefab_o, Vector3(x * 10 + transform.position.x - 500, 0, z * 10 + transform.position.z - 500), Quaternion.identity);
                new_star.transform.parent = this.transform;
                new_star.name = String.Format("O:{0}.{1}:{2}.{3}",galaxy_X,x,galaxy_Y,z);
            } 
            else if (star_class <=2) 
            {
                new_star = Instantiate(prefab_b, Vector3(x * 10 + transform.position.x - 500, 0, z * 10 + transform.position.z - 500), Quaternion.identity);
                new_star.transform.parent = this.transform;
                new_star.name = String.Format("B:{0}.{1}:{2}.{3}",galaxy_X,x,galaxy_Y,z);
            }
            else if (star_class <=5) 
            {
                new_star = Instantiate(prefab_a, Vector3(x * 10 + transform.position.x - 500, 0, z * 10 + transform.position.z - 500), Quaternion.identity);
                new_star.transform.parent = this.transform;
                new_star.name = String.Format("A:{0}.{1}:{2}.{3}",galaxy_X,x,galaxy_Y,z);
            } 
            else if (star_class <=10) 
            {
                new_star = Instantiate(prefab_f, Vector3(x * 10 + transform.position.x - 500, 0, z * 10 + transform.position.z - 500), Quaternion.identity);
                new_star.transform.parent = this.transform;
                new_star.name = String.Format("F:{0}.{1}:{2}.{3}",galaxy_X,x,galaxy_Y,z);
            } 
            else if (star_class <=20) 
            {
                new_star = Instantiate(prefab_g, Vector3(x * 10 + transform.position.x - 500, 0, z * 10 + transform.position.z - 500), Quaternion.identity);
                new_star.transform.parent = this.transform;
                new_star.name = String.Format("G:{0}.{1}:{2}.{3}",galaxy_X,x,galaxy_Y,z);
            } 
            else if (star_class <=40) 
            {
                new_star = Instantiate(prefab_k, Vector3(x * 10 + transform.position.x - 500, 0, z * 10 + transform.position.z - 500), Quaternion.identity);
                new_star.transform.parent = this.transform;
                new_star.name = String.Format("K:{0}.{1}:{2}.{3}",galaxy_X,x,galaxy_Y,z);
            }
            else if (star_class <=80) 
            {
                new_star = Instantiate(prefab_m, Vector3(x * 10 + transform.position.x - 500, 0, z * 10 + transform.position.z - 500), Quaternion.identity);
                new_star.transform.parent = this.transform;
                new_star.name = String.Format("M:{0}.{1}:{2}.{3}",galaxy_X,x,galaxy_Y,z);
            }
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:40:27.850

我不太确定你想要达到什么样的最终结果，但你的意思可能是这样的（伪代码）吗？

`star_density`这里是一个介于 0 和 1 之间的数字，1 表示全密度，0 表示没有。

```
// We have a fixed amount of stars based on the grid size and density
// You could add a small random multiplier if you wish
for (var i = 0; i < gridX * gridZ * star_density; ++i) {
    // Pick a random position until we find an empty one
    do {
        var x = floor(Random.value * gridX);
        var z = floor(Random.value * gridY);
    } while (grid[z][x].containsStar());
    var new_star = /* Do all the star initialization stuff and randomization */
    grid[z][x] = new_star;
} 
```

这假设您可以使用网格来查找恒星的存在。我没有看到您将星星存储在哪里，但即使您目前没有实际的网格，您也可以使用临时数组进行放置算法。

当碰撞不太可能发生时，这对于低恒星密度（例如，低于 30% - 完全虚构的数字，需要一些实验）应该更有效，但在某些时候如果会运行得比你当前的更糟，因为找到的概率很低一个空闲插槽并使用两个随机值而不是你的一个。另一个缺点是，如果RNG很糟糕，理论上这可能会进入一个网格大且密度非常高的无限循环。您可以通过简单地根据密度选择要使用的算法来应对最坏情况下的性能。

# java - 在后台发送电子邮件 - Android

> ID：14370080
> 
> 赞同：0
> 
> 时间：2013-01-16T23:58:58.860
> 
> 标签：java, android, email

我有这段代码，两个简单的类：一个邮件发送者和一个只有一个按钮的主要 Android 活动。这是活动代码：

```
package com.py.spycam;

import javax.mail.MessagingException;
import javax.mail.NoSuchProviderException;
import javax.mail.internet.AddressException;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Toast;

public class MainActivity extends Activity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void onClickMail(View v) {
        String[] to = {"toaddress"};
        SMTPMail mail = new SMTPMail("user", "pass");
        try {
            mail.send("sender", to, "prova", "prova bpdy");
            Toast.makeText(this, "Mail sent", Toast.LENGTH_SHORT).show();
        } catch (NoSuchProviderException e) {
            Toast.makeText(this, "Unable to send email (NoSuchProviderException)", Toast.LENGTH_SHORT).show();
        } catch (AddressException e) {
            Toast.makeText(this, "Unable to send email (AddressException)", Toast.LENGTH_SHORT).show();
        } catch (MessagingException e) {
            Toast.makeText(this, "Unable to send email (MessagingException)", Toast.LENGTH_SHORT).show();
        } catch (Exception e) {
            Toast.makeText(this, "Unable to send email (general Exception)", Toast.LENGTH_SHORT).show();
        }

    }

} 
```

这是邮件发件人：

```
package com.py.spycam;

import java.util.Properties;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.NoSuchProviderException;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.AddressException;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class SMTPMail {
    private String host;
    private String from;
    private String pass;
    private Properties props;

    public SMTPMail(String _user, String _pass) {
        host = "smtp.gmail.com";
        from = _user;
        pass = _pass;
        props = System.getProperties();

        /* Props settings */
        props.put("mail.smtp.starttls.enable", "true"); // added this line
        props.put("mail.smtp.host", host);
        props.put("mail.smtp.user", from);
        props.put("mail.smtp.password", pass);
        props.put("mail.smtp.port", "587");
        props.put("mail.smtp.auth", "true");
    }

    public void send(String from, String[] to, String subject, String body)
            throws AddressException, MessagingException, NoSuchProviderException {
            //throws AddressException, MessagingException {

        Session session = Session.getDefaultInstance(props, null);
        MimeMessage message = new MimeMessage(session);
        message.setFrom(new InternetAddress(from));

        InternetAddress[] toAddress = new InternetAddress[to.length];

        // To get the array of addresses
        for(int i=0; i < to.length; i++ ) { // changed from a while loop
            toAddress[i] = new InternetAddress(to[i]);
        }

        for(int i=0; i < toAddress.length; i++) { // changed from a while loop
            message.addRecipient(Message.RecipientType.TO, toAddress[i]);
        }
        message.setSubject(subject);
        message.setText(body);
        Transport transport = session.getTransport("smtp");
        transport.connect(host, from, pass);
        transport.sendMessage(message, message.getAllRecipients());
        transport.close();
    }

} 
```

我不断收到一个一般异常，没有被任何`catch`语句捕获（怎么可能？它是从哪里抛出的？）。这段代码有什么问题？注意：如果使用纯 Java 执行此代码（`javac`已编译，使用简单执行`main`），则此代码有效。

超级编辑：这是 LogCat 的输出，仅限于 System.err 警告（从`printStackTrace()`s.

```
01-17 01:41:41.550: W/System.err(23420): android.os.NetworkOnMainThreadException
01-17 01:41:41.550: W/System.err(23420):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
01-17 01:41:41.555: W/System.err(23420):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
01-17 01:41:41.555: W/System.err(23420):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
01-17 01:41:41.555: W/System.err(23420):    at java.net.InetAddress.getByName(InetAddress.java:289)
01-17 01:41:41.555: W/System.err(23420):    at java.net.InetSocketAddress.<init>(InetSocketAddress.java:105)
01-17 01:41:41.555: W/System.err(23420):    at java.net.InetSocketAddress.<init>(InetSocketAddress.java:90)
01-17 01:41:41.555: W/System.err(23420):    at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:233)
01-17 01:41:41.555: W/System.err(23420):    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:189)
01-17 01:41:41.555: W/System.err(23420):    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1359)
01-17 01:41:41.555: W/System.err(23420):    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:412)
01-17 01:41:41.555: W/System.err(23420):    at javax.mail.Service.connect(Service.java:288)
01-17 01:41:41.560: W/System.err(23420):    at javax.mail.Service.connect(Service.java:169)
01-17 01:41:41.560: W/System.err(23420):    at com.py.spycam.SMTPMail.send(SMTPMail.java:55)
01-17 01:41:41.560: W/System.err(23420):    at com.py.spycam.MainActivity.onClickMail(MainActivity.java:29)
01-17 01:41:41.560: W/System.err(23420):    at java.lang.reflect.Method.invokeNative(Native Method)
01-17 01:41:41.560: W/System.err(23420):    at java.lang.reflect.Method.invoke(Method.java:511)
01-17 01:41:41.560: W/System.err(23420):    at android.view.View$1.onClick(View.java:3586)
01-17 01:41:41.560: W/System.err(23420):    at android.view.View.performClick(View.java:4084)
01-17 01:41:41.560: W/System.err(23420):    at android.view.View$PerformClick.run(View.java:16966)
01-17 01:41:41.560: W/System.err(23420):    at android.os.Handler.handleCallback(Handler.java:615)
01-17 01:41:41.560: W/System.err(23420):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-17 01:41:41.565: W/System.err(23420):    at android.os.Looper.loop(Looper.java:137)
01-17 01:41:41.565: W/System.err(23420):    at android.app.ActivityThread.main(ActivityThread.java:4931)
01-17 01:41:41.565: W/System.err(23420):    at java.lang.reflect.Method.invokeNative(Native Method)
01-17 01:41:41.565: W/System.err(23420):    at java.lang.reflect.Method.invoke(Method.java:511)
01-17 01:41:41.565: W/System.err(23420):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
01-17 01:41:41.565: W/System.err(23420):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
01-17 01:41:41.565: W/System.err(23420):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:19:13.927

很基本。

android线程模型有两个规则。

1）不要阻塞主线程。2）不要从另一个线程操作主（“UI”）线程

您通过对主线程进行网络调用来阻塞主线程，从而违反了其中的第一个。将发送邮件移动到不同的线程。考虑一个简单的线程或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

此外，请参阅有关[“进程和线程”](http://developer.android.com/guide/components/processes-and-threads.html)的开发人员文档。

另外，请注意，您目前似乎启用了[StrictMode](http://developer.android.com/reference/android/os/StrictMode.html)，这是一件好事。这会检测到您“不应该做”的事情，例如在主线程上进行网络调用，如果这样做会引发异常。

# c# - 无法使用 DataContractSerializer 获取元素列表

> ID：14370082
> 
> 赞同：0
> 
> 时间：2013-01-16T23:59:14.197
> 
> 标签：c#, datacontract

我无法从我的 XML 中检索“测试”元素的集合。我无法弄清楚我的语法有什么问题。

这是下面的 XML：

```
<tests>
  <username>Me</username>
  <password>meme</password>
  <test>
    <title>Test This</title>
    <description>To verify this</description>
  </test>
  <test>
    <title>Test That</title>
    <description>To verify that</description>
  </test>
</tests> 
```

这是 C# 类：

```
namespace MyProject
{
    public class Temp
    {
        [DataContract(Name = "tests", Namespace = "")]
        public class Tests
        {
            [DataMember(Name = "username", Order = 0)]
            public string Username { get; set; }

            [DataMember(Name = "password", Order = 1)]
            public string Password { get; set; }

            [DataMember(Name = "test", Order = 2)]
            public List<Test> testList;

            public Tests()
            {
            }

        }

        [DataContractCollection(Name = "test", Namespace = "")]
        public class Test : List<Test>
        {
            [DataMember(Name = "title", Order = 0)]
            public string Title { get; set; }

            [DataMember(Name = "description", Order = 1)]
            public string Description{ get; set; }

            public Test()
            { }

            public Test(String title, String desc)
            {
                this.Title = title;
                this.Description= desc;
            }

        }

    }
} 
```

还有我要序列化的代码：

```
FileStream fs = new FileStream("C:/bla/file.xml", FileMode.Open);
XmlDictionaryReader reader = XmlDictionaryReader.CreateTextReader(fs, new XmlDictionaryReaderQuotas());
DataContractSerializer serializer = new DataContractSerializer(typeof(Temp3.TestGroup), knownTypeList);
Tests tests = (Tests)serializer.ReadObject(reader, true);
reader.Close();
fs.Close(); 
```

在调试模式下，tests.testList 什么都没有。如果我要更改 `public List<Test> testList;`为， `public Test testList;`我将获得第一个测试元素。我也尝试过使用 Test[] 或 ArrayList。

有人能指出什么是错的吗？非常感谢。

作为一个附带问题，是否有 XML 的 DataContractSerialization 的详细示例（具有深层嵌套元素）？我发现的大部分内容都很基本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:43:36.850

好吧，我想我明白了——至少部分明白了。多亏了这个： [http ://borismod.blogspot.com/2009/06/v2-wcf-collectiondatacontract-and.html](http://borismod.blogspot.com/2009/06/v2-wcf-collectiondatacontract-and.html)

我发现的另一件事是我必须从 [DataMember(Name = "test", Order = 2)] public List testList 中删除 Order

使用博客中的示例，我的测试元素将包含在 testlist 中。所以 testlist 是一个额外的元素。

# python - 如何正确分配函数内部的变量/如何为每个递归循环加 1？

> ID：14370083
> 
> 赞同：-1
> 
> 时间：2013-01-16T23:59:20.670
> 
> 标签：python, function, variables, python-2.7, global-variables

我想知道标题中说了什么。例如，如何计算递归循环并最终返回或打印结果。

这是我的代码，但它不能正常工作：

```
def lenRecur(aStr):
    number = 0
    print "lenRecur number is ", number
    '''
    aStr: a string

    returns: int, the length of aStr
    '''
    if aStr == '':
        return 0
    else:
        print aStr
        number += 1
        print "else number is ", number
        return lenRecur(aStr[:-1]) 
```

好的，所以当我写作时，我再次测试并且它可以工作，如果我使用 lenRecur("word", 0) 并且还自定义我的代码它可以工作。问题是，这是不合法的。这是不合法的，我不允许这样做:(

所以自定义代码：

```
def lenRecur(aStr, number):
    print "lenRecur number is ", number
    '''
    aStr: a string

    returns: int, the length of aStr
    '''
    if aStr == '':
        return number
    else:
        print aStr
        number += 1
        print "else number is ", number
        return lenRecur(aStr[:-1], number) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:25:30.363

我认为递归版本`len`远非最有效的，但如果你想这样做，你应该使用辅助函数来隐藏第二个参数：

```
def lenRecur(aStr):
    '''
    aStr: a string

    returns: int, the length of aStr
    '''
    # place the doc string next to the `def`
    # the outside world has no ability to accidentally set the parameter
    def lenRecurHelper(aStr, num = 0):
        print "lenRecur number is ", number

        # empty strings are falsy, so just test for that.
        if not aStr:
            return num
        print aStr
        lenRecurHelper(aStr[:-1],num + 1)

    return lenRecurHelper(aStr) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:04:06.077

如果我理解正确，这应该可以解决您的问题：

```
def lenR(s,n=0):
    if s:
        return lenR(s[:-1],n+1)
    else:
        return n

#testing it:
lenR('this code is not pretty')  # output: 23
lenR('egg')   # output: 3
lenR('spam')  # output: 4 
```

它不漂亮，但是通过递归计算字符串的长度也不漂亮。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T00:10:22.110

我相信您的意图是`number`用作静态函数变量。这可以通过以下方式实现：

```
def lenRecur(aStr):
    if not hasattr(lenRecur, 'number'):
        lenRecur.number = 0
    print "lenRecur number is ", lenRecur.number
    '''
    aStr: a string

    returns: int, the length of aStr
    '''
    if aStr == '':
        return 0
    else:
        print aStr
        lenRecur.number += 1
        print "else number is ", lenRecur.number
        return lenRecur(aStr[:-1]) 
```

每次重置计数器的替代方法，代价是使用两个参数：

```
def lenRecur(aStr, recurse=False):
    if not recurse:
        lenRecur.number = 0
    print "lenRecur number is ", lenRecur.number
    '''
    aStr: a string

    returns: int, the length of aStr
    '''
    if aStr == '':
        return 0
    else:
        print aStr
        lenRecur.number += 1
        print "else number is ", lenRecur.number
        return lenRecur(aStr[:-1], True) 
```

我不知道练习的实际意义是什么，以及在实施中可以做什么和不能做什么。

# angularjs - ie8 兼容性

> ID：14370092
> 
> 赞同：1
> 
> 时间：2013-01-17T00:00:10.857
> 
> 标签：angularjs, internet-explorer-8, click

我有一些在 Chrome 和 IE9 中运行良好的代码。在 IE8 浏览器中，运行兼容模式，它会中断。用户群以兼容模式运行 IE8。我把它放进去强制经常使用： content="IE=edge

```
<form class="imei-block-radio" name="myForm">

      <input type="radio" name="blocktype" ng-model="actionType" value="block"        ng-click="changeBlock('block')" checked="true">  Block <br/> <br/>
      <input type="radio" name="blocktype" ng-model="actionType" value="unblock" ng-click="changeBlock('unblock')"> Un-Block <br/>

</form> 
```

它命中的代码位于页面的控制器中，并且代码确实被命中，但输入参数是“未定义”。

```
$scope.changeBlock = function(value) {
    alert(value);
    if (value == 'unblock')
    {
      ...
    }
} 
```

警报始终显示“值”始终未定义。此外，控制器中定义的其他变量如：

```
$scope.actionType = 'block'; 
```

在函数内部也是未定义的`changeBlock`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-18T07:18:13.363

```
<!--[if lt IE 9]>
<script src="dist/html5shiv.js"></script>
<![endif]-->

<script>
  document.createElement('header');
  document.createElement('section');
  document.createElement('article');
  document.createElement('aside');
  document.createElement('nav');
  document.createElement('footer');
</script>

<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T16:24:07.717

ng-model 似乎不适用于 IE8 和更早版本中的输入无线电。

这对我有用：
`<input type="radio" ng-checked="actionType=='block'" ng-click="actionType='block'" name="blocktype" value="block">
<input type="radio" ng-checked="actionType=='unblock'" ng-click="actionType='block'" name="blocktype" value="unblock">`

解决方法：用 ng-check 和 ng-click 替换您的 ng-model

# asp.net-mvc - ASP.NET MVC 中隐藏输入的客户端验证

> ID：14370096
> 
> 赞同：0
> 
> 时间：2013-01-17T00:00:30.963
> 
> 标签：asp.net-mvc, hidden-field, client-side-validation

我对 ASP.NET MVC 架构还是有点陌生​​。我有一个数据编辑页面，其中包括一个隐藏的输入。在测试我的页面后，“保存”按钮没有做任何事情，经过一些研究后发现这是一个客户端验证问题。

在页面中评论以下行后：

```
 @*@Html.HiddenFor(model => model.ID)*@ 
```

（其中 ID 是 GUID），页面已验证并发布。

据我回忆，脚手架将这段代码放在了我的视野中。我只需要知道如何解决这个问题，以便将 ID 字段正确发送回控制器，并想知道为什么它没有验证。

这是我的视图代码：

```
@using (Html.BeginForm()) 
{
    @Html.ValidationSummary(true)

    <fieldset>

        <div class="object_basics">
      @Html.HiddenFor(model => model.ID)

        <div class="editor-label">
            @Html.LabelFor(model => model.Title)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Title)
            @Html.ValidationMessageFor(model => model.Title)
        </div>

       <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-12T08:35:14.143

隐藏字段的客户端验证不起作用，因为 jQuery 验证忽略所有隐藏标签。
你必须定义`HiddenRequiredValidator`类来实现你的目标。

[您可以在此处](http://www.gregshackles.com/2010/02/validating-hidden-fields-in-asp-net-mvc-2/)阅读解决此问题的解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T15:14:26.833

您是否尝试为 ID 添加验证消息？

```
@Html.ValidationMessageFor(model => model.ID) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:30:45.897

**在视图**中，更新自：

```
@using (Html.BeginForm()) 
```

至

```
@using (Html.BeginForm(new{ID = model.ID})) 
```

移除隐藏元素 [@Html.HiddenFor(model => model.ID)]。

**在您的控制器**中，更新操作属性，如下所示

```
public ActionResult YourActionName(string ID, string Title) 
```

希望这能回答您的问题。

干杯，丹尼

# python - pygame——跳墙

> ID：14370097
> 
> 赞同：2
> 
> 时间：2013-01-17T00:00:45.827
> 
> 标签：python, pygame

好的，所以我的代码已启动并运行，现在当玩家在用户按住右或左时与墙壁发生碰撞时，玩家将慢慢滑下墙壁，如果玩家释放方向（左或右），则玩家继续正常下降。

我想做的事情是，当玩家撞到墙上时，他会“粘”在墙上，这意味着他仍然会向下滑动并将向下滑动直到他撞到地面（用户不必保持方向）或用户可以跳墙。（对于那些玩过或看过游戏或超人的人来说，想想超级肉男孩）。任何人都可以提出一个解决这个问题的好方法吗？

```
import pygame, time
from pygame import *

WIN_WIDTH = 800
WIN_HEIGHT = 640
HALF_WIDTH = int(WIN_WIDTH / 2)
HALF_HEIGHT = int(WIN_HEIGHT / 2)

DISPLAY = (WIN_WIDTH, WIN_HEIGHT)
DEPTH = 32
FLAGS = 0

def main():
    pygame.init()
    screen = pygame.display.set_mode(DISPLAY, FLAGS, DEPTH)
    pygame.display.set_caption("Use arrows to move!")
    timer = pygame.time.Clock()

    up = down = left = right = space = False
    bg = Surface((32,32))
    bg.convert()
    bg.fill(Color("#000000"))
    entities = pygame.sprite.Group()
    player = Player(32, 32)
    platforms = []

    space_num = 0

    x = y = 0
    level = [
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                              E           P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                           PPPPPP         P",
        "P                                          P",
        "P                                          P",
        "PPPPP                                      P",
        "P                                          P",
        "P         PPPPPPP                          P",
        "P                                          P",
        "P                     PPPPPP               P",
        "P                                          P",
        "P   PPPPPPPPPPP                            P",
        "P                                          P",
        "P                 PPPPPPPPPPP              P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "P                                          P",
        "PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP",]
    # build the level
    for row in level:
        for col in row:
            if col == "P":
                p = Platform(x, y)
                platforms.append(p)
                entities.add(p)
            if col == "E":
                e = ExitBlock(x, y)
                platforms.append(e)
                entities.add(e)
            x += 32
        y += 32
        x = 0

    total_level_width = len(level[0]) * 32
    total_level_height = len(level) * 32
    camera = Camera(complex_camera, total_level_width, total_level_height)
    entities.add(player)

    while 1:
        timer.tick(60)

        for e in pygame.event.get():
            if e.type == QUIT: raise SystemExit, "QUIT"
            if e.type == KEYDOWN and e.key == K_ESCAPE:
                raise SystemExit, "ESCAPE"
            if e.type == KEYDOWN and e.key == K_UP:
                up = True
            if e.type == KEYDOWN and e.key == K_DOWN:
                down = True
            if e.type == KEYDOWN and e.key == K_LEFT:
                left = True
            if e.type == KEYDOWN and e.key == K_RIGHT:
                right = True
            if e.type == KEYDOWN and e.key == K_SPACE:
                if space_num < 6:
                    space = True
                    space_num += 1

            if e.type == KEYUP and e.key == K_UP:
                up = False
            if e.type == KEYUP and e.key == K_DOWN:
                down = False
            if e.type == KEYUP and e.key == K_LEFT:
                left = False
            if e.type == KEYUP and e.key == K_RIGHT:
                right = False
            if e.type == KEYUP and e.key == K_SPACE:
                space = False

        # draw background
        for y in range(20):
            for x in range(25):
                screen.blit(bg, (x * 32, y * 32))

        camera.update(player)

        # update player, draw everything else
        player.update(up, down, left, right, platforms, space)
        for e in entities:
            screen.blit(e.image, camera.apply(e))
        pygame.display.update()

class Camera(object):
    def __init__(self, camera_func, width, height):
        self.camera_func = camera_func
        self.state = Rect(0, 0, width, height)

    def apply(self, target):
        return target.rect.move(self.state.topleft)

    def update(self, target):
        self.state = self.camera_func(self.state, target.rect)

#def simple_camera(camera, target_rect):
#    l, t, _, _ = target_rect
#    _, _, w, h = camera
#    return Rect(-l+HALF_WIDTH, -t+HALF_HEIGHT, w, h)

def complex_camera(camera, target_rect):
    l, t, _, _ = target_rect
    _, _, w, h = camera
    l, t, _, _ = -l + HALF_WIDTH, -t+HALF_HEIGHT, w, h

    l = min(0, l)                           # stop scrolling left
    l = max(-(camera.width-WIN_WIDTH), l)   # stop scrolling right
    t = max(-(camera.height-WIN_HEIGHT), t) # stop scrolling bottom

    return Rect(l, t, w, h)

class Entity(pygame.sprite.Sprite):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)

class Player(Entity):
    def __init__(self, x, y):
        Entity.__init__(self)
        self.xvel = 0
        self.yvel = 0
        self.onGround = False
        self.onWall = False
        self.image = Surface((32,32))
        self.image.fill(Color("#0000FF"))
        self.image.convert()
        self.rect = Rect(400, 400, 32, 32)

    def update(self, up, down, left, right, platforms, space):
        if up:
            if self.onGround: self.yvel -= 10 # only jump if on the ground
        if down:
            pass
        if left:
            self.xvel = -8
        if right:
            self.xvel = 8
        if not self.onGround:
            self.yvel += 0.3 # only accelerate with gravity if in the air
            if self.yvel > 40: self.yvel = 40 # max falling speed
        if not(left or right):
            self.xvel = 0

        self.rect.left += self.xvel # increment in x direction
        self.collide(self.xvel, 0, platforms) # do x-axis
        self.rect.top += self.yvel # increment in y direction
        self.onGround = False; # assuming we're in the air
        self.onWall = False
        self.collide(0, self.yvel, platforms) # do y-axis collisions

    def collide(self, xvel, yvel, platforms):
        for p in platforms:
            if pygame.sprite.collide_rect(self, p):
                if isinstance(p, ExitBlock):
                    pygame.event.post(pygame.event.Event(QUIT))

                if xvel > 0:
                    self.rect.right = p.rect.left
                    self.onWall = True

                if xvel < 0:
                    self.rect.left = p.rect.right
                    self.onWall = True

                if yvel > 0:
                    self.rect.bottom = p.rect.top
                    self.onGround = True
                    self.onWall = False
                    self.yvel = 0
                if yvel < 0: self.rect.top = p.rect.bottom

                if self.onWall:
                    self.yvel = 3

class Platform(Entity):
    def __init__(self, x, y):
        Entity.__init__(self)
        self.image = Surface((32, 32))
        self.image.convert()
        self.image.fill(Color("#F0FFFF"))
        self.rect = Rect(x, y, 32, 32)

    def update(self):
        pass

class ExitBlock(Platform):
    def __init__(self, x, y):
        Platform.__init__(self, x, y)
        self.image.fill(Color("#00ff00"))

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:24:40.743

为玩家类提供一个在他们触摸或停止触摸墙壁时设置的布尔值可能与您需要的一样复杂。只需注意保持布尔值与游戏世界中实际发生的情况同步的典型问题：您应该在每个更新周期的同一位置检查此值的更改，最有可能在角色移动之后，而不是其他地方. 此外，如果墙壁或地形本身可以移动，则必须考虑到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:37:37.317

这只是一个粗略的想法，基于我编写的一些代码。

```
onCollision(wall, player):
  player.stuck = true
  player.wall_jump = true

onCollision(floor, player):
  player.stuck = false
  player.wall_jump = false # If you slide to the bottom of the floor, you can't walljump

onInput():

  player = getPlayer()
  if jump_key.state and player.wall_jump: # assuming you set jump_key.state to true, when jump key is pressed
    # set player direction to opposite
    # set player's horizontal and vertical velocity
    player.stuck = false; 
```

# html - 链接突然停止工作

> ID：14370105
> 
> 赞同：0
> 
> 时间：2013-01-17T00:01:26.013
> 
> 标签：html, hyperlink

[现场直播。](http://zoparealty.com/)

我在这个网站上工作了一段时间，在短暂的中断后返回发现页脚中的三个社交媒体链接已经停止工作。页面上的所有其他链接，包括页脚中的其他链接，仍按预期工作。我很困惑，因为代码没有被触及（据我所知）并且在中断之前它运行良好。

任何想法可能会发生什么？

```
<div class="social">
        <ul>
            <li><a href="https://twitter.com/ZOPArealty"><img src="<?php echo get_template_directory_uri(); ?>/img/twitter.png" alt="ZOPA%20Twitter" /></a></li>
            <li><a href="http://www.facebook.com/ZopaRealty"><img src="<?php echo get_template_directory_uri(); ?>/img/facebook.png" alt="ZOPA%20Facebook" /></a></li>
            <li><a href="http://www.linkedin.com/company/zopa-realty"><img src="<?php echo get_template_directory_uri(); ?>/img/linkedin.png" alt="ZOPA%20Linkedin" /></a></li>
        </ul>
    </div><!-- end social --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:13:20.883

只需在`position: relative;`您的`.social`课程中添加一个。这对我来说是一个快速的错误修复。

```
.social {
   position: relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:06:08.940

你有一些疯狂的元素浮动。我穿上`overflow: hidden;`，`div class="social"`它修复了链接但破坏了你的布局。

# 编辑

罪魁祸首似乎是`li`'s 向左浮动。既然你有`display: inline`这些，你可以取出`float: left`并使用相对定位来修复你的布局。

# ios - 使用 UINavigationController 时在 didSelectRowAtIndexPath 中辞职第一响应者

> ID：14370106
> 
> 赞同：1
> 
> 时间：2013-01-17T00:01:55.050
> 
> 标签：ios, objective-c, uitableview, uinavigationcontroller

当在 UITableView 中选择一行并且在导航控制器内触发推送 segue 时，我想从当前编辑的文本字段中退出第一响应者。这是在弹出框内发生的。

我尝试了两件事：

**(1)**我可以看到文本字段在制作动画时正在退出第一响应者，但是当我返回视图控制器时，它再次使用第一响应者并显示键盘。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.view endEditing:YES];
} 
```

**(2)**这会阻止在返回视图控制器时恢复编辑，但是这种方法会破坏动画。在动画结束时，第一个视图控制器变黑并且有点跳跃。

*编辑：刚刚意识到这仅在横向模式下可见，因为它与键盘动画比推送动画更快有关，并且一旦键盘消失并且弹出框开始动画到更高的高度，它就会变黑当键盘为它留出空间时。在为导航控制器中的推送动画制作动画时，动画无法处理扩展弹出框。当删除下面的代码并推送并让 iOS 删除键盘时，键盘和推送动画的时间完全相同，从而避免了这个问题。我想知道如何在强迫辞职的同时自己做到这一点。*

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self.view endEditing:YES];

    return indexPath;
} 
```

**如何在更改视图控制器时辞职第一响应者而不在导航返回时再次恢复文本字段上的第一响应者？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:09:20.707

坚持一分钟。所以问题是，当您在视图恢复时执行 segue（并关闭视图）时，它会有一种键盘显示的阴影。是这样吗？在这种情况下。您可以尝试以下方法。当您单击 tableviewcell 时。做个检查。像下面这样。

```
if(firstResponder != nil){
    //register for keyboard hide notification
    [[NSSnotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidHide:) name:@"UIKeyboardDidHideNotification" object:nil];. 
    [firstResponder resignFirstResponder]; 
} else {
     [self performSegue:@"yoursegueidentifier" withSender:nil];
} 
```

如果没有响应者（因此没有键盘），那只会启动 segue。如果有键盘，则注册键盘隐藏通知，然后退出响应者。然后，在响应键盘隐藏的方法中

```
- (void)keyboardDidHide:(NSNotification *)notification {
     [self performSegue:@"yoursegueidentifier" withSender:nil];
 } 
```

这应该只在键盘隐藏时执行 segue，因此它应该解决动画问题。您可能需要修改情节提要以从视图控制器而不是从单元格的按钮启动 segue，我不确定您的体系结构如何。让我知道这是否有效。

# html - 如何禁用电子邮件中的默认电子邮件地址样式？

> ID：14370107
> 
> 赞同：1
> 
> 时间：2013-01-17T00:02:03.047
> 
> 标签：html, css, html-email

我正在使用 html 表编写电子邮件模板。并且此电子邮件模板的内容中有一个电子邮件地址。当我发出这个电子邮件模板进行测试时，似乎 gmail 和 yahoo 邮件总是为电子邮件内容中的电子邮件地址添加一些默认样式，这将使其成为蓝色、带下划线、可点击的链接。但我不想要这些风格。我只希望电子邮件地址与其他人一样显示为纯文本。那么我应该如何摆脱这些默认的电子邮件地址样式呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:01:22.513

通常我只会将其设为我自己的链接，并将其设置为内联样式以匹配文本。

```
<a href="mailto:email@address.com" style="text-decoration:none;color:#0a0a0a;">email@address.com</a> 
```

一些电子邮件客户端也会忽略链接颜色`#ffffff`，`#000000`因此，您可以用所需颜色的略微偏色版本来代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T00:19:31.327

我不认为你可以。gmail 和 yahoo 在客户端中添加了这种样式，让用户的生活更轻松。我认为没有任何方法可以在不以某种方式破坏电子邮件地址的情况下覆盖它，例如在`@`and`.`字符的任一侧添加空格。

# django - Django 基于类的通用视图 - 在单个 Mixin 中处理 ListView 和 DetailView

> ID：14370108
> 
> 赞同：0
> 
> 时间：2013-01-17T00:02:06.463
> 
> 标签：django, django-class-based-views

我有一个具有基本 URI 的在线文档 Django 应用程序：

```
/path/to/docs/<DOMAIN>/ 
```

这允许您查看该域中的文档列表。它使用 GCBV [ListView](http://docs.djangoproject.com/en/dev/ref/class-based-views/generic-display/#listview)。您可以使用以下命令请求DOCNAME的[DetailView ：](http://docs.djangoproject.com/en/dev/ref/class-based-views/generic-display/#detailview)

```
/path/to/docs/<DOMAIN>/<SLUG>/ 
```

其中 SLUG 是非常不言自明的，它返回一个记录作为一个好的 slug 应该。这些有子页面，带有自己的模板，大致如下：

```
/path/to/docs/<DOMAIN>/<SLUG>/foo/
/path/to/docs/<DOMAIN>/<SLUG>/bar/
/path/to/docs/<DOMAIN>/<SLUG>/baz/ 
```

**对于未版本化的文档**，这很简单。但是，在另一个 DOMAIN（我们称之为“联合”）中，我**确实**有不同版本的 DOCNAME 可用：

```
/path/to/docs/<DOMAIN>/<SLUG>/<VERSION>/ 
```

和

```
/path/to/docs/<DOMAIN>/<SLUG>/<VERSION>/foo/
/path/to/docs/<DOMAIN>/<SLUG>/<VERSION>/bar/
/path/to/docs/<DOMAIN>/<SLUG>/<VERSION>//baz/ 
```

在这种情况下，如果用户请求：

```
/path/to/docs/<DOMAIN>/<SLUG>/ 
```

我不希望向用户呈现 DetailView - 我希望向他们呈现具有可用文档的每个 VERSION 的 ListView：

```
Fantastic docs - Version 1 (/path/to/docs/federated/fantastic/1/)
Fantastic docs - Version 2 (/path/to/docs/federated/fantastic/2/)
Fantastic docs - Version 3 (/path/to/docs/federated/fantastic/3/) 
```

我已经对 GCBV 做了一些相当广泛的阅读，并且之前在不同的应用程序中对它们中的许多进行了子类化，但我怀疑我不能在**urls.py**中有一个条目来处理这两种类型的查询（详细信息和列表视图）。事实上，Django 文档[警告不要](https://docs.djangoproject.com/en/dev/topics/class-based-views/mixins/#using-singleobjectmixin-with-listview)混合 GCBV，尤其是 wrt get_context_data()。

我**可以**在 Mixin 内部做的是查看 DOMAIN 名称，并在此基础上将请求分叉到 ListView（用于版本化文档）或 DetailView（用于非版本化文档）。我已经搜索了所有 Django 文档，但没有看到任何示例。谁能帮我吗？

**注意：** 我确实想到了一个想法：在**urls.py**中，我实际上可以在模式中硬编码 DOMAIN 名称。因此，不要使用**kwarg** <domain>：

```
urlpatterns = patterns('',
    url(r'^(?P<domain>[\w-]+)/(?P<slug>[\w-]+)/(?P<version>\d{1})/$', MyMixin.as_view(
            queryset=Docs.objects.all()
        ),
    )),
) 
```

并在视图中使用**域**kwarg 作为逻辑确定器（对于 if/else），我可以执行以下操作：

```
urlpatterns = patterns('',
    url(r'^federated/(?P<slug>[\w-]+)/(?P<version>\d{1})/$', MyListViewMixin.as_view(
            queryset=Docs.objects.all()
        ),
    )),
    url(r'^nonfederated/(?P<slug>[\w-]+)/$', MyDetailViewMixin.as_view(
            queryset=Docs.objects.all()
        ),
    )),
) 
```

但是，我不知道有多少文档 DOMAIN 会被版本化，有多少不会。我需要尽可能通用（请原谅双关语）。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T21:52:22.377

我建议不要将所有视图混合`ListView`到`DetailView`一个视图中（这在概念上是一团糟且难以维护），而是将所有视图设计为好像它们是版本化的，并将未版本化的视图视为具有版本`1`（或类似的未指定版本号）的视图。

在非联合网站中，URL 的`/path/to/docs/<DOMAIN>/<SLUG>/`行为与访问`/path/to/docs/<DOMAIN>/1/<SLUG>/`.

在联合网站中，URL`/path/to/docs/<DOMAIN>/<SLUG>/`将显示可用版本的列表（作为`ListView`）。

您可以使用执行以下操作的视图来实现上述行为：

*   检查此域有多少版本可用
*   如果只有一个，则重定向到`/path/to/docs/<DOMAIN>/<LATEST_VERSION>/<SLUG>/`.
*   如果有多个，则显示可用版本的列表并让用户选择要访问的版本。

非联合网站只是只有一个版本的文档的网站。如果将来这种情况发生变化，那么您也可以轻松地将它们转换为版本化文档。

# qt - 为什么我的 QT 应用程序不起作用？

> ID：14370111
> 
> 赞同：7
> 
> 时间：2013-01-17T00:02:36.167
> 
> 标签：qt, executable, qt5

我在 Windows 7 64 位（使用 msvc 2010）上使用 Qt Creator 构建了一个 Qt 5 应用程序。该应用程序可以在我的计算机上完美运行，但无法在其他计算机上运行。

**我将Dependency Walker**中显示为缺失的所有 .dll 复制到程序文件夹中，没有错误，但应用程序无法运行。

我已经在 Windows XP 和 Windows 7 64 和 32 位上对其进行了测试。
我该怎么做才能找出问题所在？

更新：我安装了 Qt 4.8.4 (vs 2008) 和 msvc 2008 express，我编译了它，它在其他计算机上运行，​​带有 Qt4 的 .dll。也许有人知道Qt5有什么问题......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-17T21:16:55.770

我有同样的问题。

您需要在可执行目录中包含包含 qwindows.dll 和 qminimal.dll 的“平台”目录。您可以在“插件”文件夹下找到该目录。

如果您不添加它，您的应用程序将显示为加载然后退出并返回代码 0。依赖项步行器无法帮助您，因为 DLL 是延迟加载的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T19:51:07.393

我遇到了同样的问题 - 我添加了 Dependency Walker 报告的所有 DLL，但我的程序在运行时立即退出，没有错误消息。

我添加`libEGL.dll`到程序目录，它现在运行正常。

我猜它`libEGL.dll`是由其他 DLL 之一动态加载的——可能`libGLESv2.dll`是基于它具有最相似名称的所有已知依赖项（！）——并且动态加载不是 Dependency Walker 可以检测到的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T19:43:02.597

[我也遇到了同样的问题，并从这篇文章](http://qt-project.org/forums/viewreply/100664/ "这个帖子")中了解到 MinGW GCC 4.7 与 Qt 5.0 及更高版本不兼容。我采取了与您相同的方法并切换到有效的 Qt Creator 4.8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-16T07:19:48.627

我也遇到了同样的问题，并尝试了 DLL 丢失消息和 Dependency Walker，但它没有帮助我，或者我不知道我是否正确使用它。下面的方法帮助我解决**了（对于给定的场景）**它。这种方法适用于一些最低限度的情况。

**设想**

1.  QT 创作者 3.3.2
2.  QT 5.4.1（MSVC 2010，32 位），Windows 8.1 操作系统
3.  未使用动态加载 dll
4.  未使用第三方 dll
5.  这是一个 QTWidget 应用程序。

**方法**（尝试了套件 MinGW 32 位和 MSVC2012 OpenGL 32 位）

1.  构建应用程序后获取发布 exe。复制并粘贴到我们想要的另一个文件夹（假设为 Z:\abc）
2.  转到 Qt 套件（MinGW 或 MSVC）安装文件夹（在我的情况下：Z:\Qt\5.4\mingw491_32（或）Z:\Qt\5.4\msvc2012_opengl）
3.  搜索 *.dll
4.  **复制**所有 DLL 并将其粘贴到 exe 放置的文件夹中。即 (z:\abc)
5.  运行应用程序（在我的情况下它正常启动）。
6.  在运行应用程序时，删除所有复制的 DLL 文件。

    6.1) 删除时，Windows 将提示应用程序正在使用的 DLL 文件**（使用中的文件）**，因为这些 DLL 最初是加载的。保持这些文件不变。

    6.2) 其他 DLL 文件将按照我们的要求被删除。

7.  关闭应用程序并重新打开它（在我的情况下它正常启动）。
8.  所以在这里我们得到了所需的DLL

这不是正确的方法，但在某些情况下可能会有所帮助。

**笔记**

在复制所有 DLL 时，当获取文件已存在消息时，根据系统决定将两个文件保持在不同的名称中。如果应用程序无法运行，那么我们可以尝试使用这些重命名的文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-12T01:11:55.083

我认为它必须是一些 DLL，您需要将其放在与可执行文件相同的目录中，或者甚至可能放在 PATH 中的目录中。无论哪种方式，我也在使用 Qt5，*如果*我不将它们放在与我的 exe 文件相同的目录中，我会遇到与您相同的问题：

*   vcruntime140[d].dll（一个 MSVC 库）
*   ucrtbase[d].dll（另一个 MSVC 库——我正在使用 MSVC/Visual C++）
*   Qt5Widgets[d].dll（Qt 5 库）
*   Qt5Svg[d].dll（另一个 Qt 5 库）
*   Qt5PrintSupport[d].dll（另一个 Qt 5 库）
*   Qt5Gui[d].dll（你猜对了）
*   Qt5Core[d].dll（是的）
*   msvcp150[d].dll（我相信另一个 Microsoft 可再发行组件）

当然，您可能没有使用我正在使用的任何 Qt 库，在这种情况下您将不需要它们。此外，您可能有一个不同的工具链来调用不同的 DLL，但我认为这个想法是相同的，而且您的设置可能与我的相同。

我在每个库的末尾附加了一个`[d]`，因为对于调试版本，它们最后有一个`d`，但对于发布版本，它们没有。该部分在您的机器上可能相同也可能不同。我相信这是一个设置或一组。

# javascript - 使谷歌地图 iframe 嵌入响应式的快速简便方法

> ID：14370115
> 
> 赞同：14
> 
> 时间：2013-01-17T00:02:57.757
> 
> 标签：javascript, html, css, google-maps, iframe

我正在寻找一种快速简便的方法来将谷歌地图（通过他们的嵌入代码）嵌入到响应式站点中，并将响应性也应用于地图。

通常，iframe 会拒绝使用您的媒体查询或其中包含的 div 调整大小，这总是让我感到沮丧，如果真的不需要，我讨厌使用插件，例如响应式谷歌地图插件。请参阅下面的解决方案。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-17T00:02:57.757

如果您只是使用谷歌地图（或任何其他嵌入，如 youtube、soundcloud 等）IFRAME 嵌入，您只需将其添加到您的 CSS 即可使其具有响应性。

```
iframe, object, embed{max-width: 100%;} 
```

如果您的容器/主题是响应式的，这将非常有用。本质上，这将适用于任何 iframe，而不仅限于谷歌地图。但请记住，如果您的网站上有其他 iframe，它们也会变得响应。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-17T08:54:22.890

# 介绍

这个答案也可以在我的博客**[文章](http://www.gajotres.net/using-google-maps-javascript-api-v3-with-jquery-mobile/)**中找到。如果您有时间，请看一下，因为它涵盖的信息比仅此答案要多得多。

还有另一个不需要 iframe 的出色解决方案，它的构建旨在尽可能地响应。它被称为谷歌地图 v3 API。

官方文档：[https ://developers.google.com/maps/documentation/javascript/examples/](https://developers.google.com/maps/documentation/javascript/examples/)

首先让我们谈谈如何在经典 Web 应用程序中使用 Gmap v3 API，它将为我们提供一个很好的视角来做什么。在地图热潮开始时，iframe 是一种标准的交付解决方案，但随着时间的推移，它成为一种过时的技术，更像是他们成功交付技术的障碍。

# 历史

新的 JavaScript Maps API 第 3 版由 Google 从头开始​​构建，旨在为桌面 Web 浏览器和移动设备提供干净、快速和强大的地图应用程序开发平台。据谷歌称，v3 API 允许开发人员将谷歌地图嵌入到他们自己的网页中，并且专门设计用于更快、更适用于移动设备以及传统的桌面浏览器应用程序。

与适用于 IE6+、Firefox 2.0+ 的 v2 API 不同，旧版本的 Chrome v3 API 将适用于所有支持 HTML5 的浏览器，范围从 IE8+、Firefox 3.0 + 到 iOS、Android 和 BlackBerry 6+ 浏览器。这也使它成为 jQuery Mobile 应用程序的绝佳解决方案。但让我向您展示它在经典网页中的工作原理。

# 解决方案

这是一个工作示例：http: [//jsfiddle.net/Gajotres/T4H5X/](http://jsfiddle.net/Gajotres/T4H5X/)

你可以把它放在任何地方，它会响应调整大小。它快速、可靠且灵活。

这是一个例子：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps JavaScript API v3 Example: Map Simple</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body, #map_canvas {
        margin: 0;
        padding: 0;
        height: 100%;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
      var map;
      function initialize() {
        var mapOptions = {
          zoom: 8,
          center: new google.maps.LatLng(-34.397, 150.644),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map_canvas"></div>
  </body>
</html> 
```

# javascript - 禁用除一个复选框以外的所有复选框

> ID：14370119
> 
> 赞同：0
> 
> 时间：2013-01-17T00:03:16.340
> 
> 标签：javascript, jquery, html, checkbox

我[在JSFIDDLE上看到了这一点](http://jsfiddle.net/Curt/qGbtQ/1/)，我想知道如何更改它，以便在且仅在检查45时禁用其余部分，如果未选择45，则启用其余部分。我应该能够在不提交表单的情况下完成所有这些工作。

jsfiddle 上的示例 javascript：

```
$(function(){
    $(".rambo").change(function(){
        $(this).siblings().attr("disabled", $(this).is(":checked"));  
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:06:29.600

您可以使用`attribute selector`.

```
$(function(){
    $(".rambo[value=1]").change(function(){
        $(this).siblings().prop("disabled", this.checked);  
    });
}); 
```

[http://jsfiddle.net/Mnmte/](http://jsfiddle.net/Mnmte/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:19:20.327

只需添加适当`id`的 s 并选择它

HTML：

```
<input type="checkbox" id="cb1" class="rambo" value='1' /> 45 
<input type="checkbox" id="cb2" class="rambo" value='2' /> 56 
<input type="checkbox" id="cb3" class="rambo" value='3' /> 56 
```

JS：

```
$(function(){
    $("#cb1").change(function(){
        $(this).siblings().attr("disabled", $(this).is(":checked"));  
    });
}); 
```

[JSFiddle](http://jsfiddle.net/qGbtQ/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:08:53.217

从所有答案中，您还可以指定您只希望第一个`checkbox`使用`nth-child`选择器执行脚本：

```
$(".rambo:nth-child(1)").change(function(){
    $(this).siblings().attr("disabled", $(this).is(":checked"));  
}); 
```

[演示](http://jsfiddle.net/qGbtQ/10/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T00:06:04.120

从其他人那里删除 .rambo 类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T00:06:08.560

```
$(function(){
    $(".rambo").change(function(){
      if($(this).val() == 1){
        $(this).siblings().attr("disabled", $(this).is(":checked"));  
      }
    });
}); 
```

单程

# java - SSL 客户端身份密钥库 - 通过 FileInputStream 按需解析身份

> ID：14370120
> 
> 赞同：1
> 
> 时间：2013-01-17T00:03:17.577
> 
> 标签：java, security, ssl, keystore

在按需处理多组身份时，我正在寻找在客户端身份存储中不太常见的 SSL 使用的最佳实践。

让我说清楚，这个问题是关于密钥库（Java）的客户端处理。

由于这是我第一次处理 SSL，我的研究使我更倾向于常见的最佳实践，例如：

*   有一个单独的密钥库供您信任。（例如。`truststore.jks`）
*   您身份的单独密钥库。（例如`keystore.jks`- 私钥）

这部分很清楚，当我考虑浏览器证书如何在我接受服务器证书的情况下工作时，它完全有意义，同时服务器识别我的证书（身份），甚至在更酷的 Firefox 中，因为它允许我选择要出示的证书。

通过代码，我依赖于使用，`Keystore.load(FileInputStream)`因此我在构建我的`SSLSocketFactory`（apache）之前实际上选择了要使用的信任和密钥库。

所以一切都很好，但从商业角度来看，这就是复杂性，我的 web 应用程序在任何给定时间都支持 N-Identities。这些身份甚至可以在单个会话中切换。我在这里指定身份是因为这些身份可能与托管站点具有不同的*privateKey* + *cert*合同。从某种意义上说，它们的有效性（例如有效期至 350 天）会有所不同，并且*RDN*（例如`CN=Foo, OU=Foo`，等）肯定会有所不同。

所以我的第一次尝试是创建一个巨大的密钥库并在那里导入所有东西——只要它们有唯一的别名。起初这没问题，但是对于每个具有新合同的新主机，必须再次重新加载不同的密钥，现在我遇到了别名映射问题。

所以这是另一种选择，我正在考虑为每个身份创建单独的文件存储路径。所以本质`IdentityA`上去去去去`D:\security\<b>A</b>\keystore.jks`等等`B`等等。`A`和`B`的附加私钥可以加载到各自的密钥库中。当然，所有身份的信任库都是相同的，但它们的密钥库将在需要时进行查找和加载。

我不能 100% 确定我所采取的方向是否是处理这些情况的最佳方式，但我想从其他很可能已经遇到类似情况的人那里获得一些意见。

# video - 你可以在 C# 中使用 Elgato 的 HDMIComponent Game Capture HD 作为视频输入设备吗？

> ID：14370125
> 
> 赞同：3
> 
> 时间：2013-01-17T00:03:44.697
> 
> 标签：video, video-streaming, video-capture

我们想知道是否可以从 Elgato 的 Game Capture HD（或类似的东西——型号/品牌无关紧要）中捕获视频流，并使用 C# 在窗口中获取它。除了它自己的软件，我们还没有找到任何关于将该产品与其他任何东西一起使用的信息，我们也没有找到任何其他可以捕获这种东西的硬件。

同样，我们的目标只是让具有 Component Out 的设备出现在屏幕上的窗口中，仅此而已。没有录音，没有屏幕截图，没有覆盖，什么都没有。只是纯粹的“现场”视频。

现在已经找了几个月但一无所获，所以我想我会把它扔给 SO 社区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-19T20:52:02.913

我知道这是一个老问题，但万一其他人偶然发现它，在 C# 中使用来自 Elgato 采集卡的视频流和 DirectShow 非常容易。这是一个创建简单图表并预览 Elgato 视频流的示例。

```
using DirectShowLib;

DsROTEntry rot; //Used for remotely connecting to graph

IFilterGraph2 graph;
ICaptureGraphBuilder2 captureGraph;
IBaseFilter elgatoFilter;
IBaseFilter smartTeeFilter;
IBaseFilter videoRendererFilter;
Size videoSize;

//Set the video size to use for capture and recording
videoSize = new Size(1280, 720);

//Initialize filter graph and capture graph
graph = (IFilterGraph2)new FilterGraph();
captureGraph = (ICaptureGraphBuilder2)new CaptureGraphBuilder2();
captureGraph.SetFiltergraph(graph);
rot = new DsROTEntry(graph);

//Create filter for Elgato
Guid elgatoGuid = new Guid("39F50F4C-99E1-464A-B6F9-D605B4FB5918");
Type comType = Type.GetTypeFromCLSID(elgatoGuid);
elgatoFilter = (IBaseFilter)Activator.CreateInstance(comType);
graph.AddFilter(elgatoFilter, "Elgato Video Capture Filter");

//Create smart tee filter, add to graph, connect Elgato's video out to smart tee in
smartTeeFilter = (IBaseFilter)new SmartTee();
graph.AddFilter(smartTeeFilter, "Smart Tee");
IPin outPin = GetPin(PinDirection.Output, "Video", elgatoFilter);
IPin inPin = GetPin(PinDirection.Input, smartTeeFilter);
graph.Connect(outPin, inPin);

//Create video renderer filter, add it to graph, connect smartTee Preview pin to video renderer's input pin
videoRendererFilter = (IBaseFilter)new VideoRenderer();
graph.AddFilter(videoRendererFilter, "Video Renderer");
outPin = GetPin(PinDirection.Output, "Preview", smartTeeFilter);
inPin = GetPin(PinDirection.Input, videoRendererFilter);
graph.Connect(outPin, inPin);

//Render stream from video renderer
captureGraph.RenderStream(PinCategory.Preview, MediaType.Video, videoRendererFilter, null, null);

//Set the video preview to be the videoFeed panel
IVideoWindow vw = (IVideoWindow)graph;
vw.put_Owner(videoFeed.Handle);
vw.put_MessageDrain(this.Handle);
vw.put_WindowStyle(WindowStyle.Child | WindowStyle.ClipSiblings | WindowStyle.ClipChildren);
vw.SetWindowPosition(0, 0, 1280, 720);

//Start the preview
mediaControl = graph as IMediaControl;
mediaControl.Run();

private IPin GetPin(PinDirection pinDir, IBaseFilter filter)
{
    IEnumPins epins;
    int hr = filter.EnumPins(out epins);
    if (hr < 0)
        return null;
    IntPtr fetched = Marshal.AllocCoTaskMem(4);
    IPin[] pins = new IPin[1];
    epins.Reset();
    while (epins.Next(1, pins, fetched) == 0)
    {
        PinInfo pinfo;
        pins[0].QueryPinInfo(out pinfo);
        bool found = (pinfo.dir == pinDir);
        DsUtils.FreePinInfo(pinfo);
        if (found)
            return pins[0];
    }
    return null;
}

private IPin GetPin(PinDirection pinDir, string name, IBaseFilter filter)
{
    IEnumPins epins;
    int hr = filter.EnumPins(out epins);
    if (hr < 0)
        return null;
    IntPtr fetched = Marshal.AllocCoTaskMem(4);
    IPin[] pins = new IPin[1];
    epins.Reset();
    while (epins.Next(1, pins, fetched) == 0)
    {
        PinInfo pinfo;
        pins[0].QueryPinInfo(out pinfo);
        bool found = (pinfo.dir == pinDir && pinfo.name == name);
        DsUtils.FreePinInfo(pinfo);
        if (found)
            return pins[0];
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:42:06.240

查找已注册的视频捕获 DirectShow 过滤器，您可以通过其 GUID 加载它。它会在安装 Game Capture HD 1.2.1 时安装。如有问题，请联系 Elgato 支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T14:47:29.827

看看[这个](https://github.com/elgatosf/gamecapture/tree/master/VideoCaptureFilterSample)Github 项目。它似乎展示了如何在 c++ DirectShow 应用程序中使用 Elgato 的 Game Capture HD 作为捕获设备。同样的方法应该适用于 ac# 项目。

# python-2.7 - PyInstaller 2.0 TypeError: compile() 预期字符串没有公牛字节

> ID：14370128
> 
> 赞同：3
> 
> 时间：2013-01-17T00:04:22.453
> 
> 标签：python-2.7, typeerror, pyinstaller

背景：

*   Mac OSX 10.7.5
*   Python 2.7.3
*   PyInstaller 2.0

我正在尝试使用 PyInstaller 将一个简单的脚本制作成一个可执行文件。但是，每次我尝试运行`pyinstaller.py`（当然是在导航到 pyinstaller 文件夹之后）我都会收到一个错误：

```
TypeError: compile() expected string without null bytes 
```

这是[完整的控制台输出](http://pastebin.com/R1RDPMB8)和[脚本本身](http://pastebin.com/t4t7MjqQ)。有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T02:41:28.183

I got the same error. I have just found this link ([http://www.gossamer-threads.com/lists/python/python/821709](http://www.gossamer-threads.com/lists/python/python/821709)) and your doubt here about this error.

I have tried to install cx_freeze ([https://pypi.python.org/pypi/cx_Freeze/4.3.1](https://pypi.python.org/pypi/cx_Freeze/4.3.1)) but I got the error:

```
pip install cx_freeze

error: option --single-version-externally-managed not recognized 
```

I do not know if one lib uses the other..

# linux - 停止执行在 Linux 服务器端运行的程序

> ID：14370132
> 
> 赞同：-1
> 
> 时间：2013-01-17T00:04:30.973
> 
> 标签：linux

我正在使用以下命令在 Linux 服务器中运行我的程序：

```
$  nohup <your_script> & 
```

它一直按照我的意愿运行。但我想阻止它。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:12:53.093

*使用ps*获取进程的 pid ，然后运行*​​kill*：

```
Kill -9 pid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T00:15:17.747

找到进程ID，然后杀死进程：

```
ps aux | grep <your_script> 
```

第二个数字是您的 PID，取该数字并将其传递给`kill`：

```
kill -9 <PID> 
```

或者，您也可以使用`killall`：

```
killall <your_script> 
```

# bash - 有没有办法在 Bash 脚本中创建键值对？

> ID：14370133
> 
> 赞同：100
> 
> 时间：2013-01-17T00:05:05.823
> 
> 标签：bash, shell, associative-array

我正在尝试使用 Bash 脚本创建键值对字典。我正在尝试使用这个逻辑：

```
declare -d dictionary
defaults write "$dictionary" key -string "$value" 
```

... where`$dictionary`是一个变量，但这不起作用。

有没有办法在 Bash 脚本中创建键值对？

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2013-01-17T01:54:08.247

在 bash 版本 4 中引入了关联数组。

```
declare -A arr

arr["key1"]=val1

arr+=( ["key2"]=val2 ["key3"]=val3 ) 
```

arr 数组现在包含三个键值对。但是，Bash 可以用它们做的事情相当有限，没有排序或弹出等。

```
for key in ${!arr[@]}; do
    echo ${key} ${arr[${key}]}
done 
```

将遍历所有键值并将它们回显。

**注意：**由于其 GPLv3 许可证，Bash 4 不随 Mac OS X 一起提供；你必须下载并安装它。有关更多信息，请参见[此处](https://stackoverflow.com/questions/6047648/bash-4-associative-arrays-error-declare-a-invalid-option)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-05-16T14:28:57.573

如果你可以使用一个简单的分隔符，一个非常简单的 oneliner 是这样的：

```
for i in a,b c_s,d ; do 
  KEY=${i%,*};
  VAL=${i#*,};
  echo $KEY" XX "$VAL;
done 
```

特此`i`填充有 和 之类的字符`"a,b"`序列`"c_s,d"`。每个用空格分隔。之后`do`我们使用[参数替换](http://tldp.org/LDP/abs/html/parameter-substitution.html)来提取逗号之前的`,`部分和之后的部分。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-07-22T15:10:22.980

在 bash 中，我们使用

```
declare -A name_of_dictonary_variable 
```

以便 Bash 理解它是一本字典。

例如，您想创建`sounds`字典，

```
declare -A sounds

sounds[dog]="Bark"

sounds[wolf]="Howl" 
```

在哪里`dog`和`wolf`是`"keys"`和`Bark`并且`Howl`是`"values"`。

您可以使用以下方式访问所有值：`echo ${sounds[@]}`或`echo ${sounds[*]}`

您只能使用以下方式访问所有密钥：`echo ${!sounds[@]}`

如果您想要特定键的任何值，您可以使用：

`${sounds[dog]}`

这将为您`Bark`提供键 ( ) 的值 ( `dog`)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-04T14:03:50.943

对于持久键/值存储，您可以使用[https://github.com/damphat/kv-bash](https://github.com/damphat/kv-bash)`kv-bash`提供的键/值数据库的纯 bash 实现

**用法**

```
git clone https://github.com/damphat/kv-bash
source kv-bash/kv-bash 
```

**尝试创建一些永久变量**

```
kvset myName  xyz
kvset myEmail xyz@example.com

#read the varible
kvget myEmail

#you can also use in another script with $(kvget keyname)
echo $(kvget myEmail) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-04-16T23:26:35.557

```
Using an example above this is what I did

#!/bin/sh
lookup_vht_index() {
for i in VHT20,0 VHT40,1 VHT80,2 VHT160,3 ; do
  KEY=${i%,*};
  VAL=${i#*,};
#  echo $KEY" XX "$VAL;
  [ "$1" = "$KEY" ] && echo $VAL
done
}

lookup_vht_name() {
for i in 0,VHT20 1,VHT40 2,VHT80 3,VHT160 ; do
  KEY=${i%,*};
  VAL=${i#*,};
#  echo $KEY" XX "$VAL;
  [ "$1" = "$KEY" ] && echo $VAL
done
}

echo "VHT20="$(lookup_vht_index "VHT20")
echo "2="$(lookup_vht_name 2) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-11T17:32:01.360

`sh`在不支持的旧 bash （或 in ）中`declare -A`，可以使用以下样式来模拟键/值

```
# key
env=staging

# values
image_dev=gcr.io/abc/dev
image_staging=gcr.io/abc/stage
image_production=gcr.io/abc/stable

img_var_name=image_$env

# active_image=${!var_name}
active_image=$(eval "echo \$$img_var_name")

echo $active_image 
```

# c# - 用 char 调用函数**

> ID：14370136
> 
> 赞同：1
> 
> 时间：2013-01-17T00:05:16.417
> 
> 标签：c#, unsafe

有一个dll，其中包含该函数。

```
extern "C" __ declspec (dllexport) int iRun (int argv, char ** argc) 
```

在 C# 项目中我连接 dll 和实际问题。有可能以及如何初始化变量 char **？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:14:57.067

```
[DllImport("Your.dll")]
internal static extern Int32 iRun(Int32 argv, out IntPtr argc);

IntPtr argc;
Int32 result = iRun(argv, out argc);
String argcString = Marshal.PtrToStringAnsi(argc); 
```

查看[Marshal.PtrToStringAnsi](http://msdn.microsoft.com/en-us/library/7b620dhe.aspx)方法参考。

# c# - System.NullReferenceException - 但调试器显示值为非空

> ID：14370137
> 
> 赞同：3
> 
> 时间：2013-01-17T00:05:16.937
> 
> 标签：c#, visual-studio, debugging

我正在撰写有关插件架构的研究论文，并且正在尝试重新创建[此](http://www.codeproject.com/Articles/4691/Plugin-Architecture-using-C)代码。现在我一切正常，我的 dll 文件位于正确的目录中，但是当我运行我的代码时，我得到一个 System.NullReferenceException。在我看来，这不是一个不常见的例外，但有一些奇怪的地方。通常，当我看到这个异常时，我会添加几个断点并查看它在哪里中断，这就是我所做的，然后我发现，在抛出异常的点，对象不为空！有人可以解释一下吗？

这是我要运行的代码：

```
 string args = Path.GetFileNameWithoutExtension(file);

            Type oType = null;
            try
            {
                Assembly asm = Assembly.LoadFile(file);

                if (asm == null) return;
                Type[] types = asm.GetTypes();
                foreach (Type t in types)
                {
                    // CHECK IF CURRENT TYPE IMPLEMENTS INTERFACE IPlugin
                    if (typeof(IPlugin).IsAssignableFrom(t))
                    {
                        IPlugin plugin = (IPlugin)Activator.CreateInstance(t);
                        plugin.Host = this;
                        plugins.Add(plugin);
                    }
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            } 
```

这是抛出的异常： ![例外](../Images/d7fc983d0f00a3e0fbfd921d77916761.png)

不为空的对象：

![物体](../Images/65541bb4e211b51ba8a8e424567af01d.png)

还有一件事。我认为这可能与尚未初始化的“this”有关，但我不知道在构造函数完成后如何调用此方法。我尝试使用各种事件来调用我的函数，但它们并没有使任何事情变得更好。

[编辑]

主机属性：

```
// Register the plugin if host is set
    public IPluginHost Host { 
        get
        {
            return host;
        }
        set 
        { 
            host = value;
            host.Register(this); 
        } 
    } 
```

[另一个编辑] 显然代码在 plugins.Add(plugin) 行中中断了！

```
public bool Register(IPlugin plugin)
    {
        plugins.Add(plugin);
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:23:52.830

TargetSite 被列为`Boolean Register(Plugin_api.Plugin)`，所以这就是引发 NullReferenceException 的地方。在您的方法中设置断点，`plugins.Add`您的内部支持列表似乎为空，而不是您尝试放入其中的插件:)

`Edit:`在看到您的更新后，我所看到的插件似乎都是 Null。插件简单`List`吗？还是自定义类？添加是做什么的？在该寄存器行中设置一个断点并查看它的作用。如果您通过静态/全局对象初始化插件，则可能还会出现 Heisenbug（由于调试器会更改应用程序的状态而不会出现在调试器下的错误），但这实际上只是一个猜测。

# javascript - 如何构造特定时间的数据以便可以找到最近的点？

> ID：14370141
> 
> 赞同：2
> 
> 时间：2013-01-17T00:05:41.080
> 
> 标签：javascript, function, data-structures

这有点难以用单行问题来表达，但我正在寻找一些建议/最佳实践来构建数据和用 Javascript 编写函数。

我有几个项目会定期更改状态。我的数据包含 itemID、时间戳和状态。我目前将它构建为一个对象数组（对于每个项目），具有包含时间戳和状态的历史优先级。（见下文）。

我正在寻找一个函数，它允许我使用最近的过去更新在给定时间轻松获取每个对象的状态。我不确定我的数据结构是否允许这样做，或者如果允许，如何编写函数。（对于这个例子，我将把我的时间戳缩短为一个 4 位数字）

```
 var items = [
      { id: 1,
        history: {1234: 'open', 1256: 'in-use', 1289: 'reset', 1293: 'open'},
      { id: 2,
        history: {1230: 'open', 1290: 'in-use'},
      { id: 3,
        history: {1238: 'open', 1241: 'in-use', 1251: 'reset'}
 ] 
```

我希望能够拥有这样的功能：

```
 getStatus(1260); 
```

然后回来

```
 {1: 'in-use', 2: 'open', 3: 'reset'} 
```

每个id，其状态是根据查询时间之前的最近历史记录传入的。

我完全不依赖这个数据结构。我还尝试让历史记录包含时间和状态的对象数组，但这意味着我每次都必须遍历整个数组。我最大的问题是我的头脑正在推动我使用 SQL 方法来执行此操作，但我被困在客户端 Javascript 中......

我的问题：什么是最好的数据结构？以及我将如何编写我的 getStatus() 函数？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:16:21.477

> 我还尝试让历史记录包含时间和状态的对象数组，但这意味着我每次都必须遍历整个数组。

如果您对数组进行了排序，则不会，因为您可以直接访问最近的日期。您还可以使用二进制搜索来获取特定时间戳的状态。对于您当前拥有的对象，您始终必须枚举所有属性以找到最佳匹配。

```
var items = [
  { id: 1,
    history: [
      { timestamp: 1234, status: 'open'},
      { timestamp: 1256, status: 'in-use'},
      { timestamp: 1289, status: 'reset'},
      { timestamp: 1293, status: 'open'}
    ]
  },
  …
];
function index(arr, compare) { // binary search, with custom compare function
    var l = 0,
        r = arr.length - 1;
    while (l <= r) {
        var m = l + ((r - l) >> 1);
        var comp = compare(arr[m]);
        if (comp < 0) // arr[m] comes before the element
            l = m + 1;
        else if (comp > 0) // arr[m] comes after the element
            r = m - 1;
        else // this[m] equals the element
            return m;
    }
    return l-1; // return the index of the next left item
                // usually you would just return -1 in case nothing is found
}
// example:
function insertItem(history, timestamp, status) {
    var i = index(history, function(item) {
        return item.timestamp - timestamp;
    });
    history.splice(i+1, 0, {timestamp: timestamp, status: status});
}

function getStatus(time) {
    var result = {};
    function comparefn (item) {
        return item.timestamp - time;
    }
    for (var i=0; i<items.length; i++) {
        var pos = index(items[i].history, comparefn);
        result[items[i].id] = pos == -1
          ? undefined
          : items[i].history[pos].status;
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:21:24.017

你可以使用一个循环：

```
// for each entry:
var n2 = n;
while (typeof items[n2] == "undefined" && n2 >= -1) {
    n2--;
}
if (n != -1) {returnedArray[idBeingProcessed] = items[n2];}
else {alert("Error handling here");}
// repeat for each item (id 1, id 2...) 
```

如果找到答案，这将停止。它可能效率低下，但是嘿，它有效:-)

`history`此外，如果适用，请考虑为您的对象使用数组。

# r - 减小使用 seewave 创建的频谱图的大小

> ID：14370142
> 
> 赞同：1
> 
> 时间：2013-01-17T00:05:44.933
> 
> 标签：r, graphics, size, spectrogram

我正在尝试可视化音频波的光谱表示并将其导出为出版质量格式。似乎使用 R 执行此操作的最简单方法是使用包[seewave](http://cran.r-project.org/web/packages/seewave/index.html)。在下面的示例中，我创建了 0.5 秒的白噪声，生成`quartz()`窗口，并将白噪声可视化为`spectro`：

```
require(seewave)
n <- noisew(d=0.5, f=22050)
quartz(width=6, height=6)
spectro(n,f=22050) 
```

然后我手动保存 PDF，它会创建 1.7MB 的文件。它的质量非常好，实际上——太好了。所有这些精细的光谱色托盘级别都以矢量绘制。因此，如果我将它嵌入到 LaTeX 中，它会严重减慢一切。如果我在 Illustrator 中打开它并想要进行一些调整 - 它会严重减慢一切。但是我不能把它做成PNG或其他位图格式，因为质量太低了，我无法在Illustrator中做一些收尾工作。

有什么建议可以减小此图形的大小，但仍保持矢量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:13:47.097

为什么您认为将其导出为位图会使质量过低？您是否知道可以使用设备`res=`选项以所需的任何分辨率导出它`png`？300 或 600-ppi PNG 的打印质量已经足够高，对于大多数计算机应用程序来说绰绰有余。

# php - 使用 PHP 驱动程序从过去的日期创建 MongoDB ObjectID

> ID：14370143
> 
> 赞同：6
> 
> 时间：2013-01-17T00:05:45.120
> 
> 标签：php, mongodb

我必须将大量数据从 MySQL 导入 MongoDB，并且我想使用 ObjectID 中的时间戳，而不是将其存储在单独的键/值中（因为它在现有数据中）。为此，我需要为具有过去日期的现有数据创建一个 ObjectID。我还需要使用 PHP 驱动程序来执行此操作。我读过 Python、Java 和 Node.JS 中可能有一种方法可以做到这一点，所以我认为 PHP 中可能有一种等效的方法。

如果这是可能的 - 这样做安全吗？这意味着我会遇到重复或无效的 ObjectID 的问题吗？谢谢。

在 Node.JS 中：

```
var timestamp = Math.floor(new Date().getTime()/1000);
var objectId = new ObjectID(timestamp); 
```

以下来自：[MongoDB使用时间戳排序](https://stackoverflow.com/questions/10960922/mongodb-using-timestamps-to-sort)

在 Python 中：

```
gen_time = datetime.datetime(2010, 1, 1)
dummy_id = ObjectId.from_datetime(gen_time) 
```

在 Java 中：

```
Date d = new Date(some timestamp in ms);
ObjectId id = new ObjectId(d) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T13:23:21.443

目前，PHP 驱动程序对此没有内置功能，另一个答案提到的 __set_state() 仅用于对 ID 进行会话反序列化，并且不允许您通过特定组件创建它。

您必须执行以下操作才能自动创建 ID：

```
<?php
function createId( $yourTimestamp )
{
    static $inc = 0;

    $ts = pack( 'N', $yourTimestamp );
    $m = substr( md5( gethostname()), 0, 3 );
    $pid = pack( 'n', posix_getpid() );
    $trail = substr( pack( 'N', $inc++ ), 1, 3);

    $bin = sprintf("%s%s%s%s", $ts, $m, $pid, $trail);

    $id = '';
    for ($i = 0; $i < 12; $i++ )
    {
        $id .= sprintf("%02X", ord($bin[$i]));
    }
    return new MongoID($id);
}

var_dump( createId( time() ) );
?> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T13:18:11.310

如果您仅使用 MongoId 进行比较，例如选择日期范围内的所有记录，则不需要完全有效的 id。所以你可以简单地做：

```
$id = new \MongoId(dechex($timestamp) . str_repeat("0", 16)); 
```

请确保永远不要插入此 id 并将其用于 $gte/$gt/$lt/$lte 查询。

**编辑**

我的错，上面的代码片段可以使用大约 1979 年之前的日期，因为`dechex($timestamp)`它并不总是返回 8 个字符，所以更好的代码片段是：

```
$id = new \MongoId(sprintf("%08x%016x", $timestamp, 0)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:08:34.123

这可能会产生问题，因为使 objectid 唯一的因素之一是时间部分，但是它应该在同一时间增加多个插入的最后一个字节（左右）。

看起来有一些允许使用一些参数创建 ObjectId 的运动，事实上它几乎在这里谈论它：http: [//php.net/manual/en/mongoid.set-state.php](http://php.net/manual/en/mongoid.set-state.php)

> 理论上，用于创建新 id 的属性数组。但是，由于 MongoId 实例没有属性，因此不使用它。

但是没有办法，atm，我相信无需编写自己的`ObjectId`生成器就可以实现其他语言可以做的事情。

# git - Git 通过哈希获取特定的提交

> ID：14370157
> 
> 赞同：31
> 
> 时间：2013-01-17T00:07:01.570
> 
> 标签：git

Git 允许从任何给定的远程和引用中获取，例如

```
git fetch <remote-url> <reference> 
```

这样那些给定的提交就可以使用，而无需添加遥控器或创建分支。

然而，这仅适用于引用，如分支名称或标签，但不适用于特定的哈希，因此不直接在任何地方引用的提交。

有没有办法从远程获取特定的提交？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2020-06-19T04:15:02.250

今天我试过：

```
git fetch origin <commit-hash> 
```

它就像一个魅力！(git 版本 2.20.1)

只要确保`<commit-hash>`是全长参考

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-07-16T05:30:08.723

请参阅“[从远程 git 存储库中提取特定提交](https://stackoverflow.com/a/30701724/6309)”：
使用 Git 2.5（2015 年 7 月），您将能够：

```
git fetch --depth=1 <a/remote/repo.git> <full-lenght SHA1>
git cat-file commit $SHA1 
```

如果 SHA1 可以从远程 repo 的分支提示之一“访问”，那么您可以获取它。

**注意事项**：

*   不过，您需要一个 Git 2.5 远程 repo*服务器*，它将处理`uploadpack.allowReachableSHA1InWant`配置（并且您需要将该配置设置为`true`，以允许单次提交获取）。
*   而且，如[crgarridos](https://stackoverflow.com/users/1797950/crgarridos)的[回答](https://stackoverflow.com/a/62463160/6309)所示，您需要完整的 SHA1，并且您不能使用[`git rev-parse`](https://git-scm.com/docs/git-rev-parse)，因为您没有所有的提交，正如[Jim Hurne](https://stackoverflow.com/users/106189/jim-hurne)在[评论](https://stackoverflow.com/questions/14370157/git-fetch-a-specific-commit-by-hash/31445973#comment119563406_31445973)中所指出的那样。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-17T00:14:02.590

不。根据手册，`git fetch`想要一个 refspec，最简单的形式是 ref，而裸 SHA-1 不是 ref。即，提交必须在遥控器上有一个名称（分支，标签），您才能使用`fetch`它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-16T15:15:38.620

`git fetch [remote] [sha] && git checkout FETCH_HEAD` will allow you to checkout a commit that is on the remote; even if that sha is not yet merged (like in a Gerrit environment).

or... `git fetch [remote] [sha] && git cherry-pick FETCH_HEAD` if you wish to cherry-pick it instead.

Examples:

*   `git fetch origin d8a9a9395bb0532a0498f800e38ef5e60dfb173f && git checkout FETCH_HEAD`
*   `git fetch origin d8a9a9395bb0532a0498f800e38ef5e60dfb173f && git cherry-pick FETCH_HEAD`

# wpf - 如何在 WPF 中迭代 LINQ 数据集并将计数作为查询的一部分？

> ID：14370158
> 
> 赞同：1
> 
> 时间：2013-01-17T00:07:01.977
> 
> 标签：wpf, linq, count, loops

我是 C# 新手，这完全让我难过。我有一个带有许多文本框的 WPF 表单，这些文本框用于在空间上表示`PropertyZone`地图的每个区域 ( ) 所需的服务数量。

我可以编写一个 LINQ 查询，将我所有必要的数据带回一个`DataGrid`.，但我完全无法访问除此之外的数据。我试图将数据转储到`DataTable`中，但无济于事。我可以看到 中的数据`DataGrid`，但我不知道如何遍历行。我不在乎是否使用`DataGrid`,`DataTable`或`Collection`任何其他方法来访问数据。绊倒 a`Collection`似乎是一个很好的解决方案，但使用`inner join`s 和 a`count()`似乎是我的失败。

有两列数据正在生成：

```
Column1=PropertyZone 
Column2=CountOfServicesInThatPropertyZone 
```

我想查看`Column1` `Row1`并基于此值，将值转储到与值`Column2` `Row1`同名的文本框中，`Column1` `Row1`并对两列中的每一行中的所有行执行此操作。

这是有效的 LINQ 查询，但我完全无法访问数据。

```
var query =
      from o in con.ORDER_LINE_TABLEs
      join p in con.PROPERTY_TABLEs on o.PropertyNumber equals p.PropertyNumber 
      where o.ServiceNumber == 2
      group o by p.PropertyZone into g
      select new { PropertyZone = g.Key, CountOfServicesInThatPropertyZone = g.Count() };
ServiceDataGrid.ItemsSource = query; 
```

我希望这很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:46:54.477

如果您特别想访问某个项目，则必须运行查询并将结果存储在某处，例如在列表中。然后，您可以将 DataGrid 绑定到同一个列表：

```
var query =
  from o in con.ORDER_LINE_TABLEs
  join p in con.PROPERTY_TABLEs on o.PropertyNumber equals p.PropertyNumber 
  where o.ServiceNumber == 2
  group o by p.PropertyZone into g
  select new { PropertyZone = g.Key, CountOfServicesInThatPropertyZone = g.Count() };

var myList = query.ToList();

ServiceDataGrid.ItemsSource = myList;

var row1Col1Value = myList[0].PropertyZone;
var row1Col2Value = myList[0].CountOfServicesInThatPropertyZone; 
```

# cakephp - CakePHP - 如何将 html css helper 链接到不同的文件夹

> ID：14370159
> 
> 赞同：3
> 
> 时间：2013-01-17T00:07:09.170
> 
> 标签：cakephp

目前我正在使用它在我的 CakePHP 项目中加载 css。

```
echo $this->Html->css('jquery-ui',null,array('inline' => false)); 
```

那是假设我将我的 css 文件放在 css 文件夹中。
但是，我现在正在考虑将 js 库所需的 css 移动到 js 文件夹中。（即在 js/lib/jquery-ui.js 和 js/lib/jquery-ui.css 中）。这样我就不必跟踪具有相同结构的 2 个文件夹。

如何更改 CakePHP 的 css 助手指向不同文件夹的位置？
或者这不是我想要做的一个好习惯。（即将插件 css 移动到与 js 相同的文件夹中）

谢谢，
三通

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T00:32:15.960

从[API](http://api.cakephp.org/2.5/source-class-HtmlHelper.html#375-476)：

> 如果`$path`以 '/' 为前缀，则路径将相对于您的应用程序的 webroot。否则，路径将相对于您的 CSS 路径

所以你会这样做：

```
echo $this->Html->css('/js/lib/jquery-ui',null,array('inline' => false)); 
```

# java - runOnUiThread 上的空指针异常

> ID：14370161
> 
> 赞同：0
> 
> 时间：2013-01-17T00:07:23.120
> 
> 标签：java, android

我收到用户的错误报告，但我不知道我的代码有什么问题。日志是这样的：

```
java.lang.NullPointerException
at com.laurenswuyts.find.it.MainActivity$LoadPlaces$1.run(MainActivity.java:299)
at android.app.Activity.runOnUiThread(Activity.java:4244)
at com.laurenswuyts.find.it.MainActivity$LoadPlaces.onPostExecute(MainActivity.java:293)
at com.laurenswuyts.find.it.MainActivity$LoadPlaces.onPostExecute(MainActivity.java:1)
at android.os.AsyncTask.finish(AsyncTask.java:602)
at android.os.AsyncTask.access$600(AsyncTask.java:156)
at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4697)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
at dalvik.system.NativeStart.main(Native Method) 
```

这是关于这段代码的：

```
protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed Places into LISTVIEW
                     * */
                    // Get json response status
                    String status = nearPlaces.status;

                    // Check for all possible status
                    if(status.equals("OK")){
                        // Successfully got places details
                        if (nearPlaces.results != null) {

                            // loop through each place
                            for (Place p : nearPlaces.results) { 
```

谁能帮我？我真的卡在这个了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:23:41.493

日志告诉你

```
(MainActivity.java:299) 
```

这意味着 MainActivity 的第 299 行

因为这条线是：

```
String status = nearPlaces.status; 
```

这只是意味着 nearPlaces 为空......我们无能为力来解决这个问题 ;-)

你应该用一些数据初始化它！

# api - 四方签到推送中的类别已部分翻译

> ID：14370163
> 
> 赞同：0
> 
> 时间：2013-01-17T00:07:27.747
> 
> 标签：api, push, real-time, foursquare

我正在使用[foursquare Real-Time API](https://developer.foursquare.com/overview/realtime)，现在我有一个关于推送签入的JSON 的问题。更准确地说，它是关于场地类别的类别名称。我的 iPhone 语言设置是德语，因此foursquare 应用程序使用德语布局。在四方推送到我的服务器时，字段 name、pluralName 和 shortName 被翻译为德语，而字段 parents 中的类别以英语显示（参见下面的示例）。

在我看来，使用该类别的翻译是没有意义的（尤其是当只翻译一部分时:-)）。您认为这应该是 API 的常规行为吗？最后，很难使用类别，因为 ID 仅嵌入顶级类别。

如果有人有提示或可以确认，那就太好了。

```
{
   …[snip]…,
    "categories": [
        {
            "icon": "https://foursquare.com/img/categories/building/home.png", 
            "id": "4bf58dd8d48988d103941735", 
            "name": "Zuhause (privat)", 
            "pluralName": "Zuhause (privat)", 
            "shortName": "Zuhause",
            "parents": [
                "Residences"
            ],
            "primary": true
        }
    ],
   …[snip]…
} 
```

与未翻译的（英文）：

```
{
   …[snip]…,
    "categories": [
        {
            "icon": "https://foursquare.com/img/categories/building/home.png", 
            "id": "4bf58dd8d48988d103941735", 
            "name": "Home (private)", 
            "pluralName": "Homes (private)", 
            "shortName": "Home",
            "parents": [
                "Residences"
            ],
            "primary": true
        }
    ],
   …[snip]…
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:32:30.993

这是由使用未版本化的 API 调用引起的。

您对 API 的调用应支持表单的版本参数`&v=20130115`（日期），以确保您接收到最新的内容。否则，您将收到来自旧版本 API 的内容。

在最新版本的 API 中，类别 JSON 中没有 parent 属性，您应该使用场所/类别 API 调用（已完全翻译）来构建您的类别层次结构。

# jquery - jQuery在if语句中重置setInterval

> ID：14370164
> 
> 赞同：0
> 
> 时间：2013-01-17T00:07:27.830
> 
> 标签：jquery, if-statement, setinterval

我有一个使用 setInterval 运行循环的函数。函数 empMove 每次将 margin-top 减少 -182px。我在其中有另一个 if 语句来检查它何时需要结束。在这里，我使用 clearInterval 停止循环，并将 margin-top 设置回零。

问题是它停止但不会再次重新启动。

抱歉，我没有粘贴整个代码，但这会很大并且会分散问题的焦点。

```
// if statements to move carousel up
$carouselNum = $('.carousella').length;

$loopNum = $($carouselNum * -182);

if($carouselNum  > 1){

    // function empMove, the '-=' allows the -margin-top to run every time. Without this it will set the margin-top to the same value every loop
    var myLoop = setInterval(empMove, 2500);
    function empMove() {
        $('.emp-wrap').css('margin-top', '-=182');
        console.log('loop start');
        var marginTop = $('.emp-wrap').css('margin-top');
        console.log(marginTop);
        if(marginTop = $loopNum){
            // do something
            clearInterval(myLoop);
            $('.emp-wrap').delay(2500).css('margin-top', '0');
            console.log('loop stops');
            };
    };    

}
else{
    // do something
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:11:48.883

你需要再打电话`setInterval`。

```
myLoop = setInterval(empMove, 2500); 
```

既然，`clearInterval`会毁了它。

从技术上讲，您可以在将`margin-top`back 设置为`0`.

```
clearInterval(myLoop);
$('.emp-wrap').delay(2500).queue(function(next){
  $('.emp-wrap').css('margin-top', '0');
  myLoop = setInterval(empMove, 2500);
  next();
}); 
```

`empMove`但是，如果您修改为减少边距或将其重置为`0`取决于`if`语句，它会更清晰。

```
var $empwrap = $('.emp-wrap');
var myLoop = setInterval(function() {
  var marginTop = $empwrap.css('margin-top');
  if (marginTop >= loopNum) {
    $empwrap.css('margin-top', '0');
  } else {
    $empwrap.css('margin-top', '-=182');
  }
}, 2500); 
```

**免责声明**：未经测试。

# python - 计算球面的旋转轴

> ID：14370167
> 
> 赞同：0
> 
> 时间：2013-01-17T00:07:59.223
> 
> 标签：python, vector, trigonometry, maya, pymel

我`Sphere`在 Maya 中从头开始构建，而不是使用球体顶点列表创建面，我需要制作一个平面并旋转它，使其与常规球体面匹配。

![在此处输入图像描述](../Images/52ea8f0911bb7ee7ae439674ae1a9d38.png)

我的想法是获得球体面顶点水平和垂直之间的中心角。这适用于`Y`轴，但是一旦我应用`X`旋转，面部的方向就会丢失。

在图像中，我特意在`X`轴上旋转了一个球面，以说明我需要计算哪种旋转。该实现是用 Python 编写的，因此如果需要，我可以访问所有向量方法。请注意，这个球体实现是为了另一个目的，所以设置可能看起来有点奇怪！

```
import pymel.core as pm
import pymel.core.datatypes as dt
import pymel.util as util

degrees = util.arrays.degrees
cos     = util.arrays.cos
sin     = util.arrays.sin
atan2   = util.math.atan2
acos    = util.math.acos
sqrt    = util.math.sqrt
PI      = util.arrays.pi
TWO_PI  = PI * 2

def distance(x1, y1, z1, x2, y2, z2):
    return sqrt( (x2 - x1) ** 2 + (y2 - y1) ** 2 + (z2 - z1) ** 2 )

# Sphere class
class Sphere():

# Initialise radius (float), subdivisionsAxis (int), subdivisionsHeight (int) 
def __init__(self, radius = 10, subdivisionsAxis = 8, subdivisionsHeight = 8):

    # Loop through each subdivision on y axis
    for i in range(subdivisionsHeight):

        if i == 0 or i == subdivisionsHeight - 1:

            # Store the triangle vertices's in this list
            data = self.generateSphereData(radius, subdivisionsAxis, subdivisionsHeight, i, 'triangle')

            length = len(data) / 11
            for j in range(length):
                index = j * 11
                x1 = data[index]
                y1 = data[index + 1]
                z1 = data[index + 2]
                x2 = data[index + 3]
                y2 = data[index + 4]
                z2 = data[index + 5]
                x3 = data[index + 6]
                y3 = data[index + 7]
                z3 = data[index + 8]
                # Angle y
                ay = data[index + 9]
                # Angle z
                az = data[index + 10]

                v1 = dt.FloatVector(x1, y1, z1)
                v2 = dt.FloatVector(x2, y2, z2)
                v3 = dt.FloatVector(x3, y3, z3)

                # Ignore the top and bottom triangles for now...
                # pm.polyCreateFacet( p = [ v1, v2, v3 ] )

            else:
                # Store the quads vertices's in this list
                data = self.generateSphereData(radius, subdivisionsAxis, subdivisionsHeight, i, 'quad')

                length = len(data) / 14

                for j in range(length):
                    index = j * 14
                    x1 = data[index]
                    y1 = data[index + 1]
                    z1 = data[index + 2]
                    x2 = data[index + 3]
                    y2 = data[index + 4]
                    z2 = data[index + 5]
                    x3 = data[index + 6]
                    y3 = data[index + 7]
                    z3 = data[index + 8]
                    x4 = data[index + 9]
                    y4 = data[index + 10]
                    z4 = data[index + 11]
                    # Angle y
                    ay = data[index + 12]
                    # Angle z
                    az = data[index + 13]

                    v1 = dt.FloatVector(x1, y1, z1)
                    v2 = dt.FloatVector(x2, y2, z2)
                    v3 = dt.FloatVector(x3, y3, z3)
                    v4 = dt.FloatVector(x4, y4, z4)

                    # Calculate centroid
                    cx = (x1 + x2 + x3 + x4) / 4
                    cy = (y1 + y2 + y3 + y4) / 4
                    cz = (z1 + z2 + z3 + z4) / 4

                    # Calculate the width and height

                    # Calculate dimensions for facet
                    tw = distance(x1, y1, z1, x4, y4, z4)
                    bw = distance(x2, y2, z2, x3, y3, z3)
                    w  = tw if bw < tw else bw
                    h  = distance(x2, y2, z2, x1, y1, z1)

                    # Calculate rotation of face
                    centroid = dt.FloatVector(cx, cy, cz)

                    mesh = pm.polyPlane(width=1, height=1, subdivisionsX=1, subdivisionsY=1, axis=(1, 0, 0))
                    mesh[0].setTranslation(centroid)
                    mesh[0].setRotation([0, degrees(-ay), 0])

                    pm.spaceLocator(p=v1)
                    pm.spaceLocator(p=v2)
                    pm.spaceLocator(p=v3)
                    pm.spaceLocator(p=v4)

                    # pm.polyCreateFacet( p = [ v1, v2, v3, v4 ] )

# Generate a vertex list of the spheres current subdivision height level
# Arguments: radius (float), subdivisionsAxis (int), subdivisionsHeight (int), index (int), polygonType (string) 

def generateSphereData(self, radius, subdivisionsAxis, subdivisionsHeight, index, polygonType):
    positions = []

    if polygonType == 'triangle':
        for i in range(subdivisionsAxis):

            # If were generating the top triangles we need the triangle base to 
            # Be at the previous subdivision level, so change the index to index - 1
            if index < subdivisionsHeight: 
                nextIndex = index + 1
            else:                
                nextIndex = index - 1

            if i < subdivisionsAxis - 1:
                j = i + 1
            else:
                j = 0

            # Top vertex
            r1 = radius  * sin(index * (PI / subdivisionsAxis))
            x1 = r1      * cos(i * (TWO_PI / subdivisionsAxis))
            y1 = radius  * cos(index * (PI / subdivisionsHeight))
            z1 = r1      * sin(i * (TWO_PI / subdivisionsAxis))

            # Left vertex
            r2 = radius  * sin(nextIndex * (PI / subdivisionsAxis))
            x2 = r2      * cos(i * (TWO_PI / subdivisionsAxis))
            y2 = radius  * cos(nextIndex * (PI / subdivisionsHeight))
            z2 = r2      * sin(i * (TWO_PI / subdivisionsAxis))

            # Right vertex
            x3 = r2      * cos(j * (TWO_PI / subdivisionsAxis))
            y3 = radius  * cos(nextIndex * (PI / subdivisionsHeight))
            z3 = r2      * sin(j * (TWO_PI / subdivisionsAxis))

            # Calculate angles
            ay = 0
            az = 0

            positions += [x1, y1, z1, x2, y2, z2, x3, y3, z3, ay, az]

    elif polygonType == 'quad':

        nextIndex = index + 1

        for i in range(subdivisionsAxis):

            if i < subdivisionsAxis - 1:
                j = i + 1
            else:
                j = 0

            # Bottom y
            r1 = radius * sin(index * (PI / subdivisionsAxis))
            y1 = radius * cos(index * (PI / subdivisionsHeight))

            # Top y
            r2 = radius * sin(nextIndex * (PI / subdivisionsAxis))
            y2 = radius * cos(nextIndex * (PI / subdivisionsHeight))

            # Top left vertex
            x1 = r2     * cos(i * (TWO_PI / subdivisionsAxis))
            z1 = r2     * sin(i * (TWO_PI / subdivisionsAxis))

            # Bottom left vertex
            x2 = r1     * cos(i * (TWO_PI / subdivisionsAxis))
            z2 = r1     * sin(i * (TWO_PI / subdivisionsAxis))

            # Bottom right vertex
            x3 = r1     * cos(j * (TWO_PI / subdivisionsAxis))
            z3 = r1     * sin(j * (TWO_PI / subdivisionsAxis))

            # Top right vertex
            x4 = r2     * cos(j * (TWO_PI / subdivisionsAxis))
            z4 = r2     * sin(j * (TWO_PI / subdivisionsAxis))

            # Calculate angles
            ay1 = i * (TWO_PI / subdivisionsAxis)
            ay2 = j * (TWO_PI / subdivisionsAxis)
            ay  = ay1 + ((ay2 - ay1) / 2)

            az1 = index     * (PI / subdivisionsHeight)
            az2 = nextIndex * (PI / subdivisionsHeight)
            az  = az1 + ((az2 - az1) / 2)

            positions += [x1, y2, z1, x2, y1, z2, x3, y1, z3, x4, y2, z4, ay, az]

    return positions

Sphere(20, 8, 8) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:20:15.667

好吧，伪代码。这个怎么样：

```
planeNormal = cross(plane.firstEdge, plane.secondEdge)
faceNormal = cross(face.firstEdge, face.secondEdge)

normalize(planeNormal)
normalize(faceNormal)

if dot(planeNormal, faceNormal)<0    # if they're more than 90 degrees apart
  rotate(plane, plane.firstEdge, pi) # rotate the plane 180 degrees
  planeNormal = -planeNormal

axis = cross(planeNormal, faceNormal)
angle = arccos(magnitude(axis))
normalize(axis)
rotate(plane, axis, angle) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:23:50.297

如果我正确阅读了您的问题，您想对一堆四边形和三角形应用旋转，以便它们形成球面。我相信您真正要问的是如何旋转一组四边形和三边形，以使垂直于形状中心的向量与所需点相交。所需的点是球体的中心。

让我们打破这个！这是您要执行的操作的伪代码：

```
for i,shape in enumerate(listOfShapes):
    [nc1,nc2] = normal_of_center(shape)
    R = rotationFrom2Vecs([nc1,nc2],[s,nc2])
    listOfShapes[i] = shape*R 
```

对于每个形状（一个形状只是 3 或 4 个点的列表），您计算一个垂直于该形状并以该形状的中心为中心的向量。这个向量只是两个点：[nc1,nc2]（提示 nc2：只是所讨论形状的平均坐标，nc1 是位于由形状定义的平面法线上的任何点）。

接下来我们要做的是计算这个向量和连接形状中心 (nc2) 和球体中心 (s) 的向量之间的旋转矩阵 R。 [但是我到底如何从 2 个向量计算 3x3 旋转矩阵，你可能会问自己？](https://gamedev.stackexchange.com/questions/20097/how-to-calculate-a-3x3-rotation-matrix-from-2-direction-vectors)

*最后，通过右乘法*将此旋转矩阵应用于形状，由于矩阵乘法的规则，这是唯一有效的方法。我对pymel不熟悉，我不知道它是否有矩阵乘法例程。如果不是，您将需要使用[numpy](http://www.numpy.org/)数组和矩阵，它们对于此类项目非常简单且方便。

如果您对整体想法感到困惑，我可以绘制一些快速而肮脏的图表。这是最快的方法吗？不，但它绝对是最清晰的方法。

# jquery - 使用 jQuery 选择 div 内容匹配的子元素并修改附近的其他元素

> ID：14370168
> 
> 赞同：0
> 
> 时间：2013-01-17T00:07:59.747
> 
> 标签：jquery, html, css

好的，这是基本布局。

```
<div class="products">
    <div class="product_item">
        <a href="#">
            <div class="item_title">Unique Title 1</div>
            <div class="item_price_box">
                <p class="item_price">
                    <span class="item_price_label">Price</div>
                    <span class="item_price_text">$265</div>
                </p>
            <div>
        </a>
    </div>
    <div class="product_item">
        <a href="#">
            <div class="item_title">Unique Title 2</div>
            <div class="item_price_box">
                <p class="item_price">
                    <span class="item_price_label">Price</div>
                    <span class="item_price_text">$550</div>
                </p>
            <div>
        </a>
    </div>
    <div class="product_item">
        <a href="#">
            <div class="item_title">Unique Title 3</div>
            <div class="item_price_box">
                <p class="item_price">
                    <span class="item_price_label">Price</div>
                    <span class="item_price_text">$995</div>
                </p>
            <div>
        </a>
    </div>
    ...
</div> 
```

我只需要选择包含文本“Unique Title 2”的“item_title”的“product_item”。

然后我只需要向该“product_item”添加一个类，并将一些 HTML 添加到该项目的“item_price_label”中。

将列出多达 80 个具有唯一名称的项目，与此处显示的不同。我不能直接编辑 HTML，只能通过 JavaScript。

我到目前为止：

```
 $('div:contains("Unique Title 2")').parent().parent().addClass('foo'); 
```

但不知何故，它一直将它添加到所有项目中，当我尝试注入 HTML 时，它替换了页面中的所有内容。

```
$('.foo').find('.item_price_label').html('<div class="new_stuff_here">Yay content here</div>'); 
```

有任何想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:15:01.503

您可以使用`filter`方法：

```
$('.item_title').filter(function() {
     var txt = this.textContent || this.innerText;
     return txt === "Unique Title 2";
}).closest('.product_item').addClass('foo').doOtherStuff(); 
```

请注意，您的标记无效，您正在关闭 span 元素`</div>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T00:15:31.277

你可以这样做：

```
 $('.item_title:contains("Unique Title 2")').closest('.product_item').addClass('textFound').find('.item_price_label').html('<div class="new_stuff_here">Yay content here</div>'); 
```

演示：[Jsfiddle](http://jsfiddle.net/ycTNu/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T00:16:22.773

除了上述关于 的答案之外`.filter`，您的 HTML 还需要一些修复。许多元素缺少结束标记或有错误的结束标记：

这是一个[小提琴](http://jsfiddle.net/af9cJ/)

```
<div class="products">
    <div class="product_item">
        <a href="#">
            <div class="item_title">Unique Title 1</div>
            <div class="item_price_box">
                <p class="item_price">
                    <div class="item_price_label">Price</div>
                    <div class="item_price_text">$265</div>
                </p>
          </div>
        </a>
    </div>
    <div class="product_item">
        <a href="#">
            <div class="item_title">Unique Title 2</div>
            <div class="item_price_box">
                <p class="item_price">
                    <div class="item_price_label">Price</div>
                    <div class="item_price_text">$550</div>
                </p>
          </div>
        </a>
    </div>
    <div class="product_item">
        <a href="#">
            <div class="item_title">Unique Title 3</div>
            <div class="item_price_box">
                <p class="item_price">
                    <div class="item_price_label">Price</div>
                    <div class="item_price_text">$995</div>
                </p>
          </div>
        </a>
    </div>
</div> 
```

# nginx - nginx：将单个静态 URL 映射到 PHP 文件

> ID：14370172
> 
> 赞同：5
> 
> 时间：2013-01-17T00:08:34.237
> 
> 标签：nginx, fastcgi

我有一个 WordPress 安装并运行没有问题。页面上有一个元素不是 WP 的一部分，而是我们自己的自定义 PHP 脚本。它只是用来处理表单 POST 请求并以某种方式处理它。

要求我们没有以 .php 结尾的扩展名。我的表单提交给类似的东西：

```
/places/signup.html 
```

在我的 nginx 配置中，我有这个：

```
server {
    listen       87948; # It's behind a reverse proxy
    server_name domain.com www.domain.com;

    include /etc/nginx/proxy_params;

    index index.php;
    root /opt/www/public_html;

    location /favicon.ico {
        return 404;
    }

    location / {
        try_files $uri $uri/ /index.php?$args;
    }

    location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
        expires max;
        log_not_found off;
    }

    location ~ \.php$ {
        add_header Access-Control-Allow-Origin "*";
        client_body_buffer_size 4096k;
        fastcgi_pass unix:/tmp/php5-fpm.sock;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME /opt/www/public_html/$fastcgi_script_name;
        fastcgi_param PATH_INFO $fastcgi_script_name;
        include /etc/nginx/fastcgi_params;
    }

    # LOOK HERE
    location ~ /places/signup.html {
        root                             /opt/www/custom_scripts/;
        fastcgi_pass    unix:/tmp/php5-fpm.sock;
        fastcgi_param   SCRIPT_FILENAME  /opt/www/custom_scripts/signup-processor.php;
        fastcgi_param   QUERY_STRING     $query_string;
        fastcgi_param   REQUEST_METHOD   $request_method;
        fastcgi_param   CONTENT_TYPE     $content_type;
        fastcgi_param   CONTENT_LENGTH   $content_length;
        include         fastcgi_params;
    }

} 
```

问题是：fastcgi 或 nginx（我不知道哪个）正在获取文字 URL 并在 location 块的根指令中查找它。从错误日志中：

> 2013/01/16 15:30:42 [错误] 20533#0: *4 FastCGI 在标准错误中发送：“无法打开主脚本： **/opt/www/custom_scripts/places/signup.html**（没有这样的文件或目录） " 从上游读取响应头时，客户端：66.172.31.153，服务器：domain.com，请求："POST /places/signup.html HTTP/1.1"，上游："fastcgi://unix:/tmp/php5-fpm .sock：”，主机：“www.domain.com”

我想“fastcgi_param SCRIPT_FILENAME /opt/www/custom_scripts/signup-processor.php;” 会强迫它使用那个特定的脚本吗？我猜不会？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T22:28:36.537

最后的`include`指令：

```
 include         fastcgi_params; 
```

可能有另一个`fastcgi_param`带有`SCRIPT_FILENAME`参数的指令：

```
 fastcgi_param   SCRIPT_FILENAME  /another/script/file/name; 
```

由于它位于文件的末尾，它将覆盖您的值。

如果您想保留 fastcgi_params 文件中的某些设置，但用特定的设置覆盖它们，您应该将`include`指令放在开头：

```
location ~ /places/signup.html {
    include         fastcgi_params;
    root                             /opt/www/custom_scripts/;
    fastcgi_pass    unix:/tmp/php5-fpm.sock;
    fastcgi_param   SCRIPT_FILENAME  /opt/www/custom_scripts/signup-processor.php;
    fastcgi_param   QUERY_STRING     $query_string;
    fastcgi_param   REQUEST_METHOD   $request_method;
    fastcgi_param   CONTENT_TYPE     $content_type;
    fastcgi_param   CONTENT_LENGTH   $content_length;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:00:23.003

看起来您已经有了处理 PHP 文件的指令。

不只是

```
location ~ /places/signup.html {
   root /opt/www/custom_scripts;
   try_files $uri /signup-processor.php;
} 
```

更清洁并做同样的事情？

# javascript - 是否可以压缩代码以允许多个变量而不是每个变量一行？

> ID：14370176
> 
> 赞同：0
> 
> 时间：2013-01-17T00:09:11.893
> 
> 标签：javascript

我正在使用一个小脚本，它使用以下代码将自定义选择添加到保管箱

```
if (typeof customsum1 != "undefined") { editsummAddOptionToDropdown(dropdown, customsum1); }
if (typeof customsum2 != "undefined") { editsummAddOptionToDropdown(dropdown, customsum2); }
if (typeof customsum3 != "undefined") { editsummAddOptionToDropdown(dropdown, customsum3); } 
```

等等。这可以通过添加更多行来扩展，但是由于变量具有相同的格式，有没有办法将其压缩为理论上允许无限的自定义选择，只要设置的变量遵循 customsum# 格式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T00:11:16.917

使用数组和循环：

```
var sums = [customsum1, customsum2, customsum3];

for (var i=0; i<sums.length; i++) {
    if (typeof sums[i] !== 'undefined') {
         editsummAddOptionToDropdown(dropdown, sums[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T00:13:26.837

假设这些是全局变量，您可以使用循环：

```
for( var i=1; i<=3; i++) {
    if( typeof window['customsum'+i] != "undefined") editsummAddOptionToDropdown(dropdown,window['customsum'+i]);
} 
```

但是，无论如何都建议使用数组：

```
var customsum = [
    /* what you normally have for customsum1 */,
    /* same for customsum2 */,
    ...
];
for( var i=0, l=customsum.length; i<l; i++) {
    if( typeof customsum[i] != "undefined") editsummAddOptionToDropdown(dropdown,customsum[i]);
} 
```

# java - 加载 FXML 时将参数传递给控制器

> ID：14370183
> 
> 赞同：26
> 
> 时间：2013-01-17T00:09:49.247
> 
> 标签：java, parameter-passing, javafx-2

我有一个登录屏幕，我想将登录 ID 从 LoginController 传递给 MainController，这样我就可以访问一些功能来更改密码等。

我像这样加载控制器：

```
FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("fxml/Main.fxml"));     

Parent root = (Parent)fxmlLoader.load();          
Scene scene = new Scene(root); 

stage.setScene(scene);    

stage.show(); 
```

Main.fxml 绑定到 MainController.java。有没有办法可以传递我需要的用户 ID，并在控制器的 initialize() 方法上访问它？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-21T04:31:25.413

在使用 FXMLLoader 加载控制器之后，可以在调用 show() 方法之前调用所述控制器的成员。必须获取对刚刚调用的控制器的引用并从那里调用 set() 方法（或直接访问属性，如果定义为 public）。

从示例中，我们假设与 Main.fxml 关联的控制器称为 MainController，并且 MainController 有一个 userId 属性，定义为 int。它的设置方法是setUser(int user)。因此，从 LoginController 类：

登录控制器.java：

```
// User ID acquired from a textbox called txtUserId
int userId = Integer.parseInt(this.txtUserId.getText());

FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource("fxml/Main.fxml"));     

Parent root = (Parent)fxmlLoader.load();          
MainController controller = fxmlLoader.<MainController>getController();
controller.setUser(userId);
Scene scene = new Scene(root); 

stage.setScene(scene);    

stage.show(); 
```

主控制器.java：

```
public void setUser(int userId){
    this.userId = userId;
} 
```

主控制器.java：

```
//You may need this also if you're getting null
@FXML private void initialize() {

    Platform.runLater(() -> {

        //do stuff

    });

} 
```

# c++ - 嵌套容器上的 qDeleteAll

> ID：14370194
> 
> 赞同：1
> 
> 时间：2013-01-17T00:11:40.130
> 
> 标签：c++, qt

在 Qt 中，如果我嵌套了类似于以下内容的 QMap：

```
QMap<int, QMap<int, QMap<int, int*>* >* > 
```

一次调用 qDeleteAll 会负责递归清理内存，还是我必须通过迭代每个容器手动多次调用 qDeleteAll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:16:04.043

当您使用普通指针时，您需要自己负责递归清理内存。

如果您希望自动清理内存，请改用智能指针。Qt 有很多可用的：[Qt Smart Pointers](http://qt-project.org/wiki/Smart_Pointers)

我相信[QScopedPointer](http://qt-project.org/doc/qt-4.8/qscopedpointer.html)和[QSharedPointer](http://qt-project.org/doc/qt-4.8/qsharedpointer.html)可能是你最感兴趣的。

# reactiveui - 使用非默认支持字段命名约定的 UserError.Throw

> ID：14370197
> 
> 赞同：2
> 
> 时间：2013-01-17T00:12:03.463
> 
> 标签：reactiveui

我很难理解我在`UserError`课堂上做错了什么。

这是我的 ViewModel 中的代码：

```
this.CheckForUpdateCmd = new ReactiveAsyncCommand(Observable.Return(true));

UserError.RegisterHandler(
    uerror =>    
    {
        logger.Error(uerror.ErrorMessage, uerror.InnerException);
        if (dlgService.ShowMessageBox(  
            this, 
            uerror.ErrorMessage, 
            ClientStrings.AboutVM_ErrorCheckUpdates, 
            MessageBoxButton.YesNo, 
            MessageBoxImage.Warning) == MessageBoxResult.Yes)
        {
            return Observable.
                Return(RecoveryOptionResult.RetryOperation);
        }
        return Observable.  
            Return(RecoveryOptionResult.FailOperation);
    });

this.
        CheckForUpdateCmd.
        ThrownExceptions.
        SelectMany(ex => 
            UserError.Throw(
                ClientStrings.AboutVM_ErrorCheckUpdates, 
                ex)).
        Subscribe(
            recoverOption =>
            {
                if (recoverOption == RecoveryOptionResult.RetryOperation)
                {
                   this.CheckForUpdateCmd.Execute(null);
                }
            });

((ReactiveAsyncCommand)this.CheckForUpdateCmd).
    RegisterAsyncAction(_ =>
        { 
            throw new Exception("TESTING 123"); 
        }); 
```

在异步操作中引发异常后，它会正确传播到我`Usererror.Throw`的`SelectMany`. 在 Throw 方法中，RxUI 抛出一个 ArgumentException：“你必须为这个属性声明一个支持字段，名为：recoveryOptions”

我已经对此进行了调查，并且 UserError 类有一个`_RecoveryOptions`从 UserError 本身设置的。但是，我在我的应用程序的 OnStartup 事件处理程序中使用这个扳手进入整个过程：

`RxApp.GetFieldNameForPropertyNameFunc = prop => prop.Length == 1 ? prop.ToLower() : char.ToLower(prop[0]) + prop.Substring(1);`

基本上，我希望我的支持字段以小写字母开头，而不是下划线/大写字母。到目前为止，RxUI 已经兑现了这一点，直到我尝试使用 UserError。我错过了一步还是这是 RxUI 中的错误？

这适用于反应式 UI 3.2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:01:08.997

这是[ReactiveUI 中的一个旧错误，](https://github.com/reactiveui/ReactiveUI/commit/cc070ff5bcda330d8b30a11e9051b954e71ca5b9)很久以前就已修复 - 要么升级到 ReactiveUI 4.x，要么将[Errors.cs](https://github.com/reactiveui/ReactiveUI/blob/master/ReactiveUI.Xaml/Errors.cs)复制到您的项目中并使用它

# cvs - 当通过命令实际仅列出一半时，所有提交到 cvs repo 的文件

> ID：14370198
> 
> 赞同：0
> 
> 时间：2013-01-17T00:12:05.847
> 
> 标签：cvs

我在很多目录中有很多文件，我正在提交给 cvs。这是我采取的步骤-

1.  cvs 添加目录
2.  cvs 添加文件
3.  检查 cvs repo - 我看到目录但没有文件，因为必须提交文件
4.  然后我提交要作为 LSF 批处理提交的文件
5.  bsub cvs 提交 -m "" 文件
6.  我可能有 100 个作业正在运行，900 个作业在队列中
7.  有人抱怨，所以我在队列中杀死我的工作（不是正在运行的工作）
8.  我检查了模块，一切都在那里，而不仅仅是通过 LSF 提交的那些

这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:31:25.097

我不知道该`bsub`命令的作用，但您不需要单独提交每个文件。如果您`cvs commit`从特定目录执行，它将提交当前目录和所有子目录中的所有文件。有可能所有事情都在第一份工作中完成，而所有其他工作都没有做任何事情。但是在不知道如何`bsub`工作的情况下，我不确定这一点。

# f# - Visual Studio 编辑器窗口中的 f# 方法下拉菜单

> ID：14370204
> 
> 赞同：1
> 
> 时间：2013-01-17T00:12:36.393
> 
> 标签：f#, visual-studio-2012

在 c# 中，您在 VS 2012 的编辑器窗口的右上角有一个方法下拉菜单，用于显示类中的所有方法。是否可以在 f# 中具有相同的功能？没有一种方法很难遵循很多方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T01:04:34.237

我在 2009 年（左右）在 MSR 实习期间为 Visual Studio 2010 实现了一个原型。它从未经过正确测试，因此默认情况下未启用，但不知何故代码保留在那里，并且可以通过`appSettings`在`devenv.exe.config`. 您还可以启用一些定义的折叠：

```
<appSettings>
    <add key="fsharp-navigationbar-enabled" value="true" />
    <add key="fsharp-regions-enabled" value="true" />
</appSettings> 
```

它可能有效，也可能无效，但您可以试一试:-)。这篇博文有[更多细节](http://tomasp.net/blog/regions-navigation.aspx)。

PS：这实际上只是一个星期左右的实验（这就是它如此不可靠的原因），因为我主要从事其他工作，但我认为有可能将其作为基于开源的插件正确重新实现发布编译器，以防有人感兴趣...

# c++ - C++ 模板和基本数据类型

> ID：14370207
> 
> 赞同：1
> 
> 时间：2013-01-17T00:13:10.777
> 
> 标签：c++

有什么方法可以判断模板参数是否是特定的基本数据类型，如 int 或 unsigned int？std::is_base_of 不这样做，尝试过。我想编写可以装箱所有基本数据类型的集合，但我找不到一种方法来判断它是哪种类型......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T00:25:06.683

使用 is_same。如果您没有实现（std 或 boost），请使用：

```
template < typename T1, typename T2 >
struct is_same { enum { value = false }; };

template < typename T >
struct is_same <T,T> { enum { value = true }; }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T00:17:08.957

一些有用的：

[`std::is_integral`](http://en.cppreference.com/w/cpp/types/is_integral)

[`std::is_floating_point`](http://en.cppreference.com/w/cpp/types/is_floating_point)

[`std::is_arithmetic`](http://en.cppreference.com/w/cpp/types/is_arithmetic)

如果您需要一些更窄的定义，您可以将几个[`std::is_same`](http://en.cppreference.com/w/cpp/types/is_same)特征组合在一起，例如

```
template<typename T>
struct is_int_or_char_or_float {
    static const bool value =
        std::is_same<T, int>::value ||
        std::is_same<T, char>::value ||
        std::is_same<T, float>::value;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T00:15:06.967

如果您想知道它是否属于特定类型，可以使用[`std::is_same`](http://en.cppreference.com/w/cpp/types/is_same)：

```
#include <type_traits>

bool isInt = std::is_same<int, T>::value; 
```

如果你想知道它是否是任何整数类型，[`std::is_integral`](http://en.cppreference.com/w/cpp/types/is_integral)

```
bool isInt = std::is_integral<T>::value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T00:16:19.633

您可以使用以下代码：

```
#include <typeinfo>
#include <iostream>

class someClass { };

int main(int argc, char* argv[]) {
    int a;
    someClass b;
    std::cout<<"a is of type: "<<typeid(a).name()<<std::endl; // Output 'a is of type int'
    std::cout<<"b is of type: "<<typeid(b).name()<<std::endl; // Output 'b is of type someClass'
    return 0;
} 
```

# google-chrome - Google Chrome 中的引导复选框和单选按钮标签问题

> ID：14370214
> 
> 赞同：6
> 
> 时间：2013-01-17T00:13:42.383
> 
> 标签：google-chrome, layout, twitter-bootstrap, checkbox, radio-button

我遇到了一些 Bootstrap 内联复选框和单选按钮标签的问题，但仅限于 Chrome 的某些实例。我正在开发的网站是 www.bostonsparkling.com。

这是预期行为的屏幕截图，以及它在以下环境中的样子：

*   我的 Mac 上的 Safari
*   我的 iPhone 上的 Safari
*   我家人 iPad 上的 Safari
*   我朋友的 Mac 上的 Google Chrome
*   我朋友电脑上的谷歌浏览器

[正确的标签行为：无自动换行](http://d.pr/i/Fvq9)

以下是破坏行为的屏幕截图，它在以下环境中表现出来：

*   我的 Mac 上的谷歌浏览器
*   我电脑上的谷歌浏览器

[不正确的标签行为：不必要的自动换行](http://d.pr/i/SQ3p)

看起来复选框和单选按钮标签文本不必要地换行，但仅在 Chrome 的某些情况下。以下是一些相关的故障排除信息...

*   不良行为并不总是存在 - 大约一周前它偷偷出现在我身上，我无法隔离出令人讨厌的变化。
*   除了物理上位于同一个房间之外，我的 Mac 和表现出不良行为的 PC 之间没有任何联系。
*   我尝试在两台机器上断开我的 Google 帐户与 Chrome 的连接并禁用我的所有扩展程序，我想也许扩展程序的一些特殊情况会搞砸布局，但没有骰子。

所以我想知道两件事...

1.  **是否有其他人在第二张图片中遇到不良行为，还是只有我一个人？**

2.  **我哪里搞砸了？**

以下是一些相关的代码片段：

从 index.html...

```
<form class="form-horizontal" id="estimate" action="#estimate" method="post">
...
<!-- Room Input -->
<div class="control-group">
    <label class="control-label">Which rooms need cleaning?</label>
    <div class="controls">
        <!-- Multiple Checkboxes -->
        <label class="checkbox inline">
            <input type="checkbox" name="kitchen" value="Yes">
            Kitchen
        </label>
        <label class="checkbox inline">
            <input type="checkbox" name="dining" value="Yes">
            Dining Room
        </label>
        <label class="checkbox inline">
            <input type="checkbox" name="living" value="Yes">
            Living Room
        </label>
        <label class="checkbox inline">
            <input type="checkbox" name="family" value="Yes">
            Family Room
        </label>
        <label class="checkbox inline">
            <input type="checkbox" name="office" value="Yes">
            Office or Study
        </label>
    </div>
</div> 
```

表单相关的 CSS...

```
/* Flip the margins and padding on inline checkboxes and radios */
.checkbox.inline,
.checkbox.inline + .checkbox.inline,
.radio.inline,
.radio.inline + .radio.inline {
    margin-left: 0 !important;
    margin-right: 15px !important;
    padding-top: 0 !important;
    padding-bottom: 5px !important;
}

/* Less vertical padding between form elements */
.form-horizontal
.control-group {
    margin-bottom: 10px; /* instead of 20px */
} 
```

让我知道您是否需要其他任何东西，如果我违反了任何发布规则，或者我的代码很糟糕，呵呵 - 这是我十年来的第一个网站。感谢您的帮助！

PS 如果没有 10 个代表，我不能嵌入图像或发布超过 3 个超链接 - 对此感到抱歉。:[

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T00:55:17.080

试试`white-space: nowrap;`你的`.checkbox.inline`CSS。这将确保在任何环境中都不会发生自动换行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T04:47:40.640

这是 Chrome 24 的错误吗？

[https://github.com/twitter/bootstrap/issues/6599](https://github.com/twitter/bootstrap/issues/6599)

# java - 检查目标中的属性 ant 文件

> ID：14370216
> 
> 赞同：0
> 
> 时间：2013-01-17T00:13:52.210
> 
> 标签：java, ant, properties, target

我是Java新手。在我的 Ant 文件中，我想创建一个目标“init”，它检查声明的属性是否存在（否则它会影响它们的默认值），但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:18:08.590

这比你想象的要容易。只需将它们设置在 init 目标中。在 Ant 中，设置属性是“先设置者获胜”——如果它们已经设置，则 init 目标中的设置将被忽略。

有几种设置属性的方法，但最常用的是：

```
<property name="foo" value="dist"/> 
```

# mysql - 使用子查询的结果更新在子查询中也提到的表

> ID：14370223
> 
> 赞同：1
> 
> 时间：2013-01-17T00:14:44.887
> 
> 标签：mysql, sql, sql-insert, mysql-error-1093

我正在尝试修复一个不完整的数据库，我无法控制架构，我需要找到丢失的条目并插入它们。

这是我得出的语法：

```
INSERT INTO 
  downloads (product_id, filename)
VALUES 
( 
  products_id = ( SELECT id
         FROM products 
         WHERE id NOT IN
           ( SELECT product_id
             FROM downloads
           )
       ), 
  filename = 'default.zip'
) 
```

子查询单独工作正常，但上面会引发错误

```
#1093 - You can't specify target table 'download' for update in FROM clause 
```

我已经查看了许多与此错误相关的 StackOverflow 问题（[像这样](https://stackoverflow.com/questions/45494/mysql-error-1093-cant-specify-target-table-for-update-in-from-clause)），并且我认为有一种方法可以嵌套子查询，以便它“[创建一个隐式临时表，因此它不算作同一张表你正在更新](https://stackoverflow.com/questions/45494/mysql-error-1093-cant-specify-target-table-for-update-in-from-clause/45498#45498)“但我无法适应它。

如果我的方法效率低下没关系，我很想看到一个接近我的语法的解决方案，但任何解决方案都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:17:01.797

要做的事情，

*   使用`INSERT...INTO SELECT`声明
*   使用`LEFT JOIN`而不是`NOT IN`
*   不要忘记在此列上添加索引：`products.ID`并`downloads.product_id`获得更快的性能

询问，

```
INSERT INTO  downloads (product_id, filename)
SELECT  a.id AS product_id, 'default.zip' AS filename
FROM    products a
        LEFT JOIN downloads b
            ON a.ID = b.product_id
WHERE   b.product_id IS NULL 
```

# email - 从 root@servername 更改外发邮件地址 - rackspace sendgrid postfix

> ID：14370224
> 
> 赞同：25
> 
> 时间：2013-01-17T00:14:45.710
> 
> 标签：email, smtp, postfix-mta, sendgrid, rackspace

所以我最近设置了我的 Rackspace 服务器（Ubuntu LAMP 堆栈）以使用 Postfix 和 Sendgrid 发送电子邮件。它很好用，因为我来自 cmd 行的测试邮件通过 sendgrid smtp 传递。但是，当我收到电子邮件时，它说是发件人`root@rackspaceservername`，我无法回复。

我根据这个主题创建了一个别名[如何更改后缀的默认电子邮件地址？](https://stackoverflow.com/questions/9538817/how-to-change-default-email-address-for-postfix)这使得它`webmaster@mydomain.com`由仍然显示为的发件人姓名表示`root`。

我需要更改什么才能让服务器使用我的网站管理员电子邮件，或者至少让它看起来就是它来自哪里，因此回复会发送到该电子邮件？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-22T03:11:47.757

确保这是在 /etc/postfix/main.cf 中设置的：

```
smtp_generic_maps = hash:/etc/postfix/generic 
```

设置通用别名时，不要像您提供的链接那样使用“http” - 您将在 Ubuntu 中使用 www-data。

```
echo 'www-data yourusername@yourdomain.com' >> /etc/postfix/generic
postmap /etc/postfix/generic
service postfix restart 
```

附注：Sendgrid 很棒，但自从 Rackspace 购买了 MailGun 后，MailGun 服务对 Rackspace 客户来说几乎是免费的。希望这可以帮助！

# ember.js - 重新渲染视图时的事件

> ID：14370225
> 
> 赞同：1
> 
> 时间：2013-01-17T00:14:48.997
> 
> 标签：ember.js

我有一个扩展 Ember.view 的自定义视图，其模板绑定到模型：

```
template: Ember.Handlebars.compile('<div >{{view.content.label}}</div>') 
```

我想在视图更新时使用回调或事件（而不是在模型更改时）。
这个回调（例如预渲染事件）可以使用这个视图的宽度，并根据这个新的大小进行一些操作。

Ember 框架有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:08:38.320

该`didInsertElement`事件可能是您正在寻找的：

> “当视图的元素已插入 DOM 时调用。覆盖此函数以执行任何需要文档中的元素的设置。”

[http://emberjs.com/api/classes/Ember.View.html#event_didInsertElement](http://emberjs.com/api/classes/Ember.View.html#event_didInsertElement)

还有`willInsertElement`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:16:51.910

类似于在视图重新渲染之前触发`didInsertElement`的事件。`willClearRender`

[http://emberjs.com/api/classes/Ember.View.html#event_willClearRender](http://emberjs.com/api/classes/Ember.View.html#event_willClearRender)

# c# - 如何将选定的 ListBox1 项目复制到同一索引处的 ListBox2 列表？

> ID：14370227
> 
> 赞同：0
> 
> 时间：2013-01-17T00:14:58.913
> 
> 标签：c#, listbox, selecteditem, selectedindex

我在 Windows 窗体上有 2 个列表框，在这些框的中间有 2 个按钮。一个显示右边，另一个显示左边。我想要做的是，当我在 listbox1 上选择一些项目并单击右侧显示按钮时，我想将我在 listbox1 上选择的项目复制到 listbox 2，并在我在 1 上选择它们的相同索引处。我可以这个，但是我不能复制空行。这就是我的列表框的样子（我添加了数字只是为了在此处轻松跟踪行）。

```
 ListBox1                Listbox2

1\.  u                       a
2.
3\.  l                       c
4\.                          b
5\.  m                       e
6\.                          f
7\.  n      >>(right button)          
8\.                          c
9\.  z      <<(left button)  t
10\.                         q
11\. s                         
12\.                        
13\. g                       b 
```

现在在这些框中，如果我选择任何带有文本的项目，然后单击按钮，它会将项目复制到另一个列表框。但是如果我选择任何没有文本的行，任何空行，然后单击按钮，它不会改变任何东西。它不会使其他框项为空。这是代码，我如何复制行。

```
private void button4_Click(object sender, EventArgs e)
{

    List<int> selectedItemIndexes = new List<int>();
    foreach (string o in listBox1.SelectedItems)
        selectedItemIndexes.Add(listBox1.Items.IndexOf(o));

    for (int i = 0; i < selectedItemIndexes.Count; i++)
    {
        listBox2.Items[selectedItemIndexes[i]] =  listBox1.Items[selectedItemIndexes[i]];
    }

    selectedItemIndexes.Clear();

}

private void button3_Click(object sender, EventArgs e)
{
    List<int> selectedItemIndexes = new List<int>();
    foreach (object o in listBox2.SelectedItems)
        selectedItemIndexes.Add(listBox2.Items.IndexOf(o));

    for (int i = 0; i < selectedItemIndexes.Count; i++)
    {
        listBox1.Items[selectedItemIndexes[i]] = listBox2.Items[selectedItemIndexes[i]];
    }

    selectedItemIndexes.Clear();
} 
```

我怎样才能复制空行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:50:34.860

那是因为在以下行

foreach (listBox1.SelectedItems 中的字符串 o) selectedItemIndexes.Add(listBox1.Items.IndexOf(o));

你会得到空字符串，它总是会返回空字符串的第一个索引。

解决方案是使用 selectedIndices 如下：

```
 foreach (int selectedItemInd in listBox1.SelectedIndices)
        {
            selectedItemIndexes.Add(selectedItemInd);
        } 
```

# java - java - 如何在java中忽略标点符号和空格？

> ID：14370232
> 
> 赞同：3
> 
> 时间：2013-01-17T00:15:10.607
> 
> 标签：java, palindrome, punctuation

```
import java.util.Scanner;
public class Ex3 {
    public static void main(String[] args) {
        Scanner keyboard = new Scanner(System.in);
        System.out.print("Please input a word: ");
        String Line = keyboard.nextLine();
        boolean x = isReverse(Line);
        System.out.print("It is " + x + " that this word is a palindrome.");
    }
    public static boolean isReverse(String Line) {
        int length = Line.length();
        boolean x = true;
        String s = "";
        for (int i = 0; i < length; i++) {
            if (Line.charAt(i) != ' ') {
                s += Line.charAt(i);
            }
        }
        for (int i = 0; i < length; i++) {
            if (Line.charAt(i) != Line.charAt(length - 1 -i)) {
                x = false;
            }
        }
        return x;   
    }
} 
```

我要做的是制作一个程序，该程序将单词或短语作为输入并根据它是否为回文返回真或假。在程序中，我应该忽略空格和标点符号，并制作诸如“A man, a plan, a canal, Panama”之类的回文。我想我已经解决了空格问题，但不知道如何忽略所有标点符号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T00:24:13.597

您可以使用[正则表达式](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)从字符串中删除所有非单词字符：`\\W`表示非单词字符

```
String s = "A man, a plan, a canal, Panama.";
String lettersOnly = s.replaceAll("[\\W]", "");
System.out.println("lettersOnly = " + lettersOnly); 
```

输出：

> letterOnly = Amanaplanacanal巴拿马

如果要减少代码的长度，还可以使用[`StringBuilder#reverse`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#reverse%28%29)反转字符串：

```
public static void main(String[] args) {
    Scanner keyboard = new Scanner(System.in);
    System.out.print("Please input a word: ");
    String line = keyboard.nextLine();

    String cleanLine = line.replaceAll("[\\W]", "");
    String reverse = new StringBuilder(cleanLine).reverse().toString();
    boolean isPalindrome = cleanLine.equals(reverse);

    System.out.print("It is " + isPalindrome + " that this word is a palindrome.");
} 
```

**编辑**

如果你需要坚持循环，如果字符是字母，你可以简单地检查你的循环：

```
public static boolean isReverse(String Line) {
    int length = Line.length();
    boolean x = true;
    String s = "";
    for (int i = 0; i < length; i++) {
        if ((Line.charAt(i) >= 'a' && Line.charAt(i) <= 'z')
          || (Line.charAt(i) >= 'A' && Line.charAt(i) <= 'Z')) {
            s += Line.charAt(i);
        }
    } 
```

注意：您将遇到大小写问题（`A`!= `a`） - 一个简单的解决方法是首先将所有字符用`String lowerCase = Line.toLowerCase();`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T00:37:26.303

[Apache Commons Lang](http://commons.apache.org/lang)中的`StringUtils`类有一些可能很方便的方法，包括和. 将您的字符串与您要删除的所有标点字符的字符串一起传递将返回一个无标点符号的字符串。`deleteWhitespace()``difference()``difference()`

# c++ - 我可以在 Visual Studio 中动态更改使用 C++ 创建的对话框窗口的字体大小吗？

> ID：14370238
> 
> 赞同：4
> 
> 时间：2013-01-17T00:15:49.047
> 
> 标签：c++, visual-studio, fonts, dialog, font-size

比如说，如果我使用 Visual Studio 从 C++/MFC 项目中的资源创建对话框窗口，我可以从资源编辑器更改对话框字体和大小。我的问题是如何从程序中做同样的事情？

这是几个屏幕截图：

常规尺寸： ![在此处输入图像描述](../Images/6df8e60b8536d377e494be694dbfe449.png)

尺寸 14： ![在此处输入图像描述](../Images/980a10685c020fe978a804a3b620fcab.png)

PS。我可以想象，一旦创建了对话框窗口，就无法更改字体大小，但是在创建之前呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T00:50:39.220

尚未对此进行测试，但您似乎可以使用 WinAPI `SendDlgItemMessage`：

```
hFont = // obtain handle to a font object
SendDlgItemMessage(hwnd, IDC_OF_YOUR_CONTROL, WM_SETFONT, (WPARAM)hfFont, TRUE); 
```

替换`IDC_OF_YOUR_CONTROL`为 dialag 的标识符。创建 12pt“Times New Roman”字体的示例代码：

```
HFONT hf;
HDC hdc;
long lfHeight;

hdc = GetDC(NULL);
lfHeight = -MulDiv(12, GetDeviceCaps(hdc, LOGPIXELSY), 72);
ReleaseDC(NULL, hdc);

hf = CreateFont(lfHeight, 0, 0, 0, 0, TRUE, 0, 0, 0, 0, 0, 0, 0, "Times New Roman"); 
```

来源：[http ://winprog.org/tutorial/fonts.html](http://winprog.org/tutorial/fonts.html)

**编辑**：我不知道这些 WinAPI 调用如何映射到 MFC，但可能有类似的方法可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T21:14:20.993

哇，没想到这么复杂。这是我想出的更改字体大小和字体的解决方案。它适用于任何对话框，无需调整单个对话框控件的大小：

![在此处输入图像描述](../Images/1a703f40a8c2d49ac13b916fa1ce5f94.png)

对于 MFC 项目：

```
//Header .h file
static INT_PTR OpenDialogWithFont(CWnd* pParentWnd, LPCTSTR lpszResourceID, LPCTSTR pstrFontFaceName = NULL, WORD wFontPtSz = 0, BOOL* pbOutResultFontApplied = NULL);
static BYTE* AdvanceThrough_sz_Or_Ord(BYTE* pData);
static BYTE* AdvanceThrough_String(BYTE* pData, CString* pOutStr = NULL); 
```

然后是实现本身：

```
INT_PTR OpenDialogWithFont(CWnd* pParentWnd, LPCTSTR lpszResourceID, LPCTSTR pstrFontFaceName, WORD wFontPtSz, BOOL* pbOutResultFontApplied)
{
    //Open dialog box with the 'lpszResourceID'
    //'pParentWnd' = parent window class
    //'pstrFontFaceName' = Font face name to use, or NULL to use original font
    //'wFontPtSz' = point size of the font, or 0 to use original font size
    //'pbOutResultFontApplied' = if not NULL, receives TRUE if font was applied, or FALSE if dialog was shown with original font
    //RETURN:
    //      = One of the values returned by CDialog::DoModal
    INT_PTR nResDlg = -1;

    BOOL bAppliedFont = FALSE;
    BYTE* pCNewData = NULL;

    LPCTSTR m_lpszTemplateName = MAKEINTRESOURCE(lpszResourceID);
    HINSTANCE hInst = AfxFindResourceHandle(m_lpszTemplateName, RT_DIALOG);
    if(hInst)
    {
        HRSRC hResource = ::FindResource(hInst, m_lpszTemplateName, RT_DIALOG);
        HGLOBAL hDialogTemplate = LoadResource(hInst, hResource);
        if(hDialogTemplate)
        {
            LPCDLGTEMPLATE lpDialogTemplate = (LPCDLGTEMPLATE)LockResource(hDialogTemplate);
            DWORD dwszDialogTemplate = SizeofResource(hInst, hResource);
            if(lpDialogTemplate &&
                dwszDialogTemplate)
            {
                //Template to use
                LPCDLGTEMPLATE lpDialogTemplateToUse = lpDialogTemplate;

                //See if it's an extended dialog structure
                DLGTEMPLATEEX_PART1* pDTX1 = (DLGTEMPLATEEX_PART1*)lpDialogTemplate;
                if(pDTX1->signature == 0xFFFF &&
                    pDTX1->dlgVer == 1)
                {
                    //Now get thru variable length elements
                    BYTE* pData = (BYTE*)(pDTX1 + 1);

                    //sz_Or_Ord menu;
                    pData = AdvanceThrough_sz_Or_Ord(pData);

                    //sz_Or_Ord windowClass;
                    pData = AdvanceThrough_sz_Or_Ord(pData);

                    //title
                    CString strTitle;
                    pData = AdvanceThrough_String(pData, &strTitle);

                    //Now pointsize of the font
                    //This member is present only if the style member specifies DS_SETFONT or DS_SHELLFONT.
                    if(pDTX1->style & (DS_SETFONT | DS_SHELLFONT))
                    {
                        //Font size in pts
                        BYTE* pPtr_FontSize = pData;
                        WORD ptFontSize = *(WORD*)pData;
                        pData += sizeof(WORD);

                        WORD wFontWeight = *(WORD*)pData;
                        pData += sizeof(WORD);

                        BYTE italic = *(BYTE*)pData;
                        pData += sizeof(BYTE);

                        BYTE charset = *(BYTE*)pData;
                        pData += sizeof(BYTE);

                        //Font face name
                        CString strFontFaceName;
                        BYTE* pPtr_FontFaceName = pData;
                        pData = AdvanceThrough_String(pData, &strFontFaceName);

                        //Remember the end of the struct (that we care about)
                        BYTE* pPtr_EndStruct = pData;

                        //Get size of the end data chunk
                        int ncbszEndChunk = dwszDialogTemplate - (pPtr_EndStruct - (BYTE*)lpDialogTemplate);
                        if(ncbszEndChunk >= 0)
                        {
                            //Now we can modify the struct

                            //Get new type face name (or use the old one)
                            CString strNewFontFaceName = pstrFontFaceName ? pstrFontFaceName : strFontFaceName;

                            //Calculate the new struct size
                            int ncbSzNewData = dwszDialogTemplate - 
                                strFontFaceName.GetLength() * sizeof(WCHAR) + 
                                strNewFontFaceName.GetLength() * sizeof(WCHAR);

                            //Reserve mem
                            pCNewData = new BYTE[ncbSzNewData];
                            if(pCNewData)
                            {
                                BYTE* pNewData = pCNewData;

                                //Copy in chunks
                                memcpy(pNewData, lpDialogTemplate, pPtr_FontFaceName - (BYTE*)lpDialogTemplate);
                                pNewData += pPtr_FontFaceName - (BYTE*)lpDialogTemplate;

                                //Then put our font face name
                                memcpy(pNewData, strNewFontFaceName.GetString(), (strNewFontFaceName.GetLength() + 1) * sizeof(WCHAR));
                                pNewData += (strNewFontFaceName.GetLength() + 1) * sizeof(WCHAR);

                                //And add the ending chunk
                                memcpy(pNewData, pPtr_EndStruct, ncbszEndChunk);
                                pNewData += ncbszEndChunk;

                                //Check memory allocation
                                if(pNewData - pCNewData == ncbSzNewData)
                                {
                                    //Are we setting the font size?
                                    if(wFontPtSz != 0)
                                    {
                                        WORD* pwFontSz = (WORD*)(pCNewData + (pPtr_FontSize - (BYTE*)lpDialogTemplate));
                                        if(*pwFontSz != wFontPtSz)
                                        {
                                            //Set flag
                                            bAppliedFont = TRUE;
                                        }

                                        //Set new font size
                                        *pwFontSz = wFontPtSz;
                                    }

                                    //Did we have a specified font face too
                                    if(pstrFontFaceName)
                                        bAppliedFont = TRUE;

                                    //Use our adjusted template
                                    lpDialogTemplateToUse = (LPCDLGTEMPLATE)pCNewData;
                                }
                                else
                                {
                                    ASSERT(NULL);
                                }
                            }
                        }
                    }
                }

                //Try to load it from the template
                CDialog abt;
                if(abt.InitModalIndirect(lpDialogTemplateToUse, pParentWnd))
                {
                    //And show the modal dialog
                    nResDlg = abt.DoModal();
                }

            }
        }

    }

    //Free memory
    if(pCNewData)
    {
        delete[] pCNewData;
        pCNewData = NULL;
    }

    if(pbOutResultFontApplied)
        *pbOutResultFontApplied = bAppliedFont;

    return nResDlg;
} 
```

自定义结构定义：

```
#pragma pack(push, 1) // exact fit - no padding
struct DLGTEMPLATEEX_PART1{
  WORD      dlgVer;
  WORD      signature;
  DWORD     helpID;
  DWORD     exStyle;
  DWORD     style;
  WORD      cDlgItems;
  short     x;
  short     y;
  short     cx;
  short     cy;
};
#pragma pack(pop) 
```

这是解析可变大小成员的辅助方法：

```
BYTE* AdvanceThrough_sz_Or_Ord(BYTE* pData)
{
    //'pData' = Points to a variable-length array of 16-bit elements that identifies a menu 
    //          resource for the dialog box. If the first element of this array is 0x0000, 
    //          the dialog box has no menu and the array has no other elements. If the first 
    //          element is 0xFFFF, the array has one additional element that specifies the 
    //          ordinal value of a menu resource in an executable file. If the first element 
    //          has any other value, the system treats the array as a null-terminated Unicode 
    //          string that specifies the name of a menu resource in an executable file.
    //RETURN:
    //      = Following address
    ASSERT(pData);

    WORD* pWArr = (WORD*)pData;
    if(*pWArr == 0x0000)
    {
        //No other elements
        pWArr++;
    }
    else if(*pWArr == 0xFFFF)
    {
        //Next element is menu ID
        pWArr++;
        pWArr++;
    }
    else
    {
        //Unicode ASIIZ string
        WCHAR z;
        do
        {
            z = *pWArr;
            pWArr++;
        }
        while(z != 0);
    }

    return (BYTE*)pWArr;
}

BYTE* AdvanceThrough_String(BYTE* pData, CString* pOutStr)
{
    //'pData' = Points to null-terminated Unicode string
    //'pOutStr' = if not NULL, receives the string scanned
    //RETURN:
    //      = Pointer to the first BYTE after the string
    ASSERT(pData);

    WCHAR* pWStr = (WCHAR*)pData;
    WCHAR z;
    do
    {
        z = *pWStr;
        pWStr++;
    }
    while(z != 0);

    if(pOutStr)
    {
        int nLn = pWStr - (WCHAR*)pData;
        memcpy(pOutStr->GetBufferSetLength(nLn), pData, nLn * sizeof(WCHAR));
        pOutStr->ReleaseBuffer();
    }

    return (BYTE*)pWStr;
} 
```

这就是你所说的：

```
BOOL bResAppliedFontCorrection;
int nResultDlg = OpenDialogWithFont(this, 
    MAKEINTRESOURCE(IDD_ABOUTBOX),
    _T("Algerian"), 
    16, 
    &bResAppliedFontCorrection); 
```

对于那些对其工作原理感兴趣的人，该方法会在创建对话框之前修改[对话框模板结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645398%28v=vs.85%29.aspx)，从而让操作系统完成所有字体操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:51:08.147

正如我在评论中指出的那样，您尝试做的事情不会特别容易。有许多角落案例和小东西会回来咬你。

但是，如果您仍然想尝试，您可以使用[CWnd::SetFont](http://msdn.microsoft.com/en-us/library/3y64cf7e%28v=vs.80%29.aspx)更改对话框子窗口的字体。只需构建您要使用的字体，将其分配给适当的控件，然后 tada。

祝你好运...

# iphone - UITableViewCell 背景图片 - Ipad 开发

> ID：14370243
> 
> 赞同：0
> 
> 时间：2013-01-17T00:16:06.763
> 
> 标签：iphone, ios, objective-c, uitableview

我想为我的 UITableViewCell 定义一个像附加图像一样的背景。我正在尝试使用下面的代码，但没有成功。

```
cell.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"teste1.png"]]; 
```

我的 UITableView 是一个分组和静态的。我也尝试定义 tableView.backgroundcolor 来清除颜色但也没有成功。

任何帮助将不胜感激。谢谢，马科斯

![UITableViewCellBackground](../Images/b6228fdccf43169e46b51bbb3222b79a.png)

![在此处输入图像描述](../Images/7fd579928abeecc3d01aa96a73facebe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:20:36.640

尝试这个...

```
cell.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"YOUR_IMAGE.png"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:34:57.060

我最终在整个 UITableViewCell 区域内放置了一个 UIButton。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:32:22.813

在 Apple 的 UITableViewCell 文档中，关于 backgroundView：

> 对于普通样式表 (UITableViewStylePlain) 中的单元格，默认值为 nil，对于分组样式表 UITableViewStyleGrouped)，默认值为非 nil。UITableViewCell 将背景视图添加为所有其他视图后面的子视图，并使用其当前帧位置。

因此，我认为更改分组样式表的 backgroundView 不是一个好主意（您的情况就是这样）。尝试在背景视图上方插入一个新的 imageView：

```
UIImage *background = [UIImage imageWithContentsOfFile:@"teste1"];
UIImageView *cellBackgroundView = [[UIImageView alloc] initWithImage:background];
[cell insertSubview:cellBackgroundView aboveSubview:cell.backgroundView]; 
```

并且不要忘记将所有视图中的颜色设置为清除，并阻止背景。

# javascript - Javascript 的“文档”对象可以用作变量吗？

> ID：14370253
> 
> 赞同：6
> 
> 时间：2013-01-17T00:16:56.297
> 
> 标签：javascript, variables, dom, object, document

我想知道是否可以添加到 Javascript 的`document`对象中。像：

```
var document = {
    name: "My Name"   
} 
```

*   这在 JavaScript 中合法吗？
*   如果是，它是否被认为是“良好做法”，还是我应该避免它？
*   如果我将其定义为变量，那么它是否被视为唯一对象，而不是 JS DOM 对象？

我对 JavaScript 很陌生，任何帮助都将不胜感激。

**编辑：**

在评论中进行了一些对话并对其进行了更多思考之后，我真的很想知道我是否可以操纵`document`变量并仍然可以`document`正常使用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-17T00:20:00.723

*   **是**的，你**可以**这样做
*   **不**，你**不应该那样**做

`document`只是`global`/`window`对象的另一个属性。如果您将其声明为范围内的形式参数或*变量*，则查找过程将首先在您声明的范围内匹配该*名称*，因此它有点重叠。

无论如何，你不想这样做，你为什么要这样做？对于您和其他正在查看您的代码的人来说，它是如此令人困惑。这**是非常糟糕的做法**。

实际上，这就是为什么*大多数*“高级”javascript片段/库都以封闭*函数范围*开头的原因

```
(function( window, document, undefined ) {
    // window will always reference the "window" object that got originally passed in
    // document will always reference the "document" object that got originally passed in
    // undefined will always reference the "undefined value" that got originally passed in
}( window, window.document )); 
```

..只是为了避免，所谓的*混蛋效应*。如果这样的*闭包*在文件的最顶部是开放的，它会确保您引用其中的*原始*对象，以防万一某些天才有好主意覆盖/重叠它们。

> 结论：您当然可以随意选择变量的名称，但出于显而易见的原因，您确实不应该使用诸如 ,`window`等这样显着名称的名称。`document``undefined`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T00:24:21.227

你说你在做什么——添加到`document`对象——并不是你的代码实际上在做什么。

你**正在**做的是*重新定义* `document`. 如果要添加到它，请使用以下内容：

```
document.name = "My Name" 
```

这样你仍然可以使用`document`. 但是，这通常仍然是不好的做法 - 您可以只使用不同的对象而不是文档：

```
myObject = {name:"My Name"}; 
```

然后`myObject`仍然是全球性的。修改`document`对象可能会产生不幸的副作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T00:22:10.197

正如我在评论中指出的，ECMAScript 规范第 15 章告诉我们哪些对象是内置的；`document`不是其中之一。

`DOMElement`当您在该上下文中使用 Javascript 时，它只是您的网络浏览器设置的一个变量，因此，您可以使用对象或其他类型的对象或任何您喜欢的对象将其覆盖到您心中的内容。

但是，出于所有显而易见的原因，这是一个坏主意。

您可能可以向对象*添加*属性`document`而不会那么混乱，但我仍然想不出任何理由这样做。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-17T00:22:46.377

您可以扩充或修改 JS 或给定浏览器中开箱即用的任何对象。

偶数：var Object = { name: "Trevor" }; 控制台.log（对象）；

将记录： Object {name: "Trevor"} 尽管几乎所有东西都是由 JS 中的对象组成的。

不，糟糕的做法，然而。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-17T00:27:16.810

document 变量是一个全局变量，代表您正在查看的当前页面（在某种意义上）。

即使它不在[javascript 的保留关键字中](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)，您也不应该这样使用它，因为您可以覆盖文档对象（[请参阅此处](https://stackoverflow.com/questions/2042810/override-document-location-href-is-it-possible-in-javascript)）（尽管不像您尝试的那样简单），然后您将覆盖引用到旧的，并有一个糟糕的时间。

所以是的，你可以做到，不，你不应该。这是不好的做法。尝试选择一个不同的名称，这样接管您代码的人就不会丢失（或对您生气！）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-17T00:21:56.070

你可以，但这不是一个好主意，阅读这篇[文章](http://perfectionkills.com/whats-wrong-with-extending-the-dom/)。

您可以在意外情况下覆盖内容。您可以增加所需的性能开销。而且你必须小心，因为不同的浏览器会有不同的行为。

# asp.net - 是否可以在 AZURE 的同一个网站门户中部署 WCF 服务和网站？

> ID：14370258
> 
> 赞同：0
> 
> 时间：2013-01-17T00:17:18.043
> 
> 标签：asp.net, wcf, azure, wcf-client, azure-storage

我部署了两项服务，其中一项是网站，另一项是用于桌面应用程序的 WCF 服务。

我有一个名为 contoso2.azurewebsites.net 的网站，我在那个地方放置了我的网站，但我也想部署我的 WCF 服务，问题是......我需要创建另一个网站服务来部署它吗？或者它可以在同一个地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:54:00.103

我想你可以。如果你有一个 ASP.NET Web 应用程序，你可以为你的 WCF 服务添加一些 .svc 文件。它们将作为您网站的一部分进行部署。然后您可以通过 http://contoso2.azurewebsites.net/ 使用您的网站并通过[http://contoso2.azurewebsites.net/api/ProductService.svc](http://contoso2.azurewebsites.net/api/ProductService.svc)[使用](http://contoso2.azurewebsites.net/)您的 Web 服务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:51:38.013

将您的网站和服务组合到一个应用程序中是可能的，但您也可以将它们托管在同一个 Web 角色的两个单独的站点中。

你基本上必须：

1.  创建具有多个站点的 cspack
2.  角色启动时，将机器的内部 IP 地址映射到您在 hosts 文件中选择的 DNS

我的博客上的更多详细信息和脚本：http: [//thomassmets.wordpress.com/2013/01/21/a-web-frontend-with-a-wcf-backend-in-azure/](http://thomassmets.wordpress.com/2013/01/21/a-web-frontend-with-a-wcf-backend-in-azure/)

# ruby-on-rails - 如何从 Active Admin 修改 XML 和 XLSX 输出？

> ID：14370261
> 
> 赞同：2
> 
> 时间：2013-01-17T00:18:08.427
> 
> 标签：ruby-on-rails, ruby, activeadmin

我一直在尝试从 Active Admin 为 rails 应用程序修改模型信息的输出（导出）。我可以使用

```
csv do
  ..
end 
```

有没有办法以类似的方式修改 XML 或 XLXS 的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:36:10.467

ActiveAdmin 不像 csv 那样提供用于自定义 xml/json 输出的工具。

所以你可以做几个选择：

*   为您的模型重写[to_xml](http://api.rubyonrails.org/classes/ActiveRecord/Serialization.html#method-i-to_xml)方法
*   创建 .xml.erb 模板。例如，如果您有用户的活动管理员，那么您的模板应该在 app/views/admin/users/index.xml.erb

# cakephp - 从 2.0.5 升级到 2.2.5

> ID：14370266
> 
> 赞同：-1
> 
> 时间：2013-01-17T00:18:37.340
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.2

我有旧的应用程序。它基于 CakePHP 2.0.5。我想将它升级到当前的最新版本 2.2.5。

用旧文件夹替换新文件夹就足够了`lib`吗？或应用程序文件夹也需要更改。

（检查大约 17 个版本的更新日志需要很多时间！！！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T00:42:58.210

我想我应该阅读食谱：

首先： [http ://book.cakephp.org/2.0/en/appendices/2-1-migration-guide.html](http://book.cakephp.org/2.0/en/appendices/2-1-migration-guide.html)

然后： [http ://book.cakephp.org/2.0/en/appendices/2-2-migration-guide.html](http://book.cakephp.org/2.0/en/appendices/2-2-migration-guide.html)

# google-apps-script - 使用 Apps 脚本在带有日期的 Google 电子表格中存档

> ID：14370268
> 
> 赞同：1
> 
> 时间：2013-01-17T00:19:06.793
> 
> 标签：google-apps-script, google-sheets

我有一个电子表格，其中包含附有日期和优先级的行动项目。如果项目是优先级 2 并且一周或更长时间，我想创建一个归档行的函数。

这是我的剧本，但它正在发挥作用——有时它移动了错误的优先级，有时它移动了错误的日期，而且它从不移动它应该移动的所有日期。最糟糕的是，它在我的“Action Items”表底部添加了大量空行，并在“Archive”表中创建了空行。

显然有些地方出了问题，但我真的没有看到，即使经过一天的紧张调试。任何帮助都会很有启发性和感激！

```
function Archiver() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Action Items'); // get the sheet
  var targetsheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Archive'); // get the target sheet
  var columnF = sheet.getRange(2, 6, sheet.getLastRow()-1, 1); // get all the rows with dates
  var fValues = columnF.getValues(); // get the values of dates
  var columnE = sheet.getRange(2, 5, sheet.getLastRow()-1, 1); // get all the rows with priorities
  var eValues = columnE.getValues(); // get the values of priorities
  var day = 24*3600*1000 // calculate ms in a day
  var today = parseInt((new Date().setHours(0,0,0,0))/day); // get date today
  for (var i = 0; i < fValues.length; i++) { // repeat loop
    var priority = eValues[i][0]; // set priority in loop
    var dataday = parseInt(fValues[i][0].getTime()/day); // convert date column into miliseconds
    Logger.log(dataday+" <= " + today-7 + " - " + priority) // my log isn't picking up day
    if (dataday <= today-7 && priority == "P2") { // if an item is more than 7 days old and Priority 2...
      targetsheet.insertRows(2,1)
      // move the entire source row to the second row of target sheet
    var rangeToMove = sheet.getRange(/*startRow*/ i + 2, /*startColumn*/ 1, /*numRows*/ 1, /*numColumns*/ sheet.getMaxColumns());
    rangeToMove.moveTo(targetsheet.getRange("A2"));
          // add date and time of when approved to target row in column E
    targetsheet.getRange("M2").setValue(Date());
    // delete row from source sheet
    sheet.deleteRows(i + 2,1);
    }
  }
        ss.toast("Move along.", "Archiving Complete.");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:23:55.443

我没有调试您的代码，但我最初的想法是在迭代时删除行会扰乱数据的顺序并造成混乱，因此我对其进行了调整以复制行（而不是移动）并将要删除的行号存储在一个数组，以便我们可以在循环外删除它们。我做了一个快速测试，这似乎有效。

```
function Archiver() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Action Items'); // get the sheet
  var targetsheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Archive'); // get the target sheet
  var columnF = sheet.getRange(2, 6, sheet.getLastRow()-1, 1); // get all the rows with dates
  var fValues = columnF.getValues(); // get the values of dates
  var columnE = sheet.getRange(2, 5, sheet.getLastRow()-1, 1); // get all the rows with priorities
  var eValues = columnE.getValues(); // get the values of priorities
  var day = 24*3600*1000 // calculate ms in a day
  var today = parseInt((new Date().setHours(0,0,0,0))/day); // get date today
  var rowsToDelete = [];
  for (var i = 0; i < fValues.length; i++) { // repeat loop
    var priority = eValues[i][0]; // set priority in loop
    var dataday = parseInt(fValues[i][0].getTime()/day); // convert date column into miliseconds
    Logger.log(dataday+" <= " + (today-7) + " - " + priority) // my log isn't picking up day
    if (dataday <= today-7 && priority == "P2") { // if an item is more than 7 days old and Priority 2...
      targetsheet.insertRows(2,1)
      // move the entire source row to the second row of target sheet
    var rangeToMove = sheet.getRange(/*startRow*/ i + 2, /*startColumn*/ 1, /*numRows*/ 1, /*numColumns*/ sheet.getMaxColumns());
    rangeToMove.copyTo(targetsheet.getRange("A2"));
          // add date and time of when approved to target row in column E
    targetsheet.getRange("M2").setValue(Date());
    // delete row from source sheet
    rowsToDelete.push(i+2);
    }
  }
  rowsToDelete.reverse();
  for (var j = 0; j < rowsToDelete.length; j++) { sheet.deleteRow(rowsToDelete[j]); }
  ss.toast("Move along.", "Archiving Complete.");
} 
```

# c++ - 打印系统时间后防止尾线

> ID：14370279
> 
> 赞同：2
> 
> 时间：2013-01-17T00:21:09.990
> 
> 标签：c++, systemtime

我有一个简单的问题，如果我想在与系统时间输出相同的行上打印一个值，这可能吗？

```
char *date;
time_t timer;
timer=time(NULL);
date = asctime(localtime(&timer));
//printf("Current Date: %s", date);

  std::cout << date << ", " << randomNumber  << std::endl;

  if (file.is_open())
  {
    file << date;
    file << ", ";
    file << randomNumber;
    file << "\n";
  } 
```

我希望会发生的是我会得到这个作为输出：

```
Wed Jan 16 16:18:56 2013, randomNumber 
```

但我最终得到的文件是：

```
Wed Jan 16 16:18:56 2013
, randomNumber 
```

另外，我刚刚做了一个简单的 std::cout，我注意到了同样的结果。似乎系统在输出的末尾强制了一个结束行，无论如何，我可以抑制这个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T00:23:11.880

您可以将日期字符串中的 '\n' 字符（如果 null 终止，它应该在 strlen(date) - 1）替换为 '\0'，它应该打印在同一行。

```
date[strlen(date) - 1] = '\0'; 
```

编辑：正如 Joachim 所指出的，`strlen`返回没有 NULL 终止符的长度而不是原始分配长度，所以它应该是 -1 而不是 -2。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T00:24:19.117

换行符是从 返回的字符串中的最后一个字符`asctime`。删除它的最简单方法是用字符串终止符替换它`'\0'`。

关于 Windows 的注意事项：Windows 有*两个*换行符，回车符`'\r'`和常规换行符`'\n'`。*因此，在 Windows 上，您必须在倒数第二*个字符处终止。如果您希望您的代码可以跨 Windows 和非 Windows 平台移植，则必须为此添加检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-07T16:52:43.803

如果你想使用字符串，你有更好的选择。

这对我有用：

```
#include<iostream>
#include<chrono>
#include<ctime>

using namespace std;

string getDate()
{
    chrono::system_clock::time_point tp = chrono::system_clock::now();
    time_t t = chrono::system_clock::to_time_t(tp);
    const char * tc = ctime(&t);
    string str = string {tc};
    str.pop_back();
    return str;
}

int main(){
    cout << getDate() << endl << hi;
} 
```

输出：

```
Mon Dec  7 17:40:01 2015
hi 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-04-30T08:14:25.773

这将起作用：

```
date = date.substr(0, date.size()-1); 
```

# java - WebView.getContentHeight() 总是返回 0

> ID：14370282
> 
> 赞同：0
> 
> 时间：2013-01-17T00:21:27.943
> 
> 标签：java, android

我试图在名为 webDescription 的 WebView 中显示 HTML 字符串。因为这个 HTML 有时可能很长，所以我想将 WebView 的高度限制为最大尺寸，并允许内容在视图中滚动。

我正在使用以下代码等到页面完成加载，检查内容高度并将封闭（父）TableRow 的高度设置为最大值 150。

```
 webDescription.setWebViewClient(new WebViewClient() {

        public void onPageFinished(WebView view, String url) {
            // do your stuff here
            Log.i("EVENTDETAIL", "Web view has finished loading");
            Log.i("EVENTDETAIL", "Description content height: " + view.getContentHeight());
            if ( view.getContentHeight() > 150 ) {
                LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, 150);
                view.setLayoutParams(params);
            }
        }

    }); 
```

但是， view.getContentHeight() 总是返回 0；因此，父 TableRow 的 LayoutParams 永远不会改变。

谁能提供对此的任何见解以及如何解决我的问题？非常感谢您的考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:27:19.550

使用此代码：

```
 if(view.getHeight()>150) 
 {
      LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, 150);
      view.setLayoutParams(params);
 } 
```

我的意思是使用`getHeight()`而不是`getContentHeight()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:41:20.710

我会将 WebView 设置为 match_parent 并在 TableRow 上设置一个 maxHeight。

# ruby-on-rails - rails join 搜索模型

> ID：14370283
> 
> 赞同：0
> 
> 时间：2013-01-17T00:21:35.103
> 
> 标签：ruby-on-rails, database-design, ruby-on-rails-3.2

我在概念上遇到了麻烦，所以我希望我能找到一些关于如何完成这项任务的指导。

这个例子有点武断，但我希望它可以在这里展示我的目标。

3 个模型，已加入

```
class Manufacturer < ActiveRecord::Base
  has_many :models
end
class Model < ActiveRecord::Base
  belongs_to :manufacturer
  has_many :editions
end
class Edition < ActiveRecord::Base
  belongs_to :model
end 
```

我想合并数据，以便搜索任何匹配项

```
<% @editions.each do |edition| %>
  <% model = edition.model %>
  <% manufacturer = model.manufacturer %>
  <%= "#{manufacturer.name} #{model.name} #{edition.name}" %> 
```

使这复杂化。为了跟踪，我想将此视为 3 个选择。

我预见到这一点的方式是使用模糊搜索进行匹配，并在分隔匹配项时使用 tokeninput 或类似方法进行显示。

在我的脑海中，我相信 eBay 可能会在他们的快速上市销售页面中做类似的事情。

## 想法：

*   Model.find(:all, :joins => [:editions, :manufacturer] ) 会给我一切，但这不会扩展到第四个模型？
*   假设我需要在搜索表单或其他方式中使用这些捕获，我需要在文本字段和控制器中将它们分开。
*   我想的另一种方法是将其存储在一个表中，或者永久地或者作为查找表。此处的单个选择包含收集所有信息的参考

![组合模型的搜索结果](../Images/8dfaaec7eedc0d128f7ae1c3eceb582c.png)

然后像

```
class Search < ActiveRecord::Base
    has_one :manufacturer
    has_one :model
    has_one :edition
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:52:40.197

如果我明白你在问什么，那么类似：

```
@editions = Edition.joins(model: :manufacturer)
  .where("models.name = :q OR manufacturers.name = :q OR editions.name = :q", q: params[:q]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:21:45.190

所以，是的，您可以使用连接来执行此操作，而不是将其存储在单个表中。为了让它超级简单，我会使用 Ernie Miller 的 squeel gem
[http://railscasts.com/episodes/354-squeel](http://railscasts.com/episodes/354-squeel)
它允许这种语法：

```
Edition.joins{ model.manufacturer }.where{ (edition.name =~ "%#{params[:q]}%") || ( edition.model.name =~ "%#{params[:q]%}" || ( edition.model.manufacturer.name =~ "%#{prams[:q]}%" ) } 
```

如果表变大，这可能是连接的性能问题。
如果是这种情况，那么使用 ElasticSearch 来索引您的模型将消除这种情况。
[http://railscasts.com/episodes/306-elasticsearch-part-1](http://railscasts.com/episodes/306-elasticsearch-part-1)
[http://railscasts.com/episodes/307-elasticsearch-part-2](http://railscasts.com/episodes/307-elasticsearch-part-2)
当然还有其他全文搜索引擎，Solr，Sphinx

# java - 如何多次重复 map/reduce 任务？

> ID：14370284
> 
> 赞同：2
> 
> 时间：2013-01-17T00:21:43.300
> 
> 标签：java, hadoop, mapreduce

为了多次重复相同的 map/reduce 任务，我应该把循环放在哪里？我知道它应该在主程序中，我不知道它应该在周围`runJob`还是其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:28:55.753

这是一个很好的例子来做你想做的事情，摘自我前段时间看到[的 Thomas Jungblut 的很棒的博客：](http://codingwiththomas.blogspot.com/2011/04/controlling-hadoop-job-recursion.html)

```
while (counter > 0) {
   // reuse the conf reference with a fresh object
   conf = new Configuration();
   // set the depth into the configuration
   conf.set("recursion.depth", depth + "");
   job = new Job(conf);
   job.setJobName("Graph explorer " + depth);

   job.setMapperClass(ExplorationMapper.class);
   job.setReducerClass(ExplorationReducer.class);
   job.setJarByClass(ExplorationMapper.class);
   // always work on the path of the previous depth
   in = new Path("files/graph-exploration/depth_" + (depth - 1) + "/");
   out = new Path("files/graph-exploration/depth_" + depth);

   SequenceFileInputFormat.addInputPath(job, in);
   // delete the outputpath if already exists
   if (fs.exists(out))
    fs.delete(out, true);

   SequenceFileOutputFormat.setOutputPath(job, out);
   job.setInputFormatClass(SequenceFileInputFormat.class);
   job.setOutputFormatClass(SequenceFileOutputFormat.class);
   job.setOutputKeyClass(LongWritable.class);
   job.setOutputValueClass(VertexWritable.class);
   // wait for completion and update the counter
   job.waitForCompletion(true);
   depth++;
   counter = job.getCounters().findCounter(ExplorationReducer.UpdateCounter.UPDATED)
     .getValue();
} 
```

# php - microsoft tag 将条形码下载到磁盘

> ID：14370287
> 
> 赞同：-1
> 
> 时间：2013-01-17T00:21:58.203
> 
> 标签：php

我正在使用 Scott Vanderbeck 的 microsoft tag php 库。

它具有将条形码作为图像输出到浏览器的功能，但我想下载并保存到磁盘。我的目标是遍历所有标签并将每个条形码作为图像下载到磁盘上。我不知道如何做到这一点。

这是我的代码 require_once('MStag_v2.php');

```
$MSTagAuthToken = "your token";

//Create an MSTag interface instance
$msTag = new MSTag();

//Create User Credentials
$userCredential = new UserCredential($MSTagAuthToken);

//Display Microsoft Tag image in browser
$result = $msTag->GetBarcode($userCredential,'MAIN','Cyclamen coum Pewter','jpeg',1);

if($result)
{
    ob_start();
        $length = strlen($result);
        header('Last-Modified: '.date('r'));
        header('Accept-Ranges: bytes');
        header('Content-Length: '.$length);
        header('Content-Type: image/jpeg');
        print($result);
    ob_end_flush();
    exit;
} 
else
{
    echo $msTag->getLastException();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:33:35.617

您可以将图像直接保存到磁盘

```
if($result)
{
    file_put_contents($filename, $result);
} 
```

只需为每个文件生成一个文件名，这样您就不会覆盖它们（也许使用[tempnam()](http://php.net/manual/de/function.tempnam.php)）。

# c# - C# 列表框项目的颜色（续）

> ID：14370288
> 
> 赞同：0
> 
> 时间：2013-01-17T00:21:59.950
> 
> 标签：c#

我正在尝试找到一种方法来突出显示具有不同颜色的列表框项目的背景，并且遇到了这个四年前的封闭线程，它几乎在这里回答了这个问题：

[ListBox 项的背景颜色（winforms）](https://stackoverflow.com/questions/91747/background-color-of-a-listbox-item-winforms#91758)

我没有关注如何使用他的方法。因此，如果我创建了一个名为 listBox1 的对象和一个名为 strSomeString 的字符串变量，那么将 strSomeString 添加到具有红色背景的 listBox1 的确切代码是什么？

在此处使用 Shadow Wizard 的代码：

```
 private void lbReports_DrawItem(object sender, DrawItemEventArgs e)
    {
        e.DrawBackground();

        bool selected = ((e.State & DrawItemState.Selected) == DrawItemState.Selected);

        int index = e.Index;
        if (index >= 0 && index < lbReports.Items.Count)
        {
            string text = lbReports.Items[index].ToString();
            Graphics g = e.Graphics;

            Color color = (selected) ? Color.FromKnownColor(KnownColor.Highlight) : (((index % 2) == 0) ? Color.White : Color.Gray);
            g.FillRectangle(new SolidBrush(color), e.Bounds);

            // Print text
            g.DrawString(text, e.Font, (selected) ? reportsForegroundBrushSelected : reportsForegroundBrush, 
                lbReports.GetItemRectangle(index).Location);
        }

        e.DrawFocusRectangle();
    } 
```

-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:27:35.937

考虑为此使用[所有者绘制控件](http://www.blackbeltcoder.com/Articles/controls/creating-a-color-picker-with-an-owner-draw-combobox)。

工作量更大，因为您需要渲染所有列表内容。但是您将拥有完全的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:05:21.707

您只需要将列表框的 Draw_item 事件挂钩到 lbReports_DrawItem 处理程序。您可以通过在列表框的属性中设置它来做到这一点。

另一件事是将 DrawMode 设置为 OwnerDrawFixed

# javascript - nivo 滑块的 Javascript 问题

> ID：14370293
> 
> 赞同：5
> 
> 时间：2013-01-17T00:23:04.943
> 
> 标签：javascript

我无法弄清楚是什么导致了这两个错误，任何帮助将不胜感激！

`Uncaught TypeError: Object #<Object> has no method 'live'`

```
 $('a.nivo-prevNav', slider).live('click', function(){
Uncaught TypeError: Object #<Object> has no method 'live'
                if(vars.running) return false;
                clearInterval(timer);
                timer = '';
                vars.currentSlide -= 2;
                nivoRun(slider, kids, settings, 'prev');
            });

`Uncaught TypeError: Undefined is not a function (repeated 20 times)`

           var timer = 0;
            if(!settings.manualAdvance && kids.length > 1){
                timer = setInterval(function(){ nivoRun(slider, kids, settings, false); }, settings.pauseTime);
    Uncaught TypeError: undefined is not a function (repeated 13 times)
            } 
```

js文件

```
/*
 * jQuery Nivo Slider v2.6
 * http://nivo.dev7studios.com
 *
 * Copyright 2011, Gilbert Pellegrom
 * Free to use and abuse under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * March 2010
 */

(function($) {

    var NivoSlider = function(element, options){
        //Defaults are below
        var settings = $.extend({}, $.fn.nivoSlider.defaults, options);

        //Useful variables. Play carefully.
        var vars = {
            currentSlide: 0,
            currentImage: '',
            totalSlides: 0,
            randAnim: '',
            running: false,
            paused: false,
            stop: false
        };

        //Get this slider
        var slider = $(element);
        slider.data('nivo:vars', vars);
        slider.css('position','relative');
        slider.addClass('nivoSlider');

        //Find our slider children
        var kids = slider.children();
        kids.each(function() {
            var child = $(this);
            var link = '';
            if(!child.is('img')){
                if(child.is('a')){
                    child.addClass('nivo-imageLink');
                    link = child;
                }
                child = child.find('img:first');
            }
            //Get img width & height
            var childWidth = child.width();
            if(childWidth == 0) childWidth = child.attr('width');
            var childHeight = child.height();
            if(childHeight == 0) childHeight = child.attr('height');
            //Resize the slider
            if(childWidth > slider.width()){
                slider.width(childWidth);
            }
            if(childHeight > slider.height()){
                slider.height(childHeight);
            }
            if(link != ''){
                link.css('display','none');
            }
            child.css('display','none');
            vars.totalSlides++;
        });

        //Set startSlide
        if(settings.startSlide > 0){
            if(settings.startSlide >= vars.totalSlides) settings.startSlide = vars.totalSlides - 1;
            vars.currentSlide = settings.startSlide;
        }

        //Get initial image
        if($(kids[vars.currentSlide]).is('img')){
            vars.currentImage = $(kids[vars.currentSlide]);
        } else {
            vars.currentImage = $(kids[vars.currentSlide]).find('img:first');
        }

        //Show initial link
        if($(kids[vars.currentSlide]).is('a')){
            $(kids[vars.currentSlide]).css('display','block');
        }

        //Set first background
        slider.css('background','url("'+ vars.currentImage.attr('src') +'") no-repeat');

        //Create caption
        slider.append(
            $('<div class="nivo-caption"><p></p></div>').css({ display:'block', opacity:settings.captionOpacity })
        );          

        // Process caption function
        var processCaption = function(settings){
            var nivoCaption = $('.nivo-caption', slider);
            if(vars.currentImage.attr('title') != '' && vars.currentImage.attr('title') != undefined){
                var title = vars.currentImage.attr('title');
                if(title.substr(0,1) == '#') title = $(title).html();   

                if(nivoCaption.css('display') == 'block'){
                    nivoCaption.find('p').fadeOut(settings.animSpeed, function(){
                        $(this).html(title);
                        $(this).fadeIn(settings.animSpeed);
                    });
                } else {
                    nivoCaption.find('p').html(title);
                }                   
                nivoCaption.fadeIn(settings.animSpeed);
            } else {
                nivoCaption.fadeOut(settings.animSpeed);
            }
        }

        //Process initial  caption
        processCaption(settings);

        //In the words of Super Mario "let's a go!"
        var timer = 0;
        if(!settings.manualAdvance && kids.length > 1){
            timer = setInterval(function(){ nivoRun(slider, kids, settings, false); }, settings.pauseTime);
        }

        //Add Direction nav
        if(settings.directionNav){
            slider.append('<div class="nivo-directionNav"><a class="nivo-prevNav">'+ settings.prevText +'</a><a class="nivo-nextNav">'+ settings.nextText +'</a></div>');

            //Hide Direction nav
            if(settings.directionNavHide){
                $('.nivo-directionNav', slider).hide();
                slider.hover(function(){
                    $('.nivo-directionNav', slider).show();
                }, function(){
                    $('.nivo-directionNav', slider).hide();
                });
            }

            $('a.nivo-prevNav', slider).live('click', function(){
                if(vars.running) return false;
                clearInterval(timer);
                timer = '';
                vars.currentSlide -= 2;
                nivoRun(slider, kids, settings, 'prev');
            });

            $('a.nivo-nextNav', slider).live('click', function(){
                if(vars.running) return false;
                clearInterval(timer);
                timer = '';
                nivoRun(slider, kids, settings, 'next');
            });
        }

        //Add Control nav
        if(settings.controlNav){
            var nivoControl = $('<div class="nivo-controlNav"></div>');
            slider.append(nivoControl);
            for(var i = 0; i < kids.length; i++){
                if(settings.controlNavThumbs){
                    var child = kids.eq(i);
                    if(!child.is('img')){
                        child = child.find('img:first');
                    }
                    if (settings.controlNavThumbsFromRel) {
                        nivoControl.append('<a class="nivo-control" rel="'+ i +'"><img src="'+ child.attr('rel') + '" alt="" /></a>');
                    } else {
                        nivoControl.append('<a class="nivo-control" rel="'+ i +'"><img src="'+ child.attr('src').replace(settings.controlNavThumbsSearch, settings.controlNavThumbsReplace) +'" alt="" /></a>');
                    }
                } else {
                    nivoControl.append('<a class="nivo-control" rel="'+ i +'">'+ (i + 1) +'</a>');
                }

            }
            //Set initial active link
            $('.nivo-controlNav a:eq('+ vars.currentSlide +')', slider).addClass('active');

            $('.nivo-controlNav a', slider).live('click', function(){
                if(vars.running) return false;
                if($(this).hasClass('active')) return false;
                clearInterval(timer);
                timer = '';
                slider.css('background','url("'+ vars.currentImage.attr('src') +'") no-repeat');
                vars.currentSlide = $(this).attr('rel') - 1;
                nivoRun(slider, kids, settings, 'control');
            });
        }

        //Keyboard Navigation
        if(settings.keyboardNav){
            $(window).keypress(function(event){
                //Left
                if(event.keyCode == '37'){
                    if(vars.running) return false;
                    clearInterval(timer);
                    timer = '';
                    vars.currentSlide-=2;
                    nivoRun(slider, kids, settings, 'prev');
                }
                //Right
                if(event.keyCode == '39'){
                    if(vars.running) return false;
                    clearInterval(timer);
                    timer = '';
                    nivoRun(slider, kids, settings, 'next');
                }
            });
        }

        //For pauseOnHover setting
        if(settings.pauseOnHover){
            slider.hover(function(){
                vars.paused = true;
                clearInterval(timer);
                timer = '';
            }, function(){
                vars.paused = false;
                //Restart the timer
                if(timer == '' && !settings.manualAdvance){
                    timer = setInterval(function(){ nivoRun(slider, kids, settings, false); }, settings.pauseTime);
                }
            });
        }

        //Event when Animation finishes
        slider.bind('nivo:animFinished', function(){ 
            vars.running = false; 
            //Hide child links
            $(kids).each(function(){
                if($(this).is('a')){
                    $(this).css('display','none');
                }
            });
            //Show current link
            if($(kids[vars.currentSlide]).is('a')){
                $(kids[vars.currentSlide]).css('display','block');
            }
            //Restart the timer
            if(timer == '' && !vars.paused && !settings.manualAdvance){
                timer = setInterval(function(){ nivoRun(slider, kids, settings, false); }, settings.pauseTime);
            }
            //Trigger the afterChange callback
            settings.afterChange.call(this);
        });

        // Add slices for slice animations
        var createSlices = function(slider, settings, vars){
            for(var i = 0; i < settings.slices; i++){
                var sliceWidth = Math.round(slider.width()/settings.slices);
                if(i == settings.slices-1){
                    slider.append(
                        $('<div class="nivo-slice"></div>').css({ 
                            left:(sliceWidth*i)+'px', width:(slider.width()-(sliceWidth*i))+'px',
                            height:'0px', 
                            opacity:'0', 
                            background: 'url("'+ vars.currentImage.attr('src') +'") no-repeat -'+ ((sliceWidth + (i * sliceWidth)) - sliceWidth) +'px 0%'
                        })
                    );
                } else {
                    slider.append(
                        $('<div class="nivo-slice"></div>').css({ 
                            left:(sliceWidth*i)+'px', width:sliceWidth+'px',
                            height:'0px', 
                            opacity:'0', 
                            background: 'url("'+ vars.currentImage.attr('src') +'") no-repeat -'+ ((sliceWidth + (i * sliceWidth)) - sliceWidth) +'px 0%'
                        })
                    );
                }
            }
        }

        // Add boxes for box animations
        var createBoxes = function(slider, settings, vars){
            var boxWidth = Math.round(slider.width()/settings.boxCols);
            var boxHeight = Math.round(slider.height()/settings.boxRows);

            for(var rows = 0; rows < settings.boxRows; rows++){
                for(var cols = 0; cols < settings.boxCols; cols++){
                    if(cols == settings.boxCols-1){
                        slider.append(
                            $('<div class="nivo-box"></div>').css({ 
                                opacity:0,
                                left:(boxWidth*cols)+'px', 
                                top:(boxHeight*rows)+'px',
                                width:(slider.width()-(boxWidth*cols))+'px',
                                height:boxHeight+'px',
                                background: 'url("'+ vars.currentImage.attr('src') +'") no-repeat -'+ ((boxWidth + (cols * boxWidth)) - boxWidth) +'px -'+ ((boxHeight + (rows * boxHeight)) - boxHeight) +'px'
                            })
                        );
                    } else {
                        slider.append(
                            $('<div class="nivo-box"></div>').css({ 
                                opacity:0,
                                left:(boxWidth*cols)+'px', 
                                top:(boxHeight*rows)+'px',
                                width:boxWidth+'px',
                                height:boxHeight+'px',
                                background: 'url("'+ vars.currentImage.attr('src') +'") no-repeat -'+ ((boxWidth + (cols * boxWidth)) - boxWidth) +'px -'+ ((boxHeight + (rows * boxHeight)) - boxHeight) +'px'
                            })
                        );
                    }
                }
            }
        }

        // Private run method
        var nivoRun = function(slider, kids, settings, nudge){
            //Get our vars
            var vars = slider.data('nivo:vars');

            //Trigger the lastSlide callback
            if(vars && (vars.currentSlide == vars.totalSlides - 1)){ 
                settings.lastSlide.call(this);
            }

            // Stop
            if((!vars || vars.stop) && !nudge) return false;

            //Trigger the beforeChange callback
            settings.beforeChange.call(this);

            //Set current background before change
            if(!nudge){
                slider.css('background','url("'+ vars.currentImage.attr('src') +'") no-repeat');
            } else {
                if(nudge == 'prev'){
                    slider.css('background','url("'+ vars.currentImage.attr('src') +'") no-repeat');
                }
                if(nudge == 'next'){
                    slider.css('background','url("'+ vars.currentImage.attr('src') +'") no-repeat');
                }
            }
            vars.currentSlide++;
            //Trigger the slideshowEnd callback
            if(vars.currentSlide == vars.totalSlides){ 
                vars.currentSlide = 0;
                settings.slideshowEnd.call(this);
            }
            if(vars.currentSlide < 0) vars.currentSlide = (vars.totalSlides - 1);
            //Set vars.currentImage
            if($(kids[vars.currentSlide]).is('img')){
                vars.currentImage = $(kids[vars.currentSlide]);
            } else {
                vars.currentImage = $(kids[vars.currentSlide]).find('img:first');
            }

            //Set active links
            if(settings.controlNav){
                $('.nivo-controlNav a', slider).removeClass('active');
                $('.nivo-controlNav a:eq('+ vars.currentSlide +')', slider).addClass('active');
            }

            //Process caption
            processCaption(settings);

            // Remove any slices from last transition
            $('.nivo-slice', slider).remove();

            // Remove any boxes from last transition
            $('.nivo-box', slider).remove();

            if(settings.effect == 'random'){
                var anims = new Array('sliceDownRight','sliceDownLeft','sliceUpRight','sliceUpLeft','sliceUpDown','sliceUpDownLeft','fold','fade',
                'boxRandom','boxRain','boxRainReverse','boxRainGrow','boxRainGrowReverse');
                vars.randAnim = anims[Math.floor(Math.random()*(anims.length + 1))];
                if(vars.randAnim == undefined) vars.randAnim = 'fade';
            }

            //Run random effect from specified set (eg: effect:'fold,fade')
            if(settings.effect.indexOf(',') != -1){
                var anims = settings.effect.split(',');
                vars.randAnim = anims[Math.floor(Math.random()*(anims.length))];
                if(vars.randAnim == undefined) vars.randAnim = 'fade';
            }

            //Run effects
            vars.running = true;
            if(settings.effect == 'sliceDown' || settings.effect == 'sliceDownRight' || vars.randAnim == 'sliceDownRight' ||
                settings.effect == 'sliceDownLeft' || vars.randAnim == 'sliceDownLeft'){
                createSlices(slider, settings, vars);
                var timeBuff = 0;
                var i = 0;
                var slices = $('.nivo-slice', slider);
                if(settings.effect == 'sliceDownLeft' || vars.randAnim == 'sliceDownLeft') slices = $('.nivo-slice', slider)._reverse();

                slices.each(function(){
                    var slice = $(this);
                    slice.css({ 'top': '0px' });
                    if(i == settings.slices-1){
                        setTimeout(function(){
                            slice.animate({ height:'100%', opacity:'1.0' }, settings.animSpeed, '', function(){ slider.trigger('nivo:animFinished'); });
                        }, (100 + timeBuff));
                    } else {
                        setTimeout(function(){
                            slice.animate({ height:'100%', opacity:'1.0' }, settings.animSpeed);
                        }, (100 + timeBuff));
                    }
                    timeBuff += 50;
                    i++;
                });
            } 
            else if(settings.effect == 'sliceUp' || settings.effect == 'sliceUpRight' || vars.randAnim == 'sliceUpRight' ||
                    settings.effect == 'sliceUpLeft' || vars.randAnim == 'sliceUpLeft'){
                createSlices(slider, settings, vars);
                var timeBuff = 0;
                var i = 0;
                var slices = $('.nivo-slice', slider);
                if(settings.effect == 'sliceUpLeft' || vars.randAnim == 'sliceUpLeft') slices = $('.nivo-slice', slider)._reverse();

                slices.each(function(){
                    var slice = $(this);
                    slice.css({ 'bottom': '0px' });
                    if(i == settings.slices-1){
                        setTimeout(function(){
                            slice.animate({ height:'100%', opacity:'1.0' }, settings.animSpeed, '', function(){ slider.trigger('nivo:animFinished'); });
                        }, (100 + timeBuff));
                    } else {
                        setTimeout(function(){
                            slice.animate({ height:'100%', opacity:'1.0' }, settings.animSpeed);
                        }, (100 + timeBuff));
                    }
                    timeBuff += 50;
                    i++;
                });
            } 
            else if(settings.effect == 'sliceUpDown' || settings.effect == 'sliceUpDownRight' || vars.randAnim == 'sliceUpDown' || 
                    settings.effect == 'sliceUpDownLeft' || vars.randAnim == 'sliceUpDownLeft'){
                createSlices(slider, settings, vars);
                var timeBuff = 0;
                var i = 0;
                var v = 0;
                var slices = $('.nivo-slice', slider);
                if(settings.effect == 'sliceUpDownLeft' || vars.randAnim == 'sliceUpDownLeft') slices = $('.nivo-slice', slider)._reverse();

                slices.each(function(){
                    var slice = $(this);
                    if(i == 0){
                        slice.css('top','0px');
                        i++;
                    } else {
                        slice.css('bottom','0px');
                        i = 0;
                    }

                    if(v == settings.slices-1){
                        setTimeout(function(){
                            slice.animate({ height:'100%', opacity:'1.0' }, settings.animSpeed, '', function(){ slider.trigger('nivo:animFinished'); });
                        }, (100 + timeBuff));
                    } else {
                        setTimeout(function(){
                            slice.animate({ height:'100%', opacity:'1.0' }, settings.animSpeed);
                        }, (100 + timeBuff));
                    }
                    timeBuff += 50;
                    v++;
                });
            } 
            else if(settings.effect == 'fold' || vars.randAnim == 'fold'){
                createSlices(slider, settings, vars);
                var timeBuff = 0;
                var i = 0;

                $('.nivo-slice', slider).each(function(){
                    var slice = $(this);
                    var origWidth = slice.width();
                    slice.css({ top:'0px', height:'100%', width:'0px' });
                    if(i == settings.slices-1){
                        setTimeout(function(){
                            slice.animate({ width:origWidth, opacity:'1.0' }, settings.animSpeed, '', function(){ slider.trigger('nivo:animFinished'); });
                        }, (100 + timeBuff));
                    } else {
                        setTimeout(function(){
                            slice.animate({ width:origWidth, opacity:'1.0' }, settings.animSpeed);
                        }, (100 + timeBuff));
                    }
                    timeBuff += 50;
                    i++;
                });
            }  
            else if(settings.effect == 'fade' || vars.randAnim == 'fade'){
                createSlices(slider, settings, vars);

                var firstSlice = $('.nivo-slice:first', slider);
                firstSlice.css({
                    'height': '100%',
                    'width': slider.width() + 'px'
                });

                firstSlice.animate({ opacity:'1.0' }, (settings.animSpeed*2), '', function(){ slider.trigger('nivo:animFinished'); });
            }          
            else if(settings.effect == 'slideInRight' || vars.randAnim == 'slideInRight'){
                createSlices(slider, settings, vars);

                var firstSlice = $('.nivo-slice:first', slider);
                firstSlice.css({
                    'height': '100%',
                    'width': '0px',
                    'opacity': '1'
                });

                firstSlice.animate({ width: slider.width() + 'px' }, (settings.animSpeed*2), '', function(){ slider.trigger('nivo:animFinished'); });
            }
            else if(settings.effect == 'slideInLeft' || vars.randAnim == 'slideInLeft'){
                createSlices(slider, settings, vars);

                var firstSlice = $('.nivo-slice:first', slider);
                firstSlice.css({
                    'height': '100%',
                    'width': '0px',
                    'opacity': '1',
                    'left': '',
                    'right': '0px'
                });

                firstSlice.animate({ width: slider.width() + 'px' }, (settings.animSpeed*2), '', function(){ 
                    // Reset positioning
                    firstSlice.css({
                        'left': '0px',
                        'right': ''
                    });
                    slider.trigger('nivo:animFinished'); 
                });
            }
            else if(settings.effect == 'boxRandom' || vars.randAnim == 'boxRandom'){
                createBoxes(slider, settings, vars);

                var totalBoxes = settings.boxCols * settings.boxRows;
                var i = 0;
                var timeBuff = 0;

                var boxes = shuffle($('.nivo-box', slider));
                boxes.each(function(){
                    var box = $(this);
                    if(i == totalBoxes-1){
                        setTimeout(function(){
                            box.animate({ opacity:'1' }, settings.animSpeed, '', function(){ slider.trigger('nivo:animFinished'); });
                        }, (100 + timeBuff));
                    } else {
                        setTimeout(function(){
                            box.animate({ opacity:'1' }, settings.animSpeed);
                        }, (100 + timeBuff));
                    }
                    timeBuff += 20;
                    i++;
                });
            }
            else if(settings.effect == 'boxRain' || vars.randAnim == 'boxRain' || settings.effect == 'boxRainReverse' || vars.randAnim == 'boxRainReverse' || 
                    settings.effect == 'boxRainGrow' || vars.randAnim == 'boxRainGrow' || settings.effect == 'boxRainGrowReverse' || vars.randAnim == 'boxRainGrowReverse'){
                createBoxes(slider, settings, vars);

                var totalBoxes = settings.boxCols * settings.boxRows;
                var i = 0;
                var timeBuff = 0;

                // Split boxes into 2D array
                var rowIndex = 0;
                var colIndex = 0;
                var box2Darr = new Array();
                box2Darr[rowIndex] = new Array();
                var boxes = $('.nivo-box', slider);
                if(settings.effect == 'boxRainReverse' || vars.randAnim == 'boxRainReverse' ||
                   settings.effect == 'boxRainGrowReverse' || vars.randAnim == 'boxRainGrowReverse'){
                    boxes = $('.nivo-box', slider)._reverse();
                }
                boxes.each(function(){
                    box2Darr[rowIndex][colIndex] = $(this);
                    colIndex++;
                    if(colIndex == settings.boxCols){
                        rowIndex++;
                        colIndex = 0;
                        box2Darr[rowIndex] = new Array();
                    }
                });

                // Run animation
                for(var cols = 0; cols < (settings.boxCols * 2); cols++){
                    var prevCol = cols;
                    for(var rows = 0; rows < settings.boxRows; rows++){
                        if(prevCol >= 0 && prevCol < settings.boxCols){
                            /* Due to some weird JS bug with loop vars 
                            being used in setTimeout, this is wrapped
                            with an anonymous function call */
                            (function(row, col, time, i, totalBoxes) {
                                var box = $(box2Darr[row][col]);
                                var w = box.width();
                                var h = box.height();
                                if(settings.effect == 'boxRainGrow' || vars.randAnim == 'boxRainGrow' ||
                                   settings.effect == 'boxRainGrowReverse' || vars.randAnim == 'boxRainGrowReverse'){
                                    box.width(0).height(0);
                                }
                                if(i == totalBoxes-1){
                                    setTimeout(function(){
                                        box.animate({ opacity:'1', width:w, height:h }, settings.animSpeed/1.3, '', function(){ slider.trigger('nivo:animFinished'); });
                                    }, (100 + time));
                                } else {
                                    setTimeout(function(){
                                        box.animate({ opacity:'1', width:w, height:h }, settings.animSpeed/1.3);
                                    }, (100 + time));
                                }
                            })(rows, prevCol, timeBuff, i, totalBoxes);
                            i++;
                        }
                        prevCol--;
                    }
                    timeBuff += 100;
                }
            }
        }

        // Shuffle an array
        var shuffle = function(arr){
            for(var j, x, i = arr.length; i; j = parseInt(Math.random() * i), x = arr[--i], arr[i] = arr[j], arr[j] = x);
            return arr;
        }

        // For debugging
        var trace = function(msg){
            if (this.console && typeof console.log != "undefined")
                console.log(msg);
        }

        // Start / Stop
        this.stop = function(){
            if(!$(element).data('nivo:vars').stop){
                $(element).data('nivo:vars').stop = true;
                trace('Stop Slider');
            }
        }

        this.start = function(){
            if($(element).data('nivo:vars').stop){
                $(element).data('nivo:vars').stop = false;
                trace('Start Slider');
            }
        }

        //Trigger the afterLoad callback
        settings.afterLoad.call(this);

        return this;
    };

    $.fn.nivoSlider = function(options) {

        return this.each(function(key, value){
            var element = $(this);
            // Return early if this element already has a plugin instance
            if (element.data('nivoslider')) return element.data('nivoslider');
            // Pass options to plugin constructor
            var nivoslider = new NivoSlider(this, options);
            // Store plugin object in this element's data
            element.data('nivoslider', nivoslider);
        });

    };

    //Default settings
    $.fn.nivoSlider.defaults = {
        effect: 'random',
        slices: 15,
        boxCols: 8,
        boxRows: 4,
        animSpeed: 500,
        pauseTime: 3000,
        startSlide: 0,
        directionNav: true,
        directionNavHide: true,
        controlNav: true,
        controlNavThumbs: false,
        controlNavThumbsFromRel: false,
        controlNavThumbsSearch: '.jpg',
        controlNavThumbsReplace: '_thumb.jpg',
        keyboardNav: true,
        pauseOnHover: true,
        manualAdvance: false,
        captionOpacity: 1.0,
        prevText: 'Prev',
        nextText: 'Next',
        beforeChange: function(){},
        afterChange: function(){},
        slideshowEnd: function(){},
        lastSlide: function(){},
        afterLoad: function(){}
    };

    $.fn._reverse = [].reverse;

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T00:34:13.300

我使用了错误版本的 jQuery。我现在使用的是 1.5.2 版。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T05:44:26.497

live 功能在 1.7 版中已弃用。最新版本是 1.9。Nivo Slider 使用实时功能。我遇到了与上述问题相同的问题，直到我意识到我们的网站是从网络中获取 jQuery 代码，而不是从我们网站上的 .js 文件中获取。

我使用的是 1.7.1 版本，Nivo Slider 现在工作正常。

# c - 函数调用后通过我的 if else 运行的程序

> ID：14370300
> 
> 赞同：1
> 
> 时间：2013-01-17T00:23:55.847
> 
> 标签：c

我有一个 C 类作业来制作一个执行三个计算的简单计算器。我还没有完成所有的功能，但是我的 calcMenu 功能有问题。当函数被调用时，程序运行所有的 if else 语句并且我不知道，只执行 else 语句，它是错误检查。然后再次运行该函数，但这次它没有运行所有 if else 语句并允许用户做出选择。我知道我做了一些非常愚蠢的事情，但在过去的一个小时里一直在绞尽脑汁。如果有人对我有任何不满，请指出我正确的方向。我知道所有的系统调用都会惹恼一些，但这是一门基础课，我们的教练告诉我们要使用它们。

提前致谢，

麦克风

```
#include <stdlib.h>
#include <stdio.h>
#include <ctype.h>
#define pause system ("pause")
#define cls system ("cls")

//Prototype calculate functions here
void evenOrOdd(int userNumber);
void squareNum(int userNumber);
void cubeNum(int userNumber);
void calcMenu(int userNumber);

void main() {
    //Declare local variables here
int userNumber = 0;
printf("\t\t\tThe amazing three function caluculator\n\n\n");
printf("Please enter a whole number that you would like to calculate\n");
scanf("%d", &userNumber);

calcMenu(userNumber);
}

void calcMenu(int userNumber)
{
char calculateOption;
printf("\nWhat calculation would you like to perform with your number?\n\n");
printf("Press A.) to check if your number is even or odd.\n\n");
printf("Press B.) to calculate the square of your number.\n\n");
printf("Press C.) to calculate the cube of your number.\n\n");
printf("press D.) to exit the program.\n");
scanf("%c", &calculateOption);
calculateOption = toupper (calculateOption);

if (calculateOption == 'A')
{
    evenOrOdd(userNumber);
}
else if (calculateOption == 'B')
{
    squareNum(userNumber);
}
else if (calculateOption == 'C')
{
    cubeNum(userNumber);
}
else if (calculateOption == 'D')
{
    system("cls");
    printf("Thank You for using my amazing calculator.\n\n");
    system ("pause");
    system ("exit");
}
else
{
    printf("Please enter a valid choice");
    calcMenu(userNumber);
}

}

void evenOrOdd(int userNumber) {
userNumber = userNumber %2;
if (userNumber == 0)
{
    printf("Your number is even. \n");
}
else
{
    printf("Your number is odd. \n");
}

}
void squareNum(int userNumber) {

}
void cubeNum(int userNumber){

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:34:20.313

当您阅读输入时，`scanf`您必须按`Enter`键以使程序继续。您的`scanf`调用从输入中读取单个字符，但`Enter`仍将密钥留在输入缓冲区中，以便下次调用时读取`scanf`。

有一个非常简单的技巧可以解决这个问题：在`scanf`格式字符串的`"%c"`. 这将`scanf`跳过空格。

```
scanf("%c ", &calculateOption); 
```

如果您使用调试器单步执行代码，您会很容易看到这`calculateOption`将是换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T00:42:22.893

首先，您可以将所有这些 printf 语句压缩到一个函数中以节省额外的调用。

接下来，您可能应该缩进您的函数，我无法一眼看出一个从哪里开始，另一个在哪里结束。

三、不要用`system("pause")`，用`getchar()`。

第四，这是可选的，您可能希望将这些 if 语句转换为 switch 语句。

**现在**，关于你的问题。首先，不要使用`scanf("%c", &calculateOption)`，也可以`getchar()`在这里使用。在这种情况下，我会这样写 calcMenu()：

```
int calcMenu(int userNumber){
    printf("\nWhat calculation would you like to perform with your number?\n\n\
    Press A.) to check if your number is even or odd.\n\n\
    Press B.) to calculate the square of your number.\n\n\
    Press C.) to calculate the cube of your number.\n\n\
    Press D.) to exit the program.\n");

    switch(toupper(getchar())){
        case 'A':
            evenOrOdd(userNumber);
            break;
        case 'B':
            squareNum(userNumber);
            break;
        case 'C':
            cubeNum(userNumber);
            break;
        case 'D':
            system("cls"); //this is bad, really.
            printf("Thank You for using my amazing calculator.\n\n");
            getchar();
            return 0;
        default:
            printf("Please enter a valid choice: ");
            calcMenu(userNumber);
            break;
    }
} 
```

此外， main 应该始终返回一个值。`void main`是不好的做法。

免责声明：代码未经测试，无论如何您都不应该复制/粘贴它。我也不知道你是否被迫使用某些东西......

# php - 从 MySQLi 字段获取类型规范字符

> ID：14370307
> 
> 赞同：2
> 
> 时间：2013-01-17T00:24:32.970
> 
> 标签：php, mysql, database, mysqli, prepared-statement

在 MySQLi 的准备好的语句 API 中，[`bind_param`](http://php.net/manual/en/mysqli-stmt.bind-param.php)采用类型规范 char。

![类型规范字符](../Images/13ee3236b3e5ea7c9b1230f43073fc6a.png)

MySQLi[`fetch_field`](http://php.net/manual/en/mysqli-result.fetch-field.php)返回一个对象，该对象具有与该字段相关的几个属性。但是，类型规范 char 不是可用属性之一（`$field->type`返回与常量对应的整数，而不是类型规范 char）。

从 MySQLi 字段中获取类型规范字符的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:56:52.540

只需将所有内容都视为字符串，然后使用 type `s`。mysql 服务器在处理查询时自动将字符串转换为列的实际数据类型，例如，您可以编写类似的东西`set int_col = '32'`，它会将其视为`set int_col = 32`.

有一点额外的开销，因为数字数据不会以二进制形式传输；服务器将不得不解析它们。但除非您正在执行大量 INSERT 或 UPDATE 语句，否则这可能可以忽略不计。

# java - 正确使用switch语句

> ID：14370312
> 
> 赞同：1
> 
> 时间：2013-01-17T00:25:52.720
> 
> 标签：java, switch-statement

我要解决的问题是编写一段，当我说`1`我的程序`thumb`在歌曲的第二行说。当我的程序说它`2`应该`shoe`在我的歌曲的第二行说。我的程序没有按计划运行，我不确定我是否在`for`循环内正确使用了 switch 语句，或者我的程序顺序是否错误。

```
import acm.program.*;

public class SingChildSong extends ConsoleProgram {
    public void run() {
        for (int i = 1; i < 3; i++){
            println ("This old man, he played" + i);

            switch (i) {
                case 1: println("thumb"); break;
                case 2: println("shoe"); break;
                case 3: println("knee"); break;
            }

            println ("He played knick-knack on my"  + (i));
            println ("With a knick-knack, paddy-whack");
            println ("Give your dog a bone.");
            println ("This old man came rolling home.");

            println ( "" );
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T00:29:23.817

这不是 switch 语句，而是 for 循环。循环在 i 小于 3 时终止，而不是在它小于或等于 '<=' 时终止

一种懒惰的测试方法是打印 i 的值作为快速而肮脏的测试。如果你想花哨，你可以添加一个断点并在循环期间检查 i 的值。更好的是，做一个 JUnit 测试，因为主要方法是针对娘娘腔的。

```
@Test
public void tester(){
    // I <3 zero
    for( int i = 0; i < 3; i++ ) {
        String bodyPart = getBodyPart(i);
        // Dumb test example
        if( i == 0 ) {
           assertTrue( "thumb" ==  bodyPart );
        } else if ( i == 1 ) {
           assertTrue( "shoe" == bodyPart );
        } else if ( i == 2 ) {
           assertTrue( "knee" == bodyPart );
        }
    }
}

public String getBodyPart(int i) {
    switch(i){
        case 1: 
            return "thumb";
        case 2:
            return "shoe";
        case 3:
            return "knee";
        default:
            return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T00:37:08.707

如果我做对了，您打算这样做：

```
...
for (int i = 1; i <= 3; i++){
    System.out.println ("This old man, he played " + i);
    String word;

    switch (i) {
    case 1: word = "thumb"; break;
    case 2: word = "shoe"; break;
    case 3: word = "knee"; break;
    }

    System.out.println ("He played knick-knack on my "  + word);
    System.out.println ("With a knick-knack, paddy-whack");
    System.out.println ("Give your dog a bone.");
    System.out.println ("This old man came rolling home.");

    System.out.println ( "" );
 }
... 
```

正如您所说，您的书中尚未研究字符串，没有字符串的正确答案应该是：

```
...
for (int i = 1; i <= 3; i++){
    System.out.println ("This old man, he played " + i);

    switch (i) {
    case 1:
        System.out.println ("He played knick-knack on my thumb");
        break;
    case 2:
        System.out.println ("He played knick-knack on my shoe");
        break;
    case 3: 
        System.out.println ("He played knick-knack on my knee");
        break;
    }

    System.out.println ("With a knick-knack, paddy-whack");
    System.out.println ("Give your dog a bone.");
    System.out.println ("This old man came rolling home.");

    System.out.println ( "" );
 }
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:31:35.333

好的，如果您还没有研究过字符串，那么请考虑一下您希望它显示的顺序。抱歉，我之前犯了一个错误，现在我已经正确编辑了答案。

```
public void run() {
        for (int i = 1; i <= 3; i++){
            println ("This old man, he played " + i);

            println ("He played knick-knack on my");
            //print your word 
            switch (i) {
              case 1: println("thumb"); break;
              case 2: println("shoe"); break;
              case 3: println("knee"); break;
               }

            println ("With a knick-knack, paddy-whack");
            println ("Give your dog a bone.");
            println ("This old man came rolling home.");

            println ( "" );
         }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T00:36:42.823

您永远不会将字符串分配给 i，这将是致命的，因为它是您循环的计数器变量。我想你必须使用 switch 语句，所以我会发布一个有效的解决方案，然后解释它为什么有效。

```
for( int i=0; i<3; i++){
   println ("This old man, he played" + i);
    String instrument;

    switch (i) {
    case 0: instrument = "thumb"; break;
    case 1: instrument = "shoe"; break;
    case 2: instrument = "knee"; break;
    }

    println ("He played knick-knack on my "  + instrument);
    println ("With a knick-knack, paddy-whack");
    println ("Give your dog a bone.");
    println ("This old man came rolling home.");

    println ( "" );

 } 
```

变量 i 只是循环的计数器，因此如果打印 i，则打印数字。这就是为什么我在 switch 语句之前定义了一个字符串变量“instrument”，然后将它分配给适当的值（请记住，循环从 0 开始计数，所以你必须调整你的案例或循环，你也可以这样做(int i=1; i<4; i++))

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T00:37:04.053

```
for (int i = 1; i < 3; i++) 
```

您的 for 循环块将在`i = 3`. 这意味着`i < 3`等于假。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T00:39:48.417

为什么你在运行方法中有这个？Run 是[Thread](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)和[Runnable](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runnable.html)对象中的一种特殊方法，用于多线程。

为了使您的程序运行，您应该尝试将其移至另一种方法。尝试将其移至主要位置。

此外，您正在打印 i，而不是单词。尝试 ：

```
public class Song{
    public static void main(String[] args){

    String[] arr = {"thumb","shoe","knee"};

    for (int i = 0 ; i < 3 ; i++){
        System.out.println("this old man he played "+arr[i]);
    }
}
} 
```

这样就不需要 switch 语句。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-17T00:40:19.137

您需要：

1.  使用`System.out.println`代替`println` **OR**
2.  使用`import static java.lang.System.out.println;`.

鉴于您在本书的早期阶段，您可能`import static`还没有完全做到——这是一个相当先进的结构。所以使用解决方案**1**。

```
System.out.println("He played knick-knack on my" + (i)); 
```

**编辑：**另外，其他一些人提出了一个很好的观点——使用`public static void main(String args[])`，而不是`run()`方法。当您运行 Java 程序时，它调用的`main()`是 ，而不是`run()`.

# html - IE8 是否在连字符上换行？

> ID：14370314
> 
> 赞同：0
> 
> 时间：2013-01-17T00:26:25.777
> 
> 标签：html, internet-explorer-8, wbr

`<wbr>`当连字符的单词无法放入一行（或行）上剩余的空间时，我使用该标签强制 Firefox 换行，但根据[quirksmode 网站](http://www.quirksmode.org/oddsandends/wbr.html)， IE8 根本不尊重此标签。

我无法检查自己，但 IE8 会如何处理以下标记？假设列宽 200px，font-size 16px，连字号 can't fit 。

```
<p>Blah, blah, blah, cloud-<wbr>based environment, blah, blah, blah.</p> 
```

这是一张让事情更清晰的图像，显​​示了 FF 在有标签和没有`<wbr>`标签的情况下会发生什么。

![在此处输入图像描述](../Images/89f13632c778c8ee58223401b6daaf91.png)

我意识到 IE8 会忽略该标签，但它会像 Chrome 和 Safari 那样在连字符上换行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:33:04.423

是的，它确实。您可以在 Internet Explorer 中按 F12 或转到工具 > 开发人员工具，然后将浏览器模式和文档模式更改为 IE8 来检查这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:04:38.413

默认情况下，IE 将连字符视为允许在其后换行。至少从 IE 5 开始，这就是 IE 的行为。如果您需要在其他上下文中允许换行，那么有几种[方法](http://www.cs.tut.fi/~jkorpela/html/nobr.html)（您可以组合使用），例如`<wbr>`，零宽度空格字符和连字符。

# c# - 无法识别添加 Windows 功能

> ID：14370322
> 
> 赞同：4
> 
> 时间：2013-01-17T00:27:28.103
> 
> 标签：c#, windows, powershell, exception-handling

我正在尝试使用 C# 运行 powershell 命令，但在调用管道时我不断收到错误消息。我想知道是否有人知道为什么我不断收到 add-windowsfeature 无法识别。提前致谢。

```
private static void RunScript(string name)
{
    InitialSessionState initial = InitialSessionState.CreateDefault();
    initial.ImportPSModule(new[] { "ServerManager"});
    Runspace runspace = RunspaceFactory.CreateRunspace(initial); 
    // create Powershell runspace

    runspace.Open();

    RunspaceInvoke runSpaceInvoker = new RunspaceInvoke(runspace);
    runSpaceInvoker.Invoke("Set-ExecutionPolicy Unrestricted");

    Pipeline pipeline = runspace.CreatePipeline();
    Command cm = new Command("Import-module");
    cm.Parameters.Add("name","ServerManager");
    pipeline.Commands.Add(cm);
    Command command = new Command("add-windowsfeature"); 
    command.Parameters.Add(null, name);  
    pipeline.Commands.Add(command);

    var a = pipeline.Invoke();
    foreach (var psObject in a)
    {
        Console.WriteLine(psObject);
    }

    runspace.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T21:29:00.573

ServerManager 是一个仅限 64 位的模块（它不存在于下`C:\Windows\SysWOW64\WindowsPowerShell\v1.0\Modules`但将存在于下`C:\Windows\System32\WindowsPowerShell\v1.0\Modules`）。编译为 x64，您的代码应该可以工作。

# windows-runtime - 运行windows认证工具包2.2版出错

> ID：14370324
> 
> 赞同：1
> 
> 时间：2013-01-17T00:27:39.020
> 
> 标签：windows-runtime, windows-store-apps

我最近将 Windows 认证工具包更新到了​​ 2.2 版，自从更新以来，我一直无法针对我的任何 Windows 商店应用程序运行该工具包。

当我在 Visual Studio 中创建包并将工具包作为向导的一部分运行时，我收到以下错误：

由于未找到指定的 Windows 商店应用程序，{0} 无法继续测试。请验证 packagefullname 是否正确。

当我将工具包作为独立应用程序运行时，我选择了“windows store 应用程序”，但它从未找到我的任何应用程序。

有人有什么想法或建议可以帮助我拔掉剩下的头发吗？

# ios - GCD - 用于更新 UIImageView 的主线程与后台线程

> ID：14370325
> 
> 赞同：16
> 
> 时间：2013-01-17T00:27:44.510
> 
> 标签：ios, grand-central-dispatch

*我是 GCD 和块的新手，我正在轻松进入它。*

**背景：**我正在使用 ALAssetsLibrary 为 UIScrollView 开发延迟加载例程。当我的 UIScrollView 加载时，我用`aspectRatioThumbnails`我的 ALAsset 填充它，然后当用户滚动时，我调用下面的例程来加载`fullScreenImage`当前正在显示的 ALAsset。它似乎工作。

*（如果有人有更好的延迟加载例程，请发表评论。我已经查看了我能找到的所有内容以及 WWDC 视频，但他们似乎更多地处理平铺或比我需要的复杂得多）*

**我的问题：**我使用后台线程来处理加载`fullScreenImage`，完成后我使用主线程将其应用于 UIImageView。**我需要使用主线程吗？**我已经看到所有 UIKit 更新都需要在主线程上进行，但我不确定这是否适用于 UIImageView。我想它确实如此，因为它是一个屏幕元素，但后来我意识到我根本不知道。

```
- (void)loadFullSizeImageByIndex:(int)index
{
    int arrayIndex = index;
    int tagNumber = index+1;
    ALAsset *asset = [self.assetsArray objectAtIndex:arrayIndex];

    __weak typeof(self) weakSelf = self;

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
        UIImage *tmpImage = [[UIImage alloc] initWithCGImage:asset.defaultRepresentation.fullScreenImage];

        if ([weakSelf.scrollView viewWithTag:tagNumber] != nil){

            dispatch_async(dispatch_get_main_queue(), ^{

                if ([weakSelf.scrollView viewWithTag:tagNumber]!= nil){
                    UIImageView * tmpImageView = (UIImageView*)[weakSelf.scrollView viewWithTag:tagNumber];
                    tmpImageView.image = tmpImage;
                }
            });
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-17T00:37:29.967

是的，当你触摸s`UIImageView`或任何其他 UIKit 类时，你需要使用主线程（除非另有说明，例如`UIImage`在后台线程上构造 s 时）。

关于您当前代码的一条评论：您需要`weakSelf`在使用之前分配一个强局部变量。否则，您的条件可能会通过，但`weakSelf`在您实际尝试使用它之前可能会被取消。它看起来像

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
    UIImage *tmpImage = [[UIImage alloc] initWithCGImage:asset.defaultRepresentation.fullScreenImage];

    __strong __typeof__(weakSelf) strongSelf = weakSelf;
    if ([strongSelf.scrollView viewWithTag:tagNumber] != nil){

        dispatch_async(dispatch_get_main_queue(), ^{
            __strong __typeof__(weakSelf) strongSelf = weakSelf;
            if ([strongSelf.scrollView viewWithTag:tagNumber]!= nil){
                UIImageView * tmpImageView = (UIImageView*)[strongSelf.scrollView viewWithTag:tagNumber];
                tmpImageView.image = tmpImage;
            }
        });
    }
}); 
```

从技术上讲，您不需要在后台队列的第一个条件中执行此操作，因为您只是在那里取消引用它一次，但是在触摸它之前将弱变量存储到强变量中总是一个好主意课程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T00:39:05.133

如果需要在 中渲染图像`UIImageView`，则需要在主线程中执行此操作。除非您在代码中显示的主队列中执行此操作，否则它将不起作用。任何 UI 渲染都是如此。

```
if ([weakSelf.scrollView viewWithTag:tagNumber]!= nil){
    UIImageView * tmpImageView = (UIImageView*)[weakSelf.scrollView viewWithTag:tagNumber];
    tmpImageView.image = tmpImage;
} 
```

根据[Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)，

> **线程注意事项：**对应用程序用户界面的操作必须在主线程上进行。因此，您应该始终从应用程序主线程中运行的代码调用 UIView 类的方法。唯一可能不是绝对必要的情况是在创建视图对象本身时，但所有其他操作都应在主线程上进行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T10:01:20.560

是的，您需要使用主线程，因为任何 UI 更改都需要在主线程中完成。

至于使用 GCD，它用于利用设备上的多核。至于强弱的自己

**强大的自我**：你可能想要一个强大的自我，因为在你的代码中

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
(<your class> *) *strongSelf = weakSelf;
    UIImage *tmpImage = [[UIImage alloc] initWithCGImage:asset.defaultRepresentation.fullScreenImage];

    if ([strongSelf.scrollView viewWithTag:tagNumber] != nil){

        dispatch_async(dispatch_get_main_queue(), ^{

            if ([strongSelf.scrollView viewWithTag:tagNumber]!= nil){
                UIImageView * tmpImageView = (UIImageView*)[strongSelf.scrollView viewWithTag:tagNumber];
                tmpImageView.image = tmpImage;
            }
        });
    }
}); 
```

假设您有一个进行 API 调用的视图，这需要时间，所以您切换回另一个视图，但您仍然希望下载图像然后使用 strong ，因为该块拥有自身，因此下载了图像。

**弱自我**：如果在上述情况下您不想在移动到不同视图后下载图像，请使用弱自我，因为该块不拥有任何自我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-10T15:53:33.090

如果你不在 Kevin Ballard 建议的代码中使用 strongSelf，那么它可能会因为 weak 被取消而导致崩溃。

一个好的做法是在创建时甚至检查 strong 是否为非 nil

```
strongSelf = weakSelf

   if(strongSelf)
   {
       // do your stuff here 
   } 
```

# svn - svn中两个标签的强制/覆盖合并

> ID：14370327
> 
> 赞同：0
> 
> 时间：2013-01-17T00:28:01.200
> 
> 标签：svn, merge

我想知道是否有可能以任何方式合并`tag_1`到`tag_2`这样的冲突中，默认情况下会导致`tag_1`'s 文件覆盖`tag_2`'s 文件。`tag_1`此外，如果存在不存在的文件/目录，`tag_2`则合并后将存在。

例如，如果我要执行：

```
svn merge http://host/svn/tags/tag_1 http://host/svn/tags/tag_2 
```

这将强制覆盖并提交所有更改，然后如果我签出`tag_2`，所有`tag_1`附加/更改的文件都将在工作副本中。

目前，我使用一种方法来运行 diff，然后`svn rm`在任何同名和路径的文件上运行`tag_2`，然后`svn cp`在新文件上运行，但是随着版本的更改文件数量的增加，它变得非常低效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T01:02:04.360

1.  使用“2-URL 合并”作为“最后手段”，此处不需要
2.  `svn help merge`仔细阅读命令选项
3.  如果你想合并**到**tag2，你有：

    *   将 tag_2 检出到新的工作副本中，或者如果它存在，则将其设为 Clean WC：无本地修改，无混合修订
    *   在这个 WC`svn merge http://host/svn/tags/tag_1 --accept 'mine-conflict'`中做这个把戏（没有冲突的部分将被合并，对于有冲突的块“我的” - 即 tag_2 版本 - 将被自动选择）
    *   提交合并结果

**编辑：**测试运行以回复评论

**初始状态（使用主干和分支）**

```
svn log -q -v file:///Z:/Repo/
------------------------------------------------------------------------
r3 | Badger | 2013-01-17 10:07:55 +0600 (Чт, 17 янв 2013)
Changed paths:
   A /branches/MyFixes (from /trunk:2)
------------------------------------------------------------------------
r2 | Badger | 2013-01-17 10:03:32 +0600 (Чт, 17 янв 2013)
Changed paths:
   A /trunk/Data
   A /trunk/Data/b.txt
   A /trunk/Data/c.txt
   A /trunk/a.txt
------------------------------------------------------------------------
r1 | Badger | 2013-01-17 09:57:52 +0600 (Чт, 17 янв 2013)
Changed paths:
   A /branches
   A /tags
   A /trunk
------------------------------------------------------------------------

svn ls -R file:///Z:/Repo/trunk
Data/
Data/b.txt
Data/c.txt
a.txt

svn ls -R file:///Z:/Repo/branches/MyFixes
Data/
Data/b.txt
Data/c.txt
a.txt 
```

**更改分支（编辑文件，添加新对象）**

```
svn log -q -v file:///Z:/Repo/ -l 1
------------------------------------------------------------------------
r4 | Badger | 2013-01-17 10:26:40 +0600 (Чт, 17 янв 2013)
Changed paths:
   M /branches/MyFixes/Data/b.txt
   M /branches/MyFixes/Data/c.txt
   A /branches/MyFixes/Data/d.txt
   A /branches/MyFixes/NewData
   A /branches/MyFixes/NewData/e.txt
   A /branches/MyFixes/NewData/f.txt
   M /branches/MyFixes/a.txt
------------------------------------------------------------------------ 
```

**控制“M”文件的差异**

```
svn diff file:///Z:/Repo/trunk/a.txt file:///Z:/Repo/branches/MyFixes/a.txt
Index: a.txt
===================================================================
--- a.txt       (.../trunk/a.txt)       (revision 4)
+++ a.txt       (.../branches/MyFixes/a.txt)    (revision 4)
@@ -1,2 +1,2 @@
-String 1
-String 2
+A String 1
+A String 2 
```

* * *

```
svn diff file:///Z:/Repo/trunk/Data/b.txt file:///Z:/Repo/branches/MyFixes/Data/b.txt
Index: b.txt
===================================================================
--- b.txt       (.../trunk/Data/b.txt)  (revision 4)
+++ b.txt       (.../branches/MyFixes/Data/b.txt)       (revision 4)
@@ -1,2 +1,3 @@
-Data String 1
-Data String 2
+The Data String One
+The Data String Two
+The Data String Three 
```

* * *

```
svn diff file:///Z:/Repo/trunk/Data/c.txt file:///Z:/Repo/branches/MyFixes/Data/c.txt
Index: c.txt
===================================================================
--- c.txt       (.../trunk/Data/c.txt)  (revision 4)
+++ c.txt       (.../branches/MyFixes/Data/c.txt)       (revision 4)
@@ -1,2 +1,3 @@
-String 1 data
-String 2 data
+1 Los datos de cadena
+Cadena 2 Datos
+Cadena 3 Datos 
```

**尝试合并**

```
z:\Trunk>svn merge file:///Z:/Repo/branches/MyFixes --accept "mine-conflict" --dry-run
--- Merging r3 through r4 into '.':
A    NewData
A    NewData\e.txt
A    NewData\f.txt
U    Data\b.txt
U    Data\c.txt
A    Data\d.txt
U    a.txt 
```

印象 - 没有冲突（如预期），无树冲突（如我所料），合并的分歧文件，来自分支的新文件 - 添加

**真正的合并**

```
z:\Trunk>svn merge file:///Z:/Repo/branches/MyFixes --accept "mine-conflict"
--- Merging r3 through r4 into '.':
U    Data\b.txt
U    Data\c.txt
A    Data\d.txt
U    a.txt
A    NewData
A    NewData\e.txt
A    NewData\f.txt
--- Recording mergeinfo for merge of r3 through r4 into '.':
 U   . 
```

**提交合并**

```
svn log -q -v file:///Z:/Repo/ -l 1
------------------------------------------------------------------------
r5 | Badger | 2013-01-17 10:50:35 +0600 (Чт, 17 янв 2013)
Changed paths:
   M /trunk
   M /trunk/Data/b.txt
   M /trunk/Data/c.txt
   A /trunk/Data/d.txt (from /branches/MyFixes/Data/d.txt:4)
   A /trunk/NewData (from /branches/MyFixes/NewData:4)
   M /trunk/a.txt
------------------------------------------------------------------------ 
```

## 注意 - 问题！

也许我在分支 (a/b/c) 中错误地编辑了文件，但由于某些奇怪的原因`--accept "mine-conflict"`被忽略了，合并后的文件等于其分支的父级。

**补充：**好的，我忘记在合并之前在主干中编辑 a/b/c。Mea culpa，在添加这一点后必须完全按预期工作

# xcode - Mac OS X 中的 syscall_sw.h 在哪里？

> ID：14370328
> 
> 赞同：1
> 
> 时间：2013-01-17T00:28:05.043
> 
> 标签：xcode, macos, assembly

`syscall_sw.h`Mac OS X中的文件在哪里？

我用它来编程在程序集中找到的类，但我只能在 Internet 上找到该文件。我想在我的实际操作系统文件系统上找到它。我已经下载了所有 XCode 并安装了组件和文档，但我仍然找不到该文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:47:37.707

它不是 public* 头文件——但是，它可以在内核源代码中找到：

[http://www.opensource.apple.com/source/xnu/xnu-2050.9.2/osfmk/kern/syscall_sw.h](http://www.opensource.apple.com/source/xnu/xnu-2050.9.2/osfmk/kern/syscall_sw.h)

*：表示除非您在内核中工作，否则您不需要它。

# java - 变量可能没有初始化，不明白为什么

> ID：14370331
> 
> 赞同：2
> 
> 时间：2013-01-17T00:28:35.430
> 
> 标签：java

因此，我正在学习 Java 入门课程，制作一个成绩计算器，并增加了在这组条件下调整成绩的任务：

如果学生完成了奖金作业：

*   考试 1 成绩是：
    *   如果考试 2 的成绩高于原始考试 1 的成绩，则为考试 2 成绩的 80%，或
    *   原始考试 1 级。
*   考试 2 成绩是：
    *   如果考试 3 的成绩高于原始考试 2 的成绩，则为考试 3 成绩的 80%，或
    *   原始考试 2 级。

总是首先对考试 1 进行修改。

我首先在考试 1 年级尝试了这个，尝试分配`g1n`值`g2 * 0.8`if `(g2 * 0.8) > g1`，并赋予它 else 的值`g1`。我很难看到如何`g1n`没有被初始化，因为在我看来我刚刚列出的条件是详尽的。

以下是我的代码的相关部分。是什么赋予了？

```
// declare variables
int g1;
int g2;
int g3;
char grade;
double g1n;
double g2n;
double avg;
String bonus;

// get input
System.out.println("***************  Grade Computer *************");
System.out.println("Enter the student's first name: ");
String first = input.next();
System.out.println("Enter the student's middle initial: ");
String mid = input.next();
System.out.println("Enter the student's last name: ");
String last = input.next();
System.out.println("Enter EXAM 1 grade: ");
g1 = input.nextInt();
System.out.println("Enter EXAM 2 grade: ");
g2 = input.nextInt();
System.out.println("Enter EXAM 3 grade: ");
g3 = input.nextInt();
System.out.println("Was bonus work done? [yes/no]: ");
bonus = input.next();
System.out.println(g1 + " " + g2 + " " + g3 + " " + bonus);

// adjust exam scores if necesssary
if (bonus.equals("yes")) {
    if (((double)g2 * 0.8) > g1) {
        g1n = ((double)g2 * 0.8);
    } else {
        g1n = (double)g1;
    }
} 
```

**编辑：**

我把它改成了这个，但仍然收到相同的消息......

```
if (bonus.equals("yes")) {
    if (((double)g2 * 0.8) > g1) {
        g1n = ((double)g2 * 0.8);
    }
    if (((double)g3 * 0.8) > g2) {
        g2n = ((double)g3 * 0.8);
    }
} else {
    g1n = (double)g1;
    g2n = (double)g2;
}

// compute average
avg = (g1n + (double)g2 + (double)g3) / 3; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T00:30:28.380

如果`bonus`不等于`"yes"`，则`g1n`永远不会设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T00:36:00.937

唯一`g1n`设置的位置是在`if (bonus.equals("yes"))`子句中。如果`bonus`不等于`"yes"`，则`g1n`永远不会设置。您现有的`else`提供了一个`else`到第二个`if`。您不能将不存在的变量添加到另一个变量。

`g1n`如果不等于 ，您可以跟踪您的程序`"yes"`。`g1n`除非 ，否则它不会在任何地方为 赋值`bonus.equals("yes")`。

`if`通过在子句之后说，来解决这个问题`else { g1n = 0; }`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:35:52.437

那是因为 g1n 不能被初始化。

```
if (bonus.equals("yes")) {  // if bonus is yes

    if (((double)g2 * 0.8) > g1) {

        g1n = ((double)g2 * 0.8);
    } 
        else {

            g1n = (double)g1; 
    }

    // compute average
    avg = (g1n + (double)g2 + (double)g3)/3;
} 
```

如果红利不是“是”，g1n 仍然可以为空。因此，只需将平均值计算到您的 if 中即可。

# documentation - 内部源代码文档 - FiM++

> ID：14370335
> 
> 赞同：1
> 
> 时间：2013-01-17T00:29:01.423
> 
> 标签：documentation, programming-languages, comments, javadoc, code-documentation

FiM++ 程序的结构要求它以特定方式以字母结尾和代码作者姓名结尾。

```
Dear Princess Celestia and Stack Exchange and String: A Sample:
    ...
Your faithful student, Southpaw Hare! 
```

根据[语言规范](https://docs.google.com/document/d/1gU-ZROmZu0Xitw_pfC1ktCDvJH5rM85TxxQf5pg_xmg/edit#)，关键字“你忠实的学生”（包括逗号但不包括后面的空格）用作类定义的结束标记，后面的名称是没有句法效果的注释。

作者自动包含在每个文件中（如果不是严格要求的话）的事实让我想知道它是否可以用作类似于 Java Docs 的可解释文档的形式。换句话说，其他程序或编辑器将能够解析出这个名称并以某种方式使用它。

1.  这种基于评论的内部文档的要求是什么？这种特定类型的语法中是否有任何会导致问题的东西？

2.  关键字是否足以适合主题？我突然想到，如果无法使用“您忠实的学生”作为复数形式（或者可能是“您忠实的”或“您的真实”作为模棱两可的版本），列出多个作者会显得尴尬和不自然（并且看起来像一个自然的人类书写的字母是核心设计范式之一）。

3.  如果考虑创建 Java Docs 方法，那么应该包括哪些其他功能？一方面，约会似乎很常见。在信的顶部包含某种形式的日期注释可能看起来很自然，并且不会违反设计范式。

由于该语言是新的，对大多数人来说不熟悉，而且老实说非常愚蠢，所以这里有一些资源需要考虑：

[原始发布公告](http://www.equestriadaily.com/2012/10/editorial-fim-pony-programming-language.html)

[十月跟进](http://www.equestriadaily.com/2012/10/fim-update.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:37:34.990

抱歉，在我之前没有人对此给予任何关注！我正在开发语言，所以我想我已经很好地掌握了答案，在这里。

> 1.  这种基于评论的内部文档的要求是什么？这种特定类型的语法中是否有任何会导致问题的东西？

我从未考虑过像 Javadoc 这样的自动文档技术，因此没有正式的语法。我正在使用的编译器完全丢弃注释，因此它不会支持它，但我相信它不会非常难。

> 1.  关键字是否足以适合主题？我突然想到，如果无法使用“您忠实的学生”作为复数形式（或者可能是“您忠实的学生”或“您的忠实”作为模棱两可的版本），列出多个作者会显得尴尬和不自然（并且看起来像一封自然的小马写信是核心设计范式之一）。

最后一行的作者姓名的想法是针对报告的第一作者，因此以前从未建议过多个作者。但是，`Your faithful students,`会很好地工作！

> 1.  如果考虑创建 Java Docs 方法，那么应该包括哪些其他功能？一方面，约会似乎很常见。在信的顶部包含某种形式的日期注释可能看起来很自然，并且不会违反设计范式。

的确！也许报告*底部*的内容，例如

```
(Written 2013-04-11) 
```

希望这对您有所帮助。你也有一些很棒的想法！你应该加入团队！

# json - 返回 JSON 响应而不构造一个

> ID：14370337
> 
> 赞同：0
> 
> 时间：2013-01-17T00:29:18.717
> 
> 标签：json, rest, jax-rs

假设我有适当的 POJO 类，这是我的 post 方法：

```
@POST
@Path("/post")
@Consumes("application/json")
public Response createProductInJSON(Product product) {

    String result = "Product created : " + product;
    return Response.status(201).entity(result).build();

} 
```

它返回一些字符串。你知道，例如在 GET 方法中，如果你发送一个 POJO 类的实例，它会发送一个 JSON 字符串。我想知道这是否对响应有效。输出应该是这样的：

```
{
    "meta": {
        "code": 201
    },
    "data": {
        "message": "Congratz."
    }
} 
```

是否有捷径或者我必须实现一个简单的 JSON 构造函数代码？

# javascript - 完成了带有神秘缺陷的 JavaScript 计算器

> ID：14370343
> 
> 赞同：-5
> 
> 时间：2013-01-17T00:29:52.017
> 
> 标签：javascript, html, calculator

我已经尝试制作这个计算器一段时间了，对我来说一切看起来都很好，但无论我检查了多少次代码，它都无法工作。我要疯了！这怎么行不通？当我点击计算时没有任何反应！请帮我解决这个问题！

这是JavaScript：

```
function calc() {
    var num1, num2;
    var sign = "+";
    var result;

    function getNum1() {
        num1 = document.getElementById('num1').value;
        return Number(num1);
    }
    function getNum2() {
        num2 = document.getElementById('num2').value;
        return Number(num2);
    }
    function getSign() {
        sign = document.getElementById('sign').value;
        return sign;
    }
    function setResult() {
        document.getElementById('result').value = result;
    }
    function doCalc() {

        var num1 = getNum1();
        var num2 = getNum2();

        if(getSign() == "*") {
            result = num1 * num2; 
        }else if(getSign() == "/") {
            result = num1 / num2;
        }else if(getSign() == "-") {
            result = num1 - num2; 
        }else{
            result = num1 + num2;
        }
        setResult();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:45:49.720

确保`.value`在表单字段和`.innerHTML`其他所有内容（`span`s、`p`s 等）上使用。`.innerHTML`获取或设置元素的内部。

另外，确保提交按钮有一个事件处理程序`onclick`——最简单的方法是`<input onclick="doCalc();" ... />`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T00:42:46.897

如果您正在调用`doCalc()`，则无法访问它，因为它位于`calc()`函数内部。

如果您正在调用`calc()`，它不会做任何事情，因为它从不调用`doCalc()`。

如果您将`doCalc()`调用添加到函数的末尾`calc()`，并且您的`calc()`函数是可访问的，那么它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T02:46:04.833

我会尝试解耦 calc() 函数。这是一种解决方法。

```
var Calculator = {
    "eval" : function(operator, x, y) {
                 switch( operator ) {
                     case "+":
                         return (x + y);
                     case "-":
                         return (x - y);
                 }
             }
} 
```

更好的是，

```
 var Calculator = {
    "eval" : function(operator) {
                 var args = Array.prototype.slice.call(arguments);
                 args.splice(0,1); // lazy hack to remove the argument for the operator

                 switch( operator ) {
                     case "+":
                         return args.reduce( function(x,y){ return (x + y); } );
                     case "-":
                         return args.reduce( function(x,y){ return (x - y) } );
                 }
             }
} 
```

这种方式更容易重用和测试。

```
var answer = Calculator.eval( '+', 20, 20, 2 );  // yay, prefix notation 
```

第二个变体使用高阶函数“reduce”，将数组缩减为单个值。

以下是reduce如何工作的步骤。我已经提取了 lambda 函数以使事情更清楚一些。

```
var arr = [20, 20, 20];
function sum(x, y){ return (x + y); }

function reduceMagic(arr){
    var temp = sum(arr[0], arr[1]);  // temp -> 40
    temp =  sum(temp, arr[2]);       // temp -> 42
    return temp;
} 
```

# javascript - 在不影响其他对象的情况下重新排序对象

> ID：14370345
> 
> 赞同：1
> 
> 时间：2013-01-17T00:30:27.053
> 
> 标签：javascript, database, algorithm, language-agnostic

我有一个项目列表（想想目录中的文件），其中这些项目的顺序由用户任意管理。用户可以在其他项目之间插入项目、删除项目以及移动它们。

将排序存储为每个项目的属性的最佳方法是什么，以便在插入或移动特定项目时，其他项目的排序属性不受影响？这些对象将存储在数据库中。

理想的实现将能够支持无限数量的插入/重新排序。

我用来确定该方法局限性的测试如下：

有 3 个项目 x,y,z，重复取左边的项目，放在另外两个之间；然后把右边的物体放在另外两个之间；继续前进，直到违反某些约束。

为了其他人的参考，我已经包含了一些我尝试过的算法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T00:35:01.153

**1.1。小数，双精度**

将订单存储为小数。要在具有 x 和 y 顺序的两个项目之间插入一个，请将其顺序计算为 x/2+y/2。

*限制：*

精度或性能。使用双打，当分母变得太大时，我们最终得到 x/2+y/2==x 。在 Javascript 中，它只能处理 25 次随机播放。

```
function doubles(x,y,z) {
    for (var i = 0; i < 10000000; i++) {
    //x,y,z
    //x->v1: y,v1,z
    //z->v2: y,v2,v1
      var v1 = y/2 + z/2
      var v2 = y/2 + v1/2
      x = y
      y = v2
      z = v1

      if (x == y) {
        console.log(i)
        break
      }
    }
}

>doubles(1, 1.5, 2)
>25 
```

**1.2\. 小数，BigDecimal**

[与上面相同，但使用来自https://github.com/iriscouch/bigdecimal.js](https://github.com/iriscouch/bigdecimal.js)的 BigDecimal 。在我的测试中，性能迅速下降，无法使用。对于其他框架来说，它可能是一个不错的选择，但对于客户端 JavaScript 则不然。

我把那个实现扔掉了，再也没有了。

**2.1。分数**

将订单存储为（分子，分母）整数元组。要在 xN/xD 和 yN/yD 之间插入一个项目，请给它一个 (xN+yN)/(xD+yD) 的值（可以很容易地显示在其他两个数字之间）。

*限制：*

精度或溢出。

```
function fractions(xN, xD, yN, yD, zN, zD){
    for (var i = 0; i < 10000000; i++) {
    //x,y,z
    //x->v1: y,v1,z
    //z->v2: y,v2,v1

      var v1N = yN + zN, v1D = yD + zD
      var v2N = yN + v1N, v2D = yD + v1D

      xN = yN, xD=yD

      yN = v2N, yD=v2D

      zN = v1N, zd=v1D

      if (!isFinite(xN) || !isFinite(xD)) { // overflow
        console.log(i)
        break
      }
      if (xN/xD == yN/yD) { //precision
        console.log(i)
        break
      }
    }
}

>fractions(1,1,3,2,2,1)
>737 
```

**2.2\. GCD 减少的分数**

与上面相同，但使用最大公分母算法减少分数：

```
function gcd(x, y) {
    if(!isFinite(x) || !isFinite(y)) {
        return NaN
    }
    while (y != 0) {
        var z = x % y;
        x = y;
        y = z;
    }
    return x;
}

function fractionsGCD(xN, xD, yN, yD, zN, zD) {
    for (var i = 0; i < 10000000; i++) {
    //x,y,z
    //x->v1: y,v1,z
    //z->v2: y,v2,v1

      var v1N = yN + zN, v1D = yD + zD
      var v2N = yN + v1N, v2D = yD + v1D

      var v1gcd=gcd(v1N, v1D)
      var v2gcd=gcd(v2N, v2D)

      xN = yN, xD = yD
      yN = v2N/v2gcd, yD=v2D/v2gcd
      zN = v1N/v1gcd, zd=v1D/v1gcd

      if (!isFinite(xN) || !isFinite(xD)) { // overflow
        console.log(i)
        break
      }
      if (xN/xD == yN/yD) { //precision
        console.log(i)
        break
      }
    }
}

>fractionsGCD(1,1,3,2,2,1)
>6795 
```

**3\. 字母**

使用字母顺序。这个想法是从一个字母表开始（例如，[32..126] 的 ascii 可打印范围），然后增长字符串。因此，（'O' 是我们范围的中间），在“a”和“c”之间插入，使用“b”，在“a”和“b”之间插入，使用“aO”，等等。

*限制：*

字符串会变得太长以至于不适合数据库。

```
function middle(low, high) {
    for(var i = 0; i < high.length; i++) {
        if (i == low.length) {
            //aa vs aaf
            lowcode=32
            hicode = high.charCodeAt(i)

            return low +  String.fromCharCode( (hicode - lowcode) / 2)
        }

        lowcode = low.charCodeAt(i)
        hicode = high.charCodeAt(i)

        if(lowcode==hicode) {
            continue
        }
        else if(hicode - lowcode == 1) {
            // aa vs ab
            return low + 'O';
        } else {
            // aa vs aq
            return low.slice(0,i) + String.fromCharCode(lowcode + (hicode - lowcode) / 2)
        }
    }
}

function alpha(x,y,z, N) {
    for (var i = 0; i < 10000; i++) {
    //x,y,z
    //x->v1: y,v1,z
    //z->v2: y,v2,v1
        var v1 = middle(y, z)
        var v2 = middle(y, v1)
        x = y
        y = v2
        z = v1

        if(x.length > N) {
            console.log(i)
            break
        }
    }
}

>alpha('?', 'O', '_', 256)
1023
>alpha('?', 'O', '_', 512)
2047 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T00:50:04.607

也许我错过了一些基本的东西，我承认我对 javascript 知之甚少，但你肯定可以实现一个双向链表来处理这个问题吗？然后重新排序 a,b,c,d,e,f,g,h 以在 d 和 e 之间插入 X，您只需取消链接 d->e，链接 d->X，然后链接 X->e 等等。

因为在上述任何情况下，要么您将耗尽精度（并且您的无限排序丢失），要么您最终会得到非常长的排序标识符并且没有内存:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T00:44:10.700

软件公理#1：保持简单，直到你找到一个令人信服的、真实的和经过验证的理由让它变得更复杂。

因此，我认为当 DOM 已经为您执行此操作时，维护您自己的 order 属性是额外且不必要的代码和维护。为什么不让 DOM 保持顺序，您可以在需要时为当前顺序动态生成一组脑残的简单序列号？CPU 的速度非常快，可以在您需要或任何时间更改时为所有项目生成新的序列号。而且，如果你想在服务器上保存这个新的排序，只需将整个序列发送到服务器。

实现这些拆分序列之一，以便您始终可以插入更多对象而无需重新编号任何内容，这将需要大量代码和大量出现错误的机会。在证明您确实需要这种复杂程度之前，您不应该去那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T01:05:16.800

将项目存储在数组中，并用于`splice()`插入和删除元素。

或者这是因为您对链表答案做出的评论而不能接受？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T01:27:00.963

您要解决的问题可能是插入排序，它具有 O(n^2) 的简单实现。但是有一些方法可以改进它。假设有一个与每个元素关联的顺序变量。您可以巧妙地分配这些订单，变量之间的差距很大，并获得摊销 O(n*log(n)) 机制。看看（[插入排序是 nlogn](http://www.cs.sunysb.edu/~bender/newpub/BenderFaMo06-librarysort.pdf)）

# python - 如何重置分配给 Python 2.73 中函数的变量？

> ID：14370349
> 
> 赞同：-2
> 
> 时间：2013-01-17T00:31:26.183
> 
> 标签：python, python-2.7, hasattr

所以基本上一个人帮助我改进了我的代码。问题是，它仍然非常令人失望并且不起作用。我想做的是重置 lenRecur.number 以便我可以再次使用该函数，使用其他字符串并获得正确答案（不是太大的答案）

我想，问题出在 hasattr 上。但我不能删除它，因为如果我这样做了，我的字符串长度计算器将无法工作。

无论如何，即使我在函数后添加 lenRecur.number = 0 ，它仍然不起作用。

这似乎是不可能的，因为当函数点击“返回”时，它就完成了，句号。如果我在“返回”之前重置它，它将返回 0，而不是正确的答案，所以是的，我在这里遇到了很大的麻烦。

```
def lenRecur(aStr):
    if not hasattr(lenRecur, 'number'):
        lenRecur.number = 0
    '''
    aStr: a string

    returns: int, the length of aStr
    '''
    if aStr == '':
        return lenRecur.number
    else:
        lenRecur.number += 1
        return lenRecur(aStr[:-1]) 
```

Ps 我的程序（？）/脚本（？）的目标是测量输入字符串的长度，而不使用 input() 方法。尝试使用更原始的方法重新创建 length() 方法。

脚本必须有许多不同的输入，所以它应该重置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T00:39:30.993

如果您只想要一个递归强度长度函数，那很容易：

```
def len_recur(a_str):
    if not a_str:
        return 0
    else:
        return 1 + len_recur(a_str[1:]) 
```

当然这不是尾递归，但是 Python 无论如何都不会优化尾递归，所以没关系。

如果你只是为了它而希望它是尾递归的——或者因为你已经阅读了 Paul Butler 的[Python 中尾递归](http://paulbutler.org/archives/tail-recursion-in-python/)的技巧并想尝试一下——你仍然不想通过存储累加器来做到这一点作为函数的属性。只需使用定义本地函数的常用技巧（或使用可变默认参数，如果您愿意）：

```
def len_tail_recur(a_str):
    def tail(a_str, acc):
        if not a_str:
            return acc
        else:
            return tail(a_str[1:], acc+1)
    return tail(a_str, 0) 
```

如果你想把它转换成一个真正的尾递归函数，这样它就不会轰炸 1001 个元素的列表，并且不理解上面的 Paul Butler 链接，请参阅我对[Get length of list in Python using recursion 的](https://stackoverflow.com/questions/14326460/get-length-of-list-in-python-using-recursion/14326769#14326769)回答，其中正好解决了这个问题。（该问题的另一个答案还显示了如何使用 log N 递归调用而不是 N 来解决问题，这是解决问题的另一种方法，除非你有不可能的 long `list`s。）

话虽如此，即使您的实现方式是错误的，但它实际上工作得很好。（到目前为止，我一直在对您的代码进行 PEP8 化，使其看起来更像惯用的 Python；从这里开始，我将按原样复制粘贴，但您的真实代码应该类似于上面的代码。）

```
def lenRecur(aStr):
    if not hasattr(lenRecur, 'number'):
        lenRecur.number = 0
    '''
    aStr: a string

    returns: int, the length of aStr
    '''
    if aStr == '':
        return lenRecur.number
    else:
        lenRecur.number += 1
        return lenRecur(aStr[:-1])

print lenRecur('abc')
lenRecur.number = 0
print lenRecur('abcd') 
```

这打印`3`，然后`4`。当然，您必须`lenRecur.number`从函数*外部*进行设置，因为在函数内部您仍然需要该值。但是你可以用同一种包装器来解决这个问题：

```
def lenRecur(aStr):
    lenRecur.number = 0
    '''
    aStr: a string

    returns: int, the length of aStr
    '''
    def recur(aStr):
        if aStr == '':
            return lenRecur.number
        else:
            lenRecur.number += 1
            return recur(aStr[:-1])
    return recur(aStr) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T00:39:00.837

您不必在函数内使用状态变量。如果你想制作一个递归长度计算器，那么就做

```
def lenRecur (aStr):
    if (aStr == ""):
        return 0
    else
        return lenRecur (aStr [:-1]) + 1 
```

另请注意，这种风格没有错误检查等，但出于学习递归的目的，它可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T00:56:36.077

如果您试图通过使用递归实现长度函数来理解递归，那么您可以使用如下内容：

```
#!python
def lenRecur(something, curlen=0):
    if something:
        return lenRecur(something[1:], curlen+1)
    else:
        return curlen 
```

...我不会声称这是特别好的代码。但它应该适用于任何类型的序列（字符串、列表、元组）......只要 [1:] 切片操作不超过正在运行的 Python 实例中的最大递归限制，它就可以工作。

在您的示例中，您试图通过使用 hasattr 来实现类似的概念，以“猴子补丁”具有“数字”属性的函数对象。在我的示例中，我使用默认参数作为将变量向下传递到递归调用的一种方式。

所以在初始调用中 curlen 为零（使用“可选”额外参数调用它会产生虚假结果）。从该调用中，该函数使用原始序列（字符串）的一部分来调用自身，该序列从头部切掉（使其更短），并且可选的（curlen）参数递增。最后，字符串/序列的长度为零，通过之前的每个（递归）调用返回零。

这是实现这一点的一种蹩脚的方式，它可能是讨论尾递归消除的起点（谷歌）。但它可以在没有猴子修补你的函数/对象的情况下工作。

# c# - 绑定 DataGrid.CurrentItem

> ID：14370352
> 
> 赞同：0
> 
> 时间：2013-01-17T00:32:10.807
> 
> 标签：c#, wpf, data-binding, mvvm, key-bindings

全部，

我有一个 DataGrid，它的 CurrentItem 属性绑定到我的 VM 中的某个属性。我还有一个 ICommand 创建一个新对象，将其添加到 DataGrid 的 ItemSource 绑定到的集合中，并将 CurrentItem 设置为等于新对象。

一切都很好，除了由于某种原因在通过代码更改 CurrentItem 绑定时未调用提交。

请参阅下面的相关代码部分。

XAML：

```
<DataGrid ItemSource={Binding} CurrentItem={Binding Path=CurrentItem, UpdateSourceTrigger=PropertyChange, Source={StaticResource VM}}>
    <DataGrid.InputBindings>
        <KeyBinding Command={Binding Path=AddNewItemCommand, UpdateSourceTrigger=PropertyChanged, Source={StaticResource VM}} Key="OemPlus" Modifiers="Control" />
    </DataGrid.InputBindings>
    <DataGrid.Columns>
        ...
    </DataGrid.Columns>
</DataGrid> 
```

虚拟机：

```
Class cVM:INotifyPropertyChanged
{

    /*...RaisePropertyChanged(string str) method implimented here to handle PropertyChanged event*/

    private ICommand _AddNewItemCommand; //defined in Constructor.  Adds new item to Collection and sets CurrentItem property.     
    ICommand AddNewItemCommand{ get { return _AddNewItemCommand; } }

    private object _CurrentItem;
    public object CurrentItem
    {
        get
        {
            return _CurrentItem;
        }
        set
        {
            _CurrentItem = value;
            RaisePropertyChanged("CurrentItem");
        }
    }
    /*...*/
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:54:32.157

不是纯 MVVM 解决方案，但这是我为解决问题所做的：

```
<DataGrid ItemSource={Binding} CurrentItem={Binding Path=CurrentItem, UpdateSourceTrigger=PropertyChange, Source={StaticResource VM}}>
    <DataGrid.InputBindings>
        <KeyBinding Command={Binding Path=AddNewItemCommand, UpdateSourceTrigger=PropertyChanged, Source={StaticResource VM}} CommandParamater={Binding RelativeSource={RelativeSource AncestorType=DataGrid}}" Key="OemPlus" Modifiers="Control" />
    </DataGrid.InputBindings>
    <DataGrid.Columns>
        ...
    </DataGrid.Columns>
</DataGrid> 
```

然后在我的 ICommand （这是一个类型安全的 RelayCommand，见底部的代码）我执行：

```
param => { param.SetCurrentValue(DataGrid.CurrentItemProperty, null); param.Dispatcher.DoEvents() /*An extension that pushes a dispather frame with dispatherpriority.background, which forces events to fire that might be in an asynchronious call-stack */; Object obj = new Object(); /*Whatever your Object is, of course */ MyCollection.Add(obj); CurrentItem = obj; } 
```

无论如何，我希望这可以帮助下一个人。我不知道在这种情况下是否需要 DoEvents 扩展，但为了安全起见，我称之为。此外，对于参数，我的代码知道它是 DataGrid，因为我在构造函数中包含了一个采用泛型的 RelayCommand 版本

（如果有兴趣，请键入安全中继命令。在互联网上的某个地方找到，所以不能完全相信）

```
public class RelayCommand<T> : ICommand
{
    private Action<T> _execute;
    private Predicate<T> _canexecute;

    public RelayCommand(Action<T> execute, Predicate<T> canexecute)
    {
        _execute = execute;
        _canexecute = canexecute;
    }

    public bool CanExecute(object parameter)
    {
        if (_canexecute == null) return false;
        else return _canexecute((T)parameter);
    }

    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    public void Execute(object parameter)
    {
        _execute((T)parameter);
    }
} 
```

# perl - perl hash 可以有多少个元素？

> ID：14370359
> 
> 赞同：4
> 
> 时间：2013-01-17T00:32:34.613
> 
> 标签：perl, hash

我想知道 Perl 哈希数据结构可以容纳多少元素是否有限制？我假设它可能取决于您有多少可用内存。值和密钥大小与它可以容纳多少元素有关吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T00:37:35.043

没有微不足道的固定上限。这取决于系统中可用的内存。如果散列的键较大，则内存不足的速度会比它们较小时更快。与哈希中的值类似；它们越大，内存越快耗尽。

通常，适合散列的元素数量是您的问题中最少的；如果你的内存用完了，你可能应该重新考虑你的算法。

# mongodb - 访问 Appfog MongoDB 服务

> ID：14370364
> 
> 赞同：0
> 
> 时间：2013-01-17T00:33:31.817
> 
> 标签：mongodb, connection, appfog

如何从本地访问在 Appfog 上运行的 MongoDB 服务？我想将它与 gui 应用程序一起使用。可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T20:22:35.660

我假设您正在使用 AppFog MongoDB 插件，并且您要使用的 GUI 工具正在您的机器上本地运行，对吗？

我不清楚您要使用什么 GUI 应用程序，但它很可能接受“mongodb://[user]:[pass]@[host]:[port]/[dbname] 形式的 MongoDB URI” " 您也可以使用此信息通过 db shell 进行连接。或者，如果您的工具不采用 URI，您可以根据格式从 URI 中剪切和粘贴特定值。

如果您使用的是 AppFog MongoDB 插件，则可以从 AppFog 门户的应用页面的 Env 变量部分获取 URI 的值。您还可以按照[https://docs.appfog.com/add-ons/mongolab](https://docs.appfog.com/add-ons/mongolab)之类的方式在代码中获取该值。

您还应该记住，MongoDB 服务通常有自己可以使用的管理 UI。如果您转到 AppFog 上应用程序页面的插件部分，滚动到您的提供商并单击“管理”，您也可以访问他们的工具。

祝你好运，如果我误解了你的问题，请告诉我。

真诚的，埃里克

# python - 检查 txt 文件中是否存在许多 URL (Python)

> ID：14370375
> 
> 赞同：-8
> 
> 时间：2013-01-17T00:35:14.027
> 
> 标签：python, url

我是python的新手，我想做我上面说的，但我没有任何想法，那我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:43:52.213

[打开](http://docs.python.org/2/library/functions.html#open)文件。[遍历这些行](http://docs.python.org/2/library/stdtypes.html#file-objects)。[获取文件](http://docs.python.org/2/library/urllib2.html#urllib2.urlopen)并检查错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:04:38.370

从您评论中的代码（您应该将其放在您的问题中），它是从您正在努力的文件中读取行。

这样做的惯用方式是这样的：

```
with open("hello.txt") as f:
    for line in f:
        print line, 
```

[参见[官方 Python 文档](http://docs.python.org/)中的[**文件对象**](http://docs.python.org/2/library/stdtypes.html#file-objects)] 。

将其插入您的代码中（并使用 删除每行中的换行符和任何空格[**`str.strip()`**](http://docs.python.org/2/library/stdtypes.html#str.strip)）：

```
#!/usr/bin/env python

import mechanize

br = mechanize.Browser()
br.set_handle_redirect(False)
with open('urls.txt') as urls:
    for url in urls:
        stripped = url.strip()
        print '[{}]: '.format(stripped),
        try:
            br.open_novisit(stripped)
            print 'Funfando!'
        except Exception, e:
            print e 
```

请注意，URL 以*方案名称*（通常称为*协议*，例如`http`）开头，后跟冒号和两个斜杠，因此：

> [stackoverflow.com]：无法获取相对参考：未查看任何文档

但

> [http://stackoverflow.com/]：Funfando！

# c - 设置 configure.ac 以在 EL5 上启用 asprintf()，需要 _GNU_SOURCE

> ID：14370380
> 
> 赞同：1
> 
> 时间：2013-01-17T00:35:47.893
> 
> 标签：c, linux, autoconf, rhel5

使用 autoconf 启用`asprintf`和`strndupa`在 EL5 上使用的正确正确方法是什么？

目前我的configure.ac中有这个：

```
AC_CHECK_FUNCS([asprintf strndupa],,
   AC_DEFINE([_GNU_SOURCE], [], [Linux requires _GNU_SOURCE for asprintf]))
AC_CHECK_FUNCS([asprintf strndupa uname],, AC_MSG_ERROR([some needed function(s) not found])) 
```

但是 autoconf 正在缓存测试的负面测试结果，所以第二个`AC_CHECK_FUNCS`失败了。

我可以从第二个测试中排除`asprintf`和`strndupa`，但是如果定义`_GNU_SOURCE`不起作用，我们将不知道失败，直到 make 失败。在 autoconf 中使用这些新的 GNU 扩展的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:20:49.647

`AC_USE_SYSTEM_EXTENSIONS`在进行任何需要的检查之前调用宏`_GNU_SOURCE`。

# ios - trigger.io 如何处理文件上传请求中的带宽限制、超时和重试？

> ID：14370386
> 
> 赞同：1
> 
> 时间：2013-01-17T00:36:24.423
> 
> 标签：ios, mobile, trigger.io, 3g-network

我已经构建了一些需要将大/hirez 图像文件上传到远程服务器的本地 iPhone 应用程序。我发现在 3g 网络上，如果在一定时间内使用过多带宽，请求可能会被阻止/丢弃。我相信大约是 1mb/min

参考： [http 请求和响应的最大有效负载大小，iphone](https://stackoverflow.com/questions/1988375/max-payload-size-for-http-request-and-response-iphone/1988388#1988388)

这是如何在 trigger.io 的 API 调用中处理的：request.ajax(options)？

同样，我在连接失败后多次重试时遇到了麻烦。默认情况下，是否有任何连接重试在幕后进行？...或者第一次连接失败时会触发错误回调？

还！有没有办法从客户端设置请求的超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:41:23.187

目前，我们在请求模块中不提供任何带宽限制。我们使用的 HTTP 库不支持它（请注意，不再维护 ASIHTTPRequest 包装器，所以我们不能使用它，很遗憾......）。

如果我们找到一个替代的 HTTP 库，它确实支持我们需要的内容和限制，那么我们当然会考虑切换到使用它！

FWIW，我们没有任何客户报告由于带宽限制（或缺乏带宽限制）而导致应用商店拒绝的问题。

任何连接或 HTTP 错误都会导致错误回调被调用——你可以控制你想要的任何重试逻辑。

有关超时，请参阅[http://docs.trigger.io/en/v1.4/modules/request.html#ajax](http://docs.trigger.io/en/v1.4/modules/request.html#ajax) - timeout 是选项哈希中的支持参数。

# vb.net - 从 SAPI 5.4 转换为 SAPI 5.1

> ID：14370387
> 
> 赞同：0
> 
> 时间：2013-01-17T00:36:26.810
> 
> 标签：vb.net, voice-recognition, sapi

所以我正在写一个小工具来做语音识别。我刚开始使用 SAPI 5.4 并使用 SRGS xml 文件来设置我的语法。它工作得非常好。我的所有命令都很容易被识别。但是，我试图让这个东西在 XP 上运行，但我遇到了麻烦。我已使用以下代码读取现有的 xml 文件：

```
listener = New SpSharedRecoContext()
AddHandler listener.Recognition, AddressOf Handle_Speech
Dim grammar As ISpeechRecoGrammar
grammar = listener.CreateGrammar()
grammar.CmdLoadFromFile(Utilities.INI.ConfigPath & "\Voice_Commands.xml")
grammar.CmdSetRuleIdState(0, SpeechRuleState.SGDSActive) 
```

但是，SAPI 5.1 在识别命令方面的性能比 5.4 差很多。首先，它启动了一个您必须打开的外部监听器应用程序（我想这还不错）。但我认为主要问题是听者会在我说话时开始进行操作系统操作（打开文件夹等）；所以它显然不仅仅是我预定义的命令集。

有谁知道如何使 SAPI 5.1 像 5.4 一样执行？

谢谢，

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:32:29.607

你确定这是XP？您所描述的行为听起来就像您正在运行 Windows 语音识别，它仅在 Vista 及更高版本上运行。

您需要一个进程内识别器 ( [SpInProcRecoContext](http://msdn.microsoft.com/en-us/library/ms720125%28v=VS.85%29.aspx) )，而不是共享识别器。这需要一些初始化工作（您需要附加引擎和音频源）。[我在我的博客](http://blogs.msdn.com/b/tsfaware/archive/2010/03/01/specifying-parameters-for-an-inproc-recognizer.aspx)上写了一些关于此的内容，但我使用了本机 API 来完成它。

最后，XP上的SR引擎确实不如Vista及以上版本的SR引擎。毕竟，XP SR 引擎已有十多年的历史了。

# jquery - 砌体 Wordpress $(window).load 从不加载

> ID：14370390
> 
> 赞同：0
> 
> 时间：2013-01-17T00:36:45.680
> 
> 标签：jquery, wordpress, jquery-masonry

我正在尝试将 Masonry 集成到现有的修改过的 Wordpress 站点中。我最初将脚本编写为$(document).ready，但遇到了非常常见的计时问题，导致图像重叠，因此我将其重写为$(window).load。图像现在以标准的单列布局加载，而 Masonry 永远不会加载。我尝试过以多种方式编写订单，但还没有看到任何进展。我无法简单地告诉 jQuery 需要注意什么高度，因为每个图像的大小都不同。

*我确定最初的问题是时间问题，因为页面加载了重叠的图像，但是当我点击另一个页面然后返回时，砌体布局会完美地重新加载。

脚本

```
jQuery(function($){
// Grid JS
/*
$(document).bind('keydown', 'Alt+Shift+g', function(){
$("div#container").toggleClass("grid");
});

*/
$('#linky').masonry({
singleMode: true, 
itemSelector: '.boxy' 
});

$('.boxy').hover(function() {
$(this).addClass('boxy-hover');
}, function() {
$(this).removeClass('boxy-hover');
});  
}); 
```

HTML

```
<div id="linky">
<?php
  $linksPosts = new WP_Query();
  $linksPosts->query('showposts=15&cat=-7');
?>
<?php while ($linksPosts->have_posts()) : $linksPosts->the_post(); ?>
<div class="boxy">
<div class="read">
<a href="<?php if(get_post_meta($post->ID, "url", true)) echo get_post_meta($post->ID,      "url", true); else the_permalink(); ?>"><?php the_post_thumbnail(); ?></a>
<?php the_content('Read the rest of this entry &raquo;'); ?>
</div>
</div>
<?php endwhile; ?>
</div> 
```

CSS

```
#linky {
width: 1008px;
height: 100%;
} 

#linky .boxy {
width: 306px;
height: auto;
padding: 0 15px 15px 0;
margin-left: 15px;
}

.read {
height: auto;
}

.read img{
max-width: 306px;
height: auto;
} 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:47:27.757

好吧尝试使用`jQuery`而不是`$`

```
jQuery('#linky').masonry({
    singleMode: true, 
    itemSelector: '.boxy' 
}); 
```

我已经在您的 Chrome 页面上对其进行了测试，并`$('#linky')`给出了错误但`jQuery('#linky')`可以正常工作。好像你在`jQuery.noConflict()`某个地方打电话，因为你也在使用`jQuery(function()`而不是`$(function()`.

# ruby-on-rails - ActiveRecord 和测试的奇怪行为

> ID：14370395
> 
> 赞同：0
> 
> 时间：2013-01-17T00:37:18.543
> 
> 标签：ruby-on-rails, rails-activerecord

我有两个看起来像这样的 ActiveRecord 模型：

```
class Foo < ActiveRecord::Base
  after_commit { puts 'after commit in Foo' }
end

class Bar < ActiveRecord::Base
   after_commit { puts 'after commit in Bar' }
end 
```

然后我有两个看起来像这样的测试：

测试/单元/foo_test.rb

```
class FooTest < ActiveSupport::TestCase
  setup do
    puts 'Creating Foo'
    @foo = Foo.create
 end

 should 'foo exists' do
   assert !@foo.nil?
 end
end 
```

测试/单元/bar_test.rb：

```
class BarTest < ActiveSupport::TestCase
  self.use_transactional_fixtures = false

  setup do
    pits 'Creating Bar'
    @bar = Bar.create
 end

 should 'bar exists' do
   assert !@bar.nil?
 end
end 
```

但是当我一起运行这些测试时，我得到以下输出：

```
Creating Foo
Creating Bar
after commit in Foo
after commit in Bar 
```

我的印象是 Rails 默认将活动记录包装在事务中，然后在每次测试结束时进行回滚。我已经尝试明确设置 use_transactional_fixtures = true 但这并没有产生任何结果。

我的问题是这里发生了什么？似乎活动记录正在为 Bar 创建回调链，然后在测试完成后它没有被清除。我也尝试过使用 DatabaseCleaner 并在测试结束时在拆卸回调中显式销毁 @bar，但这些都没有奏效。

编辑：看起来这可能是rails中的问题：[https ://github.com/rails/rails/pull/3300](https://github.com/rails/rails/pull/3300)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:24:02.293

事实证明，rails 中存在一个错误，即使在实际数据库回滚后，也会导致事务中的记录仍然存在。这是讨论：[https ://github.com/rails/rails/pull/3300](https://github.com/rails/rails/pull/3300)

如果需要，您可以使用以下方法（如 github 线程中所建议的那样）来清除测试运行之间的活动事务：

```
def teardown_fixtures
        if run_in_transaction? && ActiveRecord::Base.connection.open_transactions != 0
    ActiveRecord::Base.connection.rollback_db_transaction

    ActiveRecord::Base.connection.send(:rollback_transaction_records, true)
    if ActiveRecord::Base.connection.instance_variable_get('@_current_transaction_records')
      ActiveRecord::Base.connection.decrement_open_transactions
    end

    ActiveRecord::Base.clear_active_connections!
  end
end 
```

# python - Python 服务器交互

> ID：14370402
> 
> 赞同：0
> 
> 时间：2013-01-17T00:37:49.127
> 
> 标签：python, client-server, messaging

我是python的新手，所以如果问题事先没有意义，请原谅。

我们有一个 python 消息服务器，它有一个文件 server.py，其中包含主要功能。它还有一个类“*server”，main 定义了这个类的一个全局实例，“the_server”。同一文件或差异模块（在同一目录中）中的所有其他函数将此实例导入为“从**主导**入 the_server”。

现在，我的工作是设计一种机制，允许我们从上述消息传递服务器获取最新的消息状态（消息数量等）。

这是 dir 结构： src/ -> 所有 .py 文件只有一个文件有 main

在同一个目录中，我创建了另一个状态服务器，其主函数侦听不同端口上的连接，我希望每次客户端向我询问消息状态时，我都可以调用消息服务器上的函数，该函数返回预期的数字.

如何在我的状态服务器中导入全局实例“the_server”，或者说这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:50:07.863

您可能应该使用单个服务器并设计一个支持多种消息的协议。'send' 消息被发送，'recv' 消息读取任何现有消息，'status' 消息获取服务器状态，'stop' 消息将其关闭，等等。

您可能会查看现有的协议（例如 REST）来寻找想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:03:03.770

除非您的“状态服务器”和“真实服务器”在同一个进程中运行（也就是说，松散地，其中一个导入另一个并启动它），否则仅`from main import the_server`在您的状态服务器中无济于事。这只会给你一个新的、完全独立的实例，`the_server`它什么都不做，然后你可以报告它的状态。

有一些明显的方法可以解决这个问题。

*   正如 Peter Wooster 建议的那样，通过扩展现有协议来处理与状态相关的请求，将状态服务器完全合并到真实服务器中。
*   将状态服务器合并到真正的服务器异步 I/O 实现中，但仍侦听两个不同的端口，每个端口使用不同的协议处理程序。
*   将状态服务器合并到真实的服务器进程中，但使用单独的异步 I/O 实现。
*   将状态信息存储在例如 a`mmap`或 a中，`multiprocessing.Array`而不是直接存储在`Server`对象中，以便状态服务器可以打开相同的`mmap`/etc。并从中读取。（您*也许*可以将`Server`对象本身放在共享内存中，但即使您可以使其工作，我也不建议这样做。）

如果您解释了今天如何处理服务器中的异步 I/O，我可以让这些更具体。选择（或 poll/kqueue/epoll）循环？每个连接的线程？神奇的绿叶？非神奇的协作线程（如 PEP 3156/tulip）？即使只是“我所知道的是我们正在使用`twisted`/ `tornado`/ `gevent`/等，所以无论做什么”就足够了。

# ruby-on-rails - 将用户附加到评论

> ID：14370404
> 
> 赞同：0
> 
> 时间：2013-01-17T00:38:04.883
> 
> 标签：ruby-on-rails, ruby-on-rails-3, comments

我有一个工作的评论系统，它是多态的，因此可以将评论添加到**用户**和**帖子**中。但是，我无法弄清楚如何将登录用户（评论者）附加到评论中。

评论控制器.rb：

```
class CommentsController < ApplicationController
before_filter :authenticate_user!, :only => [:create, :destroy]

def index
  @commentable = find_commentable
  @comments = @commentable.comments
end

def new
    @commentable = find_commentable
end

def create
  @commentable = find_commentable
  @comment = @commentable.comments.build(params[:comment])
  if @comment.save
    flash[:notice] = "Successfully created comment."
    redirect_to get_master
  else
    render :action => 'new'
  end
end

def destroy
    @comment = Comment.find(params[:id])
    @comment.destroy

    respond_to do |format|
      format.html { redirect_to comments_url }
      format.json { head :no_content }
    end
end

protected

def find_commentable
  params.each do |name, value|
    if name =~ /(.+)_id$/
      return $1.classify.constantize.find(value)
    end
  end
  nil
end

def get_master
    @parent = @comment.commentable
    if @parent.respond_to?('commentable_type')
      @comment = @parent
      get_master
    else
      return @parent
    end
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:17:19.373

不就是在前面加上那么简单`save`吗？

```
@comment.commenter = current_user 
```

您也可以在视图中添加它：

```
f.hidden_field :commenter_id, value: current_user.id 
```

我想我更喜欢将它设置在视图中。

# ruby-on-rails - 通过 rails 单选按钮传递多个值

> ID：14370405
> 
> 赞同：0
> 
> 时间：2013-01-17T00:38:34.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我的控制器中有一个创建关联记录的方法：

```
def updating_rating
      rr = ProductRecommendation.new(:rating_id => rating_set.id, :recommendation_id => r.id)
      rr.save!
  end 
```

我的路线设置为：

```
match "/recommendations/updating_rating" => "recommendation#updating_rating", :as => 'update' 
```

在我看来，我有：

```
<div>
<%= form_tag(update_url, :method => :post) do  %>
<%= radio_button_tag(:rating_id, '1', :recommendation_id => rec.recommendation.id) %>
<%= radio_button_tag(:rating_id, '2', :recommendation_id => rec.recommendation.id) %>
<%= radio_button_tag(:rating_id, '3', :recommendation_id => rec.recommendation.id) %>
<% end %>
</div> 
```

这仅将 rating_id 作为值传递。如何将 rating_id + Recommendation_id 都传递给我的控制器方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:50:11.300

您可以添加一个隐藏字段：

```
<%= hidden_field_tag :recommendation_id => rec.recommendation.id %> 
```

然后`:recommendation_id`在你的控制器中获取类似的东西：

```
params[:recommendation_id] 
```

# c# - 如何从具有组件输出的设备获取高清信号并将其显示在 C# 应用程序的窗口中？

> ID：14370407
> 
> 赞同：3
> 
> 时间：2013-01-17T00:39:03.863
> 
> 标签：c#, video, directshow, video-capture, directshow.net

我的任务是从视频设备的组件输出端口获取视频到我们的 C# 应用程序的窗口中。

考虑从 TiVo 或 DVD 播放器（不是 HDMI，因此无需担心 HDCP）获取分量输出并将其显示在窗口中。

我们只是在寻找基本的实时流媒体。没有录音，没有快照，没有视频叠加......只是在一个有声音的窗口中显示源。没有其他的。

我已经搜索了几个月，但没有找到任何可以让我们这样做的设备。

我发现了一些捕获设备，例如 Elgato 的 Game Capture HD，但（有人告诉我）它们不是真正的捕获设备，因此不能与 DirectShow 之类的东西一起使用，因此您不能将它们与第三方软件一起使用，只有他们自己。

我还在亚马逊上找到了便宜的 Component-to-USB 捕获设备，但他们说它们不支持 HD。

注意：我们不想要像 SlingBox 这样的东西 a) 由于它的缓冲区而有太多的延迟，并且 b) 无论如何你都不能将它与你自己的应用程序集成。

那么有人可以给我一些关于去哪里的指示吗？现在已经搜索了几个月，但一无所获，现在时间开始变得至关重要，我在这里的领先优势仍然为零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T01:18:30.330

我找到的唯一不错的高清捕捉设备是来自`BlackMagicDesign`，我在我的 MediaCenter 上使用它来从我的机顶盒录制高清，所以也许他们的产品之一可以帮助你。

[http://www.blackmagicdesign.com/products/intensity/](http://www.blackmagicdesign.com/products/intensity/)

# javascript - 在 elFinder 中禁用“打开”

> ID：14370411
> 
> 赞同：0
> 
> 时间：2013-01-17T00:39:35.623
> 
> 标签：javascript, asp.net-mvc-4, elfinder

有人知道禁用或以某种方式修改 elFinder 中的“打开”功能的方法吗？

我在 ASP.NET MVC 站点中使用它，并为文件权限等添加了额外的服务器端过滤。所以用户不能直接访问文件，一切都必须通过提供 elFinder 的服务器端组件。因此，每当有人尝试直接打开文件时，他们都会收到 404 响应。

有几个 UX 部分受此影响：

*   双击文件 - 我能够覆盖`dblclick`elFilder 事件，并且只需`return false`. 但是，这带来了无法双击文件夹打开它们的不良影响。
*   单击“打开”菜单项 - 我尝试`'open'`从配置中删除该选项`commands`，但该选项仍然存在。许多其他项目是可移动的（重命名、上传、除了只读访问之外的任何内容，在这种情况下我拒绝用户访问），但这不是出于某种原因。
*   单击“信息”弹出窗口中的链接。不知道如何解决这个问题。也许用一些模板自定义“信息”弹出窗口？

有没有人遇到过这个问题并提出任何新颖的解决方案？作为最后的手段，我并不反对修改 elFinder 的实际 JavaScript（如果我想升级 elFinder，这会使它在操作上更加痛苦）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T07:24:22.033

添加**getfilecallback**的另一种方法如下：

**$('#finder').elfinder({**

```
 url : 'php/connector.php',
    getFileCallback : function(files, fm) {
            return false;
    } 
```

**});**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:05:50.807

****从js/commands**子目录**复制****open.js**文件并将其粘贴到任何地方，然后将其包含在您的 html 文件中。现在在第 66 行编辑复制的**open.js文件：****

 ********如果（！file.read）{**

```
 return dfrd.reject(['errOpen', file.name, 'errPerm']); 
```

**}** ,

并放在这里：

**返回假；********

# iphone - 查找 URL 格式中字符的索引/位置

> ID：14370414
> 
> 赞同：0
> 
> 时间：2013-01-17T00:39:58.610
> 
> 标签：iphone, ios, objective-c, ipad, nsregularexpression

我有以下网址：

```
http://test.me/s/hq6aN 
```

我基本上想用 d 替换那个 s，使用 NSRegularExpression 轻松做到这一点的最佳方法是什么？基本上我想要的是找出字符串中 /s/ 的索引，知道怎么做吗？

这是我到目前为止所拥有的：

```
NSString *regexStr = @"/s/";
    NSError *error = nil;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:regexStr options:0 error:&error];
    NSArray *matches = [regex matchesInString:shortLink options:0 range:NSMakeRange(0, [shortLink length])];
    if ([matches count] > 0){
         NSTextCheckingResult *matchesIndex = [matches objectAtIndex:0];
         NSRange range = matchesIndex.range;
    } 
```

我很确定我在 regexStr 上做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:47:39.250

您的模式看起来不错，但是有一种方便的搜索和替换方法可以让您更简洁地编写：

```
NSError *error = nil;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"/s/" options:0 error:&error];
NSMutableString *haystack = [NSMutableString stringWithString:@"http://test.me/s/hq6aN"];
[regex replaceMatchesInString:haystack options:0 range:NSMakeRange(0, [haystack length]) withTemplate:@"/d/"]; 
```

如果您希望保留包含原始 URL 的字符串不可变，则有一个等效`-stringByReplacingMatchesInString:options:range:withTemplate:`项。`NSStrings`

# python - python多行不适用于/运算符

> ID：14370415
> 
> 赞同：1
> 
> 时间：2013-01-17T00:40:01.067
> 
> 标签：python

```
rectified_mean_quad_error = (sum_quad_error - sum(quad_error_outliers))/(number_of_quads - len(quad_error_outliers)) 
```

上面的代码在python中工作正常

但是，如果我尝试使用“/”运算符将上述语句分成两行并调整缩进，它就不起作用。我不知道为什么会这样，因为我已经使用带有 '+' 的多行没有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:42:27.277

要在 Python 中使用断线，您需要有左括号：

```
rectified_mean_quad_error = ((sum_quad_error - sum(quad_error_outliers))/
    (number_of_quads - len(quad_error_outliers))) 
```

或用于`\`打破：

```
rectified_mean_quad_error = (sum_quad_error - sum(quad_error_outliers))/  \
    (number_of_quads - len(quad_error_outliers)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T00:55:55.003

虽然 zch 的回答是完全正确的（我给了它一个 +1，你应该接受它），解决这个问题的惯用方法是打破陈述：

```
quad_sum_diff = sum_quad_error - sum(quad_error_outliers)
quad_count = number_of_quads - len(quad_error_outliers)
rectified_mean_quad_error = quad_sum_diff / quad_count 
```

这允许你给中间结果起好名字（我只是猜到了名字，但大概你实际上知道它们应该是什么意思），这通常使事情比持续 2 行的表达式更具可读性和滚动离开窗口的右端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:42:47.200

要将这样的内容分成多行，您需要插入 a `\`，所以它看起来像：

```
rectified_mean_quad_error = (sum_quad_error - sum(quad_error_outliers)) / \
                            (number_of_quads - len(quad_error_outliers)) 
```

# bash - 在 bash 中重命名文件

> ID：14370416
> 
> 赞同：2
> 
> 时间：2013-01-17T00:40:09.077
> 
> 标签：bash

我的目录有许多名为“20130101_temp.txt”、“20130102_temp.txt”等的文件。

如何删除所有这些文件名称中的“_temp”。即，将 20130101_temp.txt 重命名为 20130101.txt。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T00:44:03.557

使用 bash：

```
for x in *_temp.txt
do
    mv $x ${x%%_temp.txt}.txt
done 
```

Perl（至少在 Ubuntu 上）还附带了一个实用程序，它使用`rename`正则表达式，因此您可以通过以下方式完成相同的操作：

```
rename -n 's/_temp\.txt$/.txt/' *_temp.txt 
```

该`-n`选项会启动“试运行”，它只会向您显示要重命名的内容。删除它以实际执行重命名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T00:44:30.423

使用`for`带有 glob 的 -loop 来查找文件并使用[参数替换](http://tldp.org/LDP/abs/html/parameter-substitution.html)来删除`_temp`for 移动：

```
for t in ????????_temp.txt; do 
    echo mv ${t} ${t/_temp/}
done 
```

`echo`当您测试输出在您的系统上看起来正确时，请删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T00:43:41.017

尝试这样的事情：

```
for FILENAME in *_temp.txt; do
    mv $FILENAME `echo $FILENAME | sed -e 's/_temp//'`
done 
```

通常最好先`mv`用`echo`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T00:54:27.690

这不是一个 bash 解决方案，但由于我经常遇到重命名任务，同时懒得考虑一个合理的 bash 解决方案，所以我刚刚得到了 pyRenamer，一个可以很好地完成类似事情的 GUI 工具。它通常可以从标准存储库安装。

dlundquist 解决方案虽然效果很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-10T12:50:54.633

这对我有用：

```
find . -depth -name '*_temp*' -execdir bash -c 'for f; do mv -i "$f" "${f//_temp/ }"; done' bash {} + 
```

# object - .Exist 超时如何在 QTP 中工作？

> ID：14370420
> 
> 赞同：5
> 
> 时间：2013-01-17T00:40:33.397
> 
> 标签：object, vbscript, runtime, qtp, exists

我已经用这种`.Exist`方法做了很多工作，但我最近转移到了一个带有 QTP 11 的新项目（现在使用 WPF 应用程序）（而以前我有 QTP 10）。

现在我想通过使用来检查消息是否不存在`object.Exist(2)`。奇怪的是，我只在大约 23 秒后得到结果，而不是我预期的 2 秒。

超时如何工作？在以前的项目中，using`object.Exist(2)`会等待 2 秒，然后再确定对象不存在。QTP 帮助文件还说它应该只等待 2 秒（指定的超时参数）。现在，它似乎在等待超时参数（2 秒）和对象同步超时（20 秒）。

此外，智能识别已禁用，因此不应等待。使用对象存储库突出显示对象会立即表示该对象不存在。

QTP v10 和 v11 之间的超时行为是否发生了变化？为什么说一个对象不存在需要这么长时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-16T07:09:24.220

Exist 方法仅对最后一个对象不起作用。它是分层工作的 - 这意味着此方法在检查最后一个之前检查每个父对象。超时仅适用于最后一个对象。如果您想立即收到答案，我建议您使用以下代码-

```
if WPFWindow("x").Exist(0) Then
   if WPFWindow("x").WPFButton("y").Exist(0) Then
     'action 
   End if
End if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:57:39.497

确保您没有为对象存储库中的测试对象启用“智能识别”。这可能会妨碍您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-29T07:40:30.753

您遇到的额外时间是默认超时设置，默认设置为 20 秒。任何 Wait 或 Exist 计时器都将堆叠在默认超时之上。

可以在测试设置中更改：

```
Test Settings > Run > Object synchronization timeout - set in seconds 
```

或在 vbscript 中：

```
Setting("DefaultTimeout") = 4000 'set in milliseconds 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-18T21:24:55.860

我建议只使用默认超时。使用 .Exist(x) 将为每个孩子使用提到的时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-19T08:51:21.907

在驱动程序脚本的开头使用 DefaultTimeout 函数就足够了。

```
Setting("DefaultTimeout") = 10000   'set in milliseconds 
```

如果任何对象超过上述 10 秒的超时限制，则该对象将无法被捕获并且运行结果将显示失败

# jpa - JPA2 在同一类中构建 OneToOne 和 OneToMany

> ID：14370422
> 
> 赞同：0
> 
> 时间：2013-01-17T00:40:49.990
> 
> 标签：jpa, structure, one-to-many, one-to-one, circular-reference

您能否告诉我如何构建下表/类以避免循环引用？我在“学士”学位课程中定义了以下内容：

```
@Entity
public class Bachelor {
...
    @OneToOne(cascade = CascadeType.ALL, orphanRemoval = true)
    @JoinColumn(name = "fk_bachelor")
    private Study study;

    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)
    @JoinColumn(name = "fk_prior")
    private List<Study> priorStudies;

    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)
    @JoinColumn(name = "fk_exchange")
    private List<Study> exchangeStudies;
...
}

@Entity
class Study {

    private String title;
    private String placeOfStudy;
    etc
...
} 
```

这是代表一个学士学位，该学士学位有一个学习记录，以获取学士学位的详细信息。如果申请人指定他们已经完成了学士学位，那么他们可以指定一个或多个先前和交换研究。学士学位加一个先前学位结果的示例如下：

```
学士

编号 | fk_单身汉

10003 | 10000

```

```
学习

编号 | 标题 | fk_prior

10000 | 文学学士 |

10001 | 学位 | 10003

```

这似乎工作正常，除非我需要从表中删除项目。我还收到有关编译器循环引用的警告。所以我不能先从学士中删除，因为学习引用了fk_prior，我不能先从学习中删除，因为学士引用了它。我猜这不是像这样构造它的好习惯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:16:46.793

学士学位有一个 FK 可以学习，而 Study 有 2 个 FK 可以学习学士学位。不同的 JPA 提供者会以不同的方式处理此问题，但您可以通过将一侧归零来帮助他们。例如，我建议将本科学习设置为空；打破循环将允许在学士之前取消研究。一些数据库还允许将约束处理延迟到事务结束，此时所有删除语句都将自行排序。

# joomla - Joomla 中的文件上传器

> ID：14370423
> 
> 赞同：1
> 
> 时间：2013-01-17T00:40:57.863
> 
> 标签：joomla, joomla2.5, swfupload

我一直在关注[此处](http://docs.joomla.org/Creating_a_file_uploader_in_your_component)的文档，将（改进的）文件上传部分添加到现有组件中。

上面示例中指向控制器/模型以处理上传的链接是通过 post 参数形成的：

```
 post_params: 
    {
            "option" : "com_mycomponent",
            "controller" : "mycontroller",
            "task" : "mytask",
            "id" : "'.$myItemObject->id.'",
            "'.$session->getName().'" : "'.$session->getId().'",
            "format" : "raw"
    }, 
```

我的问题是使用 Joomla 2.5 中引入的新控制器方法无法上传：

```
// Get an instance of the controller prefixed by the component
$controller = JController::getInstance('mycomponent');

// Perform the Request task
$controller->execute(JRequest::getCmd('task'));

// Redirect if set by the controller
$controller->redirect(); 
```

这工作（确实在 Joomla 2.5 上）在旧的 1.5 加载控制器方法上工作得非常好：

```
// Create the controller
$classname  = 'mycomponentController'.$controller;
$controller = new $classname( );

// Perform the Request task
$controller->execute( JRequest::getVar('task'));

// Redirect if set by the controller
$controller->redirect(); 
```

虽然后一种方法与 Joomla 2.5 兼容，但不幸的是，我希望与之集成的组件使用了较新的方法，我不想更改它，因此我可以根据需要不断更新组件，而不必每次都更改它。此外，如果我确实改变了它，我猜我可能会失去现有的功能。

基本上我想知道如何设置后参数，以便正确调用新的控制器方法！

* * *

**编辑**

从那以后，我尝试使用以下参数配置：

```
post_params: 
{
    "option" : "com_mycomponent",
    "task" : "mycontroller.mytask",
    "id" : "'.$myItemObject->id.'",
    "'.$session->getName().'" : "'.$session->getId().'",
    "format" : "raw"
}, 
```

我试图模仿`index.php?option=com_mycomponent&task=mycontroller.mytask`等方面的链接。但这仍然不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:15:36.530

您需要在 index.php 中定义以下变量

```
define('_JREQUEST_NO_CLEAN', 1); 
```

我正在寻找原因，我发现了这个 - [http://docs.joomla.org/Framework_Compatibility](http://docs.joomla.org/Framework_Compatibility)

注意 - 如果这不起作用，请删除`"format" : "raw"`.

让我知道它是否不起作用。

# windows - 从另一个应用程序获取突出显示的文本坐标

> ID：14370426
> 
> 赞同：0
> 
> 时间：2013-01-17T00:41:31.250
> 
> 标签：windows, winapi

有没有办法从第三方应用程序获取用于突出显示文本的矩形坐标（例如，当您选择一段文本时，例如用鼠标进一步复制到剪贴板）？

我想当应用程序进行一些自定义渲染时这是不可能的，但是标准控件呢？似乎有一些绘制突出显示矩形的中心方法，但我找不到任何有用的信息。剪贴板拦截似乎也没有返回此类信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:10:38.047

您可以使用[EM_GETSEL](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761598%28v=vs.85%29.aspx)获取字符的选择范围，然后使用[EM_POSFROMCHAR](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761631%28v=vs.85%29.aspx)获取每个字符的坐标，如编辑控件的客户区中显示的那样。

# xpath - 如何获取已知子元素之一的 XML 元素的其他子元素？

> ID：14370428
> 
> 赞同：0
> 
> 时间：2013-01-17T00:42:10.340
> 
> 标签：xpath

这是一个 xpath 问题，我的 xml 文件看起来像这样，在 xml 中有几个这样的艺术家。

```
 <lib>
   <artist>
         <name>Katy Perry</name>
         <album>
           <name>The Official Uk Top 40 Singles Chart 27-05-2012</name>
           <file>
             <name>37 Katy Perry - Part Of Me.mp3</name>
           </file>
        </album>
        <album>
           <name>Album name 2</name>
           <file>
             <name>whatever.mp3</name>
           </file>
        </album>
   </artist>
   ...
 </lib> 
```

如何使用 XPath 获取给定艺术家姓名的艺术家的所有专辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:42:23.603

它会是这样的：

```
/lib/artist[name = 'Katy Perry']/album 
```

这对你想做的事情有用吗？

要考虑前导或尾随空格，或单词之间的意外空格，您应该能够执行以下操作：

```
/lib/artist[normalize-space(name) = 'Katy Perry']/album 
```

# mysql - 获取实体和过滤结果

> ID：14370432
> 
> 赞同：1
> 
> 时间：2013-01-17T00:42:32.713
> 
> 标签：mysql, symfony, doctrine

我正在尝试获取与某个值的字段关联的实体。我可以通过做类似的事情来获得所有通过它的实体，

```
$qb->select('e')
   ->from('AcmeBundle:Entity', 'e')
   ->join('e.association', 'a')
   ->where('a.field = :field')
   ->setParameter('field', $value); 
```

正如预期的那样，此构建的查询结果将为我提供具有传递该 WHERE 子句的关联的实体。作为其中的一部分，我希望能够获得不包含未通过该子句的关联的部分实体。这是在 Doctrine 范围内的东西，还是由我来过滤掉 PHP 中不需要的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:28:45.060

看一下本[机查询](http://www.doctrine-project.org/blog/doctrine2-native-queries.html)（[Ref](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/native-sql.html)）。

您可以编写本机查询并将结果集映射到实体。

# java - ArrayIndexOutOfBoundsException 与合法索引，java，imagej

> ID：14370435
> 
> 赞同：0
> 
> 时间：2013-01-17T00:42:56.590
> 
> 标签：java, imagej

我目前正试图让我的头缠在 imagej 上，只是试图复制图像并吐出输出。总体思路是获取图像，从图像处理器中获取像素阵列，将其复制到新阵列中，然后从该阵列构建新图像。

现在在这里，存在 aPixels_org[0] 的值，正如您在控制台输出中看到的那样。但即使我进行了所有检查，它仍然会抛出 arrayoutofbounds 异常。

这是代码...（顺便说一句。只是一个记录器对象，只是一个健全性检查，以检查数组值是否存在于下面的 if 条件中。请告知是否有更好的方法，因为我是一个 C++ 人, 并且习惯于直接检查东西，因为 java 不允许 if(int){} 检查)

我从一个函数中获取 aPixels_org，一个 dthe aPixels_dup 就是这样创建的

```
int[] aPixels_dup = new int[iWidth*iHeight]; 
```

其中 iWidth*iHeight 是所需数组的大小。我还尝试使用 array.length() 选项直接生成大小。问题代码是

```
System.out.println(">>>>>>>>>>>>>>>>>>>>>." + aPixels_dup[0] +"  " + aPixels_org[0] + "  " + iWidth + "  " + iHeight);
    if(Integer.toString(aPixels_org[0]) != null &&  Integer.toString(aPixels_dup[0]) != null )
    {
        l.info("Arrays exsist");
        System.arraycopy(aPixels_org,0,aPixels_dup,0,iWidth*iHeight);
        l.info("Array Copied");
    }
    else{l.warn("Something is NULL");}
    l.info(""); 
```

这是错误

```
java.lang.ArrayIndexOutOfBoundsException
at java.lang.System.arraycopy(Native Method)
at Alpha_.DuplicateCurrentImage(Alpha_.java:64)
at Alpha_.run(Alpha_.java:81)
at ij.IJ.runUserPlugIn(IJ.java:185)
at ij.IJ.runPlugIn(IJ.java:152)
at ij.Executer.runCommand(Executer.java:127)
at ij.Executer.run(Executer.java:64)
at java.lang.Thread.run(Thread.java:679) 
```

这是控制台输出

```
[INFO] % FILE: Alpha_.java % CLASS: Alpha_ % FUNCTION: DuplicateCurrentImage % LINE: 59    % COMMENT: OK % % % TIMESTAMP: 2013-01-17 00:26:55,942
 0  -1393202  466  466
[INFO] % FILE: Alpha_.java % CLASS: Alpha_ % FUNCTION: DuplicateCurrentImage % LINE: 63 % COMMENT: Arrays exsist % % % TIMESTAMP: 2013-01-17 00:26:55,942 
```

我的输出到此结束，程序因上述错误而崩溃。如您所见，所有 4 个值都以某种形式存在。我用谷歌搜索了错误，发现错误是

> > > 抛出以指示已使用非法索引访问数组。索引为负数或大于或等于数组的大小。

我在这里遗漏了一些明显的东西吗？

关于

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:50:07.393

两个数组 -`aPixels_org`和`aPixels_dup`- 都必须至少有长度`iWidth*iHeight`（根据您的控制台输出，它是 217156）。一个（或两个）数组必须比那个短，这就是你得到异常的原因。还要确保 的值在分配和调用`iWidth*iHeight`之间没有增加。`aPixels_dup``System.arraycopy`

`Math.min(aPixels_org.length, aPixels_dup.length)`将其用作 . 的最后一个参数会更安全`System.arraycopy`。但是，这会隐藏代码中的任何长度错误。您可能希望`assert`两个数组都具有预期的长度。

此外，您的支票似乎毫无意义。两个数组中都存在索引 0 处的元素这一事实有点无关紧要。此外，`Integer.toString(int)`永不返回`null`。这是您的代码的一个版本，可以进行一些合理的检查：

```
if (aPixels_org != null &&
    aPixels_dup != null &&
    aPixels_org.length == aPixels_dup.length &&
    aPixels_org.length == iWidth*iHeight )
{
    l.info("Array sizes match");
    System.arraycopy(aPixels_org,0,aPixels_dup,0,iWidth*iHeight);
    l.info("Array Copied");
}
else{l.warn("Something is NULL or dimensions are off");}
l.info(""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:50:44.450

这一切都在[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)中。*我**强调**了我认为是您错误的原因。*

```
 public static void arraycopy(Object src,
             int srcPos,
             Object dest,
             int destPos,
             int length)
 ... 
```

否则，如果以下任何一项为真，`IndexOutOfBoundsException`则抛出 an 并且不修改目标：

*   `srcPos`论据是否定的。
*   `destPos`论据是否定的。
*   `length`论据是否定的。
*   **`srcPos+length`大于`src.length`，源数组的长度。**
*   `destPos+length`大于`dest.length`，目标数组的长度。

# emacs - 当我在 Emacs 中关闭括号时，如何防止光标跳跃？

> ID：14370438
> 
> 赞同：5
> 
> 时间：2013-01-17T00:43:11.720
> 
> 标签：emacs, customization

有没有办法在关闭括号/括号时改变 Emacs 的行为？

现在，光标会跳到左括号几秒钟，然后会在一段时间后或我开始打字时跳回来。我发现这种来回跳跃真的很烦人。

有没有办法，要么

*   仅在标记左括号时更改光标的颜色/形状，或
*   完全防止跳跃，只是改变配对的颜色？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T01:13:08.123

试着放

```
(show-paren-mode 1)
(setq blink-matching-delay 0.3) 
```

在您的`.emacs` 或`.emacs.d/init.el`.

这可以防止跳跃并突出显示匹配的对。

# ubuntu - 关闭 Guvcview 文件名递增

> ID：14370439
> 
> 赞同：1
> 
> 时间：2013-01-17T00:43:22.510
> 
> 标签：ubuntu, terminal, webcam

guvcview 命令会自动增加输出文件名。

这是我正在使用的命令：

```
 guvcview -d /dev/video1 --no_display -r 1 -f yuyv -s 2592x1944 -i capture.jpeg -c 2 --exit_on_close 
```

输出文件名是：

捕获-0.jpeg

捕获-1.jpeg

捕获-2.jpeg

ETC...

我怎样才能使它不增加？我想要一个每次都被覆盖的静态文件名（capture.jpeg）。我可以通过单击“捕获”按钮从 GUI 执行此操作，但我需要能够从终端执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T19:37:40.347

`.guvcviewrc`您的主目录中应该有一个名为的文件。里面有一条线`image_inc=1`。更改它以`image_inc=0`解决我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:17:17.343

I am pretty sure there is no way to accomplish this without outside help from a bash script or something akin to that.

My solution is to edit the timers.c file in the guvcview source.

I removed line 109: "global->image_inc = global->image_picn;"

Removal of this line prevents guvcview from auto-incrementing the filename when set on a timer.

I then recompiled guvcview, and now it is working perfectly!

# messaging - IBM MQ 客户端兼容性

> ID：14370440
> 
> 赞同：0
> 
> 时间：2013-01-17T00:43:37.087
> 
> 标签：messaging, ibm-mq

7.5 ibm mq 客户端 dll 能否在 MQ 6.x 服务器上运行（兼容 6x MQ 服务器）？

我将实现 get、put 消息等等。将支持哪些对象（例如：队列管理器、队列实例等）？

如果不兼容，MQ 6.x 版本会支持哪些 6.x 版本（64 位投诉）的 MQ 客户端 dll？

任何输入都会非常有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:48:30.757

可以使用更高版本的 MQ 客户端连接到 MQ v6 队列管理器。但是 MQ v6 和 MQ v7x 队列管理器之间存在很多差异。当您连接到 MQ v6 队列管理器时，MQ v7x 的所有功能都将不可用。显着的特点是原生的 Pub/Sub 和像 Topic 这样的对象。您不能使用 MQ v7 原生 pub/sub API、MQSUB、MQSUBRQ 来订阅和 MQPUT 主题。

您只能使用 MQ v6 中可用的那些功能。您可以使用 Queued 接口对队列执行 Put/Get 操作，并执行 Pub/Sub。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:39:55.673

专注于最后一个问题；WMQ v6 不是当前支持的级别。建议移至版本 7 WMQ 安装。

通过 TCP/IP 连接的连接 - 而不是“进程内”将协商可用于与正在连接的 QueueManager 匹配的集合的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T01:07:11.450

如果它是受支持的配置，您应该仔细检查 IBM 软件支持。

# php - Trello API PHP 卷曲

> ID：14370442
> 
> 赞同：0
> 
> 时间：2013-01-17T00:43:42.983
> 
> 标签：php, curl, trello

我正在尝试将我的网络编辑队列集成/替换到 Trello 中。

我创建了一个不公开的组织，但创建了一个用于读/写访问的令牌。

我还没有看到一个好的 Trello API 的 PHP 包装器（已经查看了两个可用的并且无法真正让它们为我的目的启动和运行。）

无论如何，我想做的是提供相当基本的访问权限来读取卡片并将卡片插入特定列表。

我已经使用 API 返回列表的结果，使用以下内容：

```
https://api.trello.com/1/lists/[mylistID]/cards?key=[myappkey]&token=[mytoken] 
```

结果，我得到了我想要的结果，列表中卡片的 json。

现在我正在尝试使用 CURL 在 PHP 中重新创建它，并且我在以下代码中尝试的任何内容都收到了未经授权或错误请求的错误响应：

```
$url = "https://api.trello.com/1/lists/[myboardID]/cards";
$trello_key          = 'mykey';
$trello_list_id      = 'mylistid';
$trello_member_token = 'mytoken'; 

$fields = "key=$trello_key&token=$trello_member_token&name=$name&idList=$trello_list_id";
e
# init curl
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POSTFIELDS, $fields);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLINFO_HEADER_OUT, TRUE); // make sure we see the sended header afterwards
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_TIMEOUT, 0);
curl_setopt($ch, CURLOPT_POST, 1);

# dont care about ssl
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

# download and close
$output = curl_exec($ch);
$request =  curl_getinfo($ch, CURLINFO_HEADER_OUT);
$error = curl_error($ch);
curl_close($ch); 
```

所以我只是想看看是否有人知道我做错了什么。我觉得它应该很简单，但我已经花了几个小时，我想我需要一些帮助。如果您有任何想法，请告诉我。

{我遗漏了对我的 API 密钥、令牌、BoardID 等的明显引用}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:58:39.557

这实际上似乎对我有用。我试图使用 POST 而不是带有 CURL 的默认 GET。仍在努力解析响应，但似乎我走在正确的轨道上。在响应中得到“200 OK”。

```
$url = 'https://api.trello.com/1/lists/[myListID]/cards?key=[MyApiKey]&token=[myToken]';

# init curl
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
//curl_setopt($ch, CURLOPT_POSTFIELDS, $encoded_fields);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLINFO_HEADER_OUT, TRUE); // make sure we see the sended header afterwards
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_TIMEOUT, 0);
//curl_setopt($ch, CURLOPT_POST, 1);

# dont care about ssl
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

# download and close
$output = curl_exec($ch);
$request =  curl_getinfo($ch, CURLINFO_HEADER_OUT);
$error = curl_error($ch);
curl_close($ch);

echo 'This is output = '.$output .'<br />';
echo 'This is request = '.$request .'<br />';
echo 'This is error = '.$error .'<br />'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-09T10:59:27.633

```
$url = 'https://api.trello.com/1/boards/[myListID]/cards?key=[MyApiKey]&token=[myToken]';

# init curl
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
//curl_setopt($ch, CURLOPT_POSTFIELDS, $encoded_fields);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLINFO_HEADER_OUT, TRUE); // make sure we see the sended header afterwards
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_TIMEOUT, 0);
//curl_setopt($ch, CURLOPT_POST, 1);

# dont care about ssl
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

# download and close
$output = curl_exec($ch);
$request =  curl_getinfo($ch, CURLINFO_HEADER_OUT);
$error = curl_error($ch);
curl_close($ch);

echo 'This is output = '.$output .'<br />';
echo 'This is request = '.$request .'<br />';
echo 'This is error = '.$error .'<br />'; 
```

# php - 如何获取html页面源代码中未显示的内容

> ID：14370443
> 
> 赞同：1
> 
> 时间：2013-01-17T00:43:44.293
> 
> 标签：php, jquery, ajax

我有一个 ajax、jQuery 和 PHP 脚本，当我向下滚动时，它会从数据库中返回更多数据（无限滚动，直到数据库中有更多数据）。问题是每个数据都被放入一个具有唯一 id 的 div 中，但只有初始内容（第一次进入页面时加载）出现在 HTML 源中。一旦显示更多内容，HTML 源代码中就不会出现 if。

任何人都知道如何获取滚动加载的 div 的 ID？我需要一个关于发生了什么的解释。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T00:48:18.560

如果您使用的是 Firefox，您可以安装 Firebug 并动态观察 HTML 变化（用您的眼睛！！）： http: [//getfirebug.com/](http://getfirebug.com/)

在 Chrome 上，您可以使用内置的开发者工具：[https ://developers.google.com/chrome-developer-tools/](https://developers.google.com/chrome-developer-tools/)

要获取通过 AJAX 加载的元素的 id，您需要使用 jQuery 的`live`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:06:53.820

您还可以捕获`DOMNodeInserted`事件。

```
$(document).on('DOMNodeInserted', function(e){
    console.log($(e.target));
}); 
```

# c - C - 调整指针数组的大小

> ID：14370445
> 
> 赞同：2
> 
> 时间：2013-01-17T00:43:51.503
> 
> 标签：c, arrays, c-strings

我或多或少有一个想法，但我不确定我是否有正确的想法，我希望也许我只是错过了一些明显的东西。基本上，我有一个字符串数组（C字符串，所以基本上是一个指向字符数组的指针数组），如下所示：

```
char **words; 
```

我不知道我最后会说多少字。当我解析字符串时，我希望能够调整数组的大小，添加一个指向单词的指针，然后移动到下一个单词然后重复。

我能想到的唯一方法可能是每次我到达数组末尾时都从一个合理的数字开始并重新分配，但我不完全确定这是否有效。就像我希望能够访问 words[0]、words[1] 等。如果我有 char **words[10] 并调用

```
realloc(words, n+4)  //assuming this is correct since pointers are 4 bytes 
```

一旦我到达数组的末尾，如果我做了 words[11] = *new word*，那是否有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T00:49:01.293

跟踪您的数组大小：

```
size_t arr_size = 10; 
```

并给它一个初始内存块：

```
char **words = malloc( arr_size * sizeof(char*) ); 
```

填满所有位置后，您可能希望将数组大小加倍：

```
size_t tailIdx = 0;

while( ... ) {
    if( tailIdx >= arr_size ) {
        char **newWords;
        arr_size *= 2;
        newWords = realloc(words, arr_size * sizeof(char*) );
        if( newWords == NULL ) { some_error() };
        words = newWords;
    }
    words[tailIdx++] = get_next_word();
}

...

free(words); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T00:46:29.397

这种方法很好，尽管您可能想要这样做`realloc(words, n * 2)`。调用`realloc`并且`malloc`很昂贵，因此您希望尽可能少地重新分配，这意味着您可以在不重新分配（并且可能复制数据）的情况下持续更长时间。这就是大多数缓冲区是如何实现分摊分配和复制成本的。因此，每次空间不足时，只需将缓冲区大小加倍。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T00:47:28.667

您可能想要分配多个内存块。一个 for `words`，它将包含指针数组。然后每个单词的另一个块，将由`words`数组中的元素指向。

然后添加元素涉及`realloc()`到`words`数组，然后为每个新单词分配新的内存块。

请注意如何编写清理代码。您需要确保释放所有这些块。

# ios - 使用 Xcode 4.6 DP3 编译 Kobold2d 失败

> ID：14370452
> 
> 赞同：0
> 
> 时间：2013-01-17T00:44:34.150
> 
> 标签：ios, xcode

所以，我刚刚安装了 Kobold2d，现在我什至无法运行示例 hello world 代码，有人可以帮我吗？我得到的错误是 Command /Applications/Xcode46-DP3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:46:53.710

我理解你的问题。出现这个问题是因为最新版本的 Xcode4.6 与您现在拥有的 kobold2d 不兼容。因此，要解决此问题，您需要使用[链接](http://www.kobold2d.com/display/KKSITE/Kobold2D+Download?atl_token=cbc4a35933395b69dd315217d820cb9834eb4918)下载 kobold2d 的最新版本。

谢谢希望这有帮助。

# paypal - 授权收取 1.00 美元的费用而不收取费用

> ID：14370454
> 
> 赞同：0
> 
> 时间：2013-01-17T00:45:21.080
> 
> 标签：paypal, paypal-adaptive-payments

我试图找出一种方法来授权向用户收取 1.00 美元的小额费用，但实际上并未收取/收取这笔钱。就像一个待处理的交易只是为了验证他们的帐户是否处于活动状态并且有支付来源。使用 PayPal 自适应付款可以做到这一点吗？我正在使用`CREATE` `ActionType`他们的`Pay`API 操作对沙盒进行一些测试，但即使用户帐户中的金额 <$1.00，它似乎也能成功返回

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:19:56.917

通常，这是通过收取几美分然后在验证时退款来完成的。金额是随机生成的，然后存储在数据库中。验证后，金额将被删除，验证字段设置在用户表中。

# java - 从 JSP 调用 gui？

> ID：14370465
> 
> 赞同：0
> 
> 时间：2013-01-17T00:47:17.550
> 
> 标签：java, jsp, user-interface

我目前正在学习 JSP 和 Java Servlet。我想知道是否有任何方法可以从 JSP 调用 java GUI，不一定要加载到页面中，而是加载到屏幕上以进行数据库输入。我正在努力寻找有关如何在网上执行此操作的参考，但到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:59:04.070

您可以使用 Java Webstart 在客户端启动应用程序。或者，要求用户以不同的方式安装本地客户端（如守护程序服务）。

“GUI 应用程序”必须在后台运行某种 RPC（=远程过程调用）服务。

一旦客户端安装了您的 gui 应用程序，JSP 就可以调用 url `http://localhost:port`（ajax 将有助于向 GUI 应用程序发送消息）。GUI 应用程序必须有一些 rpc 系统（rest、webservice）来接收来自您的 Web 应用程序（您的 jsp 应用程序）的请求并启动 URL 请求的 GUI。
这里的问题是确保客户端有可用的端口选择。

另一种可能性是在客户端向您的应用程序注册一些 URL，以便当用户单击诸如`myapp://form/123`操作系统之类的 url 时，会自动调用您的应用程序来处理该 URL。这种事情必须根据操作系统以不同的方式完成。当您单击磁力链接或`skype://link`. 在操作系统中注册 url 的过程因操作系统而异，您需要做一些研究（我从未这样做过，但我相信这是可能的）。您还可以将文件扩展名注册到您的应用程序，并确保指定的扩展名已注册到您的应用程序。当浏览器下载文件并打开它时，您的应用程序将使用下载的文件作为参数调用（其中将包含您的 GUI 指令）。但是大多数浏览器在下载后不会自动启动与文件关联的应用程序：同样，您需要在客户端的操作系统上做一些技巧，以使“下载并打开”成为浏览器的默认行为。

# ruby-on-rails - Rails 将新资源名称复数

> ID：14370469
> 
> 赞同：0
> 
> 时间：2013-01-17T00:47:47.940
> 
> 标签：ruby-on-rails, ruby

出于某种原因，当我`rails generate resource admin`在我的新 Rails 应用程序上运行时，Rails 生成了一个名为`admins`. 这样做有什么理由吗？我希望调用资源`admin`，而不是`admins`。

这是运行的输出`rails generate resource admin`：

```
invoke  active_record
create    db/migrate/20130117002055_create_admins.rb
create    app/models/admin.rb
invoke    test_unit
create      test/unit/admin_test.rb
create      test/fixtures/admins.yml
invoke  controller
create    app/controllers/admins_controller.rb
invoke    erb
create      app/views/admins
invoke    test_unit
create      test/functional/admins_controller_test.rb
invoke    helper
create      app/helpers/admins_helper.rb
invoke      test_unit
create        test/unit/helpers/admins_helper_test.rb
invoke    assets
invoke      coffee
create        app/assets/javascripts/admins.js.coffee
invoke      scss
create        app/assets/stylesheets/admins.css.scss
invoke  resource_route
route    resources :admins 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T01:18:00.923

默认情况下，Rails 遵循复数命名约定，如果您希望覆盖它，您可以使用自定义变形规则或编辑`enviroment.rb`文件两种方式都可以在“[如何覆盖 Rails 命名约定？](https://stackoverflow.com/questions/1185035/how-do-i-override-rails-naming-conventions) ”中找到。

# c - C 中的 SSE 编程——大小不能被 4 整除怎么办？

> ID：14370471
> 
> 赞同：4
> 
> 时间：2013-01-17T00:47:55.903
> 
> 标签：c, sse

这是确定矩阵是否具有正交列的代码。当我有*n*可被 4 整除时，代码运行正常，但是当*n*不能被 4 整除时，程序意外停止（代码中提到的位置）

```
for(i=0;i<n-1;i++)
{
        for(j=i+1;j<n;j++)
        {
            sum = 0;  

            for(k=0;k<n-4;k+=4)
            {
                  X=_mm_load_ps(&D[n*i+k]);
                  Y=_mm_load_ps(&D[n*j+k]);
                   printf("fff");  //not printing , program stops here
                  acc = _mm_add_ps(acc,_mm_mul_ps(X,Y));

            }

            _mm_store_ps(&temp[0],acc);
            sum = temp[0]+temp[1]+temp[2]+temp[3];

            for(;k<n;k++){
                sum = sum + D[i*n+k]*D[j*n+k];
            }

            if(sum ==0)
                return 1;
         }

     }

    return 0;
} 
```

可能的原因是什么？如何处理大小不能被 4 整除的数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:55:22.283

您确定何时提前停止的代码在`for(k...)`循环中不正确。尝试这样的事情：

```
int n4 = n - (n % 4);   // smallest multiple of 4 <= n
for (k=0; k < n4, k+=4) //replaces: for(k=0;k<n-4;k+=4) 
{ // loop body
}
for (k=n4; k < n; k++)
{ // non-vectorized loop for the last few columns
} 
```

# http-headers - 通过 WebLogic 设置 Content-Encoding Response 标头

> ID：14370473
> 
> 赞同：1
> 
> 时间：2013-01-17T00:48:06.750
> 
> 标签：http-headers, weblogic

我有一个 Web 应用程序，它的部分工作是提供包含在战争中的压缩二进制文件。Web 应用程序部署到 WebLogic。

客户端应用程序基于 Javascript，并且正在请求压缩文件。因为，WebLogic 当前没有在 Http Response 标头中为文件的 GET 设置 Content-Encoding: Zip，所以 Web 浏览器不知道它是一个压缩文件，因此它无法正确处理它。

当请求其中一个文件时，我需要一种方法在 WebLogic 中将 Content-Encoding 标头设置为 gzip。我通过 Apache 托管文件并添加了
AddEncoding x-gzip 来解决这个问题。

关于如何通过 WebLogic 做同等事情的任何想法？

# macos - Mac OS X Lion 上的 PSQL 永久解决方案？

> ID：14370474
> 
> 赞同：1
> 
> 时间：2013-01-17T00:48:06.777
> 
> 标签：macos, osx-lion, homebrew, psql

当我尝试使用 psql 执行操作时，我不断收到此错误：

```
psql: could not connect to server: Permission denied
    Is the server running locally and accepting
    connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

我在这个问题的第一个答案中尝试了修复：[Repairing Postgresql after upgrade to OSX 10.7 Lion](https://stackoverflow.com/questions/6770649/repairing-postgresql-after-upgrading-to-osx-10-7-lion)

这解决了问题，但是当我关闭并重新打开 Homebrew 时，问题再次出现，即“which psql”输出 /usr/bin/psql。有任何想法吗？

# xml - VS 2012 语法高亮

> ID：14370477
> 
> 赞同：4
> 
> 时间：2013-01-17T00:48:24.030
> 
> 标签：xml, visual-studio-2012, highlighting

我有 2 台运行 VS 2012 pro 的计算机，它们都没有像 VS2010 那样显示基于 XML 的文件的任何突出显示或着色。

我安装的唯一快速版工具是 SQL 2012，所以我不认为这是问题所在。

WebMatrix 1 和 2 从未安装在其中一台计算机上。

我在这里几乎不知所措。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T01:08:07.533

固定的。我不得不多次重置环境。当我启动它时，每次都会导致 VS 的另一部分中断。最终，我已经重置了足够多的时间，现在一切正常。

使用“devenv /resetuserdata”重置 VS 进行修复。

# java - 运行时混合大图像（Java/JOGL/Processing）

> ID：14370479
> 
> 赞同：1
> 
> 时间：2013-01-17T00:48:34.793
> 
> 标签：java, gpu, processing, jogl

我需要在运行时对 2700x1600 图像进行 alpha 混合。它本质上是一个幻灯片，虽然有多个“甲板”同时运行。此图中的每一列代表任何时刻的程序状态：

```
imageA1 <-blend-> imageA2 <-blend-> imageA3 ...
imageB1 <-blend-> imageB2 <-blend-> imageB3 ...
imageC1 <-blend-> imageC2 <-blend-> imageC3 ...
imageD1 <-blend-> imageD2 <-blend-> imageD3 ...
imageE1 <-blend-> imageE2 <-blend-> imageE3 ...
imageF1 <-blend-> imageF2 <-blend-> imageF3 ... 
```

毫不奇怪，我在保持帧速率方面遇到了问题。我尝试在屏幕外缓冲区上进行混合，但这似乎没有多大帮助。是否有任何通用策略来处理可能适用于这种情况的这么大的图像？也许可以尽可能地利用显卡？

这是我现在的基本策略（非常简化的代码，处理而不是 Java）：

```
PImage a = loadImage("imageA.png");
PImage b = loadImage("imageB.png");
PGraphics buffer = createGraphics(width, height, OPENGL);

void draw () {
    buffer.beginDraw();
    buffer.tint(255, 200);
    buffer.image(a, 0, 0);
    buffer.tint(255, 100);
    buffer.image(b, 0, 0);
    buffer.endDraw();
    image(buffer, 0, 0);
} 
```

我正在使用 Java/ [Processing](http://processing.org/)，但欢迎使用原始 JOGL 的建议。

我在管理内存方面也遇到了一些麻烦。这些未压缩的图像中的每一个都是〜17MB（2700x1600x4字节），并且我将混合总共〜60张图像（不是同时进行！）。对于超出此问题范围的内存问题，我有一些策略，但我将其包括在此处，以防有一种巧妙的方法可以平衡计算机内存和显卡之间的内存使用。

（额外信息，对于那些关心的人：我的理解是 Processing 的[image()](http://processing.org/reference/image_.html)调用（将图像对象绘制到屏幕上）使用 JOGL 作为其底层实现。这种理解来自于查看 Processing 的[PGraphics.imageImpl() 方法](http://code.google.com/p/processing/source/browse/trunk/processing/core/src/processing/core/PGraphics.java#3620)的源代码，当使用 PGraphicsOpenGL 渲染器（我是）时，最终会在[PGraphicsOpenGL.rawPolys()](http://code.google.com/p/processing/source/browse/trunk/processing/core/src/processing/opengl/PGraphicsOpenGL.java#2370)内的本机 JOGL 调用中结束。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:17:55.407

您最大的敌人将是磁盘 I/O。过去，我使用了一个内存缓冲区来保存所有需要处理的图像。在您的情况下，该缓冲区将是您的 60 个图像的一部分……比如说 10 个图像切片缓冲区。

生产者线程 1：

load image from disk--->|10 image Buffer|----->以FIFO方式处理图像

消费者线程 2：图像准备显示 --->|显示缓冲区|----->绘制图像

此外，您可以使用 JProfiler 分析您的代码以查看其他瓶颈。

# jquery - 复制不呈现的 Jquery 对象

> ID：14370480
> 
> 赞同：-1
> 
> 时间：2013-01-17T00:48:34.857
> 
> 标签：jquery

我有一个 DIV，我想在浏览器中不显示这些操作的情况下对其进行操作。更具体地说，我想从 DIV 中删除图片，然后只保存 HTML。

```
divObj.find($(".picture1")).remove(); 
```

我尝试了复制 divObj 的技术，但即使复制引用了浏览器中的内容，所以上面的图片从屏幕上消失了，我不希望发生这种情况。

所以我首先需要制作一个副本，它并不真正引用浏览器中的 DIV，而是仅在内存中执行操作。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:51:32.220

> 所以我首先需要制作一个副本，它并不真正引用浏览器中的 DIV，而是仅在内存中执行操作。这可能吗？

使用[`.clone()`](http://api.jquery.com/clone/)而不是[`.remove()`](http://api.jquery.com/remove/).

```
var $copy = $("#picture1").clone(); 
```

`.find()`在这里完全没有必要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T00:58:12.587

如果要从文档中*提取*图片，但要将图片的jQuery对象存储在某个变量中，可以使用[`.detach()`](http://api.jquery.com/detach/)方法：

> 该`.detach()`方法与 相同`.remove()`，除了`.detach()` 保留与已删除元素关联的所有 jQuery 数据。

```
var picture = $("#picture1").detach(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:54:19.197

您将首先需要创建一个 div 来存储所有这些隐藏的东西，例如

```
<div class="myHiddenDiv"></div> 
```

上

```
 $(document).ready(function(){
     $('.myHiddenDiv').hide();  //using jQuery's hide will hide , but allows changes
   }); 
```

然后`clone()`是你想要的那个副本的图片，`append()`这个克隆到隐藏的 div ，你可以随心所欲地计算隐藏的 div

# html - 图像列表的 RESTful 地址

> ID：14370481
> 
> 赞同：1
> 
> 时间：2013-01-17T00:48:42.443
> 
> 标签：html, api, http, rest

我看过很多关于 REST 的 SO 答案，但这个概念仍然不清楚。
至少，在我看来，正确命名（URL）是 REST 的核心。

如何使我的地址方案低于宁静？
（我有图像列表，但对于每个请求，我都会展示它们的不同子集）

```
image_list/recent      (all image sorted in descending)
image_list/recent/front/  (to request newer images than a client has. client will provide the latest image id he has) 

image_list/popular (sorted in popularity)
image_list/following/ (list of images of users that a client follows)
image_list/user_like/  (list of images a client likes) 
```

当您有许多可以对资源执行的操作时怎么样？

```
image/upload/
image/delete/
image/like/
image/dislike/
image/hide/ 
```

*编辑*

这是查看答案后的解决方案。（但我仍然有疑问并确实表示过）

第一组

```
images/?mode=recent
images/?mode=recent_front
images/?mode=popular
images/?mode=following&user_id=3
images/?mode=like&user_id=3 
```

`images/ for all images`即使`all images set`不断变化，这不是使用约定吗？
那我为什么不能用`images/recent`呢？

第二套

```
images/ POST  (to create)
images/ DELETE 
 (to delete, ok but I have not seen anyone using `DELETE`. Does anyone use it?)
images/3/like POST (OK there's a `like` DB entity)
images/3/dislike POST (umm but there's no dislike DB entity)
images/3/hide .. (there's no hide entity, it's a merely a field on image) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T00:54:36.853

我相信您知道，REST 不仅仅是 URL 的命名方案。

URI 命名方案的重要之处在于 URI 唯一标识特定资源/实体。直接从 Wiki 页面引用：

> REST 中的一个重要概念是资源（特定信息的来源）的存在，每个资源都用一个全局标识符（例如，HTTP 中的 URI）引用。

在您的情况下，您希望 URI 结构化，以便它们可以唯一地标识图像或所有图像的集合作为一个整体。有不止一种方法可以做到这一点。有些人更喜欢查询字符串，而其他人（包括我自己）更喜欢将标识符作为 URI 文件夹结构的一部分。REST 并不规定其中之一。

想想你需要什么来识别一个图像——它可能是一个文件名，但如果你的应用程序是数据库驱动的，那么你更有可能使用索引 ID 号。你可以这样设置你的URI：

```
http://YOURDOMAIN.TLD/API/IMAGE/232423 
```

唯一`232423`标识图像的位置。

现在回答你的第二个问题：

> 当您有许多可以对资源执行的操作时怎么样？

使用基于 HTTP 的 REST API，操作通常由您使用的 HTTP 方法指定。`GET`用于检索数据、`POST`更新/插入数据和`DELETE`删除数据。让 URI 本身指定操作不是常见的做法——正如您在上面所做的那样。请注意，我说的是*常见做法*——REST 的原则并没有规定应该使用什么 HTTP 方法或 URI 命名结构。

以图像上的点赞为例，您应该将页面上的点赞视为一种资源——一个独特的实体。您希望对该实体执行不同的操作，例如：1\. 查找图像上的点赞数，2\. 在总数中添加新的点赞数。

为了让您的 REST 方法*喜欢*图像，您可以将其设置为`POST`URI，如下所示：

```
http://YOURDOMAIN.TLD/API/IMAGE/232423/LIKE 
```

Where`232423`是图像的标识符，`LIKE`指的是该特定图像上的点赞数。

如果您想检索图像上的点赞数，请使用相同的 URI，但将 HTTP 方法切换为`GET`.

# javascript - 如何稍后在我的页面中以 JavaScript 或 HTML 引用 Razor 变量

> ID：14370483
> 
> 赞同：1
> 
> 时间：2013-01-17T00:48:44.820
> 
> 标签：javascript, razor

我有以下剃刀代码：

```
@{
    if (IsPost)
    {
        string pn=Request.Form["pn"];
        if (!string.IsNullOrEmpty(pn)){
            /* my code to call the stored procedure with pn as a parameter*/
        }
    }
} 
```

在页面中，我需要使用 JavaScript / HTML 告诉用户`pn`. 无论是空的，还是报告该值已插入数据库。

我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T00:58:20.457

您需要将结果插入到渲染中。有几种方法可以做到这一点。您可以将其存储在变量中：

```
<script type="text/javascript">
    var pn = '@(pn)';
    alert('pn is ' + pn);
</script> 
```

或者你可以调用一个函数，有点像 JSONP：

```
<script type="text/javascript">
    parsePn('@(pn)');
    <!-- ... extra logic ...  --> 
    function parsePn(pn) {
        alert('pn is ' + pn);
    }
</script> 
```

# c - 什么会导致 sock send() 命令出现“资源暂时不可用”

> ID：14370489
> 
> 赞同：96
> 
> 时间：2013-01-17T00:49:29.150
> 
> 标签：c, linux, sockets, unix

什么会导致套接字命令`Resource temporarily unavailable`出错？`send()`套接字设置为`AF_UNIX, SOCK_STREAM`. 它大部分时间都有效，但偶尔会出现此错误。套接字的接收端似乎工作正常。

我知道这不是很详细，但我只是在寻找一般的想法。谢谢！

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-01-17T01:21:46.007

`"Resource temporarily unavailable"`是对应于 的错误消息`EAGAIN`，这意味着该操作将被阻塞但请求了非阻塞操作。对于`send()`，这可能是由于以下任何原因：

*   `fcntl()`用;显式地将文件描述符标记为非阻塞 或者
*   将`MSG_DONTWAIT`标志传递给`send()`；或者
*   `SO_SNDTIMEO`使用套接字选项设置发送超时。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-01-17T08:23:33.180

那是因为您使用的是`non-blocking`套接字并且输出缓冲区已满。

从`send()`手册页

```
 When the message does not fit into  the  send  buffer  of  the  socket,
   send() normally blocks, unless the socket has been placed in non-block-
   ing I/O mode.  In non-blocking mode it  would  return  EAGAIN  in  this
   case. 
```

**EAGAIN**是与**“资源暂时不可用”相关的错误代码**

考虑使用`select()`以更好地控制此行为

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-11-29T12:18:14.310

让我举个例子：

1.  客户端连接到服务器，每 1 秒向服务器发送 1MB 数据。

2.  服务器端接受连接，然后休眠 20 秒，没有来自客户端的接收消息。`tcp send buffer`所以客户端将满。

**客户端代码：**

```
#include <arpa/inet.h>
#include <sys/socket.h>
#include <stdio.h>
#include <errno.h>
#include <fcntl.h>
#include <stdlib.h>
#include <string.h>
#define exit_if(r, ...)                                                                          \
    if (r) {                                                                                     \
        printf(__VA_ARGS__);                                                                     \
        printf("%s:%d error no: %d error msg %s\n", __FILE__, __LINE__, errno, strerror(errno)); \
        exit(1);                                                                                 \
    }

void setNonBlock(int fd) {
    int flags = fcntl(fd, F_GETFL, 0);
    exit_if(flags < 0, "fcntl failed");
    int r = fcntl(fd, F_SETFL, flags | O_NONBLOCK);
    exit_if(r < 0, "fcntl failed");
}

void test_full_sock_buf_1(){
    short port = 8000;
    struct sockaddr_in addr;
    memset(&addr, 0, sizeof addr);
    addr.sin_family = AF_INET;
    addr.sin_port = htons(port);
    addr.sin_addr.s_addr = INADDR_ANY;

    int fd = socket(AF_INET, SOCK_STREAM, 0);
    exit_if(fd<0, "create socket error");

    int ret = connect(fd, (struct sockaddr *) &addr, sizeof(struct sockaddr));
    exit_if(ret<0, "connect to server error");
    setNonBlock(fd);

    printf("connect to server success");

    const int LEN = 1024 * 1000;
    char msg[LEN];  // 1MB data
    memset(msg, 'a', LEN);

    for (int i = 0; i < 1000; ++i) {
        int len = send(fd, msg, LEN, 0);
        printf("send: %d, erron: %d, %s \n", len, errno, strerror(errno));
        sleep(1);
    }

}

int main(){
    test_full_sock_buf_1();

    return 0;
} 
```

**服务器端代码：**

```
 #include <arpa/inet.h>
    #include <sys/socket.h>
    #include <stdio.h>
    #include <errno.h>
    #include <fcntl.h>
    #include <stdlib.h>
    #include <string.h>
    #define exit_if(r, ...)                                                                          \
        if (r) {                                                                                     \
            printf(__VA_ARGS__);                                                                     \
            printf("%s:%d error no: %d error msg %s\n", __FILE__, __LINE__, errno, strerror(errno)); \
            exit(1);                                                                                 \
        }
void test_full_sock_buf_1(){

    int listenfd = socket(AF_INET, SOCK_STREAM, 0);
    exit_if(listenfd<0, "create socket error");

    short port = 8000;
    struct sockaddr_in addr;
    memset(&addr, 0, sizeof addr);
    addr.sin_family = AF_INET;
    addr.sin_port = htons(port);
    addr.sin_addr.s_addr = INADDR_ANY;

    int r = ::bind(listenfd, (struct sockaddr *) &addr, sizeof(struct sockaddr));
    exit_if(r<0, "bind socket error");

    r = listen(listenfd, 100);
    exit_if(r<0, "listen socket error");

    struct sockaddr_in raddr;
    socklen_t rsz = sizeof(raddr);
    int cfd = accept(listenfd, (struct sockaddr *) &raddr, &rsz);
    exit_if(cfd<0, "accept socket error");

    sockaddr_in peer;
    socklen_t alen = sizeof(peer);
    getpeername(cfd, (sockaddr *) &peer, &alen);

    printf("accept a connection from %s:%d\n", inet_ntoa(peer.sin_addr), ntohs(peer.sin_port));

    printf("but now I will sleep 15 second, then exit");
    sleep(15);
} 
```

**启动服务器端，然后启动客户端。**

**服务器端可能会输出：**

```
accept a connection from 127.0.0.1:35764
but now I will sleep 15 second, then exit
Process finished with exit code 0 
```

[![在此处输入图像描述](../Images/0f92ddf12a61102b8fa6b52aee940886.png)](https://i.stack.imgur.com/Sp9D5.png)

**客户端可能会输出：**

```
connect to server successsend: 1024000, erron: 0, Success 
send: 1024000, erron: 0, Success 
send: 1024000, erron: 0, Success 
send: 552190, erron: 0, Success 
send: -1, erron: 11, Resource temporarily unavailable 
send: -1, erron: 11, Resource temporarily unavailable 
send: -1, erron: 11, Resource temporarily unavailable 
send: -1, erron: 11, Resource temporarily unavailable 
send: -1, erron: 11, Resource temporarily unavailable 
send: -1, erron: 11, Resource temporarily unavailable 
send: -1, erron: 11, Resource temporarily unavailable 
send: -1, erron: 11, Resource temporarily unavailable 
send: -1, erron: 11, Resource temporarily unavailable 
send: -1, erron: 11, Resource temporarily unavailable 
send: -1, erron: 11, Resource temporarily unavailable 
send: -1, erron: 104, Connection reset by peer 
send: -1, erron: 32, Broken pipe 
send: -1, erron: 32, Broken pipe 
send: -1, erron: 32, Broken pipe 
send: -1, erron: 32, Broken pipe 
send: -1, erron: 32, Broken pipe 
```

[![在此处输入图像描述](../Images/43a58c3bd9088be0bf0367eb09c47b98.png)](https://i.stack.imgur.com/65ZbC.png)

您可以看到，由于服务器端没有从客户端接收数据，所以当客户端`tcp buffer`已满时，您仍然发送数据，因此您可能会`Resource temporarily unavailable`出错。

# jquery - 视差滚动站点中对象的不一致定位（stellar.js）

> ID：14370490
> 
> 赞同：0
> 
> 时间：2013-01-17T00:49:30.093
> 
> 标签：jquery, html, css, positioning, parallax

我正在尝试使用 stellar.js 创建一个简单的三“幻灯片”视差页面（我听说它有问题）。理想情况下，后两页包含一个位于中心底部的图像元素，文本浮动在中心中心位置上方。在不同的浏览器尺寸和不同的浏览器中，所有这些元素都以不同的方式错位。

这是我对最后两张幻灯片的标记（第一张幻灯片并不是真正的问题）：

```
<!--Slide 2-->
<div class="slide" id="slide2" data-slide="2" data-stellar-background-ratio="0.5">
        <div class="wrapper">

            <img src="images/slide2/slide2.png" data-stellar-ratio="3" data-stellar-vertical-offset="-20"alt="">
</div>
<span class="slideno"> Here is the layover text. </span>
        <a class="button" data-slide="3" title=""></a>
</div

<!--Slide 3-->
<div class="slide" id="slide3" data-slide="3" data-stellar-background-ratio="0.5">
        <div class="wrapper">

            <img src="images/slide3/slide3.png" data-stellar-ratio="1.4" data-stellar-vertical-offset="-20"alt="">
<span class="slideno">Text for slide 3</span>
</div> 
```

这是CSS：

```
/******************************
 SLIDE 2 
*******************************/
#slide2{
    background-color:#f0e9d3;

}
#slide2 img:first-child{
    position:absolute;
    top:50%;
    left:50%;
    margin-bottom:-449.5px;
    margin-left:-375px;
    height:899px;
    width:750px;

}
/******************************
 SLIDE 3
*******************************/
#slide3{
    background-color:#d9dddf;
}
#slide3 img:first-child{
    position:absolute;
    top:50%;
    left:50%;
    margin-top:-254px;
    margin-left:-506px;
    height:1012px;
    width:508px;
} 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:24:10.390

没有看到你的 JavaScript 代码，看起来有几个问题：

1.  Stellar.js 无法重新定位使用百分比定位的元素，主要是因为无法将值设置为“50% + 1px”。
2.  您可能需要确保只启用所需方向的滚动，例如`$(window).stellar({ horizontalScrolling: false });`

希望有帮助:)

# css - iOS 上 HTML 中的水平下拉刷新

> ID：14370501
> 
> 赞同：0
> 
> 时间：2013-01-17T00:50:42.903
> 
> 标签：css, scroll, pull-to-refresh

如何在 HTML中为水平列表[实现 iOS 的拉动刷新？](http://damien.antipa.at/2012/10/16/ios-pull-to-refresh-in-mobile-safari-with-native-scrolling/)

也就是说，一个水平滚动的列表，但是当你把它拉到右边时，它会显示一个隐藏的div，可以触发javascript回调？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-17T00:50:42.903

我想我已经制定了一个解决方案，但是`.pull-to-refresh`如果我将跨度*完全*定位在滚动内容的左侧，它具有隐藏跨度的奇怪特征。但是，如果我将它定位在 1px 的位置，它就可以正常工作。

这[是我的水平拉动刷新解决方案](http://jsfiddle.net/mhBd2/)的粘贴箱。请注意，这仅适用于支持 的浏览器`-webkit-overflow-scrolling: touch`，例如 iOS 设备上的浏览器。您可以在此处仅在移动设备上加载 jsfiddle 的结果：http: [//fiddle.jshell.net/mhBd2/show/](http://fiddle.jshell.net/mhBd2/show/)

有没有更好的方法，还是我发现了一个 webkit 错误？

对于这条路径上的其他任何人，这是获得水平滚动列表以动态填充行的其余部分的更大解决方案的一部分（例如[如何使内联块元素填充行的其余部分？](https://stackoverflow.com/questions/5540485/how-to-make-an-inline-block-element-fill-the-remainder-of-the-line)），我得到了在这里工作：http: [//jsfiddle.net/fuWcr/](http://jsfiddle.net/fuWcr/)

# mysql - 显示表中的所有列以及每列中填充的记录数

> ID：14370521
> 
> 赞同：3
> 
> 时间：2013-01-17T00:53:00.067
> 
> 标签：mysql, sql, unpivot

我需要编写一个语句来显示表中的每一列、填充该列的记录的计数和百分比，以及不同的值计数。

例如，如果我有一个表地址包含：

```
Addr1 | AddrText  | PostalCode
11111 | demo ave  | 91210
22222 | demo2 ave | null
33333 | null      | null 
```

它应该显示如下内容：

```
columns    | Count | Percentage
Addr1      | 3     | 100
AddrText   | 2     | 66.6
PostalCode | 1     | 33.3 
```

或者让列保持不变，只将数据作为行，但我认为上面可能更容易。

ps：很抱歉，如果我无法正确格式化，但我希望你能明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T00:58:54.940

您可以使用然后应用聚合函数来*取消透视*列以获取计数和百分比：`UNION ALL`

```
select col,
  count(case when col is not null and value is not null then 1 end) CntCol,
  (count(case when col is not null and value is not null 
         then 1 end) / count(col))*100.0 Percentage
from
(
  select 'Addr1' col, Addr1 value
  from yourtable
  union all 
  select 'AddrText' col, AddrText value
  from yourtable
  union all 
  select 'PostalCode' col, PostalCode value
  from yourtable
) src
group by col 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/575f3/6)

结果是：

```
|        COL | CNTCOL | PERCENTAGE |
------------------------------------
|      Addr1 |      3 |        100 |
|   AddrText |      2 |   66.66667 |
| PostalCode |      1 |   33.33333 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:05:04.373

```
SELECT 'Addr1' col, 
       COUNT(Addr1) cntcol, COUNT(addr1)/count(*) percentage
FROM yourtable
union all
SELECT 'AddrText' col, 
       COUNT(AddrText) cntcol, COUNT(AddrText)/count(*) percentage
FROM yourtable
union all
SELECT 'PostalCode' col, 
       COUNT(PostalCode) cntcol, COUNT(PostalCode)/count(*) percentage
FROM yourtable 
```

# eclipse - 错误 404 - 请求的资源在带有 tomcat 7 的 Eclipse 中不可用

> ID：14370522
> 
> 赞同：1
> 
> 时间：2013-01-17T00:53:18.420
> 
> 标签：eclipse, tomcat, web-applications, eclipse-wtp

我正在尝试使用 eclipse 和 tomcat 7 运行一个简单的 Web 应用程序。我是一个带有文本输入的索引 html 文件和一个调用 servlet 的提交按钮。

我创建了一个动态 web 项目并将 html (index.html) 文件放在 WebContent 文件夹中。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>title</title>
</head>
<body>
    <form action="/TestServ" method="get">
        <input type="text" name="input">
        <input type="submit" value="Send it!">
    </form>
</body>
</html> 
```

我在 /Java Rescources/src 下有我的包 com.testing.web ，其中有我的 servlet (TestServ.java)，它看起来像这样：

```
@WebServlet("/TestServ")
public class TestServ extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public TestServ() {
        super();
        // TODO Auto-generated constructor stub
        System.out.println("AA%WU^SDJI&^R&KU");
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        System.out.println("AA%WU^SDJI&^R&KU");
    }
} 
```

当我在项目上选择运行->在服务器上运行时，index.html 文件加载得很好。问题是当我提交表单时，我得到以下错误页面：

```
HTTP 状态 404 - /TestServ

-------------------------------------------------- ------------------------------

类型状态报告

消息 /TestServ

描述 请求的资源不可用。

-------------------------------------------------- ------------------------------

Apache Tomcat/7.0.34
```

我已经搜索和搜索，但没有找到对我有帮助的解决方案。网络上的大多数答案都指向 servlet url 映射错误。请注意，我已经尝试了很多都无济于事。

此外，我想补充一点，我的服务器配置为在运行时环境选项中使用 jdk1.7.0_10。

最后，我不明白为什么在构建项目时eclipse没有在WEB-INF下创建正确的类/结构。

我完全被迷惑了，任何帮助都将不胜感激。非常感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:15:45.050

终于找到问题了，和往常一样是最简单的事情。

表单中的操作需要是这样的：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>title</title>
</head>
<body>
    <form action="/TestProj/TestServ" method="get">
        <input type="text" name="input">
        <input type="submit" value="Send it!">
    </form>
</body>
</html> 
```

和url映射如下：

```
<servlet>
    <servlet-name>TestServ</servlet-name>
    <servlet-class>com.testing.web.TestServ</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>TestServ</servlet-name>
    <url-pattern>/TestServ</url-pattern>
  </servlet-mapping> 
```

坦率地说，我不完全理解为什么。/Testproj 不应该被视为应用程序的根吗？：/ 反正...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T06:23:29.140

为了消除 404 错误，我们必须检查 web.xml 和您在选项卡中提供的 url。url 应该类似于 http://<127.0.0.1:8080>//。如果是网络服务应用程序

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-09T12:13:22.240

您的服务器配置没有问题。需要对 web.xml 文件进行一些修改。试试这个！

1.  打开您的“web.xml”文件。
2.  `<display-name>`在“ ”标签和“ ”标签之间添加这些标签`<welcome-file-list>`。

    `<servlet> <servlet-name>TestServ</servlet-name> <servlet-class>TestServ</servlet-class> </servlet>`

    `<servlet-mapping> <servlet-name>TestServ</servlet-name> <url-pattern>/TestServ</url-pattern> </servlet-mapping>`

3.  运行您的项目并在浏览器中输入 URL 作为“ [http://localhost:8080/TestServ](http://localhost:8080/TestServ) ”

## 希望它会奏效！:)

PS *您实际上可以在“ `<servlet-name>`”标签之间使用任何名称。但两个地方的名字必须相同。

# php - 如何从扩展类访问父类的变量？

> ID：14370524
> 
> 赞同：-3
> 
> 时间：2013-01-17T00:53:38.937
> 
> 标签：php, object

以下代码给了我一个错误

```
class One{    
    public $var = 10;
}

class Two extends One{
    public $var = 20;
    function __construct(){
        $this->var = parent::$var;
    }
}

$two = new Two();
echo $two->var; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:02:11.897

您正在覆盖您的变量。如果您需要抽象/父类中的某种默认/只读，请尝试以下操作：

```
<?php

class One{    
    private $var = 10;

        public function getVar(){
            return $this->var;
        }
}

class Two extends One{
    public $var;
    function __construct(){
        $this->var = parent::getVar();
    }
}

$two = new Two();
echo $two->var;

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:25:00.607

如果你想得到这样`parent::$var`（如此静态），请在 One 和 Two 中`var`定义。`static`

这将起作用；

```
class One {    
    public static $var = 10;
}

class Two extends One {
    public static $var = 20;

    public function __construct() {
        // this line creates a new property for Two, not dealing with static $var
        $this->var = parent::$var;
        // this line makes real change
        // self::$var = parent::$var;
    }
}

$two = new Two();
echo $two->var; // 10
echo $two::$var; // 20, no changes
echo Two::$var;  // 20, no changes

// But I don't recommend this usage
// This is proper for me; self::$var = parent::$var; instead of $this->var = parent::$var; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:56:25.070

这是内置的；只是不要重新声明变量。[（演示）](http://codepad.viper-7.com/KpriIG)

```
class One {
    public $var = 10;
}

class Two extends One {
}

$two = new Two();
echo $two->var; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T01:03:29.043

只要变量是`public`or `protected`，它就会被子类继承。

```
class One{    
    public $var = 10;
}

class Two extends One{
    public $var = 20;
}

class Three extends One{
}

$a = new One();
echo $a->var; // 10

$b = new Two();
echo $b->var; // 20

$c = new Three();
echo $c->var; // 10 
```

# maven - 我可以让 maven 要求其自身的特定版本，或者更好地解决这样的版本吗？

> ID：14370526
> 
> 赞同：2
> 
> 时间：2013-01-17T00:53:56.520
> 
> 标签：maven, maven-2, maven-3

抱歉，如果以前有人问过这个问题，但是“maven”和“version”是很难相互配对的术语。

如果我可以依赖 maven 版本 3.0.4 并且每个人的 maven 都简单地自我更新，我会喜欢它。更糟糕（但仍然可用）将只是要求每个人都拥有足够新的 maven 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T07:16:03.353

这就是 maven-enforcer-plugin 应该做的。那有[适合您的标准规则](http://maven.apache.org/enforcer/enforcer-rules/requireMavenVersion.html)。但是我认为不可能在 Maven 构建中切换到另一个 Maven 版本。这也可能导致更多的混乱，而不是解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:46:17.987

在 pom 中添加

<先决条件> <maven>3.0.4</maven> </先决条件>

或强制插件：见[http://maven.apache.org/enforcer/enforcer-rules/requireMavenVersion.html](http://maven.apache.org/enforcer/enforcer-rules/requireMavenVersion.html)

# sharepoint - 这个 Sharepoint 工作流 XML 有什么问题？

> ID：14370527
> 
> 赞同：1
> 
> 时间：2013-01-17T00:53:57.247
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-workflow

我通过调用workflowManager.StartWorkflow 并将XML 传递给下面的工作流，以编程方式启动一个工作流。工作流程只是错误和失败。我使用的工作流程是 OOTB Approval 工作流程。我的 XML 的结构不正确吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<dfs:myFields xmlns:dfs="http://schemas.microsoft.com/office/infopath/2003/dataFormSolution"
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:dms="http://schemas.microsoft.com/office/2009/documentManagement/types"
xmlns:q="http://schemas.microsoft.com/office/infopath/2009/WSSList/queryFields"
xmlns:d="http://schemas.microsoft.com/office/infopath/2009/WSSList/dataFields"
xmlns:ma="http://schemas.microsoft.com/office/2009/metadata/properties/metaAttributes"
xmlns:pc="http://schemas.microsoft.com/office/infopath/2007/PartnerControls"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <dfs:dataFields>
  <d:SharePointListItem_RW>
     <d:Approvers>
        <Assignment>
           <Assignee>
              <pc:Person>
                 <pc:DisplayName>Jia Ji JOnes</pc:DisplayName>
                 <pc:AccountId>ZZZDomain\jjones</pc:AccountId>
                 <pc:AccountType>User</pc:AccountType>
              </pc:Person>
           </Assignee>
           <d:Stage xsi:nil="true" />
           <d:AssignmentType>Parallel</d:AssignmentType>
        </Assignment>
        <Assignment>
           <Assignee>
              <pc:Person>
                 <pc:DisplayName>Matthew Jones</pc:DisplayName>
                 <pc:AccountId>ZZZDomain\mjones</pc:AccountId>
                 <pc:AccountType>User</pc:AccountType>
              </pc:Person>
           </Assignee>
           <d:Stage xsi:nil="true" />
           <d:AssignmentType>Parallel</d:AssignmentType>
        </Assignment>
        <Assignment>
           <Assignee>
              <pc:Person>
                 <pc:DisplayName>Maree H Jones</pc:DisplayName>
                 <pc:AccountId>ZZZDomain\mhjones</pc:AccountId>
                 <pc:AccountType>User</pc:AccountType>
              </pc:Person>
           </Assignee>
           <d:Stage xsi:nil="true" />
           <d:AssignmentType>Parallel</d:AssignmentType>
        </Assignment>
     </d:Approvers>
     <d:ExpandGroups>true</d:ExpandGroups>
     <d:NotificationMessage>A skill rating has been created which requires your approval.</d:NotificationMessage>
     <d:DueDateforAllTasks xsi:nil="true" />
     <d:DurationforSerialTasks>5</d:DurationforSerialTasks>
     <d:DurationUnits>Day</d:DurationUnits>
     <d:CC />
     <d:CancelonRejection>true</d:CancelonRejection>
     <d:CancelonChange>false</d:CancelonChange>
     <d:EnableContentApproval>true</d:EnableContentApproval>
  </d:SharePointListItem_RW>
</dfs:dataFields>
</dfs:myFields> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:33:51.717

XML 对于审批工作流无效。正确的 XML 如下。

```
<?xml version="1.0" encoding="UTF-8"?>
<dfs:myFields xmlns:dfs="http://schemas.microsoft.com/office/infopath/2003/dataFormSolution" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:dms="http://schemas.microsoft.com/office/2009/documentManagement/types" xmlns:q="http://schemas.microsoft.com/office/infopath/2009/WSSList/queryFields" xmlns:d="http://schemas.microsoft.com/office/infopath/2009/WSSList/dataFields" xmlns:ma="http://schemas.microsoft.com/office/2009/metadata/properties/metaAttributes" xmlns:pc="http://schemas.microsoft.com/office/infopath/2007/PartnerControls" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <dfs:queryFields />
   <dfs:dataFields>
  <d:SharePointListItem_RW>
     <d:Approvers>
        <Assignment>
           <Assignee>
              <pc:Person>
                 <pc:DisplayName>Jia Ji JOnes</pc:DisplayName>
                 <pc:AccountId>ZZZDomain\jjones</pc:AccountId>
                 <pc:AccountType>User</pc:AccountType>
              </pc:Person>
              <pc:Person>
                 <pc:DisplayName>Matthew Jones</pc:DisplayName>
                 <pc:AccountId>ZZZDomain\mjones</pc:AccountId>
                 <pc:AccountType>User</pc:AccountType>
              </pc:Person>
           </Assignee>
           <d:Stage xsi:nil="true" />
           <d:AssignmentType>Parallel</d:AssignmentType>
        </Assignment>
     </d:Approvers>
     <d:ExpandGroups>true</d:ExpandGroups>
     <d:NotificationMessage>test</d:NotificationMessage>
     <d:DueDateforAllTasks xsi:nil="true" />
     <d:DurationforSerialTasks>5</d:DurationforSerialTasks>
     <d:DurationUnits>Day</d:DurationUnits>
     <d:CC />
     <d:CancelonRejection>false</d:CancelonRejection>
     <d:CancelonChange>true</d:CancelonChange>
     <d:EnableContentApproval>true</d:EnableContentApproval>
  </d:SharePointListItem_RW>
   </dfs:dataFields>
</dfs:myFields> 
```

# ruby-on-rails - 允许用户配置 Rails 应用程序以供首次使用（ActiveRecord 等）

> ID：14370537
> 
> 赞同：1
> 
> 时间：2013-01-17T00:56:04.363
> 
> 标签：ruby-on-rails, deployment, configuration, setup-wizard

在我开始从头开始构建某些东西的过程之前，我很好奇是否有人遇到过为 Rails 应用程序提供首次配置向导的方法，该向导允许用户（系统管理员）配置应用程序的各个方面，例如 ActiveRecord配置和 ActionMailer 设置（SMTP、发件人等）。

我们希望为新安装提供一种简洁的方法来进行设置，而不是要求客户端编辑文件或在命令行上运行脚本。

从本质上讲，您应该能够下载应用程序、解压缩、启动它，当您通过浏览器访问它时，您会被引导完成初始设置步骤。

我的问题不在于*如何*做到这一点，而是更多的人已经这样做了。我围绕这个想法快速搜索 gem、插件等并没有出现太多。

**编辑/澄清**

为了澄清这种情况 - 这是为了支持由客户的系统管理员在本地下载和安装的“收缩包装”产品。

当他们第一次访问我们的应用程序后，我们需要一种友好的方式来配置其安装的特定设置，例如数据库等。

这种过程的一个例子是 JIRA 的设置向导：

[https://confluence.atlassian.com/display/JIRA/Running+the+Setup+Wizard](https://confluence.atlassian.com/display/JIRA/Running+the+Setup+Wizard)

这不是为了重新开发新的 Rails 应用程序，或者系统化我们的开发过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:22:43.980

我非常喜欢[Rails Templater](https://github.com/kfaustino/rails-templater)。它是一个用于构建 Rails 应用程序的命令行工具。它会问你一些问题，比如“你想使用 rspec 吗？Pry 而不是 IRB？”
我创建[了一个 fork](https://github.com/pferdefleisch/rails-templater)，它添加了身份验证、twitter bootstrap 和backbone.js 以及其他一些选项。如果您有特定需求，很容易破解。我一直在使用它，我讨厌没有它。
它当然是一个命令行应用程序，不能通过浏览器使用，但也许它仍然可以满足您的需求。或者代码库可以集成到客户端 Web 应用程序中。

**评论后更新**
您可能能够引导一个 sqlite 数据库，以便应用程序可以启动，然后只需使用表单或[向导](http://railscasts.com/episodes/346-wizard-forms-with-wicked)来设置写入您的 database.yml 和其他配置的东西，可能通过 thor （追加/替换文件中的文本很简单，是 rails 的一部分）。您需要以某种方式重新启动 rails 应用程序并迁移数据库。您可以在 Gemfile 中保留`pg`or `mysql2`gem（或两者），或者再次使用 thor 从您的向导/表单中编辑它们。

我还建议按照 Michael 的建议使用 rails_config。有了上面的解决方案。

如果我有更多的时间来考虑这个问题，我可能会想出一些更干净的东西，但如果我现在必须这样做的话，我会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T00:59:04.367

[http://railswizard.org/](http://railswizard.org/)允许您选择要使用的 gem。这是一个非常创新的使用 ui 和同位素宝石来选择组件。同样，另一个观点是前 10 名：[http ://blog.teamtreehouse.com/10-must-have-ruby-gems](http://blog.teamtreehouse.com/10-must-have-ruby-gems)

您永远找不到明确的 gem 列表，因为需要因人而异并且随着时间的推移而变化，例如，您的公司使用的数据库和“当前”最佳身份验证 gem 都是可变的。

对于配置特定的设置，您可以通过使用减少配置的做法来减少配置。例如，database.yml 文件通常是“必须在本地编辑”文件之一。我们通过将其名称放在我们的 .gitignore 文件中来从源代码控制中排除 database.yml 的方法。我们添加了一个 database.yml.example 文件，我们将其复制到本地 database.yml 并在该文件中使用锚点 (&) 和引用 (*)，如下所述：http: [//blog.geekdaily.org/2010/08/高级 yaml-tricking-out-your-databaseyml.html](http://blog.geekdaily.org/2010/08/advanced-yaml-tricking-out-your-databaseyml.html)

为每个环境配置其他变量的更多选项：http: [//kpumuk.info/ruby-on-rails/flexible-application-configuration-in-ruby-on-rails/](http://kpumuk.info/ruby-on-rails/flexible-application-configuration-in-ruby-on-rails/)

[rails config gem](https://github.com/railsjedi/rails_config)也可以帮助您，如下所述：[如何在 rails 中定义自定义配置](https://stackoverflow.com/questions/1450285/how-to-define-custom-configuration-variables-in-rails?rq=1)变量

# java - ArrayList 返回零？

> ID：14370538
> 
> 赞同：0
> 
> 时间：2013-01-17T00:56:04.990
> 
> 标签：java, arrays

我一直在使用一些代码，并且在复数转换中将转换转换为双精度而不是字节，现在所有数组在过去有数字时都返回零。想法？

代码：

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;

import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;

public class Decoder implements Runnable {
public AudioInputStream din;
public File decoding;
BufferedWriter write = new BufferedWriter(new FileWriter("STDOUT.txt"));

public Decoder(File f) throws Exception {
    AudioInputStream in = AudioSystem.getAudioInputStream(f);
    AudioFormat baseFormat = in.getFormat();
    AudioFormat decodedFormat = new AudioFormat(
            AudioFormat.Encoding.PCM_SIGNED, baseFormat.getSampleRate(),
            16, baseFormat.getChannels(), baseFormat.getChannels() * 2,
            baseFormat.getSampleRate(), false);
    din = AudioSystem.getAudioInputStream(decodedFormat, in);
    decoding = f;
}

@Override
public void run() {
    byte[] buf = new byte[2048];
    ArrayList<byte[]> bytes = new ArrayList<byte[]>();
    int numBytesRead;
    int total = 0;
    try {

        while ((numBytesRead = din.read(buf)) != -1) {
            if (Converter.abort)
                break;
            System.out.println("Read " + numBytesRead);
            total += numBytesRead;
            bytes.add(buf);
            buf = new byte[2048];
        }
        for (byte b : buf)
            System.out.print(b + "-"); //No matter how I choose the array, all the bytes are zeros.
        System.out.println("Total read: " + total + ". Amt of arrays: "
                + bytes.size());
        ArrayList<double[]> fft_out = doFFT(bytes);
        System.out.println("Writing bytes to FFTOut.txt");
        BufferedWriter write = new BufferedWriter(new FileWriter(
                "FFTOut.txt"));
        for (double[] ba : fft_out) {
            String bout = "";
            for (double b : ba) {
                bout += b + "";
            }
            bout += "\n";
            write.write(bout);
        }
        write.close();
        System.out.println("Done writing");
        // TODO do more
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            din.close();
        } catch (IOException e) {
            System.exit(1);
        }
        Converter.done(decoding.getName());
    }
}

private ArrayList<double[]> doFFT(List<byte[]> bytes) throws Exception {
    for (byte b : bytes.get(6))
        System.out.print(b + "-");
    ArrayList<double[]> dout = new ArrayList<double[]>();
    System.out.println("Amt of arrays: " + bytes.size());
    for (int j = 0; j < bytes.size(); j++) {
        byte[] arr = bytes.get(j);
        Complex[] in = new Complex[arr.length];
        for (int i = 0; i < arr.length; i++) {
            in[i] = new Complex(arr[i], 0);
        }
        Complex[] out = FFT.fft(in);
        double[] rep = new double[out.length];
        for (int i = 0; i < out.length; i++) {
            rep[i] = out[i].re();
        }
        dout.add(rep);
    }
    write.write("Processed " + bytes.size() + " arrays of bytes.");
    return dout;
}
} 
```

复杂类：

```
public class Complex {
private final double re; // the real part
private final double im; // the imaginary part

// create a new object with the given real and imaginary parts
public Complex(double real, double imag) {
    re = real;
    im = imag;
}

// return a string representation of the invoking Complex object
public String toString() {
    if (im == 0)
        return re + "";
    if (re == 0)
        return im + "i";
    if (im < 0)
        return re + " - " + (-im) + "i";
    return re + " + " + im + "i";
}

// return abs/modulus/magnitude and angle/phase/argument
public double abs() {
    return Math.hypot(re, im);
} // Math.sqrt(re*re + im*im)

public double phase() {
    return Math.atan2(im, re);
} // between -pi and pi

// return a new Complex object whose value is (this + b)
public Complex plus(Complex b) {
    Complex a = this; // invoking object
    double real = a.re + b.re;
    double imag = a.im + b.im;
    return new Complex(real, imag);
}

// return a new Complex object whose value is (this - b)
public Complex minus(Complex b) {
    Complex a = this;
    double real = a.re - b.re;
    double imag = a.im - b.im;
    return new Complex(real, imag);
}

// return a new Complex object whose value is (this * b)
public Complex times(Complex b) {
    Complex a = this;
    double real = a.re * b.re - a.im * b.im;
    double imag = a.re * b.im + a.im * b.re;
    return new Complex(real, imag);
}

// scalar multiplication
// return a new object whose value is (this * alpha)
public Complex times(double alpha) {
    return new Complex(alpha * re, alpha * im);
}

// return a new Complex object whose value is the conjugate of this
public Complex conjugate() {
    return new Complex(re, -im);
}

// return a new Complex object whose value is the reciprocal of this
public Complex reciprocal() {
    double scale = re * re + im * im;
    return new Complex(re / scale, -im / scale);
}

// return the real or imaginary part
public double re() {
    return re;
}

public double im() {
    return im;
}

// return a / b
public Complex divides(Complex b) {
    Complex a = this;
    return a.times(b.reciprocal());
}

// return a new Complex object whose value is the complex exponential of
// this
public Complex exp() {
    return new Complex(Math.exp(re) * Math.cos(im), Math.exp(re)
            * Math.sin(im));
}

// return a new Complex object whose value is the complex sine of this
public Complex sin() {
    return new Complex(Math.sin(re) * Math.cosh(im), Math.cos(re)
            * Math.sinh(im));
}

// return a new Complex object whose value is the complex cosine of this
public Complex cos() {
    return new Complex(Math.cos(re) * Math.cosh(im), -Math.sin(re)
            * Math.sinh(im));
}

// return a new Complex object whose value is the complex tangent of this
public Complex tan() {
    return sin().divides(cos());
}

// a static version of plus
public static Complex plus(Complex a, Complex b) {
    double real = a.re + b.re;
    double imag = a.im + b.im;
    Complex sum = new Complex(real, imag);
    return sum;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:11:18.603

您的流式读取代码存在重大问题。您似乎假设每次读取都会填充整个 byte[]。但是，很可能不会。`byte[]`在移动到下一个之前，您需要完全填充每个。此外，您的最后一个`byte[]`很可能只是部分装满，您也应该考虑到这一点。

除此之外，没有人可以在不知道您的 Complex 类和您的 FFT 类中发生的情况下为您提供更多详细信息。

# jquery-ui - 我可以将 themeroller 中的默认字体更改为什么？

> ID：14370544
> 
> 赞同：0
> 
> 时间：2013-01-17T00:56:30.337
> 
> 标签：jquery-ui, jquery-mobile, webfonts, themeroller

我正在使用 jQuery Mobile，并且正在使用 ThemeRoller 构建我的主题。我看到默认设置为`Helvetica, Arial, sans-serif`但没有提供其他选项，它允许我自己编写。有没有办法实现我喜欢的任何字体，或者我只限于网络安全字体？我认为它允许任何基于 CSS3 的东西，但我再次对如何实现感到困惑。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:10:49.903

您可以指定自己的字体名称，但如果它们不是网络安全字体，则必须单独包含[`@font-face`规则](http://css-tricks.com/snippets/css/using-font-face/)。

# mysql - MySQL SELECT 返回字段值更改的行

> ID：14370547
> 
> 赞同：0
> 
> 时间：2013-01-17T00:57:07.480
> 
> 标签：mysql, sql, select

这是 table1 结构：

```
ID_Num | id_2 | field1
12-001 | 3    | ABCD
12-001 | 3    | ABCD
12-001 | 3    | ABCD
12-001 | 1    | ABCD
12-001 | 1    | ABCD
12-002 | 3    | ABCD
12-002 | 3    | ABCD
12-002 | 3    | ABCD
12-002 | 3    | ABCD
12-002 | 3    | ABCD
12-003 | 2    | ABCD
12-003 | 2    | ABCD
12-003 | 3    | ABCD
12-003 | 3    | ABCD
12-003 | 3    | ABCD 
```

现在我想选择字段 id_2 发生变化的所有 ID_Num
它应该返回 12-001 因为从 3 到 1
的变化和 12-003 因为从 2 到 3 的变化

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T00:58:50.140

```
SELECT  ID_NUM
FROM    tableNAME
GROUP   BY ID_NUM
HAVING  COUNT(DISTINCT id_2) > 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/2abd4/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:42:38.047

我意识到这`count(distinct)`需要比以下更多的处理：

```
select id_num
from tablename
group by id_num
having min(id_2) <> max(id_2) 
```

这不会将 NULL 视为单独的值，但问题中没有 NULL。

# php - 使用 Web 服务从 Web 配置中提取连接字符串

> ID：14370550
> 
> 赞同：1
> 
> 时间：2013-01-17T00:57:21.907
> 
> 标签：php, asp.net, web-services, wordpress, sql-server-2008

我有这个棘手的情况，想给你一些建议。我的客户有一个在 WordPress 中构建的网站和一个在 .Net 3.5 中构建的 Web 应用程序，现在他们希望我通过从 .Net 正在使用的数据库中查询一些信息并在所述网站上显示输出来集成这个网站。

两个站点之间的通信已经完成并且工作正常，使用一些 DLL for PHP 集成到 MSSQL 现在问题出现在这里，出于安全原因，我不想在基于 WordPress 的网站上公开他的连接字符串。没有这个，我无法连接到数据库并进行一些查询，所以我提出了一些好主意，使用 Web 服务从 ASP.Net Web 应用程序的 Web 配置中提取连接字符串。使用 PHP 的 web 服务工作正常，但最后一个问题是 web 服务是公开的。我的意思是一旦网站上线，上述网络服务对公众开放，任何人都可以通过我老板想要保密的网络配置看到（呵呵）。

我已经对如何使 Web 服务更安全感到困惑。以下是这两个网站的一些规格。

WordPress网站

*   基于 PHP
*   mysql
*   与 php_pdo_sqlsrv_53_ts_vc9.dll 和 php_sqlsrv_53_ts_vc9.dll 一起安装
*   nusoap（用于消费 ASP.Net 网络服务）
*   用于 WordPress 使用的数据库的 Mysql

.Net 网站

*   用于从 Web 配置中提取连接字符串的 Web 服务
*   添加了网络参考
*   用于数据库的 MSSQL

如果您需要有关我的问题的更多信息，请告诉我。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:19:40.030

您不必为此设置 Web 服务。只需将连接字符串存储在 Web 服务器根目录（可能是 public_html）之外的 php 文件中，然后将该文件包含在插件中。您应该对路径进行硬编码，以便有权访问该设置的人无法使用该功能来监视其他文件。还要确保 Web 服务器服务帐户对该文件具有读取权限。

这是一个非常安全的设置，因为无法通过网络直接访问该文件。

# php - 在保留键的同时反转数组值

> ID：14370551
> 
> 赞同：13
> 
> 时间：2013-01-17T00:57:21.983
> 
> 标签：php, arrays, reverse

这是我拥有的一个数组：

```
$a = array('a' => 'a1', 'b' => 'a2', 'c' => 'a3', 'd' => 'a4', 'e' => 'a5'); 
```

我想做的是在保持键不变的同时反转数组的值，换句话说，它应该如下所示：

```
$a = array('a' => 'a5', 'b' => 'a4', 'c' => 'a3', 'd' => 'a2', 'e' => 'a1'); 
```

我应该怎么做？

PS我试过用`array_reverse()`但是好像没用

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-17T01:01:24.390

一些使用原生 PHP 函数的逐步处理（这可以用更少的变量进行压缩）：

```
$a = array('a' => 'a1', 'b' => 'a2', 'c' => 'a3', 'd' => 'a4', 'e' => 'a5');

$k = array_keys($a);
$v = array_values($a);

$rv = array_reverse($v);

$b = array_combine($k, $rv);

var_dump($b); 
```

结果：

```
array(5) {
  'a' =>
  string(2) "a5"
  'b' =>
  string(2) "a4"
  'c' =>
  string(2) "a3"
  'd' =>
  string(2) "a2"
  'e' =>
  string(2) "a1"
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-17T01:01:08.827

可以通过使用`array_combine`、`array_values`和`array_keys`。`array_values`对于一个简单的任务来说，可能看起来有很多功能，但可能有更简单的方法。

```
array_combine( array_keys( $a ), array_reverse( array_values( $a ) ) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T01:10:12.757

这是另一种方式；

```
$keys = array_keys($a);
$vals = array_reverse(array_values($a));
foreach ($vals as $k => $v) $a[$keys[$k]] = $v; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T01:01:59.280

这样就可以了（刚刚写了，[demo here](http://ideone.com/K3NfK3)）：

```
<?php
function value_reverse($array)
{
    $keys = array_keys($array);
    $reversed_values = array_reverse(array_values($array), true);
    return array_combine($keys, $reversed_values);
}

$a = array('a' => 'a1', 'b' => 'a2', 'c' => 'a3', 'd' => 'a4', 'e' => 'a5');

print_r( value_reverse($a) ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T01:22:14.837

我认为这应该工作..

```
<?php
$old = array('a' => 'a1', 'b' => 'a2', 'c' => 'a3', 'd' => 'a4', 'e' => 'a5');
$rev = array_reverse($old);

foreach ($old as $key => $value) {
    $new[$key] = current($rev);
    next($rev);
}

print_r($new);
?> 
```

# windows-7 - 在 Windows 7 中更改 exe 文件的图标

> ID：14370553
> 
> 赞同：30
> 
> 时间：2013-01-17T00:57:47.603
> 
> 标签：windows-7, exe

我如何在 windows7 中更改 exe 文件的图标。我问的是更改应用程序本身的图标而不是快捷方式，因为我知道有一种方法可以更改快捷方式的图标。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-17T02:15:15.900

[资源黑客](http://angusj.com/resourcehacker)可以做到这一点。

[如何修改.exe文件的图标](http://howtogeek.com/75983/stupid-geek-tricks-how-to-modify-the-icon-of-an-.exe-file)

# java - 如何以编程方式在 JavaFX 中设置选项卡标签的颜色或纹理？

> ID：14370554
> 
> 赞同：14
> 
> 时间：2013-01-17T00:57:59.950
> 
> 标签：java, tabs, javafx-2, javafx-8, javafx-css

我有`TabPane`几个`Tab`s。如果某个操作的结果`Tab`失败，我想将其设置`Tab` `Label`为`Fill`红色，或者将纹理设置为散列（对于那些有色盲的人）。我想`Color`稍后将其重置为默认值。

通过阅读此处的一些问题，可以使用样式表对其进行静态设置。

```
#MyTabPane .tab *.tab-label {
    -fx-text-fill: white;
} 
```

如何访问`Tab` `label`并动态设置它的颜色/纹理？

`tab.setStyle("??");`

**ELLTZ 的补充**

如何使用上述内联样式来更改`Paint`with`Label`样式类`tab-label`和`Button`( `StackPane`)的`tab-close-button`

*需要的代码示例*

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-18T13:45:03.270

设置图形和样式对我有用：

```
Tab tabB = new Tab();
tabB.setText("");
tabPane.getTabs().add(tabB);
tabB.setStyle("-fx-border-color:red; -fx-background-color: blue;");
tabB.setGraphic(new Label("Tab B"));
tabB.getGraphic().setStyle("-fx-text-fill: #c4d8de;"); 
```

# compilation - RVM 不编译 ruby 1.9.3

> ID：14370561
> 
> 赞同：1
> 
> 时间：2013-01-17T00:58:41.493
> 
> 标签：compilation, rvm, ruby-1.9.3

我遇到了以前从未见过的 RVM 问题。我正在尝试安装 ruby​​ 1.9.3，但它安装的是二进制版本而不是编译：

```
rvm install 1.9.3
Searching for binary rubies, this might take some time.
ruby-1.9.3-p362 - #configure
ruby-1.9.3-p362 - #download
ruby-1.9.3-p362 - #validate archive
tar: Record size = 8 blocks
tar: Record size = 8 blocks
ruby-1.9.3-p362 - #extract
ruby-1.9.3-p362 - #validate binary
ruby-1.9.3-p362 - #setup
Saving wrappers to '/home/vagrant/.rvm/bin'.
ruby-1.9.3-p362 - #importing default gemsets, this may take time ... 
```

那么如果我尝试

```
$ rvm use 1.9.3
$ ruby -v
$ ruby 1.9.3p362 (2012-12-25 revision 38607) [i686-linux] 
```

但是，没有来源：

```
 $ ls .rvm/src/
 ruby-1.8.7-p371  rubygems-1.8.24  rvm  yaml-0.1.4 
```

RVM 不编译 ruby​​ 1.9.3 有什么原因吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:41:18.447

编译 ruby​​ 需要时间，RVM 提供二进制 rubies，因此可以更快地安装 Ruby，并且没有编译错误会破坏安装。

您可以检查`rvm help install`第一行在哪里：

> ## 用法
> 
> ```
> rvm install {ruby-string} [--verify-download {0,1,2}] [--binary|--disable-binary|--movable] 
> ```

所以使用它就足够了：

```
rvm reinstall 1.9.3 --disable-binary 
```

但如果您只需要源代码，请运行：

```
rvm fetch 1.9.3 
```

# wordpress - Wordpress 搜索表单未传递获取变量

> ID：14370568
> 
> 赞同：2
> 
> 时间：2013-01-17T00:59:19.277
> 
> 标签：wordpress, search, get

我有一个问题，我在 Wordpress 3.4 中创建一个简单的自定义搜索表单，位于模板文件中。

```
<form method="get" id="searchform" action="<?php bloginfo('home'); ?>">
 <input type="text" value="" name="s" id="s" />
 <input type="hidden" name="search-type" value="vacancies" />
 <input name="submit" type="submit" value="Go" />
</form> 
```

提交后会点击 search.php 文件，在该文件中进行进一步处理。

```
<?php print_r($_GET); ?> 
```

问题是我无法访问 search.php 中的 get 变量。我可以在这里回显，所以我知道我肯定会点击 search.php，但我的 get 数组每次都是空的。

任何想法都会有很大帮助。我觉得我可能犯了一个菜鸟的错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T11:08:48.253

我也遇到了这个问题。我使用的主题 (Roots) 对搜索页面 URL 进行了一些花哨的重写。因此，搜索“法国假期”将`site.com/search/french+holiday`代替`site.com/?s=french+holiday`.

如果您在 URL 中看不到变量，您将无法使用`$_GET`.

我改回标准 URL，现在可以访问我的`$_GET`值。

希望有帮助。

# php - sql/php - 水平和垂直显示记录

> ID：14370569
> 
> 赞同：-1
> 
> 时间：2013-01-17T00:59:40.870
> 
> 标签：php, mysql, sql, pivot, unpivot

所以我从基本的 mySQL 选择查询中获得了这些数据，每行输出。

-基本的 mySQL 选择查询

```
ID---------DATE---------POINT1---POINT2------TOTAL
1----2013-01-03----------10----------16---------26
2----2013-01-03----------11----------22---------33
3----2013-01-03----------15----------7----------22
1----2013-01-04----------20----------4----------24
2----2013-01-04----------8-----------32---------40
3----2013-01-04----------16----------12---------28
1----2013-01-05----------12----------17---------29
2----2013-01-05----------2-----------29---------31
3----2013-01-05----------8-----------10---------18 
```

我想要做的是按列中的日期和行中的 id 对数据进行动态排序，例如每月。这是所需的输出，

```
/----------/2013-01-03/---------/2013-01-04/------/2013-01-05/------/
ID--Point 1-Point2-Total-Point 1-Point2-Total-Point 1-Point2-Total
1----10-------16-----26-----20-------4-----24----12-----17------29
2----11-------22-----33------8------32-----40-----2-----29------31
3----15-------7------22-----16------12-----28-----8-----10------18 
```

然后将其输出到 csv 或 excel。我对如何实现这一目标有点迷茫。如果有人可以指导我，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:16:24.073

You can *unpivot* the data in your columns and then perform a *pivot* to transform all of the data back into columns:

```
select id,
  sum(case when date='2013-01-03' and col='Point1' then value end) Point1_01032013,
  sum(case when date='2013-01-03' and col='Point2' then value end) Point2_01032013,
  sum(case when date='2013-01-03' and col='Total' then value end) Total_01032013,
  sum(case when date='2013-01-04' and col='Point1' then value end) Point1_01042013,
  sum(case when date='2013-01-04' and col='Point2' then value end) Point2_01042013,
  sum(case when date='2013-01-04' and col='Total' then value end) Total_01042013,
  sum(case when date='2013-01-05' and col='Point1' then value end) Point1_01052013,
  sum(case when date='2013-01-05' and col='Point2' then value end) Point2_01052013,
  sum(case when date='2013-01-05' and col='Total' then value end) Total_01052013
from
(
  select id, date_format(date, '%Y-%m-%d') date, 'Point1' col, Point1 as value
  from yourtable
  union all
  select id, date_format(date, '%Y-%m-%d') date, 'Point2' col, Point2
  from yourtable
  union all
  select id, date_format(date, '%Y-%m-%d') date, 'Total' col, Total
  from yourtable
) src
group by id; 
```

See [SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/de5a0/9)

The result is:

```
| ID | POINT1_01032013 | POINT2_01032013 | TOTAL_01032013 | POINT1_01042013 | POINT2_01042013 | TOTAL_01042013 | POINT1_01052013 | POINT2_01052013 | TOTAL_01052013 |
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
|  1 |              10 |              16 |             26 |              20 |               4 |             24 |              12 |              17 |             29 |
|  2 |              11 |              22 |             33 |               8 |              32 |             40 |               2 |              29 |             31 |
|  3 |              15 |               7 |             22 |              16 |              12 |             28 |               8 |              10 |             18 | 
```

# c# - 如何查询子表值

> ID：14370574
> 
> 赞同：1
> 
> 时间：2013-01-17T01:00:07.973
> 
> 标签：c#, .net, linq, entity-framework, linq-to-entities

我有 2 个表：POHeader 和 PODetail。我想返回所有具有关联 PODetail.ItemId = intItemId 的 POHeaders。我怎样才能在 LINQ 中做到这一点？

这是我尝试过的。

首先，我的存储库中有一个方法，它使用 Include 参数包含 PODetails：

```
public IQueryable<POHeader> SearchForWithDetails(int intFacilityId)
{
    return DbSet.Include("PODetails").Where(x => x.FacilityId == intFacilityId);
} 
```

然后将结果传递给：

```
public IQueryable<POHeader> SearchForPODetailsByItemId(IQueryable<POHeader> poHeaders, int intItemId)
{
    //This returns a type of PODetail not POHeader
    var q = poHeaders.SelectMany(c => c.PODetails).Where(c => c.ItemId == intItemId);

    //In this case, I can't figure out the syntax :(
    var p = from poHeader in poHeaders
            let filteredPOs = from poDetail in poHeader.PODetails
            where poDetail.ItemId == intItemId
            select ????
    return p;
} 
```

这样做的正确方法是什么？

此外，我可以预见需要 2 个结果：

1.  只返回一个 IQueryable
2.  返回连接表结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:09:02.693

试试这个;

```
var result = poHeaders.Where(e => e.PODetails.Any(a => a.ItemId == intItemId)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:09:44.373

假设您的 Header->Detail 是一对多的关系，并且 Detail 有一个导航回到它的标题，称为 .Header：

```
public IQueryable<POHeader> SearchForPODetailsByItemId(IQueryable<POHeader> poHeaders, int intItemId)
{
    var headersForThisItem = poHeaders.SelectMany(pod => pod.PODetails).Where(pod => pod.ItemId == intItemId)
        .Select(pod=> pod.Header).Distinct();//.Distinct to eliminate duplicates when 2 Details have the same header.  Not necessary if ItemId filter naturally provides distinct results.

    return headersForThisItem ;
} 
```

未经测试，但我认为这会给你你想要的。

# java - 为什么原子操作被认为是线程安全的？

> ID：14370575
> 
> 赞同：5
> 
> 时间：2013-01-17T01:00:13.180
> 
> 标签：java, thread-safety, atomic

原子操作如何使线程安全？我在[Wikipedia 关于线程安全的文章](http://en.wikipedia.org/wiki/Thread_safety)中阅读了有关该主题的内容。但这篇文章并没有真正解释幕后的过程。换句话说，为什么线程 A 执行的“原子”操作不能被线程 B 中断？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T01:04:13.003

原子操作要么完成，要么根本不完成。其他线程将无法看到“进行中”的操作——它永远不会在部分完成状态下被查看。这就是“原子”一词在这种情况下的含义。

实现这一点的幕后魔力因实施而异。出于您的并发设计的目的，您可以依赖的只是执行的全有或全无保证。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T01:06:25.167

> 但是他们并没有真正解释幕后的过程，换句话说，为什么线程 A 执行的原子操作不能被线程 B 中断？

他们没有解释幕后发生的事情的原因是这是高度特定于实现的。例如，它取决于可用于在实现平台上执行此类操作的硬件指令。

但你不应该担心这一点。您不应该关心*如何实现*原子性（例如不可中断性）。您应该简单地依赖 AtomicXxx 类 API 提供的*保证*，即某些操作*将以*原子方式运行，并基于这些保证构建更高级别的线程安全。

但请注意，AtomicXxx 类的原子性属性仅适用于单个操作。AtomicXxx 操作序列不会以原子方式执行，因此不会自动成为线程安全的。

简而言之，如果你使用 AtomicXxx 类来实现线程安全，你需要*了解你在做什么*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T02:14:56.730

比较和设置是一条机器指令，因此不会被中断。

从这个意义上说，所有机器指令都是原子的，这不是很有趣。例如，简单的写入总是原子的。

“有趣”的原子操作是那些直观地由 2 个或多个步骤组成，但实现为一个不可分割的步骤的操作，例如 compare-and-set；32 位机器上 long 的 volatile r/w。

# python - 自定义 Django 数据库前端

> ID：14370576
> 
> 赞同：3
> 
> 时间：2013-01-17T01:00:19.870
> 
> 标签：python, database, django, frontend

在过去的一两周里，我一直在努力了解 Django。它慢慢开始变得有意义，我真的很喜欢它。

我的目标是为我的用户用数据库和前端替换相当混乱的 Excel 电子表格。这将涉及从表格中提取数据，以 Web 表格格式显示，并允许通过文本字段和下拉菜单进行更改，并使用一个简单的更新按钮来更新对数据库的所有更改。

我的问题是，内置的 Django Forms 功能会是最好的解决方案吗？或者我会为我的对象创建某种 for 循环并将它们包装在我的模板中的 html 表单语法中？我只是不太确定如何解决。

抱歉，如果这似乎是一个简单的问题，我只是觉得可能有几种方法可以做到，但也许有一种完美的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:55:42.427

在 Django 中导出 excel 表并将它们呈现为文本字段，并不像两步过程那么简单。

你需要知道 Django 是如何工作的。

首先，您需要使用某种语言或一些现成的工具将mysql中的数据导出到数据库中。

然后你需要为那个表创建一个模型，然后你可以使用 Django admin 来编辑它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:15:05.430

不实现您自己的页面并拥有数据的表格视图的最快方法是使用 django 的内置管理界面。它为您提供排序、过滤和搜索功能，并且可以快速上手。您只需要在 models.py 中定义您的模型并按照[文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)中的说明设置管理页面。

通常，管理页面不用作用户或客户的代表，但在您描述的情况下，它似乎是一个干净而快速的选择。

# tcl - TCL 调用另一个文件中的 proc，但找不到 proc：无效命令

> ID：14370577
> 
> 赞同：3
> 
> 时间：2013-01-17T01:00:20.513
> 
> 标签：tcl, tclsh

我是 TCL 的新手。我在 Windows Vista 下通过​​ DOS 窗口执行 TCL 代码：“ `tclsh85 FOD/Scripts/program1.tcl`”。

`program1.tcl`包括一个“ `set junk [tproc $a]`”，这给了“ `invalid command name tproc`”。

`tproc``program2.tcl`在目录“ ”中定义`c:a/b/lib`。当我运行“”时，我需要做什么才能让 TCL 找到 proc `tclsh85 FOD/Scripts/program1.tcl`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:58:24.550

您是否在 program1.tcl 中进行了`source`program2.tcl ？

如果没有，那么你需要`source "program2.tcl"`在打电话之前`tproc`

见[http://tcl.tk/man/tcl8.5/TclCmd/source.htm](http://tcl.tk/man/tcl8.5/TclCmd/source.htm)

您还应该熟悉[http://wiki.tcl.tk/9859](http://wiki.tcl.tk/9859)`package`上的 Tcl命令

# ruby-on-rails - 使用 Redmine REST API 进行身份验证

> ID：14370579
> 
> 赞同：3
> 
> 时间：2013-01-17T01:00:26.440
> 
> 标签：ruby-on-rails, api, rest, authentication, redmine

我正在开发一项需要身份验证的服务。

我想基于我的 Redmine 进行身份验证，并向作为私人项目成员的注册用户授予访问权限。

我想通的会员：

```
curl -v -u account:secret \
https://myredmine/projects/private/memberships.json 
```

但是如何确定用户是否可以进行身份​​验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:00:26.440

使用`/users/current.json`：

```
curl -v -u account:secret \
https://myredmine/users/current.json 
```

如果用户登录失败，它将返回 401。

添加`?include=memberships`到 URL 以检索关联项目的列表。

我认为它不适用于 OpenID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:07:19.520

使用内置 API。获得密钥后，您可以为每个用户启用它：

```
// Pseudo-code
api_key = '65454ftfg53543f34g34f23g'
url = "http://www.myredminesite.com/projects/my_project/issues.json?key=" + api_key 
```

如果您登录并单击“我的帐户”，则可以启用 API 密钥，然后右侧应该是您的 API 访问密钥.project。

我认为旧版本存在一些问题。我运行**Redmine 2.1.2.stable**，效果很好。

# php - PHPExcel dumping Excel contents onto Screen

> ID：14370597
> 
> 赞同：3
> 
> 时间：2013-01-17T01:02:41.713
> 
> 标签：php, phpexcel

I am using PHPExcel for the first time. I just wrote a basic code snippet to read one of my Excel files. I want to load the file, iterate through each row and process its contents. However, the function to load the file seems to dump its contents onto the screen.

My code snippet is this:

```
 include 'lib/Classes/PHPExcel/IOFactory.php';
      $dest = "uploads/";
      $excel = "2012-12-STANDARD.xls";

      $objPHPExcel = PHPExcel_IOFactory::load($dest.$excel); 
```

On running this code, the data in the sheet has been echoed twice onto the screen. First, like a regular echo, and the second is a var_dump.

Here is a sample snippet of the screen output:

> DOM ELEMENT: HTML DOM ELEMENT: BODY DOM ELEMENT: P START OF PARAGRAPH: END OF PARAGRAPH: FLUSH CELL: A1 => Type ZipCode City State County AreaCode CityType CityAliasAbbreviation CityAliasName Latitude Longitude TimeZone Elevation CountyFIPS DayLightSaving PreferredLastLineKey ClassificationCode MultiCounty StateFIPS CityStateKey CityAliasCode PrimaryRecord CityMixedCase CityAliasMixedCase StateANSI CountyANSI FacilityCode CityDeliveryIndicator CarrierRouteRateSortation FinanceNumber UniqueZIPName D 18540 ......
> 
> array 1 => array 'A' => string 'Type ZipCode City State County AreaCode CityType CityAliasAbbreviation CityAliasName Latitude Longitude TimeZone Elevation CountyFIPS DayLightSaving PreferredLastLineKey ClassificationCode MultiCounty StateFIPS CityStateKey CityAliasCode ........'... (length=4573)

Am I doing something wrong here? Why would the load function echo the contents before accessing it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T07:08:28.183

The cause of the problem is that the `IOFactory` static `load` method fails to determine your file's format correctly. You might not want to use it after all, because according to the documentation:

> While easy to implement in your code, and you don't need to worry about the file type; **this isn't the most efficient method** to load a file; and it lacks the flexibility to configure the loader in any way before actually reading the file into a PHPExcel object.

To successfully load the file you can instantiate a `Reader` explicitly specifying the format. For a file in Excel 2007 format it would be:

```
$xl_reader = PHPExcel_IOFactory::createReader('Excel2007');
$xl = $xl_reader->load("/tmp/yourfile.xls"); 
```

You can also use a Reader's `canRead()` method to determine wether the reader that you created can load the specified file.

```
$xl_reader = PHPExcel_IOFactory::createReader('Excel2007');
if ($xl_reader->canRead('/tmp/yourfile.xls')) {
    echo "It's a success! Loading the file..."; 
    $xl = $xl_reader->load('/tmp/yourfile.xls');
    ...
} else {
    echo "Cannot read the file.";
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:25:12.330

That code is picking up on the HTML Reader, which still has some of my diagnostics in the code (mea culpa)... if you edit the file Classes/PHPExcel/Reader/HTML.php and comment out every line that contains an echo or a var_dump statement, then it should eliminate the problem.

Coincidence that it's something I was actually working on last night.

Then you can also ask the person who provided you with the file to give you a proper .xls file in future, rather than one which has an extension of .xls but contains html markup rather than a properly formatted BIFF file.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T01:10:41.150

Try adding the PHPExcel to the PHP include path.

```
 set_include_path(get_include_path().PATH_SEPARATOR.'lib/Classes/PHPExcel');
  include 'lib/Classes/PHPExcel/IOFactory.php';
  $dest = "uploads/";
  $excel = "2012-12-STANDARD.xls";

  $objPHPExcel = PHPExcel_IOFactory::load($dest.$excel); 
```

# objective-c - NSTextView typingAttributes==nil 用于未编辑的文本视图

> ID：14370598
> 
> 赞同：1
> 
> 时间：2013-01-17T01:02:45.563
> 
> 标签：objective-c, cocoa, nstextview, nsattributedstring

我在获取尚未编辑的富文本 NSTextView 的“typingAttributes”时遇到问题。

```
[textView typingAttributes]; 
```

返回零

当我键入任何内容并删除所有内容时，相同的指令会返回正确的属性字典。

因此我的问题是：有没有办法获取未编辑的 NSTextView 的类型属性。

# ios - 如何使我的 UINavigationController 具有 clearColor？

> ID：14370601
> 
> 赞同：0
> 
> 时间：2013-01-17T01:02:59.497
> 
> 标签：ios, uinavigationcontroller, uinavigationbar, uicolor

> **可能重复：**
> [iPhone SDK - 使 UINavigationBar 透明](https://stackoverflow.com/questions/2315862/iphone-sdk-make-uinavigationbar-transparent)

在我的应用程序中，我使用的是通过 Push Segues 包装所有其他视图的 NavigationController。所以我想知道如何将控制器设置为所有视图都有清晰的背景。

我试过

```
[self.navigationController.navigationBar setBackgroundColor:[UIColor clearColor]]; 
```

但我的视图仍然加载相同的库存颜色条。

任何可以给我一些帮助的人都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:12:09.920

就像codingNinja说的，你应该继承`UINavigationBar`和覆盖`- (void)drawRect:(CGRect)rect`，在这个方法中，你可以使用

```
[[UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:0.0] set];
UIRectFill(rect); 
```

将背景颜色设置为清晰。

然后您可以将 YourNavigationBar 用作导航栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:08:10.093

您没有设置栏的背景颜色，而是设置 tintColor 但我不知道您是否能够说清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T01:08:53.327

如果您指的是 viewControllers 附带的导航栏，它是 navigationController 的 viewControllers 数组的一部分，那么您不能简单地设置它。如果你想拥有清晰的导航栏，最好的方法是只使用没有导航控制器的 viewControllers，并用模态 segues 呈现 viewControllers。您将需要自己处理导航，例如从一个视图控制器转到前一个视图控制器，关闭视图控制器等。

您可以子类化导航栏并覆盖该`drawrect`方法。我个人会`[UIColor clearColor]`尽可能避免使用混合图层并提高性能。

# usb - pyusb 断言错误 - 没有 USB 输出端点？

> ID：14370603
> 
> 赞同：4
> 
> 时间：2013-01-17T01:03:07.353
> 
> 标签：usb, pyusb

我正在尝试通过 Linux 上的 python 而不是通过 windows exe 对滚动 LED 徽章进行编程（将新消息上传到）。我已经通过 Windows 应用程序捕获了成功上传的内容，我将用作模板，但目前我无法将任何内容写入设备。

当我运行我的脚本时，我得到一个断言错误，我认为这意味着没有找到 OUT 端点。`lsusb`似乎证实了这一点，但我可能弄错了。这基本上是直接从[pyusb 教程](http://pyusb.sourceforge.net/docs/1.0/tutorial.html "pyusb教程")中`alternate_setting`删除的，`intf`因为它导致了管道错误并且*显然*没有必要。

```
intf = usb.util.find_descriptor(cfg, bInterfaceNumber = interface_number,)

ep = usb.util.find_descriptor(
    intf,
    # match the first OUT endpoint
    custom_match = \
    lambda e: \
        usb.util.endpoint_direction(e.bEndpointAddress) == \
        usb.util.ENDPOINT_OUT
)

assert ep is not None # < assertion error 
```

如果有帮助，lsusb -vv 用于 LED 徽章：[http ://bpaste.net/show/biixy6e38A71WlCw7euU/](http://bpaste.net/show/biixy6e38A71WlCw7euU/)

任何指导将不胜感激 - 我对 USB 协议完全陌生，也不擅长 python。

# jquery - 如何选择div中的最后一个元素

> ID：14370604
> 
> 赞同：1
> 
> 时间：2013-01-17T01:03:11.773
> 
> 标签：jquery

我无法使用 div 中的图像设置我的 css。

我有

```
<div class='test'>

   <a href='#'>   <img src='haha.jpg'/>   </a>
   <a href='#'>   <img src='imageINeed.jpg'/>  </a>

</div>

<div class='test'>

   <a href='#'>   <img src='haha.jpg'/>   </a>
   <a href='#'>   <img src='imageINeed1.jpg'/>  </a>

</div>

<div class='test'>

   <a href='#'>   <img src='haha.jpg'/>   </a>
   <a href='#'>   <img src='imageINeed2.jpg'/>  </a>

</div> 
```

我下面的 jquery 将选择第二张图片

```
imageSize could be varies.

  $('.test).each(function(){

        $(this).find('img:eq(1)').width(imageSize);
  }) 
```

但是，有时我在div中只有 1 个`<a>`标签。`test`

```
 <div class='test'>
       <a href='#'>   <img src='imageINeed2.jpg'/>  </a>
   </div> 
```

`eq(1)``img`如果我只有 1 个`<a>`标签，则不会选择

我试过了

```
$('.test).each(function(){
    $(this).find('img:nth-last-child').width(imageSize);
}) 
```

它不会这样做。有什么办法吗？非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T01:04:06.903

使用[`:last`](http://api.jquery.com/last-selector/)选择器：

```
$(".test").find("img:last").width(imageSize); 
```

# php - 在循环中重置边界到达变量

> ID：14370605
> 
> 赞同：0
> 
> 时间：2013-01-17T01:03:21.830
> 
> 标签：php, loops, pixels, rgba

所以，基本上我正在循环存储在`$pixels`. 在 for 循环中，必须有 2 个变量，`$x`并且`$y`. 变量`$x`需要在每个循环上增加，直到它达到预定义的边界，`$xBound`之后它重置为零。`$y`如果 $x 重置直到它到达自己的边界，变量需要增加`$yBound`。当达到 $y 的边界时，应该完成（大）数组循环。

你们中有人知道如何设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:11:42.860

你可以这样做：

```
for ($y=0; $y < $yBound; $y++) {  
    for ($x=0; $x < $xBound; $x++) {
        // do whatever here, $pixels[$x][$y]
    }
} 
```

# osgi - 在 Adob e CQ5 中设置属性

> ID：14370606
> 
> 赞同：4
> 
> 时间：2013-01-17T01:03:27.103
> 
> 标签：osgi, aem, sling

我正在开发基于 CQ5 的应用程序，这对我来说是一个全新的领域，因为我之前主要研究基于 Spring 的网络应用程序。

该应用程序是基于 Blue-prints 原型的 maven 项目（http://www.cqblueprints.com/xwiki/bin/view/Blue+Prints/The+CQ+Project+Maven+Archetype）。

现在我有一个问题，添加一些属性的标准方法是什么，通常会转到标准网络应用程序中的 config.properties （或类似文件）文件。包含诸如 hostNames、accountNumbers 等内容的属性。

干杯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T09:02:51.883

我不熟悉蓝图，但据我了解，这只是生成 CQ 项目结构的一种方式，因此我认为它对您管理配置参数的方式没有任何实际影响。

CQ5 基于[Apache Sling](http://sling.apache.org)，它使用 OSGi ConfigAdmin 服务来配置参数，并提供一些工具来简化此操作。

[您可以在PathBasedDecorator](http://svn.apache.org/repos/asf/sling/trunk/samples/path-based-rtp/src/main/java/org/apache/sling/samples/pathbasedrtp/PathBasedResourceDecorator.java) Sling 组件中看到一个示例，该组件使用 @Component 注释将自己声明为 OSGi 组件：

```
@Component(metatype=true, ...) 
```

之后使用@Property 注解声明一个多值可配置参数，具有默认值：

```
@Property(value={"/content:2", "/sling-test-pbrt:2"}, unbounded=PropertyUnbounded.ARRAY)
private static final String PROP_PATH_MAPPING = "path.mapping"; 
```

然后在组件的 activate() 方法中读取该值：

```
 final Dictionary<?, ?> properties = componentContext.getProperties();
  final String[] mappingList = (String[]) properties.get(PROP_PATH_MAPPING); 
```

并且包含该组件的 OSGi 包提供了一个[metatype.properties](http://svn.apache.org/repos/asf/sling/trunk/samples/path-based-rtp/src/main/resources/OSGI-INF/metatype/metatype.properties)文件来定义可配置参数的名称和标签。

就是这样——有了这个，Sling 和 OSGi 框架为组件生成了一个基本的配置 UI，您可以从 /system/console/config 访问它，并在配置参数更改时自动管理组件的激活和重新激活。

这些配置也可以来自 JCR 存储库，这要感谢 Sling 安装程序在那里拾取它们，您可以在 CQ5 存储库的 /libs 和 /apps 下名为“config”的文件夹中找到许多配置。

另一种选择是直接使用 JCR 内容，具体取决于您的可配置参数的使用方式。您可以告诉您的组件其配置位于存储库中的 /apps/foo/myparameters 下（并仅使该值可配置），并根据需要在该节点下添加 JCR 属性和子节点，以便您的组件可以读取。缺点是当参数改变时你的@Component 不会自动重启，就像直接使用 OSGi 配置时一样。

冗长的解释......希望这会有所帮助;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T02:28:06.443

非常感谢 Bertrand，您的回答确实为我指明了正确的方向。

我所做的是为每个运行模式创建了 .ConfigService.xml，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0"         xmlns:jcr="http://www.jcp.org/jcr/1.0"
jcr:primaryType="sling:OsgiConfig"
myconfig.config="{String}My Value"/> 
```

然后在我的 ConfigService 中看起来像这样：

```
@Component(immediate = true, metatype = true)
@Service(ConfigService.class)
public class ConfigService {

    private Dictionary<String, String> properties;

    @SuppressWarnings("unchecked")
    protected void activate(ComponentContext context) {
        properties = context.getProperties();
    }

    protected void deactivate(ComponentContext context) {
        properties = null;
    }

    public String getProperty(String key) {
        return properties.get(key);     
    }
} 
```

如果我需要使用 @Reference 获取配置属性来访问它，那么我只使用 ConfigService。

我希望可以帮助别人！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T18:06:56.563

ConfigService 示例可能不是最好的方法，因为 ComponentContext 仅应在组件激活和停用期间依赖。

# ruby-on-rails - Mongoid：查询嵌入的（recursively_embeds_many）文档

> ID：14370609
> 
> 赞同：1
> 
> 时间：2013-01-17T01:03:33.083
> 
> 标签：ruby-on-rails, mongoid

**如何找到符合我的标准的所有文档，而不管它嵌入文档的深度如何？**

假设我有一个使用 *recursively_embeds_many* 的模型。例如，可以有回复的评论。回复，可以有另一个回复等等。

```
class Comment
  include Mongoid::Document
  field :content, type: String
  recursively_embeds_many # this makes comment.child_comments available
end 
```

所以结构基本上是：

*   评论
    *   内容（字符串）
    *   评论（评论列表）

**如何查询所有*内容*等于 "foo"**的评论文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T03:52:27.050

该解决方案结合使用 Mongodb 点符号查询`$or`来提取相关评论，然后遍历它们。您必须指定最大递归级别。

请不要在现场制作中使用任何东西！如果您的数据库崩溃，我不想负责：P

```
# app/models/comment.rb
class Comment
  include Mongoid::Document
  field :content, type: String
  recursively_embeds_many # this makes comment.child_comments available

  # 'n' is the maximum level of recursion to check.
  def self.each_matching_comment(n, q, &block)
    queries = 0.upto(n).collect { |l| level_n_query(l, q) }
    Comment.or(*queries).each { |c| c.each_matching_subcomment(q, &block) }
  end

  def self.level_n_query(n, q)
    key = (['child_comments'] * n).join('.') + 'content'
    return {key => q}
  end

  # recursive, returns array of all subcomments that match q including self
  def each_matching_subcomment(q, &block)
    yield self if self.content == q
    self.child_comments.each { |c| c.each_matching_subcomment(q, &block) }
  end
end

# hits each comment/subcomment up to level 10 with matching content once
Comment.each_matching_comment(10, 'content to match') do |comment|
  puts comment.id
end 
```

如果您希望这更快，您应该在您的评论和子评论上建立索引。

# project-files - 从已发布的文件重新创建 Rapidweaver 项目

> ID：14370610
> 
> 赞同：1
> 
> 时间：2013-01-17T01:03:39.043
> 
> 标签：project-files

我的任务是维护别人用 Rapidweaver 创建的网站。不幸的是，我只有发布到网站的文件。Rapidweaver 项目文件已消失。有什么方法可以从已发布的文件中重新创建 Rapidweaver 项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-12T01:26:04.080

好吧，有一种方法可以找回它。使用名为“sitesucker”的程序将整个站点下载到您的硬盘上。寻找一个名为“rw_resources”的文件夹（不是普通资源）。您将找到两个子文件夹“主题”和“插件”。下拉后，“主题”文件夹中将有一个以主题名称命名的文件夹，“插件”文件夹中将有一个以插件名称命名的文件夹。购买和安装 rapidweaver、堆栈、插件和主题。创建一个空白项目文件。在 finder 中打开这个项目文件。返回到您吸出的网站的文件夹。小心地将相关文件转移到空白项目文件中。不要弄乱“theme.plist”或“info.plist”文件。关闭 .rwsw 三明治。重新启动 rapidweaver。你的“空白”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T03:22:35.547

我确定这为时已晚，但对于其他有类似问题的人来说，您不能从已发布的文件中重新创建 Rapidweaver 项目。现在，查看代码，您可能能够找出使用了哪个主题并从头开始，但这是您能做的最好的事情。Rapidweaver 首先依赖于主题，但也有很多其他的插件可以使用，如果您没有安装这些插件或主题，您将无法编辑原始项目文件，更不用说导出的网站了。

# ajax - 如何在 GAE GO 中实现 AJAX

> ID：14370616
> 
> 赞同：0
> 
> 时间：2013-01-17T01:04:27.470
> 
> 标签：ajax, google-app-engine, go

我知道可以使用 jQuery Ajax 进行 ajax 发布，但调用如何返回值、文本、html 或 json？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T01:19:58.397

这里有一个很好的关于在 Go 中创建 Web 应用程序的入门：http: [//golang.org/doc/articles/wiki/](http://golang.org/doc/articles/wiki/)

saveHandler 函数中给出了处理 POST 的示例：

```
func saveHandler(w http.ResponseWriter, r *http.Request) {
    title := r.URL.Path[lenPath:]
    body := r.FormValue("body")
    p := &Page{Title: title, Body: []byte(body)}
    p.save()
    http.Redirect(w, r, "/view/"+title, http.StatusFound)
} 
```

在你的情况下，而不是重定向，只返回一个字符串，例如。

```
func saveHandler(w http.ResponseWriter, r *http.Request) {
    value := r.FormValue("inputVal")
    err := saveFunction(value)
    if err == nil {
        fmt.Fprintf(w, "OK")
    } else {
       fmt.Fprintf(w, "NG")
    }
}

func main() {
    http.HandleFunc("/", indexHandler)
    http.HandleFunc("/save", saveHandler)
    http.ListenAndServe(":8080", nil)
} 
```

.. 并且（因为您使用的是 jQuery），使用回调处理它，如[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)所示：

```
$.post('/save', {inputVal: "banana"}, function(data) {
  if(data == "OK") {
    alert("Saved!");
  } else {
    alert("Save Failed!");
  }
}); 
```

如果你想返回 JSON，你需要学习如何编组你的数据，然后像我们返回上面的字符串一样返回它。

这是 JSON 文档的链接：http: [//golang.org/pkg/encoding/json/#Marshal](http://golang.org/pkg/encoding/json/#Marshal)

A good way to get familiar with how to use it is to have a play around on [http://play.golang.org](http://play.golang.org), marshalling and unmarshalling structs and printing them out. Here's an example: [http://play.golang.org/p/OHVEGzD8KW](http://play.golang.org/p/OHVEGzD8KW)

# c# - asp.net MVC 4中的动态RouteConfig

> ID：14370619
> 
> 赞同：2
> 
> 时间：2013-01-17T01:04:35.840
> 
> 标签：c#, asp.net-mvc, routing

我知道我可以在 MVC 应用程序的 RouteConfig 中更改路由：

```
routes.MapRoute(name: "epage", url: "view/SpecificURL", defaults: new {
    controller = "ePage",
    action = "Index"
}) 
```

但我想知道如何重定向来自数据库的值。我的数据库中有一行有标题。因此，对于来自数据库的每个标题，我想重定向到特定的 url ex。

db 中的标题可能是`"pink"` 我想`www.mydomain.com/pink` 重新路由到特定的 url。我希望它重定向到的 URL 也在数据库中。我查看了很多关于此的问题，似乎找不到任何动态更改 url 路由的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:51:44.037

您可以设置这样的路线：

```
routes.MapRoute(name: "Default",
    url: "{id}",
    defaults: new { controller = "Home", action = "Index" }); 
```

然后在你的控制器中（在我的例子中是 HomeController）：

```
public ActionResult Index(string id)
{
    ContentResult cr = new ContentResult();
    // Do a DB lookup here to get the data you need from the database to generate the appropriate content.
    cr.Content = id;
    return cr;
} 
```

此示例仅返回已发送的字符串。所以现在如果我浏览到`http://localhost/mysite/pink`我会得到“粉红色”作为我的结果。您可以轻松地使用此方法查找自定义数据库以确定要返回的正确内容。

如果您现有的路线不允许您采用此路线:)，那么您始终可以在`RegisterRoutes`方法中执行 SQL 查询并从中填充路由表。

# hadoop - MapReduce 作业跳过/调整大小？

> ID：14370624
> 
> 赞同：1
> 
> 时间：2013-01-17T01:05:13.097
> 
> 标签：hadoop, amazon-web-services, mapreduce, elastic-map-reduce

我正在整个 commoncrawl 语料库上运行一项工作，并在剩余的地图任务中遇到了[这个问题。](http://i.imgur.com/CQt44.png)有谁知道是什么原因造成的？我怀疑它与此[“调整大小完成”](http://i.imgur.com/VGzzm.png)消息有关，但不确定为什么该作业会停止映射，然后像那样备份。谢谢。

# django - Reportlab pdfgen 支持粗体 Truetype 字体

> ID：14370630
> 
> 赞同：6
> 
> 时间：2013-01-17T01:05:56.213
> 
> 标签：django, pdf-generation, truetype, reportlab

我一直在使用 reportlab pdfgen 来创建用于打印的动态 pdf 文档。多年来，它一直运行良好。

我们即将举行筹款活动，并希望使用我们正在使用的“主题”字体（特别是 talldeco.ttf）生成 pdf 收据。

我使用以下方法设置了字体没有问题：

```
 from reportlab.pdfbase import pdfmetrics 
        from reportlab.pdfbase.ttfonts import TTFont 
        ttfFile = "/usr/share/fonts/truetype/ttf-tall-deco/TALLDECO.TTF"
        pdfmetrics.registerFont(TTFont("TallDeco", ttfFile))
        p.setFont("TallDeco", 18) # Was Times-Bold... 
```

现在问题来了：一些文本需要粗体和斜体，而 talldeco 仅带有 1 个文件（与其他一些字体不同）。我可以在 openoffice 中用这种字体加粗和斜体。

根据reportlab用户指南（http://www.reportlab.com/software/opensource/rl-toolkit/guide/）第53页，应该是可能的，它们显示了一些代码和结果，但是我们的软件正在使用drawString调用而不是段落。基于上述示例的测试应用程序：

```
 from reportlab.pdfbase import pdfmetrics 
        from reportlab.pdfbase.ttfonts import TTFont 
        from reportlab.pdfbase.pdfmetrics import registerFontFamily
        ttfFile = "/usr/share/fonts/truetype/ttf-tall-deco/TALLDECO.TTF"
        pdfmetrics.registerFont(TTFont("TallDeco", ttfFile))
        registerFontFamily('TallDeco',normal='TallDeco',bold='TallDeco-Bold',italic='TallDeco-Italic',boldItalic='TallDeco-BoldItalic')
        p.setFont("TallDeco-Bold", 18) # Was Times-Bold... 
```

只是在“TallDeco-Bold”上给出一个关键错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-20T18:45:04.690

TTFont 有一个`subfontIndex`参数。

以下对我有用（在 OS X 上使用 reportlab 3.0）：

```
menlo_path = "/System/Library/Fonts/Menlo.ttc"
pdfmetrics.registerFont(ttfonts.TTFont("Menlo", menlo_path,
                                       subfontIndex=0))
pdfmetrics.registerFont(ttfonts.TTFont("Menlo-Bold", menlo_path,
                                       subfontIndex=1))
pdfmetrics.registerFont(ttfonts.TTFont("Menlo-Italic", menlo_path,
                                       subfontIndex=2))
pdfmetrics.registerFont(ttfonts.TTFont("Menlo-BoldItalic", menlo_path,
                                       subfontIndex=3))
pdfmetrics.registerFontFamily("Menlo", normal="Menlo", bold="Menlo-Bold",
                              italic="Menlo-Italic",
                              boldItalic="Menlo-boldItalic") 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-26T13:35:15.767

需要定义粗体、斜体和粗体斜体字体。

```
pdfmetrics.registerFont(TTFont("TallDeco-Bold", ttfFile))
pdfmetrics.registerFont(TTFont("TallDeco-Italic", ttfFile))
pdfmetrics.registerFont(TTFont("TallDeco-BoldItalic", ttfFile)) 
```

但是因为它们都指向同一个**ttfFile**，所以输出看起来都像默认的 TallDeco，即没有粗体或斜体

# javascript - 对数组元素求和的抽象函数

> ID：14370631
> 
> 赞同：2
> 
> 时间：2013-01-17T01:05:58.177
> 
> 标签：javascript, jquery, arrays

我有 40 个不同的数组，我想找到每个数组的平均值。为了做到这一点，我有这个代码：

```
var SumArray1 = 0;
var avgArray1 = 0;

$.each(array1,function() {
    SumArray1 += this;
    avgArray1 = (SumArray1)/(array1.length);
    }); 
```

但是因为我有这 40 个数组，所以我试图寻找一种方法来使该函数抽象，但我不知道如何使用 $.each 为函数引入参数，而且我认为不会有 40 个函数正确的做法...谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T01:10:19.463

您的实现每次都会计算平均值，但最后一次只能得到正确的值。这是不必要的。

此外，没有必要使用`$.each`，这会迫使您使用额外的闭包（我之前关于等待的陈述是错误的，因为`$.each`是同步的）。

以下更简单：

```
function avgArray(array) {
   var i,l,s = 0;
   for (i=0,l=array.length; i<l; i++) s+= array[i];

   return s/l;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:18:04.790

添加此代码：

```
Array.prototype.average = function() {
    var s = 0;
    for(var i = 0; i < this.length; ++i) {
        s += this[i];
    }
    return s/this.length;
} 
```

然后在任何时候你都可以做类似的事情

```
var myArray = [1,2,3,4];
var calculatedAverage = myArray.average();  // This will equal 2.5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T02:28:15.583

数组有一个内置的 reduce 函数，如果你喜欢短的单行，你也可以这样做：

```
var arr = [1,2,3,4];

function sum(x,y){
    return x + y;
}

var total = arr.reduce(sum); // total -> 10

// This also works
var total = arr.reduce( function(x,y) { return (x + y); } );

var avg = ( total / arr.length ); 
```

Reduce 是一个高阶函数，可将序列“减少”为单个值。

下面是reduce的执行流程。

```
var temp = sum( arr[0], arr[1] );
temp = sum( temp, arr[2] );
temp = sum( temp, arr[3] );
return temp; 
```

窃取 Andrew Shepherd 为数组数据结构添加新函数的答案。

```
Array.prototype.sum = function() { return this.reduce( function(x,y) { return (x+y); } )};
Array.prototype.avg = function() { return (this.sum() / this.length) }; 
```

# iphone - 使用 Xcode 的 All Exceptions 断点时忽略某些异常

> ID：14370632
> 
> 赞同：80
> 
> 时间：2013-01-17T01:06:01.270
> 
> 标签：iphone, ios, xcode

我在 Xcode 中配置了一个 All Exceptions 断点：

![Xcode断点痛中配置的异常断点截图，配置为抛出异常时发出声音](../Images/908cb1223f9fbbace4c3811089aea13e.png)

有时 Xcode 会停在如下一行：

```
[managedObjectContext save:&error]; 
```

具有以下回溯：

![回溯显示 NSPersistentStoreCoordinator 在调用保存时抛出异常：](../Images/3fb9d27b94c600ba31443b148cf8a82a.png)

但是如果您单击继续，程序会继续运行，就好像什么也没发生一样。

**如何忽略这些“正常”异常，但仍然让调试器停止我自己代码中的异常？**

（我知道发生这种情况是因为 Core Data 在内部抛出和捕获异常，并且 Xcode 只是尊重我在抛出异常时暂停程序的请求。但是，我想忽略这些，以便我可以重新调试自己的代码！）

*版主：这类似于[“Xcode 4 异常断点过滤”](https://stackoverflow.com/questions/8109102/xcode-4-exception-breakpoint-filtering)，但我认为这个问题需要很长时间才能解决问题并且没有任何有用的答案。他们可以联系起来吗？*

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-01-17T03:17:28.323

对于核心数据异常，我通常做的是从 Xcode 中删除“所有异常”断点，而是：

1.  添加符号断点`objc_exception_throw`
2.  将断点上的条件设置为`(BOOL)(! (BOOL)[[(NSException *)$x0 className] hasPrefix:@"_NSCoreData"])`

配置的断点应该如下所示： ![配置断点](../Images/b0697f3bc19b5be09ef11de70d209669.png)

`_NSCoreData`这将忽略用于控制流的任何私有 Core Data 异常（由前缀为 的类名确定）。请注意，适当的寄存器将取决于您正在运行的目标设备/模拟器。请查看[此表](http://www.sealiesoftware.com/blog/archive/2013/09/12/objc_explain_So_you_crashed_in_objc_msgSend_iPhone_5s_Edition.html)以供参考。

请注意，这种技术可以很容易地适应其他条件。棘手的部分是制作 BOOL 和 NSException 强制转换以使 lldb 对条件感到满意。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-10-09T02:52:47.813

我编写了一个 lldb 脚本，它可以让您使用更简单的语法选择性地忽略 Objective-C 异常，它可以处理 OS X、iOS 模拟器以及 32 位和 64 位 ARM。

# 安装

1.  把这个脚本`~/Library/lldb/ignore_specified_objc_exceptions.py`放在有用的地方。

```
import lldb
import re
import shlex

# This script allows Xcode to selectively ignore Obj-C exceptions
# based on any selector on the NSException instance

def getRegister(target):
    if target.triple.startswith('x86_64'):
        return "rdi"
    elif target.triple.startswith('i386'):
        return "eax"
    elif target.triple.startswith('arm64'):
        return "x0"
    else:
        return "r0"

def callMethodOnException(frame, register, method):
    return frame.EvaluateExpression("(NSString *)[(NSException *)${0} {1}]".format(register, method)).GetObjectDescription()

def filterException(debugger, user_input, result, unused):
    target = debugger.GetSelectedTarget()
    frame = target.GetProcess().GetSelectedThread().GetFrameAtIndex(0)

    if frame.symbol.name != 'objc_exception_throw':
        # We can't handle anything except objc_exception_throw
        return None

    filters = shlex.split(user_input)

    register = getRegister(target)

    for filter in filters:
        method, regexp_str = filter.split(":", 1)
        value = callMethodOnException(frame, register, method)

        if value is None:
            output = "Unable to grab exception from register {0} with method {1}; skipping...".format(register, method)
            result.PutCString(output)
            result.flush()
            continue

        regexp = re.compile(regexp_str)

        if regexp.match(value):
            output = "Skipping exception because exception's {0} ({1}) matches {2}".format(method, value, regexp_str)
            result.PutCString(output)
            result.flush()

            # If we tell the debugger to continue before this script finishes,
            # Xcode gets into a weird state where it won't refuse to quit LLDB,
            # so we set async so the script terminates and hands control back to Xcode
            debugger.SetAsync(True)
            debugger.HandleCommand("continue")
            return None

    return None

def __lldb_init_module(debugger, unused):
    debugger.HandleCommand('command script add --function ignore_specified_objc_exceptions.filterException ignore_specified_objc_exceptions') 
```

2.  将以下内容添加到`~/.lldbinit`：

    `command script import ~/Library/lldb/ignore_specified_objc_exceptions.py`

    `~/Library/lldb/ignore_specified_objc_exceptions.py`如果您将其保存在其他地方，请替换为正确的路径。

# 用法

*   在 Xcode 中，添加断点以捕获所有**Objective-C**异常
*   编辑断点并使用以下命令添加调试器命令： `ignore_specified_objc_exceptions name:NSAccessibilityException className:NSSomeException`
*   这将忽略`NSException` `-name`匹配`NSAccessibilityException`或`-className`匹配的异常`NSSomeException`

它应该看起来像这样：

![屏幕截图显示了按照说明在 Xcode 中设置的断点](../Images/ad5e31bc9cd7ef4603b4453b0bf1481d.png)

在你的情况下，你会使用`ignore_specified_objc_exceptions className:_NSCoreData`

有关脚本和更多详细信息，请参见[http://chen.do/blog/2013/09/30/selectively-ignoring-objective-c-exceptions-in-xcode/](http://chen.do/blog/2013/09/30/selectively-ignoring-objective-c-exceptions-in-xcode/)。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-12-05T13:35:52.880

当您有一个代码块时，这是一个替代的快速答案，例如，第 3 部分库会引发您想要忽略的多个异常：

1.  设置两个断点，一个在要忽略的异常抛出代码块之前和一个之后。
2.  运行程序，直到它在异常处停止，然后在调试器控制台中键入“断点列表”，并找到“所有异常”断点的编号，它应该如下所示：

> 2：名称= {'objc_exception_throw'，'__cxa_throw'}，位置= 2选项：禁用2.1：其中= libobjc.A.dylib `objc_exception_throw, address = 0x00007fff8f8da6b3, unresolved, hit count = 0 2.2: where = libc++abi.dylib`__cxa_throw，地址= 0x00007fff8d19fab7，未解决，命中计数= 0

3.  这意味着它是断点 2。现在在 xcode 中，编辑第一个断点（在异常抛出代码之前）并将操作更改为“调试器命令”并输入“断点禁用 2”（并设置“自动继续...”复选框）。

4.  对违规行之后的断点执行相同的操作，并使用命令“breakpoint enable 2”。

所有断点异常现在将打开和关闭，因此它仅在您需要时才处于活动状态。

# math - 将 3d 共面点列表排序为顺时针或逆时针

> ID：14370636
> 
> 赞同：12
> 
> 时间：2013-01-17T01:06:34.497
> 
> 标签：math, geometry, linear-algebra

我有一个 3D 点列表。我知道它们都是共面的。我有我想要对它们进行排序的中心以及点和中心所在平面的法线。如何测试一个点是否在另一点的右侧（或左侧）？

我知道如何在 2D 中做到这一点。[按顺时针顺序排序点？](https://stackoverflow.com/questions/6989100/sort-points-in-clockwise-order)解释如何比较二维点。所以我认为我需要以某种方式将所有点和中心转换为局部二维平面坐标。我怎样才能做到这一点？这是解决这个问题的最有效方法吗？

```
//from link:
// a and b are points
//center is the center around which to determine order
//int num = (a.x-center.x) * (b.y-center.y) - (b.x - center.x) * (a.y - center.y);
//if num=0 then they're on the same line
//if num <0 or num>0 then a is to the left or right of b 
```

我将如何调整它以处理 3d 共面点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-17T02:00:38.243

无需将所有内容都转换为 2D。

你有中心**C**和正常的**n**。要确定点**B是从点****A**顺时针还是逆时针，请计算 dot( **n** , cross( **A** - **C** , **B** - **C** ))。如果结果为正，则**B**从**A**逆时针方向；如果它是负数，则**B从****A**顺时针方向。

# vb.net - 有没有办法使用自定义程序集中的数据集来填充 SSRS 数据集？

> ID：14370638
> 
> 赞同：0
> 
> 时间：2013-01-17T01:06:55.450
> 
> 标签：vb.net, reporting-services, rdlc, rdl

我的任务是将一些 RDLC 文件转换为使用已编译的 VB.NET 定义其数据源的 RDL。对于其中一些人来说，将代码转换为 TSQL 很复杂，如果可能的话，最好使用已经开发的程序集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:27:44.567

**通常**无法从**Code Behind**访问 SSRS 报告数据集，您必须为您的报告编写查询。但是有一种**解决**方法。但它可能有一些性能问题..

性能问题（优点）：

1.  当您为报告编写查询时，它们由 ReportServer 处理
2.  当您编写存储过程时，它们由您的数据库服务器处理，以防您的报告服务器和数据库服务器不同

性能问题（缺点）：

1.  当您不想采用上述方式并且在开发 Web 应用程序的情况下，您当然可以利用通过 XML[将数据从后面的代码传递到 SSRS rdl，](https://stackoverflow.com/questions/12744336/binding-data-to-ssrs-rdl-from-code-behind/13416102#13416102)
    缺点是您目前的数据处理是不是由数据库服务器完成，而是由应用程序所在的服务器完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T04:14:24.087

可能最好的选择是为将数据公开为 xml web 服务的程序集创建一个主机，然后在报告中使用 xml 数据源。

# python - 如何从 Python 中的子目录访问模块

> ID：14370639
> 
> 赞同：0
> 
> 时间：2013-01-17T01:07:09.740
> 
> 标签：python, python-module

我有一个像这样的文件夹结构：

```
/mylib/
/mylib/__init__.py
/mylib/my_class.py
/mylib/tests/test_my_lib.py 
```

在我的测试中，我有：

```
from mylib import MyClass
import unittest 
```

我越来越：

```
 File "test_edgecast_mcc_client.py", line 1, in <module>
    from mylib import MyClass
ImportError: No module named mylib 
```

我认为这是有道理的，因为当它应该在 ../mylib 中查找时，导入将在 mylib 的测试目录中查找？

任何人都可以分享一些关于如何让导入正常工作的信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:12:59.817

我相信你的测试包`__init__.py`也需要一个文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:16:02.777

将主目录添加到`$PYTHONPATH`. 你可以`test_my_lib.py`通过使用这样的东西来做到这一点：

```
import sys
import os.path

d = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))

sys.path.insert(0, d) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T01:50:02.213

尝试从命令行使用它，看看是否消除了错误

`export PYTHONPATH="$PYTHONPATH:/path/to/mylib/"`

# asp.net - 如何在 Razor 中为强类型视图设置模型

> ID：14370640
> 
> 赞同：19
> 
> 时间：2013-01-17T01:07:18.467
> 
> 标签：asp.net, razor, strongly-typed-view

我正在尝试将我的模型传递给我在 Razor 中的视图。使用旧方法，我可以在文件（模型）的顶部定义它。

我做了一些谷歌搜索，并认为我想通了 - 似乎没有工作。我对模型没有任何智能感知。

**查看文件的顶部：**

```
@Model CodySolution.Models.PhotoModel
@{
    ViewBag.Title = "Photography";
    Layout = "~/Views/Shared/_master.cshtml";
} 
```

**我在哪里使用模型：**

```
<ul class="nav nav-pills nav-stacked margin-top">
    @foreach (var cat in Model.Categories)
    {
        <li class="active"><a href="#">@cat</a></li>
    }
</ul> 
```

这是定义它的正确方法吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-17T01:08:50.843

`@Model`打印`Model`属性的值。

要声明模型类型，请使用该`@model`指令。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-11-08T16:11:55.513

如果有人正在寻找确切的语法，这里是：

```
@model CodySolution.Models.PhotoModel
@{
    ViewBag.Title = "Photography";
    Layout = "~/Views/Shared/_master.cshtml";
} 
```

注意小写`@model`，因为大写打印`Model`属性的值。

# c# - 在 LINQPad 中刷新 DataContext

> ID：14370643
> 
> 赞同：4
> 
> 时间：2013-01-17T01:07:30.317
> 
> 标签：c#, .net, linq-to-sql, datacontext, linqpad

嗨，我正在努力使用 LINQPad 处理以下情况

```
While(1 = 1) 
{ 

    MyEntity _me = MyEntities.FirstOrDefault(); 

    foreach(ChildEntity ce in MyEntity.ChildEntities) 
    { 
            Console.WriteLine(ce.Value); 
    } 

    System.Threading.Thread.Sleep(100000); 
} 
```

其中 MyEntity（和 ChildEntities 集合）是自动创建的 LINQ to SQL 类。底层数据库中的行可能会独立于这个脚本而改变，我希望 ChildEntities 集合在 While 循环的每次迭代中从数据库中刷新。目前没有。

这不起作用

```
this.Refresh(RefreshMode.OverwriteCurrentValues, _me); 
```

也不

```
this.Refresh(RefreshMode.OverwriteCurrentValues, _me.ChildEntities); 
```

无论如何我可以关闭并重新打开 LINQPad DataContext（我是高级订阅者）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:56:55.070

这看起来像 LINQ-to-SQL 中的错误。

您可以通过显式实例化 LINQPad DataContext 来重新初始化它：

```
while(1 = 1) 
{     
    var freshDC = new TypedDataContext();
    var me = freshDC.MyEntities.FirstOrDefault(); 
    ...
} 
```

# perl - 使用模块时如何处理

> ID：14370654
> 
> 赞同：-4
> 
> 时间：2013-01-17T01:08:52.777
> 
> 标签：perl, perl-module

我有一个模块，比如A.pm，在这个A.pm中，它会读写一个特定的conf文件，比如A.conf。现在在我的 perl 脚本文件：1_perl.pl 中，我使用 A.pm 重置 A.conf 文件中的某个值，并使用 A.pm 将此值写入 2_perl.pl。所以我的问题是如何在后台处理这个过程？它将产生 2 个 A.pm 实例来处理这个或仅一个实例？

请提供更多详细信息，提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:12:45.813

Perl 模块只是可加载的函数和数据块——模块不是进程，所以你的问题没有真正的意义。

如果您希望您的模块创建一个后台进程来写出配置文件，那当然是可行的，但您必须自己实现它。决定如何管理这些流程取决于您。

# google-fusion-tables - Google Fusion Tables 受保护的地图图层解释？

> ID：14370656
> 
> 赞同：0
> 
> 时间：2013-01-17T01:09:01.677
> 
> 标签：google-fusion-tables

我通过 FusionTablesLayer 方法在 Google Maps API 中使用 Google Fusion 表。问题是表格必须不公开或公开才能显示在 Google Maps API 中。有什么方法可以使表私有并仍然使用它？

我已经阅读了有关 OAuth 和受保护地图图层的所有谷歌信息，但并没有真正想到使用 OAuth。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:03:09.103

是的，有一种方法可以在 Maps API 层上显示私有表格，但是您需要注册一个 Google Maps API for Business 帐户。更多信息在这里[http://support.google.com/fusiontables/answer/2459324?hl=en](http://support.google.com/fusiontables/answer/2459324?hl=en)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:38:18.510

为了补充 javram 的回答：您不需要将 OAuth 用于具有 Fusion Tables Layer 的受保护地图层。

您可以选择使用 OAuth 从 Fusion Table 中安全地检索数据，然后使用 Google Maps API 的其他部分将您的数据映射到客户端。

请注意，如果您需要将数据保密，Fusion Tables 可能不适合您；您可能希望与 Google Maps for Business 团队讨论更适合商业用途的其他解决方案。 [http://www.google.com/enterprise/earthmaps/maps.html](http://www.google.com/enterprise/earthmaps/maps.html)

-丽贝卡

# php - 使用 PHP 进行 Chargify 托管页面 URL 集成

> ID：14370658
> 
> 赞同：0
> 
> 时间：2013-01-17T01:09:16.090
> 
> 标签：php, integration, chargify

对于那些熟悉使用 Chargify 和 PHP 的人，我正在尝试执行应该是一个简单的请求。我使用 Code Igniter 创建了一个购物车，现在我正在尝试在其托管页面 URL 上传递名字、姓氏、电子邮件和整体总计 - 但我一直收到错误消息，提示找不到页面。这是我到目前为止得到的：

```
<?
$site_shared_key = 'h8X9-jj2doSwOX4l__Zb';
$token = SHA1($site_shared_key);
?>
<form name="chargifySignupForm" method="get" action="https://leavereview-chargify-test.chargify.com/update_payment/2989648/<?=$token;?>">
First Name
<input type="text" name="firstname" value="<?=$firstname;?>" readonly>
Last Name
<input type="text" name="lastname" value="<?=$lastname;?>" readonly>
Email
<input type="text" name="email" value="<?=$email;?>" readonly>
<?
$overall_total = $profile_rate + $locations_rate_total;
?>
Your Overall Total (To be paid on Chargify)
<input type="text" name="overall_total" value="<?=$overall_total;?>" readonly>
<input type="submit" value="Pay Now to Chargify" />
</form> 
```

我认为问题出在 $token 部分，希望有人能给我一个提示，告诉我如何解决它。文档 (http://docs.chargify.com/hosted-page-integration#hosted-page-urls) 不需要 API 密钥，所以我不确定是否仍然需要它来使我的脚本工作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:50:40.177

根据 chargify 文档，您不能提交到 chargify 托管页面，您只需将其超链接到该页面，您还可以使托管页面的外观与您的网站相匹配。

以下是托管页面[托管页面集成上的文档](http://docs.chargify.com/hosted-page-integration)

如果你真的想让它解耦，那么放弃这个托管页面的想法并尝试使用 API，无论你通过托管页面实现什么，你也可以通过 API 实现同样的事情。

以下是 chargify 的文档链接

[API 集成说明](http://docs.chargify.com/api-integration)

您还可以在此处获取示例代码[示例代码](http://docs.chargify.com/api-code)

在满足您要求的示例代码列表中，您可以使用[ChargeIgniter - Chargify API For CodeIgniter](http://chargeigniter.com/)。这真的很适合用作起点。

希望这可以帮助

# javascript - 在优化 (r.js) 中使用 crossroads.js 时出错，需要设置

> ID：14370667
> 
> 赞同：1
> 
> 时间：2013-01-17T01:10:38.557
> 
> 标签：javascript, requirejs, amd, r.js, crossroadsjs

我使用[**RequireJS**](http://requirejs.org)开发了一个应用程序，没有优化层 - 需要单独下载每个文件。这是外部标记：

```
<!DOCTYPE html>
<html lang="en">
  <head>
     <script type="text/javascript">
       var require = {
         //some basic config
       };
     </script>
  </head>
  <body>
     <!--snip-->
  </body>
  <script type="text/javascript" data-main="main" src="scripts/lib/require.min.js"></script>
</html> 
```

这个功能没有任何问题，但是对于 100 多个文件，加载时间真的很长。所以，是时候介绍[r.js 优化](https://github.com/jrburke/r.js)了！我使用 node 和 r.js 创建一个组合文件，然后更改`data-main="main"`为`data-main="_build/main"`.

我收到以下错误：

> 错误：不匹配的匿名 define() 模块：（crossroads.js 的整个主体）

想法：

*   没有[手动/带外定义（）调用或匿名模块](http://requirejs.org/docs/errors.html#mismatch)。一切都通过优化器进入这个文件。
*   这甚至不是我们的文件——它是[crossroads.min.js](http://millermedeiros.github.com/crossroads.js/)，当不涉及优化器时，Require 能够很好地处理它。

我仍在挖掘，但希望有人可以在这里为我节省一些时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:25:03.903

**TL;博士;** 使用未缩小版本的 crossroads.js，因为您正在构建 r.js，它已经压缩了源文件。

crossroads 使用未命名的定义，并被包装到自定义[UMD](https://github.com/umdjs/umd/)（通用模块定义）中。由于 r.js 无法添加正确的模块名称，因此缩小版本将无法正常工作。

缩小前：

```
(function(define){define(["signals"], ... 
```

缩小后：

```
(function(a){a(["signals"], ... 
```

r.js 不知道是什么`a`意思，它只寻找`define`调用。

# mysql - 哪些字符实际上能够导致 MySQL 中的 SQL 注入？

> ID：14370670
> 
> 赞同：32
> 
> 时间：2013-01-17T01:10:46.730
> 
> 标签：mysql, security, escaping, sql-injection

我们都知道我们应该使用准备好的语句或适当的替换/格式化规则来防止我们的应用程序中的 sql 注入。

但是，在查看 MySQL 的字符文字列表时，我注意到它包含以下字符：

*   `\0` 一个 ASCII NUL ( `0x00`) 字符。
*   `\'` 单引号 ( `'`) 字符。
*   `\"` 双引号 ( `"`) 字符。
*   `\b` 退格字符。
*   `\n` 换行符（换行符）。
*   `\r` 一个回车符。
*   `\t` 制表符。
*   `\Z` ASCII 26 ( `Ctrl`+ `Z`)。见表格后面的注释。
*   `\\` 反斜杠 ( `\`) 字符。
*   `\%` 一个`%`字符。
*   `\_` 一个`_`字符。

现在，`%`and`_`字符需要转义以防止将不需要的通配符注入 LIKE 语句，而`'`（单引号）、`\`（反斜杠）和`"`（双引号）都需要转义以防止注入任意 SQL - 这些其他字符中的任何一个未转义是否会直接导致 SQL 注入漏洞，否则该漏洞不会出现？有没有人有这种利用的现实世界的例子？

假设我们正在构建我们的查询，例如：

```
SELECT * FROM users WHERE username='$user' 
```

**`$user`对于唯一未转义的字符文字是`\b`（退格）、`\0`（NUL）、`\n`（换行）、`\r`（换行）、`\t`（制表符）或`\Z`（`Ctrl`+ ），是否有任何值`Z`允许将任意 SQL 注入此查询？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T05:37:14.467

2020年的强制性附录：

## 处理角色被证明是低效且过时的

您必须使用准备好的语句，忘记转义、“危险人物”或任何此类事务。

**由于以下原始答案中提供的原因，**使用参数化查询被认为是防止 SQL 注入的唯一正确方法：****

 **> 哪些字符实际上能够导致mysql中的SQL注入

## 没有这样的字符。

导致 SQL 注入的不是“字符”。但格式不正确。**任何角色**，视情况而定，可能是“危险的”或绝对无害的。将保护限制在某个子集是一种危险的错觉，实际上迟早会导致 SQL 注入。

您的问题中有两个错误的陈述导致您感到困惑：

> 1.  我们都知道我们应该使用......适当的替换规则，以防止我们的应用程序中的sql注入。

这种说法是错误的。不是替换而是*格式化*。区别是必不可少的。单独替换**并不能防止注入**，而格式化可以。请注意，查询的每个不同部分都需要**不同**的格式，这对任何其他部分都是无用的。比如说，还有另一个字符，对于注入保护至关重要 - 反引号 (`)。但是您没有列出它，因为它与字符串文字无关。

> 2.  '（单引号）、\（反斜杠）和 "（双引号）都需要转义以防止注入

这是一个严重错误的说法。**逃逸并不妨碍注射。**这些字符需要转义才能**格式化字符串**，并且与注入完全无关。虽然正确格式化的查询部分确实是无懈可击的。但事实是 - 你必须格式化动态查询部分只是为了它，遵循语法规则，而不是因为任何注入。而且您的查询会像副作用一样难以理解。

现在你可以看到为什么你的最后一句话，

> 为什么所有这些其他字符都容易被 mysql_real_escape_string 转义，因为这对我来说并不是很明显。

错误地提出：
字符串**格式规则**需要这些字符，而不是任何“漏洞”。其中一些只是为了方便而被转义，一些是为了可读性，一些是为了转义分隔符的明显原因。就这样。

要回答评论中的最新问题：

> 我真的想要一个答案，因为 PHP 的 mysql_real_escape_string 也没有引用这些文字。

再说一遍：尽管在普通 PHP 用户的心目中，`mysql_real_escape_string()`无论什么吓人的注入都与此密切相关，**但实际上并非如此。**没有“危险”角色。一个都没有。有一些具有特殊含义的服务字符。在某些情况下，它们必须被转义，这取决于上下文。

因此，此函数转义的字符与任何“危险”之间没有任何联系。当您开始认为`mysql_real_escape_string()`' 的目的是逃避“危险”角色时，您确实将自己置于危险之中。虽然只要您使用此函数只是为了转义字符串（并且无条件地这样做） - 您可能会认为自己是安全的（当然，如果您也不要忘记格式化*所有其他文字*，使用它们各自的格式化规则）

> 我想知道“%”字符是否会导致 LIKE 子句中的额外结果。

不。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-26T12:38:28.493

考虑[mysql_real_escape_string()](http://dev.mysql.com/doc/refman/5.7/en/mysql-real-escape-string.html)手册中的以下几行：

> MySQL 只要求对查询中用于引用字符串的反斜杠和引号字符进行转义。[mysql_real_escape_string()](http://dev.mysql.com/doc/refman/5.7/en/mysql-real-escape-string.html)引用其他字符以使它们更容易在日志文件中阅读。

MySQL 中的 SQL 注入不应该单独使用这些特殊字符：`\b` `\0` `\n` `\r` `\t` `\Z`。

然而，字符串文字手册指出以下但指定（或不指定）的原因与 SQL 注入无关：

> 如果要将二进制数据插入字符串列（例如[BLOB](http://dev.mysql.com/doc/refman/5.7/en/blob.html)列），则应使用转义序列表示某些字符。反斜杠 (“\”) 和用于引用字符串的引号字符必须进行转义。在某些客户端环境中，可能还需要转义 NUL 或 Control+Z。如果未转义， [mysql](http://dev.mysql.com/doc/refman/5.7/en/mysql.html)客户端会截断包含 NUL 字符的引用字符串，如果未转义，则可能会在 Windows 上将 Control+Z 用于 END-OF-FILE。

此外，在一个简单的测试中，无论天气如何，上面列出的特殊字符是否被转义，MySQL 都产生了相同的结果。换句话说，MySQL 甚至不介意：

```
$query_sql = "SELECT * FROM `user` WHERE user = '$user'"; 
```

上面的查询对于上面列出的字符的非转义和转义版本的工作类似，如下所示：

```
$user = chr(8);     // Back Space
$user = chr(0);     // Null char
$user = chr(13);    // Carriage Return
$user = chr(9);     // Horizontal Tab
$user = chr(26);    // Substitute
$user = chr(92) .chr(8);    // Escaped Back Space
$user = chr(92) .chr(0);    // Escaped Null char
$user = chr(92) .chr(13);   // Escaped Carriage Return
$user = chr(92) .chr(9);    // Escaped Horizontal Tab
$user = chr(92) .chr(26);   // Escaped Substitute 
```

简单测试中使用的测试表和数据：

```
-- Table Structure

CREATE TABLE IF NOT EXISTS `user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user` varchar(10) CHARACTER SET utf8 NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8;

-- Table Data

INSERT INTO `user` ( `user` ) VALUES
( char( '8' ) ),
( char( '0' ) ),
( char( '10' ) ),
( char( '13' ) ),
( char( '9' ) ),
( char( '26' ) ); 
```**

# javascript - 如何在字符串中键入素数 ( ' ) 符号？

> ID：14370673
> 
> 赞同：1
> 
> 时间：2013-01-17T01:11:06.267
> 
> 标签：javascript

将 25' 显示为输出描述的正确语法是什么？

**例子：**

```
var sizeData = [            
    {description:'Recommended sizes listed below', value:'', text:'Select Size'},                   
    {description:'Boat < 25 &prime;, value:'size0', text:'Size 0'},
    {description:'25-35 Foot Boat', value:'size2', text:'Size 2'},
    {description:'40-45 Foot Boat', value:'size3', text:'Size 3'},
]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:15:29.423

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:14:21.830

像这样：

```
foo: '25′' 
```

请注意，[主要字符](http://www.fileformat.info/info/unicode/char/2032/index.htm)和[撇号字符](http://www.fileformat.info/info/unicode/char/27/index.htm)是两个不同的 Unicode 字符。您可以正常地将素数字符放在单引号封装的字符串中。

顺便说一句，在主要字符上方以等宽字体打印。这是它在无衬线字体中的样子：

25′、25′′</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T01:14:58.233

var sizeData = [
{description:\'推荐尺寸如下表\', value:\'\', text:\'Select Size\'},
{description:\'Boat < 25 ′, value:\'size0\' , text:\'大小 0\'} ];

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T01:15:40.013

You can enclose a (') using a "". Basically like this " ' ".

# python - 在 python 中使用 cv2 模块查看像二进制图像一样的图像（循环）

> ID：14370677
> 
> 赞同：1
> 
> 时间：2013-01-17T01:11:32.897
> 
> 标签：python, opencv, python-2.7

我再次尝试更好地解决我的问题（http://stackoverflow.com/questions/14349550/convert-image-in-a-binary-image-with-cv2-module-in-python）

在这段代码中（与第一个代码略有不同），我可以轻松地处理转换后的二进制图像、提取轮廓、计算区域……但无法再次执行此代码行：`cv2.imshow('gray_image',imgray)`.

它向我展示了一个完全灰色的窗口，仅此而已。我必须退出 python，因为进入循环。

```
imgray = cv2.cvtColor(im,cv2.COLOR_BGR2GRAY)
ret,thresh = cv2.threshold(imgray,127,255,0) 
contours, hierarchy = cv2.findContours(thresh, cv2.RETR_TREE,cv2.CHAIN_APPROX_SIMPLE)
print('oggetti trovati')
print(len(contours))
cnt = contours[0]
print(len(cnt))
cv2.imshow('gray_image',imgray) 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T06:00:37.663

这里需要在`cv2.waitKey()`后面加上`cv2.imshow('gray_image',imgray)`。此函数用于处理任何窗口事件，例如在 OpenCV 中创建或显示图像。

# javascript - jQuery.getJSON().error() 没有在 404 错误上执行

> ID：14370678
> 
> 赞同：5
> 
> 时间：2013-01-17T01:11:39.217
> 
> 标签：javascript, jquery

这是我的代码的简要概述：

```
$.getJSON(json_url, function(data) {
    // application logic
}).error(function() {
    console.log("error");
}); 
```

问题是，当服务器返回 404 错误时，它似乎没有被处理，因为没有`console.log()`说错误，但是有一个 GET 请求失败，`404 (Not Found)`并在控制台中显示代码。

我正在使用 jQuery 1.9.0。

我犯了一些简单的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:56:25.063

由于 JSONP 请求的性质，不会为这些请求调用错误回调。

从[文档](http://api.jquery.com/jQuery.ajax/)：

> 当从远程服务器检索数据时（只能使用`script`or`jsonp`数据类型），永远不会触发错误回调和全局事件。

# r - 防止 R 文档中的行溢出？

> ID：14370679
> 
> 赞同：10
> 
> 时间：2013-01-17T01:11:39.480
> 
> 标签：r, documentation, roxygen2

这比问题更令人烦恼，但是有没有办法防止在 R 中的文档被编译并且行太长时发生行“溢出”？

使用以下创建的一些文档的片段`R CMD Rd2pdf [options] files`： ![一段文档的文本超出文档边距（灰色条显示 pdf 文档的宽度）](../Images/46ab4f60d5901a3f4d800bd765552b9b.png)

我在任何地方都找不到提到这一点，Rd2pdf 的唯一选择是：

```
Options:
  -h, --help        print short help message and exit
  -v, --version     print version info and exit
      --batch       no interaction
      --no-clean    do not remove created temporary files
      --no-preview  do not preview generated PDF file
      --encoding=enc    use 'enc' as the default input encoding
      --outputEncoding=outenc
                        use 'outenc' as the default output encoding
      --os=NAME     use OS subdir 'NAME' (unix or windows)
      --OS=NAME     the same as '--os'
  -o, --output=FILE write output to FILE
      --force       overwrite output file if it exists
      --title=NAME  use NAME as the title of the document
      --no-index    don't index output
      --no-description  don't typeset the description of a package
      --internals   typeset 'internal' documentation (usually skipped) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:13:11.810

抱歉剧透：一种解决方案是*在 extremis中***不**使用 roxygen2进行包维护。为什么不手动维护您的说明？你不需要很多改变，它看起来好多了......

 *绝大多数包裹确实不需要“整理”。为什么不遵循许多生物导体包“Matrix”等的传统，将 S4 类定义（包括参考类）放在文件“AllClasses.R”中，也可以使用“AllGenerics.R”，其余的，整理顺序应该无关紧要。*

# php - MySql 获取数组操作

> ID：14370682
> 
> 赞同：1
> 
> 时间：2013-01-17T01:12:01.853
> 
> 标签：php, mysql, row

好的..我知道如何从 MySql 表中获取数据记录...我想更改该记录中的数据并更新表。

我的问题是......你真的可以操纵结果行中的数据，然后在更新语句中使用这些数据吗？

例如。

假设表格行有 2 个字段：`Name`, `YearlyEarn`.

每月一次，我想将该月的收入添加到每个人的 YearlyEarn 字段中。

假设我们已经为名字在`$CurrentName`. 然后我们得到他们的记录。

```
$DataRow = mysql_fetch_array($result): 
```

你能做这个吗：

```
$DataRow["YearlyEarn"] = $DataRow["YearlyEarn"] + $MonthEarn;

$query = "UPDATE EarnTable SET YearlyEarn = '$DataRow["YearlyEarn"]'    
`WHERE Name = '$CurrentName'" ;

$UpdResult = mysql_query($query) or die(mysql_error()); 
```

或者......我应该将数据放入中间字段，对其进行操作......然后在更新语句中使用这些字段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:43:24.673

是的你可以：

```
UPDATE EarnTable
SET    YearlyEarn = YearlyEarn + 123
WHERE  Name = 'abc' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:26:00.593

您应该使用准备好的语句，例如[PDO](http://php.net/manual/en/book.pdo.php)。mysql_* 已过时。但如果不这样做，您应该考虑从以下位置更改您的查询：

```
$query = "UPDATE EarnTable SET YearlyEarn = '$DataRow["YearlyEarn"]'`WHERE Name = '$CurrentName'" ; 
```

至：

```
$query = "UPDATE EarnTable SET YearlyEarn = `" . $DataRow['YearlyEarn'] . "` WHERE Name = `$CurrentName`" ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T02:11:11.707

您可以使用：

```
$query = "UPDATE EarnTable SET YearlyEarn = '$DataRow[YearlyEarn]' WHERE Name = '$CurrentName'" ; 
```

当您插入数组引用时，会自动引用该键。

或者：

```
$query = "UPDATE EarnTable SET YearlyEarn = '{$DataRow["YearlyEarn"]}' WHERE Name = '$CurrentName'" ; 
```

在里面`{...}`，你可以放置任何变量表达式，它将被评估和插值。

# jquery - 如何计算有多少输入收集此功能？

> ID：14370683
> 
> 赞同：0
> 
> 时间：2013-01-17T01:12:03.770
> 
> 标签：jquery

如何计算有多少输入收集此功能，如果不是 4，则显示带有一些信息的警报？

```
 $('#dialog').on('show', function () {
        $('form#form_save_account input:visible').each(function(idx, $input) {
            $('#dialog .bank-data .' +  $input.name + ' .value').text($input.value);
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:16:53.753

So if you want to check how many elements are found by your selector expression, You could use the `length` property, which is defined on jQuery objects:

```
$('#dialog').on('show', function () {
    var inputs = $('form#form_save_account input:visible');

    if (inputs.length != 4) {
        // Handle error
    }

    // Further work
} 
```

If you also want to make sure that each `input` element has a non-empty value, you could filter the `inputs` variable before checking the length:

```
inputs = inputs.filter(function(i, input) { 
    return $(input).val().trim() != ""; 
}); 
```

You might also want to have a look at the jQuery form validation plugin, as it can automate such tasks:

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

**Edit:** Modified as I misunderstood your question in the beginning. Also added some more information.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T01:16:42.480

```
var index = 0 
$('#dialog').on('show', function () {
    $('form#form_save_account input:visible').each(function(idx, $input) {
        index += 1;
    });
    if (index !== 4) { // do alert }
}); 
```

# ruby-on-rails-3 - 奇怪的未定义方法'all'和collection_select错误

> ID：14370684
> 
> 赞同：0
> 
> 时间：2013-01-17T01:12:12.380
> 
> 标签：ruby-on-rails-3, nested-attributes

我有一个这样的表格（简化了，但你明白了）：

```
<%= form_for(@brand, :html => { :class => "form-horizontal" }) do |f| %>
  <%= f.fields_for :prices do |price| %>
    <%= price.collection_select(:price, :template_id, Template.all, :id, :name) %>
  <% end %>
  <%= f.submit "Save", :class => 'btn btn-primary' %>
<% end %> 
```

渲染时给我这个错误

```
undefined method `all' for ActionView::Template:Class 
```

上`collection_select`线。

`Template.all`从控制器和控制台工作。如果我在该行中编写`@templates = Template.all`并使用，则会收到此错误：`@templates``collection_select`

```
undefined method `merge' for :name:Symbol 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T05:25:21.957

您可以通过在前面加上两个冒号来做到这一点。例如，

```
<%= price.collection_select(:price, :template_id, ::Template.all, :id, :name) %> 
```

但我相信，您应该避免使用**模板**作为模型名称，因为它是 rails [Action View Template](http://api.rubyonrails.org/classes/ActionView/Template.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:40:18.910

解决了。这非常简单。

```
<%= price.collection_select(:template_id, @templates, :id, :name) %> 
```

复制。呃。

# python - 对现有作业流运行引导操作

> ID：14370685
> 
> 赞同：1
> 
> 时间：2013-01-17T01:12:24.250
> 
> 标签：python, hadoop, bootstrapping, elastic-map-reduce

我有一个带有 keep-alive 集的工作流程，我想在其上运行几个引导操作。一个这样的操作是构建和安装 Python 3.3 的脚本。

但是，`elastic-mapreduce`CLI 仅允许在创建作业流期间运行引导操作。

有没有办法在环境创建后修改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:47:31.150

不，不幸的是，引导操作只能在 Hadoop 启动之前和节点开始处理数据之前运行，如[引导操作文档中所述](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/Bootstrap.html)。

亚马逊对新功能非常开放，所以如果你有一个可靠的用例，我建议你把它贴在他们的论坛上，他们可能会把它变成一个功能:)

# unix - SSH 隧道深度

> ID：14370686
> 
> 赞同：1
> 
> 时间：2013-01-17T01:12:36.013
> 
> 标签：unix, ssh

我知道您可以通过 SSH 执行如下操作：

```
ssh remote@dyndns.org 'your actions' 
```

但我想知道，如果您在远程连接的另一端与其他本地计算机有一个网络，您是否可以`ssh`对这些计算机执行操作并执行操作。会不会是这样：

```
ssh remote@dyndns.org 'ssh computer_local 'your actions'' 
```

这可能吗？如果是这样，你能走多深，你能连接到内部网络并走三深吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T01:17:11.470

是的，我已经做到了。真的没有限制。您不需要在命令中使用引号。例如：

```
 ssh user1@host1 ssh user2@host2 ssh user3@host3 env 
```

但是，为了完成这项工作，您需要在整个链中进行无密码登录。

# git - 如何使用 git 签出功能？

> ID：14370693
> 
> 赞同：7
> 
> 时间：2013-01-17T01:13:35.717
> 
> 标签：git, gitlab

几周前我用 git 创建了一个特性，并做了一些工作，不得不停下来。现在我想再次开始工作，但每次我`git branch -a`用来获取可用分支的名称时，我都可以看到它

```
remotes/origin/feature/upgrade-free-premium 
```

但是当我运行时`git checkout upgrade-free-premium`出现以下错误。

```
error: pathspec 'upgrade-free-premium' did not match any file(s) known to git. 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T01:36:53.730

Try this:

```
git checkout -b upgrade-free-premium origin/feature/upgrade-free-premium 
```

In your case, the branch is a remote one. You need to specify from which branch you want to checkout: so the correct branch name is `origin/feature/upgrade-free-premium`. This, because other origins can have the same branch name, so you need to specify the full name.

The `-b` is necessary to create a local branch to track the remote branch.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T01:26:42.537

您的分支被命名`feature/upgrade-free-premium`（'/' 可以是分支名称的一部分）。

`git checkout feature/upgrade-free-premium`改为运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-27T09:57:50.363

我假设您的功能分支来自开发 1\. git checkout develop 2\. git pull 3\. git checkout 4\. git pull

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-16T23:47:01.323

我有同样的问题，我先做`git pull`然后解决它`git checkout <feature>`:)

# mercurial - 汞根据状态选择文件？

> ID：14370694
> 
> 赞同：2
> 
> 时间：2013-01-17T01:13:39.273
> 
> 标签：mercurial, diff, fileset

有没有办法只选择那些具有修改状态的文件？
是否可以链接选择以添加更具体的选择器？

我想导出那些**修改后**的文件中的更改，在安装插件之前恢复到更改集，然后重新导入更改。

带有模式匹配的 hg diff -I 可能会有所帮助，但在这种情况下，而且很多时候，我只想根据文件的状态来选择文件。

hg st 示例（实际内容因文件夹和文件名/扩展名不同而异）：

```
M /readme.txt
M /dir1/somefile1.txt
M /dir2/somefile2.txt
M /dir3/somefile3.txt
M /dir4/somefile4.txt
! /plugin/lotsoffileshere.txt
! /plugin/lotsoffileshere.txt
! /plugin/lotsoffileshere.txt 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T01:29:05.843

阅读 mercurial 中的文件集：`hg help filesets`

如果你想获得所有修改文件的差异（`hg diff FILE1 FILE2 ... FILE`），为“repo中的修改文件”构建文件将是（仅使用帮助）

`hg diff "set:modified()"`

# javascript - SpiderMonkey 和 Unicode 转义：意外行为

> ID：14370695
> 
> 赞同：1
> 
> 时间：2013-01-17T01:13:43.610
> 
> 标签：javascript, unicode, spidermonkey

SpiderMonkey 是否正确处理 Unicode 转义？当我尝试使用 SpiderMonkey 将带有 unicode 转义符的字符串打印到标准输出时，它会处理它们。V8 和 Node.JS 按预期显示输出。

这是蜘蛛猴：

```
$ js
js> this.print("\u201cquotes\u201d")
quotes 
```

这比看起来更糟糕，因为输出包含无效的 UTF-8 二进制数据。

这是 V8，它显示了引号：

```
$ v8
V8 version 3.7.0 [sample shell]
> this.print("\u201cquotes\u201d")
“quotes” 
```

这是 Node.JS，它也显示了引号：

```
$ node
> console.log("\u201cquotes\u201d")
“quotes” 
```

*编辑*：我在 Mac OS X 10.8.2 (Mountain Lion) 上运行。

```
$ echo $LANG
en_US.UTF-8

$ js --version
JavaScript-C 1.8.5 2011-03-31

$ brew info spidermonkey
spidermonkey: stable 1.8.5, HEAD
https://developer.mozilla.org/en/SpiderMonkey
Depends on: readline, nspr
/usr/local/Cellar/spidermonkey/1.8.5 (101 files, 12M) *
https://github.com/mxcl/homebrew/commits/master/Library/Formula/spidermonkey.rb
==> Caveats
This formula installs Spidermonkey 1.8.5.
If you are trying to compile MongoDB from scratch, you will need 1.7.x instead. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T05:19:52.530

您正在运行哪个版本？在我的机器上查看 mozilla-central 看起来不错。

```
mozilla-central/js/dbg$ echo $LANG 
en_US.UTF-8
mozilla-central/js/dbg$ ./js -e 'this.print("\u201cquotes\u201d")'
“quotes”
mozilla-central/js/dbg$ hg log -l1 | head -n1
changeset:   119130:8cc32d6fa707 
```

# java - 无法使用 javascript 和 jQuery 设置 Http 请求标头的“升级”字段

> ID：14370696
> 
> 赞同：0
> 
> 时间：2013-01-17T01:14:15.370
> 
> 标签：java, javascript, jakarta-ee

在http请求头中，有一个名为“Upgrade”的字段，允许设置http协议升级。就像 WebSocket 握手的第一步是向服务器发送一个带有“升级”字段的 HTTP 请求。

我尝试了几种方法来设置 Http 请求标头中的“升级”字段：

1：

```
$.ajax({
    url: "/Http-Header-Test/ServerTest",
    type: "POST",
    beforeSend: function (xhr)
    {
        xhr.setRequestHeader("Upgrade", "Dummy Protocol");
    },
    success: function () {alert("Ajax call success")},
    error: function (error) { alert("Ajax call failed: "+ error.status + ": " + error.responseText)}
}); 
```

2：

```
$.ajax({
    url: "/Http-Header-Test/ServerTest",
    type: "POST",
    headers: {"Upgrade" : "Dummy Protocol" 
             },
    success: function () {alert("Ajax call success")},
    error: function (error) { alert("Ajax call failed: "+ error.status + ": " + error.responseText)}
}); 
```

3：

```
var client = new XMLHttpRequest();
client.open("POST", "/Http-Header-Test/ServerTest", false);
client.setRequestHeader("Accept", "TEST");
client.setRequestHeader("Upgrade", "Dummy Protocol");
client.send(null); 
```

他们都不能修改 Http 请求标头中的“升级”字段。一件有趣的事情是可以设置“接受”字段。任何人都可以给我一些帮助吗？

# actionscript-3 - Haxe 中的功能访问受限？

> ID：14370698
> 
> 赞同：0
> 
> 时间：2013-01-17T01:14:36.927
> 
> 标签：actionscript-3, game-engine, haxe

我最近开始玩 Haxe，在使用 AS3 一段时间后，在编写一个非常简单的游戏引擎时遇到了问题：

我有一堂课叫`World`. 其中一件事`World`就是跟踪`Entity`游戏中的所有对象。我希望这个`Entity`对象列表只能从引擎内部访问。引擎的用户应该不能直接修改列表。

在 AS3 中，我可以简单地使用`internal`关键字来访问同一包中的其他类。当这还不够时，我可以定义一个自定义命名空间并将其用作我的访问修饰符。但 Haxe 似乎没有这两个。

TL;DR：如何限制对特定包/命名空间的变量访问？如果不可能，我还有什么其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:27:10.900

如果您使用的是 Haxe 2.11（每晚构建），则可以使用`@:allow`.

从[Haxe.org 维基](http://haxe.org/manual/tips_and_tricks)复制：

> @:allow(my.pack) ：这将为包 my.pack （及其子包）中的所有类提供对类的所有私有字段的访问权限。有关详细信息，请参阅访问控制。（自 2.11 起）

[有关访问控制](http://haxe.org/manual/acl)的更详细文档。

# php - 从 PHP 中的表单中获取值

> ID：14370701
> 
> 赞同：0
> 
> 时间：2013-01-17T01:14:45.900
> 
> 标签：php, forms, variables, get, call

> **可能重复：**
> [PHP 中的 GET URL 参数](https://stackoverflow.com/questions/5884807/get-url-parameter-in-php)

（请注意，我对 PHP 还很陌生，还在学习）我有以下形式：

```
<form name="checkingEmail">
        E-Mail: <input type="text" name="email1" />
        <br />
        Retype E-Mail: <input type="text" name="email2" />
        <br />
        <input type="button" value="Submit" onClick="checkEmail()">
    </form> 
```

我想从用户输入中获取值并在他们点击“提交”后执行一个简单的 If...Else 语句

PHP：

```
<?php
$email1 = blah //Value from email1 input form here;
$email2 = blah //Value from email2 input form here;
function checkEmail()
{
global $email1, $email2;
if($email1==$email2)
{
//Some Code Here
}
else
{
echo "Make sure your E-Mail addresses match";
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:21:25.790

您应该在表单上使用 GET 或 POST 变量。所以在表单元素中包含 method 属性：

```
<form method="get"> 
```

然后使用 GET 或 POST 获得更安全的方法……使用 POST 方法时，表单输入不会显示在 URL 中。

您可以使用以下任何一种：

```
$email1 = $_POST['email1'];
$email2 = $_POST['email2']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:17:55.207

```
$email1 = $_GET['email1'];
$email2 = $_GET['email2']; 
```

然后确保调用该`checkEmail()`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T01:32:11.817

您还应该在表单 html 中指定发送方法：POST 或 GET：

-->获取

HTML：

```
 <form name="checkingEmail" method="get"> 
```

PHP：

```
 $email1 = $_GET['email1']; 
```

-->发布

HTML：

```
 <form name="checkingEmail" method="post"> 
```

PHP：

```
 $email1 = $_POST['email1']; 
```

或者您可以检查哪个类型的字段已通过。

HTML：

```
 <input type='hidden' name='check' /> 
```

PHP：

```
 if(isset($_POST['check'])) {
        // Post method
      } elseif(isset($_GET['check'])) {
        // Get method
      } else {
        // failure
      } 
```

# php - 使用 javascript 显示指向电子邮件的推荐链接

> ID：14370702
> 
> 赞同：0
> 
> 时间：2013-01-17T01:14:52.057
> 
> 标签：php, javascript, email, referrals

我想在我的电子邮件中显示推荐链接。这是我到目前为止得到的。

```
<form method="POST" action="javascript:" name="form">
            <br /><label> <input type="text" name="text" id="text" placeholder="Name" value="" /> </label>
            <br /><label> <input type="text" name="email" id="email" placeholder="Email" value="" /> </label>
            <br /><label> <input type="text" name="phone" id="phone" placeholder="Phone" value="" /> </label>
            <br /><label> <input type="text" name="company" id="company" placeholder="Company" value="" /> </label> 
            <br /><label> <textarea name="textarea" id="textarea" placeholder="Message" rows="3" value="0" /></textarea> </label>
            <br /><label> <input type="text" name="referrer" id="WelcomePlaceHolder" placeholder="Referrer" value="" style="display: none;"/></textarea> </label>
        <br />
            <br /><label> <input class="homebotton" type="button" name="button" id="button" placeholder="button" value="Send" /> </label>
         </form> 
```

表格发送到电子邮件：

```
$message .= '<tr><td>Name : </td><td>' . $_REQUEST['text'] . '</td><tr>';
    $message .= '<tr><td>Email : </td><td>' . $_REQUEST['email'] . '</td></tr>';
    $message .= '<tr><td>Phone : </td><td>' . $_REQUEST['phone'] . '</td></tr>';
    $message .= '<tr><td>Company : </td><td>' . $_REQUEST['company'] . '</td></tr>';
    $message .= '<tr><td>Message : </td><td>' . $_REQUEST['textarea'] . '</td></tr>';
    $message .= '<tr><td>Referral Site : </td><td>' . $_REQUEST['referrer'] . '</td></tr>'; 
```

用于检索推荐人链接的 Javascript。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript">
//Add urls regular expressions and your message(any HTML Code) to the array
var msgs = [
//null url : to show a message for direct traffic (no referer, some one who remember your site url!)
{'url':null,                           'msg':'I am glad you remember my site URL, enjoy your stay'}
//My url! : show message for referrals from your own site or null so you do not annoy them
,{'url':/^http:\/\/(\w+\.)?moretechtips\.net/,    'msg':null}
//Other urls
,{'url':/^http:\/\/(\w+\.)?google\.com/,      'msg':'Welcome googler, Hope you will find what you looking for'}
,{'url':/^http:\/\/(\w+\.)?dzone\.com/,         'msg':'Welcome fellow dzone reader, if you like it please vote it up'}
,{'url':/^http:\/\/(\w+\.)?digg\.com/,         'msg':'Welcome digger, if you like it please digg it'}
,{'url':/^http:\/\/(\w+\.)?propeller\.com/,      'msg':'Welcome propeller user, hope you will like it here'}
//generic pattern: to show generic message for referrers that you did not specify one for
//You must keep it at the end of the list as it will match any non empty referrer
,{'url':/^http:\/\//,               'msg':'Hello their.. Hope you will find what you looking for'}
];
function DetectReferrer(){
   var div = $('#WelcomePlaceHolder');
   //if Div was not placed means , not to show message
   if (!div.length) return;
   var ref = document.referrer.toLowerCase();
   var msg = findMatch(ref);
   // if not null msg found
   if(msg) {
      //Add Close Button and Show up message
      div.html( '<a href="javascript:void(0)" class="CloseButton">X</a>' + msg).show('slow',function(){
         //Hide On click close Button
         $('.CloseButton',div).click(function(){ div.hide() })
      });
   }
}
function findMatch(ref) {
   for(var i=0; i<msgs.length; i++)
      if( ( ref=='' && msgs[i].url==null) || (ref>'' && ref.match(msgs[i].url) ) )
         return msgs[i].msg;
   return null;
}

// Call the Referrer Detector function on document ready
$(DetectReferrer);
</script> 
```

该脚本有效。我试图显示发送到我的电子邮件的推荐链接，但它是空的。推荐链接为空。我希望我说得通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:52:18.450

这将从`msgs`电子邮件中的表格发送消息。

```
if(msg) {
   //Add Close Button and Show up message
   div.html( '<a href="javascript:void(0)" class="CloseButton">X</a>' + msg).show('slow',function(){
      //Hide On click close Button
      $('.CloseButton',div).click(function(){ div.hide() })
   });
   // Include message in form data
   div.val(msg);
} 
```

如果您只想要引用 URL，无论它是否在表中，只需执行以下操作：

```
div.val(ref); 
```

之前`if (msg)`。

要将其发送到 PHP 脚本，您需要将表单字段更改为：

```
<input type="hidden" name="referrer" id="WelcomePlaceHolder" placeholder="Referrer" value=""/> 
```

`display: none`没有发送到服务器的表单字段，这就是`type="hidden"`它的用途。

# c# - 当派生类构造函数产生错误时如何处理C#基类

> ID：14370703
> 
> 赞同：5
> 
> 时间：2013-01-17T01:14:52.297
> 
> 标签：c#, constructor, dispose

如果 C# 派生的 IDisposable 类构造函数产生错误，如何处置已经完全构造的 IDisposable 基类？

由于类层次结构中的所有字段在任何构造函数执行之前都已初始化，派生构造函数调用 base.Dispose() 是否安全？它违反了在对象完全构造之前不调用虚拟方法的规则，但我想不出另一种方法来做到这一点，而且我的搜索没有发现任何关于这种情况的信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T01:20:28.447

我的观点是构造函数应该是轻量级的，而不是依赖可能引发异常的外部资源/等。构造函数应该做足够的工作来验证 Dispose() 可以安全地调用。考虑使用包含而不是继承，或者让工厂方法完成可能引发的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T00:09:04.090

如果通过异常退出，所有派生类构造函数都必须调用`Dispose`正在构造的对象。`IDisposable`此外，如果字段初始值设定项构造实例或可能失败，则很难编写防泄漏类。太糟糕了，因为要求对象在一个地方声明，在第二个地方初始化，在第三个地方清理并不完全是连贯代码的秘诀。

我建议最好的模式可能是这样的：

```
class foo : baseFoo , IDisposable
{
    foo () : baseFoo
    {
        bool ok = false;
        try
        {
            do_stuff();
            ok = true; // Only after last thing that can cause failure
        }
        finally
        {
            if (!ok)
              Dispose();
        }
    }
} 
```

请注意，C++/CLI 会自动实现该模式，并且还可以自动处理 IDisposable 字段的清理。太糟糕了，这种语言在其他方面似乎很痛苦。

PS——除了相对较少的例外，主要是围绕可预测成本的共享不可变对象（例如画笔、字体、小位图等），依赖于`Finalize`清理对象的代码被*破坏了*。如果`IDisposable`创建了 an ，则必须将其处置，除非创建它的代码对将处置推迟到终结器的后果有特定的了解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T01:21:03.460

对于托管资源，这应该不是问题，它们会被垃圾收集。对于非托管资源，请确保为对象定义了终结器，这将确保清理非托管资源。

此外，从构造函数中抛出异常被认为是非常不礼貌的行为，最好提供一个工厂方法来进行构造和错误处理，或者为您的对象配备一个将抛出实际异常的 Initialize 方法。这样，建设总是成功的，你就不会遇到这些类型的问题。

* * *

正确，垃圾收集器不调用 Dispose，但 Finalizer 是，它又需要调用 Dispose。这是一种更昂贵的技术，除非使用得当。我的回答中没有这样说，是吗；）。

您可以调用 GC 来强制收集运行，并且可以等待所有待处理的终结器。最好不要将生成异常的代码放在构造函数中，或者在构造函数中的代码周围放置一个 try/catch，以确保在发生错误时对这些文件调用 Dispose。您可以随时重新抛出异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T12:00:57.177

该解决方案基于@supercat 的提议。任何可能抛出的成员的初始化必须在构造函数的 try/catch 块中执行。如果满足该条件，则任何构造函数抛出的异常都将正确处理完全或部分构造的基类或派生类。

在这个测试代码中，依次取消注释四个异常，程序将输出哪些 Disposable 资源由于构造函数抛出异常而未正确释放。然后取消注释两个 Dispose 调用并观察所有内容都已按应有的方式进行清理。

```
 class DisposableResource : IDisposable
    {
        public DisposableResource(string id) { Id = id; }
        ~DisposableResource() { Console.WriteLine(Id + " wasn't disposed.\n"); }
        public string Id { get; private set; }
        public void Dispose() { GC.SuppressFinalize(this); }
    }

    class Base : IDisposable
    {
        public Base()
        {
            try
            {
                throw new Exception();      // Exception 1.
                _baseCtorInit = new DisposableResource("_baseCtorInit");
//              throw new Exception();      // Exception 2.
            }
            catch(Exception)
            {
//              Dispose();                  // Uncomment to perform cleanup.
                throw;
            }
        }

        public virtual void Dispose()
        {
            if (_baseFieldInit != null)
            {
                _baseFieldInit.Dispose();
                _baseFieldInit = null;
            }

            if (_baseCtorInit != null)
            {
                _baseCtorInit.Dispose();
                _baseCtorInit = null;
            }
        }

        private DisposableResource _baseFieldInit = new DisposableResource("_baseFieldInit");
        private DisposableResource _baseCtorInit;
    }

    class Derived : Base
    {
        public Derived()
        {
            try
            {
//              throw new Exception();      // Exception 3.
                _derivedCtorInit = new DisposableResource("_derivedCtorInit");
//              throw new Exception();
            }
            catch (Exception)
            {
//              Dispose();                  // Uncomment to perform cleanup.
                throw;
            }
        }

        public override void Dispose()
        {
            if (_derivedFieldInit != null)
            {
                _derivedFieldInit.Dispose();
                _derivedFieldInit = null;
            }

            if (_derivedCtorInit != null)
            {
                _derivedCtorInit.Dispose();
                _derivedCtorInit = null;
            }

            base.Dispose();
        }

        private DisposableResource _derivedFieldInit = new DisposableResource("_derivedFieldInit");
        private DisposableResource _derivedCtorInit;
    }

    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                Derived d = new Derived();
            }
            catch (Exception)
            {
                Console.WriteLine("Caught Exception.\n");
            }

            GC.Collect();
            GC.WaitForPendingFinalizers();
            GC.Collect();
            Console.WriteLine("\n\nPress any key to continue...\n");
            Console.ReadKey(false);
        }
    } 
```

# php - 如何理解 HTTP_USER_AGENT 结果？

> ID：14370708
> 
> 赞同：-1
> 
> 时间：2013-01-17T01:15:14.507
> 
> 标签：php, user-agent

> **可能重复：**
> [解析用户代理字符串的代码？](https://stackoverflow.com/questions/2122786/code-to-parse-user-agent-string)

我正在跟踪我的用户的浏览器，以便更好地了解他们的体验（查看某个浏览器和某个行为之间是否存在任何联系）。我正在插入结果

```
$_SERVER['HTTP_USER_AGENT']; 
```

进入一个mysql表。但是，我不太确定如何阅读它。例如，今天有一个注册，其值如下：

Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.57.2 (KHTML, like Gecko) 版本/5.1.7 Safari/534.57.2

那么是哪一个呢？为什么列出三个浏览器？我怎么读这个？你可以自己试试这个： [http ://www.glassreel.com/whoami.php](http://www.glassreel.com/whoami.php)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:02:37.840

我很确定网络浏览器是 Chrome。

只有一种方法可以对此进行测试，您可能知道。安装 IE、Firefox 和 Chrome 并自行注册。

同时，您可以使用`get_browser()`函数并解析`array ([browser_name_pattern])`然后将其插入到您的数据库中。

我希望这有帮助

# mysql - 优化 Group by & Order by 查询

> ID：14370709
> 
> 赞同：0
> 
> 时间：2013-01-17T01:15:16.423
> 
> 标签：mysql, sql, group-by, sql-order-by, greatest-n-per-group

这是产品表的结构。
目前拥有超过 100 万条记录。当我使用查询 group by 和 order by 时，我遇到了性能问题。 ![在此处输入图像描述](../Images/da3c92c4ed65fd5e7a0a17f75dc50846.png)

![在此处输入图像描述](../Images/574c70fbdff454537413e4ad918a5af2.png)

询问：

```
SELECT product_name FROM vs_product GROUP BY store_id ORDER BY id DESC LIMIT 2 
```

如何改进此查询以更快地执行？我索引了 store_id，ID 是主键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:46:13.740

你想要这样的查询：

```
select p.*
from product p join
      (select store_id, max(id) as maxid
       from product p
       group by store_id
      ) psum
      on psum.store_id = p.store_id and p.id = maxid 
```

您在任何表格中都没有日期，所以我假设最大的 id 是最新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T08:29:15.553

```
SELECT x.*
   FROM my_table x
  JOIN (SELECT store_id, MAX(id) max_id FROM my_table GROUP BY store_id) y
    ON y.store_id = x.store_id
   AND y.max_id = x.id
 ORDER 
    BY store_id DESC LIMIT 2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:22:23.443

一个hacky（但快速）的解决方案：

```
SELECT product_name
FROM (
  SELECT id
  FROM vs_product
  GROUP BY store_id DESC
  LIMIT 2) as ids
JOIN vs_product USING (id); 
```

**它是如何工作的**：

您在 store_id 上的索引按升序存储 (store_id, id) 对。`GROUP BY DESC`将使 MySQL 以相反的顺序读取索引，即子查询将获取每个 store_id 的最大 id。然后，您只需将它们加入到整个表中以获取产品名称。

请注意，查询将为具有最大值的商店 ID 获取两个产品名称。

# ios - Xcode - Button looks good in storyboard but not on emulator

> ID：14370712
> 
> 赞同：1
> 
> 时间：2013-01-17T01:15:30.327
> 
> 标签：ios, uibutton, uistoryboard

When I work with buttons in the storyboard they look good, like this:

![http://postimage.org/image/vsz3gwd5x/](../Images/f3db6a55fe23864eb47c09ec29c48bd7.png)

But when i run the app they turn out like this:

![http://postimage.org/image/uwftwhne9/](../Images/0ed6e943a83edf891e4b76c9d97d4f56.png)

Do you guys know why?

Here are som settings:

![UI Settings Panel](../Images/9b95c254959d9806a352517736273e64.png)

Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T06:39:31.723

您可能已将图像放入检查器的**图像**属性中。将该图像放在检查员的**背景**属性中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T06:52:47.453

在属性检查器**Type**中排在首位，将其从**Rounded**更改为**Custom**。顺便说一句，我们的 iOS 还没有. 在 android sdk 中我们称之为;)**`simulator``emulator``emulator`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T02:06:24.280

检查属性检查器中的视图内容模式，它位于右侧列的第四个选项卡中。内容模式可以是按比例填充、宽高比和许多其他可能性。这将影响它的呈现方式。还要在第五个选项卡中检查您的按钮自动调整大小是如何设置的。**

# jquery - Datatables change language dynamically

> ID：14370715
> 
> 赞同：3
> 
> 时间：2013-01-17T01:15:42.860
> 
> 标签：jquery, datatables

I'm trying to change with jQuery language of a table with datatables. I'm trying to push a button to change the language of the table.

```
$('#prueba').live('click', function () {
var espanol = {
     "sProcessing": "Procesando...",
     "sLengthMenu": "Mostrar _MENU_ registros",
     "sZeroRecords": "No se encontraron resultados",
     "sInfo": "Mostrando desde _START_ hasta _END_ de _TOTAL_ registros",
     "sInfoEmpty": "No existen registros",
     "sInfoFiltered": "(filtrado de un total de _MAX_ líneas)",
     "sInfoPostFix": "",
     "sSearch": "Buscar:",
     "sUrl": "",
"oPaginate": {
"sFirst":    "Primero",
"sPrevious": "Anterior",
"sNext":     "Siguiente",
"sLast":     "Último"
}
};
tablacliente.fnSettings().oLanguage= espanol;
tablacliente.fnDraw();
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T02:04:58.787

AFAIK，没有内置的方法或插件（当前）来动态切换语言。但是您可以做的是破坏数据表并使用新的语言设置重新初始化它。

因此，将按钮的单击处理程序更改为如下所示：

```
$('#prueba').click(function(){
    if (typeof tablacliente != 'undefined' && tablacliente != null)
    {
        tablacliente.fnDestroy(); //important! you have to destroy first or you'll get an alert-error.
        tablacliente = null;
        tablacliente = $('#table_id').dataTable( {"oLanguage": espanol} ); //don't forget to include any other settings, if you have.
    }
}); 
```

这是[关于 jsFiddle 的演示](http://jsfiddle.net/GpuWD/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-17T15:48:23.927

As the original poster mentioned, this does not work:

```
tablacliente.fnSettings().oLanguage = espanol;    // does not work! 
```

but something like this should work, without having to destroy the table:

```
var oLanguage = tablacliente.fnSettings().oLanguage;
for (var field in espanol) {
    oLanguage[field] = espanol[field];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-05T19:40:59.937

```
<?php
$countries = array (
    "tr-TR"=>"//cdn.datatables.net/plug-ins/1.10.16/i18n/Turkish.json",
    "de-DE" =>"//cdn.datatables.net/plug-ins/1.10.16/i18n/German.json",
    "es-ES"=>"//cdn.datatables.net/plug-ins/1.10.16/i18n/Spanish.json"
);
?>
<script>
    var locale='<?php echo $countries[locale_get_default()];?>';
    $(document).ready(function () {
        $('#page-params').dataTable({
            responsive: true,
            "oLanguage": {
                "sUrl": locale
            }
        });
    });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-22T12:52:47.527

尝试这个：

tablacliente.fnSettings().oLanguage=espanol; tablacliente.fnUpdate();

为我工作。

# python - Limiting the number of request from any given IP address

> ID：14370717
> 
> 赞同：3
> 
> 时间：2013-01-17T01:15:54.007
> 
> 标签：python, google-app-engine, webapp2

I am working on a Google App Engine project (python/webapp2) where I am a little concerned with people abusing/spamming the service I am creating with a large number of requests. In an attempt to combat this potential, my idea is to limit the number of requests allowed per IP address in any given hour for certain parts of the applicaiton. My current plan is as follows:

On each request I will:

1.  grab the ip address from the header
2.  store this ip address in the dataStore with a time stamp
3.  delete any ip address entities in that are over an hour old
4.  count the number of dataStore entities with that IP address
5.  disallow access if there are more than given limit

My question is this:
Is this the best way to go about this? I am only a beginner here and I imagine that there is quite a bit of overhead of doing it this way and that possibly this is a common task that might have a better solution. Is there any better way to do this that is less resource intensive?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T01:41:09.733

过去，我使用 memcache 完成此操作，它要快得多，特别是因为您只关心近似限制（近似因为 memcache 可以由系统刷新，可能不会被所有实例共享，等等）。您甚至可以使用它来为您过期密钥。像这样的东西（假设`self`是一个 webapp2 请求处理程序，并且您已经导入了 GAE 的 memcache 库）：

```
memcache_key = 'request-count-' + self.request.remote_addr

count = memcache.get(memcache_key)

if count is not None and count > MAX_REQUESTS:
    logging.warning("Remote user has %d requests; rejecting." % (count))
    self.error(429)
    return

count = memcache.incr(memcache_key)
if count is None:
    # key didn't exist yet
    memcache.add(memcache_key, 1, time=WINDOW_IN_SECONDS) 
```

这将创建一个密钥，该密钥在 WINDOW_IN_SECONDS 时间大约 MAX_REQUESTS 之后拒绝用户，每个 WINDOW_IN_SECONDS 重新归零计数。（即它不是一个滑动窗口；它在每个时间段重置为零。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:54:57.993

首先，您的设计有两个注意事项：

*   获得新 IP 地址通常很容易——将 iPhone 从 LTE 切换到 3G 再切换回来，拔下并重新插入 DSL 型号，选择新的开放代理等。所以，如果您希望这样做可以防止故意滥用而不仅仅是人们没有意识到他们做的太多，这并没有多大帮助。

*   IP 地址通常由[NAT](http://en.wikipedia.org/wiki/Network_address_translation)或按顺序共享。如果这意味着一个人，每个 IP 每小时 200 个请求似乎是合理的，但如果这意味着 BigCorp 区域办事处的所有 7500 名员工呢？

无论如何，您的解决方案将起作用，并且根据您的流量模式，它可能是合理的，但有一些替代方案。

例如，您可能希望保留一个共享的黑名单，而不是检查每个连接。当连接进入时，立即根据该黑名单接受或拒绝，并启动“更新数据库”作业。您可以采取进一步的技巧来合并更新，而不是每 N 秒更新一次，等等。当然，这意味着您现在拥有所有连接都可以读取并且某些后台作业可以写入的共享数据，这意味着您已经打开了比赛条件和僵局的大门以及Guido努力确保您很少需要面对GAE的所有有趣的事情。

您可以使用 memcache 代替 dataStore。但是，您需要仔细修改您的密钥，以便它们对简单的键值存储有意义，并且到期可以满足您的需求。例如，您可以为每个连接保留一个键控 IP 的值加上时间戳或随机数或任何其他值，再加上一个键控 IP 的连接列表值，以便您找到其他值。从缓存中删除的任何值都不再计算在内，如果连接列表值下降，则用户必须降至 0。但这增加了很多复杂性。

如果您有少量用户，每个用户都发出大量请求，您可以使用计时器来减少或重置或重新计算每个 IP。但是，如果您预计每小时有超过几百个不同的 IP，您需要手动合并所有这些计时器，并且可能还会合并作业（例如，“在 17:55:39，递减这个 17 个 IP 的列表”） ，并且计时器可能会经常触发，以至于它可能不值得。

就个人而言，我会先做最简单的实现，然后对其进行压力测试和性能测试，如果足够好，就不要担心了。

如果还*不够*好，我可能会先考虑是否可以在优化实现之前简化设计。例如，如果每个*日历小时*每个 IP 有 N 个连接，那么一切都会变得容易得多——只需为每个 IP 存储一个计数器（在 dataStore 或 memcache 中），并在每 XX:00 擦除所有计数器。这可以接受吗？

# asp.net-mvc - Perfomance issue - .Count in MVC view

> ID：14370722
> 
> 赞同：0
> 
> 时间：2013-01-17T01:16:38.030
> 
> 标签：asp.net-mvc, entity-framework, lazy-loading, dbset

For several pages I use a `.Count` inside a `foreach` loop

```
@model ICollection<Item>
foreach(var item in Model)
{
    @item.Flight.FlightReservations.count
} 
```

Because of lazy loading the EF makes a round trip to the database for this.

Now I want to fix this by using this or linq version: Include("List.Flight.FlightReservations")

Doing this makes loading my dbSet take even longer than those `foreach` round trips

How can I 'load' parts of only 1 object?

I would like to use `context.Items.Single(p => p.id == id).Include(.....)` So I only load 1 item fully.

Or any other solutions for this? (A way to force load `item.List.item2.List` inside controller)

Any suggestions are welcome :) Thanks

**EDIT** : now using

`Where(..).ToDictionary(item => item, item => item.Flight.FlightReservations.Count);` Also noticed adding an index to my 'clustered index' table helped a little. Still slow though

```
var f = _pr.FindBy(duifid);
var result = (from p in f.IngeschrevenVluchten
              select new PrestatieModel
              {
                 Eindpos = p.Eindpositie, 
                 Locatie = p.Vlucht.Locatie.Naam, 
                 AantalInschrijvingen = p.Vlucht.Inschrijvingen.Count(), 
                 Vlucht = p.Vlucht
              }); 
```

This query executes very fast, making a `IEnumerable<Model>`. But still it loads very slow once sent to the view.

```
return PartialView(result); 
```

# mysql - why this MySql regular expression not working?

> ID：14370723
> 
> 赞同：2
> 
> 时间：2013-01-17T01:16:42.370
> 
> 标签：mysql, regex

```
SELECT 'AaYYY1231' REGEXP '[A-Z,0-9]+'; 
```

Result:

```
1 
```

Why is it returning 1, when I expect it to return 0 ? From where is is it finding match for 'a' ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:40:00.513

[http://dev.mysql.com/doc/refman/5.1/en/regexp.html](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

“REGEXP 不区分大小写，除非与二进制字符串一起使用。”

文档中的一个例子：

```
mysql> SELECT 'a' REGEXP 'A', 'a' REGEXP BINARY 'A';
+----------------+-----------------------+
| 'a' REGEXP 'A' | 'a' REGEXP BINARY 'A' |
+----------------+-----------------------+
|              1 |                     0 |
+----------------+-----------------------+ 
```

此外，它不是贪婪的，因此它不能确保整个字符串匹配。修改上面的示例会产生：

```
mysql> SELECT 'a' REGEXP BINARY '[A-Z0-9]+', 'Aa' REGEXP BINARY '[A-Z0-9]+';
+-------------------------------+--------------------------------+
| 'a' REGEXP BINARY '[A-Z0-9]+' | 'Aa' REGEXP BINARY '[A-Z0-9]+' |
+-------------------------------+--------------------------------+
|                             0 |                              1 |
+-------------------------------+--------------------------------+ 
```

为了解决这个问题，您可以为行的开头和结尾添加标志：

```
mysql> SELECT 'Aa' REGEXP BINARY '^[A-Z0-9]+$';
+----------------------------------+
| 'Aa' REGEXP BINARY '^[A-Z0-9]+$' |
+----------------------------------+
|                                0 |
+----------------------------------+ 
```

这导致了您想要的最终答案：

```
mysql> SELECT 'AaYYY1231' REGEXP BINARY '^[A-Z,0-9]+$';
+------------------------------------------+
| 'AaYYY1231' REGEXP BINARY '^[A-Z,0-9]+$' |
+------------------------------------------+
|                                        0 |
+------------------------------------------+ 
```

# c++ - std::array 是可移动的吗？

> ID：14370730
> 
> 赞同：49
> 
> 时间：2013-01-17T01:17:49.840
> 
> 标签：c++, arrays, c++11, move-semantics

**std::array 是可移动的吗？**

在[Bjarne Native 2012 演示幻灯片](http://ecn.channel9.msdn.com/events/GoingNative12/GN12Cpp11Style.pdf)（幻灯片 41）中，它`std::array`列为唯一不可移动的容器之一。

快速浏览 gcc 4.8 库源代码似乎可以确认它`std::array`是不可移动的：

标准：：向量：

```
/* @brief  %Vector move constructor.
   ...       */
  vector(vector&& __x) noexcept
  : _Base(std::move(__x)) { } 
```

而在 std::array 中，唯一接收右值引用参数的方法是随机元素访问，它避免了通过复制返回：

```
get(array<_Tp, _Nm>&& __arr) noexcept
    { /*...*/ return std::move(get<_Int>(__arr)); } 
```

**是`std::array`默认创建的移动构造函数和移动分配，还是`std::array`不可移动的？如果它是不可移动的，为什么`std::array`不能移动而`std::vector`可以移动？**

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-17T01:20:13.040

`std::array`仅当其包含的对象是可移动的时，它才是可移动的。

`std::array`与其他容器完全不同，因为容器对象包含存储，而不仅仅是指向堆的指针。移动 a`std::vector`只会复制一些指针，而包含的对象也不明智。

是的，`std::array`使用默认的移动构造函数和赋值运算符。作为一个聚合类，不允许定义任何构造函数。

# slf4j - logback 文件包含取决于内容的顺序

> ID：14370737
> 
> 赞同：4
> 
> 时间：2013-01-17T01:18:32.827
> 
> 标签：slf4j, logback

logback[文件包含](http://logback.qos.ch/manual/configuration.html#fileInclusion)需要按顺序进行配置。我排除了根并将其保留在`${catalina.base}/conf/includedConfig.xml`

```
<?xml version="1.0"?>
<included>
  <root level="INFO">
    <appender-ref ref="FILE"/>
  </root>
</included> 
```

和 src/main/resources 下的 logback.xml

```
<?xml version="1.0"?>
<configuration>
   <include file="${catalina.base}/conf/includedConfig.xml"/>

 <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>${catalina.base}/logs/logFile.log</file>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
        <fileNamePattern>logFile.%d{yyyy-MM-dd}.log</fileNamePattern>
        <maxHistory>7</maxHistory>
    </rollingPolicy>
    <encoder>
        <pattern>%date [%thread] %-5level %logger{35} - %msg%n</pattern>
    </encoder>
</appender> 
```

它抱怨找不到附加程序。虽然我改变了标签的位置并在 appender 之后保留它，但它抱怨同样的错误。

```
17:05:12,566 |-ERROR in ch.qos.logback.core.joran.action.AppenderRefAction - Cou
ld not find an appender named [FILE]. Did you define it below instead of above in 
the configuration file? 
```

如果我以相反的顺序执行相同的操作，即将附加程序放在外部文件中，并将根放在 logback.xml 中，它工作正常。

我想这样做的原因是，我想在构建（相同的工件）被提升到不同的环境时更改日志级别，如果日志级别处于应用程序战争中，这是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-29T04:29:16.883

尝试像这样添加：`

```
<appender name="all_info" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
      <level>INFO</level>
    </filter>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
        <FileNamePattern>./log/mylog_all_info.%d{yyyy-MM-dd}.log</FileNamePattern>
        <MaxHistory>30</MaxHistory>
    </rollingPolicy>
    <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
        <MaxFileSize>5MB</MaxFileSize>
    </triggeringPolicy>
    <layout class="ch.qos.logback.classic.PatternLayout">
        <Pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{80} - %msg%n</Pattern>
    </layout>
</appender>

<root>
    <appender-ref ref="all_info" level="INFO" />
</root> 
```

`

# java - Java 堆被无法访问的对象淹没

> ID：14370738
> 
> 赞同：26
> 
> 时间：2013-01-17T01:18:43.153
> 
> 标签：java, garbage-collection, jvm

我们的 Java EE 应用程序已经开始出现一些严重的问题。具体来说，应用程序在启动后几分钟内运行了高达 99% 的老年代堆。没有抛出 OOM，但实际上 JVM 没有响应。jstat 显示老年代的大小根本没有减少，没有垃圾收集正在进行，并且 kill -3 说：

```
Heap
 PSYoungGen      total 682688K, used 506415K [0xc1840000, 0xf3840000, 0xf3840000)
  eden space 546176K, 92% used [0xc1840000,0xe06cd020,0xe2da0000)
  from space 136512K, 0% used [0xe2da0000,0xe2da0000,0xeb2f0000)
  to   space 136512K, 0% used [0xeb2f0000,0xeb2f0000,0xf3840000)
 PSOldGen        total 1536000K, used 1535999K [0x63c40000, 0xc1840000, 0xc1840000)
  object space 1536000K, 99% used [0x63c40000,0xc183fff8,0xc1840000) 
```

虚拟机选项是：

```
-Xmx2300m -Xms2300m -XX:NewSize=800m -XX:MaxNewSize=800m -XX:SurvivorRatio=4 -XX:PermSize=256m -XX:MaxPermSize=256m -XX:+UseParallelGC -XX:ParallelGCThreads=4 
```

（我将它从拥有 2300m 堆/1800m 新一代更改为尝试解决问题）

一旦 JVM 进入“内存不足”状态（一直持续下去），我就对其进行了堆转储并在其上运行 Eclipse 内存分析器。

结果很有趣。大约 200Mb 被各种对象占用（有些比其他对象拥有更多），但其余的 1.9Gb 都无法访问（可能值得注意的是，大部分被 GSON 对象占用，但我认为不是任何事情的迹象，只说我们在服务器操作期间搅动了很多 GSON 对象）。

关于为什么 VM 有这么多无法访问的对象并且根本无法收集它们的任何解释？

虚拟机：

```
$ /0/bin/java -version
java version "1.6.0_37"
Java(TM) SE Runtime Environment (build 1.6.0_37-b06)
Java HotSpot(TM) Server VM (build 20.12-b01, mixed mode) 
```

当系统到达这个停顿时，下面是详细的 GC 不断打印的内容：

```
922.485: [GC [1 CMS-initial-mark: 511999K(512000K)] 1952308K(2048000K), 3.9069700 secs] [Times: user=3.91 sys=0.00, real=3.91 secs] 
926.392: [CMS-concurrent-mark-start]
927.401: [Full GC 927.401: [CMS927.779: [CMS-concurrent-mark: 1.215/1.386 secs] [Times: user=5.84 sys=0.13, real=1.38 secs] (concurrent mode failure): 511999K->511999K(512000K), 9.4827600 secs] 2047999K->1957315K(2048000K), [CMS Perm : 115315K->115301K(262144K)], 9.4829860 secs] [Times: user=9.78 sys=0.01, real=9.49 secs] 
937.746: [Full GC 937.746: [CMS: 512000K->511999K(512000K), 8.8891390 secs] 2047999K->1962252K(2048000K), [CMS Perm : 115302K->115302K(262144K)], 8.8893810 secs] [Times: user=8.89 sys=0.01, real=8.89 secs] 
```

**解决了**

正如 Paul Bellora 所建议的，这是由于在太短的时间内在 JVM 中创建的对象数量过多造成的。此时调试变得相当乏味。我最终做的是，使用自定义 JVM 代理来检测类。仪器将计算方法和构造函数调用。然后检查计数。我发现一个不起眼的单个操作会创建大约 200 万个对象，并触发某些单独的方法大约 150 万次（不，没有循环）。与其他操作相比，操作本身很慢。你也可以使用任何热点分析器（比如visualVM），但是我遇到了各种各样的麻烦，所以最后我自己写了。

我仍然认为 JVM 的行为是一个谜。看起来垃圾收集器停滞不前，不再清理内存，但内存分配器希望它这样做（因此不会引发 OOM）。相反，我本以为它会清除所有无法访问的内存。但是应用程序的行为也不会好很多，因为无论如何大部分时间都会花在垃圾收集上。

我用来寻求帮助的代理可以在这里找到：[https](https://github.com/veselov/MethodCountAgent) ://github.com/veselov/MethodCountAgent 。它远非一款精致的软件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T05:41:50.947

> 关于为什么 VM 有这么多无法访问的对象并且根本无法收集它们的任何解释？

（基于我们在评论中的交流）听起来这不是传统的内存泄漏，而是一些不断向新对象发送垃圾邮件的逻辑，使得 GC 难以跟上当前架构。

例如，罪魁祸首可能是某个 API 请求被多次发出，或者像我描述的无限分页场景那样“卡在”某种错误状态。这两种情况都归结为数百万个响应 gson 对象（指向`String`s（指向`char[]`s））被实例化，然后符合 GC 条件。

正如我所说，您应该尝试隔离问题请求，然后调试并进行测量以确定这是您的应用程序或其库之一的错误或可伸缩性问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T18:42:48.133

根据您列出的统计数据，我很难相信您有 1.9G 的无法访问的数据。它看起来更像是*GC Overhead Limit Reached*。

考虑

> 937.746：[全GC 937.746：[CMS：512000K-> 511999K（512000K），8.8891390秒）2047999K-> 1962252K（2048000K），[CMS PERM：115302K-> 115302K（262144K）]，8.8893810秒] [次数：用户= 8.89 系统=0.01，真实=8.89 秒]

如果这是真的，那么 Full GC 会释放 85K 的数据。如果您确实有 1.9G 的无法访问代码，您会看到`2047999 -> ~300000`.

还

```
object space 1536000K, 99% 
```

暗示某些东西以某种方式被创建和存储，它逃脱了一种方法，现在可能永远存在。

我需要看到更多证据证明您有 1.9G 无法访问的数据，而不是简单地被告知。

# java - 当我调用 onClick 时，为什么 onCreate 会导致 Android App 崩溃？

> ID：14370740
> 
> 赞同：0
> 
> 时间：2013-01-17T01:18:47.183
> 
> 标签：java, android, xml, android-viewpager, oncreate

当我按下按钮时，我正在尝试加载新视图。我有一个 viewPager，按钮在这些视图上。当我调用 onClick 时，我的应用程序永远不会启动，它会在任何事情发生之前崩溃。一个多星期以来，我一直在努力解决这个错误，我认为这是非常业余的事情。请帮助学生程序员！

```
public class Main extends Activity {

    Button listButton;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.splash);

        SplashPager adapter = new SplashPager();
        ViewPager myPager = (ViewPager) findViewById(R.id.splashPager);
        myPager.setAdapter(adapter);
        myPager.setCurrentItem(0);

        listButtonListener();
    }

    public void listButtonListener() {

        listButton = (Button) findViewById(R.id.splashB);
        listButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                setContentView(R.layout.list_layout);

            }

        });

    }

} 
```

日志：

```
01-16 20:09:49.149: W/dalvikvm(29035): threadid=1: thread exiting with uncaught exception         (group=0x40207560)
01-16 20:09:49.149: E/AndroidRuntime(29035): FATAL EXCEPTION: main
01-16 20:09:49.149: E/AndroidRuntime(29035): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.survtest2/com.example.survtest2.Main}: java.lang.NullPointerException
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1658)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1674)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:942)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.os.Looper.loop(Looper.java:130)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.app.ActivityThread.main(ActivityThread.java:3733)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at java.lang.reflect.Method.invokeNative(Native Method)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at java.lang.reflect.Method.invoke(Method.java:507)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:892)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:650)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at dalvik.system.NativeStart.main(Native Method)
01-16 20:09:49.149: E/AndroidRuntime(29035): Caused by: java.lang.NullPointerException
01-16 20:09:49.149: E/AndroidRuntime(29035):    at com.example.survtest2.Main.listButtonListener(Main.java:36)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at com.example.survtest2.Main.onCreate(Main.java:30)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1622)
01-16 20:09:49.149: E/AndroidRuntime(29035):    ... 11 more
01-16 20:09:49.149: E/AndroidRuntime(29035): [Blue Error Handler] Make Debugging Report file for main
01-16 20:09:49.149: E/AndroidRuntime(29035): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.survtest2/com.example.survtest2.Main}: java.lang.NullPointerException
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1658)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1674)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:942)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.os.Looper.loop(Looper.java:130)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.app.ActivityThread.main(ActivityThread.java:3733)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at java.lang.reflect.Method.invokeNative(Native Method)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at java.lang.reflect.Method.invoke(Method.java:507)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:892)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:650)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at dalvik.system.NativeStart.main(Native Method)
01-16 20:09:49.149: E/AndroidRuntime(29035): Caused by: java.lang.NullPointerException
01-16 20:09:49.149: E/AndroidRuntime(29035):    at com.example.survtest2.Main.listButtonListener(Main.java:36)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at com.example.survtest2.Main.onCreate(Main.java:30)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-16 20:09:49.149: E/AndroidRuntime(29035):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1622)
01-16 20:09:49.149: E/AndroidRuntime(29035):    ... 11 more 
```

飞溅.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<android.support.v4.view.ViewPager
    android:id="@+id/splashPager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</android.support.v4.view.ViewPager>

</LinearLayout> 
```

飞溅2.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#000000"
    android:orientation="vertical" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:src="@drawable/intro__1" />

<Button
    android:id="@+id/splashB"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:layout_marginLeft="75dp"
    android:text="aaaaaaaaaaaaaaaaaa" />

</FrameLayout> 
```

浏览器：

```
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return 4;
}

@Override
public Object instantiateItem(View collection, int position) {
    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    switch (position) {

    case 0:
        resId = R.layout.splash2;
        break;
    case 1:
        resId = R.layout.splash3;
        break;
    case 2:
        resId = R.layout.splash4;
        break;
    case 3:
        resId = R.layout.splash5;
        break;

    }

    View view = inflater.inflate(resId, null);
    ((ViewPager) collection).addView(view, 0);
    return view;

}

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    // TODO Auto-generated method stub
    ((ViewPager) arg0).removeView((View) arg2);
}

@Override
public Parcelable saveState() {
    // TODO Auto-generated method stub
    return null;
}

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    // TODO Auto-generated method stub
    return arg0 == ((View) arg1);
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:29:20.100

根据您在 listButton.setOnClickListener 上的失败，我猜您的布局中找不到 R.id.splashB。

```
public class Main extends Activity {

Button listButton;
View splash2;  // Added

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...
    setContentView(R.layout.splash);
    SplashPager adapter = new SplashPager();
    ViewPager myPager = (ViewPager) findViewById(R.id.splashPager);
    ....
    LayoutInflater inflater = getLayoutInflater(); // Added
    splash2 = inflater.inflate (R.layout.splash2, null); // Added
    myPager.add (splash2); // Added

    listButtonListener();
}

public void listButtonListener() {

    listButton = (Button) splash2.findViewById(R.id.splashB); // Changed
    listButton.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            setContentView(R.layout.list_layout);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:23:33.933

你得到一个`NullPointerException`，可能是因为`listButton`是`null`。确保布局`splashB`中确实存在。`splash`

如果这不是答案，请尝试设置一个断点`listButtonListener()`以找出它抛出的原因`NullPointerException`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T01:26:44.570

您应该尝试删除

```
myPager.setCurrentItem(0); 
```

你在这里不需要这个，因为默认情况下 ViewPager 默认页面是 0。这样你试图显示可能不是由 Android 系统创建的页面。

编辑：

```
public class Main extends Activity {

Button listButton;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.splash);

    SplashPager adapter = new SplashPager(this); // PASSING MAIN ACTIVITY FOR SETTING CONTENTVIEW
    ViewPager myPager = (ViewPager) findViewById(R.id.splashPager);
    myPager.setAdapter(adapter);
}...} 
```

// 你的适配器代码

```
@Override
public Object instantiateItem(View collection, int position) {
    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    switch (position) {

    case 0:
        resId = R.layout.splash2;
        break;
    case 1:
        resId = R.layout.splash3;
        break;
    case 2:
        resId = R.layout.splash4;
        break;
    case 3:
        resId = R.layout.splash5;
        break;

    }

    View view = inflater.inflate(resId, null);
    if(resId == R.layout.splash2) {
       Button b = (Button) view.findViewById(R.id.splashB);
       b.setOnClickListner(new OnClickListener() {
       @Override
        public void onClick(View arg0) {
            // mainActivity is Activity variable passed in Adapter constructor
            mainActivity.setContentView(R.layout.list_layout);

        }
       });
    }
    ((ViewPager) collection).addView(view, 0);
    return view;

} 
```

# iphone - 即使在 iphone 中使用异步调用后，下载图像也很慢

> ID：14370741
> 
> 赞同：2
> 
> 时间：2013-01-17T01:18:47.780
> 
> 标签：iphone, ios, objective-c, asihttprequest

我必须下载 20-25 个 50 Kb- 2 Mb 的图像，并在表格视图中显示它们。我对此使用了 ASIHTTPRequest 异步请求。我观察到一段时间后应用程序卡住了。这不应该发生，因为我正在使用异步调用。我认为 ASIHTTPRequest 有问题，我观察到 didFinished 选择器在主线程中被调用。我唯一要做的就是

```
-(void)didFinishedDownloadingImage:(ASIHTTPRequest*)request
{
    NSData *responseData = [请求响应数据];
    UIImage *image = [UIImage imageWithData:responseData];
    [[data objectAtIndex:request.tag] setImage:image];
    [self.tableView reloadData];
}

```

我认为这不会造成任何问题。同样在 cellforrowatindexpath 我只是做

```
- (UItableViewCell *)tableviewView:(UItableView *)tableview
                  cellForItemAtIndexPath:(NSIndexPath *)indexPath {

    UserProfile * 用户 = [数据 objectAtIndex:indexpath.row];

    UITableViewCell *cell = [tableView
                              dequeueReusableCellWithReuseIdentifier:@"ProfileCell"
                              forIndexPath:indexPath];
    如果（细胞 == 零）{
        单元格 = [[UITableViewCell alloc] initWithStyle:UITableViewDefaultStyle];
    }

    NSString *fullname = [NSString stringWithFormat:@"%@\n%@",
                                    用户名，用户名，用户名]；
    if(user.image != nil)
        [cell.imageView setImage:user.image];
    别的{
        [cell.imageView setImage:[UIImage imageNamed:@"placeholder.jpg"]];
    }    
    [cell.label setText:fullname];
    返回单元格；
}

```

但是该应用程序很慢并且冻结了 1-2 秒，这是相当长的时间。我见过可以非常顺利地执行此操作的应用程序。我尝试使用固定大小的 5Kb 图像，使用上述代码可以显着提高性能。我不知道为什么在这种情况下这会对大图像产生影响，因为所有下载都是通过 ASIHTTP 在其他线程中发生的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:56:57.840

请用[AFNetworking](https://github.com/AFNetworking/AFNetworking)替换您的框架。

你可以简单的使用..

```
IImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 100.0f, 100.0f)];
[imageView setImageWithURL:[NSURL URLWithString:@"http://i.imgur.com/r4uwx.jpg"] placeholderImage:[UIImage imageNamed:@"placeholder-avatar"]]; 
```

或者...直接在 TableViewCell

```
NSURL *url = [[NSURL alloc] initWithString:[movie objectForKey:@"artworkUrl100"]];
[cell.imageView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"placeholder"]]; 
```

“在第二行中，我们通过传递一个 NSURL 告诉图像视图缩略图所在的位置，并且我们传入一个占位符图像，只要我们的请求没有返回响应，就会显示该图像”

就这样！

在这里你有一个关于[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_afnetworking/的教程](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_afnetworking/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T19:42:45.207

很容易对滞后/缓慢的应用程序的根本原因做出假设。与其猜测，不如测试你的怀疑？使用 Time Profiler 工具分析您的应用程序。它会告诉您应用程序花费最多时间的方法和功能。

在您有机会介绍之前，这里有一些想法：

您可以考虑下载全分辨率图像并在后台创建缩略图，然后将它们缓存在一个`NSCache`对象中。您也可以`[UIImage imageWithData:responseData];`在后台线程中运行。在它与视图层次结构交互之前，它是线程安全的。

有选择地重新加载单个单元格*应该*比重新加载整个 tableview 更快，尤其是一个有很多图像的单元格。此外，如果您在后台队列上进行所有的网络连接和处理，那么滚动表格视图没有理由变慢。`-cellForRowAtIndexPath:`您能向我们展示您对该方法的整个实现吗？你提到你认为`setImage:`是你的慢点，因为渲染很慢。如果重新加载单个单元格，则只需要渲染一个单元格。如果重新加载整个 tableview，则必须重新渲染*每个单元格。*

# android - FragmentTabHost 图形布局不呈现

> ID：14370745
> 
> 赞同：40
> 
> 时间：2013-01-17T01:19:17.450
> 
> 标签：android, android-layout, android-studio, android-support-library

简单的 android.support.v4.app.FragmentTabHost 的图形布局永远不会在 Eclipse 或 Android Studio 中呈现。
我得到的控制台错误始终如一：
`Exception raised during rendering: No tab known for tag null`

我正在使用最基本的 XML 文件：

```
<android.support.v4.app.FragmentTabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@+id/realtabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

    </LinearLayout>
</android.support.v4.app.FragmentTabHost> 
```

但同样的错误发生。

我只是想在选项卡小部件和框架布局上方或下方添加更多视图。
我不太关心看到标签内容；我只想看看*我的布局的其余部分*-但问题是当 a**驻留在布局中****时不会呈现其他视图** 。 `android.support.v4.app.FragmentTabHost`

 **我已阅读并尝试从这篇文章的答案中解决问题：
[Android: Tabs at the bottom with FragmentTabHost](https://stackoverflow.com/questions/13408709/android-tabs-at-the-bottom-with-fragmenttabhost)
但我不认为那是我的问题；我不想在底部放置一个 TabWidget。

我的每个其他 XML 文件都可以完美打开。

Android Studio 中也会出现同样的问题：
![Android Studio 也不渲染这个](../Images/8926e48fc4805449ac8a49e70e898a38.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-29T07:20:29.670

我有同样的渲染问题以及编译错误。我通过发现在创建 Addtab 时没有传递 Fragment 来解决问题。您必须在 mTab​​Host.addTab 上传递至少一个片段。下面是工作代码。

```
private FragmentTabHost mTabHost;
mTabHost = (FragmentTabHost)findViewById(android.R.id.tabhost);
            mTabHost.setup(HomeActivity.this, getSupportFragmentManager(), android.R.id.tabcontent);

            mTabHost.addTab(mTabHost.newTabSpec("home").setIndicator("Home"), HomeFragment.class, null);
            mTabHost.addTab(mTabHost.newTabSpec("mysheets").setIndicator("MySheets"));
            mTabHost.addTab(mTabHost.newTabSpec("bookmarks").setIndicator("Bookmarks")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T04:41:25.550

从布局我得到相同的错误..所以，我只通过代码解决了这个问题......它工作正常..请试试这个代码

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTabHost;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class DetailFragment extends Fragment {

    /******************************************************************************************************************
     * Mandatory empty constructor for the fragment manager to instantiate the fragment (e.g. upon screen orientation changes).
     *****************************************************************************************************************/
    public DetailFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        // R.layout.fragment_tabs_pager contains the layout as specified in your question
        View rootView = inflater.inflate(R.layout.fragment_tabs_pager, container, false);

        // Initialise the tab-host
        FragmentTabHost mTabHost = (FragmentTabHost) rootView.findViewById(R.id.tabhost);
        mTabHost.setup(getActivity(), getChildFragmentManager(), R.id.realtabcontent);

        // Initialise this list somewhere with the content that should be displayed
        List<String> itemsToBeDisplayed;

        for (String subItem : itemsToBeDisplayed) {
            // Give along the name - you can use this to hand over an ID for example
            Bundle b = new Bundle();
            b.putString("TAB_ITEM_NAME", subItem);

            // Add a tab to the tabHost
            mTabHost.addTab(mTabHost.newTabSpec(subItem).setIndicator(subItem), YourContentFragment.class, b);
        }
        return rootView;
    }
}

/********************************************************
This class contains the actual content of a single tab  
**********************************************************/
public class YourContentFragment extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Bundle extras = getArguments();
        if (extras != null) {
            if (extras.containsKey("TAB_ITEM_NAME")) {
                String subItem = extras.getString("TAB_ITEM_NAME");
                // Do something with that string
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-03T09:13:31.373

不确定您遇到的错误（对不起，我现在真的很忙，所以不能花更多时间检查），但总的来说，`FragmentTabHost`支持库中的似乎根本不关心 xml。请参阅我之前对另一个问题的回答：

[水平滚动的 FragmentTabHost](https://stackoverflow.com/questions/14598819/fragmenttabhost-with-horizontal-scroll/14870710#14870710)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-01T09:09:14.580

如果你需要在屏幕底部放置零散的标签...@fallow 下面提到-

像这样制作你的xml文件..

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

       <!--   <RelativeLayout 
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent">  android:layout_alignParentTop="true"  -->

         <FrameLayout
            android:id="@+id/realtabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dip"
            android:layout_weight="1" />

        <android.support.v4.app.FragmentTabHost
            android:id="@android:id/tabhost"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            >

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dip"
                android:layout_height="0dip"
                android:layout_weight="0" />

        </android.support.v4.app.FragmentTabHost>

    </LinearLayout> 
```

* * *

现在，如果您关心的是在单个碎片选项卡中打开多个碎片......

@按照步骤::

1.  创建一个容器片段。此容器片段将默认用于您的所有选项卡内容。
2.  对于每个选项卡内容，用此容器替换 U 需要的片段。

例如：- 就像你用不同的床单替换你的床.. :)

您将在不同选项卡中以不同方式使用的容器片段类...“LearnContainerFragment.java”

```
 public class LearnContainerFragment extends BaseContainerFragment {

        private boolean mIsViewInited;

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            Log.e("test", "tab 1 oncreateview");
            return inflater.inflate(R.layout.container_fragment, null);
        }

        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);
            Log.e("test", "tab 1 container on activity created");
            if (!mIsViewInited) {
                mIsViewInited = true;
                initView();
            }
        }

        private void initView() {
            Log.e("test", "tab 1 init view");
            replaceFragment(new Learn(), false);
        }

    } 
```

LearnContainerFragment.java ---> xml文件container_fragment.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/container_framelayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    </FrameLayout> 
```

@ 如何使用 Conatiner..

1.  对于 U 需要的每个片段，都将替换为此容器片段的 id。

@last 你的 BaseContainerFragment.java 类——

```
public class BaseContainerFragment extends Fragment {

    public void replaceFragment(Fragment fragment, boolean addToBackStack) {
        FragmentTransaction transaction = getChildFragmentManager().beginTransaction();
        if (addToBackStack) {
            transaction.addToBackStack(null);
        }
        transaction.replace(R.id.container_framelayout, fragment);
        transaction.commit();
        getChildFragmentManager().executePendingTransactions();
    }

    public boolean popFragment() {
        Log.e("test", "pop fragment: " + getChildFragmentManager().getBackStackEntryCount());
        boolean isPop = false;
        if (getChildFragmentManager().getBackStackEntryCount() > 0) {
            isPop = true;
            getChildFragmentManager().popBackStack();
        }
        return isPop;
    }

} 
```

希望它有帮助......干杯！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T05:33:48.607

不确定....但是您的布局不应该在tabwidget的线性布局上方有一个tabhost标签吗？

```
<TabHost
    android:id="@+id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background"
> 
```

不久前我做了一个应用程序，它使用 tabhost 实现了选项卡，这就是我的布局方式......一个选项卡有一个日历视图，一个有一个图像切换器，一个有一个列表视图......对不起，我无法提供更多帮助

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/background"
tools:context=".MainActivity" >

<TabHost
    android:id="@+id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background"
>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/background"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <ListView
                    android:id="@+id/listView1"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
                </ListView>
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <ImageSwitcher
                    android:id="@+id/imageSwitcher1"
                    android:layout_width="match_parent"
                    android:layout_height="251dp" >
                </ImageSwitcher>

                <TextView
                    android:id="@+id/tv"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:scrollbars="vertical" />

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab3"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <CalendarView
                    android:id="@+id/calendarView1"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" />
            </LinearLayout>

        </FrameLayout>
    </LinearLayout>

</TabHost> 
```**

# javascript - 为什么 history.go(-1) 在 IE 和 webkit 浏览器中做不同的事情？

> ID：14370747
> 
> 赞同：1
> 
> 时间：2013-01-17T01:19:28.397
> 
> 标签：javascript, asp.net, internet-explorer, browser-history

我的 asp.net 应用程序中有这段代码

```
 linkBack.NavigateUrl = "#";
    linkBack.Attributes["onclick"] = "if (BrowserDetect.browser == 'Explorer') {history.go(-1);} else if (BrowserDetect.browser == 'Chrome') {history.go(-1);return false;}"; 
```

BrowserDetect 是一个 JS 库，它告诉我我正在使用什么浏览器。回到正题，当我点击 Chrome 中的反向链接时，它让我回到了历史上一级，正如预期的那样。IE 让我后退了一步，在下一次点击时，我又回到了原来的位置，随后的点击确保我在相同的两个页面之间来回切换。有人可以向我解释发生了什么以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:21:56.850

因为你正在为 IE 和 Chrome 做一些不同的事情？无论如何，您都需要从 onclick 返回 false。否则将跟随链接 (#)

```
linkBack.Attributes["onclick"] = "history.go(-1);return false;"; 
```

# c# - 为什么字符串可以为空？

> ID：14370751
> 
> 赞同：6
> 
> 时间：2013-01-17T01:20:06.140
> 
> 标签：c#, .net

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T01:21:59.960

因为字符串是引用类型，所以派生自`object`和 [大多数] 其他默认类型是值类型，隐式派生自 System.ValueType；

# jquery - 使用新的 var 值 jquery 重建列表

> ID：14370755
> 
> 赞同：0
> 
> 时间：2013-01-17T01:20:16.803
> 
> 标签：jquery, object

是否可以在加载用户传入的新值后重新创建对象？

例如，我有一个充满 api 调用信息的对象，包括名称和带有必需属性的其余 url。

```
var masterCallList = [
   {'CallName':'GetMerchantData','CallUrl': '/Merchants/?MerchantId=' + MerchantId + '&ApiKey=' + ApiKey, 'CallType':'Get', 'Desc':''},
   {'CallName':'GetMerchantFeed','CallUrl': '/FeedReturnItems/?MerchantId=' + MerchantId + '&ApiKey=' + ApiKey', 'CallType':'Get' 'Desc':''}
]; 
```

在页面加载时，我遍历每个调用并从中构建 html 元素，包括创建然后运行调用的 onclick 事件。

```
$(document).ready(function(){   
    //create the call lists and page elements from the master
    BuildCallLists(); 
```

我的问题是我想允许用户更改他们正在请求信息的变量之一，例如 Mercerid，但是当它们被重建时，它们没有新的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:53:12.650

您可以将其作为一个带参数的函数，而不是`CallUrl`作为字符串，例如：

```
var masterCallList = [
  {'CallName':'GetMerchantData','CallUrlFun': function(MerchantId, ApiKey) { return '/Merchants/?MerchantId=' + MerchantId + '&ApiKey=' + ApiKey; }, 'CallType':'Get', 'Desc':''},
  {'CallName':'GetMerchantFeed','CallUrlFun': function(MerchantId, ApiKey) { return '/FeedReturnItems/?MerchantId=' + MerchantId + '&ApiKey=' + ApiKey; }, 'CallType':'Get', 'Desc':''}
]; 
```

`CallUrlFun`新功能在哪里。现在您可以使用给定的参数调用该函数`(MerchantId, ApiKey)`。这是一个 jsFiddle 示例：

*   [http://jsfiddle.net/ywVmy/](http://jsfiddle.net/ywVmy/)

另一种选择是在字符串中有一个特殊的名字对象并进行字符串替换，例如：

```
var masterCallList = [
  {'CallName':'GetMerchantData','CallUrlTemplate': '/Merchants/?MerchantId=##MerchantId##&ApiKey=##ApiKey##', 'CallType':'Get', 'Desc':''},
  {'CallName':'GetMerchantFeed','CallUrlTemplate': '/FeedReturnItems/?MerchantId=##MerchantId##&ApiKey=##ApiKey##', 'CallType':'Get', 'Desc':''}
]; 
```

您在`CallUrlTemplate`其中包含绰号`##MerchantId##`和`##ApiKey##`. 这是一个示例 jsFiddle：

*   [http://jsfiddle.net/ALbxC/](http://jsfiddle.net/ALbxC/)

顺便说一句，通常在 JavaScript 中，变量名称以小写字母开头（例如，merchantId 而不是 MerchantId）。

希望这可以帮助。

# c# - 在 CSV 文件中编辑/保存一行

> ID：14370757
> 
> 赞同：8
> 
> 时间：2013-01-17T01:20:28.593
> 
> 标签：c#, asp.net, csv

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-17T01:37:16.527

Here is your solution using `StreamReader` class:

```
String path = @"C:\CSV.txt";
List<String> lines = new List<String>();

if (File.Exists(path));
{
    using (StreamReader reader = new StreamReader(path))
    {
        String line;

        while ((line = reader.ReadLine()) != null)
        {
            if (line.Contains(","))
            {
                String[] split = line.Split(',');

                if (split[1].Contains("34"))
                {
                    split[1] = "100";
                    line = String.Join(",", split);
                }
            }

            lines.Add(line);
        }
    }

    using (StreamWriter writer = new StreamWriter(path, false))
    {
        foreach (String line in lines)
            writer.WriteLine(line);
    }
} 
```

If you want to overwrite the file, use [this](http://msdn.microsoft.com/en-us/library/36b035cb.aspx) StreamWriter constructor with `append = false`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:32:10.133

也许像这样，你可能需要清理它并添加一些错误处理，但它可以完成工作

```
 string path = @"C:\\CSV.txt";

    string[] lines = File.ReadAllLines(path);
    for (int i = 0; i < lines.Length; i++)
    {
        string line = lines[i];
        if (line.Contains(","))
        {
            var split = line.Split(',');
            if (split[1].Contains("34"))
            {
                split[1] = "100";
                line = string.Join(",", split);
            }
        }
    }
    File.WriteAllLines(@"C:\\CSV.txt", lines); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-24T15:15:37.333

```
 string str;
        string PID;
        string PN;
        string UP;
        string DIS;
        string STK;
        string CSVFilePathName = @"C:\admin.csv";
        string[] Lines = File.ReadAllLines(CSVFilePathName);
        File.Delete(CSVFilePathName);
        StreamWriter sw = new StreamWriter(CSVFilePathName", true);

            PID = ((TextBox)(GridView1.Rows[e.RowIndex].Cells[0].Controls[0])).Text;
            PN = ((TextBox)(GridView1.Rows[e.RowIndex].Cells[1].Controls[0])).Text;
            UP = ((TextBox)(GridView1.Rows[e.RowIndex].Cells[2].Controls[0])).Text;
            DIS = ((TextBox)(GridView1.Rows[e.RowIndex].Cells[3].Controls[0])).Text;
            STK = ((TextBox)(GridView1.Rows[e.RowIndex].Cells[4].Controls[0])).Text;
        foreach (string li in Lines)
        {
            string[] Fields = li.Split(',');
            if(PID==Fields[0])
            {                                                                     
                str = PID + "," + PN + "," + UP + "," + DIS + "," + STK;                                 
            }
            else
            {
                str = Fields[0] + "," + Fields[1] + "," + Fields[2] + "," + Fields[3] + "," + Fields[4];                 
            }
            sw.WriteLine(str);
        }
        sw.Flush();
        sw.Close(); 
```

# ruby - 使文件在 Elastic MapReduce 上本地可用

> ID：14370760
> 
> 赞同：0
> 
> 时间：2013-01-17T01:21:00.303
> 
> 标签：ruby, hadoop, elastic-map-reduce

Hadoop 文档指出可以通过使用[`-file`选项](http://hadoop.apache.org/docs/stable/streaming.html#Packaging+Files+With+Job+Submissions)使文件在本地可用。

如何使用[Elastic MapReduce Ruby CLI](http://aws.amazon.com/developertools/2264)做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T00:17:59.163

您可以使用`DistributedCache`with EMR 来执行此操作。

对于 ruby​​ 客户端，这可以通过以下选项来完成：

```
`--cache <path_to_file_being_cached#name_in_current_working_dir>` 
```

它将单个文件放在`DistributedCache`. 它允许您指定文件的位置（s3n 或 hdfs），后跟其在应用程序的当前工作目录中引用的名称，并将文件本地放置在由`mapred.local.dir`（我认为）标识的目录上的任务节点上。

然后，您可以轻松访问`Mapper`/`Reducer`任务中的文件。我相信您可以像任何普通文件一样直接访问它，但您可能必须`DistributedCache.getLocalCacheFiles(job);`在`setup`任务方法中执行类似操作。

在 Ruby 客户端中执行此操作的示例取自 Amazon 的论坛：

```
./elastic-mapreduce --create --stream --input s3n://your_bucket/wordcount/input --output s3n://your_bucket/wordcount/output --mapper s3n://your_bucket/wordcount/wordSplitter.py --reducer aggregate --cache s3n://your_bucket/wordcount/stop-word-list#stop-word-list 
```

# android - 安卓版 Travis CI

> ID：14370763
> 
> 赞同：15
> 
> 时间：2013-01-17T01:21:07.470
> 
> 标签：android, travis-ci

尝试在我的 Android 项目中开始使用 Travis CI。首先，我使用 Android Bootstrap 设置了一个虚拟项目，并从 square 的 otto 项目中添加了一个 yml 文件 - 修改为具有我的用户名和 repo 名称。

我的构建失败并出现错误“ [/home/travis/build.sh: line 94: android: command not found](https://travis-ci.org/f2prateek/FoodBot)，即使[Square 的项目构建良好](https://travis-ci.org/square/otto)。

该错误似乎表明路径设置不正确，尽管我的 .travis.yml 中有这些行

*   导出 ANDROID_HOME=~/builds/f2prateek/FoodBot/android-sdk-linux
*   导出 PATH=${PATH}:${ANDROID_HOME}/tools:${ANDROID_HOME}/platform-tools

我还需要设置其他东西才能做到这一点吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-06T09:20:23.293

**2014/05 更新**：Travis CI 现在正式支持 Android。

[http://docs.travis-ci.com/user/languages/android/](http://docs.travis-ci.com/user/languages/android/)

不再需要以下解决方法，除非您想在非 Android VM 上使用它。

* * *

这个问题很可能与 Travis CI 切换到 64 位虚拟机有关。您需要为 Android 安装 ia32-libs 才能在 64 位环境中运行。目前可以通过以下方式实现：

```
sudo apt-get install -qq --force-yes libgd2-xpm ia32-libs ia32-libs-multiarch 
```

我写了一篇关于在 Travis 上运行 Android 构建的博客文章，其中涵盖了这一点以及其他细节：[http ://rkistner.github.com/android/2013/02/05/android-builds-on-travis-ci/](http://rkistner.github.com/android/2013/02/05/android-builds-on-travis-ci/)

Travis 未来可能会支持 Android 特定的虚拟机，这将简化配置。[请关注关于问题 #56](https://github.com/travis-ci/travis-worker/issues/56)的对话，以获取有关此问题的更新以及有关 Android 特定 VM 的讨论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-01T22:26:54.457

这个回复涵盖了 Travis 自动测试。有关完整版本，请参阅[Medium 文章](https://medium.com/@zurfyx/android-travis-ci-with-autodeploy-api-26-efb6c1863628)：自动测试和部署。

* * *

# 特拉维斯 CI (@ API 26+)

显然，从 API 24 开始，设置模拟器对 Travis 来说是一种痛苦是一种痛苦[[1]](https://github.com/travis-ci/travis-ci/issues/7425) [[2]](https://github.com/travis-ci/travis-ci/issues/8188) [[3]](https://github.com/bitrise-steplib/steps-create-android-emulator/issues/13) [[4]](https://github.com/OneBusAway/onebusaway-android/issues/228)。

*[肖恩·巴博（ Sean Barbeau](https://stackoverflow.com/users/937715/sean-barbeau)）在这方面的研究时间比我长得多，他[几乎认为无法](https://github.com/OneBusAway/onebusaway-android/commit/03e262d2ca17e2b4ea654640b38d9719bb8e9a3d)效仿。*

但是**API 26+**有一个更有效且更简单的替代方案，它使用`gradlew`而不是`adb emulator`. 它[似乎有一些限制](https://developer.android.com/studio/test/command-line.html#RunTestsDevice)，但它应该工作。[归功于](https://github.com/pockethub/PocketHub)PocketHub 。

```
sudo: required

language: android
jdk: oraclejdk8

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -rf $HOME/.gradle/caches/*/plugin-resolution/

cache:
  directories:
  - $HOME/.gradle/caches/
  - $HOME/.gradle/wrapper/
  - $HOME/.android/build-cache

env:
 global:
 - ANDROID_API=26
 - ANDROID_BUILD_TOOLS=26.0.2

android:
  components:
  - tools
  - tools # Running this twice get's the latest build tools (https://github.com/codepath/android_guides/wiki/Setting-up-Travis-CI)
  - platform-tools
  - android-${ANDROID_API}
  - build-tools-${ANDROID_BUILD_TOOLS}
  - extra

script:
- ./gradlew clean test build 
```

**您可能必须适应**项目的环境变量：

一些信息应该在`build.gradle`或`AndroidStudio -> Settings -> Android SDK -> SDK Tools`

（如果您正在使用更新的 AndroidStudio 构建新项目，您应该在以下链接中选择最新版本）

**ANDROID_API**：[https ://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels](https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels)

**ANDROID_BUILD_TOOLS**：[https ://developer.android.com/studio/releases/build-tools.html](https://developer.android.com/studio/releases/build-tools.html)

[示例 .travis.yml 设置](https://github.com/zurfyx/travis-android)（自动部署到 GitHub 版本）。

# css - 绝对 vs 相对 CSS 块/内联

> ID：14370774
> 
> 赞同：-2
> 
> 时间：2013-01-17T01:22:39.737
> 
> 标签：css

我一直在尝试解决这个问题几个小时，使用 Chrome 检查器但没有运气。我可能错过了一些简单的东西。

看看这个页面： http: [//newslines.org/wiki/category/computer-people/aaron-swartz/](http://newslines.org/wiki/category/computer-people/aaron-swartz/)

请检查评论链接的位置（看起来像每个帖子右侧的对话气泡）

我从另一个站点获取了评论链接，但是在该站点上，该框使用了 position:absolute。我已经尝试了很多变化，但我不能绝对工作，它只适用于我使用相对定位。但是，这会导致帖子标题和正文之间的间距问题，如果您查看“2012 年 9 月 16 日”的条目，您会发现评论气泡低于应有的水平。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:57:22.270

试试这个：

```
.container .comments {
    background: -moz-linear-gradient(center top , #6FB1F0 0%, #589CDC 100%) repeat scroll 0 0 transparent;
    border: 1px solid #4A8ECF;
    border-radius: 3px 3px 3px 3px;
    float: left;
    height: 25px;
    position: relative;
    right: -20px;
    top: 20px;
    width: 34px;
}

.archive-layout .post .title {
    float: left;
    font-size: 22px;
    width: 650px;
} 
```

# javascript - JQPlot 标签渲染器

> ID：14370775
> 
> 赞同：0
> 
> 时间：2013-01-17T01:22:43.090
> 
> 标签：javascript, label, rendering, vertical-alignment, jqplot

我可以帮助在 YAxis 上显示文本以在 JQPlot 中垂直显示吗？这是我当前的代码：

```
 {
                    label: 'Rating',
                    labelRenderer: $.jqplot.CanvasAxisLabelRenderer
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:06:20.900

导入标签渲染器需要的这两个脚本

```
 <script type="text/javascript" src="../src/plugins/jqplot.canvasTextRenderer.min.js"></script>

    <script type="text/javascript" src="../src/plugins/jqplot.canvasAxisLabelRenderer.min.js"></script> 
```

# ios - 最好的 iOS 软件设计流程是什么？

> ID：14370778
> 
> 赞同：-3
> 
> 时间：2013-01-17T01:22:44.430
> 
> 标签：ios, objective-c, cocoa-touch

我是 iOS 初学者，感觉很难开始一个项目。

**什么是最好的 iOS 软件设计流程？**

多少步？如何写出好的规范文档？如何缩短设计时间？...

请指导！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:54:45.420

在 iTunes 上观看 Paul Hegarty 的课程。[https://itunes.apple.com/us/itunes-u/ipad-iphone-application-development/id473757255](https://itunes.apple.com/us/itunes-u/ipad-iphone-application-development/id473757255)

# jquery - JQuery Cycle Plugin 意外恢复

> ID：14370779
> 
> 赞同：0
> 
> 时间：2013-01-17T01:22:47.693
> 
> 标签：jquery, youtube, cycle

我正在寻找包含 YouTube 视频的幻灯片中的幻灯片。它应该：

*   鼠标悬停暂停
*   播放 YouTube 视频时暂停
*   包含分页

我为幻灯片使用了 JQuery Cycle Plugin。 [http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

并使用了 YouTube 的 iframe API [https://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

幻灯片暂停和恢复正确播放/暂停视频；但是，如果您将鼠标移出视频幻灯片，它将恢复。

有没有办法使用 JQuery Cycle Plugin 来防止这种情况发生？

谢谢。

```
<!-- added to example from http://jquery.malsup.com/cycle/ -->

<html>
<head>
<title>JQuery Cycle Plugin - with YouTube</title>

<style type="text/css">
.slideshow { height: 232px; width: 232px; margin: auto }
.slideshow img { padding: 15px; border: 1px solid #ccc; background-color: #eee; }
/* slideshow pagination */
#nav_slideshow { width: 232px; margin: auto }
#nav_slideshow a { border: 1px solid #ccc; background: #fc0; text-decoration: none; margin: 0 5px; padding: 3px 5px;  }
#nav_slideshow a.activeSlide { background: #ea0 }
#nav_slideshow a:focus { outline: none; }
</style>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>
    <script type="text/javascript">

      var theslideshow;
      $(document).ready(function() {
        theslideshow = $(".slideshow")
            .before('<div id="nav_slideshow">')
            .cycle({
                fx: 'fade',
                pause: true,  // pause on mouseover - will still fire resume 
                              // after cycle('pause') is called to play video 
                              // then if user leaves YouTube's iframe it resumes slideshow
                timeout: 2500,
                speed: 2500,
                sync: 1,
                pager:  '#nav_slideshow'
            });
      }); 

      // Access YouTube's APIs
      // https://developers.google.com/youtube/iframe_api_reference
      var tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      var player;
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          events: {
            'onStateChange': onPlayerStateChange
          }
        });
      }

      // pause slide show when youtube video is playing <-- not working yet!
      // mouseout event triggers resume in Cycle's pause on mouseover
      function onPlayerStateChange(event){
        console.log(event.data);
        if(event.data == '1') {
            theslideshow.cycle('pause');
        } else if((event.data == '0') || (event.data == '2')) {
            theslideshow.cycle('resume');
        }
      }

    </script>
    </head>
    <body>
        <div class="slideshow">
            <img src="http://cloud.github.com/downloads/malsup/cycle/beach1.jpg" width="200" height="200" />
            <img src="http://cloud.github.com/downloads/malsup/cycle/beach2.jpg" width="200" height="200" />
            <img src="http://cloud.github.com/downloads/malsup/cycle/beach3.jpg" width="200" height="200" />
            <img src="http://cloud.github.com/downloads/malsup/cycle/beach4.jpg" width="200" height="200" />
            <img src="http://cloud.github.com/downloads/malsup/cycle/beach5.jpg" width="200" height="200" />
            <iframe id="player" width="560" height="315" src="http://www.youtube.com/embed/7CGQzQuH4X4?enablejsapi=1" frameborder="0" allowfullscreen></iframe>
        </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:44:11.757

不是解决确切问题的方法 - 而是一个简单的替代方案。

由于您使用循环 - 升级到 cycle2 - [http://jquery.malsup.com/cycle2/](http://jquery.malsup.com/cycle2/) - youtube 视频已经有一个 cycle2 扩展（检查下载部分）。

您可以使用 90% 的代码，因为语法基本相同 - 除了一些新选项（并且很少有重命名）。

# c++ - 菜鸟的快速 g++ 错误诊断

> ID：14370785
> 
> 赞同：0
> 
> 时间：2013-01-17T01:23:18.660
> 
> 标签：c++, compilation, g++

有人能告诉我如何修复 g++ 给我的这个短程序或其他任何可怕的编译错误。我是菜鸟。谢谢。我知道他们中的大多数是因为我不知道我在做什么。

```
#include <iostream>
#include <fstream>
#include <string>
#include <vector>
using namespace std;

int main (int argc, char* argv[])
{   
    struct RGB {
        float r;
        float g;
        float b;
    };

    int w = atoi(argv[1]);
    int h = atoi(argv[2]);

    vector<vector RGB > image;
    image.resize(w);
    for (int q = 0; q < w; ++q)
    image[q].resize(h);

    for (int i = 0; i < w; ++i){
        for (int j = 0; j < h; ++j){
            float col = float (((i & 0x08) == 0) ^ ((j & 0x08) == 0));
            image[i][j].r = col;
            image[i][j].g = col;
            image[i][j].b = col;
        }
    }

    string filename = string(argv[3]) + ".ppm";
    ofstream file(filename);
    file << "P3" << endl;
    file << w << " " << h << endl;
    file << "255" << endl;
    for (int i = 0; i < h; ++i){
        for (int j = 0; j < w; ++j){
            float col = float (((i & 0x08) == 0) ^ ((j & 0x08) == 0));
            file << image[i][j].r*255 << " ";
            file << image[i][j].g*255 << " ";
            file << image[i][j].b*255 << " ";
        }
        file << endl;
    }
    file.close();

    return 0;
} 
```

错误：

```
hw1.cpp: In function ‘int main(int, char**)’:
hw1.cpp:24: error: template argument for ‘template<class _Alloc> class std::allocator’ uses local type ‘main(int, char**)::RGB’
hw1.cpp:24: error:   trying to instantiate ‘template<class _Alloc> class std::allocator’
hw1.cpp:24: error: template argument 2 is invalid
hw1.cpp:24: error: template argument 1 is invalid
hw1.cpp:24: error: template argument 2 is invalid
hw1.cpp:24: error: invalid type in declaration before ‘;’ token
hw1.cpp:25: error: request for member ‘resize’ in ‘image’, which is of non-class type ‘int’
hw1.cpp:27: error: invalid types ‘int[int]’ for array subscript
hw1.cpp:32: error: invalid types ‘int[int]’ for array subscript
hw1.cpp:33: error: invalid types ‘int[int]’ for array subscript
hw1.cpp:34: error: invalid types ‘int[int]’ for array subscript
hw1.cpp:39: error: no matching function for call to ‘std::basic_ofstream<char, std::char_traits<char> >::basic_ofstream(std::string&)’
/usr/include/c++/4.2.1/fstream:596: note: candidates are: std::basic_ofstream<_CharT, _Traits>::basic_ofstream(const char*, std::_Ios_Openmode) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.2.1/fstream:580: note:                 std::basic_ofstream<_CharT, _Traits>::basic_ofstream() [with _CharT = char, _Traits = std::char_traits<char>]
/usr/include/c++/4.2.1/iosfwd:92: note:                 std::basic_ofstream<char, std::char_traits<char> >::basic_ofstream(const std::basic_ofstream<char, std::char_traits<char> >&)
hw1.cpp:46: error: invalid types ‘int[int]’ for array subscript
hw1.cpp:47: error: invalid types ‘int[int]’ for array subscript
hw1.cpp:48: error: invalid types ‘int[int]’ for array subscript 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T01:29:11.927

看起来您正在尝试声明 a `vector`of `vector`s of `RGB`s。您缺少一对括号：

```
vector<vector<RGB> > image; 
```

此外，您应该在函数`struct RGB`之外声明。`main`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:34:44.267

1.  搬出`struct RGB`主线。您不能在本地声明的类型上进行模板化。

2.  向量的向量应声明为：

    ```
    vector< vector<RGB> > 
    ```

3.  `ofstream`构造函数不将`string`对象作为参数。改用这个：

    ```
    ofstream file(filename.c_str()); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T01:40:20.717

这段代码有很多问题。我将带您完成最初的几个步骤，希望这会给您一个想法。

我们得到的第一个编译器错误是：

```
15: error: ‘atoi’ was not declared in this scope 
```

atoi 是一个库函数，所以我们需要包含正确的库。“atoi header”的快速谷歌告诉我们这是cstdlib。在顶部，我们添加：

```
#include<cstdlib> 
```

我们看到的下一个错误是：

```
18: error: template argument 1 is invalid 
```

第 18 行是：

```
vector<vector RGB > image; 
```

声明集合的语法是：

```
collection_type<type_the_collection_is_of> varname; 
```

根据您是想要像素向量还是像素向量向量，这是以下之一：

```
vector<RGB> image;
vector< vector<RGB> > image; 
```

作为一般规则，如果编译器对变量声明感到困惑，它就会对稍后使用该变量时发生的事情感到困惑。所以让我们重新编译。

糟糕，它仍然对声明不满意：21：错误：'template class std::allocator' 的模板参数使用本地类型'main(int, char**)::RGB'</p>

“本地类型”。这是一个奇怪的短语。哦。结构在函数*内部*定义。我根本不知道这是允许的。不过，对我们来说似乎不太好用，所以让我们把它移到外面再编译一次……

这还不是全部，但我希望我已经让您了解了如何调试这类事情。

# css - Ajax 正在分层引导按钮

> ID：14370789
> 
> 赞同：0
> 
> 时间：2013-01-17T01:23:50.497
> 
> 标签：css, ruby-on-rails, ajax, twitter-bootstrap

我使用 ajax 来切换“喜欢”按钮而不刷新页面。出于某种原因，当我单击按钮时，在按钮的背景中似乎有几层更大的按钮。我不知道它们为什么要分层或为什么它们会更大。

问题在于我正在使用的引导类。它导致它通过 btn 调用 btn。当我删除类时，链接会正确重新呈现。因此，我尝试在 CSS 中重新设置 link_to 的样式，使其看起来像 btn，但是出现了同样的问题。

这是按钮通常的外观：

![在此处输入图像描述](../Images/212f92c7ec2f4bd793742f2543dd66cb.png)

点击后：

![在此处输入图像描述](../Images/92e7b50610888a41ae95d7ceb22a7c64.png)

![在此处输入图像描述](../Images/2cfabd50e7bd27ab2a320184dc2da0d3.png)

微贴/助手：

```
def toggle_like_button(micropost, user)
  if user.voted_for?(micropost)
    link_to "undo", like_micropost_path(micropost), :class => "btn btn-mini btn-primary", :id =>"unvote_form_#{micropost.id}", :remote => true
  else
    link_to "Into it!", like_micropost_path(micropost), :class => "btn btn-mini btn-primary", :id =>"vote_form_#{micropost.id}", :remote => true
  end
end 
```

微博/like.js.erb：

```
$("#vote_form_<%=@micropost.id%>").html("<%= escape_javascript(toggle_like_button(@micropost, @current_user)) %>")
$("#unvote_form_<%=@micropost.id%>").html("<%= escape_javascript(toggle_like_button(@micropost, @current_user)) %>") 
```

微柱控制器：

```
def like
  @micropost = Micropost.find(params[:id])
  @feed_item = Micropost.find(params[:id])
  if @micropost.user_id != @current_user.id
    if @current_user.voted_for?(@micropost)
      @current_user.unvote_for(@micropost)
      respond_to do |format|
        format.html { redirect_to :back }
        format.js
      end
    else
      @current_user.vote_for(@micropost)
      respond_to do |format|
        format.html { redirect_to :back }
        format.js
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:17:27.690

`html(htmlString)`设置选定元素的内容。您选择的元素是按钮。改为使用`replaceWith(newContent)`。

# ruby - 使用正则表达式查找字符串，然后使用正则表达式查找新字符串以替换它

> ID：14370790
> 
> 赞同：1
> 
> 时间：2013-01-17T01:24:25.550
> 
> 标签：ruby, regex, google-maps, nokogiri, kml

我使用 BatchGeo 从电子表格创建地图，然后下载 KML 数据，即：

```
<Placemark>
  <name>?</name>
    <Snippet></Snippet>
    <description><![CDATA[]]></description>
    <styleUrl>#style75</styleUrl>
    <address>1234 Example St Denver, CO 80221</address>
    <Point>
      <coordinates>-121.879364,37.815151,0.000000</coordinates>
    </Point>
</Placemark> 
```

当重新导入谷歌地图时，这些点被放置在正确的地址/坐标上，但左侧边栏上每个引脚旁边的名称/描述符只显示“？” 而不是显示地址。

我想使用正则表达式查找每个`"<name>?</name>"`，然后使用正则表达式查找文件中的 NEXT 实例`<address>.*</address>`，然后返回并将标签之间的 替换为`?`标签`<name>`之间`*`的`<address>`。

每个点的标签之间都有一段代码`<Placemark>`，总共有数百个点。

以下是我到目前为止的点点滴滴：

```
newkml = File.open( 'Newkml.txt', 'w' )

def process_line(x)
  unless x == "<name>?</name>"
    # just return the original line
  else
    # Find the next instance of /<address>(.*)<\/address>/
    # Go to the original line
    # Replace it with "<name>#{$1}</name>"
  end
end

File.foreach('Whatever.kml'){|line|} do line.process_line
# Make a new file, copy over all of the lines that aren't <name>?</name>,
# and fix the name lines using the method above 
```

更新：在原始服务 (BatchGeo) 中，有一个选项可以设置哪些信息包含在哪些 KML(XML) 标签中，因此我创建了一个新地图并首先防止了问题的发生。感谢那些向我推荐我将来可以用于此类操作的工具的人。

更新 2：尝试 Mark Thomas 的解决方案。这是我运行的代码：

```
require 'rubygems'
require 'nokogiri'

doc = Nokogiri::XML("whatever.xml")

edits = 0

doc.xpath("//name").each do |name|
  if name.content == "?"
    name.content = name.xpath("following-sibling::address").text
    edits +=1
  end
end

puts( doc.inspect )
puts( "edits: #{edits}" )
puts doc 
```

这给了我以下输出：

```
#<Nokogiri::XML::Document:0xfe0064 name="document>
edits: 0
<?xml version="1.0"?> 
```

如果`edits`我添加的测试代码按我认为的那样工作，它似乎表明该`if name.content == "?"`块执行了 0 次（比我预期的少了大约 130 次）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T04:22:57.777

已经为您完成了几乎任何语言的解析/生成 KML 文件的工作。我怀疑这个对你有用：[https ://github.com/schleyfox/ruby_kml](https://github.com/schleyfox/ruby_kml)

**更新**

由于没有实际使用过上述库，我想确认一下我的建议 - 看起来所有帮助函数都可用于创建 KML 文件，但仍需要您使用 XML 解析器来加载一个。我仍然建议这比仅使用建议的 XML 解析器操作 KML 更好（尽管这肯定也可以正常工作），但您可能还想查看[http://georuby.rubyforge.org/georuby-doc /index.html](http://georuby.rubyforge.org/georuby-doc/index.html)支持 KML 输入和输出。

**更新 2** - 为后代添加。

在我的回答中多加考虑，我对此类问题的默认建议是：

1.  将 KML 解析为对象
2.  纠正错误
3.  重新生成 KML

我的理由是这*应该*不太容易破坏输出，如果您最终开始对 KML 进行更多操作，那么您已经完成了 90% 的工作。

所有这一切都说，在您的具体情况下，仅对已知数据进行您识别的更改，@Mark Thomas 的方法将提供更快且代码开销更低的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T03:01:39.913

我建议改用 XML 解析器。这是一些示例 Nokogiri 代码：

```
doc = Nokogiri::XML(kml)

doc.xpath("//name").each do |name|
  if name.content == "?"
    name.content = name.xpath("following-sibling::address").text
  end
end 
```

* * *

**更新**

根据您的更新，您的 XML 文件的解析似乎出了点问题——您确定它有效吗？

这是一个完整的工作示例：

```
require 'nokogiri'

xml = <<End
<Placemark>
  <name>?</name>
    <Snippet></Snippet>
    <description><![CDATA[]]></description>
    <styleUrl>#style75</styleUrl>
    <address>1234 Example St Denver, CO 80221</address>
    <Point>
      <coordinates>-121.879364,37.815151,0.000000</coordinates>
    </Point>
</Placemark>

End

doc = Nokogiri::XML(xml)

doc.xpath("//name").each do |name|
  if name.content == "?"
    name.content = name.xpath("following-sibling::address").text
  end
end

puts doc 
```

输出：

```
<?xml version="1.0"?>
<Placemark>
  <name>1234 Example St Denver, CO 80221</name>
    <Snippet/>
    <description/>
    <styleUrl>#style75</styleUrl>
    <address>1234 Example St Denver, CO 80221</address>
    <Point>
      <coordinates>-121.879364,37.815151,0.000000</coordinates>
    </Point>
</Placemark> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T02:50:01.653

让我们尝试使用它：

```
require 'nokogiri'

doc = Nokogiri::XML::DocumentFragment.parse(<<EOT)
<Placemark>
  <name>?</name>
  <Snippet></Snippet>
  <description><![CDATA[]]></description>
  <styleUrl>#style75</styleUrl>
  <address>1234 Example St Denver, CO 80221</address>
  <Point>
    <coordinates>-121.879364,37.815151,0.000000</coordinates>
  </Point>
</Placemark>
EOT

doc.search('Placemark').each do |placemark|
  name = placemark.at('name')
  address = placemark.at('address')
  name.content = address.text
end

puts doc.to_xml 
```

哪个输出：

```
<Placemark>
  <name>1234 Example St Denver, CO 80221</name>
  <Snippet/>
  <description><![CDATA[]]></description>
  <styleUrl>#style75</styleUrl>
  <address>1234 Example St Denver, CO 80221</address>
  <Point>
    <coordinates>-121.879364,37.815151,0.000000</coordinates>
  </Point>
</Placemark> 
```

我使用文档片段来避免添加无关内容。通常，您希望使用法线`Nokogiri::XML`来解析文档。

我假设您有多个`<Placemark>`标签，它们`search`将迭代并返回一个 NodeSet。

# ruby-on-rails - 同一张表的Rails外键

> ID：14370797
> 
> 赞同：4
> 
> 时间：2013-01-17T01:25:10.163
> 
> 标签：ruby-on-rails

我有一个包含工单的 Rails 应用程序。我将从另一个系统加载工单。该系统对父子工单使用单个表。

我在工作订单表中添加了一个名为 parent_id 的字段

这是 Workorder 模型中的正确编码吗？

```
 class ParentWorkorder
   belongs_to :parent, class_name => "Workorder"
   belongs_to :child, class_name =>  "Workorder", :foreign_key => "parent_id"
 end 
```

或者您会建议不要这样做 - 而是创建一个子工单表？我认为这可能会使与其他系统的集成变得更加困难。

任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T01:56:40.853

您也可以使用 Rails 在单个表中执行此操作，并且为此使用单个模型。我不明白为什么您需要`ParentWorkorder`像您所做的那样使用额外的模型使您的应用程序复杂化。我会改为执行以下操作：

```
class Workorder < ActiveRecord::Base
  belongs_to :parent, :class_name => "Workorder", :foreign_key => "parent_id"
  has_many :children, :class_name => "Workorder", :foreign_key => "parent_id"
end 
```

我很确定这将为您提供所需的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:31:09.043

我会将孩子作为 has_one 或 has_many（如果父母可以拥有多个）。但是，是的，这很好用。

您可能希望养成尽可能使用符号而不是字符串的习惯。

# sql - 需要许可系统的 SQL 解决方案

> ID：14370798
> 
> 赞同：2
> 
> 时间：2013-01-17T01:25:13.753
> 
> 标签：sql, sql-server, sql-server-2008-r2

开发中的项目是具有以下订阅级别的业务目录：白金、黄金、白银和青铜

我有 3 张桌子与此任务有关。我将把重要的列放在括号中。

BD_Listing（ListingID、LevelID、Active）

*   列表ID、INT、PK
*   LevelID，INT 4=青铜，5=银，6=金，7=铂
*   活跃，比特

BD_ListingOwner（用户 ID、列表 ID）

*   UserID（这是经过身份验证的用户的 UserID）
*   ListingID（当初始列表创建时，他们的 UserID 和 ListingID 被输入到这个表中。

BD_Storefront（RecurringSubscriptionID、数量、VariantID、状态）

*   RecurringSubscriptionID PK
*   数量（例如，如果他们选择金牌，他们可以为该级别选择多个许可证）
*   VariantID（这些与 BD_Listing 表略有不同。1=青铜，2=白银，3=黄金，4=白金）
*   状态（真或假）

购买后，用户会被带到一个页面，在那里他们可以开始创建他们的列表。该页面上有一个看起来像表格的模块：

**Level---------Active/Remaining----------动作**

白金版--------1/0-----------------购买附加许可证

黄金-----------0/2------------------创建黄金上市

银牌----------0/0------------------购买附加许可证

青铜--------0/0------------------购买附加许可证

所以基本上，我需要了解执行以下操作的正确 SQL 查询：

1.  检查 BD_Storefront 表以​​查看有多少活动列表附加到登录人员的@passedUserID，并了解他们拥有的白金、黄金、白银和青铜的可用数量。
2.  检查 BD_ListingOwner 表以获取附加到 @passedUserID 的列表数量
3.  检查与 BD_ListingOwner 表相关的 BD_Listing 表以查看 LevelID 以了解实际创建了哪些级别类型，请记住这些整数与 BD_Storefront 表中的整数略有不同。

我需要确保获得每种类型的总数量，记住 John 可能在一个订单中购买 2 个黄金，在 BD_Storefront 表中显示 Quantity 2，一个月后可能会购买另一个黄金，在表中创建另一行数量为 1，总共给他 3 个许可证。

这是我到目前为止提出的 SQL：

```
SELECT
 a.[RecurringSalesOrderID]
,a.[UserID]
,a.[PortalID]
,a.[ProductVariantID]
,a.[Quantity]
,a.[NextRecurringDate]
,a.[Status]
,a.[OriginalSalesOrderID]
,a.[CreateDate]
,a.[UpdateDate]
,b.[UserID]
,b.[ListingID] AS OwnerListingID
,c.[ListingID] AS ListingListingID
,c.[LevelID]
,(SELECT SUM(Quantity) FROM BD_Storefront WHERE (UserID = @passedUserID) AND (ProductVariantID = 1) AND (Status = 1)) AS ActiveBronze
,(SELECT SUM(Quantity) FROM BD_Storefront WHERE (UserID = @passedUserID) AND (ProductVariantID = 2) AND (Status = 1)) AS ActiveSilver
,(SELECT SUM(Quantity) FROM BD_Storefront WHERE (UserID = @passedUserID) AND (ProductVariantID = 3) AND (Status = 1)) AS ActiveGold
,(SELECT SUM(Quantity) FROM BD_Storefront WHERE (UserID = @passedUserID) AND (ProductVariantID = 4) AND (Status = 1)) AS ActivePlatinum
,(SELECT COUNT(ListingID) FROM BD_ListingOwner WHERE (UserID = @passedUserID)

FROM [BD_Storefront] a
JOIN [BD_ListingOwner] b
ON a.[UserID] = b.[UserID]
JOIN [BD_Listing] c
ON b.[ListingID] = c.[ListingID]
WHERE a.[UserID] = @passedUserID
AND Status = 1 
```

如您所见，我不太确定如何分析 BD_Listing 表以了解特定用户已创建的每种类型的列表数量，并从上面的每个 SUMS 中减去该数量以获得允许的剩余数量。

如果有人可以帮助我，那将是非常棒的。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:19:55.900

你的问题并不完全清楚，但这是你要找的吗？

```
SELECT lsum.UserID
      ,lsum.LevelID
      ,SUM(ISNULL(sf.Quantity,0)) Active
      ,lsum.ListingTotal-SUM(ISNULL(sf.Quantity,0)) Remaining
FROM
    (SELECT  lo.UserID
            ,l.LevelID-3 LevelID
            ,COUNT(l.Active) ListingTotal
     FROM [BD_Listing] l 
         INNER JOIN
         [BD_ListingOwner] lo ON lo.[ListingID] = l.[ListingID]
     WHERE l.Active=1
     GROUP BY lo.UserID
            ,l.LevelID) lsum
     LEFT JOIN 
     [BD_Storefront] sf ON sf.[UserID] = lsum.[UserID]
                           AND
                           sf.VariantID=lsum.LevelID
                           AND sf.Status = 1
GROUP BY lsum.UserID
         ,lsum.LevelID
         ,lsum.ListingTotal 
```

请看这个[SqlFiddle](http://sqlfiddle.com/#!3/09971/1)

# php - Yii 多语言网站，内容来自数据库

> ID：14370799
> 
> 赞同：1
> 
> 时间：2013-01-17T01:25:20.793
> 
> 标签：php, web, yii, multilingual

我是 Yii 框架的新手。尝试构建多语言 Yii 应用程序。我认为向每个想要构建多语言项目的 Yii 初学者提供有关我所做的事情的信息很有用。这是我所做的：

1.  [根据这篇文章](http://www.yiiframework.com/wiki/294/seo-conform-multilingual-urls-language-selector-widget-i18n/)，我启用了我的应用程序的多语言支持
2.  建立常用词和导航项的翻译数据库（[基于本文](http://www.yiiframework.com/doc/api/1.1/CDbMessageSource)）

3.  现在我想不通的最后一件事是，假设我们有多种语言的页面。每个页面都有标题，内容为en，ru，it...如何从数据库中获取多语言内容并根据当前语言显示正确的内容？

经过一番研究，我发现了如何在 YII 应用程序中从数据库中获取内容的[教程。](http://www.yiiframework.com/wiki/403/how-to-display-static-pages-in-yii-with-database-content/)但是没有多语言支持。

提前感谢您浪费您的时间并试图帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:19:24.093

我认为最简单的方法是使用语言为每个表设置一个前缀，并让您的模型采用 Yii::app()->language 参数来定义您的表。当然，仅对包含要翻译的内容的表格执行此操作。

第二种方法是加载所有内容并根据语言在控制器中过滤掉所需的内容，但这会在控制器中产生数据开销。

# c# - Devexpress XtraChart 默认排序系列

> ID：14370802
> 
> 赞同：0
> 
> 时间：2013-01-17T01:25:50.010
> 
> 标签：c#, winforms, charts, devexpress

我有一个 Devexpress XtraChart（条形图），它显示了月份和年份范围内的性别信息。以下是我设置一些属性的方法：

```
DataTable chartTable = new DataTable("Table1");

chartTable.Columns.Add("Gender");
chartTable.Columns.Add("MonthYear");

chartTable.Columns.Add("Value", typeof(Int32));

foreach (var p in chart.getChartData())
{
    chartTable.Rows.Add(new object[] { p.Gender, p.MonthYear, p.Value });
}

// chartByGender is the name of the XtraChart control   
chartByGender.DataSource = chartTable;
chartByGender.SeriesDataMember = "gender";
chartByGender.SeriesTemplate.ArgumentDataMember = "MonthYear";
chartByGender.SeriesTemplate.ValueDataMembers.AddRange(new string[] { "value" });

chartByGender.SeriesSorting = SortingMode.None;
chartByGender.SeriesTemplate.SeriesPointsSorting = SortingMode.None; 
```

但是，当图表显示时，它不会按照可用的顺序显示数据`chartTable`。而是对它们进行排序，我真的不希望它这样做。我应该更改哪些属性，以便系列可以与`chartTable`'s order 中的相同？

有没有办法强制控件不对数据元素进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:16:22.033

查看此 DevExpress 图表演示： [链接](http://demos.devexpress.com/XtraChartsDemos/DataBinding/SeriesBinding.aspx)

它有一些图表的排序选项，也许它可以帮助您解决问题。

# git - 在我自己的本地存储库中托管在 github 上的跟踪库？

> ID：14370803
> 
> 赞同：1
> 
> 时间：2013-01-17T01:25:52.447
> 
> 标签：git, version-control, github

我有一个项目，我在本地使用 git 来管理我的源代码。我想在我的应用程序中使用 github 上的一个开源库，但我想确保如果公共 github 存储库有更改，我可以轻松地将它们与我的代码集成。最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T01:28:34.063

使用 git 子模块。它允许您跟踪遥控器，但也允许您将代码版本绑定到遥控器版本。它们使用起来并不简单，因此请阅读 git submodule {add,init,update}

# javascript - 将元素附加到每个 x 的元素？

> ID：14370806
> 
> 赞同：1
> 
> 时间：2013-01-17T01:26:05.020
> 
> 标签：javascript, jquery

我`<td>`使用以下代码创建了具有各种内容的各种标签：

```
for (var i = 0 - dOW; i < dIM; i++) {
    var day = i + 1;
    if (day > 0) {
        if (day === d) {
            $("#calendar").append("<td>[" + day + "]</td>");
        } else {
            $("#calendar").append("<td>" + day + "</td>");
        }
    } else {
        $("#calendar").append("<td>s</td>");
    }
} 
```

结果：

> ss 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 [16] 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31

有没有办法将每 7 个元素包装在一个`<tr>`标签中，这样 HTML 将是：

```
<tr>
  <td>s</td>
  <td>s</td>
  <td>1</td>
  <td>2</td>
  <td>3</td>
  <td>4</td>
  <td>5</td>
</tr>
... 
```

完整代码：

```
function calendar(d){   
    var t = new Date(d);                        // Today [Wed Jan 16 2013 00:00:00 GMT-0500 (EST)]
    var d = t.getDate();                        // Today's date (1-31) [16]
    var y = t.getFullYear();                    // Full year [2013]
    var m = t.getMonth();                       // Month (0-11) [0]
    var mN = [                                  // Month name array (0-11)
                "January", 
                "February", 
                "March",
                "April",
                "May",
                "June",
                "July",
                "August",
                "September",
                "October",
                "November",
                "December"
              ];
    var fM = mN[m];                             // Full month name [January]
    var dIM = new Date(y, m + 1, 0).getDate();  // Number of days in current month (1-31) [31]
    var dOW = new Date(y, m, 1).getDay();       // Day of the first day of the month (0-6) [2]
    var nOW = Math.ceil((dIM + dOW) / 7);       // Number of weeks in the month, including space [5]

            for (var i = 0 - dOW; i < dIM; i++){
                var day = i + 1;
                if (day > 0){
                    if (day === d){
                        $("#calendar").append("<td>[" + day + "]</td>");
                    } else {
                        $("#calendar").append("<td>" + day + "</td>");
                    }
                } else {
                    $("#calendar").append("<td>s</td>");
                }
            }

    }

// "1 March 2013"
calendar(new Date()); 
```

到目前为止，我已经尝试将它分成两个`for`循环，一个设置为行数，另一个设置为列，但这不允许我使用`if`允许我放入间隔 div 的语句：

```
 if (day === d) {
        $("#calendar").append("<td>[" + day + "]</td>");
    } else {
        $("#calendar").append("<td>" + day + "</td>");
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T01:32:03.427

与其`<tr>`在创建所有 s 后创建`<td>`s，我可以建议同时做这两个吗？

```
var count = 0, $row;

for (var i = 0 - dOW; i < dIM; i++) {
    var day = i + 1;
    if (count % 7 === 0) {
        $row = $('<tr />').appendTo('#calendar');
    }
    if (day > 0) {
        if (day === d) {
            $row.append("<td>[" + day + "]</td>");
        } else {
            $row.append("<td>" + day + "</td>");
        }
    } else {
        $row.append("<td>s</td>");
    }
    count++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:35:46.110

使用嵌套的 for 循环。

```
var dynamicTable= '<table cellspacing="10"';
for (i = 0; i < 10; i ++)
{
  dynamicTable+= "<tr>";
  var row = i;
  row += 1;
  for (j = 0; j < 10; j++)
  {
      var col = j;
      col += 1;
      dynamicTable += '<td>';
               dynamicTable += "x";// cell text
      dynamicTable += '</td>';
  }
  dynamicTable += '</tr>';
}
dynamicTable+= '</table>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T01:35:32.810

这是一个代码：

```
var arr=$("#calendar").val();
var htmlCode="";
int length=arr.length;
for(var i=0;i<length/7;i++)
{
   htmlCode+="<tr>";
   for(var j=i*7;j<i*7 + 7 ; j++) 
   {
      htmlCode+="<td>"+arr[j]+"</td>";
   }
   htmlCode+="</tr>";
} 
```

# xcode - 如何为 Mac OS 编写 Internet 帐户插件？

> ID：14370807
> 
> 赞同：5
> 
> 时间：2013-01-17T01:26:05.670
> 
> 标签：xcode, macos, cocoa

Mac OS 上有几个用于邮件、联系人和日历的插件，但我需要带有邮件、联系人和日历服务的新型帐户。我不想将此帐户分别添加为邮件帐户、联系人帐户和日历帐户。我用谷歌搜索并没有找到关于这些插件的文档。我只知道它们位于 /System/Library/InternetAccounts/*.iaplugin 有人知道如何创建新的 iaplugin 吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:09:09.973

就目前而言，你不能。InternetAccount 插件 API 不公开。

# php - 动态表单动作 - 如何使用 simple_html_dom 捕捉它

> ID：14370808
> 
> 赞同：0
> 
> 时间：2013-01-17T01:26:13.710
> 
> 标签：php, javascript, session

[在http://www.cipo.ic.gc.ca/app/opic-cipo/trdmrks/srch/tmSrch.do?lang=eng](http://www.cipo.ic.gc.ca/app/opic-cipo/trdmrks/srch/tmSrch.do?lang=eng)有一个页面

当您进行搜索时，它会生成一个自定义 URL，例如[http://www.cipo.ic.gc.ca/app/opic-cipo/trdmrks/srch/bldSrch.do;jsessionid=00017eoN13xc3cyM5WYxwkO2v3I:-118SGKV? LANG =工程及textField1的=商标＆selectField1 = tmlookup_ext＆提交按钮=搜索＆andOr1 =和＆文本字段2 =咨询与selectField2 =服务＆andOr2 =和＆文本字段3 =文字栏selectField3 = tmlookup_ext＆andOr3 =和＆=文字栏selectField4 = tmlookup_ext＆andOr4 =和＆=＆selectField5 = tmlookup_ext＆selectWithin = selectStatus = selectDateStatus = FROM日期= 1865年1月1日和TODATE = 2013-01- 15&selectMaxDoc=500&selectDocsPerPage=10](http://www.cipo.ic.gc.ca/app/opic-cipo/trdmrks/srch/bldSrch.do;jsessionid=00017eoN13xc3cyM5WYxwkO2v3I:-118SGKV?lang=eng&textField1=trademark&selectField1=tmlookup_ext&submitButton=Search&andOr1=and&textField2=consulting&selectField2=services&andOr2=and&textField3=&selectField3=tmlookup_ext&andOr3=and&textField4=&selectField4=tmlookup_ext&andOr4=and&textField5=&selectField5=tmlookup_ext&selectWithin=&selectStatus=&selectDateStatus=&fromDate=1865-01-01&toDate=2013-01-15&selectMaxDoc=500&selectDocsPerPage=10)

除非我有那个 jsessionid 号码，否则我不能使用 simple_html_dom 通过自定义表单来抓取结果。

是否有一种获取该会话 ID 的智能方法？获得会话 ID 后，我可以生成搜索 url，并以一种非常有意义的方式播放搜索结果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:16:59.450

进入搜索页面时，您将获得 jsessionid 作为 cookie。您的蜘蛛还必须在发送搜索请求之前获取此 cookie。

这是一个如何做到这一点的例子。该示例将使用 PEAR 存储库中的[HTTP_Request2](http://pear.php.net/manual/tr/package.http.http-request2.php)包。

```
require_once 'HTTP/Request2.php';

$url = 'http://www.cipo.ic.gc.ca/app/opic-cipo/trdmrks/srch/tmSrch.do?lang=eng';
$request = new HTTP_Request2($url);
$response = $request->send();
$cookies = $response->getCookies();

foreach($cookies as $cookie) {
    if($cookie['name'] === 'JSESSIONID') {
        $jsessionid = $cookie['value'];
        break;
    }   
}

// play around with it
echo $jsessionid; 
```

# java - 不幸的是你的 已停止工作。

> ID：14370809
> 
> 赞同：0
> 
> 时间：2013-01-17T01:26:18.590
> 
> 标签：java, android

我是一个真正的 NOOB 和新编码员。我开始学习 Java，最近在 eclipse 上创建了这个应用程序。它是美元对欧元的转换器。每次我尝试在 Eclipse 上运行代码时，我都会收到错误消息，说应用程序已停止工作。

```
TextView dollars;
TextView euros;
RadioButton dtoe;
RadioButton etod;
Button calculate;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    dollars = (TextView)this.findViewById(R.id.dollars);
    euros = (TextView)this.findViewById(R.id.euros);

    dtoe = (RadioButton)this.findViewById(R.id.dtoe);
    etod = (RadioButton)this.findViewById(R.id.euros);

    calculate = (Button)this.findViewById(R.id.calculate);
    calculate.setOnClickListener(this);

}

public void onClick(View v) {

    if (dtoe.isChecked()){
        convertDollarsToEuros();
    }
    if (etod.isChecked()){
        convertEurosToDollars();
    }
}

protected void convertDollarsToEuros(){

    double val = Double.parseDouble(dollars.getText().toString());
    euros.setText(Double.toString(val*0.67));
}

protected void convertEurosToDollars(){
    double val = Double.parseDouble(euros.getText().toString());
    dollars.setText(Double.toString(val*0.67));
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:39:08.380

如果没有 logcat，这只是一个有根据的猜测，但看看这一行：

```
etod = (RadioButton)this.findViewById(R.id.euros); 
```

你确定你使用了正确的ID吗？它与您用于`TextView`上述的那个相同。您可能正在抛出`ClassCastException`，因为您试图将其用作`RadioButton`.

不相关，但您的转换逻辑似乎也错误。您不能期望*这两种*转换都是`(val * 0.67)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:47:46.990

我建议转到 Window > Show View > Console，根据错误，它有时会为您提供指向导致问题的类中的行的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T01:43:52.640

没有 logcat 很难猜到。但我认为有一个 NPE 被抛出。最有可能来自

```
dollars.getText().toString() 
```

和

```
euros.getText().toString() 
```

我建议您在应用 .toString() 之前包含一个空检查。

# java - Maven：自动生成包

> ID：14370810
> 
> 赞同：0
> 
> 时间：2013-01-17T01:26:27.000
> 
> 标签：java, android, maven

关于 Maven 及其生成不同 Java 包的能力的快速问题。

我在一个场景中，我需要为相同的代码库构建多个包，并根据我目前的需要使用不同的命名约定。

这就是一个例子。

```
package com.company.app.development
package com.company.app.test 
```

无论如何我可以用Maven做到这一点吗？同样，主要问题是我需要能够使用 Maven 根据需要动态更改包名称。

我目前在一个 Android 项目中这样做，但我确信这适用于任何可以使用 Maven 的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T04:02:18.183

使用[Maven 分类器](http://maven.apache.org/plugins/maven-deploy-plugin/examples/deploying-with-classifiers.html)。`dev`您将使用 a和`test`分类器部署您的 jar 。然后根据您的环境使用[配置文件来引用和构建不同的版本。](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)

# android - Socialauth-android 获取 oAuth-token 并在设备上使用账户信息

> ID：14370817
> 
> 赞同：9
> 
> 时间：2013-01-17T01:27:14.397
> 
> 标签：android, oauth, socialauth

我正在使用 socialauth-android 库通过 Facebook、Twitter 和 LinkedIn 登录用户。

到目前为止，我找不到找回 oAuth 令牌的方法。有没有办法在不重新实现部分库的情况下访问它？

此外，当我想使用 socialauth 登录时（参见下面的代码），我必须手动输入用户名和密码，尽管我已经在设备上设置了所有帐户。你能告诉 socialauth 使用这个帐户吗？

```
buttonFacebook.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            mSocialAdapter.authorize(ActivityLogin.this, Provider.FACEBOOK);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-03-23T18:36:21.217

我发现获取令牌的方法是

```
String token = mSocialAdapter.getCurrentProvider().getAccessGrant().getKey(); 
```

# installation - 获取程序文件的路径

> ID：14370820
> 
> 赞同：1
> 
> 时间：2013-01-17T01:28:17.917
> 
> 标签：installation, nsis

在我的 NSIS 安装程序中，我如何始终获取用户程序文件的路径，而不是`C:/Program Files (x86)/`但始终只是`C:/Program Files/`

以下变量`$PROGRAMFILES`给出`C:/Program Files (x86)/`了 64 位和`C:/Program Files/`其他变量。我希望始终获得 C:/Program Files/ 目录的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:58:41.160

仅 64 位的应用示例，但您可以轻松地将其转换为 32+64 位 :)

```
!include x64.nsh

Function .onInit
    ${If} ${RunningX64}
    ;${EnableX64FSRedirection} ;- only if needed
    StrCpy "$INSTDIR" "$PROGRAMFILES64\Modern UI Test"
    ${Else}
    StrCpy "$INSTDIR" "$PROGRAMFILES\Modern UI Test"
    ${EndIf}
FunctionEnd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:49:46.627

如果您**总是**想获取本机 Program Files 文件夹，请使用 $PROGRAMFILES64 但这样做通常是错误的，因为不应在此处安装 x86 二进制文件。

如果您的安装程序同时具有 x86 和 x64 二进制文件，您可以使用 $PROGRAMFILES64：

```
!include x64.nsh

InstallDir "$PROGRAMFILES64\MyApp"

Section
SetOutPath $InstDir
${If} ${RunningX64}
  File "x64\myapp.exe"
${Else}
  File "x86\myapp.exe"
${EndIf}
SectionEnd 
```

# cuda - CUDA 表面内存的峰值带宽？

> ID：14370822
> 
> 赞同：1
> 
> 时间：2013-01-17T01:28:23.953
> 
> 标签：cuda, gpu, benchmarking, nvidia

**Surface 内存**是 CUDA 中纹理缓存的只写模拟。

我在学术文献中发现了用于从全局内存和共享内存中**读取的 NVIDIA GPU**[峰值带宽数。](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=6267819)但是，我发现关于CUDA 内存设备的**写入吞吐量的信息较少。**

 ****特别是，我对 Fermi 和 Kepler GPU 上的 CUDA 表面内存的带宽（以及延迟，如果知道的话）感兴趣。

*   **有这方面的基准数据吗？**
*   **如果不是，那么我如何实施一个基准来测量写入表面内存的带宽？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-15T21:54:51.693

在计算能力 2.x 和 3.x 设备上，表面写入通过 L1 缓存并具有与全局写入相同的吞吐量和延迟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:54:25.830

根据[设备内存访问](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#device-memory-accesses)，

*   在缓存未命中时：纹理提取或表面读取需要从设备内存读取一个全局内存；
*   缓存命中：它减少了全局内存带宽需求，但不减少获取延迟。

由于纹理/表面/全局内存的延迟几乎相同，并且它们都位于片外DRAM上，我认为表面内存的峰值带宽与GPU规格中指示的全局内存相同。

为了计算延迟时间，您引用的论文可能只使用一个线程。所以很容易计算延迟

> 全局内存读取延迟=总读取时间/读取次数

您可以以类似的方式在表面写入上实现您的计时。但我认为将该方法应用于该论文中所示的共享内存延迟测量是不合理的，因为与共享内存延迟相比，for 循环的开销可能不会被忽略。****

# android - Android手机中的dnsmasq.conf在哪里？

> ID：14370825
> 
> 赞同：4
> 
> 时间：2013-01-17T01:28:43.267
> 
> 标签：android, android-intent, dnsmasq

在Android的命令行中，有dnsmasq命令。但是所有配置文件（dnsmasq.conf、dnsmasq.pid...）在哪里？

就我而言，我尝试创建自己的配置文件并使用以下命令：

```
dnsmasq --conf-file=the/location/of/my/file 
```

它说：

> dnsmasq: 无法打开 pidfile /var/run/dnsmasq.pid: 没有这样的文件或目录

当我创建 pid 文件时，它说：

> dnsmasq: 无法打开 pidfile dnsmasq.pid: 只读文件系统

关于如何控制我的 dnsmasq（DHCP、DNS 服务器）的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-02T13:39:27.023

如果有帮助，调试模式（`-d`或`--no-daemon`）通过不分叉来避免对 pid 文件的需要。

更新：`--pid-file`没有参数看起来像是避免需要 pid 文件的更好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T21:31:03.373

为了存储它的 process-id，`dnsmasq`需要一个 pid 文件。因此，它需要正确的权限才能编写它。

您应该在系统的某个位置创建一个名为 的文件`dnsmasq.pid`，然后使用`dnsmasq --pid-file <path/to/your/dnsmasq.pid>`. 确保`dnsmasq`有权访问此文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T22:17:01.363

听起来您应该以 root 身份运行它来克服后一个问题。至于前一个问题，我还不清楚。一种解决方法可能是使用脚本启动 dnsmasq，通过命令行传递配置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-26T15:59:28.640

它通常是打开`/system/etc`或只是`/etc`并尝试`dnsmasq`通过`-d`或`--no-daemon`控制运行以避免pid文件错误。

# python - Python 通过列表搜索元组的各个方面

> ID：14370830
> 
> 赞同：0
> 
> 时间：2013-01-17T01:29:14.807
> 
> 标签：python, list, search

我有一个格式为 的元组列表`((x,y),type)`，我想看看该列表是否包含我想要的“类型”，无论`(x,y)`位置如何。如果是这样，我想在包含所选“类型”的元组的索引之后插入一些东西。

我设置它的方式，列表将只包含每种类型中的一种，如果这有所不同的话。

编辑：

哇，对不起，我刚刚意识到使用字典会使这变得容易得多。我保证我在发帖之前确实考虑过这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:34:41.007

Something like this should work -

```
for t in l:
    if isinstance(t[1], type):
        l.insert(value, l.index(t)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:34:56.077

Basically, to do this, I just set up each type as its own entry in a dictionary, with the position that it is at as the corresponding entry.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T01:38:10.097

I would make a dictionary out of your list:

```
table = {type:(x, y) for x, y, type in tuples} 
```

Now, you can look up a tuple just by doing `table[your_type]`.

# c# - 标签控件未在 TableLayoutPanel 中填充其包含的单元格

> ID：14370832
> 
> 赞同：0
> 
> 时间：2013-01-17T01:29:27.357
> 
> 标签：c#, .net, tablelayoutpanel

什么可能导致 Label 控件不增长/缩小到 TableLayoutPanel 内的包含单元格？我在另一个包含 TableLayoutPanel 中有几个 TableLayoutPanel。调整表单大小时，我需要单元格中的标签控件来调整它们的大小。按钮控件执行此操作，但标签控件不执行此操作。

我在一个更简单的示例中尝试了一个使用 Label 控件的简单实验，该示例仅使用一个 TableLayoutPanel 并且它可以工作；当我将 Dock 属性设置为“填充”时，Label 控件可以很好地调整大小，但我无法让它在具有多个 TableLayoutPanel 控件嵌入另一个控件的表单中工作。

微软建议应该避免在这里嵌套：

[http://msdn.microsoft.com/en-us/library/ms171689.aspx](http://msdn.microsoft.com/en-us/library/ms171689.aspx)

但是，我需要能够在 TableLayoutPanel 中创建单独的控件组。谁能提供一些见解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:36:11.280

您是否将`Label.AutoSize`标签的属性设置为`false`？根据[MSDN 关于该`AutoSize`属性](http://msdn.microsoft.com/en-us/library/ms171729(v=vs.110).aspx)的文档（强调我的）：

> 当[AutoSize](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.autosize.aspx)为**true时，** [Dock](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dock.aspx)和[Anchor](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)属性得到尊重。
> 
>  **控件的[Location](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.location.aspx)属性的值被调整为正确的值。
> **注意** *[Label](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.aspx)**控件是此规则的例外**。当您将停靠的[Label](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.aspx)控件的[AutoSize](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.autosize.aspx)属性的值设置为**true**时，[Label](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.aspx)控件将不会拉伸***。****

# ios - MPMusicPlayerController 是否更新播放计数？

> ID：14370838
> 
> 赞同：2
> 
> 时间：2013-01-17T01:30:22.513
> 
> 标签：ios, core-audio, mpmusicplayercontroller

在我的测试中，似乎通过 MPMusicPlayerController 播放 MPMediaItem 不会更新播放计数（使用 iPod 或应用程序实例）

谁能证实这一点？我也没有在文档中看到任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:31:55.123

在我的测试中，播放次数会同时更新`iPodMusicPlayer`和`applicationMusicPlayer`。

首先，我跳到了歌曲的结尾。然后我跳回上一首曲目，并`valueForProperty`在得到 a 后使用测试播放计数`MPMusicPlayerControllerNowPlayingItemDidChangeNotification`：

```
- (void)handleNowPlayingItemChange:(NSNotification *)itemNotification {
     MPMediaItem *currentMediaItem = [[self musicPlayer] nowPlayingItem];
     NSNumber *currentPlayCount = [currentMediaItem valueForProperty:MPMediaItemPropertyPlayCount];
     NSLog(@"Current play count: %@", currentPlayCount);
} 
```

# aviarc - 在输入键上提交搜索（不是文本编辑）

> ID：14370839
> 
> 赞同：1
> 
> 时间：2013-01-17T01:30:30.457
> 
> 标签：aviarc

是否有一个事件可以用来确定用户是否在屏幕上按下了回车键？

我想在用户按 Enter 键时从屏幕上的任何位置提交搜索参数。

我意识到如果焦点在文本编辑上我可以做到这一点，但是选择列表、复选框等呢？

谢谢，蒂姆

# scala - 从宏中获取具有匿名类方法的结构类型

> ID：14370842
> 
> 赞同：182
> 
> 时间：2013-01-17T01:31:17.200
> 
> 标签：scala, macros, scala-2.10, structural-typing, scala-macros

假设我们要编写一个宏来定义一个具有一些类型成员或方法的匿名类，然后创建该类的一个实例，该类的静态类型为具有这些方法的结构类型，等等。这在 2.10 中的宏系统中是可能的。 0，并且类型成员部分非常容易：

```
object MacroExample extends ReflectionUtils {
  import scala.language.experimental.macros
  import scala.reflect.macros.Context

  def foo(name: String): Any = macro foo_impl
  def foo_impl(c: Context)(name: c.Expr[String]) = {
    import c.universe._

    val Literal(Constant(lit: String)) = name.tree
    val anon = newTypeName(c.fresh)

    c.Expr(Block(
      ClassDef(
        Modifiers(Flag.FINAL), anon, Nil, Template(
          Nil, emptyValDef, List(
            constructor(c.universe),
            TypeDef(Modifiers(), newTypeName(lit), Nil, TypeTree(typeOf[Int]))
          )
        )
      ),
      Apply(Select(New(Ident(anon)), nme.CONSTRUCTOR), Nil)
    ))
  }
} 
```

（提供我的方法`ReflectionUtils`的[便利特性](https://gist.github.com/4552471)`constructor`在哪里。）

这个宏允许我们将匿名类的类型成员的名称指定为字符串文字：

```
scala> MacroExample.foo("T")
res0: AnyRef{type T = Int} = $1$$1@7da533f6 
```

请注意，它的类型正确。我们可以确认一切都按预期工作：

```
scala> implicitly[res0.T =:= Int]
res1: =:=[res0.T,Int] = <function1> 
```

现在假设我们尝试用一个方法做同样的事情：

```
def bar(name: String): Any = macro bar_impl
def bar_impl(c: Context)(name: c.Expr[String]) = {
  import c.universe._

  val Literal(Constant(lit: String)) = name.tree
  val anon = newTypeName(c.fresh)

  c.Expr(Block(
    ClassDef(
      Modifiers(Flag.FINAL), anon, Nil, Template(
        Nil, emptyValDef, List(
          constructor(c.universe),
          DefDef(
            Modifiers(), newTermName(lit), Nil, Nil, TypeTree(),
            c.literal(42).tree
          )
        )
      )
    ),
    Apply(Select(New(Ident(anon)), nme.CONSTRUCTOR), Nil)
  ))
} 
```

但是当我们尝试它时，我们没有得到结构类型：

```
scala> MacroExample.bar("test")
res1: AnyRef = $1$$1@da12492 
```

但是，如果我们在其中添加一个额外的匿名类：

```
def baz(name: String): Any = macro baz_impl
def baz_impl(c: Context)(name: c.Expr[String]) = {
  import c.universe._

  val Literal(Constant(lit: String)) = name.tree
  val anon = newTypeName(c.fresh)
  val wrapper = newTypeName(c.fresh)

  c.Expr(Block(
    ClassDef(
      Modifiers(), anon, Nil, Template(
        Nil, emptyValDef, List(
          constructor(c.universe),
          DefDef(
            Modifiers(), newTermName(lit), Nil, Nil, TypeTree(),
            c.literal(42).tree
          )
        )
      )
    ),
    ClassDef(
      Modifiers(Flag.FINAL), wrapper, Nil,
      Template(Ident(anon) :: Nil, emptyValDef, constructor(c.universe) :: Nil)
    ),
    Apply(Select(New(Ident(wrapper)), nme.CONSTRUCTOR), Nil)
  ))
} 
```

有用：

```
scala> MacroExample.baz("test")
res0: AnyRef{def test: Int} = $2$$1@6663f834

scala> res0.test
res1: Int = 42 
```

这非常方便——例如，它可以让你做这样的事情[——](https://github.com/travisbrown/rillit)但我不明白它为什么有效，并且类型成员版本有效，但不是`bar`. 我知道这[可能不是定义的行为](https://stackoverflow.com/q/13669974/334519)，但它有什么意义吗？有没有更简洁的方法从宏中获取结构类型（及其上的方法）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-17T09:10:24.307

[Travis在这里](https://stackoverflow.com/a/18485004/1296806)一式两份地回答了这个问题。跟踪器中有指向该问题的链接以及 Eugene 的讨论（在评论和邮件列表中）。

在类型检查器著名的“Skylla and Charybdis”部分中，我们的英雄决定什么应该摆脱黑暗的匿名性并将光明视为结构类型的成员。

有几种方法可以欺骗类型检查器（这不涉及 Odysseus 的拥抱绵羊的策略）。最简单的方法是插入一个虚拟语句，以使该块看起来不像是一个匿名类，然后是它的实例化。

如果打字员注意到您是一个未被外部引用的公共术语，它将使您成为私人。

```
object Mac {
  import scala.language.experimental.macros
  import scala.reflect.macros.Context

  /* Make an instance of a structural type with the named member. */
  def bar(name: String): Any = macro bar_impl

  def bar_impl(c: Context)(name: c.Expr[String]) = {
    import c.universe._
    val anon = TypeName(c.freshName)
    // next week, val q"${s: String}" = name.tree
    val Literal(Constant(s: String)) = name.tree
    val A    = TermName(s)
    val dmmy = TermName(c.freshName)
    val tree = q"""
      class $anon {
        def $A(i: Int): Int = 2 * i
      }
      val $dmmy = 0
      new $anon
    """
      // other ploys
      //(new $anon).asInstanceOf[{ def $A(i: Int): Int }]
      // reference the member
      //val res = new $anon
      //val $dmmy = res.$A _
      //res
      // the canonical ploy
      //new $anon { }  // braces required
    c.Expr(tree)
  }
} 
```

# c - 使用 open 系统调用打开 /etc/passwd

> ID：14370843
> 
> 赞同：1
> 
> 时间：2013-01-17T01:31:26.477
> 
> 标签：c

我想逐字节读取 /etc/passwd 文件并希望在 std o/p 上显示它。这是我的代码

```
void main(int argc, char *argv[])
{
  int fd, ch;
  int ret;
  if((fd = open("/etc/passwd",O_RDONLY)) == -1);
      perror("open");
  while((ret = read(fd, &ch, sizeof(ch))) != 0)
      putchar(ch);

} 
```

它编译正确，但显示打开：成功，为什么我无法显示内容，我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:45:23.920

if 的右括号后不应有分号。这就是问题所在。分号实际上是一个空语句，将在条件为真时执行。由于 fd 不等于 -1，因此调用了 perror。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:48:22.863

to 的参数`putchar()`是`int`一个值在 范围内的值`unsigned char`，因此您不应该`int`从文件中读取整个文件并尝试将其打印为一个字符 - 您应该读取`unsigned char`. 您可以通过更改 to 的类型来实现这`ch`一点`unsigned char`。

行尾的额外分号是即使成功也会出现的`if`原因。`perror()``open()`

# java - Java NIO 服务器回合制游戏

> ID：14370844
> 
> 赞同：3
> 
> 时间：2013-01-17T01:31:27.960
> 
> 标签：java, nio

我正在制作一个回合制多人游戏，可以循环使用。基本上，一个玩家主持一场比赛，另一个人加入比赛，然后比赛就开始了。我的服务器将需要处理这些匹配并每 5 秒向客户端提供更新。我通常会使用计时器/thread.sleep() 来执行此操作。我的问题是我不确定如何同时为多个比赛执行此操作。我觉得每场比赛使用一个线程会很荒谬，因为它会闲置而不是做任何事情。

我的一个想法是只有一个线程以 5 秒的间隔更新每场比赛。我觉得唯一的问题是，当很多比赛同时进行时，最后更新的游戏可能会出现相当大的延迟。（我不知道这有多重要，因为我的游戏是基于时间的，但它看起来很原始）。

我的另一个选择是使用看起来很有希望的 ScheduledExecutorService（线程池）。

1.  我是否会因为我还在为套接字连接运行线程池而遇到 ScheduledExecutorService 线程池的问题？

    2.有没有更好的方法来完成我想要实现的目标？

只是为了澄清我正在寻找一种方法，基本上每场比赛每 5 秒调用一次函数。例如：

我的游戏从 0 开始，而你的游戏从 2 秒开始。服务器会调用更新函数：

对我来说：0,5,10,15,20,25 等...

为您：2,7,12,17,22,27 等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:53:16.213

如果我理解你是正确的“我的一个想法是只有一个线程以 5 秒的间隔更新每场比赛。” 每秒运行更新脚本会更好，但更新匹配哪个 ID mod 5 == 0。这可以减少 HOT 秒的不良影响。

thread.sleep() 也很糟糕，它不能保证严格的时间。thread.sleep(5000) — 平均睡眠至少 5 秒（但在糟糕的情况下可能是 10 秒甚至更多）

查看[Java Timer](https://stackoverflow.com/questions/1041675/java-timer)和[http://www.javacodegeeks.com/2012/07/quartz-2-scheduler-example.html](http://www.javacodegeeks.com/2012/07/quartz-2-scheduler-example.html)。

我认为使用 TimerTask 将是一个很好的决定。

另请参阅[游戏的 java 计时器](https://stackoverflow.com/questions/2427626/java-timer-for-game)

更新：对于“主题”通知，请查看[https://netty.io](https://netty.io) // 如果您还没有使用它:) 使用异步非阻塞 I/O 对您来说，一个线程就足够了 10000 个同时连接。（在良好的实例 10 - 160 k 连接上，它在真实的商业项目中是真实的）

# .htaccess - .htaccess 404 错误

> ID：14370845
> 
> 赞同：0
> 
> 时间：2013-01-17T01:31:32.270
> 
> 标签：.htaccess

我试图让 /mom/products/14 重定向到 /mom/product.php?id=14

我在 .htaccess 中使用的代码是：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^products/([a-zA-Z0-9]+)/$ product.php?id=$1 
```

但是当我转到 /mom/products/14 时，我收到 404 错误。任何帮助将不胜感激。

如果这很重要，我的 /mom/ 文件夹中也有我的 .htaccess。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:49:52.710

您不需要在模式的最后使用斜线：

```
 RewriteRule ^products/([a-zA-Z0-9]+)$ product.php?id=$1 
```

# runtime - 嵌套循环的运行时表达式

> ID：14370846
> 
> 赞同：0
> 
> 时间：2013-01-17T01:31:39.283
> 
> 标签：runtime, complexity-theory

```
for i <- 1 to n 
  for j <- i to n
    for k <- i to j 
```

第二个循环的运行时间的数学表达式是什么？

是 n = n^2 的 j = 1 到 n 的总和吗？

你如何推导出它，因为它同时依赖于 i 和 n？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:30:36.060

让我们以两种方式解决这个问题：

## 1.解决方案

如果您需要计算第二个循环运行时函数，则必须将其表示为 和 的`n`函数`i`。因此，您将修复`i`，因为它作为常数进入第二个循环，并且您不会在第二个或第三个循环的任何地方更改它的值。如果您想了解为什么第二个循环运行时间同时取决于`i`和，您可以以等效形式编写您的算法`n`：

```
for i <- 1 to n 
   doSomething(i,n)

  doSomething(i,n):
    for j <- i to n
     for k <- i  to j
       doStuffHere() // 
```

When `j=i`,`doStuff()`只执行一次，因为`j=i`and `k=j=i`, 所以循环在 1 次迭代后停止。

当`j=i+1`,`doStuff()`被执行 2 次，以此类推。

您可以得出一个规则，即对于 的任何值`j`，`doStuff()`执行`(j-i+1)`次数，即 1 次 when `j=i`，2 次 when `j=i+1`，3 次 when `j=i+3`，...，n-i+1 次 when j=i。这意味着运行时间函数是：

```
f(n,i) = 1+2+3+...+(n-i+1) = (n-i+1)*(n-i+1+1)/2 =
       = (n-i+1)(n-i+2)/2 
```

稍后，当您尝试推导整个算法的复杂度函数时，您会看到对于从 1 到 n 的每个 i，您都有 f(n,i) `doStuff()`，因此整个算法将具有运行时间：

```
RT(n) = f(1,n) + f(2,n) + f(3,n) + .. + f(n,n) 
```

您将不得不在这里做一些数学运算并使用公式计算级数总和。但是，还有另一种方法，更优雅，但可能难以理解。

## 2.解决方案

很明显，对于算法中的每个 j 和 k：

*   `i <= j,k <= n`
*   `k >= j`

    因此，您的代码实际上是从 [i,n] 中选择两个正整数 j 和 k，其中 j<=k。包含这些对 j,k 的集合实际上是重复的组合，我们从 n-i+1 个重复的元素中选择两个元素。不要感到困惑，因为在某些选择中，第一个数字不会小于第二个。你总是可以切换它们，即以非降序重写它们，然后认为第一个是你的j，第二个是你的k。这两个数字可以以 (n-i+1)(n-i+2)/2 种方式选择，这就是您的算法的运行时间函数。通过更多的思考和更少出错的数学计算，您可以以更优雅的方式获得解决方案。如果您尝试确定整个算法的运行时间函数，则同样的逻辑适用。

    与数学公式的有用链接

*   [http://en.wikipedia.org/wiki/Combinations](http://en.wikipedia.org/wiki/Combinations)

*   [http://en.wikipedia.org/wiki/Arithmetic_progression](http://en.wikipedia.org/wiki/Arithmetic_progression)
*   还有更多链接，但由于我是这里的新用户，所以在获得 10 声望点之前，我不能发布超过两个超链接。:)

# iphone - 检索好友用户名

> ID：14370851
> 
> 赞同：1
> 
> 时间：2013-01-17T01:31:57.363
> 
> 标签：iphone, objective-c, facebook, facebook-graph-api

我正在使用 FBFriendPickerViewController 来显示我所有的朋友，然后当我选择一个（禁用多项选择）时，我想获取他的姓名和用户名。

有人可以解释一下为什么用户名返回正确而用户名返回 null 吗？

```
- (void)facebookViewControllerDoneWasPressed:(id)sender {
    for (id<FBGraphUser> friend in self.friendPickerController.selection) {
        NSLog(@"%@", friend.name);
        NSLog(@"%@", friend.username);
    }
} 
```

检索我的朋友用户名的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T19:50:56.743

**朋友.id 工作正常吗？**

```
Just get the JSON from graph.facebook.com/<friend.id> 
```

^这里会有一个用户名键

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T05:36:57.987

尝试使用以下内容：

```
- (BOOL)friendPickerViewController:(FBFriendPickerViewController *)friendPicker
                 shouldIncludeUser:(id<FBGraphUser>)user
{
    if (self.searchText && ![self.searchText isEqualToString:@""]) {
        NSRange result = [user.name
                          rangeOfString:self.searchText
                          options:NSCaseInsensitiveSearch];
        if (result.location != NSNotFound) {
            return YES;
        } else {
            return NO;
        }
    } else {
        return YES;
    }
    return YES;
} 
```

# php - 如何使用 mPDF 和变音符号？

> ID：14370852
> 
> 赞同：0
> 
> 时间：2013-01-17T01:31:59.073
> 
> 标签：php, diacritics, mpdf

更新：想通了，看下面的评论

我正在尝试从 HTML 文件创建带有 mPDF 的 PDF 文件。一切都很好，但有一件事：在这个 HTML 中，我必须有一些罗马尼亚字母（șțâăîȘȚÂĂÎ 等），这些字母在导出的 PDF 文件中被转换为符号。

![我如何获取 pdf 文件，例如](../Images/39876b05a850e131639c703c26d0fdf8.png)

我的代码：

```
include("mpdf/mpdf.php");
//$mpdf=new mPDF('c','A4','','' , 0 , 0 , 0 , 0 , 0 , 0); //the 'c' is not for multilanguage
$mpdf=new mPDF('','A4','','' , 0 , 0 , 0 , 0 , 0 , 0);//this one works

$mpdf->SetDisplayMode('fullpage');

$mpdf->list_indent_first_level = 0; // 1 or 0 - whether to indent the first level of a list

$mpdf->WriteHTML(file_get_contents('sursa.html'));

//$mpdf->Output();//we don't want to save file by hand
$mpdf->Output('output/output.pdf','F'); 
```

源文件示例：

```
<!DOCTYPE html>
<html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

[...]

```
<p style="font-size: 3.2mm">
<b>I. Părțile discuției sunt:</b><br/>
<b>aaslasjf sșf asf ăîșțâ ȘȚÂĂÎ</b> 
```

[...]

```
</body>
</html> 
```

有没有人使用特殊字符（拉丁语）并且知道如何解决这个问题？非常感谢！（更新：现在可以使用，请参阅评论）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:35:15.687

确保您使用 UTF-8 对页面进行编码，或者如果您使用的是正确指定的其他字符编码。请参阅有关[输入编码](http://mpdf1.com/manual/index.php?tid=293)的 mPDF 文档。

# doctype - 如何更改 DOCTYPE 以强制 Kentico CMSDesk 中的 Quirks 模式

> ID：14370856
> 
> 赞同：0
> 
> 时间：2013-01-17T01:32:25.063
> 
> 标签：doctype, quirks-mode, kentico

我正在运行 Kentico v5.5.3996 R2，CMSDesk 管理屏幕的某些方面将无法工作，除非它在 ​​IE Quirks 模式下运行。

它主要影响 WYSIWYG 编辑器和插入图像或媒体的弹出窗口。

所以我想要实现的是强制 CMSDesk 进入 Quirks 模式，这样编辑者在编辑网站时就不必手动更改为 Quirks 模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:20:53.593

如果在所有页面上都需要，我必须在 IIS 服务器中将其作为服务器中的一个元素。 [http://weblogs.asp.net/joelvarty/archive/2009/03/23/force-ie7-compatibility-mode-in-ie8-with-iis-settings.aspx](http://weblogs.asp.net/joelvarty/archive/2009/03/23/force-ie7-compatibility-mode-in-ie8-with-iis-settings.aspx)

如果您想在单个 Doctype 中进行调整，您可以使用 Kentico Macros 来呈现正确的标题。参见：例如：[http ://hsivonen.iki.fi/doctype/](http://hsivonen.iki.fi/doctype/)

Kentico 宏非常有用。在开发指南中搜索“宏表达式概述”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:22:02.623

要将 CMS 桌面变为 quirks 模式，请编辑以下文件 /CMSMasterPages/UI/EmptyPage.master 并删除 doctype。这应该会使 cmsdesk 进入怪癖模式。

# objective-c - 预期结果在 1 和 0 之间的除法总是给出 0

> ID：14370857
> 
> 赞同：-1
> 
> 时间：2013-01-17T01:32:33.807
> 
> 标签：objective-c, math, integer, division

> **可能重复：**
> [C 中整数除法的行为是什么？](https://stackoverflow.com/questions/3602827/what-is-the-behavior-of-integer-division-in-c)

当我用一个应该在 1 和 0 之间的答案进行除法计算时，它总是返回 0。

试试这个：

```
float a = 1;
float b = 2;
float c = a / b; //variable divide by variable gives 0.5 as it should
float d = 1 / 2; //number divide by number gives 0
float e = 4 / 2;
NSLog(@"%f %f %f %f %f", a,b,c, d, e); 
```

我从控制台得到这个：

> 2013-01-17 14:24:17.512 我的项目 [1798:c07] 1.000000 2.000000 0.500000 0.000000 0.500000

我不知道发生了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T01:36:03.330

你用整数除以整数。结果将是一个整数，余数被省略：

```
1 / 2 = 0     The remainder (0.5) is omitted. 
```

只有在除法完成后，您的结果才会传递到您的`float d`变量中。

编辑：对，我忘了提出一个解决方案：确保至少有一个操作数是浮点数。

```
1.0 / 2 = 0.5 
```

```
1 / 2.0 = 0.5 
```

# c++ - c++ google drive api上传无标题文件

> ID：14370862
> 
> 赞同：2
> 
> 时间：2013-01-17T01:33:31.537
> 
> 标签：c++, google-drive-api, winhttp

我使用 WinHTTP 插入以下参数。文件成功上传，但标题为无标题文件。

```
POST /upload/drive/v2/files?access_token=918230812390812038389 HTTP/1.1
Host: www.googleapis.com
Content-Type: multipart/form-data; boundary="boundary"
Content-Length: 20176    

--boundary
Content-Type: application/json; charset=UTF-8

{
  "title": "test2.pdf"
}

--boundary
Content-Type: application/pdf

PDF CONTENTS

--boundary-- 
```

# python - Python Multiple Inheritance - Call a method of a class, but which one?

> ID：14370870
> 
> 赞同：0
> 
> 时间：2013-01-17T01:34:43.330
> 
> 标签：python, object, multiple-inheritance

```
class MyClass(Class1, Class2):
    pass 
```

Both parents have a `getImage` method.

```
thing = MyClass()
thing.getImage() #I want to call Class1's
thing.getImage() #I want to call Class2's 
```

Which `getImage` gets called? How do I specify which one to call?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T01:38:10.013

In this case, `thing.getImage` will call `Class1.getImage` provided that it exists. If you want to call the other, you can use the longer form:

```
Class2.getImage(thing) 
```

These things can be inspected via the class's method resolution order (`__mro__`):

```
>>> class foo(object): pass
... 
>>> class bar(object): pass
... 
>>> class baz(foo,bar): pass
... 
>>> print baz.__mro__
(<class '__main__.baz'>, <class '__main__.foo'>, <class '__main__.bar'>, <type 'object'>) 
```

This shows that `baz` is searched for the method first, then `foo`, then `bar` and finally `object`.

[Further reading about multiple inheritance](http://docs.python.org/2/tutorial/classes.html#multiple-inheritance)

[Further reading about mro](http://www.python.org/download/releases/2.3/mro/)

# c++ - convert 4 bytes of data containing both uint & floats to float

> ID：14370872
> 
> 赞同：1
> 
> 时间：2013-01-17T01:34:54.267
> 
> 标签：c++

I have an array which has data which is mixed in format. It contains both unsigned ints & floats (all stored in a 4 byte data each).

I want to convert each 4 byte data to a float. However, none of the methods worked for me. For example.

```
union
{
   DWORD i;
   float f;
} u; 
```

This method doesn't work. Neither does reinterpret_cast to float.

The data I have is like this.

```
{ 1, 8, 1.00000, -1.000000 } 
```

I have a `uint32_t` pointer which points to the memory.

`DWORD value = *(uint_pointer)` gives me the 1, 8 correctly and not the others. Using a typecast float causes 1.00000 & -1.00000 to be recognized correctly but not the other two.

I basically want the result to be

```
{ 1.00000, 8.00000, 1.00000, -1.00000 } 
```

I looked at SO for all the previous answers but none of them worked reliably hence I am posting this again to get some ideas.

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:43:24.877

您需要知道哪些 4 字节的延伸是`float`s，哪些 4 字节的延伸是`uint`s。如果你不知道，就没有办法转换它们，不幸的是，它们只是 32 位，含义不明确。但是，如果您确实知道第三个值是 a `float`，例如，您可以使用 获得它`float v3 = ((float *)uint_pointer)[3]`。此外，您可以查看我在上一篇文章中的冗长解释：[iOS 6 中的 Granular Synthesis 使用 AudioFileServices](https://stackoverflow.com/questions/14016259/granular-synthesis-in-ios-6-using-audiofileservices)

**编辑**：如果您不知道`== sizeof(DWORD) == sizeof(float)`包含您的值的是 4 个字节，并且作为一般的良好做法，您可以强制转换`u*`并从联合中访问它。这样，您可以使用编译器的内存对齐知识，因此`v3 = ((u *)uint_pointer)[3].f`更安全，请参阅@LightnessRacesInOrbit 的评论。

# c++ - Function for moving arrays in C++

> ID：14370874
> 
> 赞同：0
> 
> 时间：2013-01-17T01:35:28.833
> 
> 标签：c++, arrays, qt

I am trying to make a function that will move the parts of an array (which is made of widgets) around a circle. It builds and runs but the icons do not appear. Can someone tell me why?

Here is the function in the .cpp file

```
 void setIconWidgetLocation(iconWidget *w, float arcSize)
{
    int outerRadius = 100;
    int innerRadius = 60;
    int radius = (outerRadius + innerRadius)/2;
    arcSize = 2.0 * M_PI/ 5;

    iconWidget *icon[5];

    QSizeF size = w->size();
    QPointF center(size.width(),size.height());
    center /= 2.0;

    //Loop for finding the circles and moving them
    for(int i = 0; i<5; i++)
    {
        icon[i] = new iconWidget;

        //Finding the Icon center on the circle
        double x = center.x() + radius * sin(arcSize * i);
        double y = center.y() + radius * cos(arcSize * i);

        x -= 10/2;
        y -= 10/2;

        //moves icons into place
        icon[i]->move(x,y);

    }
} 
```

and here is the header file

```
#ifndef ZMENUWIDGET_H
#define ZMENUWIDGET_H
#include "iconwidget.h"

#include <QWidget>

class zMenuWidget : public QWidget
{
    Q_OBJECT

    iconWidget *icon[5];

public:
    explicit zMenuWidget(QWidget *parent = 0);

    void paintEvent(QPaintEvent *event);

    void resizeEvent(QResizeEvent *event);

signals:

public slots:

};

#endif // ZMENUWIDGET_H 
```

here is the call of the setIconWidgetLocation.

```
#include "zmenuwidget.h"
#include <QPaintEvent>
#include <QResizeEvent>
#include <QPainter>
#include <QColor>
#include <QPainterPath>
#include <cmath>

setIconWidgetLocation(iconWidget *w, float arcSize);

zMenuWidget::zMenuWidget(QWidget *parent) :
    QWidget(parent)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:36:06.530

您实际上并没有调用该函数。您所展示的是一个函数*声明*（又名*原型*）。它所做的只是告诉编译器你的函数存在并说明它是如何被调用的。

在我去那里之前，你有几件事要先解决。即，参数没有意义。您的函数为您的菜单创建并布置图标。所以传入 an`iconWidget`是令人困惑的。此外，您通过`arcSize`但然后在函数内部计算它。我希望这个函数实际上应该是`zMenuWidget`. 最后，它不仅*设置*位置，还*创建*图标，因此命名具有误导性。

让我们一次性解决所有这些问题：

```
void zMenuWidget::createAndLayoutIcons()
{
    int outerRadius = 100;
    int innerRadius = 60;
    int radius = (outerRadius + innerRadius)/2;
    double arcSize = 2.0 * M_PI/ 5;

    QSizeF size = w->size();
    QPointF center(size.width(),size.height());
    center /= 2.0;

    //Loop for finding the circles and moving them
    for(int i = 0; i<5; i++)
    {
        icon[i] = new iconWidget(this);

        //Finding the Icon center on the circle
        double x = center.x() + radius * sin(arcSize * i);
        double y = center.y() + radius * cos(arcSize * i);

        x -= 10/2;
        y -= 10/2;

        //moves icons into place
        icon[i]->move(x,y);
    }
} 
```

请注意，我已从`icon`该函数中删除了本地定义的数组，因为它是在您的`zMenuWidget`类中定义的。这是您需要使您的函数成为该类的成员的另一个提示。

我还修改了图标创建部分以将菜单小部件的指针传递给您的新图标小部件（作为其父级）。我假设您的 iconWidget 接受父指针：

```
 icon[i] = new iconWidget(this); 
```

现在在 for 的构造函数中`zMenuWidget`，创建图标：

```
zMenuWidget::zMenuWidget( QWidget *parent)
    : QWidget(parent)
{
    createAndLayoutIcons(this);
} 
```

这应该让你朝着正确的方向前进。

# android - 如何检测用户的键盘是否为 Swype？

> ID：14370882
> 
> 赞同：7
> 
> 时间：2013-01-17T01:36:13.790
> 
> 标签：android, keyboard, ime

是否可以知道用户正在使用的键盘？如何检查用户是否使用 Swype 键盘？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T02:01:47.693

您可以使用以下方法检索当前的默认键盘：

```
String currentKeyboard =  Settings.Secure.getString(getContentResolver(), Settings.Secure.DEFAULT_INPUT_METHOD); 
```

您将获得与`com.touchtype.swiftkey/com.touchtype.KeyboardService`各种键盘类似的结果。第一部分是键盘的主包名，第二部分是它使用的Keyboard Service的名称。只需解析这个字符串，看看它是否与 Swype 的信息匹配（我现在只能提供 SwiftKey 的详细信息，因为我没有安装 Swype）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:54:45.540

看起来你的答案在这里：

[如何确定Android中当前的IME？](https://stackoverflow.com/questions/2744729/how-to-determine-the-current-ime-in-android)

有时它只是关于知道正确的搜索词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-26T15:14:01.003

以下内容可让您确定是否使用三星、Google 或 Swype 键盘。

```
public boolean usingSamsungKeyboard(Context context){
    return usingKeyboard(context, "com.sec.android.inputmethod/.SamsungKeypad");
}

public boolean usingSwypeKeyboard(Context context){
    return usingKeyboard(context, "com.nuance.swype.input/.IME");
}

public boolean usingGoogleKeyboard(Context context){
    return usingKeyboard(context, "com.google.android.inputmethod.latin/com.android.inputmethod.latin.LatinIME");
}   

public boolean usingKeyboard(Context context, String keyboardId)
    {
        final InputMethodManager richImm =
          (InputMethodManager)context.getSystemService(Context.INPUT_METHOD_SERVICE);

        boolean isKeyboard = false;

        final Field field;
        try
        {
            field = richImm.getClass().getDeclaredField("mCurId");
            field.setAccessible(true);
            Object value = field.get(richImm);
            isKeyboard = value.equals(keyboardId);

        }
        catch (IllegalAccessException e)
        {

        }
        catch (NoSuchFieldException e)
        {

        }
        return  isKeyboard;
    } 
```

# iphone - CPU wait on GPU when renderer buffer size change

> ID：14370884
> 
> 赞同：1
> 
> 时间：2013-01-17T01:36:40.043
> 
> 标签：iphone, ios, opengl-es

I'm working on an openGL ES based application for iOS. Things are looking good so far but, according to Instrument, there is a case when the CPU waits on the GPU. This warning is not consistent. When the warning appears, it seems to occur upon a change in the device orientation or a zooming. In the app, both those cases trigger a layoutSubviews call where (if there is a change in the view's frame), the dimensions of the frame buffer are updated via the code below:

```
[_context renderbufferStorage:GL_RENDERBUFFER fromDrawable:(CAEAGLLayer*)self.layer];
glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_WIDTH, &_framebufferWidth);
glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_HEIGHT, &_framebufferHeight);
glViewport(0, 0, _framebufferWidth, _framebufferHeight); 
```

Then in the drawing callback, the uniform matrix gets updated and then the following calls complete the drawing:

```
glClear(GL_COLOR_BUFFER_BIT);
glDrawElements(GL_TRIANGLE_STRIP, sizeof(indices)/sizeof(indices[0]), GL_UNSIGNED_SHORT, 0);
[_context presentRenderbuffer:GL_RENDERBUFFER]; 
```

The glClear call seems to be the cause of the warning when there is a view size change. Honestly, this warning doesn't have any visual impact but I still would like to fix it but not sure how. With this question, I was hoping to get some sort of guidance on things to try. Any idea?

# ajax - 自动保存表单草稿

> ID：14370885
> 
> 赞同：2
> 
> 时间：2013-01-17T01:36:40.460
> 
> 标签：ajax, ruby-on-rails-3

Stack Overflow 如何自动保存此表单的草稿？我认为是 AJAX。是否有使用此功能的 rails 方式或 gem？

此外，它实际上是一个单独的草稿模型，还是自动创建表单，然后从那里开始使用编辑操作？

我知道我是在专门询问 Stack Overflow 的用法，但是，一般来说。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T07:13:56.737

您可以使用[Sisyphus.js](http://simsalabim.github.com/sisyphus/)或[Garlic.js](http://garlicjs.org/)。虽然 StackOverflow 使用 AJAX，但他们使用 HTML5 localStorage 在本地保存表单数据。

Rails 宝石：[garlicjs-rails](https://github.com/nashby/garlicjs-rails)，[sisyphus-rails](https://github.com/dnoonan/sisyphus-rails)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:49:24.610

首先，您应该使用 jquery 获取要保存在数据库中的文本，如下所示：

```
var text=$("#textToBeSaved").val(); 
```

那么你应该让你的代码调用将文本保存在数据库中的服务器页面，如下所示：

```
$(".sumButton").click(function()
{
    var text=$("#textToBeSaved").val();
    $.post("pageThatWillSaveToDB.php",{textToBeSaved:text},function(result)
    {
        alert("The Data is Saved");
    }
}); 
```

在名为`pageThatWillSaveToDB.php`您的页面中，您应该执行以下代码：

```
$text=$_POST['textToBeSaved'];
// connectToDatabase();
mysql_query("insert into SomeTable values(null,'{$text}')"); 
```

# javascript - How can I improve or reduce redundancy of this javascript?

> ID：14370894
> 
> 赞同：1
> 
> 时间：2013-01-17T01:37:01.160
> 
> 标签：javascript, jquery, performance

I'm trying to concatenate a string from certain inputs in a form, and populate another input with that string. I've included my script below, and linked to a js fiddle.

I think the code inside the conditionals in the each() is too redundant, but I can't seem to make it work any other way. Any suggestions are appreciated.

```
var $namers = $(".namer");
$namers.on('change', function () {
    var length = $namers.length - 1;
    var nameString = "";
    $namers.each(function (i) {
        var delimiter = "";
        if ($(this).find(":selected").attr('value')) {
            if (i < length) delimiter = ": ";
            thisVal = $(this).find(":selected").text();
            nameString = nameString + thisVal + delimiter;
        } else if ($(this).is("input") && $(this).val()) {
            if (i < length && $(this).hasClass("from")) delimiter = "-";
            thisVal = $(this).val();
            nameString = nameString + thisVal + delimiter;
        }
    });
    $("#summary").val(nameString);
}); 
```

Here is my original: [http://jsfiddle.net/3HsQW/](http://jsfiddle.net/3HsQW/)

And a first stab at improving things using an array, which I'm not sure is much better. [http://jsfiddle.net/3HsQW/1/](http://jsfiddle.net/3HsQW/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:01:53.203

我尝试了其他两个答案，但都没有奏效。我还了解到我应该使用[http://codereview.stackexchange.com](http://codereview.stackexchange.com)。

我最终决定这样做（尽管我对这是否会帮助其他人有所保留）：

```
var $namers = $(".namer");
$namers.on('change', function () {
    var length = $namers.length - 1;
    var nameString = "";
    var names = [];
    $namers.each(function (i) {
        var delimiter = "";
        if (i < length) delimiter = ": ";
        if ($(this).find(":selected").attr('value')) {
            names[i] = $(this).find(":selected").text() + delimiter;
        } else if ($(this).is("input") && $(this).val()) {
            if ($(this).hasClass("from")) delimiter = "-";
            names[i] = $(this).val() + delimiter;
        }
        if (names[i]) nameString += names[i];
    });
    $("#summary").val(nameString);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:48:57.360

我还没有完全测试它，但这样的东西也应该可以工作：

```
var $namers = $('.namer');

$namers.on('change', function () {
    var nameString = '';

    $namers.each(function(i) {
        var $this = $(this);
        var $selected = $this.find(':selected');

        if ($selected.attr('value')) {
            nameString += $selected.val() + ': ';
        } else if ($this.is('input') && $this.val()) {
            nameString += $this.val() + $this.hasClass('from') ? '-' : '';
        }
    });

    $('#summary').val(nameString);
}); 
```

条件将`i < length`始终为`false`，因此您可以删除该代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T02:03:46.693

这是 jquery 阻碍的罕见情况之一。我推荐类似的东西：

```
$("option").each( function() { this.value = $(this).text(); } );
$namers = $(".namer");
$names.on('change', function () {
    var length = $namers.length - 1;
    var nameString = "";
    $namers.each(function (i) {
        nameString += this.value;
        if (this.tagName == 'SELECT') nameString += ':';
        if (this.className == 'from') nameString += '-';
    });
    $("#summary").val(nameString);
}); 
```

# php - PHP if(cookie is set Redirect loop

> ID：14370900
> 
> 赞同：4
> 
> 时间：2013-01-17T01:37:21.720
> 
> 标签：php, redirect, cookies

So, I'm having trouble with quite simple PHP, as I am not adept in anyway with it. So here's the code:

```
 <?php 
if(!isset ($_COOKIE['cookie'])) {
 header("Location: index.html");
} else {
 header("Location: index2.php");
 ?> 
```

It's at the top of an HTML document, before any other HTML because I've heard header won't work otherwise (that statement could prove my ignorance itself). But basically, I have an agreement page you must agree to before continuing to the site, but it's not considered my index file. So I need this redirect to detect the if the cookie that is set by the agreement.php exists or not, and I assume that this syntax is correct, but it seemingly doesn't work. I used an echo "

Any ideas on how to fix? Thank you in advance.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T01:48:06.177

尝试使用此代码：

index.php 应该是这个（文件开始到结束）

```
<?php

if (!isset($_COOKIE['cookie']))
{
    header('Location: http://www.example.com/index2.php');
    exit;
}

?>
<!DOCTYPE html>
...rest of your HTML code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T12:12:50.757

您还缺少 else 上的右花括号

```
<?php 
if(!isset ($_COOKIE['cookie']))
 {
 header("Location: index.html");
} 
else 
{
 header("Location: index2.php");
}
 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-31T20:03:13.953

我宁愿使用这些方面的东西

```
 <?php

 echo $htmlHeader;

 while($stuff){

 echo $stuff;

  }

 echo "<script>window.location = 'url'</script>";
  ?> 
```

它对我很好

# php - 我的 ajax 脚本正在一个 div 中加载我的整个 index.php 站点

> ID：14370905
> 
> 赞同：0
> 
> 时间：2013-01-17T01:38:44.387
> 
> 标签：php, javascript, mysql, ajax

我创建了一个简单的文本输入框，用于使用 ajax 从数据库中获取数据。

```
<form method="post" action="">
        <input type="text" id="txt1" onkeyup="showHint(this.value);" />
</form> 
```

文本框在我的 ajax.js 文件中调用一个名为 showHint(str) 的 ajax 函数，如下所示：

```
function showHint(str){

var xmlhttp;
if (str.length==0)
  { 
  document.getElementById("txtHint").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","index.php?page=getList&q="+str,true);
xmlhttp.send(); 
```

}

从上面的脚本可以看出，它会打开我的 PHP 脚本，该脚本用于从数据库中获取详细信息，如下所示：

```
 //get the q parameter from URL
$q = $_GET["q"];

$sql = "SELECT Name FROM Country WHERE Name LIKE '" . $q . "%'";

$recordSet = $_dbConn->query($sql);
$a = $recordSet->getrow();

 //lookup all hints from array if length of q>0
 if (strlen($q) > 0)
   {
   $hint="";
   for($i=0; $i<count($a); $i++)
     {
     if (strtolower($q)==strtolower(substr($a[$i],0,strlen($q))))
       {
       if ($hint=="")
         {
         $hint=$a[$i];
         }
       else
         {
         $hint=$hint." , ".$a[$i];
         }
       }
     }
   }

 // Set output to "no suggestion" if no hint were found
 // or to the correct values
 if ($hint == "")
   {
   $response="no suggestion";
   }
 else
   {
   $response=$hint;
   }

 //output the response
 echo $response; 
```

问题是我使用的是单个 Index.php 页面，所以这一行：“index.php?page=getList&q="+ 有点像说 www.mydomain.com/index.php?index.php?page=getLet $q。

我怎样才能解决这个问题？我尝试过使用 POST，但仍然无法正常工作。我也尝试删除 JS 中的 index.php 部分，但这也不起作用...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:18:16.600

根据@lethal-guitar - xmlhttp.open("GET","/index.php?page=getList&q="+str,true);

# c# - How to pass variable to Oracle ref cursor

> ID：14370907
> 
> 赞同：1
> 
> 时间：2013-01-17T01:38:48.343
> 
> 标签：c#, oracle, odp.net

I have a CSV file I am parsing out data from which I then need to run against a Oracle database. I have followed along an Oracle tutorial for creating the cursor, but I am not quite sure how change the parameter that I am passing in each time. Do I need to open and close the cursor for each new parameter or could I use an array? I am referring to accountNumber below.

```
string oradb = "connection string here";

OracleConnection conn = new OracleConnection(oradb);

OracleCommand cmd = new OracleCommand();
cmd.Connection = conn;
cmd.CommandText = "X.REJECTS_DATA.GETCURSORS";
cmd.CommandType = CommandType.StoredProcedure;

OracleParameter ACTNUM = new OracleParameter();
ACTNUM.OracleDbType = OracleDbType.Decimal;
ACTNUM.Direction = ParameterDirection.Input;
ACTNUM.Value = accountNumber;
cmd.Parameters.Add(ACTNUM);

OracleParameter REJECTS_C = new OracleParameter();
REJECTS_C.OracleDbType = OracleDbType.RefCursor;
REJECTS_C.Direction = ParameterDirection.Output;
cmd.Parameters.Add(REJECTS_C);

try
{
    conn.Open();
    OracleDataReader objReader = cmd.ExecuteReader();
    Label3.Text = objReader.ToString();
}
catch (Exception ex)
{
    Label3.Text = string.Format("Exception: {0}", ex.ToString());

} 
```

Package specification:

```
PACKAGE "x"."REJECTS_DATA" IS

PROCEDURE "GETCURSORS" (
"ACTNUM" IN NUMBER, 
"REJECTS_C" OUT SYS_REFCURSOR);

END "REJECTS_DATA"; 
```

Package body:

```
PACKAGE BODY "X"."REJECTS_DATA" IS

PROCEDURE "GETCURSORS" (
"ACTNUM" IN NUMBER, 
"REJECTS_C" OUT SYS_REFCURSOR) IS

BEGIN

OPEN REJECTS_C FOR SELECT * FROM X.A    WHERE  X.A.ACCOUNT = ACTNUM;

END "GETCURSORS";

END "REJECTS_DATA"; 
```

# common-lisp - 如何判断一个列表是否为alist

> ID：14370909
> 
> 赞同：2
> 
> 时间：2013-01-17T01:39:02.810
> 
> 标签：common-lisp

有没有一种简单的方法来确定列表是否实际上是 alist ？

我的第一次尝试：

```
(defun alistp (list)
    (and (listp list)
         (every (lambda (c)
                    (and (consp c)
                         (or (atom (cdr c))
                             (null (cddr c))))))
                list))) 
```

返回 T 为`(alistp '((1 . 2) (2 . 3)))`

但 NIL 为`(alistp '((1 . (4 5 6))))`

有解决办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T05:37:06.473

好，我们来看看关联列表的[定义](http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_a.htm#association_list)：

> 关联列表 n. 一个 conses 列表，表示键与值的关联，其中每个 cons 的 car 是键，而 cdr 是与该键关联的值。

鉴于此，这将是一个可能的实现`alistp`：

```
(defun alistp (alist)
  (and (listp alist)           ; a list
       (every #'consp alist))) ; of conses 
```

现在，从您的代码示例中，我可以看出您可能已经能够自己实现它，但您似乎对 alist 有不同的定义。我假设您所看到的 alist 示例都或多或少看起来像这样：`((a . x) (b . y))`，也许`((a . x) (b . (y z)))`但是带有列表作为其最后一个元素的虚线列表只是 - 一个列表，从您的示例输入中可以清楚地看到您想要允许列表作为价值观。（你为什么不呢？）

我想你必须意识到的是，你的示例输入`((1 . (4 5 6)))`与*完全相同*，`((1 4 5 6))`这就是我在代码中使用列表作为其值的大多数情况下看到的 alist 的方式——至少，我通常是这样编写它们的。

现在，您似乎还想排除`nil`值，尽管它们也是列表——只是空的`()`。所以，你真正想到的定义是这样的：

> 关联列表 n. 一个 cons 单元列表，表示键与非 nil 值的关联，其中每个 cons 的 car 是键，而 cdr 是与该键关联的值。

如果这确实是您想要的，请遵循新定义：

```
(defun alistp (alist)
  (flet ((true-cdr-p (element)
           (and (consp element)        ; cons cell
                (cdr element))))       ; with non-nil cdr (i.e. value) 
    (and (listp alist)                 ; a list
         (every #'true-cdr-p alist)))) ; of cons cells with non-nil cdr 
```

或类似的东西。不过，我建议坚持使用上面的简单版本。

# c# - C# SQL Server 的存储过程 CLR 的 Postgres 模拟

> ID：14370911
> 
> 赞同：1
> 
> 时间：2013-01-17T01:39:28.080
> 
> 标签：c#, visual-studio, sql-server-2008, postgresql, user-defined-functions

众所周知，SQL Server 提供了一些扩展机制，如用户定义的函数、存储过程、触发器......

我有在 SQL Server 2008 中运行的 C# 代码（它是使用 Visual Studio 2008 部署在 DBMS 中的存储过程，然后使用`exec dbo.SP_Analysis 'MyTable','Colum1,Column2',300,0`命令在 SQL Server 2008 中获取结果）定义为：

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Security;
using System.Runtime.InteropServices;
using System.Data;
using System.Data.SqlClient;
using System.Data.SqlTypes;
using Microsoft.SqlServer.Server;

public partial class StoredProcedures
{              
  [Microsoft.SqlServer.Server.SqlProcedure]
  public static void SP_Analysis(
     SqlString table, [SqlFacet(MaxSize = -1)] SqlString columns,
     int Nocustomers,
     Boolean result)
  {
     String query = "";

     using (SqlConnection conn = new SqlConnection("context connection=true"))
     {
        conn.Open();
        SqlCommand cmd = conn.CreateCommand();
        query = "SELECT " + (String)columns + " FROM " + (String)table + ";";
        cmd.CommandText = query;
        SqlDataReader reader = cmd.ExecuteReader();
        MyObject _myObject = new Object(Nocustomers);
        while (reader.Read())
           _myObject.read(reader);
        reader.Close();        
        conn.Close();
      } //END SqlConnection conn 
  }        
}

class MyObject
{
   int NoCustomers; 
   //some definitions

  public MyObject(int NoCustomers)
  {
     this.NoCustomers = NoCustomers;
     //some stuff
  }

   public void read(SqlDataReader reader)
   {
     Object[] record = new Object[NoCustomers];
     reader.GetValues(record);
     //more stuff
   }
} 
```

很明显，我正在使用 .NET c# 可用语言，然后通过 Visual Studio 2008 部署它以在 SQL Server 2008 中创建存储过程。

现在我的问题是 Postgres 中所有这些的类比是什么？

1.  可以使用什么语言来扩展 Postgres 的功能？
2.  在 Postgres 中部署 UDF 与 Visual Studio 有何相似之处？
3.  `exec dbo.UDF`Postgres中的类比是什么？

我正在阅读 Postgres 使用 C 语言来定义 UDF，可能是 C++，但其他我不知道......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T01:43:24.163

1.  PL/Python、PL/Perl、PL/Java、PL/TCL、PL/V8 (JavaScript) 和 C 程序。但是，对于大多数工作，您只需使用 PL/PgSQL，这是用于过程的 SQL 的扩展版本。

2.  一个都没有，真的。PgAdmin-III 之类的。您只需[执行 SQL 命令来创建函数](http://www.postgresql.org/docs/current/static/xfunc-c.html)，或者[在 C 过程的情况下，您可以使用带有 PGXS 的 Makefile](http://www.postgresql.org/docs/current/static/xfunc-c.html)。

3.  不知道，这在 SQL Server 中有什么作用？文档链接？如果只是“调用此程序”，那么`SELECT my_function();`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:44:56.253

PostgreSQL 支持。存储过程语言的数量，包括 PL/SQL 风格，一种基于 Perl，一种基于 Python，一种基于 Tcl。

PL/pgSQL 是一种直接嵌入 SQL 的块结构语言，与 Oracle 的 PL/SQL 非常相似。

# perl - 如何在 Perl 中编写包装表格式

> ID：14370916
> 
> 赞同：1
> 
> 时间：2013-01-17T01:40:05.960
> 
> 标签：perl

我正在用 Perl 编写以表格格式指导我的报告，但是每当数据填充的文本太长时我就会遇到问题。有没有办法编写代码，以便它可以将行包装成多个。这是我的代码和输出。谢谢！

```
printf "\n%-${max1}s %-${max2}s %-15s\n", "====", "====", "=====" ;
printf "%-${max1}s %-${max2}s %-15s\n", "Code", "Item", "Group" ;
printf "%-${max1}s %-${max2}s %-15s\n", "====", "====", "=====" ;

foreach my $f (@{$rpt_ptr}) {
printf "%-${max1}s %-${max2}s %-15s\n", "$$f{code}", "$$f{item}", "$$f{group}", 
} 
```

如果我的项目列表太长，输出表将被扩展太长，即：-

```
====  =====                                                                                =====      

Code  Item                                                                                 Group

====  =====                                                                                =====

A1011 aaaaaa, bbbbb, ccccc, ddddd, eeeee, fffff, ggggg, hhhhh, iiiii, jjjjjj, kkkkk, llll    B
    B101  cccccc                                                                                 A 
```

如果我能拿出一张这样的桌子，我会很高兴：

```
====  =====                                                                                =====      
Code  Item                                                                                 Group
====  =====                                                                                =====
A1011 aaaaaa, bbbbb, ccccc, ddddd,                                                           B
      eeeee, fffff, ggggg, hhhhh,   
      iiiii, jjjjjj, kkkkk, llll
B101  cccccc                                                                                 A 
```

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T03:16:42.037

Perl 最初是为格式化文本文件而编写的。它包括一个相当有趣的表单生成工具，包括以您指定的方式换行的能力。我已经很久很久没有看到它使用了，但它仍然是语言的一部分。

它在 perldoc 下[perlform](http://perldoc.perl.org/perlform.html)。

* * *

### 例子

```
#! /usr/bin/env perl

use strict;
use warnings;
use feature qw(say);

my ($invoice, $description, $amount);
while ( chomp ( my $line = <DATA> ) ) {
    ( $invoice, $description, $amount ) = split /:/ => $line;
    write;
}

format STDOUT_TOP =
Invoice   Description       Amount
=======   ===========       =======
.
format STDOUT = 
@<<<<<<   ^<<<<<<<<<<<<<<   @###.##
$invoice, $description,     $amount
          ^<<<<<<<<<<<<<<
          $description
          ^<<<<<<<<<<<<<<
          $description
          ^<<<<<<<<<<<<<<
          $description
          ^<<<<<<<<<<<<<<
          $description
.
__DATA__
One:This line contans a lot of text that I have to process and I have no idea what it is:2.30
Two:Here's another line that contains lots of data that won't fit on a single line:4.40
Three:And one more line of extra long data that may or may not fit on a single line:5.10 
```

### 输出

```
Invoice   Description       Amount
=======   ===========       =======
One       This line            2.30
          contans a lot
          of text that I
          have to process
          and I have no
Two       Here's another       4.40
          line that
          contains lots
          of data that
          won't fit on a
Three     And one more         5.10
          line of extra
          long data that
          may or may not
          fit on a single 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T07:58:42.657

`format`s真的是要走的路。

这是使用[Perl6::Form](https://metacpan.org/module/Perl6%3a%3aForm)的解决方案：

```
use Perl6::Form;

my @data = (
    ['A1011', 'aaaaaa, bbbbb, ccccc, ddddd, eeeee, fffff, ggggg, hhhhh, iiiii, jjjjjj, kkkkk, llll', 'B'],
    ['B101', 'cccccc', ''],
);

print form
    "====  =====                                              =====",
    "Code  Item                                               Group",
    "====  =====                                              =====";

foreach (@data) {
    print form
        "{<<<<}{[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[}             {<<}", @$_ ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T03:19:25.453

如果您想要一些非常基本/特定（不可靠）的东西，请每隔四个逗号强制换行：

在你的循环之前`printf`：

```
$$f{item} =~ s/(,[^,]+,[^,]+,[^,]+,)/$1\n/g; 
```

* * *

正如大卫建议的那样，最好的选择可能是使用[perlform （5.8.8 适合你）](http://perldoc.perl.org/5.8.8/perlform.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T07:00:51.830

我终于通过以下代码完成了它，在这里发布以分享：-

```
foreach my $f (@{$rpt_ptr}) {
#   printf "%-${max1}s %-${max2}s %-15s\n", "$$f{code}", "$$f{item}", "$$f{group}", 
format STDOUT_TOP =
===============     =========================     ========= 
Code                 Item                     Group
===============     =========================     ========= 
.

format STDOUT =
@<<<<<<<<<<<<<<     ^<<<<<<<<<<<<<<<<<<<<<<<<<     @<<<<<<<<
$$f{code}               $$f{item}                                              $$f{group} 
~~                ^<<<<<<<<<<<<<<<<<<<<<<<<
                   $$f{item}
.
write ;
} 
```

对于所有回答我问题的人，非常感谢您的帮助，我非常感谢！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T05:44:06.247

您可以使用正则表达式来包装文本。由于您正在逐行打印文件，因此您可以在标量变量中获取每一行并检查该标量变量的长度并插入换行符`\n`。

喜欢：

```
 $var = "\n%-${max1}s %-${max2}s %-15s\n", "====", "====", "=====" ;
    $var .= "%-${max1}s %-${max2}s %-15s\n", "Code", "Item", "Group" ;
    $var .= "%-${max1}s %-${max2}s %-15s\n", "====", "====", "=====" ;

    ## Adding new line character after 20 characters.
    my $startIndex = 0;

    while( ($startIndex < length($var) && (length($var) > 20) ) {
     print substr($var, $startIndex, 20)  . "\n";
     $startIndex = $startIndex + 20;
    } 
```

# javascript - 如何加快动画汽车的速度并使其在它之前淡出？

> ID：14370919
> 
> 赞同：1
> 
> 时间：2013-01-17T01:40:19.603
> 
> 标签：javascript, jquery, jquery-animate

我正在使用 Jquery 在网页顶部为汽车制作动画。我正在使用此代码使其从左向右移动。

```
/* Car */
function animateCar($car, endPos, duration) {
    $car.animate({
        left: endPos + "px",
    }, { duration: duration, easing: 'linear', queue: false });
    setTimeout(function() {
        $car.animate({
            opacity: 0
        }, { duration: 6000, easing: 'linear', queue: false });
    }, 74000);
}
animateCar($(".car"), 1200, 80000); 
```

目前，它离开了我的 1000px 框，我希望它在到达它之前淡出。我也希望它移动得快一点。

谢谢！

[演示](http://www.uLabs.co.uk/ParkLaneDriving)：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:51:14.703

您可能会考虑将动画触发器链接在一起，并在两者之间设置延迟。

```
function animateCar($car, endPos, duration) {
    var opacityDuration = parseInt(duration * .75);
    $car.animate({
        left: endPos + "px",
     }, { duration: duration, easing: 'linear', queue: false })
    .delay(duration - opacityDuration)
    .animate({
        opacity: 0
    }, { duration: opacityDuration, easing: 'linear', queue: false });
} 
```

在这里，我从整个动画的 3/4 处开始淡入淡出。您当然可以根据需要更改此设置。如果你想加快整个动画的速度，只需通过更短的持续时间。

# google-checkout - BuyNow 按钮不起作用

> ID：14370923
> 
> 赞同：0
> 
> 时间：2013-01-17T01:40:35.823
> 
> 标签：google-checkout

我正在尝试在我的网页上添加 Checkout BuyNow 按钮。该按钮按预期显示，但当我按下它时没有任何反应。这是代码：

```
<span> 
<form 
action=https://checkout.google.com/api/checkout/v2/checkoutForm/Merchant/XXXXXXXXXXX id="BB_BuyButtonForm" method="post"  name="BB_BuyButtonForm" target="_top"> 
<input name="item_name_1" type="hidden" value=""/> 
<input name="item_description_1" type="hidden" value=""/> 
<input name="item_quantity_1" type="hidden" value="1"/> 
<input name="item_price_1" type="hidden" value="24.9"/> 
<input name="item_currency_1" type="hidden" value="USD"/> 
<input name="item_weight_1" type="hidden" value="3.0"/> 
<input name="item_weight_unit_1" type="hidden" value="LB"/> 
<input name="_charset_" type="hidden" value="utf-8"/> 
<input alt="" 
src="https://checkout.google.com/buttons/buy.gif?merchant_id=XXXXXXXXXXX&amp;w=117&amp;h=48&amp;style=white&amp;variant=text&amp;loc=en_US" 
type="image"/> 
</form> 
</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:45:24.137

尝试将按钮托管在`<form>`元素`<div>`而​​不是`<span>`元素中。

表单是块级元素。跨度是一个内联元素。内联元素中不能有块元素。根据浏览器的不同，单击按钮时可能会出现不同的行为。

# java - 如何在列表视图中包含更多表字段？

> ID：14370924
> 
> 赞同：0
> 
> 时间：2013-01-17T01:40:37.477
> 
> 标签：java, android

我带来了两个领域的网络服务并填充了一个列表视图。

我需要一个多行文本视图。我的组件足够大，至少可以显示 4 行，但只显示 2 行。

如何在列表视图中添加更多子项？

我想在列表视图中包含更多表字段。

```
private void pesquisarProdutos() {
    dialog = ProgressDialog.show(this, "Aguarde...",
            "Pesquisando registros.", false, true);
    dialog.setIcon(R.drawable.ic_launcher);
    dialog.setCancelable(false);

    DSRESTConnection conn = gc.getConnection();
    final TServerMethods1 serv = new TServerMethods1(conn);

    new AsyncTask<Void, Void, Void>() {

        @Override
        protected Void doInBackground(Void... params) {
            try {
                TDataSet ds;
                // limpa a lista a cada pesquisa
                dataList.clear();
                ds = serv.ConsultaItens(VendaClienteActivity.edtItem
                        .getText().toString());
                while (ds.next()) {
                    HashMap<String, String> item = new HashMap<String, String>();
                    item.put("nome", ds.getValue("NOME").GetAsString());
                    item.put("id", ds.getValue("CODIGO").GetAsString());
                    dataList.add(item);
                }
                // desabilita o dialog
                dialog.dismiss();
                finalizaDialogo(false, "");

            } catch (Exception e) {// desabilita o dialog
                dialog.dismiss();
                finalizaDialogo(true, e.toString());
            }
            return null;
        }
    }.execute();
}

private void finalizaDialogo(final boolean temErro, final String msg) {
    handler.post(new Runnable() {

        @Override
        public void run() {
            if (temErro)
                Toast.makeText(ListaItensProdutosActivity.this, msg,
                        Toast.LENGTH_LONG).show();
            else
                AtualizarTela();
            // finaliar o dialogo
            dialog.dismiss();
        }
    });
}

private void AtualizarTela() {
    String[] from = new String[] { "nome", "id" };
    int[] to = new int[] { android.R.id.text1, android.R.id.text2 };
    int layoutNativo = android.R.layout.two_line_list_item;

    listItens.setAdapter(new SimpleAdapter(this, dataList, layoutNativo,
            from, to));

    if (listItens == null) {

        Toast.makeText(ListaItensProdutosActivity.this,
                "Não foi encontrado dados nesta busca.", Toast.LENGTH_LONG)
                .show();
        finish();

    }

} 
```

我的 XML

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/layoutCabecalho"
        android:layout_width="match_parent"
        android:layout_height="40dp"
        android:background="@drawable/barra"
        android:gravity="center" >

        <Button
            android:id="@+id/btnClose"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Cancelar"
            android:textSize="14sp" />

        <LinearLayout
            android:id="@+id/layoutCabecalhoEsquerdo"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:gravity="center_vertical|left" >
        </LinearLayout>

        <LinearLayout
            android:id="@+id/layoutCabecalhoCentro"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="3"
            android:gravity="center" >

            <TextView
                android:id="@+id/textoTitulo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Listagem"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="#FFFFFF" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/layoutCabecalhoDireito"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:gravity="center_vertical|right" >
        </LinearLayout>
    </LinearLayout>

    <ListView
        android:id="@+id/listaItensProdutos"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:02:36.013

您的列表需要一个自定义适配器[https://github.com/cplain/custom-list](https://github.com/cplain/custom-list)是我为朋友做的一个粗略示例，希望它可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:32:50.483

几乎工作了，加上我没有正确地做到这一点。

只带来表的最后一条记录

这是我的课堂活动

```
public class ListaPacoteActivity extends ListActivity {

    private GetConnection gc = new GetConnection();
    private Context pacoteList;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        this.getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
        this.getWindow().clearFlags(
                WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        List<Pacotes> pacoteList = new ArrayList<Pacotes>();

        DSRESTConnection conn = gc.getConnection();
        TServerMethods1 serv = new TServerMethods1(conn);
        TDataSet ds;
        // String idCharCodCli = VendaClienteActivity.edtCliente.getText()
        // .toString();
        // String[] idNumCli = idCharCodCli.split("-");
        // String idCharCodPro = VendaClienteActivity.edtProfissional.getText()
        // .toString();
        // String[] idNumPro = idCharCodPro.split("-");
        try {
            ds = serv.ConsultaDadosPacote("1000", "4");// idNumCli[0],
                                                        // idNumPro[0]);
            Pacotes pct = new Pacotes();

            while (ds.next()) {
                String concPacote = ds.getValue("CODIGO_PACOTE").toString()
                        + " - " + ds.getValue("NOME_PACOTE").toString();
                String concSessao = "Sessão: "
                        + ds.getValue("CODIGO_SERVICO").toString() + " - "
                        + ds.getValue("NOME_SERVICO").toString();
                String concCreditos = "Créditos restantes: "
                        + ds.getValue("CREDITOS_RESTANTES").toString();
                String concStatus = "Status: "
                        + ds.getValue("STATUS").toString();
                String concHabilidade = "Habilidade: "
                        + ds.getValue("HABILIDADE").toString() + " - "
                        + ds.getValue("CODIGO_COMPRA").toString();
                pct.setPacote(concPacote);
                pct.setSessao(concSessao);
                pct.setCreditos(concCreditos);
                pct.setStatus(concStatus);
                pct.setHabilidade(concHabilidade);
                // adiciona os dados no list
                pacoteList.add(pct);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        setListAdapter(new PacoteAdapter(getBaseContext(), pacoteList));
    }

} 
```

波乔

```
public class Pacotes {
    private String pacote = "";
    private String sessao = "";
    private String creditos = "";
    private String status = "";
    private String habilidade = "";
    public String getPacote() {
        return pacote;
    }
    public void setPacote(String pacote) {
        this.pacote = pacote;
    }
    public String getSessao() {
        return sessao;
    }
    public void setSessao(String sessao) {
        this.sessao = sessao;
    }
    public String getCreditos() {
        return creditos;
    }
    public void setCreditos(String creditos) {
        this.creditos = creditos;
    }
    public String getStatus() {
        return status;
    }
    public void setStatus(String status) {
        this.status = status;
    }
    public String getHabilidade() {
        return habilidade;
    }
    public void setHabilidade(String habilidade) {
        this.habilidade = habilidade;
    }
} 
```

类适配器

```
public class PacoteAdapter extends BaseAdapter {
    private Context context;
    private List<Pacotes> pacoteList;

    public PacoteAdapter(Context context, List<Pacotes> pacotelist){
        this.context = context;
        this.pacoteList = pacotelist;
    }

    @Override
    public int getCount() {
        return pacoteList.size();
    }

    @Override
    public Object getItem(int position) {
        return pacoteList.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // Recupera o pacote da posição atual
        Pacotes pct = (Pacotes) getItem(position); 

        // Cria uma instância do layout XML para os objetos correspondentes
        // na View
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View view = inflater.inflate(R.layout.custom_row_view, null);
        // pacote
        TextView textPacote = (TextView) view.findViewById(R.id.pacote);
        textPacote.setText(pct.getPacote());
        //sessão
        TextView textSessao = (TextView) view.findViewById(R.id.sessao);
        textSessao.setText(pct.getSessao());
        //creditos
        TextView textCredito = (TextView) view.findViewById(R.id.credito);
        textCredito.setText(pct.getPacote());
        //status
        TextView textStatus = (TextView) view.findViewById(R.id.status);
        textStatus.setText(pct.getStatus());
        //habilidade
        TextView textHabilidade = (TextView) view.findViewById(R.id.habilidade);
        textHabilidade.setText(pct.getHabilidade());

        return view;
    }   
} 
```

是 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"  
    android:orientation="vertical" >

    <TextView
        android:id="@+id/pacote"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#0000FF"
        android:textSize="14sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/sessao"
        android:textColor="#228B22"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/credito"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/status"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/habilidade"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

# r - 在 R (ggplot) 中使用 fortify 函数时出错

> ID：14370926
> 
> 赞同：10
> 
> 时间：2013-01-17T01:40:55.867
> 
> 标签：r, ggplot2

我正在尝试使用 R 中的函数 fortify 来绘制地图。但是我在处理数据时总是出错。我使用以下代码读取了形状文件：

```
shape <- readShapeSpatial("Lond_City/lond_city.shp") 
```

可以在以下保管箱位置找到 shapefile： [https ://www.dropbox.com/sh/d4w6saailydtu1r/5oIa56xV6S](https://www.dropbox.com/sh/d4w6saailydtu1r/5oIa56xV6S)

然后我尝试使用以下命令：

```
shape1 <- fortify(shape,region="data") 
```

在上面的代码中，我应该用什么来代替“数据”。这是一个看起来令人困惑的地方。我可以在 R 中打开数据或 shapefile。但是，当我运行 fortify 行时，我收到以下错误：

> '[.data.frame'(attr, , region) 中的错误：选择了未定义的列

谁能告诉我如何通过示例正确强化形状文件？我想使用 fortify 的原因是我想将形状文件与数据点结合起来。

太感谢了。

贾巴巴

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T03:01:25.543

您的问题是您需要提供`fortify`一个实际存在的列。如果您`str(lon.shape)`从下面的示例代码中键入，您将看到没有`region`列：

```
> str(lon.shape)
Formal class 'SpatialPolygonsDataFrame' [package "sp"] with 5 slots
  ..@ data       :'data.frame': 1 obs. of  7 variables:
  .. ..$ ons_label: chr "00AA"
  .. ..$ name     : chr "City of London"
  .. ..$ label    : chr "02AA"
  .. ..$ X_max    : num 533843
  .. ..$ y_max    : num 182198
  .. ..$ X_min    : num 0
  .. ..$ y_min    : num 0
  ..@ polygons   :List of 1
  .. ..$ :Formal class 'Polygons' [package "sp"] with 5 slots
  .. .. .. ..@ Polygons :List of 1
  .. .. .. .. ..$ :Formal class 'Polygon' [package "sp"] with 5 slots
  .. .. .. .. .. .. ..@ labpt  : num [1:2] 532464 181220
  .. .. .. .. .. .. ..@ area   : num 3151465
  .. .. .. .. .. .. ..@ hole   : logi FALSE
  .. .. .. .. .. .. ..@ ringDir: int 1
  .. .. .. .. .. .. ..@ coords : num [1:771, 1:2] 531027 531029 531036 531074 531107 ...
  .. .. .. ..@ plotOrder: int 1
  .. .. .. ..@ labpt    : num [1:2] 532464 181220
  .. .. .. ..@ ID       : chr "0"
  .. .. .. ..@ area     : num 3151465
  ..@ plotOrder  : int 1
  ..@ bbox       : num [1:2, 1:2] 530967 180404 533843 182198
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : chr [1:2] "x" "y"
  .. .. ..$ : chr [1:2] "min" "max"
  ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slots
  .. .. ..@ projargs: chr "+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +units=m +no_defs" 
```

相反，请尝试使用`name`，如下所示：

```
lon.df <- fortify(lon.shape, region = "name") 
```

产生这个数据框：

```
> head(lon.df)
      long      lat order  hole piece            group             id
1 531026.9 181611.1     1 FALSE     1 City of London.1 City of London
2 531028.5 181611.2     2 FALSE     1 City of London.1 City of London
3 531036.1 181611.5     3 FALSE     1 City of London.1 City of London
4 531074.0 181610.3     4 FALSE     1 City of London.1 City of London
5 531107.0 181609.3     5 FALSE     1 City of London.1 City of London
6 531117.1 181608.9     6 FALSE     1 City of London.1 City of London 
```

这是一种解决方法，从开始到结束：

```
library(rgdal)
library(ggplot2)
library(rgeos)

shape.dir <- "c:/test/london" # use your directory name here

lon.shape <- readOGR(shape.dir, layer = "lond_city")
lon.df <- fortify(lon.shape, region = "name")

ggplot(lon.df, aes(x = long, y = lat, group = group)) +
    geom_polygon(colour = "black", fill = "grey80", size = 1) +
    theme() 
```

...导致以下结果：

![截屏](../Images/218d6f35620458d640b8c7549aa23494.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T03:00:32.480

你应该`label`把`data`.

```
require(maptools); require(ggplot2)
shape <- readShapeSpatial("Lond_City/lond_city.shp")
shape1 <- fortify(shape,region="label") 
```

为了找出这一点，我检查了以下数据元素`shape`：

```
> shape@data
  ons_label           name label    X_max    y_max X_min y_min
0      00AA City of London  02AA 533842.7 182198.4     0     0 
```

这表明`ons_label`或`name`也会起作用，并且可能更适合您的目的。

请注意，您的形状文件有点不寻常，因为似乎只有一组。

# git - 如何保持两个 git 存储库同步？

> ID：14370929
> 
> 赞同：6
> 
> 时间：2013-01-17T01:41:34.767
> 
> 标签：git

这是场景。我有两台机器，“台式机”和“笔记本电脑”。

在桌面上我这样做：

```
mkdir git_test
cd git_test
git init
dd if=/dev/urandom of=test.img bs=1k count=1000
git add test.img
git commit -m "Added first image" 
```

然后在笔记本电脑上我做：

```
git clone [USER]@desktop:/home/[USER]/git_test    
cd git_test
dd if=/dev/urandom of=test2.img bs=1k count=1000
git add test2.img
git commit -m "Added second image" 
```

然后我希望我桌面上的 git repo 看起来像我笔记本电脑上的 git repo。在笔记本电脑上，我发出以下命令： git push origin master

但后来我得到：

```
remote: error: refusing to update checked out branch: refs/heads/master
remote: error: By default, updating the current branch in a non-bare repository
remote: error: is denied, because it will make the index and work tree inconsistent
remote: error: with what you pushed, and will require 'git reset --hard' to match
remote: error: the work tree to HEAD.
remote: error: 
remote: error: You can set 'receive.denyCurrentBranch' configuration variable to
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into
remote: error: its current branch; however, this is not recommended unless you
remote: error: arranged to update its work tree to match what you pushed in some
remote: error: other way.
remote: error: 
remote: error: To squelch this message and still keep the default behaviour, set
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'. 
```

如何使这两个存储库保持同步？

错误消息似乎暗示 git 具有我想要的功能，但由于某种原因，它似乎是一个更高级的工作流程。我曾经听到有人说您无法推送到您当前所在的分支，有人可以详细说明一下作为可能的解决方案吗？我对这种性质的解决方案没有任何问题，即，我可以在我的笔记本电脑上的某个分支上工作，在我的桌面上的另一个分支上工作，然后以某种方式同步它们，这样它们就相同了。

*请注意以下事项！*

*   出于几个原因，我不想使用像 github 这样的集中式存储库。首先是安全性。二是简单。第三是由于情况我不会进入这里，我不能指望有互联网连接到某个远程服务器，我只是通过局域网连接了我的两台机器。最后，我想学习如何按照我在这里要求的方式做事，以获得特定的知识。

*   我也不想使用裸仓库，因为裸仓库在根目录中有一堆杂物。这是丑陋和混乱的。我从 subversion 迁移到 git 的全部原因是 git 看起来像一个更清洁、去中心化的解决方案。另外，我有一些非技术人员将在桌面的根目录中操作，他们会被杂乱无章的东西弄糊涂。git 的美妙之处在于（我认为）所有内容都隐藏在 .git 文件夹中。编辑：显然我对这一点还不够清楚。想象一下，我有一个“文档”文件夹，其中包含以下子文件夹：mydata1 和 mydata2。这不是一个人为的例子，这正是我要处理的问题。mydata1 应仅包含“test.img”和该文件，但它现在具有：

    分支配置描述 HEAD hooks info objects refs

我希望能够直接 cd 进入 mydata1 并开始编辑文件，但我必须尝试通过分支 cd，或者甚至只是为了完成工作。*并且为“文档”中的每个*子文件夹都拥有这种目录结构是行不通的。拜托，请不要告诉我这样做。请只回答问题。谢谢。

这两点是我在这里发布这个问题的*全部原因。*请仅在您对此问题有答案的情况下回复。：） 谢谢！！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T01:55:42.757

这样做的一种方法是拉，而不是推。设置好两台机器后，在第一台机器上：

```
git remote add origin [USER]@laptop:/home/[USER]/git_test
git pull # Complains about untracked branch while adding the branch you want to track
git branch --set-upstream master origin/master
git pull 
```

现在您可以从任何一台机器上提取提交。如果您想推动，我不确定如何通过分散设置来实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-12T06:52:14.770

我最近遇到了服务器和桌面不同步的问题。在网上搜索了一段时间后，我无法找到适合我确切情况的答案。所以我打电话给 Rackspace 支持，他们能够为我提供我认为比我在网上找到的更好的答案。

这个特定的线程是最接近我的问题的，所以我想我会在这里分享我是如何解决这个问题的，以防将来有人遇到同样的问题。

**这是出了什么问题**

我正在尝试为 Magento 安装 Sweet Tooth 插件，并按照我们安装 Magento 扩展程序的常规步骤进行操作。这意味着获取一堆文件并将它们放在我的 App、JS 和 Skin 目录中。

在 app/design/adminhtml 目录中有一个“base”文件夹。如果您对 Magento 有所了解，那么您就会知道他们有无数关于弄乱基本文件的警告。简而言之 - 不要这样做。

我假设由于我的本地仓库没有“基本”目录，所以我可以将它放在我的本地机器上。不幸的是，令我沮丧的是，这意味着当我添加它时，它添加了一个“基本”目录，其中只有 Sweet Tooth 的文件。然后当我把它放在服务器上时，它清除了我的整个基本目录和 Boom！Magento 失败了。

幸运的是，我能够通过使用以下救生命令恢复到以前的服务器状态：

> git reset --hard HEAD@{1}

此命令将您带回上一次提交，并且立即一切恢复正常。当然，现在我的服务器和桌面不同步了，因为我的服务器现在落后了一个提交。

为了雪上加霜，我犯了一个非常愚蠢的错误，并从我的计算机中删除了扩展程序的文件，并在我的桌面上进行了另一次提交，所以现在服务器和桌面因两次提交而不同步，git 现在将这些文件放在其缓存中.

**这是我解决它的方法**

显然，这让你处于一个非常烦人的地方，因为在我的服务器上执行 git pull 每次都会清除我的“基本”目录。此外，由于前面有两个提交，我不能只回滚一个提交。

我打电话给 Rackspace，他在这一点上是我心目中的神，并找到了两种不同的方法来解决这个问题，具体取决于您是想从服务器端还是桌面端执行此操作。

事实证明，您确实无法从服务器端执行此操作，因为文件现在不再位于桌面上。虽然他们建议执行 git commit -a 然后从服务器推送，然后从桌面拉取，但这只是行不通，文件不再在桌面上。

因此，您必须从桌面修复它，并且需要将那些该死的文件从缓存中取出。

**从桌面修复同步问题**

为了从缓存中取出文件，我一遍又一遍地发出以下命令，直到我删除的文件也根据 git 被删除。

> git rm -r --cached /folder/directory 目录

和

> git rm --cached /folder/file 文件

现在这已经不在缓存中了，我可以进行提交，最后让 git 知道这些文件实际上已经消失了。

紧随其后的是向主推。然后剩下要做的就是从服务器和中提琴中拉出来，重新开始营业！

** 结论和经验教训 **

这里吸取的教训是一些重要的教训，我正在为其他有类似问题的程序员以及我自己写这篇文章，以提醒我不要再做任何事情。

1.  如果您在服务器上的本地存储库中没有文件夹，请不要将其添加到只有几个文件的本地存储库中，这会将服务器上的目录清零。

2.  如果您不小心搞砸了，请确保使用 git 删除文件，不要从本地文件系统中删除它们

3.  git rest --hard HEAD@{1} 有时可以成为你最好的朋友

我希望这对处于类似情况的其他人有所帮助。我花了几个小时在网上翻阅文档，但找不到任何与我在这里遇到的复杂性有关的东西，所以如果我可以帮助别人节省一些时间并减少一些白发，那么我的噩梦将为世界带来一些好处！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T02:09:15.353

我可能错过了为什么您不想使用裸仓库，并且我相信仅拉式解决方案应该可以正常工作，但我也相信在使用裸仓库时，“垃圾”仍然可以以您想要的方式隐藏.

在您的桌面上，如果您：

```
mkdir git_test
git init --bare git_test 
```

接着：

```
git clone bare_repo_directory new_location 
```

您可以从克隆正常推送和拉取到裸仓库（默认将其引用为原点），没有人需要处理它包含的额外内容；克隆将只有 .git 目录。

要推动你需要运行：

```
git push origin master (assuming you're working out of master) 
```

对于您的笔记本电脑：

```
git clone [USER]@desktop:path_to_bare 
```

克隆副本中的工作应该是正常的。您将从原点（即裸仓库）推送和拉取，但您不需要直接在其中工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-18T01:59:52.973

推送不起作用的原因正是您提到的。默认情况下，如果该存储库（接收推送的远程）当前工作空间指向同一分支，则您无法推送到该分支。因此，如果您的遥控器`master`当前已签出，您将无法推送到`master`.

两个快速解决方案：

如果您在 repo 中已经有任何提交，只需直接签出一个哈希，这将使您处于无头状态，这意味着您不在任何分支：

```
> git checkout <any-hash>
Note: checking out '<any-hash>'.

You are in 'detached HEAD' state... 
```

另一种使用全新 repo 的方法，如果您想推送到`master`，只需将初始分支更改为其他未命名的分支`master`：

```
> git symbolic-ref HEAD refs/heads/non-existent 
```

这将使您处于与`master`在新存储库中类似的状态，在没有提交的分支中。只是你不会抓住主人，因此它将被允许接收推送。

# c++ - C++ DLL 中未解决的外部问题

> ID：14370930
> 
> 赞同：0
> 
> 时间：2013-01-17T01:41:55.670
> 
> 标签：c++, dll, static

我正在尝试开发一个可以实例化的 DLL，然后在调用之间保留其数据。我这样做已经很多年了，所以我遇到了很多问题。首先，我这样声明 DLL：

```
namespace LibTest {
class TestClass
{
public:
    static void __declspec(dllexport) initialize();
    static void __declspec(dllexport) add(double v);
    static double __declspec(dllexport) report();
protected:
    static double DV;
}; 
```

}

DLL 代码如下所示：

```
namespace LibTest {
 void TestClass::initialize()
{
    DV = 0;
 }
 void TestClass::add(double v)
{
    DV = DV+v;
 }  
 double TestClass::report()
{
    return DV;
 } 
```

}

当我尝试使用 Visual Studio 编译它时，它会报告“未解析的外部”。
这里有几个问题 我是否有权利声明我需要做的事情？（保持调用之间的变量） b。如何解决外部引用

正如我所提到的，我已经有很多年没有做任何编程了，所以任何帮助都将不胜感激。

问候

简

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T01:43:27.817

您忘记声明成员变量：

```
 double TestClass::DV; 
```

`LibTest`编辑：这当然应该在 namespace 内

# java - 模拟姜饼

> ID：14370931
> 
> 赞同：0
> 
> 时间：2013-01-17T01:42:02.797
> 
> 标签：java, android, android-holo-everywhere

我正在尝试模拟 Gingerbread（在模拟器上）以测试 HoloEverywhere 库是否有效，但我突然对如何执行此操作感到困惑。我看到三个变量可以更改：

1.  将我的项目构建目标更改为 2.3.3
2.  将清单中的目标 API 更改为 10
3.  将我的模拟器目标更改为 2.3.3

那么为了模仿 Gingerbread，我需要/不需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:37:41.063

单击窗口>虚拟设备管理器>新建然后设置分辨率和内存等所有内容，然后在目标下拉菜单中选择您要运行的android版本，然后当您通过eclipse运行它时，您可以选择带有姜饼的设备。

更多信息在这里：http: [//developer.android.com/tools/devices/index.html](http://developer.android.com/tools/devices/index.html)

希望能帮助到你！

我想这就是你要问的，对吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:38:02.710

您应该创建/使用目标为 2.3.3 的模拟器，并将您的项目设置`minSdkVersion`为 10 以进行测试。无需更改，`targetSdkVersion`因为在这种情况下，模拟器已经强制您的项目使用 SDK 级别 10。

# android - 操作栏选项卡的内容不显示

> ID：14370943
> 
> 赞同：0
> 
> 时间：2013-01-17T01:43:31.010
> 
> 标签：android, actionbarsherlock, android-tabs

我有活动类（）：

```
package com.wts.ui;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockActivity;
//import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.wts.ui.MainActivity.OnContextItemSelectedListener;

import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;

public class TabHostActivity extends SherlockActivity
implements OnContextItemSelectedListener
{

    private ActionBar actionBar;

    protected final static int REQUEST_CODE = 1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        SettingsManager.setPreferedTheme(this);//setTheme       

        super.onCreate(savedInstanceState); 
        setContentView(R.layout.activity_tab_host);     

        actionBar = getSupportActionBar();
        actionBar.setDisplayOptions(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.setDisplayShowTitleEnabled(false);

        Tab tabA = actionBar.newTab().setText("A Tab");

        Fragment fragmentC = new MainActivity();
        tabA.setTabListener(new MyTabsListener(fragmentC));
        actionBar.addTab(tabA);            

    @Override
    public void StartSherlockActivity(Intent intent) {      
             startActivityForResult(intent, REQUEST_CODE);
             //saveInstance of tab position
            }

    public static class MyTabListener<T extends Fragment> implements
    ActionBar.TabListener {
  private Fragment mFragment;
  private final SherlockActivity mActivity;
  private final String mTag;
  private final Class<T> mClass;

/**
   * Constructor used each time a new tab is created.
   * 
   * @param activity
   *            The host Activity, used to instantiate the fragment
   * @param tag
   *            The identifier tag for the fragment
   * @param clz
   *            The fragment's Class, used to instantiate the fragment
   */

  public MyTabListener(SherlockActivity activity, String tag, Class<T> clz) {
    mActivity = activity;
    mTag = tag;
    mClass = clz;
  }

  /* The following are each of the ActionBar.TabListener callbacks */

  public void onTabSelected(Tab tab, FragmentTransaction ft) {
    // Check if the fragment is already initialized
    if (mFragment == null) {
      // If not, instantiate and add it to the activity
      mFragment = Fragment.instantiate(mActivity, mClass.getName());
      ft.add(R.layout.activity_tab_host, mFragment, mTag);
    } else {
      // If it exists, simply attach it in order to show it
//      ft.setCustomAnimations(android.R.animator.fade_in,
//          R.animator.animationtest);
      ft.attach(mFragment);
    }
  }

  public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    if (mFragment != null) {
//      ft.setCustomAnimations(android.R.animator.fade_in,
//          R.animator.test);
      ft.detach(mFragment);
    }
  }

  public void onTabReselected(Tab tab, FragmentTransaction ft) {
  }
}

    protected class MyTabsListener implements ActionBar.TabListener {

        private Fragment fragment;

        public MyTabsListener(Fragment fragment) {
            this.fragment = fragment;
        }

        public void onTabReselected(Tab tab, FragmentTransaction ft) {
        }

        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            ft.add(R.id.fragment_container, fragment, null);
        }

        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            // some people needed this line as well to make it work: 
            ft.remove(fragment);
        }
    }

} 
```

它的布局 XML ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<LinearLayout android:layout_height="wrap_content"
android:layout_width="match_parent"
android:id="@+id/fragment_container"></LinearLayout>
</LinearLayout> 
```

和片段类：

```
public class MainActivity extends Fragment {

    public interface OnContextItemSelectedListener{
        public void StartSherlockActivity(Intent intent);       
    }
    private OnContextItemSelectedListener onContextMenuListener; 

    //protected final static int REQUEST_CODE = 1;

    public static WordsDBAdapter dbAdapter;
    private CustomAdapter cDataAdapter;
    private Button button;
    private EditText editWord;
    private EditText editTranslate;
    private ListView listView;
    private String selectedWord;
    private Cursor cursor;

    // context menu
    private final static int IDM_EDIT = 101;
    private final static int IDM_DELETE = 102;
    private final static int IDM_INFO = 103;

    // options menu
    private static final int IDM_ABOUT = 201;
    private static final int IDM_EXIT = 202;
    private static final int IDM_SETTINGS = 203;
    private static final int IDM_QUESTION = 204;

    private ActionMode.Callback mActionModeCallback = new ActionMode.Callback() {

        // Called when the action mode is created; startActionMode() was called
        @Override
        public boolean onCreateActionMode(ActionMode mode, Menu menu) {
            // Inflate a menu resource providing context menu items
            MenuInflater inflater = mode.getMenuInflater();
            inflater.inflate(R.menu.context_menu_list, menu);
            return false;
        }

        // Called each time the action mode is shown. Always called after
        // onCreateActionMode, but
        // may be called multiple times if the mode is invalidated.
        @Override
        public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
            return false;
        }

        @Override
        public boolean onActionItemClicked(ActionMode mode, MenuItem item) {

            switch(item.getItemId())
            {

            case R.id.Edit_cm:
                Intent intent = new Intent(getActivity(), EditActivity.class);
                 intent.putExtra(getResources().getString(R.string.fstRow),
                 cursor.getString(WordsDBAdapter.WORD_COL));
                 intent.putExtra(getResources().getString(R.string.scndRow),
                 cursor.getString(WordsDBAdapter.TRANS_COL));
                 intent.putExtra(getResources().getString(R.string.thrdRow),
                 cursor.getString(WordsDBAdapter.DESC_COL));
                 onContextMenuListener.StartSherlockActivity(intent);
                break;
            case R.id.Info_cm:
                break;
            case R.id.Delete_cm:
                break;

            default:return false;
            }
            return false;
        }

        @Override
        public void onDestroyActionMode(ActionMode mode) {

        }

    };

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        final View view = inflater.inflate(R.layout.activity_about, container,
                false);

        dbAdapter = new WordsDBAdapter(getActivity());
        dbAdapter.open();

        button = (Button) view.findViewById(R.id.buttonAddWord);

        listView = (ListView) view.findViewById(R.id.listWords);
        displayListView();
        registerForContextMenu(listView);

        // ================ListView onLongClick========================
        listView.setOnItemLongClickListener(new OnItemLongClickListener() {
            @Override
            public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                cursor = (Cursor) listView.getItemAtPosition(arg2);
                selectedWord = cursor.getString(WordsDBAdapter.ID_COL);
                return false;
            }
        });

        // ================Button onClick========================
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                editWord = (EditText) view.findViewById(R.id.editWord);
                editTranslate = (EditText) view
                        .findViewById(R.id.editTranslate);

                String word = editWord.getText().toString();
                String translate = editTranslate.getText().toString();

                if (word.length() > 0 && translate.length() >= 0) {
                    Cursor cursor = dbAdapter.fetchWordsByName(word);// chek is
                                                                        // word
                                                                        // repeat

                    if (cursor.moveToFirst()) {
                        Toast.makeText(getActivity().getApplicationContext(),
                                getResources().getString(R.string.word_exist),
                                Toast.LENGTH_SHORT).show();
                    } else if (!CheckWordInput(word)
                            || !CheckTranslateInput(translate)) {
                        Toast.makeText(
                                getActivity().getApplicationContext(),
                                getResources().getString(
                                        R.string.incorrect_input),
                                Toast.LENGTH_SHORT).show();
                    } else {
                        dbAdapter.insertWord(word, translate, " ",
                                String.valueOf(false), 0, 0, new Date());
                        displayListView();

                        editWord.setText("");
                        editTranslate.setText("");
                    }
                }
            }
        });

        return view;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // SettingsManager.setPreferedTheme(this);//setTheme

        super.onCreate(savedInstanceState);
        // setContentView(R.layout.activity_main);

    }

     @Override
        public void onAttach(Activity activity) {
            super.onAttach(activity);
            try {
                onContextMenuListener = (OnContextItemSelectedListener) activity;
            } catch (ClassCastException e) {
                throw new ClassCastException(activity.toString() + " must implement OnArticleSelectedListener");
            }
        }
    private void displayListView() {
        // Cursor cursor = dbAdapter.fetchAllTranslated();
        Cursor cursor = dbAdapter.fetchAllTranslated();

        String[] columns = new String[] { WordsDBAdapter.KEY_WORD,
                WordsDBAdapter.KEY_TRANSLATION, WordsDBAdapter.KEY_SUCCEEDED, };

        int[] to = new int[] { R.id.textViewTranslate, R.id.textViewWord,
                R.id.textViewSuccessPoints };

        cDataAdapter = new CustomAdapter((Activity) listView.getContext(),
                R.layout.word_info, cursor, columns, to);

        listView.setAdapter(cDataAdapter);
    }

    @Override
    public void onResume() {
        super.onResume();
        // SettingsManager.setPreferedLanguage(this);// set language
        displayListView();
    }

    public static boolean CheckTranslateInput(String str) {
        Pattern inputPattern = Pattern.compile("[\\p{L} -]{0,25}");
        Matcher inputMatcher = inputPattern.matcher(str);
        return inputMatcher.matches();
    }

    public static boolean CheckWordInput(String str) {
        Pattern inputPattern = Pattern.compile("[\\p{L} -]{1,25}");
        Matcher inputMatcher = inputPattern.matcher(str);
        return inputMatcher.matches();
    }

    @Override
    public void onDetach() {
        super.onDetach();
        dbAdapter.close();
    }        

} 
```

它的布局 XML ：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:focusable="true"
    android:focusableInTouchMode="true"
    tools:context=".MainActivity" >

    <Button
        android:id="@+id/buttonAddWord"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignBottom="@+id/editTranslate"
        android:layout_alignTop="@+id/editTranslate"
        android:layout_toRightOf="@id/editTranslate"
        android:drawableTop="@drawable/plus" />

    <TextView
        android:id="@+id/textViewEditTranslateDescription"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/textViewEditWordDescription"
        android:layout_alignLeft="@+id/editTranslate"
        android:text="@string/scndRow"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/textViewEditWordDescription"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/editTranslate"
        android:layout_alignParentLeft="true"
        android:text="@string/fstRow"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <EditText
        android:id="@+id/editTranslate"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@+id/editWord"
        android:ems="10"
        android:inputType="textCapSentences" />

    <EditText
        android:id="@+id/editWord"
        android:layout_width="140dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:ems="10"
        android:inputType="textCapSentences" >        
    </EditText>

    <ListView
        android:id="@+id/listWords"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/textViewEditTranslateDescription"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

    </ListView>

</RelativeLayout> 
```

对不起巨大的代码，但没关系，我在或其他一些重叠的过程中做错了什么`onCreateView()`，为什么我的 MainActivity 内容没有出现，我看不到选项卡，我在屏幕上看到的只是 actionBar 和应用程序图标。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:53:45.490

您使用的是什么设备？如果您使用的是模拟器，那么 API 的级别是多少？

如果 API 低于 3 Android 不支持 actionbar。只有当 API 等于 3 或更高时，才会应用 NoActionBar 主题。

根据我在 Nexus one API 2.3 中移植的经验，即使我想显示操作栏，屏幕顶部也只有一个细条。

希望这可以帮助。

# android - 无法使用新的 3.0 版 facebook sdk for android 登录

> ID：14370945
> 
> 赞同：7
> 
> 时间：2013-01-17T01:43:38.697
> 
> 标签：android, facebook, facebook-android-sdk

我看到有一个新版本的 Facebook SDK (3.0) 弃用了旧的*Facebook*类并引入了一种使用*Session*类登录的新方法。

我使用新的登录 API 快速编写了一个简单的应用程序：

```
public class MainActivity extends Activity {

private Session mFacebookSession;

private StatusCallback fbStatusCallback = new StatusCallback() {
    @Override
    public void call(Session session, SessionState state, Exception exception) {
        Log.v("dbg", "state: " + state);
        Log.v("dbg", "session: " + session);
    }
};

public void bc(View view)
{
    mFacebookSession = Session.openActiveSession(this, true, fbStatusCallback);
}
//etc..
} 
```

回调应该被调用两次，第一次是为了销毁实际的会话令牌，第二次是为了获取一个新的访问令牌。当然，我的应用程序 ID 在我的清单文件中设置为元数据等。

当我执行代码时，会出现 Facebook 登录对话框，我输入我的用户名和密码，然后它就关闭了。

但是，在我的日志中，我只看到这个：

```
01-17 03:28:01.587: V/dbg(7002): state: OPENING
01-17 03:28:01.587: V/dbg(7002): session: {Session state:OPENING, token:{AccessToken token:ACCESS_TOKEN_REMOVED permissions:[]}, appId:xxxxxxxxxxxxxxx} 
```

结果，如果我尝试调用*mFacebookSession.getAccessToken()*我得到一个空字符串（非空）。

似乎是什么问题？

**我是如何解决这个问题的（稍后）**

我已经覆盖了 onActivityResult 并调用了*Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:31:00.793

我只是把这个放在这里给其他人：

Facebook SDK 在让你知道你忘记了什么方面真的很糟糕。如果它不适合您，请仔细检查您的 Facebook 应用程序并确保您没有忘记某些内容或输入错误的值。在我的情况下，在 Sterpu Mihai 的情况下，appID 是错误的，它是哈希键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T14:28:11.767

会导致相同错误的另一件事（Token_removed）

[Android Facebook SDK3.0，会话状态OPENING](https://stackoverflow.com/questions/13885521/android-facebook-sdk3-0-session-state-opening/21831076#21831076)

# javascript - Javascript幻灯片“空白幻灯片”？

> ID：14370950
> 
> 赞同：0
> 
> 时间：2013-01-17T01:44:19.880
> 
> 标签：javascript, slideshow

在我简单的 javascript 幻灯片中，我只希望它循环浏览（最多 5 个）从数据库自动填充的 div。它填充并开始正常播放幻灯片，但是一旦它假设循环它就会转到“空白”幻灯片，然后再次到最后一张，它会永远开始正常循环。

在这个例子中，我必须查看并使用它，我正在使用两个 div。

可以在这里查看：www.codekrewe.com/fbla

和 javascript 代码在这里：

```
$(function() {
$('#dateHolder .featureHolder:gt(0)').hide();
setInterval(function() {
    $('#dateHolder .featureHolder:first').fadeOut(1000)
    .next('.featureHolder').fadeIn(1000)
    .end().appendTo('#dateHolder');
}, 3000);
}); 
```

编辑：我更改了 JavaScript，上面代码块中的 JS 就是我现在所拥有的。但是，我遇到了同样的问题。

现在幻灯片中有三个 div，您可以看到它只是第一张幻灯片，在第二次循环中被空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:13:17.903

好吧，我找到了解决这个问题的方法，不太清楚为什么它会产生这样的效果。

在调用了所有的 div 之后，稍微`<h1>`说一下保存框中的特色 div。好吧，随着每张幻灯片的变化，它都会被推高，一旦它到达顶部，就会导致一张空白幻灯片。

因此，`<h1>`在调用 div 之前将其移至顶部，修复了空白幻灯片问题。

# c++ - 搜索链表和数组时有什么区别？

> ID：14370953
> 
> 赞同：0
> 
> 时间：2013-01-17T01:44:32.960
> 
> 标签：c++, arrays, search, data-structures, linked-list

我知道数组的值可以通过它们的位置直接访问，而链表必须一个一个地遍历它们，但不知道在搜索发生时如何解释它们的开销和存储方面的差异。

（我认为前一个节点是否需要在某个地方临时存储，同时尝试访问下一个节点时通过它们时系统部分的任何额外存储或开销？并且在搜索数组时也是如此）

谁能给我详细说明在每个结构中搜索时会发生什么？或者只是指向正确的方向

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T01:49:10.507

随机访问列表元素允许您实现搜索算法，例如二分搜索，使用链表是不切实际的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:47:32.180

数组是一个固定大小的向量变量。

链接列表没有指定的大小：列表的每个元素都包含一个指向下一个元素的指针。这就是为什么您需要按顺序迭代它的原因。这里的优点是结构不应分配在连续的内存块中，并且如果在其中添加更多元素则不需要调整大小。

同样在数组中，如果删除一个元素，则需要移动所有先前的元素。如果在数组中间插入一个元素，则需要移动元素以为新元素腾出空间。在列表中，您只需更新指针：

![在此处输入图像描述](../Images/f0155fdb28bb198b076249b8ad3d2552.png)

另一方面，数组可以随机访问，不需要顺序访问：因此它们可以更快地搜索对象、排序等。

# c++ - 使用 --ppapi-out-of-process 标志时，Visual Studio 调试器是否仍可用于调试 ppapi 受信任的插件？

> ID：14370954
> 
> 赞同：1
> 
> 时间：2013-01-17T01:44:34.323
> 
> 标签：c++, visual-studio, visual-studio-debugging, google-nativeclient

我正在使用[Pepper-25](https://developers.google.com/native-client/pepper25/)中引入的新 MessageLoop 类，因此我可以运行一个后台线程来阻止对文件 IO 的 ppapi 调用。到目前为止，我一直在使用带有标志的 Visual Studio 运行 chrome `--single-process`，`--register-pepper-plugins`因此我可以从 Visual Studio 中调试我的插件。

使用这些标志，我发现对`PPB_GetInterface` `get_browser`for的调用`PPB_MESSAGING_INTERFACE`返回 null，经过一番搜索后，我发现了这个[问题](http://code.google.com/p/chromium/issues/detail?id=167625)，指出您必须使用标志运行`--ppapi-out-of-process`才能获得`MessageLoop`支持。

添加该标志后，`get_browser`确实返回了一个有效的接口指针，但我无法再使用 Visual Studio IDE 调试我的插件，因为它无法附加到运行我的插件的子进程。有没有办法告诉它附加到我的插件进程或从支持的单个进程运行的方式`MessageLoop`？

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:16:51.363

要让 Visual Studio 自动附加到子进程，您可以使用可以使用[Visual Studio 中描述的解决方法来调试 WinDBG 等子进程吗？](https://stackoverflow.com/questions/771039/can-visual-studio-be-made-to-debug-child-processes-like-windbg).

另一种方法是在启动 Chrome 时`--no-sandbox`使用标志。`--ppapi-startup-dialog`这将导致在创建插件进程时出现一个带有进程 ID 的消息框。然后，您可以使用 Debug -> Attach to process... -> pick process id 将 Visual Studio 调试器连接到该进程。当然，您可以在没有 Chrome 标志的情况下附加到该进程，并且它不是自动的，因此如果您同时运行多个进程，这实际上只是让您确定您附加到了正确的进程。

第三种方法是使用 Microsoft 提供的免费调试器 WinDbg。它比 Visual Studio 中的内置调试器复杂且用户友好性低得多，但它确实能够自动附加到子进程。可从[http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)下载。

至于 MessageLoop，进程内插件将不支持它。正如您提到的问题所提到的，开发人员应该转向进程外，即使它增加了无法在没有解决方法的情况下自动附加 Visual Studio 调试器的不便。

# django - django：重复键值违反唯一约束

> ID：14370957
> 
> 赞同：1
> 
> 时间：2013-01-17T01:45:06.457
> 
> 标签：django, django-models

```
 from django.contrib.auth import Group

 class Plan
    name = models.CharField(max_length=100, unique=True, null=False)
    description = models.TextField(blank=True)
    group = models.ForeignKey(Group, null=False, blank=False) 
```

当我尝试在 django admin 中保存计划的第二个实例时，将组设置为与我保存的上一个计划对象相同的组，我得到一个错误回溯：-

```
duplicate key value violates unique constraint "plans_plan_group_id_key"
DETAIL:  Key (group_id)=(1) already exists. 
```

为什么会这样，我如何允许许多不同的计划与同一个组对象相关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:05:00.380

我正在使用的这个第 3 方应用程序无法拥有删除最初指定的`unique=True`. 我添加了一个新的南方迁移来强制`unique=False`，现在一切都很好。

# java - 如何从 Java EE 应用程序外部化 PDF？

> ID：14370960
> 
> 赞同：2
> 
> 时间：2013-01-17T01:45:25.293
> 
> 标签：java, html, jakarta-ee, web, weblogic

我有一个 Java EE 应用程序，在 WebLogic 10.3.5 和 Java 6 下运行。我曾经有一个 pdf 帮助文件，嵌入在我的 war 文件中，但我需要从那里提取它并将其放在外部目录中（它可以在我的同一个 WebLogic 域目录中）。

我试图把它放在我的 WebLogic 域中，然后放到 <a href> 中，但似乎浏览器有限制，出于安全原因，不允许使用 href 或 javascript 下载本地文件。

这曾经仅适用于保存在我的计算机上的静态 HTML 文件，但 HTML 页面部署在服务器上，这似乎是不可能的。

知道如何从我的战争文件中外部化我的 help.pdf 文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:59:43.527

尽管某些应用服务器允许 Java EE 应用程序引用 Web 容器之外的文件，但实际上，您的 Web 应用程序不应该对 Web 容器之外的任何内容有任何了解，而且正如您所提到的，这确实是一个巨大的安全问题.

根据您尝试使用此 PDF 文件完成的任务，如果您只想在网络上公开此文件，请按照 @duffmo 所说的操作，它会正常工作。如果您希望灵活地频繁修改此 PDF 文件而无需一次又一次地重新创建 war 文件，您可能需要考虑将此 PDF 文件托管在某些 HTTP Web 服务器（Apache2、IIS 等）中，现在您从您的 Web 引用该链接应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T05:43:11.123

@limc 是对的

您应该将此静态文件作为 Apache Web 服务器上的文件完全放在 Weblogic 之外

但是，在 Weblogic 中有一个虚拟目录映射功能，它允许您将 weblogic 域之外的文件夹声明为任何静态内容的内容存储。

[http://docs.oracle.com/cd/E11035_01/wls100/webapp/weblogic_xml.html#wp1039396](http://docs.oracle.com/cd/E11035_01/wls100/webapp/weblogic_xml.html#wp1039396)

此条目位于 WEB-INF/weblogic.xml

```
<virtual-directory-mapping>      
<local-path>c:/usr/mypdfs</local-path>      
<url-pattern>/pdf/*</url-pattern>      
</virtual-directory-mapping> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T01:51:01.323

您需要将它放在 Web 上下文的根目录中，与 HTML 页面完全相同。您的网络服务器将能够在那里找到它。

# python - Python中F(x)和F x的区别

> ID：14370962
> 
> 赞同：4
> 
> 时间：2013-01-17T01:45:44.753
> 
> 标签：python

在 Python 中，可以调用其中之一`del x`或 del (x) 。我知道如何定义一个名为 F(x) 的函数，但我不知道如何定义一个名为 like 的函数`del`，而没有元组作为参数。

和之间有什么区别`F x`，`F(x)`如何定义可以不带括号调用的函数？

```
>>> a = 10
>>> a
10
>>> del a             <------------ can be called without parenthesis
>>> a
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'a' is not defined
>>> a = 1
>>> del (a)
>>> a
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'a' is not defined
>>> def f(x): 1
... 
>>> f (10)
>>> print f (10)
None
>>> def f(x): return 1
... 
>>> print f (10)
1
>>> f 1                  <------   cannot be called so
  File "<stdin>", line 1
    f 1
      ^
SyntaxError: invalid syntax
>>> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T01:47:18.747

主要原因是它`del`实际上是一个[语句](http://docs.python.org/2/reference/simple_stmts.html#the-del-statement)，因此在 Python 中具有特殊行为。因此，您实际上无法自己定义这些（以及这种行为）* - 它是一组保留关键字的语言的内置部分。

**我想您可能会编辑 Python 本身的源代码并构建自己的源代码，但我认为这不是您所追求的 :)*

# ruby-on-rails - 关闭 identity_map 时的 Mongoid 急切加载（`includes`）行为

> ID：14370963
> 
> 赞同：1
> 
> 时间：2013-01-17T01:46:05.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

我试图了解`includes`identity_map 关闭时的急切加载（）行为。

```
class Account
  has_and_belongs_to_many :subscriptions
end

a = Account.includes(:subscriptions).first # makes first two calls to the database
a.subscriptions # returns nothing
a.subscriptions.map(&:name) # makes the 3rd call to the database. 
```

根据文档`includes`选择器应该仅在启用 identity_map 时才起作用。但在我的情况下，即使 identity_map 被禁用，Mongoid 库也会尝试预先加载包含的关联。当稍后访问关联时，这会导致对数据库的冗余调用。

```
MOPED: yyyy:10019 QUERY database=xxxx collection=accounts 
  selector={"$query"=>{}, "$orderby"=>{:_id=>1}} 
  flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (148.0079ms)

MOPED: yyyy:10019 QUERY database=xxxx collection=subscriptions 
  selector={"_id"=>{"$in"=>["50eaad6b6f758a601a000017", "50eaad7e6f758a601a000036"]}} 
  flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (573.0329ms)

MOPED: yyyy:10019 QUERY database=xxxx collection=subscriptions 
  selector={"$and"=>[{"_id"=>{"$in"=>["50eaad6b6f758a601a000017", 
  "50eaad7e6f758a601a000036"]}}]} 
  flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (586.0329ms) 
```

# nhibernate - 每个线程的 NHibernate 会话是否与线程池一起使用？

> ID：14370964
> 
> 赞同：2
> 
> 时间：2013-01-17T01:46:09.573
> 
> 标签：nhibernate, session, threadpool

如果我设法将 NHibernate 会话配置为每个线程，那么当我处理来自线程池的线程中的数据时，这会起作用吗？

池中的线程被“回收”（是吗？）所以如果一个线程已经被使用过一次并且它再次被调用，它的会话会不会单独可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:03:05.890

正确处理`ISession`完全掌握在您手中，您有责任。不是线程池。因此，如果您使用每个线程的会话实例，您仍然应该知道（并管理）它何时创建，并且**明确**关闭和处置。

如果该`ISession`管理到位，则不必担心线程池的问题。另一方面，这也意味着，在`[ThreadStatic]`现场打开和保持会话 - 是不正确的：

*   [通过 ThreadPool 循环时，我的 ThreadStatic 变量中的值是否仍然存在？](https://stackoverflow.com/a/855602/1679310)

*简短摘录：*

> 线程池（通过设计）使线程在调用之间保持活动状态。这意味着 ThreadStatic 变量将在对 QueueUserWorkItem 的调用之间保持不变。

# javascript - Angularjs - 重新加载路线

> ID：14370967
> 
> 赞同：0
> 
> 时间：2013-01-17T01:46:44.150
> 
> 标签：javascript, location, angularjs, routes

如果“某事”发生，是否可以重新加载某个路线？

**示例：**
每次触发此功能时，我都需要重新加载新 ID 的路由

```
$scope.updateDealer = function(zip, country) {
        if(zip) {
            $http.get('files/framework/dealer/near/'+ zip + '/' + country + '').success(function(data) {
                $scope.dealer = {marker: data};
                $location.path('/dealer/:id').search({id: data.id});
                $rootScope.dealerdetails = data;    
                $route.reload();
        });
        } else {
            $scope.dealer = $scope.loadall();
        }

  } 
```

**路线**：

```
when('/dealer/:id', {templateUrl: 'files/tpl/dealer-details.html?26', controller: 'DealerDetailsCtrl', activetab: 'details'}). 
```

但不知何故，ID 不在 DealerDetailsCtrl 中。

**这是对 DealerDetailsCtrl 中数据的调用：**

```
$rootScope.dealerdetails = dealerService.api.get({id: $routeParams.id, token: $scope.token}) 
```

似乎 $routeParams.id 是空的，因此内容没有加载。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-21T00:04:50.803

从 angular 1.3 开始，您可以使用它`$route.updateParams(newParams)`来更改路由参数。

[这是来自角度文档的引用...](https://code.angularjs.org/1.3.0/docs/api/ngRoute/service/$route#updateParams)

> **$route.updateParams(newParams);**
> 
> 使`$route`服务更新当前 URL，将当前路由参数替换为`newParams`. 提供的与路线的路径段定义匹配的属性名称将被插入到位置的路径中，而其余属性将被视为查询参数。

在你的情况下，你应该使用这样的东西：

```
$scope.updateDealer = function(zip, country) {
     if(zip) {
         $http.get('files/framework/dealer/near/'+ zip + '/' + country + '').success(function(data) {
             $scope.dealer = {marker: data};    
             $route.updateParams({id: data.id});
         });
     } else {
         $scope.dealer = $scope.loadall();
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T18:10:42.323

如果您访问 /dealer/1 （或任何实际的 id）是 $routeParams.id 为您定义的吗？您所要做的就是：

```
 $scope.updateDealer = function(zip, country) {
        if(zip) {
            $http.get('files/framework/dealer/near/'+ zip + '/' + country + '').success(function(data) {
                $scope.dealer = {marker: data};
                $rootScope.dealerdetails = data;
                $location.path('/dealer/' + data.id);
            });
        } else {
            $scope.dealer = $scope.loadall();
        }
  } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-12T04:57:59.697

这应该可以解决问题，因为 Angular 监控哈希更改会适当地路由它们：

```
window.location.hash = 'dealer/data.id'; 
```

# php - 如何使用 Google Places Photo API 返回的照片？

> ID：14370968
> 
> 赞同：0
> 
> 时间：2013-01-17T01:47:01.820
> 
> 标签：php, image, google-places-api, laravel

我`Google Places Photo API`在我的 Laravel PHP 应用程序中这样调用：

```
public static function getpic ($photoreference){

    $app_id = 'XXXYYYZZZ';
    $URLToCall = "https://maps.googleapis.com/maps/api/place/photo?maxwidth=225&photoreference=$photoreference&sensor=false&key=$app_id";

    $result = file_get_contents($URLToCall);

    return $result;
} 
```

当我`print_r $result`，我得到：

```
string(12902) "ÿØÿàJFIFÿá`ExifII*1&i‡.Picasa0220 á –ÿÛ„ 
```

我不知道如何使用返回的内容。我试图将字符串传递给视图，但失败了。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:56:28.737

根据[文档](https://developers.google.com/places/documentation/photos#place_photo_response)，响应是图像。这可以解释为什么打印它会产生二进制数据，就像你看到的那样。

基本上，您需要保存这些数据，然后像在常规 HTML 中一样嵌入图像，或者只是将 img src 设置为指向 $URLToCall

# unix - 如何在 gdb 中附加进程

> ID：14370972
> 
> 赞同：78
> 
> 时间：2013-01-17T01:47:36.360
> 
> 标签：unix, gdb

我有一个简单的 C 程序，它分叉一个进程，然后运行一个可执行文件。

我想将子进程附加到 gdb。

我在控制台中运行主程序并打开另一个控制台以查找子进程的 pid，然后使用以下命令启动 gdb：

```
gdb attach 12271 
```

`12271`子进程 ID在哪里，但附加失败并显示：

```
No such file or directory. 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-01-17T03:02:44.000

尝试其中之一：

```
gdb -p 12271
gdb /path/to/exe 12271

gdb /path/to/exe
(gdb) attach 12271 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-17T01:53:46.163

第一个参数应该是可执行程序的路径。所以

```
gdb progname 12271 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-02-28T08:45:27.153

`myExecutableName`使用具有 PID的运行实例`15073`：

**在命令行中按两次**Tab后`$ gdb myExecu`，将自动自动完成：

```
$ gdb myExecutableName 15073 
```

并将 gdb 附加到此过程。那很好！

# android - 信息未按我的意愿显示

> ID：14370974
> 
> 赞同：0
> 
> 时间：2013-01-17T01:47:58.903
> 
> 标签：android, json, layout

我正在从 json 文件中读取数据，它将显示如下信息：

```
Time|Subject|Lecturer
Monday
09:15|Nature|AL23
Monday
10:15|Nature|AL33
Tuesday
09:15|Maths|AS12
Tuesday
12:15|English|AC23 
```

但我希望信息显示为

```
Time|Subject|Lecturer
Monday
09:15|Nature|AL23
10:15|Nature|AL33
Tuesday
09:15|Maths|AS12
12:15|English|AC23 
```

（一天只显示一次）。我最接近以我希望的方式显示信息的是：

```
View linearLayout =  findViewById(R.id.info);

    int a = 0;
    //((LinearLayout) linearLayout).addView(valueTV);   
    while(x < 41)
    {
        if(x == 8 || x == 16 || x == 24 || x == 32 || x == 40)
        {

                TextView valueTV = new TextView(this);
                valueTV.setText(fetch2.get(a));
                valueTV.setId(x);
                valueTV.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
                a++;

            ((LinearLayout) linearLayout).addView(valueTV); 

            System.out.println(x);
            x++;
        }
        else
        {
            lv = (ListView) findViewById(R.id.listview);
            adapter = new CustomAdapter(MainActivity.this, R.id.listview, fetch);
            lv.setAdapter(adapter);
            x++;
        }
    } 
```

这确实列出了 5 天，但仅在时间、主题和讲师之后但在时间之前。我有

```
<TableLayout
    android:id="@+id/info"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
</TableLayout> 
```

在时间、主题和讲师之间以及列表视图（用于时间、主题和讲师）布局之间。我确实尝试将 tablelayout 放在 listview 从中调用布局的同一个 xml 文件中，但是当我运行它时，我在调试选项卡中得到以下内容并且应用程序没有运行。

```
Thread [<1> main] (Suspended (exception RuntimeException))  
    <VM does not provide monitor information>   
    ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1651    
    ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1667 
    ActivityThread.access$1500(ActivityThread, ActivityThread$ActivityClientRecord, Intent) line: 117   
    ActivityThread$H.handleMessage(Message) line: 935   
    ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
    Looper.loop() line: 130 
    ActivityThread.main(String[]) line: 3687    
    Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
    Method.invoke(Object, Object...) line: 507  
    ZygoteInit$MethodAndArgsCaller.run() line: 867  
    ZygoteInit.main(String[]) line: 625 
    NativeStart.main(String[]) line: not available [native method]  
Thread [<8> Binder Thread #2] (Running) 
Thread [<7> Binder Thread #1] (Running) 
```

我不确定如何按我的意愿显示信息（即一天只显示一次）。

# cordova - 如何区分从 istore 订阅应用程序的免费用户和高级用户

> ID：14370975
> 
> 赞同：0
> 
> 时间：2013-01-17T01:48:00.373
> 
> 标签：cordova, ios6, itunes

我已经使用 HTML5、JQuery 和 AJAX 创建了一个混合应用程序来动态加载内容，并且我已经使用手机间隙来创建准备上传到 istore 的包。我们的应用程序将在 App Store 中“免费”出售，并且可以访问占内容的 60%。如果用户想要添加额外的章节，他必须能够使用“应用内购买”选项。

我的问题是如何控制应用程序？基本上我需要区分具有高级访问权限的用户并为他们加载包含完整内容的页面。

请指导我完成我需要遵循的步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:44:30.677

如果您的目标是 iOS 并且想要使用 Apple App Store 应用内购买，那么您将需要使用[插件](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/InAppPurchaseManager)。

应用内购买听起来像一个复杂的野兽，所以你可能希望在解决它之前了解它是如何工作的。以下是一个很好的演练：[http ://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)

# scheduled-tasks - 前台和后台任务是否有共享文件位置？

> ID：14370977
> 
> 赞同：0
> 
> 时间：2013-01-17T01:48:15.983
> 
> 标签：scheduled-tasks, windows-phone-8, background-process, isolatedstorage, live-tile

我需要在我的前台和后台项目/任务之间传达一个价值。是否有一个共享/公共文件夹可以存储两个都可以访问的值？或者是否可以在启动时将 arg 从前台任务传递给后台任务？或者（什么是最简单的解决方案），它们是否都从同一个隔离存储区域读/写？我对此表示怀疑，但也许当前台应用程序引用后台应用程序时，这种共性是否可用？

同样，我想更新前台应用程序动态磁贴上的徽章；我可以直接从后台任务执行此操作，还是需要找到一种解决方法，例如写入一个通常可访问的文件，然后前台任务会定期检查该文件以获取更新信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T08:51:21.570

**IsolatedStorageFile**类可以在普通应用程序和后台任务中使用，它在 WP7 和 WP8 应用程序中都可以正常工作。此处描述了如何使用它：
[关于 WP7 隔离存储的所有信息 - 读取和保存图像](http://www.windowsphonegeek.com/tips/All-about-WP7-Isolated-Storage---Read-and-Save-Images)
也可以从普通应用程序和后台任务中完成更新动态磁贴，您不必使用任何变通方法。

# java - JScrollPane 不会进入带有 gridbag 的 JPanel

> ID：14370979
> 
> 赞同：0
> 
> 时间：2013-01-17T01:48:44.957
> 
> 标签：java, swing, jscrollpane, layout-manager, gridbaglayout

我的 JScroll 窗格包含一个 Jlist，并由一个具有 gridbag 布局的 JPanel 作为父级，但它不想适合它最终会变得非常小并且就像它的 gridx 是 -1 和 y 是零一样，当它应该有轴为 0 和 y 为 1

代码：

```
public class StartGui 
{
private static JFrame frame = new JFrame("");
private static JPanel panel = new JPanel();
private static JMenuBar menu = new JMenuBar();
private static DefaultListModel<String> listModel = new DefaultListModel<String>();
private static JList<String> Targets = new JList<String>(listModel);
private static JButton Start = new JButton("Start");
private static JButton Stop = new JButton("Stop");
private static JButton Configure = new JButton("Configure");
private static JButton AddRecipiants = new JButton("Add Recipiants");
private static JProgressBar Progress = new JProgressBar();
private static JLabel RLable = new JLabel("Recipiants:");

private static JScrollPane lsp;

private static GridBagLayout gbl = new GridBagLayout();
private static GridBagConstraints gbc = new GridBagConstraints();

private static JFrame emails = new JFrame();
private static JPanel panel2 = new JPanel();
private static JTextArea emailA = new JTextArea("type email here");
private static JButton done = new JButton("OK");

public static void main(String[] args)
{
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setJMenuBar(menu);
    frame.setResizable(false);
    frame.setBounds(0, 0, 500, 400);
    panel.setLayout(gbl);

    listModel.addElement("TestEmailAddress@fake.com");
    lsp = new JScrollPane(Targets);

    emails.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    emails.setResizable(false);
    emails.setBounds(0, 0, 200, 300);
    panel2.setLayout(gbl);
    emails.add(panel2);

    gbc.gridx = 0;
    gbc.gridy = 17;
    gbc.gridwidth = 20;
    gbc.gridheight = 3;
    gbc.fill = GridBagConstraints.BOTH;
    gbc.weightx = 1;
    gbc.weighty = 0;
    gbc.anchor = GridBagConstraints.NORTH;
    gbc.insets = new Insets(5,70,5,70);
    gbl.setConstraints(done, gbc);
    panel2.add(done);

    gbc.gridx = 0;
    gbc.gridy = 0;
    gbc.gridwidth = 20;
    gbc.gridheight = 17;
    gbc.fill = GridBagConstraints.BOTH;
    gbc.weightx = 1;
    gbc.weighty = 1;
    gbc.anchor = GridBagConstraints.NORTH;
    gbc.insets = new Insets(10,10,0,10);
    gbl.setConstraints(emailA, gbc);
    panel2.add(emailA);

    emails.add(panel2);

    gbc.gridx = 0;
    gbc.gridy = 1;
    gbc.gridwidth = 10;
    gbc.gridheight = 19;
    gbc.fill = GridBagConstraints.BOTH;
    gbc.weightx = 1;
    gbc.weighty = 1;
    gbc.anchor = GridBagConstraints.WEST;
    gbc.insets = new Insets(5,5,5,5);
    gbl.setConstraints(Targets, gbc);
    panel.add(lsp);

    gbc.gridx = 10;
    gbc.gridy = 11;
    gbc.gridwidth = 5;
    gbc.gridheight = 5;
    gbc.fill = GridBagConstraints.BOTH;
    gbc.weightx = 1;
    gbc.weighty = 1;
    gbc.anchor = GridBagConstraints.CENTER;
    gbc.insets = new Insets(25,5,25,5);
    gbl.setConstraints(Start, gbc);
    panel.add(Start);

    gbc.gridx = 15;
    gbc.gridy = 11;
    gbc.gridwidth = 5;
    gbc.gridheight = 5;
    gbc.fill = GridBagConstraints.BOTH;
    gbc.weightx = 1;
    gbc.weighty = 1;
    gbc.anchor = GridBagConstraints.CENTER;
    gbc.insets = new Insets(25,5,25,5);
    gbl.setConstraints(Stop, gbc);
    panel.add(Stop);

    gbc.gridx = 10;
    gbc.gridy = 4;
    gbc.gridwidth = 10;
    gbc.gridheight = 7;
    gbc.fill = GridBagConstraints.BOTH;
    gbc.weightx = 1;
    gbc.weighty = 1;
    gbc.anchor = GridBagConstraints.CENTER;
    gbc.insets = new Insets(35,5,40,5);
    gbl.setConstraints(Configure, gbc);
    panel.add(Configure);

    gbc.gridx = 10;
    gbc.gridy = 0;
    gbc.gridwidth = 10;
    gbc.gridheight = 4;
    gbc.fill = GridBagConstraints.BOTH;
    gbc.weightx = 1;
    gbc.weighty = 1;
    gbc.anchor = GridBagConstraints.CENTER;
    gbc.insets = new Insets(25,5,20,5);
    gbl.setConstraints(AddRecipiants, gbc);
    panel.add(AddRecipiants);

    Progress.setMaximum(100);
    Progress.setString("0%");
    Progress.setValue(0);
    gbc.gridx = 10;
    gbc.gridy = 16;
    gbc.gridwidth = 10;
    gbc.gridheight = 4;
    gbc.fill = GridBagConstraints.BOTH;
    gbc.weightx = 1;
    gbc.weighty = 1;
    gbc.anchor = GridBagConstraints.CENTER;
    gbc.insets = new Insets(25,5,15,5);
    gbl.setConstraints(Progress, gbc);
    panel.add(Progress);

    gbc.gridx = 0;
    gbc.gridy = 0;
    gbc.gridwidth = 10;
    gbc.gridheight = 1;
    gbc.fill = GridBagConstraints.BOTH;
    gbc.weightx = 1;
    gbc.weighty = 1;
    gbc.anchor = GridBagConstraints.CENTER;
    gbc.insets = new Insets(5,45,0,45);
    gbl.setConstraints(RLable, gbc);
    panel.add(RLable);

    frame.add(panel);
    frame.setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T02:05:02.733

`JScrollPane`首选尺寸通常不是很大，通常由界面`Scrollable`（和其他因素）确定

您可以`JList`使用以下方法影响 的默认大小...

*   [`JList#setVisibleRowCount`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#setVisibleRowCount%28int%29)
*   [`JList#setPrototypeCellValue`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#setPrototypeCellValue%28E%29)

第一个将影响在视口中可见的行数，第二个将影响该行的高度和宽度。

您也没有将约束传递给滚动窗格的布局管理器（您正在尝试使用`JList`），这是行不通的......

你应该这样做...

```
panel.add(lsp, gbc); 
```

我会非常不鼓励这样做......

```
gbl.setConstraints(Targets, gbc); 
```

*（我应该补充一下，我一般会劝阻上述内容，并建议使用`add(Component, Object)`- 但那就是我）*

**更新**

我的建议，与您的默认代码...

![在此处输入图像描述](../Images/b3eccd79571d036a52f618a6c71d2d8d.png)

```
public class BadLayout10 {

  public static void main(String[] args) {
    new BadLayout10();
  }

  public BadLayout10() {
    EventQueue.invokeLater(new Runnable() {
      @Override
      public void run() {
        try {
          UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception ex) {
        }
        new StartGui();
      }
    });
  }

  public class StartGui {

    private JFrame frame = new JFrame("");
    private JPanel panel = new JPanel();
    private JMenuBar menu = new JMenuBar();
    private DefaultListModel<String> listModel = new DefaultListModel<String>();
    private JList<String> Targets = new JList<String>(listModel);
    private JButton Start = new JButton("Start");
    private JButton Stop = new JButton("Stop");
    private JButton Configure = new JButton("Configure");
    private JButton AddRecipiants = new JButton("Add Recipiants");
    private JProgressBar Progress = new JProgressBar();
    private JLabel RLable = new JLabel("Recipiants:");
    private JScrollPane lsp;
    private GridBagLayout gbl = new GridBagLayout();
    private GridBagConstraints gbc = new GridBagConstraints();
    private JFrame emails = new JFrame();
    private JPanel panel2 = new JPanel();
    private JTextArea emailA = new JTextArea("type email here");
    private JButton done = new JButton("OK");

    public StartGui() {

      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.setJMenuBar(menu);
      frame.setResizable(false);
      frame.setBounds(0, 0, 500, 400);
      panel.setLayout(gbl);

      listModel.addElement("TestEmailAddress@fake.com");
      Targets.setVisibleRowCount(10);
      Targets.setPrototypeCellValue("This is a really long test string");
      lsp = new JScrollPane(Targets);

      emails.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
      emails.setResizable(false);
      emails.setBounds(0, 0, 200, 300);
      panel2.setLayout(gbl);
      emails.add(panel2);

      gbc.gridx = 0;
      gbc.gridy = 17;
      gbc.gridwidth = 20;
      gbc.gridheight = 3;
      gbc.fill = GridBagConstraints.BOTH;
      gbc.weightx = 1;
      gbc.weighty = 0;
      gbc.anchor = GridBagConstraints.NORTH;
      gbc.insets = new Insets(5, 70, 5, 70);
      gbl.setConstraints(done, gbc);
      panel2.add(done);

      gbc.gridx = 0;
      gbc.gridy = 0;
      gbc.gridwidth = 20;
      gbc.gridheight = 17;
      gbc.fill = GridBagConstraints.BOTH;
      gbc.weightx = 1;
      gbc.weighty = 1;
      gbc.anchor = GridBagConstraints.NORTH;
      gbc.insets = new Insets(10, 10, 0, 10);
      gbl.setConstraints(emailA, gbc);
      panel2.add(emailA);

      emails.add(panel2);

      gbc.gridx = 0;
      gbc.gridy = 1;
      gbc.gridwidth = 10;
      gbc.gridheight = 19;
      gbc.fill = GridBagConstraints.BOTH;
      gbc.weightx = 1;
      gbc.weighty = 1;
      gbc.anchor = GridBagConstraints.WEST;
      gbc.insets = new Insets(5, 5, 5, 5);
//      gbl.setConstraints(Targets, gbc);
      panel.add(lsp, gbc);

      gbc.gridx = 10;
      gbc.gridy = 11;
      gbc.gridwidth = 5;
      gbc.gridheight = 5;
      gbc.fill = GridBagConstraints.BOTH;
      gbc.weightx = 1;
      gbc.weighty = 1;
      gbc.anchor = GridBagConstraints.CENTER;
      gbc.insets = new Insets(25, 5, 25, 5);
      gbl.setConstraints(Start, gbc);
      panel.add(Start);

      gbc.gridx = 15;
      gbc.gridy = 11;
      gbc.gridwidth = 5;
      gbc.gridheight = 5;
      gbc.fill = GridBagConstraints.BOTH;
      gbc.weightx = 1;
      gbc.weighty = 1;
      gbc.anchor = GridBagConstraints.CENTER;
      gbc.insets = new Insets(25, 5, 25, 5);
      gbl.setConstraints(Stop, gbc);
      panel.add(Stop);

      gbc.gridx = 10;
      gbc.gridy = 4;
      gbc.gridwidth = 10;
      gbc.gridheight = 7;
      gbc.fill = GridBagConstraints.BOTH;
      gbc.weightx = 1;
      gbc.weighty = 1;
      gbc.anchor = GridBagConstraints.CENTER;
      gbc.insets = new Insets(35, 5, 40, 5);
      gbl.setConstraints(Configure, gbc);
      panel.add(Configure);

      gbc.gridx = 10;
      gbc.gridy = 0;
      gbc.gridwidth = 10;
      gbc.gridheight = 4;
      gbc.fill = GridBagConstraints.BOTH;
      gbc.weightx = 1;
      gbc.weighty = 1;
      gbc.anchor = GridBagConstraints.CENTER;
      gbc.insets = new Insets(25, 5, 20, 5);
      gbl.setConstraints(AddRecipiants, gbc);
      panel.add(AddRecipiants);

      Progress.setMaximum(100);
      Progress.setString("0%");
      Progress.setValue(0);
      gbc.gridx = 10;
      gbc.gridy = 16;
      gbc.gridwidth = 10;
      gbc.gridheight = 4;
      gbc.fill = GridBagConstraints.BOTH;
      gbc.weightx = 1;
      gbc.weighty = 1;
      gbc.anchor = GridBagConstraints.CENTER;
      gbc.insets = new Insets(25, 5, 15, 5);
      gbl.setConstraints(Progress, gbc);
      panel.add(Progress);

      gbc.gridx = 0;
      gbc.gridy = 0;
      gbc.gridwidth = 10;
      gbc.gridheight = 1;
      gbc.fill = GridBagConstraints.BOTH;
      gbc.weightx = 1;
      gbc.weighty = 1;
      gbc.anchor = GridBagConstraints.CENTER;
      gbc.insets = new Insets(5, 45, 0, 45);
      gbl.setConstraints(RLable, gbc);
      panel.add(RLable);

      frame.add(panel);
      frame.setVisible(true);
    }
  }
} 
```

# c++ - 将 CreateDirectory 的 'const char*' 转换为 'LPCTSTR'

> ID：14370982
> 
> 赞同：5
> 
> 时间：2013-01-17T01:49:05.427
> 
> 标签：c++, c2664

```
#include "stdafx.h"
#include <string>
#include <windows.h>
using namespace std;

int main()
{
    string FilePath = "C:\\Documents and Settings\\whatever";
    CreateDirectory(FilePath, NULL);
return 0;
} 
```

错误：错误 C2664：“CreateDirectory”：无法将参数 1 从“const char *”转换为“LPCTSTR”

1.  我如何进行这种转换？
2.  下一步是将今天的日期设置为字符串或字符，并将其与文件路径连接起来。这会改变我执行第 1 步的方式吗？
3.  我在数据类型和转换方面很糟糕，对 5 岁的孩子有很好的解释吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T02:05:01.423

`std::string`是一个保存`char`基于数据的类。要将`std::string`数据传递给 API 函数，您必须使用其`c_str()`方法获取`char*`指向字符串实际数据的指针。

`CreateDirectory()`将 a`TCHAR*`作为输入。如果`UNICODE`已定义，则`TCHAR`映射到`wchar_t`，否则映射到`char`。如果您需要坚持`std::string`但不想让您的代码`UNICODE`感知，请`CreateDirectoryA()`改用，例如：

```
#include "stdafx.h"
#include <string>
#include <windows.h>

int main()
{
    std::string FilePath = "C:\\Documents and Settings\\whatever";
    CreateDirectoryA(FilePath.c_str(), NULL);
    return 0;
} 
```

要使此代码`TCHAR`感知，您可以这样做：

```
#include "stdafx.h"
#include <string>
#include <windows.h>

int main()
{
    std::basic_string<TCHAR> FilePath = TEXT("C:\\Documents and Settings\\whatever");
    CreateDirectory(FilePath.c_str(), NULL);
    return 0;
} 
```

然而，基于 Ansi 的操作系统版本早已死去，如今一切都是 Unicode。 `TCHAR`不应再在新代码中使用：

```
#include "stdafx.h"
#include <string>
#include <windows.h>

int main()
{
    std::wstring FilePath = L"C:\\Documents and Settings\\whatever";
    CreateDirectoryW(FilePath.c_str(), NULL);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:56:14.210

如果您没有构建 Unicode 可执行文件，`c_str()`则调用 std::string 将生成一个`const char*`（也称为非 Unicode LPCTSTR），您可以将其传递给`CreateDirectory`()。

代码如下所示：

```
CreateDirectory(FilePath.c_str(), NULL): 
```

请注意，如果您尝试构建 Unicode 可执行文件，这将导致编译错误。

如果您必须追加，`FilePath`我建议您继续使用`std::string`或使用 Microsoft`CString`来进行字符串操作，因为这比使用 C 方式和处理 raw char* 更痛苦。我个人会使用`std::string`，除非您已经在使用 CString 的 MFC 应用程序中。

# c# - 将实时调试会话从 VStudio (2010) 切换到 WinDbg

> ID：14370983
> 
> 赞同：1
> 
> 时间：2013-01-17T01:49:05.803
> 
> 标签：c#, debugging, windbg, visual-studio-debugging

我怀疑答案是否定的，但也许有人知道一些魔法。

我发现 VStudio 更容易用于单步执行 c# 代码。但是，当我在 CLR 层下方的（非 CLR）层中遇到崩溃时，我希望能够使用 WinDbg。我能想到的唯一一件事就是在 VStudio 中制作一个 DMP 文件并在 WinDbg 中打开它。但是，转储创建并没有提供很多选项，我怀疑我会错过一些调试信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:30:19.380

Visual Studio 将对用户内存以及线程信息进行完整的内存转储，这通常是您真正需要的。否则我唯一知道要做的就是在VS下正常调试它，然后用windbg附加（非侵入式）。不幸的是，您不能以这种方式单步执行 windbg 中的代码，但您可以执行大多数其他操作（检查内存、转储进程等...）

# java - 同时获取多个 HTML 页面的有效方法

> ID：14370984
> 
> 赞同：2
> 
> 时间：2013-01-17T01:49:08.280
> 
> 标签：java, multithreading, http

所以我正在为某个网站进行网络抓取。问题是：

给定一组 URL（按 100 到 1000 的顺序），我想以一种有效的方式检索每个 URL 的 HTML，特别是在时间方面。我需要能够每 5 分钟处理 1000 个请求。

这通常意味着使用线程池来执行来自一组尚未请求的 url 的请求。但在开始实施之前，我认为值得在这里问一下，因为我相信在进行网络抓取或网络爬虫时这是一个相当普遍的问题。

有没有我需要的图书馆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:17:14.387

> 所以我正在为某个网站进行网络抓取。

您是在抓取单个服务器还是从多个其他主机抓取网站？如果是前者，那么您正在抓取的服务器可能不喜欢来自单个 i/p 的太多并发连接。

如果是后者，这确实是一个关于您应该从机器打开多少出站连接的一般问题。有物理限制，但它相当大。实际上，这将取决于该客户端的部署位置。连接性越好，它可以容纳的连接数就越多。

您可能想查看一个好的下载管理器的源代码，看看它们是否对出站连接数有限制。

绝对是用户异步 i/o，但您仍然可以很好地限制数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:52:31.013

我将从研究[异步通信](https://en.wikipedia.org/wiki/Asynchronous_communication)开始。然后看看[Netty](https://netty.io/)。

请记住，加载网页的速度总是有限制的。对于普通的家庭连接，大约需要一秒钟。在编写应用程序时要考虑到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T01:53:13.763

您的带宽利用率将是您检索到的所有 HTML 文档的总和（加上一点开销），无论您如何对其进行切片（尽管某些 Web 服务器可能支持压缩的 HTTP 流，因此请务必使用能够接受它们的客户端）。

并发线程的最佳数量在很大程度上取决于您与相关站点的网络连接。只有实验才能找到最佳数字。您当然可以使用一组线程来检索 HTML 文档，并使用一组单独的线程来处理它们，以便更容易找到正确的平衡点。

[我是 .NET 世界中用于 Web 抓取的HTML Agility Pack](http://htmlagilitypack.codeplex.com/)的忠实粉丝，但无法对 Java 提出具体建议。以下问题可能有助于找到一个好的、基于 Java 的抓取平台

[使用 Java 进行网页抓取](https://stackoverflow.com/questions/3202305/web-scraping-with-java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T04:03:56.383

[http://wwww.Jsoup.org](http://wwww.Jsoup.org)仅用于报废部分！我认为你应该自己实现线程池。

**更新**

如果这种方法适合您的需要，您可以在此处下载完整的类文件：http: [//codetoearn.blogspot.com/2013/01/concurrent-web-requests-with-thread.html](http://codetoearn.blogspot.com/2013/01/concurrent-web-requests-with-thread.html)

```
 AsyncWebReader webReader = new AsyncWebReader(5/*number of threads*/, new String[]{
              "http://www.google.com",
              "http://www.yahoo.com",
              "http://www.live.com",
              "http://www.wikipedia.com",
              "http://www.facebook.com",
              "http://www.khorasannews.com",
              "http://www.fcbarcelona.com",
              "http://www.khorasannews.com",
            });

    webReader.addObserver(new Observer() {
      @Override
      public void update(Observable o, Object arg) {
        if (arg instanceof Exception) {
          Exception ex = (Exception) arg;
          System.out.println(ex.getMessage());
        } /*else if (arg instanceof List) {
          List vals = (List) arg;
          System.out.println(vals.get(0) + ": " + vals.get(1));
        } */else if (arg instanceof Object[]) {
          Object[] objects = (Object[]) arg;
          HashMap result = (HashMap) objects[0];
          String[] success = (String[]) objects[1];
          String[] fail = (String[]) objects[2];

          System.out.println("Failds");
          for (int i = 0; i < fail.length; i++) {
            String string = fail[i];
            System.out.println(string);
          }

          System.out.println("-----------");
          System.out.println("success");
          for (int i = 0; i < success.length; i++) {
            String string = success[i];
            System.out.println(string);
          }

          System.out.println("\n\nresult of Google: ");
          System.out.println(result.remove("http://www.google.com"));
        }
      }
    });
    Thread t = new Thread(webReader);
    t.start();
    t.join(); 
```

# c# - 如何选择使用默认命名空间的节点？

> ID：14370989
> 
> 赞同：1
> 
> 时间：2013-01-17T01:49:42.010
> 
> 标签：c#, xml, xpath, xsd, xml-namespaces

XML文件的结构大致如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<a xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="url1" xsi:schemaLocation="url2 url3">
   <b>
     <c></c>
     <c></c>
     <c></c>
   </b>
</a> 
```

我的目标是选择所有“c”元素，但下面的 xpath 表达式不起作用：“//a/b/c”。

IE：

```
XmlDocument doc= new XmlDocument();
doc.Load(filepath);
XmlNodeList l = doc.SelectNodes("//a/b/c"); // 0 nodes 
```

我测试过的唯一有效的 xpath 表达式是 /*（1 个节点）和 //*（所有节点）。

这个问题与 XML 命名空间有关吗？如果是这样，设置 XMLDocument 对象的正确方法是什么？

```
 XmlDocument doc= new XmlDocument();
        doc.Load(filepath);
        XmlNamespaceManager m = new XmlNamespaceManager(doc.NameTable);
        m.AddNamespace(/* what goes here? */);
        XmlNodeList l = doc.SelectNodes("//a/b/c", m); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T01:59:01.000

您需要为文档使用的默认命名空间分配一个命名空间前缀，然后在 XPath 中使用它：

```
XmlDocument doc= new XmlDocument();
doc.Load(filepath);

XmlNamespaceManager m = new XmlNamespaceManager(doc.NameTable);
m.AddNamespace("myns", "url1");

XmlNodeList l = doc.SelectNodes("/myns:a/myns:b/myns:c", m); 
```

您可以将前缀“myns”替换为基本上任何内容（不带空格的字母数字），只要它在第 4 行和 XPath 之间是一致的，并且在第 4 行中正确分配给“url1”命名空间。

# javascript - 一页上的Jquery冲突

> ID：14370997
> 
> 赞同：0
> 
> 时间：2013-01-17T01:50:49.770
> 
> 标签：javascript, jquery

我与一页中的 2 个 javascript 调用发生冲突，想知道是否有人能发现如何解决它。

[这是此页面](http://www.dev.inside-guides.co.uk/brentwood/pages/index.html)的 html ：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--#include virtual="/Assets/Templates/Public/Franchise/HeadCSS.asp"-->

<!-- jQuery library (served from Google) -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<!-- bxSlider Javascript file -->
<script  type="text/javascript" src="/js/bxslider/jquery.bxslider.min.js"></script>
<!-- bxSlider CSS file -->
<link rel="stylesheet" href="/js/bxslider/jquery.bxslider.css" type="text/css" />

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.js"></script>
<link type="text/css" href="/js/pikame/styles/bottom.css" rel="stylesheet" />
<script type="text/javascript" src="/js/pikame/lib/jquery.jcarousel.min.js"></script>
<script type="text/javascript" src="/js/pikame/lib/jquery.pikachoose.js"></script>

</head>
<body id="home">
<!--#include virtual="/Assets/Templates/Public/Franchise/Home.asp"-->

<h1>Latest in Brentwood</h1>
<div>
<ul id="pikame">
  <li><img src="http://bxslider.com/images/170_200/trees.jpg" /><div style="text-align:center;"><h3>Trees</h3><span style="display:block">Italian</span></li>
  <li><img src="http://bxslider.com/images/170_200/tree_root.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/houses.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/hill_road.jpg" /></li>
</ul>
<script>$(function(){ $('#pikame').pikachoose(); });</script>
</div>
<h2>Featured Brentwood Restaurants</h2>
<ul class="bxslider">
  <li><img src="http://bxslider.com/images/170_200/trees.jpg" /><div style="text-align:center;"><h3>Trees</h3><span style="display:block">Italian</span></li>
  <li><img src="http://bxslider.com/images/170_200/tree_root.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/houses.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/hill_road.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/me_trees.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/hill_trees.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/mountain.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/houses.jpg" /></li>
</ul>

<h2>Featured Brentwood Spa and Beauty</h2>
<ul class="bxslider">
  <li><img src="http://bxslider.com/images/170_200/trees.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/tree_root.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/houses.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/hill_road.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/me_trees.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/hill_trees.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/mountain.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/houses.jpg" /></li>
</ul>

<h2>Featured Brentwood Shopping</h2>
<ul class="bxslider">
  <li><img src="http://bxslider.com/images/170_200/trees.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/tree_root.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/houses.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/hill_road.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/me_trees.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/hill_trees.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/mountain.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/houses.jpg" /></li>
</ul>

<h2>Featured Brentwood Tradesmen</h2>
<ul class="bxslider">
  <li><img src="http://bxslider.com/images/170_200/trees.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/tree_root.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/houses.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/hill_road.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/me_trees.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/hill_trees.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/mountain.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/houses.jpg" /></li>
</ul>

<h2>Featured Brentwood Bars and Clubs</h2>
<ul class="bxslider">
  <li><img src="http://bxslider.com/images/170_200/trees.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/tree_root.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/houses.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/hill_road.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/me_trees.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/hill_trees.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/mountain.jpg" /></li>
  <li><img src="http://bxslider.com/images/170_200/houses.jpg" /></li>
</ul>

<script type="text/javascript">
  $(document).ready(function(){

$('.bxslider').bxSlider({
  minSlides: 3,
  maxSlides: 4,
  slideWidth: 170,
  slideMargin: 10
});
  });
</script>

<!--#include virtual="/Assets/Templates/Public/Franchise/TemplateEnd.asp"-->
</body>
</html>
<!--#include virtual="/System/Shutdown.asp"--> 
```

如您所见，有 2 个 javascript 调用，第一个正在取消第二个。任何想法都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T02:00:49.473

您包含 jQuery 两次。

删除行：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:48:22.247

试试这个 ：

```
<head>
<!--#include virtual="/Assets/Templates/Public/Franchise/HeadCSS.asp"-->

<!-- jQuery library (served from Google) -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="/js/pikame/lib/jquery.jcarousel.min.js"></script>
<script type="text/javascript" src="/js/pikame/lib/jquery.pikachoose.js"></script>
<!-- bxSlider Javascript file -->
<script  type="text/javascript" src="/js/bxslider/jquery.bxslider.min.js"></script>
<!-- bxSlider CSS file -->
<link rel="stylesheet" href="/js/bxslider/jquery.bxslider.css" type="text/css" />
<link type="text/css" href="/js/pikame/styles/bottom.css" rel="stylesheet" />
</head> 
```