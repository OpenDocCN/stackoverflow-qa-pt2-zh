# StackOverflow 问答 12551000-12551999

# rubygems - Gem install susy 导致“nil:NilClass 的未定义方法‘大小’”

> ID：12551000
> 
> 赞同：1
> 
> 时间：2012-09-23T08:59:53.323
> 
> 标签：rubygems, terminal, installation, compass-sass, susy-compass

操作系统：Ubuntu 12.04
Ruby 版本：ruby 1.9.3p0（2011-10-30 修订版 33570）[i686-linux]

当我尝试通过 安装 Susy 时`gem install susy`，终端会给我以下响应：

`ERROR: While executing gem ... (NoMethodError)`
`undefined method 'size' for nil:NilClass`

到目前为止，Google/Stackoverflow 搜索对我没有帮助

# html - HTML5 Canvas 线条抗锯齿不一致

> ID：12551005
> 
> 赞同：2
> 
> 时间：2012-09-23T09:00:24.790
> 
> 标签：html, canvas, 2d, antialiasing, rectangles

我有一种情况，抗锯齿在 Chrome 和 Firefox 下并不完美，但在 Internet Explorer 9 中完美。

简化后的代码是：

```
ctx.scale(zoom, zoom);
for (var i = 0; i <= 100; i++){
    ctx.fillRect(i*10, 0, 1, 1000); 
} 
```

当我使用缩放进行缩小时，线条不是均匀地模糊成实心阴影正方形，而是从 1) 一致的线条到 2) 不均匀的线条，再到 3) 不均匀的阴影正方形。

有什么办法可以修复2号吗？我通过简单地绘制一个阴影正方形而不是所有线条来固定数字 3。我有一个想法，那就是模糊线条或类似的东西。也许这会奏效？（虽然可能更密集的处理？）

谢谢

# python - cvxopt.matrix和numpy.array之间的python3转换

> ID：12551009
> 
> 赞同：4
> 
> 时间：2012-09-23T09:01:01.600
> 
> 标签：python, numpy, python-3.x

蟒蛇：python3.2 cvxopt：1.1.5 numpy：1.6.1

我读了[http://abel.ee.ucla.edu/cvxopt/examples/tutorial/numpy.html](http://abel.ee.ucla.edu/cvxopt/examples/tutorial/numpy.html)

```
import cvxopt
import numpy as np
cvxopt.matrix(np.array([[7, 8, 9], [10, 11, 12]])) 
```

我有

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
TypeError: non-numeric element in list 
```

通过`np.array(cvxopt.matrix([[7, 8, 9], [10, 11, 12]]))`，我得到了

```
array([[b'\x07', b'\n'],
   [b'\x08', b'\x0b'],
   [b'\t', b'\x0c']], 
  dtype='|S8') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-08-29T07:58:37.447

从`cvxopt == 1.2.6`和开始`numpy == 1.21.2`：

```
import cvxopt
import numpy as np

matrix = cvxopt.matrix(np.array([[7, 8, 9], [10, 11, 12]]))
print(matrix) 
```

产生输出：

```
[  7   8   9]
[ 10  11  12] 
```

并`print(repr(matrix))`说：

```
<2x3 matrix, tc='i'> 
```

并`print(type(matrix))`说：

```
<class 'cvxopt.base.matrix'> 
```

结果矩阵具有整数类型 ( [the`'i'`](https://cvxopt.org/userguide/matrices.html#dense-matrices) )，因为起始`numpy`数组包含整数。从`double`结果`'d'`类型开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T14:03:23.667

虽然它不是固定的，但一个简单的解决方法

```
cvxopt.matrix(nparray) 
```

是

```
cvxopt.matrix(nparray.T.tolist()) 
```

相反的方向更难。如果您期望 int 数组，

```
np.vectorize(lambda x: int.from_bytes(x, 'big'))(np.array(cvxoptmat).T) 
```

对于双数组：

```
import struct
np.vectorize(lambda x: struct.unpack('d', x))(np.array(cvxoptmat).T) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T09:23:51.100

检查我在 cvxopt 讨论论坛 ( [https://groups.google.com/forum/?fromgroups=#!topic/cvxopt/9jWnkbJvk54](https://groups.google.com/forum/?fromgroups=#!topic/cvxopt/9jWnkbJvk54) ) 上发布的修补后的 dense.c。使用它重新编译，您将能够将 np 数组转换为密集矩阵。我假设稀疏矩阵需要进行相同类型的编辑，但由于我不需要它们，我将把它留给开发人员。

# google-maps - Google Directions API 首选交通方式

> ID：12551012
> 
> 赞同：3
> 
> 时间：2012-09-23T09:01:12.920
> 
> 标签：google-maps, google-maps-api-3

在请求公交路线时，谷歌地图网站提供了指定首选公交模式的选项——在选择“公共交通”后的“显示选项”下。有没有办法将此参数传递给 Google Maps API Directions 服务？还存在选择更少的转移或更少的步行的选项。但是，我发现 API 文档中没有提到这些参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:55:06.257

我认为您已经了解了文档中的“模式”可选参数：

[https://developers.google.com/maps/documentation/directions/#RequestParameters](https://developers.google.com/maps/documentation/directions/#RequestParameters)

[https://developers.google.com/maps/documentation/directions/#TravelModes](https://developers.google.com/maps/documentation/directions/#TravelModes)

;-)

# objective-c - 从另一个类调用时 NSMenu 为空

> ID：12551014
> 
> 赞同：-1
> 
> 时间：2012-09-23T09:01:20.423
> 
> 标签：objective-c, xcode, nslog, nsmenu, appdelegate

我有一个状态栏应用程序的 NSMenu，在 AppDelegate.h 中定义如下：

```
IBOutlet NSMenu *spotMenu; 

@property (nonatomic, retain) IBOutlet NSMenu *spotMenu; 
```

在 AppDelegate.m 中是这样的：

```
[spotApp setMenu: spotMenu];

- (NSMenu *) spotMenu
{
return spotMenu;

} 
```

我正在尝试从另一个类中访问它，如下所示：

另一个类.h

```
@class AppDelegate;

AppDelegate *appD; 
```

另一个类.m

```
#import "AppDelegate.h"

NSLog(@"%@", [appD spotMenu]); 
```

它返回空值。

```
2012-09-23 10:23:37.543 Spot[581:303] (null) 
```

当我在 AppDelegate 类中执行相同操作时，如下所示：

```
NSLog(@"%@", spotMenu); 
```

它返回正确的内容：

```
2012-09-23 10:56:05.460 Spot[679:303] <NSMenu: 0x100618030>
Title: 
Supermenu: 0x0 (None), autoenable: YES
Items:     (
    "<NSMenuItem: 0x100618170 About Spot>",
    "<NSMenuItem: 0x10011b9b0 Preferences>",
    "<NSMenuItem: 0x1001b9390 >",
    "<NSMenuItem: 0x1001bbe70 >",
    "<NSMenuItem: 0x1001b99a0 Quit Spot>"
) 
```

有什么方法可以从另一个类获得与 AppDelagate 类相同的输出？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:09:31.720

要访问您的 App Delegate，您应该这样做：

```
AppDelegate* appD = (AppDelegate *)[[NSApplication sharedApplication] delegate]; 
```

或者

```
AppDelegate* appD = (AppDelegate *)[NSApp delegate]; 
```

然后你可以从 appD.spotMenu 引用你的 NSMenu

# android - android布局和文本换行中的几个textview

> ID：12551015
> 
> 赞同：0
> 
> 时间：2012-09-23T09:01:29.167
> 
> 标签：android, textview, android-linearlayout

我有一个包含 4 个 TextViews 的水平 LinearLayout。有时其中一个文本视图中的文本很长，并且最后一个文本视图不适合布局。
当然，我可以设置一个文本视图，但这不是最佳选择，因为文本是从不同的地方设置的并且具有不同的样式。
知道如何解决这个问题吗？
非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:43:17.653

您可以使用权重在 LinearLayout 内分配视图，每个视图占 25%。

例如（未经测试，可能包含拼写错误）：

```
<LinearLayout android:weightSum="100" android:layout_width="match_parent" android:layout_height="wrap_content" android:orientation="horizontal">
<TextView android:layout_weight="25" android:layout_width="0dp" android:layout_height="wrap_content"></TextView>
<TextView android:layout_weight="25" android:layout_width="0dp" android:layout_height="wrap_content"></TextView>
<TextView android:layout_weight="25" android:layout_width="0dp" android:layout_height="wrap_content"></TextView>
<TextView android:layout_weight="25" android:layout_width="0dp" android:layout_height="wrap_content"></TextView>
</LinearLayout> 
```

# windows - Xuggler 在 Windows 7 上使用 Tomcat

> ID：12551023
> 
> 赞同：1
> 
> 时间：2012-09-23T09:03:09.387
> 
> 标签：windows, tomcat, web, xuggle

我一直在开发一个网络应用程序，在这里我需要在用户上传视频时生成视频的缩略图。我使用 Tomcat 作为我的服务器。所以我的 Tomcat 位于**C:\Apache Tomcat 6**中。那么我需要在**C:\Apache Tomcat 6\lib**文件夹中包含 Xuggler 的 jar 文件吗？？？？如果是这样，我需要将哪些特定的 jar 文件放在那里？哪个版本的 Xuggler 会更好？我没有使用 Maven 或 Ivy 或任何依赖项。我只是在简单的 Servlet 和 Jsp 概念中做 Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T13:25:09.100

**我将解释如何在 localhost tomcat 7 上设置 xuggler**

1.  下载 xuggler jars 及其所有依赖项。
2.  然后从xuggler.jar（xuggler5.2.jar或xuggler5.4.jar）中提取.dll文件，它是用ic语言编写的二进制文件。
3.  将非常适合您的系统（32 位 x86，64 位 x64）的 .dll 文件复制到任何文件夹。例如 c:\xuggler.dll
4.  将 .dll 的路径添加到类路径中。
5.  如果您在构建路径中使用 eclipse，请将 .dll 的路径添加到本机库路径以避免任何问题。

    这绝对可以，我已经做了很多次了！！！如果您觉得我的回答有用，请投票！！！

# css - CSS：如何防止背景颜色被较少文件中的颜色覆盖

> ID：12551027
> 
> 赞同：0
> 
> 时间：2012-09-23T09:03:31.853
> 
> 标签：css

我正在处理这个[页面](http://www.frogn.kommune.no/info/kultur-idrett-fritid/info/lag-foreninger/)。

样式表文件和大部分设计都是由另一个程序员编写的。在 frogn.css 中，`background-color`设置应该用于页面的外部区域（其中没有信息）。例如[这里](http://www.frogn.kommune.no/info/kultur-idrett-fritid/info/)。

在我正在使用的页面中，它`background-color`被 bootstrap.less 中的颜色覆盖，我不想更改引导文件的设置，因为它会影响其他页面。

如何强制`background-color`显示 frogn.css ？我尝试在颜色属性之后使用 !important ，但没有帮助。

**更新*：我注意到设置 !important 在 background-color 实际起作用之后。我只做了一次普通的刷新，所以我得到了页面的缓存版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:12:16.490

在 frogn.css 我可以看到身体背景已经有了`!important`

```
body { background-color: #eaeaea !important; color: #333; } 
```

并且还应用了更具体的规则：

```
#front { background-color: #EAEAEA !important; } 
```

要覆盖这些规则，您必须提供更具体的选择器，例如：

```
html #front { background-color: #FFF !important; } 
```

这将是“更重”并且应该覆盖默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:18:10.577

这样做确实解决了问题：

```
body { background-color: #eaeaea !important; color: #333; } 
```

# ruby - 无法安装 Ruby AMQP Gem

> ID：12551028
> 
> 赞同：0
> 
> 时间：2012-09-23T09:03:52.460
> 
> 标签：ruby, rubygems, gem

目前，我已经在我的 Ubuntu 11.10 上安装了 Ruby（ruby 1.9.3p194（2012-04-20 修订版 35410））。想要使用“sudo gem install amqp”安装 AMQP gem。但它失败并显示以下错误消息：

```
 Building native extensions.  This could take a while...
    ERROR:  Error installing amqp:
    ERROR: Failed to build gem native extension.

    /usr/local/bin/ruby extconf.rb
    checking for main() in -lssl... no
    checking for rb_trap_immediate in ruby.h,rubysig.h... no
    checking for rb_thread_blocking_region()... yes
    checking for inotify_init() in sys/inotify.h... yes
    checking for writev() in sys/uio.h... yes
    checking for rb_thread_check_ints()... yes
    checking for rb_time_new()... yes
    checking for sys/event.h... no
    checking for epoll_create() in sys/epoll.h... yes
    creating Makefile

    make
    compiling ed.cpp
    make: g++: Command not found
    make: *** [ed.o] Error 127

    Gem files will remain installed in /usr/local/lib/ruby/gems/1.9.1/gems/eventmachine-1.0.0 for inspection.
    Results logged to /usr/local/lib/ruby/gems/1.9.1/gems/eventmachine-1.0.0/ext/gem_make.out 
```

如果有人可以帮助我，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:06:48.833

为了编译本机扩展，您需要一个编译器。只需使用以下命令安装 g++ 和朋友：

```
sudo apt-get install build-essential 
```

然后再试一次。

# java - 自动更新 Maven 依赖项

> ID：12551031
> 
> 赞同：9
> 
> 时间：2012-09-23T09:04:09.270
> 
> 标签：java, maven, pom.xml, dependency-management

我在 Eclipse 中有大量的 Maven 项目，并且有很多依赖项。

随着新版本的发布，一些依赖项经常在存储库中更新。目前我必须手动注意这些，并手动编辑相应`pom.xml`的 s 以使用新版本。

在 Eclipse 中是否有自动执行以下操作的方法：

*   检查每个依赖项的更新版本是否可用？
*   如果是这样，自动建议更改`pom.xml`（如“快速修复”功能）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-23T09:20:38.763

您正在寻找 Maven[版本插件](http://www.mojohaus.org/versions-maven-plugin/)：

> **versions:display-dependency-updates** 显示所有有较新版本可用的依赖项。

这将显示所有更新的依赖项的列表。有一个类似的命令可以显示所有更新插件的列表。

似乎没有自动将依赖项更新到最新版本的命令。从文档看来，`versions:display-property-updates`如果将依赖项版本指定为 pom 文件中的属性，则可以使用 更新依赖项版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-24T07:49:44.800

使用 Github 时，您可以使用 Dependabot GitHub 插件，它会为每个需要更新的依赖项生成一个拉取请求。

# java - 在 Eclipse 中构建 android 项目花费的时间太长

> ID：12551032
> 
> 赞同：0
> 
> 时间：2012-09-23T09:04:52.873
> 
> 标签：java, android, eclipse

我有一个相对较小的项目（50 个类），其中包含 13 个 JAR 库（android-support、gson、guava 等）并使用一个 Android 库（Sherlock）。

问题是每当我按下“构建项目”时，构建/部署到设备大约需要两分钟。（但是新创建的 android 项目的构建时间不超过 5 秒）。

我可以用它做些什么（限制库的数量，切换到另一个 IDE）？或者这只是通常的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:26:15.467

该项目需要很长时间才能编译，因为它需要添加 JAR 文件和 Sherlock 库。添加到项目中的每个库都会增加项目的构建时间。

切换到另一个 IDE 不会有很大的不同，因为很多构建都是由 Android SDK 处理的。

您最好的选择可能是使用消除来限制项目的库，以查看导致最大构建时间增加的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T09:32:26.890

AlexR 有一个很好的答案。添加：

我使用 IDEA，所以我不知道如何在 Eclipse 中执行此操作，但我知道可以完成 - 可能是右键单击上下文菜单。

从构建中排除开发/测试不需要的任何布局。我倾向于在项目的早期放置占位符布局，然后在项目后期当主要代码达到 alpha 质量时对其进行改进。我排除了除一组之外的所有内容，例如。“正常”肖像，完成我所有的代码创建，然后只在接近尾声时添加布局。

资产也是如此。您是否拥有大量资产或大型资产？排除这些，或者暂时用较小的替换。

综上所述，所使用的编译器在优化方面做得非常好，随着类数量的增加，构建时间不可避免地会增加。它不是指数的（我从未真正测量过它），但它肯定比线性更糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T09:23:48.837

我没有直接回答您的问题，但我可以向您推荐以下步骤。

1.  您将“大”项目的构建+部署与“小”项目的构建进行比较。您是否尝试比较两者的完全相同的操作？结果是什么？
2.  尝试创建新的工作区。有时它对 Eclipse 有帮助。
3.  尝试从“小”项目一步步走向“大”。例如首先添加依赖项。尝试构建项目。时间没有明显变化？继续添加 20 个自定义类等。时间改变了吗？尝试查找导致此问题的库。你也可以选择其他策略：尝试添加类而不添加依赖jar，只注释掉使用依赖的代码。这种方式可能更复杂，但我相信仍然可能，因为您的项目确实太大了。

祝你好运。

# asp.net - ASP.NET MVC 4，Web API - 404 未找到

> ID：12551036
> 
> 赞同：1
> 
> 时间：2012-09-23T09:05:36.053
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api, visual-studio-2012

我知道 ASP.NET MVC 4 无法在区域中路由 Web API（原文如此！）。

我在 Visual Studio 2012 中为测试目的创建了新的“Web API”项目（在新解决方案中）。

但它不起作用。默认 HomeController (Controller) 有效，但未找到 ValuesController (ApiController) (404)。

我已经安装了 VS 2010 和 VS 2012。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T09:40:02.810

ASP.NET MVC 4 无法在**开箱即用的**区​​域中路由 Web API 。但是，只要稍加努力，您就可以让它发挥作用：[为什么我的区域特定 Web API 可以从所有其他区域访问？](https://stackoverflow.com/questions/12025347/why-are-my-area-specific-web-apis-accessible-from-all-other-areas)

相关的博客文章[在这里](http://blogs.infosupport.com/asp-net-mvc-4-rc-getting-webapi-and-areas-to-play-nicely/)有更多的细节。

# stored-procedures - 将用户定义的函数范围限定为 DB2 中的存储过程

> ID：12551039
> 
> 赞同：0
> 
> 时间：2012-09-23T09:05:54.643
> 
> 标签：stored-procedures, db2, user-defined-functions

是否可以在 DB2 的存储过程中定义用户定义的函数？我需要其中的很多，其中大多数只需要在一个存储过程中。是否可以将它们限定为存储过程，以便我不必在数据库级别定义它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:29:50.300

不，你不能这样做。但是，如果您使用模块（在 DB2 9.7 和更新版本中可用），您可以在模块内定义不可在模块外使用的函数。

这是一篇很好的文章[，涵盖了](https://www.ibm.com/developerworks/mydeveloperworks/blogs/SQLTips4DB2LUW/entry/module?lang=en)模块的基础知识，由 DB2 的首席 SQL 架构师编写。

# java - 无法从spring mvc中的控制器获取视图

> ID：12551042
> 
> 赞同：0
> 
> 时间：2012-09-23T09:06:20.690
> 
> 标签：java, spring, jakarta-ee, spring-mvc

嗨，返回模型后我无法获取视图页面，下面的视图是一些代码块

```
List<GridMappingVO> searchList= gridMappingFacade.validate(gridMappingVO);
if( users.equals(searchList.get(0).getUser()) 
    && passwrd.equals(searchList.get(0).getPass()) ) {
    System.out.println("validation succesfull");
    mv = new ModelAndView("searchResults");
    logger.info("Response is: " + mv);
    mv.addObject("searchList", searchList);
} else {
    List<String> list = new ArrayList<String>();
    list.add("Invalid");
    map.put("error_messages", list);
    mv.addAllObjects(map);
}
return mv; 
```

**堆栈跟踪**

```
08:51:31,713  INFO http-8080-1 controller.GridMappingController:45 - Response is: ModelAndView: reference to view with name 'searchResults'; model is null

08:51:31,728 DEBUG http-8080-1 support.DefaultListableBeanFactory:1367 - Invoking afterPropertiesSet() on bean with name 'searchResults' 
```

谁能帮我看看这有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:26:37.387

如果您的条件不满足，它将转到 else 块。所以模型永远不会被实例化。在 if 块外声明模型对象的实例化

```
mv = new ModelAndView("searchResults");
    List<GridMappingVO> searchList= gridMappingFacade.validate(gridMappingVO);
    if( users.equals(searchList.get(0).getUser()) 
    && passwrd.equals(searchList.get(0).getPass()) ) {
    System.out.println("validation succesfull"); 
    logger.info("Response is: " + mv);
    mv.addObject("searchList", searchList);
} else {
    List<String> list = new ArrayList<String>();
    list.add("Invalid");
    map.put("error_messages", list);
    mv.addAllObjects(map);
}
return mv; 
```

您也可以这样做，在方法的开头实例化一个哈希图，例如：

```
Map model = new HashMap(); 
```

并将对象添加到模型中。

```
model.put("searchList", searchList); 
```

返回时创建一个新的 ModelAndView 对象

```
return new ModelAndView("jsp/searchResults", model) 
```

# c++ - C++ 运行错误：未分配被释放的指针

> ID：12551043
> 
> 赞同：-4
> 
> 时间：2012-09-23T09:06:25.220
> 
> 标签：c++

我正在学习 c++，并且正在开发一个程序，该程序不断给我一个“未分配指针被释放”错误。它是一个杂货店程序，从 txt 文件中输入数据，然后用户可以输入商品编号和数量。我已经阅读了类似的问题，但让我失望的是“指针”问题。如果有人可以看看并帮助我，我将不胜感激。我在 Mac 上使用 Netbeans IDE 7.2。我只会发布我到目前为止的整篇文章。谢谢。

```
#include <iostream>
#include <fstream>
#include <string>
#include <vector>

using namespace std;

class Product
{
  public:
      // PLU Code
  int getiPluCode()
  {
    return iPluCode;
  }

  void setiPluCode( int iTempPluCode)
  {
    iPluCode = iTempPluCode;
  }

  // Description
  string getsDescription()
  {
    return sDescription;
  }

  void setsDescription( string sTempDescription)
  {
    sDescription = sTempDescription;
  }

  // Price
  double getdPrice()
  {
    return dPrice;
  }

  void setdPrice( double dTempPrice)
  {
    dPrice = dTempPrice;
  }

  // Type..weight or unit
  int getiType()
  {
    return iType;
  }

  void setiType( int iTempType)
  {
    iType = iTempType;
  }

  // Inventory quantity
  double getdInventory()
  {
    return dInventory;
  }

  void setdInventory( double dTempInventory)
  {
    dInventory = dTempInventory;
  }

    private: 
      int iPluCode;
      string sDescription;
      double dPrice;
      int iType;
      double dInventory;
};

int main ()
{

  Product paInventory[21]; // Create inventory array
  Product paPurchase[21]; // Create customer purchase array

    // Constructor to open inventory input file
    ifstream InputInventory ("inventory.txt", ios::in);
        //If ifstream could not open the file
    if (!InputInventory)
    {
        cerr << "File could not be opened" << endl;
        exit (1);
    }//end if

    int x = 0;

    while (!InputInventory.eof () )
    {
      int iTempPluCode;
      string sTempDescription;
      double dTempPrice;
      int iTempType;
      double dTempInventory;

        InputInventory >> iTempPluCode >> sTempDescription >> dTempPrice >> iTempType >> dTempInventory;

        paInventory[x].setiPluCode(iTempPluCode);
        paInventory[x].setsDescription(sTempDescription);
        paInventory[x].setdPrice(dTempPrice);
        paInventory[x].setiType(iTempType);
        paInventory[x].setdInventory(dTempInventory);

        x++;

    }

    bool bQuit = false;
    //CREATE MY TOTAL VARIABLE HERE!

    int iUserItemCount = 0;
    do
    {
      int iUserPLUCode;
        double dUserAmount;
        double dAmountAvailable;
        int iProductIndex = -1;
        //CREATE MY SUBTOTAL VARIABLE HERE!

        while(iProductIndex == -1)
        {
            cout<<"Please enter the PLU Code of the product."<< endl;

            cin>>iUserPLUCode;

            for(int i = 0; i < 21; i++)
            {
            if(iUserPLUCode == paInventory[i].getiPluCode())
            {
                dAmountAvailable = paInventory[i].getdInventory();
                iProductIndex = i;  
            }
            }

                        //PLU code entry validation
            if(iProductIndex == -1)
            {
              cout << "You have entered an invalid PLU Code.";
            }
        }

        cout<<"Enter the quantity to buy.\n"<< "There are  "<< dAmountAvailable << "available.\n";
        cin>> dUserAmount;

        while(dUserAmount > dAmountAvailable)
        {
         cout<<"That's too many, please try again";
         cin>>dUserAmount;
        }

        paPurchase[iUserItemCount].setiPluCode(iUserPLUCode);// Array of objects function calls
        paPurchase[iUserItemCount].setdInventory(dUserAmount);
        paPurchase[iUserItemCount].setdPrice(paInventory[iProductIndex].getdPrice());       
        paInventory[iProductIndex].setdInventory( paInventory[iProductIndex].getdInventory() - dUserAmount );       

            iUserItemCount++;

        cout <<"Are you done purchasing items? Enter 1 for yes and 0 for no.\n";
        cin >> bQuit;

    //NOTE: Put Amount * quantity for subtotal
    //NOTE: Put code to update subtotal (total += subtotal)

    // NOTE: Need to create the output txt file!

    }while(!bQuit);

  return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:16:57.680

`iUserItemCount`从未初始化。当您将其用作索引时，您正在调用未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T11:53:26.443

因为您使用的是静态分配的数组，所以您可能偶然发现在数组结束后写入。

您声明该文件恰好有 21 个条目，但是 eof 条件会发生什么情况？如果您阅读最后一个条目，则流仍然没有设置 eof 位。这只发生在您尝试阅读并且什么都没有时。在第 21 个条目之后，循环仍然继续，因为没有设置 eof 位。它读取垃圾信息并尝试将其存储到 paInventory[21] 中，但该数组的大小仅为 21。

```
//after last read x=21 and eof not set
while (!InputInventory.eof () )
{
    //first read causes eof to be set
    InputInventory >> iTempPluCode >> sTempDescription >> dTempPrice >> iTempType >> dTempInventory;

    //Accessing paInventory[21] here which causes your error
    paInventory[x].setiPluCode(iTempPluCode);
    //...//
} 
```

# python - 如何使用 Opencv 显示视频

> ID：12551044
> 
> 赞同：0
> 
> 时间：2012-09-23T09:06:33.233
> 
> 标签：python, opencv

```
import cv
capture=cv.CaptureFromCAM(0)
cv.NamedWindow("capture", cv.CV_WINDOW_AUTOSIZE)
fourcc = cv.CV_FOURCC('M','J','P','G')
fps = 25
w, h = 640, 480
stream = cv.CreateVideoWriter("test.avi", fourcc, fps, (w, h))
while True:
    frame = cv.QueryFrame(capture)
    cv.WriteFrame(stream, frame)
    cv.ShowImage("capture", frame) 
```

此代码仅保存视频，但无法打开带视频的框架

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:32:59.693

您应该`WaitKey`在调用后调用函数`ShowImage`。引用 OpenCV wiki：

> 注意：该函数是 HighGUI 中唯一可以获取和处理事件的方法，因此需要定期调用它来进行正常的事件处理，除非在某些负责事件处理的环境中使用 HighGUI。

# java - 将应用程序状态放在哪里？

> ID：12551045
> 
> 赞同：6
> 
> 时间：2012-09-23T09:06:37.153
> 
> 标签：java, state, layer, creation, performance

在代码中我最好将对象创建（有状态对象）放在哪里，而不放在哪里？在哪几层？

例如，我曾经在 Hibernate DAO 类中放置一个对象引用，我被告知这是不正确的，因为 DAO 类不应该有状态。状态应该在“服务层”内。

有人告诉我，我不应该在诸如 UpdateCart() 之类的重复方法调用上创建新对象。创建对象的成本很高，不应随处出现在您的代码中。它应该只位于初始化类型的方法中。例如，如果电子商务应用程序需要一个购物车，请将其放入会话中。如果它需要一些通用的主对象，把它放在初始化代码中。在那里创建一次，然后让应用程序的其余部分访问它的实例。不要在每次调用时创建此实例。

我对整个设计原则感到困惑。我听到的最奇怪的事情是‘一个应用程序不应该有状态。状态应该保存在数据库所在的数据层中。真的吗？我对这些设计概念很陌生，我不知道去哪里才能获得更多的教育。戈夫？设计模式书籍？目标是创建定性代码（即在业务中使用）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:14:24.163

什么是好的做法可以根据项目的类型而有所不同。

对于大多数项目来说，创建对象对 CPU 来说并没有那么昂贵。设计成本并不总是能很好地表达出来。您的应用程序似乎有一种设计方法，其中所有状态和对象都需要以受控和集中的方式进行管理。通常这样做是为了提高可维护性和简化设计。我不会假设您应该只知道设计是什么，除非它已经非常清楚地向您说明。

我怀疑他们团队的其他成员习惯于以特定的方式工作，并且认为他们不应该记录或教你这种方法，只要告诉你什么时候“错误”。恕我直言，这不是有效的，但是当涉及到状态或数据结构的放置时，您必须处理您所遇到的情况并向他们提问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T09:54:29.247

> '一个应用程序不应该有状态。状态应保存在数据库所在的数据层中'

有些设计符合规范，被恰当地称为“无状态架构”。是否每个架构都应该是无状态的当然是值得怀疑的，而且这个术语也可能会引起争论。

大多数“无状态”应用程序实际上确实有状态，但按照上述规则（无双关语），此状态保存在一个全局位置；数据库。正如 Peter 提到的，这样做的原因可能是可维护性和简化，但也经常听说这是为了`scalability`. 没有状态出现在数据库中的任何地方，它被认为很容易添加额外的前端服务器、处理服务器，以及你拥有的东西。

虽然这确实有一些优点，但我认为我们确实必须区分临时状态和权威状态。

**临时状态**可以是您在订购过程中所处的位置以及您已经输入的详细信息。在Java EE 中，您可以将其保留在例如@ConversationScoped bean 或@Stateful bean 中。因此，这是您保留在 Web 层内部的状态。业务层。

这样做的优点是易于使用、性能和卸载您的单个中央数据库。当然，您也可以将临时状态存储在中央数据库中，但您可能希望将其远离常规的非临时数据，这意味着需要一些额外的编程复杂性。从 Web 层检索数据通常也更快，并且它从数据库中移除了一些负载。

在许多系统中，只有一个主数据库（一个接受写入的数据库），因此这个单一数据库可能会成为该设置的巨大瓶颈。

根据您的实际架构和设置，*不在*数据库中保留临时状态可能实际上会提高您的扩展能力。

缺点是您确实需要您的客户端坚持使用当前保存临时状态的单个服务器。这就是典型的“粘性会话”。如果与该客户端交互的一台服务器出现故障或需要重新启动或其他任何情况，客户端将丢失此临时数据。有一些方案，例如将状态复制到集群中的所有节点或附近的节点（伙伴复制），但这会使事情再次变得复杂，并且可能会使网络过载（如果所有节点不断地相互复制）。

**权威状态**意味着它代表了作为唯一信息来源的共享数据。这种状态是我们几乎总是喜欢在一个中心位置拥有的东西，但有时你会看到它被存储在一个 web 节点中。

例如，假设我们有一个最近价格列表，而不是将其保存到中心位置，我们将其保存在输入它的 Web 节点上。现在有一个包含此信息的“唯一”网络节点的概念，其他服务器可能会开始假设只有这个“唯一”网络节点。现在不可能添加额外的节点，因为它打破了这个假设。

# vb.net - Visual Basic/Studio 文本输入问题（禁用某些字符）

> ID：12551047
> 
> 赞同：0
> 
> 时间：2012-09-23T09:06:47.577
> 
> 标签：vb.net, visual-studio-2010

我正在创建一个包含三个文本框的表单，其中包含“小计”、“投标金额”和“更改”框。小计和更改框都被禁用，这意味着用户只能在投标框中输入数字。我正在使用从[http://www.vbdotnetheaven.com/blogs/5908/restricting-user-input-in-vb-net.aspx](http://www.vbdotnetheaven.com/blogs/5908/restricting-user-input-in-vb-net.aspx)找到的以下代码来限制输入：

```
Private Sub TextBox1_KeyPress(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox1.KeyPress
    If Not Char.IsDigit(e.KeyChar) Then
        e.Handled = True
    End If
End Sub 
```

我担心的是，特定的编码可以限制数字的输入，但它也禁用了退格键、点和删除键。我对此很陌生（我们不到两周前才开始讨论有关 VB/Studio 的事情，我以前没有使用 Keypresses 的经验，但我想尝试一下）

我尝试`if`通过排除空格键的 ASCII 值来操作语句（并添加 if 语句），但最终会收到有关不兼容类型的警告。我可以在表单运行时通过双击文本输入来替换文本，但我的应用程序很可能会使用键盘，主要是因为它是一个事务应用程序，因此确实需要退格键，更重要的是点。如何排除两者都被禁用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T01:13:26.643

[查看 MSDN 文档中Control.KeyDown](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown%28v=vs.100%29.aspx)的示例，它大约是您想要的 95%。

也就是说，请注意，还有更多工作要做。如果有人进入 124.34.22 会发生什么？您可能会考虑使用[MaskedTextBox](http://www.dotnetperls.com/maskedtextbox)，但如果这是学习 Visual Basic 的练习，那简直就是作弊 :)

# performance - CSS Mediaqueries：在某个最小到最大范围内定义字体-该字体是否加载到外部？

> ID：12551049
> 
> 赞同：4
> 
> 时间：2012-09-23T09:06:49.133
> 
> 标签：performance, css, font-face, webfonts

可能是一个奇怪的问题，在你回答之后，我可能会因为问这个而感到羞耻。

我的网站上嵌入了一种特定字体（通过`@font-face`），该字体用于仅在更宽的分辨率（桌面）上可见的部分。例如，在智能手机上，此部分不可见 ( `display:none`)。

该`@font-face`规则不是在媒体查询中定义的，而是在我的样式表的开头。

我现在想知道如果我在移动设备上查看该网站，是否可以避免加载这个嵌入的字体文件。

你知道。字体文件有一个视图 kb，我希望我的网站尽可能快。由于我的移动版本甚至不需要字体，我想知道是否

1.）字体现在甚至加载了吗？我不知道如何在我的 iPhone 上进行测试。由于使用它的部分设置为`display:none`我没有得到任何反馈。

2.) 如果已加载（我猜是这样），是否可以在with :中设置此`@font-face`声明（例如 iPhone），并且在这种情况下不会加载文件？`media-query``max-width``640px`

关于这件事有什么想法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:41:00.480

1）图像在某些浏览器`display:none`中[加载，而在其他一些浏览器中不加载](http://www.quirksmode.org/css/displayimg.html)。所以我想字体也是一样的。

2) FF 3.6 中有一个[错误](https://bugzilla.mozilla.org/show_bug.cgi?id=567573)，但他们现在可能已经修复了。据我所知，支持媒体查询和@ff 的浏览器*应该*正确呈现它。

* * *

[CSS 标准](http://www.w3.org/TR/CSS21/media.html#at-media-rule)规定 @media 中的 At-rules 在 CSS2.1 中无效，但[根据这篇文章](http://www.quora.com/CSS3/Can-font-face-fonts-be-selectively-loaded-within-media-queries)，您可以使用 @import 和 media-target 声明加载外部文件，我猜是这样的：

```
@import url("fonts.css") screen and (min-width:800px); 
```

但你知道，`@import`效果并不好。所以我只是不关心 CSS2 并假装在写 CSS3 ;​​-)

* * *

**[这家伙](http://www.peachpit.com/articles/article.aspx?p=1929616&seqNum=5)**说在媒体查询中移动@ff 是可以的。

* * *

我相信最好的解决方案是将其放在**`min-width`**媒体查询中（不要忘记使用`only`关键字，[该关键字旨在隐藏旧浏览器的媒体查询](http://www.adobe.com/devnet/dreamweaver/articles/introducing-media-queries.html)）。

使用`min-width`绝对比[渐进增强](http://www.alistapart.com/articles/understandingprogressiveenhancement/)`max-width`方法更适合，如果您的网站也是为移动设备设计的，那么它可能就是您想要使用的。

但正如其他人所说，测试是**必须做的**......并且也分享结果;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T17:59:00.937

它似乎工作。没有在旧版本的 IE 中测试它（我正在使用modernizr 等来支持旧版本的媒体查询），但它可能会起作用。

我在`@font-face`需要它的媒体查询中直接定义规则。我用所有现代浏览器对其进行了测试。如果浏览器窗口很小并且没有触发媒体查询，则没有请求。一旦我将窗口大小调整为更大（我需要字体），它就会被加载。

正是我想要的。

# php - PHP 重复 foreach 直到

> ID：12551054
> 
> 赞同：1
> 
> 时间：2012-09-23T09:08:20.490
> 
> 标签：php, foreach, repeater

我通过 foreach 循环打印 img html 元素。

图像存储在 db 中，所以如果它们是 40 foreach 将打印 40 img

现在我需要，如果它们在 db 中有 40 个并且我需要打印 100 个 img 元素，重复循环直到它们达到 100 个，是否可以这样做？

编辑：

明确地说，我从 db 中检索了 40 个 img，我需要打印“100 OF THEM”（如果它们小于 100，则重复它们）......希望很清楚：P

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T09:25:30.770

您可以使用[迭代器](http://php.net/iterator)：

```
$images = new LimitIterator(
    new InfiniteIterator(
        new ArrayIterator($imgArray)
    ), 
    0, 100
);

foreach ($images as $image) {
    // print images
} 
```

这[`ArrayIterator`](http://php.net/ArrayIterator)使您`$imgArray`可以被其他迭代器迭代。将[`InfiniteIterator`](http://php.net/InfiniteIterator)在包装结束`ArrayIterator`时从头开始重新开始`$imgArray`。最后，[`LimitIterator`](http://php.net/LimitIterator)将迭代限制为 100 个项目。

因此，当您迭代时`$images`，`foreach`将遍历图像数组中的元素，一遍又一遍地重复它们，直到打印了 100 个元素，例如这将输出图像 1-40，然后再输出 1-40，最后输出 1-20，因为 40+ 40+20=100。

演示：[http ://codepad.org/YeDgpsVc](http://codepad.org/YeDgpsVc)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T09:18:11.600

重复 100 次并在索引上使用[模运算符：](http://php.net/manual/en/language.operators.arithmetic.php)

```
$images = function_to_fetch_images();

for($i=0, $count = count($images); $i<100; $i++) {
  echo $images[$i % $count];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T09:16:17.137

我不太确定我是否理解这个问题，但我猜你想显示 100 张图像，但如果少于 100 张，则重复一些图像。如果是这样，你可以使用一个`for`循环遍历所有图像，然后当你在最后一张图像，并且还没有输出 100 张图像时，回到第一个图像。

```
for ($i = 0, $j = count($images); $i < 100; $i++)
{
    echo $images[$i % $j];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T09:16:24.477

为此，您将需要一个嵌套循环。我假设您的意思是您希望重复图像集中的元素，直到屏幕上出现 100 张图像，即使这意味着某些图像被复制。

```
for ($i = 0; $i < 100;) {
    foreach($imageSet as $image) {
        echo $image;
        $i++;
        if ($i < 100) break;
    }
} 
```

# objective-c - NavigationBar setBackgroundImage 问题

> ID：12551055
> 
> 赞同：2
> 
> 时间：2012-09-23T09:08:26.553
> 
> 标签：objective-c, uinavigationbar

我正在使用以下代码行将图像设置为导航栏：

```
UIImage *toolBarIMG = [UIImage imageNamed: @"header.png"];  

    if ([self.navigationController.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)]) { 
        [self.navigationController.navigationBar setBackgroundImage:toolBarIMG  forBarMetrics:0]; 
    } 
```

使用这个之后，酒吧看起来和我想做的一样。但是问题来了，在栏的左上角出现了一条灰色的细线（请看下图）。

![在此处输入图像描述](../Images/cbe5bcd97b3a8892a171a8d638bdf755.png)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:46:53.733

我试着做同样的事情。一切正常。请检查您的`header.png`图像。

这个例子的来源[在这里](https://dl.dropbox.com/u/135542/header.zip)。

![在此处输入图像描述](../Images/fd19448e4ed59112c79a6759a79ca791.png)

# opengl - 如何在opengl中实现z-fail算法？

> ID：12551060
> 
> 赞同：6
> 
> 时间：2012-09-23T09:09:19.927
> 
> 标签：opengl, shadow, stencil-buffer

我按照 NeHe 导师第 27 课告诉我的代码编写代码，但它是 z-pass 算法。当我在阴影中时，阴影消失了。有人告诉我，我可以使用 z-fail 算法来解决这个问题。所以我花了两天时间研究z-fail算法。最后，我想不通。我的程序从来没有像我想的那样运行。

wiki 列出的 z-fail 算法：

深度失败 大约在 2000 年，一些人发现通过反转深度可以使海德曼的方法适用于所有相机位置。与其计算物体表面前面的阴影表面，不如计算它后面的表面同样容易，最终结果相同。这解决了眼睛在阴影中的问题，因为眼睛和物体之间的阴影体积不计算在内，但引入了阴影体积后端必须加盖的条件，否则阴影最终会丢失体积指向的地方倒退到无穷大。

1.  禁用对深度和颜色缓冲区的写入。

2.  使用正面剔除。

3.  将模板操作设置为在深度失败时递增（仅计算对象后面的阴影）。

4.  渲染阴影体积。

5.  使用背面剔除。

6.  将模板操作设置为在深度失败时递减。

7.  渲染阴影体积。

我认为的主要问题是深度测试。在第3步和第6步，模板操作基于深度失败。虽然它可以显示阴影，但它可能会在它之前的物体上产生阴影（即：深度缓冲区值小于它的物体）。所以所有的阴影效果看起来很乱。

而在z-pass算法中，stencil操作是基于depth pass的，也就是说它不仅可以显示出阴影，而且只在后面的物体上产生阴影，符合眼睛系统。

那么如何解决这个问题以使我的深度失败算法在正确的物体上显示出阴影。

这是我的 z-fail 算法代码（可能在某个地方，请帮我找出来，阴影效果很糟糕）

```
VECTOR vec;        
void shadowvolume(SECTOR &sec,float *lp)
{
    unsigned int    p1, p2;
    VECTOR          v1, v2;
    int i, j, k, jj;
    for (i=0; i<sec.numplanes;i++)
    {
        if (sec.planes[i].visible)
        {
            for (j=0;j<3;j++)
            {
                k = sec.planes[i].neigh[j];
                if ((!k) || (!sec.planes[k-1].visible))//如果以第k个点开始的邻边没有相邻平面或者相邻平面不可见
                {
                    // here we have an edge, we must draw a polygon
                    p1 = sec.planes[i].p[j]-1;//邻边的起点
                    jj = (j+1)%3;           
                    p2 = sec.planes[i].p[jj]-1;//邻边的终点

                    //calculate the length of the vector
                    v1.x = (sec.points[p1].vec.x - lp[0])*100;
                    v1.y = (sec.points[p1].vec.y - lp[1])*100;
                    v1.z = (sec.points[p1].vec.z - lp[2])*100;

                    v2.x = (sec.points[p2].vec.x - lp[0])*100;
                    v2.y = (sec.points[p2].vec.y - lp[1])*100;
                    v2.z = (sec.points[p2].vec.z - lp[2])*100;

                    glBegin(GL_TRIANGLE_STRIP);//将光源连到邻边的起点并延长,将光源连到邻边的终点的并延长,最后延长出来的梯形,画了过后模板缓冲区的值加1
                    glVertex3f(sec.points[p1].vec.x,sec.points[p1].vec.y,sec.points[p1].vec.z);
                    glVertex3f(sec.points[p1].vec.x + v1.x,sec.points[p1].vec.y + v1.y,sec.points[p1].vec.z + v1.z);
                    glVertex3f(sec.points[p2].vec.x,sec.points[p2].vec.y,sec.points[p2].vec.z);
                    glVertex3f(sec.points[p2].vec.x + v2.x,sec.points[p2].vec.y + v2.y,sec.points[p2].vec.z + v2.z);
                    glEnd();
                }
            }
            // caps
            glBegin(GL_TRIANGLES);  
            for(k=0;k<3;k++)
                glVertex3fv((float*)&sec.points[sec.planes[i].p[k]-1].vec);
            glEnd();
            glBegin(GL_TRIANGLES);  

            for(k=2;k>=0;k--)
            {
                vec.x=sec.points[sec.planes[i].p[k]-1].vec.x+(sec.points[sec.planes[i].p[k]-1].vec.x-lp[0])*100;
                vec.y=sec.points[sec.planes[i].p[k]-1].vec.y+(sec.points[sec.planes[i].p[k]-1].vec.y-lp[1])*100;
                vec.z=sec.points[sec.planes[i].p[k]-1].vec.z+(sec.points[sec.planes[i].p[k]-1].vec.z-lp[2])*100;
                glVertex3fv((float*)&vec);
            }
            glEnd();

        }
    }

}
void  CastShadow(SECTOR &sec, float *lp)
{//lp是光源相对于物体的位置
    float           side;

    glEnable(GL_CULL_FACE); 
    int i;
    for (i=0;i<sec.numplanes;i++)
    {
        side =sec.planes[i].planeeq.a*lp[0]+sec.planes[i].planeeq.b*lp[1]+sec.planes[i].planeeq.c*lp[2]+sec.planes[i].planeeq.d*lp[3];
        if (side>0) 
            sec.planes[i].visible = TRUE;
        else
            sec.planes[i].visible = FALSE;
    }

    glDisable(GL_LIGHTING);
    glDepthMask(GL_FALSE);
    glDepthFunc(GL_LEQUAL);
    glEnable(GL_STENCIL_TEST);
    glColorMask(0, 0, 0, 0);
    glStencilFunc(GL_ALWAYS, 0, 0xffffffff);

    glCullFace(GL_FRONT);
    glStencilOp(GL_KEEP, GL_INCR, GL_KEEP);
    //glStencilOp(GL_KEEP, GL_KEEP, GL_DECR);
    shadowvolume(sec,lp);

    glCullFace(GL_BACK);
    glStencilOp(GL_KEEP, GL_DECR, GL_KEEP);
    //glStencilOp(GL_KEEP,GL_KEEP,  GL_INCR);
    shadowvolume(sec,lp);

    glColorMask(1, 1, 1, 1);

    //draw a shadowing rectangle covering the entire screen
    glColor4f(0.0f, 0.0f, 0.0f,0.4f);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glStencilFunc(GL_NOTEQUAL, 0, 0xffffffff);
    //glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);
    glStencilOp(GL_REPLACE, GL_REPLACE, GL_REPLACE);
    glPushMatrix();
    glLoadIdentity();
    glBegin(GL_TRIANGLE_STRIP);
        glVertex3f(-0.1f, 0.1f,-0.0010f);
        glVertex3f(-0.1f,-0.1f,-0.0010f);
        glVertex3f( 0.1f, 0.1f,-0.0010f);
        glVertex3f( 0.1f,-0.1f,-0.0010f);
    glEnd();
    glPopMatrix();
    glDisable(GL_BLEND);

    glDepthFunc(GL_LEQUAL);
    glDepthMask(GL_TRUE);
    glEnable(GL_LIGHTING);
    glDisable(GL_STENCIL_TEST);
    glShadeModel(GL_SMOOTH);
    glDisable(GL_CULL_FACE);
} 
```

VECTOR 类是这样的：

```
class VECTOR
{
public:
    float x,y,z;
    bool operator==(VECTOR vec)
    {
        if(x==vec.x && y==vec.y && z==vec.z)
            return true;
        return false;
    }
}; 
```

SECTOR 类和其他类是这样的：

```
class PLANEEQ
{
public:
    float a,b,c,d;
};
class PLANE
{
public:
    unsigned int p[3];//点的序号
    VECTOR normal[3];
    unsigned int neigh[3];//平面3个相依平面的序号
    PLANEEQ planeeq;
    bool visible;
    PLANE()
    {
        neigh[0]=0;
        neigh[1]=0;
        neigh[2]=0;
        planeeq.a=0;
        planeeq.b=0;
        planeeq.c=0;
        planeeq.d=0;
        visible=false;
    }
};

class SECTOR
{
public:
    int numpoints;
    int numplanes;
    vector<VERTEX> points;
    vector<PLANE> planes;
    MATERIAL material;
    bool read();
    bool loadtexture();
    bool build();
    bool plane_calc();
    void SetConnectivity();
    SECTOR& SECTOR::subdivide(long depth);
    SECTOR(string str1,string str2):modelfilename(str1),texturefilename(str2)
    {
        numpoints=0;
        numplanes=0;

    }
    SECTOR()
    {
        numpoints=0;
        numplanes=0;

    }

private:
    FILE *modelfilein,*texturefilein;
    string modelfilename,texturefilename;
    char oneline[255];
    UINT texturename;
    AUX_RGBImageRec *TextureImage;
};
class POSITION
{
public:
    float x,y,z,w;
}; 
```

我的 main.cpp 中的 DrawGLScene 函数是这样的：

```
int DrawGLScene(GLvoid)                                 
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT |GL_STENCIL_BUFFER_BIT);  
    glLoadIdentity();
    DrawGLRoom();
    glLoadIdentity();
    GLfloat xtrans = -xpos;
    GLfloat ztrans = -zpos;
    GLfloat ytrans = -ypos-1.2f;
    GLfloat sceneroty = 360.0f - yrot;  

    glRotatef(lookupdown,1.0f,0,0);
    glRotatef(sceneroty,0,1.0f,0);
    glTranslatef(xtrans, ytrans, ztrans);
    brick_sec.build();
    floor_sec.build();
    //wall_sec.build();

    //CastShadow(wall_sec,(float *)&lightgroup.lights[0].pos);
    CastShadow(brick_sec,(float*)&lightgroup.lights[0].pos);
    CastShadow(floor_sec,(float*)&lightgroup.lights[0].pos);    

    lightgroup.build(); 
    glColor4f(0.7f, 0.4f, 0.0f, 1.0f);  
    glDisable(GL_LIGHTING);                             
    glDepthMask(GL_FALSE);                              
    glTranslatef(lightgroup.lights[0].pos.x, lightgroup.lights[0].pos.y, lightgroup.lights[0].pos.z);               
    gluSphere(q, 0.2f, 16, 8);  
    glEnable(GL_LIGHTING);  
    glDepthMask(GL_TRUE);
    if(space_time>0)
    {
        ypos=sin(space_time*3.1415926/180);
        space_time-=4;
    }
    else
    {
        sp=false;
    }
    //glFlush();
    return TRUE;                                        // Everything Went OK
} 
```

由于我的声望低于 10，所以我无法捕捉阴影效果来向您展示它看起来有多糟糕！请帮助我，我会感谢你的关注和时间！！！

感谢 Najzero 给了我 5 声望，现在我可以截屏显示效果。我将在后面附加详细说明。

z-pass算法效果：当我不在效果中时，没关系！（橙色的锅代表光） ![在此处输入图像描述](../Images/960986f0449c43cc44e533807c1433cf.png)

但是当我在 wall_shadow 中时，就不行了！wall_shadow 不见了，虽然brick_shadow 还在那里。

![在此处输入图像描述](../Images/d153d7dabd6a18abef27f973b8fe64ff.png)

所以我需要z-fail算法来解决这个问题。但是我的代码实现的最后一个效果是这样 ![在此处输入图像描述](../Images/65ade7da9ac27755d97475ac8936f9bd.png) 的：勾号代表阴影效果是正确的，叉号代表阴影不应该出现在物体上。

另一个截图， ![在此处输入图像描述](../Images/320d445f6c2d9cccaf48c6c7370d7445.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T13:51:25.073

哈哈，终于，我在我的代码中找到了问题。我很高兴，大声笑！！！！！！！！！

问题是 gluPerspective(45.0f,(GLfloat)width/(GLfloat)height,0.001f,100.0f);

正如 GuentherKrass 在[http://www.opengl.org/discussion_boards/showthread.php/146157-Z-Fail-Stencil-Shadow-Volumes中所说](http://www.opengl.org/discussion_boards/showthread.php/146157-Z-Fail-Stencil-Shadow-Volumes)

如果这样做，请务必使用具有无限远平面的透视投影矩阵或使用 GL_DEPTH_CLAMP 以避免后盖被远裁剪平面剔除。

所以我只是将上面的代码更改为

gluPerspective(45.0f,(GLfloat)width/(GLfloat)height,0.001f,1000000.0f);

好吧，看起来很完美！！！！！！！！！！！！！！！！！！！！！！111 哈哈哈哈

两天，熬夜，泡面..这该死的太值了！！

好的，我会把最后一张效果图放出来。如果有人想要我的代码，请给我发电子邮件（nomorefancy@gmail.com）

![在此处输入图像描述](../Images/a1002ee9c50c771fb0c502a8c538eb5d.png) ![在此处输入图像描述](../Images/a47d56e5c26b285f28472b080c54eefd.png) ![在此处输入图像描述](../Images/b0422aa3ca8c0db04477098b4524f2d3.png) ![在此处输入图像描述](../Images/d9f218a8b2f69dc96c388e33f4913429.png)

注意：砖影独立于墙影。

# ios - 如何在 iOS6 中为闹钟应用播放音乐？

> ID：12551061
> 
> 赞同：-1
> 
> 时间：2012-09-23T09:09:27.970
> 
> 标签：ios, ios6

如何在 ios6 的音乐库中播放我的闹钟应用程序中的音乐？

是否有新的 API 或新功能 UILocalNotification ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:28:44.297

它只是标准时钟应用程序中的新功能，API (MediaPlayer) 已经存在了一段时间。

以下是一些链接：
[Apple 的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/Audio/Conceptual/iPodLibraryAccess_Guide/Introduction/Introduction.html)
[TutsPlus 上的教程](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-music-library-access/)

# javascript - 使用 Jquery 发送和接收数据

> ID：12551066
> 
> 赞同：-1
> 
> 时间：2012-09-23T09:10:03.233
> 
> 标签：javascript, ajax, json

我处于应用程序开发的基本水平。

我想知道如何使用任何新版本的 JQuery 发送和获取这些数据。

我也希望它支持所有浏览器。

我只是在使用简单的 Ajax，但我知道使用 Jquery 是可能的，但我无法弄清楚。

```
function SendData() {
    var data = "action=check&uid=" + uid + "&fbuid=" + fb_uid + ";
    var url = "http://www.example.com/call.php";
    var ajax = new AJAXInteraction(url, CheckRate);
    ajax.doPost(data);
};

function CheckRate(Content) {
    response = JSON.parse(Content);
    Rate = response.stat.rate;
    document['getElementById']('ERate')['value'] = Rate;
};

function AJAXInteraction(url, callback) {
    var req = init();
    req.onreadystatechange = processRequest;
    function init() {
        if (window.XMLHttpRequest) {
            return new XMLHttpRequest();
        }
        else if (window.ActiveXObject) {
            return new ActiveXObject("Microsoft.XMLHTTP");
        }
    }
    function processRequest() {
        if (req.readyState == 4) {
            if (req.status == 200) {
                if (callback) callback(req.responseText);
            }
        }
    }
    this.doGet = function () {
        req.open("GET", url, true);
        req.send(null);
    }
    this.doPost = function (str) {
        req.open("POST", url, true);
        req.setRequestHeader("Content-Type", "application/x-www-form-urlencoded; charset=UTF-8");
        req.send(str);
    }
}; 
```

我能够解决第一部分但仍然不知道休息：

```
function SendData(){
    dataString = "action=check&uid=" + uid + "&fbuid=" + fb_uid + ";
    url = "http://www.example.com/call.php";
    jQuery.ajax({
        type: "POST",
        url: url,
        data: dataString,
    });
}; 
```

我的问题是我将如何阅读回复

```
function CheckRate(Content) {
    response = JSON.parse(Content);
    Rate = response.stat.rate;
    document['getElementById']('ERate')['value'] = Rate;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:41:57.750

```
function SendData() {
    dataString = "action=check&uid=" + uid + "&fbuid=" + fb_uid + ";
    url = "http://www.example.com/call.php";
    jQuery.ajax({
        type: "POST",
        url: url,
        data: dataString, // sending data
        success: function (data) {
            CheckRate(data); // receiving data
        }
    });
};

// function body should looks like this
function CheckRate(Content) {
    response = JSON.parse(Content);
    Rate = response.stat.rate;
    document['getElementById']('ERate')['value'] = Rate;
}; 
```

# spring - 春季我们可能需要@Configurable 的场景？

> ID：12551067
> 
> 赞同：1
> 
> 时间：2012-09-23T09:10:25.870
> 
> 标签：spring

我对使用`@configurable`. 我浏览了[解释](http://aredko.blogspot.in/2011/02/using-configurable-in-spring-framework.html)如何使用`@configurable`. 但是我想到的问题是，当我们需要使用`@configurable`. 我可以想到两种可能有用的场景

1.  在遗留项目中，当我们已经使用新操作符制作任何 bean 并且我们希望使其成为弹簧管理时。

2.  在一个新项目中，我们希望强制即使开发人员使用 new 操作符制作 bean，它仍然是 spring 管理的。

否则对于新的 bean，我们总是可以在 applicationContext.xml 中声明它们，我认为不需要声明它们`@configurable`。

请让我知道上述理解是否正确或我是否遗漏了什么。

**更新：-**基本上根据我的理解，可配置通常用于在使用 new 运算符创建对象时注入依赖项。但是，当我使用 spring 时，为什么要使用 new 运算符创建对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:02:59.647

`@Configurable`注释用于在[`domain-driven`](http://en.wikipedia.org/wiki/Domain-driven_design)应用程序中注入依赖项。这意味着，在此类应用程序中，域对象相互交互以执行特定操作。

举个例子：

在发票应用程序中，`Invoice`该类提供了一个构造函数来创建它，然后它具有验证方法，最后持久化它。现在，要保留发票，您需要`DAO`发票中可用的实现。这是您希望注入或定位的依赖项。使用 Spring 的`@Configurable`，每当使用运算符创建发票时`new`，都会注入适当的 DAO 实现，并可用于所有持久化操作。

我有一个更实时的场景，我使用了[此处](http://vikdor.blogspot.in/2012/08/using-configurable-to-inject-resources.html)`@Configurable`描述的注释。

# c# - 选择标签页时可见的按钮c#

> ID：12551069
> 
> 赞同：-2
> 
> 时间：2012-09-23T09:11:04.640
> 
> 标签：c#, .net

我有一个包含三个按钮的表单和一个包含三个标签页的 tabcontrol。

按钮放置在选项卡控件之外。我希望`button1`在选择 tabpage1 时可见，在选择`button2`tabpage2 时可见，并且在选择 tabpage3 时`button3`可见。

我目前拥有的代码如下：

```
button1.Visible = false;
button2.Visible = false;
button3.Visible = false;

if (tabControl1.SelectedTab == tabPage1)
 { button1.Visible = true; } 

else if (tabControl1.SelectedTab == tabPage2)
 { button2.Visible = true; }

else if (tabControl1.SelectedTab == tabPage3) 
 { button3.Visible = true; } 
```

此代码不起作用。

我尝试过的代码`.Enabled`也不起作用。我正在使用visual studio 2010，我拖放一个带有三个标签页的tabcontrol，三个按钮也属于`OUTSIDE`tabcontrol。这也行不通。

```
private void Form1_Load(object sender, EventArgs e){
    button1.Enabled = false;
    button2.Enabled = false;
    button3.Enabled = false;

    if (tabControl1.SelectedTab == tabPage1){
        button1.Enabled = true;
        button2.Enabled = false;
        button3.Enabled = false;
    } else if (tabControl1.SelectedTab == tabPage2){
        button1.Enabled = false;
        button2.Enabled = true;
        button3.Enabled = false;
    } else if (tabControl1.SelectedTab == tabPage3){
        button1.Enabled = false;
        button2.Enabled = false;
        button3.Enabled = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:22:11.367

```
button1.Visible = tabControl1.SelectedTab == tabPage1;
button2.Visible = tabControl1.SelectedTab == tabPage2;
button3.Visible = tabControl1.SelectedTab == tabPage3; 
```

# iphone - 显示 NSLog 中选中的 tableview 行

> ID：12551070
> 
> 赞同：3
> 
> 时间：2012-09-23T09:11:23.290
> 
> 标签：iphone, sdk, tableview, nslog

如何在 NSLog 中显示从我的 tableview 中选择的单元格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T09:18:02.307

实现**didSelectRowAtIndexPath** UITableview 委托并记录**indexPath.row**。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSLog(@"selected tableview row is %d",indexPath.row);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T14:50:37.170

如果要显示单元格中显示的内容，例如在其 textLabel 上，请在 didSelectRowAtIndexPath 中使用：

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
NSLog(@"selected cell textLabel = %@",cell.textLabel.text); 
```

# github - github 为 master 和 gh-pages 创建相同的标签

> ID：12551073
> 
> 赞同：1
> 
> 时间：2012-09-23T09:11:35.390
> 
> 标签：github, branch, tagging

我在 Github 上创建了一个存储库，并且在某个时候我在 master 上创建了一个标签。现在对于分支 gh-pages，我想创建一个也具有相同名称的标签。但那是不可能的。我可以看到这个标签只适用于master，那为什么我不能在不同的分支上应用相同的标签名称呢？

欢呼卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:56:43.367

您不能多次应用“相同标签”，因为一个标签可以引用一个且只有一个提交。
（请参阅“[在 git 中标记多个分支？](https://stackoverflow.com/questions/972866/tag-multiple-branches-in-git) ”了解更多信息）

如果您`git checkout -b gh-pages` 来自`master`，那么您将`master`处于新分支和新分支所引用的提交上`gh-pages`。
在这种情况下，*一个*标签对两个分支都有效。

但是，一旦您开始在新分支中创建新提交，您将仅将一个唯一命名的标签应用于该新分支中的提交。

但是请记住，标签未链接到分支（如果您要将该分支重新设置在 之上`master`，然后合并`master`...您将再次以`HEAD`两个分支引用的一个结束：所有标签都是又是两个分支的一部分）。
标记仅链接到提交。

* * *

2016 年 8 月更新：**[更简单的 GitHub 页面发布](https://github.com/blog/2228-simpler-github-pages-publishing)**现在允许将页面文件保存在*同一*分支的子文件夹中（不再`gh-pages`需要）：

[![现在您可以在存储库设置中选择一个源，GitHub Pages 将在那里查找您的内容。](../Images/4bfeda5a03d4b7f8c4891f088585c936.png)](https://i.stack.imgur.com/rZkbu.png)

所以在这里，您可以标记`master`，同时引用这两个内容。

# php - 将 [diggin] 替换为 HTML 代码或 PHP 代码

> ID：12551081
> 
> 赞同：0
> 
> 时间：2012-09-23T09:12:56.177
> 
> 标签：php, preg-replace, preg-match, preg-match-all

我有这个字符串

```
$s = 'Yo be [diggin = array("fruit"=> "apple")] scriptzors!'; 
```

然后被检查

```
$matches = null;
preg_match_all('/\[(.*?)\]/', $s, $matches);
var_dump($matches[1]); 
```

但我想要它做的是以下，它应该返回以下

```
print "yo be";
$this->diggin(SEND ARRAY HERE);
print "scriptzors!"; 
```

编辑以显示以下答案的问题

```
$s = 'Yo be [diggin = array("fruit"=>"apple")] scriptzors!';
$matches = null; 
preg_match_all('/\[(.*?)\]/', $s, $matches);

$var = explode(' = ', $matches[1]);
print $var[0]; //THIS DOES NOT PRINT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:41:17.673

你有点接近。您可以[`explode`](http://php.net/manual/en/function.explode.php)在字符串`=`周围包含空格，但`=`. 然后第一个元素将是函数名称，在这种情况下`diggin`，第二个元素将是数组，但作为字符串。您需要[`eval`](http://php.net/manual/en/function.eval.php)那个，以便它成为正确的数组数据类型。

```
$var = explode(' = ', $matches[1][0]);
call_user_func_array(array($this, $var[0]), eval($var[1] . ';'));
// or do 
$this->{var[0]}(eval($val[1] . ';')); 
```

作为替代方案，您还可以修改正则表达式，这样您就不必调用`explode`.

```
preg_match_all('/\[([a-z0-9_]*)\s*?=\s*(.*)\]/i', $s, $matches); 
```

无论哪种方式，您都需要确保清理用户输入，因为`eval`可能是[**ev**](https://stackoverflow.com/questions/3499672/when-if-ever-is-eval-not-evil) [**il**](https://stackoverflow.com/questions/951373/when-is-eval-evil-in-php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:08:10.493

这将在不使用 eval 并将自己暴露于代码注入的情况下调用该函数。

```
preg_match_all('/\[([a-z0-9_]*)\s*?=\s*array\((.*)*\)\]/i', $s, $matches);
$var = explode(',', $matches[2][0]);
$result = array();
foreach ($var as $value) {
    $keyvaluepair = explode('=>', $value);
    $result[$keyvaluepair[0]] = $keyvaluepair[1];
}
$this->{var[0]}($result); 
```

# css - Internet Explorer，突出显示文本时会更改字体和/或大小

> ID：12551083
> 
> 赞同：1
> 
> 时间：2012-09-23T09:13:32.527
> 
> 标签：css, internet-explorer, internet-explorer-8, fonts

在我当前正在开发的网页上使用 IE 8 突出显示文本时，字体会发生变化和/或有时会发生大小变化。当我将鼠标悬停在菜单上时，有时也会发生同样的事情。

这就是我的css的样子，我不知道为什么会发生错误？另一件非常奇怪的事情是，我在我的 osx 上安装了带有并行功能的 Windows 7，但错误并没有发生在那里，而只发生在 PC 计算机上。我尝试过更改字体，但没有任何帮助...

这是我的CSS：

```
body {
    font-family: verdana, sans-serif;
    font-size: 14px;
}

#wrapper, .wrapper {
    width: 900px;
    padding: 0 30px;
    margin-left: auto;
    margin-right: auto;
}

#header {
    background: url('http://localhost:8888/wp-content/uploads/2012/09/120920_scam_banner.jpg') no-repeat;
    height: 150px;
    margin: 20px 0;
}

#header div {
    width: 900px;
    height: 150px;
    margin-left: auto;
    margin-right: auto;
    position: relative;
    background: none;
}

#header div a {
    text-indent: -9999px;
    position: absolute;
    width: 900px;
    height: 150px;
}

#header div a:hover {
    background: none;
}

#section {

}

#menu {
    float: left;
    width: 175px;
    padding: 20px 25px 0 0;
    border-right: 2px solid #000;
    text-align: right;
}

#menu a, a {
    color: #000;
    text-decoration: none;
}

.mp-formdiv {
    float: right;
}

img {
    border: 1px solid #000;
}

#menu a:hover, a:hover {
    color: #fff;
    background: #000;
}

.menu li {
    margin: 3px 0;
    text-align: right;
}

#menu h3 {
    line-height: 52px;
}

#menu .artists {
    padding-left: 10px;
}

#menu-artists li {

}

#content {
    float: right; 
    width: 670px;
    padding: 20px 0 50px 20px;
}

#footer {
    overflow:hidden;
    clear: both;
}

#white_footer {
    float: left;
    width: 300px;
    background: #fff;
    height: 20px;
}

#footer_content {
    height: 20px;
}

.store {
    overflow-y: scroll;
}

#the_store {
    margin-top: 10px;
}

/* FONTS */

h1 {
    font-size: 3em;
    margin-bottom: 40px;
    white-space: nowrap;
    line-height: 0%;
}

h1.storefront {
    font-size: 2em;
}

h2 {
    font-size: 2em;
}

h3 {
    font-size: 1.5em;
}

#content p strong {
    font-weight: bold;
}

#content p img {
    float: left;
    margin: 5px 20px 20px 0;
}

#content p img:after {
    margin-top: 20px;
}

#subscribe_mail input[type=text]{
    width: 85px;
    height: 12px;
    font-size: 0.60em;
    margin-bottom: 5px;
    float: left;
    margin-right: 4px;
}

#subscribe_mail input[type=text]:focus {
    font-size: 0.75em;
}

#subscribe_mail input[type=submit] {
    border: 1px solid #999;
    font-size: 0.75em;
    float: left;
}

.mp-message, .mp-loading {
    font-size: 0.75em;
}

.MailPressFormName {
    display: none;
}

#artist_info {
    display: none;
    margin-top: 40px;
    overflow: hidden;
    clear: both;
}

.more-less {
    background: #000;
    float: left;
    color: #fff;
    padding: 0 2px;
    margin-top: 10px;
}

#artist_less {
    display: none;
}

.gallery-icon a:hover {
    background: none;
}

.gallery dl {
    margin-top: 0 !important;
    margin-bottom: 15px;
}

.gallery dl dd {
    font-size: 0.75em;
}

.newsletterH {
    margin-bottom: 5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:27:29.063

我会使用 Firefox 的 Firebug 插件来查看样式的来源。IE 提供了一个不太友好的开发人员工具窗口，它执行类似的操作（我仅在样式问题仅在 IE 中出现时才使用它）。我会首先检查您的 :hover 和 :focus 规则，因为它们会导致在悬停或选择时发生事情。

# c# - MonoTouch WCF 服务 Reference.cs 错误

> ID：12551090
> 
> 赞同：2
> 
> 时间：2012-09-23T09:14:28.893
> 
> 标签：c#, wcf, xamarin.ios

我有一个非常简单的 WCF 服务，它有一个方法 GetDateTime()，我将它托管在 Windows 7 的 IIS 中，在 Windows 环境中似乎一切正常，我可以使用测试客户端应用程序执行。

在我使用 MonoTouch 的 Mac 上，我添加了对服务的 Web 引用，它会找到服务并生成大量文件。

当我编译 Mono 项目时，生成的 Reference.cs 文件中有一个错误。

接口中的 GetDateTime 方法已声明为返回类型 GetDateTimeResponse 而不是 System.DateTime。

知道出了什么问题，这是一个错误还是我错过了什么？

```
[System.ServiceModel.ServiceContractAttribute(Namespace="LastPrice.win7pro")]
public interface ITest {

    [System.ServiceModel.XmlSerializerFormatAttribute()]
    [System.ServiceModel.OperationContractAttribute(Action="http://win7pro/ITest/GetDateTime", ReplyAction="http://win7pro/ITest/GetDateTimeResponse")]
    GetDateTimeResponse GetDateTime(GetDateTime GetDateTime);

    [System.ServiceModel.XmlSerializerFormatAttribute()]
    [System.ServiceModel.OperationContractAttribute(Action="http://win7pro/ITest/GetDateTime", ReplyAction="http://win7pro/ITest/GetDateTimeResponse", AsyncPattern=true)]
    System.IAsyncResult BeginGetDateTime(GetDateTime GetDateTime, System.AsyncCallback asyncCallback, object userState);

    GetDateTimeResponse EndGetDateTime(System.IAsyncResult result);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:34:32.087

这是 Mono 的 WSDL 生成中的一个错误。

我为此创建了一个简单的[测试用例](https://github.com/baulig/Provcon-Faust/tree/master/TestWCF)，使用 Visual Studio 2012 Web Express，它在从 Windows 机器复制 Reference.cs 文件时工作正常。

这现在在[mono/master commit aa2e9ec](https://github.com/mono/mono/commit/aa2e9eca4054e3756220c6c842894102d3e3e87b)中得到修复。

该错误影响所有具有复杂返回类型的无参数服务方法。

作为临时解决方法，`SlSvcUtil.exe`请在 Windows 上使用来创建客户端代理或向您的服务方法添加一个虚拟参数。

# mysql - 在 mysql 数据库中使用电子邮件作为 id 是一种好习惯吗？

> ID：12551093
> 
> 赞同：5
> 
> 时间：2012-09-23T09:15:20.387
> 
> 标签：mysql, dbexpress

我已经阅读了关于 mysql 数据库的简单性和良好实践的问题和答案。

我有一个带有“客户”表的 mysql 数据库。添加的每个客户都有一个电子邮件，这对于电子邮件来说是唯一的。使用 C++ Builder 添加由 id 字段自动递增引起的记录时会出现问题 - 强制在期间手动递增 id使用 DBEXPRESS 添加新行。

为什么不跳过自动递增的 id ？有一个没有（自动递增的）id 的表并将电子邮件作为唯一键是否是一种好习惯？这将解决 DBEXPRESS 问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T09:27:02.240

否：不要使用电子邮件作为主键。有几个原因：

*   您将永远无法存储没有电子邮件地址的人，您可能出于各种原因想要这样做
*   它使键非常“宽”，因此外键也很宽，从而导致大量磁盘空间浪费和查询速度变慢，因为每个 I/O 页面的索引条目较少
*   人们可能会更改他们的电子邮件地址 - 如果它是主键，您将如何处理？
*   您的查询维护起来会不太直观，因为大多数数据库编码人员都希望有一个名为`id`. 符合行业标准是一种良好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T09:25:33.527

从概念上讲，是的，不生成人工唯一键（或至少限制这些实例）是个好主意。并`e-mail`服务于自然独特的关键目的。

**但是**，我会担心的一件事是性能。在进行查询时，将整数作为 id 非常方便，并且在这些字符串中搜索比长字符串要快得多……如果您只是使用电子邮件地址从数据库中检索用户，这并不重要。但是，如果您有具有多个连接的复杂查询，这很重要。

此外，如果您将有关客户的信息存储在多个表中，则另一个表的外键将是电子邮件地址。这意味着您要多次存储电子邮件地址，如果客户决定在某天更改他的电子邮件，这将使保持所有内容更新变得更加困难。

# html - 为什么文本溢出跨越 twitter boostrap？

> ID：12551094
> 
> 赞同：0
> 
> 时间：2012-09-23T09:15:40.760
> 
> 标签：html, css, twitter-bootstrap

[http://www.responsinator.com/?url=http%3A%2F%2Ftoplessproductions.com%2Fyuv%2Fproblem%2Ftextoverflow.html](http://www.responsinator.com/?url=http%3A%2F%2Ftoplessproductions.com%2Fyuv%2Fproblem%2Ftextoverflow.html)

请注意，“Crappy Android Portrait 240 x 320”会使卡片的文字溢出。有没有一个规范的解决方案？我可以决定`min-width`为`body`, 但这只会掩盖地毯下面的问题。

![在此处输入图像描述](../Images/a34a37c44a31c177f500324cbefc14ce.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:48:54.940

您需要设置 CSS 媒体查询以在较小的浏览器上缩小为文本

```
@media (max-width: 480px) {
  h2 {
    font-size: 10px !important;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
} 
```

类似的东西适用于手机和h2s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T10:33:12.277

您可以使用`word-wrap: break-word`来确保文本不会溢出：

```
@media (max-width: 480px) {
    h2 {
        word-wrap: line-break;
    }
} 
```

我还注意到，由于布局错误，您正在失去一些宽度。您忘记了该`row`元素，并且正在使用该类覆盖`span4`定位属性。`.main_link`背景颜色、额外的填充、边距等不应与`span#`. 本机`well`元素适合您正在寻找的行为。

因此，要恢复完整的媒体宽度并修复您的布局，您可以使用如下标记：

```
<div class="container">
    <div class="row">
        <div class="span4">
            <div class="well main_link">
                ...
            </div>
        </div>
    </div>
    ...
</div> 
```

# javascript - 我应该为 SPA 使用资源加载器，还是预先加载所有内容？

> ID：12551095
> 
> 赞同：1
> 
> 时间：2012-09-23T09:15:42.533
> 
> 标签：javascript, backbone.js, single-page-application

我最近开始接触 Backbone.js，到目前为止我很享受它。所有示例都倾向于简单的待办事项列表，因此为更大/更健壮的单页应用程序推断代码组织和文件结构有点困难。

我来到了一个十字路口：

*   我应该使用[Yepnope.js 之](http://yepnopejs.com)类的东西来加载我需要的模型和视图，或者，
*   合并并缩小为更少的文件并预先加载所有文件。
*   两者的某种组合？

任何意见，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:44:17.737

这取决于您的应用程序的大小。如果您有一堆不同的视图，那么绝对值得从加​​载器开始，您可以在其中以最少的功能集启动应用程序并在需要时加载其他视图。我不能告诉任何关于 yepnope 的信息，但似乎重点更多是关于 polyfill，然后是用模块构建你的应用程序。我们在我们的应用程序中使用了 requirejs，它运行得非常好。您必须为 AMD 模块编写一堆样板代码，但这真的很值得。

# java - 使用 imageio 编写 jpeg2000 的问题

> ID：12551096
> 
> 赞同：2
> 
> 时间：2012-09-23T09:15:46.777
> 
> 标签：java, dicom, javax.imageio, jpeg2000

我正在尝试使用 imageio 在 jpeg2000 中转换 DICOM 图像，如下面的代码所示，oracle 文档中解释了相同的过程，但不起作用！我不明白我做错了什么。Java 高级图像 I/O 库安装到 JRE 中。

使用：可以验证支持DICOM和JPEG2000 `ImageIO.getReaderFormatNames()`！`ImageIO.getWriterFormatNames()`

没有抛出错误，但是写入文件花费的时间太长，并且输出文件已损坏。
先感谢您...

```
 public void convert2JPEG(File sourceFileName) throws IOException{

    Iterator<ImageReader> iter = ImageIO.getImageReadersByFormatName("DICOM");
    ImageReader reader = iter.next();

    if(reader == null) {
        log.error("Could not locate any Readers for the DICOM format image.");
        return;
    }

    File sourceFile = new File (sourceFileName);
    ImageInputStream iis = ImageIO.createImageInputStream(sourceFile);
    BufferedImage bi;
    try{
    bi = ImageIO.read(iis);
        File outputFile = new File("outputFileName");
    String format = "jpeg 2000";
    ImageIO.write(bi, format, outputFile);
    } catch(Exception e){
        log.info("ERROR: " + e);
    }finally {
        iis.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:15:00.240

据我所知，JAI Image IO 不支持 DICOM，但支持 JPEG2000。请注意，没有 Windows 64 位版本的 JAI（这对您来说也可能是个问题）。我很惊讶它没有给出任何错误。

但是，我同意 Anders 的观​​点，即转换 DICOM 的最佳方法是使用工具包。我建议 DCM4CHE2 ( [http://www.dcm4che.org/confluence/display/d2/dcm4che2+DICOM+Toolkit](http://www.dcm4che.org/confluence/display/d2/dcm4che2+DICOM+Toolkit) )。他们有许多命令行工具可以完全按照您的建议进行操作，还有用于读取和写入 DICOM 的 Dicom[Input/Output]Stream 类。

# java - Android url获取文件失败

> ID：12551102
> 
> 赞同：0
> 
> 时间：2012-09-23T09:16:52.677
> 
> 标签：java, android, url

我有一个网址：

```
http://www.mubie.com/sites/default/files/imageifarm/紫薇.jpg 
```

现在，如果我尝试获取文件：

```
String url = "http://www.mubie.com/sites/default/files/imageifarm/紫薇.jpg"; //url is a string
Bitmap bitmap = BitmapFactory.decodeStream((InputStream) new URL(url).getContent()); 
```

它抛出以下异常：

```
09-23 17:10:57.812: W/System.err(2059): java.io.FileNotFoundException: http://www.mubie.com/sites/default/files/imageifarm/紫薇.jpg
09-23 17:10:57.812: W/System.err(2059):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)
09-23 17:10:57.812: W/System.err(2059):     at java.net.URLConnection$DefaultContentHandler.getContent(URLConnection.java:1042)
09-23 17:10:57.812: W/System.err(2059):     at java.net.URLConnection.getContent(URLConnection.java:203)
09-23 17:10:57.812: W/System.err(2059):     at java.net.URL.getContent(URL.java:447)
09-23 17:10:57.822: W/System.err(2059):     at com.sora.insync.demo.ViewQuestion.loadImageFromNetwork(ViewQuestion.java:273) 
```

我该如何解决这个问题？把汉字转成unicode？

**url（和文件）完全有效**

我试过的

```
Bitmap bitmap = BitmapFactory.decodeStream((InputStream) new URL(URLEncoder.encode(url,
                "UTF8")).getContent()); 
```

但它会将网址变成如下内容：

```
http%3A%2F%2Fwww.mubie.com%2Fsites%2Fdefault%2Ffiles%2Fimageifarm%2F%E7%B4%AB%E8%96%87.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:26:03.243

如您所见，您的代码在中文字符上失败了。您应该调用`toASCIIString()`您的 URL 字符串：

```
InputStream stream = (InputStream) new URL(url).toASCIIString().getContent();
Bitmap bitmap = BitmapFactory.decodeStream(stream); 
```

# ios - 代码签名存在于项目构建设置中，但不存在于目标 Xcode

> ID：12551105
> 
> 赞同：0
> 
> 时间：2012-09-23T09:17:07.317
> 
> 标签：ios, xcode

好吧，我正在尝试在 IOS 中上传我的第一个应用程序。

我已经正确地完成了这些步骤。

1 - 我确认我的新应用程序处于“等待上传”状态。

2 - 我已下载并双击 WWDR 中间证书。验证这存在于我的钥匙链中。

3 - 我确认我的分发证书没有过期。它的有效期是从今天起一年。其状态为“已发行”

4 - 我创建了应用程序 ID。我验证了应用程序名称空间部分与我的应用程序名称空间完全相同。这个应用程序的状态是： - 推送通知：可配置（黄色） - 应用内购买：启用（绿色）（我想关闭它，但没有办法） - 游戏中心：启用（绿色）（我想要关闭它，但现在有办法） - iCloud：可配置（黄色）

5 - 我已验证我的分发条款对于正确的应用程序 ID 是“有效的”。

6 - 我已经下载并安装并安装了它们所属的所有 3 个：a - WWDR 中间证书 b - 分发证书 c - 分发配置文件

我在 ios 配置门户中声明了我的应用程序 ID，`com.mycompany.app`但它在它前面添加了一个数字。所以在证书中我确实看到了这样的内容：`QWER1234.com.mycompany.app`

现在在 Xcode 4.5 中，我正在为项目的构建设置中搜索代码签名，并且确实将其设置在我的证书中。

**但是对于目标，如果我在构建设置中搜索代码签名，我什么也找不到。并不是说我没有分配正确的证书，我只是找不到任何东西。**

您可以在下图中看到它： ![在此处输入图像描述](../Images/668e74891502b31b5d51948b5aa3b8df.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T09:54:04.877

查看构建设置时，您是否尝试过从“基本”切换到“全部”？我认为当设置为“基本”时，您将看不到代码签名选项。您可以在屏幕截图的左侧看到设置。

# css - 如何在 HTML5 的内联上下文中嵌套块元素？

> ID：12551121
> 
> 赞同：0
> 
> 时间：2012-09-23T09:20:03.720
> 
> 标签：css, html

我遇到了一个问题，我必须将块级内容直接嵌入到 h1-h6 上下文中。从[HTML5 规范](http://dev.w3.org/html5/spec/single-page.html#restrictions-on-content-models-and-on-attribute-values)中，我认为这已被排除以确保与默认样式的兼容性。因此，我的代码不会验证为 HTML5。（但是，它在我测试的任何浏览器中都能完美显示。）

我在这个[jsFiddle](http://jsfiddle.net/S3r3X/)中勾勒了我的场景。

有没有办法以符合 HTML5 的方式将块元素嵌套在内联元素中？我可以想象一个元素从内联上下文切换到块上下文，但默认情况下不会显示；我只是不知道这样的元素。

任何帮助表示赞赏。

PS：我知道 JavaScript 能够处理我的示例，但我的解决方案必须是纯 HTML+CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:28:17.993

为什么你不能使用`spans`？小演示：[小链接](http://jsfiddle.net/glee/xVutp/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T09:54:30.073

对于这种性质的内容，您不应该使用`<h[1-6]>`. 改为使用`<header>`。

# mysql - mysql查询2个有计数的表

> ID：12551130
> 
> 赞同：1
> 
> 时间：2012-09-23T09:21:29.487
> 
> 标签：mysql, sql

我有 2 张桌子。一个叫`artist`. 这是表结构：

```
artistID lastname firstname nationality dateofbirth datedcease 
```

另一个表称为`work`

```
workId title copy medium description artist ID 
```

列出数据库中记录有多个副本的任何艺术品（包括创作该作品的艺术家）的详细信息的 SQL 查询是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:26:25.687

尝试这个：

```
SELECT 
  w.copy, w.title, w.description, w.medium, 
  a.firstname + ' ' + a.lastname AS 'Artist created the work'
FROM artists a
INNER JOIN
(
    SELECT * 
    FROM work 
    WHERE artistID IN
    ( 
        SELECT artistID
        FROM work 
        GROUP BY artistID
        HAVING COUNT(*) > 1 
    )
) w ON a.artistID = w.artistID 
```

这是[**SQL Fiddle 中的演示**](http://sqlfiddle.com/#!2/97562/3)

# c# - 使用控制台测试发送 UDP 数据包的问题

> ID：12551131
> 
> 赞同：0
> 
> 时间：2012-09-23T09:21:31.027
> 
> 标签：c#, .net, networking, udp

这是我的客户代码

```
 class Program
{
    static void Main(string[] args)
    {
        string msg;
        Socket sck = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        IPEndPoint ep = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 999);
        sck.Bind(ep);
        byte[] msgbytes;

        while (true)
        {
            msg = Console.ReadLine();
            msgbytes = ASCIIEncoding.ASCII.GetBytes(msg);
            sck.BeginSendTo(msgbytes, 0, msgbytes.Length, SocketFlags.None, ep, null, sck);
            Console.WriteLine("sent");
        }
    }

    void callBack(IAsyncResult result)
    {
        ((Socket)result.AsyncState).EndSendTo(result);
    }
} 
```

}

这是服务器代码

```
 class Program
{
    static void Main(string[] args)
    {
        string msg;
        Socket sck = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        IPEndPoint ep = new IPEndPoint(IPAddress.Any, 999);
        sck.Bind(ep);
        byte[] msgbytes = new byte[100];

        EndPoint client = (EndPoint)ep;

        int bytesrec;
        while (true)
        {
            bytesrec = sck.ReceiveFrom(msgbytes, 0, msgbytes.Length, SocketFlags.None, ref client);
            msg = ASCIIEncoding.ASCII.GetString(msgbytes);
            Console.WriteLine("4");
        }
    }
} 
```

}

问题是当我尝试与客户端发送时，服务器没有收到任何数据包。“4”从未被写入，这确认 sck.receivefrom 已执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:03:54.227

在您的客户端代码中更改以下内容：而不是`sck.Bind(ep);`使用`sck.Connect(ep);` ，而不是

```
sck.BeginSendTo(msgbytes, 0, msgbytes.Length, SocketFlags.None, ep, null, sck); 
```

利用

```
sck.Send(msgbytes, msgbytes.Length, SocketFlags.None); 
```

它应该工作......

编辑：如果你真的需要使用异步发送......你可以这样做：

```
IAsyncResult asyncres = sck.BeginSendTo(msgbytes, 0, msgbytes.Length, SocketFlags.None, ep, null, sck);
sck.EndSendTo(asyncres); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-23T10:19:40.930

你的服务器需要在 0.0.0.0 监听，就像它正在做的那样，否则你就进入了平台依赖的区域；*并且*您的客户端需要绑定到外部 IP 地址，而不仅仅是 127.0.0.1，否则它无法从本地主机发送任何数据包。

# sql - 如何通过 MS Access 上的表单编辑记录？

> ID：12551133
> 
> 赞同：-1
> 
> 时间：2012-09-23T09:22:47.217
> 
> 标签：sql, forms, ms-access, edit

我是 Microsoft Access 的新手，在实现某些东西时遇到了麻烦。基本上，我有一个带有组合框、一些文本框和一个命令按钮的表单。

我想要做的是让用户从组合框中选择一条记录，然后填充`textboxes`（我已经设法做到了）。数据加载到 中后`textboxes`，我希望用户能够编辑 中的信息`textboxes`，然后按命令按钮，以便更新表中的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:13:00.743

这看起来与您在删除时遇到问题的奇怪形式相同。听起来你是从错误的角度工作。基于表或查询创建表单，然后添加组合框以根据选择在表单上查找记录。有向导可以指导您完成。然后，您将拥有一个标准的访问表单，其中一切都按预期工作。当文本框改变时，只要你移动到另一条记录，数据就会更新，不需要保存，这是Access的默认设置。

如果您希望使用非标准的未绑定控件，则需要使用 SQL 或存储查询进行更新。

# c# - 匹配地址的正则表达式

> ID：12551135
> 
> 赞同：0
> 
> 时间：2012-09-23T09:22:54.267
> 
> 标签：c#, regex

我有以下要搜索的字符串集：

> 1Dept Neurosci，大学。新墨西哥州，阿尔伯克基，NM；2摩尔。和人类基因，贝勒上校医学，休斯敦，德克萨斯；3精神病学，大学。德克萨斯西南医学中心。Ctr.，达拉斯，德克萨斯；4临床。热内特，伊拉斯谟大学。医学。Ctr.，鹿特丹，荷兰；5人类基因，埃默里大学，佐治亚州亚特兰大

上面是一组地址，以数字开头（用于将其链接到人）。需要搜索所有地址为：

> 1Dept Neurosci，大学。新墨西哥州，阿尔伯克基，NM
> 2Mol。和 Human Genet., Baylor Col. of Med., Houston,, TX
> 3Psychiatry, Univ. 德克萨斯西南医学中心。Ctr.，达拉斯，TX
> 4Clin。热内特，伊拉斯谟大学。医学。Ctr., 鹿特丹, 荷兰
> 5Human Genet., Emory Univ.Atlanta, GA

我写了下面的正则表达式：

```
\d\w+,* 
```

它只匹配一个数字后跟一个单词。我该如何修改它。请建议有没有更好的方法。

我怎样才能用（最后一个数字）做同样的事情：

> *X。ZHAO1, W. GUO1, AM ALLAN1, R. ZONG2, L. ZHANG1, EB JOHNSON1, EG SCHALLER1, AC MURTHY1, SL GOGGIN1,2, A. EISCH3,4, BA OOSTRA4,5, DL NELSON2,3, P. JIN5 ;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T09:29:14.483

根据需要简单`regex`（以数字开头）：

```
\d+[^\d]+ 
```

解释：

```
\d+                      digits (0-9) 
                         (1 or more times, matching the most amount possible)

[^\d]+                   any character except: digits (0-9) 
                         (1 or more times, matching the most amount possible) 
```

和示例代码：

```
var strInput = "1Dept Neurosci, The Univ. of New Mexico, ALBUQUERQUE, NM; 2Mol. and Human Genet., Baylor Col. of Med., Houston,, TX; 3Psychiatry, Univ. of Texas Southwestern Med. Ctr., Dallas, TX; 4Clin. Genet., Erasmus Univ. Med. Ctr., Rotterdam, Netherlands; 5Human Genet., Emory Univ., Atlanta, GA";

var adresses = new List<string>();

foreach (Match match in Regex.Matches(strInput, @"\d+[^\d]+"))
{
    adresses.Add(match.Value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T10:07:38.433

搜索似乎很复杂。我从上面的理解中了解到，字符串会被搜索并返回结果

我是根据以下字符串做的

> 1Dept Neurosci，大学。新墨西哥州，阿尔伯克基，NM

这是代码片段。

```
using System;
using System.Text.RegularExpressions;

namespace ConsoleApplication1
{
  class Program
  {
    static void Main(string[] args)
    {
      string txt="1Dept Neurosci, The Univ. of New Mexico, ALBUQUERQUE, NM ";

      string re1="(\\d+)";  // Integer Number 1
      string re2="((?:[a-z][a-z]+))";   // Word 1
      string re3=".*?"; // Non-greedy match on filler
      string re4="((?:[a-z][a-z]+))";   // Word 2
      string re5="(,)"; // Any Single Character 1
      string re6="(.*?),";  // Command Seperated Values 1

      Regex r = new Regex(re1+re2+re3+re4+re5+re6,RegexOptions.IgnoreCase|RegexOptions.Singleline);
      Match m = r.Match(txt);
      if (m.Success)
      {
            String int1=m.Groups[1].ToString();
            String word1=m.Groups[2].ToString();
            String word2=m.Groups[3].ToString();
            String c1=m.Groups[4].ToString();
            String csv1=m.Groups[5].ToString();
            Console.Write("("+int1.ToString()+")"+"("+word1.ToString()+")"+"("+word2.ToString()+")"+"("+c1.ToString()+")"+"("+csv1.ToString()+")"+"\n");
      }
      Console.ReadLine();
    }
  }
} 
```

还有一件事。如果您需要生成正则表达式并搜索它，您可能需要查看[这个](http://txt2re.com/index-csharp.php3)

请让我知道这可不可以帮你。

**编辑**

```
using System;
using System.Text.RegularExpressions;

namespace ConsoleApplication1
{
  class Program
  {
    static void Main(string[] args)
    {
      string txt="X. ZHAO1,";

      string re1="((?:[a-z][a-z0-9_]*))";   // Variable Name 1
      string re2="(\\.)";   // Any Single Character 1
      string re3="(\\s+)";  // White Space 1
      string re4="((?:[a-z][a-z0-9_]*))";   // Variable Name 2
      string re5="(,)"; // Any Single Character 2

      Regex r = new Regex(re1+re2+re3+re4+re5,RegexOptions.IgnoreCase|RegexOptions.Singleline);
      Match m = r.Match(txt);
      if (m.Success)
      {
            String var1=m.Groups[1].ToString();
            String c1=m.Groups[2].ToString();
            String ws1=m.Groups[3].ToString();
            String var2=m.Groups[4].ToString();
            String c2=m.Groups[5].ToString();
            Console.Write("("+var1.ToString()+")"+"("+c1.ToString()+")"+"("+ws1.ToString()+")"+"("+var2.ToString()+")"+"("+c2.ToString()+")"+"\n");
      }
      Console.ReadLine();
    }
  }
} 
```

# jquery - Jquery + 克隆一个 html 代码块

> ID：12551139
> 
> 赞同：0
> 
> 时间：2012-09-23T09:23:56.153
> 
> 标签：jquery, html, css

这只是我想做的事情-如果我做错了，请告诉我。

建立一个约会网络，当需要 2 个用户聊天时，我需要打开一个聊天/信使框。

聊天框基本上是一个带有所需 HTML/CSS/IMG 和用户特定数据的 DIV - 包括允许可移动性的 jquery ui。

问题 - 我正在寻找加载这些聊天框的最佳方式。

我计划在默认页面加载中包含核心 HTML/CSS，显示：无；然后我可以克隆这段代码并创建一个新的聊天框。

克隆不是我以前做过的事情。有兴趣尝试一下。我想我可以用 jquery 阅读和重用代码。

对此有何建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:23:26.017

```
<script>
$(function () {
  var appendme = $("#element").html();

  $('#container').append(appendme);

});
</script> 
```

或者

```
$('.hello').clone().appendTo('.goodbye'); 
```

# jquery - 悬停文本链接颜色淡化

> ID：12551142
> 
> 赞同：2
> 
> 时间：2012-09-23T09:24:36.130
> 
> 标签：jquery, css, hover, fadein

我试图做一个文本链接淡入淡出悬停效果。我试图通过 .css() 函数更改颜色。颜色正在改变，但 .fadeIn() 函数不起作用。我做错了什么，我该如何解决？

```
$('#menu li a').hover(
        function() {
            $(this).css('color','#fff').fadeIn();
        },
        function() {
            $(this).css('color','#000').fadeIn();
        }
    ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:05:12.633

[`.fadeIn()`](http://api.jquery.com/fadeIn/)in 不会淡入来自您的`.css()`功能的文本。它与[`.fadeOut()`](http://api.jquery.com/fadeOut/)函数一起使用，在屏幕上显示或隐藏对象。要淡入您需要使用的颜色变化- 这是一个使用[此处找到](http://jsfiddle.net/EFgma/29/)[的](https://raw.github.com/jquery/jquery-color/master/jquery.color.js)插件[**`.animate()`**](http://api.jquery.com/animate/)的工作示例。

```
$('a').mouseover(function(){

    // #FFFFFF = color to fade | 100 = time of fading
    $(this).animate({color:'#FFFFFF'},100);
    $(this).animate({color:'#000000'},100);

}).mouseout(function(){

    // this get called when mouse leaves.
    // Set the color to default color blue        
    $(this).animate({color:'blue'},100);

    }); 
```

请注意，最好使用`.mouseover()`/`.mouseout()`然后使用悬停，因为它会在此处产生问题（重新闪烁和重新着色）以及此错误的示例：http: [//jsfiddle.net/EFgma/54/](http://jsfiddle.net/EFgma/54/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T09:39:02.890

`animate`在包含[jQuery UI](http://jqueryui.com)（或[jQuery color](https://github.com/jquery/jquery-color) ）之后，您要么需要颜色：

```
$('#menu li a').hover(
    function() { $(this).animate("color", "#FFFFFF"); },
    function() { $(this).animate("color", "#000000"); }
} 
```

或者使用 CSS3 过渡（完全避免使用 jQuery）：

```
.menu li a {
    color: #000000;
    transition: 1s color; /*animates for 1 second*/
    -moz-transition: 1s color; /*For Firefox < 16.0*/
    -webkit-transition: 1s color; /*For WebKit (Chrome, Safari)*/
}
.menu li a:hover {
    color: #FFFFFF;
} 
```

然而，CSS3 `transitions`' 的支持[是有限](http://caniuse.com/css-transitions/)的；IE <= 9 不支持它（尽管即将推出的 IE10 支持它）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T09:52:23.793

与往常一样，我想提倡“[渐进式增强](http://en.wikipedia.org/wiki/Progressive_enhancement)”方法，只是因为我是肛门保留。
不要接受这个答案，因为它不能直接回答你的问题。

不向网站添加功能的功能应该仔细权衡：我认为链接上的颜色褪色并不是那么重要。那么，为什么访问您网站的每个人都应该只为该“功能”下载 jQuery + jQuery UI？

仅向支持过渡的人添加过渡。您也可以更轻松地维护此代码。它还在移动设备上进行了硬件加速。

```
.menu li a {
    color: #000000;
    -webkit-transition: color 1s linear;
    -moz-transition: color 1s linear;
    -ms-transition: color 1s linear;
    transition: color 1s linear;
}
.menu li a:hover {
    color: #FFFFFFF;
} 
```

也许使用过时浏览器（IE <= 9）的人会明白，他们需要更新或更改，如果不是每个站点都是“为他们”开发的并且以所有其他站点为代价。

# java - 鼠标点击移动一个圆圈

> ID：12551143
> 
> 赞同：3
> 
> 时间：2012-09-23T09:24:39.337
> 
> 标签：java, swing, user-interface, paint, mouse-listeners

我对Java真的很陌生，当点击它时我需要一个圆圈来围绕一个JFrame移动，但是这个圆圈必须获得随机坐标。到目前为止，此代码每次单击时都会生成一个新圆圈，但所有其他圆圈也会保留在那里。我只需要一圈就可以在框架周围移动。所以也许有人可以帮助我一点:)

这是我的代码：

```
public class test2 extends JFrame implements MouseListener {
int height, width;
public test2() {
    this.setTitle("Click");
    this.setSize(400,400);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setVisible(true);
    addMouseListener(this);
    width = getSize().width;
    height = getSize().height;
}

public void paint (Graphics g) {
    setBackground (Color.red);
    g.setColor(Color.yellow);
    int a, b;
    a = -50 + (int)(Math.random()*(width+40));
    b = (int)(Math.random()*(height+20));
    g.fillOval(a, b, 130, 110);
}

    public void mouseClicked(MouseEvent e) {
    int a, b;
    a = -50 + (int)(Math.random()*(width+40));
    b = (int)(Math.random()*(height+20));
    repaint();
}

public void mouseReleased(MouseEvent e){}
public void mouseEntered(MouseEvent e){}
public void mouseExited(MouseEvent e){}
public void mousePressed(MouseEvent e){}

public static void main(String arg[]){

    new test2();
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T09:32:08.217

看看这是否有帮助，在这里我在绘制圆圈之前用背景颜色填充了整个矩形。虽然效率不高，但达到目的

替换paint方法如下

```
public void paint (Graphics g) {
        setBackground (Color.red);
        g.setColor(Color.red);
        g.fillRect(0, 0, width, height);
        g.setColor(Color.yellow);
        int a, b;
        a = -50 + (int)(Math.random()*(width+40));
        b = (int)(Math.random()*(height+20));
        g.fillOval(a, b, 130, 110);
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T09:35:19.687

我认为您在这里遇到的主要问题之一是您没有创建全局 a 和 b 变量。每次调用`paint()`and`mouseClicked()`方法时都会创建 2 个新变量。还有另外两个问题/警告。

1.  如果您使用的``paint()`是`paintComponents(Graphics g)``JFrame`
2.  您需要`super.paint(g);`在您的 paintComponents() 定义下添加该行。

实际上，我很惊讶任何东西都被绘制出来了。此外，Anony-Mousse 在谈到约定时是对的。类名应始终以大写字母开头。

您的代码应如下所示：

```
public class Test2 extends JFrame implements MouseListener {
int height, width;
int a,b;
public test2() {
    this.setTitle("Click");
    this.setSize(400,400);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setVisible(true);
    addMouseListener(this);
    width = getSize().width;
    height = getSize().height;
}

public void paintComponents(Graphics g) {
    super.paint(g);
    setBackground(Color.red);
    g.setColor(Color.yellow);
    a = -50 + (int)(Math.random()*(width+40));
    b = (int)(Math.random()*(height+20));
    g.fillOval(a, b, 130, 110);
}

    public void mouseClicked(MouseEvent e) {
    int a, b;
    a = -50 + (int)(Math.random()*(width+40));
    b = (int)(Math.random()*(height+20));
    repaint();
}

public void mouseReleased(MouseEvent e){}
public void mouseEntered(MouseEvent e){}
public void mouseExited(MouseEvent e){}
public void mousePressed(MouseEvent e){}

public static void main(String arg[]){

    new test2();
}

} 
```

# ios - RestKit 删除路由

> ID：12551152
> 
> 赞同：0
> 
> 时间：2012-09-23T09:25:40.530
> 
> 标签：ios, rest, restkit

我在 iOS 上使用 RestKit 并设置路线后：

`[[RKObjectManager sharedManager].router routeClass:[MyClass class] toResourcePath:@"/myresource" forMethod:RKRequestMethodPOST];`

我想删除“MyClass”类的这条路线并用新的路线替换。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T20:34:18.410

我认为最简单的方法是不使用 sharedManager，而是为您想要做的两个不同的事情中的每一个创建一个对象管理器。

# php - 在特定行中的整数和计数之间进行比较

> ID：12551163
> 
> 赞同：1
> 
> 时间：2012-09-23T09:26:53.650
> 
> 标签：php, mysql, database, integer, compare

这是对这个问题的后续问题：[Check for specific integer in a row WHERE user = $name](https://stackoverflow.com/questions/12544658/check-for-specific-integer-in-a-row-where-user-name)

我希望用户能够在我的网站上准确地一天发表五次评论。在这五次之后，用户必须等待 24 小时。为了实现这一点，我在我的 MYSQL 数据库中提出了一个计数器，就在用户旁边。所以用户的名字在哪里，计数器就在哪里。当它达到 5 时，它应该停止计数并在 24 小时后复位。为了检查我使用时间戳的时间。我检查时间戳是否超过 24 小时。如果是这种情况，计数器会被重置（-5）并且用户可以再次评论。为了做到这一点，我使用了以下代码，但是它永远不会停在五点，我的猜测是我的比较在某种程度上是错误的：

```
$counter = mysql_query("SELECT FROM table VALUES CommentCounterReset WHERE Name = '$name'");

if(!isset($_SESSION['ts'])); {
    $_SESSION['ts'] = time();
}

if  ($counter >= 5) { 
    if (time() - $_SESSION['ts'] <= 60*60*24){
        echo "You already wrote five comments.";
    }
    else {
        $sql = "UPDATE table SET CommentCounterReset = CommentCounterReset-5 WHERE Name = '$name'";   
    }     
}  
else {
 $sql = "UPDATE table SET CommentCounterReset = CommentCounterReset+1 WHERE Name = '$name'";
    echo "Your comment has been added.";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:43:19.383

您应该让他每天添加 5 次评论，而不是 24 小时后：

```
$db = new PDO('mysql:host=localhost;dbname=test', 'root', '', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));

$stmt = $db->prepare("SELECT `Name`, `timestamp`, `CommentCounterReset` FROM `table` WHERE `Name`=:name");
$stmt->execute(array(':name' => $_GET['name']));
$row = $stmt->fetch(PDO::FETCH_ASSOC);
$lastComment = $row['timestamp']; // timestamp from database and not from $_SESSION because $_SESSION get's destroyed.
$countComments = $row['CommentCounterReset']; // number of comments added

$row_count = $stmt->rowCount();
if(!$row_count){
    $stmt = $db->prepare("INSERT INTO `table` VALUES(0, :name, :timestamp, 1)");
    $stmt->execute(array(':name' => $_GET['name'], ':timestamp' => date('U')));
    echo "Your comment has been added.";
} else {
    if($countComments > 4 && date('d') == date('d', $lastComment)){ // if number of comments are greater than 4 and is same day
        echo "You already wrote five comments today.";
    } else {
        if(date('d') != date('d', $lastComment)){ // if there are different days, reset the counter to 1
            $stmt = $db->prepare("UPDATE `table` SET `CommentCounterReset` = 1, `timestamp`=:timestamp WHERE `Name`=:name");
            $stmt->execute(array(':name' => $_GET['name'], ':timestamp' => date('U')));
        } else { // if it's same day increase counter with 1
            $stmt = $db->prepare("UPDATE `table` SET `CommentCounterReset` = `CommentCounterReset`+1 WHERE `Name`=:name");
            $stmt->execute(array(':name' => $_GET['name']));
        }
        echo "Your comment has been added.";
    }
} 
```

因为`mysql_*`但我非常不鼓励它！

```
$link = mysql_connect('localhost', 'root', '');
mysql_select_db('test', $link);

$stmt = mysql_query("SELECT `Name`, `timestamp`, `CommentCounterReset` FROM `table` WHERE `Name`='".mysql_real_escape_string($_GET['name'])."'");
$num = mysql_num_rows($stmt);

if(!$num){
    $stmt = mysql_query("INSERT INTO `table` VALUES(0, '".mysql_real_escape_string($_GET['name'])."', '".date('U')."', 1)");
    echo "Your comment has been added.";
} else {
    $row = mysql_fetch_assoc($stmt);
    $lastComment = $row['timestamp']; // timestamp from database and not from $_SESSION because $_SESSION get's destroyed.
    $countComments = $row['CommentCounterReset']; // number of comments added

    if($countComments > 4 && date('d') == date('d', $lastComment)){ // if number of comments are greater than 4 and is same day
        echo "You already wrote five comments today.";
    } else {
        if(date('d') != date('d', $lastComment)){ // if there are different days, reset the counter to 1
            $stmt = mysql_query("UPDATE `table` SET `CommentCounterReset` = 1, `timestamp`='".date('U')."' WHERE `Name`='".mysql_real_escape_string($_GET['name'])."'");
        } else { // if it's same day increase counter with 1
            $stmt = mysql_query("UPDATE `table` SET `CommentCounterReset` = `CommentCounterReset`+1 WHERE `Name`='".mysql_real_escape_string($_GET['name'])."'");
        }
        echo "Your comment has been added.";
    }
} 
```

我的`table`：

```
CREATE TABLE `table` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `Name` varchar(30) NOT NULL,
  `timestamp` int(11) NOT NULL,
  `CommentCounterReset` int(11) NOT NULL,
  UNIQUE KEY `id` (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T16:01:05.983

你写：

```
$counter = mysql_query("SELECT FROM table VALUES CommentCounterReset WHERE Name = '$name'");

if  ($counter >= 5) { 
```

...但是`$counter`是一种*资源*，而不是查询的结果。所以比较是有缺陷的。

您应该运行查询然后获取值：

```
$exec = mysql_query("SELECT CommentCounterReset FROM table WHERE Name='$name';");
// Insert considerations about SQL injection and benefits of PDO here :-)
$tuple = mysql_fetch_assoc($exec);         // Might also do with fetch_array
$counter = $tuple['CommentCounterReset'];  // and $tuple[0] 
```

不过，确保不超过限制的更好方法可能是将大部分工作留给 SQL。您存储帖子的名称和日期；表中的总行数最多为 5*number_of_users 。这样您就可以在同一天（而不是 24 小时）检查帖子。

```
// Clean the table. This will be done frequently, and it will be very fast
mysql_query("DELETE FROM comment_counters WHERE day < date(now());");
// It is also possible to add "... AND name='$name'" to the WHERE to reduce
// the number of affected rows; in this case the first version of the query
// ought to be run as a maintenance as near midnight as possible.

$exec = mysql_query("SELECT COUNT(*) < 5 AS ok FROM comment_counters WHERE name='$name';");
$data = mysql_fetch_assoc($exec);
mysql_free_result($exec);
$okay = $data['ok'];
if ($okay)
{
   // Okay to post
   mysql_query("INSERT INTO comment_counters (day, name) VALUES (date(now()), '$name');");
   // Do the rest of the posting
}
else
{
   // Cannot post.
} 
```

# graphviz - 如何设置从左到右点文件的排名

> ID：12551164
> 
> 赞同：0
> 
> 时间：2012-09-23T09:26:53.673
> 
> 标签：graphviz, dot

假设我有四个节点 a、b、c 和 d。我有边缘

```
a -> d  
b -> c 
```

现在，如果我生成图形，我会按照 a、d、b、c 的顺序得到顶点（如果我是`rank`它们`same`）。但我希望它们按 a、b、c、d 的顺序排列。我应该如何设置排名？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:39:31.643

您可以使用不可见的边缘：

```
a -> b[style=invis];
b -> c;
c -> d[style=invis];
a -> d[constraint=false]; 
```

# javascript - 从 PHP 响应的元素中获取数据

> ID：12551166
> 
> 赞同：0
> 
> 时间：2012-09-23T09:27:07.627
> 
> 标签：javascript, php, jquery, html, ajax

我最近从 XML 切换到 PHP，以便与我的简单 AJAX 程序一起使用。但是，我不知道如何像使用 XML 文件格式那样使用 .each 查找和提取元素的数据。

输出的 HTML 是正确的：当人们输入搜索时，他们会收到一个从 MySQL 数据库生成的 php 页面。

我想要发生的是使用 .each 来获取“div.product”，然后查看该 div 中包含的元素并使用它们的数据在我的页面上附加更多元素和样式。

```
function htmlParser() {
    var search_name_field = $("input.search").val();
    $.ajax({
        type: "POST",
        url: "load_data.php?product=" + search_name_field,
        cache: false,
        dataType: "html",
        success: function(html){
            alert(html);    // This shows php response perfectly
            $(html).find("div.product").each(function(){    
                alert("success!"); // Doesn't appear
                var productcode = $(this + "div.product_detail").data("code");
                alert(productcode);
                $("#output").empty();
                $("#output").append("Product Code: " + productcode + "<br>"); 
            });
        }
    })
} 
```

这是*alert(html)生成的警报中的前两个 div.product*

```
<span class="con_status">Connected successfully</span>
<div class="product">
    <div class="product_detail" data-code="HW100"></div>
    <div class="product_detail" data-name="Loaded Hardware 1&quot;"></div>
    <div class="product_detail" data-price="7"></div>
    <div class="product_detail" data-hideproduct=""></div>
    <div class="product_detail" data-stockstatus="13"></div>
    <div class="product_detail" data-productdescriptionshort=""></div>
    <div class="product_detail" data-producturl=""></div>
    <div class="product_detail" data-photourl=""></div>
</div>
<div class="product">
    <div class="product_detail" data-code="HW125"></div>
    <div class="product_detail" data-name="Loaded Hardware 1.25&quot;"></div>
    <div class="product_detail" data-price="7"></div>
    <div class="product_detail" data-hideproduct=""></div>
    <div class="product_detail" data-stockstatus="13"></div>
    <div class="product_detail" data-productdescriptionshort=""></div>
    <div class="product_detail" data-producturl=""></div>
    <div class="product_detail" data-photourl=""></div>
</div> 
```

编辑：我的 ajax 的一个问题是它只能加载第一个数据元素。我通过将所有数据移动到一个元素中来解决这个问题。我也可以将所有元素重命名为不同的类。我不知道哪个更好，但我使用的是正式的。

```
<div class="result">
    <div class="product"><div class="product_detail"
    data-code="LCSDC"
    data-name="Loaded Longboards - Dervish COMPLETE" data-price="240"
    data-hideproduct="Y"
    data-stockstatus="0"
    data-productdescriptionshort="Dervish longboard deck from Loaded Carving Systems. With a lower center of gravity and a torsionally stiff design- the Dervishes are built to hold an edge and maximize energy return. A drop-thru carver designed to work with most reverse kingpin 180mm Trucks &amp; 70mm+ wheels. Small nose and tail for manual &amp; shovits."
    data-producturl=""
    data-photourl="">
    </div></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:49:41.493

您的 JavaScript 代码中有两个问题。

我记得，**当你做类似的事情时，应该只有一个根元素`$(html)`**。

一个快速的解决方案是添加这一行

```
html = "<div>" + html + "</div>";
$(html).find("div.product").each(function(){ 
```

或者您可以更改您的 PHP 以输出包含以下内容的结果：

```
<div class="result">...</div> 
```

然后成功警报将起作用。

**另一个问题是关于这条线**

```
$(this + "div.product_detail") 
```

它应该是这样的

```
$(this).find("div.product_detail") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:53:29.963

它不起作用，因为 $(html) 正在返回您的数组，如下所示：
`[ <span class=​"con_status">​Connected successfully​&lt;/span>​, <div class=​"product">​…​&lt;/div>​, <div class=​"product">​…​&lt;/div> ​]`

所以你可以像这样使用 .filter() 函数：
`$(html).filter('.product');`

或者像 Daniel Cheng 建议的那样将您的回复放在另一个 div 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T09:40:00.010

尝试加载。例如：

```
$('selector for your div to parse data').load('samplepage.php #div_you_want_to load') 
```

额外的你可以做：

```
$('selector for your div to parse data').load('samplepage.php #div_you_want_to load', function(){
//this triggers after it fetches the page
}) 
```

见[http://api.jquery.com/load/](http://api.jquery.com/load/)

它比 .ajax 更灵活，只有 1 个缺点。如果需要，您不能使查询同步。但它还有很多其他优点。

对于您想要做的 .each ，我认为您的代码没有任何问题。如果输出的格式是特定的，您可以编写代码以适应该格式

# excel - 两个变量的VBA比较

> ID：12551167
> 
> 赞同：0
> 
> 时间：2012-09-23T09:27:21.697
> 
> 标签：excel, vba

我正在尝试比较 VBA/Excel 中的两个变量，但 VBA 认为它们并不相同，即使它们是相同的。

我创建了两个数据透视表，并且正在检查它们中的值是否相同。

代码是：

```
Dim pvt As PivotTable
Set pvt = ActiveSheet.PivotTables(2)
For Each Pi In pvt.PivotFields("Filialas").PivotItems
    With Sheets("Composite").Range("D:D")
    Set c = .Find(Pi.Value, LookIn:=xlValues)
    If Not c Is Nothing Then
        If Pi.DataRange.Value = c.Offset(0, 1).Value Then
            c.Offset(0, 6).Value = Pi.DataRange.Value & " equals " & c.Offset(0, 1).Value
            Else
            c.Offset(0, 6).Value = Pi.DataRange.Value & " does not equal " & c.Offset(0, 1).Value
        End If
    End If
    End With
Next 
```

结果：

![在此处输入图像描述](../Images/f1081e376568bd990c7e96867ab8e5f2.png)

我不是程序员，所以我非常感谢您的想法。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T14:29:36.233

问题可能是因为浮点数比它们看起来要大（例如它可能是 61.812），如果需要，程序会自动舍入到小数点后两位。

您是否尝试扩展小数位以比较数字以确保它们完全相同？

*   解决方案是正确的，并且将值四舍五入到小数点后两位解决了问题，如问题的评论中所示。

# jquery - 使用 attr(href) 设置 jquery cookie

> ID：12551170
> 
> 赞同：0
> 
> 时间：2012-09-23T09:27:56.720
> 
> 标签：jquery, cookies

我有一个来自这个演示的脚本：[tutorialzine.com](http://demo.tutorialzine.com/2010/03/microtut-getting-and-setting-cookies-with-jquery-php/demo.php)

如您所见，cookie 保存为纯文本。但是我需要将其保存为链接。所以我尝试了：

```
// If the cookie has been set in a previous page load, show it in the div directly:
if(cookie) $('.jq-text').text(cookie).show();

    $('.fields a').click(function(e){

        var text = $('#inputBox').val();

// Setting a cookie with a seven day validity:

        $.cookie('demoCookie',text,{expires: 7, path: '/', domain: 'domain.com'});

            $('.jq-text').attr('href', text).html(text); 
```

我不知道究竟要改变什么才能'attr''var text'并将其保存为$cookie。

请看演示：[JsFiddle](http://jsfiddle.net/mrxu5/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:52:48.330

问题似乎是因为变量“cookie”。将其重命名为“demoCookie”似乎可以解决问题......

# google-cloud-storage - 返回文件的限制

> ID：12551171
> 
> 赞同：2
> 
> 时间：2012-09-23T09:28:02.020
> 
> 标签：google-cloud-storage, gsutil

我需要在谷歌云存储中保存几千个文件。**gsutil ls**命令返回的文件数量是否有限制？

如果我没记错的话，AWS S3 服务的限制是每个请求都显示几千个条目。如果我需要列出下一批，我需要使用 API 或使用一些复杂的 sript。

我想知道在使用 gsutil 命令行工具时是否有任何此类限制。我可以自己检查，但我必须上传数千个虚拟文件！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T13:52:12.047

gsutil ls 命令对存储桶列表进行分页 - 每个底层 GET 返回有限数量的结果（通常为 1000 个），并且 gsutil 将继续遍历所有批次，直到它列出存储桶中的所有对象。

请注意，如果您计划构建大量对象（例如，数十万或数百万），我们建议您不要依赖使用存储桶列表来跟踪您的对象，而是维护自己的元数据 (例如，在列出所有对象名称和相关详细信息的数据库中）。

Mike Schwartz，谷歌云存储团队

# ember.js - 元素。ValueBinding to property of object in {{#each}} 我已经花了很多时间尝试各种事情，但我终于认输了。我有一个对象数组，我使用 {{#each}} 帮助器在列表中的页面上显示这些对象。需要将特定属性绑定到 Ember.Select 视图。所以如果我有 10 个项目，就会有 10 个选择视图。选择视图的可能选项被定义为一个数组。这是有效的，选择视图显示其标签/值正确。问题在于绑定到我要设置的属性。我无法获得 {{#each}} 中对象的上下文。

> ID：12551173
> 
> 赞同：1
> 
> 时间：2012-09-23T09:28:14.673
> 
> 标签：ember.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:00:25.107

~~我不知道是否理解，但如果你想在 {{#each}} 帮助器中定义上下文，你可以这样写：~~

 ~~```
{{#each question in questions}}
   {{question.type}}
{{/each}} 
```~~  ~~**编辑：**我想我让它像你期望的那样工作。事实上，如果初始值为空，或者它不是选择的正确选择，则提示会覆盖初始值。

```
<script type="text/x-handlebars">
  {{#each App.questions}}
    {{view Ember.Select
      contentBinding="App.content"
      optionValuePath="content.type"
      optionLabelPath="content.label"
      prompt="Select a value"        
      valueBinding="type"        
    }}
    {{type}}
  {{/each}}
</script> 
```

```
App = Ember.Application.create({});
App.questions = [
  {type: null},
  {type: 'type1'}
];

App.content = [
  {label: "This is type 1", type: "type1"},
  {label: "This is type 2", type: "type2"}
]; 
```

[http://jsfiddle.net/Sly7/ByRNt/12/](http://jsfiddle.net/Sly7/ByRNt/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:58:05.483

```
{{#each questions}}
    {{view Ember.Select
        contentBinding="Editor.Enums.
        optionValuePath="content.value"
        optionLabelPath="content.label"
        valueBinding="type"
        value="type"
    }}
{{/each}} 
```

这似乎真的很片状。

因此，我必须强制输入选择的初始值并不是很明显（我假设它会使用绑定来确定它的初始值）。

接下来，如果您指定提示（在 1.0.pre 上），它将覆盖任何设置的值。

哦，好吧，1天的工作。

达里尔~~

# c++ - Eclipse CDT：无法解析符号“cout”、“map”、“vector”、“size_t”等

> ID：12551175
> 
> 赞同：3
> 
> 时间：2012-09-23T09:28:29.267
> 
> 标签：c++, linux, eclipse-cdt, include-path

有很多关于此的帖子，我已经尝试应用对其他人有用但仍不适合我的解决方案。

首先，我在 Linux 下开发的一个 c++ 项目一切正常，使用 Eclipse Indigo、gcc-4.7.1、cx11 和 Gentoo Linux。我的项目使用自制的静态库。我对一些模板类声明做了一些修改。然后，我的图书馆里出现了一些意想不到的“无法解决”。

我所做的是重建库的索引，清理项目并重建它。它编译得很好，就像在修改之前和索引重建之前已经习惯一样，但是“无法解决”仍然存在。

好的，我至少尝试看看我的主要项目是否构建。库中有一个**未解析的名称**。所以我重建了主项目索引，在这里，**所有标准关键字都变成了“无法解决”的下划线**，并且无法编译，因为它找到了数千个未解析的名称。

我尝试清理和重建，在项目属性中添加许多包含路径：

```
-I/usr/lib/gcc/x86_64-pc-linux-gnu/4.7.1/plugin/include -I/usr/lib64/gcc/x86_64-pc-linux-gnu/4.7.1/include/g++-v4/algorithm -I/usr/lib/gcc/x86_64-pc-linux-gnu/4.7.1/include -I/usr/include -I/usr/include/linux -I/usr/local/include 
```

这并没有改变什么。

'index/Search for unresolved features' 发现：

> 算法、cassert、cmath、cstdlib、fstream、iostream、map、set、sstream、字符串、元组、实用程序

我试图明确添加算法包含路径。但这并没有改变什么。

在我的 .cpp 开头，我有一个`using namespace std;`. `std::`例如，如果我之前添加`set`，它不会改变任何东西。

`std::`例如不建议后自动完成`set`。

当然，我曾尝试关闭/重新打开 Eclipse，但没有取得更大的成功。

有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-12T18:22:18.857

已`.metadata`损坏。我只是用备份替换它。

尽管如此，问题的根源仍然未知。由于大多数`.metadata`文件都是二进制文件，因此我无法进一步调查此问题。

# soa - 面向服务的架构 (SOA)，当给定一个工作单元时该怎么办，实际上可能是两个？

> ID：12551180
> 
> 赞同：1
> 
> 时间：2012-09-23T09:30:12.973
> 
> 标签：soa

在 SOA 内，各个服务不应[相互交互](http://en.wikipedia.org/wiki/Service-oriented_architecture#Overview)。

当对一项服务提出要求时，实际上可以将其分为两个单独的服务/工作单元。什么是最好的动作？

创建两个，其中服务 A 包含两个单元，而服务 B 仅包含“第一个”单元/服务中断 DRY ？澄清一下，在假设一个依赖于另一个的情况下，完全独立的工作单元可以放置在它自己的服务中，而两个组合单元可以放置在第二个服务中。

给定一项服务的需求，该服务可以而且可能应该分成两部分，应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:14:47.960

也许我误读了您的 OP，但是您可以拥有一项服务，该服务`B`公开提供的*特定*功能的接口，以及使用该接口以提供. 服务可以通过其接口使用另一个服务提供的功能。但是它们不是耦合的，因为相同的接口可以通过不同的服务集来实现`A``C``D``A`

# javascript - 查找变量之间的字符串匹配

> ID：12551182
> 
> 赞同：0
> 
> 时间：2012-09-23T09:31:26.610
> 
> 标签：javascript

我想检查 news_text 变量在循环时是否在 text 变量中包含相同的字符串。news _text 可能具有的字符串是：

“也门部长说萨利赫试图破坏过渡[http://t.co/aXOQPMzf](http://t.co/aXOQPMzf) ”

文本变量的字符串是这个

“RT @Reuters：也门部长说萨利赫试图破坏过渡[http://t.co/aXOQPMzf](http://t.co/aXOQPMzf) ”

```
 for (var i = 0; i < full_array.length; i++) {
          var user = full_array[i].user;
          var date = full_array[i].date;
          var profile_img = full_array[i].profile_img;
          var text = full_array[i].text;
          var news_user = full_array[i].news_user;
          var news_date = full_array[i].news_date;
          var news_profile_img = full_array[i].news_profile_img;
          var news_text = full_array[i].news_text;

          if(text==news_text){
              geocode (user,date,profile_img,text,news_user,news_date,news_profile_img,news_text);
          }
    } 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:41:40.870

只需使用

```
if (text.indexOf(news_text) > -1) // text contains news_text
    geocode(…); 
```

编辑：如果您只需要搜索 的前 10 个字符`news_text`，请使用

```
if (text.indexOf(news_text.substr(0, 10)) > -1) // text contains news_text
    geocode(…); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:38:08.937

鉴于模糊字符串匹配的复杂性，我建议您 [从 Google](http://code.google.com/p/yeti-witch/) - Yeti Witch 中查看此类网站。Google 搜索 Soundex 和 JavaScript 有其他示例。

祝你好运。

# java - @Transactional 在服务层还是门面？

> ID：12551184
> 
> 赞同：1
> 
> 时间：2012-09-23T09:31:32.240
> 
> 标签：java, spring-mvc

> **可能重复：**
> [在DAO，服务层架构中使用带有Hibernate的spring MVC的正确方法是什么](https://stackoverflow.com/questions/8993318/what-is-the-right-way-to-use-spring-mvc-with-hibernate-in-dao-sevice-layer-arch)

我的应用程序中有 5 个主要层：

1.  控制器
2.  代表
3.  服务
4.  正面
5.  道

`@Transactional`根据最佳实践，注释应该放在哪里？

是否有任何例外可以进入控制器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T09:53:11.187

外观是您从系统外部访问的内容。在内部，它可以委托给一个或多个服务。由于外观不应该包含任何逻辑，并且应该只委托给一个服务方法（而不是将多个服务调用捆绑在一起），因此它不应该包含`@Transactional`注释。服务应该有它们。

# java - JAXB 是否支持 ArrayList 对象的 ArrayList 编组

> ID：12551185
> 
> 赞同：0
> 
> 时间：2012-09-23T09:31:34.997
> 
> 标签：java, jaxb, marshalling

在我们的 java 应用程序中，我需要保存用户提供的多组值。为了处理这些数据，我使用了 ArrayList < ArrayList < Object >>。当我将此数据发送到 JAXB 编组器时，它正在写入我的 XMLElementWrapper 和 XMLElement 名称，但它没有写入每个 XMLElement 的内容。在此每个 XMLElement 应该是内部 ArrayList。当我解组时，我得到相同大小的 ArrayList，但内部 ArrayList 内容为空，大小为零。

我们在同一个类中有另一个单一的 ArrayList < Object > 实现，它在编组和解组时按预期工作。

如果编组 ArrayList < ArrayList < Object >> 类型的对象，我会在哪里出错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:20:34.060

```
@XmlJavaTypeAdapter(IdAdapter.class)
private ArrayList<ArrayList<String>> _dataSet = null;

private static class IdAdapter extends XmlAdapter<RowList, ArrayList<ArrayList<String>>>
{

    @Override
    public ArrayList<ArrayList<String>> unmarshal(RowList v)
            throws Exception
    {
        ArrayList<ArrayList<String>> list = new ArrayList<ArrayList<String>>();
        for(ColumnList myList:v.rowList)
        {
            list.add(myList.columnList);
        }
        return list;
    }

    @Override
    public RowList marshal(ArrayList<ArrayList<String>> v)
            throws Exception
    {
        RowList rowList = new RowList();
        for(ArrayList<String> innerList:v)
        {
            ColumnList myList = new ColumnList();
            myList.columnList = innerList;
            rowList.rowList.add(myList);
        }
        return rowList;
    }
}

@XmlRootElement(name="RowList")
private static class RowList
{
    @XmlElement(name="RowValues")
    ArrayList<ColumnList> rowList = new ArrayList<SpoolDataSet.ColumnList>();
}

@XmlRootElement(name="ColumnList")
private static class ColumnList 
{
    @XmlElement(name="ColumnValues")
    ArrayList<String> columnList = new ArrayList<String>();
} 
```

我已经为 ArrayList> 完成了此操作，您也可以将字符串更改为对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:39:14.073

我认为，如果您的主要变量是 List，则该列表可能包含本身类型为 ArrayList 的对象。所以你可能不需要把它定义为ArrayList，因为你可以定义和ArrayList一样的结构。

您可以尝试的另一个选择是创建另一个基本上包含列表的类。然后你的主类可能只是一个 ArrayList，然后 YourClass 实际上可以包含它自己的列表。

我还建议为此使用 List 而不是 ArrayList。当我第一次启动 Java 时，我也在使用 ArrayList，但您想使用更通用的 List 接口。ArrayList 和其他类型实现了 List 接口，因此您希望将变量定义为 List 以防其下的类型发生变化。

# html - 如何在html中嵌入excel文件

> ID：12551190
> 
> 赞同：2
> 
> 时间：2012-09-23T09:32:09.940
> 
> 标签：html, excel

我有一个要嵌入到我的 html 网页中的 excel 文件。意思是，我想直接将电子表格作为纯文本显示在我的网页上，其他人可以看到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:42:08.917

怎么样：
通过使用标签，您可以将您的 excel 文件嵌入到网页
中，您也可以更改和添加参数，如以下代码
示例：

```
<object 
width = 900
height = 500
id = 'excel'
classid = 'CLSID:0002E510-0000-0000-C000-000000000046' VIEWASTEXT>
<param name=DisplayTitleBar value=true >
<param name="DataType" value="CSVURL">
<param name="AutoFit" value="0">
<param name="DisplayColHeaders" value="1">
<param name="DisplayGridlines" value="1">
<param name="DisplayHorizontalScrollBar" value="1">
<param name="DisplayRowHeaders" value="1">
<param name="DisplayTitleBar" value="1">
<param name="DisplayToolbar" value="1">
<param name="DisplayVerticalScrollBar" value="1">
<param name="EnableAutoCalculate" value="0">
<param name="EnableEvents" value="0">
<param name="MoveAfterReturn" value="1">
<param name="MoveAfterReturnDirection" value="0">
<param name="RightToLeft" value="0">
</object> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T09:40:47.047

打开该excel文件并将其保存为html...我认为您可以使用那里的代码...如果您还需要在您的网页中进行一些编辑...这会有点困难

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-03T17:54:45.837

您可以通过转到...文件>嵌入>生成，然后将生成的 iframe 标记粘贴到您的 html Web 文件中，从 excel 文件生成嵌入的 iframe 标记。

# php - 通过虚拟主机托管时如何运行 Laravel 应用程序？

> ID：12551191
> 
> 赞同：4
> 
> 时间：2012-09-23T09:32:11.817
> 
> 标签：php, apache, .htaccess, laravel

来自 CodeIgniter，我想学习 Laravel。但是我因为一个（小）问题而头疼了 2 天。

当我浏览到 URL “laravel.app”时，它会显示文件夹内容而不是 Laravel 的索引页。

这些是我的设置：

虚拟主机：

```
<VirtualHost *:80>
 DocumentRoot "/Applications/MAMP/htdocs/laravel/public"
 ServerName laravel.app

 <Directory "/Applications/MAMP/htdocs/laravel/public">
  Options All
  AllowOverride All
 </Directory>
</VirtualHost> 
```

.ht 访问：

```
<IfModule mod_rewrite.c>
 Options +FollowSymLinks
 RewriteEngine On
 Order allow,deny
 Allow from all
</IfModule>

<IfModule mod_rewrite.c>
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

我添加了“命令允许，拒绝”和“全部允许”，否则我得到 404。可能是什么问题？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T09:45:46.520

我会验证 public/index.php 是否存在，然后尝试将此行添加到您的 .htaccess 文件中。

```
DirectoryIndex index.php 
```

您可能还想用“mamp”标记它。希望你找到它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T02:58:35.370

您是否检查了 application/config/application.php 以获取以下条目？

'index' => 'index.php',

除非您有用于 clean_urls 设置的 mod_rewrite

# sqlite - SQLite + ATTACH 数据库 + 创建表

> ID：12551194
> 
> 赞同：0
> 
> 时间：2012-09-23T09:32:31.923
> 
> 标签：sqlite, create-table

在我的应用程序中，我使用 ATTACH DATABASE 来“合并”两个数据库并对其进行处理。它完美地工作。在 2 个数据库文件上的表上的 SELECT / UPDATE / INSERT 没有问题。

我的问题：当我想做 CREATE TABLE 时，如何指定要使用的数据库文件？

```
CREATE TABLE caps (
    id VARCHAR PRIMARY KEY NOT NULL,
    name_en VARCHAR,
    status INTEGER DEFAULT (1)) 
```

编辑：我像这样附加了我的第二个数据库：

```
self.database = [FMDatabase databaseWithPath:DATABASE_READ_SANDBOX_PATH]; 
[self.database executeUpdate:[NSString
    stringWithFormat:@"ATTACH DATABASE '%@' AS db2",
    DATABASE_USER_SANDBOX_PATH]]; 
```

所以第二个数据库有一个名字（`db2`），但是第一个呢？我想在第一个添加表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:50:43.797

[文档](http://www.sqlite.org/lang_attach.html)说：

> *可以使用语法database-name.table-name*来引用附加数据库中的表。
> 数据库名称 ' `main`' 和 ' `temp`' 指的是主数据库和用于临时表的数据库。

因此：

```
CREATE TABLE main.caps(...)
CREATE TABLE db2.caps(...) 
```

# php - 为什么我收到未定义索引的错误我正在使用 jquery ajax

> ID：12551195
> 
> 赞同：0
> 
> 时间：2012-09-23T09:32:44.327
> 
> 标签：php, forms, jquery, modal-dialog

我不知道为什么我会收到未定义索引的错误。我想我正确地将值发送到 php 。或者我在我的代码中遗漏了什么？

这是我使用的 jquery 代码：

```
$(function() {
            $('button').button();
            $('.update-profile-pic').click(function() {
                $('#dialog').dialog({
                    width:350,
                    modal:true,
                    buttons: {
                        'Upload': function() {
                            $.ajax({
                                url: 'upload-image.php',
                                method: 'post',
                                data: { uploadedfile: $('.profile-pic-name').val().trim() },
                                success: function(data) {
                                    $('.new-profile-pic').html(data);
                                }
                            });
                        }
                    }
                });
            });
        }); 
```

这是我的html代码：

```
<button class="update-profile-pic">Update Profile Picture</button>
<div id="dialog">
    <p class="new-profile-pic">
        <!--Image should be here-->
    </p>
    <form enctype="multipart/form-data">
        <input type="hidden" name="MAX_FILE_SIZE" value="100000">
        <input class="profile-pic-name" name="uploadedfile" type="file">
    </form>
<div> 
```

这是我的php代码：

```
 <?php
$target_path = "uploads/";
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo '<img alt="" src="'.$target_path.'">';
} else{
    echo "There was an error uploading the file, please try again!";
}
?> 
```

这是我点击上传后萤火虫控制台的结果：

![在此处输入图像描述](../Images/d0eefbbe8bd76790d6d9a659d197661e.png)

这是示例错误输出：

![在此处输入图像描述](../Images/1753810350048c0e8c379caa4e889022.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:56:59.190

你可以试试以下

```
 success: function(data) {

         $('.new-profile-pic').html(data.uploadedfile);

          } 
```

您是否检查过以下内容与您正在寻找的内容相似

[http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html](http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T09:54:17.477

我可能是错的，但由于您使用的是 Ajax，我认为您的 PHP 代码不会在`$_FILE`全局中查找文件。相反，数据将是`$_POST`全局的（它将是 JSON，因此您必须`json_decode()`首先使用它）。但是，所有将存在的只是文件的名称，而不是实际的文件。您需要`FormData`在 JavaScript 文件中创建一个新对象并将其传递给文件输入的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T10:02:38.323

这不起作用的原因是您无法通过 AJAX 发送文件。您将需要使用插件或隐藏的 iFrame。请参阅[http://ramui.com/articles/ajax-file-upload-using-iframe.html](http://ramui.com/articles/ajax-file-upload-using-iframe.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T10:04:20.887

是的@richoffrails 说文件实际上并未上传到服务器，请检查您的 $_FILES 数组以获取更多信息。

您可以使用这个或许多其他可用于通过互联网上传 ajax 文件

[http://www.uploadify.com/](http://www.uploadify.com/)

# c# - HttpWebRequest 返回的结果与 Web 浏览器不同

> ID：12551196
> 
> 赞同：1
> 
> 时间：2012-09-23T09:32:59.770
> 
> 标签：c#, httpwebrequest, html-agility-pack

我正在尝试抓取网站并获取其页面数据。一切都很顺利，直到我开始获得与视图源中的数据不同的数据（我所期望的数据）。我正在使用 html-agility-pack，但也尝试使用 HttpWebRequest，以更改它的所有标题，但没有运气。由于视图源中的数据，我知道这不是 JavaScript 技巧。我希望有人对可能的解释或解决方案有想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T20:35:55.387

有很多因素可能会影响服务器发送给您的 html。我建议您使用诸如 fiddler 之类的工具来更仔细地检查请求标头。

根据我的经验，此类问题的常见罪魁祸首是 cookie 和会话信息，它们作为隐藏字段存储在文档中，并作为请求正文的一部分随每个请求一起发送。

# php - 如何在codeigniter中有自定义URL？

> ID：12551202
> 
> 赞同：0
> 
> 时间：2012-09-23T09:33:31.237
> 
> 标签：php, codeigniter-2

我想要一个自定义 URL，例如 domainname/#/topic，其中 topic 是任何字符串。

目前我有 domainname/topic ，我通过 routes.php 完成了这个

```
$route['(.*)'] = 'topic/view/$1'; 
```

所以这里调用主题控制器的视图方法。

我想拥有相同的东西，但在 URL 中使用 # 。

我怎样才能做到这一点？

谢谢，阿尼凯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:38:08.683

使用 $route['(:any)'] 允许任何事情。

请注意，CodeIgniter 确实有一些内置的“允许的字符”，因此您可能需要对其进行修改。

要更改允许的字符，我建议在这篇文章中查看解决方案：

[http://codeigniter.com/forums/viewthread/133858/](http://codeigniter.com/forums/viewthread/133858/)

# ruby-on-rails - 带有数据映射器的 Rails 3 嵌套表单

> ID：12551206
> 
> 赞同：0
> 
> 时间：2012-09-23T09:34:35.397
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datamapper

我有两个模型：

```
class MeetingPoint

    include DataMapper::Resource

    belongs_to :profile

    property :id, Serial
    property :lat, String

end 
```

和

```
class Profile

    include DataMapper::Resource
    has n, :meeting_points

    property :id, Serial

    property :distance, Text
    property :created_at, DateTime
    property :updated_at, DateTime

end 
```

现在我创建一个表单来编辑配置文件和 meeting_poing：

```
= form_for @profile do |f| 

    = f.text_field :distance
    = f.fields_for  @profile.meeting_points do |ff|
        = ff.text_field :lat
    = f.submit 
```

但是当我想保存值时，我总是会收到错误：控制器@profile.update（params [：profile]）中的“属性'meeting_point'在配置文件中不可访问”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T11:04:42.970

我认为有一个[插件](https://github.com/snusnu/dm-accepts_nested_attributes/)（dm-accepts_nested_attributes）可以解决这个问题 -

[此处](http://datamapper.lighthouseapp.com/projects/20609/tickets/1308-update-fails-when-supplied-with-nested-attributes)讨论的类似问题和更多详细信息

# drupal - Drupal 用户分层结构与分类，在视图中显示它们

> ID：12551207
> 
> 赞同：1
> 
> 时间：2012-09-23T09:34:44.603
> 
> 标签：drupal, drupal-7, views, taxonomy

我用分类法对我的用户进行了分组。我设法创建了一个显示所有用户的用户视图。现在我添加了可见的过滤器，我打算通过分类术语选择我的用户。这也有效，但我需要显示从该术语及其子项中选择的所有用户。

我的分类结构非常简单：

```
aaa
 -bbb
 -ccc
 -ddd
eee
 -fff 
```

现在假设 John 被标记为`bbb`当我选择时他应该出现`aaa`。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T13:45:19.903

使用[分层选择](http://drupal.org/project/hierarchical_select)模块时，您可以选择保存整个“术语沿袭”，因此在选择 bbb 时，您的用户将被*标记*为*aaa*和*bbb*。之后，您可以在用户视图中使用此“添加”关系。

 *另一种选择是在您的视图过滤器中使用“具有深度的分类术语”并将其设置为大于零的值*

# javascript - 如何格式化并将新数字动态添加到隐藏字段？

> ID：12551208
> 
> 赞同：1
> 
> 时间：2012-09-23T09:35:09.590
> 
> 标签：javascript, jquery

我从服务器到客户端只有纯数字 ID，如何将它动态添加到 html 隐藏字段，使其看起来像数组或 JSON 格式（我的意思是`["32","33","34"]`：），以便在下一步我可以在服务器上接收并解析？隐藏字段在开始时仅包含空白括号`[]`。

我当前的代码覆盖隐藏字段`[]`，例如`"32"`：

```
$("#myHiddenField").val(JSON.stringify(data.result[0].newid)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:41:37.290

您可以使用[$.parseJSON()](http://api.jquery.com/jQuery.parseJSON/)从隐藏的输入值反序列化数组，[push()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)新项目，然后再次序列化数组：

```
var $hiddenField = $("#myHiddenField");
var results = $.parseJSON($hiddenField.val());
results.push(data.result[0].newid);
$hiddenField.val(JSON.stringify(results)); 
```

但是，在添加项目时跟踪数组可能更有效，并且仅在提交表单时对其进行序列化（例如，在[提交](http://api.jquery.com/submit/)事件处理程序中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T09:52:05.190

为了避免必须解析隐藏字段中的数据，您可以保留一个实际数组，将新 id 推送给它，并将其序列化以放入隐藏字段：

```
var myArray = [];

myArray.push(data.result[0].newid);
$("#myHiddenField").val(JSON.stringify(myArray)); 
```

* * *

注意：数字数组的 JSON 形式将是`[32,33,34]`而不是`["32","33","34"]`，这也是您从上面的代码中得到的。如果您想要使用字符串而不是数字的格式，`.toString()`请在推送值之前添加 a：

```
myArray.push(data.result[0].newid.toString()); 
```

# java - 抽象类从实现子类获取参数？

> ID：12551212
> 
> 赞同：0
> 
> 时间：2012-09-23T09:35:40.987
> 
> 标签：java

我想知道是否有办法在不破坏封装的情况下做到这一点，我希望抽象类依赖于实现子类中定义的参数。像这样：

```
public abstract class Parent {

    private int size;
    private List<String> someList;

    public Parent() {
        size = getSize();
        someList = new ArrayList<String>(size);
    }

    public abstract int getSize();

}

public class Child extends Parent {

    @Override
    public int getSize() {
        return 5;
    }

} 
```

这丑吗？有没有更好的办法？也许更重要的是，这甚至是一个好主意吗？

**编辑：**

这些类是在框架的上下文中创建的，因此默认的无参数构造函数始终是被调用的构造函数（实际上，Parent 类扩展了另一个类）。size 参数仅用于说明目的，我不打算将其用于 List 实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T09:42:08.033

不，不丑。这种模式被命名为“模板方法”。但通常，当方法不是简单的 getter 而是实现业务逻辑的东西时，它会更有用。

在您的情况下，其他解决方案是在 Parent 类中定义受保护的构造函数，并使用子类的相关参数调用它：

```
public abstract class Parent {

    private int size;
    private List<String> someList;

    protected Parent(int size) {
        this.size = size;
        someList = new ArrayList<String>(size);
    }

    public int getSize() {
        return size;
    }

}

public class Child extends Parent {
    public Child() {
        super(5);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T09:39:27.440

如果构造函数是您唯一使用的地方`getSize()`，只需将其作为构造函数参数。

但更重要的是，你为什么关心大小？除非您*知道*有问题，否则请像其他人一样使用默认大小：

```
public abstract class Parent {

    private List<String> someList = new ArrayList<String>();

    // use default constructor    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T14:29:06.173

该模式并不难看，除非您尝试在构造函数中使用它。它允许您以一种结果出乎意料的方式修改 Child。

```
public class Child extends Parent {

    private int mySize = 5;

    @Override
    public int getSize() {
        // The -1 is only to help clarify what happens
        return mySize - 1;
    }

} 
```

如果您现在创建 Child 的实例，它实际上会引发异常，因为不允许负容量。您应该意识到，类的属性仅在父构造函数完成后才被初始化。（如果一个属性是使用 Parent 构造函数设置的，并且在 Child 中定义了一个默认值，它会很高兴地覆盖您刚刚在 Parent() 中设置的值）

# architecture - 你能推荐一些关于模块化设计的好书吗？

> ID：12551213
> 
> 赞同：2
> 
> 时间：2012-09-23T09:35:54.600
> 
> 标签：architecture, module, refactoring, modularity

我对java相关的书籍更感兴趣，但一般阅读没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T12:15:15.450

我想说的是，在已经具有良好模块结构的架构中开发比在你不知道应该去哪里并且变得越来越混乱的单片 Blob 中更容易。

此外，可以更轻松地测试小模块。

此外，您可以在定义模块接口时及早发现错误。

# php - 带有php的新闻网站和使用重写规则的链接

> ID：12551215
> 
> 赞同：2
> 
> 时间：2012-09-23T09:36:22.883
> 
> 标签：php, url, url-rewriting

我创建了一个新闻网站，其中所有内容都基于 php 和 mysql。

我注意到在其他网站上，每当您单击新文章时，链接都会打开： `http://www.wired.com/wiredscience/2012/09/space-shuttle-endeavour-lands-in-los-angeles/`

在我的网站中，我有一个名为的页面`viewer.php`，该页面连接到数据库。当您单击我网站中的新闻时，您会在链接栏中看到如下内容： `www.example.com/viewer.php?ne_id=14`

`ne_id`在我的新闻表中为 14 之类的新闻设置特定编号。所有新闻（标题、内容等）都保存在数据库中。

该网站如何运作（wired.com）？我如何创建这样的网站？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T09:39:44.690

如果您使用的是 Apache，您可能需要查看[mod_rewrite 。](http://httpd.apache.org/docs/2.2/rewrite/)或者，如果您使用的是 IIS，您可能需要查看[URL Rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)。

但几乎所有服务器软件都支持这种功能。它通常称为 URL 重写。

希望这可以帮助

# c - C & MinGW：Hello World 给我错误“程序太大而无法放入内存”

> ID：12551216
> 
> 赞同：2
> 
> 时间：2012-09-23T09:36:39.857
> 
> 标签：c, gcc, mingw

我是新来的。这是我的问题：

我在装有 Intel Atom CPU N550、1.50GHz 和 2GB RAM 的 Windows 7 Home Premium 32 位上网本上安装了 MinGW。

现在我创建了一个名为 hello.h 的文件，并尝试通过 CMD 使用以下命令对其进行编译：“gcc c:\workspace\c\helloworld\hello.h -o out.exe”

它编译没有错误，但是当我尝试运行 out.exe 时，它​​给了我以下错误： **“程序太大而无法放入内存”**

我检查过的事情：

*   我已将“C:\MinGW\bin”添加到 Windows PATH 变量中
*   我已经用谷歌搜索了大约一个小时，但是自从我是新手以来，我真的无法弄清楚问题出在哪里。
*   我在我的 64 位机器上编译了相同的代码，编译完美，但由于 64 位 <-> 16 位问题而无法运行。

如果有人能弄清楚问题是什么，我真的很感激。顺便说一句，这是我的 hello.h：

```
#include <stdio.h>

int main(void){
    printf("Hello, World\n");
} 
```

... 而已。感谢您的回复。干杯，鲍里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T12:38:48.927

只需将您的文件重命名为 hello.c

.h 文件是 C 编程中的标头，您应该在其中放入一些诸如签名之类的内容，并且方法的主体应该在 .c 文件中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-12T01:11:18.683

默认情况下，带有扩展名的文件被 GCC`.h`视为*头文件。*通常，头文件不应该直接提供给编译器。它们应该被`#include`放入实现文件中。

然而，当 GCC 看到一个头文件被直接提供给它时​​，它实现了一个特殊的功能。在命令行中指定文件会使 GCC 将其解释为为该文件`.h`生成*预编译头文件*`.h`的请求。通过使用一个`-o`选项，您强制编译器为生成的预编译头文件指定一个特定名称`out.exe`。

然而，生成的文件不是可执行文件，它是预编译的头文件。您可以在十六进制编辑器中打开它并看到它以 开头`gpch`，这是 GCC 的预编译器标头签名。任何“执行”该文件的尝试都将导致毫无意义的结果。（这基本上就像尝试将一个完全随机的文件重命名为`.exe`扩展名，然后“运行”它。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-06T16:43:22.647

为了解决这个问题，您必须将**C:\TDM-GCC-32\bin**添加到**%PATH%**变量中。
对我来说它在 E: 所以它将是：**E:\TDM-GCC-32\bin**

步骤：
**1\. 复制 TDM-GCC\bin 文件夹的路径**
[![在此处输入图像描述](../Images/d016754c32f8ef5caf2240f325f9cd50.png)](https://i.stack.imgur.com/WtX4n.png)

**2.打开电脑属性**
[![在此处输入图像描述](../Images/71830d5603b4e2099ef4e8105535ba1e.png)](https://i.stack.imgur.com/XljK2.png)

**3\. 导航到高级**
[![](../Images/fbfe58a72d8972039c906967caba8eec.png)](https://i.stack.imgur.com/ytLz8.png)

**4.点击环境变量按钮**
[![在此处输入图像描述](../Images/a44d1c925372aa81df03cd733534f31e.png)](https://i.stack.imgur.com/KCJUg.png)

**5\. 选择变量 PATH 并点击 Edit 按钮**
[![在此处输入图像描述](../Images/840ff68612ec64a79c3d4760749d4056.png)](https://i.stack.imgur.com/vH2J2.png)

**6\. 在末尾附加复制的 TDM-GCC 路径。不要忘记分号。**
[![在此处输入图像描述](../Images/9054e98cd7ab07b86cef3d00c79c3335.png)](https://i.stack.imgur.com/2T9Fw.png)

完成所有这些步骤后，点击 Ok、Ok、Apply、Ok。你准备好了！

这是命令提示符中的结果：
[![在此处输入图像描述](../Images/eec14975819dffa0bcc0e158e353a7b3.png)](https://i.stack.imgur.com/qSs9A.png)

# python - Python中数字向量或数字列表的平均值

> ID：12551217
> 
> 赞同：3
> 
> 时间：2012-09-23T09:36:41.733
> 
> 标签：python, function, average

我是 Python 新手，所以请耐心等待我的幼稚问题。

我想编写一个函数，它接受一个数字向量并计算它们的平均值。所以我写了一个小函数

```
def my_mean(*args):
    if len(args) == 0:
        return None
    else:
        total = sum(args)
        ave = 1.0 * total / len(args)
        return ave

my_mean(1, 2, 3)
2.0 
```

但如果参数是数字列表，此函数将不起作用。例如，

```
my_mean([1, 2, 3])
Traceback (most recent call last):
  File "/usr/lib/wingide-101-4.1/src/debug/tserver/_sandbox.py", line 1, in <module>
    # Used internally for debug sandbox under external interpreter
  File "/usr/lib/wingide-101-4.1/src/debug/tserver/_sandbox.py", line 21, in my_mean
TypeError: unsupported operand type(s) for +: 'int' and 'list' 
```

我知道`NumPy`有一个函数`numpy.mean`，它接受一个列表作为参数，而不是一个数字向量`my_mean`。

我想知道是否有办法`my_mean`在这两种情况下都可以工作？所以：

```
my_mean(1, 2, 3)
2.0
my_mean([1, 2, 3])
2.0 
```

只是喜欢`min`还是`max`功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T09:39:45.457

您可以使用以下`*arg`语法传入您的列表：

```
my_mean(*[1, 2, 3]) 
```

或者，您可以检测传入的第一个参数是否是一个序列并使用它而不是整个`args`元组：

```
import collections

def my_mean(*args):
    if not args:
        return None
    if len(args) == 1 and isinstance(args[0], collections.Container):
        args = args[0]
    total = sum(args)
    ave = 1.0 * total / len(args)
    return ave 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T09:42:10.633

为什么不以 Tuple 的形式传递你的列表呢？利用`func(*[1, 2, 3])`

# javascript - 如何让 Phantomjs 在 Windows 上执行 js 文件

> ID：12551218
> 
> 赞同：2
> 
> 时间：2012-09-23T09:36:41.863
> 
> 标签：javascript, phantomjs

我刚刚执行了 phantomjs.exe 和一个命令行窗口弹出窗口。如何执行 ./examples/ 下的 .js 文件？如果只输入文件名“version.js”，我会收到错误消息 - “找不到变量：版本”。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-23T09:44:03.987

打开命令窗口 - 这可以通过按住 SHIFT + 鼠标右键单击来完成，这里可以选择打开命令窗口...

然后，您可以从命令行调用 phantomjs.exe

```
 $ path/to/phantomjs.exe path/to/version.js 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-21T05:02:48.870

您还可以创建 windows 环境路径变量

添加**path/to/phantomjs.exe** 作为环境变量，名称为**phantomjs**

然后从命令行你可以调用 phantomjs

```
$ phantomjs path/to/version.js 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-08T11:57:28.363

一个更好的答案（我认为）是：将包含 phantomjs.exe 的文件夹的路径添加到 Windows 上的 PATH 环境变量:)。

# c - ZLIB 压缩

> ID：12551219
> 
> 赞同：0
> 
> 时间：2012-09-23T09:37:29.960
> 
> 标签：c, compression, zlib

我正在做一个项目，如果我的磁盘出现问题，我会在使用 ZLIB 压缩后将大块内存发送到另一个磁盘。这个转储然后我打算下载并用于进一步调试。这种压缩和上传将一次完成一个块 - 比如说 1024 K。

问题是在我将它上传到另一个磁盘之前，我需要有正好 1024K 的输出块（除此之外还有标题和拖尾，所以这个块大小是压缩数据的大小），然后我可以轻松解压缩它们并使用它。我尝试更改 put_byte 函数，以便一旦输出缓冲区为 1024K，我可以将其发送到另一个磁盘，但这似乎不起作用。

我曾想过检查 Z_BUF_ERROR，然后将其发送过来并重新启动整个压缩过程，但是我不确定是否所有待处理的输入/输出都已刷新。

有没有其他方法可以做到这一点 - 即确保在输出缓冲区（压缩数据大小）正好有 1024K 字节时发送数据包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-14T06:05:51.137

[使用 C++ http://github.com/rudi-cilibrasi/zlibcomplete](http://github.com/rudi-cilibrasi/zlibcomplete) ZLibComplete 库之类的高级外观库可能会更好。它使用 std::string 并且不需要动态分配，因此您不需要自己管理任何缓冲区，只需放入 std::string 并写出返回的 std::string 您也不需要检查任何返回值或你需要有条件地循环吗？它只是在字符串方面工作：只要你喜欢压缩或解压缩，放入一个字符串，取出一个字符串。对于常见的压缩格式 GZip 和 ZLib，您可以从简短的工作示例程序开始。

# netcdf - 使用 Godiva 查看器的 THREDDS 服务器

> ID：12551222
> 
> 赞同：2
> 
> 时间：2012-09-23T09:38:01.403
> 
> 标签：netcdf, thredds

任何人都知道我如何配置 Godiva 查看器以获得特定的调色板和特定的值范围？

[这](http://thredds.met.no/thredds/godiva2/godiva2.html?server=http://thredds.met.no/thredds/wms/eumetgrid/met.no/eobs-gridded-data/eobs-gridded-data_0.25deg-reg-v3.0-2009-10-12.nc)是一个示例，其中调色板是默认设置，但值的范围会根据显示的文件进行更新。

[wiki](http://www.resc.rdg.ac.uk/trac/ncWMS/wiki/CustomizingGodivaTwo)仅显示如何添加新调色板。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T11:07:43.580

在 Godiva2 中，您可以单击颜色栏并从 WMS 服务器提供的选项列表中选择不同的颜色图，还可以选择所需的颜色数量。

默认查询如下所示： [http ://thredds.met.no/thredds/wms/eumetgrid/met.no/eobs-gridded-data/eobs-gridded-data_0.25deg-reg-v3.0-2009-10 -12.nc?LAYERS=tg&ELEVATION=0&TIME=2009-10-12T00:00:00.000Z&TRANSPARENT=true&STYLES=boxfill/rainbow&CRS=EPSG:4326&COLORSCALERANGE=-50.0,50.0&NUMCOLORBANDS=20&LOGSCALE=false&SERVICE=WMS&VERSION=1.3.0&REQUEST XML&FORMAT=image/png&BBOX=-6.375,25.75,51.5,83.625&WIDTH=256&HEIGHT=256](http://thredds.met.no/thredds/wms/eumetgrid/met.no/eobs-gridded-data/eobs-gridded-data_0.25deg-reg-v3.0-2009-10-12.nc?LAYERS=tg&ELEVATION=0&TIME=2009-10-12T00:00:00.000Z&TRANSPARENT=true&STYLES=boxfill/rainbow&CRS=EPSG:4326&COLORSCALERANGE=-50.0,50.0&NUMCOLORBANDS=20&LOGSCALE=false&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&EXCEPTIONS=XML&FORMAT=image/png&BBOX=-6.375,25.75,51.5,83.625&WIDTH=256&HEIGHT=256) 产生：![地图1](../Images/7235c8e2e8f41d59e8e50076212bccb9.png)

但是使用“redblue”颜色图将颜色数量从 20 增加到 64，并将颜色范围从 -10 更改为 30，如下所示： [http ://thredds.met.no/thredds/wms/eumetgrid/met.no /eobs-gridded-data/eobs-gridded-data_0.25deg-reg-v3.0-2009-10-12.nc?LAYERS=tg&ELEVATION=0&TIME=2009-10-12T00%3A00%3A00.000Z&TRANSPARENT=true&STYLES=boxfill %2Fredblue&CRS=EPSG%3A4326&COLORSCALERANGE=-10%2C30&NUMCOLORBANDS=50&LOGSCALE=false&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&EXCEPTIONS=XML&FORMAT=image%2Fpng&BBOX=-6.375,25.75,51.5,83.625&256HT=](http://thredds.met.no/thredds/wms/eumetgrid/met.no/eobs-gridded-data/eobs-gridded-data_0.25deg-reg-v3.0-2009-10-12.nc?LAYERS=tg&ELEVATION=0&TIME=2009-10-12T00%3A00%3A00.000Z&TRANSPARENT=true&STYLES=boxfill%2Fredblue&CRS=EPSG%3A4326&COLORSCALERANGE=-10%2C30&NUMCOLORBANDS=50&LOGSCALE=false&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&EXCEPTIONS=XML&FORMAT=image%2Fpng&BBOX=-6.375,25.75,51.5,83.625&WIDTH=256&HEIGHT=256) 2![地图2](../Images/2027d44067d8412ee4847be65fdac28c.png)

如果您对可用的颜色图选项不满意，您需要联系 WMS 服务提供商，并要求他们添加您最喜欢的颜色图作为选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T15:42:42.673

我不确定我是否理解您的问题，但不同变量的调色板和默认范围是在 ncWMS 端配置的，而不是在 godiva2 端配置的。也许您可以详细解释一下您要做什么？

# c# - TagLibSharp 和 MP4 文件

> ID：12551232
> 
> 赞同：4
> 
> 时间：2012-09-23T09:38:48.207
> 
> 标签：c#, properties, media, taglib-sharp

我正在使用 TagLib# v2.1.0，它确实显示了命名空间 TagLib.MPeg 和 TagLib.MPeg4，但我处理的 .MP4 文件始终出现此错误 -

“框头指定了 {0} 字节的大小，但文件中只剩下 {1} 个字节”（并且捕获了 TagLib.CorruptFileException）

.WMV 文件没有问题。

我从 taglib# 源代码中怀疑 MPeg 命名空间不完整，仅针对 Apple（？）。

我已经求助于使用 Windows API CodePack 来读取属性（并且 API 可能允许编写足够多的属性）。

如果对有人建议我如何使用 TagLib# 有帮助，我可以为我使用的 MP4 文件发布一些 MediaInfo 输出（它们已使用 rtmpdump、Adobe Flash 视频、AVC 视频编解码器、YUV 颜色空间...）

# javascript - 在javascript中从类中调用worker

> ID：12551233
> 
> 赞同：1
> 
> 时间：2012-09-23T09:38:49.560
> 
> 标签：javascript, class, function, object, worker

在我的游戏中，我有一个角色类：

```
var NPC = function(isometry,timer,canvas,tile,tileMap,scrollPosition,
grid,spritesheet, r1, c1, currentHero, hh, hw,index) {

this.index = index;   
....
NPC.prototype.w = new Worker('astar.js');

this.w.onmessage = function(e) {

//process worker results, 'index' is strongly needed
// e is data from worker
//it draws path for the character on the common tileMap:

tileMap[e.data[i].x][e.data[i].y] = index;
} 
```

然后在主程序中创建该类的两个对象：

```
var protagonist = new NPC(.....,0);
var char1 = new NPC(.....,10); 
```

问题是他们用相同的索引= 10绘制路径。我试过：

1.  改为使用 this.index，但它在 this.w.onmessage 中变为未定义
2.  称之为“NPC.prototype.w.onmessage = function(e) {”——同样的故事
3.  声明单独的函数：

    `NPC.prototype.wonmessage=function(e) {....}` `this.w.onmessage = this.wonmessage();`

`Error: "e is undefined".`

我应该怎么做才能将所有数据正确发送到函数？

# html - 如何删除字段集图例下方的空格

> ID：12551234
> 
> 赞同：1
> 
> 时间：2012-09-23T09:38:56.407
> 
> 标签：html, css

我在里面使用一张桌子`fieldset`，图例下方有一个间隙，我想将其删除。我尝试使用`padding:0px`and`margin:0px`和`fieldset`图例内联样式。但没有一个奏效。请帮我一些建议。

谢谢！

编辑：

由于我使用的是选择菜单，因此代码非常庞大。但这里是代码的概述。

```
<fieldset>
          <legend><b>Options</b></legend>
          <table>
            <tr>
              <td colspan="1"><label>Passengers:&nbsp; </label></td></tr></table>    
</fieldset> 
```

边距和填充适用于字段集，但对图例没有任何作用。有什么办法可以消除传说产生的差距？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:54:18.217

根据[Eric Meyer 的 reset](http://meyerweb.com/eric/tools/css/reset/)，`margin:0;`并且`padding:0;`在 fieldset 和 legend 上都应该完成这项工作。

[在小提琴中测试您的代码](http://jsfiddle.net/gionaf/hxFQg/)实际上可以工作，因此可能导致此问题的其他几件事是：

1.  表格上设置的填充/边距/td
2.  标签的行高/td

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T17:31:26.027

默认呈现可能包括旨在使文档外观清晰的填充。默认值因浏览器而异，但它们可能包括 和 上的垂直填充，`fieldset`并且`legend`几乎可以肯定包括`td`元素上的垂直填充。要删除此类填充，您可以设置：

```
legend { 
  padding-top: 0;
  padding-bottom: 0;
}
fieldset, td { 
  padding-top: 0;
} 
```

但是默认情况下，表格单元格之间也有间距，这意味着即使在单单元格表格中，单元格周围也会有一些间距。跨浏览器的删除方法是：

```
table {
  border-collapse: collapse;
} 
```

添加它会删除IE 和 Chrome 上的图例和单元格内容之间的间距（您可以通过在`legend`和元素上设置背景颜色来看到这一点）。`label`在 Firefox 上，一个像素的差距似乎仍然存在，没有明显的解释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-16T11:55:15.883

要删除标签下方的空间，请使用 margin-top: -ve px;

就像：

`<fieldset> <legend><b>Options</b></legend> <table style="margin-top:-13px;"> <tr> <td colspan="1"><label>Passengers:&nbsp; </label></td></tr></table>
</fieldset>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-02T21:40:25.227

字段集和图例的浏览器格式在浏览器之间差异很大，但无论如何都是一团糟。

如果您的开始字段集标记和第一个标记之间有任何空格，firefox 将添加 BREAKS。传奇也一样。

绕过 itis 的最简单方法是删除标签之间的所有空格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-28T14:57:57.537

我也只是在与此作斗争，以便在字段集中使用绝对定位时在浏览器之间获得相同的行为。

我发现将 a 添加`legend`到 a时会发生`fieldset`Chrome 和 IE 会将字段集的顶部边框向下移动到文本的中间，但包含的元素仍然相对于字段集的原始顶部定位。但 Firefox 也会将包含的元素的顶部移动到图例下方。FF 还将在图例文本本身的上方和下方留出空间。

我终于能够通过添加这个 CSS 来克服它：

```
legend {
   line-height: 0;
} 
```

然后在不移动顶部边框的情况下添加图例，并且在 Chrome、IE 和 FF 中的位置相同。

# .htaccess - htaccess：如果不在本地主机上，则强制使用 https 和 www

> ID：12551235
> 
> 赞同：7
> 
> 时间：2012-09-23T09:39:00.403
> 
> 标签：.htaccess, mod-rewrite

我在我的本地主机上工作，所以我的 mod_rewrite 规则中需要这个例外。目前，当不在本地主机上时，我可以使用以下命令强制“www”：

```
# Force www, if not in localhost
RewriteCond %{HTTP_HOST} !=localhost
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

现在，我还想强制使用 https（我的整个网站都在 https 下）。如何将此添加到我的 htaccess 中？

我试着让我的 htaccess 像这样，但这也在我的本地主机上强制 https：

```
# Force https, if not in localhost
RewriteCond %{HTTP_HOST} !=localhost    
RewriteCond %{HTTPS} !=on
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# Force www, if not in localhost
RewriteCond %{HTTP_HOST} !=localhost
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

**更新 1：** 我想我需要删除第一个`[R=301,L]`.

**更新2：** 如果我有这样的URL：，`https://scripts.domain.com`我不希望它变成：`https://www.scripts.domain.com`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T01:25:59.667

在最后一条规则上方添加这一行：

```
RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]{3}$ 
```

# iphone - 使用 UITabBar 在 iOS 6 中自动旋转单个 UIViewController

> ID：12551247
> 
> 赞同：25
> 
> 时间：2012-09-23T09:40:51.853
> 
> 标签：iphone, uiviewcontroller, ios6, landscape-portrait

我有一个只能在 中工作的应用程序`Portrait Mode`，但是有一个可以显示视频的 singleView，所以我希望该视图也可以在 中工作`landscape mode`，但是在 iOS 6 中我不知道该怎么做，现在我有了这个：

在 AppDelegate.mi 中有：

```
self.window.rootViewController = myTabBar; 
```

然后在项目摘要中：

![在此处输入图像描述](../Images/dcda170505a97baefc2912547fd07109.png)

我发现在 iOS 6 中要检测视图旋转我必须这样做：

```
- (NSUInteger)supportedInterfaceOrientations {
return UIInterfaceOrientationMaskAll;
}

// Tell the system It should autorotate
- (BOOL) shouldAutorotate {
return YES;
} 
```

所以我只在我想在横向中使用的代码中插入上面的代码`UIViewController`，但是不起作用，有人知道我该怎么做吗？我只想在显示视频时自动旋转。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-23T10:57:38.573

首先，您的目标设置应如下所示： ![支持的接口方向](../Images/1ee72b014a5998f551b795ea0cc5d05c.png)

在 UITabBarController 中：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // You do not need this method if you are not supporting earlier iOS Versions
    return [self.selectedViewController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}

-(NSUInteger)supportedInterfaceOrientations
{
    if (self.selectedViewController) 
        return [self.selectedViewController supportedInterfaceOrientations];

    return UIInterfaceOrientationMaskPortrait;
}

-(BOOL)shouldAutorotate
{
    return YES;
} 
```

在你的 ViewController 里面：

a) 如果您不想旋转：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (BOOL)shouldAutorotate
{
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

b）如果你想旋转到横向：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

**编辑：**

其他解决方案是在 AppDelegate 中实现此方法：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    NSUInteger orientations = UIInterfaceOrientationMaskAll;

    if (self.window.rootViewController) {
        UIViewController* presented = [[(UINavigationController *)self.window.rootViewController viewControllers] lastObject];
        orientations = [presented supportedInterfaceOrientations];
    }
    return orientations; 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T20:29:10.173

我会写评论，但我不能，所以我将其发布为答案。

这是我的场景：

我的应用程序仅支持在某些视图上更改方向，我不知道如何仅针对我想要的视图进行更改，然后我遇到了这个问题并看到了 mientus 的回答（谢谢）然后我继续做了什么他建议哪个是子类 UITabBarController 并覆盖这些方法：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{

    NSLog(@"AUTO ROTATE IN CUSTOM TAB BAR");
    // You do not need this method if you are not supporting earlier iOS Versions
    return [self.selectedViewController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}

-(NSUInteger)supportedInterfaceOrientations{

    NSLog(@"supportedInterfaceOrientations IN CUSTOM TAB BAR");

    if (self.selectedViewController)
        return [self.selectedViewController supportedInterfaceOrientations];

    return UIInterfaceOrientationMaskPortrait;
}

-(BOOL)shouldAutorotate{

    NSLog(@"shouldAutorotate IN CUSTOM TAB BAR");
    return [self.selectedViewController shouldAutorotate];
} 
```

然后在每个视图控制器中，我将有方法来指示我是否想要旋转。UITabBarController 中的方法被调用，但不是我的视图控制器中的方法，因此旋转仍在我不想发生的地方发生。然后我继承 UINavigationController 并覆盖相同的方法，仅在 supportedInterfaceOrientation 上进行此更改，如下所示：

```
- (NSUInteger)supportedInterfaceOrientations{

NSLog(@"supportedInterfaceOrientations IN CUSTOM NAV BAR CALLING CURRENT VIEW CONTROLLER");
UIViewController* presented = [[self viewControllers] lastObject];
return [presented supportedInterfaceOrientations]; 
```

}

这基本上是做什么的，它获取当前视图控制器，然后询问支持的方向，瞧，我的视图控制器中的方法被调用，我可以在我想要的地方处理方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T10:48:35.900

您要旋转的视图是仅纵向视图的子视图吗？通常视图旋转行为继承自 rootviewcontroller。然后，如果您在 rootviewcontroller 中的 shouldAutorotate 中返回 NO，您将停止每个下视图中的旋转。

我建议以这种方式拆分您的架构：

**rootViewController -> supportedInterfaceOrientations = Portrait & shouldAutorotate = YES NORotationViewControllers -> supportedInterfaceOrientations = Portrait & shouldAutorotate = YES rotationViewControllers -> supportedInterfaceOrientations = All & shouldAutorotate = YES**

如果您还没有阅读此内容，请查看： [Supporting Multiple Interface Orientations](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html)

# c - 使用 sed 删除 C/C++ 文件中的函数体

> ID：12551249
> 
> 赞同：3
> 
> 时间：2012-09-23T09:40:59.543
> 
> 标签：c, linux, sed

我正在尝试从源文件中创建一个包含所有函数/枚举/结构/等名称的文件。为此，我目前正在尝试使用`sed`来完成这样的事情：

（原始文件）

```
function add1 (int i) {
    return i+1;
} 
```

（sed的输出）

```
function add1 (int i) {
} 
```

换句话说，我想删除函数体的实际内容。到目前为止，我无法让它工作。有什么建议么？

**编辑**：我尝试了这样的事情，但没有成功（现在我试图只使函数主体上的行为空白）：

```
sed '/{/,/}/ s/.*//' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T09:50:06.977

在格式一致的文件上，您可以执行类似的操作

```
sed '/{$/ {:r;/\n}/!{N;br}; s/\n.*\n/\n/}' 
```

一次读取函数体并删除大括号之间的所有内容：

```
$ echo 'function add1 (int i) {
    if (i == 1) {return i+1;}
}' | sed '/{$/ {:r;/\n}/!{N;br}; s/\n.*\n/\n/}'
function add1 (int i) {
} 
```

该命令仅适用于以 a 开头并`{`直接`}`在换行符之后以 a 结尾的块。

在该`:r;/\n}/!{N;br}`部分中`:r`定义了一个名为的[*标签*](http://www.grymoire.com/Unix/Sed.html#uh-58)`r`，其中另一行从输入 ( ) 附加到模式空间`N`，然后执行流程`r`再次进入 ( `br`) 的开头。它只会发生直到`\n}`遇到。所以当我们跳出那个“循环”时，我们在模式空间中有整个函数体，然后我们应用`s`命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T11:19:24.253

代替`sed`，您总是可以`awk`在每字符字段模式 ( `FS=""`) 中使用：

```
awk 'BEGIN {
         RS = "\n" ;
         FS = "" ;
         d = 0 ;
     }

     {
         for (i=1; i<=NF; i++)
             if ($i == "{") {
                 d++ ;
                 if (d == 1) printf "{\n"
             } else
             if ($i == "}") {
                 d-- ;
                 if (d == 0) printf "}"
             } else
             if (d == 0)
                 printf "%s", $i ;
         if (d == 0) printf "\n"
     }' INPUT-FILE(s)... 
```

以上将跳过任何成对的花括号的内容，即函数和结构体、数组初始化等，并将结果输出到标准输出。您可以指定一个或多个文件。（如果您不指定任何文件，它将期望来自标准输入的输入。）

就像现在一样，它会对引号或注释中的大括号感到困惑。这可以以相同的方式修复，但它确实很快变得相当复杂。这只是一个让你大部分时间的技巧。

我添加了分号 ( `;`)，因此您可以将上述代码段中的所有内容都填入一个长命令行中。

脚本的逻辑非常简单。它使用空字段分隔符 ( `FS`)，因此输入中的每个字符都是它们自己的字段。该`BEGIN`规则在处理任何输入之前运行一次，并设置它。对于开发人员信息，我也进行了初始化，`d = 0`尽管 awk 没有必要，因为它假定未初始化的变量为空或适当的零。它将跟踪每个输入字符的当前大括号深度。

第二个大括号表达式将每条记录执行一次。由于我设置`RS = "\n"`了，每一行都是一个单独的表达式。因此，它将在每个输入行执行一次。由于`FS = ""`，该行上的每个字符将是一个单独的字段。记录中有`NF`字段：`$1`, `$2`, .., `$(NF-1)`, 和`$NF`. 由三部分组成的 if 子句仅输出最外面的大括号，以及不在大括号内的所有内容（即 when `d == 0`）。

可以扩展此`awk`scriptlet 以包含注释、字符串、字符常量（用于`\047`引用单引号，除非您使用 将脚本放入单独的文件中`#!/usr/bin/awk -f`），并处理或忽略预处理器宏。

它确实有点复杂，你最终会得到几百行 awk 脚本，但它应该非常可靠且相当快。之所以可能，是因为在这种特殊情况下，C 中的标记化规则很容易遵循；我个人会在所有其他用例中使用成熟的 C 词法分析器（词法分析器或扫描器）。可能也是为了这个。

如果你想使用成熟的 C 词法分析器，网上有很多免费的，但你必须使用更高级的语言，如 C 或 C++。如果您希望处理所有极端情况，它也需要合并一个 C/C++ 预处理器，但这些规则很容易（即使使用 awk）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T09:59:26.057

我首先建议确保您的 C 源文件正确缩进。你可以用`indent -gnu`它。

然后你可以使用一些`sed`技巧。使用正确缩进的代码，您只需要关心大括号（打开或关闭）作为其行的第一个字符。

我不确定你为什么要这样做。特别是，`struct`可以并且有时确实是嵌套的。还有一些病态的情况——例如预处理器宏用大括号定义东西等。

更好的方法可能是对编译器内部进行操作（但是您必须处理来自`#include`-d 标头的内容）。您可以为此目的使用[MELT](http://gcc-melt.org/)（MELT 是一种用于扩展 GCC 的高级域特定语言，并且正在研究 GCC 内部）。

# javascript - 使用 IN 查询问题的 where 子句

> ID：12551259
> 
> 赞同：1
> 
> 时间：2012-09-23T09:42:14.177
> 
> 标签：javascript, html, google-maps-api-3, google-fusion-tables

我正在尝试实现复选框以打开和关闭 ServiceType 列中的服务“类型”。我在这里使用这个例子作为指导，但我没有在地图上显示任何点。我相信在为复选框生成 where 子句时会出现问题。我在这里使用这个例子：[https](https://developers.google.com/fusiontables/docs/samples/in) ://developers.google.com/fusiontables/docs/samples/in ，但我完全糊涂了，根本不知道他们在众多列中查询的列名是什么我知道一些商店的偏差是数组和其他变量。

这是我的 where 子句（冒着让自己尴尬的风险）：

```
function generateWhere() {
    var filter = [];
    var serviceTypes = document.getElementsByName('ServiceType');
    for (var i = 0, serviceType; serviceType1 = serviceTypes[i]; i++) {
      if (serviceType1.checked) {
        var serviceType2 = serviceType1.value.replace(/'/g, '\\\'');
        filter.push("'" + serviceType2 + "'");
      }
    }
    var where = '';
    if (filter.length) {
      where = "'ServiceType' IN (" + filter.join(',') + ')';
    }
    return where;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T23:35:04.690

来自： [https ://groups.google.com/group/fusion-tables-users-group/browse_frm/thread/944b0dce33f18056#](https://groups.google.com/group/fusion-tables-users-group/browse_frm/thread/944b0dce33f18056#)

您的“checkboxes.html”中有错字（或错误）这一行：

```
var serviceTypes = document.getElementsByName('ServiceType'); 
```

有：

```
var serviceTypes = document.getElementsByName('ServiceType1'); 
```

以及不存在的复选框的所有其他侦听器都会破坏。当我将其更改回您发布的代码时，它对我有用：

[http://www.geocodezip.com//Figueroa_Johnathan_checkboxes.html](http://www.geocodezip.com//Figueroa_Johnathan_checkboxes.html)

# java - 无法使用 sax 解析器解析标签

> ID：12551260
> 
> 赞同：1
> 
> 时间：2012-09-23T09:42:16.313
> 
> 标签：java, sax, saxparser

以下是我的xml：

```
 <Body>
  <tag1 xmlns=""> <innerTag></innerTag> </tag1>
  </Body> 
```

问题是我无法得到里面的字符串`<tag1></tag1>`，也就是说 **`<innerTag></innerTag>`**。以下是我的逻辑：

```
public void startElement(final String uri, final String localName,
            final String qName, final Attributes attributes)
            throws SAXException {
        if ("tag1".equalsIgnoreCase(qName)){
            inTag1 = true;
            System.out.println("start");
        }
}

public void endElement(final String uri, final String localName,
            final String qName) throws SAXException {
        if ("tag1".equalsIgnoreCase(qName)) {
            System.out.println("end");
            inTag1 = false;
        }
}

public void characters(final char[] ch, final int start, final int length) {

        if (inTag1) {
            System.out.println("@@@" + new String(ch, start, length));
        }
    }
} 
```

但它给了我空的输出。任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:21:56.500

在您对 UVM 的回答的评论中，您写道

> 其实inner tag就是这个xml里面的一种xml。所以我想要一个整体

没有办法告诉 SAX 解析器不处理元素内的所有 XML 并将整个内容作为字符串返回。本质上，您有两个选择：

*   通过监听所有 SAX 事件并自己构建 XML 字符串来重构 XML 字符串，或者
*   如果您可以控制要解析的 XML 文档，请将它们的格式更改为类似

    ```
    <Body>
      <tag1 xmlns=""><![CDATA[ <innerTag></innerTag> ]]></tag1>
    </Body> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T10:06:27.203

您需要`"innerTag"`检查`"tag1"`

```
if ("innerTag".equalsIgnoreCase(qName)){
            inTag1 = true;
            System.out.println("start");
        } 
```

基本上你的 innerTag 是 tag1 的一个子元素。所以 SAX 解析器继续解析，因为它直到一个有效的 XML 元素。

# java - 通过对象数组调用构造函数

> ID：12551261
> 
> 赞同：1
> 
> 时间：2012-09-23T09:42:19.110
> 
> 标签：java, constructor, calling-convention

```
class A
{
  static int i;
  A()
  {
    System.out.println(++i);
  }
  public static void main(String h[])
  {
    A obj[] = new A[30]; 
  }
} 
```

> 一个 obj[30] = 新的 A[30]; :- 这一行应该调用默认构造函数 30 次？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-23T09:44:33.597

线

```
A obj[30] = new A[30]; 
```

不调用构造函数`A`。它创建了 30 个未实例化的引用`A`；

要实例化 30 个对象引用，您可以使用：

```
A obj[] = { new A(), new A(), ..28 more ->
}; 
```

考虑到元素的数量，或者在这种情况下更好：

```
for (int i=0; i < obj.length; i++) {
   obj[i] = new A();
} 
```

注意，`30`数组大小声明中的第一次使用是非法的。

```
A obj[30] = new A[30];
      ^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T09:45:09.453

不，这一行根本不调用构造函数。它只是创建了 30 个元素的长数组类型`A`。数组的每个元素都是`null`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T14:48:29.373

没有办法完全按照您的意愿去做，但这里有两件事非常接近，都调用了默认构造函数 30 次：

```
A *obj = new A[30]; 
```

或者

```
A obj[30]; 
```

第一个答案将在堆上创建一个包含 30 个 A 对象的数组，并为每个对象调用默认构造函数。obj 可以传回给这个函数的调用者，因为它不在堆栈上。问题是，obj 不再具有 A[30] 的类型，因此 sizeof(obj) 将与原始问题中的代码不同。（请注意，obj 必须使用“delete []”，而不仅仅是“delete”。）

第二个答案将在堆栈上创建一个包含 30 个 A 对象的数组。现在编译器将理解 obj 有 30 个元素，并且 sizeof(obj) 将与您的问题相同。但是，obj 只能在这个函数（或它调用的函数）中使用，因为一旦函数返回，它将从堆栈中消除，在此过程中调用 30 个析构函数。（它只是一个局部变量。）

对于 C++（或任何好的面向对象语言），创建对象总是意味着分配空间和调用构造函数。否则，你真的没有一个有用的对象。因此，当以任何受支持的方式（局部变量或 C++ 的“新”）创建对象时，它总是为您创建并现在可以访问的每个对象调用默认构造函数。（请注意，如果没有默认构造函数，那么两个答案都不会编译！）

# android - 相对于其他视图定位 toast

> ID：12551267
> 
> 赞同：1
> 
> 时间：2012-09-23T09:44:15.027
> 
> 标签：android, position, toast

我需要实现一个自定义 Toast，它的位置会根据屏幕上的其他视图而变化。基本上我正在寻找的是烤面包的 layout_alignBelow 选项......

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T10:01:58.880

首先，您需要计算屏幕上相对于您的预期*x 轴*和*y 轴。*然后，创建一个自定义 Toast 并将轴信息传递给它：`Toast``Views`

```
int x, y;  //needs to be calculated

Toast t = Toast.makeText(getApplicationContext(), "your message",
          Toast.LENGTH_LONG);  
t.setGravity(Gravity.TOP|Gravity.LEFT, x, y);
t.show(); 
```

有关更多信息，请阅读[此](http://developer.android.com/guide/topics/ui/notifiers/toasts.html#Positioning)信息。

# algorithm - 代表的递增层次结构

> ID：12551269
> 
> 赞同：0
> 
> 时间：2012-09-23T09:44:20.630
> 
> 标签：algorithm, tree, cluster-analysis, hierarchical-clustering

我有一个遵循这个方案的增量聚类算法：

```
Let x a new data-point, and c the centroid that is closest from x
if( distance(x, c) > threshold )
   x becomes a new cluster center (i.e. a new centroid)
else assign x to c (i.e. update the centroid by taking x) 
```

为了加快从 x 搜索最近的中心，我想要一个中心的层次结构（使用树），我们可以在每次考虑新数据点时增量更新。

树的每个内部节点都表示为该节点下质心的平均值。当更新一个给定的质心时（因为一个新的数据点被分配给这个质心），我们应该重建这个质心之上的所有节点。

因此，算法变成了这样：

```
Let x a new data-point
c = searchClosestCenter(x, tree) // return the centroid closest to x
if( distance(x, c) > threshold )
   x becomes a new cluster center (i.e. a new centroid)
   AddCenterToTree(x, tree)
else
   assign x to c (i.e. update the centroid by taking x)
   UpdateTree(c) // update all nodes that are  on top of c 
```

在这种情况下如何定义这个函数？有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:55:19.950

使用**R-tree**怎么样？它使用最小边界矩形来总结叶子页面中的对象。您也可以使用 kd-tree，但它的性能会随着时间的推移而下降（除非您重建它），因为它可能会变得不平衡。

无论如何，R-tree 对于这类数据来说是一种非常流行的数据结构。它用于 Oracle、SQLite、Postgres、MySQL...

R*-trees 是 R-tree 的改进版本。他们有一个更好的拆分策略，对插入的细微更改，并重新插入作为拆分的替代方案，以改善树的平衡。搜索是相同的。

作为一种优化，您可以通过以下优化来增强 R-tree：您还可以添加“替换”操作，而不是删除旧条目并插入新条目。您首先检查将插入新均值的位置。如果和之前是同一个页面，就在页面中替换它，最终更新边界框。

# wordpress - wordpress网站上的字典攻击

> ID：12551272
> 
> 赞同：1
> 
> 时间：2012-09-23T09:44:43.837
> 
> 标签：wordpress, dictionary, ip

有人一直在试图破解 wordpress 网站，有人可以提出可能的方法来防止这种情况。

我不认为他们会破解它，因为我已经采取了所有安全措施和预防非常强的密码等，这只是烦人我有一个插件调用活动监视器，它将在下面输出。

![在此处输入图像描述](../Images/126ded68053182a4f7aaa54949c62286.png)

所以这只是发生然后我必须进入并阻止我的 .htaccess 文件中的 ip。115.87.105.135

这是我从查找中获得的信息

IP：115.87.105.135 邻居主机：ppp-115-87-105-135.revip4.asianet.co.th
国家：泰国

我可以从 ip 获得什么信息来查看谁在试图破解我以及在哪里或没有我可以获得的信息只是必须一直等待和阻止 ips ？？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:54:29.080

要通过限制人们无法成功登录到您的 Wordpress 管理面板的次数来阻止*暴力攻击，请使用*[Login LockDown](http://www.bad-neighborhood.com/login-lockdown.html)插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:51:04.167

您可以使用 whois 信息来了解谁在管理 IP 来源的 IP 范围。他们必须提供联系信息（电子邮件地址，...）来报告其用户的滥用行为。

如果您只是对位置感兴趣，则网络上有可用的 ip 地理定位服务，但它们不是很准确（也许它们会显示正确的城镇）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T13:43:28.853

将以下代码添加到主题文件夹中 functions.php 的底部，它将停止 ping 返回请求。

```
add_filter( 'xmlrpc_methods', 'remove_xmlrpc_pingback_ping' );
function remove_xmlrpc_pingback_ping( $methods ) {
unset( $methods['pingback.ping'] );

return $methods;
} 
```

# jsp - JSF 重新渲染直到页面刷新才生效

> ID：12551274
> 
> 赞同：0
> 
> 时间：2012-09-23T09:45:09.833
> 
> 标签：jsp, jsf, richfaces, rerender

我有一个复选框，在该复选框上给出了一个数据表 id 作为重新渲染。这是来自 JSP- 的复选框的完整标记

```
<h:selectBooleanCheckbox id="A_IsDefaultSpouseAnnutant"
    value="#{XXXXXX.a_IsDefaultSpouseAnnutant}">
    <a4j:support actionListener="#{XXXXXX.changeVisibility}" ajaxSingle="true"
        event="onclick" immediate="true" reRender="benListTable"/>
</h:selectBooleanCheckbox> 
```

我的期望是单击复选框时，下面的数据表应该重新呈现并显示更改的值。但是在我手动刷新页面之前，这些更改不会生效。我在互联网上搜索了导致此问题的任何原因，但找不到任何原因。任何 ehlp 都会有很大帮助。

**注意：当我尝试重新渲染时，该表被禁用。JSF 是否重新渲染禁用的元素？**

# c# - 具有 404 响应的递归 webclient.download 方法导致服务器达到 100%

> ID：12551278
> 
> 赞同：0
> 
> 时间：2012-09-23T09:46:17.087
> 
> 标签：c#, asp.net, asp.net-mvc-3

我正在尝试通过 webclient 下载文件，代码如下所示。问题是，如果我多次收到连续的 404 响应，我的服务器会达到 100% 并且查看事件日志会告诉我发生了堆栈溢出。这里的“count”变量是为了避免 0 字节文件，count404 是为了 404 响应。

```
 int count = 0; int count404 = 0;
    public Stream DownloadFileThroughWebClient(string strFilePath)
    {
        try
        {
            if (count >= 120 || count404 >= 30)
            {
                count = 0;
                count404 = 0;
                return null;
            }
            System.Threading.Thread.Sleep(1000);
            System.Net.WebClient wc = new System.Net.WebClient();
            var v = wc.DownloadData(strFilePath);
            Stream FileToSave = new MemoryStream(v);
            byte[] bytes = new byte[FileToSave.Length];
            int numBytesToRead = (int)FileToSave.Length;
            if (numBytesToRead > 0)
            {
                count = 0;
                count404 = 0;
                return FileToSave;
            }
            else
            {
                count++;
                count404 = 0;
                return DownloadFileThroughWebClient(strFilePath);
            }
        }
        catch (Exception ex)
        {
            count++;
            count404++;
            return DownloadFileThroughWebClient(strFilePath);
        }
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:30:33.680

你打电话：

```
return DownloadFileThroughWebClient(strFilePath); 
```

如果出现问题。如果它不断收到 404（或更可能：因滥用查询而被 ip-blocked），那么您**当然**会使用 stackoverflow。如果您递归调用自己太多次，*就会发生*这种情况。所以：不要那样做。某种“while”循环（具有成功或持续失败的健全退出条件）似乎比递归更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T10:34:47.323

试试这个（不使用递归并正确计算 404）：

```
public Stream DownloadFileThroughWebClient(string strFilePath)
{
    int count = 0; 
    int count404 = 0;

    while (count < 120 && count404 < 30)
    {
        try
        {
            byte[] v;
            using (var wc = new WebClient())
            {
                v = wc.DownloadData(strFilePath);
            }

            if (v.Length > 0)
            {
                return new MemoryStream(v);
            }

            count++;
            count404 = 0;
        }
        catch (WebException ex)
        {
            count++;
            var httpWebResponse = ex.Response as HttpWebResponse;
            if (httpWebResponse != null && httpWebResponse.StatusCode == HttpStatusCode.NotFound)
            {
                count404++;
                // you may wanna break out of the loop here since there's no point in continuing 
            }
        }
        catch (Exception ex)
        {

        }
    }
    return null;
} 
```

# xcode - xcode 4.5 - 未找到架构 i386 (zbar) 的符号

> ID：12551280
> 
> 赞同：8
> 
> 时间：2012-09-23T09:46:50.397
> 
> 标签：xcode, armv7, xcode4.5, zbar-sdk, ios

我有一个使用 zbar-sdk（条形码扫描库）的项目。

将我的机器更新到 xcode 4.5 和 ios6sdk 后，我遇到了一些麻烦。

我能够在不涉及我的项目的任何内容的情况下构建到模拟器。这是使用最新的 zbar 1.2 库。

然后我想构建到我的 ios6 设备进行测试，这就是我遇到错误的时候。

在 zbar 开发人员论坛上进行了一些谷歌搜索后，我发现我需要获取 zbar 源代码并为 armv7 和 armv7s 构建 libzbar.a，因为 zbar 开发人员尚未完成这项工作。

见 - [http://sourceforge.net/projects/zbar/forums/forum/1072195/topic/5728912](http://sourceforge.net/projects/zbar/forums/forum/1072195/topic/5728912)

所以我这样做了，将更新后的 libzbar.a 重新导入到我的项目中。然后我为我的设备构建，它工作！我能够将我的应用程序放到我的测试设备上，并且 zbar 条形码库运行良好。

我以为事情就这样结束了，可惜没有。

然后我尝试再次构建到模拟器（ios6），这就是它失败的时候。

无论如何，我都无法同时使用相同的设置为设备和模拟器构建这个项目:(

**构建我自己的 libzbar.a 文件时我的 libzbar.a 项目设置：**

架构：标准（armv7，armv7s）$（ARCHS_STANDARD_32_BIT）

仅构建活动架构：否

有效架构：armv7 armv7s

**我的项目设置（对于myapp）为：**

架构：标准（armv7，armv7s）$（ARCHS_STANDARD_32_BIT）

仅构建活动架构：否

有效架构：armv7 armv7s

基础 SDK：iOS6

iOS 部署目标：iOS 5.0

**以及尝试构建到模拟器时的错误：**

```
ld: warning: ignoring file /Users/blah/iOS App/myapp/ZBarSDK/libzbar.a, missing required architecture i386 in file /Users/blah/iOS App/myapp/ZBarSDK/libzbar.a (2 slices)
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_ZBarReaderViewController", referenced from:
      objc-class-ref in mycontroller.o
  "_ZBarReaderControllerResults", referenced from:
      -[mycontroller imagePickerController:didFinishPickingMediaWithInfo:] in mycontroller.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我曾尝试调整 libzbar.a 项目设置（例如，将活动架构设置为“YES”），但这只会导致模拟器或设备都无法工作。

它适用于设备但不适用于模拟器的事实让我觉得有一些奇怪的架构/项目设置导致了这种情况。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:27:16.553

我怀疑这是*正确*的答案，但它对我有用，我使用架构编译了新的 libzber.a：i386 armv6 armv7 armv7s，您还需要将有效架构指定为相同的值。再次，这对我有用的最近版本我需要尽快退出两者都可以在 Target -> Build Settings -> Architecures 中找到。

另请注意：$(ARCHS_STANDARD_32_BIT) 需要从设置中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:57:25.913

我通过在 Target->Build Settings 中的 OTHER_LDFLAGS 下设置 iOS6 模拟器架构解决了类似的问题。

我忘记了我对分离的架构有不同的命令行参数，所以我不得不手动声明模拟器

# django - 在 django 的下拉列表中显示初始数据

> ID：12551283
> 
> 赞同：3
> 
> 时间：2012-09-23T09:47:26.863
> 
> 标签：django, forms, drop-down-menu

我正在编写一个应用程序`django1.4`来显示`Lesson`s 和 s我`Course`想给出一个用户可以选择的`edit_lesson`视图。`Course`当显示编辑页面时，与课程关联的课程应显示为默认选择。

我试着写这样的视图

```
def get_form_data(request):
    return request.POST if request.method == 'POST' else None

def edit_lesson(request,id,template_name):
   lesson = get_object_or_404(Lesson,pk=id,author=request.user)
   form_data = get_form_data(request)
   course_choices_form = CourseChoicesForm(form_data)
   ...
   context = {'course_choices_form':course_choices_form,...}
   if request.method == 'POST' and ....:
       ...

   #if GET method ,display the form with initial data
   course_choices_form = CourseChoicesForm(initial={'courseoption':lesson.course})
   context.update({'course_choices_form':course_choices_form})
   print "context['course_choices_form'].initial=",context['course_choices_form'].initial
   return custom_render(request,context,template_name) 
```

CourseChoicesForm 就像

```
class CourseChoicesForm(forms.Form):
    courseoption = forms.ChoiceField(choices=[],required=False,label='Course')
    def __init__(self, *args, **kwargs):
        super(CourseChoicesForm, self).__init__(*args, **kwargs)
        self.fields['courseoption'].choices = [(x.id,x.title) for x in Course.objects.all()] 
```

在 edit_lesson 模板中，我将 course_choices_form 显示为

```
{{ course_choices_form.as_p}} 
```

尽管如此，下拉列表并没有显示课程的课程，而只是 Course.objects.all() 中的第一个条目。

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:12:49.783

这就是我正在做的事情：

```
class CourseChoicesForm(forms.ModelForm):
     courseoption = forms.ModelChoiceField(Courses.objects.all()) 
```

Django 引擎会为您制作元组列表以填充 ChoiceField。`Courses.objects.all()`可以是任何查询集。

[https://docs.djangoproject.com/en/dev/ref/forms/fields/#fields-which-handle-relationships](https://docs.djangoproject.com/en/dev/ref/forms/fields/#fields-which-handle-relationships)

# java - java.lang.ClassNotFoundException: SavingAccount

> ID：12551284
> 
> 赞同：2
> 
> 时间：2012-09-23T09:48:21.253
> 
> 标签：java, reflection

> **可能重复：**
> [使用 java 反射的 ClassnotFound 异常](https://stackoverflow.com/questions/10635025/classnotfound-exception-using-java-reflection)

`java.lang.ClassNotFoundException: SavingAccount`执行以下代码时出现异常，

```
public class AccountFactory {   
    public void getAccount()
    {
        IAccount account;
        account = null;
     try
        {
         account = (IAccount)Class.forName("SavingAccount").newInstance();
         account.Deposit(500);
        }
        catch(Exception e)
        {
            System.out.println(e.toString());
        }  
    }

} 
```

导致错误的可能原因是什么？

这是我的储蓄账户代码：

```
public class SavingAccount implements IAccount {
    int money;
    SavingAccount()
    {
        money =0;
    }
    public void WithDraw(int m)
    {
        money--;
    }
    public void Deposit(int m)
    {
        money++;
        System.out.println(money);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T09:58:23.317

类加载器找不到 SavingsAccount 类。[在使用Java API](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#forName%28java.lang.String%29)中指定的 Class.forName 方法时，您还需要使用类的完全限定名称。完全限定的类名包括以包结构为前缀的类名。如果您的 AccountFactory 类每次总是要创建一个 SavingsAccount 类型的类，我建议您甚至不使用 AccountFactory 类，而只使用：

```
IAccount account = new SavingsAccount(); 
```

如果发布的代码只是您的类的快照，并且您确实打算从您的工厂返回实现 IAccount 接口的不同类型，您将需要更改 getAccount 方法签名，以便它返回 IAccount 而不是 void。然后，您必须使用 return 语句返回一个实现 IAccount 接口的对象。如：

```
 public IAccount getAccount()
 {
     IAccount account;
     account = null;
     try
        {
         //Notice fully qualified name is used.
         account = (IAccount)Class.forName("org.mydomain.SavingAccount").newInstance();
         account.Deposit(500);
        }
        catch(Exception e)
        {
            System.out.println(e.toString());
        } 
     return account;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T10:00:50.470

尝试指定完全限定的类名。像

Class.forName("abc.xyz.SavingAccount");

其中 abc.xyz 是 SavingAccount 类的包名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T10:05:09.070

你`AccountFactory`一定已经结束了`IAccount`。我认为它用于根据要求返回所有实现的实例`IAccount`。但是，我假设您知道所有类都在实现您的`IAccount`. 所以，没有必要使用 Class.forName()。

我假设您的设计如下所示：-

```
public interface IAccount {
}

public class SavingsAccount implements IAccount {
}

public class CurrentAccount implements IAccount {

}

public class AccountFactory {
     public static IAccount getAccountInstance(String class) {   
     // In your code you need to change the return type of this method..

          if (class.equals("Savings")) {
                 return new SavingAccounts();
          } else if (class.equals("Current")) {
                 return new CurrentAccount();
          } 
          // Similarly for Other implementor....
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T09:49:46.710

它显示`SavingAccount`该类不在`classpath`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T09:57:12.270

写

```
public class AccountFactory {   
    public void getAccount()
    {
        IAccount account;
        account = null;
     try
        {
         account = new SavingAccount();
         account.Deposit(500);
        }
        catch(Exception e)
        {
            System.out.println(e.toString());
        }  
    }        
} 
```

并遵循编译错误。

1.  您可能会看到为什么找不到 SavingAccount（不在类路径中？错误的包（即“mypackage.SavingAccount”？））
2.  你看看 SavingAccount 是否实现了 IAccount 接口。

# php - 在 php 页面中显示 pdf 文件

> ID：12551287
> 
> 赞同：1
> 
> 时间：2012-09-23T09:49:29.707
> 
> 标签：php, pdf, pdf-viewer

我有一些 pdf 文件，想在我的网站上在线显示它们，而不是使用 acrobat 或 firefox 插件下载或显示，actullay 我需要一个 pdf 查看器。我不确定是否有任何准备好的库或插件。我想我必须将 pdf 的每一页转换为图像文件，但我该怎么做呢？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T09:58:00.647

就像@Lix 所说，大多数现代浏览器都内置了它，它在 chrome 和 firefox 中运行良好。这就是我所做的...

```
<object height="950" data="sample-report.pdf" type="application/pdf" width="860">

            <p>It appears you don't have a PDF plugin for this browser.
                No biggie... you can <a href="sample-report.pdf">click here to
                download the PDF file.</a>
            </p>

        </object> 
```

如果浏览器不支持通过让一个人下载来查看 PDF，它会很好地降级。我一直在寻找其他解决方案，例如转换为 html 或图像。但我不喜欢加载大量大图像并且转换为 html 会丢失很多格式。

如果您使用此命令运行 linux，您可以在您的服务器上进行转换...

转换 abc.pdf abc.jpg

-编辑-- Firefox 使用[PDF.js](http://mozilla.github.com/pdf.js/)呈现 PDF。我以前研究过，但是对于我的任何项目来说，复杂性都不值得。

希望这可以帮助。阿罗哈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T10:19:49.253

我想你正在寻找这个[http://flexpaper.devaldi.com/](http://flexpaper.devaldi.com/)

和类似的问题

[Flash Pdf 查看器就像 scribd](https://stackoverflow.com/questions/781352/flash-pdf-viewer-just-like-scribd)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T10:21:10.367

可以在 iframe 中的 google 文档查看器中查看您的文件：

```
<iframe src="http://docs.google.com/gview?url=http://www.example.com/yourPDFfile.pdf" frameborder="0"></iframe> 
```

# iphone - 如何在 IOS5 中解析我的 JSON 数据

> ID：12551289
> 
> 赞同：0
> 
> 时间：2012-09-23T09:49:36.267
> 
> 标签：iphone, objective-c, json, ios5, ios5.1

谁能告诉我如何在 IOS5 中解析我的 json 数据。我在下面提供我的 JSON 数据：

```
{
 "fieldType" : "Alphanumeric",
 "fieldName" : "Name"
},{
 "fieldType" : "Numeric",
 "fieldName" : "Card Num"
},{
 "fieldType" : "Alphanumeric",
 "fieldName" : "Pin Num"
} 
```

这个 JSON 格式也是正确的还是我需要更改 JSON 格式？当我尝试使用以下代码解析 JSON 时，出现错误：

> 操作无法完成。（可可错误 3840。）

我正在使用的代码：

```
NSError *error = nil;
NSData *jsonData = [filedList dataUsingEncoding:[NSString defaultCStringEncoding]];
if (jsonData) 
{
    id jsonObjects = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];

    if (error)
    {
        NSLog(@"error is %@", [error localizedDescription]);
        // Handle Error and return
        return;

    }
    NSArray *keys = [jsonObjects allKeys];

    // values in foreach loop
    for (NSString *key in keys)
    {
        NSLog(@"%@ is %@",key, [jsonObjects objectForKey:key]);
    }                
} 
else 
{
    // Handle Error 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:02:46.487

JSON 数据的格式不正确。由于您有一系列项目，因此您需要将其包含在`[ ... ]`：

```
[
    {
     "fieldType" : "Alphanumeric",
     "fieldName" : "Name"
    },{
     "fieldType" : "Numeric",
     "fieldName" : "Card Num"
    },{
     "fieldType" : "Alphanumeric",
     "fieldName" : "Pin Num"
    }
] 
```

现在`JSONObjectWithData`给你一个`NSMutableArray`对象`NSMutableDictionary`（因为 NSJSONReadingMutableContainers 标志）。

您可以浏览解析的数据

```
for (NSMutableDictionary *dict in jsonObjects) {
    for (NSString *key in dict) {
        NSLog(@"%@ is %@",key, [dict objectForKey:key]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T10:07:27.960

在任何类型的解析中，首先是`NSLog`JSON 或 XML 字符串，然后开始编写解析代码。

在你的情况下，根据你提到的 JSON 字符串，它是一个字典数组，一旦你得到你的 jsonObjects，就这样做来获取你的数据。

```
 id jsonObjects = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];
NSLog(@"%@",jsonObjects);
// as per your example its an array of dictionaries so

NSArray* array = (NSArray*) jsonObjects;
for(NSDictionary* dict in array)
{
NSString* obj1 = [dict objectForKey:@"fieldType"];
NSString* obj2 = [dict objectForKey:@"fieldName"];

enter code here
enter code here
} 
```

通过这种方式，您可以解析您的 json 字符串。有关更多详细信息，请参阅 Raywenderlich 的本[教程](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)。

# android - 像android中的速度表这样的简单仪表视图？

> ID：12551295
> 
> 赞同：21
> 
> 时间：2012-09-23T09:50:03.480
> 
> 标签：android, view, android-animation, android-custom-view, gauge

我想要一个简单的仪表视图，我将在其中定义开始值和结束值，并有一个指针来显示给定的变量值。

![在此处输入图像描述](../Images/988173681b7397fd33426f8ecf9d9858.png)

所以我可以显示一个给定的值，比如速度表。例如，如果我的 textView 的值为 1300，那么在 textview 旁边我想要这样的自定义仪表视图动画！

有可能的？任何现有的示例代码？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-22T19:49:07.413

我在 找到的另一个[`Evelina Vrabie's blog`](http://android.codeandmagic.org/2012/08/android-gaugeview-library/)，使用它并且工作完美！

看[`Evelina Vrabie's GitHub`](https://github.com/CodeAndMagic/GaugeView)。它有一个量规库和一些要与之交互的样本。

> 非常感谢店主 Evelina Vrabie！

* * *

![在此处输入图像描述](../Images/58e1d87151631049b7843bc339002735.png)

但是它不适用于 XHDPI/少数版本的 android 设备（4 以上）。问题是仪表视图中的文本。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-10-18T21:48:35.960

对于任何寻找简单仪表视图的人，我制作了一个库，您可以根据需要克隆和使用/修改它。

[定制仪表](https://github.com/pkleczko/CustomGauge)

![在此处输入图像描述](../Images/d0faae56ff5ca103d5c64214e716aa3e.png)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-04-12T23:13:11.993

您推荐的所有其他仪表都有错误，并且在 Kitkat 和 Lollipop 上运行不正常。这里也没有 Android Studio 和 gradle 友好的库。

这是最近更新的 Lollipop 的 git 存储库，您可以将其与 Gradle 一起使用：

*   [https://github.com/Sulejman/GaugeView](https://github.com/Sulejman/GaugeView)

![在此处输入图像描述](../Images/f11b82e4527040333f70c305a741cd32.png)

在项目中包含库后，将 gaugelibrary 添加到活动的 xml 布局中：

```
<io.sule.gaugelibrary.GaugeView
 android:id="@+id/gauge_view"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:background="#ffffff"
 gauge:showOuterShadow="false"
 gauge:showOuterRim="false"
 gauge:showInnerRim="false"
 gauge:needleWidth="0.010"
 gauge:needleHeight="0.40"
 gauge:scaleStartValue="0"
 gauge:scaleEndValue="100"
 /> 
```

这将显示无针的静态量规。要使用随机动画实例化针头，您需要在活动类文件中执行此操作。看看它是如何在这里完成的：

```
package io.sule.testapplication;

import android.app.Activity;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.view.Menu;
import android.view.MenuItem;

import java.util.Random;

import io.sule.gaugelibrary.GaugeView;

public class MainActivity extends Activity {
   private GaugeView mGaugeView;
   private final Random RAND = new Random();

   @Override
   protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_main);

      mGaugeView = (GaugeView) findViewById(R.id.gauge_view);
      mTimer.start();
   }

   private final CountDownTimer mTimer = new CountDownTimer(30000, 1000) {

      @Override
      public void onTick(final long millisUntilFinished) {
         mGaugeView.setTargetValue(RAND.nextInt(101));
      }

      @Override
      public void onFinish() {}
   };
} 
```

这将实例化 needle 并使其动画移动到随机值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-09-17T12:34:29.627

我不久前做了这个。随意克隆和修改。（它从旧的[老式温度计](http://mindtherobot.com/blog/272/android-custom-ui-making-a-vintage-thermometer/)中汲取了一些想法。）

[github.com/Pygmalion69/Gauge](https://github.com/Pygmalion69/Gauge)

[![在此处输入图像描述](../Images/3843e5e17ab04e590e9d1a9da7c519c1.png)](https://i.stack.imgur.com/X73sf.png)

它可以很容易地添加到您的 Gradle 项目中：

```
repositories {
    maven {
        url 'https://www.jitpack.io'
    }
}

dependencies {
    compile 'com.github.Pygmalion69:Gauge:1.1'
} 
```

视图在 XML 中声明：

```
<de.nitri.gauge.Gauge
    android:id="@+id/gauge1"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_gravity="center"
    android:layout_marginTop="10dp"
    android:layout_weight="0.75"
    gauge:labelTextSize="42"
    gauge:maxValue="1000"
    gauge:minValue="0"
    gauge:totalNicks="120"
    gauge:valuePerNick="10"
    gauge:upperText="Qty"
    gauge:lowerText="@string/per_minute" /> 
```

这是以编程方式设置值的示例：

```
 final Gauge gauge1 = (Gauge) findViewById(R.id.gauge1);
    final Gauge gauge2 = (Gauge) findViewById(R.id.gauge2);
    final Gauge gauge3 = (Gauge) findViewById(R.id.gauge3);
    final Gauge gauge4 = (Gauge) findViewById(R.id.gauge4);

    gauge1.moveToValue(800);

    HandlerThread thread = new HandlerThread("GaugeDemoThread");
    thread.start();
    Handler handler = new Handler(thread.getLooper());

    handler.postDelayed(new Runnable() {
        @Override
        public void run() {
            gauge1.moveToValue(300);
        }
    }, 2800);
    handler.postDelayed(new Runnable() {
        @Override
        public void run() {
            gauge1.moveToValue(550);
        }
    }, 5600);

    HandlerThread gauge3Thread = new HandlerThread("Gauge3DemoThread");
    gauge3Thread.start();
    Handler gauge3Handler = new Handler(gauge3Thread.getLooper());
    gauge3Handler.post(new Runnable() {
        @Override
        public void run() {
            for (float x = 0; x <= 6; x += .1) {
                float value = (float) Math.atan(x) * 20;
                gauge3.moveToValue(value);
                try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    });

    gauge4.setValue(333); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-05T15:00:18.940

在这个网站上，您会发现一些免费的可定制仪表。

[ScComponents](http://www.sccomponents.com/)

非常容易安装并且有据可查。例如，您可以按照以下说明在 5 分钟内免费获得类似的东西。

[![在此处输入图像描述](../Images/746a1c89b0526bbfdc690a6b727e2966.png)](https://i.stack.imgur.com/UeYXR.jpg)

转到上面链接的网站。单击 GR004 并在弹出窗口出现后单击“免费下载”。该库将下载、解压缩并按照说明在您的 Android 项目中安装该库（aar 文件）。

在您的 XML 布局中编写此代码，您的仪表将完成：

```
<com.sccomponents.gauges.gr004.GR004
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

您有许多 XML 选项来自定义它：

*   sccAnimDuration
*   sccEnableTouch
*   scc倒置
*   scc字体名称
*   sccLabelsSizeAdjust
*   sccMajorTicks
*   sccMaxValue
*   sccMinorTicks
*   sccMinValue
*   sccShowContour
*   sccShowLabels
*   sccText
*   scc值

并通过编码实现相关功能。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-09T05:56:04.090

我不知道迟到的答案是否会有所帮助。我也遇到了同样的情况，我想使用仪表来可视化数据，因为仪表不是在 android 中作为小部件给出的，作为一个爱好者，我去了上面的库，可以通过互联网上的各种链接找到，尽管它非常有帮助（感谢它的出色作者..）我发现自己很难在某些情况下可视化，所以我为我的应用程序所做的另一个解决方案是将 JavaScript 仪表集成到我的 android 应用程序中。您可以通过以下步骤做到这一点

1.  在我们的项目中创建一个资产文件夹——[看看这个链接](http://code2care.org/2015/create-assets-folder-in-android-studio/)，如果有人不知道，你会看到如何创建一个资产文件夹。
2.  下一个是你已经设计了一个关于你的页面应该是什么样子的 html 页面，例如标题，no.of guages 等......并将其放置在文件夹资产中。
3.  有许多网站提供像“[这是一个网站](http://justgage.com/)”这样的说法，或者您可以浏览其他网站并采取任何您觉得很酷的方式...！！将包括 .js 文件在内的所有内容放入资产文件夹中。
4.  Android 提供了一个用于处理 webiview 的类，称为**“WebViewClient”**，您可以在 Internet 上浏览更多信息以了解更多信息
5.  这是查看 webview 内容的示例代码。

    web = (WebView) findViewById(R.id.webview01); progressBar = (ProgressBar) findViewById(R.id.progressBar1);

    ```
    web.setWebViewClient(new myWebClient());

      web.getSettings().setJavaScriptEnabled(true);
                web.post(new Runnable() {
                    @Override
                    public void run() {
                        web.loadUrl("file:///android_asset/fonts/guage.html");
                    }
                }); 
    ```

以上用于加载 html 和 javscript。

```
 public class myWebClient extends WebViewClient
{
    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        // TODO Auto-generated method stub
        super.onPageStarted(view, url, favicon);
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // TODO Auto-generated method stub
        progressBar.setVisibility(View.VISIBLE);
        view.loadUrl(url);
        return true;

    }

    @Override
    public void onPageFinished(WebView view, String url) {
        // TODO Auto-generated method stub
        super.onPageFinished(view, url);

        progressBar.setVisibility(View.GONE);
    }
} 
```

这是 webview 类

1.  您还可以将数据从活动发送到 html 页面。[请参阅此链接](http://pavan2pyati.blogspot.in/2013/12/android-native-data-to-hmtl-page.html)

请大家通读，欢迎指正..!!

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-14T09:29:56.513

使用这个：[示例项目](https://github.com/jignesh13/SpeedoMeter)

它可以很容易地添加到您的 Gradle 项目中：

```
repositories {
    maven {
        url 'https://www.jitpack.io'
    }
}

dependencies {
implementation 'com.jignesh13.speedometer:speedometer:1.0.0'
} 
```

视图在 XML 中声明：

```
 <com.jignesh13.speedometer.SpeedoMeterView
        android:id="@+id/speedometerview"
        android:layout_width="250dp"
        android:layout_height="250dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintHorizontal_bias="0.453"
        app:layout_constraintStart_toStartOf="parent"
        app:backimage="@android:color/black"
        app:needlecolor="#fff"
        app:removeborder="false"
        app:linecolor="#fff"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintVertical_bias="0.079" /> 
```

# facebook - 获取任何 facebook 用户的公开个人资料内容

> ID：12551299
> 
> 赞同：2
> 
> 时间：2012-09-23T09:50:44.290
> 
> 标签：facebook, facebook-graph-api

如何获取任何 facebook 用户的公开个人资料内容？

我试过`https://graph.facebook.com/[FB-USER-ID]?access_token=[MY-ACCESS-TOKEN]`了，但这给了我只有我朋友的公开个人资料内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:09:24.297

如果您跳过传递，`access_token`您将只获得公共信息（您也可以使用`fields`参数获得配置文件的特定字段）

```
http://graph.facebook.com/USER_ID?fields=id,name,gender,link,picture&type=large 
```

[在文档](https://developers.facebook.com/docs/reference/api/)中了解有关[`user`](https://developers.facebook.com/docs/reference/api/user)object 和 his 的更多信息`fields`（仅那些标记为*No `access_token`required*的内容是公开的）。

# javascript - 如何重用浏览器已经下载的音频，使其不会在使用相同音频文件的其他页面中再次下载？

> ID：12551302
> 
> 赞同：1
> 
> 时间：2012-09-23T09:51:09.763
> 
> 标签：javascript, html, audio, web, reusability

我正在制作一个音频重页。我正在使用 JavaScript 音频元素。代码如下所示：

JavaScript：

```
var x = new Audio("x.mp3");
var y = new Audio("y.mp3");
var z = new Audio("z.mp3");

function playMe(n){
    n.play();
} 
```

HTML：

```
<button class="button" onclick="playMe(x)")>Play</button>
<button class="button" onclick="playMe(y)")>Play</button>
<button class="button" onclick="playMe(z)")>Play</button> 
```

有些页面使用多达 30 个不同的音频文件，因此这会消耗大量带宽。这可能会扼杀该项目，因为这是一项几乎没有预算的单人工作。

每次声明音频对象时都会下载音频。有没有办法重复使用已经在其他页面下载的音频在其他页面上使用而无需再次下载？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:54:59.923

您可以使用[缓存清单](http://en.wikipedia.org/wiki/Cache_manifest_in_HTML5)来确保您想要的每个资源只下载一次并正确缓存，即使是离线浏览也是如此。请参阅：[“离线”：这是什么意思，我为什么要关心？](http://www.html5rocks.com/en/tutorials/offline/whats-offline/)在 HTML5Rocks 上。

您可以使用的另一件事来代替（或补充）适当的缓存是让您的页面不会真正重新加载，而是使用 AJAX 仅重新加载部分页面，就像在[这个简单的演示](http://demo.tutorialzine.com/2009/09/simple-ajax-website-jquery/demo.html)中一样。很多 JavaScript 框架，如 jQuery、YUI、Prototype、Dojo 等，都会帮助你。

# android - 录音输出的 mime 类型设置为视频

> ID：12551304
> 
> 赞同：6
> 
> 时间：2012-09-23T09:51:29.327
> 
> 标签：android, audio, media-player, record

我写了一个简单的录音机程序。我将输出格式设置为 THREE_GP，但生成的文件的 mime 类型设置为视频（当我尝试查看文件详细信息时）。

知道为什么吗？

```
 mRecorder = new MediaRecorder();
 mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
 mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
 mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
 mRecorder.setOutputFile(recordingFilePath); 
```

# java - 如何使用 jdbc 将对象的字段保存到数据库中

> ID：12551306
> 
> 赞同：-1
> 
> 时间：2012-09-23T09:51:39.780
> 
> 标签：java, jdbc, orm

我正在尝试制作自己的 ORM 框架。我将对象中的值获取到 arrayList 中，并尝试一次性保存它们。我必须制作 for 循环来保存它们，但我很困惑如何制作它？

```
prepareteState = connect.prepareStatement(Query);
for (int y = 1; y <= obs.size()  ; y++) {
    for(Object obj : obs){
        prepareteState.setObject(y, obj);
        System.out.println(Query);
        System.out.println(prepareteState.toString());
    }
}
prepareteState.execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:16:43.313

感谢您的好建议，但是，我找到了解决方案 :) 它与第一个想法有点不同，但是对我来说效果很好:) 我正在使用 StringBuilder 来制作 String 并执行查询，而不是一个一个地使用 prepareState 和 setObject

```
private String makeInsertQuery(List<String> listOfColumnsNames, List<Object> listOfParameters, String tableName){
    StringBuilder columns = new StringBuilder();
    StringBuilder parameters = new StringBuilder();
    String query = null;

    if(listOfColumnsNames != null && listOfColumnsNames.size() != 0 && listOfParameters != null && listOfParameters.size() != 0 && tableName != null){
        for(String string : listOfColumnsNames){
            columns.append(string + ",");
        }
        columns.deleteCharAt(columns.length() - 1);

        for(Object object : listOfParameters){
            parameters.append ("'" + object + "'" + ",");
        }
        parameters.deleteCharAt(parameters.length() - 1);

        query = "INSERT " + "INTO " + tableName +  " ( " + columns.toString() + " ) " + " VALUES " + "( " + parameters.toString() + " )" ; 
    }
    //TODO if you need check for null 
    return query;
} 
```

# c# - Unity + NHibernate 3.3.1.4 和中等信任错误

> ID：12551307
> 
> 赞同：0
> 
> 时间：2012-09-23T09:51:41.013
> 
> 标签：c#, nhibernate, fluent-nhibernate, unity-container

在中等信任环境中使用 Unity + Fluent NHibernate + NHibernate 3.3.1.4

```
var session = sessionFactory.OpenSession(); 
```

返回此错误：

```
Attempt by method 'NHibernate.AdoNet.SqlClientSqlCommandSet..ctor()' to access method 'System.Data.SqlClient.SqlCommandSet..ctor()' failed.

   at System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck)
   at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache)
   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache)
   at System.Activator.CreateInstance(Type type, Boolean nonPublic)
   at NHibernate.AdoNet.SqlClientSqlCommandSet..ctor()
   at NHibernate.AdoNet.SqlClientBatchingBatcher.CreateConfiguredBatch()
   at NHibernate.AdoNet.SqlClientBatchingBatcher..ctor(ConnectionManager connectionManager, IInterceptor interceptor)
   at NHibernate.AdoNet.SqlClientBatchingBatcherFactory.CreateBatcher(ConnectionManager connectionManager, IInterceptor interceptor)
   at NHibernate.AdoNet.ConnectionManager..ctor(ISessionImplementor session, IDbConnection suppliedConnection, ConnectionReleaseMode connectionReleaseMode, IInterceptor interceptor)
   at NHibernate.Impl.SessionImpl..ctor(IDbConnection connection, SessionFactoryImpl factory, Boolean autoclose, Int64 timestamp, IInterceptor interceptor, EntityMode entityMode, Boolean flushBeforeCompletionEnabled, Boolean autoCloseSessionEnabled, ConnectionReleaseMode connectionReleaseMode)
   at NHibernate.Impl.SessionFactoryImpl.OpenSession(IDbConnection connection, Boolean autoClose, Int64 timestamp, IInterceptor sessionLocalInterceptor)
   at NHibernate.Impl.SessionFactoryImpl.OpenSession(IInterceptor sessionLocalInterceptor)
   at NHibernate.Impl.SessionFactoryImpl.OpenSession()
   at BsCms.Bootstrapper.<>c__DisplayClass5.<BuildUnityContainer>b__2(IUnityContainer c)
   at Microsoft.Practices.Unity.InjectionFactory.<>c__DisplayClass2.<.ctor>b__0(IUnityContainer c, Type t, String s)
   at Microsoft.Practices.ObjectBuilder2.FactoryDelegateBuildPlanPolicy.BuildUp(IBuilderContext context)
   at Microsoft.Practices.ObjectBuilder2.BuildPlanStrategy.PreBuildUp(IBuilderContext context)
   at Microsoft.Practices.ObjectBuilder2.StrategyChain.ExecuteBuildUp(IBuilderContext context) 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:54:45.813

这是一个很容易解决的问题。您必须禁用批处理。您可以通过将属性设置`adonet.batch_size`为`0`

在/的您`hibernate.cfg.xml`或休眠配置部分中：`App.config``Web.config`

```
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
  <reflection-optimizer use="false"/>
  <session-factory>
    <!-- other properties -->
    <property name="adonet.batch_size">0</property>
  </session-factory>
</hibernate-configuration> 
```

或者通过 FluentNHibernate：

```
var db = MsSqlConfiguration.MsSql2008
    // other configurations
    .AdoNetBatchSize(0); 

return Fluently.Configure()
    // other configurations
    .Database(db)
    .BuildConfiguration(); 
```

# asp.net - ASP.NET MVC 4 将模型从视图传递到 html 帮助器

> ID：12551308
> 
> 赞同：6
> 
> 时间：2012-09-23T09:52:00.190
> 
> 标签：asp.net, asp.net-mvc, razor, html-helper

我想将我的 ViewModel（不是 IEnumerable）传递给我的自定义 html 助手

我在 IEnumerable 上做这样的事情：

帮手：

```
public static IHtmlString GenerateTable<TModel, TValue>(this HtmlHelper<TModel> inHtml, IEnumerable<TValue> model) 
```

看法：

```
@Html.GenerateTable(Model) 
```

但是我如何将不是 IEnumerable 的模型传递给助手？

我试过这个：

```
public static MvcHtmlString MyHelper<TModel>(this HtmlHelper<TModel> html, object obj)
        {} 
```

但是当我这样称呼它时

```
@Html.MyHelper(Model) 
```

obj 总是`NULL`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-23T12:58:51.787

试试这样：

```
public static MvcHtmlString MyHelper<TModel>(this HtmlHelper<TModel> htmlHelper)
{
    TModel model = htmlHelper.ViewData.Model;
    // TODO: do something with the model ...
} 
```

在您的强类型视图中：

```
@model MyViewModel
@Html.MyHelper() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T10:37:58.397

我已经尝试过你的代码，它工作得很好，如果模型已经被初始化......所以我认为你应该检查@nemesv 的建议，但我会澄清，当你调用视图和将模型传递给它......您需要检查模型并确保它不为空

# c++ - 如何从树列表拖放到windows文件系统？

> ID：12551312
> 
> 赞同：0
> 
> 时间：2012-09-23T09:52:20.830
> 
> 标签：c++, file, drag-and-drop

我需要将代表文件的项目拖放到 C++ 中的 windows 文件系统。对于我如何只能将文件从文件系统拖放到我的程序中，但是如何以相反的方式进行呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:11:44.997

`WM_DROPFILES`您必须以某种方式向目标窗口发送消息。在这个过程中，你必须让它成为全局内存，这样你就可以发送一个指向该`DROPFILES`结构的指针，否则你不能发送指向其他进程的指针，因为内存实际上并没有在另一端分配。

分配`DROPFILES`结构是荒谬的，因为显然列表中的所有文件都应该存储在`DWORD`我所看到的单个值中，但事实并非如此，并且根本没有为我工作。

这篇文章至少会让您了解搜索信息的方向，祝您好运。

# clojure - 在 Clojure 中解释惰性帕斯卡三角形

> ID：12551314
> 
> 赞同：8
> 
> 时间：2012-09-23T09:52:34.587
> 
> 标签：clojure, functional-programming

我遇到了这个使用惰性序列的 Pascal 三角形的优雅实现。

```
(def pascal
  (iterate
   (fn [prev-row]
     (->>
      (concat [[(first prev-row)]] (partition 2 1 prev-row) [[(last prev-row)]])
      (map (partial apply +) ,,,)))
   [1M])) 
```

谁能帮我理解`,,,`在这种情况下？我尝试使用`macroexpand`，但这并没有让我走远。我也知道它的使用不是必需的，但我想知道这`,,,`意味着什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-23T10:22:12.827

逗号在 Clojure 中被视为空格，因此 Reader 将`,,,`完全忽略。它存在的原因是使代码对人类更具可读性。

在这种情况下，`->>`宏将`(concat ...)`在对 的调用的最后一个位置插入`(map ...)`，即在 的位置`,,,`。

`,,,`常用的 with和`->`宏`->>`使代码更具可读性，但实际上并没有做任何事情。

# sql - 无法在 Sql Azure 上删除表

> ID：12551327
> 
> 赞同：5
> 
> 时间：2012-09-23T09:54:30.267
> 
> 标签：sql, sql-server, azure, azure-sql-database

我无法在 Sql Azure 上删除表。以前我取消了一个涉及该表的查询，因为执行需要很长时间。也许其他程序阻止了我。

如何在 Sql Azure 上解决此问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-09T21:01:45.720

Try Restarting and Apply:

```
IF EXISTS (SELECT * FROM [tablename]) DROP TABLE [tablename] 
```

# javascript - JQuery 在数据过滤器上切换 True 或 False

> ID：12551330
> 
> 赞同：1
> 
> 时间：2012-09-23T09:55:11.723
> 
> 标签：javascript, jquery

我有一个图像链接，我想将其用作切换按钮。

```
<img id="myToggleButton" src="myToggle.jpg" />

And what I want it to toggle is this:

<ul id="listview" data-filter="true">

So, basically I need to change from data-filter="true" or data-filter="false" and so on. 
```

我怎样才能使用 JQuery 来完成这项工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T09:59:06.620

```
$('#myToggleButton').click(function(){
   var $listview = $('#listview');
   $listview.attr('data-filter',
       $listview.attr('data-filter')=='false' ? 'true' : 'false'
   );
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T10:01:13.057

类似的东西？

```
var $list = $('#listview');
$('#myToggleButton').click(function (event) {
  if($list.data('filter') == true) {
    $list.attr('data-filter', false);
  }else {
    $list.attr('data-filter', true);
  }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T10:06:20.860

这是一个更简洁和现代的jQuery方式，使用该`data()`方法处理数据属性：

```
$('#myToggleButton').click(function (){
  var listview = $('#listview');
  listview.data('filter', !listview.data('filter'));
  listview.listview('refresh');
});​ 
```

这也是一个[JSFiddle](http://jsfiddle.net/UupNd/)，因此您可以看到它的实际效果。

# php - 获取 2 个单词之间的内容

> ID：12551331
> 
> 赞同：1
> 
> 时间：2012-09-23T09:55:26.300
> 
> 标签：php

我想获取两个单词（`word1`和`word2`）之间的内容（文本），例如：

`word1blablabla Poetry can be divided into several genres, or categories. word2 blablabla`

所以内容=`blablabla Poetry can be divided into several genres, or categories.`

但是，有时问题`word1`and`word2`可以是大写字母或小写字母。另一个问题是`word1`仍然打印在结果中。它应该被打印出来。如何处理这个问题？谢谢你 ：）

这是代码：

```
$file = 'word1 blablabla word1 Poetry can be divided into several genres, or categories. word2 blablabla ';
$word1='word1';
$word2='word2';
$between  = substr($file, strpos($file, $word1), strpos($file, $word2) - strpos($file, $word1)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T09:56:22.027

您可以使用[`stripos`](http://php.net/manual/en/function.stripos.php)代替`strpos`：

> stripos — 查找字符串中第一次出现不区分大小写的子字符串的位置

# grid - grid, gridBase: 如何在不同区域绘图？

> ID：12551334
> 
> 赞同：0
> 
> 时间：2012-09-23T09:56:37.310
> 
> 标签：grid, plot

我想用网格指定的布局在四个区域内创建 R 图。此外，gridBase 应该用于在使用基本图形的区域中实际绘制。下面是一个例子。问题是这 4 个地块没有绘制在四个不同的区域中，它们相当重叠。

```
require(grid)
require(gridBase)

## set up the grid layout
gl <- grid.layout(2, 2, widths=unit(c(3, 3), "inches"),
          heights=unit(c(3, 3), "inches"))
pushViewport(viewport(layout=gl)) # use this layout in a viewport

## plot
par. <- par(no.readonly=TRUE) # save plot settings
vps <- baseViewports() # create list of grid viewports corresponding to inner, figure, and plot regions
pushViewport(vps$inner, vps$figure, vps$plot)
for(i in 1:2) { # rows
    for(j in 1:2) { # columns
        pushViewport(viewport(layout.pos.row=i, layout.pos.col=j))
        par(plt=gridPLT(), new=TRUE)
        x <- 1:10
        plot(x, x+runif(10), type="b")
        upViewport()
    }
}
par(par.) # reset plot settings 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:19:49.130

这似乎有效：

```
require(grid)
require(gridBase)

gl <- grid.layout(2, 2, widths=unit(c(3, 3), "inches"),
          heights=unit(c(3, 3), "inches"))
pushViewport(viewport(layout=gl))

par. <- par(no.readonly=TRUE)
for(i in 1:2) {
    for(j in 1:2) {
        pushViewport(viewport(layout.pos.row=i, layout.pos.col=j))
        par(plt=gridPLT())
        x <- 1:10
        plot(x, x+runif(10), type="b", xlab="", ylab="")
        par(new=TRUE) # to be run after first plot
        upViewport()
    }
}
par(par.) 
```

# python - 使用python在多个文件中进行多个正则表达式替换

> ID：12551338
> 
> 赞同：0
> 
> 时间：2012-09-23T09:57:25.500
> 
> 标签：python, regex, substitution

我有一个项目需要使用 python 将十几个正则表达式应用于大约 100 个文件。在网上搜索了 4 个多小时的各种组合，包括“(merge|concatenate|stack|join|compile) multiple regex in python”，但我还没有找到任何关于我需要的帖子。

这对我来说是一个中等规模的项目。我需要几个较小的正则表达式项目，它们只需要 5-6 个正则表达式模式，仅应用于十几个文件。虽然这些将对我的工作有很大帮助，但祖父项目是一个应用 100 多个搜索的文件，将字符串替换为我得到的任何新文件。（某些语言的拼写约定不是标准化的，能够快速处理文件将提高工作效率。）

理想情况下，正则表达式字符串需要可由非程序员更新，但这可能超出了本文的范围。

这是我到目前为止所拥有的：

```
import os, re, sys # Is "sys" necessary?

path = "/Users/mypath/testData"
myfiles = os.listdir(path)

for f in myfiles:

    # split the filename and file extension for use in renaming the output file
    file_name, file_extension = os.path.splitext(f)
    generated_output_file = file_name + "_regex" + file_extension

    # Only process certain types of files.
    if re.search("txt|doc|odt|htm|html")

    # Declare input and output files, open them, and start working on each line.
        input_file = os.path.join(path, f)
        output_file = os.path.join(path, generated_output_file)

        with open(input_file, "r") as fi, open(output_file, "w") as fo:
            for line in fi:

    # I realize that the examples are not regex, but they are in my real data.
    # The important thing, is that each of these is a substitution.
                line = re.sub(r"dog","cat" , line)
                line = re.sub(r"123", "789" , line)
                # Etc.

    # Obviously this doesn't work, because it is only writing the last instance of line.
                fo.write(line)
                fo.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T11:15:01.453

这是你要找的吗？

不幸的是，您没有指定如何知道应该应用哪些正则表达式，所以我将它们放入元组列表中（第一个元素是正则表达式，第二个是替换文本）。

```
import os, os.path, re

path = "/Users/mypath/testData"
myfiles = os.listdir(path)
# its much faster if you compile your regexes before you
# actually use them in a loop
REGEXES = [(re.compile(r'dog'), 'cat'),
           (re.compile(r'123'), '789')]
for f in myfiles:
    # split the filename and file extension for use in
    # renaming the output file
    file_name, file_extension = os.path.splitext(f)
    generated_output_file = file_name + "_regex" + file_extension

    # As l4mpi said ... if odt is zipped, you'd need to unzip it first
    # re.search is slower than a simple if statement
    if file_extension in ('.txt', '.doc', '.odt', '.htm', '.html'):

        # Declare input and output files, open them,
        # and start working on each line.
        input_file = os.path.join(path, f)
        output_file = os.path.join(path, generated_output_file)

        with open(input_file, "r") as fi, open(output_file, "w") as fo:
            for line in fi:
                for search, replace in REGEXES:
                    line = search.sub(replace, line)
                fo.write(line)
        # both the input and output files are closed automatically
        # after the with statement closes 
```

# javascript - 命名空间方法

> ID：12551339
> 
> 赞同：0
> 
> 时间：2012-09-23T09:57:36.477
> 
> 标签：javascript, object, scope, prototype

我想命名我的一个对象。这意味着我想调用一个特定的方法，而不是：

```
mediator.startSandbox(); 
```

像这样：

```
mediator.sandbox.start(); 
```

基本上这并不难。只需将沙盒方法包装到另一个对象中即可。不幸的是，这带来了一个重要的方面：

**在沙箱功能中工作时，我无法再通过*此*访问调解器（*这*是指沙箱）**

这总是让我在开发中再次赶上......这个问题是否有任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:59:50.263

像这样创建一个var：

```
var med = this; 
```

在对象中介和`med`对象沙箱内使用。

# multithreading - 什么时候需要条件变量，互斥量还不够吗？

> ID：12551341
> 
> 赞同：66
> 
> 时间：2012-09-23T09:57:54.917
> 
> 标签：multithreading, operating-system, synchronization, mutex, condition-variable

我确信互斥锁是不够的，这就是条件变量概念存在的原因；但它打败了我，当条件变量必不可少时，我无法用具体的场景说服自己。

[条件变量、互斥锁和锁之间的差异](https://stackoverflow.com/questions/1055398/differences-between-conditional-variables-mutexes-and-locks)问题的接受答案说条件变量是

> 用“信号”机制锁定。当线程需要等待资源可用时使用它。线程可以在 CV 上“等待”，然后资源生产者可以“向”变量发出“信号”，在这种情况下，等待 CV 的线程会收到通知并可以继续执行

我感到困惑的是，一个线程也可以在互斥体上等待，当它收到信号时，仅仅意味着该变量现在可用，为什么我需要一个条件变量？

PS：另外，无论如何，都需要一个互斥锁来保护条件变量，这让我的视线更加偏向于看不到条件变量的目的。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-24T16:41:03.333

即使您可以按照您描述的方式使用它们，互斥锁也不是为用作通知/同步机制而设计的。它们旨在提供对共享资源的互斥访问。使用互斥体来发出条件信号很尴尬，我想看起来像这样（其中 Thread1 由 Thread2 发出信号）：

线程1：

```
while(1) {
    lock(mutex); // Blocks waiting for notification from Thread2
    ... // do work after notification is received
    unlock(mutex); // Tells Thread2 we are done
} 
```

线程2：

```
while(1) {
    ... // do the work that precedes notification
    unlock(mutex); // unblocks Thread1
    lock(mutex); // lock the mutex so Thread1 will block again
} 
```

这有几个问题：

1.  Thread2 不能继续“做通知之前的工作”，直到 Thread1 完成“通知后的工作”。有了这种设计，Thread2 甚至都不是必需的，也就是说，为什么不将“工作在前”和“工作在通知后”移到同一个线程中，因为在给定的时间只能运行一个！
2.  如果 Thread2 不能抢占 Thread1，Thread1 将在重复 while(1) 循环时立即重新锁定互斥锁，即使没有通知，Thread1 也会继续执行“通知后工作”。这意味着您必须以某种方式保证 Thread2 将在 Thread1 之前锁定互斥锁。你是怎样做的？也许通过睡眠或其他一些特定于操作系统的方式强制调度事件，但即使这也不能保证根据时间、操作系统和调度算法工作。

这两个问题都不是小问题，事实上，它们都是主要的设计缺陷和潜在的错误。这两个问题的根源是互斥锁在同一个线程中被锁定和解锁的要求。那么如何避免上述问题呢？使用条件变量！

顺便说一句，如果您的同步需求真的很简单，您可以使用一个普通的旧信号量来避免条件变量的额外复杂性。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-04-30T11:28:39.653

互斥是共享资源的独占访问，而条件变量是关于等待条件为真。两者都是不同的内核资源。有些人可能认为他们可以使用互斥锁自己实现条件变量，常见的模式是“标志+互斥锁”：

```
lock(mutex)

while (!flag) {
    sleep(100);
}

unlock(mutex)

do_something_on_flag_set(); 
```

但它永远不会起作用，因为您在等待期间永远不会释放互斥锁，没有其他人可以以线程安全的方式设置标志。这就是为什么我们需要条件变量的原因，当您等待条件变量时，相关联的互斥锁不会被您的线程持有，直到它发出信号。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-29T18:48:30.927

我也在考虑这个问题，我认为到处都缺少的最重要的信息是互斥锁一次只能由一个线程拥有（或更改）。因此，如果您有一个生产者和多个消费者，则生产者将不得不等待互斥体进行生产。与条件。它可以随时产生的变量。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-23T10:07:19.193

您需要条件变量，与互斥锁（每个 cond.var. 属于互斥锁）一起使用，以指示从一个线程到另一个线程的状态（条件）变化。这个想法是线程可以等到某个条件变为真。这些条件是特定于程序的（即“队列为空”、“矩阵很大”、“某些资源几乎耗尽”、“某些计算步骤已完成”等）。一个互斥锁可能有几个相关的条件变量。而且您需要条件变量，因为这些条件可能并不总是简单地表示为“互斥锁已锁定”（因此您需要将条件更改广播到其他线程）。

阅读一些好的 posix 线程教程，例如[本教程](https://computing.llnl.gov/tutorials/pthreads/)或[那个](http://www.laptev.org/doc/pthreads.html)或[那个](http://web.vtc.edu/users/pcc09070/TutorialPThread/pthread-Tutorial.pdf)。更好的是，阅读一本好的 pthread 书籍。看到[这个问题](https://stackoverflow.com/questions/4725275/good-book-resource-for-pthreads-absolute-beginner)。

另请阅读[高级 Unix 编程](http://basepath.com/aup/)和[高级 Linux 编程](http://www.advancedlinuxprogramming.com/)

PS 并行和线程是难以掌握的概念。花时间阅读和实验，然后再阅读。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-17T22:06:39.213

条件变量和互斥锁对可以替换为二进制信号量和互斥锁对。使用条件 var + mutex 时，消费者线程的操作顺序为：

1.  锁定互斥锁

2.  等待条件变量

3.  过程

4.  解锁互斥锁

生产者线程的操作顺序是

1.  锁定互斥锁

2.  向条件变量发出信号

3.  解锁互斥锁

使用 sema+mutex 对时对应的消费者线程序列为

1.  等待二进制 sema

2.  锁定互斥锁

3.  检查预期条件

4.  如果条件为真，则处理。

5.  解锁互斥锁

6.  如果步骤 3 中的条件检查为假，则返回步骤 1。

生产者线程的顺序是：

1.  锁定互斥锁

2.  发布二进制 sema

3.  解锁互斥锁

如您所见，使用条件 var 时步骤 3 中的无条件处理被使用二进制 sema 时步骤 3 和步骤 4 中的条件处理替换。

原因是当使用 sema+mutex 时，在竞争条件下，另一个消费者线程可能会潜入第 1 步和第 2 步之间并处理/取消条件。使用条件变量时不会发生这种情况。使用条件 var 时，在第 2 步之后保证条件为真。

二进制信号量可以替换为常规计数信号量。这可能会导致步骤 6 到步骤 1 循环多次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-26T10:02:06.607

我认为它是实现定义的。
互斥体是否足够取决于您是否将互斥体视为临界区的机制或更多。

如[http://en.cppreference.com/w/cpp/thread/mutex/unlock](http://en.cppreference.com/w/cpp/thread/mutex/unlock)中所述，

> 互斥锁必须由当前执行线程锁定，否则行为未定义。

这意味着线程只能解锁在 C++ 中被自己锁定/拥有的互斥锁。
但在其他编程语言中，您可能能够在进程之间共享互斥锁。

因此区分这两个概念可能只是性能考虑，复杂的所有权标识或进程间共享对于简单的应用程序是不值得的。

* * *

例如，您可以使用额外的互斥锁修复 @slowjelj 的情况（这可能是不正确的修复）：

线程1：

```
lock(mutex0);
while(1) {
    lock(mutex0); // Blocks waiting for notification from Thread2
    ... // do work after notification is received
    unlock(mutex1); // Tells Thread2 we are done
} 
```

线程2：

```
while(1) {
    lock(mutex1); // lock the mutex so Thread1 will block again
    ... // do the work that precedes notification
    unlock(mutex0); // unblocks Thread1
} 
```

但是您的程序会抱怨您触发了编译器留下的断言（例如，Visual Studio 2015 中的“解锁无主互斥锁”）。

# php - Codeigniter 设置变量

> ID：12551351
> 
> 赞同：3
> 
> 时间：2012-09-23T09:59:52.710
> 
> 标签：php, arrays, codeigniter

我有一个名为我的`categories`控制器

```
function description($id=null) {
    $this->load->helper(array('form', 'url'));
    $this->load->library('session');
    $this->load->view('category/description');
    $this->load->model('userdata_model');
    $data = $this->userdata_model->desc($id);
    $this->load->view('category/description', $data);
} 
```

现在，当我这样做时，`print_r($data);`它会给我以下结果

```
Array
(
    [0] => stdClass Object
        (
            [id] => 4481
            [title] => Dvd Recorder Post
            [image_name] => 
            [image_name_work] => 
            [video_name] => 
            [work_type] => tape-recrder
            [description] => Test first..
            [agency] => 
            [services] => 
            [photographer] => 
            [company] => 
            [director] => 
            [dop] => 
            [userid] => 
            [display_order] => 99999
            [latest_work] => No
            [status] => Active
            [post_adddate] => 2012-03-26 10:14:07
            [date] => 2012-03-26 10:14:07
            [sub_cat] => dvd-reorder
            [views] => 75
            [url] => Dvd-recorder-post
            [post_cache] => 
            [post_cat_id] => 0
            [post_link] => 
            [post_pubdate] => 
            [post_seo_url] => 
            [post_status] => 0
            [post_type] => 0
        )

) 
```

现在，当我尝试在视图页面中访问`$data`时`description.php`，它给了我以下错误

> ```
> A PHP Error was encountered
> 
> Severity: Notice
> 
> Message: Undefined variable: data
> 
> Filename: category/description.php
> 
> Line Number: 2 
> ```

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:06:18.257

CodeIgniter 用于[`extract`](http://php.net/manual/en/function.extract.php)在视图页面中生成变量。因此，您必须传入一个关联数组作为`$this->load->view()`调用的第二个参数。在这种情况下，如果您希望将变量命名为`data`，则必须传入一个数组，其中元素键为`data`，值是您从模型中检索到的数据。

```
$data = array('data' => $this->userdata_model->desc($id));
$this->load->view('category/description', $data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T10:11:12.497

你可以这样做

```
 $data["ids"] = $this->userdata_model->desc($id);
 $this->load->view('category/description', $data); 
```

在您看来，您可以使用访问变量

```
$ids 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T10:14:02.170

`$data`是一个数组，包含您希望在查看页面上显示的所有信息。

在控制器中：

```
$this->load->model( 'userdata_model' );
// .. other code
$data = array(
        'description' => $this->userdata_model->desc($id)
    );
$this->load->view('category/description', $data ); 
```

鉴于：

```
<div><?php echo $description; ?></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-21T06:39:33.707

因为你在调用模型之前调用你的视图，所以删除那一行，几乎是好的

```
$this->load->helper(array('form', 'url'));
$this->load->library('session');
$this->load->model('your model');
$data['Posts'] = $this->YourModel->ModelMethod();
$this->load->view('Your view', $data); 
```

在你看来 foreach 像这样

```
<?php foreach($Posts as $item): ?>
  <?= item['id']   ;?> Or if you have STD Class <?= item->id   ;?>
<?php endforeach; ?> 
```

# php - 如何将 URL 编码的 JSON 数组转换为 PHP 数组

> ID：12551352
> 
> 赞同：2
> 
> 时间：2012-09-23T09:59:51.933
> 
> 标签：php

如何将从我的 android 应用程序发送的 URL 编码 JSON 转换为 PHP 数组。我得到的当前格式如下所示。

```
[{\\\"product_id\\\":\\\"33\\\",\\\"数量\\\":\\\"1\\\"},{\\\"product_id\ \\":\\\\"34\\\\",\\\\"金额\\\\":\\\\"3\\\\"},{\\\\"product_id\\\\":\\\\" 10\\\",\\\"金额\\\":\\\"1\\\"}]

```

如何将这些数据转换为以下格式

```
product_id 金额
   33 1
   34 3
   10 1

```

因为我想将这些数据插入 MySQL 数据库。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:01:36.713

使用[`json_decode`](http://php.net/manual/en/function.json-decode.php)：

```
echo json_decode($jsonarr); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T10:04:20.330

这可以通过 [json_decode来完成](http://php.net/manual/en/function.json-decode.php)

```
$json = '{"foo": 12345}';

$obj = json_decode($json);
print $obj->{'foo'}; // 12345 
```

**好读**

---[使用 json_decode() 的常见错误](http://php.net/manual/en/function.json-decode.php#example-3489)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T10:14:02.000

`json_decode(jsonencoded string, TRUE)`是编码json字符串的正确方法。

但是你的 json 字符串编码太深和递归了。您的 json 编码字符串应如下所示

```
[{"product_id":9,"amount":500},{"product_id":9,"amount":500},{"product_id":9,"amount":500}] 
```

否则，您将获得 NULL 值

# java - 为什么 Eclipsepedia 的 TreeViewer 需要此代码？

> ID：12551353
> 
> 赞同：3
> 
> 时间：2012-09-23T10:00:09.023
> 
> 标签：java, eclipse, swt, eclipse-rcp, jface

我从 eclipsepedia 中找到了这些[JFaceSnippets](http://wiki.eclipse.org/JFaceSnippets)。我对[TreeViewer](http://wiki.eclipse.org/JFaceSnippets#Snippet026TreeViewerTabEditing)特别感兴趣，但我无法理解[这里](http://git.eclipse.org/c/platform/eclipse.platform.ui.git/tree/examples/org.eclipse.jface.snippets/Eclipse%20JFace%20Snippets/org/eclipse/jface/snippets/viewers/Snippet026TreeViewerTabEditing.java)的代码：

```
TreeViewerFocusCellManager focusCellManager = new TreeViewerFocusCellManager(v,new FocusCellOwnerDrawHighlighter(v));  
ColumnViewerEditorActivationStrategy actSupport = new ColumnViewerEditorActivationStrategy(v) {  
   protected boolean isEditorActivationEvent(ColumnViewerEditorActivationEvent event) {  
    return event.eventType == ColumnViewerEditorActivationEvent.TRAVERSAL  
    || event.eventType == ColumnViewerEditorActivationEvent.MOUSE_DOUBLE_CLICK_SELECTION
    || (event.eventType == ColumnViewerEditorActivationEvent.KEY_PRESSED &&
             event.keyCode == SWT.CR)
    || event.eventType == ColumnViewerEditorActivationEvent.PROGRAMMATIC;  
  }  
};  
TreeViewerEditor.create(v, focusCellManager, actSupport, ColumnViewerEditor.TABBING_HORIZONTAL| ColumnViewerEditor.TABBING_MOVE_TO_ROW_NEIGHBOR  
 | ColumnViewerEditor.TABBING_VERTICAL | ColumnViewerEditor.KEYBOARD_ACTIVATION); 
```

为什么需要这个特定的代码片段？如果我在注释掉这段代码的情况下运行示例，似乎没有区别。
那么为什么使用此代码以及它在 中提供什么`TreeViewer`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:41:55.467

这部分代码允许就地编辑树单元格，因此您可以双击节点并编辑其内容。

此行允许树具有可用于编辑的“单元格”。

```
TreeViewerFocusCellManager focusCellManager = new TreeViewerFocusCellManager(v,new FocusCellOwnerDrawHighlighter(v)); 
```

此行确定何时激活单元格编辑器以进行就地编辑（双击，回车）

```
ColumnViewerEditorActivationStrategy actSupport = new ColumnViewerEditorActivationStrategy(v) {  
   protected boolean isEditorActivationEvent(ColumnViewerEditorActivationEvent event) {  
    return event.eventType == ColumnViewerEditorActivationEvent.TRAVERSAL  
    || event.eventType == ColumnViewerEditorActivationEvent.MOUSE_DOUBLE_CLICK_SELECTION
    || (event.eventType == ColumnViewerEditorActivationEvent.KEY_PRESSED &&
             event.keyCode == SWT.CR)
    || event.eventType == ColumnViewerEditorActivationEvent.PROGRAMMATIC;  
  }  
}; 
```

此行创建将用于编辑树单元格的实际编辑器

```
TreeViewerEditor.create(v, focusCellManager, actSupport, ColumnViewerEditor.TABBING_HORIZONTAL| ColumnViewerEditor.TABBING_MOVE_TO_ROW_NEIGHBOR   | ColumnViewerEditor.TABBING_VERTICAL | ColumnViewerEditor.KEYBOARD_ACTIVATION); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T10:39:28.957

当我阅读代码时，它指定了交互设置，例如，您可以通过双击并使用回车键等来激活单元格。其中一些设置可能与默认值一致。

# php - 不同类型功能的区别

> ID：12551356
> 
> 赞同：0
> 
> 时间：2012-09-23T10:00:44.903
> 
> 标签：php, function

这是我的第一个问题，所以请耐心等待。这个问题可能听起来很幼稚，但我真的很想知道编程中的函数是什么？它们是如何定义的以及如何调用它们来执行。我只是在学习php。我见过很多这样的功能

```
function myfunction () {
 --------
 --------
} 
```

和另一个像这样的类型函数

```
function myfunction (some variables) {
------------
------------
} 
```

我想知道它们之间有什么区别？任何帮助和建议或任何有价值的链接将不胜感激。在否决这个问题之前，任何评论或任何好的学习链接都会对我更有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:13:58.980

除了提供的功能（就数据而言）之外，这些功能完全相同。第一个不需要将变量从外部传递给它即可运行。

第二个具有它确实使用的变量，这些变量是从外部传递的，但是，这些变量可能不是*必需*的，因为可以为这些变量设置默认值。

编程中的函数用于执行重复性任务，例如从字符串中删除下划线并使每个单词的第一个字母大写。

要定义一个变量，最简单的方法是这样做：

```
function my_function () {
  // Function code here
} 
```

要调用此函数，您需要确保它是可访问的（例如包含在页面中），您只需执行以下操作：

```
my_function(); 
```

这将执行该函数并可能返回它的结果。

您也可以按照说明将变量传递给函数，但我建议查找有关 PHP 函数的教程。

[https://www.google.co.uk/search?q=PHP+Functions](https://www.google.co.uk/search?q=PHP+Functions) ...为您提供大量结果 :-)

这个解释是特定于 PHP 的，其他语言可能会有所不同。

# ruby-on-rails - 在 mac 上安装 Rails

> ID：12551362
> 
> 赞同：1
> 
> 时间：2012-09-23T10:01:09.587
> 
> 标签：ruby-on-rails, macos

在过去的 4 个月里，我正在尝试学习 Ruby on Rails。但问题是每当我有时间我都浪费时间尝试将它安装在我的 Mac 机器上。只需一个安装程序即可轻松安装在窗口中。但在 mac 中，我尝试了许多 Ruby 和 Rails 版本的组合。但无法运行它。总是遇到不同类型的错误，例如“找不到 gem sqlite3-ruby (>= 0) ruby​​”或捆绑安装程序等。

我知道这类问题会以多种形式进行讨论。我关注了他们中的许多人，但问题仍然存在。有人可以给我一个永久解决我的问题的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T12:18:14.807

[RVM](https://rvm.io/rvm/install/)是你的朋友 :)

只需一个命令即可同时安装 Ruby、Rails :)

```
 curl -L https://get.rvm.io | bash -s stable --rails 
```

**可选的其他东西：**

你可能想看看[珠宝盒](http://unfiniti.com/software/mac/jewelrybox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T12:56:05.300

几个月前我写了一篇关于这个的文章。一切都应该是相关的。[http://matthalliday.ca/weblog/entry/setting-up-a-ruby-on-rails-environment](http://matthalliday.ca/weblog/entry/setting-up-a-ruby-on-rails-environment)

# mysql - MySQL UPDATE 与来自不同表的 SELECT SUM

> ID：12551364
> 
> 赞同：11
> 
> 时间：2012-09-23T10:01:30.873
> 
> 标签：mysql, sql, join, sql-update

我有两个表： `ITEMS`数量和 unit_price (id | name | order_id | qt | unit_price) 和 table `ORDERS`。

我想为相同的订单放置`UPDATE`表格以获得订单的总价。`orders``orders.total_price sum of multiplications qt*unit_price`

对 items 表的`SELECT`查询非常简单，并且可以很好地为同一 order_id 中的所有项目提供总和：

```
SELECT SUM(items.qt*items.unit_price) from items GROUP by items.order_id 
```

但我不能在我的`ORDERS`表中插入这个值。我无法完成这项工作：

```
UPDATE orders, items SET orders.total_price = (SELECT SUM(items.qt*items.unit_price)
FROM items GROUP BY items.order_id) WHERE orders.id = items.order_id 
```

它返回`"Subquery returns more than 1 row"`

[我在这里](https://stackoverflow.com/questions/4212479/mysql-update-with-table-joins-update-one-tables-field-with-sum-of-other-table)发现了一个非常相似的问题，但答案对我也不起作用：

```
UPDATE orders SET orders.t_price = (SELECT SUM(items.qt*items.unit_price) from items WHERE orders.id = items.order_id) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-23T10:05:22.563

您可以`UPDATE`使用`JOIN`两个表：

```
UPDATE Orders o 
INNER JOIN
(
   SELECT order_id, SUM(qt * unit_price) 'sumu'
   FROM items 
   GROUP BY order_id
) i ON o.id = i.order_id
SET o.total_price = i.sumu
[WHERE predicate] 
```

# jquery - jQuery Datepicker UI 仅在单击关闭按钮或完成按钮时关闭

> ID：12551369
> 
> 赞同：3
> 
> 时间：2012-09-23T10:02:40.657
> 
> 标签：jquery, jquery-ui, date, datepicker

我正在使用 jQuery UI 日期选择器，..

Datepicker 工作正常，但是当我们在日历之外单击或单击`Escape`按钮时它会关闭。但我希望我的日期选择器仅在我们单击完成按钮时关闭。

```
$(".date-picker").datepicker({
    dateFormat: 'mm-yy',
    changeMonth: true,
    changeYear: true,
    showButtonPanel: true,

    onclose: function(dateText, inst) {
        var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
        var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
        $(this).val($.datepicker.formatDate('yy-mm', new Date(year, month, 1)));
    }
}); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-16T07:06:55.407

此解决方案也已发布在[jquery DatePicker Done button](https://stackoverflow.com/questions/15620540/jquery-datepicker-done-button/18267611#18267611)中，并且**效果很好：**

```
$(function() {
    $('.monthYearPicker').datepicker({
        changeMonth: true,
        changeYear: true,
        showButtonPanel: true,
        dateFormat: 'MM yy'
    }).focus(function() {
        var thisCalendar = $(this);
        $('.ui-datepicker-calendar').detach();
        $('.ui-datepicker-close').click(function() {
            var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
            var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
            thisCalendar.datepicker('setDate', new Date(year, month, 1));
        });
    });
}); 
```

**CSS：**

```
.ui-datepicker-calendar {
    display: none;
} 
```

和**HTML：**

```
<label for="myDate">Date :</label>
<input name="myDate" class="monthYearPicker"> 
```

看看它在这个[jsfiddle](http://jsfiddle.net/tmnasim/JLydp/)中是如何工作的。

**来源：http:** [//develop-for-fun.blogspot.com/2013/08/jquery-ui-datepicker-month-and-year.html](http://develop-for-fun.blogspot.com/2013/08/jquery-ui-datepicker-month-and-year.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:40:51.067

无法控制关闭日期选择器的触发器。您可以获得的最接近的可能是创建一个内联日期选择器并随意显示/隐藏。但是，“完成”按钮不会出现在内联日期选择器中，因为内联日期选择器通常不需要隐藏。这是我得到的最接近的，没有得到hacky：

[http://jsfiddle.net/william/c8Kcs/1/](http://jsfiddle.net/william/c8Kcs/1/)

HTML：

```
<input id="date" /> <button id="done">Done</button>
<div class="date-picker"></div> 
```

JavaScript：

```
$(".date-picker").hide().datepicker({
    dateFormat: 'mm-yy',
    changeMonth: true,
    changeYear: true,
    showButtonPanel: true,
    altField: '#date'
});

$('#date').click(function() {
    $(".date-picker").show();
    $('#done').show();
});

$('#done').hide().click(function() {
    $(".date-picker").hide();
    $(this).hide();
});
​ 
```

# c++ - 常量对象使什么成为常量？

> ID：12551375
> 
> 赞同：1
> 
> 时间：2012-09-23T10:04:28.337
> 
> 标签：c++, object, constants

根据我的测试，对象在创建后仍然可以修改。

```
//Let's use this copy constructor as an example:
Foo::Foo( const Foo& F )
{
  var = F.var;
}

//With this code:
Foo f1;
const Foo f2(f1); //No Error? 
```

没有初始化列表，因此 f2在创建**后**正在修改。因此，如果 Foo 的成员仍然是可修改的，那么保持不变的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:07:12.347

`f2`创建后不**被**修改。这条线

```
const Foo f2(f1); 
```

创建`f2`，并且`f2`可以在构造函数的主体中修改它自己的数据成员。一旦构造函数的主体退出，对象就被完全构造并且不能被修改。

有几点值得一提：

*   如果`var`是`const`，则必须在构造函数的初始化列表中对其进行初始化，并且不能在构造函数的主体中对其进行修改。这与您是否有`const` `Foo`实例无关。
*   如果`var`已声明`mutable`，则可以`const Foo`通过`const`修改`var`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T10:12:22.067

对象的生命周期在其构造函数完成之前不会开始（C++03 3.8“对象生命周期”），因此在此之前没有什么是`const`. 特别是，C++03 12.1/4 "Constructors" 说：

> `const`和`volatile`语义（7.1.5.1）不适用于正在构建的对象。此类语义仅在最派生对象 (1.8) 的构造函数结束后才生效。

# c# - 启用 EF 代码优先迁移 V 4.3.1.0

> ID：12551377
> 
> 赞同：1
> 
> 时间：2012-09-23T10:04:32.780
> 
> 标签：c#, entity-framework

我曾与其他迁移项目合作过，没有任何问题。在我当前的项目中，我将迁移和模型项目分开。添加迁移甚至启用迁移（已创建配置类）时出现以下错误：

> PM> enable-migrations -Force 在当前项目中找不到派生自 DbContext 的类。编辑生成的配置类以指定启用迁移的上下文。System.Reflection.ReflectionTypeLoadException：无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。在 System.Reflection.RuntimeModule.GetTypes(RuntimeModule 模块) 在 System.Reflection.RuntimeModule.GetTypes() 在 System.Reflection.Assembly.GetTypes() 在 System.Data.Entity.ModelConfiguration.Mappers.TypeMapper.<.ctor>b_ *1（程序集 a）在 System.Linq.Enumerable.d* _14 1.InsertRange `2.MoveNext() at System.Collections.Generic.List`（Int32 索引，IEnumerable `1 collection) at System.Data.Entity.ModelConfiguration.Mappers.TypeMapper..ctor(MappingContext mappingContext) at System.Data.Entity.DbModelBuilder.MapTypes(EdmModel model) at System.Data.Entity.DbModelBuilder.Build(DbProviderManifest providerManifest, DbProviderInfo providerInfo) at System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) at System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) at System.Data.Entity.Internal.RetryLazy`2.GetValue（TInput 输入）在 System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
> 在 System.Data.Entity.Internal.LazyInternalContext.get_CodeFirstModel()
> 在 System.Data.Entity.Infrastructure.EdmxWriter.WriteEdmx(DbContext context, XmlWriter writer) 在 System.Data.Entity.Migrations.Extensions.DbContextExtensions.<>c_ *DisplayClass1 .b*_0(XmlWriter w) 在 System.Data.Entity.Migrations.Extensions.DbContextExtensions.GetModel(Action`1 writeXml) 在 System.Data.Entity.Migrations.Extensions.DbContextExtensions.GetModel(DbContext context) 在 System.Data.Entity。 System.Data.Entity.Migrations.DbMigrator..ctor(DbMigrationsConfiguration configuration) at System.Data.Entity.Migrations.Design.MigrationScaffolder..ctor(DbMigrationsConfiguration migrationsConfiguration) 的 Migrations.DbMigrator..ctor(DbMigrationsConfiguration 配置，DbContext usersContext) System.Data.Entity.Migrations.Design.ToolingFacade.ScaffoldRunner.RunCore() at System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run() 无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:35:43.107

该消息说您没有从 DbContext 派生的类，这意味着您需要定义一个。

像这样的东西：

```
class MyContext: DbContext
{
   public DBSet<Some_Entity_Which_Represent_DB_table> SetName {get;set;}

   public MyContext() : base(here you can specify database with its name or connectionString or leave it empty)
   {}
} 
```

# mysql - 不知道如何写一个简单的查询

> ID：12551380
> 
> 赞同：2
> 
> 时间：2012-09-23T10:04:59.007
> 
> 标签：mysql, sql, sqlite

嗨，我有一个表格，其中包含产品数量和每个产品的评分，由于某些原因，我有每个产品的不同行以及每个对其进行评分的人的比率，如下所示：

```
p1 2
p2 4
p3 4
p1 4
p1 5
p1 3
p2 7 
```

我正在使用以下查询，但它显示了所有产品的平均费率，但我希望它单独显示每个产品的平均费率。

```
Select ProductName, AVG(Rate) FROM Products 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:06:55.587

只是`GROUP BY productName`：

```
Select ProductName, AVG(Rate) AS 'Average Rate'
FROM Products 
GROUP BY productName 
```

**编辑：**要显示率最高的一个：

```
SELECT ProductName, Rate
FROM Products
ORDER BY rate DESC
LIMIT 1 
```

**编辑 2：**要获得平均率最高的产品名称：

```
SELECT productname, AVG(rate) Avgrate
FROM Products
GROUP BY productname 
HAVING AVG(rate) = 
(
     SELECT AVG(rate) 
     FROM Products 
     GROUP BY productname 
     ORDER BY AVG(rate) DESC
     LIMIT 1
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T10:07:03.747

您需要添加分组依据。

```
Select ProductName, AVG(Rate) FROM Products GROUP BY ProductName 
```

**要对结果进行排序，请在 Group By 之后使用 Order By**

```
Select ProductName, AVG(Rate) FROM Products GROUP BY ProductName ORDER BY ProductName 
```

如果要降序排序，则上面的查询排序结果为升序，然后使用`DESC`，

```
Select ProductName, AVG(Rate) FROM Products GROUP BY ProductName ORDER BY ProductName DESC 
```

**选择评级较高的产品**

```
Select ProductName, AVG(Rate) FROM Products GROUP BY ProductName
HAVING AVG(Rate) = (SELECT MAX(AVG(Rate)) FROM Products GROUP BY ProductName) 
```

此查询返回所有具有最高平均评分的产品。

只有一种评分较高的产品在降序中使用 LIMIT

```
 Select ProductName, AVG(Rate) FROM Products GROUP BY ProductName 
 ORDER BY ProductName DESC
 LIMIT 1 
```

# .htaccess - 我的 .htaccess 文件中的 $1 [QSA,L] 是什么意思？

> ID：12551382
> 
> 赞同：105
> 
> 时间：2012-09-23T10:05:08.890
> 
> 标签：.htaccess

我需要改变我的`.htaccess`，有两行我不明白。

```
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

我什么时候应该使用这些行？

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2012-09-23T10:30:11.887

不是提供完整教程的地方，但简而言之；

[RewriteCond](http://httpd.apache.org/docs/2.2/en/mod/mod_rewrite.html#RewriteCond)基本上意味着“仅当这是真的时才执行下一个 RewriteRule”。`!-l`路径是请求不是链接的条件（表示`!`不是，`-l`表示链接）

[RewriteRule](http://httpd.apache.org/docs/2.2/en/mod/mod_rewrite.html#RewriteRule)基本上意味着如果完成的请求匹配（`^(.+)$`匹配除服务器根目录之外的任何 URL），它将被重写为`index.php?url=$1`，这意味着请求`olle`将被重写为`index.php?url=olle`)。

`QSA`意味着如果有一个查询字符串与原始 URL 一起传递，它将被附加到 rewrite (`olle?p=1`将被重写为`index.php?url=olle&p=1`.

`L`表示如果规则匹配，则不再处理低于此规则的任何 RewriteRules。

有关这方面的更完整信息，请点击上面的链接。重写支持可能有点难以掌握，但有很多关于 stackoverflow 的示例可供学习。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-07-21T00:03:05.577

如果满足以下条件，则重写 URL：
如果请求的文件名不是目录，

```
RewriteCond %{REQUEST_FILENAME} !-d 
```

如果请求的文件名不是存在的常规文件，

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

如果请求的文件名不是符号链接，

```
RewriteCond %{REQUEST_FILENAME} !-l 
```

然后用以下方式重写 URL：
获取整个请求文件名并将其作为“url”查询参数的值提供给 index.php。将原始 URL 中的任何查询字符串附加为进一步的查询参数 (QSA)，并停止处理此 .htaccess 文件 (L)。

```
RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

* * *

[Apache 文档 #flag_qsa](https://httpd.apache.org/docs/2.4/rewrite/flags.html#flag_qsa)

另一个例子：

```
RewriteRule "/pages/(.+)" "/page.php?page=$1" [QSA] 
```

使用 [QSA] 标志，请求

> /pages/123?一=二

将映射到

> /page.php?page=123&一=二

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-13T04:50:23.170

`version`这将捕获对、 `release`和等文件的请求`README.md`，如果已定义（如 /release 的情况）或“未找到”，则应将其视为端点。

# c# - 如何在 ListView 中添加不同的项目

> ID：12551386
> 
> 赞同：1
> 
> 时间：2012-09-23T10:05:52.670
> 
> 标签：c#, wpf, listview, gridview

我有一个`ListView`这种类型：

```
<ListView x:Name="LView">
    <ListView.View>
        <GridView x:Name="GView"></GridView>
    </ListView.View>
</ListView> 
```

最初我不知道 my 中会有多少列`GridView`，也不知道单个单元格的类型是什么。

我需要有可能在运行时添加新列，尤其是单元格包含不同对象的新行。

`ListView`有属性`Items`，所以如果我有一列字符串并且我想添加一行我写：

```
LView.Items.Add("my string"); 
```

现在我想添加一个新列：

```
GView.Columns.Add(new GridViewColumn()); 
```

添加了一个新列，但第一行的第二个单元格包含字符串“我的字符串”，为什么？我不想要这种行为，而是想要一个新的空单元格。

特别是如果我想添加一个新行，第一个单元格作为我必须做`String`的第二个单元格？`CheckBox`

我试过了：

```
LView.Items.Add("my second string", new CheckBox()); 
```

但是，显然，它不起作用。

我尝试添加一个新对象：

```
public class obj
{
    public string MyString{ get; set; }
    public CheckBox MyCBox { get; set; }
}

LView.Items.Add(new obj()); 
```

但它不起作用，因为它显示一个包含 (Namespace "+ obj") 的字符串，而且**我不知道会有多少列，所以我不知道 obj 类最初必须如何**。

我必须做些什么来解决我的问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T11:04:59.573

我认为您将数据项与 ui 元素混合在一起

`LView.Items.Add("my string");`

将使用默认模板作为文本元素呈现

如果您还没有定义任何数据模板并想显式添加 ui 元素，请尝试以下操作：

```
LView.Items.Add(new TextBlock { Text = "My string"}); 
```

但是，我认为 GridView 应该填充数据（以及数据绑定的功能），而不是明确的 ui 元素。列模板应定义数据的呈现方式（在您的情况下为复选框或文本元素）。

参见示例[http://www.c-sharpcorner.com/uploadfile/mahesh/gridview-in-wpf/](http://www.c-sharpcorner.com/uploadfile/mahesh/gridview-in-wpf/)

# jquery - 克隆对象上的单击功能

> ID：12551388
> 
> 赞同：0
> 
> 时间：2012-09-23T10:05:57.773
> 
> 标签：jquery, onclick, clone

看看[这个](http://jsfiddle.net/BramVanroy/7Wp9z/9/)小提琴。

这是最重要的标记：

```
$("div#images > img").click(function() {
    if ($(this).hasClass("active")) {
        $(this).fadeOut("fast").remove();    
        $("div#overlay").fadeOut("fast");
    }
    else {
        $(this).clone().addClass("active").appendTo("div#images");
        var marginL = -$("div#images > img.active").width() / 2;
        $("div#images > img.active").css("margin-left", marginL);

        $("div#overlay").fadeIn("fast");
    }
});​ 
```

## 我想要的是

当用户单击图像时，jQuery 应该克隆该图像并立即在灯箱样式的弹出窗口中打开它。（我不想为此使用插件。）这很好用。但是，我还希望当用户单击该克隆图像时，该图像被删除并且覆盖再次淡出。这根本行不通。

有人知道吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:48:12.410

由于该对象是一个活动对象并且您需要将 .click 函数更改为 .live 函数，如下所示：

```
$("div#images > img").click(function() {... 
```

对此：

```
$("div#images > img").live('click',function() {... 
```

这里是 jsFidle： http: [//jsfiddle.net/7Wp9z/52/](http://jsfiddle.net/7Wp9z/52/) 希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T11:20:19.263

试试这个：

```
function hideClone() {
    $(this).fadeOut("fast").remove();
    $("#overlay").fadeOut("fast");
}

$("#images").on('click', 'img', function() {
    var $this = $(this),
        $div = $this.closest('div'),
        $clone = $this.clone(),
        marginL = $clone.width() / -2;
    $clone.addClass("active").css("margin-left", marginL).appendTo($div).on('click', hideClone);
    $("#overlay").fadeIn("fast");
}); 
```

**[更新的小提琴](http://jsfiddle.net/7Wp9z/53/)**

# zend-framework - 如何在引导程序中获取教义事件管理器？

> ID：12551391
> 
> 赞同：2
> 
> 时间：2012-09-23T10:06:20.270
> 
> 标签：zend-framework, doctrine-orm, zf-boilerplate

我正在为我的 zend 框架项目使用[zf-boilerplate 。](http://www.zf-boilerplate.com)我正在使用 Gedmo 扩展，需要在引导程序中获取教义事件管理器的实例。

IE。我希望能够做到以下几点：

$evm = $this->getDoctrine()->getEventManager()

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:27:37.863

您可以通过调用访问实体管理器

```
Zend_Registry::get('em'); 
```

如果您处于引导程序的中间，请确保在访问它之前引导实体管理器。

> 就像资源方法一样，您使用 bootstrap() 方法来执行资源插件。就像使用资源方法一样，您可以指定单个资源插件、多个插件（通过数组）或所有插件。此外，您还可以混合搭配来执行资源方法。（[Zend 框架手册](http://framework.zend.com/manual/1.12/en/zend.application.theory-of-operation.html)）

即先执行下面的代码

```
// Execute all resource methods and plugins:
$bootstrap->bootstrap('doctrine'); 
```

## 更新

没有注意到问题是关于 EventManager 的。使用下面的代码来访问它

`Zend_Registry::get('doctrine')->getEventManager ();`

# java - 将 JSF 树与文件夹目录同步

> ID：12551397
> 
> 赞同：1
> 
> 时间：2012-09-23T10:06:52.430
> 
> 标签：java, jsf, richfaces

我必须将用户上传的文件按类别保存在目录下。应用程序目录必须将此目录显示为网页上的树。我正在使用 JSF 2.0 + Richfaces 4.0。我必须以编程方式在网页上显示带有树的目录结构。有没有人提供 API 或库来从我的根级目录中获取递归目录结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T16:34:19.910

使用 recursiveTreeNodesAdaptor & treeNodesAdaptor 组件

现场演示： [http ://livedemo.exadel.com/richfaces-demo/richfaces/treeNodesAdaptor.jsf?c=recursiveTreeNodesAdaptor](http://livedemo.exadel.com/richfaces-demo/richfaces/treeNodesAdaptor.jsf?c=recursiveTreeNodesAdaptor)

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

    <h:form>    
        <rich:tree style="width:300px" switchType="ajax" stateAdvisor="#{treeDemoStateAdvisor}">
            <rich:recursiveTreeNodesAdaptor roots="#{fileSystemBean.sourceRoots}" var="item" nodes="#{item.nodes}" />
        </rich:tree>
    </h:form>

</ui:composition> 
```

# javascript - Javascript中数组的重载[]运算符

> ID：12551398
> 
> 赞同：2
> 
> 时间：2012-09-23T10:06:52.350
> 
> 标签：javascript, operator-overloading

> **可能重复：**
> [如何在 javascript 中重载 [] 运算符](https://stackoverflow.com/questions/1711357/how-would-you-overload-the-operator-in-javascript)

是否可以在 Javascript 中为数组重载 [] 运算符？

例如，我想修改括号的行为，以便当它访问超出范围的索引时，它返回 0 而不是`undedined`.

我知道我可能会逃脱这样的事情：

```
function get(array, i) {
    return array[i] || 0;
} 
```

但这并没有真正按照我想要的方式修改数组的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T10:11:08.520

由于`[]`不是运算符，因此您不能“覆盖”它，但您可以向`Array`的原型添加属性，这在您的特定情况下可能会有所帮助。然而，这是一个[不好的做法](https://stackoverflow.com/questions/8859828/javascript-what-dangers-are-in-extending-array-prototype)：

```
Array.prototype.get = function(i, fallback) { return this[i] || fallback; }

a = [1, 2, 3]

a.get(0, 42)
1

a.get(4, 42)
42 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T10:07:55.813

`[]`不是运算符，您不能覆盖它。

[您可以覆盖其他 javascript 对象的访问器](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)（即覆盖`['somespecificvalue']`写入或读取），但不能覆盖`[]`数组。

我会补充说我很高兴你不能覆盖它。除了使整个应用程序不可读（在您阅读整个代码以确保没有更改之前无法理解基本句法元素以确保没有更改的应用程序是不可读的）之外，我没有看到这一点。

# sql - JOIN 语句不适用于 where 子句

> ID：12551412
> 
> 赞同：1
> 
> 时间：2012-09-23T10:08:40.063
> 
> 标签：sql, postgresql, join

我正在尝试做

```
select * 
from buildings 
where levels = 3 
join managers; 
```

但它在加入时说错误。我想将建筑物的 id 与 manager 表中的 id 匹配，所以我想我想要自然加入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T23:47:11.597

如果您将 JOIN 放在正确的位置（在 FROM 和 WHERE 之间）并且在没有 ON 的情况下编写 JOIN 是合法的，那么结果将是一个交叉连接 - 然后您在 WHERE 中过滤的笛卡尔积。

这是一件完全有效的事情，尽管在这种情况下可能不是您想要的。它可以通过在`FROM`子句中添加逗号分隔的表来实现，例如：

```
FROM buildings, managers 
```

当您打算在一个条件下连接两个表时，编写*显式内部连接*通常会更好：

```
SELECT *
FROM buildings b INNER JOIN managers m ON (b.manager_id = m.manager_id)
WHERE b.levels = 3; 
```

...因为它使阅读该语句的其他人清楚地知道该`ON`子句是一个连接条件，并且`bl.levels=3`是一个过滤器。SQL 实现通常不关心，很可能将上述内容转换为：

```
SELECT *
FROM buildings b, managers m
WHERE b.levels = 3 AND b.manager_id = m.manager_id; 
```

无论如何在内部，但是当使用显式连接语法编写具有许多连接的复杂查询时，更容易（IMO）理解它们。

还有另一种写你想要的方法，但它很危险，不应该使用 IMO：

```
SELECT * 
FROM buildings bl
NATURAL JOIN managers m                                      
WHERE bl.levels = 3; 
```

在任何名称相同的列上加入。调试是一场噩梦，您必须查找表结构才能了解它的作用，如果有人重命名列，它就会中断，而且很痛苦。不使用。请参阅[PostgreSQL 手册中的表表达式](http://www.postgresql.org/docs/9.2/static/queries-table-expressions.html)。

更可接受的是`USING`上面讨论的语法：

```
SELECT * 
FROM buildings bl
INNER JOIN managers m USING (manager_id)
WHERE bl.levels = 3; 
```

它匹配两个列中命名`manager_id`的列和`JOIN`它们上的 s，将它们组合成一个列，但不像`NATURAL JOIN`这样做是明确的并且没有可怕的魔法。

我仍然更喜欢写作`INNER JOIN ... ON (...)`，但使用它是合理的，`USING`而且，IMO，永远不会合理使用`NATURAL`.

* * *

测试表结构为：

```
create table managers ( manager_id integer primary key );

create table buildings (
    manager_id integer references manager(manager_id),
    levels integer
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T10:11:17.317

`JOIN`运算符应用于表，您应该在`FROM`子句中提供它。如果你这样做，你会得到一个新的错误，声称没有`JOIN`条件，因为你必须`JOIN`在子句之后提供条件`ON`（它不是可选的）：

```
SELECT * 
FROM  buildings b JOIN managers m ON b.managerid = m.id
WHERE b.levels = 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T10:12:02.607

如果你想这样做，你必须写这样的东西：

```
select * 
from bulidings b
join managers m on b.id=m.id
where levels = 3 
```

然而，这个请求似乎很奇怪，我相信其中一个应该有一个外键进入另一个。所以更合适的查询是：

```
select *
from buidings b
join managers m on b.id = m.building_id //// or b.manager_id = m.id
where levels = 3 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-23T10:14:14.130

我认为你写的哪个查询是错误的。

所以请试试这个

```
 select * from buildings as bl
    join managers as mn on bl.F_ManagerID = mn.ManagerID
    where bl.levels = 3 
```

我想这会帮助你...

# android - 如何添加/删除 ArcGISTiledMapServiceLayer

> ID：12551414
> 
> 赞同：2
> 
> 时间：2012-09-23T10:09:33.153
> 
> 标签：android, osmdroid

我有一个 osmdroid 地图。我要在上面添加一个图层，它不是叠加层，它是一个图层。当我添加图层时没有问题，但是当我尝试删除图层时。有一个例外：

> ***该图层不是当前地图的子图层。***

添加和删​​除图层的代码是：

如果（Layer_List_Adapter.toggle_status==true）{

```
 Log.i("ADDING LAYER... :", "Adding...");
                    mapView.addLayer(dmsl);
                    Log.i("Layers ::", ""+mapView.getLayers());
                    layer_added_falg=true;

            }

            else if(Layer_List_Adapter.toggle_status==false)
            {

                Log.i("A", "A");

                    if(layer_added_falg==true)
                    {
                    try
                    {
                        Log.i("REMOVING LAYER... :", "Removing...");
                        Log.i("Layers ::", ""+mapView.getLayers());
                        mapView.removeLayer(mapView.getLayerByID(layerId));
                        mapView.refreshDrawableState();
                        layer_added_falg=false;
                    }
                    catch (Exception e) {
                        // TODO: handle exception

                        Log.e("ERROR :", e.getMessage());
                    }
                    }

                    else
                    {

                    }

            } 
```

# android - 处理不同的 API 布局

> ID：12551416
> 
> 赞同：0
> 
> 时间：2012-09-23T10:09:54.390
> 
> 标签：android, xml, api, layout

如何为每个 Android 版本设置不同的 xml 布局文件？就像你对字符串所做的那样，你创建了一个名为 values-es 的文件夹，并且会有西班牙语版本的字符串，有没有办法用 xml 布局做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:21:22.377

您需要像这样为每个版本创建不同的文件夹（例如）：

`layout-v11`- 当 API 版本为 Honeycomb 或更高版本时，将使用此布局文件夹

（替换`11`为您要为其他版本创建布局的 android 版本）。

有关更多信息，请参阅此链接-> [http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)

# spring - Hibernate + Spring 两个具有自己实体子集的持久化单元

> ID：12551418
> 
> 赞同：2
> 
> 时间：2012-09-23T10:10:04.183
> 
> 标签：spring, hibernate

我是 Spring 的新手，但总的来说我知道它的功能，所以我决定在我的一个项目中使用它。然而，主要问题在于 Hibernate。在引入spring这个想法之前，前提是：

我的应用程序（不是网络）必须连接到数据库并使用“persistence_1.xml”和它自己的一组实体类从它收集信息。换句话说，与“persistence_1.xml”相关的所有内容都是只读的，因此不会发生悲剧。名称为“p1”的持久性单元的“persistence_1.xml”也来自网络应用程序依赖项。所以图片是这样的：我的应用程序（非网络）在 maven 的支持下编写，获取其他应用程序的依赖项来访问数据库并收集信息。

另一个持久性单元名称为“p2”的“persistence_2.xml”和它自己的实体子集是由我创建的，用于将收集和处理的信息存储到同一个数据库中。

所以最初我有两个实体经理一个负责“p1”另一个负责“p2”。

我在互联网上看到了一些材料，其中展示了如何使用不同的数据源配置两个实体管理器，但我不知道如何在 SPRING 中使用他们自己的一组实体创建两个实体管理器。

假设“test”仅与“UserEntity”相关联，“dummy”仅与“DumbEntity”相关联。

现在一切都被混合在一起了，无论我在 @PersistenceContext(name = "test") 中输入哪个 PU 名称 - 它都可以查询数据库中的任何实体。这是一个例子`persistence.xml:`

```
<persistence-unit name="test" type="RESOURCE_LOCAL">
    <class>org.test.db.UserEntity</class>
</persistence-unit>
<persistence-unit name="dummy" type="RESOURCE_LOCAL">
    <class>org.test.db.DumbEntity</class>
</persistence-unit> 
```

豆定义：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="url" value="jdbc:mysql://localhost:3306/spring"/>
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="username" value="root"/>
    <property name="password" value=""/>
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceUnitName" value="test" />
    <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="generateDdl" value="true" />
            <property name="showSql" value="true" />
            <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect" />
        </bean>
    </property>
</bean>

<bean id="entityManagerFactory2" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceUnitName" value="dummy" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="generateDdl" value="true" />
            <property name="showSql" value="true" />
            <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect" />
        </bean>
    </property>
</bean>

<tx:annotation-driven/>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<bean id="transactionManager2" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory2"/>
</bean>

<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

<bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>

<bean name="userDao" class="org.test.services.UserDaoImpl" /> 
```

我的 UserDaro 服务

```
public class UserDaoImpl implements UserDao {

@PersistenceContext(unitName = "test")
private EntityManager entityManager;

public UserDaoImpl() {

}

public UserDaoImpl(EntityManager entityManager) {
    this.entityManager = entityManager;
}

@Transactional(propagation = Propagation.REQUIRES_NEW)
@Override
public void saveUser(UserEntity user) {
    entityManager.persist(user);
}

@Transactional(propagation = Propagation.REQUIRES_NEW)
@Override
public void saveUser(DumbEntity user) {
    entityManager.persist(user);
}

@Override
public List<UserEntity> fetchAllUsers() {
    String sql = "FROM UserEntity";
    Query query = entityManager.createQuery(sql);
    return query.getResultList();
}

@Override
public List<DumbEntity> fetchAllUsers2() {
    String sql = "FROM DumbEntity";
    Query query = entityManager.createQuery(sql);
    return query.getResultList();
}

public void setEntityManager(EntityManager entityManager) {
    this.entityManager = entityManager;
} 
```

}

无论如何，无论我是否使用 fetchAllUsers() 或 fetchAllUsers2() 我都会得到结果，但我希望它们中的每一个都只能与仅了解特定实体的 entityManager 一起使用。

我希望你分享你对这个的想法。谢谢你。

# php - 如何在 PHP 中回显上次访问的页面？

> ID：12551419
> 
> 赞同：0
> 
> 时间：2012-09-23T10:10:30.163
> 
> 标签：php

我不知道是否有像以**$_SERVER['']**开头的 PHP 函数 来告诉用户他来自哪个页面，在他的当前页面上。

前任。如果我正在浏览 foo.com?id=abc 然后转到 foo.com?id=efg，我需要当前页面来告诉我我直接来自 foo.com?id=abc

我非常需要这段代码，所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T10:12:03.653

它是`$_SERVER['HTTP_REFERER']`。但只有**在**浏览器这样做时才会被填充。否则，您需要自己跟踪用户（即通过在会话中存储最后一页）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T10:22:05.433

不应依赖 $_SERVER 变量来提供准确的答案。您应该使用 PHP Sessions 来跟踪它们来自哪个页面，并在每次它们进入新页面时简单地更新它。类似于以下内容：

```
session_start();
if(!empty($_SESSION['visited_pages'])) {
  $_SESSION['visited_pages']['prev'] = $_SESSION['visited_pages']['current'];
}else {
  $_SESSION['visited_pages']['prev'] = 'No previous page';
}
$_SESSION['visited_pages']['current'] = $_SERVER['REQUEST_URI']; 
```

然后访问上一页，访问：**$_SESSION['visited_pa​​ges']['prev']**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T10:12:46.203

是的，这不仅在 PHP 中，这是 HTTP 协议规范的一部分，使用：

```
$_SERVER['HTTP_REFERRER'] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T11:13:18.133

**HTTP_REFERRER**给出了请求文件的页面地址。例如，页面上的图像是一个单独的请求，并且此请求将 $_SERVER['HTTP_REFERRER'] 设置为页面。

我认为浏览器不允许服务器访问历史记录。可以用JavaScript来完成，虽然只能提供一个后退按钮，但不能轻易访问url。虽然它可以使用简单的 css 和 javascript 技巧通过访问***计算颜色到链接来实现***。

# c# - mySqlAdapter.Fill 更新数据库后不返回行

> ID：12551420
> 
> 赞同：1
> 
> 时间：2012-09-23T10:10:35.110
> 
> 标签：c#, mysql, database, ado.net

我使用`DataTable/DataAdapter`体系结构在数据库和我的模型对象之间进行调解。我的数据库中有两个表，`dataGridView`两个窗口中有两个表。起初，我调用`GetData`方法来填充我的第一个`dataGridView`. 已成功填充。然后我更改其中的任何字段并调用`UpdateTableChanges`. 更改的行也成功添加到 db 中。然后我`GetData`再次调用填充 second `dataGridView`，但没有返回任何行。`GetData` 第二次调用时也没有任何错误。但是，当我不调用`UpdateTableChanges`并`GetData`第二次调用时，所有行都会返回。方法后有一些问题`UpdateTableChanges`。感觉这个方法改变了我的一些数据`_adapter`。所有方法中的所有参数都是正确的，因为如果我不调用则返回行`UpdateTableChanges`. 适配器更新数据库后，我需要更改什么来获取行？任何帮助都会很棒。为了更好地理解，我删除了 try/catch 块。

```
class DBModel 
{
    private readonly string _connectionString;
    private MySqlDataAdapter _adapter;
    private MySqlConnection _connection;

    public DBModel()
    {
        _connectionString = "SERVER = localhost; DATABASE = transportation; USER ID = root;";
        _connection = new MySqlConnection(_connectionString); 
        _adapter = new MySqlDataAdapter(String.Empty, _connection);
    }

    public BindingSource GetData(string selectCommand)
    {
        var bindingSource = new BindingSource();

        SetMySqlSelectCommand(selectCommand);
        var commandBuilder = new MySqlCommandBuilder(_adapter);
        var table = new DataTable();
        _adapter.Fill(table);
        bindingSource.DataSource = table;

        return bindingSource;
    }

    public void UpdateTableChanges(BindingSource bindingSource, string selectCommand)
    {
       SetMySqlSelectCommand(selectCommand);
       _adapter.Update((DataTable)bindingSource.DataSource);
    }

    private void SetMySqlSelectCommand(string selectCommand)
    {
        var mySqlCommand = _connection.CreateCommand();
        mySqlCommand.CommandText = selectCommand;
        _adapter.SelectCommand = mySqlCommand;
    } 
```

# java - 如何在单击按钮时将焦点设置在 jface 中的特定选项卡上

> ID：12551423
> 
> 赞同：0
> 
> 时间：2012-09-23T10:11:07.957
> 
> 标签：java, eclipse, swt, jface

我现在面临的问题是，我希望`tabbedfolder`单击按钮上的特定选项卡成为活动选项卡。我已经尝试了`setFocus()`此选项卡中包含的复合材料的方法，但它不起作用怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T10:22:10.503

尝试使用

```
tabFolder.setSelection(tabIndex/tabItem) 
```

此外，您可能想使用

```
tabItem.getControl().setFocus() 
```

希望这可以帮助。

# php - move_uploaded_file 和主目录中 public_html 中目标的相对路径？

> ID：12551426
> 
> 赞同：0
> 
> 时间：2012-09-23T10:11:24.090
> 
> 标签：php, file-upload

我现在正在使用 OpenSuse 12.2。为了学习和测试 PHP 代码，我使用 home 文件夹中的 public_html 目录：/home/wojtek/public_html/ 我通过以下方式访问项目文件：

```
http://localhost/~wojtek/projects/foo/bar.php 
```

但我不知道如何让 move_uploaded_file 工作。服务器根目录是 /srv/www。我将 upload_tmp_dir 设置为 /srv/www/tmp （我真的不知道它应该去哪里）。

当我将 move_upladed_file 的目标设置为 /srv/www/images 时，文件会降落在那里。但是我想使用 public_html 文件夹，因为我将所有文件都保存在那里。

例如：public_html/projects/foo/public_html/projects/foo/bar.php public_html/projects/foo/images/baz.jpg

我可以在 bar.php 中以某种方式使用 move_uploaded_file 的相对目标（'images/'）吗？这样我就可以像 bar.php 那样在 IMG 标签中相对访问图像？

对不起，如果这听起来有点混乱，但我是 PHP 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:42:17.237

不，您将无法从网页访问该`/srv/www/images`文件夹。`/home/wojtek/public_html/projects/foo/bar.php`

我建议要么

1）设置`move_uploaded_file`为`/home/wojtek/public_html/projects/foo/images`

或者

2) 使用符号链接从您的 public_html 文件夹访问 images 文件夹：

```
cd /home/wojtek/public_html/projects/foo
ln -s /srv/www/images/ 
```

然后看起来图像存储在 中`/home/wojtek/public_html/projects/foo/images`，但实际上它们仍然在这里`/srv/www/images`

但是，使用此方法您可能会遇到权限问题

# javascript - 图形按钮上的持久 CSS3 过渡效果

> ID：12551428
> 
> 赞同：0
> 
> 时间：2012-09-23T10:11:45.807
> 
> 标签：javascript, html, css, jquery-mobile, css-transitions

我对 Web 开发有点陌生，我想创建一个具有高亮脉冲效果的图形按钮，让我解释一下：

按钮构建了2层，第一层是默认状态总是显示，第二层是高亮状态（白色）只有当按钮被点击或触摸时才显示（该层的不透明度显示时为1，隐藏时为0 ）。

我的问题是，无论单击或触摸事件的持续时间如何，我都希望突出显示的不透明度从 0 变为 1。只有在达到值 1 时才会转换回不透明度 0 值，这意味着在高亮层的不透明度达到 1 之前不应触发释放事件（mouseup 或 touchend）。

我正在使用 Compass (scss) 和 jquery mobile 与 phonegap 封装。

我编写了一个有效的版本，但不符合我的目标：一旦我释放按钮，到突出显示状态的转换就会停止（例如，如果我非常快速地触摸，即使不透明度转换为 0.2 秒, 高亮状态是不可见的，尽管触发了 touchend 事件...（过渡在到达 1 之前返回到 0）...

整个代码可能不是那么干净，但我正在努力学习:)

欢迎任何线索或建议！

HTML 代码如下所示：

```
<div class=btn-test>
 <span>
  <a class=btn-a href=#>
  </a>
 </span>
</div 
```

SCSS 看起来像这样：

```
@import "compass/reset";
@import "compass/css3";

.btn-test {

  span {
      @include background-image(image-url("foo.png"));
      background-position: 0px 0px;

      width: 72px;
      height: 70px;

      display: inline-block;
    }

  a {
      @include background-image(image-url("foo.png"));
      background-position: 0 71px;

      @include transition-property(opacity);
      @include transition-duration(0.2s);
      @include transition-timing-function(ease);  

      width: 72px;
      height: 70px;

      display: inline-block;

      -webkit-touch-callout: none !important; 
  }

  .btn-a {

    opacity: 0;
  }

  .btn-a:active {

    opacity: 1;
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:34:37.843

你想要的是一个动画，而不是一个简单的过渡。您可以在 compass 0.13 alpha 中获得跨浏览器动画`gem install compass --pre`

解决方案是为您的不同状态添加关键帧：

```
@import "compass/css3/animation";

@include keyframes(flashButton){
  0%{
    opacity: 0;
  }
  50%{
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

.animate-button {
  @include animate(flashButton 1s ease);
} 
```

然后用一点 jQuery ：

```
$('.btn-test').on('click', function(){
  //reset state in case animation has already been played
  $('.btn-test').removeClass('animate-button');
  setTimeout(function(){$('.btn-test').addClass('animate-button')}, 1)
}); 
```

我还没有使用它，但你也可以使用[https://github.com/ericam/compass-animate](https://github.com/ericam/compass-animate)，它是这里[http://daneden.me/animate/的伟大 css 动画的指南针端口](http://daneden.me/animate/)

# c++ - 我不明白什么是回报

> ID：12551432
> 
> 赞同：2
> 
> 时间：2012-09-23T10:12:06.640
> 
> 标签：c++

我最近开始学习 C++，到目前为止我做得很好，直到我来到函数声明和调用。我不完全了解的是`return`每个功能的用途以及为什么每个功能都需要它。

另外，为什么需要函数类型？例如

```
int xamplefunc(){} 
```

int 类型有什么用？

编辑：嗯，我不确定我是否明白了。return 究竟是做什么的？幕后究竟发生了什么？调用函数是否将返回值存储为变量，还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:15:17.473

它就像

```
return_type  function_name(parameter list)
  {    
     //body of the function     
  } 
```

return_type 指定函数返回的数据类型。return_type 可以为 void，这意味着函数不返回任何数据类型。function_name 是函数的名称。函数名称应以字母或下划线开头。参数列表由用逗号分隔的变量及其数据类型组成。参数列表可以为空，这意味着该函数不包含任何参数。参数列表应包含数据类型和变量名称

例如，

```
 int factorial(int n, float j) 
```

**好读**

正如@DeadMg [http://www.wide-language.com/cpptuts/functions.html](http://www.wide-language.com/cpptuts/functions.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T13:27:10.520

也许它可以帮助你记住一个函数是如何在数学中定义的：函数 f(x) 接受一个参数 x 并返回一个你可以从 x 计算的值。例如，函数 sin 接受一个实数并返回另一个实数，即该数的正弦值。

C++ 函数就是它的模型。出于这个原因，当你定义一个函数时，你必须告诉编译器这个函数接受哪些类型的参数（这是括号中的参数列表）以及它返回的值类型（这是你调用的返回类型上面的“函数类型”；请注意，在 C++ 中，术语“函数类型”用于不同的东西）。

所以当你想写一个用 C++ 计算正弦的函数时，你可以这样做：

```
double sin(double x)
{
  // code to calculate the sine of x
} 
```

但是现在您遇到另一个问题：与通常将函数编写为单个表达式的数学不同，在 C++ 中您将编写一些要执行的语句列表。该语句列表通常会操纵许多值。那么你如何告诉编译器哪个值实际上应该作为 x 的正弦返回呢？

答案就是`return`声明。所以你的函数可能看起来像这样：

```
double sin(double x)
{
  double result = 0;
  // code to modify result so finally it contains the sine of x
  return result;
} 
```

但是请注意，这`return`不仅告诉编译器“这是要返回的结果”，而且还告诉编译器“当你到达这个语句时，你已经完成了，*现在返回给调用者。* ”

因此，例如，考虑以下代码，它使用特殊处理来检测 NaN 和无限值（为简单起见，我假设这些函数`is_bad`并`getnan`为此目的而编写）：

```
double sin(double x)
{
  if (is_bad(x))
    return getnan(); // when this is executed, the function *immediately* returns
  // if we get here, we therefore know the value x is a regular number
  double result;
  // calculate the sine
  return result;
} 
```

现在，有时您只想编写一些您想在调用时执行的代码，但*不需要*返回值。其他一些语言为此使用单独的结构，但 C++ 只是通过引入类型来模拟这种差异。那种类型是`void`。在这种情况下，您不需要显式`return`声明，因为无论如何都没有可返回的内容。例如：

```
void say_hello()
{
  std::cout << "Hello!\n";
} 
```

但请注意，该`return`语句对于提前返回仍然有用，这也是在这种情况下允许使用的原因：

```
void say_hello(std::string to_whom)
{
  if (to_whom = "satan")
    return; // I don't say hello to satan!
  std::cout << "Hello " << to_whom << "!\n";
} 
```

最后，关于函数的注释`main`：这个函数也有一个强制返回值`int`。使用该返回值，您可以告诉程序的调用者您的程序是成功完成还是发生了错误。所以你可以写（使用定义的常量`<cstdlib>`）

```
int main()
{
  return EXIT_SUCCESS; // I've succeeded in doing nothing!
} 
```

或者

```
int main()
{
  return EXIT_FAILURE; // I have no idea what I was supposed to do,
                       // so I couldn't do it :-)
} 
```

请注意，除了`EXIT_SUCCESS`one 之外，还可以返回`0`表示成功（实际上，通常`EXIT_SUCCESS`只有 value `0`）

现在`main`有一个附加规则，与任何其他返回值的函数不同，您可以省略该`return`语句。如果你这样做了，效果和你`return 0;`在函数末尾写的一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T10:13:52.113

您所说的函数“类型”是函数的返回类型。这意味着对该函数的调用将返回该类型的对象。return 语句是函数返回的地方。

```
int random() {
  return 4;
} 
```

此函数返回一个`int`. 您可以调用它来为 int 赋值：

```
int n = random(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T10:20:31.397

你有一个银行系统。您想让用户请求他们的余额。您实现了一个 getCurrentBalance 方法。在方法体中计算后，您将需要一个返回类型来返还他们的余额。您还需要一个输入参数，他们的帐号可能是：

```
double getCurrentBalance (int AccountNo)
{
   double balance = //Check balance for AccountNo in Database or whereever
   return balance; 
} 
```

请不要过多关注我使用过的类型。我知道双倍目前不是最好的。

```
return balance; 
```

这必须*匹配*我们的返回类型，即双精度。但是，您可以返回隐式转换为双精度的内容。如果您愿意，您可以返回 int balance（当然会失去精度）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T10:21:43.160

当你调用一个函数时，你有时想要得到一些东西，例如，你可以调用一个执行简单计算（2x2）的函数，并且你想要答案。如果没有办法返回答案，您将需要求助于各种解决方法。

您所谓的“函数类型”实际上是您希望从函数中获得的答案的类型。在您的情况下，您希望该函数返回一个 int 类型的值（例如一个数字）

如果 xamplefunc 是这样定义的：

```
int xamplefunc(){
    return 2*2;
} 
```

当您调用该函数时，您会期望返回 4。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-23T10:55:22.817

**编译器**必须`return type`知道这些变量，以便了解给定类型的变量，哪些是最适合的，哪些是读取和写入的，以及最佳分配。**`bitsize``registers``infer the memory addresses``address intervals`**

 **函数可能不返回值 (void)。如果它确实返回一个值，则该值必须可由函数的调用者获得。

被调用函数将其返回值放在调用函数已知且调用函数必须能够访问的位置。`ret`在指令执行之前将返回值放入内存中：

例如。给定以下功能：

```
int xamplefunc(int x, int y)
{
   return x + y;
} 
```

它将使用 MSVC 编译器在 x86 机器上进行组装，以：

```
:_xamplefunc@8
push ebp
mov ebp, esp
mov eax, [ebp + 8]
mov edx, [ebp + 12]
add eax, edx
pop ebp
ret 8 
```

或通过x86 机器上的[LLVM ：](http://llvm.org/)

```
define i32 @xamplefunc(i32 %x, i32 %y) nounwind uwtable readnone {
  %1 = add nsw i32 %y, %x
  ret i32 %1
} 
```

**注意**：使用的顺序和寄存器可能因编译器和版本而异，这是软件取证中的一个有用属性。

一些语言（例如Coffeescript）也通过返回函数声明中最后一个声明的值来提供隐式返回。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-23T10:14:26.257

```
int xamplefunc(){} 
```

`int`返回类型值且不接收任何内容的函数。此代码不正确，因为没有`return`, 如果没有编译错误 - 将返回一些垃圾。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-23T10:17:05.470

在做了一些操作之后，通常你需要将计算出的新值返回给函数调用者。假设我想添加两个数字并将添加返回给调用者，那么我可以将函数编写为

```
int add(int x,int y)
{
return X+y;
} 
```

这里的 return 语句告诉你，你返回 int 值。
如果你不想返回任何东西，那么你只需使用返回类型 void 如下

```
void add(int x,int y)
{
//some statements;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-23T10:19:13.530

Function 类型被恰当地称为**返回类型**。之所以这样调用它是因为它返回了您示例中的指定类型

```
 int xamplefunc(){} 
```

一个整数返回给你......

有关详细说明，请查看以下链接 [http://www.learncpp.com/cpp-tutorial/74a-returning-values-by-value-reference-and-address/](http://www.learncpp.com/cpp-tutorial/74a-returning-values-by-value-reference-and-address/)**

# java - Java exec() 不在 android 上运行 busybox 命令

> ID：12551435
> 
> 赞同：1
> 
> 时间：2012-09-23T10:12:35.770
> 
> 标签：java, android, exec, busybox

我想通过一个用于 android 的 java 程序运行一些 shell 命令。该应用程序只接受一个命令，在 shell 上执行它并返回结果。

我用这个：

> 进程 p=Runtime.getRuntime().exec(in); p.waitFor();
> 
> BufferedReader reader=new BufferedReader(new InputStreamReader(p.getInputStream()));
> 
> 字符串 line=reader.readLine();
> 
> 输出=线；
> 
> 而（线！=空）{
> 
> ```
>  output = output +"\n"+ line;
>    //System.out.println(line); 
> ```
> 
> line=reader.readLine();
> 
> }

“in”是来自文本框的输入。

1> 我观察到作为 android 一部分的大多数命令都适用于上述语句。但是我也安装了busybox来获取其他linux命令。但是这些命令都没有运行。每次它只返回一个 NULL 结果。我在 /system/xbin 和 /system/bin 中都安装了busybox（在将 /system 分区重新挂载为读/写之后）

2> 其次，如果我在 ls /sdcard 之类的特定位置执行 ls，它会将 /sdcard 作为命令。但是 ls -l 有效（以防万一您觉得空格引起了问题）

请帮帮我

# caching - Modx 插件缓存

> ID：12551443
> 
> 赞同：0
> 
> 时间：2012-09-23T10:13:11.153
> 
> 标签：caching, plugins, modx

在基于 MODx Revo 的站点上工作并尝试编写一个 simlpe 插件（受过去为 Evo 编写的“模板切换器插件”的启发）。下面是代码

```
if (isset($_GET['template'])) {
   $template_id=$_GET['template'];

   if(isset($template_id)){
       $template = $modx->getObject('modTemplate', $template_id);
       $modx->resource->template = $template->get('id'); 
   }

} 
```

最终，该插件将包含更多检查等，但是现在我只想确保它可以正常工作。想法很简单，它应该根据url提供的模板参数为页面获取不同的模板。阻止它按我想要的方式工作的问题是 modx 缓存。

我的问题是，如何在这种特定情况下操作缓存（清除/重新加载？），以便插件完成其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T13:41:21.233

试一试：

```
$modx->executeProcessor(array(
   'location' => 'system',
   'action' => 'clearCache',
)); 
```

我认为，您可能真正想做的是调查在插件而不是片段中更改页面模板。看看 OnWebPagePrerender 事件。[http://rtfm.modx.com/display/revolution20/OnWebPagePrerender](http://rtfm.modx.com/display/revolution20/OnWebPagePrerender)

另外，做一些测试，虽然一些事件在 modx 中列出并可用，但并非所有事件都实际实现[即不起作用] [还可以查看该父页面：http://rtfm.modx.com /display/revolution20/插件]

*****更新*******

 **嗯 - 好的，试试这个：

```
/* refresh all the core partitions */
$modx->cacheManager->refresh(); 
```

请注意，在阅读此处的文档后：[http:](http://rtfm.modx.com/display/revolution20/Caching) //rtfm.modx.com/display/revolution20/Caching 可用于不同版本的 modx 的不同方法，有些已被贬值。...因此，请务必扫描文档以找到适合您的 modx 版本的方法。**

# php - phpMyAdmin 未正确显示特殊字符

> ID：12551444
> 
> 赞同：1
> 
> 时间：2012-09-23T10:13:29.330
> 
> 标签：php, sql, encoding

> **可能重复：**
> [phpMyAdmin 中的编码问题。特别是包含俄语文本的记录](https://stackoverflow.com/questions/3078845/encoding-problem-in-phpmyadmin-specifically-with-records-containing-russian-tex)

我在数据库中显示俄语字符（西里尔字母）时遇到了问题。我首先在本地创建它 - 使用 pMA 的 v. 3.4.9。每个表的编码都设置为 utf8_general_ci。当我使用脚本从我的页面导入一些数据时，字符会正确显示在表格中。当我读取数据时，它们会正确显示在页面上。

现在我导出数据库以将其导入到将提供应用程序的服务器（运行 v. 2.10.0.2 的 pMA）。之后我看到我已经在表格中的数据现在变成了“？？？？？？” 而不是俄语字符。当我尝试读取数据时，它们会正确显示在页面上，但不会显示在数据库中。一切都设置为与我的本地相同，我不明白为什么我看到它不同。

apache服务器的设置有问题吗？请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:27:24.987

在php中的连接代码之后把这个代码

```
 mysql_query("set names 'utf8'"); 
```

或者

```
mysql_set_charset('utf8'); 
```

或尝试使用此设置将您的页面编码为 UTF-8

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></head> 
```

和

```
$link=mysql_connect(localhost,$username,$password);
mysql_set_charset(‘utf8′,$link) 
```

# r - R - 避免嵌套列表的循环

> ID：12551450
> 
> 赞同：4
> 
> 时间：2012-09-23T10:14:12.327
> 
> 标签：r, nested

我知道如果您正确理解该语言，几乎可以在 R 中始终避免 for 循环，但我正在努力寻找这样做的聪明方法

```
for (i in 1:100){
  AllData[[i]]$Div = NULL
} 
```

其中 AllData 是 100 个不同大小的列表的列表。有人可以给我线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T10:18:40.210

像这样：

```
AllData <- lapply(AllData, `[[<-`, "Div", NULL) 
```

# ruby-on-rails - 为什么当我在 rails 中使用 to: 而不是 :to => 时会出错？

> ID：12551453
> 
> 赞同：1
> 
> 时间：2012-09-23T10:14:27.297
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我正在运行 ruby​​ 1.9.3p194 rails 3.2.8 Gems 进行测试：guard (1.3.2) guard-rspec (1.2.1, 0.5.5) guard-spork (1.2.0, 0.3.2)

在哈希分配中我得到错误（测试运行中的错误）。例如

```
# This passes fine
page.should have_selector('h1', :text => 'TEST') 

#this dump an error
page.should have_selector('h1', text:'TEST') 
```

语法错误是这样的：语法错误，意外'）'，期待kDO_BLOCK（SyntaxError）测试：在：test =>中具有相同的效果

提前谢谢你的帮助。

要运行测试，我使用以下命令： bundle exec rspec spec/requests/test_page_spec.rb

这就是失败的地方。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:55:18.873

您可能正在运行 Ruby 1.8。`{ text: 'TEST' }`是 Ruby 1.9 中的一种新的哈希语法。

尝试通过写入`puts RUBY_VERSION`该文件来检查版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T13:04:48.800

这有点解决了。

现在我将使用 spork 服务器，然后从终端运行测试。我已经更新了 Gem，它修复了一些问题并带来了更多:(

无论如何感谢您的帮助。

# input - Hadoop 多次读取输入拆分

> ID：12551454
> 
> 赞同：2
> 
> 时间：2012-09-23T10:14:33.013
> 
> 标签：input, hadoop, split, iteration, regression

我需要*多次**迭代*输入拆分。我需要这个的原因超出了这个问题的范围。假设我只需要它（简单的解释是我需要多次使用输入拆分来填充数据结构，并且拆分可能足够大，以至于在第一次迭代后它无法容纳在内存中）

 *我想我可以做一些技巧，例如扩展`FileInputFormat`和`RecordReader`多次服务拆分，但我想知道在 Hadoop 中是否有任何“标准”方式来做这件事。我不知道在 Hadoop 中实现这一目标的任何标准方法，但可能我错过了一些东西。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:58:10.213

在多次通过拆分期间，您想对该数据结构执行什么操作？（查找、更新等）

您是否尝试过使用一些早期的 hadoop 作业（甚至可能是一些猪脚本）来并行执行该操作？*

# c++ - 等待几个应用程序完成

> ID：12551456
> 
> 赞同：1
> 
> 时间：2012-09-23T10:14:47.630
> 
> 标签：c++, process

我有两个 C++ 应用程序：

1.  *calc* - 计算密集型，从文件中读取配置

2.  *ui* - 提供用户友好性。将用户在 UI 中所做的选择转换为配置，启动*calc*并在*calc*完成时显示结果。

我想在*ui*中启动几个*calc*实例并等待它们全部完成，然后处理所有的结果。问题是，我怎样才能等待 8 个同时启动的进程完成？我用谷歌搜索了一下，但没有得出任何结论。带有 P_NOWAIT 的 spanwl 似乎很有希望，但似乎没有简单的（“内置”）方法可以查看该过程是否已经完成。

非常感谢任何帮助，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:41:21.823

如果您通过调用 CreateProcess 创建进程，您将获得一个可以等待的进程句柄。要一次等待多个句柄，请使用[WaitForMultipleObjects](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025.aspx)函数。此函数有一个限制 - 它一次只能等待 MAXIMUM_WAIT_OBJECTS（XP 为 64，不确定 Win7 中是什么）句柄。

# php - Facebook SDK 只返回 Graph API Explorer 不返回任何内容

> ID：12551460
> 
> 赞同：1
> 
> 时间：2012-09-23T10:15:19.980
> 
> 标签：php, facebook, sdk, facebook-fql

我有一个 fql 查询：

```
{"e426262700718049":"SELECT name, start_time, location, creator, pic_square FROM event WHERE eid=426262700718049","c426262700718049":"SELECT name FROM profile WHERE id IN (SELECT creator FROM #e426262700718049)"} 
```

在 Graph Api Explorer 中它工作得很好，但 sdk 只返回空数组。对于不同的查询，它工作得很好。

这就是我实现它的方式：

```
public function mquery($queries)
{
    $params = array(
            'method' => 'fql.multiquery',
            'queries' => $queries
    );
    return $this->getFb()->api($params);
} 
```

任何的想法？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:36:06.483

该问题与权限有关，您可能在尝试使用 SDK 检索该数据时未授权用户。

**您的查询使用 Graph API 和 Graph Explorer为我**返回空数据集，对您而言，它返回未经授权的用户无法使用的数据（使用 SDK 进行查询可能就是这种情况）。

如果您`access_token`根本不调用它，您将得到一个异常，但`access_token`默认使用 SDK 使用应用程序。只要确保在查询之前授权用户以获得正确的结果。

顺便说一句，您可以将 Graph API 用于相同的工作，而不是旧的休息调用：

```
$fb->api('/fql', array('q'=>'FQL QUERY OR MULTIQUERY')); 
```

# java - Java中的HTTP编程？

> ID：12551465
> 
> 赞同：0
> 
> 时间：2012-09-23T10:16:13.370
> 
> 标签：java, http, network-programming

我想基于 Java 中的 URL 创建一个 http 请求并更改其某些标头或添加新标头；然后，接收该请求的相应 http 响应并获取其标头值及其内容。我怎样才能尽可能简单地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:51:07.663

确实使用 apache httpclient 4.x 并使用 ResponseHandler。

HttpClient 有很多您可能希望原始 Java API 不提供的好东西，例如多线程使用、连接池、对各种身份验证机制的支持等。

下面是一个简单的示例，它执行 get 并将正文作为字符串返回给您。

```
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

...

DefaultHttpClient httpClient = new DefaultHttpClient();
HttpGet httpGet = new HttpGet("http://www.google.com");
httpGet.addHeader("MyHeader", "MyValue");

try {
    String body = httpClient.execute(httpGet, new ResponseHandler<String>() {

        @Override
        public String handleResponse(HttpResponse response) throws IOException {
            Header firstHeader = response.getFirstHeader("MyHeader");
            String headerValue = firstHeader.getValue();
            return EntityUtils.toString(response.getEntity());
        }
    });
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T10:35:11.253

您可以使用 Apache HTTP 客户端或使用标准实现它`HttpUrlConnection`

```
 URL url = new URL("http://thehost/thepath/");
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setRequestMethod(method); // GET, POST, ...
    connection.setDoOutput(true);
    connection.setDoInput(true);
    connection.addRequestProperty(key, value); // this way you can set HTTP header 
```

# python - RFID转发卡没有唯一的atr

> ID：12551472
> 
> 赞同：1
> 
> 时间：2012-09-23T10:17:11.367
> 
> 标签：python, smartcard, rfid, smartcard-reader, pcsc

我购买了一些 RFID 转发器卡，用于构建带有卡上唯一标识符的识别系统。`testenv`我在 Ubuntu 12.04 下设置了一个，并使用`pcscd`了守护进程和 scm scl011 读卡器。

问题是我所有的卡都有相同的 ATR，我无法提取唯一的 id。

我用来`pcsc_scan`获取 ATR，然后我尝试了一个 pyscard 示例脚本来获取大部分卡片的 ATR。pyscard 操作的结果是很多 ATR 不受支持，或者它们与另一张卡没有区别。

有人知道这里有什么问题吗？

*   [链接转发器](http://www.ebay.de/itm/200359479839?ssPageName=STRK%3aMEWNX%3aIT&_trksid=p3984.m1497.l2649#ht_1437wt_1397)
*   [皮斯卡](http://pyscard.sourceforge.net/Examples/scard-api/sample_getAttrib.py)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T11:48:51.647

应该期望相同类型的卡具有相同的[ATR](http://en.wikipedia.org/wiki/Answer_to_reset)。您需要了解卡片上的[属性](http://www.idautomation.com/barcode-faq/rfid/#TagDataConstructExamples)，包括供应商是否已使用标签对其进行预编程，如果是，这些标签是否包括 UID（标识单个项目）或 EPC（仅标识一类物品，就像杂货店里的条形码一样）。几乎可以肯定，您的卡的供应商没有对它们进行预编程，并且您应该在使用它们之前根据您的目的对它们进行格式化。如果您为您的员工购买了一堆实体身份证，您不会期望他们已经有您员工的照片和身份证号码 - 您需要在将卡片发给员工之前将这些信息放在卡片上。

# php - php或zend中国际电话号码验证的正则表达式是什么？

> ID：12551473
> 
> 赞同：5
> 
> 时间：2012-09-23T10:17:40.027
> 
> 标签：php, regex, zend-framework, zend-form

我有一个 zend 表单，其中有一个电话号码字段，并且必须检查验证器。

我决定为此使用正则表达式。我搜索了谷歌，但我得到的结果不起作用。

谁能给我正则表达式。这是我的代码：

```
 $phone = new Zend_Form_Element_Text('phone');
            $phone->setRequired(true);
            $phone->setLabel('Phone :')
            ->addFilter('StripTags')
            ->addValidator('NotEmpty', false, array('messages'=>'phone cannot be empty'))
            ->addFilter('StringTrim')
            ->addValidator('regex', false, array('/^[0-9 ]+$/','messages'=>'not a valid phone number'))
            ->addValidator('StringLength', false, array(5, 25, 'messages'=>'phone must be 5-25 character')) 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T11:13:40.737

```
/^((\+|00)\d{1,3})?\d+$/ 
```

试试上面的表达式。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T18:42:51.087

请注意，电话号码是存在的最难的日常数据验证之一（与电子邮件一起，例如可以包含“+”或域中的端口号）。您应该了解使用“一些”正则表达式的含义。可能有一些用户（甚至整个国家）与某些正则表达式不匹配。或者用户可以输入不是电话号码的数字，即使它们与正则表达式匹配。

[http://en.wikipedia.org/wiki/E.164](http://en.wikipedia.org/wiki/E.164)

Zend_Phone 实现 E.164 存在问题。但我最终没有实施。接受的解决方案 ( `/^((\+|00)\d{1,3})?\d+$/`) 甚至将下一个字符串匹配为有效电话：

```
+0000000000000000000000000000000000000000000000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-11T12:41:29.603

你可以试试这个，对我有用

```
/^(\+[\d|\-]*)\s([0-9]+)$/ 
```

或扩展版

```
/^(\+[011|999|998|997|996|995|994|993|992|991|990|979|978|977|976|975|974|973|972|971|970|969|968|967|966|965|964|963|962|961|960|899|898|897|896|895|894|893|892|891|890|889|888|887|886|885|884|883|882|881|880|879|878|877|876|875|874|873|872|871|870|859|858|857|856|855|854|853|852|851|850|839|838|837|836|835|834|833|832|831|830|809|808|807|806|805|804|803|802|801|800|699|698|697|696|695|694|693|692|691|690|689|688|687|686|685|684|683|682|681|680|679|678|677|676|675|674|673|672|671|670|599|598|597|596|595|594|593|592|591|590|509|508|507|506|505|504|503|502|501|500|429|428|427|426|425|424|423|422|421|420|389|388|387|386|385|384|383|382|381|380|379|378|377|376|375|374|373|372|371|370|359|358|357|356|355|354|353|352|351|350|299|298|297|296|295|294|293|292|291|290|289|288|287|286|285|284|283|282|281|280|269|268|267|266|265|264|263|262|261|260|259|258|257|256|255|254|253|252|251|250|249|248|247|246|245|244|243|242|241|240|239|238|237|236|235|234|233|232|231|230|229|228|227|226|225|224|223|222|221|220|219|218|217|216|215|214|213|212|211|210|98|95|94|93|92|91|90|86|84|82|81|66|65|64|63|62|61|60|58|57|56|55|54|53|52|51|49|48|47|46|45|44|43|41|40|39|36|34|33|32|31|30|27|20|7|1|\-]*)\s([0-9]+)/ 
```

# google-maps-api-3 - 从谷歌距离面板 api v3 获取距离

> ID：12551475
> 
> 赞同：0
> 
> 时间：2012-09-23T10:18:17.137
> 
> 标签：google-maps-api-3, distance

我想从这个谷歌距离面板示例中提取以公里为单位的距离并做一些数学函数。

任何人都可以请帮助..

[https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-panel](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-panel)

提前致谢

```
 <!DOCTYPE html>
    <html>
    <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Directions Complex</title>
    <link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet">
    <style>
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
    }
    #map_canvas {
        height: 100%;
    }
     @media print {
    html, body {
        height: auto;
    }
    #map_canvas {
        height: 650px;
    }
    }
    #directions-panel {
        height: 100%;
        float: right;
        width: 390px;
        overflow: auto;
    }
    #map-canvas {
        margin-right: 400px;
    }
    #control {
        background: #fff;
        padding: 5px;
        font-size: 14px;
        font-family: Arial;
        border: 1px solid #ccc;
        box-shadow: 0 2px 2px rgba(33, 33, 33, 0.4);
        display: none;
    }
     @media print {
    #map-canvas {
        height: 500px;
        margin: 0;
    }
    #directions-panel {
        float: none;
        width: auto;
    }
    }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script>
                      var directionDisplay;
                      var directionsService = new google.maps.DirectionsService();

                      function initialize() {
                        directionsDisplay = new google.maps.DirectionsRenderer();
                        var mapOptions = {
                          zoom: 7,
                          mapTypeId: google.maps.MapTypeId.ROADMAP,
                          center: new google.maps.LatLng(41.850033, -87.6500523)
                        };
                        var map = new google.maps.Map(document.getElementById('map_canvas'),
                            mapOptions);
                        directionsDisplay.setMap(map);
                        directionsDisplay.setPanel(document.getElementById('directions-panel'));

                        var control = document.getElementById('control');
                        control.style.display = 'block';
                        map.controls[google.maps.ControlPosition.TOP].push(control);
                      }

                      function calcRoute() {
                        var start = document.getElementById('start').value;
                        var end = document.getElementById('end').value;
                        var request = {
                          origin: start,
                          destination: end,
                          travelMode: google.maps.DirectionsTravelMode.DRIVING
                        };
                        directionsService.route(request, function(response, status) {
                          if (status == google.maps.DirectionsStatus.OK) {
                            directionsDisplay.setDirections(response);
                          }
                        });
                      }

                      google.maps.event.addDomListener(window, 'load', initialize);
                    </script>
    </head>
    <body>
    <div id="control"> <strong>Start:</strong>
      <select id="start" onChange="calcRoute();">
        <option value="chicago, il">Chicago</option>
        <option value="st louis, mo">St Louis</option>
        <option value="joplin, mo">Joplin, MO</option>
        <option value="oklahoma city, ok">Oklahoma City</option>
        <option value="amarillo, tx">Amarillo</option>
        <option value="gallup, nm">Gallup, NM</option>
        <option value="flagstaff, az">Flagstaff, AZ</option>
        <option value="winona, az">Winona</option>
        <option value="kingman, az">Kingman</option>
        <option value="barstow, ca">Barstow</option>
        <option value="san bernardino, ca">San Bernardino</option>
        <option value="los angeles, ca">Los Angeles</option>
      </select>
      <strong>End:</strong>
      <select id="end" onChange="calcRoute();">
        <option value="chicago, il">Chicago</option>
        <option value="st louis, mo">St Louis</option>
        <option value="joplin, mo">Joplin, MO</option>
        <option value="oklahoma city, ok">Oklahoma City</option>
        <option value="amarillo, tx">Amarillo</option>
        <option value="gallup, nm">Gallup, NM</option>
        <option value="flagstaff, az">Flagstaff, AZ</option>
        <option value="winona, az">Winona</option>
        <option value="kingman, az">Kingman</option>
        <option value="barstow, ca">Barstow</option>
        <option value="san bernardino, ca">San Bernardino</option>
        <option value="los angeles, ca">Los Angeles</option>
      </select>
    </div>
    <div id="directions-panel"></div>
    <div id="map_canvas"></div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:48:22.577

面板的内容是[DirectionsResult的表示](https://developers.google.com/maps/documentation/javascript/directions#DirectionsResults)

DirectionsResult 由路线、路段和步骤组成。腿和台阶具有距离属性，其中包含您想要的内容。

要强制以 km 为单位返回距离，请使用 DirectionRequest 的[unitSystem-option](https://developers.google.com/maps/documentation/javascript/directions#UnitSystems)：

```
unitSystem:google.maps.UnitSystem.METRIC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-30T07:30:22.910

您使用的方法不能准确地为您提供两点之间的距离。谷歌地图有一种方法可以返回两点之间的道路距离。

编辑此方法并使用 Google api 尝试

函数计算路由（）{

```
 var start = document.getElementById("PickupDestination").value;
    var end = document.getElementById("DropoffDestination").value;
    var distanceInput = document.getElementById("Kilometres");

    var request = {
        origin: start,
        destination: end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };

    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK) {
            directionDisplay.setDirections(response);
            distanceInput.value = response.routes[0].legs[0].distance.value / 1000;
        }

    });
} 
```

# security - 可以/我应该为 MVC 4 WebAPI 项目使用 SWT 或 SAML 令牌吗？

> ID：12551479
> 
> 赞同：1
> 
> 时间：2012-09-23T10:18:44.540
> 
> 标签：security, asp.net-mvc-4, asp.net-web-api

我已经在 Azure 中设置了我的 ACS。我创建了一个 MVC 4 WebAPI 项目。我在 Visual Studio 2012 中添加了“身份和访问权限”。

这正在运行。但是当我启动应用程序时，我得到以下信息： ID4014：SecurityTokenHandler 未注册以读取安全令牌（'BinarySecurityToken'，'http://docs.oasis-open.org/wss/2004/01/oasis-200401- wss-wssecurity-secext-1.0.xsd'）。

问题是我告诉 ACS 使用 SWT 而不是 SAML 2.0。根据我在有关保护 restfull wep api 的指南中看到的内容，swt 是要走的路。

如果我更改为 SAML 2.0，它都可以在 Web 界面中运行。但是，当我为 Windows Store（Metro）或其他客户端编写客户端以从项目的 WebAPI 部分获取数据时，这将如何解决？

任何建议继续。我应该使用 SWT，它是如何工作的。我应该使用 SAML 2.0，然后我应该在 Windows 应用商店客户端中处理authenticaitno 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:25:08.583

我找到了一个启用 swt 令牌的 nuget 打包 wif.swt。

```
 <microsoft.identityModel>
    <service saveBootstrapTokens="true">
      <audienceUris>
        <!--<add value="http://traffictheory.cloudapp.net/" />-->
        <add value="http://77.55.160.102:48451/" />
      </audienceUris>
      <issuerNameRegistry type="Microsoft.IdentityModel.Swt.SwtIssuerNameRegistry, Wif.Swt">
        <trustedIssuers>
          <add thumbprint="033F53598E4ED92E51C07238E36BBFF4E67ABAD2" name="https://traffictheory.accesscontrol.windows.net/" />
        </trustedIssuers>
      </issuerNameRegistry>
      <claimsAuthenticationManager type="S_Innovations.TrafficTheory.Web.Security.TrafficTheoryClaimsAuthenticationManager, S-Innovations.TrafficTheory.Web.Security" />
      <federatedAuthentication>
        <cookieHandler requireSsl="false" />
        <wsFederation passiveRedirectEnabled="true" issuer="https://traffictheory.accesscontrol.windows.net/v2/wsfederation" realm="http://77.55.160.102:48451/" reply="http://77.55.160.102:48451/" requireHttps="false" />
      </federatedAuthentication>
      <certificateValidation certificateValidationMode="None" />
      <securityTokenHandlers>
            <add type="Microsoft.IdentityModel.Swt.SwtSecurityTokenHandler, Wif.Swt" />
        </securityTokenHandlers>
        <issuerTokenResolver type="Microsoft.IdentityModel.Swt.SwtIssuerTokenResolver, Wif.Swt" />
      <!--<serviceCertificate>
        <certificateReference findValue="‎417DE8DCA4326B845C189BDE0990673433435524" storeLocation="LocalMachine" storeName="My" x509FindType="FindByThumbprint" />
      </serviceCertificate>-->    
    </service>
  </microsoft.identityModel> 
```

# r - 时间序列中的随机性

> ID：12551481
> 
> 赞同：-1
> 
> 时间：2012-09-23T10:18:56.640
> 
> 标签：r, time-series

如何将随机性引入每日时间序列？我有什么选择？

```
dataset = data.frame(days = as.Date(seq(from = as.Date("2021-01-01"),
                                        to   = as.Date("2025-12-31"), by = 1)),
                     obs  = rnorm(1826, mean = 1, sd = 2)) 
```

虽然这个时间序列是用 rnorm 创建的，但我有一个观察值的每日数据集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:21:27.060

如果您想使用给定的最小值或最大值进行采样，我会使用`runif`. 如果这是不可能的，您可以从正态分布中提取，然后在两侧切断。但是，截断样本的均值和 sd 保持等于您在 中指定的值并非易事`rnorm`。此外，正态分布并没有真正的最小值和最大值，尽管概率在远距离处变小。

这个 R-Help 线程提供了一些很好的指针，用于从具有最小值和最大值的正态分布生成数字：

[http://r.789695.n4.nabble.com/how-to-generate-a-normal-distribution-with-mean-1-min-0-2-max-0-8-td3481450.html](http://r.789695.n4.nabble.com/how-to-generate-a-normal-distribution-with-mean-1-min-0-2-max-0-8-td3481450.html)

这表明生成大量数字并截断是一个糟糕的解决方案，而且效率低下。

# jquery - 这个小部件叫什么？“滑动弹出”

> ID：12551483
> 
> 赞同：1
> 
> 时间：2012-09-23T10:19:26.950
> 
> 标签：jquery, html, widget, tumblr

抱歉，如果我发布了不适当的主题。

我想询问在 [http://www.lyrics007.com/Calvin%20Harris%20Lyrics/I%20Need%20Your%20Love%20Lyrics.html上找到的某个小部件](http://www.lyrics007.com/Calvin%20Harris%20Lyrics/I%20Need%20Your%20Love%20Lyrics.html)

每当您向下滚动“一定要喜欢这首歌！” 弹出窗口从底部滑出。我也想将该小部件调整到我的网站，但我不知道该怎么做。我尝试在 Google 上搜索一些术语“内容滑块等”。但无济于事。我也尝试检查元素，但我也没有走得太远。有谁知道我将如何在我的 Tumblr 博客上安装它？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:31:13.163

它被称为浮动侧边栏

这是一个关于如何创建浮动侧边栏/菜单的 jQuery 教程：

[netuts 的教程](http://net.tutsplus.com/tutorials/html-css-techniques/creating-a-floating-html-menu-using-jquery-and-css/)

和一个演示：

[netuts 上的浮动 div 教程演示](https://nettuts.s3.amazonaws.com/018_Floating_Menu/demo/dhtml_float_menu_final_nettut.html)

您可以根据用户的交互来扩展 div 的大小，就像 [http://www.lyrics007.com/Calvin%20Harris%20Lyrics/I%20Need%20Your%20Love%20Lyrics.html](http://www.lyrics007.com/Calvin%20Harris%20Lyrics/I%20Need%20Your%20Love%20Lyrics.html)

如果您对自己构建不感兴趣，可以使用这个 jquery 插件

[浮动边栏](http://designwoop.com/wp-content/uploads/stickysidebar/floating_sidebar.html)

# cookies - libCURL 和持久 cookie

> ID：12551485
> 
> 赞同：2
> 
> 时间：2012-09-23T10:19:41.133
> 
> 标签：cookies, libcurl

我想从 pokerplatforms 网页上抓取一些信息。

为此，我需要在 https 网页“www.name.com”上登录（发布）。但是信息被放置在一个子域“poker.name.com”上。登录效果很好，但是当我从子域 libcurl 获取站点时，会使用新的 cookie 建立一个新的连接 obv。然后我得到一个页面，提醒我必须登录。

现在我的问题是如何强制 libcurl 使用相同的连接或至少相同的 cookie 从子域获取页面。

编辑：不是我的问题的解决方案，但工作正常：我刚刚登录到子域。登录脚本也存在那里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T21:03:48.270

当您为 libcurl 句柄启用 cookie 时，您可以在后续请求中重新使用该句柄，libcurl 将自动使用 cookie。

如果您坚持关闭句柄并创建新句柄，则[CURLOPT_COOKIEJAR](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTCOOKIEJAR)是将 cookie 保存到文件中的选项，然后[CURLOPT_COOKIEFILE](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTCOOKIEFILE)可以随后从此类文件中再次读取它们。或者，您可以使用 libcurl 的[共享接口](http://curl.haxx.se/libcurl/c/libcurl-share.html)让多个句柄共享 cookie。

然后，为了“正确”地模仿这样的网站上的浏览器，您确实应该记录在手动会话期间发送和接收的 HTTP 标头，以便您可以确保您的程序使用与浏览器相同的 URL 和数据。

# jquery - 如何在 mvc3 中只显示日期？

> ID：12551489
> 
> 赞同：1
> 
> 时间：2012-09-23T10:20:35.113
> 
> 标签：jquery, asp.net-mvc-3

我使用过 Jquery UI 日期选择器。我的模型看起来像：

```
 [DataType(DataType.Date)]
 public DateTime? endDate { get; set; } 
```

用于在视图中显示

```
@Html.TextBoxFor(x => x.endDate, new { @class = "datepicker" }) 
```

脚本

```
<script type="text/javascript" language="javascript">
    $(document).ready(function () {
        $(function () {
            $(".datepicker").datepicker({
                dateFormat: "mm/dd/yy",
                changeMonth: true,
                changeYear: true
              });
        });
    });
</script> 
```

当显示日期时间时，它看起来像 09-Nov-12 12:00:00 AM 我只想显示没有时间的日期。感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:27:45.563

您可以通过日期时间选择器以所需格式解析日期。在javascript中试试这个：

```
$(document).ready(function(){
    $("#endDate").val($.datepicker.parseDate('mm/dd/yy', $("#endDate").val()));

    // Existing stuff
}); 
```

或者，您可以使用`$.datepicker.formatDate`.

**例子 ：**

```
$("#endDate").val($.datepicker.formatDate('dd-M-yy', new Date($("#endDate").val()))); 
```

**[演示](http://jsfiddle.net/PZgcp/17/)**

祝你好运 ！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T10:22:37.337

```
[DisplayName("Start Date")]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:MM/dd/yyyy}")]
public DateTime StartDate { get; set; } 
```

[仅来自 TextBoxFor() 的日期](https://stackoverflow.com/questions/1961114/date-only-from-textboxfor)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T10:24:39.993

用这个

```
@Html.TextBoxFor(x => x.HasValue ? x.Value.ToString("MM/dd/yy") : string.Empty, new { @class = "datepicker" }) 
```

您可以从这里选择您喜欢的任何格式：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T10:27:47.873

您可以使用上述任何一种方法，例如将其格式化为输出，但您真的需要在显示时返回 DateTime 属性吗？显示@Html.TextBoxFor(x => x.endDate.Date 不是更有效吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T10:36:59.017

因为`DateTime`我更喜欢使用`EditorTemplate`：

```
@model DateTime?

@Html.TextBox("", (Model.HasValue ? Model.Value.ToString("MM/dd/yyyy") : string.Empty), new { @class = "datepicker" }) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T09:14:22.840

我使用 EditorFor 而不是 TextBoxFor

```
@Html.EditorFor(x => x.endDate, new { @class = "datepicker" }) 
```

在工作正常的视图中。

# ios - AVAudioPlayer 在后台运行但没有收到 RemoteControlEvent

> ID：12551490
> 
> 赞同：1
> 
> 时间：2012-09-23T10:20:41.010
> 
> 标签：ios, background, avaudioplayer

我想完善我的问题，只有当用户按下播放器视图控制器中的主页按钮时，播放器才会收到远程控制事件。如果他按下播放键而不是在应用程序内想知道并按下主页按钮，音乐仍在播放，但在 remoteControlEvent 方面没有发生任何事情。我确定我错过了什么：|

```
-(void)viewDidLoad
{    
    [super viewDidLoad];
    // Register for background

    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
    [[AVAudioSession sharedInstance] setActive: YES error: nil];
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    [self becomeFirstResponder];

}

-(BOOL)canBecomeFirstResponder
{
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:33:29.417

尝试继承 UIWindow 或为 UIApplication 制作类别

我遇到过同样的问题。

[未在 appDelegate 中调用 remoteControlReceivedWithEvent](https://stackoverflow.com/questions/11862317/remotecontrolreceivedwithevent-not-called-in-appdelegate)

# c# - 如果在 Chrome 中打开，则无法保存 PDF

> ID：12551494
> 
> 赞同：0
> 
> 时间：2012-09-23T10:21:40.897
> 
> 标签：c#, asp.net, google-chrome, pdf

我编写了一个 ASP.NET (C#) 应用程序来在线创建 PDF 并在浏览器中显示它。

```
 string path = @pdf_path;
    WebClient client = new WebClient();
    byte[] buffer = client.DownloadData(path);      

    if (buffer != null)
    {
        Response.ContentType = "application/pdf";
        Response. AddHeader("content-length", buffer.Length.ToString());
        Response.BinaryWrite(buffer);
    } 
```

如果我使用 Internet Explorer 和 Mozilla Firefox，我可以保存并打印它。但是，如果我用 Chrome 打开它并单击保存按钮，则会保存 aspx 页面，而不是 PDF。

如何让 Chrome 显示 PDF 或显示并建议用户启用某些功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T17:52:29.117

if you want to force the browser to download the file add this header

```
Response.AppendHeader("Content-Disposition", "attachment;filename=" + "Sample.pdf"); 
```

* * *

but your codes works in chrome if you enable its pdf viewer :

The recent releases of Google Chrome (6 and up) have PDF support built-in, but it's not enabled by default.

type **about:plugins** in chrome and search for **pdf viewer** and enable it

[How To Enable the Built-in PDF Viewer in Google Chrome](http://www.techsupportalert.com/content/how-enable-built-pdf-viewer-google-chrome.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T11:02:57.477

在 Chrome PDF 模式下，您只需将鼠标指针移动到靠近右下角的位置，您就会得到一个带有保存按钮的小工具栏。

# php - 没有 php 扩展的 PHP 5.4.4 插件系统

> ID：12551502
> 
> 赞同：1
> 
> 时间：2012-09-23T10:22:15.403
> 
> 标签：php, plugins, fread

我想创建一个不需要像'classkit'或'curl'这样的php扩展并更改'php.ini'的插件系统，这样它就可以在大多数网络服务器上运行。问题是我有一个持续运行的脚本，`set_time_limit(0)`我想在不关闭脚本的情况下重新加载我的插件。

使用 fread 和 exec 会很容易，但是 php 版本 5.4.4 有一个非常愚蠢的行为：它在`<?php`and之间执行 exec 事情`?>`，所以我无法读取文件。

我的问题是如何使用 php 5.4.4 版制作插件系统？

感谢回复。

# c++ - 为什么多线程中的本地/堆栈变量不需要锁定

> ID：12551503
> 
> 赞同：1
> 
> 时间：2012-09-23T10:22:17.250
> 
> 标签：c++, multithreading

我曾研究过多线程（在 Qt 中），但我缺乏深入的知识。我认为运行时永远不会重复执行代码。一个函数将精确地保留在一个内存位置，所有调用者或对象都将使用它来调用它。在多线程中，我读到每个线程都有自己的堆栈、指令指针等。假设我们有一个全局函数，它可以转换成这样的汇编算法：

```
//GlobalFunction()
instruction 1 : move value 4 into accumulator
instruction 2 : add 5 to content of accumulator
instruction 3 : subtract 1 from content of accumulator
//some more stuff and function returns

//thread 1
call GlobalFunction()

//thread 2
call GlobalFunction() 
```

现在也许线程1的指令指针指向指令3，而线程2获取切片并执行指令1。在这个线程1执行指令3之后。累加器数据不会被破坏吗？如果是这样，那么为什么只使用非静态局部变量的函数不需要在多线程环境中锁定？

PS：另外我认为单个指令是原子的而不是一组指令，因此在执行另一个线程的指令之前，实现可能没有机会将寄存器数据刷新到某个存储位置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T10:25:44.917

虽然 CPU 上只有一组寄存器（为简单起见，我假设是一个单核系统），但系统管理寄存器文件，以便每个线程都有自己单独的寄存器状态 - 当操作系统从一个线程切换到另一个，第一个线程的寄存器被保存，第二个线程保存的寄存器被恢复。

对于自动/堆栈变量，每个线程都有自己的堆栈，因此除非线程做一些事情来明确共享这样的变量（通过传递地址或对另一个线程的引用），否则这些变量是不共享的，因此是线程安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T10:30:17.660

操作系统和 CPU 处理寄存器和各种 CPU 状态。多核 CPU 具有多个累加器/寄存器 - 每个活动线程一个。单核 CPU 不能在指令中间中断——整个可见的 CPU 状态都在寄存器中，由操作系统保存和恢复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T10:27:20.073

不，每个线程也有自己的执行寄存器（包括处理器可能拥有的任何累加器）。

在多处理器系统上，每个处理器都有自己的寄存器（这是使其成为独立处理器的核心），当多个线程切换到同一个处理器时，寄存器状态会被保存和恢复。

# ruby - Rails 范围内的 DateTime.parse

> ID：12551504
> 
> 赞同：0
> 
> 时间：2012-09-23T10:22:17.780
> 
> 标签：ruby, ruby-on-rails-3

我正在尝试在范围内使用 DateTime.parse 将字符串转换为时间，但是出现未定义的局部变量错误。

是否可以在范围内转换字段，还是我需要尝试其他方法？

我的范围：

```
 scope :time_range, lambda {
    a = DateTime.parse(start_time_am)
    where("#{a} <= ?", Time.now.strftime('%H'))
  } 
```

- 更新 -

在玩过这个之后，我发现我可能应该覆盖默认访问器。我现在有以下内容：

```
 def start_time_am
    read_attribute(:start_time_am).strftime("%H%M").to_i
  end 
```

在控制台中，我的 start_time_am 字段现在看起来像：

```
 Promotion.last.start_time_am
  => 430 
```

但是，如果我想暂时定义一个新字段，那么我仍然可以使用初始字段。

我可以在控制台中访问它，但在搜索时不能。例如。

```
 def start_time_new
     read_attribute(:start_time_am).strftime("%H%M").to_i
   end

  def self.time_range
    time = Time.now.strftime('%H%M').to_i
    where("start_time_new <= ?", time)
  end 
```

给出一个未知的列错误。我以为 attr_reader 会解决，但它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:50:00.980

如果您将其重写为等效的方法定义，则可能更容易弄清楚。

```
def self.time_range
  a = DateTime.parse(start_time_am)
  where("#{a} <= ?", Time.now.strftime('%H'))
end 
```

start_time_am 来自哪里？该方法没有任何参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:55:43.787

最后，我在 where 语句中做了转换，去掉了虚拟属性：

```
def self.time_available
  where("cast(start_time as time) <= cast(now() as time) and cast(end_time as time) >= cast(now() as time)")
end 
```

希望对某人有所帮助

# bash - 在 linux bash 中被 printf 弄糊涂了

> ID：12551509
> 
> 赞同：0
> 
> 时间：2012-09-23T10:22:42.470
> 
> 标签：bash, printf

我很困惑`printf`，这就是我所做的，

```
printf "%x" 1024  # output 400
printf \\x400  # output @0
printf \\x400 | od -An -tu4  # output 12352, why 12352 not 1024? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:41:07.910

来自`man printf`：

> 解释的序列是：
> ...
> \xHH 十六进制值 HH 字节（1 到 2 位）

您正在运行它`\x400`，它是*三位数*。`printf`prints `@`，它是由 编码的字符`\x40`，其余`0`的被打印为文字字符，因此`@0`，它*不是*十六进制值的表示`400`。

你想要的是

```
printf \\x00\\x04 | od -An -tu4 
```

打印`1024`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:43:45.270

如果使用`\x`符号，则只能表示一两个十六进制。数字（请参阅`man bash`），但如果您使用`0x`符号，则可以使用奇数位数：

```
/home/user1> printf "0x%x\n" 1024
0x400
/home/user1> printf '%d\n' 0x400
1024 
```

# assembly - INSTR 0x0(REG), REG, 0x0 位移是什么意思？

> ID：12551511
> 
> 赞同：1
> 
> 时间：2012-09-23T10:22:47.983
> 
> 标签：assembly, gdb, x86-64

我正在查看一些编译器生成的汇编代码（x86_64），发现很少有零位移的指令，如下所示。

```
 movzbl 0x0(%rbp),%eax 
```

这种 0x0 位移背后的原因可能是什么？（我是汇编新手，如果它已经是一个讨论过的问题，请指向我的链接。）据我了解，上述指令*将零扩展 rbp+(0x0) 复制到 eax*。

* * *

编辑：我找到了一个链接，虽然 [what-does-0x0-indicate-in-the-instruction](https://stackoverflow.com/questions/9985635/what-does-0x0-indicate-in-the-instruction)**解释了它**

谢谢..！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T10:25:55.033

这意味着`movzx eax, byte [rbp + 0]`。

中包含的地址处的内存操作数没有编码`(e|r)bp`，但是对于`(e|r)bp + constant`. 因此，该常量为 0 以从`rbp`.

# android - 在图像上方设置文本

> ID：12551513
> 
> 赞同：0
> 
> 时间：2012-09-23T10:23:14.130
> 
> 标签：android, android-listview, android-imageview, textview

![在此处输入图像描述](../Images/c466110cec141dff1da9424ab8f93bc6.png)

我想在图像上方设置文本名称。我该怎么做？我有一个列表视图和一个单独的图像视图。但我在搜索框中搜索一些名字。结果将显示带有文本的图像。我想在图像上方显示文本。

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/EditText01"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="Search" >
    </EditText>

    <ListView
        android:id="@+id/ListView01"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

列表视图.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="left|center"
    android:paddingBottom="5px"
    android:paddingLeft="5px"
    android:paddingTop="5px" >

    <ImageView
        android:id="@+id/ImageView01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </ImageView>

    <TextView
        android:id="@+id/TextView01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10px"
        android:textColor="#0099CC"
        android:textSize="20px"
        android:textStyle="bold" >
    </TextView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T10:35:10.963

实现此目的的两种方法是：

在你`listview.xml`改变你`LinearLayout`的垂直方向并定义第`TextView`一个。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              ...
              android:orientation="vertical">
          <TextView  .....></TextView>
          <ImageView .....></ImageVIew>  
</LinearLayout> 
```

**或者**您可以将您的更改`LinearLayout`为 a`RelativeLayout`并使用`android:layout_below`imageview 上的属性。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              ...>
          <TextView android:id="@+id/TextView01"
                    .....></TextView>
          <ImageView .....
                     android:layout_below="@id/TextView01"></ImageVIew>  
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T10:45:47.357

您应该将行 'android:orientation="vertical"' 添加到您的**listview.xml** （LinearLayout 部分）

所以您的 listview.xml 将如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_height="wrap_content"
android:gravity="left|center"
                android:layout_width="fill_parent"
android:paddingBottom="5px"                
                android:paddingTop="5px"
android:paddingLeft="5px"
android:orientation="vertical">
                <ImageView android:id="@+id/ImageView01"
                            android:layout_width="wrap_content"
android:layout_height="wrap_content">
            </ImageView>
            <TextView android:id="@+id/TextView01"
                            android:layout_width="wrap_content"
android:layout_height="wrap_content"
                            android:textSize="20px"
                            android:textStyle="bold"
                            android:layout_marginTop="10px"
android:textColor="#0099CC">
            </TextView>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T10:32:13.710

看看 FrameLayout 而不是 LinearLayout 作为父视图组。您可以使用边距/填充将视图放置在您想要的任何位置：

[http://www.learn-android.com/2010/01/05/android-layout-tutorial/3/](http://www.learn-android.com/2010/01/05/android-layout-tutorial/3/)

# java - 在java中创建线程以在后台运行

> ID：12551514
> 
> 赞同：45
> 
> 时间：2012-09-23T10:23:28.087
> 
> 标签：java, multithreading

我想从我的主 java 程序中生成一个 Java 线程，并且该线程应该单独执行而不干扰主程序。应该是这样的：

1.  用户发起的主程序
2.  是否有一些业务工作并且应该创建一个可以处理后台进程的新线程
3.  一旦线程被创建，主程序不应该等到产生的线程完成。其实应该是无缝的。。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-09-23T10:27:06.927

一种直接的方法是自己手动生成线程：

```
public static void main(String[] args) {

     Runnable r = new Runnable() {
         public void run() {
             runYourBackgroundTaskHere();
         }
     };

     new Thread(r).start();
     //this line will execute immediately, not waiting for your task to complete
} 
```

或者，如果您需要生成多个线程或需要重复执行此操作，则可以使用更高级别的并发 API 和执行器服务：

```
public static void main(String[] args) {

     Runnable r = new Runnable() {
         public void run() {
             runYourBackgroundTaskHere();
         }
     };

     ExecutorService executor = Executors.newCachedThreadPool();
     executor.submit(r);
     // this line will execute immediately, not waiting for your task to complete
     executor.shutDown(); // tell executor no more work is coming
     // this line will also execute without waiting for the task to finish
    } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-02T11:31:38.737

这是使用匿名内部类创建线程的另一种方式。

```
 public class AnonThread {
        public static void main(String[] args) {
            System.out.println("Main thread");
            new Thread(new Runnable() {
                @Override
                public void run() {
                System.out.println("Inner Thread");
                }
            }).start();
        }
    } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-08-02T13:09:02.153

如果你喜欢用 Java 8 的方式来做，你可以像这样简单地做：

```
public class Java8Thread {

    public static void main(String[] args) {
        System.out.println("Main thread");
        new Thread(this::myBackgroundTask).start();
    }

    private void myBackgroundTask() {
        System.out.println("Inner Thread");
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2021-05-01T04:31:45.700

**更简单，使用 Lambda！(Java 8)**是的，这确实有效，我很惊讶没有人提到它。

```
new Thread(() -> {
    //run background code here
}).start(); 
```

# java - Java 和 C++ 的对象

> ID：12551515
> 
> 赞同：2
> 
> 时间：2012-09-23T10:23:35.500
> 
> 标签：java, c++

Java`Object`有一些方法，如`toString`, `hashCode`,`equals`等。C++ 中的对象是否有一些内置方法？C++ 和 Java 中的对象之间的实际区别是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T10:39:09.110

Java 和 C++ 中的工作方式不同。

*   在 Java 中，每个对象都继承自类`Object`。这是一个提供一些基本成员函数的基类`ToString()`，可以被子类覆盖。

*   在 C++ 中没有像`Object`. 事实上，C++ 中的对象一词指的是任何类型，包括非类类型。
    新的 C++11 标准提供了一个标准函数`std::to_string`，该函数对任何对象都有效，前提是它存在有效的重载。
    `std::to_string`：[http](http://en.cppreference.com/w/cpp/string/basic_string/to_string)
    `std::hash` : //en.cppreference.com/w/cpp/string/basic_string/to_string ：http: [//en.cppreference.com/w/cpp/utility/hash](http://en.cppreference.com/w/cpp/utility/hash)
    也可以通过定义任何类型之间的相等性`operator==`

这展示了两种语言之间的不同设计选择。虽然 Java 更面向对象（基类提供功能），但 C++ 标准库使用通用编程范式（可应用于各种类型的算法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T10:37:50.037

在 C++ 中，您只需**为使用的内容付费**。因此，默认 C++ 对象没有超类，并且除了默认构造函数、复制构造函数、赋值运算符和析构函数之外没有预定义的方法。

同样，成员方法默认不是多态的：

```
class A { void foo(){ cout << "Hello from A\n"; } };
class B : public A { void foo(){ cout << "Hello from B\n";}};

...
unique_ptr<A> a= new B();
a->foo(); // will print Hello from A since a is an A* 
```

您需要使用关键字**声明方法多态**`virtual`：

```
class A { virtual void bar(){ cout << "Hello from A\n"; } };
class B { virtual void bar(){ cout << "BBBB\n";}};

unique_ptr<A> a=new B();
a->bar(); // will print "BBBB": indirection through virtual function table. 
```

类也有**析构函数**；对象的生命周期不受其用户/垃圾收集的限制，而是受其可见性的限制：任何代码不再可见的变量会立即被清除。

对象也可以通过使用在免费存储中创建`new`，在这种情况下，需要使用 显式释放它们`delete`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T10:52:27.540

根据 Andrew Koenig 的《*Accelerated C++* 》一书，C++中的“对象”一词可以定义为*“存在于内存中的东西”*。这同样适用于基本/原始类型的变量，以及指针、函数指针、实例对象、数组等。无论该内存是在*堆栈上自动分配还是在**堆上*动态/手动分配，这也是正确的。

这与 Java 中同一个词的定义非常不同，Java`Object`中指的是所有类的最终基础，而“对象”一词的定义是*“类的实例”*；因此总是指在*堆上*分配的东西。

正如其他答案指出的那样，C++ 没有任何内置类型或最终基类，称为`Object`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T10:28:29.913

方法`toString()`，`hashCode()`等不是Java对象的标准方法，这些是类的公共方法`Object`（Java Env的最上层类）。由于每个类默认扩展`Object`，我们在每个对象中都有这些方法。

但是在 C++ 中，我们没有像`Object`在 java 中那样的任何超级类，所以我们没有像这样的任何标准方法。

# google-apps-script - 电子邮件通知详细说明特定列中的单元格更改，并提供相应的值

> ID：12551516
> 
> 赞同：1
> 
> 时间：2012-09-23T10:23:58.833
> 
> 标签：google-apps-script, spreadsheet

我没有编写 GAS 或 javascript 代码的经验，所以我希望这个板上的人可以帮助我解决这个请求

我一直在尝试创建一个脚本，当我的电子表格“L”列中的单元格发生更改或添加时，该脚本将通知特定的电子邮件地址。但是，B 列包含与 L 列中的数据相关的相应名称。因此，我希望电子邮件通知的正文说明“公司”（来自 B 列的列表）有一个针对它的数字输入（来自 L 列），以及指向电子表格本身的链接。

例如，“Google”[单元格 B4] 被分配了以下 ID“7601”[单元格 L4]

[https://docs.google.com/a/company.co.uk/spreadsheet/ccc?key=0AnpeVHKZr72qdFRoTWdK](https://docs.google.com/a/company.co.uk/spreadsheet/ccc?key=0AnpeVHKZr72qdFRoTWdK)

非常感谢，西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:41:33.897

根据您上面的评论，您可以采用这种方法。

```
//Check if the active column is L
var activeCellColumn = ss.getActiveSheet().getActiveCell().getColumn();
if( activeCellColumn == 12){
//do other task
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T11:07:14.847

您是否至少开始了，以便贡献者可以帮助您编写代码。他们无法为您提供完整的解决方案。

如果没有，您可能会熟悉应用程序脚本并开始编写，然后将您的问题发布到代码中。或者干脆你可以雇人来做。

Apps 脚本资源：

[https://developers.google.com/apps-script/articles](https://developers.google.com/apps-script/articles)

[https://sites.google.com/site/appsscripttutorial/](https://sites.google.com/site/appsscripttutorial/)

# javascript - 使用 Javascript 将 URL 中的域名大写

> ID：12551517
> 
> 赞同：1
> 
> 时间：2012-09-23T10:24:08.523
> 
> 标签：javascript, url, domain-name

看看下面的代码：

```
<!--begin of index.html-->

<a href="#" id='click'>Click to change url to Index2.html</a>

<script type="text/javascript">
    var stateObj = { foo: "bar" };
    function change_my_url()
    {
       history.pushState(stateObj, "page 2", "http://MyDomain.com/Index2.html");
    }
    var link = document.getElementById('click');
    link.addEventListener('click', change_my_url, false);
</script>

<!--end of index.html--> 
```

这是在不重新加载页面的情况下更改 URL 的示例脚本。

该脚本成功地将 URL 从**[http://mydomain.com/index.html](http://mydomain.com/index.html)**更新为**[http://mydomain.com/Index2.html](http://mydomain.com/Index2.html)**而无需重新加载页面。但是，尽管在更新的 URL 中，文件名如代码中所述大写，但域名未大写。我希望 URL 看起来像**[http://MyDomain.com/Index2.html](http://MyDomain.com/Index2.html)。**这可能吗？

我知道我认为此脚本将域名大写的假设是错误的。但我只是举了一个例子，说明我[**使用 Javascript 将 URL 中的域名大写。**](https://stackoverflow.com/questions/12551517/capitalizing-a-domain-name-in-a-url-using-javascript#)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:29:15.397

域名不区分大小写，但约定仅使用小写。这就是为什么您的浏览器总是用小写字母重写您提供的大写字母的域。如果没有这个约定，我们将有不同的字符串作为相同的 URL，这会令人困惑。

# node.js - WebStorm：本地和跨平台的 HTTP 服务器选项

> ID：12551518
> 
> 赞同：4
> 
> 时间：2012-09-23T10:24:16.797
> 
> 标签：node.js, angularjs, webserver, webstorm

我刚刚下载了 WebStorm 5.0 用于使用 AngularJS 进行测试，但我遇到了问题。我似乎不知道如何为我的 HTTP 文件配置或添加服务器。

我目前使用的是 Windows 7 PC，但我也在使用 Mac。

我想知道如何在 WebStorm 中配置 Web 服务器。似乎它可能与运行配置有关，但我在 JavaScript 调试下有 2 个选项，它们是本地/远程，然后是节点和其他类似的东西。

所以我有点困惑，WebStorm 不是自带内部服务器吗？

当然，我在我的 PC 上安装了 IIS，但不适用于 Mac，我想知道是否有内置服务器兼容两者，或者是否存在类似的东西。我认为使用 Tomcat 太过分了，因为我只需要客户端托管 - 即没有 Java。

我也听到很多关于 NodeJS 的讨论，是否可以在 NodeJS 服务器本地托管我的 WebStorm 项目？不确定从哪里开始。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T10:48:37.933

**更新**：自 WebStorm 6.0 起内置 HTTP 服务器[可用。](http://blog.jetbrains.com/webide/2013/03/webstorm-6-0-released-adds-typescript-debugging-with-source-maps-fresh-ui-and-much-more/)

* * *

WebStorm 不附带任何 HTTP 服务器，您需要自己安装/配置它。有一个[在 Windows 上进行 JavaScript 调试的指南](http://wiki.jetbrains.net/intellij/Remote_JavaScript_debugging_with_WebStorm_and_PHPStorm)。在 Mac 上，您可以使用 Apache 或任何其他服务器。

应该可以使用 Node.js 来运行一个简单的 HTTP 服务器：[Using node.js as a simple web server](https://stackoverflow.com/questions/6084360/node-js-as-a-simple-web-server)。

# jsf - JSF2(MyFaces) + hibernate + RichFaces 部署失败

> ID：12551522
> 
> 赞同：0
> 
> 时间：2012-09-23T10:25:03.403
> 
> 标签：jsf, myfaces

我用 MyFaces 2.1.8、Hibernate 4.1、tomcat 6.0.35 和 RichaFaces 4.2.2 开始了一个新项目。

我下载了 myFaces 2.1.8、richafces、tomcat，然后在 myEclipse 中添加了添加休眠 jar 的“休眠功能”。所以下面是我在lib中的罐子：

![在此处输入图像描述](../Images/2d300d47a949a5ebc99545dc1154bd8c.png)

当我尝试部署它时，出现以下错误：

[错误日志（Pastebin 链接）](http://pastebin.com/FsFAAvty)

这里有些不对劲。第 19 行说：

```
 could not find Factory: javax.faces.application.ApplicationFactory 
```

上述错误是否与 web 容器和 tomcat 不兼容有关？根据 MyFaces 2.1.8：

```
JSF 2.1 requires java 1.5 or later, JSP 2.1, JSTL 1.2 and a Java Servlet 2.5 implementation. 
```

我想我遇到了，所以不确定为什么会抛出异常。

**web.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app id="WebApp_ID" version="2.5"
     xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
     <display-name>JSFAppliction</display-name>

        <filter>
            <filter-name>Faces Servlet</filter-name>
            <filter-class>com.myNewApp.utils.SessionHandler</filter-class>
        </filter>

        <listener>
            <listener-class>com.myNewApp.utils.SessionExpiredHandler</listener-class>
        </listener>

        <servlet>
            <servlet-name>Faces Servlet</servlet-name>
            <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
            <load-on-startup>0</load-on-startup>
        </servlet>

        <servlet-mapping>
            <servlet-name>Faces Servlet</servlet-name>
            <url-pattern>*.faces</url-pattern>
        </servlet-mapping>

        <servlet-mapping>
            <servlet-name>Faces Servlet</servlet-name>
            <url-pattern>*.xhtml</url-pattern>
        </servlet-mapping>

     <context-param>
      <param-name>javax.faces.CONFIG_FILES</param-name>
      <param-value>/WEB-INF/faces-config.xml</param-value>
     </context-param>

    </web-app> 
```

不知何故，在 53 号线它正在接 Mojarra ？（`INFO: Initializing Mojarra 2.0.3 (FCS b03) for context '/myNewapp_admin'`）！！

有人能说出我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:42:46.990

您是否尝试查看生成的战争的实际 WEB-INF/lib？实际上查看 Tomcat 的部署目录，而不仅仅是 IDE 呈现的视图。

我很长时间没有使用 MyEclipse，但过去我看到它在使用其“添加...功能”功能时将冲突和错误的 jar 放入 WEB-INF/lib 目录中。

另一个原因可能是 Mojarra jar 或 jar 以某种方式最终位于 Tomcat 本身的 /lib 目录中。也检查那个。

# c++ - 通过构造函数初始化枚举

> ID：12551523
> 
> 赞同：5
> 
> 时间：2012-09-23T10:25:03.403
> 
> 标签：c++, class, function, constructor, enums

我有一个枚举作为一个类的公共成员，如下所示“

```
class myClass
{
    public:
        enum myEnum
        {
            myEnum1,
            myEnum2
        };
}; 
```

我还声明了一个构造函数，一个公共参数化的构造函数，如下所示：

```
myClass(myEnum); 
```

我在类定义之外定义了相同的内容，如下所示：

```
myClass :: myClass(myEnum E)
{
} 
```

**如何使用默认参数初始化 myEnum？**

我试过了：

一世）

```
myClass :: myClass(myEnum E = 0); //to int error 
```

ii)

```
myClass :: myClass(myEnum E = {0}); //some error 
```

iii)

```
myClass :: myClass(myEnum E = {0, 1}); //some error 
```

**一件事我似乎仍然不明白。**

如何将枚举值传递给构造函数。我仍然收到错误消息。而且，我需要这样做：

```
derived(arg1, arg2, arg3, enumHere, arg4, arg5); //call 
```

函数定义：

```
derived(int a, int b, int c, enumHere, int 4, int 5) : base(a, b); 
```

**我应该在哪里初始化枚举，因为下面的答案之一是这样做的？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-23T10:38:21.203

似乎您将类型声明与字段弄错了。在您的类`myEnum`中是类型声明，并且类本身不包含该类型的任何字段。

尝试这个：

```
class myClass
{
    public:
        enum myEnum
        {
            myEnum1,
            myEnum2
        } enumField;
}; 
```

然后，您的构造函数应该使用成员初始化：

```
myClass::myClass() : enumField(myEnum1) {}; 
```

如果你想要参数化的构造函数：

```
myClass::myClass(myEnum e) : enumField(e) {}; 
```

如果您想要具有默认参数的参数化构造函数：

```
myClass(myEnum e = myEnum1) : enumField(e) {}; 
```

如果要在派生类中使用上述构造函数：

```
myDerived(myEnum e) : myClass(e) {}; 
```

# c# - 使用 C# 检测互联网流量空闲状态

> ID：12551524
> 
> 赞同：3
> 
> 时间：2012-09-23T10:25:04.120
> 
> 标签：c#, asp.net

我正在创建一个网络解析应用程序，当互联网连接空闲时，从用户提供的 url 下载一些视频文件。

如何使用 dotnet 框架 C# 检测互联网连接的空闲状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:16:50.580

您可以通过[SharpBITS.NET](http://sharpbits.codeplex.com/)包装器使用[BITS](http://msdn.microsoft.com/en-us/library/windows/desktop/bb968799%28v=vs.85%29.aspx) ，而不是检查空闲连接。

# python - 将 Flask 表单值转换为 int

> ID：12551526
> 
> 赞同：46
> 
> 时间：2012-09-23T10:25:09.253
> 
> 标签：python, json, flask

我有一个将`personId`int 发布到 Flask 的表单。但是，`request.form['personId']`返回一个字符串。为什么 Flask 不给我一个 int 值？

我尝试将其转换为 int，但下面的路由返回 400 或 500 错误。我怎样才能`personId`在 Flask 中获得 int ？

```
@app.route('/getpersonbyid', methods = ['POST'])
def getPersonById():
    personId = (int)(request.form['personId'])
    print personId 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-23T10:29:50.167

HTTP 表单数据是一个字符串，Flask 不会收到有关客户端希望每个值是什么类型的任何信息。所以它将所有值解析为字符串。

您可以调用`int(request.form['personId'])`以将 id 作为 int 获取。但是，如果该值不是 int，您将`ValueError`在日志中得到 a 并且 Flask 将返回 500 响应。如果表单没有`personId`键，Flask 将返回 400 错误。

```
personId = int(request.form['personId']) 
```

相反，您可以使用该[`MultiDict.get()`方法](http://werkzeug.palletsprojects.com/datastructures/#werkzeug.datastructures.MultiDict.get)并传递`type=int`来获取该值（如果它存在并且是一个 int）：

```
personId = request.form.get('personId', type=int) 
```

现在`personId`将设置为整数，*或者* `None`如果该字段不存在于表单中或无法转换为整数。

* * *

您的示例路线也存在一些问题。

路由应该有`return`什么，否则会引发 500 错误。`print`输出到控制台，它不返回响应。例如，您可以再次返回 id：

```
@app.route('/getpersonbyid', methods = ['POST'])
def getPersonById():
    personId = int(request.form['personId'])
    return str(personId)  # back to a string to produce a proper response 
```

`int`Python 中不需要括号，在这种情况下，解析器会忽略括号。我假设您正在`personId`对视图中的值做一些有意义的事情；否则`int()`在值上使用有点毫无意义。

# php - MySQL 从用户 id 获取积分

> ID：12551527
> 
> 赞同：1
> 
> 时间：2012-09-23T10:25:30.703
> 
> 标签：php, mysql, wordpress

注意：mysql新手

我正在尝试从用户 ID 中获取积分（请查看随附的表格图片）

![在此处输入图像描述](../Images/0917716a3a0b1f6ff4e545c30b026ff4.png)

qa_ 是我的自定义表前缀

我正在使用 wordpress 并希望获取当前登录的用户 ID 并希望传递它以便获得该用户 ID 的积分。

这是我正在尝试的，但没有任何效果

```
function qa_points($userid){
    global $wpdb;
    $prefix = 'qa_';
    $points = $wpdb->get_results("
        SELECT *
        FROM ${prefix}userpoints
        WHERE points = userid
    "); 

    return '(points '.$points['points'].')';

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:30:30.840

```
function qa_points($userid){
    global $wpdb;
    $prefix = 'qa_';
    $points = $wpdb->get_row("
        SELECT points
        FROM ".$prefix."userpoints
        WHERE userid = $userid
    "); 

    return '(points '.$points->points.')';

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T10:28:35.133

如果要从用户中选择积分，则必须选择正确的用户：

```
$points = $wpdb->get_results("
        SELECT *
        FROM " . $prefix . "userpoints
        WHERE userid = $userid"); 
```

# html - php页面标题或超链接到html url？

> ID：12551528
> 
> 赞同：-1
> 
> 时间：2012-09-23T10:25:33.730
> 
> 标签：html

如何将我的 php 页面标题设置为

> www.ww.com/xyz_view.php?xyz_id=142-xyz-for-sell-at-xyz

到 html 网址，例如

> www.ww.com/748001-xyz-to-sell-at-xyz-south-faci.html

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:28:06.287

使用 htaccess 重写规则，你可以做这样的事情

```
RewriteEngine on
RewriteRule ^(.*)\.html $1\.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T10:29:52.667

如果你的网络服务器是 apache，你可以使用 mod_rewrite

[http://www.bloghash.com/2006/12/apache-mod_rewrite-examples/](http://www.bloghash.com/2006/12/apache-mod_rewrite-examples/)

如果没有，请告诉我们您的网络服务器软件的名称

# c++ - Irrlicht Smesh - 体素分块

> ID：12551533
> 
> 赞同：0
> 
> 时间：2012-09-23T10:26:11.197
> 
> 标签：c++, irrlicht

我正在尝试重新创建此处使用的 Ogre 代码（在 Irrlicht 中）： [http ://dave.uesp.net/wiki/Block_Land_3](http://dave.uesp.net/wiki/Block_Land_3)

对于这部分代码：

```
MeshChunk->position(x, y,   z+1);   MeshChunk->normal(-1,0,0);  MeshChunk->textureCoord(0, 1); 
```

我这样做了：

```
SMesh* Mesh = new SMesh();

SMeshBuffer *buf = 0;
buf = new SMeshBuffer();

Mesh->addMeshBuffer(buf);

buf->drop();

block_t Block;
block_t Block1;

int iVertex = 0;

buf->Vertices.reallocate(3);
buf->Vertices.set_used(3);
....
buf->Vertices[0] = S3DVertex(vector3df(x, y, z+1), vector3df(-1,0,0), SColor(255, 0,0,0), vector2df(0, 1)); 
```

但是如何翻译：

```
MeshChunk->triangle(iVertex, iVertex+1, iVertex+2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T02:16:03.180

这看起来像是在添加索引，特别是一组 3 个顶点索引；

```
buf->Vertices[0] = S3DVertex(vector3df(x, y, z+1), vector3df(-1,0,0), SColor(255, 0,0,0), vector2df(0, 1));
buf->Vertices[1] = S3DVertex(vector3df(x, y+1, z+1), vector3df(-1,0,0), SColor(255, 0,0,0), vector2df(0, 1));
buf->Vertices[2] = S3DVertex(vector3df(x, y+1, z), vector3df(-1,0,0), SColor(255, 0,0,0), vector2df(0, 1));
buf->Vertices[3] = S3DVertex(vector3df(x, y, z), vector3df(-1,0,0), SColor(255, 0,0,0), vector2df(0, 1));

buf->Indices.push_back(0);
buf->Indices.push_back(1);
buf->Indices.push_back(2);
//MeshChunk->triangle(iVertex, iVertex+1, iVertex+2);

buf->Indices.push_back(2);
buf->Indices.push_back(3);
buf->Indices.push_back(0);
//MeshChunk->triangle(iVertex+2, iVertex+3, iVertex); 
```

Verticies 是一个位置列表，Indices 显示使用它们的顺序（基于它们在 Verticies 中的位置）。

如果三角形共享点，您可以重用顶点索引 - 如果三角形不共面，这将使三角形之间的边界变软，或者您可以在同一位置创建多个顶点，从而允许硬边。

# jquery - 无法使用“.animate”生成选项卡悬停

> ID：12551536
> 
> 赞同：0
> 
> 时间：2012-09-23T10:26:30.650
> 
> 标签：jquery

我正在尝试使用 .animate 函数来更改（和淡入/淡出）我的选项卡悬停时的背景颜色，当光标移出选项卡时返回其原始颜色。

这是我的**[jsFiddle](http://jsfiddle.net/oroborous/q4fXm/)**。

由于无法使用 .hover 和/或 .mouseover/mouseout 功能找到干净的解决方案，我已经尝试过此操作，因此非常欢迎朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:33:13.960

您需要包含`animate-colors`在您的网页中（[http://www.bitstorm.org/jquery/color-animation/](http://www.bitstorm.org/jquery/color-animation/)）。jQuery 默认不支持彩色动画，但是有了这个插件你应该可以做任何你想做的事情。

* * *

编辑： http: [//jsfiddle.net/q4fXm/2/](http://jsfiddle.net/q4fXm/2/)更新小提琴，插件硬编码在 JS 面板内。我不得不将 JSFiddle 左侧的包含从 MooTools 更改为 jQuery 以使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T10:40:22.093

所有动画属性都应动画为单个数值，除非以下说明；大多数非数字属性无法使用基本的 jQuery 功能进行动画处理（例如，宽度、高度或左侧可以设置动画，但背景颜色不能设置，除非使用 [jQuery.Color() 插件](http://archive.plugins.jquery.com/project/color)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T10:50:09.700

我相信您需要添加效果核心（jquery.effects.core.js）才能使彩色动画正常工作。[http://docs.jquery.com/UI/Effects](http://docs.jquery.com/UI/Effects)

从上面的链接中引用：“jQuery UI 效果核心扩展了动画功能，以便能够为颜色设置动画。”

# php - Zend 递归表依赖数据检索

> ID：12551538
> 
> 赞同：1
> 
> 时间：2012-09-23T10:26:40.233
> 
> 标签：php, zend-framework, zend-db, zend-db-table

我有三个表`incidents`，`incident_properties`和`property_types`。

我想做的是：

1.  查询`incidents`表中的一行
2.  检索其所有属性（键值行和 type_id）
3.  对于每个属性，从`property_type`表中检索其类型

所以我建立了这个表关系 -

```
class Incidents extends Zend_Db_Table_Abstract
{
    protected $_name = 'incidents';
    protected $_dependentTables = 'Properties';

}

class IncidentProperties extends Zend_Db_Table_Abstract
{
    protected $_name = 'incident_properties';
    protected $_dependentTables = 'PropertyTypes';
    protected $_referenceMap = array(
        'Incidents' => array(
            'refTableClass' => 'Incidents',
            'refColumns' => 'incident_id'
        )
    );
}

class PropertyTypes extends Zend_Db_Table_Abstract
{
    protected $_name = 'incident_property_types';
    protected $_referenceMap = array(
        'Properties' => array(
            'refTableClass' => 'IncidentProperties',
            'refColumns' => 'property_type_id'
        ) 
    );
} 
```

在我的`incidents`模型映射器中，我想做类似的事情：

```
$select = $this->_dbTable->select()->where('id = ?',$incident->get_id());

$incident_properties = $this->_dbTable
                            ->fetchRow($select)
                            ->findDependentRows('IncidentsProperties')
                            ->toArray();
print_r($incident_properties); 
```

`$incident_properties`并在其类型行中检索属性键、值和类型。

任何想法如何以正确的方式实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:39:30.000

好吧，我们走吧。

1：您总是必须在 $_dependentTables 中添加完整的类名。因此，您不要添加数据库中的表名，而是添加 Zend_Db_Table_Abstract 实例的类名。

所以应该是：

```
class Incidents extends Zend_Db_Table_Abstract
{
    protected $_name = 'incidents';
    protected $_dependentTables = 'IncidentProperties';

} 
```

2：你应该像这样向你的referenceMap添加一个columns属性：

```
protected $_referenceMap = array(
    'Incidents' => array(
        'refTableClass' => 'Incidents',
        'refColumns' => 'incident_id',
        'columns' => 'name of the column that references the incident_id'
     )
); 
```

好的，所以你想要做的是：

```
class IncidentMapper
{
    protected $_dbAdapter; //an instance of your Incident-Class extending Zend_Db_Table_Abstract

    public function doSomeStuff($incidentID)
    {
         $incident = $this->_dbAdapter->find($incidentID);
         //fetch dependent rowsets using incident_id
         $incidentProperties = $result->findDependentRowset('IncidentProperties', 'Incidents');
         foreach($incidentProperties as $incidentProperty)
         {
             //fetch parent row using property_type_id
             $propertyType = $incidentProperty->findParentRow('PropertyTypes', 'Properties');
         }
    }
} 
```

然后，如果您想将适配器用作数据数组，则必须调用

`->toArray()`

关于你的结果。

因此，首先，您会通过以下方式收到 Incidents-Class 的实例

`->find($incidentID)`

然后你打电话

```
->findDependentRowset('ReferencedClass', 'Rule') 
```

以获取具有已获取事件 ID 的所有 IncidentProperties。然后你遍历所有找到的属性并调用

```
->findParentRow('ReferencedClass', 'Rule') 
```

获取 PropertyType。

我希望它有所帮助。如果您需要更多信息，请查看[参考指南 - Zend_Db_Table](http://framework.zend.com/manual/1.12/en/zend.db.table.html)

起初它有点难以理解和混淆。如果您有任何其他问题，请随时提出。

编辑：

目前我不太确定您是否将这些属性作为适配器或数据数组接收。（不幸的是，我现在无法对其进行测试）因此，如果您遇到问题，您可能必须获取每个 IncidentProperty，如下所示：

```
$_incidentPropertyAdapter->find($incident_property_id) 
```

在你打电话之前

```
->findParentRow(...) 
```

# xcode - Gcc Eclipse 检查

> ID：12551539
> 
> 赞同：1
> 
> 时间：2012-09-23T10:26:44.853
> 
> 标签：xcode, eclipse, gcc, osx-lion, llvm-gcc

我在 macOS Lion 上使用 eclipse 进行 C/C++ 编程。最近我用 macPorts 安装了新的 gcc 版本 gcc-mp-4.7。然后我使用端口选择命令将这个新版本替换为旧版本，即默认的 X-code 4.2.1。现在从命令行我可以看到我正在使用新的 gcc 版本。

如何检查 Eclipse 是否正在使用这个新版本？从工具链中，我只看到安装了旧版本的 gcc（如 llvm-gcc4.2）。如果我在构建选项命令行中编写 gcc，Eclipse 会采用更改后的版本还是旧版本？

也许这是一个愚蠢的问题，但我在网上没有看到任何明确的内容:)

# ios - 为什么 searchFetchedResultsController 设置为零？

> ID：12551543
> 
> 赞同：0
> 
> 时间：2012-09-23T10:27:08.393
> 
> 标签：ios, uitableview, core-data, uisearchdisplaycontroller

以下代码来自[这篇文章](https://stackoverflow.com/questions/4471289/how-to-filter-nsfetchedresultscontroller-coredata-with-uisearchdisplaycontroll)的公认答案，关于使用 Core Data 在表格视图中实现搜索栏。它使用两个获取结果控制器（FRC）。一种用于“普通”表视图，一种用于搜索结果表视图。它使用辅助方法来决定表视图数据源方法、FRC 委托方法等使用哪个 FRC。  

除了以下部分，我了解大部分代码。我应该输入什么代码来替换评论`"update the filter..."`？为什么我应该将 self.searchFetchedResultsController 及其委托设置为零？

```
- (void)filterContentForSearchText:(NSString*)searchText scope:(NSInteger)scope
{
    // update the filter, in this case just blow away the FRC and let lazy evaluation create another with the relevant search info
    self.searchFetchedResultsController.delegate = nil;
    self.searchFetchedResultsController = nil;
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:43:57.500

这是当您将其设置`fetchedResultsController`为 nil 时发生的情况。下一次表视图（或搜索结果表视图）需要数据时，它将查询它的`datasource`哪个反过来引用（不存在的）FRC。如果您查看该`fetchedResultsController`方法，您会发现 FRC 是延迟创建的 -~~只有当它是`nil`~~. 在初始化例程中，获取请求被执行并且新的结果提供给数据源。

虽然这很可靠，但有理由认为不能完全摧毁 FRC。它是冗余的，需要更多的时间、CPU 和电池电量。只需调用即可达到完全相同的效果

```
[fetchedResultsController performFetch:nil]; 
```

现在数据源也将拥有最新的可用数据。

**编辑**

如评论中所述，您应该真正修改`fetchedResultsController`方法以延迟创建。查看 Apple 模板以获取指导。

```
if (_fetchedResultsController != nil) {
   return _fetchedResultsController;
}
// continue creating a new one 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T11:33:31.477

我简要阅读了已接受答案的代码。很多只是骨架，显示了要实现的方法。也就是说，我从来没有在方法中实现过“吹走FRC”的`filterContentForSearchText:scope:`方法；但我确实有 NSFetchedResultsController 支持的表视图，在生产代码中具有搜索栏功能。

以下是其中之一的示例`filterContentForSearchText:scope`：

```
- (void)filterContentForSearchText:(NSString *)searchText scope:(NSString *)scope;
{
    /*  clear the filtered list */
    [_mutableFilteredLadders removeAllObjects];

    /*  in background queue filter our list */
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSPredicate *ladderTitlePredicate = [NSPredicate predicateWithFormat:@"title CONTAINS[cd] %@",searchText];
        NSPredicate *ladderTextPredicate = [NSPredicate predicateWithFormat:@"ANY ladderItems.text CONTAINS[cd] %@",searchText];
        NSPredicate *searchPredicate = [NSCompoundPredicate orPredicateWithSubpredicates:ARRAY(ladderTextPredicate,ladderTitlePredicate)];

        [_mutableFilteredLadders addObjectsFromArray:[[self allLadders] filteredArrayUsingPredicate:searchPredicate]];

        /* reload table on the main queue */
        dispatch_async(dispatch_get_main_queue(), ^{
            [[[self searchDisplayController] searchResultsTableView] reloadData];
        });
    });
} 
```

# c - Ubuntu 中的 wait() 函数

> ID：12551544
> 
> 赞同：3
> 
> 时间：2012-09-23T10:27:13.513
> 
> 标签：c, linux, ubuntu-10.04, wait, waitpid

我正在 Ubuntu 中学习进程及其行为，但我对 wait() 有点困惑。所以我的问题是：

1.  **while(wait(NULL)>0);**语句如何 正在工作中？
2.  wait()中**NULL**的目的是什么？

我已经在终端中看到了输出，但是即使它执行了 wait() 函数，父级也在执行并生成子级。父级执行不应该停止吗？这是代码：

```
int main(int argc, char *argv[])
{
pid_t childid;

if(argc!=2)
{
    printf("Please provide an argument in terminal! \n");
    return 0;
}

int i,n=atoi(argv[1]);

for(i=0;i<n;i++)
{
    childid=fork();

    if(childid==0)
    {
        printf("Inside Child process! \n My id is %d\n",getpid());
        break; // creating fan process structure
    }
    else
        if(childid>0)
        {
            printf("Inside Parent Process! \n My id is %d\n",getpid());
        }
}

while(wait(NULL)>0); 

printf("After While Statment!\n My id is %d\n My parent ID is %d\n Child id is %d\n",getpid(),getppid(),childid); 
```

}

我知道这是一个非常蹩脚的问题，但这是人们学习的方式:)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T11:46:45.883

**while(wait(NULL)>0);**语句如何 正在工作中？

函数**wait**，等待任何子进程终止，如果成功，则返回终止子进程的进程标识符。如果没有子进程，则返回-1。

在您的代码中，父进程基本上等待它创建的所有子进程的终止。

对于任何孩子，此调用将立即返回 -1，因为他们尚未创建任何进程。

**wait() 中 NULL**的目的是什么？ 如果你看到wait的原型，是这样的，

```
pid_t wait(int *status); 
```

父进程可以在变量状态中获取子进程的退出状态（我们需要在等待函数中传递一个整数的地址，以更新该整数），然后使用 WEXITSTATUS 宏来提取该值。

传递 NULL（我们传递 NULL，因为变量是指针类型）意味着，程序员对该值不感兴趣，他正在通知等待调用。

我稍微修改了您的代码，以解释等待函数的返回值和非 NULL 参数的使用。所有的孩子现在都返回一个值（循环索引 i），它是由父级获取的。

PL。看看这是否有帮助，

```
#include<stdio.h>
#include<sys/types.h>
#include<sys/wait.h>
#include<stdlib.h>

int main(int argc, char *argv[])
{
  pid_t childid;
  int ret;
  int status;

 if(argc!=2)
 {
    printf("Please provide an argument in terminal! \n");
    return 0;
 }

int i,n=atoi(argv[1]);

for(i=0;i<n;i++)
{
  childid=fork();

  if(childid==0){
    printf("Inside Child process! \n My id is %d\n",getpid());
    break; // creating fan process structure
  }
  else if(childid > 0){
        printf("Inside Parent Process! \n My id is %d\n",getpid());
  }
}

//The line below, will be immediatly false for all  the children
while ((ret= wait(&status))>0)
{
  printf("After While My id is %d and my  child with pid =%d exiting with return value=%d\n" ,
  getpid(),ret, WEXITSTATUS(status));
}
//The if below will be true for the children only
if ((0 > ret) && (childid == 0)){
   printf("Child with id %d exiting and my parent's id is %d\n", getpid(), getppid());
   exit(i);
 }
else{
   printf("Parent Finally Exiting\n");
 }
} 
```

# android - 有没有办法获得总设备内存？我需要它来进行优化

> ID：12551547
> 
> 赞同：6
> 
> 时间：2012-09-23T10:27:40.220
> 
> 标签：android

我有一个可以包含静态数据的 lrucache，这样即使我的应用程序在用户返回时关闭，他也可以更快地找到数据。

但是，这需要大约 10-15 MB 的内存，所以我想创建一个这样的 if 分支

```
if(deviceOverallRAM > treshold)
      preserve static memory on app exit
else
      clear static memory on app exit 
```

那么，我可以通过一些隐藏的 api 获得设备的内存吗？什么是门槛的好价值？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-23T10:57:19.620

要在 API 16 之前执行此操作，您必须阅读 android 内核的 proc/meminfo 文件：

```
 public long getTotalMemory() {  

    String str1 = "/proc/meminfo";
    String str2;        
    String[] arrayOfString;
    long initial_memory = 0;
    try {
    FileReader localFileReader = new FileReader(str1);
    BufferedReader localBufferedReader = new BufferedReader(    localFileReader, 8192);
    str2 = localBufferedReader.readLine();//meminfo
    arrayOfString = str2.split("\\s+");
    for (String num : arrayOfString) {
    Log.i(str2, num + "\t");
    }
    //total Memory
    initial_memory = Integer.valueOf(arrayOfString[1]).intValue() * 1024;   
    localBufferedReader.close();
    return initial_memory;
    } 
    catch (IOException e) 
    {       
        return -1;
    }
  } 
```

来源：[这个问题](https://stackoverflow.com/questions/9869761/read-android-device-total-ammount-of-ram-with-proc-meminfo)

**但是，**在 API 16 及更高版本中，您可以使用以下代码来检索总内存：

```
ActivityManager actManager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
MemoryInfo memInfo = new ActivityManager.MemoryInfo();
actManager.getMemoryInfo(memInfo);
long totalMemory = memInfo.totalMem; 
```

# php - 如何将字符串更改为 utf8 编码？

> ID：12551553
> 
> 赞同：1
> 
> 时间：2012-09-23T10:28:16.050
> 
> 标签：php, encoding

我想制作一个要`utf8`编码的字符串，但我不知道它的原始字符集是什么。

字符串的原始字符集可能是`GBK`,`iso-8859-1`或其他我不知道的字符集。

我使用`mb_detect_encoding($content, 'UTF-8', true)`和`iconv($original, "UTF-8", $content);`

如何获得原始编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:21:11.980

我认为这可能有用[http://php.net/manual/en/function.utf8-encode.php](http://php.net/manual/en/function.utf8-encode.php)

# php - PHP 中的默认 FTP 用户名、密码

> ID：12551554
> 
> 赞同：1
> 
> 时间：2012-09-23T10:28:19.487
> 
> 标签：php, apache, drupal, ubuntu, ftp

Drupal 在安装模块时要求 ftp 访问。我发现我的服务器中安装了 PHP ftp 扩展。但是它的默认用户名和密码是什么或如何添加 ftp 用户？我正在使用 Ubuntu。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:32:56.000

PHP FTP 扩展是 FTP 客户端，而不是服务器。您必须向 Drupal 提供您的 FTP 帐户（您用于上传文件的具有写入权限的帐户）

# php - Zend 中的 500 内部服务器错误

> ID：12551560
> 
> 赞同：2
> 
> 时间：2012-09-23T10:29:21.107
> 
> 标签：php, zend-framework

我正在使用 Zend 并在提交上传文件的页面时遇到此错误 [500 Internal Server Error]。错误日志文件如下所示。电子邮件是否与内部服务器错误有关？

```
[23-Sep-2012 18:15:12] PHP Fatal error:  Uncaught exception 'Zend_Mail_Transport_Exception' with message 'Unable to send mail. mail() [<a href='function.mail'>function.mail</a>]: Failed to connect to mailserver at &quot;localhost&quot; port 25, verify your &quot;SMTP&quot; and &quot;smtp_port&quot; setting in php.ini or use ini_set()' in C:\Tools\Zend\ZendServer\share\ZendFramework\library\Zend\Mail\Transport\Sendmail.php:137
Stack trace:
#0 C:\Tools\Zend\ZendServer\share\ZendFramework\library\Zend\Mail\Transport\Abstract.php(348): Zend_Mail_Transport_Sendmail->_sendMail()
#1 C:\Tools\Zend\ZendServer\share\ZendFramework\library\Zend\Mail.php(1194): Zend_Mail_Transport_Abstract->send(Object(Zend_Mail))
#2 C:\Projects\dcs_new\config_local.php(86): Zend_Mail->send()
#3 C:\Projects\dcs_new\functions.php(277): smail('level2@hartaleg...', 'DCS: Document c...', 'Title: Testing ...', 'From: TAN CHEN ...')
#4 C:\Projects\dcs_new\functions.php(284): email_users_obj('alert@hartalega...', Array, 'DCS: Document c...', 'Title: Testing ...', 'From: TAN CHEN ...')
 in C:\Tools\Zend\ZendServer\share\ZendFramework\library\Zend\Mail\Transport\Sendmail.php on line 137 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:47:32.427

看起来您的页面/脚本尝试发送邮件并尝试连接到在`localhost:25`.

所以，本质上，这是一个配置问题。

为了克服本地开发的困难，您可以将默认传输设置`Zend_Mail_Transport_File`为`development`环境。

在`application/configs/application.ini`：

```
[development : production]
resources.mail.transport.type = file
resources.mail.transport.path = APPLICATION_PATH "/../data/mail" 
```

请记住创建该`data/mail`目录并授予网络服务器在此处写入的权限。

# facebook - 为什么 Facebook 喜欢按钮显示对整个站点都计数，但在使用 FB 调试后开始工作？

> ID：12551561
> 
> 赞同：0
> 
> 时间：2012-09-23T10:29:36.803
> 
> 标签：facebook, facebook-graph-api, facebook-like

我`<fb:like>`在我网站的所有文章上都有按钮，并且标题中有所有必需的元标记。首次创建文章时，“喜欢”计数大约为 318，并且“共享”按钮弹出窗口共享指向站点主页的链接，而不是单个文章。

如果我将 URL 粘贴到[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)的 Facebook 调试器中，它不会显示任何错误，并且“赞”按钮会立即按预期开始工作（即显示 0 个赞）！

为什么是这样？！这只是一个错误吗？

**更新：**工作按钮示例：[http ://www.theanglenews.co.uk/news/article-c43c88bad8d/ratted-out-where-does-your-meat-come-from.html](http://www.theanglenews.co.uk/news/article-c43c88bad8d/ratted-out-where-does-your-meat-come-from.html)

非工作按钮示例：[http ://www.theanglenews.co.uk/fashion/article-c42897bf90a/do-you-pda.html](http://www.theanglenews.co.uk/fashion/article-c42897bf90a/do-you-pda.html)

# php - 使用简单的 HTML DOM 解析器进行抓取

> ID：12551562
> 
> 赞同：1
> 
> 时间：2012-09-23T10:29:40.623
> 
> 标签：php, screen-scraping, simple-html-dom

嗨，我正在尝试使用 Simple HTML DOM Parser 抓取 UFC 事件时间表。

我正在努力选择正确的数据。

我想要标题、图像、日期、时间和位置。

到目前为止我已经尝试过

```
function scraping_ufc() {
    // create HTML DOM
    $html = file_get_html('http://uk.ufc.com/schedule/event/');

    // get news block
    foreach($html->find('table tr') as $event) {
        // get title
        $item['title'] = trim($event->find('div[class="event-tagline"]', 0)->innertext);
        // get details
        $item['date'] = trim($event->find('div[class="date"]', 0)->innertext);

        $item['time'] = trim($event->find('div[class="time"]', 0)->innertext);

        $ret[] = $item;
    }

    // clean up memory
    $html->clear();
    unset($html);

    return $ret;
} 
```

选择了很多不需要的表格行，我确实设法获得了标题，但没有获得日期或时间。

请帮助我有效地选择我需要的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:10:24.077

首先，停止使用简单的 html dom，因为它不如内置的 dom 库可靠。几年前它很有用，但如今它确实导致的问题多于解决的问题。

```
$dom = new DOMDocument();
@$dom->loadHTMLFile('http://uk.ufc.com/schedule/event/');
$xpath = new DOMXPath($dom); 
```

接下来，您需要一种更好的方法来识别您想要的行。`table tr`将选择页面上的每个 tr 并且您不希望这样。如果 tr 有样式就好了，但它们不是，所以我想出了这个：

```
foreach($xpath->query('//td[@class="upcoming-events-image"]/..') as $tr){
  $item['title'] = $xpath->query('.//div[@class="event-tagline"]/a', $tr)->item(0)->nodeValue;
  $item['date'] = $xpath->query('.//div[@class="date"]', $tr)->item(0)->nodeValue;
  $item['time'] = $xpath->query('.//div[@class="time"]', $tr)->item(0)->nodeValue;
  $ret[] = $item;
} 
```

# jquery - 了解参数“e”和 e.pageX/e.pageY

> ID：12551563
> 
> 赞同：1
> 
> 时间：2012-09-23T10:29:43.697
> 
> 标签：jquery

```
function smtMouseMove(e){
    smtMouseCoordsX=e.pageX;
    smtMouseCoordsY=e.pageY;
    smtTipPosition();
}

function smtTipPosition(e){
    var thePosX=e.pageX+20;
    smtTip.css("left",thePosX);

    var thePosY=smtMouseCoordsY+20;
    smtTip.css("top",thePosY);

} 
```

如果我有这个：`var thePosX=e.pageX+20;`我得到参数 e 未定义的错误。但如果我写`var thePosX=smtMouseCoordsX+20;`一切都好。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:32:48.057

在您的函数声明中，您要求`e`发送一个参数。

```
function smtTipPosition(e) {} 
```

但是，您**没有**在执行时发送参数。

```
function smtMouseMove(e){
    smtMouseCoordsX=e.pageX;
    smtMouseCoordsY=e.pageY;
    smtTipPosition();
               // ^ Right here, you have to send the parameter 'e' too
} 
```

实施这样*的事情应该可以解决问题。*

```
function smtMouseMove(e){
    smtTipPosition(e);
}

function smtTipPosition(e){
    var thePosX=e.pageX+20;
    smtTip.css("left",thePosX);

    var thePosY=smtMouseCoordsY+20;
    smtTip.css("top",thePosY);

} 
```

一般`e`指***事件对象***。它必须由某些事件或功能启动或传递。在你的情况下，函数`setMouseMove`和`smtTipPosition`两者都需要一个事件对象来执行。

让我们看一个简单的例子

```
$("a").click(function(e) {
    //Here `e` will hold the event object of the page, when any `a` on the page will be clicked
    console.log(e.pageX); //Calling this will give the x coordinates of mouse position on the page, when the `a` was clicked
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T10:36:50.723

`e`是一个事件对象，事件对象是关联方法或事件（如onmouseover、onmousout事件）。

您缺少参数`smtTipPosition();`功能。要么传递事件对象，要么将位置值发送到 smtTipPosition() 函数

```
function smtMouseMove(e){
    smtMouseCoordsX=e.pageX;
    smtMouseCoordsY=e.pageY;
    smtTipPosition(smtMouseCoordsX,smtMouseCoordsy);
} 
```

使用位置和参数化值设置 css。

```
function smtTipPosition(posX, PosY){
    var thePosX=posX+20;
    smtTip.css("left",thePosX);

    var thePosY=PosY+20;
    smtTip.css("top",thePosY);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T10:41:30.640

正如其他人已经说过的，您必须将鼠标位置传递给第二种方法，如下所示：

```
function smtMouseMove(e){
    smtTipPosition({ x: e.pageX, y: e.pageY });
}

function smtTipPosition(point) {
    smtTip.css("left", e.x + 20);
    smtTip.css("top", e.y + 20);
} 
```

# ruby - 如何用 Rspec2 编写一个可区分的匹配器

> ID：12551564
> 
> 赞同：2
> 
> 时间：2012-09-23T10:29:44.523
> 
> 标签：ruby, rspec2

我正在尝试编写一个匹配器，它将对象转换为哈希，然后再与预期值进行比较（假设我想比较 2 个哈希而不关心键是字符串或符号的事实）。

我可以很容易地定义一个匹配器来做这个

```
RSpec::Matchers.define :my_matcher do |content|
    match { |to_match| my_hash_conversion(to_match) == my_hash_conversion(content)
    diffable
end 
```

我添加`diffable`了所以 rspec 在它们不匹配时显示两个对象的差异。但是我想显示转换对象的差异而不是原始对象的差异？

我看到它们在 Rspec 的某个地方有一个 Differ 类和一个 diff_with_hash 函数，但我不知道如何使用它（因为它没有真正记录在案）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-02T08:40:58.180

对于 RSpec3，您可以直接使用 Diff 类。

```
RSpec::Matchers.define :my_matcher do |expected|
  expected_hash = my_hash_conversion(expected)
  match do |actual|
    actual_hash = my_hash_conversion(actual)
    expected_hash == actual_hash
  end

  failure_message do |actual|
    actual_hash = my_hash_conversion(actual)
    "expect #{expected_hash} to match #{actual_hash}" + 
      RSpec::Support::Differ.new.diff(actual_hash, expected_hash)
  end
end 
```

注意：`RSpec::Support`说它不应该直接使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-07T11:32:02.413

使用`failure_message_for_should`块：-

```
failure_message_for_should do |actual|
  "expected: #{expected} \n     got: #{actual}"
end 
```

然后`.to_hash`你需要看到什么。

# c# - 空用户输入异常c#

> ID：12551567
> 
> 赞同：2
> 
> 时间：2012-09-23T10:30:05.363
> 
> 标签：c#, exception-handling, while-loop, user-input, string

此代码的目的是在用户未输入任何数据的情况下重复“请输入您的姓名”的问题。但是，我在使用 if 语句进行这项工作时遇到了麻烦。

```
while (true)
{
  Console.WriteLine("Please enter your name:");
  string line = Console.ReadLine();

  if (line=String.empty) //I'm having difficulty making this a valid statement
    Console.WriteLine("Your entry was blank");
  else break;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T10:32:04.083

`line=String.empty`是一个*assignment*，使用 assignment ( `=`) 运算符。它分配`string.Empty`给`line`。

您应该使用*比较运算符*。`==`

更好的是，查看`string.IsNullOrWhitespace`方法 (.NET 4.0+)，或`string.IsNullOrEmpty`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T10:33:08.170

只需将您的 if 子句更改为`if(line == "")`，一切都会好起来的。

**=**是赋值运算符，您想要比较值，因此您应该使用**==**比较运算符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T10:33:57.390

在查看您的代码时，错误在于使用制作条件......您正在使用`assignment operator(=)`而不是`comparision operator(==)`......所以这样做：

```
if (line == String.Empty)
{
       //Put your code
} 
```

或者，您可以简单地这样做：

```
if (string.IsNullOrEmpty(line)) 
           Console.WriteLine("Your entry was blank"); 
```

或者，您可以使用`string.IsNullOrWhitespace`指定的 Oded 答案，但它仅适用于`.NET 4`或以上.....

# html - HTML Inline Float:Left Elements in Overflow:Hidden container - 如何判断它们是否“可见”？

> ID：12551568
> 
> 赞同：0
> 
> 时间：2012-09-23T10:30:06.450
> 
> 标签：html, inline

我有一个固定宽度/高度的 DIV，是“溢出：隐藏”并包含很多 IMG，它们是“显示：内联”和“浮动：左”

显然，只有前几张图像是“可见的”——其余的消失在一个非常非常宽的 DIV 的“隐藏”区域中。

如果这是一个带有非内联元素的可滚动 DIV，我可以轻松实现一个系统，让 IMG 在它们变为“可见”之前不加载它们的“src”——但我找不到确定“真实”的方法inline'd 和 float:left'd 图像的位置 - 例如，无法判断它们是否在 DIV 的“可见”部分？

有任何想法吗？Offset 和 CSS Left/Top 之类的东西都是 0（显然）？

ps 来加强这个问题 - 我想要做的（在 jQuery 中，因为我认为！）是

```
$("#container img").each(function() {
  if ($(this).isinthevisiblepartofthecontainer) ...
}); 
```

pps 我突然想到我可以“计算宽度”——假设我可以按顺序获取元素——所以像这样

```
var width = $("#container").width();
var sofar = 0;
var imgs = $("#container img");
var idx = 0;
while (sofar < width) {
  var img = $(imgs[idx]);
  img.dowhatsoeverIwanthere
  sofar += img.width();
  idx++;
} 
```

它很粗糙，但假设它以正确的顺序返回元素（并且似乎）它会起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:39:44.637

你试过绝对位置吗？我的意思是，据我所知，您想在 x 中滚动？

因为您可以通过 jQuery 告诉左侧大于 x 且小于 x - x 的图像在达到该条件之前不显示...

如果使用 div scroll-x 或 jQuery .css()、.fadeIn()、.hide() 等，我不清楚你想如何滚动

我认为 Rajat 评论了你需要什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T20:03:28.817

经过大量调查，我得出的结论是，您无法通过它们可能具有的任何属性确定 FLOAT:ed 元素是否在滚动 div 的可见部分内。

您可以通过将它们的宽度/高度相加来计算它们的位置，然后查看此“位置”是否在可见区域内，但没有其他方法可以确定它们的“可见性”。

并不完全令人惊讶——它们是出于某种原因动态布局的——而且计算它们的位置并不难......

# objective-c - viewForTableColumn 未运行（但 objectValueForTableColumn 运行）

> ID：12551574
> 
> 赞同：6
> 
> 时间：2012-09-23T10:30:34.490
> 
> 标签：objective-c, xcode, interface-builder, nstableview

在尝试创建基于视图的表时，它不断调用**objectValueForTableColumn**函数而不是**viewForTableColumn**。

我已在其设置中将表格视图设置为“基于视图”。但我仍然不能让它调用正确的函数。我查看了苹果示例（tableviewplayground）的实现，在某些时候甚至复制粘贴了 IB 和函数，但仍然没有进展。

相关代码：

```
// Should run
- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row 
{    
    return nil;
}

// Gets run
-(id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    return nil;
} 
```

两张照片，不确定它们有多大帮助，但仍然如此。[http://imgur.com/a/ix34Q](https://imgur.com/a/ix34Q)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-23T11:08:53.990

需要检查的几件事：

*   您是否将`NSTableView`其`delegate`设置为实现`NSTableViewDelegate`协议的类？（我问是因为 `tableView:viewForTableColumn:row:`是委托方法，而 `tableView:objectValueForTableColumn:row:`是数据源方法。）

*   IB中是否设置了任何绑定？（您提到您从现有项目中复制了 nib。）主要检查与`NSTableView`内容绑定和所提供视图的子视图（通常是文本字段）的绑定。）

*   `numberOfRowsInTableView:`您是否从 协议中实现该方法`NSTableViewDataSource`并且它是否返回一个非零整数？

最后，您可以查看文档中关于“以编程方式填充基于视图的表视图”的*表视图编程指南章节。*

# c++ - 前增量和后增量

> ID：12551576
> 
> 赞同：2
> 
> 时间：2012-09-23T10:30:39.163
> 
> 标签：c++, operators, post-increment, pre-increment

在示例中，我无法理解 Post Increment ( `++`)、Pre Increment ( `--`) 和加法/减法如何协同工作。

`x++`表示变量加 1。

`x--`表示从变量中减去 1。

**但我对这个例子感到困惑：**

```
int x = 2, y = 3, z = 1;`

y++ + z-- + x++; 
```

我认为这意味着`3(+1) + 1(-1) + 2(+1)`这意味着结果应该是 7。

但是当我编译它时，我得到`6`. 我不明白。

```
int main() {
  int x=2, y=3, z=1;
  int result;

  result = y++ + z-- + x++;    //this returns 6

  cout << result << endl;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-23T10:32:43.337

因为后缀`operator++`在递增变量之前返回原始值。前缀`operator++`增加 varialbe 并返回对它的引用。可以通过一个示例轻松说明该行为：

```
#include <iostream>

int main()
{
  int n = 1;
  std::cout << n++ << "\n"; // prints 1
  std::cout << n << "\n";   // prints 2

  int m = 10;
  std::cout << "\n";
  std::cout << ++m << "\n"; // prints 11 
  std::cout << m << "\n";   // prints 11
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-23T10:35:36.770

```
 result = y++ + z-- + x++;
           3     1      2  = 6 
```

如果您再次执行此操作

```
 result1 = y++ + z-- + x++;
          4     0      3  = 7 
```

原因

`operator++`在递增变量之前返回原始值。

和

`++operator`返回增加的值

`--`和上面一样只是它的减量

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-23T10:32:48.513

当您编写`x++`它时，它使用当前值，`x`然后将其增加一。

`++x`如果你想先增加，你想写。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-23T10:36:46.460

`Pre-increment operator(++p)`首先增加值并分配它，`post increment operator(p++)`首先分配值然后执行增量操作。这里所有变量都是后增量，即它最初分配它的值（在缓冲区上）然后增加（对于 y 和 x 增加 1）并减少 z 减少 1。即最初在缓冲区中分配3 + 1 + 2（对缓冲区值执行加法），然后执行增量/减量，如x = 3，y = 4和z = 0

有关更多信息，您可以阅读关于 [cout << c++ << c; 的正确答案是什么？](https://stackoverflow.com/questions/10782863/what-is-the-correct-answer-for-cout-c-c)[为什么这些构造（使用++）是未定义的行为](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)？问题

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-23T10:34:08.097

物质的位置`++`。

> 如果`++`在变量之前，例如`++counter`，返回的值是计数器增加后的值。如果`++`跟在变量后面，例如`counter++`，返回的值是计数器增加之前的值。

[（资源）](http://www-numi.fnal.gov/computing/minossoft/releases/R1.26/WebDocs/Companion/cxx_crib/increment.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-23T10:36:49.483

Postincrement/postdecrement 将递增/递减变量，但计算为变量“上一个”值。

所以表达式的`result = y++ + z-- + x++`行为类似于：

```
result = y + z + x;  // result == 6

// perform the 'post' operations
y += 1;
z -= 1;
x += 1; 
```

但是，请记住，这必然是编译器执行评估的严格方式。对于此表达式，结果定义明确，您最终将与示例中的一样。在同一个表达式中使用多个递增/递减操作时，很容易合并未定义的行为，您将无法从表达式中期待任何特别的东西。请参阅[为什么这些构造（使用 ++）未定义行为？](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)详情。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-23T10:35:56.793

原因很简单。这里使用了关联原则，它根据运算符的优先级计算值。

ALSO`X++`或`X--`表示... USE THEN CHANGE... 它将首先使用该值并增加或减少它。如果您想获得`7`...的输出，请尝试此..它可能会起作用...

```
result = ++y + z-- + x++; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-07T06:33:51.560

`i++`/`i--`是变量的后增量和减量...

所以在我们的表达式中，它将采用初始值来求解然后 inc/dec 乘以 1。

```
int x = 2, y = 3, z = 1;
y++ + z-- + x++;
2   + 3   + 1    = 6 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-20T19:50:20.983

您还可以使用 while 循环实现不同的行为：

```
#include <iostream>
void main{
int count = 0;
    while (count < 5 )
    {
    std::cout << "counter is: " << count << std::endl
    // replace this line with one of the lines below at a time
    }
} 
```

考虑以下表达式的增量`count`

```
++count  // the variable 'count' will grow from 0 to 4
count++  // ditto, weird as it seems; 'count' grows nonetheless
count = ++count  // the old 'count' becomes 'count + 1'
count = count++  // endless loop: back to square zero time and time again 
```

同样，您可以通过带有前缀的 do-while 循环获得更多洞察力

```
count = 0;
do
{
    std::cout << ++count << "\n";
} while (count < 5);  // prints out 1 to 5 
```

与后缀

```
count = 0;
do
{
    std::cout << count++ << "\n";
} while (count < 5);  // prints out 0 to 4 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2017-02-16T12:53:23.457

```
Dim i As Integer = 10
    Dim b As Integer
    Dim c As Integer
    Dim d As Integer
    b = ++i
    c = i + 1
    d = b + c
    Response.Write("<br/>")
    Response.Write("The Value of ++i :-" & b)
    Response.Write("<br/>")
    Response.Write("The Value of i++ :-" & c)
    Response.Write("<br/>")
    Response.Write("Answer is " & d) 
```

输出：

```
The Value of ++i :-10
The Value of i++ :-11
Answer is 21 
```

这意味着 ++var 返回原始值，而 var++ 返回递增值。

# ruby - 上下文范围内的 Rspec 字段

> ID：12551584
> 
> 赞同：0
> 
> 时间：2012-09-23T10:32:39.843
> 
> 标签：ruby, rspec, ruby-1.9

真的不知道如何表达标题，但我的问题如下：

```
shared_examples "something" do 
  context "for something" do 
    fields.each do |field| 
      it "should have #{field} field" do 
        #Check something 
      end
    end
  end
end

describe Clazz do
  it_behaves_like "something" do
    let(:fields) {%w{something something2}}
  end
end 
```

由于`fields.each`变量是在`it`作用域中引入的，而不是在`context`.

所以我的问题是如何将变量与 it_behaves_like 引入上下文范围？或者我应该使用别的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T13:42:55.553

shared_examples 已经创建了一个新的上下文，所以我认为最干净的方法就像 shioyama 的例子，没有额外的上下文：

```
shared_examples_for "something" do |fields|
  fields.each do |field| 
    it "should have #{field} field" do 
      # specify something
    end
  end
end

describe Clazz do
  it_behaves_like "something", %w{something something2}
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T13:05:41.150

不知道`shared_examples`，但如果你使用[`shared_examples_for`](https://www.relishapp.com/rspec/rspec-core/v/2-0/docs/example-groups/shared-example-group)，你可以将参数传递给块，如下所示：

```
shared_examples_for "something" do |fields|
  context "for something" do
    fields.each do |field| 
      it "should have #{field} field" do 
        #Check something 
      end
    end
  end
end

describe Clazz do
  it_behaves_like "something", %w{something something2}
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T11:23:49.960

Let 在每个块之前进行评估，`it`但不是针对`context`或`describe`据我所知。

```
describe "something" do 
  let(:fields) { %w{something something2} }

  it "should have all fields" do 
    fields.each do |field| 
    end
  end
end 
```

# javascript - TCP 套接字、JSON 和安全性

> ID：12551592
> 
> 赞同：2
> 
> 时间：2012-09-23T10:33:27.423
> 
> 标签：javascript, json, sockets, security, actionscript

经过大量和积极的搜索，我对如何防止在 Flash 游戏中将套接字用于某些多人功能时出现的安全问题一无所知。令人惊叹的 ECMAScript 兼容/类似语言的源代码易于访问，这使得他妈妈地下室中每个被动攻击性的书呆子都能找到获取攻击向量的关键信息。

他们会在几秒钟内找到服务器的 IP、服务器正在侦听的端口 - 他们正在远程登录并发送数据字符串。而且由于 JSON 是如此开放且易于被人类解释，它在客户端被字符串化并在服务器端解析，我不知道如何防止这样的消息通过（在他们找到服务器正在寻找的命中点之后, 在 swf 中很容易找到):

例子：

```
{ "request_type" : "WRITE_HS", "name" : "GloriousNerd", "highscore" : 9999999 } 
```

他们的要求被认为是真实的，乐谱是写出来的，光荣的书呆子是胜利的。可以这样做以创建无尽的负载高分请求流，这些请求返回许多项目，阻塞带宽和系统的真正请求。

我保留了一些标准方法，扫描“impossibru 结果”并将 IP 列入黑名单等，但没有什么能阻止它。这是一个后缀操作，总是。与我交谈过的每个人都说这是一场失败的战斗。小林丸？

有没有办法阻止访问和编码游戏和服务器可以唯一共享的某些信息？公钥、私钥、任何类型的加密都很容易找到和复制。而 JSON 只是赤身裸体地坐在那里。有什么方法可以确保它只通过 SWF 和 SWF？

在不诉诸身份验证的情况下，我希望人们尽快玩。在我看来，防止作弊的唯一方法是创建一个帐户并通过成就为其增值。但是，有些男人只是想看着世界燃烧。

你能在我的插座上写一些智慧的话吗？我都是港口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T06:34:50.597

你可能会让黑客的生活变得困难：

*   在客户端和服务器端使用加密（例如 AMF）
*   验证服务器上的每个客户端请求
*   构建健壮的逻辑消息交换

等等...

# java - Eclipse 文本突出显示

> ID：12551608
> 
> 赞同：11
> 
> 时间：2012-09-23T10:36:04.833
> 
> 标签：java, eclipse, editor, syntax-highlighting

在 Eclipse 中，当我按下“ctrl”（无论下一步）时，我的部分代码变为红色，背景为黄色。这是什么以及如何禁用它？

同样，当这种情况发生时，'ctrl' + 'space' 停止工作，直到我重新启动 Eclipse。

这里看起来像这样：

![在此处输入图像描述](../Images/b5d4ecc5a016c75b7b360853b5ac7141.png)

**编辑：**

如何重现：在您已经编写的内容上启动自动完成（ctrl + 空格）：

类.fun

紧随其后`.`并开始自动编译

现在每次我按住 ctrl 时，都会`fun`发出黄色光：

班级。**乐趣**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T16:44:56.290

可能是在`on demand hyperlink navigation`演戏。

当您将鼠标悬停在文本上时，您是否还看到文本带有下划线？

尝试这个：

```
Window->Preferences->General->Editors->Text Editors->Hyperlinking
[v] Enable on demand hyperlink style navigation
Default modifier key: [Ctrl] 
```

将其关闭并`Apply`进行更改。

看看有没有区别。

如果不是这样，也许您在偏好的其他地方找到了罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:38:31.250

不知道如何禁用它，但您可以尝试的一件事是通过处理 Ctrl+A 选择全部，然后按 Ctrl+X 将其剪切，然后再次将其粘贴回来。检查！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T22:21:15.427

黄色和红色效果是 Content Assist 功能的第二种模式，可在自动完成某些内容时按 ctrl 激活。首选项->Java->编辑器->内容辅助。窗户的顶部。另请参阅 Preferences->Java->Editor 以获取匹配的完成覆盖颜色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T12:26:21.853

转到首选项 -> 常规 -> 基本 -> 超链接文本颜色

您可以更改它，以免使用 ctrl 键看到颜色变化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T17:58:28.867

不确定这是否会有所帮助，但您是否尝试过：Windows->Preferences->Java->Editor->MarkOccurrences 并取消选中它？似乎不完全适合，但可以帮助您发现问题。

# forms - 直接在首页显示 Jomsocial 注册表格？

> ID：12551609
> 
> 赞同：0
> 
> 时间：2012-09-23T10:36:18.813
> 
> 标签：forms, joomla1.5, registration

我在 jomsocial 登录中使用 joomla 1.5。现在，当用户点击注册按钮时，页面会重新加载并显示一个注册表单。我怎样才能直接在首页上显示这个表格（比如在facebook注册上），然后有一个注册按钮？谢谢。卢卡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:00:29.257

您可以在主页上的文章中使用 {loadposition MODULEPOSITION}。这将在您的文章中包含一个模块。

更好的方法是使用新的模块位置修改模板。

# c++ - WinRT C++/CX 组件 ComPtr 与本机指针

> ID：12551611
> 
> 赞同：3
> 
> 时间：2012-09-23T10:36:45.370
> 
> 标签：c++, components, microsoft-metro, windows-runtime

我正在查看 WinRT 的一些 Direct3D 代码，并注意到那里的“参考类”使用“ `ComPtr<ID3D11Device1>`”而不是“ `ID3D11Device1*`”。所以我的问题是你必须在“ref class”中使用“ComPtr”还是可以使用“native pointer”来代替？

现在我在 ref 类中使用本机指针，因为我的 c++ 文件也用于编译托管 C++。但有时我在 WinRT 中会出现奇怪的行为，并认为这可能与 ComPtr 有关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T11:38:21.753

它不是必须使用，但通常非常方便。

它是管理 COM 对象生命周期的 COM 对象的引用计数智能指针。如果您使用原始指针，您通常无法保证 COM 对象仍然存在。如果您认为这可能与您的问题有关（例如，您在调用 COM 方法时遇到访问冲突），那么使用它们是有意义的。无论如何，与 COM 方法调用相比，引用计数的性能损失算不了什么。

# java - Android 实现 Runnable 没有终止

> ID：12551617
> 
> 赞同：-1
> 
> 时间：2012-09-23T10:37:14.850
> 
> 标签：java, android, android-intent

我正在使用[本教程](http://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/)建立客户端服务器连接。我面临的问题是它不会停止，Log cat 继续显示客户端在无限循环中发送数据。服务器也在无限循环中接收此数据

**这是我的[代码](http://thinkandroid.wordpress.com/2010/03/27/incorporating-socket-programming-into-your-applications/)**

任何建议/更改都将不胜感激，我被困在这个问题上，昨天无法从谷歌那里得到一个好的工作解决方案。

谢谢

编辑

客户端代码

```
 public class ClientThread implements Runnable {

    public void run() {
        try {

            InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
            Log.d("ClientActivity", "C: Connecting...");
            socket = new Socket(serverAddr, 8080);
            connected = true;
            while (connected) {
                try {
                    Log.d("ClientActivity", "C: Sending command.");
                    PrintWriter out = new PrintWriter(new BufferedWriter(new 
                     OutputStreamWriter(socket
                                .getOutputStream())), true);
                        // where you issue the commands

                        out.println(serverIpAddress);
                        //connected = false;
                        //socket.close();
                        Log.d("ClientActivity", "C: Sent.");

                } catch (Exception e) {
                    Log.e("ClientActivity", "S: Error", e);
                }

            }
            socket.close();
            Log.d("ClientActivity", "C: Closed.");
        } catch (Exception e) {
            Log.e("ClientActivity", "C: Error", e);
            connected = false;
        }
    }
} 
```

服务器端

```
 public class ServerThread implements Runnable {
    private volatile boolean keepGoing = true;
    private volatile boolean firstLoop = true;

    public void requestStop() {
        keepGoing = false;
      }
    public void run() {
        try {
            if (SERVERIP != null) {
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        serverStatus.setText("Listening on IP: " + SERVERIP);
                    }
                });
                serverSocket = new ServerSocket(SERVERPORT);
                while (keepGoing) {
                    // listen for incoming clients
                    Socket client = serverSocket.accept();
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            serverStatus.setText("Connected.");
                        }
                    });

                    try {
                        BufferedReader in = new BufferedReader(new 
                       InputStreamReader(client.getInputStream()));
                        line = null;
                        while ((line = in.readLine()) != null) {
                            Log.d("ServerActivity", line);
                            handler.post(new Runnable() {
                                @Override
                                public void run() {

                                    serverStatus.setText(line);
                                    Log.d("IP recevied", line);
                                    requestStop();

                                }
                            });
                        }

                        break;
                    } catch (Exception e) {
                        handler.post(new Runnable() {
                            @Override
                            public void run() {
                                serverStatus.setText("Oops. Connection interrupted.
                        Please reconnect your phones.");
                            }
                        });
                        e.printStackTrace();
                    }
                }
            } else {
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        serverStatus.setText("Couldn't detect internet connection.");
                    }
                });
            }
        } catch (Exception e) {
            handler.post(new Runnable() {
                @Override
                public void run() {
                    serverStatus.setText("Error");
                }
            });
            e.printStackTrace();
        }
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:57:24.443

取消注释行`//connected = false;`应该使它工作。

在写流操作之后，你应该退出 while 而不是写回同样的东西。

# javascript - 通过使用变量查询从另一个表中提取的表记录插 入到表中

> ID：12551618
> 
> 赞同：0
> 
> 时间：2012-09-23T10:37:27.473
> 
> 标签：javascript, web-sql

我正在尝试编写一个查询，该查询从表中提取和转换数据，然后插入到另一个表中。如果我添加字符串，它会起作用，但是当我添加变量时它不会。它给了我空桌子！

```
function dodb() {

    var name = document.getElementsByName('prezime');
    var elements = document.getElementsByName('bt');

    for (var i = 0; i <= elements.length; i++) {
        var oelements = elements[i];
        oelements.onclick = (function(){
        var name1 = name[i].firstChild.nodeValue;
        return function() {
            db.transaction(function (tx) {
                var a = "INSERT INTO racersA SELECT * FROM racers WHERE prezime=%name1%";
                tx.executeSql(a);
            });
        }
        })(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:19:08.477

您没有将任何变量放入 SQL 中，因此由于它是简单的 Javascript，因此您需要将变量与字符串连接起来

应该

```
var a = "INSERT INTO racersA SELECT * FROM racers WHERE prezime='" + name1 + "'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:33:04.617

或者，使用参数化 SQL

```
var a = "INSERT OR REPLACE INTO racersA SELECT * FROM racers WHERE prezime = ?";
tx.executeSql(a, [name]); 
```

# apache - apache basic_authentication异常

> ID：12551619
> 
> 赞同：2
> 
> 时间：2012-09-23T10:37:46.647
> 
> 标签：apache, http, apache2, basic-authentication

我想将服务器置于 apache_basic 身份验证下，我使用此将 HTTP 身份验证添加到服务器的根目录

```
<Location />
   AuthType Basic
   AuthName "Authentication"
   AuthBasicProvider file
   AuthUserFile /etc/authdb
   Require valid-user
</Location> 
```

现在这工作正常，它验证每个人。

现在我有uploadify，它是flash，用于将图像上传到服务器。因此，由于这是 flash，发送到服务器的请求会出现 401 错误，我想要进行身份验证，期望上传 URL。

我在 httpd.conf 中添加了更多配置，这就是

```
<Location */UploadifyForm/*>
   AuthType None
   Require all granted
</Location> 
```

但这不起作用，请问有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-10T07:54:30.203

如果*UploadifyForm*在您的服务器的根目录下，则这两个指令应该可以解决问题：

```
<Location "/">
    AuthType Basic
    AuthName "Authentication"
    AuthBasicProvider file
    AuthUserFile /etc/authdb
    Require valid-user
</Location>
<Location "/UploadifyForm">
    AuthType None
    Require all granted
</Location> 
```

请注意，您的资源位于文件系统上，最好使用`Directory`指令而不是指令`Location`。[您可以在Apache 文档](https://httpd.apache.org/docs/current/sections.html)中找到更多信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-04-06T10:01:19.950

您应该改用 LocationMatch。位置用于特定路径。这可能对您有用：

```
 <LocationMatch UploadifyForm>
         AuthType None
         Require all granted
    </LocationMatch> 
```

# c++ - 使用 STL 进行递归？

> ID：12551623
> 
> 赞同：0
> 
> 时间：2012-09-23T10:38:00.533
> 
> 标签：c++, recursion, stl

我编写了这个函数来跟踪拓扑树中的某个点。然而由于某种原因。它的无限。

```
int electricity(int x){
    multimap<int,entita,greater<int> >::reverse_iterator it = siet.rbegin();
    advance(it,x-1);
    if((*it).second.z=='E') return (*it).second.i;
    return electricity((*it).first);
} 
```

我在运行时调试了变量，我 100% 确定 X 不同于 (*it).first。然而由于某种原因，每次调用下一个函数时，x 都保持不变。在这种情况下（4）。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:56:41.900

当多重映射包含一个“引用”自身的项目或另一个直接或间接“引用”回它的项目时，您将获得无限递归。

要打破无限递归，您有几个选择：

*   确保没有循环（如果可能的话，如果有蚂蚁，修复它们）然后调用这个函数
*   或跟踪此函数内的循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:23:13.147

在这种情况下，您的递归可能是无限的：

```
int electricity(int x){ // You call with some X
   multimap<int,entita,greater<int> >::reverse_iterator it = siet.rbegin();
   advance(it,x-1); // Now *it at some element, lets call it Z
   if((*it).second.z=='E') // False for Z
      return (*it).second.i;
   return electricity((*it).first); // Call himself with same X, e.g. X == it->first
} 
```

所以，无限的理由是：这个算法是错误的；或获取意外数据`siet`

# ruby-on-rails - 用于论坛的 Rails 缓存

> ID：12551626
> 
> 赞同：1
> 
> 时间：2012-09-23T10:38:44.290
> 
> 标签：ruby-on-rails, caching

我正在尝试在我的论坛中实现缓存，困难的部分是保留角色和组。

所以一个看起来不错的解决方案是使用动作缓存来运行一些`before_filter`并`cache_path`在 proc 中定义。

```
class Forums::TopicsController < Forums::BaseController
  before_filter :authenticate_user!, except: :show
  before_filter :load_resources
  cache_sweeper :topic_sweeper

  caches_action :show, cache_path: proc {
    if user_signed_in?
      if @topic.user == current_user || current_user.has_role?(:moderator) || current_user.has_role?(:superadmin)
        "author_forum_topic_#{@topic.id}"
      end
    else
      forum_topic_path(@forum, @topic)
    end
  }

  def show
    @post = Fo::Post.new
  end

  def create
    # ...
  end

private

  def load_resources
    @forum = Fo::Forum.find(params[:forum_id])
    @category = @forum.category
    @topic = @forum.topics.find(params[:id]) if !%w(create new).include?(action_name)

    if %w(show).include?(action_name)
      authorize! :read, @topic
      @topic.register_view_by(current_user)
    end
  end
end 
```

这个控制器看起来很简单，但类别/论坛列表是可访问的“组”，所以在这里我可以在 cache_path 中构建组 id 的总和

您如何看待这些缓存实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T13:27:45.757

在尝试了多种缓存我的论坛的方法后，我选择使用 Cells [https://github.com/apotonick/cells](https://github.com/apotonick/cells)

添加更多功能时，整页缓存太难了

单元格是进行片段缓存和测试的更好方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T12:26:13.573

考虑使用[片段缓存](http://api.rubyonrails.org/classes/ActionController/Caching/Fragments.html)。您可以缓存整个帖子或只是其中的一部分。在我们的社交应用程序中，我们使用它来缓存墙帖——显示用户信息的部分和帖子正文。每次加载时都会根据用户的类型生成带有“删除”、“编辑”、“报告”等按钮的部分，例如所有者可以删除或编辑，但非所有者只能报告。

[片段缓存](http://api.rubyonrails.org/classes/ActionController/Caching/Fragments.html)在视图中执行。

# c# - MultiTrigger：条件绑定到 DependencyProperty 不起作用

> ID：12551627
> 
> 赞同：6
> 
> 时间：2012-09-23T10:38:52.437
> 
> 标签：c#, wpf, dependency-properties, multitrigger

我有一个自定义`MainMenuButton`类型的按钮，`UserControl`我正在设计它的样式。现在我想实现一个`MultiTrigger`仅在满足两个条件时才更改按钮的外观。

第一个条件是如果`IsMouseOver == true`。我简单地写了以下内容`Condition`：

```
<MultiTrigger>
    <MultiTrigger.Conditions>
        <Condition Property="IsMouseOver" Value="True"/>
    </MultiTrigger.Conditions>
    <MultiTrigger.EnterActions>
        <Setter TargetName="LayoutRoot" Property="Background" Value="Red">
    </MultiTrigger.EnterActions>
    <MultiTrigger.ExitActions>
        <Setter TargetName="LayoutRoot" Property="Background" Value="Black">
    </MultiTrigger.ExitActions>
</MultiTrigger> 
```

第二个条件与 a 相关`DependencyProperty`：

```
public static readonly DependencyProperty IsCheckedProperty = DependencyProperty.Register("IsChecked", typeof(bool), typeof(MainMenuButton), new PropertyMetadata(false)); 
```

在另一篇[SO 帖子](https://stackoverflow.com/questions/12545918/access-dependencyproperty-via-xaml-and-evaluate-it/12545985#comment16896935_12545985)中，一位用户说我可以`DataTrigger`用来对`IsCheckedProperty`. 所以我尝试了另一篇文章中的代码，但没有奏效：

```
<MultiTrigger>
    <MultiTrigger.Conditions>
        <Condition Property="IsMouseOver" Value="True"/>
        <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked}" Value="False"/>
    </MultiTrigger.Conditions>
    <MultiTrigger.EnterActions>
        <BeginStoryboard Storyboard="{StaticResource MouseEnter}"/>
    </MultiTrigger.EnterActions>
    <MultiTrigger.ExitActions>
        <BeginStoryboard Storyboard="{StaticResource MouseLeave}"/>
    </MultiTrigger.ExitActions>
</MultiTrigger> 
```

如何解决？感谢您的任何回答！:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-23T13:28:07.820

同时让它工作。我偶然发现了这篇包含有效解决方案的博客文章： [http ://anders.janmyr.com/search?q=multidatatrigger](http://anders.janmyr.com/search?q=multidatatrigger)

将我的代码更改为以下内容：

```
<MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                    <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsMouseOver}" Value="True"/>
                    <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked}" Value="True"/>
                </MultiDataTrigger.Conditions>
                <Setter TargetName="LayoutRoot" Property="Background" Value="Red"/>
            </MultiDataTrigger> 
```

现在它起作用了。无论如何感谢所有回答者的努力！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T13:21:20.377

我猜在您的风格中您没有指定正确的`TargetType`. 这应该工作 -

```
<Style TargetType="{x:Type local:MainMenuButton}">
   <MultiTrigger>
    <MultiTrigger.Conditions>
        <Condition Property="IsMouseOver" Value="True"/>
        <Condition Binding="IsChecked" Value="False"/>
    </MultiTrigger.Conditions>
    // Your setter goes here
</MultiTrigger>
</Style> 
```

命名空间`local`应添加到与 MainMenuButton 类所在的命名空间相对应的 xaml 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-15T06:46:17.963

```
<Window x:Class="DataBinding.MultiTrigger"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MultiTrigger" Height="300" Width="300">
<Window.Resources>
    <Style TargetType="Button">
        <Style.Setters>
            <Setter Property="Background" Value="BlueViolet"></Setter>
            <Setter Property="Foreground" Value="Red"></Setter>
        </Style.Setters>
        <Style.Triggers>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <!--Use only one conditions for Implementations-->
                    <Condition Property="Control.IsFocused" Value="True"></Condition>
                    <Condition Property="Control.IsMouseOver" Value="True"></Condition>
                </MultiTrigger.Conditions>
                <MultiTrigger.Setters>
                    <Setter Property="Background" Value="Green"></Setter>
                    <Setter Property="Foreground" Value="White"></Setter>
                </MultiTrigger.Setters>
            </MultiTrigger>
        </Style.Triggers>
    </Style>
</Window.Resources>
<Button Height="50">The World Game</Button> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T11:27:55.857

我认为您不需要绑定到您的 DP，请尝试仅使用 Property="IsChecked" 作为 IsMouseOver。

# android - 针对不同 API 级别的不同 Java 方法

> ID：12551629
> 
> 赞同：8
> 
> 时间：2012-09-23T10:39:18.190
> 
> 标签：android, api, methods

您如何制作具有某些版本的方法，每个版本都针对不同的 API 级别。我认为它是这样的，但我不确定

```
@apilevel("11")
private void getR()
{
...
}

@apilevel("4")
private void getR()
{
...
} 
```

这样做的正确方法是什么？提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-23T11:13:18.850

在这里你会找到关于这个主题的非常好的文字：

[http://android-developers.blogspot.com/2010/07/how-to-have-your-cupcake-and-eat-it-too.html](http://android-developers.blogspot.com/2010/07/how-to-have-your-cupcake-and-eat-it-too.html)

你基本上应该使用如下代码：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
    Log.i(LOG_TAG, "At least ICS version");
}
else if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    Log.i(LOG_TAG, "At least HoneyComb version");
}
else {
    Log.i(LOG_TAG, "legacy");
} 
```

像 ICE_CREAM_SANDWICH 这样的 const 值是静态放入 java 类的，所以只要它们在编译期间可用，它们在用户手机上的以前的 android sdk-s 上也可以使用。你不想做的是调用以前sdk-s上不可用的方法，这将以VFY异常结束。

但是编写这样的代码可能很乏味，这就是为什么最好为每个 android 版本创建单独的实现并访问它的基本接口：

```
interface ImplBase {
void myFunc();
};

class ICSImp implements ImplBase {
public void myFunc(){}
}

class HoneyCombImp implements ImplBase {
public void myFunc(){}
}

class LegaceImp implements ImplBase {
public void myFunc(){}
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T10:44:05.320

您可以使用：

```
Integer.valueOf(android.os.Build.VERSION.SDK); 
```

作为参考，您可以在这里查看：http: [//developer.android.com/reference/android/os/Build.VERSION.html#SDK](http://developer.android.com/reference/android/os/Build.VERSION.html#SDK)

对于级别本身，这里是列表：http: [//developer.android.com/guide/topics/manifest/uses-sdk-element.html](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)

# sharepoint - 如何在 fql（快速搜索）中检查 NULL 或空值？

> ID：12551634
> 
> 赞同：1
> 
> 时间：2012-09-23T10:40:05.147
> 
> 标签：sharepoint, sharepoint-2010, fastsearch, sharepoint-search

我想在 fql 查询中检查 null 或空字段，我想添加条件以在列不等于空或 null 时检索结果，我尝试了以下方法：

```
 <Context>
     <QueryText language='en-US' type='FQL'>and(string("Text"),not(Column_Name:equals(" ")))
     </QueryText>
  </Context>

     <Context>
     <QueryText language='en-US' type='FQL'>and(string("Text"),filter(Column_Name:not(" ")))
     </QueryText>
  </Context> 
```

我也尝试了 "^$" 正则表达式而不是空字符串，但不起作用。

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:43:58.807

将索引视为键/值查找。如果您检查普通（纸质）书籍的索引，则没有空白条目。即，索引中没有任何条目可以为您提供所有包含 . 搜索索引的工作方式相同。没有办法查询空值。

一种常见的技术是使用一些默认值（例如 NODATA）来初始化您的字段。如果该字段从未被写入，则它包含 NODATA 并且您知道它是空的。

# javascript - jQuery - 从字符串数组中删除重复项

> ID：12551635
> 
> 赞同：34
> 
> 时间：2012-09-23T10:40:21.200
> 
> 标签：javascript, jquery, arrays, string, unique

> **可能重复：在字符串数组上**
> [的 JavaScript 数组](https://stackoverflow.com/questions/840781/easiest-way-to-find-duplicate-values-in-a-javascript-array)
> [jQuery.unique中查找重复值的最简单方法](https://stackoverflow.com/questions/10191941/jquery-unique-on-an-array-of-strings)

我正在尝试通过广度优先搜索获取邻居列表（具体而言：[Block'd](http://www.gameguru.in/images/block-d-ss2.jpg)中相同颜色邻居球的索引）我`function getWholeList(ballid)`返回一个数组，如

```
thelist=["ball_1","ball_13","ball_23","ball_1"] 
```

当然也有重复。

我试图用 jQuery.unique(); 删除它们。但我猜它不适用于字符串，所以有什么办法（使数组唯一）吗？

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-09-23T10:51:07.830

jQuery[`unique`方法](http://api.jquery.com/jQuery.unique/)仅适用于 DOM 元素数组。

[`each`](http://api.jquery.com/jQuery.each/)您可以使用和方法轻松创建自己的 uniqe 函数[`inArray`](http://api.jquery.com/jQuery.inArray/)：

```
function unique(list) {
  var result = [];
  $.each(list, function(i, e) {
    if ($.inArray(e, result) == -1) result.push(e);
  });
  return result;
} 
```

演示：http: [//jsfiddle.net/Guffa/Askwb/](http://jsfiddle.net/Guffa/Askwb/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-23T10:56:50.667

作为非 jquery 解决方案，您可以`filter`像这样使用 Arrays 方法：

```
var thelist=["ball_1","ball_13","ball_23","ball_1"], 
    thelistunique = thelist.filter(
                 function(a){if (!this[a]) {this[a] = 1; return a;}},
                 {}
                );
//=> thelistunique = ["ball_1", "ball_13", "ball_23"] 
```

作为扩展`Array.prototype`（使用缩短的`filter`回调）

```
Array.prototype.uniq = function(){
  return this.filter(
      function(a){return !this[a] ? this[a] = true : false;}, {}
  );
}
thelistUnique = thelist.uniq(); //=> ["ball_1", "ball_13", "ball_23"] 
```

[**编辑 2017** ] ES6 对此的看法可能是：

```
const unique = arr => [...new Set(arr)];
const someArr = ["ball_1","ball_13","ball_23","ball_1", "ball_13", "ball_1" ];
console.log( unique(someArr) );
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-23T10:42:55.817

试试这个 - [Array.unique()](http://www.jslab.dk/library/Array.unique)

```
Array.prototype.unique =
  function() {
    var a = [];
    var l = this.length;
    for(var i=0; i<l; i++) {
      for(var j=i+1; j<l; j++) {
        // If this[i] is found later in the array
        if (this[i] === this[j])
          j = ++i;
      }
      a.push(this[i]);
    }
    return a;
  };
thelist=["ball_1","ball_13","ball_23","ball_1"]
thelist=thelist.unique() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T10:49:16.103

jQuery.unique() 仅适用于 DOM 元素数组。看看这个（unique的增强版）：

[增强的独特性](http://paulirish.com/2010/duck-punching-with-jquery/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-23T10:42:31.693

`array_unique`这里有一个 PHP函数的 JavaScript 端口：http: [//phpjs.org/functions/array_unique](http://phpjs.org/functions/array_unique)

```
function array_unique (inputArr) {
    var key = '',
        tmp_arr2 = {},
        val = '';

    var __array_search = function (needle, haystack) {
        var fkey = '';
        for (fkey in haystack) {
            if (haystack.hasOwnProperty(fkey)) {
                if ((haystack[fkey] + '') === (needle + '')) {
                    return fkey;
                }
            }
        }
        return false;
    };

    for (key in inputArr) {
        if (inputArr.hasOwnProperty(key)) {
            val = inputArr[key];
            if (false === __array_search(val, tmp_arr2)) {
                tmp_arr2[key] = val;
            }
        }
    }

    return tmp_arr2;
} 
```

或者从后来的 JS 开始：

```
arr.filter((v, p) => arr.indexOf(v) == p) 
```

# node.js - 使用 jasmine-node 在 nodejs 中测试异步 mongodb 调用

> ID：12551639
> 
> 赞同：8
> 
> 时间：2012-09-23T10:41:19.547
> 
> 标签：node.js, mongodb, jasmine-node

我正在使用 jasmine-node 对我的 nodejs 函数运行测试。作为 nodejs 和 mongodb 的新手，我遇到的第一件事是测试一些数据库调用，但由于 nodejs 的异步特性，我立即陷入困境。

我想做的是：

1）添加一个`add`函数来将新条目添加到一个 mongodb 表中

2) 从该函数接收状态字符串以验证操作的状态

以下是我的规范的代码。在`beforeEach`通话中，我初始化了数据库。正如您在实现中看到的那样，它只实例化一次，因为有一个条件询问它是否已经存在。

```
var mongo = require('../mongo.js');

describe('mongo', function() {

    // generate a random number in order to test if the written item and the retrieved result match
    var randomNumber = Math.random();

    var item = {
        'cities': {
            'london': randomNumber
        }
    };

    beforeEach(function() {

        mongo.init();

        waitsFor(function() {
            return mongo.getCollection();
        }, "should init the database", 10000);

    });

    it('should return "added" after adding an item to the database', function() {

        var result;

        waitsFor(function() {
            result = mongo.add(item);

            // the result value here is always undefined, 
            // due to the problem i'm having in my implementation
            return result !== undefined;

        }, "adding an item to the database", 10000);

        runs(function() {
            expect(result).toEqual('added');
        });

    }); 

}); 
```

现在，对于每个数据库查询，我可以定义一个回调函数，当查询成功运行时执行。我不知道如何实现是将 mongodb 回调的结果返回规范。

这是数据库功能的当前实现：

```
var mongo  = require('mongodb'),
    Server = mongo.Server,
    Db     = mongo.Db;

var server = new Server('localhost', 27017, {auto_reconnect: true});
var db     = new Db('exampleDb', server);

var collection = false;

// initialize database
var init = function() {
    if (collection === false) {
        db.open(dbOpenHandler);
    }
};

var dbOpenHandler = function(err, db) {
    db.collection('myCollection', dbCollectionHandler);
};

var dbCollectionHandler = function(err, coll) {
    collection = coll;
};

/** returns the current db collection's status
  * @return object db collection
  */
var getCollection = function() {
    return collection !== false;
};

/** Add a new item to the database
  * @param object item to be added
  * @return string status code
  */
var add = function(item) {

    var result = collection.insert( item, {safe: true}, function(err) {

        // !! PROBLEM !!
        // this return call returns the string back to the callee
        // question: how would I return this as the add function's return value
        return 'added';

    });

};

// module's export functions
exports.init = init;
exports.getCollection = getCollection;
exports.add = add; 
```

我也对如何在 mongodb 中测试数据库调用的其他方法持开放态度。我已经阅读了很多关于这个主题的文章，但没有一篇涵盖我的特殊情况。

**解决方案**

最后，在 JohnnyHK 的回答的帮助下，我设法通过回调使其工作。查看以下测试用例以了解我所做的事情：

```
it('should create a new item', function() {

    var response;

    mongo.add(item, function( err, result) {
        // set result to a local variable
        response = result;
    });

    // wait for async call to be finished
    waitsFor(function() {
        return response !== undefined;
    }, 'should return a status that is not undefined', 1000);

    // run the assertion after response has been set
    runs(function() {
        expect(response).toEqual('added');
    });

)} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-23T16:59:18.617

`done`您现在可以使用jasmine-node 中的函数更干净地执行此操作：

```
it('should create a new item', function(done) {
    mongo.add(item, function(error, result) {
        expect(result).toEqual('added');
        done();
    });
}); 
```

该测试将等到`done()`被异步调用。默认超时时间为 5 秒，之后您的测试将失败。您可以将其更改为 15 秒，如下所示：

```
it('should create a new item', function(done) {
    mongo.add(item, function(error, result) {
        expect(result).toEqual('added');
        done();
    });
}, 15000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T18:25:44.070

您必须更改您的`add`方法以接受回调参数，以便它可以通过该回调将异步结果传递给调用者：

```
var add = function(item, callback) {
    collection.insert(item, {safe: true}, function(err) {
        callback(err, 'added');
    });    
}; 
```

# ios6 - ios6 中 uicollection 视图的代码 - Xcode 4.5

> ID：12551643
> 
> 赞同：1
> 
> 时间：2012-09-23T10:41:31.730
> 
> 标签：ios6

任何人都可以分享与 iOS6 中的 uicollection 视图相关的代码。我想使用它来链接到 SQLlite 数据库和基于它构建的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:18:47.520

我找到了一个非常简单的教程。

这很容易，我只用它做了我的第一个演示。我希望这对你也有帮助

[http://www.adoptioncurve.net/archives/2012/09/a-simple-uicollectionview-tutorial.php](http://www.adoptioncurve.net/archives/2012/09/a-simple-uicollectionview-tutorial.php)

# javascript - node.js 代码保护 - 如何使 node.js 部署只能在 V8 汇编器中恢复

> ID：12551645
> 
> 赞同：2
> 
> 时间：2012-09-23T10:42:04.460
> 
> 标签：javascript, node.js, assembly, v8, protection

假设出于某种特殊原因，我想要一个健壮的 node.js 代码保护，即强制使用 javascript 源代码的 node.js 部署只能完全通过 v8 汇编语言进行分析，这使得重建非常困难/几乎不可能原始源代码。

换句话说，如果有人假设以某种未经授权的方式获得了 node.js 程序（即假设所讨论的 node.js 程序应该保留在服务器上，而不是直接分发给客户端 - 假设服务器受到客户端破坏等的保护，但假设服务器不是 100% 受信任的，例如云服务器，不能 100% 确定没有人因为某种原因真的想要得到它），那该代码将仅包含 V8 汇编程序，不包含任何原始 js 源代码。我的意思不是丑化、缩小、加密或“源仍然隐藏在字符串中”V8 快照 js 源等 - 但根本没有任何 js 源代码，只有“优化的汇编程序” - 并且以这样的方式对整个源代码进行处理，即源代码将消失并且不包含在此 node.js 实例中 - 未加密，未缩小 - 只是不存在，期间。在这种情况下，如果适用的话，任何性能损失都不是问题，只有源 js 无法恢复，除非通过对整个硬件特定的优化 V8 程序集进行繁琐的研究。

首先想到的一个想法是以某种方式迫使 V8 以某种方式将所有 node.js 源 js 代码优化为“特定于硬件”的汇编程序（但“硬件”将在某种薄 VM 中），然后以某种方式删除 JIT 一直携带的源代码（如果可能的话），并仅依赖这个优化的汇编程序。然后，瘦 VM 将不包含对任何源代码的引用，并将仅使用生成的 V8 汇编程序继续运行程序。不过，我不确定在这种情况下该怎么做。

可能更喜欢可以在 Linux 上运行的东西，但如果只能在 Windows 上运行 - 也会考虑它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T16:14:51.127

如果没有在 V8 内部进行大量修改，这是不可能的，因为它依赖于在多个地方从源代码重新编译函数的能力（例如：惰性编译、Crankshft 优化管道、主要 GC 期间的代码刷新）。此外，如果不跨类似生产的数据实际运行您的应用程序，就不可能产生良好的优化代码，因为除了内联缓存之外，V8 没有其他方法可以收集有关您的代码的类型信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T11:33:25.490

PHP 有很多混淆器。所有流行的 PHP 混淆器都有反混淆器。结果比[谷歌闭包](https://developers.google.com/closure/)给出的更具可读性。您可以使用[google 关闭](https://developers.google.com/closure/) 如果您不信任它，请不要使用云托管。大多数带有字节码的应用程序都非常容易反编译。（Java、Android、.NET）

简而言之，不要在混淆上浪费时间。反编译然后混淆和调试它处理的所有问题通常更容易。我这么说是因为我用 Java 和 .NET 混淆了许多应用程序

# php - 如何使用 PHP 提取动画 GIF 的帧

> ID：12551646
> 
> 赞同：9
> 
> 时间：2012-09-23T10:42:11.543
> 
> 标签：php, frame, extract, gif, animated-gif

我搜索了很长时间如何使用 PHP 从动画 GIF 中提取帧...不幸的是我刚刚找到了如何获取它们的持续时间...

我真的需要提取 GIF 帧及其持续时间，以便在每个帧上应用一些调整大小、旋转等，然后用编辑过的帧重新生成 GIF！

我不想使用任何软件、外部库（如 ImageMagick），只是 PHP：实际上我需要让我的类[http://phpimageworkshop.com/](http://phpimageworkshop.com/)使用动画 GIF。

如果你有任何想法，我在听你的^^！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-23T17:53:12.777

我花了一天的时间创建一个基于[这个](https://gist.github.com/3769812)类的类，以仅使用 PHP 来实现我想要的！

你可以在这里找到它：[https ://github.com/Sybio/GifFrameExtractor](https://github.com/Sybio/GifFrameExtractor)

感谢您的回答！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T14:34:04.147

好吧，我真的不建议这样做，但这里有一个选项。动画 gif 实际上只是由分隔符“\x00\x21\xF9\x04”连接在一起的多个 gif。知道了这一点，您只需将图像作为字符串拉入 PHP，运行分解，然后循环遍历运行转换的数组。代码可能看起来像这样。

```
$image_string = file_get_contents($image_path);

$images = explode("\x00\x21\xF9\x04", $image_string);

foreach( $images as $image ) {
  // apply transformation
}

$new_gif = implode("\x00\x21\xF9\x04", $images); 
```

我不是 100% 确定重新连接图像的细节，但这里是[关于动画 GIF 文件格式的维基百科页面](http://en.wikipedia.org/wiki/Graphics_Interchange_Format#File_format)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-03T20:59:11.423

我是[https://github.com/stil/gif-endec](https://github.com/stil/gif-endec)库的作者，该库在解码 GIF 时比`Sybio/GifFrameExtractor`接受答案的库要快得多（大约 2.5 倍）。它的内存使用量也更少，因为它允许您在解码时一帧接一帧地处理，而无需一次将所有内容加载到内存中。

小代码示例：

```
<?php
require __DIR__ . '/../vendor/autoload.php';

use GIFEndec\Events\FrameDecodedEvent;
use GIFEndec\IO\FileStream;
use GIFEndec\Decoder;

/**
 * Open GIF as FileStream
 */
$gifStream = new FileStream("path/to/animation.gif");

/**
 * Create Decoder instance from MemoryStream
 */
$gifDecoder = new Decoder($gifStream);

/**
 * Run decoder. Pass callback function to process decoded Frames when they're ready.
 */
$gifDecoder->decode(function (FrameDecodedEvent $event) {
    /**
     * Write frame images to directory
     */
    $event->decodedFrame->getStream()->copyContentsToFile(
        __DIR__ . "/frames/frame{$event->frameIndex}.gif"
    );
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T13:39:30.777

> 我不想使用任何软件、外部库（如 ImageMagick）

好吧，祝你好运，因为 Zend 引擎导出到 PHP 运行时的功能中有 90% 来自库。

> 如果你有任何想法，我在听你的^^！

解析GIF格式的二进制数据。除其他外，您可以使用 unpack()。

# linux - 我如何知道 linux 中当前附加的卷

> ID：12551647
> 
> 赞同：2
> 
> 时间：2012-09-23T10:42:12.697
> 
> 标签：linux, amazon-ec2

我正在使用 ubuntu EC2 亚马逊机器。我需要知道当前附加的卷。我使用了以下命令：

```
cat /proc/partitions 
```

但是，我得到： cat: proc/partitions: 没有这样的文件或目录。当我检查 proc 目录时，我发现它是空的。如何找出当前附加的卷及其名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T10:46:05.943

要获取 proc 文件系统，您可能需要挂载它。

```
mount proc /proc 
```

要获取分区列表，我使用以下命令。他们每个人都给出了分区列表。

```
fdisk -l 
parted -l
df -h
mount 
```

注意：`mount`仅显示当前已挂载的卷列表，并`df`显示已挂载卷的统计信息。

# heroku - 在 heroku 上添加 SSL 测试证书失败

> ID：12551651
> 
> 赞同：0
> 
> 时间：2012-09-23T10:42:49.577
> 
> 标签：heroku, ssl-certificate

我按照此处概述的步骤[https://devcenter.heroku.com/articles/ssl-certificate-self](https://devcenter.heroku.com/articles/ssl-certificate-self)在 heroku 添加 SSL 端点的测试证书

当我尝试通过运行“heroku certs:add server.crt server.key”来添加它时

我收到以下错误：

！无效的证书或密钥。请验证您的文件是否包含有效的信任链，或联系 support@heroku.com

任何人都知道我缺少什么以及如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:58:42.620

确实存在一些问题，但您可以尝试使用 ssldoctor：[https ://github.com/heroku/heroku-ssl-doctor](https://github.com/heroku/heroku-ssl-doctor)

# wpf - 如何使用 x:SynchronousMode 属性

> ID：12551658
> 
> 赞同：1
> 
> 时间：2012-09-23T10:43:36.207
> 
> 标签：wpf

我想在运行时异步加载一个松散的 xaml 文件。我在 msdn 文档中读到，xaml 阅读器因此需要 xaml 文件的根元素上的属性'x:SynchronousMode="Async"'。如果我在根元素上定义此属性，Visual Studio 2012 会告诉我，此属性不包含在 XAML 命名空间中。因此，显示我的 xaml 文件的可视化表示的设计器窗口除了“无效标记”之外不显示任何内容。

这是我松散的 xaml 文件的第一行：

```
<?xml version="1.0" encoding="utf-8" ?>
<DockPanel xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
       x:SynchronousMode="Async" LastChildFill="True"> 
```

问题是什么？

问候，凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T13:03:19.613

您是否尝试过使用[XamlReader.LoadAysnc()](http://msdn.microsoft.com/en-us/library/aa346593.aspx "XamlReader.LoadAysnc()")方法异步加载松散的 XAML？

# php - 在 Zend Framework 2 应用程序的表单集合中使用 dgrid

> ID：12551661
> 
> 赞同：24
> 
> 时间：2012-09-23T10:43:43.573
> 
> 标签：php, dojo, zend-framework2, dgrid, zend-form2

对于我们的新项目，我们已经开始使用 Zend Framework 2 和 Dojo 1.8。ZF2 有一个完全重写的表单模块，它现在具有用于一对多关系的新 CollectionElement。关于 UI，我发现 dgrid 最适合这种关系（使用编辑器列插件），所以我开始扩展 FormCollection、FormRow 和 FormElement 视图助手，以便它们可以呈现所需的 dgrid。一切都很好，直到我意识到我无法为 dgrid 小部件设置每行输入名称。

我从[ZF2 文档开始处理表单集合](http://framework.zend.com/manual/2.0/en/modules/zend.form.collections.html)。可以看到，集合输入元素具有类似数组的名称，例如

```
order[products][0][name]
order[products][0][price]
order[products][1][name]
order[products][1][price] 
```

另一方面，dgrid 的配置是基于列的，所以我可以有一个像这样的列定义

```
editor({
    field: "_dojo_textbox_505ee3a390d705_26717315", 
    label: "Name",
    editorArgs: {
        name: "order[products][{index}][name]",
    }
}, TextBox) 
```

此列定义将为所有行定义设置相同的小部件名称，这不适用于 ZF2 集合数据格式要求。

我还尝试过这样命名列：

```
order[products][] 
```

哪个有效，但不允许所需的格式

```
order[products][][name] 
```

也许有一种方法可以像这样发布数据：

```
order[products][name][] 
```

并在之后对其进行转换，但解决方案看起来不正确。除此之外，我正在尝试生成可重用的代码并希望避免执行表单数据修改。

由于我非常努力地避免对数据转换进行 onSubmit/onClick 事件处理，因此有两种可能的解决方案： 1\. 使 dgrid 能够设置每行小部件名称 2\. 使 ZF2 表单理解一些非标准的 POST 格式收藏品

不幸的是，我没有想法，如何完成这两种解决方案，所以如果你能帮我解决这个问题，我将不胜感激！

由于这与我当前的问题有些相关，因此我将把它作为一个附带问题放在此处：除了这个 UI 解决方案之外，您还为与 dojo 的一对多表单界面使用了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T16:38:42.987

在 Zend 框架版本 2 中，“Zend\Form”本身具有向“集合元素”动态添加新元素的能力。

你可以[在这里查看](http://framework.zend.com/manual/2.0/en/modules/zend.form.collections.html#adding-new-elements-dynamically)

# jquery - jQuery Isotope — 按类别排序，但指定哪个在前

> ID：12551662
> 
> 赞同：3
> 
> 时间：2012-09-23T10:43:58.707
> 
> 标签：jquery, sorting, jquery-isotope

我正在寻找一种排序行为，一种与*特定*类别匹配并将其放在列表前面的排序行为。就像过滤器一样，除了不删除其他项目。

想象一下同位素网格中的这些类别项目：

*   红色的
*   绿
*   蓝色的
*   红色的
*   绿
*   蓝色的

如果我按类别排序，它会按字母顺序显示：

*   蓝色的
*   蓝色的
*   绿
*   绿
*   红色的
*   红色的

我想要的是将**特定**类别浮动到前面，例如“绿色”，如下所示：

*   绿
*   绿
*   红色的
*   红色的
*   蓝色的
*   蓝色的

这可能吗？

我尝试`getSortData`为每个类别添加一个函数，如下所示：

```
 green : function( $elem ) {
        var $greenItems = $elem.filter('.green');            
        var $otherItems = $elem.filter(':not(.green)');
        return $greenItems.add($otherItems);
      }
      // repeat for blue, red, etc 
```

但这没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T11:48:48.677

这对我有用：

```
green : function( $elem ) {
    var isGreen = $elem.hasClass('green');
    return (!isGreen?' ':'');
},
// etc 
```

演示：http: [//jsfiddle.net/Yvk9q/9/](http://jsfiddle.net/Yvk9q/9/)

# java - 在清单中关闭接收器

> ID：12551664
> 
> 赞同：1
> 
> 时间：2012-09-23T10:44:13.870
> 
> 标签：java, android, sms

我编写了接收短信的应用程序。
在 AndroidManifest.xml 我写道：

```
 <receiver
            android:name=".SmsReceiver">
            <intent-filter>
                <action
                    android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver> 
```

所有接收到的 SMS-es 都由类 SmsReceiver 进行分析。

类短信接收器：

```
public class SmsReceiver extends BroadcastReceiver
{
    private static final String SMS_RECEIVED = "com.example.remotecontrol.SMS_RECEIVED";
    private static final String SMS_CONTENT_KEY = "com.example.remotecontrol.SMS_CONTENT_KEY";

    @Override
    public void onReceive(Context context, Intent intent)
    {
        Bundle bundle = intent.getExtras();
        SmsMessage[] message = null;
        String contentMessage = "";
        if(bundle != null)
        {
            Object[] pdus = (Object[]) bundle.get("pdus");
            message = new SmsMessage[pdus.length];
            for(int i=0; i<message.length; i++)
            {
                message[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                contentMessage += "SMS from " + message[i].getOriginatingAddress() + ": ";
                contentMessage += message[i].getMessageBody() + "\n";
            }

            Toast.makeText(context, contentMessage, Toast.LENGTH_LONG).show();
        }

        Intent intentSmsReceived = new Intent();
        intentSmsReceived.setAction(SMS_RECEIVED);
        intentSmsReceived.putExtra(SMS_CONTENT_KEY, contentMessage);
        context.sendBroadcast(intentSmsReceived);

    }

} 
```

它接收 SMS 并向程序发送意图。

```
 registerReceiver(new BroadcastReceiver()
        {

            @Override
            public void onReceive(Context context, Intent intent)
            {
                String contentMessage = intent.getExtras().getString(SMS_CONTENT_KEY);
                Toast.makeText(context, contentMessage + "text", Toast.LENGTH_LONG).show();
                //TODO
                //process SMS

                unregisterReceiver(this);
            }

        }, new IntentFilter(SMS_RECEIVED)); 
```

这部分代码获取意图并处理 SMS 并与应用程序交互。

如何注销用 Android Manifest 编写的接收器？它处理所有 SMS-es，我希望它只处理一个正确和关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:51:38.770

如果您的广播接收器在清单中指定，则不能以编程方式取消注册。您需要将其从清单中取出并在您的代码中进行注册。

或者，您可以将其注册并在 onReceive 的第一行添加检查。可能是通过布尔标志。

# ruby-on-rails - Rails 客户端验证：如何显示正面消息？

> ID：12551665
> 
> 赞同：3
> 
> 时间：2012-09-23T10:44:37.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, error-handling, client-side-validation

在`client_side_validations`gem 的初始化程序中，我可以更改`field_error_proc`为内联显示错误消息。但是我怎样才能显示积极的信息呢？例如，当用户填写密码字段时，我会显示：**“太短”**、**“不错”**、**“安全”**，并在用户离开该字段后添加一个绿色复选框。

**编辑：**密码只是一个例子，不是最好的，我真正需要它只是为了让用户填写的表单中的字段有 2 个状态有效/无效。如果出现`client_side_validations`问题，gem 会显示错误消息，如果没问题，它不会显示任何内容 - 我想向用户展示他做对了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T16:43:46.090

我没有机会使用 gem，但[回调](https://github.com/bcardarella/client_side_validations/wiki/Callbacks)应该提供一种方法来实现你应得的功能。

`clientSideValidations.callbacks.element.pass(element, callback, eventData)`如果表单元素已通过验证，则可用于进行额外处理。

# javascript - Google Drive Doc Viewer - 使用 javascript 滚动和缩放文档

> ID：12551670
> 
> 赞同：1
> 
> 时间：2012-09-23T10:45:52.957
> 
> 标签：javascript, google-docs-api, google-drive-api

[这是](https://docs.google.com/file/d/0B5cRH_G6kDjbUndHVzJDRDE3ekk/preview)我在 Google Drive/Docs 中的文档的链接。我想做的是滚动该文档（上/下/左/右）并放大和缩小（不使用鼠标按下放大/缩小按钮或滚动条按钮） . 最好通过传入一个 Javascript 命令，就像`window.scrollBy(x,y);`在普通 HTML 页面上正常工作但在上面的页面上一样，因为 PDF 文档在 iframe 内。我也尝试过滚动 iframe，但它不起作用，因为滚动不是由 iframe 处理的。它由iframe*内的组件处理。*

**环境**：我正在使用 Java 1.6 编写基于 Windows7 的应用程序。我正在使用一个名为 JWebBrowser 的嵌入式 Java Web 浏览器（一个非常方便的实用程序，它是[DJ Native Swing 包](http://djproject.sourceforge.net/ns/)的一部分）。JWebBrowser 有一种方法可以执行以字符串形式给出的 Javascript 命令。这适用于我滚动普通的 HTML 页面。

**背景**：我正在制作一个应用程序，允许身体残疾的人在不使用标准键盘和鼠标的情况下访问计算机。用户只有非常有限的物理输入选项——在某些情况下，只有一两个按钮/开关。这就是为什么现有的缩放和滚动按钮对我没有用的原因。下面是我的程序的截图。*用户通过按下移动*按钮来导航左侧的选项，并通过按下*选择*按钮来选择一个。顺便说一句，我使用 Google Drive 作为电子邮件附件的查看器。此屏幕截图显示了一个这样的附件。

![在此处输入图像描述](../Images/24d92bbe400cb526a754af3580e6d4f2.png)

如果有人对完全不同的在线文档查看器有任何建议，它更适合我的需求，可用于显示 PDF、电子表格、Word 文档等，请告诉我！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-05-18T13:14:29.213

使用 Mozilla 的 ViewerJS，它有一个 Angular 版本的页面属性。在 Angular 中，您可以使用`ng2-pdfjs-viewer`with `[page]="page"`。

# c - 可执行文件中全局 const 变量的偏移量

> ID：12551672
> 
> 赞同：9
> 
> 时间：2012-09-23T10:45:56.490
> 
> 标签：c, linker, executable, linker-scripts

想让一个可执行文件通过修改它自己的全局常量来保存它的状态。只是为了拥有一个完全独立的可执行文件。

想到的一些解决方案/黑客：

1.  使用 libelf 并让程序自行解析以找到偏移量。
2.  添加一个特定的标记，然后在可执行文件中搜索它。我想这甚至可能有点跨平台？
3.  使用对象转储工具来确定可执行文件中的地址。这可能需要始终作为项目构建的后处理来完成。

让链接器提供此信息会很好。

是否可以让链接器提供可执行文件中只读部分的偏移量？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T10:55:21.953

您想要做的事情是棘手且不可移植的。

[但是，您可以在src/unexelf.c](http://git.savannah.gnu.org/cgit/emacs.git/tree/src/unexelf.c?h=trunk)中学习 GNU emacs`unexec`函数（对于 Linux；其他操作系统也有类似的文件）。

您还可以使用链接器技巧，例如使用您自己的`ld`脚本。

请注意，这些技巧可能是特定于处理器、编译器、内核和 libc 版本的。

也许您想要[应用程序检查点](http://en.wikipedia.org/wiki/Application_checkpointing)。特别是，[BLCR](https://ftg.lbl.gov/projects/CheckpointRestart/)可能对您有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T11:37:49.943

您本质上是在谈论二进制重写。一种无需修改编译过程即可实现此目的的方法是将虚拟地址映射到物理地址，然后对其进行修补。有趣的是，这是我在[硕士论文](http://www.doc.ic.ac.uk/teaching/distinguished-projects/2012/m.kwan%20.pdf)中涉及的内容。从该文档中提取以下图像和文本：

![http://localhostr.com/file/hyB1iFuiL0nV/Loading_Binary.jpg](../Images/123adc4c771109a7814217bcfa56940e.png)

*请注意，我的原始项目背后的概念是在编译过程无法修改的情况下重写其他二进制文件中的代码。如果您的要求和假设不同，这可能不是最简单和最好的方法。*

这里最重要的想法是磁盘表示中的一个部分在映射到内存时被保留（而不是拆分）。这意味着在磁盘表示中处于特定偏移量的数据将在加载到内存后偏移相同的量。

在`libelf`中，与 类似`libbfd`，可执行文件包含一组代码和数据都可以驻留的部分。当操作系统将可执行文件加载到内存中时，每个部分都基于某个基地址。我们可以反过来将虚拟内存地址映射到物理文件偏移量。如果可以找到物理文件偏移量，则可以将字节修补为常规文件。

*   首先，可执行文件的节头用`libelf`. 这使我们能够获得一组部分，最重要的是，每个部分`libelf`可以告诉我们三件事：
    1.  **部分大小 部分**的大小。
    2.  **节基地址**将磁盘上的可执行文件加载到内存时节所基于的地址。
    3.  **节磁盘偏移 节**的磁盘偏移量。
*   通过对上一步提取的段信息进行迭代，可以找出任意虚拟内存地址包含在哪个段中。在打补丁的时候，我们感兴趣的内存地址就是绕道的代码的地址要写。虚拟内存地址在段中的偏移量可以通过 计算`(virtual_memory_address - section_base_address)`。
*   因此，虚拟内存地址的磁盘偏移量可以通过 计算`(section_disk_offset + (virtual_memory_address - section_base_address))`。

此过程允许将任意虚拟内存地址映射到其相应的磁盘文件偏移量。然后可以使用常规的 C 文件 IO 函数修补此偏移量，例如`fopen`/ `fseek`/ `fwrite`/ `fclose`。

这是我使用上述步骤将虚拟地址映射到物理文件偏移量的代码：

```
/*
 * Returns the corresponding 32 bit executable file offset of a virtual memory
 * address.
 */
uint32_t vaddr32_to_file_offset(char * filepath, uint32_t vaddr)
{
    int      fd     = open(filepath, O_RDONLY);
    Elf *    e      = elf_begin(fd, ELF_C_READ, NULL);
    uint32_t offset = 0;

    Elf_Scn * scn = NULL;
    while((scn = elf_nextscn(e, scn)) != NULL) {
        Elf32_Shdr * shdr = elf32_getshdr(scn);
        if(vaddr >= shdr->sh_addr &&
                (vaddr <= (shdr->sh_addr + shdr->sh_size))) {
            offset = shdr->sh_offset + (vaddr - shdr->sh_addr);
            break;
        }
    }

    elf_end(e);
    close(fd);
    return offset;
}

/*
 * Returns the corresponding 64 bit executable file offset of a virtual memory
 * address.
 */
uint64_t vaddr64_to_file_offset(char * filepath, uint64_t vaddr)
{
    int      fd     = open(filepath, O_RDONLY);
    Elf *    e      = elf_begin(fd, ELF_C_READ, NULL);
    uint64_t offset = 0;

    Elf_Scn * scn = NULL;
    while((scn = elf_nextscn(e, scn)) != NULL) {
        Elf64_Shdr * shdr = elf64_getshdr(scn);
        if(vaddr >= shdr->sh_addr &&
                (vaddr <= (shdr->sh_addr + shdr->sh_size))) {
            offset = shdr->sh_offset + (vaddr - shdr->sh_addr);
            break;
        }
    }

    elf_end(e);
    close(fd);
    return offset;
} 
```

这是在给定偏移量的情况下修补 ELF 可执行文件的代码：

```
/*
 * Sets the bytes at an arbitrary offset of a file to the contents of buffer.
 */
static bool patch_file(char * filepath, uint64_t offset, void * buffer,
        size_t size)
{
    FILE * pFile = fopen(filepath, "r+");

    if(pFile == NULL) {
        return FALSE;
    }

    fseek(pFile, offset, SEEK_SET);
    fwrite(buffer, 1, size, pFile);
    fclose(pFile);
    return TRUE;
} 
```

更详细的信息可以在报告本身中找到，该报告可[在此处](http://www.doc.ic.ac.uk/teaching/distinguished-projects/2012/m.kwan%20.pdf)公开获得。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-23T11:21:28.547

这是不可能的，因为编译器通常会尽可能将全局和静态常量替换为机器代码中的立即值。例如：

```
const int x=3;

int main()
{
 return x;
} 
```

为 main() (OSX/gcc -O3) 生成此代码：

```
_main:
Leh_func_begin1:
    pushq   %rbp
Ltmp0:
    movq    %rsp, %rbp
Ltmp1:
    movl    $3, %eax // <= immediate constant!
    popq    %rbp
    ret 
```

# java - 参数化类型是什么意思？

> ID：12551674
> 
> 赞同：34
> 
> 时间：2012-09-23T10:46:10.513
> 
> 标签：java, generics

[此](http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#FAQ001)链接说明以下内容：

> 具有实际类型参数的泛型类型的实例化称为参数化类型。示例（参数化类型）：
> 
> `Collection<String> coll = new LinkedList<String>();`

那么什么是参数化类型呢？

*   `Collection<String>`或者
*   `LinkedList<String>`

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-23T10:52:23.313

它们都是参数化类型：将其他类型作为参数的类型。

在表达式的两侧有不同类型的事实是无关紧要的，并且与多态行为有关，即因为`LinkedList`是`Collection`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-23T10:53:29.373

参数化类型通常是一个处理其他对象的类，而不关心它是什么类型。可以使用符号“名称”定义类型，然后在创建类实例时传递。

例如：

```
class MyClass<T> {
    private T obj;
    public MyClass<T>(T obj) {
        this.obj = obj;
    }
    public int getId() {
        return obj.hashCode();
    }
} 
```

在上面的示例中，`MyClass`包装任何类型的对象并`hashCode()`使用该方法始终存在的事实来执行其方法。

下面是如何使用这个类：

`int sid = new MyClass<String>("aaaa").hashCode();`

请注意，您不能说 `new MyClass<String>(123)`：对象是用参数创建的这一事实`String`决定了构造函数参数的类型。

回到你的例子`Collection<String>`意味着“字符串的集合”。这意味着您不能将其他类型的对象添加到此集合中。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-10-25T03:40:40.763

似乎泛型类型和参数化类型是同义词。但是调用泛型类型似乎是不对的，`Box<Integer>`因为在这个词的意义上不再是泛型了。所以可能：

泛型类型是带有正式类型参数的声明

```
class Box<T> { .. } 
```

`Box<T>`是泛型类型

参数化类型是具有实际类型参数的声明

```
Box<Integer> b; 
```

`Box<Integer>`是参数化类型

原始类型是没有实际类型参数的泛型类型的声明。

```
class Box<T> { .. }
Box b; 
```

`Box`是原始类型

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T10:52:54.087

集合的两种用途

```
Collection<String> 
LinkedList<String> 
```

这里是参数化类型，`String`是使用的类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-18T15:25:31.513

这是术语的快速细分......

*   类型参数：简单的占位符，即`"<T>"`
*   类型参数：声明时传递给类型参数，即`"<String>"`
*   参数化类型（通用）：具有正式类型参数的类型，即`"List<T>"`
*   参数化类型（具体）：以声明的类型实参作为参数的类型，即`"List<String>"`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-04-28T07:51:16.073

ParameterizedType 表示一个参数化类型，例如 Collection。

参数化类型在反射方法第一次需要时创建，如此包中所指定。创建参数化类型 p 时，解析 p 实例化的泛型类型声明，并递归创建 p 的所有类型参数。有关类型变量的创建过程的详细信息，请参阅 TypeVariable。重复创建参数化类型无效。

实现此接口的类的实例必须实现 equals() 方法，该方法等同于任何两个共享相同泛型类型声明并具有相同类型参数的实例。

# html - 页脚问题；当我调整窗口大小时，右侧有一个大空白

> ID：12551676
> 
> 赞同：0
> 
> 时间：2012-09-23T10:46:43.597
> 
> 标签：html, css

好的，这一直困扰着我几个小时，我不仅无法解决这个问题，而且我不明白为什么会这样（公平地说是早上 6 点@_@）。无论如何，所以我试图让页脚连续，一个简单的颜色。页脚内容由几个不同宽度的垂直框组成。我正在使用带有列表的无序列表来完成此操作。

[http://jsfiddle.net/WTABE/](http://jsfiddle.net/WTABE/)

当浏览器最大化时一切都很好，但是当我调整它的大小时，会出现一个水平滚动条，当你向右滚动时，页面会被切断，更右边是一个很大的空白。

现在，每当我在 #footerContect ul {} 中取出宽度时，这个问题就会消失，但列会自行脱离中心。即使我自己调整 li> 内容的各个宽度，它对空白的大小也几乎没有影响。即使我将 li> 组件的宽度缩小到 50px 并将 UL 宽度缩小到 500px（我这样做是为了看看会发生什么），空白仍然存在！

一定有一些我在这里遗漏的东西，因为我还尝试将 li> 的边距和填充设置为零，它们都混合在一起，但空白仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:30:31.007

好的。所以我发现它与浮动有关，我只是从以下位置取出浮动：

# 页脚内容#quicknav li {浮动：无；宽度：150px;}​</h1>

现在它在 chrome 上看起来很完美。

但是 IE 和 Firefox 确实给我带来了问题。如果您调整浏览器的大小，页脚会调整并卡住......就像当您使用水平栏向右滚动时，您会将页脚留在您离开它的位置。向左转。还有一些奇怪的额外空白再次发生。这必须与更多的浮动（尝试在所有元素上放置边框，并一次消除一个 DIV 部分，直到大部分空白消失）。

这家伙没有使用浮动，但这就是我的浏览器在 IE 或 firefox 中的外观： [css white-space:nowrap Horizo​​ntal scroll bug](https://stackoverflow.com/questions/4964041/css-white-spacenowrap-horizontal-scroll-bug)

# python - 用户访问限制网站

> ID：12551680
> 
> 赞同：1
> 
> 时间：2012-09-23T10:47:29.150
> 
> 标签：python, google-app-engine, web-applications, web

我正在使用 GAP 在 Python 中开发一个 Web 应用程序，并且我有多个用户，每个用户都有自己的资源。

我想知道的是，如果用户`A`有资源，`/A/resource/`我该如何限制用户`B`对该资源的访问？

我正在考虑使用cookies，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:08:58.340

如果您使用用户服务：

[https://developers.google.com/appengine/docs/python/gettingstarted/usingusers](https://developers.google.com/appengine/docs/python/gettingstarted/usingusers)

您可以利用 google 为登录等提供的安全性。

然后对于每个资源，跟踪哪些“用户”拥有它，并仅将其提供给该用户和该用户。

```
user = users.get_current_user()
if user == valid_user_for_this_resource:
    #serve resource
else:
    #deny access 
```

否则，您可以推出自己的登录服务并进行验证。

# javascript - 如果未定义/为空或为空，则删除或隐藏 div

> ID：12551682
> 
> 赞同：0
> 
> 时间：2012-09-23T10:47:35.873
> 
> 标签：javascript, jquery

我有一个脚本可以根据 url 显示信息并保存此信息：[moskah.nl](http://moskah.nl)

问题是，如果您在不提供 url 的情况下单击按钮，那么脚本将提供一个空的 div。只需重新加载页面，您就会看到它仍然存在。

我可以在 Jquery 中做什么来删除或隐藏文档准备好的这些 emty div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:52:46.867

您可以尝试`$("div:empty").remove();`或`$("div:empty").hide();`

由于没有提供代码，我不确定这是否是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T10:58:10.463

假设您的 div 具有类名“item”，然后您遍历每个 div 并检查哪个是空的并隐藏它们。

```
 $(document).ready(function() {
    $('#feed').children('div').each(function() {
        if(($(this).attr('data-url')=='undefined'))
        $(this).hide();
    });
     //for first div only special check:-
      if(($('.item.first').attr('data-url')=='undefined'))
        $('.item.first').hide();

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T11:14:04.780

我希望这有帮助。

您可以在加载 div 后使用 .is() 函数。

```
if( $('#leftmenu').is(':empty') ) {
    // REMOVE 
```

您还可以使用长度属性：

```
if( $('#leftmenu:empty').length ) {
    // REMOVE 
```

或者你可以修剪然后检查。

```
if( !$.trim( $('#leftmenu').html() ).length ) {
    // REMOVE 
```

请让我知道这是否有效。实施并让我知道。

> 已编辑

利用

```
$(document).ready(function() { $('div:empty').remove(); }); 
```

我在 Firefox 中尝试过。有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T11:34:13.163

为什么不做一些数据验证来阻止表单提交空数据而不仅仅是隐藏它？像这样的东西

```
$('#id_submit').attr('disabled', 'disabled');

$('#id_submit').click(function(event){
    if ($('#id_status').val().length > 0) {
        $('#id_submit').removeAttr('disabled');
    }
    else
    {
    event.PreventDefault()
    }
}); 
```

# javascript - 有没有办法检查一个文件是否在浏览器的缓存中，如果它不在，只下载它？

> ID：12551684
> 
> 赞同：2
> 
> 时间：2012-09-23T10:48:28.680
> 
> 标签：javascript, html, caching, audio, web

我正在制作一个音频重页。我正在使用 JavaScript 音频元素。代码如下所示：

JavaScript：

```
var x = new Audio("x.mp3");
var y = new Audio("y.mp3");
var z = new Audio("z.mp3");

function playMe(n){
    n.play();
} 
```

HTML：

```
<button class="button" onclick="playMe(x)")>Play</button>
<button class="button" onclick="playMe(y)")>Play</button>
<button class="button" onclick="playMe(z)")>Play</button> 
```

我正在尝试找到一种节省带宽的方法，有人建议我应该使用 Web 服务器中的缓存标头或缓存清单。这是线程：

[如何重用浏览器已经下载的音频，使其不会在使用相同音频文件的其他页面中再次下载？](https://stackoverflow.com/questions/12551302/how-can-i-reuse-the-audio-a-browser-already-downloaded-so-it-doesnt-download-it)

JavaScript（或任何其他方式）有没有办法检查浏览器缓存的内容？目标是实现这样的目标：

```
if (file in the cache){
    use the file in the cache;
}
else{
    var x = new Audio("x.mp3");
    var y = new Audio("y.mp3");
    var z = new Audio("z.mp3");
} 
```

声明 Audio 对象时下载音频文件。

有没有办法做到这一点？

# c# - 更新数千行

> ID：12551688
> 
> 赞同：1
> 
> 时间：2012-09-23T10:48:40.077
> 
> 标签：c#, sql

我有这个查询：

```
s="update myTable set date='09/09/12' where crc32 in("+list+")"; 
```

但由于我的列表包含数千个值，我认为有更好的方法来做到这一点。我不知道哪种方式，或如何。

更新：该列`crc32`是`int`. `list`是字符串，如：

```
list = "2345,-6467,7865,7654,...." 
```

我通过 c# 执行查询。`list`包含我无法通过 sql 查询获取它们的值，仅通过我的代码。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:54:52.057

检查表值参数。[http://msdn.microsoft.com/en-us/library/bb510489.aspx](http://msdn.microsoft.com/en-us/library/bb510489.aspx)把它放在一个存储过程中，比如：

```
create procedure mysp
@tvp tvp_list readonly
as
 update mt
 set date='09/09/12'
 from mytable mt
 join @tvp t on tvp.id = crc32 
```

并使用包含您的 crc32 的数据表参数从 C# 调用它

```
var cmd = new SqlCommand(CommandText = "prc_update",conn);

...

var dt = new DataTable();
dt.Columns.Add("crc32",typeof(string));
..... you can add more if you like
foreach(var item in myList)
{
  var row = dt.NewRow();
  row["crc32"] = item;
  dt.Rows.Add(row);
}

cmd.Parameters.Add("@tvp", System.Data.SqlDbType.Structured);
cmd.Parameters["@tvp"].Value = dt;

.....

conn.Open();
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T10:55:27.813

`List`在数据库的某个地方吗？

因为`UPDATE`with a`JOIN`可能更快，所以创建一个表，放入`List`它，然后`UPDATE`用 a执行它甚至可能更快`JOIN`。

# php - 无法修改 Wordpress 中的标题信息错误

> ID：12551689
> 
> 赞同：3
> 
> 时间：2012-09-23T10:48:41.660
> 
> 标签：php, wordpress, http-headers, configuration-files, pluggable

尝试登录管理面板时遇到此错误。我无法理解它。

```
Warning: Cannot modify header information - headers already sent by (output started at /home/xxxxxx/public_html/wordpress/wp-config.php:1) in /home/xxxxxx/public_html/wordpress/wp-includes/pluggable.php on line 881 
```

可插拔的.php 881：

```
function wp_redirect($location, $status = 302) {
global $is_IIS;

$location = apply_filters('wp_redirect', $location, $status);
$status = apply_filters('wp_redirect_status', $status, $location);

if ( !$location ) // allows the wp_redirect filter to cancel a redirect
    return false;

$location = wp_sanitize_redirect($location);

if ( !$is_IIS && php_sapi_name() != 'cgi-fcgi' )
    status_header($status); // This causes problems on IIS and some FastCGI setups

header("Location: $location", true, $status);
}
endif; 
```

我正在使用最新版本的 wordpress 3.4.2。我的网站似乎运行良好，但该错误阻止我进入登录页面，这意味着我根本无法管理或卸载似乎触发此问题的插件（dbc 备份 2）。我已经用 HTML-kit 工具检查了 wp.config 文件数百次，并且在文件的开头和结尾都没有可见的空格。我有：

1.  使用 HTML-Kit 工具检查 wp-config 文件中的空格
2.  下载并插入新的 wp-config 文件
3.  通过重命名禁用插件目录

...并且错误仍然存​​在

我唯一可以尝试的是有人在 wordpress 论坛上发布的代码，声称他通过将以下代码插入 wp-config.php 文件来解决了这个问题：

```
 <?
//dont use header function in wordpress-wp_signup.php
global $domain;
global $path;
//change urlnew variable as per requirment
$urlnew = "http://".$domain.$path."/wp-admin/admin.php;

echo "<script>";
echo "location = '$urlnew';";
echo "</script>";
echo $urlnew;
?> 
```

我不愿意添加代码，因为我不熟悉 html 或 php，而且我不完全了解此代码的功能，也没有详细说明将其准确放置在何处。有更好的建议吗？

* * *

主题 function.php 文件这样结束，我应该在哪里准确插入代码？：

```
// include custom widget

$temp_root = get_root_directory('include/plugin/custom-widget/custom-blog-widget.php');

include_once($temp_root . 'include/plugin/custom-widget/custom-blog-widget.php'); 

$temp_root = get_root_directory('include/plugin/custom-widget/custom-port-widget.php');

include_once($temp_root . 'include/plugin/custom-widget/custom-port-widget.php'); 

$temp_root = get_root_directory('include/plugin/custom-widget/custom-port-widget-2.php');

include_once($temp_root . 'include/plugin/custom-widget/custom-port-widget-2.php'); 

$temp_root = get_root_directory('include/plugin/custom-widget/popular-post-widget.php');

include_once($temp_root . 'include/plugin/custom-widget/popular-post-widget.php'); 

$temp_root = get_root_directory('include/plugin/custom-widget/contact-widget.php');

include_once($temp_root . 'include/plugin/custom-widget/contact-widget.php'); 

$temp_root = get_root_directory('include/plugin/custom-widget/flickr-widget.php');

include_once($temp_root . 'include/plugin/custom-widget/flickr-widget.php'); 

$temp_root = get_root_directory('include/plugin/custom-widget/twitter-widget.php');

include_once($temp_root . 'include/plugin/custom-widget/twitter-widget.php');

// get the path for the file ( to support child theme )

function get_root_directory( $path ){

    if( file_exists( STYLESHEETPATH . '/' . $path ) ){

        return STYLESHEETPATH . '/';

    }else{

        return TEMPLATEPATH . '/';

    }

}

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T11:16:41.520

如果您在当前主题目录中有 functions.php 文件，则在您的 functions.php 文件中执行以下操作

```
//allow redirection, even if your theme starts to send output to the browser
add_action('init', 'clean_output_buffer');
function clean_output_buffer() {
        ob_start();
} 
```

**如何删除 BOM**

为了删除 BOM，Lafontaine 建议使用免费软件实用程序 XVI32，一个免费的十六进制编辑器。编辑器不会安装，您可以直接从 ZIP 运行 EXE 文件。这个过程很简单——只需将“受影响的”PHP 文件（在我的例子中为 wp_config.php）拖到 XVI32 中，它就会以整齐的字节网格打开。然后，您应该看到文件中的前三个字节是“ï»¿”，后跟 php 标记。

如果确实如此，您应该依次选择每个字符并删除它（按 Del 键）。然后保存 (Ctrl+S) 文件时，它将与以前完全相同，只是没有前导 BOM。

完整文章链接：http: [//blog.scribz.net/2010/12/windows-live-writer-wordpress-unicode-bom-error/](http://blog.scribz.net/2010/12/windows-live-writer-wordpress-unicode-bom-error/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T06:47:45.053

这是 wordpress 中非常常见的问题，添加以下内容：

```
<?php ob_start(); ?> 
```

在页面顶部。编码快乐！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T03:13:26.520

这听起来类似于我在其他应用程序中遇到的问题。`ï»¿`您是否在页面输出中的任何位置看到字符？您可能遇到字节顺序标记问题。[http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)这些取决于文件的编码。我不记得我是如何解决这个问题的，但尝试将文件保存为 UTF-8？或者也许以某种方式告诉您的 Web 服务器这些文件是 ANSI 文件？

# jquery - 使用 JQuery 根据属性数组更改 css

> ID：12551692
> 
> 赞同：0
> 
> 时间：2012-09-23T10:48:51.280
> 
> 标签：jquery, css

这是我正在尝试做的一个示例，尽管最初我正在尝试更复杂的事情，但我已经将问题跟踪到了这段代码。我确信问题与传递给数组的内容有关，但我所有的尝试都得到了相同的结果，四个 div 在角落中彼此重叠。

```
--CSS--

div {
    position : absolute;
    border: 2px solid black;
}

--SCRIPT--

$(document).ready(function(){

var coordinates = [
"{'top' : '100px'}",
"{'top' : '200px'}",
"{'top' : '300px'}",
"{'top' : '400px'}"
]

var numberOfDivs = coordinates.length;

for (i=0; i<numberOfDivs; i++){
$('#parent').append('<div>'+i+'</div>').css(coordinates[i]);
}
}); 

--HTML--

<div id = "parent">
    parent
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:02:27.610

Abody97 关于将字符串作为参数传递给 css 的问题是正确的。将 .css 应用于错误的元素也有问题（因为 jQuery 链接：[http](http://tobiasahlin.com/blog/quick-guide-chaining-in-jquery/) ://tobiasahlin.com/blog/quick-guide-chaining-in-jquery/ ）。我想您希望将 css 应用于每个附加的孩子，对吗？

这是一个 jsFiddle：http: [//jsfiddle.net/U3ezb/](http://jsfiddle.net/U3ezb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T10:55:28.873

将您的坐标定义更改为：

```
var coordinates = [
{'top' : '100px'},
{'top' : '200px'},
{'top' : '300px'},
{'top' : '400px'}
]; 
```

这里的关键是您需要将对象作为参数传递给`.css()`，而不是字符串。

**注意：（**感谢@MartinLodgberg 指出）；另一个问题是，当你这样做时：

```
$('#parent').append('<div>' + i + '</div>').css(coordinates[i]); 
```

`.css()`正在被召唤`$("#parent")`。要将其应用于新附加的`div`，请使用以下内容：

```
var div = $("<div>" + i + "</div>").css(coordinates[i]);
$("#parent").append(div); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T11:01:12.377

两个问题；

1）你需要摆脱坐标数组中每个对象周围的引号，如下所示：

```
var coordinates = [
{'top' : '100px'},
{'top' : '200px'},
{'top' : '300px'},
{'top' : '400px'}
] 
```

2）然后您需要将css应用于`<div>`，而不是#parent。

```
$("<div></div>").appendTo('#parent').css(coordinates[i]); 
```

这是一个 jsFiddle 供您展示它的工作原理[http://jsfiddle.net/BZpRG/](http://jsfiddle.net/BZpRG/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T11:03:39.297

你能试试下面的

$(文档).ready(函数(){

```
 var coordinates = ['100px',200px','300px','400px'];
    var numberOfDivs = coordinates.length;
        for (i=0; i<numberOfDivs; i++){

       $('#parent').append('<div>'+i+'</div>').css('top',cordinates[i]);

              }
     }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T11:08:11.680

您不能使用具有相对位置的“顶部”属性您有 2 个选择

```
var coordinates = [
        "top: 100px; position : absolute;",
        "top: 200px; position : absolute;",
        "top: 300px; position : absolute;",
        "top: 400px; position : absolute;"
        ] 
```

或者

```
 var coordinates = [
         "margin-top: 100px;",
         "margin-top: 200px;",
         "margin-top: 300px;",
         "margin-top: 400px;"
         ] 
```

# jakarta-ee - 为什么使用maven的官方repo时源包是空的？

> ID：12551699
> 
> 赞同：0
> 
> 时间：2012-09-23T10:50:02.853
> 
> 标签：jakarta-ee, maven, packages, nexus

这个问题与[为什么 Maven 在错误的仓库中查找不同？](https://stackoverflow.com/questions/3032022/why-does-maven-is-looking-in-the-wrong-repo)

![源码包太小，根本没有源码](../Images/98efd890b32da6b5929eb64895bb15f8.png)

![我可以打开那个源包，这意味着这不是因为我下载了损坏的源包。](../Images/6b6ed4307cde8b5f6cd0e4612b47b14a.png)

源码包太小，根本没有源码

为什么我在源包中找不到源代码，这很令人困惑，我确定它不是损坏的源包，因为我可以打开它，但是为什么里面没有 java 文件？

# vim - 在不同的 Vim 窗口中打开一个目录中的所有文件

> ID：12551701
> 
> 赞同：2
> 
> 时间：2012-09-23T10:50:22.280
> 
> 标签：vim

编写 Rails 应用程序意味着处理大量文件。感谢上帝提供具有多个缓冲区、窗口和选项卡的多功能文本编辑器！

我正在尝试在新窗口中编辑目录中的所有文件（在 vim 中，而不是在 gnome 中）。有没有办法用vim中的一行来做到这一点？我一直在尝试我知道的每一个技巧，但它们无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T10:59:58.540

用于`:args`将所有文件添加到参数列表并`:argdo`执行操作，这里我们`:sp filename`对列表的每个项目进行操作。

```
:args *.js | argdo sp 
```

见`:h :args`和`:h :argdo`。

# ruby - 将数组放入 ruby slim 的一个变量中

> ID：12551705
> 
> 赞同：1
> 
> 时间：2012-09-23T10:50:53.263
> 
> 标签：ruby, arrays, templates, slim-lang

我有[Slim](http://slim-lang.com)模板

```
# main.slim
- for item in items do
  td = item.a
  td = item.b 
```

我有 Ruby 代码

```
# main.rb
a = [1, 2, 3]
b = [4, 5, 6] 
```

我想从此模板渲染 HTML。

我想在结果中显示：

```
# main.html
<td>1</td><td>4</td>
<td>2</td><td>5</td>
<td>3</td><td>6</td> 
```

如何将“a”和“b”数组放入“items”变量（或对象）中？

我从 Ruby 渲染：

```
Slim::Template.new("main.slim").render(nil, :items => items) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:14:30.003

[Zip](http://ruby-doc.org/core-1.8.6/Array.html#method-i-zip)会将长度为 m 的 n 个数组打包成一个 m 个元组的数组，其中每个元组都有 n 个元素。元组只是数组，而不是带有命名字段的对象。也就是说，这可以使迭代更容易。

```
items = a.zip(b)
for item in items do
  td = item[0]
  td = item[1]
end 
```

# android - 在android中拒绝呼叫

> ID：12551710
> 
> 赞同：0
> 
> 时间：2012-09-23T10:51:15.117
> 
> 标签：android

我试图在这里实现代码：

[如何在android中以编程方式拒绝呼叫](https://stackoverflow.com/questions/7347871/how-to-reject-a-call-programatically-in-android)

但是它不适用于android 2.3+

有什么方法可以拒绝android 2.3+中的电话吗？

# html - twitter bootstrap 流体布局 3 列

> ID：12551714
> 
> 赞同：1
> 
> 时间：2012-09-23T10:51:53.010
> 
> 标签：html, twitter-bootstrap, fluid-layout

假问题的借口。我需要使用 twitter bootstrap 创建 3 个流体列布局。第一列是页面宽度的 45%，第二列是 10%，第三列应该是页面宽度的 45%。

我试过这个：

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span5">
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th>#</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Username</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>2</td>
                    <td>Jacob</td>
                    <td>Thornton</td>
                    <td>@fat</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td colspan="2">Larry the Bird</td>
                    <td>@twitter</td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="span2"></div>
        <div class="span5">
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th>#</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Username</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>2</td>
                    <td>Jacob</td>
                    <td>Thornton</td>
                    <td>@fat</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td colspan="2">Larry the Bird</td>
                    <td>@twitter</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div> 
```

但是中间一栏太宽了，不是屏幕宽度的 10%。请帮助我了解 twitter bootstrap 中的流畅布局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:10:16.267

在具有 12 列流体布局的 Twitter Bootstrap 中，一个`span2`has`width: 14.5299%`和一个`span5`has `width: 40.1709%`。

这是将媒体宽度划分为 12 列及其装订线的结果。

如果您需要不同的发行版，您可以在此处自定义布局：http: [//twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T09:52:20.380

如果您需要该比例，只需将 BS 网格系统从 12 列更改为 20 列。然后使用 span9、span2、span9。

但这不会完全达到 45/10/45%。由于BS有排水沟......

# dfa - Hopcroft 的 DFA 最小化算法是否有公开可用的实现？

> ID：12551715
> 
> 赞同：-1
> 
> 时间：2012-09-23T10:52:01.177
> 
> 标签：dfa, automata

同上。Java 或 C# 是最好的，但任何命令式语言都可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T11:04:27.937

我想你可以在这里用 Java 找到它： [http ://www-igm.univ-mlv.fr/~berstel/Lothaire/AppliedCW/ProgrammesJava/BibliJava/](http://www-igm.univ-mlv.fr/~berstel/Lothaire/AppliedCW/ProgrammesJava/BibliJava/)

# javascript - 如果屏幕窄于 1280 像素，则隐藏 DIV

> ID：12551721
> 
> 赞同：3
> 
> 时间：2012-09-23T10:53:07.343
> 
> 标签：javascript, hide, show

我正在尝试实现一个浮动 div 来自动检测用户的屏幕分辨率。如果分辨率低于1280，会自动隐藏某个div。

我已经阅读[了这个](https://stackoverflow.com/questions/5277872/hide-a-div-if-screen-is-narrower-than-1024px)和[这个](https://stackoverflow.com/questions/4296012/hide-div-if-screen-is-smaller-than-1024)并尝试使用这些代码，但它对我不起作用。我正在使用wordpress并将js代码粘贴到`</header>`

我粘贴在标题中的代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function () {

    var screen = $(window)    

    if (screen.width < 1280) {
        $("#floatdiv").hide();
    }
    else {

        $("#floatdiv").show();
    }

});

//run on document load and on window resize
$(document).ready(function () {
    //on load
    hideDiv();
    //on resize
    $(window).resize(function(){
        hideDiv();
    });
}); 
</script> 
```

不幸的是，我无法让它工作。这里似乎有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:55:56.157

使用 CSS 媒体查询怎么样？您可以添加一个匹配小于 1280 像素的屏幕并设置`display: none;`在 div 上的屏幕。

```
@media (max-width: 1280px) {
    #floatdiv {
       display: none;
       /* or, to just hide the contents but leave it in the layout of the page: */
       visibility: hidden;
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T11:02:03.397

将“screen.width”替换为“window.innerWidth”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T10:57:57.257

如果您不关心旧浏览器（Internet Explorer），最简单的方法不是 JavaScript，而是[CSS3 Media Queries](http://www.w3.org/TR/css3-mediaqueries/)。

有关浏览器兼容性的更多信息，请[点击此处](http://caniuse.com/css-mediaqueries)。感谢[Ivan Vergiliev](https://stackoverflow.com/users/596167/ivan-vergiliev)。

```
 @media (max-width: 1280px) {
   #floatdiv {
     display: none;
   }
 } 
```

这意味着只有当屏幕宽度小于 1280 像素时才会应用 CSS。

**已编辑**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T10:58:13.663

你可以通过`screen.availWidth`

```
 $("#floatdiv").show();

 while(screen.availWidth < 1280){
      $("#floatdiv").hide();

 } 
```

# php - 从网站获取数据到 iPhone 应用程序

> ID：12551722
> 
> 赞同：2
> 
> 时间：2012-09-23T10:53:23.107
> 
> 标签：php, html, objective-c, ios, xcode

我有一些问题。我希望人们能给我一个好的看法，因为我现在被困住了。

我开始开发已经一年了，所以请多多包涵。

1.  如何从我不拥有的网站获取应用程序的数据？我之前做过一些数据库解析，但这都来自我自己的网站。我看到人们使用不同的库（例如 HPPL）。
    但是，如果网站要求用户登录怎么办？除此之外，这仅适用于 HTML 吗？如果它是一个基于 PHP 的网站呢？

2.  我应该在打开应用程序时直接在 iPhone 上获取外部数据，还是应该使用中间人方法（外部网站和处理信息的应用程序之间的服务器）？

3）保存登录信息的最佳方法是什么，以便用户不必每次打开应用程序时都填写？

我对所有的东西有点困惑，所以也许你可以把事情弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:13:33.920

这个问题非常广泛；所以你会得到相当笼统的答案。

本质上，您是在询问如何使用 Web 服务。对于这个问题，我会推荐几个在线教程之一，比如[这个](http://www.raywenderlich.com/2965/how-to-write-an-ios-app-that-uses-a-web-service)。还有其他的。这应该给你一个开始。

您应该了解 Cocoa URL 加载系统。文档非常完整。您当然可以为此使用第三方库，例如[AFNetworking](https://github.com/AFNetworking/AFNetworking)；但我建议您先了解 Apple 提供的框架。

> 但是如果网站有登录名呢？

取决于我们正在谈论的身份验证类型。

> 除此之外，这仅适用于 HTML 吗？如果它是一个基于 php 的网站呢？

不，应该没有什么不同。

> 打开应用程序时我应该直接在 iPhone 上获取外部数据还是应该使用中间人方法（外部网站和处理信息的应用程序之间的服务器）

一般来说，一个简单的设计应该比一个更复杂的设计更受青睐，只要它符合您的规格。中间服务器可能没有 iPhone 不能做的事情——但我们并不真正了解您的规格。

> 保存登录信息的最佳方法是什么，这样用户每次打开应用程序时都不必填写我对所有的东西有点困惑，所以也许你可以把事情弄清楚...

然后，您将需要调查钥匙串。有关大量教程参考，请参阅[此 SO 问题。](https://stackoverflow.com/questions/4143240/how-to-use-keychain-access-to-store-passwords-in-iphone-app)

# javascript - AngularJs 让我很难尝试获取 twitter 时间线

> ID：12551724
> 
> 赞同：2
> 
> 时间：2012-09-23T10:53:30.457
> 
> 标签：javascript, angularjs

我正在使用以下内容尝试为时间线获取一些推文。这与 AngularJS 教程中使用的代码相同。它与 twitter 的搜索 API 配合得很好。

```
angular.module( 'Twitter', [ 'ngResource' ]); 

function TwitterCtrl( $scope, $resource )
{ 
  $scope.twit = $resource( 'https://api.twitter.com/1/statuses/:action',
  {
    action: 'user_timeline.json',
    screen_name: 'jesus',
    count: '6',
    include_rts: '1',
    callback: 'JSON_CALLBACK'
  }, { get:{method:'JSONP' }});

  $scope.twit.get();
} 
```

但是现在我将代码更改为从时间线获取，这给了我一些问题。看起来 AngularJS 正在寻找一个没有的数组。有谁知道这里发生了什么？

```
TypeError: Object #<e> has no method 'push'
    at copy (http://code.angularjs.org/1.1.0/angular.js:556:21)
    at f.module.factory.e.(anonymous function) (http://code.angularjs.org/1.1.0/angular-resource.min.js:8:242)
    at deferred.promise.then.wrappedCallback (http://code.angularjs.org/1.1.0/angular.js:6628:59)
    at ref.then (http://code.angularjs.org/1.1.0/angular.js:6665:26)
    at Object.$get.Scope.$eval (http://code.angularjs.org/1.1.0/angular.js:7813:28)
    at Object.$get.Scope.$digest (http://code.angularjs.org/1.1.0/angular.js:7685:25)
    at Object.$get.Scope.$apply (http://code.angularjs.org/1.1.0/angular.js:7899:24)
    at done (http://code.angularjs.org/1.1.0/angular.js:8891:20)
    at completeRequest (http://code.angularjs.org/1.1.0/angular.js:9035:7)
    at http://code.angularjs.org/1.1.0/angular.js:8981:11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T22:15:04.660

我相信您应该添加`isArray: true`“获取”的定义。

# c# - C# 如何进行 nopcommerce 自定义运费计算？

> ID：12551727
> 
> 赞同：0
> 
> 时间：2012-09-23T10:54:19.123
> 
> 标签：c#, nopcommerce

我正在为客户使用 nopcommerce 开源。我想做一个自定义的运费计算。这是我的运费计算规则。

```
Ex: 1-5 items :$ 5 
    6-10 items: $10
Additional item :$2 
```

我如何在 nopcommerce 中做到这一点？我应该写一个新的运输模块还是已经有了微笑的运输模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:03:11.877

您需要创建一个新的运输计算插件。

最简单的方法是从另一个插件（例如 Shipping.FixedRateShipping）复制并更改名称。

然后修改GetFixedRate方法，根据数量等返回费率。

请按照以下步骤安装和配置您的插件：[http ://www.nopcommerce.com/docs/77/how-to-write-a-nopcommerce-plugin.aspx](http://www.nopcommerce.com/docs/77/how-to-write-a-nopcommerce-plugin.aspx)

我希望这有帮助。

# html - html 下拉框显示来自一个来源的值

> ID：12551730
> 
> 赞同：0
> 
> 时间：2012-09-23T10:54:52.317
> 
> 标签：html, drop-down-menu

我目前正在创建一个订单表格，并且有几个选项，其中我有一个包含 1-8 值的保管箱。对于每个投递箱，我必须使用以下代码

```
<select name="mydropdownbox">
                <option value=""> 0 </option>
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
            </select> 
```

每次在表单中添加新项目时，我都必须使用相同的代码。我想知道是否有办法让下拉框都使用相同的值集，这样我的 html 页面中就没有一堆重复代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T22:13:00.007

它不能只用 HTML 来完成，因为 HTML 不是脚本语言，所以你不能做循环来避免重复。

你有两个选择：

*   使用生成完整 HTML 的服务器端语言。请注意，这会更占用服务器资源，用户必须下载完整的 HTML 代码
*   使用 JavaScript。这将需要更多的客户端密集型，并且您将节省带宽。可能的问题是某些用户可能禁用了 JS。

JavaScript 方式很容易使用 HTML5[`<template>`](http://www.html5rocks.com/en/tutorials/webcomponents/template/)元素实现：

JS：

```
var content = document.getElementById('dropdown-template').content;
for(var i=0; i<10; ++i) {
    document.body.appendChild(document.importNode(content, true));
} 
```

HTML：

```
<template id="dropdown-template">
    <select name="mydropdownbox">  <!-- ... -->   </select>
</template> 
```

[**演示**](http://jsfiddle.net/2D6NE/)

# android - android应用程序中ListView中的ListView

> ID：12551731
> 
> 赞同：0
> 
> 时间：2012-09-23T10:54:59.053
> 
> 标签：android, android-layout, listview

我正在做一个当前需要列表的项目，当单击列表中的特定项目时，会出现另一个列表活动。有没有关于如何从一个列表视图活动移动到另一个的解决方案。我目前正在使用[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)作为我的 ListView 的参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:01:42.710

api 提供[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)。你的要求看起来很接近它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T11:12:35.877

一种解决方案是：

创建第二个 ListView 活动并使用 OnItemClickListener 实现第一个 ListActivity，该 OnItemClickListener 使用常规 Intent 打开第二个 ListViewActivity。

```
 listView = (ListView) findViewById(R.id.mylistview);
        listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View v, int position,
                    long arg3) {

                Intent intent = new Intent(FirstListActivity.this, SecondListActivity.class);
                Bundle bundle = new Bundle();
                bundle.putString("pos", position);
                intent.putExtras(bundle);
                startActivity(intent);
            }
        }); 
```

**更新：**

我写了一个简单的示例列表应用程序。你可以用它来检查。可以打开第二个列表活动的代码已包含在内，但已被注释掉。如果你让这个例子运行起来，你离得越来越近了。然后你可以尝试注释掉 Intent 代码。

```
package com.adpog.listviewexample;

import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.BaseAdapter;
import android.widget.ListView;
import android.widget.Toast;
import android.app.Activity;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Find the ListView resource.   
        ListView mainListView = (ListView) findViewById( R.id.my_list );  

        // Set the Adapter as the ListView's adapter.  
        mainListView.setAdapter( new BaseAdapter(){

            // Create and populate a List of planet names.  
            String[] planets = new String[] {"Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune" };    

            @Override
            public int getCount() {
                return planets.length;
            }

            @Override
            public Object getItem(int pos) {
                return planets[pos-1];
            }

            @Override
            public long getItemId(int pos) {
                return 0;
            }

            @Override
            public View getView(int pos, View view, ViewGroup viewgroup) {
                if(view == null){
                    /**
                     <?xml version="1.0" encoding="utf-8"?>
                        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                            android:orientation="horizontal" 
                            android:layout_width="fill_parent"
                            android:layout_height="fill_parent">
                            <ImageView 
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content" 
                                android:src="@drawable/ic_launcher"
                             />
                            <TextView
                                android:id="@+id/item_text" 
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content" 
                                android:text="Text not set" />
                        </LinearLayout>
                    */
                    view = View.inflate(getApplicationContext(), R.layout.row, null);
                }
                return view;
            }
        });        

        mainListView.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView< ? > arg0, View arg1, int arg2, long arg3) {
                Log.d("ListView", "Pos: " + arg2 + ", long : "+arg3);
                Toast.makeText(getApplicationContext(), "Test " + arg2, Toast.LENGTH_SHORT).show();
                /* Alternative way; opens a new Activity
                Intent intent = new Intent(this, SecondListViewActivity.class);
                intent.putExtra("position", pos);
                startActivity(intent);
                */
            }

            @Override
            public void onNothingSelected(AdapterView< ? > arg0) {
            }
        });

        /**
         * Implement an action for each item click.
         */
        mainListView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView< ? > arg0, View arg1, int arg2, long arg3) {
                Log.d("ListView", "OnClickPos: " + arg2 + ", long : "+arg3);
                Toast.makeText(getApplicationContext(), "Test " + arg2, Toast.LENGTH_SHORT).show();
            }
        });
    }
} 
```

# ms-access - 在不同数据库版本之间保存数据

> ID：12551736
> 
> 赞同：1
> 
> 时间：2012-09-23T10:55:19.940
> 
> 标签：ms-access, ms-access-2007

我有一个数据库及其新版本，其中包含更改的报告、更改的表单但具有完全相同的表结构。问题是正确的表条目存储在旧数据库中。

如何用旧数据库中的表条目替换新数据库中的表条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:10:42.803

您使用的是拆分数据库吗？您应该是这样，因此后端数据存储在 MDB 中而前端存储在 ACCDB 中并不重要。

# mysql - MySQL分区，从多个相关表中删除旧数据

> ID：12551743
> 
> 赞同：1
> 
> 时间：2012-09-23T10:55:58.763
> 
> 标签：mysql, myisam

我是 MySQL 分区的新手，因此任何示例都会受到赞赏。

我正在尝试为分布在多个 MyISAM 表之间的数据创建一种老化机制。

我的问题实际上将包括几个子问题。

相关表格如下：

1.  第一个表包含具有高输入频率的原始数据（每条记录旁边都有一个自动递增的 id）。
2.  第二个表包含处理结果，每个原始数据记录都有一个结果记录（结果记录包含原始数据记录的自动递增字段的源ID记录）

问题：

1.  我需要能够对原始数据表和结果数据表进行类似的分区，以便它们在单个分区中仅包含 10 周的数据（每个原始数据记录都包含 unixtimestamp 字段），我该怎么做，有人可以写两个这样的表的小例子？
2.  我希望能够即时更改 10 周的限制。
3.  我希望当当前分区被填充或创建新分区时，前一个（10 周前）分区将被自动删除。
4.  我不希望自动递增 id 整数被溢出，据我所知，id 仅对分区是唯一的，所以如果我没记错的话，下一个分区的自动递增 id 将从零开始？但是如果前一个分区仍然存在，我会有 2 个重复的 id，我怎么知道在呈现结果记录时只引用最后一个 id？
5.  我想使用 LOAD DATA INTO... 而不是多次插入来加载原始数据，MySQL 分区功能是否受到影响？

最后一个问题，您是否建议一些其他方法来实现老化机制（我正在编写 Java 实现产品，每天处理大约 1 GB 或原始数据并将结果存储在 MySQL 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:10:12.200

LOAD DATA 非常快。我只需两个步骤（不分先后） - 加载数据，然后“删除 .. where date < 10 周”。只要您使用的数据类型，自动增量就会继续。如果您想非常小心，可以定期将其推回零。

一旦数据在“原始”表中，运行您的例程以创建“已处理”表。我们在我工作的地方使用类似的流程。我们保留一个单独的表，其中包含指向所有“原始”表的“写入”和“解析”指针。随着新数据的进入并被解析，相应的行指针被设置。如果“原始”表被截断，您可以重置“写入”指针，但保留“解析”指针。（发生这种情况时，我们将偏移量存储在另一个表中 - 只是为了确定）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T20:17:59.050

这个问题很难给出真正的答案，因为它取决于你的数据。但是让我给你一些思考的事情。

1.  我假设我们正在谈论带有最近数据的某种日志（因此不跨越多年）。您可以按范围进行分区。您可以在表格中添加一个字段，其中包含年/周编号（即 201201、201202 等）。如果这个问题与您关于导入多个表的问题有关，您可以轻松地做到这一点，即导入脚本。

2.  在运行中，动态重新分区您的数据（70GB？）。我不会推荐它。但如果你有星期数，你就可以做到。如果您以后想将其更改为 12 天，则可以为日期添加一列并按此进行分区。

3.  好吧，它不会被自动删除，但是 cron 作业可以处理它吗？只需检查有多少个分区，如果有 3（？）删除第一个。

4.  分区需要在您分区的字段上有一个主索引（如果您想使用自动增量）。因此，您永远不能单独完全依赖自动增量 ID。我没有办法解决这个问题。

5.  我不确定你是什么意思。

如果您的数据只是按时间顺序排列的一些日志，那么您可能只为每个时期使用单独的表格。然后在开始新时期之前（在 00:00）检查最后一个表的最后一个 id，创建一个新表并将自动增量设置为该值 +1。然后您的导入将决定何时开始新的时期，以便可以轻松更改。您的导入脚本可以使用一个小表来存储下一个周期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T01:34:05.110

如果我建议，为每个相关列创建索引列也可以提高性能从多个相关表中删除旧数据，因为我们只是比较了索引号而不是字符串。

我想知道您的表格是否正在排序。

# sql-server - 使用 ADO .NET 关闭 SQL Server 上的数据库连接

> ID：12551746
> 
> 赞同：0
> 
> 时间：2012-09-23T10:56:33.397
> 
> 标签：sql-server, database, vb.net, ado.net, database-connection

我正在使用 ADO .NET 连接到数据库：

```
 Dim conn As SqlConnection
        Dim sqlcmd As SqlCommand
        Dim da As SqlClient.SqlDataAdapter
        Dim table As DataTable

        conn = New SqlConnection(Utilities.ConnectionString)
        sqlcmd = New SqlClient.SqlCommand()
        sqlcmd.Connection = conn
        sqlcmd.CommandType = CommandType.StoredProcedure
        sqlcmd.CommandText = "mySP"
        sqlcmd.Parameters.Add(New SqlClient.SqlParameter("@param", param1))

        da = New SqlClient.SqlDataAdapter()
        da.SelectCommand = sqlcmd
        table = New DataTable()
        da.Fill(table)
        conn.Close()   
        sqlcmd.Connection.Close() 
```

效果很好。当我在 SQL Server 上启动命令时：

```
 EXEC SP_WHO2 
```

对于从 ADO .NET 中的先前代码进行的每个调用，我在字段 Command 中都有值：“AWAITING COMMAND”，在字段 Status 中，值是“sleeping”。这是什么意思？与数据库的连接仍处于活动状态？我应该怎么做才能关闭数据库连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T12:12:33.143

几个小时后您收到有关连接耗尽的错误这一事实意味着您的代码中的某处您没有正确处理您的连接。
上面的代码看起来是正确的，但是如果出现异常怎么办？当您的代码由于异常从方法中意外退出时，您确定正确处理这种情况吗？

解决这种情况的正确方法是重构您的代码。
到处介绍[Using 模式](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)。所以你上面的代码变成：

```
 Dim conn As SqlConnection 
    Dim sqlcmd As SqlCommand 
    Dim da As SqlClient.SqlDataAdapter 
    Dim table As DataTable 

    Using conn = New SqlConnection(Utilities.ConnectionString) 
        Using sqlcmd = New SqlClient.SqlCommand() 
            sqlcmd.Connection = conn 
            sqlcmd.CommandType = CommandType.StoredProcedure 
            sqlcmd.CommandText = "mySP" 
            sqlcmd.Parameters.Add(New SqlClient.SqlParameter("@param", param1)) 

            da = New SqlClient.SqlDataAdapter() 
            da.SelectCommand = sqlcmd 
            table = New DataTable() 
            da.Fill(table) 
        End Using  
    End Using 
```

这种方法将确保您的一次性对象（连接和命令）将被正确释放，并且您将消除连接泄漏的微妙问题。

# java - JTable 中没有标题

> ID：12551751
> 
> 赞同：1
> 
> 时间：2012-09-23T10:56:54.333
> 
> 标签：java, swing, jtable, jscrollpane, jtableheader

Jtable 不显示列标题。我正在使用向量来填充 JTable，但它似乎仍然不起作用。这是代码：

```
public class InsertFileToJtable extends AbstractTableModel{
Vector data;
Vector columns;
private String[] colNames = {"col1","col2","col3","col4","col5","col6","col7","col8"};

public InsertFileToJtable() {
String line;
data = new Vector();
columns = new Vector();
  try {
        FileInputStream fis = new FileInputStream("ProcessList.txt");
        BufferedReader br = new BufferedReader(new InputStreamReader(fis));
        StringTokenizer st1 = new StringTokenizer(br.readLine(), " ");
        while (st1.hasMoreTokens())
                columns.addElement(st1.nextToken());
        while ((line = br.readLine()) != null) {
                StringTokenizer st2 = new StringTokenizer(line, " ");
                while (st2.hasMoreTokens())
                       data.addElement(st2.nextToken());
        }
        br.close();
} catch (Exception e) {
        e.printStackTrace();
}  

}

public int getRowCount() {
return data.size() / getColumnCount();
}

public int getColumnCount() {
return columns.size()-1;
}

public Object getValueAt(int rowIndex, int columnIndex) {
return (String) data.elementAt((rowIndex * getColumnCount())
                + columnIndex);
}
@Override
public String getColumnName(int column) {
return colNames[column];
}
@Override
public Class getColumnClass(int col){
return getValueAt(0,col).getClass();
}
} 
```

下面是从 Main 调用表的方式：

```
public static void main(String[] args) {
    InsertFileToJtable model = new InsertFileToJtable();
    JTable table = new JTable(model);
    table.setPreferredScrollableViewportSize(new Dimension(500, 70));
    table.setFillsViewportHeight(true);
    table.setModel(model);
    JScrollPane scrollpane = new JScrollPane(table);
    scrollpane.setViewportView(tabbedPane);
    tabbedPane.addTab("Process",null,table,"");
    model.fireTableStructureChanged();
    JPanel panel = new JPanel();
    panel.add(scrollpane);
    frame.add(panel);
    } 
```

由于我是新手，我不知道出了什么问题。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T11:04:25.813

仅当表格位于 JScrollPane 中时，才会自动添加标题。如果它不包含在滚动窗格中，则必须手动管理标题。在您的代码中，它最初被添加到 scrollPane，但后来又被删除 - 通过将表添加到 tabbedPane。可能不是您想要的，而是将 scrollPane 添加到选项卡：

```
JScrollPane scrollpane = new JScrollPane(table);
//scrollpane.setViewportView(tabbedPane);
tabbedPane.addTab("Process",null,scrollPane,""); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T11:05:48.877

为了使表格能够显示其标题，您需要将表格添加到滚动窗格。

你一开始还不错，但后来通过更改滚动窗格的视口将其删除

```
// This was good
JScrollPane scrollpane = new JScrollPane(table);
// Then you changed it
scrollpane.setViewportView(tabbedPane);
// Then you added it to the tabbed pane
tabbedPane.addTab("Process",null,table,""); 
```

尝试将表格添加回滚动窗格并将其添加到选项卡式窗格

# c# - Unity3D：通过脚本更改天空盒颜色？

> ID：12551768
> 
> 赞同：3
> 
> 时间：2012-09-23T10:58:49.930
> 
> 标签：c#, colors, unity3d

我正在Unity引擎中开发游戏，并试图根据一天中的时间使天空盒改变颜色，但我似乎无法找到如何让它工作..我想做的事，我想一想，就是在渲染设置中更改我用于天空盒的材质的颜色，并且能够使用一个红色变量、一个绿色变量和一个蓝色变量来设置它。

我正在使用 C#。

提前感谢所有答案:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T17:30:46.613

从您在评论中显示的代码中：

RenderSettings.skybox.SetColor("_Tint", 0, 0, blue)

我想你的意思是

[RenderSettings.skybox.SetColor("_Tint", Color.blue)](http://docs.unity3d.com/Documentation/ScriptReference/Material.SetColor.html)

不需要额外的零，记住颜色“[蓝色](http://docs.unity3d.com/Documentation/ScriptReference/Color-blue.html)”是[Color 类](http://docs.unity3d.com/Documentation/ScriptReference/Color.html)的成员变量。

接下来，您必须开发一个时间系统，并根据您传递给控制天空盒渲染器的脚本的时间变量，然后使用 Lerp 函数从一种颜色平滑过渡到另一种颜色......就像[这样](http://docs.unity3d.com/Documentation/ScriptReference/Material-color.html)

```
using UnityEngine;
using System.Collections;

public class example : MonoBehaviour {
    public Color colorStart = Color.blue;
    public Color colorEnd = Color.green;
    public float duration = 1.0F;
    void Update() {
        float lerp = Mathf.PingPong(Time.time, duration) / duration;
        RenderSettings.skybox.SetColor("_Tint", Color.Lerp(colorStart, colorEnd, lerp));
    }
} 
```

然后你可以写一个函数来改变 colorStart 和 colorEnd ...

希望这可以帮助...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-24T10:48:27.107

我们可以使用该`_Tint`属性更改 Skybox 颜色。`RenderSettings`是用于在运行时更改渲染属性的基类。为了确保属性存在于天空盒中，由`HasProperty()`. `SetColor()`用于设置天空盒的颜色。

```
 if (RenderSettings.skybox.HasProperty("_Tint"))
         RenderSettings.skybox.SetColor("_Tint", Color.red);
     else if (RenderSettings.skybox.HasProperty("_SkyTint"))
         RenderSettings.skybox.SetColor("_SkyTint", Color.red); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-17T11:03:11.607

您也可以通过将纹理形状更改为立方体来统一制作自己的天空盒，然后应用这些更改，它将创建一个立方体网格，您只需将其放入统一编辑器屏幕中即可。

如果您想通过单击按钮在运行时加载多个天空盒材料，我有该代码，我希望它可以帮助您构建一个您想要在某个时间或使用其他输入法更改天空盒的项目。

在此处输入代码

公共类天空盒：MonoBehaviour {

```
enter code here
public Material[] secondSkybox;
public static int i = 0;
public void skyboxOn()
{

    if (i == 0) {
        RenderSettings.skybox = secondSkybox[0];
        i++;
    }
    else if(i==1)
    {
        RenderSettings.skybox = secondSkybox[1];
        i++;
    }else if(i==2)
    {
        RenderSettings.skybox = secondSkybox[2];
        i=0;
    }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-17T11:07:52.433

如果你也想改变天空盒的颜色，可以使用这行代码来完成

```
RenderSettings.skybox.SetFloat ("_Exposure", Mathf.Sin (Time.time * Mathf.Deg2Rad * 100) + 2); 
```

# android - 我应该以什么格式保存我的应用程序的资源图像？

> ID：12551776
> 
> 赞同：0
> 
> 时间：2012-09-23T11:01:24.303
> 
> 标签：android, gridview, bitmap, adapter

我正在构建一个简单的壁纸应用程序。我将壁纸图像（.jpg）作为资源存储在 res 文件夹中。我向用户展示了一个缩略图网格，我也将其作为资源（.jpg）单独存储在 res 中。我希望通过此网格的滚动流畅且快速。我的问题是，当我使用适配器加载 gridview 时，在 getView 方法中，我将资源转换为位图，然后将其加载到 Grid 中的每个 imageView 中。如果我首先将缩略图作为 .bmp 存储在 res 文件夹中会更快吗？此外，我手动创建了缩略图，而不是在运行时操纵大型壁纸制作它们。每个缩略图都缩放到 120 像素的宽度，网格由 120x120 的图像视图组成。所以我想知道如何快速有效地加载这些图像？我将适配器设置为 Asyntask 内的 gridview，但我没有注意到改进。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:18:07.690

Jpeg 是有损图像压缩，通常提供最佳质量与大小的权衡。如果您尝试存储高质量的图像，那么您几乎肯定会想要使用 Jpeg。

PNG确实具有有用的功能，例如允许您使用透明度，并且对于简单的块彩色图像输出非常小的文件大小。

但是，当您开始创建照片质量的图像（例如壁纸、PNG）时，您将看到巨大的文件大小，这在移动设备上不会很有趣或最终用户不会很欣赏。此外，较大的文件往往需要更多的系统资源（CPU 时间和 RAM），而在移动设备上，这些资源非常宝贵。

我建议您可能使用 PNG 来生成缩略图，而对于完整尺寸的图像使用 JPEG，但您可能会很好地查看创建最小文件的文件，因为这可能会很好地表明渲染效率，即它需要渲染 800b PNG 的资源很少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T11:16:10.063

将图像更改为 bmp 文件格式可能会稍微提高性能（因为 JPG 是压缩的位图图像，在渲染时需要解压缩），但通常不值得大幅增加文件大小。

我建议使用 PNG 位图格式，因为它在渲染和文件大小方面都很轻。

至于 ListView 中的渲染，你可能想看看[这个](https://stackoverflow.com/questions/7729133/using-asynctask-to-load-images-in-listview)问题和[这个](https://github.com/thest1/LazyList)代码项目。

# scala - 从脚本启用 REPL 高级用户模式 (:power)

> ID：12551779
> 
> 赞同：7
> 
> 时间：2012-09-23T11:01:53.683
> 
> 标签：scala, interpreter, read-eval-print-loop

我正在尝试将字符串动态解释为 Scala 中的命令。为此，据我了解，我需要在处于电源模式时调用`intp.interpret("string")`（其中`intp`代表当前解释器和`string`我的命令），对吗？

但是，我的问题是我想从脚本中做到这一点。因此，我正在寻找一种从脚本内部切换到高级用户模式的方法，然后调用 intp.interpret。

有没有办法从脚本文件内部进行这种切换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T13:15:21.613

如果您从 bash 脚本或类似脚本中调用 REPL，那么您可以通过系统属性`:power`立即启用模式，`scala.repl.power`

```
miles@lewis$ scala -Dscala.repl.power
Welcome to Scala version 2.9.2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0_05)
Type in expressions to have them evaluated.
Type :help for more information.

scala>
[info] compiler init time: 2.186 s.

scala>
** Power User mode enabled - BEEP BOOP SPIZ **
** :phase has been set to 'typer'.          **
** scala.tools.nsc._ has been imported      **
** global._ and definitions._ also imported **
** Try  :help,  vals.<tab>,  power.<tab>    **

scala> 
[info] total init time: 5.105 s.

scala> 
```

# objective-c - 根据边界框扭曲顶点（多边形）数组

> ID：12551785
> 
> 赞同：0
> 
> 时间：2012-09-23T11:02:55.373
> 
> 标签：objective-c, matrix, geometry, polygon, affinetransform

我在 Objective-C 中工作，并将我的顶点存储在一个 NSArray 中。

我有一个带有边界框的二维顶点数组，我称之为“多边形”。

我想根据我如何移动边界框的角点来扭曲整个多边形。我想我必须根据我拖动的角计算一些比例。但是，我不知道从哪里开始计算，以及是否有一个简单快速的算法。我不想使用外部库，直接在我的程序中执行计算。

这里的图像是通过使用图像软件“扭曲”功能产生的，这正是我想要的。如果在位图图像上是可能的，我想在任何点矩阵上都是可能的。

![歪曲](../Images/e05841d073f081b8e67f2efac8736869.png)

# apache-flex - Adobe Air 应用程序最大窗口大小——如何设置？

> ID：12551789
> 
> 赞同：0
> 
> 时间：2012-09-23T11:03:22.463
> 
> 标签：apache-flex, air, height, width

我有一个 Air 应用程序，我想在启动时将其最大化。我将宽度和高度值设置为 100%，但这对我没有帮助。我尝试将 percentWidth、percentHeight 值设置为 100，但它也不起作用。

```
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                   xmlns:s="library://ns.adobe.com/flex/spark"
                   xmlns:mx="library://ns.adobe.com/flex/mx"
                   width="100%" height="100%" 
```

所有组件属性都设置为 100%，但应用程序不会以最大大小启动。我应该如何正确设置它们？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T14:56:49.633

该`WindowedApplication`实例不是窗口本身，而是在本机窗口内运行。因此，通过设置`width="100%"`，您实际上是在说：占据本机窗口的整个宽度。因此，您不会调整窗口本身的大小。

您可以通过`WindowedApplication`的[nativeWindow](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/WindowedApplication.html#nativeWindow)属性访问您的应用程序正在运行的本机窗口。这将返回`NativeWindow`该类的一个实例，该实例又具有一个[Maximize()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/NativeWindow.html#maximize%28%29)函数。

因此，要最大化您的应用程序，只需在`WindowedApplication`实例中执行以下操作：

```
nativeWindow.maximize(); 
```

# ruby-on-rails - Rails Duplex 评论

> ID：12551794
> 
> 赞同：0
> 
> 时间：2012-09-23T11:04:00.333
> 
> 标签：ruby-on-rails, comments

我对两级评论的问题感兴趣

例如：我`post`在`comments`列表中使用一些

用户可以添加他/她自己的评论，并在我的应用程序中显示所有评论：

```
<div id='com'>
    <%= render @post.comments %>
</div> 
```

在我的`view/comments/_comment`：

```
<div class='comments'>
    <p>
      <strong>Commenter:</strong>
      <%= comment.commenter %>
    </p>
    <p>
      <strong>Comment:</strong>
      <%= comment.body %>
    </p>
    <%= link_to "Del", [comment.post, comment], :confirm => 'Are you sure?', :method => :delete %>
    <hr>
</div> 
```

在我的`comments`表中，我有评论（`post_id`和`body`其他字段）和我的视图，我`show`所有的评论都发布`created_at`（我不确定，但我认为这是正确的假设），因为我使用`<%= render @post.comments %>`

那就是问题：我不明白如何实现两级评论？

我也在寻找关于这个主题的简单例子，拜托。或者告诉我这个实现的主要思想......

升级版：

我在我的博客中创建了一些帖子：第一个用户评论它，第二个用户评论它，第三个用户评论它

比我打开帖子，看到三个评论，我不同意第一个评论者 - 我想把我的评论放在第一个评论者和第二个评论者之间 - 我怎么能意识到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:45:12.303

***请先关注更新的部分***

所以你的意思是你`comments`可以有一个`comment`父母。在您描述的情况下，`comment`来自第**一个用户**`parent`的是**您的评论**。如果我理解正确，那么最好的建议是使用`acts_as_tree`插件。你的评论模型应该像一棵树。尝试使用此**[https://github.com/rails/acts_as_tree](https://github.com/rails/acts_as_tree)**。

如果您使用的是 rails3，那么**[在 Rails3 中充当树？](https://stackoverflow.com/questions/4580597/acts-as-tree-in-rails3)**可能有帮助。如果您在使用插件时遇到任何问题，请告诉我。

**更新：**

另一个谷歌搜索给了我这些链接。**我认为你需要这个实现**。

*   [http://kconrails.com/2010/10/23/nested-comments-in-ruby-on-rails-1-models/](http://kconrails.com/2010/10/23/nested-comments-in-ruby-on-rails-1-models/)
*   [http://kconrails.com/2011/01/26/nested-comments-in-ruby-on-rails-controllers-and-views/](http://kconrails.com/2011/01/26/nested-comments-in-ruby-on-rails-controllers-and-views/)

# actionscript-3 - 拉米纸牌放置在画布上

> ID：12551795
> 
> 赞同：1
> 
> 时间：2012-09-23T11:04:03.587
> 
> 标签：actionscript-3, apache-flex

我正在尝试将 5 张卡相互重叠 30%。并尝试使用鼠标事件对其进行移动。它应该只落在 5 张牌之内，而不是在那之外。我已经学习了拖放事件并执行了它，但我无法将卡片放在 5 张卡片中。请有人帮助我。请检查以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute"     creationComplete="carcan();">
<mx:Script>
<![CDATA[

        import mx.containers.Canvas;
        import mx.controls.Image;

        private var images:Array;
        private var images1:Array;
        private const IMAGE_COUNT:uint = 5;
        private var img:Image;
        private var img1:Image;

        private var points:flash.geom.Point;
        private var offset_x:int;
        private var offset_y:int;
        private var canal:Canvas;
        private var doDrag:Boolean;

        [Embed(source='cards/2C.png')]
        private var Image0:Class;

        [Embed(source='cards/2D.png')]
        private var Image1:Class;

        [Embed(source='cards/2H.png')]
        private var Image2:Class;

        [Embed(source='cards/2S.png')]
        private var Image3:Class;

        [Embed(source='cards/3C.png')]
         private var Image4:Class;

         public function carcan():void
         {
            canal = new Canvas();
            canal.setStyle("backgroundColor","blue");
            canal.x=100;
            canal.y=50;
            canal.width=500;
            canal.height=400;
            this.addChild(canal);
            init();
         }

         public function init():void
         {
          images = new Array(IMAGE_COUNT);
             for (var i:int = 0; i < IMAGE_COUNT; i++)
                {
                     img= new Image();
                     img1= new Image();
                        images[i] = this["Image" + i];
                        trace(images[i]);

                img.x=(i*30)+50;
                img.source=images[i];
                img.id="Image"+i;
                canal.addChild(img);

                 img.addEventListener(MouseEvent.MOUSE_DOWN, md);
                img.addEventListener(MouseEvent.MOUSE_MOVE, mm);
                canal.addEventListener(MouseEvent.MOUSE_OUT,smu);
                img.addEventListener(MouseEvent.MOUSE_UP, mu);

                                        }

         }
         public function smu(event:MouseEvent):void
         {
            img.alpha=1;
            img.stopDrag();
            doDrag=false;
            setCards(); 

         }

         public function mo(event:MouseEvent):void
         {

            if(doDrag==true)
            {

            img.addEventListener(MouseEvent.MOUSE_DOWN, md);
            img.addEventListener(MouseEvent.MOUSE_UP, mu);
            img.stopDrag();
            img.alpha=1;
            img.removeEventListener(MouseEvent.MOUSE_MOVE, mm);
            }
            else
            {
            img.addEventListener(MouseEvent.MOUSE_MOVE, mm);
            }

         }                 

         public function md(event:MouseEvent):void
        {

        img = new Image();
            doDrag=true;

              canal.setChildIndex(Image(event.target),images.length-1);
             img.addEventListener(MouseEvent.MOUSE_MOVE, mm);

        }
        public function mm(event:MouseEvent):void
        {

             if(doDrag==true)
             {
                points = new Point();
            images = new Array(IMAGE_COUNT);

            img = new Image();
            img = Image(event.target);

            points.x=event.target.x;
            points.y=event.target.y;
            points = localToGlobal(points);
            img.x=points.x;
            img.y=points.y;
             img.alpha=0.7;
            img.addEventListener(MouseEvent.MOUSE_UP, mu);                  
            var boundar:flash.geom.Rectangle = new Rectangle(this.x, this.y, 250, 100);

             }
        }

        public function mu(event:MouseEvent):void
        {

            img.alpha=1;
            canal.stopDrag();
            doDrag=false;

            canal.stopDrag();
            doDrag=false;
            var current:Image = event.currentTarget as Image;
            var num1:int = current.x;                   

    if(num1 < 50){

         canal.setChildIndex(current, images.length-5);
         current.y=0;
         setCards();                
        }
    if(num1 > 50 && num1 < 80){

         canal.setChildIndex(current, images.length-4);
         current.y=0;
         setCards();                
        }
    if(num1 > 80 && num1 < 110){

    canal.setChildIndex(current, images.length-3);
    current.y=0;
        setCards(); 
        }
    if(num1 > 110 && num1 < 140){
        canal.setChildIndex(current, images.length-2);

         current.y=0;
        setCards(); 
        }
    if(num1 > 140 && num1 < 170){
        canal.setChildIndex(current, images.length-2);

         current.y=0;
        setCards(); 
        }
    if(num1 > 170){

        canal.setChildIndex(current, images.length-1);
        current.y=0;
        setCards(); 
        }

        }
        private function setCards():void{
        var b:int = 0;
        var a:int;
        var cardsArray:Array = canal.getChildren();
        for(a = 0;a < cardsArray.length; a++)
        {
            canal.getChildAt(a).x = 50+b;
            b=b+30;
            canal.getChildAt(a).y=0;
        }
         }

    ]]>
</mx:Script>        
</mx:Application> 
```

PS：我正在尝试用鼠标事件替换拖放事件，并使用鼠标事件获得相同的功能。请有人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:27:45.547

希望下面的代码可以帮助您： - 您可以按照下面的代码使用拖放并在 AS 中创建它。我已经在 MXML 中创建了它，它可以让您了解您正在寻找的内容：-

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" xmlns:local="*">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.core.DragSource;
            import mx.core.UIComponent;
            import mx.events.DragEvent;
            import mx.managers.DragManager;

            private function doDragEnter(event:DragEvent):void
            {
                DragManager.acceptDragDrop(UIComponent(event.target));
            }

            private function doDragDrop(event:DragEvent):void
            {
                var img:RummyItemRenderer;
                if (event.dragInitiator.parent == mainCanvas)
                {
                    img = event.dragInitiator as RummyItemRenderer;

                    //mainCanvas.swapChildren(img, event.currentTarget as RummyItemRenderer);

                    var index:Number = mainCanvas.getChildIndex(event.currentTarget as RummyItemRenderer);

                    mainCanvas.removeChild(img);
                    mainCanvas.addChildAt(img,index);

                    setCardsPosition();
                }
            }

            private function setCardsPosition():void{
                var b:int = 0;
                var a:int;
                var cardsArray:Array = mainCanvas.getChildren();
                for(a = 0;a < cardsArray.length; a++)
                {
                    mainCanvas.getChildAt(a).x = 50+b;
                    b = b+30;
                    mainCanvas.getChildAt(a).y=20;
                }
            }

            private function doDragStart(event:MouseEvent):void
            {
                var dragInitiator:RummyItemRenderer = event.currentTarget as RummyItemRenderer;
                var dragSource:DragSource = new DragSource();
                DragManager.doDrag(dragInitiator, dragSource, event);
            }

        ]]>
    </fx:Script>

    <mx:Canvas id="mainCanvas" backgroundColor="#DDDDDD" width="400" height="200" x="50" y="50">

        <local:RummyItemRenderer id="firstID" x="{mainCanvas.x}" y="20" width="200" height="80%" backgroundColor="#FF0000"
                                  mouseDown="doDragStart(event)" dragEnter="doDragEnter(event)" dragDrop="doDragDrop(event)"
                                  setImageSource="myImageURL"/>
        <local:RummyItemRenderer id="secondID" x="{mainCanvas.x + 30}" y="20" width="200" height="80%" backgroundColor="#00FF00"
                                 mouseDown="doDragStart(event)" dragEnter="doDragEnter(event)" dragDrop="doDragDrop(event)"
                                 setImageSource="myImageURL"/>
        <local:RummyItemRenderer id="thirdID" x="{mainCanvas.x + 60}" y="20" width="200" height="80%" backgroundColor="#0000FF"
                                 mouseDown="doDragStart(event)" dragEnter="doDragEnter(event)" dragDrop="doDragDrop(event)"
                                 setImageSource="myImageURL"/>
    </mx:Canvas>

</s:Application> 
```

RummyItemRenderer.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="100%">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <fx:Script>
        <![CDATA[

            [Bindable]
            private var _setImageSource:String;

            public function get setImageSource():String
            {
                return _setImageSource;
            }

            public function set setImageSource(sourceURL:String):void
            {
                _setImageSource = sourceURL;
            }

        ]]>
    </fx:Script>

    <s:Image id="imageID" source="{_setImageSource}"/>
</mx:Canvas> 
```

# html - 根据表格行的大小更改图像的大小

> ID：12551800
> 
> 赞同：0
> 
> 时间：2012-09-23T11:04:43.760
> 
> 标签：html, css, image, html-table

我有一些看起来像这样的东西：

```
<table>
    <tr><td><img src="..." /></td><td>data</td><td>data</td><td>and more data</td></tr>
    <tr><td><img src="..." /></td><td>data</td><td>data</td><td>and more data</td></tr>
    <tr><td><img src="..." /></td><td>data</td><td>data</td><td>and more data</td></tr>
    ...
    <tr><td><img src="..." /></td><td>data</td><td>data</td><td>and more data</td></tr>
    <tr><td><img src="..." /></td><td>data</td><td>data</td><td>and more data</td></tr>
 </table> 
```

如果可能的话，目标是让图像“有点”调整行的大小。
假设图像大小为 200x200（以 px 为单位）。如果行比图像的大小更薄（它没有图像），我想将图像缩小到 100 像素。
例如：

*   如果没有图像，该行的高度 < 100px，有图像，它变成 100px 高度

*   如果没有图像，该行的高度是 140px，有图像，它保持 140px 的高度

*   如果没有图像，该行的高度为 200px，有图像，它保持 200px 的高度

*   如果没有图像，该行的高度为 260 像素，有图像，它保持 260 像素的高度，但图像不会超过 100%，即 200 像素。

我已经尝试对 td 和 img 标签使用 min-height + height + max-height，但从浏览器的角度来看没有任何变化。

笔记：

*   我正在使用 XHTML 1.1 的文档类型

*   我不需要需要 JavaScript 的答案。我已经知道如何使用 JS（即使没有 jQuery）。我想要一个仅 CSS 的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:34:04.010

你可以试试这段代码：

```
<table width="100%" border="1">
<tr>
    <td height="100">
            <img src="http://dystroy.org/re7210/img/tartare-saumon-creme-salade-harengs-pommes-de-terre-800.jpg" style="width:auto; height:100%;"/>
    </td>
</tr>
</table>​​​​​​​​​​​​​​​​ 
```

查看[演示](http://jsfiddle.net/Jd9QS/1/)

# ruby-on-rails - 如何防止我的最后一个嵌套属性被破坏？

> ID：12551802
> 
> 赞同：0
> 
> 时间：2012-09-23T11:05:04.913
> 
> 标签：ruby-on-rails, activerecord, callback, nested-attributes

我有一个客户模型，它有很多这样的手机；

```
class Customer < ActiveRecord::Base
  has_many :phones, as: :phoneable, dependent: :destroy
  accepts_nested_attributes_for :phones, allow_destroy: true
end

class Phone < ActiveRecord::Base
  belongs_to :phoneable, polymorphic: true
end 
```

我想确保客户始终拥有至少一种嵌套电话型号。目前我在浏览器中管理这个，但我想在服务器上提供一个备份（我遇到了几个没有电话的客户记录，不太清楚他们是怎么做到的，所以我需要一个支持） .

我认为这必须在模型中实现，但我不太确定如何做到这一点。到目前为止，我所有的尝试都失败了。我认为手机模型中的 before_destroy 回调是我想要的，但我不知道如何编写它以防止模型被破坏。如果父模型已被破坏，我还需要它来允许模型的破坏。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T21:07:40.750

你可以这样做：

```
before_destory :check_phone_count

def check_phone_count
  errors.add :base, "At least one phone must be present" unless phonable.phones.count > 1
end 
```

# php - 嵌套的 if 语句，任何可能的清洁方式？

> ID：12551807
> 
> 赞同：2
> 
> 时间：2012-09-23T11:06:48.043
> 
> 标签：php, if-statement

我检查了其他一些问题，但它们并没有真正给我期望的答案。

我的代码是这样的..

```
private function handle()
{
    if()
    {
        if(!condition)
        {
            if(!condition)
            {
                if(!condition)
                {
                    if(!condition))
                    {
                        if(!condition)
                        {
                            if(!condition)
                            {
                                if(!condition)
                                {
                                    if(!condition)
                                    {
                                        if(!condition)
                                        {
                                            code
                                        }

                                        return;
                                    }

                                    return;
                                }

                                return;
                            }

                            return;
                        }

                        return;
                    }

                    return;
                }

                return;
            }

            return;
        }

        return;
    }
} 
```

在我看来，它可读但很混乱，遗憾的是我还没有找到真正让它看起来“漂亮”的方法。有任何想法吗？

编辑：每个回报都是不同的。EDIT2：给出我自己的答案，谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T11:08:39.137

条件可以由`&&`运算符合并。它从左到右工作，这意味着，一旦从左开始的任何一个失败，它就会停止评估条件。

```
if($a) {

    if($b) {
    }

} 
```

可以替换为

```
if($a && $b) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T11:13:22.210

使用变量检查，或将条件组合成更少的 IF 语句。

变量检查如下：

```
$execute = TRUE;
// Opposite of what you want, e.g. if you want $a only to be TRUE, do $a !== TRUE
if (condition) {
  $execute = FALSE;
}

...
// If all the conditions were met, then everything is OK
if($execute === TRUE) {
  // code
}else {
  // return
} 
```

编辑：如果您想对返回的内容进行更多控制，则变量检查可以更好地组合 IF 语句，例如，如果某个条件失败，则会发生特定的事情，而组合条件并不总是允许的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T11:21:51.010

就像已经发布的使用

```
if(condition1&&condition2){} 
```

或者如果这不起作用，您还可以使用在条件为真时立即停止的功能

```
function some(){
if(!conditon 1){return 0;}
if(condition 2) {return 1;}
} 
```

如果仅在第一个不满足的情况下才有效，则第二个提供更多的功能。您必须根据自己的要求进行选择。有时尽管嵌套循环是不可避免的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T11:23:53.990

我想了想，找到了一个很好的方法，基本上我会为每个基本条件创建一个方法，我会在 if 语句中使用按位 AND 运算符 (&) 调用它们，它不短-电路。

```
/**
 * nonsql_condition - It means it doesn't check with the database
 *
 * sql_condition - It means it does check with the database.
 */
if(!$this->nonsql_condition() & !$this->nonsql_condition() & !$this->nonsql_condition() & !$this->nonsql_condition())
{
    if(!$this->sql_condition())
    {
       return error;
    }

    if(!$this->sql_condition())
    {
       return error;
    }

    code;
} 
```

这使我可以在我的方法中使用更少的代码行，而且也不会对我的数据库进行不必要的查询。

# java - 使用变量指定依赖版本时构建失败

> ID：12551812
> 
> 赞同：8
> 
> 时间：2012-09-23T11:08:09.677
> 
> 标签：java, gradle

我正在尝试将我的 Maven 项目迁移到 gradle。**我在变量springVersion**中为所有项目指定 spring 版本。但是由于某种原因，在一个特定的依赖**项 org.springframework:spring-web:springVersion**上构建失败。当我直接输入版本**org.springframework:spring-web:3.1.2.RELEASE 时，**一切都会编译。这是我的 build.gradle 文件：

```
subprojects {
    apply plugin: 'java'
    apply plugin: 'eclipse-wtp'

    ext {    
        springVersion = "3.1.2.RELEASE"
    }
    repositories {
       mavenCentral()
    }

    dependencies {
        compile 'org.springframework:spring-context:springVersion'
        compile 'org.springframework:spring-web:springVersion'
        compile 'org.springframework:spring-core:springVersion'
        compile 'org.springframework:spring-beans:springVersion'

        testCompile 'org.springframework:spring-test:3.1.2.RELEASE'
        testCompile 'org.slf4j:slf4j-log4j12:1.6.6'
        testCompile 'junit:junit:4.10'
    }

    version = '1.0'

    jar {
        manifest.attributes provider: 'gradle'
    }
} 
```

**错误信息：**

```
* What went wrong:
Could not resolve all dependencies for configuration ':hi-db:compile'.
> Could not find group:org.springframework, module:spring-web, version:springVersion.
  Required by:
      hedgehog-investigator-project:hi-db:1.0 
```

执行测试时 org.springframework:spring-test:3.1.2.RELEASE 也是如此。

是什么导致了他的问题以及如何解决？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-23T14:51:08.130

*从字面上看*，您使用`springVersion`的是版本。声明依赖项的正确方法是：

 *```
// notice the double quotes and dollar sign
compile "org.springframework:spring-context:$springVersion" 
```

这是使用 Groovy 字符串插值，这是 Groovy 双引号字符串的一个显着特征。或者，如果您想以 Java 方式执行此操作：

```
// could use single-quoted strings here
compile("org.springframework:spring-context:" + springVersion) 
```

我不推荐后者，但希望它有助于解释为什么您的代码不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-18T12:45:35.103

或者您可以像这样通过变量定义 lib 版本`dependencies`：

```
dependencies {

    def tomcatVersion = '7.0.57'

    tomcat "org.apache.tomcat.embed:tomcat-embed-core:${tomcatVersion}",
           "org.apache.tomcat.embed:tomcat-embed-logging-juli:${tomcatVersion}"
    tomcat("org.apache.tomcat.embed:tomcat-embed-jasper:${tomcatVersion}") {
           exclude group: 'org.eclipse.jdt.core.compiler', module: 'ecj'
    }

} 
```*

# asp.net - 网址路由访问在托管时被拒绝

> ID：12551819
> 
> 赞同：0
> 
> 时间：2012-09-23T11:09:23.780
> 
> 标签：asp.net, url-routing

我在我的asp.net网站中使用url路由。我把colde放在glocal.asax Application_Start事件中，无效

```
Application_Start(object sender, EventArgs e) 
    {
        // Code that runs on application startup
        RouteTable.Routes.MapPageRoute("routedetail",
      "alllist/special/{Name}",
      "~/sub/mydetail.aspx");

        RouteTable.Routes.MapPageRoute("routelist",
            "alllist/special",
            "~/sub/mylist.aspx");

        RouteTable.Routes.MapPageRoute("routehtml", "alllist/myhtml.html", "~/sub/to.aspx");
    } 
```

在我的本地开发和 iis7 中一切都很好。错误是在线托管
“routehtml”不起作用。访问被拒绝。是 .html 扩展名吗？我该如何解决这个问题。任何建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:31:29.513

You may want to check that your IIS 7 Application Pool is in Integrated mode on your host server. It will not work if it isn't. Although you wouldn't need it, but you could also set RouteExistingFiles property to false at the top of your Application_Start event.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T11:38:03.407

尝试将其放入 global.asax

```
void Application_BeginRequest(object sender, EventArgs e)
{
   HttpApplication app = sender as HttpApplication;
   if(app.Request.Path.IndexOf("FriendlyPage.html") > 0)
   {
       app.Context.RewritePath("/UnfriendlyPage.aspx?SomeQuery=12345");
   }
} 
```

# windows - 在windows中加载php扩展

> ID：12551820
> 
> 赞同：0
> 
> 时间：2012-09-23T11:09:28.827
> 
> 标签：windows, dll, php-extension

我在 Windows 7 的 php 中加载我的扩展时遇到问题。我已经在我的 Windows 上安装了 php 和 IIS，当我检查 phpinfo() 页面时，我发现我的 extension_dir 是 c:/php/ext。所以我将我的 dll 文件复制到该目录并添加`extension=php_mylib.dll`到 php.ini 文件中，然后我重新启动 IIS 并检查我的扩展是否已加载：

```
<?PHP
if (dl('php_mylib.dll')){ print ("YES")}
else{ print ("NO")}
?> 
```

但是每次我运行这段代码时我都会得到“不”。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T04:04:50.797

今天在稍微不同的系统上遇到了类似的问题 - Win 2008 R2 / IIS 7.5 / PHP 5.3.9 nts

我正在寻找启用 php_printer.dll 进行网络打印。还没有找到不涉及编译 dll 的解决方案，但我确实了解到有人启用了安全模式。

此信息来自手册@ [function.dl.php](http://php.net/manual/en/function.dl.php)。

7 年前发布的信息帮助了我，似乎适合我的系统。

以下是我发现有用的部分，来自前点 ru 的 mag_2000：

```
//make sure that we are ABLE to load libraries
if( !(bool)ini_get( "enable_dl" ) || (bool)ini_get( "safe_mode" ) ) {
  die( "dh_local(): Loading extensions is not permitted.\n" );
}

//check to make sure the file exists
if( !file_exists( $extensionFile ) ) {
 die( "dl_local(): File '$extensionFile' does not exist.\n" );
}

//check the file permissions
if( !is_executable( $extensionFile ) ) {
  die( "dl_local(): File '$extensionFile' is not executable.\n" );
} 
```

希望有帮助！

# android - android .setCenter() 导致强制关闭

> ID：12551821
> 
> 赞同：0
> 
> 时间：2012-09-23T11:09:31.520
> 
> 标签：android, maps

这是我的 MainActivity.java 代码

```
package com.example.com.draft1;

import com.google.android.maps.GeoPoint;
 import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;
import android.view.KeyEvent;
import com.google.android.maps.MapController;

public class MainActivity extends MapActivity {

MapView mapView;
MapController mc;
GeoPoint p;

String coordinates[]={"1.352566007","103.78921587"};
double lat=Double.parseDouble(coordinates[0]);
double lng=Double.parseDouble(coordinates[1]);

@Override
public void onCreate(Bundle savedInstanceState) {

    p=new GeoPoint((int)(lat*1E6),(int)(lng*1E6));
    mapView=(MapView)findViewById(R.id.mapView);

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mc.setCenter(p);

    //mc.setZoom(13);
    //mapView.invalidate();

    //myMapController.setCenter(new GeoPoint((int)(lat*1E6),(int)(lng*1E6)));
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
@Override
protected boolean isRouteDisplayed() 

{
    //adssad

    return false;

}

} 
```

现在，上面的代码导致强制关闭。

以下是上述的 LogCat 详细信息：09-23 16:37:38.494: D/dalvikvm(18710): GC_CONCURRENT freed 244K, 41% free 3354K/5639K, external 0K/0K, paused 3ms+4ms 09-23 16: 37:38.764: D/dalvikvm(18710): GC_CONCURRENT 释放 530K, 44% 空闲 3378K/5959K, 外部 0K/0K, 暂停 2ms+7ms 09-23 16:37:38.894: D/dalvikvm(18710): GC_CONCURRENT 释放 376K , 42% free 3513K/5959K, external 0K/0K, paused 3ms+4ms 09-23 16:37:39.014: D/dalvikvm(18710): GC_CONCURRENT freed 510K, 43% free 3523K/6087K, external 0K/0K, paused 3ms+4ms 09-23 16:37:39.134: D/dalvikvm(18710): GC_CONCURRENT freed 334K, 40% free 3700K/6087K, external 0K/0K, paused 3ms+4ms 09-23 16:37:39.194: I/ HtcTextSelection(18710): (sendOnTextChanged) stopTextSelectionMode 09-23 16:37:39.244: D/dalvikvm(18710): GC_EXTERNAL_ALLOC 释放 698K，47% 释放 3319K/6151K，外部 0K/0K，暂停 45 毫秒 09-23 16:37:39.264: D/AndroidRuntime(18710): 关闭 VM 09-23 16:37:39.264: W/dalvikvm(18710): threadid=1: 线程退出未捕获异常 (group=0x400dc5a0 ) 09-23 16:37:39.264: E/AndroidRuntime(18710): 致命异常: main 09-23 16:37:39.264: E/AndroidRuntime(18710): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com .example.com.draft1/com.example.com.draft1.MainActivity}：java.lang.NullPointerException 09-23 16:37:39.264：E/AndroidRuntime(18710)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread. java:1872) 09-23 16:37:39.264: E/AndroidRuntime(18710): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893) 09-23 16:37:39.264: E/AndroidRuntime(18710) : 在 android.app.ActivityThread.access$1500(ActivityThread.java:135) 09-23 16:37:39.264:E/AndroidRuntime(18710): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054) 09-23 16:37:39.264: E/AndroidRuntime(18710): 在 android.os.Handler.dispatchMessage(Handler .java:99) 09-23 16:37:39.264: E/AndroidRuntime(18710): 在 android.os.Looper.loop(Looper.java:150) 09-23 16:37:39.264: E/AndroidRuntime(18710 ): 在 android.app.ActivityThread.main(ActivityThread.java:4389) 09-23 16:37:39.264: E/AndroidRuntime(18710): 在 java.lang.reflect.Method.invokeNative(Native Method) 09-23 16:37:39.264: E/AndroidRuntime(18710): 在 java.lang.reflect.Method.invoke(Method.java:507) 09-23 16:37:39.264: E/AndroidRuntime(18710): 在 com.android .internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849) 09-23 16:37:39.264: E/AndroidRuntime(18710): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java: 607) 09-23 16:37：39.264：E/AndroidRuntime（18710）：在 dalvik.system.NativeStart.main（本机方法）09-23 16：37：39.264：E/AndroidRuntime（18710）：引起：java.lang.NullPointerException 09-23 16:37:39.264: E/AndroidRuntime(18710): 在 com.example.com.draft1.MainActivity.onCreate(MainActivity.java:40) 09-23 16:37:39.264: E/AndroidRuntime(18710): 在 android .app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072) 09-23 16:37:39.264: E/AndroidRuntime(18710): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836) 09-23 16:37 :39.264: E/AndroidRuntime(18710): ... 11 更多MainActivity.onCreate(MainActivity.java:40) 09-23 16:37:39.264: E/AndroidRuntime(18710): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072) 09-23 16:37:39.264: E/AndroidRuntime(18710): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836) 09-23 16:37:39.264: E/AndroidRuntime(18710): ... 11 更多MainActivity.onCreate(MainActivity.java:40) 09-23 16:37:39.264: E/AndroidRuntime(18710): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072) 09-23 16:37:39.264: E/AndroidRuntime(18710): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836) 09-23 16:37:39.264: E/AndroidRuntime(18710): ... 11 更多

因此，当我评论 .setCenter() 语句时，该应用程序运行良好。但是，在取消注释时，它会强制关闭

任何线索，为什么会这样？

感谢您的所有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:22:21.307

极其愚蠢的错误。没有初始化 mc ( MapController )

我的错

# javascript - 我如何能够通过采取有效载荷中包含的操作来处理 APNS 推送消息

> ID：12551822
> 
> 赞同：1
> 
> 时间：2012-09-23T11:09:56.283
> 
> 标签：javascript, ios, xcode, json, apple-push-notifications

我是 Objective-c、xcode 和 app dev 的新手，所以请记住这一点。

我可以通过 APNS 向我的新兴应用发送推送通知。我可以看到 JSON 消息并且可以 NSSLog 它。

```
Payload: {
    aps = {
        alert = {
            "action-loc-key" = Reveal;
            body = "Hi Aleem, we have a new special offer just for you!";
        };
        badge = 70;
        sound = default;
    };

    myCMD = {
        "update_colour" = red;
    };
} 
```

到目前为止一切都很好。但是，我需要能够通过采取行动来对推送消息采取行动。例如，我希望能够提取`update_colour`并使用值 red 将我唯一的控制器上标签的背景颜色更改为红色。

我的问题是我无法从我的 appdelegate.m 中引用我的标签。因此，我也无法更新背景颜色，甚至无法调用控制器上的方法来执行此操作。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:52:09.433

在您的委托中添加：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo; 
```

然后，当应用程序运行时收到推送通知/用户打开推送通知时，您可以访问通知有效负载并对其采取行动，然后您可以向视图控制器发送通知。

在您的视图中添加观察者：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                     selector:@selector(backgroundChanged:)
                                         name:@"ChangeBackground"
                                       object:nil]; 
```

添加处理它。

```
- (void)backgroundChanged:(NSNotification *)notification {
    NSDictionary *dict = [notification userInfo];

    NSLog(@"%@" [[dict valueForKey:@"myCMD"] valueForKey:@"background-colour"]);

    label.backgroundColor = [UIColor xxx];
} 
```

然后在委托中：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {
    if([userInfo valueForKey:@"myCMD"]) {
            NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter];
        [notificationCenter postNotificationName:@"ChangeBackground"
                                    object:nil
                                    userInfo:userInfo];
    }
} 
```

# c# - WPF 动画宽度和高度，后面有代码（放大）

> ID：12551823
> 
> 赞同：1
> 
> 时间：2012-09-23T11:09:58.117
> 
> 标签：c#, wpf, animation, code-behind

我能够为边框的移动设置动画：

```
private void MoveTo(Border target, double newX, double newY)
{
    Vector offset = VisualTreeHelper.GetOffset(target);
    var top = offset.Y;
    var left = offset.X;
    TranslateTransform trans = new TranslateTransform();
    target.RenderTransform = trans;
    DoubleAnimation anim1 = new DoubleAnimation(0, newY - top, TimeSpan.FromMilliseconds(500));
    DoubleAnimation anim2 = new DoubleAnimation(0, newX - left, TimeSpan.FromMilliseconds(500));
    trans.BeginAnimation(TranslateTransform.YProperty, anim1);
    trans.BeginAnimation(TranslateTransform.XProperty, anim2);
} 
```

但是我希望能够为高度和宽度以及位置的增加设置动画，以给人一种放大图像的印象（在我的案例和上面的示例中包含在边框中））。

这可能与后面的代码有关吗？

* * *

好的，我尝试了比例变换，但它似乎没有做任何事情 - 我需要故事板吗？

```
 private void Zoom(Border target)
    {   
        TranslateTransform trans = new TranslateTransform();
        target.RenderTransform = trans;
        DoubleAnimation anim1 = new DoubleAnimation(1, 2, TimeSpan.FromMilliseconds(1000));
        DoubleAnimation anim2 = new DoubleAnimation(1, 2, TimeSpan.FromMilliseconds(1000));
        trans.BeginAnimation(ScaleTransform.ScaleXProperty, anim1);
        trans.BeginAnimation(ScaleTransform.ScaleYProperty, anim2);
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T11:23:03.787

最好使用缩放变换进行缩放，但是如果您坚持为 W/H 设置动画，您可以这样做，因为这些是正常的 DP，您可以使用标准的 DoubleAnimation/DoubleAnimationUsingKeyFrames 为它们设置动画

```
DoubleAnimation doubleAnimation = new DoubleAnimation(100, 200, new Duration(TimeSpan.FromMilliseconds(500)));
        this.BeginAnimation(FrameworkElement.WidthProperty, doubleAnimation); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T11:15:05.970

使用`ScaleTransform`，不需要`Height`&`Width`动画，`ScaleTransform`会影响你的边框`VisualTree`，所以内部图像也会被拉伸。

```
 private void Zoom(Border target)
    {
        ScaleTransform trans = new ScaleTransform();
        target.RenderTransform = trans;
        // if you use the same animation for X & Y you don't need anim1, anim2 
        DoubleAnimation anim = new DoubleAnimation(1, 2, TimeSpan.FromMilliseconds(1000));
        trans.BeginAnimation(ScaleTransform.ScaleXProperty, anim);
        trans.BeginAnimation(ScaleTransform.ScaleYProperty, anim);

    } 
```

# regex - 在 Vim 中折叠正则表达式

> ID：12551828
> 
> 赞同：2
> 
> 时间：2012-09-23T11:10:31.443
> 
> 标签：regex, vim

我在编写时使用 Pandoc，并为更复杂的表粘贴 html 代码。这会使文件看起来不整洁，我想使用 Vim 的 foldexpr 使用正则表达式折叠这些表格元素。这个正则表达式：

```
<table\b[^>]*>(?:(?=([^<]+))\1|<(?!table\b[^>]*>))*?</table> 
```

可以在 Sublime Text 和 BBEdit 中突出显示表格代码，但我似乎无法让它在 Vim 中工作（非常适合我选择的编辑器）。

看着“Vim Scripting the Hardway”，我希望写一个像这样的简单函数：

setlocal foldmethod=expr setlocal foldexpr=GetTableFold(v:lnum)

```
function! GetTableFold(lnum)
    if getline(a:lnum) =~? '\v<table\b[^>]*>(?:(?=([^<]+))\1|<(?!table\b[^>]*>))*?  </table>
    return '-1'
endif
return '0'
endfunction 
```

为了隐藏我的文件中的表格元素，但它不起作用。当我尝试在 Vim 中对正则表达式进行简单搜索时，我还会收到“E64: ? follow nothing”错误。

任何想法都会非常受欢迎！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T13:08:36.033

你这样做的方式有几个问题。一方面，您的正则表达式存在语法问题（正如 Ingo 指出的那样）。另外，我认为您不太了解 vim 如何计算折叠级别。Vim 为文件中的每一行调用一次你的函数“GetTableFold”。然后返回该特定行的折叠级别。因为除了行号之外您没有其他上下文，您不能只将该行与跨越多行的正则表达式匹配。相反，您必须手动计算您的线路是否在此范围内。

我有一段时间没有写任何 vimscript，所以这可能有点错误，但它似乎在我尝试过的几个简单案例中有效。至少它应该给你一个从哪里开始的基础。

```
function GetTableFold(lnum)
    let n = a:lnum
    while n > 0
        let currline = getline(n)
        let prevline = getline(n-1)
        if currline =~ '\v\<table\>|\<\/table\>'
            return '1'
        elseif currline =~ '\v^\s*$'
            " special case for blank lines
            return '-1'
        elseif prevline =~ '\v\<\/table\>'
            " special case for the line after </table>
            return '0'
        endif
        let n -= 1
    endwhile
    return '0'
endfunction

set foldmethod=expr
set foldexpr=GetTableFold(v:lnum) 
```

这会产生一些令人讨厌的（合理的？）假设，例如您永远不会有`<table>`并且`</table>`在同一条线上。鉴于您仅将复杂表放入 pandoc 文件的用例，我认为这是一个安全的假设。它不能很好地处理表中的表。如果你需要，你将不得不稍微调整一下。

# ios - 批量获取多个 MPMediaItem 的属性

> ID：12551830
> 
> 赞同：1
> 
> 时间：2012-09-23T11:11:41.777
> 
> 标签：ios, mpmediaitem, mpmediaitemcollection

关于`MPMediaItem`，有没有办法为多个项目/媒体项目集合中的项目获取属性，这比`valueForProperty:`单独调用每个项目更有效？

我知道`enumerateValuesForProperties:usingBlock:`，但这允许批量获取单个媒体项目的多个属性。我对多个媒体项的单个属性感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:39:09.217

不幸的是，您确实必须一次做一个，但有几种实用的方法可以做到这一点。例如，如果要将值加载到数组中，可以使用这个 for-in 循环：

```
for (MPMediaItem *item in myCollection.items) {
    [someMutableArray addObject:[item valueForProperty:MPMediaItemPropertyTitle]];
} 
```

或者，如果您想使用块枚举，这里有一个示例：

```
[myCollection.items enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop){
    [someMutableArray addObject:[(MPMediaItem *)[myCollection.items objectAtIndex:idx] valueForProperty:MPMediaItemPropertyTitle]];
}]; 
```

# sql-server - 我们如何在使用 sql server 获取记录数的同时降低临时表扫描的成本

> ID：12551832
> 
> 赞同：2
> 
> 时间：2012-09-23T11:12:06.917
> 
> 标签：sql-server

这里只是我想知道临时表中的记录数并传递给另一个变量，以便它在执行计划表扫描中显示大约 100%

请找到我正在做的以下查询

```
DECLARE @tmpANHdr TABLE (
  hdrId          INT IDENTITY,
  CBFId          NVARCHAR(32),
  ACPT_REJ_FLAG  NVARCHAR(8),
  PROC_FILE_NAME NVARCHAR(50))

INSERT INTO @tmpANHdr
SELECT TOP 100 AHR_CB_FTS_FILE_ID,
               AHR_ACCT_REJ_FLAG,
               AHR_PROC_FILE_NAME
FROM   FTS_ACK_NAK_HEADER WITH (NOLOCK)
WHERE  AHR_FLAG IS NULL
        OR AHR_FLAG = 0

DECLARE @varRecordCount INT

SELECT @varRecordCount = Count(1)
FROM   @tmpANHdr

SET @varIndex = 1

IF( @varIndex <= @varRecordCount )
  BEGIN
      PRINT 'hi'
  END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T19:25:26.530

您可以在标识列上放置一个主键（索引），这可能会使其性能更好：

```
DECLARE @tmpANHdr TABLE (
  hdrId          INT IDENTITY PRIMARY KEY,
  CBFId          NVARCHAR(32),
  ACPT_REJ_FLAG  NVARCHAR(8),
  PROC_FILE_NAME NVARCHAR(50)) 
```

另外，您最终是否将 table 变量用于其他任何事情？为什么不这样做呢？

```
DECLARE @varRecordCount INT

SELECT @varRecordCount = Count(TOP 100 *)
FROM   FTS_ACK_NAK_HEADER WITH (NOLOCK)
WHERE  AHR_FLAG IS NULL
        OR AHR_FLAG = 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T11:15:32.083

无论如何，对不超过 100 行的表变量进行扫描可能非常便宜。表扫描操作的成本可能是语句计划的 100%，但这是一个非常小的数字的 100%。

您可以完全避免这种成本，但只需查看`@@rowcount`下面的插入即可。

```
DECLARE @varRecordCount INT;

INSERT INTO @tmpANHdr
SELECT TOP 100 AHR_CB_FTS_FILE_ID,
               AHR_ACCT_REJ_FLAG,
               AHR_PROC_FILE_NAME
FROM   FTS_ACK_NAK_HEADER WITH (NOLOCK)
WHERE  AHR_FLAG IS NULL
        OR AHR_FLAG = 0

SET @varRecordCount = @@ROWCOUNT 
```

# kinect - 在 Kinect 中将骨骼数据转换为深度数据

> ID：12551840
> 
> 赞同：0
> 
> 时间：2012-09-23T11:13:21.197
> 
> 标签：kinect, depth

> **可能重复：**
> [Kinect：如何从一些深度数据中获取骨架数据（从 kinect 获取但我修改了一些地方）](https://stackoverflow.com/questions/12155062/kinect-how-to-get-the-skeleton-data-from-some-depth-data-geting-from-kinect-bu)

由于骨骼坐标空间与深度空间不同，我希望能够将骨骼数据转换为深度图像数据，以便能够使用这些坐标为我的 3D 模型制作动画。. 我一直在看的教程真的很老而且没有帮助。我正在使用根本不涉及 NUI 编程的 Kinect v1.5。. 任何帮助将不胜感激......这是我到目前为止所得到的。.

```
void newSensor_AllFramesReady(object sender, AllFramesReadyEventArgs e)
        {   
            using (SkeletonFrame skeletalFrame = e.OpenSkeletonFrame())
            using(ColorImageFrame colorFrame = e.OpenColorImageFrame())
            using(DepthImageFrame depthFrame = e.OpenDepthImageFrame())
            {
                if (skeletalFrame != null)
                {
                    Skeleton[] skeletonData = new Skeleton[skeletalFrame.SkeletonArrayLength];
                    skeletalFrame.CopySkeletonDataTo(skeletonData);

                    Skeleton playerSkeleton = (from s in skeletonData where s.TrackingState == SkeletonTrackingState.Tracked select s).FirstOrDefault();

                    if (playerSkeleton != null)
                    {
                        Joint rightHand = playerSkeleton.Joints[JointType.HandRight];
                        var rightHandX = rightHand.Position.X;
                        var rightHandY = rightHand.Position.Y;
                        var rightHandZ = rightHand.Position.Z

                        Console.SetOut(writer);
                        Console.SetOut(oldOut);
                        writer.WriteLine(rightHandX + "," + rightHandY + "," + rightHandZ);

                      //Pattern.Add(new Point(rightHandX, rightHandY));

                    }

                    if (colorFrame != null)
                    {
                        int stride = colorFrame.Width * 4;

                        pixels = new byte[colorFrame.Width*colorFrame.Height*4];
                        colorFrame.CopyPixelDataTo(pixels);
                    }

                }

                if (Keyboard.IsKeyDown(Key.Escape))
                {
                    Stopkinect(kinectSensorChooser1.Kinect);
                    Application.Current.Shutdown();
                }

               // Pattern_Coordinates();

               //  Print_Pattern();
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T21:44:25.400

你会想看看[Kinect: How to get the skeleton data from some depth data(geting from kinect but I modified some place)](https://stackoverflow.com/questions/12155062/kinect-how-to-get-the-skeleton-data-from-some-depth-data-geting-from-kinect-bu/12159919#12159919)，即使它是从深度数据中获取骨架数据，答案也显示了如何做相反的事情。

# batch-file - CMD 在参数中嵌套双引号

> ID：12551842
> 
> 赞同：9
> 
> 时间：2012-09-23T11:13:24.810
> 
> 标签：batch-file, cmd, command-line-arguments, double-quotes

我在将参数传递给带有嵌套双引号的批处理函数时遇到问题。

这是一个批处理文件的示例：

```
@SET path_with_space="c:\test\filenamewith space.txt"
@CALL :FUNCTION blaat1, "blaat2 %path_with_space%"
@GOTO :EOF

:FUNCTION
@echo off
echo arg 1: %~1
echo arg 2: %~2
echo arg 3: %~3
GOTO :EOF 
```

输出是：

```
arg 1: blaat1
arg 2: blaat2 "c:\test\filenamewith
arg 3: space.txt"" 
```

我该怎么做`arg 2: blaat2 "c:\test\filenamewith space.txt"`？请注意，我无法调整功能或更改`%path_with_space%`. 我只能控制传递给函数的内容。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-23T15:23:45.663

就像 dbenham 所说，似乎不可能在没有引号的情况下转义参数中的空格。
但是，如果您知道*接收器*函数如何获取参数，则有可能。
然后您可以通过转义的延迟变量传递参数，该变量不会在调用中扩展，它将仅在函数中扩展。
并且有必要将函数中的参数分配给变量，但在良好且可读的代码中可能就是这种情况。

```
setlocal EnableDelayedExpansion 
set path_with_space="c:\test\filenamewith space.txt"
@CALL :FUNCTION blaat1, "blaat2 ^!path_with_space^!"
GOTO :EOF

:FUNCTION
@echo off
echo arg 1: %~1
echo arg 2: %~2
echo arg 3: %~3
GOTO :EOF 
```

输出是：

```
arg 1: blaat1
arg 2: blaat2 "c:\test\filenamewith space.txt"
arg 3: 
```

**编辑：*批量注入的解决方案***

即使应始终禁用延迟扩展，这也有效。
但是，您现在需要了解如何在函数中扩展参数。

```
@echo off
set path_with_space="c:\test\filenamewith space.txt"
CALL :FUNCTION 1 2 ""^^"&call:inject:""
exit/b

:inject
set arg1=blaat1
set arg2=blaat2 %path_with_space%
set arg3=none
exit /b

:FUNCTION
@echo off
set "arg1=%~1"
set "arg2=%~2"
set "arg3=%~3"
echo arg 1: %arg1%
echo arg 2: %arg2%
echo arg 3: %arg3%
GOTO :EOF 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T13:20:48.980

我发现了这一点，但我所能做的就是将问题转移到不同的领域。

[使用报价](http://ss64.com/nt/syntax-esc.html)

```
@SET 

path_with_space="c:\test\filenamewith space.txt"

:: Remove quotes
@SET _string=###%path_with_space%###
@SET _string=%_string:"###=%
@SET _string=%_string:###"=%
@SET _string=%_string:###=%

@echo %_string%

@CALL :FUNCTION blaat1, "blaat2 %_string%"
@GOTO :EOF

:FUNCTION
@echo off
@echo arg 1: %~1
@echo arg 2: %~2
@echo arg 3: %~3

:EOF

pause 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T13:49:20.990

我不相信这是可能的。

无法转义空格以使其不被解释为参数分隔符。在参数中包含空格的唯一方法是将其括在引号中。您需要一些空间来引用，而有些则不需要，所以这是不可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T09:49:05.857

@杰布+1

@davor

为什么不简单地使用双双引号

```
@SET path_with_space=""c:\test\filenamewith space.txt""
@CALL :FUNCTION blaat1, "blaat2 %path_with_space%", blaat3
@GOTO :EOF

:FUNCTION
@echo off
echo arg 1: %~1
::--------------------
set arg2=%~2
set arg2=%arg2:""="%
::-------------------
echo arg 2: %arg2%
echo arg 3: %~3
GOTO :EOF 
```

输出是：

```
arg 1: blaat1
arg 2: blaat2 "c:\test\filenamewith space.txt"
arg 3: blaat3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-06T17:52:04.500

> **如果您不想使用延迟扩展（*您需要编辑 FUNCTION 来完成此操作！*）：**

我建议您在将参数传递给**FUNCTION**之前删除引号（注意`%path_with_space:"=%"`与`%path_with_space%"`原始示例中的对比），然后您可以将它们放回去，用带引号的版本（`%%_arg_2:%path_with_space:"=%=%path_with_space%%%`）替换您的路径：

```
@SET path_with_space="c:\test\filenamewith space.txt"
@CALL :FUNCTION blaat1, "blaat2 %path_with_space:"=%"
@GOTO :EOF

:FUNCTION
@echo off
echo arg 1: %~1
set _arg_2=%~2
call echo arg 2: %%_arg_2:%path_with_space:"=%=%path_with_space%%%
echo arg 3: %~3
GOTO :EOF 
```

输出是：

```
arg 1: blaat1
arg 2: blaat2 "c:\test\filenamewith space.txt"
arg 3: 
```

如果其他参数也包含用引号括起来的路径，则可以对所有参数都遵循相同的模式

# jquery - 用 div 替换文本框，但 jquery 不起作用

> ID：12551843
> 
> 赞同：0
> 
> 时间：2012-09-23T11:13:32.347
> 
> 标签：jquery

> **可能重复：**
> [用 div 替换文本框，但 jquery 不起作用](https://stackoverflow.com/questions/12550986/replace-textbox-with-div-with-jquery-not-working)

**它只工作了几秒钟，然后 div 再次消失：**

```
$(document).ready(function () {

    $("#done").click(function () {
        $('#txtname').replaceWith(function () {

            return '<div>' + $(this).val() + '</div>';
        });
    }); 
```

**.aspx**

```
 <asp:TextBox ID="txtname" runat="server" BorderColor="#96A6C5" CssClass="txt"></asp:TextBox></div>

<div class="text">
<asp:Button ID="done" runat="server" onclick="done_Click"/>
</div> 
```

**。CS**

```
protected void done_Click(object sender, EventArgs e)
    {

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:26:44.537

脚本部分应该可以正常工作。但我认为您访问控件的方式存在问题。

`$("#done")`并且`$("#txtname")`应该是`$("#<%=done.ClientID%>")` 和`$("#<%=txtname.ClientID%>")`分别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T11:34:28.917

`ID`如果`this`不起作用，您也可以使用

```
 $('#<%=done.ClientID%>').click(function() {
        $('#<%=txtname.ClientID%>').replaceWith(function() {

            return '<div>' + $('#<%=txtname.ClientID%>').val() + '</div>';
        });
return false;
    }); 
```

如果上述方法不起作用，这是另一个示例

```
 $('#<%=done.ClientID').click(function() {
        $('#<%=txtname.ClientID%>').replaceWith('<div>' + $('#<%#txtname.ClientID').val() + '</div>');

return false;
    }); 
```

# ios - 使用 RestKit 解析 JSON

> ID：12551849
> 
> 赞同：0
> 
> 时间：2012-09-23T11:14:37.077
> 
> 标签：ios, restkit

我使用 RestKit 已经有一段时间了，但一些 API 在最新版本中发生了变化，我不再能够解析简单的 JSON。

这是我的有效载荷：

```
{
   "result":true,
   "items":[
      {
         "id":"1",
         "receiver":"11011101"
      },
      {
         "id":"2",
         "receiver":"11011101"
      }
   ]
} 
```

如何将“项目”字典的内容解析为我创建的对象 Conversation 的实例？

使用下面的代码不起作用（对象永远不会被映射）：

```
RKObjectMapping* conversationMapping = [RKObjectMapping mappingForClass:[Conversation class]];
[conversationMapping mapKeyPath:@"id" toAttribute:@"id"];
[conversationMapping mapKeyPath:@"receiver" toAttribute:@"receiver"];

[[RKObjectManager sharedManager].mappingProvider setMapping:conversationMapping forKeyPath:@"items"];
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/getConversations" delegate:self]; 
```

会话课

```
@interface Conversation : NSObject {
    NSString *id;
    NSString *receiver; }

+ (void)objectMapping;

@property (nonatomic, strong) NSString *id; @property (nonatomic, strong) NSString *receiver;

@end

@implementation Conversation
@synthesize id;
@synthesize receiver;

+ (void)objectMapping {
    RKObjectMapping* conversationMapping = [RKObjectMapping mappingForClass:[Conversation class]];
    [conversationMapping mapKeyPath:@"id" toAttribute:@"id"];
    [conversationMapping mapKeyPath:@"receiver" toAttribute:@"receiver"];

    [[RKObjectManager sharedManager].mappingProvider setMapping:conversationMapping forKeyPath:@"items"];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T14:58:05.667

您的根对象是如何定义的（包含“结果”和您的对话“项目”的对象）？这应该看起来像这样：

@interface 我的响应

@property (nonatomic, strong) NSArray* 项目；@property (nonatomic, assign) BOOL 结果；

也有适当的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:57:41.027

我解决了这个问题。这与 RestKit 完全无关。从服务器返回的响应的内容类型未设置为 JSON，修复该对象映射后工作正常。

# matlab - MATLAB中的模和余数（中国余数定理）

> ID：12551850
> 
> 赞同：5
> 
> 时间：2012-09-23T11:14:40.587
> 
> 标签：matlab, modulo, chinese-remainder-theorem

给定数组中的模值及其余数值，如何在 Matlab 中找到最小可能值？例如：

```
A=[ 23 90 56 36] %# the modulo values
B=[  1  3 37 21] %# the remainder values 
```

这导致了答案`93`；这是最小的可能值。

* * *

### 编辑：

这是我的代码，但它似乎只将剩余数组的最后一个值显示为最小值：

```
z = input('z=');
r = input('r=');
c = 0;
m = max(z);
[x, y] = find(z == m);
r = r(y);
f = find(z);
q = max(f);
p = z(1:q);
n = m * c + r;
if (mod(n, p) == r)
    c = c + 1;
end
fprintf('The lowest value is %0.f\n', n) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T17:22:58.640

好的，所以你的目标是找到`x`满足`B(i) = mod(x, A(i))`每个`i`.

[此页面](http://www.math.okstate.edu/~wrightd/crypt/lecnotes/node21.html)包含一个非常简单（但彻底）的解释，说明如何使用[中国剩余定理](http://en.wikipedia.org/wiki/Chinese_remainder_theorem)求解您的方程组。因此，这是 MATLAB 中所描述方法的实现：

```
A = [23, 90];                                  %# Moduli
B = [1, 3];                                    %# Remainders

%# Find the smallest x that satisfies B(i) = mod(x, A(i)) for each i
AA = meshgrid(A);
assert(~sum(sum(gcd(AA, AA') - diag(A) > 1)))  %# Check that moduli are coprime
M = prod(AA' - diag(A - 1));
[G, U, V] = gcd(A, M);
x = mod(sum(B .* M .* V), prod(A))

x =
    93 
```

您应该注意，此算法仅适用于[互质](http://en.wikipedia.org/wiki/Coprime_integers)`A`的模（ 的值）！

在您的示例中，它们不是，因此*这不适用于您的示例*`assert`（如果模不是互质的，我已经放置了一个命令来破坏脚本）。您应该尝试为自己实现[非压缩模数的完整解决方案](http://en.wikipedia.org/wiki/Method_of_successive_substitution)！

PS
另请注意，该[`gcd`](http://www.mathworks.com/help/matlab/ref/gcd.html)命令使用[Euclid's algorithm](http://en.wikipedia.org/wiki/Euclidean_algorithm)。如果您需要自己实现它，[this](http://www.mathworks.com/matlabcentral/fileexchange/38112-chinese-remainder-theorem/content/invmodn.m)和[this](http://www.mathworks.com/matlabcentral/fileexchange/13949-euclids-algorithm)可能会为您提供很好的参考。

# jquery - Jquery匹配变量

> ID：12551853
> 
> 赞同：1
> 
> 时间：2012-09-23T11:14:52.660
> 
> 标签：jquery, preg-match

我正在尝试将字符串与变量匹配，该变量来自文本字段

我得到了什么：

```
if( v[1].match(/Piet/i) ){
    console.log( v );
} 
```

这可行，但现在我必须在其中添加我的 val。我四处搜索并找到了这个主题：

*   [如何在 Javascript 中的正则表达式中使用变量](https://stackoverflow.com/questions/5916833/how-to-use-variables-inside-regular-expression-in-javascript)

现在我尝试他们在主题中所说的话：

```
if( v[1].match("\\(" + val + ")\\i") ){
    console.log( v );
} 
```

现在我没有得到任何结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T11:20:34.397

这应该工作：

```
if( v[1].match(new RegExp(val, 'i'))) {
    console.log( v );
}​ 
```

# android - 根据其他设置在代码中构建首选项屏幕

> ID：12551854
> 
> 赞同：1
> 
> 时间：2012-09-23T11:14:58.027
> 
> 标签：android, preferences

我已经在这里搜索并查看了示例，但还没有找到本质上是一个简单问题的答案。根据在前面的 ListPreference 中所做的选择，我想在代码中动态构建一个 CheckBoxPreferences 首选项屏幕，然后当我使用单击侦听器单击一个简单首选项时会显示该屏幕。在每种情况下，复选框的列表和数量都会有所不同。

到目前为止，这就是我要做的事情——只需一段简单的代码来测试 onClick 侦听器中的概念，但是如何让复选框首选项屏幕出现？必须有一个简单的解释为什么它没有。我究竟做错了什么？

我的 xml 代码的一部分：

```
<PreferenceCategory android:title="Filters">
    <PreferenceScreen android:key="FilterScreen"
        android:title="Filters" android:summary="Click to change filter settings">
        <ListPreference android:title="Filter type" 
            android:summary="Set to: Gliding"
            android:key="filterType"
            android:defaultValue="0"
            android:entries="@array/filterTypeOptions"
            android:entryValues="@array/filterTypeValues" />
        <CheckBoxPreference android:title=""
            android:summary="Include Aerodrome Notams"
            android:defaultValue="false" android:key="filterIncludeAerodrome" />
        <CheckBoxPreference android:title=""
            android:summary="Delete night-time Notams"
            android:defaultValue="true" android:key="filterDeleteNighttime" />
        <ListPreference android:title="Select category to change" 
            android:summary="Set to: Airspace organisation"
            android:key="filterCategory"
            android:defaultValue="0"
            android:entries="@array/filterCategoryOptions"
            android:entryValues="@array/filterCategoryValues" />
        <Preference android:title="Show filters for category"
            android:summary="Click to choose subjects to delete"
            android:key="filterShow" />
    </PreferenceScreen>
</PreferenceCategory> 
```

“显示类别过滤器”的内容将取决于“过滤器类型”和“选择要更改的类别”设置。

这是我为“显示过滤器”单击侦听器提供的简单测试代码（为了显示要点而删减）：

```
public class Settings extends PreferenceActivity
                  implements OnSharedPreferenceChangeListener
{
    ------
    public static final String KEY_FILTER_SHOW = "filterShow";

    ------
    private Preference mFilterShow;

    ------
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.layout.settings);

        // Get a reference to the preferences

        ------
        mFilterShow = (Preference)findPreference(KEY_FILTER_SHOW);

        ------
        // Set the click listener for  Show Filter options
        mFilterShow.setOnPreferenceClickListener(new OnPreferenceClickListener()
        {
            public boolean onPreferenceClick(Preference pref)
            {
                Context ctx = pref.getContext();
                PreferenceScreen screen =
                    pref.getPreferenceManager().createPreferenceScreen(ctx);
                CheckBoxPreference cb1 = new CheckBoxPreference(ctx);
                cb1.setTitle("This is cb1");
                cb1.setKey("cb1_key");
                cb1.setDefaultValue(false);
                screen.addPreference(cb1);
                return true;
            }

        }); 
```

我敢肯定，我做错了什么，或者我错过了什么，一定有一个简单的答案！请帮忙...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:47:56.220

好的，我自己解决了这个问题，通过一个迭代的过程！其他人可能会发现这很有用。

只需在 xml 中创建一个空的 PreferenceScreen：

```
 <PreferenceScreen android:title="Show filters for category"
            android:summary="Click to choose subjects to delete"
            android:key="filterShow">
        </PreferenceScreen> 
```

然后在代码中不需要 onClick 侦听器 - 屏幕的内容是在 onCreate 函数中创建的。实际上，由于在类别列表首选项（参见原始代码）中所做的选择更改时屏幕的内容需要更改，这需要进入一个单独的函数，该函数同时从 onCreate 和 onSharedPreferenceChanged 调用：

```
public static final String KEY_FILTER_SHOW = "filterShow";
...    
private PreferenceScreen mFilterShow;
...

// In onCreate:

    // Get a reference to the PreferenceScreen
    mFilterShow =
        (PreferenceScreen)getPreferenceScreen().findPreference(KEY_FILTER_SHOW);

    // Now the code to create the contents of the screen
    mFilterShow.removeAll();
    CheckBoxPreference cb1 = new CheckBoxPreference(this);
    cb1.setTitle("This is cb1");
    cb1.setKey("cb1_key");
    cb1.setDefaultValue(true);
    mFilterShow.addPreference(cb1); 
```

以上只是“概念证明”。它完全按照您的预期工作。在我的最终版本中，我将首先创建一个带有“新”的 CheckBoxPreferences 数组，然后在为每个类别选项设置屏幕内容时重新使用它们（更改标题和默认值），因为它会发生变化。每个类别所需的复选框数量可能不同 - 我将为所需的最大数量创建一个数组，然后在每种情况下添加我需要的数量。

# eclipse - Eclipse4.2 WTP 向导不会为 AXIS2-Tomcat Webservice 生成 WSDL 文件

> ID：12551857
> 
> 赞同：4
> 
> 时间：2012-09-23T11:15:14.527
> 
> 标签：eclipse, tomcat, axis2, eclipse-wtp

我已按照[教程](http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html)中的步骤创建 Web 服务。

一切正常，但没有生成 WSDL 文件！

我有一个动态 WebProject，我在其中创建了 Webservice.... 没有错误，但没有生成 wsdl 文件

之后我也无法使用 Eclipse 的axis2 codegen 插件生成wsdl 文件。我不断收到错误`class not found exception`

我的axis2 tomcat安装似乎工作正常 - 请参阅下面我的axis2幸福页面......

我已经在 Stack Overflow 中尝试了所有建议的解决方案，但没有成功！

我还能尝试什么让这个工作......

**我的配置是：**

面向 Web 开发人员的 Eclipse Java EE IDE。
版本：Juno 发布版本
ID：20120614-1722

Fedora 17x64
AXIS2 1.6.2
Tomcat 7

AXIS2 安装似乎很顺利：

```
Axis2 Happiness Page

Examining webapp configuration

Essential Components

Found Apache-Axis (org.apache.axis2.transport.http.AxisServlet) 
  at /home/pk/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyWebService/WEB-INF/lib/axis2-transport-http-1.6.2.jar
Found Jakarta-Commons Logging (org.apache.commons.logging.Log) 
  at /home/pk/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyWebService/WEB-INF/lib/commons-logging-1.1.1.jar
Found Streaming API for XML (javax.xml.stream.XMLStreamReader) 
  at an unknown location
Found Streaming API for XML implementation (org.codehaus.stax2.XMLStreamWriter2) 
  at /home/pk/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyWebService/WEB-INF/lib/wstx-asl-3.2.9.jar
The core axis2 libraries are present.

Note: Even if everything this page probes for is present, there is no guarantee your Axis Service will work, because there are many configuration options that we do not check for. These tests are necessary but not sufficient

Examining Version Service

Found Axis2 default Version service and Axis2 is working properly.
Now you can drop a service archive in axis2/WEB-INF/services. Following output was produced while invoking Axis2 version service

Hi - the Axis2 version is 1.6.2

Examining Application Server

Servlet version 3.0
Platform    Apache Tomcat/7.0.12
Examining System Properties

java.runtime.name   OpenJDK Runtime Environment 
sun.boot.library.path   /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.6.x86_64/jre/lib/amd64 
java.vm.version 23.2-b09 
shared.loader    
java.vm.vendor  Oracle Corporation 
java.vendor.url http: //java.oracle.com/ 
path.separator  :  
java.vm.name    OpenJDK 64-Bit Server VM 
tomcat.util.buf.StringCache.byte.enabled    true 
file.encoding.pkg   sun.io 
user.country    DE 
sun.java.launcher   SUN_STANDARD 
sun.os.patch.level  unknown 
java.vm.specification.name  Java Virtual Machine Specification 
user.dir    /home/pk/Documents 
java.runtime.version    1.7.0_06-icedtea-mockbuild_2012_08_31_14_28-b00 
java.awt.graphicsenv    sun.awt.X11GraphicsEnvironment 
java.endorsed.dirs  /home/pk/Tomcat70/endorsed 
os.arch amd64 
java.io.tmpdir  /tmp 
line.separator    
java.vm.specification.vendor    Oracle Corporation 
java.naming.factory.url.pkgs    org.apache.naming 
os.name Linux 
sun.jnu.encoding    UTF-8 
java.library.path   /usr/java/packages/lib/amd64: /usr/lib64: /lib64: /lib: /usr/lib 
tomcat.util.scan.DefaultJarScanner.jarsToSkip   bootstrap.jar,commons-daemon.jar,tomcat-juli.jar,annotations-api.jar,el-api.jar,jsp-api.jar,servlet-api.jar,catalina.jar,catalina-ant.jar,catalina-ha.jar,catalina-tribes.jar,jasper.jar,jasper-el.jar,ecj-*.jar,tomcat-api.jar,tomcat-util.jar,tomcat-coyote.jar,tomcat-dbcp.jar,tomcat-i18n-en.jar,tomcat-i18n-es.jar,tomcat-i18n-fr.jar,tomcat-i18n-ja.jar,commons-beanutils*.jar,commons-collections*.jar,commons-dbcp*.jar,commons-digester*.jar,commons-fileupload*.jar,commons-logging*.jar,commons-pool*.jar,ant.jar,jmx.jar,jmx-tools.jar,xercesImpl.jar,xmlParserAPIs.jar,xml-apis.jar,dnsns.jar,ldapsec.jar,localedata.jar,sunjce_provider.jar,sunpkcs11.jar,tools.jar,apple_provider.jar,AppleScriptEngine.jar,CoreAudio.jar,dns_sd.jar,j3daudio.jar,j3dcore.jar,j3dutils.jar,jai_core.jar,jai_codec.jar,mlibwrapper_jai.jar,MRJToolkit.jar,vecmath.jar 
java.specification.name Java Platform API Specification 
java.class.version  51.0 
sun.management.compiler HotSpot 64-Bit Tiered Compilers 
os.version  3.5.3-1.fc17.x86_64 
user.home   /home/pk 
user.timezone   Europe/Vienna 
catalina.useNaming  true 
java.awt.printerjob sun.print.PSPrinterJob 
java.specification.version  1.7 
file.encoding   UTF-8 
catalina.home   /home/pk/Tomcat70 
user.name   pk 
java.class.path /home/pk/Tomcat70/bin/bootstrap.jar: /home/pk/Tomcat70/bin/tomcat-juli.jar: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.6.x86_64/lib/tools.jar 
java.naming.factory.initial org.apache.naming.java.javaURLContextFactory 
package.definition  sun.,java.,org.apache.catalina.,org.apache.coyote.,org.apache.tomcat.,org.apache.jasper. 
java.vm.specification.version   1.7 
sun.arch.data.model 64 
java.home   /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.6.x86_64/jre 
sun.java.command    org.apache.catalina.startup.Bootstrap start 
java.specification.vendor   Oracle Corporation 
user.language   de 
awt.toolkit sun.awt.X11.XToolkit 
java.vm.info    mixed mode 
java.version    1.7.0_06-icedtea 
java.ext.dirs   /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.6.x86_64/jre/lib/ext: /usr/java/packages/lib/ext 
sun.boot.class.path /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.6.x86_64/jre/lib/resources.jar: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.6.x86_64/jre/lib/rt.jar: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.6.x86_64/jre/lib/sunrsasign.jar: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.6.x86_64/jre/lib/jsse.jar: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.6.x86_64/jre/lib/jce.jar: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.6.x86_64/jre/lib/charsets.jar: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.6.x86_64/jre/lib/netx.jar: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.6.x86_64/jre/lib/plugin.jar: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.6.x86_64/jre/lib/rhino.jar: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.6.x86_64/jre/lib/jfr.jar: /usr/lib/jvm/java-1.7.0-openjdk-1.7.0.6.x86_64/jre/classes 
java.vendor Oracle Corporation 
server.loader    
catalina.base   /home/pk/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0 
file.separator  / 
java.vendor.url.bug http: //bugreport.sun.com/bugreport/ 
common.loader   ${catalina.base}/lib,${catalina.base}/lib/*.jar,${catalina.home}/lib,${catalina.home}/lib/*.jar 
sun.cpu.endian  little 
sun.io.unicode.encoding UnicodeLittle 
wtp.deploy  /home/pk/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps 
package.access  sun.,org.apache.catalina.,org.apache.coyote.,org.apache.tomcat.,org.apache.jasper. 
sun.cpu.isalist 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T14:19:27.957

10 分钟前我遇到了同样的问题（几个小时）。我有一个动态 web 项目，我可以通过上下文菜单从 java 类创建 web 服务。该服务部署到我的本地 tomcat 安装（包含axis2），但没有创建wsdl。

但后来我右键单击我的项目并选择“运行方式”->“在服务器上运行”。现在它显示“Apache Software Foundation”页面。上面有一个“服务”链接。单击该链接后，它会显示一个“可用服务”页面，其中包含我部署的 Web 服务。然后我点击了我自己部署的 Web 服务，它显示了我正在搜索的 wsdl。网址类似于：

```
http://localhost:8080/test/services/myservice?wsdl 
```

“测试”是我的项目名称。wsdl 不在我的 Eclipse“WEB-INF/wsdl”文件夹中（就像我目前找到的每个教程一样）。但我只能通过上面的网址访问它。

# jquery - 基于实时媒体查询的 jQuery 变量

> ID：12551858
> 
> 赞同：0
> 
> 时间：2012-09-23T11:15:16.150
> 
> 标签：jquery, variables, navigation, live, media-queries

我正在创建一个基于 CSS3 媒体查询 ( `lessframework`) 具有响应式设计的网站。我正在使用的导航在悬停时显示下拉菜单，但是当屏幕调整大小并进入 iPad 或移动视图时，我需要将导航更改为`onclick`，目前这在刷新页面后有效，但在调整页面大小时不会立即生效.

我需要的是用 a`.live()`或其他东西更改代码，以便在调整窗口大小时不必刷新页面。

这是代码：

```
if ($('body').css('width') === '992px') {
    $('#nav li').hover(function () {
        //show its submenu
        $('ul.sub', this).stop().slideDown(100);
    }, function () {
        //hide its submenu
        $('ul.sub', this).stop().slideUp(100);
    });
    //sub sub menu
    $('#nav ul li').hover(function () {
        $('ul', this).stop().slideDown(100);

    }, function () {
        $('ul', this).stop().slideUp(100);
    });
} else {

    $("ul.sub2>li").click(function () {

        return false;
    });
    $("ul.sub>li").click(function () {

        return false;
    });
    $("ul.sub>li:has(ul.sub2)").click(function () {

        $('.sub2').slideUp();
        $("ul.sub2", this).slideDown();
        return false;
    });

    $("ul#nav>li:has(ul.sub)").click(function () {
        $('.sub').slideUp();
        $('.sub2').slideUp();
        $("ul.sub", this).slideDown();
    });

}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:02:13.767

Resize 是您应该在窗口对象上侦听的 jquery 事件，以便能够在窗口大小更改时执行操作。例如，如果宽度是“ipad 宽度与否”，您可以在窗口调整大小时更新变量存储。

```
var ipad_width = $(window).width() < 992; //ipad_width => true || false

$(window).on('resize', function () {
     ipad_width = $(window).width() < 992
}); 
```

为了避免每次调整浏览器大小时绑定越来越多的事件，我认为一个简单的解决方案是从一开始就绑定所有事件，并在绑定的函数中有一个 if 语句，应该只在 ipad 视图中执行或不在 ipad 中执行看法。举个例子：

```
$("ul.sub2>li").click(function () {
    if (ipad_width) {
        return false;
    }
}); 
```

和：

```
$('#nav li').hover(function () {
    if (!ipad_width) {
        //show its submenu
        $('ul.sub', this).stop().slideDown(100);
    }
}, function () {
    if (!ipad_width) {
        //hide its submenu
        $('ul.sub', this).stop().slideUp(100);
    }
}); 
```

# javascript - 递增表单元素的名称javascript

> ID：12551863
> 
> 赞同：0
> 
> 时间：2012-09-23T11:16:27.897
> 
> 标签：javascript, dom

我有一堆可以通过“添加字段”按钮连续添加的表单元素。现在我想给这些字段增加名称，例如

输入名称-xyz-1, 输入名称-xyz-2, ....

输入名称-abc-1，输入名称-abc-2，......

foo-1, foo-2, foo-3, ....

等等。

“添加字段”按钮调用一个名为 addField() 的函数，该函数操纵 dom 元素以复制节点。

我在为增量名称创建逻辑时遇到问题。你们能帮帮我吗？？

这是我正在处理的代码（表单元素是 laravel 生成的）

```
/*THE HTML*/
<section class="input">
        {{ Form::label('achievements', 'Achievements:') }}
        <input class="count" name="achievements-count" type="hidden" value="1">
        <p class="addedField input">
            {{ Form::input('input-name-xyz-1', $competition_games, Input::old('achievement-competition'), array('id' => 'achievement-competition')); }}
            {{ Form::select('input-name-abc-1', array('Year - Place'), Input::old('achievement-year'), array('id' => 'achievement-year')) }}
            {{ Form::select('foo-1',    array('Position', 'Gold' => 'Gold', 'Silver' => 'Silver', 'Bronze' => 'Bronze', 'Participant' => 'Participant'), Input::old('achievement-achieved'), array('id' => 'achievement-achieved')) }}
        </p>
        <a onclick="addField(this)">+</a>
    </section> 
```

和 javascript

```
function addField(elem){
    var parent = elem.parentNode;
    var addName = parent.id;
    var count = ++(parent.getElementsByClassName("count")[0].value);
    var lastNode = parent.getElementsByClassName("addedField")[count-2];
    var clone = lastNode.cloneNode(true); 
    var nodes = clone.childNodes;
    for(i=0; i<nodes.length-1; i++){
        nodes[i].value = "";
        nodes[i].name = //I need the logic right here//.
    }
    if(count == 2)
        clone.innerHTML += "<a class='removeLink' onClick='removeField(this)'>X</a>";
    parent.insertBefore(clone,elem);
} 
```

——问候，阿尤什·什雷斯塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T13:04:23.803

使用此函数增加字符串末尾的任何数字。

```
function incNumAtEnd(s) {
  return s.replace(/\d$/, function(match, ofs, str) {
    return (parseInt(match) + 1).toString();
  });
} 
```

这是您的代码中的用法。

```
nodes[i].name = incNumAtEnd(nodes[i].name); 
```

# iphone - UITableView 单元格从其他单元格中获取内容

> ID：12551864
> 
> 赞同：0
> 
> 时间：2012-09-23T11:16:33.270
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

我的`UITableView`单元格从其他单元格中获取内容（图像）。我不知道为什么会这样，但我确信我的错误是愚蠢的。在下图中，您可以看到它的外观。顶部的单元格从底部的单元格中获取图像（facebook 和 twitter 图标）。

这是我的**cellForRowAtIndexPath 代码：**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSDictionary *dictionary = [mainArray objectAtIndex:indexPath.section];
    NSArray *array1 = [dictionary objectForKey:@"stuff"];

    NSString *cellValue = [array1 objectAtIndex:indexPath.row];
    cell.textLabel.text = cellValue; // загаловок клетки
    cell.textLabel.font = [UIFont fontWithName:@"TrebuchetMS-Bold" size:16]; 
    cell.textLabel.textColor = [UIColor colorWithRed:145/256.0 green:0/256.0 blue:0/256.0 alpha:1.0];    
    cell.backgroundColor = [UIColor whiteColor];
    cell.selectionStyle = UITableViewCellSelectionStyleGray;
    cell.textLabel.textAlignment = UITextAlignmentLeft;

    if (indexPath.section == 0 && indexPath.row == 1)
    {
        if([[NSUserDefaults standardUserDefaults]boolForKey:@"password"] == YES)
        {
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
        }
    }

    switch(indexPath.section)
    {

        case 2:
        {
            cell.textLabel.textAlignment = UITextAlignmentCenter;
        }
        break;

        case 3:
        {
            if (indexPath.row == 0) 
                cell.imageView.image = [UIImage imageNamed:@"facebook"];
            else if (indexPath.row == 1)
                cell.imageView.image = [UIImage imageNamed:@"twitter"];
            else if (indexPath.row == 2)
                cell.imageView.image = [UIImage imageNamed:@"youtube"];
            else
                cell.imageView.image = [UIImage imageNamed:@"vk"];
        }
        break;
            default:
            break;
    }

    return cell;
} 
```

![在此处输入图像描述](../Images/9a395a31813cb1370dcb0edcf103eca7.png)

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:23:20.413

单元格被重复使用，因此当您不希望出现图像时，必须将单元格的 imageView 设置为 nil。尝试这个：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSDictionary *dictionary = [mainArray objectAtIndex:indexPath.section];
    NSArray *array1 = [dictionary objectForKey:@"stuff"];

    NSString *cellValue = [array1 objectAtIndex:indexPath.row];
    cell.textLabel.text = cellValue; // загаловок клетки
    cell.textLabel.font = [UIFont fontWithName:@"TrebuchetMS-Bold" size:16]; 
    cell.textLabel.textColor = [UIColor colorWithRed:145/256.0 green:0/256.0 blue:0/256.0 alpha:1.0];    
    cell.backgroundColor = [UIColor whiteColor];
    cell.selectionStyle = UITableViewCellSelectionStyleGray;
    cell.textLabel.textAlignment = UITextAlignmentLeft;
    cell.imageView.image = nil;

    if (indexPath.section == 0 && indexPath.row == 1)
    {
        if([[NSUserDefaults standardUserDefaults]boolForKey:@"password"] == YES)
        {
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
        }
    }

    switch(indexPath.section)
    {

        case 2:
        {
            cell.textLabel.textAlignment = UITextAlignmentCenter;
        }
        break;

        case 3:
        {
            if (indexPath.row == 0) 
                cell.imageView.image = [UIImage imageNamed:@"facebook"];
            else if (indexPath.row == 1)
                cell.imageView.image = [UIImage imageNamed:@"twitter"];
            else if (indexPath.row == 2)
                cell.imageView.image = [UIImage imageNamed:@"youtube"];
            else
                cell.imageView.image = [UIImage imageNamed:@"vk"];
        }
        break;
        default:
        break;
    }

    return cell;
} 
```

# html - Admob House Ads 插页式广告：如何将 html 广告扩展到全屏

> ID：12551867
> 
> 赞同：1
> 
> 时间：2012-09-23T11:16:47.907
> 
> 标签：html, admob, fullscreen, interstitial

我刚刚在我的应用中成功实施了插页式自家广告。我遇到的问题是关于我收到的全屏横幅的大小。

有人知道如何在 html 文档中指定以我的横幅填充屏幕吗？

任何用于插页式广告的 html 模板？

# version-control - 拉合并提交时忽略一个父级

> ID：12551871
> 
> 赞同：0
> 
> 时间：2012-09-23T11:18:02.537
> 
> 标签：version-control, mercurial

我想从远程存储库的某个分支中提取一组变更集。其中一个变更集是来自另一个分支的合并，我不想拉。但是，即使我指定了分支名称，它也会被拉取：

```
hg pull -r REV -b mybranch REMOTE_REPO 
```

有没有办法将此提交作为常规变更集拉取，而忽略其其他祖先？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T20:25:46.110

不，这是不可能的。所有变更集（无论是常规变更集还是合并变更集）都依赖于它们的祖先，不能孤立地拉取。这是 Mercurial 的基本设计决策。

过早合并会导致您描述的烦人情况-每个分支不再干净，并且如果不拉动其他东西就无法拉动。避免这种情况的最好方法是使用[rebase](http://mercurial.selenic.com/wiki/RebaseExtension)（如果开发是仅限本地的，因此可以进行 rebase）或简单地要求人们停止将不相关的东西混合在一起，直到您可以对需要合并的内容做出坚定的决定。

# emacs - Emacs：无法激活输入法

> ID：12551874
> 
> 赞同：2
> 
> 时间：2012-09-23T11:18:36.063
> 
> 标签：emacs

我的默认输入法一直是这样配置的：

（setq 默认输入方法“俄罗斯计算机”）

东西坏了，只要我按下 C-\，我得到的就是这条消息（在执行堆栈的顶部，如果我解释正确的话）：

激活输入法：无法激活输入法“俄罗斯计算机”

它过去可以毫无障碍地工作。据我所知，没有任何干预；我想得到一些线索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T23:52:02.983

Emacs 从名为“leim”（Emacs 输入方法库）的目录中加载它知道的输入方法。要加载的代码的位置应该类似于

```
/usr/share/emacs/<version>/leim/leim-list.el 
```

`load-path`（对于确切的位置，通过键入在变量中搜索包含单词“leim”的条目`C-h v load-path`。）

如果您检查该文件，您应该会看到一个条目

```
(register-input-method
 "russian-computer" "Russian" 'quail-use-package
 "RU" "ЙЦУКЕН Russian computer layout"
 "quail/cyrillic") 
```

它指的是“leim”目录的一个子目录，称为“quail”。

确保文件`leim-list.el`和子目录`quail`都存在于您的系统上。鹌鹑目录与 Emacs 源代码分开分发，因此如果您从源代码安装，请确保包含 leim-list 包。见这里（滚动到底部）：

[http://ftp.gnu.org/pub/gnu/emacs/](http://ftp.gnu.org/pub/gnu/emacs/)

如果 leim 目录为空，您可以考虑重新安装 emacs。

# javascript - Javascript 能以某种方式监视我的网站吗？

> ID：12551875
> 
> 赞同：-1
> 
> 时间：2012-09-23T11:18:40.110
> 
> 标签：javascript

如果我是恶意的（或恶意的和粗心的），我可以将一些 PHP 添加到我正在工作的网站（或我正在构建的后端 Web 应用程序）中，这些 PHP 可以将一些我无权拥有的数据发送到我的远程服务器。有很多方法可以实现这一目标。

我想知道：**Javascript 可以做类似的事情**吗？

例如，是否有可能通过使用一些 html/css/javascript Web 模板来进行间谍活动，该模板将披露来自（关于）我的网站的信息 - 将任何类型的信息从我的网站/Web 应用程序发送到恶意开发者的远程服务器？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:24:18.167

是的，当然您可以使用 javascript 将数据发送到其他服务器。您的 PHP 片段方法的不同之处仅在于它在客户端执行，在用户的应用程序视图中。因此，您只能泄露当前用户知道的数据，并且只能使用当前用户（及其凭据）的权限来破坏应用程序。

但是，与恶意 PHP 片段相比，检测 javascript 注入（也可能发生在客户端或传输过程中）会更困难。

# java - forward 和 sendRedirect 的区别

> ID：12551876
> 
> 赞同：1
> 
> 时间：2012-09-23T11:18:43.027
> 
> 标签：java, jsp

我在网上的一个面试问题上看到了这两个陈述：

```
 1.forward causes object stored in request as attributes to be lost;
 2.sendRedirect causes object stored in request as attributes to be lost; 
```

我现在确信第一个语句是错误的，因为使用 request 绝对是 forward 传递值的方式，但是我对 sendRedirect 感到困惑，从这个意义上说是正确的吗？专家能帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T11:24:29.830

与`forward`发生在服务器端的情况不同，它会`sendRedirect`导致浏览器向重定向位置发起新请求，这意味着第二条语句为真。

# forms - 如何使用 JQuery 表单插件从我的 php 脚本中获取回显值？

> ID：12551878
> 
> 赞同：0
> 
> 时间：2012-09-23T11:18:56.020
> 
> 标签：forms, jquery, jquery-plugins, file-upload

我习惯于使用 jquery ajax 成功函数来获取 php 脚本的回显消息，现在我使用一个插件，但我不知道如何使用它

我的做法是这样但绝对行不通应该怎么正确？它只是直接进入我的 php 脚本

```
$(function() {
        $('form').ajaxForm(function() { 
           success: function(data){
                $('.new-profile-pic').html(data);
           }
        }); 
    }); 
```

HTML：

```
<p class="new-profile-pic">
            <!--Image should be here-->
        </p>
    <form enctype="multipart/form-data" action="upload-image.php" method="post">
            <input type="hidden" name="MAX_FILE_SIZE" value="100000">
            <input class="profile-pic-name" name="uploadedfile" type="file">
            <input type="submit">
        </form> 
```

PHP：

```
 <?php
$target_path = "uploads/";
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo '<img alt="" src="'.$target_path.'">';
} else{
    echo "There was an error uploading the file, please try again!";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:37:49.163

您需要防止发生默认操作。

我相信这篇文章有你正在寻找的答案：

[如何使用 jquery（ajaxForm 插件）将表单提交到外部站点但不重新加载到其他页面？](https://stackoverflow.com/questions/1267556/how-do-i-submit-a-form-using-jquery-ajaxform-plugin-to-an-external-site-but-no)

您需要在提交事件上使用 .preventDefault() ，或者让它在表单提交时返回 false，例如：

```
<form enctype="multipart/form-data" action="upload-image.php" method="post" onsubmit="return false;"> 
```

# mobile - CELL-ID 是否存储在 HLR 数据库中，如何获取 Cell-Id 的位置

> ID：12551879
> 
> 赞同：0
> 
> 时间：2012-09-23T11:19:02.477
> 
> 标签：mobile, gsm, cellid

从归属位置寄存器中获取特定塔（小区ID）下的移动电话用户的当前列表是否容易，网络运营商或服务提供商是否具有将位置信息映射到特定小区（如纬度，经度）的映射。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-23T22:51:46.303

要从 HLR/VLR 获取手机的实际小区 ID - 您应该使用 SS7 信令命令：`sendRoutingInfoForSM`和`provideSubscriberInfo`

要获取小区 ID 纬度/经度 - 您可以使用[opencellid.org](http://opencellid.org/)或[locationapi.org等服务](http://locationapi.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T13:41:34.837

特别的人

您不会从 HLR 获得此信息。

显然，运营商知道他们自己的细胞在哪里，但它通常被认为是商业智能而不是公共信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-30T11:41:38.727

有一些商业和非商业蜂窝塔及其 GPS 位置列表，但这些信息可能不会实时更新，并且可能会因为 MNO 执行的持续运营任务（例如将蜂窝站移动到另一个位置、安装或停用它们）而误导您.

有几种方法可以获取手机号码的当前小区 ID，但都需要使用 SS7 协议套件或其他可用的专有接口与 MNO 的设备集成。

*   向 HLR 发送 AnyTimeInterrogation MAP 操作并处理其响应
*   对于 HLR 和 MSS 之间的所有 Sigtran 链路，通过 HLR 的 L3 交换机上的核心网络特定接口或端口镜像获取位置更新转储。
*   使用 MNO 现有的 SMLC 平台

但是仅仅建立最新的地理定位数据库是不够的。在任何情况下，您都需要定期获取 CELL ID/LAC/GPS 位置列表，作为您愿意工作的 MNO 的可导出转储。

# php - 如何从 MySQL 数据库中获取今天/昨天的数据？

> ID：12551883
> 
> 赞同：12
> 
> 时间：2012-09-23T11:19:28.233
> 
> 标签：php, mysql

我想从数据库中检索今天的数据，但我不知道该怎么做。我实际上想要获取不是过去 24 小时的数据，我只想要今天的数据（因此基于实际的服务器时间）。

我还想获取昨天的数据。谁能帮我怎么做？

示例代码：

```
"SELECT id FROM folk WHERE time = ???" 
```

先感谢您！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-23T11:23:04.487

我想你正在寻找这个：

```
"SELECT id FROM folk WHERE DATE(time) = CURDATE()" 
```

time 必须是表中包含对该行的引用的字段。

**更新**

要获得昨天的补充：

```
"SELECT id FROM folk WHERE DATE(time) = CURDATE() - 1" 
```

**更新 2**

要获得本月的所有新增内容：

```
"SELECT id FROM folk 
WHERE MONTH(time) = MONTH(NOW()) AND YEAR(time) = YEAR(NOW())" 
```

参考：[http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T11:25:03.210

```
SELECT id FROM folk WHERE DATE(time) = DATE(NOW());

SELECT id FROM folk WHERE DATE(time) = DATE(DATE_SUB(NOW(), INTERVAL 1 DAY)); 
```

前提是“时间”具有正确的日期时间类型

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T11:31:01.187

试试这样的>>

```
SELECT id from folk  WHERE DAY( date ) = EXTRACT(DAY from (NOW() - inTERVAL 
1 DAY ) ) 
```

请参阅此链接 [http://www.webmasterworld.com/forum112/278.htm](http://www.webmasterworld.com/forum112/278.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T11:23:39.853

当您使用时间戳时：

```
"SELECT id FROM folk WHERE time >= ".mktime(0, 0, 0) 
```

这将选择从今天开始的所有数据。

如果您想获取所有日期而不是今天，您会这样做

```
"SELECT id FROM folk WHERE time < ".mktime(0, 0, 0) 
```

要选择昨天的数据，您可以：

```
"SELECT id FROM folk WHERE time < ".mktime(0, 0, 0)." AND time >= ".mktime(0, 0, 0, date('m'), date('d')-1, date('Y')) 
```

如果您要使用 DATETIME，仅供参考，它将类似于：

```
"SELECT id FROM folk WHERE time >= '".date('Y-m-d').' 00:00:00."'" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-02T06:09:26.220

使用以下查询获取当前日期

```
SELECT * 
 FROM your_table_name 
WHERE DAY('.$colum_name.') = DAY("2018-05-02")'; 
```

# c++ - C++ 返回对临时对象的引用或将它们存储在对象中

> ID：12551884
> 
> 赞同：5
> 
> 时间：2012-09-23T11:19:29.500
> 
> 标签：c++, reference, return, temporary

考虑以下处理 const 引用的代码：

```
const int & func (const int &x)
{
    return x;
}

struct Foo {
    Foo (const int &x)
    : m_x(x) {}

    const int & getX ()
    { return m_x; }

    const int &m_x;
}; 
```

我想知道现在允许以下哪些（如果有）：

```
int x = func(int(7));
int y = Foo(int(7)).getX(); 
```

是否可以保证临时`int`对象在分配或使用之前仍然存在`getX`？

**更新**：所以看起来这是安全的 - 但究竟为什么呢？

1.  是因为临时对象递归地绑定到 const 引用并且只要对它们的绑定引用存在就保证存在？
2.  或者是因为它们保证在完整表达式的持续时间内存在？

考虑存储指针而不是引用的边缘情况：

```
struct Foo {
    Foo (const int &x)
    : m_x(&x) {}

    const int & getX ()
    { return *m_x; }

    const int *m_x;
};

int y = Foo(int(7)).getX(); 
```

似乎如果案例 1) 是正确的，这将不起作用。但如果情况 2) 是正确的，它会。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T11:27:47.273

两者都是安全的，因为您将值复制到`x`and`y`中。临时变量在完整表达式结束之前有效。

### 12.2 临时对象

> 4) 有两种情况，其中临时对象在与完整表达式结尾不同的点被销毁。第一个上下文是调用默认构造函数来初始化数组元素时。如果构造函数有一个或多个默认参数，则在默认参数表达式中创建的任何临时变量在从构造函数返回后立即被销毁。
> 
> 5）第二个上下文是引用绑定到临时的。引用绑定到的临时对象或作为引用绑定到的子对象的完整对象的临时对象将在引用的生命周期内持续存在，除非下面指定。临时绑定到构造函数的 ctor-initializer (12.6.2) 中的引用成员将持续存在，直到构造函数退出。临时绑定到函数调用 (5.2.2) 中的引用参数将一直持续到包含调用的完整表达式完成为止。在函数返回语句 (6.6.3) 中对返回值的临时绑定将持续存在，直到函数退出。在所有这些情况下，在初始化引用的表达式评估期间创建的临时对象，除了引用绑定到的临时对象，在创建它们的完整表达式结束时被销毁，并且以它们构建完成的相反顺序被销毁。如果引用绑定到的两个或多个临时对象的生命周期在同一点结束，则这些临时对象在该点以与它们的构造完成相反的顺序被销毁。此外，绑定到引用的临时对象的销毁应考虑具有静态或自动存储持续时间的对象的销毁顺序（3.7.1，3.7.2）；也就是说，如果obj1是在创建临时对象之前创建的具有静态或自动存储持续时间的对象，则临时对象应在obj1被销毁之前被销毁；如果 obj2 是在创建临时对象后创建的具有静态或自动存储持续时间的对象，obj2 销毁后，临时应销毁。[ 例子：

```
class C 
{ 
/ / ... 
public : 
    C(); 
    C(int ); 
    friend C operator +(const C&, const C&); 
    ~C(); 
}; 
C obj1 ; 
const C& cr = C (16)+ C (23); 
C obj2 ; 
```

> 表达式 C(16)+C(23) 创建了三个临时变量。第一个临时 T1 保存表达式 C(16) 的结果，第二个临时 T2 保存表达式 C(23) 的结果，第三个临时 T3 保存这两个表达式相加的结果。然后将临时 T3 绑定到参考 cr。未指定先创建 T1 还是 T2。在 T1 在 T2 之前创建的实现中，可以保证 T2 在 T1 之前被销毁。临时变量 T1 和 T2 绑定到 operator+ 的引用参数；这些临时对象在包含对 operator+ 的调用的完整表达式的末尾被销毁。绑定到引用 cr 的临时 T3 在 cr 的生命周期结束时，即程序结束时被销毁。此外，T3的销毁顺序考虑了其他具有静态存储时长的对象的销毁顺序。即因为obj1在T3之前构造，T3在obj2之前构造，所以保证obj2在T3之前销毁，T3在obj1之前销毁。—结束示例]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T11:28:49.593

两者都是安全的。临时对象可以绑定到`const`引用，并且它们会持续到绑定临时对象的表达式被执行。在这种情况下，您将它绑定到构造函数参数，并且它一直存在到构造函数的右大括号。

一个类似的现象是使用临时函数作为`const`引用的默认函数参数：

```
void foo(const someclass& bla = someclass()); // bind const ref with default constructed someclass 
```

# java - StringBuffer insert() 和 deleteCharAt() 方法如何工作

> ID：12551885
> 
> 赞同：1
> 
> 时间：2012-09-23T11:20:01.090
> 
> 标签：java, string, stringbuilder, stringbuffer

在 Java 中，有两种方法`StringBuffer()`或被`StringBuilder()`调用方法`insert()`，`deleteCharAt()`我很想进一步了解这两种特定方法是如何工作的。或者如何使用标准的 java String 方法进行编程。我认为它们是编写自己的非常简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T11:36:54.837

在 Sun 的实现中，这两种方法都委托给`StringBuffer`的父类`AbstractStringBuilder`：

```
public synchronized StringBuffer insert(int index, char str[], int offset,
                                        int len) 
{
    super.insert(index, str, offset, len);
    return this;
}

public synchronized StringBuffer deleteCharAt(int index) {
    super.deleteCharAt(index);
    return this;
} 
```

`AbstractStringBuffer`具有以下实现：

```
public AbstractStringBuilder insert(int index, char str[], int offset,
                                    int len)
{
    if ((index < 0) || (index > length()))
        throw new StringIndexOutOfBoundsException(index);
    if ((offset < 0) || (len < 0) || (offset > str.length - len))
        throw new StringIndexOutOfBoundsException(
            "offset " + offset + ", len " + len + ", str.length " 
            + str.length);
    int newCount = count + len;
    if (newCount > value.length)
        expandCapacity(newCount);
    System.arraycopy(value, index, value, index + len, count - index);
    System.arraycopy(str, offset, value, index, len);
    count = newCount;
    return this;
}

public AbstractStringBuilder deleteCharAt(int index) {
    if ((index < 0) || (index >= count))
        throw new StringIndexOutOfBoundsException(index);
    System.arraycopy(value, index+1, value, index, count-index-1);
    count--;
    return this;
} 
```

所以，没什么特别的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T11:37:14.463

`insert(…)`StringBuilder 和 StringBuffer的方法都使用简单的数组复制实现`AbstractStringBuilder.insert(int, String)`：

```
public AbstractStringBuilder insert(int offset, String str) {
    if ((offset < 0) || (offset > length()))
        throw new StringIndexOutOfBoundsException(offset);
    if (str == null)
        str = "null";
    int len = str.length();
    ensureCapacityInternal(count + len);
    System.arraycopy(value, offset, value, offset + len, count - offset);
    str.getChars(value, offset);
    count += len;
    return this;
} 
```

首先，它确保内部`char []`数组足够大以存储结果，然后使用给定的字符串将插入点之后的字符向右移动`System.arraycopy(…)`并覆盖从插入点开始的字符。

同样，`deleteCharAt(int)`StringBuilder 和 StringBuffer 的方法调用`AbstractStringBuilder.deleteCharAt(int)`：

```
public AbstractStringBuilder deleteCharAt(int index) {
    if ((index < 0) || (index >= count))
        throw new StringIndexOutOfBoundsException(index);
    System.arraycopy(value, index+1, value, index, count-index-1);
    count--;
    return this;
} 
```

使用`System.arraycopy(…)`相反的方法删除一个字符：这次删除点之后的字符向左移动一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T11:38:06.957

根据[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)，两个类对它们的方法都说了同样的话。Insert 根据输入将字符串插入到字符串中。CharArray 添加基于 CharArray 的字符串等。DeleteCharAt 删除字符串中某个部分的字符。

StringBuffer 快一点，但 StringBuilder 更新。[2](http://kaioa.com/node/59)

标准的 java String 方法不包含 deleteCharAt() 或 insert()（这就是 StringBuilder/Buffer 存在的原因），但您可能可以通过 substring() 找到解决方法。

是的，您可以自己编写方法。我会查看 JDK 中 StringBuilder 或 StringBuilder 的源代码。

# c# - MongoDB C#驱动多字段查询

> ID：12551886
> 
> 赞同：15
> 
> 时间：2012-09-23T11:20:06.940
> 
> 标签：c#, vb.net, mongodb, mongodb-.net-driver

使用 MongoDB C# 驱动程序如何在查询中包含多个字段（我使用 vb.net）

我知道该怎么做 (for `name1=value1`)

```
 Dim qry = Query.EQ("name1","value1") 
```

我怎样才能修改这个查询，所以我可以让它找到所有文档 where `name1=value1`和`name2=value2`？

（ 如同 ）

```
db.collection.find({"name1":"value1","name2":"value2"}) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-07-05T19:41:01.777

我想在不同的领域搜索文本，即使浪费了这么多时间，全文搜索也不适合我。所以我尝试了这个。

```
var filter = Builders<Book>.Filter.Or(
    Builders<Book>.Filter.Where(p=>p.Title.ToLower().Contains(queryText.ToLower())),
    Builders<Book>.Filter.Where(p => p.Publisher.ToLower().Contains(queryText.ToLower())),
    Builders<Book>.Filter.Where(p => p.Description.ToLower().Contains(queryText.ToLower()))
            );
List<Book> books = Collection.Find(filter).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:11:42.363

并且并不总是做你想做的事情（我发现在 and 之上进行非操作时就是这种情况）。您还可以创建一个新的 QueryDocument，如下所示。这与您正在寻找的完全一样。

```
 Query.Not(new QueryDocument { 
    { "Results.Instance", instance }, 
    { "Results.User", user.Email } })) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-23T05:57:51.893

您可以使用：

```
var arrayFilter = Builders<BsonDocument>.Filter.Eq("student_id", 10000) 
 & Builders<BsonDocument>.Filter.Eq("scores.type", "quiz"); 
```

参考：[https ://www.mongodb.com/blog/post/quick-start-csharp-and-mongodb--update-operation](https://www.mongodb.com/blog/post/quick-start-csharp-and-mongodb--update-operation)

# qt - 如何从列表视图中删除项目？

> ID：12551889
> 
> 赞同：1
> 
> 时间：2012-09-23T11:20:26.753
> 
> 标签：qt, qt4.7, qlistview, qlineedit

我有一个**QLineEdit**、 2 个**QPushButtons**（添加和删除按钮）和一个**QListView**。单击添加按钮时，我想将**QLineEdit 文本添加到 QListView 。**同样，如果单击删除按钮，我必须从**QListView中删除一个项目。**我正在使用**QStringListModel**将**QLineEdit**文本添加到**QListView**。但我不知道如何删除**QListView 项目**。我怎样才能做到这一点？请帮助..在此先感谢。

```
#ifndef  EXAMPLE_H
#define  EXAMPLE_H
#include <QWidget>
#include <QStringList>
#include <QStringListModel>

class EXAMPLE : public QWidget
{
    Q_OBJECT

 public:
     explicit EXAMPLE(QWidget *parent = 0);
     ~EXAMPLE();

 private slots:
      void on_addButton_released();
      void on_removeButon_released();

 private:
      Ui::EXAMPLE *ui;
      QStringList  stringList;
 };

 #endif // EXAMPLE_H

    EXAMPLE.CPP

    #include "EXAMPLE.h"
    #include <QStringListModel>

    EXAMPLE::EXAMPLE(QWidget *parent) :
        QWidget(parent),
        ui(new Ui::EXAMPLE)
    {
        ui->setupUi(this);
        ui->listView->setModel(new QStringListModel(stringList));
    }

    EXAMPLE::~EXAMPLE()
    {
        delete ui;
    }

    void EXAMPLE::on_addButton_released()
    {
        stringList.append(ui->lineEdit->text());
        ((QStringListModel*) ui->listView->model())->setStringList(stringList);
        ui->lineEdit->clear();
    }

    void EXAMPLE::on_removeButon_released()
    {

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T23:45:47.247

如果您的列表视图仅使用单一选择，则以下内容将起作用：

```
void EXAMPLE::on_removeButton_released()
{
   QModelIndexList selected = ui->listView->selectionModel()->selectedIndexes();
   if (!selected.isEmpty())
   {
      stringList.removeAt(selected.first().row()-i);
      ((QStringListModel*) ui->listView->model())->setStringList(stringList);
   }
} 
```

如果您的列表视图允许选择多个项目，那么您需要稍微复杂一些的东西：

```
void EXAMPLE::on_removeButton_released()
{
   QModelIndexList selected = ui->listView->selectionModel()->selectedIndexes();
   if (!selected.isEmpty())
   {
      qSort(selected);
      for (int i=0; i<selected.count(); ++i)
      {
         stringList.removeAt(selected.at(i).row()-i);
      }
      ((QStringListModel*) ui->listView->model())->setStringList(stringList);
   }
} 
```

还有一种方法可以直接从项目模型中删除项目（而不是将其从字符串列表中删除，然后在模型上设置字符串列表）。请参阅[QAbstractItemModel::removeRow](http://qt-project.org/doc/qt-4.8/qabstractitemmodel.html#removeRow)的文档。如果你走这条路，你添加项目的方法也需要改变。

# php - 混合 PDO 和 MySQL 函数？

> ID：12551891
> 
> 赞同：2
> 
> 时间：2012-09-23T11:20:38.720
> 
> 标签：php, mysql, pdo

在现有系统上，它使用旧的 MySQL 功能。我想将其全部替换为 PDO，但这需要很长时间和大量测试。

是否可以在现有系统上混合使用 PDO 和 MySQL 函数？比如新的pages/php文件会使用PDO……所有的旧文件暂时还是会使用旧的MySQL，会随着系统的不断更新慢慢替换掉。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T11:26:24.747

是的，同时使用两者完全没问题。但请记住，您需要[为任何一种类型建立单独的连接，](https://stackoverflow.com/questions/2316413/getting-a-php-pdo-connection-from-a-mysql-connect)并注意这种方法[产生的影响](https://stackoverflow.com/questions/1788238/mixing-old-mysql-with-pdo?rq=1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T11:32:24.460

我是新手，但我也遇到过这个问题。很多人觉得从`mysql_*`PDO 切换起来很麻烦。
在我的情况下，我使用一个单独`connection.php`的存储函数来连接到数据库并返回句柄

```
function connect() 
{ 
    $cn = mysql_connect("localhost","username","pass" );
    $select = mysql_select_db("dbname", $cn);
    return($cn);
}

//For PDO
function pdoconnect()
{
    $db="";
    try
    {
        $db=new PDO("mysql:host=localhost;dbname=dbname", "username", "pass");
        $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    }
    catch (PDOException $er)
    {
        print("errr".$er."<br />");
        return(1);
    }
    return($db);
} 
```

而对于我使用的旧功能`$cn=connect();`。
我换`$cn=pdoconnect();`了新的。

**这很有效，因为我也已经`connect.php`在旧文件中使用了。**

# python - WxPython：如何在固定时间内显示任何消息窗口，让它们自动消失

> ID：12551906
> 
> 赞同：1
> 
> 时间：2012-09-23T11:23:12.257
> 
> 标签：python, wxpython, python-2.7

我正在使用**python**和**Wxpython**为*GUI 工作*设计一个软件。我想在固定的时间内向用户显示一条消息，然后让它自动消失。我无法弄清楚如何做到这一点。请帮助...提前谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T14:54:27.583

您可以使用 wx.BusyInfo 或 wx.lib.agw.pybusyinfo。这是一个显示 3 秒非模态消息的示例。要摆脱消息框对话框，只需将其名称 ref 设置为 None。

```
import time

import wx
import wx.lib.agw.pybusyinfo as PBI

def showmsg():
    app = wx.App(redirect=False)
    msg = 'this is a test'
    title = 'Message!'
    d = PBI.PyBusyInfo(msg, title=title)
    return d    

if __name__ == '__main__':
    d = showmsg()
    time.sleep(3)
    d = None 
```

祝你好运，迈克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T12:16:57.530

像这样的东西应该工作：

```
import threading

msgbox = wx.MessageBox('Hey user, there is something I want to tell you!', 
                       'Alert', wx.ICON_EXCLAMATION | wx.STAY_ON_TOP)
threading.Timer(10.0, msgbox.EndModal).start() 
```

我现在没有机会测试它，但我认为重要的是总体思路。

# android - Android - 如何更新通知号码

> ID：12551908
> 
> 赞同：8
> 
> 时间：2012-09-23T11:23:20.723
> 
> 标签：android, notifications, updates

嗨，我想在一个视图中显示所有通知..并想更新状态栏中的通知数量...它更新所有信息但始终显示数字 1..请告诉我如何解决它...

```
@Override
public void onReceive(Context context, Intent intent)
{
    //Random randGen = new Random();
    //int notify_id = randGen.nextInt();
    NotificationManager notificationManager = (NotificationManager)
        context.getSystemService(Activity.NOTIFICATION_SERVICE);
    String title = intent.getStringExtra(TableUtils.KEY_TITLE);
    String occasion = intent.getStringExtra(TableUtils.KEY_OCCASION);
    Notification notification = 
        new Notification(R.drawable.icon, "Love Cardz" , 
                         System.currentTimeMillis());
    // notification.vibrate = new long[]{100,250,300,330,390,420,500};
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notification.number+=1;
    Intent intent1 = new Intent(context, ThemesBrowserActivity.class);
    PendingIntent activity = 
        PendingIntent.getActivity(context, 1 , intent1, 
                                  PendingIntent.FLAG_UPDATE_CURRENT);
    notification.setLatestEventInfo(context, occasion, title, activity);
    notificationManager.notify(1, notification);
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-17T03:41:18.433

您必须跟踪计数。您可以扩展 Application 类：

```
public class AppName extends Application {
    private static int pendingNotificationsCount = 0;

    @Override
    public void onCreate() {
        super.onCreate();
    }

    public static int getPendingNotificationsCount() {
        return pendingNotificationsCount;
    }

    public static void setPendingNotificationsCount(int pendingNotifications) {
        pendingNotificationsCount = pendingNotifications;
    }
} 
```

你应该修改onReceive：

```
@Override
public void onReceive(Context context, Intent intent) {
    ...
    int pendingNotificationsCount = AppName.getPendingNotificationsCount() + 1;
    AppName.setPendingNotificationsCount(pendingNotificationsCount);
    notification.number = pendingNotificationsCount;
    ...
} 
```

您可以在用户打开通知时重置计数：

```
AppName.setPendingNotificationsCount(0); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T16:16:37.707

这是我的代码，它有效。我只在旧的 Android 版本上进行了测试。我怀疑在较新的版本中，“数字”徽章已变得不可见，但我还没有机会对其进行测试。

```
void notifyMsgReceived(String senderName, int count) {
    int titleResId;
    String expandedText, sender;

    // Get the sender for the ticker text
    // i.e. "Message from <sender name>"
    if (senderName != null && TextUtils.isGraphic(senderName)) {
        sender = senderName;
    }
    else {
        // Use "unknown" if the sender is unidentifiable.
        sender = getString(R.string.unknown);
    }

    // Display the first line of the notification:
    // 1 new message: call name
    // more than 1 new message: <number of messages> + " new messages"
    if (count == 1) {
        titleResId = R.string.notif_oneMsgReceivedTitle;
        expandedText = sender;
    }
    else {
        titleResId = R.string.notif_missedCallsTitle;
        expandedText = getString(R.string.notif_messagesReceivedTitle, count);
    }

    // Create the target intent
    final Intent intent = new Intent(this, TargetActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    final PendingIntent pendingIntent =
        PendingIntent.getActivity(this, REQUEST_CODE_MSG_RECEIVED, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    // Build the notification
    Notification notif = new Notification(
        R.drawable.ic_notif_msg_received,  // icon
        getString(R.string.notif_msgReceivedTicker, sender), // tickerText
        System.currentTimeMillis()); // when
        notif.setLatestEventInfo(this, getText(titleResId), expandedText, pendingIntent);
    notif.number = count;
    notif.flags = Notification.FLAG_AUTO_CANCEL;

    // Show the notification
    mNotificationMgr.notify(NOTIF_MSG_RECEIVED, notif);
} 
```

稍后更新通知也很容易：您只需使用新值再次调用该方法。当且仅当创建通知时该数字大于零时，该数字才会显示在通知图标徽章中。

同样，如果您将数字设置为小于 1 的数字，则不会隐藏数字徽章（数字会隐藏）。也许在重新显示通知之前清除通知可以修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T19:13:32.873

您必须跟踪计数。您尝试在 notif.number 上执行的增量不起作用，因为该状态不可用（即 notif.number 始终为 0，然后您将其增加到 1）。跟踪应用程序中某处的数字（可能是共享首选项），并将其递增并存储在那里，然后当您构建通知时，设置

```
notif.number = myStoredValueForWhatShouldShowInNumber; 
```

试试看。

# c++ - 创建一个 Timer 类，我应该使用什么数据类型来保存值？(C/C++)

> ID：12551912
> 
> 赞同：0
> 
> 时间：2012-09-23T11:23:40.120
> 
> 标签：c++, types, timer, milliseconds

我正在创建一个简单的计时器类，它返回我，例如以毫秒为单位的当前时间。在 linux 上，我使用 gettimeofday。我想知道这个函数应该有什么返回类型。即 `double getMillis()`或`uint64_t getMillis()`等等......我会说`uint64_t`可以持有更大的值，因此推荐，虽然在谷歌搜索时我看到了很多不同的实现。

对此有何建议？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:29:56.387

我推荐的以毫秒为单位保存绝对时间戳的数据类型是 int64_t，主要是因为 time_t 是有符号的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T11:27:46.163

我会选择无符号整数类型，因为毫秒数是一个计数。使加法和减法在没有浮点数的情况下也可靠。我使用的大多数实现都有无符号整数类型。

# events - 复选框单元格事件

> ID：12551915
> 
> 赞同：1
> 
> 时间：2012-09-23T11:23:52.020
> 
> 标签：events, gwt, checkbox, celltable

GWT 2.4 我有`CheckBoxCell`一个`CellTable`. 选中/取消选中复选框后，更改事件会触发两次。我不知道为什么。任何帮助将不胜感激。

```
private void createTable() {

    // Create a CellTable with a key provider.
    final CellTable<Contact> table = new CellTable<Contact>(KEY_PROVIDER);

    // Add a checkbox column
    final CheckboxCell cbCell = new CheckboxCell();
    Column<Contact, Boolean> cbColumn = new Column<Contact, Boolean>(cbCell) {
        @Override
        public Boolean getValue(Contact object) {
            System.out.println("method getValue() - " + object.id + " - " + object.checked);
            return object.checked;
        }
    };

    cbColumn.setFieldUpdater(new FieldUpdater<Fieldupdater.Contact, Boolean>() {
        @Override
        public void update(int index, Contact object, Boolean value) {
            System.out.println("method update() - " + object.id + " - " + value);
        }
    });

    table.addColumn(cbColumn);

    // Push the data into the widget.
    table.setRowData(CONTACTS);

    // Add it to the root panel.
    RootPanel.get("table1").add(table);
} 
```

# bash - 交换不同长度字符串中特定位置的字符

> ID：12551917
> 
> 赞同：4
> 
> 时间：2012-09-23T11:23:55.223
> 
> 标签：bash, sed, character, swap

我一直在尝试学习 sed，我在这里找到的示例用于将日期从 05082012 交换到 20120805，我无法使其适应我当前的需要。

我需要将 IP 地址 10.4.13.22 转换为 nsupdate 脚本的反向查找 22.13.4.10。我最大的问题是有时每个八位字节都可以改变长度，例如 10.4.13.2 和 10.19.8.126

谢谢你的帮助！

```
echo 10.0.2.99 | sed 's/\(....\)\(....\)/\2\1/' 
```

这是我目前尝试过的，只是基于此处的另一个问题，但由于这些示例没有提供太多解释......意味着什么，我无法理解它的作用。

这是该命令 .2.910.09 的输出，我期待 99.2.0.10

直接，我想重新排列由“。”分隔的每个“部分”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T11:50:05.877

“反转” IPv4 地址的“蛮力”方法是：

```
sed 's/\([0-9]\+\)\.\([0-9]\+\)\.\([0-9]\+\)\.\([0-9]\+\)/\4.\3.\2.\1/g' 
```

或者，对于 GNU sed，

```
sed -r 's/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/\4.\3.\2.\1/g' 
```

# javascript - 捕获所有点击事件

> ID：12551920
> 
> 赞同：22
> 
> 时间：2012-09-23T11:24:29.653
> 
> 标签：javascript, events, capture

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-23T11:37:34.843

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-23T11:31:30.083

您可以使用 window.onclick 处理所有点击，然后使用 event.target 过滤

你问的例子：

```
<html>
<head>
<script type="text/javascript">
window.onclick = function(e) { alert(e.target);};
</script>
</head>
<body>
<a href="http://google.com">google</a>
<a href="http://yahoo.com">yahoo</a>
<a href="http://facebook.com">facebook</a>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-23T11:43:55.907

```
​window.onclick = function (e) {
    if (e.target.localName == 'a') {
        console.log('a tag clicked!');
    }
}​ 
```

***[工作演示。](http://jsfiddle.net/B72JJ/)***

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-23T11:48:27.577

您将事件委托给窗口然后检查“event.target”是否是链接的想法是一种方法（最好是document.body）。这里的问题是，如果您单击元素的子节点，它将不起作用。思考：

```
<a href="#"><b>I am bold</b></a> 
```

将`target`是`<b>`元素，而不是链接。**这意味着检查`e.target`将不起作用**。因此，您必须爬上所有 dom 树以检查单击的元素是否是元素的后代`<a>`。

另一种在每次点击时需要较少计算但初始化成本更高的方法是获取所有`<a>`标签并在循环中附加您的事件：

```
var links = Array.prototype.slice.call(
    document.getElementsByTagName('a')
);

var count = links.length;
for(var i = 0; i < count; i++) {
    links[i].addEventListener('click', function(e) {
        //your code here
    });
} 
```

（PS：为什么我要把 HTMLCollection 转换成数组？[这里是答案。](http://www.youtube.com/watch?v=mHtdZgou0qU&feature=player_detailpage#t=1561s)）

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-09-30T14:08:20.070

您需要考虑到链接可以与其他元素嵌套，并希望遍历树回到“a”元素。这对我有用：

```
window.onclick = function(e) {
  var node = e.target;
  while (node != undefined && node.localName != 'a') {
    node = node.parentNode;
  }
  if (node != undefined) {
    console.log(node.href);
    /* Your link handler here */
    return false;  // stop handling the click
  } else {
    return true;  // handle other clicks
  }
} 
```

参见例如[https://jsfiddle.net/hnmdijkema/nn5akf3b/6/](https://jsfiddle.net/hnmdijkema/nn5akf3b/6/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-23T11:27:18.307

尝试 jQuery 和

```
$('a').click(function(event) { *your code here* }); 
```

在此函数中，您可以通过以下方式提取 href 值：

```
$(this).attr('href') 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-09-23T11:46:47.927

你也可以尝试使用这个：

```
var forEach = Array.prototype.forEach;
var links = document.getElementsByTagName('a');
forEach.call(links, function (link) {
    link.onclick = function () {
        console.log('Clicked');
    }

}); 
```

它有效，我刚刚测试过！

工作演示：http: [//jsfiddle.net/CR7Sz/](http://jsfiddle.net/CR7Sz/)

在您提到的评论中的某个地方，您想要获得“href”值，您可以这样做：

```
var forEach = Array.prototype.forEach;
var links = document.getElementsByTagName('a');
forEach.call(links, function (link) {
    link.onclick = function () {
        console.log(link.href); //use link.href for the value
    }

}); 
```

演示：http: [//jsfiddle.net/CR7Sz/1/](http://jsfiddle.net/CR7Sz/1/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-01-07T11:33:57.303

一些公认的答案不适用于嵌套元素，例如： `<a href="..."><font><u>link</u></font></a>`

大多数情况都有一个基本的解决方案：```

```
var links = document.getElementsByTagName('a');
for(var i in links)
{
    links[i].onclick = function(e){
        e.preventDefault();
        var href = this.href;
        // ... do what you need here.
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-06T14:00:09.093

我想这个简单的代码将适用于 jquery。

```
 $("a").click(function(){
    alert($(this).attr('href'));
}); 
```

没有 JQuery：

```
window.onclick = function(e) { 
if(e.target.localName=='a')
    alert(e.target);
}; 
```

以上将产生相同的结果。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-03T16:13:18.803

如果有人正在寻找打字版本（TypeScript，使用 Kooilnc 的答案），这里是：

```
document.addEventListener("click", (e: Event) => {
    if(!e.target) { return; }
    if(!(e.target instanceof Element)) { return; }

    const origin = e.target.closest("a");
    if(!origin || !origin.href) { return; }

    console.log(`You clicked ${origin.href}`);
}); 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-09-23T11:34:16.750

非常简单 ：

```
document.getElementById("YOUR_ID").onclick = function (e) {...} 
```

选择器是您要选择的内容，因此假设您有调用按钮

```
<a href="#" id="button1">Button1</a> 
```

捕获这一点的代码是：

```
document.getElementById("button1").onclick = function (e) { alert('button1 clicked'); } 
```

希望有帮助。

# rake - Nant/CruiseControl/Teamcity 的区别

> ID：12551922
> 
> 赞同：1
> 
> 时间：2012-09-23T11:25:04.767
> 
> 标签：rake, teamcity, cruisecontrol.net, nant

我花了几天时间浏览了很多网站并阅读了有关 Nant 、 Rake 等的信息。

请原谅我的菜鸟问题，但我仍然找不到 Nant 和 CruiseControl 之间的区别。据我所知，Nant 可以自动构建、运行测试。那么 Cruisecontrol 有什么额外的功能呢？

还提到了 Teamcity 。从文档中我也可以看到它可以进行构建，但它也可以使用 Nant，但我不明白为什么它需要使用 Nant，因为它可以自己进行构建

我基本上是在尝试通过在我的工作场所引入自动化构建来遵循正确的软件实践

感谢所有帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-23T21:13:45.167

Nant 本身可以进行构建和测试，但它需要通过其他一些机制启动，例如 Windows 计划作业。只有在源代码更改时才启动构建的能力，至少在没有大量额外脚本的情况下。

Nant 本身只是一个脚本运行程序，而不是调度程序——它需要一些其他软件（或手动用户操作）来启动它。

CruiseControl 或 TeamCity 等持续集成 (CI) 工具提供对源代码控制的监控，以启动构建过程以及其他功能。构建本身可以是单个 nant 脚本，它按照您的建议运行构建和测试，或者可以使用内置于 CI 服务器的一系列任务来完成构建。不同之处不在于构建是如何完成的，而在于它们是如何启动和报告的。

CI 服务器通常还提供基于 Web 的构建运行和单元测试详细信息的报告。

总之，Ci 工具除了提供构建过程的脚本之外，还提供监控、调度和报告功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T21:27:54.417

Nant 是一种脚本语言 CruiseControl 是一款免费的持续集成工具 Teamcity 中的另一个持续集成工具，

问候，

# java - 具有滚动/固定标题行的 ListView

> ID：12551926
> 
> 赞同：1
> 
> 时间：2012-09-23T11:25:38.250
> 
> 标签：java, android

在 Android 中，我想要一个 ListView 控件来列出各种类别的数据。我想要每个类别的标题/特殊行。

我也希望它在滚动该类别时将标题行固定为第一行。当滚动到下一个类别时，新的标题得到固定，前一个只是滚动到屏幕外。

下面显示了一个简单的示例。Header 1 是固定的，直到我们到达 Header 2，然后它取代了 Header 1，依此类推。

我无法找到解决方案，因为我不确定该怎么称呼它。任何关于解决方案的想法将不胜感激。谢谢。

```
----------------------------
Header 1
----------------------------
H1-Item
H1-Item
H1-Item
H1-Item
H1-Item
H1-Item
----------------------------
Header 2
----------------------------
H2-Item
H2-Item
H2-Item
H2-Item
----------------------------
Header 3
----------------------------
H3-Item
H3-Item 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T11:29:39.647

您可能想看看[android-section-list](http://code.google.com/p/android-section-list/)项目，这似乎正是您想要在这里实现的目标。

# mysql - mysql：如果存在则更新，否则插入并在这两种情况下都返回id

> ID：12551927
> 
> 赞同：0
> 
> 时间：2012-09-23T11:25:39.700
> 
> 标签：mysql, sql

我知道这个问题已经被问过很多次了，我已经检查了大部分问题，但还没有找到适合我问题的答案。

我有一张桌子：

```
CREATE TABLE `users` (                                   
      `Id` int(11) NOT NULL AUTO_INCREMENT,                  
      `Name` varchar(50) NOT NULL,                           
      `Email` varchar(50) NOT NULL,                                            
      `Added_Date` date DEFAULT NULL,                                             
      PRIMARY KEY (`Id`,`Email`)                             
    ) 
```

我将从屏幕向用户询问他们的朋友`Name`和`EmailId`他们的朋友在此表中插入记录。

我想要做的只是检查电子邮件 ID，如果我的用户表中存在相同的电子邮件 ID，然后更新`name`输入。否则插入一条新记录。在这两种情况下，我都想要已插入或更新的记录的 userId。

听起来很简单！

但我试过了`Replace`，`Insert.. on duplicate key update`但`insert where not exists`没有一个对我有用。这是我到目前为止所尝试的：

**代替**

```
REPLACE INTO Users SET email = 'a@d.c'; 
```

但这将继续每次插入新记录，因为`name`未检查。不确定我是否正确使用它。

**插入 .. 重复密钥更新**

```
insert into Users (id, Name, Email, Added_date) values (null, 'ABCD', 'adb@di.co',current_date) on duplicate key update Name='XYZ'; 
```

这不会起作用，因为表的主键是 (id 和 emailid) 的组合，并且由于 ID 是自动递增的，所以它每次都会插入一条新记录。

我知道我可以编写一个`update`查询来检查是否有任何具有特定 email_id 的记录，如果是，那么它将被更新，否则我将`insert`创建一个新记录。我可以使用`$userId = mysql_insert_id();`. 但是在更新查询的情况下如何获取 ID？

我相信必须有比分别编写更新和插入查询更好的方法来做这件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T12:07:27.200

主键应仅在 Users.Id 上设置，因为电子邮件只需使其唯一

```
CREATE TABLE `users` (                                   
  `Id` int(11) NOT NULL AUTO_INCREMENT,                  
  `Name` varchar(50) NOT NULL,                           
  `Email` varchar(50) NOT NULL,                                            
  `Added_Date` date DEFAULT NULL,                                             
  PRIMARY KEY (Id),
  UNIQUE KEY Email (Email)                            
) 
```

您的查询将是这样的，请注意您可以使用 VALUES() 函数来检索新值。

```
Insert into Users (Id, Name, Email, Added_date) 
values (null, 'ABCDe','adb@di.co',current_date) 
on duplicate key update Name=VALUES(Name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T11:31:38.250

我没有把你的问题读到最后，但现在我可以说表模式不正确。主键必须定义为 PRIMARY KEY ( `Id`)，email 必须定义为 Email varchar(50) UNIQUE

# c# - Rx 多个异步操作

> ID：12551929
> 
> 赞同：1
> 
> 时间：2012-09-23T11:26:01.620
> 
> 标签：c#, asynchronous, system.reactive

我正在阅读 Rx 并通过一些示例。我正在尝试实现这一点：

```
List<A> LIstA {get;set;}
List<B> LIstB {get;set;}
List<C> LIstC {get;set;}

private void GetItems()
{
    ListA = GetItemsA();
    ListB = GetItemsB();
    ListC = GetItemsC();
} 
```

所有这些代码都在主线程上执行。我删除了主线程 (UI) 使用此列表的代码。我想要的是以异步方式获取这些项目，但我需要以预定义的顺序获取结果。

以异步方式运行它没有问题，但我在以预定义的顺序获取结果时遇到问题。因此，我运行代码，显示 UI，几秒钟后`ListA`填充，然后`ListB`，最后`ListC`，仅以这个预定义的顺序。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T13:09:24.770

`Task`或者`async`可能比 Rx 更适合这个模型。

尽管如此，根据我对您的问题的推断，在前一个完成后使用 concat 连接一个 observable：

```
 Func<Action, IObservable<Unit>> fetch = 
            action => Observable.Defer(() => Observable.Start(action));

        fetch(() => A())
        .Concat(fetch(() => B()))
        .Concat(fetch(() => C()))
        .Subscribe(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T00:27:40.750

这对你有用吗？

```
GetItemsA().ToObservable()
    .Zip(GetItemsB().ToObservable(), (a, b) => new { a, b, })
    .Zip(GetItemsC().ToObservable(), (ab, c) => new { ab.a, ab.b, c, })
    .Subscribe(abc =>
    {
        ListA = abc.a;
        ListB = abc.b;
        ListC = abc.c;
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T06:28:22.090

根据您的问题，您有三个不同类型的集合。显然，一个人不能连接三个不同类型的流。我认为@Enigmativity's 是最正确的，但为了使其工作，您需要将其更改为：

```
var uiScheduler = new SynchronizationContextScheduler(SynchronizationContext.Current);
ListA = new ListA();
ListB = new ListB();
ListC = new ListC();

GetItemsA().ToObservable()
.Zip(GetItemsB().ToObservable(), (a, b) => new { a, b, })
.Zip(GetItemsC().ToObservable(), (ab, c) => new { ab.a, ab.b, c, })
.ObserveOn(uiScheduler)
.Subscribe(abc =>
{
    ListA.Add(abc.a);
    ListB.Add(abc.b);
    ListC.Add(abc.c);
}); 
```

另一种解决方案可能是：

```
var a = Observable.Start(() => GetListA());
var b = Observable.Start(() => GetListB());
var c = Observable.Start(() => GetListC());

a.Zip(b, c, (x, y, z) => Tuple.Create(x, y, z))
    .ObserveOn(uiScheduler)
    .Subscribe(result =>
                 {
                   ListA = result.Item1;
                   ListB = result.Item2;
                   ListC = result.Item3;
                 }); 
```

我希望在创建集合后立即收集：

```
 a.ObserveOn(uiScheduler)
    .Do(l => ListA = l)
    .Zip(b, (la, lb) => lb)
    .ObserveOn(uiScheduler)
    .Do(l => ListB = l)
    .Zip(c, (lb, lc) => lc)
    .ObserveOn(uiScheduler)
    .Subscribe(listc => ListC = listc); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-21T20:33:16.633

您也可以使用动态...：

```
void Main()
{
    var q =
    from @as in Observable.Start(() => GetItemsA())
    from bs in Observable.Start(() => GetItemsB())
    from cs in Observable.Start(() => GetItemsC())
    select @as.Cast<dynamic>().Concat(bs.Cast<dynamic>()).Concat(cs.Cast<dynamic>());   
    q.Subscribe(t => t.Dump()); 
}

// Define other methods and classes here
private IEnumerable<int> GetItemsA() {
    yield return 1;
    Thread.Sleep(500);
    yield return 2;
    yield return 3;
}
private IEnumerable<string> GetItemsB() {
    yield return "A";
    yield return "B";
    Thread.Sleep(1000);
    yield return "C";
}
private List<float> GetItemsC() {
    return new List<float> { 1.1f, 2.2f, 3.3f };
} 
```

# nlp - 我如何标记字符串？

> ID：12551933
> 
> 赞同：0
> 
> 时间：2012-09-23T11:26:23.693
> 
> 标签：nlp, tokenize

我希望我的程序知道字符串是否是名词、动词、形容词等，并且需要对其进行标记，但我该怎么做呢？

我需要一个数据库来定义单词吗？使用自由上下文语法？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:31:31.450

它比这复杂得多。

您的直接问题的答案是两者兼而有之。你们都查找单词以查看它们是什么词性，并分析句子结构以确定词性。

查看[http://wordnet.princeton.edu/](http://wordnet.princeton.edu/)了解如何查找词性。

我推荐 GATE/Annie 作为 NLP 的开源框架。Apache 有 UIMA，虽然我没有使用过它。我相信项目之间存在一些兼容性。

# arrays - Turbo C 中的字符数组

> ID：12551937
> 
> 赞同：0
> 
> 时间：2012-09-23T11:26:58.727
> 
> 标签：arrays, char, turbo-c

好的，所以我有这个代码

```
char from;
clrscr();
printf("Enter: ");
scanf("%s", &from);
if(from == 'a' || from == 'A') {
    // blah blah code
} 
```

在条件上是否有其他方法或捷径而不是使用||？

谢谢。:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:33:54.213

假设 ASCII 字符集，您可以屏蔽在`'A'`和之间变化的位`'a'`：

```
if ((from | 0x20) == 'a') … 
```

`toupper`不过，它更清晰，（严格来说）更便携。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T11:28:48.787

您可以使用`toupper`功能： [http ://www.ousob.com/ng/turboc/ng61ac1.php](http://www.ousob.com/ng/turboc/ng61ac1.php)

```
if(toupper(from) == 'A') {
    // blah
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T11:32:04.823

'||' 表示“或”不知道是否还有其他捷径，但您所做的是正确的。有 '&&' 表示 'and'，当你想在同一个条件 if 中满足两个条件时，可以使用这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T11:36:11.247

检查这个：

```
#include<stdio.h>
#include<ctype.h>

 char from;
    clrscr();
    printf("Enter: ");
    scanf("%c", &from);
    if(toupper(from)=='A') {
        // blah blah code
    } 
```

# wpf - WPF Datagrid 第一行带有组合框

> ID：12551945
> 
> 赞同：0
> 
> 时间：2012-09-23T11:27:53.653
> 
> 标签：wpf, datagrid, combobox, styles

我正在为从 csv 文件导入数据创建视图。我必须将列从 csv 链接到我的对象。

这个想法是我有带有标题的数据网格（csv文件的第一行是标题名称），第一行应该是我的对象属性的组合框。

如何将数据网格的第一行设置为组合框，将其他行设置为文本框？

谢谢， 雅库布

# javascript - textarea 中的选项卡导致在歌剧中失去焦点

> ID：12551947
> 
> 赞同：1
> 
> 时间：2012-09-23T11:28:12.540
> 
> 标签：javascript, html, textarea, opera

因此，我对文本区域中的 tab 键进行了 javascript 处理（插入选项卡）。在大多数情况下，它是一种魅力。

问题： Opera：如果用户按住 tab 键（tab 插入非常快），textarea 元素失去焦点并且处理过程不起作用。正如您在下面的示例中看到的，焦点在 2 个按钮和文本区域之间不断变化。

代码：

```
<html>
<head>
<script type="text/javascript">
function onkd(e) {
    var keyCode = 0;
    if (document.selection) {
        keyCode = e.keyCode;
    } else {
        keyCode = e.which;
    }

    if (keyCode == 9) {
        if (e.preventDefault) {
            e.preventDefault();
            e.stopPropagation();
        } else {
            e.returnValue = false;
            e.cancelBubble = true
        }

        var o = document.getElementById("texta");
        if (o.setSelectionRange) {
            var sS = o.selectionStart;
            var sE = o.selectionEnd;
            o.value = o.value.substring(0, sS) + "\t" + o.value.substr(sE);
            o.setSelectionRange(sS + 1, sS + 1);
            o.focus();
        } else if (o.createTextRange) {
            document.selection.createRange().text = "\t";
        }
    }
}

</script>
</head>
<body>
<p><button type="submit">dummy button1</button></p>
<textarea id="texta" style="width: 400px; height: 400px; overflow: hidden; white-space: pre;" onkeydown="onkd(event);">hahaha huhuhu hohoho hihihi hehehe</textarea>
<p><button type="submit">dummy button2</button></p>
</body>
</html> 
```

更新 jsfiddle：http: [//jsfiddle.net/JEzxx/2/](http://jsfiddle.net/JEzxx/2/)

如果在 onkeyup 事件中按下 tab 键，然后在 onblur 中按下，我可以捕捉到：

```
onblur="if (bIsTabPressed) document.getElementById('texta').focus(); return false;" 
```

但这并不能解决问题。我不明白为什么当连续按下制表键时，元素首先在歌剧中失去焦点。

**问题似乎存在，因为opera没有在keydown事件中提供preventdefault** ...正在调查解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:36:55.197

1.  **对于 Chrome：**文本编辑器压缩前一行的空白，所以使用`<textarea wrap="off" ...`
2.  **对于 Opera：**我不知道，但是您可以使用相同的 keyCode 处理 onBlur() 并重新聚焦 textarea。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T13:57:39.083

好吧，opera 似乎是一个有缺陷的软件，preventdefault 仅在 keypress 事件中有效。所以我这样解决了：

```
function onkp(e) {
    if (e.keyCode == 9 && navigator.appName == "Opera") {
        e.preventDefault();
        e.stopPropagation();
    }
} 
```

但是，它的副作用是无法在歌剧中通过按住它来插入连续的标签。

# mysql - mysql检查其他时间之间的时间

> ID：12551950
> 
> 赞同：1
> 
> 时间：2012-09-23T11:29:02.917
> 
> 标签：mysql, sql

我正在做一些调度程序的工作。其中一项功能是将电视节目插入调度程序。在服务器端，这通过发送带有请求的开始时间的程序 id 来工作，即“在 2012 年 9 月 17 日 10:49 将程序 id 123 插入日程表”。但是节目必须插入到块中，即从晚上10点到12点的文化节目。所以在插入之前我们需要检查一个块是否存在，用这条sql

```
SELECT t1.schedblockid, t1.blockname,
  t1.blockstart, t1.blockend, t2.scheduledate
FROM scheduleblocks t1, schedule t2
WHERE t1.schedblockid = t2.scheduleblock 
  AND t2.scheduledate = '$_GET[scheddate]'
AND '$_GET[schedtime]' >= blockstart 
AND '$_GET[schedtime]' <= blockend 
```

它简单且有效，在上面的示例中，它检查 2012 年 9 月 17 日的时间表中是否存在一个块，其中 10.49 可以适合。我们现在遇到的问题是我们正在尝试引入跨日块，例如从晚上 11 点到凌晨 2 点的块。但是使用上面的 sql 代码，例如在搜索时间 23:51 时，它不会找到插槽 23:00-02:00。

继承人表定义。

```
CREATE TABLE IF NOT EXISTS `schedule` (
  `scheduleid` int(11) NOT NULL AUTO_INCREMENT,
  `scheduledate` varchar(20) NOT NULL,
  `scheduleblock` int(11) NOT NULL,
  PRIMARY KEY (`scheduleid`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=43 ;

CREATE TABLE IF NOT EXISTS `scheduleblocks` (
  `schedblockid` int(11) NOT NULL AUTO_INCREMENT,
  `blockname` varchar(100) NOT NULL,
  `blockstart` varchar(10) NOT NULL,
  `blockend` varchar(10) NOT NULL,
  `linked` int(11) NOT NULL,
  PRIMARY KEY (`schedblockid`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=44 ; 
```

这些表只使用 varchars 而不是内置的日期时间类型，我想这就是我们需要更改的内容，但不确定如何/在哪里？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T13:35:30.090

将表结构更改为：

```
CREATE TABLE IF NOT EXISTS `schedule` (
  `scheduleid` int(11) NOT NULL AUTO_INCREMENT,
  `scheduledate` DATE NOT NULL,
  `scheduleblock` TIME NOT NULL,
  PRIMARY KEY (`scheduleid`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=43 ;

CREATE TABLE IF NOT EXISTS `scheduleblocks` (
  `schedblockid` int(11) NOT NULL AUTO_INCREMENT,
  `blockname` varchar(100) NOT NULL,
  `blockstart` TIME NOT NULL,
  `blockend` TIME NOT NULL,
  `linked` int(11) NOT NULL,
  PRIMARY KEY (`schedblockid`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=44 ; 
```

`ALTER`如果您不是从头开始，则需要您的桌子：

```
ALTER TABLE schedule CHANGE COLUMN `scheduledate` `scheduledate` DATE NOT NULL;
ALTER TABLE schedule CHANGE COLUMN `scheduleblock` `scheduleblock` TIME NOT NULL;
ALTER TABLE scheduleblocks CHANGE COLUMN `blockstart` `blockstart` TIME NOT NULL;
ALTER TABLE scheduleblocks CHANGE COLUMN `blockend` `blockend` TIME NOT NULL; 
```

# android-ndk - ndk 在主项目源代码树外构建库

> ID：12551951
> 
> 赞同：7
> 
> 时间：2012-09-23T11:29:04.193
> 
> 标签：android-ndk

我想使用 ndk 构建一个 3rd 方库 avahi。avahi 已经有 android 端口（带有有效的 Android.mk）。

我所做的：我已经成功创建了一个项目并将所有源代码复制到 jni/ 文件夹并运行 ndk-build。它构建 libavahi.so

我想做的事：我不想将所有源代码复制到 jni/ 文件夹中，而是将其存储在项目源代码树之外的文件夹中。我该怎么办？我查看了 NDK 文档/导入模块，但没有什么与我的情况相似。

ndk的新手，欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T16:09:09.917

你是对的，这不是*Import Module*的情况。您从本机代码引用**avihi**库的方式仍将是**LOCAL_SHARED_LIBRARIES**（请参阅 NDK 示例**[模块导出](http://mirror.yongbok.net/pub/pub/linux/android/repository/development/ndk/samples/module-exports/)**）。但是在您的`jni/Android.mk`文件中，您可以`include`对另一个文件使用命令。**此命令与C**`#include`中的语句非常相似。此文件不需要位于您的项目树中。采取相同的样本，它是如何工作的：

 **[来自 samples/module-exports/jni 的](http://mirror.yongbok.net/pub/pub/linux/android/repository/development/ndk/samples/module-exports/jni/Android.mk)原始Android.mk ：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := foo
LOCAL_SRC_FILES := foo/foo.c
LOCAL_CFLAGS := -DFOO=2
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/foo
LOCAL_EXPORT_CFLAGS := -DFOO=1
LOCAL_EXPORT_LDLIBS := -llog
include $(BUILD_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := bar
LOCAL_SRC_FILES := bar/bar.c
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/bar
LOCAL_STATIC_LIBRARIES := foo
include $(BUILD_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := zoo
LOCAL_SRC_FILES := zoo/zoo.c
LOCAL_SHARED_LIBRARIES := bar
include $(BUILD_SHARED_LIBRARY) 
```

更改后的文件如下所示：

```
ZOO_LOCAL_PATH := $(call my-dir)
include ~/projects/bar/jni/Android.mk
LOCAL_PATH := $(ZOO_LOCAL_PATH)

include $(CLEAR_VARS)
LOCAL_MODULE := zoo
LOCAL_SRC_FILES := zoo/zoo.c
LOCAL_SHARED_LIBRARIES := bar
include $(BUILD_SHARED_LIBRARY) 
```

而***外部***的bar/jni/Android.mk如下：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := foo
LOCAL_SRC_FILES := foo/foo.c
LOCAL_CFLAGS := -DFOO=2
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/foo
LOCAL_EXPORT_CFLAGS := -DFOO=1
LOCAL_EXPORT_LDLIBS := -llog
include $(BUILD_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := bar
LOCAL_SRC_FILES := bar/bar.c
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/bar
LOCAL_STATIC_LIBRARIES := foo
include $(BUILD_SHARED_LIBRARY) 
```

现在，文件 bar.c 和 foo.c 都可以保存在 zoo 项目的树之外！**

# php - 如何将这种类型的 XML 转换为 CSV

> ID：12551952
> 
> 赞同：2
> 
> 时间：2012-09-23T11:29:09.123
> 
> 标签：php, xml, csv, xml-parsing

我有这种类型的 XML 文件

文件部分示例：

```
<!-- language: lang-xml -->

<ponudba podjetje="SO d.o.o." velja_od="23.09.2012 @ 12:30:48">
    <artikel koda="LS593EAR" naziv="HP ENVY 17-2199e" kategorija="Prenosniki" podkategorija="Hewlett Packard (HP)" v_akciji="ne" kosovnost="več">
    <opis>
    HP ENVY 17-2199el, Intel Core i7-2630QM (2.0 GHz), 17.3'' FHD AG LED 3D, 8 GB DDR3 (2x 4 GB), 1 TB, BluRay, ATI Radeon HD6850 1024 MB, WiFi, Bluetooth, Webcam, 3D glasses, Microsoft Windows 7 Home Premium (64 bit)
    </opis>
    <opis_detail>
    HP ENVY 17-2199el, Intel Core i7-2630QM (2.0 GHz), 17.3'' FHD AG LED 3D, 8 GB DDR3 (2x 4 GB), 1 TB, BluRay, ATI Radeon HD6850 1024 MB, WiFi, Bluetooth, Webcam, 3D glasses, Microsoft Windows 7 Home Premium (64 bit)<br/><table> <col width="25%" /> <col /> <tbody> <tr> <th>Procesor</th> <td>Intel® Core™ i7-2630QM / 2.00 GHz / Quad-Core</td> </tr> <tr> <th>Delovni pomnilnik</th> <td>8 GB DDR3</td> </tr> <tr> <th>Trdi disk</th> <td>1 TB (1000 GB) / 5400 / SATA</td> </tr> <tr> <th>LCD zaslon</th> <td>43,9 cm (17,3'') Full HD HP Ultra BrightView Infinity Display (1920x1080)</td> </tr> <tr> <th>Grafična kartica</th> <td>AMD Radeon™ HD 6850 Graphics</td> </tr> <tr> <th>Optična enota</th> <td>SuperMulti DVD-RW Double Layer</td> </tr> <tr> <th>USB 2.0</th> <td>2x</td> </tr> <tr> <th>USB 3.0</th> <td>1x</td> </tr>    <tr> <th>eSATA</th> <td>da</td> </tr> <tr> <th>HDMI</th> <td>da</td> </tr> <tr> <th>WiFi</th> <td>da</td> </tr> <tr> <th>Bluetooth</th> <td>da</td> </tr> <tr> <th>WWAN</th> <td>ne</td> </tr> <tr> <th>Spletna kamera</th> <td>da</td> </tr> <tr> <th>Card Reader</th> <td>da</td> </tr> <tr> <th>Express Card</th> <td>ne</td> </tr> <tr> <th>TV kartica</th> <td>ne</td> </tr> <tr> <th>Finger Print</th> <td>ne</td> </tr> <tr> <th>Vhodne naprave</th> <td>brez</td> </tr>     <tr> <th>Operacijski sistem</th> <td>Microsoft Windows 7 Home Premium (64 bit)</td> </tr> <tr> <th>Država uvoza</th> <td>Italijanska tipkovnica (priložene SLO nalepke)</td> </tr>  <tr> <th>Stanje modela</th> <td>HP Renew</td> </tr>     </tbody> </table>
    </opis_detail>
    <garancija_v_mesecih>12</garancija_v_mesecih>
    <cena_v_EUR>1.049,00</cena_v_EUR>
    <proizvajalec>HP</proizvajalec>
    <stanje>na zalogi</stanje>
    <url_foto_artikla>
    http://www.so-doo.si/media/catalog/product/cache/1/image/265x/9df78eab33525d08d6e5fb8d27136e95/c/0/c02034964.jpg.hri_4.jpg
    </url_foto_artikla>
    <vec_fotk_artikla>
    <slika href="http://www.so-doo.si/media/catalog/product/c/0/c02034982.jpg.hri_4.jpg"/>
    <slika href="http://www.so-doo.si/media/catalog/product/c/0/c02034991.jpg.hri_4.jpg"/>
    </vec_fotk_artikla>
    <teza_artikla_v_kg>2.9000</teza_artikla_v_kg>
    </artikel> 
```

现在我尝试使用这种类型的代码将此 XML 文件转换为 CSV：

```
<?php

$filexml='so_feed.xml';
if (file_exists($filexml)) {
    $xml = simplexml_load_file($filexml);
$f = fopen('sofeed.csv', 'w');
foreach ($xml->naziv as $naziv) {
    fputcsv($f, get_object_vars($naziv),',','"');
}
fclose($f);
}
?>` 
```

其中 so_feed.xml 是输入 XML 文件，sofeed.csv 是输出 CSV 文件，字段“naziv”是我需要数据的节点。

但我只得到空的 csv 文件。一些帮助，好吗？:) 另外，当我使用“artikel”节点时，我没有得到全部信息，只是一部分:(

使用“artikel”数组时，除了“kode”和“naziv”之外，我得到了所有的英文信息，即“SKU”和“产品名称”，所以你知道这是最重要的部分，我无法得到它，我只得到单词“Array”而不是那些数据

这就是我的输出 CSV 的样子：

```
<!-- language: lang-csv -->

Array,"HP ENVY 17-2199el, Intel Core i7-2630QM (2.0 GHz), 17.3'' FHD AG LED 3D, 8 GB DDR3 (2x 4 GB), 1 TB, BluRay, ATI Radeon HD6850 1024 MB, WiFi, Bluetooth, Webcam, 3D glasses, Microsoft Windows 7 Home Premium (64 bit)","HP ENVY 17-2199el, Intel Core i7-2630QM (2.0 GHz), 17.3'' FHD AG LED 3D, 8 GB DDR3 (2x 4 GB), 1 TB, BluRay, ATI Radeon HD6850 1024 MB, WiFi, Bluetooth, Webcam, 3D glasses, Microsoft Windows 7 Home Premium (64 bit)<br/><table>
        <col width=""25%"" />
        <col />
        <tbody>
            <tr>
                <th>Procesor</th>
                <td>Intel® Core™ i7-2630QM / 2.00 GHz / Quad-Core</td>
            </tr>
            <tr>
                <th>Delovni pomnilnik</th>
                <td>8 GB DDR3</td>
            </tr>
            <tr>
                <th>Trdi disk</th>
                <td>1 TB (1000 GB) / 5400 / SATA</td>
            </tr>
            <tr>
                <th>LCD zaslon</th>
                <td>43,9 cm (17,3'') Full HD HP Ultra BrightView Infinity Display (1920x1080)</td>
            </tr>
            <tr>
                <th>Grafična kartica</th>
                <td>AMD Radeon™ HD 6850 Graphics</td>
            </tr>
            <tr>
                <th>Optična enota</th>
                <td>SuperMulti DVD-RW Double Layer</td>
            </tr>
            <tr>
                <th>USB 2.0</th>
                <td>2x</td>
            </tr>
            <tr>
                <th>USB 3.0</th>
                <td>1x</td>
            </tr>           
            <tr>
                <th>eSATA</th>
                <td>da</td>
            </tr>
            <tr>
                <th>HDMI</th>
                <td>da</td>
            </tr>
            <tr>
                <th>WiFi</th>
                <td>da</td>
            </tr>
            <tr>
                <th>Bluetooth</th>
                <td>da</td>
            </tr>
            <tr>
                <th>WWAN</th>
                <td>ne</td>
            </tr>
            <tr>
                <th>Spletna kamera</th>
                <td>da</td>
            </tr>
            <tr>
                <th>Card Reader</th>
                <td>da</td>
            </tr>
            <tr>
                <th>Express Card</th>
                <td>ne</td>
            </tr>
            <tr>
                <th>TV kartica</th>
                <td>ne</td>
            </tr>
            <tr>
                <th>Finger Print</th>
                <td>ne</td>
            </tr>
            <tr>
                <th>Vhodne naprave</th>
                <td>brez</td>
            </tr>               
            <tr>
                <th>Operacijski sistem</th>
                <td>Microsoft Windows 7 Home Premium (64 bit)</td>
            </tr>
            <tr>
                <th>Država uvoza</th>
                <td>Italijanska tipkovnica (priložene SLO nalepke)</td>
            </tr>               
            <tr>
                <th>Stanje modela</th>
                <td>HP Renew</td>
            </tr>       
    </tbody>
    </table>",12,"1.049,00",HP,"na zalogi",http://www.so-doo.si/media/catalog/product/cache/1/image/265x/9df78eab33525d08d6e5fb8d27136e95/c/0/c02034964.jpg.hri_4.jpg,,2.9000 
```

应用代码后：

```
<!-- language: lang-php -->

<?php
// The order here determines the order in the output CSV file
$columns = array(
    'koda',
    'naziv',
    'kategorija',
    'podkategorija',
    'v_akciji',
    'kosovnost'

);

// This will be used later on to correctly sort in the attribute values
// Note: the third paramter of "array_fill" determines what value to use
// in case a node lacks an attribute
$csv_blueprint = array_combine(
    $columns,
    array_fill(0, count($columns), '')
);

$data = array($columns);
$filexml = 'so_feed.xml';

if ( !file_exists($filexml) ) {
    // Do some error routine
} else {
    $xml = simplexml_load_file($filexml);
    $artikel = $xml->artikel;

    if ( !count($artikel) ) {
        // Stop processing 'cause there's nothing to do
    } else {
        foreach ( $artikel as $item )
        {
            // Clone the row blueprint to leave the original unspoiled
            $row = $csv_blueprint;

            $attr = $item->attributes();
            foreach ( $attr as $key => $value ) {
                $row[$key] = (string) $value;
            }
            // Append the current row to the overall output data but
            // be sure to strip off the indexes and pass a numerical array
            $data[] = array_values($row);
        }

        // The rest is up to you ... do whatever you need to :D
        var_dump($data);
    }
}
?> 
```

我只有几个字段输出，在代码中定义：

```
<!-- language: lang-php -->

$columns = array(
    'koda',
    'naziv',
    'kategorija',
    'podkategorija',
    'v_akciji',
    'kosovnost' 
```

如何在csv中获取所有其他属性输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:58:40.187

根据您的评论，这就是我想出的。我试图非常详细地帮助您了解正在发生的事情。

```
// The order here determines the order in the output CSV file
$columns = array(
    'koda',
    'naziv',
    'kategorija',
    'podkategorija',
    'v_akciji',
    'kosovnost'
);

// This will be used later on to correctly sort in the attribute values
// Note: the third paramter of "array_fill" determines what value to use
// in case a node lacks an attribute
$csv_blueprint = array_combine(
    $columns,
    array_fill(0, count($columns), '')
);

$data = array($columns);
$filexml = 'so_feed.xml';

if ( !file_exists($filexml) ) {
    // Do some error routine
} else {
    $xml = simplexml_load_file($filexml);
    $artikel = $xml->artikel;

    if ( !count($artikel) ) {
        // Stop processing 'cause there's nothing to do
    } else {
        foreach ( $artikel as $item ) {
            // Clone the row blueprint to leave the original unspoiled
            $row = $csv_blueprint;

            $attr = $item->attributes();
            foreach ( $attr as $key => $value ) {
                $row[$key] = (string) $value;
            }
            // Append the current row to the overall output data but
            // be sure to strip off the indexes and pass a numerical array
            $data[] = array_values($row);
        }

        // The rest is up to you ... do whatever you need to :D
        var_dump($data);
    }
} 
```

**编辑**
扩展以前的代码以反映对附加列的需要。

*   `$columns`以您想要合并必要数据（例如 opis）的方式 扩展数组

    ```
    $columns = array(
        'koda',
        'naziv',
        'kategorija',
        'opis',  // Arbitrarily added an extra column here
        'podkategorija',
        'v_akciji',
        'kosovnost'
    ); 
    ```

*   迭代`<ponudba/>`而不是`artikel`

    ```
    $xml = simplexml_load_file($filexml);
    //$artikel = $xml->artikel;
    $ponudbas = $xml->ponudba;
    ...
        foreach ( $ponudbas as $ponudba ) {
            // Clone the row blueprint to leave the original unspoiled
            $row = $csv_blueprint; 
    ```

*   `artikel`像以前一样添加任何节点的属性

*   另外迭代添加的列（对应于节点的列）并将它们的值保存在`$row[NODE_NAME / COLUMN NAME]`存储桶中

# java - 如何覆盖 TableView 中的排序行为

> ID：12551957
> 
> 赞同：5
> 
> 时间：2012-09-23T11:30:15.050
> 
> 标签：java, tableview, javafx

我的 TableView 从数据库中填充数据。当用户单击列标题时，它会根据它对数据进行排序。此功能是开箱即用的。但是，我有太多记录无法一次填充它们。假设我有 1000 条记录，而该表仅显示 500 条。当我根据列对其进行排序时，它只会缩短已填充的 500 条记录。

我想覆盖排序行为，因此当用户单击列标题时，它将重新加载数据库中的数据并为查询中的“order by”子句提供必要的信息。我的问题是，我不知道

1.  如何关闭现有的排序行为。我可以将列的可排序属性设置为 false，但恐怕它会使标题不可点击。
2.  如何附加侦听器以侦听列标题单击事件。tableView.getSortOrder().addListener() 是正确的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:05:40.987

我得到了一个丑陋的解决方案，只能解决一半的问题。我可以将侦听器附加到列标题单击事件，但不能删除默认的 TableView 排序行为。

```
private void initTable() {
    ...
    ...
    //listen to sorting type (ASC/DESC) change
    SortTypeChangeListener sortTypeChangeListener = new SortTypeChangeListener();
    clmName.sortTypeProperty().addListener(sortTypeChangeListener);
    clmGender.sortTypeProperty().addListener(sortTypeChangeListener);
    reload();

    //listen to sortorder change
    tblMember.getSortOrder().addListener(new ListChangeListener<TableColumn<VOMember, ?>>() {
        @Override
        public void onChanged(Change<? extends TableColumn<VOMember, ?>> change) {
            reload();
        }
    });
}

private void reload() {
  /**
     * Get sorted columns and sorting versus (ASC/DESC)
     */
    List<String> lstSortedColumn = new ArrayList<String>();
    List<String> lstSortedType = new ArrayList<String>();
    for (TableColumn<VOMember, ?> tc : tblMember.getSortOrder()) {
        PropertyValueFactory valFactory = (PropertyValueFactory) tc.getCellValueFactory();
        valFactory.getProperty();
        lstSortedColumn.add(valFactory.getProperty());
        lstSortedType.add(tc.getSortType().name());
    }

/**
     * Retrieve data from database. Pass the sorting information
     */        
    List<VOMember> lstMember = controller.retrieve(lstSortedColumn, lstSortedType);
    ObservableList<VOMember> data = FXCollections.observableList(lstMember);
    tblMember.setItems(data);
}

class SortTypeChangeListener implements InvalidationListener {

    @Override
    public void invalidated(Observable o) {
        /**
         * If the column is not in sortOrder list, just ignore.
         * It avoids intermittent duplicate reload() calling
         */
        TableColumn col = (TableColumn) ((SimpleObjectProperty) o).getBean();
        if (!tblMember.getSortOrder().contains(col)) {
            return;
        }

        reload();
    }
} 
```

我想听听您对此的看法/评论。

# google-plus - 使用 google plus 公共活动搜索 api 获取位置或坐标特定帖子

> ID：12551958
> 
> 赞同：1
> 
> 时间：2012-09-23T11:30:21.803
> 
> 标签：google-plus

[我在这里](https://stackoverflow.com/questions/12550459/fetch-location-or-coordinates-specfic-posts-using-facebook-search-api)发布了一个类似的问题，关于在 facebook 上搜索特定位置的公共帖子，但没有得到回复。

我的问题对于 google plus 也是一样的。有没有办法使用google plus search api（`https://www.googleapis.com/plus/v1/activities`或任何其他api调用）来获取位置/协调特定的公共活动？我希望这是一个通用搜索查询，无需任何用户授权。

如果这是不可能的，那么是否有任何免费的数据源/API 可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T21:11:05.643

使用活动的 REST API，您可以检索帖子——其中一些将在地理编码字段中包含位置数据。

[https://developers.google.com/+/api/latest/activities](https://developers.google.com/+/api/latest/activities)

此外，如果您从其 url 检索图像，您可能能够从 exif 元数据中找到位置信息。有许多免费的 exif 解析器，如今许多相机将 exif 数据填充到图像中。

# java - 如何在没有 NDK 的情况下在 Android 中处理原始相机数据

> ID：12551959
> 
> 赞同：1
> 
> 时间：2012-09-23T11:30:41.777
> 
> 标签：java, android, opencv, android-ndk

我可以在不使用 NDK+opencv 的情况下在 Android 设备中处理原始 RGB 相机数据吗？我什至不需要更改显示的数据，只需从中获取信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T20:44:33.980

据我记得，图像数据来自您的 NV21 格式`byte[] data`

取自[https://developer.android.com/guide/topics/media/camera.html](https://developer.android.com/guide/topics/media/camera.html)的代码（`onPictureTaken`来自`PictureCallback()`，但类似于`onPreviewFrame(byte[] data, Camera camera)`来自`Camera.PreviewCallback`。

```
private PictureCallback mPicture = new PictureCallback() {

    @Override
    public void onPictureTaken(byte[] data, Camera camera) {
        //convert here and do other stuff like save the picture.
    }
}; 
```

在这两种情况下，您都必须在上述方法中从 NV21 转换为 RGB，您可以像这样实现：[Confusion on YUV NV21 conversion to RGB](https://stackoverflow.com/questions/12469730/confusion-on-yuv-nv21-conversion-to-rgb)

# php - “喜欢”使用 Facebook API 或仅 access_token 的页面

> ID：12551960
> 
> 赞同：2
> 
> 时间：2012-09-23T11:30:47.263
> 
> 标签：php, facebook, facebook-graph-api, facebook-like

如何使用 Facebook API“点赞”页面？或者可能只使用 access_token （我们可以通过 API 获得）？

我知道这样做是可能的，因为我的朋友告诉我，他正在使用 Auto Liker 在他的页面上获得喜欢。autoliker 请求 access_token 并在它的帮助下完成任务。这只是意味着可以仅使用 access_token 来“喜欢”一个页面。

据我所知，要喜欢一个对象，我们需要触发它

```
POST: /$objectid/likes?access_token=XXXXXX 
```

但这在页面的情况下不起作用。如何做到这一点？

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T14:29:28.360

没有 API 方法可以点赞一个页面。

“Auto Likers”使用安全漏洞来劫持访问令牌并代表用户执行喜欢。

这不是使用 API 完成的，是 Facebook 政策非常禁止的，也可能是非法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T00:19:24.557

根据[Facebook TOS](https://www.facebook.com/policies/)这样做是不合法的。

你不能用 Facebook API 做到这一点。

# vb.net - 在 Visual Basic 中选择一个随机按钮

> ID：12551962
> 
> 赞同：1
> 
> 时间：2012-09-23T11:31:07.960
> 
> 标签：vb.net

所以我的表单上有 9 个按钮，当我按下一个按钮时，我想选择 9 个按钮中的一个并将他的文本更改为 - “随机”。我如何在 Visual Basic 2008/2010 中做到这一点？

我在想类似的东西

```
 For Each buttons In Panel1.Controls
         If TypeName(buttons) = "Button" Then
               //select a random button and change his text to "random"
          End If
 Next buttons 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:43:47.763

```
var buttons = from controls in this.Controls.OfType<Button>() select controls;

buttons.ElementAt(new Random().Next(buttons.Count())).Text = "random"; 
```

我没有使用过 VB，所以只是在 C# 中做到了这一点。在 VB 中可能相同/非常相似。

编辑：要回答您的评论，请尝试以下操作：

```
var buttons = (from controls in this.Controls.OfType<Button>() where !controls.Text.Equals("random") select controls);

if (buttons.Count() > 0)
{
    buttons.ElementAt(new Random().Next(buttons.Count())).Text = "random";
} 
```

# android - 未调用 BroadcastReceiver

> ID：12551963
> 
> 赞同：1
> 
> 时间：2012-09-23T11:31:10.390
> 
> 标签：android, broadcastreceiver

我有一些问题。我想转发消息。我使用 context.sendBroadcast 发送和 BroadcastReceiver - 接收消息

```
public class GPS_module implements LocationListener {

private Context context;

public GPS_module(Context ctx) {
        context = ctx; 
        manager = (LocationManager) context
                .getSystemService(Context.LOCATION_SERVICE);

    }
.....

 public void sendMessage(String str) {
       Intent intent = new Intent("logGPS");
       intent.putExtra("Message",str);
       context.sendBroadcast(intent);
} 

} 
```

为了接收消息，我使用以下源代码

```
public class Fragment_1 extends Fragment{
    .......
    @Override
          public View onCreateView(LayoutInflater inflater, ViewGroup container,
              Bundle savedInstanceState) {

            View myFragmentView = inflater.inflate(R.layout.right_panel_1, null);

            BroadcastReceiver log = new BroadcastReceiver() {
                @Override
                public void onReceive(Context context, Intent intent) 
                {
                    if(intent.getAction().equals("logGPS"))
                    {
                        myLog(intent.getStringExtra("Message"));

                    }
                }
            };

            return myFragmentView ;

          }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:57:17.027

您需要执行以下操作：

（这是为了连接）

```
 registerReceiver(myReceiver,
           new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION)); 
```

您需要注册并设置一个意图过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T11:47:40.893

你注册你的接收器了吗？我在您的代码中没有看到这一点。

# c - C 或 Haskell 库在 bmp 文件中查找表单

> ID：12551964
> 
> 赞同：1
> 
> 时间：2012-09-23T11:31:19.340
> 
> 标签：c, haskell, bmp, pattern-recognition

我们正在建造一个机器人，我们想给他眼睛以避免撞到另一个移动的机器人。我已经有一个程序使用网络摄像头拍摄存储在 .bmp 文件中的照片。我们打算在另一个机器人的顶部放置一个华丽的红色球体，我想要编写一个程序，给定刚刚拍摄的 .bmp 照片，分析它，尝试找到红色球体，并计算它的大小，最终猜测它的距离。我可以使用什么库在 .bmp 文件中查找球体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:36:22.090

看看 OpenCV（[http://opencv.willowgarage.com/wiki/](http://opencv.willowgarage.com/wiki/)）

这个 C 库提供了图像/表单检测和分析的功能。

# codeigniter - codeigniter flashdata 永远不会到达我的控制器

> ID：12551969
> 
> 赞同：0
> 
> 时间：2012-09-23T11:31:45.223
> 
> 标签：codeigniter

在我看来，我有这段代码：

```
if (($faq_cat['categoryphoto'] !="")|| ($faq_cat['categoryphoto'] != NULL)) {
       $this->session->set_flashdata('tablename', 'faq_categories');
       $this->session->keep_flashdata('tablename');
       $this->session->set_flashdata('recordid', $faq_cat['catid']);
       $this->session->set_flashdata('fieldname', 'catid');
       $this->session->set_flashdata('fieldToUpdate', 'categoryphoto');
       $this->session->set_flashdata('dpage', 'faq/editFaqCategory');
       echo anchor('faqcategories/updateOneField', 'Delete Current Photo?');
} 
```

在我的控制器中，我有以下代码：

```
 public function updateOneField() 
    {  

        $tablename = $this->session->flashdata('tablename');
        $id = $this->session->flashdata('recordid');
        $fieldname = $this->session->flashdata('fieldname');
        $fieldToUpdate = $this->session->flashdata('fieldToUpdate');
        echo "<br />table name is: " .$tablename;
        echo $id;
        echo $fieldname;
        echo $fieldToUpdate;
        die();
        $this->load->model('faqCategoriesModel');
        $this->faqCategoriesModel->save(array($fieldToUpdate => ''), $id);        
        $catid = $id;
        $this->displayEditFaqCategoryForm($catid);
    } // end of function updateOneField 
```

任何读取通过闪存数据发送的数据的尝试都失败了。所有 flashdata 变量都为空。我将会话加载到我的 autoload.php 文件中。相同的代码在另一个 CI 应用程序中工作。谁能发现我做错了什么？我试图`$this->session->keep_flashdata('item');`在我的视图和控制器中都使用，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:00:03.163

我只是放弃了，我在用户数据中设置了我的变量，如下所示：

```
$newdata = array(
    'tablename'  => 'faq_categories',
    'recordid'     => $faq_cat['catid'],
    'fieldname' => 'catid',
    'fieldToUpdate' => 'categoryphoto',
    'dpage' => 'faqcategories/editFaqCategory'
    ); 
```

干杯

# html - 悬停在元素上时从上一个/下一个元素中删除样式

> ID：12551970
> 
> 赞同：2
> 
> 时间：2012-09-23T11:31:49.507
> 
> 标签：html, css, hover, border

例子：

[http://jsfiddle.net/JUmHG/3](http://jsfiddle.net/JUmHG/3)

当鼠标悬停在 LI 上时，LI 的顶部/底部边框变为透明（由 background-color 代替）。

但是，前一个 LI 的底部边框和下一个 LI 的顶部边框也必须是透明的。这可以用 CSS 完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T11:57:49.590

您不能选择上一个兄弟，但您可以尝试一些技巧来获得所需的效果。

像这样：

# [演示](http://jsfiddle.net/JUmHG/8/)

在除第一个列表项之外的每个列表项上仅使用`border-top`& an`inset` `box-shadow`以模仿蚀刻的顶部边框。

```
li{
    border-top: 1px solid #999;
    box-shadow: inset 0 1px 0 #fff;
    padding: 10px;
}    
li:first-child{
    border-top: 0;
    box-shadow: none;
} 
```

`hover`然后为当前项目和紧随其后的项目删除它。

```
li:hover, li:hover + li {
    border-color: transparent;
    box-shadow: none;
} 
```

这适用于所有[支持的浏览器`box-shadow`](http://caniuse.com/#feat=css-boxshadow)（即，除了 IE8 和更旧且功能较弱的移动浏览器之外的所有浏览器）。

在 IE8 中可以通过使用给定的绝对定位伪元素来实现相同的效果`top: 0; left: 0; height: 1px; width: 100%; background: #fff;`（甚至在 IE7 中，通过将子项添加到列表项而不是伪元素）。但是，我认为这是矫枉过正，特别是因为原始方法优雅地降级了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T11:39:06.487

我能做的最好的是下一个，但不是上一个：

[http://jsfiddle.net/JUmHG/4/](http://jsfiddle.net/JUmHG/4/)

上面使用了 CSS`+`选择器，它选择下一个兄弟。

要设置以前的样式，`li,`您可能需要 JavaScript。

对于 jQuery 解决方案，这可能有效：http: [//jsfiddle.net/JUmHG/5/](http://jsfiddle.net/JUmHG/5/)

当 CSS4 出现时（不要屏住呼吸），您将能够做到这一点（主题选择器）：

```
$li + li:hover,
li:hover,
li:hover + li {
    ...
} 
```

[http://www.w3.org/TR/2011/WD-selectors4-20110929/#subject](http://www.w3.org/TR/2011/WD-selectors4-20110929/#subject)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T11:49:07.503

查询：

```
$('li').hover(function(){
  $(this).prev().addClass('hide'); 
},function(){
  $( 'li').removeClass('hide'); 
}); 
```

CSS：

```
.hide{
   border-color: transparent;
} 
```

[演示](http://jsfiddle.net/JUmHG/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-14T13:57:42.043

为了达到上述目的：

1.  `<li>`只为除第一个元素之外的所有元素提供border-top 。

    > `li{ border-top: 1px solid #fff; padding: 10px;}`

2.  要从第一个`<li>`元素中删除边框，请使用：

    > `li:first-child {border-top: none;}`

3.  添加悬停状态css，如下所示：

    > `li:hover{ border-color: transparent; background: #ccc; border-radius: 7px; }`

4.  在当前元素悬停时移除下一个兄弟`<li>`元素的边框`<li>`：

    > `li:hover + li { border-top: none; }`

[工作演示](https://jsfiddle.net/egafb63s/1/)

# php - jQuery 嵌套排序列表和 php mysql 更新？

> ID：12551971
> 
> 赞同：1
> 
> 时间：2012-09-23T11:32:02.383
> 
> 标签：php, jquery, jquery-ui

我正在使用具有 jquery 嵌套可排序列表的简单脚本

[我用这个插件来管理这个](http://mjsarfatti.com/sandbox/nestedSortable/)嵌套列表

它工作得很好，但是我需要编写用于更新 mysql 表的后端 PHP 代码的问题我真的很困惑这是我在更新嵌套列表时从 ajax 请求中获得的最终数组

```
Array
(
    [0] => Array
        (
            [id] => 3
            [children] => Array
                (
                    [0] => Array
                        (
                            [id] => 8
                        )

                    [1] => Array
                        (
                            [id] => 11
                        )

                    [2] => Array
                        (
                            [id] => 12
                        )

                    [3] => Array
                        (
                            [id] => 19
                        )

                    [4] => Array
                        (
                            [id] => 29
                        )

                )

        )

    [1] => Array
        (
            [id] => 2
            [children] => Array
                (
                    [0] => Array
                        (
                            [id] => 4
                        )

                    [1] => Array
                        (
                            [id] => 9
                        )

                )

        )

    [2] => Array
        (
            [id] => 5
            [children] => Array
                (
                    [0] => Array
                        (
                            [id] => 28
                        )

                )

        )

    [3] => Array
        (
            [id] => 1
            [children] => Array
                (
                    [0] => Array
                        (
                            [id] => 10
                        )

                    [1] => Array
                        (
                            [id] => 33
                        )

                )

        )

    [4] => Array
        (
            [id] => 6
            [children] => Array
                (
                    [0] => Array
                        (
                            [id] => 32
                        )

                )

        )

    [5] => Array
        (
            [id] => 7
        )

    [6] => Array
        (
            [id] => 13
        )

    [7] => Array
        (
            [id] => 14
        )

    [8] => Array
        (
            [id] => 16
        )

    [9] => Array
        (
            [id] => 17
        )

    [10] => Array
        (
            [id] => 18
        )

    [11] => Array
        (
            [id] => 20
        )

    [12] => Array
        (
            [id] => 22
        )

    [13] => Array
        (
            [id] => 23
        )

    [14] => Array
        (
            [id] => 24
        )

    [15] => Array
        (
            [id] => 25
        )

    [16] => Array
        (
            [id] => 26
        )

    [17] => Array
        (
            [id] => 27
        )

    [18] => Array
        (
            [id] => 31
        )

) 
```

这些都是从数据库推送的ID

但我不知道如何将它们更新到数据库中，以便以正确的方式对它们进行排序？

# ruby-on-rails - 如何将现有嵌套模型的 ID 关联到新创建的父模型？

> ID：12551976
> 
> 赞同：0
> 
> 时间：2012-09-23T11:32:42.113
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有关系：`Post`一对多`Pictures`。`Pictures`之前已通过 AJAX 创建，并且它们的 ID 存储在一个帖子视图页面的隐藏字段中。提交表单后，仅保存自己的数据并从嵌套模型中`post_controller`跳过。`picture_ids`如何关联？

```
def create
  p_attr = params[:post]
  p_attr[:picture_ids] = ActiveSupport::JSON.decode(params[:post][:picture_ids])

  puts p_attr
  @post = Post.new(p_attr)

  puts @post.to_json
  @post.save
end 
```

收到的帖子：

```
{"title"=>"test", "description"=>"test", "picture_ids"=>["505eec681e7bf2b8150001a5","505eea991e7bf2b8150001a1","505ee7761e7bf2b81500018d"]} 
```

创建的帖子：

```
{"_id":"505eeed01e7bf2b8150001b1","created_at":null,"description":"test","title":"test","updated_at":null} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:35:54.820

如果我对您的理解正确，您希望获取已上传的图片记录并将它们与刚刚保存的帖子相关联。假设`params[:picture_ids]`在您解码 JSON 后是一个数组，您应该能够在 Picture 上进行全部更新以实现此目的。保存帖子后立即尝试：

```
Picture.update_all(
  { :post_id => @post.id },
  :conditions => { :id => params[:picture_ids] }
) 
```

# python - xlrd 和 xlwt 兼容吗？

> ID：12551981
> 
> 赞同：4
> 
> 时间：2012-09-23T11:33:41.613
> 
> 标签：python, excel, xlrd, xlwt

我正在尝试使用 python 创建一个工作簿，我需要测试不同单元格的值来填充它，但我遇到了一些麻烦。我使用[`xlrd`and`xlwt`](http://www.python-excel.org/)来创建和编辑 excel 文件。

我已经为我的问题做了一个小例子，但我不明白为什么它不起作用。

```
import xlwt
import xlrd
wb = xlwt.Workbook()
ws = wb.add_sheet('Test')
ws.write(0,0,"ah")
cell = ws.cell(0,0) # AttributeError: 'Worksheet' object has no attribute 'cell'
print cell.value 
```

我认为这是理所当然的，`xlrd`并且`xlwt`有可以相互交互的共享类，但似乎并非如此。如何获取打开的 Worksheet 对象的单元格值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:36:11.280

据我了解， xlwt 和 xlrd 模块是分开的，用于将整本书读入内存，或将内存中的日期写入文件。如果您想使用这两个模块，我相信您必须执行以下操作：

1）将整个现有文件读入内存。(xlrd) 2) 编辑内存中的工作簿 3) 写出工作簿。(xlwt)

换句话说，它们不能互换工作。像这样工作的是一个名为“openpyxl”的不同模块，该模块允许您创建对象并在运行时以您尝试上面的方式操作它们。

链接：[http ://packages.python.org/openpyxl/](http://packages.python.org/openpyxl/)

# python - Django-admin.py startproject 究竟做了什么？

> ID：12551982
> 
> 赞同：0
> 
> 时间：2012-09-23T11:33:48.173
> 
> 标签：python, django

我刚开始使用python并直接进入django。我已经建立了第一个项目并玩了一下。到目前为止，一切都很好。现在，我正试图更深入地了解正在发生的事情。

我找不到有关 startproject 实际功能的任何信息。我知道它创建了 Django 项目的页面结构，但它还有其他作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:46:06.123

例子：

```
# running django-admin.py inside /opt
/opt$ django-admin.py startproject testproject 
```

创建的结构：

*   /选择
    *   测试项目
        *   `manage.py`（您使用的脚本，而不是这个项目的 django-admin.py）
        *   testproject（保存项目代码库的目录）
        *   `__init__.py`（这个文件让 Python 知道这个文件夹是一个包）
        *   `settings.py`（从模板创建的 django 设置文件）
        *   `urls.py`（放置所有 URL 结构的 Django URLs 文件）
        *   `wsgi.py`（稍后可用于为应用程序提供服务的 WSGI 脚本）

差不多就是这样。

# apache - .htaccess 重定向/更改 URL

> ID：12551995
> 
> 赞同：1
> 
> 时间：2012-09-23T11:35:02.477
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, shopping-cart

我无法弄清楚如何成功使用[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)为我重写我的网址。

基本上谷歌已经索引了我的网上商店，现在我已经在一个单独的位置重建了它，并且没有一个谷歌链接工作。而不是通过谷歌并为我的整个网站设置 customURLs 我想添加一些 .htaccess 代码来重定向到我的新商店，但它需要维护整个链接，这就是我丢失的地方。

我的旧店在

```
http://mystore.com/store/ 
```

我的新店在

```
http://mystore.com/shop/ 
```

所以当用户去

```
http://mystore.com/store/categories/cheese/Mouldy/?page=5&sort=featured 
```

我需要他们被重定向到

```
http://mystore.com/shop/categories/cheese/Mouldy/?page=5&sort=featured 
```

但是，我需要这条规则的例外作为我的管理区域。所以如果我访问：

```
http://mystore.com/store/admin/ 
```

我**不想**结束

```
http://mystore.com/shop/admin/ 
```

因为我仍然需要访问我的旧管理面板。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:43:51.390

希望这可以满足您的需求。

```
RewriteCond %{REQUEST_URI} !^store/admin(/|$)
RewriteRule ^store/(.*)$ ^shop/$1 [L,R=301] 
```

请让我知道这对你有没有用 ：-）

编辑：

希望这会奏效。

```
RewriteRule ^store/admin(.*)$ ^store/admin$1
RewriteRule ^store/(.*)$ ^shop/$1 [L,R=301] 
```

# jquery - datepicker Jquery 验证错误

> ID：12551997
> 
> 赞同：0
> 
> 时间：2012-09-23T11:35:10.703
> 
> 标签：jquery, validation, datetime, datepicker

我有一个包含日期字段的表单。我为此使用 JQuery datepicker。这不会在客户端出现任何验证错误，但在尝试更新数据库时出现验证错误。

错误是“值 '27/09/2012' 对 AvailableFrom 无效。”

我的实体如下 - 首先由代码生成：

```
[DisplayFormat(DataFormatString = "{0:dd/mm/yyyy}", ApplyFormatInEditMode = true)]
public DateTime? AvailableFrom { get; set; } 
```

jQuery 脚本

```
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery-ui-1.8.23.datepicker.min.js")"></script>
<script>
    $(function () {
        $('.datepicker').datepicker({ minDate: 0, dateFormat: 'dd/mm/yy' });
    });
    </script> 
```

看法：

```
<div class="editor-label">
    @Html.LabelFor(model => model.Property.AvailableFrom)
    @Html.TextBoxFor(model => model.Property.AvailableFrom, new { @class = "datepicker" })
</div>
<div class="editor-field">            
    @Html.ValidationMessageFor(model => model.Property.AvailableFrom)
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T12:07:35.843

在将全球化添加到 web.config 后完美运行

```
<configuration>
   <system.web>
     <globalization uiCulture="en-GB" culture="en-GB"/>
     ... 
```

请参阅此处的 MSDN 页面：http: [//msdn.microsoft.com/en-us/library/ydkak5b9 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/ydkak5b9(v=vs.71).aspx)