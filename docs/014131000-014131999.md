# StackOverflow 问答 14131000-14131999

# sql - Index In SQL Server 2012

> ID：14131001
> 
> 赞同：1
> 
> 时间：2013-01-02T23:40:59.230
> 
> 标签：sql, indexing, sql-server-2012

![enter image description here](../Images/bf07cc3c34c285f7569e42525bf9a22f.png)

I have this table in my database where `HusbandPersonId` and `WifePersonId` are foreign keys to another table called `Person`, and the start/end date refer when the marriage start and when it ends.

And I have this query :

```
SELECT
   DISTINCT A.WifePersonId
FROM
   Couple A
   INNER JOIN Couple B
      ON A.WifePersonId = B.WifePersonId
      AND A.HusbandPersonId <> B.HusbandPersonId
      AND A.StartDate < B.EndDate
      AND A.EndDate > B.StartDate; 
```

which returns any wife that is married to more than one person at same time.

Now I would like to add an index to improve the speed of search of this query.

Which index would be the best and what is the execution plan of the query before and after the index has been added ?

This is a request in homework and I search too much but I didn't find any helpful topic

Can anyone help on this ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:48:29.077

一般索引规则建议在连接条件中包含所有字段。这些字段的顺序可能会产生影响。同样，一般规则建议按照增加基数的顺序对字段进行排序（每个字段的唯一值的数量）。

所以你可以试试：

```
CREATE INDEX Couple__multi ON Couple(StartDate, EndDate, WifePersonId, HusbandPersonId) 
```

这假设不同的开始/结束日期的数量小于唯一的妻子/丈夫 PersonId 的数量。

这些规则基本上是索引 101 类型的东西。大多数情况下，它们会为您提供可接受的性能水平。如果这足以满足您的目的，这在很大程度上取决于您的数据和应用程序。

就个人而言，我并没有过多考虑 SQL 性能分析器建议的索引，但我上次认真研究它们是在 SQL2005 中。我敢肯定，从那以后已经有了一些改进。

希望这可以帮助。

# php - Convert microsoft office documents to pdf or images with php

> ID：14131002
> 
> 赞同：-1
> 
> 时间：2013-01-02T23:41:04.737
> 
> 标签：php, type-conversion

I need to let my users to upload a word, excel and power point document and to display it on the browser. So i thought to convert the documents to pdf or images. I'm using PHP running on linux. And i need it to support RTL (livedocx) is not support RTL.

any suggestions how can i implement this?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:45:24.137

What about Google Docs API (now Google Drive API)?
Should solve this problem very nice...

# actionscript-3 - AIR 3.5 Mobile project device ID

> ID：14131005
> 
> 赞同：3
> 
> 时间：2013-01-02T23:41:17.190
> 
> 标签：actionscript-3, air

I am wondering if someone knows the best method for storing data in a global DB against a mobile device (iOS and Android)?

I am building an app that writes/retrieves information based on a query however I need to know if any of the records returned were sent from that device.

Basically the idea is that if a user submits some information (which is stored in the DB) they gain access to additional features of the app. When the app is launched, I will check the DB to see if they submitted information in the past and allow access to other areas.

I use local storage for the information they submitted but also store remotely so if the local storage becomes corrupted for any reason there is still a record of the information the user submitted.

The ID needs to be unique to the device as there could be 100 of users (hoping for millions) so the ID needs to be unique enough that it will never conflict with another device. Any information submitted will be available for retrieval by all other users.

Thanks :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T03:33:15.773

在我看来，有三个选项：

**1\. 用户**

您可以创建一个典型的用户名 + 密码用户方案并使用它来验证用户。这种方法的一个可能优势是用户可以从他们的任何设备登录（例如，在您的方法下，用户从他们的 iPhone 和 iPad 使用应用程序将有两个不同的视图 - 您可能不想要）。当然，这意味着强制应用程序的每个用户在您的系统中注册，这并不理想。

**2\. 应用安装**

[您可以通过让您的应用在应用第一次运行时生成UUID](https://en.wikipedia.org/wiki/Universally_unique_identifier)来唯一标识应用安装（您可以使用[AS3 帮助程序库](https://code.google.com/p/actionscript-uuid/)来生成 UUID）。您可以将此 UUID 存储在本地，并将其与应用程序发出的每个请求一起发送。这种方法的缺点是它不能唯一地识别设备 - 只是特定的应用程序安装。例如，如果用户删除应用程序，然后在稍后重新安装它，它现在将被视为新的唯一设备，即使用户在同一设备上。

**3.设备**

AIR 没有读取设备识别信息的内置方式。但是，您可以通过 AIR Native Extensions 检索设备信息，例如[这个](https://github.com/katopz/ane-device-info-util/)可以获取 MAC 地址和其他一些东西。在读取和存储诸如此类的设备信息时会涉及隐私问题和其他问题，因此您可能最好尝试将[OpenUDID](https://github.com/ylechelle/OpenUDID)项目实现为 AIR 本机扩展，因为他们已经处理了所有此类问题。不幸的是，我对开发 ANE 的研究从未走得太远，所以我不确定将 OpenUDID 变成 ANE 会有多复杂或可行。

**摘要：**由于易于实施，我会推荐应用安装方法。如果您真的需要独特的设备并且担心多个应用安装情况，您将必须弄清楚如何使用本机扩展来获取您需要的信息。如果您决定更愿意通过用户而不是设备进行识别，请使用用户方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T03:23:02.650

截至目前，我认为不可能使用空中移动设备来引导硬件设备。但是，您确实有几个选择。

如果 MAC 地址对您来说足够好，那么有一个 ANE 可以让您在 iOS 和 Android 上获取它。

[http://www.adobe.com/devnet/air/native-extensions-for-air/extensions/networkinfo.html](http://www.adobe.com/devnet/air/native-extensions-for-air/extensions/networkinfo.html)

以及如何使用它的示例

[http://cookbooks.adobe.com/post_Getting_NetworkInfo_from_both_Android_and_iOS-19473.html](http://cookbooks.adobe.com/post_Getting_NetworkInfo_from_both_Android_and_iOS-19473.html)

您也可以编写自己的 ANE，包装 Android 和 iOS 实现应该非常简单。

目标-c：`[[UIDevice currentDevice] uniqueIdentifier]`

安卓：`TelephonyManager.getDeviceId()`

如果您的应用程序需要任何类型的用户帐户或登录，最好的选择是将此设置存储在远程数据库中。

# javascript - 如何使用 JS 按数据属性中的值对元素进行排序

> ID：14131008
> 
> 赞同：1
> 
> 时间：2013-01-02T23:41:17.773
> 
> 标签：javascript, sorting, appendchild

我需要对已经按升序显示的元素进行排序，以便它们重新排列。我需要按它们的 data-val 属性中的值对它们进行分类。

```
<div id="a" class="item" data-val="6">Item a</div>
<div id="b" class="item" data-val="8">Item b</div>
<div id="c" class="item" data-val="2">Item c</div>
<div id="d" class="item" data-val="5">Item d</div>

<br />
<button onclick="sortOut()">Sort Out</button> 
```

我在这里做了一个例子：http: [//jsfiddle.net/quatzael/uKnpa/](http://jsfiddle.net/quatzael/uKnpa/)

我不知道该怎么做。我有点开始，但它可能是错误的。

我需要该函数首先找出哪些元素具有名为“item”的类，然后根据其 data-val 属性的值对具有此类的元素进行排序。

它必须适用于所有浏览器，因此解决方案可能涉及 .appendChild()

Tnx 的任何帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T23:48:05.960

您需要以新排序的顺序将它们附加到 DOM。

这是我添加到您的代码中以执行此操作的内容：

```
divs.sort(function(a, b) {
    return a.dataset.val.localeCompare(b.dataset.val);
});

var br = document.getElementsByTagName("br")[0];

divs.forEach(function(el) {
    document.body.insertBefore(el, br);
}); 
```

[http://jsfiddle.net/RZ2K4/](http://jsfiddle.net/RZ2K4/)

如果您的排序项目在没有其他东西的容器中，则`appendChild()`可以使用该方法。`.insertBefore()`

要支持较旧的浏览器，您可以使用`.getAttribute("data-val")`而不是`.dataset.val`.

如果你想要一个数字排序，你不应该`.localeCompare`在`.sort()`函数中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-08T16:28:47.533

`flex`您可以为包装器添加属性并使用`order`它们来订购它们。或者您可以将元素重新附加到其父级

[演示](https://codepen.io/zuhairtaha/pen/gOrvobj?editors=1111)

```
const items = Array.from(document.querySelectorAll("li"));
const btn = document.querySelector("button");
const orderBy = Array(5).fill().map((x, i) => i + 1); // [1..5]

btn.addEventListener("click", clickHander);
function clickHander() {
  orderBy.forEach(i => {
    const item = items.find(x => x.getAttribute("data-order") === `${i}`);
    item.style.order = i;
    // OR: item.parentElement.appendChild(item);
  });
}
```

```
ul {
  display: flex;
  flex-direction: column;
}
```

```
<ul>
  <li data-order="4">order 4</li>
  <li data-order="3">order 3</li>
  <li data-order="1">order 1</li>
  <li data-order="5">order 5</li>
  <li data-order="2">order 2</li>
</ul>
<button>sort</button>
```

# ruby - 使用 Nokogiri，我如何关闭不匹配的标签？

> ID：14131011
> 
> 赞同：3
> 
> 时间：2013-01-02T23:41:47.520
> 
> 标签：ruby, nokogiri

我正在用 Nokogiri 抓取 HTML 文档，其中许多可能有未闭合的标签。例如，我想关闭“未关闭”`<p>`标签。

我查看了文档并查看[“Nokogiri 纠正错误标记”的位置，](http://nokogiri.org/tutorials/ensuring_well_formed_markup.html)但我没有看到这样做的好方法。

也许它需要遍历每个元素并关闭任何不匹配的标签？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T01:04:41.707

Nokogiri 会自动修复它们。

您可以使用`inner_html`来获取更正的 HTML 代码

```
require 'rubygems'
require 'nokogiri'
doc = Nokogiri::HTML.parse('<p>')
doc.inner_html # => "<html><body><p></p></body></html>" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T23:47:22.603

您无需为 Nokogiri 执行任何特殊操作即可关闭未关闭的标签。看一下这个：

```
1.9.3p327 :001 > require 'nokogiri'
 => true 
1.9.3p327 :002 > doc = Nokogiri::XML.parse('<a><b></b>')
 => #<Nokogiri::XML::Document:0xee4a80 name="document" children=[#<Nokogiri::XML::Element:0xee4710 name="a" children=[#<Nokogiri::XML::Element:0xee4508 name="b">]>]> 
```

# animation - JavaFX 停止时间轴

> ID：14131012
> 
> 赞同：4
> 
> 时间：2013-01-02T23:42:00.033
> 
> 标签：animation, javafx, timeline

我使用 FXML。我创建了一个按钮来停止/重新启动实时图表。对于动画，我使用了时间轴。我想从 guiController （从其他类）控制它，但它不起作用。如何停止其他班级的时间线？

谢谢！

FXML：

```
 <Button id="button" layoutX="691.0" layoutY="305.0" mnemonicParsing="false" onAction="#btn_startmes" prefHeight="34.0" prefWidth="115.0" text="%start" /> 
```

gui控制器：

```
@FXML      
private void btn_stopmes(ActionEvent event) {
  MotionCFp Stopping = new MotionCFp();
Stopping.animation.stop();
} 
```

MotionCFp.java：

```
 @Override
    public void start(final Stage stage) throws Exception {
       else{
        ResourceBundle motionCFp = ResourceBundle.getBundle("motionc.fp.Bundle", new Locale("en", "EN"));
        AnchorPane root = (AnchorPane) FXMLLoader.load(MotionCFp.class.getResource("gui.fxml"), motionCFp);
        final guiController gui = new guiController();
        Scene scene = new Scene(root);
        stage.setTitle(motionCFp.getString("title"));
        stage.setResizable(false);
        stage.setScene(scene);        
        root.getChildren().add(gui.createChart());
                animation = new Timeline();
                animation.getKeyFrames().add(new KeyFrame(Duration.millis(1000/60), new EventHandler<ActionEvent>() {
            @Override public void handle(ActionEvent actionEvent) {
                // 6 minutes data per frame
                for(int count=0; count < 6; count++) {
                    gui.nextTime();
                    gui.plotTime();
                    animation.pause();
                    animation.play();
                }
            }
        }));
        animation.setCycleCount(Animation.INDEFINITE);
        stage.show();
        animation.play();
       } 

   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T08:04:43.460

您需要在控制器中引用在应用程序的 start 方法中创建的原始动画。这将允许您在控制器中编写按钮事件处理程序以停止动画。

该类`MotionCFp`可以包含以下代码：

```
final FXMLLoader loader = new FXMLLoader(
  getClass().getResource("gui.fxml"), 
  ResourceBundle.getBundle("motionc.fp.Bundle", new Locale("en", "EN"))
);
final Pane root = (Pane) loader.load();
final GuiController controller = loader.<GuiController>getController();
...
animation = new Timeline();
controller.setAnimation(animation); 
```

并且`GuiController`该类可以包含代码：

```
private Timeline animation;

public void setAnimation(Timeline animation) {
  this.animation = animation;
}

@FXML private void btn_stopmes(ActionEvent event) {
  if (animation != null) {
    animation.stop();
  }
} 
```

MotionCFp 是您的应用程序类。您只需要它的一个实例。该实例是由 JavaFX 启动器创建的，您永远不应该这样做`new MotionCFp()`。

[请注意，如果问题中的代码简单、完整、可编译和可执行，](http://sscce.org)则此类问题更容易快速正确地回答。

# php - jQuery Waypoints Not functioning on initial scroll

> ID：14131017
> 
> 赞同：0
> 
> 时间：2013-01-02T23:42:36.907
> 
> 标签：php, javascript, jquery, jquery-waypoints

I am using the script below along with the [jQuery Waypoints plugin](http://imakewebthings.com/jquery-waypoints/#documentation) to fade elements into 100% opacity when they are centered 50% (or 75%) in the browser window. The code seems to be working pretty good except the elements don't seem to initially fade in. When I scroll down and then back up it seems to be triggering them then.

```
$(document).ready(function() {
$('#feature').waypoint(function(event, direction) {
   var targetOpacity = direction === "down" ? 1 : .25;
   $(this).stop().animate({ "opacity": targetOpacity });
}, {
   offset: '50%'
});

$('#footer').waypoint(function(event, direction) {
   var targetOpacity = direction == "down" ? 1 : .25;
   $(this).stop().animate({ "opacity": targetOpacity });
}, {
   offset: '75%' 
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:13:11.600

checkout $.waypoints('refresh') 触发页面加载动作

# powershell - Powershell 意外令牌

> ID：14131018
> 
> 赞同：1
> 
> 时间：2013-01-02T23:42:41.700
> 
> 标签：powershell

2013 年过得愉快。我在我的第一个 PS 脚本上手忙脚乱，我陷入了一个非常常见的错误，即“Unexpected Token”错误。我已经搜索了互联网，但找不到答案，所以请帮助我。

```
 If ($_.Voorvoegsel.Trim() -ieq "") {
        $dn = $_.Voornaam.Trim() + " " 
        $dn += $_.Achternaam.Trim()
        $email = $_.Voornaam.substring(0,1).ToLower() + "."
        $email+= $_.Achternaam.Trim().ToLower() + "@test.nl
    } Else {
        $dn = $_.Voornaam.Trim() + " "
        $dn += $_.Voorvoegsel.Trim() + " "
        $dn += $_.Achternaam.Trim() 
        $email = $_.Voornaam.substring(0,1).ToLower() + "."
        $email += $_.Voorvoegsel.Replace(" ","").ToLower()
        $email += $_.Achternaam.Trim().ToLower() + "@test.nl
    } 
```

奇怪的是它在 else 语句中的 $_.Voorvoegsel 变量上出错：

```
Unexpected token '
            $dn += $_.Voorvoegsel.Trim()
            $dn += ' in expression or statement.
At C:\Users\Public\Documents\PSImportTest.ps1:42 char:12
+             $dn = $_ <<<< .Voornaam.Trim() + " "
    + CategoryInfo          : ParserError: (
            $dn += $_....m()
            $dn += :String) [], ParseException
    + FullyQualifiedErrorId : UnexpectedToken 
```

有谁看到我的盲点在这里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T00:04:06.767

可能是您缺少第 5 行的结束引号：

```
$email += $_.Acternaam.Trim().ToLower() + "@test.nl" 
```

看起来您也可能在第 12 行缺少一个。Powershell 可能认为其余代码，直到下一个引号字符，是您的字符串文字的一部分。

# regex - Sed 正则表达式寻找空格或行尾

> ID：14131020
> 
> 赞同：4
> 
> 时间：2013-01-02T23:43:09.300
> 
> 标签：regex, sed

我正在尝试检测包含三个部分的模式：

1.  空间
2.  “m”或“t”
3.  空格或行尾

我想保留#2 和#3。例如，我想将*“我确定他没有”*更改为*“我确定他没有”*

我在表达 #3 时遇到了麻烦，因为`[ $]`似乎只匹配空格，而不是行尾。这是我尝试过的：

```
$ echo "i m sure he doesn t" | sed 's/ \([mt]\)\([ $]\)/\1\2/g'
im sure he doesn t 
```

我应该如何在上面的表达式中表达“空格或行尾”？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T23:45:31.873

空格还是行尾？使用`|`：

```
s/ \([mt]\)\( \|$\)/\1\2/g 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T00:03:39.667

仅匹配空格，然后是 m 或 t，然后是空格或换行符不会捕获带有标点符号的情况，`'`例如`"please don t!"`. 更通用的解决方案是使用单词边界：

```
echo "i m sure he doesn t test test don t." | sed 's/ \([mt]\)[[:>:]]/\1/g' 
```

OS X（我使用）需要时髦`[[:>:]]`，请参阅 Larry Gerndt 对[sed Whole word search and replace](https://stackoverflow.com/questions/1032023/sed-whole-word-search-and-replace)的回答。在其他 sed 口味上，您可以使用`\b`（任何单词边界）或`\>`代替。

```
# example with word boundary
echo "i m sure he doesn t test test don t." | sed 's/ \([mt]\)[[:>:]]/\1/g'
im sure he doesnt test test dont. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T23:48:18.927

使最后一个空格可选：

```
sed 's/[ ]\([mt][ ]\?\)$/\1/' input 
```

Posix 友好版本：

```
sed 's/[ ]\([mt][ ]\{,1\}\)$/\1/' input 
```

# mysql - Using concat with date turns search case sensitive

> ID：14131021
> 
> 赞同：2
> 
> 时间：2013-01-02T23:43:15.883
> 
> 标签：mysql, concat

The issue: Query concat on date column turns search case sensitive. When date column removed from concat the search is not case sensitive and returns the expected result set. This is happening in DEV but not QA environment.

Both environments have the same Server, Database and Connection collation settings, latin1_swedish_ci, but are different Mysql versions `(DEV:5.1.39; QA:5.1.61)`.

The table attributes in each environment (engine, charset) are the same: `InnoDB` and `latin1`.

`QRY:`

```
 select contact_id, lastname, firstname, dob
 from contact
 where concat(lastname,' ',firstname,' ',dob) = 'styles furious 1988-06-18'; 
```

We need the query to be case insensitive.

Any help is appreciated, thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:02:04.457

`CONCAT()`无论如何，当您可以在客户端拆分字符串并执行[此](http://www.sqlize.com/NHA5nYe5IG)操作时，您为什么还要使用？

```
select contact_id, lastname, firstname, dob
from contact
where lastname = 'styles' and firstname = 'furious' and dob = '1988-06-18' 
```

只要`lastname`和`firstname`列都是[非二进制的并且使用不区分大小写的排序规则](http://dev.mysql.com/doc/refman/5.6/en/case-sensitivity.html)，则此查询应该不区分大小写。如果您在这些列上有索引，它也应该*更有*效率。

无论如何，如果您绝对*坚持*使用`CONCAT()`，您始终可以强制结果具有正确的类型和排序规则，[如下所示](http://www.sqlize.com/v7BJ7VP783)：

```
select contact_id, lastname, firstname, dob
from contact
where
  convert(concat(lastname, ' ', firstname, ' ', dob) using latin1)
    collate latin1_general_ci = 'styles furious 1988-06-18'; 
```

但是，这确实很丑陋且效率低下，除非您真的没有其他选择，否则您甚至不应该考虑在生产中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:56:32.230

您是否尝试过在 concat 和字符串周围使用 upper 函数，以便比较两者的大写版本？

据我所知，= 总是区分大小写的（我自己对 mysql 很陌生，所以不是 100%，但我希望是这样）。环境之间是否可能存在其他一些差异（表中传递的数据或查询中要比较的值）会导致它返回一行？

# javascript - feedback.js 服务器 API

> ID：14131022
> 
> 赞同：7
> 
> 时间：2013-01-02T23:43:25.453
> 
> 标签：javascript, jquery, feedback

[feedback.js](http://experiments.hertzen.com/jsfeedback/)是一个很棒的 jquery 插件，它允许您创建反馈表单，其中包括在客户端浏览器上创建的屏幕截图以及表单。

如何将捕获的图像和用户评论发送到服务器端 api？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T19:09:54.993

事实上，feedback.js 是一段不可思议的 javascript。非常感谢您，尼克拉斯·冯·赫岑！不过，它不依赖于 jQuery，但您可以在同一页面中同时使用这两者。

您可以通过传递“url”选项将图像发送到服务器。反馈功能支持许多选项，例如：

```
Feedback({h2cPath:'/js/html2canvas.js',
          url: '/send/email/uri/on/server',
          label: "Send an email",
          header: "Let's send an email!",
          messageSuccess: "Done!",
          messageError: "Uh oh..."
        }) 
```

*   h2cPath : html2canvas.js 文件的位置（必选，其他选项可选）。
*   url ：用户提交反馈时调用的 URL。这是您的问题的答案。
*   label ：反馈按钮的文本。
*   header ：弹出窗口的标题文本。

url 中指定的 URL 使用 HTTP POST 方法调用，图像在 'data' 参数中。图像本身被编码为[DOMString](https://developer.mozilla.org/en/DOM/DOMString)。如果您想知道它包含的确切内容，请查看[toDataURL](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement)的规范。您的用户输入的其他信息来自其他参数，具体取决于您定义的表单字段。

# iphone - CATransform3D - 回到之前的状态

> ID：14131036
> 
> 赞同：6
> 
> 时间：2013-01-02T23:45:21.097
> 
> 标签：iphone, ios, catransform3d

嗨，我正在使用 CATransform3D。每次我使用变量弧度调用以下方法时，UIImageView 都会从前一个角度旋转“弧度 * M_PI”。我试图回到原来的状态。有什么办法吗？我介意我想发送一个弧度值，即 10 并且如果多次调用视图保持这些角度。

方法：

* * *

```
CATransform3D rotatedTransform = self.needleB.layer.transform;
rotatedTransform = CATransform3DRotate(rotatedTransform, radian * M_PI / 180.0, 0.0f, 0.0f, 1.0f);
self.needleB.layer.transform = rotatedTransform;
self.needleB.layer.anchorPoint = CGPointMake(0.5, 0.9);
self.needleB.center = CGPointMake(160, 250); 
```

* * *

谢谢 ！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T23:53:08.617

要撤消所有变换，`transform`请将图层的属性分配给`CATransform3DIdentity`.

# ruby-on-rails - 使用 Devise 时如何获取用户的上次活动时间？

> ID：14131040
> 
> 赞同：6
> 
> 时间：2013-01-02T23:45:40.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

假设用户在网站上花费了很长时间。
如何获取用户的最后活动时间。上次活动时间是指用户请求（访问页面。用户甚至不需要更新或创建新记录）到应用程序的最后一个时间戳。

用户可能在大约一小时前登录。然后他还在我的网站上上网。我想要用户发送的最后一次请求的时间。

是否可以？

设计有**current_sign_in_at**但不是最后一次活动时间。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-03T00:22:09.720

我实现这一点的方法是`last_active_at`在 User 模型中添加一个 datetime 列，然后在我的控制器中放入一些东西：

```
class ApplicationController
  before_filter :record_user_activity

  private

  def record_user_activity
    if current_user
      current_user.touch :last_active_at
    end
  end
end 
```

# orchardcms - How to add Image Field to Blog Post Summary in Orchard CMS?

> ID：14131041
> 
> 赞同：3
> 
> 时间：2013-01-02T23:45:42.253
> 
> 标签：orchardcms

Looking to display the Image Field in the Blog Post Summary on my Orchard site. It current displays on the blog post itself but not in the summary. How do I add it to the summary?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T00:55:15.387

部件和字段的显示在每个模块中的placement.info 文件中定义。假设您正在使用来自 Contrib.ImageField 模块的图像字段，您将需要覆盖摘要显示类型的字段的默认位置（在 Modules\Contrib.ImageField\Placement.info 中定义），默认情况下为：

```
<Match DisplayType="Summary">
  <Place Fields_Contrib_Image="-"/>
</Match> 
```

您可以通过将以下内容添加到您的主题的placement.info 文件来做到这一点（注意我已将其限制为仅限 BlogPost 内容类型）例如

```
<Match ContentType="BlogPost">
  <Match DisplayType="Summary">
    <Place Fields_Contrib_Image="Content"/>
  </Match>
</Match> 
```

这将在内容区域中显示 BlogPost 内容项的摘要视图的图像。有关在 Orchard 中放置的更多信息，请参阅[http://docs.orchardproject.net/Documentation/Understanding-placement-info](http://docs.orchardproject.net/Documentation/Understanding-placement-info)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-25T05:03:24.573

您可以使用媒体库选择器字段。我执行以下步骤将图像字段添加到博客摘要：

1.  将媒体库选择器字段添加到博客帖子内容类型

2.  然后在placement.info中添加以下内容

    ```
    <Match ContentType="Blog">
      <Match DisplayType="Summary">
        <Place Part_Image_Summary="Content">
     </Match>
    </Match> 
    ```

# c++ - Windows 8 desktop DirectX-11 development equivalent of ReadDataAsync()?

> ID：14131042
> 
> 赞同：2
> 
> 时间：2013-01-02T23:45:48.647
> 
> 标签：c++, windows-8, directx

I'm trying to access the ReadDataAsync() function to get a pointer to the compiled shader byte data to pass to CreateVertexShader(). I am trying to do this on windows 8 desktop in directx 11.

This function exists in the windows 8 metro development side of things in the header file DirectXHelper.h. However, it is my understanding that DirectXHelper.h does not exist on windows 8 desktop development (written in standard c++).

I am trying to duplicate page 21 of [http://d3dcoder.net/Data/Resources/d3d11Metro.pdf](http://d3dcoder.net/Data/Resources/d3d11Metro.pdf) in windows 8 desktop, and not windows 8 metro.

Does anybody know of how I could accomplish this? Or an equivalent of the function ReadDataAsync()?

# php - Random number that is 15 characters long and positive

> ID：14131043
> 
> 赞同：3
> 
> 时间：2013-01-02T23:45:48.867
> 
> 标签：php, random

I am trying to make random numbers that are exactly 15 characters long and positive using php. I tried `rand(100000000000000, 900000000000000)` but it still generates negatives and numbers less than 15\. Is there another function I am missing that can do this, or should I just use `rand(0, 9)` 15 times and concatenate the results?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T23:49:05.700

```
$i = 0;
$tmp = mt_rand(1,9);
do {
    $tmp .= mt_rand(0, 9);
} while(++$i < 14);
echo $tmp; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T23:50:14.810

您使用的是 32 位平台。要处理这些整数，您需要一个 64 位平台。

您可以执行两次 rand 并将其保存为字符串，如下所示：

```
$num1 = rand(100000,999999);
$num2 = rand(100000,999999);
$num3 = rand(100,999);
$endString = $num1.$num2.$num3; 
```

PS。我比我更喜欢跳跳虎解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T23:49:19.647

干得好。

```
function moreRand($len) { 
    $str = mt_rand(1,9);
    for($i=0;$i<$len-1;$i++) { 
        $str .= mt_rand(0, 9);
    }
    return $str;
}
echo moreRand(15); 
```

编辑：如果您想将执行时间缩短 0.00045 秒，

```
 function randNum() { return abs(rand(100000000000000, 900000000000000)); } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T23:50:10.473

请记住，这将返回一个字符串，而不是实际的整数值。

```
function randNum($length)
{
    $str = mt_rand(1, 9); // first number (0 not allowed)
    for ($i = 1; $i < $length; $i++)
        $str .= mt_rand(0, 9);

    return $str;
}

echo randNum(15); 
```

# java - How do I have an ActionBar icon/logo that overlaps the content as well?

> ID：14131045
> 
> 赞同：3
> 
> 时间：2013-01-02T23:46:17.197
> 
> 标签：java, android, android-actionbar, actionbarsherlock

I'm currently making one of my very first applications. I'm using ActionBarSherlock. I would like to make my logo overlap the actionbar (scrollview).

Currently I have main_activity.xml. In MainActivity.java I use setContentView to view main_activity.xml. After that I use getSupportActionBar() for ActionBarSherlock. I've tried things out using RelativeLayout  (http://www.mkyong.com/android/android-relativelayout-example/). That didn't really work because there are multiple layouts.

So I've tried some things right and left, but it always ends up infront or behind the actionbar, or stops just before reaching the content. It's because of two different layouts, that's what I know. But how can I going to solve this? Is it possible? Thanks in advance!

What I want: [http://f.cl.ly/items/3N0w243N1t2Q3i1H1f1k/Untitled-1.png](http://f.cl.ly/items/3N0w243N1t2Q3i1H1f1k/Untitled-1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T23:54:45.367

您可以：

**A. 将您的图像一分为二**
将顶部作为 ActionBar 徽标，然后将底部显示在您的内容上。

**B. 使用单个图像**
您需要一个仅包含您的徽标的布局文件（您可能需要像`ImageView`inside a`LinearLayout`这样的东西，这样您就可以轻松设置正确的边距）。然后在调用`setContentView`您的活动后，添加您的徽标视图：

```
ViewGroup decorViewGroup = (ViewGroup) getWindow().getDecorView();
decorViewGroup.addView(logoView); 
```

**使用布局文件**

示例布局文件 (logo_view.xml)：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/logo_image"
        android:scaleType="center"
        android:layout_marginLeft="10dip"
        />

</LinearLayout> 
```

膨胀布局文件：

```
LayoutInflater inflater = LayoutInflater.from(this);
View logoView = inflater.inflate(R.layout.logo_view, null, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-02T10:26:15.987

尽管原始答案适用于某些设备，但在其他设备上，图像位于状态栏下方。我通过获取顶部 ActionBar 的位置并将其与徽标图像顶部的位置进行比较来解决此问题，然后仅添加一些顶部填充，如下所示：

```
 // Inflate logo layout
    LayoutInflater inflater = LayoutInflater.from(this);
    final View logoView = inflater.inflate(R.layout.menu_logo, null);

    // Add logo to view
    ViewGroup viewGroup = (ViewGroup) getWindow().getDecorView();
    viewGroup.addView(logoView);

    // Adjust the logo position
    int resId = getResources().getIdentifier("action_bar_container", "id", "android");
    final View actionBarView = viewGroup.findViewById(resId);
    if (actionBarView != null) {
        actionBarView.getViewTreeObserver().addOnGlobalLayoutListener(
                new ViewTreeObserver.OnGlobalLayoutListener() {
                    public void onGlobalLayout() {
                        // Remove the listener
                        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
                            actionBarView.getViewTreeObserver().removeOnGlobalLayoutListener(this);
                        } else {
                            actionBarView.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                        }

                        // Measure views
                        int[] location = new int[2];
                        actionBarView.getLocationOnScreen(location);

                        int[] logoLocation = new int[2];
                        logoView.getLocationOnScreen(logoLocation);

                        // Add top padding if necessary
                        if (location[1] > logoLocation[1]) {
                            logoView.setPadding(0, location[1] - logoLocation[1], 0, 0);
                        }
                    }
                }
        );
    } 
```

这适用于运行 Android 4.0 至 4.4.4 以及 Android L 预览版的各种设备（手机、大/小型平板电脑 - 包括 Kindle Fire HDX）。

# ruby-on-rails - No route matches {:controller=>"devise/home", :action=>"students"}

> ID：14131047
> 
> 赞同：0
> 
> 时间：2013-01-02T23:46:28.460
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

I've searched for an answer to this and nothing has helped.

I have the following in my view:

```
<div id="user_nav">
<% if user_signed_in? %>
  Logged in as <strong><%= current_user.first_name  + " " +current_user.last_name%></strong>.
  <%= link_to 'Edit profile', edit_user_registration_path %> |
  <%= link_to "Logout", destroy_user_session_path, method: :delete %>
<% else %>
  <%= link_to "Sign up", new_user_registration_path %> |
  <%= link_to "Login", new_user_session_path %>
<% end %> 
```

Which is straight from the railscast on devise. Suddenly the paths are not working anymore. (sign up or sign in) for example when I click login i get the error

```
No route matches {:controller=>"devise/home", :action=>"students"} 
```

Ive tried using `<%= link_to "Login", :controller => '/devise/sessions', :action => 'new' %>` jsut for kicks and it returns the same error.

Yes I have `devise_for :users` in my route file.

`rake routes` return all the right routes including

```
new_user_session GET    /users/sign_in(.:format)                  devise/sessions#new
        user_session POST   /users/sign_in(.:format)                  devise/sessions#create 
```

Any help would be awesome! I'm stumped!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:11:08.480

查看我的堆栈跟踪，我的布局中的某些东西（链接）正在抛弃它。我为设计[创建了一个自定义布局](https://github.com/plataformatec/devise/wiki/How-To%3a-Create-custom-layouts)，现在一切正常。

# jquery - IE中的网页空白，直到鼠标移动

> ID：14131048
> 
> 赞同：1
> 
> 时间：2013-01-02T23:46:40.177
> 
> 标签：jquery, internet-explorer

这可能是我职业生涯中见过的最奇怪的浏览器怪癖。当我在 Chrome、FF 等中加载[页面时，它工作正常。](https://shop.treasureandbond.com/index.php?c)当我在 IE 7-10 中加载它时，页面是完全空白的，然后我将鼠标移动一个像素，它会立即绘制整个页面。

它在推出时并没有这样做，但我不知道它是什么时候开始的，所以我不确定是什么变化导致了它。

经过一些测试，我发现如果我重命名`js/jquery.js`（使其无法加载），问题就会消失。然后我将它重命名为链接的 URL，问题又开始了。我使用的是 jQuery 1.7.1，所以我升级到 1.8.3，但这并没有改变任何东西。

我在谷歌上找不到任何东西，除了[这个未回答的 SO question](https://stackoverflow.com/questions/12445080/webpage-loads-only-when-mouse-is-moved)，它可能是也可能不是同一件事。

在 IE9 中，开发者工具控制台只显示这些警告，我认为这些警告不相关：

```
HTML1113: Document mode restart from IE9 Standards to IE7 Standards
SEC7115: :visited and :link styles can only differ by color. Some styles were not applied to :visted 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T00:53:41.653

这可能是 IE peekaboo 错误。将“位置：相对”或“缩放：100%”添加到违规 div 的 css 中。

# javascript - KnockoutJS foreach list - post to server on item change, best practice

> ID：14131051
> 
> 赞同：1
> 
> 时间：2013-01-02T23:46:48.530
> 
> 标签：javascript, jquery, knockout.js

I'm using Knockout's foreach binding to generate a list of inventory items with a quantity input field. When the user changes the quantity I want to post the new value to the server.

I've come up with a solution, but I'm interested in feedback as to whether I'm using best knockout practices.

I'm using two view models. One represents the inventory and is just an observable array of individual inventory line items:

```
var inventory = function(lineItems) {
    var self = this;
    self.items = ko.observableArray(lineItems);
}; 
```

The second represents an inventory line item:

```
var lineItem = function(id, text, quantity, quantityChangedCallback) {
    var self = this;
    self.id = ko.observable(id);
    self.itemName = ko.observable(text);
    self.quantity = ko.observable(quantity);

    self.quantity.subscribe(function() {
        quantityChangedCallback(self);
    });
}; 
```

HTML is:

```
<ul data-bind="foreach: items">
    <li>
        <span data-bind="text: itemName"></span>:&nbsp;
        <input class="invLineItem" data-bind="value: quantity"/>
    </li>
</ul> 
```

The rest of my javascript:

```
var lineItemArray = [
    new lineItem(1, 'Item 01', 0, onQuantityChanged),
    new lineItem(2, 'Item 02', 0, onQuantityChanged),
    new lineItem(3, 'Item 03', 2, onQuantityChanged)
    ];

ko.applyBindings(new inventory(lineItemArray));

function onQuantityChanged(item) {
    alert("Post change to server: " + ko.toJSON(item));
} 
```

My questions are,

1) Is my use of subscribe a good practice for getting notified when a quantity changes? It seems to work great and only gets called when the corresponding quantity input element's focus is lost and its value changed. This is exactly what I want.

2) What about the callback approach? This is the part that doesn't feel quite right, but it was the cleanest way I could come up with to get back out of an item's view model in order to apply additional logic and do the post.

I have a fiddle here: [http://jsfiddle.net/kenswdev/YHHSu/7/](http://jsfiddle.net/kenswdev/YHHSu/7/)

Thanks in advance for any suggestions!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:23:28.530

这做得很好。针对您的问题：

1) 是的，这是一个完美的订阅用例。

2) 您可以考虑创建一个构造函数来封装您想要从订单项中获得的行为，而不是外部回调。例如：

```
function LineItem(id, text, quantity, quantityChangedCallback) {
    var self = this;
    self.id = ko.observable(id);
    self.itemName = ko.observable(text);
    self.quantity = ko.observable(quantity);

    self.quantity.subscribe(function() {
      self.onChange();
    });
};

LineItem.prototype = {
  onChange: function() {
    alert("Post change to server: " + ko.toJSON(this));
  }
}; 
```

您是否考虑过使用下划线的 debounce() 之类的方法来消除 ajax 调用的抖动？这可能有助于防止一个非常健谈的 API 接口：

*   [http://underscorejs.org/#debounce](http://underscorejs.org/#debounce)

# .net - 是否有 .Net 表单容器？

> ID：14131054
> 
> 赞同：1
> 
> 时间：2013-01-02T23:47:02.810
> 
> 标签：.net, vb.net, winforms

> **可能重复：**
> [在 C# 中为 Windows 窗体创建向导](https://stackoverflow.com/questions/2340566/creating-wizards-for-windows-forms-in-c-sharp)

我是开发 VB .Net 表单的新手，目前我有一个“向导”，我只是将它设置为不同的表单，但问题是当更改表单时，Windows 会执行完整的动画并且窗口位置可以改变。这在用户端并不是那么好。

我见过的另一种选择是手动隐藏/显示所有元素，但这很混乱且难以维护。

那么是否有一个父容器可以在其中指定单独的表单，所以所有表单逻辑仍然在单独的文件中，但它是通过一个表单访问的（从用户的角度来看）？

注意：我目前正在使用 .Show 和 .Hide 在表单之间切换。

使用常规 Windows 窗体、.net 2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:56:09.717

您应该考虑将控件放在一个或多个`UserControl`s 中。这使您可以像表单一样设计和使用它，但可以作为单个“控件”工作，您可以根据需要显示或隐藏它。

有关详细信息，请参阅MSDN 上[的使用 .NET Framework 开发自定义 Windows 窗体控件。](http://msdn.microsoft.com/en-us/library/6hws6h2t.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:50:57.490

您可以使用一些技巧将表单加载到面板中。我将面板添加到主窗体，然后将要显示的新窗体变暗，然后将其添加到面板中。想要显示另一个表单，清除面板并加载新表单。这是我用来将表单加载到面板中的代码：

```
Dim formToShow As New Form2
formToShow.TopLevel = False
formToShow.WindowState = FormWindowState.Maximized
formToShow.FormBorderStyle = Windows.Forms.FormBorderStyle.None
formToShow.Visible = True
Panel1.Controls.Add(formToShow) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T23:53:13.053

将每个窗体的控件放在具有相同大小和位置的面板中。因此，您不必一个一个地隐藏所有控件，您只需隐藏一个面板并显示另一个面板即可。

# robots.txt - 为什么当我在 robots.txt 中阻止目录时，它的内容仍然出现？

> ID：14131057
> 
> 赞同：3
> 
> 时间：2013-01-02T23:47:42.183
> 
> 标签：robots.txt

这就是我在我的 中得到的`robots.txt`，放在基本目录中，当然：

```
User-Agent: *
Disallow: /foo/ 
```

但是，在 Google 中，我没有 的索引`/foo/`，但由于某种原因，我仍然`/foo/foo.php`在 Google 中显示为链接。

怎么会？我是不是写错了什么？我需要写点别的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T23:50:57.977

当您`robots.txt`的网站上线后，Google 已经可以索引`/foo/`.

[您可以通过Google 网站管理员工具](https://www.google.com/webmasters/tools/home?hl=en)- 删除请求删除已编入索引的文件。

![删除请求](../Images/635d50a618b751b1d8a08d7183db949f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:16:34.823

robots.txt 不会阻止 Google*链接*到您被屏蔽的网页。Google 不会*索引*您被阻止的页面（因此它不会显示页面标题/描述/片段），但如果它找到指向任何被阻止页面的链接，它可能仍会从他们的搜索结果中链接它。

如果您还想禁止这种链接，您可以使用带有and的`meta`元素。`robots``noindex`

# php - 来自数据库的会话详细信息中的用户名

> ID：14131062
> 
> 赞同：0
> 
> 时间：2013-01-02T23:48:18.050
> 
> 标签：php, mysql

我试图通过根据会话上的用户名显示数据库中的用户数据来让我的会话变量用户名与我的数据库一起使用。

但是，我的脚本不起作用。我应该在这里做什么？

```
<?php session_start(); ?>
<?php include "includes/connection.php"; ?>
<?php

$query = mysql_query("SELECT id, username, password, email, name, aim, admin, time,        phone, address
FROM users 
WHERE username = $_SESSION['myusername']");

while($row = mysql_fetch_object($query) ) 
{ 
echo "$row->Id<br />";

echo "Username: . $row['id']";<br />"

//echo "$row->Password<br />";

//echo "$row->Email<br />"; 

//echo "$row->Name<br />";

//echo "$row->Aim<br />";

//echo "$row->Admin?<br />";

//echo "$row->Time<br />";

//echo "$row->Phone<br />";

//echo "$row->Address<br />";
}

?> 
```

该脚本不工作，而是在屏幕上显示以下内容：

请参阅： [http ://www3.londonmet.ac.uk:8008/~iia0014/userdetails.php](http://www3.londonmet.ac.uk:8008/~iia0014/userdetails.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:56:43.480

你有很多事情是错的。`html`你在和`php` 使用引号之间混合。

和它之间的`Id`不同`id`

你还必须逃避你的变量，

看这个

```
 $myusername = mysql_real_escape_string($_SESSION['myusername']);
   $query = mysql_query("SELECT id, username, password, email, name, aim, admin, time,        phone, address
     FROM users 
 WHERE username = '".$myusername."' ");

 while($row = mysql_fetch_array($query) ) 
 { 
echo $row['id'] ."<br />";

echo "Username:" . $row['username']."<br />" ;

 ....
 ....  //continue same method as above by caring the quotes in their places . dont mix them with php

}

?> 
```

我建议您使用 PDO 或 MYSQLI [**LOOK THIS**](http://php.net/manual/en/function.mysql-fetch-object.php)已弃用。所以最好转向 PDO 或 SQLI

*   **mysql_fetch_object()** is similar to **mysql_fetch_array()**, with one difference - an object is returned, instead of an array. Indirectly, that means that you can only access the data by the field names, and not by their offsets (numbers are illegal property names).

# c# - 当我们需要维护旧版支持时，如何更新现有数据结构？

> ID：14131063
> 
> 赞同：1
> 
> 时间：2013-01-02T23:48:17.480
> 
> 标签：c#, design-patterns, serialization

长话短说，我们有一个老化的应用程序，在我们开发它的这些年里，它变得有些笨拙。不过，有一些固定的东西已经开始引起问题，这让我开始思考如何更好地构建数据。但是，这样做的问题是，我们*需要*维护对客户可能拥有的旧序列化数据文件的支持，如果我们对类进行任何彻底的更改，这使得迁移到新版本变得非常困难。

我的问题是，如果我们决定投入一些精力来重构代码，是否有一个好的、经过测试的流程/架构模式可以在未来帮助我们？

**编辑**都是二进制序列化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:52:48.343

只是大声思考，但类似于 COM 过去“版本”事物的方式可能会起作用..类似于：

```
[Serializable]
public class Data
{
    public string Field1 {get; set;}
}

[Serializable]
public class Data2
{
    public Data2() { _version1 = new Data();}

    [NonSerialized]
    private Data _version1; 
    public string Field1 
    { 
        get { return _version1.Field1;} 
        set { _version1.Field1 = value;}
    }
    public int Field2 {get; set;}
}

[Serializable]
public class Data3
{
    public Data3() { _version2 = new Data2();}

    [NonSerialized]
    private Data2 _version2;
    public string Field1 
    { 
        get { return _version2.Field1;} 
        set { _version2.Field1 = value;}
    }
    public int Field2 
    { 
        get { return _version2.Field2;} 
        set { _version2.Field2 = value;}
    }
    public double Field3 {get; set;}    
} 
```

实际上，现在我正在看这个摆在我面前的东西，我不能说它接近理想的解决方案。它会很快导致“版本号地狱”的泛滥，这很像现在的 COM（有时查看各种 DirectX 接口名称）

也就是说，这*是*一个潜在的答案，所以我会留下它。

# php - 自动压缩文件夹

> ID：14131064
> 
> 赞同：0
> 
> 时间：2013-01-02T23:48:29.430
> 
> 标签：php

我正在创建一个自动备份系统。我计划运行一个 Cron 作业，每周一次，自动创建备份并将其通过电子邮件发送到安全电子邮件。（这样，即使服务器爆炸成一百万个，我也会对我的文件进行完整的最近备份，任何管理员都可以访问）

我发现了这个简单的方法：`system('tar -cvzpf backup.tar.gz /path/to/folder');`

它几乎完美地满足了我的需要。唯一的问题是我不想在备份中包含一个目录。在这个网站上，用户上传自己的头像，保存图片的目录在我要备份的目录中。因为我是通过电子邮件发送的，所以我必须保持文件夹相对较小，并且加起来有几千张图片。有什么办法可以告诉函数忽略这个目录并压缩其他所有内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T23:52:14.843

`find /path/to/folder -not -ipath '*baddirectory*' -print | xargs tar -cvzpf backup.tar.gz`尽管您可能会考虑将 PHP 传递给您使用的所有二进制文件的完整路径（在上面的命令中：find、xargs 和 tar）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T00:17:18.517

从焦油人：

```
 tar --exclude='/path/to/folder/bad' 
```

所以你会得到：

```
system('tar -czpf --exclude='/path/to/folder/bad'  backup.tar.gz /path/to/folder'); 
```

您可以忽略 v（详细），因为您没有看到正在执行的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T00:01:04.780

您可以像手动一样从 --exclude-tag-all PATTERN long 选项中排除某些内容。不幸的是，我没有找到一个关于模式的好例子。

我想以下排除将起作用：

```
--exclude-tag-all=/path/foldernotinclude/. 
```

因为它应该匹配“目录”文件标签。

幸运的是，另一个用户将对要使用的模式发表评论。

# php - 我的 PHP 代码序列化，但不反序列化

> ID：14131066
> 
> 赞同：0
> 
> 时间：2013-01-02T23:48:53.100
> 
> 标签：php, serialization

这是我的代码。

```
$data = array(
        '24 Jan|8:30' => '12.6',
        '22 Feb|8:30' => '250',
        '11 Mar|8:10' => '0',
        '31 Apr|23:30' => '7',
        '32 Apr|23:30' => '80',
        '33 Apr|23:30' => '67',
        '34 r|23:30' => '45',
        '35 Ap|23:30' => '66',
        '34 Lr|23:30' => '23',
        '3 Apr|23:30' => '23'
    );

    //echo serialize($data);
    $x = unserialize('a:10:{s:12:"24 Jan|8:30 ";s:4:"12.6";s:12:"22 Feb|8:30 ";s:3:"250";s:12:"11 Mar|8:10 ";s:1:"0";s:12:"31 Apr|23:30";s:1:"7";s:12:"32 Apr|23:30";s:2:"80";s:12:"33 Apr|23:30";s:2:"67";s:12:"34 r|23:30 ";s:2:"45";s:12:"35 Ap|23:30 ";s:2:"66";s:12:"34 Lr|23:30 ";s:2:"23";s:12:"3 Apr|23:30 ";s:2:"23";}');
    var_dump($x); 
```

不适用于反序列化功能。请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T23:56:45.910

```
'a:10:{s:12:"24 Jan|8:30 ";s:4:"12.6";s:12:"22 Feb|8:30 ";s:3:"250";s:12:"11 Mar|8:10 ";s:1:"0";s:12:"31 Apr|23:30";s:1:"7";s:12:"32 Apr|23:30";s:2:"80";s:12:"33 Apr|23:30";s:2:"67";s:12:"34 r|23:30 ";s:2:"45";s:12:"35 Ap|23:30 ";s:2:"66";s:12:"34 Lr|23:30 ";s:2:"23";s:12:"3 Apr|23:30 ";s:2:"23";}' 
```

...不是有效的序列化。具体来说，该`s:12:"34 r|23:30 ";`段表示该字符串`34 r|23:30`包含 12 个字符，但它没有。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T23:56:06.303

$data 的序列化表示和您尝试反序列化的字符串不同。

[http://codepad.viper-7.com/3zlk1a](http://codepad.viper-7.com/3zlk1a)

在偏移量 199 处，您会看到

```
s:12:"34 r|23:30 " 
```

但字符串 ( `s`) 不是 12 个字符长（这就是`s:12:`意思）。我猜有些东西直接修改了序列化的字符串。只是不要这样做:) 始终反序列化并使用结构化值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T23:51:55.253

```
 $a = serialize($data);
 $x = unserialize($a); 
```

# delphi - 在没有 iOS 硬件的情况下创建 iOS 软件

> ID：14131070
> 
> 赞同：2
> 
> 时间：2013-01-02T23:49:15.050
> 
> 标签：delphi

我可以使用 Delphi XE2 或 DELPHI XE3 为 iOS（MAC / IPAD）创建免费软件软件，而无需访问任何 iOS 硬件吗？根据以下内容，已经看到了使用 iOS HW 的富人的流程：

[http://blogs.embarcadero.com/ao/2011/10/26/39188](http://blogs.embarcadero.com/ao/2011/10/26/39188)

就我而言，我只想使用 DELPHI 和 FIREMONKEY 为 iOS 发布我的免费软件程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T23:59:46.403

XE3 中禁用了 iOS 开发，因为新的 FireMonkey 2.0 框架还没有为 iOS 做好准备。iOS 支持将在未来的版本中重新启用。XE3 仅支持 Windows 和 Mac OSX 开发。

XE2 支持 iOS 开发，仅使用较旧的 FireMonkey 1.0 框架。您可以将 iOS 模拟器设置为 Delphi 项目的目标平台。

但是，在任何配置中，您都需要安装有 XCode 编译器的 Mac 才能实际生成 Mac/iOS 可执行文件。Delphi 编译器当前将代码编译成 XCode 然后使用的中间格式。Embarcadero 将发布一个新的 Delphi 编译器，在以后的版本中直接生成 Mac/iOS 可执行文件。

如果你不能等那么久，那么请改用 FreePascal/Lazarus。

# drupal - Drupal - CCK - 节点参考 - 添加新节点的按钮

> ID：14131073
> 
> 赞同：0
> 
> 时间：2013-01-02T23:49:33.630
> 
> 标签：drupal, cck

例如，我在 Drupal 中创建了带有引用字段的新节点类型。我想在引用字段附近有一个按钮，用于添加引用类型的新节点。添加后返回编辑表单。我找到了这个模块——但它只是添加了一个新的空节点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:02:31.443

Checkout [References Dialog](http://drupal.org/project/references_dialog).

Only available in D7 however but it does eactly what you described.

# c++ - 从 DLL 链接到 OpenGL：运行时 glew 函数为空

> ID：14131083
> 
> 赞同：2
> 
> 时间：2013-01-02T23:50:54.547
> 
> 标签：c++, visual-studio-2010, opengl, dll

我正在构建一个链接到 OpenGL 的 DLL。但是在调用一些函数（如 glGenBuffers）时我遇到了一个问题，因为显然 __glewGenBuffers （和其他 glew 缓冲区函数）为空。一切都可以正确编译，并且相同的代码在可执行文件中有效，但在我的 DLL 中无效。我正在使用 VS 2010。关于从 DLL 链接到 OpenGL 的任何想法？

编辑：我忘了提，我实际上是在尝试将引擎（静态库）链接到 DLL，而 exe 文件也使用它（它几乎可以做所有事情，除了我想放入我的 DLL 的一小部分） . 不过，如果我能让它更好地工作，我肯定会很好地只使用来自 DLL 的 OpenGL 调用，而不是链接引擎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T00:25:25.837

GLEW 必须做一些技巧来处理某些平台上的上下文相关函数指针。这些平台之一是 Windows。使事情正常工作的一个万无一失的方法是

1.  测试是否真的绑定了 OpenGL 上下文
2.  调用 glewInit()

*每次*调用 DLL 中使用扩展 OpenGL 功能的函数时。IE

```
… some_DLL_exported_function(…)
{
    if(    NULL == wglGetCurrentContext() || 
        GLEW_OK == glewInit() ) {
        return …;
    }
} 
```

# ruby-on-rails-3 - 如何为单独的字段分组单选按钮？

> ID：14131088
> 
> 赞同：0
> 
> 时间：2013-01-02T23:51:37.037
> 
> 标签：ruby-on-rails-3, forms, radio-button

我有一个 Rails 应用程序，它为用户分配任务并通过电子邮件提示他们回来并注意他们的任务已完成或采取其他行动。我有三个不同的操作（稍后提醒我、选择不同的作业或从教练那里获得帮助），它们由三个单选按钮表示。如何对这些进行分组，以便用户一次只能选择三个操作之一？

```
 <%= form_for(@assignment, :url => user_assignment_path(@user, @assignment)) do |a| %>
        <%= a.radio_button :next_reminder_date, value: (Date.today + 2) %> <h3>Remind me again in 2 days.</h3><br>
        <%= a.radio_button :coach_requested, true %> <h3>I'm stuck! Have a coach contact me.</h3><br>
        <%= a.radio_button :abandoned, true %> <h3>This sucks. Give me another assignment.</h3><br>

        <%= a.submit "Update assignment", class: "btn btn-primary btn-large" %>
    <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T00:15:20.423

我认为你有两个选择。一种是使用 JavaScript 设置值。设置任何值时，您可以重置其他值。如果用户没有 JavaScript，这将不起作用，所以我推荐选项 2。

在你的视图中使用这样的东西：

```
radio_button_tag :next_action, :next_reminder_date
radio_button_tag :next_action, :coach_requested
radio_button_tag :next_action, :abandoned 
```

然后在你的控制器中：

```
case params[:next_action]
when :next_reminder_date
  @assignment.next_reminder_date = Date.today + 2
when :coach_requested
  @assignment.coach_requested = true
when :abandoned
  @assignment.abondoned = true
end 
```

我希望这会有所帮助。

# python - 更好的单线翻转字典的键和值

> ID：14131089
> 
> 赞同：7
> 
> 时间：2013-01-02T23:51:38.773
> 
> 标签：python

我写了一个单行来完成这个：

```
vocab_tag = dict(zip(*reversed(zip(*tag_vocab.items())))) 
```

有人可以写一个更容易理解/更直接的吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T23:52:57.927

可读且简短的[dict 理解](http://www.youtube.com/watch?v=pShL9DCSIUw)可能是最好的：

```
vocab_tage = {value: key for key, value in tag_vocab.items()} 
```

在 2.7 之前，字典推导不存在，但我们可以用`dict()`生成器表达式替换它们：

```
vocab_tage = dict((value, key) for key, value in tag_vocab.items()) 
```

值得注意的是，这假定没有具有相同值的键（与问题中的示例一样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T03:20:20.413

试试这个单行：`dict(map(reversed, table.items()))`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-11T12:58:04.750

# 性能+可读性

考虑到时间性能，[字典理解](https://www.python.org/dev/peps/pep-0274/)是最好的解决方案。它既可读又高性能。

给定一个字典，`a`，定义为

```
a = {'1' : 'a', '2' : 'b', '3' : 'c', '4' : 'd'} 
```

实现以下列方式执行：

## 原来的

```
%%timeit
b = dict(zip(*reversed(zip(*a.items())))) 
```

* * *

```
100000 loops, best of 3: 3.09 µs per loop 
```

## [加雷斯·拉蒂](https://stackoverflow.com/users/722121/gareth-latty)的[回答](https://stackoverflow.com/a/14131104/2087463)

```
%%timeit 
c = {v: k for k, v in a.items()} 
```

* * *

```
1000000 loops, best of 3: 776 ns per loop 
```

## [Noctis Skytower](https://stackoverflow.com/users/216356/noctis-skytower)的[回答](https://stackoverflow.com/a/14132576/2087463)

```
%%timeit 
d = dict(map(reversed, a.items())) 
```

* * *

```
100000 loops, best of 3: 4.38 µs per loop 
```

## 使用方法修改[Gareth Latty](https://stackoverflow.com/users/722121/gareth-latty)的[答案](https://stackoverflow.com/a/14131104/2087463)[`.iteritems()`](https://docs.python.org/2/library/stdtypes.html#dict.iteritems)

[如果使用 < Python 3，`.iteritems()`执行速度会稍快一些，并且内存效率更高](https://stackoverflow.com/a/10458567/2087463)。

```
%%timeit
e = {v: k for k, v in a.iteritems()} 
```

* * *

```
1000000 loops, best of 3: 598 ns per loop 
```

# c# - GenericPrincipal 的角色正在丢失

> ID：14131090
> 
> 赞同：0
> 
> 时间：2013-01-02T23:51:42.783
> 
> 标签：c#, asp.net, forms-authentication

我正在尝试在我的动态数据网站上设置角色，但遇到了问题。

在我由 Generic Principal 设置的时间和点击默认页面之间，我的主体的角色丢失了。主体仍列为 context.user，因为当我调试会话并检查 context.user 对象时，我设置的用户就是我设置的用户；但与该用户相关的所有角色似乎都丢失了。

这就是我要做的事情。

登录页面

```
public partial class Login : System.Web.UI.Page
{
    string[] masterServiceResult;

protected void btnSubmit_Click(object sender, EventArgs e)
{
    if (IsAuthenticUser(login_email.Text, login_password.Text))
    {
        FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1, masterServiceResult[0], DateTime.Now, DateTime.Now.AddMinutes(30), false, masterServiceResult[2], FormsAuthentication.FormsCookiePath);
        string encryptedCookie = FormsAuthentication.Encrypt(ticket);
        HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encryptedCookie);
        Response.Cookies.Add(cookie);
        Response.Redirect(FormsAuthentication.GetRedirectUrl(masterServiceResult[0], true));

    }
}

private bool IsAuthenticUser(string email, string password)
{
    MembershipService membershipService = new MembershipService();
    var result = membershipService.GetUserAndRoleFromCredentials(email, password);

    //result is an array with userName, userId, error(bool) as string, and error message if any
    if (bool.Parse(result[3]) == false)
    {
        masterServiceResult = result;
        return true;
    }

    return false;
}
} 
```

然后在 Global.asax 我已附加到 AuthenticateRequest 事件

```
void Global_AuthenticateRequest(object sender, EventArgs e)
{
    if (Request.IsAuthenticated)
        SetupRoles();
}

private void SetupRoles()
{
    if (Context.User != null)
    {
        string cookieName = FormsAuthentication.FormsCookieName;

        HttpCookie authCookie = Context.Request.Cookies[cookieName];

        if (authCookie == null)
            return;

        FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);

        string[] roles = authTicket.UserData.Split(new char[] { '|' });

        IIdentity fi = Context.User.Identity;
        IPrincipal pi = new GenericPrincipal(fi, roles);

        Context.User = pi;

        //sets the application principal to use the logged on user account
        System.Threading.Thread.CurrentPrincipal = System.Web.HttpContext.Current.User;

        // sanity check to ensure the role was set up.
        if (User.IsInRole("Admin"))
        {
            int i = 0; // debug line
        }
    }
} 
```

此时一切都按预期工作；我的测试帐户现在设置为 context.user，Current Principal 用户设置为当前用户，并且 Admin 的用户角色导致“int i=0”调试行被命中。但是，一旦默认页面 Page_Load 被点击，情况就不再如此了。

默认页面。更新 01/03/12 以显示另一个测试用例。protected void Page_Load(object sender, EventArgs e) { System.Collections.IList visibleTables = MetaModel.Default.VisibleTables;

```
 // this line comes back as false, though at this point the user name is the same.
    if (User.IsInRole("Admin"))
    {
        int i = 0;
    }

    // the next 4 lines of code is a work around I can do to retrieve the roles from the ticket.
    string cookieName = FormsAuthentication.FormsCookieName;
    HttpCookie authCookie = Context.Request.Cookies[cookieName];
    FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);
    // this line of code will correctly show the users role
    string[] roles = authTicket.UserData.Split(new char[] { '|' });

    foreach (var table in MetaModel.Default.Tables)
    {
        var permissions = ((MetaTable)table).GetTablePermissions(roles);
        if (permissions.Contains(TablePermissionsAttribute.Permissions.DenyRead))
            visibleTables.Remove(table);
    }

    if (visibleTables.Count == 0)
    {
        throw new InvalidOperationException("There are no accessible tables. Make sure that at least one data model is registered in Global.asax and scaffolding is enabled or implement custom pages.");
    }
    Menu1.DataSource = visibleTables;
    Menu1.DataBind();
} 
```

*更新：我能够从身份验证票证中获取用户的角色，并且主体是正确的，但我对 User.IsInRole 行失败的原因感到困惑。

# jquery - 为 Facebook 图形编码 url，如计数调用

> ID：14131095
> 
> 赞同：0
> 
> 时间：2013-01-02T23:51:58.497
> 
> 标签：jquery, facebook

我正在尝试使用 fql 查询对 facebooks 图形 API 进行简单调用。

```
$.ajax({
    url: 'https://api.facebook.com/method/fql.query?query=' + encodeURIComponent('select total_count,like_count,comment_count,share_count,click_count from link_stat where url=' + 'http://www.google.se'),
    success: s,
    error: e
}); 
```

错误：`Parser error: unexpected ':' at position 97.`

有人可以解释我应该如何对 URL 进行编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:03:20.317

在 Chrome 的 Web 开发者控制台上对我来说很好用：

```
> encodeURIComponent('select total_count,like_count,comment_count,share_count,click_count from link_stat where url=' + 'http://www.google.se')
> "select%20total_count%2Clike_count%2Ccomment_count%2Cshare_count%2Cclick_count%20from%20link_stat%20where%20url%3Dhttp%3A%2F%2Fwww.google.se" 
```

听起来可能不是`encodeURIComponent`编码失败，而是代码本身的语法解析错误。介意在第 97 行附近发布代码，代码的第 97 行到底是什么？

# performance - 为什么条件移动不易受到分支预测失败的影响？

> ID：14131096
> 
> 赞同：94
> 
> 时间：2013-01-02T23:52:00.120
> 
> 标签：performance, assembly, optimization, cpu-architecture, branch-prediction

在阅读[了这篇文章（在 StackOverflow 上的答案）](https://stackoverflow.com/a/11227902/155137)（在优化部分）之后，我想知道为什么条件移动不容易受到分支预测失败的影响。我在[这里找到了一篇关于 cond move 的文章（AMD 提供的 PDF）](https://www.cs.tufts.edu/comp/40-2011f/readings/amd-cmovcc.pdf)。同样在那里，他们声称 cond 的性能优势。移动。但这是为什么呢？我没看到。在评估该 ASM 指令时，尚不知道前面的 CMP 指令的结果。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-01-03T00:15:43.607

## 错误预测的分支很昂贵

如果一切顺利的话，现代处理器通常每个周期执行 1 到 3 条指令（如果它没有停止等待这些指令从先前指令或内存到达的数据依赖关系）。

上面的语句非常适用于紧密循环，但这不应该让您忽视一个额外的依赖关系，它可以阻止指令在其循环到来时被执行：对于要执行的指令，处理器必须已经开始获取和解码它在 15-20 个周期之前。

处理器遇到分支应该怎么做？获取和解码两个目标不会扩展（如果有更多分支，则必须并行获取指数数量的路径）。因此，推测性地，处理器仅获取和解码两个分支之一。

这就是错误预测分支代价高昂的原因：它们花费了 15-20 个周期，而这些周期通常是不可见的，因为高效的指令流水线。

## 有条件的搬家从来都不是很贵

有条件的移动不需要预测，所以它永远不会有这个惩罚。它具有数据依赖性，与普通指令相同。事实上，条件移动比普通指令有更多的数据依赖，因为数据依赖包括“条件真”和“条件假”两种情况。`r1`在有条件地移动到的指令之后`r2`， 的内容`r2`似乎取决于 和 的先前`r2`值`r1`。良好预测的条件分支允许处理器推断更准确的依赖关系。但是数据依赖关系通常需要一到两个周期才能到达，如果它们需要时间来到达的话。

请注意，从内存到寄存器的有条件移动有时是一个危险的赌注：如果条件是从内存读取的值没有分配给寄存器，那么您在内存上等待是徒劳的。但是指令集中提供的条件移动指令通常是寄存器到寄存器，防止程序员出现这种错误。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-01-03T00:19:50.867

这都是关于[指令流水线](http://en.wikipedia.org/wiki/Instruction_pipeline)的。请记住，现代 CPU 在流水线中运行它们的指令，当 CPU 可预测执行流程时，这会显着提升性能。

## cmov

```
 add     eax, ebx
    cmp     eax, 0x10
    cmovne  ebx, ecx
    add     eax, ecx 
```

* * *

> 在评估该 ASM 指令时，尚不知道前面的 CMP 指令的结果。

也许吧，但是 CPU 仍然知道，无论and指令`cmov`的结果如何，紧随其后的指令都会被立即执行。因此，可以提前安全地获取/解码下一条指令，而分支并非如此。`cmp``cmov`

下一条指令甚至可以在执行之前执行`cmov`（在我的示例中这是安全的）

## 分支

```
 add     eax, ebx
    cmp     eax, 0x10
    je      .skip
    mov     ebx, ecx
.skip:
    add     eax, ecx 
```

在这种情况下，当 CPU 的解码器看到`je .skip`它时，它必须选择是 1) 从下一条指令继续预取/解码指令，还是 2) 从跳转目标开始。CPU 会猜测这个前向条件分支不会发生，因此下一条指令`mov ebx, ecx`将进入流水线。

几个周期后，`je .skip`执行并采用分支。哦，废话！我们的管道现在包含一些不应该执行的随机垃圾。CPU 必须刷新所有缓存的指令并从`.skip:`.

`cmov`这是错误预测分支的性能损失，因为它不会改变执行流程，所以永远不会发生这种情况。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-01-03T00:20:12.170

实际上结果可能还不知道，但如果其他情况允许（特别是依赖链），cpu 可以重新排序并执行`cmov`. 由于不涉及分支，因此在任何情况下都需要评估这些指令。

考虑这个例子：

```
cmoveq edx, eax
add ecx, ebx
mov eax, [ecx] 
```

后面的两条指令`cmov`不依赖于 的结果`cmov`，因此即使在`cmov`自身处于挂起状态时也可以执行它们（这称为*乱序执行*）。即使它们不能被执行，它们仍然可以被获取和解码。

分支版本可以是：

```
 jne skip
    mov edx, eax
skip:
    add ecx, ebx
    mov eax, [ecx] 
```

这里的问题是控制流正在发生变化，并且 cpu 不够聪明，无法看到`mov`如果分支被错误预测为已被占用，它可以“插入”跳过的指令 - 相反，它会丢弃分支后所做的一切，并重新启动从头开始。这就是惩罚的来源。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-17T02:54:32.607

你应该阅读这些。使用 Fog+Intel，只需搜索 CMOV。

[大约 2007 年，Linus Torvald 对 CMOV 的评论](http://yarchive.net/comp/linux/cmov.html)
[Agner Fog 对微架构的比较](http://www.agner.org/optimize/microarchitecture.pdf)
[英特尔® 64 和 IA-32 架构优化参考手册](http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-optimization-manual.html)

简短的回答，正确的预测是“免费的”，而条件分支错误预测可能会在 Haswell 上花费 14-20 个周期。但是，CMOV 从来都不是免费的。我仍然认为 CMOV 现在比 Torvalds 咆哮时好多了。在所有处理器上，没有一个永远正确的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-27T10:35:28.393

我有这张来自 [Peter Puschner et al.] 幻灯片的插图，它解释了它如何转换为单路径代码，并加快执行速度。

[![在此处输入图像描述](../Images/919f8118b72b5889dbc0ed487b4e756a.png)](https://i.stack.imgur.com/NOlPs.png)

# c# - 从 .Net 发送电子邮件

> ID：14131107
> 
> 赞同：1
> 
> 时间：2013-01-02T23:53:08.383
> 
> 标签：c#, .net, email

> **可能重复：**
> [从 .NET 应用程序发送电子邮件的最佳方式？](https://stackoverflow.com/questions/57919/best-way-to-send-an-email-from-a-net-application)

我正在用 C# 开发一个 .NET 应用程序，并希望能够从它内部通过电子邮件发送多个电子邮件地址（从 .txt 文件中读取）。谁能告诉我该怎么做？是否有用于此目的的控件，或者我是否需要购买第 3 方产品？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T23:59:38.430

这是 SmtpClient 的示例

```
 System.Net.NetworkCredential ncred = new System.Net.NetworkCredential(EmailFrom, EmailPass);

  MailMessage mail = new MailMessage(EmailFrom, EmailTo, Subject, BodyText);

  SmtpClient client = new SmtpClient("smtp.gmail.com", 587)
                    {
                        EnableSsl = true,
                        DeliveryMethod = SmtpDeliveryMethod.Network,
                        UseDefaultCredentials = false,
                        Credentials = ncred,
                        Timeout = 20000,
                    };
 client.SendCompleted += completeHandler;
 client.SendAsync(mail, "email"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:55:02.277

您可以使用[SmtpClient 类](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)从 .NET 程序发送电子邮件。

# sql - 如何避免数据库死锁？

> ID：14131108
> 
> 赞同：4
> 
> 时间：2013-01-02T23:53:08.770
> 
> 标签：sql, select, cascading-deletes, database-deadlocks

某些数据库功能，例如`SELECT ... FOR UPDATE`和`ON DELETE CASCADE`，隐含地容易受到死锁的影响，因为数据库没有指定将使用什么锁定顺序。我发现有[两个](http://hoopercharles.wordpress.com/2011/11/21/select-for-update-in-what-order-are-the-rows-locked/) [讨论](https://groups.google.com/d/topic/h2-database/RYKQ1hLUqcg/discussion)暗示 SQL 标准没有指定这种行为，更不用说具体的实现了。因此，我在假设我们无法控制锁定顺序的情况下进行操作（至少，如何做到这一点并不明显）。

**如果我们不能依赖锁定顺序，我们应该如何避免数据库死锁？**

如果我们不应该避免僵局（你将不得不非常努力地说服我相信这一点）那么我们应该做什么？

这个问题与数据库无关，所以请不要问我使用的是哪个数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:31:02.333

只是不要使用那些可能导致死锁的功能。 `ON DELETE CASCADE`可以以强制顺序的方式重写，从而避免死锁。

`SELECT ... FOR UPDATE`专门设计用于避免锁定 - 它允许您选择并锁定一行，以便您可以在所有线程上保持一致的顺序。

您必须小心使用它，如果您不了解所有更新的锁定顺序，可能会导致死锁。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-12-31T11:51:20.447

几年后，我正在修改公认的答案，指出[无法防止数据库死锁](https://stackoverflow.com/a/16553083/14731)。

如果您足够幸运能够将数据库操作分解为一次只与一个表进行交互（这并不总是可能的），那么您将被迫在性能不佳和死锁的可能性之间做出选择。选择你的毒药。

# iphone - 如何将数据从一个视图控制器的 UItextfields 发送到新的视图控制器？

> ID：14131111
> 
> 赞同：1
> 
> 时间：2013-01-02T23:53:19.157
> 
> 标签：iphone, ios

> **可能重复：**
> [将数据从 2 个 UItextfields 传递到新的视图控制器](https://stackoverflow.com/questions/13935280/pass-data-from-2-uitextfields-to-new-view-controller)

我正在设计一个带有两个视图控制器的应用程序。我通过一个按钮和一个功能导航到第二个视图控制器。我不确定如何将数据从这个视图控制器发送到另一个。我想在第二个视图控制器中显示这些数据。

# java - JPA 是否要求数据源来自 JNDI？

> ID：14131114
> 
> 赞同：0
> 
> 时间：2013-01-02T23:53:35.100
> 
> 标签：java, spring, tomcat, jpa, jndi

我在 Tomcat 中为我的 webapp 使用 Spring。我的数据源在 Spring 中构建，然后使用 org.springframework.jndi.JndiTemplate 发布到 JNDI。由于几个原因，这很笨拙，但我的主要问题是很难控制正在使用的数据库（我想这样做以进行测试）。是否可以在不使用 JNDI 作为查找服务的情况下使用 JPA？理想情况下，我可以将数据源直接提供给 JPA，或者通过其他不依赖容器实现的方法（我已经研究了不是由容器提供的 JNDI 实现，但是它们）不适合我的需要）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:16:52.540

您可以在 spring 配置文件中指定数据源。这是我使用 MySql 数据库的摘录。要查看完整的配置文件和项目，请查看[GitHub 上](https://github.com/kmb385/to-thought-tutorial/blob/Post3/src/main/resources/META-INF/application-context.xml)的源代码。

```
<!-- Database -->
<bean id="datasource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/to_thought_tutorial" />
    <property name="username" value="tutorial" />
    <property name="password" value="tutorial" />
</bean>

<!-- Entity Manager -->
<bean id="entityManagerFactory"
   class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
       <property name="dataSource" ref="datasource" />
       <property name="persistenceUnitName" value="tothought-tutorial" />
</bean> 
```

我还鼓励您访问我的博客，其中包含描述如何设置数据源的视频：http: [//tothought.cloudfoundry.com/post/4](http://tothought.cloudfoundry.com/post/4)

Spring 文档还包括如何设置不依赖 JNDI 的数据源的示例：http: [//static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/jdbc.html#jdbc -数据源](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/jdbc.html#jdbc-datasource)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:19:29.397

您可以直接在您的 persistence.xml 中为任何给定的持久性单元定义数据源连接：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence
        xmlns="http://java.sun.com/xml/ns/persistence"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
        version="2.0">
    <persistence-unit name="BlahBlah" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect"/>
            <property name="hibernate.connection.url" value="jdbc:mysql://localhost/db_name"/>
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.connection.username" value="root"/>
            <property name="hibernate.connection.password" value="xxx"/>
        </properties>
    </persistence-unit>
</persistence> 
```

如果您不使用 Hibernate，则可以查找您的提供程序属性，或使用 JPA2 标准属性`javax.persistence.jdbc.user`等。`javax.persistence.jdbc.password``javax.persistence.jdbc.url`

# jquery - 添加到 JQuery 脚本运行时

> ID：14131117
> 
> 赞同：0
> 
> 时间：2013-01-02T23:53:44.297
> 
> 标签：jquery

我正在做一个项目，能够将一些文本从例如数据库解析到 jQuery 将非常有用。

一个例子是这一行：

```
$(container).show("drop", { direction: "bottom", distance: 300 }, 800); 
```

当我将它硬编码到我的文件中时，这非常有用 - 但我想要做的是存储它：

```
.show("drop", { direction: "bottom", distance: 300 }, 800); 
```

在例如数据库中，然后在页面呈现时检索它并在我的 jQuery 代码中使用它。

我目前正在将存储的 jQuery 渲染到一个隐藏字段中，但是每当我尝试组合这些值时：

```
$(container) + $("#hfJquery"); 
```

我得到的只是一个文本字符串 - 这是有道理的。所以问题是 - 有没有办法以某种方式将代码附加到 jquery 代码块，以便隐藏字段中的纯文本将被视为 jQuery 代码而不是文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:50:13.817

您可以将数据存储为 JSON。这只会占用数据库中的一个字段。

然后，您将输出到 javascript 对象变量或将其存储在`data-`标记的属性中：

```
var data={
  "selector": "#Div",
  "animMethod": "show",
  "effect": "drop",
  "options": { "direction": "bottom", "distance": 300 },
  "duration": 800  

}

function runAnimation(data){
   $( data.selector)[ data.animMethod] ( data.effect, data.options, data.duration);

}
runAnimation(data); 
```

JSON 也可以直接添加到`data-`属性中的元素

```
<div class="run_animation" data-animData="{animMethod: 'show'.....,  duration: 800 }"> 
```

然后从元素中检索：

```
$('.run_animation').each(function(){
  /* retrieve data object from markup*/
  var data=$(this).data('animData')
  $(this)[ data.animMethod] ( data.effect, data.options, data.duration);    
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:22:32.867

我真的不明白做某事的意义。但是看看`eval()`：

[http://jsfiddle.net/yP9ZL/1/](http://jsfiddle.net/yP9ZL/1/)

```
eval("$('#containerID')" + $("#hfJquery").val()); 
```

# java - 使用扫描仪阵列指向不同的文件

> ID：14131119
> 
> 赞同：0
> 
> 时间：2013-01-02T23:54:01.980
> 
> 标签：java, java.util.scanner

我有一个扫描仪阵列`Scanner[] properties = new Scanner[number];`，想知道我是否可以更改读取路径`properties[1]`等`properties[2]`。

我有一个文件夹，里面有几个不同的文件，它们都使用相同的基本布局，我可以`properties[1]`从文件中读取和从文件`fire`中`properties[2]`读取吗`water`？

# objective-c - 如何在获取的属性中指定多属性？

> ID：14131122
> 
> 赞同：2
> 
> 时间：2013-01-02T23:54:21.193
> 
> 标签：objective-c, xcode, cocoa, core-data, xcode4

我有两个实体，父母和孩子。Parent 实体与名为“children”的 Child 具有一对多关系。Child 有一个名为“childName”的字符串属性。

我想在 Parent 上创建一个获取的属性，我们称之为“specialChild”，它返回一个具有特定名称的 Child，我们说“Special”。当我访问 fetched 属性时，以下谓词返回一个空集：

*   children.childName == "特别"
*   SUBQUERY(儿童, $eachChild, $eachChild.childName = "Special").@count > 0
*   SUBQUERY(children, $eachChild, ANY $eachChild.childName = "Special").@count > 0

我相信我以某种方式弄乱了谓词，因为我对它们仍然很缺乏经验。（我可以从 Apple 找到关于“SUBQUERY”的零文档）我应该如何在 Parent 的 fetched 属性谓词中指定“childName 为 Special 的孩子”？

是的，我正在调用 -refreshObject:mergeChanges: 但我仍然收到一个空结果。是的，目标实体是 Child。

![数据模型的可视化描述](../Images/a883a1f959d3dd4ac48115d497ae1e69.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T23:51:21.440

你想要的是`parent==$FETCH_SOURCE AND childName=="Special"`. 这会得到任何“特殊”的对象以及查找其特殊子对象的对象`Child`。`childName``parent`

获取的属性谓词中的属性必须存在于目标实体上。这里的目的地是`Child`，所以你不能使用`children`，因为它只存在于`Parent`。

如果您在代码中编写谓词，则该`$FETCH_SOURCE`部分对应于您将使用的位置。`self`没有它，您将获得每个特殊的孩子，而不仅仅是那些依附于原始`Parent`. 它说，`parent`孩子的属性必须是查找获取的属性值的特定实例。

# lua - 我可以在 Corona 中动态加载 lua 文件吗？（例如，从我的主游戏情节提要文件中加载 level23.lua）

> ID：14131124
> 
> 赞同：1
> 
> 时间：2013-01-02T23:54:34.583
> 
> 标签：lua, coronasdk

是否可以动态加载lua文件？例如加载下一个级别？

背景： * 有一个基于故事板的小游戏 * 每个关卡都有不同的故事板文件，但动态/代码完全相同，所以我想我会从一个单独的文件动态加载关卡背景/对象。例如，我可以有 level_1.lua、level_2.lua 等。在这些文件中，他们可以创建（在 lua 中）他们的整套背景/交互对象等，并作为一个显示对象传递回主游戏情节提要文件 * 有效可以使用“需要 level_1”，但是现在尝试使这种动态化我可能会遇到问题

如果不可能有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T05:40:16.053

`require`是一个接受字符串的函数，仅此而已。您不使用括号的事实只是语法糖，仅在字符串为常量时才适用。如果将其作为普通函数运行，则可以对字符串执行任何操作：

```
module = require( "level_"..level_number ) 
```

...或者...

```
levels = { "castle", "castle2", "boss" }
module = require( levels[level_number] ) 
```

等等等等……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T04:52:34.550

如果 loadfile() 在电晕中不起作用，您也许可以使用 require 因为它起作用

例如

```
if level == 1 then
  game = require "level1"
else
  game = require "level2"
end 
```

我相信你可以在任何地方使用 require，从[http://www.lua.org/pil/8.1.html](http://www.lua.org/pil/8.1.html)

> Lua 提供了一个更高级别的函数来加载和运行库，称为 require。粗略地说，require 和 dofile 做同样的工作，但有两个重要的区别。首先， require 在路径中搜索文件；其次，require 控制文件是否已经运行以避免重复工作。由于这些特性，require 是 Lua 中加载库的首选函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T02:49:41.980

Corona SDK 确实允许您在需要时需要模块，但这与在运行时动态加载模块不同。用 require 语句加载的东西是在构建时编译的。您以后不能下载 .lua 文件并将其包含在内。Apple 明确禁止这种行为。

但是，如果您的最终目标是遵循 DRY 原则（不要重复自己），并且拥有一组代码而不是多次重复它，如果您可以在一个非常大的表中包含所有关卡数据，或者您可以将每个人的数据保存到 JSON 格式的文本文件中，然后逐级读取它们。你不能在其中有可执行代码或公式，但你可以有图像名称、x、Y 坐标、物理属性等。

# c++ - QByteArray 到 QString

> ID：14131127
> 
> 赞同：50
> 
> 时间：2013-01-02T23:55:00.360
> 
> 标签：c++, qt, qstring, qtcore, qbytearray

我遇到了`QByteArray`和的问题`QString`。

我正在读取一个文件并将其信息存储在`QByteArray`. 该文件采用 unicode 格式，因此它包含以下内容：`t\0 e\0 s\0 t\0 \0 \0`

我正在尝试将此值与我指定的值进行比较，但它失败了，因为在调试器中我看到它不是 unicode 字符串。

代码将解释一切：

```
QByteArray Data; //contains unicode string "t\0 e\0 s\0 t\0 \0 \0"
QString myValue = "test"; //value to compare.
if(Data.contains(myValue))
    //do some stuff.
else
    //do other stuff. 
```

在调试器中，它向我显示该变量`Data`具有 value`"t\0 e\0 s\0 t\0 \0 \0"`并且`myValue`具有 value `"test"`。我该如何解决？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2019-01-11T23:07:54.783

您可以使用此 QString 构造函数将 QByteArray 转换为 QString：

QString(const QByteArray &ba)

```
QByteArray data;
QString DataAsString = QString(data); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-03T00:05:53.010

您可以使用[QTextCodec](http://doc.qt.io/qt-5/qtextcodec.html#codecForMib)将字节数组转换为字符串：

```
QString DataAsString = QTextCodec::codecForMib(1015)->toUnicode(Data); 
```

（1015 是 UTF-16、1014 UTF-16LE、1013 UTF-16BE、106 UTF-8）

从您的示例中，我们可以看到字符串`"test"`的编码方式 `"t\0 e\0 s\0 t\0 \0 \0"`与您的编码方式相同，即每个 ascii 字符后跟一个`\0`-byte 或 resp。每个 ascii 字符都被编码为 2 个字节。以这种方式编码 ascii 字母的唯一 unicode 编码是 UTF-16 或 UCS-2（这是 UTF-16 的受限版本），因此在您的情况下需要 1015 mib（假设您的本地字节序是与输入字节序相同）。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2017-12-08T11:54:20.887

您可以使用：

```
QString::fromStdString(byteArray.toStdString()) 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-11-13T13:25:42.873

您可以使用`QString::fromAscii()`

```
QByteArray data = entity->getData();
QString s_data = QString::fromAscii(data.data()); 
```

返回`data()`一个`char*`

对于 QT5，您应该`fromCString()`改用，因为`fromAscii()`已弃用，请参阅~~[https://bugreports.qt-project.org/browse/QTBUG-21872](https://bugreports.qt-project.org/browse/QTBUG-21872)~~ [https://bugreports.qt.io/browse/QTBUG-21872](https://bugreports.qt.io/browse/QTBUG-21872)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-07-22T15:59:37.260

您可能会发现[QString::fromUtf8()](http://doc.qt.io/qt-5/qstring.html#fromUtf8)也很有用。

对于和, `QByteArray input`_`"\010"``"\000"`

[QString::fromLocal8Bit(input, 1)](http://doc.qt.io/qt-5/qstring.html#fromLocal8Bit)返回`"\010"`和`""`

[QString::fromUtf8(input, 1)](http://doc.qt.io/qt-5/qstring.html#fromUtf8)正确返回`"\010"`and `"\000"`。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-05-28T01:00:02.493

使用`QString::fromUtf16((ushort *)Data.data())`，如以下代码示例所示：

```
#include <QCoreApplication>
#include <QDebug>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    // QByteArray to QString
    // =====================

    const char c_test[10] = {'t', '\0', 'e', '\0', 's', '\0', 't', '\0', '\0', '\0'};
    QByteArray qba_test(QByteArray::fromRawData(c_test, 10));
    qDebug().nospace().noquote() << "qba_test[" << qba_test << "]"; // Should see: qba_test[t

    QString qstr_test = QString::fromUtf16((ushort *)qba_test.data());
    qDebug().nospace().noquote() << "qstr_test[" << qstr_test << "]"; // Should see: qstr_test[test]

    return a.exec();
} 
```

这是使用 QTextCodec 的替代解决方案。该代码已使用 Qt 5.4 进行了测试。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-04T12:04:37.883

Qt 5.12 及更高版本：

```
QString::fromStdString(byteArray.toStdString()); 
```

# c++ - 如何确保 cin 正确打开文件？

> ID：14131128
> 
> 赞同：0
> 
> 时间：2013-01-02T23:55:00.320
> 
> 标签：c++, cout, cin, istream

我有这个代码：

```
static std :: ifstream s_inF(argv[j]);
std :: cin.rdbuf(s_inF.rdbuf()); 
```

如何确保它正确打开文件并且没有问题？

我的意思是我想写一些类似的东西：

```
static std :: ifstream s_inF(argv[j]);
std :: cin.rdbuf(s_inF.rdbuf());
if(.....)
{
  cout << "can not open the file" << endl;
  return 0;
}
...
.....
....
cin.close(); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:15:01.820

如果流已准备好进行 I/O 操作，则所有作为子类的对象[`std::basic_ios`](http://en.cppreference.com/w/cpp/io/basic_ios)（例如`s_inF`和`std::cin`，在您的情况下）都有返回 true 。[`operator bool`](http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool)

这意味着您可以简单地直接测试它们，例如：

```
static std::ifstream s_inF(argv[j]);
std::cin.rdbuf(s_inF.rdbuf());
if (!s_inF)
{
  cout << "can not open the file" << endl;
  return 0;
}
// ...
cin.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:57:05.093

你可以用`is_open`这个。看这里：

[http://www.cplusplus.com/reference/fstream/ifstream/is_open/](http://www.cplusplus.com/reference/fstream/ifstream/is_open/)

# haskell - 使用事务内存的类型错误

> ID：14131131
> 
> 赞同：0
> 
> 时间：2013-01-02T23:55:16.677
> 
> 标签：haskell, tvar

我在haskell中使用事务变量，我在一个函数中实例化并收集在一个列表中，然后我给另一个函数写入值：

```
step player ghosts info = do let unblocked = allPaths (source info) (target info) (graph info)
                         buff <- atomically $ newTVar [[]]
                         atomically $ put buff unblocked
                         let create  = do return newGhostVal
                         let ghosts' = zip (map (\g -> newGhostVal) ghosts) ghosts

                         mapM_ (\g -> forkIO(atomically $ moveGhost buff (fst g) (graph info) (snd g))) ghosts'
                         putStrLn "launched" 
```

我在函数 moveGhost 中使用这些共享变量（存储在 ghosts 中）：

```
moveGhost buff res graph ghost =
             do notBlocked <- get buff
             ...
             writeTVar buff notBlocked'
             writeTVar res (Just ghost'')
             return() 
```

虽然我对两个共享变量 buff 使用与 res 相同的策略，但使用时出现错误`Tvar res`：

```
 Couldn't match expected type `TVar (Maybe Ghost)'
            with actual type `STM (TVar (Maybe a0))'
Expected type: [(TVar (Maybe Ghost), Ghost)]
  Actual type: [(STM (TVar (Maybe a0)), b0)]
In the second argument of `mapM_', namely ghosts'
In a stmt of a 'do' block:
  mapM_
    (\ g
       -> forkIO
            (atomically $ moveGhost buff (fst g) (graph info) (snd g)))
    ghosts' 
```

有谁知道这个 TVar 的问题是什么以及为什么它不是 TVar buff 的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T00:23:00.463

注意到这些是列表中的值，我希望这`[TVar (Maybe Ghost)']`是正确的类型 - 即`TVar`s 的列表 - 而您拥有的是正确的类型，`[STM (TVar (Maybe a0))']`因为您正在创建一个*将*创建s 的`STM`操作列表，但实际上并非如此在事务中使用它。*`TVar`*

 *所以，无论你有那个`TVar`创建动作的列表，你都会想做一些事情，比如`sequence`把它变成`STM [(TVar (Maybe a0))']`，一个创建`TVar`s 列表的单个动作，然后在事务中绑定它（即，使用`<-`而不是`let`）或也可以用来`atomically`创建`TVar`s in `IO`。无论哪种方式，绑定该值的结果都将是`TVar`您可能想要的 s 列表。*

# c# - 将 int 的值声明为不可更改

> ID：14131132
> 
> 赞同：2
> 
> 时间：2013-01-02T23:55:16.793
> 
> 标签：c#, variables, declaration

嘿，我想要这样的东西

```
int a=0;
a=5(be unchangeable);
a=3;
Console.WriteLine(a);//which will print 5 and not 3 
```

所以基本上将变量声明为一个数字并使其成为最终且不可更改的，我尝试环顾四周，但我只发现在声明 int 时工作的东西，而不是声明它的新值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T23:57:47.863

这不行吗？

```
const int a = 5; 
```

请参阅[const（C# 参考）](http://msdn.microsoft.com/en-us/library/e6w8fe1b(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T23:56:16.003

```
const int a = 0; 
```

> const 关键字用于修改字段或局部变量的声明。它指定字段或局部变量的值是常数，这意味着它不能被修改。

[参考](http://msdn.microsoft.com/en-us/library/e6w8fe1b%28v=vs.100%29.aspx)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T23:56:31.807

你想要`const`关键字。

```
const int a = 5; 
```

来自[MSDN](http://msdn.microsoft.com/en-us/library/e6w8fe1b%28v=vs.71%29.aspx)：

> const 关键字用于修改字段或局部变量的声明。它指定不能修改字段或局部变量的值。

编辑：您的要求听起来很奇怪而且没用。但是如果你真的需要它，你就必须创建一个自定义类型。我建议一个带有`bool`属性的类，说明它是否可变。

```
public class MyCustomInt
{
    public bool IsMutable { get; set; }

    private int _myInt;
    public int MyInt 
    { 
        get
        {
            return _myInt;
        } 
        set
        {
            if(IsMutable)
            {
                _myInt = value;
            }
        }
    }

    public MyCustomInt(int val)
    { 
        MyInt = val;
        IsMutable = true;
    }
} 
```

然后当你使用它时：

```
MyCustomInt a = new MyCustomInt(0);
a.MyInt = 5;
a.IsMutable = false;
a.MyInt = 3; //Won't change here!
Console.WriteLine(a); //Prints 5 and not 3 
```

我想，这和你能得到的一样好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-03T00:04:14.667

使用`readonly`：

因为它可以由构造函数更改，但不能再更改。

```
public class MyClass {
 private readonly int a = 0;
 public MyClass(int a) {
  this.a = a;
 }

 public void DoSomethingWithA() {
   Console.WriteLine(this.a);
   //a = 5 // don't try this at home kids
 }
}

new MyClass(5).DoSomethingWithA(); 
```

`const`和[之间的一个很好的比较](http://weblogs.asp.net/psteele/archive/2004/01/27/63416.aspx)`readonly`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T23:59:41.430

`const`您可以在关键字中使用常量。

```
const int a = 5; 
```

但如果你这样做，你将不被允许更改为另一个值。

您还可以检查指针的使用：

```
int x = 5;
int y = 3;
int *ptr1 = &x; // point to x memory address
int *ptr2 = &y; // point to y memory address

Console.WriteLine(x); // print 5
Console.WriteLine(y); // print 3

Console.WriteLine((int)ptr1); // print 5
Console.WriteLine((int)ptr2); // print 3
Console.WriteLine(*ptr1); // print 5
Console.WriteLine(*ptr2); // print 3 
```

`*`char 标识一个指针并`&`指定内存地址。但是您应该注意指针，因为与引用类型不同，默认垃圾回收机制不会跟踪指针类型。

# ms-access - 审计跟踪表格

> ID：14131134
> 
> 赞同：1
> 
> 时间：2013-01-02T23:55:42.587
> 
> 标签：ms-access, ms-access-2007, vba, ms-access-2010

我正在为我的数据库中的表单设置审计跟踪系统。我正在遵循 Susan Harkins [Here的示例](http://www.techrepublic.com/article/a-simple-solution-for-tracking-changes-to-access-data/6166807)

我的代码适用于基于客户表的表格客户。这是我的代码：

```
Const cDQ As String = """"
Sub AuditTrail(frm As Form, recordid As Control)
'Track changes to data.
'recordid identifies the pk field's corresponding
'control in frm, in order to id record.
Dim ctl As Control
Dim varBefore As Variant
Dim varAfter As Variant
Dim strControlName As String
Dim strSQL As String
On Error GoTo ErrHandler
'Get changed values.
For Each ctl In frm.Controls
With ctl
'Avoid labels and other controls with Value property.
If .ControlType = acTextBox Then
If .Value <> .OldValue Then
MsgBox "Step 1"
varBefore = .OldValue
varAfter = .Value
strControlName = .Name
'Build INSERT INTO statement.
strSQL = "INSERT INTO " _
& "Audit (EditDate, User, RecordID, SourceTable, " _
& " SourceField, BeforeValue, AfterValue) " _
& "VALUES (Now()," _
& cDQ & Environ("username") & cDQ & ", " _
& cDQ & recordid.Value & cDQ & ", " _
& cDQ & frm.RecordSource & cDQ & ", " _
& cDQ & .Name & cDQ & ", " _
& cDQ & varBefore & cDQ & ", " _
& cDQ & varAfter & cDQ & ")"
'View evaluated statement in Immediate window.
Debug.Print strSQL
DoCmd.SetWarnings False
DoCmd.RunSQL strSQL
DoCmd.SetWarnings True
End If
End If
End With
Next
Set ctl = Nothing
Exit Sub
ErrHandler:
MsgBox Err.Description & vbNewLine _
& Err.Number, vbOKOnly, "Error"
End Sub 
```

但是，当我尝试在表单中更改子表单中的数据时，我收到错误消息“这种类型的对象不支持操作”。我可以看到这里发生了错误：

```
If .Value <> .OldValue Then 
```

我的子表单基于基于三个表的查询
![在此处输入图像描述](../Images/6adcd4fee25113069c1d8ec009092e1a.png)

我正在尝试更改客户产品下的客户价格并记录这些更改。有什么我遗漏的东西或解决方法。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:23:07.120

像这样暂时禁用您的错误处理程序：

```
'On Error GoTo ErrHandler 
```

当您收到有关“不支持操作”的错误通知时，请从错误对话框中选择“调试”。这将允许您找到有关触发错误的当前文本框控件的更多信息。在立即窗口中尝试以下语句：

```
? ctl.Name
? ctl.ControlSource
? ctl.Enabled
? ctl.Locked
? ctl.Value 
```

至少`ctl.Name`会确定哪个文本框触发了错误。

在检查了 db 之后，我将建议一个函数 ( `IsOldValueAvailable`) 来指示`.OldValue`当前控件是否可用。使用该功能，该`AuditTrail`过程在此更改后起作用：

```
'If .ControlType = acTextBox Then
If IsOldValueAvailable(ctl) = True Then 
```

和功能。它可能还需要更多的工作，但我在测试中没有发现任何问题。

```
Public Function IsOldValueAvailable(ByRef ctl As Control) As Boolean
    Dim blnReturn As Boolean
    Dim strPrompt As String
    Dim varOldValue As Variant

On Error GoTo ErrorHandler

    Select Case ctl.ControlType
    Case acTextBox
        varOldValue = ctl.OldValue
        blnReturn = True
    Case Else
        ' ignore other control types; return False
        blnReturn = False
    End Select

ExitHere:
    On Error GoTo 0
    IsOldValueAvailable = blnReturn
    Exit Function

ErrorHandler:
    Select Case Err.Number
    Case 3251 ' Operation is not supported for this type of object.
        ' pass
    Case Else
        strPrompt = "Error " & Err.Number & " (" & Err.Description _
            & ") in procedure IsOldValueAvailable"
        MsgBox strPrompt, vbCritical, "IsOldValueAvailable Function Error"
    End Select
    blnReturn = False
    Resume ExitHere
End Function 
```

# mysql - 查看返回部分或不正确数据集的总和

> ID：14131139
> 
> 赞同：0
> 
> 时间：2013-01-02T23:56:11.520
> 
> 标签：mysql

我有以下看法。我需要查看每个日期的每个 PartNum 的总和。但视图返回的数据集不正确，仅显示某些日期。有人可以让我直截了当吗？

```
SELECT
    `archived_items`.`ArcPartNumber` AS `PartNum`,
    `archived_header`.`AhDeliveryDate` AS `DeliveryDate`,
    `archived_items`.`ArcTransactionNumber` AS `TransactionNumber`,
    sum(`archived_items`.`ArcOrdered`) AS `Ordered`,
    sum(`archived_items`.`ArcShipped`) AS `Shipped`,
    sum(`archived_items`.`ArcBackOrdered`) AS `BackOrdered`
FROM
    ( `archived_items`
        LEFT JOIN `archived_header` ON (
            (`archived_header`.`AhTransactionNumber` = `archived_items`.`ArcTransactionNumber`
        )))
WHERE
((`archived_items`.`ArcTransactionType` = 3)
    AND 
    (`archived_header`.`AhDeliveryDate` >= CURDATE()))
GROUP BY
`archived_items`.`ArcPartNumber`
`archived_header`.`AhDeliveryDate`,
ORDER BY
`archived_items`.`ArcPartNumber`,
`archived_header`.`AhDeliveryDate` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:31:37.597

尝试这个 。你`()`在不需要的地方使用了很多

```
 SELECT
       ar.`ArcPartNumber` AS `PartNum`,
       ah.`AhDeliveryDate` AS `DeliveryDate`,
       ar.`ArcTransactionNumber` AS `TransactionNumber`,
       sum(ar.`ArcOrdered`) AS `Ordered`,
       sum(ar.`ArcShipped`) AS `Shipped`,
       sum(ar.`ArcBackOrdered`) AS `BackOrdered`
 FROM   `archived_items` ar
 LEFT JOIN `archived_header` ah 
 ON    ah.`AhTransactionNumber` = ar.`ArcTransactionNumber`
 WHERE
       ar.`ArcTransactionType` = 3
 AND 
      ah.`AhDeliveryDate` >= CURDATE()   
 GROUP BY
       `PartNum`,
       `DeliveryDate`
 ORDER BY
       `PartNum`,
       `DeliveryDate` 
```

// 不要使用`CURDATE`因为它已经是当前日期的函数。我把它换成了你的`ah.AhDeliveryDate`，所以要确保它们是相同的格式

[**看看演示**](http://sqlfiddle.com/#!2/110e8/1)它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:22:31.000

看起来你只是按你应该的两列分组。不确定这是错字还是问题的原因。试试这个

```
SELECT
    `archived_items`.`ArcPartNumber` AS `PartNum`,
    `archived_header`.`AhDeliveryDate` AS `DeliveryDate`,
    `archived_items`.`ArcTransactionNumber` AS `TransactionNumber`,
    sum(`archived_items`.`ArcOrdered`) AS `Ordered`,
    sum(`archived_items`.`ArcShipped`) AS `Shipped`,
    sum(`archived_items`.`ArcBackOrdered`) AS `BackOrdered`
FROM
    ( `archived_items`
        LEFT JOIN `archived_header` ON (
            (`archived_header`.`AhTransactionNumber` = `archived_items`.`ArcTransactionNumber`
        )))
WHERE
((`archived_items`.`ArcTransactionType` = 3)
    AND 
    (`archived_header`.`AhDeliveryDate` >= CURDATE()))
GROUP BY
`archived_items`.`ArcPartNumber`
`archived_header`.`AhDeliveryDate`,
`archived_items`.`ArcTransactionNumber`
ORDER BY
`archived_items`.`ArcPartNumber`,
`archived_header`.`AhDeliveryDate` 
```

# api - 如何使用必应翻译 API？

> ID：14131141
> 
> 赞同：14
> 
> 时间：2013-01-02T23:56:23.760
> 
> 标签：api, localization, bing, language-translation, microsoft-translator

我正在尝试使用必应翻译 API，但我很困惑。似乎有很多可能性（旧的和新的），但我不明白我必须做什么。

有人可以帮帮我吗？

我想发送一个 HTTP 请求`http://api.microsofttranslator.com/V2/Ajax.svc/Translate?appId=<AppId>&to=de&text=World`并获得翻译。在哪里获取 AppId？

到目前为止我做了什么：

1.  登录免费使用 API ( [https://datamarket.azure.com/dataset/bing/microsofttranslator](https://datamarket.azure.com/dataset/bing/microsofttranslator) )
2.  创建了一个应用程序：[https ://datamarket.azure.com/developer/applications](https://datamarket.azure.com/developer/applications)

现在我有 Client_ID 和 Client_Secret 并且我有一个帐户密钥（在此处可见[https://datamarket.azure.com/account](https://datamarket.azure.com/account)）

现在要做什么？

非常感谢或任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T11:37:21.507

AppID 已弃用。您需要如何执行以下步骤：

1.  [在https://datamarket.azure.com](https://datamarket.azure.com)中注册您的 clientID、clientSecter

2.  然后您的代码必须获取登录 BingTranslator API 的访问令牌

[在http://msdn.microsoft.com/en-us/library/dd576287.aspx](http://msdn.microsoft.com/en-us/library/dd576287.aspx)上阅读更多详细信息

*注意微软翻译已被必应翻译取代，它似乎没有现成的 API。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T04:37:53.263

按照[http://api.microsofttranslator.com](http://api.microsofttranslator.com)上的链接。API 采用 appid 参数中的访问令牌。请参阅文档中的“获取访问令牌”部分以了解如何获取该令牌。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-24T16:28:24.917

随意使用此说明（如果您使用的是**php**）：

**定义你的钥匙**

```
$apis['azure']['id'] = 123456789
$apis['azure']['key'] = 'abcde123456'; 
```

**类和函数**

```
class AccessTokenAuthentication {
    function getTokens($grantType, $scopeUrl, $clientID, $clientSecret, $authUrl){
        try {
            $ch = curl_init();
            $paramArr = array (
                'grant_type'    => $grantType,
                'scope'         => $scopeUrl,
                'client_id'     => $clientID,
                'client_secret' => $clientSecret
            );
            $paramArr = http_build_query($paramArr);
            curl_setopt($ch, CURLOPT_URL, $authUrl);
            curl_setopt($ch, CURLOPT_POST, TRUE);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $paramArr);
            curl_setopt ($ch, CURLOPT_RETURNTRANSFER, TRUE);
            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
            $strResponse = curl_exec($ch);
            $curlErrno = curl_errno($ch);
            if($curlErrno){
                $curlError = curl_error($ch);
                throw new Exception($curlError);
            }
            curl_close($ch);
            $objResponse = json_decode($strResponse);
            if($objResponse->error){
                throw new Exception($objResponse->error_description);
            }
            return $objResponse->access_token;
        } catch (Exception $e) {
            echo "Exception-".$e->getMessage();
        }
    }
}
class HTTPTranslator {
    function curlRequest($url, $authHeader, $postData=''){
        $ch = curl_init();
        curl_setopt ($ch, CURLOPT_URL, $url);
        curl_setopt ($ch, CURLOPT_HTTPHEADER, array($authHeader,"Content-Type: text/xml"));
        curl_setopt ($ch, CURLOPT_RETURNTRANSFER, TRUE);
        curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, False);
        if($postData) {
            curl_setopt($ch, CURLOPT_POST, TRUE);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $postData);
        }
        $curlResponse = curl_exec($ch);
        $curlErrno = curl_errno($ch);
        if ($curlErrno) {
            $curlError = curl_error($ch);
            throw new Exception($curlError);
        }
        curl_close($ch);
        return $curlResponse;
    }
    function xmlLanguageCodes($languageCodes) {
        $requestXml = '<ArrayOfstring xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">';
        if(sizeof($languageCodes) > 0){
            foreach($languageCodes as $codes) {
                $requestXml .= "<string>$codes</string>";
            }
        } else {
            throw new Exception('$languageCodes array is empty.');
        }
        $requestXml .= '</ArrayOfstring>';
        return $requestXml;
    }

    function xmlTranslateArray($fromLanguage,$toLanguage,$contentType,$inputStrArr) {
        $requestXml = "<TranslateArrayRequest>".
        "<AppId/>".
        "<From>$fromLanguage</From>". 
        "<Options>" .
            "<Category xmlns=\"http://schemas.datacontract.org/2004/07/Microsoft.MT.Web.Service.V2\" />" .
            "<ContentType xmlns=\"http://schemas.datacontract.org/2004/07/Microsoft.MT.Web.Service.V2\">$contentType</ContentType>" .
            "<ReservedFlags xmlns=\"http://schemas.datacontract.org/2004/07/Microsoft.MT.Web.Service.V2\" />" .
            "<State xmlns=\"http://schemas.datacontract.org/2004/07/Microsoft.MT.Web.Service.V2\" />" .
            "<Uri xmlns=\"http://schemas.datacontract.org/2004/07/Microsoft.MT.Web.Service.V2\" />" .
            "<User xmlns=\"http://schemas.datacontract.org/2004/07/Microsoft.MT.Web.Service.V2\" />" .
        "</Options>" .
        "<Texts>";
            foreach ($inputStrArr as $inputStr) {
                $requestXml .= "<string xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\">$inputStr</string>";
            }
        $requestXml .= "</Texts>".
        "<To>$toLanguage</To>" .
        "</TranslateArrayRequest>";
        return $requestXml;
    }
}

function get_language_names($locale="en") {
    global $list, $apis;
    try {
        $clientID = $apis['azure']['id'];
        $clientSecret = $apis['azure']['key'];
        $authUrl = "https://datamarket.accesscontrol.windows.net/v2/OAuth2-13/";
        $scopeUrl = "http://api.microsofttranslator.com";
        $grantType = "client_credentials";
        $authObj = new AccessTokenAuthentication();
        $accessToken = $authObj->getTokens($grantType, $scopeUrl, $clientID, $clientSecret, $authUrl);
        $authHeader = "Authorization: Bearer ". $accessToken;
        foreach($list['translate'] as $k=>$iso) {
            $languageCodes[] = $k;
        }
        $url = "http://api.microsofttranslator.com/V2/Http.svc/GetLanguageNames?locale=$locale";
        $translatorObj = new HTTPTranslator();
        $requestXml = $translatorObj->xmlLanguageCodes($languageCodes);
        $curlResponse =$translatorObj->curlRequest($url, $authHeader, $requestXml);
        $xmlObj = simplexml_load_string($curlResponse);
        $i=0;
        foreach($xmlObj->string as $language) {
            $result[$languageCodes[$i]] = (string)$language;
            $i++;
        }
        return $result;
    } catch (Exception $e) {
        echo "Exception: " . $e->getMessage() . PHP_EOL;
    }
}

function get_translate($array, $from, $to, $html=false) {
    global $apis;
    try {
        $clientID = $apis['azure']['id'];
        $clientSecret = $apis['azure']['key'];
        $authUrl = "https://datamarket.accesscontrol.windows.net/v2/OAuth2-13/";
        $scopeUrl = "http://api.microsofttranslator.com";
        $grantType = "client_credentials";
        $authObj = new AccessTokenAuthentication();
        $accessToken = $authObj->getTokens($grantType, $scopeUrl, $clientID, $clientSecret, $authUrl);
        $authHeader = "Authorization: Bearer ". $accessToken;

        $fromLanguage = $from;
        $toLanguage = $to;
        $inputStrArr = array_values($array);
        if($html) {
            $contentType = 'text/html';
            foreach($inputStrArr as $k=>$item) {
                $inputStrArr[$k] = htmlentities($inputStrArr[$k]);
            }
        } else {
            $contentType = 'text/plain';
        }

        $translatorObj = new HTTPTranslator();
        $requestXml = $translatorObj->xmlTranslateArray($fromLanguage,$toLanguage,$contentType,$inputStrArr);
        $translateUrl = "http://api.microsofttranslator.com/v2/Http.svc/TranslateArray";
        $curlResponse = $translatorObj->curlRequest($translateUrl, $authHeader, $requestXml);

        $xmlObj = simplexml_load_string($curlResponse);
        foreach($xmlObj->TranslateArrayResponse as $translatedArrObj){
            $result[] = (string)$translatedArrObj->TranslatedText;
        }
        return $result;
    } catch (Exception $e) {
        echo "Exception: " . $e->getMessage() . PHP_EOL;
    }
}

function get_translate_single($input, $from, $to, $html=false) {
    global $apis;
    try {
        $clientID = $apis['azure']['id'];
        $clientSecret = $apis['azure']['key'];
        $authUrl = "https://datamarket.accesscontrol.windows.net/v2/OAuth2-13/";
        $scopeUrl = "http://api.microsofttranslator.com";
        $grantType = "client_credentials";
        $authObj = new AccessTokenAuthentication();
        $accessToken = $authObj->getTokens($grantType, $scopeUrl, $clientID, $clientSecret, $authUrl);
        $authHeader = "Authorization: Bearer ". $accessToken;

        $fromLanguage = $from;
        $toLanguage = $to;
        if($html) {
            $contentType = 'text/html';
            $input = htmlentities($input);
        } else {
            $contentType = 'text/plain';
        }

        # params
        $params = "text=".urlencode($input)."&to=".$toLanguage."&from=".$fromLanguage;
        $translateUrl = "http://api.microsofttranslator.com/v2/Http.svc/Translate?".$params;

        # object
        $translatorObj = new HTTPTranslator();
        $curlResponse = $translatorObj->curlRequest($translateUrl, $authHeader);

        # interprets a string of XML into an object.
        $xmlObj = simplexml_load_string($curlResponse);
        foreach((array)$xmlObj[0] as $val){
            $result = $val;
        }
        return $result;
    } catch (Exception $e) {
        echo "Exception: " . $e->getMessage() . PHP_EOL;
    }
} 
```

**来电**

```
echo get_translate_single('horse', 'en', 'es'); //this will print 'caballo' 
```

或者

```
echo get_translate(array('horse', 'house'), 'en', 'es'); //this will print array('caballo', 'casa') 
```

就是这样，玩得开心，记得遵守[服务条款](http://datamarket.azure.com/dataset/bing/microsofttranslator#terms)。

# css - 2-col 到 1-col 响应式设计布局

> ID：14131147
> 
> 赞同：2
> 
> 时间：2013-01-02T23:56:51.730
> 
> 标签：css, responsive-design

我正在尝试从桌面上的 2-col 布局开始，如下所示：

![在此处输入图像描述](../Images/d011e10bd784deffd79bcb4ca3d042ef.png)

像这样在 Mobile 上进行 1-col 布局：

![在此处输入图像描述](../Images/bd7605b4f7523fb442f1ae9144f84f65.png)

我无法将**容器 #5**放到桌面上的正确位置。我的标记（为简洁而修改）是这样的（可以更改为任何内容）：

```
<div id="container-1></div>
<div id="container-2></div>
<div id="container-3></div>
<div id="container-4></div>
<div id="container-5></div> 
```

在桌面上：**#1**和**#5**向左浮动，其余的向右浮动。**但这会导致 #5 位于#4**旁边（#5 与 #4 顶部对齐）而不是**#1**正下方。我认为它应该工作。我在这里错过了什么吗？

PS：所有容器的高度都是流动的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:26:58.213

尝试将中间 3 包裹在一个额外的容器中并包裹它。

```
<div id="container">
    <div id="container-1">content content content content content content </div>
    <div id="containerwrapper">
        <div id="container-2">content content content content content content </div>
        <div id="container-3">content content content content content content content content content content content content </div>
        <div id="container-4">content content content content content content content content content content content content </div>
    </div>
    <div id="container-5">content content content content content content </div>
</div>​ 
```

和CSS：

```
#container { background: none; float: left; width: 340px; }
div { margin: 10px; margin-bottom: 0; background: #0f0; }
#container-1 { float: left; width: 60px; }
#containerwrapper { background: none; float: right; margin: 0; }
#container-2 { width: 240px; }
#container-3 { width: 240px; }
#container-4 { width: 240px; }
#container-5 { float: left; width: 60px; }​ 
```

你可以在这里看到它：http: [//jsfiddle.net/GcYuh/](http://jsfiddle.net/GcYuh/)

# delphi-xe2 - 读取文本文件 - 单行与多行

> ID：14131157
> 
> 赞同：1
> 
> 时间：2013-01-02T23:58:14.153
> 
> 标签：delphi-xe2

我正在处理一个特定的场景，我必须从文本文件中读取，解析它，从中提取有意义的信息，使用信息执行 SQL 查询，然后生成一个响应输出文件。

我有大约 3000 行代码。一切都按预期工作。然而，我一直在想一个可能会扰乱我的项目的难题。

正在读取的文本文件（我们称之为 Text.txt）可能由单行或多行组成。

在我的例子中，一条“线”由它的段名称标识——比如 ISA、BHT、HB、NM1 等……每个段的结尾都由一个特殊字符“~”标识。

现在，如果文件由多行组成（每行对应一个段）；说：-

ISA.......~

NM1.......~

DMG.......~

瑟…………～

等等....然后我的代码基本上读取每个“行”（即每个段），一次一个，并使用以下命令将其存储到临时缓冲区中：-

```
 ReadLn(myFile,buffer); 
```

然后根据每一行执行评估。产生所需的输出。没问题。

* * *

但是问题是...如果文件仅包含一行（由多个段组成）怎么办，表示为：-

ISA....... ~NM1....... ~DMG....... ~SE........ ~

然后使用我的 ReadLine 命令，我一次读取整行而不是每个段。这不适用于我的代码。

我正在考虑创建一个 if，else 语句对......这取决于我的 Txt.txt 文件包含多少行......例如：-

if line = 1:- 然后一次提取每个段...由特殊字符“~”分隔执行必要的任务（3000 行代码） else if line > 1:- 然后一次提取每一行（对应于每个段）执行必要的任务（3000 行代码）。

现在 3000 行代码重复了两次，我觉得复制和粘贴所有代码两次并不优雅。

如果我能得到一些关于如何解决这个问题的反馈，我将不胜感激，这样，无论是单行文件还是多行文件......当我继续评估时，我一次只使用一个段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:41:46.727

有很多可能的方法来做到这一点。哪个最适合您可能取决于这些文件的长度以及性能的重要性。

一个简单的解决方案是一次只读取一个字符，直到您点击波浪号分隔符。下面的例程 ReadOneItem 显示了如何做到这一点。

```
procedure TForm1.Button1Click(Sender: TObject);
const
  FileName = 'c:\kuiper\test2.txt';
var
  MyFile : textfile;
  Buffer : string;

  // Read one item from text file MyFile.
  // Load characters one at a time.
  // Ignore CR and LF characters
  // Stop reading at end-of-file, or when a '~' is read

  function ReadOneItem : string;
  var
    C : char;
  begin
    Result := '';

    // loop continues until break
    while true do
      begin

        // are we at the end-of-file? If so we're done
        if eof(MyFile) then
          break;

        // read in the next character
        read ( MyFile, C );

        // ignore CR and LF
        if ( C = #13 ) or ( C = #10 ) then
          {do nothing}
        else
          begin

            // add the character to the end
            Result := Result + C;

            // if this is the delimiter then stop reading
            if C = '~' then
              break;
          end;
      end;
  end;

begin
  assignfile ( MyFile, FileName );
  reset ( MyFile );
  try

    while not EOF(MyFile) do
      begin
        Buffer := ReadOneItem;
        Memo1 . Lines . Add ( Buffer );
      end;

  finally
    closefile ( MyFile );
  end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:44:33.087

我将通过 Win32 API`CreateFileMapping()`和`MapViewOfFile()`函数使用文件映射，然后按原样解析原始数据，扫描`~`字符并忽略每个段之间可能遇到的任何换行符。例如：

```
var
  hFile: THandle;
  hMapping: THandle;
  pView: Pointer;
  FileSize, I: DWORD;
  pSegmentStart, pSegmentEnd: PAnsiChar;
  sSegment: AnsiString;
begin
  hFile := CreateFile('Path\To\Text.txt', GENERIC_READ, FILE_SHARE_READ, nil, OPEN_EXISTING, 0, 0);
  if hFile = INVALID_HANDLE_VALUE then RaiseLastOSError;
  try
    FileSize := GetFileSize(hFile, nil);
    if FileSize = INVALID_FILE_SIZE then RaiseLastOSError;
    if FileSize > 0 then
    begin
      hMapping := CreateFileMapping(hFile, nil, PAGE_READONLY, 0, FileSize, nil);
      if hMapping = 0 then RaiseLastOSError;
      try
        pView := MapViewOfFile(hMapping, FILE_MAP_READ, 0, 0, FileSize);
        if pView = nil then RaiseLastOSError;
        try
          pSegmentStart := PAnsiChar(pView);
          pSegmentEnd := pSegmentStart;
          I := 0;
          while I < FileSize do
          begin
            if pSegmentEnd^ = '~' then
            begin
              SetString(sSegment, pSegmentStart, Integer(pSegmentEnd-pSegmentStart));
              // use sSegment as needed...
              pSegmentStart := pSegmentEnd + 1;
              Inc(I);
              while (I < FileSize) and (pSegmentStart^ in [#13, #10]) do
              begin
                Inc(pSegmentStart);
                Inc(I);
              end;
              pSegmentEnd := pSegmentStart;
            end else
            begin
              Inc(pSegmentEnd);
              Inc(I);
            end;
          end;
          if pSegmentEnd > pSegmentStart then
          begin
            SetString(sSegment, pSegmentStart, Integer(pSegmentEnd-pSegmentStart));
            // use sSegment as needed...
          end;
        finally
          UnmapViewOfFile(pView);
        end;
      finally
        CloseHandle(hMapping);
      end;
    end;
  finally
    CloseHandle(hFile);
  end; 
```

# c# - 使用 agsXMPP ，它可以发送图像吗？

> ID：14131159
> 
> 赞同：0
> 
> 时间：2013-01-02T23:58:41.483
> 
> 标签：c#, http, xmpp

我在这里找到了这个库

[http://www.ag-software.de/agsxmpp-sdk/](http://www.ag-software.de/agsxmpp-sdk/)

在此示例中被黑：http: [//www.dotnetcurry.com/ShowArticle.aspx? ID=346](http://www.dotnetcurry.com/ShowArticle.aspx?ID=346)

它实际上工作得很好，但我想知道是否可以设置一条消息，该消息将显示在其他人（谷歌谈话客户端）或其他一些客户端中显示的图像？我在网上四处寻找，无法确定这是否可能......他们的网站说 api 支持 XML-RPC，可以吗？

只是想知道我不会因为这个功能陷入死胡同……如果 XMPP jabber 甚至支持它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:36:17.680

这个库似乎不支持[XEP 0231](http://xmpp.org/extensions/xep-0231.html)，该规范*“定义了一个 XMPP 协议扩展，用于在 XML 节中包含或引用少量二进制数据”。*

# c# - 当我在调度程序中添加子项时，为什么我的 Grid 没有更新？

> ID：14131160
> 
> 赞同：0
> 
> 时间：2013-01-02T23:58:44.650
> 
> 标签：c#, wpf, backgroundworker, kinect, dispatcher

我正在使用 kinect 运行一个相当简单的任务，只是尝试使用轮询方法显示数据流。我在后台工作程序上运行所有处理，并使用调度程序更新 UI。

下面的代码适用于在调度程序中写入位图的深度和颜色流。但是，显示骨架需要一个带有子项（折线）的 Grid。此代码运行没有错误，但不会更新 UI 以显示该行。我需要做什么才能使 UI 刷新 Grid 并显示子对象？

```
this._SkeletonGrid.Dispatcher.BeginInvoke(new Action(() =>
{
     joints = new[] { JointType.Head, JointType.ShoulderCenter, JointType.ShoulderLeft, JointType.ShoulderRight, JointType.ShoulderCenter };
     this._SkeletonGrid.Children.Add(CreateFigure(skeleton, userBrush, joints));                          
})); 
```

_SkeletonGrid 是 xaml Grid 对象，CreateFigure 返回一条折线。

# sql - 需要评论策略

> ID：14131161
> 
> 赞同：2
> 
> 时间：2013-01-02T23:58:55.823
> 
> 标签：sql, database, data-structures

我正在开发新的 Web 应用程序，其中包含库等

1.  图书
2.  图片
3.  文件

过去的每一种部分在数据库中都有不同的属性，我不能将它们的信息存储在一个数据表中，所以我需要创建 3 个不同的表。

访问者可以对书籍、文件和图片发表评论，我想开发一个用于评论的模块并将所有评论存储在一张表中，我们称之为（评论）

我的问题是，我必须遵循什么策略才能做到这一点？

我正在考虑创建参考列 `[reference_id] [nvarchar 50]` ，我将存储这样的评论

1.  `files_{id of file}`
2.  `pictures_{id of picture}` 等等……那是不是很好的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:07:06.440

您应该使用单独的 ItemId 和 ItemType。

此外，您可以使用 ItemTypes 创建表并存储 ItemId 和 ItemTypeId。

像这样的结构：`pictures_{id of picture}`会浪费很多空间，对性能或以后的代码开发没有帮助。

示例：您如何从以下内容中剪切项目类型：

`picture_1234`

你必须搜索“_”，将截断的文本转换为数字，并编写大量的 SQL 代码......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:21:24.963

我回答了一个非常相似的问题： [在 StackOverflow 克隆中，Comments 表与 Questions and Answers 应该有什么关系？](https://stackoverflow.com/questions/987654/in-a-stackoverflow-clone-what-relationship-should-a-comments-table-have-to-ques/987709#987709)

在您的情况下，我建议创建一个表 Commentables：

```
CREATE TABLE Commentables (
  item_id INT AUTO_INCREMENT PRIMARY KEY
  item_type CHAR(1) NOT NULL,
  UNIQUE KEY (item_id, item_type)
); 
```

然后，书籍、图片、文件中的每一个都与 Commentables 具有 1:1 的关系。

```
CREATE TABLE Books (
  book_id INT PRIMARY KEY, -- but not auto-increment
  item_type CHAR(1) NOT NULL DEFAULT 'B',
  FOREIGN KEY (book_id, item_type) REFERENCES Commentables(item_id, item_type)
); 
```

对图片和文件执行相同操作。item_type 对于书本应始终为“B”，对于图片始终为“P”，对于文件始终为“F”。因此，您不能在 Commentables 中让一本书和一张图片引用同一行。

然后你的评论可以参考*一张*表，Commentables：

```
CREATE TABLE Comments (
  comment_id INT AUTO_INCREMENT PRIMARY KEY,
  item_id INT NOT NULL,
  FOREIGN KEY (item_id) REFERENCES Commentables (item_id)
); 
```

# jquery - jQuery：缓存阻止页面正确加载

> ID：14131163
> 
> 赞同：0
> 
> 时间：2013-01-02T23:59:01.247
> 
> 标签：jquery, caching, jquery-mobile

我正在开发的网站/应用程序有问题。这实际上是两个问题，有一个共同的原因。我正在使用 jQuery、jQueryMobile 和 PHP。

1.  我有一个使用 PHP 会话的登录系统，用户输入用户名和密码，然后登录。在下一页上，检查以确保他们以授权用户身份登录（如果他们只使用 URL ，例如）和“注销”按钮。如果他们注销并尝试通过它拒绝访问的 URL 访问该页面，但是当按下“注销”时，它会将他们带到登录表单，如果他们使用浏览器的“后退”按钮，它会将他们带回“已登录” " 页面，因为它已被缓存。

2.  我有一个提交 onChange 表单的下拉列表，该表单将在 PHP 中执行一些操作，然后将它们链接到带有标题的另一个页面（“位置：site/page.php”）。如果用户按下浏览器的后退按钮，页面将从缓存中加载，并且当前下拉值设置为他们之前选择的值。现在，要再次在同一选项上触发 onChange 事件，他们必须将下拉菜单更改为默认的“选择一个”选项，然后返回到他们想要的选项。

这两个问题似乎都是由缓存引起的。如果有一个有效的解决方案，我会喜欢的，但如果我需要关闭缓存，我知道这会影响速度，现在没问题。我尝试使用以下方法关闭缓存：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="/css/themes/CLIPTheme.css" />
    <script language="text/javascript">
        $(document).bind("mobileinit", function () {
            $.mobile.ajaxEnabled = false;
        });
    </script>
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script>
    $.ajaxSetup ({
            // Disable caching of AJAX responses
            cache: false
    });
    </script> 
```

...但这不起作用。如果有人可以帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:26:51.597

我没有完全关注您的问题的原因，但我发现 Safari 的缓存非常激进。考虑一下：[https ://stackoverflow.com/a/13365356/64262](https://stackoverflow.com/a/13365356/64262)

你不包括你的 ajax 调用，但我有时需要求助于这个。

`$.post("/MyService/", { timestamp: new Date().getTime() }, ...)`

我可以引用自己对吗？

# c# - 在 C# 中使用结构的单例

> ID：14131168
> 
> 赞同：3
> 
> 时间：2013-01-02T23:59:50.850
> 
> 标签：c#, .net, struct, autoboxing

这不是一个真正的优化问题或任何东西。这本质上是一个到底是怎么回事的问题。单例模式用于多次使用对象的单个实例。这一切都很好，但是如果我尝试用结构做类似的模式，它不会得到一个实例。

我开始尝试`Color`对`System.Drawing`. 这是一些示例代码：

```
 class Colors
    {
        private static Color _red;
        public static Color Red
        {
            get
            {
                if (_red.IsEmpty)
                    _red = Color.FromArgb(0xFF, 0xFF, 0x42, 0x39);

                return _red;
            }
        }
    }

    static void Main(string[] args)
    {
        var redOne = Colors.Red;
        var redTwo = Colors.Red;

        Console.WriteLine("redOne.Equals(redTwo) : {0}", redOne.Equals(redTwo));
        Console.WriteLine("redOne == redTwo : {0}", redOne == redTwo);
        Console.WriteLine("Object.Equals(redOne, redTwo) : {0}", Object.Equals(redOne, redTwo));
        Console.WriteLine("Object.ReferenceEquals(redOne, redTwo) : {0}", Object.ReferenceEquals(redOne, redTwo));
        Console.ReadLine();
    } 
```

输出是：

```
redOne.Equals(redTwo) : True
redone == redTwo : True
Object.Equals(redOne, redTwo) : True
Object.ReferenceEquals(redOne, redTwo) : False 
```

前三个结果是意料之中的，但最后一个让我感到惊讶。现在，我最好的猜测是当`_red`从`Colors.Red`它返回时返回一个副本，就像普通值类型一样。因此，虽然只有一个 的实例`_red`，但`Colors.Red`返回一个全新的实例，这就是存储在 redOne 和 redTwo 中的内容。我的想法正确吗？

另外，如果这**是**正确的，`static`在结构上使用关键字有什么意义吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T00:01:54.740

ReferenceEquals 不适用于结构/值类型，只能用于类。

在两个结构上调用 ReferenceEquals 会将每个结构“装箱”到它自己的内存位置，然后比较两个（显然）不同的地址。

由于类已经是引用类型，因此对 ReferenceEquals 的调用会比较实例的实际地址。

本质上，您不需要存储“Red”的静态副本。将代码更改为以下内容：

```
class Colors
{
    public static Color Red
    {
        get
        {
            return Color.FromArgb(0xFF, 0xFF, 0x42, 0x39);
        }
    }
} 
```

补充阅读： [MSDN - 结构（C# 编程指南）](http://msdn.microsoft.com/en-us/library/saxz13w4%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-03T00:03:14.827

> 因此，虽然 _red 只有一个实例，但 Colors.Red 返回一个全新的实例，这就是存储在 redOne 和 redTwo 中的内容。我的想法正确吗？

是的。您有两个副本，因为 Color 是一种值类型。当您使用 时`ReferenceEquals`，您将结构体装箱成一个`object`，并调用`Object.ReferenceEquals`两个（截然不同的）装箱对象。

> 另外，如果这是正确的，那么在结构上使用 static 关键字有什么意义吗？

这里的重点不是让它成为一个单例——它是为了简化 API，这样你就可以得到一个颜色的有效常量值：`Colors.Red`或`Colors.Green`. 如果不是静态的，您每次都需要手动创建“红色”颜色。在这种情况下，属性实际上是`Colors`类上看起来更好看的工厂方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T05:55:52.730

该变量`_red`将保存一个`Color`初始化一次的实例。因为 .net 没有提供任何方法来返回对结构实例的引用，但是，每次对属性的调用都`Red`将返回一个新的结构实例，其公共和私有字段都使用从`_red`. 进一步，因为值类型字段不存储对象，而只是数据，可以根据需要隐式复制到堆对象中（每个值类型都有对应的堆对象类型；两者都由同一个`Type`对象描述，但它们不是同一个类型)，每次将值类型转换为堆类型（例如`Object`）时，都会使用从值类型实例初始化的字段值创建一个新的堆对象实例。

# html -

> ID：14131169
> 
> 赞同：0
> 
> 时间：2013-01-02T23:59:52.413
> 
> 标签：html, css

好吧，我完全被这个难住了。标签内的文本在`<h1>`尝试将`<h1>`元素定位在`<section>`其所在位置时会导致背景移动。`<p>`标签不会导致此问题

我在`<section>`标签中有一个背景图片，如下所示：

```
.payroll {
        background-image: url('../img/payroll_bg.jpg');
        background-repeat: repeat-x;
        height: 567px;
    }

    .payroll h1 {
        color: #193441;
        text-align: left;
    }

    .pos {
        background-image: url('../img/pos_bg.jpg');
        background-repeat: repeat-x;
        height: 632px;

    } 
```

我的 h1 在 CSS 中定义如下：

```
h1 {
    font-family: "Helvetica-light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
    font-weight: 300;
    font-size: 230%;
    color: #fcfff5;
    text-align: center;
} 
```

我的 HTML 看起来像这样：

```
<section class="payroll">
        <h1>
            Payroll
        </h1>
</section><!-- END class="payroll"-->   

<section class="pos">
    <p>
        This is the pos Costing Section
    </p>

</section><!-- END class="pos" --> 
```

如果我尝试`<h1>`通过添加边距来移动部分周围的元素，我将背景向下移动 4em `.payroll h1 {`：

```
.payroll h1 {
        color: #193441;
        text-align: left;
            margin: 4em 0 0 2em 
    } 
```

上面的代码根本没有移动背景。

在我尝试使用边距移动元素之前，使用`<p>`标签不会导致背景移动。使用`<h1>`标签会导致背景立即下降。

再一次，我在这里完全被难住了。我还添加了图片来演示。

![在此处输入图像描述](../Images/8e9ce52e399c8e44609e2598be00d29d.png)

另一张带有边距属性的图片添加到`<h1>`标签中。

![在此处输入图像描述](../Images/91e3c7c4ae27fee0d8fdcf8d32980cfb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:03:23.857

尝试给 .payroll 或 .pos “溢出：隐藏；”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:07:40.737

让 h 标记向左浮动，然后添加清除 div

```
.payroll h1 {
        color: #193441;
        text-align: left;
        margin: 4em 0 0 2em ;
        float:left
    } 
```

HTML：

```
<h1>
            Payroll
        </h1>
<div style="clear:both"></div> 
```

# android - com.android.internal.R 的目录是什么？

> ID：14131170
> 
> 赞同：3
> 
> 时间：2013-01-03T00:00:20.337
> 
> 标签：android

R.java 不在sources/android-17/com/android/internal 中。我想看源代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T00:29:35.587

该文件将是作为固件构建的一部分生成的代码。它可能不直接存在于版本控制系统中。它也不太可能对你有任何价值——只是一堆整数。

话虽如此，欢迎您从[http://source.android.com](http://source.android.com)下载源代码，构建它，找到特定`R.java`文件并检查其内容。

# android - 从 Fragment 调用 startIntentSenderForResult (Android Billing v3)

> ID：14131171
> 
> 赞同：55
> 
> 时间：2013-01-03T00:00:38.160
> 
> 标签：android, android-fragments, android-activity, android-billing

`startIntentSenderForResult()`启动购买流程时使用新的 Android Billing v3 文档和帮助代码。我想从`Fragment`.

例如[文档](http://developer.android.com/google/play/billing/billing_integrate.html#billing-requests)建议调用

```
startIntentSenderForResult(pendingIntent.getIntentSender(),
    1001, new Intent(), Integer.valueOf(0), Integer.valueOf(0),
    Integer.valueOf(0)); 
```

和[帮助代码](http://developer.android.com/training/in-app-billing/purchase-iab-products.html#Purchase)调用

```
mHelper.launchPurchaseFlow(this, SKU_GAS, 10001,   
    mPurchaseFinishedListener, "bGoa+V7g/yqDXvKRqq+JTFn4uQZbPiQJo4pf9RzJ"); 
```

调用`startIntentSenderForResult()`.

问题是，调用`startIntentSenderForResult()`会导致`onActivityResult()`调用父级`Activity`而不是`Fragment`调用它的源（`IabHelper`驻留位置）。

我可以`onActivityResult()`在父级中接收`Activity`，然后在`onActivityResult()`上手动调用`Fragment`，但是有没有办法调用`startIntentSenderForResult()`from a ，`Fragment`将结果直接返回给 that `Fragment`？`onActivityResult()`

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-03T01:24:47.483

我建议两种解决方案：

1.) 将 IabHelper mHelper 放在活动上，并从片段中调用 IabHelper。

就像是：

要使用此解决方案，请在活动中将 IabHelper 声明为公共，并使用一种方法从 Fragment 调用启动器。

```
public class MyActivity extends Activity{

    public IabHelper mHelper

    public purchaseLauncher(){

    mHelper.launchPurchaseFlow(this, SKU_GAS, 10001,   
         mPurchaseFinishedListener, "bGoa+V7g/yqDXvKRqq+JTFn4uQZbPiQJo4pf9RzJ");

   }

    /*The finished, query and consume listeners should also be implemented in here*/
}

public class FragmentActivity extends Fragment{

      MyActivity myAct = (MyActivity) getActivity();

      myAct.purchaseLauncher();

} 
```

2.) 在 onActivityResult 中，调用包含 IabHelper 对象的相应片段。适当的片段可以具有对辅助对象的访问方法。

```
protected void onActivityResult(int requestCode, int resultCode,Intent data)    
{
    super.onActivityResult(requestCode, resultCode, data);

    FragmentManager fragmentManager = getSupportFragmentManager();
    Fragment fragment = fragmentManager.findFragmentByTag("YourTag");       
    if (fragment != null)
    {
        ((MyFragmentWithIabHelper)fragment).onActivityResult(requestCode, resultCode,data);
    } 
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-16T09:10:55.400

1）您应该修改您的结果代码（RC_REQUEST）以将片段索引放入其中。

```
int rc_reqest = RC_REQUEST +  ((getActivity().getSupportFragmentManager().getFragments().indexOf(this)+1)<<16)  ;      
mHelper.launchPurchaseFlow(getActivity(), sku, rc_reqest ,mPurchaseFinishedListener, payload); 
```

2) 在 IabHelper.launchPurchaseFlow(...)

```
change mRequestCode = requestCode 
```

至

```
mRequestCode = requestCode&0xffff; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-23T12:31:51.553

从 SDK 24 及更高版本开始，在支持 Fragment 中也有一个[startIntentSenderForResult](https://developer.android.com/reference/android/app/Fragment.html#startIntentSenderForResult(android.content.IntentSender,%20int,%20android.content.Intent,%20int,%20int,%20int,%20android.os.Bundle))方法可用，它可以按预期工作。请注意，还有一个额外的 Bundle 参数，可以将其作为 null 传递。因此，最终代码将是：

```
startIntentSenderForResult(pendingIntent.getIntentSender(),
    1001, new Intent(), Integer.valueOf(0), Integer.valueOf(0),
    Integer.valueOf(0), null); 
```

当然，对于 API 23 及以下版本，我们仍然需要使用其他答案中描述的技巧。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-20T15:18:37.687

关于LEO上面非常有用的第二个解决方案：

如果 Google 曾经解决过 startIntentSenderForResult 的问题，并且它现在正确地将 onActivityResult 调用路由到片段，那么这个解决方案应该是面向未来的，这样片段的 onActivityResult 就不会被调用两次。

我想提出LEO提出的以下修改解决方案。

在 Fragment 的父 Activity 实现中：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    boolean handled = false;

    // The following is a hack to ensure that the InAppPurchasesFragment receives
    // its onActivityResult call.
    //
    // For more information on this issue, read here:
    //
    // http://stackoverflow.com/questions/14131171/calling-startintentsenderforresult-from-fragment-android-billing-v3
    //
    // Note: If Google ever fixes the issue with startIntentSenderForResult() and
    // starts forwarding on the onActivityResult to the fragment automatically, we
    // should future-proof this code so it will still work.
    //
    // If we don't do anything and always call super.onActivityResult, we risk 
    // having the billing fragment's onActivityResult called more than once for
    // the same result.
    //
    // To accomplish this, we create a method called checkIabHelperHandleActivityResult
    // in the billing fragment that returns a boolean indicating whether the result was 
    // handled or not.  We would just call Fragment's onActivityResult method, except 
    // its return value is void.
    //
    // Then call this new method in the billing fragment here and only call 
    // super.onActivityResult if the billing fragment didn't handle it.

    if (inAppPurchasesFragment != null)
    {
        handled = inAppPurchasesFragment.checkIabHelperHandleActivityResult(requestCode, resultCode, data);
    }

    if (!handled)
    {
        super.onActivityResult(requestCode, resultCode, data);
    }
} 
```

然后在您的 IAB 片段的实现中：

```
/**
 * Allow the IabHelper to process an onActivityResult if it can
 * 
 * @param requestCode The request code
 * @param resultCode The result code
 * @param data The data
 * 
 * @return true if the IABHelper handled the result, else false
 */

public boolean checkIabHelperHandleActivityResult(int requestCode, int resultCode, Intent data)
{
    return (iabHelper != null) && iabHelper.handleActivityResult(requestCode, resultCode, data);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (!checkIabHelperHandleActivityResult(requestCode, resultCode, data))
    {
        super.onActivityResult(requestCode, resultCode, data);
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-09T20:38:47.610

如果您可以访问它，我建议在您的基本活动类中创建某种通用处理此问题。

例如：

```
public abstract class BaseActivity extends Activity {
    private List<ActivityResultHandler> mResultHandlers 
        = new ArrayList<ActivityResultHandler>();

    public void registerActivityResultHandler(ActivityResultHandler resultHandler) {
        mResultHandlers.add(resultHandler);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        for (ActivityResultHandler resultHandler : mResultHandlers) {
            resultHandler.handle();
        }
    }
} 
```

当然，您需要通过片段实现 ActivityResultHandler 接口并在活动启动时注册它们。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-03T11:14:44.880

您需要将片段和数据传递给父活动，然后在父活动中从 onActivityResult 调用片段。

像这样

在片段中：

```
HomeActivity activity = (HomeActivity) getActivity();
activity.purchaseLauncher(this, mHelper, productDTO.getSku(), RC_REQUEST, mPurchaseFinishedListener, PAYLOAD);
```

在家长活动中：

```
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (storeFragment != null) {
            storeFragment.onActivityResult(requestCode, resultCode, data);
        }
    }

    public void purchaseLauncher(StoreFragment storeFragment, IabHelper mHelper, String sku, int requestCode, IabHelper.OnIabPurchaseFinishedListener mPurchaseFinishedListener, String payload) {
        this.storeFragment = storeFragment;
        mHelper.launchPurchaseFlow(this, sku, requestCode, mPurchaseFinishedListener, payload);
    }
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-02-26T18:22:16.333

**编辑：** `android.support.v4.app.Fragment`现在包含一个向后兼容的版本`startIntentSenderForResult()`，所以这个答案已经过时了。

**老答案：**

从支持库 23.2.0 开始，修改`requestCode`不再起作用：`FragmentActivity`现在跟踪其片段发出的请求。我将此方法添加到`FragmentActivity`托管`Fragment`（代码基于`FragmentActivity.startActivityFromFragment(Fragment, Intent, int, Bundle)`）：

```
public void startIntentSenderFromFragment(Fragment fragment, IntentSender intent, int requestCode, @Nullable Intent fillInIntent, int flagsMask, int flagsValues, int extraFlags) throws IntentSender.SendIntentException {
    if (requestCode == -1) {
        startIntentSenderForResult(intent, requestCode, fillInIntent, flagsMask, flagsValues, extraFlags);
        return;
    }

    if ((requestCode & 0xffff0000) != 0) {
        throw new IllegalArgumentException("Can only use lower 16 bits for requestCode");
    }

    try {
        Method method = FragmentActivity.class.getDeclaredMethod("allocateRequestIndex", Fragment.class);
        method.setAccessible(true);
        int requestIndex = (int) method.invoke(this, fragment);
        startIntentSenderForResult(intent, ((requestIndex + 1) << 16) + (requestCode & 0xffff), fillInIntent, flagsMask, flagsValues, extraFlags);
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
} 
```

调用它时，只有通过的`Fragment`人会收到 `onActivityResult()`调用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-11-21T12:08:54.527

```
if (requestCode == RC_REQUEST) 
{
    Intent intent = new Intent(ContainerAvtivity.this,ContainerAvtivity.class);
    startActivity(intent);
    finish();
} 
```

`RC_REQUEST`与您用于启动购买流程的相同

将此添加到`onActivityResult`您的活动中。库存侦听器将为您产生所需的结果。（我知道它是临时修复，但对我有用））。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-22T08:14:10.907

就我而言，我在 Activity 中做了 onActivityResult ：

```
@Override protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (!mHelper.handleActivityResult(requestCode, resultCode, data)) {
        // not handled, so handle it ourselves (here's where you'd
        // perform any handling of activity results not related to in-app
        // billing...
        super.onActivityResult(requestCode, resultCode, data);

    }
    else {
        Log.d(TAG, "onActivityResult handled by IABUtil.");
    }

} 
```

和片段相同，它在应用计费中起作用

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {

    // Pass on the activity result to the helper for handling
    if (!mHelper.handleActivityResult(requestCode, resultCode, data)) {
        // not handled, so handle it ourselves (here's where you'd
        // perform any handling of activity results not related to in-app
        // billing...
        super.onActivityResult(requestCode, resultCode, data);

    }
    else {
        Log.d(ITEM_SKU, "onActivityResult handled by IABUtil.");
    }

} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-21T10:28:03.040

如果您想在片段上获得回调而不是`super.onActivityResult()`从您的活动中调用。

这将调用您的 Fragments `onActivityResult()`。

并且不要忘记`startIntentSenderForResult`从您的片段上下文中调用。

不要使用活动上下文`getActivity().startIntentSenderForResult`

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-04-09T15:40:17.047

你需要打电话

```
super.onActivityResult(requestCode, resultCode, data); 
```

在 Activity 和 Fragment 的 onActivityResult 的开头，将结果级联到片段。

在我的 FragmentActivity 这读作

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    // No action here, call super to delegate to Fragments
    super.onActivityResult(requestCode, resultCode, data);
} 
```

# asp.net - 在 Firefox 和 Chrome 中不遵守 MVC3 FormsAuthentication cookie，在 IE 中有效

> ID：14131176
> 
> 赞同：2
> 
> 时间：2013-01-03T00:01:26.110
> 
> 标签：asp.net, google-chrome, firefox, cookies, formsauthentication

我难住了。我有一个 MVC3 应用程序，它使用 FormsAuthentication 和自定义令牌（存储一些额外的用户数据）。它适用于 IE。但是，在 Firefox 和 Chrome 中，不遵守 cookie。

Fiddler 中的检查表明，登录后 cookie 在响应中发送到客户端，但在客户端的后续请求（登录后加载主页）中，cookie 不会发送回服务器。

我的代码：

```
var encryptedCookieString = FormsAuthentication.Encrypt(ticket);
  var cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encryptedCookieString);
  cookie.Expires = ticket.Expiration;
  HttpContext.Current.Response.Cookies.Add(cookie); 
```

并获取 cookie：

```
var cookie = HttpContext.Current.Request.Cookies.Get(FormsAuthentication.FormsCookieName); 
```

以及 Auth 设置的 web.config：

```
 <authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication> 
```

我查看了 Firefox 和 Chrome 浏览器，但看不到任何关闭 cookie 的地方。

起初我认为这可能是在 localhost 上开发的问题，所以我部署到了培训服务器。同样的故事 - 适用于 IE，不适用于 Chrome 或 Firefox。

有什么线索吗？

**更新**

我的一位同事能够使用 Chrome 访问它，并且对他有用。所以我不得不相信这是我的 Chrome/Firefox 的错误。此外，我在 VPN 上并在我的开发机器中使用远程桌面。这会导致问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:46:49.597

答案是：cookie 太大了。

我花了一些时间才弄清楚这一点。我们在 cookie 中存储了大量额外的用户数据（以防止对数据库的重复查询），并且 cookie 超过了大多数浏览器允许的 4Kb。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:28:44.097

是否有可能`forms`在 web.config 的身份验证节点中拥有`cookieless="UseDeviceProfile"`或`"AutoDetect"`？

如果是这样，请将其更改为`cookieless="UseCookies"`

# git - 本地 git repo 是否使用相同的文件进行初始化

> ID：14131178
> 
> 赞同：0
> 
> 时间：2013-01-03T00:01:30.213
> 
> 标签：git

我在 Mac 上并在本地安装了 git。我的问题是如果我在说创建了一个网络项目

```
/Volumes/www/myproject 
```

我想将我当前的项目初始化到 git 我是否在同一个文件夹 myproject 中初始化它，或者它可以在我选择的另一个位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:05:35.660

你可以随心所欲。如果您在同一个文件夹中执行此操作，它会在其中创建一个`.git`文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:09:52.593

如果您更改位置，我想您也需要复制 .git 目录并执行

git 提交 -a

并取消注释您所做的更改

# php - 为 D3 格式化数据

> ID：14131183
> 
> 赞同：0
> 
> 时间：2013-01-03T00:02:10.680
> 
> 标签：php, javascript, d3.js

如何为我在 d3.js 中制作的图表格式化此示例数据？

```
[
    [
        [
            "2",
            "2013-01-02 00:00:00+00"
        ],
        [
            "3",
            "2012-12-28 00:00:00+00"
        ],
        [
            "3",
            "2012-12-27 00:00:00+00"
        ],
        [
            "1",
            "2012-12-26 00:00:00+00"
        ],
        [
            "1",
            "2012-12-24 00:00:00+00"
        ],
        [
            "4",
            "2012-12-21 00:00:00+00"
        ],
        [
            "1",
            "2012-12-20 00:00:00+00"
        ]
    ],
    [
        [
            "1",
            "2012-12-27 00:00:00+00"
        ],
        [
            "2",
            "2012-12-21 00:00:00+00"
        ],
        [
            "2",
            "2012-12-18 00:00:00+00"
        ],
        [
            "1",
            "2012-12-17 00:00:00+00"
        ],
        [
            "1",
            "2012-11-27 00:00:00+00"
        ],
        [
            "1",
            "2012-11-03 00:00:00+00"
        ],
        [
            "1",
            "2012-10-27 00:00:00+00"
        ]
    ]
] 
```

`Uncaught TypeError: Cannot use 'in' operator to search for '_dateElement' in NaN`目前，当 d3 尝试解析此数据时，我的 javascript 控制台在 d3.v3.js:1033 内为我提供

似乎d3不想处理引号中的数字，没有引号会使json无效，我的ajax调用不会返回，这意味着我将无法解析我的d3函数中的数组。

我相信 d3 可以解析和格式化 json，但我陷入了僵局。我如何格式化这些数据，日期对象将是我的 X 轴以升序排列，Y 轴将是整数值的最大值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:14:30.843

您需要将输入数组解析为输出数组，其中包含所需格式的数据。正如 C.Reed 在评论中所说，使用 parseInt 将字符串转换为数字并使用 d3.time.format 将字符串转换为日期。 [https://github.com/mbostock/d3/wiki/Time-Formatting](https://github.com/mbostock/d3/wiki/Time-Formatting)

```
var date_in = "2013-01-02 00:00:00+00";
var format = d3.time.format("%Y-%m-%d 00:00:00+00");
var date_out = format.parse(date_in); 
```

（假设时间始终为 0）

# python - 从csv文件的货币价值列中删除引号？

> ID：14131184
> 
> 赞同：1
> 
> 时间：2013-01-03T00:02:10.680
> 
> 标签：python, csv

从csv文件的货币价值列中删除引号？

我的 CSV：

```
"   2102"|"LINDOMAR MARTINS DE FREITAS"|"RUA 02 NR.270"|"FORMOSA"|"98130860"|"TIMON"|"MA"|"ADMINISTRATIVO"|"FATURISTA"|"LINDOMAR"|"S"|20130102|20130102|20130102|115.00|"TDC"|"4"|"88792334"|""|""|"" 
```

我想要一个值为`115.00`不带引号的列。

```
L = []
reader = csv.reader(open(infile), csv.QUOTE_NONNUMERIC, delimiter='|', quotechar='"')

for row in reader:
    L.append(tuple(row)) 
```

在 Python List`L`列中，其`115.00`值为`'115 .00 '`. 我认为该方法是`csv.header`在所有列上加上引号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:10:40.327

您可以在适当的列上使用 float 。但是请注意，**由于舍入误差，浮点数通常不用于货币值**。Python 有一个专门的[Decimal](http://docs.python.org/2/library/decimal.html)类型，它比纯浮点数具有优势，值得注意的是：

> ...十进制数可以精确表示。相反，像 1.1 和 2.2 这样的数字在二进制浮点中没有精确的表示。最终用户通常不会期望 1.1 + 2.2 像二进制浮点那样显示为 3.3000000000000003。

```
#!/usr/bin/env python

# consider: from decimal import Decimal
from pprint import pprint
import csv

if __name__ == '__main__':
    L = []
    reader = csv.reader(open("infile.csv"), 
        csv.QUOTE_NONNUMERIC, delimiter='|', quotechar='"')
    for row in reader:
        # consider: L.append( tuple( row[:14] + [Decimal(row[14])] + row[15:] ))
        L.append( tuple( row[:14] + [float(row[14])] + row[15:] ))
    pprint(L) 
```

这将产生：

```
[(' 2102',
  'LINDOMAR MARTINS DE FREITAS',
  'RUA 02 NR.270',
  'FORMOSA',
  '98130860',
  'TIMON',
  'MA',
  'ADMINISTRATIVO',
  'FATURISTA',
  'LINDOMAR',
  'S',
  '20130102',
  '20130102',
  '20130102',
  115.0,
  'TDC',
  '4',
  '88792334',
  '',
  '',
  '')] 
```

# html - Twitter Card Preview 无法获取我的图片

> ID：14131188
> 
> 赞同：2
> 
> 时间：2013-01-03T00:03:01.830
> 
> 标签：html, twitter, apache2, meta-tags

我正在使用[Twitter Card Preview](https://dev.twitter.com/docs/cards/preview)工具来测试我的 Twitter Card 设置。

```
<meta property="twitter:url" content="http://liberalgeek.com/content/why-do-atheists-celebrate-christmas" />
<meta property="twitter:card" content="summary" />
<meta property="twitter:description" content="I can&#039;t speak for all atheists, I can only speak for myself, so please leave a comment below and explain why you celebrate Christmas! When I hear someone ask, &quot;Why do atheists celebrate Christmas?&quot; my first thought often is: Better Question: Why do Christians celebrate Christmas?" />
<meta property="twitter:creator" content="@kennywyland" />
<meta property="twitter:title" content="Why do Atheists celebrate Christmas?" /> 
```

当我使用上述元标记时，预览工作，我得到了预期的结果。但是，当我尝试添加 twitter:image 标签时，它失败了。这是一个例子：

```
<meta property="twitter:image" content="http://liberalgeek.com/sites/default/files/styles/large/public/Christmas%20Tree.jpg" /> 
```

如果我包含一个 twitter:image 元标记并单击“预览”按钮，它会旋转一会儿，然后给我错误：

```
Looks like something is technically wrong.
Please try again in a few minutes. 
```

我在该网站上尝试了其他图像，但没有成功。我已经尝试过托管在同一台 apache 服务器上的其他（非 drupal）站点，以确保它不是 drupal 问题：

```
<meta property="twitter:image" content="http://www.journalscape.com/kenny/images/acupuncture-kenny-2003-08-20-small.jpg" /> 
```

如果我将这些图像中的一个复制到具有不同 apache 服务器的不同机器上，twitter 会看到它并且它工作得很好。Twitter 在预览中显示它。

我已经在两个站点上检查了我的 robots.txt。我的 robots.txt 中的任何内容都不应阻止 Twitterbot 获取，但以防万一我明确添加了他们建议的代码：

```
User-agent: Twitterbot
Disallow: 
```

但是，我正在看着我的 apache 网络日志滚动，而 Twitter 从未尝试获取图像。当我单击预览按钮时，我希望在访问日志中看到一个条目，显示 twitter 正在获取图像……但什么也没有。我已经尝试了几张图片以确保这不是缓存问题。

我究竟做错了什么？

编辑：我发现在我的机器上运行的一个站点（相同的 apache）工作得很好。如果我使用这张图片：

```
<meta property="twitter:image" content="http://www.geekqi.com/images/StylizedYinYangRedLucida.png" /> 
```

然后 twitter 立即获取它。我不明白为什么一个有效而另一个无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-28T02:06:01.220

事实证明，问题是时间问题。添加 robots.txt 文件后，我需要等待几个小时才能让 Twitter 看到新的 robots.txt，然后它开始正常获取我的图像。

# javascript - Load() 在被调用后似乎失去了作用域

> ID：14131189
> 
> 赞同：0
> 
> 时间：2013-01-03T00:03:07.647
> 
> 标签：javascript, jquery, html, ajax, load

我有一个淡入某些 html 文件的按钮，然后是一个后退按钮，可以将用户返回到初始视图。然而，这只工作一次。他们无法再次单击该按钮以获得更详细的视图。

```
$('.support').click(function () {
$('.main-view').fadeOut('slow', function () {
    // Animation complete.
    $('.main-view-wrapper').load('includes/modules/support.html');
});
});

$('.back').click(function () {

$('.return-main').fadeOut('slow', function () {
    // Animation complete.
    $('.main-view-wrapper').load('includes/modules/main-view.html');
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:05:08.057

如果`.back`元素是动态生成的，你应该委托事件：

```
$('.main-view-wrapper').on('click', '.back', function(){
    $('.return-main').fadeOut('slow', function () {
         // Animation complete.
         $('.main-view-wrapper').load('includes/modules/main-view.html');
    });
}) 
```

* * *

```
$(document).on('click', '.support', function () {
   $('.main-view').fadeOut('slow', function () {
       // Animation complete.
        $('.main-view-wrapper').load('includes/modules/support.html');
    });
});

$(document).on('click', '.back', function(){
    $('.return-main').fadeOut('slow', function () {
         // Animation complete.
         $('.main-view-wrapper').load('includes/modules/main-view.html');
    });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:06:31.510

在你点击了两个按钮之后，你已经淡出了`.main-view`和`.return-main`，但是你永远不会淡入它们。所以下次点击什么都不会发生。您是否需要在单击对面的按钮时将它们淡入？

# ruby-on-rails - 如何配置简单的表单类？

> ID：14131198
> 
> 赞同：0
> 
> 时间：2013-01-03T00:03:57.993
> 
> 标签：ruby-on-rails, simple-form

是否可以让简单的表单将字段名称添加到包装类？

也就是说，如果我有`f.input :foo_bar_baz`，那么我希望包装器是`<div class="foo_bar_baz string required">`. 这可能吗？

理想情况下，我也想关闭`id`元素属性的生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:09:46.070

当然，您可以随意子类化`SimpleForm::FormBuilder`并添加和删除属性：[https ://github.com/plataformatec/simple_form#custom-form-b​​uilder](https://github.com/plataformatec/simple_form#custom-form-builder)

您可能可以根据您的需要调整此示例：[https ://github.com/plataformatec/simple_form/wiki/Attributes-filter](https://github.com/plataformatec/simple_form/wiki/Attributes-filter)

# html - 在我的 HTML 网站上，为什么更改段落标记中的文本对齐方式会在浏览器中呈现后自动关闭段落标记？

> ID：14131199
> 
> 赞同：0
> 
> 时间：2013-01-03T00:04:00.543
> 
> 标签：html

这是一个非常小的 HTML 问题，我相信你们会很快回答。我在我的网站上发布这样的东西

```
<div id="content">
     <p>
          <hh>Header text here</hh>
          Post information here, text and stuff.
     </p>

     <p>
          <hh>Header 2 text here</hh>
          Post 2 information here, text and stuff.
     </p>
</div> 
```

但是当我尝试插入一个`<center>`或点亮左标签时，它会`<p>`自动关闭，并且`<center>`标签之后的所有内容都在段落框之外。我在Firefox中使用了inspect-element，我可以看到它以`</p>`我从未输入过的a关闭，就在任何对居中文本的调用之前。

例如：

```
<p>
     <hh>Header 2 text here</hh>
     Post 2 information here, text and stuff.
     <center>This text is centered</center>
</p> 
```

呈现如下：

```
<p>
     <hh>Header 2 text here</hh>
     Post 2 information here, text and stuff.
</p>
<center>This text is centered</center>
</p> 
```

这真的很令人沮丧，如果有人可以帮助我，那就太棒了。使用`<div align-right>`也不起作用。如果有帮助，我可以将整个设置为`<p>`以任何方式对齐并且它可以工作。
只有当我与该标签中的设置方向不同时，它才会中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:09:23.797

来自 w3school ：

> 使用 CSS 使文本居中！
> 
> HTML5 不支持该标记。改用 CSS。
> 
> 该元素在 HTML 4.01 中已弃用。

[http://www.w3schools.com/tags/tag_center.asp](http://www.w3schools.com/tags/tag_center.asp)

这是因为 center 就像一个 p。而且你不能把 ap 放在 p 中。

编辑：要回答您的评论，您可能应该这样做：

```
<p>
     <hh>Header 2 text here</hh>
     Post 2 information here, text and stuff.
     <span>This text is centered</span>
<p> 
```

在你的CSS中添加这个

```
#content p span { display:block; text-align:center; } 
```

（如果需要，它也可以与 a 标签一起使用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:07:34.187

那可能是因为那时您不能在 p-tag 中使用 hh-tag。（不确定，但主要是这样）

# sql - 将 DB2 SQL 表达式转换为 Sql Server

> ID：14131203
> 
> 赞同：0
> 
> 时间：2013-01-03T00:04:16.393
> 
> 标签：sql, sql-server, db2

谁能告诉我下面这个查询的含义？此外，我正在尝试将此查询转换为其 SQL Server 等效项。如果非常感谢任何帮助。不熟悉Locate函数或'||'的用途 在 DB2 DBstring 中的意思是 DB/ 我在 SQL Server 2012 上的一列

```
 SUBSTR(DBstring, LOC('5'||CHR(9)||'CH', DBstring) + 2, 2) = 'CH' 
```

我知道 SUBSTR 在 SQL Server 中是 SUBSTRING。我认为 SQL SERVER 有一个 LOCATE 功能。具体来说，我不确定这部分查询在做什么 ' LOC('5'||CHR(9)||'CH', DBstring) + 2'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:20:32.690

我认为`loc`相当于`locate`. SQL Server 中的表达式为：

```
substr(dbstring, charindex('5'+CHAR(9)+'CH', DBstring) + 2, 2) = 'CH' 
```

# z-index - 在 Fabric.js 中控制 z-index

> ID：14131206
> 
> 赞同：25
> 
> 时间：2013-01-03T00:05:05.690
> 
> 标签：z-index, fabricjs

在fabricjs中，我想创建一个场景，其中鼠标下的对象在z-index中上升到场景的顶部，然后一旦鼠标离开该对象，它就会回到它来自的z-index。一个人不能设置 object.zindex （这会很好）。相反，我使用了一个占位符对象，该对象被放入对象列表中的旧位置，然后使用 canvas.insertAt 将旧对象放回它在列表中的位置。但是，这是行不通的。

有关此状态，请参阅[http://jsfiddle.net/rFSEV/ 。](http://jsfiddle.net/rFSEV/)

```
var canvasS = new fabric.Canvas('canvasS', { renderOnAddition: false, hoverCursor: 'pointer', selection: false });
var bars = {}; //storage for bars (bar number indexed by group object)
var selectedBar = null; //selected bar (group object)
var placeholder = new fabric.Text("XXXXX", { fontSize: 12 });

//pass null or a bar
function selectBar(bar) {
    if (selectedBar) {
        //remove the old topmost bar and put it back in the right zindex
        //PROBLEM: It doesn't go back; it stays at the same zindex
        selectedBar.remove();
        canvasS.insertAt(selectedBar, selectedBar.XZIndex, true);
        selectedBar = null;
        }
    if (bar) {
        //put a placeholder object ("XXX" for now) in the position
        //where the bar was, and put the bar in the top position
        //so it shows topmost
        selectedBar = bar;
        canvasS.insertAt(placeholder, selectedBar.XZIndex, true);
        canvasS.add(bar);
        canvasS.renderAll();
        }
    }

canvasS.on({
     'mouse:move': function(e) {
        //hook up dynamic zorder
        if (!e.target) return;
        if (bars[e.target])
            selectBar(e.target);
        else
            selectBar(null);
        },
    });

var objcount = canvasS.getObjects().length;

//create bars
for (var i = 0; i < 20; ++i) {
    var rect = new fabric.Rect({
      left: 0,
      top: 0,
      rx: 3,
      ry: 3,
      stroke: 'red',
      width: 200,
      height: 25
    });
    rect.setGradientFill({
      x1: 0,
      y1: 0,
      x2: 0,
      y2: rect.height,
      colorStops: {
        0: '#080',
        1: '#fff'
      }
    });    
    var text = new fabric.Text("Bar number " + (i+1), {
        fontSize: 12
    });
    var group = new fabric.Group([ rect, text ], {
      left: i + 101,
      top: i * 4 + 26
    });
    group.hasControls = group.hasBorders = false;

    //our properties (not part of fabric)
    group.XBar = rect;
    group.XZIndex = objcount++;

    canvasS.add(group);
    bars[group] = i;
    }
canvasS.renderAll(); 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-29T09:24:09.353

从 fabric.js 版本 1.1.4 开始，可以使用一种新的 zIndex 操作方法：

```
canvas.moveTo(object, index);
object.moveTo(index); 
```

我认为这对您的用例很有帮助。我已经更新了你的 jsfiddle - 我希望这是你想要的：
[jsfiddle](http://jsfiddle.net/RRv3g/3/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-10-29T09:25:15.827

Also make sure you change z-index AFTER adding object to canvas.

So code will looks like:

```
canvas.add(object);
canvas.moveTo(object, index); 
```

Otherwise fabricjs don`t care about z-indexes you setup.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-30T19:08:50.430

添加线条对象后，我使用以下方法使线条出现在对象下方：

```
canvas.add(line);
canvas.sendToBack(line); 
```

其他选项是

*   canvas.sendBackwards
*   canvas.sendToBack
*   canvas.bringForward
*   canvas.bringToFront

见： [https ://github.com/fabricjs/fabric.js/issues/135](https://github.com/fabricjs/fabric.js/issues/135)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-05T21:44:40.570

您可以修改您的`_chooseObjectsToRender`方法以在其末尾进行以下更改，您将能够实现 css-style `zIndex`ing。

```
objsToRender = objsToRender.sort(function(a, b) {
  var sortValue = 0, az = a.zIndex || 0, bz = b.zIndex || 0;

  if (az < bz) {
    sortValue = -1;
  }
  else if (az > bz) {
    sortValue = 1;
  }

  return sortValue;
}); 
```

[https://github.com/fabricjs/fabric.js/pull/5088/files](https://github.com/fabricjs/fabric.js/pull/5088/files)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-14T16:33:18.747

您可以使用这两个函数来获取结构对象的 z-index 并修改对象的 z-index，因为没有特定的方法可以通过 object index 修改 z-index：

```
fabric.Object.prototype.getZIndex = function() {
    return this.canvas.getObjects().indexOf(this);
}

fabric.Canvas.prototype.moveToLayer = function(object,position) {
    while(object.getZIndex() > position) {
        this.sendBackwards(object);
    }
} 
```

# c# - 无法显示变量 html 端

> ID：14131209
> 
> 赞同：0
> 
> 时间：2013-01-03T00:05:11.647
> 
> 标签：c#, asp.net, webforms

在我的项目中，我想向 html 端显示一个变量，但我收到了这条消息。

我的代码在后面

```
 ShipperResposite _shiperResposite = new ShipperResposite();

    public decimal Price
    {
        get { return Price; }
        set
        {
            Price=_shiperResposite.GetPriceFromID(Convert.ToInt32(Request.QueryString["ID"]));
            Price = value;
        }
    } 
```

我的 html 方面

```
 <div class="prod_price_big"><span class="reduce">350$</span><%=Price %><span class="price"> </span></div> 
```

我希望价格显示在 html 端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:16:25.910

利用`asp:Label`

html

```
<div class="prod_price_big">
   <span class="reduce">350$</span>
   <asp:Label runat="server" ID="PriceLabel" CssClass="price"></asp:Label>
</div> 
```

代码隐藏

```
PriceLabel.Text = this.Price.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:56:32.193

```
 public decimal Price
    {
        get { return Price; }
        set
        {
            Price=_shiperResposite.GetPriceFromID(Convert.ToInt32(Request.QueryString["ID"]));
            Price = value;
        }
    } 
```

那段代码是一个相当大的问题，会导致堆栈溢出。

`Price`是您的财产的名称。在 set 方法中发生的第一件事是您将属性设置为某个值，这会导致 set 方法一次又一次地执行……直到应用程序完全崩溃并出现令人费解的错误消息。

这真的应该是：

```
 private decimal _price = 0.00M;

 public decimal Price
    {
        get { return _price; }
        set
        {
        _price = value;
        }
    } 
```

请注意，我删除了该`Price = shiperResposite...;`部分。我不确定您通过将价格设置为设定值和 GetPriceFromID 部分来尝试做什么。*无论哪种方式，使用查询字符串调用在设置器*中设置属性值都是完全失败的，需要重新考虑。

# javascript - 谷歌分析 javascript 片段分析

> ID：14131212
> 
> 赞同：3
> 
> 时间：2013-01-03T00:05:39.623
> 
> 标签：javascript, cross-domain, code-snippets

只是想知道谷歌分析代码片段在 javascript 编程方面是如何工作的。

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-X']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 
        'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();

</script> 
```

1）我们将 2 个元素推送到 _gaq 数组上，但它何时真正执行/使用，尤其是因为 ga.js 位于远程服务器上？我尝试查看 ga.js 代码，但它确实令人困惑。

2) 如果网站是 https:// 但我们仍然将 javascript 链接为[http://www.google-analytics.com/ga.js会发生什么](http://www.google-analytics.com/ga.js)

```
(function() {
        var ga = document.createElement('script');
        ga.src = 'http://www.google-analytics.com/ga.js';
        ga.setAttribute('async', 'true');
        document.documentElement.firstChild.appendChild(ga);
      })(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:12:12.367

`_gaq`是一个[全局变量](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Global_variables)（在浏览器中全局变量存储在[`Window`](https://developer.mozilla.org/en-US/docs/DOM/window)对象中）

它的引用`https://ssl.google-analytics.com/ga.js`如下：

```
 var He = function () {
      var a = W._gaq,
      b = l;
      if (a && Aa(a[p]) && (b = "[object Array]" == Object[y][w].call(Object(a)), !b)) {
         Z = a;
         return
      }
      W._gaq = Z;
      b && Z[p][xa](Z, a)
   }; 
```

W 也指 Window 全局变量（脚本被缩小以节省字节）：

```
 var W = window, 
```

为方便起见，我在此处粘贴了 ga.js 的格式化版本：http: [//pastebin.com/sBmeSg9M](http://pastebin.com/sBmeSg9M)

查看第 603 行和第 1956 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:38:06.433

1.  谷歌分析代码被加载并在您的页面上运行，在您的域中，因此它可以访问`window`并在其上定义的所有变量。`_gaq`是 Google 的代码在运行时检查的神奇变量名称，以查看已定义的内容并使用它找到的值开始跟踪事物。然后它会在您的页面加载期间跟踪此变量的更改（这就是它如何进行点击事件跟踪等）。

2.  正如其他人所提到的，未能在通过 HTTPS 提供的页面上使用 Google Analytics 的 HTTPS URL 将导致有关“不安全内容”的警告。坚持使用 Google 提供的代码，他们这样做是有原因的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T00:13:57.747

> 2) 如果网站是 https:// 但我们仍然将 javascript 链接为[http://www.google-analytics.com/ga.js会发生什么](http://www.google-analytics.com/ga.js)

这将阻止几乎所有现代浏览器（例如[Chrome](http://support.google.com/chrome/bin/answer.py?hl=en&answer=1342714)）加载 JS 文件并向用户显示存在“不安全内容”的小警告。

这背后的原因是，加载 JS 文件将允许[MITM 攻击](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)而没有 SSL 证书警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T00:15:25.913

2.：那么您的 SSL 证书无法正常工作。您的 SSL 站点中包含非 ssl (https) 脚本。你是这个意思吗？

# apache - Apache 的重写条件不是文件 (!-f) 行为

> ID：14131216
> 
> 赞同：0
> 
> 时间：2013-01-03T00:06:11.377
> 
> 标签：apache, mod-rewrite, url-rewriting, rewrite

我有基本的 htaccess 文件：

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ rewrite.php?data=$1 [L,QSA] 
```

它在大多数情况下按预期工作。我希望它不起作用的是：

我有这个链接不按照规则重写：

[http://domain.com/movies.php](http://domain.com/movies.php)

但这些 url 也没有被重写：

[http://domain.com/movies](http://domain.com/movies) http://domain.com/movies/ [http://domain.com/movies/fdgdgdgdg](http://domain.com/movies/fdgdgdgdg)

这是正常行为吗？我该如何解决这个问题，以便唯一有效的 url 以movies.php 结尾

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T12:04:26.563

我认为这是一个多视图问题。禁用多视图

```
Options -MultiViews 
```

# magento - Unirgy uRapidflow，一个 Magento 扩展

> ID：14131229
> 
> 赞同：0
> 
> 时间：2013-01-03T00:07:47.167
> 
> 标签：magento

```
ACTIVITY,,,"Preparing data"
ERROR,,,"Warning: Illegal string offset 'field'  in /var/www/vhosts/example.com/example/includes/src/Unirgy_RapidFlow_Model_Mysql4_Catalog_Product_Abstract.php on line 364" 
```

你好好人，

从上面的错误中可以看出，我无法让 Unirgy RapidFlow（magento 扩展）导出我的数据。我在 nginx、php-fpm、CentOS 6.3 上使用 Magento EE

它在 Magento/Apache 下运行良好。然后我被分配了一个从 Apache 迁移到 nginx 的项目。一切都很顺利，直到我意识到 Magento 中的 RapidFlow 扩展已经损坏。如果我不选择任何列（字段），它似乎完成了一些警告的导出。一旦我选择一列并运行它，我就会收到上述错误。

更多数据可帮助您找到解决方案：

- 与 Apache 配合得很好

- 然后我安装了 nginx 和 php-fpm

-我还使用 epel 6.8 和 remi 6 repos 对 CentOS 进行了更新

-MySQL、php 和其他一些东西得到了更新。

-当前 MySQL 是 v5.5.29

-当前的php是v5.4.10

- 当前的 nginx 是 1.0.15 （虽然我不认为这是问题。恢复到 Apache 给了我同样的错误。

-当前 Magento Enterprise v1.12.0.2（在生产和开发服务器上）

- 更新后，RapidFlow 抛出了关于 ioncube_loader_lin.5.3.so PHP 模块的错误，但我在安装 5.4 模块时修复了该部分。现在出现“非法字符串偏移”错误。

安装了一些 json 的东西 v1.2.1。我觉得这与 json 和 MySQL 有关。

在具有 CentOS 6.3、MySQL v5.1.61、PHP 5.3.3 Json 1.2.1 的生产服务器上一切正常

任何帮助都会很棒。指出我正确的方向也会有很大帮助。

非常感谢。

PS。我正在尝试发布屏幕截图，但由于我缺乏所需的声望点，这个系统不会让我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:23:18.920

经过大量的磨合，他们终于承认了他们的代码中的一个错误。一个新版本应该修复它。同时，他们建议我在需要运行 Rapidflow 时关闭 magento 开发人员模式，然后重新打开。在 index.php 中注释和注释的一行

# c++ - 将“二进 制字符串”转换为“const char*”以进行发送（Web 服务器）

> ID：14131231
> 
> 赞同：1
> 
> 时间：2013-01-03T00:08:15.653
> 
> 标签：c++, http, binary

我想`binary data`用功能发送`send()`

**职能：**

```
void ssend(const char* data){
    send(socket_fd, data, strlen(data), 0);
}

bool readFile(const char* path){
    std::ifstream ifile(path);
    if(ifile){
        if(!ifile.is_open()){
            ErrorPage("403");
            return true;
        }
        std::string sLine;

        std::string Header = "HTTP/1.1 200 OK\nConnection: Keep-Alive\nKeep-Alive: timeout=5, max=100\nServer: BrcontainerSimpleServer/0.0.1 (Win32) (Whitout Compiler code)\n\n";
        ssend(Header.c_str());

        while(!ifile.eof()){
            getline(ifile, sLine);
            cout << "String: " << sLine << endl;
            cout << "const char*: " << sLine.c_str() << endl;

            ssend(sLine.c_str());
        }
        return true;
    }
    return false;
} 
```

**测试：**

```
...
while (1) {
    socket_fd = accept(listen_fd, (struct sockaddr *)&client_addr,&client_addr_length);
    readFile( httpPath );
    recv(socket_fd, request, 32768, 0);
    closesocket(socket_fd);
}
... 
```

转换为`binary string`with 时`.c_str()`，数据消失。如何解决这个问题呢？

如何`binary data`使用功能发送`send()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:15:14.397

在 C 和 C++ 中，字符串以值为零 ( `'\0'`) 的字符终止。因此，当您说“二进制字符串”时，您正在混合不在一起的东西，因为二进制数据与字符串不同。

代替字符串，使用`BYTE`数组并将长度作为附加参数传递，以便您知道要发送多少字节。

`strlen()`一旦遇到字符串终止符，您的使用就会停止计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:51:58.607

你可以：

```
void ssend(const std::string& data)
{
  send(socket_fd, data.data(), data.length(), 0);
} 
```

或者：

```
ssend(const std::vector<char>& data)
{
  send(socket_fd, &data[0], data.size(), 0);
} 
```

如果您正在从文件中读取二进制数据，您也需要处理该问题（例如，使用打开文件`ios::binary`，使用`read()`而不是`getline()`）。不过，您可能希望使用某种编码从 Web 服务器发送二进制数据。

# html - html在图像周围换行和换行

> ID：14131233
> 
> 赞同：2
> 
> 时间：2013-01-03T00:08:23.853
> 
> 标签：html, image, word-wrap

我需要在图像周围环绕文本，该文本可能包含一个很长的单词（药物名称）。我正在做显而易见的事情，并且一直在尝试其他一些事情，但这就是我当前代码的外观。

```
<div style='width:120px;'>
    <img scr="myImage.png" style='float:right;width:50px;'>
    <p style='word-wrap:break-word;'>This_is_the_very_long_word_without_hyphens_I_need_to_wrap_.</p>
    <p>This is a normal paragraph of text that needs to flow around the image if there is space available. Leaving the option of tables out of question and specially because the height of the image may vary and don't want a huge white space between the paragraphs.</p>
<div> 
```

所以，这个词将包裹在 div 上，但在图像下面:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:09:34.017

而不是`word-wrap: break-word`, 字面上会破坏单词，而是使用`hyphens: auto`带有浏览器前缀的版本和基于 JavaScript 的连字符来使用和备份它。示例（带有更正和增强的标记）：

```
<!doctype html>
<html lang=en>
<script src=
"http://hyphenator.googlecode.com/svn/tags/Version%204.1.0/Hyphenator.js">
</script>
<script type="text/javascript">
Hyphenator.config({useCSS3hyphenation: true});
Hyphenator.run();
</script>
<style>
.hyphenate { -moz-hyphens: auto; -ms-hyphens: auto; hyphens: auto; }
</style>
 <div style='width:120px;'>  
    <img src="myImage.png" alt="" style='float:right;width:50px;'>
    <p class=hyphenate>Xylometazoline
    <p>This is a normal paragraph of text...</p>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:12:06.023

我认为您必须将 te img-tag 插入 p-tag。（也许不是很好，但我没有看到其他选择）

# doxygen - doxygen - 名称空间/范围名称隐藏？

> ID：14131235
> 
> 赞同：2
> 
> 时间：2013-01-03T00:08:30.000
> 
> 标签：doxygen

我的 doxygen 非常擅长将 C++ 类名链接到我的参考手册页。但是，这仅在我还在名称前面包含完整命名空间时才有效。例如：

blah blah blah MyClass blah - 没有为 MyClass 创建 URL

blah blah blah MyNamespace::MyClass - 为 MyClass 创建 URL

我正在编写一个包含大量文本的编程指南，阅读每个类名前面的命名空间很乏味。即使类名不完全符合命名空间，是否有办法指示 doxygen 创建链接？或者只是在命名空间存在时删除它？我曾尝试在我的配置文件中使用 HIDE_SCOPE_NAMES=YES，但没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T20:26:52.783

假设您使用`@page`命令类型创建指南并且所有类都在其中，`MyNamespace`您可以简单地将包含的注释`@page`放在命名空间内，即

```
namespace MyNamespace
{
/** 
@page mypage My page

blah blah blah MyClass blah
*/
} 
```

然后`MyClass`会自动链接到`MyNamespace::MyClass`。

# javascript - 自定义 svg 元素 (d3)

> ID：14131240
> 
> 赞同：1
> 
> 时间：2013-01-03T00:09:24.593
> 
> 标签：javascript, d3.js

高级说明：

我有一个通过 AJAX 加载的 SVG 文件，然后使用 d3 来操作元素。SVG 文件描述了一个图形（节点和边），每个节点都有一堆与之相关的辅助信息，这些信息包含在外部文件中，例如节点的描述。我想预处理 SVG 文件以包含此辅助数据，而不是进行一堆 AJAX 调用，但我不确定包含此信息的正确方法。

为了简化问题：

我有一个 SVG 文件，其中`<g>`包含描述图中节点的元素，我想预处理 SVG 文件，以便这些`<g>`元素包含节点的描述以及其他节点的列表（此列表描述了图中的节点）。[我应该按照这里](http://www.w3.org/TR/SVG/extend.html)的描述创建一个自定义 SVG 命名空间并制作我自己的元素来保存这些数据，还是创建一个链接节点 - > 辅助信息的 javascript 哈希表会更好。最终目标是在用户单击节点时访问此辅助信息。

# svn - 大型并行提交

> ID：14131241
> 
> 赞同：1
> 
> 时间：2013-01-03T00:09:34.870
> 
> 标签：svn, commit

对你们中的一些人来说，这听起来像是一个非常基本的问题，但我是 subversion 的新手，希望您对这个问题提出建议：

如果 B 人也在我之前修改并提交了他的更改，我应该如何处理需要几天工作才能编写代码的大型提交？他的提交涉及与我相同的文件。

总结一下，工作流程如下：

*   基于 rev.1 提交 A，尚未推送
*   基于 rev.0 提交 B，已推送，创建 rev.2

考虑到 rev.1 和 rev.2 之间已更改的代码量，推送提交 A 是否有风险？

很抱歉这个菜鸟问题，但我只是想避免破坏项目的代码。在最坏的情况下，我重写了我的部分代码，之前检查了 repo 到 rev.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T01:43:23.237

如果 SVN 检测到您要提交的任何文件自您上次更新以来已由其他人提交，则 SVN 将不允许您进行提交。相反，它会出错并显示一条错误消息，告诉您在提交之前需要执行“svn update”。当您执行“svn update”时，其他人的更改将集成到您的本地文件中而不会丢失任何数据，并且一旦您验证一切仍然有效，您就可以继续进行自己的提交。

这不是太冒险。最坏的情况是，如果其他人在您所做的相同文件中修改了许多相同的行；在这种情况下，“svn update”将导致冲突，您必须进入冲突文件，手动编辑它们以选择要保留和删除的行（文件将包含您的版本和其他人的这些行的版本，它们将在文件中清楚地标记，所以这并不像听起来那么糟糕），然后对冲突的文件执行“svn resolved”，让 SVN 知道你已经处理了冲突。之后，您可以像往常一样编译、测试和提交您的代码。

# prolog - prolog中csymf和csym的区别

> ID：14131242
> 
> 赞同：3
> 
> 时间：2013-01-03T00:09:44.777
> 
> 标签：prolog, swi-prolog

当我使用时，我很困惑 prolog 中的 csymf 和 csym 有什么区别

```
?-code_type(X,csym).

X = 48 ;
X = 49 ;
....

?-code_type(X,csymf).

X = 65;
X = 66;
.... 
```

请有人告诉我X应该是什么，我在这部分阅读了SWI-prolog的手册，并提到

```
csym :Char is a letter (upper- or lowercase), digit or the underscore (_). These are valid C and Prolog symbol characters.

csymf :Char is a letter (upper- or lowercase) or the underscore (_). These are valid first characters for C and Prolog symbols. 
```

那你能给我提供一些例子吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:49:36.210

您已经找到了相关描述，说明 code_type(Code, Type) 在 a`character code`和 his之间存在关系`classification`。

我认为该手册有点误导，因为 Prolog 符号不同于 C（或 Java，可以说）符号。后者可以用正则表达式来描述，就像`[_a-zA-Z][_a-zA-Z0-9]*`你引用的可读描述一样。

然后`c9`是一个有效的 C 符号，而`9c`不是（一个数字不能开始一个符号）。

要检查字符的所有“属性”（我假设您知道字符代码 - 整数 - 和编码字符 - 本地化之间的差异），您可以使用

```
?- char_type(v,T).
T = alnum ;
T = alpha ;
T = csym ;
T = csymf ;
T = ascii ;
T = graph ;
T = lower ;
T = lower('V') ;
T = to_lower('V') ;
T = to_upper(v) ;
false. 
```

然后`v`可以启动一个`C symbol`.

```
?- char_type('7',T).
T = alnum ;
T = csym ;
T = ascii ;
T = digit ;
T = graph ;
T = to_lower('7') ;
T = to_upper('7') ;
T = digit(7) ;
T = xdigit(7). 
```

我们错过`csymf`了这里，然后`7`无法启动`C symbol`.

要获取可以开始 a 的所有字符`C symbol`，您可以使用

```
?- forall(char_type(X,csymf),write(X)).
ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyzªµºÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõöøùúûüýþÿ
true. 
```

我认为您的结果可能与我的不同，具体取决于您的语言环境。

# sql - 如何更改连接到我的服务器的会话 ID 的优先级？

> ID：14131245
> 
> 赞同：2
> 
> 时间：2013-01-03T00:09:54.930
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我在 Windows 7 64 位机器上运行 sql server 2008。

我正在与另一个会话 ID 同时运行查询，并且我想降低另一个会话 ID 的优先级，因为我的进程更关键。

另一个进程是正在运行的 SSIS 包。

作业运行时是否可以更改进程的优先级？

是否可以更改特定 USER ID 的优先级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:15:08.360

如果您使用的是具有 Enterprise Edition 引擎（Enterprise Edition、Enterprise Evaluation Edition 或 Developer Edition）的 SQL Server 版本，则可以使用[资源调控](http://msdn.microsoft.com/en-us/library/ee151608%28v=SQL.100%29.aspx)器根据用户定义的函数来管理资源，该函数可以包括服务器登录. 请查看链接以了解这是否是合适的解决方案。

但是，无法更改正在运行的进程的优先级——必须在连接进入之前配置资源调控器。

# android - android：带有复选框的ListView：行不应该被聚焦

> ID：14131247
> 
> 赞同：0
> 
> 时间：2013-01-03T00:10:12.837
> 
> 标签：android, layout

我有一个 ListView，其中的行包含一个 CheckBox、一些图像、TextViews 等等。如果我选择一行，只有复选框应该激活。该行没有焦点，CheckBox 没有突出显示。目前，当我选择一行时，背景变为蓝色（全息光色）。那是我不想要的。我不想要颜色，只想要激活/停用的复选框。

我怎样才能做到这一点？

我的布局如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="3dip"
        android:paddingLeft="5dip"
        android:paddingTop="2dip"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayoutMain"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <CheckBox
            android:id="@+id/checkBox1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:clickable="false"
            android:focusable="false"
            android:focusableInTouchMode="false" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <TextView
                    android:layout_width="0dip"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:ellipsize="marquee"
                    android:fadingEdge="vertical"
                    android:paddingBottom="3dip"
                    android:paddingLeft="5dip"
                    android:paddingTop="2dip"
                    android:singleLine="true"
                    android:text="@string/test"
                    android:textAppearance="?android:attr/textAppearanceMedium"
                    android:textStyle="bold" />

                <my.custom.ProgressChart
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/progress"
                    android:layout_width="181px"
                    android:layout_height="31px"
                    android:layout_marginLeft="1sp"
                    android:layout_marginRight="3sp"
                    android:layout_marginTop="5sp"
                    android:clickable="false"
                    android:focusable="false"
                    android:focusableInTouchMode="false" />
            </LinearLayout>

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:paddingBottom="3dip"
                android:paddingLeft="5dip"
                android:text="@string/test"
                android:textAppearance="?android:attr/textAppearanceSmall" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:06:47.150

要禁用选择器，`android:listSelector`请在`ListView`.

```
<ListView 
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:listSelector="@android:color/transparent" /> 
```

选中/取消`CheckBox`选中`OnItemClickListener`.

```
getListView().setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        CheckBox checkBox = (CheckBox) view.findViewById(R.id.checkBox1);
        checkBox.setChecked(!checkBox.isChecked());
    }

}); 
```

# css - 弹出菜单： 1\. 居中子菜单而不是直接出现在上方？2\. CSS3 渐变只出现在第一行

> ID：14131248
> 
> 赞同：1
> 
> 时间：2013-01-03T00:10:16.857
> 
> 标签：css, drop-down-menu, fade

[http://jsfiddle.net/pixeltramp/ge5zC/](http://jsfiddle.net/pixeltramp/ge5zC/)

基本上，我正在制作一个下拉菜单，放在每一页的底部。第一个问题：悬停时，菜单的子菜单直接在上方弹出，我希望 UL 居中。不管我怎么尝试，它似乎要么断裂，要么保持在正上方的位置。

同样，我在菜单上有一个陈旧的小 css3 淡入效果，但它只在第一个 ul 出现时起作用，而不是每一个。

任何帮助将非常感激！整个事情都在上面链接的jsfiddle上。

```
 #block-menu-menu-bottom ul.menu li a {
padding: 0px 20px
}

#block-menu-menu-bottom ul.menu a:hover {

border-bottom: 0px solid #fff;
background:#333333;
}

#block-menu-menu-bottom li {
background-color: none;
-moz-border-bottom-colors: none;
-moz-border-left-colors: none;
-moz-border-right-colors: none;
-moz-border-top-colors: none;
border-color: none;
border-image: none;
border-right: none;
border-style: none;
border-width: none;
float: center;
display: inline-table;
padding: 0px 0px 0px 0px;
font: bold 16pt 'Helvetica';
}

ul.menu-bottom a {
padding: 0em 5px;
}

#block-menu-menu-bottom .content {
margin-bottom: 0;
}

#block-menu-menu-bottom {
display: table;
float: none;
margin: 0 auto;
}

/*#block-menu-menu-bottom div > ul > li + li {
margin-left: 40px;
}*/

#block-menu-menu-bottom a:hover {
 color:#ffffcc;   
}

            #block-menu-menu-bottom li {
                float: left;
                position: relative;
                width:100px;

            }

                    #block-menu-menu-bottom li ul {
                        position: absolute;
                        display:none;
                        width:800%;
                        -webkit-opacity: 0
                        -moz-opacity: 0;
                        opacity: 0;
                        -webkit-transition: all .5s ease;
                        -moz-transition: all .5s ease;
                        -ms-transition: all .5s ease;
                        -o-transition: all .5s ease;
                        transition: all .5s ease;
                    }
                  #block-menu-menu-bottom li:hover ul {
                        bottom:100%;
                        display:block;
                        -webkit-opacity: 1;
                        -moz-opacity: 1;
                        opacity: 1;
                    }

                    #block-menu-menu-bottom li:hover ul li ul{
                        display:none;
                    }

                            #block-menu-menu-bottom li ul li a {
                                padding: 8px 000px;
                                line-height: 28px;
                            width: 5em;
                            }

                    #block-menu-menu-bottom ul li ul li ul{
                        display:none;

}

                    #block-menu-menu-bottom ul li ul li:hover ul {
                        display:block;
                        -webkit-opacity: 1;
                        -moz-opacity: 1;
                        opacity: 1;
}

                    #block-menu-menu-bottom ul li ul li ul li ul{
                        display:none;

}

                    #block-menu-menu-bottom ul li ul li ul li:hover ul {
                        display:block;

}

                    #block-menu-menu-bottom li ul li:hover ul li ul{
                        display:none;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T13:14:11.617

### 删除 ID 并给他们 CLASS

ID 用于第一次工作。但是Class是为所有人服务的。

# android - 销毁以前的 ViewPager 项目以防止向后滚动

> ID：14131251
> 
> 赞同：3
> 
> 时间：2013-01-03T00:10:20.530
> 
> 标签：android, android-viewpager

我在下面添加了我的代码，包括我尝试过的一些东西。我想要的是一个滑动查看器，它不允许您通过以前的项目，而只能向前。如果在当前片段中选中某个复选框，允许前进到下一个片段，我最好也只允许向前（从右到左）滚动。

我考虑过

*   一旦显示当前片段并处于空闲状态，就删除前一个片段
*   `mPager.setAdapter(mPagerAdapter);`一旦我重置了计数并删除了第一个片段以导致“刷新”，再次设置适配器（即：）
*   在 ViewPager 上使用 onTouchListener 并使用 motionevent

下面使用的代码`mPager.removeViewAt(0)`不起作用，因为它不会阻止滚动，只是从字面上删除视图，留下一个空白屏幕。

最好的方法是什么？也许我什至没有使用正确的适配器，因为我从昨天开始使用片段。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewpager);
    mPager = (ViewPager) findViewById(R.id.pager);
    mPagerAdapter = new ScreenSlidePagerAdapter(getSupportFragmentManager());
    mPager.setAdapter(mPagerAdapter);
    mPager.setOnPageChangeListener(mPageListener());
}

public OnPageChangeListener mPageListener() {
    OnPageChangeListener listener = new OnPageChangeListener() {

        public void onPageSelected(int arg0) {}

        public void onPageScrolled(int arg0, float arg1, int arg2) {}

        public void onPageScrollStateChanged(int arg0) {
            if (arg0 == ViewPager.SCROLL_STATE_IDLE && mPager.getCurrentItem() != 0) {
                mPager.removeViewAt(0);
                mPagerAdapter.notifyDataSetChanged();
                //mPagerAdapter.destroyItem(mPager, arg0, mPagerAdapter.getItem(arg0));
            }
        }
    };
    return listener;
}

private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {

    public ScreenSlidePagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        Bundle args = new Bundle();
        args.putInt("position", position);
        Fragment fragment = new PracticeModeFragment();
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 5;
    }
}

public class PracticeModeFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        ViewGroup rootView = (ViewGroup) inflater.inflate(R.layout.row,
                container, false);
        ((TextView) rootView.findViewById(R.id.count)).setText(""
                + getArguments().getInt("position"));
        return rootView;

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:20:56.427

我认为您使用了错误的工具。ViewPager 不应该以这种方式使用。

只需使用[FragmentManager](http://developer.android.com/reference/android/app/FragmentManager.html)和[FragmentTransactions](http://developer.android.com/reference/android/app/FragmentTransaction.html)替换片段。通过这样做，您将完全控制后台堆栈和事务。

您也可以手动为片段添加手势以模拟 ViewPager 效果。[这是一个教程。](http://www.vogella.com/articles/AndroidGestures/article.html)

# php - 设置非典型排序顺序

> ID：14131252
> 
> 赞同：2
> 
> 时间：2013-01-03T00:10:22.363
> 
> 标签：php, sql

我正在使用一个数据库，最终用户可以在其中上传他们的收藏品和其他效果的照片，根据他们可以添加条目的标准之一是产品的状况（接近薄荷、薄荷、优秀等）。如果我想按条件对这些条目进行排序，它将按字母顺序排序，但这与实际的按条件排序不对应。例如，E（优秀）将出现在 M（薄荷）之前，而优秀则比薄荷差。

如何在我的数据库中为这些字母分配值，以便在排序时它们将按非字母顺序显示，而是按实际等级（M > NM > E > G > P）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T00:14:09.297

在 order by 子句中添加 case 语句。这是一些伪sql：

```
SELECT * FROM COLLECTIBLES
ORDER BY CASE condition
  WHEN 'EXCELLENT' THEN 1
  WHEN 'MINT' THEN 2
  WHEN 'NEAR MINT' THEN 3
  ELSE 4
END 
```

工作示例：[http ://sqlfiddle.com/#!2/328c2/1](http://sqlfiddle.com/#!2/328c2/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T00:13:39.620

为什么不简单地在数据库中使用 ie 数字？我的意思是你可以用 1 表示接近薄荷，2 表示薄荷，3 表示优秀等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T00:18:12.117

您可能会考虑另一个管理产品状况的表：

```
CREATE TABLE product_condition
(
product_condition_id INT,
grade char(2),
grade_sequence int
)

INSERT INTO product_condition VALUES (1, 'NM', 1)
INSERT INTO product_condition VALUES (2, 'M', 2)
INSERT INTO product_condition VALUES (3, 'E', 3)
INSERT INTO product_condition VALUES (4, 'G', 4)
INSERT INTO product_condition VALUES (5, 'P', 5) 
```

将产品表中的实际等级列替换为 product_condition_id。

```
SELECT *
FROM product p
JOIN product_condition pc on p.product_condition_id = p.product_condition_id
ORDER BY grade_sequence 
```

我怀疑等级值相当稳定，但使用表格可以更轻松地进行更改。

# sql - 集体最大值

> ID：14131253
> 
> 赞同：2
> 
> 时间：2013-01-03T00:10:26.630
> 
> 标签：sql

我有一个这样的表结构：

```
employee
    id int
    manager_id int (the employee id of the manager)
    name
    ...

awards
    id int
    employee_id int
    points int (the award "value") 
```

我如何找到其员工（直接向经理汇报的人员）集体奖励积分最多的经理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:26:38.613

像这样：

```
SELECT
    mgr.id,
    mgr.name,
    SUM(awd.points) As TotalStaffPoints
FROM    employee As mgr
JOIN    employee As stf ON mgr.id = stf.manager_id
JOIN    awards   As awd ON stf.id = awd.employee_id
GROUP BY mgr.id, mgr.name
ORDER BY TotalStaffPoints DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T00:42:52.540

```
select top 1 employee.manager_id, SUM(awards.points) as total
from employee
join awards on employee.id = awards.employee_id
group by employee.manager_id
order by SUM(awards.points) desc 
```

# ios - ARC 导致内存泄漏

> ID：14131256
> 
> 赞同：0
> 
> 时间：2013-01-03T00:10:50.987
> 
> 标签：ios, automatic-ref-counting

我在这里看到了[这个线程](https://stackoverflow.com/questions/9770213/arc-memory-leaks)，我怀疑我的问题是后台线程上发生了一些事情，而 ARC 没有按应有的方式处理它。我正在使用 Parse sdk，它使用 [myObject saveInBackground] 或 [myObject saveEventually] 等调用在后台保存和查找数据库中的对象。我无权访问源来编辑这些方法以包含@autoreleasepool。我假设如果我尝试做这样的事情：

```
@autoreleasepool{
  [myObject saveInBackground];
  [myObject2 saveEventually];
} 
```

它仍然会在主线程而不是后台线程上执行自动释放池。

每隔一段时间，我的应用程序就会崩溃，并且没有真正的模式，这就是为什么我认为这是一个内存问题，但我正在使用 ARC 并且不知道为什么我会偶尔崩溃。

编辑 * 这里是崩溃日志。这是我第一次看这些。对我放轻松。

```
Exception Type:  00000020
Exception Codes: 0x000000008badf00d
Highlighted Thread:  0

Application Specific Information:
com.graphiteGames.Capture-This failed to launch in time

Elapsed total CPU time (seconds): 6.470 (user 6.470, system 0.000), 32% CPU 
Elapsed application CPU time (seconds): 0.745, 4% CPU

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_kernel.dylib          0x33fc40fc __psynch_mutexwait + 24
1   libsystem_c.dylib               0x35438124 pthread_mutex_lock + 388
2   Capture This                    0x000dcb62 -[PFObject objectId] (PFObject.m:1174)
3   Capture This                    0x000c67a4 -[RootTableView refreshGameData] (RootTableView.m:78)
4   Capture This                    0x000c6362 -[RootTableView viewDidLoad] (RootTableView.m:33)
5   UIKit                           0x37f1d588 -[UIViewController loadViewIfRequired] + 360
6   UIKit                           0x37f7212e -[UIViewController contentScrollView] + 22
7   UIKit                           0x37f72074 -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 24
8   UIKit                           0x37f71f58 -[UINavigationController _layoutViewController:] + 28
9   UIKit                           0x37f71e7c -[UINavigationController _updateScrollViewFromViewController:toViewController:] + 268
10  UIKit                           0x37f715bc -[UINavigationController _startTransition:fromViewController:toViewController:] + 60
11  UIKit                           0x37f714a4 -[UINavigationController _startDeferredTransitionIfNeeded:] + 320
12  UIKit                           0x37f424dc -[UILayoutContainerView layoutSubviews] + 176
13  UIKit                           0x37f017fe -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 254
14  QuartzCore                      0x30db5d5e -[CALayer layoutSublayers] + 210
15  QuartzCore                      0x30db58fc CA::Layer::layout_if_needed(CA::Transaction*) + 456
16  QuartzCore                      0x30de47a2 -[CALayer layoutIfNeeded] + 138
17  UIKit                           0x37fab0c4 -[UIViewController window:setupWithInterfaceOrientation:] + 204
18  UIKit                           0x37faa2b0 -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:isRotating:] + 3616
19  UIKit                           0x37fa9482 -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:] + 42
20  UIKit                           0x37fa940c -[UIWindow _setRotatableViewOrientation:duration:force:] + 64
21  UIKit                           0x380df17c __57-[UIWindow _updateToInterfaceOrientation:duration:force:]_block_invoke_0 + 100
22  UIKit                           0x37f67676 -[UIWindow _updateToInterfaceOrientation:duration:force:] + 214
23  UIKit                           0x37f673b8 -[UIWindow setAutorotates:forceUpdateInterfaceOrientation:] + 688
24  UIKit                           0x37f66d26 -[UIViewController _tryBecomeRootViewControllerInWindow:] + 154
25  UIKit                           0x37f5de9e -[UIWindow addRootViewControllerViewIfPossible] + 366
26  UIKit                           0x37f59ae0 -[UIWindow _setHidden:forced:] + 360
27  UIKit                           0x37f9b1c4 -[UIWindow makeKeyAndVisible] + 56
28  UIKit                           0x37f5e832 -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1662
29  UIKit                           0x37f5683e -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 694
30  UIKit                           0x37efec34 -[UIApplication handleEvent:withNewEvent:] + 1000
31  UIKit                           0x37efe6c8 -[UIApplication sendEvent:] + 68
32  UIKit                           0x37efe116 _UIApplicationHandleEvent + 6150
33  GraphicsServices                0x34b1e5a0 _PurpleEventCallback + 588
34  GraphicsServices                0x34b1e1ce PurpleEventCallback + 30
35  CoreFoundation                  0x35e34170 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
36  CoreFoundation                  0x35e34112 __CFRunLoopDoSource1 + 134
37  CoreFoundation                  0x35e32f94 __CFRunLoopRun + 1380
38  CoreFoundation                  0x35da5eb8 CFRunLoopRunSpecific + 352
39  CoreFoundation                  0x35da5d44 CFRunLoopRunInMode + 100
40  UIKit                           0x37f55478 -[UIApplication _run] + 664
41  UIKit                           0x37f522f4 UIApplicationMain + 1116
42  Capture This                    0x000bde2e main (main.m:16)
43  Capture This                    0x000bdde4 0xbb000 + 11748

Thread 1 name:  Dispatch queue: com.apple.root.default-priority
Thread 1:
0   libsystem_kernel.dylib          0x33fc408c __psynch_cvwait + 24
1   libsystem_c.dylib               0x35440d2a _pthread_cond_wait + 642
2   libsystem_c.dylib               0x3544af14 pthread_cond_wait + 36
3   Foundation                      0x3592aa4c -[__NSOperationInternal waitUntilFinished] + 144
4   Capture This                    0x00121fe0 -[PFNetworkCommandRunner runInOperation:callback:] (PFNetworkCommandRunner.m:84)
5   Capture This                    0x001227ee -[PFRetryingCommandRunner runInOperation:callback:] (PFRetryingCommandRunner.m:52)
6   Capture This                    0x0012358a -[PFOperation runInThisThread:] (PFOperation.m:32)
7   Capture This                    0x000db486 -[PFObject(Private) fetchWithLocking:error:] (PFObject.m:942)
8   Capture This                    0x000ebd1e -[PFUser fetchWithLocking:error:] (PFUser.m:1001)
9   Capture This                    0x000dedf4 __39-[PFObject fetchInBackgroundWithBlock:]_block_invoke_0 (PFObject.m:1500)
10  Capture This                    0x00111686 __25-[PFBackgroundTask start]_block_invoke_0 (PFBackgroundTask.m:59)
11  libdispatch.dylib               0x34a6e11c _dispatch_call_block_and_release + 8
12  libdispatch.dylib               0x34a7c254 _dispatch_root_queue_drain + 256
13  libdispatch.dylib               0x34a7c3b4 _dispatch_worker_thread2 + 80
14  libsystem_c.dylib               0x3543da0e _pthread_wqthread + 358
15  libsystem_c.dylib               0x3543d8a0 start_wqthread + 4

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x33fb4648 kevent64 + 24
1   libdispatch.dylib               0x34a7d4ec _dispatch_mgr_invoke + 792
2   libdispatch.dylib               0x34a6fdf4 _dispatch_mgr_thread$VARIANT$up + 32

Thread 3 name:  Dispatch queue: com.apple.root.default-priority
Thread 3:
0   libsystem_kernel.dylib          0x33fb3f04 semaphore_wait_trap + 8
1   libdispatch.dylib               0x34a7c82a _dispatch_semaphore_wait_slow + 178
2   libxpc.dylib                    0x34eab5d2 xpc_connection_send_message_with_reply_sync + 150
3   SystemConfiguration             0x390895fe _reach_server_target_status + 334
4   SystemConfiguration             0x3908a2ca __SCNetworkReachabilityServer_targetStatus + 38
5   SystemConfiguration             0x3906a626 __SCNetworkReachabilityGetFlags + 318
6   SystemConfiguration             0x3906afec SCNetworkReachabilityGetFlags + 212
7   Capture This                    0x001049c0 -[PFCommandCache init] (PFCommandCache.m:87)
8   Capture This                    0x00104638 +[PFCommandCache defaultInstance] (PFCommandCache.m:34)
9   Capture This                    0x000f3f24 __36+[Parse setApplicationId:clientKey:]_block_invoke_0 (Parse.m:40)
10  libdispatch.dylib               0x34a6e11c _dispatch_call_block_and_release + 8
11  libdispatch.dylib               0x34a7c254 _dispatch_root_queue_drain + 256
12  libdispatch.dylib               0x34a7c3b4 _dispatch_worker_thread2 + 80
13  libsystem_c.dylib               0x3543da0e _pthread_wqthread + 358
14  libsystem_c.dylib               0x3543d8a0 start_wqthread + 4

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x33fb3eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x33fb4048 mach_msg + 36
2   CoreFoundation                  0x35e34040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x35e32d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x35da5eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x35da5d44 CFRunLoopRunInMode + 100
6   WebCore                         0x31a8aa40 _ZL12RunWebThreadPv + 440
7   libsystem_c.dylib               0x3544830e _pthread_start + 306
8   libsystem_c.dylib               0x354481d4 thread_start + 4

Thread 5:
0   libsystem_kernel.dylib          0x33fb3eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x33fb4048 mach_msg + 36
2   CoreFoundation                  0x35e34040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x35e32d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x35da5eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x35da5d44 CFRunLoopRunInMode + 100
6   Foundation                      0x358df78a -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
7   Foundation                      0x35983058 -[NSRunLoop(NSRunLoop) run] + 76
8   Capture This                    0x0011556a +[PFNetworkingUtils networkThreadMain] (PFNetworkingUtils.m:32)
9   Foundation                      0x3598c678 __NSThread__main__ + 968
10  libsystem_c.dylib               0x3544830e _pthread_start + 306
11  libsystem_c.dylib               0x354481d4 thread_start + 4

Thread 6:
0   libsystem_kernel.dylib          0x33fb3eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x33fb4048 mach_msg + 36
2   CoreFoundation                  0x35e34040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x35e32d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x35da5eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x35da5d44 CFRunLoopRunInMode + 100
6   Foundation                      0x358df78a -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 250
7   Foundation                      0x35983058 -[NSRunLoop(NSRunLoop) run] + 76
8   Capture This                    0x00128ec0 +[PF_AFURLConnectionOperation networkRequestThreadEntryPoint:] (PF_AFURLConnectionOperation.m:151)
9   Foundation                      0x3598c678 __NSThread__main__ + 968
10  libsystem_c.dylib               0x3544830e _pthread_start + 306
11  libsystem_c.dylib               0x354481d4 thread_start + 4

Thread 7 name:  com.apple.NSURLConnectionLoader
Thread 7:
0   libsystem_kernel.dylib          0x33fb3eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x33fb4048 mach_msg + 36
2   CoreFoundation                  0x35e34040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x35e32d9e __CFRunLoopRun + 878
4   CoreFoundation                  0x35da5eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x35da5d44 CFRunLoopRunInMode + 100
6   Foundation                      0x35908bc8 +[NSURLConnection(Loader) _resourceLoadLoop:] + 304
7   Foundation                      0x3598c678 __NSThread__main__ + 968
8   libsystem_c.dylib               0x3544830e _pthread_start + 306
9   libsystem_c.dylib               0x354481d4 thread_start + 4

Thread 8:
0   libsystem_kernel.dylib          0x33fc4d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3543dcf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3543da12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3543d8a0 start_wqthread + 4

Unknown thread crashed with unknown flavor: 5, state_count: 1 
```

# objective-c - Mountain Lion 菜单栏 CGBlendMode

> ID：14131258
> 
> 赞同：0
> 
> 时间：2013-01-03T00:11:07.470
> 
> 标签：objective-c, macos, core-graphics, quartz-graphics, cgcontext

`CGBlendMode`Mountain Lion 上的菜单栏是什么？我的第一个猜测是`kCGBlendModeOverlay`，但这似乎有点太透明了。

有任何想法吗？我正在尝试使具有渐变的 NSView 与菜单栏的外观相匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:55:52.193

默认非自定义菜单栏中的 CGBlendMode 为 kCGBlendModeNormal。

技巧在 CGColorSetFillColorWithColor 中。当您尝试设置任何填充活动（如任何颜色、渐变或图案）时，CGColorSetFillColorWithColor 是下面的基本函数调用。

在 Mountain Lion 中，我认为它只是简单的灰色和低 alpha。

# android - 不能在 getLoaderManager().initLoader() 方法中使用“this”作为参数

> ID：14131261
> 
> 赞同：0
> 
> 时间：2013-01-03T00:11:19.357
> 
> 标签：android, search, android-loadermanager

许多人建议使用 LoaderManager 和 CursorLoader，而不是使用一些已弃用的 SimpleCursorAdapter 构造函数。所以当调用 getLoaderManager().initLoader() 它给了我这个错误：

LoaderManager 类型中的方法 initLoader(int, Bundle, LoaderManager.LoaderCallbacks) 不适用于参数 (int, null, SearchResultsActivity)

我曾尝试导入 loadermanager 和 cursorloader 的 v4 版本，但这似乎不起作用。我也尝试过 getSupportLoaderManager()，它也不起作用。我注意到有些人遇到了这个错误，并查看了对话以尝试找到解决方案，但我发现的那些不起作用。我在 showResults() 方法中调用 LoaderManager 顺便说一句

可搜索活动的代码：

```
import android.os.Bundle;
import android.app.LoaderManager;
import android.app.LoaderManager.LoaderCallbacks;
import android.app.SearchManager;
import android.app.ListActivity;
import android.support.v4.app.FragmentActivity;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.SimpleCursorAdapter;
import android.content.Context;
import android.content.Intent;
import android.content.Loader;
import android.database.Cursor;
public class SearchResultsActivity extends FragmentActivity {

private ListView list;
DatabaseTable db;
LoaderManager lm;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_search_results);
    db = new DatabaseTable(this);
    handleIntent(getIntent());
}

public void onNewIntent(Intent intent) {
    setIntent(intent);
    handleIntent(intent);
}

private void handleIntent(Intent intent) {
     if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
        String query = intent.getStringExtra(SearchManager.QUERY);
        showResults(query);
    }

}

private void showResults(String query) {
    db = new DatabaseTable(this);
    Cursor cursor = db.getContactMatches(query, null);
    list = (ListView)findViewById(android.R.id.list);
    getSupportLoaderManager().initLoader(0, null, this);
    SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, 
            null, new String[] {DatabaseTable.COL_NAME}, new int[] {android.R.id.text1}, 0);
    list.setAdapter(mAdapter);
    list.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            Intent contactIntent = new Intent(getApplicationContext(), ContactActivity.class);
            contactIntent.setData(getIntent().getData());
            startActivity(contactIntent);
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.options_menu, menu);

 // Associate searchable configuration with the SearchView
    SearchManager searchManager =
           (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView =
            (SearchView) menu.findItem(R.id.search).getActionView();
    searchView.setSearchableInfo(
            searchManager.getSearchableInfo(getComponentName()));
    return true;

}

 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.search:
                onSearchRequested();
                return true;
            default:
                return false;
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:31:07.147

> LoaderManager 类型中的方法`initLoader(int, Bundle, LoaderManager.LoaderCallbacks)`不适用于参数`(int, null, SearchResultsActivity)`

简单地说：`SearchResultsActivity` *必须*实现`LoaderManager.LoaderCallbacks`. 否则`this`不引用`LoaderManager.LoaderCallbacks`...的实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-27T14:31:10.280

首先，您必须使用 LoaderManager.LoaderCallbacks 实现您的类，然后您可以在 initLoader 方法中使用“this”关键字（请记住，支持库已被弃用，您可以使用`LoaderManager.getInstance(this)`而不是`getLoaderManager()`

# ruby-on-rails - 如何使用“redirect_to”删除请求的子域？

> ID：14131274
> 
> 赞同：0
> 
> 时间：2013-01-03T00:13:11.270
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

如果我访问**http://walmart.example-site.com**
它会将我重定向到**http://walmart.example-site.com/communities/walmart**

但我希望它重定向到**http://example-site.com/communities/walmart**

我该如何解决？

我的代码是。

**路线.rb**

```
constraints(:subdomain => /.+/) do 
    root :to => 'communities#subdomain_redirect' 
end 
```

**社区控制器.rb**

```
def subdomain_redirect
    @community = Community.find_by_community_name(request.subdomain)
    redirect_to @community
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:30:58.860

```
match "/stories/:name" => redirect {|params| "/posts/#{params[:name].pluralize}" }
match "/stories" => redirect {|p, req| "/posts/#{req.subdomain}" } 
```

这是你需要的东西吗？尝试参考 3.12 重定向下的官方路由指南。

# c# - 将二维数组传递给函数时，Mono Develop 调试器崩溃

> ID：14131276
> 
> 赞同：2
> 
> 时间：2013-01-03T00:13:26.657
> 
> 标签：c#, multidimensional-array, mono, monodevelop

我在调试单声道应用程序时遇到问题，使用单声道开发。当我尝试在将二维数组作为参数的函数中调试代码时，调试器崩溃。例如，然后调试器进入测试函数：

```
float[,] b = new float[4,4];
Test(b);

static void Test(float[,] x)
{
    float[,] y = x;
} 
```

我收到断言错误：

> 回调中的异常：System.Reflection.TargetInvocationException：调用目标已引发异常。---> System.IndexOutOfRangeException：索引超出了数组的范围。

我的代码有什么问题吗，还是 mono/monodevelop 有什么问题？

编辑：是的，这段代码只是一个例子；我试图缩小问题的范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:34:40.540

这是 MonoDevelop 中 Win32 CorDebugger 插件中的一个错误。

作为一种解决方法，您可以在 Windows 上安装 Mono 并以 Mono 框架/调试器而不是 Microsoft 运行时/调试器为目标，这样就可以了。

（Mono 调试器插件维护得更好）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:24:14.583

这段代码没有问题，它可以用 Mono 调试器编译和运行。
（我在 OS X 上使用 MonoDevelop 3.1.1。）

这是我编译的 C# 程序：

```
using System;

class MainClass
{
    public static void Main (string[] args)
    {
        float[,] b = new float[4,4];
        Test(b);
        Console.WriteLine ("Hello World!");
    }

    static void Test(float[,] x)
    {
        float[,] y = x;
    }
} 
```

另外，`TargetInvocationException`表示错误[是通过反射调用的方法](http://msdn.microsoft.com/en-us/library/system.reflection.targetinvocationexception.aspx)发生的——也许这就是你错过实际问题的原因？堆栈跟踪应该提示您在哪里查找实际异常。它甚至可能在不同的线程中。

# javascript - 外部 javascript 不工作，但在头部工作

> ID：14131287
> 
> 赞同：0
> 
> 时间：2013-01-03T00:14:57.157
> 
> 标签：javascript, html, external

我是新手，但我无法让我的外部 js 工作（但它在 HTML 文档的头部工作），我已经查看了这里的所有解决方案。

这是我的 HTML，js src 是 script2.js

```
<!DOCTYPE html >
<html>
<head>

<link href="css/stylesheetelaine.css" rel="stylesheet" type="text/css"/> 

<script type="text/javascript" src="js/script2.js"> </script>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js"></script>

<script src="js/jQuery/jquery.monte.js"></script>     

<meta charset="utf-8">
<title>Gallery</title>

</head>

<body>
<div id="wrapper">

<div id="title">

<h1><a href="index.html"><img src="img/elaine4.png"  width="517" height="185"    alt="elaine cullinan"></a><img src="img/elainefilligree.png" width="235" height="251" alt="elaine"></h1>

<div id="nav">
<ul id>

<li><a href="about.html" title="About">About</a></li>
<li><a href="tattoo.html" title="Tattoo">Tattoo</a></li>
<li><a href="makeup.html" title="Make Up">Make Up</a></li>
<li><a href="gallery.html" title="Gallery">Gallery</a></li>
<li><a href="contact.html" title="Contact">Contact</a></li>

</ul>
</div>

<div id="gallerywrap">

    <div id='example1' class='container'>
        <img src="img/slide/img1.png" alt='An eastern mud turtle hatching.'/>
        <img src="img/slide/img1.png" alt='Just hatched.'/>
        <img src="img/slide/img1.png" alt='After three months.'/>
        <img src="img/slide/img1.png" alt='Taking an occassional bask.'/>
        <img src="img/slide/img1.png" alt='Ornery but healthy at two and a half years.'/>
    </div>

</div>
</body>

</html> 
```

**我的外部js：**

```
 $(function () {
            // Unstyled Example
            $.monte('#example1');

            // Styled Buttons Example
            // (see the CSS in the above style block)
            $.monte('#example2', {auto:false});

            // Callback Example
            // Format and append the HTML:
            $('#example3 > img').each(function(){
                $(this)
                .wrap('<div style="position:relative"/>')
                .parent()
                .append('<div><p>' + $(this).attr('alt') + '</p></div>')
                .append('<img src="frame.png" alt="" class="frame"/>');
            });
            // Hide the text on all but the center slide:
            $('#example3 div div').css({opacity: 0}).eq(0).css({opacity: 0.8});
            // Using the callbacks to reveal and hide the text:
            $.monte('#example3', {
                auto:false,
                callbackIn: function () {
                    $(this[0]).find('div').animate({opacity: 0.8}, 450);
                }, 
                callbackAway: function () {
                    $(this[0]).find('div').animate({opacity: 0}, 450);
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:16:43.943

移动这一行：

```
<script type="text/javascript" src="js/script2.js"> </script> 
```

在您包含和*之后*。`jquery.min.js``jquery.monte.js`

脚本是按顺序执行的，所以你需要这个：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js"></script>
<script src="js/jQuery/jquery.monte.js"></script>
<script type="text/javascript" src="js/script2.js"></script> 
```

这样浏览器首先加载 jQuery，然后加载 Monte 插件，然后执行您的脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T00:16:43.273

您在加载jQuery*之前加载。*您需要在之后加载它。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.3/jquery.min.js"></script>
<script type="text/javascript" src="js/script2.js"> </script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-09T05:03:34.723

运行外部javascript。在标签后的底部声明它。它会起作用的。

```
</body><script src="js/validate.js"></script></html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-27T02:48:08.060

确保不要忘记以下几点：

1.  在同一目录中添加 js 文件和 html 文件。将这两个文件保存在同一目录中也可能会出错。

2.  文件的点扩展名（比如“external.js”）行应该看起来像 `<script type="text/javascript" src="external.js">`. 如果更改源地址，则会遇到错误。

# security - Most Efficient Language to Write a Password Generator In

> ID：14131295
> 
> 赞同：-4
> 
> 时间：2013-01-03T00:16:14.147
> 
> 标签：security, penetration-testing

If I wanted to write a program that generated all possible passwords using alphanumeric characters and wrote the output to a file, what language would would be best suited for writing something like that, for the purpose of penetration testing?

Edit: I already know C, C++, Java, javascript, python, ruby, HTML, CSS, and objective-c. I just have trouble identifying what language is better for solving which problems.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:47:19.957

Without sounding pedantic, here are a few things to consider :

What's this "efficiency" thing you're talking about? How do you measure it?

Are you sure it is connected to the language you write the program in?

Third, you realize that there are a very, very large range of possible passwords for most alphabets and lengths above, say, 6 or 7 chars? Are you sure this is the solution you need?

Fourth, aren't any solutions out there which already solve your problem?

* * *

More to the point: instead of choosing a language suited to the problem domain, consider choosing one which *you* are more experienced. But do check if your approach is the correct one.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:22:48.023

If you don't want to generate random passwords, but kind of a rainbow table without the need of hashes, you might just want to generate and 'increment' char sequences of certain lengths during the brute force test, like aaaa, aaab, aaac, ... You'd use the language, in which that test is written.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T00:26:50.977

This can be written any number of ways. If I recall correctly, Python had a relatively simple structure for loops and writing to a file. Although, so does C....

So pick a language you want to learn, and dive in.

# c# - Visual Studio 2012 数据库图？

> ID：14131304
> 
> 赞同：18
> 
> 时间：2013-01-03T00:16:51.887
> 
> 标签：c#, sql, visual-studio, visual-studio-2012

我在 C# 方面做得很少，并且正在关注 Head First C# 书。书中有一部分要求我为我的 SQL 数据库创建数据库图，但在数据库资源管理器中没有数据库图节点/文件夹。

我听说 Microsoft 放弃了数据库图功能，但是否有另一种方法可以创建一个我很容易理解的数据库图？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T01:28:49.203

我喜欢 Entity Framework 5 允许您导入数据库对象的方式，然后它会绘制表、索引、关系等图表。或者您可以用其他方式创建图表，然后将其发布到数据库。这很好用，我怀疑这就是 SQL Server 中删除数据库图的原因。EF5 现在可能在您的 Visual Studio 环境中。

![EF5](../Images/f770fe3de109e6db3b75041e222da98d.png)

要创建 EF5 图，请右键单击一个目录（通常该目录名为“Model”），然后选择“Add”/“New Item”，然后选择“ADO.NET Entity Data Model”。命名它，然后选择“从数据库生成”。剩下的就是选择或生成连接字符串，然后选择数据库对象。

最好的部分是，当您在学习中需要数据访问层时，这是我推荐的开始，我不能推荐足够高的 EF5。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T00:21:40.353

试试 SQL Server Management Studio。它有一个表格图表工具。这是快速版（SQL Server 2008 Express）：[http ://www.microsoft.com/en-us/download/details.aspx?id=7593](http://www.microsoft.com/en-us/download/details.aspx?id=7593)

您也可以在此处找到 2012 SP1 的版本：[http ://microsoft.com/en-us/download/details.aspx?id=35579](http://microsoft.com/en-us/download/details.aspx?id=35579)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-27T22:43:12.640

我刚刚解决了一个类似的问题 - 我的 VS2012 服务器资源管理器没有显示数据库图表

问题是我使用的数据库是 VS2012 安装的 SQLEXPRESS（并且基于 sql 2012）

我正在使用 SSMS 2008R

当我将有问题的数据库移动到 SQL 2008R2 服务器时 - 我的数据库图表出现了

这花了很多时间来解决，我希望这篇笔记可以帮助其他人避免这种挫败感

# c# - 控制在使用 SubscribedOn 后处理 Rx 订阅的线程

> ID：14131306
> 
> 赞同：2
> 
> 时间：2013-01-03T00:17:00.377
> 
> 标签：c#, system.reactive

我有一个 Rx 订阅，我`SubscribeOn`使用不同的线程来防止它阻塞。但是，由于资源管理问题，我希望阻止该订阅的处置。我无法弄清楚如何在控制台应用程序或 winforms 应用程序的上下文中完成此操作（我有两个用例）。下面是模拟我正在做的简化案例的工作代码：

```
internal class Program
{

    private static void Log(string msg)
    {
        Console.WriteLine("[{0}] " + msg, Thread.CurrentThread.ManagedThreadId.ToString());
    }

    private static void Main(string[] args)
    {

        var foo = Observable.Create<long>(obs =>
            {
                Log("Subscribing starting.. this will take a few seconds..");
                Thread.Sleep(TimeSpan.FromSeconds(2));
                var sub =
                    Observable.Interval(TimeSpan.FromSeconds(1))
                              .Do(_ => Log("I am polling..."))
                              .Subscribe(obs);
                return Disposable.Create(() =>
                    {
                        Thread.Sleep(TimeSpan.FromSeconds(3));
                        sub.Dispose();
                        Log("Disposing is really done now!");
                    });
            });

        Log("I am subscribing..");
        var disp = foo.SubscribeOn(NewThreadScheduler.Default).Subscribe(i => Log("Processing " + i.ToString()));
        Log("I have returned from subscribing...");

        // SC.Current is null in a ConsoleApp :/  Can I get a SC that uses my current thread?
        //var dispSynced = new ContextDisposable(SynchronizationContext.Current, disp);
        Thread.Sleep(TimeSpan.FromSeconds(5));
        Log("I'm going to dispose...");
        //dispSynced.Dispose();
        disp.Dispose();
        Log("Disposed has returned...");
        Console.ReadKey();
    }
} 
```

当上面运行时，我得到：

```
[10] I am subscribing..
[10] I have returned from subscribing...
[11] Subscribing starting.. this will take a few seconds..
[6] I am polling...
[6] Processing 0
[6] I am polling...
[6] Processing 1
[10] I'm going to dispose...
[10] Disposed has returned...
[13] I am polling...
[6] I am polling...
[13] I am polling...
[14] Disposing is really done now! 
```

所以，我要做的就是`[10] Disposed has returned...`打印最后一行，表明 Dispose 调用正在阻塞。

Rx 附带的`ContextDisposable`那个似乎非常适合我的用例，但我不知道如何获得`SynchronizationContext`代表我当前线程的。有没有一种方法可以`ContextDisposable`用来做我想做的事，还是我需要一种完全不同的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:59:10.293

如果您查看 SubscribeOn 的源代码，看起来 dispose 函数将在指定的调度程序上调度。尝试这样的事情：

```
private static IObservable<long> GetObservable(IScheduler scheduler)
{
  return Observable.Create<long>(obs =>
  {
    var disposables = new CompositeDisposable();

    disposables.Add(
      Disposable.Create(() =>
      {
        Thread.Sleep(TimeSpan.FromSeconds(3));
        Log("Disposing is really done now!");
      }));

    disposables.Add(
      scheduler.Schedule(() =>
      {
        Log("Subscribing starting.. this will take a few seconds..");
        Thread.Sleep(TimeSpan.FromSeconds(2));
        disposables.Add(
          Observable.Interval(TimeSpan.FromSeconds(1)).Do(_ => Log("I am polling...")).Subscribe(obs));
      }));

    return disposables;
  });

private static void Main(string[] args)
{
  var foo = GetObservable(NewThreadScheduler.Default);

  Log("I am subscribing..");
  var disp = foo.Subscribe(i => Log("Processing " + i.ToString()));
  Log("I have returned from subscribing...");

  // SC.Current is null in a ConsoleApp :/  Can I get a SC that uses my current thread?
  //var dispSynced = new ContextDisposable(SynchronizationContext.Current, disp);
  Thread.Sleep(TimeSpan.FromSeconds(5));
  Log("I'm going to dispose...");
  //dispSynced.Dispose();
  disp.Dispose();
  Log("Disposed has returned...");
  Console.ReadKey();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:25:58.170

（从头开始 - 还有另一种方法！）

这是一件有趣的事情——说实话，我以前从来没有需要过这个，但是有一个可观察的扩展`Observable.Synchronize`：

这使得阻塞变得非常简单，尽管我不是 100% 确定这将适用于您的用例......无论如何，这是使用这种方法的修改后的 main：

```
private static void Main(string[] args)
{
    var sync = new object();
    var foo = Observable.CreateWithDisposable<long>(obs =>
    {
        Log("Subscribing starting.. this will take a few seconds..");
        Thread.Sleep(TimeSpan.FromSeconds(2));
        var sub = Observable.Interval(TimeSpan.FromSeconds(1))
                        .Do(_ => Log("I am polling..."))
                        .Synchronize(sync)
                        .Subscribe(obs);
        return Disposable.Create(
            () =>
                {
                    lock (sync)
                    {
                        Thread.Sleep(TimeSpan.FromSeconds(3));
                        sub.Dispose();
                        Log("Disposing is really done now!");                                
                    }
                });
    });

    Log("I am subscribing..");
    var disp = foo
        .SubscribeOn(Scheduler.NewThread)
        .Subscribe(i => Log("Processing " + i));

    Log("I have returned from subscribing...");
    Thread.Sleep(TimeSpan.FromSeconds(5));
    Log("I'm going to dispose...");
    disp.Dispose();
    Log("Disposed has returned...");
    Console.ReadKey();
} 
```

# regex - 为什么使用正则表达式的 -match 时我的结果包含 true？

> ID：14131311
> 
> 赞同：0
> 
> 时间：2013-01-03T00:17:38.467
> 
> 标签：regex, string, powershell, find

我只是想写一个函数，它接受一个字符串并隔离一个子字符串并返回它。然后将该值复制到 csv 文件中。

我的功能如下所示：

```
Function FileName ($msg)
{
$msg -match ', (.*) owned'
$result=$matches[1]
return $result
} 
```

例如，我希望结果包含“New Text Document.txt - Notepad”，我调用：

```
FileName "Document 3, New Text Document.txt - Notepad owned by SYSTEM on \\COMPUTERNAME was printed on {736660DE-4F30-4949-A1B1-68701735DAA8} through port {736660DE-4F30-4949-A1B1-68701735DAA8}.  Size in bytes: 127183\. Pages printed: 1\. No user action is required." 
```

但是当我将它导出到 csv 文件时，它显示为“True New Text Document.txt - Notepad”。如何删除“真”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:21:09.883

`-match`是一个布尔运算符，根据是否找到匹配项返回 $true 或 $false。如果您没有捕获在变量中执行运算符或重定向它的结果，它将成为函数输出的一部分。通常你会像这样使用它：

```
function FileName ($msg)
{
    if ($msg -match ', (.*) owned')
    {
        $matches[1]
    }
    else { .. figure out what to do here .. }
} 
```

# robots.txt - 如何阻止 robots.txt 中除目录索引之外的所有 URL？

> ID：14131314
> 
> 赞同：0
> 
> 时间：2013-01-03T00:18:18.593
> 
> 标签：robots.txt

例如，我想阻止`/foo.php`,`/foo/foo.php`以及 中的所有其他类似 URL `robots.txt`，只留下`/`,`/foo/`等。

换句话说，我想阻止除目录之外的所有内容。

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:18:06.060

如果您要阻止的所有 URL 都以（或包含）结尾`.php`，您可以使用

```
User-agent: *
Disallow: /*.php 
```

但是，这使用了`*`通配符，可能并非*所有*解析器都支持（[谷歌支持它](https://developers.google.com/webmasters/control-crawl-index/docs/robots_txt)）。

# ios - IOS UIBarButton和App拒绝

> ID：14131316
> 
> 赞同：1
> 
> 时间：2013-01-03T00:18:35.067
> 
> 标签：ios

我有一个这样的 UIBarButton。我的应用程序会被拒绝吗？UIBarbutton 的像素要求是什么？40x40？我似乎无法在任何地方找到此信息。

```
UIButton *btnPost = [UIButton buttonWithType:UIButtonTypeCustom];
btnPost.frame=CGRectMake(0, 0, 60, 40);
[btnPost setBackgroundColor:[UIColor darkRedColor]];
[btnPost.titleLabel setFont:[UIFont fontWithName:@"HelveticaNeue-Bold" size:12]];
[btnPost setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
[btnPost makeGlossy];
[btnPost setTitle:@"Post" forState:UIControlStateNormal];

[btnPost addTarget:self action:@selector(Click_ON_Btn_Post) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *postBarItem = [[UIBarButtonItem alloc] initWithCustomView:btnPost];

self.navigationItem.rightBarButtonItem = postBarItem; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T00:28:18.193

通常，导航栏的高度为 44 像素。您的自定义按钮是 40 像素高。这不应该是一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:17:55.110

我已经在几个应用程序中完成了它，并且知道许多执行此操作的应用程序。您不应该仅仅为此而获得批准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T02:10:17.590

来自[iOS 人机界面指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UEBestPractices/UEBestPractices.html "iOS 人机界面指南")，

> 为您的应用程序中的可点击元素提供大约 44 x 44 点的目标区域。

请注意，Apple 使用术语“目标区域”而不是“按钮大小”。在 iPad 上，标准工具栏按钮的高度为 30pt，顶部和底部的边距为 7pt。但是，该按钮将响应边距中的触摸，从而为控件提供 44pt 的目标区域。

一般规则是你可以创建一个看起来小于 44pt 的按钮，只要你给用户一个至少 44pt x 44pt 的区域来触摸。

免责声明：可能还有其他因素需要考虑，Apple 始终拥有最终决定权。您可能能够逃脱 40pt 的高度，或者您可能不会。

# hangout - 我可以在环聊应用定义中使用 URL 内容类型吗？

> ID：14131319
> 
> 赞同：2
> 
> 时间：2013-01-03T00:18:44.733
> 
> 标签：hangout

在定义环聊应用程序的 xml 中，我想将 url 内容类型用于小工具：

例如`<Content type="url" href="http://www.google.com" />`

但是当我这样做时，应用程序无法加载。

我认为这是因为唯一支持的内容类型是 html。

这是真的吗？为什么会这样？

我想这样做的原因是我希望能够编辑带有语法突出显示的 html。将其嵌入到 xml 文档的 cdata 部分会使这变得困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:32:43.357

你是对的，环聊只支持 type="html"。

但是，您可以使用我们的[Hangout IFramer](https://hangoutiframer.appspot.com/static/help.html)示例代码从您的服务器到 iFrame。

# java - 权限被拒绝：在 Java 中创建文件

> ID：14131324
> 
> 赞同：10
> 
> 时间：2013-01-03T00:19:21.873
> 
> 标签：java, file, file-io

使用 Mac 在 Eclipse 中编译以下代码后：

```
 import java.io.*;

    public class Filer{
        public static void main(String[] args) throws IOException{

        File f1;

        f1 = new File("/System/file.txt");

        if(!f1.exists()){
            f1.createNewFile();

        }
      }
    } 
```

我收到一个错误：

```
 Exception in thread "main" java.io.IOException: Permission denied
        at java.io.UnixFileSystem.createFileExclusively(Native Method)
        at java.io.File.createNewFile(File.java:883)
        at Filer.main(Filer.java:11) 
```

谁能告诉我这是为什么？有什么办法可以更改权限吗？如果我将其编译为 .jar 文件并将其发送给某人，该人是否拥有正确的权限？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T00:22:38.743

> 谁能告诉我这是为什么？

您的用户无权在该目录中创建文件。

> 有什么办法可以更改权限吗？

与更改任何目录的权限相同。

在 Java 7+

```
Files.setPosixFilePermisions(f1.toPath(), 
    EnumSet.of(OWNER_READ, OWNER_WRITE, OWNER_EXECUTE, GROUP_READ, GROUP_EXECUTE)); 
```

> 如果我将其编译为 .jar 文件并将其发送给某人，该人是否拥有正确的权限？

我怀疑一个名为的目录的正确权限`/System`是您没有写入权限。

有什么理由不使用主目录或当前工作目录？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T00:22:12.243

只有具有特殊权限的用户才被允许写入*系统*目录。

普通用户只能在他们的主目录中写入

# javascript - jQuery 使用 .animate 滚动到顶部 - 先跳到底部？

> ID：14131325
> 
> 赞同：1
> 
> 时间：2013-01-03T00:19:27.457
> 
> 标签：javascript, jquery, html, scroll, jquery-animate

我有以下 jQuery 片段

```
$('html, body').animate({
    scrollTop: 178
}, 2000); 
```

我在页面底部有一些分页按钮，当它们被点击时会触发一个 javascript 函数。在这个 JS 函数中，调用了上面的代码片段。

这可以很好地将页面滚动回菜单上方的顶部，但首先页面似乎突然跳到最底部（除非您已经在最底部），然后再向上滚动？

我正在撕扯头发，试图弄清楚这种行为。

除了提供指向该网站的链接之外，我不确定如何解释它：http: [//tinyurl.com/apdloyl](http://tinyurl.com/apdloyl)

加载结果后转到页面底部，稍微向上滚动，然后单击下一页按钮。当页面在向上滚动之前向下跳转时，就会发生奇怪的事情。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:01:13.570

我从[onemade.com 上的一篇文章中摘录了](http://oncemade.com/animated-page-scroll-with-jquery/)一些内容：

```
$('html:not(:animated),body:not(:animated)').animate(...); 
```

示例：http: [//jsfiddle.net/ddthK/1/](http://jsfiddle.net/ddthK/1/)

编辑：

在进一步查看提供的链接之后，还有另一件事可能会导致故障。在为滚动设置动画之前尝试等待结果完全加载。从我所在的地方来看，应该不会等太久。或者，先滚动，然后重新加载内容，或者在滚动之前设置加载微调器。为了解释，我认为故障是由滚动期间页面大小的变化引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:23:43.570

所以我的解决方案如下

我有一个容器 div，#main，它在 CSS 中设置了“自动”高度。

当我的分页按钮被按下时，这个 div 的内容被擦除并通过 ajax 替换为新内容。

当内容被删除时，浏览器窗口缩小，结果你总是被撞到页面底部。

我的解决方法是立即获取 div 的高度，以固定格式将其设置为当前高度，滚动到顶部，然后在回滚完成后将 div 的高度重置为自动。

就像是：

```
/* First we have to fix the height of the #main element to prevent a nasty looking jerk                      when the ajax content dissapears */
var height = $('#main').height();
$('#main').height(height);

/* Then we can scroll to the top */
$('html, body').animate({
scrollTop: 178
}, 2000, function() {

    /* Then reset height to auto */
    $('#main').css('height','auto');

}); 
```

可能还有其他更优雅的方法，但这对我有用

# javascript - JS调用函数内部的全局函数

> ID：14131328
> 
> 赞同：0
> 
> 时间：2013-01-03T00:19:45.693
> 
> 标签：javascript, function

请建议，我正在尝试在 b() 函数的函数中调用 a() 函数

我不知道如何链接这个 a() 函数。

```
 d = function() {
         this.a = function() {}

         this.b = function() {
            x.hover(function() { this.a() });
         }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:22:16.163

这是一种方法：

```
d = function(){
     var self = this;

     this.a = function(){};
     this.b = function(){
        x.hover(function(){ self.a()  });
     }
} 
```

在 JS`this`中设置取决于函数的调用方式，并且在您传递给`x.hover()`它的匿名函数中并不是您所期望的。只需保留对权利的引用`this`并使用它...

进一步阅读：[MDN 的`this`页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)。

# jquery - 为什么我在 IE8 /IE9 中看不到这个子导航？切换到显示块不显示

> ID：14131333
> 
> 赞同：0
> 
> 时间：2013-01-03T00:20:17.787
> 
> 标签：jquery, internet-explorer, css, css-tables

我真的很讨厌这样直接问一个问题，但我一直在试图弄清楚为什么左侧的子导航（悬停在“关于我们”上）几个小时内不会出现在 IE 中，而且我无法重现问题在小提琴中：-/ 这是网站：http:
[//quinnhr.adsinchosting5.com/](http://quinnhr.adsinchosting5.com/)

***更新***绝对看那个^网站上的代码，因为为了简洁起见，这只是我认为问题所在的一个片段。***/update***
这是 html 和 css 的片段：

```
 <nav> <!-- left sidebar -->
            <ul>
                <li>
                    <a href="#"> Capabilities </a>
                </li>
                <li>
                    <a href="#"> Pricing </a>
                </li>
                <li>
                    <a href="#">About Us</a>
                    <ul id="subNizzle"> <!-- this UL is the issue, see css -->
                        <li class="subNav">
                            <a href="#">someone's name</a>
                        </li>
                        <li class="subNav">
                            <a href="#">some else's name</a>
                        </li>
                        <li class="subNav">
                            <a href="#">another name</a>
                        </li>
                    </ul>
                </li> 
```

CSS ***是的，我知道没有设置显示，jquery 代码在悬停时覆盖它，请参阅 quinnhr.adsinchosting5.com 获取代码。关闭

```
section aside: first-of-type ul li a{
display:table-cell;
} 
```

至少使子导航显示出来，但它显示在现有导航的顶部，并通过以下方式将其向右移动：

```
section aside:first-of-type ul li a{
 position: absolute;
 }
 section aside:first-of-type ul li ul{
 position: absolute;
 right:-100px;
 z-index: 1000;
 } 
```

将其向右移动到足以显示并说明它被隐藏在导航之外...

```
 section aside:first-of-type ul {
  display: table;
  margin-left: 70px;
  margin-top: 25px;
  padding: 0px;
  position: absolute; }

section aside:first-of-type ul li {
  display: table;
  height: 45px;
  position: relative;
  width: 180px; }

section aside:first-of-type ul li a {
  color: #F0EBDA;
  display: table-cell; 
  height: 45px;
  text-decoration: none;
  text-indent: 10px;
  vertical-align: middle; 
  position:absolute;  /* update */
}

section aside:first-of-type ul li ul {
  display: none;
  margin: -45px 0px 0px 179px;
  padding: 0px;
  position:absolute; /* update */
  right: -100px;    /* update */
} 
```

jQuery：查询（文档）.ready（函数（$）{

```
$('li a').addClass("nahbro");
$('ul li ul').css({"margin-left": "-10px", "padding" : "0px", "margin-top" : "-45px"});
$('li').hover(function(){
    $(this).switchClass("nahbro", "prepare", 400);
    $('#subNizzle', this).fadeIn().switchClass("nahbro", "prepare", 300);
    $('.subNav').hover(function(){
        $(this).switchClass("prepare", "liSelected", 200);
    },function(){
        $(this).switchClass("liSelected", "prepare", 200);
    });

}, function(){
    $(this).switchClass("prepare", "nahbro", 400);
    $('#subNizzle', this).fadeOut().switchClass("liSelected", "nahbro", 500);

}); 
```

我认为它与 display:table / display: table-cell / display: block 链中的某处有关...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:21:38.047

终于找到了为什么 subnav 没有显示的答案：它被正确定位但是当：

过滤器：progid:DXImageTransform.Microsoft.gradient(startColorstr='#7d9090', endColorstr='#545e5f',GradientType=0);

被应用，由于某种原因，它隐藏了过滤器范围之外的所有内容。这很古怪。但至少现在我知道了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:27:33.520

因为您正在使用`<nav>`和`section`标记，而 IE9 不支持 That。您需要将`nav, section`标签替换为`div`

# java - wso2esb & wso2as - 两个 Web 服务的链接或编排

> ID：14131335
> 
> 赞同：1
> 
> 时间：2013-01-03T00:20:28.383
> 
> 标签：java, wso2, esb, wso2esb, orchestration

*亲爱的大家，*在第一个新年快乐。

***我的目标如下：***

我在 wso2as 中部署了两个 axis2 Web 服务（ws1、ws2）。客户端必须通过 wso2esb 向 ws1 提供参数，并且必须将返回值作为参数提供给 ws2，然后将最终值返回给客户端。因此，客户端所做的只是将参数提供给 ws1 并接收来自 ws2 的最终响应。

***问题：***

如何逐步进行并使 ws1 和 ws2 进行通信（我认为是通过代理）？因为我尝试了很多 tuto，但没有一个是为了我的详细原因，我真的是 ESB 的初学者。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T05:33:33.697

是的。您可以一步完成。我之前在一个项目中做过这个：这是您可以遵循的步骤：

```
1\. ws1 and ws2 are both have "endpoints" defined in the ESB.
2\. In the ws1 proxy, define a target inSequence to point to a "sequence"
   for example "ws1InSequence"
3\. In the "ws1InSequence", you can use <filter> to make sure the value is exists.
   Then you can <send> to the ws1 <endpoint> with "receive" attribute point to
   a sequence for example "ws1ResultSequence"
4\. In the ws1ResultSequence, you can again use the <filter> to make sure 
   it has the parameter/value you need. Then you can use param/value to format a request message.
<payloadFactory>
    <format>
        <ns1: ws2Operation
            xmlns:ns1="ws2Namespace">
            <element1 xmlns="">$1</element1> 
            <!-- Note $1 will have the //paramName value from the ws1 Result message -->
            <element2 xmlns="">$2</element2>
            <!-- Note $2 will have the //paramName2 value from the ws1 Result message -->
    </format>
    <args>
        <arg expression="//paramName" />
        <arg expression="//paramName2" />
    </args>
</payloadFactory>
5\. Still in ws1ResultSequence, after you create the request message, 
   you <send> it to the ws2 proxy. Then in the ws2 proxy, in the <outSequence>
   you can juse use <send/> to send the response to the client. 
```

请注意，您可能需要包括异常（故障序列）处理。

WSO2ESB 使用 Apache Synapse 进行配置。您可以在他们的文档中找到大部分语法和示例用法：http: [//synapse.apache.org/userguide/config.html](http://synapse.apache.org/userguide/config.html)

**更新：** 您可以以此为例。注意，这可能不是您需要的完整代码，您可能需要添加异常处理。

```
 <sequence xmlns="http://ws.apache.org/ns/synapse" name="ws1ResultSequence"
trace="enable" onError="ws1ResultSequenceErrorHandler">
<log level="custom">
    <property name="sequence" value="INVOCATION START: ws1ResultSequence" />
</log>
<!-- record the original message for future reference -->
<enrich>
    <source clone="true" type="envelope" />
    <target action="replace" type="property" property="ORIGINAL" />
</enrich>

<!-- Check if the ws1 result message has the value -->
<property
    xmlns:ns1="ws1Namespace"
    name="valueExists" expression="//ns1:element1" />
    <!--Note here, element1 is the element name which has the value: output1 -->

<filter xpath="fn:boolean( get-property('valueExists') )">
    <then>
        <!-- create the request message to invoke ws2 -->
        <payloadFactory>
            <format>
                <ns1:ws2OperationName
                    xmlns:ns1="ws2Namespace">
                    <element2 xmlns="">$1</element2>
                </ns1:ws2OperationName>
            </format>
            <args>
                <arg expression="//ns1:element1" />
            </args>
        </payloadFactory>
        <log level="custom">
            <property name="inInvokeWS2" value="INVOCATION START: value from ws1 result exists" />
        </log>

        <send>
            <endpoint key="ws2Sequence" />
        </send>
        <drop/>
    </then>
</filter>
<!-- No result value found from the ws1 result message -->
<send>
    <endpoint key="DoSomethingElseOrThrowError" />
</send> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:30:40.833

您需要做的是，调用 ws1，获取响应，从响应中提取值，然后创建要发送到 ws2 的有效负载并调用 ws2。[该网络研讨会](http://wso2.org/library/webinars/2011/01/wso2-esb-answer-enterprise-service-integration)展示了如何执行类似的场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:15:25.203

我将尝试解释所有后续步骤：

* * *

**网页服务**

1.  wsOne 部署在 wso2as 中：接受参数：wsOne (input1, size) 并返回一个包含 3 个字符串 (t1, t2, output1) 的表，
2.  ws2One 部署在 wso2as 中：接受参数：wsTwo(output1) 并返回字符串：“Hello output1”。

*wsOne：*

`EndPoint (In wso2as): http://localhost:9765/services/wsOne`

`WSDL (In wso2as): http://localhost:9765/services/wsOne?wsdl`

*ws二：*

`EndPoint (In wso2as): http://localhost:9765/services/wsTwo`

`WSDL (In wso2as): http://localhost:9765/services/wsTwo?wsdl`

* * *

1.  现在我在 wso2esb 中，我必须在代理之前创建一个序列，因为我将为每个 ws 调用代理内部的序列：

**序列**

> ServiceBus -> 序列 -> 定义的序列 -> 添加序列。

*ws1ResultSequence*

> 我不知道必须包含什么原因当我尝试创建有效负载时出现错误..

*ws1InSequence*

```
<sequence xmlns="http://ws.apache.org/ns/synapse"><in>
  <filter>
     <then>
        <send receive="ws1ResultSequence">
           <endpoint>
              <address uri="http://localhost:9765/services/wsOne"/>
           </endpoint>
        </send>
       </then>
     <else/>
    </filter>
  </in>
</sequence> 
```

*ws2序列*

```
<sequence xmlns="http://ws.apache.org/ns/synapse" name="conf:/ws2Sequence">
   <out>
      <send/>
   </out>
</sequence> 
```

**代理**

*ws1Proxy*

> 添加->代理服务->自定义代理->名称：ws1proxy，发布wsdl：否，下一步->定义InSequence->从注册表中挑选->ws1InSequence。

*ws2Proxy*

> Add->Proxy Service ->Custom Proxy-> Name: ws2proxy, publishing wsdl: No, Next -> Define InSequence-> Pick from Registry -> ws2Sequence.

* * *

Is My steps correct or not ? I know that I did Many mistakes following as it's my first interaction with SOA, ESB, ... What Must the Client execute to launch the chaining and obtain the required result (ws1Proxy) or an other?

Thanks a lot for your time.

# python - 1and1安装python不起作用

> ID：14131338
> 
> 赞同：1
> 
> 时间：2013-01-03T00:20:39.273
> 
> 标签：python, shared-hosting

我在我的 ssh 的共享主机目录（1and1.com）中成功安装了 python 2.7.3，当我在 python 安装的同一会话中键入***which python27它工作正常，但是当我启动另一个会话时它什么也不返回。***但是，当我转到 python 安装目录时，它工作正常。我不知道为什么。我确定我使用更新了 ./bashrc 文件

```
echo 'export PATH=$HOME/python27/bin:$PATH' >> ~/.bashrc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-12T03:44:05.677

Python 已作为共享主机包的一部分安装。您可以通过导航查看详细信息`http://[siteid].onlinehome.us/logs/info.py`

[有关1&1](http://help.1and1.com/hosting-c37630/linux-c85098/pythoncgis-c37725/what-python-modules-are-installed-on-the-shared-hosting-servers-a595984.html)的更多信息，请参阅此内容

# wordpress - 我在 wordpress 中在哪里调用 PHP 来使用循环？

> ID：14131339
> 
> 赞同：0
> 
> 时间：2013-01-03T00:20:43.980
> 
> 标签：wordpress

我正在尝试调用一个 javascript 函数，该函数创建一个页面内弹出窗口，显示 wordpress 网站上的所有帖子内容。我想我可以从 wp-admin 仪表板弄清楚如何将 JS 包含到我的页面中。我已经阅读了很多关于“循环”的内容，这似乎是我想要的——发布没有任何格式的内容。我想我有我想使用的代码。

```
 <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

 <div class="entry">
   <?php the_content(); ?>
 </div>

 <?php endwhile; ?> 
```

但是，我不知道将这段代码放在哪里。我曾尝试将其直接插入管理仪表板，但无济于事。[我曾尝试通过Exposito](http://wpshower.com/themes/expositio/)主题创建自定义模板，但它总是以空白页结束（我认为是因为主题不容易模板化）。简而言之，我的问题是我应该把 php 代码放在哪里来调用我的循环？

# ios - iOS在mapview上刷新注释

> ID：14131345
> 
> 赞同：11
> 
> 时间：2013-01-03T00:21:26.360
> 
> 标签：ios, annotations, mkmapview, mkannotation, mkannotationview

我有一个地图视图，其中注释的坐标不断更新，但是当我使用 setCoordinate 时，注释不会移动。如何刷新注释以反映它们的坐标？

```
- (void)updateUnits {

    PFQuery *query = [PFQuery queryWithClassName:@"devices"];
    [query whereKeyExists:@"location"];
    [query findObjectsInBackgroundWithBlock:^(NSArray *objects, NSError *error) {

        if (!error) {

            for (PFObject *row in objects) {

                PFGeoPoint *geoPoint = [row objectForKey:@"location"];
                CLLocationCoordinate2D coord = { geoPoint.latitude, geoPoint.longitude };

                for (id<MKAnnotation> ann in mapView.annotations) {

                    if ([ann.title isEqualToString:[row objectForKey:@"deviceid"]]) {

                        [ann setCoordinate:coord];

                        NSLog(@"latitude is: %f" , coord.latitude);
                        NSLog(@"Is called");
                        break;
                    }
                    else {

                        //[self.mapView removeAnnotation:ann];
                    }
                }
            }
        }
        else {

        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-03T02:30:04.173

更新（以反映解决方案）：

拥有自己的自定义注释并实现 setCoordinate 和/或综合坐标可能会导致问题。

来源：http: [//developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/AnnotatingMaps/AnnotatingMaps.html](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/AnnotatingMaps/AnnotatingMaps.html)

以前的解决方案：

您可以简单地删除所有注释，然后重新添加它们。

```
[mapView removeAnnotations:[mapView.annotations]];

[mapView addAnnotations:(NSArray *)]; 
```

或删除它们并一一重新添加：

```
for (id<MKAnnotation> annotation in mapView.annotations)
{
    [mapView removeAnnotation:annotation];
    // change coordinates etc
    [mapView addAnnotation:annotation]; 
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-11T20:42:03.353

将添加注释分派到主线程，而不是尝试在后台线程上修改 UI

```
dispatch_async(dispatch_get_main_queue()) {
    self.mapView.addAnnotation(annotation)
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-08-07T22:16:10.073

**Swift 3.0**版本的 Nathan 的回答（谢谢 Nathan）：

```
DispatchQueue.main.async {
    mapView.addAnnotation(annotation)
} 
```

旁注，内森的回答应该有更多的支持。我实际上需要这个帮助来删除注释，同样的问题存在并且通过将更新调度到主队列来解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-12T22:02:52.437

尝试使用`[self.mapView removeAnnotations:self.mapView.annotations]`：

```
- (void)viewDidAppear:(BOOL)animated
{

[super viewDidAppear:animated];

[self.mapView removeAnnotations:self.mapView.annotations];

PFQuery *query = [PFQuery queryWithClassName:@"caches"];

[query findObjectsInBackgroundWithBlock:^(NSArray *comments, NSError *error)
 {
     for (PFObject *comment in comments)
     {
         NSString *tit = comment[@"titulo"];
         NSString *lat = comment[@"latitud"];
         NSString *lon = comment[@"longitud"];

         float latFloat = [lat floatValue];
         float lonFloat = [lon floatValue];

         CLLocationCoordinate2D Pin;
         Pin.latitude = latFloat;
         Pin.longitude = lonFloat;
         MKPointAnnotation *annotationPoint = [[MKPointAnnotation alloc]init];
         annotationPoint.coordinate = Pin;
         annotationPoint.title = tit;

         [self.mapView addAnnotation:annotationPoint];

     }

 }];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-22T11:22:47.223

出于暗模式的目的，我需要刷新注释的视图。我还必须调用委托方法来重新创建注释视图。

```
- (void)traitCollectionDidChange:(UITraitCollection *)previousTraitCollection {
    [super traitCollectionDidChange:previousTraitCollection];
    if (@available(iOS 13.0, *)) {
        if ([self.traitCollection hasDifferentColorAppearanceComparedToTraitCollection:previousTraitCollection]) {
            for (id<MKAnnotation> annotation in self.mapView.annotations) {
                [self.mapView removeAnnotation:annotation];
                [self.mapView addAnnotation:annotation];
                [self mapView:self.mapView viewForAnnotation:annotation];
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-23T20:41:29.550

删除所有现有的注释，并重新添加新的或更新的注释列表将刷新 mapView。首先我试过：

```
mapView.annotations.removeAll() 
```

但收到错误：

```
"Value of type '(MKMapRect) -> Set<AnyHashable>' has no member 'removeAll'" 
```

然而这有效：

```
for annotation in mapView.annotations{
    mapView.removeAnnotation(annotation)
}
// .. code to add the new or updated annotation list 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-06-11T06:07:08.217

只需添加

```
mapView.reloadStyle(self) 
```

# java - 亚马逊 MWS listMatchingProducts 超过 10 个结果？

> ID：14131350
> 
> 赞同：1
> 
> 时间：2013-01-03T00:21:52.987
> 
> 标签：java, amazon-mws

我使用 java 集成了亚马逊 mws 并且我能够使用`listMatchingProducts`. 当我发送查询时，我只会得到 10 个结果。在文档中，我发现了一些关于使用的信息，`nextToken`但我不知道如何使用。我会在这里感谢一些帮助。

**编辑**：

似乎没有`nextToken`结果：

```
<?xml version="1.0"?>
<ListMatchingProductsResponse xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01">
<ListMatchingProductsResult>
  <Products xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01" xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
    <Product>
      <Identifiers>
        <MarketplaceASIN>
          <MarketplaceId>A1PA6795UKMFR9</MarketplaceId>
          <ASIN>B005CNZN7A</ASIN>
        </MarketplaceASIN>
      </Identifiers>
      <AttributeSets>
        <ns2:ItemAttributes xml:lang="de-DE">
          <ns2:AspectRatio>2.40:1</ns2:AspectRatio>
          <ns2:AudienceRating>Freigegeben ab 12 Jahren</ns2:AudienceRating>
          <ns2:Binding>DVD</ns2:Binding>
          <ns2:Brand>RADCLIFFE DANIEL</ns2:Brand>
          <ns2:Creator Role="Darsteller">Daniel Radcliffe</ns2:Creator>
          <ns2:Creator Role="Hauptdarsteller">Daniel Radcliffe</ns2:Creator>
          <ns2:Creator Role="Darsteller">Emma Watson</ns2:Creator>
          <ns2:Creator Role="Hauptdarsteller">Emma Watson</ns2:Creator>
          <ns2:Creator Role="Darsteller">Rupert Grint</ns2:Creator>
          <ns2:Creator Role="Autor">Joanne K. Rowling</ns2:Creator>
          <ns2:Creator Role="Komponist">Alexandre Desplat</ns2:Creator>
          <ns2:Creator Role="Regisseur">David Yates</ns2:Creator>
          <ns2:Feature>Medium: DVD</ns2:Feature>
          <ns2:Feature>Regie: David Yates</ns2:Feature>
          <ns2:Feature>Laufzeit: ca. 125 Minuten</ns2:Feature>
          <ns2:Feature>Label: Warner Home Entertainment</ns2:Feature>
          <ns2:Feature>Bildformat: 2.40:1</ns2:Feature>
          <ns2:Format>Dolby</ns2:Format>
          <ns2:Format>PAL</ns2:Format>
          <ns2:Format>Widescreen</ns2:Format>
          <ns2:IsAdultProduct>false</ns2:IsAdultProduct>
          <ns2:IsEligibleForTradeIn>true</ns2:IsEligibleForTradeIn>
          <ns2:Label>Warner Home Video - DVD</ns2:Label>
          <ns2:Languages>
            <ns2:Language>
              <ns2:Name>german</ns2:Name>
              <ns2:Type>Untertitel für Hörgeschädigte</ns2:Type>
            </ns2:Language>
            <ns2:Language>
              <ns2:Name>english</ns2:Name>
              <ns2:Type>Untertitel für Hörgeschädigte</ns2:Type>
            </ns2:Language>
            <ns2:Language>
              <ns2:Name>french</ns2:Name>
              <ns2:Type>Subtitled</ns2:Type>
            </ns2:Language>
            <ns2:Language>
              <ns2:Name>dutch</ns2:Name>
              <ns2:Type>Subtitled</ns2:Type>
            </ns2:Language>
            <ns2:Language>
              <ns2:Name>german</ns2:Name>
              <ns2:Type>Original</ns2:Type>
            </ns2:Language>
            <ns2:Language>
              <ns2:Name>english</ns2:Name>
              <ns2:Type>Original</ns2:Type>
            </ns2:Language>
            <ns2:Language>
              <ns2:Name>french</ns2:Name>
              <ns2:Type>Original</ns2:Type>
            </ns2:Language>
            <ns2:Language>
              <ns2:Name>dutch</ns2:Name>
              <ns2:Type>Original</ns2:Type>
            </ns2:Language>
          </ns2:Languages>
          <ns2:ListPrice>
            <ns2:Amount>12.99</ns2:Amount>
            <ns2:CurrencyCode>EUR</ns2:CurrencyCode>
          </ns2:ListPrice>
          <ns2:Manufacturer>Warner Home Video - DVD</ns2:Manufacturer>
          <ns2:NumberOfItems>1</ns2:NumberOfItems>
          <ns2:PackageDimensions>
            <ns2:Height Units="inches">0.63</ns2:Height>
            <ns2:Length Units="inches">7.48</ns2:Length>
            <ns2:Width Units="inches">5.28</ns2:Width>
            <ns2:Weight Units="pounds">0.13</ns2:Weight>
          </ns2:PackageDimensions>
          <ns2:PartNumber>WH 1000239545</ns2:PartNumber>
          <ns2:ProductGroup>DVD</ns2:ProductGroup>
          <ns2:ProductTypeName>ABIS_DVD</ns2:ProductTypeName>
          <ns2:Publisher>Warner Home Video - DVD</ns2:Publisher>
          <ns2:RegionCode>2</ns2:RegionCode>
          <ns2:ReleaseDate>2011-11-18</ns2:ReleaseDate>
          <ns2:RunningTime Units="minutes">125</ns2:RunningTime>
          <ns2:SmallImage>
            <ns2:URL>http://ecx.images-amazon.com/images/I/51xgZdaZIBL._SL75_.jpg</ns2:URL>
            <ns2:Height Units="pixels">75</ns2:Height>
            <ns2:Width Units="pixels">53</ns2:Width>
          </ns2:SmallImage>
          <ns2:Studio>Warner Home Video - DVD</ns2:Studio>
          <ns2:TheatricalReleaseDate>2011-01-01</ns2:TheatricalReleaseDate>
          <ns2:Title>Harry Potter und die Heiligtümer des Todes (Teil 2)</ns2:Title>
        </ns2:ItemAttributes>
      </AttributeSets>
      <Relationships/>
      <SalesRankings>
        <SalesRank>
          <ProductCategoryId>dvd_display_on_website</ProductCategoryId>
          <Rank>18</Rank>
        </SalesRank>
        <SalesRank>
          <ProductCategoryId>3120191</ProductCategoryId>
          <Rank>1</Rank>
        </SalesRank>
        <SalesRank>
          <ProductCategoryId>289094</ProductCategoryId>
          <Rank>2</Rank>
        </SalesRank>
        <SalesRank>
          <ProductCategoryId>290505</ProductCategoryId>
          <Rank>3</Rank>
        </SalesRank>
      </SalesRankings>
    </Product>
    <Product>
    ...
    </Product>
</ListMatchingProductsResult>
<ResponseMetadata>
  <RequestId>623b3da9-733d-48c6-a535-a7f9da6ea525</RequestId>
</ResponseMetadata>
</ListMatchingProductsResponse> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-27T15:02:00.367

ListMatchingProducts操作根据您的[条件](http://docs.developer.amazonservices.com/en_US/products/Products_ListMatchingProducts.html)执行搜索，并且不像其他一些操作那样提供 nextToken。如果您有 ASIN 或 SKU，请尝试使用[GetMatchingProductForId ，这是推荐的方法。](http://docs.developer.amazonservices.com/en_US/products/Products_GetMatchingProductForId.html)但是，如果您需要使用 ListMatchingProducts 执行搜索，那么您会被初始请求中的内容所困扰，最多有 10 个结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-21T01:39:58.143

正如您在 MWS 的文档中看到的那样，产品 API 仅返回 10 个项目，因此没有`nextToken`可用的。请参阅文档：
[http ://docs.developer.amazonservices.com/en_US/products/Products_GetMatchingProduct.html](http://docs.developer.amazonservices.com/en_US/products/Products_GetMatchingProduct.html)

来自文档的图片：
[https ://i.stack.imgur.com/a83tY.png](https://i.stack.imgur.com/a83tY.png)

# php - 为什么 MySQLi Fetch Array 返回 null？

> ID：14131352
> 
> 赞同：0
> 
> 时间：2013-01-03T00:22:05.227
> 
> 标签：php, mysqli

```
$query = $db->query("SELECT * FROM files WHERE hash = '" . $file . "'");
while($result = $query->fetch_array()) {
  $result[0] = $result['uploadr'];
  $result[1] = $result['name'];
} 
```

这是查询和获取数组的代码，但它返回 null。有任何想法吗？顺便说一句，我尝试使用“$result[0]”和“$result['uploadr'];”来获得结果。有什么帮助吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-03T00:54:12.100

不要重新分配您的阵列。只需像这样使用`$result= query->fetch_assoc()`和检索它们：

```
$upload = $result['uploadr'];
echo $upload; 
```

为了使您的查询可靠地抵御攻击，您应该使用准备好的语句：

```
 $query = "SELECT * FROM files WHERE hash = ?"
if (!$stmt = $db->prepare($query))
    {
        echo "Prepared Failed: (" . $db->errno . ") " . $db->error;
    }
    if (!$stmt->bind_param("s", $file))
        {
            echo "Bind Failed: (" . $db->errno . ") " . $db->error;
        }
        if (!$stmt->execute())
            {
                echo "Execution Failed: (" . $db->errno . ") " . $db->error;
            }
            if (!$results = $stmt->get_results())
                {
                    echo "No Results where found: (" . $db->errno . ") " . $db->error;
                }
                while($row = $results->fetch_assoc())
                {
                    $upload = $row['uploadr'];
                    $name = $row['name'];
                    echo $upload."<br>";
                    echo $name;
                }
        $stmt -> close();
        $db -> close(); 
```

# c# - 向面板添加多个标签

> ID：14131357
> 
> 赞同：0
> 
> 时间：2013-01-03T00:22:21.550
> 
> 标签：c#, foreach

我如何将多个标签动态添加到面板中，面板的值是从一个范围创建的。我已经创建了范围并将值添加到标签并通过 foreach 循环将标签输入到面板，但问题是我只能输出一个。

```
var range = Enumerable.Range(1, 90);
      foreach(int i in range)
      {
          string num = i.ToString();
          var vartable = new Dictionary<string, Label>();
          vartable[num] = new Label();
          vartable[num].Text = num;
          panel1.Controls.Add(vartable[num]);
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:25:45.507

您的问题是您正在为每次迭代创建一个新字典，我认为这不是您想要的行为。将您的代码更改为：

```
var range = Enumerable.Range(1, 90);
var vartable = new Dictionary<string, Label>();
foreach (int i in range)
{
    var num = i.ToString();
    var label = new Label { Text = num };
    vartable[num] = label;
    panel1.Controls.Add(label);
} 
```

# php - substr 的有效替换？

> ID：14131363
> 
> 赞同：6
> 
> 时间：2013-01-03T00:22:54.773
> 
> 标签：php, string, optimization

假设我们有一个非常大的字符串`$str`，我们需要将它的很大一部分（假设是整个字符串，但没有前 3 个字节）传递给函数。这样做的方法`substr`：

```
consumer_function(substr($str, 3)); 
```

似乎效率不高，因为`substr`在返回结果之前似乎将字符从初始字符串复制到新字符串中。有什么方法可以将大部分字符串传递给函数而无需过度复制？我们无法更改该函数的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:04:53.320

我看不出这里有问题。你猜测有问题，你没有理由认为有问题。

“它似乎没有效率”不是问题。如果你测量它并发现它很慢，那么你就有问题了。[然后，您在代码上使用XDebug](http://xdebug.org/)之类的分析器，看看您是否可以找到代码的哪些部分运行缓慢。

如果您没有问题，那么您就无法解决它，并且猜测可能看起来可能很慢的事情并不意味着您有问题。

优化俱乐部规则：

1.  优化俱乐部的第一条规则是，你不要优化。
2.  优化俱乐部的第二条规则是，没有衡量就不要优化。
3.  如果您的应用程序运行速度比底层传输协议快，那么优化就结束了。
4.  一次一个因素。
5.  没有市场机器人，没有市场机器人时间表。
6.  只要需要，测试就会继续进行。
7.  如果这是您在优化俱乐部的第一个晚上，您必须编写一个测试用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T00:33:03.340

处理你的工作`$str`，而不必创建另一个变量，你可以这样做：

```
for($i=1;$i<=$no;$i++) $str[strlen($str)-$i]=null;
$str=rtrim($str); 
```

从它的末尾刮掉最后一个`$no`字符

并且：

```
for($i=0;$i<$no;$i++) $str[$i]=null;
$str=ltrim($str); 
```

刮掉它的第一个字符。

## 更新：

**测试 A：从字符串的开头剃掉 30 个字符**

**测试用例 1：** substr($str,30)

```
52784749 bytes of data
0.72129082679749s execution time
52903844 bytes of ram used 
```

**测试用例 2：**带有空字符串字符和 ltrim 的循环

```
52784749 bytes of data
0.23676204681396s execution time
52904276 bytes of ram used 
```

**测试 B：从字符串末尾剃掉 30 个字符**

**测试用例 1：** substr($str,0,-30)

```
52784749 bytes of data
0.83467292785645s execution time
52903924 bytes of ram used 
```

**测试用例 2：**带有空字符串字符和 rtrim 的循环

```
52784749 bytes of data
0.27498316764832s execution time
52904340 bytes of ram used 
```

总而言之，当您确实需要这种微优化时，这是一个合理的问题，使用此解决方案可实现**3 倍**的处理时间，甚至更好（**高达 40**倍）使用 1.2Mb 的较小数据集。
需要更多的测试，但看起来是一个可行的选择。

## 更新2：

*正如 Grigory 指出的那样，内存在速度上是一个很大的问题，Fergus 注意到 ltrim() 的内存占用：*
不幸的是，使用 trim() 将使我们回到原点，在某些时候*使用的内存是原来的两倍，*而且只有*速度增加*。

另一方面，如果不使用 trim()，我们最终会得到一个长度相同且包含*空字符*的字符串，但*速度会提高*并*节省内存*。

## 更新3：

也适用于**null**、**false**和“ **\x08** ”（BackSpace 字符）。
var_dump() 报告字符串的长度与原始字符串的长度相同，但引号中的值是您所期望的：只有您感兴趣的部分。

太糟糕了这个问题[关闭] :(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T00:38:47.340

*“让它发挥作用，然后让它变得完美”*

**说真的 - 过早的优化不是一个好的方法。**除非你觉得肯定有性能影响——*一个明显的影响*——然后离开它。当你重新访问它时，使用一些很少使用的技巧来做一些非常常见的事情只会导致维护噩梦。

默认情况下没有可用的替代方法 - 如果您查看 PHP 网站上的[字符串函数](http://php.net/manual/en/ref.strings.php)，您可以看到可用的方法。

但是，您可以使用*数组表示法*处理字符串：

```
$str[ index ] 
```

例如：

```
$str = "abc";
$str[0] // a
$str[1] // b
$str[2] // c 
```

结合`unset()`它完全可以从字符串中手动取消设置特定项目..

```
$str = "abc";
unset( $str[1] ); // $str = "ac" now. 
```

抛出一个基本循环，可以使用它；在您的示例中，您想删除 3 - 所以您可以像这样实现它：（注意，数组表示法 = 索引从 0 开始！！）

```
for( $i=0; $i<=2; $i++ )
  unset( $str[i] ); 
```

但是，请记住您丢失了原始字符串 - 因此您以后可能需要任何数据？是的，没了。

**但是 - 如果我是你，我会坚持下去`substr()`。**

**编辑：** Grigory 在评论中指出这在 PHP 5.3 中不起作用 - 这很奇怪，因为[PHP 文档指出](http://php.net/manual/en/language.types.string.php)：

> **按字符访问和修改字符串**
> 
> 可以通过使用方数组括号指定字符串后所需字符的从零开始的偏移量来访问和修改字符串中的字符，如 $str[42]。为此，将字符串视为字符数组。当您想要提取或替换超过 1 个字符时，可以使用函数 substr() 和 substr_replace()。

所以这确实是另一个坚持的理由`substr()`——我现在有点好奇；所以我将尝试看看这种行为是否仅由于`unset()`. 会回来报告的！

**更新：**正如预期的那样，这种行为是由于`unset()`- 实际上我不能说我太惊讶了。

```
**Fatal errors:** [type:1] -- Cannot unset string offsets -- at line 7 
```

你可以在这里看到我在[phpFiddle](http://phpfiddle.org/main/code/nx6-b78)的测试用例。

**因此，总而言之，没有任何字符串函数可以在语言中原生地执行此操作，而且您不能通过逐个字符地操作字符串来做到这一点。坚持推荐的方式。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T03:17:47.740

基于之前的答案。如果我们可以相信 php 会尝试类似数组的字符串，即没有内部重复，这里还有 2 个解决方案需要测试。请注意，我们`$str`多次重写原始字符串。

```
$str         = "abcdefghi"; // a given string 
$set_strip   = 3; // how many chars strip

$strlen  = strlen($str);
$strip   = $strlen - $set_strip;

// test before commit errors    
if ($strip > 0 && $strip <= $strlen)
{
    // SOL. 1.- using str_split with $strip as 2º parameter (trusting strrev() acts efficienly)
    $str             = strrev($str); // reverse string
    $str             = str_split($str, $strip); // split into a array with 2 elements
    $str             = strrev($str[0]); // back to original order

    // SOL. 2.- shortening array $set_strip times
    $str             = str_split($str);
    for ($i = 0; $i < $set_strip; $i ++ )
        array_shift($str);

    $str = implode('', $str); // back to string
}
else
    echo "\$set_strip value not allowed = $set_strip, must be non-negative  and < $strlen"; 
```

两者都给了我们字符串：`defghi`

# asp.net - 在 XSS 易受攻击的应用程序中最小化风险的方法？

> ID：14131365
> 
> 赞同：2
> 
> 时间：2013-01-03T00:23:13.753
> 
> 标签：asp.net, security, web

我正在为一家本地托管公司开发票务系统，其中一个要求是用户能够提交带有实际 html 的票证。这将是一个有效的输入。

```
<html>
  <head>
    <script>alert('hello!');</script>
  </head>
</html> 
```

该输入可以通过在线提交或进入系统的电子邮件放入系统。

此外，业务需求之一是查看票证的人能够看到 html 版本*为 html*，因此以某种方式将其呈现给浏览器是业务需求。

现在，我明白了，我绝对没有办法保护这个系统。在我能够做到的地方，我做了很多工作来保护它，但是鉴于当前的业务需求，这个特殊的安全漏洞是无法修复的。

我什至无法想象将这些东西列入白名单，因为用户可能正在描述一个嵌入了脚本标签的 html 页面，一个 web.config 文件，一个 XML 文件，一个 odf 文件，你可以命名它，他们可能有一个用户发送了一个中的例子。

我不习惯编写要求如此“开放”的软件，我不确定如何最好地解决这个问题。我目前的想法是风险管理而不是风险预防，我认为在这种情况下没有其他方法可以有效地限制恶意输入。但是，如果有人对我如何根据当前要求进行某种预防有任何建议，我会全力以赴。既然我确定有人会提出来，我也说我已经和我签约的公司的老板进行了坦率的交谈，要求不会很快改变:)

我想从处理过这种情况的人那里得到意见，以及根据这种经验你可以给出什么建议。我对理论不是很感兴趣，而是对实践感兴趣。我的部分目标是在所有者面前提出一个可靠的建议，看看我们可以做些什么来妥协整个安全与便利的权衡。

另请记住，该系统最终将出售给他们的客户，这意味着我根本无法做出许多假设。目前，该系统是为他们而构建的，但随着时间的推移，我们所做的许多假设最终将被删除或推广。

我的第一个想法是对传入电子邮件进行某种风险评估，如果电子邮件超过阈值，则会自动设置某些限制。诸如无法在浏览器中查看 html 版本，在文本编辑器而不是浏览器中打开它之类的事情。我担心这对用户来说可能是一种痛苦，并且我采取的任何解决方法（“批准电子邮件”）都将在没有任何实际想法的情况下使用，从而使这毫无价值。

我还考虑过“受信任区域”，我的意思是，来自新电子邮件地址的工单受到限制，直到来自该地址的 X 个工单，限制总是针对通过 Web 界面创建的工单/电子邮件设置，之类的东西。在许多方面，这与其他解决方案具有相同的问题。

另一个解决方案是顺其自然。这显然是最简单的解决方案，它可能是一个有效的解决方案，但我需要一个非常有力的论据才能接受它。

我并没有放弃 HTML 解析器并亲自查看电子邮件中的特定内容，但我不相信有任何自动化方法可以保护这个系统而不会出现误报，所有者已经明确表示这是完全不可接受的。据我所知，谁想通过电子邮件发送支持却永远不会收到他们的消息？

来自过去解决此问题的人的任何建议或见解将不胜感激。我使用的具体技术是 ASP.Net 4.5/IIS

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T00:38:42.550

对我来说，第一个答案是显而易见的：不要那样做。不要让他们提交任意 HTML/JS，然后将其呈现给经过身份验证的客户端。我无法完全想象有必要这样做的场景。

第二个最明显的答案是 Guffa 的：如果你渲染它，那么计划是在它不能使用任何身份验证的环境中渲染它，窃取 cookie 或重定向到经过身份验证的操作等等. 即，进行渲染的页面未经过身份验证，并且不需要 cookie 即可查看（或类似方法）。但是，他们仍然有可能任意编写恶意 JavaScript，而这些 JavaScript 本身就可能会做坏事。例如，您可以获取他们的任何输入，将其呈现为纯 .HTML 文件，查看器必须在其浏览器中本地打开（即非托管）；这*仍然很*糟糕。

所以总的来说，这是一个非常糟糕的主意，我不会这样做。典型的出路是强制任何提交的数据结构非常好（比如在这个论坛上），这样您就可以以适当的方式处理特定的位。这可能是他们想要的——即他们只是不想限制输入；但也许您应该为某些类型的输入（代码示例，什么-不是）设置一个单独的区域。

总而言之：避免这种情况；您可以在某些方面使您的情况稍微好一些，但基本上仍然会很糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T00:29:40.223

如果您真的需要允许任何代码，那么我唯一能想到的就是使用浏览器的跨站点限制。

如果您设置指向同一站点的不同域，并在加载动态内容时使用该域名，并将内容加载到 iframe 中，则 iframe 将与站点的其余部分隔离。

# android - ViewSwitcher 中的当前图像

> ID：14131366
> 
> 赞同：3
> 
> 时间：2013-01-03T00:23:21.377
> 
> 标签：android, viewswitcher

是否有可能在 ViewSwitcher 中获取当前显示图像的名称/参考/ID？

```
switcher = (ViewSwitcher) findViewById(R.id.viewSwitcher);

[...]

@Override
public boolean onSingleTapUp(MotionEvent e) {
       Log.d(TAG, "tell me please, how to get the name/reference/id/etc of the currently displayed image, so i can start a specific action relating to the current image");
       return false;
} 
```

谢谢！

托拜厄斯

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-26T08:30:58.943

在`ViewSwitcher`你只能有`max 2 views`（在你的情况下是图像）。

通过`getCurrentView()`方法获取当前视图

或者通过`getDisplayedChild()`方法获取当前可见项的索引，可以是`0`或者`1`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T15:31:54.113

使用上面的“编辑”按钮更改您的问题帖子。

至于您的问题，如果您使用的是`ViewSwitcher`，我认为您可以使用某种指示器来告诉您`ViewGroup`正在显示哪个屏幕（哪个）。就像调用 switch 命令时您正在修改的`int`or一样。`boolean`

# jquery - 在 safari 中使用 rotateY 的奇怪 z-index 但在 chrome 和 firefox 中没有

> ID：14131373
> 
> 赞同：0
> 
> 时间：2013-01-03T00:24:14.980
> 
> 标签：jquery, html, css, z-index

我遇到了这个问题，我做了很多尝试让它工作......

看看我的[http://jsfiddle.net/9LjB6/](http://jsfiddle.net/9LjB6/)

我...更改相对于绝对位置的位置，将 z-index 更改为 1000、1000000 等...尝试使用 jquery 更改它尝试将其内联在标签中，但它不起作用。

鼠标悬停时我的动作是

```
$(this).css({
    '-webkit-transform':'scale( 1.1,1.1 )',
    'transform':'scale( 1.1,1.1 )',
    '-o-transform':'scale( 1.1,1.1 )',
    '-ms-transform':'scale( 1.1,1.1 )',
    '-moz-transform':'scale( 1.1,1.1 )',
});
$('.ico_competence').css({
    '-webkit-transform':'perspective( 250px ) rotateY( -5deg )',
    'transform':'perspective( 250px ) rotateY( -5deg )',
    '-o-transform':'perspective( 250px ) rotateY( -5deg )',
    '-ms-transform':'perspective( 250px ) rotateY( -5deg )',
    '-moz-transform':'perspective( 250px ) rotateY( -5deg )',
});
$('.ico_innovation').css({
    '-webkit-transform':'perspective( 250px ) rotateY( 5deg )',
    'transform':'perspective( 250px ) rotateY( 5deg )',
    '-o-transform':'perspective( 250px ) rotateY( 5deg )',
    '-ms-transform':'perspective( 250px ) rotateY( 5deg )',
    '-moz-transform':'perspective( 250px ) rotateY( 5deg )',
}); 
```

是什么让这发生？

非常感谢您的帮助和建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:40:20.147

您还需要平移 Z 值......因为您将对象沿 Y 轴向左旋转，所以其右边缘的 Z 值高于鼠标所在的“平面”div。

我已经修改了您的示例以在 safari 中工作：http: [//jsfiddle.net/JZeuY/](http://jsfiddle.net/JZeuY/)

关键部分是`'-webkit-transform':'translate3d(0, 0, 100px)'`

# mysql - Scala Slick 自动增量字段

> ID：14131374
> 
> 赞同：2
> 
> 时间：2013-01-03T00:24:30.827
> 
> 标签：mysql, scala, slick

这是与其他自动增量问题类似的问题，但我不需要提供列列表来定义 autoInc，而是需要以某种方式提供表引用。我正在使用 MySQL

```
import scala.slick.driver.MySQLDriver.simple._
import play.Logger
import slick.session.Database.threadLocalSession

object PaypalCartItems extends Table[PaypalCartItem]("paypalCartItem") {
  def id          = column[Int]("id", O.PrimaryKey, O.AutoInc)
  def itemName    = column[String]("item_name")
  def sku         = column[String]("item_number")
  def quantity    = column[String]("quantity")
  def txnId       = column[String]("txn_id")
  def url         = column[String]("url")

  def * = itemName ~ sku ~ quantity ~ txnId ~ url ~ id <> (PaypalCartItem, PaypalCartItem.unapply _)

  // I don't want to list out the columns, I need to reference the table
  def autoInc = itemName ~ sku ~ quantity ~ txnId ~ url returning id

  def insertItems(items: List[PaypalCartItem]): List[PaypalCartItem] = items map { item: PaypalCartItem =>
    val newId = PaypalCartItems.autoInc.insert(item)
    item.copy(id=newId)
  }
} 
```

上面的代码无法编译，给出以下内容：

```
[error]   overloaded method value insert with alternatives:
[error]   [TT](query: scala.slick.lifted.Query[TT,(String, String, String, String, String)])(implicit session: scala.slick.session.Session)Seq[Int] <and>
[error]   (value: (String, String, String, String, String))(implicit session: scala.slick.session.Session)Int
[error]  cannot be applied to (PaypalCartItem)
[error]     val newId = PaypalCartItems.autoInc.insert(item) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:32:44.047

不确定它会帮助你，但我这样做：

```
def autoInc2 = * returning id.? into {
      case (Music(_, title, artist, album, isrc, ownerId), id) => Music(id, title, artist, album, isrc, ownerId)
    } 
```

Music 的第一个参数是 id，在这种情况下是 Option[Int]。它被用作`val musicWithId = Musics.autoInc2.insert(someMusicObjectWithId)`

# sorting - 使用 TAB 作为字段分隔符的 GNU 排序

> ID：14131376
> 
> 赞同：2
> 
> 时间：2013-01-03T00:25:04.120
> 
> 标签：sorting, csv

我在 Windows 上使用 GNU 排序（来自 GnuWin32）。我将其重命名为“sort1.exe”。输入文本文件有空格和制表符，但字段由制表符分隔。我试过：

```
sort1 -n -k2 -t "\t" file.txt 
```

但它说：“sort1：多字符制表符'\ t'

文字看起来像

```
lazy dog<TAB>123
fox<TAB>1
white tail wolf<TAB>11
blue bear<TAB>7 
```

并且输出应该像

```
fox<TAB>1
blue bear<TAB>7
white tail wolf<TAB>11
lazy dog<TAB>123 
```

我尝试[在另一个线程中](https://stackoverflow.com/questions/1037365/unix-sort-with-tab-delimiter)使用建议，但它在 Windows 中不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T21:31:22.007

还有另一种选择。我不是 100% 确定这与 Windows 兼容，但您可以尝试以这种方式输入 TAB 字符：

`ctrl`- `v`,`Tab`

1.  按`ctrl`- `v`（释放）
2.  请按`Tab`

因此，您将键入以下内容：

> sort1 -n -k2 -t " `ctrl`- `v`, `Tab`" file.txt

您应该看到在引号之间插入了一个制表符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-26T16:10:04.707

试试这个（在 Windows 中，选项卡是 '^t' 而不是 '\t'）：

```
sort -n -k2 -t'^t' file.txt 
```

# windows-phone-7 - VS 2012 中 wp7 的 main.g.cs 和 app.g.cs 绕过

> ID：14131380
> 
> 赞同：0
> 
> 时间：2013-01-03T00:25:22.267
> 
> 标签：windows-phone-7

我正在用 Visual Studio 2012 为 wp7 做一个应用程序，我已经编写了所有代码，但是当我想调试它时，我遇到了页面 main.g.cs 和 app.g.cs 的问题，它们是自动生成的制成。

我将我的 main.xaml 链接到 main.xaml.cs，以及带有 app.g.cs 的 app.xaml，但是当我尝试调试它时，他们使用“main.g.cs”而不是“main.xaml.cs”，出现以下错误：

> 'X.main' 类型已经包含 'connectionList' C:\Users...\obj\Debug\controller\main.g.cs$ 的定义

我把connectionList的定义放在main.xaml.cs页面上，但是在main.g.cs我有这个定义

```
public partial class main : Microsoft.Phone.Controls.PhoneApplicationPage {

    ...       
    internal System.Windows.Controls.ListBox connectionList;
...

 [System.Diagnostics.DebuggerNonUserCodeAttribute()]
    public void InitializeComponent() {
        if (_contentLoaded) {
            return;
        }
        _contentLoaded = true;
        System.Windows.Application.LoadComponent(this, new System.Uri(".../main.xaml", System.UriKind.Relative));
        this.connectionList = ((System.Windows.Controls.ListBox)    (this.FindName("connectionList"))); 
```

我尝试了不同的方法来解决这个问题（删除并重新创建了 main.xaml，设置构建操作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T07:11:35.020

好像您已经在 Main.xaml 中使用 name 定义了一个 ListBox `connectionList`。尝试用另一个名称重命名您的列表，`myConnectionList`看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T21:07:29.780

当我将 main.xaml 和 main.xaml.cs 上的名称更改为 myConnectionList 时，它会自动将 main.g.cs 上的定义更改为 myConnectionList，并继续使用 main.g.cs 而不是 main.xaml 。CS

# c++ - 空序列上的 BOOST_PP_SEQ_ENUM

> ID：14131390
> 
> 赞同：1
> 
> 时间：2013-01-03T00:27:06.280
> 
> 标签：c++, boost, boost-preprocessor

我怎么能写一个类似的宏`BOOST_PP_SEQ_ENUM`，但处理空序列，即

```
#define SEQ (a)(b)
MY_BOOST_PP_SEQ_ENUM(SEQ) // expands to a,b
#define SEQ
MY_BOOST_PP_SEQ_ENUM(SEQ) // expands to nothing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:52:17.493

[这里](https://svn.boost.org/trac/boost/ticket/2047)提出了一个解决这个问题的方法，名为 add `#define BOOST_PP_SEQ_ENUM_0`。它被“没有空序列之类的东西”评论拒绝，但这似乎解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:08:11.020

您只需要定义`SEQ`为一个空序列：

```
#define SEQ () 
```

你可以`BOOST_PP_SEQ_ENUM`直接使用。

使用 G++ 4.7.1 和 VC 2010 与 Boost 1.47 一起工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T02:07:08.507

你可以使用这个：

```
#define PP_SEQ_ENUM(x) BOOST_PP_CAT(PP_SEQ_ENUM_0 x, _END)
#define PP_SEQ_ENUM_0(x) x PP_SEQ_ENUM_1
#define PP_SEQ_ENUM_1(x) , x PP_SEQ_ENUM_2
#define PP_SEQ_ENUM_2(x) , x PP_SEQ_ENUM_1
#define PP_SEQ_ENUM_0_END
#define PP_SEQ_ENUM_1_END
#define PP_SEQ_ENUM_2_END 
```

这应该适用于任何大小的序列（即使是大于 256 的序列）

# sql - 用于登录模型的简单 RDBMS

> ID：14131392
> 
> 赞同：0
> 
> 时间：2013-01-03T00:27:50.373
> 
> 标签：sql, sql-server

我正在寻找一个快速模型来模拟登录过程。我去了 codeplex，AdventureWorks 的东西比我现在需要的要多得多，而且我并没有真正看到我在追求什么。

我们正在寻找原型和商业概念，我只需要我认为非常标准的结构。用户表、角色等。我只需要对其中的一部分进行 db 操作，并希望有一些简单的模型或脚本可以放入 SQL 中并更快地开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:33:33.617

不确定您使用的是什么编程工具，但 asp.net 有一个简单的会员模型，可以快速安装和设置（并使用 .net 的内置登录/配置文件控件）

# c++ - 当窗口设置为活动时获取通知

> ID：14131393
> 
> 赞同：1
> 
> 时间：2013-01-03T00:28:05.397
> 
> 标签：c++, winapi, hook, keylogger

我正在尝试用 C++ 编写一个基本的键盘记录器，到目前为止，我设法使用 win api 安装了一个低杠杆键盘挂钩。每次按下一个键时它都会通知我。我想做类似的事情，每次焦点更改到另一个窗口时通知我，所以我知道用户正在输入哪个窗口。我尝试设置一个 HW_CBT 挂钩，但它没有给我任何通知。

做这个的最好方式是什么？

编辑：

我已经编辑了这段代码：

```
LRESULT CALLBACK CallWndProc(int nCode, WPARAM wParam, LPARAM lParam) {
    cout<<"event";
    return CallNextHookEx(0, nCode, wParam, lParam);
} 
```

和`SetWindowsHookEx(WH_CALLWNDPROC, CallWndProc, NULL, NULL);`

我的程序中也有这个：

```
while(true)
  GetMessage(&msg,0,WM_KEYFIRST, WM_KEYLAST); 
```

当我运行程序时，我仍然没有收到任何通知，除了关于击键的通知。

编辑2！！我用`GetWindowText()`,`GetForegroundWindow()`和一个计时器完成了它。不是我想要的，但这会做。我只会接受第一个答案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:41:09.623

尝试使用 WH_CALLWNDPROC 或 WH_CALLWNDPROCRET 钩子在发送到实际窗口的窗口过程之前或之后将 WM_ACTIVATE（窗口激活和取消激活的通知）消息发送到您的钩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:33:26.770

也许这对你有用？[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)

在系统将消息发送到目标窗口过程之前安装一个挂钩过程来监视消息

# c# - 如何更改 SNMPEngine 示例中的陷阱社区

> ID：14131394
> 
> 赞同：0
> 
> 时间：2013-01-03T00:28:13.360
> 
> 标签：c#, .net, snmp, sharp-snmp

我正在测试 SharpSNMP 库并使用示例进行了一些操作，该库很棒，但缺少一些文档。

我的问题是如何改变我正在聆听陷阱的社区，因为示例中的任何内容都没有让我理解。

```
 if (args.Length != 0)
        {
            return;
        }

        Container = new UnityContainer().LoadConfiguration("snmptrapd");
        var users = Container.Resolve<UserRegistry>();
        users.Add(new OctetString("neither"), DefaultPrivacyProvider.DefaultPair);
        users.Add(new OctetString("authen"), new DefaultPrivacyProvider(new MD5AuthenticationProvider(new OctetString("authentication"))));
        users.Add(new OctetString("privacy"), new DESPrivacyProvider(new OctetString("privacyphrase"),
                                                                     new MD5AuthenticationProvider(new OctetString("authentication"))));

        var trapv1 = Container.Resolve<TrapV1MessageHandler>("TrapV1Handler");
        trapv1.MessageReceived += WatcherTrapV1Received;
        var trapv2 = Container.Resolve<TrapV2MessageHandler>("TrapV2Handler");
        trapv2.MessageReceived += WatcherTrapV2Received;
        var inform = Container.Resolve<InformRequestMessageHandler>("InformHandler");
        inform.MessageReceived += WatcherInformRequestReceived;
        using(var engine = Container.Resolve<SnmpEngine>())
        {
            engine.Listener.AddBinding(new IPEndPoint(IPAddress.Any, 162));
            engine.Start();
            Console.WriteLine("#SNMP is available at http://sharpsnmplib.codeplex.com");
            Console.WriteLine("Press any key to stop . . . ");
            Console.Read();
            engine.Stop();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:51:12.257

用户被添加到用户注册表中，因此如果 SNMP v3 消息（TRAP v2 或 INFORM），陷阱代理可以正确处理它。

如果在您的场景中您需要使用其他用户，您可以手动创建它们然后插入到注册表中。

# ios - 是什么导致 Xcode IDE 中的“clang 失败，退出代码 255”？

> ID：14131396
> 
> 赞同：10
> 
> 时间：2013-01-03T00:28:19.147
> 
> 标签：ios, xcode

其他用户之前曾询问过“clang exit code 255”，例如在这篇文章中：

[Xcode没有编译任何项目？'clang 失败，退出代码 255'](https://stackoverflow.com/questions/8023563/xcode-not-compiling-any-project-clang-failed-with-exit-code-255)

我知道如何修复错误。这通常是这样做的：

*   清理项目
*   转到“窗口 > 管理器 > 项目 > 删除派生数据”
*   重启 Xcode
*   固定，就像魔术一样...

但是，我不知道是什么原因造成的，而且最近发生了很多（这令人沮丧，因为它很耗时）。

任何人都知道是什么导致了这个错误以及如何防止它发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-04T08:21:45.180

关闭并重新启动模拟器通常会清除此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T08:35:59.500

我认为当您在运行状态下重命名项目时也会发生这种情况，然后 XCode 会显示该项目现在丢失，并且会显示带有“关闭”和“重新保存”选项的警报。如果您选择关闭，那么您的派生数据将在路径中拥有旧名称。因此，当您下次尝试执行该项目时，它会引用旧路径并失败，因为在该路径中存在旧名称而不是新名称。因此，当您清除派生数据或重新启动模拟器时，缓存文件会被删除，并且它会像新副本一样运行。

# scala - 如何拦截 Play 2 + Scala 中的所有控制器请求？

> ID：14131398
> 
> 赞同：4
> 
> 时间：2013-01-03T00:28:28.957
> 
> 标签：scala, playframework

在 Play 2 的 Java 风格中，有[GlobalSettings.onRequest](http://www.playframework.org/documentation/2.0.4/JavaGlobal)，可用于拦截所有传入控制器的请求。但是在[等效的 Scala](http://www.playframework.org/documentation/2.0.4/ScalaGlobal)中，没有 onRequest 处理程序。

我怀疑这是因为 Java 中需要的动作委托逻辑在 Scala 中是不需要的，但这很烦人，因为我想在每个传入的控制器请求上运行一些代码。

有谁知道如何在 Scala + Play 2 应用程序中拦截所有控制器请求？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T01:33:47.840

[`def onRouteRequest (request: RequestHeader): Option[Handler]`](http://www.playframework.org/documentation/2.0.4/ScalaInterceptors)在您的[Global 对象](http://www.playframework.org/documentation/2.0.4/ScalaGlobal)中覆盖可能是您正在寻找的答案。

从 2.0.4 api 开始，它在收到 HTTP 请求时调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-09T16:06:17.790

您可以使用动作组合。来自 Play 2.4 文档（[https://www.playframework.com/documentation/2.4.x/ScalaActionsComposition](https://www.playframework.com/documentation/2.4.x/ScalaActionsComposition)）：

```
import play.api.mvc._

object LoggingAction extends ActionBuilder[Request] {
  def invokeBlock[A](request: Request[A], block: (Request[A]) => Future[Result]) = {
    Logger.info("Calling action")
    block(request)
  }
} 
```

然后在您的控制器中：

```
def index = LoggingAction {
  Ok("Hello World")
} 
```

当我需要为每个请求运行代码时，这就是我所做的。实际上，您可以通过使用或不使用自定义操作来控制执行哪些请求，因为您仍然可以这样做

```
def index = Action {
  Ok("Hello World")
} 
```

希望这对您有所帮助。

## 编辑

我刚刚读到您想要一个符合 2.0 的解决方案。这适用于 Play 2.0，这是文档：[https ://www.playframework.com/documentation/2.0.x/ScalaActionsComposition](https://www.playframework.com/documentation/2.0.x/ScalaActionsComposition)

# rabbitmq - 兔子 - 错误：mnesia_unexpectedly_running

> ID：14131399
> 
> 赞同：31
> 
> 时间：2013-01-03T00:28:36.307
> 
> 标签：rabbitmq, chef-infra

我正在尝试使用厨师集群兔子

这是我的错误。我关闭了第二个节点上的所有兔子。

```
rabbitmqctl join_cluster --ram rabbit@ip-10-158-xxx-xxx

Error: mnesia_unexpectedly_running 
```

所以..这是什么交易？我从[http://agiletesting.blogspot.com/2010/05/rabbitmq-clustering-in-ubuntu.html](http://agiletesting.blogspot.com/2010/05/rabbitmq-clustering-in-ubuntu.html)尝试了这个，它是为了删除 /var/lib/rabbitmq/mnesia。不去。它不在什么服务器上运行？全部？

谢谢

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-11-29T04:45:06.970

确保`sudo rabbitmqctl stop_app`在发出集群命令之前调用。这对我来说似乎是个问题。

然后确保你打电话`sudo rabbitmqctl start_app`重新开始:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-14T16:13:47.530

要指出@Itai Ganot 的一条**非常**`rabbitmqctl stop_app`重要的评论，它不是立即直观的：您需要在除一个节点之外的所有节点上运行。如果您`rabbitmqctl stop_app`在所有节点上运行，您将收到不同的消息：`Error: mnesia_not_running`.

简而言之：

*   `Error: mnesia_unexpectedly_running`意思是“你需要`rabbitmqctl stop_app`在这个节点上运行
*   `Error: mnesia_not_running`意思是“你需要`rabbitmqctl start_app`在你试图集群的节点上运行”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-03T20:44:00.807

您需要从尝试连接的节点复制 cookie

让我们以 2 个节点为例：rabbit@node1 和 rabbit@node2

1.  转到`rabbit@node1`并从 cat 复制 cookie`/var/lib/rabbitmq/.erlang.cookie`
2.  去`rabbit@node2`删除当前的cookie并粘贴新的。
3.  在同一节点上执行以下命令

    ```
    /usr/sbin/rabbitmqctl stop_app
    /usr/sbin/rabbitmqctl reset
    /usr/sbin/rabbitmqctl cluster rabbit@node1 
    ```

那应该这样做。

[此处](http://pearlin.info/?p=1672)记录了相同的过程

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-26T11:29:07.037

在尝试创建由两个 rabbitmq 服务器组成的集群时，我也收到了同样的错误。

据我所知，创建集群的实际过程与其他答案中描述的过程略有不同，但最终对我有用：

在你有两个或更多节点运行 rabbitmq-server 之后，选择一个服务器，这就是你不接触的那个 - 我们称之为 rabbitmaster，在所有其他节点中，按照以下步骤操作：

```
1\. Make sure the rabbitmq-server is not running.
2\. # su - rabbitmq
3\. $ rabbitmq-server -detached
4\. $ rabbitmqctl cluster_status
5\. $ rabbitmqctl stop_app
6\. $ rabbitmqctl join_cluster rabbit@rabbitmaster
7\. $ rabbitmqctl start_app 
```

现在您可以运行`rabbitmqctl cluster_status`并查看刚刚配置的节点和 rabbitmq 主节点。

更多信息可以在[RabbitMQ 官方网站](https://www.rabbitmq.com/clustering.html)上找到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T02:33:29.113

我不喜欢回答我自己的问题，但是聚集 rabbin usig chef 真的很痛苦。通过不将 -N 选项与引导程序一起使用解决了 rabbit 的问题。Rabbit 不喜欢更改主机名。

所以..按照兔子网站上的文档进行聚类按预期工作。如果您将 -N 选项与 chef 一起使用...将会出现主要问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-22T11:00:14.023

这意味着您尝试链接的当前节点上的应用程序正在运行。在将应用程序加入主节点之前停止当前节点上的应用程序。

`sudo rabbitmqctl stop_app` `rabbitmqctl join_cluster --ram rabbit@ip-10-158-xxx-xxx`. 然后 `rabbitmqctl start_app`。

还要确保主节点上的应用程序正在运行。否则你会得到`Error: mnesia_not_running`错误。

# opencv - OpenCV中拉普拉斯滤波器生成的图像对应的颜色是什么？

> ID：14131404
> 
> 赞同：1
> 
> 时间：2013-01-03T00:28:56.743
> 
> 标签：opencv

在 Sobel 算子中，颜色用于指示边缘方向：黄色表示 0 度，绿色表示 45 度，蓝色表示 90 度，红色表示 135 度。但是我不确定拉普拉斯过滤图像上每种颜色对应的是什么。

我想从拉普拉斯过滤图像中提取大约红色像素，这给了我一些有用的信息。虽然，我还不清楚它何时呈现红色像素，何时不呈现。

![原始图像](../Images/84b7367c15d5ddba9f0f599b9542d0a3.png)![拉普拉斯过滤后](../Images/4f40e90fea4655419fcb5a25217f5ff0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T06:39:35.643

Sobel 算子输出中的颜色与您提到的不同。如果您将任何过滤器（Sobel 或 Laplacian 或任何其他过滤器）应用于 3 通道图像，OpenCV 只会将过滤器独立应用于每个通道，然后组合结果。输出中的颜色只是每个通道中检测到的边缘的组合效果。

颜色边缘检测不是通过简单地将边缘检测滤波器应用于图像的每个通道来完成的。有专门的算法，例如 DiZenzo Gradients。

# php - 如何锁定其他网页

> ID：14131406
> 
> 赞同：7
> 
> 时间：2013-01-03T00:29:27.010
> 
> 标签：php, jquery, ajax

我有一个考试应用程序，用户必须在其中创建考试，他们必须通过这些页面：

*   create_session.php
*   QandATable.php
*   个人标记.php
*   惩罚.php
*   完成.php

现在我担心的是用户可以完成其中的一些页面，然后要么通过忽略其他页面而放弃创建考试，要么他们开始通过上面的一些页面创建考试，但随后能够继续上一页或前一页或通过输入其他即将出现的页面的 URL 跳过页面。

所以我的问题是，有没有一种方法可以阻止用户跳过已完成的页面或返回到以前的页面？换句话说，他们必须按照确切的顺序按照上面五页的确切步骤来创建考试。

例如，如果用户在 上，他们无法返回 create_session.php 页面，或者在成功提交`QandATable.php page`之前无法跳到其他页面？`QandATable.php`换句话说，锁定除当前页面之外的其他页面。一旦用户访问了该`complete.php`页面，考试就完成了，并且`create_session.php`可以从锁定中删除，因为那是第一页。

如果用户放弃了诸如 individualmarks.php 之类的页面，并且用户直接返回到 indivdualmarks.php 页面，那很好，但如果他们尝试访问另一个页面，我正在考虑发送提示框或其他东西类似的说法：

> 您当前已经有一个考试正在创建中，要继续创建当前考试，请单击此链接（指向当前页面用户的链接已打开）
> 
> 如果您想创建新考试，请单击此链接（链接到 create_session.php 页面）。

我知道我要问的不是很简单，但我不希望用户搞砸创建考试，除非他们按照正确的顺序执行每个步骤（每个页面），这样它就不会弄乱任何数据。有没有人有一个关于如何实现这一目标的简单示例？

我正在使用 IE、Chrome。Safari、火狐和 Opera

谢谢

**更新：**

```
<?php

session_start();

?>

    <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="stepsStyle.css">
        <title>Follow Steps</title>

        <script type="text/javascript">

//if user selects "Create New Assessment" Link, then use jquery/ajax below
//code below will access removesession.php where it will remove exam details which will be overwritten

$(function() {
    var link = $("#createLink");

    link.click(function() {
        $.ajax({
           url: "removesession.php",
           async: false,
           type: "POST",
           success: function() {
                window.location.href = link.attr("href");
           }
         });

         //cancels the links true action of navigation
         return false;
    });
);

</script>

        </head>
        <body>

<?php

$steps = array('create_session.php', 'QandATable.php', 'individualmarks.php', 'penalty.php', 'complete.php');

$latestStep = $_SESSION['latestStep'];
// Track $latestStep in either a session variable or the DB and retrieve accordingly
// $currentStep will be dependent upon the page you're on

$currentIdx = array_search($currentStep, $steps);
$latestIdx = array_search($latestStep, $steps);

if ($currentIdx - $latestIdx > 1 ) {
    ?>

//set up a div box to display message on wether use should contine or not
<div class="boxed">
  You already have an exam currently in creation, to continue with creating the current exam click on this link: <br/><a href="">Continue with Current Assessment</a>
<br/>
If you want to create a new exam then please click on this link: <br/><a href="create_session.php" id="createLink">Create New Assessment</a>
</div>

<?

} else {
    // let the user do the step
}

?> 
```

关于上面的代码有几个问题：

1.  变量应该`$currentStep`等于什么？
2.  如果用户想继续当前的考试，我如何链接到其当前页面？
3.  我应该将 else 语句留空以让用户执行该步骤吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:42:17.723

通过默默无闻的安全性确实是一种幼稚的方案：您应该始终假设您的 URL 是公开的。在这里，您需要一个*类似向导的*界面，它又是一个[有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)。假设您的系统已经有*用户*，您需要找到一个工作流引擎（或 FSM 实现，或自己开发一个简单的引擎）并跟踪每个流中的用户提交。

在每一页的开头你必须验证用户的*位置*，即你必须说当前*状态*的用户是否可以访问所请求的资源。如果他不能只是重定向他，否则显示请求的页面。

顺便说一句，您似乎正在从头开始构建您的应用程序。快速通道是使用框架，例如[CakePHP](http://cakephp.org/)。我建议使用 Cake，因为我刚刚发现[了这个不错的插件](https://github.com/burriko/cakephp-state-machine-behavior)（我自己从未使用过，但 API 非常好，而且 Cake 本身非常适合学习）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T00:49:43.790

我会在变量中跟踪最后完成的状态，并在列表中跟踪工作流。在每一页上，检查最后完成的状态是否大于或等于前面所需的步骤。这是假设您的工作流程是完全线性的。像这样的东西：

```
$steps = array('create', 'table', 'marks', 'penalty', 'complete');

// Track $latestStep in either a session variable or the DB and retrieve accordingly
// $currentStep will be dependent upon the page you're on

$currentIdx = array_search($currentStep, $steps);
$latestIdx = array_search($latestStep, $steps);

if ($currentIdx - $latestIdx > 1 ) {
    // show error message
} else {
    // let the user do the step
} 
```

**编辑：**回答问题：

**$currentStep 变量应该等于什么？**

这应该等于您所在的页面并匹配 $steps 中的值；看起来应该是当前页面的文件名。

**如果用户想继续当前的考试，我如何链接到其当前页面？**

如果用户在页面上，听起来好像您在询问如何重定向到正确的步骤。下一步应该是`$steps[$latestIdx + 1]`，例如最后一步之后的步骤。

**我应该将 else 语句留空以让用户执行该步骤吗？**

else 语句应包含您希望用户执行的所有代码。或者，如果您将其外部化，您可能应该使用返回值，如果他们可以执行该步骤，则返回 1，如果不能，则返回 0。然后在每个页面上，您将调用此函数，并根据返回值显示页面或显示错误。

# jquery - 将参数添加到父 url

> ID：14131413
> 
> 赞同：0
> 
> 时间：2013-01-03T00:30:43.370
> 
> 标签：jquery

我有一个页面，当单击特定的提示者时，我需要向该 url 添加参数。

这就是我所拥有的：

$(document).ready(function () { $("#Tipster").hide();

```
var qs = jQuery.parseQuerystring();

if (qs['tipster']) {
    currentTipster = parseInt(qs['tipster']);
    ShowTipster(currentTipster);

    if (qs['tipstertip']) {
        ShowTipsterTip(parseInt(qs['tipstertip']));
    }
}

if (qs['tipsterbio']) {
    currentTipster = parseInt(qs['tipsterbio']);
    ShowTipster(currentTipster); ShowTipsterBio();
}

$("#TipstersHomeContainer").css("display", "");
$("#TipsterContainer").css("display", ""); 
```

});

```
jQuery.extend({
  parseQuerystring: function(){
    var nvpair = {};
    var qs = window.location.search.replace('?', '');
    pairs = qs.split('&');
    $.each(pairs, function(i, v){
      var pair = v.split('=');
      nvpair[pair[0]] = pair[1];

});
return nvpair; 
```

} });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:47:47.683

这个问题就解决了。我在正确的卡车上，简单的变量拼写错误是问题

# reporting - Pentaho 报表输出远程执行

> ID：14131414
> 
> 赞同：1
> 
> 时间：2013-01-03T00:30:47.427
> 
> 标签：reporting, pentaho, kettle, data-integration

我有一个在 CentOS 机器 (osapp) 上运行的 pentaho BI 服务器，然后是 MySQL 数据库，在另一台 CentOS 机器 (osdb) 上运行具有存储库、暂存和数据仓库。我从我的 Windows PC 上运行 Spoon。我创建了一个转换来运行 Pentaho 报告，导出为 PDF 并通过电子邮件发送，每 8 小时自动一次。如果我在 Spoon 中运行转换，它会按预期运行，但是使用我在 BI 服务器 (osapp) 上设置的 carte 服务器会在 Pentaho 报告输出步骤中出现错误，并且没有日志。我看不到错误的详细信息。如果我使用 Pan.sh 运行它，是一样的，但我得到这样的输出：

```
sh pan.sh -rep=mitbirep -user=admin -pass=admin -trans="HighRisk Containers" -level=basic
INFO  02-01 18:56:06,187 - Pan - Logging is at level : Basic logging
INFO  02-01 18:56:06,188 - Pan - Start of run.
INFO  02-01 18:56:06,284 - RepositoriesMeta - Reading repositories XML file: /opt/pentaho/data-integration/repositories.xml
INFO  02-01 18:56:08,144 - HighRisk Containers - Dispatching started for transformation [HighRisk Containers]
INFO  02-01 18:56:08,241 - Data Grid - Finished processing (I=0, O=0, R=0, W=1, U=0, E=0)
INFO  02-01 18:56:08,594 - LibBase 1.2.2.13667 started.
INFO  02-01 18:56:08,840 - LibLoader 1.2.2.13667 started.
INFO  02-01 18:56:08,946 - LibFonts 1.2.3.13670 started.
INFO  02-01 18:56:09,008 - LibSerializer 1.2.2.13667 started.
INFO  02-01 18:56:09,169 - LibFormula 1.2.3.13667 started.
INFO  02-01 18:56:09,321 - LibFormat 1.2.3.13667 started.
INFO  02-01 18:56:09,384 - LibXML 1.2.2.13670 started.
INFO  02-01 18:56:09,439 - LibRepository 1.2.3.14252 started.
INFO  02-01 18:56:09,499 - LibDocBundle 1.2.3.14252 started.
WARN  02-01 18:56:10,312 - No configuration found. Configuring ehcache from ehcache-failsafe.xml  found in the classpath: jar:file:/opt/pentaho/data-integration/libext/reporting/ehcache-core-2.0.1.jar!/ehcache-failsafe.xml
INFO  02-01 18:56:12,674 - Completed font registration.
INFO  02-01 18:56:12,735 - Completed font registration.
INFO  02-01 18:56:12,797 - Completed font registration.
INFO  02-01 18:56:17,983 - Pentaho Reporting Engine Classic 3.8.2-GA.14313 started.
WARN  02-01 18:56:18,673 - Unknown tag <http://jfreereport.sourceforge.net/namespaces/datasources/sql:query-definitions>: Start to ignore this element and all of its childs.  [Location: Line=16 Column=27]
WARN  02-01 18:56:20,149 - No configuration found. Configuring ehcache from ehcache-failsafe.xml  found in the classpath: jar:file:/opt/pentaho/data-integration/libext/reporting/ehcache-core-2.0.1.jar!/ehcache-failsafe.xml
WARN  02-01 18:56:20,208 - Creating a new instance of CacheManager using the diskStorePath "/tmp" which is already used by an existing CacheManager.
The source of the configuration was net.sf.ehcache.config.generator.ConfigurationSource$DefaultConfigurationSource@463684dc.
The diskStore path for this CacheManager will be set to /tmp/ehcache_auto_created_1357170980208.
To avoid this warning consider using the CacheManager factory methods to create a singleton CacheManager or specifying a separate ehcache configuration (ehcache.xml) for each CacheManager instance.
INFO  02-01 18:56:20,326 - RepositoriesMeta - Reading repositories XML file: /opt/pentaho/data-integration/repositories.xml
ERROR 02-01 18:56:20,337 - 2132298740: Report processing failed.
ERROR 02-01 18:56:20,340 - Writing PDF failed.
org.pentaho.reporting.engine.classic.core.ReportDataFactoryException: Unable to load Kettle-Transformation
    at org.pentaho.reporting.engine.classic.extensions.datasources.kettle.KettleTransFromFileProducer.loadTransformation(KettleTransFromFileProducer.java:145)
    at org.pentaho.reporting.engine.classic.extensions.datasources.kettle.AbstractKettleTransformationProducer.performQuery(AbstractKettleTransformationProducer.java:313)
    at org.pentaho.reporting.engine.classic.extensions.datasources.kettle.KettleDataFactory.queryData(KettleDataFactory.java:134)
    at org.pentaho.reporting.engine.classic.core.CompoundDataFactory.queryStatic(CompoundDataFactory.java:135)
    at org.pentaho.reporting.engine.classic.core.cache.CachingDataFactory.queryInternal(CachingDataFactory.java:421)
    at org.pentaho.reporting.engine.classic.core.cache.CachingDataFactory.queryStatic(CachingDataFactory.java:183)
    at org.pentaho.reporting.engine.classic.core.CompoundDataFactory.queryStatic(CompoundDataFactory.java:130)
    at org.pentaho.reporting.engine.classic.core.CompoundDataFactory.queryData(CompoundDataFactory.java:85)
    at org.pentaho.reporting.engine.classic.core.states.datarow.ReportDataRow.createDataRow(ReportDataRow.java:97)
    at org.pentaho.reporting.engine.classic.core.states.datarow.DefaultFlowController.performQuery(DefaultFlowController.java:188)
    at org.pentaho.reporting.engine.classic.core.states.process.ProcessState.initializeForMasterReport(ProcessState.java:287)
    at org.pentaho.reporting.engine.classic.core.layout.output.AbstractReportProcessor.prepareReportProcessing(AbstractReportProcessor.java:469)
    at org.pentaho.reporting.engine.classic.core.layout.output.AbstractReportProcessor.processReport(AbstractReportProcessor.java:1522)
    at org.pentaho.reporting.engine.classic.core.modules.output.pageable.pdf.PdfReportUtil.createPDF(PdfReportUtil.java:122)
    at org.pentaho.reporting.engine.classic.core.modules.output.pageable.pdf.PdfReportUtil.createPDF(PdfReportUtil.java:70)
    at org.pentaho.reporting.engine.classic.core.modules.output.pageable.pdf.PdfReportUtil.createPDF(PdfReportUtil.java:154)
    at org.pentaho.di.trans.steps.pentahoreporting.PentahoReportingOutput.processReport(PentahoReportingOutput.java:219)
    at org.pentaho.di.trans.steps.pentahoreporting.PentahoReportingOutput.processRow(PentahoReportingOutput.java:108)
    at org.pentaho.di.trans.step.RunThread.run(RunThread.java:40)
    at java.lang.Thread.run(Thread.java:722)
ParentException:
org.pentaho.reporting.libraries.resourceloader.ResourceKeyCreationException: Unable to create key: No loader was able to handle the given key data: C:\Users\mocando.PANAMA\Documents\Infrastructure\ktrs\High Risk Containers.ktr
    at org.pentaho.reporting.libraries.resourceloader.DefaultResourceManagerBackend.createKey(DefaultResourceManagerBackend.java:76)
    at org.pentaho.reporting.libraries.docbundle.BundleResourceManagerBackend.createKey(BundleResourceManagerBackend.java:88)
    at org.pentaho.reporting.libraries.resourceloader.ResourceManager.createKey(ResourceManager.java:146)
    at org.pentaho.reporting.libraries.resourceloader.ResourceManager.createKey(ResourceManager.java:132)
    at org.pentaho.reporting.engine.classic.extensions.datasources.kettle.KettleTransFromFileProducer.createKey(KettleTransFromFileProducer.java:89)
    at org.pentaho.reporting.engine.classic.extensions.datasources.kettle.KettleTransFromFileProducer.loadTransformation(KettleTransFromFileProducer.java:124)
    at org.pentaho.reporting.engine.classic.extensions.datasources.kettle.AbstractKettleTransformationProducer.performQuery(AbstractKettleTransformationProducer.java:313)
    at org.pentaho.reporting.engine.classic.extensions.datasources.kettle.KettleDataFactory.queryData(KettleDataFactory.java:134)
    at org.pentaho.reporting.engine.classic.core.CompoundDataFactory.queryStatic(CompoundDataFactory.java:135)
    at org.pentaho.reporting.engine.classic.core.cache.CachingDataFactory.queryInternal(CachingDataFactory.java:421)
    at org.pentaho.reporting.engine.classic.core.cache.CachingDataFactory.queryStatic(CachingDataFactory.java:183)
    at org.pentaho.reporting.engine.classic.core.CompoundDataFactory.queryStatic(CompoundDataFactory.java:130)
    at org.pentaho.reporting.engine.classic.core.CompoundDataFactory.queryData(CompoundDataFactory.java:85)
    at org.pentaho.reporting.engine.classic.core.states.datarow.ReportDataRow.createDataRow(ReportDataRow.java:97)
    at org.pentaho.reporting.engine.classic.core.states.datarow.DefaultFlowController.performQuery(DefaultFlowController.java:188)
    at org.pentaho.reporting.engine.classic.core.states.process.ProcessState.initializeForMasterReport(ProcessState.java:287)
    at org.pentaho.reporting.engine.classic.core.layout.output.AbstractReportProcessor.prepareReportProcessing(AbstractReportProcessor.java:469)
    at org.pentaho.reporting.engine.classic.core.layout.output.AbstractReportProcessor.processReport(AbstractReportProcessor.java:1522)
    at org.pentaho.reporting.engine.classic.core.modules.output.pageable.pdf.PdfReportUtil.createPDF(PdfReportUtil.java:122)
    at org.pentaho.reporting.engine.classic.core.modules.output.pageable.pdf.PdfReportUtil.createPDF(PdfReportUtil.java:70)
    at org.pentaho.reporting.engine.classic.core.modules.output.pageable.pdf.PdfReportUtil.createPDF(PdfReportUtil.java:154)
    at org.pentaho.di.trans.steps.pentahoreporting.PentahoReportingOutput.processReport(PentahoReportingOutput.java:219)
    at org.pentaho.di.trans.steps.pentahoreporting.PentahoReportingOutput.processRow(PentahoReportingOutput.java:108)
    at org.pentaho.di.trans.step.RunThread.run(RunThread.java:40)
    at java.lang.Thread.run(Thread.java:722)
log4j:WARN No appenders could be found for logger (org.pentaho.di).
log4j:WARN Please initialize the log4j system properly.
[root@mitosapp data-integration]#
[root@mitosapp data-integration]# sh pan.sh -rep=mitbirep -user=admin -pass=admin -trans="CMD Schedule" -level=basic
INFO  02-01 19:07:42,067 - Pan - Logging is at level : Basic logging
INFO  02-01 19:07:42,069 - Pan - Start of run.
INFO  02-01 19:07:42,196 - RepositoriesMeta - Reading repositories XML file: /opt/pentaho/data-integration/repositories.xml
INFO  02-01 19:07:44,686 - CMD Schedule - Dispatching started for transformation [CMD Schedule]
INFO  02-01 19:07:44,792 - Data Grid - Finished processing (I=0, O=0, R=0, W=1, U=0, E=0)
INFO  02-01 19:07:45,275 - LibBase 1.2.2.13667 started.
INFO  02-01 19:07:45,606 - LibLoader 1.2.2.13667 started.
INFO  02-01 19:07:45,730 - LibFonts 1.2.3.13670 started.
INFO  02-01 19:07:45,811 - LibSerializer 1.2.2.13667 started.
INFO  02-01 19:07:46,019 - LibFormula 1.2.3.13667 started.
INFO  02-01 19:07:46,221 - LibFormat 1.2.3.13667 started.
INFO  02-01 19:07:46,311 - LibXML 1.2.2.13670 started.
INFO  02-01 19:07:46,405 - LibRepository 1.2.3.14252 started.
INFO  02-01 19:07:46,494 - LibDocBundle 1.2.3.14252 started.
WARN  02-01 19:07:47,561 - No configuration found. Configuring ehcache from ehcache-failsafe.xml  found in the classpath: jar:file:/opt/pentaho/data-integration/libext/reporting/ehcache-core-2.0.1.jar!/ehcache-failsafe.xml
INFO  02-01 19:07:51,016 - Completed font registration.
INFO  02-01 19:07:51,114 - Completed font registration.
INFO  02-01 19:07:51,234 - Completed font registration.
INFO  02-01 19:07:53,342 - New update(s) found: 2.4.7 [http://www.terracotta.org/confluence/display/release/Release+Notes+Ehcache+Core+2.4]. Please check http://ehcache.org for the latest version.
INFO  02-01 19:07:59,056 - Pentaho Reporting Engine Classic 3.8.2-GA.14313 started.
ERROR 02-01 19:07:59,068 - Pentaho Reporting Output - Unexpected error
ERROR 02-01 19:07:59,079 - Pentaho Reporting Output - org.pentaho.di.core.exception.KettleException:
There was an unexpected error processing report '/var/lib/tomcat6/webapps/ROOT/CMD_schedule.prpt' to produce file '/var/lib/tomcat6/webapps/ROOT/cmd_schedule.pdf' with processor: PDF.
Failed to open URL connection

    at org.pentaho.di.trans.steps.pentahoreporting.PentahoReportingOutput.processReport(PentahoReportingOutput.java:239)
    at org.pentaho.di.trans.steps.pentahoreporting.PentahoReportingOutput.processRow(PentahoReportingOutput.java:108)
    at org.pentaho.di.trans.step.RunThread.run(RunThread.java:40)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.pentaho.reporting.libraries.resourceloader.ResourceLoadingException: Failed to open URL connection
    at org.pentaho.reporting.libraries.resourceloader.loader.URLResourceData.getResourceAsStream(URLResourceData.java:128)
    at org.pentaho.reporting.libraries.resourceloader.loader.AbstractResourceData.getResource(AbstractResourceData.java:101)
    at org.pentaho.reporting.libraries.docbundle.bundleloader.ZipResourceBundleLoader.loadBundle(ZipResourceBundleLoader.java:81)
    at org.pentaho.reporting.libraries.resourceloader.DefaultResourceManagerBackend.loadResourceBundle(DefaultResourceManagerBackend.java:389)
    at org.pentaho.reporting.libraries.resourceloader.ResourceManager.loadResourceBundle(ResourceManager.java:262)
    at org.pentaho.reporting.libraries.resourceloader.ResourceManager.load(ResourceManager.java:284)
    at org.pentaho.reporting.libraries.resourceloader.ResourceManager.create(ResourceManager.java:405)
    at org.pentaho.reporting.libraries.resourceloader.ResourceManager.create(ResourceManager.java:370)
    at org.pentaho.reporting.libraries.resourceloader.ResourceManager.createDirectly(ResourceManager.java:207)
    at org.pentaho.di.trans.steps.pentahoreporting.PentahoReportingOutput.loadMasterReport(PentahoReportingOutput.java:144)
    at org.pentaho.di.trans.steps.pentahoreporting.PentahoReportingOutput.processReport(PentahoReportingOutput.java:160)
    ... 3 more

INFO  02-01 19:07:59,081 - Pentaho Reporting Output - Finished processing (I=0, O=0, R=1, W=0, U=0, E=1)
INFO  02-01 19:07:59,081 - CMD Schedule - CMD Schedule
INFO  02-01 19:07:59,081 - CMD Schedule - CMD Schedule
INFO  02-01 19:07:59,162 - Pan - Finished!
INFO  02-01 19:07:59,163 - Pan - Start=2013/01/02 19:07:42.070, Stop=2013/01/02 19:07:59.162
INFO  02-01 19:07:59,163 - Pan - Processing ended after 17 seconds. 
```

任何想法我怎么能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:49:30.470

问题似乎是 Pan 没有在您指向的存储库中找到您的转换。我对这种机制不是很熟悉，但是如果你只是需要一些工作，你可以使用指定的 Kettle 转换文件来启动 Pan 像这样

```
pan.sh -file='/path/to/my_transform.ktr' 
```

这通常是我执行转换的方式，并且效果很好。

# android - 通过PhoneGap Build从Android 4.x应用程序中的图像地图区域中删除高光

> ID：14131416
> 
> 赞同：4
> 
> 时间：2013-01-03T00:31:02.917
> 
> 标签：android, css, cordova, imagemap, android-4.0-ice-cream-sandwich

在推动图像的图像映射区域时，我已经尝试了所有尝试移除高光的方法。我一次又一次地搜索谷歌，并添加了我能找到的所有 CSS 代码，希望它会有所帮助.. 但似乎没有。

我正在谈论的一个例子： ![安卓平板电脑](../Images/69f949b18606a38af40cc55d94da2df8.png)

我已经添加了：

```
 -webkit-user-modify: read-write-plaintext-only; 
 border:none; 
 outline: 0; 
 -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
 -khtml-user-select: none; 
 -o-user-select: none;
 -moz-user-select: none;
 -webkit-user-select: none;
 user-select: none;

 * {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
cursor: none !important; 
-webkit-user-modify: read-write-plaintext-only;
-khtml-user-select: none;
    -o-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
outline:none;
border: none;
 }

 img{
    -khtml-user-select: none;
    -o-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
-webkit-user-modify: read-write-plaintext-only;
outline:none;
border: none;
border-style: none;
  }

 body, textarea:focus, input:focus, area:focus{
    outline:none;
    border: none;
    -webkit-tap-highlight-color: rgba(255, 255, 255, 0); 
    -khtml-user-select: none;
    -o-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    -webkit-user-modify: read-write-plaintext-only;
}

a{
   outline:none !important;
   border: none !important;
}

a img
{
    border:none;
    outline:none;
}

area{
outline:none;
border: none;
-webkit-tap-highlight-color: rgba(255, 255, 255, 0); 
-khtml-user-select: none;
    -o-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    -webkit-user-modify: read-write-plaintext-only;
}

#map {
outline:none;
border: none;
-webkit-tap-highlight-color: rgba(255, 255, 255, 0); 
-khtml-user-select: none;
    -o-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    -webkit-user-modify: read-write-plaintext-only;
}

 <img height="1024" src="img/MM.png" usemap="#MM_map" width="768" hidefocus="true">
 <area coords="35,116,349,225" href="#HULU" id="HULU_id" onclick="$('#HULU').click();" shape="rect" style="border: none;" onfocus="blur();"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T08:15:32.930

我可以防止这种情况的唯一方法是捕获 ontouchend 事件并通过在处理程序上返回 false 来防止默认浏览器行为。

使用 jQuery：

```
$("map area").on("touchend", function() {
   return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T18:35:07.110

简单的方法。证明。甚至现在，在 Android cordova 应用程序中再次使用了这个。

```
img[usemap], map area {
     outline: none;
} 
```

请享用

# sqlite - 如何逐步遍历 SQLite 索引中的每个条目

> ID：14131419
> 
> 赞同：0
> 
> 时间：2013-01-03T00:31:13.473
> 
> 标签：sqlite

我正在研究一个 SQLite DB 表，其中包含“名字”、“姓氏”字段和由（姓氏，给定）形成的索引。主索引只是一个整数名称 ID。我想找到以搜索参数（字符串）开头的第一个姓氏，

```
SELECT Given, Surname FROM NameTable WHERE Surname>'C' LIMIT 1 
```

然后通过 Surname+Given 索引向前或向后一步，一次一行。我已阅读 SQLite“滚动光标”[文章](http://www.sqlite.org/cvstrac/wiki?p=ScrollingCursor)，但该解决方案不太适合我的程序结构。保存最近检索到的姓氏，然后查询小于这个姓氏的姓氏将不起作用，因为它可能会跳过最近名字之前但具有相同姓氏的几个名字。

由于这是基于一个简单的索引，因此应该可以单步执行该索引。是否可以直接引用索引的 ROWID（而不是表本身）？例如，假设您刚刚检索到与索引的第 1234 行对应的记录，并希望返回，您将如何完成这样的事情：

```
SELECT Given, Surname FROM NameTable WHERE ROWID<1234 (I realize this ROWID will refer to the table, not the index) 
```

该表将包含以下条目：

```
史密斯，安倍
史密斯，巴尼
史密斯，玛丽
史密斯，迈克
...
```

我认为我不能使用准备/步骤方法，因为在滚动之间可能会有很多针对数据库的查询。

作为替代方案，如何创建连接 Surname 和 Given 的搜索参数？我可以用它作为占位符。

在此先感谢，并为成为 SQL 新手而道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:22:15.067

首先，您不想要“索引的rowid”，因为那是无稽之谈；索引在这种意义上没有 rowid，并且您不会对它们进行搜索（相反，它们用于加速对表的搜索）。您需要该行的 rowid，并且可以与 Given 和 Surname 列同时获得它。获得 ROWID 后，您可以通过查找 ROWID 大于给定（前一个）的第一行来获取下一行，并且该行也与其他条件匹配。这将是一个相当有效的查询（或者至少不会比原来的查询差多少）。

如果事情变得非常复杂，请将相关数据复制到临时表中并对其进行分页。完成初始查询后，您会发现速度更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:38:48.500

连接字符串称为“连接”。SQLite 中的连接运算符是“||”。这是将多列连接成一列的示例。

```
select
  Given || " " || Surname as "Full Name"
from
  NameTable; 
```

如果要为每一行保留唯一标识符，还可以选择（隐式）“ROWID”列。还可以选择单个名称列、聚合列和“ROWID”列来获得完整的数据集。

```
select
  ROWID,
  Given,
  Surname,
  Given || " " || Surname as "Full Name"
from
  NameTable; 
```

关于搜索的问题涉及更多，因为我不清楚您要完成什么。此外，在用户输入搜索条件的情况下，可以以许多不同的方式提供输入，例如部分或完整的名字或姓氏、部分或完整的名字和姓氏、给定和姓氏的顺序颠倒等。（复杂的搜索）。

因此，根据您允许输入的方式，您可以以不同的方式进行搜索。最简单的方法是使用“like”运算符。根据数据集的大小，您可能能够创建一个虚拟表，将 Given 和 Surname 列连接成单个列，并使用该列进行类似比较。或者，您可以使用“OR”运算符来允许匹配 Given 或 Surname 列。

您可能还想知道 SQLite 支持全文搜索引擎。 [http://www.sqlite.org/fts3.html](http://www.sqlite.org/fts3.html)

# jquery - 如何隐藏一张桌子并以漂亮的动画方式显示另一张桌子？

> ID：14131421
> 
> 赞同：0
> 
> 时间：2013-01-03T00:31:18.527
> 
> 标签：jquery, html, css

我的页面上有几个表格，但我只显示其中三个，当我单击下一步时，ID 最低的表格消失，另一个隐藏的表格出现。

当我单击上一个时，最高 ID 消失并出现具有较低 ID 的隐藏表。

我的CSS：

```
table.invisible{ display: none } 
```

我的html：

```
<button id="next"></button><button id="prev"></button>
<table id="1" class="visible" >...</table>
<table id="2" class="visible" >...</table>
<table id="3" class="visible" >...</table>
<table id="4" class="invisible" >...</table>
<table id="5" class="invisible" >...</table>
<table id="6" class="invisible" >...</table> 
```

我的 JS：

```
$("#next").click(function(){
    $(lowest_visible_id).removeClass('visible');
    $(lowest_visible_id).addClass('invisible');

    $(highest_visible_id+1).removeClass('invisible');
    $(highest_visible_id+1).addClass('visible');
});

$("#prev").click(function(){
    $(highest_visible_id).removeClass('visible');
    $(highest_visible_id).addClass('invisible');

    $(lowest_visible_id-1).removeClass('invisible');
    $(lowest_visible_id-1).addClass('visible');
}); 
```

一切正常。但它以非常简单的方式工作 - 一张桌子隐藏，另一张显示，就是这样 - 你能给我一些建议如何让它看起来更好吗？（我想使用 jquery，但我已经尝试过糟糕的效果:)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:00:05.513

你考虑过 CSS 过渡吗？我在以下方面取得了很好的成功：

```
.hidden {
  opacity: 0;
  width: 0;
  height: 0;
  transition: opacity 0.3s ease-out 0.001s, width 0 ease-out 0.3s, height 0.3s ease-out 0.3s;
}

.visible {
  opacity: 1;
  transition: opacity 0.3s ease-out 0.1s, width 0.001s ease-out 0.001s, height 0.001s ease-out 0.001s;
} 
```

这表示：

*   立即为不透明度设置动画（淡入/淡出）
*   在将宽度和高度更改为零之前等待淡出（以避免用户交互）

如果这不是你的一杯茶，还有无限的其他选择：

[http://www.css3maker.com/css3-transition.html](http://www.css3maker.com/css3-transition.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:00:32.187

您可以使用[**jQuery UI switchClass()**](http://jqueryui.com/switchClass/)：

> **摘要**
> 为所有匹配元素集添加和删除指定的类，同时为所有样式更改设置动画。
> 
> **方法签名**
> .switchClass(removeClassName, addClassName [, duration ] [, easing ] [, complete ])

例如，要同时使表 1 可见和表 2 不可见（假设它们都处于相反的状态开始）：

```
// Switches table 1 from visible to invisible over a period of 1 second.
$("table#1").switchClass("visible", "invisible", 1000);

// Switches table 2 from invisible to visible over a period of 1 second.
$("table#2").switchClass("invisible", "visible", 1000); 
```

为了获得更大的效果，您可以使用方法、`easing`参数甚至`callback`参数来链接类切换，以确保在第一个完成后启动，类似于：

```
// Switches table 1 from visible to invisible and once it completed, table 2 will switch from invisible to visible.
$("table#1").switchClass("visible", "invisible", 1000, function(){
    $("table#2").switchClass("invisible", "visible", 1000);
}); 
```

有关所有参数详细信息和示例，请参阅[**API 文档**](http://api.jqueryui.com/switchClass/)。

使用您现有的代码，您可以实现`switchClass()`类似于以下内容：

```
$("#next").click(function(){
    $(lowest_visible_id).switchClass('visible', 'invisible', 1000);
    $(highest_visible_id+1).switchClass('invisible', 'visible', 1000);
});

$("#prev").click(function(){
    $(highest_visible_id).switchClass('visible', 'invisible', 1000);
    $(lowest_visible_id-1).switchClass('invisible', 'visible', 1000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:29:56.490

诸如此类的东西呢...

$('#next').click(函数(){

$('#table1').fadeOut(1000, function() {

$('#table2').fadeIn(1000); });

});

只是一个想法......它可以很容易地通过变量进行参数化/抽象......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T02:28:22.973

动画表格实际上是不可能的，但您可以将表格包裹在可以轻松动画并获得所需效果的东西中。

jQuery 确实内置了一些不错的效果，并且浏览器支持也很好。这是一个非常简单的 jQuery 方法来为您的表格设置动画，其中包含一些将表格包装在 div 中，然后为 div 设置动画的技巧。

```
$("#next").click(function(){
    $(lowest_visible_id).wrap("<div />").parent()
        .slideUp(function(){
               $(lowest_visible_id).unwrap().removeClass("visible").addClass("invisible");
      }); 

    $(highest_visible_id+1).fadeIn().removeClass("invisible").addClass("visible");
}); 
```

这只是概念证明。这是一个为下一个按钮显示它的小提琴。[http://jsfiddle.net/ydquw/4/](http://jsfiddle.net/ydquw/4/) 上一个按钮类似，但您可以对顶部元素使用 slideDown()，在底部元素使用 fadeOut()。

# c++ - 虚拟，怎么用？

> ID：14131425
> 
> 赞同：0
> 
> 时间：2013-01-03T00:31:40.373
> 
> 标签：c++, oop, inheritance, virtual

```
class a
{
    public:
        a(int);    
        virtual ~a();
        virtual void print();
        int getNumber()
    private:
        int number;
};

class b : public a
{
    public:
        b(int);
        virtual ~b();
};

class c : public b
{
    public:
        c(int);
        virtual ~c();
        virtual void print();
}; 
```

这些是代表 cpp 文件的标头。我在每个适当的 cpp 文件中实现了所有方法。我使用了这段代码，它工作得很好，尽管我想知道 b 类是否也应该实现打印（即使是这样：print(){}），因为在我看来它的编程更好。那么合适的方法是什么？实施（即使没有必要）还是不实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:34:02.127

面向对象编程中继承的全部意义在于您可以依赖您不想重写的方法的超类实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:53:27.310

您应该只编写将被子类重载的函数。如果子类没有专门化给定的行为，那么在子类中编写父函数的副本将是不好的做法。这不仅会造成浪费并且可能令人困惑，而且还可能在以后的某个时候导致错误。

考虑一下：我称之为 Monkey 的父类和我称之为 Tarzan 的子类。在 Monkey 类中，我将为 Swing() 定义一个函数。

现在，由于 Tarzan 是 Monkey 的衍生产品，并且学会了像 Monkey 一样在树上摆动，因此无需编写 Tarzan 自己版本的 Swing 函数。但是，假设我确实写了它只是为了“完整”。现在，如果我需要更改猴子摆动的方式，我有 2 个例程要更新：一个用于 Monkey 类，另一个用于 Tarzan。更糟糕的是，如果我确实改变了猴子的挥杆方式而*忘记*在泰山中进行相同的更改，泰山将不再像猴子一样挥杆，这将是出乎意料的并且可能是错误的。

结论：只在子类函数中编写代码，其中子类需要对已经为父类定义的内容进行专门化。

# vb.net - reg_expand_sz 键错误地重定向到错误的程序文件夹

> ID：14131426
> 
> 赞同：1
> 
> 时间：2013-01-03T00:31:42.033
> 
> 标签：vb.net

我在这里遇到了一个非常愚蠢的文件重定向问题，似乎找不到解决方案。我在 VB.net 2010 中编写了一个程序。我将其设置为使用 .net Framework 4 和 anyCPU 进行编译。我正在使用 32 位视图枚举 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run 键，然后检查路径是否存在。在我达到 REG_EXPAND_SZ 值之前，一切都很好。例如，如果我在以下路径中使用 file.exists：%programfiles%\Hewlett-Packard\HP Remote Solution\HP_Remote_Solution.exe，它会说找不到文件。当我看到路径扩展为什么时，我看到它是 c:\Program Files\Hewlett-Packard\HP Remote Solution\HP_Remote_Solution.exe，即使它实际上位于 Program Files (x86) 目录中。所以问题是我如何让 %ProgramFiles% 显示 x86 目录，而不是 64 位目录？这是我的一些代码。

```
 If Environment.Is64BitOperatingSystem = True Then
        '64-BIT OS, HKLM, 32-BIT KEY
        Dim fileName
        Dim rbkey = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, RegistryView.Registry32)
        Dim rkey = rbkey.OpenSubKey("SOFTWARE\Microsoft\Windows\CurrentVersion\Run")
        If Not rkey Is Nothing Then
            For Each s As String In rkey.GetValueNames
                If s <> "" Then
                    fileName = parsePath(rkey.GetValue(s)) 'parsePath will parse out the swithes
                    If File.Exists(fileName) Then
                        MsgBox(fileName & " exists")
                    Else
                        MsgBox(fileName & " not exists")
                    End If
                End If
            Next
        End If
    End If 
```

# javascript - 填充多个文本框后如何自动取消选中复选框？

> ID：14131429
> 
> 赞同：0
> 
> 时间：2013-01-03T00:32:25.007
> 
> 标签：javascript, textbox, jsfiddle

我试过用这个

```
<input type="text" name="commentID" id="commentID" onkeyup="userTyped('skipID', this)"/>
<input type="checkbox" name="skipID" value="N" id="skipID" checked="checked"  /> 
```

和 javascript

```
function userTyped(commen, e){
if(e.value.length > 0){
document.getElementById(commen).checked=false;
}else{
document.getElementById(commen).checked=true;
}}​ 
```

它适用于JSfiddle，[“EXAMPLE”](http://jsfiddle.net/MAVLy/3)，但我似乎无法让它在dreamweaver上运行，并且只有当我使用一个文本框时，我希望只有在三个文本框被填充后才自动取消选中该复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:44:43.840

这里[http://jsfiddle.net/MAVLy/7/](http://jsfiddle.net/MAVLy/7/)是一个使用带有三个文本框的 jQuery 重写的函数。为了便于阅读，我将文本框长度放入变量中，但您可以省略它。

HTML：

```
<input type="text" name="textbox1" id="textbox1" class="enable" />
<input type="text" name="textbox2" id="textbox2" class="enable" />
<input type="text" name="textbox3" id="textbox3" class="enable" />
<input type="checkbox" name="skipID" value="N" id="skipID" checked="checked"  /> 
```

查询：

```
$(function(){
  $('input.enable').keyup(function(){
    var t1 = $('#textbox1').val().length;
    var t2 = $('#textbox2').val().length;
    var t3 = $('#textbox3').val().length;
   if (t1==0 || t2==0 || t3==0) $('#skipID').attr('checked', true);
   else $('#skipID').attr('checked', false);
  });        
}); 
```

替代解决方案。这个适用于无限数量的类文本框`enable`

```
$(function(){
  $('input.enable').keyup(function(){
    var checked = false;
    $('input.enable').each(function(){
       if ($(this).val().length == 0) checked = true;
    });
    $('#skipID').attr('checked', checked);
  });        
}); 
```

另一个jsfiddle：http: [//jsfiddle.net/MAVLy/8/](http://jsfiddle.net/MAVLy/8/)

# excel - 使用宏生成图形

> ID：14131433
> 
> 赞同：-3
> 
> 时间：2013-01-03T00:32:51.037
> 
> 标签：excel, vba

我目前正在使用这个宏来生成我从另一张纸中获取价值的图表。当未检测到 sheet1 在 A 列中没有任何输入时，如何通过停止添加系列来简化这一点。

```
 ActiveSheet.ChartObjects("CH 1").Activate
        ActiveChart.SeriesCollection.NewSeries.MarkerStyle = False
        ActiveChart.SeriesCollection(1).Name = "='Sheet1'!$A$2"
        ActiveChart.SeriesCollection(1).Values = "='data'!$B$2:$B$400"
        ActiveChart.SeriesCollection.NewSeries
        ActiveChart.SeriesCollection(2).Name = "='Sheet1'!$A$3"
        ActiveChart.SeriesCollection(2).Values = "='data (2)'!$B$2:$B$400"
        ActiveChart.SeriesCollection.NewSeries
        ActiveChart.SeriesCollection(3).Name = "='Sheet1'!$A$4"
        ActiveChart.SeriesCollection(3).Values = "='data (3)'!$B$2:$B$400"
        ActiveChart.SeriesCollection.NewSeries
        ActiveChart.SeriesCollection(4).Name = "='Sheet1'!$A$5"
        ActiveChart.SeriesCollection(4).Values = "='data (4)'!$B$2:$B$400"
        ActiveChart.SeriesCollection.NewSeries
        ActiveChart.SeriesCollection(5).Name = "='Sheet1'!$A$6"
        ActiveChart.SeriesCollection(5).Values = "='data (5)'!$B$2:$B$400"
        ActiveChart.SeriesCollection.NewSeries
        ActiveChart.SeriesCollection(6).Name = "='Sheet1'!$A$7"
        ActiveChart.SeriesCollection(6).Values = "='data (6)'!$B$2:$B$400"
        ActiveChart.SeriesCollection.NewSeries
        ActiveChart.SeriesCollection(7).Name = "='Sheet1'!$A$8"
        ActiveChart.SeriesCollection(7).Values = "='data (7)'!$B$2:$B$400"
        ActiveChart.SeriesCollection.NewSeries
        ActiveChart.SeriesCollection(8).Name = "='Sheet1'!$A$9"
        ActiveChart.SeriesCollection(8).Values = "='data (8)'!$B$2:$B$400"
        ActiveChart.SeriesCollection.NewSeries
        ActiveChart.SeriesCollection(9).Name = "='Sheet1'!$A$10"
        ActiveChart.SeriesCollection(9).Values = "='data (9)'!$B$2:$B$400"
        ActiveChart.SeriesCollection.NewSeries
        ActiveChart.SeriesCollection(10).Name = "='Sheet1'!$A$11"
        ActiveChart.SeriesCollection(10).Values = "='data (10)'!$B$2:$B$400" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:45:59.290

尝试这样的事情。你的问题有点不连贯，所以如果我误解了你的意思，请发表评论。

```
Dim wks as Worksheet
Set wks = Sheets("Sheet1")

If WorksheetFunction.Count(wks.Columns(1)) <> 0 Then

    'insert your code here

End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T00:32:59.717

如果您注意到我重复此（见下文）行以在我的图表中添加更多值/系列。我如何在那里与您的代码集成。

```
 ActiveChart.SeriesCollection(1).Name = "='Sheet1'!$A$2"
    ActiveChart.SeriesCollection(1).Values = "='data'!$B$2:$B$400"
    ActiveChart.SeriesCollection.NewSeries
    ActiveChart.SeriesCollection(2).Name = "='Sheet1'!$A$3"
    ActiveChart.SeriesCollection(2).Values = "='data (2)'!$B$2:$B$400" 
```

# android - 如何将java文件中数据库中的所有字段发送到另一个java文件？

> ID：14131434
> 
> 赞同：0
> 
> 时间：2013-01-03T00:32:51.030
> 
> 标签：android, database, sqlite, spinner, bundle

我有一个像这样的简单汽车数据库：

```
db.addCar(new Car("Alfa Romeo","Giulietta","1.4 TB Distinctive","Benzine","1.4","120","2012","5","1465","4351","54000"));
        db.addCar(new Car("Audi","A6","2.0 TDi","Diesel","2.0","170","2012","6","1455","4915","183600"));
        db.addCar(new Car("BMW","7 Series","7.30 ID Comfort","Benzine","3.0","245","2012","6","1450","4835","528000"));
        db.addCar(new Car("Chevrolet","Captiva","2.0 LT AT","Diesel","2.0","163","2012","6","1756","4673","79950"));
        db.addCar(new Car("Citroen","C5","1.6 HDi Comfort","Diesel","1.6","112","2012","5","1458","4779","67430")); 
```

我正在使用 3 个微调器来选择前三列（品牌、型号、类型），我也可以使用这种方法将它们发送到我的结果 xml 页面

```
b3.setOnTouchListener(new View.OnTouchListener(){
             @Override
                public boolean onTouch(View comparePage2, MotionEvent event) {

                 Intent intent = new Intent(getApplicationContext(), Compare2.class);
                    //Create a bundle object
                    Bundle car = new Bundle();

                    //Inserts a String value into the mapping of this Bundle
                    car.putString("make", spinner_make.getSelectedItem().toString());
                    car.putString("model", spinner_model.getSelectedItem().toString());
                    car.putString("type", spinner_type.getSelectedItem().toString());
                    car.putString("make2", spinner_make2.getSelectedItem().toString());
                    car.putString("model2", spinner_model2.getSelectedItem().toString());
                    car.putString("type2", spinner_type2.getSelectedItem().toString());

                    //Add the bundle to the intent.
                    intent.putExtras(car);

                    //start the DisplayActivity
                    startActivity(intent);

                return false;
                }

private void loadSpinnerData() {
        DatabaseHandler db = new DatabaseHandler(getApplicationContext());

        List <String> makers = db.getAllMakers();
        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, makers);

        List <String> models = db.getAllModels();
        ArrayAdapter<String> dataAdapter2 = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, models);

        List <String> types = db.getAllTypes();
        ArrayAdapter<String> dataAdapter3 = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, types);

        List <String> makers2 = db.getAllMakers();
        ArrayAdapter<String> dataAdapter4 = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, makers2);

        List <String> models2 = db.getAllModels();
        ArrayAdapter<String> dataAdapter5 = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, models2);

        List <String> types2 = db.getAllTypes();
        ArrayAdapter<String> dataAdapter6 = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, types2);

        spinner_make.getContext();

// Drop down layout style - list view with radio button
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        dataAdapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

// attaching data adapter to spinner
        spinner_make.setAdapter(dataAdapter);
        spinner_model.setAdapter(dataAdapter2);
        spinner_type.setAdapter(dataAdapter3);
        spinner_make2.setAdapter(dataAdapter4);
        spinner_model2.setAdapter(dataAdapter5);
        spinner_type2.setAdapter(dataAdapter6);

} 
```

但是我如何使用相同的方法将其他字段发送到该 xml 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:40:44.810

简短的回答是：您需要`Activity`从数据库中检索要发送到下一个的所有数据。话虽这么说，我可能会做出以下更改来实现这一点：

**1\. 从数据库中获取所有（必需的）数据**

在您的`DatabaseHandler`类中，通过执行您的第一个代码片段的逆操作，创建一个返回所有汽车的方法。或者至少在 next 中返回您需要的所有数据`Activity`。我假设您将在这里返回所有数据：

```
Cursor c = // TODO: implement: query database for car data
List<Car> cars = new ArrayList<Car>();
for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
    cars.add(new Car(...)); // add every car
} 
```

**2.有`Car`工具`Serializable`。**

将类的定义更改`Car`为扩展`Serializable`。这应该没问题，假设该类只是简单字段的集合：

```
public class Car implements Serializable {
    private static final long serialVersionUID = 1234567890L;

    // constructor(s), fields, getters, setters below
} 
```

**3.从微调器中获取选定的汽车**

为了这个示例，我将在步骤 1 中使用所选位置从原始集合中获取汽车并将其放入`Intent`（无需为此创建单独`Bundle`的）：

```
Intent intent = new Intent(getApplicationContext(), Compare2.class);
Car selectedCar = cars.get(spinner.getSelectedItemPosition());
intent.putSerializableExtra("selected_car", selectedCar); 
```

您可以对多辆单车甚至整个集合执行此操作（前提是该集合也实现了`Serializable`; ie `ArrayList`）。在接收端，您可以执行与上述相反的操作来检索数据：

```
Car selectedCar = (Car) getIntent().getSerializableExtra("selected_car"); 
```

* * *

现在，您的代码片段表明您将在下一个比较不同汽车的规格`Activity`。如果是这种情况，那么您可能不必对上述内容进行太多更改。我会考虑更改适配器以从`cars`集合中获取它们的数据，而不是再次查询数据库以获取您已经拥有的单列数据 - 这应该是一个简单的更改。

如果您正在进行某种过滤，基于对不同微调器的选择，那么您需要确保返回汽车所有数据的方法考虑到这种选择。我会让你自己弄清楚这些细节。

# c# - 如何将常量字符串引用传递给函数

> ID：14131435
> 
> 赞同：3
> 
> 时间：2013-01-03T00:32:53.587
> 
> 标签：c#, string, performance, constants, ref

这篇文章并不是真正关于下面代码中的错误，我自己可以想象几十种方法来解决它，它主要与简单、优雅和性能有关！

我必须做一个非常简单的文本解析器，像这样：

```
string ParseWord(ref string Line, ref int Pos) {
    // Inspect Line from Pos, increment Pos and return next Word
}

void ParseText(string[] Lines) {
    foreach (string Line in Lines) {
        int Pos = 0;
        string Word;
        while ((Word = ParseWord(ref Line, ref Pos)) != null) {
            // Do something with Word
        }
    }
} 
```

不幸的是，它不能那样工作，因为“foreach”变量“Line”是通过引用传递的，这是不允许的。

正如您现在可能已经注意到的那样，我通常是一名 C++ 程序员。我的想法是，将字符串作为引用传递会更快，因为不必每次都复制它。

第一个问题：这个假设在 c# 中仍然有效吗？

第二个问题：如何传递对该“行”的引用并仍然使用“foreach” - c# 中没有“const”

第三个问题：我是否在想一些不合适的 C++ 方式以及我们在 C# 中会做不同的事情吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T00:37:37.300

不，这不是一个有效的假设。默认情况下，C# 通过*引用*传递字符串，这意味着指针在后台有效地传递。

`ref`使用or传递字符串的唯一原因`out`是被调用的方法是否需要修改字符串并且该修改需要反映在调用方法中。因为字符串是不可变的，所以在目标方法中“更改”字符串实际上会创建一个新字符串，不会影响最初传递的字符串。在这种情况下，使用`ref`or`out`将导致调用方法中的指针被更新为指向新的、修改后的字符串。

如果您不更改字符串，则只需正常传递字符串即可，它非常有效。我会推荐诸如[C# Concepts: Value vs Reference Types](http://www.albahari.com/valuevsreftypes.aspx)之类的文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T00:37:41.600

1.  将字符串作为变量传递时不要复制字符串，因为它们是引用类型。你只是传递它的参考。

2.  我不认为你可以使用`foreach`循环来满足你的需要，但你可以只使用`for`循环。

    ```
    for (int index = 0; index < Lines.Length; index++)
    {
        string Line = Lines[index];
        int Pos = 0;
        string Word;
        while ((Word = ParseWord(ref Line, ref Pos)) != null)
        {
            // Do something with Word
        }
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T00:38:28.603

为什么不只[拆分](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)每一行：

```
void ParseText(string[] Lines)
{
    foreach (string Line in Lines)
    {
        foreach (string word in Line.Split(' '))
        {
            // Do something with Word
        }
    }
} 
```

# silverlight - 银光轨迹球

> ID：14131436
> 
> 赞同：1
> 
> 时间：2013-01-03T00:32:56.017
> 
> 标签：silverlight, toolkit, trackball

几天来，我一直在寻找一种方法来在静态位置上显示 silverlight 工具包系列的值。我发现了很多使用 Telerik 的示例，但是我没有那个软件包：|

我正在寻找的一个很好的例子是：http: [//finance.yahoo.com/echarts?s=DELL](http://finance.yahoo.com/echarts?s=DELL)

当您将鼠标移到图形上时，它会在交点上显示圆圈，并在静态位置显示其值。在 Telerik 中也称为“轨迹球”。就像在 yahoo 网站上一样，我有 2 个图表（在彼此下方），我想在静态位置显示其中的lineseries 值。有谁知道我在哪里可以做到这一点，例如通过示例或提示使用什么 XAML 代码，不使用 Telerik、visibox 或任何其他昂贵的包？

谢谢！

# java - 在操作栏中显示 listfragment

> ID：14131437
> 
> 赞同：0
> 
> 时间：2013-01-03T00:32:56.210
> 
> 标签：java, android, eclipse

我正在开发我的第一个 android 应用程序，如果这是一个简单的问题，请原谅我。该应用程序当前有五个选项卡（使用片段制作），我目前正在尝试在第一个选项卡中设置 ListFragment。

在我的 MainActivity 类中，我有代码：

```
public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    if (tab.getPosition() == 0) {
        TopRatedListFragment topRatedListFragment = new TopRatedListFragment();
        getSupportFragmentManager().beginTransaction().replace(R.id.container, topRatedListFragment).commit();
    } else {
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, tab.getPosition() + 1);
        fragment.setArguments(args);
        getSupportFragmentManager().beginTransaction().replace(R.id.container, fragment).commit();
    } 
```

现在这适用于我的“DummySectionFragment”。但是我的 TopRatedListFragment 扩展了 ListFragment 而不仅仅是 Fragment ......所以上面的代码给我带来了问题。

该行：

```
getSupportFragmentManager().beginTransaction().replace(R.id.container, topRatedListFragment).commit(); 
```

是绘制错误并说 .replace 方法不喜欢 topRatedListedFragment 参数，因为它是 ListFragment 而不是常规 Fragment。

我应该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:35:35.557

最有可能的是，您的导入和/或类定义搞砸了。

`Fragment`、`ListFragment`和有两种实现方式`FragmentTransaction`。一套在`android.app`. 另一组在`android.support.v4.app`. 这些不兼容。如果您使用`FragmentActivity`Android 支持包的片段反向移植，则使用后一对。

我的猜测是你`FragmentTransaction`和你`ListFragment`来自不同的包，一个`android.app`来自`android.support.v4.app`. 如果是这样，您需要解决这个问题，让两者都使用相同的包，无论哪个适合您的情况。

# c++ - 64 位窗口 - 我需要使用 IMAGE_NT_HEADERS64 吗？

> ID：14131443
> 
> 赞同：1
> 
> 时间：2013-01-03T00:33:18.783
> 
> 标签：c++, windows, visual-studio, 64-bit, 32bit-64bit

我正在尝试在 Windows 64 环境中读取某些进程的 PE 标头，并且由于我的代码仅通过读取 32 位和 64 位可执行文件的 IMAGE_NT_HEADERS 结构来工作，我想知道：我是否需要编写类似的东西

```
if executable is 64 bit
 use IMAGE_NT_HEADERS64
else
 use IMAGE_NT_HEADERS 
```

? 我的代码似乎只使用 IMAGE_NT_HEADERS 来处理 64 位和 32 位进程，我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:54:22.087

显然，区别在于OptionalHeader的某些字段。例如 64 位版本的 ImageBase 是 64 位大小。如果您的代码在（包括）之后不使用任何字段`ImageBase`- 您的代码将通过测试。

# three.js - 未捕获的类型错误：对象# 没有方法“getShaderPrecisionFormat”

> ID：14131447
> 
> 赞同：4
> 
> 时间：2013-01-03T00:33:33.383
> 
> 标签：three.js, webgl

我正在将 ThreeJS 用于我在工作中开发的应用程序，特别是 WebGL 渲染器。大约一周半前它运行良好，但是当我今天回来工作时，尝试在 Chrome 中运行我的应用程序时出现此错误：

未捕获的类型错误：对象 # 没有方法 'getShaderPrecisionFormat'

我在 Chrome 中调试了我的应用程序，看起来 WebGLRenderingContext 没有方法“getShaderPrecisionFormat”；关于可能发生什么导致这种情况的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:18:06.963

这应该在 r56+ 中修复。（可能在 r55 中，但我没有要检查的版本）

见[https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L7478](https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L7478)

```
 if ( _gl.getShaderPrecisionFormat === undefined ) {

            _gl.getShaderPrecisionFormat = function() { 

                return {
                    "rangeMin"  : 1,
                    "rangeMax"  : 1,
                    "precision" : 1
                };

            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T19:31:36.857

你确定你没有覆盖 renderer.context 因为否则你将不得不显示一些代码，因为我现在还没有得到任何线索？

# maven - slf4j 1.7.x 的 Maven 仓库

> ID：14131450
> 
> 赞同：0
> 
> 时间：2013-01-03T00:34:12.330
> 
> 标签：maven, slf4j

我正在尝试使用 slf4j 1.7.0（用于 vararg 支持），但由于在 repo1.maven.org 中找不到它，因此出现了 maven 错误。据我所知，1.6.6 似乎是最新的版本。

我可以使用另一个公共且受信任的存储库来获取它吗？

另外，1.7.0 是在 9 月份发布的，所以已经好几个月了。发布到 repo1 的一般等待时间是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:42:33.493

从我看到的 slf4j 1.7.x 在 org.slf4j 组下的中央（例如：repo1.maven.org）上可用：[http ://search.maven.org/#browse%7C1114494198](http://search.maven.org/#browse%7C1114494198)

如果您仍然无法获得它，我怀疑：

*   你有一个糟糕的 Maven 工件坐标（旧的 slf4j 工件在 'slf4j' 组而不是 'org.slf4j' 下）
*   您的组合 maven 设置以某种方式将 repo1.maven.org 镜像到一个不是最新的位置（检查 mvn:help Effective-settings）
*   或者你的maven缓存机制有问题（例如：你的内部公司maven repo缓存没有正确同步/更新）

# javascript - 通过 jQuery 滑块搜索 Youtube 视频

> ID：14131451
> 
> 赞同：1
> 
> 时间：2013-01-03T00:34:24.533
> 
> 标签：javascript, jquery, youtube-javascript-api

我在一个页面中嵌入了一个 Youtube 播放器，我正在`player.getDuration()`使用`player.getCurrentTime() 检测总秒数和当前秒数。我已经构建了一个对应于 Youtube 播放秒数的 jQuery 滑块，如下所示：

```
 $('#progressbar').slider({
        value: 0,
        orientation: "horizontal",
        range: "min",
        min:0,
        max:songDuration,
        animate: true,
        change: function(event, seekto){
            //We got the volume.value -> Set it to the video;
            player.seekTo(seekto.value);
        }
    }); 
```

其中 songDuration 表示当前歌曲的总时长。同样在变化函数seekto上表示在视频中寻找的秒数；

另外，我有这段代码：

```
 setInterval(function(){
            $("#progressbar").slider({max: player.getDuration()});
            $("#progressbar").slider({value: player.getCurrentTime()});
            $('.current_elapsed').html(getPropperDuration(Math.floor(player.getCurrentTime())));
            },1000); 
```

用播放的秒数从头到尾更新滑块；
问题是播放器会重复一小部分一秒，或者重复与 setInterval 函数每 1 秒更新 Youtube 播放器秒数相同的秒数，因此，播放器会重复一小部分一秒。

是否有任何解决方法可以使用相同的滑块在视频中搜索并表示视频中的总经过时间？

# javascript - JQuery复选框状态不起作用

> ID：14131453
> 
> 赞同：0
> 
> 时间：2013-01-03T00:34:49.283
> 
> 标签：javascript, jquery

谁能告诉我为什么这条线不起作用？（我正在尝试访问复选框的 value 属性并将其写入我的变量，否则如果它没有检查空字符串）

```
var ri_ort = $('#ri_ort').attr('checked')?$('#ri_ort').val():''; 
```

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:36:14.710

尝试`is`：

```
var ri_ort = $('#ri_ort').is(':checked') ? $('#ri_ort').val() : ''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T00:43:04.153

`checked`在 jQuery 中，您可以`disabled`使用以下`prop`方法检查属性：

```
$('#ri_ort').prop('checked'); // returns true or false 
```

`prop`也可用于设置值：

```
$('#ri_ort').prop('checked', false); // removes the `checked` attribute 
```

这是一个例子：http: [//jsfiddle.net/BeKa4/1/](http://jsfiddle.net/BeKa4/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T00:44:29.413

从 jQuery 1.6 开始，`attr`方法不返回布尔值，它返回`undefined`，你应该使用`prop`or`is`方法来代替：

```
var $elem = $('#ri_ort');
var ri_ort = $elem.prop('checked') ? $elem.val(): ''; 
```

或者，如果您想收听更改事件：

```
$(function() {
   var ri_ort = '';
   $('#ri_ort').change(function(){
       ri_ort = this.checked ? this.value : '';
   })
}) 
```

# c++ - Visual Studio 2012 __cplusplus 和 C++ 11

> ID：14131454
> 
> 赞同：21
> 
> 时间：2013-01-03T00:34:56.520
> 
> 标签：c++, visual-studio, visual-c++, c++11

任何人都知道为什么在我的 Visual Studio 2012 c++ 项目中`__cplusplus`被定义为`199711L`（这是“旧”C++）？`201103L`既然 VS 2012 现在支持 C++ 11 ，难道不应该这么说吗？即使我包含 C++ 11 头文件，它仍然是错误定义的。有什么线索吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-03T00:40:16.860

这已提交给 Microsoft 进行审核：

[预定义宏 __cplusplus 的值仍然是 199711L](https://docs.microsoft.com/en-us/cpp/build/reference/zc-cplusplus?view=vs-2019)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-03T00:46:23.453

这实际上取决于您期望该宏的实际含义。201103L 是否应该表示“此编译器完全支持编译器和库中的所有 C++11？” 它应该意味着“这个编译器支持一些合理的 C++11 子集吗？” 是否应该表示“此编译器以某种方式、形状或形式支持*至少一个C++11 功能？”*

真正取决于每个实现来决定何时增加版本号。Visual Studio 与 Clang 和 GCC 不同，它没有单独的 C++03 编译模式；它提供了一组特定的功能，这就是它所提供的。

通常，单个宏不是决定何时使用某些功能的有用工具。[Boost.Config](http://www.boost.org/doc/libs/1_52_0/libs/config/doc/html/boost_config/boost_macro_reference.html#boost_config.boost_macro_reference.macros_that_describe_c__11_features_not_supported)是一种更可靠的机制。标准委员会正在研究在标准的未来版本中[处理这个问题的方法。](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3435.htm)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-06T13:45:28.410

我和尼科尔在这件事上。测试的唯一原因`__cplusplus >= 201103L`是检查您是否可以使用新功能。如果编译器只实现了一半的新特性但使用 的新值`__cplusplus`，它将无法编译许多受保护的有效 C++11 代码`__cplusplus >= 201103L`（我有一些使用`thread_local`和`*this`引用）。另一方面，如果它保留`199711L`，它将使用安全的 C++98 代码，这仍然可以。这样可能会错过一些优化，但您仍然可以使用其他方法来检测特定功能是否可用（编译器版本、编译器特定宏，如`__GXX_EXPERIMENTAL_CXX0X__`、为您检查编译器宏的 boost 宏等）。重要的是安全的默认值。

切换到 __cplusplus 的新值有 2 个可能的原因：

*   您的编译器**完全**支持 C++11（或足够接近，总会有错误）
*   这是编译器的实验模式，不应在生产中使用，通常缺少的功能会被视为错误。

据我所知，所有切换的编译器都属于第二类。

我相信一些编译器供应商对改变 __cplusplus 的值（最容易实现的 C++11 特性，良好的宣传）过于热情，而且有些更保守是好的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-12T10:22:57.987

截至 2018 年 4 月，MSVC 2017 现在可以正确报告宏，但前提是使用特定开关 (/Zc:__cplusplus)。这是因为许多旧代码依赖于检测 MSVC 编译器的宏的旧值。来源：[https ://blogs.msdn.microsoft.com/vcblog/2018/04/09/msvc-now-correctly-reports-__cplusplus/](https://blogs.msdn.microsoft.com/vcblog/2018/04/09/msvc-now-correctly-reports-__cplusplus/)

希望将来，一旦全世界的人们更新了他们的代码，MS 将默认正确报告宏。

# c# - 从其他两个文件创建一个文件

> ID：14131455
> 
> 赞同：0
> 
> 时间：2013-01-03T00:34:56.773
> 
> 标签：c#, text, streamwriter, compareto

到目前为止我有这样的代码：

```
private void button3_Click(object sender, EventArgs e)
{
    label1.Visible = true;
    label2.Visible = true;
    var items = File.ReadAllLines("updated database folder/Resellers_Inventory.txt").
    Skip(1).
    Select(s =>
    {
        var strings = s.Split('|');
        if (strings.Length != 2) throw new FormatException();
        return new { Code = strings[0], Stock = Convert.ToInt32(strings[1]) };
    }).
    ToArray();

    var compareTo = File.ReadAllLines("old database folder/ProductAll.txt").
                Skip(1).
                Select(s =>
                {
                    var strings = s.Split(',');
                    if (strings.Length != 6) throw new FormatException();
                    return new { Path = strings[2].Trim('"'), Id = Convert.ToInt32(strings[3]), Name = strings[4].Trim('"'), Code = strings[5].Trim('"'), Stock = Convert.ToInt32(strings[6]) };
                }).
                ToArray();

    string foldername = DateTime.Now.ToString("yyyy--MM--dd");
    Directory.CreateDirectory("Update file of " + foldername);
    string UpdeitoFailas = @"Update file of " + foldername + "/update.txt";

    foreach (var item in items.Where(i => compareTo.Any(i2 => i.Code == i2.Code)))
    {
        if ((File.Exists(UpdeitoFailas)) && i.Stock != i2.Stock)
        {
            using (StreamWriter sw = new StreamWriter(UpdeitoFailas))
            {
                sw.Write("Product, " + i2.Path + ", " + i2.Id + ", " + i2.Name + ", " + i2.Code + ", " + i.Stock);
             }
         }
     } 
```

文件“Resellers_Inventory.txt”是这样的（包含数十万行）：

```
Order Code|Stock
ACREPAIR|1031
AF813|18
AF823|12
AFCOB11|21
AFCS300|33
AFCS3000|1
AFEM4|5
AFOMNI|17
AFOX2|-3
AFOX3|-3
AFROD|28
AFSENSOR|50
AFUF21|24
AN00001|-1
AN00002|21
AN00003|4
AN00004|4
AN00005|9
... 
```

ProductAll.txt 文件还包含数十万行，如下所示：

```
Action,CategoryPath,ID,Name,Code,Stock
"Product","Home > Opto-electronics > LED > Standard LED, Multicolour",2226,"KINGBRIGHT LED, 3MM, HE-RED/GRN L-93WEGW","SC07621",202
"Product","Home > Resistors > Fixed",2228,"VISHAY DRALORIC RESISTOR, 0402, 5%, 10K0 CRCW040210K0JNEAIF","RE06211",0
"Product","Home > Resistors > Fixed",2229,"VISHAY DRALORIC RESISTOR, 0402, 5%, 3R90 CRCW04023R90JNEAIF","RE06212",0
"Product","Home > Resistors > Fixed",2230,"VISHAY DRALORIC RESISTOR, 0402, 5%, 2R70 CRCW04022R70JNEAIF","RE06220",25
"Product","Home > Resistors > Fixed",2231,"VISHAY DRALORIC RESISTOR, 0402, 5%, 33R0 CRCW040233R0JNEAIF","RE06221",0
"Product","Home > Resistors > Fixed",2232,"VISHAY DRALORIC RESISTOR, 0402, 5%, 100R CRCW0402100RJNEAIF","RE06226",0
"Product","Home > IC's > Comparators",2234,"STMICROELECTRONICS IC, COMPARATOR DUAL, DIP8, 393 LM393N","SC10207",57
"Product","Home > IC's > Amplifiers > Operational",2237,"STMICROELECTRONICS OP AMP, QUAD JFET, DIP14 TL084CN","SC07929",82
"Product","Home > IC's > Amplifiers > Audio Power",2239,"NATIONAL SEMICONDUCTOR AMP, AUDIO 0.25W, DIP8, 386 LM386N-1","SC08430",83
"Product","Home > IC's > Microcontrollers",2241,"MICROCHIP 8BIT FLASH MCU, 12F675, DIP8 PIC12F675-I/P","ACREPAIR",16
... 
```

基本上我想做的是创建第三个文件，它看起来像 ProductAll.txt，但会有所不同：如果 Resellers_Inventory.txt 中的库存与 ProductAll.txt 不同，那么我们在 update.txt 中写一行看起来与 ProductAll.txt 中的行相同，但库存值来自 Resellers_Inventory.txt。如果库存值相同，我们跳过这一行并且不写入新的第三个文件。匹配行（库存）是通过匹配两个文件中相同的项目代码来实现的。

目前我收到这样的错误：

```
Error   1   The name 'i' does not exist in the current context  C:\Users\Tutis\Documents\Visual Studio 2008\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 90  53  WindowsFormsApplication1
Error   2   The name 'i2' does not exist in the current context C:\Users\Tutis\Documents\Visual Studio 2008\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 90  64  WindowsFormsApplication1
Error   3   The name 'i2' does not exist in the current context C:\Users\Tutis\Documents\Visual Studio 2008\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 94  48  WindowsFormsApplication1
Error   4   The name 'i2' does not exist in the current context C:\Users\Tutis\Documents\Visual Studio 2008\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 94  65  WindowsFormsApplication1
Error   5   The name 'i2' does not exist in the current context C:\Users\Tutis\Documents\Visual Studio 2008\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 94  80  WindowsFormsApplication1
Error   6   The name 'i2' does not exist in the current context C:\Users\Tutis\Documents\Visual Studio 2008\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 94  97  WindowsFormsApplication1
Error   7   The name 'i' does not exist in the current context  C:\Users\Tutis\Documents\Visual Studio 2008\Projects\WindowsFormsApplication1\WindowsFormsApplication1\Form1.cs 94  114 WindowsFormsApplication1 
```

但即使没有这个，我也不知道如何写入新的 update.txt 文件符号**“**这些行看起来与 ProductAll.txt 中的相同，只是具有其他股票价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:05:58.763

很难看到代码中发生了什么，但您可以使用它`File.WriteAllLines`来创建结果文件。

我昨天使用我对您问题的回答来证明它可以正常工作，因为我无法让您发布的示例正常工作。

```
 private void UpdateProducts()
    {
        ThreadPool.QueueUserWorkItem((o) =>
        {
            DateTime start = DateTime.Now;
            List<string> updatedProducts = new List<string>();
            List<string[]> stock = new List<string[]>(File.ReadAllLines("G:\\Stock.txt").Select(line => line.Split('|')));
            List<string> products = new List<string>(File.ReadAllLines("G:\\Products.txt"));
            updatedProducts.Add(products[0]);
            SetProgress(products.Count);
            foreach (var item in products)
            {
                if (stock.Any(s => item.Contains(s[0]) && !item.EndsWith(s[1])))
                {
                    string[] p = item.Split(',');
                    int productStockIndex = Array.IndexOf(p, p.Last());
                    int productNameIndex = productStockIndex - 1;
                    string productName = p[productNameIndex].Replace("\"", "");
                    p[productStockIndex] = stock.First(stk => stk[0] == productName)[1];
                    updatedProducts.Add(string.Join(",", p));
                }
                UpdateProgress(updatedProducts.Count);
            }
            File.WriteAllLines(@"G:\Results.txt", updatedProducts.ToArray());
        });
    }

    private void SetProgress(int maxValue)
    {
        base.Invoke((Action)delegate 
        {
            progressBar1.Maximum = maxValue;
        });
    }

    private void UpdateProgress(int value)
    {
        base.Invoke((Action)delegate
        {
            progressBar1.Value = value;
        });
    }

    private void button1_Click(object sender, EventArgs e)
    {
        UpdateProducts();
    } 
```

祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:46:39.720

它似乎不适用于您在“ProductAll.txt”中的数据

您需要拆分 CSV 中以逗号作为分隔符的行，但**保留**双引号之间的逗号。

String.Split() 不是该工作的好选择。[您可以使用这个](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)免费的库来阅读 CSV 文件，而不是尝试重新发明轮子。

使用它唯一需要做的就是添加对 LumenWorks.Framework.IO.dll 的引用

这是一个示例控制台项目，它使用“ **Fast CSV Reader** ”库和一个**字典**来加快您在*代码*字段上的查找速度。

```
using LumenWorks.Framework.IO.Csv;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;

namespace TestProgram
{
    class Product
    {
        public string Action { get; set; }
        public string CategoryPath { get; set; }
        public int ID { get; set; }
        public string Name { get; set; }
        public string Code { get; set; }
        public int Stock { get; set; }
    }

    static class Extensions
    {
        public static string DoubleQuoteString(this string str)
        {
            return '"' + str + '"';
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var resellersInventoryQuery = from lineTokens in ReadCsvLines("data\\Resellers_Inventory.txt", true, '|')
                                          select new { Code = lineTokens[0], Stock = Convert.ToInt32(lineTokens[1]) };

            Dictionary<string, int> orderStock = resellersInventoryQuery.ToDictionary(kvp => kvp.Code, kvp => kvp.Stock);

            var allProductsQuery = from lineTokens in ReadCsvLines("data\\ProductAll.txt", true, ',')
                                   let product = ParseProduct(lineTokens)
                                   select product;

            using (StreamWriter sw = File.CreateText("data\\updated.txt"))
            {
                foreach (var product in allProductsQuery)
                {
                    if (orderStock.ContainsKey(product.Code))
                    {
                        int newStockValue = orderStock[product.Code];
                        if (newStockValue != product.Stock)
                        {
                            product.Stock = orderStock[product.Code];
                            sw.WriteLine(ToString(product));
                        }
                    }
                }
            }

        }

        static IEnumerable<string[]> ReadCsvLines(string file, bool hasHeader, char delimiter)
        {
            using (CsvReader csr = new CsvReader(new StreamReader(file), hasHeader, delimiter))
            {
                int fieldCount = csr.FieldCount;
                while (csr.ReadNextRecord())
                {
                    List<string> lineTokens = new List<string>();
                    for (int i = 0; i < fieldCount; i++)
                        lineTokens.Add(csr[i]);
                    yield return lineTokens.ToArray();
                }
            }
        }

        static Product ParseProduct(string[] tokens)
        {
            Product product = new Product();

            product.Action = tokens[0];
            product.CategoryPath = tokens[1];
            product.ID = Convert.ToInt32(tokens[2]);
            product.Name = tokens[3];
            product.Code = tokens[4];
            product.Stock = Convert.ToInt32(tokens[5]);

            return product;
        }

        static string ToString(Product product)
        {
            const char SEPERATOR = ',';

            StringBuilder sb = new StringBuilder();
            sb.Append(product.Action.DoubleQuoteString()); sb.Append(SEPERATOR);
            sb.Append(product.CategoryPath.DoubleQuoteString()); sb.Append(SEPERATOR);
            sb.Append(product.ID); sb.Append(SEPERATOR);
            sb.Append(product.Name.DoubleQuoteString()); sb.Append(SEPERATOR);
            sb.Append(product.Code.DoubleQuoteString()); sb.Append(SEPERATOR);
            sb.Append(product.Stock);

            return sb.ToString();
        }
    }
} 
```

您可以根据需要将类放到不同的文件中。例如，将 Product 类移动到它自己的文件中。当然还要添加一些错误处理。

希望这可以帮助。

# c - 我真的应该使用make吗？

> ID：14131458
> 
> 赞同：7
> 
> 时间：2013-01-03T00:35:27.577
> 
> 标签：c, embedded, makefile

在某个时候，我和一位同事从网上抓取了一个“示例”makefile，用于为 xmega 芯片构建我们的嵌入式代码。我们发现这种体验非常令人沮丧。我们俩都不是专家，充其量是新手。我们通过偶尔的调整/调整来获得。我们花费数小时阅读制造手册并投掷飞镖以尝试进行更严重的更改。

通常，当我们构建时，我们总是从一个干净的开始。因为自动依赖生成似乎不能可靠地工作，而且我们刚刚了解到这种方式更安全。由于它是一个嵌入式项目，在一个小型处理器上，编译实际上很顺利。眨眼间就完成了，这使我在这里提出了真正的问题：

*如果我不使用 make 进行任何类型的依赖管理并利用增量构建，那么使用它而不是简单的 shell 脚本有什么真正意义吗？*

我对编写 C 代码、python 和优秀的 bash 脚本更有信心。今天最新的挫折是试图将一些与 FreeRTOS 相关的源文件移动到子目录中。make 对我们来说唯一真正的优势是它在 OSX 上安装，并且 vi 和 QtCreator 和 XCode 具有与我们的 makefile 集成的一些能力（但我可以制作一个非常小的 makefile 在这里桥接）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T01:26:24.827

Make 是用于构建软件的古老专家系统。它仍然被大量使用，所以值得学习。您可能很幸运目前拥有一个几乎可以立即构建的项目，但是，根据我的经验，这是**例外**而不是规则。

鉴于依赖跟踪和动作推断是 Make 的目的，将其用作批处理系统是零收益，并且还会干扰您学习如何使用该工具 (Make)。

从您的帖子看来，您在使用 Make 与子目录时发生了冲突。虽然它可能无法解决您当前的问题，但本文：[Recursive Make Considered Harmful](http://aegis.sourceforge.net/auug97.pdf)可能有助于解释这种情况，并让您深入了解 Make 本身的操作。

Make 不会自动生成依赖项。您会在网上找到许多关于如何为 GNU Make 自动生成依赖项的资源。我不确定 OSX 是使用 GNU Make 还是 BSD Make（或者即使 BSD 变体仍然存在）。如果是后者（BSD），我相信您可以找到如何为 BSD 变体自动生成依赖项的方法。

我在这篇文章中推断出的更具存在性的问题是：当它不能为我的项目带来直接好处时，学习这个旧工具是否有价值？

作为回答，我会说：你的小项目是学习这个工具的绝佳机会。如果您面临增量编译真正节省时间的项目，那么痛苦阈值肯定会高得多。

还有许多其他构建系统可以替代 Make，例如：[Jam](http://www.perforce.com/documentation/jam)、[SCons](http://www.scons.org/)、[Rake](http://rake.rubyforge.org/)，或者充当元生成文件生成器：[CMake](http://cmake.org/)，一些 IDE。替换的绝对数量表明许多人认为 Make 不足（或者在某些情况下可能只是令人不快）。

但是，在可预见的未来，对 Make 有一点了解可能会让你受益匪浅。它也可能是了解构建系统如何工作以及与规则生成和依赖跟踪相关的问题的第一步（或最明显的一步）。

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T01:19:55.190

几乎任何不是单个编译单元的重要 C 程序都会在其内部具有依赖关系，并且几乎所有都依赖于系统库。

除非您打算编写一个每次都执行干净构建的脚本，否则需要某种依赖管理工具来保持您的工作流程健全。

`make`是规范的选择，如果您首先找到一种自动生成依赖规则的方法，则非常适合工作。

QT 构建系统本身并没有与 Makefile 集成，它是根据项目的更高级别描述创建它们。 `QTCreator`是围绕此过程提供 GUI 的众多工具之一。当您从内部编译时，`QTCreator`它实际上`Makefile`是调用的结果。您还可以使用`qmake`生成 XCode 和 Visual Studio 工作区文件。

对于嵌入式项目，QT 构建系统实际上是一个相当不错的选择，即使不使用 QT，因为它相对容易设置来处理交叉编译。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T11:35:17.010

这是我不久前给自己提出的一个问题。我个人使用 python 脚本来编译我的 AVR 代码（[链接](https://github.com/shladnik/regulacija)）。我不是制造专家，但我确实有一些经验。我仍然觉得这很令人沮丧，而且对于 uC 的需求毫无价值，除非你已经是专家了。

并不是说我会鼓励任何人这样做，但是没有什么可以阻止您在 Python（Perl、Ruby、Bash...）中实现相同的依赖检查，甚至可能更强大。我相信这只是语言选择或您觉得舒服的问题。make 只是一种编程语言，对于初学者来说可能看起来很晦涩。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T11:48:21.460

我个人不会直接使用 make，几乎不管你的系统有多大（这意味着在极少数情况下，我可以在极小的系统上使用它）。我会使用为您生成生成文件的工具。当然，您会丢失安装在股票操作系统上的部分，但会摆脱很多头痛。

我个人建议你看看 cmake 和 autotools。我个人更喜欢 cmake，发现它很棒，而 autotools 消除了一些令人头疼的问题，但增加了一些新问题。我发现其中任何一个都比makefile更好。

Cmake 还有一个优点是它更跨平台，可以创建makefile、visual studio 文件、code::block 文件等等。它还支持完整的源外构建，这意味着您可以创建一个 _build 文件夹，然后从那里构建。然后将所有生成的文件放入 _build 文件夹，而不是污染源代码树。

编辑：回答你的问题：我会学习基本的制作文件，以了解它的作用。但后来我会切换。所以我会学习make，但不会使用它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-03T01:07:08.390

除非您使用的是 IDE，否则 make 确实是此类事情的事实上的工具，除非您想在这条路上走得更远并使用 automake 或类似工具。我认为这对你的情况来说太过分了。

自动依赖生成有点棘手，但您通常可以在网络上找到有效的配方。我不确定你有什么具体问题，但也许这值得一个单独的问题。

bash 脚本可能足以满足您的需求；如果这是真的，那就去吧。鉴于您更熟悉 Python，您可能还想查看类似[SCons](http://www.scons.org/)的内容。

我已经完成了相当多的 Makefile 工作，但我正在转向 Rake。我发现 Ruby 的强大功能比 make 更能满足我的需求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-26T20:45:08.273

如果您每次都进行完整构建，那么每次使用 make 运行完全相同的命令序列不会给您带来真正的优势。但是，make 是一个非常强大的系统，而避开它是错误的。Make 加起来比你希望用自定义的“python 构建脚本”拼凑起来的要多得多。

1.  即使*这个*项目足够小，可以从头开始快速构建，你很快就会解决更大的问题。使用简单的用例比使用复杂的用例更容易学习 Make。您说“自动依赖生成似乎无法可靠地工作”：如果您正确定义依赖关系，则 make*非常*可靠。所以你的设置一定有错误（下面有更多内容）。

2.  即使您总是从头开始构建，Make 也很有用：您可以使用 Makefile 作为所有与构建相关的命令的容器，而不是手工制作一堆小的构建脚本，所有命令都由相同的符号变量控制：例如，如果你有一个变量`ALLSOURCE`，你可以将它与创建 zipfile、ctags 索引等的伪目标一起使用（也`make clean`可以这样工作）。如果您为所有内容编写单独的批处理脚本，那么随着项目的发展，您将争先恐后地更新它们——而且它们会无缘无故地弄乱您的目录。

但你说，你不能让依赖项可靠地工作。我怀疑从别人的示例脚本开始是一个错误：它可能做了太多你不需要的事情，而且不完全理解。从一个干净的 Makefile 开始，为您生成的二进制文件添加目标，然后编写您自己的依赖项。把事情简单化; 如果您的项目非常容易构建，以至于您甚至考虑编写自己的脚本，那么为它编写一个 makefile 应该很容易。如果您遇到困难，请在此处提出具体问题。

# html - 将静态大小的网站适合移动浏览器

> ID：14131460
> 
> 赞同：0
> 
> 时间：2013-01-03T00:35:37.027
> 
> 标签：html, css, meta-tags

我有一个固定宽度为 900px 的 mainwrapper div 容器。如何缩放此包装器，使其在宽度约为 300 像素的移动浏览器中加载时完全可见。我不想更改 900px，我希望有一种方法可以使用元标记来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:42:13.213

有。利用：

`<meta name="viewport" content="initial-scale=1.0, width=900">`

如果要完全防止缩放，请改用：

`<meta name="viewport" content="initial-scale=1.0, width=900, maximum-scale=1.0, user-scalable=no">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T05:33:07.357

我正在使用此代码，可以在除 Opera Android 浏览器之外的所有浏览器上正常工作。在 Opera 中，我的网站浮动，但宽度被包裹。

```
<meta content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no' name='viewport'/> 
```

# python - Python修复损坏的编码

> ID：14131461
> 
> 赞同：2
> 
> 时间：2013-01-03T00:36:13.233
> 
> 标签：python, encoding, repair, chardet

我有一个带有 django 播放列表管理的小型 icecast2 家庭服务器。另外，我有很多编码损坏的 mp3。首先，我试图在 python 上找到一些编码修复工具，但没有找到任何对我有用的东西（[python-ftfy](https://github.com/LuminosoInsight/python-ftfy)，[nltk](http://nltk.org/) - 它不支持 unicode 输入）。

我`beets`像瑞士刀一样使用 pip 来解析媒体标签，它非常简单，而且我认为，对于大多数情况来说，它几乎就足够了。

对于我使用的字符集检测`chardet`，但它在短字符串上有一些问题，所以我对遇到的编码使用了一些强制调整。我想，如果编码错误，那么所有标签都是错误的，所以我先收集所有使用过的编码。

```
class MostFrequentEncoding(dict):
    def from_attrs(self, obj):
        for attr in dir(obj):
            val = getattr(obj, attr)
            self.feed(val)

    def feed(self, obj):
        if obj and isinstance(obj, basestring):
            guess = chardet.detect(obj)
            encoding = guess['encoding']

            if encoding not in self:
                self.setdefault(encoding, {'confidence': 0.0, 'total': 0})

            self[encoding]['confidence'] += guess['confidence']
            self[encoding]['total'] += 1

    def encodings(self):
        return sorted(self, key=lambda x: self[x]['total'], reverse=True) 
```

以下是调整：

```
charset_coercing = {
    ('MacCyrillic', 'windows-1251'): {'MacCyrillic': -0.1},
} 
```

这意味着，如果我们同时拥有`MacCyrillic`和`windows-1251`机会，我们应该更喜欢`windows-1251`.

```
def fix_encoding(src, possible_encodings):
    if not isinstance(src, basestring) or not src:
        return src

    guess = chardet.detect(src)
    first_encoding = guess['encoding']

    encodings = list(possible_encodings)        # copy possible encodings
    if first_encoding in encodings:             # we believe chardet, so first tested
        encodings.remove(first_encoding)        # encoding will be the one, detected by chardet
    encodings.insert(0, first_encoding)
    encodings_set = set(encodings)

    tested_encodings = { k:{'string': '', 'confidence': -1.0} for k in encodings }

    try:
        lat = src.encode('latin-1') if isinstance(src, unicode) else src # make latin string
    except UnicodeEncodeError:
        lat = src.encode('utf-8') # may be not necessary, should return src?

    while encodings:
        candidate = encodings.pop(0)
        if not candidate:
            continue

        if not candidate in tested_encodings:
            tested_encodings.setdefault(candidate, {'string': '', 'confidence': -1.0})

        try:
            fixed_string = lat.decode(candidate)
        except UnicodeDecodeError:
            continue

        # try to detect charset again
        fixed_confidence = chardet.detect(fixed_string)['confidence']
        # it seems, that new confidence is usually higher, if the previous detection was right

        tested_encodings[candidate]['string'] = fixed_string
        tested_encodings[candidate]['confidence'] = fixed_confidence

    # perform charset coercing
    for subset, coercing_encodings in charset_coercing.items():
        if set(subset).issubset(encodings_set):
            for enc, penalty in coercing_encodings.items():
                tested_encodings[enc]['confidence'] += penalty

    result = tested_encodings.get(first_encoding)
    if result['confidence'] >= 0.99: # if confidence value for first detection is high, use it
        return result['string']

    max_confidence_charset = max(tested_encodings, key=lambda x: tested_encodings[x]['confidence'])
    return tested_encodings[max_confidence_charset]['string'] 
```

媒体文件解析：

```
def extract_tags(media_file):
    try:
        mf = MediaFile(media_file)
    except:
        return {}

    mfe = MostFrequentEncoding()
    mfe.from_attrs(mf)

    encodings = mfe.encodings()
    tags = {}

    for attr in sorted(dir(mf)):
        val = getattr(mf, attr)
        if not val or callable(val) or \
        attr in ['__dict__', '__doc__', '__module__', '__weakref__', 'mgfile', 'art']:
            continue

        fixed = fix_encoding(val, encodings)
        tags[attr] = remove_extra_spaces(fixed) if isinstance(fixed, basestring) else fixed

    if mf.art:
        tags['art'] = { 'data': mf.art, 'mime': imghdr.what(None, h=mf.art) }

    return tags 
```

以及用法例如：

```
f = '/media/Media/Music/Jason Becker/Jason Becker - Perpetual Burn/02__1.mp3'
pprint(extract_tags(f)) 
```

[这](http://pastebin.com/7E8Xp1g0)是一个完整的脚本。它可以在解析过程中显示专辑的 ascii 封面。

似乎它可以工作，但是在 python 上是否有任何维护的瑞士刀编码修复库？

# java - Java fork-join 性能

> ID：14131467
> 
> 赞同：2
> 
> 时间：2013-01-03T00:36:50.187
> 
> 标签：java

我有合并排序的示例实现，一个使用 Fork-Join，另一个是直接递归函数。

看起来 fork-join 比直接递归慢，为什么？

```
import java.util.Arrays;
import java.util.List;
import java.util.Random;
import java.util.concurrent.ForkJoinPool;
import java.util.concurrent.RecursiveTask;

class DivideTask extends RecursiveTask<int[]> {
    private static final long serialVersionUID = -7017440434091885703L;
    int[] arrayToDivide;

    public DivideTask(int[] arrayToDivide) {
        this.arrayToDivide = arrayToDivide;
    }

    @Override
    protected int[] compute() {
        //List<RecursiveTask> forkedTasks = new ArrayList<>();

        /*
         * We divide the array till it has only 1 element. 
         * We can also custom define this value to say some 
         * 5 elements. In which case the return would be
         * Arrays.sort(arrayToDivide) instead.
         */
        if (arrayToDivide.length > 1) {

            List<int[]> partitionedArray = partitionArray();

            DivideTask task1 = new DivideTask(partitionedArray.get(0));
            DivideTask task2 = new DivideTask(partitionedArray.get(1));
            invokeAll(task1, task2);

            //Wait for results from both the tasks
            int[] array1 = task1.join();
            int[] array2 = task2.join();

            //Initialize a merged array
            int[] mergedArray = new int[array1.length + array2.length];

            mergeArrays(task1.join(), task2.join(), mergedArray);

            return mergedArray;
        }
        return arrayToDivide;
    }

    private void mergeArrays(int[] array1, int[] array2, int[] mergedArray) {

        int i = 0, j = 0, k = 0;

        while ((i < array1.length) && (j < array2.length)) {

            if (array1[i] < array2[j]) {
                mergedArray[k] = array1[i++];
            } else {
                mergedArray[k] = array2[j++];
            }

            k++;
        }

        if (i == array1.length) {
            for (int a = j; a < array2.length; a++) {
                mergedArray[k++] = array2[a];
            }
        } else {
            for (int a = i; a < array1.length; a++) {
                mergedArray[k++] = array1[a];
            }
        }
    }

    private List<int[]> partitionArray() {
        int[] partition1 = Arrays.copyOfRange(arrayToDivide, 0, arrayToDivide.length / 2);

        int[] partition2 = Arrays.copyOfRange(arrayToDivide, arrayToDivide.length / 2, arrayToDivide.length);
        return Arrays.asList(partition1, partition2);
    }
}

public class ForkJoinTest {
    static int[] numbers;
    static final int SIZE = 1_000_000;
    static final int MAX = 20;

    public static void main(String[] args) {
        setUp();

        testMergeSortByFJ();
        testMergeSort();
    }

    static void setUp() {
        numbers = new int[SIZE];
        Random generator = new Random();
        for (int i = 0; i < numbers.length; i++) {
            numbers[i] = generator.nextInt(MAX);
        }
    }

    static void testMergeSort() {
        long startTime = System.currentTimeMillis();

        Mergesort sorter = new Mergesort();
        sorter.sort(numbers);

        long stopTime = System.currentTimeMillis();
        long elapsedTime = stopTime - startTime;
        System.out.println("Mergesort Time:" + elapsedTime + " msec");
    }

    static void testMergeSortByFJ() {
        //System.out.println("Unsorted array: " + Arrays.toString(numbers));
        long t1 = System.currentTimeMillis();
        DivideTask task = new DivideTask(numbers);
        ForkJoinPool forkJoinPool = new ForkJoinPool();
        forkJoinPool.invoke(task);
        //System.out.println("Sorted array: " + Arrays.toString(task.join()));
        System.out.println("Fork-Join Time:" + (System.currentTimeMillis() - t1) + " msec");
    }
 }

class Mergesort {
    private int[] msNumbers;
    private int[] helper;

    private int number;

    private void merge(int low, int middle, int high) {

        // Copy both parts into the helper array
        for (int i = low; i <= high; i++) {
            helper[i] = msNumbers[i];
        }

        int i = low;
        int j = middle + 1;
        int k = low;
        // Copy the smallest values from either the left or the right side back
        // to the original array
        while (i <= middle && j <= high) {
            if (helper[i] <= helper[j]) {
                msNumbers[k] = helper[i];
                i++;
            } else {
                msNumbers[k] = helper[j];
                j++;
            }
            k++;
        }
        // Copy the rest of the left side of the array into the target array
        while (i <= middle) {
            msNumbers[k] = helper[i];
            k++;
            i++;
        }

    }

    private void mergesort(int low, int high) {
        // Check if low is smaller then high, if not then the array is sorted
        if (low < high) {
            // Get the index of the element which is in the middle
            int middle = low + (high - low) / 2;
            // Sort the left side of the array
            mergesort(low, middle);
            // Sort the right side of the array
            mergesort(middle + 1, high);
            // Combine them both
            merge(low, middle, high);
        }
    }

    public void sort(int[] values) {
        this.msNumbers = values;
        number = values.length;
        this.helper = new int[number];
        mergesort(0, number - 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T00:44:04.743

恕我直言，主要原因不是线程产生和池化造成的开销。

我认为多线程版本运行缓慢主要是因为**您一直在不断地创建新数组**，**数百万**次。最终，您创建了 100 万个包含单个元素的数组，这让垃圾收集器很头疼。

您所有的`DivideTask`s 都可以对数组的不同部分（两半）进行操作，因此只需向它们发送一个范围并让它们在该范围内操作。

此外，您的并行化策略使得无法使用巧妙的“辅助数组”优化（注意`helper`顺序版本中的数组）。这种优化将“输入”数组与在其上进行合并的“辅助”数组交换，因此不应该为每个合并操作创建一个新数组：这是一种节省内存的技术，如果你不这样做，你就无法做到t*按递归树的级别*并行化。

对于课堂作业，我必须并行化 MergeSort，并且通过按递归树的级别并行化，我设法获得了不错的加速。不幸的是，代码是 C 语言并使用 OpenMP。如果你要我可以提供。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T00:51:56.957

正如 gd1 指出的那样，您正在进行大量的数组分配和复制；这会让你付出代价。相反，您应该在同一个数组的不同部分上工作，注意没有子任务在另一个子任务正在处理的部分上工作。

但除此之外，fork/join 方法（与任何并发性一样）会带来一定的开销。事实上，如果您查看[RecursiveTask](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/RecursiveTask.html)的 javadocs ，他们甚至指出他们的简单示例执行缓慢，因为分叉过于细化。

长话短说，你应该有更少的细分，每个细分都做得更多。更一般地说，任何时候你的非阻塞线程多于核心，吞吐量都不会提高，实际上开销会开始减少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T00:38:54.290

如果不深入查看您的代码，则生成一个新线程的成本很高。如果您没有太多工作要做，那么仅出于性能原因就不值得。在这里很笼统地说，但是在产生新线程并开始运行之前，单个线程可能会循环数千次（尤其是在 Windows 上）。

请参阅[Doug Lea 的论文](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=9&ved=0CIIBEBYwCA&url=http://gee.cs.oswego.edu/dl/papers/fj.pdf&ei=T93kUJGLJanOmgWu_IGIDQ&usg=AFQjCNGcO_ZcUccZf9vXQxH9NY3sWxCztw&sig2=CJqUxvdG0TWomoQ72K5e5g&bvm=bv.1355534169,d.dGY&cad=rja)（在 2\. DESIGN 下），其中他指出：

*“然而，java.lang.Thread 类（以及 Java 线程通常基于的 POSIX pthreads）是支持 fork/join 程序的次优工具”*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T23:36:18.570

还发现以下有关使用 Fork/Join 的信息[Dan Grossman 的 Fork/Join 简介](http://homes.cs.washington.edu/~djg/teachingMaterials/grossmanSPAC_forkJoinFramework.html#gotchas)

# android - android设备上的单声道/立体声录音有什么区别

> ID：14131468
> 
> 赞同：3
> 
> 时间：2013-01-03T00:36:57.410
> 
> 标签：android, audio, audio-recording

我知道立体声意味着来自多个通道的信号。但是谁能告诉我在使用音轨类记录音频数据时将音频格式设置为“立体声”是什么意思？这是否意味着记录的原始数据包含来自两个不同麦克风的数据？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-27T09:47:02.843

> 这是否意味着记录的原始数据包含来自两个不同麦克风的数据？

如果设备只有一个麦克风，则两个通道是相同的。

但是如果有两个或多个麦克风，则取决于制造商的固件：他决定是否仍然只有一个麦克风的输出发送到两个通道（并且其他麦克风用于例如噪声抑制），或者是否记录数据的两个通道确实包含两个不同麦克风的信号。

# r - 根据日期对名称（）进行排序

> ID：14131470
> 
> 赞同：0
> 
> 时间：2013-01-03T00:37:09.240
> 
> 标签：r, sorting, names

我试图根据 R 中这些列中的日期对各个患者的列进行排序。我制作了一个示例数据集，但是，该数据集不返回日期，而是返回长数字（不知道为什么）。原谅我创建数据框的愚蠢方式:)...

```
dd<- 
data.frame(rbind(
c(as.POSIXct(as.Date("01/01/2008", format="%d/%m/%Y")),
as.POSIXct(as.Date("01/01/2009", format="%d/%m/%Y")),
as.POSIXct(as.Date("01/01/2011", format="%d/%m/%Y")),
as.POSIXct(as.Date("01/01/2010", format="%d/%m/%Y")))
,
c(as.POSIXct(as.Date("01/01/2002", format="%d/%m/%Y")),
as.POSIXct(as.Date("01/01/2001", format="%d/%m/%Y")),
as.POSIXct(as.Date("01/01/2006", format="%d/%m/%Y")),
as.POSIXct(as.Date("01/01/2004", format="%d/%m/%Y")))
))
dd$patient[1] <- 1
dd$patient[2] <- 2
names(dd) <- c("date1", "date2", "date3", "date4", "patient") 
```

我所追求的是每个患者的列名称列表，按这些列中的日期排序。因此，

患者 1：日期 1、日期 2、日期 4、日期 3

患者 2：日期 2、日期 1、日期 4、日期 3

编辑：

所以，还有一件事。如果缺少一个日期怎么办......因此：

```
dd <- data.frame(
  patient = 1:2,
  date1 = as.Date(c("01/01/2008","01/01/2002"),format="%d/%m/%Y"),
  date2 = as.Date(c("01/01/2009","01/01/2001"),format="%d/%m/%Y"),
  date3 = as.Date(c("01/01/2011","01/01/2006"),format="%d/%m/%Y"),
  date4 = as.Date(c("01/01/2010","01/01/2004"),format="%d/%m/%Y")
)

dd[2,2]<- NA 
```

马修斯的回答是：

```
> t(apply(dd, 1, function(x) c(x[1], names(x[-1])[order(x[-1])])))
     patient                                
[1,] "1"     "date1" "date2" "date4" "date3"
[2,] "2"     "date2" "date4" "date3" "date1" 
```

因此，缺失数据点的列名包含在最后的排序日期列表中。但我喜欢它不存在......因此：

```
 patient                                
[1,] "1"     "date1" "date2" "date4" "date3"
[2,] "2"     "date2" "date4" "date3" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T03:32:05.913

这是一个`apply`遍历数据框的应用程序：

```
t(apply(dd, 1, function(x) c(x[length(x)], names(x)[order(x[-length(x)])])))

##      patient                                
## [1,] "1"     "date1" "date2" "date4" "date3"
## [2,] "2"     "date2" "date1" "date4" "date3" 
```

`patient`如果是第一列，而不是最后一列， 可能更有意义。

使用@thelatemail 的定义而不是你的：

```
t(apply(dd, 1, function(x) c(x[1], names(x[-1])[order(x[-1])])))

##      patient                                
## [1,] "1"     "date1" "date2" "date4" "date3"
## [2,] "2"     "date2" "date1" "date4" "date3" 
```

对于已编辑的问题，除非您将 NA 用作缺失值，否则您无法按原样在数据框或矩阵中表示它，这是合理的。但是，您可以通过以下方式获取列表作为返回值，因为列表可以具有可变长度的条目：

```
apply(dd, 1, function(x) c(x[1], names(x[-1][!is.na(x[-1])])[order(x[-1][!is.na(x[-1])])]))

## [[1]]
## patient                                 
##     "1" "date1" "date2" "date4" "date3" 
##
## [[2]]
## patient                         
##     "2" "date2" "date4" "date3" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:04:12.263

另一种尝试使用`by`：

```
dd <- data.frame(
  patient = 1:2,
  date1 = as.Date(c("01/01/2008","01/01/2002"),format="%d/%m/%Y"),
  date2 = as.Date(c("01/01/2009","01/01/2001"),format="%d/%m/%Y"),
  date3 = as.Date(c("01/01/2011","01/01/2006"),format="%d/%m/%Y"),
  date4 = as.Date(c("01/01/2010","01/01/2004"),format="%d/%m/%Y")
)

by(dd,dd$patient,function(x) names(x[,order(x)])) 
```

导致：

```
dd$patient: 1
[1] "patient" "date1"   "date2"   "date4"   "date3"  
------------------------------------------------------------ 
dd$patient: 2
[1] "patient" "date2"   "date1"   "date4"   "date3" 
```

要编辑它以删除第一个“患者”列，这将起作用：

```
by(dd,dd$patient,function(x) c(x[,1],names(x[,order(x[,2:ncol(x)])]))) 
```

导致：

```
dd$patient: 1
[1] "1"     "date1" "date2" "date4" "date3"
------------------------------------------------------------------------------ 
dd$patient: 2
[1] "2"     "date2" "date1" "date4" "date3" 
```

# objective-c - iPad 上 iOS6 和 iOS 5 中的界面方向不起作用

> ID：14131478
> 
> 赞同：3
> 
> 时间：2013-01-03T00:38:12.620
> 
> 标签：objective-c, xcode, ipad, cocoa-touch

我正在创建一个支持 ios 版本 5 和 6 的 iPad 应用程序。我有一个视图控制器，它仅在应用程序开始时以纵向模式显示。后来我有一个支持所有界面方向的视图控制器。

我只是让它在 iOS 5 或 iOS 6 上工作。意思是：在 iOS 6 上，视图控制器中支持的界面方向只有在 info.plist 文件中设置时才有效。所以我必须在 info.plist 文件中设置所有界面方向。这一切都适用于 iOS 6，但在 iOS 5 上，如果 iPad 在应用程序启动之前处于纵向状态，则它适用于启动。但是，如果 iPad 处于横向模式，则应用程序以正确的方式启动，但通知中心是错误的，直到您手动执行另一次旋转。

有没有办法将其他一些键放入另一个 iOS 版本的 info.plist 文件中？这是我能想到的唯一解决方案。因为如果我在 info.plist 文件中仅将纵向设置为方向，则它适用于 iOS 5。

编辑：

好吧，我解释的有点混乱。我已经通过以下方法让它在 iOS 6 中完全工作：shouldAutorotate 和supportedInterfaceOrientations:。我的根视图控制器只支持纵向界面方向，在我的 info.plist 中我必须选择所有界面方向。

问题：

当我在 iOS 5 上启动应用程序时，我的 iPad 处于横向状态：

根视图控制器处于纵向模式，但应用程序的行为就像处于横向模式，这意味着可以从侧面访问通知中心等等。

我能想到的解决方案：

问题是我必须在 info.plist 文件中设置所有界面方向。这意味着在 iOS 5 中，即使我只是在方法 shouldAutorotateToInterfaceOrientation: 中放置了一个可能的方向，应用程序也会尝试以横向模式启动（上述行为已解释）。

所以会有两种解决方案：当在 info.plist 文件中未选择特定界面方向时，我可以让应用程序在 iOS 6 中旋转，或者我可以“更改”iOS 5 的旋转。

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T10:30:41.397

好的，最后我想出了一个解决方案。问题是由于 info.plist 文件中设置的界面方向，在启动时以错误的方式访问了通知中心。

我有一个全屏应用程序，起初并没有得到它，状态栏也以横向方式显示，而其他视图以纵向方式显示（rootviewcontroller）。

所以在应用程序：didFinishLaunchingWithOptions：我把这个代码：

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait]; 
```

对于所有希望在启动时拥有一个具有一个方向的应用程序但允许在另一个子控制器中使用多个应用程序的所有其他人，这里是完整的解决方案：

在启动时为 iPad 设置所有界面方向。

在我的 rootViewController 中有以下代码：

（支持旧 iOS 版本）

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationPortrait); 
} 
```

（支持新的）

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}

- (BOOL)shouldAutorotate {
        return NO;
} 
```

在我的子控制器中，我有以下内容：

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return YES;
}

- (BOOL)shouldAutorotate {
    return YES;
} 
```

看起来很简单，但我花了很长时间才用状态栏解决这个问题。如果 shouldAutorotate 没有被调用，你必须使用其他帖子中提到的这个技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:00:28.173

对于 iOS 6，您需要在 UIViewControllers 中重写这两个方法：

```
- (NSUInteger)supportedInterfaceOrientations
- (BOOL)shouldAutorotate 
```

此外，Info.plist 方向仅用于启动，因此它们应该与您的启动方向相匹配，即只有纵向。

请注意，只有在正确使用 UIViewcontrollers 时，自动旋转才能正常工作，例如 UINavigationController 中的堆栈。这样，当显示每个控制器时，它将使用其指定的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:25:46.993

这是我想出的向后兼容的方法。

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation{
    if ([CMVStaticContainer isPad]) // Custom Method to determine this is on the iPad
    {
        return UIInterfaceOrientationLandscapeRight;
    }
    else
    {       
        return UIInterfaceOrientationPortrait;
    }
}

- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskAll;
}

- (BOOL)shouldAutorotate{
    UIDeviceOrientation orientation = [UIDevice currentDevice].orientation;
    if (orientation == UIDeviceOrientationUnknown) return YES;
    BOOL result = [self shouldAutorotateToInterfaceOrientation:orientation];
    return result;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    // Return YES for supported orientations
    if ([CMVStaticContainer isPad]) // Custom Method to determine this is on the iPad
    {
        return interfaceOrientation == UIInterfaceOrientationLandscapeRight;
    }
    else
    {       
        return YES;
    }

} 
```

我确定对于 UIDeviceOrientationUnknown 你应该总是返回是。然后我的代码将它转发到来自 iOS 5 的另一个方向代码

哦，我还遇到了将“标准类”作为 rootViewController 的问题，因为那是收到消息的那个，我相信我对它进行了子类化并确定了位于顶部的视图控制器并通过它发送消息以确保视图控制器打开top 将确定首选方向以及 shouldAutorotate 命令。

此代码不包含该代码，但那是因为我将 Modal Presentation 用于新的视图控制器，而不是 UINavigationController 用于我的根。但这是一个无关的决定。

# android - 从 sqlite 字符串列中获取总计

> ID：14131483
> 
> 赞同：0
> 
> 时间：2013-01-03T00:38:39.357
> 
> 标签：android, sqlite

如何添加“swimm_lap”列的总数（存储为字符串的数字）并将其显示在文本视图中。我尝试添加类似 ...select sum(swimm_lap) ....from

这是我的适配器中的内容

```
public Cursor Query(String filter, String date_filter, String lap_filter) {
    if (date_filter == null & lap_filter == null){
            int sum = 0;
            Cursor cursor = database.rawQuery
            ("select sum(swimm_lap) _id,swimm_pos,swimm_date, swimm_lap,swimm_stroke,swimm_time,swimm_media,swimm_efficiency,swimm_note from swimm_table order by cast("+filter+" as integer) asc", null);          
            if (cursor.moveToFirst()) 
            {sum = cursor.getInt(0);}
            return cursor;} 
```

在主要活动中

```
totallap = (TextView) findViewById(R.id.total_lap);
totallap.setText(String.valueOf(sum));
public void Bindadapter() {   
        datasource.open();
    Cursor cursor = datasource.Query(filter, date_filter, lap_filter);

    String[] columns = new String[] { "swimm_pos", "swimm_date","swimm_lap","swimm_stroke", "swimm_time", "swimm_media", "swimm_efficiency", "swimm_note" };
    int[] to = new int[] { R.id.swimm_pos, R.id.swimm_date, R.id.swimm_lap, R.id.swimm_stroke, R.id.swimm_time, R.id.swimm_medialap, R.id.swimm_efficiency, R.id.swimm_note};

SimpleCursorAdapter adapter = new SimpleCursorAdapter(
        this, 
        R.layout.list_layout, 
        cursor, 
        columns, 
        to);

adapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
        public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
     if (view.getId() == R.id.total_lap)
        { 
        sum = cursor.getInt(0);
        String s = String.valueOf(sum);
        TextView tv = (TextView)view;
        tv.setText(s);
        return true;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:41:45.140

```
int sum = 0;
Cursor cursor = database.rawQuery("SELECT SUM(swimm_lap) FROM swimm_table", null);

if (cursor.moveToFirst()) 
{
    sum = cursor.getInt(0);
} 
```

# c# - 在与 Lync 的远程会话中执行标准 PowerShell cmdlet

> ID：14131487
> 
> 赞同：2
> 
> 时间：2013-01-03T00:38:51.287
> 
> 标签：c#, powershell, powershell-remoting, lync, cmdlets

这里有一个奇怪的问题。我能够在 Lync Server 2010 实例中启动从 C# 应用程序到 PowerShell 的远程会话。我能够获取所有特定于 Lync 的 cmdlet 并执行它们，但如果我尝试使用标准 cmdlet（在我的情况下为“get-content”以将文件转换为字节数组）执行某些操作，它将不会识别命令。

有没有办法/需要将标准 PS cmdlet 集加载到该会话中？感觉好像我在这里错过了一些东西......

提前致谢！

ñ

编辑：这是我正在做的代码片段......

```
PSCredential creds = new PSCredential(lyncUser, lyncPW);

        WSManConnectionInfo conn = new WSManConnectionInfo(new Uri(lyncURI), schema, creds);

        conn.AuthenticationMechanism = AuthenticationMechanism.Default;

        Runspace rs = RunspaceFactory.CreateRunspace(conn);
        rs.Open();

        List<FileInfo> files = getWavFiles();

        foreach (var file in files)
        {

            Pipeline lyncCommands = rs.CreatePipeline();

            Command getContent = new Command("Get-Content");
            getContent.Parameters.Add(file.FullName);
            getContent.Parameters.Add("readcount", 0);
            getContent.Parameters.Add("encoding", "byte");
            lyncCommands.Commands.Add(getContent);

            Command importAnnouncement = new Command("import-csannouncementfile");
            importAnnouncement.Parameters.Add("parent", "applicationserver:myserver.mydomain.mycom");
            importAnnouncement.Parameters.Add("filename", file.Name);
            importAnnouncement.Parameters.Add("force");

            lyncCommands.Commands.Add(importAnnouncement);

            foreach (PSObject r in lyncCommands.Invoke())
            {
                Console.WriteLine(r.ToString() + Environment.NewLine);
            }
        } 
```

“import-csannouncement”部分可以正常工作......它是“get-content”部分，变得有点冒险......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:31:09.383

您可以尝试为完整语言模式重新配置 LYNC 服务器远程会话。

（链接是关于配置 Exchange 服务器，但我相信这是同一个问题）

[http://blog.mimecast.com/2011/08/get-full-control-over-your-exchange-remote-powershell-session/](http://blog.mimecast.com/2011/08/get-full-control-over-your-exchange-remote-powershell-session/)

# c++ - 为什么 std::sort 不按字母顺序排列字符串数组？

> ID：14131491
> 
> 赞同：1
> 
> 时间：2013-01-03T00:39:16.930
> 
> 标签：c++, sorting

我知道我不应该使用 C 风格的数组，但我一直在尝试寻找一种方法来做到这一点。我正在尝试按字母顺序排列`const char*`数组，但`std::sort`做得不对。我究竟做错了什么？

```
#include <iostream>
#include <algorithm>

int main() {

   const char * str[5] = {"alpha", "gamma", "beta", "delta", "chi"};

   int size = sizeof(str)/sizeof(*str);

   std::sort(str, str + size);

   for (int i = 0; i < size; i++) std::cout << str[i] << ", ";

} 
```

它根本不会改变数组。我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T00:41:50.823

默认的`std::sort`比较函数只是将*指针*（内存地址）与`<`运算符进行比较。它实际上并没有按字典顺序比较 C 字符串。您需要创建一个自定义比较函数，通过例如调用来按字典顺序比较字符串`std::strcmp`

```
bool compare(const char* s1, const char* s2)
{
    return std::strcmp(s1, s2) < 0;
}

int main() 
{
   const char * str[5] = {"alpha", "gamma", "beta", "delta", "chi"};
   int size = sizeof(str)/sizeof(*str);
   std::sort(str, str + size, compare);
   for (int i = 0; i < size; i++) std::cout << str[i] << ", ";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T00:42:52.263

问题很简单：您使用的是默认比较，它只会比较指针值。通常这些将有升序的地址，所以你不会看到任何变化。

您必须编写自己的比较函数：

```
int comp(const char *c1, const char *c2) {
    return strcmp(c1, c2) < 0;
}

std::sort(str, str + size, &comp); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T00:42:07.410

可能是因为默认比较器`const char *`是比较指针值（并且字符串常量恰好已经按数组顺序分配）？

使用`std::string`.

# emacs - 保存前如何在 Emacs 中对更改的行执行操作？

> ID：14131492
> 
> 赞同：4
> 
> 时间：2013-01-03T00:39:25.357
> 
> 标签：emacs, elisp

我想添加一个 before-save-hook，我可以在其中对自上次保存以来更改的行进行一些操作。例如，删除尾随空格、检查缩进等。我不想对整个文件执行此操作，而且我知道每个文件都有单独的选项（只是为了删除所有更改行的尾随空格，等等..），但我想要一些通用的东西，以便我可以添加更多的东西。我想有一些东西可以让我改变行号列表，或者 get-first-changed-line(), get-next-changed-line() 类型的函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T18:09:43.630

## 使用highlight-changes-mode机制

您可以使用`highlight-changes-mode`，然后`hilit-chg`使用`next-single-property-change`.

例如，

```
(with-current-buffer "my-buffer-name"
  (let ((beg (point-min)) end)
    (while (setq end (next-single-property-change beg 'hilit-chg))
      (setq beg (next-single-property-change end 'hilit-chg))
      (message "[[%s]]" (buffer-substring-no-properties end beg))))) 
```

将产生以下内容：

```
[[
these are my changes

]]
[[ and here]]
[[
here are more changes
]] 
```

在`*Messages*`缓冲区（和回声区域）。

### 完整的实现示例

[ws-butler](https://github.com/lewang/ws-butler)使用此机制在 EOL 处修剪空格以保存修改的行。

# python - 在 Flask 单元测试中，如何模拟请求全局“g”对象上的对象？

> ID：14131494
> 
> 赞同：12
> 
> 时间：2013-01-03T00:39:41.670
> 
> 标签：python, unit-testing, mocking, flask, werkzeug

我有一个烧瓶应用程序，它在 a 中设置数据库连接，与[此](http://flask.pocoo.org/docs/tutorial/dbcon/)`before_filter`非常相似：

```
@app.before_request
def before_request():
    g.db = connect_db() 
```

现在：我正在编写一些单元测试，我*不*希望它们进入数据库。我想`g.db`用一个可以设置期望的模拟对象替换。

我的测试正在使用，如[这里](http://flask.pocoo.org/docs/testing/)`app.test_client()`的烧瓶文档所示。一个示例测试看起来像

```
def test(self):
    response = app.test_client().post('/endpoint', data={..})
    self.assertEqual(response.status_code, 200)
    ... 
```

测试工作并通过，但它们正在访问数据库，正如我所说，我想用模拟对象替换数据库访问。我看不到任何`test_client`访问`g`对象或更改 before_filters 的方法。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-03T19:52:44.250

这有效

`test_app.py`

```
from flask import Flask, g

app = Flask(__name__)

def connect_db():
    print 'I ended up inside the actual function'
    return object()

@app.before_request
def before_request():
    g.db = connect_db()

@app.route('/')
def root():
    return 'Hello, World' 
```

`test.py`

```
from mock import patch
import unittest

from test_app import app

def not_a_db_hit():
    print 'I did not hit the db'

class FlaskTest(unittest.TestCase):

    @patch('test_app.connect_db')
    def test_root(self, mock_connect_db):
        mock_connect_db.side_effect = not_a_db_hit
        response = app.test_client().get('/')
        self.assertEqual(response.status_code, 200)

if __name__ == '__main__':
    unittest.main() 
```

所以这将打印出“我没有命中数据库”，而不是“我最终进入了实际函数”。显然，您需要使模拟适应您的实际用例。

# java - 整数枚举和拆箱

> ID：14131495
> 
> 赞同：1
> 
> 时间：2013-01-03T00:39:55.657
> 
> 标签：java

```
public class Document{
    private Integer status;

    // get()/set()
} 
```

然后是一个枚举：

```
public enum DocumentStatusEnum {

        ACTIVE_DOCUMENT(2060),CANCELLED_DOCUMENT(2061),DRAFT_DOCUMENT(2062),PROCESSED_DOCUMENT(2063);

        private final Integer value;

        private DocumentStatusEnum(Integer value){
            this.value = value;
        }
        public Integer getValue(){
            return value;
        }
    } 
```

在一种方法中，我使用了上述方法，如下所示：

```
Document d = new Document();
d.setStatus(2063);
if (d.getStatus() == DocumentStatusEnum.PROCESSED_DOCUMENT.getValue()){
{
       // print true;
    }
    else{
       // print false;
    } 
```

我在这里得到真实的。看起来不错。以同样的方法，几行之后，我这样做：

```
d.setStatus(2060)
if (d.getStatus() == DocumentStatusEnum.ACTIVE_DOCUMENT.getValue()){
   // print true
}
else{
   // print false

} 
```

我得到一个假的。我研究并发现了一些关于 Java 中的缓存和装箱功能。我将枚举定义转换为：

```
public enum DocumentStatusEnum {

    ACTIVE_DOCUMENT(2060),CANCELLED_DOCUMENT(2061),DRAFT_DOCUMENT(2062),PROCESSED_DOCUMENT(2063);

    private final int value;

    private DocumentStatusEnum(int value){
        this.value = value;
    }
    public int getValue(){
        return value;
    }
} 
```

现在，没有问题。我在这两种情况下都是正确的。

问题是为什么会这样？我觉得这种行为非常不稳定。这是我正在处理的一个大型应用程序，并且我到处`Integer == Integer`都在使用比较。我在这里安全吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T00:46:43.043

`Integer`扩展`Object`，因此`==`被定义为引用相等，而不是值相等。

与比较`Integer`时`int`，`Integer`将拆箱为`int`，并且将比较两个操作数的值是否相等。（除非`Integer`值是`null`，在这种情况下`NullPointerException`将被抛出。）但`Integer == Integer`绝不是安全的。

`Integer`也就是说，因为默认情况下运行时会为小整数（根据[OpenJDK 源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Integer.java#Integer.IntegerCache)为 -128 到 127）预分配实例，所以您通常可以`Integer == Integer`为小值工作。但是这种行为不适用于较大的值，并且永远不需要保持。所以你永远不应该假设`Integer`（或`String`，或任何`Object`）的两个实例将使用 比较相等`==`，除非你明确地寻找引用相等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T00:47:33.563

你应该使用`int`而不是`Integer`，除非你需要处理空值。

比较`Integer`对象确实存在问题。例如，以下将评估为 false：

```
boolean test = (new Integer(1) == new Integer(1));
System.out.println(test); // "false" 
```

这些只是和其他对象一样的对象。运算符在与对象一起使用`==`时，仅当它们是完全相同的 Java 对象时才计算为 true（与`equals()`方法相反，方法可以被覆盖以比较内部结构）。

# c++ - CImg 无法正确显示透明 png 图像？

> ID：14131497
> 
> 赞同：3
> 
> 时间：2013-01-03T00:40:00.293
> 
> 标签：c++, png, libpng, cimg

我在 Visual Studio 2010 中使用 CImg 与 libpng 结合来显示 png 图像。当我使用 CImg 显示图像时，它似乎无法正确显示透明度。如果这是我没有完全掌握 CImg 的概念，我正在犯的错误，或者两者兼而有之，我不会起诉！

![显示所描述问题的图像](../Images/acf4189597edfde7bf3bee9d7c6be492.png)

左侧的图像显示了在 Windows 照片查看器中打开的图像 - 背景透明如预期。右边的图像显示了 CImg 显示，它实际上显示的是纯白色背景，字符周围有一些奇怪的棕色区域。

CImg 正在加载具有第 4 个 Alpha 通道的 png（如右图窗口标题所示）。将鼠标悬停在 CImg 显示中的区域上时，它会在小弹出窗口中显示正确的透明度值（右图左下角）。CImg 似乎正在绘制所有内容，无论透明度值如何？

我的问题是，如何让 Cimg 正确显示带有透明部分的 pgn？

我的这个例子的代码如下：

```
#define cimg_use_png
#include <CImg.h>
using namespace cimg_library;

int main()
{
    CImg<unsigned char> image("image.png");
    image.display();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:45:09.673

CImg 的默认显示查看器仅显示图像的前 3 个通道。它甚至忽略了第四个通道确实是一个透明通道，它可能是其他东西（例如，用于 CMYK 编码图像的 K 通道）。CImg 不存储此类信息，它让用户知道他最终操作了什么。如果你有第 4 个透明度通道以及在 CImg 中显示什么，你必须自己创建一个小的渲染过程，如下所示：

```
CImg<unsigned char> render(img.width(),img.height(),1,3,255);
render.draw_image(0,0,0,0,img,img.get_channel(3),1,255); 
```

（假设“img”是您的 4 通道图像）。现在“渲染”是一个 RGB 彩色图像，它是您的初始（透明）图像在白色背景上的渲染。

# applescript - Applescript 遍历目录

> ID：14131498
> 
> 赞同：0
> 
> 时间：2013-01-03T00:40:04.087
> 
> 标签：applescript

我有一个在文件夹中添加或更新文件的脚本。我想要做的是一个applescript将这些文件添加到iTunes。但我似乎无法遍历目录。

```
tell application "iTunes"
  if playlist myPlaylist exists then delete playlist myPlaylist
  set newPlaylist to (make new user playlist with properties {name:myPlaylist})

  repeat with theFile in myPath as list
    add theFile to playlist myPlaylist
  end repeat
end tell 
```

对于每次重复，theFile 的值是 myPath 的单个字符，而不是 myPath 中的实际文件。theFile 将是 M, a, c, i, n, ... 而不是 file1.mov, file2.mov, ...

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:23:23.273

如果`myPath`是字符串，`as list`则将其转换为字符数组。

您可以告诉 Finder 获取别名列表：

```
tell application "Finder"
    set l to items of (POSIX file "/Users/username/Music/folder" as alias) as alias list
end tell
tell application "iTunes"
    if playlist "test" exists then
        delete tracks of playlist "test"
    else
        set p to make new user playlist with properties {name:"test"}
    end if
    add l to p
end tell 
```

这会将选定的文件添加到当前显示的播放列表中：

```
tell application "Finder"
    set l to selection as alias list
end tell
tell application "iTunes"
    add l to view of browser window 1
end tell 
```

# java - java中的信号量数组初始化

> ID：14131499
> 
> 赞同：0
> 
> 时间：2013-01-03T00:40:06.603
> 
> 标签：java, arrays, initialization, semaphore

我正在尝试在 java 中创建一个信号量数组并将所有信号量初始化为 1。我尝试了以下操作：`private static Semaphore [] sem = new Semaphore [] {1,1,1,1,1};`

但我收到错误类型不匹配：无法从 int 转换为信号量。我怎样才能做到这一点？我不想先声明再初始化，声明的时候一定要初始化。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T00:42:58.407

您将`int`值放入`Semaphore`数组中，因此类型不匹配。你需要

```
private static Semaphore [] sem = new Semaphore [] {new Semaphore(1),
     new Semaphore(1), new Semaphore(1), new Semaphore(1), new Semaphore(1)}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T00:45:08.863

我想你想使用`Semaphore(int permits)`构造函数。

这样做的唯一方法如下：

```
private static Semaphore [] sem = new Semaphore [] {
   new Semaphore(1),
   new Semaphore(1),
   new Semaphore(1),
   new Semaphore(1),
   new Semaphore(1)
}; 
```

或者使用`for`循环（如果您的实例数组`Semaphore`更长，这种方法将非常有效）。

```
private static Semaphore [] sem = new Semaphore [5];
static {
    for(int i = 0; i < 5; i++) {
        sem[i] = new Semaphore(1);
    }   
} 
```

如果您有大量的信号量许可不按顺序（或者您将从配置文件加载许可），那么循环也`for`可以很好地工作，例如

```
private static Semaphore [] sem;

static {
    int [] semaphorePermits = {1,2,3,1,2,2,2,2,4,5,2,1,2,3,4,5,3,2,12,1,2,23,3};
    sem = new Semaphore[semaphorePermits.length];

    for(int i = 0; i < semaphorePermits.length; i++) {
        sem[i] = new Semaphore(semaphorePermits[i]);
    }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T00:44:48.223

是否所有信号量都代表对同一资源的许可？在这种情况下，您不需要一个数组，只需要一个`Semaphore`对象，允许计数为 5 或其他。另一方面，如果您有多个资源，则始终可以使用`for`循环将信号量添加到数组中。

# java - javac找不到符号构造函数服务

> ID：14131503
> 
> 赞同：8
> 
> 时间：2013-01-03T00:40:35.323
> 
> 标签：java, ant, jax-ws, cxf, endorsed

我正在借助这本[Apache CXF Web 服务开发](https://rads.stackoverflow.com/amzn/click/com/1847195407)书学习 CXF，但是，唉，本书的示例项目之一甚至无法编译！

有问题的代码是第 3 章的代码，`contractfirst`这不是错字问题，因为我使用的是从[本书支持站点](http://www.packtpub.com/support/4096)下载的源代码逐字逐句。

3 个编译错误实际上指向一个问题：

```
Chapter3\contractfirst\src\demo\order\OrderProcessService.java:52: cannot find symbol
symbol: constructor Service(java.net.URL,javax.xml.namespace.QName,javax.xml.ws.WebServiceFeature[])
location: class javax.xml.ws.Service
super(WSDL_LOCATION, SERVICE, features);
^ 
```

在文件 OrderProcessService.java 中。

初步研究表明这可能是[JAX](http://goo.gl/ccfLa) [-WS 2.2 与 2.1 的](http://www.weston-fl.com/blog/?p=1673)问题，但我不知道如何让这个基于 ANT 的编译环境“支持”JAX-WS 2.2。

我尝试放置一个`jaxws-api.jar`并`%JAVA_HOME%\lib\endorsed`尝试将该 jar 添加到项目的库列表中，但似乎没有任何帮助。

我没有使用[Maven](https://stackoverflow.com/q/6947451/562776)，所以我什至不能将它列为依赖项，并希望这能神奇地解决。

知道如何解决这个问题吗？这样我就可以构建这个非常简单的项目了吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T18:23:40.437

根据您的描述，这听起来与本文中描述的问题[相似](http://weblogs.java.net/blog/ramapulavarthi/archive/2007/01/problems_using.html)。

要解决此问题，您可以简单地将`jaxb-api.jar`,复制`jaxws-api.jar`到 JDK 的 JRE `/lib/endorsed`

**请注意**，“背书”意味着将相关的 JAR 文件（在本例中为 jaxb-api.jar、jaxws-api.jar）放入`%JAVA_HOME%\jre\lib\endorsed`（注意`jre`路径中的）。不要**直接**在 JDK 的*lib*目录下创建*endorsed*目录。

 *或者...如果您不想接触 JDK 安装，请使用这些 env vars 使用 wsimport 和 wsgen（其中 JAXWS_HOME 指向 JAX-WS 2.1 安装）：

```
WSIMPORT_OPTS=-Djava.endorsed.dirs=%JAXWS_HOME%/lib
WSGEN_OPTS=-Djava.endorsed.dirs=%JAXWS_HOME%/lib 
```

或者... 如果您使用 ant 任务，您可以`-Djava.endorsed.dirs=%JAXWS_HOME%/lib`在调用 wsimport 和 wsgen ant 任务时作为 jvmarg 传递（为此，您需要设置 wsimport 和 wsgen ant 任务的 fork="true" 属性）。

[归功于 Rama](http://weblogs.java.net/blog/ramapulavarthi/archive/2007/01/problems_using.html) Pulavarthi 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:28:11.047

支持 jaxws-api jar 的 2.2 版本应该可以工作。您还可以将“-fe jaxws21”标志传递给 CXF wsdl2java 命令，以使其生成 2.1 兼容代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T10:52:38.313

**在%JAVA_HOME%\jre\lib\endorsed**中单独添加*webservices-api-2.2.jar*为我解决了问题。*

# ios6 - 风格视图像 iphone appstore 应用程序？

> ID：14131504
> 
> 赞同：2
> 
> 时间：2013-01-03T00:40:39.920
> 
> 标签：ios6, uicollectionview

我想设计一个类似于 iPhone Appstore 应用程序的视图。我不明白视图是如何使用 IB 放置的，还是以编程方式放置的。

![应用商店精选视图](../Images/02941bf01573af36105ce94fade06320.png)

我不知道。它们是放置在滚动视图上的多个集合视图，还是具有一些自定义布局或表格视图的集合视图。此外，每个集合视图都是水平滚动的，顶部有 Header 类型，可以单击 SEE ALL > .. 它不能是标题补充视图，因为它会在左侧，因为滚动是水平滚动而不是顶部.. 如何这是完成了吗

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:35:00.723

每一行都是一个自定义`UITableViewCell`，其中包含水平`UITableView`，并且这个水平`UITableView`有另一个自定义`UITableViewCell`来表示水平列表上的一个应用程序。因此，用户能够进行垂直和水平滚动。

对于 header-type 和 See All 按钮，您可以使用以下 UITableViewDelegate 方法：

> -(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section

下面的文章使用 and 生成类似的输出，`UITableView`其中`UITableViewCell`包含 Horizo​​ntal `UITableView`。

[http://www.raywenderlich.com/4723/how-to-make-an-interface-with-horizo​​ntal-tables-like-the-pulse-news-app-part-2](http://www.raywenderlich.com/4723/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-2)

# php - 如何使用cookies在codeigniter中保存临时数据？

> ID：14131507
> 
> 赞同：1
> 
> 时间：2013-01-03T00:41:09.530
> 
> 标签：php, codeigniter, cookies

我在如何以及在哪里将代码放入 codeigniter 时遇到问题。我是 Php/CI 的新手，我在使用 mvc 表单时遇到了困难。我想将我的数据（疫苗接种记录品牌）放入 cookie 中，以便我可以临时存储它。我试图设置我的 cookie，但结果为空白，但数据已插入我的数据库中。我认为我的控制器代码有问题。

我的控制器的代码：

```
function vaccs($id) {
$data['title'] = $this->main_title.' | Vaccination';
$data['jslibraries'] = $this->inc_files->data_tables_scripts();
$data['uid']         = $id;
$data['employee']    = $this->vaccination_model->get_employee($id);
$data['vaccine']    = $this->vaccination_model->get_vaccinationrecord($id,0);
$data['vaccine1']   = $this->vaccination_model->get_vaccinationrecord($id,1); 
$this->load->view('vaccs',$data);

} 
```

我的观点代码：

```
<?php
if (isset($_COOKIE['vaccine'])) {
setcookie('vaccine',$vaccine);
foreach ($_COOKIE[$vaccine] as $vaccine){ ?>

<div class="control-group">
<label class="control-label">
<?php echo '&nbsp'.'<a href="javascript:void(0);"  rel="tooltip"    
title="Delete" onclick="delete_vaccination('.$vaccine->vaccination_record_id.');"><i class="icon-minus-sign"></i></a>'.'';?><?php echo $vaccine->vaccination_record_brand;?>

</label>
</div> 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T13:55:45.810

您应该首先加载 cookie 助手。您可以将其加载到配置文件夹内的自动加载文件中，只需`cookie`像这样添加助手

```
$autoload['helper'] = array('cookie'); 
```

然后你可以像这样设置cookie

```
<?php
      $name = 'xyz';
      $this->input->set_cookie('cookie_name', $name, 3600*2);
?> 
```

那么你可以通过这个得到这个cookie值

```
<?php echo $this->input->cookie('cookie_name');?> 
```

# php - PHP 中的 shell_exec 问题

> ID：14131509
> 
> 赞同：0
> 
> 时间：2013-01-03T00:41:49.887
> 
> 标签：php, linux

我有一些 PHP 代码需要在服务器的后台启动一个 ruby​​ 脚本。但是脚本不想工作。脚本现在所做的就是获取输入并将其回显。

我这样调用它：

```
shell_exec("./fifo_test.r < input.fifo > buffer &"); 
```

这会导致 PHP 无限期挂起。但是当我直接运行它时它工作正常。

```
root@ip-xxxxx:/var/www/test# su www-data
$ sh -c ./fifo_test.r < input.fifo > buffer &
$ echo test > input.fifo
$ cat buffer
Got: test 
```

以下是过程信息：

```
ubuntu@ip-xxxxx:~$ ps -ef | grep fifo
www-data  1076     1  0 00:39 ?        00:00:00 sh -c ./fifo_test.r < input.fifo > buffer & 
```

有什么想法吗？谢谢！

编辑：我可以通过手动添加到 input.fifo 来解冻 PHP。然后它工作正常。但是当 PHP 启动它时，它会永远等待第一个输入。我不知道如何避免这种情况！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:46:40.720

您可以尝试`nohup`在 shell 调用中使用该命令。这应该会导致程序立即返回，因此 PHP 不会等待。您的案例中的代码如下所示：

```
shell_exec("nohup ./fifo_test.r < input.fifo > buffer &"); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:12:05.380

**如果 PHP 脚本正在生成输入**，请使用[popen()](http://php.net/manual/en/function.popen.php)。这样，您可以避免使用命名管道。

**如果输入来自其他来源**，最好不要让您的 PHP 脚本（或它执行的 Ruby 脚本）直接从 FIFO 中读取。我在几年前尝试编写一个用于实时显示捕获的网络数据包的 Web 界面并遇到类似问题时就知道了这一点。

相反，我会编写一个接受 Unix 套接字连接的简单服务器程序。此服务器可以接受来自 FIFO 或其他套接字连接的输入，然后将其发送到 PHP 或 Ruby 脚本的所有运行实例。尽管[Node.js](http://www.nodejs.org/)（用于 JavaScript）、[Twisted](https://twistedmatrix.com/trac/)（用于 Python）和[EventMachine](http://eventmachine.rubyforge.org/)（用于 Ruby）是为此类事情设计的，但您可以在 PHP 的 CLI 版本中[仅使用](http://php.net/manual/en/function.stream-socket-server.php) [核心](http://php.net/manual/en/function.stream-set-blocking.php) [功能编写这样的服务器。](http://php.net/manual/en/function.stream-select.php)

# jquery - 如何从 jQuery 调用 MVC 操作方法？

> ID：14131511
> 
> 赞同：0
> 
> 时间：2013-01-03T00:41:54.510
> 
> 标签：jquery

我有以下代码：

```
.on('click', '#logoutLink', function (e) {
   var $link = $(this);
   var href = $link.attr('data-href');
}); 
```

在 MVC 操作方法中，我有：

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult LogOff()
    {
        WebSecurity.Logout();

        return RedirectToLocal("/");
    } 
```

在 jQuery 中，我熟悉 $('#xx').load(href); 但为此我不需要对返回值做任何事情。有没有一种方法可以让我使用 jQuery 从网页调用此操作方法而无需加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:47:46.310

使用[**jQuery ajax**](http://api.jquery.com/jQuery.ajax/)，你可以执行一个 post 到 action 方法：

```
.on('click', '#logoutLink', function (e) {
    var $link = $(this);
    var href = $link.attr('data-href');

    .ajax({
      type: 'POST',
      url: href,
      data: data // if you have any or leave out
    }).done(function(){ // do something when it is done, or don't });
}); 
```

或使用与此类似的速记版本[**jQuery 帖子**](http://api.jquery.com/jQuery.post/)：

```
.on('click', '#logoutLink', function (e) {
    var $link = $(this);
    var href = $link.attr('data-href');

    $.post(href); // no callback required if you don't need to have it.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T00:46:18.877

看起来你最好使用[window.location](http://www.w3schools.com/js/js_window_location.asp)，因为你似乎想在函数结束时重定向。

如果你真的需要使用 Ajax，请使用[jQuery Ajax](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
  url: "LogOff"
}).done(function() { 
 window.location =
}); 
```

# c++ - 我的源代码是否显示了我自己对 C++ 结构的理解？

> ID：14131512
> 
> 赞同：-1
> 
> 时间：2013-01-03T00:41:59.793
> 
> 标签：c++

我想知道我是否真的走对了方向，我目前正在学习 C++ 语言并阅读 Alex Allian 的这本书，名为 Jumping into C++，本章末尾有一个关于结构的练习问题，创建一个通讯录程序，用户不仅应该能够填写单个结构，而且应该能够添加新条目，每个条目都有单独的姓名和电话号码。让用户根据需要添加任意数量的条目——这很容易做到吗？添加显示所有或部分条目的功能，让用户浏览条目列表。

到目前为止，以下是我所做的，我想知道我的源代码实际上是否正确，它是否显示了我对结构和整体 c++ 的理解？

```
#include "stdafx.h"
#include "iostream"
#include "string"

using namespace std;

struct user{
    string name;
    int phone_num;
};

int _tmain(int argc, _TCHAR* argv[])
{
    int input, number;                      // will hold the users input at the beginning of the program
    int counter = 0;                // keep track of the array position
    int const arraySize = 10;       // size of the array
    user new_username[arraySize]; // will hold the users details    
    string name;                    // will hold the users input for the name

    cout << "CONTACTS\n";
    do{     

        cout << "+ADD [1] -EXIT[0]";
        cin >> input;

        if(input == 1){

                //cout << counter;
                cout << "\nName: ";
                cin >> name;
                new_username[counter].name += name;
                cout << endl << "\nPhone: ";
                cin >> number;
                new_username[counter].phone_num =  number;
                counter++;
            //set_user(counter);            

        }
        cout << "Name    Number\n";
        cout << "--------------\n";
        for(int j=0; j < arraySize; j++){

                cout << new_username[j].name;
                cout << " -- ";
                cout << new_username[j].phone_num;
                cout << "\n";
        } 

        cout << "\n";

    }while(input != 0);

    cout << "\n";
    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:00:11.253

Stackoverflow 不适合用于代码审查，但有一个不同的站点（尽管仍处于测试阶段）：[https ://codereview.stackexchange.com/](https://codereview.stackexchange.com/)

我注意到了一些快速的事情：

*   您的程序忽略无效输入（输入 2、3 或任何其他数字，而不是 1 或 0）。
*   您不检查您的`user`阵列是否已满。
*   这不是真正的面向对象。

至于基本的理解......我想是的，但这实际上并不难开始。

为了实现“允许用户添加任意​​数量的条目”，您必须使用动态数组（询问用户他想添加多少条目）或使用一些动态存储（例如链表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:18:06.980

如果您希望用户能够添加任意数量的联系人，您可以使用强大的标准模板机制。

对于此应用程序，我建议您查看

```
std::vector 
```

或者

```
std::map 
```

这就是您使用它们的方式：（请记住，这是伪代码，不会编译）

```
#include <vector>

typedef struct {
   std::string name;
   double phoneNumber;
} YourStruct;

int main( int argc, char **argv ) {

std::vector<YourStruct> structVector;

do {
    int input;
    std::cin >> input;
    if (input) {
       //(read user input for name and number) 
       YourStruct yourStruct;
       yourStruct.name = (user input)
       yourStruct.phoneNumber = (user input)
       // insert into the vector
       structVector.push_back(yourStruct)
    }
} while (input != 0)

// now to print what you have:
for (int i = 0; i < structVector.size(); i++) {
    std::cout << structVector[i].name << ", " << structVector[i].number << std::endl;
}
} 
```

使用向量的好处是它会自动调整大小并跟踪它的大小，而无需使用计数器项目。

现在，对于一些更棘手的事情。我们将使用映射来使用“键”值来获取名称。以下代码不会编译，但它在功能上是您执行任务的方式：

```
#include <map>

int main(int argc, char** argv) {
    std::map<std::string,double> myMap;
    // the string is the "key" value, which can be the name of the person
    // while the "independent" is the phone number
    do {
       // determine if the user wants to put another entry in the map
       if (insert) {
          std::string name = (user input name)
          double number = (user input number)
          myMap[name] = number;
       }
    } while (input != 0)

    // now we can iterate through the map
    std::map<std::string,double>::iterator it;
    for (it = myMap.begin(); it != myMap.end(); ++it) {
       std::cout << it.first << ", " << it.second << std::endl; 
    }

    // also, you can look up by name
    it = myMap.find("Tony Stark");
    if (it != myMap.end()) { // if this condition is met, it means you found one
       std::cout << it.first << ", " << it.second << std::endl; 
    }
} 
```

总的来说，您的代码看起来不错。但是，它不是 C++。您正在像 C 程序员一样编程。C++ 的美妙之处（当然，除了 polymophisim 之外）是强大的模板库。

我刚刚向您介绍了使用模板可以做什么。如果您有任何疑问，请发表评论。我们都曾到过你所在的地方，感谢你从一本书中自学。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:20:41.380

从您的问题和代码来看，您似乎是一名新程序员，因此我将向您解释答案，并为您的代码提供一些注释。

为了解决“尽可能多的项目”的问题，很少有方法。最简单的，也可能是一个很好的解决方案是使用[map](http://www.cplusplus.com/reference/map/map/)，在任何语言中它都有不同的名称。但通常名称是字典，关联数组......

使用地图将帮助您处理：

*   尽可能多的项目
*   按名称排序
*   你会更容易过滤，这取决于你想做什么，以及你的过滤器有多复杂。

我谈到的其他方法虽然更基本，并且包含更多代码，但它们让您感觉如何自己实现*地图*对象，但这是一个不同的问题。

在我上面提到的链接中，该示例用于电话输入。但是如果你仍然想使用结构，你可以将键作为名称，将值作为结构本身。这样做的一个理由可能是稍后您计划添加地址和公司名称。

关于您的代码的一些注释。

```
 #include "stdafx.h"
 #include "iostream"
#include "string"

using namespace std;

//use meanigful name, instead of user it can be phoneEntry
struct user{
    string name;
//Starting using the following conventions using the capital letter in variable names for example phoneNumber 
```

//int 不会是电话号码的上帝，因为有时您需要星号或哈希，或前导零，可能是加号。最好也使用字符串作为 tat。当然，每次您获得用户输入时，您都应该验证它 int phone_num; };

```
//Why the name of the function is not main, why its _tmain
int _tmain(int argc, _TCHAR* argv[])
{
//Keep going with your comments, with time you would imbrase your own style based on things that you will see. But in general commenting is very important
//Give meanigful name, instead input userCommand for example
    int input, number;                      // will hold the users input at the beginning of the program
    int counter = 0;                // keep track of the array position
    int const arraySize = 10;       // size of the array
//Again meangful names
    user new_username[arraySize]; // will hold the users details    
    string name;                    // will hold the users input for the name

    cout << "CONTACTS\n";
    do{     

        cout << "+ADD [1] -EXIT[0]";
        cin >> input;

        if(input == 1){

                //cout << counter;
                cout << "\nName: ";
                cin >> name;
                new_username[counter].name += name;
                cout << endl << "\nPhone: ";
                cin >> number;
                new_username[counter].phone_num =  number;
                counter++;
            //set_user(counter);            

        }
        cout << "Name    Number\n";
        cout << "--------------\n";
        for(int j=0; j < arraySize; j++){

                cout << new_username[j].name;
                cout << " -- ";
                cout << new_username[j].phone_num;
                cout << "\n";
        } 

        cout << "\n";

    }while(input != 0);

    cout << "\n";
    system("PAUSE");
    return 0;
} 
```

我希望它有帮助

# jquery - jQuery Ajax 从购物车中删除特定项目

> ID：14131515
> 
> 赞同：1
> 
> 时间：2013-01-03T00:42:11.950
> 
> 标签：jquery, jquery-selectors, shopping-cart

我有一个购物车。我的购物车对每个项目都有删除按钮，如下所示：

```
....
<tr style="text-size:0.8em">
    <td>Music CD</td><td>23</td><td>£51.89</td>
    <td>
        <form method="post" action="" class="remove">
        <input type="hidden" name="pid" value="1" />
        <input type="image" src="http://.../.../delete.png" name="remove" class="remove" value="x" text="x"/>
        </form>
    </td>
</tr>
<tr style="text-size:0.8em">
    <td>DVD</td><td>5</td><td>£12.23</td>
    <td>
        <form method="post" action="" class="remove">
        <input type="hidden" name="pid" value="2" />
        <input type="image" src="http://.../.../delete.png" name="remove" class="remove" value="x" text="x"/>
        </form>
    </td>
</tr>
.... 
```

和 jQuery

```
jQuery('.remove').submit(function(data) {
    // Validate & remove item from cart stuff 
    return false;
}); 
```

我的表单通过发布表单来工作，但是我希望将其 ajaxify。

我如何告诉 jQuery 从篮子中删除哪个 pid？

如何修改 html 和 js 以便我的 jQuery 脚本知道要从购物篮中删除哪个特定产品 (pid)？

为了清楚起见...您将看到此示例中有两种形式。如果购物车中有更多商品，就会有更多表单......那么当表单之间的唯一区别是 pid 时，我如何告诉 jQuery 提交了哪个表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:13:03.867

很高兴知道你解决了你的问题，肉汁。

这是使用您以前的标记的一些替代方法（在您的问题中发布的）：

```
$(".remove").click(function(e) {
    pid = $(this).siblings("#name").attr("value");
    // You got the pid. Continue by removing this pid from your cart
}); 
```

或者

```
$(".remove").click(function(e) {
    pid = $(this).siblings("input:hidden").attr("value");
    // You got the pid. Continue by removing this pid from your cart
}); 
```

这样您就不必弄乱删除按钮。

PS：抱歉回复晚了。我正在检查一些参考资料以获取答案。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:04:17.007

感谢 Amir 解决了问题：

```
jQuery('.remove').click(function(data) {
    var pid = jQuery(this).attr('name');
    alert(pid);
    return false;
}); 
```

HTML 更改

```
<input type="image" src="http://.../.../delete.png" name="1" class="remove" /> 
```

我将产品的 pid 设置为删除按钮的名称。

# asp.net - Cookie 不是持久的

> ID：14131518
> 
> 赞同：1
> 
> 时间：2013-01-03T00:42:21.450
> 
> 标签：asp.net, cookies, persistence

我正在使用 ASP.net 来存储 cookie。我在后面的代码（C#）中的弹出窗口中保存了一个 cookie。如果我在弹出窗口关闭之前请求 cookie，那么 cookie 就在那里，但是关闭弹出窗口并返回它并查看 Page_Load 事件中的 cookie 显示没有 cookie。我如何让它坚持下去？

弹出确定按钮中的以下代码

```
// Set the cookie.
this.Response.Cookies["UserData"].Secure = true;
this.Response.Cookies["UserData"]["UserId"] = iId.ToString();
this.Response.Cookies["UserData"]["UserEmail"] = strEmail;
this.Response.Cookies["UserData"].Expires = DateTime.Now.AddDays(1); 
```

以下代码放置在 Page_Load 事件中

```
// Get the cookie.
if (null != this.Request.Cookies["UserData"])
{
    // Transmit the cookie information using SSL. Note, the cookie data is still in plain text on the user's computer.
    this.Request.Cookies["UserData"].Secure = true;

    // Extract: Email
    String strEmail = this.Server.HtmlEncode(oPage.Request.Cookies["UserData"]["UserEmail"]);
} 
```

自然，第一次将显示空，但随后的加载应显示 cookie。

使用 .Values["Subitem"] = "whatever" 时我的运气稍好一些，但这使基础得以持续存在，但所有子项都消失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:53:09.060

一个可能的原因：您的页面是 HTTP，但您将 cookie 设置为仅限 HTTPS。因此浏览器根本不会将它们与 HTTP 请求一起发送回您的站点。

使用 Fiddler（或其他 HTTP 调试器）查看 cookie 是否在响应（和下一个请求）中正确发送。

# .htaccess - 如何编写这个 .htaccess 重写规则

> ID：14131524
> 
> 赞同：1
> 
> 时间：2013-01-03T00:42:59.550
> 
> 标签：.htaccess, routing

我正在使用 .htaccess 文件中的 mod rewrite 设置 MVC 样式路由系统（以及一些 php 解析。）

我需要能够将不同的 URL 指向将用作控制器的不同 php 文件。（index.php、admin.php 等...）

我通过查看第一个斜杠后的第一个单词，找到并编辑了一个重写规则：

```
RewriteCond %{REQUEST_URI} ^/stats(.*)
RewriteRule ^(.*)$ /hello.php/$1 [L] 
```

但是，我的问题是我希望它根据第二个单词而不是第一个单词重写。我希望第一个单词是用户名。所以我想要这个：

[http://www.samplesite.com/username/admin](http://www.samplesite.com/username/admin) 重定向到 admin.php

代替：

[http://www.samplesite.com/admin](http://www.samplesite.com/admin)

我想我只需要使用'anything can be here'类型变量稍微编辑重写规则，但我不确定如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:52:45.463

我想您可以在 [^/]+/ 前面加上前缀来匹配并忽略该用户名/

```
RewriteCond %{REQUEST_URI} ^/[^/]+/stats(.*)
RewriteRule ^[^/]+/(.*)$ /hello.php/$1 [L] 
```

然后[http://www.samplesite.com/username/statsadmin](http://www.samplesite.com/username/statsadmin) 将被重定向到[http://www.samplesite.com/hello.php/statsadmin](http://www.samplesite.com/hello.php/statsadmin)（或者，我不知道 .htaccess 文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:12:03.263

要回答您的问题，“这里可以是任何类型的变量”就像句号一样`.`-它的意思是*“任何字符”*。星号也`*`表示*“零个或多个前面的字符或带括号的分组字符”*。

但我认为您不需要...如果您的匹配 url 将始终以结尾，`"admin"`那么您可以使用美元符号`$`来匹配字符串的结尾。

```
Rewrit­eRule admin$ admin.php [R,NC,L] 
```

重写`www.anything.at/all/that/ends/in/admin`为`www.anything.at/admin.php`

# apache - .htaccess 忽略文件夹名称

> ID：14131526
> 
> 赞同：1
> 
> 时间：2013-01-03T00:43:11.080
> 
> 标签：apache, .htaccess

我正在尝试使用`.htaccess`创建干净的 url，但我在文件夹名称方面遇到了问题。

我想要类似的东西：

```
mydomain.com/test 
```

重定向到： `mydomain.com/?p=test`但保持干净的 url`mydomain.com/test`

它工作得很好，问题是当我尝试重定向与文件夹名称相同的名称时，例如，如果`test`是文件夹名称，当我重定向它时它可以工作，但 url 将类似于`mydomain.com/test/?p=test`insted`mydomain/test`

我已经尝试了很多配置，但都没有工作，目前我的`.htaccess`文件如下所示：

```
RewriteEngine On 
RewriteBase /
RewriteRule ^([a-zA-Z0-9-]+)/?$ ?p=$1 [NC,QSA,L] 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:48:39.040

试试这个`RewriteRule ^(.*?\.php)/([^/]*)/([^/]*)(/.+)? $1$4?$2=$3 [NC,N,QSA]` 这会检查文件扩展名。

# iphone - 关于 UIRotationGestureRecognizer

> ID：14131531
> 
> 赞同：3
> 
> 时间：2013-01-03T00:44:11.187
> 
> 标签：iphone, objective-c, ios, ipad, uigesturerecognizer

可以得到 UIRotationGestureRecognizer 的两个手指的中点坐标吗？或者每个手指的位置？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T00:51:08.400

你可以得到任何一个。

`UIRotationGestureRecognizer`显示属性的文档`velocity`和`rotation`.

这是特定于旋转的。

但是您可以使用 UIGestureRecognizer 中的这些方法...

```
Getting the Touches and Location of a Gesture
– locationInView:
– locationOfTouch:inView:
– numberOfTouches 
```

获得触摸和位置。

从这些你可以很容易地计算出中点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T00:50:44.863

`UIRotationGestureRecognizer`extends`UIGestureRecognizer`有两种方法：`numberOfTouches`和`locationOfTouch:inView:`. 使用这些来获取每个手指的位置。从那里你可以计算一个中心。

# javascript - 为什么我没有正确递增/递减？

> ID：14131539
> 
> 赞同：0
> 
> 时间：2013-01-03T00:44:56.477
> 
> 标签：javascript, jquery, jquery-cycle

我一直致力于构建一个带有自定义动画和 prev/next 功能的 jquery 循环。请参阅[旧问题](https://stackoverflow.com/q/14075037/1905842)。我无法弄清楚如何使用循环（）来做到这一点。所以我建立了这个：[JSFiddle](http://jsfiddle.net/edubs/zmzzS/2/)。但是，正如所写，每个函数（prevcycle 和 nextcycle）只能工作一次，因为我没有正确地增加/减少我的变量。我做错了什么？

我对这一切都是新手，所以欢迎和赞赏所有建设性的批评。

这是我的脚本：

```
$(document).ready(function() {

var slideCount = $('div.slide').length,
    centSlide = 0, // enter 1 to test prevcycle
    prevSlide = centSlide - 1,
    nextSlide = centSlide + 1;

// initialize
$('.slide:eq('+centSlide+')').addClass('liveslide');
if (prevSlide >= 0 && prevSlide < slideCount) {
    $('.slide:eq('+prevSlide+')').addClass('prev');    
};
if (nextSlide < slideCount) {
    $('.slide:eq('+nextSlide+')').addClass('next');    
};

// next cycle code
$('.slide:eq('+nextSlide+')').click(function() {
    nextcycle(centSlide, slideCount);
});

// prev cycle code
$('.slide:eq('+prevSlide+')').click(function() {
    prevcycle(centSlide, slideCount);
});

// construct functions
function nextcycle(x, y) {
    centSlide = x + 1;
    prevSlide = centSlide - 1;
    nextSlide = centSlide + 1;

    $('.slide:eq('+x+')').removeClass('prev');
    $('.slide:eq('+centSlide+')').animate({
        left: 0,
        height: '90%',
        top: 0    
    }, 1000).removeClass('next').addClass('liveslide');
    if (prevSlide >= 0 && prevSlide < y) {
        $('.slide:eq('+prevSlide+')').animate({
        left: '-79%', 
        height: '80%',
        top: '5%',
    }, 1000).removeClass('liveslide').addClass('prev');    
    };
    if (nextSlide < y) {
        $('.slide:eq('+nextSlide+')').css('left','100%').animate({
        left: '79%'
        }, 1000).addClass('next')
    };
};

function prevcycle(x, y) {
    centSlide = x - 1;
    prevSlide = centSlide - 1;
    nextSlide = centSlide + 1;
    n = x + 1;

    $('.slide:eq('+n+')').removeClass('next');
    $('.slide:eq('+centSlide+')').animate({
        left: 0,
        height: '90%',
        top: 0    
    }, 1000).removeClass('prev').addClass('liveslide');
    if (prevSlide >= 0 && prevSlide < y) {
        $('.slide:eq('+prevSlide+')').css('left','-100%').animate({
        left: '-79%'
        }, 1000).addClass('prev');    
    };
    if (nextSlide < y) {
        $('.slide:eq('+nextSlide+')').animate({
        left: '79%', 
        height: '80%',
        top: '5%',
    }, 1000).removeClass('liveslide').addClass('next');    
    };
};

}); // end ready​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:52:07.533

问题是您在开始时设置事件侦听器，当 centSlide 为 0 时...意味着您仅在侦听相对于其起始位置的事件。

我修改了您的点击处理程序以考虑 centSlide 的当前值，它工作得很好：

[http://jsfiddle.net/hjNZD/](http://jsfiddle.net/hjNZD/)

干杯

```
 $('.slide').click(function() {
      var index = $('.slide').index(this);
      if (index > centSlide) nextcycle(centSlide, slideCount);
      if (index < centSlide) prevcycle(centSlide, slideCount);
      return false;        
    }); 
```

# php - 邮件功能中地址的PHP邮件设置

> ID：14131542
> 
> 赞同：0
> 
> 时间：2013-01-03T00:45:06.073
> 
> 标签：php, apache

好的，所以我在我正在处理的网站上的 2 个单独页面上设置了一个 php 邮件程序。我以前在我建立的网站上处理过邮件中的所有内容，并且在设置所有变量后如何设置电子邮件很简单：

```
mail("$email",
     "Receipt: $thesubject",
     "$message",
     "From: $replyemail\nReply-To: $replyemail"); 
```

这就是联系（处理）页面末尾的内容。我将 $email 和 $replyemail 放入 $message 中，它们在发送到 $email 指定的我的电子邮件的消息中正确显示。

我不太明白的部分是消息说它来自的地址不是 $replyemail 而是它说它是从以下地址发送的：

```
rtl.srv@gmail.com 
```

我看到了一些类似的帖子，但没有一个解决了这个问题，我按照[这个](https://stackoverflow.com/questions/179014/how-to-change-envelope-from-address-using-php-mail)并检查以确保服务器 php.ini 文件具有 SAFE_MODE = off。然后添加

```
'-f $replyemail' 
```

到上面的邮件功能的末尾，就像那个链接建议的那样，但它没有改变任何东西......我在其他地方看到它解释说你可能必须将电子邮件地址添加到文件 /etc/mail/trusted-users 但是问题是电子邮件是动态的。由于该电子邮件名称是用户输入的电子邮件名称。然后将电子邮件发送给站点管理员进行审核，我希望电子邮件说明它来自填写表格的用户电子邮件。

我知道变量设置正确，因为它们在电子邮件消息中被正确打印出来。因此，如果有人知道为什么会发生这种情况或我该如何解决它，我将不胜感激。

该项目是在 wordpress 中构建的，但我只是通过 SSH 将文件放到服务器上，不确定这是否与它有关。

谢谢，

-艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:48:14.627

有很多问题可能会导致这种情况，前段时间我在构建网站时遇到了这个问题。我通过首先创建一个函数来为我处理邮件解决了这个问题：

```
function mailouthtml($to, $title, $body, $from){
    if(!isset($from)){
        $from = 'Default Sender<address@example.com>';
    }
    $header .= "Reply-To: $from\r\n"; 
    $header .= "Return-Path: $from\r\n"; 
    $header .= "From: $from\r\n"; 
    $header .= "Organization: Example.com, Inc.\r\n"; 
    $header .= "Content-Type: text/html\r\n"; 
    mail($to,$title,$body,$header,"-f $from");
} 
```

让我稍微分解一下。该函数需要收件人地址、电子邮件标题、电子邮件正文和发件人地址。发件人地址用于向电子邮件标题添加信息。电子邮件的标题信息告诉邮件服务器如何处理您的电子邮件，它需要一些信息才能正确处理邮件。

PHP中的mail()函数格式如下：

```
mail($to,$title,$body,$headers,$additional_parameters); 
```

我在这里创建的 mailouthtml() 函数手动构造了标头，并添加了附加参数“-f $from”以明确设置“From”字段。$from 变量在函数调用中是可选的；如果它不存在，它会设置一个默认值。[您可以在此处](http://php.net/manual/en/function.mail.php)找到有关邮件功能的更多信息。

请注意以下事项：

*   大多数 MTA 需要回复、返回路径和发件人字段，否则可能会被标记为垃圾邮件。
*   Content-Type 是必需的，告诉邮件服务器正在传递什么类型的内容，通常是 text/html 或 text/plain。
*   如果没有指定，我有一个 if(){} 语句设置默认地址。如果您不想指定名称，可以省略“默认发件人”。您也可以将其更改为您想要的任何内容。
*   组织是可选的。

我还建议您在您的域名上启用[SPF](http://en.wikipedia.org/wiki/Sender_Policy_Framework) ，并在您的邮件上启用[DKIM签名。](http://www.dkim.org/)这些都是通过您的域名的 DNS 条目实现的。如果您无法访问它，那没什么大不了的；它们旨在控制垃圾邮件。

此外，如果您有专用服务器和自己的 IP 地址，请确保设置了[反向 DNS](http://en.wikipedia.org/wiki/Reverse_DNS_lookup)记录。这也将有助于外国 MTA 识别您的消息是真实的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:57:00.717

不要给自己做这个。使用一些成熟的库，如[phpmailer](http://phpmailer.worxware.com/)或[swiftmailer](http://swiftmailer.org/)，它们将帮助您避免此类麻烦......我知道还有更多的包含等，但没有必要为此而战。如果您仍想这样做，请尝试设置标题`Returh-path`

# birt - Birt Report Engine API 中不支持输出格式

> ID：14131545
> 
> 赞同：2
> 
> 时间：2013-01-03T00:45:17.440
> 
> 标签：birt

我想在 Eclipse Indigo 中将以前设计的 BIRT 报告呈现为 HTML。我正在使用 BIRT 4.2.1。当我在普通的 Java 应用程序中执行此操作时，它运行良好。但是，当我想从 RCP 应用程序中执行相同操作时，它不会。

这是我的代码：

```
 IRunAndRenderTask task=null;
    IReportEngine engine=null;
    EngineConfig config = null;
    IReportRunnable design = null;

    try{

        config = new EngineConfig( );

        IReportEngineFactory factory = (IReportEngineFactory) Platform.
        createFactoryObject( IReportEngineFactory.EXTENSION_REPORT_ENGINE_FACTORY );

        engine = factory.createReportEngine( config );
        //use this if the report is in the bundle
        Bundle bundle = org.eclipse.core.runtime.Platform.getBundle("com.accenture.workforceplanning.ui");      
        URL url = FileLocator.find(bundle, new Path("/reports/scenarioAnalysis.rptdesign"), null);
        String rpt = FileLocator.toFileURL(url).getPath();

    //Open the report design
    design = engine.openReportDesign(rpt); 
    task = engine.createRunAndRenderTask(design);

    HTMLRenderOption options = new HTMLRenderOption();      
    options.setImageDirectory("./");
    URL url1 = FileLocator.find(bundle, new Path("/reports"), null);
    String rpt1 = FileLocator.toFileURL(url1).getPath();
    options.setOutputFileName(rpt1 +"/scenarioAnalysis.html");
    options.setOutputFormat("html");

    task.setRenderOption(options);
    task.run();
    task.close();
    engine.destroy();
    }catch( Exception ex){
        ex.printStackTrace();
    } 
```

当程序到达 task.run() 时，我收到以下错误：

```
org.eclipse.birt.report.engine.api.UnsupportedFormatException: The output format html is not supported.
    at org.eclipse.birt.report.engine.api.impl.EngineTask.setupRenderOption(EngineTask.java:2047)
    at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.doRun(RunAndRenderTask.java:96)
    at org.eclipse.birt.report.engine.api.impl.RunAndRenderTask.run(RunAndRenderTask.java:77)
    at com.accenture.workforceplanning.ui.composites.OutputComposite.reportToHtml(OutputComposite.java:470)
    at com.accenture.workforceplanning.ui.composites.OutputComposite.createReportScenarioAnalysis(OutputComposite.java:410)
    at com.accenture.workforceplanning.ui.composites.OutputComposite.access$6(OutputComposite.java:308)
    at com.accenture.workforceplanning.ui.composites.OutputComposite$4.widgetSelected(OutputComposite.java:214)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at com.accenture.workforceplanning.application.Application.start(Application.java:26)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

对于我要渲染的任何类型的输出格式，它都会发生相同的情况。

知道我做错了什么吗？

谢谢

玉乐溪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:57:27.363

我已经设法解决了问题。万一有人遇到同样的问题，我就是这样做的： *我手动将所有 BIRT 插件添加到我的 RCP 应用程序产品的依赖项中*（由于某种原因，没有添加所需的插件）。我仍然不知道丢失的插件是什么。但该应用程序现在工作正常。

# php - 如果多行不存在则插入，如果存在则更新

> ID：14131546
> 
> 赞同：1
> 
> 时间：2013-01-03T00:45:35.077
> 
> 标签：php, mysql, insert, sql-update

我有一张看起来与此类似的表...

```
+-------------+-------------+
| Field       | Type        |
+-------------+-------------+
| var1        | varchar(15) |
| var2        | varchar(25) |
| var3        | int(1)      |
+-------------+-------------+ 
```

问题是我需要能够插入 3 个变量，但前提是 var1 和 var2 不在表中。如果 var1 和 var2 已在表中，则应更新 var3。

所以例如

```
INSERT INTO table (var1, var2, var3) VALUES('0','1','2') 
```

将插入 3 个值，但是

```
INSERT INTO table (var1, var2, var3) VALUES('0','1','1') 
```

将 ('0','1','2') 更新为 ('0','1','1')

重要的是，如果 var1 和 var2 存在，则不会输入具有不同 var3 的重复条目。

我查看了其他一些问题，但其中大多数似乎都推荐 IGNORE ，因为我正在检查多个重复项，因此我认为这对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:54:40.830

一、设置`(var1,var2)`为组合`PRIMARY KEY`

```
ALTER TABLE table ADD PRIMARY KEY(var1,var2) 
```

然后使用[`INSERT ON DUPLICATE UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

```
INSERT INTO table (var1, var2, var3) VALUES ('0','1','2') ON DUPLICATE KEY UPDATE var3 = '2' 
```

# regex - 使用正则表达式减少一行？

> ID：14131547
> 
> 赞同：0
> 
> 时间：2013-01-03T00:45:43.830
> 
> 标签：regex

我有这样的一行：

**andy_1972** * andy@ip.address 0 0 0 0 0 0 **119075** 224 1342751704 1348550270

我希望最终结果是粗体字符，如下所示：

```
andy_1972 119075 
```

我试图将行修剪到单词和从行尾开始的第 4 个数字。

我如何使用正则表达式来做到这一点？我正在使用记事本++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:56:04.490

这将匹配第一个单词和倒数第四个数字：

```
^(\w+).* (\d+) \d+ \d+ \d+$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T00:56:39.983

在 perl 兼容（perl 或 PCRE）中，这将是

```
$string = "andy_1972 * andy@ip.address 0 0 0 0 0 0 119075 224 1342751704 1348550270";
$string =~ /^(\w+).* (\d+) \d+ \d+ \d+$/;
print $1 $2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:15:11.230

使用剪切：

```
echo andy_1972 \* andy@ip.address 0 0 0 0 0 0 119075 224 1342751704 1348550270 |
    cut -d' ' -f1,10 
```

# python - 带有字符串的Python正则表达式

> ID：14131548
> 
> 赞同：1
> 
> 时间：2013-01-03T00:45:54.377
> 
> 标签：python, regex

我想将字符串与以下内容匹配：

```
re.match(r'<some_match_symbols><my_match><some_other_match_symbols>', mystring) 
```

其中 mymatch 是我希望它找到的字符串。问题是它有时可能会有所不同，并且它存储在一个变量中。是否可以将一个变量添加到正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:12:22.633

没有什么能阻止你简单地这样做：

```
re.match('<some_match_symbols>' + '<my_match>' + '<some_other_match_symbols>', mystring) 
```

正则表达式只不过是包含一些特殊字符的字符串，特定于正则表达式语法。但它们仍然是字符串，所以你可以做任何你习惯用字符串做的事情。

`r'…'`语法是顺便说一句。一种原始字符串语法，它基本上只是防止字符串内的任何转义序列被评估。所以`r'\n'`将与`'\\n'`包含反斜杠和`n`;的字符串相同。同时`'\n'`包含换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:07:20.170

```
import re
url = "www.dupe.com"
expression = re.compile('<p>%s</p>'%url)
result = expression.match("<p>www.dupe.com</p>BBB")
if result:
  print result.start(), result.end() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T00:48:01.173

该`r''`符号用于常量。使用该`re`库从变量编译。

# c# - 测试策略建议 - 需要记录运行方法的验证结果并将其用于测试目的

> ID：14131552
> 
> 赞同：4
> 
> 时间：2013-01-03T00:46:25.370
> 
> 标签：c#, testing

我是测试新手，我需要关于最佳测试策略（及其应用）的建议。这是我的问题：

我有一个程序可以读取文件并自动提取其结构。我想测试进行这种“智能”提取的方法。最初，我可以使用一些文件来检查该方法是否进行了正确的提取。然后我想使用这些文件和（正确的）提取结果进行测试。由于提取结果已经过验证，它们应该（并且必须）用于进一步的测试。

所以，我有类似的东西：*对于“这个特定的文件”，我期望“这个结果”。*

问题：

1.  很容易获得测试的输入文件。我会将它们存储在特定目录中。结果呢？它们影响存储文件结构的对象的内容。在这种情况下，我可能还需要将此对象保存在文件中。有了序列化，恐怕随着对象结构的改变，之前保存的对象就很难复用了。

2.  随着越来越多的结果，我可能有数百个文件和结果，测试将花费大量时间。我希望测试时间不会是一个大问题。

我需要测试，因为我在方法中使用的“提取算法”会经常改变。为了拥有完美的提取算法，我无法应对所有可能性。所以，我的解决方案是构建一个在十几个文件中工作的初始算法，每次我发现特定文件的算法失败时，我都会更改算法以解决该文件的问题。应测试此更改以使以前的文件和结果仍然有效。

对测试策略有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:50:44.250

对于测试，您需要一个可以注入输入测试数据的地方和一个可以观察某些行为或输出的地方。

在输入方面：文件真的是注入输入测试数据的唯一可能性吗？如果是，则该应用程序没有良好的可测试设计。带有文件的测试很难维护。在输出端：应用程序似乎没有提供观察行为或输出的可能性。这指向不可测试的设计。

即使您找到一种方法来观察我们的输出行为，也只会对所有提取算法进行端到端测试。这样的端到端测试是脆弱的并且是维护的噩梦。原因是一个不好的可测试设计。

如果没有良好的可测试设计，您将无法实施良好的测试策略。您将需要更改应用程序的设计。另一方面，您可能会争辩说您不想在没有任何测试的情况下更改设计。这似乎是一个先有鸡还是先有蛋的问题。

如何摆脱这样的局面？测试和重构策略的组合可能会有所帮助。在高层次上，这可能像这样工作：

1.  构建一些有代表性的端到端测试。因此，甚至使用序列化技巧。这只是为了验证您的程序是否像开始重构之前一样工作。它们充当*迁移测试*。

2.  重构你的程序。给它注射和观察的地方。这样的地方被称为*接缝*。

3.  结果，您将拥有可测试的块，您可以将其放入 *测试工具*中。

4.  你重构并在代码中加入新的接缝，以测试更小的块，直到你有*单元测试*到位。理想情况下，您会将所有算法封装到一个类家族中，这些类都经过单元测试。

听起来很辛苦？不，实际上它比听起来更难。将应用程序重构为可测试的设计需要大量经验。幸运的是，有人为此写了一本书：[Michael Feather 的 'Working Effectively with Legacy Code'](http://books.google.at/books/about/Working_effectively_with_legacy_code.html?id=CQlRAAAAMAAJ&redir_esc=y)。

如果您真的非常想为现有应用程序实施一个好的测试策略，那么请阅读那本书。如果你想知道下次你能做的更好，读那本书。如果您认为单元测试可能是避免不可测试设计的关键，那么现在就开始学习单元测试。互联网上有很多关于单元测试的资源和书籍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T14:21:07.197

如果我了解问题所在，您需要保留测试结果以供以后检查或额外测试。它通常不愿意在编写测试代码上投入太多时间，但在这种情况下，我认为没有立即可用的替代方案。

我的建议是尽可能多地解耦所涉及的部分：算法、持久层（序列化/反序列化）、其产品和验证码。

以后的算法实现也有可能共享相同的接口，例如：

```
interface IMyAlgorithm {
  AbstractOutput DoSomething (InputData);
}

class ConcreteOutput : AbstractOutput {
  // Output for version XXX of your algorithm
}

class XXXAlgorithm {
  ConcreteOutput DoSomething (InputData inputData)
    // Version XXX of you alogorithm
  }
}

interface IPersistenceManager {
  Serialize(AbstractOutput output, string filename);
  AbstractOutput Deserialize(string filename)
}

class XXXPersistenceManager : IPersistenceManager {
  // Handle persistence for XXX hierarchy
}

class XXXTestFixture {
  void BuildObjectWithXXXAlgorithm() {
    IMyAlgorithm XXX = new XXXAlgorithm();
    // run XXX here
    AbstractOutput objXXX = XXX.DoSomething(new InputData());
    IPersistenceManager pmXXX = new XXXPersistenceManager();
    pmXXX.Serialize(objXXX);
  }

  void VerifyThatXXXWorkAsExpected() {
    IPersistenceManager pmXXX = new XXXPersistenceManager();
    AbstractOutput objXXX = pmXXX.Deserialize(path);
    // check object here
  }
} 
```

所以当你需要创建一个新算法时，比如 YYY，你就创建了相应的层次结构。无论如何我不知道细节，这只是一个伪代码草稿，放在这里只是为了强调松散耦合的应用程序组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T15:41:24.713

您可以尝试使用[批准](http://approvaltests.sourceforge.net/)测试来验证给定的输入文件是否始终在 memory-object-graph 中生成相同的文件。

为此，您需要将内存中对象图转换为其字符串表示形式的代码（即覆盖 ToString() 或具有 xml-serializer）

Approvaltests 验证生成的字符串是否始终相同。

如果字符串表示更改，您将获得一个 diff-viewer，并要求您验证更改是否仍然正常。如果更改正常，您将将此结果用于以后的验证。

# sql-server - 无论如何，SQL Server Profiler 是否可以记住列宽？

> ID：14131553
> 
> 赞同：8
> 
> 时间：2013-01-03T00:46:38.407
> 
> 标签：sql-server, sql-server-profiler

我已将 SQL Server Profiler 设置为仅报告与我相关的事件，并且效果很好。但是，我认为糟糕的是它不记得列宽。我可以正确设置它们并将其保存为 Profiler 模板，但下次我开始跟踪时，它会忘记列宽。

有没有技巧，或者我错过了一些简单的东西，或者它根本没有保存这些值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-04T23:17:30.230

我确定这个功能不存在。我建议您请求一个新功能，似乎很多人会投票支持它。

[这是与 SQL 团队联系并提出建议的链接。](http://connect.microsoft.com/SQLServer)

# python - 使用 OpenPyXL 读取提取的 XLSX 文件

> ID：14131556
> 
> 赞同：0
> 
> 时间：2013-01-03T00:47:08.227
> 
> 标签：python, python-3.x, xlsx, zipfile, openpyxl

所以我一直在使用 Python 3.2 和 OpenPyXL 的可迭代工作簿[，如“优化阅读器”示例](http://openpyxl.readthedocs.org/en/latest/optimized.html)中所示。

***当我尝试使用此策略读取从简单的 .zip 存档（手动和通过 python zipfile 包*）中提取的一个或多个文件时，我的**问题就出现了。**当我打电话时，`.get_highest_column()`我得到“A”，`.get_highest_row()`我得到 1，当被要求打印每个单元格的值时，如下所示：**

 **```
wb = load_workbook(filename = file_name, use_iterators = True)
ws = wb.worksheets[0]    # Only need to read the first sheet, nothing fancy
for row in ws.iter_rows():
    for entry in row:
        print(entry.internal_value) 
```

无论文件实际有多大，它都会打印 A1、A2、A3、A4、A5、A6 和 A7 中的值。文件本身没有任何原因，它会在 Excel 中完美打开。我很困惑为什么它会这样，但我假设解压缩的 XLSX 在从 Excel 中保存之前的格式不同，并且 OpenPyXL 无法正确解释它。我什至将“.xlsx”重命名为“.zip”，这样我就可以探索文件并检查差异，但除了从 Excel 保存的那个在“xl " 以前版本没有的文件夹，包含字体和格式数据。

重要提示：当我在 Excel 中打开它并使用相同的文件名重新保存它，*然后*运行这段代码时，它可以**完美**运行- 返回正确的最大行和列值，并正确打印每个单元格值。我尝试在打开工作簿后立即通过 OpenPyXL 保存工作簿，但这会产生相同的错误结果。

基本上，我需要找到一种从**.zip文件中正确提取****.xlsx**文件的方法，以便可以使用 OpenPyXL 读取它。有很多很多文件需要像这样处理，所以它必须在 Excel 外部，并且希望尽可能高效。

 **干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:44:13.923

听起来这与从 zipfile 中提取无关，因为如果您手动提取文件也会出现问题。我会尝试将使用 Excel 打开和保存的文件存储在一个 zipfile 中，看看会发生什么。如果这样可行，那么显然原始`.xlsx`文件的生成方式就是问题所在。我强烈怀疑是这样的。

如果这是问题所在，请查看您是否可以提取`.xlsx`文件（它们本身就是 zip 文件）并将您使用 Excel 重新保存的文件与原始有问题的文件进行比较。xml 不容易比较，因为 Excel 可以随意重新排列大多数内容，但您也许可以进行比较。****

# cassandra - CQL3 选择某些键成功，但其他键失败

> ID：14131558
> 
> 赞同：1
> 
> 时间：2013-01-03T00:47:17.760
> 
> 标签：cassandra, cql3

我有一个非常简单的 CQL3 表：

```
CREATE TABLE user_team_scores (
username text,
team_slug text,
score double,
PRIMARY KEY (username, team_slug)
) WITH
comment='' AND
caching='KEYS_ONLY' AND
read_repair_chance=0.100000 AND
gc_grace_seconds=864000 AND
replicate_on_write='true' AND
compaction_strategy_class='SizeTieredCompactionStrategy' AND
compression_parameters:sstable_compression='SnappyCompressor'; 
```

我可以运行如下查询：

```
select * from user_team_scores where username='paulingalls'; 
```

并且对于某些用户名成功，但对于其他用户名失败并超时。

我正在运行一个 3 节点集群，并且在我假设的节点上有失败的用户名的令牌范围我在日志中看到以下堆栈跟踪：

```
ERROR [ReadStage:66211] 2013-01-03 00:11:26,169 AbstractCassandraDaemon.java (line 135) Exception in thread Thread[ReadStage:66211,5,main]
java.lang.AssertionError: DecoratedKey(82585475460624048733030438888619591812, 001373616e2d6672616e636973636f2d343965727300000573636f726500) != DecoratedKey(45868142482903708675972202481337602533, 7061756c696e67616c6c73) in /mnt/datadrive/lib/cassandra/fanzo/user_team_scores/fanzo-user_team_scores-hf-1-Data.db
at org.apache.cassandra.db.columniterator.SSTableSliceIterator.<init>(SSTableSliceIterator.java:60)
at org.apache.cassandra.db.filter.SliceQueryFilter.getSSTableColumnIterator(SliceQueryFilter.java:67)
at org.apache.cassandra.db.filter.QueryFilter.getSSTableColumnIterator(QueryFilter.java:79)
at org.apache.cassandra.db.CollationController.collectAllData(CollationController.java:256)
at org.apache.cassandra.db.CollationController.getTopLevelColumns(CollationController.java:64)
at org.apache.cassandra.db.ColumnFamilyStore.getTopLevelColumns(ColumnFamilyStore.java:1345)
at org.apache.cassandra.db.ColumnFamilyStore.getColumnFamily(ColumnFamilyStore.java:1207)
at org.apache.cassandra.db.ColumnFamilyStore.getColumnFamily(ColumnFamilyStore.java:1142)
at org.apache.cassandra.db.Table.getRow(Table.java:378)
at org.apache.cassandra.db.SliceFromReadCommand.getRow(SliceFromReadCommand.java:69)
at org.apache.cassandra.db.ReadVerbHandler.doVerb(ReadVerbHandler.java:51)
at org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:59)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

谷歌搜索我看到一些提到缓存的潜在问题，所以这里是数据库启动时缓存设置的日志。

```
 INFO [main] 2012-12-01 04:07:53,190 DatabaseDescriptor.java (line 124) Loading settings from file:/home/fanzo/apache-cassandra-1.1.6/conf/cassandra.yaml
 INFO [main] 2012-12-01 04:07:53,398 DatabaseDescriptor.java (line 183) DiskAccessMode 'auto' determined to be mmap, indexAccessMode is mmap
 INFO [main] 2012-12-01 04:07:53,756 DatabaseDescriptor.java (line 249) Global memtable threshold is enabled at 676MB
 INFO [main] 2012-12-01 04:07:54,335 CacheService.java (line 96) Initializing key cache with capacity of 100 MBs.
 INFO [main] 2012-12-01 04:07:54,352 CacheService.java (line 107) Scheduling key cache save to each 14400 seconds (going to save all keys).
 INFO [main] 2012-12-01 04:07:54,354 CacheService.java (line 121) Initializing row cache with capacity of 0 MBs and provider org.apache.cassandra.cache.SerializingCacheProvider
 INFO [main] 2012-12-01 04:07:54,360 CacheService.java (line 133) Scheduling row cache save to each 0 seconds (going to save all keys). 
```

我想知道是否有办法解决这个问题，或者我是否被冲洗掉了......

谢谢！

保罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:14:27.017

它是[https://issues.apache.org/jira/browse/CASSANDRA-4687](https://issues.apache.org/jira/browse/CASSANDRA-4687)，自 1.2.0 起未修复

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T01:42:38.637

好吧，不确定问题的原因是什么，但正在运行

```
nodetool invalidatekeycache
nodetool invalidaterowcache 
```

使问题消失。我猜缓存代码中的某个地方存在错误。

希望这会帮助其他人......

# iphone - 仅 PickerView 中的第一个组件更改自定义

> ID：14131567
> 
> 赞同：1
> 
> 时间：2013-01-03T00:48:22.063
> 
> 标签：iphone, objective-c, ios

我正在尝试自定义 UIPickerView 并且它大部分都在工作。但是，设置背景颜色仅适用于第一个组件（即第一列）。我似乎无法影响其他两列。我认为问题可能与 PickerView 中组件的加载顺序有关，但我不确定。任何帮助是极大的赞赏。

```
#pragma mark PickerView DataSource

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    //[(UIView*)[[_picker subviews] objectAtIndex:0] setAlpha:0.1f];
    return 3;
}
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{

        [self setColors];

    NSLog(@"number of components %d",[pickerView numberOfComponents]);
        if(component == 0)

    {
        //use Array1
        [self setColors];
        return [_pickerArray count];

    }

    else if (component==1)

    {
        [self setColors];
        NSLog(@"component 1");
        return [_pickerArray count];

    } else if (component==2) {
        NSLog(@"component 2");
        [self setColors];
        return [_pickerArray count];
    } else {

        return 3;
    }

}
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{

        if(component == 0)

        {

            //use Array1
            return [_pickerArray objectAtIndex:row];

        }

        else 

        {

            //use Array2
            return [_pickerArrayTwo objectAtIndex:row];

        }
    }
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {

    [self setColors];
    UILabel *label= [[UILabel alloc] initWithFrame:CGRectMake(0.0, -130.0, 60.0, 60.0)];
    [label setBackgroundColor:[UIColor redColor]];
    [label setTextColor:[UIColor blueColor]];
    [label setFont:[UIFont boldSystemFontOfSize:40.0]];
    [label setText:[NSString stringWithFormat:@"%d",row]];
    label.backgroundColor = [UIColor clearColor];
    return label;
}
-(void)setColors
{
    [(UIView*)[[_picker  subviews] objectAtIndex:0] setAlpha:0.0f];

    [(UIView*)[[_picker subviews] objectAtIndex:1] setAlpha:0.0f];
    [(UIView*)[[_picker subviews] objectAtIndex:2] setAlpha:0.0f];
    [(UIView*)[[_picker subviews] objectAtIndex:3] setAlpha:0.0f];
    // [(UIView*)[[_picker subviews] objectAtIndex:4] setAlpha:0.0f];
    [(UIView*)[[_picker subviews] objectAtIndex:0] setHidden:YES];

    // [(UIView*)[[_picker  subviews] objectAtIndex:2] setAlpha:0.5f];
    // NSLog(@"%@",[_picker subviews]);
    _picker.backgroundColor = [UIColor clearColor];

} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:46:24.590

行。我也尝试过自定义 UIPickerView 但没有成功。相反，我最终得到了一个自定义的pickerview AFPickerView，可以在[https://github.com/arkichek/AFPickerView](https://github.com/arkichek/AFPickerView)找到？

它是自定义pickerview的优秀库。

# android - 我应该在 Android-AppEngine 系统的 Android App 部分中使用 Objectify Annotated Objects 吗？

> ID：14131568
> 
> 赞同：1
> 
> 时间：2013-01-03T00:48:33.237
> 
> 标签：android, google-app-engine, objectify

[与JPA 和 Android](https://stackoverflow.com/questions/9088892/jpa-and-android)上的这个问题相关，但正在寻找设计指导。

我有一些数据将通过 AppEngine 上的 Objectify 持久化。这些对象还需要在 Android 应用程序（以及后来的 iPhone 应用程序）上进行交互。假设他们在打牌：

@Entity public class Card { @Id Long id; 弦套装；字符串值; }

我应该在我的 Android 应用程序中使用与在 AppEngine 中完全相同的类，还是应该将这些对象限制在最接近 DataStore 的层，并重新封装数据以在移动设备上传输和使用 - 还是使用超类还是接口？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T04:06:47.900

我建议您采用后一种方法，因为这将帮助您构建一个富领域模型，该模型是一组纯类并且不与任何其他框架互连。

也可以将这些类称为数据传输对象或值对象。命名法可能不同，但原理相同，即您希望数据在应用程序的不同层之间传递。

随着时间的推移，采用这种分离方法将帮助您获得丰富的领域模型，并且它可以独立于底层和它们可能使用的框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T20:26:20.500

通过 Objectify 持久化的对象具有您可能不想拖到客户端的关系。

API接口（契约）的设计迟早会需要不同于实体对象的对象。我创建了两个包，一个用于 Objectify 实体，另一个用于带有 POJO 和端点的 api

# android - JQM+MVC4+日期输入+安卓=崩溃浏览器

> ID：14131570
> 
> 赞同：2
> 
> 时间：2013-01-03T00:48:47.007
> 
> 标签：android, jquery, asp.net-mvc, jquery-mobile, asp.net-mvc-4

在 android (galaxy s2) 上测试 jquery 移动应用程序

JQM 1.2.0, JQ 1.8.2

在我的 mvc4 项目中，我有一个模型，它定义了一个可为空的 Date 字段。

该模型将数据类型注释为“日期”（不是日期时间等）

我也将该字段注释为必填项。

当我使用桌面浏览器进行测试时，日期输入字段会显示一个下拉日历选择器，让我选择一个日期。

在我的 Android 设备上，我看不到此下拉菜单。但是如果我直接单击该字段，有时它会弹出一个内置日期选择器。其他时候它会做一些奇怪的事情——屏幕可能会尝试放大一点（5% 左右），尝试再点击几次输入，最终会锁定并退出浏览器。

我还注意到，在使用弹出键盘时使用“下一步”按钮导航到下一个字段，将导航到该字段并将其视为普通文本输入。但是在输入日期作为文本并继续导航后，文本最终会丢失......并且通常会导致另一个锁定并崩溃浏览器。

令人沮丧...有什么想法吗？

# advantage-database-server - 在 Advantage SQL 中转换日期格式

> ID：14131571
> 
> 赞同：2
> 
> 时间：2013-01-03T00:49:26.777
> 
> 标签：advantage-database-server

我在 Advantage Database SQL 中有一个简单的问题。

我有 M/D/YYYY 格式的日期，并希望将它们转换为 MM/DD/YYYY。通常在 SQL Server 中我只会使用 convert(varchar(20), field, 101) 但这在 Advantage 中不起作用。

这样做的格式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:52:18.643

我不相信有这样一个简单的转换功能可用。直接在 SQL 中转换它可能会变成一个相当混乱的语句（我认为它需要组合`CONVERT`, `YEAR`,`DAY`和`MONTH`标量）。

但是，如果目标是强制在客户端应用程序中以特定格式显示日期值，那么一种可能性可能是在连接时指定日期格式。你如何做到这一点取决于正在使用的客户端。例如，如果您使用的是连接字符串，那么您可以按如下方式指定日期格式。

```
Data Source=\\server\share\yourdatapath;...;DateFormat=MM/DD/YYYY; 
```

# c++ - 在 C++11 中总是将 std::mutex 声明为可变的吗？

> ID：14131572
> 
> 赞同：45
> 
> 时间：2013-01-03T00:49:32.370
> 
> 标签：c++, c++11, thread-safety, constants, mutable

看完 Herb Sutter 的演讲[You Don't Know const and mutable](http://isocpp.org/blog/2012/12/you-dont-know-const-and-mutable-herb-sutter)之后，我想知道我是否应该始终将互斥锁定义为 mutable？如果是，我猜任何同步容器（例如，`tbb::concurrent_queue`）都一样？

一些背景知识：在他的演讲中，他说 const == mutable == 线程安全，并且`std::mutex`根据定义是线程安全的。

关于谈话还有一个相关的问题，[Does const mean thread-safe in C++11](https://stackoverflow.com/questions/14127379/does-const-mean-thread-safe-in-c11)。

编辑：

[在这里](https://stackoverflow.com/questions/4127333/should-mutexes-be-mutable?rq=1)，我发现了一个相关的问题（可能是重复的）。不过，它是在 C++11 之前被问到的。也许这会有所作为。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-03T04:34:15.493

不，但是，大多数时候他们会。

虽然将其`const`视为“线程安全”和`mutable`“（已经）线程安全”`const`是有帮助的，但从根本上仍然与承诺“我不会改变这个值”的概念相关联。它总是会的。

我的思路很长，所以请耐心等待。

在我自己的编程中，我`const`到处放。如果我有一个值，除非我说我想改变它，否则改变它是一件坏事。如果你试图有目的地修改一个 const 对象，你会得到一个编译时错误（易于修复并且没有可交付的结果！）。如果您不小心修改了非常量对象，您会遇到运行时编程错误、编译应用程序中的错误以及令人头疼的问题。所以最好是在前边犯错并保留东西`const`。

例如：

```
bool is_even(const unsigned x)
{
    return (x % 2) == 0;
}

bool is_prime(const unsigned x)
{
    return /* left as an exercise for the reader */;
} 

template <typename Iterator>
void print_special_numbers(const Iterator first, const Iterator last)
{
    for (auto iter = first; iter != last; ++iter)
    {
        const auto& x = *iter;
        const bool isEven = is_even(x);
        const bool isPrime = is_prime(x);

        if (isEven && isPrime)
            std::cout << "Special number! " << x << std::endl;
    }
} 
```

为什么参数类型为`is_even`和`is_prime`标记`const`？因为从实现的角度来看，更改我正在测试的数字将是一个错误！为什么`const auto& x`？因为我不打算改变那个值，如果我这样做了，我希望编译器对我大喊大叫。与`isEven`and相同`isPrime`：此测试的结果不应更改，因此请强制执行。

当然，`const`成员函数只是一种给出`this`形式类型的方法`const T*`。它说“如果我要改变我的一些成员，那将是一个实施错误”。

`mutable`说“除了我”。这就是“逻辑上的 const”的“旧”概念的来源。考虑他给出的常见用例：互斥体成员。您*需要*锁定此互斥锁以确保您的程序正确，因此您需要对其进行修改。但是，您不希望该函数是非常量的，因为修改任何其他成员都是错误的。所以你做了它`const`并将互斥锁标记为`mutable`.

*这些都与线程安全无关。*

我认为说新定义取代了上面给出的旧想法有点过分了。它们只是从另一个角度补充它，即线程安全。

现在 Herb 的观点是，如果你有`const`函数，它们需要是线程安全的，才能被标准库安全地使用。作为这样的推论，您真正应该标记的唯一成员`mutable`是那些已经是线程安全的成员，因为它们可以从`const`函数中修改：

```
struct foo
{
    void act() const
    {
        mNotThreadSafe = "oh crap! const meant I would be thread-safe!";
    }

    mutable std::string mNotThreadSafe;
}; 
```

好的，所以我们知道线程安全的东西*可以*标记为`mutable`，你问：应该这样吗？

我认为我们必须同时考虑这两种观点。从 Herb 的新观点来看，是的。它们是线程安全的，因此不需要受函数的 const 约束。但仅仅因为他们*可以*安全地摆脱限制`const`并不意味着他们必须这样做。我仍然需要考虑：如果我修改了那个成员，会不会是一个错误的实现？如果是这样，它不需要`mutable`！

这里有一个粒度问题：一些函数可能需要修改可能的`mutable`成员，而另一些则不需要。这就像只希望某些功能具有类似朋友的访问权限，但我们只能为整个班级加好友。（这是一个语言设计问题。）

在这种情况下，您应该在`mutable`.

`const_cast`Herb 举了一个例子并宣布它是安全的，他说得有点太松散了。考虑：

```
struct foo
{
    void act() const
    {
        const_cast<unsigned&>(counter)++;
    }

    unsigned counter;
}; 
```

在大多数情况下这是安全的，除非`foo`对象本身是`const`：

```
foo x;
x.act(); // okay

const foo y;
y.act(); // UB! 
```

这在 SO 的其他地方有所介绍，但是`const foo`，意味着`counter`成员也是`const`，并且修改`const`对象是未定义的行为。

这就是为什么你应该在`mutable`:方面犯错的原因`const_cast`并没有给你同样的保证。已`counter`被标记`mutable`，它不会是一个`const`对象。

好的，所以如果我们`mutable`在一个地方需要它，我们在任何地方都需要它，我们只需要在不需要的情况下小心。当然这意味着所有线程安全成员都应该被标记`mutable`？

不，因为并非所有线程安全成员都用于内部同步。最简单的例子是某种包装类（并不总是最佳实践，但它们存在）：

```
struct threadsafe_container_wrapper
{
    void missing_function_I_really_want()
    {
        container.do_this();
        container.do_that();
    }

    const_container_view other_missing_function_I_really_want() const
    {
        return container.const_view();
    }

    threadsafe_container container;
}; 
```

在这里，我们包装`threadsafe_container`并提供了另一个我们想要的成员函数（在实践中作为一个自由函数会更好）。在这里不需要`mutable`，从旧的角度来看，正确性完全胜过：在一个函数中，我正在修改容器*，这没关系，因为我没有说我不会*（省略`const`），而在另一个函数中我不是修改容器*并确保我信守承诺*（省略`mutable`）。

我认为 Herb 在争论我们使用的大多数情况下，我们`mutable`也在使用某种内部（线程安全）同步对象，我同意。因此，他的观点大部分时间都有效。但是在某些情况下，我只是*碰巧*有一个线程安全的对象，只是把它当作另一个成员；在这种情况下，我们依靠`const`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-03T04:10:38.170

我刚刚看了演讲，我并不完全同意赫伯·萨特所说的。

如果我理解正确，他的论点如下：

1.  `[res.on.data.races]/3`对与标准库一起使用的类型提出了要求——非常量成员函数必须是线程安全的。

2.  因此`const`相当于线程安全。

3.  如果`const`相当于线程安全，则`mutable`必须相当于“相信我，即使这个变量的非常量成员也是线程安全的”。

在我看来，这个论点的所有三个部分都存在缺陷（第二部分存在严重缺陷）。

问题`1`在于，它`[res.on.data.races]`给出了标准库中类型的要求，而不是标准库中使用的类型。也就是说，我认为将其解释为也对标准库使用的类型提出要求是合理的（但并不完全明确）`[res.on.data.races]`，因为库实现实际上不可能支持不修改对象的要求如果成员函数能够修改对象，则通过`const`引用。`const`

的*关键*问题`2`是，虽然它是真的（如果我们接受`1`）`const`必须暗示线程安全，但线程安全暗示**不是**真的，`const`因此两者不等价。`const`仍然意味着“逻辑上不可变”，只是“逻辑上不可变”的范围已经扩大到需要线程安全。

如果我们将`const`线程安全视为等价的，那么我们就失去了一个很好的特性，`const`即它允许我们通过查看可以修改值的位置来轻松地推理代码：

```
//`a` is `const` because `const` and thread-safe are equivalent.
//Does this function modify a?
void foo(std::atomic<int> const& a); 
```

此外，有关`[res.on.data.races]`“修改”的讨论部分可以合理地解释为“以外部可观察方式发生的变化”，而不仅仅是“以线程不安全方式发生的变化”。

问题`3`很简单，只有当它是真的时它才可能`2`是真的，并且`2`存在严重的缺陷。

* * *

因此，将此应用于您的问题 - 不，您不应该让每个内部同步对象`mutable`。

### 在 C++11 中，与在 C++03 中一样，`const` 表示“逻辑上不可变”，而 `mutable` 表示“可以更改，但更改不会被外部观察到”。唯一的区别是在 C++11 中，“逻辑上不可变”已扩展为包括“线程安全”。

您应该保留`mutable`不影响对象外部可见状态的成员变量。另一方面（这是 Herb Sutter 在他的演讲中提出的关键点），如果您有一个成员由于某种原因*是可变的，则该成员**必须*在内部同步，否则您可能会导致`const`不暗示线程安全，并且这将导致标准库出现未定义的行为。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-03T11:18:49.507

来说说中的变化`const`。

```
void somefunc(Foo&);
void somefunc(const Foo&); 
```

在 C++03 及之前的`const`版本中，与非版本相比，该版本`const`为调用者提供了额外的保证。它承诺不修改它的参数，这里的修改是指调用`Foo`'s 的非常量成员函数（包括赋值等），或者将它传递给期望非`const`参数的函数，或者对其暴露的非可变数据成员做同样的事情. `somefunc`将自身限制为对 的`const`操作`Foo`。而额外的保证完全是片面的。调用者和`Foo`提供者都不需要做任何特殊的事情来调用`const`版本。任何能够调用非`const`版本的人也可以调用`const`版本。

在 C++11 中，这种情况发生了变化。该`const`版本仍然为调用者提供相同的保证，但现在它带有一个价格。*的提供者`Foo`必须确保所有`const`操作都是线程安全的*。或者至少它必须在`somefunc`标准库函数时这样做。为什么？因为标准库*可能会*并行化它的操作，并且它*会*`const`在没有任何额外同步的情况下对任何事物调用操作。因此，您（用户）必须确保不需要这种额外的同步。当然，在大多数情况下这不是问题，因为大多数类没有可变成员，并且大多数`const`操作不涉及全局数据。

那么现在是什么`mutable`意思呢？和以前一样！也就是说，这个数据是非常量的，但它是一个实现细节，我保证它不会影响可观察的行为。这意味着不，您不必在视线范围内标记所有内容`mutable`，就像您在 C++98 中没有这样做一样。那么什么时候应该标记一个数据成员`mutable`呢？就像在 C++98 中一样，当你需要`const`从一个方法中调用它的非操作时`const`，你可以保证它不会破坏任何东西。重申：

*   如果您的数据成员的物理状态不影响对象的可观察状态
*   *它*是线程安全的（内部同步的）
*   那么你可以（如果你需要！）继续声明它`mutable`。

第一个条件是强加的，就像在 C++98 中一样，因为包括标准库在内的其他代码可能会调用您的`const`方法，并且没有人应该观察到此类调用导致的任何更改。存在第二个条件，这是 C++11 中的新功能，因为可以异步进行此类调用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-26T18:17:45.887

接受的答案涵盖了这个问题，但值得一提的是，Sutter 已经更改了错误地建议 const == mutable == 线程安全的幻灯片。可以在此处找到导致该幻灯片更改的博客文章：

[Sutter 对 C++11 中的 Const 有什么误解](http://codecraft.co/2013/01/02/how-sutters-wrong-about-const-in-cpp-11/)

TL:DR Const 和 Mutable 都暗示线程安全，但在程序中可以更改和不能更改的内容方面具有不同的含义。

# web-services - WS-Security：在 SOAP 安全标头中包含多个用户身份的正确方法是什么？

> ID：14131575
> 
> 赞同：1
> 
> 时间：2013-01-03T00:49:47.410
> 
> 标签：web-services, soap, ws-security

我想在一条 SOAP 消息中传递 userA 和 userB 的用户名/密码。因此，我想在一个 SOAP 消息中传递两个**UsernameToken 。**

我正在考虑两种选择：

选项 1) **安全**元素内的**UsernameToken**元素：

 **```
<soapenv:Header>
    <wsse:Security xmlns:wsse="sec" xmlns:wsu="ut">
        <wsse:UsernameToken wsu:Id="UsernameToken-3">
            <wsse:Username>userA</wsse:Username>
            <wsse:Password Type="text">passA</wsse:Password>
        </wsse:UsernameToken>
        <wsse:UsernameToken wsu:Id="UsernameToken-4">
            <wsse:Username>userB</wsse:Username>
            <wsse:Password Type="text">passB</wsse:Password>
        </wsse:UsernameToken>
    </wsse:Security>            
</soapenv:Header> 
```

* * *

选项 2)每个**UsernameToken的****安全**元素：

 **```
 <soapenv:Header>
    <wsse:Security xmlns:wsse="sec" xmlns:wsu="ut">
        <wsse:UsernameToken wsu:Id="UsernameToken-3">
            <wsse:Username>userA</wsse:Username>
            <wsse:Password Type="text">passA</wsse:Password>
        </wsse:UsernameToken>
    </wsse:Security>            
    <wsse:Security xmlns:wsse="sec" xmlns:wsu="ut">
        <wsse:UsernameToken wsu:Id="UsernameToken-4">
            <wsse:Username>userB</wsse:Username>
            <wsse:Password Type="text">passB</wsse:Password>
        </wsse:UsernameToken>
    </wsse:Security>            
</soapenv:Header> 
```

--

最标准的选项 1) 或 2) 是什么？或其他？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:39:13.867

我可能记得使用多个用户的最常见情况是通过多个中间节点传递消息。根据 SOAP 规范，它们被命名为 Actors 并且需要具有不同 soap:actor 属性的[单独 wsse:Security 元素。](http://schemas.xmlsoap.org/specs/ws-security/ws-security.htm#ws-security__toc6201551)它对应于您问题中的选项 2)。

[从这里](http://docs.oracle.com/cd/E21455_01/common/tutorials/authn_ws_user.html)考虑下一个例子：

```
<soap:Header>        
  <wsse:Security xmlns:wsse="http://schemas.xmlsoap.org/ws/2003/06/secext">
     <wsse:UsernameToken wsu:Id="sample" xmlns:wsu="http://schemas.xmlsoap.org/ws/2003/06/utility">
       <wsse:Username>sample</wsse:Username>
       <wsse:Password Type="wsse:PasswordText">oracle</wsse:Password>
     </wsse:UsernameToken>
  </wsse:Security>
  <wsse:Security soap:actor="oracle" xmlns:wsse="http://schemas.xmlsoap.org/ws/2003/06/secext">
    <wsse:UsernameToken wsu:Id="oracle" xmlns:wsu="http://schemas.xmlsoap.org/ws/2003/06/utility">
      <wsse:Username>oracle</wsse:Username>
      <wsse:Password Type="wsse:PasswordText">oracle</wsse:Password>
    </wsse:UsernameToken>
  </wsse:Security>
</soap:Header> 
```

此示例包含两个块。具有“oracle”属性的一个用于对最终用户进行身份验证，另一个没有此属性用于前端网关上的身份验证。

如果您的用例假设同时验证多个不是 SOAP 参与者的用户，您可以从您的问题中考虑选项 1)。****

# ruby-on-rails - 未在一台服务器上创建设计/Rails 会话

> ID：14131581
> 
> 赞同：0
> 
> 时间：2013-01-03T00:50:50.573
> 
> 标签：ruby-on-rails, devise

我正在尝试将 Rails 应用程序从一台服务器迁移到另一台服务器。该应用程序在当前服务器上运行良好。我设置了目标服务器，安装了 ruby​​、rails 和 postgres。然后我将源服务器中的代码打包并在目标服务器上解压缩。我运行了 bundle install 和 rake db:setup。

我可以运行 rails 控制台并查看种子文件中的对象并与它们进行交互。我可以运行 rails server 并连接到应用程序。但是当我对应用程序进行身份验证时，我会被重定向到要求我再次进行身份验证的页面。

我确定我输入了正确的密码。如果我故意输入错误的密码，我将返回到我所在的同一登录页面。如果我使用正确的凭据登录，我将被重定向到另一个页面，告诉我我需要进行身份验证。在对问题进行故障排除时，我在生产环境中提高了日志记录级别。当我使用正确的凭据登录时，我可以看到数据库查询，它会更新 User 对象以反映另一个成功登录和最后一次成功登录的日期作为当前时间。

```
 AREL (0.3ms)  UPDATE "users" SET "sign_in_count" = 3, "updated_at" = '2013-01-03
  00:45:19.787483', "current_sign_in_at" = '2013-01-03 00:45:19.786763', "last_sign_in_at"
  = '2013-01-02 22:56:39.395815' WHERE "users"."id" = 1
  SQL (0.4ms)  COMMIT 
```

我还修改了重定向到的页面上的代码，以便在 user_signed_in 时显示“没有用户登录”字样？返回假。我每次都看到。这意味着正在输入正确的用户名和密码，但由于某种原因未创建会话。

但就像我说的，这段代码在另一台服务器上运行良好。是否有一些我可能忽略的设置步骤？

进一步调查显示，该问题似乎只在生产模式中表现出来。在开发中运行应用程序按预期工作。

# windows - 哪种 Windows 帮助技术使用 DLL 来包含实际的帮助内容？

> ID：14131588
> 
> 赞同：1
> 
> 时间：2013-01-03T00:51:50.940
> 
> 标签：windows, ms-office, chm, winhelp

背景：Windows 7、Microsoft Office 2007+

多年来，Microsoft 开发了各种不同的交付机制来提供“帮助”。

[HTML 帮助 - 技术信息](http://www.helpware.net/htmlhelp/hh_info.htm)列出 QuickHelp、WinHelp、WinHelp95、HTML 帮助 1.x、帮助 2.x 和 AP 帮助。列表到此为止，但我无法想象微软有。

最近，我看到了一个帮助系统，它将所有内容都嵌入到 DLL 中。我正在尝试追踪用于开发这种基于 DLL 的交付方法的工具集，并发现驱动它的 API。该系统似乎是处理 Microsoft Excel 帮助的系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T09:16:17.467

您无法想象，但这是真的 - 推荐的应用程序帮助是 HTMLHelp (1996)。请注意 Office 2007 帮助是帮助 2。

Microsoft Help 2.x 是联机帮助文件的专有格式，由 Microsoft 开发并于 2001 年首次发布，作为 Visual Studio .NET (2002) 和 MSDN Library 的帮助系统。

Microsoft Help 2.x 是 Microsoft Visual Studio 2002/2003/2005/2008 和 Office 2007 中使用的帮助引擎。帮助文件是使用帮助创作工具 Help 2.0 Workshop (VSHIK) 制作的。Help 2.x 文件的默认查看器是 Microsoft Document Explorer，并且有几个第三方查看器可用，例如 H2Viewer 和 Help Explorer Viewer。

Visual Studio 2010 使用新的帮助引擎 Microsoft Help Viewer 1。

时间线：
1990 - WinHelp
1996 - HTML Help
2001 - MS Help 2（作为应用程序帮助于 2001-12-28 删除）
2010 - Help Viewer 1
2012 - Help Viewer 2 / Windows 8 help

并且仅与 Visual Studio 帮助集成相关

MS Help 2.x (.hxs -- vs 2002/2003/2005/2008 help)
Help Viewer 1.x (vs 2010 help)
Help Viewer 2.x (vs 2012 help)

# python - 按艺术家组织歌曲| 蟒蛇，眼睛3

> ID：14131589
> 
> 赞同：1
> 
> 时间：2013-01-03T00:51:52.660
> 
> 标签：python, directory

我正在尝试编写代码来组织 +40G 的音乐，我想按艺术家进行组织，到目前为止，我已经能够获取艺术家信息，但我正在为每个艺术家创建一个目录并拥有与同一个艺术家进入同一个目录，而不是为每首歌创建一个单独的目录。

```
import os #imports os functions
import eyed3 #imports eyed3 functions

root_folder = '/Users/ntoscano/desktop/mp3-organizer'

files = os.listdir(root_folder) #lists all files in specified directory
if not files[1].endswith('.mp3'):
    pass #if the file does not end with ".mp3" it does not load it into eyed3

for file_name in files:
    #if file_name.endswith('.mp3'): continue #if file ends with ".mp3" it continues onto the next line

    abs_location = '%s/%s' % (root_folder, file_name)

    song_info = eyed3.load(abs_location) #loads each file into eyed3 and assignes the return value to song_info
    if song_info is None:
        print 'Skippig %s' % abs_location
        continue
     os.mkdir(os.path.expanduser('~/Desktop/mp3-organizer/%s')) % song_info.tag.artist
     print song_info
     print song_info.tag.artist 
```

这是我到目前为止所拥有的，但它坏了，第 19 行总是给我一个错误，

```
Nicolass-MacBook-Air:mp3-organizer ntoscano$ python eyeD3test.py 
Skippig /Users/ntoscano/desktop/mp3-organizer/.DS_Store
Traceback (most recent call last):
  File "eyeD3test.py", line 19, in <module>
    os.mkdir(os.path.expanduser('~/Desktop/mp3-organizer/%s')) % song_info.tag.artist
TypeError: unsupported operand type(s) for %: 'NoneType' and 'unicode' 
```

我是编码新手，所以我确定这是一个简单的错误，但我只是不明白如何获得以艺术家信息为名称的目录。感谢任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T00:54:27.233

问题只是括号放错了地方。而不是这个：

```
os.mkdir(os.path.expanduser('~/Desktop/mp3-organizer/%s')) % song_info.tag.artist 
```

做这个：

```
os.mkdir(os.path.expanduser('~/Desktop/mp3-organizer/%s' % song_info.tag.artist)) 
```

如果你把它分解成碎片，这更容易看出：

```
expanded = os.path.expanduser('~/Desktop/mp3-organizer/%s')
dir = os.mkdir(expanded)
formatted = dir % song_info.tag.artist 
```

因此 ，您正在创建一个名为 的目录，并且`/Users/ntoscano/Desktop/mp3-organizer/%s`该目录正在返回`None`，然后您正在执行.`None % song_info.tag.artist``NoneType``unicode``%`

在这种情况下，无论您是在 之前还是之后进行格式化都没有关系`expanduser`，但您必须在`mkdir`.

作为旁注，即使它是合法的，使用单个值而不是元组来`%`格式化（`'~/Desktop/mp3-organizer/%s' % (song_info.tag.artist,)'`）通常不是一个好主意。`{}`使用现代格式通常是一个更好的主意( `'~/Desktop/mp3-organizer/{}'.format(song_info.tag.artist)`)。使用而不是字符串操作甚至更好`os.path`，因此这些问题甚至都没有出现。

另外，我注意到您`root_folder`在某些情况下使用手动扩展，但`expanduser`在其他情况下。您可能希望对此保持一致 - 否则，一旦您尝试在另一台`~`没有`/Users/ntoscano`. 而且，即使 OS X 允许您在某些情况下弄错路径名大小写，您也应该尽可能正确地处理它们。

把它们放在一起：

```
root_folder = os.path.expanduser('~/Desktop/mp3-organizer')

files = os.listdir(root_folder) #lists all files in specified directory

for file_name in files:
    #if file_name.endswith('.mp3'): continue #if file ends with ".mp3" it continues onto the next line

    abs_location = os.path.join(root_folder, file_name)

    song_info = eyed3.load(abs_location) #loads each file into eyed3 and assignes the return value to song_info
    if song_info is None:
        print 'Skippig %s' % abs_location
        continue
     os.mkdir(os.path.join(root_folder, song_info.tag.artist))
     print song_info
     print song_info.tag.artist 
```

# java - java sql更新/删除什么都不做

> ID：14131595
> 
> 赞同：2
> 
> 时间：2013-01-03T00:52:43.400
> 
> 标签：java, sql

我不确定这是不是这个地方，但我没有想法，下面是我的程序的更新代码，它很简单，但由于某种原因不起作用。

```
private void txt_updateActionPerformed(java.awt.event.ActionEvent evt) {
   try{
       String value1= txt_id.getText(); 
       String value2= txt_title.getText();
       String value3= txt_firstname.getText();
       String value4= txt_lastname.getText();

        String sql="update publishers set publisher_id='"value1"', publisher_title='"value2"', publisher_name='"value3"', publisher_lastname='"value4"' WHERE publisher_id='"value1"'";
        pst=conn.prepareStatement(sql);            
        pst.execute();
        JOptionPane.showMessageDialog(null, "Updated");
    }
    catch(Exception e){
        JOptionPane.showMessageDialog(null, e);
    }
    Update_table();  
} 
```

我不确定出了什么问题。我试着改变周围的东西，但没有帮助。它在程序中工作，但实际上并不更新数据库。所以当我重新启动程序时没有任何改变

好的，我也尝试了以下操作，但没有成功。

```
private void txt_updateActionPerformed(java.awt.event.ActionEvent evt) {
   try{
       String value1= txt_id.getText(); 
       String value2= txt_title.getText();
       String value3= txt_firstname.getText();
       String value4= txt_lastname.getText();
         String sql="update publishers set publisher_id='" + value1 + "', publisher_title='" + value2 + "',publisher_name='" + value3 + "', publisher_lastname='" + value4 + "'WHERE publisher_id='" + value1 + "'";
        pst=conn.prepareStatement(sql);

        pst.execute();
        conn.setAutoCommit(true);
        JOptionPane.showMessageDialog(null, "Updated");
    }
    catch(Exception e){
        JOptionPane.showMessageDialog(null, e);
    }
    Update_table();  
} 
```

和这个

```
private void txt_updateActionPerformed(java.awt.event.ActionEvent evt) {
   try{

        String sql="update publishers set publisher_id=?, publisher_title=?, publisher_name=?, publisher_lastname=? WHERE publisher_id=?";

        pst=conn.prepareStatement(sql);
        pst.setString(1, txt_id.getText());
        pst.setString(2, txt_title.getText());
        pst.setString(3, txt_firstname.getText());
        pst.setString(4, txt_lastname.getText());
        pst.setString(5, txt_id.getText());

        pst.execute();
        conn.setAutoCommit(true);
        JOptionPane.showMessageDialog(null, "Updated");
    }
    catch(Exception e){
        JOptionPane.showMessageDialog(null, e);
    }
    Update_table();  
} 
```

update_table 如下

```
 private void Update_table(){
        try{
        String sql="select publisher_id, publisher_title, publisher_name, publisher_lastname from publishers";
        pst=conn.prepareStatement(sql);
        rs=pst.executeQuery();
        Table_Publishers.setModel(DbUtils.resultSetToTableModel(rs));
        }
        catch(Exception e){
            JOptionPane.showMessageDialog(null, e);
        }

   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:58:18.943

该代码看起来无法编译。改用preparedstatement的参数。

```
 String sql="update publishers set publisher_id=?, publisher_title=?, publisher_name=?, publisher_lastname=? WHERE publisher_id=?";
    pst=conn.prepareStatement(sql);
    pst.setString(1, value1);
    pst.setString(2, value2);
    pst.setString(3, value3);
    pst.setString(4, value4);
    pst.setString(5, value1);
    pst.execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:01:52.340

该代码无法编译，因为您没有在查询中正确连接字符串，它应该是：

```
String sql="update publishers set publisher_id='"+value1+"', publisher_title='"+value2+"', publisher_name='"+value3+"', publisher_lastname='"+value4+"' WHERE publisher_id='"+value1+"'"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T01:30:31.823

修改您的程序，以便您使用：

```
Statement st = con.createStatement();
int updateCount = st.executeUpdate(sql);
if(updateCount <= 0) {
  System.out.println("Nothing update in database");
} else {
  System.out.println("Number of records updated: " + updateCount);
}
st.close(); 
```

还要确保您没有禁用自动提交。

```
if(!con.getAutoCommit()) {
  con.commit();
} 
```

# r - 使用 expand.grid 后反转字典顺序

> ID：14131598
> 
> 赞同：5
> 
> 时间：2013-01-03T00:52:51.947
> 
> 标签：r, permutation

我正在尝试基于多项式框架生成以下矩阵。例如，如果我有三列，我会得到：

```
0 0 0
1 0 0
0 1 0
0 0 1
1 1 0
1 0 1
0 1 1
1 1 1 
```

但是，我想要更多的专栏。我知道我可以使用 expand.grid，例如：

```
u <- list(0:1)
expand.grid(rep(u,3)) 
```

但是，它以错误的顺序返回我想要的内容：

```
0 0 0
1 0 0
0 1 0
1 1 0
0 0 1
1 0 1
0 1 1
1 1 1 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T01:18:00.130

您可以重新排序行以匹配您的预期输出：

```
u <- list(0:1)
g <- expand.grid(rep(u,3))
g <- g[order(rowSums(g)), ] 
```

# javascript - 使用 javascript 变量使用 XML 数据动态填充标记

> ID：14131601
> 
> 赞同：1
> 
> 时间：2013-01-03T00:53:14.277
> 
> 标签：javascript, jquery, oop

我在使用 jQuery 和 Visual Studio 编写所有内容的 .NET 4.0 环境中，但是除了如何填充 XML 数据之外，这些事实都不应该那么重要。

我从这个脚本开始，里面有很多标记。我的任务是从脚本中取出标记并将 XML 数据填充到标记中适当的位置。我试图通过这样做使表示层和行为层尽可能分开。

```
function addIcons(IconType) {
    var li ="";
    var onclickMethod="";
    for (var item in hashObject) {
        var thumbNail = item.split("_");
        if (thumbNail[0] == IconType +"ThumbNail") {
            var imagePath = baseUrlThumbNailImages + hashObject[item];

            li = li + "<li  onclick=IconClick('" + IconType +"',"+ thumbNail[1] + ")><img src=\"" + imagePath + "\" alt=\"" + IconType + " shape\"></li>\n";
        }
    }
    $("#" + IconType + "ThumbNailShapes").append(li);
} 
```

这是我想要作为最终结果的示例标记：

```
<ul>
  <li onclick="IconClick('Item',1)">
    <img src="/images/image_1.png" alt="Item shape" />
  </li>
  <li onclick="IconClick('Item',2)">
    <img src="/images/image_2.png" alt="Item shape" />
  </li>
  <li onclick="IconClick('Item',3)">
    <img src="/images/image_3.png" alt="Item shape" />
  </li>
</ul> 
```

虽然我知道我需要删除开头的代码行`li = li + ...`，但我对 OOP 还不够熟悉，无法理解如何编写 for 循环来填充标记。

所以有两个因素我不确定如何编码：

1.  空白标记 - 标记是否需要变量来填充它或者 javascript 是否应该自动执行此操作？
2.  javascript - 我不知道如何重新编码 javascript 以查找每个列表项和图像标记以填充各种数据。

我是否需要像这样将标记设为空白，所有变量数据都不存在？

```
<ul id="IconThumbnailShapes">
  <li onclick="">
    <img src="" alt="shape" />
  </li>
  <li onclick="">
    <img src="" alt="shape" />
  </li>
  <li onclick="">
    <img src="" alt="shape" />
  </li>
</ul> 
```

我感谢您的洞察力和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:41:54.950

我会这样做。

假设我们有一个容器 DIV#foo，所有这些代码都必须驻留在其中。

```
<div id="foo"></div> 
```

然后我们这样做：

```
$(function() {
   // DOM ready

   $('#foo').on('click', '#IconThumbnailShapes li', function() {
       // Do whatever you have to do with icon
       // Second argument there '#IconThu... li' means the event will be trigerred 
       // as soon as you add your icons, but they don't have to be there 
       // right now.
   });

   function addIcons(iconType) {
       var s = '<ul id="IconThumbnailShapes">'
       var l = '<li><img src="$SRC" alt="$ICON shape" /></li>'
       var data = [{...}, {...}, {...}];
       var len = data.length;

       var datum;

       for (var i = len; i; i--) {
          datum = data[len - i];
          s += l.replace('$SRC', datum.src).replace('$ICON', iconType);
       }

       s += '</ul>';

       $('#foo').html(s);       
   }

}); 
```

所以，我们这样做，因为我们不想在 for 循环中触发 jQuery 的东西。这会扼杀性能。相反，我们为单击容器 DIV#foo 设置了一个延迟的偶数处理程序，我们将整堆标记作为字符串推入容器中。

# jquery - Wordpress 阻止了我的 jquery 脚本

> ID：14131602
> 
> 赞同：1
> 
> 时间：2013-01-03T00:53:22.167
> 
> 标签：jquery, wordpress, html, hidden

******脚本菜鸟免责声明******

 **在我的网站上，我希望它在联系表单中添加字段以充当我的产品的行项目，但由于某种原因，wordpress 不允许我的功能工作。这是它应该做的[http://jsfiddle.net/LQ85Z/1/](http://jsfiddle.net/LQ85Z/1/)以及我的网站如何处理它[http://ocblinds.com/order-now/](http://ocblinds.com/order-now/)。我的网站不允许显示 div。谁能看到我做错了什么？

```
$(function() {
$('#select').change(function() {
    if ($(this).val() == "1") {
        $('#line_1').show();
        $('#line_2').hide();
        $('#line_3').hide();
        $('#line_4').hide();
        $('#line_5').hide();
        $('#line_6').hide();
        $('#line_7').hide();
        $('#line_8').hide();
        $('#line_9').hide();
        $('#line_10').hide();

        }
    });
});
$(function() {
$('#select').change(function() {
    if ($(this).val() == "2") {
        $('#line_1').show();
        $('#line_2').show();
        $('#line_3').hide();
        $('#line_4').hide();
        $('#line_5').hide();
        $('#line_6').hide();
        $('#line_7').hide();
        $('#line_8').hide();
        $('#line_9').hide();
        $('#line_10').hide();
        }
    });
});
    $(function() {
    $('#select').change(function() {
    if ($(this).val() == "3") {
        $('#line_1').show();
        $('#line_2').show();
        $('#line_3').show();
        $('#line_4').hide();
        $('#line_5').hide();
        $('#line_6').hide();
        $('#line_7').hide();
        $('#line_8').hide();
        $('#line_9').hide();
        $('#line_10').hide();

        }
    });
});
    $(function() {
    $('#select').change(function() {
    if ($(this).val() == "4") {
        $('#line_1').show();
        $('#line_2').show();
        $('#line_3').show();
        $('#line_4').show();
        $('#line_5').hide();
        $('#line_6').hide();
        $('#line_7').hide();
        $('#line_8').hide();
        $('#line_9').hide();
        $('#line_10').hide();
        }
    });
});
    $(function() {
    $('#select').change(function() {
    if ($(this).val() == "5") {
        $('#line_1').show();
        $('#line_2').show();
        $('#line_3').show();
        $('#line_4').show();
        $('#line_5').show();
        $('#line_6').hide();
        $('#line_7').hide();
        $('#line_8').hide();
        $('#line_9').hide();
        $('#line_10').hide();
        }
    });
});
    $(function() {
    $('#select').change(function() {
    if ($(this).val() == "6") {
        $('#line_1').show();
        $('#line_2').show();
        $('#line_3').show();
        $('#line_4').show();
        $('#line_5').show();
        $('#line_6').show();
        $('#line_7').hide();
        $('#line_8').hide();
        $('#line_9').hide();
        $('#line_10').hide();
        }
    });
});
    $(function() {
    $('#select').change(function() {
    if ($(this).val() == "7") {
        $('#line_1').show();
        $('#line_2').show();
        $('#line_3').show();
        $('#line_4').show();
        $('#line_5').show();
        $('#line_6').show();
        $('#line_7').show();
        $('#line_8').hide();
        $('#line_9').hide();
        $('#line_10').hide();
        }
    });
});
    $(function() {
    $('#select').change(function() {
    if ($(this).val() == "8") {
        $('#line_1').show();
        $('#line_2').show();
        $('#line_3').show();
        $('#line_4').show();
        $('#line_5').show();
        $('#line_6').show();
        $('#line_7').show();
        $('#line_8').show();
        $('#line_9').hide();
        $('#line_10').hide();
        }
    });
});
    $(function() {
    $('#select').change(function() {
    if ($(this).val() == "9") {
        $('#line_1').show();
        $('#line_2').show();
        $('#line_3').show();
        $('#line_4').show();
        $('#line_5').show();
        $('#line_6').show();
        $('#line_7').show();
        $('#line_8').show();
        $('#line_9').show();
        $('#line_10').hide();
        }
        });
    });
        $(function() {
        $('#select').change(function() {
    if ($(this).val() == "10") {
        $('#line_1').show();
        $('#line_2').show();
        $('#line_3').show();
        $('#line_4').show();
        $('#line_5').show();
        $('#line_6').show();
        $('#line_7').show();
        $('#line_8').show();
        $('#line_9').show();
        $('#line_10').show();
        }
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T00:55:30.370

您遇到的问题来自您在 orderform.js 脚本底部嵌入了非法字符：

```
$(function() {
    $('#select').change(function() {
        if ($(this).val() == "10") {
            $('#line_1').show();
            $('#line_2').show();
            $('#line_3').show();
            $('#line_4').show();
            $('#line_5').show();
            $('#line_6').show();
            $('#line_7').show();
            $('#line_8').show();
            $('#line_9').show();
            $('#line_10').show();
        }
    });
});â€‹ 
```

删除它，它会正常工作。

You also seem to have embedded your javascript code inside the page itself (it's present in both the page source AND orderform.js). Remove the duplicate that's in the source code, especially that it also contains illegal characters:

```
<script type="text/javascript">// <![CDATA[
    $(function() {
    $('#select').change(function() {
        if ($(this).val() == "1") {
            $('#line_1').show();
            $('#line_2').hide();
            $('#line_3').hide();
            $('#line_4').hide();
            $('#line_5').hide();
            $('#line_6').hide();
            $('#line_7').hide();
            $('#line_8').hide();
            $('#line_9').hide();
            $('#line_10').hide();</p>
<p>        }
    });
}); 
```

(Notice <**/p**> and <**p**>)

You can also optimize your code:

```
$(function() {
    $('#select').change(function() {
        var i, show = parseInt($(this).val(), 10);
        for (i = 1; i <= show; i++) {
            $('#line_' + i).show();
        }
        for (i = show; i < 10; i++) {
            $('#line_' + i).hide();
        }  
    });
}); 
```

or by using the other answer to your question (more elegant).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:12:50.127

WordPress runs jQuery in no-conflict mode, so it isn't globally available as `$`. The following method will allow you to use `$` on `.ready()`:

```
jQuery(document).ready(function ($) {
  // Put your scripting here...
}); 
```**

# html - 了解 CSS 分组/嵌套

> ID：14131607
> 
> 赞同：2
> 
> 时间：2013-01-03T00:53:56.023
> 
> 标签：html, css, grouping, nested

我知道类似的问题已经被问了很多次，但我找不到我的具体问题的答案。如果我有一堆非常相似但只是不同的 CSS 选择器，我该如何嵌套或分组它们。

这是我想要做的。

```
 #cell-left {
  background-color:#DDDDDD; 
    border:2px solid;
    height:400px;
    margin:20px 10px 0px 32px; 
    padding: 40px 15px 15px 15px;
    text-align:center; 
 }
 #cell-center {
  background-color:#DDDDDD;
    border:2px solid; 
    height:400px;
    margin:20px 10px 0px 10px; 
    padding: 40px 15px 15px 15px;
    text-align:center; 
 }
 #cell-right {
  background-color:#DDDDDD;
    border:2px solid; 
    height:400px;
    margin:20px 32px 0px 20px;
    padding: 40px 15px 15px 15px; 
    text-align:center; 
 }
 #row {
  width:100%;
    margin-top:0px;
 } 
```

正如你所看到的，所有的单元格彼此都很常见，它们的边距略有不同。我知道有一种方法可以使所有单元格完全相同，然后在 CSS 中添加一个 .right、.center 和 .left 并只保留边距并减少大量代码。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:57:52.417

创建一个包含重复属性的单元类并将其添加到每个 DOM 元素中。

**CSS**

```
.cell{
   background-color:#DDDDDD; 
   border:2px solid;
   height:400px;
   padding: 40px 15px 15px 15px;
   text-align:center; 
}

#cell-left{
    margin:20px 10px 0px 32px; 
}

#cell-center {
    margin:20px 10px 0px 10px; 
}

#cell-right {
    margin:20px 32px 0px 20px;
 } 
```

**HTML**

```
<div id="cell-left" class="cell">Something</div>
<div id="cell-right" class="cell">Something</div>
<div id="cell-center" class="cell">Something</div> 
```

示例：http: [//jsfiddle.net/hKLMj/](http://jsfiddle.net/hKLMj/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T01:05:29.600

如果您只有**一个**左、中和右单元格，那么您可以使用*id*。

否则使用*classes*，因为*id* -s**必须**是唯一的，并且页面上不能有两个具有相同*id*的元素。

这是您的 CSS 的缩短版本。由于您的`cell`-s 是某种孩子（假设它们是带有类的`<td>`-s ） - 您不必使用类。这将使您的标记更清晰：`<tr>``.row`

```
tr.row td {
   background-color: #ddd; 
   border: 2px solid;
   height: 400px;
   padding: 40px 15px 15px 15px;
   text-align:center; 
   margin:20px 10px 0px 10px;
} 
```

此外，如果 a 中有 3 个，`row`则不必使用类来定义左右：

```
tr.row td:first-child {
    margin:20px 10px 0px 32px; /* left cell */
}

tr.row td:last-child {
    margin:20px 32px 0px 20px; /* right cell */
} 
```

***HTML***将是

```
<tr class="row">
    <td> left cell </td>
    <td> center cell </td>
    <td> right cell </td>
</tr> 
```

[**演示**](http://jsfiddle.net/bn749/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T01:01:42.653

我建议你使用类，这是对你想要的东西进行分组的唯一方法。顺便说一句，我猜你会有一些页面有几个相同的单元格和几行，对吧？

（我想你知道，但以防万一：在同一页面上使用两次相同的 id 是非常糟糕的做法。类意味着在同一页面上使用多次。id 只能使用一次/页。

你可以这样做 ：

```
.cell {
  background-color:#DDDDDD; 
  border:2px solid;
  height:400px;
  padding: 40px 15px 15px 15px; 
  text-align:center; 
}
.cell-left {
  margin:20px 10px 0px 32px; 
}
.cell-center {
  margin:20px 10px 0px 10px; 
}
.cell-right {
  margin:20px 32px 0px 20px;
}
.row {
 width:100%;
 margin-top:0px;
} 
```

在你的 HTML 中，你这样做

```
<table border="1">
    <tr class="row">
        <td class="cell cell-left">row 1, cell 1</td>
        <td class="cell cell-right">row 1, cell 2</td>
    </tr>
    <tr class="row">
        <td class="cell cell-left">row 2, cell 1</td>
        <td class="cell cell-right">row 2, cell 2</td>
    </tr>
</table> 
```

您可以链接类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T01:12:44.103

CSS 不支持分组或嵌套。现在，一些 CSS*编译器*（例如 LESS、SASS）支持这些概念以及“mixins”和其他巧妙的技巧..

.. 但是，请记住，*所有*匹配的 CSS 规则都已应用。选择器的特殊性和声明顺序仅决定哪些值会覆盖其他值。所以，没有课程或其他喧嚣：

```
#cell-left, #cell-center, #cell-right, #row {
    background-color:#DDDDDD; 
    border:2px solid;
    height:400px;
    padding: 40px 15px 15px 15px; 
}
#cell-left, #cell-center, #cell-right {
    text-align: center;
}

#cell-left {
    margin:20px 10px 0px 32px; 
}
#cell-center {
    margin:20px 10px 0px 10px; 
}
#cell-right { 
    margin:20px 32px 0px 20px;
}
#row {
    width:100%;
    margin-top:0px;     
} 
```

现在，虽然使用类或更清晰的标记可能是有益的——特别是如果这样做会更容易维护——上面将实现与初始帖子相同的结果。YMMV。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-28T23:08:37.150

[使用双类选择器](https://css-tricks.com/multiple-class-id-selectors/#article-header-id-2)在语义上会更正确：

```
.cell {
    background-color: #DDDDDD; 
    border: 2px solid;
    height: 400px;
    padding: 40px 15px 15px 15px;
    text-align: center; 
}
.cell.left {
    margin: 20px 10px 0px 32px; 
}
.cell.center {
    margin: 20px 10px 0px 10px; 
}
.cell.right {
    margin: 20px 32px 0px 20px;
} 
```

这样你就可以写：

```
<div class="cell left">Something</div>
<div class="cell center">Something</div>
<div class="cell right">Something</div> 
```

甚至：

```
<div class="left cell">Something</div>
<div class="center cell">Something</div>
<div class="right cell">Something</div> 
```

# c# - 如何终止 C# 中的线程？

> ID：14131608
> 
> 赞同：17
> 
> 时间：2013-01-03T00:53:57.880
> 
> 标签：c#, multithreading

我想在 C# 线程中试试运气，我知道一些关于 C 线程的事情。

所以我只想问我是否想终止一个线程，我应该这样做`smt.Abort()` 还是在函数结束后它会“自杀”？

另外， `pthread_exit()`C#中是否有类似C的东西？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-01-03T01:07:39.490

`Thread.Abort`将“杀死”线程，但这大致相当于：

场景：你想关掉你的电脑

解决方案：你把炸药绑在你的电脑上，点燃它，然后跑。

最好通过`CancellationTokenSource.Cancel`设置一些（安全访问的）“正在运行”布尔等来触发“退出条件”，然后调用`Thread.Join`. 这更像是：

场景：你想关掉你的电脑

解决方法：你点击开始，关机，等到电脑关机。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T00:58:20.050

函数结束后，您无需手动终止线程。

如果你创建一个线程来运行一个方法，一旦方法返回，线程将自动关闭，因为它没有任何进一步的执行。*

当然，您可以通过简单地调用手动中止线程`Abort()`，但由于无法可靠地确定线程在其当前执行状态中的位置，可能会导致线程状态损坏，因此几乎不建议这样做。如果您需要自己处理线程的终止，您最好考虑使用[CancellationToken](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.aspx)。您还可以阅读 MSDN 上的[Cancellation of Managed Threads](http://msdn.microsoft.com/en-us/library/dd997364.aspx)文章。

** 也就是说，除非您使用 ThreadPool 来执行您的工作。您不必担心中止这些线程，因为它们会在不同的队列任务中重复使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-03T00:57:53.113

从外部（从线程外部）终止线程是一个坏主意；当你异步杀死它时，你永远不知道线程在做什么。在 C# 中，如果您的线程函数返回，则线程结束。

这篇 MSDN 文章[How to: Create and Terminate Threads (C# Programming Guide)](http://msdn.microsoft.com/en-us/library/7a2f3ay4.aspx)有一些注释和一些示例代码，您可能会发现它们很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T01:43:05.723

```
Thread.Abort()
Thread.Join();
Thread = null; 
```

# java - 如何在 JPanel 中加载图像？

> ID：14131609
> 
> 赞同：-1
> 
> 时间：2013-01-03T00:53:57.423
> 
> 标签：java, image, swing, png, jpanel

我有一个 PNG 图像，我想将它用作画笔。

我想画点东西来`JPanel`。

如何加载图像以用作画笔`JPanel`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:41:53.543

```
final Image image = new ImageIcon("C:/images/image.png").getImage();
JPanel panel = new JPanel() {
    @Override
    protected void paintComponent(Graphics g) {
        g.drawImage(imageToPaint, 
            (desired x location), (desired y location), null);
    }
}; 
```

# python - 如何获取对象属性的子集作为 Python 字典？

> ID：14131611
> 
> 赞同：1
> 
> 时间：2013-01-03T00:54:14.887
> 
> 标签：python, python-2.7

**精简版：**

在 Python 中，有没有办法（干净/优雅地）说“给我一个对象的这 5 个（或许多）属性，而不是别的，作为字典”？

**更长的版本：**

使用 Javascript Underscore 库，我可以将一堆对象/字典（在 JS 中它们是相同的东西）简化为它们属性的一堆子集，如下所示：

```
var subsets = _(someObjects).map(function(someObject) {
    _(someObject).pick(['a', 'd']);
}); 
```

如果我想对 Python 对象（而不是字典）做同样的事情，但似乎我能做的最好的事情就是使用列表推导并手动设置每个属性：

```
subsets = [{"a": x.a, "d": x.d} for x in someObjects] 
```

当只有两个属性并且它们都是一个字母时，这看起来并不那么糟糕，但是如果我开始拥有更多/更长的属性，它会变得更加丑陋（而且每当我编写多行列表理解时我都会感到不对劲）。我可以把整个事情变成一个使用 for 循环的函数，但在我这样做之前，有没有什么很酷的内置 Python 实用程序可以用来做这件事，比 JS 更干净（甚至更干净）版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T01:02:35.363

这可以简单地通过将[列表推导与字典推导](http://www.youtube.com/watch?v=pShL9DCSIUw)相结合来完成。

```
subsets = [{attr: getattr(x, attr) for attr in ["a", "d"]} 
           for x in someObjects] 
```

当然，如果您愿意，您可以提炼出这种理解：

```
def pick(*attrs):
    return {attr: getattr(x, attr) for attr in attrs} 

subsets = [pick("a", "d") for x in someObjects] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-15T14:27:26.157

```
>>> A = ['a', 'c']
>>> O = [{'a': 1, 'b': 2, 'c': 3}, {'a': 11, 'b': 22, 'c': 33, 'd': 44}]

>>> [{a: o[a] for a in A} for o in O]
[{'a': 1, 'c': 3}, {'a': 11, 'c': 33}]

>>> list(map(lambda o: {a: o[a] for a in A}, O))
[{'a': 1, 'c': 3}, {'a': 11, 'c': 33}] 
```

# python - 可以一次附加多个列表吗？（Python）

> ID：14131615
> 
> 赞同：37
> 
> 时间：2013-01-03T00:54:32.150
> 
> 标签：python, list, append

我有一堆列表，我想附加到一个列表中，该列表是我正在尝试编写的程序中的“主”列表。有没有办法在一行代码而不是像 10 行代码中做到这一点？我是初学者所以不知道...

为了更好地了解我的问题，如果我有这些列表怎么办：

```
x = [1, 2, 3]
y = [4, 5, 6]
z = [7, 8, 9] 
```

并希望将 y 和 z 附加到 x。而不是这样做：

```
x.append(y)
x.append(z) 
```

有没有办法在一行代码中做到这一点？我已经尝试过：

```
x.append(y, z) 
```

它不会工作。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-03T00:57:58.410

```
x.extend(y+z) 
```

应该做你想做的

或者

```
x += y+z 
```

甚至

```
x = x+y+z 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-01-19T21:59:32.043

您可以使用`sum`指示起始值（空列表）的函数：

```
a = sum([x, y, z], []) 
```

如果您想附加任意数量的列表，这尤其适合。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-01-03T01:09:26.870

扩展我的评论

```
In [1]: x = [1, 2, 3]
In [2]: y = [4, 5, 6]
In [3]: z = [7, 8, 9]
In [4]: from itertools import chain
In [5]: print list(chain(x,y,z))
[1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-03-16T15:11:14.200

想要完全复制append的效果，试试下面这个功能，简单有效：

```
a=[]
def concats (lists):
    for i in lists:
        a==a.append(i)

concats ([x,y,z])
print(a) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-07T21:48:28.253

相当于上面的答案，但有足够的不同值得一提：

```
my_map = {
   'foo': ['a', 1, 2],
   'bar': ['b', '2', 'c'],
   'baz': ['d', 'e', 'f'],
} 
list(itertools.chain(*my_map.values()))
['d', 'e', 'f', 'a', 1, 2, 'b', '2', 'c'] 
```

在上面的表达式中，*对于将结果作为 args 到链很重要，这与先前的链（x，y，z）相同。另外，请注意结果是哈希排序的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-23T12:00:10.313

如果您更喜欢功能性更强的方法，可以尝试：

```
import functools as f

x = [1, 2, 3]
y = [4, 5, 6]
z = [7, 8, 9]

x = f.reduce(lambda x, y: x+y, [y, z], x) 
```

这将使您能够将任意数量的列表连接到 list 上`x`。

如果您只想将任意数量的列表连接在一起（即不连接到某个基本列表），您可以简化为：

```
import functools as f
from operator import add
big_list = f.reduce(add, list_of_lists) 
```

请注意，我们的 BFDL 对 lambdas、reduce 和朋友有所保留：[https ://www.artima.com/weblogs/viewpost.jsp?thread=98196](https://www.artima.com/weblogs/viewpost.jsp?thread=98196)

要完成此答案，您可以在文档中阅读有关 reduce 的更多信息：[https ://docs.python.org/3/library/functools.html#functools.reduce](https://docs.python.org/3/library/functools.html#functools.reduce)

我引用：“将两个参数的函数从左到右累积应用于序列项，以将序列减少为单个值。”

PS按照[https://stackoverflow.com/a/41752487/532513](https://stackoverflow.com/a/41752487/532513)`sum()`中的描述使用非常紧凑，它似乎确实适用于列表，而且速度非常快（参见[https://stackoverflow.com/a/33277438/532513](https://stackoverflow.com/a/33277438/532513)）但在 Python 3.6 中有以下说法：`help(sum)`

> 此函数专门用于数值，可能会拒绝非数字类型。

虽然这有点令人担忧，但我可能会将其作为连接列表的首选。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-28T04:05:00.263

在一行中，可以通过以下方式完成

```
x.extend(y+z) 
```

或者

```
x=x+y+z 
```

# jquery - jQuery 检测页面上任意位置的粘贴事件并将其“重定向”到 Textarea

> ID：14131617
> 
> 赞同：2
> 
> 时间：2013-01-03T00:54:37.597
> 
> 标签：jquery, paste

我正在寻找一种“简单的粘贴体验”，用户可以在页面上的任意位置点击 ctrl-v 将他们的剪贴板数据粘贴到 textarea 中。我希望他们能够将文本粘贴到 textarea 而不使 textarea 成为焦点。

我知道我可以使用此代码来检测粘贴事件：

```
$('html').bind('paste', function(e) {

}); 
```

但我不知道如何获取剪贴板数据并将其“移动”到文本区域，或者这是否可能（访问用户剪贴板的限制是什么）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T03:47:33.843

这在 Firefox 中是不可能的。在 IE、Safari 和 Chrome 中，您可以执行以下操作：

```
$('html').bind('paste', function(e) {
    e.preventDefault();
    if(e.originalEvent.clipboardData){
       var text = e.originalEvent.clipboardData.getData("text/plain");
       alert(text);
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:05:55.180

无法从[JavaScript](http://kb.mozillazine.org/Granting_JavaScript_access_to_the_clipboard)（或 Flash，尽管有一个名为[ZeroClipboard](http://code.google.com/p/zeroclipboard/)的 Flash 项目可以将文本添加到无法读取的复制缓冲区）访问复制缓冲区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T11:46:11.700

可以在 Firefox 中执行您正在尝试的操作，捕获 Ctrl-V 并将其重定向到 textarea / 文本输入。

但是，由于安全原因，您不能通过在 Firefox 中收听 onpaste 事件来做到这一点，正如另一位海报所说，但可以通过收听 keydown 事件并捕获 Ctrl+V 来实现。

在所有浏览器中，通常您无法直接访问剪贴板（可以使用 Flash 进行设置，或者我认为在某些版本的 Internet Explorer 中可能已经可以）。

您可以在窗口上监听 keydown 事件并检查是否按下了 Ctrl+V。

然后你可以集中输入/文本区域，不要取消事件的传播，firefox会很高兴地将文本粘贴到你想要它去的地方。

然后，您可以收听输入的 onpaste 或 onchange 事件以进一步处理文本。

HTML：

```
<textarea id='redirect_ta'></textarea> 
```

JS：

```
$(window).keydown(function(event) {
    if(event.ctrlKey && event.keyCode == 0x56) {
        $('#redirect_ta').focus();
    }
}); 
```

这是一个说明这一点的 JSFiddle：

[http://jsfiddle.net/DK536/2/](http://jsfiddle.net/DK536/2/)

适用于 Firefox、Chrome 和 Internet Explorer。

# ruby-on-rails - 导航到 localhost:3000 时，导航到 localhost:3000/workers

> ID：14131623
> 
> 赞同：1
> 
> 时间：2013-01-03T00:55:15.843
> 
> 标签：ruby-on-rails, navigation

导航到 时`localhost:3000`，我想导航到：`localhost:3000/workers`。

所以我改为`public/index.html`and `public/index.html.bak`in `routes.rb`，我定义了以下内容：

```
devise_for :users do get '/users/sign_out' => 'devise/sessions#destroy' end

resources :tasksadmins

resources :workers

root to: "workers#index" 
```

但是，它不起作用。该页`localhost:3000`面向我显示了欢迎登机页面。

我该如何解决？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:09:42.453

看起来不错。你重启服务器了吗？

# php - Wordpress 导航菜单图像未显示在移动 Safari 中

> ID：14131624
> 
> 赞同：-1
> 
> 时间：2013-01-03T00:55:25.907
> 
> 标签：php, css, wordpress, wordpress-thesis-theme

我有一个有趣的问题，过去几天我一直在尝试解决。我创建了第二个导航菜单，并通过将此代码添加到我的 custom_functions.php 将其添加到论文 1.8.5 的侧边栏：

```
/* Add second menu to sidebar 1*/
register_nav_menu('secondary', 'Secondary Menu');
function secondary_menu() {
wp_nav_menu( array( 'container_class' => 'secondary_menu', 'theme_location' => 'secondary'        ) );
}
add_action('thesis_hook_before_sidebar_1','secondary_menu'); 
```

然后，我通过将此 css 添加到 custom.css 来为菜单项创建图标：

```
/* Menu Container */
.custom .sidebar .menu {
  list-style: none;
  padding: 0;
  margin: 0 0 0 10px;
  width: 190px;
  height: 190px;
  position: relative;
}

/* Submenu Container */
.custom .sidebar .sub-menu {
  list-style: none;
  padding: 0;
  margin: 0;
  width: 190px;
  height: 45px;
  position: relative;
}
/* Facebook */
.custom #menu-item-15470 a {
    display:block;
    height:81px;
    width:80px;
    padding:0px;
    margin-left:0px;
    position: relative;
    left: 0px;
    top: 0px;
    outline:none;
    text-indent:-9999px;
    background-image:url("http://www.hungryrunnergirl.com/wp-content/uploads/2013/01/Social_Sprite.png"); background-position:0 0px;
}
.custom #menu-item-15470 a:hover { 
    background-position:-83px 0; 
}

/* Pinterest */
.custom #menu-item-15471 a {
    display:block;
    height:81px;
width:80px;
padding:0px;
margin-left:0px;
position: relative;
left: 91px;
top: -81px;
outline:none;
text-indent:-9999px;
background-image:url("http://www.hungryrunnergirl.com/wp-content/uploads/2013/01/Social_Sprite.png"); background-position:0px -82px;
}
.custom #menu-item-15471 a:hover { 
background-position:-83px -82px; 
}

/* Instagram */
.custom #menu-item-15472 a {
display:block;
height:81px;
width:80px;
padding:0px;
margin-left:0px;
position: relative;
left: 0px;
top: -71px;
outline:none;
text-indent:-9999px;
background-image:url("http://www.hungryrunnergirl.com/wp-content/uploads/2013/01/Social_Sprite.png"); background-position:0px -165px;
}
.custom #menu-item-15472 a:hover { 
background-position:-83px -165px; 
}

/* Instagram Submenu Janae */
.custom #menu-item-15473 a {
display:block;
height:42px;
width:80px;
padding:0px;
margin-left:0px;
position: relative;
left: 1px;
top: -72px;
outline:none;
text-indent:-9999px;
background-image:url("http://www.hungryrunnergirl.com/wp-content/uploads/2013/01/Social_Sprite.png"); background-position:0px -331px;
}
.custom #menu-item-15473 a:hover { 
position: relative;
left: 1px;
top: -72px;
background-position:-83px -331px; 
}

/* Instagram Submenu Billy */
.custom #menu-item-15478 a {
display:block;
height:42px;
width:80px;
padding:0px;
margin-left:0px;
position: relative;
left: 1px;
top: -75px;
outline:none;
text-indent:-9999px;
background-image:url("http://www.hungryrunnergirl.com/wp-content/uploads/2013/01/Social_Sprite.png"); background-position:0px -374px;
}
.custom #menu-item-15478 a:hover { 
background-position:-83px -374px; 
}

/* Twitter */
.custom #menu-item-15475 a {
display:block;
height:81px;
width:80px;
padding:0px;
margin-left:0px;
position: relative;
left: 91px;
top: -197px;
outline:none;
text-indent:-9999px;
background-image:url("http://www.hungryrunnergirl.com/wp-content/uploads/2013/01/Social_Sprite.png"); background-position:0px -248px;
}
.custom #menu-item-15475 a:hover { 
background-position:-83px -248px; 
}

/* Twitter Submenu Janae*/
.custom #menu-item-15476 a {
display:block;
height:42px;
width:80px;
padding:0px;
margin-left:0px;
position: relative;
left: 92px;
top: -198px;
outline:none;
text-indent:-9999px;
background-image:url("http://www.hungryrunnergirl.com/wp-content/uploads/2013/01/Social_Sprite.png"); background-position:0px -417px;
}
.custom #menu-item-15476 a:hover { 
background-position:-83px -417px; 
}

/* Twitter Submenu Billy*/
.custom #menu-item-15479 a {
display:block;
height:42px;
width:80px;
padding:0px;
margin-left:0px;
position: relative;
left: 92px;
top: -201px;
outline:none;
text-indent:-9999px;
background-image:url("http://www.hungryrunnergirl.com/wp-content/uploads/2013/01/Social_Sprite.png"); background-position:0px -460px;
}
.custom #menu-item-15479 a:hover { 
background-position:-83px -460px; 
} 
```

菜单图标在所有浏览器（包括移动 chrome）上正确显示，但在移动 safari（仅显示链接）上不正确。

它应该看起来如何：

[http://farm9.staticflickr.com/8220/8340444170_7db7385bab_b.jpg](http://farm9.staticflickr.com/8220/8340444170_7db7385bab_b.jpg)

它在移动 Safari 中的样子：

[http://farm9.staticflickr.com/8072/8339388111_7bdc6f50a9_b.jpg](http://farm9.staticflickr.com/8072/8339388111_7bdc6f50a9_b.jpg)

我正在开发的博客是 www.hungryrunnergirl.com，如果您想自己查看的话。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:39:29.307

它似乎工作正常。我正在使用 iOS Simulator（Apple 官方工具）。我试过 iPhone 和 iPad。您是否遇到缓存问题？

# ios - 使用 Xcode Instruments 在指针处查看非僵尸对象历史记录

> ID：14131625
> 
> 赞同：3
> 
> 时间：2013-01-03T00:55:25.830
> 
> 标签：ios, debugging, memory, nskeyedarchiver, xcode-instruments

我目前正在使用 Instruments 调试“发送到已释放对象的消息”错误。我可以通过“僵尸消息”对话框访问故障对象的历史记录。

我想在运行时找到一个类似的对象，它被正确分配/解除分配并且不会失败，并检查该对象的历史以比较调用树的样子。

有什么办法吗？我可以打印我想要检查的对象的指针位置，但是有什么方法可以让我使用指针位置信息访问 Instruments 中该对象的历史记录？

使用加载的对象`NSKeyedUnarchiver`似乎由于解码时的过度释放问题而失败，而不是以这种方式创建的对象是可以的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T05:43:51.273

您可以使用仪器中的分配工具。在右上角搜索该对象的类名并同时运行分配工具。我经常使用它来跟踪对象何时被分配和释放。

但要注意同时打开僵尸模板工具。您会在分配工具中注意到，一些已解除分配的对象仍显示为活动对象，因为这些对象已变成“僵尸”对象。希望有帮助！

# facebook - 如何自动更改脸书封面？

> ID：14131626
> 
> 赞同：0
> 
> 时间：2013-01-03T00:55:27.390
> 
> 标签：facebook, facebook-javascript-sdk, facebook-php-sdk

我想问一下如何自动更改facebook封面照片？我知道这是可能的，但我不知道该怎么做。有什么想法、提示或技巧吗？

谢谢！

示例：[https](https://www.facebook.com/zaraguza) ://www.facebook.com/zaraguza或[https://www.facebook.com/adbeedigital](https://www.facebook.com/adbeedigital)（点赞）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:27:26.217

我看到了你给的 facebook 页面，但我没有看到那里有任何变化。阿拉维斯静态

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T03:58:55.863

您可以通过使用页面访问令牌向 /PAGE_ID 发出 HTTP POST 来设置页面的封面照片。

具有以下参数：

封面---照片的ID

offset_y --- 从顶部偏移的百分比 (0-100)。默认值为 50

no_feed_story --- 指示是否创建故事的标志。默认值为假

查看此[链接](https://developers.facebook.com/docs/reference/api/page/)（在设置封面照片下）了解更多详情。

# ruby-on-rails - 为什么我的 ActionMailer 中出现 NoMethodError？

> ID：14131627
> 
> 赞同：0
> 
> 时间：2013-01-03T00:55:28.467
> 
> 标签：ruby-on-rails, actionmailer

当用户在网站内完成各种操作（例如创建新状态）时，我正在尝试使用 ActionMailer 触发电子邮件。

当我尝试在 Statuses 控制器的创建方法中调用邮件程序时，我得到一个 NoMethodError：

nil:NilClass 的未定义方法“电子邮件”

谁能帮我找出问题所在？

这是我在状态控制器中的代码：

```
def create
  @status = current_user.statuses.new(params[:status])

  respond_to do |format|
    if @status.save
      UserMailer.status_confirmation(@user).deliver
      format.html { redirect_to @status, notice: 'Status was successfully created.' }
      format.json { render json: @status, status: :created, location: @status }
    else
      format.html { render action: "new" }
      format.json { render json: @status.errors, status: :unprocessable_entity }
    end
  end
end 
```

这是我的 UserMailer 代码：

```
class UserMailer < ActionMailer::Base

  default :from => "myemail@gmail.com"

  def status_confirmation(user)
    mail(:to => user.email, :subject => "Status Posted")
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:58:28.083

您传入的是一个空用户 ( `@user`)：

```
def create
  @status = current_user.statuses.new(params[:status])
  respond_to do |format|
    if @status.save
      # There's no @user here, unless it's initialized in a filter, etc.
      UserMailer.status_confirmation(@user).deliver 
```

您的意思是`current_user`相反，还是您忘记初始化它（或忘记了一些代码）？

# wcf - 每个会话的 WCF 实例化模式未按预期工作

> ID：14131629
> 
> 赞同：1
> 
> 时间：2013-01-03T00:55:36.100
> 
> 标签：wcf, instancecontextmode

我正在编写一个生成数据集的 WCF 应用程序，并允许客户端创建它们、浏览它们并从中检索数据。数据存储在服务类的静态变量中。特别是，它们存储在字典中，使用 GUID 字符串作为键。

我将服务类的实例化模式设置为 PerSession，据我所知应该可以工作。客户端调用一个名为 CreateRecordSet 的函数，该函数将一个条目添加到字典中并返回密钥字符串。然后客户端调用一个名为 First() 的函数，该函数应该检索数据集中的第一条记录。但是，当它尝试这样做时，字典不再包含任何条目。

奇怪的是，如果我将实例化模式设置为 Single，它工作正常。但是，如果我将它设置为 PerSession，它似乎会丢失两个调用之间的字典，如果我将它设置为 PerCall，我会预料到这一点。

这是接口定义：

```
namespace OrsonServiceLibrary
{
    [ServiceContract]
    public interface IService1
    {

        [OperationContract]
        string CreateRecordSet();

        [OperationContract]
        object First(string setkey);

        // Removed unused methods

    }

    [DataContract]
    [KnownType(typeof(JMMCustomer))]
    public class JMMCustomer
    {
        [DataMember]
        public string CUSTFNAME { get; set; }
        [DataMember]
        public string CUSTLNAME { get; set; }
        [DataMember]
        public string CUSTADDRESS { get; set; }
        [DataMember]
        public string CUSTCITY { get; set; }
        [DataMember]
        public string CUSTKEY { get; set; }

    }
} 
```

这是服务类代码：

```
 [ServiceBehavior(InstanceContextMode=InstanceContextMode.PerSession)]
    public class Service1 : IService1
    {
        protected static Dictionary<String,RecordSet> RecordSets;

        public Service1()
        {
            RecordSets = new Dictionary<string,RecordSet>();
        }

        public string CreateRecordSet()
        {
            List<object> c = new List<object>(GetAllCustomers());
            var rs = new RecordSet(c);
            string thekey = System.Guid.NewGuid().ToString();

            RecordSets.Add(thekey, rs);

            Console.WriteLine("End of CreateRecordSet().  RecordSets.Count = " + RecordSets.Count);

            return thekey;
        }

        public object First(string setkey)
        {
            Console.WriteLine("Beginning of First().  RecordSets.Count = " + RecordSets.Count);

            if (RecordSets[setkey].thelist.Count < 1)
                throw new Exception ("No items in the data set.");
            else
                RecordSets[setkey].cursor = 0;

            return RecordSets[setkey].thelist[RecordSets[setkey].cursor];
        }

        // Removed unused methods
   } 
```

这是客户端代码：

```
static void Main(string[] args)
{
    Console.WriteLine("Press Enter to begin.");
    Console.ReadLine();

    ServiceReference1.Service1Client MyService = new ServiceReference1.Service1Client("Service1");

    string sk = MyService.CreateRecordSet();

    ServiceReference1.JMMCustomer jc;
    jc = (ServiceReference1.JMMCustomer)MyService.First(sk);

    Console.WriteLine(jc.CUSTFNAME + " " + jc.CUSTLNAME);

    Console.WriteLine("Press Enter to exit.");
    Console.ReadLine();
} 
```

如您所见，我在主机的控制台中添加了一些调试消息以显示字典的状态。这是主机的输出：

```
Host started.  Press Enter to terminate host.
End of CreateRecordSet().  RecordSets.Count = 1
Beginning of First().  RecordSets.Count = 0 
```

当然，当我尝试引用 RecordSets[setkey] 时，我在 First() 的下一行代码中遇到异常，因为 RecordSets 是空的。

如果我将行为更改为：

```
[ServiceBehavior(InstanceContextMode=InstanceContextMode.Single)] 
```

...然后它按预期工作。主机输出变为：

```
Host started.  Press Enter to terminate host.
End of CreateRecordSet().  RecordSets.Count = 1
Beginning of First().  RecordSets.Count = 1 
```

...然后客户端按预期打印客户名称，没有错误。

那么我错过了什么？我的理解是，只要我对两个调用都使用相同的 ServiceReference (MyService)，那么如果服务器的 InstanceContextMode 设置为 PerSession，它们应该在服务器上共享相同的静态变量。我不正确吗？

-乔

# jquery - SoundManager2 与 iOS - 不播放声音 onClick 事件

> ID：14131636
> 
> 赞同：5
> 
> 时间：2013-01-03T00:56:51.700
> 
> 标签：jquery, iphone, ios, ipad, soundmanager2

我正在尝试使用 SoundManager2 在“onClick”事件上播放声音。在 IE、Chrome 和 FireFox 上一切正常。但是在 iPad 或 iPhone 上尝试时，声音不会播放。

这是（部分）我的 JS 代码：

```
<script type="text/javascript">
    soundManager.debugMode = false;
    soundManager.url = 'soundmanager2.swf';
    soundManager.onload = function() {
        soundManager.createSound({
            id:'car',
            url:'audio/car.mp3',
            useHTML5Audio: true,
            preferFlash: false
        });
</script> 
```

这是（部分）我的 HTML 代码：

```
<area shape='polygon'   coords='74,164,203,96,397,161,385,236,286,237,259,290,167,288,166,237,77,233' 
    onclick="soundManager.play('car')"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:03:30.403

我的猜测是您的 url 对于音频文件的路径不正确`audio/car.mp3`

当我使用`UIWebViews`并从我的应用程序资源中加载图像时，如果我只是说出它们不会显示的图像的名称，但是如果我在 html 文件中说出图像的名称，然后当我加载 html 文件时，我会说些什么像这样

```
[webView loadHTMLString:htmlstring baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]] 
```

然后它工作。关键是`baseURL:`

当您将 html 加载到 Web 视图中时（我假设您正在这样做），请尝试使用`baseURL`我在上面发布的方法。

# c# - Trace.WriteLine 在使用 CSharpCodeProvider 编译的动态加载程序集中不起作用

> ID：14131639
> 
> 赞同：4
> 
> 时间：2013-01-03T00:57:20.700
> 
> 标签：c#, .net, dll, .net-assembly

有没有人知道为什么在动态加载（使用 Assembly.CreateInstance）程序集中调用 Trace 调用时不会产生输出？奇怪的是，Debug.WriteLine 在程序集内工作得很好，并且来自正在执行动态加载的程序集内的 Trace 调用也工作得很好。我已经确认 Trace.Listeners 包含正确的侦听器对象（与 Debug.Listeners 相同），但对 Trace 的调用不会产生任何输出。

这对我来说是一个巨大的诊断问题，因为我的整个应用程序都是通过自定义 TraceListener 进行记录的。

更新：（来自下面的评论）我正在使用 CSharpCodeProvider 动态构建程序集，但我没有`/d:TRACE`在 CompilerParameters.CompilerOptions 中提供开关。因此 TRACE 没有在程序集中定义，我对 Trace 的调用基本上被忽略了。还值得注意的是，我正在设置`CompilerParameters.IncludeDebugInformation = true`这可以解释为什么我得到 Debug 即使我没有明确设置`/d:DEBUG`. `CompilerParameters.CompilerOptions`这只是一个猜测 - MSDN 文档中没有任何内容表明这是真的。

这里的底线是，当使用`CSharpCodeProvider`动态编译源代码时，任何特定于程序集的东西都由您明确定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T01:29:29.120

DEBUG 和 TRACE 是 2 个不同的不相关的定义控制相应的方法。使用 TRACE 编译的程序集有可能未定义，因此 Trace 方法没有做任何事情。

# android - Android：如何声明全局变量错误

> ID：14131640
> 
> 赞同：0
> 
> 时间：2013-01-03T00:57:22.347
> 
> 标签：android

我已经在我的应用程序中实现了这个解决方案：

[https://stackoverflow.com/a/708317/290043](https://stackoverflow.com/a/708317/290043)

现在我的应用程序将不再启动。这里来自目录：

```
Starting activity com.example.css.cih.ActivityMain on device 015d2994a6280018
ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.css.cih/.ActivityMain }
ActivityManager: Error type 3
ActivityManager: Error: Activity class {com.example.css.cih/com.example.css.cih.ActivityMain} does not exist. 
```

我确实添加了该问题中所述的清单元素：

```
<application
    android:name="com.example.css.cih.MyApp"
    android:allowBackup="false"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
</application> 
```

而且，班级：

```
import android.app.Application;

public class MyApp extends Application {
    public boolean isCbpProject;
    public boolean isMrProject;
} 
```

在我实施该解决方案之前，我应该声明该应用程序按预期运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:12:42.607

您需要使用现有`<application>`标签，其中至少包含一个`<activity>`标签。

```
<application
    android:name="com.example.css.cih.MyApp"
    android:allowBackup="false"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <!-- Activity declaration here -->
    <activity android:name=".ActivityMain" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:03:18.267

检查 AndroidManifest.xml 中的“android:installLocation”。

“preferExternal”会导致问题。像这样：

```
<?xml version="1.0" encoding="utf-8"?> 
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
   package="com.yourpackagename"
   android:installLocation="auto"
   android:versionCode="*"
   android:versionName="*" > 
```

# javascript - KnockoutJS - 修剪字符串数组上的空格

> ID：14131641
> 
> 赞同：0
> 
> 时间：2013-01-03T00:57:23.353
> 
> 标签：javascript, jquery, knockout.js

我有一个简单的情况，我想接受一个文本数组，所以我让用户输入用逗号分隔的数据，并在我的 KO 视图模型中使用 a`ko.computed`来解析它。代码如下所示。（非常感谢 RPN 向我展示了这个技巧）

# 查看模型

```
var ViewModel = function() {
    this.values = ko.observableArray(["test1", "test2", "test3", "test4"]);

    this.computedJoinedValues = ko.computed({
        read: function() {
            return this.values().join(",");
        },
        write: function(newValue) {
            this.values(newValue.split(","));   
        },
        owner: this
    });
};

ko.applyBindings(new ViewModel()); 
```

# HTML

```
<input data-bind="value: computedJoinedValues" />

<hr/>
<ul data-bind="foreach: values">
    <li data-bind="text: $data"></li>
</ul> 
```

这很好用 - 但我遇到了空格问题，而且我有点大脑脱节。我想修剪每个条目的尾随空格，因为我最终得到了类似的结果`tag1, tag2`，它实际上被序列化为`[ "tag1", " tag2" ]`- 所以我认为合适的地方是`write`函数，所以我尝试了这个......

```
write: function(newValue) {
    newValue = $.trim(newValue);
    console.log(newValue);
    this.values(newValue.split(","));   
}, 
```

但我仍然在数组中得到空格。谁能确定我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:03:36.350

如果您使用 jQuery，以下代码将对您有所帮助：

```
write: function(newValue) {
    this.values($.map(newValue.split(","), $.trim)); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:05:03.967

您需要从字符串内部去除空格 - trim() 只是从字符串的开头和结尾去除它：

```
write: function(newValue) {
  this.values(newValue.replace(/\s/g, '').split(","));
} 
```

# php - PHP格式表格的颜色？

> ID：14131643
> 
> 赞同：0
> 
> 时间：2013-01-03T00:57:48.460
> 
> 标签：php, sql, format

我有一个编码如下的表格：

```
echo "<table class='lt show'>
      <tr class='h'>
      <td class='ltid' title='Position'>#</td>
      <td class='ltn' title='Name'>Name</td>";

$i = 0;

while ($i < $num){
    $pos = $i + 1;

    $name = mysql_result($result, $i, "name");

    $bgcolor = 'bgcolor="'.$color.'"';

    if ($pos <=  19) $color = "#FFF";

    echo "<tr $bgcolor class='even'><td class='ltid'>$pos</td>
          <td class='ltn'><a href='teams.php?id=$id'>$name</td>"; 
```

这将返回一个包含 20 行的表，每行包含不同的位置和名称。如何使底部的两行 / 20 为红色以表明它们位于表格的底部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:42:41.763

注意 MySQL 函数已被弃用，取而代之的是 PDO。

说，这就是你的做法

```
$num= mysql_num_rows ($result);
while ($i < $num){
$pos = $i + 1;

$name = mysql_result($result, $i, "name");

$bgcolor = 'bgcolor="'.$color.'"';

if ($pos <  $result-2) $color = "#FFF";

echo "<tr $bgcolor class='even'><td class='ltid'>$pos</td>
      <td class='ltn'><a href='teams.php?id=$id'>$name</td>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:07:28.553

您可以使用 mysql_num_rows() 函数来计算结果集中的行数，然后从总数中减去 2 以确定循环索引以将颜色设置为红色：

```
http://php.net/manual/en/function.mysql-num-rows.php 
```

请注意，尽管支持 mysqli 和 PDO，但不推荐使用这些函数。不太确定这是否与您有关。

或者您可以直接进行 SQL 计数：

```
SELECT COUNT(1) FROM Table; 
```

这将返回给您一个设定的计数，选择​​权在您手中 - 如果不知道被迭代的总行数，就无法确定设置行颜色的点。

# android - 应用程序重新启动时的空白片段

> ID：14131647
> 
> 赞同：1
> 
> 时间：2013-01-03T00:58:02.537
> 
> 标签：android, android-fragments

每当我第一次打开我的应用程序时，我的 xml 文件中的 3 个容器中都会正确显示三个片段。单击操作栏上的选项卡后，容器的一个片段被交换为另一个。

# 问题

每当我打开应用程序时，切换到第二个选项卡，使用后退箭头退出应用程序，然后重新打开应用程序并重新选择第二个选项卡，片段为空白。什么都没有出现，第三个选项卡也出现同样的问题。为什么不显示第二个和第三个片段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:54:11.440

```
// from onCreate() method of your DefaultActivity class, call this method:

// file: DefaultActivity.java

...
...
...
    private void addTabs() {
        // get support ActionBar and set navigation mode to Tabs
        ActionBar bar = getSupportActionBar();
        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        // Add first tab to ActionBar, and set the TabListener to a new TabListner object
        String title1 = "first_tab";
        ActionBar.Tab tab1 = bar.newTab();
        tab1.setText(title1);
        tab1.setTabListener(new TabListener(this, title1, Fragment1.class));
        bar.addTab(tab1);

        // Add second tab to ActionBar, and set the TabListener to a new TabListner object
        String title2 = "second_tab";
        ActionBar.Tab tab2 = bar.newTab();
        tab2.setText(locationsTitle);
        tab2.setTabListener(new TabListener(this, tab2, Fragment2.class));
        bar.addTab(tab2);

        // Add third tab to ActionBar, and set the TabListener to a new TabListner object
        String title3 = "third_tab";
        ActionBar.Tab tab3 = bar.newTab();
        tab3.setText(title3);
        tab3.setTabListener(new TabListener(this, title3, Fragment3.class));
        bar.addTab(tab3);
    }
... 
...
... 
```

现在，您需要创建三个片段 - Fragment1、Fragment2 和 Fragment3，并创建一个 TabListener：

```
// file: TabListener.java

public class TabListener implements ActionBar.TabListener {

    private final FragmentActivity mActivity;
    private final String mTag;
    private final Class mFragmentClass;
    private Fragment mFragment;

    public TabListener(FragmentActivity activity, String tag, Class fragmentClass) {
        mActivity = activity;
        mTag = tag;
        mFragmentClass = fragmentClass;
        // see if we already have the fragment with given tag. it's okay if it is null
        mFragment = activity.getSupportFragmentManager().findFragmentByTag(tag);
    }

    @Override
    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction ft) {
        if (mFragment == null) {
            // instantiate a new fragment for the given class
            mFragment = SherlockFragment.instantiate(mActivity, mFragmentClass.getName());
            // place in the default root viewgroup - android.R.id.content
            ft.replace(android.R.id.content, mFragment, mTag);
        } else {
            if (mFragment.isDetached())
                ft.attach(mFragment);
        }
    }

    @Override
    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            ft.detach(mFragment);
        }
    }

    @Override
    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction ft) {
    }
} 
```

这就是你所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:55:21.557

`public static boolean started`我通过在每个片段中使用一个值来解决它。在每个片段的类中，在`onCreateView()`I set`started = true;`和`onDestroyView()`I set我的主要活动`started = false;`

的`onTabSelected()`方法中，我读取了这个`boolean`值，如果是`true`，我将片段附加回它的容器，但如果是`false`，我创建一个新的特定片段的实例并将其添加到容器中。

# javascript - 如何添加一个始终显示 DOM 处于“等待”状态的 javascript 加载器？

> ID：14131648
> 
> 赞同：0
> 
> 时间：2013-01-03T00:58:14.217
> 
> 标签：javascript, spinner

我想为 DOM 加载时创建一个微调器，如下图所示：

![在此处输入图像描述](../Images/4a78647e0b764a63286d1a527b457c8a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:00:03.997

我所做的是，页面所做的第一件事是显示微调器，然后使用 window.onload 事件将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:01:11.983

您可以添加一个覆盖窗口的动画 gif，并在文档准备好时将其删除。这将破坏没有启用 javascript 的客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:11:06.110

[从http://www.ajaxload.info/](http://www.ajaxload.info/)获取加载图像

添加一个显示进度的 div，默认情况下使用 display:none css

```
 <div id="progress" style="display:none;">
            <img src="../images/ajax-progress.gif" alt="Loading please wait..." style="display:block; margin-left: auto; margin-right: auto"/>
            <span>Please wait while loading records...</span>
     </div> 
```

在你的 javascript 函数中做这样的事情

```
function GetData()
{
  //show loading div 
   $('#progress').show();
   $.ajax({
      url: 'ajax/test.html',
      success: function(data) {

      //Hide the progress div if loading data is done
      $('#progress').hide();
      }
   });
} 
```

# asp.net - ASP.Net MVC 4 共享会话

> ID：14131652
> 
> 赞同：1
> 
> 时间：2013-01-03T00:58:22.960
> 
> 标签：asp.net, asp.net-mvc-4, session-state

我们一直在尝试在多个 MVC 站点之间共享会话。我们需要这样做，以便我们可以将我们的会话与几个旧的 Web 表单站点集成。

我们已经从[http://code.msdn.microsoft.com/CSASPNETShareSessionBetween-021daa39实现了 CSASPNETShareSessionBetweenSubDomains 类，并根据](http://code.msdn.microsoft.com/CSASPNETShareSessionBetween-021daa39)[http://blogs.msdn.com/b/toddca/archive/2007/01/](http://blogs.msdn.com/b/toddca/archive/2007/01/25/sharing-asp-net-session-state-across-applications.aspx)对存储过程进行了更改[25/sharing-asp-net-session-state-across-applications.aspx](http://blogs.msdn.com/b/toddca/archive/2007/01/25/sharing-asp-net-session-state-across-applications.aspx)。

我们还在[使用 SQL Server 的 2 个 ASP.NET 应用程序之间为每个共享会话状态添加了 httpCookies 处理程序到 web.config](https://stackoverflow.com/questions/2402785/sharing-session-state-between-2-asp-net-applications-using-sql-server)

当我们在两个子域之间进行测试时，它们似乎具有相同的会话 ID，但是，当我们从 ASPStateTempSessions 中进行选择时，我们看到存储的 sessionId 包含附加了一些其他值的 sessionId：

来自 cookie 的 SessionId：srvgqxts1yzuqnswr5pv0eoo

表中的值：

*   srvgqxts1yzuqnswr5pv0eoo0e8cc1f9
*   srvgqxts1yzuqnswr5pv0eoo15890198

我似乎附加的这个值导致会话在两个子域之间是唯一的。我希望有人有在 MVC 应用程序之间共享会话的经验，甚至更好地了解如何与旧 Web 表单站点共享相同的会话。

提前致谢

# java - 在 switch 语句中使用光标 (SQLite) 移动时出现 NullPointerException

> ID：14131654
> 
> 赞同：1
> 
> 时间：2013-01-03T00:58:33.233
> 
> 标签：java, android, sqlite, cursor, nullpointerexception

因此，每次单击任何按钮时，我都会收到 NullPointerException。出于某种原因，当我在 switch 语句中时，我得到一个错误。我的 DB 助手类只返回一个游标，因此我在我的特定活动中使用该游标。我只是希望能够根据用户偏好在数据库条目之间来回切换。而且我还想显示行的不同元素而不是整行。任何建议将不胜感激。我认为这种方法可以提供我需要的东西，但我无法让它发挥作用。

```
import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class SQLView extends Activity implements OnClickListener{

    /* these 3 variables are the same as in the Database class */
    public static final String KEY_ROWID = "_id";
    public static final String KEY_FRONT = "card_front";
    public static final String KEY_BACK = "card_back";

    /* variables are made global so we can use them in all of our functions here */
    private Cursor myCursor;
    private TextView tv;
    private int iRow;
    private int iFront;
    private int iBack;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sqlview);

        TextView tv = (TextView)findViewById(R.id.tvSQLinfo);
        String result = null;
        Flashcards info = new Flashcards(this);
        info.open();

        myCursor = info.getCursor();
        //info.close();

        iRow = myCursor.getColumnIndex(KEY_ROWID);
        iFront = myCursor.getColumnIndex(KEY_FRONT);
        iBack = myCursor.getColumnIndex(KEY_BACK);

        Button front = (Button) findViewById(R.id.front);
        Button back = (Button) findViewById(R.id.back);
        Button next = (Button) findViewById(R.id.next);
        Button prev = (Button) findViewById(R.id.prev);

        front.setOnClickListener(this);
        back.setOnClickListener(this);
        next.setOnClickListener(this);
        prev.setOnClickListener(this);

        myCursor.moveToFirst();
        //Set the TextView to be the first card in our database 
        tv.setText(myCursor.getString(iFront));
    }

    @Override
    public void onClick(View v) {

        /* check if we are at our last entry in the DB */
        if(myCursor.isAfterLast()){
            /* move our cursor back to the first entry */
            myCursor.moveToFirst();
        }

        // TODO Auto-generated method stub
        switch (v.getId()){
            case R.id.front:
                tv.setText(myCursor.getString(iFront));
                break;

            case R.id.back:
                tv.setText(myCursor.getString(iBack));
                break;

            case R.id.next:
                if(myCursor.moveToNext()){
                    tv.setText(myCursor.getString(iFront));
                }else{
                    myCursor.moveToFirst();
                }
                break;

            case R.id.prev:
                myCursor.moveToPrevious();
                tv.setText(myCursor.getString(iFront));
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:01:50.607

中的局部变量实际上`tv`并`onCreate`没有分配给同名的类成员变量，从而导致`NPE`语句中出现`switch`。代替

```
TextView tv = (TextView)findViewById(R.id.tvSQLinfo); 
```

和

```
tv = (TextView)findViewById(R.id.tvSQLinfo); 
```

# ruby-on-rails - Rails递归实体性能问题

> ID：14131656
> 
> 赞同：2
> 
> 时间：2013-01-03T00:58:35.020
> 
> 标签：ruby-on-rails, activerecord

我有一个简单的 Rails 应用程序，它显示一个页面，人们可以在其中发表评论并回复这些评论，等等。

评论的模型非常简单：

```
class Comment < ActiveRecord::Base
  attr_accessible :text, :parent_id
  attr_accessor :level

  has_many :replies, :class_name => 'Comment', :foreign_key => 'parent_id'
  belongs_to :parent, :class_name => 'Comment'

  scope :get_replies, where(parent_id: to_param})

end 
```

并且，控制器将仅查看根级别的注释：

```
def index
  @root_comments = Comment.where('parent_id IS NULL')
end 
```

最后，视图将获取根评论的回复评论并呈现所有内容：

```
<% @root_comments.each{ |c| c.level = 0} %>

<% while @root_comments.size > 0 %>
  <% comment = @root_comments[0] %>
  <% @root_comments.delete_at(0) %>
  <% replies = comment.get_replies %>
  <% replies.each{ |r| r.level = comment.level + 1} %>
  <% @root_comments = replies + @root_comments %>

  <div class="comment" style=<%= "margin-left:#{(comment.level * 50)}px;" %> >
    <%= comment.text %>
  </div>

<% end %> 
```

到目前为止一切顺利......直到检查rails服务器输出和......

```
 Comment Load (0.3ms)  SELECT "comments".* FROM "comments" WHERE (parent_id IS NULL)
  Comment Load (0.3ms)  SELECT "comments".* FROM "comments" WHERE "comments"."parent_id" = 1
  Comment Load (0.3ms)  SELECT "comments".* FROM "comments" WHERE "comments"."parent_id" = 4
  ...
  Comment Load (0.3ms)  SELECT "comments".* FROM "comments" WHERE "comments"."parent_id" = 16
  Comment Load (0.3ms)  SELECT "comments".* FROM "comments" WHERE "comments"."parent_id" = 17 
```

SQL查询无处不在...

我还没有找到任何关于内置 Rails 服务器优化来管理这种方法的信息。

1）任何人都知道这种优化是否存在？

2）如果它不存在，我该如何解决这个问题？

* * *

我试图在控制器中急切加载联系人，但服务器输出显示相同数量的查询。

```
@root_comments = Comment.includes(:replies).where('parent_id IS NULL') 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T18:28:48.143

您可以做的一件事是将根评论与每个评论一起存储，因此您可以使用两个查询来查询所有评论：
* where('parent_id IS NULL') # 将这些评论的 id 提取到 root_ids
* where('root_id IN ?', root_ids)

缺点是您必须在代码中重建树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T19:16:45.617

你应该检查[rails eager loading](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-multiple-associations)。尝试

```
 def index
  @root_comments = Comment.includes(:comment).where('parent_id IS NULL')
 end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:32:43.620

我不确定它是否会帮助你的表现，但你可能想看看acts_as_tree gem：

[https://github.com/amerine/acts_as_tree](https://github.com/amerine/acts_as_tree)

至少，您可以避免重新发明轮子。

# c# - .Net 中具有相似术语的 SQL 参数

> ID：14131658
> 
> 赞同：2
> 
> 时间：2013-01-03T00:58:37.020
> 
> 标签：c#, .net, sql, sqlparameter

我有一个非常复杂的查询并且正在修复我喜欢的术语（我有一个单独的数据库表并将它们加载到我的搜索查询中），但是当我参数化它时，我的查询会给出不同的结果。

所以旧查询有一个类似的部分：

```
((v.title = ''BA'') OR (vs.label = ''BA'') OR 
(v.title LIKE ''BA %'') OR (vs.label LIKE ''BA %''))
... 
```

我用这样的东西（带参数）替换了它：

```
((v.title = @banone) OR (vs.label = @banone) OR 
(v.title LIKE @baright) OR (vs.label LIKE @baright))
...
@banone=N'BA',@baright=N'BA %',
... 
```

我的参数是这样添加的：

```
string key = "ba"; 
string val = "ba";

parameters.Add("@" + key + "none", val);
parameters.Add("@" + key + "right",  val + " %"); 
```

这两个查询是否相等？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:25:27.977

```
(
  (v.title = @banone) OR (vs.label = @banone) OR 
  (v.title LIKE @banone + ' %') OR (vs.label LIKE @banone + ' %')
)
...
@banone=N'BA'
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:32:02.980

前两个或案例没有理由存在。如果您只使用 LIKE 案例，您将捕获相同的记录。例如：

`(v.title LIKE @banone + ' %') OR (vs.label LIKE @banone + ' %')`

@banone='BA'

* * *

我认为您的参数添加代码不正确。

这个`parameters.Add("@" + key + "right", val + " %");`

应该`parameters.AddWithValue("@" + key +"right", val + "%");`

有两点需要注意。首先，我删除了百分号之前的空格。其次，我使用的是 AddWithValue 而不是普通的 Add。

然后回到你的问题是那个空间是否重要。回顾您的原始查询，搜索`title = 'BA' or title LIKE 'BA %'`实际上会忽略 title 具有*BAT*值的内容，例如，但会拾取*BA Something之类的标题*

您可能想要发布您正在使用的数据和您收到的结果。

# python - 如何将列数据解析为数组？

> ID：14131659
> 
> 赞同：-3
> 
> 时间：2013-01-03T00:58:42.400
> 
> 标签：python

我有一个文件如下：

```
1 99
2 33
3 90
4 25
5 89 
```

我想解析`1,2,3,4,5`成 list`x`和`99, 33, 90, 25, 89`list `y`，我该怎么做？

我不明白的部分是我只能读取但不知道如何解析为两个列表，我想也许有一种更优雅的方式来处理它，除了按空格分割并添加`words[0]`到`x`和`word[1]`到`y`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T01:02:04.883

```
with open('number-file') as f:
    x,y = zip(*(map(int, line.split()) for line in f)) 
```

会给你你想要的。

```
with open('number-file') as f: 
```

打开一个文件进行读取（并在代码完成后关闭它）。然后，您可以简单地对其进行迭代。

```
(line.split() for line in f) 
```

是一个[生成器表达式](http://docs.python.org/3/reference/expressions.html#grammar-token-generator_expression)，它为每行生成两个字符串。对于每一行，`map(int, line.split())`将这些字符串转换为整数。到目前为止的结果看起来像

```
[[1, 99], [2, 33], [3, 90], [4, 25], [5, 89]] 
```

有了，我们可以在结果列表和[`zip`](http://docs.python.org/3/library/functions.html#zip)中加入子列表的第 n 个元素。`x``y`

从技术上讲，x 和 y 现在是[元组](http://docs.python.org/3/library/functions.html#tuple)（不可变）而不是列表（可以扩展和更改）。在大多数情况下，元组应该也可以工作，但如果你真的需要列表，只需添加

```
x,y = list(x), list(y) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:01:39.543

```
left_column = []
right_column = []
with open('your_file') as f:
  reader = csv.reader(f, delimiter=' ')

  for line in csv_reader:
    left_column.append(line[0])
    right_column.append(line[1]) 
```

# jquery - PHP 和 JQuery 应用程序崩溃 IE

> ID：14131660
> 
> 赞同：3
> 
> 时间：2013-01-03T00:59:02.180
> 
> 标签：jquery, jquery-ui, internet-explorer

我已经在这个 PHP CPU 和 RAM 监视器上工作了一段时间了 - [http://nereus.rikkuness.net/php-cpu-monitor/](http://nereus.rikkuness.net/php-cpu-monitor/)

这一切都很好，并且做了它应该做的事情。但是我用的是Linux所以没有太多的能力在IE上测试。一些朋友说它适用于所有现代但完全崩溃的 IE。

只是想知道是否有人知道为什么会这样？

代码可在此处获得 - [http://php-cpu-monitor.googlecode.com/files/php-cpu-monitor-1.0.tar.gz](http://php-cpu-monitor.googlecode.com/files/php-cpu-monitor-1.0.tar.gz)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:58:42.500

IE 在第一次加载时缓存您的 AJAX 调用。因此，您的间隔计时器被绕过，并且您的 UI 会因不断调用 replay() 函数而受到冲击

```
$("#cpu").load("cpu.php?cpu=" + cpuCall , function() { 
```

您可以添加时间戳以避免获得缓存的结果：

```
$("#cpu").load("cpu.php?cpu=" + cpuCall + "&t=" + new Date().getTime(), function() { 
```

检查此链接以供参考

[jQuery 的 .load() 在 IE 中不起作用 - 但在 Firefox、Chrome 和 Safari 中很好](https://stackoverflow.com/questions/1061525/jquerys-load-not-working-in-ie-but-fine-in-firefox-chrome-and-safari)

另一种解决方案可能是使用 setTimeout() 延迟对 replay() 的调用

```
setTimeout(replay,cpuCall); 
```

但是，如果我正确理解您的代码，这将要求您在服务器端更改代码（并且它不会解决 IE 缓存问题）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T18:57:26.883

过去我遇到过一些与此非常相似的问题，它们通常总是与[缓存](http://viralpatel.net/blogs/ajax-cache-problem-in-ie/)有关。而且由于您的 AJAX 请求被缓存，您的 PHP 脚本不再在用户给定的时间间隔内休眠，这就是为什么您看到请求完成得更快的原因。

**缓存背景**

实际上，您的 Web 服务器将发出三个响应标头来控制 AJAX 资源的缓存方式。这些适用于 HTTP 和 AJAX 请求。为了您的目的，您实际上并不需要了解这些，但了解这些信息总是很好的信息：

1.  **Expires** - 此标头告诉浏览器何时需要检索资源的新版本。例如，一张照片或公司徽标可能会将 Expires 标题设置为未来几个月，因为我们不希望这些图像经常更改。另一方面，检索对时间敏感的 CPU 使用数据的 AJAX 请求的 expires 值可能应该为 -1 以确保始终刷新此数据
2.  **Last Modified** - 浏览器可以使用它向服务器发送条件 GET 请求。服务器检查资源是否在给定值之后更改，如果是，则返回更新的内容
3.  **缓存控制**- 这允许代理和其他缓存将此资源的副本存储在共享（或非共享）池中，以便更快地访问资源。

**jQuery.load() 是如何工作的**

jQuery.load() 通过向服务器上的 html 资源发送一个简单的 GET 请求来工作。请记住，jQuery`load()`函数是获取数据的最简单方法，而且通常不是数据检索的最佳方法。它旨在成为一种从服务器获取 html 并随后在您选择的 jQuery DOM 元素中填充 html 的快速方法。[这是来自文档](http://api.jquery.com/load/)的片段：

> 此方法是从服务器获取数据的最简单方法。它大致相当于 $.get(url, data, success) ，只是它是一个方法而不是全局函数，并且它具有隐式回调函数。当检测到成功响应时（即当 textStatus 为“success”或“notmodified”时），.load() 将匹配元素的 HTML 内容设置为返回的数据。这意味着该方法的大多数使用都非常简单。

由于`$.load()`主要是一种将 html 插入 jQuery 元素的简单方法，因此 jQuery 库不提供确保您的请求不被缓存的机制。这是合理的，因为如果您只是检索 HTML，我们可以通过缓存这些响应来获得更高的性能，尤其是在它们没有更改并且被频繁轮询的情况下。

在我测试的所有浏览器中，看起来 IE(9) 是唯一一个始终缓存 AJAX 请求的浏览器。查看 Firefox 与 Internet Explorer 中发出的请求之间的区别：

火狐：

![Firefox 中的 AJAX 请求](../Images/33464e3a41fac97b32bcce1e29a34190.png)

IE浏览器：

![IE9 中的 AJAX 请求](../Images/90fb9d1629be0c94a21146149055e727.png)

请注意来自 IE 的可疑 <1 ms 响应时间。 [IE 不会在过期日期之前刷新缓存的内容](http://blog.httpwatch.com/2009/08/07/ajax-caching-two-important-facts/)，也不会在缓存方面区分 HTTP 和 AJAX 请求。我们需要尝试不同的解决方案，以确保每次调用您的 AJAX URL 时都能接收到新数据。

**防止 Internet Explorer 缓存 AJAX 请求**

有几种不同的方法可以解决 IE 的缓存限制：

1.  **向查询字符串添加一个随机标记（nonce 值）**，例如`?token=[timestamp]`. 通过更改每个请求的请求 URL，浏览器将为每个请求存储不同的资源缓存副本，您将确保从服务器获取最新数据。jQuery 通过简单地获取时间戳来创建一个随机值，如下所示：`var nonce = ( new Date() ).getTime();`
2.  **使用 POST 而不是 GET 请求**。由于 POST 请求旨在发送修改服务器上资源的请求，因此浏览器永远不会缓存它们。
3.  **发送一个专门禁止浏览器缓存它的 HTTP 响应标头**- 这将在您的 cpu.php 中实现。您可以通过更改`$http_response_header`数组轻松地修改它（请参阅[此处](http://php.net/manual/en/reserved.variables.httpresponseheader.php)的文档）
4.  **使用`jQuery.ajax()`代替`jQuery.load()`**：您可以使用该选项`$.ajax()`指定某些 AJAX 调用以强制刷新。`cache: false`甚至更多，您可以通过在 ajaxSetup(): 中进行配置来确保每次刷新所有 AJAX 调用`$.ajaxSetup ({ cache: false });`。这与#1 的解决方案基本相同，但无需在您的 javascript 代码中创建 nonce 值。

在所有备选方案中，#4 是最能保留您正在发出的请求类型并且最容易配置的选项。

另一个建议 - 使用`window.setInterval()`调用你的`replay()`函数是一种设置请求之间等待间隔的简单方法，并且通常在客户端上实现可变长度的睡眠周期比在服务器上更好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T08:37:26.437

我看到这段代码，文本在输入标签之外，这是故意的吗？

```
<input id="radio01" type="radio" name="speed" value="0.1" onclick="changeSeconds(this)" />0.1
<input id="radio05" type="radio" name="speed" value="0.5" onclick="changeSeconds(this)" checked="checked" />0.5
<input id="radio1" type="radio" name="speed" value="1" onclick="changeSeconds(this)" />1
<input id="radio5" type="radio" name="speed" value="5" onclick="changeSeconds(this)" />5
<input id="radio10" type="radio" name="speed" value="10" onclick="changeSeconds(this)" />10 
```

# php - 裁剪图像的小版本，同时编辑原始图像

> ID：14131661
> 
> 赞同：1
> 
> 时间：2013-01-03T00:59:11.580
> 
> 标签：php, javascript, jquery

我正在创建一个检查图像的画廊，确保它们的大小正确。如果图像尺寸不正确，则在图像上放置一个标记，用户必须进行编辑。当用户单击图像时，将调用包含所选图像的模式。模态中的图像大小可能不是原始图像的 100%，因此我使用的任何类型的 jQuery 或 JS 裁剪工具都不允许我根据原始图像调整大小。

关于裁剪“缩小”尺寸图像并按比例修改原始图像的方法有什么想法吗？

我有原始图像的`naturalHeight`and `naturalWidth`，但除非我能找到使用较小尺寸图像进行某种比较裁剪的实用方法，否则模态方法似乎不可行。

任何解决此问题的帮助或工具都会有很大帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:05:23.957

我构建了类似的东西，Jcrop 就像一个魅力一样工作。它考虑了原始高度/宽度与显示的高度/宽度之间的差异。一探究竟。[http://deepliquid.com/content/Jcrop.html](http://deepliquid.com/content/Jcrop.html)

# ruby - 带有字符串参数的 Sinatra 应用程序的 Heroku rake 任务失败

> ID：14131662
> 
> 赞同：7
> 
> 时间：2013-01-03T00:59:11.793
> 
> 标签：ruby, heroku, sinatra, rake

我刚刚将一个 Sinatra 应用程序部署到 heroku，该应用程序包含两个 rake 任务：

```
task :create_db , [:db_id , :db_name]
task :destroy_db , [:db_id, :token] 
```

当我跑

```
heroku run rake -T 
```

在控制台中，Heroku 打印以下响应：

```
(in /app)
rake create_db[db_id,db_name]  # Creation count database task
rake destroy_db[db_id,token]   # Destroy database task 
```

但是，当我运行时：

```
heroku run rake create_db['test', 'test database'] 
```

它响应以下错误：

```
(in /app)
rake aborted!
Don't know how to build task 'create_db[test,'
/usr/local/lib/ruby/1.9.1/rake.rb:1720:in `[]'
/usr/local/lib/ruby/1.9.1/rake.rb:2040:in `invoke_task'
/usr/local/lib/ruby/1.9.1/rake.rb:2019:in `block (2 levels) in top_level'
/usr/local/lib/ruby/1.9.1/rake.rb:2019:in `each'
/usr/local/lib/ruby/1.9.1/rake.rb:2019:in `block in top_level'
/usr/local/lib/ruby/1.9.1/rake.rb:2058:in `standard_exception_handling'
/usr/local/lib/ruby/1.9.1/rake.rb:2013:in `top_level'
/usr/local/lib/ruby/1.9.1/rake.rb:1992:in `run'
/usr/local/bin/rake:31:in `<main>' 
```

我不太确定为什么会失败，但我的猜测是它与字符串参数有关。正如你在上面看到的，它说“不知道如何构建任务'create_db [test'，测试显示没有字符串。

知道如何让这个任务从命令行运行吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-03T14:28:57.507

来自[Rake 文档](https://github.com/jimweirich/rake/blob/rake-10.0.3/doc/rakefile.rdoc)：

> rake 任务名称及其参数需要是 rake 的单个命令行参数。这通常意味着没有空格。如果需要空格，则应引用整个 rake + 参数字符串。像这样的东西：
> 
> ```
> rake "name[billy bob, smith]" 
> ```
> 
> （操作系统和 shell 之间的引用规则有所不同，因此请确保您查阅适用于您的操作系统/shell 的正确文档）。

另请注意，您不需要引用各个参数。

在您的情况下，这应该有效：

```
rake "create_db[test, test database]" 
```

这也有效：

```
rake create_db[test,'test database'] 
```

请注意，第二个参数被引用，但逗号和引号之间没有空格，因此 shell 将整个内容视为单个参数。

### 在 Heroku 上

这不起作用 using `heroku run`，因为在这种情况下，命令会被 shell 解释*两次*，一次由您自己解释，然后在 Heroku Dyno 上再次解释，因此您需要确保 Heroku 运行的命令具有正确的引号。

您需要转义引号：

```
heroku run rake \"create_db[test, test database]\" 
```

这样在 Dyno 上运行的命令是`rake "create_db[test, test database]"`；或引用引号：

```
heroku run rake "create_db[test,'test database']" 
```

这样运行的命令是`rake create_db[test,'test database']`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T03:06:47.833

原因

> $ heroku run rake create_db['test', 'test database']

不起作用是由于参数之间/内部的空间。以下将起作用。

> $ heroku run rake "create_db['test','test database']"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-11T16:08:52.050

对我来说这很有效

```
heroku run rake "namespace:task['var1','var2']" 
```

# iphone - iphone 视频搜索栏，如苹果相机应用程序

> ID：14131663
> 
> 赞同：1
> 
> 时间：2013-01-03T00:59:17.427
> 
> 标签：iphone, video, camera, seekbar

我正在克隆苹果相机应用程序。
从相机胶卷中选择视频时，我可以看到视频搜索栏。
搜索栏由几个视频屏幕截图图像和视频时间组成。
我怎样才能做到？

# objective-c - 保持进度条的状态

> ID：14131672
> 
> 赞同：0
> 
> 时间：2013-01-03T01:00:24.737
> 
> 标签：objective-c, asihttprequest, uiprogressview

我正在使用 ASIHttpRequest 在我的应用程序中下载文档。我正在显示下载的每个文档的进度条。文档显示在 UITableView 中，因此表格中的每个文档单元格都有一个单独的进度条。当用户单击“返回”时' 然后再次来到文档表，我想显示进度条。但是没有显示。下载文档的代码如下：

```
- (void)startDownloadingDocumentUsingIndexPath:(NSIndexPath*)indexPath 
{   
    Document *document = [self.objects objectAtIndex:indexPath.row];
    self.ip=indexPath;
    if(isNetworkAvailable)
    {   
        NSString *str = [NSString stringWithFormat:kBody_convertDocToByte,
                         document.docCatId,
                         document.docCatName,
                         document.docChksum,
                         document.docLocation,
                         document.docName,
                         document.docSize,
                         document.docType,
                         document.docUpdated,
                         document.docUpdatedBy,
                         document.documentId
                         ];
        NSMutableData *data = [NSMutableData dataWithData:[str dataUsingEncoding:NSUTF8StringEncoding]];
        self.req = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:kURL]];

        self.req.shouldAttemptPersistentConnection   = NO;
        [self.req setDownloadProgressDelegate:_progress];

        self.req.delegate=APP_DEL;
        self.req.timeOutSeconds=timeOut;
        [self.req setDidFinishSelector:@selector(didFinishDownloadDocument:)];
        [self.req setDidFailSelector:@selector(didFailDownloadDocument:)];
        [self.req addRequestHeader:@"SOAPAction" value:kAction_convertDocToByte];
        [self.req addRequestHeader:@"Content-Type" value:@"text/xml; charset=utf-8"];
        [self.req setPostBody:data];
        [self.req setRequestMethod:@"POST"];
        [self.req setContentLength:[data length]];

        self.req.userInfo=[NSDictionary dictionaryWithObjectsAndKeys:document,@"data",self.objCategory.categoryName,@"catname",self,@"vctr", nil];
        [[APP_DEL nq] addOperation:self.req];
        [[APP_DEL nq] go];
        [APP_DEL nq].showAccurateProgress = YES;
    } 
    else {
        UIAlertView *av=[[UIAlertView alloc] initWithTitle:@"Message" message:@"Please connect to internet & try downloading/updating document later." delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
        [av show];
    }
} 
```

我应该在代码中进行哪些更改以保持进度条的状态？

**编辑：-**文档表实际上是一个“子”表。当用户在“父”表中选择一行时显示。“父”表中的代码是：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    self.nxt_obj_STMaster2ViewController=[[STMaster2ViewController alloc] initWithNibName:@"STMaster2ViewController" bundle:nil];
    self.nxt_obj_STMaster2ViewController.objCategory=[self.objects objectAtIndex:indexPath.row];
    self.nxt_obj_STMaster2ViewController.managedObjectContext=self.managedObjectContext;
    self.nxt_obj_STMaster2ViewController.detailViewController=self.detailViewController;
    self.nxt_obj_STMaster2ViewController.pre_STMasterViewController=self;

    [tableView deselectRowAtIndexPath:indexPath animated:NO];

    [self.navigationController pushViewController:self.nxt_obj_STMaster2ViewController animated:YES];
} 
```

'child' 文档视图控制器的 viewDidLoad 如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIBarButtonItem *item = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(button_refreshTapped:)];

    self.navigationItem.rightBarButtonItem=item;

    UIImageView *tempImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"left-background.jpg"]];
    [tempImageView setFrame:self.tableView.frame];
    [self.tableView setBackgroundColor:[UIColor clearColor]];
    self.tableView.backgroundView = tempImageView;

    [self startLoadingData:self.detailViewController.liveData];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:34:19.027

因此，您所做的是每次调用时创建一个全新的闪亮视图控制器`tableView:didSelectRowAtIndexPath:`。相反，您应该只创建一次并在需要时重新显示它。不过，我不确定您的所有逻辑，因此您可能需要在更改行时创建一个新逻辑（在这种情况下，您还应该比较您的逻辑，`.objCategory`看看它是否与您即将使用的视图控制器相同推。）

尝试将其更改为：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (!self.nxt_obj_STMaster2ViewController)
    {
        self.nxt_obj_STMaster2ViewController=[[STMaster2ViewController alloc] initWithNibName:@"STMaster2ViewController" bundle:nil];
        self.nxt_obj_STMaster2ViewController.managedObjectContext=self.managedObjectContext;
        self.nxt_obj_STMaster2ViewController.detailViewController=self.detailViewController;
        self.nxt_obj_STMaster2ViewController.pre_STMasterViewController=self;
    }

    self.nxt_obj_STMaster2ViewController.objCategory=[self.objects objectAtIndex:indexPath.row];

    [tableView deselectRowAtIndexPath:indexPath animated:NO];

    [self.navigationController pushViewController:self.nxt_obj_STMaster2ViewController animated:YES];
} 
```

# android - Android 联系人选择器 - 检索姓名和号码

> ID：14131674
> 
> 赞同：2
> 
> 时间：2013-01-03T01:00:29.853
> 
> 标签：android, nullpointerexception, contact, picker

这个问题我研究了很多。我实际上已经完美地工作了，但现在它突然不起作用了。

我正在尝试使用联系人选择器检索联系人的姓名和号码。我想获取名称和号码并在我的应用程序中使用它。

我使用了这个问题的答案中的代码： [Selecting a number from user with multiple numbers when using the contact picker](https://stackoverflow.com/questions/6171328/selecting-a-number-from-user-with-multiple-numbers-when-using-the-contact-picker)

当我尝试打开联系人选择器时，我得到一个 nullPointerException。

这是我的代码：

```
@Override  
    protected void onActivityResult(int requestCode, int resultCode, Intent data) { 

        Uri result = data.getData(); //this is line 71

        // get the phone number id from the Uri
        String id = result.getLastPathSegment();

        // query the phone numbers for the selected phone number id
        Cursor c = getContentResolver().query(Phone.CONTENT_URI, null, Phone._ID + "=?", new String[]{id}, null);

        int phoneIdx = c.getColumnIndex(Phone.NUMBER);
        int nameIdx = c.getColumnIndex(Phone.DISPLAY_NAME);

        if(c.getCount() == 1) { // contact has a single phone number
            // get the only phone number
            if(c.moveToFirst()) {
                phoneNumber = c.getString(phoneIdx);
                contact = c.getString(nameIdx);

                //set text of view to name and number
                contactInfo.setText(contact + ": " + phoneNumber);

            } else {
                Toast.makeText(getApplicationContext(), "There are no contacts to choose from.", Toast.LENGTH_SHORT).show();
            }
        }
    } 
```

日志猫：

```
01-02 17:42:53.005: E/AndroidRuntime(3509): Uncaught handler: thread main exiting due to uncaught exception

01-02 17:42:53.025: E/AndroidRuntime(3509): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1001, result=0, data=null} to activity {com.MyActivity/com.mystuff.MyActivity}: java.lang.NullPointerException
01-02 17:42:53.025: E/AndroidRuntime(3509):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3329)
01-02 17:42:53.025: E/AndroidRuntime(3509):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3371)
01-02 17:42:53.025: E/AndroidRuntime(3509):     at android.app.ActivityThread.access$2700(ActivityThread.java:119)
01-02 17:42:53.025: E/AndroidRuntime(3509):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1893)
01-02 17:42:53.025: E/AndroidRuntime(3509):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-02 17:42:53.025: E/AndroidRuntime(3509):     at android.os.Looper.loop(Looper.java:123)
01-02 17:42:53.025: E/AndroidRuntime(3509):     at android.app.ActivityThread.main(ActivityThread.java:4363)
01-02 17:42:53.025: E/AndroidRuntime(3509):     at java.lang.reflect.Method.invokeNative(Native Method)
01-02 17:42:53.025: E/AndroidRuntime(3509):     at java.lang.reflect.Method.invoke(Method.java:521)
01-02 17:42:53.025: E/AndroidRuntime(3509):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
01-02 17:42:53.025: E/AndroidRuntime(3509):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
01-02 17:42:53.025: E/AndroidRuntime(3509):     at dalvik.system.NativeStart.main(Native Method)
01-02 17:42:53.025: E/AndroidRuntime(3509): Caused by: java.lang.NullPointerException
01-02 17:42:53.025: E/AndroidRuntime(3509):     at com.emergencydialer.MainEmergencyDialerActivity.onActivityResult(MyActivity.java:71)
01-02 17:42:53.025: E/AndroidRuntime(3509):     at android.app.Activity.dispatchActivityResult(Activity.java:3828)
01-02 17:42:53.025: E/AndroidRuntime(3509):     at android.app.ActivityThread.deliverResults(ActivityThread.java:3325) 
```

我在代码中用注释标记了第 71 行。这令人沮丧，因为该代码昨天运行良好。不知道我做了什么，也不知道为什么数据返回 null。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:27:44.793

在处理返回的数据之前，您应该检查您的 resultCode（RESULT_CANCELED 或 RESULT_OK： http: [//developer.android.com/reference/android/app/Activity.html#RESULT_CANCELED ）以及数据是否为空。](http://developer.android.com/reference/android/app/Activity.html#RESULT_CANCELED)

您还应该检查在哪里抛出 startActivityForResult

# r - 为回归方程选择适当的滞后以及如何解释 VARselect 的结果

> ID：14131676
> 
> 赞同：5
> 
> 时间：2013-01-03T01:00:31.980
> 
> 标签：r, vector, var

我的问题有两个。

如何为我的回归方程选择合适的滞后？我有房价的因变量，租金、房屋供应、全国股市指数、抵押贷款利率和房屋空置率的自变量。

我做了一些阅读，发现`VARselect(data,lag.max=1 or 2 or 3 etc)`可以帮助我选择合适的延迟。

`data`是具有上述变量的 csv 文件。所以下面是我得到的。我应该如何解释它？

```
> var=VARselect(data,lag.max=8)
> var
$selection
AIC(n)  HQ(n)  SC(n) FPE(n) 
     3      3      1      3 

$criteria
          1        2        3        4        5        6        7        8
AIC(n) 1.716881 1.575052 1.474927 1.543878 1.493210 1.651975 1.624066 1.773173
HQ(n)  1.807505 1.726093 1.686385 1.815752 1.825500 2.044682 2.077189 2.286712
SC(n)  1.962629 1.984634 2.048341 2.281125 2.394289 2.716887 2.852810 3.165750
FPE(n) 5.569664 4.841214 4.396341 4.741887 4.556023 5.424803 5.393498 6.451249 
```

我想，简而言之，我想知道的是——我应该将租金、房屋供应、全国股市指数、抵押贷款利率和房屋空置率分别滞后多少才能创建一个“足够好”的模型.

我愿意接受其他方法来帮助我找出我应该做什么，但请帮助我解决代码。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-16T20:19:02.103

查看包的[文档](http://cran.r-project.org/web/packages/vars/vars.pdf)，`vars`特别是`VARselect`函数的文档（与 相同的信息`?VARselect`，但格式很好）。

`$selection`对象告诉您的是通过最小化 4 个标准（Akaike [、](http://en.wikipedia.org/wiki/Akaike_information_criterion) Hannan [-Quinn](http://en.wikipedia.org/wiki/Hannan%E2%80%93Quinn_information_criterion)、[Schwarz](http://en.wikipedia.org/wiki/Bayesian_information_criterion)和[最终预测误差](http://www.mathworks.com/help/ident/ref/fpe.html)）中的每一个选择的总滞后顺序；

对象告诉您`$criteria`的是在给定滞后下每个标准的值（`$criteria[3L, p]`例如，告诉您第一个`p`滞后规范的 Schwarz 标准是什么）。如果有很多滞后具有相似的标准值，这可能很有用，如果最小化器`p`非常高，则允许您选择更简约的规范，但低得多的值会`p`为您提供类似的标准。

另请注意，如果您只是运行`VARselect(data)`，它将评估*联合*拟合模型的标准-我不确定您要做什么，但是从您的问题看来，您可能想评估滞后选择过程*分别*为数据中的*每一*列。为此，您必须运行.*`lapply(data, VARselect)`*

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-21T18:23:14.313

我相信 AIC 和 SC 测试是实践中最常用的，尤其是 AIC 有据可查（参见：Helmut Lütkepohl，多时间序列分析新介绍）。

正确的答案是没有一种方法可以给出最好的结果——这就是为什么它们都仍然在 vars 包中，大概。

为您自己的模型获得一个好主意的一种方法是对所有变量/特定子集进行上述测试，然后查看四个测试中的哪个测试给出了一致的值。然后将这一点与您的数据频率（每天、每周、每月、每年？）一起考虑，并做出明智的决定。如果您有月度数据，那么您上面提到的因素很可能确实会在 6 个月后产生影响，例如房屋供应与房价的关系——因为房屋的建造/腾出速度不是很快。

如果您不确定滞后信息标准在 VAR 模型中的位置 - 在包“vars”的函数 VAR 中有一个输入字段，您可以在其中输入 AIC、SC 等。*

# javascript - 从 Fancybox 弹出窗口中调用警报功能 - iFrame 和同源策略

> ID：14131679
> 
> 赞同：0
> 
> 时间：2013-01-03T01:01:03.803
> 
> 标签：javascript, fancybox, alert, same-origin-policy

我有一个小提琴：

[http://jsfiddle.net/nicorellius/4vQ9S/](http://jsfiddle.net/nicorellius/4vQ9S/)

警报在 show start 和 show over 和 close 时触发，但绑定到按钮单击让我望而却步。

我有一个可以工作的fancybox 弹出窗口。这是一个表格：

HTML 是一个简单的表格：

```
<form id="my-form" method="post" action="">
    <table>
        <tr>
            <td>
                <label for="name">Name</label></td>
                <input type="text" id="name" name="name">
            </td>
            <td>
                <input type="submit" value="Submit">
            </td>
        </tr>
    </table>
</form> 
```

触发fancybox的链接：

```
<a class="fancy-popup" href="test.html" data-fancybox-type="iframe"> 
```

我有一个调用一些函数的简单脚本：

```
$(document).ready(function() {

    function before_show() {
        alert("fancybox before show");
    }

    function after_show() {
        alert("fancybox after show");
    }

    function on_close() {
        alert("fancybox after close");
    }

    function alert_me() {
        $.fancybox.inner.find('iframe').contents().find('input.click-me').click(function() {
            alert("fancybox has been foiled!!!");
        });
    }

    $(".fancy-popup").fancybox({
        openSpeed     :    'slow',
        openEffect    :    'fade',
        minWidth      :    '200',
        minHeight     :    '100',
        maxWidth      :    '400',
        maxHeight     :    '150',
        scrolling     :    'no',
        beforeShow    :    before_show,
        afterShow     :    after_show,
        afterClose    :    on_close,
        //afterShow     :    alert_me
    });
}); 
```

我意识到我不能在 iFrame 中执行此操作，因为相同的来源策略。我一生都无法弄清楚如何让它发挥作用。

**笔记**

请注意，该问题自成立以来已发生变化，因此以下关于验证的答案不适用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:04:09.067

在经历了很多痛苦之后，我决定不使用 iFrame 重新设计它。我认为 iFrame 是最好的方法，但后来意识到我错了，至少在我目前的理解水平上是这样。但是，使用这种方法，我可以成功地从 fancyBox 弹出窗口中调用警报：

[http://jsfiddle.net/nicorellius/d4KVs/](http://jsfiddle.net/nicorellius/d4KVs/)

我想我也可以在这里使用我现有的验证。

这是更改的 HTML：

```
<a href="#test" class="fancy-popup">fancy link</a> 
```

我将 HTML 放在一个地方，并使用现有的 fancyBox 技术引用它。

然而，我并没有完全放弃。我一直在摆弄它，并找到了使用 iFrame 的解决方案。不确定我到底做了什么，但我制定了原始计划，并使用了脚本：

```
 function alert_me() {
        $.fancybox.inner.find('iframe').contents().find(
            'input.click-me').click(function() {
                alert("fancybox has been foiled!!!");
        });
    } 
```

现在警报框会在 iFrame fancyBox 中弹出。

The thing is with this solution is: it may be limited to the same domain I'm on, so in production it probably wont work. I ran a quick test and it seems to work cross domain but I have a feeling it'll cause me trouble in the future...

# c++ - GLUT：空白窗口

> ID：14131682
> 
> 赞同：0
> 
> 时间：2013-01-03T01:01:15.957
> 
> 标签：c++, opengl, gcc, freeglut

我使用最新的 freeglut 成功编译了此代码，但我不断得到一个空白窗口，其中填充了*glClearColor*函数中指定的颜色。这个简单的程序来自我大学提供的交互式计算机图形学教科书。我一个字一个字地抄了下来，还是不行。它应该旋转 2 个正方形。

我在 Windows 7 机器上使用 gcc：

$ gcc -Iinlude -Llib -o sample.exe sample.cpp -lfreeglut -lopengl32

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <GL/glut.h>

void rashape(int width, int height);
void display();
void renderScene();
void animate(int value);
void drawSquare();
int angle = 0;

int main(int argc, char **argv) {
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE);
    glutInitWindowSize(600, 300);
    glutInitWindowPosition(0, 0);
    glutCreateWindow("Primjer animacije");
    glutDisplayFunc(display);
    glutTimerFunc(20, animate, 0);
    glutMainLoop();
}

void animate(int value) {
    angle++;
    if(angle >= 360) kut = 0;
    glutPostRedisplay();
    glutTimerFunc(20, animate, 0);
}

void display() {
    glClearColor(1.0f, 0.2f, 1.0f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT);
    glLoadIdentity();
    renderScene();
    glutSwapBuffers();
}

void reshape(int width, int height) {
    glDisable(GL_DEPTH_TEST);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, width-1, 0, height-1, 0, 1);
    glViewport(0, 0, (GLsizei)width, (GLsizei)height);
    glMatrixMode(GL_MODELVIEW);
}

void drawSquare() {
    glBegin(GL_QUADS);
    glVertex2f(  0.0f,   0.0f);
    glVertex2f(100.0f,   0.0f);
    glVertex2f(100.0f, 100.0f);
    glVertex2f(  0.0f, 100.0f);
    glEnd();
}

void renderScene() {
    glPointSize(6);
    glColor3f(0.3f, 1.0f, 0.3f);

    glPushMatrix();
    glTranslatef( 150.0f, 160.0f, 0.0f);
    glScalef(1.5f, 1.5f, 1.0f);
    glRotatef((float)kut, 0.0f, 0.0f, 1.0f);
    glTranslatef(-50.0f, -50.0f, 0.0f);
    drawSquare();
    glPopMatrix();

    glPushMatrix();
    glTranslatef( 400.0f, 160.0f, 0.0f);
    glScalef(1.5f, 1.5f, 1.0f);
    glRotatef(-(float)kut, 0.0f, 0.0f, 1.0f);
    glTranslatef(-50.0f, -50.0f, 0.0f);
    drawSquare();
    glPopMatrix();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T02:57:06.367

你从不打电话`reshape()`。因此，使用了默认的投影矩阵，它`(0,0)`位于屏幕的中心，并且视图“半径”为 1。因此，您的正方形被渲染得离屏幕很远。

`reshape()`在尝试渲染任何东西之前使用适当的参数调用应该可以工作。但是，您真正想做的是将其设置为 a `glutReshapeFunc()`，以便投影矩阵自动调整以调整大小。这很容易做到：

```
int main(int argc, char ** argv)
{
    // ... stuff ...
    glutReshapeFunc(reshape);
    // ... more stuff ...
} 
```

视口现在应该会自动调整到窗口大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:07:38.610

一个典型的陷阱是背面剔除。不确定它是否适用于您的情况，但请尝试致电

```
glDisable( GL_CULL_FACE ); 
```

在绘图之前，看看是否有所作为。

# php - 如何在 HTML 中编写允许 POST 的 PHP 代码？

> ID：14131688
> 
> 赞同：-3
> 
> 时间：2013-01-03T01:01:57.263
> 
> 标签：php

我对 PHP 有点陌生，因此需要对此进行一些解释：

我想发布到`http://url/?`使用 Java/Python 等。

还有一个 PHP 函数来读取该帖子并将其写入文本文件或 HTML。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:05:13.317

你会使用`$_POST`.

根据您的要求，在较高级别上，此脚本足以将其写入名为 的文件`filename.txt`，假设您的 POST 密钥为`body`：

```
<?php
file_put_contents('filename.txt', $_POST['body']); 
```

要“将其写入 HTML”，您应该注意转义等。同样，假设您的 POST 键是`body`，这就足够了：

```
<?php
echo htmlentities($_POST['body']); 
```

请注意，您永远不应该直接相信用户输入会直接输出回 HTML，始终适当地对其进行转义，否则您将让自己容易受到 XSS/CSRF/whatever-else 攻击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:05:04.963

很简单。

你用全局数组读出 POST 数据`$_POST`

所以在你的 HTML 中添加这个：

```
<?php
    echo $_POST['name_of_field'];
?> 
```

它将回显该字段的内容`name_of_field`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:05:07.860

简短的回答，在您的 html 中回显：

```
<?php echo $_POST['post_key'] ?> 
```

要写入文件，您可以将[fwrite](http://php.net/manual/en/function.fwrite.php)和[fopen](http://php.net/manual/en/function.fopen.php)与`$_POST['post_key']`

# python - NLTK 朴素贝叶斯分类器找到先验概率

> ID：14131690
> 
> 赞同：0
> 
> 时间：2013-01-03T01:02:01.120
> 
> 标签：python, nltk

我使用 NLTK 训练了一个朴素贝叶斯分类器。

有什么方法可以找到每个标签使用的先验概率（我只使用 2 个标签）。我使用了相同数量的正面和负面推文，因此每个标签的先验应该是 0.5，但是每当我对没有特征的文本进行分类时，我总是得到概率（正面）=0.8076410666128 和概率（负面）=0.192358933872。

这与文本无关。我很困惑为什么模型会为具有 0 个特征的线提供这些概率，并且我认为它与每个标签的先验概率有关。

# ember.js - Ember - 从视图中找不到控制器操作

> ID：14131693
> 
> 赞同：1
> 
> 时间：2013-01-03T01:02:08.133
> 
> 标签：ember.js

好的，阅读所有更新的指南，但仍然无法弄清楚为什么我的控制器操作没有从视图中调用。我的 ember 应用程序在 application.handlebars 中插入了一个导航视图，如下所示：

```
{{view App.NavigationView}}
{{outlet}} 
```

导航控制器如下所示：

```
App.NavigationController = Ember.ObjectController.extend({
  navAction: function() {
    console.log('navAction');
  }
}); 
```

导航模板：

```
<ul class="nav">
  <li>{{#linkTo "dashboard"}}Dashboard{{/linkTo}}</li>
  <li>{{#linkTo "contacts"}}Contacts{{/linkTo}}</li>
  <li>{{#linkTo "campaigns"}}Campaigns{{/linkTo}}</li>
  <li>{{#linkTo "transactions"}}Transactions{{/linkTo}}</li>
  <li><a {{action "navAction"}}>navAction</a></li>
</ul> 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:33:21.473

我认为第一个错误是使用`{{view App.NavigationView}}`，因为 NavigationController 没有注入其中。

尝试使用新的 {{render}} 助手，例如 {{render navigation}}。它将同时查找 NavigationView、NavigationController、模板“导航”，并且应该连接在一起。

然后，{{action}} 助手现在按照文档中的说明进行操作：http: [//emberjs.com/guides/templates/actions/](http://emberjs.com/guides/templates/actions/)

这是一个简短的例子，（只是错过了使用 {{render}} [http://jsfiddle.net/JLHuG/40/](http://jsfiddle.net/JLHuG/40/)

这里我在当前路由中定义了动作，但是如果你在控制器中定义（取消注释它），这将由控制器处理

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:45:14.570

也许看看下面的帖子： [{{action}} with a click event doesn't trigger the function in the v2 Ember router](https://stackoverflow.com/questions/14129444/action-with-a-click-event-doesnt-trigger-the-function-in-the-v2-ember-route)

它谈到了使用一个名为 {{linkTo}} 的新助手

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T05:57:12.093

在 {{action}} 帮助器中指定目标选项以告知哪个对象应该接收方法调用。例如：

> {{动作“navAction”目标=“控制器”}}

如果目标选项未指定，那么它将指向通常设置为路由器的 controller.target 属性。但是，可以像这样将目标设置为控制器本身；

> App.NavigationController = Ember.ObjectController.extend({
> 
> ```
>  init : function(){
>         this._super();
>         this.set("target", this);
>   },
> 
> navAction: function() {
> console.log('navAction'); 
> ```
> 
> } });

您可以参考以下要点，该要点清楚地解释了 {{action}} 助手： [https ://gist.github.com/3595069](https://gist.github.com/3595069)

# c# - CsvHelper 不公开 WriteRecords

> ID：14131700
> 
> 赞同：4
> 
> 时间：2013-01-03T01:04:02.820
> 
> 标签：c#, nuget, csvhelper

我刚刚通过 Nuget 将 CsvHelper 添加到我的项目中。在这里查看 CsvHelper wiki 页面：[https](https://github.com/JoshClose/CsvHelper/wiki/Basics) ://github.com/JoshClose/CsvHelper/wiki/Basics ，它说 CsvHelper 公开了 WriteRecords 方法。

它去哪儿了？我在程序集中找不到它。

![WriteRecords 方法去哪儿了？](../Images/9bcb8b449a6d66edeeefd3cf55f6f30c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-05T20:25:06.480

发生这种情况的原因很可能是 NuGet 选择了错误的 CsvHelper 版本。就像其他人评论的那样，您的项目可能具有 CsvHelper 的 .NET 2.0 版本，即使您的项目是 4.5 项目。

NuGet 中存在/现在（似乎又回来了）一个错误，它会选择库的完整 .NET 版本而不是客户端配置文件版本，即使客户端配置文件版本是更高版本，或者在您的情况下匹配版本.

在 CsvHelper 中，.NET 2.0 构建是完整版本，因为没有可用的客户端配置文件。所有其他版本都是客户端配置文件构建。

这里的解决方案是升级你的 NuGet 并希望他们修复它。如果 NuGet 选择了错误的引用，您可以手动删除引用，并在 NuGet 包的正确文件夹中选择正确的引用。

很多人都报告了这个问题，不幸的是我无法改变它；据我所理解。我向 NuGet 提交了一个错误并已修复，但有人报告说它发生在更高版本的 NuGet 上；虽然我自己还没有经历过。

这是已修复的 NuGet 错误。[http://nuget.codeplex.com/workitem/2502](http://nuget.codeplex.com/workitem/2502)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T09:42:40.513

If you look at the source of `CsvWriter`, you see that there is a `WriteRecords` method. What version of CsvHelper do you have installed?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T03:27:43.677

检查 .NET 目标运行时。[`ICSVWriter`](https://github.com/JoshClose/CsvHelper/blob/master/src/CsvHelper/ICsvWriter.cs)确实公开`WriteRecords`，但前提是它不针对 .NET 2.0

# c# - C# 调试信息插入

> ID：14131701
> 
> 赞同：0
> 
> 时间：2013-01-03T01:04:04.813
> 
> 标签：c#, .net, visual-studio-2010, debugging, logging

> **可能重复：**
> [如何向 C# 中的每个方法调用添加 Trace()？](https://stackoverflow.com/questions/559148/how-can-i-add-a-trace-to-every-method-call-in-c)

在下面的示例中，我在每个方法中插入调试信息，以便我可以看到调用了哪个函数：

```
namespace A
{
    class A1
    {
        void f1()
        {
            Console.WriteLine("inside A.A1.f1");  //1
        }
        void f2()
        {
            Console.WriteLine("inside A.A1.f2");  //2
        }
    }
 } 
```

在不同的命名空间和类下有数百种方法。
将调试消息一一插入到每个方法中既麻烦又浪费时间。
除了像上面那样插入特定于方法的调试消息之外，还有更好的方法吗？
也许一个 API 函数可以告诉我在哪个方法中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:21:03.847

如果您使用的是 VS 2012，我会告诉**[您](http://blogs.msdn.com/b/mvpawardprogram/archive/2012/03/26/introduction-of-new-features-in-c-5-0.aspx)**在`WriteLine`.

不幸的是，在 VS2010 中这是不可能的。你可以调用这样的东西，但它真的不会是高性能的：

```
namespace A
{
    public static class DebugHelper
    {
        [Conditional("DEBUG")]
        public static void LogMethodName()
        {
            var method = new StackFrame(1).GetMethod();
            Console.WriteLine("inside {0}.{1}", method.DeclaringType, method.Name);
        }
    }
    class A1
    {
        void f1()
        {
            DebugHelper.LogMethodName();  //1
        }
        void f2()
        {
            DebugHelper.LogMethodName();  //2
        }
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:17:31.173

[StackTrace](http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx)和[StackFrame](http://msdn.microsoft.com/en-us/library/system.diagnostics.stackframe%28v=VS.110%29.aspx)类可能会提供您需要的信息（请注意，内联方法不会获取堆栈帧）：

```
catch (Exception e)
{
  StackTrace st = new StackTrace();
  StackTrace st1 = new StackTrace(new StackFrame(true));
  Console.WriteLine(" Stack trace for Main: {0}",
    st1.ToString());
  Console.WriteLine(st.ToString());
} 
```

# .net - Vb .net 比较两个文本文件

> ID：14131703
> 
> 赞同：-1
> 
> 时间：2013-01-03T01:04:13.040
> 
> 标签：.net, vb.net, algorithm, compare

我有一个用 .net 2.0 编写的程序，我需要比较两个文本文件。我试过下面的代码

```
Dim fileA As String
Dim fileB As String
Dim fileypath As String = (Environment.GetEnvironmentVariable("APPDATA") & "\ARLS\")
Dim sReaderA As New IO.StreamReader(New IO.FileStream(fileypath & "orig.dat", IO.FileMode.Open))
Dim sReaderB As New IO.StreamReader(New IO.FileStream(fileypath & "comp.dat", IO.FileMode.Open))
fileA = sReaderA.ReadToEnd
fileB = sReaderB.ReadToEnd
sReaderA.Close()
sReaderB.Close()
If fileA.CompareTo(fileB) = -1 Then
    MessageBox.Show(fileB.Replace(fileA, "")) '/// show the words in fileB which differ from fileA.
End If
If fileB.CompareTo(fileA) = -1 Then
    MessageBox.Show(fileA.Replace(fileB, "")) '/// show the words in fileB which differ from fileB.
End If 
```

它的工作原理是它只会显示是否将某些内容添加到行尾。如果在中间添加或删除任何内容，它将显示整个文本文件。有任何想法吗。 **<--EDIT-->** 所以我通过创建两个列表框，将文本文件转储到每个列表框，然后将列表框与以下代码进行比较来实现它。`For i As Integer = 0 To ListBox2.Items.Count - 1 If ListBox1.Items.Contains(ListBox2.Items(i)) Then Else LogPrint(ListBox2.Items(i)) End If Next For i As Integer = 0 To ListBox1.Items.Count - 1 If ListBox2.Items.Contains(ListBox1.Items(i)) Then Else LogPrint(ListBox1.Items(i)) End If Next ListBox2.Items.Clear() ListBox1.Items.Clear()` 这给了我差异，但这似乎还有很长的路要走。任何人都知道是否有更好的方法可以在不使用列表框的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:48:03.050

这不是一个简单的问题。事实上，有时有不止一种解决方案同样好。例如，如果文件 A 包含“141”而 B 包含“1441”，那么新的“4”是插入到第 2 个字符还是第 3 个字符？因此，没有单一的 .net 函数可以完成此任务。不过，您也许可以找到具有此功能的开源库。

解决问题的一种方法是找到文件中[最长的公共子字符串](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)，然后在剩余的一半上递归地执行相同的操作，直到没有更多的公共子字符串（长于最小大小）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:09:38.027

您是否试图确定它们是否相同？如果是这样，比较两者的字节数组可能是最好的方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-03T02:28:58.600

像这样的东西会起作用吗？

```
public void CheckFiles() {

//iterate through files...

    using (StreamReader r1 = new StreamReader("file1")) {

          using (StreamReader r2 = new StreamReader("file2")) {

                 while (!r1.EndOfStream && !rs.EndOfStream ) {

                      bool areLinesIdentical = compareLines(r1.readLine(), r2.readLine());

                      if (!areLinesIdentical) {

                      Console.WriteLine("These two lines do not match!" + r1.readLine() + " and " + r2.readLine());

                      }

                 }

             }

       }

}

    private static bool compareLines(string s1, string s2) {

    if (s1 == s2) { return true; }

    else { return false; }

    } 
```

# ruby-on-rails - 获取两个经度纬度点之间的行驶距离

> ID：14131708
> 
> 赞同：0
> 
> 时间：2013-01-03T01:04:39.513
> 
> 标签：ruby-on-rails, google-maps, google-maps-api-3, google-geocoder

我正在尝试获取轨道、地理编码器或任何其他有效方式上两个经纬度点之间的**行驶距离。有吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:23:37.873

[Google Maps API v3 文档](https://developers.google.com/maps/documentation/javascript/reference#DirectionsService)指定起点或目的地（或航点）可以是地址或[google.maps.LatLng](https://developers.google.com/maps/documentation/javascript/reference#LatLng)。要获取两个经度/纬度点之间的行驶距离，请将它们作为 google.maps.LatLng 对象在[请求中传递。](https://developers.google.com/maps/documentation/javascript/reference#DirectionsRequest)

相关问题：[谷歌地图 v3 中所有航点的总距离和时间](https://stackoverflow.com/questions/17306013/total-distance-and-time-for-all-waypoints-in-google-maps-v3)

[概念证明小提琴](http://jsfiddle.net/geocodezip/nzokcse9/7/)

**代码片段**（基于[文档中的示例](https://developers.google.com/maps/documentation/javascript/examples/directions-simple)）：

```
function initMap() {
  var directionsService = new google.maps.DirectionsService;
  var directionsDisplay = new google.maps.DirectionsRenderer;
  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 7,
    center: {
      lat: 41.85,
      lng: -87.65
    }
  });
  directionsDisplay.setMap(map);
  // New York, NY, USA (40.7127837, -74.0059413)
  var start = new google.maps.LatLng(40.7127837, -74.0059413);
  //Baltimore, MD, USA (39.2903848, -76.6121893)
  var end = new google.maps.LatLng(39.2903848, -76.6121893);
  calculateAndDisplayRoute(start, end, directionsService, directionsDisplay);
}

function calculateAndDisplayRoute(start, end, directionsService, directionsDisplay) {
  directionsService.route({
    origin: start,
    destination: end,
    travelMode: google.maps.TravelMode.DRIVING
  }, function(response, status) {
    if (status === google.maps.DirectionsStatus.OK) {
      var totaldistance = 0;
      var route = response.routes[0];
      // display total distance information.
      for (var i = 0; i < route.legs.length; i++) {
        totaldistance = totaldistance + route.legs[i].distance.value;
      }
      document.getElementById('distance').innerHTML += "<p>total distance is " + (totaldistance / 1000).toFixed(2) + " km</p>";
      directionsDisplay.setDirections(response);
    } else {
      window.alert('Directions request failed due to ' + status);
    }
  });
}
google.maps.event.addDomListener(window, "load", initMap);
```

```
html,
body,
#map {
  height: 100%;
  width: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="distance"></div>
<div id="map"></div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T09:54:48.923

```
 var R = 6371; 
    var dLat = toRad(lat2-lat1);
    var dLon = toRad(lon2-lon1); 

    var dLat1 = toRad(lat1);
    var dLat2 = toRad(lat2);

    var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
            Math.cos(dLat1) * Math.cos(dLat1) * 
            Math.sin(dLon/2) * Math.sin(dLon/2); 
    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
    var d = R * c;
    alert(d);

    function toRad(Value) {
     /** Converts numeric degrees to radians */
     return Value * Math.PI / 180; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-02T19:06:47.687

如果您不想依赖（制作精良的）Google API 或受限于 API 限制，我刚刚发现了另一种选择：OpenStreetMap 的[osrm-project](http://project-osrm.org/)。

就我而言，我需要检索到某个兴趣点的近 200,000 所房屋的最近行驶距离。

# ruby-on-rails - 如何按嵌套列的顺序获取记录？

> ID：14131714
> 
> 赞同：1
> 
> 时间：2013-01-03T01:05:10.507
> 
> 标签：ruby-on-rails, ruby-on-rails-3

**用户**

*   has_many：社区
*   has_many :posts

**社区**

*   属于_to：用户
*   has_many :posts

**邮政**

*   属于_to：用户
*   归属地：社区

我想在**example.com/posts**
上显示所有帖子记录， 但它必须按用户表中的**帖子所有者用户的“last_signed_in”**列进行排序。

我试过了，但这会返回错误**undefined method `users'**我该 如何解决？

```
@orders = @community.posts.user.order("last_active_at ASC") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T01:19:21.660

您不能在帖子集合上调用用户对象。

但是您可以将用户包含在您的集合中：

```
@community.posts.includes(:user).order("users.last_signed_in") 
```

更多信息： http: [//guides.rubyonrails.org/active_record_querying.html#eager-loading-multiple-associations](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-multiple-associations)

# jquery - 使用 jQuery 设置 onkeypress 属性

> ID：14131716
> 
> 赞同：1
> 
> 时间：2013-01-03T01:05:17.837
> 
> 标签：jquery, html

我需要使用外部脚本来设置`onkeypress`具有唯一性的输入属性`id`。我尝试使用`$j('#numret').attr('onkeypress', 'calc();');`，但此代码不起作用。有没有办法在外部改变这个属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T01:06:25.750

附加事件监听器：

```
$j('#req').keypress(calc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:07:52.680

```
$("#req").keypress(function(event){
   calc();
}); 
```

# android - 以编程方式在一行中的 LinearLayout 中定义 TextView

> ID：14131729
> 
> 赞同：0
> 
> 时间：2013-01-03T01:06:39.793
> 
> 标签：android, layout, textview, short

我知道这可以在多行中执行，如下所示：

```
 LinearLayout table=new LinearLayout(this);
    TextView titleText = new TextView(this);
    titleText.setText("Med Info");
    LinearLayout table=new LinearLayout(this);
    table.addView(titleText); 
```

有没有办法在不使用 XML 的情况下在一行中做到这一点？我已经尝试过了：

```
LinearLayout table=new LinearLayout(this);
    table.addView(new TextView(this).setText("Med Info")); 
```

这不起作用（错误的返回值）。我检查了 TextView 构造函数，但似乎没有什么符合我的目标。我只是想缩短已经存在的代码，而不是一个严肃的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T01:14:14.010

不，如果不创建包装函数，这是不可能的，因为两者`.addView()`都有`.setText()`return `void`。

无论如何，您都不需要这样做。可读性*远比*压缩代码行重要。

# javascript - 如何点击触发文件浏览的元素？

> ID：14131731
> 
> 赞同：1
> 
> 时间：2013-01-03T01:07:06.307
> 
> 标签：javascript, css

我需要一个`<button>`元素，单击它会触发文件浏览（即单击事件`<input type="file">`）。有没有办法在不影响按钮外观的情况下实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T01:16:18.360

您可以手动触发文件输入的点击事件。

```
$('button').click(function(e) { 
   e.preventDefault();
   $('input[type=file]').click();
}); 
```

示例：http: [//jsfiddle.net/UxFM4/2/](http://jsfiddle.net/UxFM4/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:11:26.770

无需依赖 css/html hack，您只需设置输入样式以匹配按钮即可。

它`type=file`是独一无二的，您无法将其模拟为看起来像一个按钮（因为按钮在中间接受文本，并且没有类型参数）。如果您真的需要这样做，可以使用 javascript 或使用 css 使其看起来像一个按钮（隐藏路径）。

[拨弄裁剪以使其仅成为按钮并隐藏路径，（使用 css 您可以对其进行样式设置）](http://jsfiddle.net/yZEXu/) Chrome 仅适用于此。

# facebook - 带有 authlogic 和 omniauth 的 Rails

> ID：14131736
> 
> 赞同：2
> 
> 时间：2013-01-03T01:07:26.417
> 
> 标签：facebook, ruby-on-rails-3, omniauth, authlogic, authlogic-oauth

我已经看过很多教程，并且我已经完成了一些使用授权模型简单地将社交帐户“连接”到 authlogic 的实现。但是我遇到了一些问题，它解释了人们如何实现“使用普通 authlogic 帐户注册”或“使用 facebook 注册”。

我看到了很多这样的实现，比如 Spotify 和 Pinterest for instane，但是你如何规范账户呢？当用户忘记注册 Facebook 时，您如何处理？当用户使用 Facebook 注册时，如何避免 Authlogic 没有密码？

# scala - Scala - 将值传递给模式匹配器（Play Framework 2x）

> ID：14131741
> 
> 赞同：0
> 
> 时间：2013-01-03T01:07:59.123
> 
> 标签：scala, playframework-2.0, pattern-matching, playframework-2.1

我想知道是否有办法将附加值传递给模式匹配器。我正在使用 Play Framework 2.1-RC1 和 mysql。

目前我有一个名为**Post**的类，用于在我们的 Web 应用程序中表示用户帖子。用户访问该站点，该站点使用以下方法从数据库中提取在浏览器中呈现精美的帖子。这一切都很好。

```
case class Post(id:Long, message:String)

object Post extends ObjectModel {
  val simple = {
    get[Long]("id") ~
    get[String]("message") map {
      case id~message=>
        Post(
          id,
          message
        )
    }
  }

  def fetch(): List[Post] = {
    DB.withConnection { implicit connection =>
      val ret = SQL( "SELECT id, message FROM post" ).as(Post.simple *)
    }
  }
} 
```

现在，我想做的是向**Post**类添加另一个字段，该字段表示当前用户（基于会话）是否已为帖子加注*星*标。这需要一个额外的数据库调用，理想情况下我想做如下的事情：

```
case class Post(id:Long, message:String, starred:Boolean)

object Post extends ObjectModel {
  val simple = {
    get[Long]("id") ~
    get[String]("message") map {
      case id~message=>
        Post(
          id,
          message,
          didStar(id, userId)
        )
    }
  }
... 
```

所以我的问题是如何将**userId**值获取到模式匹配器。我不想通过数据库传递数据。我可以将**userId**传递给 fetch() 方法，但是如何从模式匹配器中引用它？还是有另一种方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:28:28.800

我不知道有关您的架构的详细信息，但您可以设置默认值，并稍后更新：

```
case class Post(id:Long, message:String, starred:Boolean)

object Post extends ObjectModel {
  val simple = {
    get[Long]("id") ~
    get[String]("message") map {
      case id~message => Post(
        id, 
        message,
        starred = false // default value
      )
    }
  }
...
val post = // fetch post
val starred = // determine if post was starred
post.copy(starred = starred) // update value 
```

`post.copy`返回字段更新的新对象。

# java - 使用数字字段对二维数组字符串进行排序

> ID：14131744
> 
> 赞同：0
> 
> 时间：2013-01-03T01:08:11.270
> 
> 标签：java, string, sorting, multidimensional-array, integer

我想很多人都遇到过这个问题，你有一个由字符串分量和整数组成的二维数组。前任。

```
 `String[][] data = {{"Name1","5"}, {"Name2","10"},{"Name3","1"}, {"Name4","3"}};` 
```

现在您想按整数（在本例中为球员得分）对该二维数组进行排序，但是您希望匹配的名称与球员得分一起移动。这就是我所拥有的，但结果与预期的相差甚远。

```
 private void sort(){
    boolean sort;
    int current, next;
    do{
            sort = true;
            for (int i = 0; i < data.length - 1; i++){
                if (data[i][1] !=null && data[i+1][1] != null){
                    current = Integer.parseInt(data[i][1]);
                    next = Integer.parseInt(data[i+1][1]);
                        if(current > next){
                                String temp = "";
                                data[i][1] = Integer.toString(next); 
                                data[i+1][1] = Integer.toString(current);
                                data[i][0] = temp;
                                data[i][0] = data[i+1][1];
                                data[i+1][0] = temp;       
                                sort = false;
                        }
                }

            }

    }while(!sort);
} 
```

如果你问为什么人们会使用一个普通的二维数组，那是因为在 JFRAME 中，一个 JTable 需要一个二维数组来存储数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T01:10:57.167

您可以编写一个特殊的比较器，它可以比较例如 `{"Name1","5"}`，`{"Name2","10"}` 但我建议更改您的数据结构。

我会创建一个类型 caonatining *name*和*int*

```
class NameNum{
   String name;
   int number;
} 
```

并将它们存储在一维数组中

```
NameNum[] data 
```

实现一个比较方法，而不是简单地用于`Arrays.sort(..)`对数组进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:55:49.297

首先：您的数组元素*不*包含字符串和整数，因为在：

```
{ "Name1", "5" } 
```

`"5"`不是一个，`Integer`而是一个`String`。

如果您不关心相等性，这里的解决方案是在此元组上创建一个包装器对象，使其`Comparable`自行实现并使用`SortedSet`. 您必须将其反转才能显示，幸运的是 JDK 也为此提供了内置方法。

示例代码：

```
private static final String[][] data = {
    { "Name1", "5" },
    { "Name2", "10" },
    { "Name3", "1" },
    { "Name4", "3" }
};

private static final class Score
    implements Comparable<Score>
{
    private final String name;
    private final int score;

    private Score(final String name, final String scoreAsString)
    {
        this.name = name;
        // NOTE: this can throw an (unchecked) NumberFormatException,
        // but this code assumes that it never does
        score = Integer.parseInt(scoreAsString);
    }

    @Override
    public int compareTo(final Score o)
    {
        final int ret = score - o.score;
        return ret != 0 ? ret : name.compareTo(o.name);
    }

    // Print results nicely ;)
    @Override
    public String toString()
    {
        return "Name: " + name + ", score: " + score;
    }
}

public static void main(final String... args)
{
    final SortedSet<Score> set = new TreeSet<Score>();
    Score score;

    for (final String[] raw: data) {
        score = new Score(raw[0], raw[1]);
        set.add(score);
    }

    // Build a List from that Set...
    final List<Score> scoreList = new ArrayList<Score>(set);

    // Reverse it...
    Collections.reverse(scoreList);

    // Print results
    for (final Score s: scoreList)
        System.out.println(s);
} 
```

将上面的代码复制/粘贴到一个类中，运行它：你会看到它完成了预期的工作。

**重要提示**：是的，这个自定义类*不会*覆盖`equals()`/ `hashCode()`；这不是疏忽：因为这里只需要比较（因为`SortedSet`使用了 a），所以根本没有理由实施它们。

# php - 如何从 Mysql 连接 3 个表以形成网格？

> ID：14131747
> 
> 赞同：2
> 
> 时间：2013-01-03T01:08:44.827
> 
> 标签：php, mysql

我一直在尝试一切我能做到的技巧来完成我正在寻找的东西。我不是菜鸟，但我坚持这一点。我正在尝试从 3 个表中创建一个数据“网格”。我希望它看起来像这样：

```
 Assignments | Assgn 1 | Assgn 2 | Assgn 3 | Assgn 4 | Final Grade
----------------------------------------------------------------------
   Username 1 |  Grade  |  Grade  |  Grade  |  Grade  | Total  
----------------------------------------------------------------------
   Username 2 |  Grade  |  Grade  |  Grade  |  Grade  | Total  
----------------------------------------------------------------------
   Username 3 |  Grade  |  Grade  |  Grade  |  Grade  | Total 
```

成员的第一个表列：

```
Memberid, Username 
```

分配表：

```
 id, title 
```

成绩保存在 subassign 中：

```
id,assign,student,grade 
```

assign 是 assignments 表中作业的 id 号 student 是 members 表中的 Memberid。

我已经研究了几天。

给出一些结果的是这个查询

```
 $result = mysql_query("SELECT assignments.title,subassign.grade, members.Username FROM assignments, subassign, members WHERE members.Memberid = subassign.student and assignments.id = subassign.assign ",$connect); 
```

它正确链接了信息，但我无法让它像我想要的那样显示记录。它只是在 php.ini 中创建一个新行。有人可以帮忙吗。我正要把我的电脑扔出窗外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:15:29.253

您可以像这样使用连接：

```
SELECT
    members.title AS 'Assignments',
    assignment1.grade AS 'Assign1',
    assignment2.grade AS 'Assign2',
    assignment3.grade AS 'Assign3',
    assignment3.grade AS 'Assign4'
FROM members
INNER JOIN subassign AS assignment1 ON assignment1.person = members.MemberId AND assign = 1
INNER JOIN subassign AS assignment2 ON assignment2.person = members.MemberId AND assign = 2
INNER JOIN subassign AS assignment3 ON assignment3.person = members.MemberId AND assign = 3
INNER JOIN subassign AS assignment4 ON assignment4.person = members.MemberId AND assign = 4 
```

请注意，如果您想根据表中的返回动态列（我假设您这样做）`assignments`，最好的办法是动态生成类似于上面的查询。请参阅下面的一些非常粗略的示例代码，这些代码会生成您想要的动态查询（这完全未经测试）：

```
$results = mysql_query("SELECT id, title FROM assignments");
$query = "SELECT
    members.title AS 'Assignments',";

$joins = "";

while($row = mysql_fetch_assoc($results))
{
    $name = 'assignment' . $row['id'];
    $query .= "\r\n" . $name . ".grade AS '" . $row['title'] . "',";
    $joins .= "\r\nLEFT JOIN subassign AS " . $name . " ON " . $name . ".person = members.MemberId AND " . $name . ".assign = " . $row['id'];
}

$query = substr($query, 0, -1) . " FROM members" . $joins;
$result = mysql_query($query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:48:57.577

这基本上是数据的一个*支点*，但 MySQL 没有*支点*。因此，您可以使用与`CASE`此类似的聚合函数来复制功能：

```
select m.username as assignments,
  max(case when s.assign = 1 then s.grade end) Assign1,
  max(case when s.assign = 2 then s.grade end) Assign2,
  max(case when s.assign = 3 then s.grade end) Assign3,
  max(case when s.assign = 4 then s.grade end) Assign4,
  avg(s.grade) FinalGrade
from members m
left join subassign s
  on m.memberid = s.student
left join assignments a
  on s.assign = a.id
group by m.username 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/e5c7a/3)

结果：

```
| ASSIGNMENTS | ASSIGN1 | ASSIGN2 | ASSIGN3 | ASSIGN4 | FINALGRADE |
--------------------------------------------------------------------
|  username 1 |      50 |      68 |      32 |      68 |       54.5 |
|  username 2 |      75 |      86 |      89 |      36 |       71.5 |
|  username 3 |      99 |      70 |      24 |     100 |      73.25 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:15:43.300

不是 100% 确定我的查询是否正确，但你明白了：

```
SELECT 
    a.title, 
    s.grade, 
    m.Username 
FROM 
    members m
LEFT JOIN
    subassign AS s ON s.student = m.Memberid
LEFT JOIN
    assignments AS a ON a.id = s.assign 
```

# ruby - 找不到正确版本的 Ruby for Vim without Cream

> ID：14131750
> 
> 赞同：2
> 
> 时间：2013-01-03T01:09:06.310
> 
> 标签：ruby, vim

我从这里[http://sourceforge.net/projects/cream/files/Vim/](http://sourceforge.net/projects/cream/files/Vim/)得到了 Vim without Cream 7.3.744 。当我看`:help ruby-dynamic`它时说：

```
You need to install the right version of Ruby for this to
work.  You can find the package to download from:
http://www.garbagecollect.jp/ruby/mswin32/en/download/release.html
Currently that is ruby-1.9.1-p429-i386-mswin32.zip

Currently the name is "msvcrt-ruby191.dll".

The name of the DLL must match the Ruby version Vim was
compiled with.  Currently the name is "msvcrt-ruby191.dll".
That is for Ruby 1.9.1\.  To know for sure edit "gvim.exe" and
search for "ruby\d*.dll\c". 
```

但它不适用于 ruby​​-1.9.1-p429-i386-mswin32.zip，`:echo has('ruby')`返回 0。

当我查看 gvim.exe 时，它​​说 dll 是`msvcrt-ruby19.dll`，注意`19.dll`不是`191.dll`。但我找不到包含该文件的 Ruby 版本。甚至 Ruby 1.9.0 也有一个名为`msvcrt-ruby190.dll`. 我尝试只是重命名 dll，但它只会导致另一个错误，即：

```
LoadError: incompatible library version - 
C:/Program Files/Ruby19/lib/ruby/1.9.1/i386-mingw32/socket.so 
```

我在哪里可以找到正确版本的 Ruby？或者我可以通过其他方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T18:29:15.450

我接触了一个没有 Vim 的 Cream 的开发者，他说：

> 抱歉，仔细查看并通过可变值调整修复了所有这些问题。请尝试最新版本并确认它是否解决了您的问题：
> 
> [http://sourceforge.net/projects/cream/files/Vim/7.3.762/](http://sourceforge.net/projects/cream/files/Vim/7.3.762/)

它似乎有效。虽然由于某种原因，当我尝试使用使用 Ruby[的 vim-foreplay](https://github.com/tpope/vim-foreplay)时，Ruby 1.9 和官方安装程序，而这个新版本的 Vim without Cream with Ruby 1.9 比 Ruby 1.8 和 Vim without Cream 7.3 慢得多。 289\. 在最后提到的版本中使用 vim-foreplay 是即时的，而其他两个都需要 1 秒来评估代码，2 秒来建立连接。

# java - 无法从 JDK 6 下的 JMS 客户端连接到 WAS 6.0 队列

> ID：14131756
> 
> 赞同：0
> 
> 时间：2013-01-03T01:09:51.200
> 
> 标签：java, jms, websphere, compatibility

我的设置如下：

*   IBM Websphere 应用服务器 6.0.2.43
*   在 IBM JDK 6 上运行的 JMS 客户端

从 IBM JDK 1.4 运行时，我建立了一个 JMS 队列，并且能够使用我的测试 JMS 客户端发送/接收消息。但是，目标应用程序需要 Java 6.0，从 JDK 6.0 尝试测试应用程序会产生以下错误：

```
Jan 3, 2013 3:57:41 AM null null
SEVERE: SIB_MESSAGE
Jan 3, 2013 3:57:41 AM null null
WARNING: SIB_MESSAGE
javax.jms.JMSException: CWSIA0241E: An exception was received during the call to the method JmsManagedConnectionFactoryImpl.createConnection: com.ibm.websphere.sib.exception.SIResourceException: CWSIT0006E: It is not possible to connect to bus ROPS_BUS because the following bootstrap servers could not be contacted [10.0.92.92:7276:BootstrapBasicMessaging] and the following bootstrap servers returned an error condition []. See previous messages for the reason for each bootstrap server failure..
    at com.ibm.ws.sib.api.jms.impl.JmsManagedConnectionFactoryImpl.createConnection(JmsManagedConnectionFactoryImpl.java:240)
    at com.ibm.ws.sib.api.jms.impl.JmsManagedConnectionFactoryImpl.createConnection(JmsManagedConnectionFactoryImpl.java:159)
    at com.progressoft.tests.mq.ConnectTest.send(ConnectTest.java:141)
    at com.progressoft.tests.mq.ConnectTest.main(ConnectTest.java:51)
Caused by: com.ibm.websphere.sib.exception.SIResourceException: CWSIT0006E: It is not possible to connect to bus ROPS_BUS because the following bootstrap servers could not be contacted [10.0.92.92:7276:BootstrapBasicMessaging] and the following bootstrap servers returned an error condition []. See previous messages for the reason for each bootstrap server failure.
    at com.ibm.ws.sib.trm.client.TrmSICoreConnectionFactoryImpl2.bootstrapRequest(TrmSICoreConnectionFactoryImpl2.java:608)
    at com.ibm.ws.sib.trm.client.TrmSICoreConnectionFactoryImpl2.remoteBootstrap(TrmSICoreConnectionFactoryImpl2.java:405)
    at com.ibm.ws.sib.trm.client.TrmSICoreConnectionFactoryImpl2.createConnection(TrmSICoreConnectionFactoryImpl2.java:240)
    at com.ibm.ws.sib.trm.client.TrmSICoreConnectionFactoryImpl2.createConnection(TrmSICoreConnectionFactoryImpl2.java:145)
    at com.ibm.ws.sib.api.jmsra.impl.JmsJcaConnectionFactoryImpl.createCoreConnection(JmsJcaConnectionFactoryImpl.java:563)
    at com.ibm.ws.sib.api.jmsra.impl.JmsJcaConnectionFactoryImpl.createCoreConnection(JmsJcaConnectionFactoryImpl.java:499)
    at com.ibm.ws.sib.api.jmsra.impl.JmsJcaConnectionFactoryImpl.createConnection(JmsJcaConnectionFactoryImpl.java:312)
    at com.ibm.ws.sib.api.jms.impl.JmsManagedConnectionFactoryImpl.createConnection(JmsManagedConnectionFactoryImpl.java:206)
    ... 3 more 
```

我能够成功地远程登录主机/端口，并且设置对我来说似乎没问题（毕竟，它使用 Java 1.4 工作），我无法在服务器上找到更详细的尝试日志记录，很可能，我不知道要去找它。

有任何想法吗？

注意：我知道 WAS 6.0 支持已经结束，很久以前......但我现在坚持下去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T12:40:53.240

[*我能够使用IBM Client for JMS on J2SE 和 IBM WebSphere Application Server*](http://www-01.ibm.com/support/docview.wss?uid=swg24012804)从 IBM JDK 6（甚至从 Oracle JDK 6）连接到 WAS 队列。

尽管客户端正式支持 Java 1.4 和 1.5（IBM 和 SUN 实现），但它在 Java 6 上运行没有任何问题

我只需要将属性添加`com.ibm.CORBA.ORBInit=com.ibm.ws.sib.client.ORB`到初始上下文即可使用 Oracle/Sun JDK

该工具很有帮助，它生成了您实际需要的 2-3 个 jar，而不是我试图从 WAS 安装中获取依赖项的混乱。

# web-applications - EmberJs - 更新 ArrayController 内容的值

> ID：14131758
> 
> 赞同：0
> 
> 时间：2013-01-03T01:10:22.487
> 
> 标签：web-applications, ember.js

我需要知道如何获取 ArrayController 在其内容数组中的对象位置。比方说：

```
App.AnArrayController = Ember.ArrayController.set({
   content: [],
});

App.AnObject = Ember.Object.set({
   name: null,
   lastname: null,
   id: 0
}); 
```

现在，假设我在 AnArrayController 的内容中插入了两个 AnObject。如何在不知道它在 ArrayController 中的位置的情况下更新特定对象的值，但只知道该对象的 id 属性是 X？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:42:18.630

第一：你为什么使用 set 方法？我希望你的代码片段是（你需要先通过extend（）定义你的类）：

```
 App.AnArrayController = Ember.ArrayController.extend({
     content: [],
 }); 

App.AnObject = Ember.Object.extend({
   name: null,
   lastname: null,
   id: 0
}); 
```

如果 id 是唯一的，您可以使用 filterProperty。调用 App.initialize() 后，您可以在路由器的帮助下通过以下方式访问您的控制器：

```
var controller = App.router.get("anArrayController");
anObject = controller.findProperty("id", 1); //find Object with id 1
// do something with anObject 
```

# actionscript-3 - 初始位置进入椭圆轨道的 AS3 对象

> ID：14131764
> 
> 赞同：2
> 
> 时间：2013-01-03T01:11:21.650
> 
> 标签：actionscript-3, flash, math

到目前为止，我能够让一个叫做卫星的物体以椭圆的方式围绕另一个叫做炮塔的物体旋转。唯一的问题是，在卫星开始围绕炮塔旋转之前，它有一个初始位置**（图 1）**。然而，在第一帧之后，卫星从其初始位置移动到其他位置**（图 2）**。我试图让卫星从它的初始位置进入椭圆旋转，而不是让它移动到另一个位置，然后从那个新位置开始椭圆旋转。

### 图1 。. . . . . . . . . . . . . . . . . . 图 2

[![第一帧的初始位置](../Images/9ce39f78e8cf7447bfd19c75e2285271.png)](https://i.stack.imgur.com/iR6EQ.png) [在第一帧结果位置 http://s1.postimage.org/xscznk8bz/After_Initial_Position.png](http://s1.postimage.org/xscznk8bz/After_Initial_Position.png)

## 代码 ：

```
private var fixedPoint1:int = 0;
private var fixedPoint2:int = 0;
private var currentDegrees:Number = 0;

private function onEnterFrame(event:Event):void
{   
    var dx:Number = turret.x - satelite.x; // This code deals with turret rotation
    var dy:Number = turret.y - satelite.y; // So does this code

    var angle:Number = Math.atan2(dy, dx); // As does this code

    turret.rotation = (angle * 180 / Math.PI); // Finally done with turret rotation code

    if (firstRun) {
        currentDegrees = angle * 180 / Math.PI;
        fixedPoint1 = satelite.x;
        fixedPoint2 = satelite.y;
        firstRun = false;
    }

    currentDegrees += 1;

    var radians:Number = currentDegrees * Math.PI / 180;
    var posX:Number = turret.x + Math.cos(radians) * (fixedPoint1);
    var posY:Number = turret.y + Math.sin(radians) * (fixedPoint2);

    satelite.x = posX;
    satelite.y = posY;      
} 
```

我有点理解为什么它根据所使用的方程将卫星从初始位置移动到椭圆位置。我只是不知道如何编辑方程或变量以使椭圆“从”（也许包含更好的词）作为初始位置。

感谢您提供的任何帮助。

## 更新 ：

此代码有效，但它类似于圆形轨道而不是椭圆轨道。
谢谢马库斯·贾德罗！

```
private function onEnterFrame(event:Event):void
{   
        var dx:Number = turret.x - satellite.x;
        var dy:Number = turret.y - satellite.y;

        var angle:Number = Math.atan2(dy, dx);

        turret.rotation = (angle * 180 / Math.PI);

        if (firstRun) {
             currentAngle = (180 * Math.PI/180); // Start out at pi
                                                 // instead of 0 for some reason?

            fixedPointX = turret.x - satellite.x; // xRadius = distance between turret.x and satellite.x
            fixedPointY = turret.y - satellite.y; // yRadius = distance between turret.y and satellite.y

            firstRun = false;
        }

        currentAngle += Math.PI / 180.0; // one degree
        if (currentAngle > Math.PI) currentAngle -= 2.0 * Math.PI;

        var cosAngle : Number = Math.cos(currentAngle);
        var sinAngle : Number = Math.sin(currentAngle);

        satellite.x = turret.x + cosAngle * fixedPointX + sinAngle * fixedPointY;
        satellite.y = turret.y - sinAngle * fixedPointX + cosAngle * fixedPointY;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:01:56.733

这看起来像是圆形路径的不完整版本。

```
var dx : Number = satellite.x - turret.x;
var dy : Number = satellite.y - turret.y;

var angle : Number = Math.atan2(dy, dx);

turrent.rotation = angle;

if (firstRun) {
    currentAngle = 0; // radians relative to fixed point

    fixedPointX = dx;
    fixedPointY = dy;

    firstRun = false;
}

currentAngle += Math.PI / 180.0; // one degree, or 1/360th cycle.
if (currentAngle > Math.PI) currentAngle -= 2.0 * Math.PI;

var cosAngle : Number = Math.cos(currentAngle);
var sinAngle : Number = Math.sin(currentAngle);

satellite.x = turret.x + cosAngle * fixedPointX + sinAngle * fixedPointY;
satellite.y = turret.y - sinAngle * fixedPointX + cosAngle * fixedPointY; 
```

这是使用基于移动角度的标准旋转矩阵。它将围绕炮塔旋转一圈，从初始位置开始。

如果你想要一个椭圆轨道，你需要多一个参考点：沿着轨道的另一个点，或者初始速度矢量。

**演示：http:** [//jsfiddle.net/MizardX/dRFay/](http://jsfiddle.net/MizardX/dRFay/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:16:41.947

计算一个以炮塔为中心的椭圆，卫星的初始位置在椭圆曲线上，然后在每一帧上修改椭圆的属性并将其缩小到所需的最终椭圆。这样卫星将顺利进入轨道。您可以通过加速度缩小/扩大坐标以获得更快的过渡。所以你基本上做的是在椭圆上应用一个过渡，直到你达到你想要的尺寸然后你停下来。

# html - 在 HTML5 视频标签中使用属性的正确方法是什么

> ID：14131767
> 
> 赞同：3
> 
> 时间：2013-01-03T01:11:48.470
> 
> 标签：html, video, attributes, tags

> **可能重复：**
> [当属性是布尔属性时，HTML 5 中的含义是什么？](https://stackoverflow.com/questions/4139786/what-does-it-mean-in-html-5-when-an-attribute-is-a-boolean-attribute)

所以我已经看到了很多方法，似乎这里的每个人都认为 w3schools 不值得信赖。

这个：

```
<video controls="controls" autoplay="autoplay">
...
</video> 
```

或这个：

```
<video controls autoplay>
...
</video> 
```

甚至这个：

```
<video controls="true" autoplay="true">
...
</video> 
```

真/假对我来说最有意义，但是，我见过的大多数在所有主要浏览器中都有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:36:22.213

这些在 W3C Html5 规范中被称为布尔属性，它提出布尔属性的存在使其为真，而缺少则使其为假，如下所示：

```
<video controls autoplay> 
```

但它也提到这可以等效地写成：

```
<video controls=controls autoplay=autoplay> (values can be quoted also) or
<video controls="" autoplay=""> 
```

但特别**禁止**“真”或“假”作为属性值：

```
The values "true" and "false" are not allowed on boolean attributes. 
```

另请参阅[http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#the-video-element](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#the-video-element)和[http://www.w3.org/2010/ 05/video/mediaevents.html](http://www.w3.org/2010/05/video/mediaevents.html)用于视频标签规范和 Html5 媒体 API 和事件。

# php - 在输入/回显行中标记 PHP 表单字段

> ID：14131779
> 
> 赞同：0
> 
> 时间：2013-01-03T01:13:35.007
> 
> 标签：php, html, mysql

我的网站上有这段代码[http://www3.londonmet.ac.uk:8008/~iia0014/userdetails.php](http://www3.londonmet.ac.uk:8008/~iia0014/userdetails.php)

我想知道如何正确格式化表单，以便在同一行中很好地为字段命名我回显数据库行，以便清楚什么是什么。例如，我试过：

```
<input value="<?php echo "ID: " . $row["id"]; ?>"><br> 
```

我应该添加或删除什么才能使上述行正常显示：ID：这里有一些 id？

但这将 ID 字与行 ID 本身连接起来，在表单内插入“ID：”，我希望它在外面很好。我可以在表格中添加一个表格并为表格命名......但这是唯一的方法吗？我可以用简单的方法来做吗，在一行中使我的代码更清晰？另外，我是否也可以以更简单的方式合并删除和更新按钮，而不是单独编写一个函数，或者在同一行上编写一个新函数？我正在寻找行数最少的更简洁的代码。

```
<?php session_start(); ?>
<?php include "includes/connection.php"; ?>

<?php

$query = mysql_query("SELECT id, username, password, email, name, aim, admin, time,          phone, address
FROM users 
WHERE username = '".$_SESSION['myusername']."' ");

while($row = mysql_fetch_array($query) ) 
{ 

?>

<input value="<?php echo $row["id"]; ?>"><br>
<input value="<?php echo $row["username"];  ?> "><br>
<input value="<?php echo $row['password'];  ?> "><br>
<input value="<?php echo $row['email'];  ?> "><br>
<input value="<?php echo $row['name'];  ?> "><br>
<input value="<?php echo $row['aim'];  ?> "><br>
<input value="<?php echo $row['admin'];  ?> "><br>
<input value="<?php echo $row['time'];  ?> "><br>
<input value="<?php echo $row['phone'];  ?> "><br>
<input value="<?php echo $row['address'];  ?> "><br>

<?php 
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:00:41.550

您不必将所有内容放在同一行中，行数越少并不总是更好。
关于输入字段，您的代码应类似于：

```
<label>ID</label>
<input type="text" name="id" value="<?php echo $row['id']; ?>"> 
```

顺便说一句，在 php 中，单引号用于字符串，双引号用于字符串和变量（可能不是正确的技术定义）。所以当你连接时，你应该这样做： `'string '.$var;`而不是`"string ".$var`.
当您回显时，您应该使用逗号来“连接”字符串和变量，因此您将参数解析为`echo`函数而不是连接。这更快，因为它直接输出数据。与连接不同，它首先连接字符串然后输出它。所以它会`echo 'string ', $var`。
此外，当您使用双引号时，使用`{$var}`变量会更快。例如：

```
mysql_query("SELECT `name` FROM `table` WHERE `id`='{$_SESSION['id']}'"); 
```

请注意，在 mysql 查询中，字段和表写在**重音符号 ( ` )**之间，值写在**单引号 ( ' )**之间。

现在回到你的代码。如果所有输入字段都将是相同的类型，比如说`type="text"`，那么你可以这样做：

```
while ($row = mysql_fetch_array($query)) {
    foreach ($row as $key => $value) {
        echo
       "<div>
            <label>{ucfirst($key)}</label>
            <input type="text" name="{$key}" value="{$value}">
        </div>";
    }
} 
```

`ucfirst()`

> 如果 str 的第一个字符是字母，则返回一个字符串。

对于更新和删除按钮，您可以放置​​两个具有不同`name`属性的按钮：

```
<input type="submit" name="update" value="Update">
<input type="submit" name="delete" value="Delete"> 
```

然后检查是否`isset()`。

```
if (isset($_POST['update'])) {
    //update data
} else if (isset($_POST['delete'])) {
    //delete data
} 
```

并且永远记得清理用户输入：

```
function sanitize($str) {
    return mysql_real_escape_string(htmlspecialchars(trim(stripslashes($str))));
} 
```

而不是一一消毒，您可以：

```
$data = array_map('sanitize', $_POST); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:25:40.220

你可以做几件事：

对于您的初始查询，

```
$myusername = $_SESSION['myusername'];
$query = mysql_query("SELECT id, username, password, email, name, aim, admin, time,          phone, address FROM users WHERE username = '$myusername' "); 
```

这不适用于生产环境，但由于您正在学习，将事物分开总是好的，这样您就可以更好地了解正在发生的事情。

如果用户编辑他们的信息（更新数据库），您可以制作一个包含单个按钮的表单，method=post 和 action=database.php?action=edit。在database.php里面，

```
if(isset($_GET['action']) == 'edit') { 

// set all posted values to variables
// run the update query... UPDATE ... WHERE username = '$myusername'

} 
```

对于删除，用另一个按钮创建另一个表单，类似地：action=database.php?action=delete。在database.php里面，

```
if(isset($_GET['action']) == 'delete') { 

// run the delete query... DELETE FROM $tbl WHERE username = '$myusername'

} 
```

# python - TypeError：“str”对象不可调用

> ID：14131780
> 
> 赞同：3
> 
> 时间：2013-01-03T01:13:31.257
> 
> 标签：python, string, while-loop

```
name = raw_input("Welcome soldier. What is your name? ")
print('Ok,', name, ' we need your help.')
print("Do you want to help us? (Yes/No) ")
ans = raw_input().lower()

while True:
    ans = raw_input().lower()("This is one of those times when only Yes/No will do!" "\n"  "So what will it be? Yes? No?")

    ans = raw_input().lower()
    if ans() == 'yes' or 'no':
        break
    if ans == "yes":
        print ("Good!")
    elif ans == "no":
        print("I guess I was wrong about you..." '\n' "Game over.") 
```

当我回答时，就会发生这种情况；

首先是一个空行，然后如果我再次按回车键；

```
 File "test.py", line 11, in <module>
    ans = raw_input().lower()("This is one of these times when only Yes/No will
do!" "\n" "So what will it be? Yes? No?")
TypeError: 'str' object is not callable 
```

什么接缝有问题？

PS 我搜索了该站点，但似乎所有有相同问题的人都有更高级的脚本，而我什么都不懂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T01:16:30.980

`TypeError: 'str' object is not callable`通常意味着您`()`在字符串上使用符号，而 Python 尝试将该`str`对象用作函数。例如`"hello world"()`，或`"hello"("world")`

我认为您打算这样做：

```
ans = raw_input("This is one of those times...").lower() 
```

**另一个错误：**

```
if ans() == 'yes' or 'no': 
```

您必须分别检查这两种情况，

应该 ：

```
 if ans == 'yes' or ans == 'no':
        break 
```

或更符合您最初想要的内容：

```
if ans in ('yes', 'no') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T01:18:43.610

第一个错误在该行中

```
ans = raw_input().lower()("This is one of those times when only Yes/No will do!"
                          "\n"  "So what will it be? Yes? No?") 
```

结果`lower()`是一个字符串，后面的括号表示左边的对象（字符串）被调用。因此，你得到你的错误。你要

```
ans = raw_input("This is one of those times when only Yes/No will do!\n"
                "So what will it be? Yes? No?").lower() 
```

还，

```
if ans() == 'yes' or 'no': 
```

不符合您的期望。同样，`ans`是一个字符串，括号表示左边的对象（字符串）被调用。因此，你得到你的错误。

此外，`or`是一个逻辑运算符。即使在 之后删除括号`ans`，代码也会被评估为：

```
if (ans == 'yes') or ('no'): 
```

由于非空字符串 ( `'no'`) 的计算结果为[布尔](http://en.wikipedia.org/wiki/Boolean_data_type)值 True，因此该表达式始终为 True。你只是想要

```
if ans in ('yes', 'no'): 
```

此外，您希望取消缩进最后几行。总而言之，尝试：

```
name = raw_input("Welcome soldier. What is your name? ")
print('Ok, ' + name + ' we need your help.')
ans = raw_input("Do you want to help us? (Yes/No)").lower()
while True:
    if ans in ('yes', 'no'):
        break
    print("This is one of those times when only Yes/No will do!\n")
    ans = raw_input("So what will it be? Yes? No?").lower()

if ans == "yes":
    print("Good!")
elif ans == "no":
    print("I guess I was wrong about you..." '\n' "Game over.") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T01:16:09.177

你需要做`raw_input("This is one of those times when only Yes/No will do!" "\n" "So what will it be? Yes? No?").lower()`。

当你这样做时`raw_input().lower()`，它已经调用`raw_input()`并将结果转换为小写。到那时，尝试传递您的提示字符串为时已晚。

# java - 使用扫描仪查找三个数字

> ID：14131782
> 
> 赞同：1
> 
> 时间：2013-01-03T01:14:26.737
> 
> 标签：java, java.util.scanner

我希望我的扫描仪读取`.txt`文件并找到三个整数`int1 int2 int3`并将它们用作颜色代码。唯一的问题是，我不知道该怎么做。

到目前为止，我有：

```
@SuppressWarnings("resource")

Scanner[] properties = new Scanner[str];
Color[] colour = new Color[str];

int posx = 200;
int posy = 100;

for (int i = 0; i < str; i++){
    properties[i] = new Scanner(new File("Particles/" + string[i] + ".txt"));
    g.drawString("Particles/" + string[i] + ".txt", 200, posy);
    colour[i] = new Color(properties[i].nextInt(), properties[i].nextInt(),properties[i].nextInt());
    posy = posy + 100;
} 
```

（它只是方法的一部分，这就是为什么`str`没有声明等）。

我正在读取的文件看起来像：

```
Name:   Fire
Color:  255 0 0
Speed:  0
Size:   1 
```

我如何让它阅读`255 0 0`并用作颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T01:26:08.497

使用`Scanner`查找关键字，然后使用它来指示您希望在何处/如何继续处理。

```
String r, g, b;
Scanner scanner = new Scanner(myFile);
while(scanner.hasNext()) {
    String next = scanner.next();
    if(next.equals("Color:")) {
        r = scanner.next();
        g = scanner.next();
        b = scanner.next();
        // do stuff with the values
    }
 } 
```

要将值转换为[Colors](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Color.html)：

```
Color color = new Color(Integer.parseInt(r), Integer.parseInt(g), Integer.parseInt(b)); 
```

或者，您可以使用 API 中的[nextInt()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextInt%28int%29)方法`Scanner`将数字直接检索为`int`s，但我会将它们作为`String`s 接收，以便在适当的情况下执行进一步的错误处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:25:36.650

我想你正在寻找这样的东西......

```
// lose the Name: line
scanner[i].nextLine()

// lose the Color: label
scanner[i].next()

// get the ints
int c1 = scanner[i].nextInt();
int c2 = scanner[i].nextInt();
int c3 = scanner[i].nextInt();

colour[i] = makeColor(c1, c2, c3); 
```

如果不是，您需要澄清您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:29:10.183

您可以让 Scanner`.nextInt()`对该特定行使用该方法三次，或者您可以编写一个方法来使用 Scanner 方法从文本文件中检索整行，`.nextLine()`并使用条件语句来检查该行是否包含`Color:`和然后从字符串的其余部分解析整数。

杰夫的回答将最适合您的需求。

# signalr - 给定一个 SignalR ConnectionId，我能否判断该会话是否仍处于连接状态？

> ID：14131789
> 
> 赞同：7
> 
> 时间：2013-01-03T01:15:26.947
> 
> 标签：signalr

由于各种原因，当 SignalR 连接建立时，我将该 ConnectionId 存储在我的数据存储中。但是，这些连接记录可能会被孤立，例如，如果 SignalR 重新启动。（我还观察到让我怀疑 OnDisconnected() 是否被正确调用的行为，尽管我对此不太确定。）

但无论出于何种原因，我会定期在我的数据库中得到孤立的记录，我希望能够修剪这些记录，并删除列出的任何实际上不再连接的 ConnectionID - 大概是让 SignalR 告诉我是否此 ConnectionID 仍与实时会话相关联。

我已经查看了 SignalR 源代码，并没有向我提出如何最好地完成此任务。有没有合理的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T04:37:16.537

实现这一点的方法是自己跟踪客户。从您的帖子看来，您似乎已经在执行此操作（仍提供代码以防万一），但这是了解客户端是否已连接的唯一方法。SignalR 服务器触发 onconnected/ondisconnected 事件以指示客户端是否已连接。

我建议确保您在重新连接不正确时不会重新实例化数据库中的记录。

例如（超级简单的例子）：

```
class myHub
{
    private static List<String> _connectedClients = new List<String>();

    public override Task OnConnected()
    {
        _connectedClients.Add(Context.ConnectionId);
        return base.OnConnected();
    }

    public override Task OnDisconnected()
    {
        _connectedClients.Remove(Context.ConnectionId);
        return base.OnDisconnected();
    }

    public static bool IsConnected(string cid)
    {
        return _connectedClients.Contains(cid);
    }
} 
```

您现在可以在集线器上调用 IsConnected 以确定当前是否连接了连接 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T08:05:11.210

它也发生在我身上，我不时检测到孤立的连接。

作为一种解决方法，我添加了一个客户端函数 $(window).unload ，它调用一个服务器端函数，该函数执行断开连接应该做的事情。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T06:35:14.713

在数据库中存储 connectionId 不是好方法。SignalR 将为每个页面分配一个新的 id。试试这个[Kevin W. Griffin 的样本](http://www.kevgriffin.com/maintaining-signalr-connectionids-across-page-instances/)

# php - PHP Mysql_fetch_assoc 正在省略最后一行

> ID：14131792
> 
> 赞同：0
> 
> 时间：2013-01-03T01:15:40.417
> 
> 标签：php

在 PHP MYSQL_FETCH_ASSOC 中省略了 Last Row。这从未发生过。但这一次它让我在最后一刻陷入了困境。

即使我已经提出了 mysql_num_rows 结果是 14 条记录 - 但在列表中它只显示 13 条记录并且第 14 条记录被省略。

感谢任何形式的帮助。

```
 $uno = $_GET["uno"];

                $xtc1 = 'select * from rform where uno="' . $uno . '" order by rno DESC';
                $xtc = mysql_query($xtc1) or die('User Reservation Retrival Error : ' . mysql_error());

                $trno = mysql_fetch_assoc($xtc);
                $trow = mysql_num_rows($xtc);

                echo '<p>List of Onlilne Reservations made by <strong style="font-weight:bold; color:red;">' . ucwords($trno["cname"]) . ' (' . $trow . ')</strong></p>';

                echo '<table cellpadding="5" cellspacing="0" border="1">';
                    echo '<tr>';
                        echo '<td colspan="5" style=" font-size:14px; text-align:center; font-weight:bold; color:red;">' . ucwords($trno["cname"]) . '</td>';
                    echo '</tr>';
                    echo '<tr>';
                            echo '<th>R.NO</th>';
                            echo '<th>From</th>';
                            echo '<th>To</th>';
                            echo '<th>Date &amp; Time of<Br>Travel</th>';
                            echo '<th>Reserved On</th>';
                        echo '</tr>';   
                    while($mtn = mysql_fetch_assoc($xtc)){
                        $dt = $mtn["csdate"] . ' ' . $mtn["ctime"];
                        echo '<tr>';
                            echo '<td>' . $mtn["rno"] . '</td>';
                            echo '<td>' . $dt . '</td>';
                            echo '<td>' . $mtn["caddr"] . '</td>';
                            echo '<td>' . $mtn["cdest"] . '</td>';
                            echo '<td>' . date('d-M-Y',strtotime($mtn["tstamp"])) . '</td>';
                        echo '</tr>';   
                    }
                    echo '</table>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:20:34.970

你有一个额外的东西`$trno = mysql_fetch_assoc($xtc)`，你似乎要丢弃。这是您缺少的行。只需删除该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T02:05:18.113

删除第一个`$trno = mysql_fetch_assoc($xtc);`将解决此问题。

如果您需要阅读`$xtc`循环之前的第一行。您可以将while循环更改为do-while，而无需删除第一个`$mtn = mysql_fetch_assoc($xtc);`

```
do{
    //whatever
}while($mtn = mysql_fetch_assoc($xtc)); 
```

# iphone - 根据选定的标签栏项目更改导航项目标题的标题

> ID：14131793
> 
> 赞同：7
> 
> 时间：2013-01-03T01:14:38.347
> 
> 标签：iphone, ios

![在此处输入图像描述](../Images/05bc5d69ff915bb37e18df881534bd0b.png)我有一个标签栏视图控制器，它有四个可能的视图控制器。我的所有其他视图都有关系的主选项卡栏视图也有一个导航栏，我可以双击它并更改故事板中的标题。我需要知道的是如何根据选定的标签栏项目更改此导航项目的标题。

例如，我将有四个选项卡。1 是“账单”，2 是“杂货”，3 是“煤气”，4 是“个人”。如果选择了“账单选项卡”等等，我希望我的视图的标题是账单。

编辑：希望这将澄清我想要完成的事情。

我希望能够更改右侧四个表格视图顶部导航栏的标题。Tab Bar Controller 是我唯一可以在情节提要时双击并更改磁贴的地方。我希望根据从选项卡栏中选择的表格视图来更改标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-24T08:44:10.273

删除您手动添加到视图控制器的任何导航栏项目并将其添加到您的`viewDidLoad`方法中

```
self.navigationController.navigationBar.topItem.title = @"My Title"; 
```

或者

```
self.navigationController.topViewController.title = @"My Title"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T01:58:29.060

我应该警告您，这种方法可能是一种不雅的技巧，因为我自己才刚刚开始了解导航。但这是我将如何处理它：

基本上，您应该`UINavigationItem`为每个`UIViewController`想要标题的 s 添加 a ，并`UINavigationItem`根据`UIViewController`显示的内容更改 s 的文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T04:15:46.397

在每个选项卡选择上，您都可以更改标题。

```
 - (void)tabBarController:(UITabBarController *)tabBarController 
     didSelectViewController:(UIViewController *)viewController
    {
      viewController.title=@"your title"
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T01:21:03.737

您应该能够在每个“四个视图控制器”中设置 title 属性，如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = @"Title For View Controller Goes Here";
} 
```

然后，每当单击此视图控制器的所述选项卡时，导航栏的标题应更改为此标题。

**编辑**

听起来您可能已将`UINavigationBar`Interface Builder 中的对象放置在选项卡栏的视图中。相反，您实际上希望将`UITabBarController`嵌入在`UINavigationController`.

阅读 Ray Wenderlich 的关于开始故事板的教程，这应该会告诉你如何做到这一点：

[http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)

祝你好运！

# php - 在 PHP/HTML 中添加 if 语句

> ID：14131800
> 
> 赞同：0
> 
> 时间：2013-01-03T01:16:32.367
> 
> 标签：php, html, mysql, unix

想问一下如何在下面的代码中添加if语句。

它目前所做的是在各自月份/年份的标题下列出数据库中的所有新闻文章，并将这些文章分组：即 2012 年 5 月 - 新闻 A，新闻 B 2012 年 6 月 - 新闻 C 2012 年 7 月 - 新闻 D

由于使用的是 unix 日期系统，我们在 1970 年之前的故事中遇到了问题。我不希望更改我们目前使用的系统，因为它“工作”，但是，如果可以找到解决方案（我尝试过负数....它不起作用），或者如果可以在下面的代码中添加语句，以阻止显示文章/为 1970 年之前的文章创建组，那么这会很好:)

```
<h3>Archive</h3>
<? $news=$session->getNews("","","",1);?>
<? while($article=mysql_fetch_array($news)){?>
<? 
$date = $article['thedate'];
$year = date('Y', $date);
$month = date('F', $date);
?>
<h4><?=$month." - ".$year;?></h4>
<nav class="small">
<? $innernews=$session->getNews("",$month,$year);?>
<? while($innerarticle=mysql_fetch_array($innernews)){?>
<a href="/news/<?=$innerarticle['ftitle']?>" <? if($title==$innerarticle['ftitle']){?> class="active"<? }?>><?=$innerarticle['title']?></a>
<? }?>
</nav>
<? }?>
<h4>Pre-1970</h4>
<nav class="small">
<a href="#">See More - Currently Unavailable</a>
</nav>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:25:44.663

![时代失败](../Images/99fedc1b1cb955b53a489b24da6a8a29.png)

好的，现在是严肃的事情。

首先，您似乎不必要地进出 PHP。写多行PHP也没关系！其次，您使用的是短标签。虽然这可能有效，但可能无效。最好始终使用`<?php`（除非您使用的是 PHP 5.4 或更新版本，在这种情况下，`<?=$something?>`无论设置如何，您都可以使用来回显某些内容）。

现在，进入实际问题。你可以做的是：

```
$year = ...;
if($year == 1970) echo "Sorry, news is not available for this date.";
else {
    // rest of your code to show news here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:19:50.923

在您的`<? while($innerarticle=mysql_fetch_array($innernews)){?>`代码中，`$innernews`在您希望停止显示后使用语法修改您对 Select Dates的查询`>`

最好提供您的`$innernews`And`$news`变量的设置方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:27:24.283

正如马修哈灵顿所要求的那样“粗鲁”：

```
<h3>Archive</h3>
<? $news=$session->getNews("","","",1);?>
<? while($article=mysql_fetch_array($news)){?>
<? 
$date = $article['thedate'];
$year = date('Y', $date);
$month = date('F', $date);
if ($year<1970) continue;
?>
<h4><?=$month." - ".$year;?></h4>
<nav class="small">
<? $innernews=$session->getNews("",$month,$year);?>
<? while($innerarticle=mysql_fetch_array($innernews)){?>
<a href="/news/<?=$innerarticle['ftitle']?>" <? if($title==$innerarticle['ftitle']){?> class="active"<? }?>><?=$innerarticle['title']?></a>
<? }?>
</nav>
<? }?>
<h4>Pre-1970</h4>
<nav class="small">
<a href="#">See More - Currently Unavailable</a>
</nav>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T01:35:25.960

你可以把它改成`date()`php 的[面向对象的`DateTime`类](http://php.net/manual/en/class.datetime.php)。
*注意*- 这需要 php v. >= 5.2.0

```
<?
$date = $article['thedate'];
$dt = new DateTime($date);
$year = $dt->format("Y");
$month = $dt->format("F");
?> 
```

# namespaces - 将页面移动到新的命名空间

> ID：14131801
> 
> 赞同：1
> 
> 时间：2013-01-03T01:16:40.260
> 
> 标签：namespaces, wiki, move, screwturn

G'day

我们使用ScrewTurn wiki 已经有一段时间了，但直到现在还没有查看命名空间功能。我们想将我们的一些文章移动并保护到一个单独的名称空间，但是我看不到从 GUI 中执行此操作的简单方法。从我在 DB 结构中看到的情况来看，许多表都有一个命名空间列 Pages、Category、CategoryBinding 等等，但我不知道只更新这些是否可以。

我想知道是否有人对在名称空间之间移动页面有任何经验或建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:45:40.687

在继续之前，请确保首先创建您的新命名空间。

一次移动一页：

*   转到管理。
*   选择“维基页面”。
*   从顶部的“命名空间”下拉列表中选择源命名空间。
*   找到要移动的页面并单击“选择”超链接。
*   使用“迁移页面”框将页面移动到不同的命名空间。选择“复制页面类别”以将任何类别复制到新命名空间。

一次移动多个页面：

*   转到管理。
*   选择“维基页面”。
*   从顶部的“命名空间”下拉列表中选择源命名空间。
*   单击“批量迁移”按钮。
*   使用“搜索”查找要移动的页面。这只会搜索您在“Wiki 页面”页面上指定的命名空间。
*   在下拉列表中选择要移动的每个页面，然后单击“添加”。
*   选择“复制页面类别”以将任何类别复制到新命名空间。
*   选择目标命名空间，然后选择“迁移”。

注意：将页面移动到新的命名空间可能会破坏从其他页面到该页面的任何现有链接。

顺便说一句，这是使用当前版本的螺丝转（3.0.5.600）。旧版本可能略有不同，但我相信该功能已经存在了一段时间。

# stack - 带有两个堆栈的缓冲区 tex 编辑器

> ID：14131803
> 
> 赞同：1
> 
> 时间：2013-01-03T01:16:54.420
> 
> 标签：stack, buffer, text-editor

我正在努力理解这一段，如果有人能理解这一点，他/她可以解释一下吗？尤其是强烈的黑色句子..

谢谢...

> 缓冲区必须是一个数组。**在缓冲区数组的顶部实现两个堆栈。一个堆栈从左到右增长，另一个堆栈从右到左增长。**
> 
> 插入字符时，将其推入左侧堆栈。
> 
> 当一个字符被删除时，从右边的堆栈中弹出。
> 
> 当光标向左移动时，从左侧堆栈中弹出顶部字符并将其压入右侧堆栈
> 
> 当光标向右移动时，与左移动相反
> 
> get(i)：**如果 i 小于 left top 则返回 buffer[i]。如果更多则返回缓冲区[right + i - left]**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-15T17:41:43.140

这个学期我有这个作业。这是我的解决方案，如果有人还在寻找：

[https://gist.github.com/avindra/6572866](https://gist.github.com/avindra/6572866)

# c# - 查看模型和依赖注入

> ID：14131804
> 
> 赞同：2
> 
> 时间：2013-01-03T01:17:12.237
> 
> 标签：c#, .net, design-patterns, mvvm, architecture

在使用[PRISM](http://compositewpf.codeplex.com/)和[Enterprise Library](http://entlib.codeplex.com/)处理具有大量 CRUD 操作的 LOB 桌面应用程序时，我注意到一个重复出现的模式似乎很烦人。对于每个域模型实体（例如 Contact），我发现我用视图模型（例如 ContactVM）自我包装了它，然后我引入了一个新的`ContactsVM`（注意“s”），其中后一个类接受一个用于填充的存储库接口对于我从存储库中读取`ObservableCollection<ContactVM>`的每个`Contact`实体，我将它包装在一个`ContactVM`中，我通过构造函数将实体与我的 ViewModel 所需的其他企业库服务一起传递给它。

问题是我所有的视图模型构造函数都开始采用这种模式：

`ViewModel(EntityToWrap e, DependencyFromEntLib, OtherDependencies ...)`

现在这是一个问题，因为大多数工具和库都需要默认的无参数构造函数（例如，一些商业数据网格需要它来提供过滤支持），而且您不能使用设计数据来可视化实体，因为它们也需要无参数构造函数。最后的问题是：构建视图模型的正确方法是什么，Entlib 服务应该通过构造函数还是通过[ServiceLocator](http://msdn.microsoft.com/en-us/library/ff648968.aspx)提供？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T02:14:48.580

*以下是解决问题的许多不同方法之一。*

我更喜欢更轻量级的视图模型。然后我添加一个类，其职责是从一个或多个源（例如存储库）组成视图模型。这并不能消除级联依赖的问题，但它确实释放了您的视图模型构造函数。

它还将逻辑排除在控制器之外，并允许重用视图模型（当然，在适当的时候）。

*   轻量级视图模型

*   轻量级控制器知道如何定位组装视图模型的作曲家（您可以使用 DI 框架来设置作曲家及其所有依赖项）。控制器可能在设置过程中起次要作用，但应保持简单。

*   控制器知道应该如何组装视图模型，并与作曲家类共享。例如，该操作可能会请求一个摘要视图，该视图仍然可以利用相同的视图模型而没有填充任何子项。

*   Composer 组装必要的信息以完成视图模型。Composer 可能会使用其他 Composer 来收集其不直接负责的信息。同样，这里可以使用 DI 框架，这样这些作曲家也可以获得他们需要的依赖项。

*   控制器像往常一样使用完整的视图模型呈现视图。

在我看来，这也提供了更好的抽象级别。仅仅因为视图模型通常看起来像一个特定的域模型，并不意味着它总是如此。

最终结果：

*   很多类（缺点，被授予），但代码重复最少（即 DRY）

*   可测试的瘦视图模型（如果需要......它们可能不包含任何要测试的内容）

*   纤薄、可测试的控制器。

*   可测试的作曲家对象可以在不同的场景中重用，因为它们（大概）知道如何为各种目的组装视图模型。

*   灵活混合和匹配视图模型、控制器和合成器以支持不同的场景。

# grails - Grails 中多个表单上的多个嵌套域

> ID：14131805
> 
> 赞同：0
> 
> 时间：2013-01-03T01:17:13.990
> 
> 标签：grails, groovy, nested-forms

我是 grails 的新手，正在尝试构建一个具有一对多关系的小型应用程序，但我被卡住了。

所以存在三个域类Artist、Album 和Song。意图是双重嵌套的 1->m 关系：

一个艺术家可以有很多专辑，一个专辑可以有很多歌曲。

```
class Artist {

    List albums = new ArrayList()

    static hasMany = [albums: Album]

    String artistName

    static mapping = {
        albums cascade:"all-delete-orphan"
    }
}

    class Album {

    String albumName
    String albumDescr

    static belongsTo = [artist: Artist]

    List songs = new ArrayList()
    static hasMany = [songs: Song]

    boolean deleted
    static transients = [ 'deleted' ]

     static mapping = {

         songs cascade:"all-delete-orphan"
    }
}

    class Song{

    Album album
    static belongsTo = [album: Album]
    String songName
    Integer trackNumber

    boolean deleted
    static transients = [ 'deleted' ]
} 
```

我想用一系列的表格来处理数据的输入。在第一个视图中，将使用任何关联的专辑创建艺术家。此视图类似于此处描述的视图：http: [//omarello.com/2010/08/grails-one-to-many-dynamic-forms/](http://omarello.com/2010/08/grails-one-to-many-dynamic-forms/)

提交表单后，艺术家和相关专辑将被保存（如下所示）

```
 def artist = new Artist(params)
 artistGroup.save() 
```

**这是我需要帮助的部分...**

下一个视图将显示使用前一个视图创建的专辑，并提示用户为每个视图添加歌曲信息。提交此表格后，歌曲将被保存。

我在想我会通过闪存范围内保存的专辑

```
 flash.myAlbums = artist.albums 
```

因此它们可以显示在第二个视图中。然而，显示专辑名称只是故事的一部分，因为我们需要 Album.id 来保存每首歌曲（并正确关联其专辑）。如何将这个 ID 有效地传递到第二个视图中，以便在提交第二个表单时可以使用它来正确保存每首歌曲？我看过这篇[文章](https://stackoverflow.com/questions/13046539/grails-creating-multiple-nested-objects-inside-single-form)，它确实相关，但它并没有尝试将数据保存到多个视图中。

我希望这个问题有一定的意义，我感谢任何反馈......包括替代方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T02:31:47.213

在相册控制器的 save() 方法中，使用如下参数渲染第二个视图：

```
Class AlbumController {
    ......
    def save() {
        def artist = new Artist(params)
        artist.save()                       //the original artistGroup.save() won't work
        params.albumsSelected.each{album->           //for instance, you can pass all the album_id related to the artist in this parameter
            def albumInstance = Album.get(album)
            artist.addToAlbums(albumInstance)
        }
        render(view:'showAlbum', params:[albums:artist.albums])
    }

    def addSong() {
        def albumSelected = Album.get(params.album)
        def songToAdd = Song.findBySongName(params.songName)
        albumSelected.addToSongs(songToAdd)
        ......
    } 
```

**showAlbum.gsp:**

```
...
<g:form name="addSong" action="addSong">
    <g:select name="album"
          from="${albums}"
          optionKey="id"
          optionValue="albumName" />
    <g:textField name="songName"/>
    <g:submitButton name="add" value="Add To Album" />
</g:form>
... 
```

您还需要删除域类中的重复属性定义：

```
 class Song{
 //    Album album    is not needed when there is a 'belongsTo' definition
     static belongsTo = [album: Album]
     ...
} 
```

# scala - 如何从字符串列表中生成字符串组合？

> ID：14131812
> 
> 赞同：1
> 
> 时间：2013-01-03T01:16:47.913
> 
> 标签：scala

初学者问题。给定一个**任意长度**的列表，其中包含字符串中的一个或多个字符，例如 List("ab", "def", "t")，如何生成包含所有组合的列表？前任。List("adt", "aet", "aft", "bdt", ...) 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:48:08.340

一个简单的递归方法可能如下所示：

```
def foo(xs: List[String], current: String = ""): List[String] = xs match {
  case head :: Nil =>
    head map { c =>
      current + c
    } toList

  case head :: tail =>
    head flatMap { c =>
      foo(tail, current+c)
    } toList

  case _ => Nil
} 
```

请注意，此方法不是尾递归的，因此对于长列表它会溢出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T05:21:37.940

这是一个被称为`sequence`更普遍地将 a`F[G[A]]`转换为 a 的操作`G[F[A]]`（您需要了解有关`F`and的某些事情 - 请`G`参阅[此答案](https://stackoverflow.com/a/12358892/334519)或[此博客文章](http://debasishg.blogspot.com/2011/01/iteration-in-scala-effectful-yet.html)以获取更多详细信息）。

例如，使用[Scalaz](http://code.google.com/p/scalaz/)，您可以这样写：

```
import scalaz._, Scalaz._

List("ab", "def", "t").map(_.toList).sequence.map(_.mkString) 
```

或等效地：

```
List("ab", "def", "t").traverse(_.toList).map(_.mkString) 
```

正如预期的那样，您将获得以下信息：

```
List(adt, aet, aft, bdt, bet, bft) 
```

这并不比带有 的标准库版本简洁得多`foldLeft`，但`sequence`它是一个有用的抽象知识。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T04:07:08.753

```
List("ab", "def", "t").foldLeft(List("")){ (acc, s) =>
  for(prefix <- acc; c <- s) yield (prefix + c)
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-03T14:11:38.153

我自己刚开始使用 Scala，但您可以使用“子集”方法为您完成大部分工作：

```
val lst = List("ab", "def", "t")
val re = (for(l <- lst) yield (l.toCharArray)).flatten.toSet.subsets.toList
val res = for(r <- re) yield (r.mkString) 
```

这给了你：

```
res: List[String] = List("", e, t, f, a, b, d, et, ef, ea, eb, ed, tf, ta, tb, t
  d, fa, fb, fd, ab, ad, bd, etf, eta, etb, etd, efa, efb, efd, eab, ead, ebd, t
  fa, tfb, tfd, tab, tad, tbd, fab, fad, fbd, abd, etfa, etfb, etfd, etab, etad,
   etbd, efab, efad, efbd, eabd, tfab, tfad, tfbd, tabd, fabd, etfab, etfad, etf
  bd, etabd, efabd, tfabd, etfabd) 
```

# delphi - 有没有更高效的方式来构建和测试组件？

> ID：14131814
> 
> 赞同：4
> 
> 时间：2013-01-03T01:19:04.793
> 
> 标签：delphi, custom-component

我想知道其他人是如何编写他们的组件并对其进行测试的？

我这样做的方式似乎花费了太长时间，所以我希望有人可以指出一些我可能忽略或可以做的明显的事情，以使构建我自己的组件的整个过程更加愉快，而不是如此顽固的冗长任务.

这与我正在使用我当前的一个组件（将包作为项目打开，并且该组件已安装在 IDE 中）所做的事情一致：

1.  更改组件代码。
2.  使用 Shift+F9 构建。
3.  如果向我的组件添加新的已发布属性，我将再次卸载/重新安装该组件。
4.  添加一个新的表格。
5.  将我最近构建的组件放在表单上。
6.  在设计时检查是否可以正确更改属性并正确绘制控件（还可以查看新发布的属性是否显示在对象检查器中）。还要检查组件中的任何错误。
7.  如果在设计时一切正常，我保存包并关闭它，然后创建一个新的应用程序。
8.  然后我再次将我的组件添加到新应用程序项目的新表单中并运行它以查看它在运行时是如何工作的。
9.  对组件的一些进一步修改可以在不再次打开包的情况下进行更改，即如果它是我的组件的绘制程序，我可以打开组件的源单元，更改它并重新运行应用程序以查看更改。
10.  任何其他修改，我通常需要再次关闭整个项目，然后重新打开包并重复上述所有步骤。

我不断在组件包和新应用程序项目之间切换以进行更改，必须有一种更有效的方法来做到这一点，我敢打赌，但我看不到它！

如果可能的话，我会接受可以为我节省大量时间并删除上述大部分步骤的人的答案:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T07:17:26.670

为什么需要多次执行 4\. 中的步骤？

我一般会创建一个程序组并向其中添加以下内容：

*   包含所有运行时单元的运行时包。
*   安装组件并实现任何设计时编辑器的设计时包。
*   一个演示项目，允许通过 GUI 更改组件的属性。

当我对组件进行更改时，我只需重新构建演示项目并运行它。如果我对组件的属性进行更改，我会重建运行时包，然后安装设计时包。完成此操作后，再次显示演示表单，Delphi IDE 将警告您任何缺少的组件。无需重新创建任何东西。

如果您想查看示例，请查看我的[TChromeTabs](http://code.google.com/p/delphi-chrome-tabs/)源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T04:32:02.250

哦。我从没想过组件开发需要这么多操作。

我的常见工作流程如下所示：

1.  使用我的组件包（运行时和设计时）和测试程序打开项目组
2.  修改组件代码
3.  重建组件包
4.  使用该组件切换到测试程序的表单以查看它在设计时是否正常
5.  从 IDE 运行测试程序以查看它是否在运行时工作
6.  而且，有时我会运行一个批处理文件，在干净的环境中编译我的组件和所有测试程序（不使用所有预编译的 .dcu 文件），用于我拥有的每个 Delphi 版本。只是为了测试该组件可以在 Delphi 6 和 Delphi 2010（我们公司使用）中正确编译。

我使用[Lazy Delphi Builder](http://www.LazyProject.info/)进行“干净编译”（编译时不使用完整的 Delphi 库路径）。每个 IDE 都有一个单独的 LazyDBP 配置文件。还有一个运行它们的 .bat 文件。

# winapi - FASM 中的 GdiGradientFill 存在问题

> ID：14131816
> 
> 赞同：2
> 
> 时间：2013-01-03T01:19:09.973
> 
> 标签：winapi, assembly, fasm

我正在尝试编写我最近开发的 Java 应用程序的 ASM 版本，作为 Win32 ASM 中的一个项目，但正如标题所述，我遇到了 GdiGradientFill 问题；目前，我更喜欢使用 FASM，并避免使用更高级别的 ASM 构造，例如 INVOKE 和使用 WIN32 包含。

我有什么，atm：

```
PUSH    [hWnd]                                                  
CALL    [User32.GetWindowDC]                                
MOV     [hDC], EAX                          
PUSH    rectClient                              
PUSH    [hWnd]                          
CALL    [User32.GetClientRect]  

PUSH    [rectClient.left]
POP     [colorOne.xPos]
PUSH    [rectClient.top]
POP     [colorOne.yPos] 
MOV     [colorOne.red],     0xC000
MOV     [colorOne.green],   0xC000
MOV     [colorOne.blue],    0xC000
MOV     [colorOne.alpha],   0x0000

PUSH    [rectClient.right]
POP     [colorTwo.xPos]
PUSH    [rectClient.bottom]
POP     [colorTwo.yPos] 
MOV     [colorTwo.red],     0x0000
MOV     [colorTwo.green],   0x2800
MOV     [colorTwo.blue],    0x7700
MOV     [colorTwo.alpha],   0x0C00

MOV     [gRect.UpperLeft],  0
MOV     [gRect.LowerRight], 1

PUSH    GRADIENT_FILL_RECT_H                            
PUSH    1                               
PUSH    gRect                               
PUSH    2                           
PUSH    colorOne                            
PUSH    [hDC]                               
CALL    [GDI32.GdiGradientFill] 
```

但是，代码只返回一个 FALSE，并且在通过两个 MSDN ( [http://msdn.microsoft.com/en-us/library/windows/desktop/dd373585(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373585(v=vs.85).aspx) )

和其他一些例子（http://www.asmcommunity.net/board/index.php?topic=4100.0），我仍然看不到我做错了什么，谁能看到这里的缺陷？

另一个问题是我尝试使用 Msimg32 的 GradientFill，因为这总是会导致崩溃，但是，我看到一些报告说 Win2K+ 操作系统只是将参数从 Msimg32 传递到 GDI32；这是准确的，还是有其他人遇到过这种表格的问题？

整个代码的 Pastebin 链接：http: [//pastebin.com/GEHDw6Qe](http://pastebin.com/GEHDw6Qe)

谢谢你的帮助，SS

编辑：代码现在正在工作，老实说，我不知道发生了什么变化，除了将 PUSH / POP 序列更改为 MOV EAX，[rectClient.left] 之外，我看不出以前和现在的工作数据之间有什么不同，等（PUSH / POP 方法也有效） - 非常感谢那些提供帮助的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T02:19:33.840

您正在将看起来像 RECT 的内容作为第 4 个参数传递给 GdiGradientFill。该函数需要一个 GRADIENT_TRIANGLE。

此外，PUSH/POP 是一种从一个内存位置复制到另一个内存位置的非常奇怪的方式。您正在执行 4 次内存访问，而不是 2 次。通过寄存器复制；这不是Java。

您确定 GetWindowDC 是您需要的吗？那个返回整个窗口、标题和边框等的 DC。对于客户区，人们通常使用 GetDC()。完成后，调用 ReleaseDC()。

# sql-server - sql server 2008，内部连接3个表时如何消除重复

> ID：14131825
> 
> 赞同：0
> 
> 时间：2013-01-03T01:20:36.067
> 
> 标签：sql-server, sql-server-2008

这是我的查询。当我内部加入 2 个表时，没有问题。

```
 SELECT S.* ,
        U.Avatar ,
        U.Displayname ,
        ROW_NUMBER() OVER ( ORDER BY S.Id DESC ) rownum
 FROM   dbo.Smoothie AS S
        INNER JOIN dbo.[User] AS U ON S.UserId = U.Id
 WHERE  S.IsPublic = 1
        AND S.Status = 3
        AND S.UserId = 2 
```

然后，我添加了另一个内部连接。现在，我得到了很多重复。

```
SELECT  S.* ,
        U.Avatar ,
        U.Displayname,
        ROW_NUMBER() OVER ( ORDER BY S.Id DESC ) rownum
FROM    dbo.Smoothie AS S
        INNER JOIN dbo.[User] AS U ON S.UserId = U.Id
        INNER JOIN dbo.Favorite AS F ON U.Id = F.UserId
WHERE   S.IsPublic = 1
        AND S.Status = 3
        AND F.UserId = 2 
```

一种解决方案是使用 distinct。但是，我必须注释掉 row_number，我需要那个 row_number 来进行分页。有没有另一种方法来摆脱重复？

```
SELECT  DISTINCT S.* ,
        U.Avatar ,
        U.Displayname 
        -- ROW_NUMBER() OVER ( ORDER BY S.Id DESC ) rownum
FROM    dbo.Smoothie AS S
        INNER JOIN dbo.[User] AS U ON S.UserId = U.Id
        INNER JOIN dbo.Favorite AS F ON U.Id = F.UserId
WHERE   S.IsPublic = 1
        AND S.Status = 3
        AND F.UserId = 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T01:25:55.267

为什么不使用您拥有的查询，而不使用 row_number 作为子查询，然后稍后再添加行号：

```
SELECT *, 
    ROW_NUMBER() OVER ( ORDER BY subQuery.Id DESC ) rownum
FROM (
SELECT  DISTINCT S.* ,
    U.Avatar ,
    U.Displayname 
FROM    dbo.Smoothie AS S
    INNER JOIN dbo.[User] AS U ON S.UserId = U.Id
    INNER JOIN dbo.Favorite AS F ON U.Id = F.UserId
WHERE   S.IsPublic = 1
    AND S.Status = 3
    AND F.UserId = 2
) AS subQuery 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:01:59.140

`Dense_Rank`也可以使用您原本未修改的查询来完成这项工作。

# jquery - 我可以修改 html 链接以便能够访问 jquery/ajax 函数吗

> ID：14131831
> 
> 赞同：0
> 
> 时间：2013-01-03T01:21:20.820
> 
> 标签：jquery, html, ajax

我有一个使用`</a>`标签的简单墨水。如下：

`<a href="create_session.php">`

我的问题是我可以修改链接以便能够访问下面的 jquery/ajax 函数：

```
function removesession()
{       
     $.ajax({
         url: "insertmarks.php",
         async: false,
         type: "POST"
     });    
} 
```

顺便说一句，仅导航到页面的ajax是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:24:36.937

绝对地！

给链接一个“id”属性（使它更容易选择）

```
<a href="create_session.php" id="createLink"></a>

$(function() {
    var link = $("#createLink");

    link.click(function() {
        $.ajax({
           url: "insertmarks.php",
           async: false,
           type: "POST",
           success: function() {
                window.location.href = link.attr("href");
           }
         });

         //cancels the links true action of navigation
         return false;
    });
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:22:55.573

是的。为锚标签添加一个唯一的 id，并将点击绑定到删除会话功能。

```
<a id="myLink" href="create_session.php"></a>

$('#myLink').on('click', removesession); 
```

请注意，如果您不希望链接导航到 url，则需要`return false`在函数`removesession`.

> **顺便说一句，仅导航到页面的ajax是否正确？**

这只会向 ajax 调用中设置的 url 发送一个请求。如果您想更改链接的位置，您可以这样做

```
$('#myLink').attr('href', 'mylink.php'); 
```

# php - 使用 PHP 驱动程序的 MongoDB 聚合查询

> ID：14131833
> 
> 赞同：4
> 
> 时间：2013-01-03T01:21:52.367
> 
> 标签：php, mongodb, aggregation-framework

我有一个`MongoDB`可以通过 MongoDB shell 运行的有效聚合查询。但是，我正在尝试将其转换为与官方`PHP`Mongo 驱动程序（http://php.net/manual/en/mongocollection.aggregate.php）一起使用。

这是工作的原始 MongoDB 查询：

```
db.executions.aggregate( [  
   { $project : { day : { $dayOfYear : "$executed" } } },
   { $group : { _id : { day : "$day" }, n : { $sum : 1 } } } , 
   { $sort : { _id : -1 } } , 
   { $limit : 14 }
] ) 
```

这是我使用 Mongo 驱动程序的尝试（*不工作） ：*`PHP`

```
$result = $c->aggregate(array(
    '$project' => array(
        'day' => array('$dayOfYear' => '$executed')
    ),
    '$group' => array(
        '_id' => array('day' => '$day'),
        'n' => array('$sum' => 1)
    ),
    '$sort' => array(
        '_id' => 1
    ),
    '$limit' => 14
)); 
```

上述 PHP 代码的错误是：

```
{"errmsg":"exception: wrong type for field (pipeline) 3 != 4","code":13111,"ok":0} 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-03T01:27:12.823

您的 Javascript 中的参数是一个由 4 个对象组成的数组，每个对象有一个元素，在您的 PHP 中，它是一个具有 4 个元素的关联数组（对象）。这将代表您的 Javascript：

```
$result = $c->aggregate(array(
    array(
      '$project' => array(
          'day' => array('$dayOfYear' => '$executed')
      ),
    ),
    array(
      '$group' => array(
          '_id' => array('day' => '$day'),
          'n' => array('$sum' => 1)
      ),
    ),
    array(
      '$sort' => array(
          '_id' => 1
      ),
    ),
    array(
      '$limit' => 14
    )
)); 
```

另外，如果你至少有 PHP5.4，你可以使用更简单的数组语法。转换为 PHP 就很简单了，您只需将花括号替换为方括号，将冒号替换为箭头：

```
$result = $c->aggregate([
  [ '$project' => [ 'day' => ['$dayOfYear' => '$executed']  ]  ],
  [ '$group' => ['_id' => ['day' => '$day'], 'n' => ['$sum' => 1]  ] ],
  [ '$sort' => ['_id' => 1] ],
  [ '$limit' => 14 ]
]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-11T16:15:49.090

也可以直接使用 JSON 数组：

```
$json = [
  '{ $project : { day : { $dayOfYear : "$executed" } } },
   { $group : { _id : { day : "$day" }, n : { $sum : 1 } } } , 
   { $sort : { _id : -1 } } , 
   { $limit : 14 }'
];

$pipeline = [];
foreach ($json as $stage) {
   array_push($pipeline, toPHP(fromJSON($stage)));
}
$result = $c->aggregate($pipeline); 
```

您也可以像这样使用组合：

```
use function MongoDB\BSON\toRelaxedExtendedJSON;
use function MongoDB\BSON\fromPHP;
use function MongoDB\BSON\toPHP;
use function MongoDB\BSON\fromJSON;

$operator = '$dayOfYear';
$json = [];
array_push($json, toRelaxedExtendedJSON(fromPHP(
   array('$project ' => array('day' => array($operator => '$executed')))
)));
array_push($json, 
   '{ $group : { _id : { day : "$day" }, n : { $sum : 1 } } } , 
    { $sort : { _id : -1 } } , 
    { $limit : 14 }'
);
$pipeline = [];
foreach ($json as $stage) {
   array_push($pipeline, toPHP(fromJSON($stage)));
}
$result = $c->aggregate($pipeline); 
```

或者

```
$operator = '$dayOfYear';
$json = [];
array_push($json, 
   '{ $group : { _id : { day : "$day" }, n : { $sum : 1 } } } , 
    { $sort : { _id : -1 } } , 
    { $limit : 14 }'
);
$pipeline = [];
array_push($pipeline, array('$project ' => array('day' => array($operator => '$executed'))));
foreach ($json as $stage) {
   array_push($pipeline, toPHP(fromJSON($stage)));
}
$result = $c->aggregate($pipeline); 
```

如果您的聚合查询是动态的或基于用户输入**的，请注意 NoSQL-Injection！** [https://www.acunetix.com/blog/web-security-zone/nosql-injections/](https://www.acunetix.com/blog/web-security-zone/nosql-injections/)

# ruby-on-rails - GET 'home' 应该有正确的标题第 4 章 Michael Hartl 的教程

> ID：14131835
> 
> 赞同：2
> 
> 时间：2013-01-03T01:22:26.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

> **可能重复：**
> [Rspec 测试应该通过但失败](https://stackoverflow.com/questions/14122225/rspec-test-should-pass-but-fails)

为什么我会收到此错误？

C:\Sites\sample_app>rspec ?[32m.?[0m?[31mF?[0m?[32m.?[0m?[31mF?[0m?[32m.?[0m?[31mF?[0m

失败：

1) PagesController GET 'home' 应该有正确的标题 ?[31mFailure/Error:?[0m ?[31mresponse.should have_selector("title",?[0m ?[31mNoMethodError:?[0m ?[31mundefined 方法`has_selector?' for #<ActionController::TestResponse:0x4162ce0>?[0m ?[36m # ./spec/controllers/pages_controller_spec.rb:14:in`块(3级) ) 在 '?[0m

2) PagesController GET 'contact' 应该有正确的标题 ?[31mFailure/Error:?[0m ?[31mresponse.should have_selector("title",?[0m ?[31mNoMethodError:?[0m ?[31mundefined 方法`has_selector?' for #<ActionController::TestResponse:0x3eab898>?[0m ?[36m # ./spec/controllers/pages_controller_spec.rb:27:in`块（3级） ) 在 '?[0m

3) PagesController GET 'about' 应该有正确的标题 ?[31mFailure/Error:?[0m ?[31mresponse.should have_selector("title",?[0m ?[31mNoMethodError:?[0m ?[31mundefined 方法`has_selector?' for #<ActionController::TestResponse:0x3f1ccb0>?[0m ?[36m # ./spec/controllers/pages_controller_spec.rb:41:in`块 (3 个级别) ) 在 '?[0m

5.15秒完成？[31m6个例子，3次失败？[0m

失败的例子：

?[31mrspec ./spec/controllers/pages_controller_spec.rb:12?[0m ?[36m# PagesController GET 'home' 应该有正确的标题？[0m ?[31mrspec ./spec/controllers/pages_controller_spec.rb:25?[ 0m ?[36m# PagesController GET 'contact' 应该有正确的标题？[0m ?[31mrspec ./spec/controllers/pages_controller_spec.rb:39?[0m ?[36m# PagesController GET 'about' 应该有正确的标题？ [0米

用种子 501 随机化

> Application_helper.rb

模块 ApplicationHelper

```
# Retrun a title on a per-page basic.
def title
    base_title = "Ruby on Railys tut sample app"
    if @title.nil?
        base_title
    else
        "#{base_title} | #{@title}"
    end
end 
```

结尾

> Pages_controller_spec.rb
> 
> 需要'spec_helper'
> 
> 描述 PagesController 做 render_views
> 
> 描述“GET'home'”做它“应该成功”做得到'home'response.should be_success end
> 
> 它“应该有正确的标题”确实得到 'home' response.should have_selector("title", :content => "Ruby on Rails Tutorial Sample App | Home") end end
> 
> 描述“GET 'contact'”做它“应该成功”做得到'contact' response.should be_success end
> 
> 它“应该有正确的标题”确实得到 'contact' response.should have_selector("title", :content => "Ruby on Rails Tutorial Sample App | Contact") end end
> 
> 描述“获取'关于'”做它“应该成功”做得到'关于'响应。应该是_成功结束
> 
> 它“应该有正确的标题”确实得到“关于”响应。应该有_selector（“标题”，：content =>“Ruby on Rails教程示例应用程序|关于”）结束结束结束

如果您需要其他内容，请添加并感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:30:16.437

您需要 base_title 方法来返回您正在测试的确切字符串。在这种情况下，“Ruby on Rails 教程示例应用程序”。目前，您将其标题设置为“Ruby on Railys tut sample app”。

# android - 根据麦克风输入振动 Android 手机

> ID：14131837
> 
> 赞同：-1
> 
> 时间：2013-01-03T01:22:38.863
> 
> 标签：android, audio, android-ndk, microphone, android-vibration

我想记录从安卓手机输入的语音/声音并转换为手机特定类型的振动。这个想法是帮助不同能力的人了解他们周围的环境，并帮助人们了解附近的障碍物（比如汽车等）。我怎样才能 ：

1.  读取麦克风/声音输入并实时保存（以进一步处理）。
2.  以特定频率振动手机

我正在寻找特定的库和一些示例代码来使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:47:15.460

我相当肯定振动器不会随频率起作用，它要么打开要么关闭。你能做的最好的可能是摩尔斯电码。

# css - 登录按钮浏览器调整大小

> ID：14131838
> 
> 赞同：-1
> 
> 时间：2013-01-03T01:22:48.440
> 
> 标签：css, jquery-ui

当我重新调整窗口大小时，我在调整浏览器窗口大小时遇到​​问题客户登录按钮不在正文中

如何解决这个问题我已经给了余地这就是问题

```
<div class="inner clearfix" style="margin-left: 1000px;">
 <div class="logo">
 <a href="" class="customerLogin"> Customer Login </a> 
</div> 
</div> 
```

[http://jsfiddle.net/48y2Q/1/embedded/result/](http://jsfiddle.net/48y2Q/1/embedded/result/) http://jsfiddle.net/48y2Q/1/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:33:49.993

你给了它一个固定的边距：

```
margin-left: 1000px; 
```

所以它总是从左边1000px。将其更改为以下内容，例如：

```
float: right; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:39:35.860

您可以这样做以使其与右侧对齐：

```
<div style="margin-right: 50px; text-align: right;" class="inner clearfix">
    <div class="logo">
    <a class="customerLogin" href="">     
        Customer Login
    </a>
    </div>
</div> 
```

# python - 使用 scipy.optimize.curve_fit

> ID：14131843
> 
> 赞同：2
> 
> 时间：2013-01-03T01:23:16.483
> 
> 标签：python, scipy, curve-fitting

我是 scipy 新手，无法使用该`curve_fit`功能。我认为有一些 scipy/numpy 数据包装器需要用于独立和依赖的数据集。windowCurrent 和 windowVoltage 是从我的数据集中保存一组滑动点的队列。

如何包装电流/电压对列表以避免此错误？

```
TypeError: unsupported operand type(s) for -: 'numpy.ndarray' and 'numpy.ndarray' 
```

代码：

```
for line in inputFileContents[:maxlen]:
    print line
    timeStamp,voltage,current = line.split(",")
    if windowCurrent == None and windowVoltage == None:
        windowCurrent = deque(current, maxlen)
        windowVoltage = deque(voltage, maxlen)
    else:
        windowCurrent.append(current)
        windowVoltage.append(voltage)

for lineConents in inputFileContents:
    timeStamp,voltage,current = line.split(",")
    windowCurrent.append(current)
    windowVoltage.append(voltage)
    curveList.append([timeStamp, op.curve_fit(logCurve, np.array(list(windowCurrent)), np.array(list(windowVoltage)))])
    curveListPopulate(curveList) 
```

另外：doing `list(windowCurrent)`，离开`np.array`包装，也会返回一个错误。

[链接](http://pastebin.com/XM5V9msF)到错误的全文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T07:51:52.050

在将它们附加到and之前尝试转换`current`and 。`voltage``float``windowCurrent``windowVoltage`

**解释：**

Numpy 的数组可以保存多种数据类型，而不仅仅是数字。在您的情况下，它似乎是一个字符串数据类型：`line.split`返回字符串，因此您得到一个 numpy 字符串数组。显然，您不能将字符串彼此相减。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:10:45.023

我同意 silvado，问题在于将字符串 numpy 数组传递给curve_fit。

这可能有助于解决问题：

[如何将字符串数组转换为numpy中的浮点数组？](https://stackoverflow.com/questions/3877209/how-to-convert-an-array-of-strings-to-an-array-of-floats-in-numpy)

# objective-c - 旋转图像时保持图像上的文本可读

> ID：14131844
> 
> 赞同：2
> 
> 时间：2013-01-03T01:23:16.127
> 
> 标签：objective-c, cocoa-touch, core-graphics, uilabel

我有一个看起来像轮子的图像视图。此视图检测每个彩色部分上的触摸事件。

我遇到的问题是，当我旋转这个轮子时，`UILabel`视图顶部的 s 也需要旋转，以便文本仍然是水平的并且人类可读。

旋转父视图时旋转标签的最佳方法是什么？

![](../Images/ca1e47b5a7649cbfbd575024bd82bf54.png)

这就是我现在正在尝试的，它不能正确旋转......

```
CGAffineTransform textTransform = CGAffineTransformRotate(newTransform, newAngle * -1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T01:33:24.810

大概您正在应用旋转变换来旋转轮子。如果标签是轮子视图的子视图，它们的中心被固定在轮子的正确位置（因为视图位于其父视图的中心），并且它们将与它一起移动。同时，对标签应用逆旋转变换。旋转围绕每个标签的中心进行。因此，每个标签都保持在正确的位置并保持直立。

事后诸葛亮 - 还要确保您没有在这些标签上使用自动布局。自动布局中断视图转换。

# python - 更改 Turbogears 贴图服务目录

> ID：14131845
> 
> 赞同：0
> 
> 时间：2013-01-03T01:23:19.933
> 
> 标签：python, turbogears

我对 Turbogears 有点陌生，但想知道是否有人可以帮助我...

我在 /var/tg/user/env/ 有 TG 设置，那里有目录...

```
bin/
include/
lib/
local/
src/
paster.log
development.ini 
```

我希望`paster serve development.ini`命令服务于`src/Project/projecttg/projecttg` 但它是服务于`lib/python2.7/site-packages/projecttg/`而不是？

我该如何改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:58:36.610

projecttg 从`lib/python2.7/site-packages/`目录“安装”到虚拟机。所以我不得不进入`src/Project/projecttg/`并运行`python setup.py develop`以覆盖它

# php - Magento 产品网格。将可配置的产品数量显示为相关简单产品的总和

> ID：14131849
> 
> 赞同：1
> 
> 时间：2013-01-03T01:24:19.690
> 
> 标签：php, magento, magento-1.5

我试图让 Magento 在产品网格中显示可配置产品的库存基础。显然 Configurable products 没有数量，所以我的意思是我想通过一些类似于以下的逻辑来修改产品数量的显示方式：

```
if (product != configurable) 
{qty = do what it normally does}

else 
{get collection of associated products.
qty = sum of qty of that collection;} 
```

我找到了几个参考数量的控制器，例如这个 Block/Catalog/Product/grid.php

```
protected function _prepareCollection()
{
    $collection = $this->getCollection();
    if($queryString = $this->getQueryStr()) {
        $collection = Mage::Helper('enhancedgrid')
            ->getSearchCollection($queryString, $this->getRequest());
    }
    if(!$collection) {
        $collection = Mage::getModel('catalog/product')->getCollection();
    }
    $store = $this->_getStore();
    $collection 
        ->joinField('qty',
            'cataloginventory/stock_item',
            'qty',
            'product_id=entity_id',
            '{{table}}.stock_id=1',
            'left');
    $collection->addAttributeToSelect('sku'); 
```

但我一直无法得到它的任何地方。

~~如果这些都不可能 - 只需添加“库存可用性”结果就足够了。~~

编辑：^这不起作用，因为可配置产品是“有货”，但所有相关产品都是“缺货”

谢谢

# algorithm - 需要算法 - 2007 年比荷卢经济联盟竞赛

> ID：14131853
> 
> 赞同：0
> 
> 时间：2013-01-03T01:24:47.953
> 
> 标签：algorithm, algorithmic-trading

这个问题（最后一个）出现在 Benelux Algorithm Programming Contest-2007

[http://www.cs.duke.edu/courses/cps149s/spring08/problems/bapc07/allprobs.pdf](http://www.cs.duke.edu/courses/cps149s/spring08/problems/bapc07/allprobs.pdf)

## 简而言之问题陈述：

公司需要确定何时在给定输入上购买或出售或无操作的策略，以实现利润最大化。输入格式为：

```
6
4  4  2
2  9  3
....
.... 
```

这意味着输入的时间为 6 天。

第 1 天：您获得 4 股，每股价格为 4 美元，最高可以卖出 2
股 第 2 天：您获得 2 股，每股价格为 9 美元，最高可以卖出 3 股
。

我们需要输出可以达到的最大利润。

我正在考虑如何解决这个问题。在我看来，如果我们使用蛮力，将花费太多时间。如果这可以转换为像 0-1 背包这样的 DP 问题？一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T23:21:18.197

我们不能比在当天以最高价格卖出最大数量的股票做得更好，所以我在想：（这可能有点难以（有效地）实施）

计算到目前为止每天收到的股票总数以提高算法的效率可能是一个好主意。

按价格降序处理天数。

一天，`sell amount = min(daily sell limit, shares available)`（对于最高价格日（第一个处理日），可用股票 = 迄今为止收到的股票）。

在随后的所有日子里，`shares available -= sell amount`. 对于前几天，我们二分查找`(shares available - shares sold)`该日与刚刚处理的那一天之间的所有条目 = 0。

我们可能不需要物理设置值（至少不需要在每一步），只需从迄今为止的历史中即时计算它们（我在考虑区间树或类似的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:24:28.540

您的描述与 PDF 中的最后一个问题不完全匹配 - 在 PDF 中，您收到第一列中指定的股票数量（或被迫购买它们 - 因为没有决定做出无关紧要）并且只能决定卖出多少股。因为它没有另外说明，所以我认为卖空是不允许的（否则忽略除价格之外的一切，并在衍生品市场上赚到这么多钱，以至于你既可以贿赂 SEC 或国会，又可以退休:-)）。

这看起来像一个动态程序，其中每个时间点的状态是您手头的股份总数。因此，在时间 n 时，您有一个数组，其中每个可能的股票数量都有一个元素，您当时可能最终获得的股票数量，并且在该元素中，您拥有到那时您可以赚到的最大金额，同时以该数字结束的股份。由此您可以计算出时间 n+1 的相同信息。当你到达终点时，你所有的股票都一文不值，所以最好的答案是与最大金额相关的股票。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T05:04:13.873

可以通过DP解决

假设有n天，股票总数为m

设 f[i][j] 表示在第 i 天，剩余 j 股，最大利润为 f[i][j]

显然，f[i][j]=maximum(f[i-1][j+k]+k*price_per_day[i]), 0<=k<=maximum_shares_sell_per_day[i]

可以进一步优化，因为 f[i][...] 只依赖于 f[i-1][...]，所以这里可以使用滚动数组。因此你只需要定义 f[2][m] 来节省空间。

总时间复杂度为 O(n*m*maximum_shares_sell_per_day)。

也许可以进一步优化以节省时间。欢迎任何反馈

# c++ - 如何使用 C 语言将整数值转换为其对应的十六进制并存储在单字节变量中

> ID：14131854
> 
> 赞同：0
> 
> 时间：2013-01-03T01:24:47.123
> 
> 标签：c++, c

如何使用 C 语言将整数值转换为其对应的十六进制并将其存储在单字节变量中。

```
int nVar = 24; // where hex value 0x18

BYTE byRes; 

char sBuff[8] = {0};
sprintf(sBuff, "%x", nVar); 
```

其中 sBuff[0] = 0x30 和 sBuff[1] = 0x38 但这不是我想要的。我想将 nVar 的十六进制值保存在 byRes 变量中。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T01:31:40.167

请注意，“十进制”或“十六进制”只是数字值的*表示*。换句话说，这些是在屏幕*上显示*的不同方式。`int`赋值`byRes = (BYTE)nVar;`复制`nVar`to的值`byRes`。如果需要，您可以将该值显示为十六进制或十进制或 base-7 或 base-42。现代计算机将数据存储为电压差。在机器级别，我们通常将这些数字视为“高”和“低”或“0”和“1”（也称为二进制），但在编程级别，我们可以以任何方式思考这些数值希望。将一个变量的“十六进制”值分配给另一个变量与分配“十进制”值相同，因为计算机不知道我们的*想法*关于价值，直到我们要求它显示它。当您这样做时（例如通过`printf()`调用），计算机会将值转换为 ASCII 字符，这些字符不再是我们正在处理的整数值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:32:19.540

C 中的所有数字（以及其他所有数字）都表示为二进制数字。0x18 和 24 的值相同。仅当您要将它们表示为字符串时才重要。

# c++ - C ++在运行时分配一个常量值？

> ID：14131855
> 
> 赞同：10
> 
> 时间：2013-01-03T01:25:01.930
> 
> 标签：c++, runtime, constants

我有一个在运行时永远不会改变的常量值，但直到运行时才知道。

有没有办法在不定义常量的情况下声明一个常量（作为类的成员或不作为一个成员），并且还分配一个计算值一次（并且只有一次）它被确定；还是我将不得不诉诸非常量声明并使用编码标准普尔（`ALL_CAPS`变量名称，`static`如果在类中的声明等）来*尝试*防止它发生变化？

澄清：

尽管这些都是很好的答案，但我的实际情况要复杂得多：

该程序有一个在处理和渲染之间不断运行的主循环；用户可以设置所需的选项，一旦设置，它们将永远不会改变，直到程序重新启动。为在主循环之前可以确定的任何内容设置“初始化”功能，但必须在处理阶段的循环中间执行取决于用户交互的值。（目前，持久性数据存储技术浮现在脑海中......）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T01:28:51.003

像这样的东西？

```
const int x = calcConstant(); 
```

如果它是类成员，则使用构造函数初始化列表，如 Yuushi 的回答。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-03T01:30:22.140

`struct`您可以在or中定义它`class`并使用初始化列表：

```
#include <iostream>

struct has_const_member
{
    const int x;

    has_const_member(int x_)
      : x(x_)
    { }

};

int main()
{
    int foo = 0;
    std::cin >> foo;
    has_const_member h(foo);
    std::cout << h.x << "\n";
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-03T01:30:48.173

作为静态或函数局部变量：

```
const int x = calcConstant(); 
```

作为班级成员：

```
struct ConstContainer {
    ConstContainer(int x) : x(x) {}
    const int x;
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T01:35:19.550

是的，您可以使用初始化方法和 gettor 方法创建私有静态单例字段。以下是如何执行此操作的示例：

```
// In foo.h
class Foo
{
public:
    // Caller must ensure that initializeGlobalValue
    // was already called.
    static int getGlobalValue() { 
        if (!initialized) {
            ... handle the error ...
        }
        return global_value; 
    }

    static void initializeGlobalValue(...)

private:
    static bool initialized;
    static int  global_value;
};

// In foo.cpp
bool Foo::initialized = false;
int Foo::global_value;

void Foo::initializeGlobalValue(...) {
    if (initialized) {
        ...handle the error...
    }
    global_value = ...;
    initialized = true;
} 
```

# haskell - Data.Void 中的荒谬函数有什么用？

> ID：14131856
> 
> 赞同：100
> 
> 时间：2013-01-03T01:25:14.950
> 
> 标签：haskell, type-theory, curry-howard

中的[`absurd`](http://hackage.haskell.org/packages/archive/void/0.5.10/doc/html/Data-Void.html#v:absurd)函数`Data.Void`具有以下签名，其中`Void`是该包导出的逻辑上无人居住的类型：

```
-- | Since 'Void' values logically don't exist, this witnesses the logical
-- reasoning tool of \"ex falso quodlibet\".
absurd :: Void -> a 
```

我确实知道足够的逻辑来获得文档的注释，即通过 Proposal-as-types 对应，这对应于有效的公式`⊥ → a`。

我感到疑惑和好奇的是：这个函数在什么样的实际编程问题中有用？我在想，在某些情况下，作为一种彻底处理“不可能发生”情况的类型安全方式，它可能很有用，但我对 Curry-Howard 的实际用途知之甚少，无法判断这个想法是否在完全正确。

编辑：最好在 Haskell 中举例，但如果有人想使用依赖类型的语言，我不会抱怨......

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-03T03:20:25.330

生活有点艰难，因为 Haskell 并不严格。一般用例是处理不可能的路径。例如

```
simple :: Either Void a -> a
simple (Left x) = absurd x
simple (Right y) = y 
```

事实证明这有点用处。考虑一个简单的类型`Pipes`

```
data Pipe a b r
  = Pure r
  | Await (a -> Pipe a b r)
  | Yield !b (Pipe a b r) 
```

`Pipes`这是 Gabriel Gonzales库中标准管道类型的严格简化版本。现在，我们可以将永远不会产生的管道（即消费者）编码为

```
type Consumer a r = Pipe a Void r 
```

这真的永远不会产生。这意味着 a 的正确折叠规则`Consumer`是

```
foldConsumer :: (r -> s) -> ((a -> s) -> s) -> Consumer a r -> s
foldConsumer onPure onAwait p 
 = case p of
     Pure x -> onPure x
     Await f -> onAwait $ \x -> foldConsumer onPure onAwait (f x)
     Yield x _ -> absurd x 
```

或者，您可以在与消费者打交道时**忽略**收益情况。这是此设计模式的一般版本：使用多态数据类型并`Void`在需要时消除可能性。

可能最经典的用法`Void`是在 CPS 中。

```
type Continuation a = a -> Void 
```

也就是说，a`Continuation`是一个永远不会返回的函数。 `Continuation`是“不”的类型版本。由此我们得到一个 CPS 的单子（对应于经典逻辑）

```
newtype CPS a = Continuation (Continuation a) 
```

由于 Haskell 是纯的，我们无法从这种类型中得到任何东西。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2013-01-03T03:55:48.307

考虑由自由变量参数化的 lambda 项的这种表示。（参见 Bellegarde 和 Hook 1994 年、Bird 和 Paterson 1999 年、Altenkirch 和 Reus 1999 年的论文。）

```
data Tm a  = Var a
           | Tm a :$ Tm a
           | Lam (Tm (Maybe a)) 
```

您当然可以将其设为 a `Functor`，捕获重命名的概念，并`Monad`捕获替换的概念。

```
instance Functor Tm where
  fmap rho (Var a)   = Var (rho a)
  fmap rho (f :$ s)  = fmap rho f :$ fmap rho s
  fmap rho (Lam t)   = Lam (fmap (fmap rho) t)

instance Monad Tm where
  return = Var
  Var a     >>= sig  = sig a
  (f :$ s)  >>= sig  = (f >>= sig) :$ (s >>= sig)
  Lam t     >>= sig  = Lam (t >>= maybe (Var Nothing) (fmap Just . sig)) 
```

现在考虑*封闭*项：这些是 的居民`Tm Void`。您应该能够将封闭项嵌入到具有任意自由变量的项中。如何？

```
fmap absurd :: Tm Void -> Tm a 
```

当然，问题是这个函数将遍历这个术语，完全不做任何事情。但它比它更诚实`unsafeCoerce`。这就是为什么`vacuous`被添加到`Data.Void`...

或者写一个评估器。以下是 中带有自由变量的值`b`。

```
data Val b
  =  b :$$ [Val b]                              -- a stuck application
  |  forall a. LV (a -> Val b) (Tm (Maybe a))   -- we have an incomplete environment 
```

我刚刚将 lambdas 表示为闭包。评估器由将自由变量映射`a`到值 over的环境参数化`b`。

```
eval :: (a -> Val b) -> Tm a -> Val b
eval g (Var a)   = g a
eval g (f :$ s)  = eval g f $$ eval g s where
  (b :$$ vs)  $$ v  = b :$$ (vs ++ [v])         -- stuck application gets longer
  LV g t      $$ v  = eval (maybe v g) t        -- an applied lambda gets unstuck
eval g (Lam t)   = LV g t 
```

你猜对了。评估任何目标的封闭项

```
eval absurd :: Tm Void -> Val b 
```

更一般地说，`Void`它很少单独使用，但是当您想以某种方式实例化类型参数时很方便（例如，在这里，在封闭术语中使用自由变量）。这些参数化类型通常带有高阶函数，将对参数的操作提升到对整个类型的操作（例如，这里，`fmap`，`>>=`，`eval`）。因此，您将`absurd`作为通用操作传递给`Void`.

再举一个例子，想象一下`Either e v`用来捕获希望给你一个`v`但可能引发类型异常的计算`e`。您可以使用这种方法统一记录不良行为的风险。对于此设置中表现良好的计算，取`e`为`Void`，然后使用

```
either absurd id :: Either Void v -> v 
```

安全运行或

```
either absurd Right :: Either Void v -> Either e v 
```

在不安全的世界中嵌入安全组件。

哦，最后一个欢呼，处理“不可能发生”。它出现在通用拉链结构中，光标无法到达的任何地方。

```
class Differentiable f where
  type D f :: * -> *              -- an f with a hole
  plug :: (D f x, x) -> f x       -- plugging a child in the hole

newtype K a     x  = K a          -- no children, just a label
newtype I       x  = I x          -- one child
data (f :+: g)  x  = L (f x)      -- choice
                   | R (g x)
data (f :*: g)  x  = f x :&: g x  -- pairing

instance Differentiable (K a) where
  type D (K a) = K Void           -- no children, so no way to make a hole
  plug (K v, x) = absurd v        -- can't reinvent the label, so deny the hole! 
```

我决定不删除其余的，即使它不完全相关。

```
instance Differentiable I where
  type D I = K ()
  plug (K (), x) = I x

instance (Differentiable f, Differentiable g) => Differentiable (f :+: g) where
  type D (f :+: g) = D f :+: D g
  plug (L df, x) = L (plug (df, x))
  plug (R dg, x) = R (plug (dg, x))

instance (Differentiable f, Differentiable g) => Differentiable (f :*: g) where
  type D (f :*: g) = (D f :*: g) :+: (f :*: D g)
  plug (L (df :&: g), x) = plug (df, x) :&: g
  plug (R (f :&: dg), x) = f :&: plug (dg, x) 
```

实际上，也许它是相关的。如果您喜欢冒险，这篇[未完成的文章](http://www.strictlypositive.org/Holes.pdf)将展示如何使用`Void`自由变量来压缩术语的表示

```
data Term f x = Var x | Con (f (Term f x))   -- the Free monad, yet again 
```

`Differentiable`在从 a和`Traversable`functor自由生成的任何语法中`f`。我们`Term f Void`用来表示没有自由变量的区域，并`[D f (Term f Void)]`表示通过没有自由变量的区域的*管子*隧道到一个孤立的自由变量，或者到两个或多个自由变量的路径中的连接点。必须在某个时候完成那篇文章。

对于没有价值观的类型（或者至少在礼貌的公司中不值得一提），`Void`非常有用。并且`absurd`是你如何使用它。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-01-03T03:19:10.543

> 我在想，在某些情况下，作为一种彻底处理“不可能发生”情况的类型安全方式，它可能很有用

这是完全正确的。

你可以说这`absurd`并不比`const (error "Impossible")`. 但是，它是类型受限的，因此它的唯一输入可以是 type `Void`，一种故意无人居住的数据类型。这意味着没有可以传递给的实际值`absurd`。如果你最终进入一个代码分支，类型检查器认为你可以访问 type 的东西`Void`，那么，那么，你处于一个*荒谬*的境地。所以你只是`absurd`用来基本上标记这个代码分支永远不应该到达。

“Ex falso quodlibet”的字面意思是“从 [a] 错误 [proposition]，任何事情都随之而来”。所以当你发现你手里拿着一个类型为 的数据时`Void`，你就知道你手里有假证据。因此，您可以（通过）填补您想要的*任何*`absurd`漏洞，因为从一个假命题开始，任何事情都会随之而来。

我写了一篇关于 Conduit 背后想法的博客文章，其中有一个使用`absurd`.

[http://unknownparallel.wordpress.com/2012/07/30/pipes-to-conduits-part-6-leftovers/#running-a-pipeline](http://unknownparallel.wordpress.com/2012/07/30/pipes-to-conduits-part-6-leftovers/#running-a-pipeline)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-01-06T18:05:59.540

有不同的方式来表示[空数据类型](https://en.wikipedia.org/wiki/Bottom_type)。一种是空代数数据类型。另一种方法是使其成为*∀α.α*的别名或

```
type Void' = forall a . a 
```

在 Haskell 中 - 这就是我们如何在 System F 中对其进行编码（参见[证明和类型](http://www.paultaylor.eu/stable/Proofs+Types.html)的第 11 章）。这两种描述当然是同构的，同构由`\x -> x :: (forall a.a) -> Void`和见证`absurd :: Void -> a`。

在某些情况下，我们更喜欢显式变体，通常如果空数据类型出现在函数的参数中，或者出现在更复杂的数据类型中，例如在[Data.Conduit](http://hackage.haskell.org/packages/archive/conduit/0.5.5/doc/html/Data-Conduit.html)中：

```
type Sink i m r = Pipe i i Void () m r 
```

在某些情况下，我们更喜欢多态变体，通常空数据类型包含在函数的返回类型中。

`absurd`当我们在这两种表示之间转换时出现。

* * *

例如，[`callcc :: ((a -> m b) -> m a) -> m a`](http://hackage.haskell.org/packages/archive/mtl/latest/doc/html/Control-Monad-Cont-Class.html#v:callCC)使用 (隐式) `forall b`。它也可以是 type `((a -> m Void) -> m a) -> m a`，因为对 contination 的调用实际上并没有返回，它会将控制权转移到另一个点。如果我们想使用延续，我们可以定义

```
type Continuation r a = a -> Cont r Void 
```

（我们可以使用`type Continuation' r a = forall b . a -> Cont r b`，但这需要 2 级类型。）然后，`vacuousM`将其转换`Cont r Void`为`Cont r b`.

（另请注意，您可以使用[haskellers.com](http://packdeps.haskellers.com/reverse/void)搜索某个包的使用（反向依赖），例如查看谁以及如何使用*void*包。）

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-01-03T03:19:38.200

通常，您可以使用它来避免明显的部分模式匹配。例如，从[这个答案](https://stackoverflow.com/a/11968904/791604)中获取数据类型声明的近似值：

```
data RuleSet a            = Known !a | Unknown String
data GoRuleChoices        = Japanese | Chinese
type LinesOfActionChoices = Void
type GoRuleSet            = RuleSet GoRuleChoices
type LinesOfActionRuleSet = RuleSet LinesOfActionChoices 
```

然后你可以`absurd`像这样使用，例如：

```
handleLOARules :: (String -> a) -> LinesOfActionsRuleSet -> a
handleLOARules f r = case r of
    Known   a -> absurd a
    Unknown s -> f s 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-12T21:31:56.543

在像 Idris 这样的依赖类型语言中，它可能比在 Haskell 中更有用。通常，在一个总函数中，当您模式匹配一​​个实际上无法推入函数的值时，您将构造一个无人居住类型的值并使用它`absurd`来完成案例定义。

例如，此函数从列表中删除一个元素，该元素具有该元素存在的类型级 costraint：

```
shrink : (xs : Vect (S n) a) -> Elem x xs -> Vect n a
shrink (x :: ys) Here = ys
shrink (y :: []) (There p) = absurd p
shrink (y :: (x :: xs)) (There p) = y :: shrink (x :: xs) p 
```

第二种情况是说空列表中有某个元素，这很荒谬。然而，一般来说，编译器不知道这一点，我们通常必须明确。然后编译器可以检查函数定义不是部分的，并且我们获得了更强的编译时保证。

通过 Curry-Howard 的观点，命题在哪里，那么`absurd`在矛盾的证明中是一种 QED。

# c# - 使用 Newtonsoft.Json 解析 JSON 时出错

> ID：14131862
> 
> 赞同：14
> 
> 时间：2013-01-03T01:25:47.887
> 
> 标签：c#, .net, json, linq, json.net

当我尝试使用 Newtonsoft.Json 解析我的 JSON 时出现以下错误

```
Response result = JsonConvert.DeserializeObject<Response>(unfilteredJSONData); 
```

> 无法将属性字符串添加到 Newtonsoft.Json.Linq.JObject。对象上已存在同名属性。

我无法控制 JSON 提要，他们只是添加了`flags1`和`flags2`. 重复的字符串似乎导致了错误，但我对如何解决它没有任何好主意。在添加新字段之前，此代码运行良好。

**更新：**

* * *

第一个错误是由使用过时的 JSON.net 版本引起的。我正在使用的 CMS 系统有一个内置版本，它是 3.5。当我使用 4.5 时，我收到一个新错误：

> 无法将 Newtonsoft.Json.Linq.JValue 添加到 Newtonsoft.Json.Linq.JObject。

事实证明，我下面的 JSON 格式与我正在处理的格式不完全相同。请注意更新。错误似乎是在这里引起的：

```
"flags1": {
    "string": "text",
    "string": "text"
}, 
```

JSON是：

```
{
    "result":
    {
        "lookups":
        [
            {
                "groups":
                [
                    {
                        "item0": "text",
                        "item1": "text",
                        "item2": 0,
                        "item3": 0,
                        "item4": 11.5,
                        "item5": true
                    },
                    {
                        "item6": "text",
                        "oddName": "text"
                    },
                    {
                        "item7": {
                            "subitem0": "text",
                            "subitem1": 0,
                            "subitem2": true
                        },
                        "item8": {
                            "subitem0": "string",
                            "subitem1": 0,
                            "subitem2": true
                        }
                    },
                    {
                        "url": "http://google.com",
                        "otherurl": "http://yahoo.com",
                        "alturllist": [],
                        "altotherurl": []
                    },
                    {},
                    {
                        "flags1": {
                            "string": "text"
                        },
                        "flags2": {
                            "string": "text"
                        }
                    }
                ]
            },
            {
                "groups":
                [
                    {
                        "item0": "text",
                        "item1": "text",
                        "item2": 0,
                        "item3": 0,
                        "item4": 11.5,
                        "item5": true
                    },
                    {
                        "item6": "text",
                        "oddName": "text"
                    },
                    {
                        "item7": {
                            "subitem0": "text",
                            "subitem1": 0,
                            "subitem2": true
                        },
                        "item8": {
                            "subitem0": "string",
                            "subitem1": 0,
                            "subitem2": true
                        }
                    },
                    {
                        "url": "http://google.com",
                        "otherurl": "http://yahoo.com",
                        "alturllist": [],
                        "altotherurl": []
                    },
                    {},
                    {
                        "flags1": {
                            "string": "text",
                            "string": "text"
                        },
                        "flags2": {}
                    }
                ]
            }
        ]
    }
} 
```

C# 类是：

```
// response
[DataContract]
public class Response
{
    [DataMember(Name = "result")]
    public Result result { get; set; }
}
[DataContract]
public class Result
{
    [DataMember(Name = "lookups")]
    public List<Item> lookups { get; set; }
}
[DataContract]
public class Item
{
    [DataMember(Name = "groups")]
    public List<Dictionary<string, object>> groups { get; set; }
} 
```

为了清楚起见，我简化了 JSON 和代码示例。

我包含了代码 aspx 以简化复制。

测试.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Test.aspx.cs" Inherits="Test" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <code>
    <%=response %>
    </code></div>
    </form>
</body>
</html> 
```

测试.aspx.cs

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Runtime.Serialization;

using Newtonsoft.Json;
using Newtonsoft.Json.Linq;

using NLog;

public partial class Test : System.Web.UI.Page
{
    public string response = string.Empty;
    public static string cacheDirPath = HttpRuntime.AppDomainAppPath + "cache\\";
    private static Logger log = LogManager.GetLogger("productFeed");

    protected void Page_Load(object sender, EventArgs e)
    {

        response = readDataFromFile(cacheDirPath + "test2.json");
        Response masheryResult = JsonConvert.DeserializeObject<Response>(response);
    }
    private string readDataFromFile(string filePath)
    {
        string JSONData = string.Empty;
        try
        {
            StreamReader myFile = new StreamReader(filePath);

            JSONData = myFile.ReadToEnd();

            myFile.Close();
        }
        catch (Exception e)
        {
            log.Warn(e.Message);
        }

        return JSONData;
    }
}

// response
[DataContract]
public class Response
{
    [DataMember(Name = "result")]
    public Result result { get; set; }
}
[DataContract]
public class Result
{
    [DataMember(Name = "lookups")]
    public List<Item> lookups { get; set; }
}
[DataContract]
public class Item
{
    [DataMember(Name = "groups")]
    public List<Dictionary<string, object>> groups { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-26T15:13:44.607

“flags1”对象中的两个属性都被命名为“string”，你不能定义一个属性两次。

编辑：看来，至少在最新的 nuget 版本中，JObject.Parse 跳过了错误并正确解析了数据！我希望你能为你做这件事。

这是一个如何做到这一点的示例：

```
Response result = JObject.Parse(unfilteredJSONData).ToObject<Response>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-08T16:39:42.187

除了[Connor Hilarides](https://stackoverflow.com/a/15092608/641833)回答之外，它还可以用于包括数组：

```
JToken resultToken = JToken.Parse(unfilteredJSONData); 
```

# licensing - 如何拥有双许可证软件（开放+封闭）

> ID：14131866
> 
> 赞同：0
> 
> 时间：2013-01-03T01:26:04.657
> 
> 标签：licensing

我有一些我想为自己保留的封闭源代码（由我编写）。但是，我想在开源项目中使用其中的一些代码——这也将由我专门编写，但发布在某个地方供任何人使用。

我怎样才能完成这样的事情：

1.  发布代码的开源版本，任何人都可以免费更改，保留或回馈（我相信这是zlib许可证）
2.  同时，我想为自己准备一个代码版本，并能够合并 #1 中的任何代码更改（如果有人决定修复我发布的任何代码）

这就像拥有两个代码树一样简单，两者都附加了不同的许可证吗？一份 zlib 许可证，一份我自己的许可证？

请注意，我有点偏向于使用 zlib 许可证，因为它很短，我相信我理解它并同意它是合适的（我不介意有人将代码用于商业目的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T04:29:10.153

第一部分确实需要两个代码树。如果您使用的是分布式 SCM，例如 git、mercurial 或 bazaar，那么它不会太复杂：

1.  一个 repo 是公开的、开源的，我们称之为`open-foobar`
2.  一个 repo 是私有的、闭源的，我们称之为`enterprise-foobar`
3.  在我看来，将开放存储库作为*主*存储库（上游）会更好，私有存储库会*分叉*和扩展，但这取决于您要保留多少代码。如果您的大部分提交将进入私有项目，那么将其作为您的主存储库是有意义的，但是这将更难以正确管理
4.  您的本地克隆应该将两个存储库添加为远程，并且您应该在两个存储库之一上具有单独的本地分支跟踪分支，例如`master-open`轨道`open-foobar/master`，而`master-enterprise`轨道`enterprise-foobar/master`
5.  您在分支中提交新的开放内容`master-open`，然后将其推送到开放存储库
6.  您合并`master-open`到`master-enterprise`，这意味着您将来自开放存储库的所有提交包含在私有存储库中
7.  您在分支中提交新的私有内容`master-enterprise`，然后将其推送到开放的存储库，确保您不会意外地将这些提交合并到`master-open`分支中。
8.  当您想将私有提交包含到开放版本中时，您可以使用`git cherry-pick <commit-id>`仅复制提交而不暴露它来自私有分支的事实

这个工作流主要集中在 git 上，但它可以很容易地适应任何其他 SCM 系统。

对于第二部分，默认情况下，根据明确授予您所创建代码的所有版权的合同，您未付费的人提供的补丁将版权保留给代码的原始作者。这意味着除非他们授予您代码许可，否则您不能将其包含在您的私人分叉中。通常，这甚至不会授予您将其包含在开源项目中的许可，除非项目许可或补丁提交过程中以某种方式提及（*通过单击提交按钮您授予许可......*）。Apache 许可证在这里很好，因为它明确提到*提交的补丁*项目会自动获得许可，以便它们可以包含在代码中。我没有阅读zlib许可证，所以我不能说它是否有类似的条款；如果不确定包含一些要求用户同意他们授予您在项目许可下将任何补丁提交包含到开源项目中的权利的文本。

如果您还想将提交的补丁包含到您的私人项目中，那么您**必须**要求获得该代码的版权许可，*以便包含在其代码的任何私人衍生品中*。有关更多详细信息和一些示例，请参阅[Wikipedia 关于 CLA 的文章。](http://en.wikipedia.org/wiki/Contributor_License_Agreement)您可以查看[Project Harmony](http://harmonyagreements.org/)的一些“标准”CLA。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:36:51.717

Apache 小组和其他组织要求代码提交者“签署”任何更改的所有权。你也需要这样做。在您接受修复或增强之前，他们必须签署代码。

# visual-c++ - 除了 VC++ 2005 可再发行组件之外，部署还需要什么？

> ID：14131878
> 
> 赞同：1
> 
> 时间：2013-01-03T01:27:27.433
> 
> 标签：visual-c++, deployment, visual-studio-2005

我最近遇到了一个硬盘故障。我从头开始重新安装 Win XP，更新到 SP3，并运行我之前一直运行的相同 vcredist_x86.exe 来安装 Visual C++ 组件。它似乎可以安装...但是我的所有需要​​基本 VC++ DLL 的可执行文件都不会运行——它们都会给出我们许多人熟悉的“应用程序配置不正确”的消息。

如果我运行 Dependency Walker，我可以看到使用 VC++ 2005 构建的所有可执行文件都无法获取 MFC80.dll、MSVCRP80.dll、MSVCP80.dll 等文件。当我查看 Windows\WinSxS 文件夹时，那里似乎是在正确位置包含这些文件的文件夹。这些可执行文件在几周前运行良好，所以我知道它们的清单没问题。

什么可能导致所有这些应用程序无法运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:29:32.033

确保使用了正确的最新版本的可再发行组件和/或与用于构建可执行文件的版本相匹配。另请注意，vcredist_x86.exe 文件的版本号与安装在 WinSxS 文件夹中的文件的版本不同。[这](https://stackoverflow.com/questions/8913543/why-installing-vcredist-x86-exe-doesnt-fix-sidebyside-error-when-i-develop-an-e)对于解决版本问题非常有用。

# x86 - 一次添加 2 个或 4 个甚至更多短值

> ID：14131883
> 
> 赞同：0
> 
> 时间：2013-01-03T01:28:11.257
> 
> 标签：x86, sse, simd

现代 CPU 中是否有任何指令可以一次添加（例如）4 个`short`（16 位）值并将其存储在一个`int`值（32 位）中？这 4 个值按顺序放置，并且可以与任何块大小对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:05:41.297

没有什么完全符合您的要求 AFAIK - 对于 x86 (SSE)，最接近的可能是[pmaddwd](http://msdn.microsoft.com/en-us/library/k87x524b%28v=vs.71%29.aspx#vcref_mm_madd_epi16) ( `_mm_madd_epi16()`) （乘数为 1）。

# java - 为什么即使元素在数组中，这种二分搜索也会返回 -1

> ID：14131896
> 
> 赞同：3
> 
> 时间：2013-01-03T01:29:56.520
> 
> 标签：java, binary-search

它打印出 -1 我可能会错过这是如何发生的，因为“德国”肯定在数组中

```
 public class A 
    {
        static PrintWriter pw = new PrintWriter(System.out, true); 

        public static void main(String[] args) throws IOException 
        {
            String[] a = new String[4];
            a[0]="India";
            a[1]="Italy";
            a[2]="Germany";
            a[3]="India";

            pw.println(Arrays.binarySearch(a, "Germany"));

        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-03T01:31:17.887

二进制搜索仅适用于已排序的数组。

[数组 API](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#binarySearch%28java.lang.Object%5B%5D,%20int,%20int,%20java.lang.Object%29)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T01:32:19.913

二进制搜索需要对数组进行排序（堆）。您可以使用[Arrays.sort()](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D%29)：

```
public class A 
{
    static PrintWriter pw = new PrintWriter(System.out, true); 

    public static void main(String[] args) throws IOException 
    {
        String[] a = new String[4];
        a[0]="India";
        a[1]="Italy";
        a[2]="Germany";
        a[3]="India";

        Arrays.sort(a);

        pw.println(Arrays.binarySearch(a, "Germany"));

    }
} 
```

请注意，这要求元素类型要么是原始类型，要么是接口[Comparable<T>](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)的实现，这适用于[String](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T01:32:52.857

必须对列表进行排序才能使用二进制搜索

# android - Nexus 4 上的极端相机延迟

> ID：14131900
> 
> 赞同：5
> 
> 时间：2013-01-03T01:30:31.263
> 
> 标签：android, android-camera, nexus-4

使用以下非常简单的相机预览活动（[来自此处的 google 示例](http://developer.android.com/reference/android/view/TextureView.html)），Nexus 4 相机明显慢于设备的标准相机应用程序：

```
public class LiveCameraActivity extends Activity implements TextureView.SurfaceTextureListener {
      private Camera mCamera;
      private TextureView mTextureView;

      protected void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);

          mTextureView = new TextureView(this);
          mTextureView.setSurfaceTextureListener(this);

          setContentView(mTextureView);
      }

      public void onSurfaceTextureAvailable(SurfaceTexture surface, int width, int height) {
          mCamera = Camera.open();

          try {
              mCamera.setPreviewTexture(surface);
              mCamera.startPreview();
          } catch (IOException ioe) {
              // Something bad happened
          }
      }

      public void onSurfaceTextureSizeChanged(SurfaceTexture surface, int width, int height) {
          // Ignored, Camera does all the work for us
      }

      public boolean onSurfaceTextureDestroyed(SurfaceTexture surface) {
          mCamera.stopPreview();
          mCamera.release();
          return true;
      }

      public void onSurfaceTextureUpdated(SurfaceTexture surface) {
          // Invoked every time there's a new Camera preview frame
      }
  } 
```

我在 Nexus 4 上的应用程序的相机速度一直存在问题，但我在其他设备上没有看到这个问题。我担心这是 Jelly Bean 4.2 的差异，但运行 JB4.2 的 Galaxy Nexus 手机可以正常工作，没有延迟。我意识到这个示例代码使用了 TextureView，但是其他手机在这个示例中没有遇到延迟。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T19:28:26.200

我发现通过[将录制提示设置为 true](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setRecordingHint%28boolean%29)可以将预览帧速率提高到正常速率，但这会严重降低相机性能，尤其是在色彩饱和度和对比度方面的中低光情况下（我对质量感到震惊考虑到这是谷歌与 iPhone 5 和她的优质相机竞争的最新和最伟大的尝试……[等不及 X Phone 了](http://www.pcmag.com/article2/0,2817,2413528,00.asp)）。

这**不是**问题的解决方案，但对于希望避免令人震惊的帧速率的开发人员来说，它是一种创可贴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T19:46:29.490

如果您将图片大小设置为 3264x2448，这将解决它。即使您从不拍照，图片大小也很重要，因为默认情况下启用了 ZSL。默认图片大小为 640x480，这会导致预览帧速率变慢。禁用 ZSL 会使预览速度更快，这就是为什么将录制命中设置为 true 会有所帮助，启用 HDR 会做同样的事情。

# c - 从 C 调用 Fortran 函数时的 EXC_BAD_ACCESS

> ID：14131903
> 
> 赞同：1
> 
> 时间：2013-01-03T01:30:42.447
> 
> 标签：c, fortran, fortran-iso-c-binding

我环顾四周，虽然有很多 EXC_BAD_ACCESS 问题，但都没有帮助。

我正在使用 Mountain Lion（我认为是 OSX 10.8？）和 PGI 12。

我似乎无法从 C 中调用 fortran 函数，我写了一个简化的案例，似乎我无法传递整数。

我的fortran函数是：

```
 1 integer function smallFortran(a) result(res) bind(c,name='smallFortran_')
  2 !integer function smallFortran(a) result(res)
  3     
  4     use ISO_C_BINDING
  5     implicit none
  6     
  7     integer(kind=c_int), intent(IN) :: a
  8     !integer, intent(IN) :: a
  9     
 10     print *,'A = ', a
 11     res = a;
 12 
 13 endfunction smallFortran 
```

我的 C 函数是，

```
int main() {
   int ier=7;
   ier = smallFortran_(8);
} 
```

建吧。。

```
matt@pontus:diffFst$ make                                                                                                               
pgcc -c cDoDiffFst.c                                                                                                                    
PGC-W-0267-#warning --  "Unsupported compiler detected" (/usr/include/sys/cdefs.h: 81)                                                  
PGC/x86-64 OSX 12.9-0: compilation completed with warnings                                                                              
pgcc -g -O0 -traceback -o cDoDiffFst cDoDiffFst.o smallFortran.o -lpgf90 -lpghpf2 -lpgf90rtl -lpgftnrtl -lpghpf_rpm 
```

（我希望警告不是导致我的问题的原因，[PGI 用户论坛](http://www.pgroup.com/userforum/viewtopic.php?t=3535)对此作出回应，说他们将发送文件的更新版本，但我还没有得到回复。而且不知道为什么 PGI 需要这样许多额外的库要指定）

当我在调试器中运行它时..

```
matt@pontus:diffFst$ gdb cDoDiffFst                                                                                                     
(gdb) run
Starting program: /Users/matt/aurams/trunk/utils/diffFst/cDoDiffFst 
Reading symbols for shared libraries +............................. done

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x0000000000000008
0x0000000100001906 in _smallFortran_ (a=Cannot access memory at address 0x8
) at smallFortran.f90:10
10              print *,'A = ', a
(gdb) 
```

我完全迷路了，为什么我不能发送一个int？我试过给一个整数赋值并发送它，没有骰子。我已经尝试将其作为子程序，我尝试过没有返回值.. 没有任何效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T06:16:34.660

这是一个替代解决方案，展示了如何编写 Fortran 以匹配问题的原始 C。关键是`value`声明上的限定符。使用 Fortran ISO C 绑定，您可以匹配 C 传递参数的各种方式。您还可以取消例程名称中的下划线......这是`name`关键字 of的目的`bind`。

调用中不带下划线的 C 代码：

```
int main() {
   int ier=7;
   ier = smallFortran (8);
} 
```

和匹配的 Fortran：

```
function smallFortran(a) result(res) bind(c,name='smallFortran')

     use ISO_C_BINDING
     implicit none

     integer(kind=c_int), intent(IN), value :: a
     integer(kind=c_int) :: res

     print *,'A = ', a
     res = a;

 endfunction smallFortran 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T01:52:02.940

错误应该清楚出了什么问题；`smallFortran_`期望它的参数通过引用传递（就像fortran中的所有参数一样——注意我在这里有点快和松散），并尝试访问指针处的数据`8`，但失败了。修复很容易；该函数需要一个指针，所以给它一个：

```
int main() {
  int ier = 7;
  int arg = 8;
  ier = smallFortran_(&arg);
} 
```

这假设 fortran`integer`类型对应于`int`带有相关编译器的 C；你可能需要另外做`arg`一个`long`。

# python - 获取“使用 python-stompy（轨道）发送数据时的闹钟”

> ID：14131908
> 
> 赞同：1
> 
> 时间：2013-01-03T01:31:28.160
> 
> 标签：python, stomp, orbited

我想做一个日志监视器，所以它监视日志并解析日志，然后保存到数据库并通过 stomp 推送该数据。是的，它成功推送数据，但是在我推送数据后，我收到错误消息`> "Alarm Clock" and the program stopped !`

这是我的代码：

```
def sent_msg(msg,channel)    
    try:
        stomp = Client(host="localhost", port=54123)
        stomp.connect()
        stomp.subscribe(channel)
        signal.alarm(1)
        stomp.put(msg, destination=channel)
        signal.alarm(0)
    except Exception,err:
        print err
    else:
        print 'succes'

try:
    msg = """
    <td>%s</td>
    <td>%s</td>
    <td>%s</td>
    <td>%s</td>
    <td>%s</td>
    """%(ip,dt,time,ua,req)
    sent_msg(msg,'/monitor_sqli')
except Exception, err:
    print err
else:
    print 'exist' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:22:09.330

在您的第一个块之后移动`signal.alarm(0)`到一个块，以确保无论成功与否都清除警报。`finally:``else:``stomp.push(msg, destination=channel)`

这样做将帮助您专注于失败的真正原因，我怀疑这是抛出异常的结果`stomp.push(msg, destination=channel)`- 可能是因为 stomp 库无法解析来自远程服务器的返回值。

# c# - Entity Framework 5 动态代理延迟加载：每次访问空导航属性都会命中数据库吗？

> ID：14131909
> 
> 赞同：4
> 
> 时间：2013-01-03T01:31:33.417
> 
> 标签：c#, entity-framework, entity-framework-5

[这](http://msdn.microsoft.com/en-us/data/hh949853.aspx)说明：

> 加载实体后，无论您使用延迟加载还是急切加载，对该实体的任何进一步查询都将直接从对象状态管理器加载它。

如果我使用代理根实体的导航属性延迟加载实体并且该可导航实体存在于数据库中，则对该可导航实体的所有后续调用都不会导致数据库命中，因为它已被加载。

我是否正确假设如果我尝试使用来自根实体代理的导航属性来延迟加载实体（或集合）并且它在数据库中*不*存在 - 因此返回 null 或空集合 - 所有后续尝试从同一个根实体延迟加载同一个实体总是会导致数据库命中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:57:34.533

不，它不会。和中的`IsLoaded`属性用于确定是否需要加载，实际值是否无关紧要。`DbCollectionEntry<TEntity, TElement>``DbReferenceEntry<TEntity, TProperty>``null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:52:05.663

不，因为它已经加载了空/空集合值。

# xna-4.0 - 无需支付 100 美元即可在 XBOX 360 上测试 XNA 4.0 游戏

> ID：14131912
> 
> 赞同：0
> 
> 时间：2013-01-03T01:31:48.087
> 
> 标签：xna-4.0, xbox360

> **可能重复：**
> [如何免费制作 Xbox Live 独立游戏？](https://stackoverflow.com/questions/13315320/how-can-i-make-xbox-live-indie-games-at-no-cost)

我已经使用 XNA 4.0 创建了一个 Xbox 360 游戏，我想在 XBOX 360 上对其进行测试。我不想支付 100 美元，并且在注册 XNA 创作者俱乐部时你不再获得第一年的免费。是有没有办法在 XBOX 360 上免费测试我的游戏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:30:20.830

如果你不是学生，那你就不走运了！如果您是学生，请访问[http://dreamspark.com](http://dreamspark.com)并注册一个帐户。Dreamspark 允许学生免费获得微软开发工具！

# mysql - MySQL & ColdFusion 混淆

> ID：14131914
> 
> 赞同：1
> 
> 时间：2013-01-03T01:32:05.690
> 
> 标签：mysql, apache-flex, coldfusion, flash-builder

我创建了一个查询来从 MySQL 服务器检索一些数据，并且当直接在服务器上运行它时，查询效果很好。当我通过像 Sequel Pro 这样的程序运行查询时，它也能很好地检索数据。但是，当插入 ColdFusion`.cfc`函数时，它会检索除时间戳字段之外的所有数据。我无法弄清楚为什么我的生活。这是 CF 函数后跟的查询。

```
SELECT tbl_names.*, max(tbl_timestamps.tstamp)
FROM tbl_names LEFT JOIN tbl_timestamps
ON tbl_names.name = tbl_timestamps.name
GROUP BY tbl_timestamps.name

<cffunction name="recent_timestamp" output="false" access="remote" returntype="any" >
    <cfset var qAllItems="">
    <cfquery name="qAllItems" datasource="TimeClock">
        SELECT tbl_names.*, max(tbl_timestamps.tstamp)
        FROM tbl_names LEFT JOIN tbl_timestamps
        ON tbl_names.name = tbl_timestamps.name
        GROUP BY tbl_timestamps.name
    </cfquery>
    <cfreturn qAllItems>
</cffunction> 
```

当我运行应用程序时，`.cfc`调用该函数时，它会提取除时间戳之外的所有数据。这是 Flash Builder 给我的错误：

“返回的对象包含无效的属性名称“max(tbl_timestamps.timestamp)”。如果您使用的是使用组函数的数据库查询，请尝试在该组函数的查询中使用别名。关于我如何做的任何想法解决这个问题？我已经尝试了所有我能找到的东西。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T05:16:27.930

只需为 max(tbl_timestamps.tstamp) 提供别名，它应该可以工作。我猜你正在处理远程调用 CFC 函数的 flex/flash 项目。实际上，这不是 ColdFusion 错误，而是 Flex/flash 构建无法解析列名称为 max(tbl_timestamps.tstamp) 的查询，因此提供别名将解决此问题。

您的查询可能如下所示。

```
 SELECT tbl_names.*, MAX(tbl_timestamps.tstamp) AS maxtstamp
        FROM tbl_names LEFT JOIN tbl_timestamps
        ON tbl_names.name = tbl_timestamps.name
        GROUP BY tbl_timestamps.name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T01:54:35.470

我很惊讶无论何时运行查询都不会出错，因为您的 select 子句具有 tbl_names.* 而您的 group by 子句具有 tbl_names.name。要修复它，请更改其中之一以使其匹配。

至于 max(tbl_timestamps.tstamp) 的别名，虽然在 ColdFusion 中运行查询不一定需要一个别名，但如果您想对该字段执行任何操作（例如显示它），则需要一个别名。

# asp.net-mvc-3 - mvc3 FormData创建页面会话丢失

> ID：14131919
> 
> 赞同：0
> 
> 时间：2013-01-03T01:32:31.863
> 
> 标签：asp.net-mvc-3, session, return-value

我有一个带有简单下拉框的表单，其中包含来自数据库的值**Post**那个下拉框的值被插入到会话中。**我认为在创建**页面上使用该会话值来自动填充某些类别，但不知何故，会话似乎在第二页上变为 NULL 或 Empty。

**表格 1 动作**

```
 [HttpPost]
      public ActionResult select(listings listing)
    {
        Session["address"] = ViewBag.CategoryID;

        return View();
    } 
```

**表格 1 视图**

```
<form method="post" action="create">  
@Html.DropDownList("CategoryID")
<input type="submit" value="step 2"/>            
  </form> 
```

**表格 2 动作**

```
public ActionResult Create()
    {
  // The "IF" works correctly but it seems like it is making the SESSION= NULL
         if (Session["address"] == null)
        {
           return RedirectToAction("sesserror");

        }
        string tt = (string)Session["address"];
        var getlisting = (from s in db.relistings where tt==s.address select s).FirstOrDefault();

        return View();
    } 
```

如果我转到 FORM 1 选择一个值并转到 FORM 2，问题看起来可能在 IF 语句中，它不会重定向我，因此 SESSION 有一个值并且它正在丢失它或其他东西。

**表格 2 查看/创建页面**

```
 <b>Step: 2 out of 2</b>  
@Session["address"] 
```

我有更多关于表格 2 的内容，但我专注于那部分。有没有更好的方法将值从一种形式传递到另一种形式？顺便说一下，Session 最初确实有效，因为如果我直接进入 Form 2，我会被重定向到 Sesserror。

# python - 为经常访问的对象创建挂钩

> ID：14131920
> 
> 赞同：3
> 
> 时间：2013-01-03T01:32:35.720
> 
> 标签：python

我有一个应用程序严重依赖一个`Context`实例，该实例充当执行给定计算的上下文的访问点。

如果我想提供对`Context`实例的访问权限，我可以：

1.  依靠`global`
2.  将`Context`作为参数传递给所有需要它的函数

我宁愿不使用`global`变量，并且将`Context`实例传递给所有函数既麻烦又冗长。

您将如何“隐藏，但可以访问”计算`Context`？

例如，想象一下`Context`根据不同的数据简单地计算行星的状态（位置和速度）。

```
class Context(object):
 def state(self, planet, epoch):
  """base class --- suppose `state` is meant
     to return a tuple of vectors."""
  raise NotImplementedError("provide an implementation!")

class DE405Context(Context):
"""Concrete context using DE405 planetary ephemeris"""
 def state(self, planet, epoch):
   """suppose that de405 reader exists and can provide
      the required (position, velocity) tuple."""
   return de405reader(planet, epoch)

def angular_momentum(planet, epoch, context):
 """suppose we care about the angular momentum of the planet,
    and that `cross` exists"""
 r, v = context.state(planet, epoch)
 return cross(r, v)

# a second alternative, a "Calculator" class that contains the context
class Calculator(object):

 def __init__(self, context):
  self._ctx = context

 def angular_momentum(self, planet, epoch):
  r, v = self._ctx.state(planet, epoch)
  return cross(r, v)

# use as follows:
my_context = DE405Context()
now = now() # assume this function returns an epoch
# first case:
print angular_momentum("Saturn", now, my_context)
# second case:
calculator = Calculator(my_context)
print calculator.angular_momentum("Saturn", now) 
```

当然，我可以将所有的操作直接添加到“上下文”中，但感觉不对。

在现实生活中，`Context`不仅计算行星的位置！它计算更多的东西，并充当大量数据的访问点。

所以，为了让我的问题更简洁：你如何处理需要被许多类访问的对象？

我目前正在探索：python 的上下文管理器，但运气不佳。我还考虑过直接向所有函数动态添加属性“上下文”（函数是对象，因此它们可以拥有对任意对象的访问点），即：

```
def angular_momentum(self, planet, epoch):
 r, v = angular_momentum.ctx.state(planet, epoch)
 return cross(r, v)

# somewhere before calling anything...
import angular_momentum
angular_momentum.ctx = my_context 
```

## 编辑

很棒的事情是使用`with`语句创建“计算上下文”，例如：

```
 with my_context:
  h = angular_momentum("Earth", now) 
```

当然，如果我简单地写，我已经可以做到这一点：

```
 with my_context as ctx:
  h = angular_momentum("Earth", now, ctx) # first implementation above 
```

也许这是[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)的变体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T01:46:30.927

您通常不想在 Python 中“隐藏”任何内容。您可能想向人类读者发出信号，他们应该将其视为“私有”，但这实际上只是意味着“即使您忽略此对象，您也应该能够理解我的 API”，而不是“您无法访问它”。

在 Python 中执行此操作的惯用方法是在它前面加上下划线——并且，如果您的模块可能曾经与 一起使用`from foo import *`，请添加一个`__all__`列出所有公共导出的显式全局。同样，这些都不会真正阻止任何人看到您的变量，甚至在`import foo`.

有关更多详细信息，请参阅[PEP 8](http://www.python.org/dev/peps/pep-0008/#global-variable-names)关于全局变量名称。

一些样式指南建议使用特殊前缀、全大写名称或其他特殊区分标记用于全局变量，但 PEP 8 明确表示约定是相同的，除了`__all__`和/或前导下划线。

同时，您想要的行为显然是全局变量的行为——每个人都隐式共享和引用的单个对象。试图将它伪装成任何东西都对你没有好处，除非可能通过`lint`你不应该通过的检查或代码审查。全局变量的所有问题都来自于每个人都隐式共享和引用的单个对象，而不是直接在`globals()`字典中或类似的东西中，因此任何像样的假全局变量都与真正的全局变量一样糟糕。如果这确实是您想要的行为，请将其设为全局变量。

把它放在一起：

```
# do not include _context here
__all__ = ['Context', 'DE405Context', 'Calculator', …

_context = Context() 
```

此外，当然，您可能希望将其命名为`_global_context`or even `_private_global_context`，而不是仅`_context`.

但是请记住，全局变量仍然是模块的成员，而不是整个宇宙的成员，因此即使是 public`context`仍然会像`foo.context`客户端代码执行`import foo`. 这可能正是您想要的。如果您想要一种让客户端脚本导入您的模块然后控制其行为的方法，那么也许`foo.context = foo.Context(…)`正是正确的方法。当然，这在多线程（或 gevent/coroutine/etc.）代码中不起作用，并且在其他各种情况下也不合适，但如果这不是问题，在某些情况下，这很好。

由于您在评论中提到了多线程：在简单的多线程样式中，您有长时间运行的作业，全局样式实际上工作得很好，只需进行微小的更改 - 将全局替换`Context`为[`threading.local`](http://docs.python.org/library/threading.html)包含`Context`. 即使在线程池处理小型作业的风格中，它也不会复杂得多。您将上下文附加到每个作业，然后当工作人员从队列中拉出作业时，它将线程本地上下文设置为该作业的上下文。

但是，我不确定多线程是否适合您的应用程序。当您的任务偶尔需要阻塞 IO 并且您希望能够在不停止其他任务的情况下做到这一点时，多线程在 Python 中非常有用——但是，多亏了 GIL，它对于并行化 CPU 工作几乎没有用处，听起来这就是您所要做的'正在寻找。多处理（无论是通过`multiprocessing`模块还是其他方式）可能更多是您所追求的。使用单独的流程，保持单独的上下文更加简单。（或者，您可以编写基于线程的代码并将其切换到多处理，保持`threading.local`变量不变，只更改生成新任务的方式，一切仍然正常。）

在上下文管理器的意义上提供一个“上下文”可能是有意义的，就像标准库[`decimal`](http://docs.python.org/library/decimal.html)模块的外部版本所做的那样，所以有人可以写：

```
with foo.Context(…):
    # do stuff under custom context
# back to default context 
```

然而，没有人能真正想到一个好的用例（尤其是因为，至少在幼稚的实现中，它实际上并没有解决线程/等问题），所以它没有被添加到标准库中，并且你可能也不需要它。

如果你想这样做，这很简单。如果您使用的是私有全局，只需将其添加到您的`Context`课程中：

```
def __enter__(self):
    global _context
    self._stashedcontext = _context
    _context = self
def __exit__(self, *args):
    global context
    _context = self._stashedcontext 
```

并且应该很明显如何将其调整为公共、线程本地等替代方案。

另一种选择是让一切都成为`Context`对象的成员。顶层模块函数然后只是委托给具有合理默认值的全局上下文。这正是标准库[`random`](http://docs.python.org/library/random.html)模块的工作方式——你可以创建 a`random.Random()`并调用`randrange`它，或者你可以只调用，它在全局默认对象`random.randrange()`上调用相同的东西。`random.Random()`

如果在导入时创建 a`Context`太繁重，特别是如果它可能不会被使用（因为没有人可能会调用全局函数），您可以使用单例模式在首次访问时创建它。但这很少是必要的。如果不是，代码是微不足道的。例如，从第 881 行开始的源[代码](http://hg.python.org/cpython/file/2.7/Lib/random.py)`random`是这样的：

```
_inst = Random()
seed = _inst.seed
random = _inst.random
uniform = _inst.uniform
… 
```

这就是它的全部。

最后，正如您所建议的，您可以使所有内容成为`Calculator`拥有`Context`对象的不同对象的成员。这是传统的 OOP 解决方案；过度使用它往往会让 Python 感觉像 Java，但在适当的时候使用它并不是一件坏事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T01:40:51.090

您可能会考虑使用代理对象，这是一个有助于创建对象代理的库：

[http://pypi.python.org/pypi/ProxyTypes](http://pypi.python.org/pypi/ProxyTypes)

Flask 为它的“current_app”、“request”和其他变量使用对象代理，引用它们所需要的只是：

```
from flask import request 
```

您可以创建一个对您的真实上下文的引用的代理对象，并使用线程本地来管理实例（如果这对您有用）。

# objective-c - 无法打开到 URL 的 ra_local 会话？

> ID：14131922
> 
> 赞同：1
> 
> 时间：2013-01-03T01:32:44.553
> 
> 标签：objective-c, xcode4.5

我有一个项目。我想要该项目的某种形式的源代码控制。

[我使用了How to add a new project to source control in Xcode 4中](https://stackoverflow.com/questions/5618686/how-to-add-a-new-project-to-source-control-in-xcode-4)的答案？

所以我点击管理器，存储库并添加一个新的存储库。然后我想导入我当前的项目。所以我点击右下角的导入，指向我的项目目录。我有。

我收到了这个错误：

```
svn: Unable to open an ra_local session to URL
svn: Unable to open repository 'file://localhost/business/Dropbox/badgers/BadgerNewFacebook/BadgerNew' 
```

我应该怎么办？

# jquery - 确定 jQuery JSON 对象是数组、字典还是值？

> ID：14131924
> 
> 赞同：0
> 
> 时间：2013-01-03T01:32:59.313
> 
> 标签：jquery, json

在我的 JSON（通过 检索`$.getJSON`）中，我有一个可以包含单个值、字典或数组的数据元素。我可以调用什么函数来获取它的类型？

# c++ - 代码块的调试宏

> ID：14131925
> 
> 赞同：4
> 
> 时间：2013-01-03T01:33:02.840
> 
> 标签：c++

我正在尝试创建一个仅在调试版本时才执行代码块的宏。我设法制作了一个仅在启用调试时才执行一行的代码，但我无法弄清楚如何执行整个代码块。

单行宏如下：

```
#include <iostream>

//error checking
#if defined(DEBUG) | defined(_DEBUG)
    #ifndef DBG_ONLY
         #define DBG_ONLY(x) (x)            
    #endif
#else
    #ifndef DBG_ONLY
        #define DBG_ONLY(x) 
    #endif
#endif 

int main () {

    DBG_ONLY(std::cout << "yar" << std::endl);
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T01:36:22.933

将宏包装在`do-while`循环中，以避免在条件语句中使用宏时出现问题，例如`if (cond) DBG_ONLY(i++; j--;)`. 它还为仅调试声明创建了一个新范围：

```
#if defined(DEBUG) | defined(_DEBUG)
    #ifndef DBG_ONLY
      #define DBG_ONLY(x) do { x } while (0)         
    #endif
#else
    #ifndef DBG_ONLY
      #define DBG_ONLY(x) 
    #endif
#endif 

int main () {
    DBG_ONLY(
        std::cout << "yar" << std::endl;
        std::cout << "yar" << std::endl;
        std::cout << "yar" << std::endl;
        std::cout << "yar" << std::endl;
        );
    return 0;
} 
```

如果您有类似的语句，这将失败`int i,j`。为此，我猜我们需要一个可变参数宏：

```
#if defined(DEBUG) | defined(_DEBUG)
    #ifndef DBG_ONLY
      #define DBG_ONLY(...) do { __VA_ARGS__; } while (0)
    #endif
#else
    #ifndef DBG_ONLY
      #define DBG_ONLY(...) 
    #endif
#endif 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T01:35:14.740

如果这是用于“任意”调试代码（而不是严格记录），那么一个粗略的选择是直接`#if`/ `#endif`。

```
#if defined(DEBUG) | defined(_DEBUG)
    #define DBG_ONLY
#endif 

...    

#ifdef DBG_ONLY
    // Blah blah blah
#endif 
```

这绝对比@perreal 的解决方案更丑陋，但它避免了任何范围界定问题，并且适用于所有语言变体（以及我们尚未考虑的任何其他问题！）。

它也是条件代码也是事实，因此有可能严重不同步（因为编译器并不总是检查它）。但这也适用于宏观解决方案。

还有一个优势；在一个不错的 IDE（例如 Eclipse CDT）中，您的调试代码将以不同的方式突出显示。

# windows-8 - 如何更改我的 Windows 8 发布者显示名称？

> ID：14131929
> 
> 赞同：7
> 
> 时间：2013-01-03T01:33:38.673
> 
> 标签：windows-8

我有一个注册的 Windows 8 开发者帐户。我没有发布任何应用程序或发送任何事件进行测试。我可以更改我最初要求的出版商名称吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T03:22:16.540

这个有可能。从[这里](http://msdn.microsoft.com/en-us/library/windows/apps/Hh967786.aspx)：

> 发布者显示名称是您的应用在 Windows 应用商店中列出的名称。
> 
> 注意 您可以在注册后更改此设置，但如果您决定这样做，则需要修改应用程序包中的该条目，上传更新的包，然后再次提交应用程序进行认证。

在此页面上，它还告诉您如何更改此信息。要访问您的开发者帐户信息，请登录您的开发者帐户，转到您的 Windows 应用商店仪表板，然后单击左侧菜单中配置文件下的“帐户”。

# error-handling - 当 error_reporting=off 时，AJAX 调用文件显示错误

> ID：14131936
> 
> 赞同：1
> 
> 时间：2013-01-03T01:34:17.447
> 
> 标签：error-handling, php, error-reporting

中`php.ini`，我的错误显示设置如下：

```
error_reporting = E_ALL & ~E_NOTICE & ~E_DEPRECATED
display_errors  = Off 
```

它适用于任何通常调用的文件，但是，如果使用 jQuery/AJAX 调用文件，我会收到如下错误：

> 严格标准：不应静态调用非静态方法 XML_Util::replaceEntities()，假设 $this 来自第 664 行 /usr/lib/php/XML/Util.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 XML_Util::createTagFromArray()，假设 $this 来自第 1231 行 /home/site/public_html/site/paypal/lib/Serializer/Serializer.php 中的不兼容上下文
> 
> 严格标准：不应静态调用非静态方法 XML_Util::attributesToString()，假设 $this 来自第 652 行 /usr/lib/php/XML/Util.php 中的不兼容上下文

可以假设，这破坏了我网站的某些部分，我该如何解决这个问题？

我正在运行 PHP 5.4.10

正在使用 Jquery 函数调用文件：`$.get`或`$.post`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T13:44:21.510

您正在使用的代码/库正在触发*严格标准*错误/通知/警告。

它的相关错误报告常量称为[`E_STRICT`^(*Docs*)](http://php.net/errorfunc.constants)，它是[在 PHP 5.0 ^(*Docs*)](http://php.net/migrating5.errorrep)中引入的。

由于 PHP 5.4`E_STRICT`是 的一部分`E_ALL`，所以如果你配置你做的方式，它也必须从中删除：

```
error_reporting = E_ALL & ~E_NOTICE & ~E_DEPRECATED & ~E_STRICT
                                                    ^^^^^^^^^^^ 
```

因此，如果您`E_STRICT`从生产错误设置中排除，则不应再记录这些*严格标准*错误 - 这可能就像您在早期的 PHP 5.3 版本中遇到的那样。

此外，您应该联系库的供应商并请求使代码*`E_STRICT`兼容*。这是一种很好的做法，也向您展示了某些代码具有一定的质量。

对于您的开发，您同样应该使您的代码`E_STRICT`兼容，修复任何导致*严格标准*错误的地方。

同样适用于`E_NOTICE`and `E_DEPRECATED`，您应该在您的开发环境中启用这些消息并修复所有报告的问题。这样可以避免您太容易获得越来越多的错误。

来自`php.ini`：

```
;;;;;;;;;;;;;;;;;;;
; Quick Reference ;
;;;;;;;;;;;;;;;;;;;
; The following are all the settings which are different in either the production
; or development versions of the INIs with respect to PHP's default behavior.
; Please see the actual settings later in the document for more details as to why
; we recommend these changes in PHP's behavior.

...

; error_reporting
;   Default Value: E_ALL & ~E_NOTICE & ~E_STRICT & ~E_DEPRECATED
;   Development Value: E_ALL
;   Production Value: E_ALL & ~E_DEPRECATED & ~E_STRICT 
```

从您在问题中提供的信息中不清楚您看到输出而不是记录的错误消息的原因。这可能有多种原因，

*   最直接的原因是您没有正确禁用错误显示 - 或在运行时再次启用它（该设置也可以从 PHP 代码中更改）。
*   错误显示*已*禁用，但仍有[一些错误处理程序^(*文档*)](http://php.net/function.set-error-handler)正在显示它们。

因此，除了错误级别设置之外，您的这部分问题还需要您进行更多故障排除，以找出显示错误消息的原因。

* * *

*也可以看看：*

*   [如何禁用 E_STRICT](https://stackoverflow.com/q/2851004/367456)（2010 年 5 月 17 日；由 rtacconi 提供）
*   [错误报告 - PHP 的正确方法](http://www.phptherightway.com/#error_reporting)

# facebook - 如何让 Facebook 应用页面在移动设备上可见？

> ID：14131937
> 
> 赞同：1
> 
> 时间：2013-01-03T01:34:28.400
> 
> 标签：facebook, mobile, tabs

在我客户的粉丝专页上，第三方应用程序正在运行竞赛。我怎样才能让这个 FB 比赛页面在移动设备上可用？我在这里阅读了答案：

[http://facebook.stackoverflow.com/a/10833366/461119](http://facebook.stackoverflow.com/a/10833366/461119)

还

[Facebook SDK：在移动 Facebook 应用程序中找不到页面选项卡应用程序返回](https://stackoverflow.com/questions/9979577/)

我不明白。

`?ref-ts`是我们必须在 URL 末尾添加的查询参数吗？

“*它对浏览器有帮助，但对应用程序本身没有帮助。* ”是什么意思？

在手机上查看应用程序并单击它进入 FB 上的比赛页面会有所帮助吗？

另外，我找到了这个答案：

> 像宣传的那样工作！谢谢你。我得到了 404，但只需在我的重定向 URL 中添加 ref=ts（我强制用户将我的应用程序用作页面选项卡）即可修复它！——纪尧姆·布德罗

在上面的第一个链接下，但是是什么迫使用户将应用程序用作页面选项卡？

如何将 App 设置为页面选项卡？

有点困惑。

我在网上大力搜索，但没有得到任何明确的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T12:48:52.773

我对这个问题的观察：

*   似乎这是一个 ANDROID 问题，在 iPhone 上工作正常
*   使用 Bit.ly 等链接重定向服务（其中 bit.ly 链接包含 ref=ts）

我为 ANDROID 开发人员向 Facebook 发送了一封电子邮件。

> 你好，
> 
> 我 iPhone 的用户同事可以使用 ref=ts 参数打开指向页面选项卡应用程序的链接，但在 Android 上我们不能；-(
> 
> 我们能够做到这一点的唯一方法是当应用程序的链接位于 bit.ly 重定向链接下时
> 
> 问题仅在于通过 Facebook 应用程序打开链接时。
> 
> 谢谢
> 
> 让我们知道
> 
> 最大限度*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T16:31:00.107

[您可以使用下一个链接https://apps.facebook.com/YOUR-APP-ID](https://apps.facebook.com/YOUR-APP-ID)访问您的应用程序

这样，您可以毫无问题地从桌面或移动设备访问。

# c++ - 关闭 Eclipse 错误（不是真正的错误）

> ID：14131939
> 
> 赞同：22
> 
> 时间：2013-01-03T01:34:52.450
> 
> 标签：c++, c++11, eclipse-cdt

> **可能重复：**
> [禁用 Eclipse 的错误发现。（科丹误报）](https://stackoverflow.com/questions/13458396/disable-eclipses-error-discovery-c11-false-positives)

由于 GCC 4.8/Clang 3.3 C++ 支持远远领先于 Eclipse 在语法检查方面所做的工作（在功能支持方面），Eclipse 将许多事情标记为实际上是有效代码的错误（模板别名恰好是我的主要问题，但是还有其他问题）。

当我编译（或尝试编译时，遇到一些问题，请参阅[此处](https://stackoverflow.com/questions/14118224/clang-linker-issues-from-source-to-gcc-snapshot)了解更多信息）时，任何编译器恰好正在执行它的工作，并且它的错误会通过它传播，但它说好的代码仍然是下划线（红色和金蜘蛛分别用于错误和警告），这使得更难看到发生了什么。

有没有办法摆脱这些错误/警告？

更好的方法是仅在编译尝试后消除警告，只要代码的相关部分不更改，但通常仍保持启用状态。

（实际上最好的 Eclipse 插件支持所有，或者至少比 Juno 本身支持更多的 C++11，但我似乎找不到）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-03T08:18:30.663

**更新：** 自从我发布原始答案以来已经很长时间了，它已经过时了。我今天（2014 年 3 月 15 日）仔细检查了：在 Eclipse Kepler（内部版本号 20130614-0229）中，足以

*   在*Project > Properties > C/C++ Build > Settings*下添加，然后在*Tool Settings*选项卡 上添加*GCC C++ Compiler > Miscellaneous*`-std=c++11`标志，

*   然后在*Discovery*选项卡上的*Window > Preferences > C/C++ > Build > Settings*下选择*CDT GCC Built-in Compiler Settings*并将标志添加到*Command 以获取编译器规格*。在我的机器上，更改后它看起来像这样： **`-std=c++11`**

     ***`${COMMAND} -E -P -v -dD -std=c++11 "${INPUTS}"`*** 
****   清理并重建您的项目**和**索引（*Project > C/C++ Index > Rebuild*），因为 Eclipse 倾向于缓存错误消息并显示它们，即使它们在更改设置后消失了。*** 

 ****这肯定适用于我的机器。**如果它不在你的身上，那么你可能想试一试：[C++11 full support on Eclipse](https://stackoverflow.com/q/22074724/341970)虽然我不确定这种方法的正确性，也没有必要在我的机器上这样做。截至 2014 年 3 月 7 日，用户[声称](https://stackoverflow.com/questions/22074724/c11-full-support-on-eclipse#comment33807529_22074724)它对他们有帮助，而上述方法没有。

* * *

[原来的帖子，现在已经过时了：]

 ~~这些虚假错误来自[Codan](http://wiki.eclipse.org/CDT/designs/StaticAnalysis)。整件事是因为 Codan 和编译器对 C++ 的理解不同，*而*Codan 是[错误](http://www.eclipse.org/forums/index.php/mv/tree/274600/776516/#page_top)的。

**可能的解决方法**

1.  单击项目属性，然后单击*C/C++ General > Code Analysis > Syntax and Semantic Errors*并取消选择您遇到的任何错误错误。缺点：你很可能最终会一一禁用大部分错误和警告，这很烦人。

2.  *在C/C++ General > Code Analysis > Syntax and Semantic Errors*处完全禁用静态分析。您不会从 Codan 获得真正的错误，而只会在稍后从编译器中获得。

它们都不是解决方案，但至少您仍然可以使用 Eclipse IDE。

 ~~* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T06:39:54.880

转到 Window->Preferences 将分析写入搜索字段选择 C/C++->Code Analysis ，您可以在此处关闭所有内容。~~~~**

# git - 将 git 存储库移动到另一个 github 用户

> ID：14131940
> 
> 赞同：27
> 
> 时间：2013-01-03T01:35:01.400
> 
> 标签：git, version-control, github

谷歌上有很多答案都指向同一个方向，但是当谈到版本控制时，我不想尝试任何东西然后弄乱我的存储库。

我已经在 GitHub 上建立了一个存储库，并且想将它移动到另一个用户，以便我可以关闭存储库。一旦它属于他的帐户，他就会邀请我参加回购。我想这是与客户合作的一个很常见的用例——一旦你完成了项目，你就把它交给他们。

现在，假设这是可能的，我将如何更改项目中的本地 Git 设置，以便我现在推入/拉出新位置？而且，通过移动回购，我会丢失提交历史吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-03T16:33:36.123

以下任何一项都将起作用：

*   只需将 repo 的所有权转让给另一个用户，让他们将您添加为协作者。

*   如果有人分叉您的仓库，那么您删除原始仓库，他们的分叉仍然存在，*除非它是私有仓库*。然后，他们可以将您添加为他们 fork 存储库的合作者。

*   另一个用户可以简单地克隆你的 repo（提交完整），在 GitHub 上创建一个新的 repo，添加新 repo 的远程信息，并将你的 repo 推送到他们的新 repo。（然后，他们可以将您添加为协作者。）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-03T02:00:24.203

要回答问题：

1.  你不会丢失任何东西 - 甚至不会提交历史记录。Git 的重点在于它是去中心化的——每个拥有存储库副本的人都拥有一切。只是新的回购。

2.  更改 git 设置以推送到新存储库很容易。您可以使用

    ```
    git remote set-url origin git://new.url.here 
    ```

    或编辑`.git/config`文件。

我会说你应该：

1.  转移存储库的所有权（或让客户端分叉它）。
2.  更改您的 git 配置以推送到新存储库
3.  你完成了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-03T01:39:03.810

你为什么不在github中做呢？只需将所有权转让给新用户。转到 Github 上的设置。

> 转让所有权：将此 repo 转让给其他用户或您拥有管理员权限的组织。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-13T19:48:41.607

这也可以直接在 PC 上使用桌面版 GitHub 完成，无需安装 CLI。

如上面@citruspi 所述，如果您编辑配置文件，则您正在手动执行此命令为您执行的操作。

```
git remote set-url origin git://new.url.here 
```

如果您有 CLI，可以为您服务。

[https://stackoverflow.com/a/14132101/3099982](https://stackoverflow.com/a/14132101/3099982)

> 或编辑 .git/config 文件。

下面的步骤...

1.  在 Github 或 Github Desktop 中创建 /newRepo。
2.  将该 /newRepo 克隆到您的本地计算机（如果您没有在 Github Desktop 中创建它）。
3.  将要克隆的 repo 也克隆到本地机器上 /wantToCloneRepo。
4.  删除 /newRepo 中的 .git 文件夹。
5.  将文件从 /wantToCloneRepo 复制到本地文件夹 /newRepo
6.  编辑文件 /newRepo/.git/config ，其中远程“原始”URL 现在应该等于 Github 上的新目标。即... [https://github.com/DataAutomation/newRepo.git](https://github.com/DataAutomation/newRepo.git)
7.  查找用于说 fetch origin 的地方，它会说 Push。
8.  Push 它将保留您的提交历史记录，并且您将拥有一个新的 repo，而无需安装 CLI。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T01:37:58.337

你不会失去任何东西。这就是 git 的意义所在。项目的每个副本都有一个完整的 repo 副本——你有它，github 有它，任何分叉它的人都有它。

远程的配置只是 .git/config 文件中的一行：

```
 url = git@github.com:mattneub/Programming-iOS-Book-Examples.git 
```

您可以删除旧遥控器并创建一个新遥控器，但最简单的方法就是手动编辑该行。

这里没有什么神秘之处。.git 文件夹和您的存储库直接对您的视图开放。

# jquery - 将 Twitter Bootstrap 弹出框与 Highcharts 一起使用

> ID：14131945
> 
> 赞同：4
> 
> 时间：2013-01-03T01:35:57.410
> 
> 标签：jquery, twitter-bootstrap, highcharts

当用户将鼠标悬停在条形图中的条上时，我正在尝试使用**Highcharts实现****Twitter Bootstrap 弹出框组件。**我无法使用 Highcharts 原生的现有工具提示，因为我希望我的用户与弹出框内的内容进行交互，而您无法有效地使用 Highcharts 工具提示（例如单击链接）进行交互。

 **我遇到的问题是访问各个`rect`DOM 元素以添加必要的属性，例如`rel="popover"`和`data-content="foo"`这将使这项工作。

我有一个[JSFiddle](http://jsfiddle.net/axl163/L48xb/5/)，其中有悬停事件的伪代码。

我将不胜感激任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:26:59.393

你需要做两件事：

1.  加载图表后附加弹出框
2.  确保弹出框未附加在 SVG 中

    ```
     chart: {
            renderTo: 'container',
            type: 'bar',
            events: {
                load: function(e) {
                    $(".highcharts-tracker rect").popover({trigger:'hover', placement:'bottom', title:'Title!', content:'Content'}).hover(function() {
                        $('.popover').appendTo($(document.body));
                    });
                }
            }
        }, 
    ```

如果您希望它在点击时触发，则只需将其更改为：

```
 $(".highcharts-tracker rect").popover({trigger:'click', placement:'bottom', title:'Title!', content:'Content'}).click(function() {
                        $('.popover').appendTo($(document.body));
                    }); 
```

您将不得不进一步修改此代码以满足您的需要，但这应该可以帮助您开始。

工作示例：[JSfiddle](http://jsfiddle.net/L48xb/9/)**

# ios - Xcode：在表格中显示数据

> ID：14131951
> 
> 赞同：1
> 
> 时间：2013-01-03T01:36:25.423
> 
> 标签：ios, tableview

您好，我对编程领域比较陌生，并且一直在使用 lynda.com 来学习小项目的技能和实践。我听从了导师的指导，但我们的结果却大相径庭。我希望我的 NSMutable 数组中课程的“名称”字符串显示为表格中单元格的标题，但是当我加载应用程序时，什么也没有出现。请帮助一个无知的孩子！

这是我的类的代码，实现文件只包含我的属性的综合

```
#import "Class.h"

@implementation Course

@synthesize name,teacher,room;

@end 
```

这是我的 UITable 视图控制器类的代码

```
#import "ScheduleTableViewController.h"

@interface ScheduleTableViewController ()

@end

@implementation ScheduleTableViewController

NSMutableArray *classes;

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{

NSMutableArray *classes = [[NSMutableArray alloc]init];

Course *class = [[Course alloc]init];
[class setName:@"AP Psychology"];
[class setRoom:@"E203"];
[class setTeacher:@"Juiliette Forbes"];
[classes addObject:class];

[class setName:@"AP Literature"];
[class setTeacher:@"Kristen Holtz"];
[class setRoom:@"E207"];
[classes addObject:class];

[class setName:@"AP Physics"];
[class setTeacher:@"Peter Dalby"];
[class setRoom:@"D205"];
[classes addObject:class];

[super viewDidLoad];

}

- (void)viewDidUnload
{
[super viewDidUnload];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

return [classes count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath   *)indexPath
{
static NSString *CellIdentifier = @"ClassCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault
                                   reuseIdentifier:CellIdentifier];
             }
Course *current = [classes objectAtIndex:indexPath.row];
[cell.textLabel setText:[current name]];

return cell;
} 
```

任何帮助将不胜感激，希望我能跟上任何术语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T03:39:15.133

检查以确保您已正确设置表格单元格的标识符。

为此，请打开您的故事板编辑器并转到您的表格视图。单击原型单元并打开实用程序窗格。检查“标识符”是否为“ClassCell”。

接下来，确保您的 ViewController 是 UITableViewController 并实现 UITableViewDelegate 协议。目前尚不清楚你是否已经这样做了。

您的 ScheduleTableViewController.h 应该是这样的：

```
#import <UIKit/UIKit.h>

@interface ScheduleTableViewController : UITableViewController <UITableViewDelegate>
// code
@end 
```

另外，我在这里注意到了这一点：

```
NSMutableArray *classes = [[NSMutableArray alloc]init];

Course *class = [[Course alloc]init];
[class setName:@"AP Psychology"];
[class setRoom:@"E203"];
[class setTeacher:@"Juiliette Forbes"];
[classes addObject:class];

[class setName:@"AP Literature"];
[class setTeacher:@"Kristen Holtz"];
[class setRoom:@"E207"];
[classes addObject:class];

[class setName:@"AP Physics"];
[class setTeacher:@"Peter Dalby"];
[class setRoom:@"D205"];
[classes addObject:class]; 
```

由于 *class 是指向课程对象的指针，因此您实际上只创建了一个，然后您继续编辑其属性并将其重新添加到数组中。像这样创建多个类对象：

```
Course *class1 = [[Course alloc] init];
// set properties
Course *class2 = [[Course alloc] init];
// set properties
Course *class3 = [[Course alloc] init];
// set properties
[classes addObjects:class1, class2, class3, nil]; 
```

# bash - 将变量从 bash shell 传递到 sql 文件到 oracle 表

> ID：14131955
> 
> 赞同：2
> 
> 时间：2013-01-03T01:37:35.150
> 
> 标签：bash, oracle11g, sqlplus

我在文件中的`my .sh`文件（例如`ENV=$1 RELEASE_ID=$2`）中设置了变量`my.sh`。我`sqlplus`进入我的sql文件喜欢

```
sqlplus -S $username/password@destination @/path/copysetup/insert.sql 
```

我想`ENV=$1` `RELEASE_ID=$2`将从 unix 提示符调用的变量传递到我的 sql 文件中

```
copysetup.sh env01 release 1.0 
```

从我的 sql 文件中，我想将相同的变量传递到 oracle 表中

```
insert into table... 
```

有人可以协助如何将变量从 bash shell 脚本传递到 sql 文件并最终将其插入到我的 oracle 表中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T12:36:42.207

在命令行传递参数：

```
sqlplus -S $username/password@destination @/path/copysetup/insert.sql $ENV $RELEASE_ID 
```

然后在 SQL 脚本中它们变成 &1 和 &2 （确保你有`set scan on`在 SQL 脚本的顶部）

例如

```
set scan on
insert into foo (env, release) values ('&1', '&2');
commit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:48:35.797

假设您的 insert.sql 文件是您想要插入环境变量（或任何 bash 变量）的文件，您可以使用[sed](http://www.grymoire.com/Unix/Sed.html)查找/替换一些占位符文本为您想要的值。例如，如果您的 insert.sql 文件看起来像

```
INSERT INTO @mytable VALUES (1,'sometext'); 
```

您可以使用 sed在 bash 脚本中使用以下语法使用`@mytable`存储的数据查找/替换字符串`$MYVAR`

```
sed "s/@mytable/$MYVAR" insert.sql > modifiedinsert.sql 
```

现在这将生成一个新文件 modifiedinsert.sql，然后您将其传递给 sqlplus。

# xcode - OBJECTIVEFLICKR：未找到 systemconfiguration.h

> ID：14131958
> 
> 赞同：0
> 
> 时间：2013-01-03T01:38:43.553
> 
> 标签：xcode, flickr

我正在`ObjectiveFlickr`我的项目中实施，我对所有这些都非常陌生（包括 C 语言和 Xcode）。

我设法修复了一些编译错误，并且在我添加了一些支持文件以消除其他错误后，我只需要弹出这个错误：

> 未找到系统配置/系统配置.h 文件

我不知道这意味着什么，并且在发布到这里之前已经在网上做了很多搜索，但是解决另一个发布者问题的唯一方法是重新安装 Xcode。我有点怀疑这会解决这个问题，因为在出​​现这个错误之前我对 Xcode 没有任何问题。

任何人都可以用外行的方式提供一两个小费来帮助我克服这个问题吗？我一直在搜索 24 小时，但指向 Apple Developer 论坛的唯一链接不起作用，请自行查找。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:51:54.447

XCode 对于头文件的查看位置可能非常挑剔。

如果你有一个 .framework 文件夹，然后在你的项目中单击，选择“Build Settings”，然后寻找一个名为“Header Search Paths”的文件夹。把框架的路径放在那里，把右边的框从“非递归”改为“递归”。这应该可以进行构建，并且适用于几乎所有第三方库。

另一方面，如果您尝试使用您的应用程序编译库，请仔细检查您是否忘记在 XCode 项目中包含某些文件，或者它是否未标记为在项目中进行编译设置（.h 文件不算，但问题的根源可能是一些不应该存在的额外 .c 或 .m）。

如果所有其他方法都失败了，由于 XCode 项目编译成“平面”目录树，您可以尝试从 . h 被调用。这在我的某些情况下有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T06:20:08.517

iOS 中有一个名为“Systemconfiguration.framework”的框架。添加它可能会有很大帮助。希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T15:51:58.210

由于某种原因，我在标题声明周围的代码中有空白

```
 #import < SystemConfiguration/SystemConfiguration.h > 
```

我删除了它们，它起作用了。

# php - 从 shell 与 PHP 的 exec() 启动时程序的行为不同

> ID：14131967
> 
> 赞同：1
> 
> 时间：2013-01-03T01:40:15.980
> 
> 标签：php

在 shell 中键入命令时，我似乎有一个程序 [casperjs][1] 运行正常，

```
casperjs hello.js 
```

但不是当你使用`php's exec()`：

```
exec('casperjs hello.js'); 
```

jQuery 似乎没有被注入。

是否有可能`putenv()`需要定义更多内容？

**尝试：**我以 nginx 用户身份登录`su www-data`并再次从 shell 运行命令，它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T02:00:50.477

您必须考虑到，当从您的 shell 运行此程序时，PHP 可能不一定会导入您在配置文件中拥有的相同环境变量。PHP 只导入运行解释器的 shell 或 CGI 程序继承的环境变量。因此，当您`exec`从 PHP 运行函数时，这通常是您在该系统上配置的默认 shell。一旦 shell 启动，它通常会导入用户`.profile`在其主目录中定义的任何内容。对于 PHP，这包括解释器在其下运行的任何内容（例如，在 Apache 中，您可以使用`SetEnv VAR VALUE`.htaccess*或*httpd.conf*为*PHP 设置这些环境变量）。从命令行你必须导出你需要的那些变量`putenv``$_ENV`你可以在超全球中看到它们。

您必须从您正在使用的任何程序及其文档中自己弄清楚它需要哪些环境变量才能正常运行。恐怕我不熟悉您使用的内容或其要求。PHP 也无法控制外部程序运行所依赖的环境变量。但是您可以通过在命令行中键入来从 shell 中查看用户的环境，`env`并获得所有现有的 ENVIRONMENT 变量及其值。

# php - 随机图片形式数据库和评分系统

> ID：14131968
> 
> 赞同：1
> 
> 时间：2013-01-03T01:40:25.173
> 
> 标签：php, jquery, mysql

嘿，我的网站上有问题，我想显示一个评分低于的图像，然后当我对图像进行评分时，它应该更改为下一张图片。还有我的问题，因为它正确显示了下一张图片，但它不会更改评级系统中的 id，所以我一次又一次地对同一张图片进行评级源代码：

```
$place="upload/";
$first = mysql_query("SELECT * FROM images ORDER BY RAND()");

while($wor = mysql_fetch_array($first))
{
$id=$wor['id'];
$name = $wor['name'];
$image = $place . $wor['name'];
}

$number="1";
$wrongnumber="2";
$random = mysql_query("SELECT * FROM images ORDER BY RAND()");
$place="upload/";
echo '<script> ';
while($wor = mysql_fetch_array($random))
{
$ids=$wor['id'];
$name = $wor['name'];
$images = $place . $wor['name'];
$number=$number + 1;
$wrongnumber=$wrongnumber + 1;
echo 'function ' . 'changeSrc' . $number . '() '; ?>
{
document.getElementById("rand").src="<? echo $images;?>";
document.getElementById("button").onclick=changeSrc<? echo $wrongnumber;?>;
document.getElementById("102").id=<? echo $ids;?>;
}
<?
}
?> 
</script>
<img id="rand" src="<? echo $image;?>"><br>
    <div id="button" onclick="changeSrc2()">
    <div class="rate_widget" id="102">
    <div class="star_1 ratings_stars"></div>
    <div class="star_2 ratings_stars"></div>
    <div class="star_3 ratings_stars"></div>
    <div class="star_4 ratings_stars"></div>
    <div class="star_5 ratings_stars"></div>
    <div class="total_votes">vote data</div>
    </div>
    </div> 
```

输出代码：

```
// This is the first thing we add ------------------------------------------
$(document).ready(function() {

    $('.rate_widget').each(function(i) {
        var widget = this;
        var out_data = {
            widget_id : $(widget).attr('id'),
            fetch: 1
        };
        $.post(
            'ratings.php',
            out_data,
            function(INFO) {
                $(widget).data( 'fsr', INFO );
                set_votes(widget);
            },
            'json'
        );
    });

    $('.ratings_stars').hover(
        // Handles the mouseover
        function() {
            $(this).prevAll().andSelf().addClass('ratings_over');
            $(this).nextAll().removeClass('ratings_vote'); 
        },
        // Handles the mouseout
        function() {
            $(this).prevAll().andSelf().removeClass('ratings_over');
            // can't use 'this' because it wont contain the updated data
            set_votes($(this).parent());
        }
    );

    // This actually records the vote
    $('.ratings_stars').bind('click', function() {
        var star = this;
        var widget = $(this).parent();

        var clicked_data = {
            clicked_on : $(star).attr('class'),
            widget_id : $(star).parent().attr('id')
        };
        $.post(
            'ratings.php',
            clicked_data,
            function(INFO) {
                widget.data( 'fsr', INFO );
                set_votes(widget);
            },
            'json'
        ); 
        $.post(
            'setcookie.php',
            clicked_data,
            function(INFO) {
                widget.data( 'fsr', INFO );
                set_votes(widget);
            },
            'json'
        ); 
    });

});

function set_votes(widget) {

    var avg = $(widget).data('fsr').whole_avg;
    var votes = $(widget).data('fsr').number_votes;
    var exact = $(widget).data('fsr').dec_avg;

    window.console && console.log('and now in set_votes, it thinks the fsr is ' + $(widget).data('fsr').number_votes);

    $(widget).find('.star_' + avg).prevAll().andSelf().addClass('ratings_vote');
    $(widget).find('.star_' + avg).nextAll().removeClass('ratings_vote'); 
    $(widget).find('.total_votes').text( votes + ' votes recorded (' + exact + ' rating)' );
}
// END FIRST THING
</script><script> function changeSrc2() {
document.getElementById("rand").src="upload/1329614519daily_erotic_picdump_48-2-500x334.jpg";
document.getElementById("button").onclick=changeSrc3;
document.getElementsByClassName('rate_widget').id="125";

}
function changeSrc3() {
document.getElementById("rand").src="upload/1329614453tumblr_leb4pwc0Xc1qzy9ouo1_1280-1024x640.jpg";
document.getElementById("button").onclick=changeSrc4;
document.getElementsByClassName('rate_widget').id="65";

}
function changeSrc4() {
document.getElementById("rand").src="upload/1329614295daily_erotic_picdump_20-copy-500x333.jpg";
document.getElementById("button").onclick=changeSrc5;
document.getElementsByClassName('rate_widget').id="44";

}
function changeSrc5() {
document.getElementById("rand").src="upload/1329614301daily_erotic_picdump_80-2-500x375.jpg";
document.getElementById("button").onclick=changeSrc6;
document.getElementsByClassName('rate_widget').id="51";

}
function changeSrc6() {
document.getElementById("rand").src="upload/13296142941-3-450x600.jpg";
document.getElementById("button").onclick=changeSrc7;
document.getElementsByClassName('rate_widget').id="225";

}
function changeSrc7() {
document.getElementById("rand").src="upload/1329614284tumblr_l53l0qM6HB1qc4zlyo1_500-450x568.jpg";
document.getElementById("button").onclick=changeSrc8;
document.getElementsByClassName('rate_widget').id="19";

}
function changeSrc8() {
document.getElementById("rand").src="upload/1329614454tumblr_lro15r2fkh1qzlro6o1_500-450x301.jpg";
document.getElementById("button").onclick=changeSrc9;
document.getElementsByClassName('rate_widget').id="73";

}
function changeSrc9() {
document.getElementById("rand").src="upload/tumblr_mccaolmQPE1regfy1o1_500.jpg";
document.getElementById("button").onclick=changeSrc10;
document.getElementsByClassName('rate_widget').id="272";

}
function changeSrc10() {
document.getElementById("rand").src="upload/1329614297Pix-Mix-304-img012-500x312.jpg";
document.getElementById("button").onclick=changeSrc11;
document.getElementsByClassName('rate_widget').id="47";

}

</script>
<img id="rand" src="upload/1329614465tumblr_lscy8aqOFE1qg7sdjo1_500-450x322.jpg"><br>
    <div id="button" onclick="changeSrc2()">
    <div class="rate_widget" id="99">
    <div class="star_1 ratings_stars"></div>
    <div class="star_2 ratings_stars"></div>
    <div class="star_3 ratings_stars"></div>
    <div class="star_4 ratings_stars"></div>
    <div class="star_5 ratings_stars"></div>
    <div class="total_votes">vote data</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T20:05:14.657

```
document.getElementById("button").onclick=changeSrc<? echo $wrongnumber;?>; 
```

你不是少了括号吗？

```
document.getElementById("button").onclick=changeSrc<? echo $wrongnumber;?>(); 
```

顺便说一句，为了减少数据负载，在只检索一行时将 LIMIT 1 添加到您的 SQL 查询中。

# lisp - 根据列表中的对添加两个或更多列表

> ID：14131969
> 
> 赞同：1
> 
> 时间：2013-01-03T01:40:28.530
> 
> 标签：lisp, common-lisp, list-manipulation

我对函数式风格不太精通，也不想使用任何**集合**函数，所以我遇到了问题。我真的很挣扎我应该递归还是以不同的方式做。

我在列表中有一组对，如下所示：

```
((4 2) (3 1) (3 2) (2 4) etc...) 
```

在这对“（4 2）”中，第二个元素“2”告诉我它与哪些其他对**匹配**，在本例中为“（3 2）。所以，我使用它们的第一个元素将这两对加在一起，在这种情况下，它是“4”和“3”。新的对现在是 '(7 2)。**对于列表中的其他对，**依此类推。最后，它应该返回：

```
 ((7 2) (3 1) (2 4)) 
```

我不太关心订单。. 我已经有一个添加两个不同对的工作函数。这个函数的唯一假设是这些对是匹配的。

因此，我想要做的是操纵这个对列表以这些方式返回一个列表。

例子：

```
 take the list ((4 2) (3 1) (3 2) (2 4))    
 matching-pairs: '(4 2) and '(3 2)

 and then return --> ((7 2) (3 1) (2 4))

 take the list ((2 1) (3 2) (1 2) (5 1) (6 3))
 matching-pairs: '(2 1) and '(5 1)
                 '(3 2) and '(1 2)

 and then return --> ((7 1) (4 2) (6 3)) 
```

感谢您的时间和努力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T03:04:23.697

遍历您的列表并将每对存储`car`到一个列表中`assoc`，如下所示：

```
original: ((2 . 1) (3 . 2) (1 . 2) (5 . 1) (6 . 3))
new:      ((1 . (2 5))
           (2 . (3 1))
           (3 . (6)) 
```

然后将所有 s 相加`cdr`并翻转每一对得到：

```
 ((7 . 1) (4 . 2) (6 . 3)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T03:41:13.677

```
(defun get-pairs (alist index)
  (cond
   (alist
    (if (= (nth 1 (car alist)) index)
       (append (list (caar alist)) (get-pairs (cdr alist) index))
       (get-pairs (cdr alist) index)))
  ((not alist)
   'nil)))

(defun get-iterator (alist)
  (labels
    ((f (alist res)
        (cond
          (alist
            (if (member (nth 1 (car alist)) res)
              (f (cdr alist) res)
              (f (cdr alist) (append (cdar alist) res))))
          ((not alist)
            res))))
    (f alist 'nil)))

(defun get-value (alist)
  (loop for i in (get-iterator alist)
        collect (get-pairs alist i)))

(defun list-sum (alist)
  (loop for i in (get-value alist)
        collect (apply #'+ i)))

(defun match-value (alist)
  (loop for i in (get-iterator alist)
        for j in (list-sum alist)
        collect (append (list j) (list i))))

(defparameter *my-list* '((2 1) (3 1) (4 2) (5 2) (8 1) (9 2) (1 3) (0 3)))

(print (match-value *my-list*)) 
```

很抱歉代码混乱，但如果我正确理解问题，那应该可以解决问题。

# python - 字典加载不完整

> ID：14131970
> 
> 赞同：1
> 
> 时间：2013-01-03T01:40:38.997
> 
> 标签：python, dictionary, loading

披露：我是 python 新手。我正在尝试使用哈希值作为我的键和文件路径作为我的值来加载包含文件的字典。我添加了一个计数器以确保正确加载字典。运行下面的代码后，我有 78 个文件（计数器），但我的字典长度只有 47 个。为什么它没有加载所有 78 个文件？任何帮助是极大的赞赏！

```
for dirname, dirnames, filenames in os.walk('.'):
    for subdirname in dirnames:
        os.path.join(dirname, subdirname)

    for filename in filenames:
        m1 = hashlib.md5(filename)
        hValue = m1.hexdigest()
        pValue = os.path.join(dirname, filename)
        myDict[(hValue)]=pValue
        counter +=1

print len(myDict), "Dict Length"
print counter, "counter" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:46:24.563

1.  您调用`os.path.join`但不保留该值，因此您的第一个嵌套 for 循环是无用的。我不确定它的目的是什么。

2.  您不需要创建文件名的 md5 哈希，只需使用文件名作为 dict 的键。

3.  您可能缺少条目，因为您在不同的目录中有同名的文件。用作`os.path.join(dirname, filename)`字典的键。

更新：您正在散列文件名。散列内容：

```
m1 = hashlib.md5(open(filename).read()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T02:24:56.880

免责声明：这是我在 stackoverflow 中的第一个答案 :)

嗨@Jarid F，

我尝试编写一个完整的程序，以便您自己运行并查看。这是代码：

```
import os
import hashlib

myDict = {}
counter = 0
for dirname, dirnames, filenames in os.walk('.'):    
    for filename in filenames:
        #get the complete file location so that it's unique
        filename_with_path = os.path.join(dirname, filename)
        m1 = hashlib.md5(filename_with_path)
        #to hash the content of the file:
        #m1 = hashlib.md5(open(filename_with_path).read())
        hValue = m1.hexdigest()    
        myDict[hValue] = filename_with_path
        counter += 1

print len(myDict), "Dict Length"
print counter, "counter"
assert counter == len(myDict) 
```

补充@Ned Batchelder 提供的几点：

*   该行`myDict[(hValue)]=pValue`实际上是相同的，`myDict[hValue] = pValue`但我建议不要添加`()`in。当您开始使用元组时，这将导致混淆
*   散列文件名的内容可能不是您想要的，因为即使两个文件不同但它们具有相同的内容（如 2 个空文件），它们也会产生相同的散列值。我想这会破坏您在这里尝试实现的目的。相反，如果我可以建议，您可以`hash(hash(file_location)+hash(file_content)+some_secret_key)`改进散列键。（请原谅我在添加密钥作为额外安全措施时的谨慎）

祝你的代码好运，欢迎使用 python！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T01:46:25.730

**字典键必须是唯一的**（或者您将覆盖与键对应的值），并且您的方法不能保证唯一性。

由于您只是对文件名进行哈希处理，因此如果您的文件名不是唯一的，那么您的哈希值也不会是唯一的。尝试散列完整路径。

# java - Android NotifyDataSetChanged 和 BaseAdapter

> ID：14131982
> 
> 赞同：0
> 
> 时间：2013-01-03T01:42:08.180
> 
> 标签：java, android, listview, baseadapter

我对这个适配器元素（NotifyDataSetChanged）有点困惑，因为当我使用它时，我的列表视图没有更新。

我的工作场景：首先我创建了一个 void，这样每当我更新 listview 项目上的某些内容时，我就可以再次调用我的 void。

```
private void bindOrderListSorted(String sort){
    orderList = new ArrayList<Order>();
    mySQLiteAdapter = new SQLiteAdapter(context);
    mySQLiteAdapter.openToRead();
    String selectQuery = "MY QUERY...";
    Cursor cursor =mySQLiteAdapter.read(selectQuery); 
    while(cursor.moveToNext())
    {
        Order order = new Order();
        order.orderdDesc = cursor.getString(0);
        order.orderitemCode = cursor.getString(1);
        order.orderitemID = cursor.getString(2);
        order.orderPrice = cursor.getString(3);
        order.qtyOrdered = cursor.getString(4);
        order.stocksQty = cursor.getString(5);
        orderList.add(order);
    }
    cursor.close();
    mySQLiteAdapter.close();
    orderAdapter =new OrderListAdapter(this, orderList,context, sort);      
    listViewSearchPanel.setAdapter(orderAdapter);

} 
```

关于这个的主要问题是，每当我更新我的数据库中的某些内容并调用“bindOrderListSorted”时，我的列表视图都会更新，但正如预期的那样，它会再次重新绑定，列表视图的位置再次变为零。

那是我之前的逻辑，但后来我发现，如果我有很长的项目清单怎么办？这将不适合和用户友好，因为用户必须再次向下滚动才能找到他/她希望更新的项目

所以我了解了 NotifyDataSetChanged 并为此再次创建了一个 void

```
private void NotifyDataChangedOrderListSorted(String sort){
    orderList = new ArrayList<Order>();
    mySQLiteAdapter = new SQLiteAdapter(context);
    mySQLiteAdapter.openToRead();
    String selectQuery = "MY QUERY... SAME AS BEFORE";
    Cursor cursor =mySQLiteAdapter.read(selectQuery); 
    while(cursor.moveToNext())
    {
        Order order = new Order();
        order.orderdDesc = cursor.getString(0);
        order.orderitemCode = cursor.getString(1);
        order.orderitemID = cursor.getString(2);
        order.orderPrice = cursor.getString(3);
        order.qtyOrdered = cursor.getString(4);
        order.stocksQty = cursor.getString(5);
        orderList.add(order);
    }

    cursor.close();
    mySQLiteAdapter.close();
    orderAdapter =new OrderListAdapter(this, orderList,context, sort);  
    orderAdapter.notifyDataSetChanged();

} 
```

并在我更新某些内容时调用“NotifyDataChangedOrderListSorted”。

我的主要问题是我的列表视图没有更新。我很确定我的 orderList 具有更新的值，因为使用调试器和断点我期望的数据是预期的。这是为什么？

请随时提出建议或意见。如果您想查看我的基本适配器，请这样说..

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T01:58:10.323

您正在创建一个新的 List 和 ArrayAdapter，因此`notifyDataSetChanged()`没有效果，并且`orderAdapter`不再引用 ListView 中的适配器。你有两个选择：

1.  调用`setAdapter()`你的`NotifyDataChangedOrderListSorted()`方法：

    ```
    ...
    orderAdapter =new OrderListAdapter(this, orderList,context, sort);  
    listViewSearchPanel.setAdapter(orderAdapter); 
    ```

    但这等同于`bindOrderListSorted()`

2.  重用`orderList`和`orderAdapter`：

    ```
    private void NotifyDataChangedOrderListSorted(String sort){
        orderList.clear(); // Change this
        mySQLiteAdapter = new SQLiteAdapter(context);
        mySQLiteAdapter.openToRead();

        ...
        cursor.close();
        mySQLiteAdapter.close();
        orderAdapter.notifyDataSetChanged(); // Change this

    } 
    ```

但*实际上*你应该使用 CursorAdapter 因为它们更快更小......但这取决于你。

# javascript - 如果返回的内容不为空，则停止 setInterval

> ID：14131983
> 
> 赞同：2
> 
> 时间：2013-01-03T01:42:12.437
> 
> 标签：javascript, jquery, setinterval

所以我每5秒使用ajax通过POST检索一些数据，我想要实现的是如果php文件输出一些东西，然后以某种方式停止setInterval或将其设置为9999999。

这是我尝试过的：

```
var interval = DEFINEDFROMMYQL;
        $(function() {
            setInterval(function() {
                $.ajax({
                    type: "POST",
                    url: "url/file.php",
                    data: "whatever=2", 
                    success: function(html) {
                        $("#new").html(html);
                        if(html.lenght > 0) {
                            var interval = 99999999999999;
                        }
                   }
                });
            }, interval);
        }); 
```

我是新手，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:45:04.247

您可以使用[**clearInterval()**](http://www.w3schools.com/jsref/met_win_clearinterval.asp)停止启动的计时器`setInterval`并将**错字** `html.lenght`更正 为`html.length`

```
// var interval = DEFINEDFROMMYQL;
$(function() {
yourInterval = setInterval(function() {
$.ajax({
           type: "POST",
           url: "url/file.php",
           data: "whatever=2", 
           success: function(html) {
                    $("#new").html(html);  

                    if(html.length > 0) {
                    ///var interval = 99999999999999;
                      clearInterval(yourInterval);
                    }
             }
         });
   }, interval);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:49:46.767

您可以通过几种不同的方式处理此问题，但根据您的问题（“以某种方式停止 setinterval”），让我们将实现切换为 a[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)并将代码重构为我们可以回忆的函数。所以...

```
var interval = DEFINEDFROMMYQL;
$(function() {

    // establish a function we can recall
    function getDataFromServer(){
        // this encapsulates the original code in a function we can re-call
        // in a setTimeout later on (when applicable)
        $.ajax({
            type: "POST",
            url: "url/file.php",
            data: "whatever=2", 
            success: function(html) {
                $("#new").html(html);

                // only if the length is 0 do we re-queue the function
                // otherwise (becase it's setTimeout) it will just die
                // off and stop.
                if(html.lenght == 0) {
                    setTimeout(getDataFromServer, interval);
                }
           }
        });
    }
    // make an initial call to the function to get the ball rolling
    setTimeout(getDataFromServer, interval);
    // if you want it to execute immediately instead of wait out the interval,
    // replace the above line to simply:
    //getDataFromServer();
}); 
```

# mysql - MySql 用户吃 CPU 最终导致 CPU 过载

> ID：14131984
> 
> 赞同：0
> 
> 时间：2013-01-03T01:42:24.500
> 
> 标签：mysql, performance

我正在使用 vps 服务器，当我输入 top 时，我总是看到下面的代码

```
中央处理器 | 进程号 | 用户 | 命令
2.2 | 3954 | mysql | /usr/sbin/mysqld --basedir=/ --datadir=/var/lib/mysql --user=mysql --log-error=/var/lib/mysql/xxx.hostname.com.err --pid-文件=/var/lib/mysql/xxx.hostname.com.pid

```

我不明白这是什么？我怎样才能减少这个值？这是在重新启动后运行并且永不停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:45:09.383

除非我遗漏了一些东西，否则您正在 VPS 上运行[MySQL](http://www.mysql.com/) (mysqld) 数据库。

就 CPU 过载而言，我的猜测是某些东西正在对其运行 CPU 密集型查询。您可以查看[慢查询日志](http://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html)以查看是否有任何查询需要一段时间（即占用您的 CPU）。

日志通常在`/var/log/mysql/mysql-slow.log`.

# c# - 在 UserControl 中模拟 TrackBar 调整大小行为

> ID：14131985
> 
> 赞同：1
> 
> 时间：2013-01-03T01:42:26.180
> 
> 标签：c#, .net, winforms, visual-studio, user-controls

我目前正在`TrackBar`使用两个滑块实现双精度。事情进展顺利，但我不确定如何实现 a 的大小调整属性`TrackBar`。

在 Visual Studio 的 Winforms 编辑器中，a`TrackBar`设置`AutoSize`为`true`自动垂直调整大小，并且只为您提供水平调整大小的句柄（使用默认`Orientation`值）：

![轨迹栏示例](../Images/b539f6fcf3b8bded5118dadcad49aba7.png)

但是，我不确定如何使用我的自定义控件获取这些大小调整属性：

![自定义控件](../Images/8611bd31ac6d72612ec83fad1a626cc0.png)

自己调整大小目前工作正常，但我想效仿`TrackBar`的行为。我该怎么做呢？

# javascript - Internet Explorer 10 未重定向

> ID：14131990
> 
> 赞同：2
> 
> 时间：2013-01-03T01:43:17.970
> 
> 标签：javascript

随着 Internet Explorer 10 通过标记删除浏览器检测，我需要一种新方法将使用 Internet Explorer 的用户重定向到新页面

我决定使用

```
<body>
<script type="text/javascript">
if (navigator.appName == 'Microsoft Internet Explorer')
   {

    self.location = "http://<url>"

   }
</script> 
```

，但什么也没有发生。我确信有一些我现在看不到的小东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:47:49.993

改用这个：

```
window.location.href = "http://<url>"; 
```

正如 Vucko 所建议的，[这是一种使用 jQuery 检测 IE 的方法](https://stackoverflow.com/questions/2202305/how-do-i-detect-ie-8-with-jquery)。

[以下是 Microsoft 建议您检查 IE 的](http://msdn.microsoft.com/en-us/library/ms537509%28v=vs.85%29.aspx)方式。

# objective-c - 从另一个类调用方法 - NSTextView 不加载数据

> ID：14131993
> 
> 赞同：0
> 
> 时间：2013-01-03T01:44:06.880
> 
> 标签：objective-c, cocoa

我有 3 节课：

LocalRoom.m

```
- (void) handleNewConnection:(Connection*)connection {
    NSString* number = @"10";
    AppDelegate *theAppDelegate = [[NSApplication sharedApplication] delegate];
    [theAppDelegate connectionNumber:number currentZoneName:@"Zone1";
} 
```

**触发器 ----->**

AppDelegate.h

```
MyTableController *tableController; 
```

AppDelegate.m

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    tableController = [[MyTableController alloc] init];
}

- (void)connectionNumber:(NSString *)number zoneName:(NSString *)currentZoneName {
    if ([currentZoneName isEqualToString:zoneName1]) {
        [tableController changeConnections:number withRowNumber:0];
    }
} 
```

**触发器 ----->**

MyTableController.h

```
@interface MyTableController : NSControl {
IBOutlet NSTextField *zoneNameTextField;  
}
@property (retain) NSTableView * idTableView;
- (void) changeConnections:(NSString *)number withRowNumber:(int)rowNumber; 
```

MyTableController.m

```
- (void) changeConnections:(NSString *) number withRowNumber:(int) rowNumber{

    NSRunAlertPanel([NSString stringWithFormat:@"%d", rowNumber], number, @"", @"", @"");

    NSTableColumn *tableColumn = [[NSTableColumn alloc] initWithIdentifier: @"Connections"];

    [self tableView:idTableView setObjectValue:number forTableColumn:tableColumn row:rowNumber];

    [idTableView reloadData];

} 
```

我的 NSRunAlertPanel 提出了正确的值，但我的 NSTextView 没有改变。当我将 NSTableView 的“编辑”代码放在 MyTableController.m 的 IBAction 中时，它可以工作。我检查了 idTableView 是否为 NULL，确实如此。这很奇怪。因此，当 AppDelegate 运行 changeConnections 时，我感觉发生了一些奇怪的事情。我遇到了类似的问题，nstextfield 不返回数据。修复方法是通过`AppDelegate *theAppDelegate = [[NSApplication sharedApplication] delegate];`在这种情况下是否有类似的东西来初始化它？

您可能想知道为什么我只是不从 LocalRoom 调用 MyTableController，而是在应用程序委托中设置并找到了“zoneName1”。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:27:26.883

您没有显示所有代码，但`idTableView`被声明为**@property** of `MyTableController`，而不是**IBOutlet**。

那是`idTableView`NULL 强烈表明该`idTableView`属性永远不会设置为适当的表视图。不`IBOutlet`，因为它意味着它不能在 NIB/XIB 中连接。所以修复可能是让它成为一个插座并将它连接到NIB中。

显然，如果为 NULL`[idTableView reloadData]`则无效。`idTableView`

我假设您的 NIB 确实设置`MyTableController`为其表数据委托，这就是直接编辑可以工作的原因。

此外，尽管我认为这与您的问题无关，但对于最佳实践来说，制造一个新`NSTableColumn`的以在您现有的桌子上工作是没有意义的——您应该`[idTableView tableColumnWithIdentifier: @"Connections"]`改用它。

# algorithm - 寻找相似面孔的算法？

> ID：14131994
> 
> 赞同：7
> 
> 时间：2013-01-03T01:44:09.460
> 
> 标签：algorithm, computer-vision

我正在做一个个人项目，试图找到一个人的相似之处，给定一个其他人的照片数据库，所有这些照片都是以一致的方式拍摄的——人们直视相机，表情中性，头部没有倾斜（想想护照照片）。

我有一个系统可以在脸上放置 2d 坐标的标记，我想知道是否有任何已知的方法可以在给定这种方法的情况下找到与该脸相似的外观？

我发现了以下面部识别算法： http: [//www.face-rec.org/algorithms/](http://www.face-rec.org/algorithms/)

但没有人处理寻找相似物的具体任务。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T05:52:09.637

我相信你也可以尝试搜索“人脸验证”而不仅仅是“人脸识别”。这可能会给你更多相关的结果。

严格来说，这两者在科学文献中实际上是不同的东西，但有时被归为人脸识别。有关它们的差异和一些示例代码的详细信息，请查看此处：[http ://www.idiap.ch/~marcel/labs/faceverif.php](http://www.idiap.ch/~marcel/labs/faceverif.php)

但是，出于您的目的，Edvard 和 Ari 等其他人提出的建议也可以。基本上，他们建议使用 K-最近邻风格的人脸识别分类器。首先，您可以尝试一下。首先，为数据库中的每个人脸图像计算一个特征向量。一种可能使用的特性是本地二进制模式 (LBP)。您可以通过谷歌搜索找到代码。对您的查询图像执行相同的操作。现在，遍历所有特征向量，并使用欧几里德距离将它们与查询图像的特征向量进行比较，并返回 K 个最近的特征向量。

虽然上述方法很容易编码，但它通常不会像一些更复杂的方法那样健壮，因为当面部未对齐时它们通常会失败（称为无约束姿势。搜索“Labeled Faces in the Wild”以查看此问题的最新结果。）或在不同的环境条件下获取。但是，如果您数据库中的人脸是在您提到的类似条件下对齐并拍摄的，那么它可能会起作用。如果它们未对齐，您可以使用您提到的可以计算的面关键点来对齐面。一般来说，比较未对齐的人脸是计算机视觉中的一个非常困难的问题，并且仍然是一个非常活跃的研究领域。但是，如果你只考虑看起来相似且姿势相同的面孔相似（即

您提供的网站有指向 Eigenfaces 和 Fisherfaces 代码的链接。这些本质上是为您的面部图像计算特征向量的两种方法。通过对数据库中的特征向量（分别使用 PCA 和 LDA 计算）最接近查询图像的特征向量进行 K 最近邻搜索来识别人脸。

我可能还应该提到，在 Fisherfaces 方法中，您需要为数据库中的人脸添加“标签”以识别人脸。这是因为线性判别分析 (LDA)，Fisherfaces 中使用的分类方法，需要这些信息来计算一个投影矩阵，该矩阵将为靠近在一起的相似面孔和相距很远的不同面孔投射特征向量。然后对这些投影向量进行比较。这就是人脸识别和人脸验证之间的区别：为了识别，您需要在数据库中为您的训练图像“标记”，即您需要识别它们。为了验证，您只是试图判断任何 2 个给定的面孔是否属于同一个人。通常，您不需要“标记”

计算 Eigenfaces 和 Fisherfaces 的代码可以在 OpenCV 中找到，以防你使用它。

附带说明：特征向量实际上只是线性代数意义上的向量。它只是将 n 个数字打包在一起。“特征”一词指的是类似于“统计”的东西，即特征向量是包含表征其所代表对象的统计数据的向量。例如，对于人脸识别任务，最简单的特征向量是人脸灰度图像的强度值。在这种情况下，我只是将 2D 数字数组重塑为一个行乘 1 列的向量，每个条目包含一个像素的值。这里的像素值就是“特征”，像素值的nx 1向量就是特征向量。在 LBP 的情况下，粗略地说，它计算图像中小块像素的直方图，并将这些直方图连接在一起形成一个直方图，然后将其用作特征向量。所以局部二进制模式是统计量，连接在一起的直方图是特征向量。他们一起描述了你脸部的“纹理”和面部图案。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T04:47:08.740

这两个似乎是等效的问题，但我不在该领域工作。你基本上有以下两个问题：

1.  人脸识别：取一张脸并尝试将其与人匹配。

2.  寻找相似的面孔：取一张面孔并尝试找到相似的面孔。

这些不是等价的吗？在 (1) 中，您从要与所有者匹配的图片开始，然后将其与您认识的每个人的参考图片数据库进行比较。在 (2) 中，您在参考数据库中选择一张图片，然后针对该图片与数据库中的其他图片运行 (1)。

由于算法似乎可以衡量两张照片属于同一个人的可能性，因此在 (2) 中，您只需按降序对衡量标准进行排序，然后选择最热门的照片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T04:58:32.227

我假设您应该首先使用您使用的任何方法分析数据库中的所有图片。然后，您应该为每张图片设置一组指标，您可以将其与特定图片进行比较，并在统计上找到最接近的匹配项。

例如，如果您可以测量眼睛之间的距离，则可以找到具有相同距离的面孔。然后，您可以找到总体上最接近匹配的人脸并将其返回。

# promotion-code - 应用促销代码过期

> ID：14131995
> 
> 赞同：1
> 
> 时间：2013-01-03T01:44:30.780
> 
> 标签：promotion-code

Apple 促销代码将在 4 周后到期，但究竟什么会到期？使用促销代码下载应用程序，还是运行应用程序本身？

如果有人收到促销代码，但他们决定在两个月后下载该应用程序。他们能下载吗？

如果有人立即使用促销代码下载应用程序，该应用程序会在 4 周后过期吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T01:47:02.317

一旦使用促销代码兑换了应用程序，它就归兑换者“所有”——它不会过期。

代码本身将在 28 天后过期，并且不可兑换。（但任何已经兑换它的人仍将拥有该应用程序）。

# html - 为表格单元格添加边框问题

> ID：14131997
> 
> 赞同：0
> 
> 时间：2013-01-03T01:44:30.997
> 
> 标签：html, css

我对我的桌子有一个奇怪的问题。我想添加`border`到我`rows`的，以便用户可以区分每个`rows`..

我的html

```
<table>
  <tr class='rows'>
    <td class='test'> test1</td>
    <td class='test'> test2</td>
    <td class='test'> test3</td>
  </tr>
  <tr class='rows'>
    <td class='test'> test8</td>
    <td class='test'> test9</td>
    <td class='test'> test7</td>
  </tr>
  <tr class='rows'>
    <td class='test'> test4</td>
    <td class='test'> test5</td>
    <td class='test'> test6</td>
  </tr>

   more...
</table> 
```

我的表格 css

```
table{
display: table;
border-collapse: separate;
border-spacing: 2px;
border-color: gray;
}

.rows{
  border: solid 5px red;  //this border properties doesn't work.
  background-color:grey;  //this would change the background colors
} 
```

我无法弄清楚我的代码出了什么问题。任何人都可以帮助我吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:08:39.077

`display`除非您更改属性，否则无法将边框应用于表格行。推荐的解决方案是在表格单元格上设置边框：

```
table {
  border-collapse: collapse;
  border-spacing: 0;
}

table td {
  border-top: 1px solid gray;
  border-bottom: 1px solid gray;
} 
```

如果您需要表格单元格之间的空间，您可以使用`padding`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:35:49.057

只需删除

```
display:table; 
```

在你的 css..

[看看这个jsfiddle ...](http://jsfiddle.net/)

# brute-force - 蛮力搜索的替代品（语言不特定）

> ID：14131998
> 
> 赞同：0
> 
> 时间：2013-01-03T01:44:40.053
> 
> 标签：brute-force

我正在使用蛮力方法来优化我最近的一个项目中的解决方案，并且效果很好。 **基本上，优化过程涉及在所有可能解决方案的空间中搜索全局最大值。** 我很好奇是否有其他技术可以用来加速蛮力搜索或其他方法。这是一个我几乎没有经验的领域，但正如我所说，我很好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:56:14.130

即使无法测试所有解决方案，[遗传算法也是找到最大值的好方法。](http://en.wikipedia.org/wiki/Genetic_algorithm)

这是一种广泛传播的技术，并且有非常编程语言的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T01:57:56.470

[模拟退火](http://en.wikipedia.org/wiki/Simulated_annealing)对于解决局部最大值问题很有用，但并不总能保证找到全局最大值。它基本上使用随机“跳跃”来尝试找到比当前更好的位置/值，这可以加快搜索速度。

# java - Android 应用程序无异常退出

> ID：14131999
> 
> 赞同：3
> 
> 时间：2013-01-03T01:44:42.710
> 
> 标签：java, javascript, android, sqlite, android-webview

我正在构建一个应用程序，它在 WebView 中显示一些缓存在 SQLite db 中的远程数据。JavaScript 函数通过 JavaScript 接口从 WebView 请求数据。

当用户在页面上输入一个输入元素时，JavaScript 函数通过调用 Java 函数来请求搜索结果，这反过来又会触发一个 sql 查询。然后将结果以合适的 JSON 格式打包并返回。

除非您键入非常快，否则获取数据工作正常。如果您在按几下键后输入速度足够快，则应用程序会退出而不会**引发**任何异常，它只会返回主屏幕。

我设法缩小了原因 - 注释掉对 .query 方法的调用可以防止崩溃，但会使应用程序无用。

**有没有办法检查导致应用程序退出的原因，另一个可以提供帮助的日志或工具？**

Java函数代码：

```
 public Lot[] getLotList(String query, int limitCount) {
    ...
    ...
    String[] resultColumns = new String[] { LotsSearch._ID };
    String queryWhere = LotsSearch.TABLE_NAME + " MATCH ?";
    String[] queryArgs = new String[] { query + "*" };
    String sortOrder = LotsSearch.COLUMN_NAME_NUMBER + " ASC, " + LotsSearch.COLUMN_NAME_TITLE + " ASC";
    String limit = null;
    Cursor cursor = null;
    if (limitCount != -1)
        limit = "0," + limitCount;
    try {
        cursor = mDb.query(LotsSearch.TABLE_NAME, resultColumns, queryWhere, queryArgs, null, null, sortOrder, limit);
        if (cursor != null && cursor.moveToFirst()) {
            result = new Lot[cursor.getCount()];
            try {
                int idColumnIndex = cursor.getColumnIndexOrThrow(LotsSearch._ID);
                int lotId;
                Lot lot;
                do {
                    lotId = cursor.getInt(idColumnIndex);
                    lot = mLots.get(lotId);
                    if (lot != null)
                        result[index++] = lot;
                } while (cursor.moveToNext());
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            }
        }
    } catch (SQLiteException e) {
        e.printStackTrace();
    } finally {
        if (cursor != null)
            cursor.close();
    }
    ...
    ...
    return result;
} 
```

* * *

更新：

我发现还有另一个日志可以通过发出来访问

```
logcat -b events 
```

当应用程序崩溃时，只有一个条目

```
I/am_proc_died(   59): [11473,com.example.app] 
```

当应用程序正常退出时，此日志显示一组条目：

```
I/am_finish_activity(   59): [1157978656,22,com.example.app/.MainActivity,app-request]
I/am_pause_activity(   59): [1157978656,com.example.app/.MainActivity]
I/am_on_paused_called(11473): com.example.app.MainActivity
I/am_destroy_activity(   59): [1157978656,22,com.example.app/.MainActivity] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:50:06.897

我会更改我的自动搜索功能。即，仅当用户在大约 1/2 秒内没有按键时才执行搜索。

如果您打字速度很快，那么这个函数会在其自身之上执行多次，甚至在结果能够返回之前。同时，您可能有太多的光标资源同时运行，导致应用程序完全失败。

* * *

**更新**。如果您考虑一下，连续快速键入 10 个键可能意味着您有 10 个不同的查询正在执行和解析结果……如果它旋转多个线程，实际调用 getLotList 方法的代码肯定会出现一些死锁问题尝试更新 UI。这可能导致一些程序简单地放弃幽灵，不知道该做什么，甚至不知道在哪个线程上报告问题。

当然，所有这些都很难从我们拥有的小片段中分辨出来。