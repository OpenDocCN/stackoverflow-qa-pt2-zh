# StackOverflow 问答 15884000-15884999

# mysql - 使用 ON UPDATE 约束的原因

> ID：15884000
> 
> 赞同：0
> 
> 时间：2013-04-08T16:11:19.130
> 
> 标签：mysql, constraints

**`ON UPDATE`**如果您永远不会更改 ID（更好地说：主键字段），是否有任何理由在数据库中使用约束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:31:37.660

InnoDB 允许外键引用任何索引列或列组。因此，只有当您从不更改*引用字段*（而不是主键）时，您才可以忽略此问题。

除此之外，如果您不需要它，请不要使用它。

旁注：默认行为（即，如果您省略该`ON UPDATE`子句）是拒绝对引用字段的任何更新，以防止您在不知不觉中破坏引用完整性。

# android - 在android中显示与asmack的聊天记录

> ID：15884002
> 
> 赞同：3
> 
> 时间：2013-04-08T16:11:23.810
> 
> 标签：android, xmpp, asmack

我正在开发一个 android 聊天客户端应用程序，并且我正在使用 asmack 来实现 XMPP。我能够连接到我的 XMPP 服务器并能够发送聊天消息。我需要在我的应用中显示特定用户的聊天记录。我怎样才能做到这一点？

我尝试使用以下代码检索它：

```
PubSubManager mgr = new PubSubManager(con);
LeafNode node = mgr.getNode("mynode");
Collection<? extends Item> items = node.getItems(); 
```

但它没有用。

有没有办法用 asmack 做到这一点？

# jquery - Jquery Tools 命名可滚动项目，在加载页面时打开其中任何一个（深度链接）

> ID：15884004
> 
> 赞同：0
> 
> 时间：2013-04-08T16:11:30.973
> 
> 标签：jquery, jquery-plugins, jquery-tools, jquery-scrollable

您好，在我的页面 [http://jquerytools.org/documentation/scrollable/中使用此可滚动代码](http://jquerytools.org/documentation/scrollable/)

它工作得很好。

我试图“命名”可滚动项目，以便我可以像在选项卡上一样打开特定项目，此处为[http://jquerytools.org/demos/tabs/anchors.html#second](http://jquerytools.org/demos/tabs/anchors.html#second)

无论如何，我在这里检查，也尝试在我的代码中，命名导航上的项目，但即使在这里它也不起作用 jquerytools.org/demos/scrollable/one-sized.htm#t2

我怎样才能做到这一点？提前致谢。

这是我的代码 HTML：

```
<ul id="tabs" class="css-tabs navi">
  <li><a id="mp" class="current" href="#">MFP</a></li>
  <li><a id="mp2" href="#">Features</a></li>
</ul>

  <!-- "previous page" action -->
<a class="prev browse left"></a>

            <!-- root element for scrollable -->
<div class="scrollable" id="scrollable">

  <div class="items">

<div id="mp">

 <h3>MyProject</h3>

</div>

<div id="mp2">

 <h3>MyProject2</h3>

</div>

</div><!--end items -->

</div><!--end scrollable -->

           <!-- "next page" action -->
<a class="next browse right"></a> 
```

我的 jquery 工具代码

```
<script>
$(function() {
  // initialize scrollable
  $(".scrollable").scrollable({circular: true}).navigator({

    // select #flowtabs to be used as navigator
    navi: ".css-tabs",

    // select A tags inside the navigator to work as items (not direct children)
    naviItem: 'a',

    // assign "current" class name for the active A tag inside navigator
    activeClass: 'current',

    // make browser's back button work
    history: true

    });;
});
</script> 
```

**更新 1**：我在其他答案中找到了这个，我只是不知道如何将它应用到普通的 href，或者说，我想给我的客户一个 URL ...这是如何工作的？

假设您要进行深度链接，以便可滚动将基于 GET URL 滚动到某个幻灯片？这就是我所做的：

```
scrollapi = $("#scrollableID").data("scrollable");
deeplink = window.location.search.substring(1)
if (deeplink) {
    scrollapi.seekTo(deeplink);
} 
```

添加 GET 字符串就是您要链接到的幻灯片的编号。（从 0 开始）

**更新2 ：**pastebin.com/2FeKpzba****

 **我也不能让它工作:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:42:10.223

终于我明白了！！

如果有人需要 JqueryTools Scrollable 上的 Deep Link，这是最终代码

```
<script>
$(function() {
  // initialize scrollable
  $(".scrollable").scrollable({circular: true}).navigator({

    // select #flowtabs to be used as navigator
    navi: ".css-tabs",

    // select A tags inside the navigator to work as items (not direct children)
    naviItem: 'a',

    // assign "current" class name for the active A tag inside navigator
    activeClass: 'current',

    // make browser's back button work
    history: true

    });;

var $hash = window.location.hash.substring(0);
var $grave_nr = $hash ? $hash.slice(1) : 1;  

var api = $(".scrollable").data("scrollable");
        api.seekTo($grave_nr, 1000); 

});
</script> 
```

对于每个元素，URL 是

```
URL+#0
URL+#1
URL+#2 
```

以此类推，每个元素对应一个元素，从 0 开始**

# php - PHP存储变量

> ID：15884007
> 
> 赞同：1
> 
> 时间：2013-04-08T16:11:33.670
> 
> 标签：php, mysql

我有这段代码（如下所示）和变量 $first_name=$_POST['first_name']; 似乎不起作用。我有用户名、密码和标题工作。这与使用下划线有关吗？我检查了它是否与数据库匹配。当用户创建帐户时，存储 first_name 的行会引发错误，并且不会显示在数据库中输入的名称。有任何想法吗？

```
<?php
/* This code will make a connection with database */
$con=mysql_connect("localhost","","");

/* Now, we select the database */
mysql_select_db("");

/* Now we will store the values submitted by form in variable */
$username=$_POST['username'];
$pass=$_POST['password'];
$title=$_POST['title'];
$first_name=$_POST['first_name'];
/* we are now encrypting password while using md5() function */
$password=md5($pass);
$confirm_password=$_POST['confirm_password'];

/* Now we will check if username is already in use or not */
$queryuser=mysql_query("SELECT * FROM Customer WHERE username='$username' ");
$checkuser=mysql_num_rows($queryuser);
if($checkuser != 0)
{ echo "Sorry, ".$username." is already been taken."; }
else {

/* now we will check if password and confirm password matched */
if($pass != $confirm_password)
{ echo "Password and confirm password fields were not matched"; }
else {

/* Now we will write a query to insert user details into database */
$insert_user=mysql_query("INSERT INTO Customer (username, password, title, first_name) VALUES ('$username', '$password', '$title', '$first_name')");

if($insert_user)
{ echo "Registration Succesfull"; }
else
{ echo "error in registration".mysql_error(); }

/* closing the if else statements */
}}

mysql_close($con);
?> 
```

谢谢！

HTML 表单

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <title>
        </title>
        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <link rel="stylesheet" href="my.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
        </script>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js">
        </script>
        <script src="my.js">
        </script>
        <!-- User-generated css -->
        <style>
        </style>
        <!-- User-generated js -->
        <script>
            try {

    $(function() {

    });

  } catch (error) {
    console.error("Your javascript has an error: " + error);
  }
        </script>
    </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-theme="a" data-role="header">
            <a data-role="button" data-theme="d" href="Login.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                    Back
                </a>
                <a data-role="button" href="index.html" data-icon="home" data-iconpos="right" data-theme="d"class="ui-btn-right">
                 Home  
                </a>
                <h3>
                    Registration
                </h3>
            </div>
            <div data-role="content">
                <h4>
                    Enter your details below to register:
                </h4>

            <form method="post" action="Login.php">
            <table border="0">
            <tr><td>Title: </td><td><input type="text" name="title" /></td></tr>

            <tr><td>First Name: </td><td><input type="text" name="name" /></td></tr>

            <tr><td>Username: </td><td><input type="text" name="username" /></td></tr>

            <tr><td>Password: </td><td><input type="password" name="password" /></td></tr>

            <tr><td>Confirm Password: </td><td><input type="password" name="confirm_password" /></td></tr>

            <tr><td></td><td><input type="submit" value="submit" /></td></tr>

            </table>
            </form>
                <div data-role="content">
                <h4>
                 Please ensure your username and password are kept secure.
                </h4>

                <br />
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:30:50.680

问题是您的输入文本的表单属性`first name`不是。所以你应该改变`name``first_name`

```
$first_name=$_POST['first_name']; 
```

到

```
$first_name=$_POST['name']; 
```

或将您的 name 属性更改为`first_name`

在插入之前还要对所有字段进行适当的转义

```
<?php
/* This code will make a connection with database */
$con=mysql_connect("localhost","","");

/* Now, we select the database */
mysql_select_db("");

/* Now we will store the values submitted by form in variable */
$username= mysql_real_escape_string($_POST['username']);
$pass= mysql_real_escape_string($_POST['password']);
$title= mysql_real_escape_string($_POST['title']);
$first_name= mysql_real_escape_string($_POST['name']);

/* we are now encrypting password while using md5() function */
$password= md5($pass);
$confirm_password= mysql_real_escape_string($_POST['confirm_password']);

/* Now we will check if username is already in use or not */
$queryuser=mysql_query("SELECT * FROM Customer WHERE username='$username' ");
$checkuser=mysql_num_rows($queryuser);
if($checkuser != 0)
{ echo "Sorry, ".$username." is already been taken."; }
else {

/* now we will check if password and confirm password matched */
if($pass != $confirm_password)
{ echo "Password and confirm password fields were not matched"; }
else {

/* Now we will write a query to insert user details into database */
$insert_user=mysql_query("INSERT INTO Customer (username, password, title, first_name) VALUES ('$username', '$password', '$title', '$first_name')");

if($insert_user)
{ echo "Registration Succesfull"; }
else
{ echo "error in registration".mysql_error(); }

/* closing the if else statements */
}}

mysql_close($con);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:17:10.533

将其更改为：

`$first_name = mysql_real_escape_string($_POST['first_name']);`

您当前正在保存而没有进行任何清理或转义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:21:02.157

改变这个：

```
$insert_user=mysql_query("INSERT INTO Customer (username, password, title, first_name) VALUES ('$username', '$password', '$title', '$first_name')"); 
```

对此：

```
$insert_user=mysql_query("INSERT INTO Customer (username, password, title, first_name) VALUES ('".$username."', '".$password."', '".$title."', '".$first_name."')"); 
```

**更新**

请检查是否`<input type="text" name="first_name">`有`name="first_name"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T16:29:50.050

好吧，看起来您的表单不包含`first_name`项目，但是`name`. 改回`first_name`

# jquery - 为什么 zurb Foundation 3 下拉菜单不能在移动设备上运行？

> ID：15884008
> 
> 赞同：0
> 
> 时间：2013-04-08T16:11:35.557
> 
> 标签：jquery, drop-down-menu, zurb-foundation

在网站上使用 Zurb Foundation 3。主导航是基本设置，其中包含一些具有“已弹出”的项目。下面是来自我网站的示例代码。

```
<ul class="nav-bar">
  <li><a href="{site_url}">Home</a></li>
  <li><a href="">Pay Bill</a></li>
  <li class="has-flyout">
<a href="#">Our Practice</a>
<ul class="flyout">
  <li><a href="#">Sub Nav Item 1</a></li>
  <li><a href="#">Sub Nav Item 2</a></li>
  <li><a href="#">Sub Nav 3</a></li>
    </ul>
  </li>
  <li class="has-flyout">
<a href="#">Pediatrics</a>
<ul class="flyout">
  <li><a href="#">Sub Nav Item 1</a></li>
  <li><a href="#">Sub Nav Item 2</a></li>
  <li><a href="#">Sub Nav 3</a></li>                      
</ul>
  </li>         
</ul> 
```

它遵循与 Foundation 3 文档相同的结构。页面底部我正在调用所需的 js 文件：

```
<script src="/assets/javascripts/jquery.js"></script>
<script src="/assets/javascripts/foundation.min.js"></script>
<script src="/assets/javascripts/jquery.foundation.navigation.js"></script>
<!-- Initialize JS Plugins -->
<script type="text/javascript" src="/assets/javascripts/app.js"></script> 
```

不知道为什么它不起作用，所以任何建议都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T13:00:15.210

您是否尝试过更新到版本 4？它首先是移动的，可能会解决这个问题

# ruby-on-rails - 如何在omniauth-facebook回调中访问“额外”哈希

> ID：15884010
> 
> 赞同：1
> 
> 时间：2013-04-08T16:11:46.983
> 
> 标签：ruby-on-rails, omniauth

在 Rails 应用程序中，我有以下代码从他们的 Facebook 个人资料更新用户的个人资料

```
self.update_attributes( :location => request.env["omniauth.auth"].extra.raw_info.location.name ) 
```

我正在更新 Rail 和 gems，现在这条线失败了。

```
NoMethodError (undefined method `name' for nil:NilClass): 
```

看着输出，我看到了

```
...
extra: !map:Hashie::Mash 
  raw_info: !map:Hashie::Mash 
... 
```

如何访问此 Hashie 中的属性？

# actionscript-3 - AS3 如何使用 B 类在 A 类中添加事件侦听器并使用 C 类删除相同的事件？

> ID：15884012
> 
> 赞同：0
> 
> 时间：2013-04-08T16:11:52.343
> 
> 标签：actionscript-3, listener

这是 AS3 的问题。我有类“addadd”、“Symbol1”（Button1）、“Symbol2”（Button2）。在“添加添加”中，我有 3 个功能。函数“StanishevFadd”创建对象并添加事件侦听器，函数“stanishevFremove”删除事件侦听器，函数“frameDOstanishev”将在添加事件时触发。所以，我显然想从 Symbol1 触发事件并从 Symbol2 停止相同的事件。不幸的是，这种方式不起作用。我完全糊涂了。例如，如果我只想从 Symbol1 添加和删除事件侦听器 - YES 有效，但我无法从 Symbol1 创建事件并从类 addadd 中的 Symbol2 删除相同的事件。请大家帮忙，拜托！

```
public class addadd
{
    var stanishev:stanishev_line = new stanishev_line;

    public function addadd()
    {
    }

    public function stanishevFadd()
    {
        Main.display.addChild(stanishev);
        stanishev.gotoAndPlay("start");
        stanishev.addEventListener(Event.ENTER_FRAME, frameDOstanishev);
    }

    public function stanishevFremove()
    {
        stanishev.removeEventListener(Event.ENTER_FRAME, frameDOstanishev);
    }

    public function frameDOstanishev(e:Event)
    {
        trace (stanishev.currentFrame);
    }
} 
```

//------------------------------------------

```
public class Symbol1 extends SimpleButton
{
    var call_creator:addadd = new addadd;

    public function Symbol1()
    {
        // constructor code
        addEventListener(MouseEvent.MOUSE_OVER, eventResponse);
    }

    function eventResponse(e:MouseEvent)
    {
        call_creator.stanishevFadd();
    }
} 
```

//------------------------

```
 public class Symbol2 extends SimpleButton
{
    var call_creator:addadd = new addadd;

    public function Symbol2()
    {
        // constructor code
        addEventListener(MouseEvent.MOUSE_DOWN, eventResponse2);
    }

    function eventResponse2(e:MouseEvent)
    {
        call_creator.stanishevFremove();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:20:21.527

好的，我不确定这整件事的总体目的是什么，所以我将把这件事称为 OddView。我将尝试以一种更面向对象的方式接近您正在尝试做的事情。

我相信你应该可以在不涉及主类的情况下封装所有这些行为，并且有很多理由不涉及它，尤其是不像你正在做[的静态变量。](http://misko.hevery.com/code-reviewers-guide/flaw-brittle-global-state-singletons/)

```
公共类 OddView 扩展 Sprite {
   受保护的 var _btn1:SimpleButton;
   受保护的 var _btn2:SimpleButton;
   protected var _stanishev:StanishevLine;//注意我把你的类名改成更符合AS3标准

   公共功能奇观（）{
      极好的（）;
   }
   公共函数获取 btn1():SimpleButton {
       返回_btn1；
   }
   公共函数集 btn1(value:SimpleButton):void {
      如果（值！= _btn1）{
          如果（_btn1）{
              removeEventListener(MouseEvent.MOUSE_OVER, goToState2);
          }
          _btn1 = 价值；
          如果（_btn1）{
              _btn1.addEventListener(MouseEvent.MOUSE_OVER, goToState2);
          }
      }
   }
   公共函数获取 btn2():SimpleButton {
       返回_btn2；
   }
   公共函数集 btn2(value:SimpleButton):void {
      如果（值！= _btn2）{
          如果（_btn2）{
              removeEventListener(MouseEvent.MOUSE_OVER, goToState1);
          }
          _btn2 = 价值；
          如果（_btn2）{
              _btn2.addEventListener(MouseEvent.MOUSE_OVER, goToState1);
          }
      }
   }
   公共函数获取 stanishev():StanishevLine {
       返回_stanishev；
   }
   公共函数集 stanishev(value:StanishevLine):void {
       如果（值！= _stanishev）{
           如果（_stanishev）{
              清理（​​空）；
           }
           _stanishev = 价值；
           初始化斯坦尼舍夫（）；
       }
   }
   公共函数 initStanishev():void {
      如果（_stanishev）{
         _stanishev.visible =真；
         _stanishev.goToAndPlay('开始');
         addEventListener(Event.ENTER_FRAME, showStanishevFrame);
         addEventListener(Event.REMOVED_FROM_STAGE, cleanUp);
      }
   }
   公共函数goToState1（e：事件）：无效{
       goToAndStop(1);
   }
   公共函数 goToState2(e:Event):void {
       goToAndStop('State2');
   }
   公共函数 showStanishevFrame(e:Event):void {
       如果（斯坦尼舍夫）{
          跟踪（“当前帧”，stanishev.currentFrame）；
       }
   }
   公共功能清理（e：事件）：无效{
      removeEventListener(Event.ENTER_FRAME, showStanishevFrame);
      removeEventListener(Event.REMOVED_FROM_STAGE, cleanUp);
   }
}
```

请注意，我假设您将应用 OddView 作为库符号的基类。我*不*包括任何实例化或定位逻辑，因为我倾向于[将舞台用于这些事情](http://www.developria.com/2010/04/combining-the-timeline-with-oo.html)。

请注意，我在舞台实例上检查存在的原因是理论上有人可以将 OddView 分配为基类，而不是将 btn1、btn2 或 stanishev 放在该库符号的舞台上。

但是，编写本课程时假设您将通过将 btn1、btn2 和 stanishev 放置在您想要的舞台上来处理这 3 个项目的视觉部分。

另请注意，我强烈怀疑其中大部分是完全没有必要的。很可能您可以通过简单地使用 btn1 的 over 状态来处理大部分问题。但是，这并不能完全解释为什么您只想在 btn2 被选中时删除事件侦听器而不采取其他操作*。*因此，在没有关于您实际要完成的工作的真实信息的情况下，我选择了“矫枉过正”。

**注意编辑**
注意我在 setter 中所做的事情——如果已经存储了一个值，我们将删除那个旧的、传出的监听器上的监听器。然后如果传入的值不为空，我们添加新的监听器。

我仍然怀疑您不需要做这么多，但考虑到您提供的信息*，*这应该有助于为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:47:43.383

`stanishev`您可以将`addadd`类中的变量设为静态变量。但是我不建议这样做，原因之一是您只能拥有一个`stanishev`. 希望@Amy Blankenship 会告诉您如何完全重新设计您的程序，因为它需要重新设计。这种方法虽然可行，但您还应该向添加和删除 eventListeners 的函数添加条件，`stanishev`以查看是否`stanishev`已经有 eventlistener 或没有。

```
public class addadd
{
public static var stanishev:stanishev_line = new stanishev_line;

public function addadd()
{
}

public function stanishevFadd()
{
    Main.display.addChild(stanishev);
    stanishev.gotoAndPlay("start");
    stanishev.addEventListener(Event.ENTER_FRAME, frameDOstanishev);
}

public function stanishevFremove()
{
    stanishev.removeEventListener(Event.ENTER_FRAME, frameDOstanishev);
}

public function frameDOstanishev(e:Event)
{
    trace (stanishev.currentFrame);
}
} 
```

```
public class Symbol1 extends SimpleButton
{

public function Symbol1()
{
    // constructor code
    addEventListener(MouseEvent.MOUSE_OVER, eventResponse);
}

function eventResponse(e:MouseEvent)
{
    addadd.stanishev.stanishevFadd();
}
} 
```

```
public class Symbol2 extends SimpleButton
{

public function Symbol2()
{
    // constructor code
    addEventListener(MouseEvent.MOUSE_DOWN, eventResponse2);
}

function eventResponse2(e:MouseEvent)
{
    addadd.stanishev.stanishevFremove();
}
} 
```

# c# - 将xml解析成字典

> ID：15884017
> 
> 赞同：0
> 
> 时间：2013-04-08T16:12:08.367
> 
> 标签：c#, dictionary, linq-to-xml

我正在尝试将 XML 文件解析为字典。问题是我在网上找到的所有解决方案都显示了如何通过搜索名称元素来做到这一点。我的应用程序名称元素本身就是我想要搜索的。

```
<?xml version="1.0" encoding="UTF-8"?>
    <calibration>
      <ZoomLevel 250="0.0100502512562814" />
      <ZoomLevel 251="0.0100502512562814" />
      <ZoomLevel 252="0.0100502512562814" />
      <ZoomLevel 253="0.0100502512562814" />
      <ZoomLevel 254="0.0100502512562814" />
      <ZoomLevel 255="0.0100502512562814" />
      <ZoomLevel 256="0.0100502512562814" />
      <ZoomLevel 257="0.0100502512562814" />
</calibration> 
```

我正在寻找删除键“250、251 等”和值并创建字典。

抱歉，如果这是一个愚蠢的问题，但我对 c# 很陌生，而且我正在为此苦苦挣扎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:19:54.890

不幸的是，您的 XML 不是有效的。属性名称不能以数字开头。

但是为了说明当 XML 有效时如何做到这一点，让我们假设它看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
    <calibration>
      <ZoomLevel _250="0.0100502512562814" />
      <ZoomLevel _251="0.0100502512562814" />
      <ZoomLevel _252="0.0100502512562814" />
      <ZoomLevel _253="0.0100502512562814" />
      <ZoomLevel _254="0.0100502512562814" />
      <ZoomLevel _255="0.0100502512562814" />
      <ZoomLevel _256="0.0100502512562814" />
      <ZoomLevel _257="0.0100502512562814" />
</calibration> 
```

注意`_`每个属性名称之前。您可以`Dictionary<int, decimal>`使用以下 LINQ to XML 查询：

```
var xDoc = XDocument.Load("Input.txt");

var dict = xDoc.Root.Elements("ZoomLevel")
                    .Select(x => x.Attributes().First())
                    .ToDictionary(a => int.Parse(a.Name.LocalName.Substring(1)), a => (decimal)a); 
```

`a.Name.LocalName.Substring(1)`跳过第一个字符 - `_`- 从属性名称。

# css - CSS 中的 Win8 加载器动画

> ID：15884020
> 
> 赞同：0
> 
> 时间：2013-04-08T16:12:12.797
> 
> 标签：css, css-animations

我在 CSS 中制作了一份 Win8 加载器动画的副本（请参阅 JSFidle），但感觉不是这样...... windows 一样。

```
@-webkit-keyframes win8-dot1 {
    0%   { left: -30px;  }
    26%  { left: 40.625%  }
    52%  { left: 56.25%;  }
    78%  { left: 98.83%; opacity: 1;}
    79%  { opacity: 0;}
    100% { left: 98.83%; opacity: 0; }
} 
```

`26%`对于 from to的动画`52%`，我认为属性的变化`left`应该更多。但是，如果我这样做，请将其更改为`35%`to`60%`而不是`40.625%`to `56.25%`，点之间的间距也会增加，而在我不想要`26%`的过渡范围内。`52%`（而且我不明白为什么会这样）。

谁能提出更好的价值观？

[http://jsfiddle.net/nNfAy/](http://jsfiddle.net/nNfAy/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:18:56.580

这是我发现并在我的网站上使用的 Win8 加载程序。

[http://codepen.io/anon/pen/AoDei](http://codepen.io/anon/pen/AoDei)

# facebook - 如何在服务器端登录 Facebook 以读取 JSON 提要？

> ID：15884021
> 
> 赞同：0
> 
> 时间：2013-04-08T16:12:19.147
> 
> 标签：facebook, facebook-graph-api

我正在编写一个纯粹的服务器端应用程序，它需要从 Facebook 页面提取提要。该页面是“有年龄限制的（与酒精相关的）”，因此不允许在没有访问令牌的情况下访问图形 API。

如果使用访问令牌，它可以完美运行并返回完全可读的 JSON 提要：

```
https://graph.facebook.com/<page_id>/feed?access_token=<access_token> 
```

问题是访问令牌过期。幸运的是，我有一个“不相关”的 App_Id，并且可以通过在浏览器中访问轻松获得新的访问令牌：

```
https://www.facebook.com/dialog/oauth?client_id=<my_app_id>&redirect_uri=http://localhost:8080&scope=manage_pages&response_type=token 
```

我第一次访问这个 URL（在浏览器中）时，它要求我允许“应用程序”发布到“我的页面”，当然我说是的。它再也不会问我了。现在我只是被重定向到一个新的 URL，其中有一个很棒的访问令牌。

```
http://localhost:8080/#access_token=<awesome-access-token>&expires_in=4482 
```

我通常只能从查询字符串参数中读取此值，但我意识到它是服务器端代码无法读取的页面框架 (#) URL。

我还尝试拦截第一个 URL 重定向，并读出 302 LOCATION 标头，但是，它看起来像是一个重定向链。

我该如何解决这个问题？

# git - Git将远程合并到本地分支

> ID：15884022
> 
> 赞同：0
> 
> 时间：2013-04-08T16:12:18.960
> 
> 标签：git, git-merge

我创建了一个名为develop 的本地分支，并对其进行了一些更改。但是，我现在想将其他开发人员对 remotes/devteam/master 的更改合并到我的本地开发分支中。

我如何最好地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:15:53.637

假设您已经为*devteam*定义了一个远程：

```
git fetch --all
git checkout develop
git merge devteam/master 
```

# plugins - Jenkins-Testlink HTTP 服务器返回意外状态：需要授权

> ID：15884023
> 
> 赞同：0
> 
> 时间：2013-04-08T16:12:22.440
> 
> 标签：plugins, jenkins, authorization, xml-rpc, testlink

我已经安装了 jenkins 1.5 和 testlink 1.9.5（它们在我的电脑上，称之为 machineA）。
我已经在服务器上安装了 testlink 1.9.2（称为 machineB）。

当我尝试通过 Jenkins 配置将 Jenkins (1.5) 与 TestLink (1.9.5) 连接以检索测试时，它可以完美运行。

但是当我尝试将 Jenkins (1.5) 与 TestLink (1.9.2) 连接时，在 Jenkins 中运行作业时，我在控制台中收到以下错误：

```
FATAL: Error verifying developer key: HTTP server returned unexpected status: Authorization Required
br.eti.kinoshita.testlinkjavaapi.util.TestLinkAPIException: Error verifying developer key: HTTP server returned unexpected status: Authorization Required
    at br.eti.kinoshita.testlinkjavaapi.MiscService.checkDevKey(MiscService.java:66)
    at br.eti.kinoshita.testlinkjavaapi.TestLinkAPI.<init>(TestLinkAPI.java:162)
    at hudson.plugins.testlink.TestLinkBuilder.getTestLinkSite(TestLinkBuilder.java:244)
    at hudson.plugins.testlink.TestLinkBuilder.perform(TestLinkBuilder.java:134)
    at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
    at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:810)
    at hudson.model.Build$BuildExecution.build(Build.java:199)
    at hudson.model.Build$BuildExecution.doRun(Build.java:160)
    at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:592)
    at hudson.model.Run.execute(Run.java:1568)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236)
Caused by: org.apache.xmlrpc.client.XmlRpcHttpTransportException: HTTP server returned unexpected status: Authorization Required
    at org.apache.xmlrpc.client.XmlRpcSunHttpTransport.getInputStream(XmlRpcSunHttpTransport.java:94)
    at org.apache.xmlrpc.client.XmlRpcStreamTransport.sendRequest(XmlRpcStreamTransport.java:152)
    at org.apache.xmlrpc.client.XmlRpcHttpTransport.sendRequest(XmlRpcHttpTransport.java:143)
    at org.apache.xmlrpc.client.XmlRpcSunHttpTransport.sendRequest(XmlRpcSunHttpTransport.java:69)
    at org.apache.xmlrpc.client.XmlRpcClientWorker.execute(XmlRpcClientWorker.java:56)
    at org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:167)
    at org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:158)
    at org.apache.xmlrpc.client.XmlRpcClient.execute(XmlRpcClient.java:147)
    at br.eti.kinoshita.testlinkjavaapi.BaseService.executeXmlRpcCall(BaseService.java:90)
    at br.eti.kinoshita.testlinkjavaapi.MiscService.checkDevKey(MiscService.java:62)
    ... 12 more
ERROR: Erreur de communication avec TestLink. Vérifiez votre configuration de TestLink.
Enregistrement des résultats des tests
Finished: FAILURE 
```

我该如何解决这个问题？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:13:19.620

You have problem with DEV-KEY:

```
FATAL: Error verifying developer key: HTTP server returned unexpected status: Authorization Required
br.eti.kinoshita.testlinkjavaapi.util.TestLinkAPIException: Error verifying developer key: HTTP server returned unexpected status: Authorization Required 
```

I think you can try generate new dev key and try again.

# ruby-on-rails - RoR - 带有 nil 外键的 Validates_existence_of 不起作用

> ID：15884024
> 
> 赞同：1
> 
> 时间：2013-04-08T16:12:23.373
> 
> 标签：ruby-on-rails, belongs-to

我正在使用 validates_existence_of gem。它运行良好，除非我想让我的外键为零。

这是我的用户和项目模型。一个项目属于一个用户和一个贡献者（一个贡献者也是一个用户），但是贡献者可以是nil。

这是我的用户模型：

```
class User < ActiveRecord::Base
  attr_accessible :first_name, :last_name
  has_many :projects, :dependent => :destroy
  has_many :user_trimester_statuses, :dependent => :destroy
end 
```

这是我的项目模型：

```
class Project < ActiveRecord::Base
  attr_accessible :added, :amount, :contributor_id, :label, :ref, :trimester_id,    :user_id
  belongs_to :user
  belongs_to :contributor, :class_name => 'User'
  belongs_to :trimester
  validates :user, :existence => { :both => false }
  validates :trimester, :existence => { :both => false }
  validates :contributor, :existence => { :allow_nil => true, :both => false }
end 
```

当我尝试添加新项目时，如果 user_id 或 trimester_id 字段为空白或无效，则会出现错误。但是对于contributor_id 字段，如果该字段无效，则不会抛出错误。它通过任何一种方式（有效、无效或无）。

我究竟做错了什么？我正在使用 ruby​​ 2.0.0p0 和 rails 3.2.13。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:25:55.420

看起来项目中有一个关于这个的开放错误。

[https://github.com/perfectline/validates_existence/issues/15](https://github.com/perfectline/validates_existence/issues/15)

您可能必须为这种情况编写一个简单的自定义验证器，直到问题得到解决。（或深入研究，看看您是否可以自己解决问题）

更新：我刚刚克隆了该项目并编写了一个测试以查看问题所在。似乎当您添加 allow_nil 时，根本不会调用存在验证器。我不确定为什么会这样，但与此同时，您可以使用 proc 以一种简单的方式解决该错误。代替

```
validates :contributor, :existence => { :allow_nil => true, :both => false } 
```

这将完成工作

```
validates_existence_of :contributor, :unless => Proc.new { |obj| obj.contributor_id.blank? } 
```

我能够在我的测试用例中证明这一点。（我使用了 'validates_existence_of' 方法，而不是 'validates'，因为我认为在这种情况下它更干净）

# java - 为什么在父更新时，Hibernate 会执行多个查询来更新子节点？

> ID：15884026
> 
> 赞同：1
> 
> 时间：2013-04-08T16:12:33.573
> 
> 标签：java, spring, hibernate

`inverse="false"`我与和具有多对一的关系`cascade="all"`。当我更新父对象时，有一个针对这个父对象的更新查询和多个更新查询——一个针对子集合中的每个子对象的查询。

你能告诉我为什么会有这些针对儿童的查询吗？我该如何避免它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:22:56.097

如果你有 cascade="all" 这意味着父实体上的每个操作都会调用子实体上的相同操作。因此，如果您不想从关联中级联对子实体的操作，则必须删除 cascade=all 。

但是您应该小心该配置，因为如果您没有级联持久化（例如）创建的子实体即使定期创建也不会持久化，但是您必须在每个子实体上显式调用 save 。

[您可以在此线程上](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/example-parentchild.html#example-parentchild-cascades)阅读有关级联类型的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:19:54.627

您想防止`Hibernate`更新子实体，您应该更改级联类型 remove `cascade=all`。

# jquery-mobile - JQM：是否可以将控制组放在可折叠栏内而不传播点击事件？

> ID：15884029
> 
> 赞同：0
> 
> 时间：2013-04-08T16:12:38.457
> 
> 标签：jquery-mobile, jquery-events, collapsable

我真正的愿望是为 JQM 创建一个可选择的树（每个元素有 3 个值）。我尝试使用嵌套的可折叠分区，这很好用。但是当我尝试在每个可折叠栏上添加 3 个收音机时，事件无法正常触发。

我认为折叠/展开事件挂钩了收音机的点击事件。效果是当您单击单选时，可折叠项被展开并且未选中单选。

```
<div data-role="collapsible" data-theme="b" data-content-theme="d" id="accordion1">
<h3>60
<fieldset data-role="controlgroup" data-type="horizontal" data-mini="true" >
    <input type="radio" name="selcrit-CLP-60" id="selcrit-CLP-60-asign" value="60-asign">
    <label for="selcrit-CLP-60-asign">Asign</label>
    <input type="radio" name="selcrit-CLP-60" id="selcrit-CLP-60-omit" value="60-omit">
    <label for="selcrit-CLP-60-omit">Omit</label>
    <input type="radio" name="selcrit-CLP-60" id="selcrit-CLP-60-nothing" value="60-nothing">
    <label for="selcrit-CLP-60-nothing">Nothing</label>
</fieldset>                                                         
</h3>                               
<div stylee="margin: 0 10px;">
    Content for 60
</div> 
```

这是带有示例的 jsfiddle：http: [//jsfiddle.net/Hz8Ef/](http://jsfiddle.net/Hz8Ef/)

任何的想法？我可以用其他方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:13:02.510

解决了！

```
$(document).ready(function() {
$("div .ui-radio").click(
    function(e){                            
        var radioId = $(this).children(":first").attr('name');
        $('input[name=' + radioId + ']').checkboxradio( "refresh" );
        e.stopPropagation();
        }
    ); 
```

});

这里是完整的解决方案：http: [//jsfiddle.net/VuaQg/1/](http://jsfiddle.net/VuaQg/1/)

# javascript - 在 JavaScript 中实现撤消功能

> ID：15884031
> 
> 赞同：7
> 
> 时间：2013-04-08T16:12:44.750
> 
> 标签：javascript

如何在 javascript 中实现 ctrl z？

经过无数次谷歌搜索，我偶然发现了 execCommand：

我正在使用`document.execCommand("undo", false, null)`，但它不适用于 Firefox。

我输入了第二个和第三个参数，即使它们在 Firefox 中是可选的。

有任何想法、见解、建议、示例等吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:40:50.067

由于尚未正式回答，因此如果这有帮助，我就写了这个

它扩展了 jquery 以便检测`ctrl`+ `z`。并且可以像这样使用：

```
$('input').disableUndo(); 
```

或者如果您希望它在用户尝试撤消时执行某些操作

```
$('input').disableUndo(function(element){
    // do custom stuff   
}); 
```

**[jsFiddle 演示](http://jsfiddle.net/CVrFU/5/)**

# c++ - std::unique_ptr 自定义删除器

> ID：15884034
> 
> 赞同：0
> 
> 时间：2013-04-08T16:13:02.973
> 
> 标签：c++, unique-ptr

参考[那么，std::unique_ptr 的自定义删除器是如何工作的呢？](https://stackoverflow.com/questions/8274451/well-how-does-the-custom-deleter-of-stdunique-ptr-work)

构造函数

```
std::unique_ptr<ErrorHandling> error_;

RecursiveDescentParser::RecursiveDescentParser(std::string inputStream, bool fileService, 
            boost::optional<std::string> filePathName, std::ofstream &writer){

    if (fileService == true){
        error_(new ErrorHandling(fileService, writer));  <---- compiler error
    }
    else{
        error_(new ErrorHandling(fileService, std::ofstream())); <---- compiler error
    }       
} 
```

编译器错误

```
Error   1   error C2247: 'std::default_delete<_Ty>::operator ()' not accessible because 'std::unique_ptr<_Ty>' uses 'private' to inherit from 'std::_Unique_ptr_base<_Ty,_Dx,_Empty_deleter>' 
```

[此处](http://msdn.microsoft.com/en-us/library/a1ktd2d9(v=vs.80).aspx)描述的错误原因。

我之所以决定`'std::default_delete<_Ty>::operator ()`是`private`因为子类（`std::unique_ptr`在这种情况下）已指定`private inheritance`我将编写自己的自定义删除器。问题是我对语法和符号太不舒服而无法成功。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T16:31:17.197

这条线

```
error_(new ErrorHandling(fileService, writer)); 
```

是一个错误，因为`unique_ptr`没有`operator()`. 错误消息有点误导，因为它的基类似乎有一个（但幸运的是私有的）。

你可能打算

```
error_.reset(new ErrorHandling(fileService, writer)); 
```

这使`unique_ptr`自己成为一个新对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T16:32:39.097

问题是您试图在 a 上使用函数调用运算符`unique_ptr`，这不是一个有效的做法。然后会引起一些混乱，因为您的特定实现恰好有一个不可访问的运算符，而不是根本没有运算符，从而给出了一个奇怪的错误消息。

我假设您实际上是在尝试重置`error_`以拥有一个新指针：

```
error_.reset(new ErrorHandling(fileService, writer));
//    ^^^^^^ 
```

更新：如果您确实想要一个自定义删除器（重申一下，在这种情况下您不需要），它可能看起来像：

```
struct ErrorHandlingDeleter
{
    void operator()(ErrorHandling * p) {/* do something to release the pointer */}
};

std::unique_ptr<ErrorHandling, ErrorHandlingDeleter> error; 
```

# ruby-on-rails - 使用 FFMPEG 识别音频比 特率

> ID：15884037
> 
> 赞同：3
> 
> 时间：2013-04-08T16:13:06.657
> 
> 标签：ruby-on-rails, ruby, ffmpeg

我正在使用 FFMPEG 来识别我的 Rails 应用程序中音频文件的比特率。我正在从 S3 下载文件，并临时存储在 tmp 文件夹中，然后对其运行 FFMPEG 命令。

在本地，一切都按预期运行。部署时出现问题，我没有从 FFMPEG 返回任何内容。

```
s3 = AWS::S3.new(
:access_key_id => ENV["AWS_ACCESS_KEY_ID"],
:secret_access_key => ENV["AWS_SECRET_ACCESS_KEY"])

object = s3.buckets[ENV["AWS_S3_BUCKET"]].objects[CGI::unescape(self.url)]

tempname = Digest::MD5.hexdigest(DateTime.now.to_s) + "." + self.file_format
File.open(Rails.root.to_s + '/tmp/' + tempname, 'wb') do |f|
    f.write(object.read)
end

dl = Rails.root.to_s + '/tmp/' + tempname
brcommand = "ffmpeg -i " + dl + " 2>&1 | grep Duration | sed 's/Duration: \(.*\), start/\1/g'"
ffmpeg = %x{#{brcommand}} 
```

我正在使用 %x{ffmpeg_command} 访问命令行，所以我在徘徊是否可能导致找不到文件的问题，就好像它已经在 Rails 中本地运行一样。

我在服务器的命令行上使用了 FFMPEG，所以我知道它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-28T09:11:04.003

最好的方法是使用带有 JSON 输出的 ffprobe，如下例所示：

> ffprobe -v quiet -print_format json -show_format Ramp\ -\ Apathy.mp3

产生以下输出：

```
{
    "format": {
        "filename": "Ramp - Apathy.mp3",
        "nb_streams": 2,
        "format_name": "mp3",
        "format_long_name": "MP2/3 (MPEG audio layer 2/3)",
        "start_time": "0.000000",
        "duration": "203.638856",
        "size": "4072777",
        "bit_rate": "159999",
        "tags": {
            "title": "Apathy",
            "artist": "Ramp",
            "album": "Evolution Devolution Revolution",
            "date": "1999",
            "genre": "Metal"
        }
    }
} 
```

# python - 在 python 程序结束之前生成绘图

> ID：15884038
> 
> 赞同：0
> 
> 时间：2013-04-08T16:13:06.693
> 
> 标签：python, image, matplotlib, plot

我正在尝试将两个数组的元素相互绘制。虽然绘图工作正常，但在询问用户是否要继续之前它不会生成图像。（此代码嵌入在 while true 循环中）。

```
 print 'To achieve the million pound goal using your betting strategy, you would have to spin the wheel approximately',averageiterations, 'times on average.'
    print 'The theoretical probability of you obtaining a million based on your betting strategy is: %9.7e' % p
    print 'The approximate average total amount of times that you ran out of money while using your betting strategy (went below the minimum bet) is:',len(fails)/1000.,', which rounds up to', int(math.ceil(len(fails)/1000.)),'.'

i=0
millions=[]
millionspins=[]
while i<1000:
    millions.append(allnewbank[:][i][-1])
    i=i+1
i=0
while i<1000:
    millionspins.append(len(allnewbank[:][i]))
    i=i+1
fig = plt.figure()
matplotlib.pyplot.scatter(millionspins,millions)
plt.xlabel("Number of spins")
plt.ylabel("Bank")
plt.xlim(0,max(millionspins))
plt.ylim(1000000,max(millions))
plt.show()
while restart not in exit:
        restart=raw_input('Please type "y" to restart or "n" to exit:')
    if restart==exit[0]:
            continue    
    if restart==exit[1]:
        break 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:15:51.560

看看程序在哪里要求用户输入会很好。不过，我认为您要问的是如何显示绘图并继续执行该程序？如果是这样，您可以简单地禁用 matplotlib 阻止程序：

```
plt.show(block = False) 
```

# .net - 仅仅为了拥有独立的配置文件而创建单独的 AppDomain 是否过大？有什么选择吗？

> ID：15884045
> 
> 赞同：0
> 
> 时间：2013-04-08T16:13:26.717
> 
> 标签：.net, appdomain

我正在构建一个具有不同模块的服务器应用程序，这些模块本质上是提供各种通信端点的功能集。

例如，

模块 1 - WCF 端点

模块 2 - WCF 端点

我真的很想每个模块都有独立的配置文件。这样，如果两个模块使用 WCF 来承载各种终结点，则每个模块的配置可以位于单独的文件中。

我正在考虑为每个模块创建单独的 AppDomain 以允许这样做。这是矫枉过正吗？有没有更好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:22:52.287

另一种选择是让每个端点都有一个附加到配置键的字符串，并从那里引用附加了该字符串的键

字符串 WCFName = "Service1";

然后获取配置键 configKeyName + WCFName

# java - Java俄罗斯方块 - 旋转

> ID：15884051
> 
> 赞同：0
> 
> 时间：2013-04-08T16:13:49.010
> 
> 标签：java, swing

我正在用 Java 制作俄罗斯方块，并且正在旋转一块。

首先，我只是在旋转条形部件。

我觉得我现在这样做的方式不仅有问题，而且完全是矫枉过正。但我不知道该怎么做。

首先，我有一个 keylistener 设置`int[] rotatedCoords`为`calcRotation("right")`... 如果向左旋转，`rotationsCounter+=1;`则将改为递减。

```
 if (keycode == KeyEvent.VK_D) {

        int[] rotatedCoords = calcRotation("right");
        rotationsCounter+=1;
        clearCurrPosition();
        rotate(rotatedCoords);
        System.out.println(rotationsCounter);
        if (rotationsCounter == 4) {
            rotationsCounter = 0;
        }
        System.out.println(rotationsCounter);
    } 
```

calcRotation(String right or left) 获取 Piece 中所有 4 个 Tiles 的当前坐标并将它们发送到`int[] getRotation(String shape, String direction, int[] current X coords, int[] current Y Coords)`

```
public int[] calcRotation(String direction) {   

        for (int i = 0; i < tile.length; i++) {
            currPositionX[i] = tile[i].getX();
            currPositionY[i] = tile[i].getY();  
            System.out.println(currPositionX[i] + ", " + currPositionY[i]);
        } 
        return getRotation("Bar", direction, currPositionX, currPositionY);
    } 
```

然后 getRotation[] 根据选择的旋转方向（右或左）、形状和旋转计数器（0 度、90 度、180 或 270...）设置新坐标

```
if (direction == "right") {
      if (shape == "Bar") {
           if (rotationsCounter == 0) {
                    currXs[0] += 1;
                    currYs[0] += -1;

                    currXs[1] += 0; 
                    currYs[1] += 0; 

                    currXs[2] += -1; 
                    currYs[2] += 1; 

                    currXs[3] += -2;    
                    currYs[3] += 2;             

                    rightRotate1 = new int[] {currXs[0], currYs[0], currXs[1], currYs[1], currXs[2], currYs[2], currXs[3], currYs[3]};          
                }       
           if (rotationsCounter == 1) {
               ... etc 
```

然后坐标 ( `pieceRotations`) 将被适当地设置：

```
 //handle on left rotations
    if (direction == "right") {
        if (shape == "Bar") {
            if (rotationsCounter == 0) {    
                pieceRotations = rightRotate1;                      
            }       
            if (rotationsCounter == 1) {
                pieceRotations = rightRotate2;      
            }                   
            if (rotationsCounter == 2) {
                pieceRotations = rightRotate3;  
            }   
            if (rotationsCounter == 3) {
                pieceRotations = rightRotate0;  
            }               
        }
    }
    if (direction == "left") {
        if (shape == "Bar") {
            if (rotationsCounter == 0) {    
                pieceRotations = rightRotate3;                      
            }       
            if (rotationsCounter == 1) {
                pieceRotations = rightRotate0;      
            }                   
            if (rotationsCounter == 2) {
                pieceRotations = rightRotate1;  
            }   
            if (rotationsCounter == 3) {
                pieceRotations = rightRotate2;  
            }
        }           
    }
    return pieceRotations;
} 
```

最后，`rotate(rotatedCoords)` 将调用正确的坐标来旋转所有的瓷砖......

```
public void rotate(int[] rotatedCoordinates) {
    int counterX = 0, counterY = 1;
    if (movePieceValid()) {
        for (int i = 0; i < tile.length; i++) {
            tile[i].setLocation(rotatedCoordinates[counterX], rotatedCoordinates[counterY]);                
            counterX+=2;
            counterY+=2;
        }   
    } else {
        for (int i = 0; i < tile.length; i++) {
            tile[i].setLocation(currPositionX[i], currPositionY[i]);                
        }   
    }           
} 
```

* * *

所以，我目前根据每个形状的当前位置计算新坐标的方法`left`显然`right`是矫枉过正。有没有我可以遵循的一般指南来大大简化它？我想不出另一种方法来获得每个形状的位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T16:17:18.193

只有这么多碎片。试试这个：

```
public abstract class Piece {
    public abstract void rotate(Direction dir);
}

public class BarPiece extends Piece {
    public void rotate(Direction dir) {
        // implement
    }
}

public class TPiece extends Piece {
   // ...
}

public class LeftSPiece extends Piece {
   // ...
} 
```

看起来有点脏，但一直做数学会很慢，而且因为只有这么多可能的部分......

# amazon-web-services - Amazon S3 文件夹级别权限

> ID：15884055
> 
> 赞同：9
> 
> 时间：2013-04-08T16:14:04.443
> 
> 标签：amazon-web-services, amazon-s3

我正在使用 Amazon S3 将客户的文档存档在单个存储桶和一系列文件夹中，以区分每个客户。

```
MyBucket/0000001/..
MyBucket/0000002/..
MyBucket/0000003/.. 
```

我的客户现在正在寻找一种将他们的文件独立备份到本地机器的方法。我想在给定的文件夹级别创建一组权限，以便仅在特定文件夹中查看/下载这些文件。

我希望在我的应用程序范围之外执行此操作，我的意思是，我想在 S3 浏览器中创建一组权限，并告诉我的客户使用一些第 3 方应用程序链接到他们的区域。有人知道这是否可能吗？我目前反对编写一个模块来自动化它，因为它们的需求还不够大。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T16:57:47.007

您可以将 IAM 策略与存储桶策略结合使用来管理此类访问。

每个单独的客户都需要他们自己的 IAM 配置文件，并且您将设置策略以将对象访问权限仅限于这些账户。

这是 AWS 文档：

[http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingIAMPolicies.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingIAMPolicies.html)

我会特别指出该文档中的示例 1，它完全符合您的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-18T16:25:41.377

请参阅以下策略以限制用户仅将对象上传或列出到特定文件夹。我创建了一个策略，允许我仅列出文件夹 1 和文件夹 2 的对象，还允许将对象放入文件夹 1 并拒绝上传到存储桶的其他文件夹。该策略如下： 1.列出存储桶的所有文件夹 2.列出允许文件夹的对象和文件夹 3.仅将文件上传到允许的文件夹

```
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "AllowUserToSeeBucketListInTheConsole",
            "Action": [
                "s3:ListAllMyBuckets",
                "s3:GetBucketLocation"
            ],
            "Effect": "Allow",
            "Resource": [
                "arn:aws:s3:::*"
            ]
        },
        {
            "Sid": "AllowListingOfFolder1And2",
            "Action": [
                "s3:*"
            ],
            "Effect": "Deny",
            "Resource": [
                "arn:aws:s3:::bucketname"
            ],
            "Condition": {
                "StringNotLike": {
                    "s3:prefix": [
                        "folder1/*",
                        "folder2/*"
                    ]
                },
                "StringLike": {
                    "s3:prefix": "*"
                }
            }
        },
        {
            "Sid": "Allowputobjecttofolder1only",
            "Effect": "Deny",
            "Action": "s3:PutObject",
            "NotResource": "arn:aws:s3:::bucketname/folder1/*"
        }
    ]
} 
```

# c++ - CUDA：对向量<向量进行排序 > 在 GPU 上

> ID：15884056
> 
> 赞同：2
> 
> 时间：2013-04-08T16:14:05.363
> 
> 标签：c++, sorting, vector, cuda, thrust

我已经为 STL 的功能实现了自己的比较器`sort`，这有助于`std::vector< std::vector<int> >`在**CPU**上对 a 进行排序。用户将 a 和字符串变量作为输入`std::vector< std::vector<int> >`，例如`021`。通过使用此字符串，首先在第一列上进行排序，然后在第三列上进行排序，然后在第二列上进行排序。例子：

```
 1 2 3
  3 2 1
  1 1 1
  1 1 2 
```

假设字符串是`10`

输出将是

```
 1 1 1
  1 1 2
  1 2 3
  3 2 1 
```

我的 CPU 实现使用了一个名为 的类`Sorting`，这个类是用以下两个文件实现的：

`Sorting.h`

```
class Sorting{

   private:

   public:

Sorting();
~Sorting();
std::vector<std::vector<int>> applySort(std::vector<std::vector<int>>
    data,const std::string& attr);

 }; 
```

`Sorting.cpp`

```
 Sorting::Sorting(){}

 Sorting::~Sorting(){}

 std::vector<std::vector<int>> Sorting::applySort(
      std::vector<std::vector<int>> data, const std::string& attr){

         std::sort(data.begin(), data.begin()+data.size(), Comparator(attr));

         return data;
  } 
```

`Comparator.h`

```
 class Comparator{

   private:
     std::string attr;

   public:
     Comparator(const std::string& attr) { this->attr = attr; }

     bool operator()(const std::vector<int>& first, const std::vector<int>&
          second){

    size_t i;
    for(i=0;i<attr.size();i++){
        if(first[attr.at(i) - '0'] < second[attr.at(i) - '0']) return true;
        else if(first[attr.at(i) - '0'] > second[attr.at(i)-'0'])          
             return  false;
    }
    return false;
  }

  }; 
```

我的实现已经过测试并且可以正常工作。我有兴趣做一个类似的 CUDA 实现，它可以利用 GPU 的功能来更快地产生输出。

最初我认为因为我的目标有点令人困惑，也许改变一个已知的在 GPU 中进行排序的实现会完成我的工作。但是，我开始搜索许多实现，例如此处描述的实现：http: [//blogs.nvidia.com/2012/09/how-tesla-k20-speeds-up-quicksort-a-familiar-comp-sci-code/](http://blogs.nvidia.com/2012/09/how-tesla-k20-speeds-up-quicksort-a-familiar-comp-sci-code/)和它让我意识到这将是一件很难实现的事情。

我不确定这是否是最好的做法。我开始搜索库并找到`Thrust`. 然而，尽管 Thrust 允许您定义自己的比较器，但在我昨天提出的一个[问题](https://stackoverflow.com/questions/15869049/cuda-thrust-library-how-can-i-create-a-host-vector-of-host-vectors-of-integers)中，我了解到不可能创建一个`host_vector < host_vector<int> >`.

而且我想将我的向量向量转换为单个向量对我没有多大帮助，因为我不知道我将如何实现我的比较器类。

我想听听您对这个问题的看法：

1.  我应该如何解决这个问题？
2.  是否有可能实现它`Thrust`？
3.  在 GPU 中执行此操作会为我的整体代码提供更好的性能吗？请注意，向量的向量可能很大，数百万行，但只有几（5-10）列。
4.  设计自己的排序或更改已经可用的排序功能会更好吗？这虽然听起来是个好主意，但在实践中我觉得我需要付出很多努力才能实现。使用一个简单的比较器和一个库中的排序函数对我来说是最好的，但是`Thrust`不允许我这样做的限制。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:26:30.913

我看到您正在尝试实现字典排序技术（但我已经使用单个 1D 巨大向量做到了），我去过那里并且我已经实现了一个对向量进行排序的函数，但实际上它落后于字典排序，无论如何我不确定我是否可以在这里发布代码，所以如果您需要任何帮助，我很乐意提供帮助

PS：在推力示例代码中查看 lexicographical_sort.cu 的实现（我也对其进行了调整，但一个也落后了）您可能需要比较器函数，以便从一维向量中的两个不同位置进行检查（其中包含所有数据）被列出（顺便说一下，这种技术比 CPU 慢）但是谁知道你可能会想出改进它的想法或比我更好地使用它

```
struct arbitrary_functor
{
    template <typename Tuple>   __host__ __device__
        void operator()(Tuple t)
        {
            if(thrust::get<0>(t)>thrust::get<1>(t))
                thrust::get<2>(t) = 1;
            else
                thrust::get<2>(t) = 0;
        }
};

int checkLexo_1vec(const thrust::device_vector<char> & A, int bv1, int bv2, int N){
    int i;

    thrust::device_vector<char> temp(N);
    thrust::device_vector<char> sum(N);

    thrust::for_each(thrust::make_zip_iterator(
                        thrust::make_tuple(A.begin()+bv2, A.begin()+bv1,temp.begin())),
                    thrust::make_zip_iterator(
                        thrust::make_tuple(A.end()+(bv2+N),A.end()+(bv1+N), temp.end())),
                    arbitrary_functor());

    thrust::inclusive_scan(temp.begin(),temp.end(),sum.begin());

    int a = thrust::lower_bound(sum.begin(),sum.end(),1) - sum.begin();

    thrust::for_each(thrust::make_zip_iterator(
                        thrust::make_tuple(A.begin()+bv1, A.begin()+bv2, temp.begin())),
                    thrust::make_zip_iterator(
                        thrust::make_tuple(A.end()+(bv1+N), A.end()+(bv2+N),temp.end())),
                    arbitrary_functor());

    thrust::inclusive_scan(temp.begin(),temp.end(),sum.begin());

    int b = thrust::lower_bound(sum.begin(),sum.end(),1) - sum.begin();

    if(a<=b)
        return 1;
    else
        return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:39:14.377

我找到了一种合理的方法，它最终可以击败 CPU（不是在时间方面，而是在数据元素方面）实际上我的新方法涉及使用推力：：不匹配，我正在附加该函数的代码

这个版本的好处是这个函数的运行时间大约是 2ms。有非常大量的数据，例如`N = 1000000 to N = 1000`，无论如何我正在发布功能代码，如果您发现任何用户找到一些可以减少整体运行时间的其他改进，请告诉我

```
template<typename Ivec>    
int lexoMM(Ivec vec, int bv1, int bv2, int N){

  typedef thrust::device_vector<int>::iterator Iterator;
  thrust::pair<Iterator,Iterator> result;

  result = thrust::mismatch(vec.begin()+bv1, vec.begin()+(bv1+N-1), vec.begin()+bv2);

if(result.first == vec.end()){
      //cout<<"Both are equal (right order)"<<endl;
      return 1;
  }
else if(result.first>result.second){
    //cout<<"Wrong order"<<endl;
    //cout<<*result.first<<","<<*result.second;
    return 0;
}
else{
    //cout<<"Right order"<<endl;
    //cout<<*result.first<<","<<*result.second;
    return 1;
    } 
```

}

PS：我觉得我真的浪费了我的时间来实现我自己的版本，但是`thrust`很糟糕:)

# php - Opencart 和 phonegap

> ID：15884057
> 
> 赞同：2
> 
> 时间：2013-04-08T16:14:05.573
> 
> 标签：php, cordova, opencart

嗨，我最近开始为移动浏览器构建移动开放式购物车网站。我想更进一步，使用 phonegap 构建原生应用程序。我的问题是，phonegap 是否支持像 opencart 这样的结构？是否支持 php 文件？

我是否有可能建立一个功能齐全的 opencart 站点并将其与 phonegap 成功集成？

网上关于这个问题的资料很少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T17:43:42.870

Phonegap 应用程序不能包含任何服务器端脚本，例如 PHP。它只能包含 HTML、css 和 Javascript。

但是您始终可以向运行 PHP 的远程服务器发出请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:18:53.190

Opencart 在应用程序的各个部分都有相当多的 ajax 接口。这些调用通常提供页面部分的控制器。我还没有查看完整的远程 API 以了解您是否可以构建使用 opencart 后端的完整商店应用程序。

如果您查看 ajax 调用路径，您可能会发现足够的功能来生成 phonegap 应用程序。

# python - 如何在几秒钟内向客户端返回一些变量？

> ID：15884063
> 
> 赞同：0
> 
> 时间：2013-04-08T16:14:25.820
> 
> 标签：python, loops, timer, tornado, polling

我目前正在学习 python+tornado 并且因这个问题而停止：我需要每隔几秒（例如）向客户端写入一些数据，即使使用`self.write(var)`
我已经尝试过：

1.  `time.sleep`- 被封锁了
2.  `yield gen.Task(IOLoop.instance().add_timeout, time.time() + ...)`- 很棒，但在超时结束时我仍然收到完整的请求
3.  `.flush`- 出于某种原因，它不想将 Bdata 返回给客户端
4.  `.PeriodicCallback`- 浏览器窗口只是像其他上层方法一样加载和加载

我想我的代码像

```
class MaHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    @tornado.gen.engine
    def get(self):
        for x in xrange(10):
            self.write(x)
            time.sleep(5) #yes,it's no working 
```

就这样。感谢您对此的任何帮助。我正在解决这个问题，大约需要 4-5 天，我自己真的做不到。

我仍然认为它不能仅在服务器端完成。它可以被关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:43:53.263

使用[PeriodicCallback](http://www.tornadoweb.org/en/stable/ioloop.html#tornado.ioloop.PeriodicCallback)类。

```
class MyHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def get(self):
        self._pcb = tornado.ioloop.PeriodicCallback(self._cb, 1000)
        self._pcb.start()

    def _cb(self):
        self.write('Kapooya, Kapooya!')
        self.flush()

    def on_connection_close(self):
        self._pcb.stop() 
```

# c# - C#：专注于 WPF 文本框的工具提示

> ID：15884067
> 
> 赞同：1
> 
> 时间：2013-04-08T16:14:39.790
> 
> 标签：c#, wpf, textbox, tooltip, onfocus

这是我的代码。

```
private void txtPassword_PasswordChanged(object sender, RoutedEventArgs e)
        {
            Boolean Capslock = Console.CapsLock;
            if (Capslock == true)
            {
                txtPassword.ToolTip = "Caps Lock is On.";
            }
        } 
```

我正在尝试在 WPF 控件上的 TextChanged 事件上显示工具提示。如果 Caps Lock 处于打开状态，当我将鼠标移到 txtPassword 控件上时，上面的代码可以正常工作并显示带有上述文本的工具提示。

但是我正在寻找在您开始输入时会显示工具提示的东西，无论是否将鼠标悬停在 txtPassword Control 上。就像当 txtPassword 控件被聚焦或类似时

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T16:34:12.843

您可能要考虑为此使用[PopUp](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup.aspx)。

XAML：

```
<TextBox x:Name="txtPassword" Height="30" Width="100" TextChanged="txtPassword_TextChanged" ></TextBox>
<Popup x:Name="txtPasswordPopup" Placement="Top" PlacementTarget="{Binding ElementName=txtPassword}" IsOpen="False">
    <TextBlock x:Name="PopupTextBlock" Background="Wheat">CAPSLOCK IS ON!</TextBlock>
</Popup> 
```

代码隐藏：

```
private void txtPassword_TextChanged(object sender, TextChangedEventArgs e)
    {
        Boolean Capslock = Console.CapsLock;
        if (Capslock == true)
        {
            PopupTextBlock.Text = "Caps Lock is On.";
            txtPasswordPopup.IsOpen = true;
        }
        else
        {
            txtPasswordPopup.IsOpen = false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T16:34:05.377

您需要使用工具提示控件并将 StaysOpen 和 IsOpen 属性设置为 true，这会导致工具提示保持打开状态，直到您将通过 IsOpen =false 关闭它（可能在 lostFocus 上）这里是代码：

```
 private void TextBox_GotFocus(object sender, RoutedEventArgs e)
    {
         Boolean Capslock = Console.CapsLock;
         if (Capslock == true)
         {
             ToolTip toolTip = new ToolTip();
             toolTip.Content = "Caps lock is on";
             toolTip.StaysOpen = true;
             toolTip.IsOpen = true;

             (sender as TextBox).ToolTip = toolTip;
         }
    } 
```

# arraylist - Arraylist，带有 if else 语句

> ID：15884071
> 
> 赞同：0
> 
> 时间：2013-04-08T16:14:51.170
> 
> 标签：arraylist

我有一个相当简单的java编程问题

我目前正在从事 Java 的早期作业。

我需要创建一个助手数组列表（int 薪水，字符串名称）

棘手的部分是，我需要制定一种方法，说明只有当助理的薪水等于或超过 150 时才能添加助理。

无论我们有多少助手，我们都希望该方法有效。

所以总结一下，

如果助理的工资高于或等于 150 我们希望他们添加，

否则我们不希望它们添加到数组列表中

任何帮助深表感谢 ：）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:18:55.870

试试这个：

```
public void AddAssitant(Assistant assistant, ArrayList list)
{
     if(assistant.Salary >= 150)
     {
        list.Add(assistant);
     }

} 
```

# python - Virtualenv 中的 TKinter

> ID：15884075
> 
> 赞同：35
> 
> 时间：2013-04-08T16:15:00.980
> 
> 标签：python, tkinter, virtualenv

尝试使用来自 virtualenv 的基于 TKinter 的小部件运行 python 代码。

```
 user@computer:~/myproject$ env/bin/python Python
    2.7.3 (default, Sep 26 2012, 21:51:14)  [GCC 4.7.2] on linux2 Type "help", "copyright", "credits" or "license" for more information.
    >>> import Tkinter 
Traceback (most recent call last):   File "<stdin>", line 1, in <module>   File "/usr/lib/python2.7/lib-tk/Tkinter.py", line 42, in <module>
        raise ImportError, str(msg) + ', please install the python-tk package' ImportError: No module named _tkinter, please install the python-tk package 
```

将 TK 安装到 virtualenv 的正确方法是什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-10T22:36:07.557

在脚本中设置环境变量 TCL_LIBRARY `activate`。在 Windows 上（带有 Tcl 8.5 的 Python 2.7），只需将此行添加到`Scripts\activate.bat`：

```
set "TCL_LIBRARY=C:\Python27\tcl\tcl8.5" 
```

@Jasper van den Bosch 的编辑：在 Ubuntu 上，对脚本的修改`activate`如下：

```
TK_LIBRARY=/usr/lib/python2.7/lib-tk:/usr/lib/python2.7/site-packages/PIL:/usr/lib
TKPATH=/usr/lib/python2.7/lib-tk:/usr/lib/python2.7/site-packages/PIL:/usr/lib 
TCL_LIBRARY=/usr/lib 
export TCL_LIBRARY TK_LIBRARY TKPATH 
```

可以[在 askubuntu 上的这个问题上找到这个参考](https://askubuntu.com/questions/229416/making-python-3-3-default-python-3-interpreter-instead-of-3-2)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-05-23T13:00:26.763

我设法通过文件夹将`tkinter`python3 集成到 virtualenv到. 我为我工作。但我不知道这是否是正确的方法。`symlink tkinter``virtualenv python3`

1.  安装*tkinter*

```
sudo apt-get install python3-tk 
```

2.  转到您的 virtualenv 的 python lib 文件夹

```
cd ~/.virtualenvs/cv/lib/python3.4/ 
```

3.  链接 tkinter

```
ln -s /usr/lib/python3.4/tkinter tkinter 
```

希望这可以帮助。

在更高版本的 python 中，这可能会导致

```
ModuleNotFoundError: No module named '_tkinter' 
```

在这种情况下，请确保也符号链接
`/usr/lib/python3.x/lib-dynload/_tkinter.cpython-36m-x86_64-linux-gnu.so`
为 `path/to/virtualenv/lib/python3.x/lib-dynload/_tkinter.cpython-36m-x86_64-linux-gnu.so` using

```
ln -s /usr/lib/python3.x/lib-dynload/_tkinter.cpython-36m-x86_64-linux-gnu.so _tkinter.cpython-36m-x86_64-linux-gnu.so 
```

从您的 virtualenv`lib/python3.x/lib-dynload/`目录中。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-01-17T00:06:50.867

我在运行 linux mint 的机器上使用带有 virtualenv 的 python2.7。在我的 virtualenv 中运行需要 matplotlib 的应用程序时，我收到了与 OP 提到的完全相同的错误。“ImportError：没有名为 _tkinter 的模块，请安装 python-tk 包”

我最终使用上述帖子中的建议删除并重新创建了我的虚拟环境。这是我的步骤：

1.  如果您的虚拟环境已激活，则运行此命令将需求冻结到您以后可以访问的文件中： `pip freeze > requirements.txt`
2.  如果您的虚拟环境已激活，则使用以下命令将其停用： `deactivate`
3.  删除您的 virtualenv 文件夹。
4.  使用以下命令安装 python-tk： `sudo apt-get install python-tk`
5.  使用以下方法重新创建您的 virtualenv： `virtualenv <nameofyourenv> --system-site-packages`
6.  接下来，激活你的 virtualenv： `source <virtual environment folder>/bin/activate`
7.  从 requirements.txt 文件中恢复你之前冻结的所有包： `pip install -r <path to requirements.txt file>`

现在，当我运行与以前相同的代码时，导入 _tkinter 没有问题。希望这可以帮助！感谢楼上大家的建议。它真的帮了我很多。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-08-06T17:44:47.707

这确实是对 A. Rodas 用于 Python 3.4 和 Tcl 8.6 的出色答案的更新（我没有足够的声誉点来评论）。

在您的激活脚本中设置环境变量 TCL_LIBRARY。在 Windows（带有 Tcl 8.6 的 Python 3.4）上，只需将此行添加到 Scripts\activate.bat：

```
set "TCL_LIBRARY=C:\Python34\tcl\tcl8.6" 
```

我在虚拟环境中使用 Windows 7、Python 3.4 和 ggplot 时遇到了这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-29T19:40:00.423

要使其在 powershell 中工作，您必须编辑 activate.ps1 文件而不是 activate.bat。只需将以下内容添加到activate.ps1： `$env:TCL_LIBRARY = "C:\Python27\tcl\tcl8.5"`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-01T14:27:46.970

克隆 cpython 项目

```
git clone git@github.com:python/cpython.git 
```

`cd`到 cpython 目录。 `git checkout`所需的虚拟环境版本（对我来说是 3.4），并使用

```
./configure
make
make test
sudo make install 
```

`_tkinter.cpython-xxx.so`您将在目录的子目录中找到一个 so 文件`build/`，将其复制到您的 venv`lib-dynload`目录。（对我来说是`~/tf1.1py3.4/lib/python3.4/lib-dynload/`）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-08T21:20:11.487

[也是A.Rodas](https://stackoverflow.com/a/15937719/3821735)回答的更新- 我曾尝试在 Windows 7 中使用 Windows Powershell 执行此操作，但无法完成（我也没有足够的声誉点来评论

我意识到，即使我将 `set "TCL_LIBRARY=C:\Python27\tcl\tcl8.5"` tk 库的行和相应的行添加到`activate.bat`脚本中，tcl 链接也没有更新，我需要做的只是转到它正在寻找 tcl 文件的目录，并且将相应的 tcl 和 tk 文件复制到该目录。现在该文件位于默认位置，因此您无需在`activate.bat`每次创建新环境时都进行更新

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-12T19:34:10.440

对我来说，解决方案是从 tcl 复制文件夹

```
C:\Users\{myUser}\Python3.5\tcl 
```

到

```
C:\Users\{myUser}\{myVirtualEnv} 
```

将 {myUser} 和 {myVirtualEnv} 替换为您的特定目录名称。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-13T10:12:39.703

如果这有助于那些在阅读此处的所有答案后摸不着头脑的人 - 似乎您可能需要重新创建您的 virtualenv，以防您在安装之前创建它`python3.6-tk`。即使在虚拟环境之外使用 tkinter 给出的路径（参见[这篇文章](https://stackoverflow.com/a/43464686/5814943)） ，指定`TK_PATH`和似乎都没有解决方案。可以肯定的是，只需删除 venv 并创建一个新的。`TCL_PATH`

# c# - Web.Config 获取身份验证错误

> ID：15884079
> 
> 赞同：-3
> 
> 时间：2013-04-08T16:15:23.303
> 
> 标签：c#, asp.net, forms-authentication

我有以下代码： 我的目标是，只有当用户尝试访问**Register.aspx**页面时，他们才需要通过**Admin.aspx**页面进行身份验证。我收到以下消息；

*在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由于虚拟目录未配置为 IIS 中的应用程序造成的。*

难道我做错了什么？

```
 <location path="Report.aspx">        
       <system.web>
         <authentication mode="Forms">
            <forms loginUrl="Admin.aspx" >
                <credentials passwordFormat="Clear">
                    <user name="John" password="pass@432"/>
                </credentials>
            </forms>
         </authentication>
         <authorization>
            <deny users="*" />
         </authorization>
      </system.web>
     </location> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:25:19.070

您的应用程序可能作为该网站的一部分位于您网站下的文件夹中，而不是其本身的应用程序。

对于 IIS 6.1：进入 IIS，右键单击您的应用程序根文件夹并选择转换为应用程序。

试一试，看看它是否有帮助。

如果这不起作用...

检查您是否将身份验证配置放在根 web.config 文件中，而不是放在较低文件夹中的一个中。（例如，如果使用 MVC，则坐在 MVC 视图文件夹中的那个）。

虽然与你的问题无关，但正如别人所说，你有一个否认一切。要拒绝未经身份验证的用户访问该页面，请使用问号而不是 asterix。

```
 <location path="foo.aspx">
    <system.web>
      <authorization>
        <deny users="?" />
      </authorization>
    </system.web>
  </location> 
```

# jquery - Jquery 里面的 Jquery

> ID：15884090
> 
> 赞同：-2
> 
> 时间：2013-04-08T16:15:52.140
> 
> 标签：jquery

我正在尝试在 jquery slideup 向下滑动请求中制作一些文本，但是当我添加另一个 jquery 代码时，它显示了这一点

```
â€‹ 
```

所以这是我的代码

```
<head>
      <script type="text/javascript">
<!-- HIDE FROM INCOMPATIBLE BROWSERS
var fish1Position = 0;
var fish2Position = 0;
var fish3Position = 99;
var horizontal = [];
var fillPosition = 10;
var num = 100;
for(var i = 0; i < 100; ++i) {
        horizontal[i] = fillPosition;
        fillPosition += 10;
}

function fish1Swim() {
        document.getElementById("fish1").style.left = horizontal[fish1Position] + "px";
        ++fish1Position;
        if (fish1Position == num) {
                fish1Position = 0;
}
var tim1 = setTimeout(fish1Swim, 100);
}
function fish2Swim(){
        document.getElementById("fish2").style.left = horizontal[fish2Position] + "px";
         ++fish2Position;
         if (fish2Position == num) {
                 fish2Position = 0;
}
var tim2 = setTimeout(fish2Swim, 200);
}

function fish3Swim() {
     document.getElementById("fish3").style.left = horizontal[fish3Position] + "px";
     ++fish3Position;
     if (fish3Position == num) {
fish3Position = 99;
}
var tim3 = setTimeout(fish3Swim, 300);
}

function startSwimming() {
        fish1Swim();
        fish2Swim();
        fish3Swim();
}

// STOP HIDING FROM INCOMPATIBLE BROWSERS -->
</script>
</head>
////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////
<body>
<ul>
<li><img src='http://station2k.com/blank-hockey-puck.png' width='17px' height='17px'> {$nhlteam} ​&lt;span id='fish1'>{$nhlmessage}</span></li>
<li><img src='http://station2k.com/blank-hockey-puck.png' width='17px' height='17px'> {$nhlteam} ​&lt;span id='fish1'>{$nhlmessage}</span></li>
</ul>
/////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////
<!-- include jQuery core code -->
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
<script>
$(document).ready(function() {
  function textloop() {
    // get the item that currently has the 'show' class
    var current = $('#items .show');
    /*
     * find the next item with some help from jQuery's ternary operator
     * the syntax for the ternary operator is 'a ? b : c'
     * in other words 'if a is true return b otherwise return c'
     */
    var next = current.next().length ? current.next() : current.parent().children(':first');
    // fade out the current item and remove the 'show' class
    current.delay(5000).slideUp('slow',function(){
      // fade in the next item and add the 'show' class
      next.slideDown('slow').addClass('show');
    }).removeClass('show');

    // repeat by calling the textloop method again after 3 seconds
    setTimeout(textloop,0);
  }

  // call the text loop method when the page loads
  textloop();
});
</script> 
```

对使列表中的文本滚动有什么帮助吗？pref 在我可以识别的标签中，因为我不希望整个脚本从右到左滚动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:33:00.247

尝试将您的 PHP 值输出修改为：

```
 <li><img src='http://station2k.com/blank-hockey-puck.png' width='17px' height='17px'><?php echo $nhlteam ?>​&lt;span id='fish1'><?php echo $nhlmessage ?></span></li> 
```

您看到的符号是指向变量的内存指针的 ASCII 表示。

# javascript - 如何将图像列表保持在一行而不中断？

> ID：15884092
> 
> 赞同：0
> 
> 时间：2013-04-08T16:15:57.233
> 
> 标签：javascript, html, css, internet-explorer

我有一个 div 容器，它的宽度是 150px。
div 有一个表格，它的宽度是可变的，其内容是一个图像列表。
如果图像列表的大小大于 150 像素，则 <td> 将换行。
如何将图像列表保持在一行而不中断？
我们的代码可以在 chrome 上运行，但不能在 IE9 上运行。
以下是我的html代码。

```
 <!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>test</title>

        <style text="text/css">
            .thumbnail{
                float:left;                
            }

            .NoBreak{ 
                white-space:nowrap;
                word-break:keep-all 
            }
        </style>        
    </head>
    <body>
        <div style='width:150px;overflow:hidden;border:1px solid #ff0000;'>
            <table border='1' cellspacing='0' cellpadding='0'><tr height='40'><td nowrap class='NoBreak'>
                <img src='b1347546434941/s1347546434942/1209135051ed48bc89d.jpg' class='thumbnail' width='30' height='40'/>
                <img src='b1347546434941/s1347546434942/1209135051ed48bc89d.jpg' class='thumbnail' width='30' height='40'/>
                <img src='b1347546434941/s1347546434942/1209135051ed48bc89d.jpg' class='thumbnail' width='30' height='40'/>
                <img src='b1347546434941/s1347546434942/1209135051ed48bc89d.jpg' class='thumbnail' width='30' height='40'/>
                <img src='b1347546434941/s1347546434942/1209135051ed48bc89d.jpg' class='thumbnail' width='30' height='40'/>
                <img src='b1347546434941/s1347546434942/1209135051ed48bc89d.jpg' class='thumbnail' width='30' height='40'/>
                <img src='b1347546434941/s1347546434942/1209135051ed48bc89d.jpg' class='thumbnail' width='30' height='40'/>
                <img src='b1347546434941/s1347546434942/1209135051ed48bc89d.jpg' class='thumbnail' width='30' height='40'/>
                <img src='b1347546434941/s1347546434942/1209135051ed48bc89d.jpg' class='thumbnail' width='30' height='40'/>
                <img src='b1347546434941/s1347546434942/1209135051ed48bc89d.jpg' class='thumbnail' width='30' height='40'/>
            </td></tr></table>    
        </div>    
    </body>
</html> 
```

# javascript - 在保留对象引用和继承的同时组织原型 javascript

> ID：15884096
> 
> 赞同：6
> 
> 时间：2013-04-08T16:16:07.003
> 
> 标签：javascript, oop, javascript-objects

我使用 JavaScript 原型和继承构建了一个大型应用程序。但是我很难组织我的代码。例如，我有一个类轮播，它有很多这样的功能：

```
Carousel.prototype.next = function () {...}
Carousel.prototype.prev = function () {..}
Carousel.prototype.bindControls = function () {..} 
```

我想这样组织我的代码：

```
Carousel.prototype.controls = {
   next: function () { ... } , 
   prev: function() { ... },
   bindControls: function () { .. }
} 
```

但这会导致“this”的价值丢失。我可以使用全局实例来跟踪它，但是当类被继承时，这会导致问题，例如在另一个文件中，我有类似的东西来覆盖父类

```
BigCarousel.prototype.next = function () {...} 
```

我的继承是这样完成的：

```
Function.prototype.inheritsFrom = function (parentClass) {
    if (parentClass.constructor === Function) {
        //Normal Inheritance
        this.prototype              = $.extend(this.prototype , new parentClass);
        this.prototype.constructor  = this;
        this.prototype.parent       = parentClass.prototype;
    }
    else {
        //Pure Virtual Inheritance
        this.prototype = $.extend(this.prototype, parentClass);
        this.prototype.constructor = this;
        this.prototype.parent = parentClass;
    }
    return this;
}; 
```

所以我可以这样做：

```
BigCarousel.inheritsFrom(Carousel) 
```

有谁知道我该如何解决“这个”值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:21:13.100

你可以创建`Controls`一个自己的类：

```
var Controls = function (controllable_object) {
    this.ref = controllable_object;
};
Controls.prototype.next = function () {
    this.ref.foo();
}
// ..

var Carousel = function () {
    this.controls = new Controls(this);
};
// .. 
```

这不允许您覆盖`Controls`虽然的实现。随着更多的依赖注入，你会得到类似的东西：

```
var Controls = function (controllable_object) {
    this.ref = controllable_object;
};
Controls.prototype.next = function () {
    this.ref.foo();
}
// ..

var Carousel = function () {
        this.controllers = [];
    };
Carousel.prototype.addController = function (controller) {
        this.controllers.push(controller);
    };
// ..

var carousel = new Carousel();
carousel.addController(new Controls(carousel)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:31:35.243

> 我的继承是这样完成的：
> 
> ```
> $.extend(this.prototype , new parentClass); 
> ```

哎哟。这不是继承（使用`new BigCarousel instanceof Carousel`），而只是复制属性。也许这对你来说已经足够了，但是你应该称之为*mixin*。此外，您应该[避免使用`new`for 继承](https://stackoverflow.com/q/12592913/1048572)。

* * *

> 但这会导致“this”的价值丢失。我该如何解决这个问题？

不可能`this`指向具有嵌套属性的父对象（只要您不想每次都显式设置它）。你只有两个选择：

*   忘记它，并通过添加前缀来组织您的方法（`controlNext`, `controlBind`, ...）
*   为每个轮播提供自己的`controls`对象。对于继承，例如使它们成为`CarouselControls`实例。如果这些控件完全独立于轮播，并且不需要访问它们随处连接的轮播，这尤其适合。如果不是，您仍然可以将对父轮播的引用传递给它们的构造函数，例如：

    ```
    this.controls = new CarouselControls(this); 
    ```

    此外，为了自定义不同轮播中的控件，您可能还必须将其子类化`CarouselControls`- 或者您准备`Controls`对象以服务于一般不同的轮播，这样`BigCarousel`您就可以

    ```
    Carousel.call(this); // make this a carousel
    this.controls.activate({big: true, fast: false}); // or something 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:49:21.343

您可以使用 Function 的 .bind 方法。

在 Javascript 中，函数继承自 Object，因此它们有自己的方法。其中一种方法是 .bind：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

你也做错了继承，使用原始Javascript的正确方法是：

```
ChildClass= function() {
    ParentClass.apply(this, arguments); //calling parent constructor
    //constructor
};

ChildClass.prototype= new ParentClass(); 
```

然后你可以简单地在你的构造函数上这样做：

```
Courossel= function() {
    ParentClass.apply(this, arguments); //calling parent constructor
    this.controls.next.bind(this);
    this.controls.prev.bind(this);
    this.controls.bindControls.bind(this);
} 
```

但我不得不说 Frits 的建议更好，让控件成为自己的类并在 Carousel 构造函数上实例化它，传递对 Carousel 实例的引用（this 关键字）。只是不要称它为“.ref”，这很令人困惑。

# php - 使用 PHPUnit 测试函数中的静态变量

> ID：15884097
> 
> 赞同：0
> 
> 时间：2013-04-08T16:16:07.847
> 
> 标签：php, static, phpunit

我有以下要测试的简化代码，这是我们库中包含的一个函数，用于控制许多不同设备的渲染。

```
<?php
    define('CHROME_18_0_HTTP_USER_AGENT',
            'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.152 Safari/535.19');

    define('FIREFOX_13_HTTP_USER_AGENT',
            'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0');

    define('FIREFOX_16_HTTP_USER_AGENT',
            'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0');

    define('IE_8_HTTP_USER_AGENT',
            'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET CLR 1.1.4322; .NET4.0C; .NET4.0E)');

    define('IE_9_HTTP_USER_AGENT',
            'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)');

    define('OPERA_11_5_HTTP_USER_AGENT',
            'Opera/9.80 (Windows NT 6.1; U; en) Presto/2.9.168 Version/11.50');

    define('SAFARI_5_0_HTTP_USER_AGENT',
            'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/533.20.25 (KHTML, like Gecko) Version/5.0.4 Safari/533.20.27');

function IsIe()
{
    static $IsInternetExplorer;
    if (!isset($IsInternetExplorer))
    {
        $Server = array_key_exists('HTTP_USER_AGENT', $_SERVER) ? $_SERVER['HTTP_USER_AGENT'] : 'UNKNOWN';
        $IsInternetExplorer = ((strpos($Server, 'MSIE') === FALSE) ? FALSE : TRUE);
    }
    return $IsInternetExplorer;
}

/**
 * @backupGlobals enabled
 */
class TEST_IsIEFunctions extends PHPUnit_Framework_TestCase
{
    protected $backupGlobals = TRUE;

    public function UserAgentDataProvider()
    {
        return array(
            'Chrome 18'  => array(CHROME_18_0_HTTP_USER_AGENT, FALSE),
            'FireFox 13' => array(FIREFOX_13_HTTP_USER_AGENT, FALSE),
            'Opera 11'   => array(OPERA_11_5_HTTP_USER_AGENT, FALSE),
            'Safari 5'   => array(SAFARI_5_0_HTTP_USER_AGENT, FALSE),
            'IE 8'       => array(IE_8_HTTP_USER_AGENT, TRUE),
            'IE 9'       => array(IE_9_HTTP_USER_AGENT, TRUE),
        );
    }

    /**
     * @backupGlobals TRUE
     * @dataProvider UserAgentDataProvider
     */
    public function testIsIeFunction($UserAgent, $IsIeResult)
    {
        $_SERVER['HTTP_USER_AGENT'] = $UserAgent;
        $this->assertEquals($IsIeResult, IsIe());
    }
}
?> 
```

错误输出：

```
Q:\>phpunit TestIe.test
PHPUnit 3.7.13 by Sebastian Bergmann.

....FF

Time: 0 seconds, Memory: 2.50Mb

There were 2 failures:

1) TEST_IsIEFunctions::testIsIeFunction with data set "IE 8" ('Mozilla/4.0 (comp
atible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727;
 .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET CLR 1.1.4322;
 .NET4.0C; .NET4.0E)', true)
Failed asserting that false matches expected true.

Q:\TestIe.test:60

2) TEST_IsIEFunctions::testIsIeFunction with data set "IE 9" ('Mozilla/5.0 (comp
atible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)', true)
Failed asserting that false matches expected true.

Q:\TestIe.test:60

FAILURES!
Tests: 6, Assertions: 6, Failures: 2. 
```

我正在使用 PHP 5.4.11、5.3.22 运行 PHPUni 3.7.13。

我尝试将 backupGlobals 的各种版本（注释部分和受保护的变量）设置为 TRUE 和 FALSE，但均未成功。任何建议，将不胜感激。

更新：还尝试了带有注释的 @backup 和受保护的 $backup 的 backupStaticAttributes

# twitter-bootstrap - Bootstrap：如何更改容器的宽度？

> ID：15884102
> 
> 赞同：138
> 
> 时间：2013-04-08T16:16:15.013
> 
> 标签：twitter-bootstrap

我已经使用 Twitter Bootstrap 开发了一个具有固定容器类的网站，但现在客户希望网站宽度为 1000 像素而不是 1170 像素。我不使用 .less 文件。

有没有一种快速的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2015-02-03T02:47:52.200

这是解决方案：

```
@media (min-width: 1200px) {
    .container{
        max-width: 970px;
    }
} 
```

[与@Bastardo 的](https://stackoverflow.com/a/19595984/25507)答案中自定义 Bootstrap 相比，这样做的好处是它不会更改 Bootstrap 文件。例如，如果使用 CDN，您仍然可以从 CDN 下载大部分 Bootstrap。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-06-14T11:07:38.980

转到 Bootstrap 网站上的[自定义](http://getbootstrap.com/customize)部分，然后选择您喜欢的尺寸。您必须设置`@gridColumnWidth`和`@gridGutterWidth`变量。

例如：布局上`@gridColumnWidth = 65px`的`@gridGutterWidth = 20px`结果。`1000px`

然后下载它。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-10-25T17:26:23.690

你在背后说你不会使用 LESS 文件。我使用 2.0 构建了我的第一个 Twitter Bootstrap 主题，并且我在 CSS 中完成了所有工作——创建了一个 override.css 文件。让事情正常工作需要几天的时间。

现在我们有了 3.0。让我向你保证，学习 LESS 所花费的时间比学习所有那些疯狂的 CSS 覆盖所花费的时间要少，如果你对 CSS 感到满意的话，这是非常简单的。做出你想要的改变是小菜一碟。

在 Bootstrap 3.0 中，容器类控制宽度，所有包含的样式都会调整以填充容器。容器宽度变量位于 variables.less 文件的底部。

```
// Container sizes
// --------------------------------------------------

// Small screen / tablet
@container-tablet:            ((720px + @grid-gutter-width));

// Medium screen / desktop
@container-desktop:           ((940px + @grid-gutter-width));

// Large screen / wide desktop
@container-lg-desktop:        ((1020px + @grid-gutter-width)); 
```

有些网站要么没有足够的内容来填充 1020 显示器，要么出于审美原因您想要更窄的框架。因为 BS 使用 12 列网格，所以我使用 960 之类的倍数。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-04-07T16:41:13.313

@mcbjam 已经给出了这个答案，但这里有更多解释。

您可以使用 CSS 文件中的媒体查询轻松进行更改，而无需下载 BS。我刚做了这个，效果很好。

*媒体查询的“最小宽度”值将告诉 CSS仅*在大于 1200 像素（或您选择包含的任何宽度）的屏幕上将容器的宽度更改为 1000 像素。这保留了您网站的响应能力，因此当屏幕尺寸低于该值时（较小的显示器、平板电脑、智能手机等），您的网站仍将调整以适应较小的屏幕。

```
@media (min-width: 1200px) {
  .container {
    width: 1000px;
  }
} 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2019-06-19T09:39:25.457

对于 bootstrap 4，如果您使用的是 Sass，这里是要编辑的变量

```
// Grid containers
//
// Define the maximum width of `.container` for different screen sizes.

$container-max-widths: (
  sm: 540px,
  md: 720px,
  lg: 960px,
  xl: 1140px
) !default; 
```

为了覆盖这个变量，我在导入引导程序之前在我的 .sass 文件中声明了没有 !default 的 $container-max-widths。

注意：我只需要更改 xl 值，所以我不在乎考虑断点。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2015-02-27T10:33:01.167

使用 1000px宽度属性设置您自己的内容容器类，然后使用[container-fluid](http://getbootstrap.com/css/#overview-container) boostrap 类而不是容器。

有效，但可能不是最佳解决方案。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-11-15T06:37:23.970

使用包装器选择器并在该包装器内创建一个具有 100% 宽度的容器来封装整个页面。

```
<style>#wrapper {width: 1000px;} 
#wrapper .container {max-width: 100%; display: block;}</style>
<body>
<div id="wrapper">
  <div class="container">
    <div class="row">.... 
```

现在最大宽度设置为 1000px，你不需要更少或 sass。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-11-10T16:02:44.410

在引导程序 4 中，只需将其添加到您的 .CSS 文件中

```
.container {
   max-width: 70% !important;/*Set your own width %; */
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-29T08:00:12.353

容器尺寸

```
@container-large-desktop
(1140px + @grid-gutter-width) -> (970px + @grid-gutter-width) 
```

在容器尺寸部分中，更改**`1140`**为**`970`**

我希望它对你有帮助。

* * *

谢谢你的正确。自定义引导链接：[https ://getbootstrap.com/docs/3.4/customize/](https://getbootstrap.com/docs/3.4/customize/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-06T20:11:43.983

只需将容器添加到粘性导航栏；

* * *

## 回答 #11

> 赞同：-6
> 
> 时间：2016-04-23T12:43:20.360

在您的 CSS 样式中添加这些 CSS。最好在添加引导 css 文件后添加它以覆盖相同的内容。

```
html, body {
 height: 100%;
 max-width: 100%;
 overflow-x: hidden;
}` 
```

# php - PHP api getUser() 一段时间后返回 0

> ID：15884104
> 
> 赞同：0
> 
> 时间：2013-04-08T16:16:21.953
> 
> 标签：php, facebook

我同时使用 JS 和 PHP SDK。在我的用户访问登录页面后，FB 会话已设置，我认为至少会发生这种情况。

页面重新加载后，将使用函数 $facebook->getUser() 返回用户 ID。所以我猜这意味着 PHP SDK 找到了一个 cookie？无论如何，大约 10 分钟后（我不太确定这个时间范围），当我运行相同的函数时，它返回 0！很烦人。

会议应该持续多长时间？

作为临时解决方案，我在客户端调用 getLoginStatus() 。这将重新激活会话。

还有其他人有这个问题吗？

**更新**

我认为这可能是这个错误.. [http://developers.facebook.com/bugs/406997072723008](http://developers.facebook.com/bugs/406997072723008)

# ubuntu - ubuntu 12.10 上的码头等环境

> ID：15884105
> 
> 赞同：1
> 
> 时间：2013-04-08T16:16:25.720
> 
> 标签：ubuntu, jetty, environment

在 IntelliJ 下运行码头项目时，我使用 System.getenv("var1") api 读取设置为 /etc/environment 的环境变量没有问题。

当我将战争部署到启动时启动 Jetty 的 Ubuntu 服务器时，调用 System.getenv("var1") 时我得到 null

当我在我的用户（suder 用户）下的服务器上运行一个简单的控制台应用程序时，我当前获得了环境变量。

我需要做什么才能使 /etc/environment 中的环境变量在战争自动启动而不是在用户会话下时对战争可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:57:43.977

我想当我在弹性豆茎上工作时，我需要在 jetty.sh 中调整它......

在 jetty.sh 脚本中，您可以获取 /etc/environment 文件，它们将出现。如果这是您正在寻找的内容，请为它打开一个错误，我们会将其添加到 jetty.sh 脚本中以供下一个版本使用。

# php - 抛出数据库错误异常时可以回滚事务吗？

> ID：15884108
> 
> 赞同：0
> 
> 时间：2013-04-08T16:16:40.053
> 
> 标签：php, mysql, cakephp, cakephp-2.3

我有一个大型数据集，需要在发布到服务器时写入数据库，但可能是客户端编辑器中的错误添加了触发“完整性约束违规”的额外记录。

我的问题是，当我到达触发错误的数据点时，数据库中已经更新了很多以前的数据。我需要回滚并拒绝发布的数据。

这是我的控制器的操作。

```
/**
 * Handles saving data from the network editor.
 */
public function json_save()
{
    if($this->request->is('post'))
    {
        $result = array();
        $data = $this->request->input('json_decode');
        if(isset($data->network_id) && !empty($data->network_id))
        {
            $dataSource = $this->Node->getDataSource();
            $dataSource->begin();

            $result['nodes'] = $this->updateModel($data->network_id, $this->Node, 'nodes', $data, array(
                'ParamValue'
            ));
            $result['connections'] = $this->updateModel($data->network_id, $this->Connection, 'connections', $data);

            $dataSource->commit();

            $this->viewClass = 'Json';
            $this->set('result', $result);
            $this->set('_serialize', array(
                'result'
            ));

            return;
        }
    }

    throw new ErrorException('Posted data missing.');
} 
```

我的控制器`updateModel`功能对模型`$this->Node`和`$this->Connection`.

如何回滚通常在更新`$this->Connection`模型期间抛出的“完整性约束违规”。

我不确定它是否是我可以捕获然后执行回滚的 PHP 异常，或者是否有不同的方法来捕获它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:33:55.680

你可以做一个：

```
$dataSource->begin();

try {
  // The queries here.
} catch (Exception $e) {
  $dataSource->rollback();
  throw $e;
}

$dataSource->commit(); 
```

# android - 复制保护并在不同设备上按安装付费

> ID：15884110
> 
> 赞同：0
> 
> 时间：2013-04-08T16:16:43.170
> 
> 标签：android, google-play, google-play-services, android-lvl

我希望我的应用程序用户无法复制它。当用户在不同的手机上安装时，用户必须为应用付费。

一旦用户付费应用程序，那么它应该只能在一部手机上运行。当用户使用相同的登录名安装应用程序时，用户无法在不同的手机上安装应用程序。为此用户需要为此付费。

如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:25:10.523

您无法通过 Google Play 的付费应用功能执行此操作。

充其量，您可以让您的应用程序免费并进行用户必须进行的应用程序内购买，这会将设备 IMEI 或 MAC 地址与您拥有的服务器上的购买联系起来。这样，您可以让用户每次在新设备上安装该应用程序时都购买该应用程序。

复制保护功能现已弃用，您无法使用它。此外，任何拥有根设备的用户都可以将您的 apk 从他们的设备中提取出来。这是你无法控制的。

# android - 如何在活动之间传递一个二维数组？

> ID：15884112
> 
> 赞同：4
> 
> 时间：2013-04-08T16:16:46.050
> 
> 标签：android, arrays, android-activity

我需要在活动之间传递一个二维数组，这是我到目前为止写的：在第一个活动（发件人）中：

```
Intent intent =new Intent(MapsActivity.this, RoutePath.class);
Bundle b = new Bundle();
b.putSerializable("other_locations", other_locations);
intent.putExtras(b);
startActivity(intent); 
```

在第二个（接收器）中：

```
Intent intent = getIntent();
Bundle b = intent.getExtras();
double[][] other_locations=(double[][]) b.getSerializable("other_locations"); 
```

但是我得到了 ClassCastException，我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T16:32:49.323

将**双 2D 数组转换为 String 2D 数组**并像您一样发送它：

发送 ：

```
b.putSerializable("array", other_locations_string); 
```

要得到 ：

```
String[][] value = (String[][]) b.getSerializable("array"); 
```

然后**再次将其转换为双 2d 数组**。

这种行为的原因是因为 Java（以及 Android）不允许您将对象转换为原始类型或原始类型数组。为什么？因为 Java 考虑了一个有效的转换，它将超类对象转换为子类对象，反之亦然。`String[][]`extends `Object`，而 double 和`double[][]`do not。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:25:40.850

试试这个

将 2D Array 转换为 Hashmap 然后使用

```
Map<Double, Double> map = new HashMap<Double, Double>(other_locations.length);
for (Double[] mapping : other_locations)
{
    map.put(mapping[0], mapping[1]);
} 
```

并将地图设置为额外的意图并在第二个活动中获得额外的

# css - 固定菜单在顶部但不是第一个元素

> ID：15884113
> 
> 赞同：0
> 
> 时间：2013-04-08T16:16:56.533
> 
> 标签：css, menu

我如何使用位置：固定；对于我的菜单，当它不是网站上的第一个元素时。我的标志是网站上的首要项目，然后是菜单。当我向下滚动页面时，我希望菜单成为顶部元素。我怎样才能做到这一点？只有css有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:18:18.127

这需要使用 javaScript，但可以很简单地完成。

**例子**

[提琴手](http://jsfiddle.net/QekDr/)

**HTML**

```
<header>
    <p class="site-title">
        <a href="#">Your logo here</a>
    </p>
    <nav>
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
        </ul>
    </nav>
</header> 
```

**CSS**

```
ul{
    background-color: red;
    margin: 0;
}

ul li{
    display: inline;
}

.fixed{
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
} 
```

**jQuery**

```
$(function ()
    {
        // Get the initial position of the menu.
        var menuTop = $('nav').offset().top;

        $(window).scroll(function ()
        {
            // Check position
            if ($(window).scrollTop() > menuTop)
            {
                $('nav').addClass('fixed');
            }
            else
            {
                $('nav').removeClass('fixed');
            }
        });
    }); 
```

# node.js - 在 Node.js 中 AJAX 调用后持久化对象

> ID：15884116
> 
> 赞同：0
> 
> 时间：2013-04-08T16:17:10.270
> 
> 标签：node.js

在 AJAX 请求期间创建的对象如何保留，以便后续 AJAX 调用可以使用它？

我尝试使用调试器查看我的变量在调用路由函数后是否存在，并且每次调用结束后它们似乎都被销毁了。

有什么建议或例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:01:25.840

首先[全局变量是坏的](http://www.yuiblog.com/blog/2006/06/01/global-domination/)。我认为你正在寻找的是所谓的[session](http://en.wikipedia.org/wiki/Session_%28computer_science%29)。使用 web framework [express](http://expressjs.com/)可以轻松实现这一点。

**包.json**

```
{
  "name": "hello-world",
  "description": "hello world test app",
  "version": "0.0.1",
  "private": true,
  "dependencies": {
    "express": "3.x"
  }
} 
```

**应用程序.js**

```
var express = require('express');
var app = express();
app.use(express.logger('dev'));
app.use(express.bodyParser());
app.use(express.cookieParser('keyboard cat'));
app.use(express.cookieSession());

app.get('/count', function (req, res) {
    if (req.session.count === undefined) {
        req.session.count = 1;        
    } else {
        req.session.count += 1;
    }

    res.send('Number of times you visited this page: ' + req.session.count);
});

app.get('/reset', function (req, res) {
    req.session = null;

    res.send('session has been reset');
});

app.listen(3000, '127.0.0.1');
console.log('Listening on port 3000'); 
```

创建文件后，`package.json`您可以安装*express* issue `npm install`。然后运行程序就这么简单`node app.js`。该路线`htttp://localhost:3000/counter`计算您访问该页面的次数。*即使在您关闭服务器之后*。该路由`http://localhost:3000/reset`用于重置计数器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-08T16:55:37.750

我要找的是`global`对象。

为了`foo`在不同的模块和路由器调用之间使用，我声明`global.foo`并使用了该对象。

[http://nodejs.org/api/globals.html](http://nodejs.org/api/globals.html)

# javascript - 分配数字后 nodeValue 保持为空

> ID：15884127
> 
> 赞同：0
> 
> 时间：2013-04-08T16:17:43.870
> 
> 标签：javascript, dom

我使用以下代码创建一个新的 DOM 元素并分配一个值。

```
var xCoordElem = document.createElement("xCoord");
xCoordElem.nodeValue=Canvas.paper.someCircle.attr('cx'); 
```

在哪里`Canvas.paper.someCircle`使用

```
Canvas.paper = Raphael(xOffset,yOffset,width,height);
Canvas.someCircle = Canvas.paper.circle(x, y, radius); 
```

然后我打电话

```
alert("Canvas.paper.someCircle .attr('cx')=" + Canvas.paper.someCircle .attr('cx');
alert("xCoordElem.nodeValue=" + xCoordElem.nodeValue); 
```

第一个警告框给出“Canvas.paper.someCircle .attr('cx')=562”，而第二个警告框给出“xCoordElem.nodeValue=null”。我在 FireFox 上测试这个，使用 FireBug 和 FireBug 也说`xCoordElem.nodeValue=null`。

我希望使（在本例中为 562）`xCoordElem.nodeValue`的值`Canvas.paper.someCircle .attr('cx')`而不是`null`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:07:14.417

使用 .prop() 方法而不是 attr。从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。要检索和更改 DOM 属性，例如表单元素的选中、选择或禁用状态，请使用 .prop() 方法。- 来自 Jquery API 文档。

[http://api.jquery.com/attr/](http://api.jquery.com/attr/)

# vb.net-2010 - 通过用户控件关闭表单时出错

> ID：15884129
> 
> 赞同：2
> 
> 时间：2013-04-08T16:17:56.987
> 
> 标签：vb.net-2010

在我正在编写的程序中，只有一种形式。我已经使用户控件可见，它包含几个按钮。其中一个按钮应该在单击时关闭表单。如果没有收到错误，我找不到任何方法：“无法访问已处置的对象。对象名称：'ShapeContainer。'”我很确定我理解这个问题；关闭表单后，用户控件不再存在，因此`Form.Close()`（我也尝试`Form.Dispose()`过）完成时出现错误，它尝试返回按钮单击事件中的代码。有谁知道我如何通过此用户控件的按钮完成关闭表单而不会出现错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:18:34.213

好的，我对 vb 很陌生，但我认为如果您摆脱`Form.Dispose()`&`Form.Close`然后尝试`Me.Close()`您指的是按钮控件所在的当前表单。

你应该得到这个错误：（`Error 1 'NameSpace_.Form1' cannot refer to itself through its default instance; use 'Me' instead.`）

# django - Django 形式。如何在表单中发布字符串并将其保存为对象 ID？

> ID：15884134
> 
> 赞同：0
> 
> 时间：2013-04-08T16:18:23.840
> 
> 标签：django, forms, validation, post

我有一个与 Towns 模型相关的广告模型。该模型包含具有一些元数据的城镇列表。

在我的表单中，我为城镇实现了 ajax 自动完成功能。每个城镇都有一个 name_unique 字段，并基于此数据自动完成有助于填写输入表单。

但是，我实际上需要与 Town.id 而不是 Town.name_unique 的关系。

我如何执行这样的操作，以便 django 表单将接受 name_unique 值并将其保存为城镇的实际“id”？

如何以字符串形式发布并将其另存为

```
class Advert(models.Model):
    class Meta:
        verbose_name = u"Ogłoszenie"
        verbose_name_plural = u"Ogłoszenia"
        ordering = ['-date_added', ]

    title = models.CharField(verbose_name="Tytuł ogłoszenia", max_length=32)
    text = models.TextField(verbose_name="Treść ogłoszenia", max_length=3000)

    location = models.ForeignKey("division.Towns", verbose_name="Miejscowość")

class AdvertForm(ModelForm):
    category = CustomTreeNodeChoiceField(queryset=Category.objects.filter(parent__isnull=False),
                                         empty_label="Wybierz kategorię", label="Kategoria")

    class Meta:
        model = Advert
        exclude = ('ip', 'user', 'first_name', 'last_name')
        widgets = {
            'location': TextInput
        }

    def __init__(self, *args, **kwargs):
        self.request = kwargs.pop('request', None)
        super(AdvertForm, self).__init__(*args, **kwargs)

def add(request):
    form = AdvertForm(request.POST or None, request=request)

    if form.is_valid():
        advert = form.save(commit=False)
        advert.save()

        return HttpResponseRedirect(reverse('adverts.views.detail', kwargs={'pk': advert.pk}))

    return TemplateResponse(request, "adverts/add.html", {'form': form, }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:18:57.193

为此，我使用了 JQuery-Autocomplete 并将其与自定义 FormField/Widget 结合起来。基本上，小部件呈现两个输入字段，一个包含 id 的隐藏字段和一个包含文本表示和自动完成逻辑的可见字段：

```
<input type="text" class="ac_input" name="%(name)s_text" id="%(html_id)s_text" value="%(text)s"/>
<input type="hidden" name="%(name)s" id="%(html_id)s" value="%(value)s" /> 
```

如果自动完成字段被更改，它会从服务器加载一个字典形式，`[{id: "..", text:""}, ...]`并将文本字段设置为包含文本的值，并将隐藏的 id 字段设置为 id。这种方式隐藏的 id 字段被表单使用，它包含你想要的 id。我将我的代码上传到了一个 pastebin（链接：[http://pastebin.com/LncqfQM2](http://pastebin.com/LncqfQM2)）。代码有点旧，评论一半缺失，一半德语，对不起：/在我使用的形式中：

```
ort = AutocompleteModelChoiceField(Ort.objects, url=reverse("orte-autocompletecallback")) 
```

在视图中：

```
def callback(request):
    # some code loading the objects
    return [{'id': row.pk, 'label':row.name} for row in objects] 
```

我希望这有帮助。

编辑：我开始修改代码的一些部分（整理一下，评论，示例）。如果我完成了，我会在/编辑旧链接中发布另一个链接。

# jquery - jQuery ui 自动完成：字符显示为 ??? （utf-8），添加 header() 停止 php 工作

> ID：15884135
> 
> 赞同：0
> 
> 时间：2013-04-08T16:18:26.727
> 
> 标签：jquery, jquery-ui, utf-8, autocomplete

我正在尝试让 jquery ui 自动完成以处理希伯来字符（utf-8 字符集）。

这是我的工作代码 - 唯一不工作的是字符（自动完成工作，但 ??? 只要是希伯来字母就会出现字符）[ **search.php** ]。

```
<?php
    // <-- this is where I add the header() quoted below
    $conn = mysql_connect("host", "user", "pass")  or die(mysql_error());
    mysql_select_db("user", $conn) or die(mysql_error());
    $q = mb_strtolower(($_GET["term"]),'UTF-8');
    $return = array();
    $query = mysql_query("select * from WORDS where LABEL like '%$q%' or DESCRIPTION like '%$q%' or OTHER like '%$q%'") or die(mysql_error());
    while ($row = mysql_fetch_array($query)) {
        array_push($return,array('label'=>$row['LABEL'],
                                'value'=>$row['LABEL'],
                                'description'=>$row['DESCRIPTION'],
                                'other'=>$row['OTHER']));
    }
    echo(json_encode($return));
?> 
```

我已经阅读了许多类似的 stackoverflow 问题，这些问题都表明我必须在php文件的**顶部添加以下行：**

```
header('Content-Type: application/json; charset=UTF-8'); 
```

或者

```
header('Content-Type: text/html; charset=utf-8'); 
```

**两者都使我的 php 完全停止工作**（没有任何效果，自动完成中没有任何显示）。

我已将我的**php**和**html**文件都保存为 utf-8 支持（并确保字符不会显示为 ??? 当我将它们键入实际文件时），并将元 utf-8 添加到我的 html 如下：

```
<meta charset="utf-8"> 
```

我还尝试将数据编码为 utf-8，所有这些都阻止了 php 工作（自动完成中没有显示任何内容）。更换：

```
$row['DESCRIPTION'] 
```

和

```
mb_convert_encoding($row['DESCRIPTION'], 'UTF-8'); 
```

但是，没有任何效果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T03:05:38.257

在搞砸之后，我终于找到了解决方案。在连接到数据库后在 php 文件中添加这一行就可以了！：

```
mysql_set_charset('utf8',$conn); 
```

# sql - 日期范围集

> ID：15884138
> 
> 赞同：0
> 
> 时间：2013-04-08T16:18:43.680
> 
> 标签：sql, oracle, plsql, oracle10g

我有一个问题分为两部分

**第1部分**

如何以 sysdate 作为当前周获取以下记录集？

```
07-Apr-2013 - 13-Apr-2013
14-Apr-2013 - 20-Apr-2013
21-Apr-2013 - 27-Apr-2013
28-Apr-2013 - 04-May-2013 
```

如果一周过去了 2012 年 4 月 7 日 - 2013 年 4 月 13 日，那么接下来的四组。所以总是会有 4 周的时间。

**第2部分**

如果本周在日期范围内，即 2012 年 4 月 7 日 - 2013 年 4 月 13 日，我想从列表中获取星期一和星期五。

如何获得所需的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:41:58.873

```
select 
  max(trunc(sysdate) + level - 7) as sunday,
  max(trunc(sysdate) + level - 2) as friday,
  max(trunc(sysdate) + level - 1) as saturday
from dual
connect by level < 30
group by to_char(sysdate + level, 'iw')
having max(trunc(sysdate) + level - 1) <= sysdate + 27
order by 1 
```

[小提琴](http://www.sqlfiddle.com/#!4/d41d8/9620)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T17:25:31.337

我对您在示例中提供的日期范围有点困惑，因为每个范围的开始日期是 2013 年的星期日，但您将 2012 年显示为年份。我将假设 2012 是一个错字。

这能得到你想要的吗？

```
select 
case
    when trunc(sysdate) between start_date and end_date
    then to_char(start_date + 1, 'DD-MON-YYYY')
    else to_char(start_date, 'DD-MON-YYYY')
end
|| ' - ' ||
case
    when trunc(sysdate) between start_date and end_date
    then to_char(end_date - 1, 'DD-MON-YYYY')
    else to_char(end_date, 'DD-MON-YYYY')
end date_range
from
(    
    select 
        next_day(trunc(sysdate - 7 + ((level - 1) * 7)), 'SUN') start_date,
        next_day(trunc(sysdate) + ((level - 1) * 7), 'SAT') end_date
    from dual
    connect by level < 5
) 
```

如果你只想要 4 周，那么你可以这样做

```
select 
    to_char(next_day(trunc(sysdate - 7 + ((level - 1) * 7)), 'SUN'), 'DD-MON-YYYY') 
    || ' - ' ||
    to_char(next_day(trunc(sysdate) + ((level - 1) * 7), 'SAT'), 'DD-MON-YYYY') date_range
from dual
connect by level < 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T17:41:55.510

**第 1 部分**（从本周开始 4 周）

```
SELECT TO_CHAR(trunc(SYSDATE, 'DY')) || ' - ' || TO_CHAR(trunc(SYSDATE, 'DY')+ 6) from dual
UNION
SELECT TO_CHAR(trunc(SYSDATE, 'DY')+7) || ' - ' || TO_CHAR(trunc(SYSDATE, 'DY')+ 13) from dual
UNION
SELECT TO_CHAR(trunc(SYSDATE, 'DY')+14) || ' - ' || TO_CHAR(trunc(SYSDATE, 'DY')+ 20) from dual
UNION
SELECT TO_CHAR(trunc(SYSDATE, 'DY')+21) || ' - ' || TO_CHAR(trunc(SYSDATE, 'DY')+ 27) from dual
; 
```

**第 2 部分**本周的周一和周五：

```
SELECT trunc(SYSDATE, 'DY')+1 "Monday", trunc(SYSDATE, 'DY')+5 "Friday"
FROM dual; 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!4/d41d8/9613)。

# mysql - 从A点到B点的mysql正则表达式

> ID：15884142
> 
> 赞同：1
> 
> 时间：2013-04-08T16:18:54.983
> 
> 标签：mysql, sql, regex, replace, sql-update

如何使用 MySQL 从以下代码中删除 iframe 标记：

```
Hai, lasa-ma in lumea mea
Du-te nu ma astepta, pa-pa, pa-pa, pa-pa
Crede-ma-i mai bine asa
Poate ne intalnim candva, pa-pa, pa-pa, pa-pa</pre>
<pre width="80"></pre>
<iframe src="http://www.youtube.com/embed/GRXJuctr7Hk?feature=player_embedded" frameborder="0" width="640" height="360"></iframe> 
```

我在用：

```
update wp_posts set post_content = REPLACE (post_content, '<iframe src="http://www.youtube.com/embed/',''); 
```

但我想删除所有 iframe 标签。在 php 中使用正则表达式，但在 sql 中我不知道如何做到这一点。

对不起，我的英语不好 ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:26:05.650

请注意，这是一个快速而肮脏的解决方案，但如果您的字符串上最多只有一个 iframe 标签，您可以使用如下内容：

```
UPDATE
  wp_posts
SET
  post_content =
  CONCAT(
    SUBSTRING_INDEX(post_content , '<iframe', 1),
    SUBSTRING_INDEX(post_content , '</iframe>', -1)
  ) 
```

第一个 SUBSTRING_INDEX 将返回`<iframe`字符串左侧的所有内容，第二个将返回字符串右侧的所有内容`</iframe>`。

如果有多个 iframe，这将不起作用。

# mysql - 将 HTML 表单发布到新的 wp 数据库表

> ID：15884144
> 
> 赞同：0
> 
> 时间：2013-04-08T16:18:57.777
> 
> 标签：mysql, database, wordpress

我正在尝试使 HTML 表单将输入值发布到 WordPress 数据库中的自定义表中。我设法让一些东西出现在新行中，但几乎我所有的值都返回`N;`而不是表单中的值。

这是我的页面模板中的代码：

```
<?php
global $wpdb;
global $current_user;

$userID = $current_user->ID;
$brand = serialize($_POST["brand"]);
$url = serialize($_POST["url"]);
$sector = serialize($_POST["sector"]);
$keywords = serialize($_POST["keywords"]);
if ( 
'POST' == $_SERVER['REQUEST_METHOD'] && !empty( $_POST['action'] ) && $_POST['action'] == 'updateSearch' ) {
        $ufDataUpdate = $wpdb->insert( 'wp_wct3', array( 
        'date' => current_time('mysql'),
        'userid' => $userID,
        'brand' => $brand,
        'url' => $url, 
        'sector' => $sector,
        'keywords' => $keywords ) );
        }
       ?>

<form method="post">

<label for="brand">Brand/Product Name: </label>
    <input type="text" id="brand" placeholder="eg: Spidr" class="clearfix" required />
    <label for="website">Website address: </label>
    <input type="url" id="url" placeholder="eg: www.spidr.co.uk" class="clearfix" required />
    <label for="sector">Market sector: </label>
    <input type="text" id="sector" placeholder="eg: Internet Marketing Tools" class="clearfix" required />
    <label for="keyword">Keywords/Phrases:<br><span class="orange">(comma separated)</span></label>
    <textarea cols="0" rows="8" class="light" id="keywords" required></textarea>

    <input type="submit" id="submit" name="submit" class="button-65 mobile-button" value="release the spiders!">
    <?php wp_nonce_field( 'updateSearch' ); ?>
    <input name="action" type="hidden" id="action" value="updateSearch" />

</form> 
```

数据库名称在哪里`wp_wct3`，数组中的每一项都是该表中每一列的名称。

我不确定我的问题是出在这段代码上，还是出在数据库本身的设置上。我使用了[Wordpress 自定义表格插件](http://wordpress.org/extend/plugins/custom-tables/)来制作新表格。品牌、网址和部门仅使用`text`定义，而关键字使用`enum('0','1')`.

任何人都知道为什么这些值没有返回而我只是得到了`N;`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:12:53.973

弄清楚了主要问题。我错过了`name`表单本身的属性，所以我的 PHP 没有获取字段值！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T17:09:36.850

```
this is my custom-form template.. it works for me

<?php
/**
Template Name: Custom-Form
 * The template for displaying all pages.
 *
 * This is the template that displays all pages by default.
 * Please note that this is the WordPress construct of pages
 * and that other 'pages' on your WordPress site will use a
 * different template.
 *
 * @package WordPress
 * @subpackage Twenty_Twelve
 * @since Twenty Twelve 1.0
 */

get_header(); ?>

    <div id="primary" class="site-content">
        <div id="content" role="main">

        <?php
        if (!empty($_POST)) {
        global $wpdb;
            $table = wp_achord;
            $data = array(
                'name' => $_POST['yourname'],
                'chord'    => $_POST['chord']
            );
            $format = array(
                '%s',
                '%s'
            );
            $success=$wpdb->insert( $table, $data, $format );
            if($success){
            echo 'data has been save' ; 
}
}
else   {
?>
        <form method="post">
        <input type="text" name="yourname">
        <textarea name="chord"></textarea>
        <input type="submit">
        </form>

       <?php }  ?>

        </div><!-- #content -->
    </div><!-- #primary -->

<?php get_footer(); ?> 
```

# ios - isEqualToString：没有正确比较字符串

> ID：15884152
> 
> 赞同：2
> 
> 时间：2013-04-08T16:19:15.903
> 
> 标签：ios, nsstring, compare

我有两个完全相同的字符串，但它们没有被比较为相等。一个字符串是可变字符串，另一个是普通字符串，我有一个 if 语句来检查两个字符串是否相等。两个字符串的输出是这样的：

```
2013-04-08 09:09:31.555 Pin2Own[650:1303] 6447 E Crocus Dr
2013-04-08 09:09:31.555 Pin2Own[650:1303] 6447 E Crocus Dr 
```

顶部是可变字符串，底部是普通字符串。我尝试将可变字符串转换为普通字符串，但我遇到了同样的问题。我从 NSXMLParser 子类中的 xml 文档中获取可变字符串，另一个从单例中的可变数组中获取。这是 NSXMLParser 类的代码：

```
- (void)parserDidStartDocument:(NSXMLParser *)parser
{
    address = nil;
    zpid = nil;
}

- (void)parser:(NSXMLParser *)parser
didStartElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qualifiedName
    attributes:(NSDictionary *)attributeDict
{
    if ([elementName isEqualToString:@"street"])
    address = [[NSMutableString alloc] init];

    if ([elementName isEqualToString:@"zpid"])
    zpid = [[NSMutableString alloc] init];
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if(address)
    [address setString:string];

    else if(zpid)
    [zpid setString:string];
}

- (void)parser:(NSXMLParser *)parser
 didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:@"street"])
    NSLog(@"%@", address);

    if ([elementName isEqualToString:@"zpid"])
    NSLog(@"zip id is: %@", zpid);
}

- (void)parserDidEndDocument:(NSXMLParser *)parser
{    
    NSMutableArray *annotations = [[Data singleton] annotations];

    for (MapPoint *mp in annotations)
    {
        NSLog(@"%@", mp.fullAddress);
        if ([mp.fullAddress isEqualToString:address])
        {
            mp.zpid = zpid;
        }
        else
        {
            NSLog(@"Did not match address");
        }
    }
} 
```

所以我正在比较两个地址，如果地址相同，则设置一个属性，我确信这将永远是正确的。有没有人看看有什么问题？我真的不知道为什么会这样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T16:32:11.167

在比较它们之前尝试从字符串中修剪空白字符。您可以使用以下

```
firstString = [firstString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
secondString = [secondString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
BOOL stringsAreEqual = [firstString isEqualToString:secondString]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T16:22:04.750

不要责怪可靠的`isEqualToString:`方法。

您必须在任何地址字符串的前导或尾随添加一些空格。

用于`stringByTrimmingCharactersInSet:`删除前导和尾随空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T16:36:56.797

清理字符串是一门艺术，而不是一门科学，但在空格的情况下，它可以做得相当好：

```
// Various types of whitespace in the input string
NSString *dirtyStr = @"   \tJoe\t Doe \n 42,    Main St. \n\rMetropolis    12345  ";

// First trim the initial and final white space characters away
NSString *trimmed  = [dirtyStr stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

NSLog(@"Trimmed: \"%@\"", trimmed);

// Then remove repeated space characters in the middle (if consistent with your requirements)
NSString *cleaned  = [trimmed stringByReplacingOccurrencesOfString:@"\\s+" withString:@" " options:NSRegularExpressionSearch range:NSMakeRange(0, trimmed.length)];

NSLog(@"Cleaned: \"%@\"", cleaned); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-20T07:45:06.003

您的字符串是否包含不可见的控制字符？

```
string = [[string componentsSeparatedByCharactersInSet:[NSCharacterSet controlCharacterSet]] componentsJoinedByString:@""] 
```

# python - 无法使用 Python 和 Twitter API 获得适当数量的推文

> ID：15884156
> 
> 赞同：1
> 
> 时间：2013-04-08T16:19:27.490
> 
> 标签：python, twitter

我正在尝试制作一个简单的 Twitter Bot，如果他们的推文包含某个主题标签，它会转发用户

所以对于我的搜索网址，我有以下内容： `http://search.twitter.com/search.json?q=address&count=1`

但是每当我运行我的程序时，我只会得到 1 条推文及其信息。我很困惑为什么我只得到 1 条推文而不是 10 条。即使我改变“count”参数的值，我也会得到 1 条推文。

如果我更改搜索 url 以将“hashtags”替换为“q”，我会收到一堆错误： `http://search.twitter.com/search.json?hashtags=151milford&count=10`

上面的那一行给了我以下错误

```
File "C:\Users\Documents\pythonbot.py", line 16, in <module>
    o = urllib2.urlopen(url) #open the url
  File "C:\PYTHON27\LIB\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\PYTHON27\LIB\urllib2.py", line 406, in open
    response = meth(req, response)
  File "C:\PYTHON27\LIB\urllib2.py", line 519, in http_response
    'http', request, response, code, msg, hdrs)
  File "C:\PYTHON27\LIB\urllib2.py", line 444, in error
    return self._call_chain(*args)
  File "C:\PYTHON27\LIB\urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "C:\PYTHON27\LIB\urllib2.py", line 527, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
HTTPError: HTTP Error 403: Forbidden 
```

我仍在尝试学习如何使用 API，所以任何提示都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:33:39.427

您使用的计数参数不正确。再次检查[文档](https://dev.twitter.com/docs/api/1/get/search)。

查看返回 5 个项目的此 URL：

```
https://search.twitter.com/search.json?q=stackoverflow&rpp=5 
```

您将使用参数来控制**每页**`rpp`的结果数，并使用参数来控制**页面偏移量**。**`page`**

 ****另请移至更新的 v1.1 API。您可以在@pcalcao 帖子中找到该链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:26:12.550

您确定有更多带有该查询的推文吗？

在浏览器中使用该 url，例如：

```
http://search.twitter.com/search.json?q=trending&count=10 
```

您将获得 10 个结果。

用于 twitter 的 API 只会为您提供相对较新的推文，因此如果没有与您的查询匹配的最近推文，您将一无所获。

看看这里[https://dev.twitter.com/docs/api/1.1](https://dev.twitter.com/docs/api/1.1)看看支持哪些参数。

您遇到的错误是由于没有“hashtags”参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:18:06.140

我想我找到了为什么我的搜索没有找到所有内容。显然 Twitter 没有索引他们所有的推文，所以这就是为什么我没有在我的搜索结果中得到所有内容的原因。

[https://support.twitter.com/articles/66018#](https://support.twitter.com/articles/66018#)****

# python - Python - 评估字符串中的字符串表达式

> ID：15884161
> 
> 赞同：0
> 
> 时间：2013-04-08T16:19:44.270
> 
> 标签：python, string, expression, eval

我正在尝试做这样的事情

[计算字符串中的数学表达式](https://stackoverflow.com/questions/2371436/evaluating-a-mathematical-expression-in-a-string)

**更新 - 有关应用程序的一些详细信息**

该应用程序向用户“公开”一些变量。公开变量的一个示例是 user_name。然后，应用程序的用户可以创建一个名为“user_name_upper”的新变量，该变量可以设置为 user_name.upper()。另一个例子是暴露变量 first_name 和 last_name，用户可以创建一个名为 'full_name = last_name.upper() + ',' + first_name.upper()' 的新变量。这是使用输入框 UI 元素输入的。所以没有钩子进入程序。或者把它想象成一个像 excel 这样的报告，我可以在其中创建一个新列来操作一些已经定义的变量。

这个应用程序的用户不是程序员。但是可以为他们提供一个示例列表，以找到解决字符串操作的方法

但是，我的表达式将用于字符串操作。类似“string3 = string1 + string2”的东西。在这里，我想将 string3 的值设置为附加 string2 的 string1 的值。或“string1 = string2.lower()”

我已经研究并得出结论，可以使用 eval 但非常危险。据我了解， ast_literal_eval() 不适用于像 lower() 这样的字符串操作方法，如此处所述[Why does this string not work with ast.literal_eval](https://stackoverflow.com/questions/12080197/why-does-this-string-not-work-with-ast-literal-eval)

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:47:19.563

`ast.literal_eval`是错误的功能。它只评估像`2.3`or之类的文字`"hello"`。

您想要的是内置函数`compile()`或`ast.parse()`. 这些函数恕我直言（我从未使用过它们）可以创建抽象语法树。看第二段：

[http://docs.python.org/2/library/ast.html](http://docs.python.org/2/library/ast.html)

当然，让您的用户输入任意表达式是有风险的。但是我认为您会问这个问题，因为您想在 AST 中搜索有问题的代码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-08T16:29:39.593

虽然我会推荐使用它的其他方法，但如果您需要使用动态变量（当您不知道它们将被调用什么，或者会有多少时），我发现字典效果很好。

前任：

```
def createVariable(variables, string1, string2):
    variables[string1] = string2.lower() 
```

# c# - 将选定的值存储到枚举类型

> ID：15884166
> 
> 赞同：1
> 
> 时间：2013-04-08T16:20:11.180
> 
> 标签：c#, .net, asp.net-mvc, entity-framework

我有一个具有枚举类型的页面。以下是页面加载内aspx.cs中的代码

```
 protected void Page_Load(object sender, EventArgs e)
       {
            if (!IsPostBack)
            {
                RegardingObject();
     ListItem selectedType = dropRegarding.Items.FindByValue(Event.RegardingObjectType.ToString());
                    if(selectedType!=null)
                    {
                        selectedType.Selected = true;
                    } 
```

以下填充下拉列表

```
 private void RegardingObject()
       {
           dropRegarding.Items.Add(new ListItem("UnknownOrNone","0"));
           dropRegarding.Items.Add(new ListItem("LiveTrack", "10"));
           dropRegarding.Items.Add(new ListItem("Activity", "11"));
       } 
```

在保存它的同时我正在使用

```
 Event.RegardingObjectType = (EnumTypes)Enum.Parse(typeof(EnumTypes),
                                        dropRegarding.SelectedItem.ToString()); 
```

获取不能将类型“datacontracts.enumtypes”隐式转换为“datacontracts.enumtypes.regardingobjecttype”

在 datacontracts.enumtypes.cs 我有

```
 public class EnumTypes
{

    public enum RegardingObject
    {
        UnknownOrNone = 0,
       LiveTrack = 10,
        Activity = 11
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:41:46.787

那是因为`EnumTypes`不是枚举，`RegardingObject`是：

```
Event.RegardingObjectType = (EnumTypes.RegardingObject)Enum.Parse(typeof(EnumTypes.RegardingObject),
    dropRegarding.SelectedItem.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:01:34.263

这样做

```
 Event.RegardingObjectType = (EnumTypes.RegardingObjectType)Enum.Parse(typeof(EnumTypes.RegardingObjectType),
                                         dropRegarding.SelectedItem.ToString()); 
```

它的 EnumTypes.regardingobjecttype 而不是 enumtypes

# powershell - 通过文件创建日期范围限制 Powershell Get-ChildItem

> ID：15884173
> 
> 赞同：43
> 
> 时间：2013-04-08T16:20:51.230
> 
> 标签：powershell, get-childitem

我使用 Powershell 命令生成某些文件类型的 CSV 报告。我的目标是找出在特定日期范围内添加了多少。现在，脚本找到了所有内容，我按日期排序以找到我的号码。我想修改命令以仅返回创建日期范围内的对象，即如果此文件是在 2013 年 3 月 1 日至 2013 年 3 月 31 日之间创建的。可能有一种方法可以通过日期范围限制命令，可能使用 Select-对象，我就是想不通。

```
Get-ChildItem 'PATH' -recurse -include @("*.tif*","*.jp2","*.pdf") | Select-Object FullName, CreationTime, @{Name="Mbytes";Expression={$_.Length/1Kb}}, @{Name="Age";Expression={(((Get-Date) - $_.CreationTime).Days)}} | Export-Csv 'PATH\scans.csv' 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-08T16:34:12.970

使用`Where-Object`和测试`$_.CreationTime`：

```
Get-ChildItem 'PATH' -recurse -include @("*.tif*","*.jp2","*.pdf") | 
    Where-Object { $_.CreationTime -ge "03/01/2013" -and $_.CreationTime -le "03/31/2013" } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T16:39:05.707

使用`Where-Object`，例如：

```
Get-ChildItem 'PATH' -recurse -include @("*.tif*","*.jp2","*.pdf") | 
Where-Object { $_.CreationTime -gt "03/01/2013" -and $_.CreationTime -lt "03/31/2013" }
Select-Object FullName, CreationTime, @{Name="Mbytes";Expression={$_.Length/1Kb}}, @{Name="Age";Expression={(((Get-Date) - $_.CreationTime).Days)}} | 
Export-Csv 'PATH\scans.csv' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-02T14:25:44.870

修复...

```
Get-ChildItem C:\Windows\ -recurse -include @("*.txt*","*.pdf") |
Where-Object {$_.CreationTime -gt "01/01/2013" -and $_.CreationTime -lt "12/02/2014"} | 
Select-Object FullName, CreationTime, @{Name="Mbytes";Expression={$_.Length/1Kb}}, @{Name="Age";Expression={(((Get-Date) - $_.CreationTime).Days)}} | 
Export-Csv C:\search_TXT-and-PDF_files_01012013-to-12022014_sort.txt 
```

# c# - SQL Server 2008 R2 中的自动注销

> ID：15884174
> 
> 赞同：0
> 
> 时间：2013-04-08T16:20:53.503
> 
> 标签：c#, sql, sql-server, wpf, visual-studio

在我的 SQL Server 数据库中，我有一个包含用户的表。这个表有一个名为logged_on的列，它有点，是真还是假。当有人登录时，该列将是 true，否则为 false。如果有人在使用我的 wpf 应用程序时发生了某些事情，例如电源消失并且应用程序无法注销用户，此列将为真，用户将无法再次登录，因为应用程序会告诉该用户他已经登录了。我能做些什么来避免这种情况吗？在服务器端还是在应用程序中？

任何建议表示赞赏:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:51:26.523

我认为您需要一个“LastActive”日期时间戳。然后运行一个计划的作业，上面写着“如果您已经有 X 分钟不活动，请更改 logged_on 标志的状态”。

您是否试图确保同时只能激活一个登录？那是最后的游戏吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:49:06.700

听起来您需要稍微改变方法，也许跟踪上次交互日期/时间（每次 WPF 应用程序调用 SQL）并强制执行会话超时限制。除了 *logged_on* 位字段外，您还可以使用该 DateTime 自动注销几分钟内未与服务器交互的任何人（如果 DateTime 太陈旧，则始终将 *logged_on* 切换为 false）。

在用户再次登录而没有先注销的情况下，您不能丢弃旧登录是否有一个重要原因？

# google-maps-api-3 - 在 Google 地图中与多个标记一起创建多个单独的信息窗口

> ID：15884175
> 
> 赞同：0
> 
> 时间：2013-04-08T16:21:00.050
> 
> 标签：google-maps-api-3, xml-parsing, infowindow

我的项目搜索 eBay API（使用 PHP 并返回 simpleXML）并返回多个项目的邮政编码（目前为 5 个）。然后使用这些信息在我的网站上的谷歌地图上绘制标记。我想做的是创建多个信息窗口以及这些标记，这样我也可以从 eBay 拍卖返回信息并将其放入信息窗口（拍卖链接、物品图片等），但我没有运气！我似乎无法在我的循环中获得正确的闭包，并且我一直在获取信息窗口中显示的数组中的最后一个邮政编码，而不是实际与该标记相关联的邮政编码（只是为了测试目的而这样做）。

我究竟做错了什么？任何信息都会有所帮助。

这是我目前的代码：

```
for (var i = 0; i < msg.length; i++) {
    info = msg[i];
    console.log(info);
    geocoder.geocode( { 'address': msg[i]}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            var marker = new google.maps.Marker({
                map: map,
                animation: google.maps.Animation.DROP,
                icon: image,
                position: results[0].geometry.location
            })
            listenMarker(marker);
            markerBounds.extend(results[0].geometry.location);
            map.fitBounds(markerBounds);
        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
    });
}

function listenMarker (marker){
    google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(info);
    infoWindow.open(map, this);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:18:31.360

您还需要在地理编码器调用上使用函数闭包（未测试），看起来您的 listMarker 函数也可能有问题（如果您依赖全局，似乎缺少“信息”的定义的价值，这可能是你的问题）：

```
function geocodeAddress(msg)
{
            geocoder.geocode( { 'address': msg}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
            var marker = new google.maps.Marker({
            map: map,
            animation: google.maps.Animation.DROP,
            icon: image,
            position: results[0].geometry.location
            })
                listenMarker(marker, msg);
                markerBounds.extend(results[0].geometry.location);
                map.fitBounds(markerBounds);
        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
    });
}

for (var i = 0; i < msg.length; i++) {
            info = msg[i];
            console.log(info);
            geocodeAddress(msg[i]);
}

function listenMarker (marker, info){
    google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(info);
    infoWindow.open(map, this);
}); 
```

# c# - c# xmlnode 选择要删除的单个节点

> ID：15884178
> 
> 赞同：0
> 
> 时间：2013-04-08T16:21:07.893
> 
> 标签：c#, xml, xml-parsing, xml-documentation

我有一个具有如下节点/值的 XML 文档：

```
<data name="btnAutoTrans" xml:space="preserve">
  <value>Auto Trans</value>
</data>
<data name="btnDieEngine" xml:space="preserve">
 <value>Diesel Engine</value>
</data> 
```

我需要为特定名称选择一个节点 =“btnDieEngine”（例如）

但是我从谷歌搜索中尝试过的所有代码总是返回 NULL 值。

我原来的代码是

```
XmlNode node = xmldoc.SelectSingleNode("data[name='btnDieEngine']"); 
```

但这返回null。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:23:15.157

您的 XPath 无效。试试那个：

```
XmlNode node = xmldoc.SelectSingleNode("data[@name='btnDieEngine']"); 
```

# session - 成功登录后设置 CakePHP 会话的持续时间

> ID：15884179
> 
> 赞同：0
> 
> 时间：2013-04-08T16:21:10.367
> 
> 标签：session, cakephp, authentication, login, session-timeout

我有一个允许使用基本身份验证登录的 CakePHP 应用程序。每个用户都有一个特定的角色，例如“普通”、“管理员”等。

有没有办法设置他们在要求他们重新登录之前可以保持登录状态的时间？

理想情况下，我希望普通用户为 1 小时，管理员为 14 小时。

谢谢！

# git - 如何通过命令行参数覆盖 Git 配置选项？

> ID：15884180
> 
> 赞同：50
> 
> 时间：2013-04-08T16:21:10.777
> 
> 标签：git, config

`http.proxy`在使用命令行参数直接调用 Git 命令时，我想覆盖某些 Git 配置选项（在我的情况下）。这可能吗？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-04-08T16:26:35.553

是的，您可以使用 传递它`-c`，例如：

```
git -c http.proxy=someproxy clone https://github.com/user/repo.git 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-10-20T19:31:28.007

`git -c`请注意，有一个关于覆盖（使用命令）配置的新功能：

您不能将配置设置为空字符串（`git -c http.proxy=`或任何其他字符串`foo.bar=`），直到[git 2.1.2](https://github.com/git/git/releases/tag/v2.1.2)（2014 年 9 月 30 日），并[提交 a789ca7](https://github.com/git/git/commit/a789ca70e7a5b02973b116d21674acd795238f99) [Junio C Hamano ( `gitster`)](https://github.com/gitster)

## 配置：教“ `git -c`”识别空字符串

> 在配置文件中，您可以执行以下操作：

```
[foo]
bar 
```

> 打开“ `foo.bar`”布尔标志，你可以这样做：

```
[foo]
bar= 
```

> 将“ `foo.bar`”设置为空字符串。
> 但是，git 的 " `-c`" 参数同时处理：

```
git -c foo.bar 
```

> 和

```
git -c foo.bar= 
```

> 作为布尔标志，并且无法将变量设置为空字符串。
> 此补丁使后一种形式能够做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-13T22:22:55.117

如 Git 2.23（2019 年第三季度）中所述，但在此之前已经可用，您可以覆盖 Git 配置选项的另一个地方是... **git aliases**！

请参阅[Denton Liu ( ) 的](https://github.com/Denton-L)[提交 459842e](https://github.com/git/git/commit/459842e1c2777812130545dc52753c6f4d517e21)和[提交 01991ce](https://github.com/git/git/commit/01991cee86a01bfb1dd13a7c73d1f793c0b718d3)（2019 年 6 月 5 日[）](https://github.com/Denton-L)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 71221f2](https://github.com/git/git/commit/71221f28ec3f887620f0089b8f42bcf9b19f4a42))^(中，2019 年 7 月 9 日）)[`Denton-L`](https://github.com/Denton-L)
^([`gitster`](https://github.com/gitster))

> ## `config/alias.txt`：接受非命令第一个单词的文档别名
> 
> 可以看到，允许以非命令第一个单词开头的别名，例如`loud-rebase = -c commit.verbose=true rebase`,。
> 但是，这对用户来说并不是很明显，因为别名实例通常以命令开头。
> 
> 记录别名可以以非命令第一个单词开头的事实，以便用户能够发现这是一项功能。

[该文档](https://github.com/git/git/blob/459842e1c2777812130545dc52753c6f4d517e21/Documentation/config/alias.txt#L10-L18)现在包括：

> 请注意，别名的第一个单词不一定是命令。**它可以是一个命令行选项，将传递给`git`**.
> 
> `-c`特别是，当与传递一次性配置或`-p`强制分页一起使用时，这很有用。
> 
> 例如，`loud-rebase = -c commit.verbose=true rebase`可以定义为 running`git loud-rebase`相当于`git -c commit.verbose=true rebase`.
> 
> 此外，`ps = -p status`这将是一个有用的别名，因为它将对原始命令没有`git ps`的输出进行分页。`git status`

例如，我定义：

```
vonc@vonvb:~/gits/src/git$ git config alias.loud-commit "-c commit.verbose=true commit"
vonc@vonvb:~/gits/src/git$ git loud-commit -a 
```

这给了我：

[![git 大声提交](https://i.stack.imgur.com/xWaTP.png)](https://i.stack.imgur.com/xWaTP.png)

**diff** （红色部分）*不会*出现在带有简单`git commit -a`.

别名不需要以`!git`调用 shell 命令开头`git`。
它可以直接以`git`命令选项开头，例如`-c`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-17T14:52:57.843

是的，这是可能的。一开始git是如何存储他的配置的？我在本地有工作回购

```
cat ./projects/autoopt.ru/.git/config 
```

[![在此处输入图像描述](https://i.stack.imgur.com/ofFVY.png)](https://i.stack.imgur.com/ofFVY.png)

所以 git 将设置存储在文件中。你可以直接编辑这个文件，但是 git 提供了 CLI 来简化编辑配置参数。

那么什么是指挥？可能是 git config set= 嗯...我需要参数名称 url？设置 url= 不起作用？

那么如何找出 git config 命令的格式呢？

*   在我的情况下打开谷歌，yandex
*   “git 配置规范”
*   [官方 git 文档](https://git-scm.com/docs/git-config)
*   git config name [value [value-pattern]] （这意味着您需要传递属性名称和空格分隔的值

现在，当我需要通过给定的配置文件内容更改远程 repos url 时，我需要找出如何编写参数的名称。

```
[remote "origin"]
   url=... 
```

远程类、实例来源、类成员 url 与值。

所以答案是

```
git config remote.origin.url <value> 
```

# php - add_meta_box 不保存到数据库

> ID：15884182
> 
> 赞同：0
> 
> 时间：2013-04-08T16:21:19.817
> 
> 标签：php, wordpress, plugins, save

我创建了一个带有自定义帖子选项的侧边栏框，但我似乎无法将其余的帖子数据保存到数据库中。

```
<?php
/*
Plugin Name: Column Height Calculator
Plugin URI: #
Description: calculates the height of the column
Version: 0.1
Author: Ben Crawford
Author URI:
*/

add_action('admin_menu', 'my_post_options_box');

function my_post_options_box() {
add_meta_box('post_info', 'Column Height Info', 'custom_post_info', 'post', 'side', 'high');
}

//Adds the actual option box
function custom_post_info() {
global $post;
?>
<fieldset id="mycustom-div">
<div>
<p>
<label for="column_type" >Column Type:</label>
<br />
<select name="column_type" id="column_type">
  <option value="JBC">Justified Body Copy</option>
  <option value="LRC">Left Raggid Copy</option>
</select>
<br />
<br />
<label for="header_size">Header Size:</label>
<br />
<input type="text" name="header_size" id="header_size" value="<?php echo get_post_meta($post->ID, 'header_size', true); ?>">
</p>
</div>
</fieldset>
<?php
}

add_action('save_post', 'custom_add_save');
function custom_add_save($postID){
// called after a post or page is saved
if($parent_id = wp_is_post_revision($postID))
{
$postID = $parent_id;
}

if ($_POST['column_type']) {
update_custom_meta($postID, $_POST['column_type'], 'column_type');
}
if ($_POST['header_size']) {
update_custom_meta($postID, $_POST['header_size'], 'header_size');
}
}

function update_custom_meta($postID, $newvalue, $field_name) {
// To create new meta
if(!get_post_meta($postID, $field_name)){
add_post_meta($postID, $field_name, $newvalue);
}else{
// or to update existing meta
update_post_meta($postID, $field_name, $newvalue);
}
}
?> 
```

我手动将 column_type 和 header_size 添加到 post 表中，但数据没有进入数据库。帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:26:57.623

这种数据不会保存在 post 表中。我认为这一切都归于 postmeta 表。

# javascript - 如何检索数据数组 arrMyLatLng 函数

> ID：15884184
> 
> 赞同：0
> 
> 时间：2013-04-08T16:21:26.630
> 
> 标签：javascript

如何检索数据数组 arrMyLatLng 函数。db.transaction(queryDB, errorCB);

```
 function queryDB(tx) 
{ 
tx.executeSql('SELECT * FROM Attractions', [], querySuccess, errorCB);
}

   function querySuccess(tx, results) 
  {
 var arrMyLatLng = [];
 var len = results.rows.length;
 var arrLatitude=[], arrLongitude=[];
 for (var i=0; i<len; i++)
 {
    arrLatitude[i] =  results.rows.item(i).latitude;
    arrLongitude[i] = results.rows.item(i).longitude;
    arrMyLatLng[i] = new google.maps.LatLng(arrLatitude[i], arrLongitude[i]);
 }

return  arrMyLatLng  ; // Need this array to manipulate the data from it is outside of the function.
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:30:57.157

您正在执行一个异步操作，该操作将在操作完成时执行其回调。因此，没有什么可以返回`arrMyLatLng`。所有工作`arrMyLatLng`都需要在回调中完成。您可以做的一件事是调用另一个函数`querySuccess`并传递`arrMyLatLng`给它：

```
function querySuccess(tx, results) {  
   var arrMyLatLng = [];
   var len = results.rows.length;
   var arrLatitude=[], arrLongitude=[];

   for (var i=0; i<len; i++) {
       arrLatitude[i] =  results.rows.item(i).latitude;
       arrLongitude[i] = results.rows.item(i).longitude;
       arrMyLatLng[i] = new google.maps.LatLng(arrLatitude[i], arrLongitude[i]);
   }

   someOtherFunction(arrMyLatLng);
} 
```

# java - BlazeDS 无法更改轮询间隔

> ID：15884185
> 
> 赞同：2
> 
> 时间：2013-04-08T16:21:29.833
> 
> 标签：java, apache-flex, coldfusion, blazeds

我正在尝试更改 BlazeDS 通道配置上的轮询间隔，但客户端似乎总是以 3 个批次获取消息。我正在测试每秒发送 1 条消息。服务器正在运行带有 Railo 的 Tomcat。消息流是这样的（我没有设计它，但我大部分时间都坚持这种设计）：

1.  Python -> ColdFusion Web 服务
2.  ColdFusion -> Java ServiceAdapter / MessageBroker
3.  Flex 订阅 BlazeDS

我想我已经在 services-config.xml 中找到了通道定义，因为如果我将其注释掉，客户端将无法连接。客户端正在使用订阅来获取消息。我试过混合和匹配配置设置，但没有成功。

```
 <channel-definition id="cf-polling-amf" class="mx.messaging.channels.SecureAMFChannel">
        <endpoint uri="https://{server.name}:{server.port}{context.root}/flex2gateway/cfamfpolling" class="flex.messaging.endpoints.SecureAMFEndpoint"/>
        <properties>
            <polling-enabled>true</polling-enabled>
            <polling-interval-seconds>0</polling-interval-seconds>
            <polling-interval-millis>0</polling-interval-millis>
        </properties>
    </channel-definition> 
```

我真的很想将其更改为长轮询，但我试图只更改一个配置，我什至无法让它工作。服务器将只有少量用户 (<20)。

任何帮助或建议将不胜感激！谢谢。

# ruby-on-rails - Rake 中止，无法加载文件 ./bundler/setup，ruby 需要 RubyOnRails 应用程序中的错误

> ID：15884187
> 
> 赞同：2
> 
> 时间：2013-04-08T16:21:35.123
> 
> 标签：ruby-on-rails, ruby, rubygems

我一直在为班级从事 Ruby on Rails 项目，但遇到了一些问题。当我运行 bundle install 时，我所有的 gem 都会正确安装。当我运行 rake db:setup 时，出现以下错误。

```
tuggernuts2@tn-Extensa5620:~/Workspace/Class/baseball-manager$ rake db:setup
rake aborted!
cannot load such file -- ./bundler/setup
/home/tuggernuts2/Workspace/Class/baseball-manager/config/boot.rb:6:in `<top (required)>'
/home/tuggernuts2/Workspace/Class/baseball-manager/config/application.rb:1:in `<top (required)>'
/home/tuggernuts2/Workspace/Class/baseball-manager/Rakefile:5:in `<top (required)>'
(See full trace by running task with --trace) 
```

当我尝试运行任何单元测试时，我也会收到此错误：

```
tuggernuts2@tn-Extensa5620:~/Workspace/Class/baseball-manager$ ruby test/unit/user_test.rb 
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:60:in `require': cannot load such file -- ./bundler/setup (LoadError)
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from /home/tuggernuts2/Workspace/Class/baseball-manager/config/boot.rb:6:in `<top (required)>'
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/tuggernuts2/Workspace/Class/baseball-manager/config/application.rb:1:in `<top (required)>'
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/tuggernuts2/Workspace/Class/baseball-manager/config/environment.rb:2:in `<top (required)>'
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /home/tuggernuts2/Workspace/Class/baseball-manager/test/test_helper.rb:2:in `<top (required)>'
    from test/unit/user_test.rb:2:in `require_relative'
    from test/unit/user_test.rb:2:in `<main>' 
```

我正在与其他 4 人一起从事这个项目，但没有其他人收到这些错误，所以我推断问题出在我的设置上，而不是代码上。

我正在运行 ruby​​ 版本“ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-linux]”

我正在运行 ruby​​ gems 1.8.23 版

我正在运行 rails 3.2.5 版

但是当我运行 rails -v 时，我得到相同的 require 错误，以及与上面相同的 ./bundler/setup 错误。我在谷歌上搜索这些问题已经有一段时间了，到目前为止我发现的解决方案都没有帮助。

我试过重新安装 gems，我试过运行 gem update -system，但这只是给了我：

```
 ERROR:  While executing gem ... (RuntimeError)
    gem update --system is disabled on Debian, because it will overwrite the content of the rubygems Debian package, and might break your Debian system in subtle ways. The Debian-supported way to update rubygems is through apt-get, using Debian official repositories.
If you really know what you are doing, you can still update rubygems by setting the REALLY_GEM_UPDATE_SYSTEM environment variable, but please remember that this is completely unsupported by Debian. 
```

从昨天开始，rake 错误是新的，ruby 要求错误从一开始就几乎存在。生活一直是一场斗争。

我尝试了一堆 require、require "./..."、require_relative 的组合，但似乎没有任何东西可以修复 require 错误。

任何和所有的帮助表示赞赏。提前致谢。

编辑：输出来自：bundle exec rake db:setup --trace

```
tuggernuts2@tn-Extensa5620:~/Workspace/Class/baseball-manager$ bundle exec rake db:setup --trace
rake aborted!
cannot load such file -- ./bundler/setup
/home/tuggernuts2/Workspace/Class/baseball-manager/config/boot.rb:7:in `require'
/home/tuggernuts2/Workspace/Class/baseball-manager/config/boot.rb:7:in `<top (required)>'
/home/tuggernuts2/Workspace/Class/baseball-manager/config/application.rb:1:in `require'
/home/tuggernuts2/Workspace/Class/baseball-manager/config/application.rb:1:in `<top (required)>'
/home/tuggernuts2/Workspace/Class/baseball-manager/Rakefile:5:in `require'
/home/tuggernuts2/Workspace/Class/baseball-manager/Rakefile:5:in `<top (required)>'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_module.rb:25:in `load'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_module.rb:25:in `load_rakefile'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:583:in `raw_load_rakefile'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:89:in `block in load_rakefile'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:88:in `load_rakefile'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:72:in `block in run'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/var/lib/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/var/lib/gems/1.9.1/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/usr/local/bin/rake:23:in `load'
/usr/local/bin/rake:23:in `<main>' 
```

# java - 当 Java 类未在我的代码中实例化时，是否可以使用 Groovy 覆盖 Java 类中的方法？

> ID：15884190
> 
> 赞同：4
> 
> 时间：2013-04-08T16:21:52.040
> 
> 标签：java, eclipse, groovy, eclipse-rcp, rcp

我正在开发一个 Eclipse RCP 应用程序，我最近开始在其中使用 Groovy。所以我 99% 的代码仍然是 Java。

我读到可以使用 Groovy 覆盖和向 Java 类添加方法，并且我能够通过向 java.lang.String 添加方法来测试这一点。

但这仅在我在 Groovy 类中使​​用字符串时才有效。被覆盖的方法不被视为在 Java 类中被覆盖。

这是一些代码：

```
/*
 * This is a Java class
 */
public class CTabItem {
   ...
   private API
   ...
   public void setControl(Control control){
       private API
   }
}

/*
 * This is also a Java class
 */
public class Control {
   ...
   private API
   ...
}

/*
 * This is also a Java class
 */
public class OtherClass {
  ...
  private API
  ...
  private void someMethodIDontKnow(){
     Control control = new Control();
     CTabItem tab = new CTabItem();
     tab.setControl(control);
  }
}

/*
 * This is a Groovy class
 */
public class MyViewPart extends org.eclipse.ui.part.ViewPart {
     ....
     public void createPartControl(Composite parent) {
          /* parent (or the parent of parent) is a Control
           which is set somewhere in a CTabItem to which
           I don't get access  */
     }        
} 
```

我需要从控件中获取选项卡。但由于实例化 MyViewPart 的不是我，而是一些私有 API，所以我无权访问它。Groovy 可以在这里为我做些什么吗？欢迎任何建议或代码。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T19:22:29.133

简短的回答是：不，如果创建对象和调用方法的代码是纯Java（即非Groovy）代码，这是不可能的。Groovy 通过拦截对象（Java 对象和 Groovy 对象）上的所有方法调用并使用它的[ExpandoMetaClass](http://groovy.codehaus.org/ExpandoMetaClass)来添加行为来发挥它的魔力。但是，它不能改变纯 Java 代码如何确定在纯 Java 类上调用哪个方法。要查看，请运行以下示例代码：

```
// UseTheString.java (a pure Java class)
public class UseTheString {
    public static void main(String[] arg) {
        String s = "Hello world";
        System.out.println(s);
        System.out.println(s.substring(1));
        ModifyStringClass.messWithMetaClasses(s);
        System.out.println(s.substring(1));
    }
} 
```

和

```
// ModifyStringClass.groovy (a Groovy class)
class ModifyStringClass {
    public static messWithMetaClasses(String t) {
        java.lang.String.metaClass.substring = { int n -> "!" }
        println(t.substring(1))
    }
} 
```

你会得到输出：

```
Hello world
ello world
!
ello world 
```

如您所见，如果从其他 Groovy 代码调用纯 Java 对象上的方法，Groovy 可以覆盖该方法，但不能更改 Java 代码使用它的方式。

# c# - 简化实体框架中的复杂包含连接

> ID：15884196
> 
> 赞同：1
> 
> 时间：2013-04-08T16:22:08.603
> 
> 标签：c#, entity-framework-5

现在我有一个讨厌的复杂查询，我需要加载大量数据进行处理。数据嵌套运行得非常深......

```
public List<agZone> agZone_GetZonesWithProjectionInformation(IEnumerable<int> ids, bool includeHidden)
{
    var zones = this.BaseDB.agZones.Where(x => (includeHidden || includeHidden == x.agField.Hidden)
                                && x.agField.WeatherSourceID.HasValue
                                && x.agField.WeatherProjectionID.HasValue
                                && x.agField.SeedID.HasValue
                                && ids.Contains(x.ZoneID))
                        .Include(x => x.agField)
                        .Include(x => x.agField.agSeed)
                        .Include(x => x.agField.agSeed.agSeedCompany)
                        .Include(x => x.agField.agSeed.agSeedConfigs)
                        .Include(x => x.agField.agSeed.agSeedGrowthStages)
                        .Include(x => x.agField.agSeed.agSeedGrowthStages.Select(y => y.agGrowthStage))
                        .Include(x => x.agField.agFieldGrowthStages)
                        .Include(x => x.agField.agFarm)
                        .Include(x => x.agField.agFarm.agGrower)
                        .Include(x => x.agField.agFarm.agGrower.agUsers)
                        .Include(x => x.agZoneNitrogenApplications)
                        .Include(x => x.agZoneWaterApplications)
                        .Include(x => x.agSoilSymbol)
                        .Include(x => x.agSoilSymbol.agSoilConfigs)
                        .AsNoTracking();

    return zones.ToList();
} 
```

到目前为止，我知道这里发生了两件坏事：

1.  查询使用`.Contains(...)`- Entity Framework 5 据说无法编译或缓存这些查询 - 因此每次都必须重新生成它们。这很**糟糕**，但我现在没有办法解决它。更糟糕的是，在生成查询时，EF 似乎阻塞了等待查询的其他线程。这真是太可怕了。
2.  由于重复的主详细信息，包含大大增加了查询复杂性和返回的数据量。生成的 SQL 命令长达 2100 多行，执行计划直接来自地狱。

`zones`延迟加载的数据太多（除了通常很糟糕）而且我不知道有一种方法可以在我的变量上进行多次急切加载。

我是否需要进行多个查询，然后自己使用`foreach`循环和/或 LINQ 将数据压缩在一起？我确实需要将所有这些数据加载到内存中，否则我的计算将运行得非常糟糕。到目前为止，这实际上是我能做到的最快的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:26:58.110

一种替代方法可能是在数据库上创建一个**SQL 视图**，并对其进行简单的 EF 映射。仅此一项就可以大大降低性能影响。

您甚至可能要考虑在单独的表或其自己的数据存储中创建**非规范化投影。**可以在修改相关数据时即时进行，也可以不时作为批处理作业，具体取决于您需要这些数据的频率和及时性。**CQRS**可能非常适合这个特定问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:13:53.943

> 我是否需要进行多个查询，然后自己使用 foreach 循环和/或 LINQ 将数据压缩在一起？

是的。它可以帮助很多。许多集合会产生影响执行时间的大型连接。我遇到了同样的问题，并通过使用附加调用填充集合来解决。

# qt - QMainWindow - 等到“显示”功能完成

> ID：15884199
> 
> 赞同：4
> 
> 时间：2013-04-08T16:22:27.043
> 
> 标签：qt, qmainwindow

是否有信号告诉“显示”功能何时完成？

我的代码有问题：如果我写：

```
QMainWinObj.show();
QMainWinObj.someGuiFunc(); 
```

代码不起作用。但是，如果我写：

```
QMainWinObj.show();
sleep(3000);
QMainWinObj.someGuiFunc(); 
```

确实如此。

所以我认为问题在于，在我调用“someGuiFunc”之前，“show”并没有完成它的任务。这就是为什么我想要某种“表演”结束的标志。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-22T08:01:39.233

这可能有点过时了，但因为除了一个没有其他人回答它：由于没有“显示”信号，我建议像这样覆盖显示事件：

在您的 mainwindow.cpp 文件中：

```
void MainWindow::show()
{
   QMainWindow::show();
   QApplication::processEvents();
   emit windowShown();
} 
```

在您的 mainwindow.h 文件中，在 MainWindow 的声明中：

```
...
class MainWindow: public QMainWindow
{
   ...
   signals:
       void windowShown();

   ...
}
... 
```

然后，当您转到设计器时，右键单击主窗口（对象树的最顶部），然后选择“更改信号/插槽”。在“信号”框架中，单击“+”按钮，您需要添加“windowShown()”，然后按回车，然后单击“确定”按钮（注意省略号“...”表示其他代码已经在您的标题中）。

就是这样——您现在可以随时使用信号/插槽编辑器将插槽链接到“windowShown”信号。现在，如果您想要更像微软的“加载”事件，我认为它在 .NET 中使用，您将需要创建一些实例变量并标记它，以便每次显示窗口时都不会发出它，例如：

```
void MainWindow::show()
{
   QMainWindow::show();
   QApplication::processEvents();
   emit windowShown();
   if (firstTimeShown == true)
   {
      emit windowLoaded();
      firstTimeShown = false;
   }
} 
```

另外，不要忘记在构造函数中将变量初始化为“true”：

```
MainWindow::MainWindow(QObject* parent)
 ...
{
   firstTimeShown = true; // put this somewhere before ui->setupUi()
} 
```

但是，如果您决定将其放入初始化列表中，请确保它的顺序正确。如果变量没有按照类头文件中声明的从上到下的方式实例化，编译器会报错。

现在，确保在标题中定义 firstTimeShown 时，将其设为私有。并且不要忘记添加的信号：

```
class MainWindow : public QMainWindow
{
    ...
    signals:
      void windowLoaded();
      void windowShown();

    private:
      bool firstTimeShown;
    ... 
```

就是这样。借助信号和插槽的灵活性，它可以很容易地模仿您可能从 Windows 窗体或 MFC 中找到的任何事件。程序员只需要一点点努力。一旦你掌握了它的窍门，它就会像第二天性一样。

注意：可能*有*优化或更好、更精确的方法来执行“加载”和“显示”信号，但为了简单起见，我把这样的事情排除在外。回到手头的问题，调用 QApplication::processEvents() 很可能是您想要做的，而不是等待固定的时间，因为谁知道如果用户正在运行其他 100 件事情需要多长时间最重要的是，等等等等。希望有所帮助，包括额外的解释，希望它可以为您提供更好的方法来做您想做的事情，而不是等待某事完成，“知道”它已经完成是一个更好的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T16:35:02.363

没有这样的信号，但是将 QMainWindow 子类化后，您可以覆盖 showEvent 事件。

```
void MainWindow::showEvent(QShowEvent *){
    //your code
} 
```

更多信息在这里：http: [//qt-project.org/doc/qt-4.8/qwidget.html#showEvent](http://qt-project.org/doc/qt-4.8/qwidget.html#showEvent)

请注意，每次您的窗口即将显示时都会调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-06T11:17:26.257

问题可以在没有子类化的情况下决定，只需像这样安装事件过滤器：

```
class CWidgetIsPainting_EF : public QObject
{
    bool m_bIsPainted = false;
public:
    CWidgetIsPainting_EF( QObject * parent = 0 ) : QObject (parent) { }

    inline bool IsPainted() const { return m_bIsPainted; }
    inline void setIsPainted( bool bIsPainted ) { m_bIsPainted = bIsPainted; }

protected:
    bool eventFilter( QObject * obj, QEvent *event )
    {
        if (event->type() == QEvent::Paint)
        {
            m_bIsPainted = true;
            return true;
        };
        return QObject::eventFilter(obj, event);
    }
}; 
```

……

```
CWidgetIsPainting_EF * pPaintingEF = new CWidgetIsPainting_EF( m_pWidget );
m_pWidget->installEventFilter( pPaintingEF ); 
```

……

```
while ( !pPaintingEF->IsPainted() )
    QApplication::processEvents(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-27T18:31:16.923

覆盖`bool event(QEvent *event)`并捕获 Paint 事件。至少在 Windows 上对我有用。

```
// MainWindow.h
class MainWindow : public QMainWindow
{
    ...
    bool event(QEvent *event) override;
    void functionAfterShown();
    ...
    bool functionAfterShownCalled = false;
    ...
}

// MainWindow.cpp
bool MainWindow::event(QEvent *event)
{
    const bool ret_val = QMainWindow::event(event);
    if(!functionAfterShownCalled && event->type() == QEvent::Paint)
    {
        functionAfterShown();
        functionAfterShownCalled = true;
    }
    return ret_val;
} 
```

# php - 不解析的 PHP 文件包括

> ID：15884202
> 
> 赞同：0
> 
> 时间：2013-04-08T16:22:42.257
> 
> 标签：php, parsing, include

我的目标是在服务器上自动创建一个包含以下 html/php 的文件，它确实会这样做，但是它也包括 php 包含，因此在构建页面时它也包含包含中的所有内容。

我希望`include("../includes/right.html");`在生成的页面中独处，但我希望解析其他 php 变量。

```
<?php
// Start the buffering //
ob_start();
?>

<?php echo $name; ?>

test text line one

<?php include("../includes/right.html"); ?>

test text line two

<?php
// Putting content buffer into file //
file_put_contents('mypage.html', ob_get_contents());
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:30:17.530

您需要将该行作为 HTML 转义，因此它不会通过 PHP 解析器，例如

```
<?php
// Start the buffering //
ob_start();
?>

<?php echo $name; ?>

test text line one

&lt;?php include(&quot;../includes/right.html&quot;); ?&gt;

test text line two

<?php
// Putting content buffer into file //
file_put_contents('mypage.html', ob_get_contents());
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:33:31.820

这直接来自[http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)上的 PHP 手册 这称为 nowdoc 语法，随 PHP 5.3 提供。这通常是此类事情的最佳实践。

```
echo <<<'EOT'
My name is "$name". I am printing some $foo->foo.
Now, I am printing some {$foo->bar[1]}.
This should not print a capital 'A': \x41
EOT; 
```

'EOT' 和 EOT 之间的任何内容；将在页面上呈现为文本，无需进行任何解析。

# java - 将节点添加到多个组：Java3D

> ID：15884210
> 
> 赞同：0
> 
> 时间：2013-04-08T16:22:58.163
> 
> 标签：java, java-3d, rubiks-cube

嗯，我正在使用Java3D开发一个应用程序，它可以解决魔方显示用户一步一步的解决方案。
我完美地完成了我的算法部分，现在问题在于 3D 立方体，
直到现在，我已经创建了 27 个真实的立方体。
问题是，为了顺时针或逆时针旋转面，我应该将这些单独的立方体添加到一个组中，这反过来又可以用来逆时针或顺时针方向旋转面，如我所说，但实际上节点在边缘必须在多个组中，以便它们可以在 X 轴或 Y 轴上旋转，否则我们可以采用两个旋转轴。
所以，我现在的问题是，如何将一个节点添加到多个组？
或者如果不可能，那么必须有一种方法来构建一个魔方并旋转它的面，如何做到这一点！

你能帮我解决这个问题吗！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:35:20.153

将多维数据集添加到 BranchGroups 并动态更新它们或管理多个组听起来很复杂。

也许考虑保持立方体独立。创建三个变换：一个围绕三个轴中的每个轴顺时针/逆时针旋转 90 度。要旋转面，请对该面中的每个立方体应用相同的变换——因为无论如何它们都围绕同一轴旋转。

# c# - 将 asp 文字名称作为参数发送到另一个类时，当前上下文中不存在名称“xxx”

> ID：15884211
> 
> 赞同：0
> 
> 时间：2013-04-08T16:23:01.003
> 
> 标签：c#, asp.net

当我尝试将 asp:Literal 的名称作为参数发送到另一个类中的函数时，我试图弄清楚为什么会出现此错误。

证书.aspx.cs：

```
login.DisplayLoginError(Company.Web.STSLogin.Common.Utils.LocalizeUtils.GetTranslation("login.unsuccessful", "Host", false), "attention", litMessageCertificate); 
```

登录.aspx：

```
 <asp:Literal ID="litMessageCertificate" runat="server"></asp:Literal> 
```

登录.aspx.cs：

```
 public void DisplayLoginError(string text, string messageType, Literal literal)
    {
        ClearTextBoxes(); //attention
        literal.Text = string.Format("<div id=\"customErrorPanel\" style=\"display : none\" class=\"message {1}\" >{0}</div>", text, messageType);
        string javaScriptFunction = "$(function () { $('#customErrorPanel').slideDown('fast'); });";
        ClientScript.RegisterStartupScript(this.GetType(), "errorScript", javaScriptFunction, true);
    } 
```

我收到错误消息：当前上下文中不存在名称“litMessageCertificate”。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:27:25.633

您是不是缺少 Certificate.aspx 中的文字控件（ID="litMessageCertificate"）？您正在尝试在那里引用不存在的对象。

这两个页面彼此不认识，因此您不能在 Login.aspx.cs 中使用 Certificate.aspx 中的元素，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:43:46.863

看起来您正试图在为仅显示证书错误消息而创建的文字控件中显示特定的证书错误消息。如果无法在 Login.aspx 中制作通用错误消息文字，则可以将错误类型作为字符串（甚至是整数）传递给 Login.aspx，而不是尝试在不同的 aspx 页面之间传递控件。就像是...

（证书.aspx.cs）

```
login.DisplayLoginError(Company.Web.STSLogin.Common.Utils.LocalizeUtils.GetTranslation("login.unsuccessful", "Host", false), "attention", "ERROR_CERTIFICATE"); 
```

（登录.aspx.cs）

```
public void DisplayLoginError(string text, string messageType, string errorType)
{
    ClearTextBoxes(); //attention

    if(errorType == "ERROR_CERTIFICATE"){
       litMessageCertificate.Text = string.Format("<div id=\"customErrorPanel\"style=\"display : none\" class=\"message {1}\" >{0}</div>", text, messageType);
      string javaScriptFunction = "$(function () {$('#customErrorPanel').slideDown('fast'); });";
       ClientScript.RegisterStartupScript(this.GetType(), "errorScript",JavaScriptFunction, true);
    }
    else{//display a different error message in a different literal control}

} 
```

# xcode - Xcode Audiocomponent Symbols not found 并且不知何故无法使用方法

> ID：15884213
> 
> 赞同：0
> 
> 时间：2013-04-08T16:23:09.107
> 
> 标签：xcode, audio, core-audio

我是 C++ 编码的新手，我只用 php 和 Java 编程，但我想学习更多东西。从音频开始可能不是最好的，但我已经知道编程是如何工作的。

但是，我想测试一下，从 Apple 网站上获取一些代码，看看会发生什么。我将代码的开头粘贴到我的项目中并出现错误。而且我真的不知道他们的意思，搜索并没有给我任何结果。

那是代码：

```
#include <iostream>
#include <CoreAudio/CoreAudio.h>
#include <AudioToolbox/AudioToolbox.h>
#include <AudioUnit/AudioUnit.h>

int main(int argc, const char * argv[]) {
  // insert code here...
  AudioComponent comp;
  AudioComponentDescription desc;
  AudioComponentInstance auHAL;
  //There are several different types of Audio Units.
  //Some audio units serve as Outputs, Mixers, or DSP
  //units. See AUComponent.h for listing
  desc.componentType = kAudioUnitType_Output;
  //Every Component has a subType, which will give a clearer picture
  //of what this components function will be.
  desc.componentSubType = kAudioUnitSubType_HALOutput;
  //all Audio Units in AUComponent.h must use
  //"kAudioUnitManufacturer_Apple" as the Manufacturer
  desc.componentManufacturer = kAudioUnitManufacturer_Apple;
  desc.componentFlags = 0;
  desc.componentFlagsMask = 0;
  //Finds a component that meets the desc spec's
  comp = AudioComponentFindNext(NULL, & desc);
  if (comp == NULL) exit(-1);
  //gains access to the services provided by the component
  AudioComponentInstanceNew(comp, & auHAL);
  return 0;
} 
```

这些是我得到的错误：

```
Undefined symbols for architecture x86_64:
"_AudioComponentFindNext", referenced from:
  _main in main.o
"_AudioComponentInstanceNew", referenced from:
  _main in main.o
 ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

谢谢你的协助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T02:50:37.673

您需要将`AudioUnit`和框架添加到您的项目中`CoreAudio`。`AudioToolbox`请参阅[此答案](https://stackoverflow.com/a/3377682/704596)以获取有关如何执行此操作的帮助。

如果这是您第一次使用 C++，那么您肯定会跳入深渊。祝你好运！

# java - Path2D 绘制错误？

> ID：15884223
> 
> 赞同：2
> 
> 时间：2013-04-08T16:23:54.220
> 
> 标签：java, awt

我已经使用[Path2D.Double](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/Path2D.Double.html)大约一天了，[在这篇文章中，](https://stackoverflow.com/questions/15864441/java-how-to-make-a-line-curve-through-points/15865361?noredirect=1#comment22587369_15865361) 我寻求有关设置控制点以允许路径通过指定点的帮助。我将一些代码混合在一起作为一个快速测试平台，它随机生成点，然后根据上述帖子中提到的信息弯曲到这些点的路径。

这是可运行的代码，抱歉它是单片的，我希望它是可发布的，以便您可以跟进：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics2D;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.geom.Path2D;
import java.awt.geom.Point2D;
import java.util.ArrayList;
import java.util.Random;
import javax.swing.JFrame;

public class Curver {
    public static ArrayList<Point2D> points = new ArrayList<Point2D>();
    /**
     * @param args
     */
    public static void main(String[] args) {

        final JFrame window = new JFrame();
        window.setPreferredSize(new Dimension(500,500));
        window.setLocationRelativeTo(null); 

        window.addMouseListener(new MouseListener() {

            @Override
            public void mouseReleased(MouseEvent e) {
                // TODO Auto-generated method stub

            }

            @Override
            public void mousePressed(MouseEvent e) {
                // TODO Auto-generated method stub

            }

            @Override
            public void mouseExited(MouseEvent e) {
                // TODO Auto-generated method stub

            }

            @Override
            public void mouseEntered(MouseEvent e) {
                // TODO Auto-generated method stub

            }

            @Override
            public void mouseClicked(MouseEvent e) {
                new Thread(new Runnable(){
                    @Override
                    public void run() {

                        Random random = new Random();

                        while(true){

                            points.add(new Point2D.Double(random.nextInt(window.getWidth()-1)+1,random.nextInt(window.getHeight()-1)+1));
                            System.out.println(points.size());

                            try {
                                Thread.sleep(500);
                            } catch (InterruptedException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }

                        }

                    }

                }).start();
            }
        });

        window.pack();
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setVisible(true);

        int div = 7;
        int d = 4;

        Path2D.Double path = new Path2D.Double();
        Point2D currentPoint;
        double startX, startY;
        double interiorX_In, interiorY_In;
        double interiorX_Out, interiorY_Out;
        double endX, endY;

        Graphics2D g;

        while(true){

            g = (Graphics2D) window.getGraphics();
            g.setColor(Color.blue);

            for(int i = 0; i < points.size(); i++){

                currentPoint = points.get(i);
                g.fillRect((int)currentPoint.getX(), (int)currentPoint.getY(), d, d);

                if (i == 0){ 
                    // Don't attempt any line drawing as we don't have enough points.
                    path.moveTo(currentPoint.getX(), currentPoint.getY());
                } else if (i == 1 && points.size() > 2){ 
                    // draw first curve with knowledge of third point (third point is not end point)
                    startX = points.get(i-1).getX() + (currentPoint.getX() - points.get(i-1).getX()) / div; // from start
                    startY = points.get(i-1).getY() + (currentPoint.getY() - points.get(i-1).getY()) / div;

                    interiorX_In = currentPoint.getX() - (points.get(i+1).getX() - points.get(i-1).getX()) / div; // to interior
                    interiorY_In = currentPoint.getY() - (points.get(i+1).getY() - points.get(i-1).getY()) / div;

                    path.curveTo(startX, startY, interiorX_In, interiorY_In, currentPoint.getX(), currentPoint.getY());

                } else if (i == 1){ // Only 2 points in list so use a straight line until more points are available.
                    g.drawLine((int) points.get(i-1).getX(), (int) points.get(i-1).getY(), (int)currentPoint.getX(), (int)currentPoint.getY());
                } else if (i >= 1 && i < points.size()-1){ // interior to interior edge.

                    interiorX_Out = points.get(i-1).getX() + (currentPoint.getX() - points.get(i-2).getX()) / div; // from interior
                    interiorY_Out = points.get(i-1).getY() + (currentPoint.getY() - points.get(i-2).getY()) / div;

                    interiorX_In = currentPoint.getX() - (points.get(i+1).getX() - points.get(i-1).getX()) / div; // to interior
                    interiorY_In = currentPoint.getY() - (points.get(i+1).getY() - points.get(i-1).getY()) / div;

                    path.curveTo(interiorX_Out, interiorY_Out, interiorX_In, interiorY_In, currentPoint.getX(), currentPoint.getY());

                } else { // from interior point to end point.

                    interiorX_Out = points.get(i-1).getX() + (currentPoint.getX() - points.get(i-2).getX()) / div; // from interior
                    interiorY_Out = points.get(i-1).getY() + (currentPoint.getY() - points.get(i-2).getY()) / div;

                    endX = currentPoint.getX() - (currentPoint.getX() - points.get(i-1).getX()) / div; // to end
                    endY = currentPoint.getY() - (currentPoint.getY() - points.get(i-1).getY()) / div;

                    path.curveTo(interiorX_Out, interiorY_Out, endX, endY, currentPoint.getX(), currentPoint.getY());

                }

            } // end for 

            g.clearRect(0, 0, window.getWidth(), window.getHeight());
            g.draw(path);
            path.reset();

            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        } 
    } 
} 
```

*   只需单击 JFrame 即可开始绘制随机点 - 控制台将报告正在绘制的点数。

我遇到的问题是，一旦我向上或 60-65 个随机点，路径会闪烁并且似乎在屏幕上缩小并且通常表现出奇怪的行为？正如我所说，代码可能并不完美，所以任何人都可以给我一些关于如何减少错误的指示。

我认为奇怪的行为来自每次重绘 JFrame 构建越来越长的路径？也许有一种方法可以将路径绘制为连续的线，因为我认为路径被解释为一系列段？或者也许使路径累积而不是为运行循环的每次迭代重建整个事物？

期待提供的任何建议 - 但请尝试解释，因为我对绘画和路径等相对较新。

提前致谢。

* * *

感谢@camickr 的帖子。这是完美运行的重写代码，3,500 多个随机点，没有一个故障：

```
> import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.geom.Path2D;
import java.awt.geom.Point2D;
import java.util.ArrayList;
import java.util.Random;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;

public class Curver extends JFrame implements ActionListener, MouseListener{

    public Timer animationTicker = new Timer(50, this);
    public ArrayList<Point2D> points = new ArrayList<Point2D>();
    private Canvas canvas;

    public Curver(){
        this.setPreferredSize(new Dimension(500,500));
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setLocationRelativeTo(null);
        this.setLayout(new BorderLayout());
        canvas = new Canvas(points);
        this.add(canvas, BorderLayout.CENTER);
        this.addMouseListener(this);
        this.pack();
        this.setVisible(true);
    }

    class Canvas extends JPanel{

        int div = 7;
        int d = 4;

        Path2D.Double path = new Path2D.Double();
        Point2D currentPoint;
        double startX, startY;
        double interiorX_In, interiorY_In;
        double interiorX_Out, interiorY_Out;
        double endX, endY;
        Graphics2D g2;
        ArrayList<Point2D> points;

        public Canvas(ArrayList<Point2D> points){
            this.setMinimumSize(new Dimension(100,100));
            this.points = points;
        }

        @Override
        public void paintComponent(Graphics g) {

            g2 = (Graphics2D) g;
            g.setColor(Color.blue);

            synchronized(points){
            for(int i = 0; i < points.size(); i++){

                currentPoint = points.get(i);
                g2.fillRect((int)currentPoint.getX(), (int)currentPoint.getY(), d, d);

                if (i == 0){ 
                    // Don't attempt any line drawing as we don't have enough points.
                    path.moveTo(currentPoint.getX(), currentPoint.getY());
                } else if (i == 1 && points.size() > 2){ 
                    // draw first curve with knowledge of third point (third point is not end point)
                    startX = points.get(i-1).getX() + (currentPoint.getX() - points.get(i-1).getX()) / div; // from start
                    startY = points.get(i-1).getY() + (currentPoint.getY() - points.get(i-1).getY()) / div;

                    interiorX_In = currentPoint.getX() - (points.get(i+1).getX() - points.get(i-1).getX()) / div; // to interior
                    interiorY_In = currentPoint.getY() - (points.get(i+1).getY() - points.get(i-1).getY()) / div;

                    path.curveTo(startX, startY, interiorX_In, interiorY_In, currentPoint.getX(), currentPoint.getY());

                } else if (i == 1){ // Only 2 points in list so use a straight line until more points are available.
                    g2.drawLine((int) points.get(i-1).getX(), (int) points.get(i-1).getY(), (int)currentPoint.getX(), (int)currentPoint.getY());
                } else if (i >= 1 && i < points.size()-1){ // interior to interior edge.

                    interiorX_Out = points.get(i-1).getX() + (currentPoint.getX() - points.get(i-2).getX()) / div; // from interior
                    interiorY_Out = points.get(i-1).getY() + (currentPoint.getY() - points.get(i-2).getY()) / div;

                    interiorX_In = currentPoint.getX() - (points.get(i+1).getX() - points.get(i-1).getX()) / div; // to interior
                    interiorY_In = currentPoint.getY() - (points.get(i+1).getY() - points.get(i-1).getY()) / div;

                    path.curveTo(interiorX_Out, interiorY_Out, interiorX_In, interiorY_In, currentPoint.getX(), currentPoint.getY());

                } else { // from interior point to end point.

                    interiorX_Out = points.get(i-1).getX() + (currentPoint.getX() - points.get(i-2).getX()) / div; // from interior
                    interiorY_Out = points.get(i-1).getY() + (currentPoint.getY() - points.get(i-2).getY()) / div;

                    endX = currentPoint.getX() - (currentPoint.getX() - points.get(i-1).getX()) / div; // to end
                    endY = currentPoint.getY() - (currentPoint.getY() - points.get(i-1).getY()) / div;

                    path.curveTo(interiorX_Out, interiorY_Out, endX, endY, currentPoint.getX(), currentPoint.getY());

                }

            } // end for 

            g.clearRect(0, 0, this.getWidth(), this.getHeight());
            g2.draw(path);
            path.reset();
            }
        }
    } // end of inner class

    @Override
    public void actionPerformed(ActionEvent e) {
        this.canvas.repaint();
    }

    @Override
    public void mouseClicked(MouseEvent e) {
        new Thread(new Runnable(){
            @Override
            public void run() {
                System.out.println("Thread running");
                Random random = new Random();

                while(true){
                    synchronized(points){
                        points.add(new Point2D.Double(random.nextInt(getWidth()-1)+1,random.nextInt(getHeight()-1)+1));
                        System.out.println(points.size());
                    }
                    try {
                        Thread.sleep(60);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }

                }

            }

        }).start();
    }

    @Override
    public void mousePressed(MouseEvent e) {}

    @Override
    public void mouseReleased(MouseEvent e) {}

    @Override
    public void mouseEntered(MouseEvent e) {}

    @Override
    public void mouseExited(MouseEvent e) {}

    public static void main(String[] args) {
        Curver curver = new Curver();
        curver.animationTicker.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T16:44:43.073

```
g = (Graphics2D) window.getGraphics(); 
```

我没有仔细查看您的代码，但论坛建议不要使用 getGraphics() 方法进行绘画。

自定义绘画是通过覆盖 JPanel（或 JComponent）的 paintComponent() 方法来完成的。然后将面板添加到框架中。阅读 Swing 教程以获取有关自定义绘画的更多信息。

另外，不要使用“while (true)”逻辑。Swing 将根据需要重新绘制。如果您想要某种动画，请使用 Swing Timer。

# java - 使用 html form 标签代替 Struts 2 s:form 标签是否有效？

> ID：15884227
> 
> 赞同：4
> 
> 时间：2013-04-08T16:24:12.650
> 
> 标签：java, forms, jsp, jakarta-ee, struts2

我想用

```
<form action="someClass">
<s:textarea name="name" label="Name"/>
<s:checkboxlist list="{'Male','Female'}" name="gender" label="Gender"/>
</form> 
```

代替

```
<s:form action="someClass">
<s:textarea name="name" label="Name"/>
<s:checkboxlist list="{'Male','Female'}" name="gender" label="Gender"/>
</s:form> 
```

因为`<s:form>`标签的默认主题“`xhtml"`不适合我的 CSS，而主题“简单”在不使用标签的情况下无法自行显示验证错误`fielderror`。所以使用它是否有效？我到目前为止还可以这样使用。是将来我会遇到这样的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T18:07:18.060

当然，您可以使用纯 HTML 标记。

请记住，所有 JSP 自定义标记最终都是呈现 HTML。^([1])

正如 Roman 所说，您将失去自动填充值、通过属性名称或键检索标签、显示错误消息和样式等内容。

您最好的做法可能是创建自己的主题并使用自己的模板和 CSS，或者使用`"css_xhtml"`主题并提供自己的样式。哪个更好取决于我们没有的大量信息，但 CSS HTML 版本相当灵活，除了必须将`<br/>`标签定义为内联，因为它目前在不应该的主题中使用。

^([1] 是的，它可以在通过 HTML 发送之前在服务器端做其他事情，比如 SQL 自定义标签。不过，一般来说，自定义标签的目的是发出 HTML。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:44:23.653

您可以使用`<form>`标签来处理表单，但它不是`<s:form`标签，您必须手动维护它的属性。使用与框架完全通信的良好属性预设`<s:form`呈现标签。`<form>`省略它缺少框架提供的一些功能，这些功能会导致错误的使用和错误。

# html - Phonegap 应用程序和 LocalStorage

> ID：15884230
> 
> 赞同：0
> 
> 时间：2013-04-08T16:24:33.580
> 
> 标签：html, cordova

我想知道在 Phonegap 应用程序中使用 html5 LocalStorage 来存储用户会话有多安全。

理想情况下，我会存储用户 ID + 一个随机字符串以在数据库中验证他的身份，就像典型的“记住我”cookie。

这是一种安全的做法吗？在 Phonegap 应用程序上存储数据时，我可能会忽略什么？也许是 LocalStorage 之外的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:11:05.130

保存在 localStorage 中的数据未加密，因此任何有权访问该内存的应用程序/进程都可以读取该值，类似于将敏感数据存储在 cookie 中。

建议不要将 userId 保存在 localStorage 中，而是保存不可识别的会话密钥。或者散列 userId 并保存该值（[http://en.wikipedia.org/wiki/Cryptographic_hash_function](http://en.wikipedia.org/wiki/Cryptographic_hash_function)）。

# python - python 3中tkinter窗口角落的图像

> ID：15884237
> 
> 赞同：0
> 
> 时间：2013-04-08T16:24:54.003
> 
> 标签：python, image, window, tkinter

是否可以在 tkinter 窗口中放置一个小图像。在窗口的右上角，如果有怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:47:55.567

您可以创建一个标签，将图像放在该标签中，然后使用[place](http://effbot.org/tkinterbook/place.htm)将其精确放置在您想要的位置。例如，您可以使用 1.0 的相对 x 和 y 以及“se”的锚点将其放在右下角。

这是一个人为的例子：

```
import Tkinter as tk

class Example(tk.Frame):
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)

        # a simple label, just to show there's something in the frame
        label = tk.Label(self, text="Example of using place")
        label.pack(side="top", fill="both", expand=True)

        # we'll place this image in every corner...
        self.image = tk.PhotoImage(data='''
            R0lGODlhEAAQALMAAAAAAP//AP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
            AAAAAAAAAAAA\nAAAAACH5BAEAAAIALAAAAAAQABAAQAQ3UMgpAKC4hm13uJnWgR
            TgceZJllw4pd2Xpagq0WfeYrD7\n2i5Yb+aJyVhFHAmnazE/z4tlSq0KIgA7\n
        ''')

        # ... by creating four label widgets ...
        self.nw = tk.Label(self, image=self.image)
        self.ne = tk.Label(self, image=self.image)
        self.sw = tk.Label(self, image=self.image)
        self.se = tk.Label(self, image=self.image)

        # ... and using place as the geometry manager
        self.nw.place(relx=0.0, rely=0.0, anchor="nw")
        self.ne.place(relx=1.0, rely=0.0, anchor="ne")
        self.sw.place(relx=0.0, rely=1.0, anchor="sw")
        self.se.place(relx=1.0, rely=1.0, anchor="se")

if __name__ == "__main__":
    root = tk.Tk()
    root.wm_geometry("400x400")
    Example(root).pack(side="top", fill="both", expand=True)
    root.mainloop() 
```

# javascript - 截取整个网页的截图

> ID：15884239
> 
> 赞同：0
> 
> 时间：2013-04-08T16:25:04.593
> 
> 标签：javascript, html, canvas

需要一个只有 javascript 且没有额外库文件 (-> jquery,...) 的工作代码，从整个网页截取屏幕截图。（从上到下页面）

目前我有这个不起作用，为什么？

```
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function () {

var window = document.getElementById('item');
var canvas = document.getElementById('my-canvas');
var ctx = canvas.getContext("2D");
ctx.drawImage(window, 0,0, 100, 200, "rgb(255,255,255)");
canvas.toDataURL("image/png");

});
</script>
</head>
<body id="item">
test website
<canvas id='my-canvas'></canvas> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:30:08.280

这并不容易，但对于其他人来说，浏览器引擎。因为由于使用了 blob（请克隆整个网页）。

```
urlsToAbsolute(document.images);
urlsToAbsolute(document.querySelectorAll("link[rel='stylesheet']"));
urlsToAbsolute(document.scripts);

var screenshot = document.documentElement.cloneNode(true);
var blob = new Blob([screenshot.outerHTML], {type: 'text/html'});
window.open(window.URL.createObjectURL(blob));
screenshot.dataset.scrollX = window.scrollX;
screenshot.dataset.scrollY = window.scrollY;
screenshot.style.pointerEvents = 'none';
screenshot.style.overflow = 'hidden';
screenshot.style.userSelect = 'none';

var script = document.createElement('script');
script.textContent = '(' + addOnPageLoad_.toString() + ')();';
screenshot.querySelector('body').appendChild(script);

window.addEventListener('DOMContentLoaded', function(e) {
    var scrollX = document.documentElement.dataset.scrollX || 0;
    var scrollY = document.documentElement.dataset.scrollY || 0;
    window.scrollTo(scrollX, scrollY);
}); 
```

我发现您可以在 chromium 项目中阅读更多内容：http: [//www.html5rocks.com/en/tutorials/streaming/screenshare/](http://www.html5rocks.com/en/tutorials/streaming/screenshare/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:17:59.980

你可以尝试类似[phantom.js](http://phantomjs.org/)的东西。它是一个“可使用 JavaScript API 编写脚本的无头 WebKit”，允许您进行屏幕捕获。

根据我的经验，它运作良好。

# html - CSS 为什么最后一个 li 不是 li:nth-child(odd) 或 li:nth-child(even) 的目标？

> ID：15884241
> 
> 赞同：0
> 
> 时间：2013-04-08T16:25:11.873
> 
> 标签：html, css, html-lists

这很简单。

我有以下 HTML 结构：

```
<ul id="myContactList">
    <li>
        <ul>
            <li>item 1</li>
            <li>item 2</li>
            <li>item 3</li>
            <li>item 4</li>
        </ul>
    </li>
    ...
</ul> 
```

和麻烦制造者CSS：

```
ul#myContactList>li>ul>li {
    float:left; /* Trouble maker */
} 
```

这是[JSFiddle](http://jsfiddle.net/ekXjy/1/)。

为什么最后一个 ul#myContactList>li 不是 li:nth-child(odd) 的目标？

提前感谢，干杯！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:35:30.273

它以它为目标，但是您在最后一个列表项中未清除浮动时遇到问题。请参阅[http://jsfiddle.net/ekXjy/4/](http://jsfiddle.net/ekXjy/4/)（特别是 CSS 的第 20 行，这会为每个列表项生成一个新的浮动上下文）。

```
ul#myContactList>li>ul {
    list-style-type:none;
    padding:0;
    overflow: hidden; /* New style, to clear the floats contained within */
} 
```

clear:both 你为 ul#myContactList>li>ul 清除了最后一项之前的列表项的浮动，但没有清除最后一项中的浮动。使用 overflow:hidden 为每个列表项提供其自己的块上下文可以解决此问题。

# android - 像 Dropbox View 一样在 android 的 listView 中添加 GridView

> ID：15884245
> 
> 赞同：4
> 
> 时间：2013-04-08T16:25:24.263
> 
> 标签：android, gridview, android-listview, android-custom-view

如何将网格视图添加到 ListView。我可以实现，但问题是网格视图不可见其完整高度。我想像下面附加的 Dropbox Photo CustomView 一样实现。请引导我正确的路径。

![在此处输入图像描述](https://i.stack.imgur.com/OnM3k.png)

谢谢，柴坦亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T07:23:29.007

使用 github.com/TonicArtos/StickyGridHeaders 库在 gridview 中放置标题并参考这篇文章[http://www.programering.com/a/MjN0ITMwATU.html](http://www.programering.com/a/MjN0ITMwATU.html)哪里是你所期望的演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:07:44.870

问题是您不应该将可滚动视图添加到另一个可滚动视图中。ListView 和 GridView 都是可滚动的，这只会带来麻烦。我怀疑 Dropbox 应用程序不使用 GridView，而是使用多个 LinearLayout，这至少是我会做的。在这种情况下，您不能使用适配器，而是需要以编程方式添加布局和元素。

# javascript - 表单提交问题（第一次页面加载错误）

> ID：15884247
> 
> 赞同：1
> 
> 时间：2013-04-08T16:25:34.773
> 
> 标签：javascript, html, forms

使用表单将数据插入本地数据库时遇到问题。无论出于何种原因，第一次单击提交按钮时都会弹出“错误加载页面”消息并刷新表单页面，但如果我将信息重新输入表单并再次单击按钮，则数据将输入数据库并且页面移动转到#MoneyOrdersMain 的正确位置。我对可能导致这种情况的原因感到困惑。任何帮助，将不胜感激。特别是什么会导致表单第一次不提交？

表格：

```
<form method="post" id="moneyorder_form" name="moneyorder_form" onsubmit="MOsubmit()">
            <!-- onsubmit="closeSelf()"> -->
            <div class="ui-grid-a">
                <div class="ui-block-a">
                    <p style="text-align: center; display: inline"><b>Number</b></p>
                    <p>
                        <input type="number" required="required" step="1" id="moCNumber" name="moCNumber">
                    </p>
                </div>
                <div class="ui-block-b">
                    <p style="text-align: center; display: inline"><b>Amount</b></p>
                    <p>
                        <input type="number" required="required" min=".01" step=".01" id="moCAmount" name="moCAmount">
                    </p>
                </div>
                <br />
            </div>
            <div class="ui-grid-solo">
                <div class="ui-block-a">
                    <input type="submit" data-role="button" value="Add" />
                </div>
            </div>
    </form> 
```

MOsubmit() 函数：

```
function MOsubmit() {
insertMoC($('#moCNumber').val(), $('#moCAmount').val(), "MoneyOrder");
$.mobile.changePage('#MoneyOrdersMain');
location.reload(true);
}

function insertMoC(moCNumber, moCAmount, moCType) {
db.transaction(function (tx) {
    tx.executeSql('INSERT INTO MoneyOrderChecks (moCNumber, moCAmount, moCType) VALUES (?, ?, ?)', [moCNumber, moCAmount, moCType]);
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:57:17.197

我相信我已经弄清楚了问题的一部分，以防其他人遇到同样类型的问题。我试图作为表单提交功能的一部分调用的页面#MoneyOrdersMain 是保存表单的页面的父级。第一次提交表单时，这似乎导致了问题。由于 MOsubmit 函数包括表单页面的刷新，#MoneyOrdersMain 不再是“父级”并且可以接受表单数据。现在一切正常，因为我已在表单提交功能中将用户重定向到 #MoneyOrdersMain 以外的页面。但是，#MoneyOrdersMain 是我最终希望用户在表单提交后结束的地方，所以这是我的下一个挑战。

# php - 如何使用特定于使用的键 - PHP 创建两种编码/解码方法？

> ID：15884248
> 
> 赞同：14
> 
> 时间：2013-04-08T16:25:34.633
> 
> 标签：php, encryption, encode, salt

我需要两个函数/方法，一个用于编码，一个用于解码。***这不是用来存储密码的***。每个用户都有一个特定的键/盐来编码数据。

这就是我希望它的工作方式：

```
function encode($str, $key) {
    // something fancy
}

function decode($str, $key) {
    // something fancy
}

$key = $logged_in_user->get_key();
$plain = 'abc abc 123 123';
$encoded_data = encode($plain, $key);
// some_fancy_encrypted_data_that_is_really_cooooool
$decoded_data = decode($encoded_data, $key);
// abc abc 123 123 
```

另一件事是，每次我使用这个函数时，每次我用`encode`相同的用户键使用这个函数时，它都需要返回相同的东西。

我该怎么做？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-08T16:43:56.567

```
$myVarIWantToEncodeAndDecode 
```

定义键（盐、肉汤等）：`$key = "#&$sdfdfs789fs7d";`

编码：

```
$encoded = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, md5($key), $myVarIWantToEncodeAndDecode, MCRYPT_MODE_CBC, md5(md5($key)))); 
```

解码：

```
$decoded = rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, md5($key), base64_decode($encoded), MCRYPT_MODE_CBC, md5(md5($key))), "\0"); 
```

**注意：mcrypt_decrypt 自 PHP 7.1.0 起已弃用。强烈建议不要依赖此功能。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-18T20:58:25.830

使用`openssl_encrypt`代替`mcrypt_encrypt`

`mcrypt_encrypt`自 PHP 7.1.0 起已弃用，自 PHP 7.2.0 起已删除。

所以，试试这个..

```
function encrypt_decrypt($string, $action = 'encrypt')
{
    $encrypt_method = "AES-256-CBC";
    $secret_key = 'AA74CDCC2BBRT935136HH7B63C27'; // user define private key
    $secret_iv = '5fgf5HJ5g27'; // user define secret key
    $key = hash('sha256', $secret_key);
    $iv = substr(hash('sha256', $secret_iv), 0, 16); // sha256 is hash_hmac_algo
    if ($action == 'encrypt') {
        $output = openssl_encrypt($string, $encrypt_method, $key, 0, $iv);
        $output = base64_encode($output);
    } else if ($action == 'decrypt') {
        $output = openssl_decrypt(base64_decode($string), $encrypt_method, $key, 0, $iv);
    }
    return $output;
}

echo "Your Encrypted password is = ". $pwd = encrypt_decrypt('spaceo', 'encrypt');
echo "Your Decrypted password is = ". encrypt_decrypt($pwd, 'decrypt'); 
```

# ios - 核心数据 NSPredicate 不返回两个日期之间的记录

> ID：15884250
> 
> 赞同：2
> 
> 时间：2013-04-08T16:25:42.427
> 
> 标签：ios, core-data

我有一个`Comment`拥有父实体的 CoreData 实体`Measurement`。

`Measurement`实体有一个`measurementDate`属性 。

我的核心数据数据库中有 200`Comment`条记录，每条记录在`measurementDate`过去 3 年中都有不同的值。

我正在尝试获取`measurementDate`任何两个给定日期之间的记录。

首先，我尝试了这个：

```
//now fetch a record between 12 and 11 months ago
NSDate *startDate = [AppGlobals dateByAddingMonths:[NSDate date] withMonths:-12];
NSDate *endDate = [AppGlobals dateByAddingMonths:startDate withMonths:1];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(measurementDate >= %@) AND (measurementDate <= %@)", startDate, endDate];

NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"Comment" inManagedObjectContext:self.context]];
[request setPredicate:predicate];

NSError *error = nil;
NSArray *results = [self.context executeFetchRequest:request error:&error]; 
```

但我得到了 0 个结果。

所以我尝试用更简单的东西替换我的谓词：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"measurementDate >= %@", startDate]; 
```

这应该会返回大约三分之一的结果。但实际上它返回所有 200 条记录。

我已经注销了对象的日期，看起来日期被完全忽略了！

我究竟做错了什么？？？

是否与父抽象实体有关`Measurement`，因为我是从`Comment`实体而不是`Measurement`实体中获取的？是因为我在我的代码中使用了“原始数据类型的标量属性”吗？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T17:22:20.330

我认为问题在于您将日期值分配给托管对象的位置。如果`measurementDate`定义为标量属性

```
@property (nonatomic) NSTimeInterval measurementDate; 
```

然后你给`NSDate`它分配一个

```
NSDate *theDate;
obj.measurementDate = [theDate timeIntervalSinceReferenceDate]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:27:24.353

您应该使用`NSDate`或使用`NSTimeInterval`(原始的，因为它实际上是 a `double`)。

如果你把它们混在一起，你很容易把自己弄糊涂。基本上，一个`NSDate`对象是一个包装了一个`NSTimeInterval`值的类，即一个`double`——仅此而已。并`NSDate`添加了许多方法来处理该值。

不过，编译器应该给你一些警告。

# c++ - 进行5次迭代的线程循环；pthread、互斥体和信号量

> ID：15884253
> 
> 赞同：-2
> 
> 时间：2013-04-08T16:25:58.830
> 
> 标签：c++, c, pthreads, mutex, semaphore

我在班级的示例中有此代码，老师的指示说“使每个线程循环进行 5 次迭代”。我对如何做到这一点感到困惑，使用以下代码：

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <semaphore.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <iostream>
#include <iomanip>
#include <sstream>
#include <sys/utsname.h>

/* Symbolic Constants*/
#define NUM_THREADS 4
#define BUFFER_SIZE 10

/* Semaphore and Mutex lock */
sem_t cEmpty;
sem_t cFull;
pthread_mutex_t mutex;

/* Threads */
pthread_t tid; /* Thread ID */
pthread_attr_t attr; /* Thread attributes */

//prototypes
void *producer(void *param);
void *consumer(void *param);
int insert_item(int threadID);
int remove_item(int threadID);
void init();

/* Progress Counter and Thread IDs*/
int counter, pthreadID=0, cthreadID=0;

int main()
{
  /* Variables */
  int c1;

  /* Perform initialization */
  init();

  /* Create the producer threads */
  for(c1=0; c1<NUM_THREADS; c1++)
  {
    pthread_create(&tid, &attr, producer, NULL);
  }

  /* Create the consumer threads */
  for(c1=0; c1<NUM_THREADS; c1++)
  {
    pthread_create(&tid, &attr, consumer, NULL);
  }

  /* Ending it */
  sleep(2);

  printf("All threads are done.\n");

  /* Destroy the mutex and semaphors */
  pthread_mutex_destroy(&mutex);
  sem_destroy(&cEmpty);
  sem_destroy(&cFull);

  printf("Resources cleaned up.\n");

  exit(0);
}

void init()
{
  pthread_mutex_init(&mutex, NULL); /* Initialize mutex lock */
  pthread_attr_init(&attr); /* Initialize pthread attributes to default */
  sem_init(&cFull, 0, 0); /* Initialize full semaphore */
  sem_init(&cEmpty, 0, BUFFER_SIZE); /* Initialize empty semaphore */
  counter = 0; /* Initialize global counter */
}

void *producer(void *param)
{
  int x;
  for(x=0; x<5;)
  {
    sleep(1);

    sem_wait(&cEmpty); /* Lock empty semaphore if not zero */
    pthread_mutex_lock(&mutex);

    if(insert_item(pthreadID))
    {
      fprintf(stderr, "Producer error.");
    }
    else
    {
      pthreadID++;
      x++;
    }

    pthread_mutex_unlock(&mutex);
    sem_post(&cFull); /* Increment semaphore for # of full */
  }
return 0;
}

void *consumer(void *param)
{
  int y;
  for(y=0; y<5;)
  {
    sleep(1);

    sem_wait(&cFull); /* Lock empty semaphore if not zero */
    pthread_mutex_lock(&mutex);

    if(remove_item(cthreadID))
    {
      fprintf(stderr, "Consumer error.");
    }
    else
    {
      cthreadID++;
      y++;
    }
    pthread_mutex_unlock(&mutex);
    sem_post(&cEmpty); /* Increments semaphore for # of empty */
  }
return 0;
}

int insert_item(int threadID)
{
  if(counter < BUFFER_SIZE) /* Buffer has space */
  {
    counter++;
    printf("Producer %d inserted a cookie. Total:%d\n", threadID, counter);
    return 0;
  }
  else /* Buffer full */
  {
    return -1;
  }
}

int remove_item(int threadID)
{
  if(counter > 0) /* Buffer has something in it */
  {
    counter--;
    printf("Consumer %d removed a cookie. Total:%d\n", threadID, counter);
    return 0;
  }
  else /* Buffer empty */
  {
    return -1;
  }
} 
```

任何人都知道我在哪里添加我的 for 循环以“使每个线程循环 5 次迭代”？非常感谢您。

更新：我将 while(1) 更改为具有 5 次迭代的 for 循环，但我仍然无法从 insert_item 和 remove_item 函数获取消息以打印 5 次，仅打印一次。有人知道我怎样才能让它打印5次吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T01:11:58.507

问题是在 main 结束时，我调用了 sleep(2)。这不足以让所有线程都打印它们的输出。我也没有将正确的索引传递给我的 add_item 和 remove_item 函数。此外，我需要所有线程的连接命令而不是 sleep 命令，并且连接命令确保所有线程在程序退出之前完成。这是更新和更正的代码。希望这可以帮助尝试做类似事情的人！

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <semaphore.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <iostream>
#include <iomanip>
#include <sstream>
#include <sys/utsname.h>

// Symbolic Constants
#define NUM_THREADS 4
#define BUFFER_SIZE 10

// Semaphore and Mutex lock
sem_t cEmpty;
sem_t cFull;
pthread_mutex_t mutex;

// Threads
pthread_t tid[NUM_THREADS]; //Thread ID
pthread_t tid2[NUM_THREADS]; //Thread ID
pthread_attr_t attr; //Thread attributes

//prototypes
void *producer(void *param);
void *consumer(void *param);
int insert_item(long threadID);
int remove_item(long threadID);
void init();

//Progress Counter and Thread IDs
int counter=0;

int main()
{
  //Variables
  long c1;

  //Perform initialization
  init();

  //Create the producer threads
  for(c1=0; c1<NUM_THREADS; c1++)
  {
    pthread_create(&tid[c1], &attr, producer, (void *)c1);
    pthread_create(&tid2[c1], &attr, consumer, (void *)c1);
  }

  //Ending it
  for(c1=0; c1<NUM_THREADS; c1++)
  {
    pthread_join(tid[c1], NULL);
    pthread_join(tid2[c1],NULL);
  }

  printf("All threads are done.\n");

  //Destroy the mutex and semaphors
  pthread_mutex_destroy(&mutex);
  sem_destroy(&cEmpty);
  sem_destroy(&cFull);

  printf("Resources cleaned up.\n");

  exit(0);
}

//This function performs initialization
void init()
{
  pthread_mutex_init(&mutex, NULL); //Initialize mutex lock
  pthread_attr_init(&attr); //Initialize pthread attributes to default
  sem_init(&cFull, 0, 0); //Initialize full semaphore
  sem_init(&cEmpty, 0, BUFFER_SIZE); //Initialize empty semaphore
  counter = 0; //Initialize global counter
}

//This function creates the producer thread
void *producer(void *param)
{
  long index = (long)param;

  for(int x = 0; x<5; x++)
  {
    sleep(1);

    sem_wait(&cEmpty); //Lock empty semaphore if not zero
    pthread_mutex_lock(&mutex);

    //check to see if item inserted correctly; print error on fail
    if(insert_item(index))
    {
      fprintf(stderr, "Producer error.");
    }

    pthread_mutex_unlock(&mutex);
    sem_post(&cFull); //Increment semaphore for # of full
  }
pthread_exit(NULL);
return 0;
}

//This function created the consumer thread
void *consumer(void *param)
{
  long index = (long)param;

  for(int x = 0; x<5; x++)
  {
    sleep(1);

    sem_wait(&cFull); //Lock empty semaphore if not zero
    pthread_mutex_lock(&mutex);

    //print error if cookie not decremented correctly
    if(remove_item(index))
    {
      fprintf(stderr, "Consumer error.");
    }

    pthread_mutex_unlock(&mutex);
    sem_post(&cEmpty); //Increments semaphore for # of empty
  }
pthread_exit(NULL);
return 0;
}
//Insert item function to increment the cookie count and print thread message
int insert_item(long threadID)
{
  if(counter < BUFFER_SIZE) //Buffer has space
  {
    counter++;
    printf("Producer %ld inserted a cookie. Total:%d\n", threadID, counter);
    return 0;
  }
  else //Buffer full
  {
    return -1;
  }
}

//Remove item function to decrement the cookie count and print thread message
int remove_item(long threadID)
{
  if(counter > 0) //Buffer has something in it
  {
    counter--;
    printf("Consumer %ld removed a cookie. Total:%d\n", threadID, counter);
    return 0;
  }
  else //Buffer empty
  {
    return -1;
  }
} 
```

# javascript - Firefox 扩展与 DOM 交互

> ID：15884257
> 
> 赞同：2
> 
> 时间：2013-04-08T16:26:24.563
> 
> 标签：javascript, firefox-addon

可能是我的逻辑错误，但我正在尝试在我的扩展程序和内容之间发送和接收数据。

所以我从这样的事情开始，将数据从我的内容发送到我的扩展：

```
var images_elements = [];
tabs.activeTab.attach({
  contentScript: "postMessage(document.getElementsByTagName('img'));",
  onMessage: function (message) {
    images_elements = message;
  }
}); 
```

显然，它不起作用。我怎么能做这样的事情？而我该如何以另一种方式做到这一点，例如在发出**require("sdk/request").Request**并在内容中替换它们之后在这些元素上制作一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:15:47.300

您可以发送数据，但 API 只接受[JSON 可序列化值的](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/guides/content-scripts/using-port.html#json_serializable)数据。

DOM 节点不在该类别中，这就是它不起作用的原因。

# vb.net - 通过visual basic访问swf文本字段

> ID：15884258
> 
> 赞同：1
> 
> 时间：2013-04-08T16:26:25.007
> 
> 标签：vb.net, actionscript-3, flash

我们将 .swf Flash 动画嵌入到 Visual Basic 应用程序中。

我正在尝试使用以下代码读取动画中名为“bob”的文本字段的内容；

```
TextBox1.Text = AxShockwaveFlash1.GetVariable("bob") 
```

执行时 textbox1 中的输出为 "_level0.bob" ???

这与动画中的实际文本不同，并且知道如何访问它？

尝试过 bob.text 等。

谢谢

菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:00:06.087

正确找到了一个适用于 as3 和 VB 的解决方案，它是从其他一些解决方案拼凑而成的，您需要在动作脚本中使用外部接口这里是 AS3 和 VB 中的代码。发送两个字符串小时和分钟。

AS3

```
function TimeUpdate(o:Object)
{
    var r:String = "";
    for (var v in o)
        //Move the values from visual basic to mins and hours

        if (v = "mins") mins = o[v];
        if (v = "hours") hours = o[v];

    time.text = hours + ":" + mins;

    return "TimeUpdate was called";
}

if (ExternalInterface.available)
   ExternalInterface.addCallback('TimeUpdate', TimeUpdate); 
```

视觉基础

```
Dim x As String
        x = "<invoke name=""TimeUpdate"" returntype=""xml"">"
        x = x & "<arguments>"
        x = x & "<object>"
        x = x & "<property id='hours'><string>2</string></property>"
        x = x & "<property id='mins'><string>33</string></property>"
        x = x & "</object>"
        x = x & "</arguments>"
        x = x & "</invoke>"

        Dim responce As String
        responce = AxShockwaveFlash1.CallFunction(x)
        MsgBox(responce ) 
```

希望这对人们有用。

菲尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:50:12.580

我认为你遇到的问题是双重的。首先，您需要能够以某种方式知道 swf 已准备好。我试图让它在 VBA 应用程序中工作一次（访问），但我永远无法可靠地让它工作。

您需要意识到的第二件事是 TextField 是 TextField 类型，而不是 String。

# asp.net - C# ASP.NET - 通过类控制/更新 textbox.text 值

> ID：15884259
> 
> 赞同：0
> 
> 时间：2013-04-08T16:26:27.173
> 
> 标签：asp.net, class, textbox

新手，我需要关于我正在创建的网站的帮助。

我有一个类对用户输入的某些文本进行一些分析，然后该类找到适当的答案并将其发送回文本框。（理论上）

问题是我不知道如何从一个类中控制和访问 default.aspx 页面上的文本框，我得到的只是“需要对象引用非静态字段”。

我在设计器文件中公开了文本框，但仍然没有乐趣。:(

我还阅读了以下内容：[如何从解决方案中的类访问 ASP.NET 页面上的控件？](https://stackoverflow.com/questions/6362878/how-can-i-access-the-controls-on-my-asp-net-page-from-a-class-within-the-solutio)，我认为这与我想要实现的目标一致，但我需要逐步说明/如何实现这一目标。

希望有人能指出我正确的方向。

非常感谢，卡尔

这是我添加到 Designer.cs 文件中的代码：

公共全局::System.Web.UI.WebControls.TextBox TextBox3;

```
 public string MyTextBoxText
    {
        get
        {
            return TextBox3.Text;
        }
        set
        {
            TextBox3.Text = value;
        }
    } 
```

这是我创建的类方法：

公共静态cleanseMe（字符串输入）{

```
 string utterance = input;
        string cleansedUtt = Regex.Replace(utterance, @"[!]|[.]|[?]|[,]|[']", "");
        WebApplication1._Default.TextBox3.text = cleansedUtt;

    } 
```

我可以只返回我知道的 cleansedUtt 字符串，但是我可以在这个类中将此字符串附加到该方法中的所述文本框吗？

我也尝试过这种方式，我编写了一个类，该类接受文本框的名称和要附加到该文本框的字符串。它只能在 default.aspx 页面上工作，并且不能识别不同类中的文本框名称。代码如下：

```
public class formControl
{
    public static void ModifyText(TextBox textBox, string appendthis)
    {   
        textBox.Text += appendthis + "\r\n";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:37:54.000

我建议您不要`Controls`像`TextBox`在`class`. 无论您的类执行什么功能，将它们转换为接受参数并返回一些值的函数，然后根据该值设置`controls`值，这将是更有用和更好的做法。

所以现在你有了`reusable function`可以从任何你想要的页面使用的东西。您不需要为每个文本框都编写它。

这里我给你一个简单的例子

```
public class Test
{
   public bool IsValid(string value)
   {
       // Your logic 
       return true;
   }
} 
```

现在你可以像这样在你的页面上简单地使用它

```
 Test objTest = new Test();
  bool result=objTest.IsValid(TextBox1.Text);
  if(result)
  {
    TextBox1.Text="Everything is correct";
  }
  else
  {
    TextBox1.Text="Something went wrong";
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:47:34.330

如果您的*课程*在同一个项目（*Web Project*）中，则以下内容将起作用：

```
public class Test
{
    public Test()
    {
        //
        // TODO: Add constructor logic here
        //
    }

    public static void ValidateTextBox(System.Web.UI.WebControls.TextBox txt)
    {
        //validation logic here
        if (txt != null)
            txt.Text = "Modified from class";
    }
} 
```

您可以像这样从您的网络表单中使用它：

```
protected void Page_Load(object sender, EventArgs e)
{
    Test.ValidateTextBox(this.txt);
} 
```

如果您的班级在不同的（*班级项目*）中，则需要*添加对项目的*引用`System.Web`。

# asp.net-mvc - ASP.NET MVC ActionMailer 电子邮件布局？

> ID：15884260
> 
> 赞同：1
> 
> 时间：2013-04-08T16:26:34.627
> 
> 标签：asp.net-mvc, razor, actionmailer

使用 ActionMailer，是否可以为要使用的视图指定布局页面？如果是这样，布局页面应该是常规的 cshtml 视图还是也需要是 html.cshtml / txt.cshtml？

我已经注释掉了我尝试指定布局的一些行，但它不起作用。

**邮件控制器**

```
public EmailResult Welcome(User userInfo)
    {
        /*Create ViewModel*/
        To = "user@email.com";
        From = "test@email.com";
        Subject = "Welcome!";

        /*return Email("Welcome",welcomeVM,"EmailLayout",true);*/
        return Email("Welcome", welcomeVM);
    } 
```

**欢迎.html.cshtml**

```
@model WelcomeVM
{
    //Layout = "EmailLayout"
    Layout = null;
}

@*Email Contents Here*@ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:37:43.097

我习惯了[MvcMailer](https://github.com/smsohan/MvcMailer/wiki/MvcMailer-Step-by-Step-Guide)库。但是，请尝试以这种方式指定布局页面：

```
@{
    Layout = "~/Views/Shared/MyLayout.cshtml";
} 
```

只需确保布局页面存在于指定的路径中。

在步骤 2 中[ActionMailer 的文档页面](https://bitbucket.org/swaj/actionmailer.net/wiki/Home)中，它提到可以使用 Layouts：

> 现在我们需要为这封电子邮件创建一个视图。该视图可以使用您喜欢的任何 ViewEngine，它甚至可以与母版页（或 Razor 中的布局）一起使用。这些视图位于您的正常视图所在的相同位置。

# magento - Magento 1.7.0.2 - 在左页两列上方显示图像类别

> ID：15884262
> 
> 赞同：1
> 
> 时间：2013-04-08T16:26:40.727
> 
> 标签：magento, magento-1.7, magento-1.6

我的类别产品页面有这样的布局：2 列左侧边栏。

当我设置我的类别图像时，它仅在 1 列（类别页面）中上升。

我怎样才能使类别图像高于两个列、类别页面和侧边栏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T21:28:02.610

类别横幅（图像）来自`template/catalog/category/view.phtml`这样

```
$_imgHtml   = '';
if ($_imgUrl = $_category->getImageUrl()) {
  $_imgHtml = '<div class="category-image-container"><div class="category-image-container-inner"><p class="category-image"><img src="'.$_imgUrl.'" alt="'.$this->htmlEscape($_category->getName()).'" title="'.$this->htmlEscape($_category->getName()).'" /></p></div></div>';
    $_imgHtml = $_helper->categoryAttribute($_category, $_imgHtml, 'image');
} 
```

先评论这个

然后在`template/page/2columns-left.phtml`两者`<div class="main">`之间`<div class="col-left"><?php echo $this->getChildHtml('left') ?></div>`

编写类别横幅代码

```
<?php   
        $_category  = Mage::registry('current_category');
        if($_category){
         $_helper    = Mage::helper('catalog/output');

            $_imgHtml   = '';
            if ($_imgUrl = $_category->getImageUrl()) {
           echo   $_imgHtml = '<div class="category-image-container1"><div class="category-image-container-inner"><p class="category-image"><img src="'.$_imgUrl.'" alt="'.$this->htmlEscape($_category->getName()).'" title="'.$this->htmlEscape($_category->getName()).'" /></p></div></div>';
                $_imgHtml = $_helper->categoryAttribute($_category, $_imgHtml, 'image');
            }
        }
        ?> 
```

这将显示左列上方的类别横幅和内容。

# winforms - 当焦点单元格的文本长度达到最大长度时，如何扩展 XtraGrid 的行高？

> ID：15884268
> 
> 赞同：0
> 
> 时间：2013-04-08T16:27:07.333
> 
> 标签：winforms, delegates, devexpress, xtragrid

*   [http://i.stack.imgur.com/SlPIt.png](https://i.stack.imgur.com/SlPIt.png)

![这是我在焦点单元格中写文本的时候](https://i.stack.imgur.com/SlPIt.png)

*   [http://i.stack.imgur.com/Hf3Xj.png](https://i.stack.imgur.com/Hf3Xj.png) ![这是在我完成并按下 TAB 键后，它会自动展开。 之所以这样做，是因为我将备忘录编辑存储库用于可编辑（白色）单元格。 它的属性设置为 wrap=yes 和 scrolls visible = yes](https://i.stack.imgur.com/Hf3Xj.png)

我想获得最适合的图像，该图像在需要包装的每一秒都显示在第二张图像上。我怎样才能做到这一点 ？我希望在写入焦点单元格时扩展单元格，而不仅仅是在制表符子句上。

笔记：

1.列固定到一定的宽度。2.我使用devexpress 10版。 3.我在.net平台上使用windows forms c# 2.0。4.Windows窗体应用程序

# ios - 从 Xcode 构建自定义 SDK 库，我用什么签名重要吗？

> ID：15884269
> 
> 赞同：0
> 
> 时间：2013-04-08T16:27:09.113
> 
> 标签：ios, xcode

如果我正在构建一个自定义库，比如 CustomLib.a，那么我使用什么作为签名密钥来对其进行签名是否重要？我问这个是因为我正在为客户构建这个，我不确定为什么我需要签署这个。

如果我使用开发者密钥签名怎么办？企业密钥或分发密钥呢？还是根本不签？

有没有人有同样的经历？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:16:58.170

简单地说：你没有签名。应用程序使用它后，它将静态链接到该**特定应用程序的二进制文件，**并且只需要对其进行签名。

# php - 最新发布 Facebook 页面集成到网站

> ID：15884272
> 
> 赞同：0
> 
> 时间：2013-04-08T16:27:23.460
> 
> 标签：php, html, facebook, facebook-graph-api, curl

```
<?php

function fetchUrl($url){

 $ch = curl_init();
 curl_setopt($ch, CURLOPT_URL, $url);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
 curl_setopt($ch, CURLOPT_TIMEOUT, 20);

 $feedData = curl_exec($ch);
 curl_close($ch); 

 return $feedData;

}

$profile_id = "xxxxxxxxxxxxx";

//App Info, needed for Auth
$app_id = "xxxxxxxxxxxx";
$app_secret = "xxxxxxxxxxx";

 $authToken = fetchUrl("https://graph.facebook.com/oauth/access_token?type=client_cred&client_id={$app_id}&client_secret={$app_secret}");

$json_object = fetchUrl("https://graph.facebook.com/{$profile_id}/posts?{$authToken}");

$feedarray = json_decode($json_object);

echo $json_object;

foreach ( $feedarray->data as $feed_data )
{
    echo "<h2>{$feed_data->name}</h2><br />";
    echo "{$feed_data->message}<br /><br />";
}

  ?> 
```

当我尝试使用我的详细信息（完全打开的页面）运行我的代码时，我得到一个输出

```
Warning: Invalid argument supplied for foreach() in /home/xxxxxxxxx/public_html/includes/footer.php on line 52 
```

当我使用下面的代码时，它会打印 bool(false)。

```
$feedData = curl_exec($ch);
var_dump($feedData); die(); 
```

我发现 fetchUrl 不起作用，我尝试了许多不同的方法，但似乎都不起作用......

有任何想法吗？

# cakephp - findall 忽略顺序参数？

> ID：15884281
> 
> 赞同：1
> 
> 时间：2013-04-08T16:28:11.543
> 
> 标签：cakephp

我正在尝试使用以下内容：

```
 $this->Chapter->recursive=1;
    $chaps = $this->Chapter->find('all', array(
         'order'=> array('sequence_number' => 'ASC') 
    ));
    $this->set('chapters', $chaps ); 
```

通过增加顺序来检索我的所有章节，但 CakePHP 似乎忽略了“顺序”参数。我相信我的语法是正确的（基于视图源：[http](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#creating-custom-find-types) ://book.cakephp.org/2.0/en/models/retrieving-your-data.html#creating-custom-find-types ，它说以下应该工作：

```
public function index() {
    $articles = $this->Article->find('available', array(
        'order' => array('created' => 'desc')
    ));
} 
```

）。该表的 SQL 如下所示：

```
CREATE TABLE chapters (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    sequence_number INT UNSIGNED,
    title VARCHAR(50)
); 
```

而且我没有收到任何语法或运行时错误。但是，Cake 生成的实际获取章节记录的 SQL 是：

```
SELECT `Chapter`.`id`, `Chapter`.`sequence_number`, `Chapter`.`title` 
FROM `Tutorial`.`chapters` AS `Chapter` WHERE 1 = 1 
```

显然我做错了什么，但我不知道它是什么。

**作为一种变通**方法，我很乐意在模型上放置一个 order 属性。由于我通常想按序列号检索章节，因此可以将其添加到模型中：

```
public $order = 'Chapter.sequence_number ASC'; 
```

一旦我这样做了，蛋糕就会生成

```
SELECT `Chapter`.`id`, `Chapter`.`sequence_number`, `Chapter`.`title` 
FROM `Tutorial`.`chapters` AS `Chapter` WHERE 1 = 1 
ORDER BY `Chapter`.`sequence_number` ASC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:35:33.047

如果你尝试这样的事情，而不是：

```
$chaps = $this->Chapter->find('all', array(
     'order' => array('Chapter.sequence_number ASC') 
)); 
```

*主要区别在于这部分：`Chapter.sequence_number ASC`*

# c++ - 给定用户输入整数的 C++ 打印空格或制表符

> ID：15884284
> 
> 赞同：10
> 
> 时间：2013-04-08T16:28:35.530
> 
> 标签：c++, tabs

我需要将用户输入（一个数字）转换为 TAB 空格的输出。示例我问用户：

```
cout << "Enter amount of spaces you would like (integer)" << endl;
cin >> n; 
```

(n) 我需要把它变成一个输出，比如：

```
cout << n , endl; 
```

屏幕上打印的将是空格前输入是 5 输出 | **_** | <~~~那里有五个空格。

抱歉，如果我不清楚，可能这就是我无法通过其他人的问题找到答案的原因。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-04-08T16:35:22.113

只需使用`std::string`：

```
std::cout << std::string( n, ' ' ); 
```

然而，在许多情况下，根据接下来发生的情况，`n`将参数添加到`std::setw`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-08T16:31:53.257

```
cout << "Enter amount of spaces you would like (integer)" << endl; 
cin >> n;
//print n spaces
for (int i = 0; i < n; ++i)
{
   cout << " " ;
}
cout <<endl; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-08T16:30:28.957

您只需要一个循环来迭代由 给出的次数`n`并每次打印一个空格。这会做：

```
while (n--) {
  std::cout << ' ';
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-27T02:31:37.890

我只是碰巧在寻找类似的东西并想出了这个：

```
std::cout << std::setfill(' ') << std::setw(n) << ' '; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-06-21T07:49:18.180

您可以使用代表设置宽度的 C++ 操纵器 setw(n) 函数来打印 n 个空格。

```
#include <iostream>
#include <iomanip>
using namespace std;

int main()
{
  int n;
  std::cin>>n; 
  cout<<"Here is "<<n <<" spaces "<<setw(n)<<":";
} 
```

并且不要忘记包含 C++ 库 -

[在此处输入图像描述](https://i.stack.imgur.com/zSO8R.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-20T16:44:05.753

使用流变量将单个空格附加到输出文件。

`// declare output file stream varaible and open file ofstream fout; fout.open("flux_capacitor.txt"); fout << var << " ";`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-08T17:05:46.780

只需为 { 2 3 4 5 6 } 添加空格，如下所示：

```
cout<<"{";

for(){
    cout<<" "<<n;    //n is the element to print !
}

cout<<" }"; 
```

# c# - 从二维数组中获取随机值

> ID：15884285
> 
> 赞同：-1
> 
> 时间：2013-04-08T16:28:54.853
> 
> 标签：c#, multidimensional-array

我从一维数组中获取值的方式是：

```
Random random = new Random();
getit = w[r.Next(0, w.Length)]; 
```

你能告诉我如何对二维数组做同样的事情吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T16:33:46.193

为确保您的分布均匀，您不应生成多个随机数。通过乘以维度的长度来计算可能的值的总数，选择一个索引，然后找到与该索引对应的一项：

```
public static T GetRandomValue<T>(T[,] array, Random random)
{
    int values = array.GetLength(0) * array.GetLength(1);
    int index = random.Next(values);
    return array[index / array.GetLength(0), index % array.GetLength(0)];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T16:32:11.977

假设您有一个简单的二维数组`[,]`¹，*而不是锯齿数组`[][]`*，那么您可以使用该[`Array.GetLength`方法](http://msdn.microsoft.com/en-us/library/system.array.getlength.aspx)获取每个数组维度的长度。例如：

```
Random random = new Random();
string[,] arr = new string[10, 10];

int i1 = r.Next(0, arr.GetLength(0));
int i2 = r.Next(0, arr.GetLength(1));
string value = arr[i1, i2]; 
```

¹ ) 多维数组的下界有可能与默认的0不同。这种情况下，请适当使用该[`Array.GetLowerBound`方法](http://msdn.microsoft.com/en-us/library/system.array.getlowerbound.aspx)。

* * *

如果你有一个锯齿状数组`[][]`，而*不是一个真正的二维数组`[,]`*，那么你可以按顺序进行：

```
Random random = new Random();
string[][] arr = new string[][10];
for (int i = 0; i < arr.Length; i++)
    arr[i] = new string[10];

int i1 = r.Next(0, arr.Length);
string[] subarr = arr[i1];
int i2 = r.Next(0, subarr.Length);
string value = subarr[i2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:39:32.787

Not really the fastest method, but you could also do this with a bit of Linq:

```
var totalSize = Enumerable.Range(0, array.Rank).Aggregate(0, (l, r) => l * array.GetLength(r));
var getit = w.ElementAt(r.Next(0, totalSize)); 
```

This works for arrays of any dimension.

# c# - C# DataGridView（使用数据源填充）不保存到数据库

> ID：15884286
> 
> 赞同：2
> 
> 时间：2013-04-08T16:28:57.640
> 
> 标签：c#, database, datagridview, save, datasource

我有一个表单，我希望用户可以从数据库表“用户”中删除和编辑（而不是添加）行。我在 VS2010 中创建了一个表单和一个 DataSource，DataSource 是使用新的 DataSource 向导创建的。从这里，我将 DataSource 窗口条中的 Users 表的 DataGridView 拖放到表单中。

我遇到的问题是，当我运行应用程序时，数据会很好地加载到 DataGridView 中，但是当我删除或编辑一行并单击保存时，它不会更新数据库。

我是一个新手用户，所以我确定我做了一些愚蠢或幼稚的事情 - 我需要在这里添加一些 sql 调用吗？

有任何想法吗？

![在此处输入图像描述](https://i.stack.imgur.com/zakfw.png)

```
public partial class EditUsers : Form
{
    public EditUsers()
    {
        InitializeComponent();
    }

    private void EditUsers_Load(object sender, EventArgs e)
    {
        // TODO: This line of code loads data into the 'debenhamsProjectOfficeDatabaseDataSet.Users' table. You can move, or remove it, as needed.
        this.usersTableAdapter.Fill(this.debenhamsProjectOfficeDatabaseDataSet.Users);

    }

    private void usersBindingNavigatorSaveItem_Click(object sender, EventArgs e)
    {
        try
        {
            this.Validate();
            this.usersBindingSource.EndEdit();
            this.tableAdapterManager.UpdateAll(this.debenhamsProjectOfficeDatabaseDataSet);
            MessageBox.Show("Update successful");
        }
        catch (System.Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T20:20:19.520

使用数据库填充数据网格视图的一种更灵活的方法是使用连接字符串。

在解决方案资源管理器中右键单击您的项目文件并添加一个新项目。添加一个类并将其命名为 connection.cs。在这里输入

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Your_Project_Name
{
class Connection
{
    string ConnectionString;
    public Connection()
    {
        ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;" +
        "Data Source=C:/User/somefolder/Your_Database.accdb;Persist Security Info=False;";

    }
    public string getConnection()
    {
        return ConnectionString;
    }
} 
```

现在将 using 添加`System.Data.OleDb;`到 form1 顶部的标题中。

现在`public partial class EditUsers : Form`投入

```
OleDbConnection connect = new OleDbConnection();
        OleDbCommand command = new OleDbCommand();
        OleDbDataReader reader;
        Connection c; 
```

最后`private void EditUsers_Load`输入

```
c = new Connection();
            connect.ConnectionString = c.getConnection(); 
```

# php - serialize() 和 unserialize() 混淆和转义

> ID：15884287
> 
> 赞同：0
> 
> 时间：2013-04-08T16:28:59.547
> 
> 标签：php, wordpress, serialization, escaping

`serialize()`我对和有一些问题`unserialize()` 。

我正在为 Wordpress 编写一个函数，该函数实际上是一个设置页面，我正在尝试使用两个输入字段导出和导入设置数组。

代码（和页面）有点长，所以我把它贴[在 PASTEBIN 上](http://pastebin.com/DNh7bG5p)，这样更舒服一些。

我遇到的问题是 wordpress 使用设置 API 将选项（或设置）保存为序列化数组。

我拥有的功能可以成功显示以下选项：

```
a:10:{s:24:"brsa_copyright_meta_text";s:0:"";s:25:"brsa_remove_menu_css_list";s:0:"";s:19:"brsa_remove_submenu";s:0:"";s:21:"brsa_remove_menu_list";s:0:"";s:15:"brsa_footer_txt";s:0:"";s:22:"brsa_dash_wdgt_content";s:0:"";s:36:"brsa_add_custom_login_message_string";s:0:"";s:21:"brsa_login_url_string";s:0:"";s:21:"brsa_login_alt_string";s:0:"";s:14:"brsa_login_img";s:0:"";} 
```

没关系。它是序列化的，但是当我尝试将其插入数据库（或通过按导入按钮将其显示在另一个字段上）时，`escaped`我认为它实际上是，并且无论如何，它不会以序列化的方式插入数据库，但是作为一个字符串..

```
a:10:{s:24:\"brsa_copyright_meta_text\";s:0:\"\";s:25:\"brsa_remove_menu_css_list\";s:0:\"\";s:19:\"brsa_remove_submenu\";s:0:\"\";s:21:\"brsa_remove_menu_list\";s:0:\"\";s:15:\"brsa_footer_txt\";s:0:\"\";s:22:\"brsa_dash_wdgt_content\";s:0:\"\";s:36:\"brsa_add_custom_login_message_string\";s:0:\"\";s:21:\"brsa_login_url_string\";s:0:\"\";s:21:\"brsa_login_alt_string\";s:0:\"\";s:14:\"brsa_login_img\";s:0:\"\";} 
```

..使整个代码无法使用。代码的相对部分是这样的：

```
 $my_options = get_option( 'o99_brsa_settings' );

    $currentsettings = "";
        if ( isset( $_POST['import'] ) && trim($_POST['exccc']) != "" ) {
            $currentsettings = $_POST['exccc'];
            update_option( 'o99_brsa_settings', serialize($currentsettings));

        } elseif ( isset( $my_options ) && ( $my_options != "" ) ) {
            if ($o99_brsa_options['brsa_keep_settings_exp'] !='') {
            $currentsettings = $o99_brsa_options['brsa_keep_settings_exp'];  
            } else {
                $currentsettings =  serialize( $my_options );
            }
        } 
```

尽管我确实相信应该[查看整个代码](http://pastebin.com/DNh7bG5p)以了解它应该如何工作。

除了它不起作用的事实之外，我不太确定问题是什么，但首先我想知道*为什么值是`/escaped/`*以及如何防止它？

任何其他帮助也将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:43:31.553

您的服务器可能已`magic_quotes`启用。请您的管理员禁用它。

# c++ - 在 C++ 中删除 void* 指针

> ID：15884289
> 
> 赞同：1
> 
> 时间：2013-04-08T16:29:10.997
> 
> 标签：c++, void-pointers

我正在阅读 C++ 中的思考，第 13 章：动态对象创建。在本章中，Eckel 谈到删除 void* 可能是一个 bug。以下段落让我感到困惑。

> 另一个内存泄漏问题与确保为容器中保存的每个对象指针实际调用删除有关。容器不能“拥有”指针，因为它将指针作为 void* 保存，因此无法执行正确的清理。用户必须负责清理对象。如果将指向在堆栈上创建的对象和在堆上创建的对象的指针添加到同一个容器，这会产生一个严重的问题，因为删除表达式对于尚未在堆上分配的指针是不安全的。

谁能更详细地解释为什么“将指向在堆栈上创建的对象和在堆上创建的对象添加到同一个容器”会产生严重问题？

为了让问题更清楚，我添加了相关的代码片段。

```
class Stack {
  struct Link {
    void* data;
    Link* next;
    void initialize(void* dat, Link* nxt);
  }* head;
public:
  void initialize();
  void push(void* dat);
  void* peek();
  void* pop();
  void cleanup();
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:32:04.980

作为一般规则，堆栈上的对象不需要被删除，堆上的对象需要。如果将它们放在同一个容器中，如何跟踪要删除的容器？您最好有两个容器，一个用于堆栈上的对象（不需要删除的对象），另一个用于堆上的对象（需要删除的对象）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:41:49.423

This paragraph is indeed a bit vague. It mixes 2 different issues and that leads to confusion, in my opinion.

1.  In order to correctly delete an object, its type must be known to the compiler. For `void*` the type isn't known (that's exactly the point of using `void*` - to hide the actual type). So the deletion can't be performed on such object without casting to the proper actual type.
2.  Normally usage of `void*` implies that ownership of the pointed object belongs to some outer entity **by design**, and not to the entity containing the pointer. Inside the entity the pointer is opaque and serves as a handler to an external object, which is a black-box as far as the the entity is concerned. The `Stack` class must be well aware of the responsibilities division and must not attempt to destroy the `void*` object since it has no idea neither about it's lifetime (leading to attempt to free stack variable, for example), nor about the operations that should be done upon the destruction (leading to functional incorrectness).

# wordpress - WordPress 重定向

> ID：15884291
> 
> 赞同：0
> 
> 时间：2013-04-08T16:29:20.047
> 
> 标签：wordpress

我要在我的一个网站上更改 wordpress 主题，这将更改所有链接。

将大约 100 个页面从 **domain.com/portfolio/123**重定向到**domain.com/123**（没有投资组合的名称）的最佳/最快方法是什么。

谢谢，朱莉娅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:40:12.100

通过在 .htaccess 文件中使用规则。

```
RewriteRule ^portfolio/(.*)$ /$1 [L,R=301,QSA] 
```

# git - 当你已经推送了一个特性分支时，如何将你的本地主分支推送到 Heroku？

> ID：15884297
> 
> 赞同：6
> 
> 时间：2013-04-08T16:29:49.573
> 
> 标签：git, heroku

为了尝试一个功能分支，我将它推送给 Heroku 的 master（因为这是它用于您网站的唯一分支），即我做了：

```
git push heroku feature-foo:master 
```

同时，我对我的本地 master 分支做了一些提交。现在我想把我的本地主人推回 Heroku，但我得到了：

```
To git@heroku.com:foo-repo.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@heroku.com:foo-repo.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

这是有道理的，因为 Heroku 的 master 确实在我的 feature-foo 分支上，因此领先于 master。但我不想从 Heroku 中提取和合并——因为这与合并我的 feature-foo 分支相同，我不想这样做。现在，我只想在没有 feature-foo 提交的情况下推送我的本地 master。（事实上​​，我已经使用过`heroku rollback`，因此功能 foo 更改不会在网站上生效。）

我怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T17:03:48.150

答案很简单。做一个强制推动，即

```
git push -f heroku master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-19T18:04:22.673

您还可以转到您的站点 heroku 仪表板并从您推出非主分支之前回滚到以前的构建。

访问`dashboard.heroku.com/apps/your-app-goes-here/activity`

到达那里后，您应该看到：

[![在此处输入图像描述](https://i.stack.imgur.com/lkDeQ.png)](https://i.stack.imgur.com/lkDeQ.png) 单击`Roll back to here`要返回的构建。一旦你回滚到正确的构建，你就可以从 master 推送而无需使用武力。

# java - 如何在java中修改xml字符串

> ID：15884300
> 
> 赞同：0
> 
> 时间：2013-04-08T16:29:54.223
> 
> 标签：java, xml

我有一个枚举，它存储大量这样的 xml 字符串

```
enum1("<?xml version='1.0'?><!DOCTYPE FOO><FOO><HEADER><MESSAGE-ID>1</MESSAGE-ID><MESSAGE-TYPE>RQ</MESSAGE-TYPE></HEADER>[...someXMLstructure...]</FOO>")
enum2("<?xml version='1.0'?><!DOCTYPE FOO><FOO><HEADER><MESSAGE-ID>1</MESSAGE-ID><MESSAGE-TYPE>Q</MESSAGE-TYPE></HEADER>[...someOTHERXMLstructure...]</FOO>") 
```

字符串是通过访问`myEnum.getTag()`

我的应用程序为这个字符串中表示的一些节点获取用户输入，该字符串存储为 a `Map<String, String>`，其中`key`是`map`XML`element`文档的，`value`而`value`.

`String`本质上，我想从枚举中复制 XML 并替换地图中找到的任何相应元素，然后通过某个第三方不相关的接口将此消息作为结束发送。例如，用户可以传入`MESSAGE-ID=3`，`USER-ID=360`所以我们会找到`MESSAGE-ID`字符串的元素并替换它，然后`USER-ID`在某个未知的通用位置找到并替换它。如果`USER-ID`在 XML 中未找到，则将其简单地丢弃。

**编辑：** 如果有更好的方法来做到这一点，即将 XML 转换为某种数据结构并修改它然后转换回字符串，我很高兴听到它，但是我在我的搜索。

谢谢你的帮助

# c# - C# 4.0 Antlr4 运行时

> ID：15884306
> 
> 赞同：1
> 
> 时间：2013-04-08T16:30:27.360
> 
> 标签：c#, compiler-construction, antlr4

有谁知道，其他非 java 运行时，尤其是 C# 4.0 何时可用。

早期的 Antlr 3.0 版本几乎为所有流行的编程语言提供了运行时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:41:08.467

在此处获取 ANTLR C# 目标的 alpha 版本 2：http: [//tunnelvisionlabs.com/downloads/antlr/2013-02-27-antlr4-csharp-4.0.1-SNAPSHOT.7z](http://tunnelvisionlabs.com/downloads/antlr/2013-02-27-antlr4-csharp-4.0.1-SNAPSHOT.7z)

在 ANTLR 讨论组中公布：[https ://groups.google.com/forum/#!topic/antlr-discussion/1vhJja-k6NQ](https://groups.google.com/forum/#!topic/antlr-discussion/1vhJja-k6NQ)

# jquery - jQuery排序 按字母顺序无法正常工作

> ID：15884308
> 
> 赞同：-2
> 
> 时间：2013-04-08T16:30:31.990
> 
> 标签：jquery, sorting

这就是我试图按字母顺序对我进行排序的`<li>`方法，但由于某种原因，它们的顺序不正确。我有一种感觉，这是因为 items.push 中的整个`<li>`标签，但我这样做是为了保留列表项具有的当前类和数据属性。有没有不同的方法可以做到这一点？

```
var items = [];

$("ul.cat-list li").each(function(){
     var liClass = $(this).attr("class");
     items.push("<li class="+liClass+" data-task="+$(this).data("task")+">"+$(this).html()+"</li>");
});

items.sort();

$("ul.alpha-list").html(items); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:46:27.353

看来您想克隆元素，您可以使用 jQuery`clone`方法并根据元素的 html 内容对元素进行排序。

```
$('ul.cat-list li').clone().sort(function(a, b){
   return $.trim(a.innerHTML) > $.trim(b.innerHTML);
}).appendTo('ul.alpha-list'); 
```

[http://jsfiddle.net/LmjTS/](http://jsfiddle.net/LmjTS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:54:32.663

Sort 设置用于排序字典数据，例如字符串，而不是 DOM 对象。可以使用 jQuery 排序命令对其他类型的数据或对象进行排序，但您需要使用排序功能。

排序函数接受两个参数，通常按约定编写，`a`并`b`根据这些项目返回布尔响应。对于这种特殊情况，您希望按`li`项目的内部 HTML 进行排序，因此`Adam`> `Bob`，因此我们需要如下所示的函数：

```
function mySort(a,b){
    return ( $(a).html() > $(b).html()) ? 1 :
      (a.html() < b.html()) ? -1 :
     0
} 
```

所以在这里他有一个函数，如果 的内容在`a`字典上大于，则返回 '1' `b`，如果 'b' 更大，则返回 '-1'，如果它们相等或无法排序，则返回 0，假设我没有犯任何错误。然后将该函数`sort`作为参数传递给，即`myArray.sort(mySort)`.

# postgresql - PostgreSQL 全文搜索和三元组混淆

> ID：15884309
> 
> 赞同：44
> 
> 时间：2013-04-08T16:30:33.377
> 
> 标签：postgresql, full-text-search, pattern-matching

我对 PostgreSQL、全文搜索和 Trigram 的整个概念有点困惑。在我的全文搜索查询中，我使用 tsvector，如下所示：

```
SELECT * FROM articles
WHERE search_vector @@ plainto_tsquery('english', 'cat, bat, rat'); 
```

问题是，这种方法不考虑拼写错误。然后我开始阅读有关 [Trigram 和`pg_trgm`](http://www.postgresql.org/docs/current/interactive/pgtrgm.html)：

查看其他示例，似乎使用了三元组或使用了向量，但从不同时使用两者。所以我的问题是：它们曾经一起使用过吗？如果是这样，怎么做？trigram 会取代全文吗？三元组更准确吗？三元组对性能的影响如何？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-08T17:01:14.877

它们的用途非常不同。

*   全文搜索用于返回匹配词干搜索查询的文档。
*   三元组为您提供了一种比较两个字符串并确定它们看起来有多相似的方法。

考虑以下示例：

```
SELECT 'cat' % 'cats'; --true 
```

以上返回 true 因为与（由 pg_trgm 限制规定）`'cat'`非常相似。`'cats'`

```
SELECT 'there is a cat with a dog' % 'cats'; --false 
```

上面的返回是`false`因为`%`在两个完整的字符串之间寻找相似的，而不是在字符串中寻找`cats` *单词*。

```
SELECT to_tsvector('there is a cat with a dog') @@ to_tsquery('cats'); --true 
```

这会返回`true`，因为 tsvector 将字符串转换为词干列表并忽略了一堆常用词（停用词 - 像 'is' 和 'a'）... 然后搜索`cats`.

听起来您想使用三元组来**自动更正**您的`ts_query`，但这实际上是不可能的（无论如何都不是以任何有效的方式）。他们真的不*知道*一个词拼错了，也不知道它与另一个词有多相似。它们*可*用于搜索单词表以尝试查找相似的单词，从而允许您实现“您的意思是……”类型的功能，但该单词需要维护一个单独的表，其中包含您的`search`字段中使用的所有单词。

如果您希望文本索引匹配一些常见的拼写错误的单词/短语，您可能需要查看[Synonym Dictorionaries](http://www.postgresql.org/docs/current/static/textsearch-dictionaries.html#TEXTSEARCH-SYNONYM-DICTIONARY)

# email - 在 mvc/c# 中动态更新电子邮件正文中的 URL

> ID：15884311
> 
> 赞同：0
> 
> 时间：2013-04-08T16:30:40.237
> 
> 标签：email, model-view-controller, html-email, url-encoding

致力于在 mvc 中发送帐户验证电子邮件。我为电子邮件正文创建了一种格式，如下所示，并保存在名为“EmailFormat.html”的解决方案中的 html 文件中。

```
<body>
Dear [Name],
<p>Thanks for registration.To activate your account please follow the link below:</p>
<p><a href="[url]"> click here for verification </a></p>
<p>if you are not Name or didn't register on abc.com you can ignore this email.</p>
<p>Regards,</p>
<p>www.abc.com</p>
</body> 
```

我有 ac# 类处理电子邮件发送。我将上述 html 文件作为电子邮件正文并尝试用实际运行时参数替换 [Name] 和 [url]。

```
 string name = myclass.FirstName + " " + myclass.LastName;
    using (Stream stream = Assembly.GetExecutingAssembly().GetManifestResourceStream("abc." + "EmailFormat.html"))
    using (StreamReader reader = new StreamReader(stream))
       {
            body = reader.ReadToEnd();
        }             

     body.Replace("[Name]", name);
     string url = HttpUtility.HtmlEncode("http://localhost/Controller/Method/uniqueid")
     body.Replace("[url]",url);
     emailutility.send();//ignore this send code. 
```

我收到电子邮件很好，但问题是单击“单击此处进行验证”时，它会将我带到 %5Burl%5D 而不是实际的 url。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:47:09.080

我的错。`body.Replace("[Name]", name);` 在我将其更改为以下内容后，它无法更新正文 ：-

```
body = body.Replace("[Name]", name);
body = body.Replace("[url]",url); 
```

解决！！！！

# java - 如何在小程序中对角和垂直显示文本

> ID：15884312
> 
> 赞同：0
> 
> 时间：2013-04-08T16:30:43.947
> 
> 标签：java, applet

在`JApplet`. 我想显示字符串变量。

可以在[此处](https://encrypted-tbn0.gstatic.com/images?q=tbn%3aANd9GcT5zB32LNw5NG34oiKCf7wau1kHM57RjHDeMIH3C_Bc1tn9hsX3)找到对角线格式的示例。

垂直格式示例：

```
V
E
R
T
I
C
A
L 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:54:58.167

有些组件可以自然地做到这一点。

1.  您可以尝试使用 JTextArea。只需在每个垂直字符后添加一个新行。然后，您可以在对角线的每一行之前添加多个空格。实际上文本区域支持字母换行，因此您可以使用等宽字体并使用单列创建文本区域，它应该为您做垂直。

2.  您可以将[文本图标](http://tips4java.wordpress.com/2009/04/02/text-icon/)用于垂直。然后可以自定义对角线的代码，为每个字母添加一个间隙。

# openstreetmap - 获取国家、州或地区的纬度/经度中心

> ID：15884319
> 
> 赞同：1
> 
> 时间：2013-04-08T16:31:01.910
> 
> 标签：openstreetmap

Given 是一个充满政治区地理数据/名称的父/子关系的数据库：

*   国家
*   状态
*   区

现在我正在查询该数据，构建一个类似的字符串`germany,bavaria,ebersberg`，然后尝试通过[*Nominatim* API](http://wiki.openstreetmap.org/wiki/Nominatim)（OpenStreetMaps 的一部分）获取该地区的纬度/经度中心。

示例字符串：

```
http://nominatim.openstreetmap.org/search?format=xml&polygon=0&addressdetails=0&q=germany,bavaria,ebersberg 
```

问题是，我用 lat/lng 取回了一堆 POI，而不是精确的地理数据。这通常会导致显示该地区的一半，因为第一个 POI 可能靠近该地区的边界。

有谁知道获得中心纬度/经度的方法或如何使 OSM 地图居中？或者有没有人知道可以实现这一点并说明它是如何工作的/做一个例子的替代 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:07:13.303

> 有谁知道获得中心纬度/经度的方法或如何使 OSM 地图居中？

当你得到一堆（列表，一组）具有纬度和经度的兴趣点时，你就有了一个特征，而不是一个问题。

您遍历 POI，构建一个包含所有 POI 的边界矩形。换句话说，您会找到最小纬度、最小经度、最大纬度和最大经度。

您可以通过公式找到矩形的中心

```
(maximum + minimum) / 2 
```

边界区域应该足够小，以至于在使用纬度和经度时不会产生太多错误。

否则，您可以计算最小纬度、经度和最大纬度、经度之间的距离。中心距最小纬度，经度的一半距离。将该中心点转换回您的答案的纬度和经度。

# android - 将图像添加到 android 项目 - eclipse

> ID：15884320
> 
> 赞同：0
> 
> 时间：2013-04-08T16:31:05.423
> 
> 标签：android

我正在尝试在我的 android 应用程序中添加图像。我正在使用 html。我的照片在 res/drawable 文件夹中。我使用代码 img src= 但我只是在图像上得到一个问号。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:53:11.847

尝试使用：

```
<img src="file:///android_res/drawable/image.png" /> 
```

您不需要将可绘制对象的限定符放在 SRC 属性中。

# java - 一个接口有两个类型参数。我可以实现两种类型相同的接口，以便它们兼容吗？

> ID：15884325
> 
> 赞同：3
> 
> 时间：2013-04-08T16:31:19.497
> 
> 标签：java, generics, inheritance, types

这是一个现有的接口：

```
public interface MyInterface<T, U> {
    public T foo(U u);
} 
```

我想在假设 T 和 U 是同一类型的情况下实现这个接口。我想也许我可以将类型参数保持原样，然后只要我只用两个相同类型的实例实例化这个特定的实现，它就可以工作：

```
public class MyOuterClass<A> {

    public class MyClass<T, U> implements MyInterface<T, U> {

        @Override
        public T foo(U u) {
            return u; //error here
    }

    //even though in the only instantiation of MyClass, T and U are the same
    private MyClass<A, A> myInstance = new MyClass<A, A>();

} 
```

但是，也许不出所料，这不起作用，因为类型 T 和 U 不兼容。

所以然后我想也许我可以通过将 MyClass 更改为类似或类似的东西来更改 MyClass 以指定其类型始终相同`MyClass<A, A> implements MyInterface<A, A>`，但是我收到错误说 T 已经定义。

有没有办法实现 MyClass 以使其两种类型相同？

（比起 Java，我更像是一个 C++ 人，如果我在这里遗漏了一些关于 Java 泛型的基本知识，很抱歉。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:34:22.833

您的 myclass 需要如下所示：

```
public class MyClass<T> implements MyInterface<T, T> {

    @Override
    public T foo(T in) {
        return in;
    }
} 
```

让我们回顾一下您建议的类定义的作用：

```
public class MyClass<T, U> implements MyInterface<T, U> 
```

在这段代码中，`T`分别`U`做*两件事*：

*   在第一次出现时，他们定义了你的`MyClass`类的类型变量
*   在第二次出现时，他们指定了`MyInterface`类的具体类型

由于在类的主体内部`T`并且`U`是无界类型变量（即对实际类型一无所知），因此假定它们是不兼容的。

通过在您中只有一个类型变量，您`MyClass`可以明确假设：只有一个类型，我将它用于两种类型的接口。

最后但并非最不重要的一点：请记住，一旦完全处理了源代码，类型的编译就**完成了。**换句话说：与 C++ 所做的相反，泛型类型的“实例化”（C++ 中的“模板类型”或类似类型；对不起，我生疏的术语）**无法**处理。`MyClass<Foo>`并且`MyClass<Bar>`是相同的类型，就 JVM 而言（只有编译器实际区分它们）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:34:36.987

为 定义单个类型参数`MyClass`：

```
class MyOuterClass<A> {

    public class MyClass<T> implements MyInterface<T, T> {

        public T foo(T u) {
            return u;
        }
    }

    // Need only one 'A' here.
    private MyClass<A> myInstance = new MyClass<A>();

} 
```

当你说

```
public class MyClass<T> implements MyInterface<T, T> { 
```

...您正在定义*一个*通用变量 for`MyClass`并且您说它同时满足角色`T`和`U`in `MyInterface`。

# java - NetBeans Maven：ClassCastException - RestEasy 与 Jersey

> ID：15884326
> 
> 赞同：0
> 
> 时间：2013-04-08T16:31:21.900
> 
> 标签：java, maven, netbeans, resteasy, classcastexception

正如我的标题所说，我认为问题在于类加载，以及我的应用程序试图将 jersey-core 类转换为 resteasy 的事实。下面是触发它的代码，以及错误：

```
java.lang.LinkageError: ClassCastException: attempting to castjar:file:/C:/Program%20Files/NetBeans%207.3/enterprise/modules/ext/rest/jersey-core-1.13.jar!/javax/ws/rs/ext/RuntimeDelegate.classtojar:file:/C:/Documents%20and%20Settings/hwng/My%20Documents/NetBeansProjects/pics-client/branding/target/netbeans_clusters/pics_client/modules/ext/org.jboss.resteasy/jaxrs-api-2.3.5.Final.jar!/javax/ws/rs/ext/RuntimeDelegate.class
at javax.ws.rs.ext.RuntimeDelegate.findDelegate(RuntimeDelegate.java:126)
at javax.ws.rs.ext.RuntimeDelegate.getInstance(RuntimeDelegate.java:96) 
```

代码：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    RegisterBuiltin.register(ResteasyProviderFactory.getInstance());
    IRoutesService client = ProxyFactory.create(IRoutesService.class,
            "http://localhost:8080/rest/routeservice/");
    client.postRoute(txtRouteName.getText());
} 
```

现在，我的 NetBeans 平台模块（maven）依赖于以下内容：

```
<dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxrs</artifactId>
        <version>2.3.5.Final</version>
    </dependency>
    <dependency>
        <groupId>com.mycompany</groupId>
        <artifactId>myapp-api</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency> 
```

myapp-api 是一个 jar，它也位于服务器上，用于与服务交互。myapp-api 的 POM 具有以下依赖项：

```
<dependencies>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxrs</artifactId>
        <version>${resteasy.version}</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jackson-provider</artifactId>
        <version>${resteasy.version}</version>
    </dependency>
</dependencies> 
```

总而言之，当我似乎没有任何参考时，我不确定为什么 NetBeans 甚至远程尝试查看 jersey-core。任何帮助或建议表示赞赏。

我右键单击我的 RouteTopComponent 并查看运行时类路径，可以清楚地看到 jersey-core 在那里。我该如何摆脱它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:03:54.963

就我而言，这是一个新手的愚蠢错误。我假设在 NetBeans 中按 F6（运行）将自动启动我的 NetBeans 平台应用程序（mavenized）；然而，它并没有推出它应该推出的产品。它在 NetBeans 平台的新实例中启动了我的 TopComponent（因此加载了所有 Jersey 类）。

我所要做的就是实际右键单击 my-application-app 并选择运行它以实际正确启动我的应用程序。

也许这对任何与我做出相同假设并尝试直接运行文件的人都有用。

# javascript - 在不使用 .toFixed() 的情况下使用两位小数格式化浮点数

> ID：15884329
> 
> 赞同：0
> 
> 时间：2013-04-08T16:31:26.377
> 
> 标签：javascript, decimal, substring

我有一个浮点数，var a = 324620.8

我希望它看起来像这样 a = 324620.80

到目前为止，这是我的代码，

```
 var a_float = a;
    var a_int = parseInt(a);

    d = a_float - a_int;
    if(d <= 0){
        a = a_int+'.00';
    }else{
        if(d < 0 && d > 0.1){
            a = a_int + d + '0';
        }else{
            a = a_float;
        }   
    } 
```

这仅适用于一位十进制数字。我希望它在我有 2 个十进制数字时工作。

`.toFixed`在某些浏览器中不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T16:47:24.810

回答标题中的问题

> 如何在浮点数中找到多少个十进制数字？

将位置的位置与`'.'`浮点的长度作为*字符串*进行比较。

```
var x = 1.2345,
    x_str = x.toString(),
    decimal_digits = x_str.length - x_str.lastIndexOf('.') - 1;
decimal_digits === x_str.length && (decimal_digits = 0); // case no decimal
decimal_digits; // 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:33:53.767

[JSFIDDLE](http://jsfiddle.net/Bcep6/) 使用`toFixed("2");`

```
var f = 1.3454545;
f.toFixed(2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:33:55.280

```
var decimal = 4.0;
var a = (decimal).toFixed(2); 

console.log(a); // outputs 4.00 
```

# iphone - iOS - 关闭 WiFi 的地理围栏

> ID：15884330
> 
> 赞同：6
> 
> 时间：2013-04-08T16:31:26.510
> 
> 标签：iphone, ios, geolocation, wifi, geofencing

我有在我的 iPhone 上创建地理围栏的代码，当调用 didExitRegion 时将触发一些代码执行。但是，我发现当我关闭 WiFi 时，didExitRegion 永远不会被触发。在 iOS 上监控区域变化是否需要 WiFi？我想要的精度设置为 kCLLocationAccuracyHundredMeters。我正在 iOS 6.1 和 iPhone 4 上进行测试。

这是我设置位置监控的代码：

```
- (id)init {
self = [super init];
if (self) {
    CLLocationManager *manager = [[CLLocationManager alloc] init];
    manager.delegate = self;
    manager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
    manager.distanceFilter = RADIUS/10.0;
    manager.headingFilter = kCLHeadingFilterNone;
    self.locationManager = manager;
    self.authorizationStatus = [CLLocationManager authorizationStatus];
}
return self;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T20:45:04.030

iOS 设备使用三种方法来发现用户位置。从（通常）最准确到最不准确，它们是：

1.  GPS硬件
2.  通过识别附近的 wifi 网络
3.  蜂窝塔三角测量

如果您的应用不使用 GPS 或未运行（即之前已终止），设备将尝试使用上述方法 2 和 3 来定位用户。因此，设备定位用户的能力（当 GPS 硬件未使用或 GPS 信号较弱时）取决于 wifi 网络和手机信号塔的可用性。wifi 网络和手机信号塔越多，定位精度就越高。因此，当用户进入或离开受监控区域（即越过“地理围栏”）时，无法准确预测用户何时会收到通知。（当然，如果所讨论的区域始终相同，则设备在每次定位时或多或少都会以相同的准确度定位用户）。

[以下是位置感知编程指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW18)中的相关文档：

> 具体的阈值距离由硬件和当前可用的定位技术决定。例如，如果禁用 Wi-Fi，则区域监控的准确性会大大降低。但是，出于测试目的，您可以假设最小距离约为 200 米。

因此，区域监控不需要 wifi，但启用它后，您的设备将有更好的机会确定用户是否越过区域的地理围栏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T16:38:21.703

如果您关闭 WiFi，您的定位精度会降低。如果您没有 GPS 信号（在某些建筑物内），您将不会获得任何位置更新。当你在外面时，或者你使用位置模拟器进行测试时，你有没有试过这个？

此外，如果您有 GPS（带 sims 的 iPhone 或 iPad），则地理围栏功能不需要 WiFI。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T17:30:35.847

如果没有使用核心位置的 wifi，可能会发生奇怪的奇怪事情。为了帮助您解决问题，我将摆​​脱距离过滤器，这可能会弄乱事情并且不是很有帮助。我可能只会将 kCLLocationAccuracyBest 用于需要设置地理围栏所需的准确性的任何事情。对我来说，使用其他精度和过滤器有时会使 gps 仪表偏离 1000 米，并需要一两分钟才能自行纠正。如果电池过多，则设置一个系统，根据它与栅栏的距离来关闭和打开它。

# batch-file - 逆序显示参数

> ID：15884342
> 
> 赞同：0
> 
> 时间：2013-04-08T16:32:31.980
> 
> 标签：batch-file, cmd

我需要创建一个批处理文件，它将在屏幕上显示多达 9 个参数，但以**相反的顺序**显示它们。批处理文件名为reverse11.bat

```
eg: C:\>REVERSE11.bat a b c d e <enter>
e d c b a REVERSE 
```

我试着这样做，它有点乱，没有用。:(

```
SORT/R < %O > ANSWER
ECHO ANSWER 
```

它出什么问题了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:40:59.330

`SORT`排序*行*，而不是单词，因此您需要将每个参数放在自己的行上。

```
setlocal enabledelayedexpansion
echo %1> unsorted.txt
echo %2>> unsorted.txt
echo %3>> unsorted.txt
:: etc...

sort /r unsorted.txt > sorted.txt 
```

此时你可以显示 sorted.txt 如果你对它们都在不同的行没问题：

```
type sorted.txt 
```

但是，如果您想将它们全部放回一行，则必须像这样处理文件：

```
for /f %%a in (sorted.txt) do (
    set out=!out! %%a
)
echo %out% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:46:34.640

您必须注意该`sort`命令适用于 LINES，而不是 WORDS！下面的批处理文件首先将参数分成单独的行并将它们存储在一个临时文件中；第二部分调用`sort /R`文件并将其输出行收集在一个字符串中：

```
@echo off
setlocal EnableDelayedExpansion
(for %%a in (%*) do echo %%a) > temp.txt 
set output=
for /F "delims=" %%a in ('sort /R ^< temp.txt') do set output=!output! %%a
echo %output:~1%
del temp.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:48:45.973

```
@ECHO OFF
SETLOCAL
SET reversed=%0
:loop
SET newparam=%1
IF NOT defined newparam ECHO %reversed%&GOTO :eof
SET reversed=%1 %reversed%
shift
GOTO loop 
```

我们首先将变量设置`reversed`为程序名称的值。

设置`newparam`为 FIRST 参数的值 (%1) 如果该参数存在，将其添加到累积字符串的 FRONT，然后`SHIFT`将参数移动到低一个位置（%2 变为 %1，%3 变为 %2，等等.) 并循环返回直到...

该`%1`参数不存在（因为它们都已被`SHIFT`淘汰）所以回显累积的字符串`reversed`并完成例程。

# sql - 如何针对 M:N 关系优化数据库模型

> ID：15884354
> 
> 赞同：2
> 
> 时间：2013-04-08T16:33:29.907
> 
> 标签：sql, database-design, relational-database

**编辑 2013 年 4 月 10 日**

为了使自己清楚，我添加了另一个（简化的）示例，显示了我要实现的原理：

```
T1 - PERSONHAS                T2 - PRODUCTNEED
ANTON    has    WHEEL         CAR      need    ENGINE
ANTON    has    ENGINE        CAR      need    WHEEL
ANTON    has    NEEDLE        SHIRT    need    NEEDLE
BERTA    has    NEEDLE        SHIRT    need    THREAD
BERTA    has    THREAD        JAM      need    FRUIT
BERTA    has    ENGINE        JAM      need    SUGAR

Q3 - PERSONCANMAKE
ANTON    canmake    CAR
BERTA    canmake    SHIRT

Q4 - PERSONCANNOTMAKE
ANTON    cannotmake    SHIRT
ANTON    cannotmake    FRUIT
BERTA    cannotmake    CAR
BERTA    cannotmake    FRUIT 
```

我有 T1 和 T2，想为 Q3 和 Q4 创建查询

**结束编辑 2013 年 4 月 10 日**

**前言：**

为了创建产品 (P)，我需要具备某些通用能力（C - 例如工厂、供应、电力、水等）。产品经理定义了创建他/她的产品所需的所有通用能力。

在一个位置 (L) 我有某些通用能力 (C) 一个位置管理者定义他/她的位置能够提供的能力。这可能是一个明确的“是”，一个明确的“否”，或者位置管理器根本没有列出某个能力。

**数据库型号：**

我创建了以下根实体

```
Location (PK: L) - values L1, L2, L3     // in real ca. 250 rows of L
Product (PK: P) - values P1, P2          // in real ca. 150 rows of P
Capability (PK: C) - values C1, C2, C3   // in real ca.  80 rows of C 
```

和以下子（依赖）实体

```
ProductCapabilityAssignment:P, C (PK: P, C, FK: P, C)
    P1 C1
    P1 C2
    P2 C1
    P2 C3

LocationCapabilityAssignment: L, C, Status (Y/N) (PK: L, C, FK: L, C)
    L1 C1 Y
    L2 C1 Y
    L2 C2 Y
    L2 C3 N
    L3 C1 Y
    L3 C2 Y
    L3 C3 Y 
```

**任务：**

任务是找出某个产品是否可以在某个地点生产，因此为该产品定义的所有功能都必须存在于该地点。为了回答这个问题，我情不自禁地

创建位置和 ProductCapabilityAssignment (CL_Cart) 的笛卡尔积，以确保对于每个位置，我列出所有可能的产品及其 cpability 需求

```
CREATE VIEW CL_Cart AS
SELECT L.L, PCA.P, PCA.C
FROM Location AS L, ProductCapabilityAssignment AS PCA; 
```

在 CL_Cart 和 LocationCapabilityAssignment 之间创建外连接以匹配位置可以提供的所有功能

```
CREATE VIEW Can_Produce AS
SELECT X.L, X.P, X.C, LCA.Status
FROM CL_CArt AS X LEFT JOIN LocationCapabilityAssignment AS LCA ON (X.C = LCA.C) AND (X.L = LCA.L); 
```

所以最后我得到

```
SELECT L, P, C, Status
FROM Can_Produce;
    L1 P1 C1 Y
    L1 P1 C2 NULL        // C2 not listed for L1
    L1 P2 C1 Y
    L1 P2 C3 NULL        // C3 not listed for L1
    L2 P1 C1 Y
    L2 P1 C2 Y
    L2 P2 C1 Y
    L2 P2 C3 N           // C3 listed as "No" for L2
    L3 P1 C1 Y
    L3 P1 C2 Y
    L3 P2 C1 Y
    L3 P2 C3 Y 
```

这意味着 L1 既不能生产 P1 也不能生产 P2，L2 不能生产 P1，L3 可以同时生产 P1、P2。

所以我可以查询`Can_Produce`一个特定的产品/位置，看看我有什么，我没有什么能力。我还可以通过检查来提供一个快捷的总体是/否答案`Status="N" OR Status is NULL`——如果是这样，则无法生产产品。

**问题：**

对于 MSSQL、MySQL、Oracle 等关系数据库（尚未决定且超出我的影响），我想知道我是否为这种 M:N 关系选择了正确的数据模型，或者我是否可以做得更好。特别是我担心ca。250 个位置、150 种产品和一种产品平均由 +/- 10 项功能定义，也就是说，375.000 行的笛卡尔乘积，由于巨大的内存消耗，性能将崩溃。

我也很想避免存储过程。

任何想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-26T13:29:33.490

```
 --Environment Variables    
Declare @Parent table (id int identity(1,1) primary key, Name varchar(20))  
Declare @Components table (id int identity(1,1) primary key, Name varchar(20))  Insert into @Components (Name) values ('Engine'),('Wheel'),('Chassis'),('NEEDLE'),('THREAD'),('FRUIT'),('SUGAR')
Declare @Objects table (id int identity(1,1) primary key, Name varchar(20)) 
Declare @Template table (id int identity(1,1) primary key, Name varchar(20), ObjectID int, ComponentID int) 
Insert into @Template (Name, ObjectID, ComponentID) 
Select 'Vehicle', O.ID, C.ID from @Objects O, @Components C where O.Name = 'Car' and C.Name in ('Engine','Wheel','Chassis')union    
Select 'Clothing', O.ID, C.ID from @Objects O, @Components C where O.Name = 'Shirt' and C.Name in ('Needle','Thread') union 
Select 'Confectionary', O.ID, C.ID from @Objects O, @Components C where O.Name = 'JAM' and C.Name in ('FRUIT','SUGAR')  
Declare @AvailableMaterials table (id int identity(1,1) primary key, TestType varchar(20), ParentID int, ComponentID int)   

--Test Data 
Insert into @AvailableMaterials (TestType,ParentID,ComponentID) 
Select 'CompleteSet', P.ID, T.ComponentID from @Parent P, @Template T where P.Name = 'Driver' and T.Objectid = (Select ID from @Objects where Name = 'Car') union   
Select 'CompleteSet', P.ID,  T.ComponentID from @Parent P, @Template T where P.Name = 'Seamstress' and T.Objectid = (Select ID from @Objects where Name = 'Shirt') union    
Select 'IncompleteSet', P.ID,  T.ComponentID from @Parent P, @Template T where P.Name = 'Confectionarist' and T.Objectid = (Select ID from @Objects where Name = 'Jam')     
and T.ComponentID not in (Select ID from @Components where Name = 'FRUIT')  

--/*What sets are incomplete?*/ 
Select *    
from @AvailableMaterials    
where ID in (   
Select  SRCData.ID  
from @AvailableMaterials SRCData cross apply (Select ObjectID from @Template T where ComponentID = SRCData.ComponentID) ObjectsMatchingComponents   
inner join @Template T  
on SRCData.ComponentID = T.ComponentID  
and T.ObjectID = ObjectsMatchingComponents.ObjectID 
cross apply (Select ObjectID, ComponentID from @Template FullTemplate where FullTemplate.ObjectID = T.ObjectID and FullTemplate.ComponentID not in (Select ComponentID from @AvailableMaterials SRC where SRC.ComponentID = FullTemplate.ComponentID)) FullTemplate 
)   

/*What sets are complete?*/ 
Select *    
from @AvailableMaterials    
where ID not in (   
Select  SRCData.ID  
from @AvailableMaterials SRCData cross apply (Select ObjectID from @Template T where ComponentID = SRCData.ComponentID) ObjectsMatchingComponents   
inner join @Template T  
on SRCData.ComponentID = T.ComponentID  
and T.ObjectID = ObjectsMatchingComponents.ObjectID 
cross apply (Select ObjectID, ComponentID from @Template FullTemplate where FullTemplate.ObjectID = T.ObjectID and FullTemplate.ComponentID not in (Select ComponentID from @AvailableMaterials SRC where SRC.ComponentID = FullTemplate.ComponentID)) FullTemplate 
) 
```

你好

这是我能想到的最好的……它的前提是你必须知道完整的集合是什么，知道缺少什么。一旦你有了缺失的东西，你就可以从不完整的集合中分辨出完整的集合。

我怀疑这个解决方案能否很好地扩展，即使移动到带有索引的#tables。虽然可能...

我也有兴趣看到更清洁的方法。上述解决方案是在 SQL 2012 版本中开发的。注意 cross apply 这在一定程度上限制了笛卡尔效应。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T13:56:41.953

我不确定您使用的是什么数据库，但这是一个可以在 sql server 中运行的示例 - 不需要进行很多更改即可在其他数据库中运行......

```
WITH ProductLocation
AS
(
    SELECT  P.P,
            P.Name as ProductName,
            L.L,
            L.Name as LocationName
    FROM    Product P
    CROSS
    JOIN    Location L
),
ProductLocationCapability
AS
(
    SELECT  PL.P, 
            PL.ProductName, 
            PL.L, 
            PL.LocationName,
            SUM(PC.C) AS RequiredCapabilities,
            SUM(CASE WHEN LC.L IS NULL THEN 0 ELSE 1 END) AS FoundCapabilities
    FROM    ProductLocation PL
    JOIN    ProductCapabilityAssignment PC
            ON  PC.P = PL.P
    LEFT
    JOIN    LocationCapabilityAssignment LC
            ON  LC.L = PL.L
            AND LC.C = PC.C
    GROUP BY PL.P, PL.ProductName, PL.L, PL.LocationName
)
SELECT  PLC.P, 
        PLC.ProductName,
        PLC.L,
        PLC.LocationName,
        CASE WHEN PLC.RequiredCapabilities = PLC.FoundCapabilities THEN 'Y' ELSE 'N' END AS CanMake
FROM    ProductLocationCapability PLC 
```

（不确定字段名称是否正确，我无法完全理解架构描述！）

# python - 为什么我的递归不起作用？警告：欧拉计划剧透

> ID：15884356
> 
> 赞同：0
> 
> 时间：2013-04-08T16:33:36.303
> 
> 标签：python, algorithm, recursion

我不太确定为什么我的递归算法不起作用。我收到以下错误，但我想在我看来我有一个终止点。我知道我忘记了一些简单的事情。

RuntimeError：超出最大递归深度

```
def triplet(n):
    a = (2*n) +1
    b = (2*n)*(n+1)
    c = (2*n)*(n+1) +1

    if a+b+c == 1000:
        return a*b*c
    elif a+b+c > 1000:
        return 'no triplet found'
    else:
        return triplet(n+1)

print triplet(1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:39:50.617

您正在使用欧几里德方法的变体来生成三元组。但是，它不会生成所有可能的三元组，因此它显然不会生成解决您的问题所需的三元组。

事实上，没有通用的公式可以生成所有毕达哥拉斯三元组。您需要分析地找到解决方案或蛮力解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T16:39:58.173

检查大于或等于

```
def triplet(n):
    a = (2 * n) + 1
    b = (2 * n) * (n + 1)
    c = (2 * n) * (n + 1) + 1

    if a + b + c >= 1000:
        return a * b * c
    else:
        return triplet(n + 1)

print triplet(1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:48:54.163

你确定递归/欧几里得的方法是做这个的最好方法吗？我记得通过保持总和等于 1000，然后改变两个自变量并检查它们何时相等来做到这一点。（我还使用了某种三角不等式来减少要检查的解决方案的数量，但这不是必需的，因为您最多会检查 100 万种可能性）。

# python - 如何使用 wtforms RadioField 输入添加带有开放式文本输入选项的选项？

> ID：15884357
> 
> 赞同：1
> 
> 时间：2013-04-08T16:33:36.687
> 
> 标签：python, wtforms, flask-wtforms

如何使用 wtforms / flask_wtf 呈现 HTML 表单：

*   带有为响应者提供固定选择的选择字段，加上
*   允许他们输入文本的“其他”选项。

我正在使用 RadioField 来获取特定的选择，但我看不到如何将开放式文本框添加到选择选项中。

有没有办法在不破解代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:48:56.180

它基本上是 s SelectField 加上一个 TextField。你只需要在服务器端处理它。如果需要，您可以使用一些 javascript 来使用单选按钮显示/隐藏这个额外的文本字段。

有关此处可用的不同小部件的信息：[http ://wtforms.simplecodes.com/docs/0.6.1/widgets.html](http://wtforms.simplecodes.com/docs/0.6.1/widgets.html)

# php - PHP 致命错误：不能将字符串偏移量用作数组

> ID：15884358
> 
> 赞同：0
> 
> 时间：2013-04-08T16:33:39.080
> 
> 标签：php, arrays

面对数组的奇怪情况..我正在使用 LinkedIn API 来获取个人资料信息，该信息以两种格式返回数据..

如果用户只有一项教育项目

```
educations=>education=>school-name
educations=>education=>date
... 
```

如果超过一项教育项目

```
educations=>education=>0=>school-name
educations=>education=>0=>date
...
educations=>education=>1=>school-name
educations=>education=>1=>date
... 
```

现在我正试图使其保持一致并转换

```
educations=>education=>school-name 
```

至

```
educations=>education=>0=>school-name 
```

但是在我认为应该可以工作的代码中出现错误

```
if(empty($educations['education'][0]['school-name']))
{
    $temp = array();
    $temp['education'][0]=$educations['education'];
    $educations = $temp;
} 
```

这对于“只有一个教育项目”失败，在第一行为 (isset,is_array 和 empty) 生成错误

```
PHP Fatal error:  Cannot use string offset as an array in ... 
```

print_r 返回

```
[educations] => Array
    (
        [education] => Array
            (
                     [id] => 109142639
                     [school-name] => St. Fidelis College
                     [end-date] => Array
                         (
                             [year] => 2009
                         )

            )

    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:35:31.410

通常你会这样写作业：

```
$temp = array(
    "education" => array($educations['education'])
); 
```

避免索引出现任何问题。这也可能解决您的问题。

如果您不确定您的内容`$educations['education'][0]['school-name']`可以简单地检查每个部分：

```
if(isset($educations['education'], $educations['education'][0], $educations['education'][0]['school-name'])) 
```

这是有效的，因为`isset` **它**的行为不像正常功能。它以一种惰性的方式接受多个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:36:07.573

你要：

```
if(array_key_exists('school-name',$educations['education']))
{
    $educations['education'] = array($educations['education']);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-17T16:54:51.287

今天我在我的应用程序中遇到了同样的问题。致命错误：无法在第 2447 行的 /home/servers/bf4c/bf4c.php 中使用字符串偏移作为数组

第 2447 行

```
if (!isset($time_played[$player]["started"])) {
                    $time_played[$player]["started"] = $time;
                } 
```

$time_played 在别处被覆盖并定义为字符串。因此，请确保您确实使用了唯一的变量名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-03T20:10:04.623

如果您正在循环运行，这里有一个提示，它会中断：

```
if( $myArray != "" ){
  // Do your code here 

  echo $myArray['some_id'];
}
```

# javascript - 为什么这个实例被 javascript 函数知道

> ID：15884360
> 
> 赞同：1
> 
> 时间：2013-04-08T16:33:41.350
> 
> 标签：javascript

addChangedValue 函数中的 sampleViewModel 实例怎么可能不是 undefined 或 null ？

就我的理解而言，从实例化的范围来看，addChangedValue 函数中不应知道 sampleViewModel。

```
$(function(){

    var PersonViewModel = function() {
        var me = this;
        me.firstName = ko.observable('Lisa'),
        me.lastName = ko.observable('T'),
        me.changes = ko.observableArray()
    };

    var sampleViewModel = new PersonViewModel();

    sampleViewModel.firstName.subscribe(function(newValue) {
        addChangedValue("firstname refreshed: " + newValue);
    });

    function addChangedValue(updatedValue) {
        sampleViewModel.changes.push({ value: updatedValue });
    };

    ko.applyBindings(sampleViewModel, document.getElementById('data'));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:36:42.497

它肯定会。闭包在词法上绑定到定义它们的作用域，因此在作用域中定义的任何内容（也定义了闭包）都将被该闭包所知。

此外，*除非*您通过在该函数中定义类似名称的变量来隐藏它，否则`addChangedValue`将可以访问其封闭范围内的任何变量。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:36:11.523

作为参数的匿名函数`addChangedValue`形成一个闭包。`sampleViewModel`函数内的变量与封闭范围内的变量相同。闭包是函数（通常是匿名的，如您的情况）与上下文的组合。声明函数时范围内的所有变量都在该函数中可用。[您可以在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)阅读有关闭包的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:29:56.067

是的，你已经创建了一个闭包。举例：

```
function init() {
    var person = { name: 'Joe' };

    var callMeLater = function() {
        alert(person.name);
    };

    return callMeLater;
};

var fn = init();
fn(); // alerts 'Joe' 
```

在这个例子中，`init()`函数有它自己的作用域——这对你来说似乎并不新鲜。因此，例如 person 被声明在其中，因此是`init()`. `callMeLater`在这个函数内部定义，创建一个闭包。封闭函数 ( `init`) 的所有局部变量也可用于`callMeLater`. 这就是为什么此示例中的最后一行会提醒 Joe，并且您的示例`sampleViewModel`可用。

就好像在 Java 中你这样做了：

```
public class Person {
    public string name;

    public Person(string name) {
        this.name = name;
    }

    public MyClosure getClosure() {
        string someOtherThing = "other";
        return new MyClosure(this, someOtherThing);
    }
}

public class MyClosure {
    public Person person;
    public string someOtherThing;

    public MyClosure(Person person, string someOtherThing) {
        this.person = person;
        this.someOtherThing = someOtherThing;
    }

    public void callMeLater() {
        log(person.name);
    }
}

var person = new Person("Joe");
var closure = person.getClosure();
closure.callMeLater(); // Logs "Joe" 
```

您可以将 MyClosure 类视为通过在函数内部定义函数而为您创建的隐式包装器。*

# firefox - 在 Mozilla Firefox 中，如何提取当前打开的选项卡数量以保存在其他地方？

> ID：15884363
> 
> 赞同：24
> 
> 时间：2013-04-08T16:33:42.473
> 
> 标签：firefox, sqlite

我想自动计算在 Firefox 中打开的选项卡的数量，以便随着时间的推移进行跟踪。

因此，我可以获得一个在状态栏或浏览器其他位置显示当前数字的附加组件是不够的。

我查看了 firefox 为每个配置文件保存的 .sqlite 表的内容，但我无法破译是否存在当前打开的选项卡表。我还查看了历史表中是否有一个列来说明页面当前是否打开。

这些信息在数据库中是否可用？

如果是这样，在哪里存储了可用于计算当前打开的选项卡数量的信息？

如果没有，诸如 Tab Counter 之类的附加组件如何找出这个数字？最后一个问题我会问开发人员，如果它不是足够普遍的知识，我可以在这里得到答案，而不是问那些可能希望你使用他或她的附加组件的人。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2017-07-26T21:09:25.887

`about:telemetry`在 Firefox 中打开链接，然后单击`scalars`侧边栏菜单中的选项卡。或者，打开`about:telemetry#scalars-tab`会将您直接带到`scalars`选项卡。

该`browser.engagement.max_concurrent_tab_count`键将显示会话中活动的选项卡数量，但在关闭选项卡时不会更新。相反，如果要更新此值，则需要重新启动浏览器。

该`browser.engagement.tab_open_event_count`键显示在给定时间当前打开的选项卡数量并动态更新。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-27T06:41:04.523

# 在线的

在运行的 Firefox 会话中，使用 Mozilla Add-on API 很容易提取数据。我编写了一个简单的[Tab Count Logger](https://github.com/mechanical-snail/tab-count-logger)扩展来执行此操作，并将计数保存到 SQLite 数据库。

代码的相关部分是：

```
const tabs = require("sdk/tabs");
const windows = require("sdk/windows").browserWindows;

console.log("Windows: " + windows.length + "; tabs: " + tabs.length); 
```

# 离线

打开的选项卡存储在`sessionstore.js`配置文件目录中，而不是 SQLite 中。这个文件是 JSON。一个统计标签的脚本：

```
#!/usr/bin/env python3
# Count open tabs from a firefox profile
# Working directory is the root of a Firefox profile.
import json
j = json.loads(open("sessionstore.js", 'rb').read().decode('utf-8'))
def info_for_tab(tab):
    try:
        return (tab['entries'][0]['url'], tab['entries'][0]['title'])
    except IndexError:
        return None
    except KeyError:
        return None
def tabs_from_windows(window):
    return list(map(info_for_tab, window['tabs']))
all_tabs = list(map(tabs_from_windows, j['windows']))
print('Statistics: {wins} windows, {tabs} total tabs'.format(wins=len(all_tabs), tabs=sum(map(len, all_tabs)))) 
```

将其保存到 后`~/bin/firefox_count_tabs`，您可以获得所有配置文件的信息，如下所示：

```
for i in ~/.mozilla/firefox/*.*; do test -d $i && (echo "== $i =="; cd $i; ~/bin/firefox_count_tabs ); done 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-04T02:09:25.790

计数将显示在退出确认对话框中 - 如果您没有禁用它️</p>

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T20:29:11.610

@Xidus：历史记录和书签存储在places.sqlite 中。您无法确定此处的选项卡和窗口信息。选项卡和窗口信息存储在 sessionstore.js 文件中。您可以参考以下链接：

[http://kb.mozillazine.org/sessionstore.js](http://kb.mozillazine.org/sessionstore.js) [http://forums.mozillazine.org/viewtopic.php?f=38&t=622036&start=60&p=12098147#p12098147](http://forums.mozillazine.org/viewtopic.php?f=38&t=622036&start=60&p=12098147#p12098147)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-23T10:36:03.397

您可以计算[浏览器控制台](https://developer.mozilla.org/en-US/docs/Tools/Browser_Console)（不是 Web 控制台）中的选项卡

```
gBrowser.tabs.length 
```

默认情况下禁用浏览器控制台。要启用它，您应该在 Web 开发人员工具设置中勾选“启用浏览器 chrome 和附加调试工具箱”选项。之后在*更多工具*菜单中查找*浏览器控制台。*

 *[![在此处输入图像描述](https://i.stack.imgur.com/dFjbQ.png)](https://i.stack.imgur.com/dFjbQ.png)*

# android - 如何将超过 5 个编辑文本的值从一个活动保存并转移到另一个活动？

> ID：15884364
> 
> 赞同：2
> 
> 时间：2013-04-08T16:33:44.457
> 
> 标签：android, android-edittext, transfer

我想在活动之间传输我在 EditText 字段中编辑的数据。如果我从活动 1 转移到活动 2，我希望能够在活动 2 中编辑从活动 1 收到的数据，将新数据保存在活动 2 中并转移到活动 3。我如何保存和转移同一时间的数据。现在有了共享偏好，我可以转移，但我无法保存我刚刚在当前活动中编辑的数据。请帮忙！谢谢！

这是用于在活动 1 (WEEK1) 中保存权重的代码：

```
SharedPreferences WeightPreferences = getSharedPreferences("WEEK1", MODE_PRIVATE);
String r1 = w1.getText().toString();
String r2 = w2.getText().toString();
String r3 = w3.getText().toString();
String r4 = w4.getText().toString();
String r5 = w5.getText().toString();
SharedPreferences.Editor editor = WeightPreferences.edit();
editor.putString("wr1", r1);
editor.putString("wr2", r2);
editor.putString("wr3", r3);
editor.putString("wr4", r4);
editor.putString("wr5", r5);
editor.commit(); 
```

这是用于在活动 2 (WEEK2) 中显示活动 1 的权重的代码，依此类推：

```
SharedPreferences WeightPreferences = getSharedPreferences("WEEK1", MODE_PRIVATE);
String string1 = weightPreferences.getString("wr1", null);
String string2 = weightPreferences.getString("wr2", null);
String string3 = weightPreferences.getString("wr3", null);
String string4 = weightPreferences.getString("wr4", null);
String string5 = weightPreferences.getString("wr5", null);
w1.setText(string1);
w2.setText(string2);
w3.setText(string3);
w4.setText(string4);
w5.setText(string5); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:45:27.120

您可以使用所有数据创建一个数组列表，并将对象传输到调用事件

```
intent.putExtra("Name", Object_with_all_your_content); 
```

我明白你的问题了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:51:14.877

将值放入数组并像这样发送：

发送 ：

```
Intent intent =new Intent(ccurrentClass.this, anotherClass.class);
Bundle b = new Bundle();
b.putSerializable("value", arrayOfString);
intent.putExtras(b);
startActivity(intent); 
```

检索：

```
Intent intent = getIntent();
Bundle b = intent.getExtras();
String[][] data = (String[][]) b.getSerializable("value"); 
```

# python - 在 Chrome 中监控下载过程

> ID：15884368
> 
> 赞同：5
> 
> 时间：2013-04-08T16:33:51.207
> 
> 标签：python, google-chrome

我正在尝试编写一个 Python 脚本来监控 Chrome 中正在进行的下载，并在下载过程关闭后自动关闭我的电脑。我对 JavaScript 知之甚少，如果需要，我正在考虑使用 PyJs 库。

1）这是最好的方法吗？我不需要该应用程序是可移植的，只需工作即可。

2）您将如何识别下载过程？

3) 您将如何监控下载进度？显然 Chrome API 没有为它提供特定的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:19:52.280

好问题，可能是因为我可以与自动关机的需要联系起来。;)

我刚用谷歌搜索。[碰巧有一个实验性的 API](http://developer.chrome.com/dev/extensions/downloads.html)，但目前仅适用于开发通道。我不在开发频道上进行尝试，所以我只是希望我能指出你正确的方向。

一种方法是：

*   让 Python HTTP 服务器监听某个端口 XYZ
*   在您的扩展程序中添加对 URL 的权限`http://localhost:XYZ/`
*   在您的扩展程序中，您可以使用：

    ```
    chrome.downloads.search(query, function (arrayOfDownloadItem){ .. }) 
    ```

    *   其中， query 是[DownloadQuery](http://developer.chrome.com/dev/extensions/downloads.html#type-DownloadQuery)的一个实例，并且包含[state](http://developer.chrome.com/dev/extensions/downloads.html#type-State)属性为`in_progress`
    *   您可能可以检查`arrayOfDownloadItem`.
        *   如果它为零，`XMLHttpRequest`请为您的 HTTP 服务器端点创建一个新端点，然后让服务器关闭您的计算机。

高温高压

# ruby - ruby 2.0如何通过坐标访问矩阵中的元素？

> ID：15884376
> 
> 赞同：4
> 
> 时间：2013-04-08T16:33:57.750
> 
> 标签：ruby, matrix

我是红宝石的新手，但这是问题所在。假设我有一个矩阵，我需要在 1,2 处修改一个元素

```
mm = Matrix.build(2,4) {0}
mm[1][2] = 404 
```

但这会出现错误消息

```
ArgumentError: wrong number of arguments (1 for 2)
from /Users/xxxxxx/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/matrix.rb:314:in `[]'
from (irb):11
from /Users/xxxxxx/.rvm/rubies/ruby-2.0.0-p0/bin/irb:16:in `<main>' 
```

我检查了 ruby​​ doc，但没有找到任何答案，抱歉问了这么愚蠢的问题......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T16:45:55.493

获取元素：

```
mm[1,2] #output 0 
```

设置元素：

没有任何方法可以做到这一点。Matrix 是不可变的对象，不能更改（恕我直言，不是那么理想）。您可以将矩阵复制`each`到数组，更改元素并转换回来，或者使用猴子补丁

```
class Matrix
  def []=(i, j, x)
    @rows[i][j] = x
  end
end
mm[1,2] = 404 
```

或者，如果您不想修改补丁或想要有点 hacky（虽然看起来不太好）：

```
mm.send(:[]=, 1, 2, 404) 
```

# java - 如何读/写文件中具有链表的对象

> ID：15884377
> 
> 赞同：0
> 
> 时间：2013-04-08T16:33:59.070
> 
> 标签：java, oop, class, object, linked-list

我有这些类：“MyClass1”、“MyClass2”、“MyClass3”和“MyMainClass”，

```
public class MyMainClass implements Serializable {
     private String att1, att2, att3;
     private int att4, att5, att6;
     private LinkedList <MyClass1> myClass1List = new LinkedList<MyClass1>();
     private LinkedList <MyClass2> myClass2List = new LinkedList<MyClass2>();
     private LinkedList <MyClass3> myClass3List = new LinkedList<MyClass3>();
} 
```

我的程序创建“MyMainClass”的寄存器（对象）并将其存放在 LinkedList 中。我想在重新打开程序后将对象的 LinkedList 保存在文件中以获取它们。有什么办法呢？我尝试过使用 ObjectOutputStream，但不起作用。谢谢。

编辑：我添加对象的代码（我刚刚阅读了一个示例并尝试了）：

```
public static void addObject (MyMainClass p) {
    try {
        outputStream = new ObjectOutputStream(new FileOutputStream("myfile.dat"));
        outputStream.writeObject(p);
    } catch (FileNotFoundException ex) {
        ex.printStackTrace();
        System.exit(1);
    } catch (IOException ex) {
        ex.printStackTrace();
        System.exit(1);
    } finally {
        try {
            if (outputStream != null) {
                outputStream.flush();
                outputStream.close();
            }
        } catch (IOException ex) {
            ex.printStackTrace();
            System.exit(1);
        }
    }
} 
```

注意：“MyClass1”、“MyClass2”、“MyClass3”是可序列化的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:38:32.673

I used following for my highschool project long time ago. Due to my poor English skills I do not really understand what class you wish to save and load (LinkedList or myMainClass), but I used this solution to successfully store and load any of my custom objects. I hope you find it handy.

Usage:

```
myMainClass object;
//
// ... your code fillin up the content of object
//
MyIO io = new MyIO();
io.save("", "myfile.dat", object); // "" as first argument will make java use current working directory

// to load the object:

myMainObject object = (myMainObject) io.load("", "myfile.dat"); 
```

Source:

```
import java.util.zip.GZIPInputStream;
import java.util.zip.GZIPOutputStream;
import java.io.FileOutputStream;
import java.io.FileInputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.IOException;

public class MyIO {

    // String path - path to the directory where the file is supposed to be saved.
    // String filename - the name of the file
    // Object data - object that you wish to save in the file. In your case "myMainClass"

    public void save(String path, String filename, Object data) {
        try {
            FileOutputStream fos = new FileOutputStream(path + filename, false);
            GZIPOutputStream gzos = new GZIPOutputStream(fos);
            ObjectOutputStream out = new ObjectOutputStream(gzos);
            out.writeObject(data);
            out.flush();
            out.close();
        } catch (IOException e) {
            System.out.println(e);
        }
    }

    // String path - path to the directory where the file is stored
    // String filename - the name of the file
    // The function returns java object which can be cast to myMainClass.

    public Object load(String path, String filename) {
        try {
            FileInputStream fis = new FileInputStream(path + filename);
            GZIPInputStream gzis = new GZIPInputStream(fis);
            ObjectInputStream in = new ObjectInputStream(gzis);
            Object data = in.readObject();
            in.close();
            return data;
        } catch (Exception e) {
            System.out.println(e);
        }
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:49:37.220

我会制作“myClass1”、“myClass2”和“myClass3” [Serializable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)，然后将`myClass1List`、`myClass2List`和`myClass3List`（以及您要保存的任何其他数据）包装在另一个可序列化的类中，这样您就可以使用序列化/反序列化来保存和恢复所有程序状态一次。

除非`myMainClass`是那个包装器，在这种情况下，您需要声明它们都实现了可序列化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T16:52:48.147

`myMainClass`没有标记[`Serializable`](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)。另外，`myClass1`,`myClass2`和也可以`myClass3`序列化吗？如果不是，他们应该是。

另一方面，请遵循 Java 命名约定；类名应以大写字母开头。

**更新**

您确定它没有写入文件，还是代码抛出了您看不到的异常？

在您的所有`catch`块中，您都有`System.exit(1)`，它绝对不会为您提供有关正在发生的任何异常的信息；你基本上是在吞食它们。您至少应该打印出堆栈跟踪 ( `ex.printStackTrace()`)，这样您就可以看到出了什么问题。

# android - Unity 和 Eclipse：动态绘制对象

> ID：15884380
> 
> 赞同：0
> 
> 时间：2013-04-08T16:34:05.750
> 
> 标签：android, eclipse, dynamic, unity3d, draw

我正在实现一个在屏幕上`Android`绘制对象的应用程序（俯视图）。这些对象是格式的，自从我上次使用以来已经有好几年了，我决定使用它然后将它集成到. 我还是初学者。`3D``camera``FBX``openGL``Unity``Eclipse``Unity`

该应用程序运行良好，但现在我面临一个问题：我希望用户能够`FBX`从我的服务器下载对象并决定在视图上绘制哪个对象。是否可以动态更改正在绘制的对象，而不必为每个对象存储整个场景？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:48:05.523

是的，可以在运行时动态创建对象。

您可以在运行时使用顶点和三角形数据构建网格、设置 uv 坐标、应用纹理以及添加组件（如 AudioSource、MeshCollider）。

除了构成对象的数据外，无需更改场景或加载任何内容。

请记住，有几种方法可以做到这一点，有些是内置的，有些不是。研究您的选项并实施适合您的选项。

如果你有 Unity Pro，你应该可以通过他们的 Asset Bundling 轻松做到这一点：[AssetBundles](http://docs.unity3d.com/Documentation/Manual/AssetBundlesIntro.html)

# sql - 如何优化以下查询？

> ID：15884383
> 
> 赞同：0
> 
> 时间：2013-04-08T16:34:13.093
> 
> 标签：sql

我有两个表：maskedindextable 和 dictionarytable。

字典表有四列：

```
ID (primary key)
filelocation
dictionaryEncryptedIndex
dictionaryEncryptedWord 
```

值如下所示：

```
ID | filelocation | dictionaryencryptedindex | dictionaryEncryptedWord
0 | c:/test.txt | 0x01 | EAD64zef6z
1 | c:/test.txt | 0x02 | 5ez4f
2 | c:/test.txt | 0x03 | ze654f
3 | c:/john.txt | 0x01 | 6ze5f4
4 | c:/john.txt | 0x02 | ze5f68z4f
5 | c:/john.txt | 0x03 | EAD64zef6z 
6 | c:/smith.txt | 0x01  | er6g4
7 | c:/smith.txt | 0x02 | z6e58g4
8 | c:/smith.txt | 0x03  | a64zef6z
9 | c:/laura.txt | 0x01  | EAD64zef6z 
```

该表有 700 000 个值

maskedindextable 有四列：

```
ID (primary key)
filelocation
maskedIndexEncryptedIndex
maskedIndexEncryptedValue 
```

值如下所示：

```
ID | filelocation | maskedIndexEncryptedIndex | maskedIndexEncryptedValue
0 | c:/test.txt | 0x01 | 5z1ef
1 | c:/test.txt | 0x02 | e6rh546er4g
2 | c:/test.txt | 0x03 | z6ef548ezf
3 | c:/john.txt | 0x01 | (y48try68
4 | c:/john.txt | 0x02 | iu47k
5 | c:/john.txt | 0x03 | 6tkj
6 | c:/smith.txt | 0x01  | 6ez5r48
7 | c:/smith.txt | 0x02 | 6i5
8 | c:/smith.txt | 0x03  | 6e5rg
9 | c:/laura.txt | 0x01  | ze654f 
```

该表也有 700 000 个值

表 dictionarytable 中的 dictionaryencryptedindex & filelocation 组合对应于表 maskedindextable 中的 maskedIndexEncryptedIndex & filelocation。我想找到对应的maskedindexencryptedvalue，其加密字为EAD64zef6z。目前我正在使用以下查询：

```
SELECT DISTINCT MaskedIndexTable.filelocation, 
       dictionaryencryptedindex,
       maskedindexencryptedvalue
FROM MaskedIndexTable 
INNER JOIN DictionaryTable 
        ON MaskedIndexTable.maskedIndexEncryptedIndex = 
           DictionaryTable.dictionaryEncryptedIndex  
WHERE MaskedIndexTable.Id IN  
(SELECT DictionaryTable.Id 
 FROM  DictionaryTable 
 WHERE  `dictionaryEncryptedWord` LIKE 'EAD64zef6z') 
 AND  `dictionaryEncryptedWord` LIKE 'EAD64zef6z'; 
```

但是这个查询运行得非常慢（需要 3 秒）。有谁知道我可以如何优化我的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:47:41.170

更简单的说法怎么样

```
SELECT dt.filelocation, dictionaryencryptedindex, maskedindexencryptedvalue
FROM MaskedIndexTable mit
INNER JOIN DictionaryTable  dt
  ON mit.maskedIndexEncryptedIndex = dt.dictionaryEncryptedIndex
  AND mit.filelocation = dt.filelocation 
WHERE dt.dictionaryEncryptedWord = 'EAD64zef6z'; 
```

`LIKE`如果您不使用通配符，则不需要 a 。您也可以在 语句的`ON`子句中添加多个条件。`JOIN`

您将需要 WHERE 和 JOIN 列上的​​索引，即`DictionaryTable.dictionaryEncryptedWord`, `DictionaryTable.filelocation`, `DictionaryTable.dictionaryEncryptedIndex`, `MaskedIndexTable.filelocation`, 和`MaskedIndexTable.maskedIndexEncryptedIndex`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:38:21.500

以我的经验，每当查询很慢时，结果证明 WHERE 子句中提到的列没有索引。

尝试索引出现在 WHERE 子句中的所有列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T16:49:05.397

乍一看，您的 WHERE 子句中的子选择似乎没有任何作用。您还使用`LIKE`而不是简单的`=`. 试试这个：

```
SELECT DISTINCT MIT.filelocation, 
   dictionaryencryptedindex,
   maskedindexencryptedvalue
FROM MaskedIndexTable MIT
    INNER JOIN DictionaryTable DT
    ON MIT.maskedIndexEncryptedIndex = 
       DT.dictionaryEncryptedIndex  
WHERE dictionaryEncryptedWord = 'EAD64zef6z'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T16:43:39.610

尝试删除 where 子句中的选择

```
SELECT DISTINCT MaskedIndexTable.filelocation, dictionaryencryptedindex
,     maskedindexencryptedvalue

FROM MaskedIndexTable INNER JOIN DictionaryTable ON MaskedIndexTable.maskedIndexEncryptedIndex = DictionaryTable.dictionaryEncryptedIndex  
WHERE `dictionaryEncryptedWord` LIKE 'EAD64zef6z'; 
```

# android - PhoneGap API 覆盖率与 Native

> ID：15884392
> 
> 赞同：1
> 
> 时间：2013-04-08T16:34:47.610
> 
> 标签：android, cordova

我正在使用 Phone Gap 开发一些应用程序，我看到我可以使用 API 访问相机/加速度计/指南针等。

我想知道 PhoneGap API 的覆盖范围是否与我使用 Native Android 来执行我的应用程序相同，或者是否缺少某些方法或参数，然后我将在访问硬件时遇到一些限制......

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:00:23.333

我认为这些链接可以帮助您：

[https://stackoverflow.com/a/14069937/1152549](https://stackoverflow.com/a/14069937/1152549)

[https://stackoverflow.com/a/8213060/1152549](https://stackoverflow.com/a/8213060/1152549)

PhoneGap 让我切换到原生的最大限制之一是缺乏短信功能。

# ios - iOS 绘图和动画……它们是如何工作的？

> ID：15884395
> 
> 赞同：0
> 
> 时间：2013-04-08T16:34:56.973
> 
> 标签：ios, xcode, uistoryboard, autolayout

我对 iPhone 开发相当陌生，只是在外面说明了这一点。

我正在为 iOS 5+ 开发

我目前正在使用情节提要

这是我的故事板目前的样子：

![我的东西现在的样子](https://i.stack.imgur.com/Vri6Z.png)

在 ViewLoad 上，我使用 [TheButtonView center] = curpos+(0,-cords); 降低按钮 **当视图显示时，**我会在几秒钟后使用基本动画将它们抬回到原来的位置。

问题是自动布局似乎限制了动画范围。当我旋转设备时，徽标不再保留其动画偏移并恢复到其原始自动布局位置。

我将如何保留偏移量我只使用 [TheButtonView center] = curpos+offset 旋转时？

抱歉，一般问题。

编辑：**还有一种方法可以设计一个在点击时滑入但不占用编辑器空间的 uielement 吗？**

# c++ - 重载策略类 模板的成员函数

> ID：15884398
> 
> 赞同：1
> 
> 时间：2013-04-08T16:35:10.787
> 
> 标签：c++, templates

我正在构建一个算法主机类，我正在使用数据存储和一堆算法作为策略类。操作的数据在策略宿主类中使用组合（Collection）封装，两种算法（First、Second）公开继承（多重继承）。

当我尝试从宿主类的成员函数访问策略类模板的成员函数时，我只能使用完全限定名称来访问，并且我希望 ADL 应该在宿主类中工作。

这是示例代码：

```
#include <iostream>

template<typename Element>
class MapCollection
{
    // Map implementation 
    public:

        // Programming to an (implicit) interface
        template<typename Key> 
        void insertElement(Element const & e, Key const& k) {}

        template<typename Key>
        void getElement(Element const& e, Key const& k) {}
};

template<typename Element>
class VectorCollection
{
    // Vector implementation
    public: 

        template<typename Key> 
        void insertElement(Element const & e, Key const& k) {}

        template<typename Key>
        void getElement(Element const& e, Key const& k) {}
};

template<typename Collection>
class FirstAlgorithm 
{
    public: 

        void firstExecute(Collection& coll)
        {
            std::cout << "FirstAlgorithm::execute" << std::endl;
        }
};

template<typename Collection>
class SecondAlgorithm
{
    public: 

        void secondExecute(Collection const & coll)
        {
            std::cout << "SecondAlgorithm::execute" << std::endl;
        }
};

template
<
    typename HostConfigurationTraits
>
class AlgorithmHost
:
    public HostConfigurationTraits::First,
    public HostConfigurationTraits::Second
{
    public:
        typedef typename HostConfigurationTraits::Collection Collection;

    private:
        Collection data_; 

    public: 

        // ADL not working?
        void firstExecute()
        {
            // This works: 
             //HostConfigurationTraits::First::firstExecute(data_);

            // This fails:
            this->firstExecute(data_);
        } 

        // ADL not working?
        void secondExecute()
        {
            // This works:
            //HostConfigurationTraits::Second::secondExecute(data_);

            // This fails:
            this->secondExecute(data_);
        }
};

class EfficientElement {};

struct DefaultAlgorithmHostTraits 
{
    typedef EfficientElement Element;
    typedef VectorCollection<Element> Collection;
    typedef FirstAlgorithm<Collection> First;
    typedef SecondAlgorithm<Collection> Second;
};

int main(int argc, const char *argv[])
{

    AlgorithmHost<DefaultAlgorithmHostTraits> host; 

    // Breaks here:
    host.secondExecute(); 
    host.firstExecute(); 

    return 0;
} 
```

这是由 ADL 引起的，还是我的怀疑放错了地方？:)

我正在使用 g++ 4.4.3。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:45:22.587

您的案例与 ADL 无关，但与您的定义`firstExecute`掩盖了基类的定义这一事实有关。如果添加这些行：

```
using HostConfigurationTraits::First::firstExecute;
using HostConfigurationTraits::Second::secondExecute; 
```

在 中`AlgorithmHost`，它将再次找到基类的成员。这是另一个关于阴影的[问题/答案。](https://stackoverflow.com/questions/2068088/c-method-only-visible-when-object-cast-to-base-class/2068108#2068108)

# ruby-on-rails-3 - Capybara 跳过 click_button

> ID：15884416
> 
> 赞同：0
> 
> 时间：2013-04-08T16:36:08.070
> 
> 标签：ruby-on-rails-3, cucumber, capybara

我有一个填写一些字段的测试，然后应该点击一个按钮。这一切都是在加载模态窗口后完成的。但是，它似乎只是跳过它而不单击按钮。我已经尝试手动调试它并自己调用它，它会工作正常，但是当我自己运行测试时它不会点击它。

```
Given /^I login with "(.*?)" and "(.*?)"$/ do |email, password|
  within "#signin_fields" do
    fill_in("custom_fields_email", :with => email)
    fill_in("custom_fields_password", :with => password)
  end
  click_button("Sign In") if page.should have_selector(".btn-signin")
end 
```

我什至添加了一个检查以确保它在页面上，但是自从删除了 wait_until，我不确定我应该如何让页面加载，然后确保它正确单击按钮。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T02:28:45.590

这篇文章可能会有所帮助： [您如何让 rspec 输出它遇到的内容，而不是“没有找到预期的内容”？](https://stackoverflow.com/questions/15873016/how-do-you-get-rspec-to-output-what-it-encountered-rather-than-it-didnt-find-w/15874077#15874077)基本上，对于调试，您可以添加该行`save and open page`并检查规范发现的内容以及它是否与您自己的调试结果不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T22:26:58.763

您的代码中的以下行与`have_selector`RSpec 匹配器一样不正确：

```
click_button("Sign In") if page.should have_selector(".btn-signin") 
```

相反，您应该使用[Capybara::Node::Matchers](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers)中的任何一个，例如：

```
click_button("Sign In") if page.has_selector?(".btn-signin") 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T18:15:22.370

page.should have_selector(".btn-signin") isn't going to return true or false and therefor the button will never be clicked. Just do this:

```
click_button(".btn-signin") 
```

If it should be there then the test will fail if it doesn't appear on the page.

# android - 逐步井字游戏 Android 示例失败

> ID：15884417
> 
> 赞同：3
> 
> 时间：2013-04-08T16:36:08.833
> 
> 标签：android, eclipse

在阅读了无数关于如何使引用的库与 Android-Eclipse 一起工作的帖子后，我必须声明无法运行提供的示例井字游戏，该示例井字游戏分为两个项目**TicTacToeLib**（标记为库）和**TicTacToeMain**（使用 TicTacToeLib )

1.  我首先将创建的 TicTacToeLib~~导入~~Eclipse（文件->新建->其他->Android->Android 示例项目->TicTacToeLib）
2.  然后将创建的 TicTacToeMain~~导入~~Eclipse (File->New->Other->Android->Android sample project->TicTacToeMain)
3.  按照[Android 开发者网站](http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject)上关于如何设置和引用库项目的说明进行操作

在这里我遇到了第一个障碍，因为一方面该站点提到`<user-library>`应该使用，但**TicTacToeMain**的示例清单不包含任何`<uses-library>`元素。
无论哪种方式，示例都不会运行。

没有`<user-library>`元素，项目甚至无法编译：

![在此处输入图像描述](https://i.stack.imgur.com/p9Wik.png)

如果我手动将 tictactoelib.jar 添加到构建路径 ( `Add JARs...`)，这**不是**Android 开发人员页面中指示步骤的一部分，错误就会消失，只有警告仍然存在。运行应用程序退出失败（“*不幸的是井字游戏示例已停止*”）：

```
04-08 16:05:24.762: E/dalvikvm(3741): Could not find class 'com.example.android.tictactoe.library.GameActivity', referenced from method com.example.android.tictactoe.MainActivity.startGame
04-08 16:05:24.762: W/dalvikvm(3741): VFY: unable to resolve const-class 17 (Lcom/example/android/tictactoe/library/GameActivity;) in Lcom/example/android/tictactoe/MainActivity;
04-08 16:05:24.767: D/dalvikvm(3741): VFY: replacing opcode 0x1c at 0x0002
04-08 16:05:24.877: V/PhoneStatusBar(166): setLightsOn(true)
04-08 16:05:24.937: D/gralloc_goldfish(3741): Emulator without GPU emulation detected.
04-08 16:05:25.017: I/Process(89): Sending signal. PID: 3741 SIG: 3
04-08 16:05:25.027: I/dalvikvm(3741): threadid=3: reacting to signal 3
04-08 16:05:25.037: I/dalvikvm(3741): Wrote stack traces to '/data/anr/traces.txt'
04-08 16:05:25.058: I/ActivityManager(89): Displayed com.example.android.tictactoe/.MainActivity: +1s368ms
04-08 16:05:25.317: W/NetworkManagementSocketTagger(89): setKernelCountSet(10013, 0) failed with errno -2
04-08 16:05:27.857: D/AndroidRuntime(3741): Shutting down VM
04-08 16:05:27.857: W/dalvikvm(3741): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
04-08 16:05:27.918: E/AndroidRuntime(3741): FATAL EXCEPTION: main
04-08 16:05:27.918: E/AndroidRuntime(3741): java.lang.NoClassDefFoundError: com.example.android.tictactoe.library.GameActivity
04-08 16:05:27.918: E/AndroidRuntime(3741):     at com.example.android.tictactoe.MainActivity.startGame(MainActivity.java:51)
04-08 16:05:27.918: E/AndroidRuntime(3741):     at com.example.android.tictactoe.MainActivity.access$0(MainActivity.java:50)
04-08 16:05:27.918: E/AndroidRuntime(3741):     at com.example.android.tictactoe.MainActivity$1.onClick(MainActivity.java:38)
04-08 16:05:27.918: E/AndroidRuntime(3741):     at android.view.View.performClick(View.java:3511)
04-08 16:05:27.918: E/AndroidRuntime(3741):     at android.view.View$PerformClick.run(View.java:14105) 
```

* * *

将以下行添加到 TicTacToeMain 清单：

```
<uses-library android:name="com.example.android.tictactoe.library"/> 
```

甚至不启动应用程序：

```
[2013-04-08 19:13:03 - TicTacToeMain] Android Launch!
[2013-04-08 19:13:03 - TicTacToeMain] adb is running normally.
[2013-04-08 19:13:03 - TicTacToeMain] Performing com.example.android.tictactoe.MainActivity activity launch
[2013-04-08 19:13:03 - TicTacToeMain] Automatic Target Mode: using existing emulator 'emulator-5554' running compatible AVD 'Smartphone_ics'
[2013-04-08 19:13:03 - TicTacToeMain] Uploading TicTacToeMain.apk onto device 'emulator-5554'
[2013-04-08 19:13:03 - TicTacToeMain] Installing TicTacToeMain.apk...
[2013-04-08 19:13:06 - TicTacToeMain] Installation error: INSTALL_FAILED_MISSING_SHARED_LIBRARY
[2013-04-08 19:13:06 - TicTacToeMain] Please check logcat output for more details.
[2013-04-08 19:13:06 - TicTacToeMain] Launch canceled! 
```

我尝试了其他的东西，没有解决问题：

*   将目标井字游戏主版本改为 15，改为 10
*   在构建路径中添加 TicTacToeLib 作为用户库
*   为TicTacToeMain创建了一个libs文件夹，并复制了tictactoelib.jar，没有解决，使用Import...导入了tictactoelib.jar，没有加糖

我希望这个示例工作的原因，除了了解引用库的机制如何工作之外，我想创建一个复杂的应用程序，使用许多引用库，如果我不能让这个愚蠢的示例工作，那么我将无法到。

还有一点，将参考库项目添加到 TicTacToeMain：

![在此处输入图像描述](https://i.stack.imgur.com/VfU4h.png)

它不粘，我按`Apply`指示按，然后`OK`。但是当我再次打开项目的属性时（不运行，不编译，只是重新打开）：

![在此处输入图像描述](https://i.stack.imgur.com/Kiexc.png)

也许这是真正的症状，但我不知道还能尝试什么。我使用 Eclipse 4.2.1，Android SDK 21.1，Java IDE 1.5.1
目标 Java 合规级别是 1.6
我尝试了几个 AVD 模拟器，都显示同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:15:39.397

就是做一个new-project-android->Android Sample Project->Tictactoemain/lib。不要导入，只是一个新项目，它可以工作。在任何情况下，右键单击项目名称 -> Android 工具 -> 修复项目属性，然后在菜单项目 -> 清理中。也许是另一个干净的工作区或新的模拟器设备（是否正确设置？）？你有java、android sdk、adt等吗？我没有这样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:40:43.927

### 关于参考图书馆

此错误意味着您`TicTacToLib`正在使用另一个项目，要解决此错误，您必须：

*   复制`tictactolib`.

*   删除正在使用的项目`tictactolib`并检查`remove from the hard disk`.

*   过去的`tictactolib`旧路。

再试一次，错误就会消失。

### 笔记：

ofc，您可以直接从正在使用它的项目中取消导入库，而无需删除该项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:45:41.030

这个 voodoo 过程最终使项目能够正常编译和运行。
我仍然不知道是什么造成了差异，所以如果您理解，请编辑此答案并完成说明。

**过程**：
经过多次不成功的尝试，我决定从 TicTacToeLib 项目中导出 JAR 文件，并将导出的 JAR 添加到 TicTacToeMain 项目中。这样做解决了 ClassNotFound 异常，但产生了一个新问题：重复的资源 ID（[参见这篇文章](https://stackoverflow.com/questions/15918441/generating-really-unique-ids-for-imported-jar)）。
因此，我从 libs 目录和构建路径中删除了导入的 JAR，只是出于绝望，我去了 TicTacToeMain propeties->Android 并添加了 TicTacToeLib 作为参考。我之前至少做过 4 次，但没有成功。我不知道为什么我又试了一次。
**这一次，我注意到在我的视野边缘，Eclipse 的 Package Explorer 窗格中发生了一些变化。我发现在 TicTactToeMain/gen 下添加了一些东西。一个 com.example.tictactoe.library 文件夹，其中包含一个 R.java 文件，其重新编号的 ID 与主项目的 ID 不冲突。**在我尝试添加参考库的其他尝试中，这从未发生过。所以我运行了这个应用程序，这次它运行正常。
正如我所说，在这一点上，这对我来说是巫术，我不知道我现在所做的与前 4 次尝试相同的不同。

# hibernate - 使用具有一对多关系的 JPA table-per-subclass 继承

> ID：15884419
> 
> 赞同：0
> 
> 时间：2013-04-08T16:36:11.213
> 
> 标签：hibernate, inheritance, jpa, one-to-many

我有以下情况 -

```
Table campaign_detail (
    campaign_detail_id (PK),
    campaign_detail_caption,
    campaign_detail_description,
    campaign_detail_type (DISCRIMINATOR)
)

Table campaign_price_detail (
    campaign_detail_id (PK) REFERENCES (campaign_detail), // ONE_TO_ONE with campaign_detail
    campaign_price_amount,
    campaign_price_URL
)

Table campaign_deal_detail (
    deal_id (PK)
    campaign_detail_id REFERENCES (campaign_detail), // MAN_TO_ONE with campaign_detail
    campaign_deal_code,
    campaign_deal_period
) 
```

Campaign 有许多详细信息，可以单独组合为实体，例如campaign_price、campaign_deal、campaign_contact、campaign_retailers 等（总共有9 个）。这些组有一些共同的属性，它们位于campaign_detail 表中。

我想将每个子类的表继承与campaign_detail 及其所有子表一起使用。

但是我有一个问题，我不确定如何处理。大多数子表都通过与campaign_detail 表的一对一关系相关联。到现在为止还挺好。但是有些（9 个中的 3 个）与 Campaign_detail 具有多对一的关系。例如，一个campaign_detail 可能需要多个交易或多个零售商。

那么如何使用 table-per-subclass 继承 JPA 注释来对这些类进行建模。到目前为止，我看到的所有示例都只考虑了一对一的关系。

我正在使用休眠 4.1.4 Final。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:47:58.247

你不能。继承用于建模一种*关系*：A Car *is a* Vehicle。香蕉*是*水果。

因此，如果您有一个广告系列详细信息和多个交易，那么这种关系就没有意义。这是一种组合关系，其中一个活动细节*有*多个交易。

# solr - SOLR 错误异常问题

> ID：15884421
> 
> 赞同：0
> 
> 时间：2013-04-08T16:36:16.510
> 
> 标签：solr

我们的 SOLR 配置出现以下错误。关于这个的任何想法。

```
System.TypeInitializationException: The type initializer for org.apache.solr.SolrSharp.Configuration.SolrSearchers threw an exception. ---> System.Configuration.ConfigurationErrorsException: Solr configuration error
at org.apache.solr.SolrSharp.Configuration.SolrSearchers..cctor() 
```

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:00:22.853

我想你没有启动（或没有安装）你的 Solr 服务器。

1.  下载最新版本的[Apache Solr](http://lucene.apache.org/solr/)
2.  [按照Solr 教程](http://lucene.apache.org/solr/4_2_1/tutorial.html)中的说明启动服务器 默认端口为 8983，因此您应该能够通过 localhost:8983/solr 访问您的 Solr 服务器
3.  在 SolrSharp 的 App.config 文件中，替换服务器 url 中的端口

这应该可以解决问题。

# cryptography - BLOWFISH：从明文和哈希中恢复密钥？

> ID：15884430
> 
> 赞同：0
> 
> 时间：2013-04-08T16:37:06.077
> 
> 标签：cryptography, blowfish

是否可以从河豚加密的密文和明文对中恢复密钥？

我有几个加密和纯字符串。但我不记得关键。

加密字符串`24026B7101030657757D01` 解密字符串的示例是`AC C1312463`

```
$key = '';
$plaintext = '';
$crypttext = '24026B7101030657757D01';

$cache = array();

while($plaintext != 'AC C1312463')
{
  $key = random_string();
  while(array_search($key,$cache) !== FALSE)
  {
    $key = random_string();
  }
  $cache[] = $key;

  $bf = new Crypt_Blowfish($key);

  $plaintext = $bf->decrypt($crypttext);
 }
    print_r($key);
    die(); 
```

假设我有这样的算法。函数 random_string 应该如何获得 32 位随机密钥？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T16:52:22.247

无论您知道多少对（明文、密文）对，都没有像样的密码（包括 Blowfish）可以有效地恢复密钥。

剩下的是暴力攻击，您可以猜测密钥，然后检查它是否与已知对匹配。对于足够复杂的密钥，这变得非常昂贵。所以这只有在你的钥匙坏了的情况下才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:15:09.043

您所提议的本质上是一种[已知明文攻击](https://en.wikipedia.org/wiki/Known_plaintext_attack)，也就是说，正如 wiki 文章所指出的那样，自 Enigma 时代以来，它们一直不是成功的密钥恢复机制。

为了接近现代密钥恢复系统，您需要使用*选择*的明文攻击，例如[差分密码分析](https://en.wikipedia.org/wiki/Differential_cryptanalysis)，它分析特别选择的明文对之间的密文差异，以获取有关密钥的信息。也就是说，Blowfish 并不是特别容易受到此类攻击，因此无论如何它也无济于事。

如果你想恢复你的密钥，你应该考虑用于生成它的机制（它是从密码派生的，它有多大等等），然后想出一种暴力破解它的方法，无论是通过字典攻击，遍历所有 32 位整数等。一个名为 John the Ripper 的程序可能有助于尽可能有效地应用这种暴力破解。

# jquery - 需要对 jquery 插件样板进行哪些修改才能在 typescript 中编译？

> ID：15884431
> 
> 赞同：1
> 
> 时间：2013-04-08T16:37:21.750
> 
> 标签：jquery, jquery-plugins, typescript

在[jQuery 插件样板](http://jqueryboilerplate.com/)中，有一些很棒的 jQuery 插件开发起始代码，但是将这些代码复制并粘贴到打字稿中并进行编译会导致编译失败。

该错误来自`undefined`未（故意）调用的参数，因此问题是需要进行哪些修改才能使其编译。可以直接删除吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:46:00.460

设为`undefined`可选：

```
// the semi-colon before function invocation is a safety net against concatenated
// scripts and/or other plugins which may not be closed properly.
; (function ($ : any, window, document, undefined?) {

// undefined is used here as the undefined global variable in ECMAScript 3 is
// mutable (ie. it can be changed by someone else). undefined isn't really being
// passed in so we can ensure the value of it is truly undefined. In ES5, undefined
// can no longer be modified. 
```

这将允许模板编译，因为未定义未传递到函数中。

# c++ - 使用随机扩展计算页面上的点击次数

> ID：15884432
> 
> 赞同：0
> 
> 时间：2013-04-08T16:37:25.670
> 
> 标签：c++, web, google-analytics, counter

我目前有一个应用程序，它每次打开时总是向带有“.data”扩展名的页面发出请求。这个应用程序目前已向公众发布并且人们使用它，我想看看有多少人使用它。为此，我采用了仅计算此页面下载次数的方法。我想使用 Google Analytics，但我无法在此页面上运行 javascript/html，因为它有一个“数据”扩展名（随机）。

无论如何我可以运行一些javascript，或者以某种方式计算该页面的下载次数，而无需更改我当前的应用程序并更新它以向PHP页面发出请求？此外，我尝试使用 将页面重定向`.htaccess`到 PHP 脚本，而我当前公开的应用程序不会遵循重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:40:20.057

您无法更改的任何原因将以下内容放入您的 Apache 配置中？

AddType 文本/html .data

# .net - ODP.Net - OracleDataReader.Read 很慢

> ID：15884433
> 
> 赞同：0
> 
> 时间：2013-04-08T16:37:26.543
> 
> 标签：.net, vb.net, oracle, odp.net

我在使用 ODP.Net 中的 OracleDataReader 时遇到了很多麻烦。基本上，我有一个参数化查询，它需要 1-5 秒才能运行（返回大约 450 条记录），然后需要 60-90 秒循环（甚至没有代码在循环中运行，字面上迭代记录集并执行没有什么）。

当我从 Aqua Data Studio 运行它时，它需要 1-5 秒。当我从 .Net 运行它时， cmd.ExecuteReader() 需要 1-5 秒才能返回。当我使用 OracleDataReader.Read 遍历 450 条记录时，需要 60-90 秒才能完成。

我什至取出了循环中的所有代码，只有一个空白的“While dr.Read”，循环这 450 条记录仍然需要 60 到 90 秒（我使用秒表来获取 cmd.ExecuteReader 的时间然后围绕空的 dr.Read 循环）。

我尝试设置 FetchSize，但没有帮助（而且，我的测试用例中只有 450 条记录）。我尝试使用连接字符串关闭自动调谐，它进一步降低了性能。

为什么 OracleDataReader.Read 在返回少量数据时会花费这么长时间（而其他工具在很短的时间内为相同的查询返回相同的数据）？

```
 Using conn As New Oracle.DataAccess.Client.OracleConnection(System.Configuration.ConfigurationManager.ConnectionStrings("oracle_dss").ConnectionString)                 
    conn.Open()
    Using cmd As OracleCommand = conn.CreateCommand
        cmd.BindByName = True
        cmd.CommandText = ""  ' removed SQL to make this more readable

        ' Month end
        Dim paramMonthEndDate As OracleParameter = cmd.CreateParameter
        paramMonthEndDate.ParameterName = ":month_end_date"
        paramMonthEndDate.DbType = DbType.Date
        paramMonthEndDate.Value = monthEnd
        cmd.Parameters.Add(paramMonthEndDate)

        Dim sw As New System.Diagnostics.Stopwatch
        sw.Start()

        cmd.FetchSize = 1000
        Dim dr As OracleDataReader = cmd.ExecuteReader
        dr.FetchSize = dr.RowSize * 1000

        sw.Stop()
        Me.Log(String.Format("Month End Query: {0}s", sw.ElapsedMilliseconds / 1000))

        sw.Reset()
        sw.Start()

        While dr.Read

        End While

        sw.Stop()

        Me.Log(String.Format("Month End Query through recordset: {0}s", sw.ElapsedMilliseconds / 1000))

        dr.Close()
            End Using
    conn.Close()
End Using 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:47:56.440

与您的 DBA 合作并要求他们为独立运行（aqua 数据工作室）和您的 odp.net 调用捕获解释计划，并确认它们实际上是相同的。如果他们不是，那么这可能会解释你的问题。然后，您可以尝试将“enlist=false”添加到您的连接字符串，但最好让 DBA 更新相关表的统计信息，希望能修复缓慢的计划。有关更多信息，请参阅[https://stackoverflow.com/a/14712992/852208](https://stackoverflow.com/a/14712992/852208)。

我也遇到过同样的问题，归结为当可能涉及分布式事务时，oracle 对执行计划不太乐观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:59:26.293

可能是我错了，但您实际上是在这一行中获取数据： `While dr.Read`，而不是在执行阅读器时。所以这可以解释为什么即使什么都不做，`dr.Read`也要花时间。

我会尝试将您的命令更改为

1）。运行普通sql（不带参数）

2）。使用常规（非绑定变量）参数运行

3）。如果可能，将 sql 代码移动到存储过程

# vim - .vimrc 脚本，用于从 VIM 打开网页链接

> ID：15884435
> 
> 赞同：2
> 
> 时间：2013-04-08T16:37:39.420
> 
> 标签：vim

我想设置 .vimrc，这样我就可以从 vim 编辑器中打开一个网络链接。有什么好的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T21:01:35.340

[通用文本链接](http://www.vim.org/scripts/script.php?script_id=293)(utl.vim) 插件可以做到这一点（以及许多其他强大的功能）。例如，我用它来记录我的 .vimrc 与相关链接或帮助主题：

```
" Jump to last position in the file, see <url:vimhelp:last-position-jump>
au BufReadPost * if line("'\"") > 1 && line("'\"") <= line("$") | exe "normal! g`\"" | endif 
```

安装后，阅读帮助（`:h utl`），它解释得很好，带有嵌入式教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T06:49:58.843

我可以推荐[open-browser.vim - 用你最喜欢的浏览器](http://www.vim.org/scripts/script.php?script_id=3133)插件打开 URI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T21:13:02.380

我在 Ubuntu（vim 或 gvim）中使用以下命令调用系统命令：

```
:call system('firefox www.google.com') 
```

请注意，您可以简单地使用

```
:!firefox www.google.com 
```

但这会暂时劫持 Vim 窗口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-02T10:00:43.517

openurl.vim : 在默认浏览器中打开一个 url

[http://www.vim.org/scripts/script.php?script_id=3291](http://www.vim.org/scripts/script.php?script_id=3291)

# python - numpy tostring 等价于 numpy fromstring

> ID：15884440
> 
> 赞同：2
> 
> 时间：2013-04-08T16:37:54.063
> 
> 标签：python, numpy

Numpy 有一个简洁的功能[`numpy.fromstring`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromstring.html)。

它似乎也有一个整洁的功能[`numpy.chararray.tostring`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.chararray.tostring.html)。

如何转换`\x00\x00\x00\x00\x01\x00\x00\x00\x02\x00\x00\x00\x03\x00\x00\x00`为可以写入文件的普通 ASCII 字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:46:27.510

我在这里找到了我想要的东西[`numpy.ndarray.tofile`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.tofile.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-04T17:17:49.040

numpy 数组有一个`tostring()`方法

```
In [1]: np.ones(3).tostring()
Out[1]: b'\x00\x00\x00\x00\x00\x00\xf0?\x00\x00\x00\x00\x00\x00\xf0?\x00\x00\x00\x00\x00\x00\xf0?' 
```

请注意，名称错误，它返回字节而不是字符串（在 python 2 中恰好相同，但在 python 3 中不同）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-18T02:36:03.567

试试这个。

```
np.fromstring('\x01\x02', dtype=np.uint8) 
```

# javascript - 使用 MooTools 平滑淡入整个网页

> ID：15884441
> 
> 赞同：1
> 
> 时间：2013-04-08T16:37:56.583
> 
> 标签：javascript, dom, mootools, mootools1.2

我想在所有元素加载完成后淡入整个网页。网页包括从左到右重复的背景图像，以及带有一些文字和图片的主要内容区域。我假设我应该在 CSS 中将 body opacity 设置为 0，并使用 JavaScript 代码淡入页面。

我必须使用 MooTools，更具体地说是 1.2.6 版，因为该库已经链接到页面（出于多种原因，不应该升级到更新的版本）。

StackOverflow 的一位专家建议将此 MooTools 片段作为解决方案：

```
window.addEvent('load', function() {
  $$('body').set('morph', {duration: 300}).morph({'opacity': '1'});
}); 
```

**问题：**由于某种原因，该片段没有平滑地淡入页面，而是立即出现背景，然后大约一秒钟后，页面弹出，没有任何淡入效果。很可能是我做的不对。

我很感激一位知识渊博的人的一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:26:36.553

您的问题的答案是执行以下操作。

删除`opacity:0;`样式表中的 CSS 并使用从您调整的代码

我从`300`增加到`3000`以 秒 为 从`.3seconds`到`3seconds`。

链式：

```
window.addEvent('load', function () {

    $$('body').fade('hide').set('morph', {
        duration: 3000
    }).morph({
        'opacity': '1'
    });

}); 
```

展开：

```
window.addEvent('load', function () {

    var el = $$('body');

    el.fade('hide'); // hide body tag

    el.set('morph', {duration: 3000});

    $$('body').morph({'opacity': '1'});

}); 
```

### 注意：

我同意 LifeInTheGrey 关于不良做法的观点，但我说我会回答你的问题。

# netbeans - 更改 Netbeans 项目模板中的运行命令 - 通过创建新项目维护设置

> ID：15884442
> 
> 赞同：1
> 
> 时间：2013-04-08T16:38:06.237
> 
> 标签：netbeans, ide, project

在 netbeans 中配置新项目模板的属性时，我遇到了一些问题。
我有自己的脚本来构建和运行项目，所以我让 netbeans 在项目属性的“运行命令”区域调用脚本。我刚换

```
"${OUTPUT_PATH}"       # default command in the Run Command 
```

和

```
runProject.sh          # location of my run script 
```

但是，我已经为新项目创建了一个模板。

在创建项目期间如何使这些设置保持不变？

**编辑：** 我看了一些，看起来运行命令设置存储在文件夹`configurations.xml`内。`nbproject/private/`

不幸的是，在创建新实例时，该文件夹似乎没有从模板中复制过来。

因此，我正在寻找一种方法来强制模板复制该文件。

# django - 在 WAMP 上使用 mod_wsgi 部署 Django

> ID：15884443
> 
> 赞同：0
> 
> 时间：2013-04-08T16:38:19.767
> 
> 标签：django, windows, wamp, mod-wsgi

## 语境

*   Python 2.7 64 位
*   姜戈 1.3
*   WAMP 2.2 (Apache 2.2.22) 64 位
*   mod_wsgi 3.4 64位
*   视窗 7 64 位

### 详情 | Apache httpd.conf

```
...
Listen 192.168.20.11:8080
...
LoadModule wsgi_module modules/mod_wsgi.so
...
ServerName 192.168.20.11:8080
...
DocumentRoot "c:/wamp/www/"
...
<VirtualHost *:8080>

    ServerName 192.168.20.11
    ServerAdmin me@mine.com

    DocumentRoot "C:/wamp/www/myapp"

    <Directory "C:/wamp/www/mapp">
    Order allow,deny
    Allow from all
    </Directory>

    Alias /myapp/static "C:/wamp/www/myapp/static"
    WSGIScriptAlias /test "C:/wamp/www/myapp/wsgi.py"

</VirtualHost> 
```

### 详情 | wsgi.py

由 Django 的 startproject 生成。位于默认 /myapp/myapp/wsgi.py

```
import os
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "myapp.settings")
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

## 问题

鉴于上述上下文，无法在 WAMP 上部署 Django 应用程序。

“Hello World”测试 wsgi 应用程序工作正常，所以我确认 mod_wsgi 处于活动状态。

我得到错误：

> 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员 me@mine.com 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。

当指向：

```
http://192.168.20.11:8080/myapp 
```

静态文件夹工作正常，我可以通过指向来访问目录中的所有静态文件：

```
http://192.168.20.11:8080/myapp/static 
```

### 详情 | 服务器错误日志

注意：为了便于阅读，我删除了时间戳。

> mod_wsgi (pid=5728, process='', application='192.168.20.11:8080|/myapp'): 加载 WSGI 脚本'C:/wamp/www/myapp/myapp/wsgi.py'。
> 
> mod_wsgi (pid=5728): 处理 WSGI 脚本时发生异常
> 
> 'C:/wamp/www/myapp/myapp/wsgi.py'。
> 
> 回溯（最近一次通话最后）：
> 
> 文件“C:\Python27\lib\site-packages\django\core\handlers\wsgi.py”，第 236 行，**调用中**
> 
> self.load_middleware()
> 
> 对于 settings.MIDDLEWARE_CLASSES 中的中间件路径：
> 
> 文件“C:\Python27\lib\site-packages\django\conf\_ *init* _.py”，第 52 行，在**getattr**
> 
> self._setup（名称）
> 
> _setup 中的文件“C:\Python27\lib\site-packages\django\conf\_ *init* _.py”，第 47 行
> 
> self._wrapped = 设置（settings_module）
> 
> 文件“C:\Python27\lib\site-packages\django\conf\_ *init* _.py”，第 132 行，在**init**
> 
> raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" %(self.SETTINGS_MODULE, e))
> 
> ImportError：无法导入设置“myapp.settings”（它在 sys.path 上吗？）：没有名为 myapp.settings 的模块
> 
> 文件不存在：C:/wamp/www/myapp/favicon.ico

在这种情况下，我不了解中间件的功能，并认为没有必要使用中间件。

关于系统路径，当我添加时：

```
WSGIPythonPath "c:/wamp/www/myapp" 
```

到我的 httpd.conf 文件中的 VirtualHost，服务器拒绝启动。

## 客观的

在不使用 IIS 的情况下将工作的 Django 应用程序（已使用 Django 开发服务器在本地开发和测试）部署到 Microsoft SBS 网络。我尝试在 IIS 上进行部署，但很早就遇到了困难，因此切换到了 WAMP。

我是 Python 和 Django 的新手，从未在任何生产服务器上部署过 Web 应用程序（我是一名 R 程序员，通常使用数学和统计编程）。

任何有助于实现这一目标的建议，无论采用何种方法，都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:33:29.633

这与中间件无关，只是遇到错误的地方。错误本身是最后一行：“无法导入设置'myapp.settings'”。这几乎可以肯定是因为您没有修改 PYTHONPATH（在您的 wsgi 或 Apache conf 中）以将“myapp”放在路径上。

例如，请参阅Django 文档中[的示例 Apache conf](https://docs.djangoproject.com/en/1.5/howto/deployment/wsgi/modwsgi/)`WSGIPythonPath` - 那里有一个指令可以将应用程序添加到您没有的 Python 路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T15:00:58.427

在 httpd.conf 中放置 WSGIPythonPath 指令会阻止服务器启动，但问题确实与未声明的路径有关。

添加：

```
sys.path.append("c:/wamp/www/myapp") 
```

到 wsgi.py 文件就可以了。

感谢 Daniel Roseman 让我走上正轨。

# c++ - msvcr100d.dll!_heap_alloc_base(unsigned int size=80) Line 55 fails and throws

> ID：15884447
> 
> 赞同：0
> 
> 时间：2013-04-08T16:38:29.707
> 
> 标签：c++, visual-studio-2010

It throws on code alike:

```
template<class T>
T* new_p(){
    T* result =  (T*) operator new (sizeof(T)); // HERE
    memset(result, 0, sizeof(T));
    result = new (result) T();
    return result;
} 
```

![enter image description here](https://i.stack.imgur.com/6hWOH.png)

![enter image description here](https://i.stack.imgur.com/I9QXW.png)

So new does not work in VS2010 sometimes of I do something wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:42:05.643

Most of the time, when you have heap assert errors like this, it means that you screwed something up *earlier*. It's probably not the current `malloc`/`new` you're executing that's the problem.

Perhaps you called `free` / `delete` twice for the same allocation, or you overran a heap-allocated buffer. These are often difficult to track down, unfortunately.

*   [Debugging heap corruption in Visual Studio](https://www.google.com/search?q=debugging%20heap%20corruption%20visual%20studio)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:42:13.477

I've never seen new used like that. Maybe I'm not understanding what you are trying to do with that code, but this is how I would have thought it should be.

```
template<class T>
T* new_p(){
    T* result =  new T();
    memset(result, 0, sizeof(T)); //BTW, I doubt this will do good things
    return result;
} 
```

# android - Storage increased sharply when download from google play

> ID：15884452
> 
> 赞同：0
> 
> 时间：2013-04-08T16:38:46.737
> 
> 标签：android, storage

My issue is : my app have capacity 20MB and when I install to my phone it use 20MB storage . But when I upload to google play and download it and setup it use 60MB storage . This only happens with my Paid app . If you have any suggestions please help me. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:00:28.453

为了至少在您提供的有限信息方面为您提供帮助，请查看[本指南](http://developer.sonymobile.com/knowledge-base/tutorials/android_tutorial/tips-for-reducing-apk-file-size-2/)以减小 droid 应用程序的大小。

# ruby - 在 ruby 单元测试中访问全局变量

> ID：15884455
> 
> 赞同：4
> 
> 时间：2013-04-08T16:39:14.053
> 
> 标签：ruby, unit-testing, watir

我在使用我的测试类中定义的全局变量时遇到问题，然后在库文件中引用了该变量。我正在使用 Ruby 1.9.3p392 和测试单元 2.5.4。

这是运行测试的代码：

```
require 'rubygems'
gem 'test-unit'
require 'test/unit'
require 'ci/reporter/rake/test_unit_loader'
load '../lib/functions.rb'
require 'watir'

class Test_002 < Test::Unit::TestCase

  include Functions

  class << self
   def startup
      @browser = Watir::Browser.new :ie
      @browser.speed = :fast
    end

    def shutdown
      @browser.close
    end
  end

  def test_001_login
    login('some_url', 'some_user', 'some_passw')
  end
end 
```

这是包含登录功能的库的一部分：

```
require 'rubygems'

 module Functions 

  def login(url, user, passw)
    @browser.goto(url)
    ...
  end
end 
```

这是输出：

```
Started
E
===============================================================================
Error: test_001_login(Test_002)
  NoMethodError: undefined method `goto' for nil:NilClass
(...)
     23:   end
     24:   
     25:   def test_001_login
  => 26:     login('some_url', 'some_user', 'some_passw')
     27:   end
     28:    
     29: end
===============================================================================

Finished in 3.0043 seconds.

1 tests, 0 assertions, 0 failures, 1 errors, 0 pendings, 0 omissions, 0 notifications
0% passed

0.33 tests/s, 0.00 assertions/s 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:43:52.357

您的预测试初始化​​代码未运行。

TestUnit 框架期望安装代码在一个名为的方法中`setup`，而拆卸代码在一个名为的方法中`teardown`

您有两个选择，要么将方法重命名为`startup`，`setup`要么将方法重命名`shutdown`为`teardown`，或者，如果出于其他目的需要设置/关闭，请创建委托方法：

```
def setup
  startup
end

def teardown
  shutdown
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T17:36:14.823

方法中定义的实例变量（即@browser）`startup`将不可用于测试。基于这个旧论坛主题[http://www.ruby-forum.com/topic/144884](http://www.ruby-forum.com/topic/144884)，它是设计使然：

> 这种行为是设计使然。“测试隔离”的理想意味着每次测试用例开始时您都不需要太努力地获得一个干净的状态。否则，测试可能会依赖上一个测试中的 @value，并且可能会以您没有注意到的方式依赖它。
> 
> 当然，任何其他持久变量都可能破坏测试隔离。我们不会在每个测试用例之间停止和重新启动 Ruby。但至少当它发生时，@instance 变量不会受到责备。

我曾经使用过的一种解决方法是在测试中使用相同的浏览器是使用类变量（即`@@browser`）。启动将如下所示。其他方法同样必须更新才能使用`@@browser`.

```
def startup
  @@browser = Watir::Browser.new :ie
  @@browser.speed = :fast
end 
```

# .net - .NET show english numbers while os regional settings arabic

> ID：15884456
> 
> 赞同：0
> 
> 时间：2013-04-08T16:39:15.100
> 
> 标签：.net

I am building a .NET windows application and facing a problem with displaying numbers while the OS regional settings region is Arabic. OS enforce my application to show numbers in arabic too.

I tried to use `Globalization.CultureInfo` to change this behaviour, but it's not working.

# java - 模型不受任何插件管理

> ID：15884460
> 
> 赞同：0
> 
> 时间：2013-04-08T16:39:37.450
> 
> 标签：java, playframework, crud, playframework-1.x

我正在使用 Play!Framwork 1.2.5。

我正在尝试在我的项目中为模型中的案例实施 CRUD。我按照[此处](http://www.playframework.com/documentation/1.2.5/guide7)描述的步骤操作，但出现以下错误：

```
Model models.Media is not managed by any plugin
    at play.db.Model$Manager.factoryFor(Model.java:57)
    at controllers.CRUD$ObjectType.<init>(CRUD.java:215)
    at controllers.CRUD$ObjectType.get(CRUD.java:238)
    at controllers.CRUD$ObjectType$get.call(Unknown Source)
    at {module:crud}/app/views/tags/crud/types.tag.(line:4)
    at play.templates.GroovyTemplate.internalRender(GroovyTemplate.java:247)
    at play.templates.GroovyTemplate$ExecutableTemplate.invokeTag(GroovyTemplate.java:401)
    at {module:crud}/conf/routes.(line:4)
    at play.templates.GroovyTemplate.internalRender(GroovyTemplate.java:247)
    at play.templates.Template.render(Template.java:26)
    at play.templates.GroovyTemplate.render(GroovyTemplate.java:202)
    at play.mvc.Router.parse(Router.java:162)
    at play.mvc.Router.parse(Router.java:190)
    at play.mvc.Router.parse(Router.java:164)
    at play.mvc.Router.load(Router.java:48)
    at play.mvc.Router.detectChanges(Router.java:219)
    at Invocation.HTTP Request(Play!) 
```

这是类媒体的代码：

```
import org.hibernate.annotations.Entity;
import org.hibernate.annotations.GenericGenerator;
import play.db.jpa.Model;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.OneToOne;

@Entity
public class Media extends Model{
    @Id
    private String uuid;

    @OneToOne
    private Video video;
    @OneToOne
    private Picture picture;

    public String getUuid() {
        return uuid;
    }

    public void setUuid(String id) {
        this.uuid = id;
    }

    public Video getVideo() {
        return video;
    }

    public void setVideo(Video video) {
        this.video = video;
    }

    public Picture getPicture() {
        return picture;
    }

    public void setPicture(Picture picture) {
        this.picture = picture;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) {
            return true;
        }
        if (!(obj instanceof Media))
            return false;
        Media media = (Media) obj;
        return media.getUuid().equals(this.uuid);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:27:33.903

我认为您没有使用正确的导入语句。

您对模型的导入`Media.java`应如下所示：

### 媒体模型

```
import play.db.jpa.Model;

// should import javax.persistence.* package rather than org.hibernate.*
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.OneToOne;

@Entity
public class Media extends Model {
   ....
} 
```

如果您使用关系注释（如`@OneToOne`）标记了字段，则应将对象定义为`Entity`. 因此，您的其他模型，例如`Picture.java`或`Video.java`应该导入相同类型的模型，`Media.java`如下所示：

### 图片模型

```
import play.db.jpa.Model;

// don't forget to import javax.persistence.* package
import javax.persistence.Entity;

@Entity
public class Picture extends Model {
   ...
} 
```

### 视频模型

```
import play.db.jpa.Model;

// don't forget to import javax.persistence.* package too
import javax.persistence.Entity;

@Entity
public class Video extends Model {
   ...
} 
```

我已经尝试过了，它适用于我。希望它有助于解决您的问题。问候。

# c# - 在 Windows 窗体中更新进度条

> ID：15884461
> 
> 赞同：0
> 
> 时间：2013-04-08T16:39:46.397
> 
> 标签：c#, winforms

基本上我试图让我的进度条出现在不同的级别和颜色，具体取决于返回的值，但是我的 2 个进度条看起来总是彼此相同，即使它们的值不同。此外，颜色也不会更新。

```
 double DFuelLvl = client.GetTankAmounts("Diesel"); 
            double PFuelLvl =  client.GetTankAmounts("Unleaded");

            if (DFuelLvl < 300)
            {
                DieselBar.Value = 10;
                DieselBar.ForeColor = Color.Red;
                DieselBar.Style = System.Windows.Forms.ProgressBarStyle.Continuous;
            }
            else if( DFuelLvl > 300 && DFuelLvl< 500)
            {
                DieselBar.Value = 35;
                DieselBar.ForeColor = Color.Orange;
                DieselBar.Style = System.Windows.Forms.ProgressBarStyle.Continuous;
            }
            else if (DFuelLvl > 500 && DFuelLvl < 850)
           {
               DieselBar.Value = 75;
               DieselBar.ForeColor = Color.Green;
               DieselBar.Style = System.Windows.Forms.ProgressBarStyle.Continuous;
           }
            else
            {
                DieselBar.Value = 100;
                DieselBar.ForeColor = Color.Blue;
                DieselBar.Style = System.Windows.Forms.ProgressBarStyle.Continuous;
            }

            if (PFuelLvl < 300)
            {
                Petrolbar.Value = 10;
                Petrolbar.ForeColor = Color.Red;
                Petrolbar.Style = System.Windows.Forms.ProgressBarStyle.Continuous;
            }
            else if (PFuelLvl > 300 && DFuelLvl < 500)
            {
                Petrolbar.Value = 35;
                Petrolbar.ForeColor = Color.Orange;
            }
            else if (PFuelLvl > 500 && DFuelLvl < 850)
            {
                Petrolbar.Value = 75;
                Petrolbar.ForeColor = Color.Green;
            }
            else
            {
                Petrolbar.Value = 100;
                Petrolbar.ForeColor = Color.Blue;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:53:31.860

禁用视觉样式，并在颜色更改后更新布局就足够了。

# iphone - iOS 配置文件错误

> ID：15884464
> 
> 赞同：3
> 
> 时间：2013-04-08T16:39:48.913
> 
> 标签：iphone, ios, distribution, provisioning-profile, ios-provisioning

我目前在开发中心上配置配置文件时遇到一些问题。过去，我能够在内部应用商店和多个设备上成功创建和部署应用。尝试签署我的应用程序时，我从未遇到过麻烦。然而，自从上次更新开发门户以来，我一直无法创建新的配置文件——这已成为一个大问题。

我已经成功地创建了一个应用程序 ID com.xx.USApp 并为它创建了一个证书：com.xx.USApp，就像我过去为所有其他应用程序所做的那样。但是，当我转到“Provisioning Profiles”时，我无法为任何 App ID（甚至以前的应用程序）创建配置文件。当我尝试时，我可以选择一个 App ID，然后在下一个屏幕上，弹出这条消息：http: [//i.imgur.com/grEcut5.png](http://i.imgur.com/grEcut5.png)

它告诉我创建一个我已经完成的证书 - 可以在这里看到：http: [//i.imgur.com/ouW7LKo.png](http://i.imgur.com/ouW7LKo.png)

我什至尝试通过他们提供给我的链接创建其他链接，但是每当我返回“配置”选项卡时，都会出现相同的消息。过去，我被带到这个对话框： http: [//i.imgur.com/QnP5X3s.png](http://i.imgur.com/QnP5X3s.png)然后给了我所有证书文件的列表。我想知道这是否是他们更新中的一个错误，以及我将如何解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:35:45.427

Apple 已决定将您设置配置文件的位置移至会员中心。这可能是问题所在。不知道他们为什么移动它。尝试从新会员中心添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T15:13:37.877

尝试创建配置文件时，他们的服务器出现问题。他们已经解决了这个问题。

# asp.net-mvc - following tutorial but not giving me the options it should

> ID：15884466
> 
> 赞同：1
> 
> 时间：2013-04-08T16:39:51.490
> 
> 标签：asp.net-mvc, asp.net-mvc-3, orchardcms, orchardcms-1.6

i'm following the [http://skywalkersoftwaredevelopment.net/blog/writing-an-orchard-webshop-module-from-scratch-part-3](http://skywalkersoftwaredevelopment.net/blog/writing-an-orchard-webshop-module-from-scratch-part-3) tutorial word for word but there is no option for me to enable or disable SkyWalker.Webshop.

I have done as it asks, created the 'Skywalker.Webshop' folder inside the 'modules' folder. delete the class1.cs file and add the Module.text file.

However when I load the application there is no option in the modules/features page that allows me to enable or disable webshop (why does it not appear)

anyone have any idea as to why? Thanks

![enter image description here](https://i.stack.imgur.com/H6zeb.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T17:53:04.463

根据教程中提到的内容：

**Orchard 要求您的模块物理存在于 Modules 目录中。**

确保在创建类库时提供了正确的目录，因为`class library`当您尝试将新的类库添加到果园解决方案时，Visual Studio 会使用为类型项目提供的最新目录。

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T04:59:22.393

也许以另一种方式尝试：

使用命令行工具（bin文件夹下的Orchard.exe）

键入以下内容

```
feature enable Orchard.CodeGeneration 
```

然后，

```
codegen module Pluralsight.Movies /IncludInSolution:true 
```

提示：使用“帮助推荐”、“帮助代码生成模块”

帮助您理解命令行。

# php - how to block via .htaccess php files from sending any data to a specific IP

> ID：15884471
> 
> 赞同：0
> 
> 时间：2013-04-08T16:40:04.737
> 
> 标签：php, .htaccess

I have a php based web application which might be sending data to an external IP. Is it possible to block php files, entire folder from sending any sort of data to the IP by specifying that IP in .htaccess ?

# php - 如何以数组形式在数据库中发布值

> ID：15884478
> 
> 赞同：1
> 
> 时间：2013-04-08T16:40:35.273
> 
> 标签：php, mysql, codeigniter

我正在创建一个应用程序来注册公共汽车的路线，给它一次路线名称，并为用户动态创建一个文本框和一个选择框，以便在该路线上尽可能多地创建一个公共汽车站。这是我的 CodeIgniter 的观点：在表单 div 中动态创建文本框和选择框的脚本。

我想将其输入的数据发布到我的数据库中，其字段如下：

```
route_number     stop_name  am_pm  timing 
```

你能帮我使用 CodeIgniter 模型控制器功能吗？视图如下：

```
<form method='post' action='<?php echo site_url('a3_bus_system/output')?>'>
<div class="_25">
<strong>Route Name/Number</strong>
     <br/>
<input type="text" name=""></input>
</div>
<p>&nbsp;<p>&nbsp;</p></p>
<p>&nbsp;<p>&nbsp;</p></p>
<div id="div">
</div>
<p>&nbsp;</p><div class="_25">
<p><input type="button" name="button" class="button red" id="button" value="Add"  onclick="generateRow() "/></a></p>
</div>
<input type='button' value='Remove Button' id='removeButton'>
<p>&nbsp;</p><p>&nbsp;</p></div>
 <input type="submit"  class="button blue" id="button" value="Register" />
/form>  
</div>
</div>
<div class="clear height-fix"></div>
</div></div> <!--! end of #main-content -->
</div> <!--! end of #main -->
<script>
var counter=1;
  function generateRow() {
var count="<font color='red'>"+counter+"</font>";
var temp ="<p>&nbsp;&nbsp;&nbsp;&nbsp;<div class='_25'><input type='textbox' id='textbox' name='stop"+counter+"' placeholder='Stop Name'></input></div>&nbsp;&nbsp;&nbsp;<div class='_25'><input type='textbox' id='textbox' name='timing"+counter+"' placeholder='Timing'></input></div>&nbsp;<div class='_25'><select id='ampm"+counter+"' name='ampm"+counter+"'><option>a.m</option><option>p.m</option></select>  </div>";
var newdiv = document.createElement('div');
newdiv.innerHTML = temp + count;
var yourDiv = document.getElementById('div');
yourDiv.appendChild(newdiv);
counter++;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:12:48.913

您需要将表单提交到同一个 PHP 文件，通过传递`counter`参数我们知道已经提交了多少组数据，然后我们可以将数据插入到您的数据库中。提交表单后，以下 php 代码会将数据插入到您的数据库中：

```
<?php
if(!empty($_POST["counter"]) && !empty($_POST["route"])){
    $counter = $_POST["counter"];
    $route   = $_POST["route"];
    $pdo     = new mysqli("host", "username", "password", "database");
    $stmt    = "INSERT INTO table_name(route_number, stop_name, am_pm, timing) VALUES(?, ?, ?, ?)";
    $insert  = $pdo->prepare($stmt);

    for($i = 1; $i <= $counter; $i++)
    {
        $stop   = $_POST["stop" . $i];
        $timing = $_POST["timing" . $i];
        $ampm   = $_POST["ampm" . $i];
        $insert->bind_param("isss", $route, $stop, $ampm, $timing);
        $insert->execute();
    }
    $stmt->close();
    $pdo->close();
}
?>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Buss Routes</title>
<script type="text/javascript">
    var counter = 1;

    function generateRow() {
        var count = "<p align='center' ><font color='red'>" + counter + "</font></p></div>";
        var temp = "<div id='container" + counter + "'  class='_25' >"
            + "<input type='text' name='stop" + counter + "' placeholder='Stop Name' />"
            + "<input type='text' name='timing" + counter + "' placeholder='Timing' />"
            + "<select name='ampm" + counter + "'><option>a.m</option><option>p.m</option></select>"
            + "<input type='button' onClick='Javascript:this.parentNode.remove(); counter--;' value='Remove' />";
        var newdiv = document.createElement('div');
        newdiv.innerHTML = temp + count;
        document.getElementById('div').appendChild(newdiv);
        document.getElementById('counter').value = counter;
        counter++;
    }
</script>
</head>
<body>
    <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>" >
    <div class="_25">
        <p align="center"><strong>Route Name/Number</strong></p>
        <input type="text" name="route" placeholder="Route Number" />
    </div>
    <div id="div"></div>
    <div class="_25">
        <input type="button" class="button red" value="Add" onclick="generateRow()" />
        <input type="hidden" name="counter" id="counter" />
        <input type="submit" class="button blue" value="Register" />
    </div>
    </form>
<div class="clear height-fix" ></div>
</body>
</html> 
```

这是一个演示，展示了 javascript 代码是如何工作的：[jsfiddle](http://jsfiddle.net/arcm111/EJ6xN/)

将`host`, `database`, `username`,替换`password`为您的服务器的详细信息和`table_name`包含数据的表名。

* * *

对于 CodeIgniter，试试这个而不是上面的 php 代码（未经测试，我以前从未使用过 CodeIgniter，但通过检查 ellislab 网站上的文档，这应该可以工作）：

```
<?php
if(!empty($_POST["counter"]) && !empty($_POST["route"])){
    $counter = $_POST["counter"];
    $route   = $_POST["route"];
    $this->load->database();

    for($i = 1; $i <= $counter; $i++)
    {
        $data = (
            'route_number' => $route,
            'stop_name'    => $_POST["stop" . $i],
            'am_pm'        => $_POST["ampm" . $i],
            'timing'       => $_POST["timing" . $i]
        );
        $this->db->insert('mytable', $data);
    }
}
?> 
```

# sockets - 静态html页面直接创建WebSocket连接golang服务器

> ID：15884480
> 
> 赞同：1
> 
> 时间：2013-04-08T16:40:44.083
> 
> 标签：sockets, websocket, go

我正在编写一个`html`需要创建`websocket`到服务器的页面

在服务器上，我使用“code.google.com/p/go.net/websocket”中的示例只是接受连接。

但是，在 Chrome26 中，响应是

**WebSocket 连接到“ws://127.0.0.1:1234/”失败：意外响应代码：400**

有什么遗漏（比如握手）吗？

这是我的`html`，服务器正在使用`go`

```
<html>
<head></head>
<body>
<script type="text/javascript">
    var sock = null;
    var wsuri = "ws://127.0.0.1:1234";

    window.onload = function() {

        console.log("onload");

        sock = new WebSocket(wsuri);

        sock.onopen = function() {
            console.log("connected to " + wsuri);
        }

        sock.onclose = function(e) {
            console.log("connection closed (" + e.code + ")");
        }

        sock.onmessage = function(e) {
            console.log("message received: " + e.data);
        }
    };

    function send() {
        var msg = document.getElementById('message').value;
        sock.send(msg);
    };
</script>
<h1>WebSocket Echo Test</h1>
<form>
    <p>
        Message: <input id="message" type="text" value="Hello, world!">
    </p>
</form>
<button onclick="send();">Send Message</button>
</body>
</html> 
```

//------------------------------------------

```
package main

import (
    "code.google.com/p/go.net/websocket"
    "fmt"
    "log"
    "net/http"
)

func Echo(ws *websocket.Conn) {
    var err error

    for {
        var reply string

        if err = websocket.Message.Receive(ws, &reply); err != nil {
            fmt.Println("Can't receive")
            break
        }

        fmt.Println("Received back from client: " + reply)

        msg := "Received:  " + reply
        fmt.Println("Sending to client: " + msg)

        if err = websocket.Message.Send(ws, msg); err != nil {
            fmt.Println("Can't send")
            break
        }
    }
}

func main() {
    http.Handle("/", websocket.Handler(Echo))
    if err := http.ListenAndServe(":1234", nil); err != nil {
        log.Fatal("ListenAndServe:", err)
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T17:12:36.323

Chrome 可能会抛出错误 400，因为它认为您正在尝试对 websocket 服务器进行跨域请求，并且认为您不太可能获得许可。

要解决这个问题，您只需从您的`go`-server 提供您的 html 即可。

因此，将您的`sock.go`代码更改为：

```
package main

import (
    "code.google.com/p/go.net/websocket"
    "fmt"
    "log"
    "net/http"
)

func Echo(ws *websocket.Conn) {
    var err error

    for {
        var reply string

        if err = websocket.Message.Receive(ws, &reply); err != nil {
            fmt.Println("Can't receive")
            break
        }

        fmt.Println("Received back from client: " + reply)

        msg := "Received:  " + reply
        fmt.Println("Sending to client: " + msg)

        if err = websocket.Message.Send(ws, msg); err != nil {
            fmt.Println("Can't send")
            break
        }
    }
}

func main() {
    http.Handle("/", http.FileServer(http.Dir("."))) // <-- note this line
    http.Handle("/socket", websocket.Handler(Echo))
    log.Println("serving")
    if err := http.ListenAndServe(":1234", nil); err != nil {
        log.Fatal("ListenAndServe:", err)
    }
} 
```

并将您的`index.html`文件添加到与 sock.go 文件相同的目录中：

```
<html>
<head></head>
<body>
<script type="text/javascript">
    var sock = null;
    var wsuri = "ws://127.0.0.1:1234/socket"; // <-- note new path

    window.onload = function() {

        console.log("onload");

        sock = new WebSocket(wsuri);

        sock.onopen = function() {
            console.log("connected to " + wsuri);
        }

        sock.onclose = function(e) {
            console.log("connection closed (" + e.code + ")");
        }

        sock.onmessage = function(e) {
            console.log("message received: " + e.data);
        }
    };

    function send() {
        var msg = document.getElementById('message').value;
        sock.send(msg);
    };
</script>
<h1>WebSocket Echo Test</h1>
<form>
    <p>
        Message: <input id="message" type="text" value="Hello, world!">
    </p>
</form>
<button onclick="send();">Send Message</button>
</body>
</html> 
```

现在您将能够从 chrome 中进行连接。

# php - 将一维数组合并到有匹配的二维数组中

> ID：15884483
> 
> 赞同：1
> 
> 时间：2013-04-08T16:40:54.350
> 
> 标签：php, arrays, multidimensional-array

我有一个为过去 7 天生成时间戳的数组，我有一个 2d 数组，它为过去 7 天内的某些天提供一个值。我想使用第一个数组来填充每个键下不存在值的天数。

$酒店数据：

```
Array
(
    [49] => Array
        (
            [1365202800] => 2
        )

    [48] => Array
        (
        )

    [50] => Array
        (
            [1364943600] => 4
            [1365375600] => 5
        )
    ) 
```

$d:

```
Array
(
    [1365375600] => 0
    [1365289200] => 0
    [1365202800] => 0
    [1365116400] => 0
    [1365030000] => 0
    [1364943600] => 0
    [1364857200] => 0
    [1364770800] => 0
    [1364688000] => 0
    [1364601600] => 0
) 
```

这是我试图用来合并两个数组的代码：

```
foreach($hotel_data as $key1=>$value1) {
    foreach($hotel_data[$key1] as $datekey=>$ratingval) {
        foreach($d as $key2=>$value2)
        {
            if($datekey !== $key2) {
                $hotel_data[$key1][$key2] = 0;
            }
        }   
            //echo $datekey.'<br/>';
    }
} 
```

这是结果：

```
Array
(
    [49] => Array
        (
            [1365202800] => 2
            [1365375600] => 0
            [1365289200] => 0
            [1365116400] => 0
            [1365030000] => 0
            [1364943600] => 0
            [1364857200] => 0
            [1364770800] => 0
            [1364688000] => 0
            [1364601600] => 0
        )

    [48] => Array
        (
        )

    [50] => Array
        (
            [1364943600] => 0
            [1365375600] => 0
            [1365289200] => 0
            [1365202800] => 0
            [1365116400] => 0
            [1365030000] => 0
            [1364857200] => 0
            [1364770800] => 0
            [1364688000] => 0
            [1364601600] => 0
        )

) 
```

但正如你所看到的，由于某种原因，[49] 的值仍然存在，但 [50] 中的两个值已被 0 替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:47:37.917

原因是您有 2 个值设置为 50。当 $datekey 是第一个值的键时，您将所有其他值设置为 0，包括第二个值。当 $datekey 是第二个值的键时，您将所有其他值设置为 0，包括第一个值。

我认为如果您在设置之前检查 $hotel_data[$key1][$key2] 它应该可以工作：

`if (!isset($hotel_data[$key1][$key2]) { $hotel_data[$key1][$key2]=0;}`

使用它，您实际上可以删除您的 if。

# c# - how to use space inside string

> ID：15884486
> 
> 赞同：0
> 
> 时间：2013-04-08T16:41:12.723
> 
> 标签：c#, asp.net, linq, gridview

i want use space inside string, i use this code:

```
var lst = Article.Select(a => new {a.ID, Name = "     " + a.Name}).ToList();
gv.DataSource = lst.ToList();
gv.DataBind(); 
```

but its not working, with this code display name = " "Name.

and use this code:

```
var lst = Article.Select(a => new {a.ID, Name = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" + a.Name}).ToList();
gv.DataSource = lst.ToList();
gv.DataBind(); 
```

and with this code display name = "     "Name.

please help me

Edit:

```
<asp:GridView ID="gv" runat="server" AutoGenerateColumns="false">
<Columns>
...
<asp:BoundField DataField="Name" HeaderText="Name" ReadOnly="True" ItemStyle-Width="300px" ItemStyle-HorizontalAlign="Right"></asp:BoundField>
...
</asp:GridView> 
```

Edit2:

Answer:

[Link1](https://stackoverflow.com/questions/924058/asp-net-binding-to-gridview-strips-some-space-whitespace-characters)

[Link2](https://stackoverflow.com/questions/12938369/displaying-space-padded-records-in-asp-net-gridview)

Thank you to all.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:43:39.283

这行得通吗？

[string 构造函数](http://msdn.microsoft.com/en-us/library/xsa4321w.aspx)，从字符 a 构造字符串`repeat`：

```
var lst = Article.Select(a => new {a.ID, Name = new string(' ', 8) + a.Name})
                 .ToList(); 
```

**更新 1**

设置属性，`HtmlEncode=False`

```
<asp:BoundField DataField="Name" HtmlEncode="False" /> 
```

`<pre>`并用标签括起来

```
var lst = Article.Select(a => new {a.ID, Name = "<pre>      </pre>" + a.Name})
                 .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:52:28.427

我假设 gv 是一个 asp.net gridview 控件，并且当在浏览器中显示时，您的所有空白都将被合并。

所以，试试这样的

```
<asp:BoundField DataField="Name">
<ItemStyle CssClass="NameCol" />
</asp:BoundField> 
```

在你的 CSS 中

```
..NameCol
{
padding-left:50px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:19:44.753

试试这个示例方式

```
a.Name.ToString().PadLeft(10," ") 
```

*   **必须使用 ToString()**

**编辑**试试这个

```
a.Name.PadLeft(10,' ') 
```

# xslt - XSLT 中的空格 URL

> ID：15884487
> 
> 赞同：0
> 
> 时间：2013-04-08T16:41:16.680
> 
> 标签：xslt

我有一个 xslt 显示没有空格作为字符。

在这种情况下，只显示**%**。

**网址：**

```
http://localhost:8888/tire/details/Bridgestone/ECOPIA%EP001S/Bridgestone,ECOPIA%EP001S,195--65%R15%91H,TL,ECO,0 
```

**XSL：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:x="http://www.w3.org/1999/xhtml" version="1.0">
  <xsl:param name="extractorHost" />
  <xsl:template match="/">
    <links>
      <xsl:apply-templates />
    </links>
  </xsl:template>
  <xsl:template match="//x:form/x:a[@class='arrow-link forward']">
    <xsl:variable name="url" select="translate(@href, ' ', '%20')"/>
    <link href="{concat($extractorHost, $url)}" />
  </xsl:template>
    <xsl:template match="text()" />
</xsl:stylesheet> 
```

正确的 URL 应该是：

```
http://localhost:8888/tire/details/Bridgestone/ECOPIA%20EP001S/Bridgestone,ECOPIA%20EP001S,195--65%20R15%2091H,TL,ECO,0 
```

是不是形成了错误的 XSLT？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:47:04.953

XPath[`translate`](http://www.w3.org/TR/xpath/#function-translate)函数并不像您想象的那样工作。也就是说，它不是一个替换字符串函数。

*它将一个列表中的单个字符*映射到另一个列表中*的相应字符*。

所以这，

```
translate(@href, ' ', '%20') 
```

意思是，把一个空格翻译成`%`。第三个参数的`20`部分被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:52:02.647

看看这里：[XSLT 字符串替换](https://stackoverflow.com/questions/3067113/xslt-string-replace)

您可以使用现有的模板，让您使用“替换”功能。

# scala - Importing members in scala 2.10

> ID：15884488
> 
> 赞同：1
> 
> 时间：2013-04-08T16:41:17.107
> 
> 标签：scala, scala-2.10

In Scala 2.9.x I was used to the following syntax:

```
class B(currencies: Seq[Currency])(implicit c:C)  extends
CSomething(c){
import c._
 // def mystuff = call() // in fact this is c.call()
} 
```

This does not work anymore in Scala 2.10.x, meaning that if I do import c._ , the members of c are not visible inside B. I am therefore forced to do c.call().

Is members importing forbidden in Scala 2.10.x? why?

# wordpress - 使条件语句在 Wordpress 中消失的 query_posts

> ID：15884492
> 
> 赞同：1
> 
> 时间：2013-04-08T16:41:26.397
> 
> 标签：wordpress, conditional-statements

目前我对 wordpress 有一个非常特殊的问题。我是 WordPress 的新手，这也许是我发现它在代码结构方面有点混乱的原因，但我很欣赏我们可以在平台上在线找到的大量信息。

找了好几个论坛，终于找到了一段代码，可以根据首页的具体分类加载帖子：

声明#1

```
<?php if(is_home()) {
query_posts('cat=6,9&&showposts=7');
}
if (have_posts()) : while (have_posts()) : the_post();
get_template_part( 'loop', 'index' );
endwhile; ?> 
```

这可以正常工作，但是发生了一件非常奇怪的事情。在我的 sidebar.php 模板中，我有一个主页的条件代码，它显示了一个包含一些内容的画布。我希望它只显示在主页上，因此这就是我的做法：

声明#2

```
<?php if(is_home()):?>
<div id="portrait_image">
<div class="container">
<canvas id="panel" width="370" height="175"></canvas>
</div>
</div>
<?php endif;?> 
```

这也可以正常工作，除了当我添加`if(is_home)`上面的第一条语句时，似乎`if(is_home)`出于某种原因禁用了第二条语句。我在这个问题上挠了好几个小时，还注意到如果我将第二个语句放在第一个语句之上，它会突然起作用。

但后来我发现了更奇怪的事情。如果我`cat=6,9&&`从语句 #1 中删除，则 #2 有效。如果您在 sidebar.php 模板内的主页中，我看不出调用不同的帖子类别会阻碍条件语句的逻辑，该语句仅调用画布。

有没有人遇到过这个奇怪的问题，我的语法是错误的还是可以指出我解决它的方向？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:48:22.707

我的 sidebar.php 也有类似的问题。

秒前调用`wp_reset_query`函数`if(is_home)`

```
<?php wp_reset_query(); ?> 
```

来自 Codex WordPress：

> wp_reset_query() 将 $wp_query 和全局 post 数据恢复到原始主查询。

我还发现[这篇博客文章](http://webstractions.com/wordpress/undocumented-wordpress-query-function-wp_reset_query/)详细描述了这个功能。

看来作者也有和你类似的问题。

# ruby-on-rails - Mongoid：在 has_many 关系中搜索

> ID：15884494
> 
> 赞同：2
> 
> 时间：2013-04-08T16:41:33.827
> 
> 标签：ruby-on-rails, mongodb, mongoid

我正在使用 mongoid，并具有以下代码：

```
class Users::User
  include Mongoid::Document
  field :username, type: String
  has_many :emails, class_name: "Users::Email"
end

class Users::Email
  include Mongoid::Document

  field :email, type: String

  belongs_to :user, class_name: "Users::User", inverse_of: :emails
end 
```

数据库：

```
#users collection
{
  "_id" : ObjectId("5162de8a359f10cbf700000c"),
  "username" : "bilbo"
}

#emails collection
{
  "_id" : ObjectId("5162de8a359f10cbf700000b"),
  "email" : "bilbo@jenkins.com",
  "user_id" : ObjectId("5162de8a359f10cbf700000c"),
} 
```

我正在尝试使用以下查询进行查找：

```
Users::User.includes(:emails).any_of({username: login},{"emails.email"=> login}).first 
```

我不知道为什么，但是这个查询忽略了电子邮件关系中的搜索。当`login = "bilbo"`=> true，但当`login = "bilbo@jenkins.com"`=> nil

那么，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T10:42:17.727

你需要一个连接来做你想做的事情，而 Mongoid 没有连接。如果您只需要通过用户访问电子邮件，您可以对它们进行非规范化并将它们嵌入到`Users::User`.

```
class Users::User
  include Mongoid::Document
  field :username, type: String
  embeds_many :emails, class_name: "Users::Email"
end

class Users::Email
  include Mongoid::Document

  field :email, type: String

  embedded_in :user, class_name: "Users::User", inverse_of: :emails
end 
```

这样，您可以查询用户的电子邮件：

```
irb(main):011:0> login = "bilbo@jenkins.com"
=> "bilbo@jenkins.com"
irb(main):012:0> Users::User.any_of({username: login},{"emails.email"=> login}).first
=> #<Users::User _id: 5163ee96e44f7b0301000001, username: "bilbo"> 
```

如果`Users::Email`的唯一属性是`email`您可以更进一步，完全省略模型并将字符串存储在数组中：

```
class Users::User
  include Mongoid::Document
  field :username, type: String
  field :emails, type: Array
end 
```

查询变得更加容易：

```
Users::User.any_of({username: login},{"emails"=> login}).first
=> #<Users::User _id: 5163ef95e44f7b6254000001, username: "bilbo", emails: ["bilbo@jenkins.com"]> 
```

# ruby-on-rails - Carrierwave image extensions

> ID：15884497
> 
> 赞同：6
> 
> 时间：2013-04-08T16:41:49.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image, upload, carrierwave

I'm trying to determine whether a remote url is an image. Most url's have .jpg, .png etc...but some images, like google images, have no extension...i.e.

[https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSbK2NSUILnFozlX-oCWQ0r2PS2gHPPF7c8XaxGuJFGe83KGJkhFtlLXU_u](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSbK2NSUILnFozlX-oCWQ0r2PS2gHPPF7c8XaxGuJFGe83KGJkhFtlLXU_u)

I've tried using FastImage to determine whether a url is an image. It works when any URL is fed into it...

How could I ensure that remote urls use FastImage and uploaded files use the whitelist? Here is what have in my uploader. Avatar_remote_url isn't recognized...what do I do in the uploader to just test remote urls and not regular files.

```
 def extension_white_list
    if defined? avatar_remote_url && !FastImage.type(CGI::unescape(avatar_remote_url)).nil?
      # ok to process
    else # regular uploaded file should detect the following extensions
      %w(jpg jpeg gif png)
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:57:25.840

如果您只需要使用这样的 url，您可以向服务器发送 HEAD 请求以获取图像的内容类型。从中您可以获得扩展名

```
require 'net/http'
require 'mime/types'

def get_extension(url)
  uri = URI.parse(url)
  http = Net::HTTP.new(uri.host, uri.port)
  http.use_ssl = true if uri.scheme == 'https'
  request = Net::HTTP::Head.new(uri.request_uri)
  response = http.request(request)
  content_type = response['Content-Type']
  MIME::Types[content_type].first.extensions.first
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T04:15:15.867

我正在使用您提供的代码以及[CarrierWave Wiki 中提供的用于验证远程 URL](https://github.com/jnicklas/carrierwave/wiki/How-to%3a-Validate-the-URL-for-remote-uploads)的一些代码。

您可以在`lib/remote_image_validator.rb`.

```
require 'fastimage'

class RemoteImageValidator < ActiveModel::EachValidator
  def validate_each(object, attribute, value)
    raise(ArgumentError, "A regular expression must be supplied as the :format option of the options hash") unless options[:format].nil? || options[:format].is_a?(Regexp)
    configuration = { :message => "is invalid or not responding", :format => URI::regexp(%w(http https)) }
    configuration.update(options)

    if value =~ configuration[:format]
      begin
        if FastImage.type(CGI::unescape(avatar_remote_url))
          true
        else
          object.errors.add(attribute, configuration[:message]) and false
        end
      rescue
        object.errors.add(attribute, configuration[:message]) and false
      end
    else
      object.errors.add(attribute, configuration[:message]) and false
    end
  end
end 
```

然后在你的模型中

```
class User < ActiveRecord::Base
  validates :avatar_remote_url,
    :remote_image => { 
      :format => /(^$)|(^(http|https):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(([0-9]{1,5})?\/.*)?$)/ix,
      :unless => remote_avatar_url.blank?
    }
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-15T14:42:56.510

我遇到了一个类似的问题，即从原始版本创建不同版本失败，因为 ImageMagick 由于缺少扩展名而无法确定要使用的正确编码器。这是我在 Rails 中应用的一个猴子补丁，它解决了我的问题：

```
module CarrierWave
  module Uploader
    module Download
      class RemoteFile
        def original_filename
          value = File.basename(file.base_uri.path)
          mime_type = Mime::Type.lookup(file.content_type)
          unless File.extname(value).present? || mime_type.blank?
            value = "#{value}.#{mime_type.symbol}"
          end
          value
        end
      end
    end
  end
end 
```

我相信这也将解决您遇到的问题，因为它确保在适当设置内容类型时存在文件扩展名。

更新：

对于这个问题，carrierwave 的 master 分支有一个不同的解决方案，它使用`Content-Disposition`header 来找出文件名。[这是github](https://github.com/carrierwaveuploader/carrierwave/pull/1056)上的相关拉取请求。

# security - 网页文件名约定

> ID：15884504
> 
> 赞同：0
> 
> 时间：2013-04-08T16:42:18.190
> 
> 标签：security, webpage, conventions, administration

我只是在浏览一个网络项目，他们使用了基于项目计划文档的网页文件命名约定。

这让我想知道：网页文件名是否有安全考虑？或者任何其他可能影响网页文件名约定的外部因素？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:57:27.760

网页约定有助于使网页与多平台兼容。在 Unix 大写名称中区分大小写，但在 Windows 平台中，名称不区分大小写。一些非常老的平台在文件名中最多只能有 8 个字母，扩展名只能有 3 个字母。所以使用 8.3 约定小写更安全。网页名称最多 8 个字母，扩展名最多 3 个字母（*.htm、* .asp 等）

# plot - Multiple plots with the same data in gnuplot

> ID：15884505
> 
> 赞同：0
> 
> 时间：2013-04-08T16:42:20.843
> 
> 标签：plot, gnuplot

I want to plot data (data1.txt) that has several columns but I want to use that data only once, so for example:

ApplePrice Shop 1 Shop 2 Shop 3
Jan 10 9 8
Feb 10 10 9
Mar 9 10 10
Apr 8 9 9
May 10 10 10
...
...
etc

I know I can plot it with **plot 'data1.txt' using 1:2, plot 'data1.txt' using 1:3, plot 'data1.txt' using 1:4** and I will get 3 graphs that show the price difference between the shops, but then we have to use/process the data 3 times.

My question is: Can we use the data1.txt only once to get the 3 graphs? Something like plot 'data1.txt' using 1:2, using 1:3, using 1:4? (but that doesn't work)

Any ideas?

Thanks before.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:07:42.557

是的，您可以使用特殊的 datafile `''`，它指的是刚刚绘制的数据。例如，

```
plot 'data.dat' u 1:2, '' u 1:3, '' u 1:4 
```

# bash - 试图在 awk 中创建一个字符串，抱怨除以零

> ID：15884507
> 
> 赞同：0
> 
> 时间：2013-04-08T16:42:24.967
> 
> 标签：bash, unix, awk, terminal

我正在尝试创建一个脚本来自动创建指向特定文件夹下所有文件夹的符号链接，这应该不难做到，但由于某种原因，我的变量在这个单行脚本中传递得非常奇怪。

```
#!/bin/bash
# ----------------------------------
# --------- TotalKrill -------------
# ----------------------------------
# Script to create symlinks to my clouded folder in my home directory by listing all  folders/files in the cloudfolder and then creating symlinks in destfolder
# 
myname=`whoami`
searchfolderdir=/home/$myname/
searchfoldername=ownCloud
destfolder=~/
Target=$searchfolderdir$searchfoldername/

ls -1 $searchfolderdir$searchfoldername | awk {'print ln -fs $Target$0 $destfolder/$0'} #|sh 
```

但我得到一个输出：awk：cmd。line:1: (FILENAME=- FNR=1) fatal: 除零尝试

谁能指出我更好的方法或告诉我如何修复这个脚本？“| sh”被注释掉了，所以我可以在运行之前得到一个正确的行。

在试图让它工作的 ubuntu 12.10 x64 机器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:45:02.633

你需要的是*（至少在语法上）*：

```
awk -v t="$Target" -v d="$desfolder" '{print "ln -fs",t$0,d"/",$0}' 
```

笔记：

*   如果您不想要除法运算符而是文字字符`/`，则需要将其括在双引号中。

*   `awk`字符串需要像字符串一样用双引号括起来`ln -fs`

*   您需要使用该`-v`选项将 shell 变量传递给 awk。

*   你应该总是引用你的变量。

*   封闭块的花括号需要在单引号内。

* * *

添加一些其他修复，例如使用`find`仅返回目录：

```
#!/bin/bash

myname=$(whoami)
dir="/home/$myname/"
folder="myCloud"
destination="~/"
target="${dir}${folder}"

find "${target}" -maxdepth 1 -type d -print | 
awk -v t="$target" -v d="$destination" '{print "ln -fs",t$0"/",d}' 
```

# python - 使用 memory_profiler 和 docopt 的冲突

> ID：15884509
> 
> 赞同：1
> 
> 时间：2013-04-08T16:42:30.973
> 
> 标签：python, profiling

我有一个使用 docopt 的 Python 程序，并且似乎可以很好地解析命令行参数。但是，当我尝试在调用中包含 memory_profiler（使用 -m memory_profiler）时，docopt 无法解析命令并打印使用语句。这是一个示例程序：

```
"""
Usage:
  ids_transform [options]
  ids_transform --block BLOCK_MSG
  ids_transform --unblock
  ids_transform --version

Examples:
    ids_transform.py --block '2013-03-15 IM#123456 database down'
    ids_transform.py -c ../shared/etc/ids_transform.yaml

Options:
  -h --help                 show this help message and exit
  -c CONFIG --config=CONFIG config file
  -d --debug                begin debugging
  --force                   override block file; force run
  --profile                 use cProfile to gather statistics on process
"""

from docopt import docopt

if __name__ == '__main__':
    arguments = docopt(__doc__, version='1.0.0rc2')
    print(arguments) 
```

这是一个成功的调用：

```
$ python ids.py -d --force -c foo.yml
{'--block': False,
 '--config': 'foo.yml',
 '--debug': True,
 '--force': True,
 '--help': False,
 '--profile': False,
 '--unblock': False,
 '--version': False,
 'BLOCK_MSG': None} 
```

这是使用 memory_profiler 时的错误：

```
$ python -m memory_profiler ids.py -d --force -c foo.yml
Usage:
  ids_transform [options]
  ids_transform --block BLOCK_MSG
  ids_transform --unblock
  ids_transform --version 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:49:54.437

似乎 memory_profiler 并没有将自己从 sys.argv 中剥离出来，所以（我猜）黑客会自己做：

```
if sys.argv[0].endswith('memory_profiler.py'):
    del sys.argv[0] 
```

# java - Pause/Resume java applet

> ID：15884511
> 
> 赞同：0
> 
> 时间：2013-04-08T16:42:32.517
> 
> 标签：java, applet

two balls from left and bottom colliding with each other as they meet at a certain coordinate. I have already did what I searched on the internet and it worked perfectly, but I need a start, pause and resume buttons. Look at what I finished :

```
import java.applet.Applet;
import java.awt.Button;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class train extends Applet implements Runnable,ActionListener {
    private volatile boolean runs = true;
    private Image i;
    private Graphics doubleG;
    Ball b, b2;
    Button x,y,z;
    Thread thread = new Thread(this);
    @Override
        public void init(){
        setSize(800, 600);
        x = new Button("Action!"); 
        y = new Button("Stop");
        z = new Button("Resume!");
        add(x);
        add(y);
        add(z);

        y.addActionListener(new ActionListener() {

            @SuppressWarnings("deprecation")
            public void actionPerformed(ActionEvent e)
            {

                runs = false;
                repaint();
            }
        }); 

        z.addActionListener(new ActionListener() {

            @SuppressWarnings("deprecation")
            public void actionPerformed(ActionEvent e)
            {

                try {

                    runs = true;
                    b.update(this);
                    repaint();
                } catch (InterruptedException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();

                }

                    b2.update2(this);
                   repaint();
            }
        }); 

    }

    @Override
    public void start(){
        x.addActionListener(this);
        b = new Ball(100, 100);
        b2 = new Ball(500, 500);
        }
    @Override

    public void run(){

        while(runs){
            b.update(this);
            b2.update2(this);   

            repaint();
            try {
                Thread.sleep(17);
            } catch (InterruptedException e) {
                //TODO Auto-generated catch block
            //  e.printStackTrace();
            }
        }
    }

    @Override
    public void stop(){

    }
    @Override
    public void destroy(){

    }
    @Override
    public void update(Graphics g) {
        // TODO Auto-generated method stub
        if(i == null){
            i = createImage(this.getSize().width, this.getSize().height);
        doubleG = i.getGraphics();
        }
        doubleG.setColor(getBackground());  
        doubleG.fillRect(0, 0, this.getSize().width, this.getSize().height);

        doubleG.setColor(getForeground());
        paint(doubleG);

        g.drawImage(i, 0, 0, this);

        }

    @Override
    public void paint(Graphics g){
        b.paint(g);
        b2.paint(g);
    }

    public void actionPerformed(ActionEvent e) {
        thread.start();

     }

} 
```

for the main train.class and :

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Rectangle;
import java.awt.event.ActionListener;

public class Ball {

    private int x;
    private int y;
    private double dx = 7.9;
    private double dy = 7;
    private int radius = 20;

    public Ball() {
        // TODO Auto-generated constructor stub
    }

    public Ball(int i, int j) {
        // TODO Auto-generated constructor stub
        x = i;
        y = j;

    }
    public void update(train sp){
                x += dx;

               //   if(x + dx > sp.getSize().width - 300){
        //      dx=0;
        //  }
                }

    public void paint(Graphics g){
        g.setColor(Color.GREEN);

        g.fillOval(x-radius, y-radius, radius * 2, radius * 2);

    }
    public void update2(train sp){
        y -= dy;
        if(y - dy < sp.getSize().height - 470){

            x += dx;
            y -= dy;

        //  if(y < sp.getSize().height - 470){
        //      y = sp.getSize().height -470;
        //      dy *= energyloss;
        //      dy = -dy;
        //  }else{

        //      dy +=  gravity * dt;
        //      y += dy*dt + .5 * gravity * dt * dt;
            }
        //}
}
    public void update(ActionListener actionListener) throws InterruptedException {

        x += dx;
                }

    public void update2(ActionListener actionListener) {

    train tr = new train();

    if(y - dy < tr.getSize().height - 470){
        x += dx;
        y -= dy;
        }else{
        y-=dy;

        }

    }
} 
```

What I want to do is I want to make a resume button. I already finished the start and pause, but when I click the resume button, it just moves 1 coordinate at a time. I need it to just like Start , pause and play normally. Please help. T_T

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:54:10.967

一个简单的解决方法是不要让“运行”控制循环，而只是确定是否调用了更新方法。这样你就不会打破循环并且必须重新启动。

# class - UML中的类和分类器有什么区别

> ID：15884513
> 
> 赞同：5
> 
> 时间：2013-04-08T16:42:43.350
> 
> 标签：class, uml, specifications

当我通读`UML specification`有两个词时，我不确定它们是否相同，这些词是：

类和分类器

有什么区别

*   类和分类器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:32:36.067

术语*分类*器比*类*更通用。分类器可以包括一个接口，甚至一个用例。

在实践中，我只在某些情况下遇到过术语*分类器*，尤其是在使用诸如 MagicDraw 之类的工具时。

您可以在此处阅读更多内容：[UML 中的分类器是什么意思？](http://wiki.answers.com/Q/What_do_you_mean_by_classifiers_in_unified_modeling_language)

# c# - SAML 和身份提供者 (IdP) 的艰难时期

> ID：15884516
> 
> 赞同：0
> 
> 时间：2013-04-08T16:42:47.720
> 
> 标签：c#, xml, single-sign-on, wif, saml

我不确定如何陈述这个问题，因为我不知道到底是什么问题。

有一家第三方公司充当 SSO 结构的 SP。

他们几乎没有关于设置 IdP 以使 SSO 与他们合作的文档，而且我以前从未做过这样的事情。

我设置了一个证书，用于为 SAML 生成数字签名，并将相同的密钥上传到该公司的网站，以便他们了解我的 IdP 的响应。

但是，当我向他们发送 SAML 响应时，我收到一个通用错误，指出 SSO 响应无效。查看他们的文档，此错误的描述是：

> 我们无法验证 SAML 响应。这可能是由无效的数字签名引起的，可能是由于 IdP 和 SP 之间的公钥/私钥不匹配。它也可能由响应中指定的无效受众或有效时间窗口（NotBefore 和 NotOnOrAfter）引起。

我更关心的是“无效的数字签名”，因为看我发送的 SAML 响应，观众是他们要求的，时间窗口很好，我确定我是使用相同的密钥生成 SAML 以及我发送给他们的那个。

我可能在很多事情上都错了，但我的问题是，我如何确保我的数字签名有效并且格式和格式正确？

如果您是 SAML 专家，请查看我的 SAML 是否合理：

```
Tried to post SAML here, didn't work, but if you think that looking at it would be useful let me know. 
```

我正在使用 WIF 生成 SAML，我想知道摘要和签名算法是否会影响此错误。

好吧，欢迎任何帮助和想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:59:27.487

你不应该使用SP的公钥来加密发送给SP的信息吗？

# mongodb - 关闭 mongos 进行升级

> ID：15884521
> 
> 赞同：5
> 
> 时间：2013-04-08T16:43:07.963
> 
> 标签：mongodb

我正在升级一个 mongo 分片集群，并且是替换 mongos 进程的第一步。我可以杀死这个进程还是有更安全的方法在替换它之前关闭它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-27T04:59:00.020

这就是答案。但可能是你误会了。您不能从命令行关闭 mongos，但您必须登录到 shell。这是我自己尝试的结果：

```
$ mongo --port 27077 (please replace with your own port on mongos instance)

**mongos**> db.shutdownServer({timeoutSecs:30})
shutdown command only works with the admin database; try 'use admin'
mongos> use admin
switched to db admin
mongos> db.shutdownServer({timeoutSecs:30})
2015-02-27T12:53:54.408+0800 DBClientCursor::init call() failed
**server should be down...**
2015-02-27T12:53:54.410+0800 trying reconnect to 127.0.0.1:27077 (127.0.0.1) failed
2015-02-27T12:53:54.410+0800 warning: Failed to connect to 127.0.0.1:27077, reason: errno:111 Connection refused
2015-02-27T12:53:54.410+0800 reconnect 127.0.0.1:27077 (127.0.0.1) failed failed couldn't connect to server 127.0.0.1:27077 (127.0.0.1), connection attempt failed
2015-02-27T12:53:54.413+0800 trying reconnect to 127.0.0.1:27077 (127.0.0.1) failed
2015-02-27T12:53:54.413+0800 warning: Failed to connect to 127.0.0.1:27077, reason: errno:111 Connection refused
2015-02-27T12:53:54.413+0800 reconnect 127.0.0.1:27077 (127.0.0.1) failed failed couldn't connect to server 127.0.0.1:27077 (127.0.0.1), connection attempt failed
> 
```

尝试运行“top”或“htop”以显示计算机上运行的所有进程。您将看到“mongos”进程已经消失。阅读日志文件。这是我日志的最后两行：

```
2015-02-27T12:53:54.406+0800 [conn1] terminating, shutdown command received
2015-02-27T12:53:54.406+0800 [conn1] dbexit: shutdown called rc:0 shutdown called 
```

这是我的测试脚本的链接：

[https://github.com/babycaseny/QuickStart/blob/master/StartShard.sh](https://github.com/babycaseny/QuickStart/blob/master/StartShard.sh)

请注意，您必须将 mongod/mongos 命令中的“localhost”替换为您计算机的主机名，否则您将无法配置分片。

另请参阅此：

[https://groups.google.com/forum/#!topic/mongodb-user/TQLlRI6HG1M](https://groups.google.com/forum/#!topic/mongodb-user/TQLlRI6HG1M)

如果您需要命令行来完成这项工作，这里有一个：

mongo 管理员 --port 端口号 --eval "db.shutdownServer()"

请注意，您必须在 localhost 中运行该命令。

# raspberry-pi - rpi v/s carambola --- 根文件系统大小

> ID：15884524
> 
> 赞同：1
> 
> 时间：2013-04-08T16:43:21.110
> 
> 标签：raspberry-pi, openwrt

我正在为树莓派使用以下发行版。

[http://www.raspberrypi.org/downloads](http://www.raspberrypi.org/downloads)
[http://downloads.raspberrypi.org/images/raspbian/2013-02-09-wheezy-raspbian/2013-02-09-wheezy-raspbian.zip](http://downloads.raspberrypi.org/images/raspbian/2013-02-09-wheezy-raspbian/2013-02-09-wheezy-raspbian.zip)

FOR rpi 建议使用>2GB 的卡。

此外，当我将它安装在我的存储卡上时，根文件系统的大小约为 1.4GB。**但是你不认为它对于EMBEDDED SYSTEM**中的根文件系统来说太大了。

**RPI**是否可以使用小尺寸的根文件系统制作 linux 发行版？

因为大多数嵌入式系统没有这么多内存。像**杨桃**一样有**8mb 闪存和 32 MB RAM**。
[http://8devices.com/carambola](http://8devices.com/carambola)

在这种情况下，carambola 根文件系统 (OPEN wrt) 将适合 8MB 闪存。这怎么可能 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:56:15.873

Raspbian 是一个完整的通用操作系统，能够运行 X windows、创建开发环境、看电影、玩游戏等。

它还包括对您可能希望通过 USB 连接的许多设备的支持，例如网络设备、网络摄像头、键盘、鼠标等。

许多嵌入式系统是专门构建的，没有添加/删除设备的选项，也没有运行任意程序的选项。OpenWRT 是一个在典型路由器硬件上运行的路由平台，因此可以小得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T11:46:57.860

您可以为此查看[Buildroot](http://buildroot.uclibc.org/)，它也是 OpenWrt 的基础（OpenWrt 用于为链接的 Carambola 创建 rootfs）。Buildroot 还支持 raspberry pi，因此您只需安装几个软件包即可轻松创建一个非常小的 rootfs。

# python - 将python列表复制到numpy数组时，如何防止TypeError：列表索引必须是整数，而不是元组？

> ID：15884527
> 
> 赞同：67
> 
> 时间：2013-04-08T16:43:33.010
> 
> 标签：python, numpy

我正在尝试使用来自另一个名为 mean_data 的数组中的数据创建 3 个 numpy 数组/列表，如下所示：

```
---> 39 R = np.array(mean_data[:,0])
     40 P = np.array(mean_data[:,1])
     41 Z = np.array(mean_data[:,2]) 
```

当我尝试运行程序时，出现错误：

```
TypeError: list indices must be integers, not tuple 
```

mean_data 列表看起来像这个样本......

```
[6.0, 315.0, 4.8123788544375692e-06],
[6.5, 0.0, 2.259217450023793e-06],
[6.5, 45.0, 9.2823565008402673e-06],
[6.5, 90.0, 8.309270169336028e-06],
[6.5, 135.0, 6.4709418114245381e-05],
[6.5, 180.0, 1.7227922423558414e-05],
[6.5, 225.0, 1.2308522579848724e-05],
[6.5, 270.0, 2.6905672894824344e-05],
[6.5, 315.0, 2.2727114437176048e-05]] 
```

我不知道如何防止此错误，我尝试将 mean_data 创建为 np.array 并使用 np.append 为其添加值，但这也不能解决问题。

这是回溯（之前使用的是 ipython）

```
Traceback (most recent call last):
  File "polarplot.py", line 36, in <module>
    R = np.array(mean_data[:,0])
TypeError: list indices must be integers, not tuple 
```

我尝试创建数组的另一种方法是：

```
mean_data = np.array([])

for ur, ua in it.product(uradius, uangle):
    samepoints = (data[:,0]==ur) & (data[:,1]==ua)
    if samepoints.sum() > 1:  # check if there is more than one match
        np.append(mean_data[ur, ua, np.mean(data[samepoints,-1])])
    elif samepoints.sum() == 1:
        np.append(mean_data, [ur, ua, data[samepoints,-1]]) 
```

对此的追溯是：

```
IndexError                                Traceback (most recent call last)
<ipython-input-3-5268bc25e75e> in <module>()
     31     samepoints = (data[:,0]==ur) & (data[:,1]==ua)
     32     if samepoints.sum() > 1:  # check if there is more than one match
---> 33         np.append(mean_data[ur, ua, np.mean(data[samepoints,-1])])
     34     elif samepoints.sum() == 1:
     35         np.append(mean_data, [ur, ua, data[samepoints,-1]])

IndexError: invalid index 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-08T17:03:51.763

该变量`mean_data`是一个嵌套列表，在 Python 中访问嵌套列表不能通过多维切片来完成，即：`mean_data[1,2]`，而是写`mean_data[1][2]`.

这是因为`mean_data[2]`是一个列表。进一步的索引是递归完成的 - 因为`mean_data[2]`是一个列表，所以是该列表`mean_data[2][0]`的第一个索引。

此外，`mean_data[:][0]`由于`mean_data[:]`返回`mean_data`.

解决方法是替换数组，或者导入原始数据，如下：

```
mean_data = np.array(mean_data) 
```

numpy 数组（类似于 MATLAB 数组，与嵌套列表不同）支持使用元组进行多维切片。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-08T20:06:32.547

您可能不需要制作列表并附加它们来制作您的数组。您可以一次完成所有操作，这样更快，因为您可以使用 numpy 来执行循环，而不是自己在纯 python 中执行循环。

正如其他人所说，要回答您的问题，您不能像以前那样访问具有两个索引的嵌套列表。如果您`mean_data`在尝试切片之前转换为数组，则可以：

```
R = np.array(mean_data)[:,0] 
```

代替

```
R = np.array(mean_data[:,0]) 
```

但是，假设 mean_data 有一个 shape `nx3`，而不是

```
R = np.array(mean_data)[:,0]
P = np.array(mean_data)[:,1]
Z = np.array(mean_data)[:,2] 
```

你可以简单地做

```
A = np.array(mean_data).mean(axis=0) 
```

在 th 轴上取平均值`0`并返回一个长度`n`数组

但就我最初的观点而言，我将编造一些数据来尝试说明如何在不一次构建任何列表的情况下做到这一点：

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-08T16:57:58.263

```
import numpy as np

mean_data = np.array([
[6.0, 315.0, 4.8123788544375692e-06],
[6.5, 0.0, 2.259217450023793e-06],
[6.5, 45.0, 9.2823565008402673e-06],
[6.5, 90.0, 8.309270169336028e-06],
[6.5, 135.0, 6.4709418114245381e-05],
[6.5, 180.0, 1.7227922423558414e-05],
[6.5, 225.0, 1.2308522579848724e-05],
[6.5, 270.0, 2.6905672894824344e-05],
[6.5, 315.0, 2.2727114437176048e-05]])

R = mean_data[:,0]
print R
print R.shape 
```

编辑

出现错误的原因是与要添加的值`invalid index`之间缺少逗号。`mean_data`

此外， np.append 返回数组的副本，并且不会更改原始数组。从文档中：

> 返回：追加：ndarray
> 
> 带有附加到轴的值的 arr 副本。请注意，追加不会就地发生：分配并填充一个新数组。如果axis为None，则out是一个扁平数组。

因此，您必须将`np.append`结果分配给一个数组（我认为可能是`mean_data`它本身），**并且**，由于您不想要一个展平的数组，您还必须指定要附加的轴。

考虑到这一点，我认为您可以尝试类似

```
mean_data = np.append(mean_data, [[ur, ua, np.mean(data[samepoints,-1])]], axis=0) 
```

看看 doubled`[[`和`]]`: 我认为它们是必要的，因为两个数组必须具有相同的形状。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T16:54:52.160

np.append 需要将数组作为第一个参数，将要附加的列表作为第二个参数：

```
mean_data = np.append(mean_data, [ur, ua, np.mean(data[samepoints,-1])]) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-21T17:16:00.590

如果有人遇到这个问题并且没有完成`list[index, sub-index]`，那么您可能会遇到问题，因为您在数组数组中的两个数组之间缺少逗号（它发生在我身上）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-19T07:52:03.397

说真的，这花了我很多宝贵的时间，但没有找到解决方案。基本上，如果您从 sql 获取数据，那么您正在转换，那么您可以按照以下步骤操作。

```
rows = cursor.fetchall()---- only tried on single column
dataset=[]
for x in rows:
    dataset.append(float(x[0])) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-12T17:08:14.393

试试这个 ：

```
R = np.array(mean_data[:][0])
P = np.array(mean_data[:][1])
Z = np.array(mean_data[:][2]) 
```

# ruby-on-rails - PG 连接超时错误

> ID：15884539
> 
> 赞同：0
> 
> 时间：2013-04-08T16:44:09.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, ruby-on-rails-3.1

我的应用程序中经常出现 Pg 连接超时错误。我尝试通过升级系统内存来修复它，还更新了 pg gem，但问题仍然存在。任何人的帮助将不胜感激。

> (ActiveRecord::StatementInvalid) "PGError: 服务器意外关闭连接\n\t这可能意味着服务器在处理请求之前或期间异常终止\n\t。\n: BEGIN"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:05:16.387

客户端和服务器都认为对方意外消失了。这表明您遇到了网络问题。查看客户端和服务器之间的网络：

*   NAT 路由器或连接跟踪状态防火墙，具有短寿命或小连接表；
*   电缆、WiFi 等的物理连接问题
*   有故障的交换机、集线器和路由器
*   基于错误软件主机的防火墙
*   ... ETC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-07T04:41:41.733

对于它的价值，最简单的解决方案`ActiveRecord::Base.connection.reconnect!`是重新建立连接后。

# mysql - 针对所有其他颜色生成颜色列表

> ID：15884541
> 
> 赞同：1
> 
> 时间：2013-04-08T16:44:16.653
> 
> 标签：mysql, sql

正如标题所暗示的那样，我需要一些指导。目前我所拥有的相当接近，只是每种颜色中的一种在重复自己，我似乎无法理解它。

这是我的桌子：

```
 CREATE TABLE Colors
   (c_ID VARCHAR2(3) NOT NULL,
    c_NAME VARCHAR2(11));

  INSERT INTO Colors VALUES
    ('T01','RED');
  INSERT INTO Colors VALUES
    ('T02','BLUE');
  INSERT INTO Colors VALUES
    ('T03','BLACK');
  INSERT INTO Colors VALUES
    ('T04','YELLOW');
  INSERT INTO Colors VALUES
    ('T05','ORANGE'); 
```

我使用的查询：

```
 select distinct a.c_name as "HOME", s.c_name as "AWAY"
 from colors a, colors s
 order by a.c_name; 
```

结果如下：

```
 Black     Black
 Black     Blue
 Black     Orange
 Black     Red
 Black     Yellow 
```

每种颜色都会发生这种情况，但正如您所见，总会有一种情况，每种颜色都会对自己重复。我怎样才能在不删除的情况下摆脱它？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:46:24.807

您可以像这样更改您的查询：

```
select distinct a.t_name as "HOME", s.t_name as "AWAY"
from teams a, teams s
where a.t_name <> s.t_name -- or this if you need to check on id instead a.t_id <> s.t_id
order by a.t_name; 
```

# perl - Perl：清除嵌套哈希中的值

> ID：15884543
> 
> 赞同：1
> 
> 时间：2013-04-08T16:44:34.397
> 
> 标签：perl, hash, nested

如果我将哈希引用定义为：

```
my %hash1=(
    "a" => 1,
    "b" => 2,
    "c" => {
               "d" => 4,
               "e" => 5
           }
    );

my $r_hash1 = \%hash1; 
```

将使用：

```
$r_hash1->{c}=(); 
```

清除 %hash1{c} 中的键以供重用是干净的吗？

如果是这样，我也想知道我是否有：

```
my %hash1=(
    "a" => 1,
    "b" => 2
);

my %hash2=(
    "d" => 4,
    "e" => 5
);

my $r_hash1 = \%hash1;
my $r_hash2 = \%hash2;

$r_hash1->{"c"} = $r_hash2; 
```

是否使用：

```
$r_hash1->{c}=(); 
```

将释放 %hash2 使用的内存以供重用，因为它肯定必须在哈希上下文中使用：

```
%$r_hash1->{c} 
```

但这会在哈希上下文中查看 $r_hash1，而不是 $r_hash1->{c} 的内容。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T16:59:21.443

如果要清空嵌套哈希（但仍然存在哈希），则需要先取消引用它：

```
%{ $r_hash1->{c} } = ( ); 
```

或者，您可以在其位置分配一个空的 hashref：

```
$r_hash1->{c} = { }; 
```

在您的第二个示例中，如果您设置`$r_hash1->{c} = $r_hash2`，然后使用 清除它，则将清除其中*的*`%{ $r_hash1->{c} } = ( )`内容。这是因为您正在取消引用，它是 的副本，它是对 的引用。`%hash2` *`$r_hash1->{c}``$r_hash2``%hash2`*

 *这是一个演示结果的简单程序：

```
perl -MData::Dumper -E '%h1 = ( a => 1, b => 2 ); %h2 = ( d => 4, e => 5 ); $h1{c} = \%h2; say Dumper \%h1; %{ $h1{c} } = ( ); say Dumper \%h1; say Dumper \%h2'
$VAR1 = {
          'c' => {
                   'e' => 5,
                   'd' => 4
                 },
          'a' => 1,
          'b' => 2
        };

$VAR1 = {
          'c' => {},
          'a' => 1,
          'b' => 2
        };

$VAR1 = {}; 
```

这有点缩写（我没有打扰中间命名引用。）第一个转储显示`%h1`它对`%h2`. `%h1`在取消引用引用并将其清除后显示第二个转储。第三个转储显示`%h2`清除后的原始数据。

另一方面，如果您使用`$h1{c} = { }`，原始`%h2`文件将不受影响，因为您只是替换 的值`$h1{c}`。它最初是对`%h2`; 现在它是对新匿名哈希的引用。*

# grails - Grails选择整数值和字符串值

> ID：15884544
> 
> 赞同：0
> 
> 时间：2013-04-08T16:44:41.737
> 
> 标签：grails, select, integer

我有两个域类...

第一的：

```
class Employee {
    String vorname
    String nachname
    Department department
} 
```

第二：

```
class Department {
    Integer number
    String description
} 
```

...我想在 Grails 中创建一个下拉列表。

我的代码如下所示：

```
 <g:select id="department" name="department.description" from="${workloadreport.Department.list()}" optionValue="bezeichnung" optionKey="id" required=""
          value="${employeeInstance.department?.id}" class="many-to-one" noSelection="${['null':'Please select...']}"/> 
```

但我想将数字+描述显示为下拉列表中的一个值。

像：

*   价值 1：30 一般服务
*   价值 2：40 项产品服务
*   价值 3 : 50 其他服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:13:09.533

我假设您希望生成的 html 对于选项元素看起来像这样...

```
<option value="1">1 : 30 General Services</option> 
```

这应该会产生它（可能有错字，我没有测试过）：

```
<g:select id="department" name="department.description"
   from="${workloadreport.Department.list()}" optionKey="id" required=""
   value="${employeeInstance.department?.id}" class="many-to-one"
   noSelection="${['null':'Please select...']}"
   optionValue="${{it.id + ' : ' + it.number + ' ' + it.description}}" 
/> 
```

** 请注意，您的**from**属性中可能有错字。如果您只想生成所有部门的选项列表，您的 from 应该如下所示

```
<g:select ... from="${Department.list()}" .../> 
```

# c - 使用 MPI_Reduce 的等级 ID 错误

> ID：15884547
> 
> 赞同：1
> 
> 时间：2013-04-08T16:44:58.837
> 
> 标签：c, mpi

好吧，我正在使用 MPI + C 做一些功课。事实上，我只是从 Peter Pacheco 的书《并行编程概论》中编写了一段编程作业 3.2 的小代码。该代码似乎适用于 3 或 5 个进程......但是当我尝试超过 6 个进程时，程序会中断。

我正在使用一种非常“糟糕”的调试方法，即放置一些 printfs 来跟踪问题发生的位置。使用这种“方法”，我发现在 MPI_Reduce 之后，发生了一些奇怪的行为，我的程序对等级 ID 感到困惑，特别是等级 0 消失了，并且出现了一个非常大（和错误）的等级。

我的代码在下面，在它之后，我发布了 3 和 9 个进程的输出......我正在运行

```
mpiexec -n X ./name_of_program 
```

其中 X 是进程数。

我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <mpi.h>

int main(void)
{
MPI_Init(NULL,NULL);

long long int local_toss=0, local_num_tosses=-1, local_tosses_in_circle=0, global_tosses_in_circle=0;

double local_x=0.0,local_y=0.0,pi_estimate=0.0;

int comm_sz, my_rank;

MPI_Comm_size(MPI_COMM_WORLD, &comm_sz);
MPI_Comm_rank(MPI_COMM_WORLD, &my_rank);         

if (my_rank == 0) {
    printf("\nEnter the number of dart tosses: ");
    fflush(stdout);
    scanf("%lld",&local_num_tosses);
    fflush(stdout);
}

//
MPI_Barrier(MPI_COMM_WORLD);

    MPI_Bcast( &local_num_tosses, 1, MPI_LONG_LONG_INT, 0, MPI_COMM_WORLD);

    MPI_Barrier(MPI_COMM_WORLD);

    srand( rand() ); //tried to improve randomness here!

for (local_toss=0;local_toss<local_num_tosses;local_toss++) {
    local_x = (-1) + (double)rand() / (RAND_MAX / 2);
    local_y = (-1) + (double)rand() / (RAND_MAX / 2);

    if ( (local_x*local_x + local_y*local_y) <= 1 ) {local_tosses_in_circle++;}
}

MPI_Barrier(MPI_COMM_WORLD);

MPI_Reduce
(
    &local_tosses_in_circle,
    &global_tosses_in_circle,
    comm_sz,
    MPI_LONG_LONG_INT,
    MPI_SUM,
    0,
    MPI_COMM_WORLD
);  

printf("\n\nDEBUG: myrank = %d, comm_size = %d",my_rank,comm_sz);
fflush(stdout);

    MPI_Barrier(MPI_COMM_WORLD);

if (my_rank == 0) {
    pi_estimate = ( (double)(4*global_tosses_in_circle) )/( (double) comm_sz*local_num_tosses );
    printf("\nPi estimate = %1.5lf \n",pi_estimate);
    fflush(stdout);
}

MPI_Finalize();
    return 0;
} 
```

现在，2 个输出：

(i) 对于 3 个过程：

```
Enter the number of dart tosses: 1000000

DEBUG: myrank = 0, comm_size = 3

DEBUG: myrank = 1, comm_size = 3

DEBUG: myrank = 2, comm_size = 3
Pi estimate = 3.14296 
```

(ii) 对于 9 个进程：（注意 \n 输出很奇怪，有时它不起作用）

```
 Enter the number of dart tosses: 10000000

        DEBUG: myrank = 1, comm_size = 9
        DEBUG: myrank = 7, comm_size = 9

        DEBUG: myrank = 3, comm_size = 9
        DEBUG: myrank = 2, comm_size = 9DEBUG: myrank = 5, comm_size = 9
        DEBUG: myrank = 8, comm_size = 9

        DEBUG: myrank = 6, comm_size = 9

        DEBUG: myrank = 4, comm_size = 9DEBUG: myrank = -3532887, comm_size = 141598939[PC:06511] *** Process received signal ***
        [PC:06511] Signal: Segmentation fault (11)
        [PC:06511] Signal code:  (128)
        [PC:06511] Failing at address: (nil)
        --------------------------------------------------------------------------
        mpiexec noticed that process rank 0 with PID 6511 on node PC exited on signal 11 (Segmentation fault).
        -------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:18:38.360

当[MPI_Reduce](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Reduce.html)的第三个参数是时，它对我有用`1`，而不是`comm_size`（因为每个缓冲区中的元素数是 1）：

```
MPI_Reduce
(
    &local_tosses_in_circle,
    &global_tosses_in_circle,
    1, //instead of comm_size
    MPI_LONG_LONG_INT,
    MPI_SUM,
    0,
    MPI_COMM_WORLD
); 
```

当您增加进程数时，会`MPI_Reduce`覆盖函数堆栈中的其他内容，例如`my_rank`and `comm_sz`，并破坏数据。

另外，我认为您不需要任何`MPI_Barrier`陈述。`MPI_Reduce`并且`MPI_Bcast`无论如何都在阻止。

我不会担心换行符。它们并没有丢失，而是在输出中的其他位置，可能是因为许多进程同时写入标准输出。

顺便说一句：使用`printf`'s 进行调试非常常见。

# entity-framework - Breeze 和具有导航属性的实体数据模型引发错误

> ID：15884549
> 
> 赞同：2
> 
> 时间：2013-04-08T16:45:04.903
> 
> 标签：entity-framework, breeze

使用 Breeze 和使用实体数据模型设计器创建的简单一对多关系会给我以下错误：

> TypeError {stack: "TypeError: Cannot read property '$type' of null↵ …//localhost:55494/Scripts/jquery-1.9.1.js:1083:7)"，查询：null}

我发现 Breeze 在使用导航属性并且该属性为 Null 时会引发该错误。我在这里想念什么？

我得到以下关系：

![设计师](https://i.stack.imgur.com/NGcwL.png)

控制器代码：

```
private readonly EFContextProvider<ModelContainer> _contextProvider = new EFContextProvider<ModelContainer>();

[HttpGet]
public string Metadata()
{
    return _contextProvider.Metadata();
}

[HttpGet]
public IQueryable<Appointment> Appointments()
{
    return _contextProvider.Context.Appointments;
} 
```

使用以下查询：

```
var query = breeze.EntityQuery.from('Appointments'); 
```

这是原始 JSON 输出：

```
[{"Id":1,"Date":"2013-01-01T00:00:00","Comments":"Testing","Car":null}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:31:40.577

您的 ApiController 上有 [BreezeController] 属性吗？

# asp.net-mvc - 在 ASP.NET MVC 中查看模型及其对模型绑定的影响？

> ID：15884551
> 
> 赞同：1
> 
> 时间：2013-04-08T16:45:20.117
> 
> 标签：asp.net-mvc, asp.net-mvc-3, viewmodel, model-binding

我相信 ViewModel 是个好东西。我一直在尝试将我的应用程序的一部分转换为使用它们。但是我可能遇到了副作用，那就是它们对模型绑定的影响，特别是 Radiobutton 助手的默认“检查”行为：

```
@Html.RadioButton("Value",Item.Value) 
```

如果默认模型具有“值”属性，则上述方法有效。但是，如果我使用 ViewModel，则 Value 可能会下降一级，即：

没有虚拟机

```
Model.Value 
```

使用虚拟机：

```
Model.Content.Value;
MyContent = Model.Content.Value; 
```

这不再有效：

```
@Html.RadioButton("Value",Item.Value) 
```

也许我需要调整 RB 助手？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T16:48:11.647

尝试使用：

```
@Html.RadioButtonFor(m => m.Content.Value) 
```

# php - PHP Regex - 查找除单词之外的所有符号

> ID：15884555
> 
> 赞同：0
> 
> 时间：2013-04-08T16:45:35.320
> 
> 标签：php, regex

我在 PHP 上使用正则表达式。我的文本类似于下一个（我已经简化了很多）：

```
<table id="different_every_time" …&gt;<a href="url" …&gt;Link</a>
… Intro text<table> … This is place for menu</table>
<table>Content</table></table> 
```

我需要抓取第一个标签和第二个标签之间的文本所以结果应该是：

```
id="different_every_time" …&gt;<a href="url" …&gt;Link</a>… Intro text 
```

我尝试了下一个模式：

```
(?<=<table)(.+)(?=<table) 
```

但它会返回第一个`<table>`和最后一个之间的所有内容`<table>`。我需要将 (.+) 替换为（除 之外的所有内容）。可能有更简单的解决方案。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:47:33.430

更改`(.+)`为`(.+?)`使其*不贪心*。它将尝试尽可能少地匹配，而不是尽可能多地匹配，即：*greedy*。

# java - 一个通用的可调用对象

> ID：15884556
> 
> 赞同：0
> 
> 时间：2013-04-08T16:45:37.927
> 
> 标签：java, generics, callable

我正在尝试实现一个通用的可调用来委派不同类型帐户的修改。代码如下所示：

```
import java.util.concurrent.Callable;
class Task<T extends BaseAccount> extends Callable<T extends BaseAccount> {

  private final T t;

  public Task(T t) {
    this.t = t;
  }

  @Override
  public T call() throws Exception {
    t.increment();
    return t;
  }

} 
```

BaseAccount 只是一个抽象类，如下所示：

```
abstract class BaseAccount {
  abstract public void increment();
} 
```

但显然我没有到达那里，因为我看到了很多与泛型相关的编译错误。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T16:48:35.553

首先，在一个类中，您不扩展接口，而是实现它。其次，您不需要在零件中重复`T`延伸。只需这样做：`BaseAccount``Callable`

```
class task<T extends BaseAccount> implements Callable<T> 
```

**编辑**

`<T extends BaseAccount>`类声明中的是`task`您声明泛型类型参数的地方`T`，因此此处适合使用边界限制。But`implements Callable<T>`只是对类型参数的引用`T`，就像您使用的类中的其他任何地方一样`T`——实例变量声明、构造函数和方法。

此外，java 类名通常以大写字母开头，例如`Task`，但这对于解决编译器错误并不重要。

# java - j2objc - 解析对象类型

> ID：15884558
> 
> 赞同：5
> 
> 时间：2013-04-08T16:45:46.627
> 
> 标签：java, android, objective-c

我已经安装了 j2objc 并试图将我的包转换为objective-c。我的类相互引用，还有 JSONObject 和 JSONArray。我收到一堆以下错误

> *类名*无法解析为类型

我如何确保这些参考得到解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-26T14:57:30.500

如果您没有将 j2objc 定义为系统变量，这就是我所做的：

1.  将 j2objc 文件夹放在您的 java 项目文件夹中（以简化终端中的路径）
2.  如果您的 Java 项目包名称类似于 com.example.appName.ClassName.java -j2objc 文件夹应与 com 位于同一目录中
3.  在终端中，cd 到包含 com 的 ProjectName
4.  把它放在命令行中：

    j2objc-0.8.3/j2objc -use-arc -sourcepath com --ignore-missing-imports com/example/appName/*

您可能缺少的关键是-sourcepath。use-arc 和 ignore-missing-imports 是可选的。

# sqlalchemy - 使用自动加载创建表的 SQLAlchemy 循环依赖错误

> ID：15884560
> 
> 赞同：0
> 
> 时间：2013-04-08T16:45:53.730
> 
> 标签：sqlalchemy

我正在尝试使用在[此处](http://www.tylerlesmann.com/2009/apr/27/copying-databases-across-platforms-sqlalchemy/)找到的脚本。

我正在连接到 MS SQL 数据库并尝试将其复制到 MySQL 数据库中。当脚本到达这一行时：

```
table.metadata.create_all(dengine) 
```

我得到以下错误：

> sqlalchemy.exc.CircularDependencyError

我重新搜索了这个错误，发现它是`autoload=True`在创建表时使用的。解决方案虽然对我没有帮助。解决方案是在定义外键时不使用`autoload=True`和使用`use_alter=True`标志，但我没有手动定义表，所以我不能设置那个标志。

任何有关如何纠正此问题或以更好的方式完成我正在尝试做的事情的帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:51:41.343

您可以遍历所有约束并在它们上设置 use_alter：

```
from sqlalchemy.schema import ForeignKeyConstraint

for table in metadata.tables.values():
   for constraint in table.constraints:
     if isinstance(constraint, ForeignKeyConstraint):
         constraint.use_alter = True 
```

或者类似地，遍历它们并将它们指定为`AddConstraint`操作，绑定到整个元数据创建之后：

```
from sqlalchemy import event
from sqlalchemy.schema import AddConstraint

for table in metadata.tables.values():
    for constraint in table.constraints:
        event.listen(
           metadata,
          "after_create",
         AddConstraint(constraint)
        ) 
```

请参阅[控制 DDL 序列](http://docs.sqlalchemy.org/en/rel_0_8/core/schema.html#controlling-ddl-sequences)

# c - 设置 ADC 采样率。阅读数据表时遇到问题

> ID：15884566
> 
> 赞同：0
> 
> 时间：2013-04-08T16:46:13.793
> 
> 标签：c, microcontroller, firmware, atmel, datasheet

我目前正在使用一个 atmel 微控制器 EVK1104s，其中包含[UC32 数据表](http://www.atmel.com/Images/doc32072.pdf)。我们实际上已经在定制的 PCB 上植入了这个芯片，并且正在编写更多的固件。

目前，我需要告诉微控制器单元（MCU）上的 ADC 以（8k 样本/秒）进行采样。实际上，这是用于对麦克风进行采样。无论哪种方式，文档都不清楚，我正在寻找一些澄清。

我知道要更改采样率，我需要更改所谓的模式寄存器，该寄存器用于配置 ADC 以供使用（上面链接中的第 799 页）。这是允许我更改采样/保持时间/启动时间和 ADCclock 的寄存器。

```
EX(from pg 799): 
Sample & Hold Time = (SHTIM+3) / ADCClock
ADCClock = CLK_ADC / ( (PRESCAL+1) * 2 ) 
```

据我所知，我只需要更改 PRESCAL 以使 ADCClock 以 8Khz 运行。问题是 PRESCAL 仅限于 8 位分辨率。

例如，如果控制器设置为 12Mhz/x = 8Khz，则 x 需要为 1500。因为 x 限制为 8 位，正如我之前所说，这似乎是不可能的，因为最大值为 255。

我觉得我在这里做错了什么，或者不理解数据表想要我做什么。任何人都可以确认我刚刚谈到的内容或帮助指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:51:31.227

您对采样率和 ADC 率感到困惑。

您在手册中引用的寄存器仅控制一个样本的采集。寄存器允许您控制对电压进行采样的时间。这可能会对您产生影响，具体取决于所涉及的电路。也就是说，您不想为您的电路采样太快。（我没有仔细查看数据表，但一些微控制器会采集几个样本并对它们进行平均。这种行为也由寄存器控制。）

但是 8 kHz 采样率是指您想要采样的频率。也就是说，这是您要触发单个样本的频率。你提到的寄存器没有解决这个问题。您需要使用时钟和中断处理程序将数据从寄存器中移出存储到某处或对其进行处理，然后触发下一个样本。还有一个中断处理程序可以在样本准备好后立即处理它。在该方案中，您使用处理程序：一个触发样本；另一个在样品准备好时处理样品。

编辑：

要详细解释为什么您不想要这么慢的 ADC 速率，请考虑 ADC 如何生成其数据。它对第一位进行采样，等待一个周期，对第二位进行采样，依此类推，持续 10 个周期。结果的准确性取决于在所有这些样本中保持稳定的信号。如果信号在变化，那么这个数字的位是没有意义的。您需要将预分频器和 ADC 时钟设置得足够快，以使信号不会改变，但要足够慢以使信号稳定下来。

所以是的，您想使用时钟和中断处理程序来读取数据然后触发下一次读取。ADC 独立于处理器运行，并在中断再次运行时准备就绪。（第一次阅读将是垃圾，但你可以设置一个标志或其他东西来防止它。）

```
volatile int running = false

Handler()
    if(running) do something with data
    running = true
    trigger ADC
    output compare += 1/8000 s 
```

# algorithm - 给定一串数字，您将如何跟踪第 1,000,000 个最大的数字？

> ID：15884568
> 
> 赞同：1
> 
> 时间：2013-04-08T16:46:16.937
> 
> 标签：algorithm

给定一串数字，您将如何跟踪第 1,000,000 个最大的数字？

我在一次采访中被问到这个问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-08T16:52:42.917

一种方法是保持[最小堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)，并将堆的大小限制为 1,000,000。虽然堆还没有达到 1,000,000 个项目，但我们会将流中的每个新项目添加到我们的堆中。当堆满时，我们会将流中的每个新项与堆中的最小值进行比较，如果大于最小值，我们将弹出最小值并插入新项。这样，堆的最小项始终是第 1,000,000 个最大值。

伪代码示例：

```
Handle_Stream_Item(item):
  if(MinHeap.size < 1000000):
    MinHeap.insert(item)
  else if (item > MinHeap.min()):
    MinHeap.extractMin()
    MinHeap.insert(item) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:51:56.783

从流中读取每个数字时，将其添加到 B-TREE 结构中。

[https://en.wikipedia.org/wiki/B-tree](https://en.wikipedia.org/wiki/B-tree)

从百万和第一个数字开始，添加新数字后，从 B-TREE 中删除最右边（即最大）的数字。

在任何时候，B-TREE 中最右边的数字都是您想要的数字。

# php - 排名服务器实现nosql和mysql一起

> ID：15884569
> 
> 赞同：0
> 
> 时间：2013-04-08T16:46:18.060
> 
> 标签：php, mysql, nosql

我需要实现一个需要将 mysql 和 nosql 一起使用的任务。我已经实现了 mysql 表。但是，我不确定nosql的架构。

服务器根据经验要求每天、前一天（昨天）、一周和所有时间输出最成功的100人。

mysql 表有 2 个表，`user`& `score`。

`user`表有以下字段；`user_id(BIGINT)`&`full_name(BIGINT)`

`score`表有以下字段；`user_id(BIGINT)`, `level(INT)`, `total_exp(BIGINT)`, `today_exp(BIGINT)`,`weekly_exp(BIGINT)`

为了获得更好的性能，我还应该使用 no-sql 解决方案。但是，我不确定 no-sql 的架构。

我目前正在考虑创建 mongodb 表；`ranking_all`, `ranking_today`, `ranking_week`,`ranking_yesterday`索引从 0 到 99。

每当活跃用户玩游戏并获得相应经验时，我都会更新 mongodb 表。

但是，有些地方我不确定。在这个系统中，如果活跃用户基数增加，整体更新 mysql & mongodb 表的成本就会增加。

那么，整体架构在性能方面是否良好？

任何改变/改进设计的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:09:56.943

我很好奇为什么你必须使用 NoSQL？

为什么不将排名存储在 MySQL 中？无需向您的软件堆栈引入新的依赖项/新系统。

您的描述似乎不需要 NoSQL 数据库的任何优点。听起来就像是对一些排名进行了预处理，然后将它们写在某个地方。我只会写信给MySQL。

# asp.net-mvc - 下载源代码，但不工作

> ID：15884570
> 
> 赞同：0
> 
> 时间：2013-04-08T16:46:21.200
> 
> 标签：asp.net-mvc, orchardcms, orchardcms-1.6

我对果园教程的第 3 部分有疑问...

所以我试图下载第 4 部分的源代码并从那里继续（可以在页面教程末尾的大约 3/4 处找到`http://skywalkersoftwaredevelopment.net/blog/writing-an-orchard-webshop-module-from-scratch-part-4`

但是，当我从 webmatrix 运行第 4 部分时，我得到了错误（见下文）

我猜这是因为 iv 只下载了代码，但我需要把它放在一个单独的项目中？这个对吗？有人可以建议我怎么做吗？

感谢您的回复

![在此处输入图像描述](https://i.stack.imgur.com/svt48.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:50:17.590

该错误表明 IIS 中没有配置默认文档。尝试使用完整 URL 访问文档。

例如`http://localhost:28266/default.aspx`（或类似的）

然后，您可以[调整 IIS 以获得正确的默认文档](http://www.iis.net/learn/web-hosting/web-server-for-shared-hosting/default-documents)（如果需要）

* * *

编辑：查看引用的 ZIP 存档后。

这看起来像是应用程序的更改文件 zip。这本身并不是一个完整的 ASP.NET MVC 应用程序，因此不能单独查看。我没有时间分析使该应用程序与提供的演示一起工作所需的确切步骤，但请确保您按顺序组合所有以前的文件和文件夹，或者按照作者详细说明的说明进行操作。

如前所述，这不是一个完整的 ASP.NET MVC 应用程序，还没有准备好由 IIS 立即呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T01:50:03.360

问题可能是应用程序由于某种原因无法启动，这导致 IIS 尝试使用其他处理程序响应请求。因为没有定义默认文档（也不应该定义），它会尝试做一个目录列表，这在您的配置中是不允许的。不要关注 IIS 告诉您的内容，而应关注应用程序无法运行的原因。

检查事项：

*   你已经构建了应用程序
*   您在完全信任的情况下运行
*   您正在以集成模式运行
*   app_data/logs 中没有异常
*   您将模块添加到工作中的 Orchard 实例中，在其 Modules 目录中

# apache - 在 Elastic Beanstalk 上强制将 http 重定向到 https

> ID：15884571
> 
> 赞同：0
> 
> 时间：2013-04-08T16:46:24.607
> 
> 标签：apache, .htaccess, mod-rewrite, https, amazon-elastic-beanstalk

为了在 AWS Elastic Beanstalk php 应用程序上将 http 重定向到 https，我在 .htaccess 文件上使用了重写规则。

我的问题是我的规则适用于指向文件但不适用于根域的 url，例如：

```
http://www.testdomain.com/index.php => redirects OK to => https://www.testdomain.com/index.php 
```

但

```
http://www.testdomain.com  does not redirect to https://www.testdomain.com 
```

我的规则：

```
RewriteEngine On
RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteCond %{REQUEST_URI} !^/status$ 
RewriteCond %{REQUEST_URI} !^/version$ 
RewriteCond %{REQUEST_URI} !^/_hostmanager/ 
RewriteRule . https://%{SERVER_NAME}%{REQUEST_URI} [L,R] 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:26:42.800

正[则表达式](http://httpd.apache.org/docs/current/rewrite/intro.html#regex) `.`至少需要一个字符。如果要匹配任何 URL 路径，包括空的 URL 路径，请使用`^`或`^.*$`

```
RewriteRule ^ https://%{SERVER_NAME}%{REQUEST_URI} [L,R] 
```

您还可以[`%{HTTPS}`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)用于测试 SSL 连接

```
RewriteCond %{HTTPS} off 
```

# javascript - 从 Javascript 打印图像

> ID：15884575
> 
> 赞同：1
> 
> 时间：2013-04-08T16:46:30.727
> 
> 标签：javascript, html, printing

我有一些图像....每个图像的大小不同例如：

```
img1 = 200 x 1900
img2 = 1800 x 400
img3 = 600 x 800 
```

// HTML

```
<html>
<body>
    <img src='img1.jpg'>    
    <img src='img2.jpg'>
    <img src='img3.jpg'>
</body>
</html> 
```

// javascript

```
 var mywindow = window.open('', 'my div');
            mywindow.document.write('<html><head><title>my div</title>');
            mywindow.document.write('</head><body >');
            data = "<img src='img1.jpg'><img src='img2.jpg'><img src='img3.jpg'>";
            mywindow.document.write(data);  // data = all image
            mywindow.document.write('</body></html>');
            mywindow.print();
            mywindow.close(); 
```

现在输出是打印的所有图像，但尺寸已损坏如何在 A4 页中打印每个图像并将其打印在页面 (A4) 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:49:46.963

您可以定义用于打印的 CSS 规则并将尺寸基于 21cm x 29.7cm。

例如 ：

```
<style type="text/css">
@media print {
   img {
      max-width: 18cm;
      max-height: 8cm;
   }
}
</style> 
```

请注意，如果您的页面足够简单，则不必在新窗口中构建新布局，因为您可以简单地为`@media print`和定义不同的规则`@media screen`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:51:13.617

你不能。网站是为屏幕而不是打印机创建的。

但是，您可以强制 Web 浏览器显示与 A4 像素尺寸相同的页面。但是，渲染事物时可能会有一些怪癖。

```
<!DOCTYPE html>
<html>
  <head>
    <style>
    body {
        height: 842px;
        width: 595px;
        /* to centre page on screen*/
        margin-left: auto;
        margin-right: auto;
    }
    </style>
  <head>
  <body>
  </body>
</html> 
```

打印的最佳解决方案是使用 PDF，这就是它们的用途。创建具有相同数据的 PDF。在这种情况下，您可以完全控制打印格式。

# wpf - GridView 没有向集合添加行

> ID：15884578
> 
> 赞同：0
> 
> 时间：2013-04-08T16:46:41.623
> 
> 标签：wpf, mvvm, datagrid

我正在开发基于 MVVM 的 WPF 应用程序。我需要用 2 个 ComboBox 列创建 DataGrid。

我创建了下一个网格：

```
 <DataGrid Grid.Column="1" Grid.Row="4" AutoGenerateColumns="False" Margin="0,8,20,8" CanUserAddRows="True" CanUserDeleteRows="True"  ItemsSource="{Binding MapsGrid}">
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="Main Category" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox
                ItemsSource="{Binding DataContext.MainCategories, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
                DisplayMemberPath="Category"
                                SelectedItem="{Binding DataContext.MainCategorySelectedItem, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Header="Sub Category" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox
                ItemsSource="{Binding DataContext.SubCategories, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
                DisplayMemberPath="Category"
                                  SelectedItem="{Binding DataContext.SubCategorySelectedItem, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}"
                                />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>

        </DataGrid> 
```

网格看起来与我需要的完全一样，并且 ComboBox 控件包含数据，但我不知道为什么网格不向我的集合插入新行。

在我的视图模型中，我有下一个集合：

```
 private ObservableCollection<MapsDescGridModel> _mapsGrid;
            public ObservableCollection<MapsDescGridModel> MapsGrid
            {
                get { return _mapsGrid; }
                set
                {
                    if (Equals(value, _mapsGrid)) return;
                    _mapsGrid = value;
                    RaisePropertyChanged("MapsGrid");
                }
            } 
```

我在构造函数中初始化它，我在数据网格中看到一个空白行，但我无法添加行（我正在尝试使用 Enter 键）

对象“MapsDescGridModel”包含 2 个实体（实体框架实体）

```
 public class MapsDescGridModel: NotificationObject
    {
        public MapsDescGridModel()
        {

        }

        public MapsDescGridModel(MainCategories mainCat, SubCategories subcat)
        {
            MainCategory = mainCat;
            SubCatergory = subcat;
        }

        private MainCategories _mainCategory;
        public MainCategories MainCategory
        {
            get { return _mainCategory; }
            set
            {
                if (Equals(value, _mainCategory)) return;
                _mainCategory = value;
                RaisePropertyChanged("MainCategory");
            }
        }

        private SubCategories _subCatergory;
        public SubCategories SubCatergory
        {
            get { return _subCatergory; }
            set
            {
                if (Equals(value, _subCatergory)) return;
                _subCatergory = value;
                RaisePropertyChanged("SubCatergory");
            }
        }

    }
} 
```

我试图通过代码添加列，但我只能看到一行（其余的都是这一行的副本）。 ![我所有的行都是一行的副本](https://i.stack.imgur.com/b3pOJ.png) ![开始时的空白行](https://i.stack.imgur.com/RHBXF.png)

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:54:19.917

DataGridColumns 不会添加到可视化树中。这就是为什么使用 vt 的绑定（例如 ElementName、FindAncestor 绑定）在那里不起作用的原因。[这个问题看起来和这个](https://stackoverflow.com/questions/15883062/observablecollection-with-inotifypropertychanged-into-datagridcomboboxcolumn-bin)类似。

顺便说一句：如果有很多行但只有一个 DataContext，那么将每行的 SelectedItem 绑定到主 DataContext 有什么意义？您应该将每行的 SelectedItem 绑定到`MapsDescGridModel`类中的属性。

# highcharts - Highcharts：在函数ha（a）中生成错误错误...：调试期间“a未定义”

> ID：15884580
> 
> 赞同：0
> 
> 时间：2013-04-08T16:46:44.490
> 
> 标签：highcharts

我正在为我的公司制作一个 Web 应用程序（仅供内部使用），它将监控一些生产机器并显示各种生产指标。在页面上，我在单独的容器中有 2 个图表。当单击包含图表的 时，我还触发了 jQueryUI 对话框功能，以便我可以更改正在监控的工作中心。

我可以毫无问题地构建和显示图表，但是，如果我单击页面上的任意位置（包含 div 的内部或外部）**并打开调试器（带有 Firebug 的 Firefox）**，Highcharts 将生成一个异常，指示：a 未定义。这使得调试变得非常困难。谁能解释一下这个函数到底在监控什么以及它应该在什么条件下触发？

此错误是从 highcharts.js 文件生成的，似乎来自以下函数，尽管这可能是一个辅助函数，真正的问题出在其他地方：

```
ha(a){
   return Ca(a)?
   a:[a]
} 
```

我正在使用以下方法获取最新版本的 HighCharts API：

```
<script type="text/javascript" charset="utf8" src="http://code.highcharts.com/highcharts.js" ></script>
<script type="text/javascript" charset="utf8" src="http://code.highcharts.com/highcharts-more.js" ></script>
<script type="text/javascript" charset="utf8" src="http://code.highcharts.com/modules/exporting.js" ></script> 
```

我试图拼凑一个显示错误的小提琴，但复制表单和功能被证明是困难的（内部应用程序有相当多的 AJAX 显示公司信息）。

# asp.net-mvc - 在视图模型中初始化查找的最佳实践

> ID：15884582
> 
> 赞同：0
> 
> 时间：2013-04-08T16:46:52.107
> 
> 标签：asp.net-mvc

我有一个*地址*视图模型，我曾经在创建视图模型时从数据库中初始化国家列表，但是我意识到每次我在某处创建 ViewModel 时，都会从数据库中检索国家列表而不使用，所以我想通过三种方法来做到这一点：

1.  将国家初始化添加到*地址*视图模型构造函数，非常昂贵
2.  从控制器加载查找，然后将其分配给视图模型，然后加载视图
3.  在国家属性上使用延迟加载，因此只有在需要国家时才会访问数据库，就像这样

    ```
     // Lazy loading
    [ScriptIgnore]
    private IEnumerable<SelectListItem> _Countries;
    [ScriptIgnore]
    public IEnumerable<SelectListItem> Countries { 
        get{
            if (_Countries.Count() > 0) return _Countries;
            else {
                using (var db = new AllegroDMContainer()) {
                    var rCountries = db.Countries.ToList();
                    _Countries = (from m in rCountries
                                 select new SelectListItem {
                                     Text = m.Name + " (" + m.ISO + ")",
                                     Value = m.ID.ToString()
                                 });
                    return  _Countries;
                }
            }
        } 
        set{
            _Countries = value;
        } 
    } 
    ```

你们认为这里更好的方法是什么，并且看起来更自然的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:51:13.310

> *   将国家初始化添加到地址视图模型构造函数，非常昂贵

这很好，假设您传递的是集合而不是 DbContext。

> *   从控制器加载查找，然后将其分配给视图模型，然后加载视图

这是我见过的最常见的模式。

> *   在国家属性上使用延迟加载，因此只有在需要国家时才会访问数据库，就像这样

这[将 ViewModel 与 DAL 耦合在一起](http://en.wikipedia.org/wiki/Coupling_%28computer_science%29#Object-oriented_programming)，这是一件坏事。不要这样做。

# ios - 将 .a 库文件类型与 XCode 集成

> ID：15884584
> 
> 赞同：2
> 
> 时间：2013-04-08T16:46:57.047
> 
> 标签：ios, xcode

我正在测试一个图像捕获库，它通过他们的代码库作为常规头文件和以“*.a”扩展名结尾的文件发送。我不熟悉使用这种格式的文件，似乎找不到合适的“魔法”来搜索。

这个文件扩展名代表什么？

如果需要任何额外的步骤将其与我的 XCode 项目集成怎么办？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T18:56:30.800

也许更多的理论可以让你走上正确的轨道，这样你下次就会知道如何搜索：

.a 文件是对象 (.o) 文件的存档。这些目标文件通常由汇编器、编译器或其他语言翻译器生成；它们包含通常不能直接执行的机器代码，但被链接器工具用来通过组合这些目标文件的一部分来生成可执行文件或另一个库。

您应该知道的另一件重要事情是，由于这些文件包含机器代码，因此它们必须已针对您所针对的正确体系结构进行编译（例如：armv7、i386 等）。这就是为什么如果您没有针对目标平台的正确文件集（例如 iPhone 模拟器与实际 iPhone），有时您可以为一个设备构建项目但不能为另一个设备构建项目的原因。

也可能有“通用二进制文件”，这些文件依次将不同体系结构的目标文件 (.a) 的档案打包在一起（例如，使用 lipo 等工具），因此可以将相同的库文件提供给多种架构的链接器。或者，您可能对每个目标有不同的链接器配置（例如，在 XCode 中使用条件构建设置）。所有这些文件都可以使用某些工具（例如“file”、“otool”、“lipo -info”等）进行分析，每个文件都有几个参数可供使用。调试器还将检查这些文件中的符号以用于自己的目的。

当您将“.a”文件拖到 Xcode 中的项目目录时，您会注意到它会自动将此文件添加到目标“构建阶段”下的“链接二进制与库”项列表中。

由于头文件允许我们将程序源代码的某些元素分成可重用的文件，这些文件通常包含类、子例程、变量和其他在编译步骤中需要引用的标识符的前向声明，因此通常有库在“.a”文件中作为编译对象 (.o) 的存档及其各自的头文件提供。例如，只要您在 XCode 项目中包含头文件，编辑器就会为这些新功能提供自动完成功能。

有时，您可能还考虑在项目中使用库的实际源代码而不是二进制文件，因为这 * 可能 * 使调试更容易，以防“库”包内发生意外行为。很多时候，当二进制分发是为了隐藏实现细节（商业库）时（当您无法访问源代码时），这不是一个选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T16:55:46.920

.a 代表存档。它也被称为静态库。我相信你应该能够将它和头文件拖到 Xcode 中。Xcode 应该从它的扩展中选择正确的事情去做。

示例，请参见 appr。从这里的 30 秒 [http://memention.com/ac3dreader/usage/quickstart.html](http://memention.com/ac3dreader/usage/quickstart.html)

另一个来自谷歌分析的例子，在**设置下**

> 将 GANTracker.h 和 libGoogleAnalytics.a 从 SDK 的库目录拖到您的新项目中。

[https://developers.google.com/analytics/devguides/collection/ios/devguide](https://developers.google.com/analytics/devguides/collection/ios/devguide)

# php - utf8 不能与 mysql 一起使用

> ID：15884606
> 
> 赞同：1
> 
> 时间：2013-04-08T16:48:16.190
> 
> 标签：php, mysql, unicode, utf-8

当我回显阿拉伯字符时，它们看起来很好，但如果我从数据库中回显它们，它们会显示为问号。这是我到目前为止所做的，但它仍然无法正常工作：

现在的字符集设置是：

```
| Variable_name            | Value                      |
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | utf8                       |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | utf8                       |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ | 
```

现在的排序规则设置是：

```
| Variable_name        | Value           |
| collation_connection | utf8_general_ci |
| collation_database   | utf8_general_ci |
| collation_server     | utf8_general_ci | 
```

在我使用的 PHP 代码中：

```
header('Content-Type: text/html; charset=utf-8');
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
mysql_query("set character_set_server='utf-8'");
mysql_query("set_names 'utf8'"); 
```

更多信息：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:49:12.593

> 我从数据库中回显它们，它们显示为问号

你是如何回应他们的？你回声的东西的编码是什么？如果您要回显到 HTML，请确保 HTML 页面以 UTF8 解释。

# c# - 获取 Resharper 格式以匹配 Visual Studio 格式

> ID：15884611
> 
> 赞同：5
> 
> 时间：2013-04-08T16:48:44.540
> 
> 标签：c#, visual-studio, resharper, code-formatting

我有一个旧系统，它使用以下设置对 Visual Studio 中的所有语言进行缩进。

标签大小：8 缩进大小：4 保留标签

当我让 Visual Studio 格式化我的代码时，我得到以下信息：

![在此处输入图像描述](https://i.stack.imgur.com/CXfMG.png)

当我让 Resharper 格式化代码时。我得到以下信息：

![在此处输入图像描述](https://i.stack.imgur.com/ipLyb.png)

我搜索了 Google、Stack Overflow 并在 Visual Studio 和 Resharper 中使用了大量选项。我仍然无法让 Resharper 格式匹配。任何人都可以帮忙吗？我真的很想使用 Resharper 格式化/清理，但需要先弄清楚这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:14:50.267

ReSharper 不理解缩进大小与制表符大小不同的情况，因为这种格式化样式好处太少，缺点太多，很少使用。我建议重新格式化所有内容。

# javascript - 用户单击按钮时如何打开图库

> ID：15884614
> 
> 赞同：0
> 
> 时间：2013-04-08T16:48:51.170
> 
> 标签：javascript, jquery, html

总是当我打开我的页面时，画廊每次都会自动打开。但我只希望在用户单击按钮时打开。我该如何解决这个问题？

```
<a onClick="$('.fixed-bar').toggle('slow');"

<div class="container demo-3">
                 <div class="main">
                   <div class="fixed-bar">

                    <ul id="carousel" class="elastislide-list">
                        <li><a href="#"><img src="elastislide/small/1.jpg" alt="image01" /></a></li>
                        <li><a href="#"><img src="elastislide/small/2.jpg" alt="image02" /></a></li>
                        <li><a href="#"><img src="elastislide/small/3.jpg" alt="image03" /></a></li>

<script type="text/javascript">

            $( '#carousel' ).elastislide( {
                minItems : 2
            } );

        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:57:39.773

如果我假设在页面加载时需要隐藏固定栏 div

制作`<div class="fixed-bar" style="display:none">`

而不是`<a onClick="$('.fixed-bar').toggle('slow');">`使用东西

```
<a id="gallery-toggle" href="">Toggle Gallary</a> 
```

和里面`<script></script>`

写这段代码

```
$('#gallery-toggle').click(function()
{
    $('.fixed-bar').toggle('slow');
}); 
```

更好的方法.. :-)

或者在您的代码中，只需添加`display:none`样式属性。这将解决问题。

让我知道它是如何工作的，

问候，

拉胡尔

# android - 从事件中获取变量/控件

> ID：15884626
> 
> 赞同：0
> 
> 时间：2013-04-08T16:49:26.573
> 
> 标签：android

我正在尝试从对话框中获取一些值。我有一个名为 Splash 的活动，它显示一个带有表单的对话框。它显示了 wel 形式，但是当我尝试获取该值（空指针）时，我给了我一个错误。

我有以下代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_splash);

    //datos objeto
    nombre = (TextView) findViewById(R.id.tv_nombre);
    padre = (TextView) findViewById(R.id.tv_nom_padre);
    madre = (TextView) findViewById(R.id.tv_nom_madre);
    rgSexo = (RadioGroup) findViewById(R.id.rg_sexo);
    fecha_nac = (DatePicker) findViewById(R.id.dp_fecha_nac);

    rb_m = (RadioButton) findViewById(R.id.rb_masc);
    rb_f = (RadioButton) findViewById(R.id.rb_fem);

    perfil = new PerfilCRUD(this);
    perfil.open();

    //first time
    if (perfil.primeraVez()){
        //muestro el popup
        Log.v(TAG, "prim vez");

        Dialog dialog = new Dialog(this); 
        dialog.setContentView(R.layout.dialog_perfil);
        dialog.setTitle("Datos del usuario");                
        dialog.show();

        Button botOk = (Button) dialog.findViewById(R.id.b_ok);

        botOk.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {

                Log.v(TAG, "boton ok");
                Log.v(TAG, nombre.getText().toString());

            }   
        }); 
```

当我尝试获取 nombre.getText().toString() 值时，它给了我错误。所有变量/控制值都会发生这种情况。它强制关闭应用程序。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:03:05.810

因为`nombre`是在你原来的`layout`. 要么调用你`TextView`在其中的a 要么创建一个类级别变量然后在`layout``inflate``dialog``String name = "";`

```
if (perfil.primeraVez()){
  name = nombre.getText().toString(); 
```

然后你可以`name`在你的`dialog`

# wordpress - 最佳主题短代码实现

> ID：15884627
> 
> 赞同：2
> 
> 时间：2013-04-08T16:49:36.393
> 
> 标签：wordpress, tinymce, shortcode

我一直在犹豫是否要在我的主题中添加短代码，我目前正在测试一些示例。

有几种方法可以将短代码实现到 tinymce 编辑器中（从可用性的角度来看），我正在寻找一些示例来代表您所见过的一些更好的实现。

例如，我可以使用一个按钮打开一个 jQuery 模态对话框窗口，其中包含我所有简码的可视化表示（类似于 Optimize Press），或者我可以只在编辑器工具栏上列出单个图标，每个简码一个图标。我实际上正在寻找一个使用 jQuery 来增强可用性的混合方法的示例。

请分享您对主题的任何见解或参考示例，这些主题为用户提供了良好的简码实现，以便将简码应用到他们的页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T04:05:05.310

我见过的最用户友好的短代码实现之一是“Post Snippets”插件，它使任何用户都可以轻松添加可自定义的短代码，而无需编写任何代码。

独特的 tinymce 按钮，带有 jquery ui 选项卡式模式窗口和以表单形式呈现的可选变量框，是一个非常好的混合解决方案。代码相当轻巧，看起来很可靠。

凭借其导入/导出选项。我会说它甚至不值得自己编写一些东西。您可以简单地告诉您的主题用户使用此插件并导入您的主题片段。

或者，如果您想要自己的自定义内容，就像我自己倾向于的那样，您可以分叉该插件的代码，同时保留其导入/导出功能。

# python - pyQt QTableView 不显示数字（int、float等）

> ID：15884629
> 
> 赞同：0
> 
> 时间：2013-04-08T16:49:40.087
> 
> 标签：python, filter, pyqt, qtableview

我在使用 QTableView 并将数据放入其中时遇到问题。文本（字符串）显示良好，可以使用代理和 QStandardItemModel 进行排序和过滤

```
 self.material_model = QtGui.QStandardItemModel(self)
 self.proxy = QtGui.QSortFilterProxyModel(self)
 self.proxy.setSourceModel(self.material_model)
 self.t_material.setModel(self.proxy) 
```

但是，如果我尝试将数字/值放入表中，则使用以下代码段根本不会显示：

```
for row in xrange(0, len(self.material.data)):
    item = QtGui.QStandardItem(str(self.material.data[row]['name']))
    self.material_model.setItem(row, 0, item)

    item2 = QtGui.QStandardItem()
    item2.setData(QtCore.Qt.DisplayRole,float(999.99))
    self.material_model.setItem(row, 1, item2) 
```

我尝试了几种变体，包括 Qt.DisplayRole 而不是 Qt.EditRole。但从其他帖子中我感觉，并非所有方法和功能都在 pyQt 中实现，因此犹豫是否玩太多（不过我已经投入了几个小时）。现在我希望你能帮助我解决这个问题。也许，我的方法不适合我尝试做的事情，它基本上是按文本（名称）和值（间隔）过滤内容。我正在使用 pyQt，Windows7，数据来自使用自写查询包装器而不是 QtSQL 的 SQLite DB。

任何见解表示赞赏！

干杯，

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-17T20:33:39.127

我找到了一个有点优雅的解决方案。请更加小心如何格式化数字字符串。在前面添加空格作为 0 位的占位符。因此，如果您希望您的数字长度为 10 个带有 4 个小数空格的字符串：

```
float_as_str = "{:10.4f}".format(float_i_started_with) 
```

最后，当您对它们进行排序时，一切都会解决。唯一的缺点是：

1.  您必须明确告诉它您的数字的最大长度是多少。在这种情况下，它将对 < 10^6 的任何数字进行排序（6 来自 10-4）。

2.  它使它具有右对齐的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:58:04.770

在将数字插入表格之前尝试将它们转换为字符串，它不会影响您的程序，因为它只是用于显示目的。

# perl - 为 SSL_verify_mode 选择 SSL_VERIFY_NONE

> ID：15884630
> 
> 赞同：11
> 
> 时间：2013-04-08T16:49:42.143
> 
> 标签：perl, ssl, xml-rpc, lwp

我正在尝试创建与`ssl`没有证书且需要绕过代理的内部站点的客户端连接。

我能够绕过代理，并且能够连接到站点并创建客户端连接，但是，我收到了这个丑陋的警告：

> ```
> *******************************************************************
>  Using the default of SSL_verify_mode of SSL_VERIFY_NONE for client
>  is deprecated! Please set SSL_verify_mode to SSL_VERIFY_PEER 
>  together with SSL_ca_file|SSL_ca_path for verification.
>  If you really don't want to verify the certificate and keep the
>  connection open to Man-In-The-Middle attacks please set
>  SSL_verify_mode explicitly to SSL_VERIFY_NONE in your application.
> ******************************************************************* 
> ```

在`C:/strawberry/perl/site/lib/LWP/Protocol/http.pm line 31`

我的代码：

```
use    RPC::XML::Client;
use    XML::Simple;
use LWP::Protocol::https;

$ENV{NO_PROXY} = '10.*';

$ENV{'PERL_LWP_SSL_VERIFY_HOSTNAME'} = 0;

my $server = RPC::XML::Client->new("$vneUrl/api/index.ice",
                                 ssl_opts =>    { SSL_verify_mode   => 'SSL_VERIFY_NONE',
                                                 verify_hostname    => 0,   
                                                 SSL_use_cert => 0x00
                                               },
                                   ); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-08T18:23:02.367

该消息来自 IO::Socket::SSL，它指的是`SSL_VERIFY_NONE`它导出的常量而不是字符串`'SSL_VERIFY_NONE'`。

其次，`ssl_opts`是 LWP::UserAgent 的构造函数的参数，而不是 RPC::XML::Client 的参数。

尝试：

```
use IO::Socket::SSL qw( SSL_VERIFY_NONE );

RPC::XML::Client->new($uri,
   useragent => [
      ssl_opts => {
         verify_hostname => 0,
         SSL_verify_mode => SSL_VERIFY_NONE,
      },
   ],
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-03T09:10:45.723

新版本我相信你应该设置为 0 或 1。我认为这是一个错误：

```
500 SSL_verify_mode must be a number and not a string 
```

从：

```
$useragent->ssl_opts(SSL_verify_mode=>'SSL_VERIFY_NONE'); 
```

至：

```
$useragent->ssl_opts(SSL_verify_mode=>'0'); 
```

# teamcity - 使 gitolite 触发 teamcity 构建

> ID：15884631
> 
> 赞同：1
> 
> 时间：2013-04-08T16:49:42.893
> 
> 标签：teamcity, gitolite

而不是每天让 teamcity 登录 gitolite 服务器数万次 - 并且还坐在那里等待投票发生（或手动启动）。

如果可以设置 gitolite 挂钩通知 TeamCity 存储库已更改，那就太好了。

TeamCity 和 gitolite 可以进行这样的配置吗？

我知道 Jenkins 有一个运行良好的 github 插件——我将该设置用于我私下运行的一些 Minecraft CI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T05:40:31.877

一种方法是 gitolite（通过[VREF 挂钩](https://stackoverflow.com/questions/10888300/gitosis-vs-gitolite/10888358#10888358)）通过其[REST API](http://confluence.jetbrains.com/display/TW/REST+API+Plugin)调用 TeamCity ，以便[通过 Web 请求启动构建](http://ileonenko.wordpress.com/2012/09/21/start-teamcity-build-via-web-request-with-powershell-script/)。

> 您只需向以下 URL 发出 Web 请求：

```
http://YOURSERVER/httpAuth/action.html?add2Queue=btId 
```

，其中`btId`构建类型 ID 是 - 每个构建配置的唯一标识符。
要获取它，您可以在浏览器地址栏中，单击构建配置时查找它，或使用[TeamCity REST API](http://confluence.jetbrains.com/display/TW/REST+API+Plugin#RESTAPIPlugin-BuildRequests)获取详细信息。

* * *

[OP Morten Nilsen](https://stackoverflow.com/users/1033708/morten-nilsen)不需要 VREF ：

> *   将文件“ `post-receive`”添加到`.gitolite/hooks/common`和
> *   跑`gitolite setup --hooks-only`

# iphone - 修改动态滚动视图项

> ID：15884635
> 
> 赞同：0
> 
> 时间：2013-04-08T16:49:49.070
> 
> 标签：iphone, ios, objective-c

我想对包含多行的滚动视图执行动态管理。每行包含一个标签和一个文本字段。将解析配置文件以指定应显示哪个字段以及应删除哪个字段。

我试图将每一行（标签+文本字段）放入一个视图中，并使用 stroyboard 编辑器将所有视图嵌入到滚动视图中。然后我对 viewController.h 文件中的每个视图进行了引用：

@property (weak, nonatomic)IBOutlet UIView* view_x;

然后我尝试删除所有视图并一一恢复：

[scollView addSubview:view_x];

我得到的结果是视图没有放在滚动视图中的正确位置，并且显示的视图模糊。

谁能帮我找到解决问题的方法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:52:46.973

考虑使用 UITableView，因为它支持滚动、添加、删除等，而无需重新发明所有逻辑。

# sql - 查询表中缺少的项目

> ID：15884638
> 
> 赞同：0
> 
> 时间：2013-04-08T16:50:02.277
> 
> 标签：sql, sqlite

我有一个机场代码对表：

```
|iata|icao|
-----------
|ORD |KORD|
|JFK |KJFK|
|LAX |KLAX|
|SFO |KSFO| 
```

我想运行一个查询，该查询将返回此表中不存在的代码，因此如果我运行包含 ATL、ORD、MIA、SFO 的查询（针对 iata 列），它将返回 ATL 和 MIA，因为它们都不存在在我的桌子上。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:49:24.950

如果您有一个运行代码的查询，这是一种方法：

```
 select mc.*
    from (<your query goes here>) mc
    where mc.iata not in (select iata from AirportCodePairs acp) 
```

您也可以通过 a`left outer join`和比较来做到这一点`NULL`。我会推荐`iata`在对表中的索引。

或者，如果您没有查询，您可以执行以下操作：

```
 select mc.*
    from (select 'ATL' as code union all
          select 'ORD' union all
          select 'MIA' union all
          select 'SFO'
         ) mc
    where mc.iata not in (select iata from AirportCodePairs acp) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:04:53.597

您可以使用要搜索的值创建一个表，然后执行 JOIN：

```
CREATE TABLE tmp ( code char(3) NOT NULL);

INSERT INTO tmp (code) VALUES ('ATL'), ('ORD'), ('MIA'), ('SFO');

SELECT code FROM tmp
LEFT OUTER JOIN  airportcode as ac ON tmp.code = ac.iata
WHERE ac.iata IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:13:25.887

在 oracle 中，您可以使用减号命令示例

```
select your_columns from tableA minus select your_columns from tableB 
```

请注意，两者必须具有相同的列、类型和长度，否则将不起作用。

如果类型不同，请执行强制转换、to_char、to_date 或任何使类型相同所需的函数。请注意，如果您必须在 where 子句中执行其中一项或任何 oracle 函数调用，则使用基于函数的索引。例如，如果在这样的 where 子句中调用 to_upper

```
select * from tableName a where to_upper(last_name)='SIMPSON' 
```

将按如下方式创建关于此的索引

```
create index ixt on tableName(to_uppper(last_name)); 
```

# javascript - 通过单击带有不带 Jquery 的 Java Script 的链接来隐藏和显示元素

> ID：15884640
> 
> 赞同：0
> 
> 时间：2013-04-08T16:50:11.177
> 
> 标签：javascript, class, hide, add, show

我真的需要一些帮助，我想知道通过单击仅使用没有 Jquery 的 Java Script 的链接来隐藏和显示元素的最佳方法是什么。

所以，当我点击“Link 1”时，需要添加“class active”，并且`<div id="cont1">`应该只显示“”，而其他的应该被隐藏。

另一件事是，这样做可以在将来添加更多的 HTML 链接和内容，而无需更改 JS 代码。

如果有人帮助我，我将永远感激不尽！

按照 HTML 代码：

```
 <div class="all">
          <ul class="links">
             <li class="active"><a href="#">Link 1</a></li>
             <li><a href="#">Link 2</a></li>
             <li><a href="#">Link 3</a></li>
             <li><a href="#">Link 4</a></li>
           </ul>
          <div class="content">
             <div id="cont1">
                 <p>Content 1</p>
             </div>
             <div id="cont2">
                 <p>Content 2</p>
             </div>
             <div id="cont3">
                 <p>Content 3</p>
             </div>
             <div id="cont4">
                 <p>Content 4</p>
             </div>
          </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T04:14:00.837

只需尝试修复您的代码。

1.  `[0]`后添加缺失`document.getElementsByClassName("content")`
2.  更改`getElementsByClassName()`为`querySelectorAll()`以在 IE8 中工作
3.  将变量更改`i`为`navList.children[i].onclick`记忆变量`index`
4.  将变量`i`起始值更改为`0`
5.  `index + 1`作为 dest传递，`mudaConteudo()`因为索引以 0 开头，但您的内容 ID 以 1 开头

结果如下：

```
window.onload = function () {
    function mudaConteudo(elm, dest) {
        var divs = document.querySelectorAll(".content")[0].getElementsByTagName('div');
        for (var i = 0, len = divs.length; i < len; i++) {
            divs[i].style.display = "none";
        }
        document.getElementById('cont' + dest).style.display = "block";
    }
    var navList = document.querySelectorAll(".links")[0];
    for (var i = 0, len = navList.children.length; i < len; i++) {
        (function(index){
            navList.children[index].onclick = function () {
                mudaConteudo(this, index + 1);
                document.querySelectorAll(".active")[0].removeAttribute("class");
                this.className = "active";
            };
        })(i);
    }
} 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:21:42.413

试试这个：

```
var list = document.getElementsByTagName('ul');
var links = list[0].getElementsByTagName('a');
for (var i = 0; i < links.length; i++) {
    links[i].onclick = function () {
        var target = this.innerHTML.substr(-1);
        var divs = document.getElementsByClassName("content");
        var subdivs = divs[0].getElementsByTagName('div');
        for (var i = 0; i < subdivs.length; i++) subdivs[i].style.display = 'none';
        document.getElementById('cont' + target).style.display = 'block';
    };
}; 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/rg7Em/)**

# ruby - Ruby 中是否存在多态性？

> ID：15884648
> 
> 赞同：0
> 
> 时间：2013-04-08T16:50:27.443
> 
> 标签：ruby, polymorphism

Ruby 中是否存在多态性？我读过Ruby不支持多态性，而是支持方法重载和方法覆盖。有人可以举个例子为我澄清一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T17:00:08.453

### 是的，Ruby 确实支持多态性。

考虑简单类继承的情况，其中派生类的实例“是”子类和父类的实例：

```
class Parent; end
class Child < Parent; end
o = Child.new
o.is_a?(Child) # => true
o.is_a?(Parent) # => true 
```

请注意，此示例也适用于包含的模块：

```
a = Array.new
a.is_a?(Array) # => true
a.is_a?(Enumerable) # => true 
```

当然，Ruby 也鼓励使用[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)，这可能是关于正确支持多态性问题的混淆来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:00:28.983

Ruby 是一种高度多态的语言，从某种意义上说，只要对象的行为符合预期，方法就不会自动推断您传递给它们的数据类型。例子：

```
def concat(a,b)
  a.to_s + b.to_s
end

concat('a', 'bcd')              #=> "abcd"
concat(5, 10)                   #=> "510"
concat([1,2,3], ' is an Array') #=> "[1, 2, 3] is an Array" 
```

只要响应`a`，函数就会按预期输出。查看更多关于 Duck Typing 的示例。`b``to_s`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T22:51:00.227

Ruby 不支持方法重载。方法重载的*想法*在动态类型语言中甚至没有意义。

Ruby*确实*支持 ad-hoc 多态性，就像地球上几乎所有的面向对象语言一样。

# javascript - 如何使用影响图例的 html 方法 - highcharts / highslide

> ID：15884652
> 
> 赞同：0
> 
> 时间：2013-04-08T16:50:56.333
> 
> 标签：javascript, jquery, highcharts, highslide

我想在页面正文中使用 html 来影响图表的过滤器。我的图表图例稍作修改，以便能够以不同的方式（反转）处理过滤，所以我希望这种行为保持不变。

我找到了一个这样做的例子......

```
function(chart){
    $(chart.series).each(function(i, serie){
        $('<li id="legendlinkstyle" style="color: '+serie.color+'">'+serie.name+'</li>').click(function(){
            serie.visible ? serie.hide() : serie.show();
        }).appendTo('#legend')
    })
} 
```

但它不允许我编辑链接的文本，也不会影响悬停颜色等我想做的事情。此外，我希望能够灵活地为每个过滤器名称类别添加标题，如下图所示。

![在此处输入图像描述](https://i.stack.imgur.com/hOZlN.png)

有没有办法在javascript中添加一些东西，然后以某种方式在html正文中做这样的事情......（当你点击它时，它会在图例中切换一个过滤器）

```
<a href="functionhere();">CUSTOMIZE</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:08:21.443

Highcharts 有一个非常强大的 JavaScript API，你真的可以用它做很多事情。然而，上面的代码正是你所需要的，你只需要稍微改进一下。看看另一个（我认为更高级）的例子：

```
$(function () {
    $('#container').highcharts({
        chart: {
            type: 'line'
        },
        series: [{
            id: 'earnings-above',
            name: 'above',
            data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
        }, {
            id: 'earnings-inline',
            name: 'inline',
            data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
        }, {
            id: 'earnings-below',
            name: 'below',
            data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
        }]
    }, function (chart) {

      // bind events to your own custom legend
      $('#my-legend').on('click', 'button', function (e) {
        var el = e.target,
            id = el.getAttribute('data-id'),
            series = chart.get(id);

        series.setVisible(!series.visible);
      });
    });
}); 
```

这是相关的HTML：

```
<div id="container" style="height: 400px; min-width: 600px"></div>

<div id="my-legend">
  <strong>Earnings:</strong>
  <button data-id="earnings-above">above</button>
  <button data-id="earnings-inline">inline</button>
  <button data-id="earnings-below">below</button>
</div> 
```

如您所见，图例是单独呈现的，我们只是通过将系列 id 存储在“data-id”属性中来将其绑定到 Highcharts。

在这里你可以找到一个工作演示：http: [//jsfiddle.net/bk7Au/](http://jsfiddle.net/bk7Au/)

# c++ - 更新 OpenCV CvNormalBayesClassifier

> ID：15884653
> 
> 赞同：1
> 
> 时间：2013-04-08T16:51:02.890
> 
> 标签：c++, opencv, machine-learning, computer-vision, bayesian

我正在尝试使用 CvNormalBayesClassifier 来训练我的程序来学习皮肤像素颜色。我有一组训练图像和响应图像。响应图像为黑白，皮肤区域标记为白色。以下是我的代码，

```
CvNormalBayesClassifier classifier;
for (int i = 0; i < numFiles; i++) {

    string trainFile = "images/" + int2str(i) + ".jpg";
    string responseFile = "images/" + int2str(i) + "_mask.jpg";

    Mat trainData = imread(trainFile, 1);
    Mat responseData = imread(responseFile, CV_LOAD_IMAGE_GRAYSCALE);

    trainData = trainData.reshape(1, trainData.rows * trainData.cols);
    responseData = responseData.reshape(0, responseData.rows * responseData.cols);

    trainData.convertTo(trainData, CV_32FC1);
    responseData.convertTo(responseData, CV_32FC1);

    classifier.train(trainData, responseData, Mat(), Mat(), i != 0);
} 
```

但是，它给出了以下错误，

`The function/feature is not implemented (In the current implementation the new training data must have absolutely the same set of class labels as used in the original training data) in CvNormalBayesClassifier::train`

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:37:20.760

正如错误消息所述，您无法根据新的类标签“更新”分类器。正态贝叶斯分类器学习混合高斯来表示训练数据。如果你突然开始添加新标签，这种混合模型将不再正确，必须从头开始学习新模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:59:08.773

好的，我发现问题在于黑白图像已被压缩，因此包含的值范围为 0-255。因此，其他图像中可能会有一个新的类标签。

为了解决这个问题，使用阈值处理使值全部变为 0 或 255。

# java - 如何在 TableModel 中定义主动更新的 CellEditor

> ID：15884654
> 
> 赞同：0
> 
> 时间：2013-04-08T16:51:08.797
> 
> 标签：java, swing, jcombobox, abstracttablemodel

我正在创建一个`TableModel`which extends `AbstractTableModel`。但是，它的内容会定期更改，并且列数会根据显示的数据而变化。有时，我需要使用 a`ComboBox`来编辑第 2 列中的单元格，有时我需要使用 a `ComboBox`for 第 3 列中的单元格。

我知道您可以通过执行设置表格的默认渲染器`table.getColumnModel().getColumn(2).setCellEditor(new DefaultCellEditor(myComboBox));`

我可以`CellEditor`在我的内部`TableModel`动态设置，以便`CellEditor`在我调用时更新`table.updateUI()`吗？

**编辑**：我基本上是在传递我正在使用`TableModel`的大`WellCollection`数据结构。冒着让你厌烦细节的风险，它由 组成`Wells`，由 组成`Attributes`，由 组成`ProposedValues`。不过，这不是很重要。重要的部分是我希望用户能够`ProposedValues`在单击下一步时翻阅属性并在表格中具有不同的显示（我之前使用 完成`updateUI()`）。

请注意，an`Attribute`可以是高程类型，也可以不是高程类型。如果是高程类型，则需要在其中增加一列。

这是我的代码：

```
public class ProposedValueTableModel extends AbstractTableModel{
    private WellCollection wells;

    public ProposedValueTableModel(WellCollection wells){
        this.wells = wells;
    }

    @Override
    public int getColumnCount() {
        // if we're dealing with elevation values, we want fields for the value, the elevation type,
        // the source, and additional comments. If not, only show value, source, and comments.
        if(wells.getCurrAttribute().isElevationType())
            return 4;
        else return 3;
    }

    @Override
    public int getRowCount() {
        //NOTE: add 1 for extra, blank row! 
        return wells.getCurrAttribute().getProposedValues().size()+1;
    }

    @Override
    public Object getValueAt(int row, int col) {
        //TODO: convert this to handy dandy switch statements
        // make the last row blank to allow entries
        if (row==wells.getCurrAttribute().getProposedValues().size())
            return "";
        ProposedValue propVal = wells.getCurrAttribute().getProposedValues().get(row);
        //if we're NOT dealing with an elevation type, simply have three fields
        if(wells.getCurrAttribute().isElevationType()==false){
            switch(col){
            case 0:
                return propVal.val;
            case 1:
                return propVal.source;
            case 2:
                return propVal.comment;

            }
        }
        // if it IS an elevation value, include elevation type
        else{
            switch(col){
            case 0:
                    return propVal.val;
                case 1:
                    return propVal.elevType;
                case 2:
                    return propVal.source;
                case 3:
                    return propVal.comment;
            }
        }
        return "";
    }

    public String getColumnName(int col){

        if(wells.getCurrAttribute().isElevationType() ==false){
            switch(col){
                case 0:
                    return "Proposed value";
                case 1:
                    return "Source";
                case 2:
                    return "Comment";
            }
        }
        else{
            switch(col){
                case 0:
                    return "Proposed value";
                case 1:
                    return "Type";
                case 2:
                    return "Source";
                case 3:
                    return "Comment";
            }
        }
        return "header";
    }

    public boolean isCellEditable(int row, int col){
        return true;
    }

    public void setValueAt(Object value, int row, int col){
        // we're adding something to the last row, then add a new ProposedValue to the proposedValues array
        if(row == wells.getCurrAttribute().getProposedValues().size()){
            wells.getCurrAttribute().getProposedValues().add(new ProposedValue());
        }
        ProposedValue propVal = wells.getCurrAttribute().getProposedValues().get(row);
        if(wells.getCurrAttribute().isElevationType()==false){
            switch(col){
                case 0:
                    // Value
                    propVal.val = (String)value; break;
                case 1:
                    // Source
                    propVal.source = (String)value; break;
                case 2:
                    // Comment
                    propVal.comment = (String)value; break;
            }
        }
        else{
            switch(col){
                case 0:
                    // Value
                    propVal.val = (String)value; break;
                case 1:
                    // Elevation type
                    propVal.elevType = (String)value; break;
                case 2:
                    // Source
                    propVal.source = (String)value; break;
                case 3:
                    // Comment
                    propVal.comment = (String)value; break;
            }
        }
        //TODO: find out why this is necessary
        fireTableCellUpdated(row, col);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:58:28.680

> 我可以在 TableModel 中动态设置 CellEditor，以便在调用 table.updateUI() 时更新 CellEditor？

*   不，这不是更新 JTables 视图的正确方法

> 我正在创建一个扩展 AbstractTableModel 的 TableModel。但是，它的内容会定期更改，并且列数会根据显示的数据而变化。有时，我需要使用 ComboBox 来编辑第 2 列中的单元格，有时我需要使用 ComboBox 来编辑第 3 列中的单元格。

*   [Oracle turorial 中的代码示例](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#combobox)有什么问题，

> 我可以在 TableModel 中动态设置 CellEditor

*   注意 XxxTableModel 仅将 JComboBox 的字符串值存储为 XxxTableCellEditor

* * *

为了获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)，简短，可运行，可编译，几乎带有`JFrame`硬编码值，用于存储为`JTable``JScrollPane``AbstractTableModel``local variable`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T17:04:11.203

> 我可以在 TableModel 中动态设置 CellEditor

CellEditor 不是由 TableModel 确定的。

JTable 确定使用哪个编辑器。

您可以覆盖 table.getCellEditor(...) 方法以动态更改正在使用的编辑器。有关此方法的示例，请参见：[https ://stackoverflow.com/a/7770309/131872。](https://stackoverflow.com/a/7770309/131872)

# c# - 如何扩展 AsyncFileUpload 类？

> ID：15884655
> 
> 赞同：1
> 
> 时间：2013-04-08T16:51:10.220
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, c#-4.0

我正在尝试扩展 AsyncFileUploadEventArgs 类。下面是我的代码

```
public class abc : AsyncFileUploadEventArgs
{
    public abc() { }
    public int MyProperty { get; set; }

    public String FileName { get { return fileName; } }
    private string fileName;

    public string FileSize { get { return fileSize; } }
    private string fileSize;

    public AsyncFileUploadState State { get { return State; } }
    private AsyncFileUploadState state;

    public string StatusMessage { get { return statusMessage; } }
    private string statusMessage;

    public abc(AsyncFileUploadState state, string statusMessage, string filename, 
                                                                   string filesize)
    {
        this.fileName = filename;
        this.state = state;
        this.statusMessage = statusMessage;
        this.fileSize = filesize;
    }
} 
```

`AsyncFileUploadEventArgs`类元数据

```
public class AsyncFileUploadEventArgs : EventArgs
{
    public AsyncFileUploadEventArgs();
    public AsyncFileUploadEventArgs(AsyncFileUploadState state, string statusMessage, string filename, string filesize);

    public string FileName { get; }
    public string FileSize { get; }
    public AsyncFileUploadState State { get; }
    public string StatusMessage { get; }
} 
```

下面是`AsyncFileUpload UploadedComplete`处理程序

```
protected void AsyncFileUpload1_UploadedComplete(object sender, abc e)
{
} 
```

下面是 AsyncFileUpload 的用户控件

```
<cc1:AsyncFileUpload ID="AsyncFileUpload1" Width="400px" 
    runat="server" OnUploadedComplete="AsyncFileUpload1_UploadedComplete" /> 
```

我的动机是 - 我正在尝试验证`AsyncFileUpload1_UploadedComplete`处理程序中所选文件的高度和宽度。我在服务器端做，因为高度和宽度在`AsyncFileUploadEventArgs`类中不可用。

因此，我正在考虑添加名为 Height 的新属性并将其分配为服务器端的值并在客户端访问它。

通过扩展类，它给了我以下错误

> “AsyncFileUpload1_UploadedComplete”没有重载匹配委托“System.EventHandler”

你能说出原因吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-08T17:12:34.230

应该将此参数用于 UploadedComplete 事件：

```
protected void AsyncFileUpload1_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e) 
```

# google-app-engine - 如何更新/写入存储在 blobstore 2 中的文本文件

> ID：15884662
> 
> 赞同：0
> 
> 时间：2013-04-08T16:51:22.103
> 
> 标签：google-app-engine, blobstore

我每天需要进行 10,000 次数据存储读取和 3000 次数据存储写入，这花了我一些钱。

我目前的解决方案是将文本文件上传到 GAE 并在每个请求中读取文本文件。

我的文本文件是

```
productid--- price--- description---xxx----xxxx-xxxx 
```

但是，我的需要是我还想编写/编辑/更新文本文件。是否可以？

这些对我有什么建议吗？我不想使用数据存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:53:26.513

如果您打算使用 Blobstore 来存储文件，那么您将无法修改它们，因为 Blob在 Google App Engine 上是[不可变的：](https://developers.google.com/appengine/docs/python/blobstore/overview#Introducing_the_Blobstore)

> Blob 在创建后无法修改，但可以删除。

您应该使用数据存储[`ndb.TextProperty`](https://developers.google.com/appengine/docs/python/ndb/properties#types)区来存储文本文件，因为没有长度限制，您可以轻松地创建/更新/删除。由于每天必须完成所有这些请求，因此您无能为力，因为您必须为此付费。只要确保您遵循最佳实践并查看[Appstats](https://developers.google.com/appengine/docs/python/tools/appstats)，您就可以监控您的读/写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T00:32:00.790

您可以使用文件 API 创建 Blob。如前所述，您无法编辑 blob，但您可以通过使用 files API 创建新 blob、将数据从原始 blob 复制/编辑到新 blob，然后替换旧 blob 来执行基本相同的操作与新的。

它有效，但并不理想。文件 API 似乎会导致相当多的异常，因此您需要确保在代码的该部分进行良好的错误检查。

# sqlite - 使用带有自定义 WSQLite3 的 GUI

> ID：15884665
> 
> 赞同：0
> 
> 时间：2013-04-08T16:51:35.003
> 
> 标签：sqlite

我是新来的，我的前任构建了一个自定义 WSQLite3.exe/dll，它允许他读取自定义聚合函数以用于我们组织执行的常见查询，以最大限度地减少编写和重写连接的需要。它们是从 .sql 文件中读取的

正因为如此，我只能在命令行中工作，因为我需要大量复制/粘贴和浏览表格，因此我觉得这非常有限。

有没有人成功使用自定义 wsqlite3.exe 构建与众多 SQLite 3 GUI 之一？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:44:09.530

标准`sqlite3.exe`外壳（以及大多数基于它的程序）具有`.load`加载为此目的而设计的扩展的命令。您的扩展可能不是这种情况。

许多 GUI 没有扩展机制，或者支持相同的扩展格式。[SQLite Manager](https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/) Firefox 扩展支持用 JavaScript 编写的扩展。

# jquery - jQuery mouseenter 和 mouseleave

> ID：15884666
> 
> 赞同：0
> 
> 时间：2013-04-08T16:51:35.987
> 
> 标签：jquery

我正在尝试通过一种下拉菜单为我的用户制作注销系统。当用户将鼠标悬停在他的名字上时，会打开一个下拉菜单，当他离开 div 时，它会被 jQuery 隐藏。我曾尝试使用 mouseenter 和 mouseleave 函数来执行此操作，但它似乎不起作用。请参考我的 jsfiddle 文件[http://jsfiddle.net/b6K2R/](http://jsfiddle.net/b6K2R/)

以下是我的代码：-

HTML

```
<div id="ppic" style="float:right;position:relative;" class="top" href="#"> 
<img style="float:left;" src="https://graph.facebook.com/100005546162517/picture"
width="25" height="25"> 
<span style="float:left;margin:4px 0 0 5px;">
Deval
</span>
<div class="submenu">
<ul class="root">
<li ><a href="settings" >Settings</a></li>
<li ><a href="Logout" >Logout</a></li>
</ul>
</div>
</div> 
```

jQuery :-

```
$(document).ready(function(){
$(".submenu").hide();
});
$("#ppic").mouseenter(function(){
$(".submenu").show();
});
$("#ppic").mouseleave(function(){
$(".submenu").hide();
}); 
```

CSS :-

```
.submenu
{
background: #fff;
position: absolute;
top: 41px;
right: 0px;
z-index: 1;
width: 125px;
margin-left: 10px;
padding: 0px 0 5px;
border-bottom-right-radius:6px;
border-bottom-left-radius:6px;
box-shadow: 0 2px 8px rgba(0, 0, 0, 0.45);
}
.top li a 
{
color: #555555;
display: block;
font-family: arial;
font-weight: bold;
padding: 10px 15px 10px 20px;
cursor: pointer;
text-decoration:none;
outline:none;
}

.top li a:hover
{
background:#155FB0;
color: #FFFFFF;
text-decoration: none;
}
.root
{
list-style:none;
margin:0px;
padding:0px;
font-size: 11px;
} 
```

请帮我...！在此先感谢... :>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:03:52.033

您必须将“Frameworks & Extensions”设置为“jQuery x(version)”。这是工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:11:13.177

当您将鼠标悬停在`#ppic`元素上时，它会显示该`.submenu`元素。当您将鼠标移开/移出`#ppic`元素时，它将隐藏该`.submenu`元素。

它完全按照您的编码方式工作。`#ppic`问题是元素和子菜单之间存在间隙。因此，当您尝试将鼠标移动到元素上时，它会在`.submenu`元素上注册为 a 。`mouseout``#ppic`

尝试调整CSS 中的`top`属性，使其更靠近元素。`.submenu``.submenu``#ppic`

我将`top`值修改为`top:25px`，它工作正常。

这是一个小提琴：http: [//jsfiddle.net/b6K2R/5/](http://jsfiddle.net/b6K2R/5/)

# asp.net - 如何使用 RadioButtonList 显示/隐藏 div

> ID：15884670
> 
> 赞同：2
> 
> 时间：2013-04-08T16:51:44.493
> 
> 标签：asp.net

我有带有 3 个选项的 RadioButtonList：

```
<asp:RadioButtonList ID="RadioButtonList1" runat="server">
        <asp:ListItem Text="SearchByName" Value="1"></asp:ListItem>
         <asp:ListItem Text="SearchByDate" Value="2"></asp:ListItem>
         <asp:ListItem Text="SearchByValue" Value="3"></asp:ListItem>
    </asp:RadioButtonList> 
```

我有 3 个 div，每个都有一些文本框和按钮来进行一些搜索。如何使用单选按钮列表，当我检查一些单选时，只有一个 div 显示

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T16:59:44.460

您有两种方法，您可以在客户端执行此操作，也可以在服务器端执行此操作，具体取决于您的需要：

**服务器端解决方案**：您需要将`AutoPostBack`RadioButtonList 的属性添加为 true，并且`divs`将`runat`属性设置为`server`

**标记**：

```
<asp:RadioButtonList ID="RadioButtonList1" runat="server" AutoPostBack="True" onselectedindexchanged="RadioButtonList1_SelectedIndexChanged">
    <asp:ListItem Text="SearchByName" Value="1"></asp:ListItem>
     <asp:ListItem Text="SearchByDate" Value="2"></asp:ListItem>
     <asp:ListItem Text="SearchByValue" Value="3"></asp:ListItem>
</asp:RadioButtonList>

<div id="myDiv1" runat="server" visible="false">Div Content</div> 
```

**后面的代码**：

```
protected void RadioButtonList1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (this.RadioButtonList1.SelectedValue =="2")
                this.myDiv1.Visible = true;
    else
        this.myDiv1.Visible = false;

} 
```

**客户端解决方案**：

**Javascript**：

```
 window.onload = function () {
            var inputs = document.getElementsByTagName("input");

            if (inputs.length > 0) {
                for (var i = 0; i < inputs.length; i++) {
                    if (inputs[i].type == "radio") {
                        inputs[i].onclick = function () {
                            if (this.value == "2") {
                                document.getElementById("div1").style.display = "block";
                            }
                            else {
                                document.getElementById("div1").style.display = "none";
                            }
                        }
                    }
                }
            }
        } 
```

**标记**：

```
<asp:RadioButtonList ID="RadioButtonList1" runat="server" AutoPostBack="True" >
    <asp:ListItem Text="SearchByName" Value="1"></asp:ListItem>
        <asp:ListItem Text="SearchByDate" Value="2"></asp:ListItem>
        <asp:ListItem Text="SearchByValue" Value="3"></asp:ListItem>
</asp:RadioButtonList>

<div id="div1" style="display:none">Div Content</div> 
```

当然，这将获得页面中的所有单选按钮，因此您可能需要确保获得正确的单选按钮。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T17:14:08.057

**最好将客户端脚本用于此类操作**...

我已经使用 JQuery 编写了下面的代码尝试...

**查询：**

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script>
        $(document).ready(function () {
            $('#RadioButtonList1 input').click(function () {
                var value = $('#RadioButtonList1 input:checked').val();
                if (value == 1) {
                    $("#divName").show();
                    $("#divDate").hide();
                    $("#divValue").hide();
                }
                if (value == 2) {
                    $("#divName").hide();
                    $("#divDate").show();
                    $("#divValue").hide();
                }
                if (value == 3) {
                    $("#divName").hide();
                    $("#divDate").hide();
                    $("#divValue").show();
                }

            });
        });
</script> 
```

**HTML：**

```
<asp:RadioButtonList ID="RadioButtonList1" runat="server">
    <asp:ListItem Text="SearchByName" Value="1"></asp:ListItem>
     <asp:ListItem Text="SearchByDate" Value="2"></asp:ListItem>
     <asp:ListItem Text="SearchByValue" Value="3"></asp:ListItem>
</asp:RadioButtonList>

<div id="divName">Search By Name</div>
<div id="divDate">Search By Date</div>
<div id="divValue">Search By Value</div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T16:59:24.557

您必须设置`AutoPostback = "true"`，处理`OnSelectedIndexChanged`事件，然后在后面的代码中显示/隐藏适当的 div。像这样的东西：

```
<asp:RadioButtonList AutoPostBack="True"  
 OnSelectedIndexChanged="Index_Changed" ID="RadioButtonList1" runat="server">
    <asp:ListItem Text="SearchByName" Value="1"></asp:ListItem>
     <asp:ListItem Text="SearchByDate" Value="2"></asp:ListItem>
     <asp:ListItem Text="SearchByValue" Value="3"></asp:ListItem>
</asp:RadioButtonList>

protected void Index_Changed(Object sender, EventArgs e) 
{

   if(RadioButtonList1.SelectedIte.Value=="1")
   {
      div1.Visible=true;
      div2.Visible=false;
      div3.Visible=false;
   else if(RadioButtonList1.SelectedIte.Value=="2")
   {
      div2.Visible=true;
      //and so on...
   }
} 
```

显然，div 本身必须是服务器端控件，因此您必须像这样声明它们：

```
<div id="div1" runat="server">
content here
</div> 
```

# java - 如何使用 Jsoup 获取特定字符串

> ID：15884672
> 
> 赞同：-2
> 
> 时间：2013-04-08T16:51:51.700
> 
> 标签：java, html-parsing, jsoup

如何使用**Jsoup**获取 productId 值（6030283523） ？还有另一种方法吗？

我正在努力

```
Elements dis = doc.select("dl[class=cs-cfg] > dt").get(4).getAllElements();
for (Element el : dis) {
System.out.println(el.text());
}

<div id="cs-cfg" style="display: none" class="notranslate">
  <dl class="cs-cfg">
    <dt>retailerId</dt><dd>8892574b</dd>
    <dt>locale</dt><dd>BR</dd>      
    <dt>storeId</dt><dd>passarelaFeminino</dd>
                <dt>excludeDefaultStore</dt><dd>true</dd>
                <dt>view</dt>
                <dd>
                  <dl>
                    <dt>productId</dt><dd>6030283523</dd>
                    <dt>category</dt><dd>Scarpin</dd>
                    <dt>brand</dt><dd>CRAVO E CANELA</dd>
                  </dl>
                </dd>

        </dl>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:22:27.500

试试这个：

```
Elements dis = doc.select("dd > dl > dd").get(0).getAllElements();
for (Element el : dis) {
    System.out.println(el.text());
} 
```

请记住，这可以为空。此外，如果元素被移动，这将不起作用。

还可以查看选择器的文档：http: [//jsoup.org/cookbook/extracting-data/selector-syntax](http://jsoup.org/cookbook/extracting-data/selector-syntax)。

# java - 从 LinkedList 获取最大值

> ID：15884676
> 
> 赞同：0
> 
> 时间：2013-04-08T16:52:05.043
> 
> 标签：java

我正在制作一个应用程序，用户可以在其中保存目的地和旅行长度的旅行。然后我想看看最长的是什么。所有行程都是 LinkedList 中的对象，行程长度是整数。

我怎样才能获得最高价值的旅行长度？

**解决方案：**最终通过节点使用迭代：

```
for (Travel travel : travelList) {
longest = travel.getLength();
destination = travel.getDest();
if (travel.getLength() >= longest)
{
    destination = travel.getDest();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:53:39.837

考虑对 LinkedList 的每个节点进行迭代以找出最长的目的地。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:55:27.130

如果您使用自己的 java 对象存储旅行，那么这里是指针。查看 Collections.max() 和 Comparator 和 Comparable 接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:58:09.080

您可以利用[`public static <T> T max(Collection<? extends T> coll, Comparator<? super T> comp)`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#max%28java.util.Collection,%20java.util.Comparator%29).

您需要[`Comparator`](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)首先为您创建一个对象，并在调用该方法时提供一个比较器的实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T17:02:59.187

您可以修改您的 Travel 类，使其实现 Comparable 接口，并添加类似的内容。-

```
@Override
public int compareTo(Travel another) {
    return getLength().compareTo(another.getLength());
} 
```

然后你可以打电话

`Collections.sort(travelsList);`

`compareTo`使用方法中定义的比较标准对列表进行排序

# python - Python，打印十六进制删除第一个 0？

> ID：15884677
> 
> 赞同：13
> 
> 时间：2013-04-08T16:52:15.420
> 
> 标签：python, hex

看看这个：

```
fc = '0x'
for i in b[0x15c:0x15f]:
    fc += hex(ord(i))[2:] 
```

假设这段代码找到了十六进制 00 04 0f ，而不是那样写，它删除了第一个 0 ，并写道 : 04f 有什么帮助吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-08T16:56:42.817

发生这种情况是因为`hex()`不会包含任何前导零，例如：

```
>>> hex(15)[2:]
'f' 
```

为确保您始终获得两个字符，您可以[`str.zfill()`](http://docs.python.org/2/library/stdtypes.html#str.zfill)在必要时添加前导零：

```
>>> hex(15)[2:].zfill(2)
'0f' 
```

这是您的代码中的样子：

```
fc = '0x'
for i in b[0x15c:0x15f]:
    fc += hex(ord(i))[2:].zfill(2) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-11-29T18:59:51.963

```
>>> map("{:02x}".format, (10, 13, 15))
['0a', '0d', '0f'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T16:53:33.357

```
print ["0x%02x"%ord(i) for i in b[0x15c:0x15f]] 
```

使用格式字符串`"%2x"`告诉它格式化为 2 个字符宽，同样`"%02x"`告诉它用 0 填充

请注意，这仍然会从具有超过 2 个十六进制值的事物中删除前导 0，例如：`"0x%02x"%0x0055 => "0x55"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T16:54:46.247

为了您的方便，它仍然只是一个图形表示。
该值实际上并没有从数据中删除，它只是在视觉上缩短了。

此处的完整描述以及为什么或为什么不重要：[为什么十六进制数字以 0x 为前缀？](https://stackoverflow.com/questions/2670639/why-are-hexadecimal-prefixed-as-0x)

# c++ - 如何在 AVI 模块中捆绑所有需要的编解码器？

> ID：15884685
> 
> 赞同：0
> 
> 时间：2013-04-08T16:52:40.410
> 
> 标签：c++, codec, avi

我开发了让用户录制 avi 文件的程序。

我使用 vfw.h lib 进行 AVI 记录和 avi 编解码器选项对话框，让用户选择需要使用的编解码器选项。

此对话框列出所有已安装为 MicroSoft Video codec 1、Cinepak、...的计算机的所有 AVI 编解码器

如果我想将编解码器用作 Dix6.1 编解码器，我必须将其作为单独的软件安装。

我的问题是当我使用 AVISaveOption 的 AVI 编解码器对话框时，此列表列出了所有系统编解码器，并且有些编解码器无法正常工作，并且我的应用程序有一些不必要的编解码器。如果我想使用它，除了必须单独安装 Dix 或 MPEG coecs 之外，这对我的应用程序来说并不先进。

所以现在，我想问你，我们是否有办法将所有需要的编解码器（如 Dix、MPEG1、MPEG4、MS 视频编解码器 1）捆绑到我需要的编解码器中，我的意思是我想用自己的弹出编解码器自己列出这个对话框不使用 AVISaveOptions(hwnd, 0, 1, &m_pAviStream, (LPAVICOMPRESSOPTIONS FAR *) &aopts) 列出并选择编解码器选项。

提前致谢，

大同集团！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:02:42.637

即使有一种程序化的方式来做到这一点（并且没有），这几乎肯定**不是**一个聪明的主意。

要问自己的问题：

*   这些编解码器可以再分发吗？
*   您*是否*有权重新分发它们？

有些事情告诉我，大多数这些编解码器背后的人不会在未经许可的情况下接受这种重新分发。

# modx - MODX getPage 在第一个资源中缓存不可缓存的片段，如何修复错误

> ID：15884686
> 
> 赞同：0
> 
> 时间：2013-04-08T16:52:40.587
> 
> 标签：modx, modx-revolution, modx-templates, modx-chunks, modx-resources

我有一个奇怪的问题。我使用 getPage 来查看一些类似的资源。他们有一个模板和相同的资源选项。问题是 getPage 试图在第一个元素中缓存我的不可缓存片段。如果您看到下一个代码，您会注意到差异。

```
 'output' => '<div class="thumbnail">20:21:54 </div> ... <div class="thumbnail">[[!showDate:gt=`0`:show]]</div> ... <div class="thumbnail">[[!showDate:gt=`0`:show]]</div>' 
```

这里是“完整”版本的链接[http://pastie.org/7372941](http://pastie.org/7372941)

如您所见，即使我不想要它，也只有第一个元素呈现，请帮助我修复，我正在尝试......但是核心中有太多代码 4 我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T21:21:33.830

Столкнулся с той же самой проблемой... Пришлось извращаться :(

Создал dummy ресурс, который прописал в критериях выборки через `&resources=`dummy-id``и установил его свойства таким образом, чтобы мон выводился всерод В моем случае поставил дату `publishedon`на 20 лет вперед。Потом для `getResources`прописал `&tplFirst=`@INLINE <div></div>``, чтобы этот ресурс не отображался。Ну и напоследок выставил для `getPage`количество отображаемых ресурсов на первой странице на 1 больше через параметр`&pageOneLimit=`[[+page_size:incr]]``

* * *

*谷歌翻译的不是很好*

面临同样的问题... 已经颠覆了：（

我创建了一个在选择标准中规定的虚拟资源，`& resources = `dummy-id``并设置了它的属性，以便它始终首先显示。就我而言，将日期设置`publishedon`为未来 20 年。然后对于`getResources`规定`& tplFirst = `@ INLINE <div> </ div>``，不显示此资源。最后`getPage`在一个参数中再设置一个为首页显示资源的数量`& pageOneLimit = `[[+ page_size: incr]]``

# java - mysql 结果未使用 java 小程序正确写入文件

> ID：15884689
> 
> 赞同：1
> 
> 时间：2013-04-08T16:52:41.573
> 
> 标签：java, mysql, jdbc, applet, jnlp

我正在尝试做一个示例来使用 java applet 将数据库记录写入文件。但问题是在运行小程序后，我看到文件已创建但它包含垃圾数据。

我已经签署了我的小程序（按照本教程： http: [//www.narendranaidu.com/2007/11/3-easy-steps-to-self-sign-applet-jar.html](http://www.narendranaidu.com/2007/11/3-easy-steps-to-self-sign-applet-jar.html)）

我试过把 mysql-创建的 jar (SaveToFile.jar) 中的连接器。但同样的事情发生了。所以我很困惑数据库连接是否真的发生了。

构建后，我的项目结构如下所示（这里我只显示构建的部分）：

```
appletTest/
    out/production/appletTest/
                             applet/SaveToFile.class
                             SaveToFile.html
                             SaveToFile.jar
                             mysql-connector-java-5.1.24-bin.jar
                             file-applet.jnlp
                             keystore 
```

用火狐浏览器打开html文件后（chrome没有任何反应，不知道为什么！）并通过授予applet运行的权限，在同一目录下成功创建了data.txt文件。

这是Java代码：

```
package applet;

    public class SaveToFile extends Applet {

    public void init() {
        try {
            getData();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }

    private void getData() throws SQLException, ClassNotFoundException, IllegalAccessException, InstantiationException {
        String myDriver = "com.mysql.jdbc.Driver";
        String dbUrl = "jdbc:mysql://localhost/APPLET?user=root&password=root&characterSet=utf8&useUnicode=true&characterEncoding=utf-8&characterSetResults=utf8";
        Class.forName(myDriver);
        Connection conn = DriverManager.getConnection(dbUrl);
        Statement stmt = conn.createStatement();
        try {
            ResultSet rs = stmt.executeQuery( "SELECT * FROM applet" );
            try {
                String text = "";
                while ( rs.next() ) {
                    text += rs.getString("title");
                }
                writeToFile(text);
            } catch (SQLException e) {
                e.printStackTrace();
            } finally {
                try {
                    rs.close();
                } catch (Throwable ignore) {
                    ignore.printStackTrace();
                }
            }
        } catch (SQLException e) {
            e.printStackTrace();
        } finally {
            try {
                stmt.close();
            } catch (Throwable ignore) {
                ignore.printStackTrace();
            }
        }
    }

    public void writeToFile (String text) {
        try {
            DataOutputStream dataOut = new DataOutputStream(new FileOutputStream("data.txt"));
            dataOut.writeUTF(text);
            dataOut.close();
        } catch(Exception x) {
            x.printStackTrace();
        }
    }
} 
```

这是jnlp：

```
<?xml version="1.0" encoding="UTF-8"?>
    <jnlp spec="1.0+" codebase="" href="">
        <information>
        <title>Write To File</title>
        <vendor>Vendor</vendor>
    </information>
    <resources>
        <!-- Application Resources -->
        <j2se version="1.7+"
          href="http://java.sun.com/products/autodl/j2se"
          max-heap-size="128m"/>
        <jar href="SaveToFile.jar" main="true"/>
    </resources>
    <applet-desc name="Test Applet"
         main-class="applet.SaveToFile"
         width="22"
         height="22"/>
    <update check="background"/>
    <security>
        <all-permissions/>
    </security>
</jnlp> 
```

这是html：

```
<!DOCTYPE html>
<html>
<head>
    <title>Applet Test</title>
</head>
<body>
<script src="http://java.com/js/deployJava.js"></script>
<script type="text/javascript">
    var attributes = { code:'applet.SaveToFile',  width:22, height:22} ;
    var parameters = {jnlp_href: 'file-applet.jnlp'} ;
    deployJava.runApplet(attributes, parameters, '1.7');
</script>
<applet
        id="saveToFile"
        width=22
        height=22
        code="applet.SaveToFile"
        archive="SaveToFile.jar"
        jnlp_href = 'file-applet.jnlp'
        />
</body>
</html> 
```

最后是mysql表：

```
+----+--------+
| id | title  |
+----+--------+
|  1 | TITLE1 |
|  2 | TITLE2 |
|  3 | TITLE3 |
|  4 | TITLE4 |
+----+--------+ 
```

即使我已经尝试过这个查询（如下：[http](http://www.tech-recipes.com/rx/1475/save-mysql-query-results-into-a-text-or-csv-file/) ://www.tech-recipes.com/rx/1475/save-mysql-query-results-into-a-text-or-csv-file/ ）但没有这次发生了：

```
SELECT * FROM applet
INTO OUTFILE 'tmp/data.txt'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n' 
```

此外，如果有人可以举一个例子来说明在处理 javascript 和 applet 之间的数据库交互方面的安全性，那将会很有帮助。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:54:07.063

行。我成功地解决了这个问题。我已经提取了 mysql-connector 并将所有这些提取的文件与 applet 类文件一起放在存档 jar 中，mysql 数据检索现在运行良好。这是我在 Windows 中使用的命令（在构建部分下）：

```
appletTest/
    out/production/appletTest/    

mkdir tmp
cd tmp
jar -xf ../mysql-connector-java-5.1.24-bin.jar
cd..
jar -cvf SaveToFile.jar applet\SaveToFile.class -C tmp/ .
rmdir tmp /S 
```

并且使用创建的 jar 文件作为存档可以正确处理数据库。

# ios - addOperationWithBlock 的操作顺序

> ID：15884690
> 
> 赞同：3
> 
> 时间：2013-04-08T16:52:41.903
> 
> 标签：ios, cocoa-touch, nsoperationqueue

我正面临着一些奇怪的结果`addOperationWithBlock`。

我的函数看起来像这样：

```
-(void) myFunction{
   NSLog(@"VISITED");

 ..

  for (NSDictionary *Obj in myObjects)
  {
    [operationQueue addOperationWithBlock:^(void){
         MyObject* tmp = [self tediousFunction:Obj];
         // threadTempObjects is member NSMutableArray
         [self.threadTempObjects addObject:tmp];
         NSLog(@"ADDED");
    }];
  }

 [operationQueue addOperationWithBlock:^(void){
       [self.myArray addObjectsFromArray:self.threadTempObjects];

       for(myObject *myObj in self.myArray)
       {
            // MAIN_QUEUE
            [[NSOperationQueue mainQueue] addOperationWithBlock:^(void) {
                [self updateUI:myObj];
            }];
       }
   }];

   [operationQueue addOperationWithBlock:^(void){
       [[NSOperationQueue mainQueue] addOperationWithBlock:^(void) {
             [self filterResults];
       }];
   }];

} 
```

我的字典包含 4 个值，因此 ADDED 在日志中显示 4 次。 **但是**，当我检查**filterResults内部时，我发现****myArray**内部只有**2 个**对象。这意味着在调用 filterResults 操作之前调用了 4 次 operationQueue 并没有结束（尽管它是后来添加的！）

 **我认为 operationQueue 是串行的，并且我可以依靠它，当我添加一个操作时，它将在最后一个操作之后立即添加。所以奇怪的是，在之后的数组中只有 2 个操作。我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:09:57.357

从您共享的初始化代码中，我们可以了解到它`operationQueue`不是串行的，这意味着它将执行操作并分配线程直到系统设置最大线程数（与 GCD 相同）。
这意味着添加到的操作`operationQueue`是并行运行的。
要连续运行它们，请将其设置`maxConcurrentOperationCount`为 1。
尝试以下操作：

```
__block __weak id weakSelf = self;
[operationQueue setMaxConcurrentOperationCount:1];

for (NSDictionary *Obj in myObjects)
{
    [operationQueue addOperationWithBlock:^{
        MyObject* tmp = [weakSelf tediousFunction:Obj];
        // threadTempObjects is member NSMutableArray
        [weakSelf.threadTempObjects addObject:tmp];
        NSLog(@"ADDED");
    }];
}

[operationQueue addOperationWithBlock:^{
    [weakSelf.myArray addObjectsFromArray:weakSelf.threadTempObjects];

    for(myObject *myObj in weakSelf.myArray)
    {
        // MAIN_QUEUE
        [[NSOperationQueue mainQueue] addOperationWithBlock:^(void) {
            [weakSelf updateUI:myObj];
        }];
        [[NSOperationQueue mainQueue] addOperationWithBlock:^(void) {
            [weakSelf filterResults];
        }];
    }
}]; 
```

但是，这与简单地相同（甚至效率更低）：

```
__block __weak id weakSelf = self;
[operationQueue addOperationWithBlock:^{
    for (NSDictionary *Obj in myObjects) {
        MyObject* tmp = [weakSelf tediousFunction:Obj];
        // threadTempObjects is member NSMutableArray
        [[NSOperationQueue mainQueue] addOperationWithBlock:^(void) {
            [weakSelf updateUI:tmp];
        }];
        [weakSelf.myArray addObject:tmp];
        NSLog(@"ADDED");
    }
    [[NSOperationQueue mainQueue] addOperationWithBlock:^(void) {
        [weakSelf filterResults];
     }];
}]; 
```**

# mysql - 如何通过 mysql workbench 将数据导入 mysql 数据库？

> ID：15884693
> 
> 赞同：47
> 
> 时间：2013-04-08T16:52:47.287
> 
> 标签：mysql, mysql-workbench

我在mysql中创建了一个数据库。我有一个 .sql 文件。如何通过 mysql workbench 将其导入我的数据库？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-04-08T17:34:04.477

*   在主窗口的服务器**管理**下，选择要将数据库还原到的服务器实例（如果是第一次这样做，则创建**新的服务器实例）。**
*   单击**管理导入/导出**
*   单击屏幕左侧的**数据导入/恢复。**
*   选择**从独立文件导入**单选按钮（屏幕右侧）
*   选择.sql的路径
*   单击窗口右下角的**开始导入按钮。**

希望能帮助到你。

---编辑答案---

关于模式的选择。MySQL Workbench (5.2.47 CE Rev1039) 尚不支持导出到用户定义的模式。它将仅创建您为其导出 .sql 的架构...在 5.2.47 中，我们看到“新建”目标架构。但它不起作用。我使用 MySQL Administrator（旧的前 Oracle MySQL Admin 美女）进行备份/恢复工作。你仍然可以从谷歌搜索的可信来源下载它（搜索 MySQL Administrator 1.2.17）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-08T14:26:56.503

对于 MySQL Workbench 6.1：在主窗口中单击服务器实例（连接）/ 或创建一个新实例。在如此打开的“连接”选项卡中，单击“服务器”->“数据导入”。其余步骤与 Vishy 的回答相同。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-01-07T12:58:56.613

1.  开放式连接
2.  选择“管理”选项卡
3.  点击数据导入

上传sql文件

[![在此处输入图像描述](https://i.stack.imgur.com/kG13J.png)](https://i.stack.imgur.com/kG13J.png)

确保在这个屡获殊荣的 GUI 中选择您的数据库：

[![在此处输入图像描述](https://i.stack.imgur.com/88H7R.png)](https://i.stack.imgur.com/88H7R.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-19T18:54:10.117

对于*MySQL Workbench 8.0*，导航到：

```
Server > Data Import 
```

出现一个名为“**管理 - 数据导入/恢复”**的新选项卡。在那里，您可以根据需要选择导入转储项目文件夹或使用特定的 SQL 文件。然后您必须选择数据将被导入到的架构，或者您必须单击`New...`按钮为新架构键入名称。

然后您可以选择要导入的数据库对象，或者只需单击`Start Import`选项卡区域右下角的按钮。

完成后，如果导入成功，您需要通过单击箭头圆圈图标来更新*Schema Navigator 。*

就是这样！

有关更多详细信息，请查看[MySQL Workbench 手册：6.5.2 SQL 数据导出和导入向导](https://dev.mysql.com/doc/workbench/en/wb-admin-export-import-management.html)

# replication - 数据复制和同步的区别？

> ID：15884697
> 
> 赞同：7
> 
> 时间：2013-04-08T16:53:02.143
> 
> 标签：replication, sync, database-replication, data-synchronization

我很难找到数据同步和复制之间的差异。

据我所知，复制使两个数据库之间的所有数据都相同。同步并不一定会使两个数据库之间的所有数据都相同。复制是一次性传输，同步可以是小的更新以保持数据一致？我不太确定，请在这里纠正我？

如果我有一个存储多个手机数据的中央 mySQL 数据库，并且我的目标是保持手机中的数据与 mySQL 中的数据相同（仅限某些用户数据），那是同步还是复制，还是两者兼而有之？它最初会获取所有用户数据（复制），然后发送任何更新的数据（同步）？

希望有大神能解惑，万分感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T17:10:57.730

说的很直白：

*   **复制**强烈暗示（所有）数据有两个或多个副本
*   **同步**意味着两个或多个数据副本保持*最新*，但不一定每个副本都包含所有数据（尽管这通常是数据库同步的情况）

但我敢打赌，这些术语经常可以互换使用，我很确定我可以找到很多“复制”的例子来描述多个数据库保持同步。

所以不要太拘泥于这两个术语——它们的含义是一样的，但显然不同的数据库系统或工具在实现它们所谓的“复制”或“同步”的方式上可能存在巨大差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-25T22:10:47.677

正如上一张海报所解释的，它们可以互换使用，但是它们具有不同的含义。

正如他所说，复制是同时存在数据库的两个或多个“副本”的情况。这允许用户在“同一个”数据库上工作，而无需争夺访问时间或不得不应对通信传输时间或网络延迟等技术限制。

同步将在某个预定时间段（可能是几分钟、几小时、几天、几周）之后进行，并且相当于将对数据库的不同副本所做的更改重新合并到主数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-07T23:42:49.113

1）本质上，复制是使多个数据库立即相同，几乎为零或接近零的时间延迟。

2) 同步与上述相同，但时间滞后 => 0（秒、分钟、天、月等）。

3）时间延迟是一个主要区别。

4）因此，从技术上讲，复制是同步的一个子集。这就是为什么您会听到诸如**Replicated synchronization**之类的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-07T16:02:48.057

对此的一些答案取决于使用它的上下文。

例如，Informatica ETL 工具具有“数据复制”和“数据同步”任务 - 在这里，数据复制意味着源表中的字段被精确复制到目标表中的相应字段，而同步允许转换 -公式、查找等。此外，复制是一种单向流程，例如从生产数据库到备份。同步可以是双向的，例如，服务可以同时提供到中央服务器的 Web 界面，以及携带本地副本以供离线使用的应用程序 - 更新可以通过任一数据库进入并同步到另一个数据库。

# javascript - AngularJS 在 IE8 中未定义

> ID：15884699
> 
> 赞同：8
> 
> 时间：2013-04-08T16:53:14.347
> 
> 标签：javascript, internet-explorer, internet-explorer-8, angularjs

我正在开发一个使用 AngularJs 的大型应用程序。

当我在 IE8 中查看页面时，我会收到超级漂亮的控制台错误，例如`Object doesn't support property or method 'module'`, `Object doesn't support property or method 'widget'`,`unable to get value of the property 'controller': object is null or undefined`和`IE really sucks, cant you just tell them to download chrome?`

在与它斗争了一段时间后，我决定记录`typeof angular`控制台返回的日志`undefined`。

在 IE9、IE10 和所有不糟糕的浏览器中，一切都按预期工作。

请帮忙！

**编辑**：

看来角度是`undefined`在它到达我的第一个控制器之前，所以我认为它与 ieshim 无关......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T22:01:44.757

我已经使用 IE8 六个月了，感受一下你的痛苦。

没有看到你的代码，很难准确地说出什么问题

这是我刚刚用 IE8 测试的一个非常基本的页面，供您比较：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=8">
    <meta charset="utf-8">
    <title>Prompt Detail View</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- disable browser cache -->
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />

    <!--[if lte IE 8]>
    <script>
        document.createElement('ng-include');
        document.createElement('ng-pluralize');
        document.createElement('ng-view');
        // Optionally these for CSS
        document.createElement('ng:include');
        document.createElement('ng:pluralize');
        document.createElement('ng:view');
    </script>
    <![endif]-->

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
          <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

    <script src="js/jquery-1.7.2.min.js"></script>
    <script src="js/angular-1.0.2.js" ng:autobind></script>

<script>
var pageModule = angular.module('pageModule',[])
.controller('pageCtrl',function($scope) {
   $scope.foo = 'my foo'; 
});

</script>
</head>

<body>
    <div ng-app="pageModule"
        ng-controller="pageCtrl">
            {{foo}}
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T21:21:13.663

所以这完全是我的错（或者几个月前开始这个应用程序的人）。

我的应用程序控制器`var angular = angular || {}`在顶部，IE8 不同意这个声明。

删除后一切正常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-14T14:57:48.593

我也遇到了同样的问题，我的 IE9 浏览器无法识别任何 AngularJs 标签，在尝试了一切之后，我决定在服务器中运行 html 文件并且它工作正常。

总结一下，当我按如下方式执行文件时它不起作用

file:///C:/AngularJS/firstTest.html

当我按如下方式在服务器中执行文件时，它确实有效

[http://localhost:7001/AngularJS/firstTest.html](http://localhost:7001/AngularJS/firstTest.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-02T12:29:56.923

```
var versionError = angular.module('versionErrors', [])
  .controller('versionCtrl', function($scope) {
    $scope.name = 'Shantha Moorthy K';
  });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.7/angular.min.js"></script>
<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta charset="utf-8">
  <title>AngularJS with Lower version Error's</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <div ng-app="versionErrors" ng-controller="versionCtrl">
    {{name}}
  </div>
</body>

</html>
```

## 对象不支持属性或方法“模块”

`如果您使用 AngularJS + IE(8) 的低版本，请包括 content="IE=edge"。

包含之后，您将克服以下错误。

1.  预期对象
2.  对象不支持属性或方法“模块”`##

# f# - 如何将 printf 样式的函数传递给 F# 中的另一个函数

> ID：15884703
> 
> 赞同：3
> 
> 时间：2013-04-08T16:53:38.380
> 
> 标签：f#, type-inference

我想在 F# 中创建一个函数，它接受 printf 样式的函数作为参数，并使用该参数输出数据。用法如下所示：

```
OutputStuff printfn 
```

我的第一次尝试是让编译器为我解决所有问题：

```
let OutputStuff output =
    output "Header"
    output "Data: %d" 42 
```

那失败了，因为它决定那`output`是一个函数 take`string`和 return `unit`，所以第二次调用失败了。

接下来，我尝试声明`output`具有与以下相同的签名`printfn`：

```
let OutputStuff (output : Printf.TextWriterFormat<'a> -> 'a) =
    output "Header"
    output "Data: %d" 42 
```

这失败了，因为编译器决定真正的类型`output`是`Printf.TextWriterFormat<string> -> unit`，所以第二次调用再次失败。它还会生成警告 FS0064，表明第一次调用`output`导致代码比类型注释更通用，这是问题的症结所在。

最后，我尝试将输出函数声明为单独的类型缩写：

```
type OutputMe<'a> = Printf.TextWriterFormat<'a> -> 'a
let OutputStuff (output : OutputMe<'a>) =
    output "Header"
    output "Data: %d" 42 
```

这失败了，结果与上一次尝试相同。

如何说服编译器不专门化 of 的类型`output`并将其保留为`Printf.TextWriterFormat<'a> -> 'a`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T17:21:01.760

问题是，当您说时`(output : Printf.TextWriterFormat<'a> -> 'a)`，这意味着“**有些**`'a`输出需要 a到`Printf.TextWriterFormat<'a>`a `'a`”。相反，您想说的是“**对于所有** `'a`输出都可以采用 a`Printf.TextWriterFormat<'a>`并返回 a `'a`。

这在 F# 中表达起来有点难看，但方法是使用具有泛型方法的类型：

```
type IPrinter =
    abstract Print : Printf.TextWriterFormat<'a> -> 'a

let OutputStuff (output : IPrinter) =
    output.Print "Header"
    output.Print "Data: %d" 42

OutputStuff { new IPrinter with member this.Print(s) = printfn s } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T17:26:21.147

我认为 kvb 的回答很好地解释了这个问题——为什么很难将`printf`类似的函数作为参数传递给其他函数。虽然 kvb 提供了一个使这成为可能的解决方法，但我认为它可能不是很实用（因为接口的使用使它有点复杂）。

所以，如果你想参数化你的输出，我认为它更容易`System.IO.TextWriter`作为一个参数，然后使用`printf`类似的函数将输出打印到指定的`TextWriter`：

```
let OutputStuff printer =
  Printf.fprintfn printer "Hi there!"
  Printf.fprintfn printer "The answer is: %d" 42

OutputStuff System.Console.Out 
```

这样，您仍然可以使用`printf`样式格式化字符串打印到不同的输出，但代码看起来要简单得多（或者，您可以使用`Printf.kprintf`并指定一个打印函数，`string`而不是 using `TextWriter`）。

如果要打印到内存中的字符串，这也很容易：

```
let sb = System.Text.StringBuilder()
OutputStuff (new System.IO.StringWriter(sb))
sb.ToString() 
```

通常，`TextWriter`它是用于指定打印输出的标准 .NET 抽象，因此它可能是一个不错的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-17T04:29:49.797

使用`inline`FSharp 的功能，您可以使用“工作”函数预先配置该`Printf.ksprintf`函数，从而获得一个最终函数，该函数接受格式字符串及其类似于`printf`or的特殊必需参数`sprintf`。接受结果的工作函数`string`可能可以做任何它想做的事情，例如在这个记录示例的情况下，它打印`string`到`console`：

```
let logger = fun (msg:string) -> System.Console.WriteLine msg
let inline log msg = Printf.ksprintf logger msg 
```

使用示例：

```
open System
open System.Globalization.CultureInfo.CurrentCulture

log "Hello %s, how is your %s" name Calendar.GetDayOfWeek(DateTime.Today)

log "132 + 6451 = %d" (132+6451)

... 
```

# sql - SQL 更新：子查询返回超过 1 个值

> ID：15884705
> 
> 赞同：3
> 
> 时间：2013-04-08T16:53:41.897
> 
> 标签：sql, sql-server

我在使用此更新声明时遇到问题。我不确定如何重新表述它，以便对于我的“in”语句中的每个项目，它将规则 ID 更新为 109。

```
UPDATE mytable 
SET RuleID = 109 
WHERE mytable.ItemId in (534157, 534154); 
```

这失败了，并给了我以下错误：

> 消息 512，级别 16，状态 1，过程 CLID_Hist，第 17 行
> 子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。
> 该语句已终止。

我很感激有人的帮助。对于给定的 ItemID 列表，我想将 RuleID 更新为 109。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:57:01.800

做这个：

```
UPDATE mytable SET RuleID = 109 WHERE ItemId IN (534157, 534154); 
```

您不需要该`FROM`子句，因为您使用的是同一张表。

这是使用数据的 SQL Fiddle：[http ://sqlfiddle.com/#!6/238dd/2](http://sqlfiddle.com/#!6/238dd/2)

它工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:58:49.977

只需摆脱“from”子句行，如果这就是您正在使用的查询。

# maven - 使用 ftp 上传的 maven 部署：我只想上传 war 文件，但正在上传更多文件

> ID：15884708
> 
> 赞同：3
> 
> 时间：2013-04-08T16:53:58.327
> 
> 标签：maven, ftp, pom.xml, maven-wagon-plugin

我完全按照此处指定的说明进行操作：

[http://maven.apache.org/plugins/maven-deploy-plugin/examples/deploy-ftp.html](http://maven.apache.org/plugins/maven-deploy-plugin/examples/deploy-ftp.html)

（唯一的区别是我使用的是 2.4 版的 wagon-ftp）。

然后执行

> mvn 部署

我只想上传一个war文件，但是它上传了其他几个文件，带有pom、md5、sha1扩展名，并将它们埋在我的一个源目录下。

我一直在尝试寻找合适的配置来修改这种行为，但还没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T17:42:14.733

使用 Ant 和它的[FTP 任务](http://ant.apache.org/manual/Tasks/ftp.html)来上传生成的战争文件。

使用[antrun 插件](http://maven.apache.org/plugins/maven-antrun-plugin/usage.html)，您可以像这样执行您的 ant 脚本：

```
 <plugin>
   <groupId>org.apache.maven.plugins</groupId>
   <artifactId>maven-antrun-plugin</artifactId>
   <version>1.7</version>
   <configuration>
     <target>
        <property name="file_name" value="${project.build.finalName}.war" />
        <ant antfile="${basedir}/build.xml">
           <target name="war upload" />
        </ant>
     </target>
   </configuration>
 </plugin> 
```

用于`property`定义一些属性，例如 ant 脚本的文件名/路径。也可以在 ant 脚本中访问所有 maven 的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T17:47:54.753

wagon-plugins 用于将工件部署到存储库，存储库需要所有其他文件才能运行。如果您尝试将 .war 文件 ftp 到服务器进行部署，请为您的服务器使用正确的插件，而不是 wagon-plugin。

该插件的文档以

> 为了使用 FTP 部署工件...

`mvn deploy`用于将工件部署到存储库，因此存储库运行所需的所有其他文件也会被上传。

# php - phpunit 自动加载冲突，phpunit 自动加载被覆盖

> ID：15884711
> 
> 赞同：1
> 
> 时间：2013-04-08T16:54:13.223
> 
> 标签：php, phpunit, autoload

我的固件使用自动加载功能，我通过`spl_autoload_register('autoload');`
在目录上运行 phpunit 添加该功能。执行第一次测试后，系统崩溃：

```
PHP Fatal error:  require_once(): 
Failed opening required 'PHPUnit/Extensions/SeleniumTestCase.php' (include_path='.:/ ......)
in /home/test/functions.php on line 139 
```

这指向**我的**autolaod 函数，而不是假设使用的一个 phpunit。
这是否意味着我的函数首先被使用，然后是 phpunit 函数，它在我的函数中崩溃了？

如果我改变我`autoload`的使用`include`而不是`require_once`它会正常工作。所以我想这是自动加载功能问题的顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:58:26.887

您应该在自动加载功能中使用`include_once`而不是，`require_once`如果找不到文件，它将避免致命。

或者您可以通过使用将自动加载器放在 SPL 自动加载器堆栈的末尾

```
spl_autoload_register('autoload', true, true); 
```

将您的引导程序提供给 phpunit，可能可以解决此问题。在你的`phpunit.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit bootstrap="bootstrap.php">
</phpunit> 
```

# jquery - 创建动态 html 表，其中 td 值与 ms sql db 中的 th 值相关联

> ID：15884712
> 
> 赞同：2
> 
> 时间：2013-04-08T16:54:18.277
> 
> 标签：jquery, sql-server, coldfusion

使用 ColdFusion 9 服务器和 MS-SQL db，我正在尝试创建 html 表，其中 td 值与来自同一个 MS-Sql db 表的值相关联。

**查询 1 - 获取部门：**

```
<cfquery datasource="datasrc" name="qGetDep">
    SELECT DISTINCT Dept
    FROM someTable
    WHERE isnull(Dept, '') != ''
    ORDER BY DEPT ASC
</cfquery> 
```

**查询 2 - 获取名称**

```
<cfquery datasource="datasrc" name="qGetNam">
    SELECT a.Dept, a.names
    FROM someTable as a
    INNER JOIN
    (
    SELECT DISTINCT Dept, MIN(ID) as ID, names
    FROM someTable
    GROUP BY Dept, names
    ) as b
    ON a.Dept = b.Dept
    AND a.ID = b.ID
    WHERE isnull(a.Dept, '') != ''
    ORDER BY a.Dept ASC
</cfquery> 
```

**索引.cfm**

```
<table border="1" id="table1">
    <thead>
        <tr>
            <cfoutput query="qGetDep">
                <th><b>#DEPT#</b></th>
            </cfoutput>
        </tr>
    </thead>
    <tbody>
        <cfoutput query="qGetNam">
            <tr>
                <cfloop query="qGetDep">
                    <cfset cls= qGetDep.Dept>
                    <cfif qGetNam.Dept EQ cls >
                        <td class="#cls#">#qGetNam.names#</td>
                    <cfelse>
                        <td class="#cls#"></td>
                    </cfif>

                </cfloop>
            </tr>
        </cfoutput>
    </tbody>
</table> 
```

**使用我在 db 中的当前数据，这将输出类似于此的表：** ![在此处输入图像描述](https://i.stack.imgur.com/TdHzg.png)

我需要它变成这样。 ![在此处输入图像描述](https://i.stack.imgur.com/OlcV6.png)
jQuery 解决方案是可以接受的。
任何帮助将不胜感激。
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:32:21.943

我是根据我对您的“实际私人数据”的假设来回答这个问题的。

**希望即使我的假设是错误的，这可能会让你朝着正确的方向前进。**

如果这是你的 -

> 部门表

![部门表](https://i.stack.imgur.com/4XnM2.png)

这是你的

> 人员表

![人员表](https://i.stack.imgur.com/b6xuS.png)

然后使用这个查询 -

```
SELECT *
  FROM (
        SELECT a.id AS pid
              ,a.NAME
              ,b.dept
          FROM deptPeople a
              ,deptTable b
         WHERE a.dept = b.dept
       ) AS A
  PIVOT(
        MIN(NAME) FOR dept IN ( dept1, dept2, dept3, dept4, dept5)
       ) AS B 
```

会给你

![最后结果](https://i.stack.imgur.com/hGPpo.png)

像这样结合 ColdFusion 中的所有内容 -

```
<cfquery datasource="que_tempdb_int" name="qGetDep">
    SELECT dept
    FROM deptTable
    ORDER BY DEPT ASC
</cfquery>

<cfset allDept = valuelist(qGetDep.dept,',') />

<cfquery name="qGetNam" datasource="que_tempdb_int">
    SELECT *
      FROM (
            SELECT a.id AS pid
                  ,a.NAME
                  ,b.dept
                  FROM deptPeople a
                  ,deptTable b
             WHERE a.dept = b.dept
           ) AS A
      PIVOT(
            MIN(NAME) FOR dept IN (#allDept#)
           ) AS B
</cfquery>

<table border="1" id="table1">
    <thead>
        <tr>
            <cfoutput query="qGetDep">
                <th><b>#DEPT#</b></th>
            </cfoutput>
        </tr>
    </thead>
    <tbody>
    <cfoutput query="qGetNam">
        <tr>
            <cfloop list="#allDept#" index="dept" delimiters=",">
            <td>#qGetNam[dept][qGetNam.currentRow]#</td>
            </cfloop>
        </tr>
    </cfoutput>
    </tbody>
</table> 
```

最后结果 -

![HTML 数据透视表](https://i.stack.imgur.com/8sJiS.png)

# twitter-bootstrap - Twitter Bootstrap 的 HTML AJAX

> ID：15884714
> 
> 赞同：1
> 
> 时间：2013-04-08T16:54:22.847
> 
> 标签：twitter-bootstrap

我正在使用 twitter 引导框架在 asp.net c# 中开发一个解决方案。在其中一个页面上，我想显示一个带有 asp.net 页面的模式弹出窗口。我知道可以使用 iframe，但我试图避免这种情况。

有没有人知道一种为远程页面实现 ajax 模式的方法。远程页面也将有回发，理想情况下，ajax 模式将使用引导程序中的 css 文件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:55:22.380

您可以使用 jQuery`.html`加载内容：[jsFiddle](http://jsfiddle.net/BenedictLewis/q6NqY/)。

`$("#my_div_to_insert_content_into").html('<object data="http://tired.com/">');`

# java - 我如何引用从另一个类扩展 JPanel 的类

> ID：15884716
> 
> 赞同：-2
> 
> 时间：2013-04-08T16:54:32.870
> 
> 标签：java

我有一个 Circle 类，每个圆形元素都有一个用于在 jpanel 中移动圆圈的线程。CirclePanel 类与实际的 GUI 是分开的，并且有一个圆形元素的向量。我需要一种方法来重新绘制 jpanel，而无需每次都创建新面板。CirclePanel 在创建包含 CirclePanel 的框架的 GUI 类中实例化。每次圆圈移动时如何重绘面板？谢谢 ！

编辑：输入一些代码

圈类：

```
 public class Circle extends Thread {

    public Ellipse2D.Double thisCircle;
    public int size=30,xPoz,yPoz;
    Random r=new Random();
    int red=r.nextInt(255),green=r.nextInt(255),blue=r.nextInt(255);
    int deltax,deltay;
    public boolean ballStarted;

    public Circle()
    {xPoz=(int)Math.random()*300;
     yPoz=(int)Math.random()*300;
     ballStarted = true;
     deltax=-10+(int)(Math.random()*21);
     deltay=-10+(int)(Math.random()*21);
     if ((deltax == 0) && (deltay == 0)) { deltax = 1; }
     thisCircle=new Ellipse2D.Double(xPoz,yPoz,size,size);

    }

    public void draw(Graphics2D g2d){
    if(thisCircle!=null)
    {g2d.setColor(new Color(red,green,blue,80));
     g2d.fill(thisCircle);

    }  
    }

    public int PozX(){return xPoz;}
    public int PozY(){return yPoz;}
    public int radius(){return size*2;}

    public void grow(){
    size++;
    thisCircle.setFrame(xPoz,yPoz,size,size);
    }

    public void move(){
        int oldx=xPoz;
        int oldy=yPoz;

        int newx=oldx+deltax;
        int newy=oldy+deltay;

        if(newx+size>800 || newx<0)
            deltax=-deltax;
        if(newy+size>600 || newy<0)
            deltay=-deltay;

        thisCircle.setFrame(newx,newy,size,size);
    }

    public void run(){

        try {
               Thread.sleep(100); 
            }
            catch (InterruptedException e)
            {  System.out.println("Thread Halted");}
        while(ballStarted)
        {move(); }

    }

} 
```

这是圆形面板类：

```
public class CirclePanel extends JPanel {

    private int prefwid, prefht;
    public ArrayList<Circle> Circles = new ArrayList<Circle>();

    public ShapePanel(int pwid, int pht) {
        prefwid = pwid;
        prefht = pht;
        createCircles();
    }

    public void createCircles() {
        for (int i = 1; i <= 20; i++) {
            Circle nextCircle = new Circle();
            Circles.add(nextCircle);
            nextCircle.start();

        }
    }

    public Dimension getPreferredSize() {
        return new Dimension(prefwid, prefht);
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        for (int i = 0; i < Circles.size(); i++) {
            (Circles.get(i)).draw(g2d);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:44:27.207

我看不到从发布的代码中获取所需位置的明确方法，这可能就是您被卡住的原因。如果所有`Circle`线程都可以访问`JPanel`（它们有一个引用包含的字段变量`JPanel`），那么您可以让它们在移动后要求 JPanel 重新绘制。但我不认为这是去这里的方式。

您可能想要做的是创建一个每 100 毫秒触发一次的[javax.swing.Timer ，并且计时器指示所有圆圈移动。](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)除非有其他需要让每个 Circle 在自己的线程中运行，否则我认为这更简单，并且会产生更流畅的动画。一旦所有圈子都改变了它们的位置或大小或它们正在做的任何事情，那么计时器可以要求 JPanel 进行`repaint()`.

这是我的意思的一个例子：

```
import java.awt.Dimension;
import javax.swing.*;
import java.util.ArrayList;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

/**
*
* @author LLASPINA
*/
public class CirclePanel extends JPanel implements ActionListener {

  Timer timer;
  private int prefwid, prefht;
  ArrayList<Circle> circleList;

  public CirclePanel(int pwid, int pht) {
     prefwid = pwid;
     prefht = pht;
     createCircles();
     timer = new Timer(300, this);
     timer.start();
  }

  public void createCircles() {
     circleList = new ArrayList<Circle>();
     for (int i = 1; i <= 20; i++) {
        Circle nextCircle = new Circle();
        circleList.add(nextCircle);
     }
  }

  public Dimension getPreferredSize() {
     return new Dimension(prefwid, prefht);
  }

  public void paintComponent(Graphics g) {
     super.paintComponent(g);
     Graphics2D g2d = (Graphics2D) g;
     for (Circle c : circleList) {
        c.draw(g2d);
     }

  }

  public static void main(String[] args) {
     JFrame frame = new JFrame();
     CirclePanel panel = new CirclePanel(400,500);
     frame.add(panel);
     frame.setSize(400,500);
     //frame.pack();
     frame.setVisible(true);
  }

  @Override
  public void actionPerformed(ActionEvent e) {
     //move those circles and then redraw them.
  }
  class Circle {

     int x, y;
     int radius;

     public Circle() {
        this.x = (int) (Math.random() * (prefwid-10));
        this.y = (int) (Math.random() * (prefht-10));
        this.radius = (int) (Math.random() * 50) + 10;
     }

     public Circle(int x, int y, int r) {
        this.x = x;
        this.y = y;
        this.radius = r;
     }

     public void draw(Graphics2D g) {
        g.drawOval(x, y, radius, radius);
     }
  }   
} 
```

# backbone.js - 使用下划线和主干输出 HTML

> ID：15884717
> 
> 赞同：1
> 
> 时间：2013-04-08T16:54:34.790
> 
> 标签：backbone.js, underscore.js, underscore.js-templating

`template`：_

```
<div id="page-directory"></div>
<script type="text/template" id="template-site">
  <% if(featured) { %>
    <span class="featured"></span>
  <% } %>
  <a href="http://google.com"><img class="screenshot" src="content/screenshot.png" /></a>
  <div>
    <h2><a href="<%- url %>"><%- title %></a></h2>
    <p><span>Tags:</span><%- tags %></p>
    <p class="colors"><span>Colors:</span><%- colors %></p>
  </div>
</script> 
```

`model`和`view`：_

```
// Define a Site Model.
var Site = Backbone.Model.extend({
  defaults: {
    url: '',
    title: '',
    featured: false,
    tags: '',
    colors: ''
  }
});
// Define a Site View.
var SiteView = Backbone.View.extend({
  tagName: "article",
  template: _.template($("#template-site").html()),
  render: function() {
    this.$el.html(this.template(this.model.toJSON()));
    return this;
  }
}); 
```

`collection`和`collection view`：_

```
// Define a Sites Collection.
var Sites = Backbone.Collection.extend({
  url: 'sites.php',
  model: Site
});
// Define a Sites View.
var SitesView = Backbone.View.extend({
  el: $('#page-directory'),
  initialize: function() {
    this.collection.on('add', this.addOne, this);
    this.collection.on('reset', this.addAll, this);
  },
  addOne: function(site) {
    var siteView = new SiteView({model: site});
    this.$el.append(siteView.render().el);
  },
  addAll: function() {
    this.collection.forEach(this.addOne, this);
  },
  render: function() {
    this.addAll();
  }
}); 
```

并`sites.php`返回：

```
<?php

$sites = array(
    array(
        'title' => 'CGART',
        'url' => 'http://google.com',
        'featured' => true,
        'tags' => '<a href="http://google.com">Tag 1</a>' .
        '<a href="http://google.com">Tag 1</a>' .
        '<a href="http://google.com">Tag 1</a>',
        'colors' => '<a href="http://google.com" style="background-color: #000000;"></a>' .
        '<a href="http://google.com" style="background-color: #ffffff;"></a>',
    ),
    array(
        'title' => 'CGART',
        'url' => 'http://google.com',
        'featured' => true,
        'tags' => '<a href="http://google.com">Tag 1</a>' .
        '<a href="http://google.com">Tag 1</a>' .
        '<a href="http://google.com">Tag 1</a>',
        'colors' => '<a href="http://google.com" style="background-color: #000000;"></a>' .
        '<a href="http://google.com" style="background-color: #ffffff;"></a>',
    ),
);

print json_encode($sites); 
```

在这种情况下`tags`，`colors`是 HTML，我的代码将它们输出如下：

![在此处输入图像描述](https://i.stack.imgur.com/ZufRC.png)

我的模板有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:33:48.497

我认为您误解了在下划线模板中的工作方式`<%=...%>`和工作方式。`<%-...%>`来自[精美手册](http://underscorejs.org/#template)：

> 模板函数可以使用`<%= … %>`,
> [...]
> 插入变量`<%- … %>`

因此，如果您说`<%= v %>`,`v`直接进入模板，如果您说`<%- v %>`then`v`将在进入模板之前进行 HTML 转义。考虑一个像这样的简单模板：

```
<script id="t" type="text/x-underscore">
    &lt;%=: <%= html %>
    <br>
    &lt;%-: <%- html %>
</script> 
```

并在其中抛出一些 HTML：

```
var t = _.template($('#t').html());
$(whatever).html(
    t({ html: '<span>html</span>' })
); 
```

鉴于该输入，您将获得以下输出：

```
&lt;%=: <span>html</span>
&lt;%-: &lt;span&gt;html&lt;/span&gt; 
```

演示：http: [//jsfiddle.net/ambiguous/pL92b/](http://jsfiddle.net/ambiguous/pL92b/)

您`tags`来自带有嵌入式 HTML 的服务器：

```
'tags' => '<a href="http://google.com">Tag 1</a>' 
```

但是您在模板中转义了该 HTML：

```
<p><span>Tags:</span><%- tags %></p> 
```

您应该能够切换到简单的插值：

```
<p><span>Tags:</span><%= tags %></p>
<!-- ------------------^         --> 
```

整理您的显示器。

# visual-studio - 在 Visual Studio 中启动控制台应用程序调试时打开 Web 浏览器

> ID：15884718
> 
> 赞同：1
> 
> 时间：2013-04-08T16:54:37.173
> 
> 标签：visual-studio, debugging, console, browser

我在作为控制台应用程序运行的 Web 服务器上工作。它基于 HttpListener。当我在 Visual Studio 2012 中启动项目时，它会打开控制台。

除了启动控制台之外，我还需要打开一个 Web 浏览器。

我知道有可能在 VS 中启动多个项目。但是我的要求是将此应用程序保留为单个项目（这是一个产品 SDK 提供的示例 VS 项目，应该很简单）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T10:27:53.473

在您的过程中，在您启动侦听器之后，只需`Process.Start("http://localhost:12345")`; 这将与应用程序同时启动默认 Web 浏览器。

您可以根据命令行开关或其他配置设置将此设为可选。

# php - Yii 会话实时问题

> ID：15884719
> 
> 赞同：1
> 
> 时间：2013-04-08T16:54:44.710
> 
> 标签：php, session, cookies, yii

我有 Yii 应用程序，里面有一个模块'admin'，它需要身份验证。所以它有模型'LoginForm' - 由yii生成，其中有一行：

```
$duration=$this->rememberMe ? 3600*24*30 : 0; 
```

所以，如果我选中“记住我”复选框，会话应该会持续 30 天，但它实际上会持续大约 90 分钟（大约）。谁能帮我解决这个问题？

# imap - 使用wireshark进行Imap分析

> ID：15884721
> 
> 赞同：1
> 
> 时间：2013-04-08T16:54:49.310
> 
> 标签：imap

我在 Wireshark 中查看了这段代码（它是一个练习示例，所以它没有任何非法行为 =））

> a0001 验证普通 Y2VvAGNlbwBsMldCTlJpcw==\r\n

它是一个 IMAP 协议，显然使用的是 PLAIN auth 方法。

因此用户名和密码应包含在该部分“Y2VvAGNlbwBsMldCTlJpcw==”中

谁能给我解释一下是什么`\r`意思`\n`？-`==`字符串末尾代表什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:02:04.610

您要查找的内容在 RFC3501（IMAP 协议）的[AUTHENTICATE 命令](https://www.rfc-editor.org/rfc/rfc3501#section-6.2.2)部分进行了说明。`AUTHENTICATE PLAIN`是许多可能的身份验证机制之一，它在[RFC4616](http://www.ietf.org/rfc/rfc4616.txt)中进行了描述。RFC4616 第 5 节中的示例非常清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:27:07.527

`\r`and`\n`是一种显示 ASCII 换行符和回车符的方法。他们一起只是意味着行结束。

该`Y2VvAGNlbwBsMldCTlJpcw==`部分采用所谓的 BASE64 编码。它通过将可打印字符重新编码为 6 位字符（而不是 8 字节位）来表示二进制数据。== 是该编码规范的一部分。

# security - 为什么 Saml2SecurityHandler 不会从我刚刚使用 WriteToken 创建的字符串中使用 ReadToken 创建令牌？

> ID：15884723
> 
> 赞同：0
> 
> 时间：2013-04-08T16:54:52.087
> 
> 标签：security, serialization, token, access-token, saml-2.0

所以我需要序列化一个令牌以通过 Azure 中的队列 + NetMessageBinding 发送到服务。令牌来自 ACS，经过一番折腾后，我得到了 Saml2SecurityToken，我可以将其写入字符串：

```
SecurityTokenHandlerCollection handlers = SecurityTokenHandlerCollection.CreateDefaultSecurityTokenHandlerCollection();
var saml2SecurityToken = securityToken as Saml2SecurityToken;
using (var memoryStream = new MemoryStream())
{
    using (var xmlWriter = new XmlTextWriter(memoryStream, Encoding.UTF8))
    {
        handlers.WriteToken(xmlWriter, saml2SecurityToken);
    }

    tokenString = Encoding.UTF8.GetString(memoryStream.GetBuffer());
} 
```

但是，如果我然后尝试从`tokenString`类似的重新创建 Saml2SecurityToken ：

```
if (tokenString != null)
{
    using (var stringReader = new StringReader(tokenString))
    {
        using (var xmlReader = new XmlTextReader(stringReader))
        {
            securityToken = handlers.ReadToken(xmlReader);
        }
    }
} 
```

或者如果我使用

```
securityToken = handlers.ReadToken(tokenString); 
```

那么 securityToken 始终为空。

我错过了什么？我怎样才能序列化我的令牌，以便我可以通过 wcf 将它发送到另一个服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:39:35.463

D'oh，这可能是一些编码问题，好像我使用它获取字符串然后一切正常：

```
var saml2SecurityToken = securityToken as Saml2SecurityToken;

var stringBuilder = new StringBuilder();
using (var xmlWriter = new XmlTextWriter(new StringWriter(stringBuilder, CultureInfo.InvariantCulture)))
{
    handlers.WriteToken(xmlWriter, saml2SecurityToken);
} 
```

# xml - 我如何在 tcl 脚本中解析 xml 文件并读取一些标记属性并更改该属性值

> ID：15884724
> 
> 赞同：3
> 
> 时间：2013-04-08T16:54:55.473
> 
> 标签：xml, tcl

我有以下使用 tcl 脚本语言的 xml 文件。

```
<workarea>
  <poller name="Poller1">
    <pollerAttribute loc="c:\abc" username="abc" password="xxx">
      <value>123</value>
    </pollerAttribute>
  </poller>
  <poller name="Poller2">
    <pollerAttribute loc="c:\def" username="def" password="xxx">
      <value>345</value>
    </pollerAttribute>
  </poller>
  .....
</workarea> 
```

在这里，我想用 Poller 名称阅读每个标签，然后`password="xxx"`为此更改。我是 tcl 脚本语言的新手。任何帮助对我来说都会很棒。提前感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T19:28:36.163

到目前为止，使用 Tcl 执行此操作的最简单方法是使用[tDOM](http://wiki.tcl.tk/8984)来操作 XML。您可以使用 XPath 表达式来选择`password`要更改其属性的元素，然后您可以遍历这些节点并根据需要更改它们。最后，您需要记住，更改内存中的文档*并不是*更改磁盘上的文档；读取和写入序列化文档也是重要的步骤。

```
package require tdom

set filename "thefile.xml"
set xpath {//pollerAttribute[@password]}

# Read in
set f [open $filename]
set doc [dom parse [read $f]]
close $f
set root [$doc documentElement]

# Do the update of the in-memory doc
foreach pollerAttr [$root selectNodes $xpath] {
    $pollerAttr setAttribute password "theNewPassword"
}

# Write out (you might or might not want the -doctypeDeclaration option)
set f [open $filename "w"]
$doc asXML -channel $f -doctypeDeclaration true
close $f 
```

就是这样。（您可能需要更加小心如何选择具有正确`password`属性的元素，并以更复杂的方式提供替换密码，但这些都是技巧。）

# python - 递归布尔求值

> ID：15884727
> 
> 赞同：0
> 
> 时间：2013-04-08T16:55:07.147
> 
> 标签：python

假设我有类似的东西：

```
[(True, False, False), True] = True 
```

或者

```
(False, [True, True, False], False) = False 
```

可以无限深，元组被评估为 OR 和列表 AND

这个函数怎么能用python写呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:01:36.163

[`all`](http://docs.python.org/2/library/functions.html#all)与和的解决方案[`any`](http://docs.python.org/2/library/functions.html#any)：

```
def evaluate_bool(expr):
    if isinstance(expr, list):
        return all(evaluate_bool(e) for e in expr)
    elif isinstance(expr, tuple):
        return any(evaluate_bool(e) for e in expr)
    else:
        return expr

evaluate_bool([(True, False, False), True]) # True
evaluate_bool((False, [True, True, False], False)) # False 
```

# javascript - Javascript - 是否存在具有自更新值的变量？

> ID：15884729
> 
> 赞同：0
> 
> 时间：2013-04-08T16:55:26.433
> 
> 标签：javascript, jquery, image

我正在尝试创建一个变量，无论何时调用都会返回当前值。示例应该更好地描绘这一点：

```
var image = jQuery('.myimage');
var currentWidth = function(){ return image.width(); };
// now, in any later place in the script the above variable
// should contain the current width without necessity to update this
// variable over and over again each time (we assume that the width
// of an image is changing as the script executes and this variable
// should always contain the CURRENT width and not the one set at the
// beginning). 
```

因此，每当宽度发生变化时，我都希望能够获得当前宽度。这样的事情可能吗？上面的示例为我返回一个字符串，而不是当前值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:04:11.090

没有*变量*之类的东西，当在表达式中询问时，会导致代码被评估（即函数调用），但是可以使用在访问属性时调用的 getter 函数来定义对象属性。

```
var obj = {};
Object.defineProperty(obj, "dyn", {
  get: function() {
    return new Date().getTime(); // just an example
  }
}); 
```

每次`obj.dyn`引用时，该值将是当前时间戳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:03:31.487

一般来说，您可以执行以下操作：

```
function currentWidth() {
   return $('.myimage').width();   // or image.width() since you have it defined, make sure there is ONLY one element returned or you will need $('.myimage:eq(0)').width()
} 
```

你会像这样使用它：

```
if (currentWidth()>400) {
  // do something
} 
```

# javascript - Javascript getelementbyid 不起作用

> ID：15884731
> 
> 赞同：1
> 
> 时间：2013-04-08T16:55:28.773
> 
> 标签：javascript, html, function, getelementbyid

为什么以下不起作用？

javascript:

```
document.getElementById("page").style = "-webkit-filter: blur(5px);"; 
```

HTML：

```
<div id="page" style="" >some content</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T16:57:22.257

确保在元素准备好**之后**调用它，使用类似的东西`window.onload`或者只是在元素之后的页面上物理地放置脚本......并设置适当的属性：

```
window.onload = function () {
    document.getElementById("page").style.webkitFilter = "blur(5px)";
}; 
```

元素的`style`属性是具有您需要设置的属性的对象。您不应该也不能只将`style`属性设置为字符串。`SyntaxError: invalid label`当我尝试时出现错误。

我知道设置特殊的“-webkit-filter”样式可能会令人困惑，但是“-webkit-”样式遵循`style`对象中的约定-没有前导“-”，并用驼峰式替换其他“-”。

同时，切换 a 可能更容易和更有效（因此您可以添加其他样式）`class`，而不是专门设置`style`属性。所以我建议使用：

```
document.getElementById("page").className += " transformer"; 
```

并定义 CSS 类：

```
.transformer {
    -webkit-filter: blur(5px);
} 
```

这样，如果在其他特定浏览器中实现了样式，只需在此处添加它们就很容易了。具体来说，使用供应商前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T16:58:36.260

您可能在将元素添加到页面之前执行脚本。

如果您的页面符合以下要求：

```
<!DOCTYPE html>
<html>
<head>
    <script>...</script>
</head>
<body>
    <div id="page">some content</div>
</body>
</html> 
```

然后，您需要等待文档准备好或等待`onload`事件发生，然后再尝试访问该`#page`元素。

# php - 动态命名变量

> ID：15884735
> 
> 赞同：1
> 
> 时间：2013-04-08T16:55:38.493
> 
> 标签：php

我接受一个变量到一个函数中。

例如，调用了变量`$field`，然后我想通过变量内部的内容来命名`$field`变量。

说`$field = 'randomName'`，我希望我的变量是`$randomName`。

这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T16:58:02.147

是的，有可能：

```
$field = "randomName";
$$field = "test";
$$$field = "test 2";
echo $randomName . "\n"; //outputs: "test"
echo $test. "\n"; //outputs: "test 2" 
```

看看**[这个](http://php.net/manual/en/language.variables.variable.php)**_

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:58:40.523

```
$field = "randomName" ;
${$field} = "yeah" ; 
```

* * *

```
${"randomName"} = "that works too" ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T16:58:50.053

这是可能的（参见[“变量变量”](http://php.net/manual/en/language.variables.variable.php)），但*不鼓励使用这种方法*，并且通常最好使用数据结构（即[带有键的数组](http://php.net/manual/en/language.types.array.php)）进行这种动态操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T16:59:48.533

PHP 有一个称为[变量变量](http://www.php.net/manual/en/language.variables.variable.php)的语言特性。在你的情况下：

```
$field = 'randomName';

$$field = "Hello world!";

echo $randomName; // prints out "Hello world!" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T16:57:54.433

你想要可变变量吗？

见[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

例子

```
$varname = 'var';
$$varname = 'content';
print $var; // outputs 'content' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T16:58:38.970

您可以将变量指定为变量名。

```
$$field 
```

这将满足您的要求。

# php - 慢网站php（蛋糕php）

> ID：15884737
> 
> 赞同：0
> 
> 时间：2013-04-08T16:55:39.977
> 
> 标签：php, cakephp

我使用 cakephp 已经有一段时间了，最​​近我做了一个更新，这使得网站在第一次加载时非常慢。我一直在使用不同的工具来找出导致这种情况的原因，但仍然没有任何线索。

我已经坚持了几个小时。有人可以帮我解决这个问题吗！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T17:46:31.113

恕我直言，无论蛋糕在做什么，它都与它无关，或者至少不是很重要，因为如果是这样的话，它只会发生在第一个用户身上，而不是所有人身上。我加载了您的网站，第一次加载时确实很慢，但之后加载就很好了。

我正在 chrome 上进行测试，我发现如果我删除 cookie（使用编辑此 cookie 扩展名）并尝试再次加载站点，请求很慢。

我使用 YSlow 扩展分析了您的网站并发现了这一点（文本来自分析结果）

*   **使用无 cookie 域的 F 级**。有 22 个组件不是无 cookie 的。当浏览器请求静态图像并随请求发送 cookie 时，服务器会忽略 cookie。这些 cookie 是不必要的网络流量。要解决此问题，请通过创建子域并将其托管在其中，确保使用无 cookie 请求请求静态组件。
*   **减少 HTTP 请求的 F 级**。此页面有 12 个外部 Javascript 脚本。尝试将它们合二为一。此页面有 11 个外部背景图像。尝试将它们与 CSS 精灵结合起来。减少页面上的组件数量会减少呈现页面所需的 HTTP 请求数量，从而加快页面加载速度。减少组件数量的一些方法包括：合并文件，将多个脚本合并为一个脚本，将多个 CSS 文件合并为一个样式表，以及使用 CSS Sprites 和图像映射。
*   **使用内容交付网络 (CDN) 的 F 级**。有 42 个静态组件不在 CDN 上。用户接近 Web 服务器会影响响应时间。跨多个地理位置分散的服务器部署内容有助于用户感知页面加载速度更快。
*   **添加过期标题的 F 级**。有 36 个静态组件没有遥远的到期日期。网页变得越来越复杂，其中包含更多的脚本、样式表、图像和 Flash。首次访问页面可能需要多个 HTTP 请求来加载所有组件。通过使用 Expires 标头，这些组件变得可缓存，从而避免了后续页面视图中不必要的 HTTP 请求。Expires 标头通常与图像相关联，但它们可以而且应该用于所有页面组件，包括脚本、样式表和 Flash。

如果您还使用 Google PageSpeed 扩展程序，您将获得有关您网站的更多有趣信息。

所以恕我直言，这个问题与浏览器相关的问题比服务器（CakePHP）的问题更相关。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T21:19:09.457

用萤火虫检查，虽然你有很多 js 和图像请求，正如@pollirrata 指出的那样，js 加载时间只占加载时间的 20%，图像另外 20%（大约）。很多，但正如您评论的那样，根 url 是加载时间超过一半的那个。

我知道这应该继续评论，但我还不能这样做：你做了什么样的更新？我猜它在主控制器的主要动作中。你在那里检索很多信息吗？Cake 第一次可能会缓存结果查询，这就是为什么第二次加载所需时间更少的原因。您是否对查询使用可包含的行为（我猜有查询......）？

你能做一个：

```
$this->autoRender = false;
pr($info);   //that is, dump every variable with info you have here 
```

看看在没有额外重量的情况下加载需要多长时间才能排除这种情况？

# python - python函数中的反转文本

> ID：15884738
> 
> 赞同：0
> 
> 时间：2013-04-08T16:55:43.967
> 
> 标签：python, string, list, error-handling, indexing

我正在尝试手动（没有内置函数）反转一串文本，但是代码给了我一个“列表分配索引超出范围” `list_rev[u] = list_[i]`。我不明白为什么会这样？我想要做的是从 中获取文本`list_`并将其以`list_rev`相反的顺序放置，然后打印`list_rev`。

谢谢！

```
text = raw_input("Word?")

text = str(text)

def reverse(text):
    list_rev = []
    list_ = []
    length = int(len(text))
    k = 0
    while k < (length):
        list_.append(str(text)[k])
        k += 1

    i = int(length-1)
    u = 0
    while i >= 0:
        list_rev[u] = list_[i]
        u += 1
        i -= 1
    return list_rev,

print reverse(text) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:01:46.330

您从表达式中收到错误“列表分配索引超出范围”，`list_rev[u]`因为索引 ( `u`) 超出范围`0 .. len(list_rev)-1`。特别是，`list_rev`是空的，因此没有可能的值`u`引用 的有效元素`list_rev`。

如果要向 list_rev 添加*新*元素，请尝试`.append()`、`.extend()`或`.insert()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:00:46.593

您可以将字符附加到列表中：

```
text = raw_input("Word?")

text = str(text)

def reverse(text):
    list_rev = []
    list_ = []
    length = int(len(text))
    k = 0
    while k < (length):
        list_.append(str(text)[k])
        k += 1

    i = int(length-1)
    u = 0
    while i >= 0:
        list_rev.append(list_[i])
        i -= 1
    return list_rev,

print reverse(text) 
```

输出：

```
Word?qwerty
(['y', 't', 'r', 'e', 'w', 'q'],) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:07:11.150

list_rev 是一个空列表：您必须附加 char ：

```
text = raw_input("Word?")

text = str(text)

def reverse(text):
    list_rev = []
    list_ = []
    length = int(len(text))
    k = 0
    while k < (length):
        list_.append(str(text)[k])
        k += 1

    i = int(length-1)
    u = 0
    while i >= 0:
        list_rev.append(  list_[i] )
        u += 1
        i -= 1
    return list_rev

print ''.join(  str(elem) for elem in reverse(text) ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-06T04:13:57.963

您也可以使用插入简单地解决这个问题，

```
def reverse(text):
    reverse_list = []
    for a in text:
        reverse_list.insert(0,a)
    return "".join(reverse_list)

text = raw_input("Word?")

reverse_text = reverse(text)

print reverse_text 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-05T13:22:41.460

使用字符串的另一种选择；

```
def reverse(text):
  reversed = ''
  for index in range(len(text)-1, -1, -1):
    reversed += text[index]
  return reversed 
```

# c# - 基于多个会员提供者的授权

> ID：15884746
> 
> 赞同：0
> 
> 时间：2013-04-08T16:56:14.577
> 
> 标签：c#, asp.net

我正在使用多个会员提供商。我已经设置了一个带有一个登录控件的页面，来自两个会员提供商的用户都可以登录。

我有 2 个文件夹。第一个文件夹包含与第一个会员提供商的用户相关的页面。第二个文件夹包含与第二个会员提供者相关的数据。

用户登录后，如何拒绝第一个会员提供商的用户访问文件夹 #2？

# php - 如何从目录创建 php 菜单？

> ID：15884748
> 
> 赞同：0
> 
> 时间：2013-04-08T16:56:16.643
> 
> 标签：php, css, recursion, menu

我需要从一个目录创建一个 php 菜单，我有这个文件夹：Publications。我想将里面的项目列为动态菜单。项目如下所示： **newsletter_2013_1.pdf newsletter_2013_2.pdf newsletter_2014_1.pdf newsletter_2014_2.pdf**

我需要创建的菜单必须是这样 **的：请选择年份：-> 2013 -> Issue# 1 / Issue# 2 / Issue # 3**

我会很感激我能得到的任何帮助谢谢！

**更新** 到目前为止我有这个代码：

```
$paths = new DirectoryIterator('/usr/apps/webdata/backend/assets/newsletters/temp');

echo '<div id=cssmenu>';
echo '<ul>';
echo '<li class=has-sub last><a href=#><span>Please select a Year</span></a>';
echo '<ul>';
$list = array();
foreach($paths as $file)
{
if($file->isDot())
    continue;
    $string = $file;

                if(preg_match_all("#(\d{1,})#", $string, $matches, PREG_SET_ORDER)) 
                {
                        foreach($matches as $match) 
                        {

                        $issue = $match[0];

                            while (list($key, $value) = each($match)) 
                            {
                            //YEAR
                                if (strlen ($value) == 4)
                                {
                                $uyear = $value;
                                //echo "Year: $uyear \n";
                                //echo "<li class='has-sub'><a href='#'><span>".$uyear." </span></a>";

                                }
                            // ISSUE#
                                elseif (strlen ($value) == 1)
                                {
                                $uissue = $value;
                                //echo "Issue: $uissue \n";
                                //echo "<li class=last><a href=# onclick=myPDF('".$file."')> Issue# ".$uissue."</a></li>";
                                }

                            }

                    }
}   

if(!isset($list[$uyear]))
{
        $list[$uyear] = array();
    echo "<li class='has-sub'><a href='#'><span>".$uyear." </span></a>";
}   
echo '<ul>';
if(!in_array($uissue, $list[$uyear]))
{
    $list[$uyear][] = $uissue;

    //for($i=0;$i<4; $i++)
        //{
        echo "<li class=last><a href=# onclick=myPDF('".$file."')> Issue# ".$uissue."</a></li>";
        //echo '<h2 style= margin-top: 20px;>Preview Issue# '.$uissue.' from '.$uyear.' </h2>';
        //}         
}

echo '</ul>';
echo '</li>';
}
echo '</ul>';
echo '</li>';
echo '</ul>';
echo '</div>'; 
```

但它不像我需要的那样工作

**更新 2** 我能够创建我的菜单，但现在对于每个问题 # 都会在我的树上创建一个新分支，我希望所有问题都在同一个编号下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:06:58.227

使用[PHP Glob](http://php.net/manual/en/function.glob.php)从目录中抓取文件。然后使用 foreach 来回显一组链接...

我用它来动态地将图像加载到画廊中。

```
<?php
    $counter = 0; // Set counter to 0
    foreach (glob("images/photo-strip/thumb/*.jpg") as $pathToThumb) { // Grab files from the thumbnail path and save them to variable
        $th_filename = basename($pathToThumb); // Strip the thumbnail filename from the path
        $filename = str_replace('th_', '', $th_filename); // Strip th_ from the filename and save it to a different variable
        $pathToFull = 'images/photo-strip/' . $filename; // Rebuild the path to the full-size image
        echo ("<section class=\"photo-box\"><a href=\"$pathToFull\"><img src=\"$pathToThumb\" /></a></section>"); // Echo the photobox
        $counter++; // Increment counter by 1 until no file exists
    }
?> 
```

你的会是这样的......

```
foreach (glob("path/2012/*.html") as $pathTo2012) {
    $filename = basename($pathTo2012);
    echo "<a href=\"$pathTo2012\">$filename</a>"; 
```

**回复您的编辑：**

```
<?php

$dir = "directory/";

$year = "2009";

echo "<ul>";

foreach ($year as $label ) {
    if (($year >= 2009) && ($year <= date(Y))) {
        echo "<li>$label";
        echo buildLinks;
        echo "</li>";
    }   
}

$year++; //increment year by 1

function buildLinks () {

    echo "<ul>";

    foreach (glob($dir . $year . "/*.html") as $filepath) {

        $filename = basename($filepath);

        echo "<li><a href=\"$filepath\">$filename</a></li>";
    }

    echo "</ul>";
}

echo "</ul>";

?> 
```

请注意，这是未经测试的，并不完全适合您的情况。可能需要进行一些修改。不幸的是，我目前无法测试 PHP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:18:47.217

这可能有点矫枉过正，但我​​希望它有所帮助：

```
if(!is_readable($DirName)) { # Make sure the dir is readable before going on
    printf("You do not have permission to read:") ;
    printf("<blockquote><code>\n%s\n</code></blockquote>",$DirName) ;
}
else if(!is_dir($DirName)) { # Make sure it is a directory
    printf("The requested item is not a directory:") ;
    printf("<blockquote><code>\n%s\n</code></blockquote>",$DirName) ;
}
else if(($FileList = scandir($DirName))==FALSE) { # Are we able to scan the directory
    printf("<h2>Cannot get listing</h2>\n") ;
    printf("Cannot get list of the contents of the directory:") ;
    printf("<blockquote><code>\n%s\n</code></blockquote>",$DirName) ;
}
else { 
    $FileCount = sizeof($FileList) ;
    printf("Current working directory is:<blockquote><pre>%s</pre></blockquote>\n",posix_getcwd()) ;
    printf("Searching <blockquote><pre>%s</pre></blockquote>\n",$DirName) ;
    printf("<ul>\n") ;
    for($Count=0;$Count<$FileCount && $Count<$CountLimit;$Count++) {
        printf("<li>%s</li>\n",$FileList[$Count]) ;
    }

     # The number of files shown was limited by $CountLimit, if there are more files beyond what was shown above then show how many
    $Difference = $FileCount-$CountLimit ;
    if($Difference>0)
        printf("<li><i>&hellip;%d more file%s/director%s</i></li>",$Difference,$Difference==1?"":"s",$Difference==1?"y":"ies") ;
    printf("</ul>\n") ;
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T13:47:37.787

因此，在我发现问题后，我能够生成一个包含我的值的 CSS 菜单，这是最终代码：

```
 echo '<div id=cssmenu>';
// This If is to check that the array is not empty  
    if(count($menu) > 0) {      

    echo '<ul>';    
        echo '   <li class=has-sub last><a href=#><span>Please Select a Year:</span></a>';
        echo '   <ul>';
                    foreach($menu as $uyear => $docs) 
                    {
                    echo "<li class='has-sub'><a href='#'><span>".$uyear." </span></a>";
                    echo '            <ul>';

                    foreach($docs as $filename) 
                    {
                    $a= "Newsletter_$uyear";
                    $b="_$filename.pdf";
                    $myissue = $a.$b;
                    echo "<li class=last><a href=# onclick=myPDF('".$myissue."')> Issue# ".$filename."</a></li>";
                    }
        echo '            </ul>';
        echo '         </li>';
                    }
        echo '   </ul>';
        echo '   </li>';

    echo '</ul>';
    }
    echo '</div>'; 
```

# html - css3 & html5 中的背景覆盖

> ID：15884751
> 
> 赞同：0
> 
> 时间：2013-04-08T16:56:44.477
> 
> 标签：html, css, background

我无法使用 css3 和 html5 获得渐变 .jpg 图像（在 PhotoShop 中创建）来覆盖整个页面。我已经阅读并尝试了所有我能找到的东西，要么没有效果，要么“修复”完全删除了背景图像。这是代码，我尝试了很多不同的解决方案，包括 w3schools.com，我可能错过了明显的（我希望）：

```
@charset "UTF-8";  
#main_container {   
display: block;     
clear: both;    
overflow: hidden;   
width: 960px;   
height: 100%;   
margin-right: auto;     
margin-left: auto;  
box-shadow: 0px 5px 10x 0px #362819;    
background:#738A7A;     
text-align: justify;    
text-align: left;   
border: 5px double #99AFA3; 
} 
body {  
font-family:Tahoma,"Century Gothic","Lucida Grande";    
font-size: 1.1em;   
font-weight:bold;   
line-height:1.5em;  
padding:0px;    
margin-bottom:15px;     
background-color: #587056;  
background-image: url('img/bkg.jpg');   
background-size:cover; 
}  
#header {   
text-align: center;     
width: 960px; 
} 
#container {    
line-height: 1.5em;     
text-align:left;    
color: #331100;     
border: 4px ridge #587056;  
padding: 8px;   
margin: 8px;    
width: 60%;     
float: left; 
} 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:01:06.653

您要么需要将背景应用于`html`元素，要么添加`height:100%`到您的元素中`body`（但是后一种情况只有在您也有背景时才能正常工作`margin:0`）

# android - 片段和 ViewPagers 的首选项 - Android

> ID：15884753
> 
> 赞同：3
> 
> 时间：2013-04-08T16:56:50.733
> 
> 标签：android, android-fragments, android-viewpager, preferences

让我自己对打开的大量看起来相关但没有完全回答我的问题的 SO 选项卡感到非常困惑，所以最后我承认失败并问我自己的问题。

我想实现一个设置页面。我正在使用片段和 ViewPager，因为我有两个主屏幕在相同的标题和操作栏（编码和解码屏幕）下运行。这是我的代码片段（试图去掉看起来不相关的部分）

MainActivity.java

```
package uk.ac.ox.bras2756.colourgrid;

import android.app.ActionBar; ...etc

public class MainActivity extends FragmentActivity implements ActionBar.TabListener {

    AppSectionsPagerAdapter mAppSectionsPagerAdapter;
    ViewPager mViewPager; ...etc

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mAppSectionsPagerAdapter = new AppSectionsPagerAdapter(getSupportFragmentManager());

        final ActionBar actionBar = getActionBar();
        actionBar.setHomeButtonEnabled(false);
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mAppSectionsPagerAdapter);
        mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                actionBar.setSelectedNavigationItem(position);
            }
        });

        for (int i = 0; i < mAppSectionsPagerAdapter.getCount(); i++) {
            actionBar.addTab(
                    actionBar.newTab()
                            .setText(mAppSectionsPagerAdapter.getPageTitle(i))
                            .setTabListener(this));
        }
    }

    @Override
    public void onTabUnselected / Selected / Reselected ...etc

    public static class AppSectionsPagerAdapter extends FragmentPagerAdapter {

        public AppSectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int i) {
            switch (i) {
                case 0:...etc
            }
        }

    public static class LaunchpadSectionFragmentEncode extends Fragment {

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View rootView = inflater.inflate(R.layout.fragment_section_encode, container, false);
            ...return rootView;
        }
    }

    public static class LaunchpadSectionFragmentDecode extends Fragment {

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View rootView = inflater.inflate(R.layout.fragment_section_decode, container, false);
            ...return rootView;
        }
    }

        @Override
public boolean onCreateOptionsMenu(Menu menu) {
    new MenuInflater(this).inflate(R.menu.activity_main, menu);

    return(super.onCreateOptionsMenu(menu));
}

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
      switch (item.getItemId()) {
        case R.id.menu_settings:
        Intent intent = new Intent(this, SetPreferenceActivity.class);
        startActivity(intent);
          return(true);
      }

      return(super.onOptionsItemSelected(item));
    }
}

} 
```

activity_main.xml

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

PrefsFragment.java

```
package uk.ac.ox.bras2756.colourgrid;

import android.os.Bundle;
import android.preference.PreferenceFragment;
import android.util.Log;

public class PrefsFragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Load the preferences from an XML resource
        addPreferencesFromResource(R.xml.preferences);
    }
} 
```

SetPreferenceActivity.java

```
package uk.ac.ox.bras2756.colourgrid;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class SetPreferenceActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        Log.i("SetPrefs", "Got there");

        getFragmentManager().beginTransaction().replace(android.R.id.content, new PrefsFragment()).commit();
    }

} 
```

res\xml\preferences.xml

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <CheckBoxPreference
            android:key="prefkey_error"
            android:summary="@string/pref_sum_error"
            android:title="@string/pref_title_error"
            android:defaultValue="true" />
    <PreferenceCategory 
        android:title="@string/pref_decode"
        android:key="prefkey_decode">
        <ListPreference
            android:key="prefkey_matrix"
            android:title="@string/pref_title_matrix"
            android:summary="@string/pref_sum_matrix"
            android:entries="@array/matrixArray"
            android:entryValues="@array/matrixArrayValues" />
        <ListPreference
            android:key="prefkey_rotate"
            android:title="@string/pref_title_rotate"
            android:summary="@string/pref_sum_rotate"
            android:entries="@array/rotateArray"
            android:entryValues="@array/rotateArrayValues" />
        <CheckBoxPreference
            android:key="prefkey_weight"
            android:summary="@string/pref_sum_weight"
            android:title="@string/pref_title_weight"
            android:defaultValue="true" />
        <ListPreference
            android:key="prefkey_colour"
            android:title="@string/pref_title_colour"
            android:entries="@array/colourArray"
            android:entryValues="@array/colourArrayValues" />
    </PreferenceCategory>
    <PreferenceCategory 
        android:title="@string/pref_camera"
        android:key="prefkey_camera">
            <CheckBoxPreference
                android:key="prefkey_hotspots"
                android:title="@string/pref_title_hotspots"
                android:defaultValue="true" />
     </PreferenceCategory>
</PreferenceScreen> 
```

我的应用程序加载正常，但当然因为缺少某些东西，选项按钮没有显示。我错过了什么？我会一直在这里检查，直到我能解决这个问题——时间紧迫！

此外，由于某种原因，我的首选项文件旁边总是有 * 表示它没有保存，当我在手机上运行应用程序时，它总是要求我先保存它，尽管手动保存它。不知道那里发生了什么！

如果您需要查看更多代码，请告诉我，尝试仅提供所需的内容，但我不是 100% 确定。

编辑：全部排序。更新了我上面的代码，以防它可以帮助其他人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:10:22.353

> 此外，我还没有 onCreateOptionsMenu，我很困惑在哪里放置它以及在其中放置什么。

“三点按钮”与偏好无关。那是操作栏溢出（如在缺少 MENU 按钮的设备上所见）。您需要编写一些代码，通常是 XML 资源，以使某些内容出现在操作栏溢出中，例如要转到的项目链接到您的`PreferenceActivity`.

例如，您可能有一个`res/menu/actions.xml`：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/settings" android:icon="@android:drawable/ic_menu_preferences" android:title="@string/settings" android:showAsAction="never"></item>
</menu> 
```

您的活动可能有：

```
 @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    new MenuInflater(this).inflate(R.menu.actions, menu);

    return(super.onCreateOptionsMenu(menu));
  }

  @Override
  public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
      case R.id.settings:
        // launch your PreferenceActivity here

        return(true);
    }

    return(super.onOptionsItemSelected(item));
  } 
```

在评论指出的地方，您会调用`startActivity()`您的`PreferenceActivity`that 将使用您的`PreferenceFragment`.

[您可以在文档](http://developer.android.com/guide/topics/ui/actionbar.html)中阅读有关操作栏的更多信息，也可以`PreferenceActivity`在[文档](http://developer.android.com/reference/android/preference/PreferenceActivity.html)中阅读更多信息。

# actionscript-3 - Flash 阶段到 Flashbuilder

> ID：15884755
> 
> 赞同：-2
> 
> 时间：2013-04-08T16:56:51.170
> 
> 标签：actionscript-3, flash, air, flash-builder

我在适用于 iOS 和 Android 的 Flash Pro CS6 中有一个相当复杂的（对我而言）项目。所有的代码都在 AS3 中——大部分是一个大文件，因为我不喜欢 OOP。我在舞台上有大量用于主要布局的东西——大部分是符号，但有些不是。

无论如何，我对迁移到 FlashBuilder 很感兴趣，并且正在寻找让这些东西移动、启动和运行的最佳途径。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:26:13.343

对不起，但没有好的方法可以做到这一点。`Stage`当然，除了AS3 中的数据类型之外，FlashBuilder 中没有“阶段” 。Flash Pro 中舞台上或库中的所有内容都**必须**使用代码或通过嵌入元数据标签加载来重新创建。这包括所有按钮、符号、图像、字体等。

老实说，除非这是一个要求，或者您已经达到了在不转向更多 OOP 方法的情况下无法继续进行项目的地步，否则您应该保持足够好。这需要做大量的工作；没有办法将 FLA 转换为 FlashBuilder 项目，而且您不能简单地复制/粘贴代码，因为您对舞台和库中对象的所有引用都将毫无用处。

# c++ - 将控制台应用程序从 VC 6 迁移到 VS 2010

> ID：15884759
> 
> 赞同：0
> 
> 时间：2013-04-08T16:57:08.787
> 
> 标签：c++, visual-studio-2010, templates, porting, visual-c++-6

我正在将我的项目从 vc6 迁移到 vs2010。编译时出现错误

`TMemPool<T>::TTag* that error C2143: syntax error : missing ';' before '*' along with error C4430: missing type specifier - int assumed. Note: C++ does not support default-int.`

谁能帮我这个。如果我问了一个愚蠢的问题，我很抱歉。但我需要帮助，因为我不太擅长编码。

另外，如果可能的话，您能否告诉我在将我的项目从 VC 6 迁移到 VS 2010 时需要完成的任何预先设置。此外，在迁移代码之前是否需要执行任何步骤。

请在此处查找错误代码行。需要帮助请叫我。

提前致谢。

```
// ----------------------------------------------------------------------------
template <class T>
TMemPool<T>::TTag*
TMemPool<T>::GetAt
(
int I_Index
)
{
if(I_Index < 0 || (unsigned int)I_Index > GetTotal())
    return NULL;
return &m_pStorage[I_Index].m_Tag;
}

#endif // !defined(AFX_TMEMPOOL_H__825D671F_49E6_46C1_AB3D_79920EF692D8__INCLUDED_) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:05:36.370

什么类型`TTag`？

试试这个

```
template <class T>
typename TMemPool<T>::TTag* TMemPool<T>::GetAt(int I_Index)
{
    if(I_Index < 0 || (unsigned int)I_Index > GetTotal())
        return NULL;
    return &m_pStorage[I_Index].m_Tag;
} 
```

IIRC，VC6 用于编译`typename`缺少的东西，但从 VC7 开始，情况发生了变化。

# css - 如何使用 CSS 隐藏和显示单独的 div

> ID：15884766
> 
> 赞同：1
> 
> 时间：2013-04-08T16:57:34.110
> 
> 标签：css, html, properties, visibility

关于我想在这里实现的目标，我一直在寻找答案，但一无所获。也许有人可以帮助我或指出我正确的方向。

我想要做的是有一个带有缩略图的图片库，当您将鼠标悬停在页面上时，它会在通常隐藏的页面上显示更大的图像，并使页面的其余部分变暗。

我已经看到一些教程解释了类似的内容，但没有一个教程准确地展示了如何通过悬停另一个对象来控制一个 div 的可见性。

也许我只是在这里遗漏了一些简单的东西，如果有人可以帮助我了解如何通过悬停 div_b 来控制 div_a 的可见性属性

谢谢埃文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:16:48.507

当您更改 div_b 的 z-index 时，您是否尝试过更改 div_a 的 opacity 属性？否则，如果您不反对使用一点 Javascript，则可以使用[Lightbox](http://lokeshdhakar.com/projects/lightbox2/)。它是一个轻量级脚本，可以完全满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:20:23.180

Lowkase 恰到好处。您将需要某种形式的 javascript，可能是 jQuery。从那里的众多图片库包中选择一个并研究源代码。这是一个可以帮助您入门的方法：[https ://github.com/cube3x/Adipoli](https://github.com/cube3x/Adipoli)

# jquery - 如何将背景图像 div 居中？

> ID：15884767
> 
> 赞同：1
> 
> 时间：2013-04-08T16:57:35.720
> 
> 标签：jquery, html, css

我在看[http://www.hideoutfestival.com/](http://www.hideoutfestival.com/)

当您调整屏幕大小时，标题背景图像会不断居中。

我似乎无法复制这种效果。

我有：

```
<div id="cover" style="background:url(/design/cover.jpg) repeat-x top">
</div> 
```

和

```
#cover {
    height:450px;
    width:100%;
background-position: center;
} 
```

然而，我似乎无法达到与他们相同的效果。

有什么帮助吗？

问候，汤姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:01:19.467

内联 CSS 会覆盖外部 CSS。CSS 中设置的任何背景属性都会被您的内联规则覆盖。

要么改变它，所以背景被定位为内联：

```
background:url(/design/cover.jpg) repeat-x center center; 
```

或者更改它以便只在元素上定义图像：

```
background-image:url(/design/cover.jpg); 
```

或将其移至您的样式表（您*确实*应该这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:01:34.820

我认为您的内联样式中的背景位置可能会覆盖您的 CSS。尝试使用`background-image: url(/design/cover.jpg);`内联并使用这个 CSS：

```
#cover {
    height:450px;
    width:100%;
    background-repeat: x
    background-position: center top;
} 
```

或者将整个内容放入您的样式表是一个更好的主意，但我假设您有理由将其内联。如果您决定这样做，这应该有效：

```
#cover {
    height:450px;
    width:100%;
    background-repeat: url(/design/cover.jpg) repeat-x center top;
} 
```

# jquery - JQuery scrolltop 向上滚动而不是向下滚动

> ID：15884768
> 
> 赞同：-2
> 
> 时间：2013-04-08T16:57:38.677
> 
> 标签：jquery, scrolltop

出于某种原因，我所有的 Scrolltop jquery 功能在此页面上都运行良好：[http:](http://www.nvrentals.net/) //www.nvrentals.net/ - 除了应用于每个“客户端图标”的滚动功能。

这是我的目标：在手机宽度内（网站是响应式的）——当用户点击“Concert Halls”图标时，他们应该向下滚动到下面的打开面板......

问题：现在，当它被点击时，用户向上滚动到页面上的一个随机位置。

我不知道发生了什么 - 这些东西在 JSfiddle 中运行良好：http: [//jsfiddle.net/gGuDF/](http://jsfiddle.net/gGuDF/)

这是我的 JS：

```
 $('.scrollerr').click(function(e){

    $("html, body").animate({scrollTop:$('.scrollee').position().top}, 600);

    e.preventDefault();

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:14:04.303

你有没有尝试过，

```
$('.scrollee').offset().top 
```

我还没有测试过，或者试试这个，

```
 var $scrollee = $(this).find('.scrollee');

 var newScroll = parseInt( $scrollee.position().top ) 
    + parseInt( $scrollee.parent().scrollTop() );

  $("html, body").animate({scrollTop:newScroll}, 600); 
```

或者

```
 $('.scrollerr .scrollee').click(function(e){

$("html, body").animate({scrollTop:$(this).position().top}, 600);

e.preventDefault(); 
```

});

# jquery - 使用 jQuery off() 删除元素上的触摸事件处理程序

> ID：15884772
> 
> 赞同：0
> 
> 时间：2013-04-08T16:57:51.323
> 
> 标签：jquery, event-handling

我正在使用基于 jQuery 的 JavaScript 库，它允许移动触摸设备的触摸手势[toe.js](https://github.com/dantipa/toe.js)。

toe.js 允许我添加一个`tap`类似于点击事件的事件，因此我启用`tap`了所有当前和未来的`.button`元素：

```
$(document)
  .on('tap', '.button', function() {
    tapAction($(this));
  });

function tapAction($btn) {
  // do stuff
  // disable all event handlers
  $btn.off();
} 
```

但是，我不知道如何删除此事件处理程序；`off()`不工作......当我使用 Chrome 的开发工具检查元素时，所有的触摸事件处理程序仍然存在于元素上。

![事件监听器](https://i.stack.imgur.com/xVBud.png)

我可以做到`$(document).off()`，这行得通，但这也删除了所有元素的事件，包括当前和未来，这不是我想要的:(

我查看了 toe.js 的源代码，但找不到解除绑定事件的方法。那么如何删除所有元素的事件侦听器，最好使用 jQuery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:07:03.217

好吧，您总是可以一一关闭每个触摸事件

```
$(document).on('tap', '.button', function() {
    $(this).off('touchstart', this);
    $(this).off('touchend', this);
    .....
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:02:02.850

采用`unbind()`

> 描述：从元素中删除先前附加的事件处理程序。

[http://api.jquery.com/unbind/](http://api.jquery.com/unbind/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T20:33:24.863

问题在于我如何定义`.on()`事件处理程序。当`.on()`用于动态元素时，您将选择器作为参数传递给`.on()`，您不能`.off()`使用项目的子集。原因是根元素上只安装了一个事件处理程序，在本例中为`document`. 因此，对于每个被选中的元素，jQuery 只能删除整个事件处理程序。

克服这个问题的方法是删除整个处理程序并附加一个新的处理程序，其中排除了动态元素的子集。所以...

```
// remove the entire 'tap' handler for all '.button' elements
$(document).off('tap', '.button');

// re-add the 'tap' handler for all '.button-subset' elements
// same elements as before but excluding a certain set
$(document).on('tap', '.button-subset', function() {
  tapAction($(this));
}); 
```

我不太喜欢这个解决方案，因为它看起来效率低下、不优雅。我所做的是`disabled`向按钮添加一个类并在事件处理程序中检查它......

```
$(document)
  .on('tap', '.button', function() {
    if ($(this).hasClass('disabled')) { return false; }
    tapAction($(this));
  }); 
```

# mysql - MYSQL数据库因配置错误频繁崩溃

> ID：15884779
> 
> 赞同：0
> 
> 时间：2013-04-08T16:58:24.057
> 
> 标签：mysql, crash, linode

我刚刚将我的网站转移到 Linode，我目前正在使用它的 1 GB RAM 计划。默认情况下，mysql用户数设置为100。这会导致`Too many connections`错误。

我在此的帮助下再次编辑了 mysql 设置。但是，现在数据库几乎每天都在崩溃！

这是我当前的mysql设置：-

```
key_buffer              = 100M
max_allowed_packet      = 1M
thread_stack            = 128K
thread_cache_size       = 8
myisam-recover         = BACKUP
max_connections        = 150
table_cache       ​ ​     = 1024​
query_cache_limit       = 300M
query_cache_size        = 300M ​
max_allowed_packet      = 16M
key_buffer              = 100M 
```

谁能建议我一些更改或我的数据库如此频繁崩溃的原因？我还可以按需添加有关我的服务器的更多详细信息。

**编辑**

我到处都添加了 mysql_close($con) ，但这进一步增加了我的网站的问题。连接在下面显示的结果中呈指数增长：-

```
mysql> show status like '%onn%';
+--------------------------+-------+
| Variable_name            | Value |
+--------------------------+-------+
| Aborted_connects         | 48    |
| Connections              | 1634  |
| Max_used_connections     | 8     |
| Ssl_client_connects      | 0     |
| Ssl_connect_renegotiates | 0     |
| Ssl_finished_connects    | 0     |
| Threads_connected        | 4     |
+--------------------------+-------+
7 rows in set (0.00 sec) 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:28:07.303

如果您没有关闭连接，那么显然这将导致数据库最终崩溃。重新启动将刷新所有连接，这就是您的服务器可能正在重新启动的原因。

所以修复你的应用程序并关闭连接。同时，您可以使用此脚本来终止进程列表中已打开的连接。该脚本将杀死进程列表中停滞 500 秒的所有内容。您可以根据需要更改时间。

```
SECONDS_TOO_LONG=500
QUERIES_RUNNING_TOO_LONG=`/mysql/bin/mysql -u user -p'password' -ANe"SELECT COUNT(1) FROM information_schema.processlist WHERE user<>'system user' AND time >= ${SECONDS_TOO_LONG}"`
if [ ${QUERIES_RUNNING_TOO_LONG} -gt 0 ]
then
    KILLPROC_SQLSTMT="SELECT GROUP_CONCAT(CONCAT('KILL QUERY ',id,';') SEPARATOR ' ') KillQuery FROM information_schema.processlist WHERE user<>'system user' AND time >= ${SECONDS_TOO_LONG}"
    /mysql/bin/mysql -u user -p'pass' -ANe"${KILLPROC_SQLSTMT}" | /mysql/bin/mysql -u user -p'pass'
fi; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:51:51.090

实际上，增加指数连接的主要来源是我的表本身。我正在使用 MISAM 数据库。它实际上在进行任何更新之前锁定了整个表。因此，如果有太多用户访问我的网站，就会造成麻烦。

解决方案 ：-

我将数据库更改为 InnoDB。它仅锁定所需的单个行。这限制了一次没有连接，低至一位数。[这](https://stackoverflow.com/questions/15899479/converting-a-myisam-table-to-innodb-if-unique-keys-are-lengthy/)是另一个帮助我完全解决问题的问题。

# c++ - 从 C++ 中的 QML-Rectangle 请求键盘焦点

> ID：15884785
> 
> 赞同：2
> 
> 时间：2013-04-08T16:58:36.680
> 
> 标签：c++, qt, qml, qt5

目前我正在尝试在 C++ 中设置一个简单的 QML 矩形的键盘焦点。一个样品：

```
Rectangle {
    Keys.onUpPressed: {
        console.log( 'Key up was pressed');
    }   
} 
```

如果控件具有焦点，我应该能够在日志中看到消息。在 c++ 中，我找到了实例，并尝试编写焦点属性：

```
 if ( true == QQmlProperty::write( pInstance, "focus", newFocus ) ) {
        qDebug() << "Set new focus successful";
    } else {
        qDebug() << "Set new focus failed";
    } 
```

所以属性写入成功。但是当我的控件具有键盘焦点时，我看不到由我的 QML 代码引起的消息。任何想法我如何才能获得焦点。这背后的想法是控制启动时哪个元素成为键盘系统。

金库林

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:02:10.307

从 C++ 对象导出布尔属性，并将 qml 项中的焦点属性绑定到 C++ 对象上的属性。这样您就不会强迫您的 C++ 代码假设您的 UI 的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:47:50.507

我找到了解决方案。我刚刚为我的项目调用了 forceActiveFocus()。

金

# java - 更新列表 基于新列表的集合 收藏

> ID：15884788
> 
> 赞同：3
> 
> 时间：2013-04-08T16:58:41.127
> 
> 标签：java, android, arraylist

我需要以以下方式使用新的 List 集合更新 List 集合：

*   原始列表从新列表中获取新项目
*   原始列表中不在新列表中的项目将被删除

不幸的是，清除原始列表并从新列表重建它不是一种选择，因为那些已经包含具有重要值/引用的对象，我不想丢失。

我需要实现的可以总结如下：

![在此处输入图像描述](https://i.stack.imgur.com/NmlKA.png)

我想出了“某种”可行的“某种”解决方案，但我真的不喜欢它，而且我不确定它的效率如何......

```
class MyClass{
int someInt;
String someString;
int rowID; // DB reference, cannot lose it...
... 
}

public static List<MyClass> mergeMyClassLists(List<MyClass> origList, List<MyClass> newList){

    Integer index[]= new Integer[origList.size()];

    // Find the ones to remove from the old list
    int c=0;
    for(MyClass origMyClass:origList){       
       if(!hasMyClass(newList,origMyClass)) index[c] = origList.indexOf(origMyClass);
    c++;  
    }    

    // Then remove them
    for(int i:index){
    if(index[i]!=null)
        origList.remove(index[i]);
    }

    //Add new ones
    for(MyClass newMyClass:newList){        
        if(!hasMyClass(origList,newMyClass)) origList.add(newMyClass);      
    }           
return origList;
}

private static boolean hasMyClass(List<MyClass> myClassList, MyClass myClass){

    for(MyClass mc:myClassList){
        // Are they the same? based on my own criteria here
        if(mc.someInt == myClass.someInt && mc.someString.equals(myClass.someString)) return true; 
    }
    return false;
} 
```

**有没有更好/标准的方法来做到这一点？**我觉得我可能使情况过于复杂...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:02:49.640

覆盖`equals`并满足您对平等的要求`hashCode`。`MyClass`

这是一个例子：

```
public boolean equals(Object o) {
    if( !(o instanceof MyClass) ) return false;

    MyClass mc = (MyClass)o;
    if(this.someInt != mc.someInt)
        return false;
    return (this.someString == null)
            ? mc.someString == null
            : this.someString.equals(mc.someString);
}
public int hashCode() {
    int hashCode = someInt;
    if(someString != null)
        hashCode ^= someString.hashCode();
    return hashCode;
} 
```

当你覆盖了这些，它就像这样简单：

```
origList.retainAll(newList);
newList.removeAll(origList);
origList.addAll(newList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:15:03.903

按照你的要求，我想对你来说最重要的只是`newList`. 所以，间接地你想删除所有元素`originalList`并将所有元素添加`newList`到`originalList`. 因此，我认为您应该简单地写下，而不是做所有这些事情：

```
originalList = new ArrayList<MyClass>(newList); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:37:45.673

如果您**不想****丢失**，那么`originalList`此代码可能会有所帮助

```
List<String> orgList = new ArrayList<String>();
orgList.add("a");
orgList.add("b");

List<String> newList  = new ArrayList<String>();
newList.add("a");
newList.add("d");
newList.add("e");
newList.add("f");

List<String> result = new ArrayList<String>();
List<String> existingInBoth = new ArrayList<String>();
//Add item to result, if its present in newList BUT not in orgList
for(String s : newList) {
    if(!orgList.contains(s))
    result.add(s);
}
//Add the common items (this is inverse of removing the item which is there in orgList and not in newList)
for(String s : orgList) {
    if(newList.contains(s))
    existingInBoth.add(s);
}
result.addAll(existingInBoth);
System.out.println(result); 
```

为此，您需要创建类的`MyClass`覆盖`equals()`方法`java.lang.Object`并定义对象的**相等**性。原因是，该`contains(Object)`方法本质上是通过检查对象与集合中所有元素的**相等性**( )来检查集合中对象的**存在。****`ob1.equals(obj2)`**

 **方法内部的逻辑`equals()`应该和`hasMyClass`方法`if`条件中写的逻辑类似

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T17:42:29.680

将 NewList 中的项目放在 HashSet 中。（您可能需要在 HashSet 中使用自定义 IEqualityComparer，具体取决于您在 NewList 中实例化对象的方式 - 给定 OldList 中的 Object1 和 NewList 中的 Object2，如果 Object1 == Object2，您可以使用 HashSet 的默认构造函数，但是您如果 Object1 != Object2 和 Object1.equals(Object2)，则需要创建自定义 IEqualityComparer。）遍历 OldList - 如果 NewHashSet.contains(object) 则从 NewHashSet 中删除对象，否则从 OldList 中删除对象。接下来，遍历 NewHashSet，并将剩余的对象添加到 OldList。HashSet.contains 在或多或少的恒定时间内运行，因此整个合并方法将以线性时间运行。**

# tabs - JTabbedPane 标题上的关闭按钮

> ID：15884789
> 
> 赞同：1
> 
> 时间：2013-04-08T16:58:47.120
> 
> 标签：tabs, jtabbedpane

在许多应用程序（例如 Google Chrome）中，标签页的标题右侧有一个“x”，单击时会关闭标签页。我打算在我的 Swing 应用程序中做类似的事情。我找到了这个[主题](https://stackoverflow.com/questions/11553112/how-to-add-close-button-to-a-jtabbedpane-tab)并尝试遵循建议。然而，该方法似乎在选项卡**内**放置了一个按钮，而不是在其标题上。这是我的代码：

```
private void addCloseBtn(String title){
    JPanel btnPane = new JPanel(new GridBagLayout());
    btnPane.setOpaque(false);
    btnPane.setSize(new Dimension(15, 15));

    JButton btn = new JButton("X");
    btn.setPreferredSize(new Dimension(12, 12));
    btn.setMargin(new Insets(0, 0, 0, 0));
    btn.setFont(new Font("Dialog", 1, 9));

    GridBagConstraints gbc = new GridBagConstraints();
    gbc.gridx = 0;
    gbc.gridy = 0;
    gbc.weightx = 1;

    btnPane.add(btn, gbc);
    contentTabs.setComponentAt(contentTabs.indexOfTab(title), btn);
} 
```

`contentTabs`是我框架的私有类域。

`btnPane`覆盖整个标签，这是没用的。我该怎么做才能将它放在选项卡的标题上或至少放在选项卡的右上角？最后为什么`btn.setSize()`方法不起作用并且起作用`btn.setPreferredSize()`？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T12:59:42.593

感谢分享这个话题！它对我帮助很大。

我认为你在这一行是错误的：

> > btnPane.add(btn, gbc);

在此之前，您需要将标题放在网格中，然后您可以放置​​您的按钮。也许您需要这样做，例如您与我们分享的链接中的代码：

> > btnPane.add("你的头衔", gbc);

在你增加 gbc 属性之后：

> > gbc.gridx++; gbc.weightx = 0; 然后这个 btnPane.add(btn, gbc);

# c++ - 如何获取调用者方法的名称或文件和行？

> ID：15884793
> 
> 赞同：9
> 
> 时间：2013-04-08T16:58:52.707
> 
> 标签：c++, debugging, gcc, methods, c++11

*C++11（使用最新的 GCC）有没有办法获取调用当前执行的方法*（调用者）的方法的名称或文件和行号？

例如，当以下代码失败时，我想在错误消息中使用此信息：

```
void SomewhereInMyProgram()
{
    DoSomething(nullptr);
}

void DoSomething(const char* str)
{
    Contract::Requires(str != nullptr);
    // ...
} 
```

目前我有代码报告错误发生在`DoSomething`. 虽然这在技术上是正确的，但我希望它报告错误发生在`SomewhereInMyProgram`任何可能的地方。那会让我的生活轻松很多！

该解决方案可以使用任何 C++11 功能、宏或 GCC 特定的东西，而不是我必须在每个呼叫站点添加的东西。

我认为堆栈跟踪对我**没有**帮助，因为我不能使用异常处理。实际上，我非常有限：它是一个独立的环境，标准 C++ 头文件不可用。我希望有某种宏观解决方案。

* * *

```
class Contract
{
public:
    static void RequiresImpl(bool condition, const char* expression,
        const char* file, int line);

    #define Requires(condition) RequiresImpl(condition, #condition , \
        __FILE__, __LINE__ )
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T17:28:41.950

将 DoSomething 包装在一个宏中：

```
void DoSomethingImp(char const *, char const *file, char const *line)
{
    // do whatever needed, use file and line to report problems
}

#define DoSomething(x) DoSomethingImp(x, __FILE__, __LINE__) 
```

**免责声明：**

这不是最好的做法，人们对以这种方式为 ANSI 或 UNICODE 定义的 WIN API 宏大喊大叫。但我相信如果您不想更改对 DoSomething 的每次调用，这是唯一的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:09:13.430

据我所知，自动获取有关先前调用的信息的唯一方法是使用回溯。这篇文章有大量关于这样做的信息：

[当我的 gcc C++ 应用程序崩溃时如何生成堆栈跟踪](https://stackoverflow.com/questions/77005/how-to-generate-a-stacktrace-when-my-gcc-c-app-crashes)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-04-08T17:59:59.137

在 gcc 中，您可以使用以下宏之一：`__PRETTY_FUNCTION__`or`__FUNCTION__`或`__func__`.

# sql - DB2 查询未知列名 ERRORCODE=-4460, SQLSTATE=null

> ID：15884794
> 
> 赞同：2
> 
> 时间：2013-04-08T16:58:53.430
> 
> 标签：sql, db2

一位同事让我们所有人都感到困惑，因为我们无法预测的原因导致查询失败。我可以确认`ENOTE.EN_FILTER_VALUE_L.FILTER_VALUE_DECODE`数据库中确实存在。至少有三个人盯着它试图找出拼写错误。

查询：

```
SELECT sub.ID, sub.USER_ID, sub.EN_TYPE_CODE, 
typ.EN_TYPE_DESC, typ.APPL_CD, filterval.FILTER_VALUE_DECODE AGENCY_TYPE, 
sub.EN_TYPE_CODE CONCAT ' | ' CONCAT typ.EN_TYPE_DESC ENOTE_STRING, 
org1.ORG_LVL1_CD, org1.ORG_LVL1_DC,
org2.ORG_LVL2_CD, org2.ORG_LVL2_DC,
org3.ORG_LVL3_CD, org3.ORG_LVL3_DC, 
org4.ORG_LVL4_CD, org4.ORG_LVL4_DC 
FROM ENOTE.EN_SUBSCRIPTION_T sub 
LEFT JOIN ENOTE.EN_TYPE_L typ ON sub.EN_TYPE_CODE = typ.EN_TYPE_CODE 
LEFT JOIN ENOTE.EN_FILTER_OFFICE_T filteroffice ON sub.ID = filteroffice.SUBSCRIPTION_ID
LEFT JOIN UMC.ORG_LVL4_L org4 ON org4.ORG_LVL4_CD = filteroffice.ORG_LVL4_CODE
      AND org4.ORG_LVL3_CD = filteroffice.ORG_LVL3_CODE
      AND org4.ORG_LVL2_CD = filteroffice.ORG_LVL2_CODE 
      AND org4.ORG_LVL1_CD = filteroffice.ORG_LVL1_CODE 
      AND org4.STRUCTURE_CD = filteroffice.STRUCTURE_CODE 
LEFT JOIN UMC.ORG_LVL3_L org3 ON org3.ORG_LVL3_CD = filteroffice.ORG_LVL3_CODE 
      AND org3.ORG_LVL2_CD = filteroffice.ORG_LVL2_CODE 
      AND org3.ORG_LVL1_CD = filteroffice.ORG_LVL1_CODE 
      AND org3.STRUCTURE_CD = filteroffice.STRUCTURE_CODE 
LEFT JOIN UMC.ORG_LVL2_L org2 ON org2.ORG_LVL2_CD = filteroffice.ORG_LVL2_CODE 
      AND org2.ORG_LVL1_CD = filteroffice.ORG_LVL1_CODE
      AND org2.STRUCTURE_CD = filteroffice.STRUCTURE_CODE 
LEFT JOIN UMC.ORG_LVL1_L org1 ON org1.ORG_LVL1_CD = filteroffice.ORG_LVL1_CODE 
      AND org1.STRUCTURE_CD = filteroffice.STRUCTURE_CODE
LEFT JOIN ENOTE.EN_FILTER_VALUE_L filterval ON 
   (filteroffice.AGENCY_TYPE_CODE = filterval.FILTER_VALUE AND filterval.FILTER_NAME   = 'Agency Type') 
```

例外：

> com.ibm.db2.jcc.a.SqlException：[jcc][10150][10300][4.3.111] 无效参数：未知列名 FILTER_VALUE_DECODE。错误代码=-4460，SQLSTATE=null

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:39:59.933

我在这里重新问了这个问题[db2jcc4.jar Invalid parameter: Unknown column name](https://stackoverflow.com/questions/15981711/db2jcc4-jar-invalid-parameter-unknown-column-name)并得到了答案。

Hibernate 3.x 和 DB2 9.5 及更高版本中的 JCC 驱动程序的组合存在规范级别不匹配。升级到 Hibernate 4.x 将解决问题，但如果您不能在短期内这样做，设置自定义数据源属性`useJDBC4ColumnNameAndLabelSemantics=2`可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-09T06:10:38.013

较新的 DB2 JDBC 驱动程序在使用“AS”子句返回列名时表现出不同的行为。

修改查询以在列名中使用表达式：

**从 ID=1 的 TABLE 中选择为 MY_NAME**

例如，将空格与列名连接：

**选择 COLUMN_NAME || '' as MY_NAME from TABLE where ID=1**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-12T18:50:55.283

这可能是别名长度的问题吗？

我收到此错误，将列更改为：

`... AS PREVIOUS_MONTH_REDEEMED_RESULTS ...`

到

`... AS pmrr ...`

而且效果很好！

# python - 列表的循环列表

> ID：15884795
> 
> 赞同：0
> 
> 时间：2013-04-08T16:59:01.913
> 
> 标签：python

我需要一些帮助来遍历列表列表。我还在学习 Python。

我有一个整数列表，这些整数是更多整数的列表。

例子：

```
itemWalmart= "food","bread"
itemCostco= "furniture","electronics"
superMarket= walmart,costco 
```

我需要创建一个循环列出项目 + superMarket.Name ，我的问题是当我们向列表中添加更多超级市场和更多项目时。

我想创建一个循环，即使列表增长它也会这样做，所以它会遍历每一个。

列表更大的示例：

```
itemWalmart= "food","bread"
itemCostco= "furniture","electronics"
itemSoriana= "milk","chocolate"
superMarket= itemWalmart,itemCostco,itemSoriana 
```

我正在尝试的是：

```
itemWalmart= "food","bread"
itemCostco= "furniture","electronics"
superMarket= itemWalmart,itemCostco

print superMarket

for i in superMarket:
    print i + superMarket 
```

我明白了：

```
# (('food', 'bread'), ('furniture', 'electronics'))
# ('food', 'bread', ('food', 'bread'), ('furniture', 'electronics'))
# ('furniture', 'electronics', ('food', 'bread'), ('furniture', 'electronics')) 
```

我想得到这个：

```
"food","bread" , itemWalmart
"furniture","electronics" , itemCostco 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T17:02:14.683

你会更容易使用[字典](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)。

```
markets = {}

markets['Walmart'] = "food","bread"
markets['Costco'] = "furniture","electronics"

for k,v in markets.iteritems():  #use items if you are using python 3x
    print k,v 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:03:53.957

```
itemWalmart= "food","bread"
itemCostco= "furniture","electronics"
superMarketItems= itemWalmart,itemCostco
superMarketNames = "walmart","costco"

for items,name in zip(superMarketItems,superMarketNames):
  print "Items:",items," Found@",name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:07:00.567

不幸的是，你不能用列表来做到这一点。`itemWalmart`是一个变量名，并且没有强附加到变量。（并且不可检索，特别是因为它已被复制到`i`）。

我建议使用字典：

```
markets={}
markets['walmart']=('food','bread')
markets['costco']='furniture,electronics'

for key,value in markets.iteritems():
   print (key,value) 
```

* * *

如果您真的想使用列表，请将市场名称与列表一起存储。

```
itemWalmart= "food","bread","itemWalmart"
itemCostco= "furniture","electronics","itemCostco"
superMarket= itemWalmart,itemCostco

print superMarket

for i in superMarket:
    print i 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T17:08:11.633

我不知道这是否可行，但试试这个，我不知道 python，但我认为这个逻辑可行

for i in superMarket: for x in superMarket[i]: print superMarket[i][x] print superMarket

我不确定如何在 python 中添加“以进行回显

# c - 这个c语言代码有什么问题？

> ID：15884797
> 
> 赞同：-5
> 
> 时间：2013-04-08T16:59:05.837
> 
> 标签：c, compiler-errors, void

我编写了这段代码来置换任何数字，并出现以下错误： In function 'int main()': invalid use of void expression

```
#include <stdio.h>
#include <stdlib.h>

typedef unsigned long int uint;   
uint t[11],n;

void permute(uint k) {      
   uint i,c;

  if (1==k) {    
     for (i=n; i>0; --i)

     printf("%d", t[i]);  
     printf("\n"); 
  } 
  else 
  {    
    permute(k-1);   
    for (i=1; i<k; ++i)
    {   
      c=t[i]; t[i]=t[k]; t[k]=c;    
      permute(k-1);    
      c=t[i]; t[i]=t[k]; t[k]=c;}
    }
 }

 void run(uint x)
 {    
    n=0;
    while (x>0)
    {    
       t[++n]=x%10;    
       x /= 10;
    }    
    permute(n);
}

int main () 
{  
    printf ("%d\n",run(125)); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:00:14.313

```
printf ("%d\n",run(125)); 
```

您正在使用函数的返回值`run`但`run`什么也不返回

```
void run(uint x) 
```

`void`表示该函数不返回任何内容，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:01:01.830

您已声明 run as`void run( uint x)`但您将其作为参数传递`printf()`，期望它返回一个整数值以匹配`"%d\n"`格式字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:12:37.723

`run`返回，并且当它不返回任何值时`void`，您不能从函数中“提取”一个整数。`run`这是无效的。

# scala - Scala不变的泛型类型参数被方法参数类型忽略，具体取决于参数是文字表达式还是变量

> ID：15884798
> 
> 赞同：4
> 
> 时间：2013-04-08T16:59:11.630
> 
> 标签：scala, generics, casting, type-conversion, covariance

# 概括

如果我将文字表达式作为参数传递给函数，那不应该与首先评估相同的文字表达式，然后将变量绑定到从该评估返回的值，然后将变量名作为相同的参数传递到相同的功能？如果该文字表达式为函数的参数返回了错误的类型，那么跳过将值分配给一个中间变量的步骤，该变量的类型 Scala 从表达式的返回值中推断出来，不应该在之前将不兼容的类型传递给函数它引发了类型不匹配错误，应该吗？然而，这不是以下示例所显示的吗？

# 例子

在这里，我尝试获取类型的函数参数`Array[Super]`以接受`Array[Sub]`. 在 Scala repl 中声明以下内容。注意函数的单个参数的类型：

```
class Super
class Sub extends Super
def wantsSuperArray(a: Array[Super]) { println(a.size) } 
```

然后构造一个实例`Sub`

```
scala> val s = new Sub
s: Sub = Sub@2c9fa2fb 
```

创建一个`Array[Sub]`：

```
scala> val subArray = Array(s)
subArray: Array[Sub] = Array(Sub@2c9fa2fb) 
```

以下将表明泛型[`Array`在其元素类型上是不变的](http://www.scala-lang.org/api/current/index.html#scala.Array)，并且即使 a是 a ，an`Array[Sub]`也不是 a ：`Array[Super]``Sub``Super`

```
scala> wantsSuperArray(subArray)
<console>:13: error: type mismatch;
 found   : Array[Sub]
 required: Array[Super]
Note: Sub <: Super, but class Array is invariant in type T.
You may wish to investigate a wildcard type such as `_ <: Super`. (SLS 3.2.10)
              wantsSuperArray(subArray)
                              ^ 
```

到目前为止没有任何惊喜。

# 令人惊讶的观察

我们刚刚看到`wantsSuperArray()`不会将`Array[Sub]`. 那么为什么下面不会产生与上面相同的类型不匹配错误消息呢？

```
scala> wantsSuperArray(Array(new Sub))
1 
```

同样，为什么会引发这个没有错误？

```
scala> wantsSuperArray(Array(s))
1 
```

考虑到编译器对这三个变体的处理与 repl 一致，即拒绝编译并为第一个提供相同的类型不匹配错误，并编译第二个和第三个。

# 附加细节

如果我们明确参数化`Array`如下，则错误消息再次出现：

```
scala> wantsSuperArray(Array[Sub](new Sub))
<console>:11: error: type mismatch;
 found   : Array[Sub]
 required: Array[Super]
Note: Sub <: Super, but class Array is invariant in type T.
You may wish to investigate a wildcard type such as `_ <: Super`. (SLS 3.2.10)
              wantsSuperArray(Array[Sub](new Sub))
                                        ^ 
```

因此，显然当不涉及中间变量时，Scala 可以看到`wantsSuperArray`想要什么类型并且正在做某种转换，也许是从`Array[Sub]`to转换`Array[Super]`。尽管如此，这似乎是一个陷阱，因为我仍然认为是否使用中间变量的选择不应该在程序的操作中造成这样的差异，而且这种特殊情况似乎是在执行强制转换而不是引发错误程序员会期望基于泛型`Array`类型参数的不变性。

# 问题

如果我相信在`wantsSuperArray()`上面定义的调用中，传递一个文字表达式应该与传递一个变量的名称相同，该变量包含评估同一表达式所产生的值，如上所示，那么我误解了什么？

*   我怎样才能更好地理解我在这里观察和抱怨的内容？

*   我可以在 Scala 文档中的什么地方阅读我在这里观察到的现象，以便能够理解它并且再也不会对它感到惊讶？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T17:08:29.773

`wantsSuperArray`这是因为 scala 根据预期的参数类型执行类型推断。因此，即使`Array(new Sub)`单独使用会被推断为 type 的表达式`Array[Sub]`，编译器也会看到您处于`Array[Super]`预期 type 值的上下文中，因此在调用`Array.apply`（这是通用的）时，它会尝试`Super`用作类型参数（而不是of `Sub`)，它正确地键入（`Array.apply`接受类型参数的可变参数列表`T`，在这里`T = Super`，您传递一个实例`Sub`，它是 的子类型`Super`，它是声音）。

* * *

这是 scala 规范的相关摘录，第*6.1 章：表达式*类型，第*6.6 章：函数应用程序*和*第 6.26.4 章：局部类型推断*（强调我的）：

> 表达式的类型通常**与某些预期类型 (1) 相关**（可能未定义）。当我们写“表达式 e 应符合类型 T”时，我们的意思是：e 的预期类型是 T，表达式 e 的类型必须符合 T。
> 
> **...**
> 
> 应用程序 f (e1, ..., em) 将函数 f 应用于参数表达式 e1, ..., em。如果 f 具有方法类型 (p1:T1, ..., pn:Tn)U，**则每个参数表达式 ei 的类型都使用对应的参数类型 Ti 作为预期类型 (2)**进行类型化。令 Si 为参数 ei (i in 1, ..., m) 的类型。**如果 f 是多态方法，则使用局部类型推断来确定 f (3) 的类型参数**。
> 
> **...**
> 
> **如果 f 是多态方法，则它适用于局部类型推断可以确定类型参数以便实例化方法适用 (4)* 的情况**。
> 
> **...**
> 
> 局部类型推断推断要传递给多态类型表达式的类型参数。假设 e 的类型为 [a1 >: L1 <: U1, ..., an >: Ln <: Un]T 并且没有给出明确的类型参数...如果表达式 e 显示为一个值而没有应用于 value参数，**类型参数是通过求解将表达式的类型 T 与预期类型 pt 相关联的约束系统来推断的 (5)**

第 (3) 和 (4) 点解释了在表达式`Array(new Sub)`中，类型推断如何从`new Sub`到`Array.apply`产生类型`Array[Sub]`。这是您显然没有问题的“简单”案例。如果你只是采取这个规则，`Array(new Sub)`应该输入为`Array[Sub]`. 事实上，当它被单独输入时会发生这种情况（例如 in `val subArray = Array(new Sub)`，`subArray`确实有 type `Array[Sub]`）。

但是点 (1)、(2) 和 (5) 一起也说在 中`wantsSuperArray(Array(new Sub))`，参数的预期类型`wantsSuperArray`（即`Array[Super]`）被传递给表达式`Array(new Sub)`（因为它是类型参数不是的多态类型的表达式明确给出）。因此，表达式`Array(new Sub)`被评估为表达式`Array[Super](new Sub)`。换句话说，它的类型为`Array[Super]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:09:47.180

既然你不能真正做到`Array(s)`，因为类型信息是必需的，即使它需要`Any`，编译器也会运行它的类型推断代码并检测它可以创建一个`Array[Super]`并且它适合方法调用。

当您明确地说这是一个`Array[Sub]`编译器不会运行类型推断时，因为您已经自己给出了类型，并且由于类型与方法调用不匹配，所以这是一个编译错误。

# java - Java回合双倍并获得双倍

> ID：15884799
> 
> 赞同：0
> 
> 时间：2013-04-08T16:59:17.517
> 
> 标签：java, precision, rounding

我见过很多使用 DecimalFormat 和 NumberFormat 进行舍入的例子，但是这些在使用时会返回字符串。是的，我知道可以使用 parse 来取回数字，但这增加了复杂性。

那么如何以给定的精度将双打循环并以尽可能少的中间步骤获得双打呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:02:07.067

没有真正的方法可以做到这一点。我想你可以使用旧的 (X*10^N)/10^N 技巧，但你可能无法获得你想要的任意精度。这就是浮点数的诀窍。如果您想要任意精度，则需要使用 BigDecimal。

# php - 使用 MYSQL 和 PHP 的简单查询

> ID：15884802
> 
> 赞同：-1
> 
> 时间：2013-04-08T16:59:22.400
> 
> 标签：php, mysql, select

我正在尝试使用 PHP 进行基本的 MYSQL 搜索。我有一个 2 表数据库（员工和图片），我想以表格格式查询和输出。目前，我无法让我的查询正确地从数据库中提取。请注意，我使用 mysql 而不是 mysqli 进行连接。由于项目限制，我不能使用mysqli。可以提供的任何帮助将不胜感激。

```
//queries the database tables. Takes data from two tables, staff and pic and joins     them together (innerjoin)
$query = "SELECT staff.tfid, staff.lname, staff.fname, pic.file".
 "FROM staff, pic ".
    "WHERE staff.tfid = pic.tfid";

$result = mysql_query($query) or die(mysql_error());

// Print out the contents of each row into a table 
while($row = mysql_fetch_array($result)){
    echo $row['tfid']. " - ". $row['lname']. " - ". $row['fname']. " - ". $row    ['file'] ;
    echo "<br />"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:01:51.917

看起来您可能在“pic.file”之后需要一个空格

```
$query = "SELECT staff.tfid, staff.lname, staff.fname, pic.file ".
"FROM staff, pic ".
"WHERE staff.tfid = pic.tfid"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:02:03.843

将此用作您的查询

```
$query = "SELECT staff.tfid, staff.lname, staff.fname, pic.file "."FROM staff, pic "."WHERE staff.tfid = pic.tfid"; 
```

我想你之前错过了一个空间`FROM`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:04:17.100

mysql_query($query) 需要第二个参数 $dbLink 当您打开数据库连接时获得。

```
$dbLink = mysql_connect(...);

//...

$result = mysql_query($query,$dbLink) or die(mysql_error($dbLink)); 
```

# hadoop - 配置 Hadoop 为每个键使用不同的 Reducer 进程？

> ID：15884805
> 
> 赞同：0
> 
> 时间：2013-04-08T16:59:34.793
> 
> 标签：hadoop, hadoop-streaming

与我的问题相关，我有一个用 Python 编写的流式处理过程。

我注意到每个`Reducer`都通过`sys.stdin`.

我希望 sys.stdin 仅具有与一个键关联的值。Hadoop有可能吗？我认为每个键的不同进程将是完美的，但找不到提供这种行为的配置。

有人可以帮助我提供可以帮助我的信息或代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:36:36.567

每个 mapper 都必须知道可用的 reducer 总数，因为它为每个 reducer 生成一个输出文件。如果您在开始作业之前知道键的数量，则可以将作业配置为具有那么多减速器。否则你就不走运了，因为直到映射器完成后才能知道键的总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T06:50:11.293

是的，如果您知道映射器将发出的键总数。您可以将其设置为 job.setNUmReduceTasks(int n)

此外，可以并行运行的减速器总数可以在 mapred-site.xml 中定义为

mapred.tasktracker.reduce.tasks.maximum

它将加快减少过程。但是，每个减速器都作为 jvm 任务运行。因此，您的配置应该能够处理将产生的 jvm 数量

# jquery - 可变内容进入 jQuery 弹出窗口

> ID：15884807
> 
> 赞同：0
> 
> 时间：2013-04-08T16:59:35.077
> 
> 标签：jquery, asp.net, popup

如果这已经得到回答，我很抱歉。有许多 jQuery 弹出式答案，但没有一个能满足我的特定需求。

我正在寻找有关制作可以采用 HTML 并显示它的通用弹出窗口处理程序的方向。例如，我们有一个重定向到另一个 URL 的登录页面（SSO 解决方案）。我想打个电话，获取返回的 HTML 并将其粘贴到 jQuery 弹出窗口中。

除此之外，构建它的正确方法是什么？它会全部进入一个单独的“popup.js”文件吗？有没有我可以从中收集到的这样做的例子？

无论如何，我感谢您对此事的任何帮助或建议。

# autohotkey - AutoHotkey 检测按键并发送按下的键而无需再次调用该函数

> ID：15884813
> 
> 赞同：0
> 
> 时间：2013-04-08T17:00:14.127
> 
> 标签：autohotkey

好的，所以我的问题很简单，我尝试过搜索但找不到任何东西。

我的代码是这样的：

```
T::
Send t
if(x=0)
y=1
Return 
```

它创建了一个循环，这很明显。我试过添加：

```
T::
if(tx=0){
Send t
tx=1
}else{
tx=0
}
if(x=0)
y=1
Return 
```

但这也不会这样做，所以我的问题是，有没有办法检测按键是由脚本还是由键盘本身生成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:23:38.617

如果你在`$`你的热键前面添加一个`t`，像这样`$t::`，它将不再由脚本本身触发。希望这能回答你的问题。

# c# - 如何使用带有 Web 服务代理的 Microsoft fakes？

> ID：15884821
> 
> 赞同：0
> 
> 时间：2013-04-08T17:00:31.807
> 
> 标签：c#, asp.net, web-services, microsoft-fakes

我正在尝试为现有的订单发送例程编写一些单元测试：该例程使用实体框架提取订单，将 ef 类中的数据映射到 web 服务公开的例程，然后发送到 web 服务。

我想创建一个 Web 服务的 shim，这样我就可以捕获发送订单的例程，恢复发送的对象并对其进行测试。

如何创建代理类的垫片？

谢谢卢卡

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-08T22:38:04.637

如果我没有弄错你的问题，你可以在这里使用依赖注入来测试代理类。

你可以做这样的事情

```
public class SampleClass
{
   ITestServices _testServices;
   SampleClass(ITestServices testServicesObj)
   {
     _testServices = testServicesObj;
   }
   public string OrderSent()
   {
     return "Orders " + _testServices.OrdersSent().ToString();
   }
} 
```

在您的测试中，传入模拟对象

# android - “应用程序已意外停止” - 如果是谷歌地图

> ID：15884835
> 
> 赞同：-1
> 
> 时间：2013-04-08T17:01:20.677
> 
> 标签：android

我有此代码用于在 android 设备上显示地图，但在“应用程序地图（进程 com.example.maps）已意外停止。”对话框中显示以下错误。即使按照 developer.google.com/maps 上给出的分步程序进行操作，上述给出的错误也会显示。

```
package com.example.maps;

import android.os.Bundle;
import android.app.Activity;
//import android.view.Menu;
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
}

/*  @Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}*/
} 
```

这是布局......

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/map"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:name="com.google.android.gms.maps.MapFragment"/> 
```

这是 LogCat 视图.....

```
04-08 21:53:15.304:         D/AndroidRuntime(11290): Shutting down VM
04-08 21:53:15.304:         W/dalvikvm(11290): threadid=1: thread exiting with uncaught                                                                       exception (group=0x400205a0)
04-08 21:53:15.304:         E/AndroidRuntime(11290): FATAL EXCEPTION: main
04-08 21:53:15.304:         E/AndroidRuntime(11290): java.lang.RuntimeException: Unable to start activity ComponentInfo com.example.maps/com.example.maps.MainActivity}:                                                     android.view.InflateException: Binary XML file line #2: Error inflating class fragment
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1830)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1851)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.app.ActivityThread.access$1500(ActivityThread.java:132)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.os.Looper.loop(Looper.java:143)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.app.ActivityThread.main(ActivityThread.java:4277)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at java.lang.reflect.Method.invokeNative(Native Method)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at java.lang.reflect.Method.invoke(Method.java:507)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at dalvik.system.NativeStart.main(Native Method)
04-08 21:53:15.304:         E/AndroidRuntime(11290): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at com.android.internal.policy.impl.PhoneWindow.setContentView     
(PhoneWindow.java:239)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.app.Activity.setContentView(Activity.java:1742)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at com.example.maps.MainActivity.onCreate(MainActivity.java:12)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1794)
04-08 21:53:15.304:         E/AndroidRuntime(11290):    ... 11 more
04-08 21:53:15.304:         E/AndroidRuntime(11290): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader       
dalvik.system.PathClassLoader[/data/app/com.example.maps-1.apk]
04-08 21:53:15.304:         E/AndroidRuntime(11290): at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.view.LayoutInflater.createView(LayoutInflater.java:471)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView           
(PhoneLayoutInflater.java:66)
04-08 21:53:15.304:         E/AndroidRuntime(11290): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
04-08 21:53:15.304:         E/AndroidRuntime(11290):    ... 19 more
04-08 21:53:17.406:         I/Process(11290): Sending signal. PID: 11290 SIG: 9
04-08 21:53:34.072:         D/AndroidRuntime(11403): Shutting down VM
04-08 21:53:34.072:         W/dalvikvm(11403): threadid=1: thread exiting with uncaught                                                                exception (group=0x400205a0)
04-08 21:53:34.082:         E/AndroidRuntime(11403): FATAL EXCEPTION: main
04-08 21:53:34.082:         E/AndroidRuntime(11403): java.lang.RuntimeException: Unable                               to start activity ComponentInfo   {com.example.maps/com.example.maps.MainActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1830)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1851)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.app.ActivityThread.access$1500(ActivityThread.java:132)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.os.Looper.loop(Looper.java:143)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.app.ActivityThread.main(ActivityThread.java:4277)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at java.lang.reflect.Method.invokeNative(Native Method)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at java.lang.reflect.Method.invoke(Method.java:507)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at dalvik.system.NativeStart.main(Native Method)
04-08 21:53:34.082:         E/AndroidRuntime(11403): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at com.android.internal.policy.impl.PhoneWindow.setContentView         
(PhoneWindow.java:239)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.app.Activity.setContentView(Activity.java:1742)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at com.example.maps.MainActivity.onCreate(MainActivity.java:12)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1794)
04-08 21:53:34.082:         E/AndroidRuntime(11403):    ... 11 more
04-08 21:53:34.082:         E/AndroidRuntime(11403): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader       
dalvik.system.PathClassLoader[/data/app/com.example.maps-2.apk]
04-08 21:53:34.082:         E/AndroidRuntime(11403): at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.view.LayoutInflater.createView(LayoutInflater.java:471)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView           
(PhoneLayoutInflater.java:66)
04-08 21:53:34.082:         E/AndroidRuntime(11403): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
04-08 21:53:34.082:         E/AndroidRuntime(11403):    ... 19 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:12:34.847

您正尝试`MapFragment`在 Android 2.3 或更低版本的设备上运行的项目中使用。要在 Android 2.3 及更低版本上使用 Maps V2，您需要使用 Android Support 包中的 Fragments backport 并使用`SupportMapFragment`.

# sql - 如何获取sql server中的最新行

> ID：15884841
> 
> 赞同：3
> 
> 时间：2013-04-08T17:01:38.290
> 
> 标签：sql, sql-server

我有一张这样的桌子：

```
id      start       end
------------------------------        
1       2013-04-08  null
2       2013-04-01  null
2       2012-04-01  2013-04-01
3       2012-04-01  2013-04-01
4       2012-04-01  2013-04-01
4       2011-04-01  2012-04-01 
```

我想得到这样一张桌子：

```
id  start       end
-----------------------------            
1   2013-04-08  null
2   2013-04-01  null
3   2012-04-01  2013-04-01
4   2012-04-01  2013-04-01 
```

所以我希望为每个 id 获取一行最新信息。

我该如何编写查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T17:03:21.017

`SQL Server`支持`Common Table Expression`和`Windowing Functions`。 `ROW_NUMBER()`对每个组的记录进行排名，这是过滤他的记录的基础。

```
WITH records
AS
(
    SELECT  ID, [Start], [End],
            ROW_NUMBER() OVER(PARTITION BY ID ORDER BY [START] DESC) rn
    FROM    TableName
)
SELECT ID, [Start], [End]
FROM    records
WHERE   rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/1be2b/1)
*   [TSQL 排名函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:56:45.927

作为 J W 回答的后续行动，您也可以这样做，在我看来这更容易弄清楚：

```
SELECT * FROM (SELECT * FROM table1 ORDER BY start DESC) AS temp GROUP BY id; 
```

或者

```
SELECT * FROM (SELECT * FROM table1 ORDER BY start DESC) AS temp GROUP BY id ORDER BY id; 
```

这会做同样的事情，所以这取决于你喜欢查询的方式，最后一个查询按 ID 对结果进行排序，而第一个则没有。

[http://sqlfiddle.com/#!2/885cd/1](http://sqlfiddle.com/#!2/885cd/1)

# c# - 如何将特定的日期格式返回为 DateTime 数据类型

> ID：15884843
> 
> 赞同：1
> 
> 时间：2013-04-08T17:01:45.353
> 
> 标签：c#

我正在使用实体框架进行查询，我需要比较 2 个数据时间。一个来自现场，另一个来自选择。问题是我需要将用户输入转换为日期时间，但需要以我想要的格式和我需要的数据类型。我需要返回这样的值：

```
DateTime date = Convert.ToDataTime("2012-02-30"); 
```

但是日期变量的值是`2012/02/30`，我需要这种格式`2012-02-30`，数据类型**必须是 DateTime**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:05:59.600

在 C#`DateTime`中，除非将对象转换为字符串，否则对象没有与之关联的格式。然后可以按照您想要的任何方式对其进行格式化。

同样，当您从文本加载值时，它会转换为`DateTime`. 然后，您可以在此对象上运行比较。

```
DateTime date1 = Convert.ToDataTime("2012-02-30");
DateTime date2 = Convert.ToDataTime("2012/02/30");

if (date1 == date2) Console.WriteLine("They match!"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:06:36.790

由于对 DateTime 的工作方式存在误解，我认为您提出了错误的问题。它不会将值存储为字符串。您的字符串实际上只是日期时间的表示。

您实际需要做的是查看 DateTime.ToString() 覆盖。

**链接** [http://msdn.microsoft.com/en-gb/library/zdtaw1bw.aspx](http://msdn.microsoft.com/en-gb/library/zdtaw1bw.aspx)

当你输出你的日期时间时，使用类似的东西

```
date.ToString("yyyy-MM-dd"); 
```

您将获得所需的格式。

但是，就基本理论而言，日期时间本身并不存储为字符串。您只需要担心显示它的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:11:41.150

如前所述，DateTime 值没有与之关联的格式。所有 DateTimes 都作为日期处理，无论它们是从什么字符串格式生成的。

如果您的问题是从字符串生成 DateTime 对象，请查看以下内容

```
Convert.ToDateTime 
```

或者

```
DateTime.TryParse 
```

如果您的问题是比较两个日期时间，则内置的比较运算符在 DateTime 上的功能与在其他任何时间上的功能一样好。

```
UserDate.Equals(FieldDate)
UserDate > FieldDate
UserDate < FieldDate 
```

等等等等等等。

最后，如果您的问题是字符串格式并且您无法准确控制用户输入的内容，那么您需要专门提出这个问题，因为我们需要更多地了解用户可以输入的内容，以告诉您您可能能够输入的内容与它有关。

**添加编辑**

看起来最后一个是你的问题......

尝试使用简单的字符替换。

```
string newString = DateString.Replace("/", "-"); 
```

这只适用于单一的、特定的格式更改……但它会做你想做的事。

# layout - 如何像 vaadin 6 中的 Form 一样在 vaadin 7 中布局 FormLayout？

> ID：15884854
> 
> 赞同：0
> 
> 时间：2013-04-08T17:02:17.007
> 
> 标签：layout, vaadin

我正在尝试将应用程序从 vaadin 6.8 迁移到 vaadin 7。由于在 vaadin 7 中不推荐使用 Form 类，因此我正在尝试使用 FieldGroup 构建我的表单并使用 FormLayout 呈现它们。建筑不是问题，但布局不是那么顺利。现在我有两个问题。

1.  如何在表单的整个宽度上显示表单描述？我希望它的宽度完全相同，既不宽也不只在第二列中。

2.  如何添加按钮（确定和取消），使它们彼此相邻，而不仅仅是在第二列？就像旧 Form 类中的页脚一样。

这可以使用 FormLayout 还是我使用其他布局？

谢谢
拉斐尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T07:33:10.910

*注意：我实际上是在上周才开始调查 V7，所以请谨慎对待我的回应......*

这两个问题都源于 FormLayout 从未提供页眉和页脚这一事实 - Form 类提供了。

我建议创建您自己的具有页眉布局、FormLayout 和页脚布局的 Form 等效项，例如（未尝试使用，可能需要对 mainLaout 使用 GridLayout 而不是 VerticalLayout）

```
public class FormComponent extends CustomComponent {
  private Layout mainLayout;

  protected Layout header;
  protected Layout central;
  protected Layout footer;

  public FormComponent() {
    init(new HorizontalLayout(), new FormLayout(), new HorizontalLayout());
  }

  protected void init(Layout header, Layout central, Layout footer) {
    this.footer = footer;
    this.header = header;
    this.central = central;

    mainLayout = new VerticalLayout();
    mainLayout.addComponent(header);
    mainLayout.addComponent(central);
    mainLayout.addComponent(footer);

    setCompositionRoot(mainLayout);
    setSizeUndefined();
  }

  public Layout getHeader() {
    return header;
  }

  public Layout getCentral() {
    return central;
  }

  public Layout getFooter() {
    return footer;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T06:46:25.880

1.  在 Vaadin 7 中，没有与 Vaadin 6 Form 组件等效的内置组件。所以你必须创建你自己的。
2.  创建新的 Horizo​​ntalLayout 并向其添加 OK 和 Cancel 按钮。然后将该 Horizo​​ntalLayout 添加到您的 FormLayout。

# symfony - Yui_compressor 在 symfony 2 中不工作

> ID：15884863
> 
> 赞同：1
> 
> 时间：2013-04-08T17:02:49.527
> 
> 标签：symfony, minify, assetic, yui-compressor

我使用[本指南](http://www.kiwwito.com/article/less-css-with-assetic-and-symfony-2)将 yui_compressor 添加到我的 symfony 项目中。但它没有创建缩小文件。以下是我应用的设置，请查看并告诉我可能出了什么问题。配置文件

```
// Added this to the config.yml file in app/config (and yes, I'm on a mac)  
    yui_css:
        jar: "%kernel.root_dir%/Resources/filter/java/yuicompressor-2.4.7.jar"
        java: /usr/bin/java 
```

基枝

```
// Added this to the :base.html.twig in app/Resources/views

    {% stylesheets  filter='yui_css' output='public/css/compiled-main.css'
        'public/css/main.css'
    %} 
```

将 build 下的[yui_compressor](https://github.com/yui/yuicompressor/downloads) zip 文件中的文件添加到我的 symfony 项目中的 app/Resources/filter/java 文件夹中

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T10:38:12.063

**1 - 下载 yuicompressor 并将其添加到您的项目中**

解压，到 build/dir 解压 yuicompressor-2.4.7.jar 放到你的 app/Resources/java/ 项目目录下。（另外，您可以为 yuicompressor.jar 重命名 yui 文件）

**2 - 为 prod 环境启用 yui 压缩**

在您的 config_prod.yml 文件中添加 yui 压缩器是合乎逻辑的，而不是适用于所有环境（您应该从 config.yml 中删除行）。

所以在 config_prod.yml 中添加这些行：

```
assetic:
    debug: false
    filters:
        yui_js:
            jar: "%kernel.root_dir%/Resources/java/yuicompressor.jar"
            apply_to: "\.js"
        yui_css:
            jar: "%kernel.root_dir%/Resources/java/yuicompressor.jar"
            apply_to: "\.css" 
```

**3 - 验证您的产品控制器文件**

转到 web/app.php，并设置 prod / false（false 表示没有调试）。

```
$kernel = new AppKernel('prod', false); 
```

**4 - 清除缓存**

如果你想重建你的 CSS 和 JS（更新后），永远不要忘记清除 prod 中的缓存，否则 yui 压缩器将忽略修改：

```
php app/console cache:clear --env=prod --no-debug 
```

**5 - 使用压缩重新生成固定装置**

最后，您可以生成和压缩文件！

```
php app/console assetic:dump --env=prod --no-debug -v 
```

注意 -v 显示更多关于压缩过程的详细信息，您将能够查看是否有错误 taht 导致 yui 压缩器出现问题！

比如 JS 注释标签“/！” 导致 yui 压缩器出现问题，你应该重命名所有“/！” 用于 JS 文件中的“/*”。

就是这样^^

# linux - 在文件中按列排序 Linux

> ID：15884865
> 
> 赞同：1
> 
> 时间：2013-04-08T17:03:02.500
> 
> 标签：linux, file, unix, sorting

所以我在这里看到了很多各种各样的问题，我希望有人能解决我自己的问题。我有一个看起来像这样的文件：

```
data    dd  0.0 96  157 KL  71  X   6947
data    fb  0.0 11  3R2 HD  13  1   1850
data    bx  0.0 14  352 FG  12  X   4810
data    bh  0.0 13  3GF FH  1T  1   6840
data    fb  0.0 11  3R2 HD  13  1   1325
etc. 
```

我想按第 8 行和第 9 行对文件进行排序，以便输出如下：

```
data    bx  0.0 14  352 FG  12  X   4810
data    dd  0.0 96  157 KL  71  X   6947
data    fb  0.0 11  3R2 HD  13  1   1325
data    fb  0.0 11  3R2 HD  13  1   1850
data    bh  0.0 13  3GF FH  1T  1   6840
etc. 
```

我试过了

排序 -n -k7 -k8 文件 > 新文件

但这只能对它进行排序：

```
data    dd  0.0 96  157 KL  71  X   6947
data    bx  0.0 14  352 FG  12  X   4810
data    fb  0.0 11  3R2 HD  13  1   1850
data    bh  0.0 13  3GF FH  1T  1   6840
data    fb  0.0 11  3R2 HD  13  1   1325
etc. 
```

所以我尝试了：

```
> sort -n -k8 -k9 file > newfile 
```

但这只会让情况变得更糟

```
data    dd  0.0 96  157 ZL  71  P   69412217
data    fb  0.0 11  3R2 HX  13  1   185135150
data    bx  0.0 14  352 FG  12  X   4810
data    bh  0.0 13  3GF FH  1T  1   6840
data    fb  0.0 11  3R2 HY  13  L   132321355
etc. 
```

我也尝试过：

> 排序 -n -k8,9 文件 > 新文件

但这似乎并不可靠，因为它会连续正确执行几次，但随后会随机加入一些人：

```
data    dd  0.0 96  157 KL  71  X   6947
data    bx  0.0 14  352 FG  12  26  443810
data    fb  0.0 11  3R2 HD  13  1   1850
data    bh  0.0 13  3GF FH  1T  1   6840
data    bx  0.0 14  352 FG  12  2   465310
data    fb  0.0 11  3R2 HD  13  1   1325
etc. 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:06:21.990

这个怎么样：

```
[cnicutar@ariel ~]$ sort -n -k8,8 -k9,9  tos

data    bx  0.0 14  352 FG  12  X   4810
data    dd  0.0 96  157 KL  71  X   6947
data    fb  0.0 11  3R2 HD  13  1   1325
data    fb  0.0 11  3R2 HD  13  1   1850
data    bh  0.0 13  3GF FH  1T  1   6840 
```

这将第八个字段指定为主键，将第 9 个字段指定为辅助键。

# delphi - 使用 dwscript 作为 Delphi Application 的插件框架

> ID：15884867
> 
> 赞同：1
> 
> 时间：2013-04-08T17:03:09.343
> 
> 标签：delphi, dwscript

有没有办法使用 dwscript 作为 Delphi 应用程序的插件框架？例如，我在 dwscript 中有一个添加数字的简单方法，这需要从托管应用程序中调用。

一种解决方案是将 dwscript 保留为文本文件并在运行时加载文本文件并从主机调用该方法。有没有办法创建一个包含 dwscript 的 dll 并在运行时加载 dll 然后调用该方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:02:24.230

DWS 不创建 DLL。它将帕斯卡风格的源代码编译为中间文件以供执行，因此您可以根据需要将文本文件部署为插件。例如，回调到您的 DWS 源下载并在 DWS 站点的工具目录中运行 IDE 演示，这有一个“执行过程”菜单选项和简单的源代码来查看它是如何完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T05:54:09.157

应该没有问题，不过你还是先看看delphi里面怎么管理dll插件吧，因为ethere有一些限制：

查看 delphi.about.com 有一些教程。 [http://delphi.about.com/od/windowsshellapi/a/dll_basics.htm](http://delphi.about.com/od/windowsshellapi/a/dll_basics.htm)

您首先会发现的问题之一是您可能会遇到类问题，因为 DLL 就像一个独立的应用程序，因此它会创建自己的类表。因此，对于主机应用程序，dll 中包含的 TDWScript 类是与其包含的类（主机）不同的类。

有一些方法可以实现，这取决于您的需求：

1) 例如，您可以调用 DLL 方法，而不是直接调用 TDWscript 类，只调用像 'ExecuteScript(afilename)' 这样的方法

2）如果您的插件需要与主机应用程序交互，那就更复杂了，因为您必须建立一个通信协议以便两者（主机和插件可以交互）

选项是： a) 直接使用接口而不是类。b) 使用内存管理器，如 sharemem（delphi 附带）或 fastMM4（开源），它们应该包含在 bot DLL 和 APP 中，因此它们将共享相同的内存管理器和相同的类表。

如果您是插件新手，请查看 JEDI VCl 组件，那里有 JvPlugin 和 JvPluginManager，它是一个简单但功能强大的框架，可以开始创建您自己的插件框架。有一些关于如何管理插件的演示，使用 DLL 方式创建它们。这可能对你想要的有用。以及如何使用接口而不是直接使用类的演示。

# c# - 如何在 C# 中使用操作响应 URL 请求

> ID：15884868
> 
> 赞同：1
> 
> 时间：2013-04-08T17:03:15.690
> 
> 标签：c#, httplistener

我本质上想做的是监听某些 http 请求并根据它们执行不同的操作。例如，如果我`http://localhost:8080/test`在浏览器中打开，我想执行一个对应于测试的操作。我知道这可以通过 httplistener 来完成，但具体是如何完成的，我无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:13:01.877

只需使用[HttpListenerRequest](http://msdn.microsoft.com/en-us/library/system.net.httplistenerrequest.aspx)对象来获取 URL 并执行您想要执行的任何操作。

编辑：删除无效链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:05:15.463

您正在寻找的是`ASP.NET Routing`. 这是执行此操作的最有效方法，您可以[在此处阅读更多内容。](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx)

# scala - 变量超出范围时是否被解除分配

> ID：15884872
> 
> 赞同：0
> 
> 时间：2013-04-08T17:03:28.607
> 
> 标签：scala

鉴于此代码段

```
def doSomething() = {

    val associations : HashMap[Int, Int] = function_that_create_a_hashmap
    println("something")
} 
```

何时`doSomething`终止变量`associations`被释放？我应该调用一些析构函数（`.clear`在这种情况下可能是）还是该操作没有用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T17:16:14.327

这不是必需的 - 如果您的应用程序不再引用`HashMap`，那么它将在将来的某个时候自动被垃圾收集。

如果你真的有一个巨大的哈希映射，你想摆脱它以避免它的内存消耗在`doSomething`完成后触发 GC 周期，你可以调用`System.gc()`，但这通常既不需要也不是推荐的做法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T17:05:24.767

调用`.clear`a`HashMap`不会将其从内存中删除；它只是清除它预先存在的映射，因此该对象仍将存在于内存中。

由于 Scala 在 JVM 上运行，我想它会在未来的某个时候被垃圾收集器收集（假设没有对 的现有引用`associations`）。JVM 管理自己的内存，从而将程序员从手动管理内存的负担中解放出来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T18:21:38.457

`associations`当创建它的范围不再存在时（当给定的调用返回时）绑定不再存在`doSomething`。这将删除一个对 的引用`HashMap`，一旦没有，该值就是垃圾，并且在未来的某个未指定时间（可能永远不会/不会在 JVM 退出之前）进行回收。

# node.js - 代码更改后服务器重新启动后运行测试

> ID：15884876
> 
> 赞同：0
> 
> 时间：2013-04-08T17:03:44.553
> 
> 标签：node.js, gruntjs

我有带有 watcher 和[nodemon的](https://github.com/remy/nodemon)[grunt-nodeunit](https://github.com/gruntjs/grunt-contrib-nodeunit)任务。因此，当我对文件进行任何更改时，**grunt-nodeunit**和**nodemon**开始同时工作。当**grunt-nodeunit**执行测试**时 nodemon**重新启动服务器。所以我得到了一些虚假的失败测试。服务器重启后如何运行测试？

 ******我的咕噜声配置：

```
 grunt.initConfig({
    nodeunit: {
        all: ['./test.nodeunit/**/*.coffee']

    },
    watch: {
       all: {
            files: ['**/*.coffee', '**/*.jade'],
            tasks: ['nodeunit']
        }
    }
}); 
```

我的 nodemon 配置在`package.json`：

```
"start": "nodemon app.js" 
```******

# php - 更新while循环中的所有行

> ID：15884877
> 
> 赞同：0
> 
> 时间：2013-04-08T17:03:44.767
> 
> 标签：php, mysql, while-loop, sql-update

我正试图将我的大脑包裹在我在这里做错的事情上。这是我想删除记录时调用的函数。记录被删除，但如果要删除的记录位于行中间的某个位置，我希望 display_order 重新建立自身。所以第一个记录总是1，第二个总是2，等等。

```
<?php
    $counter = 1;
    require ("connection.php");
    $sql = "SELECT * FROM pages";
    $result = $conn->query($sql) or die(mysqli_error());

    $id = $_GET['id'];
    $delete = mysqli_query($conn, "DELETE FROM pages WHERE id ='".$id."'");
    if ($delete){

        while($row = $result->fetch_object()){
            $reord = "UPDATE pages SET display_order = '".$counter."'";
            $result2 = $conn->query($reord) or die(mysqli_error());
            $counter++;
        }

        header("Location: admin.php");
    }else{
        echo "NOTHING DELETED id=".$id;
    }
?> 
```

我收到的错误是所有记录“display_order”现在都更新为最大记录数，例如，我有四条记录，我删除了其中一条，现在所有剩余记录的 display_order 都为 3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:06:51.297

您错过了将页面 ID 作为 WHERE 条件添加到查询中。像这样：

```
while($row = $result->fetch_object()){
    $reord = "UPDATE pages SET display_order = '".$counter."' WHERE page_id = '" . $row->page_id . "'";
    $result2 = $conn->query($reord) or die(mysqli_error());
    $counter++;
} 
```

注意：如果缺少 WHERE 子句，`pages`表中的所有记录都将被更新。

# android - webdriver python的触摸事件示例？

> ID：15884878
> 
> 赞同：7
> 
> 时间：2013-04-08T17:03:47.830
> 
> 标签：android, python, selenium, webdriver

我在网上看到了大约 100 个[Java webdriver 的触摸事件示例](http://android-developers.blogspot.com/2011/10/introducing-android-webdriver.html)，但没有一个用于 python 的。有人会好心在这里发布一个，这样可以节省人们很多小时的搜索时间吗？这是我尝试在 android 模拟器中对一个元素进行基本的 double_tap 以放大它。非常感谢

编辑：感谢朱利安的帮助，我能够找出丢失的链接：由于某种原因，触摸动作最后需要一个额外的*.perform()*。下面你会发现一堆正在运行的触摸事件——而且代码更简洁。享受！

```
import unittest, time
from selenium import webdriver

print "Here are our available touch actions (ignore the ones that look like __xx__): ", dir(webdriver.TouchActions)
#print dir(webdriver)

class Test(unittest.TestCase):

    def setUp(self):
        self.driver = webdriver.Remote(command_executor='http://localhost:8080/wd/hub',  desired_capabilities=webdriver.DesiredCapabilities.ANDROID)
        self.touch =webdriver.TouchActions(self.driver)

        #self.driver = TouchActions(self.driver)
        #self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(30)

    def testHotmail(self):
        self.driver.get("http://www.hotmail.com")

        elem=self.driver.find_element_by_css_selector("input[name='login']")
        #tap command
        self.touch.tap(elem).perform()
        time.sleep(2)
        elem.send_keys("hello world")
        time.sleep(2)
        #double tap
        self.touch.double_tap(elem).perform()
        time.sleep(2)

        #testing that regular webdriver commands still work
        print self.driver.find_element_by_partial_link_text("Can't access").text

        elem= self.driver.find_element_by_css_selector("input[type='submit']")
        self.touch.tap(elem).perform()
        time.sleep(3)

    def tearDown(self):

        time.sleep(3)

        try:
            self.driver.quit()
        except Exception:
            print(" TearDown Method: Browser seems already closed.")

        pass

if __name__ == "__main__":
    unittest.main() 
```

这是一个原始的 Java 示例：

```
WebElement toFlick = driver.findElement(By.id("image"));
// 400 pixels left at normal speed
Action flick = getBuilder(driver).flick(toFlick, 0, -400, FlickAction.SPEED_NORMAL)
        .build();
flick.perform();
WebElement secondImage = driver.findElement(“secondImage”);
assertTrue(secondImage.isDisplayed()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T19:36:14.847

我对您的示例进行了一些调整，至少测试运行没有错误。当用户双击用户名字段时，我不知道您希望网站做什么...

这是修改后的代码：

```
import unittest, time

from selenium.webdriver import Remote
from selenium.webdriver import  DesiredCapabilities
from selenium.webdriver.remote import webelement , command
from selenium.webdriver.common.action_chains import ActionChains
from selenium.webdriver.common.touch_actions import TouchActions

class Test(unittest.TestCase):

    def setUp(self):
        remote = Remote(command_executor='http://localhost:8080/wd/hub',  desired_capabilities=DesiredCapabilities.ANDROID)
        self.remote=remote
        remote.implicitly_wait(30)

    def tearDown(self):
        pass

    def testName(self):
        # self.remote.get("http://icd.intraxinc.com/pxr")
        self.remote.get("https://icd.intraxinc.com/pxr/ext/login.action")
        elems= self.remote.find_element_by_css_selector("#j_username")
        print dir(self)
        print dir(self.remote)
        touchactions = TouchActions(self.remote)
        print dir(touchactions)
        touchactions.double_tap(elems)

if __name__ == "__main__":
    #import sys;sys.argv = ['', 'Test.testName']
    unittest.main() 
```

我在示例中留下了各种调试打印语句，以向您展示我是如何调查您所面临的问题的。我还将 URL 更改为您的登录页面重定向到的 URL。这是解决我在设备上安装的 Android 驱动程序版本时遇到的一个不相关问题的解决方法。

仅供参考：我在运行 Android 4.0.4 的 Android 手机上使用 android-server-2.21.0.apk 进行了测试。以下是对示例代码的重大更改

```
 touchactions = TouchActions(self.remote)
        print dir(touchactions)
        touchactions.double_tap(elems) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-26T09:22:36.877

您还可以使用[移动仿真](http://chromedriver.chromium.org/mobile-emulation)使触摸动作与 selenium 一起工作：

```
from selenium import webdriver
from selenium.webdriver.chrome.options import Options

mobile_emulation = { "deviceName": "Nexus 5" }

chrome_options = Options()
chrome_options.add_experimental_option("mobileEmulation", mobile_emulation)

driver = webdriver.Chrome(chrome_options = chrome_options) 
```

然后以通常的方式使用：

```
from selenium.webdriver import TouchActions

driver.get("http://example.com/")

element = context._selenium_browser.find_element_by_link_text("More information...")

touch_actions = TouchActions(driver)
touch_actions.tap(element).perform()

driver.current_url  # yields: https://www.iana.org/domains/reserved 
```

# javascript - 改进 JavaScript - 用于活动菜单和显示/隐藏 div 的 jQuery 代码

> ID：15884880
> 
> 赞同：2
> 
> 时间：2013-04-08T17:03:50.803
> 
> 标签：javascript, jquery, html, css

我想知道如何改进此代码？我在导航中有 3 个菜单按钮。第一个默认情况下处于活动状态。单击时，其他按钮将分配有活动类。

```
<div class="mobile-nav">
    <ul>
        <li><input class="mobile-nav-tab active" id="search-tab" type="button"/></li>
        <li><input class="mobile-nav-tab" id="menu-tab" type="button"/></li>
        <li><input class="mobile-nav-tab" id="members-tab" type="button"/></li>
    </ul>
</div> 
```

这些按钮中的每一个都将显示某个 div 并隐藏其他按钮。

```
<div class="mobile-nav-content">
    <div id="search">

    </div>
    <div style="display:none" id="menu">
        <br>menu
        <br>menu
    </div>
    <div style="display:none" id="members">
        <br>members
        <br>members
    </div>
</div> 
```

我有这个代码，它工作正常。

```
$(document).ready(function(){
    $('.mobile-nav-tab').click(function(){
        $('.mobile-nav-tab').removeClass('active');
        $(this).addClass('active');
        if ($('#search-tab').hasClass('active')){
            $('#search').slideDown();
        }
        else{
            $('#search').hide();
        }
        if ($('#menu-tab').hasClass('active')){
            $('#menu').slideDown();
        }
        else{
            $('#menu').hide();
        }
        if ($('#members-tab').hasClass('active')){
            $('#members').slideDown();
        }
        else{
            $('#members').hide();
        }
    });
}); 
```

我发现我可以用三元运算符简写 if-else 部分。但我想知道有没有其他方法可以改进它并使其更短？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T17:12:35.503

这应该大大缩短它：

```
$(".mobile-nav-tab").click(function() {
    var parts = this.id.split("-");
    $(".mobile-nav-content").children().slideUp();

    $('.mobile-nav-tab').removeClass('active');
    $(this).addClass("active");
    $("#" + parts[0]).slideDown();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T17:14:30.127

简单地遍历各种标题：

```
$(document).ready(function(){
    $('.mobile-nav-tab').click(function(){
        $('.mobile-nav-tab').removeClass('active');
        $(this).addClass('active');
        var a=["search","menu","members"]
        for (i in a){
         if ($('#'+a[i]+'-tab').hasClass('active')){
            $('#'+a[i]).slideDown();
         }
         else{
            $('#'+ a[i]).hide();
         }
        }
    });
}); 
```

* * *

或者，执行以下操作：

```
$(document).ready(function(){
    $('.mobile-nav-tab').click(function(){
        $('.mobile-nav-tab').removeClass('active');
        $(this).addClass('active');
        $('.mobile-nav-content div').hide() //Hide all content divs
        $('#'+this.id.split('-')[0]).slideDown() //SlideDown the current div only
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T17:12:07.607

我认为你可以清理它：

```
$('.mobile-nav-tab').click(function(){
        $('.mobile-nav-tab').removeClass('active');
        $(this).addClass('active');
        var $activeContent = $('#' + $(this).attr('id').replace('-tab',''));
         $('.mobile-nav-tab>div').not($activeContent).hide();
        $activeContent.slideDown();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T17:42:03.963

```
$('.mobile-nav-tab').on("click", function () {
    clickedId = $(this).attr("id");
    $('.mobile-nav-tab').each(function (index) {
        if ($(this).attr("id") == clickedId) {
            $('.mobile-nav-tab,.content-item').eq(index).addClass('active');
            $(".content-item").eq(index).slideDown();
        } else {
            $('.mobile-nav-tab,.content-item').eq(index).removeClass('active');
            $(".content-item").eq(index).hide();
        }
    });
}); 
```

[http://jsfiddle.net/megarameno/L9Uge/4/](http://jsfiddle.net/megarameno/L9Uge/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T17:11:42.790

A）您应该开始将对象缓存到变量中，例如

```
var tabs = $('.mobile-nav-tab'),
    search = $('#search'),
    searchTab = $('#search-tab'); 
```

而不是一次又一次地跳入 DOM

B）这里有一个 jQuery 方法[`siblings()`](http://api.jquery.com/siblings/ "`兄弟姐妹（）`")可以像魅力一样工作。您可能需要稍微修改 HTML 以获得最佳结果，但这比单独选择每个选项卡要容易得多。它看起来像这样：

```
selectedTab.slideDown().siblings().hide(); 
```

它会向下滑动所需的选项卡并隐藏 DOM 中同一级别的所有其他选项卡。

我希望这对您有所帮助，并使您朝着新的方向前进。

# php - /etc/php 中的 ext 和 ext-active 子文件夹是什么意思？

> ID：15884884
> 
> 赞同：1
> 
> 时间：2013-04-08T17:03:55.747
> 
> 标签：php, configuration

在我开始熟悉的系统上，我看到名为`ext`和`ext-active`在我的目录中的`/etc/php/cli-php5`目录。我*猜*这些是对给出的默认 php5 命令行解释器配置的某种扩展

```
/etc/php/cli-php5/php.ini 
```

但它们是什么意思？这些目录中的文件是否`php.ini`用于覆盖/附加默认配置的扩展？也许这些不是标准名称？

我为这个可能微不足道的问题道歉，但在网上搜索并没有发现有用的东西。一个指向有用网页的简单链接就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:06:34.547

这*完全*取决于您的 php.ini 基本配置以及在很多地方实际发生的情况。Guesswork 说`ext-active`可能包含活动的 PHP 扩展共享对象......并且`php.ini`在 cli 目录中允许您覆盖一些用于命令行界面使用的设置。

不过，投票结束，因为这太广泛了。这取决于您的服务器的配置。

# c# - 代码不会引用复制的控件

> ID：15884886
> 
> 赞同：0
> 
> 时间：2013-04-08T17:04:04.560
> 
> 标签：c#, layout

我被我的 windows c# 应用程序表单上的布局扼杀了，我剪切了一些`textBoxes, listBoxes, Buttons, etc`并用完全相同的名称粘贴了它们。现在，如果我双击按钮，它不会引用上一个按钮的代码，而是调用新方法：

> “ButtonName”_Click_1（对象发送者，EventArgs e）

我说的是布局的分配，可能大约 60 个控件和重新创建需要花费大量时间。

我可以撤消这些更改，还是让它们工作？或者可能恢复到解决方案/类的早期版本？

编辑：难道只有不引用代码的按钮或所有文本框和其他控件？

# php - 在核心 PHP 中调用 codeigniter 辅助函数

> ID：15884891
> 
> 赞同：0
> 
> 时间：2013-04-08T17:04:22.983
> 
> 标签：php, codeigniter

我创建了一个辅助类`authentication_helper`，其中我创建了一个`varify_session()`检查会话的函数。我正在使用 jquery，我在其中`setTimeout`通过 ajax 调用调用 somee 函数，但是这个函数的调用转到核心 PHP 代码类，现在当我调用`varify_session()`核心 php 时它不起作用但是当我调用 codeigniter 类时它工作那么我应该怎么做才能在核心 php 代码中调用它，以便它还使用 1 setTimeout 函数检查会话。我的帮助文件位于

```
/www
  /sample
    /application
      /helpers
         /authentication_helper
    /controller
      /core_php.php
      /other php clases 
```

里面的代码`authentication_helper`是这样的

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

function varify_session(){
    $CI = &get_instance();
    $user_session_id = $CI->session->userdata('logged_in');

    if($user_session_id ==  '') {
        redirect('login');
    }
}
?> 
```

## 更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:10:54.660

CodeIgniter 中的帮助文件只是其中嵌入了函数的 php 文件。他们没有什么特别的“CodeIgniter”。

您只需在“核心 PHP 代码类”中包含该特定文件：

```
// inside your core php class
include('path/to/my/ci/application/helper/authentication_helper.php'); 
```

* * *

**更新**

好的，在阅读了一些评论并更仔细地查看了您的问题后，我注意到您的结构没有正确设置，无法按照设计使用的方式使用 CodeIgniter。

我的第一行问题是： **“`core_php.php`文件实际上是做什么的？你是想把它用作控制器吗？或者你只是把它用作一个对象？”**

*   如果您尝试将其用作控制器 - 那就不要。通过扩展将它变成一个[实际的 CodeIgniter 控制器类](http://ellislab.com/codeigniter/user-guide/general/controllers.html)`CI_Controller`。然后，您将像任何其他帮助程序一样加载身份验证帮助程序： `$this->load->helper('authentication');`

*   如果您只是将它用作对象**（我假设是这种情况）**，则将其放入您的`libraries`文件夹并从 CodeIgniter 加载的文件中调用它（这意味着您有可用的 CI 实例）。将该文件放入`libraries`文件夹后，您可以使用 -- 加载它，`$this->load->library('core_php');`然后您可以使用该文件调用方法：`$this->core_php->method_name();`. 在需要它的 core_php 方法中，您将加载身份验证助手：`$this->load->helper('authentication');`

以这种方式设置文件将利用 CodeIgniter 加载机制并允许您访问 CI 实例 - 这就是您收到`Trying to get property of non-object`错误时的问题（您试图从 CI 引导程序之外获取 CI 实例） .

如果此设置没有帮助，那么我们需要查看相关文件的实际内容。

# windows - 打印 Windows %PATH% 并在新行中添加每个条目

> ID：15884892
> 
> 赞同：19
> 
> 时间：2013-04-08T17:04:24.093
> 
> 标签：windows, cmd

我有一个任务：在新行上打印 %PATH% 变量的所有条目。例如：

```
C:\Program Files\
C:\Windows
C:\Windows\System32 
```

等等...

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-04-08T17:27:14.937

已解决：我用过`echo %path:;=&echo.%`

[来源](https://web.archive.org/web/20160313231839/http://geekswithblogs.net/AskPaula/archive/2008/12/18/128035.aspx)（原链接已失效，现在链接到 WebArchive）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:33:53.123

```
@ECHO OFF
SETLOCAL 
SET count=1
:loop
FOR /f "tokens=%count%delims=;" %%i IN ("%path%") DO ECHO %%i&SET /a count+=1&GOTO loop
ECHO %count% entries found 
```

不难 - 只需使用 TOKENS 选择令牌编号，直到它们用完。如果需要，可能想要回显`%%~i`以去除引用的路径。计数显示，因为它在那里。

# c# - 如何将字节数组连接到数据库中的现有数组中

> ID：15884897
> 
> 赞同：0
> 
> 时间：2013-04-08T17:04:58.557
> 
> 标签：c#, sql-server, linq-to-sql

我有一些 LinqToSQL 对象。其中一个有一个“二进制”列，我认为它是 SQL 上的 VarBinary(max)。

时不时地，我需要为某一行添加/连接一个字节数组到该列中。我就是这样做的：

```
void StoreBytesInDb(IEnumerable<byte> bytesToStore)
    {
        using (var dataBaseContext = new MyDataClasses(DatabaseInfo.ConnectionString))
        {
            if (this.currentObjectId == -1)
            {
                this.NewObjectToDatabase();
                this.currentSavedBytes = new List<byte>();
            }

            this.CurrentObject = dataBaseContext.Objects.Single(e => e.Id_Object == this.currentObjectId);

            this.currentSavedBytes.AddRange(bytesToStore);
            this.CurrentObject.Bytes_Data = this.currentSavedBytes.ToArray();

            dataBaseContext.SubmitChanges();
        }
    } 
```

因此，如您所见：

1.  我使用 Linq 将“AddRange”添加到保存的字节中（在堆中）。
2.  然后我把它放到对象的右栏中。
3.  提交更改。

在低速下它工作。

当我将其加速到每秒几次时，就会出现问题。 **有时**它会抛出一个 'System.ArgumentException' 说：“已经添加了具有相同键的项目。” 引发异常的确切行是：

```
this.CurrentObject.Bytes_Data = currentSavedBytes.ToArray(); 
```

关于如何改善这一点的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:42:04.243

> 如果您正在处理的是较大的字节数据 - 可能将其移出 Db ，将 ref 保留到 File System - 并附加到那里 - 这更好。

另一方面 - 只是一个想法......

`currentSavedBytes`- 你为什么保留它作为会员？可能是一个并发问题（如果共享） - 尝试在方法范围内移动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:46:11.500

这些都不是最佳的。

1.  您不应该在数据库中存储大文件
2.  Linq 2 Sql 没有优化做它
3.  此外，在内存中一次处理所有文件并不是一个好主意——它们可能很大，你会得到 OOM 异常

我建议你：

1.  将文件保存在其他地方，如@NSGaga 在他的评论中所说
2.  如果您必须保存在数据库中，至少使用[FileStream](http://msdn.microsoft.com/pt-br/library/gg471497.aspx)列（这几乎可以保存到数据库磁盘中）。
3.  [按照本文](http://blog.tallan.com/2011/08/22/using-sqlfilestream-with-c-to-access-sql-server-filestream-data/)中的说明进行操作，以便您能够附加到文件中

# html - 将标题垂直居中于图像顶部

> ID：15884899
> 
> 赞同：0
> 
> 时间：2013-04-08T17:05:07.883
> 
> 标签：html, css, image, header, positioning

我正在尝试将 an 垂直居中于 an`h2`之上`img`，但我无法将其完全居中。我快到了，但我如何才能准确地到达那里？

细节：

*   我不知道任何元素的高度，所以我不能使用固定高度并且不能将图像设置为背景，因为图像是内容的一部分
*   有人建议，但我已经尝试过了，它与and`display:table`不兼容`position:relative``position:absolute`

HTML

```
<div class="image">
    <img src="http://bit.ly/gUKbAE" />
    <div class="wrapper">
        <h2>Title</h2>   
    </div>
</div> 
```

CSS

```
.image { 
    position: relative; 
}

.wrapper {
    position: absolute;
    top: 50%; 
    left: 0;
}

h2 {
    margin: 0;
    padding: 0;
} 
```

我把它放在这里：http: [//jsfiddle.net/kmjRu/15/](http://jsfiddle.net/kmjRu/15/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:11:08.810

它不完全居中的原因是因为它使`top`文本行位于`50%`.

简单的解决方法是将其更改`line-height`为`0px`：

```
.wrapper
{
   position: absolute;
   top: 50%;
   line-height: 0px;
   left: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:40:39.333

此外，如果您设置 h2 的字体大小，那么您可以在包装器（或者我相信是 h2）中添加一个负的上边距，就像这样......

```
.image { 
    position: relative; 
}

.wrapper {
    position: absolute;
    top: 50%; 
    left: 0;
    margin-top: -15px; /* Set negative margin here to pull it up */
}

h2 {
    margin: 0;
    padding: 0;
    z-index: 2;
    font-size: 30; /* Set font size here */
} 
```

我将您的 h2 font-size 设置为 30，然后将 .wrapper margin-top 设置为 -15。

这是在 jfiddle [http://jsfiddle.net/kmjRu/15/](http://jsfiddle.net/kmjRu/15/)

# git - Git 在执行结帐命令时崩溃

> ID：15884902
> 
> 赞同：0
> 
> 时间：2013-04-08T17:05:13.033
> 
> 标签：git, github, branch

我正在更新我所有的 git repo 分支。更新成功。但是，当我尝试更改工作分支时，不知何故我的系统挂起。我以前是打开的，`branch1`但是当我尝试将其更改为`master`by`git checkout master`时，系统挂起，因此我不得不关闭系统。

目前，`branch1`只有工作分支。但是当我尝试这样做`git checkout master`时，会出现以下错误：

```
fatal: Unable to create '/home/ps/moodle/moodle_master/moodle/.git/index.lock': File exists.

If no other git process is currently running, this probably means a
git process crashed in this repository earlier. Make sure no other git
process is running and remove the file manually to continue. 
```

我怎样才能在不损坏我的回购协议的情况下解决这个问题？

# asp.net-mvc - 一个寄存器MVC 3添加多个寄存器关系

> ID：15884903
> 
> 赞同：0
> 
> 时间：2013-04-08T17:05:14.567
> 
> 标签：asp.net-mvc, entity-framework, view, partial-views, relationship

我是新的 MVC 开发人员，但我长期以来一直是 C# 程序员。

在我的系统上，我需要添加多个电话号码并与一位客户联系。这是我的流程：

1º 保存我的客户数据。2º 为我最近的客户添加多个电话号码

这个流程，不能超过一页。我需要保存客户并在保存所有电话号码后与客户联系。

这是我的客户表：IdCliente int, Nome varchar(100), isAtivo bit

这是我的电话号码表：IdTelefone int autoincrement, IdPessoa int (FK with Customer table), Number bigint

当我保存电话号码时，我需要传递我最近客户的 IdCustomer。

我的观点分为两部分。带有客户数据的客户页面，以及一个带有电话号码数据的 PartialView。

这是我的 HTML

```
@model MSX_Contabil.Models.PESSOA_TB
@{    ViewBag.Title = "MSX Contail - Cadastro de Pessoa";
}
<h2>
    Cadastro de pessoa</h2>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script>
    $(function () {
        $("#DT_NASCIMENTO").datepicker();
        $("#accordion").accordion();
        $("#tabs").tabs();
    }); 
</script>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <table style="width: 100%">
        <tr>
            <td style="width: 25%">
                @Html.LabelFor(model => model.ID_TIPO_PESSOA, "Tipo pessoa")<label>*</label>
            </td>
            <td style="width: 25%">
                @Html.LabelFor(model => model.NM_PESSOA, "Nome")<label>*</label>
            </td>
            <td style="width: 25%">
            </td>
            <td style="width: 25%">
            </td>
        </tr>
        <tr>
            <td>
                @Html.DropDownList("ID_TIPO_PESSOA", "-- selecione --")
                @Html.ValidationMessageFor(model => model.ID_TIPO_PESSOA, "Campo obrigatório")
            </td>
            <td colspan="3">
                @Html.EditorFor(model => model.NM_PESSOA)
                @Html.ValidationMessageFor(model => model.NM_PESSOA, "Campo obrigatório")
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(model => model.DT_NASCIMENTO, "Data nascimento")<label>*</label>
            </td>
            <td>
                @Html.LabelFor(model => model.ID_ESTADO_CIVIL, "Estado civil")
            </td>
            <td>
                @Html.LabelFor(model => model.FL_ATIVO, "Pessoa ativa")
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
                @Html.EditorFor(model => model.DT_NASCIMENTO)
                @Html.ValidationMessageFor(model => model.DT_NASCIMENTO, "Campo obrigatório")
            </td>
            <td>
                @Html.DropDownList("ID_ESTADO_CIVIL", "-- selecione --")
            </td>
            <td>
                @Html.EditorFor(model => model.FL_ATIVO)
                @Html.ValidationMessageFor(model => model.FL_ATIVO)
            </td>
            <td>
            </td>
        </tr>
    </table>

    if (ViewBag.PessoaSalva != true)
    {
    <p>
        <input type="submit" value="Salvar" />
        <input type="submit" value="Cancelar" onclick="javascript:window.navigate('/Pessoa'); return false;" />
    </p>
    }
}
@if (ViewBag.PessoaSalva == true)
{
    <div id="tabs">
        <ul>
            <li><a href="#Telefone">Telefones</a></li>
            <li><a href="#Documento">Documentos</a></li>
            <li><a href="#Endereco">Endereços</a></li>
            <li><a href="#Email">E-mails</a></li>
            <li><a href="#Contato">Contatos</a></li>
        </ul>
        <div id="Telefone">
            <p>
                @Html.Partial("TelefonePessoa", new MSX_Contabil.Models.TELEFONE_PESSOA_TB())
            </p>
        </div>
        <div id="Document">
        </div>
        <div id="Endereco">
        </div>
        <div id="Email">
        </div>
        <div id="Contato">
        </div>
    </div>
} 
```

这是我的电话号码页面时的部分视图。

```
@model MSX_Contabil.Models.TELEFONE_PESSOA_TB
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
@using (Html.BeginForm("Inserir", "TelefonePessoa", FormMethod.Post))
{
    @Html.ValidationSummary(true)

    <table width="100%">
        <tr>
            <td>
                @Html.LabelFor(model => model.ID_OPERADORA_TELEFONIA, "Operadora")
            </td>
            <td>@Html.LabelFor(model => model.NU_TELEFONE, "Número")
            </td>
            <td>
                @Html.LabelFor(model => model.NU_RAMAL, "Ramal")
            </td>
        </tr>
        <tr>
            <td>@Html.EditorFor(model => model.ID_OPERADORA_TELEFONIA)
                @Html.ValidationMessageFor(model => model.ID_OPERADORA_TELEFONIA)
            </td>
            <td>@Html.EditorFor(model => model.NU_TELEFONE)
                @Html.ValidationMessageFor(model => model.NU_TELEFONE)
            </td>
            <td>@Html.EditorFor(model => model.NU_RAMAL)
                @Html.ValidationMessageFor(model => model.NU_RAMAL)
            </td>
        </tr>
        <tr>
            <td colspan="3">
                @Html.LabelFor(model => model.DS_OBSERVACAO, "Observação")
            </td>
        </tr>
        <tr>
            <td colspan="3">
                @Html.TextAreaFor(model => model.DS_OBSERVACAO)
                @Html.ValidationMessageFor(model => model.DS_OBSERVACAO)
            </td>
        </tr>
    </table>
    <p>
        <input type="submit" value="Adicionar" id="btnSalvar" />
    </p>

} 
```

这是我的控制器代码。

```
CustomerController:
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MSX_Contabil.Models;

namespace MSX_Contabil.Controllers
{
    public class PessoaController : Controller
    {
        private MSXContabilEntities db = new MSXContabilEntities();

        public ViewResult Index()
        {
            var pessoa_tb = db.PESSOA_TB.Include("TIPO_PESSOA_TB");
            return View(pessoa_tb.ToList());
        }

        public ViewResult Details(string guid)
        {
            PESSOA_TB pessoa_tb = db.PESSOA_TB.Single(p => p.CD_IDENTIFICACAO == guid);
            return View(pessoa_tb);
        }

        public ActionResult Create()
        {
            ViewBag.ID_TIPO_PESSOA = new SelectList(db.TIPO_PESSOA_TB, "ID_TIPO_PESSOA", "NM_TIPO_PESSOA");
            ViewBag.ID_ESTADO_CIVIL = new SelectList(db.ESTADO_CIVIL_TB, "ID_ESTADO_CIVIL", "NM_ESTADO_CIVIL");
            return View();
        }

        [HttpPost]
        public ActionResult Create(PESSOA_TB pessoa_tb)
        {
            if (ModelState.IsValid)

            {
                pessoa_tb.CD_IDENTIFICACAO = Guid.NewGuid().ToString();
                db.PESSOA_TB.AddObject(pessoa_tb);
                db.SaveChanges();
                pessoa_tb.CD_PESSOA = pessoa_tb.ID_PESSOA.ToString().PadLeft(4, '0');
                db.ObjectStateManager.ChangeObjectState(pessoa_tb, EntityState.Modified);
                db.SaveChanges();
                ViewBag.PessoaSalva = true;
                ViewBag.ID_PESSOA = pessoa_tb.ID_PESSOA;
                RouteData.Values.Add("ID_PESSOA", pessoa_tb.ID_PESSOA);
            }

            ViewBag.ID_TIPO_PESSOA = new SelectList(db.TIPO_PESSOA_TB, "ID_TIPO_PESSOA", "NM_TIPO_PESSOA", pessoa_tb.ID_TIPO_PESSOA);
            ViewBag.ID_ESTADO_CIVIL = new SelectList(db.ESTADO_CIVIL_TB, "ID_ESTADO_CIVIL", "NM_ESTADO_CIVIL");
            return View(pessoa_tb);
        }

        public ActionResult Edit(string guid)
        {
            PESSOA_TB pessoa_tb = db.PESSOA_TB.Single(p => p.CD_IDENTIFICACAO == guid);
            ViewBag.ID_TIPO_PESSOA = new SelectList(db.TIPO_PESSOA_TB, "ID_TIPO_PESSOA", "NM_TIPO_PESSOA", pessoa_tb.ID_TIPO_PESSOA);
            ViewBag.ID_ESTADO_CIVIL = new SelectList(db.ESTADO_CIVIL_TB, "ID_ESTADO_CIVIL", "NM_ESTADO_CIVIL");
            return View(pessoa_tb);
        }

        [HttpPost]
        public ActionResult Edit(PESSOA_TB pessoa_tb)
        {
            if (ModelState.IsValid)
            {
                db.PESSOA_TB.Attach(pessoa_tb);
                db.ObjectStateManager.ChangeObjectState(pessoa_tb, EntityState.Modified);
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            ViewBag.ID_TIPO_PESSOA = new SelectList(db.TIPO_PESSOA_TB, "ID_TIPO_PESSOA", "NM_TIPO_PESSOA", pessoa_tb.ID_TIPO_PESSOA);
            ViewBag.ID_ESTADO_CIVIL = new SelectList(db.ESTADO_CIVIL_TB, "ID_ESTADO_CIVIL", "NM_ESTADO_CIVIL");
            return View(pessoa_tb);
        }

        public ActionResult Delete(int id)
        {
            PESSOA_TB pessoa_tb = db.PESSOA_TB.Single(p => p.ID_PESSOA == id);
            return View(pessoa_tb);
        }

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {
            PESSOA_TB pessoa_tb = db.PESSOA_TB.Single(p => p.ID_PESSOA == id);
            db.PESSOA_TB.DeleteObject(pessoa_tb);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        public ActionResult Inativar(string guid)
        {
            PESSOA_TB pessoa_tb = db.PESSOA_TB.Single(u => u.CD_IDENTIFICACAO == guid);
            pessoa_tb.FL_ATIVO = (pessoa_tb.FL_ATIVO ? false : true);
            db.ObjectStateManager.ChangeObjectState(pessoa_tb, EntityState.Modified);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }
    }
} 
```

电话号码控制器：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MSX_Contabil.Models;

namespace MSX_Contabil.Controllers
{ 
    public class TelefonePessoaController : Controller
    {
        private MSXContabilEntities db = new MSXContabilEntities();

        //
        // GET: /TelefonePessoa/

        public ViewResult Index()
        {
            var telefone_pessoa_tb = db.TELEFONE_PESSOA_TB.Include("PESSOA_TB");
            return View(telefone_pessoa_tb.ToList());
        }

        //
        // GET: /TelefonePessoa/Details/5

        public ViewResult Details(int id)
        {
            TELEFONE_PESSOA_TB telefone_pessoa_tb = db.TELEFONE_PESSOA_TB.Single(t => t.ID_PESSOA == id);
            return View(telefone_pessoa_tb);
        }

        //
        // GET: /TelefonePessoa/Create

        public ActionResult Create()
        {
            ViewBag.ID_PESSOA = new SelectList(db.PESSOA_TB, "ID_PESSOA", "CD_PESSOA");
            return View();
        } 

        //
        // POST: /TelefonePessoa/Create

        [HttpPost]
        public ActionResult Create(TELEFONE_PESSOA_TB telefone_pessoa_tb)
        {
            if (ModelState.IsValid)
            {
                db.TELEFONE_PESSOA_TB.AddObject(telefone_pessoa_tb);
                db.SaveChanges();
                return RedirectToAction("Index");  
            }

            ViewBag.ID_PESSOA = new SelectList(db.PESSOA_TB, "ID_PESSOA", "CD_PESSOA", telefone_pessoa_tb.ID_PESSOA);
            return View(telefone_pessoa_tb);
        }

        [HttpPost, ActionName("Inserir")]
        public ActionResult Inserir(TELEFONE_PESSOA_TB telefone_pessoa_tb)
        {
            if (ModelState.IsValid)
            {
                telefone_pessoa_tb.ID_PESSOA = Convert.ToInt32(RouteData.GetRequiredString("ID_PESSOA"));
                db.TELEFONE_PESSOA_TB.AddObject(telefone_pessoa_tb);
                db.SaveChanges();
            }

            ViewBag.ID_PESSOA = new SelectList(db.PESSOA_TB, "ID_PESSOA", "CD_PESSOA", telefone_pessoa_tb.ID_PESSOA);
            return View(telefone_pessoa_tb);
        }        

        //
        // GET: /TelefonePessoa/Edit/5

        public ActionResult Edit(int id)
        {
            TELEFONE_PESSOA_TB telefone_pessoa_tb = db.TELEFONE_PESSOA_TB.Single(t => t.ID_PESSOA == id);
            ViewBag.ID_PESSOA = new SelectList(db.PESSOA_TB, "ID_PESSOA", "CD_PESSOA", telefone_pessoa_tb.ID_PESSOA);
            return View(telefone_pessoa_tb);
        }

        //
        // POST: /TelefonePessoa/Edit/5

        [HttpPost]
        public ActionResult Edit(TELEFONE_PESSOA_TB telefone_pessoa_tb)
        {
            if (ModelState.IsValid)
            {
                db.TELEFONE_PESSOA_TB.Attach(telefone_pessoa_tb);
                db.ObjectStateManager.ChangeObjectState(telefone_pessoa_tb, EntityState.Modified);
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            ViewBag.ID_PESSOA = new SelectList(db.PESSOA_TB, "ID_PESSOA", "CD_PESSOA", telefone_pessoa_tb.ID_PESSOA);
            return View(telefone_pessoa_tb);
        }

        //
        // GET: /TelefonePessoa/Delete/5

        public ActionResult Delete(int id)
        {
            TELEFONE_PESSOA_TB telefone_pessoa_tb = db.TELEFONE_PESSOA_TB.Single(t => t.ID_PESSOA == id);
            return View(telefone_pessoa_tb);
        }

        //
        // POST: /TelefonePessoa/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {            
            TELEFONE_PESSOA_TB telefone_pessoa_tb = db.TELEFONE_PESSOA_TB.Single(t => t.ID_PESSOA == id);
            db.TELEFONE_PESSOA_TB.DeleteObject(telefone_pessoa_tb);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:11:34.030

我解决了我的问题！

我放置了一个链接以重定向到传递参数 IdCustomer 的电话号码视图，在保存电话号码后，我重定向到操作编辑客户传递他的 ID。

```
<p>
   @Html.ActionLink("Adicionar telefone", "Create", "TelefonePessoa", new { id = Model.ID_PESSOA, guid = Model.CD_IDENTIFICACAO }, null)
</p> 
```

保存电话号码的代码：

```
[HttpPost]
public ActionResult Create(TELEFONE_PESSOA_TB telefone_pessoa_tb, int id, string guid)
{
   if (ModelState.IsValid)
    {
       telefone_pessoa_tb.ID_PESSOA = id;
       db.TELEFONE_PESSOA_TB.AddObject(telefone_pessoa_tb);
       db.SaveChanges();
       return RedirectToAction("Edit", "Pessoa", new { guid = guid });
    }

    ViewBag.ID_PESSOA = new SelectList(db.PESSOA_TB, "ID_PESSOA", "CD_PESSOA", telefone_pessoa_tb.ID_PESSOA);
    return View(telefone_pessoa_tb);
} 
```

# linux - 将 unix/linux 文件名字符集转换为 windows

> ID：15884905
> 
> 赞同：2
> 
> 时间：2013-04-08T17:05:16.847
> 
> 标签：linux, windows, unix, unicode, filenames

我使用 mkdir() 通过 PHP 以波斯语和阿拉伯语创建了一些目录。

我想将文件夹移动到 Windows 中，但文件夹名称有问题。

示例：我写了：“سلام”

但在 Windows 中显示未知字符：“ط³غŒط³طھظ... ط¹ط§ظ...ظ„ ط¬ظ„ط¯ ط¯ظˆظ...”

似乎它应该转换为除 UTF-8 之外的其他编码

对不起，如果我的英语不是很好。

谢谢你。

编辑：我使用了这个 Powershell 代码并为我工作：

```
Get-ChildItem | ForEach-Object {
  $filename = Split-Path -Leaf $_
  $new = [Text.Encoding]::Utf8.GetString([Text.Encoding]::Default.GetBytes($filename))
  if ($_.Name -ne $new) {
    Rename-Item $_ $new
  }
}
enter code here 
```

但我也希望上面的代码更正所有子文件夹名称......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T10:40:13.490

> 似乎它应该转换为除 UTF-8 之外的其他编码

是的：当您在 C 标准库基于字节的文件接口（这是 PHP 和大多数其他跨平台语言所做的）中使用文件名字符串时，您将获得 Windows 默认 ('ANSI') 代码页。这种编码是依赖于语言环境的，而且从来不是 UTF-8。

从上述文件名来看，您的默认代码页是 1256 阿拉伯语。如果您将文件名编码为 cp1256 那么应该可以：

```
$localfilename= iconv('utf-8', 'windows-1256', $filename); 
```

然而：

*   这意味着您只能在文件名中使用阿拉伯（和 ASCII）字符 - 任何其他 Unicode 字符都会中断；

*   如果部署在默认代码页不是 1256 的其他服务器上，这自然会失败。服务器通常在美国语言环境中运行并选择代码页为 1252 西欧的服务器。

虽然您通常可以更改代码页，并且 UTF-8 原则上在 Windows 中作为代码页 65001 可用，但它存在许多错误，可能使其无法用于此目的 - UTF-8 是二等公民在 Windows 下。（在任何情况下，在 Web 服务器线程中更改区域设置都是不可靠的。）

让完整的 Unicode 文件名在 Windows 中工作的唯一方法是调用本机 Win32 API 函数来访问文件（使用 UTF-16LE 字符串）而不是 C 标准库函数。这就是 PowerShell/.NET 所做的——因为它是特定于 Windows 的软件，它可以负担得起直接使用 Win32 功能。Python 还支持转到 Win32 而不是 C 的 Unicode 文件名。

但是 PHP 目前没有这个能力。您可以通过使用[w32api_invoke_function](http://www.php.net/manual/en/function.w32api-invoke-function.php)直接调用 Win32 API [CreateDirectoryW](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa363855%28v=vs.85%29.aspx)手动执行此操作，但这确实很不方便。

这就是为什么最好尽可能避免使用任意输入作为文件名的原因之一！

# javascript - 在 JavaScript 中路由到 403 页面

> ID：15884906
> 
> 赞同：0
> 
> 时间：2013-04-08T17:05:18.877
> 
> 标签：javascript, browser, url-routing, http-status-code-403

我希望浏览器在 JavaScript 中的 if() 循环内显示 403（禁止页面）（即：替换 window.location = 'unauth.html' 语句。）。我不想重新路由到 unauth.html 页面。我怎样才能做到这一点？

```
 $(document).ajaxComplete(function (event, xhr, settings) {
        if (xhr.responseText.indexOf('Unauthorized access') >= 0)
            // Show unauthorized page
            window.location = 'unauth.html';
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:25:35.693

您可以使用该回调函数来替换页面的内容。但我相信您不能通过 ajax 发送 http 403 状态码。

为了澄清，您可以通过 ajax 获取 HTTP 状态代码，但如果不重定向它，您将无法将该状态代码注入当前页面。

# php - PHP foreach 在数组中跳过迭代

> ID：15884909
> 
> 赞同：0
> 
> 时间：2013-04-08T17:05:23.773
> 
> 标签：php, foreach, arrayiterator

当我收到“未定义索引”时，我想随时跳过 php foreach 中的迭代。到目前为止，这是我的代码：

```
<?php
$albums = $facebook->api("/me/albums");
$i=0;
foreach ($albums['data'] as $album) {
    if (is_null($album['cover_photo'])) continue;
    if($i==8) break;
    $album_id = $album['id'];
    $album_cover = $album['cover_photo'];
    $album_name = $album['name'];
    $album_count = $album['count'];
    $covers = $facebook->api("/" . $album_cover . "");
    $source = $covers['source'];
    ?> 
```

如果我没有 if`is_null`语法，代码会中断，但我收到cover_photo 索引未定义的错误（这是正常行为）。至少如果我不能显示错误就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:06:30.703

而是尝试，

```
if (!isset($album['cover_photo'])) continue; 
```

`isset`或者最好在分配变量之前检查它。

```
$album_cover = (isset($album['cover_photo'])) ? $album['cover_photo'] : ''; 
```

# javascript - 更改页面上的所有链接

> ID：15884910
> 
> 赞同：1
> 
> 时间：2013-04-08T17:05:24.220
> 
> 标签：javascript, hyperlink

我想更改页面上的所有链接，它适用于没有类的链接，但不适用于有类的链接。

这是我正在使用的代码：

```
window.onload = function() {
       /* onload code */

var anchors = document.getElementsByTagName("a");

for (var i = 0; i < anchors.length; i++) {
    anchors[i].href = "http://www.example.com/?redirect=" + anchors[i].href
}
} 
```

它适用于以下链接：

```
<a id="box-left" href="http://www.google.com"></a> 
```

但不适用于此：

```
<a class="links" href="redirect.php?link=125411" onclick="launch();" target="_blank"></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:09:05.120

我认为正确的功能应该是：

```
window.onload = function() {
   /* onload code */

var anchors = document.getElementsByTagName("a");

for (var i = 0; i < anchors.length; i++) {
    anchors[i].href = "http://www.mysite.com/?redirect=" + anchors[i].href
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:09:15.633

利用

```
var anchors = document.getElementsByTagName('a'); 
```

代替

```
var anchors = document.getElementsByTagName("class"); 
```

顺便说一句，我建议您使用 jquery 来选择 dom 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:17:20.353

我在发布代码时对其进行了测试，它对我有用。
我将javascript放在标签中，将链接放在正文中。
页面上可能还有其他干扰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T17:19:36.990

也许你有一些奇怪的 CSS 混合了这个带有这个 class="links" 属性的链接？您也可以尝试将类添加到这两种链接并按类选择。

```
var anchors = document.getElementsByClassName("dynamic_links");

<a id="box-left" class="dynamic_links" href="http://www.google.com"></a> 

<a class="links dynamic_links" href="redirect.php?link=125411" onclick="launch();" target="_blank"></a> 
```

让我知道这个好吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T17:30:28.713

如果你使用 jQuery，它就像这样简单：

```
$('a').attr("href", "http://www.google.com/") 
```

# jquery - jQuery：点击所有元素后，修改另一个

> ID：15884913
> 
> 赞同：1
> 
> 时间：2013-04-08T17:05:32.717
> 
> 标签：jquery

我对 jQuery 的了解非常基础，所以请耐心等待。

我有一个表格列出了几个图像/缩略图，每个缩略图都有放大和缩小的功能。表格顶部还有两个“放大”和“缩小”按钮，以防用户想要放大/缩小所有图像而不是一张一张地进行。

到目前为止，我已经完成了能够：

*   单击每个缩略图并放大/缩小
*   单击放大按钮并放大所有缩略图
*   单击“缩小”按钮并缩小所有缩略图

我遇到的问题是：

A.当所有缩略图都被单独放大后，*禁用*放大按钮；然后*激活*缩小按钮。

B.当所有缩略图都被单独缩小后，*停用*“缩小”按钮；然后*激活*放大按钮。

我认为这可以通过 来完成`.length()`，但我无法理解逻辑。

我试过这个，但当然它不起作用：

```
$('a.zoom-trigger.shrink').length(function(){
  $('.zin').toggleClass('active');
  $('.zout').toggleClass('active');
}); 
```

这是***[Codepen 中的演示](http://codepen.io/rzea/pen/vFzwA)***。

任何帮助是极大的赞赏。

**编辑 -**

在演示中，我使用了 3 个元素，但实际上表格中的元素数量是未知的，因为所有数据都来自数据库。

* * *

这是我正在使用的 HTML 和 JavaScript：

**HTML：**

```
<div class="toggle-zoom">
    <a href="#" class="noclick zin">Zoom In</a>
    <a href="#" class="noclick zout active">Zoom Out</a>                        
</div>  

<table data-filter="#filter-logos" class="footable">
    <thead>                         
        <tr>
            <th data-sort-ignore="true">Thumbnail</th>
            <th data-sort-ignore="true" title="Sort list">Description</th>
            <th title="Sort list">File Name</th>
            <th title="Sort list">File Type</th>
            <th data-type="numeric" title="Sort list">File Size</th>
            <th data-sort-ignore="true">Download</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="txt-center img-cell">
                <a href="#" class="noclick zoom-trigger link-cell" title="Zoom"><img src="http://placebear.com/g/800/200" alt="" class="tn small"></a>
            </td>
            <td>Logo  horizontal</td>
            <td>logo-h.eps</td>
            <td>EPS</td>
            <td class="txt-right">10KB</td>
            <td class="txt-center p0">
                <a href="#" class="noclick db ir link-cell download" title="Download">Download</a>
            </td>
        </tr>
        <tr>
            <td class="txt-center img-cell">
                <a href="#" class="noclick zoom-trigger link-cell" title="Zoom"><img src="http://placebear.com/g/800/201" alt="" class="tn small"></a>
            </td>
            <td>Logo  horizontal</td>
            <td>logo-h.eps</td>
            <td>EPS</td>
            <td class="txt-right">10KB</td>
            <td class="txt-center p0">
                <a href="#" class="noclick db ir link-cell download" title="Download">Download</a>
            </td>
        </tr>
        <tr>
            <td class="txt-center img-cell">
                <a href="#" class="noclick zoom-trigger link-cell" title="Zoom"><img src="http://placebear.com/g/800/202" alt="" class="tn small"></a>
            </td>
            <td>Logo  horizontal</td>
            <td>logo-h.eps</td>
            <td>EPS</td>
            <td class="txt-right">10KB</td>
            <td class="txt-center p0">
                <a href="#" class="noclick db ir link-cell download" title="Download">Download</a>
            </td>
        </tr>
    </tbody>
</table> 
```

**JavaScript：**

```
//Zoom
$('.zoom-trigger').click(function(){
    $(this).find('img').toggleClass('small');
    $(this).toggleClass('shrink');
});

    //Zoom In
    $('.zin').click(function(){
        $('.zoom-trigger').addClass('shrink');
        $('.tn').removeClass('small');
        $(this).addClass('active').siblings().removeClass('active');
    });

    //Zoom Out
    $('.zout').click(function(){
        $('.zoom-trigger').removeClass('shrink');
        $('.tn').addClass('small');
        $(this).addClass('active').siblings().removeClass('active');
    });

/*Active correct zoom button when all thumnails have been clicked*/
/*
$('a.zoom-trigger.shrink').length(function(){
  $('.zin').toggleClass('active');
  $('.zout').toggleClass('active');
});
*/

//Prevents default action of links
$('.noclick').click(function(e) {
    e.preventDefault();
}); 
```

同样，这是***[Codepen 中的演示](http://codepen.io/rzea/pen/vFzwA)***。

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:28:45.577

这会起作用：

```
if($(".small").length==0)
   {
     //all are zoomed in
     $(".zin").addClass("active");
     $(".zout").removeClass("active");
   }
   else if($(".small").length==$(".zoom-trigger").length)
   {
      $(".zin").removeClass("active");
      $(".zout").addClass("active");
   } 
```

**代码笔：[http :](http://codepen.io/anon/pen/Efldb) **//codepen.io/anon/pen/Efldb****

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:27:54.893

您真的不只是想“切换”放大和缩小按钮的活动状态，因为您可以混合放大和缩小图像，因此它们既不会全部放大也不会全部缩小。相反，您可以创建一个“缩放”计数并检查它是否为 0 或等于`.zoom-trigger`长度以确定按钮状态。

```
(function($) {
  // cache as many selectors as possible to avoid 
  // re-querying the DOM every time a button is clicked
  var $zoomToggle = $('.zoom-trigger'),
      $zoomIn = $('.zin'), 
      $zoomOut = $('.zout'),
      $tn = $('.tn'),
      total = $zoomToggle.length,
      zoomed = 0;

  function zoomToggleClick() {
    var $button = $(this),
        isIn = $button.hasClass('shrink');

    $button
      .toggleClass('shrink')
      .find('img')
        .toggleClass('small');

    // increase or decrease 
    // zoomed count appropriately
    zoomed += isIn ? -1 : 1;
    updateZoomInOutButtons();
  }

  function zoomInOutClick() {
    var isIn = $(this).hasClass('zin');

    $zoomToggle.toggleClass('shrink', isIn);
    $tn.toggleClass('small', !isIn);

    // we max out the zoomed count if
    // they've clicked zoom all or reset
    // it if they've zoomed out all images
    zoomed = isIn ? total : 0;
    updateZoomInOutButtons();
  }

  function updateZoomInOutButtons() {
    $zoomIn.toggleClass('active', (zoomed === total));
    $zoomOut.toggleClass('active', (zoomed === 0));
  }

  $zoomToggle.click(zoomToggleClick);
  $zoomIn.click(zoomInOutClick);
  $zoomOut.click(zoomInOutClick);

  $('.noclick').click(function(e) {
    e.preventDefault();
  });

}(jQuery)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T17:26:27.580

进行以下更改：

```
//Zoom
$('.zoom-trigger').click(function(){
    $(this).find('img').toggleClass('small');
    $(this).toggleClass('shrink');
});

    //Zoom In
    $('.zin').click(function(){
        $('.zoom-trigger').addClass('shrink').children('.tn').removeClass('small');
        $(this).addClass('active').siblings().removeClass('active');
    });

    //Zoom Out
    $('.zout').click(function(){
        $('.zoom-trigger').removeClass('shrink').children('.tn').addClass('small');
        $(this).addClass('active').siblings().removeClass('active');
    });

//Active correct zoom button when all thumnails have been clicked
/*
$('a.zoom-trigger.shrink').length(function(){
  $('.zin').toggleClass('active');
  $('.zout').toggleClass('active');
});
*/

//Prevents default action of links
$('.noclick').click(function(e) {
    e.preventDefault();
}); 
```

演示： [http ://codepen.io/anon/pen/mobKI](http://codepen.io/anon/pen/mobKI)

*注意：必须在 JS 框架中单击运行才能使用 CODEPEN 运行！**

# php - 将数组加载到 Doctrine_Collection

> ID：15884915
> 
> 赞同：2
> 
> 时间：2013-04-08T17:05:36.783
> 
> 标签：php, symfony1, doctrine, doctrine-1.2

问题是关于教义 1.2 和 Symfony 1.4

简而言之：我正在运行简单的 SQL 查询并使用 PDO 将结果提取到数组中。之后，我为我从中获取数据的同一个表创建 Doctrine_Collection 并调用 synchronizeFromArray 以将数据加载到集合中。

一切都很好 - 创建了集合，并且我的主键旁边的所有数据恰好是布尔值 false 而不是真实值。

以下是代码示例：

```
// Fetch single object from DB
$sql = "SELECT * FROM payments LIMIT 1";
$p = $connection->query($sql)->fetchAll(PDO::FETCH_ASSOC);

var_dump($p); // I see that all the data including `id` is ok

$c = new Doctrine_Collection('Payment', 'id');
$c->synchronizeFromArray($p);

var_dump($c->toArray()); // All the data is ok but `id` == false 
```

我尝试使用 Doctrine_Collection::fromArray 而不是 synchronizeFromArray 但它给出了相同的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-12T18:27:06.747

1.  在`Doctrine_Collection::fromArray`（`synchronizeFromArray`也）记录期间，主键（`DoctrineRecord::_id`数组）不会被更新。

2.  `DoctrineRecord::toArray()`将用结果覆盖所有主键列值`DoctrineRecord::getIncremented()`，因为第 1 点为空。

处理此问题的一种方法是`$p`在执行之前修改您的数组`fromArray()`。在您的数组中，您应该**将主键名称更改为`_identifier`**.

在您的情况下，最简单的解决方案是修改您的 SQL 查询：

```
$sql = "SELECT `id` as `_identifier`, * FROM payments LIMIT 1"; 
```

这种方式遵循来自 Doctrine_Record::fromArray() 的代码：

```
if ($key == '_identifier') {
    $refresh = true;
    $this->assignIdentifier($value);
    continue;
} 
```

将为您的记录分配适当的`_id`数组。

# spotify - 防止滥用 libspotify 密钥

> ID：15884916
> 
> 赞同：4
> 
> 时间：2013-04-08T17:05:44.193
> 
> 标签：spotify, libspotify

libspotify 的使用条款规定密钥应以安全的方式存储。存储我发现的密钥的唯一建议是编译您的应用程序并分发二进制文件。我很难将其视为默默无闻的安全性之外的其他任何东西，因为使用调试器可以轻松检索密钥。

这真的是 Spotify 建议的方法吗？如果我只编译包含密钥的文件并将我的应用程序的其余部分作为开​​源分发呢？

我想我的问题的本质是：如何在不要求每个用户获取自己的密钥的情况下避免违反 ToS？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T18:02:57.577

逻辑是这样的（我为 Spotify 工作）：要求我们的开发人员跳过一堆圈子只是为了将他们的 API 密钥放入他们的二进制文件中是不值得的 - 开发人员会被它关闭，每个人都会不开心。

但是，我们不希望密钥四处散布，因为如果每个人都使用一个密钥，我们就无法可靠地跟踪它，如果该密钥最终被用于恶意活动并且我们将其杀死，那么很多应用程序会突然被打破。

用一个可怕的汽车类比，想象 API 密钥是一些有价值的项目，而您的应用程序是一辆汽车。如果您将物品留在汽车座椅上（即，使用纯文本的 API 密钥），您实际上是在邀请某人闯入并窃取它（即，在他们自己的应用程序中使用您的密钥）。如果您将其放入手套箱（将其编译为二进制文件），如果有人闯入您的汽车（拆解您的应用程序），因为他们知道该物品在手套箱中，那么无论如何游戏都结束了。

简而言之：在密钥中编译绝对是安全的，但我们认为这足以劝阻人们不要随意重用其他应用程序的 API 密钥，而直接从我们这里获取一个密钥是相当微不足道的。

> 我想我的问题的本质是：如何在不要求每个用户获取自己的密钥的情况下避免违反 ToS？

如果您以二进制形式分发您的应用程序，那么编译它就可以了。如果您以源代码形式分发它，则不能真正包含密钥。

# sql - SQL Server：提高交叉连接的效率以创建矩阵结果

> ID：15884917
> 
> 赞同：0
> 
> 时间：2013-04-08T17:05:48.180
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有一个应用程序，最终用户可以通过选择一个或多个来运行报告：

*   顾客
*   时间段
*   指标

由于我的应用程序/报告平台的限制，我必须返回一个查询，其中包含用户选择的每个组合的一行，即使该组合没有数据也是如此。

我想看看是否有任何方法可以优化查询，因为我发现将我正在构建的矩阵加入实际财务数据以构建数据集需要花费很多时间回来。

我整理了一个如下示例（SQL Server 2008 R2）：

```
--Average 12 metrics, max 50
declare @Metrics table (MetricID int)
insert into @Metrics values (1000)
insert into @Metrics values (2000)
insert into @Metrics values (3000)

--Average 12 periods, max 24
declare @Periods table (PeriodID int)
insert into @Periods values (201301)
insert into @Periods values (201302)
insert into @Periods values (201303)

--Between 200 and 500 customers
declare @Customers table (CustomerID int)
insert into @Customers values (1)
insert into @Customers values (2)
insert into @Customers values (3)

--Create combined table
declare @IDMatrix table (CustomerID int, PeriodID int, MetricID int)

INSERT INTO @IDMatrix
SELECT x1.CustomerID, 
        x1.PeriodID, 
        m.MetricID
FROM (SELECT c.CustomerID, p.PeriodID
        FROM @Customers c, @Periods p) x1, @Metrics m
ORDER BY x1.customerid, x1.periodid, m.MetricID

declare @Financials table (CustomerID int, MetricID int, PeriodID int, Value float)
insert into @Financials values (1,1000,201301,984.2)
insert into @Financials values (1,1000,201302,245.1)
insert into @Financials values (1,1000,201303,789.1)

SELECT
    i.CustomerID,
    i.PeriodID,
    i.MetricID,
    sum(isnull(f.Value,0))
FROM @IDMatrix i
LEFT JOIN @Financials f ON i.CustomerID = f.CustomerID and i.MetricID = f.MetricID and i.PeriodID = f.PeriodID
GROUP BY
    i.CustomerID,
    i.PeriodID,
    i.MetricID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:18:17.490

我建议尝试使用临时表而不是矩阵的表变量，然后对其进行索引。

# javascript - 如何检测浏览器是否为移动浏览器并在普通浏览器和移动浏览器之间切换？

> ID：15884918
> 
> 赞同：0
> 
> 时间：2013-04-08T17:05:52.310
> 
> 标签：javascript, mobile, html5boilerplate

我认为它以某种方式涉及视口，但我不擅长移动。我想重新调整我的字体大小并移动我的元素。

我看到 HTML 5 Boilerplate 以移动形式出现，我将如何以及何时切换到该形式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:10:14.520

这取决于你需要改变什么。

要将 Boilerplate 更改为 Boilerplate Mobile，您可以使用服务器端条件并呈现完全不同的页面。如果您使用某种动态框架或可以直接访问服务器，您可以[检查 User-Agent](https://stackoverflow.com/questions/1005153/auto-detect-mobile-browser-via-user-agent)

[这篇](https://www.davidbcalhoun.com/2010/using-mobile-specific-html-css-and-javascript-mobile-web-part-5/)文章解释了如何使用特定于移动设备的 JS、CSS 和 HTML。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T17:21:25.527

您可以解析用户代理以确定移动平台（例如，iPhone、iPad、iPod、Android、Opera、Android、BlackBerry、hpwOS、Windows PhoneOS 等）。

最好在 CSS 中使用 @media 查询来利用屏幕尺寸。

以供参考：

*   [https://mislav.net/2010/04/targeted-css/](https://mislav.net/2010/04/targeted-css/)
*   [https://www.w3schools.com/css/css3_mediaqueries.asp](https://www.w3schools.com/css/css3_mediaqueries.asp)

# stored-procedures - 存储过程 -- WHERE 子句上的列名无效

> ID：15884921
> 
> 赞同：0
> 
> 时间：2013-04-08T17:06:05.890
> 
> 标签：stored-procedures

我正在通过 Microsoft 的 Visual Web Developer 的数据库资源管理器为级联下拉列表创建一个存储过程，并且在运行该过程时出现 Invalid Column Name 错误。我尝试重新创建数据库表并重命名列，但无论列名是什么，我都会收到相同的错误。

这就是程序的样子...

```
CREATE PROCEDURE spGetEquipmentByVendorID @VendorID INT
AS 
    BEGIN
        SELECT  EquipmentModel
        FROM    Equipment
        WHERE   VendorID = @VendorID
    END 
```

错误发生在 WHERE 子句上。

我已阅读有关此错误的其他帖子，但我没有发现任何可以解决问题的方法。感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:47:26.427

根据您的评论，您的 sp 编译失败的原因很简单：您缺少必要的列。添加`VendorID`到你的`Equipment`表，你不应该有问题了。

# paypal - 根据以前的购买在贝宝中创建定期计费配置文件

> ID：15884931
> 
> 赞同：1
> 
> 时间：2013-04-08T17:06:37.793
> 
> 标签：paypal, paypal-subscriptions

在 Beanstream 中，可以根据之前的购买创建一个重复的个人资料帐户，如其网站中所述：

> 如果客户已经进行了购买或对其信用卡进行了预授权，则可以从现有的 Beanstream 交易记录中创建循环计费帐户。这将防止您不得不多次收集账单和卡信息。

Paypal也可以做到这一点吗？如果是，如何？

编辑：

我不是在问是否可以通过 API。我在问是否可以通过 Paypal 后端/帐户页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:15:10.240

有几种不同的方法可以做到这一点，这取决于您之前运行的交易，特别是您使用的 PayPal 服务类型，例如 Payflow 或 PayPal。如果这是针对快速结账交易，您将无法为此设置配置文件，因为需要在初始 SetExpressCheckout API 调用中传递几个额外的配置文件，以允许您返回并创建一个定期付款。如果您使用的是 Payflow，则可以使用现有交易来创建配置文件。如果您使用的是 PayPal，则无法使用现有交易来创建配置文件。但是，您可以使用现有交易通过您的系统而不是 PayPal 的系统来创建循环配置文件。每次您需要再次向买家收费时，您只需执行参考交易 API 调用。您可以将您的系统设置为每天运行一个 cron 作业，并查看需要向谁收费。

将现有交易转换为配置文件（Payflow 示例）

以下示例 Payflow 参数字符串为原始交易创建配置文件，该交易的 PNREF 值为 xyz123，并指定支付金额为 42 美元。您必须将 ORIGID 值设置为原始事务的 PNREF 值。

"TRXTYPE=R&TENDER=C&PARTNER=PayPal&VENDOR=Acme&USER=Acme&PWD=a1b2c3d4&ACTION=A&PROFILENAME=RegularSubscription&ORIGID=XYZ123&START=12012002&PAYPERIOD=WEEK&TERM=12&OPTIONALTRX=S&OPTIONALTRXAMT=2.00&COMMENT1=First-timecustomer&AMT=42.

# vim - vim中的编码都搞砸了

> ID：15884933
> 
> 赞同：0
> 
> 时间：2013-04-08T17:06:40.220
> 
> 标签：vim, encoding, utf-8, utf-16

我有以前在 Vim 中工作的 tex 文件，但现在我必须运行

```
:e ++enc=utf16 /path/to/file.tex 
```

正确查看文件。

如果我做

```
:write ++enc=utf-8 /path/to/file.tex, 
```

该文件是中文的（我不知道为什么）。

如何更改编码，这样我就不需要`:e ++enc=utf16`每次都运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:33:58.157

这终于奏效了：`:set fileencodings=ucs-bom,utf-8,sjis`

# sql-server - 从 Excel 到 SQL Server 的数据导入无法导入所有数据

> ID：15884934
> 
> 赞同：16
> 
> 时间：2013-04-08T17:06:43.423
> 
> 标签：sql-server, excel, import

使用导入和导出数据工具将数据从 Excel 导入 SQL Server 时发生了一件奇怪的事情。

缺点是我可以在 Excel 中看到数据，但所有数据都没有导入。

我有一个包含一个电子表格的 Excel 工作簿。我可以看到列中的数据，一切看起来都很好。当我使用导入向导导入数据时，我可以看到列和预览数据，但是在执行导入时数据并没有全部传输过来。没有错误并且导入过程完成——它只是将一堆空值插入到表中。

这似乎最常发生在数字上——所以假设我有三列分别表示名字、姓氏和 ID 号。我会得到所有的名字和姓氏，以及一些身份证号码。我找不到正在发生的事情的模式。

我以前发生过这种情况，我注意到在导入过程中有两个电子表格可供选择：DataImport 和 DataImport$ - 第一个会如上所述失败，而第二个会完美导入。这次只有一个电子表格可供选择。

我主要在 64 位系统上使用 XLS 文档和 32 位导入向导，但我愿意尝试任何东西。

关于为什么有两个电子表格（有时）以及为什么这个导入会失败的任何想法？

戴夫

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-12-27T13:11:11.177

您的问题的答案可能涉及数据如何存储在 Excel 中。

我刚刚遇到了同样的问题。我有一列包含两种类型的值：数字和带有破折号的数字。（例如 51000 和 2009-00949）我需要将它们作为 NVARCHAR 或 VARCHAR 导入，但 SQL 导入向导 (SQL2005) 只会导入数字而不是带有破折号的数字或带有破折号的数字而不是数字，取决于第一条记录中的类型。未导入的值将在字段中具有“空”值，使我的记录无用。

我尝试使用 Excel 中的格式|单元格菜单选项（数字、文本、常规等）和 SQL 中的各种映射选项（nvar、nvarchar、varchar、sqlvariant、float），但没有成功。

解决方案是使用 Excel 中的数据|文本到列选项，而不是单元格格式选项将数值存储为文本。当我在列上使用它时，数值（例如 51000）转换为存储为文本值的数字（左上角出现小绿色三角形错误），带有破折号的数字仍保留为文本。我必须以这种格式保留数据，并带有绿色小三角形错误，否则将无法成功导入 SQL。当列中的数据以这种格式存储时，两种类型的列数据（数字和带破折号的数字）与其他记录数据一起正确导入，列中没有空值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-18T21:16:29.557

我的问题是我正在导入的文件是一个较旧且有些诽谤的 excel 文件。我打开文件并将其另存为 .xlsx 并成功导入文件，之后没有空数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-29T15:36:37.917

我能够通过对数据进行排序以使文本数据位于顶部来解决问题。这样 SQL Server 就知道它是文本数据，而不是数字数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-12T14:16:27.623

我遇到了完全相同的问题使用**.xlsx**文件解决了我的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T05:02:55.580

最有可能是那个所谓的空白行导致 Sql Server 忽略其余数据。Bu确定你能分享excel文件的模式和前五行吗？正确的三个和接下来的两个记录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T18:52:53.780

您正在使用导入向导，不是吗？单击`Edit Mappings`向导的“Select Source Tables and Views”页面，然后检查每个源列的 Type、Nullable 和 Size 列。听起来有些东西没有正确映射。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-17T17:17:15.597

我也有这个问题。我能够解决它的唯一方法是将 .xlsx 文件保存为 .csv 文件，然后将 .csv 文件用于 SQL Server“导入数据”。

Microsoft Excel 和 Microsoft SQL Server 之间的集成似乎会更干净。

我的版本是：Excel 2013。SQL Server 2012。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-13T06:38:32.273

最后将单元格格式化为一般对我有用的地方有数值，早些时候它显示 %s 但现在它已经解决了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-04T14:47:19.740

似乎来自 SSMS 的导入工具会抽取前“x”行的样本来确定列的数据类型和它的其他特征，所以如果它选择是双精度的，它会将文本值设为 null，如果它读取它作为文本没有数字将显示。如果您有**Microsoft Access**，您可以首先使用访问导入，它允许您选择自己的列类型并将其保存为访问文件，然后导入对 SQL 服务器的访问并“瞧”，它可以工作（至少对我来说），我希望它可以帮助某人。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-13T01:35:22.110

我正在将数据上传到现有表。我所做的是编写现有表的脚本，以验证我正在导入的列是否与现有列匹配。原来我的一列不匹配，它只是部分导入数据集。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-10T08:12:26.400

选择该列的所有行并将类型更改为 Excel 中的文本，然后选择整个列并将类型更改为文本肯定会起作用。

# android - 如何在排列的颜色中设置按钮背景？

> ID：15884935
> 
> 赞同：1
> 
> 时间：2013-04-08T17:06:48.970
> 
> 标签：android, button, user-interface

为什么 CustomButton 结果是灰色的？在 R.color.blue 中，绿色和红色实际上是红色和蓝色和红色。我正在尝试从colors.xml中随机选择红色蓝色绿色中的按钮颜色。

```
public void CustomButton(int btnId) {
    Button btn = (Button) findViewById(btnId);

    int[] btnColor = { R.color.blue, R.color.green, R.color.red };
    Random random = new Random();
    int c = btnColor[random.nextInt(btnColor.length)];
    btn.setBackgroundColor(c);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:15:28.683

试试这个

你应该使用

`getResources().getColor(yourcolorid)`得到颜色

代码中的小改动

改变这个

```
 btn.setBackgroundColor(c); 
```

对此

```
 btn.setBackgroundColor(getResources().getColor(c)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:11:50.080

除非您使用自定义颜色，否则请尝试删除“r”：

```
public void CustomButton(int btnId) {
    Button btn = (Button) findViewById(btnId);

    int[] btnColor = {Color.BLUE, Color.GREEN, Color.RED};
    Random random = new Random();
    int c = btnColor[random.nextInt(btnColor.length)];
    btn.setBackgroundColor(c);

} 
```

这将使用内置的 Android 类[Color](http://developer.android.com/reference/android/graphics/Color.html)。

# bash - 将当前路径上的目录复制到bash中具有不同名称的相同路径

> ID：15884944
> 
> 赞同：1
> 
> 时间：2013-04-08T17:07:18.150
> 
> 标签：bash

例如，如何以新名称复制目录以备份目录。

例如，想象一下，有一个名为“root”的文件夹。

在其中，存在一个名为“test”的文件夹，并且在“test”文件夹下存在一些文件和文件夹。bash 的当前工作目录是 'root'

我想做的是

1.  将目录“test”的内容复制到一个名为“test.bak”的新目录中，该目录应与“test”在同一目录中创建，即“root”，它应该包含“test”目录包含的所有内容，即“测试”的备份。

这可以用一个命令来完成吗？如果是这样，怎么做？

我能想到的唯一方法是创建一个名为“test.bak”的新目录并将所有内容复制到其中，但这需要两个命令。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:11:56.213

是的你可以。可以将`recursive`-与`parent`参数结合使用；

```
$ cp -RP test test.bak 
```

当`root`文件夹内有终端时。

而当在文件夹的父文件`root`夹中时；

```
$ cp -RP root/test root/test.bak 
```

或者使用绝对路径，或者在这种情况下，使用来自用户主文件夹的占位符调用；

```
$ cp -RP ~/Desktop/root/test ~/Desktop/root/test.bak 
```

# matlab - 如何从具有特定均值和方差的正态分布中生成随机数？

> ID：15884945
> 
> 赞同：3
> 
> 时间：2013-04-08T17:07:18.713
> 
> 标签：matlab, gaussian

我需要`n`使用该`randn`函数生成一个均值为 0 方差为 1 的高斯随机数字样本。

一般来说，我将如何使用该函数生成具有均值和方差`X`的高斯随机数字样本？`n``mu``v``randn`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T17:10:33.473

[*标准正态分布*](https://en.wikipedia.org/wiki/Normal_distribution#Standard_normal_distribution)已经具有均值 0 和方差 1 。

如果你想改变平均值，只需“翻译”分布，即将你的平均值添加到每个生成的数字。同样，如果您想更改方差，只需“缩放”分布，即将所有数字乘以`sqrt(v)`. 例如，

```
v = 1.5; % variance
sigma = sqrt(v); % standard deviation
mu = 2; % mean
n = 1000
X = sigma .* randn(n, 1) + mu;
stats = [mean(X) std(X) var(X)] 
```

请参阅以下文章：

> [https://ch.mathworks.com/help/matlab/math/random-numbers-with-specific-mean-and-variance.html](https://ch.mathworks.com/help/matlab/math/random-numbers-with-specific-mean-and-variance.html)

了解更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T20:16:44.337

你也可以打电话

```
normrnd(0,1,[M,N]) 
```

或者

```
random('Normal',0,1,[M,N]) 
```

# dynamics-crm-2011 - 如何在 crm 2011 中将RequiredAttendees 添加到约会中

> ID：15884948
> 
> 赞同：1
> 
> 时间：2013-04-08T17:07:30.203
> 
> 标签：dynamics-crm-2011, dynamics-crm

我正在尝试将帐户添加到约会的 RequiredAttendees 属性中。我的代码在电子邮件、传真、信件上都能完美运行。但是在创建时约会，不添加该属性。

```
 string[] ToArr = new string[1];
            Guid To = Guid.Empty;
            try
            {
                if (Utility.To.Contains(";"))
                {
                    ToArr = Utility.To.Split(';');
                }
                else
                {
                    ToArr[0] = Utility.To;
                }

                EntityCollection collToParty = new EntityCollection();
                for (int i = 0; i < ToArr.Length; i++)
                {
                    if (Guid.TryParse(ToArr[i].ToString(), out To))
                    {

                        EntityReference to = new EntityReference(Utility.Toguidentityname, To);
                        Entity toParty = new Entity("activityparty");
                        toParty.Attributes.Add("partyid", to);
                        collToParty.EntityName = Utility.Toguidentityname;
                        collToParty.Entities.Add(toParty);
                    }
                    else
                    {
                        throw new Exception("Il valore del campo della stringa " + To + " toGuid non è un GUID:" + ToArr[i].ToString());

                    }
                }

                if (entity.LogicalName.Equals("appointment"))
                    entity.Attributes.Add("RequiredAttendees", collToParty);
                else
                    entity.Attributes.Add("to", collToParty);

            }
            catch (Exception ex)
            {
                LoggerObj.writeLog("Errore:" + ex.Message);
                throw;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:21:29.960

尝试小写`RequiredAttendees`：

```
entity.Attributes.Add("requiredattendees", collToParty); 
```

# richfaces - 在另一个表的过滤事件上重新渲染rich:extendedDataTable

> ID：15884950
> 
> 赞同：2
> 
> 时间：2013-04-08T17:07:40.863
> 
> 标签：richfaces, rerender

我的页面中有两个`rich:extendedDataTables`。一个是“master”，另一个是“slave”，因为slave中的数据依赖于master中的数据。

主人已经`filterBy`为它的每一列设置了。我希望能够`rerender`根据主表中的过滤事件访问从表。

我最接近成功的是尝试点击下面的“返回”按键，但效果不佳：

```
<rich:hotKey selector="#masterTableEnclosingPanel" key="return" 
    handler="doSomethingA4jFunction()" preventDefault="true" type="onkeyup" / 
```

我正在使用 RichFaces 3.3.3。任何想法都非常受欢迎！

* * *

根据 khan 的要求，我正在添加更多的 XHTML 源代码。我正在使用 RichFaces 3.3.3：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="........................">

<f:view>
    <head>
        <meta http-equiv="....................."/>
    </head>
    <body>
    <a4j:form id="my_form">

        <a4j:jsFunction name="handleMasterTableFiltering"
            oncomplete="myCustomFilterColumnsJSFunction()"
            reRender="slaveTablePanel"/>

        <rich:panel id="masterTablePanel">

<!-- MASTER TABLE -->
            <a4j:region id="masterTableEnclosingRegion">
                <rich:extendedDataTable rowKeyVar="rkv"
                    height="284px" width="100%" id="masterTable" rows="10"
                    columnClasses="col" value="#{BackingBean.masterTableModel}"
                    binding="#{BackingBean.masterTable}"
                    selection="#{BackingBean.selectionMasterTable}" var="master"
                    enableContextMenu="false" selectionMode="multi">

                    <a4j:support event="onselectionchange"
                        action="#{BackingBean.handleSelectionMasterTable}"
                        reRender="slaveTablePanel" />

                    <rich:column width="40px" sortBy="#{'ID'}" filterBy="#{'ID'}">
                        <f:facet name="header">
                            <h:outputText value="ID" />
                        </f:facet>
                        <h:outputText value="#{master.id}" id="master_id"/>
                    </rich:column>

                    <rich:column width="120px" sortBy="#{'NAME'}" filterBy="#{'NAME'}">
                        <f:facet name="header">
                            <h:outputText value="Name" />
                        </f:facet>
                        <h:outputText value="#{master.name}" id="master_name" />
                    </rich:column>

                    <rich:column width="140px" sortBy="#{'DESCRIPTION'}" filterBy="#{'DESCRIPTION'}">
                        <f:facet name="header">
                            <h:outputText value="Description" />
                        </f:facet>
                        <h:outputText value="#{master.description}" id="master_desc" />
                    </rich:column>

                </rich:extendedDataTable>
            </a4j:region>
<!-- END MASTER TABLE -->

        </rich:panel>

        <rich:spacer height="10px" />

        <rich:panel id="slaveTablePanel">

<!-- SLAVE TABLE -->
            <rich:panel id="slaveTableEnclosingPanel" 
                    style="height:325px; width:1210px; overflow:auto; border:0px; padding-top:0px;">
                <rich:extendedDataTable rowKeyVar="rkv"
                    height="282px" width="1758px" id="slaveTable" rows="10"
                    columnClasses="col" selectionMode="multi"
                    value="#{BackingBean.slaveTableModel}"
                    selection="#{BackingBean.selectionSlaveTable}"
                    binding="#{BackingBean.slaveTable }"    
                    var="slave" enableContextMenu="false">

                    <a4j:support event="onselectionchange" immediate="true"
                        action="#{BackingBean.handleSelectionSlaveTable}"/>

                    <rich:column width="40px" sortBy="#{'ID'}" filterBy="#{'ID'}">
                        <f:facet name="header">
                            <h:outputText value="ID" />
                        </f:facet>
                        <h:outputText value="#{slave.id}" id="slave_id"/>
                    </rich:column>

                    <rich:column width="120px" sortBy="#{'NAME'}" filterBy="#{'NAME'}">
                        <f:facet name="header">
                            <h:outputText value="Name" />
                        </f:facet>
                        <h:outputText value="#{slave.name}" id="slave_name" />
                    </rich:column>

                    <rich:column width="140px" sortBy="#{'DESCRIPTION'}" filterBy="#{'DESCRIPTION'}">
                        <f:facet name="header">
                            <h:outputText value="Description" />
                        </f:facet>
                        <h:outputText value="#{slave.description}" id="slave_desc" />
                    </rich:column>

                </rich:extendedDataTable>
            </rich:panel>
<!-- END SLAVE TABLE -->

        </rich:panel>

        <rich:hotKey selector="#masterTablePanel" key="return"
            handler="handleMasterTableFiltering()"
            preventDefault="true" type="onkeyup" />

    </a4j:form>

    </body>
</f:view>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T13:48:22.523

解决方案是将`slaveTablePanel`放入：`reRender``masterTablePanel`

```
<rich:extendedDataTable
    id="masterTable" ..........
    reRender="slaveTablePanel" > 
```

问候 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:13:44.960

尝试将以下内容添加到主表：

```
<a4j:support event="onkeyup"
             oncomplete="myCustomFilterColumnsJSFunction()"
             reRender="slaveTablePanel" /> 
```

# actionscript-3 - AS3（高级）中将成分与食谱匹配的算法

> ID：15884954
> 
> 赞同：0
> 
> 时间：2013-04-08T17:07:56.850
> 
> 标签：actionscript-3, flash-cs5

这是一个高层次的问题；我不希望您发布任何代码或示例，而只是粗略地列出我将如何以编程方式实现我想要做的事情 - 请不要删除这个问题，因为我提出的问题需要真实的答案，因此是主题。

我正在寻找在 Flash CS5.5 中使用 ActionScript 3.0 为大学项目构建一个非常简单的应用程序。我设想的应用程序很像 Epicurious ( [http://www.epicurious.com/services/mobile](http://www.epicurious.com/services/mobile) )。该应用程序的基本功能是你告诉它你冰箱里有什么成分，它会告诉你所有可能的食谱，你可以用你列出的成分做。

我知道我将如何构建应用程序的基本方面，例如保存成分的 DataGrid + SharedObject 以保存成分，但我不知道从哪里开始应用程序的“将成分与食谱匹配”部分 -我知道我必须将所有成分存储在一个数组中，但是将成分与食谱中的成分相匹配的算法是什么（假设为了应用程序的目的，我们只有几个食谱，最多20个食谱）

请注意：我是 AS3 的完全新手，但在 Java 和 VB.NET 等其他编程语言方面有经验

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T17:10:11.597

对于食谱列表中的每个食谱，检查其成分，与冰箱中的成分进行比较。如果还不够，下一个食谱。如果一切都可用，可以展示这个食谱。

# python - 熊猫时间序列加入

> ID：15884963
> 
> 赞同：0
> 
> 时间：2013-04-08T17:08:41.300
> 
> 标签：python, pandas, dataframe

我有两个数据框，其中一个带有可能触发或不触发动作的事件。另一个表示带有字段的操作，以显示触发操作的原因。我的目标是尽可能多地触发动作持续时间。
密钥不在我的控制之下，也不是一个完美的相等连接，只有一个匹配项。我的想法是先加入然后删除负持续时间，因为我知道触发器必须先于操作。然后我需要删除每个键的所有持续时间，但持续时间最短。请参阅示例代码。我想要 result_df 中的所有操作字段“other_data”。（仅适用于最短持续时间的连接）
我知道我的结果可能包括一些人为的短持续时间，但我怀疑由于连接键重用的性质，这种情况很少发生，并且不会对其余的分析造成问题。以前我一直在使用任意选择的最大持续时间来丢弃错误的连接数据，但是丢弃这些异常值会有问题，因为我最感兴趣的是高异常值。

```
import numpy as np
import pandas as pd

scale = 10000 # can go low like 1000 or high like a million just for dummmy data
trigger_df = pd.DataFrame({'seq_key' : np.random.random_integers(scale * .02,scale *     .2,scale * 7),
                           'time_ns' : np.random.random_integers(scale * .04,scale * .4,scale * 7)})

action_df = pd.DataFrame({'seq_key' : np.random.random_integers(scale * .02,scale * .2,scale * .7),
                       'time_ns' : np.random.random_integers(scale * .04,scale * .4,scale * .7),
                       'other_data' : np.random.random_integers(scale * .03,scale * .3,scale * .7)})
action_df.drop_duplicates(cols='seq_key', take_last=True)

join_df = pd.merge(action_df,trigger_df, 
            on='seq_key', how='inner',
            suffixes=('_action','_trigger'))
join_df['duration_ns'] = join_df.time_ns_action - join_df.time_ns_trigger
join_df = join_df[join_df.duration_ns > 0]

grouped = join_df.groupby(by = ['seq_key'])['duration_ns']
result_df = pd.DataFrame({'duration_ns' : grouped.min()}).reset_index()
print average(result_df.duration_ns)
print average(join_df.duration_ns)
print result_df ,'sad df wants other_data' 
```

# javascript - 从 for 循环访问变量的特定实例（范围问题？）

> ID：15884965
> 
> 赞同：2
> 
> 时间：2013-04-08T17:08:44.590
> 
> 标签：javascript, jquery, raphael

对任何类型的编程都很陌生，如果这是一团糟，很抱歉！我有一个叶绿素图，其中颜色由滑块确定，效果很好。但是，当单击地图上的每个特定形状时，我需要显示用于确定文本字段中颜色的值 - 并且在使用滑块时仍然会更新。

我可以让它为点击内的区域正确计算，但它不会随幻灯片更新，所以我认为我需要它在点击之外，然后只是在点击时显示/隐藏。但在点击之外，我没有“this”可供参考，也无法进行我需要的迭代。我一直在尝试我遇到的所有可能的事情，现在完全迷失了。

非常感谢您的任何帮助/解释。

我所拥有的是：

```
function fromslide(){

// Set properties for each county.
for (var i=0; i < counties.length; i++) {
ctys = counties[i];
//console.log (ctys);
var id = ctys.data("id");
alloc= ((parseInt(Landvar[id].val) * landweight) + (parseInt(Popvar[id].val) * popweight)  + (parseInt(Poorvar[id].val) * poorweight));
console.log(alloc);

// Set county color.
ctys.attr({
fill: getColor(alloc/ 1000000),
});

//console.log (selectedcnty);
console.log (window.selectedcnty);

//this is what's not working
if (selectedcnty = String(id)) { thisalloc = ((parseInt(Landvar[id].val) * landweight) + (parseInt(Popvar[id].val) * popweight)  + (parseInt(Poorvar[id].val) * poorweight));}
$("#allocfield").val(thisalloc);        

ctys.click(function() {

for (var i=0; i < counties.length; i++) {
var ctys = counties[i];
var id = ctys.data("id");
ctys.attr({stroke: "#fff" });
};
this.toFront();
this.attr({stroke: "orange" });
var name = this.data("id"); 
$("#namefield").val( Popvar[name].name);    
$("#popfield").val( Popvar[name].val);
$("#landfield").val( Landvar[name].val);
$("#poorfield").val( Poorvar[name].val);

console.log(thisalloc);

window.selectedcnty = name;  

console.log (window.selectedcnty);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:15:40.053

您可以在任何函数之外创建一个全局变量，然后您可以从函数调用中访问它。你是对的`this`- 它不是一个变量，而是一个特殊的关键字，它引用“拥有”正在执行的方法的对象实例。为了通过函数调用将数据从一个函数传递到另一个函数，您需要将其存储在一个全局变量中。只需在任何函数之外声明变量，并在函数内引用它*而不*使用`this`：

```
var myVar = 0;
function myFunc() {
    myVar++;
    alert(myVar);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:30:38.213

我得到它的工作添加

```
window.selectLand = parseInt(Landvar[name].val); 
window.selectPop = parseInt(Popvar[name].val); 
window.selectPoor = parseInt(Poorvar[name].val); 
```

到点击功能，然后将其用于上面的“thisalloc”。它可以满足我的需要，但这似乎是一种不优雅的方式。似乎必须有一种方法来引用已经存在的“alloc”实例。

# double - “无法从十进制转换为双精度”

> ID：15884967
> 
> 赞同：1
> 
> 时间：2013-04-08T17:08:49.233
> 
> 标签：double, decimal

我正在尝试以十进制格式提取我的数据库中出现的一些数字作为一天的分数。不过，在某些情况下，这些时间可能为空，因此我尝试使用此方法来解决此问题，但在我的应用程序中出现构建错误，即：

> ““system.TimeSpan.FromDays(double)' 的最佳重载方法匹配有一些无效参数”

和

> “Argument1：无法从 'decimal' 转换为 'double'”。

有没有我失踪的方法？

```
time1 = reader.IsDBNull(4) ? TimeSpan.Zero : TimeSpan.FromDays(reader.GetDecimal(4)),
time2 = reader.IsDBNull(5) ? TimeSpan.Zero : TimeSpan.FromDays(reader.GetDecimal(5)),
time3 = reader.IsDBNull(6) ? TimeSpan.Zero : TimeSpan.FromDays(reader.GetDecimal(6)), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:12:36.353

该类型`decimal`不能隐式转换为`double`. 您可以显式转换它：

```
time1 = 
    reader.IsDBNull(4) ? 
    TimeSpan.Zero : 
    TimeSpan.FromDays((double)reader.GetDecimal(4)) 
```

对于表示天数的数据库类型，十进制是一个不寻常的选择。我建议您确保该列确实代表了这一点。

# c++ - C++ 将 char 字符串拆分为行为不可预测的动态 char 数组

> ID：15884969
> 
> 赞同：-3
> 
> 时间：2013-04-08T17:09:00.770
> 
> 标签：c++, arrays, dynamic, char, split

我有一个程序创建一个动态 char 数据输入字符串（不允许使用 c++ 字符串），看起来像这样（其中基本上可以是任何其他数据而不是日期，并且没有给出数据块的数量）：

> 2004-01-18|2005-01-18|

我需要对字符串做的是将其拆分为可用于打印的奇异数据块的 2d char 数组。我的代码如下所示：

```
char** CRegister::Split(char *st, int& parts, int& maxChars) const{

    parts = 0;
    maxChars = 0;
    int maxtmp = 0;
    int j = 0; 

    /* Calculating the number of data blocks in the string */

    while(st[j]){
        if(st[j] == '|'){
            parts++;
        }
        j++;
    }
    j = 0; 

    /* Calculating the longest data block length for array initialization */

    while(st[j]){
        if(st[j] != '|'){
            maxtmp++;
        }
         else{
            if(maxtmp > maxChars){
                maxChars = maxtmp;
            }
            maxtmp = 0;
         }
        j++;
    }
    j = 0; 

    cout << "!!!!!-----!!!!!-" << st << "-!!!!!!!-----!!!!!" << endl;

    /* Initialization of the dara array */

    char **array = new char*[parts];
    for(int i = 0; i < parts; i++){
        array[i] = new char[maxChars];
    }

    /* Filling the array with data blocks */

    int p = 0;
    for(int i = 0; i < parts; i++){
        while(st[j] != '|'){
            array[i][p] = st[j];
            j++;
            p++;
        }
        if(st[j] == '|'){
            j++;
        }
        p = 0;
    }    
    return array;    
} 
```

在大多数情况下，它按照我需要的方式工作，但问题是它有时会表现得无法预测，破坏了整个程序——数据块并没有在它们应该在的地方结束，还有一堆其他字符被添加到它（通常是以前使用的单词的一部分）。结果看起来像这样（“!!!!!-----!!!!!-”之间的线是预处理数组）

```
!!!!!-----!!!!!-2003-01-18|-!!!!!!!-----!!!!!
!!!!!-----!!!!!-Whiston's street|-!!!!!!!-----!!!!!
!!!!!-----!!!!!-Miami|-!!!!!!!-----!!!!!

2003-01-18 Whiston's street Miami

!!!!!-----!!!!!-2004-01-18|2005-01-18|-!!!!!!!-----!!!!!
!!!!!-----!!!!!-Whiston's street|Someone's streetz|-!!!!!!!-----!!!!!
!!!!!-----!!!!!-Miami|Siberia|-!!!!!!!-----!!!!!  

2004-01-18 Whiston's street Miami
2005-01-18street Someone's streetz Siberia

!!!!!-----!!!!!-2004-01-18|-!!!!!!!-----!!!!!
!!!!!-----!!!!!-Whiston's street|-!!!!!!!-----!!!!!
!!!!!-----!!!!!-Miami|-!!!!!!!-----!!!!!

2004-01-18 Whiston's street Miami

!!!!!-----!!!!!-2004-01-18|-!!!!!!!-----!!!!!
!!!!!-----!!!!!-Whiston's street|-!!!!!!!-----!!!!!
!!!!!-----!!!!!-Miami|-!!!!!!!-----!!!!!

2004-01-18streetz Whiston's street Miami 
```

对于三组不同的数据，该函数连续调用三次，然后连续打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:16:42.213

如果您不能使用标准字符串类，请编写您自己的简化版本并使用它。

然后做大致相同的事情`std::vector`——要么使用它，要么编写你自己的简化版本。

当你完成了这两项工作后，编写这个函数来将输入解析为一个`my_vector<my_string>`应该非常微不足道的边界。

# r - 可以在不打开 R 环境的情况下运行 RShiny 应用程序吗？

> ID：15884975
> 
> 赞同：31
> 
> 时间：2013-04-08T17:09:30.830
> 
> 标签：r, shiny, executable

目前我有一个 R 闪亮的应用程序，运行它我打开 RStudio 并执行

```
setwd("C:/Users/Me/Desktop/R/ShinyProject2")
library(shiny)
......
runApp() 
```

从位于我的目录中的 R 脚本。

我将应用程序发送给不知道如何使用 R 的同事进行审查。

所以我只是想知道......有没有一种简单的方法可以编写一个直接打开 UI 的可执行文件，而无需单击打开 R studio 并执行代码？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-07-24T08:00:07.483

我知道这是一个古老的讨论，但它可能会帮助知道现在*可以*做到这一点的人。您可以创建一个独立的闪亮应用程序，在计算机上运行而无需安装 R 或任何库。有一种相对简单的方法（目前我只为 Windows 用户做过，但 MacOS 也应该有一些东西），遵循以下详细步骤：[http ://www.r-bloggers.com/deploying- desktop-apps-with-r/](http://www.r-bloggers.com/deploying-desktop-apps-with-r/) 。其他选项可能是在 Shiny 服务器上上传应用程序。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-08T17:32:04.517

RStudio！= R

R 有一个简单的命令行界面，您可以通过在 R 安装的 bin 文件夹中运行 R.exe 在 Windows 上运行该界面。

还有 Rscript.exe，它可以运行表达式或脚本文件。例如：

```
C:\Program Files\R\R-2.15.2\bin\RScript -e hist(runif(1000)) 
```

将（给定正确的路径）创建一个带有直方图的 PDF 文件。

所以，

*   你的同事需要安装 R
*   您需要该安装才能使所有软件包闪亮运行
*   或者您在代码中添加一堆 install.packages() 行
*   你需要给他们一个包含闪亮代码的文件夹
*   您添加一个 Windows .BAT 文件供他们单击
*   他们运行它，它调用 Rscript.exe 启动你给他们的闪亮包

或者将它托管在 RStudio 家伙的公共闪亮服务器上，但是我们都可以看到它。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-04-11T13:58:21.297

您现在可以将 RInno 包用于此类事情。要进行设置：

```
install.packages("RInno")
require(RInno)
RInno::install_inno() 
```

然后你只需要调用两个函数来设置一个安装框架：

```
create_app(app_name = "myapp", app_dir = "path/to/myapp")
compile_iss() 
```

如果您想包含 R，请添加`include_R = TRUE`到`create_app`：

```
create_app(app_name = "myapp", app_dir = "path/to/myapp", include_R = TRUE) 
```

它默认包括闪亮、magrittr 和 jsonlite，所以如果您使用其他包，如 ggplot2 或 plotly，只需将它们添加到`pkgs`参数中。您还可以在`remotes`参数中包含 GitHub 包：

```
create_app(
    app_name = "myapp", 
    app_dir  = "path/to/myapp"
    pkgs     = c("shiny", "jsonlite", "magrittr", "plotly", "ggplot2"),
    remotes  = c("talgalili/installr", "daattali/shinyjs")) 
```

如果您对其他功能感兴趣，请查看[FI Labs - RInno](https://www.ficonsulting.com/filabs/RInno)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-09-08T14:54:17.850

我遇到了同样的问题，并使用了以下两种都可以正常工作的解决方案。

## 在 shinyapps.io 上发布应用程序

**优点：**该应用程序可随时随地访问。

**缺点：**每月只有 25 个活跃小时。

**方法：**

1.  转到[https://www.shinyapps.io/](https://www.shinyapps.io/)并创建一个免费帐户
2.  配置 rsconnect 以将 R 与您的新 shinyapps 帐户链接（[shinyapps 文档](http://docs.rstudio.com/shinyapps.io/getting-started.html#CreateAccount)中的逐步说明）
3.  在 Rstudio 中，单击“发布”（运行应用按钮旁边）
4.  从 shinyapps.io 仪表板获取应用程序地址并将其发送给您的同事。

## 在局域网上共享应用程序

**优势：**尽可能多的活动时间。

**缺点：**需要在同一个本地网络上（或使用 VPN）。该应用程序必须在连接到此网络的计算机上持续运行。此外，它一次不能为多个用户执行计算。

**方法：**你需要在你的电脑上运行app并在局域网上共享，通过将runapp命令改为：

```
runApp(host="0.0.0.0",port=5050) 
```

然后可以通过[http://[your-IP-address]:5050](http://[your-IP-address]:5050) 访问该应用程序（参见：[Hosting LAN Shiny apps run from command line](https://stackoverflow.com/questions/34163558/hosting-lan-shiny-apps-run-from-command-line)）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-04-11T21:54:08.103

现在有一种新方法可用于通过“Electron”和“Photon”构建真正独立的 Shiny 应用程序 exe。请参阅以下链接以获取软件包/插件等。

*   [https://www.user2019.fr/static/pres/lt257916.pdf](https://www.user2019.fr/static/pres/lt257916.pdf)
*   [https://www.youtube.com/watch?v=ARrbbviGvjc](https://www.youtube.com/watch?v=ARrbbviGvjc)
*   [将 R Shiny 应用程序部署为独立应用程序](https://stackoverflow.com/questions/33513544/deploying-r-shiny-app-as-a-standalone-application)

也就是说，RStudio 的 shinyapps.io 或 Binder 部署可能是可访问性和开发方面的更好选择。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-09-14T11:27:11.653

下面是一个快速修复。通过 .转到命令行中的项目目录`cd`。然后

```
 R -e "shiny::runApp(port=8000,host = getOption('shiny.host', '10.10.10.10'))" 
```

现在 URL`10.10.10.10:8000`将处于活动状态。

`nohup`可以使用即使在您注销后仍保持 URL 活动。显然，这不是生产环境所需的设置。

```
 nohup R -e "shiny::runApp(port=8000,host = getOption('shiny.host', '10.10.10.10'))" & 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-06-28T10:18:23.923

我知道这是一个非常古老的讨论，但我最近遇到了这个问题，在尝试了几个选项后，我发现使用 shinyshortcut 包是最好的：

```
library(shinyShortcut) shinyShortcut(shinyDirectory = getwd(), OS = .Platform$OS.type, gitIgnore = FALSE) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-26T11:18:26.820

Spacedman 提出的解决方案对我有用。在下文中，我想给出一些实际的例子来说明如何做。

第 1 步。假设您的同事不知道 R 和 RStudio，他们仍然需要在他们的 PC 上安装 R。他们不一定需要 RStudio。

第 2 步。他们需要闪亮库安装闪亮应用程序中的所有库。但是假设他们不知道如何安装它们。

他们必须运行以下 R 代码一次（使用一些示例库）：

```
# collect here all the libraries used by your shiny app
install.packages(c('shiny', 'ggplot2', 'magrittr'), repos='http://cran.us.r-project.org') 
```

如果他们没有安装权限或者他们想在其他地方安装这些额外的库，那么指定它们必须安装的位置：

```
install.packages(c('shiny', 'ggplot2', 'magrittr'), 'E:/some_path/rlib', repos='http://cran.us.r-project.org') 
```

非常懒惰，根本不使用 R，他们可以调用批处理文件。您可以将此 R 行嵌入到名为“installer.R”的代码中，并从名为“installer.bat”的批处理文件中调用它，其中包含以下内容：

```
set RSCRIPT=C:\Programme\R\R-4.1.0\bin\Rscript.exe
set SPATH=C:\Documents\R_codes

call "%RSCRIPT%" "%SPATH%\installer.R" 
```

这是假设他们的当前版本是 R-4.1.0 并且变量`SPATH`指定“installer.R”的位置

现在，我们（几乎）准备好开始闪亮了。

第 3 步。通常，当您从 R-Studio 运行闪亮的应用程序时，您将命令包含`library(shiny)`在闪亮的代码中，然后单击 R-Studio 中的图标按钮“运行应用程序”。但如果没有 R-Studio，您必须加载闪亮，然后使用命令行运行应用程序。对我来说，它通过使用两个 R 代码来工作。首先，我们称它为“loader.R”，其中包含：

```
library(shiny)
runApp('E:/path_to_your_app/myApp.R', launch.browser=TRUE) 
```

第二个是您的应用程序“myApp.R”：

```
library(shiny) # you can uncomment this because already in loader.R but leaving it does not harm

ui <- ...

server <- ...

shinyApp(ui = ui, server = server) 
```

该选项`launch.browser=TRUE`将在浏览器中打开应用程序。默认情况下，Shiny 使用 R-Studio 中的“窗口”选项运行，没有 R-Studio 将无法运行。

假设您已经在路径 E:/some_path/rlib 中安装了必要的库。然后，您必须在 loader.R 代码中指定它`.libPaths`：

```
.libPaths("E:/some_path/rlib")
library(shiny)
runApp('E:/path_to_your_app/myApp.R', launch.browser=TRUE) 
```

第 4 步。创建一个名为“call_siny_app.bat”的批处理文件来调用您的闪亮应用程序。这将包含：

```
set RSCRIPT=C:\Programme\R\R-4.1.0\bin\Rscript.exe
set SPATH=E:\path_to_your_app

call "%RSCRIPT%" "%SPATH%\loader.R" 
```

代码调用“loader.R”（`SPATH`必须指定正确的路径），然后调用“myApp.R”。

您执行从 1 到 4 的步骤，您的同事只需运行 call_siny_app.bat。

# android - Android 异步任务未达到 onPostExecute

> ID：15884976
> 
> 赞同：-2
> 
> 时间：2013-04-08T17:09:31.890
> 
> 标签：android, asynchronous

我有一个使用异步任务来验证登录信息的 android 应用程序。onpostexecute 永远不会到达，我无法将@Override 添加到它以使其运行。当我尝试@Override 时，eclipse 说它必须覆盖超类型的方法。这是代码。

```
public class UserLoginTask extends AsyncTask <LoginObject, Void, Boolean>
{

    @Override
    protected void onPostExecute(Boolean result)
    {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
    }

    @SuppressWarnings("finally")
    @Override
    protected Boolean doInBackground(LoginObject... params)
    {
        // TODO: attempt authentication against a network service.
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://softeng.cs.uwosh.edu/students/cs342g6/login.php");
        Boolean response = false;
        try
        {
            //Convert the login object to XML
            XStream xstream = new XStream(new DomDriver("UTF-8"));
            xstream.alias("Login", LoginObject.class);
            String xml = xstream.toXML(login);

            // Pass the XML as a StringEntity
            StringEntity se = new StringEntity(xml,HTTP.UTF_8);
            se.setContentType("text/xml");
            httppost.setEntity(se);
            System.out.println("MADE IT TO RESPONSE");
            HttpResponse httpresponse = httpclient.execute(httppost);
            HttpEntity resEntity = httpresponse.getEntity();
            String resp = EntityUtils.toString(resEntity);
            System.out.println(resp);
            response = convertToBool(resp);
            if(response)
                System.out.println("true");
            else
                System.out.println("false");
        }
        catch (ClientProtocolException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return response;
    }
}

protected void onPostExecute(Boolean success)
{
    System.out.println("In onPostExecute");
    mAuthTask = null;
    showProgress(false);

    if (success)
    {
        finish();
    }
    else
    {
        mPasswordView
                .setError(getString(R.string.error_incorrect_password));
        mPasswordView.requestFocus();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:10:42.793

你有两个`onPostExecute()`s 删除空的，并确保做某事的那个在 AsyncTask 类中。

```
@Override
protected void onPostExecute(Boolean result)
{
    System.out.println("In onPostExecute");
    mAuthTask = null;
    showProgress(false);

    if (success)
    {
        finish();
    }
    else
    {
        mPasswordView
                .setError(getString(R.string.error_incorrect_password));
        mPasswordView.requestFocus();
    }
} 
```

# f# - 如何判断 F# 函数是否为纯函数？

> ID：15884977
> 
> 赞同：8
> 
> 时间：2013-04-08T17:09:38.180
> 
> 标签：f#, pure-function

假设我有这两个 F# 函数：

```
let sq x = x*x

let tm = DateTime.Now 
```

显然 sq 是纯的，因为它总是为给定的输入返回相同的值，而 tm 是不纯的，因为每次调用它都会返回不同的值。

一般来说，有没有一种方法可以确定 F# 中的特定函数是纯函数还是不纯函数，而无需分析它的作用，换句话说，就是逐行读取它？

或者，有没有办法在编写函数时注释函数以告诉编译器该函数是纯函数还是不纯函数？

最后，当调用作为公共语言运行时一部分的函数（例如 DateTime）时，如何不尝试就判断它是纯函数还是不纯函数？

注意：“纯”是指来自维基百科的定义：[http](http://en.wikipedia.org/wiki/Pure_function) ://en.wikipedia.org/wiki/Pure_function （[永久链接](http://en.wikipedia.org/w/index.php?title=Pure_function&oldid=586945449)）

> 在计算机编程中，如果关于函数的以下两个陈述都成立，则可以将函数描述为纯函数：
> 
> 1.  给定相同的参数值，该函数始终评估相同的结果值。函数结果值不能依赖于任何可能随着程序执行或程序的不同执行而改变的隐藏信息或状态，也不能依赖于来自 I/O 设备的任何外部输入。
>     
>     
> 2.  结果的评估不会导致任何语义上可观察的副作用或输出，例如可变对象的突变或输出到 I/O 设备。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T17:48:01.890

F# 没有提供任何功能和工具来检查方法是否纯，因此一个简单的答案是您必须自己检查此属性。

在 F# 之外，值得注意的是[Code Contracts](http://msdn.microsoft.com/en-us/library/dd264808.aspx)库有一个纯方法的概念（它们可以用 标记[`PureAttribute`](http://msdn.microsoft.com/en-GB/library/system.diagnostics.contracts.pureattribute.aspx)），但我不完全确定那里的检查故事是什么。我认为 Code Contracts 带有分析 IL 的静态检查器（也应该适用于 F#），但这是一项非常艰巨的任务，所以我希望它非常有限。但是，`PureAttribute`在某些 BCL 方法上使用了 ，因此您可以看出某些标准 .NET 方法是纯的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:40:20.160

从技术上讲，您的 'tm' 值不是函数，而是 DateTime 类型的值，并且它是不可变的，因此每次在创建后评估此值时总是相同的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T11:52:23.443

鉴于可以在 f# 中定义纯函数和非纯函数，如果有一种算法可以检查 f# 代码（函数定义）的纯度，我会感到非常惊讶——检查程序代码的语义属性通常无法由 Rice 的定理。

# actionscript-3 - Flash 实例名称

> ID：15884980
> 
> 赞同：0
> 
> 时间：2013-04-08T17:10:11.247
> 
> 标签：actionscript-3, flash

我使用 AS3，我想知道在 for 或 while 循环中是否有创建对象的函数或方法以及实例名称。这是为了创建大约 15 个具有不同实例名称的对象，而不必单独创建每个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T17:28:39.493

```
var s:Sprite;
var i:uint;
for (i = 0; i < 10; i++) {
    s = new Sprite();
    with (s) { // with allows you to access variable directly inside scope
        graphics.beginFill(0xffcc00);
        graphics.drawRect(0, 0, 10, 10);
        graphics.endFill();
        width = 10;
        height = 10;
        x = i * 10;
        y = i * 10;
        name = "sprite"+i; // instance name
    }
    addChild(s);
} 
```

您可以像这样创建任何（显示）对象。如果您想稍后检索其中一个精灵，请使用 getChildByName("instancename") 函数。

# haskell - 在 Haskell 中创建以下列表 [1, 2, [3, 4], [3, [4, 5]]]

> ID：15884984
> 
> 赞同：3
> 
> 时间：2013-04-08T17:10:20.627
> 
> 标签：haskell, nested-lists

我正在尝试制作一个包含子列表的列表，例如`[1, 2, [3, 4], [3, [4, 5]]]`.

看来我应该定义一个新类型。我试过：

```
data NestedList a = Int a | List [NestedList a] 
```

但我认为它错了，或者我不知道如何使用它。我对 Haskell 很陌生，我不确定这个表达式的含义。

这是否意味着它正在创建一个`Int`带有参数的“类型”和一个带有参数的`a`“类型” ？`List``[NestedList a]`

上面的`data`表达式取自[Haskell 99 题](https://wiki.haskell.org/99_questions/1_to_10)第 7题的[解法](https://wiki.haskell.org/99_questions/Solutions/7)

> (**) 展平嵌套列表结构。
> 
> ```
> data NestedList a = Elem a | List [NestedList a]
> 
> flatten :: NestedList a -> [a]
> flatten (Elem x) = [x]
> flatten (List x) = concatMap flatten x 
> ```

但是当我打电话时`flatten [[1,2], 3]`，`ghci`我得到了错误

```
couldn't match expected type 'NestedList a0' with actual type '[t0]' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T17:28:40.563

你不能打电话`flatten [[1,2],3]`，因为你的 flatten 应该采用一个`NestedList a`，而不是一个嵌套的普通列表，这在 Haskell 中甚至是不允许的。

你的电话应该是这样的

```
flatten (List [Elem 3, List [Elem 2, Elem 4], Elem 5]) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-08T19:22:49.400

这是一个旁注，我无法发表评论。这并不能直接回答您的问题，但我认为您可能会发现它很有用。

您的类型与 a 相同`Forest`。请参阅包`Data.Tree`中的内容，它为您[实现了这种类型](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/Data-Tree.html#t:Forest)。`containers`

它甚至包括一个`flatten`功能：

```
flatten :: Tree a -> [a] 
```

...您也可以通过以下方式为 a`Forest`工作`concatMap`：

```
concatMap flatten :: Forest a -> [a] 
```

# c++ - 如何使用 boost::allocate_shared 指定分配器？

> ID：15884990
> 
> 赞同：0
> 
> 时间：2013-04-08T17:10:43.577
> 
> 标签：c++, performance, memory

我正在尝试通过使用 allocate_shared 来提高 boost::shared_ptr 的性能。问题是我不确定应该将哪种分配器准确传递给 boost::allocate_shared。

我有以下内容：

```
struct MagicalData {...};

// My simple allocator example 
template <typename T>
class MyAlloc
{
 public:

typedef T                 value_type;
typedef value_type*       pointer;
typedef const value_type* const_pointer;
typedef value_type&       reference;
typedef const value_type& const_reference;
typedef std::size_t       size_type;
typedef std::ptrdiff_t    difference_type;

template<typename U>
struct rebind {
    typedef MyAlloc<U> other;
};  

pointer allocate(size_type n, const_pointer = 0) {
    void* p = std::malloc(n * sizeof(T));
    if (!p)
      throw std::bad_alloc();
    return static_cast<pointer>(p);
}   

void deallocate(pointer p, size_type) {
    std::free(p);
}   

size_type max_size() const { 
    return static_cast<size_type>(-1) / sizeof(value_type);
}   
}; 
```

MyAlloc 分配；

```
// Compilation error
boost::shared_ptr<MagicalData> magicalData 
       = boost::allocate_shared<MagicalData>(alloc, j); 
```

我在这里得到令人费解的编译错误：

`/usr/include/boost-1_51/boost/smart_ptr/detail/shared_count.hpp:239:18: error: no matching function for call to ‘MyAlloc<boost::detail::sp_counted_impl_pda<MagicalData*, boost::detail::sp_ms_deleter<MagicalData>, MyAlloc<MagicalData> > >::MyAlloc(MyAlloc<MagicalData>&)'`

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:05:15.200

看来我错过了这个。来自 wiki：分配器应该是可复制构造的。T 类型对象的分配器可以从 U 类型对象的分配器构造。如果分配器 A 分配内存区域 R，则 R 只能由比较等于 A 的分配器释放。 [11 ]

# r - 将“模型”带出地球

> ID：15884991
> 
> 赞同：4
> 
> 时间：2013-04-08T17:10:46.020
> 
> 标签：r

对不起这个糟糕的标题。不知道我应该如何表达它。

我正在玩 Earth 包，以了解使用或多或少的标准指标回归神经网络信号。数据文件有 1000 行，目前有 187 列（186 个指标结果），我的目标变量在最后一列。我编写的代码非常简单，暂时忽略了任何样本内与样本外的问题，但至少它似乎可以正常工作：

```
library(earth)
MyData = read.csv("C:\\Users\\TSIT\\\\GS-Pass12.csv",header=TRUE)
x=data.frame(MyData[,1:ncol(MyData)-1])
y=MyData[,ncol(MyData)]

a = earth(x,y,nprune=5)
summary(a, digits = 2, style = "pmax") 
```

summary 的输出看起来很合理：

```
summary(a, digits = 2, style = "pmax")
Call: earth(x=x, y=y, nprune=5)

y =  1.2
  - 31 * pmax(0, Percent.Difference.from.Moving.Average..C..10\. -   0.096)    
  + 10 * pmax(0, 0.096 - Percent.Difference.from.Moving.Average..C..10.)    
  + 25 * pmax(0, Percent.Difference.from.Moving.Average..C..15\. -  0.14) 
  - 16 * pmax(0,  0.14 - Percent.Difference.from.Moving.Average..C..15.) 

Selected 5 of 116 terms, and 2 of 185 predictors  Importance:
Percent.Difference.from.Moving.Average..C..15.,
Value.Oscillator..C..8..26..1.-unused, ... Number of terms at each
degree of interaction: 1 4 (additive model) GCV 0.083    RSS 239   
GRSq 0.66    RSq 0.66 
```

我现在正在努力解决的问题是如何将结果模型 (y) 从 a 中取出并放入某种 R 变量中，以便我可以使用它。有人可以在这里指出我正确的方向吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T01:24:09.213

`format()`可以使用该功能：

```
R> library(earth)
R> example(earth)
[... stuff omitted ...]
R> cat(format(a), "\n")
  27.2459
  +  6.17669 * h(Girth-14)
  -  3.26623 * h(14-Girth)
  + 0.491207 * h(Height-72)
R> 
```

还有其他格式：

```
R> cat(format(a, style="pmax"), "\n")
  27.2459
  +  6.17669 * pmax(0,  Girth -     14) 
  -  3.26623 * pmax(0,     14 -  Girth) 
  + 0.491207 * pmax(0, Height -     72) 

R> cat(format(a, style="bf"), "\n")
  27.2459
  +  6.17669 * bf1
  -  3.26623 * bf2
  + 0.491207 * bf3

   bf1  h(Girth-14)
   bf2  h(14-Girth)
   bf3  h(Height-72)

R> 
```

# javascript - Javascript：数据可以通过 iframe 双向传递吗？

> ID：15884994
> 
> 赞同：2
> 
> 时间：2013-04-08T17:11:09.947
> 
> 标签：javascript, wordpress, dom, web-applications, iframe

对于任何了解它的人来说，这一切都与 WordPress“主题定制器”有关，尽管没有必要回答这个问题。

基本上，我有一个页面（在 PHP 中），其中包含一个左侧的设置“窗格”，这些设置适用于 iframe 的内容，它是屏幕的右侧部分。

从概念上讲，我希望使用[jQuery 可拖动](http://jqueryui.com/draggable/)`background-position`来使主背景图像的 CSS可通过可拖动功能进行调整。我需要`draggable()`在`customize.php`页面上申请，将脚本排入队列，然后在 iframe 中操作 DOM。它需要在容器/父级别完成，因为在该级别有一个设置将更新 X 和 Y 坐标并将它们保存在存储在那里的设置中。

我认为我需要的可能是不可能的，但我想知道是否可以使用 javascript 执行以下**两项**操作：

1.  获取 iframe 的内容
2.  **操作iframe 内**的 DOM ，通过调整背景图像`draggable()`并将`background-position`坐标存储为数据属性，然后将它们保存到适当的设置输入字段。

根据我的经验，从“父”/容器级别操作 iframe 内的 DOM 是很困难的，我想知道是否有一些我不知道的东西，这绝对是不可能的，或者有一些解决方法？（请注意，原始域是相同的，所以不会有任何跨域 iframe 问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:23:00.267

这是我的父 iframe 通信测试实现的简化代码。我添加了一些示例如何使用它。但我必须注意它不在我的实验室部分，我目前没有时间检查它是否完全跨浏览器兼容。但如果不是，则只需要做一些小的更改。（**编辑**在当前的 chrome、ff 和 IE 6-9 中测试）

我希望这能帮助你解决问题。但是我现在不能保证它会完美地工作（但我很确定）。

**父母的代码**

```
<!doctype html>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>index</title>
    <script src="jquery.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript" charset="utf-8">

    (function($, window, undefined) {

        var iframe;

        // the connector object the will be passed to the iframe and will be used as "API"
        var parentConnector = {
            _window   : window, // a reference to the parents window (not really necessary but nice to have)
            $ : $,              // a reference to the parents jQuery that can be accessed from the iframe (use with caution)

            // here you will define you "API" for the parent (the functions you want to call from the iframe )
            setElementValue : function(selector, value ) {
                $(selector).val(value);
            }

        }

        // this function is called by the iframe to register the iframe in the parent
        window.registerIFrame = function( iframeHelper ) {
            //if you have multible iframe in the parent you could change the code here to store them in e.g. an arrray or with a key in an object
            iframe = iframeHelper;

            // register the parent in the iframe
            iframe.registerParent(parentConnector);
        }

        $(document).on("click",".slideUp",function(event) {
            event.preventDefault();

            /*
            call a function on the helper object, this is the savest way for the commincation because
            there is it minimizes the risk to mix the differnt context
            */
            iframe.slideUp();

            /*
            This way would work at least in chrome, with the current version with jquery, but it relays the jQuery implementation
            that the correct document is used.
            */
            iframe.$(".info-from-parent").val("slideUp");

            /*
            One thing you should NEVER do is the following:

            iframe.$(".info-from-parent").append( $("<div></div>") );

            The reason you should not do this is because this mixes DOMElements of different context.
            This will result in unexpected crashes/bahaviors in some browsers (but could work in others, or at least it will look like it would work)
            */

        });

        // same as the slide down, it is just there to have some interaction sample
        $(document).on("click",".slideDown",function(event) {
            event.preventDefault();
            iframe.slideDown();
            iframe.$(".info-from-parent").val("slideDown");
        });

    })(jQuery, window);

    </script>
</head>
<body>
    <input type="text" class="info-from-iframe"><br>
    <a href="#" class="slideUp">slideUp</a> <a href="#" class="slideDown">slideDown</a><br>
    <iframe src="iframe.html"></iframe>

</body>
</html> 
```

**iframe 的代码**

```
<!doctype html>
<html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>iframe</title>
    <script src="jquery.js" type="text/javascript" charset="utf-8"></script>
    <script>

    (function($,window,undefined) {

        //the connector object the will be passed to the parent and will be used as "API"
        var iframeConnector = {

            _window : window,     // a reference to the iframes window (not really necessary but nice to have)
            _parent : undefined,
            $ : $,                // a reference to the iframes jQuery that can be accessed from the parent (use with caution)

            // this function is called by the parent to register the parent in the iframe
            registerParent : function( parent ) {
                this._parent = parent;
            },

            /* here you will define you "API" for the iframe (the functions you want to call from the parent )*/
            slideUp : function() {
                $(".test").slideUp();
            },

            slideDown : function() {

                $(".test").slideDown();
            },

            setElementValue : function(selector, value ) {
                $(selector).val(value);
            }

        };

        // register the iframe in the parent
        window.parent.registerIFrame(iframeConnector); 

        $(document).mousemove(function(event) {
            //use the parents "API" to call a function in the parent
            iframeConnector._parent.setElementValue(".info-from-iframe", event.clientX+", "+event.clientY);
        });

    })(jQuery,window);

    </script>
</head>
<body>
    <input type="text" class="info-from-parent"><br>
    <div class="test">
        iframe
    </div>
</body>
</html> 
```