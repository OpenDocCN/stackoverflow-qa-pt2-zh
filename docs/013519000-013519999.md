# StackOverflow 问答 13519000-13519999

# ruby - 红宝石：改变的方式 可见性，避免 JavaScript

> ID：13519001
> 
> 赞同：1
> 
> 时间：2012-11-22T19:29:32.860
> 
> 标签：ruby, sinatra, haml, sass

我正在寻找一种改变 HTML div 可见性的好方法。

可能最常见的方法是使用 JavaScript，因为它可以操作我的 DOM。在我目前的项目中，我不喜欢使用任何 JavaScript，所以这是我的问题：

有没有其他方法可以通过使用 Ruby 或 Sass 等技术来解决这个问题？

我在我的项目中使用**Ruby** + **Sinatra**框架，以及**Haml**和**Sass**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:58:09.843

我不确定 HAML 语法。以下是否适合您的需要？

```
- if hide_div?
  %div {:style=> "display:none;"}
- else
  %div {:style=> "display:block;"}
- end 
```

# ruby-on-rails - Rails 500 错误日志：autoupdate.php 和 phpMyAdmin 不存在

> ID：13519002
> 
> 赞同：1
> 
> 时间：2012-11-22T19:29:38.193
> 
> 标签：ruby-on-rails, apache, ubuntu, passenger

我收到 Rails 500 错误。检查它说的错误日志：

autoupdate.php 不存在... phpmyadmin 不存在...

服务器设置：

*   Ubuntu 12.04 LTS
*   阿帕奇
*   Phusion乘客
*   Mysql（但我在这个应用程序中没有使用数据库）

该应用程序正在生产中运行。有人知道这个问题吗？

# apache - URL 编码和谷歌 %3F 和 %3D

> ID：13519003
> 
> 赞同：0
> 
> 时间：2012-11-22T19:29:40.483
> 
> 标签：apache, url, uri

任何人都可以帮助解决这个问题。

我在 Adsense 中收到消息，谷歌获得超过 10K 页面的“页面未找到”:)（是的，它是一个大网站）。

有问题的 url 有 at 和 %3F 和 %3D。如何解决这个问题，因为这是我的大量网址的问题......而且他们看到的都是：

[http://mysite.com/some-perma-links?full=1](http://mysite.com/some-perma-links?full=1)

附言。我知道这是问题？和 = 但如何在 Apache 或所有 url 的 .htaccess 上解决这个问题？

我有专用服务器，所以我可以修复 Apache 或 htaccess

# python - PYTHON 中的希腊语编码

> ID：13519004
> 
> 赞同：4
> 
> 时间：2012-11-22T19:29:40.660
> 
> 标签：python, encoding

我正在尝试存储一个字符串，并在 python 中使用 nltk 对其进行标记后。但我不明白为什么在对其进行标记后（它创建一个列表）我看不到列表中的字符串..任何人都可以帮助我吗？

这是代码：

```
#a="Γεια σου"
#b=nltk.word_tokenize(a)
#b
['\xc3\xe5\xe9\xe1', '\xf3\xef\xf5'] 
```

我只是希望能够定期看到列表的内容..

提前谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T19:35:18.480

您正在使用 Python 2，其中不带前缀的引号表示一个*字节*，而不是一个*字符串*（如果您不确定它们的区别，[请阅读此](http://www.joelonsoftware.com/articles/Unicode.html)内容）。切换到已修复此问题的 Python 3，或者为所有字符串添加前缀`u`并打印字符串（而不是显示它们`repr`，这在 Python 2.x 中有所不同）：

```
>>> import nltk
>>> a = u'Γεια σου'
>>> b = nltk.word_tokenize(a)
>>> print(u'\n'.join(b))
Γεια
σου 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:34:46.453

你可以看到字符串。由于您的终端编码设置，字符由转义序列表示。将您的终端配置为接受输入并以 UTF-8 显示输出。

# android - 是否可以从屏幕上移除（滑出）视图？安卓

> ID：13519009
> 
> 赞同：1
> 
> 时间：2012-11-22T19:30:27.413
> 
> 标签：android, android-layout, user-interface

是否可以从屏幕上删除视图？安卓

例如我有一些布局，其中包含 3 个布局；

```
layout_1 layout_2 layout_3 
```

是否可以单击 layout_1，并将其从屏幕上移开，您将收到可见的

```
layout_2 layout_3 
```

提前致谢。

**upd：**问题是，我需要顺利滑出这个视图。看起来像 Facebook 中的侧边栏。但另一件事是，删除 layout_1 后的其他两个布局应该被拉伸以适应父布局。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T19:33:41.273

给视图设置一个id。

然后做

```
(LinearLayout) linLayout = (LinearLayout) findViewById(R.id.layout_1);
linLayout.setVisibility(View.GONE); 
```

（将其转换为任何类型。）

或者直接使用：

```
findViewById(R.id.layout_1).setVisibility(View.GONE); 
```

**编辑：**根据您的新信息和我评论的问题/答案：

```
(LinearLayout) linLayout = (LinearLayout) findViewById(R.id.layout_1);
Animation animation = new TranslateAnimation(0, 500,0, 0); //May need to check the direction you want.
animation.setDuration(1000);
animation.setFillAfter(true);
linLayout.startAnimation(animation);
linLayout.setVisibility(View.GONE); 
```

如果您希望其他两个也逐渐占用空间，您可能需要更高级的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:33:19.513

是的，只需使用[`removeView()`](http://developer.android.com/reference/android/view/ViewGroup.html#removeView%28android.view.View%29).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T19:33:07.950

我假设您想要完全改变页面的视图和功能。在这种情况下，您应该要么开始一个新活动，要么查看片段和片段管理器。

**编辑**

好的，如果您将不同的视图作为 3 个不同的片段，您可以使用片段管理器来膨胀和删除它们，就像这样

```
FragmentTransaction ft_main = getFragmentManager().beginTransaction();
//note the following line sets the fragment Tag to "layout_1_fragment" you can
//use this to retrive and dismiss it later
ft_main.replace(R.id.WhateverViewYoureInflatingInto, new Layout_1_Fragment(), "layout_1_fragment");
ft_main.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
ft_main.commit(); 
```

要删除片段，请执行以下操作：

```
FragmentTransaction ft_main = getFragmentManager().beginTransaction();
ft_main.remove(getFragmentManager().findFragmentByTag("layout_1_fragment"));
ft_main.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
ft_main.commit(); 
```

使用此代码，您可以从屏幕上动态膨胀和删除片段。

注意：当你删除它时，片段并没有被破坏，所以如果你想重新附加片段，我建议检查一下

```
getFragmentManager().findFragmentByTag("layout_1_fragment") == null 
```

如果不重用现有的片段

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T19:33:25.373

使用`OnClickListener`和`View.setVisibility(int)`。

# php - 检查网络主机是否支持 XSLT 样式表转换的方法？

> ID：13519019
> 
> 赞同：0
> 
> 时间：2012-11-22T19:31:42.873
> 
> 标签：php, xslt

我有一个使用 xslt 样式表的网页，但它似乎无法正常工作。我已将所有文件从我以前的 Web 服务器（工作）移动到一个新的，但它不起作用。

我的问题：有没有一种简单的方法来检查是否有 XSLT 支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:38:29.397

索引.php

```
<?php
    phpinfo(); 
```

在浏览器中打开，搜索 XSLT

或者

`php -i | grep xslt`在命令行中

# symfony - symfony2 将隐藏字段与其哈希值与表单验证进行比较

> ID：13519021
> 
> 赞同：2
> 
> 时间：2012-11-22T19:32:40.600
> 
> 标签：symfony, validation, custom-validators

我想知道如何将 symfony2 表单中的字段与自定义验证进行比较。特别是我想将一个简单的隐藏字段与其哈希值进行比较。

```
<input type="hidden" name="smoke" value="1" />
<input type="hidden" name="smoke_hash" value="kahsjkdasjkdh3iuy84932798" /> 
```

类似于“重复字段”的东西，但用我自己的逻辑进行了验证。

但更多的是这样的：

```
use Symfony\Component\Validator\Constraints\HashMatchString;

$builder
    ->add('smoke', 'hidden', array(
            'data' => 1,
        )
    )
    ->add('smoke_hash', 'hidden', array(
            'constraints' => array(
                new HashMatchString('smoke')
            ),
        )
    )
; 
```

[在 Symfony 2.1 中形成善良](http://symfony.com/blog/form-goodness-in-symfony-2-1)

我已经看到了 Steven Brown (http://www.yewchube.com/2011/08/symfony-2-field-comparison-validator/) 的解决方案，但在一年前对核心文件进行了多次接触......

**解决** 了我创建了一个要点：[要点](https://gist.github.com/4133261)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:18:41.853

只需将验证方法添加到您的实体[http://symfony.com/doc/current/book/validation.html#getters](http://symfony.com/doc/current/book/validation.html#getters)

# visual-studio-2012 - 发布路径太长

> ID：13519025
> 
> 赞同：1
> 
> 时间：2012-11-22T19:33:06.733
> 
> 标签：visual-studio-2012, publishing

我有一个无法发布的外部库`fckEditor`，因为显然路径名恰好比`260`字符长。我该如何解决这个问题？

**编辑：**这是一个视觉工作室问题，而不是我提到的库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T00:17:55.267

**在发布选项之前**删除删除所有文件解决了我的问题。

# python - Python Dijkstra k 最短路径

> ID：13519030
> 
> 赞同：12
> 
> 时间：2012-11-22T19:33:13.237
> 
> 标签：python, algorithm, graph, graph-algorithm, dijkstra

我正在尝试制作一个小型公共交通路线应用程序。

我的数据以以下结构表示：

```
graph = {'A': {'B':3, 'C':5},
     'B': {'C':2, 'D':2},
     'C': {'D':1},
     'D': {'C':3},
     'E': {'F':8},
     'F': {'C':2}} 
```

在哪里：

1.  图 dict 键是一个节点
2.  subdict 键是 2 个节点之间的一条边
3.  subdict 值是边缘权重

我正在使用这里描述的 find_shortest_path 算法[https://www.python.org/doc/essays/graphs/](https://www.python.org/doc/essays/graphs/)但由于递归而相当慢并且不支持权重。

所以我转向大卫爱泼斯坦描述的算法[http://code.activestate.com/recipes/119466-dijkstras-algorithm-for-shortest-paths/](http://code.activestate.com/recipes/119466-dijkstras-algorithm-for-shortest-paths/)（甚至更好的实现可以在评论中找到使用堆）

它工作得很好，真的很快，但我只得到最好的路线，而不是所有可能路线的列表。这就是我坚持的地方。

有人可以帮我解决这个问题，或者至少给一个方向吗？我在图最短路径算法方面不是很好。

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T03:34:34.237

毫无疑问，图中会有大量的最短路径。因此很难在满足时间复杂度的情况下生成所有最短路径。但是我可以给你一个简单的方法，可以得到尽可能多的最短路径。

## 算法

1.  从起点运行 Dijkstra 算法，得到 disS[i] 列表（起点到点 i 的最短距离）。然后从终点运行 Dijkstra 算法，得到 disT[i] 列表（终点到点 i 的最短距离）
2.  制作一个新图：对于原图中的一条边，如果 disS[a] + disT[b] + w(a, b) == disS[endpoint]，我们在新图中添加一条边。很明显，新图是一个 DAG（有向无环图），并且有一个 sink（起点）和一个 target（终点）。从接收器到目标的任何路径都是原始图中的最短路径。
3.  您可以在新图表中运行 DFS。在递归和回溯中保存路径信息，任何时候到达目标，保存的信息都是一条最短路径。算法何时结束完全取决于您。

## 伪代码：</h2>

```
def find_one_shortest_path(graph, now, target, path_info):
    if now == target:
        print path_info
        return
    for each neighbor_point of graph[now]:
        path_info.append(neighbor_point) 
        find_one_shortest_path(graph, neighbor_point, target, path_info) #recursion
        path_info.pop(-1) #backtracking

def all_shortest_paths(graph, starting_point, ending_point):
    disS = [] # shortest path from S
    disT = [] # shortest path from T
    new_graph = []
    disS = Dijkstra(graph, starting_point)
    disT = Dijkstra(graph, endinng_point)
    for each edge<a, b> in graph:
        if disS[a] + w<a, b> + disT[b] == disS[ending_point]:
            new_graph.add(<a, b>)
    find_one_shortest_path(new_graph, starting_point, ending_point, []) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T19:50:03.263

Networkx 具有执行此操作的功能[all_shortest_paths](http://networkx.github.io/documentation/networkx-1.8.1/reference/generated/networkx.algorithms.shortest_paths.generic.all_shortest_paths.html)。

它返回所有最短路径的生成器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T21:13:19.220

我在交通网络分析中遇到过类似的问题。我使用了优秀的 python 模块 NetworkX。它具有生成两个节点之间的所有简单路径的功能。链接在这里：

[http://networkx.lanl.gov/reference/generated/networkx.algorithms.simple_paths.all_simple_paths.html](http://networkx.lanl.gov/reference/generated/networkx.algorithms.simple_paths.all_simple_paths.html)

# mysql - MySQL sum 列并将其与给定值进行比较

> ID：13519035
> 
> 赞同：1
> 
> 时间：2012-11-22T19:33:36.163
> 
> 标签：mysql, string, compare, sum

我需要从数据库中显示一组可用房间的结果，其中条件是：

1.  alm_num = 1
2.  alm_date 2012 年 11 月 26 日至 29 日之间
3.  和 sum_num > or = 3

然后我像这样编写mySQL：

```
select sum(villas_allotment.alm_num) as sum_num, 
villas_allotment.alm_id as aid, villas_db.v_name as vname  
from villas_allotment 
inner join villas_db on villas_allotment.alm_vid=villas_db.v_id 
where alm_num='1' 
and alm_date between '2012-11-26' and '2012-11-29' 
and alm_vid='3' 
and sum_num>='3' 
```

但我有：

```
#1054 - Unknown column 'sum_num' in 'where clause' 
```

那么你们能否建议我如何从这个错误中生存下来。问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T19:36:05.133

您需要`HAVING`在聚合列上使用 for 条件：

```
select
    sum(villas_allotment.alm_num) as sum_num, 
    villas_allotment.alm_id as aid,
    villas_db.v_name as vname  
from villas_allotment 
inner join villas_db on villas_allotment.alm_vid = villas_db.v_id 
where alm_num = '1' 
and alm_date between '2012-11-26' and '2012-11-29' 
and alm_vid = '3' 
group by villas_allotment.alm_id, villas_db.v_name
having sum(villas_allotment.alm_num) >= 3 
```

您还需要`group by`关于非聚合列的子句，我为您添加了该子句。

# c# - 尝试捕获验证空文本框

> ID：13519036
> 
> 赞同：3
> 
> 时间：2012-11-22T19:33:38.433
> 
> 标签：c#, validation, try-catch

嘿，所以我有以下代码，如果文本框为空，它应该会抛出错误，但它不会继续执行如果它们不这样做，而是将带有 0 或其他内容的项目添加到列表中，是我的代码有问题吗？

```
private void BtnAdd_Click(object sender, EventArgs e)
    {
        try
        {
            theVisit.name = txtName.Text;
            theVisit.address = txtAddress.Text;
            theVisit.arrival = DateTime.Parse(txtArrival.Text);
            //Update theVisit object to reflect any changes made by the user

            this.Hide();
            //Hide the form
        }
        catch (Exception)
        {
            if (txtName.Text == "")
                MessageBox.Show("please enter a customer name");

            if(txtAddress.Text == "") 
                MessageBox.Show("Please enter a customer address");

            if(txtArrival.Text == "")
                MessageBox.Show("Please enter an arrival time");
        } 
```

新的

```
if (txtName.Text == "" || txtAddress.Text == "" || txtArrival.Text == "")
            MessageBox.Show(" Please enter a value into all boxes");
        else
        theVisit.name = txtName.Text;
        theVisit.address = txtAddress.Text;
        theVisit.arrival = DateTime.Parse(txtArrival.Text);
        //Update theVisit object to reflect any changes made by the user 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T20:19:54.960

try-catch-statement 用于捕获和处理异常。如果索引超出范围、访问设置为 null 的变量的成员以及在许多其他情况下，可能会引发异常。为`TextBox`空本身并不是错误，也不会引发异常。

我建议您使用完全不同的方法。`ErrorProvider`在您的表单中添加一个。您可以在“组件”部分的工具箱中找到它。现在您可以将以下代码添加到表单中：

```
private HashSet<Control> errorControls = new HashSet<Control>();

private void ValidateTextBox(object sender, EventArgs e)
{
    var textBox = sender as TextBox;
    if (textBox.Text == "") {
        errorProvider1.SetError(textBox, (string)textBox.Tag);
        errorControls.Add(textBox);
    } else {
        errorProvider1.SetError(textBox, null);
        errorControls.Remove(textBox);
    }
    btnAdd.Enabled = errorControls.Count == 0;
}

private void Form1_Load(object sender, EventArgs e)
{
    txtName.Tag = "Please enter a customer name";
    txtAddress.Tag = "Please enter a customer address";
    errorProvider1.BlinkStyle = ErrorBlinkStyle.NeverBlink;

    ValidateTextBox(txtName, EventArgs.Empty);
    ValidateTextBox(txtAddress, EventArgs.Empty);
} 
```

选择`ValidateTextBox`方法作为`TextChanged`所有文本框事件的错误处理程序。`Tag`在文本框的属性中插入所需的消息。将 的`BlinkStyle`属性设置`ErrorProvider`为`ErrorBlinkStyle.NeverBlink`。您可以在代码或表单设计器中进行这些设置。

现在，空文本框旁边会出现一个红色错误符号。如果将鼠标悬停在它们上方，则会出现带有错误消息的工具提示。

* * *

**更新**

我更新了上面的代码以自动禁用或启用“添加”按钮。因此，我添加了一个`HashSet`包含当前处于错误状态的所有控件。如果该集合为空，则启用该按钮，否则禁用该按钮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T19:43:11.857

由于性能下降，您应该始终尽可能避免 try catch，请参见下面的示例：

```
 //set name
        if(string.IsNullOrEmpty(txtName.Text)) MessageBox.Show("please enter a customer name");
        else theVisit.name = txtName.Text;

        //set address
        if(string.IsNullOrEmpty(txtAddress.Text)) MessageBox.Show("please enter a customer address");
        else theVisit.address = txtAddress.Text;

        //set arrival time
        if(string.IsNullOrEmpty(txtArrival.Text)) MessageBox.Show("please enter an arrival time");
        else {

            DateTime dt = default(DateTime);
            bool successParse = DateTime.TryParse(txtArrival.Text, out dt);

            if(!successParse) MessageBox.Show("please enter a valid arrival time");
            else theVisit.arrival = dt;

        } 
```

# ajax - JSON.parse：带有简单 php 的意外字符

> ID：13519039
> 
> 赞同：0
> 
> 时间：2012-11-22T19:33:43.630
> 
> 标签：ajax, json

谁能告诉我为什么这段 javascript 代码

```
result=JSON.parse(result);
alert("errori :"+result); 
```

当返回 JSON 的 php 页面是这个时，给我一个错误

```
<?php
$var="a";
$var2="b";
echo json_encode(array("1"=>$var,"2"=>$var2));
die;
?> 
```

? 错误是：“JSON.parse：意外字符。”

# java - 将Java编写的.jar导入Android，noClassDefFoundError

> ID：13519041
> 
> 赞同：2
> 
> 时间：2012-11-22T19:33:55.750
> 
> 标签：java, android, noclassdeffounderror

我正在开发一个基于 android 的小型项目（我对系统很陌生）。当我在 Android 模拟器上运行代码时，它崩溃了，我得到了`noClassDefFoundError`. 我尝试导入的 .jar 是一个非常简单的类，编写为 Java 项目。错误不是 Android 依赖项或“lib/libs”。

.jars（我从 dropboxAPI 导入）工作得很好（在获得依赖关系之后），但同样的修复不适用于我的 .jar。

有谁知道我做错了什么？

```
// S verker

[2012-11-22 20:25:58 - DropDoList] Android Launch!
[2012-11-22 20:25:58 - DropDoList] adb is running normally.
[2012-11-22 20:25:58 - DropDoList] Performing com.example.dropdolist.DropDoList activity launch
[2012-11-22 20:25:58 - DropDoList] Automatic Target Mode: using existing emulator    'emulator-5554' running compatible AVD 'Galaxy2v3'
[2012-11-22 20:25:58 - DropDoList] WARNING: Application does not specify an API level requirement!
[2012-11-22 20:25:58 - DropDoList] Device API version is 16 (Android 4.1.2)
[2012-11-22 20:25:58 - DropDoList] Uploading DropDoList.apk onto device 'emulator-5554'
[2012-11-22 20:26:02 - DropDoList] Installing DropDoList.apk...
[2012-11-22 20:26:11 - DropDoList] Success!
[2012-11-22 20:26:11 - DropDoList] Starting activity com.example.dropdolist.DropDoList on device emulator-5554
[2012-11-22 20:26:12 - DropDoList] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER]  cmp=com.example.dropdolist/.DropDoList }
[2012-11-22 20:41:10 - DropDoList] Dx 
trouble processing:
[2012-11-22 20:41:10 - DropDoList] Dx bad class file magic (cafebabe) or version (0033.0000)
...while parsing Tester/Transaction.class
...while processing Tester/Transaction.class
[2012-11-22 20:41:10 - DropDoList] Dx 
trouble processing:
[2012-11-22 20:41:10 - DropDoList] Dx bad class file magic (cafebabe) or version (0033.0000)
...while parsing test/Tester.class
...while processing test/Tester.class
[2012-11-22 20:41:10 - DropDoList] Dx 2 warnings 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:57:46.453

您将获得`Dx bad class file magic (cafebabe) or version`两门课程。此错误不会停止构建过程。相反，它会默默地从最终编译的 apk 中排除这些文件。

如果您使用（比如说）Java 5 并且您使用的是使用 Java 6 编译的 JAR，您将收到此错误。

最简单的解决方法是将您的 Java 版本升级到 JAR 使用的版本。`Project -> Properties -> Java Compiler`您可以通过转到并选中该`Enable project specific settings`框并更改`Compiler compliance level:`值来更改用于构建的版本。

Android 工具不能很好地与 Java 7 配合使用，并且`@Override`在使用 Java 5 时会出现大量错误，因此我建议使用 Java 6（在编译器合规性下拉列表中为 1.6）。如果它不存在，您可能需要重新安装它。

# emacs - Intellij Idea 中的 ido-mode 等价物

> ID：13519043
> 
> 赞同：0
> 
> 时间：2012-11-22T19:33:59.823
> 
> 标签：emacs, intellij-idea, ido

作为 Emacs 用户，我最近转而使用 IntelliJ Idea 进行 Java 开发。我喜欢 Emacs 的一件事是 ido-mode，您可以在其中键入 Cx b 并获取要在其之间切换的缓冲区列表。有谁知道 IntelliJ 中是否有这个或类似的功能？我在 IntelliJ 中使用 Emacs 键集，我知道 Cx p/n 可以在文件之间切换，但我希望能够只输入我正在寻找的文件的前几个字母，并且有该文件打开进行编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:39:27.300

不确定默认的键盘映射是什么，但您可以配置它们（首选项 -> 键盘映射） - 听起来您正在寻找“转到 -> 文件”。还有我觉得非常有用的“最近的文件”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:45:33.540

如果我理解正确（不是 Emacs 用户）：

`Control + N`在 PC 或`Command + N`Mac 上将打开特定类所在的文件。您必须提供所需类的名称。

`Shift + Control + N`在 PC 或`Shift + Command + N`Mac 上将打开当前项目路径中的*任何*文件。

# css - 可以在 Awesomium 中覆盖 CSS 设备宽度吗？

> ID：13519045
> 
> 赞同：2
> 
> 时间：2012-11-22T19:34:04.020
> 
> 标签：css, mobile, awesomium

这是一个特定于 awesomium 的问题。我正在尝试制作一些用于测试目的的网站截图。我需要能够模拟移动设备，例如 iPhone 或 Android 设备。为此，Awesomium 很棒，但我需要能够设置设备宽度以用于 CSS 媒体查询。例如：

```
<link media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" rel="stylesheet" /> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-25T06:00:10.577

对的，这是可能的。

不幸的是，Awesomium 有一个讨厌的错误。现在仍然没有在 Awesomium 1.7.3.0 上修复。

如果 HTML 标记具有属性，页面将无法处理媒体查询：

```
<html lang="ru-RU"> 
```

但是您删除属性，它应该可以正常工作：

```
<html> 
```

# java - 春季如何处理400,404,500,501等？

> ID：13519048
> 
> 赞同：0
> 
> 时间：2012-11-22T19:34:24.800
> 
> 标签：java, spring, model-view-controller, jakarta-ee

如何处理 400,404,500,501 等，`BaseController`所有子控制器都可以在 spring 中扩展。

我需要一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:08:19.690

这个是独立于spring的，可以在web.xml中定义，看看[如何在web.xml中指定默认错误页面？](https://stackoverflow.com/questions/7066192/specify-the-default-error-page-in-web-xml-in-servlet)

# caching - Web 应用程序的缓存中应该存储什么？

> ID：13519049
> 
> 赞同：7
> 
> 时间：2012-11-22T19:34:38.997
> 
> 标签：caching, web-applications, optimization, memcached, azure-caching

我意识到这可能是一个模糊的问题，留下了一个模糊的答案，但我需要一些真实世界的示例、想法和/或最佳实践来缓存 Web 应用程序的数据。我读过的所有示例本质上都更具技术性（如何从相应的缓存存储中添加或删除缓存数据），但我无法找到更高级别的缓存策略。

例如，我的 Web 应用程序为每个用户提供了一个收件箱/邮件功能。到目前为止，我一直在做的是将典型的会话数据存储在缓存中。在此示例中，当用户登录时，我会转到数据库并检索用户的邮件消息并将它们存储在缓存中。我开始怀疑我是否应该一直在缓存中维护所有用户消息的副本，并在需要时从缓存中检索它们，而不是在登录时从数据库中加载。我有一堆在登录时加载的其他数据（产品目录和相关实体），登录开始变慢。

所以我想我向社区提出的问题是，在这种情况下，你会做什么/推荐什么方法？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T19:49:41.477

这可能更适合[https://softwareengineering.stackexchange.com/](https://softwareengineering.stackexchange.com/)，但通常您希望缓存：

*   不经常更改的元数据/配置数据。例如国家/州列表、外部资源地址、逻辑/分支设置、产品/价格/税收定义等。
*   检索或生成成本高昂且不需要经常更改的数据。例如报告的历史数据集。
*   当前用户会话独有的数据。

上面的最后一项是您需要小心的地方，因为您可以通过为每个活动会话添加几兆字节的数据来大幅增加应用程序的内存使用量。它还意味着不同级别的缓存——应用程序范围、用户会话等。

通常，您不应缓存处于活动更改中的数据。

在较大的系统中，您还需要考虑缓存的位置。是否可以有一个中央缓存服务器，或者每个服务器/进程处理自己的缓存是否足够好？

另外：您应该有一些方法来快速重置/使缓存数据无效。对于较小或任务关键性较低的应用程序，这可能就像重新启动 Web 服务器一样简单。对于我工作的大型系统，我们对大多数缓存数据使用 12 小时的绝对过期窗口，但如果需要，我们可以强制立即过期。

**这是一个非常广泛的问题，答案很大程度上取决于您正在构建的特定应用程序/系统。**我对您的具体情况知之甚少，无法说明您是否应该缓存所有用户的消息，但直觉上这似乎是个坏主意，因为您似乎正在有效地缓存整个数据集。如果有新消息进入或被删除，这可能会导致问题。然后你会在缓存中更新它们吗？这不是简单地复制后备存储吗？

缓存只是一种性能优化技术，与任何优化一样，在进行实质性更改之前先进行**测量，以避免浪费时间优化错误的东西。**也许您不需要太多缓存，它只会使您的应用程序复杂化。也许您正在考虑缓存的数据可以以更快的方式检索，或者一次检索的数据更少。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T19:51:04.163

缓存导致重复数据库查询的任何内容。

# asp.net-mvc-4 - MVC 4 网络安全

> ID：13519050
> 
> 赞同：1
> 
> 时间：2012-11-22T19:34:43.833
> 
> 标签：asp.net-mvc-4

您好，我正在启动一个 mvc 4 站点。

我需要为站点添加安全性。

到目前为止，我已经使用了 websectiy 类 [http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity(v=vs.111).aspx](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity(v=vs.111).aspx)

我在这里读到，与 System.Web.Security.Membership 相比，webmatrix 安全类有一些限制

我希望将来有最大的灵活性。

我还想要一个使用代码优先方法创建的数据库。我通过 WebSecurity.InitializeDatabaseConnection 的 webmatrix 安全性实现了这一点。

如果我使用默认的 System.Web.Security.Membership，我该如何首先使用代码执行此操作。我想把数据库放在一个地方。我想我需要添加这些配置设置。

```
<clear/>

<add name="AspNetSqlMembershipProvider"

     type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"

     connectionStringName="ApplicationServices"

     enablePasswordRetrieval="false"

     enablePasswordReset="true"

     requiresQuestionAndAnswer="false"

     requiresUniqueEmail="false"

     passwordFormat="Hashed"

     maxInvalidPasswordAttempts="5"

     minRequiredPasswordLength="6"

     minRequiredNonalphanumericCharacters="0"

     passwordAttemptWindow="10"

     passwordStrengthRegularExpression=""

     applicationName="/"

        /> 
```

使用 webmatrix 安全性优于 system.web.security 有哪些优势。

我真的被困住了，所以你的帮助会很棒

# c++ - 变量中的 C++ Cout

> ID：13519053
> 
> 赞同：1
> 
> 时间：2012-11-22T19:34:49.813
> 
> 标签：c++, http, request

我正在尝试构建我的第一个 C++ 应用程序，我需要一些帮助。

我有这行代码。我想使用 COUT/CIN 设置变量并将其插入 [VARIABLE]

```
request+="GET /cast/api.php?num=1&msg=[VARIABLE]&src=Inquirer HTTP/1.1\r\n"; 
```

我已经设置了ff：

```
string msg;

cout << "Enter The Message: ";
cin >> msg; 
```

我试过了：

```
cout request+="GET /cast/api.php?num=1&msg=" << msg << "&src=Inquirer HTTP/1.1\r\n"; 
```

但这确实是错误的。:)

请指教。谢谢你。

- 编辑 -

天哪，我提出了一个多么愚蠢的问题。我忘了我可以使用：

```
request+="GET /cast/api.php?num=1&msg=" + msg + "&src=Inquirer HTTP/1.1\r\n"; 
```

对不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:38:18.287

尝试这样的事情：

```
string variable;
std::cin >> variable;
request = request + "GET /cast/api.php?num=1&msg=<" + variable + ">&src=Inquirer HTTP/1.1\r\n";
std::cout << request; 
```

正如有人已经提到的那样，您确定要`request`与附加字符串连接，还是`request = "GET ... "`仅用于分配？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:38:33.447

怎么样

```
request += "GET /cast/api.php?num=1&msg=" + msg + "&src=Inquirer HTTP/1.1\r\n";
cout << request; 
```

顺便说一句：你真的想要 += GET 吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T19:40:03.713

这可能会成功，自愿简化并分成多个步骤。

```
#include <iostream>

int main() {
  std::string var;
  std::cout << "Enter message :";
  std::cin >> var;

  std::string url = "GET /cast/api.php?num=1&msg=";
  url = url + var;
  url = url + "&src=Inquirer HTTP/1.1\r\n";

  std::cout << url << std::endl;
} 
```

顺便说一句，如果您在 HTTP 查询中使用它，您可能需要对变量进行 urlencode。

# qt - Qt QGraphicsScene 和 QGraphicsItem 事件

> ID：13519055
> 
> 赞同：0
> 
> 时间：2012-11-22T19:34:52.367
> 
> 标签：qt, events, resize, qgraphicsitem, qgraphicsscene

我有一些 QGraphicsObjects，它们取决于它们所在场景的大小。所以我的图形对象需要知道两个事件何时发生：

1.  当它被添加到场景中时
2.  当它的场景被调整大小时

我现在的做法是 - 在场景的父级中创建 2 个信号：obj_create、scene_resize。并将它们连接到 gr.object 的插槽。这似乎不是最好的方法。我在 QGraphcisItem 中找不到像*addedToScene*或*sceneResized*之类的任何事件...

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:47:31.133

我会建议两种可能的方法之一：在 GraphicsItem 中子类 QObject 并简单地使用 Signal/Slots 或定义自己的接口，让我们说 IResizableEvent 与 resize 方法。在您的 GraphicsItem 中，您使用调整大小代码实现该方法。当您在 Scene 类中检测到场景调整大小时，只需遍历所有项目，将它们转换为接口类型并调用调整大小方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:51:55.613

我只需要稍微准确地阅读文档...希望它可以帮助某人...

```
QVariant        itemChange(GraphicsItemChange change, const QVariant &value)
{

    if (change == QGraphicsItem::ItemSceneHasChanged)
    {

            this->performSomeUpdates();
            QObject::connect(this->scene(),SIGNAL(sceneRectChanged(QRectF)),this,SLOT(sceneRectChanged(QRectF)));

    }

    return QGraphicsItem::itemChange(change, value);

} 
```

# javascript - 通过 Spring MVC 使用 ajax() POST 请求下载文件

> ID：13519058
> 
> 赞同：11
> 
> 时间：2012-11-22T19:35:09.247
> 
> 标签：javascript, jquery, spring-mvc

我尝试下载文件。该操作由`ajax()`POST 请求触发。该请求将JSON 格式的*数据*发送到控制器。控制器生成文件（字节）并将其发回。

*JavaScript：*

```
function getLicenseFile() {
    $.ajax({
        type: 'POST',
        url: '<%=request.getContextPath()%>/licenses/rest/downloadLicenseFile',
        dataType: 'json',
        contentType: 'application/json;charset=UTF-8',
        data: ko.mapping.toJSON(licenseModel),
        success: function (data) {
            console.log("in sucess")
        },
        error:function (xhr, ajaxOptions, thrownError){
            console.log("in error")
        } 
    });
} 
```

*控制器：*

```
@RequestMapping(value = "/licenses/rest/downloadLicenseFile", method = RequestMethod.POST)
@ResponseStatus(value=HttpStatus.OK)
@ResponseBody
public void createLicenseFile(@Valid @RequestBody License license, HttpServletResponse response) throws Exception {

    logger.debug("Contoller License in: "+ license);

    byte[] licensedata = licenseEncodeDefaultService.createLicenseFile(license);
    logger.debug("licenseData: " + new String(licensedata));

    response.setHeader("Content-Disposition", "attachment; filename=\"" + license.getCustomer() + ".license\"");
    response.getOutputStream().write(licensedata);
    response.flushBuffer();
} 
```

## *问题*

*   浏览器应该打开一个下载框，但它没有发生
*   响应在错误中处理：ajax 函数部分（但 HTTP 状态为`OK`）

那么我做错了什么或者正确的方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-22T23:02:47.203

Just send a URL of file in response and then "visit" it in your `success` callback.

```
function getLicenseFile() {
    $.ajax({
        type: 'POST',
        url: '<%=request.getContextPath()%>/licenses/rest/downloadLicenseFile',
        dataType: 'json',
        contentType: 'application/json;charset=UTF-8',
        data: ko.mapping.toJSON(licenseModel),
        success: function (data) {
            window.open(data.fileUrl);
            // or window.location.href = data.fileUrl;
        },
        error:function (xhr, ajaxOptions, thrownError) {
            console.log("in error");
        } 
    });
} 
```

`data.fileUrl` should be set in response by server to say client where to get the file.

So your server will send a response with JSON like

```
{
    "fileUrl": "http://mysite.com/files/0123456789"
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-13T09:51:01.037

*@will824*如您所问，我将发布我自己的解决方案。

我在控制器中使用了一种解决方法，并将文件临时保存在文件 ystem ( `/tmp`) 中。我将功能分为两步。创建和下载。这不是很好，但对我来说已经足够了。

*控制器*（创建一个文件，将保存在服务器文件系统上）：

```
@RequestMapping(value = "/licenses/rest", method = RequestMethod.PUT)
@ResponseStatus(value=HttpStatus.OK)
@ResponseBody
public String createLicenseFile(@Valid @RequestBody License license) throws Exception {

    // create encrypted license file and send the name back to view
    String fileName =  licenseEncodeDefaultService.createLicenseFile(license);
    return fileName;

} 
```

*控制器*（下载文件）：

```
@RequestMapping(value = "/licenses/downloadFile/{file}", method = RequestMethod.GET)
public void downloadLicenseFile(@PathVariable("file") String file, HttpServletResponse response) throws Exception {

    // create full filename and get input stream
    File licenseFile = new File ("/tmp/" + file);
    InputStream is = new FileInputStream(licenseFile);

    // set file as attached data and copy file data to response output stream
    response.setHeader("Content-Disposition", "attachment; filename=\"" + file + ".license\"");
    FileCopyUtils.copy(is, response.getOutputStream());

    // delete file on server file system
    licenseFile.delete();

    // close stream and return to view
    response.flushBuffer();
} 
```

*JavaScript：*

```
function getLicenseFile() {
    //console.log(ko.mapping.toJSON(licenseModel));
    $.ajax({
        type : 'PUT',
        url : '${pageContext.request.contextPath}/licenses/rest',
        dataType : 'text',
        contentType : 'application/json;charset=UTF-8',
        data : ko.mapping.toJSON(licenseModel),
        success : function(data) {
            window.location.href = '${pageContext.request.contextPath}/licenses/downloadFile/'
                    + data;
        },
        error : function(xhr, ajaxOptions, thrownError) {
            // error handling
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-05T10:18:04.623

如果您想在不更改 URL 的情况下下载文件，则可以以`form.submit()` *编程*方式调用而不是使用 AJAX。

*JavaScript：*

```
function downloadFileUsingForm(url) { 
    var form = document.createElement("form");
    form.method = "post";
    form.action = url;
    document.body.appendChild(form);
    form.submit();
    document.body.removeChild(form);
}
downloadFileUsingForm("/YourController/DownloadFile"); 
```

*控制器：*

```
[HttpPost]
public ActionResult DownloadFile()
{
    string content = "Some Values";
    byte[] bytes = System.Text.UTF8Encoding.UTF8.GetBytes(content);
    return File(bytes, System.Net.Mime.MediaTypeNames.Application.Octet, "file.txt");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T23:04:30.593

正如评论所说，你不能用 ajax 调用来做，但你可以用纯 Javascript 来做。

```
function getLicenseFile() {
    var downloadUrl = "${pageContext.request.contextPath}/licenses/rest/downloadLicenseFile";
    // (optionally) provide the user with a message that the download is starting
    window.location.href = downloadUrl;
} 
```

注意 的使用`${pageContext.request.contextPath}`，它优于`<%=request.getContextPath()%>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-27T13:08:46.953

Ajax 不会帮助您尝试使用隐藏表单方法

```
<form action='../servletname' method='POST' id='formid'>
                <input type='hidden' value='' name='name' id='id'/>
                <input type='hidden' value=' ' name='name'  id='id' />
            </form> 
```

单击下载按钮提交表单时，通过表单字段向您传递 json

$('#formid').submit();

然后在服务器端

```
response.setContentType("application/vnd.ms-excel");
            response.setHeader("Content-Disposition", "attachment; filename=filnemae.fileformat");

 ServletOutputStream out = res.getOutputStream(); 
```

写入输出流然后关闭或刷新

如果您通过**server.xml 中的 post update postsize发送大数据**

# matlab - 递归 Matlab：将输出保存在向量/数组中

> ID：13519060
> 
> 赞同：0
> 
> 时间：2012-11-22T19:35:12.243
> 
> 标签：matlab

我在做一个学校项目，在递归使用 MATLAB 时遇到了问题。基本上，每次递归完成时，我想将通过递归找到的 (x, y) 坐标按照找到的顺序保存为向量/数组。然后我想保存在另一个向量/数组中找到的所有数组。

总之我想找到：

```
ArrayWithArrays(ArrayWithArrayWithXY)(XY coordinates) 
```

我从递归函数得到的输出是按顺序排列的XY坐标这可能使用MATLAB吗？

如果您需要我说得更具体，请告诉我。

谢谢你的任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:34:08.730

我不知道你的函数迭代了多少次。如果您不知道，请使用最大预设，否则 matlab 会抱怨分配。每次迭代后向量会更长，因此它需要一个新的内存位置。这里以 n 次迭代为例：

`vector=zeros(n,2); vector(1,:)=[startx,starty];`

现在例如一个简单的功能

```
for i=2:n
    vector(i,:)=[newcoorx,newcoory];
end 
```

# c# - 如何从 RichTextBox 控件的撤消堆栈中删除操作？

> ID：13519063
> 
> 赞同：8
> 
> 时间：2012-11-22T19:35:22.607
> 
> 标签：c#, wpf, stack, richtextbox, undo

Windows 窗体中的 RichTextBox 中似乎有这种`ClearUndo()`方法（参见[system.windows.forms.textboxbase.](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.clearundo.aspx)）。

我需要类似的东西`RichTextBox Control`。这是因为（正如这里提到的：[防止将 RichTextBox 操作添加到控件的撤消堆栈](https://stackoverflow.com/questions/2534946/preventing-a-richtextbox-operation-from-being-added-to-the-controls-undo-stack)中）每次更改都会添加到 RichTextBox 的撤消堆栈中。

我喜欢覆盖`OnTextChanged`事件并从 Uno 堆栈中删除其中一些更改。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T23:04:39.607

您可以使用以下代码模拟`ClearUndo()`WPF控件：`RichTextBox`

```
richTextBox.IsUndoEnabled = false;
richTextBox.IsUndoEnabled = true; 
```

但是您无法控制列表中的任何特定操作`Undo`。

如果您仍然想实现自己的`Undo/Redo`机制，最简单和最直接的方法是将控件的整个文本存储在一个数组中，以便在每个重要的文本更改时进行。但我建议只有在您不打算使用控件编辑大文本时才建议这样做。

# algorithm - 如何制定elo表

> ID：13519070
> 
> 赞同：1
> 
> 时间：2012-11-22T19:36:08.173
> 
> 标签：algorithm, probability

我想使用[elo 表](http://www.ascotti.org/programming/chess/elo.htm)。有没有一种方法可以在不对整个表进行硬编码的情况下计算获胜的概率。

据我所知，这不是一条直线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:40:30.997

见[http://en.wikipedia.org/wiki/Elo_rating_system](http://en.wikipedia.org/wiki/Elo_rating_system)

查看该页面的文本“玩家 A 的预期得分是”

Ea = 1 / ((1 + 10^((RB - RA) / 400))

其中 Ea 是玩家 A 的预期得分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T19:10:11.700

FIDE使用的评分差异表的计算：

令 dp 为评分差。那么期望 p 等于 (Excel)：

```
=ROUND(ROUND(NORMDIST(dp * 7 / 2000;0;1;1);3);2) 
```

此规则有两个例外：`dp = 343`和`dp = 344`

# c# - 将文本框中的字符串转换为 dd/mm/yyyy 日期

> ID：13519077
> 
> 赞同：-4
> 
> 时间：2012-11-22T19:37:15.960
> 
> 标签：c#, .net, datetime

如何将文本框中的字符串转换为 dd/mm/yyyy 日期形式，我的意思是：

```
Date d = Date(textBox.Text); 
```

我想将它用作 SQL 中的参数作为`Date`数据类型，如下所示：

```
command.Parameters.Add( new NpgsqlParameter("v5", NpgsqlDbType.Date)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:16:40.260

您可以使用以下[`TryParseExact()`](http://msdn.microsoft.com/en-us/library/ms131044.aspx)方法：

```
//using System.Globalization;
DateTime myDate;
if(DateTime.TryParseExact(textBox.Text, "dd/MM/yyyy", CultureInfo.InvariantCulture, DateTimeStyle.None, out myDate)){
    //do something 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:39:05.387

`DateTime d = DateTime.Parse(textBox.Text).Date;`

# flash - Actionscript 3 从组合框获取数据

> ID：13519080
> 
> 赞同：0
> 
> 时间：2012-11-22T19:37:30.357
> 
> 标签：flash, actionscript, combobox

我正在使用表格中的组合框对 Flash 进行简短测验。共有 16 个组合框（4x4 网格），其中每列在框中有不同数量的选择。

在 Combobox 属性中，我为每个标签的数据分配了一个值 1 或 0，具体取决于它是否是正确答案。

我需要弄清楚的是，如何让程序检查选择，然后根据所有组合框是否都更改为正确的标签（16 分）来提供答案。

我尝试使用提交按钮进行 2 帧测验以前进到下一帧，但根据我的数组编码收到此错误消息：

通过静态类型 fl.controls:ComboBox 的引用访问可能未定义的属性数据。

```
var aUserAnswers:Array = new Array();

submit_btn.addEventListener(MouseEvent.CLICK,submit);

function submit (event:MouseEvent) :void {
        aUserAnswers.push(Name_1.data, Name_2.data, Name_3.data, Name_4.data, Time_1.data, Time_2.data, Time_3.data, Time_4.data, Location_1.data, Location_2.data, Location_3.data, Location_4.data, Status_1.data, Status_2.data, Status_3.data, Status_4.data);
        nextFrame();
} 
```

如何使用 ComboBox 数据为测验评分？如何将未选中的 ComboBox 的默认值设置为 0？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:11:46.090

我不使用 Flash [ComboBox](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/ComboBox.html)（我使用 Flex 组合框），但它看起来没有`fl.controls.ComboBox`属性`data`。

您应该使用[selectedIndex](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/ComboBox.html#selectedIndex)或[selectedItem](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/ComboBox.html#selectedItem)`ComboBox`来确定用户选择了哪个答案。

# python - 元素 playbin2 query_position 总是返回查询失败

> ID：13519086
> 
> 赞同：0
> 
> 时间：2012-11-22T19:38:16.567
> 
> 标签：python, gstreamer, python-gstreamer

我正在开发流式传输 mp3 文件的媒体播放器。我正在使用 python gstreamer 模块来播放流。

我的播放器是 playbin2 元素

当我想查询位置时（使用 query_position(gst.FORMAT_TIME,None)），它总是返回一个 gst.QueryError: Query failed。这首歌肯定在播放。（状态不为 NULL）

有人对这个有经验么？

PS：我也尝试用 gst.Format(gst.FORMAT_TIME) 替换 gst.FORMAT_TIME，但给了我同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:00:19.880

“您需要线程化您自己的 gst 对象”是什么意思？“等到查询成功”是什么意思？

从 NULL 到 PAUSED 或 PLAYING 状态的状态更改是异步的。一旦管道被预卷（所以 state >= PAUSED），您通常只能进行成功的持续时间查询。当您在管道（playbin2）的 GstBus 上收到 ASYNC_DONE 消息时，您可以查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:58:00.587

你从什么来源流式传输？如果您从 playbin2 查询位置，我会说您做对了所有事情。您能否为 gstreamer 提交错误，包括一个暴露问题的最小 python 片段并告诉您从哪个源流式传输 - 理想情况下它是公开的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T12:22:06.730

我自己找到的。问题在于线程。显然，您需要线程化您的 gst 对象并等待查询成功。

# python - if 语句中的几个参数

> ID：13519091
> 
> 赞同：1
> 
> 时间：2012-11-22T19:38:34.053
> 
> 标签：python, python-2.7

我有一个依赖于 argparse 的脚本。脚本的主体有这样的 if 语句：

```
if results.short == True and results.verbose == False and results.verbose2 == False and results.list == False and results.true == False: 
```

没有更短的方法吗？假设我有超过这 5 个参数，在每个语句中输入每个参数似乎都是重复性的工作。

不能这样做：

```
if results.short == True and "results.%s"== False % (everyotherresults.something): 
```

我正在为 Python 2.7 编写

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T19:40:39.733

您可以`any`在列表中使用函数，并将所有参数从列表中的第二个移动：-

```
if results.short and \
   not any([results.verbose, results.verbose2, results.list, results.true]): 
```

`any``True`如果列表中至少有一个值为 ，则函数返回`True`。因此，只需使用，如果列表中的所有值都是`not any`，它将返回。`True``False`

是的，您不需要将布尔值与`True`or进行比较`False`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T19:43:21.417

您不应该`bool`在布尔表达式中进行比较，例如：

```
if (results.short 
    and not results.verbose 
    and not results.verbose2 
    and not results.list 
    and not results.true): 
```

# c# - Razor 中的硬编码网址

> ID：13519095
> 
> 赞同：0
> 
> 时间：2012-11-22T19:38:46.753
> 
> 标签：c#, xml, razor

在 C# 中寻找 razor 语法的简单 RSS 阅读器时，我遇到了这个网站： http: [//our.umbraco.org/forum/developers/razor/27409-Consume-an-RSS-feed-in-Razor](http://our.umbraco.org/forum/developers/razor/27409-Consume-an-RSS-feed-in-Razor)。

正如它在代码中的注释中所说，它可能是 URL 是硬编码的。我很好奇它究竟是如何硬编码到一个 RSS 提要的，看代码似乎并不明显。例如，如果我尝试替换“http://tdsb.on.ca/RSS/MediaRoom.xml”的 url，它就会变成空白。

```
@using System.Xml;

@{
//Get the XML from remote URL
XmlDocument xml = new XmlDocument();

**//URL currently hardcoded - but you could use a macro param to pass in URL**
xml.Load("http://blog.orcare.com/rss");

//Select the nodes we want to loop through
XmlNodeList nodes = xml.SelectNodes("//item");

//Traverse the entire XML nodes.
foreach (XmlNode node in nodes)
{
    //Get the value from the <title> node
    var title = node.SelectSingleNode("title").InnerText;

    //Get the value from the <description> node
    var description = node.SelectSingleNode("description").InnerText;

    <h1>@title</h1>
    @Html.Raw(description)

 } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:45:05.230

我相信作者的意思是 URL 本身是硬编码的；即不是从数据库、配置文件、用户界面或类似的动态加载，而是用代码本身编写的。在实际的解决方案中，如果您不仅希望来自静态提要或静态提要列表的 RSS，您通常希望它更加动态。但是，如果您在使用代码进行生产后从不需要更改 url，那么硬编码就不是问题了。

在没有自己尝试过代码的情况下，从第一印象来看，它应该适用于任何返回实际 RSS 提要的 url。只要提要在 XML 中有项目节点，并且项目节点有标题和描述。

但是代码不是很可靠。如果 XML 中缺少这些元素中的任何一个，它就很容易中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:52:23.947

它是硬编码去获取 rss 提要的地方。 `http://tdsb.on.ca/RSS/MediaRoom.xml`因为格式不匹配而变为空白。如果你打开两个 xmls 并比较，你`tdsb`会发现`description`.`ìtem`

# apache - 无法让 mod_rewrite 正确（且不可见地）重写我的 URL？

> ID：13519096
> 
> 赞同：2
> 
> 时间：2012-11-22T19:38:48.943
> 
> 标签：apache, mod-rewrite, url-rewriting, short-url

我正在尝试为我的网站提供 URL 缩短服务。

所以而不是：

```
http://www.myfullwebsitename.com/page78/this-is-a-headline/ 
```

用户将能够访问：

```
http://abc.de/aBxf 
```

需要重定向（不可见！）到

```
http://abc.de/?shorturl=aBxf 
```

然后 301 通过数据库查找重定向到

```
http://www.myfullwebsitename.com/page78/this-is-a-headline/ 
```

我可以轻松地进行数据库查找和 301 重定向。这是我正在努力解决的隐形中间重定向。

我尝试了很多不同的东西，但似乎没有一个有效。这是我目前认为*应该*工作的：

```
RewriteCond %{HTTP_HOST} ^abc.de
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^/(.+)  /?shorturl=$1 
```

但不是默默地重定向到

```
http://abc.de/?shorturl=aBxF 
```

它将“嘈杂”（302）重定向到

```
http://abc.de/aBxF/?shorturl=aBxF 
```

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:58:44.220

您可以尝试几件事。

我认为你的 RewriteRule 应该是这样的（没有 forward `/`）：

```
RewriteRule ^/(.+)  ?shorturl=$1 [L] 
```

这至少应该阻止它重定向到`http://abc.de/aBxF/`.

如果您添加以下内容，您的原始规则可能会起作用：

```
RewriteBase / 
```

如果是我，我的规则实际上是这样的：

```
RewriteBase /
RewriteCond %{HTTP_HOST} ^abc.de$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule .  /redirect.php [L] 
```

然后在 PHP 中，我会使用它`$_SERVER['REQUEST_URI']`来获取 URL（不确定您使用的是什么语言）。

规则可能如下所示：

```
RewriteRule ^(.*)$  /redirect.php?shorturl=$1 [L] 
```

但我会确保按名称提及脚本。可能使您的规则失效的部分原因是依赖于 Apache 在重写后找到您的索引文件。

Apache 重写规则的工作方式是，一旦 URL 被重写，它实际上会重新运行规则，直到找不到其他规则为止。“最后”的`[L]`标志说“停在这里” - 但它仍然从顶部重新开始。带有标志的 RewriteCond`!-f`表示“仅当文件不存在时”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:58:17.823

使用绝对 URL：

```
RewriteCond %{HTTP_HOST} ^abc.de
RewriteCond %{QUERY_STRING} ^$
RewriteRule ^(.*)$ http://abc.de/?shorturl=$1 [R=301,L] 
```

# oracle - 我怎样才能从一个触发器的过程中修复这个变异表

> ID：13519103
> 
> 赞同：5
> 
> 时间：2012-11-22T19:39:15.213
> 
> 标签：oracle, plsql, triggers, mutating-table

此触发器会将插入的值传递给将这些值插入另一个表的过程。我收到一个变异表错误。我怎样才能解决这个问题？

```
CREATE OR REPLACE TRIGGER ADD_INVOICE
BEFORE INSERT OR UPDATE OF APP_NO,C_NO ON APPOINTMENT
FOR EACH ROW
DECLARE
BEGIN

POP_INVOICE(:NEW.APP_NO,:NEW.C_NO,:NEW.APP_DATE);

END;
/

CREATE OR REPLACE PROCEDURE POP_INVOICE(
I_APP_NO IN INVOICE.APP_NO%TYPE,
I_C_NO IN INVOICE.C_NO%TYPE,
I_INV_DATE IN INVOICE.INV_DATE%TYPE)
AS
CURSOR C_POP IS SELECT PRICE FROM TREATMENT T,APPOINTMENT A 
WHERE T.TRT_NO=A.TRT_NO
AND A.APP_NO=I_APP_NO;

V_BILL INVOICE.BILL%TYPE;
BEGIN

OPEN C_POP; 
FETCH C_POP INTO V_BILL;

UPDATE INVOICE
SET INV_NO=INV_IDSEQ.NEXTVAL,
APP_NO=I_APP_NO,
C_NO=I_C_NO,
BILL=V_BILL,
INV_DATE=I_INV_DATE;

END;
/ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T23:13:23.713

该问题是由在触发器本身内引用带有触发器的表引起的。更改过程以接受 TRT_NO 作为参数消除了在查询中包含 APPOINTMENT 的需要，因此将避免变异表异常。根据每次处理的记录数，您甚至可以将游标合并到您的 UPDATE 语句中。

我认为应该这样做，尽管我无法检查数据库。

```
CREATE OR REPLACE TRIGGER ADD_INVOICE

BEFORE INSERT OR UPDATE OF APP_NO,C_NO ON APPOINTMENT
FOR EACH ROW
DECLARE
BEGIN

POP_INVOICE(:NEW.APP_NO,:NEW.C_NO,:NEW.APP_DATE,:NEW.TRT_NO);

END;
/ 
```

修改后的程序：

```
CREATE OR REPLACE PROCEDURE POP_INVOICE(
I_APP_NO IN INVOICE.APP_NO%TYPE,
I_C_NO IN INVOICE.C_NO%TYPE,
I_INV_DATE IN INVOICE.INV_DATE%TYPE,
I_TRT_NO IN APPOINTMENT.TRT_NO%TYPE
)
AS

CURSOR C_POP IS SELECT PRICE 
FROM TREATMENT T
WHERE T.TRT_NO = I_TRT_NO;

V_BILL INVOICE.BILL%TYPE;

BEGIN

OPEN C_POP; 
FETCH C_POP INTO V_BILL;
CLOSE C_POP;

INSERT INVOICE
  (inv_no, app_no, c_no, bill, inv_date)
VALUES
  (INV_IDSEQ.NEXTVAL, I_APP_NO, I_C_NO, V_BILL, I_INV_DATE);

END;
/ 
```

# c# - 访问 XML 文件作为资源并加载到数据表

> ID：13519104
> 
> 赞同：1
> 
> 时间：2012-11-22T19:39:25.683
> 
> 标签：c#, xml, resources, datatable

我正在尝试将 XML 文件存储为项目资源，因此在编译时不必对任何文件路径进行硬编码。当我调用 ReadXML 时，我不断收到错误消息。有什么想法吗？如果有更好的方法来引用文件而不用硬编码路径，请告诉我。

谢谢！

```
public class XMLLoad
{

    public DataSet ds { get; set; }
    public string PrimaryKey { get; set; }
    public string XLETable 
    {
        get
        {
            //Returns an XML file
            return Properties.Resources.mainXLETable;
        }
    }

    public XMLLoad(string xmlPrimaryKey)
    {
        this.PrimaryKey = xmlPrimaryKey;
    }

    public DataSet ReturnXMLFileAsDataSet(string dataTableName)
    {
        try
        {
            var reader = XmlReader.Create(XLETable);

            var dt = new DataTable(dataTableName);
            ds.ReadXml(reader);
            dt = ds.Tables[0];

            return ds;
        }
        catch (Exception)
        {
            throw;
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T00:47:56.120

该`Create`方法需要一个 URL，而不是包含 XML 数据的字符串。

试试这个：

```
var reader = XmlReader.Create(new StringReader(XLETable)); 
```

# java - Restlets GAE Android

> ID：13519108
> 
> 赞同：2
> 
> 时间：2012-11-22T19:39:49.117
> 
> 标签：java, android, eclipse, google-app-engine

我无法运行[以下 Android 示例](http://wiki.restlet.org/docs_2.0/13-restlet/21-restlet/318-restlet/303-restlet.html)。 [http://wiki.restlet.org/docs_2.0/13-restlet/21-restlet/318-restlet/303-restlet.html](http://wiki.restlet.org/docs_2.0/13-restlet/21-restlet/318-restlet/303-restlet.html)

我在 64 位 Ubuntu 12.10 上使用 Eclipse Juno 4.2 并尝试在 api Level 15 上部署（Android 4.03 模拟器和真实设备）

我刚刚在我的工作区（来自现有源的 Android 项目）中导入了示例项目，并将 org.restlet.jar（来自 restlet-android-2.0.15）添加到我的类路径中，如上所述。

在以下行我得到一个例外：

```
ClientResource cr = new ClientResource(
    "http://restlet-example-serialization.appspot.com/contacts/123"); 
```

例外：

> `java.lang.reflect.InvocationTargetException`
> `java.lang.NoClassDefFoundError: org.restlet.resource.ClientResource`

有人可以指导我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:00:03.340

我能够让它运行，但对我来说并不是很清楚。

我从类路径中删除了 org.restlet.jar 并添加了源文件夹。

# jquery - jQuery 淡入/淡出序列

> ID：13519114
> 
> 赞同：0
> 
> 时间：2012-11-22T19:40:53.523
> 
> 标签：jquery, sequence, fade

[http://jsfiddle.net/HQjSK/4/](http://jsfiddle.net/HQjSK/4/)

我有一个问题：首先我有这个代码：

```
 $("#twitter").click(function () {
      $("#main_facebook, #main_linkedin, #main_spotify").fadeOut(500, function () {
        $("#main_twitter").fadeIn(500);
      });
      return false;
    }); 
```

问题是fadeIn 将与fadeOut 同时开始。我想要的是拳头淡出然后开始淡入

我做了这个改变：

```
$("#twitter").click(function () {
      $("#main_facebook:visible, #main_linkedin:visible, #main_spotify:visible").fadeOut(500, function () {
        $("#main_twitter").fadeIn(500);
      });
      return false;
    }); 
```

现在的问题是，如果#main_facebook 已经隐藏，#main_twitter 将不会淡入。

感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:44:22.213

试试这是否有效：

```
$("#twitter").click(function () {
  $("#main_facebook:visible, #main_linkedin:visible, #main_spotify:visible").fadeOut(500)
  .queue(function () {
    $("#main_twitter").fadeIn(500);
    $(this).dequeue();
    });
  return false;
}); 
```

# java - 将 Tomcat Catalina 日志导出到外部服务器

> ID：13519115
> 
> 赞同：0
> 
> 时间：2012-11-22T19:41:06.353
> 
> 标签：java, android, tomcat, logging

我使用 Tomcat 7.x 作为我的 Web 服务器，我使用 java.util.logging 和 JULI 进行日志记录。此 Tomcat 服务器托管一个运行 Ubuntu 的 Amazon EC2 实例。

**问题**是每当我希望查看日志（在 catalina.log 文件中）时，我都经历了一个非常耗时的复制、咀嚼然后将文件下载到我的本地机器的过程，然后我才能看到它们。（我可以使用 nano 或 vi 等实用程序，但它们没有多大帮助）

**我的问题**我可以自动将日志导出到某个外部服务器并立即查看它们吗？一些类似于 Android 中 ACRA 报告的 Bugsense 的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:43:36.743

您可以创建一个 servlet 以在 Tomcat 中运行以读取日志并将它们显示在您的 Web 浏览器中。或者，如果文件很大，请将其压缩并允许您下载。

使用环境变量`catalina.base`确定基本目录，然后收集 logs/catalina.log。

[更新]

最好的方法取决于你的背景。如果您对做一个基本的、简洁的 servlet 感到满意，请从以下内容开始`the simplest design that could possibly work`：

```
class LogServlet extends HttpServlet
{
   @Override
   protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException
   {
      File logFile = new File(System.getProperty("catalina.base"), "logs/catalina.log");
      String contents = FileUtils.readFileToString(logFile);
      PrintWriter out = new PrintWriter(resp.getOutputStream());
      out.println(contents);
   }
} 
```

我正在使用 commons-io 来简化读取日志文件，但除此之外它只是 Java servlet 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:51:02.117

rsync 然后定期在您想要的服务器上使用 cron 作业或使用诸如 collectd 之类的工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-08T06:21:22.273

您可以使用 logstash 或 fluentd 流式传输日志并加载到您喜欢的目标中，例如 Elastic Search。您可以使用 Kibana 或 Graylog 等可视化工具从 elasticsearch 中可视化或搜索日志

# objective-c - 获取所有对象属性的列表

> ID：13519118
> 
> 赞同：0
> 
> 时间：2012-11-22T19:41:28.770
> 
> 标签：objective-c, ios, cocoa-touch

> **可能重复：**
> [在 Objective-C 中获取对象属性列表](https://stackoverflow.com/questions/754824/get-an-object-attributes-list-in-objective-c)

我试图找到一种方法来遍历对象上的所有属性并将第一个非空属性的值分配给另一个变量。所有这些属性都是字符串，我正在尝试使用 isEqualToString:@"" 在将第一个非空属性分配给另一个变量之前手动检查每个属性。有没有办法通过迭代每个属性而不是让 if 条件单独检查每个属性来有效地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:00:48.180

朱塞佩的回答很好，但似乎你不需要让自己复杂化。

如果您说所有属性都是字符串，为什么不使用 NSArray 并使用快速枚举，检查字符串是否在数组中，如果不添加就添加。这样您就没有限制（以防您以后需要修改项目）。

即使使用不同类型的变量/属性，这也可以工作。当您遍历数组时，只需使用`isSubclassOfClass:`检查类型。

# facebook - Facebook Exchange 令牌在 1 天后过期

> ID：13519121
> 
> 赞同：1
> 
> 时间：2012-11-22T19:41:47.083
> 
> 标签：facebook, facebook-graph-api

我的应用程序向

```
https://graph.facebook.com/oauth/access_token?
client_id=APP_ID&
client_secret=APP_SECRET&
grant_type=fb_exchange_token&
fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

并且 FB 总是再次返回相同的令牌。初始过期值约为 1 天，并且会递减。即使在应该得到一个短期令牌的新登录和应该用一个长期令牌交换一个短期令牌的交换调用之后，总是返回相同的短期令牌。

那么应该如何将短命代币与长寿代币交换呢？

# android - android openGL Es 2没有显示图像

> ID：13519122
> 
> 赞同：0
> 
> 时间：2012-11-22T19:41:49.920
> 
> 标签：android, opengl-es-2.0, texture-mapping, texture2d

我是 Android 的 OpenGL ES 的新手。我在纹理映射上花了 3 天时间，但没有解决我的问题。现在我写了一些代码，但它只显示背景颜色，而不是我想在表面上显示的图像。这是`myRenderer`类构造函数

```
public myRenderer()
{

    imageBitmap=BitmapFactory.decodeResource(MainActivity.context.getResources(),R.drawable.image);

    float texture[]={

            0.0f, 0.0f, //bottom-left
            0.1f, 0.0f, // bottom-right
            0.0f, 0.1f, // top-left
            0.1f, 0.1f  // top-right
            };

    float vertex[]={
             0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 1.0f, //3 Vertex Coords, 3 RGB Vals
             1.0f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, //3 Vertex Coords, 3 RGB Vals
             0.0f, 1.0f, 1.0f, 0.0f, 1.0f, 1.0f, //3 Vertex Coords, 3 RGB Vals
             0.0f, 0.0f, 1.0f, 0.0f, 0.0f, 1.0f, //3 Vertex Coords, 3 RGB Vals
             1.0f, 0.0f, 1.0f, 1.0f, 0.0f, 1.0f, //3 Vertex Coords, 3 RGB Vals
             1.0f, 1.0f, 1.0f, 1.0f, 1.0f, 1.0f, //3 Vertex Coords, 3 RGB Vals

             };

    float triagnle2[]={

            -0.75f,0.5f,0.0f,
            0.0f,1.0f,0.0f,1.0f,

            0.75f,0.5f,0.0f,
            1.0f,1.0f,0.0f,1.0f,

            0.0f,0.0f,0.0f,
            1.0f,1.0f,1.0f,1.0f

    };

    byte[] indices={

            0,1,2, 3,4,5//Front Face

    };
    vertexBuffer=ByteBuffer.allocateDirect(vertex.length*4).order(ByteOrder.nativeOrder()).asFloatBuffer();
    vertexBuffer.put(vertex).position(0);

    textureBuffer=ByteBuffer.allocateDirect(texture.length*4).order(ByteOrder.nativeOrder()).asFloatBuffer();
    textureBuffer.put(texture).position(0);

    indexBuffer = ByteBuffer.allocateDirect(indices.length);
    indexBuffer.put(indices);
    indexBuffer.position(0);
} 
```

这是 SurfaceCreated 中的内容：

```
 GLES20.glClearColor(1.7f,1.5f,0.5f,0.5f);
    GLES20.glEnable(GLES20.GL_DEPTH_TEST);
    GLES20.glEnable(GLES20.GL_TEXTURE_2D);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S,GLES20.GL_CLAMP_TO_EDGE);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T,GLES20.GL_CLAMP_TO_EDGE);
    //imageBitmap.getPixels(pixels,0,imageBitmap.getWidth(),0,0,imageBitmap.getWidth(),imageBitmap.getHeight());
    GLES20.glGenTextures(1, textures, 0);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textures[0]);

    GLES20.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
    GLES20.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

    //Different possible texture parameters, e.g. GL10.GL_CLAMP_TO_EDGE
    GLES20.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_REPEAT);
    GLES20.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);

    GLES20.glEnable(GLES20.GL_DEPTH_TEST);
    GLES20.glEnable(GLES20.GL_TEXTURE_2D);

    GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, imageBitmap, 0);
    imageBitmap.recycle();

    GLES20.glDepthFunc(GLES20.GL_LESS);
    Matrix.setIdentityM(mModelMatrix,0);

        final float eyeX = 0.0f;
        final float eyeY = 0.0f;
        final float eyeZ = 2.5f;

        // We are looking toward the distance
        final float lookX = 0.0f;
        final float lookY = 0.0f;
        final float lookZ = 1f;

        // Set our up vector. This is where our head would be pointing were we holding the camera.
        final float upX = 0.0f;
        final float upY = 1.0f;
        final float upZ = 0.0f;

        Matrix.setLookAtM(mViewMatrix, 0, eyeX, eyeY, eyeZ, lookX, lookY, lookZ, upX, upY, upZ);

        final String vertexShader =
            "uniform mat4 u_MVPMatrix;      \n"     // A constant representing the combined model/view/projection matrix.

          + "attribute vec4 a_Position;     \n"     // Per-vertex position information we will pass in.
          + "attribute vec4 a_Color;        \n"     // Per-vertex color information we will pass in.

          + "varying vec4 v_Color;          \n"     // This will be passed into the fragment shader.
         +"attribute vec2 TextureCoord;"

         +"varying vec2 TextureCoordOut;"
          + "void main()                    \n"     // The entry point for our vertex shader.
          + "{                              \n"
        //  + "   v_Color = a_Color;          \n"     // Pass the color through to the fragment shader.
          +"TextureCoordOut = TextureCoord;"                                          // It will be interpolated across the triangle.
          + "   gl_Position = u_MVPMatrix   \n"     // gl_Position is a special variable used to store the final position.
          + "               * a_Position;   \n"     // Multiply the vertex by the matrix to get the final point in
          + "}                              \n";

        final String fragmentShader =
            "precision mediump float;       \n"     // Set the default precision to medium. We don't need as high of a

            +"varying mediump vec2 TextureCoordOut;"
        +"uniform sampler2D Sampler;// precision in the fragment shader."

          //+ "varying vec4 v_Color;          \n"     // This is the color from the vertex shader interpolated across the
                                                    // triangle per fragment.
          + "void main()                    \n"     // The entry point for our fragment shader.
          + "{                              \n"
          + "   gl_FragColor =  vec4(texture2D(Sampler, TextureCoordOut).xyz, 0.5);    \n"     // Pass the color directly through the pipeline.
          + "}                              \n";
        int vertexShederHandle=GLES20.glCreateShader(GLES20.GL_VERTEX_SHADER);
        if(vertexShederHandle!=0)
        {
            GLES20.glShaderSource(vertexShederHandle, vertexShader);
            GLES20.glCompileShader(vertexShederHandle);

            int[] compileStatus=new int[1];
            GLES20.glGetShaderiv(vertexShederHandle,GLES20.GL_COMPILE_STATUS,compileStatus,0);
            if(compileStatus[0]==0)
            {
                GLES20.glDeleteShader(vertexShederHandle);
                vertexShederHandle=0;
            }

        }
        else
        {
            throw new RuntimeException("Error creating Sheder");
        }

        /////////////

        int fragmentShederHandle=GLES20.glCreateShader(GLES20.GL_FRAGMENT_SHADER);
        if(fragmentShederHandle!=0)
        {
            GLES20.glShaderSource(fragmentShederHandle,fragmentShader);
            GLES20.glCompileShader(fragmentShederHandle);

            int[] compileStatus=new int[1];
            GLES20.glGetShaderiv(fragmentShederHandle,GLES20.GL_COMPILE_STATUS,compileStatus,0);
            if(compileStatus[0]==0)
            {
                GLES20.glDeleteShader(fragmentShederHandle);
                fragmentShederHandle=0;
            }

        }
        else
        {
            throw new RuntimeException("Error creating Sheder");
        }

        int progameHandle=GLES20.glCreateProgram();
        if(progameHandle!=0)
        {
            GLES20.glAttachShader(progameHandle, vertexShederHandle);
            GLES20.glAttachShader(progameHandle, fragmentShederHandle);

            GLES20.glBindAttribLocation(progameHandle, 0, "a_Position");
            GLES20.glBindAttribLocation(progameHandle, 1, "a_Color");

            GLES20.glLinkProgram(progameHandle);

            int[] linkStatus=new int[1];

            GLES20.glGetProgramiv(progameHandle, GLES20.GL_LINK_STATUS,linkStatus,0);
            if(linkStatus[0]==0)
            {
                GLES20.glDeleteProgram(progameHandle);
                progameHandle=0;
            }

        }
        else
        {
            throw new RuntimeException("Error creating programe");
        }

        mMVPMatrixHandle=GLES20.glGetUniformLocation(progameHandle, "u_MVPMatrix");
        mPositionHandle=GLES20.glGetAttribLocation(progameHandle, "a_Position");
        mColorHandle=GLES20.glGetAttribLocation(progameHandle, "a_Color");

        GLES20.glUseProgram(progameHandle); 
```

这是 OnSurfaceChanged：

```
 GLES20.glViewport(0, 0, width, height);

    // Create a new perspective projection matrix. The height will stay the same
    // while the width will vary as per aspect ratio.
    final float ratio = (float) width / height;
    final float left = -ratio;
    final float right = ratio;
    final float bottom = -1.0f;
    final float top = 1.0f;
    final float near = 0.4f;
    final float far = 10.0f;

    Matrix.frustumM(mProjectionMatrix, 0, left, right, bottom, top, near, far); 
```

这是onDrawFrame：

```
GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textures[0]);
GLES20.glEnable(GLES20.GL_VERTEX_ATTRIB_ARRAY_ENABLED);
GLES20.glActiveTexture(GLES20.GL_TEXTURE0+textures[0]);
GLES20.glDrawElements(GLES20.GL_TRIANGLE_STRIP,6,GLES20.GL_UNSIGNED_BYTE,indexBuffer); 
```

如果做了一些愚蠢的事，请原谅我。请告诉我该怎么做。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:51:14.400

我不确定你打算这个调用做什么：`GLES20.glEnable(GLES20.GL_VERTEX_ATTRIB_ARRAY_ENABLED)`，但这不是 glEnable 的合法目标，几乎肯定会产生 gl 错误。

在您的代码中添加一些 glGetError 并尝试查找可能导致错误的行，如果您没有错误，请使用该事实更新问题，以便我们知道还要查找什么。

# sqlite - 将天数添加到 Date SqLite

> ID：13519124
> 
> 赞同：8
> 
> 时间：2012-11-22T19:41:59.977
> 
> 标签：sqlite

我需要将 +1 天添加到 selectec 日期，在 Slq 中，sintax 是：`SELECT DATEADD(day,+1, period.DateEnd)`它可以工作，但在 sqLite es 中不同。

我尝试了这个，但它不起作用，例如，DateEnd = '31/12/2012'，我需要在该日期添加 1 天，结果应该是：DateEnd = '01/01/2013'

```
 SELECT date('period2.DateEnd', '+1 day') as date 
  FROM Period as period2 
  WHERE period2.c_Pk_CodPeriod = '1012' 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-22T19:47:14.073

目前你有`period2.DateEnd`一个*string*。我怀疑你想要：

```
SELECT date(period2.DateEnd, '+1 day') as date 
FROM Period as period2 
WHERE period2.c_Pk_CodPeriod = '1012' 
```

# sql-server - 如何更改 log_reuse_wait 和 log_reuse_wait_desc

> ID：13519125
> 
> 赞同：1
> 
> 时间：2012-11-22T19:42:07.503
> 
> 标签：sql-server, sql-server-2012, database-backups, recovery, database-administration

我已经创建了新的数据库并且日志文件在过去很长，并且由于“备份”而导致日志已满的错误消息。

我查看了该数据库与 SERVER 中其他数据库之间的差异，我发现在所有数据库中 log_reuse_wait 为 0，log_reuse_wait_desc 为 NOTHING，而在我的数据库中，log_reuse_wait 为 0，log_reuse_wait_desc 为 LOG_BACKUP。

我想将我的数据库中的这个属性更改为 0 而不是什么。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T20:06:48.620

这是一个只读状态变量。它告诉您为什么此时不能截断日志。

您必须消除导致该情况的原因，而不仅仅是更改值（这甚至是不可能的）。

备份数据库日志或切换到`SIMPLE`恢复模式。您可能应该对两者都进行一些阅读以了解其含义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-14T17:05:43.017

David W. 的剧本对我不太适用。（SQL Server 2008 r2）

我需要稍微修改一下。按原样使用脚本，我收到消息说数据库 [master] 没有这样的文件。按照 David W. 的建议更改 DATABASE，然后切换到目标数据库并运行`DBCC SHRINKFILE()`命令。

同样，第一个参数`DBCC SHRINKFILE()`必须是数据库日志文件的逻辑名称，在以下脚本中表示为`logical_file_name_for_LOG`

```
USE [master] 
GO  
ALTER DATABASE <db name> SET RECOVERY full  
GO
ALTER DATABASE <db name> SET RECOVERY SIMPLE WITH NO_WAIT;
GO
USE [db name]
GO
DBCC SHRINKFILE('<logical_file_name_for_LOG>', 0, TRUNCATEONLY) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T15:33:29.953

我找到了解决方案。即使数据库处于`SIMPLE`等待模式`BACKUP_LOG`，所以您需要将恢复模式更改为`FULL`然后再返回到`SIMPLE`with`no wait`

```
USE [master] 
GO  
ALTER DATABASE <db name> SET RECOVERY full  
GO
ALTER DATABASE <db name> SET RECOVERY SIMPLE WITH NO_WAIT;
GO
USE [db name]
GO
DBCC SHRINKFILE('<log file name>', 0, TRUNCATEONLY) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-28T12:35:34.893

我知道这是旧的，但答案是错误的。
如果数据库具有恢复模式`FULL`并且这是预期的，则不要将其更改为`simple`.

`log_reuse_wait_desc`表示在日志可以重用或收缩之前的状态。在这种情况下是`LOG_BACKUP`，也就是说，要收缩事务日志，需要先备份事务日志并收缩它，或者备份日志，让 SQLServer 重用日志空间。

`log_reuse_wait_desc`可以在[此处](https://docs.microsoft.com/en-us/sql/relational-databases/logs/the-transaction-log-sql-server?view=sql-server-2017)找到状态描述

# ios - 如何创建具有透明背景的 UIImage

> ID：13519128
> 
> 赞同：5
> 
> 时间：2012-11-22T19:42:11.857
> 
> 标签：ios, uitableview, uiimage, cgcontext

我正在为 UITableViewCell 上的“UIImageView”属性动态创建一个（绘制我自己的自定义）UIImage。

当用户选择 tableView 单元格时，单元格背景会变为蓝色，但我的自定义 UIImage 背景不会 - 它仍然是白色的（所以很明显我有一张图片坐在那里）。我尝试了各种绘图方法

```
// when I create the cell
cell.imageView.backgroundColor = [UIColor clearColor];
cell.imageView.opaque = NO;

// 1\. when I create the UIImage - clearColor background
CGContextSetFillColorWithColor(context, [UIColor clearColor].CGColor);
CGContextFillRect(context, rect);

// 2\. when I create the UIImage - clear background
CGContextClearRect(context, rect); 
```

但是在这两种方法中，背景都是黑色的。唯一可行的方法是完成图像的创建，然后根据第一张图像应用“CGImageCreateWithMaskingColors”创建第二张图像 - 屏蔽背景。

有没有办法我可以首先“绘制”透明背景？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T19:51:13.670

确保在设置图像上下文时传递`NO`给函数的`opaque`参数。`UIGraphicsBeginImageContextWithOptions`

# php - 显示数量有限。codeigniter 分页中的页面链接数

> ID：13519130
> 
> 赞同：0
> 
> 时间：2012-11-22T19:42:39.063
> 
> 标签：php, codeigniter

我想显示一个有限的号码。页面链接，比如 10 个链接中的 5 个，codeIgniter 中是否有任何已知或经过验证的方法来实现这一点。

所以可以说用户现在可以看到以下链接

```
prev, 1(selected), 2, 3, 4, 5... next 
```

用户点击，比如说 4，现在他看到了

```
prev... 3, 4(selected), 5, 6, 7...next 
```

现在他点击 7

```
prev... 6, 7(selected), 8, 9, 10...next 
```

如何在代码点火器中执行此操作？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:03:31.987

有一个内置的[分页类](http://ellislab.com/codeigniter/user-guide/libraries/pagination.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:11:47.800

codeIgniter 提供了一个内置的分页类。您可以在用户指南中找到它。

在函数中定义一个起始索引变量，您希望在其中使用分页为零。

```
public function pagination($start_index = 0) 
```

{

```
 $result = $this->model->get_results($data); //this $data is the argument which you are passing to your model function. If you are using database to get results array.

  $items_per_page = 10;   //this is constant variable which you need to define

  $filtered_result = array_splice($result, $start_index, ITEM_PER_PAGE_USERS);

  $model['$filtered_result'] = $filtered_result;

  $total_rows = count($result);

  $model['page_links'] = create_page_links (base_url()."/controlelr_name/pagination",ITEM_PER_PAGE_USERS, $total_rows);

  $this->load->view('controller_name/view_file_name', $model); 
```

}

```
 function create_page_links($base_url, $per_page, $total_rows) {

$CI = & get_instance();
$CI->load->library('pagination');

$config['base_url'] = $base_url;
$config['total_rows'] = $total_rows;
$config['per_page'] = $per_page; 

$CI->pagination->initialize($config); 

return $CI->pagination->create_links(); 
```

}

此创建页面链接功能是一个通用功能......更多解释请查看用户指南中的[分页类......](http://codeigniter.com/user_guide/libraries/pagination.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T01:16:31.307

在 Libraries 文件夹中找到分页类并编辑此变量：

```
var $num_links 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-05T08:43:46.290

当您想修复**分页页码**时，您可以修改`$num_links`：

```
$config['total_rows'] =100;
$config["num_links"] = 5;
$config['full_tag_open'] = '<ul class="pagination">';
$config['full_tag_close'] = '</ul>';
$config['first_link'] = false;
$config['last_link'] = false; 
```

它显示如下： << 2 3 4 5 6 7 >>

# php - Symfony 请求：setController、setAction、setModule

> ID：13519131
> 
> 赞同：0
> 
> 时间：2012-11-22T19:42:58.443
> 
> 标签：php, symfony, request

在 zf2 中，我可以选择使用 Zend/Request 对象发出*虚假*请求。因此我可以做一个内部请求。我想用一些数据执行我网站的一部分。因此，我必须使用控制器、模块和动作。

我该怎么做？

[这是来自上一个问题](https://stackoverflow.com/questions/13160256/zend-dispatch-return-variables-from-controller-action)的 zf2 的代码片段：

`/application/controller/IndexController.php`

```
<?php
class IndexController extends Zend_Controller_Action
{
    public function init(){}
    public function indexAction()
    {
        //process some data from $_GET, $_POST, maybe (via framework, ofc).
    }
} 
```

`/public/index2.php`

```
<?php
//--cut--
$application->bootstrap();
$options = array(
    'action' => 'index',
    'controller' => 'index',
    'module' => 'default'
);
if( isset($options['action'], $options['module'], $options['controller']) )
{
    //*
    $request = new Zend_Controller_Request_Http ();
    $request->setModuleName($options['module'])->setActionName($options['action'])->setControllerName($options['controller']);
    $frontController = Zend_Controller_Front::getInstance ()->returnResponse ( true );
    //*/

    $response = new Zend_Controller_Response_Http ();
    $frontController->getDispatcher ()->dispatch ( $request, $response );
    var_dump($response);
} 
```

**谢谢！**

# android - Android：在 Activity 和 Service 之间使用的 Singleton

> ID：13519140
> 
> 赞同：8
> 
> 时间：2012-11-22T19:43:32.757
> 
> 标签：android, singleton

我想知道创建一个在某些 Android 活动和 Android 服务之间使用的单例是否是个坏主意。据我所知，只要整个流程还活着，就可以使用静态字段，在我的例子中是单例。

我的计划是使用单例而不是 Parcelable 在我的活动和后台服务之间共享数据。所以我的 Activity1 将通过调用 MySingleton.getInstance().addData(foo); 添加一些数据；然后我会发送一个 Intent 通知我的服务新数据已添加到单例中。接下来，我的 BackgroundService 将处理意图并调用 MySingleton.getInstance().getLatestData(); 然后它将处理数据（需要一些时间）。服务的结果接下来将通过使用单例“发布”回来并触发广播意图，这些意图由 Activity1（如果还活着）处理，并且 Activity1 将从单例中检索结果。

你们认为这是一个坏主意吗？

编辑：我想要实现的是从 Web 服务器下载数据并解析它并返回结果的软件的和平。所以我的 Activity 会创建 DownloadJob 对象。DownloadJob-Object 将被放入排队和管理所有 DownloadJobs 的 DownloadScheduler (Singleton)。DownloadScheduler 将允许同时运行 5 个 DownloadJobs 并使用队列来存储等待。有效的下载将由 DownloadService (IntentService) 完成，它通过 Intent 获得通知，现在应该立即执行（下载）新的 DownloadJob。DowanlodService 将从 DownloadSchedulers 队列 (PriorityBlockingQueue) 中检索下一个作业，并通过设置 DownloadJob.setResult(...) 返回 Result 并启动广播意图，即 Result 已准备好，

因此，在我的场景中，我将使用单例从 DownloadService 访问 DownloadJobs，而不是制作 DownloadJob Parcelable 并将其与 Intent 一起传递。所以我会避免这个问题，我在内存中有两个 DownloadJobs（一个在“活动站点”上，一个在“服务站点”上）。

有什么建议可以更好地解决这个问题吗？

像 DownloadScheduler(Singleton) 这样的静态实例是否会被 android 系统在低内存上释放？那么将应用程序子类化并保留引用（非静态）会避免这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T03:47:42.040

如果您将单例*用作*后台服务之间的共享内存，我假设它在不同的线程上执行操作，您可能会遇到同步问题或读取不一致的数据。

如果单例中的数据不同步，则必须小心，因为您依赖“协议”来确保在后台线程正在写入时没有人在读取（这可能会导致错误）。

另一方面，如果它是同步的，您将面临面临错误的风险，因为读取数据的活动可能会被阻塞，等待服务完成将数据写入单例中。

正如另一位所说，您还必须记住，如果操作系统需要资源，您的单例可能会被释放，并且您的数据可能不再存在。

我宁愿使用[otto](http://square.github.com/otto/)或[eventbus 之类的事件总线](https://github.com/greenrobot/EventBus)

编辑：

使用单例作为后台（意图）服务的入口点是 2010 年 Virgil Dobjanschi[谈论](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)为 android 构建 rest 客户端应用程序所建议的方法。

建议的方法是使用一个单例来作为正在进行的请求的控制器。还请考虑对意图服务的请求已经由操作系统排队，因此您可以抛出几个意图，这些意图将由意图服务按顺序处理。

前段时间我还尝试以此为起点创建一个图书馆，但仍未完成。[你可以在这里](https://github.com/fedepaol/PostmanLib--Rings-Twice--Android)找到来源

我当然不会做的是将您的数据存储在单例中。我更喜欢的方法是将数据存储在一些持久性存储中（例如 sql/preferences/file/content provider），并通过广播消息让客户端知道更改（或者，如果您使用的是 content provider，则通过观察者）。

最后，在某种程度上，这是[robospice](https://github.com/octo-online/robospice)库遵循的方法，它看起来相当成熟，并提供了许多有趣的功能，例如缓存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T03:38:40.060

一个更好的想法是继承 Application 并将任何长期存在的对象放在那里。通过继承 Application 您可以正确处理应用程序的启动和关闭，这是单例无法轻松完成的。此外，通过使用应用程序，活动和服务可以共享对程序中模型的访问，而无需借助 parcelables。而且你可以避免单例给你的程序带来的所有问题。

您也不必求助于将所有内容存储在数据库中，这需要大量样板代码才能将一堆数据推入其中。它对在应用程序的各个部分之间共享行为没有任何作用，也没有对促进活动的通信和集中化做任何事情。如果您真的需要在关闭之间保持状态，请使用它，但如果不需要，您可以为自己节省大量工作。

您还可以考虑使用[Roboguice 之](http://code.google.com/p/roboguice/)类的东西，它可以将共享模型注入到您的活动和服务中。

您可能会发现这很有帮助：

[Android开发中的设计模式原则是什么？](https://stackoverflow.com/questions/3235380/whats-design-pattern-principle-in-the-android-development/4329537#4329537)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T03:38:11.907

使用这样的单例并不一定是个坏主意，但是如果 Android 决定停止您的进程，您将失去它的状态。您可能需要考虑将状态存储在 SQLite 数据库或持久队列中（以[磁带](http://square.github.com/tape/)为例）。

# javascript - 如何解决这个 ReferenceError？

> ID：13519144
> 
> 赞同：1
> 
> 时间：2012-11-22T19:43:44.070
> 
> 标签：javascript, jquery

我有一个基于 Django 的 Web 应用程序。我使用[Scrapy Crawler](http://scrapy.org/)来抓取网页。目前，我的目标是能够使用 jQuery 和 AJAX 请求从网页中控制爬虫。

我的理论设置如下：

*   在网页上，我有一个按钮。当我单击按钮时，爬虫在服务器端启动。
*   爬虫启动后，我会定期向服务器发送 AJAX GET 请求，[`window.setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)以了解到目前为止已爬取了多少网页。
*   爬虫完成后，GET 请求应使用[`window.clearInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval).

这些是我当前代码中的相关行：

```
$(document).ready(function() {

    // This variable will hold the ID returned by setInterval
    var monitorCrawlerId;

    $startCrawlerButton.on('click', function(event) {

        // This function should be run periodically using setInterval
        var monitorCrawler = function() {

            $.ajax({

                type: 'GET',
                url: '/monitor_crawler/',
                // ...
                success: function(response) {

                    // if the server sends the message that the crawler
                    // has stopped, use clearInterval to stop executing this function
                    if (response.crawler_status == 'finished') {

                        clearInterval(monitorCrawlerId);

                    }

                } 

            });

        };

        // Here I send an AJAX POST request to the server to start the crawler
        $.ajax({

            type: 'POST',
            url: '/start_crawler/',
            // ...
            success: function(response) {

                // If the form that the button belongs to validates correctly,
                // call setInterval with the function monitorCrawler defined above
                if (response.validation_status == 'success') {

                    monitorCrawlerId = setInterval('monitorCrawler()', 10000);

                }

            }

        });

    });
}); 
```

**问题：**当我执行这段代码时，我在 Firefox 的 web 控制台中得到了这个：

```
ReferenceError: monitorCrawler is not defined 
```

然而，奇怪的是，该函数`monitorCrawler`无论如何都会定期执行。但是每次执行时，我都会再次收到相同的错误消息。如果我把它放在`monitorCrawler`外面，`$startCrawlerButton.on()`我仍然会得到同样的错误。我该如何解决这个问题？由于我是 JavaScript 新手，因此感谢您提供任何帮助。非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T19:51:10.430

`setInterval``window`，当第一个参数是字符串时，在全局 ( ) 上下文中解析。您可以给它一个指向要调用的函数的变量，甚至：

```
setInterval(function(){monitorCrawler();}, 10000); 
```

这将创建一个闭包，其中局部变量`monitorCrawler`在间隔触发时仍然存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T19:48:47.200

改变

```
setInterval('monitorCrawler()', 10000); 
```

到

```
setInterval(monitorCrawler, 10000); 
```

永远不要将字符串传递给[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval), 但函数引用！它们`eval`每次都会被编辑，并且在全局范围内 - 但是您的`monitorCrawler`函数对于点击处理程序来说是本地的（我猜“把它放在外面”你的意思是“进入就绪回调”）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T19:47:26.727

尝试

```
monitorCrawlerId = setInterval(monitorCrawler, 10000); 
```

带参数：

```
monitorCrawlerId = setInterval(function(){
      //prepare params.
      monitorCrawler(/* param1, param2*/);
   }, 10000); 
```

# gdb - 奇怪的 gdbserver 输出显示在我的目标设备上

> ID：13519145
> 
> 赞同：2
> 
> 时间：2012-11-22T19:43:45.787
> 
> 标签：gdb, stderr, gdbserver, error-suppression, uclinux

当我在 uclinux 目标设备 blackfin bfin537/stamp 上运行 gdbserver 时，它工作得很好，但它总是会产生烦人的输出 Request to get for unknown register 232 Request to get for unknown register 236

这是非常烦人的，因为 gdb 客户端的每一步都会在输出屏幕终端 RS232 上导致几个该错误我被建议更改 bfin 编译器版本并使用不同版本的 uclinux 重建 gdb 服务器，....没有一个工作，甚至用不同版本的 bfin-uclinux-gcc 编译我的代码都没有解决我的问题。

我决定重新编译 gdbserver.c 并消除产生错误的行，但实际上该行在任何用于编译的 gdbserver 相关文件中都不存在。

我决定通过运行 gdbserver :3298 process 1>/dev/null 2>/dev/null 来抑制 gdb 服务器的 stderr 输出，但这并没有解决它如何配置我的 gdb 客户端以请求特定的寄存器（bfin- uclinux-gdb) 与 bfin537-stamp 相关吗？

我认为这个错误起源于 uclinux 系统后台系统进程中的其他地方。我想找到哪个进程在 stderr,stdout 中写入我不知道它并且我想抑制它的输出？

我应该在busybox shell 或/bin/bash 中更改某些内容以消除所有stderr 输出，这意味着如果我将所有父shell 输出或stderr 发送到/dev/null 谢谢

# xml - 使用 AS3 从 XML 列表加载 XML 对象

> ID：13519146
> 
> 赞同：-1
> 
> 时间：2012-11-22T19:44:20.653
> 
> 标签：xml, actionscript-3, list, flash-cs5

当用户单击列表中的名称时，我正在尝试从列表中加载描述、地址等！

堆栈溢出成员在这方面帮助了我很多，我感谢他，但是我仍然无法将所需信息加载到文本框中！运行我发布的以下代码时，出现这些错误

**列表，“列表”层，第 1 帧，第 36 行 1084：语法错误：在类型之前需要右括号。**

**列表，“列表”层，第 1 帧，第 36 行 1084：语法错误：在右括号之前需要标识符。**

我这么远，但这么远，请有人帮忙谢谢你:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:55:43.987

为了将来参考，有问题的行是：

```
[ListEvent type="name" bubbles=false cancelable=true columnIndex=0 rowIndex=0 index=0 item=[object Object]] 
```

您可以安全地删除它。它只是在**类**（不是像这样的帧）中使用的一种表示法，用于表示该类调度该类型的事件。

[这是一个类似的问题，它提供了有关使用这些行的更多信息。](https://stackoverflow.com/questions/5629961/square-bracket-before-class-definition-in-as3)

还有大卫，在发布问题时，请尝试删除不影响问题的元素并在问题中发布整个代码（当然，如果它不是太大的话）。这样，当某人来自搜索引擎或被另一个问题链接时，即使pastie 已关闭，他们也可以看到代码。

# map - map[Task]int64 其中Task是一个接口

> ID：13519152
> 
> 赞同：3
> 
> 时间：2012-11-22T19:44:56.037
> 
> 标签：map, go, identity

假设我在 Go 库中定义了以下接口：

```
type Task interface {
    Do() error
}

func Register(task Task) { ... }

func GetId(task Task) int64 { ... } 
```

在`Register()`中，库将唯一性`int64`与每个任务实例相关联。`GetId()`必须返回给定任务的标识符。

我最初的想法是将关联存储为`map[Task]int64`. 这似乎工作正常，但有人告诉我，如果实现的对象`Task`不是平等可比的（例如，`struct`包含 a 的 a `map`），它会中断。我仍然需要检查这是否属实。

我打算尝试使用一片 of`struct { task Task; id int64 }`代替并对其进行迭代，但这仍然需要相等的可比较`Task`实例。而 AFAIU 在 Go 中没有身份比较。

我怎样才能拥有从`Task`实例到它们的 ID 的强大映射？

编辑：到目前为止提出的两种解决方案都有效，但它们的缺点是每个任务实现都必须包含一些重复的代码来处理 ID。我可以在可以嵌入的 TaskBase 中提供该代码`struct`，但理想情况下，我更喜欢不需要实现甚至知道 ID 的解决方案（它们在库内部，在库之外没有任何意义）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T20:42:20.120

一个更完整的例子： [http ://play.golang.org/p/1RzDiw7F9t](http://play.golang.org/p/1RzDiw7F9t)

```
package main

import (
    "fmt"
    "math/rand"
)

type Task interface {
    Do() error
    ID() int64
}

type XTask struct {
    id int64
    // other stuff
}

func NewXTask( /*task parameters...*/) *XTask {
    t := &XTask{ /*initialize members*/}
    t.id = Register(t)
    // possibly more initialization...
    return t
}

func (t *XTask) Do() error  { return nil }  // stub
func (t *XTask) ID() int64  { return t.id }

var taskRegistry = map[int64]Task{}

func Register(t Task) int64 {
    var id int64
    for {
        id = rand.Int63()
        if _, exists := taskRegistry[id]; !exists {
            break
        }
    }
    taskRegistry[id] = t
    return id
}

func main() {
    t1 := NewXTask()
    t2 := NewXTask()
    fmt.Printf("%x\n", t1.ID())
    fmt.Printf("%x\n", t2.ID())
} 
```

我按照 Daniel 的建议使用了 ID 方法，然后我将地图从你拥有的方式向后翻转。这是因为 Task 对象知道自己的 ID，因此不需要从 Task 到 ID 的映射。然而，从 ID 到任务的映射对于保证唯一性很有用。如果您发现自己只有一个 ID 并且需要相应的 Task 对象，它可能会在其他时候派上用场。

另请注意，此示例不是 goroutine 安全的。如果需要，您必须添加同步。

# android - 有没有办法在没有专用服务器的情况下在 Android 中使用 GCM？

> ID：13519153
> 
> 赞同：7
> 
> 时间：2012-11-22T19:44:57.820
> 
> 标签：android, messaging, google-cloud-messaging

我正在构思一个将数据从一台设备发送到另一台设备（如图片消息）的 Android 应用程序，但由于我没有服务器，我正在研究其他消息传递方式。Google Cloud Messaging (GCM) 似乎是一个不错的选择，因为它是为 Android 设计的，并且可以免费使用，但它仍然需要服务器才能使用。有没有办法绕过这个要求——比如在应用程序本身上运行 GCM 服务器？或者有没有更好的方法在 Android 上进行无服务器消息传递？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T14:06:32.497

是的，您可以 - 可以从设备发送从服务器发送的相同消息。但是，这样做存在以下问题：

1.  您将 API 密钥放入您的应用程序中，因此有人可以反编译您的 APK 以获取它。
2.  您的用户需要某种方式来相互共享他们的 GCM 注册 ID。如果两个用户的 ID 同时过期，则无法再次共享它们。

确实，构建您的应用程序并将其托管在 AppEngine 上大约需要一个小时来编写，并且每月花费不到 10 美元，即使对于大量用户来说也是如此。

对于一个用 Java 编写的非常简单的消息服务器示例，请查看支持我的一个应用程序的服务器：

[https://github.com/charlesmunger/touch-to-text-server.git](https://github.com/charlesmunger/touch-to-text-server.git)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T20:08:28.090

我认为没有服务器就很难有效地做你想做的事，但你可以查看 Parse 的 SDK。可以免费试用，并在一定的月度限制内免费使用。

[文档。](https://parse.com/docs/push_guide#sending/Android) 您可能需要阅读“向频道发送推送”和“使用高级定位”。

# jquery - jQuery动画在触摸事件中不起作用

> ID：13519156
> 
> 赞同：0
> 
> 时间：2012-11-22T19:45:08.780
> 
> 标签：jquery, jquery-animate, jquery-events, touch-event

在以下代码中`$('#slidemenu-container').animate(...)`不起作用：

```
$(document).live('touchend', function(event, data) {
    var container = $("#slidemenu-container");
    var container2 = $("#bg-yellow-id");

    if (container.has(event.target).length === 0 && container2.has(event.target).length === 0 && settings.katMenuVisible) {

        // workaround because showHide(...) with animate isnt working
        var left = '-=' + settings.listSlideWidth + 'px';
        $("#show-hide-kat").css({
            'background-image': "url('" + yiiBaseUrl + "/images/NAVbutton_opennav.png')"
        });

        $('#slidemenu-container').animate({
            left: left,
        }, settings.duration, function() {

        });

        settings.katMenuVisible = !settings.katMenuVisible;

    }
}); 
```

如果我使用以下函数修改 left 属性，它会`.css()`起作用：

```
$(document).live('touchend', function(event, data) {
    var container = $("#slidemenu-container");
    var container2 = $("#bg-yellow-id");

    if (container.has(event.target).length === 0 && container2.has(event.target).length === 0 && settings.katMenuVisible) {

        // workaround because showHide(...) with animate isnt working
        var left = '-=' + settings.listSlideWidth + 'px';
        $("#show-hide-kat").css({
            'background-image': "url('" + yiiBaseUrl + "/images/NAVbutton_opennav.png')"
        });

        container.css({
            'left': left
        });

        settings.katMenuVisible = !settings.katMenuVisible;

    }
}); 
```

有什么问题？我尝试了一切，但动画仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:49:37.187

也许尝试更简单的方法，例如： .animate({"left": "+=50px"}, "slow");

顺便说一句，我不确定你想做什么，你试图让它切换到左边并动画？让它出现？

# ios - iOS 编程中的可达性 AlertView

> ID：13519157
> 
> 赞同：1
> 
> 时间：2012-11-22T19:45:11.730
> 
> 标签：ios, xcode, ipad

所以我让警报视图检测是否存在活动的互联网连接。

**这是代码：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter] addObserver:self
    selector:@selector(reachabilityChanged:)
    name:kReachabilityChangedNotification
    object:nil];
    Reachability * reach = [Reachability reachabilityWithHostname:@"www.google.com"];
    reach.reachableBlock = ^(Reachability * reachability)
    { 
     dispatch_async(dispatch_get_main_queue(), ^{
     blockLabel.text = @"";  
     });
    };
    reach.unreachableBlock = ^(Reachability * reachability)
    {
     dispatch_async(dispatch_get_main_queue(), ^{
     blockLabel.text = @"You are not connected to the Internet";
     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Please connect to Internet"
     message:nil
     delegate:self
     cancelButtonTitle:nil
     otherButtonTitles:nil];
     UIActivityIndicatorView *progress= [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(125, 50, 30, 30)];
     progress.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
            [alert addSubview:progress];
            [progress startAnimating];
            [alert show]; 
        });
    };
    [reach startNotifier];
    // Do any additional setup after loading the view, typically from a nib.
} 
```

所以我的应用程序检测是否有互联网连接。但问题是，如果我在 iPhone 上打开互联网并打开应用程序，它仍然说没有互联网连接。我该怎么办……</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:18:34.053

好吧，我通过使用通知解决了这个问题..**参考代码**

```
-(void)reachabilityChanged:(NSNotification*)note
{
    Reachability * reach = [note object];

    if([reach isReachable])
    {
        notificationLabel.text = @"Notification Says Reachable";
        NSLog(@"Internet is Up");
    }
    else
    {
        notificationLabel.text = @"Notification Says Unreachable";
        NSLog(@"Internet is Down");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:59:19.227

您始终可以通过注册可访问性通知来不间断地检查主机可访问性（或互联网连接）。

关于如何做到这一点的最佳示例之一可以在 SO 上找到：[如何检查 iPhone SDK 上的活动 Internet 连接？](https://stackoverflow.com/a/3597085/653513)

这样，您的应用程序将始终知道主机是否可访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T20:02:04.823

不知道您的稀疏代码做了什么，因为它甚至看起来不像您的 Reachability 类是 Apple 围绕 SystemConfiguration API 的 Reachability 示例代码包装器，您可以在[http://developer.apple.com/library/ios/#示例代码/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

最简单和最明确的检查只是针对特定 url 的未缓存 NSURLRequest （不仅仅是一个主机名，它只是测试 DNS 解析是否正常工作，这不是一个明确的测试，甚至可以被缓存）

# css - 有没有办法根据正文的字体大小指定行高和边距？

> ID：13519160
> 
> 赞同：1
> 
> 时间：2012-11-22T19:45:56.800
> 
> 标签：css, font-size

一个直截了当的 CSS 问题。假设我们有这种风格：

```
 body { 
    font-size : 16px;
  }

  p {
   font-size : 0.875em; // relative to parent, 14px
   line-height : 1em; //relative to this element, 14px
   margin-bottom : 1em; //relative to this element, 14px
  } 
```

这意味着`<p>`s 的 font-size 为 14px，line-height 为 14px，margin-bottom 为 14px。

我想要的是相当于：

```
body : {
  font-size : 16px;
}

p { 
  font-size : 0.875em; // relative to parent, 14px;
  line-height : 1em; // relative to parent line-height, 16px;
  margin-bottom : 1em; // relative to parent margin-bottom, 16px;
} 
```

我想要这个的原因是因为我想要一个尊重其基线的响应式字体大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:06:10.657

从技术上讲，您可以使用[`rem`](http://www.w3.org/TR/css3-values/#rem-unit)，尽管它指的是`html`元素的字体大小（因此您需要使用`html`选择器，而不是`body`，并让`body`继承自`html`）。但是，浏览器支持是有限的。

因此`em`，仅考虑您的其他设置，使用该单元是一个更好的主意。如果`p`has `font-size: 0.875em`，则要将边距设置为其父字体大小的值（计算 1/0.875），您将使用相反的值：`margin-bottom: 1.143em`。

另一方面，将`body`元素的字体大小视为复制文本的大小是很自然的，并且`p`元素通常是复制文本。因此，将（如果您完全设置）设置为所需的复制文本大小会更`font-size`自然`body`。这会让事情变得容易一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:03:36.430

如果您始终知道父元素的大小和子元素的大小，那么我可以为您提供 Sass 的解决方案。

```
@function em2baseline($font-size, $size: 1em, $base-size: 1em) {
    $collector: ();

    @each $s in $size {
        $collector: append($collector, ($s / $font-size * $base-size));
    }
    @return $collector;
} 
```

`$font-size`是子元素的大小，`$base-size`是相对于我的大小`$base-size`的列表（一个列表，因此我可以将它与边距/填充简写一起使用），并且 $base-size 是我想要使其相对的大小。

```
@debug em2baseline(2em);
// 0.5em

@debug em2baseline(2em, 1.5em);
// 0.75em 
```

如果你不喜欢使用 Sass，你仍然可以自己计算：

```
[size you want] / [child size] * [base size] 
```

# css - Chrome 开发者工具中字体资源旁边的数字是什么意思？

> ID：13519165
> 
> 赞同：0
> 
> 时间：2012-11-22T19:46:07.150
> 
> 标签：css, google-chrome, developer-tools

![红色数字](../Images/48c005bd65879822951bf078bc0520cd.png)

这些数字是什么意思？

询问的原因是字体未使用以下 CSS 正确呈现：

```
@font-face {
    font-family: 'letter';
    src: url('../fonts/letter-bold.otf') format('opentype');
    font-weight: bold;
}

.title {
    font-size: 22pt;
    font-family: letter,Arial,Helvetica,sans-serif;
    font-weight: bold;
} 
```

不是这里的问题，但您可以在评论中回答 -从相对于 css 文件的路径加载是否`'../fonts/'`正确？`@font-face`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:34:03.047

Chrome 可以渲染 OTF 字体文件吗？我相信 Chrome 使用 .woff 字体类型进行字体嵌入。如果您没有 woff 文件类型，请使用 font squirrel 生成新的字体源。EOT 用于 IE，Woff 用于 Safari/Chrome，它还会为您输出 TTF 和 SVG。

我认为这将解决问题。

这是生成器的链接：[http ://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:00:40.417

这意味着发生了错误。在 Firefox/Firebug 中，没有资源选项卡，但在网络选项卡中，它会显示**304 Error not found** for the same font files。

由于 MIME 设置，字体无法下载。[@font-face 不能在 Windows 服务器上工作？](https://stackoverflow.com/questions/10141920/font-face-not-working-on-windows-server)

此 SO 答案中提供了正确的 MIME 类型：[Proper MIME type for fonts](https://stackoverflow.com/a/2907377/573261)

# c# - 派生的 C# 接口属性可以覆盖具有相同名称的基本接口属性吗？

> ID：13519167
> 
> 赞同：16
> 
> 时间：2012-11-22T19:46:13.697
> 
> 标签：c#, inheritance, properties, interface, overriding

我正在尝试创建一个接口继承系统，该系统使用相同的属性但始终具有进一步的派生类型。所以基属性应该被派生接口以某种方式覆盖或隐藏。

例如，派生为丈夫和妻子的两个界面，男人和女人，也是界面。Man 和 Husband 接口都有一个“sweetheart”属性，而 Woman 和 Wife 有一个“darling”属性。现在，Man 的“sweetheart”属性是 Woman 类型，而 Husband 的相同“sweetheart”属性应该是 Wife（源自 Woman）。女人和妻子的“宠儿”财产也是如此。

```
public interface Man // base interface for Husband
{
    Woman sweetheart { get; set; }
}

public interface Woman // base interface for Wife
{
    Man darling { get; set; }
}

public interface Husband : Man // extending Man interface
{
    new Wife sweetheart { get; set; } // narrowing "sweetheart" property's type
}

public interface Wife : Woman // extending Woman interface
{
    new Husband darling { get; set; } // narrowing "darling" property's type
}

public class RandomHusband : Husband // implementing the Husband interface
{
    private RandomWife wife;
    public Wife sweetheart { get { return wife; } set { wife = value; } }
}

public class RandomWife : Wife // implementing the Wife interface
{
    private RandomHusband husband;
    public Husband darling { get { return husband; } set { husband = value; } }
} 
```

这段代码是错误的，它不起作用。我收到通知说我没有实现基本`Man.sweetheart`和`Woman.darling`属性，并且已实现`Husband.sweetheart`并且`Wife.darling`不会做，因为类型不匹配。有没有办法将属性的类型缩小到派生的类型？你如何在 C# 中实现它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-22T20:13:40.497

您可以通过使用具体实现类型参数化您的`Man`和接口来做到这一点：`Woman`

```
public interface IMan<M, W>
    where M : IMan<M, W>
    where W : IWoman<W, M>
{
    W Sweetheart { get; set; }
}

 public interface IWoman<W, M>
    where W : IWoman<W, M>
    where M : IMan<M, W>
{
    M Darling { get; set; }
} 
```

您的实现是：

```
public class Man : IMan<Man, Woman>
{
    public Woman Sweetheart { get; set; }
}

public class Woman : IWoman<Woman, Man>
{
    public Man Darling { get; set; }
}

public class Husband : IMan<Husband, Wife>
{
    public Wife Sweetheart { get; set; }
}

public class Wife : IWoman<Wife, Husband>
{
    public Husband Darling { get; set; }
} 
```

由于类型变得相当复杂，您可能需要考虑将关系移动到外部类/接口中：

```
public interface Relationship<TMan, TWoman> 
    where TMan : Man 
    where TWoman : Woman
{
    TMan Darling { get; }
    TWoman Sweetheart { get; }
}

public class Marriage : Relationship<Husband, Wife>
{
} 
```

然后你可以在处理具体实现时使用这个类来保持类型安全：

```
public static void HandleMarriage(Relationship<Husband, Wife> marriage)
{
    Husband h = marriage.Darling;
    Wife w = marriage.Sweetheart;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T19:55:50.940

你仍然需要满足男人和女人的界面以及丈夫和妻子......

```
public class RandomWife : Wife // implementing the Wife interface

    {
        private RandomHusband husband;
        public Husband darling { get { return husband; } set { husband = value; } }
        public Man  Wife.darling { get { return husband; } set { /* can't set anything */ } }

    } 
```

# c# - 从 CSV 文件读取并存储到数组

> ID：13519169
> 
> 赞同：-1
> 
> 时间：2012-11-22T19:46:24.420
> 
> 标签：c#

你能帮我用C#吗？我正在尝试在 C# 中创建一个打开 CSV 文件并将它们保存到数组的函数：

```
FileStream fileStream = new FileStream(guid.ToString(), FileMode.Open);
for (int i = 1; i > 200; i++) // it checks the first 200 lines
{
    int j = 0;
    string[] str = new string[j];
    do
    {                
        // saving each character to the variable until comma is found

    } while(str == '\n'); // read each character in a for loop until new line character found
} 
```

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T19:57:38.243

像这样的东西：

```
using (StreamReader r = new StreamReader(guid.ToString()))
{
    string line;
    int linesCount;
    ArrayList result = new ArrayList();
    while ((line = r.ReadLine()) != null && linesCount++ <= 200)
    {
         result.AddRange(line.Split(','));
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T20:16:30.793

手动解析 CSV 实际上非常棘手。您最好重用`TextFieldParser`（添加对`Microsoft.VisualBasic`程序集的引用）。

```
using Microsoft.VisualBasic.FileIO;

....

string[,] parsedCsv;
List<string[]> csvLines = new List<string[]>();
TextFieldParser parser = new TextFieldParser(new FileStream(guid.ToString(), FileMode.Open));
parser.Delimiters = new string[] { "," };
parser.TextFieldType = FieldType.Delimited;
int maxLines = 200, lineCount = 0;

try
{
    while (!parser.EndOfData && lineCount++ < maxLines)
    {
        csvLines.Add(parser.ReadFields());
    }
}
catch (MalformedLineException)
{
    Console.WriteLine("Line Number: {0} Value: {1}", parser.ErrorLineNumber, parser.ErrorLine);
    return;
}

parsedCsv = new string[csvLines.Count, csvLines[0].Length];

for (int i = 0; i < csvLines.Count; i++)
{
    for (int j = 0; j < csvLines[i].Length; j++)
    {
        parsedCsv[i, j] = csvLines[i][j];
    }
} 
```

我在这里假设输出将是一个二维字符串数组 - 您可能需要根据您所追求的内容调整此代码，特别是如果您必须应对每行不具有相同的情况字段数（可能不太可能，但仍然如此）。

真正有用的`TextFieldParser`是它可以处理不同类型的分隔符。`parser.Delimiters = new string[] { "\t" };`例如，通过设置，同样的代码可以解析制表符分隔的文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T19:52:34.500

关于什么：

```
string[] lines = File.ReadAllLines(path);
if(lines.Length >= 200){
    for(int i = 0; i < 200; i++){
          string[] str = lines[i].Split(',');
          //do something here
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T19:50:30.523

您可以只使用 string.Split(',') 扩展方法。

```
using (StreamReader streamReader = new StreamReader(File.OpenRead(guid.ToString())))
{
    for (int i = 0; i <= 200; ++i)
    {    
        string[] str = streamReader.ReadLine().Split(',');
    }
} 
```

Split 扩展方法将返回由逗号分隔的各个值的字符串数组。

# java - 赋值运算符有问题

> ID：13519170
> 
> 赞同：0
> 
> 时间：2012-11-22T19:47:01.827
> 
> 标签：java, android, arrays

嗨，我正在使用 android 中的 AI 做棋盘游戏。

我遇到了一个对我来说没有意义的情况。

代码：

```
 for(int y = 0; y < BOARD_SIZE ; y++)
    {
        Log.i(TAG, "before calling virtual mBoard:" + mBoard[y]);
    }

    virtualBoard = mBoard;  // int arrays
    virtualBoard[x] = nextMove(counter);

    for(int j = 0; j < BOARD_SIZE ; j++)
    {
        Log.i(TAG, "before calling AIValue mBoard:" + mBoard[j]);
    } 
```

当我让 virtualBoard 等于 mBoard 时，我只是将一个数组分配给另一个数组，但是日志为什么不一样呢？这怎么可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T19:49:16.480

> 当我让 virtualBoard 等于 mBoard 时，我只是将一个数组分配给另一个数组

不，您将 的值分配`mBoard`给`virtualBoard`。这些变量的值不是数组——它们是*引用*。所以在赋值之后，`mBoard`和的值`virtualBoard`是对同一个数组的引用。然后在后续语句中更改该数组的内容。

有点像这种情况：

*   我有一张纸，上面写着我的家庭住址
*   我把那张纸复印了一份给弗雷德
*   弗雷德走到纸上的地址，把前门漆成绿色。
*   当我回到家时，我看到我的前门是绿色的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:48:50.070

```
 virtualBoard = mBoard;  // int arrays
    virtualBoard[x] = nextMove(counter); 
```

在第一个作业中，您没有创建数组的副本。而是对您的数组的引用的副本。

因此，您`virtualBoard`引用的数组与`mBoard`. 因此，您对`array`using any所做的任何更改`reference`都将反映在 other`reference`上。

# java - 如何在 HTTP 请求中发送对象

> ID：13519174
> 
> 赞同：0
> 
> 时间：2012-11-22T19:47:17.133
> 
> 标签：java, spring, rest, soap

我正在创建一个可以正确处理传入请求的*Web 服务*（我知道，它是一个描述）我找到了一些示例代码，这些示例代码呈现*SOAP WS*，如下所示：

```
 @SoapAction("some fine url")
    @ResponsePayload
    public CertResponse  getCert(@RequestPayload Cert param) 
    {...} 
```

它`Cert`从请求中获取对象并正确管理它。我想用 REST 方法来做，我把这个类改成如下所示：

```
 @RequestMapping(value="getCert", method = RequestMethod.POST)
    @ResponseBody
    public CertResponse  getCert(@RequestBody Cert param) 
    {...} 
```

但我不知道如何甚至是否可以编写一个可以通过 HTTP Post 发送对象的客户端。

谁能给我一个提示我如何发送对象`Cert`？或者如果我必须坚持下去，`@SoapAction`我应该怎么做才能让它发挥作用？我想删除`@Controller`是不够的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:29:33.050

在 SOAP 方法中，有一种定义明确的方法可以将每个类对象转换为 SOAP 格式的 XML。因此，没有任何努力。

如果您将使用 RESTful 方法，则必须描述您的 Cert 或 CertResponse 对象将如何写入/读取响应/请求。

基本上你有三个选择：

1.  使用 JSON 或 XML 或纯字符串。转换您的 Web 服务描述符，以便请求和响应是其中之一（JSON、XML、字符串）。然后您的 getCert 方法应将请求转换为 Cert 对象，将您的响应准备为 CertResponse 对象并将其转换为适当的响应类型。

2.  保持您的 getCert 方法不变。但是您需要指定“如何从请求中读取 Cert 对象”和“如何将 CertResponse 对象写入响应” 您需要定义扩展接口 MessageBodyReader 和 MessageBodyWriter 的类。在这些类中，应该实现类似的转换逻辑，将您的对象转换为 JSON 或 XML 或字符串。

    在这两个选项中的任何一个中，您需要实现两件事：将 JSON/XML/String 转换为 Cert 的方法，将 CertResponse 对象转换为 JSON/XML/String 的方法。

    您可以执行基于文本的实现，它通过文本处理解析/构造请求/响应，并且仅使用 String 类。或者，您可以使用一些库，例如带有 JSONObject 类的 JSON 库，或者 Java 包附带的基于 Java SAX 或 DOM 的 XML 库。

3.  查看应用程序框架，例如 Spring。它们可能会提供将对象自动转换为 JSON 或 XML 的方法，从而减少必要的编程工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T20:01:13.537

**Spring**允许您将来自客户端的 JSON 对象作为请求参数传递，它会自动将它们转换为您的对象。[这个](https://stackoverflow.com/questions/8808030/requestbody-of-a-rest-application)讨论有一些例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T20:04:36.273

SOAP 服务与 REST 语义并不真正兼容。而且还不清楚您使用什么 SOAP 框架。通常，大多数 SOAP 框架为您提供一种或另一种方法来为您的 WSDL 生成 SOAP 客户端代码。您可以查看 cxf.apache.org。对于 REST 服务，使用 Jersey 或 Spring MVC 之类的东西

# c++ - c++应用程序中的钩子菜单和子菜单

> ID：13519177
> 
> 赞同：0
> 
> 时间：2012-11-22T19:47:29.603
> 
> 标签：c++, dll

嘿，我创建了一个 dll 将其注入我的应用程序以创建菜单和子菜单

我也下了订单，如果点击 subment 它应该显示消息

```
#include "stdafx.h"
#include "windows.h"

#define MYMENU_MESSAGEBOX   (WM_APP + 102) 
HINSTANCE inj_hMod;

HMENU CreateDLLWindowMenu() {
    HMENU hMenu;
    HWND hWnd = FindWindow(NULL, TEXT("MainSvrt on port 51752"));
    hMenu = GetMenu(hWnd);
    HMENU hMenuPopup;

    if (hMenu == NULL) {
        return FALSE;
    }

    hMenuPopup = CreateMenu();
    AppendMenu(hMenu, MF_POPUP, (UINT_PTR) hMenuPopup, TEXT("Test"));
    AppendMenu(hMenuPopup, MF_STRING, MYMENU_MESSAGEBOX, TEXT("MessageBox"));
    DrawMenuBar(hWnd);

    HWND prnt_hWnd;
    LRESULT CALLBACK DLLWindowProc(HWND, UINT, WPARAM, LPARAM);
    DLLWindowProc;
}

DWORD WINAPI ThreadProc(LPVOID lpParam) {
    MSG messages;
    wchar_t *pString = reinterpret_cast<wchar_t *>(lpParam);
    HMENU hMenu = CreateDLLWindowMenu();

    while (GetMessage(&messages, NULL, 0, 0)) {
        TranslateMessage(&messages);
        DispatchMessage(&messages);
    }

    return 1;
}

LRESULT CALLBACK DLLWindowProc(HWND hwnd, UINT message, WPARAM wParam,
        LPARAM lParam) {
    switch (message) {
    case WM_COMMAND:
        switch (wParam) {
        case MYMENU_MESSAGEBOX:
            MessageBox(hwnd, L"Test", L"MessageBox", MB_OK);
            break;
        }
        break;
    case WM_DESTROY:
        PostQuitMessage(0);
        break;
    default:
        return DefWindowProc(hwnd, message, wParam, lParam);
    }
    return 0;
}

unsigned __stdcall Init(void* pArg) {
    return 1;
}

BOOL APIENTRY DllMain(HMODULE hMod, DWORD ul_reason, LPVOID lpRes) {
    if (ul_reason == DLL_PROCESS_ATTACH) {
        inj_hMod = hMod;
        CreateThread(0, NULL, ThreadProc, (LPVOID) L"MainSvrt", NULL, NULL);

        if (!CreateThread(0, 0, (LPTHREAD_START_ROUTINE) Init, &hMod, 0, 0)) {
            ::MessageBoxA(0, "CreateThread() failed", 0, MB_OK | MB_ICONSTOP);
        }
    }

    return TRUE;
} 
```

在应用程序中成功添加菜单和子菜单

但是当我点击 MessageBox [Submenu] 它不显示消息框

```
MessageBox(hwnd, L"Test", L"MessageBox",MB_OK); 
```

# javascript - 在模型内的模型上使用 find

> ID：13519178
> 
> 赞同：0
> 
> 时间：2012-11-22T19:47:29.747
> 
> 标签：javascript, node.js, mongodb, mongoose

我正在尝试使用 mongoose find 方法在未知对象上查找对象。这是更好地解释的代码。

这是我的模型：

```
var Screen = new mongoose.Schema({
    id : Number,
    pid : Number,
    uploaded : {type: Date, default: Date.now },
    name : String,
    url : String,
    shorty : String
});

var User = new mongoose.Schema({
  id : Number,
  mail:    { type : String, match : /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/ },
  pass:  String,
  token:  String,
  inscDate: { type: Date, default: Date.now },
  lastConnec:     { type: Date, default: Date.now },
  screens:   [Screen],
  lastIp : String,
  valid : { type: Boolean, default : 0}
});

var UserModel = mongoose.model('users', User);
var ScreenModel = mongoose.model('screens', Screen); 
```

所以问题是我的用户模型包含一系列屏幕。基本上我想为未知用户搜索精确的屏幕。做这样的事情：

```
var query = UserModel.find({'screens.shorty' : shorty});
query.exec(function(err, screenR) {

    }); 
```

但是这段代码崩溃了，我尝试过的其他类似代码除了空数组外从不返回任何东西。而且我的搜索没有错（我试图复制一个确切的字符串）。

有什么可行的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:18:59.093

如果您使用的是 MongoDB 2.2+，则可以使用`$`投影运算符`screens`过滤到与查询选择器匹配的第一个元素。

像这样：

```
var query = UserModel.findOne({'screens.shorty': shorty}, {'screens.$': 1});
query.exec(function(err, user) {
    if (user) {
        // user.screens[0] contains the first element with the matching shorty field
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:46:14.367

好的，我设法完成了这项工作。不确定这是最优雅的方式，但至少它是一种方式：

```
var query = UserModel.find({'screens.shorty' : shorty}); // That query will get me the correct user, but not the screen
query.exec(function(err, screenR) {
    if (err) throw err;
    if (screenR[0]){ 
        for (var i in screenR[0].screens){ // I loop through all the screens
            if (screenR[0].screens[i].shorty == shorty) {
                // Here I have the correct screen and can do whatever with it.
            }

        }

    } else {
        // If no result
    }
}); 
```

# linux - grep 的输出结果到 var 然后到系统文件

> ID：13519182
> 
> 赞同：1
> 
> 时间：2012-11-22T19:47:56.650
> 
> 标签：linux, bash, grep, environment-variables

我需要从一个文件中 grep 一个参数，然后我需要将该参数放入另一个文件中。我需要在启动时读取变量并将其插入

```
$grep "id" /file/one | cut -d " " -f2
$12345 
```

所以现在我有了`ID_VAR`12345。现在我想做的是在`/file/two`

在`file/two`：

```
...
@program ID_VAR
... 
```

有没有办法在文件二中运行 grep 函数？有没有办法在文件之间共享变量？我正在使用 Debian。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:51:50.587

您的问题有些含糊不清，但我认为这段脚本正是您要寻找的：

假设`@program`已经在您的文件 2 中：（否则，请参阅 sudo_o 的解决方案）

```
ID_VAR=$(grep "id" /file/one | cut -d " " -f2)
sed -i "s/@program/@program ${ID_VAR}/" /file/two 
```

**解释：**

*   `ID_VAR=$(...)`: 保存你`grep`的`cut`结果`ID_VAR`
*   `sed`：调用`sed`并使用`-i`选项来编辑输入文件
*   `"s/@program/@program ${ID_VAR}/"`:在输入文件中替换`@program`为`@program (value of ID_VAR)`
*   `/file/two`: 你的输入文件是什么

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T19:54:58.747

`grep`来自一个`id`文件并附加到以字符串开头的另一个文件`@program`：

`echo '@program' $(grep "id" file/one | cut -d " " -f2) >> file/two`

# php - PHP Restler 支持包含在其他 URL 中的 api URL

> ID：13519186
> 
> 赞同：0
> 
> 时间：2012-11-22T19:48:17.263
> 
> 标签：php, api, rest, restler

..想不出一个足够描述性的标题。我要问的是我该怎么做？

我想要以下 2 个 API 调用

```
 GET /api/users/2/duels - returns all of the duels for user 2 
 GET /api/users/2 - returns the profile for user 2 
```

由于 PHP 不支持方法重载，因此我不清楚如何使其工作。

目前我有这个功能

```
 function get($id, $action){
      //returns data based on action and id
 } 
```

我不能只做

```
 function get($id){
      //returns profile based on id
 } 
```

由于上述原因。

任何帮助是极大的赞赏！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:48:47.913

您可以使用@url phpdoc 装饰器告诉restler 任何与直接类-> 方法映射不匹配的特殊调用方案。

```
/**
 * @url GET /api/users/:userId/duels
 */
public function getDuels($userId)
{

} 
```

..应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T07:51:31.227

一种方法是使用条件块在同一函数中处理这两种情况，如下所示

```
function get($id, $action=null){
    if(is_null($action)){
        //handle it as just $id case
    }else{
        //handle it as $id and $action case
    }
} 
```

如果您正在运行 restler 3 及更高版本，则必须禁用智能路由

```
/**
* @smart-auto-routing false
*/
function get($id, $action=null){
    if(is_null($action)){
        //handle it as just $id case
    }else{
        //handle it as $id and $action case
    }
} 
```

另一种方法是拥有多个函数，因为 index 也映射到 root，你有几个选项，你可以将你的函数命名为 get、index、getIndex

```
function get($id, $action){
    //returns data based on action and id
}
function index($id){
    //returns profile based on id
} 
```

如果您正在使用 Restler 2 或`smart routing`关闭，功能的顺序对于消除[歧义很重要](https://github.com/Luracast/Restler/issues/10)

如果您用完了函数名称的选项，您可以按照@fiskfisk 的建议使用@url 映射，但该路由应该只包含方法级别的路由，因为类路由始终是前置的，除非您使用以下方法将其关闭`$r->addAPIClass('MyClass','');`

```
function get($id){
    //returns data based on action and id
}

/**
 * @url GET :id/duels
 */
function duels($id)
{

} 
```

高温高压

# git - 如何从原始 repo 更新 github fork？

> ID：13519191
> 
> 赞同：3
> 
> 时间：2012-11-22T19:48:36.467
> 
> 标签：git, github, git-merge, git-pull

我分叉了一个 github 存储库。现在我想将我的 fork 更新到当前的 repo 版本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T20:05:03.120

我也有同样的疑问，在[github help](https://help.github.com/articles/fork-a-repo)中找到了答案。

```
git remote add upstream git://url-to-original
git fetch upstream
git merge upstream/master
git push 
```

upstream 是我给原始存储库的名称。

希望能帮助到你。

# python - 带有可选文本的python tkinter弹出窗口

> ID：13519192
> 
> 赞同：4
> 
> 时间：2012-11-22T19:48:43.320
> 
> 标签：python, popup, tkinter

我想使用 Tkinter 制作弹出窗口。我可以这样做：

```
import Tkinter
a="some data that use should be able to copy-paste"
tkMessageBox.showwarning("done","message") 
```

但是有一个问题是用户需要能够选择、复制和粘贴显示的文本。不可能以这种方式进行。

有没有办法用 Tkinter 做到这一点？（或默认情况下与 python 一起提供的其他工具）

提前感谢您的任何提示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:26:44.350

从[这里](http://www.daniweb.com/software-development/python/threads/316754/selectable-label-with-tkinter)，似乎`Entry`在 Tkinter 中使用的解决方法是可行的。这是代码：

```
import Tkinter as Tk
root = Tk.Tk()

ent = Tk.Entry(root, state='readonly')
var = Tk.StringVar()
var.set('Some text')
ent.config(textvariable=var, relief='flat')
ent.pack()
root.mainloop() 
```

*编辑*：为了回复您的评论，我[找到](http://www.python-course.eu/tkinter_text_widget.php)了一种使用小部件插入多行文本的方法`Text`。这是解决方案的草稿：

```
from Tkinter import *

root = Tk()
T = Text(root, height=2, width=30, bg='lightgrey', relief='flat')
T.insert(END, "Just a text Widget\nin two lines\n")
T.config(state=DISABLED) # forbid text edition
T.pack()
mainloop() 
```

我（仍然）对任何更好的解决方案感兴趣:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:12:41.117

您可以使用按钮进行复制和粘贴。首先你需要选择。在文本小部件中，它很容易通过

```
selection=nameoftextwidget.get(SEL_FIRST,SEL_LAST) 
```

然后，您可以通过使用选择轻松地使用它进行复制。如果要将其复制/粘贴到同一个文本小部件中，可以使用：

```
nameoftextwidget.insert(END,"\n"+selection) 
```

# algorithm - 两个圆形扇区的交点

> ID：13519195
> 
> 赞同：7
> 
> 时间：2012-11-22T19:48:58.370
> 
> 标签：algorithm

我正在尝试解决简单的任务，但我没有找到任何优雅的解决方案。

我基本上解决了两个圆形扇区的交集。每个扇区由 (-pi, pi] 范围内的 2 个角度 (来自 atan2 func) 给出。每个选择器占据的最大角度为 179.999。因此每两个角度就可以知道圆形扇区在哪里。

返回值应基于以下描述相互交集：

`value <1 if one angle is contained by second one (value represents how much space occupy percentually)`

`value >1 if first angle (the dotted one) is outside the other one, value represents how much of dotted angle is out of the other one`

基本案例和一些例子在下面的图片中

![在此处输入图像描述](../Images/0cf23a8c75fc97c84a88233ed63c9dcf.png)

问题是有太多的案例需要处理，我正在寻找一些优雅的方法来解决它。

只有当它们位于单位圆的右侧（cos> 0）时，我才能比较两个角度，因为在左侧，数值较大的角度在图形上较低。我尝试在右半部分使用一些投影：

```
if(x not in <-pi/2, pi/2>)
{
    c = getSign(x)*pi/2;
    x = c - (x - c);
} 
```

但是占据单位圆两半部分的扇区存在问题......

有很多案例......有人知道如何优雅地解决这个问题吗？（我使用 c++，但任何提示或伪代码都可以）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T20:24:43.830

您可以执行以下操作：

1.  将每个扇区标准化为 ( `s_start`, `s_end`) 形式，其中`s_start`位于 (-pi,pi] 和`s_end`[ `s_start`, `s_start+pi`) 中。
2.  对扇区进行排序（交换），使得`s0_start`<`s1_start`
3.  现在我们只有 3 个案例（a、b1、b2）：

    a) `s1_start <= s0_end`: 交点，s1_start 内 s0

    乙）`s1_start > s0_end`：

    b1) `s0_start + 2*pi <= s1_end`: 交点，(s0_start + 2*pi) 在 s1 内

    b2) `s0_start + 2*pi > s1_end`: 没有交叉点

因此我们得到以下代码：

```
const double PI = 2.*acos(0.);
struct TSector { double a0, a1; };

// normalized range for angle
bool isNormalized(double a)
{ return -PI < a && a <= PI; }
// special normal form for sector
bool isNormalized(TSector const& s)
{ return isNormalized(s.a0) && s.a0 <= s.a1 && s.a1 < s.a0+PI; }

// normalize a sector to the special form:
// * -PI < a0 <= PI
// * a0 < a1 < a0+PI
void normalize(TSector& s)
{
   assert(isNormalized(s.a0) && isNormalized(s.a1));

   // choose a representation of s.a1 s.t. s.a0 < s.a1 < s.a0+2*PI
   double a1_bigger = (s.a0 <= s.a1) ? s.a1 : s.a1+2*PI;
   if (a1_bigger >= s.a0+PI)
     std::swap(s.a0, s.a1);
   if (s.a1 < s.a0)
     s.a1 += 2*PI;

   assert(isNormalized(s));
}

bool intersectionNormalized(TSector const& s0, TSector const& s1,
                            TSector& intersection)
{
  assert(isNormalized(s0) && isNormalized(s1) && s0.a0 <= s1.a0);

  bool isIntersecting = false;
  if (s1.a0 <= s0.a1) // s1.a0 inside s0 ?
  {
    isIntersecting = true;
    intersection.a0 = s1.a0;
    intersection.a1 = std::min(s0.a1, s1.a1);
  }
  else if (s0.a0+2*PI <= s1.a1) // (s0.a0+2*PI) inside s1 ?
  {
    isIntersecting = true;
    intersection.a0 = s0.a0;
    intersection.a1 = std::min(s0.a1, s1.a1-2*PI);
  }
  assert(!isIntersecting || isNormalized(intersection));

  return isIntersecting;
}

main()
{
  TSector s0, s1;
  s0.a0 = ...
  normalize(s0);
  normalize(s1);
  if (s1.a0 < s0.a0)
    std::swap(s0, s1);
  TSection intersection;
  bool isIntersection = intersectionNormalized(s0, s1, intersection);
} 
```

# android - 切换可在 Android 上发现的蓝牙设备

> ID：13519196
> 
> 赞同：0
> 
> 时间：2012-11-22T19:49:07.880
> 
> 标签：android, bluetooth, toggle, device

我正在尝试找到一种简单的方法来通过复选框在 Android 上打开和关闭设备的蓝牙可发现性。打开它很简单，但如果再次关闭，我没有任何运气。我正在使用一种解决方法，方法是将设备设置为可发现一秒钟（我在 stackoverflow 上找到的一种方法），但我需要找到一种正确执行此操作的方法。

```
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
    // TODO Auto-generated method stub
    if (buttonView.isChecked()) {
            if (mBluetoothAdapter == null) {
                    Toast.makeText(getApplicationContext(),
                                    "No Bluetooth Support", Toast.LENGTH_SHORT).show();
            } else {
                    if (mBluetoothAdapter.isEnabled()) {
                            Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
                            discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 0);
                            startActivity(discoverableIntent);
                            Toast.makeText(getApplicationContext(), "Device Discoverable", Toast.LENGTH_SHORT).show();
                    }
            }
    } else {
            if (mBluetoothAdapter.isEnabled()) {
                    Intent disablediscoverableIntent = new Intent(
                                    BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
                    disablediscoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 1);
                    startActivity(disablediscoverableIntent);
                    Toast.makeText(getApplicationContext(),
                                    "Discoverable Disabled", Toast.LENGTH_SHORT).show();

            }
    } 
```

# php - 在 Joomla 框架中显示 MySQL 选择查询结果

> ID：13519197
> 
> 赞同：2
> 
> 时间：2012-11-22T19:49:08.083
> 
> 标签：php, mysql, database, joomla

我正在尝试从 Joomla 页面中的 Joomla MySQL 数据库中获取查询结果。正在返回数据库连接正确的`print_r`正确结果。但我无法显示已获取的数据。这是我目前为 print_r 得到的结果：

```
mysqli_result Object ( 
    [current_field] => 0 
    [field_count] => 2 
    [lengths] => [num_rows] => 2 [type] => 0 
) 
```

这是我正在使用的代码：

```
{source}
<script language="javascript" type="text/javascript">

</script>
<?php

    // init Joomla Framework
    define( '_JEXEC', 1 );
    define( 'DS', DIRECTORY_SEPARATOR );
    define( 'JPATH_BASE', realpath(dirname(__FILE__).DS.'..' ));

    require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
    require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

    $mainframe = JFactory::getApplication('site');

    // DBQuery
    $database =& JFactory::getDBO();
    $query = "SELECT city_id, city_name FROM indytoad_city;";
    $database->setQuery($query);
    $result = $database->query();

    print_r($result);
?>
{/source} 
```

请让我知道如何、在哪里以及需要修改什么以显示查询结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:05:18.443

使用`loadAssocList()`代替`query()`，即

```
$result = $database->loadAssocList(); 
```

它以关联数组的形式从数据库中获取数据。

Joomla 文档：[http ://docs.joomla.org/JDatabase::loadAssocList/11.1](http://docs.joomla.org/JDatabase::loadAssocList/11.1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:00:59.950

我不想详细介绍 Joomla 中用于从数据库中检索结果的约定。这完全取决于开发人员。

您没有获得值的原因是您可能将结果数组视为关联数组。它实际上是一个 stdClass 对象！

采用

```
$result->city_id 
```

要获取 city_id 的值，如果存在多个嵌套类，则可以将其用作

```
$result->parent->child 
```

希望这可以帮助 ！

有关更多信息，您可以查看这个 -> [https://stackoverflow.com/a/931419/122840](https://stackoverflow.com/a/931419/122840)

也代替

```
$result = $database->query(); 
```

采用 ：

```
$result = $database->loadAssocList(); 
```

这会将结果加载到关联数组中！

所以你用

> $结果['列']

得到结果！

# git - git 编译：文档/git-add.xml 未验证

> ID：13519203
> 
> 赞同：7
> 
> 时间：2012-11-22T19:49:35.153
> 
> 标签：git, compiler-construction, gnu

编译 git 时出现以下错误：

```
make[2]: Leaving directory `/home/xxx/git-master'
    XMLTO git-add.1
xmlto: /home/xxx/git-master/Documentation/git-add.xml does not validate (status 3)
xmlto: Fix document syntax or use --skip-validation option
I/O error : Attempt to load network entity http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd
/home/xxx/git-master/Documentation/git-add.xml:2: warning: failed to load external entity "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"
D DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"
I/O error : Attempt to load network entity http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd
warning: failed to load external entity "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"
validity error : Could not load the external subset "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"
Document /home/xxx/git-master/Documentation/git-add.xml does not validate
make[1]: *** [git-add.1] Error 13
make[1]: Leaving directory `/home/xxx/git-master/Documentation'
make: *** [doc] Error 2 
```

主要问题是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-03T01:27:20.727

在 OSX（Mountain Lion）上，我必须这样做：

```
brew install asciidoc
brew install xmlto
brew install docbook   

# then (as prompted by brew...)
#
# If you intend to process AsciiDoc files through an XML stage
# (such as a2x for manpage generation) you need to add something
# like:
#
export XML_CATALOG_FILES=/usr/local/etc/xml/catalog
#
# to your shell rc file so that xmllint can find AsciiDoc's
# catalog files.

brew install docbook-xsl 
```

（感谢 Nathan 提供必要的提示）。#6个字符

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T13:28:27.410

派对迟到了，但在 cygwin 上，您需要验证的包是`docbook-xml45`（如 DTD URI 所暗示的，docbook/xml/4.5/docbookx.dtd）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-25T23:52:45.600

这似乎是 git 反复出现的问题。在寻找解决方案时（今天），我在几个论坛上遇到了它。（Linux、Cygwin、Mac OS）。问题总是一样的：缺乏好的文档目录。不幸的是，安装适当的目录在很大程度上取决于您的安装，而且缺少一个好的目录的方法不止一种。

1.  几年前发布了一个糟糕的目录。卸载并安装更新。
2.  构建目录的包中途失败。删除并重新安装包。
3.  安装目录的包还没安装，包工具也没管你。

选项 3 是我所在的位置。我已经安装了 brew，所以 sudo brew install docbook sudo docbook-register 为我解决了这个问题。

或者，可以单独下载可用的文档。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-06T21:31:04.730

注意：您可能会在最近的（2019 年，七年后）版本中再次发现此错误，因为 Git 开始使用 DocBook 5（而不是 DocBook 4.5），因为 Asciidoctor 2.0 不再适用于旧版本。
Git 2.24（2019 年第四季度）澄清了这种情况。

请参阅[brian m的](https://github.com/bk2204)[提交 f6461b8](https://github.com/git/git/commit/f6461b82b932013f170acf357c4dd3468c923f73)（2019 年 9 月 15 日） 。[卡尔森 ( `bk2204`)](https://github.com/bk2204) .
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 faf5576](https://github.com/git/git/commit/faf5576a8d749c7c46fafd0c62da47ec078e1486)中，2019 年 10 月 6 日）)

> ## 文档：使用 Asciidoctor 2 修复构建
> 
> 我们的文档工具链传统上是围绕 DocBook 4.5 构建的。
> 此版本的 DocBook 是最后一个基于 DTD 的 DocBook 版本。
> 2009 年，DocBook 5 被引入使用命名空间，其语法以 RELAX NG 表示，它更具表现力并允许更广泛的语法形式。
> 
> Asciidoctor 是构建我们文档的替代方案之一，它在其最近的 2.0 版本中将 DocBook 4.5 的支持移出核心，现在仅在主版本中支持 DocBook 5。
> DocBoook 4.5 转换器仍可作为单独的组件使用，但这在大多数发行版包中不可用。
> 如果不是因为我们使用 xmlto，这不是问题，它仍然停留在 DocBook 4.5 时代。
> 
> `xmlto`作为构建过程的一部分执行 DTD 验证。
> 这对于具有有效 DTD 的 DocBook 4.5 来说没有问题，但它显然不适用于 DocBook 5，因为没有 DTD 可以充分表达其完整语法。
> 此外，即使`xmlto`确实支持`RELAX NG`验证，这也是不够的，因为它使用基于 libxml2 的`xmllint`来执行此操作，这在`RELAX NG`.
> 
> 幸运的是，有一个简单的方法：让 Asciidoctor 使用它的 DocBook 5 后端并告诉`xmlto`它跳过验证。
> Asciidoctor 自 2013 年 v0.1.4 起支持 DocBook 5，而 xmlto 支持跳过验证的时间可能更长。
> 
> 我们还需要教授`xmlto`如何使用命名空间的 DocBook XSLT 样式表，而不是它通常使用的非命名空间的样式表。
> 通常这些样式表是可互换的，但是非命名空间的样式表有一个错误，导致它们在使用命名空间时不会自动从某些元素中去除空格。
> 这会在列表元素的开头产生额外的空白，这是不和谐且难看的。
> 
> 我们可以通过传递一个带有选项的自定义样式表来做到这一点，该`-x`选项只是通过 URL 导入命名空间样式表。
> 任何支持 XML 目录的系统都会自动查找此 URL 并引用本地副本，而无需我们知道此本地副本的位置。我们知道任何使用的人`xmlto`都已经正确设置了目录，因为在验证期间使用的 DocBook 4.5 DTD 也是通过目录查找的。
> 所有主要的 Linux 发行版都分发必要的样式表并具有内置的目录支持，Homebrew 也这样做，尽管需要设置环境变量以启用目录支持。
> 
> 如果有人缺乏对目录的支持，则可以`xmlto`(via `xmllint`) 从相关 URL 下载样式表，尽管这可能会表现得很糟糕以引起注意。
> 人们仍然可以选择使用我们发布的预构建文档，所以很高兴这不应该成为障碍。
> 
> 最后，我们需要过滤掉在 CI 作业中调用 dblatex 时出现的其他样式表中的一些消息。
> 这个工具很像没有命名空间的 DocBook 样式表剥离命名空间并打印类似的消息。
> 如果我们允许将这些消息打印到标准错误，我们的文档 CI 作业将失败，因为我们检查标准错误是否有意外输出。
> 由于`dblatex`依赖于 Python 2，我们可能需要在未来重新审视它的使用，在这种情况下，这个问题可能会消失，但这可能会延迟到未来的补丁。
> 
> 我们过滤的最后一条消息`libxslt`来自现代 Debian 和 Ubuntu。
> 他们用来实现可重现的 ID 生成的补丁也会打印关于 ID 生成的消息。
> 虽然这不会影响我们当前的 CI 映像，因为它们使用缺少此补丁的 Ubuntu 16.04，但如果我们升级到 Ubuntu 18.04 或现代 Debian，则会出现这些消息，并且与上述消息一样，会导致 CI​​ 失败。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-29T04:02:06.077

jonseymour 的回答在 Mac OS X El Capitan 中帮助了我

导出 XML_CATALOG_FILES=/usr/local/etc/xml/catalog 我这样做

```
sudo vim ~/.bash_profile

(in an empty line insert)
export XML_CATALOG_FILES=/usr/local/etc/xml/catalog

save & exit

. ~/.bash_profile 
```

解决了

# matlab - FFT：将样本与频率匹配

> ID：13519205
> 
> 赞同：3
> 
> 时间：2012-11-22T19:49:40.020
> 
> 标签：matlab, time, fft, sampling

让我们假设，

*   我有一个向量 t，其中包含我的样本的时间（以秒为单位）。（这些样本在时域上分布不均。

*   我还有一个向量数据，其中包含时间 t 的样本值。

*   t 和 data 具有相同的长度。

如果我绘制图表，则会获得某种周期性信号。

现在我可以执行： abs(fft(data)) 来获取我的光谱，然后将其绘制在 x 轴上的数据点数量上。

如何获得关于向量 t 中时间的频谱并绘制它？我想查看我的信号包含 1/s 中的哪些频率或 s 中的哪些周期。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T20:59:27.427

**[不是 OP 的意图]**：FFT 将为您提供任意数量的输入数据点的频谱（全局）。您不能拥有与部分（或整个）光谱相关联的特定数据点（及时）。

您可以做的是使用[频谱图](http://www.mathworks.com/help/signal/ref/spectrogram.html)并获得[短时傅里叶变换](http://en.wikipedia.org/wiki/Short-time_Fourier_transform)(STFT)。这将为您提供`NxM`时间频率 FT 值的离散网格（N：FT 频率区间，M：信号时间窗口）。

通过在您感兴趣的数据样本上定位（重叠）STFT 窗口，您将获得 N 个频率幅度值，从而*获得随信号随时间变化的短期频谱估计的分布*。

另请参阅此处可能相关的答案：[https ://stackoverflow.com/a/12085728/651951](https://stackoverflow.com/a/12085728/651951)

**编辑/更新**：

对于**不均匀间隔**的数据，您需要考虑[非均匀 DFT](http://en.wikipedia.org/wiki/Non-uniform_discrete_Fourier_transform)（和非均匀 FFT 实现）。在此处查看相关问题/答案[https://scicomp.stackexchange.com/q/593](https://scicomp.stackexchange.com/q/593)

NFFT 或 NUFFT 的主要方法是基于通过局部卷积/插值创建统一网格，在此基础上运行 FFT 并取消插值滤波器的卷积效果。

你可以阅读更多：

*   A. Dutt 和 V. Rokhlin，[非等空间数据的快速傅里叶变换](http://epubs.siam.org/doi/abs/10.1137/0914081)，SIAM J. Sci。计算机，1993 年 14 月。
*   L.格林加德和 J.-Y。Lee，[加速非均匀快速傅立叶变换](http://epubs.siam.org/doi/pdf/10.1137/S003614450343200X)，SIAM 评论，46 (3)，2004。
*   Pippig, M. und Potts, D.，[基于非等空间快速傅里叶变换的粒子模拟](http://www-user.tu-chemnitz.de/~mpip/paper/Heraeus.pdf)，在：复杂系统中远程交互的快速方法，2011 年。

对于**实现**（与 MATLAB 的接口），请尝试[NFFT](http://www-user.tu-chemnitz.de/~potts/nfft/)以及可能的并行版本[PNFFT](http://www-user.tu-chemnitz.de/~mpip/software.php)。[您可以在此处](http://www-user.tu-chemnitz.de/~mpip/lehre.php)找到有关如何设置和使用的不错的演练。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-24T17:12:32.397

您可以重新采样或插值您的样本点，以获得在 t 中等距分布的另一组样本点。第二组等距采样点的所选间距或采样率将允许您将频率推断为第二组 FFT 的结果。

结果可能有噪声或包含混叠，除非初始数据集的带宽限制到足够低的频率以允许插值。如果带宽有限，那么您可以尝试使用三次样条作为插值方法。

虽然看起来可以通过对大量数据点重新采样来获得较高的 FFT bin 频率分辨率，但实际有用的分辨率精度将更多地与原始样本数相关。

# javascript - 向下滚动动画js

> ID：13519208
> 
> 赞同：0
> 
> 时间：2012-11-22T19:49:45.823
> 
> 标签：javascript

我在 JS 中构建了一种聊天，然后我希望当我收到新消息时聊天会自动向下滚动（带有动画......）。一切都很顺利，但动画停止后用户无法自行滚动；聊天自动滚动到最后。

所以这是代码：

```
<!-- language:lang-js -->

var height = 1;
window.setInterval(function() {
    var elem = document.getElementById('chat');
    elem.scrollTop = height;
    if (elem.scrollheight < height) {
        clearInterval(this);
    }
    height += 2;
}, 50); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:12:05.633

[clearInterval](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)函数需要一个数字。使用它应该使它正常工作。您还有许多语法错误。

```
var intervalReference = window.setInterval(function() {
    var elem = document.getElementById('chat');
    elem.scrollTop = height;
    if (elem.scrollHeight < height) {
        clearInterval(intervalReference);
    }
    height += 2;
}, 50); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:14:33.880

你应该制作一个像这样保持间隔的var：

```
var height = 1;
var interval = window.setInterval( animate, 50 );

function animate() {
    var elem = document.getElementById('chat');
    elem.scrollTop = height;
    if (elem.scrollHeight < height) {
        clearInterval( interval );
    }
    height += 2;
} 
```

这应该可以正常工作

# java - 为什么这个 Java OpenGL (JOGL) 程序不能运行？

> ID：13519209
> 
> 赞同：3
> 
> 时间：2012-11-22T19:50:00.087
> 
> 标签：java, opengl, jogl

以下代码取自[https://sites.google.com/site/justinscsstuff/jogl-tutorial-2](https://sites.google.com/site/justinscsstuff/jogl-tutorial-2)

```
import java.awt.Frame;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import javax.media.opengl.*;
import javax.media.opengl.awt.GLCanvas;

public class SimpleScene {
    public static void main(String[] args) {
        GLProfile glp = GLProfile.getDefault();
        GLCapabilities caps = new GLCapabilities(glp);
        GLCanvas canvas = new GLCanvas(caps);

        Frame frame = new Frame("AWT Window Test");
        frame.setSize(300, 300);
        frame.add(canvas);
        frame.setVisible(true);

        // by default, an AWT Frame doesn't do anything when you click
        // the close button; this bit of code will terminate the program when
        // the window is asked to close
        frame.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
    }
} 
```

它编译没有任何问题，但是当我使用

```
java SimpleScene 
```

我收到以下错误

```
C:\Users\Mitc\Drive\Google Drive\Game\Display>java SimpleScene
Exception in thread "main" java.lang.NoClassDefFoundError: javax/media/opengl/GLCapabilitiesImmutable
        at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
        at java.lang.Class.getMethod0(Unknown Source)
        at java.lang.Class.getMethod(Unknown Source)
        at sun.launcher.LauncherHelper.getMainMethod(Unknown Source)
        at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source)
Caused by: java.lang.ClassNotFoundException: javax.media.opengl.GLCapabilitiesImmutable
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 6 more 
```

关于出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T19:54:55.390

由于您已经使用 JOGL jar 文件编译了该文件，因此您只需要确保在运行时您的类路径中有这些文件：

```
java -cp gluegen-rt.jar;jogl-all.jar;. SimpleScene 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-01T06:06:27.123

您需要使用 JOGL < v2.3，因为包名称已更改。这是[v2.2.4 jars](http://jogamp.org/deployment/archive/rc/v2.2.4/jar/)的链接。由于某种原因，gluegen-rt.jar 和 jogl-all.jar 实际上是包含真实 jar 的 zip 文件，因此请记住这一点。

我意识到这不是OP 最初发布*时*给出的正确答案，但我遇到了同样的错误，并认为我会帮助下一个人。

# css - 内容压低其他内容

> ID：13519213
> 
> 赞同：0
> 
> 时间：2012-11-22T19:50:13.910
> 
> 标签：css

我有一个简单的表，一行中有两个 td。但是由于某种原因，右侧 td 中的内容正在将左侧 td 中的所有内容向下推。右边的 td 包含一个锚图像，左边是一个表格和一个表格。我一生都无法弄清楚为什么会发生这种情况，这让我发疯。任何帮助表示赞赏！ ![截屏](../Images/f3e9a8168ad270c5e45c36979a6c6fb7.png "截屏")

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:45:13.157

可能是几件事。

垂直对齐：顶部可能是罪魁祸首

或者

第一个 td 中的嵌套项目有一个将它们向下推的边距或填充？

# android - Android Fragments：一次实例化或在需要时实例化

> ID：13519217
> 
> 赞同：1
> 
> 时间：2012-11-22T19:50:36.747
> 
> 标签：android, android-fragments, android-viewpager

我在我的应用程序中预定义了一组片段（布局/屏幕）。我有 viewPager，其中包含用户交互的初始布局（比如 2 个片段）。还有其他片段可以显示在不同的事件和用户交互上，例如添加、编辑、删除或列表。目前，我在需要时添加和删除片段（添加、编辑等）。

*   一次又一次地添加和删除片段是否有任何性能开销？
*   我应该在应用程序启动时实例化所有片段吗？
*   我们可以在内存中保存多少片段（如果我们一次实例化所有片段）？

# php - 用 PHP 备份我的 SQL 数据库

> ID：13519218
> 
> 赞同：1
> 
> 时间：2012-11-22T19:50:59.277
> 
> 标签：php, mysql, backup, database-backups

大家好，我对php很陌生。我正在尝试创建我的 sql 数据库的备份，我希望通过单击按钮在 php 服务器上运行备份。我发现一些模板我遇到的问题可能是由于错误的模板是：在大多数模板上，我没有输入使其工作所需的信息，例如（主机，数据库名称）等另一个问题是我不知道这是否是代码中唯一需要更改的部分。如果有人可以帮我找到备份模板并逐步告诉我如何让我的数据库导出为文件，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:15:15.817

使用[exec](http://php.net/manual/en/function.exec.php)函数调用[mysqldump](http://php.net/manual/en/function.exec.php)，这是一个与每个 MySQL 数据库捆绑在一起的备份实用程序。传递您想要放置文件的文件夹（它将是一个 .sql 文件），您可以从那里简单地下载或 ftp 它。

一个更简单的选择是安装[PHPMyAdmin](http://www.phpmyadmin.net/home_page/index.php)，您可以使用它来备份任何数据库和表。

希望这可以帮助。

# android - Android MapView 在 ViewPagerIndicator 中没有缩放/平移功能

> ID：13519219
> 
> 赞同：0
> 
> 时间：2012-11-22T19:50:59.910
> 
> 标签：android, android-mapview, zooming, pan, viewpagerindicator

我尝试在 ViewPageIndicator 库的 TabPageIndicator 中显示 MapView。要在片段中使用 MapView，我正在使用 android-support-v4-r10.googlemaps.jar。

到目前为止，我可以显示 MapView，但它不会对触摸事件做出反应。我无法缩放或平移...

我的地图片段：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    root = (View) inflater.inflate(R.layout.training_map, container, false);
    mapViewContainer = (ViewGroup) root.findViewById(R.id.map_container);
    return root;
}

@Override
public void onActivityCreated(Bundle bundle) {
    super.onActivityCreated(bundle);
    LoggingHelper.i("", "onActivityCreated");

    initTextViews();
    mapView = ((TrainingActivity) getActivity()).getMapView();
    //Zeigt einen blauen Punkt am derzeitigen Standort an
    locationOverlay = new MyLocationOverlay(getActivity(), mapView);
    locationOverlay.runOnFirstFix(new Runnable() {
        @Override
        public void run() {
            if(mapController != null){
                mapController.animateTo(locationOverlay.getMyLocation());
            }
        }
    });
    locationOverlay.enableMyLocation();
    mapViewContainer.addView(mapView);

} 
```

xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tracking_maps_main_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:visibility="visible" >
    <LinearLayout
        android:id="@+id/map_container"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
    </LinearLayout>

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:onClick="onClickLock"
        android:src="@android:drawable/ic_lock_lock" />

</RelativeLayout> 
```

片段活动：

```
 ...
        //Paging Initialisieren
    adapter = new TrainingFragmentAdapter(getSupportFragmentManager(), fragments);
    viewPager = (ViewPager) findViewById(R.id.pager);
    viewPager.setAdapter(adapter);
    pageIndicator = (TabPageIndicator) findViewById(R.id.indicator);
    pageIndicator.setViewPager(viewPager);
            ...

    public MapView getMapView(){
    if(mapView == null){
        mapView = new MapView(this, "my-googlemaps-key...");
    }
    return mapView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:24:21.307

我相信默认值为`MapView.setClickable()`false。

尝试以下操作：

```
if(mapView == null){
    mapView = new MapView(this, "my-googlemaps-key...");
    mapView.setClickable(true); //add this line
} 
```

问候。

# sql - sql查找每个月最小日期的行

> ID：13519223
> 
> 赞同：1
> 
> 时间：2012-11-22T19:51:04.660
> 
> 标签：sql, postgresql, min

我有一张桌子，让我们说“记录”的结构：

```
id      date
--      ----
1       2012-08-30
2       2012-08-29
3       2012-07-25 
```

我需要在 PostgreSQL 中编写一个 SQL 查询来获取每个月 MIN 日期的 record_id。

```
month    record_id
-----    ---------
8           2
7           3 
```

正如我们看到的 2012-08-29 < 2012-08-30 并且是 8 个月，所以我们应该显示 record_id = 2

我尝试过这样的事情，

```
SELECT
   EXTRACT(MONTH FROM date) as month,
   record_id,
   MIN(date) 
FROM Records
GROUP BY 1,2 
```

但它显示了 3 条记录。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T19:58:36.980

```
SELECT DISTINCT ON (EXTRACT(MONTH FROM date))
   id,
   date
FROM Records1
ORDER BY EXTRACT(MONTH FROM date),date 
```

SQLFiddle [http://sqlfiddle.com/#!12/76ca2/3](http://sqlfiddle.com/#!12/76ca2/3)

UPD：此查询：

1) 按月份和日期对记录进行排序

2）对于每个月挑选第一条记录（第一条记录有`MIN(date)`因为排序）

详细信息在这里[http://www.postgresql.org/docs/current/static/sql-select.html#SQL-DISTINCT](http://www.postgresql.org/docs/current/static/sql-select.html#SQL-DISTINCT)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T19:58:11.613

[SQL小提琴](http://sqlfiddle.com/#!1/2bb2a/9)

```
select distinct on (date_trunc('month', date))
    date_trunc('month', date) as month,
    id,
    date
from records
order by 1, 3 desc 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T19:58:19.620

如果您有重复的最短日期，这将返回倍数：

```
Select
  minbymonth.Month,
  r.record_id
From (
  Select
    Extract(Month From date) As Month, 
    Min(date) As Date
  From
    records
  Group By 
    Extract(Month From date)
  ) minbymonth
    Inner Join
  records r
    On minbymonth.date = r.date
Order By
  1; 
```

或者，如果您有 CTE

```
With MinByMonth As (
  Select
    Extract(Month From date) As Month, 
    Min(date) As Date
  From
    records
  Group By 
    Extract(Month From date)
  )
Select
  m.Month,
  r.record_id
From
  MinByMonth m
    Inner Join
  Records r
    On m.date = r.date
Order By
  1; 
```

[http://sqlfiddle.com/#!1/2a054/3](http://sqlfiddle.com/#!1/2a054/3)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T20:13:00.643

```
select extract(month from date) 
, record_id
, date
from
(
    select
        record_id
       , date
       , rank() over (partition by extract(month from date) order by date asc) r
    from records
) x
where r=1
order by date 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T20:02:49.533

我认为您需要使用子查询，如下所示：

```
SELECT
   EXTRACT(MONTH FROM r.date) as month,
   r.record_id 
FROM Records as r
INNER JOIN (
    SELECT
       EXTRACT(MONTH FROM date) as month,
       MIN(date) as mindate
    FROM Records
    GROUP BY EXTRACT(MONTH FROM date)
) as sub on EXTRACT(MONTH FROM r.date) = sub.month and r.date = sub.mindate 
```

# php - 限制 foreach 信息

> ID：13519228
> 
> 赞同：2
> 
> 时间：2012-11-22T19:51:46.673
> 
> 标签：php, limit

我有一个 foreach ，它根据 为每个项目创建一个 url `$mainCat`，`$subCat`当然我知道由于某些项目属于同一类别，因此会有重复项。

有没有我可以只返回每个`$mainCat`&`$subCat`属性的一个 url？

```
 foreach ($detailsFunction as $main) 
    {
        $ld = array('listingId' => $main['listingId']);

        foreach($ld as $id)
        {
            $mainlisting = $main['listingId'];
            $mainCat     = strtolower($main['mainCat']);
            $subCatO     = strtolower($main['subCat']);
            $subCat      = str_replace(" ", "-", $subCatO);

            $structure = base_url().'listings/'.$mainCat.'/'.$subCat;

            $url[] = $structure;
        }

    }
        return $url;

        var_dump($url);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T19:55:51.883

如果我理解您的问题，您想生成一个没有重复值的数组吗？

您可以`$structure`在`$url`添加之前测试是否存在：

```
if (!in_array($structure, $url)) $url[] = $structure; 
```

或`array_unique`在循环完成后使用：

```
$url = array_unique($url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:57:42.913

好吧，您可以使用 PHP array_unique 删除重复项

有关[array_unique的更多信息](http://php.net/manual/en/function.array-unique.php)

# java - 尝试获取可序列化对象的输入时出现 NullPointerException

> ID：13519229
> 
> 赞同：1
> 
> 时间：2012-11-22T19:51:46.200
> 
> 标签：java, nullpointerexception, java.util.scanner, serializable, transient

我有 3 个类：Main、ContactLibrary 和 ContactInfo。ContactLibrary 包含一个名为 myPhoneBook 的 ArrayList。ContactInfo 由一堆包含姓名、地址等的字符串组成。

例如，用户想要搜索名称或任何涉及输入的内容。输入是在 ContactLibrary 和 ContactInfo 类中完成的——这两个类都是可序列化的对象。

但是，当它达到这一点时，我会收到 NPE 错误。

```
You have 3 entry(s) saved to disc.

Hello, and welcome to Team 6's contact list.
What would you like to do?
Enter the corresponding number of choice.

1: Add an entry to the contact list.
2: Print the entire contact list.
3: Search for a contact.
4: Exit the program.

Please enter a number from 1-4.
3
What would you like to search by?
Exception in thread "main" java.lang.NullPointerException
    at ContactLibrary.searchByCriteria(ContactLibrary.java:62)
    at Main.optionsPrompt(Main.java:62)
    at Main.main(Main.java:25)
1: Last Names.
2: Emails.
3: Zip codes. 
```

我是什么做的？

这是我的主要： http: [//ideone.com/uvfK4U](http://ideone.com/uvfK4U)（包含顶部评论中的其他两个类）这是一个 UML 图：http: [//imgur.com/9W3TS](http://imgur.com/9W3TS)

ContactLibrary 类，根据要求：

```
/**
 * ContactLibrary, when constructed, creates an ArrayList of ContactLibrary
 * references called myPhoneBook. Every index is made to fill in objects
 * of ContactInfo, which contains entries and credentials.
 * 
 * Contains methods to create a new entry, search and print by criteria, and print list.
 */
import java.util.*;

public class ContactLibrary implements java.io.Serializable {
    private static final long serialVersionUID = 1L;
    private ArrayList<ContactInfo> myPhoneBook;
    private Scanner libraryInput = new Scanner(System.in);

    /** Constructs the ArrayList that will hold references to ContactInfo. */
    public ContactLibrary() {
        myPhoneBook = new ArrayList<ContactInfo>();
    }

    /**
     * Adds an entry to the ArrayList and utilizes the set methods in
     * ContactInfo.
     */
    public void addEntry() {
        int doAgain = 1;
        do {
            myPhoneBook.add(new ContactInfo());
            System.out.println("Would you like to enter another contact?");
            System.out.println("1: Yes.");
            System.out.println("2: No.");
            doAgain = libraryInput.nextInt();
        } while (doAgain == 1);
    }

    /**
     * Goes through every index in myPhoneBook and runs ArrayList.get() on them.
     */
    public void printList() {
        for (int i = 0; i < myPhoneBook.size(); i++) {
            System.out.println(myPhoneBook.get(i));
        }
    }

    /** Counts the number of objects within myPhoneBook and returns a string. */
    public String scanDisc() {
        int entryCount = myPhoneBook.size();
        return "You have " + entryCount + " entry(s) saved to disc.\n";
    }

    /**
     * The prompt for having the user search the database via criteria. Asks the
     * user to enter in their search criteria.
     */
    public void searchByCriteria() {
        String criteria;
        //libraryInput = new Scanner("System.in");
        int subSubMenuChoice = 0;
        System.out.println("What would you like to search by?");
        System.out.println("1: Last Names.");
        System.out.println("2: Emails.");
        System.out.println("3: Zip codes.");
        subSubMenuChoice = libraryInput.nextInt();
        switch (subSubMenuChoice) {
        case 1:
            System.out
                    .println("Please enter the last name you'd like to search for:");
            criteria = libraryInput.next();
            searchByLastName(criteria);
            break;
        case 2:
            System.out
                    .println("Please enter the e-mail you'd like to search for:");
            criteria = libraryInput.next();
            searchByEmail(criteria);
            break;
        case 3:
            System.out
                    .println("Please enter the zip code you'd like to search for:");
            criteria = libraryInput.next();
            searchByZip(criteria);
            break;
        default:
            System.out.println("Exiting");
            break;
        }
    }

    /**
     * Loops through every element in the array and returns a toString of that
     * index for comparing with the search criteria via contains().
     */
    public void searchByEmail(String criteria) {
        for (int i = 0; i < myPhoneBook.size(); i++) {
            if (criteria.compareTo((myPhoneBook.get(i)).getEmail()) == 0) {
                System.out.println(myPhoneBook.get(i));
            } else {
                System.out.print("");
            }
        }
    }

    /**
     * Loops through every element in the array and returns a toString of that
     * index for comparing with the search criteria via contains().
     */
    public void searchByLastName(String criteria) {
        for (int i = 0; i < myPhoneBook.size(); i++) {
            if (criteria.compareTo((myPhoneBook.get(i)).getLastName()) == 0) {
                System.out.println(myPhoneBook.get(i));
            } else {
                System.out.print("");
            }
        }
    }

    /**
     * Loops through every element in the array and returns a toString of that
     * index for comparing with the search criteria via contains().
     */
    public void searchByZip(String criteria) {
        for (int i = 0; i < myPhoneBook.size(); i++) {
            if (criteria.compareTo((myPhoneBook.get(i)).getZipcode()) == 0) {
                System.out.println(myPhoneBook.get(i));
            } else {
                System.out.print("");
            }
        }
    }

    /** Reorganizes the array in order by last name. */
    public void sortData() {
        Collections.sort(myPhoneBook);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:02:43.077

您正在同一个 inputStream 上创建多个 Scanner 对象，最好只创建一个并将其传递给使用的方法或该类的构造函数中的下一个类。

在同一流上使用多个扫描仪。扫描器可以（并且将）消耗流——这可能（将）导致意想不到的副作用。最好不要这样做。

您可以将主类中的第 65 行替换为：

```
myLibrary.searchByCriteria(menuInput); 
```

删除该行：（在您的班级 ContactLibrary 中）

```
private Scanner libraryInput = new Scanner(System.in); 
```

# ruby-on-rails - 简单的评论输出

> ID：13519233
> 
> 赞同：0
> 
> 时间：2012-11-22T19:52:04.367
> 
> 标签：ruby-on-rails, ruby

在我的控制器中，我有：

```
def show
  @entry = Entry.find(params[:id])
  @comments = @entry.comments
end 
```

现在在视图中：

```
<% if !@comments.empty? %>
  <% @comments.each do |comment| %>
    <%= comment.id %>
  <% end %>
<% end %> 
```

我知道`@comments`不是空的，但是在这里我得到`@comments.empty? == true` 当我添加`<%= @comments %>`before`if`语句时，一切正常。`empty?`是`false`，我得到评论 ID。当我添加这个新行时，似乎运行了获取评论的查询？知道为什么以及如何在没有这条附加线的情况下使其工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T20:00:13.130

为什么你需要这个声明？

这将起作用

```
 <% @comments.each do |comment| %>
    <%= comment.id %>
  <% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T20:47:11.663

永远不要使用`if !`. 而是使用`unless`.

在这里，您甚至根本不需要空检查语句。`.each`仅在存在某些值时进行迭代。

# xslt - 如何在 XSL 样式表中的相同 fo:block 下有不同的格式？

> ID：13519240
> 
> 赞同：0
> 
> 时间：2012-11-22T19:52:42.700
> 
> 标签：xslt, formatting, stylesheet, xsl-fo, font-size

我有一个样式表如下（片段）：

```
<fo:block xsl:use-attribute-sets="header" text-align-last ="justify">
    <xsl:value-of xsl:use-attribute-sets="branding" select="$pTitle"/>
    <fo:leader leader-pattern = "space" />
    <xsl:value-of select="$vNamer"/>
</fo:block> 
```

这让我可以这样渲染标题：

```
title                                name
------------------------------------------ 
```

但是，我希望“标题”具有不同的字体大小（并加粗）。如何仅将属性应用于“标题”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:01:19.320

您可以使用[`fo:inline`](http://www.w3.org/TR/xsl/#fo_inline "第 6.6.7 节，可扩展样式表语言 (XSL) 版本 1.1 中的“fo:inline”")来包装要应用属性的部分。

从[规格](http://www.w3.org/TR/xsl/)：

> 常见用法：
> 
> fo:inline 格式化对象通常用于格式化带有背景的部分文本或将其包含在边框中。

# c# - 从 DbSet 中获取 DbContext

> ID：13519241
> 
> 赞同：3
> 
> 时间：2012-11-22T19:52:49.740
> 
> 标签：c#, entity-framework, ef-code-first, dbcontext, dbset

我正在开发一些扩展方法来为 DbSet 添加一些功能。但是，在创建“更新”方法时，我需要 DbSet 的 DbContext 才能修改实体的状态。目前的实现：

```
public void Update<TEntity>(this DbSet<TEntity> repository, TEntity entity) where TEntity : class
    {
        repository.Attach(entity);
        var context = // how get the context from repository?
        ((IObjectContextAdapter)context).ObjectContext.ObjectStateManager.ChangeObjectState(entity, EntityState.Modified);
    } 
```

有谁知道如何从 DbSet 实例中获取 DbContext ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:07:47.370

我找到了一种更好的方法来实现这一点：

```
public static void MarkAsModified(this DbContext context, object entity)
    {
        context.Entry(entity).State = EntityState.Modified;
    } 
```

# javascript - 不同来源 JSON XMLHttpRequest 的解决方法

> ID：13519242
> 
> 赞同：0
> 
> 时间：2012-11-22T19:52:55.223
> 
> 标签：javascript, rest, cross-domain

制作了一个向 yahoo.com 发送请求的网站。它在本地工作，但在另一台机器上没有。我已经确定雅虎 API 工作正常，并且雅虎的服务器确实获取了一个文件。

```
XMLHttpRequest cannot load http://ichart.finance.yahoo.com/table.csv?s=AAPL&g=d&a=0&b=1&c=2012&ignore=.csv. 

Origin http://dl.dropbox.com is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T19:55:02.093

您需要使用 Yahoo! JSONP API 代替。

# jquery - 更改添加类时带有 jquery 验证的下拉列表

> ID：13519247
> 
> 赞同：1
> 
> 时间：2012-11-22T19:53:20.943
> 
> 标签：jquery, validation

我被要求在下拉列表更改时添加一些验证。

我打算简单地在下拉列表中添加一个关于更改的类，但是我担心我不能完全解决它，所以任何帮助真的会非常感激。

下面是我的html

```
<select class="dropdownlist">
    <option class="1">1</option>
    <option class="2">2</option>
    <option class="3">3</option>
    <option class="4">4</option>
 </select> 
```

这是我的jQuery

```
 $('.dropdownlist').change(function(){
    $(this).find('option:selected').addClass("testclass") );
 }); 
```

我对 jQuery 很陌生，所以如果错误很简单，那么我很抱歉。

干杯

卡梅伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:59:59.853

**工作演示** [http://jsfiddle.net/dgVL9/](http://jsfiddle.net/dgVL9/)

问题是额外的`)`

```
 $(this).find('option:selected').addClass("testclass") );

                                                       ^--------- this is issue 
```

希望这不是验证插件，因为我看不到验证插件参考，我认为您只是指更改事件。希望它适合原因`:)`

**代码**

```
$('.dropdownlist').change(function() {
    $(this).find('option:selected').addClass("testclass");
    alert($(this).find('option:selected').prop('class'))
});​ 
```

# speech-recognition - 文字转语音、语音合成、回复：可以吗？

> ID：13519248
> 
> 赞同：1
> 
> 时间：2012-11-22T19:53:29.967
> 
> 标签：speech-recognition, speech, speech-to-text, speech-synthesis

所以，我在这里很新，我很难搜索一些信息。

我想知道这项技术目前是否存在于移动平台上。

我想用手机录制一个人的声音和短语。然后根据语音，允许其他人输入文本以检索语音数据。最好不要使用相同的单词，同时给出一个短语来捕捉产生所需短语所需的正确音节。基本上是文字转语音，但实时输入，有点像《碟中谍2》。EG我哥哥打电话给我，我录下他的声音，然后打电话给我妈妈，听起来像我哥哥。但是，不要像在音乐文件中那样将声音拼凑在一起，而是输入我想说的内容。最好是听起来不机械的东西。

希望我的描述是有道理的，任何帮助都会得到极大的帮助。

谢谢，威尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:02:47.533

您正在寻找的这个功能称为“语音转换”。当前的技术可以使一个人的声音听起来像另一个人。录制大约 30 句目标语音来进行改编就足够了。您可能不需要从文本中合成，从其他人的语音转换语音更容易。

有这项技术的演示，例如检查节：

[http://festvox.org/transform/transform.html](http://festvox.org/transform/transform.html)

对于这项技术的商业供应商，您可以查看

[http://clonevoice.com/en](http://clonevoice.com/en)

带有语音适应的 TTS 也可在开源工具中使用，但它比语音转换更复杂，请参阅此处的说话人自适应训练：

[http://hts.sp.nitech.ac.jp/?下载](http://hts.sp.nitech.ac.jp/?Download)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T19:59:08.133

文本到语音引擎使用预先录制的语音音频数据库，其中每个可能的音节都有一个剪辑。除非您让您的兄弟录制每个音节，否则您将无法合成他的声音。

# php - PHP 中的异步 API 调用

> ID：13519250
> 
> 赞同：2
> 
> 时间：2012-11-22T19:54:05.173
> 
> 标签：php, asynchronous

我有一个 PHP 脚本，它需要进行三个单独的 API 调用、组合结果并将其输出给用户。

问题是每个 API 调用大约需要 5 秒来执行。使用 3 个 API 调用，每次 5 秒，执行脚本大约需要 15 秒。

有没有一种方法可以让我同时启动三个 API 调用，一旦最后一个调用完成，合并结果？如果可能的话，我可能会将时间长度从 15 秒缩短到 5 秒，从而显着改善我的用户体验。

我研究了 PHP 中的异步函数调用，但似乎没有很多好的选择。我希望有人遇到过类似的情况，并找到了一种优雅的方式来处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:23:10.193

PHP 脚本本身是单线程的。有一些方法可以使用[pcntl_fork](http://php.net/manual/en/function.pcntl-fork.php)函数在 PHP 中“分叉”子进程。但据我所知，这只适用于 CLI sapi。对于任何 Web 服务器 sapi，它要么有问题，要么不受支持。

如果您必须从 Web 请求启动它，您可以尝试使用[shell_exec](http://us2.php.net/shell_exec)在后台生成一个主 PHP CLI 进程（附加`&`在末尾），然后使用 pcntl_fork 来划分工作。

如果您只是在等待网络请求，我会按照 Dagon 的建议使用[curl_multi](http://php.net/manual/en/function.curl-multi-init.php)函数。但是如果你有其他密集的任务，如果使用得当，分叉会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T19:56:26.913

[http://docs.php.net/Thread](http://docs.php.net/Thread)

这就是完整的答案，尽可能简短：是的，完全按照你想象的方式（我希望）。

# javascript - 在 Dreamweaver 中传递方法变量

> ID：13519252
> 
> 赞同：0
> 
> 时间：2012-11-22T19:54:07.783
> 
> 标签：javascript, variables, methods, parameter-passing, dreamweaver

我正在使用 Java 的 Dreamweaver 中构建一个 Web 程序，并且我正在尝试学习在方法之间传递变量。但是我看的所有教程都涉及参数和公共类，由于某种原因在 Dreamweaver 中没有被识别，还有其他方法吗？我该怎么做呢？

```
var list = [];

list[0] = [zero]; // USE VARIABLES HERE
list[1] = [one];
list[2] = ["two"];
list[3] = ["three"];

function Make() {
    for (var i = 0; i < 4; i++) {
        var div = document.createElement("div");
        div.style.width = "10px";
        div.style.height = "10px";
        div.style.background = "white";
        div.style.color = "black";
        div.style.top = "0px";
        div.style.left = "0px";
        div.style.margin = "10px 10px auto";
        div.style.cursor = "pointer";
        div.innerHTML = list[i];

        !function() {
            var index = 0;
            div.onclick = function() {
                doSomething(this);
                doEverything(this);
            };
        }();

        document.body.appendChild(div);
    }
}

function doSomething(element) {
    var value = element.innerHTML;
    // alert('clicked : '+ value);
    switch (value) {
    case "zero":

        break;
    case "one":
        //USE VARIABLES HERE
        break;
    case "two":
        alert("go");
        break;
    case "three":
        alert("go");
        break;
    }
}

$(document).ready(function doEverything(element) {
    $.getJSON("https://api.foursquare.com/v2/venues/search?ll=-27.58818,-48.523248&client_id=&client_secret=&v=20111107", function(data) {
        var two = data.response.venues[1].name;
        var one = data.response.venues[0].name;
        // USE THESE VARIABLES
    });
});

Make(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:41:08.277

为了更好地解释它，javascript 是一种很棒的轻量级网络语言，非常适合创建动态网页。但这只是为了这个。Java 是一种成熟的面向对象的编程语言，能够编写桌面、移动和 Web 程序。Java 也可用于服务器端编程。您正在使用“public void SomeFuntion()”阅读的函数是 Java。您在代码中拥有的是 javascript。对于您正在做的事情，如果您正在编写客户端代码，javascript 可能是您想要的，但如果您正在执行任何服务器端编程，您将需要 PHP、Cold Fusion 或其他东西。

有很多关于 javascript 的优秀教程，包括很多书籍。我经常使用的两个站点，尤其是开始使用的站点是 [tizag](http://tizag.com/) 和 [w3schools](http://www.w3schools.com/) 。这两个站点以及其他站点都有许多不同语言的教程，我发现它们在开始时提供了非常丰富的信息。祝你好运！

# c# - ImageResizer/System.Drawing 和 CMYK JPEG

> ID：13519255
> 
> 赞同：3
> 
> 时间：2012-11-22T19:54:32.987
> 
> 标签：c#, asp.net, system.drawing, imageresizer

我正在使用 ImageResizer 库在 ASP.NET MVC 4 项目中进行一些简单的图像大小调整和旋转。问题是，当我使用它处理 32-bpp CMYK JPEG 文件时，它失败并出现 ArgumentException，但仅在我的（Windows Server 2008 R2）服务器上 - 它在我的（Windows Vista）笔记本电脑上运行良好。

有问题的 JPEG 文件不是太大 (700x500) 或其他非标准文件 - 所有 Web 浏览器和 Paint 都可以很好地打开它们，即使在有问题的服务器本身上也是如此。JPEG 是使用 ImageMagick 生成的，如果我要求 ImageMagick 使用 RGB 颜色空间（`-colorspace sRGB`.） ，一切正常

奇怪的是，在所有情况下调整图像大小都可以正常工作，但如果我尝试在服务器上调整图像大小和旋转图像，它就会失败。

看起来一些较低级别的 Win32 或 GDI+ 函数调用在这里失败了 - 这是堆栈跟踪的相关部分：

```
[ArgumentException: Parameter is not valid.]
   System.Drawing.Graphics.CheckErrorStatus(Int32 status) +1621285
   System.Drawing.Graphics.DrawImage(Image image, PointF[] destPoints, RectangleF srcRect, GraphicsUnit srcUnit, ImageAttributes imageAttr, DrawImageAbort callback, Int32 callbackData) +727
   System.Drawing.Graphics.DrawImage(Image image, PointF[] destPoints, RectangleF srcRect, GraphicsUnit srcUnit, ImageAttributes imageAttr) +73
   ImageResizer.ImageBuilder.RenderImage(ImageState s) +763
   ImageResizer.ImageBuilder.Render(ImageState s) +174
   ImageResizer.ImageBuilder.Process(ImageState s) +105
   ImageResizer.ImageBuilder.buildToBitmap(Bitmap source, ResizeSettings settings, Boolean transparencySupported) +276
   ImageResizer.ImageBuilder.buildToStream(Bitmap source, Stream dest, ResizeSettings settings) +149
   ImageResizer.ImageBuilder.BuildJob(ImageJob job) +940
   ImageResizer.ImageBuilder.Build(ImageJob job) +223 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T00:44:37.330

经过更多的研究和测试，我发现只有`Bitmap.RotateFlip`在源位图上调用该方法时才会出现问题，然后才将其绘制到目标位图上以进行裁剪和调整大小。

我最终不得不自己使用普通的旧代码重新编写代码`System.Drawing`，因为无法更改 ImageResizer 库的行为。具体来说，我编写了自己的旋转函数，它使用变换矩阵来做同样的事情。

```
 private Bitmap RotateImage(Bitmap source, float angle)
    {
        if (angle == 0) return (Bitmap)source.Clone();

        Bitmap target;
        using (GraphicsPath path = new GraphicsPath())
        using (Matrix matrix = new Matrix())
        {
            path.AddRectangle(new RectangleF(0.0f, 0.0f, source.Width, source.Height));
            matrix.Rotate(angle);
            RectangleF rect = path.GetBounds(matrix);

            target = new Bitmap((int)Math.Round(rect.Width), (int)Math.Round(rect.Height));
            target.SetResolution(source.HorizontalResolution, source.VerticalResolution);

            using (Graphics g = Graphics.FromImage(target))
            {
                g.TranslateTransform(-rect.X, -rect.Y);
                g.RotateTransform(angle);
                g.InterpolationMode = InterpolationMode.HighQualityBicubic;
                g.DrawImageUnscaled(source, 0, 0);
            }
        }
        return target;
    } 
```

我本来想从源头设置`PixelFormat`新`Bitmap`的 - 但这样做会在遇到有问题的 CMYK JPEG 文件时引发奇怪的 GDI+“内存不足”错误。这让我想知道这种奇怪的行为是否与[这个](https://stackoverflow.com/q/4315335/1292105)GDI+ 错误/怪癖有关，它在 Windows 7/Server 2008 R2 和 Windows Vista/Server 2008 上返回不同`ImageFlags`的值。`PixelFormat`

# batch-file - 使用 For /F 在所有子目录中创建新文件夹

> ID：13519267
> 
> 赞同：1
> 
> 时间：2012-11-22T19:55:37.140
> 
> 标签：batch-file

我正在尝试创建一个标准化的目录结构来准备驱动器，以便整理和迁移到新位置。我要做的是在驱动器的根目录中运行一个批处理文件，该文件适用于所有子目录，并在每个子目录中创建一个名为“存档”的新文件夹，以便整理文件，然后再移动或删除。

我正在尝试将 FOR /F 与 MD 命令一起使用来创建文件夹，但我真的很难理解语法。令牌和变量。我正在尝试适应类似的东西

```
for /f "tokens=*" %a in ('dir /b /s /a-d') do @copy "%a" "c:\Single-Folder" 
```

我从[这里](https://superuser.com/questions/137336/copy-all-files-in-subfolders-to-single-folder-on-xp)找到了用@md 替换@copy ...但我真的超出了我的深度。

非常感谢任何提供的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:37:40.113

您正在使用的命令：

```
dir /b /s /a-d 
```

列出除目录以外的所有内容（- 符号否定该属性）。因此，您必须使用的正确命令是：

```
dir /b /s /ad 
```

（自己试试吧！）。

`FOR /F`读取`dir`命令的输出，一次一行文本。`tokens=*`将获得整行（删除前导空格）。我认为你需要这个：

```
for /f "tokens=*" %a in ('dir /b /s /ad') do @echo mkdir "%a\Archive" 
```

当您确定它正确时，删除`echo`命令以实际执行`mkdir`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:11:59.437

我认为您想要做的是这种类型的结构：

```
@Echo OFF

REM By Elektro H@cker

For /D /R "%SYSTEMDRIVE%\" %%#  in (*) do (MKDIR "%SYSTEMDRIVE%\Single-Folder\%%~p#")

Pause&Exit 
```

# vb.net - 在 VB.net 中延迟

> ID：13519274
> 
> 赞同：2
> 
> 时间：2012-11-22T19:56:44.967
> 
> 标签：vb.net, delay

我的问题是我需要在按下按钮后等待 3-4 秒才能检查它，这是我在 button1_click 下的代码：

```
 While Not File.Exists(LastCap)
            Application.DoEvents()
            MsgBox("testtestetstets")
        End While

        PictureBox1.Load(LastCap) 
```

我认为我做错了一些非常简单的事情，我在 VB 方面不是最好的，因为我只是在学习，所以任何解释都会很棒！

~谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T22:57:29.093

如果您需要等待的原因是要创建文件，请尝试使用 a[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)并以响应事件的方式响应[`Created`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.created.aspx)和[`Changed`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.changed.aspx)事件，而不是任意等待选定的时间段。

就像是：

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    FileSystemWatcher1.Path = 'Your Path Here
    FileSystemWatcher1.EnableRaisingEvents = True
   'Do what you need to todo to initiate the file creation
End Sub

Private Sub FileSystemWatcher1_Created(sender As Object, e As System.IO.FileSystemEventArgs) Handles FileSystemWatcher1.Created, FileSystemWatcher1.Changed
    If e.Name = LastCap Then
        If (System.IO.File.Exists(e.FullPath)) Then
            FileSystemWatcher1.EnableRaisingEvents = False
            PictureBox1.Load(e.FullPath)
        End If
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T20:15:31.503

您可以使用，但不推荐：

```
Threading.Thread.Sleep(3000) 'ms 
```

这将等待 3 秒，但也会阻塞同一线程上的所有其他内容。如果你以这种形式运行它，你的用户界面在等待结束之前不会响应。

顺便说一句：使用`MessageBox.Show("My message")`代替`MsgBox`（后者来自旧VB）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-22T22:16:12.180

如果您希望表单在 3 秒过去后继续运行，您可以添加一个 Timer 控件，代码如下：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    ' set the timer
    Timer1.Interval = 3000 'ms
    Timer1.Start()
End Sub

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    Timer1.Stop()
    'add delayed code here
    '...
    '...
    MessageBox.Show("Delayed message...")
End Sub 
```

将 Timer 控件从工具箱拖放到表单中。它在运行时不可见

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-05-24T17:23:14.523

或者更好的是使用秒表制作等待功能，这不会像线程睡眠一样停止同一线程中的进程

```
 ' Loops for a specificied period of time (milliseconds)
Private Sub wait(ByVal interval As Integer)
    Dim sw As New Stopwatch
    sw.Start()
    Do While sw.ElapsedMilliseconds < interval
        ' Allows UI to remain responsive
        Application.DoEvents()
    Loop
    sw.Stop()
End Sub 
```

用法

```
wait(3000) 
```

延迟 3 秒

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-24T16:33:37.027

你可以用这个

```
Public Sub BeLazy()
    For i = 1 To 30
        Threading.Thread.Sleep(100)
        Application.DoEvents()
    Next
End Sub 
```

它将延迟 3 秒。

# php - 字符串浮动，反之亦然

> ID：13519276
> 
> 赞同：0
> 
> 时间：2012-11-22T19:56:54.013
> 
> 标签：php, string, increment

我如何将其转换为浮点数，然后将其递增，然后再转换回字符串。

```
if($set==$Data_Id)
{
$rel='1.1.1.2';
} 
```

增量后应该像 1.1.1.3。

请任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:06:20.840

太疯狂了，它可能会起作用

```
$rel='1.1.1.2';
echo substr($rel, 0, -1). (substr($rel,-1)+1); //1.1.1.3 
```

**最大的问题是如果字符串以9**结尾，你想发生什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T20:47:04.637

这是一种略有不同的方法。

```
<?php
function increment_revision($version) {
    return preg_replace_callback('~[0-9]+$~', function($match) {
        return ++$match[0];
    }, $version);
}

echo increment_revision('1.2.3.4'); //1.2.3.5 
```

安东尼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T20:03:39.177

“1.1.1.2”不是有效数字。所以你必须做这样的事情：

```
$rel = '1.1.1.2';
$relPlusOne = increment($rel);
function increment($number) {
    $parts = explode('.', $number);
    $parts[count($parts) - 1]++;
    return implode('.', $parts);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T20:16:41.087

如果这正是您需要解决的情况，您可以使用[intval()](http://php.net/manual/en/function.intval.php)、[strval()](http://php.net/manual/en/function.strval.php)、[str_replace()](http://www.w3schools.com/php/func_string_str_replace.asp)、[substr()](http://php.net/manual/en/function.substr.php)和[strlen()](http://php.net/manual/en/function.strlen.php)来解决。

```
$rel = '1.1.1.2'; // '1.1.1.2'

// replace dots with empty strings
$rel = str_replace('.', '', $rel); // '1112'
// get the integer value
$num = intval($rel); // 1112
// add 1
$num += 1; // 1113

// convert it back to a string
$str = strval($num); // '1113'
// initialize the return value
$ret = ''; 

// for each letter in $str
for ($i=0; $i<strlen($str); $i++) {
  echo "Current ret: $ret<br>";
  $ret .= $str[$i] . '.'; // append the current letter, then append a dot
}
$ret = substr($ret, 0, -1); // remove the last dot

echo "Incremented value: " . $ret; 
```

但是，此方法会将 1.1.1.9 更改为 1.1.2.0。如果这就是你想要的，那么这会很好。

# perl - Perl JSON::RPC::Client 不是 HASH 引用错误

> ID：13519277
> 
> 赞同：0
> 
> 时间：2012-11-22T19:56:57.510
> 
> 标签：perl, ssl

当我调用远程**回**显程序时，我的调用会到达 rpc 服务器，该服务器是用 python 编写的，带有 txjsonrpc 模块。但这个脚本说：

> 在 /usr/local/lib/perl/5.14.2/Moose/Meta 处的字符偏移量 0（在“读取失败：在 /us...”之前）处的格式错误的 JSON 字符串，既不是数组、对象、数字、字符串也不是原子/Method/Delegation.pm 第 110 行

任何想法？代码在这里：

```
use LWP::UserAgent;
use JSON::RPC::LWP;
use Net::SSL ();
use JSON::RPC::Client;

$ENV{HTTPS_DEBUG} = 1;
# CA cert peer verification
$ENV{HTTPS_CA_FILE}   = 'ca_file';
$ENV{HTTPS_CA_DIR}    = 'ca_dir';

# Client PKCS12 cert support
$ENV{HTTPS_PKCS12_FILE}     = 'pkcs12 cert';
$ENV{HTTPS_PKCS12_PASSWORD} = 'password';

my $ua = eval { LWP::UserAgent->new() }
        or die "Could not make user-agent! $@";
$ua->ssl_opts( verify_hostname => 0);

print "JSON RPC CONNECTION\n";
my $rpc = JSON::RPC::Client->new(
  ua => $ua,
  version => '2.0'
);
my $result = $rpc->call( 'https://...', {method=>'echo', params=>['param']});
print $result->result, "\n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:40:02.787

您使用的是什么版本的 JSON::RPC::Client？如果它是最新的，则该错误正在发生，因为服务器返回的不是 JSON 对象。

# c# - 在后面的代码上调用确认对话框并获取所选选项

> ID：13519281
> 
> 赞同：6
> 
> 时间：2012-11-22T19:57:29.137
> 
> 标签：c#, javascript, asp.net

我正在开发一个 asp.net 应用程序，我需要在后面的代码上调用一个确认对话框。之后，我需要获得用户的点击（如果他点击了确定或取消）。

如果他单击对话框的确定​​按钮，我必须继续运行我在调用对话框之前停止的代码。

为了解决这个问题，我想在 aspx 上放置一个类型按钮的输入，并将其样式设置为可见性：隐藏。因此，当用户单击“确定”按钮时，程序将调用此隐藏按钮，该按钮调用将继续停止作业的方法。

我会发布我的代码，我希望它可能会有所帮助。

下面的代码在我的代码后面，它调用确认对话框。

```
System.Web.UI.
    ScriptManager.RegisterClientScriptBlock(this, GetType(), "__Mensagem", "if (confirm('" + CustomMessage + "')){document.getElementById(\'<%=btnSave.ClientID%>\').click();}", true); 
```

下面的代码在我的 aspx 上，它是“隐藏”按钮。

```
<input style="visibility:hidden;" id="btnSave" runat="server" onclick="btnSave_Click"/> 
```

我不知道为什么不起作用。单击确认对话框的按钮 OK 后收到的错误如下： Erro em tempo de execução do Microsoft JScript: 'document.getElementByID(...)' é nulo ou não é um objeto

我来自巴西，所以错误是葡萄牙语，翻译成英语是这样的：

**“Microsoft JScript 'document.getElementByID(...)' 发生运行时错误为 null 或不是对象”**

我看一下页面的 html 代码，我注意到该按钮不存在。

也许是因为我使用的是 UpdatePanel，但是当我删除它时（只是为了测试，我必须使用更新面板），显示相同的错误，并且此时按钮位于页面的 html 代码上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:31:14.890

暗中一刀。

在你的代码隐藏中你设置了`btnSave.visible = false;`吗？如果是这样，这将阻止按钮被呈现到`HTML`.

另外，您是否有任何理由不使用 ASP:Button 控件，而不是 HTML 与`runat="server"`?

最后，它可能有助于`type='button'`您的`<input....`

**更新**

问题是您正在尝试应用内联标签 `document.getElementById(\'<%=btnSave.ClientID%>\')`

在您的代码`<%=btnSave.ClientID%>`中尚不存在。

当您将按钮放在另一个服务器控件中时，您的代码将中断，因为 clientId 将变得不同。

将代码更改为：

```
 document.getElementById('" + btnSave.ClientID + "') 
```

无论您在哪里拥有按钮，它都会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:24:59.483

在浏览器中呈现页面后，右键单击它，然后说“查看源代码”。检查 HTML 并尝试找到您的隐藏按钮，如果找到，请在您的语句中使用它的 id `getElementById(\'<%=btnSave.ClientID%>\')`。如果你没有找到你的按钮，那么可能你已经从你的代码隐藏的某个地方将它的可见性设置为 false，删除它，再次按照上面的过程，你应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:41:36.057

我解决了更换零件的问题

```
document.getElementById(\'<%=btnSave.ClientID%>\').click(); 
```

经过

```
$(\"#ctl00_body_btnSave\").click(); 
```

我还用 asp:Button 替换了输入元素。

现在看看我的代码在我的代码后面的情况：

```
System.Web.UI.
    ScriptManager.RegisterClientScriptBlock(this, GetType(), "__Mensagem", "if (confirm('" + CustomMessage+ "')){$(\"#" + btnSave.ClientID + "\").click();}", true); 
```

在我的 aspx 上：

```
<asp:Button id="btnSave" Width="0px" Text="" runat="server" onclick="btnSave_Click"/> 
```

不推荐使用 Widht="0px" 和 Text="" 来隐藏按钮，但我使用它是因为它不会给我带来问题。建议使用 CssClass 使其隐藏。

因此，如果用户确认操作，则调用偶数 btnSave_Click。

感谢所有的答案。

# android - 在代码中为 AnimatorSet 设置重复

> ID：13519287
> 
> 赞同：1
> 
> 时间：2012-11-22T19:58:01.180
> 
> 标签：android, animation

我正在使用 Android 中的 AnimatorSets，但我一生都无法弄清楚你是如何在代码中设置重复的。你在 AnimatorSet 上调用什么方法来设置任意重复，还是我做错了？我肯定错过了什么...！

非常感谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-22T20:06:20.303

一般来说尽量避免AnimationSet。AnimationSet 被严重破坏（即[这个错误报告](https://code.google.com/p/android/issues/detail?id=17662)）。有些东西可以通过 XML 工作，而另一些则不能。我个人最终得到了自己的动画代码，它利用 AnimationListener 来构建复杂的动画，而无需使用 set。

一些关于这种方法的快速[找到的教程](http://androidblogger.blogspot.com/2009/01/chaining-two-animations-or-how-to.html)。

# python - 如何删除html命令

> ID：13519296
> 
> 赞同：0
> 
> 时间：2012-11-22T19:58:21.833
> 
> 标签：python

我有一个 .htm 文件。通过使用 text_content()，我从文档中提取了文本。以下是正文：

> '第 II 部分 \xa0\r\n公司\x92s 普通股在场外交易市场交易，并在纳斯达克全球精选市场以代码\r\nAAPL 和在法兰克福证券交易所以 APCD 代码进行报价. 普通股的价格范围 下面列出的普通股每股价格范围代表公司\x92s 普通股\r\n 在最近两年的每个季度中在纳斯达克全球精选市场之外的最高和最低销售价格。\xa0\r\n持有人 截至 2009 年 10 月\xa016，共有 30,573 名登记在册的股东。股息\r\n 公司在 2009 年或 2008 年均未宣布或支付现金股息。公司预计在可预见的\r\n未来将保留任何收益以用于其业务运营。发行人及其附属机构购买的股本证券\r\n购买者无。\xa0\r\n 33 '

使用此文本，我需要删除前面和后面有一个空行的标题。因此，应删除以下形式的行：

```
\n
some text here\n
\n 
```

我有一个为 .txt 版本的文档执行此操作的代码。但是，从 .htm 文档中，我意识到像 \xa0\r\n 这样的一些奇怪的东西被用来使单词大写（例如）。有没有办法删除所有这些东西并正确删除标题？

这是删除标题的函数：

```
def clean_text_passage(a_text_string):
    """REMOVE /n:  take a list of strings (some passage of text)
and remove noise which is defined as lines that are preceded
by a blank line and followed by a blank line that is lines of
this form will not be in the output
\n
some text here\n
\n
"""
    new_passage=[]
    p=[line+'\n' for line in a_text_string.split('\n')]
    passage = [w.lower().replace('</b>\n', '\n') for w in p]

    if len(passage[0].strip())>0:
       if len(passage[1].strip())>0:
           new_passage.append(passage[0])

    for counter, text_line in enumerate(passage[:-1]):
        len_line_before=len(passage[counter-1].strip())
        len_line_after=len(passage[counter+1].strip())
        if len_line_before==len_line_after==0:
            continue
        if len(text_line.strip())!=0:
            new_passage.append(text_line)

    if len(passage[-2].strip())!=0:
        if len(passage[-1].strip())!=0:
            new_passage.append(passage[-1])

    return new_passage 
```

我想关键是要识别 htm 文档中的标题。

非常感谢您的时间和帮助。

# objective-c - 类似 iOS 主屏幕的 UICollectionView

> ID：13519302
> 
> 赞同：9
> 
> 时间：2012-11-22T19:58:59.087
> 
> 标签：objective-c, ios, uicollectionview, uicollectionviewcell

我想做一个 UICollectionView 像 iOS 主屏幕。我发现了几个（而且很好）样本，例如：

[http://mobile.tutsplus.com/tutorials/iphone/uicollectionview-layouts/](http://mobile.tutsplus.com/tutorials/iphone/uicollectionview-layouts/)

[http://www.cocoacontrols.com/platforms/ios/controls/sespringboard](http://www.cocoacontrols.com/platforms/ios/controls/sespringboard)

[http://www.cocoacontrols.com/platforms/ios/controls/aqgridview](http://www.cocoacontrols.com/platforms/ios/controls/aqgridview)

[http://www.cocoacontrols.com/platforms/ios/controls/namenu](http://www.cocoacontrols.com/platforms/ios/controls/namenu)

[http://www.cocoacontrols.com/platforms/ios/controls/mgbox2](http://www.cocoacontrols.com/platforms/ios/controls/mgbox2)

[iOS：是否有类似主屏幕的开源启动器视图？](https://stackoverflow.com/questions/7531246/ios-are-there-any-open-source-launcher-views-like-the-home-screen)

上面的所有库都运行良好。编辑、删除和动画不是问题。但是将两个单元组合成一个新组，好吧，没有一个库能够做到这一点。我进行了大量搜索，但没有找到任何东西。有人知道任何库可以将两个单元格与拖放结合起来吗？！？！或者至少有一些关于如何制作的提示？！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T13:04:17.750

您可以使用部分来对项目进行分组，并使用 SupplementaryElements 来装饰组。

或者

您也可以只创建 2 种不同的 UICollectionViewCells：一个普通单元格 + 一个组单元格。

如果您的数据源反映了分组，它应该直接决定在 collectionView:cellForItemAtIndexPath: 中返回哪一个。

# rotation - CABasicAnimation 的旋转不准确...与正确的角度不匹配

> ID：13519305
> 
> 赞同：0
> 
> 时间：2012-11-22T19:59:16.200
> 
> 标签：rotation, core-animation, cabasicanimation

我正在开发一个地图应用程序。我在地图上画了一条动画线，然后使用应该在这条线上绘制的图像（标尺图像）。为了画线，我使用带有路径的 CABasicAnimation：

```
 -(void)lineaAnimation {
        CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"path"];
        animation.duration = animDuration;
        animation.delegate=self;
        animation.repeatCount = 0;
        animation.autoreverses = NO;
        animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
        animation.fromValue = (id)inip;
        animation.toValue = (id)finp;
        animation.fillMode=kCAFillModeForwards;
        animation.removedOnCompletion=NO;
        [shapeLayer addAnimation:animation forKey:@"animatePath"];
    }

    -(void)linea:(CGPoint)origen to:(CGPoint)destino animado:(BOOL)anim duracion:(float)durac inicio:(float)delay {
        inip    = CGPathCreateMutable();
        finp    = CGPathCreateMutable();

        CGPathMoveToPoint(inip, nil, origen.x, origen.y);
        CGPathAddLineToPoint(inip, nil, origen.x, origen.y);
        CGPathCloseSubpath(inip);

        CGPathMoveToPoint(finp, nil, origen.x, origen.y);
        CGPathAddLineToPoint(finp, nil, destino.x, destino.y);
        CGPathCloseSubpath(finp);

        rootLayer   = [CALayer layer];
        rootLayer.frame = fondo.bounds;
        [fondo.layer addSublayer:rootLayer];

        shapeLayer = [CAShapeLayer layer];
        shapeLayer.path = inip;
        UIColor *fillColor = [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.7];
        shapeLayer.fillColor = fillColor.CGColor;
        UIColor *strokeColor = [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.7];
        shapeLayer.strokeColor = strokeColor.CGColor;
        shapeLayer.lineWidth = 5.0;
        shapeLayer.fillRule = kCAFillRuleEvenOdd;
        [morrallaLayer addObject:shapeLayer];
        [rootLayer addSublayer:shapeLayer];
        animDuration=durac;
        [self performSelector:@selector(lineaAnimation) withObject:nil afterDelay:delay];
    } 
```

然后我尝试将规则的中心移动到该点并使用以下代码旋转标尺图像：

```
 delta=acos((destino.y-origen.y)/(destino.x-origen.x));
    giroIni=0.0;
    giroFin=delta;
    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    animation.fromValue= [NSNumber numberWithFloat:giroIni];
    animation.toValue= [NSNumber numberWithFloat:giroFin];
    animation.delegate = self;
    animation.repeatCount = 0;
    animation.autoreverses = NO;
        animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    animation.duration = animDuration;
    animation.fillMode=kCAFillModeForwards;
    animation.removedOnCompletion=NO;
    [ruleL addAnimation:animation forKey:@"giroAngulo"]; 
```

问题是标尺边界线与画线不匹配，根据最终方向的不同，存在一定程度的差异......为什么？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:46:05.703

Ooooops... sorry for your time :( I found the problem and.. as usual the error is not in the stars but in ourselves

I use the acos function when OBVIOUSLY I should use atan

# c# - 获取点击控件的ID

> ID：13519312
> 
> 赞同：-1
> 
> 时间：2012-11-22T20:00:31.463
> 
> 标签：c#, jquery, asp.net

使用 jQuery，我试图获取我单击的控件 ID（单选按钮）。我读[了这个问题](https://stackoverflow.com/questions/10578566/jquery-this-id-return-undefined)并从那里尝试了几乎所有东西：

```
alert($(this).get(0).id);
alert($(this).id);
alert($(this).attr('id'));
alert(this.id); 
```

但我总是得到：`Undefined`

我只是不明白我做错了什么。

**更新：**

单选按钮是由 C# 在后面的代码中动态生成的：

```
controlToReturn = new RadioButton
                    {
                        ID = controlId
                    };
                    ((RadioButton)controlToReturn).Text = text;
                    ((RadioButton)controlToReturn).Checked = Convert.ToBoolean(Convert.ToInt32(value));
                    ((RadioButton)controlToReturn).GroupName = groupName;
                    ((RadioButton)controlToReturn).CssClass = cssClass;
                    ((RadioButton)controlToReturn).Attributes.Add("runat", "server");
                    ((RadioButton)controlToReturn).Attributes.Add("onclick", "Show();"); 
```

和 ASPX 中的功能：

```
<script type="text/javascript" language="javascript">
function Show() {

             if ($(this).cheked = true) {

                 console.log(this);
                 alert($(this).get(0).id);
                 alert($(this).id);
                 alert($(this).attr('id'));
                 alert(this.id);               
             }        
         }
     </script> 
```

我知道单选按钮有 id，我检查了生成的 HTML。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:24:04.680

您的问题`this`在您的功能中没有上下文，实际上是`window`它本身。

您需要同时修改输出 html 以提供上下文作为参数：

```
 ((RadioButton)controlToReturn).Attributes.Add("onclick", "Show(this);"); 
```

并更改功能`Show`：

```
function Show(el) {
    /* for jQuery use $(el) */
    if(el.checked) {
        alert(el.id);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T20:20:36.133

*C＃：*

```
((RadioButton)controlToReturn).Attributes.Add("onclick", "Show(this);"); 
```

*JavaScript：*

```
function Show(radio) {
    if (radio.checked) {
        alert(radio.id);               
    }        
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T20:05:52.667

要附加点击侦听器并提醒 ID，您的代码应如下所示：

```
​$(function () {
    $("input[type='radio']").on("click", function () {
        alert(this.id);            
    });
});​ 
```

一个工作演示：http: [//jsfiddle.net/SSBnV/1/](http://jsfiddle.net/SSBnV/1/)

# django - Django 模型中的类似涂鸦的功能？

> ID：13519316
> 
> 赞同：0
> 
> 时间：2012-11-22T20:00:54.723
> 
> 标签：django

我想允许用户在一周的 7 天中的任何一天提供三个时间段中的任何一个的可用性。

这样做的蛮力方法是简单地提供 21 个复选框，所以

```
MONDAY_AM = models.BooleanField()
MONDAY_NOON = models.BooleanField()
...
SUNDAY_PM = models.BooleanField() 
```

然而，这似乎很愚蠢。如果我想回忆所有的星期一或所有的晚上怎么办？只是它似乎不能很好地扩展。

我想要一种更复杂的方法，理想情况下，它允许我将这些模型注册到 Django 的管理员，以便我可以以表格形式查看每个用户的可用性，例如

```
 |Mo Tu We Th Fr Sa Su
AM   | x  x
NOON |       x  x     x  x
PM   |       x        x  x 
```

任何帮助都将不胜感激（是的，到目前为止，Doodle 远远超出了我的功能，但 1\. 这是一个学习项目，2\. 我计划将其转向不同的方向）

编辑：顺便说一句，来自 Python 和 Qt 等等，我最初的方法是嵌套循环和字典，但 South 和 Django 似乎不喜欢那样。我需要更多地考虑“类似数据库”，所以不要害怕提交几乎微不足道的东西。这可能是我需要的，真的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:37:28.877

过去我也需要这个功能。其中`Teacher`必须定义它在一天中的任何时间的可用时间，所以我想出了这个模型：

```
class Availability(models.Model):
    WEEKDAY_CHOICES = (
        (0, 'Monday'),
        (1, 'Tuesday'),
        (2, 'Wednesday'),
        (3, 'Thursday'),
        (4, 'Friday'),
        (5, 'Saturday'),
        (6, 'Sunday'),
    )
    id = models.AutoField(primary_key=True)
    teacher = models.ForeignKey(Teacher)
    weekday = models.PositiveSmallIntegerField(choices=WEEKDAY_CHOICES)
    start_time = models.TimeField(null=True, blank=True)
    end_time = models.TimeField(null=True, blank=True)

    class Meta:
        db_table = 'availability'
        unique_together = ("teacher", "weekday") 
```

我希望这会帮助你到达某个地方。

# sql - Query the Win32_NTLogEvent Class to get the errors from last week

> ID：13519317
> 
> 赞同：3
> 
> 时间：2012-11-22T20:00:54.630
> 
> 标签：sql, wmi, event-log

I want to get events of type error or critical with logfile = application from last week. This query works for first 2 conditions but I don't know how to get only records from last week. I tried "And TimeGenerated > GETDATE()-7" but I got Invalid Query.

```
Select * from Win32_NTLogEvent where Logfile = 'Application' AND (type ='Error' OR type ='Critical') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T18:43:45.517

```
Select * from Win32_NTLogEvent Where LogFile = 'Application' And (Type ='Error' Or Type ='Critical') And TimeGenerated > '20121117000000.000000+060' And TimeGenerated < '20121124000000.000000+060' 
```

The +060 part depends on your time zone (I'm on GMT + 60 min). You can construct start and date strings dynamically.

# c# - 绑定和支持富文本格式

> ID：13519320
> 
> 赞同：0
> 
> 时间：2012-11-22T20:01:11.847
> 
> 标签：c#, wpf, listview, binding, .net-4.5

考虑以下场景：

*   我有一个`ListView`绑定到`ObservableCollection`使用的`DataContext`：

    ```
    <ListView ItemsSource="{Binding}"> 
    ```

    `class`包含`string`数据使用该机制`DependencyProperty`使显示的内容与数据集合保持同步。

*   `ListView`有一个可编辑的列（我按照[这里](http://www.switchonthecode.com/tutorials/wpf-tutorial-using-the-listview-part-3-in-place-edit)的教程来实现这一点）；`ListViewItem`然后是 a或`TextBlock`a `TextBox`。这是使用一个`DataTemplate`和两个`Style`资源完成的。
*   我想`TextBlock`根据搜索字符串格式化显示的字符串。具体来说，如果有匹配项，我想将 的项目格式化为`ListView`粗体，因为用户在他们的搜索查询中键入（如果有匹配项）（只有按顺序匹配的字符才应该变为粗体）。这只需要为当前正在使用 呈现的文本`TextBlock`（即当前未编辑的文本）显示。

我考虑过使用`IMultiValueConverter`一个引用来`TextBlock`呈现数据的 ，以便我可以适当地格式化文本。但是，这将破坏我设置的绑定：

```
<TextBlock.Text>
  <MultiBinding Converter="{StaticResource searchFormatter}" ConverterParameter="{x:Reference Name=txtSearch}">
    <MultiBinding.Bindings>
      <Binding Path="NameOfBoundDependencyProperty"/>
      <Binding RelativeSource="{RelativeSource Self}"/>
    </MultiBinding.Bindings>
  </MultiBinding>
</TextBlock.Text> 
```

`searchFormatter`是`IMultiValueConverter`和`txtSearch`是`TextBox`包含搜索查询。

我仍在学习 WPF，所以我不熟悉最好的方法或可能的方法。有没有办法保持数据绑定（以便编辑反映在集合和 中`ListView`）并且仍然以不同的方式向用户表示数据（以便搜索匹配可能是粗体）？如果我手动管理绑定，也许会更干净？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:16:32.523

我决定使用`Control`支持 HTML 的 a，以便我可以使用 a`IValueConverter`即时更新显示文本的值，而不会影响任何活动绑定。我使用了[这里](http://blogs.u2u.be/diederik/post/2010/08/31/a-rich-html-textblock-for-wpf.aspx)的代码并对其进行了修改，使其看起来像`TextBlock`我的`ListView`：

```
BorderBrush = Brushes.Transparent;
SelectionBrush = Brushes.Transparent;
Cursor = Cursors.Arrow;
BorderThickness = new Thickness(0);
Background = Brushes.Transparent; 
```

但是，我仍然需要触发，`IValueConverter`以便在用户输入搜索查询时更新显示（来自[此处](https://stackoverflow.com/a/4489086/1244630)的代码）：

```
ICollectionView view = CollectionViewSource.GetDefaultView(ItemsSource);
view.Refresh(); 
```

我不想减慢搜索过程，所以我只在实际匹配时才强制刷新（或者匹配状态变为不匹配）。我`IValueConvertor`只是插入了粗体标签以匹配搜索查询：

```
<RichTextBox Text="{Binding Path=DisplayItem, Converter={StaticResource searchFormatter}, ConverterParameter={x:Reference txtSearch}}"/> 
```

`searchFormatter`这次是哪里`IValueConvertor`。

# java - 创建一个从 java 程序中检索数据并显示它的网页

> ID：13519325
> 
> 赞同：1
> 
> 时间：2012-11-22T20:01:28.040
> 
> 标签：java, html, web-applications, webserver

我只是想知道这样的事情是否可行，也许是对所需步骤的一般概述。

基本上，我有一个包含表单的网页。当用户单击提交时，我想将数据发送到我创建的 java 程序，该程序将依次处理表单数据并将一些输出返回到网页。

java 程序本身非常简单（它返回一些简单的字符串），但它应该不断运行并等待表单提交和返回输出。

到目前为止，我已经设置好了网页，并且 java 程序在 eclipse 中运行正常。但除此之外，我对下一步该做什么以及如何将两者联系起来有点迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:14:06.287

有几种不同的方法可以做到这一点，每种方法都有自己的优点和缺点。不同的人会提出不同的框架和技术。

听起来你好像还在赚钱，你的问题很简单。我建议您下载[Apache Tomcat](http://tomcat.apache.org/)的副本。这就是我们所说的 servlet 容器（它也有一个内置的网络服务器）。这将解决您问题的“不断运行并等待表单提交”部分。

接下来，您必须编写一些接受表单提交的内容。最简单的入门方法是编写一个 Servlet，即使在较大的应用程序上您可能不想直接使用 Servlet。您可以在 Google 上获取 Servlet 教程，或查看有关该主题的众多书籍之一 - 请参阅[https://softwareengineering.stackexchange.com/questions/29918/what-are-some-good-books-on-java- servlets 和 jsp](https://softwareengineering.stackexchange.com/questions/29918/what-are-some-good-books-on-java-servlets-and-jsp)。

然后，您可以将 Servlet 部署到您的 Tomcat servlet 容器中，并让它为您完成艰苦的工作。

由于它与独立应用程序完全不同，因此需要一些时间来了解所有细节，所以请耐心等待。您刚刚开始了 Web 开发人员的旅程。祝你好运！

# c# - 如何更改列表框中项目的名称/字符串？

> ID：13519328
> 
> 赞同：2
> 
> 时间：2012-11-22T20:02:00.453
> 
> 标签：c#, winforms, listbox

以这种方式添加项目后：

```
for (int x = 1; x <= 50; x++)
   {
      listBox1.Items.Add("Item " + x.ToString());
   } 
```

我想知道如何在以后进行更改时更新他们的名字。在代码中。假设我想更改索引 5 处的项目名称，我该怎么做？

显然这样的事情是行不通的：

```
listBox1.Items[5].???? = "new string"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T20:07:42.613

只是

```
listBox1.Items[5] = "new string"; 
```

`ListBox.ObjectCollection`是实现的项目的集合`IList`。索引将给出项目本身。所以可以直接赋值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T20:09:13.397

您应该能够使用以下内容：

```
private void UpdateListBoxItem(ListBox lb, object item) {
        int index = lb.Items.IndexOf(item);
        int currIndex = lb.SelectedIndex;
        lb.BeginUpdate();
        try {
            lb.ClearSelected();
            lb.Items[index] = item;
            lb.SelectedIndex = currIndex;
        }
        finally {
            lb.EndUpdate();
        }
    } 
```

这是用法：

```
MyObject item = (MyObject)myListBox.Items[0];
item.Text = "New value";
UpdateListBoxItem(myListBox, item); 
```

# java - 我应该怎么做才能在 Apache Tomcat 5.0 Web 服务器中使用 EJB 3.1

> ID：13519330
> 
> 赞同：-2
> 
> 时间：2012-11-22T20:02:03.983
> 
> 标签：java, jakarta-ee, ejb-3.1, openejb

> **可能重复：**
> [如何在 Tomcat 5.5.x 中部署 EJB 3.1](https://stackoverflow.com/questions/13440421/how-to-ejb-3-1-deployment-in-tomcat-5-5-x)

> 块引用

任何朋友请帮助我，我有一个带有 apache tomcat 5.0 jsp 2.0 和 jvm 1.6 的网络空间，我想在我的项目中使用 ejb，所以请告诉我应该怎么做才能在我的网络空间中使用 ejb 3.1，它有这些资源下面列出

```
i) Tomcat - 5.5.xSupport
ii)JDK - 1.6.x Support
iii)JSP/servlet - 2.0 Support 
```

那么我如何将 EJB 与具有这些可用资源的 Web 应用程序一起使用我的意思是我应该如何处理这些事情

请帮我...！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:13:08.800

不可能，去下载 JBoss AS 或者 GlassFish。Tomcat 仅实现 Java EE 的 Web 容器部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T20:21:57.053

这绝对是可能的，在某些情况下，我更喜欢使用轻量级容器而不是更重的应用程序服务器。话虽如此，尽管您使用的 Tomcat 版本太旧，而且如果不严重弄乱容器（更改一些预装 Tomcat 的 JAR），无论如何都无法工作，即使这样我也不确定它是否会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T20:16:31.527

正如[Bozho](https://stackoverflow.com/questions/4304757/how-to-deploy-ejb-3-or-web-application-on-tomcat#4304872)所说，尝试[OpnEJB](http://openejb.apache.org/)，但如果可以的话，请选择 JBoss 或 Glassfish。Tomcat 是一个 JSP 容器，因此不适合这种用途。EJB 在应用程序服务器上运行。

# java - 使用spring重定向到https的一些服务

> ID：13519332
> 
> 赞同：1
> 
> 时间：2012-11-22T20:02:05.363
> 
> 标签：java, spring, jakarta-ee, spring-mvc, spring-security

我有一个使用spring（也是spring security）的应用程序，通过在applicationContext.xml中指定如下所示，很少有服务被保留在安全资源集之外：

```
<http pattern="/services/rest/nohisb/Msgs" security="none"/> 
```

现在这些服务只需要通过 https 访问。容器配置为具有 https。要求是当用户在 http 上访问上述服务时，他应该被重定向到 https（端口号也会改变，因为它不是默认的 443）。

是否有可能通过 spring 实现这一目标？

感谢
Nohsib

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:02:12.520

是的，可以使用[Spring Channel Processing](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/access/channel/ChannelProcessingFilter.html)和[PortMapper来实现](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/PortMapperImpl.html)

Spring Channel Processing 用于定义 http/https 访问 URL 模式。例如-

HTTPS 访问 URL-

```
https://localhost/myapp/user/myaccount 
```

Http：访问 URL-

```
http://localhost/myapp/home 
```

然后，如果用户以 http 模式访问安全 URL“ **http://localhost/myapp/user/myaccount** ”，spring 通道安全将用户重定向到安全 URL“ **https://localhost/myapp/user/myaccount** ”，反之亦然。

PortMapper Bean 用于映射非标准端口号，用于 HTTP 和 HTTPS 映射

**示例配置：**

***通道处理 Bean 定义和端口映射器-***

```
<bean id="channelProcessingFilter" class="org.springframework.security.web.access.channel.ChannelProcessingFilter">
  <property name="channelDecisionManager" ref="channelDecisionManager"/>
  <property name="securityMetadataSource">
        <security:filter-security-metadata-source path-type="ant">
            <security:intercept-url pattern="/services/rest/nohisb/Msgs**" access="REQUIRES_SECURE_CHANNEL" />
            <security:intercept-url pattern="/**/*.html**" access="REQUIRES_SECURE_CHANNEL" />

            <!-- more pattern definition -->

        </security:filter-security-metadata-source>
  </property>
</bean>

<bean id="channelDecisionManager" class="org.springframework.security.web.access.channel.ChannelDecisionManagerImpl">
  <property name="channelProcessors">
    <list>
        <ref bean="secureChannelProcessor"/>
        <ref bean="insecureChannelProcessor"/>
    </list>
  </property>
</bean>

<bean id="secureChannelProcessor" class="org.springframework.security.web.access.channel.SecureChannelProcessor">
    <property name="entryPoint" ref="secureEntryPoint"/>
</bean>

<bean id="insecureChannelProcessor" class="org.springframework.security.web.access.channel.InsecureChannelProcessor">
    <property name="entryPoint" ref="insecureEntryPoint"/>
</bean>

<bean id="secureEntryPoint" class="org.springframework.security.web.access.channel.RetryWithHttpsEntryPoint">
    <property name="portMapper" ref="portMapper"/>
</bean>

<bean id="insecureEntryPoint" class="org.springframework.security.web.access.channel.RetryWithHttpEntryPoint">
    <property name="portMapper" ref="portMapper"/>
</bean>

<bean id="portMapper" class="org.springframework.security.web.PortMapperImpl">
    <property name="portMappings">
        <map>
            <entry key="80" value="443"/>
            <entry key="8081" value="8443"/>
            <entry key="8443" value="8081"/>
            <!-- so on... -->
        </map>
    </property>
</bean> 
```

***过滤器映射-***

```
<security:http auto-config="false" 
            entry-point-ref="authenticationProcessingFilterEntryPoint" 
            access-decision-manager-ref="accessDecisionManager" >

    <security:custom-filter position="CHANNEL_FILTER" ref="channelProcessingFilter"/>

    <security:intercept-url pattern="/*.html*" access="ROLE_ANONYMOUS,admin,user"  />
    <security:intercept-url pattern="/*.jsp" access="ROLE_ANONYMOUS,admin,user" />

    <!-- more pattern definition -->

</security:http> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:10:38.243

[使用http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ns-config.html#ns-requires-](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ns-config.html#ns-requires-channel)中描述的 Spring Security 命名空间配置不是更简单吗？[通道](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ns-config.html#ns-requires-channel)来定义端口映射？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T20:08:50.977

您可以编写 Servlet 过滤器来检查请求方案和 URL，并在需要时发送重定向。但实际上这些东西不应该在 java 代码中完成，而应该在反向代理或平衡器中完成。通常 servlet 容器在代理 (nginx?) 或 apache (mod_proxy) 后面使用，这是配置 https/http 重定向等的地方。

# ruby-on-rails - Ruby on Rails ActiveModel::MassAssignmentSecurity::Error

> ID：13519335
> 
> 赞同：3
> 
> 时间：2012-11-22T20:02:15.803
> 
> 标签：ruby-on-rails, ruby, runtime-error

我正在尝试创建 line_items 但我收到此错误

app/controllers/line_items_controller.rb:52:in `create'

引用此行

```
Can't mass-assign protected attributes: product

@line_item = @cart.line_items.build(:product => product) 
```

完整的代码如下

```
class Product < ActiveRecord::Base

  attr_accessible :description, :image_url, :price, :title

   default_scope :order => 'title'

   has_many :line_items
   before_destroy :ensure_not_referenced_by_any_line_item
   #more code here...
   private

   # ensure that there are no line items referencing this product
   def ensure_not_referenced_by_any_line_item
     if line_items.empty?
       return true
     else
       errors.add(:base, 'Line Items present')
       return false
      end
   end

end

def create
   @cart = current_cart
   product = Product.find(params[:product_id])
   #the error is HERE!!
   @line_item = @cart.line_items.build(:product => product) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:04:06.557

您必须添加`attr_accessible :product`LineItem 类。

这是一种安全措施，它迫使您将可以批量分配的字段列入白名单，以避免像 github 这样的黑客攻击；）

# pydev - PyDev“新项目”使 Eclipse 崩溃

> ID：13519338
> 
> 赞同：2
> 
> 时间：2012-11-22T20:02:41.353
> 
> 标签：pydev

我是 Python 和 PyDev 新手。我的环境是 OS X 10.6.11、Eclipse Indigo、PyDev 2.7.1、Python 2.6 和 3.3。

从任何角度（PyDev、Java 等）开始，选择 New->Project->PyDev->PyDev Project 会导致一个无休止的旋转彩色沙滩球。唯一的出路是强制退出 Eclipse。

从 PyDev 角度出发，如果我选择 New->Project，然后选择 General->Project，也会发生同样的崩溃。

我唯一的办法似乎是从 Java 透视图创建一个通用项目，然后在包资源管理器视图中右键单击该项目并选择 PyDev->Set as PyDev Project，然后切换到 PyDev 透视图，然后配置项目文件夹手动。

我在安装中遗漏了什么吗？这是 PyDev 的一个已知问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-20T16:05:24.510

这里非常相似的问题。如果有任何跟进，请发表评论。
我使用的是 Kubuntu 15.04、Eclipse 3.8、Python 2.7 和 3.4，我假设是 PyDev 4.2 或 4.3。

我也是一个新手，正在尝试 django 框架。创建新的 PyDev-django 项目会使 Eclipse 崩溃。再次打开它时，我无法继续创建或导入它。

这是有关崩溃的一些信息，感谢您的帮助。

```
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007fc966da042d, pid=9132, tid=140503295805184
#
# JRE version: OpenJDK Runtime Environment (7.0_79-b14) (build 1.7.0_79-b14)
# Java VM: OpenJDK 64-Bit Server VM (24.79-b02 mixed mode linux-amd64 compressed oops)
# Derivative: IcedTea 2.5.6
# Distribution: Ubuntu 15.04, package 7u79-2.5.6-0ubuntu1.15.04.1
# Problematic frame:
# C  [libgobject-2.0.so.0+0x3342d]  g_type_check_instance_is_fundamentally_a+0xd
#
# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try "ulimit -c unlimited" before starting Java again 
```

# symfony - 从现有数据库创建实体

> ID：13519341
> 
> 赞同：3
> 
> 时间：2012-11-22T20:02:50.657
> 
> 标签：symfony, doctrine-orm, orm, doctrine

最新版本 Symfony2 并在 MAC 上使用 MAMP。以下命令：

```
php app/console doctrine:mapping:convert yml ./src/Acme/DemoBundle/Resources/config/doctrine/metadata/orm --from-database --force 
```

我的错误：

```
[Doctrine\DBAL\DBALException]                                                                    
  Unknown database type enum requested, Doctrine\DBAL\Platforms\MySqlPlatform may not support it. 
```

不要有任何想法。怎么了？

与我的数据库的连接正在工作。因为我试图创建一个表并且输出是该表存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T20:08:48.277

抱歉，我错过了，这是我的问题的解决方案。

[http://symfony.com/doc/current/cookbook/doctrine/dbal.html#registering-custom-mapping-types-in-the-schematool](http://symfony.com/doc/current/cookbook/doctrine/dbal.html#registering-custom-mapping-types-in-the-schematool)

# version-control - 如何通过评论检索 cvs 提交

> ID：13519342
> 
> 赞同：0
> 
> 时间：2012-11-22T20:03:05.337
> 
> 标签：version-control, commit, cvs, change-management

在我的开发团队中，我们使用需求管理来控制我们产品的预期行为和功能，并使用错误报告工具来跟踪“问题报告”（PR）。需求中的任何更改都由“更改提案”（CP）完成，其作用类似于代码存储库上的提交。

为了进行任何更改最终产品的提交，必须在 CVS 提交注释中提供一个**跟踪**，该跟踪可以是**CP**（这意味着您的代码上的更改反映了产品的更改）或**PR**（这意味着正在对代码进行更改以纠正问题）。CP 和 PR 被编号，以便可以将代码中的更改链接到导致项目（CP 或 PR）。

## 示例评论

### 纠错提交评论：

```
Kind: Error Correction

Trace: PR-015 Crashing upon startup

Description: Edited file foo.c in order to verify uninitialized variables. 
```

### 产品变更提交评论：

```
Kind: Development

Trace: CP-053 New login mechanism

Description: Added login mechanism with library X and blablabla. 
```

我的问题是我没有任何简单的方法来检索为特定 CP 或 PR 更改的所有文件，我也无法检索对代码所做的所有更改。

我曾尝试使用正则表达式（来自 python 的 RE）来解析日志，但覆盖所有可能的日志有点困难。即使经过多次调整，我的正则表达式也无法在这里和那里检索列表。

所以，我一直在考虑是否有任何更简单的方法或任何项目或产品，甚至 CVS 内置功能可以帮助我。

客观问题：如何在提交中检索可通过格式正确的标记（CP 或 PR）识别的修改文件列表？有没有更简单的方法或者我应该坚持日志解析？

### 环境细节：

操作系统：Windows XP CVS 服务器：cvsnt CVS 客户端：tortoise/cvsnt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:48:40.843

不想回答我自己的问题，但我认为这可能有助于将来有相同问题的人参考。

好吧，我设法在“日志消息”（提交评论的 cvs 术语）中执行搜索，按日志消息中的文本内容进行过滤，并将在该提交上更改的文件分组。

[正如 'Joakim Elofsson'在这里](https://stackoverflow.com/questions/1065919/list-all-the-files-checked-in-in-a-single-cvs-commit/1066052#1066052)指出的那样，cvsps 是一个很好的工具，用于将'patch sets' 中的提交信息分组，这些提交信息是单个提交，并引用了这些提交中更改的所有文件。

**我使用了为cygwin**打包的 cvsps 版本，因为此时没有适用于 windows 的端口。

[只需使用此处](http://cygwin.com/setup.exe)提供的 Internet 设置安装 cygwin，然后在选择软件包时搜索**cvsps**和**cvs**，同时安装两者。

我无法在我的系统上使用检出的文件（通过 /cygdrive/c 文件夹），所以我从 cygwin shell 中检出它们。

*乌龟用户的 BEGIN Obs*

您需要通过以下命令将 CVSROOT 环境变量设置为存储库的当前 CVSROOT：

```
export CVSROOT="Your CVSROOT string here" 
```

通常，如果检查已检出代码库的任何文件的属性页面，将会有一个名为**CVS**的选项卡。会有你的 CVSROOT 字符串。（如果您像我一样使用 :sspi: 连接到远程存储库，您可以尝试将其切换到 :pserver:，它确实对我有用，但我不知道具体原因）。

*Tortoise 用户的 END Obs*

好吧，在检查您的存储库使用命令后：

```
cvsps 
```

这将为您的请求创建 cvsps 补丁集库。然后使用：

```
cvsps -l "Some regexp code" 
```

它将搜索补丁集以查找与输入正则表达式匹配的日志消息。

这是在我的数据库上使用`cvsps -l`P100-PR-FEX` 的示例（更改了一些文件名和路径以便能够将其公开...）：

```
PatchSet 71
Date: 2012/10/25 11:30:44
Author: GUARITA
Branch: HEAD
Tag: (none)
Branches:
Log:
Kind: Error correction

Trace: P100-PR-FEX145

Description:
Corrections of the TRUE and FALSE conventions used by the C++ (true:everything but 0, false:0) P100 interface to the VB6 (false:0, true:-1 or 'all bits set to 1 which is -1 in 2's complement') P100Interface ActiveX object.
P100 Panel Version increment.

Members:
        SidePanels/P100.wimp:1.2->1.3
        SidePanels/Calcs/P100Interface/private/P100Interface.cpp:1.2->1.3 
```

您也可以使用它来比较标签（我用来控制发布）与`cvsps -r <tag1> -r <tag2>`.

# java - 无法从 JTextPane 获取文本

> ID：13519346
> 
> 赞同：0
> 
> 时间：2012-11-22T20:03:23.310
> 
> 标签：java, swing, gettext, jtextpane

所以我有一个`JTextPane`，并且我有一个方法返回一个`String`包含`JTextPane`. 几周以来，我一直在努力解决这个问题。该`getText()`方法返回一个空行。我尝试获取文档长度，但返回 0。

这是代码：

```
import java.awt.*;
import javax.swing.*;

public class CodeTabs extends JTabbedPane {
    private JTextPane codearea;
    private JScrollPane scroll;

    public CodeTabs() {
        setTabPlacement(JTabbedPane.BOTTOM);

        codearea = new JTextPane();

        scroll = new JScrollPane(codearea, ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED, ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        scroll.setPreferredSize(new Dimension(Toolkit.getDefaultToolkit().getScreenSize()));

        addTab("Code", scroll);
    }

    public String getCode() {
        String s = codearea.getText();

        System.out.println(s);

        return s;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:21:04.650

我拿走了你的代码并添加了一个主要方法和一个按钮来触发该`getCode()`方法。一切都按预期工作。当我在文本区域输入内容时，当我按下按钮时它会被打印出来。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class CodeTabs extends JTabbedPane {
  private JTextPane codearea;
  private JScrollPane scroll;

  public CodeTabs() {
    setTabPlacement(JTabbedPane.BOTTOM);

    codearea = new JTextPane();

    scroll = new JScrollPane(codearea, ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED, ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
    scroll.setPreferredSize(new Dimension(  300,300 ));

    JPanel panel = new JPanel( new BorderLayout() );
    panel.add( scroll, BorderLayout.CENTER );
    JButton comp = new JButton( "Print text" );
    comp.addActionListener( new ActionListener() {
      @Override
      public void actionPerformed( ActionEvent e ) {
        getCode();
      }
    } );
    panel.add( comp, BorderLayout.SOUTH );

    addTab( "Code", panel );
  }

  public String getCode() {
    String s = codearea.getText();

    System.out.println(s);

    return s;
  }

  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JFrame frame = new JFrame( "TestFrame" );
        frame.getContentPane().add( new CodeTabs() );
        frame.setDefaultCloseOperation( WindowConstants.EXIT_ON_CLOSE );
        frame.pack();
        frame.setVisible( true );
      }
    } );
  }
} 
```

注意：不需要扩展`JTabbedPane`. 使用它而不是扩展它（我将它留在此答案中发布的代码中以尽可能匹配您的代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:07:33.950

这样做： -

```
codearea.getDocument().getText(0, codearea.getDocument().getLength()); 
```

# c++ - 子集一个向量并对其进行排序

> ID：13519347
> 
> 赞同：10
> 
> 时间：2012-11-22T20:03:24.947
> 
> 标签：c++, r, rcpp

我正在考虑使用一些 C++ 来处理我的 R 包的简单部分`Rcpp`。我是 C++ 新手（但渴望学习！）。我已经使用优秀的实现了一些简单的 cpp 程序`Rcpp`- 事实上，这个包激励我学习 C++...

无论如何，我遇到了一个简单的问题，如果我能解决这个问题会很有帮助。我有一个`NumericVector`我想子集然后排序。下面的代码对整个向量进行排序（并且还将处理 NA，这是我需要的）。

我的问题是，假设我想提取该向量的一部分，对其进行排序并使其可用于其他处理 - 我该怎么做？例如，对于一个长度为 10 的向量，我如何提取和排序 5:10 的元素？

```
#include <Rcpp.h>
using namespace Rcpp;

// [[Rcpp::export]]
RcppExport SEXP rollP(SEXP x) {
  NumericVector A(x); // the data  
  A = sort_unique(A);  
  return A;
} 
```

我从 R 中调用：

```
sourceCpp( "rollP.cpp")
rollP(10:1)
# [1]  1  2  3  4  5  6  7  8  9 10 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T07:39:07.300

这里有 3 种变体：

```
include <Rcpp.h>
using namespace Rcpp;

// [[Rcpp::export]]
NumericVector rollP(NumericVector A, int start, int end) {
  NumericVector B(end-start+1) ;
  std::copy( A.begin() + start-1, A.begin() + end, B.begin() ) ;
  return B.sort() ;
}

// [[Rcpp::export]]
NumericVector rollP2(NumericVector A, int start, int end) {
  NumericVector B( A.begin() + start-1, A.begin() + end ) ;
  return B.sort() ;
}

// [[Rcpp::export]]
NumericVector rollP3(NumericVector A, int start, int end) {
  NumericVector B = A[seq(start-1, end-1)] ;
  return B.sort() ;
} 
```

`start`并且`end`表示基于 1 的索引，就好像您`A[start:end]`从`R`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T20:33:50.823

您需要研究 C++ 索引、迭代器和全部内容。至少，您需要更改您的界面（vector、fromInd、toInd）并找出您想要返回的内容。

对您的问题的一种解释是将子集复制`[fromInd, toInd)`到一个新向量中，对其进行排序并返回它。所有这些都是标准的 C++ 票价，以及像优秀的（而且免费的！！）[C++ 注释](http://www.icce.rug.nl/documents/cplusplus/)这样的好文本将会有所帮助。它也有一个非常强大的 STL 部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T20:23:39.307

您可以[`std::slice`](http://www.cplusplus.com/reference/std/valarray/slice/)在[`std::valarray`](http://www.cplusplus.com/reference/std/valarray/). 但是如果你想`std::vector`具体使用，那么你可以使用[`std::copy`](http://www.cplusplus.com/reference/algorithm/copy/)提取向量的一部分，然后使用[`std::sort`](http://www.cplusplus.com/reference/algorithm/sort/)对提取的向量切片进行排序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T08:00:39.443

[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)通过使用接收两个迭代器的实现，您可以很容易地做到这一点：

```
#include <vector>
#include <cinttypes>
#include <algorithm>

template <typename SeqContainer>
SeqContainer slicesort(SeqContainer const& sq, size_t begin, size_t end) {
  auto const b = std::begin(sq)+begin;
  auto const e = std::begin(sq)+end;
  if (b <= std::end(sq) && e <= std::end(sq)) {
    SeqContainer copy(b,e);
    std::sort(copy.begin(),copy.end());
    return copy;
  }
  return SeqContainer();
} 
```

可以像这样调用

```
 std::vector<int> v = {3,1,7,3,6,-2,-8,-7,-1,-4,2,3,9};
  std::vector<int> v2 = slicesort(v,5,10); 
```

# python - 将数据输入字典

> ID：13519350
> 
> 赞同：0
> 
> 时间：2012-11-22T20:03:46.570
> 
> 标签：python, python-3.x, dictionary, input

所以我有一个文本文件，例如：

```
RootObject: Sun

Object: Sun
Satellites: Mercury,Venus,Earth,Mars,Jupiter,Saturn,Uranus,Neptune,Ceres,Pluto,Haumea,Makemake,Eris
Radius: 20890260
Orbital Radius: 0

Object: Earth
Orbital Radius: 77098290
Period: 365.256363004
Radius: 6371000.0
Satellites: Moon

Object: Moon
Orbital Radius: 18128500
Radius: 1737000.10
Period: 27.321582 
```

我正在尝试将其输入字典。这是我到目前为止所拥有的，但我不断收到错误...

```
#d = dictionary
#new_d = new dictionary

file = open("data.txt","r")
d = {}
def data(file):
    for line in file:
        if line != line.strip:
            continue
        line = line.strip()
        key = line.split(":")
        val = line.split(":")
        if key in d and key == "Object":
            print(d)
        d[key] = val
    print(d)

new_d = {}
with file as x:
    for d in data(x):
        new_d[d["Object"]] = d
print(nd) 
```

我应该得到这样的东西：

```
{' Earth': {'Satellites': ' Moon', 'Orbital Radius': ' 77098290', 'Object': ' Earth', 'Radius': ' 6371000.0', 'Period': ' 365.256363004'}, ' Moon': {'Orbital Radius': ' 18128500', 'Object': ' Moon', 'Radius': ' 1737000.10', 'Period': ' 27.321582'}, ' Sun': {'Satellites': ' Mercury,Venus,Earth,Mars,Jupiter,Saturn,Uranus,Neptune,Ceres,Pluto,Haumea,Makemake,Eris', 'Orbital Radius': ' 0', 'Object': ' Sun', 'Radius': ' 20890260', 'RootObject': ' Sun'}} 
```

我收到此错误：

```
Traceback (most recent call last):
  File "planet2.py", line 21, in <module>
    for d in data(x):
TypeError: 'NoneType' object is not iterable 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:57:59.500

这会做得很好：

```
file = open("data.txt","r")

def data(file):
    dic = {}
    for line in file:
        # If line not blank
        if line.strip() != '':
            key,value = line.split(":")
            if key == 'RootObject':
                dic[key] = value.strip()
            elif key == 'Object':
                # Get the Object value i.e Earth, Moon, Sun                
                obj = value.strip()
                # Create entry with obj key and blank dictionary value
                dic[obj]={}
            else:
                # Populate the blank dictionary with key, value pairs
                dic[obj][key] = value.strip()
    return dic

planets = data(file)

# Usage
print planets
print planets['Earth']
print planets['Earth']['Radius'] 
```

输出：

```
# The whole dictionary 
{'Sun': {'Satellites': 'Mercury,Venus,Earth,Mars,Jupiter,Saturn,Uranus,Neptune,Ceres,Pluto,Haumea,Makemake,Eris', 'Orbital Radius': '0', 'Radius': '20890260'}, 'Moon': {'Orbital Radius': '18128500', 'Radius': '1737000.10', 'Period': '27.321582'}, 'Earth': {'Satellites': 'Moon', 'Orbital Radius': '77098290', 'Radius': '6371000.0', 'Period': '365.256363004'}}

# The Earth dictionary
{'Satellites': 'Moon', 'Orbital Radius': '77098290', 'Radius': '6371000.0', 'Period': '365.256363004'}

# The Earth's radius
6371000.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:06:22.470

您的代码中有几个不同的错误。导致您的异常的原因是您的函数`data`写入全局变量并且不返回任何内容，但是您以后的代码期望它返回可迭代的内容，例如序列或生成器。

您可以通过使顶级代码直接在全局字典上迭代来解决此问题，或者您可以摆脱全局并在其中创建字典`data`并在最后返回它。我建议后者，因为随着代码变得越来越复杂，全局变量很难处理。

这是它应该如何工作的粗略轮廓（我将中间部分粗略地留下，因为我稍后会讨论它）：

```
def data(file):
    objects = {}

    # add stuff to objects dict

    return objects 
```

你的下一个错误是剥离你的线条。您的代码当前使用自己的`strip`方法测试每一行的不等式。这是 Python 3 中的一个错误，因为`line`和`line.strip`具有无与伦比的类型。但即使有效，也毫无意义。我怀疑你试图消除空行，首先剥离它们，然后拒绝任何空行。您可以这样做：

```
if not line.strip():
    continue 
```

这是 Python 社区中的一些人所说的“先看再跳”（LBYL）编程风格的一个例子，因为您正在检查可能是问题的东西。另一种选择是“请求宽恕比许可更容易”（EAFP）样式，您只需将可能出现问题的区域包装在一个`try`块中并捕获生成的异常。EAFP 风格有时被认为更“Pythonic”，所以稍后我会展示这种风格。

下一个错误是一个逻辑错误，而不是会导致错误的东西。您正在拆分您的行，并且您希望将它的两部分放入变量`key`和`value`. 但是，您对这些变量进行了两次单独的赋值，实际上它们最终得到了相同的值。这是一个你可以使用 Python 语法的一个很酷的特性，解包的地方。您可以将双值序列（例如列表或元组）一起分配给它们，而不是单独分配每个变量。Python 将负责将第一个值赋予第一个变量，将第二个值赋予第二个变量。这是它的样子：

```
key, value = line.split(":") 
```

当然，如果行中没有冒号，这将失败，因此`try`如果我们使用 EAFP 风格的编码，这是我们放置块的好地方。这是一种方法：

```
try:
    key, value = line.split(":")
except ValueError:
    continue 
```

您可以将`try`块放在循环中剩余的所有内容周围，然后让`except`块只包含`pass`（什么都不做，但忽略异常）。

最后，最后一个逻辑错误与构建嵌套字典的方式有关。您当前的方法是首先使用文件中的所有键和值构建一个字典，然后将它们分成单独的部分，每个天体一个。但是，如果每个对象的键相同，这将不起作用。例如，由于每个对象都有一个“Orbital Radius”键，因此它们都将相互覆盖，将该键放入单个字典中。

@sudo_o 的答案显示了如何构建内部字典并用值填充它（它几乎与我要写的相同）。我只是想发表我其余的解释！

# cassandra - playorm 仅连接到 localhost

> ID：13519352
> 
> 赞同：1
> 
> 时间：2012-11-22T20:04:13.547
> 
> 标签：cassandra, playorm, astyanax

如果我尝试

```
cassandra-cli -h myhost.compute-1.amazonaws.com 
```

我连接到它没有问题。通过使用 astyanax，它也可以工作。

但是，在 playOrm 中，如果我将主机字符串设置为`myhost.compute-1.amazonaws.com:9160`，它会抱怨我需要在主机列表中使用逗号分隔的字符串。如果我使用`myhost.compute-1.amazonaws.com:9160,`or `myhost.compute-1.amazonaws.com:9160,myhost.compute-1.amazonaws.com:9160`，我会得到以下异常。

我应该如何设置连接字符串以连接到远程主机？

```
java.lang.RuntimeException: com.netflix.astyanax.connectionpool.exceptions.TokenRangeOfflineException: TokenRangeOfflineException: [host=myhost.compute-1.amazonaws.com(...):9160, latency=336(336), attempts=1] UnavailableException()
    at com.alvazan.orm.layer9z.spi.db.cassandra.CursorKeysToRows.execute(CursorKeysToRows.java:157)
    at com.alvazan.orm.layer9z.spi.db.cassandra.CursorKeysToRows.loadCache(CursorKeysToRows.java:100)
    at com.alvazan.orm.layer9z.spi.db.cassandra.CursorKeysToRows.nextImpl(CursorKeysToRows.java:65)
    at com.alvazan.orm.layer0.base.CursorRow.nextImpl(CursorRow.java:33)
    at com.alvazan.orm.api.z8spi.iter.AbstractCursor.next(AbstractCursor.java:10)
    at com.alvazan.orm.layer0.base.BaseEntityManagerImpl.find(BaseEntityManagerImpl.java:132)
    at com.alvazan.orm.layer0.base.BaseEntityManagerImpl.saveMetaData(BaseEntityManagerImpl.java:235)
    at com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl.rescan(BaseEntityManagerFactoryImpl.java:102)
    at com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl.setup(BaseEntityManagerFactoryImpl.java:131)
    at com.alvazan.orm.impl.bindings.BootstrapImpl.createInstanceImpl(BootstrapImpl.java:64)
    at com.alvazan.orm.impl.bindings.BootstrapImpl.createInstance(BootstrapImpl.java:35)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:57)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:52)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:45)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:24)
    at com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.init(PlayOrmConfiguration.java:39)
    at com.s1mbi0se.dmp.da.dao.TestUserDao.testFindAllUsers(TestUserDao.java:73)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: com.netflix.astyanax.connectionpool.exceptions.TokenRangeOfflineException: TokenRangeOfflineException: [host=myhost.compute-1.amazonaws.com(....):9160, latency=336(336), attempts=1] UnavailableException()
    at com.netflix.astyanax.thrift.ThriftConverter.ToConnectionPoolException(ThriftConverter.java:165)
    at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:60)
    at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:27)
    at com.netflix.astyanax.thrift.ThriftSyncConnectionFactoryImpl$1.execute(ThriftSyncConnectionFactoryImpl.java:131)
    at com.netflix.astyanax.connectionpool.impl.AbstractExecuteWithFailoverImpl.tryOperation(AbstractExecuteWithFailoverImpl.java:52)
    at com.netflix.astyanax.connectionpool.impl.AbstractHostPartitionConnectionPool.executeWithFailover(AbstractHostPartitionConnectionPool.java:229)
    at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4.execute(ThriftColumnFamilyQueryImpl.java:457)
    at com.alvazan.orm.layer9z.spi.db.cassandra.CursorKeysToRows.execute(CursorKeysToRows.java:155)
    ... 39 more
Caused by: UnavailableException()
    at org.apache.cassandra.thrift.Cassandra$multiget_slice_result.read(Cassandra.java:9722)
    at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)
    at org.apache.cassandra.thrift.Cassandra$Client.recv_multiget_slice(Cassandra.java:613)
    at org.apache.cassandra.thrift.Cassandra$Client.multiget_slice(Cassandra.java:597)
    at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4$1.internalExecute(ThriftColumnFamilyQueryImpl.java:463)
    at com.netflix.astyanax.thrift.ThriftColumnFamilyQueryImpl$4$1.internalExecute(ThriftColumnFamilyQueryImpl.java:460)
    at com.netflix.astyanax.thrift.AbstractOperationImpl.execute(AbstractOperationImpl.java:55)
    ... 45 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:13:56.543

该代码期望一个真正的集群运行 2 个或更多节点而不是单个节点。（对不起，感恩节假期）。您是否只需要连接到单个节点？

此外，我们在那里进行检测的原因是，如果您只有一个节点，我们会执行 CL_ONE，但我们可能错误地假设人们只会使用一个节点来玩 cassandra（即 localhost）。我们认为他们实际上不会只使用一个节点。你需要修改吗？如果是这样，请告诉我们，我们可以改变它。

谢谢，院长

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:03:28.703

这在 Maven 存储库中可用的 1.4.2 版中已修复。如果您仍然遇到任何问题，请尝试让我们知道。

# openssl - openssl：验证不解密？

> ID：13519353
> 
> 赞同：1
> 
> 时间：2012-11-22T20:04:17.097
> 
> 标签：openssl

给定一个openssl加密和签名的消息，有没有办法在不解密消息的情况下验证签名？可以从加密内容中提取签名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T14:37:35.780

如果消息被加密然后签名，您可以在不解密消息的情况下验证签名。签名必须是消息的一部分，否则，将没有签名的意义。

对于 PKCS #7 等格式，您可以提取签名。

# c# - 使用 ASP.NET C# 读取基本身份验证背后的分块 HTTP JSON 响应

> ID：13519354
> 
> 赞同：1
> 
> 时间：2012-11-22T20:04:18.333
> 
> 标签：c#, asp.net, http, http-authentication, chunked-encoding

有大量可用的 ASP.net 命名空间、类和方法，我想知道是否有人可以提供任何帮助来缩小我应该特别注意的范围，以便：

*在通过基本 HTTP 身份验证连接后，读取包含 JSON 数据的分块 HTTP 流，所有这些都在 ASP.NET (v4.5) C# 中。*

到目前为止，我一直关注的一些课程，尽管运气不佳，是：

*   HttpClient
*   内容
*   HttpRequestMessage
*   HttpWebRequest
*   HttpWebResponse
*   流阅读器
*   凭据缓存
*   网络凭证

我有一种感觉，我很亲密，但无法将所有事情联系在一起。

任何人都可以提供任何帮助，甚至是一个简单的例子吗？

# php - 将数据发送到新窗口并在那里使用

> ID：13519356
> 
> 赞同：-1
> 
> 时间：2012-11-22T20:04:31.393
> 
> 标签：php, html, post

> **可能重复：**
> [Jquery 帖子，新窗口中的响应](https://stackoverflow.com/questions/3825078/jquery-post-response-in-new-window)

我在名为 results.php 的页面中有一个表格 html，它看起来像 GenID ENSMUSG00000098791 ENSMUSG00000023441 ENSMUSG00000047431

results.php 有这个功能

```
<script>

function contenidoCelda() 
  {
  var table= $('#tabla_results');
  cells = $('td');
 for (var i=0,len=cells.length; i<len; i++)
   {
    cells[i].onclick = function()
      {
      var formData2 = new FormData(document.getElementById("formulario"));
      formData2.append("gen_id",(this.innerHTML));
      $.ajax({
          type: "POST",
      url: "test.php",
      data: formData2,
      cache: false,
      processData: false, 
      contentType: false, 
      success: function(data)
      {
        alert(data);       
            window.open('test.php', '_blank');

      }
    });

       }
     }
   }

</script> 
```

我想使用我在 test.php 文件中发送的数据，而不是将其返回给 results.php，在 test.php 中使用，以动态生成内容。

这是 test.php

```
<?php
$data = $_POST['gen_id'];
system("mkdir $data");
echo "Hola";
echo $data;
echo '<xmp>';var_dump($data);echo '</xmp>';
?>

<html>
  <link href="css/ui-lightness/jquery-ui-1.9.1.custom.css" rel="stylesheet">
  <script src="js/jquery-1.8.2.js"></script>
  <script src="js/jquery-ui-1.9.1.custom.js"></script>
<body>
<form>

<p id = "testing"> Test page </p>

<?php if($data == "ENSMUSG00000047751") {echo "Good";} else {echo "Bad";}   ?>

</form>
</body> 
```

所以在test.php中，它必须显示Good，如果我点击表格中的那个genid但它显示Bad，并返回Good给results.php

我创建目录的测试，我点击的 genid 工作正常

我应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:30:53.177

在您的 $.ajax 调用中，尝试设置：

```
$.ajax({
  type: "POST",
  url: "test.php",
  data: "testing123",
  cache: false,
  processData: false, 
  contentType: false, 
}); 
```

并查看是否创建了 dir test123 并回显。

如果不是，那么问题出在这两行，特别是您对 var formData2 的定义：

```
var formData2 = new FormData($('#formulario')[0]);
formData2.append("gen_id",(this.innerHTML)); 
```

检查输入错误，例如逗号代替分号：

```
var table = document.getElementById('tabla_results'),  <-- THIS IS A COMMA. TYPO?
cells = table.getElementsByTagName('td'); 
```

此外，您还混合了 jQuery 和 javascript。为什么不对 jQuery 进行标准化？例如，上面的两行代码在 jQuery 中会这样写：

```
var table = $('#tabla_results');
cells = $('td'); 
```

少打字，是吗？

另外，我确定你有，但你确定你已经包含了一个指向 jQuery 库的链接吗？如：

```
<script src="http://code.jquery.com/jquery-1.8.2.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:32:25.887

我认为问题在于您定义的方式`formData2`：

```
var formData2 = new FormData($('#formulario')[0]); 
```

导致`formData2`实际上不是 FormData。

尝试将其切换为：

```
var formData2 = new FormData(document.getElementById("formulario")); 
```

这应该可以解决数据问题。

**编辑：**关于你的问题的编辑，如果你想将结果发布到另一个页面，真的不需要使用 ajax。只需在表单提交上使用 javascript 添加带有 ID 的附加字段（如果您不能像隐藏字段一样添加它......）并使用普通表单提交。

# sql-server - 查询比存储过程慢很多？

> ID：13519369
> 
> 赞同：1
> 
> 时间：2012-11-22T20:05:50.240
> 
> 标签：sql-server, sql-server-2008, stored-procedures, view

我创建了一个查询，它在前 100 名中执行大约 2 秒。如果我创建这个精确查询的存储过程，它需要 12-13 秒才能运行。

为什么会这样？

*   元素表计数 = 2309015（指定用户 ID = 326969）
*   匹配表计数 = 1290（指定用户 ID = 498）
*   站点表计数 = 71（指定用户 ID = 9）

代码

```
 with search (elementid, siteid, title, description, site, link, addeddate)
 as
 (
     select top(@top) 
         elementid,
         elements.siteid, title, elements.description,
         site =
             case sites.description
                 when '' then sites.name
                 when null then sites.name
                 else sites.name + ' (' + sites.description + ')'
             end, 
        elements.link,
        elements.addeddate 
    from elements
        left join sites on elements.siteid = sites.siteid
    where title like @search and sites.userid = @userid
    order by addeddate desc
)
select search.*, isnull(matches.elementid,0) as ismatch 
from search
    left join matches on matches.elementid = search.elementid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:26:50.013

当您创建 SP 时，它会被编译和存储，当 SP 有参数时，您可以通过这些参数过滤结果，优化器不知道您将在执行时传递哪个值，然后他将其视为 33% 的选择并由此创建计划。当您执行查询时，会提供这些值，优化器会根据这些值创建执行计划。我敢肯定，计划是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:27:58.437

[这里](https://stackoverflow.com/questions/440944/sql-server-query-fast-but-slow-from-procedure)有一个类似的问题

问题是存储过程声明`SET ANSI_NULLS OFF`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T20:08:06.123

没有代码，我只能猜测。编写示例查询时，首先有一个常量 where 子句，其次是一个缓存。存储过程没有机会根据 where 子句中的常量缓存或优化查询计划。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T20:23:48.463

我可以建议两种尝​​试的方法

第一个，这样写​​你的sp：

```
create procedure sp_search
(
    @top int,
    @search nvarchar(max),
    @userid int
)
as
begin
    declare @p_top int, @p_search nvarchar(max), @p_userid int

    select @p_top = @top, @p_search = @search, @p_userid = @userid

    with search (elementid, siteid, title, description, site, link, addeddate)
    as
    (
        select top(@p_top) 
            elementid,
            elements.siteid, title, elements.description,
            site =
             case sites.description
                 when '' then sites.name
                 when null then sites.name
                 else sites.name + ' (' + sites.description + ')'
             end, 
            elements.link,
            elements.addeddate 
        from elements
            left join sites on elements.siteid = sites.siteid
        where title like @p_search and sites.userid = @p_userid
        order by addeddate desc
    )
    select search.*, isnull(matches.elementid,0) as ismatch 
    from search
        left join matches on matches.elementid = search.elementid
end 
```

二、使用内联表函数

```
create function sf_search
(
    @top int,
    @search nvarchar(max),
    @userid int
)
returns table
as
return
(
    with search (elementid, siteid, title, description, site, link, addeddate)
    as
    (
        select top(@top) 
            elementid,
            elements.siteid, title, elements.description,
            site =
             case sites.description
                 when '' then sites.name
                 when null then sites.name
                 else sites.name + ' (' + sites.description + ')'
             end, 
            elements.link,
            elements.addeddate 
        from elements
            left join sites on elements.siteid = sites.siteid
        where title like @search and sites.userid = @userid
        order by addeddate desc
    )
    select search.*, isnull(matches.elementid,0) as ismatch 
    from search
        left join matches on matches.elementid = search.elementid
) 
```

# actionscript-3 - 为什么我会为已实现的 IEventDispatcher 接口获得“未定义的方法”？

> ID：13519372
> 
> 赞同：4
> 
> 时间：2012-11-22T20:06:02.190
> 
> 标签：actionscript-3, events

我有一个奇怪的情况，我看不到为什么我实现的 IEventDispatcher 接口没有编译，我得到`Error: Call to a possibly undefined method addEventListener`了`Error: Call to a possibly undefined method removeEventListener.`

很有可能我在这里做了一些非常愚蠢的事情，我只是不知道它是什么......

以下是引发这些错误的类中的方法（意味着在 setTransformListner 和“removeTransformListener”的主体中处理“视图”的方法：

```
public function setTransformListener(view:AbstractView):void
{
    view.addEventListener(CustomEvent.TRANSFORM, transform);
}

public function removeTransformListener(view:AbstractView):void
{
    view.removeEventListener(CustomEvent.TRANSFORM, transform);
}

private function transform(e:CustomEvent):void
{

} 
```

这是事件调度程序类...

```
package view 
{
    import flash.events.Event;
    import flash.events.EventDispatcher;
    import flash.events.IEventDispatcher;

    public class AbstractView implements IEventDispatcher
    {

        private var _dispatcher:EventDispatcher;

        public function AbstractView():void
        {
            _dispatcher = new EventDispatcher(this);
        }

        /* INTERFACE flash.events.IEventDispatcher */

        public function addEventListener(type:String, listener:Function, useCapture:Boolean = false, priority:int = 0, useWeakReference:Boolean = false):void
        {
            _dispatcher.addEventListener(type, listener, useCapture, priority, useWeakReference);
        }

        public function dispatchEvent(evt:Event):Boolean
        {
            return _dispatcher.dispatchEvent(evt);
        }

        public function hasEventListener(type:String):Boolean
        {
            return _dispatcher.hasEventListener(type);
        }

        public function removeEventListener(type:String, listener:Function, useCapture:Boolean = false):void
        {
            _dispatcher.removeEventListener(type, listener, useCapture);
        }

        public function willTrigger(type:String):Boolean 
        {
            return _dispatcher.willTrigger(type);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T21:32:31.833

疯狂猜测，您的包名是`view`并且您正在尝试调用`view.addEventListener`，尝试更改包名。虽然`view`应该首先使用本地 var。

# postgresql - 对表列使用数组类型真的合适的任何情况？

> ID：13519376
> 
> 赞同：3
> 
> 时间：2012-11-22T20:06:29.700
> 
> 标签：postgresql

在网上阅读，关于 PostgreSQL 数组作为表列的类型，我发现开发人员的普遍反应或意见是：“不要使用数组，最好使用另一个表，因为这样可以更好地扩展”。

...我明白，这就是我基本上一直在做的事情。

而且我从未发现开发人员可以同意数组是最合适的任何情况。在任何情况下使用数组真的值得吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:22:36.980

您可以在其内部表（即`pg_class` `pg_constraint`）中找到 Postgresql 数组的示例。

如果满足以下条件，数组将是合适的：

1.  您的数据库驱动程序/连接/应用程序正确管理它们（并非所有这些都如此）。

2.  您不需要过滤/查询数组中的数据（您需要数组中的所有数据，或者根本不需要它）。

所以，完美的例子 - `pg_constraint.conkey`：

1.  Postgres 可以正确处理它的数组:)

2.  它需要所有列来检查它们（或者如果没有应用检查则根本不需要它们）

UPD：在所有“适当”使用数组的情况下，我能想到，它们总是小的 0-10 元素数组。

# javascript - Umbraco 中的外部 JavaScript 文件在 Internet Explorer 中不起作用

> ID：13519379
> 
> 赞同：0
> 
> 时间：2012-11-22T20:06:51.140
> 
> 标签：javascript, file, reference, external, umbraco

我制作了一个 Umbraco 4.9 应用程序，它在除 Internet Explorer 之外的所有浏览器中都能正常工作。外部 JavaScript 文件无法在 IE 中运行或加载。头部部分的参考资料在这里：

```
<head>
      <title><umbraco:Item field="seo_titel" recursive="true" runat="server" /></title>
      <meta name="description" content="<umbraco:Item field="seo_beskrivelse" recursive="true" runat="server" />" />
      <meta name="keywords" content="<umbraco:Item field="seo_keywords" runat="server" />" />

      <link href="/css/fonts.css" rel="stylesheet" type="text/css" />
      <link href="/css/top_menu.css" rel="stylesheet" type="text/css" />
      <link href="/css/main.css" rel="stylesheet" type="text/css" />
      <link href="/css/generelt.css" rel="stylesheet" type="text/css" />

      <script type="text/javascript" src="//use.typekit.net/pnd4dbj.js"></script>
      <script type="text/javascript">try{Typekit.load();}catch(e){}</script>

      <script src="/js/jquery.min.js" type="text/javascript"></script>          
      <script src="/scripts/basic.js" type="text/javascript"></script>
      <script src="/scripts/menu.js" type="text/javascript"></script>
      <script src="/scripts/screen_size_main.js" type="text/javascript"></script>

      <asp:ContentPlaceHolder Id="ContentPlaceholderHead" runat="server">
      </asp:ContentPlaceHolder>
  </head> 
```

我试图在本地和从网络服务器运行应用程序，但它仍然无法在 IE 中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:39:18.237

只是一个想法：如果您在使用 typeKit 时遇到问题，您是否将套件设置中的域添加到您正在使用的套件编辑器中？

# perl - 为什么我的 Perl 脚本在通过 SSH 执行时会挂起？

> ID：13519380
> 
> 赞同：3
> 
> 时间：2012-11-22T20:07:03.497
> 
> 标签：perl, ssh, fork, nagios

我开发了一个小型 Nagios 监控脚本，它基本上在给定接口和端口上运行 tcpdump，并在前 10 个捕获的数据包中查找特定字符串。我正在监视一个系统，该系统可能会挂起并用特定消息淹没我的服务器。

我不是专业的 Perl 程序员，但我相信我已经尽我所能满足了所有期望。

在本地运行此脚本就可以了，并将控制台返回给我。但是，当我尝试通过我的 Nagios 服务器运行它时，通过 ssh (ssh user@host -i private_key '/path/script.pl')，脚本成功执行，我收到退出消息，但是，ssh 没有出口。我必须按 Ctrl+C 或按几个回车键才能将 bash 回复给我。使用 check_by_ssh 运行它会导致插件超时错误，原因很明显。

我很确定它与我正在使用的 fork() 有关，但我不知道它有什么问题。

```
#!/usr/bin/perl -w
use strict;
use warnings;
use Getopt::Long;

my $RC_OK = 0;
my $RC_WARNING = 1;
my $RC_CRITICAL = 2;
my $RC_UNKNOWN = 3;

my $GREP_RC = undef;

my $PORT = undef;
my $INT = undef;
my $STRING = undef;

my $PID = undef;

# Handler principal de alarme de timeout
$SIG{ALRM} = sub {
    print "UNKNOWN: Main script timed out!\n";
    exit $RC_UNKNOWN;
};

# Inicio contagem global
alarm(8);

# Coleta parametros
GetOptions ("port=s" => \$PORT,
            "interface=s" => \$INT,
            "string=s" => \$STRING);

# Sanity check de parametros
if((not defined $PORT) || (not defined $STRING)) {
    print "Usage: ./check_stratus.pl -p=PORT -i=INTERFACE -s=STRING\n";
    exit $RC_UNKNOWN;
}

# Capturando pelo tcpdump
defined($PID = fork()) or die "Problema ao criar o fork: $!\n";
if ($PID == 0) {

    # Handler secundario de alarme de timeout
    $SIG{ALRM} = sub {
        exit 1;
    };

    # Captura no maximo por 5 segundos, ou 10 pacotes
    alarm(5);

    `sudo /usr/sbin/tcpdump -nX -s 2048 -c 10 -i $INT port $PORT > /tmp/capture.txt 2>&1`;

    # Checando se o tcpdump rodou com sucesso
    if ($? != 0) {
        print "Erro ao executar \"/usr/sbin/tcpdump -nX -s 2048 -c 1 -i $INT port $PORT > /tmp/capture.txt\", verifique o arquivo de saida para mais detalhes.\n";
        exit $RC_UNKNOWN;
    }
    exit $RC_OK;
}

# Espera o filho encerar...
waitpid($PID, 0);

# Verificando se o arquivo capturado esta ok
`/bin/ls /tmp/capture.txt`;

if ($? != 0) {
    print "Erro ao encontrar o arquivo /tmp/capture.txt\n";
    exit $RC_UNKNOWN;
}

# Executando grep da string em cima da captura
`/bin/grep $STRING /tmp/capture.txt`;

# Verificando resultado do grep
if ($? == 0) {
    print "Foi encontrada a string \"$STRING\" na captura do tcpdump escutando na interface $INT e na porta $PORT!\n";
    exit $RC_CRITICAL;
}

if ($? == 256) {
    print "Nao foi encontrada a string \"$STRING\" na captura do tcpdump escutando na interface $INT e na porta $PORT.\n";
    exit $RC_OK;
} else {
    print "Erro desconhecido! Codigo do grep foi $?\n";
    exit $RC_UNKNOWN;
} 
```

任何帮助都深表感谢。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:02:23.073

看这里：

```
#!/usr/bin/perl
use strict;
my $PID;
defined($PID = fork()) or die "no fork works";
if ($PID == 0) {

    # Handler secundario de alarme de timeout
    $SIG{ALRM} = sub {
        exit 1;
    };

    # Captura no maximo por 5 segundos, ou 10 pacotes
    alarm(1);
    `sleep 100`;
}
waitpid($PID, 0); 
```

* * *

```
/tmp$ ps xawww |grep sleep
 1705 pts/2    S+     0:00 grep sleep
host:/tmp$ time /tmp/test.pl

real    0m1.008s
user    0m0.000s
sys     0m0.004s
host:/tmp$ ps xawww |grep sleep
 1708 pts/2    S      0:00 sleep 100
 1710 pts/2    S+     0:00 grep sleep 
```

出现问题是因为您的系统派生了一个新进程并且该进程没有从父进程获得信号。

解决方案只是使用而`exec()`不是````或不分叉新进程：`system()``exec()`

```
 alarm(1);
    exec("sleep 100"); 
```

# lisp - CLISP 中的 Lambda 演算和实现

> ID：13519382
> 
> 赞同：1
> 
> 时间：2012-11-22T20:07:21.813
> 
> 标签：lisp, lambda-calculus

我对函数式编程、lisp 和 lambda 演算非常陌生。我试图用 Common Lisp Lambda Calc 风格实现 AND 运算符。

来自维基百科：

> AND := λp.λq.pqp

到目前为止，这是我的代码：

```
(defvar TRUE #'(lambda(x)#'(lambda(y)x)))
(defvar FALSE #'(lambda(x)#'(lambda(y)y)))

(defun OPAND (p q)
    #'(lambda(f) 
        #'(lambda(p) #'(lambda(q) (funcall p (funcall q(funcall p))))))
) 
```

我发现了这两个转换函数：

```
(defun church2int(numchurch)
    (funcall (funcall numchurch #'(lambda (x) (+ x 1))) 0)
)

(defun int2church(n)
    (cond
        ((= n 0) #'(lambda(f) #'(lambda(x)x)))
        (t #'(lambda(f) #'(lambda(x) (funcall f
            (funcall(funcall(int2church (- n 1))f)x))))))

) 
```

如果我做：

```
(church2int FALSE) 
```

我有 0。如果我这样做：

```
(church2int TRUE) 
```

我有

```
#<FUNCTION :LAMBDA (X) (+ X 1)> 
```

我认为没关系。但如果我这样做：

```
 (church2int (OPAND FALSE FALSE)) 
```

我有：

```
#<FUNCTION :LAMBDA (Q) (FUNCALL P (FUNCALL Q (FUNCALL P)))> 
```

我应该在哪里有 0。我的代码有问题吗？还是我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T00:41:07.720

如果您想定义`opand`为具有 2 个参数的函数，就像您尝试的那样，您需要这样做：

```
(defun OPAND (p q)
    (funcall (funcall p q) p) ) 
```

进而：

```
(opand false false)
#<FUNCTION :LAMBDA (X) #'(LAMBDA (Y) Y)> ;; which is FALSE

(opand true true)
#<FUNCTION :LAMBDA (X) #'(LAMBDA (Y) X)> ;; which is TRUE 
```

这是我的实现，基于运营商的原始论文[http://www.utdallas.edu/~gupta/courses/apl/lambda.pdf](http://www.utdallas.edu/~gupta/courses/apl/lambda.pdf)`and``λxy.xyF`

```
(defvar OPAND 
    #'(lambda(x) 
        #'(lambda(y) 
            (funcall (funcall x y) FALSE) ) ) ) 
```

如果你这样做

```
(funcall (funcall opand false) false)
#<FUNCTION :LAMBDA (X) #'(LAMBDA (Y) Y)> ;; which is FALSE

(funcall (funcall opand true) true)
#<FUNCTION :LAMBDA (X) #'(LAMBDA (Y) X)> ;; which is TRUE 
```

# html - 谷歌网页字体未在 IE8 中呈现

> ID：13519394
> 
> 赞同：2
> 
> 时间：2012-11-22T20:08:35.203
> 
> 标签：html, internet-explorer-8, webfonts, google-font-api

我看过这个：[Google Web Fonts don't work in IE8](https://stackoverflow.com/questions/9050747/google-web-fonts-dont-work-in-ie8)和这个：[How to make Google Fonts work in IE?](https://stackoverflow.com/questions/3694060/how-to-make-google-fonts-work-in-ie) . 都不适合我。第一个建议不要一次导入太多字体，而后者自 2010 年修复该错误以来已过时。

HTML如下：

```
<!DOCTYPE html>
<html lang="en">
        <head>
                <meta charset="utf-8">
                <title>Font Test</title>
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <meta name="description" content="Google Fonts Test">

                <link type='text/css' href='https://fonts.googleapis.com/css?family=Cantarell' rel='stylesheet'>
                <link type='text/css' href='https://fonts.googleapis.com/css?family=Play:700' rel='stylesheet'>
                <link type='text/css' href='https://fonts.googleapis.com/css?family=Muli:300' rel='stylesheet'>
                <!--<link type='text/css' href='//fonts.googleapis.com/css?family=Lato:900' rel='stylesheet'>-->

                <link type="text/css" href="https://static.mysite.com/blah/font-test.css" rel="stylesheet">
        </head>
        <body>
                <div class="page-title">
                        This Is Title
                </div>
                <div class="page-content">
                        This is content
                </div>
        </body>
</html> 
```

这是相应的 CSS：

```
body {
        height: 100%;
        width: 960px;
        min-height: 550px;
        max-height: 1080px;
        margin: 20px 60px 40px 20px;
        padding-left: 10px;
        padding-right: 10px;

        background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAKklEQVQIW2OceOe1cb6K6FkGJAASYwTxkSVhbLAETBJEw3Tjl8BqFC7LAdSSJR3onNbEAAAAAElFTkSuQmCC) repeat;
}

.page-title {
        height: 55px;
        font: 38px "Play";
}

.page-content {
        font: 16px "Cantarell";
        width: 630px;
        text-align: justify;
} 
```

以上内容在最新的 Chrome 中进行了测试，效果很好。然而，由于某种原因，它在 IE8 中不起作用。有什么我想念的吗？

**更新**：IE8 根本不适用于 Google Fonts API。事实上，如果我使用 IE8 浏览 Google Fonts API 页面上的许多字体样本，它们都不能正确呈现。使用这些字体的唯一可靠方法是将它们转换为`EOT`类型（以及`WOFF`类型），并从您的服务器提供它们，这是一种耻辱，因为您不能再使用 Google 的 CDN。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:17:29.647

我对其他答案和评论感到困惑，所以我就把它扔在那里。每当您使用数据 uri、属性或集合时，您就是在冒险进入一个 IE 不支持或限制它的领域。只有现代浏览器才能正确处理它们，但我是通过手机执行此操作的，无法进一步了解。结帐[http://caniuse.com/#search=data](http://caniuse.com/#search=data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:51:00.867

某些浏览器上的某些 Google 字体出现问题并不少见，尤其是在远程使用时（Google 推荐的方式）。它通常有助于下载字体，使用例如 FontSquirrel 生成字体文件，然后将它们上传到您的服务器上。

# c# - 通过代理的 POP/SMTP 和 IMAP，可能吗？

> ID：13519404
> 
> 赞同：0
> 
> 时间：2012-11-22T20:10:19.890
> 
> 标签：c#, imap, pop3

是否可以通过代理运行 POP/SMTP 和 IMAP？如果是这样，是否有任何 C# 库（最好是开源的）来实现这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:23:56.147

**电子邮件 .NET 组件（POP3、SMTP、IMAP、MIME、SSL、代理）**

简单而强大的 .NET POP3、SMTP、IMAP 组件，具有 MIME、SSL\TLS 和代理支持。精心设计，这些组件包括大量的演示、教程和综合性。

[在这里](http://visualstudiogallery.msdn.microsoft.com/28b96cd4-b755-48a0-b686-9abb7d5607a8)可用

# android - Android - 应用程序启动后等待执行任务并在此之后退出的方式可能是什么？

> ID：13519405
> 
> 赞同：0
> 
> 时间：2012-11-22T20:10:29.163
> 
> 标签：android, multithreading, android-asynctask, android-camera

我想知道打开应用程序的不同方式，在主线程上执行一些任务然后完成。哪种方式最适合此目的。我认为使用异步任务并让线程休眠一段时间应该会有所帮助，并且在执行后执行我想要的任务。但我很确定这是一个非常昂贵的解决方案。

例如，如果我希望应用程序在打开应用程序时自行单击照片。需要打开应用程序，然后等待，以便正确加载相机资源。完成此操作后，单击照片并保存照片后，应用程序将完成。

如果可以的话，请提供一些链接，以便我可以更好地阅读和理解这些概念。

有什么比使用 thread.sleep() 更好的方法来解决这个问题。

请分享任何好的方法..

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:22:23.223

如果我了解您需要什么（我不确定），您可以使用广播在任务之间进行连接

# eclipse-rcp - Eclipse 4：默认命令

> ID：13519407
> 
> 赞同：1
> 
> 时间：2012-11-22T20:10:48.060
> 
> 标签：eclipse-rcp, e4

对于关于 E4 的非常业余的问题，我深表歉意，但我对使用新的 Eclipse 4 框架进行 RCP 开发的一些事情有点困惑。[我在本教程](http://www.vogella.com/articles/EclipseRCP/article.html#commands_defaults)中读到，我们不能再像在 3.x 中那样使用任何默认命令，尤其是对于文件菜单中的保存、另存为...等常见命令。它说在 E4 中我们必须编写自己的命令。我感到困惑的原因是因为我以前喜欢 Eclipse 的原因是很多东西已经实现了，我们可以将其扩展到我们自己的需要。但感觉现在一切都必须从头开始编写。

这导致我考虑重用已经为 Eclipse Juno 编写的命令代码。我打开了实时编辑器，所以我可以看到命令列表等，但我并没有真正看到为它们中的任何一个实现的任何处理程序。然后我在 Eclipse Juno 上使用了 Spy 并检查了一些菜单项，它们似乎都指向 Actions。这真的让我很困惑，因为我认为 Juno 是基于 E4 的。

我可能完全错了，所以很抱歉问了这么愚蠢的问题。我刚刚开始使用 E4，需要决定是否应该将相当年轻的 Eclipse 3.x 项目之一迁移到 4.x。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:23:42.613

AfaIk，在 Juno 中，兼容层将基于 3.x 的 IDE 实现转换为 E4 概念。这也是可重用命令尚不可用的原因。如果您有一个基于 3.x 的 RCP，如果没有使用不兼容的 API，它也应该使用兼容层运行（并且您可以重用问题中提到的命令）。

以下是更多信息（也是 Lars Vogel 的教程）：[http ://www.vogella.com/articles/Eclipse4CompatibilityLayer/article.html](http://www.vogella.com/articles/Eclipse4CompatibilityLayer/article.html)

# javascript - 计算没有jQuery的HTML文本区域中显示的行数（不是换行符）？

> ID：13519411
> 
> 赞同：9
> 
> 时间：2012-11-22T20:11:00.707
> 
> 标签：javascript, html, textarea, line-count

> **可能重复：**
> [如何获取 <textarea > 中的行数？](https://stackoverflow.com/questions/1760629/how-to-get-number-of-rows-in-textarea)

我有一个`textarea`，我`7 lines`只`2 new line character`用下面这样写，想象下面的代码框是一个`textarea`，并且只按下了两次回车键。

```
 A text box, text field or text entry box is a kind of widget used when building
 a graphical user interface (GUI). A text box purpose is to allow the user to
 input text information to be used by the program.
 User-interface guidelines recommend a single-line text box when only one line of
 input is required, and a multi-line text box only if more than one line of input
 may be required.
 Non-editable text boxes can serve the purpose of simply displaying text. 
```

`textarea line count`如果现在是多写几行之后`n`。如何计算 的值`n`？

回答问题前请先说清楚。我不想数`new line characters`像这样的文字中有多少。***[如何获取文本区域中的行数？](https://stackoverflow.com/q/2035910/1714907)***

我想计算行数，就像**Microsoft Word**从段落中计算它一样。

**请不要 jQuery...**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:23:33.277

你可以试试这个。到目前为止我还没有测试它，但我记得这应该可以正常工作。

```
var lineHeight = document.getElementById("yourTextarea").style.lineHeight;
var scrollHeight = document.getElementById("yourTextarea").scrollHeight;
document.getElementById("yourTextarea").style.height = scrollHeight; // this is just for showing purposes
var numLines = Math.floor( scrollHeight / lineHeight ); 
```

这应该是我认为最简单的方法。

**编辑**

所以这就是答案，就像它一样简单：D

首先让舒尔给 textarea 一个**cols的值**

现在检查一下=

```
<textarea id="mytext" cols="10" rows="12">
</textarea>
<input type="button" value="Count Rows" onclick="countRows();"/>
<script type="text/javascript">
function countRows() {
    var stringLength = document.getElementById("mytext").value.length;
    var count = Math.ceil( stringLength / document.getElementById("mytext").cols ); 
    // just devide the absolute string length by the amount of horizontal place and ceil it
    alert( count );
}
</script> 
```

现在这应该可以正常工作了。

**更新**

您还可以确保在获取长度之前删除所有“新行”元素或仅删除最后一个字符（如果它是字符串中的“新行”）。这样就不会计算不需要的额外行。

还要确保不要设置文本框的“宽度”！这将导致一行中的文本比“cols”的值更远。这样，“计数”值将为您提供行数，如果最大行宽度为 cols 值。所以使用 cols 属性设置文本框宽度的唯一方法。

**更新 2**

我认为，如果您想要一种非错误的方式，则无法使用 PHP 或 jQuery。

第二种解决方案也只是一种快速而肮脏的方式。您必须编写一个逻辑来检查每个单词是否长于可离开的宽度，并检查每一行是否存在由于空间不足而被放到下一行的单词。

这将需要一些逻辑技能，并且由于不活动，我现在不会编写代码。

如果您希望我发布完整的 Javascript、PHP 或 jQuery 解决方案，请告诉我。（我看不出有什么理由不为此使用 jQuery）

# c++ - C++ 比较 const char* 和 std::string

> ID：13519412
> 
> 赞同：0
> 
> 时间：2012-11-22T20:11:03.640
> 
> 标签：c++

我正在尝试将 char * 与 a 与 std::string 进行比较

```
const char *s = "0@s072116\tblah\tblah\blah";
std::string id = "072116"; 
```

我需要比较这两个，基本上在第一个 \t 之前和左边的前 3 个字符之后。id 的宽度可以变化。:(

我不太擅长 C++。有任何想法吗？？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T20:14:10.863

你可以这样做：

```
#include <iostream>
#include <string>
using namespace std;

...

int main() {
    const char *s = "0@s072116\tblah\tblah\blah";
    string ss = s;
    string id = "072116";
    int found = ss.find(id);
    cout << "found is: " << found;
} 
```

如果`id`是 in 的子字符串`ss`，`found`则将是 in 的第一次出现的`id`位置`ss`。

如果`id`不是 中的子字符串`ss`，那么`found`将是一个负数。

`find`更多[示例](http://www.cplusplus.com/reference/string/string/find/)。

**警告：**

上面的代码基于假设您的意思是*“......基本上在第一个 \t 之前和左边的前 3 个字符之后......”*作为指出在这个特定示例中子字符串匹配位置的一种方式。

相反，如果它是所有实例都必须满足的要求（即`const char *s = "0@s\tblah\tblah\blah072116"`不应匹配），那么提供的代码示例是不够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:19:41.690

```
const char *position = std::search(s, s + std::strlen(s), id.begin(), id.end());
if (*position == '\0')
    std::cout << "Not found\n";
else
    std::cout << "Found at offset " << (position - s) << '\n'; 
```

# java - 如何通过 SMPP 协议连接到 SMSC 服务器？

> ID：13519414
> 
> 赞同：4
> 
> 时间：2012-11-22T20:11:21.077
> 
> 标签：java, sms-gateway, smpp

尊敬的所有人！我正在开发一个基于 SMS 的灾难管理系统的项目。
我们必须通过 SMPP 协议向 SMSC 服务器发送请求，以向其所有订阅者广播 SMS。移动电话公司为我们提供了 IP/端口、用户名和密码以连接到他们的 SMSC 服务器。
我对连接到他们的 SMSC 服务器应遵循哪些步骤感到有点困惑？
请有人回答我的以下问题：
1）如何通过 SMPP 协议连接到 SMSC 服务器？
2) 我们是否必须创建自己的 SMPP 服务器才能向 SMSC 服务器发送请求？
3) 如果问题#2 的答案是肯定的，那么如何从 SMPP 服务器向 SMSC 服务器发送请求？
任何帮助将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T20:23:11.960

“如果您的提供商使用 HTTP 协议将短信发送给他们，那么您将需要使用 HTTP POST/GET 方法。另一方面，如果您的提供商使用 SMPP（短消息点对点）协议，则必须使用相同的连接到他们。”-[来源](http://www.daniweb.com/software-development/java/threads/171290/sending-sms-through-a-java-program#)

因此，看起来提供商正在使用 SMPP 协议。这意味着您必须设置 SMSC 连接。为此，您需要使用 Java API，在您的项目中下载这些[库。](https://github.com/OpenSmpp/opensmpp)下载的 Java 文档中应该有关于如何设置的文档。升

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-25T14:05:19.140

另一种选择是开源 Mobicents SMSC 服务器，它支持 SMPP、SIP 和 SS7/SIGTRAN 接口，以及通过 Restcomm 的 HTTP REST API。

事实上，您可能需要考虑使用 Restcomm 可视化设计器快速构建 SMS 处理逻辑，并使用外部服务功能与您的其余业务逻辑集成。

[https://code.google.com/p/smscgateway/](https://code.google.com/p/smscgateway/) [http://www.restcomm.com/](http://www.restcomm.com/)

# c# - 最大化时如何关闭、恢复或最小化 DXRibbonWindow？

> ID：13519416
> 
> 赞同：2
> 
> 时间：2012-11-22T20:11:52.840
> 
> 标签：c#, wpf, xaml, devexpress, ribbon

我在 WPF 项目中使用 DevExpress 库（版本 12.1）。我需要创建一个 DXRibbonWindow 来获得一个类似于 Excel 的 RibbonBar，在顶部带有快速访问工具栏。

所以，问题是我可以在最大化时关闭、恢复或最小化这个窗口。当窗口未最大化时，这些按钮可以正常工作。

以下代码是我的 .xaml 文件：

```
<dxr:DXRibbonWindow IsAeroMode="True" WindowState="Maximized" ... /> 
```

我需要正常操作这个窗口。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T11:14:07.287

据我从[DXSearch](http://search.devexpress.com/?q=maximized%2bIsAeroMode&p=T4%7cP4%7c173&d=15)可以看出，这个问题[已经报告给 DevExpress](http://www.devexpress.com/Support/Center/p/Q430906.aspx)。当前问题状态***在 12.1.8 版本中已修复***。因此，欢迎您将您的版本更新为该版本。

# android - android rectF 警告

> ID：13519419
> 
> 赞同：3
> 
> 时间：2012-11-22T20:12:09.503
> 
> 标签：android, draw, rect

我在画布上画了一个椭圆：

```
RectF f = new RectF(-r, -r, r, r);
canvas.drawOval(f , mPaint); 
```

为什么我在 RectF 上看到警告？

> 在绘制/布局操作期间避免对象分配（改为预分配和重用）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T20:16:47.690

就像它所说的那样：每次绘制任何东西时，做一个`new RectF`内部都会创建一个对象。`onDraw`这可能是很多对象。只需使用一个`RectF`：

```
RectF mRect = new RectF();

protected void onDraw(Canvas canvas) {
    mRect.set(-r, -r, r, r);
    canvas.drawOval(mRect, mPaint);
} 
```

只是要清楚：您的原始代码在逻辑上是正确的。这只是一种性能改进（尽管很重要）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T20:16:13.720

只需创建一次 RectF 对象并在每次绘制时重复使用它，否则您将创建过多的 RectF 对象，这可能会影响性能。

# vba - Vba程序不会第二次运行

> ID：13519425
> 
> 赞同：0
> 
> 时间：2012-11-22T20:12:54.083
> 
> 标签：vba, excel

这是我的第一个问题，所以请耐心等待:)

我不是一个经验丰富的 VBA 程序员，我在我的软件中遇到了一些问题。

我有一个程序可以粘贴一些数据，然后添加一些新列。之后，它拆分一些文本并将其放在新列中的单元格内。

该程序第一次运行完美，但第二次似乎将数据粘贴错误。它有不同的外观，当它从某些显然不存在的单元格中提取数据时，程序会失败。

它给了我一个错误：无法获取工作表函数类的平均属性

希望你有一些好的想法。我试图清除所有格式、内容等。

谢谢你。

这是我的代码，非常抱歉糟糕的编程风格。我需要将我的一些循环收集到更流畅的东西中，但首先我需要它工作:)

感谢您的时间！

```
 Option Explicit

Private Sub btnExit_Click()

Application.Quit

End Sub

Private Sub btni2_Click()

Application.ScreenUpdating = False
Application.DisplayAlerts = False

Worksheets("System").Activate
Worksheets("System").Cells(1, 1).Select
ActiveCell.PasteSpecial

On Error GoTo myError:

Worksheets("System").Cells(2, 2) = "=COUNTA(A3:A10000)"
Dim laps As Integer
laps = Worksheets("System").Cells(2, 2)
'MsgBox ("Resultat er: " & laps)

' Opret nye kolloner til at seperare tekst fra I2.
    Columns("B:B").Select
    Selection.Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove
    Columns("D:D").Select
    Selection.Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove
    Columns("F:F").Select
    Selection.Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove
    Columns("H:H").Select
    Selection.Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove

'Flyt text til nye kolloner for at splitte data op
'Split A
    Range("A3:A10000").Select
    Selection.TextToColumns Destination:=Range("A3"), DataType:=xlDelimited, _
        TextQualifier:=xlNone, ConsecutiveDelimiter:=False, Tab:=False, _
        Semicolon:=False, Comma:=True, Space:=False, Other:=False, FieldInfo _
        :=Array(Array(1, 1), Array(2, 1)), TrailingMinusNumbers:=True

'Split C
    Range("C3:C10000").Select
    Selection.TextToColumns Destination:=Range("C3"), DataType:=xlDelimited, _
        TextQualifier:=xlNone, ConsecutiveDelimiter:=False, Tab:=False, _
        Semicolon:=False, Comma:=True, Space:=False, Other:=False, FieldInfo _
        :=Array(Array(1, 1), Array(2, 1)), TrailingMinusNumbers:=True

'Split E
    Range("E3:E10000").Select
    Selection.TextToColumns Destination:=Range("E3"), DataType:=xlDelimited, _
        TextQualifier:=xlNone, ConsecutiveDelimiter:=False, Tab:=False, _
        Semicolon:=False, Comma:=True, Space:=False, Other:=False, FieldInfo _
        :=Array(Array(1, 1), Array(2, 1)), TrailingMinusNumbers:=True

'Split G
    Range("G3:G10000").Select
    Selection.TextToColumns Destination:=Range("G3"), DataType:=xlDelimited, _
        TextQualifier:=xlNone, ConsecutiveDelimiter:=False, Tab:=False, _
        Semicolon:=False, Comma:=True, Space:=False, Other:=False, FieldInfo _
        :=Array(Array(1, 1), Array(2, 1)), TrailingMinusNumbers:=True

'check om der er data i Main arket
    Dim Check As String

    Check = Worksheets("Main").Range("B1").Value

    If Check = "" Then

        Worksheets("System").Range("A3").Copy
        Worksheets("Main").Select
        Range("B1").Select
        Selection.PasteSpecial
        Worksheets("System").Select

        Worksheets("System").Range("B3").Copy
        Worksheets("Main").Select
        Range("B2").Select
        Selection.PasteSpecial
        Worksheets("System").Select

        Worksheets("System").Range("C3").Copy
        Worksheets("Main").Select
        Range("B6").Select
        Selection.PasteSpecial
        Worksheets("System").Select

        Worksheets("System").Range("D3").Copy
        Worksheets("Main").Select
        Range("B4").Select
        Selection.PasteSpecial
        Worksheets("System").Select

        Worksheets("System").Range("E3").Copy
        Worksheets("Main").Select
        Range("B3").Select
        Selection.PasteSpecial
        Range("B7").Value = "Mads S. Christiansen"
        Worksheets("System").Select

    End If

    'definer alle de variabler der skal pastes ind i de respektive sessions
    Dim EditLaps As Integer
    Dim FastLap As Variant 'J
    Dim NoLaps As Integer 'inkl in/out brug variabel laps fra tidligere
    Dim TotalTime As Variant 'Sum af alle felter i J =sum(J3:J+laps)
    Dim TotalKm As Variant ' AM3 og AN & laps +3 trukket fra hinanden
    Dim MaxRpm As Long 'Max V3 til V & laps + 3
    Dim MaxWaterT As Double ' max O3 til O & laps + 3
    Dim AvgWaterT As Double ' avg O3 til O & laps + 3
    Dim MaxOilT As Double ' MAX Q3 til Q & laps + 3
    Dim AvgOilT As Double ' AVG
    Dim IntakeT As Double
    Dim MaxOilP As Double
    Dim MinOilP As Double
    Dim AvgOilP As Double
    Dim MaxCoolP As Double
    Dim MinCoolP As Double
    Dim AvgCoolP As Double
    Dim TotalKm1, TotalKm2 As Variant

    NoLaps = laps
    'Bruges som reference for at det passser med offset pga af første celle ref
    EditLaps = NoLaps + 2
    'Find hurtigste omgang og tildel den til FastLap
    FastLap = Application.WorksheetFunction.Min(Range(Cells(3, 10), Cells(EditLaps, 10)))
    ' Denne format virker !! Range("Z1").NumberFormat = "mm:ss.000"

    ' Total tid for session
    TotalTime = Format(Application.WorksheetFunction.Sum(Range(Cells(3, 10), Cells(EditLaps, 10))), "HH:MM:SS")

    'Total antal km for session, er dist slut minus dist start
    TotalKm1 = Range("AM3").Value
    TotalKm2 = Range("AN" & EditLaps).Value

    TotalKm = TotalKm2 - TotalKm1

    '------------------------------------------ Dette er for at convertere felte om til nummerisk formatering----------
    Dim a As Variant
    Dim b As Variant
    Dim c As Variant
    Dim d As Variant
    Dim e As Variant
    Dim f As Variant
    Dim g As Variant
    Dim h As Variant
    Dim i As Variant
    Dim j As Variant

    For Each a In Range("V1:V" & EditLaps)
    If a = "" Then GoTo nexta
    If IsNumeric(a) Then
        a.Value = a.Value * 1
        a.NumberFormat = "general"
    End If

nexta:
Next a

 For Each b In Range("N1:N" & EditLaps)
    If b = "" Then GoTo nextb
    If IsNumeric(b) Then
        b.Value = b.Value * 1
        b.NumberFormat = "general"
    End If

nextb:
Next b

For Each c In Range("O1:O" & EditLaps)
    If c = "" Then GoTo nextc
    If IsNumeric(c) Then
        c.Value = c.Value * 1
        c.NumberFormat = "general"
    End If

nextc:
Next c

For Each d In Range("K1:K" & EditLaps)
    If d = "" Then GoTo nextd
    If IsNumeric(d) Then
        d.Value = d.Value * 1
        d.NumberFormat = "general"
    End If

nextd:
Next d

For Each e In Range("L1:L" & EditLaps)
    If e = "" Then GoTo nexte
    If IsNumeric(e) Then
        e.Value = e.Value * 1
        e.NumberFormat = "general"
    End If

nexte:
Next e

For Each f In Range("Q1:Q" & EditLaps)
    If f = "" Then GoTo nextf
    If IsNumeric(f) Then
        f.Value = (f.Value * 1) / 1000
        f.NumberFormat = "general"
    End If

nextf:
Next f

For Each g In Range("P1:P" & EditLaps)
    If g = "" Then GoTo nextg
    If IsNumeric(g) Then
        g.Value = (g.Value * 1) / 1000
        g.NumberFormat = "general"
    End If

nextg:
Next g

For Each h In Range("R1:R" & EditLaps)
    If h = "" Then GoTo nexth
    If IsNumeric(h) Then
        h.Value = (h.Value * 1) / 1000
        h.NumberFormat = "general"
    End If

nexth:
Next h

For Each i In Range("T1:T" & EditLaps)
    If i = "" Then GoTo nexti
    If IsNumeric(i) Then
        i.Value = i.Value * 1
        If i.Value >= 1 Then
        i.Value = i.Value / 1000
        End If
        i.NumberFormat = "general"
    End If

nexti:
Next i

For Each j In Range("S1:S" & EditLaps)
    If j = "" Then GoTo nextj
    If IsNumeric(j) Then
        j.Value = j.Value * 1
        If j.Value >= 1 Then
        j.Value = j.Value / 1000
        End If
        j.NumberFormat = "general"
    End If

nextj:
Next j

    'Max rpm
    MaxRpm = Application.WorksheetFunction.Max(Range(Cells(3, "V"), Cells(EditLaps, "V")))

    'Max vand temp
    MaxWaterT = Application.WorksheetFunction.Max(Range(Cells(3, "N"), Cells(EditLaps, "N")))
    AvgWaterT = Application.WorksheetFunction.Average(Range(Cells(3, "O"), Cells(EditLaps, "O")))

    MaxOilT = Application.WorksheetFunction.Max(Range(Cells(3, "K"), Cells(EditLaps, "K")))
    AvgOilT = Application.WorksheetFunction.Average(Range(Cells(3, "L"), Cells(EditLaps, "L")))

    'IntakeT =

    MaxOilP = Application.WorksheetFunction.Max(Range(Cells(4, "Q"), Cells(EditLaps - 1, "Q")))
    MinOilP = Application.WorksheetFunction.Min(Range(Cells(4, "P"), Cells(EditLaps - 1, "P")))
    AvgOilP = Application.WorksheetFunction.Average(Range(Cells(4, "R"), Cells(EditLaps - 1, "R")))

    MaxCoolP = Application.WorksheetFunction.Max(Range(Cells(4, "T"), Cells(EditLaps - 1, "T")))
    MinCoolP = Application.WorksheetFunction.Min(Range(Cells(4, "S"), Cells(EditLaps - 1, "S")))
    AvgCoolP = Application.WorksheetFunction.Average(Range(Cells(4, "T"), Cells(EditLaps - 1, "T")))

    ' lav et object der indeholder det sheet som der skal bruges
    Dim Sheet As Object
    Set Sheet = Worksheets("Main")

    'Definer hvilken session der er kopieret ind
    Dim Session As String

    Session = UCase(Range("F3"))

    Select Case Session

    Case Is = " TEST"
        Set Sheet = Worksheets("Test")
    Case Is = " Q1"
        Set Sheet = Worksheets("Q1")
    Case Is = " Q2"
        Set Sheet = Worksheets("Q2")
    Case Is = " WU"
        Set Sheet = Worksheets("WU")
    Case Is = " RACE1"
        Set Sheet = Worksheets("Race1")
    Case Is = " RACE2"
        Set Sheet = Worksheets("Race2")
    End Select

    Sheet.Activate

    Range("B3").Value = FastLap
    Range("B4").Value = NoLaps
    Range("B5").Value = TotalTime
    Range("B7").Value = TotalKm
    Range("B13").Value = MaxRpm
    Range("B16").Value = MaxWaterT
    Range("B17").Value = AvgWaterT
    Range("B20").Value = MaxOilT
    Range("B21").Value = AvgOilT
    Range("B24").Value = 25
    Range("B27").Value = MaxOilP
    Range("B28").Value = MinOilP
    Range("B29").Value = AvgOilP
    Range("B32").Value = MaxCoolP
    Range("B33").Value = MinCoolP
    Range("B34").Value = AvgCoolP

    Sheet9.Activate
    Sheet9.Cells.Select
    With Cells
    .Clear
    .ClearComments
    .ClearContents
    .ClearFormats
    .ClearHyperlinks
    .ClearNotes
    .ClearOutline
    End With

    ' aktiver main siden efter endt handling af System seperation
    Worksheets("Main").Activate
    Cells(1, 1).Select
'Fjern hovedform fra billede og derefter vises Main arket.
MainForm.Hide

myError:
        Application.ScreenUpdating = True
        Application.DisplayAlerts = True
        If Err Then MsgBox Err.Description, vbCritical, "Error"

End Sub

Private Sub btnView_Click()
' aktiver kun main sheet hvis der oenskes view.
Worksheets("Main").Activate
'marker celle
Cells(1, 1).Select
'gem main form sŒ der kun er normalt excel view
MainForm.Hide

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T23:46:51.053

**在将代码添加到问题之前发布的答案**

对于新的 VBA 程序员来说，一个容易犯的错误是编写一个在活动工作表上运行的宏。直到您在调用宏之前查看另一张工作表之前，这很有效。

例如，你可以写：

```
Range("A1").Value = "abc"
Cells(29, "B").Font.Bold = True 
```

上述语句在活动工作表上运行。

```
With Worksheets("Master")
  .Range("A1").Value = "abc"
  .Cells(29, "B").Font.Bold = True
End With 
```

在第二个例子中，我已经明确写了我希望我的语句对工作表 Master 进行操作。请注意，我在之前`Range`和之前添加了一个点`Cells`。像这样写，当你启动宏时你在看哪张表并不重要。

不使用`With`语句来指定目标工作表只是编写代码的一个示例，该代码仅在启动宏时光标位于正确位置时才有效。您描述的症状与此类错误相符。

看看你的代码。它做了什么假设？如果这没有帮助，请按照 Kevin 的要求执行并发布您的代码。去做这个：

*   编辑您的问题。
*   将您的代码复制到问题中。
*   选择代码，然后单击编辑窗口上方的大括号。这会在每行的开头添加四个空格，使其显示为代码。

**将代码添加到问题后发布的答案**

我一直在研究你的一些代码。我无法正常运行它，因为我没有上下文；我不知道它在操作什么样的数据。

但是，以下评论可能有用。当我发现要说的内容时，我会添加更多内容。

在调试期间您不需要这些命令中的任何一个。

```
'Application.ScreenUpdating = False
'Application.DisplayAlerts = False 
```

无论您尝试做什么，我都不认为这是实现它的好方法。我不得不删除它，这样我才能得到我可以运行的语句。 **编辑** 通过您的一些代码并获得了对它的理解，我想知道这是否是您的问题的原因。稍后，当我获得允许更好地理解您在做什么的代码时，我会讨论这个问题。

```
'Worksheets("System").Activate
'Worksheets("System").Cells(1, 1).Select
'ActiveCell.PasteSpecial 
```

在我想将它们发布给其他人之前，我从不在我自己的宏中包含错误处理。在测试期间，我希望宏在错误语句上停止，而不是优雅地失败并出现我不知道其来源的错误消息。

```
'On Error GoTo myError: 
```

我更喜欢将所有变量分组在宏的顶部，这样我就可以轻松找到它们。这不是必需的，只是我的喜好。在 32 位系统上，`Long`是整数值的本机大小。 `Integer`指定一个 16 位变量，需要特殊处理，会导致执行速度变慢。

```
Dim laps As Long 
```

我已更改以下内容，因此它使用`With statement`而不是切换工作表并选择单元格。切换和选择很慢，并且会变得非常混乱。除非必须，否则不要这样做。

```
With Worksheets("System")
  .Cells(2, 2).Value = "=COUNTA(A3:A10000)"
  laps = .Cells(2, 2).Value
End With 
```

我假设上面是试图确定早期粘贴加载的行数。麻烦的是这是计算空白行的数量。你绝对确定空行是不可能的吗？我还假设 10,000 表示的行数超过了粘贴可能加载的行数。

有多种技术可以找到最下面一行；没有一个在任何情况下都有效。最简单的技术是：

```
Dim RowLast As Long
With Worksheets("System")
  RowLast = .Cells(Rows.Count, "A").End(XlUp).Row
End With 
```

`Rows.Count`是您的 Excel 版本的最大行数。这个 VBA 相当于将光标放在“A”列的底行，然后单击 Ctrl+Up，它会跳转到“A”列的最后一行，并带有一个值。该行的编号放置在 LastRow 中。

考虑这段代码：

```
 Columns("B:B").Select
  Selection.Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove
  Columns("D:D").Select
  Selection.Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove
  Columns("F:F").Select
  Selection.Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove
  Columns("H:H").Select
  Selection.Insert Shift:=xlToRight, CopyOrigin:=xlFormatFromLeftOrAbove 
```

上述代码的目的是在每列 B、C、D 和 E 之前创建一个空白列。但是，在 B 列之前插入一列将 C 列移动到 D 列。我被告知从左到右执行插入比从右到左执行它们要快一些，但我不在乎。如果每天要执行数千次例程，或者如果它真的很慢，那么我会考虑效率。但是我不会编写我觉得很难理解的代码，如果它只节省几毫秒。

VBA 的一个问题是，总是有几种方法可以达到相同的效果，而且通常没有明显的理由说明一种方法优于另一种方法。在我的代码版本中，我使用了插入列。我没有执行任何计时 - 所以我不知道哪种方法更快 - 我只是发现插入列更清晰。

我假设“Opret nye kolloner til at seperare tekst fra I2”说明了您**为什么**要这样做。请注意，我添加**了 what**和**how**。当我在 6 个月或 12 个月后回到这个代码时，我不想通过研究代码来发现什么、为什么或如何。我想被告知。据说 Unix 操作系统有很好的文档记录，但并非总是如此。显然，一段代码的标题是：“曾经只有上帝和我知道这个程序的作用。现在只有上帝知道。” 您不想对自己的代码这么说。我喜欢在写完自己的代码后一两个星期再看一遍，而我仍然或多或少记得它的作用。如果我难以理解，我知道它需要更多评论。

```
Dim ColCodeCrnt As Variant

With Worksheets("WRASystem")
  ' Insert a blank column before each of columns E, D, C and B.
  ' Insertions in reverse order to make code clearer since an
  ' insertion before column B moves column C.
  For Each ColCodeCrnt In Array("E", "D", "C", "B")
    .Columns(ColCodeCrnt).EntireColumn.Insert
  Next
End With 
```

现在考虑块开始：

```
 Range("A3:A10000").Select
  Selection.TextToColumns Destination:=Range("A3"), DataType:=xlDelimited, _
      TextQualifier:=xlNone, ConsecutiveDelimiter:=False, Tab:=False, _
      Semicolon:=False, Comma:=True, Space:=False, Other:=False, FieldInfo _
      :=Array(Array(1, 1), Array(2, 1)), TrailingMinusNumbers:=True 
```

由此我推断，您在开头粘贴的块有 N 行和 4 列。每个单元格包含“Value1，Value2”。您正在拆分值，因此“值 1”保留在 A 列中，而“值 2”进入新清空的 B 列。对于 C、E 和 G 列重复此操作。

正如我之前所说，我假设 10000 代表块大小的不可能大的行数。我在上面向您展示了如何获取工作表的实际最后一行。稍后，我将向您展示如何使用最后一行的数字来改进此代码。但是，我有一个问题需要首先解决。

你调用这个宏`btni2_Click()`。我的猜测是用户选择了感兴趣的范围并单击按钮*i2*。您的代码将该范围粘贴到工作表*System*中，然后使用它。但这依赖于工作表*系统*为空。如果新范围的行数少于上一个范围，则您的代码将对新范围和一些旧范围进行操作。

考虑这段代码：

```
Sub btni2_Click()

  Dim AddrSrc As String
  Dim WkShtSrc As String

  WkShtSrc = Selection.Worksheet.Name
  AddrSrc = Selection.Address

  Debug.Print WkShtSrc & "!" & AddrSrc

  With Worksheets("System")
    .Cells.EntireRow.Delete
    Range(WkShtSrc & "!" & AddrSrc).Copy Destination:=.Range("A1")
  End With 
```

此代码所做的第一件事是记录所选范围的详细信息。我包括了一个`Debug.Print`，所以你可以看到我保存了什么。然后我可以做任何我喜欢的事情而不会丢失选择的细节。事实上，我所做的只是在将源范围复制到从单元格 A1 开始的矩形之前删除工作表中的每一行（即清除它）。

我现在推荐这个代码来代替你的代码。注：（1）没有选择；（2）目标范围开头有一个点，表示它是`With`语句限定的；(3) 我构建了允许我将它们包含在循环中的范围。我没有将参数更改为，`TestToColumns`因为我对正在拆分的数据一无所知。

```
 With Worksheets("WRASystem")
    For Each ColCodeCrnt In Array("A", "C", "E", "G")
      .Range(ColCodeCrnt & "3:" & ColCodeCrnt & RowLast).TextToColumns _
              Destination:=.Range(ColCodeCrnt & "3"), DataType:=xlDelimited, _
              TextQualifier:=xlNone, ConsecutiveDelimiter:=False, Tab:=False, _
              Semicolon:=False, Comma:=True, Space:=False, Other:=False, _
              FieldInfo:=Array(Array(1, 1), Array(2, 1)), _
             TrailingMinusNumbers:=True
    Next
  End With 
```

我不会再看你的代码了。我给了你很多思考，我可能已经发现了你的问题的原因。如有必要，请回来提出更多问题。

# css - 需要有关 mso 风格的信息

> ID：13519433
> 
> 赞同：0
> 
> 时间：2012-11-22T20:14:00.527
> 
> 标签：css, ms-office

我需要知道除了有限的 css 样式之外，可以使用 MSO 样式在 msWord 中设置哪些选项或属性，我已经找到了这些信息，但没有别的。

例如，我遇到了 mso-add-space:auto 并且不知道这到底是做什么的或可以设置什么、百分比、像素等。

我一直在互联网上搜索类似于 w3cschools 的 css 属性列表，但没有运气。

任何类型的信息或搜索方向都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:25:23.690

这些是 MS Office 内部的专有代码。您绝不应允许将这些代码作为网站的一部分包含在内。该内容应该被剥离为纯文本，并使用适当的 HTML + CSS 标记重新编码。

使用 MS Office 内容的第二个影响是特殊字符通常编码为 Windows-1251，而不是 unicode 标准 UTF-8。这将导致布局中的字符损坏。

# java - 循环只删除第一个文件

> ID：13519438
> 
> 赞同：2
> 
> 时间：2012-11-22T20:14:24.567
> 
> 标签：java, file, delete-file

我在删除所有选定的文件时遇到问题。我要做的是在单击“添加”后，选择的任何文件都将移动到新文件夹并在其先前的文件夹中删除。一个文件工作正常。它删除并移动文件。但不止一个，而且只有第一个被删除。我的循环是识别每个文件而不是删除它们。我正在发布动作事件。如果需要更多代码，请告诉我。我已经指出问题出在哪里，所以我认为，所以你不必搜索代码。

```
public void actionPerformed(ActionEvent e) {
    int returnValue = 0;
    int option = 0;
    File[] selectedFiles = new File[0];

    if (e.getActionCommand().equals("CLOSE")) System.exit(0);

    else if (e.getActionCommand().equals("ADD")) {
        JFileChooser chooser = new JFileChooser();
        chooser.setMultiSelectionEnabled(true);
        returnValue = chooser.showOpenDialog(this);         

        if (returnValue == JFileChooser.APPROVE_OPTION) {

            File[] file = chooser.getSelectedFiles();                   

            try {
                FileInputStream fstream = null;
                FileOutputStream ostream = null;

                for (int i = 0; i < file.length; i++) {

                   fstream = new FileInputStream(file[i]);
                           ostream = new      
                                       FileOutputStream(file[i].getName());

                    Path path = Paths.get(file[i].getPath());
                    byte[] fileArray;
                    fileArray = Files.readAllBytes(path);

                    listModel.add(0, file[i].getName());
                    selectedFilesList.setModel(listModel);
                                  //ostream.write(fileArray, 0, fileArray.length);

                }

                fstream.close();
                //ostream.close();

                try {

                    for(int i = 0; i < file.length; i++) {
//**----------------------->>>PROBLEM**                     
                    Files.delete(Paths.get(file[i].getPath()));
                    System.out.println(file[i].getName());

                    }

                } catch (NoSuchFileException x) {}
        System.err.format("%s: no such" + " file or directory%n")
                } catch (DirectoryNotEmptyException x) {
                    System.err.format("%s not empty%n");
                } catch (IOException x) {
                    // File permission problems are caught here.
                    System.err.println(x);
                } catch (Exception err) {
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T20:27:32.053

这可能是由于您未能在第一个循环中关闭文件流造成的。

```
 for (int i = 0; i < file.length; i++) {
               fstream = new FileInputStream(file[i]);
                       ostream = new      
                                   FileOutputStream(file[i].getName()); // This is never closed

                Path path = Paths.get(file[i].getPath());
                byte[] fileArray;
                fileArray = Files.readAllBytes(path);

                listModel.add(0, file[i].getName());
                selectedFilesList.setModel(listModel);
                              //ostream.write(fileArray, 0, fileArray.length);

            }

            fstream.close();  // Only the last input stream is closed 
```

应该更像

```
 for (int i = 0; i < file.length; i++) {
              try {
                 fstream = new FileInputStream(file[i]);
                 ostream = new      
                      FileOutputStream(file[i].getName());

                  Path path = Paths.get(file[i].getPath());
                  byte[] fileArray;
                  fileArray = Files.readAllBytes(path);

                  listModel.add(0, file[i].getName());
                  selectedFilesList.setModel(listModel);
                  //ostream.write(fileArray, 0, fileArray.length);
               } finally {
                 fstream.close();
                 ostream.close();
               }
            } 
```

关闭您打开的相同数量的文件。

这可能会通过锁定除一个文件之外的所有文件而导致您的问题，这将阻止删除。

此外，您的 catch 异常块（最后一条语句）对错误没有任何作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T20:26:57.247

不要这样移动文件！

1.  如果您使用的是 Java 7，请查看此[页面](http://docs.oracle.com/javase/tutorial/essential/io/move.html)。

2.  对于旧版本，请使用[`oldFile.renameTo(newFile)`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#renameTo%28java.io.File%29).

编辑：要了解您的代码为什么不起作用，请使用调试器。我认为您的删除循环是由于异常而留下的。

# bash - 将文件名分配给 shell 中的变量

> ID：13519442
> 
> 赞同：3
> 
> 时间：2012-11-22T20:14:47.660
> 
> 标签：bash, shell, variables, for-loop, ls

我正在尝试编写一个比我将要向您展示的内容更复杂的脚本，但我知道问题出在这部分。

我希望通过循环将目录中文件列表的每个名称分配给一个变量（同一个变量，一次一个）`for`，然后在循环内执行一些操作，看看是什么意思：

```
for thing in $(ls $1);
do
    file $thing;
done 
```

编辑：假设这个 scrypt 叫做 Scrypt，我有一个名为 Folder 的文件夹，它里面有 3 个名为 A、B、C 的文件。当我写这篇文章时，我希望它在终端上显示：

```
./scrypt Folder 
```

以下：

```
A: file
B: file
C: file 
```

使用上面显示的代码，我得到了这个：

```
A: ERROR: cannot open `A' (No such file or directory)
B: ERROR: cannot open `B' (No such file or directory)
C: ERROR: cannot open `C' (No such file or directory) 
```

那就是问题所在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:18:20.450

一种方法是使用通配符扩展而不是`ls`，例如，

```
for filename in "$1"/*; do
    command "$filename"
done 
```

这假定它`$1`是其中包含文件的目录的路径。

如果您只想对普通文件进行操作，请在`do`以下行之后添加一个检查：

```
[ ! -f "$filename" ] && continue 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T20:21:01.407

[http://mywiki.wooledge.org/ParsingLs](http://mywiki.wooledge.org/ParsingLs)

改用通配符：

```
for filename in "$1"/* ; do
    <cmd> "$filename"
done 
```

注意 $filename 周围的引号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T20:50:01.693

有点不清楚您要完成什么，但您基本上可以使用`find`. 例如，以下打印文件夹中找到的每个文件的内容：

```
find FolderName -type f -maxdepth 1 -exec cat {} \; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-11T21:07:22.937

好吧，我认为您的意思是循环将显示所需目录中的文件名。所以，我会这样做：

```
for filename in "$1"/*; do
echo "file: $filename"
done 
```

这样结果应该是（如果目录中有3个文件并且名称是ABC：

```
`file: A
`file: B
`file: C 
```

# java - 旋转矩形并以正弦波移动它 - 帮助使用 graphics2D

> ID：13519449
> 
> 赞同：2
> 
> 时间：2012-11-22T20:15:33.807
> 
> 标签：java, swing, jpanel, graphics2d, rotatetransform

你好！

我有下面使用以前的 Stackoverflow 帖子的代码。

我只想将矩形旋转某个角度并使其在正弦波中移动。

这段代码也旋转了整个正弦波。

我明白为什么会这样，但我不知道如何实现我的意图。

请帮忙！！！

非常感谢您抽出时间。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.AffineTransform;
import java.util.Timer;
import java.util.TimerTask;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Withrotation {

    public static int i = 1;
    public static Ticker t;
    public static Repainter r;
    public static int newx, newy;

    public static void main(String[] args) {
        final JFrame frame = new JFrame("Wavy!");
        final WavyPanel wp = new WavyPanel();
        frame.getContentPane().add(wp, BorderLayout.CENTER);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        t = new Ticker(wp);
        r = new Repainter(wp);
        frame.pack();
        frame.setVisible(true);
        final Timer tickTimer = new Timer();
        final Timer paintTimer = new Timer();
        paintTimer.schedule(r, 1000, 50);
        tickTimer.schedule(t, 1000, 10);
    }

    private static class WavyPanel extends JPanel {

        private final Dimension size = new Dimension(640, 480);
        private int amplitude = 50;
        private int frequency = 5;
        private double x1 = 0;
        private double y1 = 500;
        private int yBase = 0;

        WavyPanel() {
            super(true);
        }

        @Override
        protected void paintComponent(final Graphics g) {
            final Graphics2D g2 = (Graphics2D) g;
            AffineTransform old = g2.getTransform();
            g2.rotate(Math.toRadians(-30));

            g2.clearRect(0, 0, this.getSize().width, this.getSize().height);
            g2.setColor(Color.BLACK);
            g2.fillRect((int) x1, (int) y1, 20, 80);
            g2.setTransform(old);

        }

        @Override
        public Dimension getPreferredSize() {
            return size;
        }

        @Override
        public Dimension getMinimumSize() {
            return size;
        }

        @Override
        public Dimension getMaximumSize() {
            return size;
        }

        public void tick() {
            x1 = x1 + 1;
            final int waveLength = size.width / frequency;
            yBase = (++yBase) % waveLength;
            final double normalized = (double) yBase / (double) waveLength;
            final double radians = normalized * Math.PI * 2;
            final double sine = Math.sin(radians);
            y1 = (int) (sine * amplitude);

        }
    }

    private static class Ticker extends TimerTask {

        private final WavyPanel panel;

        Ticker(final WavyPanel panel) {

            this.panel = panel;

        }

        @Override
        public void run() {
            panel.tick();
        }
    }

    private static class Repainter extends TimerTask {

        private final WavyPanel panel;

        Repainter(final WavyPanel panel) {

            this.panel = panel;

        }

        @Override
        public void run() {
            panel.repaint();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T20:28:13.163

+1 为 SSCCE

`super.paintComponent();`1）不要忘记在您的覆盖`paintComponent(..)`方法中将调用作为第一条语句。

2) Swing UI 应该在[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上创建并与[Swing Timers一起使用](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

3) 类的 Java 变量命名约定是每个新词的大写字母，即`WithRotation`.

4) 无需`frame.getContentPane.add(..)`简单使用`add(..)`，因为所有呼叫都转发到其*contentPane*。

这是我制作的示例（基本上是您的代码实现了上述修复），它仅旋转图形后面的矩形，而不是使用以下命令旋转整个图形对象[`AffineTransform#createTransformedShape()`](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/AffineTransform.html#createTransformedShape%28java.awt.Shape%29)：

![在此处输入图像描述](../Images/02115164c2babd4d0fbbe400a09d1ce0.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.Shape;
import java.awt.event.ActionEvent;
import java.awt.geom.AffineTransform;
import javax.swing.AbstractAction;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class WithRotation {

    private JFrame frame;
    private WavyPanel wp;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new WithRotation();
            }
        });
    }

    public WithRotation() {
        initComponents();
    }

    private void initComponents() {
        frame = new JFrame("Wavy!");
        wp = new WavyPanel();
        frame.add(wp, BorderLayout.CENTER);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);

        createAndStartTimers();
    }

    private void createAndStartTimers() {
        new Timer(50, new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {

                wp.repaint();
            }
        }).start();
        new Timer(10, new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {

                wp.tick();
            }
        }).start();
    }

    class WavyPanel extends JPanel {

        private final Dimension size = new Dimension(640, 480);
        private int amplitude = 50;
        private int frequency = 5;
        private double x1 = 0;
        private double y1 = 500;
        private int yBase = 0;

        WavyPanel() {
            super(true);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2 = (Graphics2D) g;

            g2.clearRect(0, 0, this.getSize().width, this.getSize().height);
            g2.setColor(Color.BLACK);

            Rectangle rect = new Rectangle((int) x1, (int) y1, 20, 80);

            AffineTransform transform = new AffineTransform();
            transform.rotate(Math.toRadians(-30), rect.getX() + rect.width / 2, rect.getY() + rect.height / 2);

            Shape transformed = transform.createTransformedShape(rect);
            g2.fill(transformed);
        }

        @Override
        public Dimension getPreferredSize() {
            return size;
        }

        @Override
        public Dimension getMinimumSize() {
            return size;
        }

        @Override
        public Dimension getMaximumSize() {
            return size;
        }

        public void tick() {
            x1 = x1 + 1;
            final int waveLength = size.width / frequency;
            yBase = (++yBase) % waveLength;
            final double normalized = (double) yBase / (double) waveLength;
            final double radians = normalized * Math.PI * 2;
            final double sine = Math.sin(radians);
            y1 = (int) (sine * amplitude);
        }
    }
} 
```

# asp.net - 生成代码中的 asp.net 编译器错误

> ID：13519450
> 
> 赞同：0
> 
> 时间：2012-11-22T20:15:41.963
> 
> 标签：asp.net, compilation

我快要为此发疯了。我试图清理和重建，但我不断收到此错误。

我不知道该怎么办。

你有什么建议？

> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

错误信息 ：

> 编译器错误消息：CS0234：命名空间“System”中不存在类型或命名空间名称“Intor32”（您是否缺少程序集引用？）

在文件中

```
Line 1:    //-------------------------------------------------------------------------
Line 2:    // <auto-generated>
Line 3:    //     This code was generated by a tool.
Line 4:    //     Runtime Version:4.0.30319.18010
Line 5:    //
Line 6:    //Changes to this file may cause incorrect behavior and will be lost if
Line 7:    //     the code is regenerated.
Line 8:    // </auto-generated>
Line 9:    //----------------------------------------------------------------------
Line 10:   
Line 11:   using System;
Line 12:   using System.Web;
Line 13:   using System.Web.Profile;
Line 14:   
Line 15:   
Line 16:   
Line 17:   public class ProfileCommon : System.Web.Profile.ProfileBase {
Line 18:       
Line 19:       public virtual System.Intor32 OperatorId {
Line 20:           get {
Line 21:               return ((System.Intor32)(this.GetPropertyValue("OperatorId")));
Line 22:           }
Line 23:           set {
Line 24:               this.SetPropertyValue("OperatorId", value);
Line 25:           }
Line 26:       }
Line 27:       
Line 28:       public virtual ProfileCommon GetProfile(string username) {
Line 29:           return ((ProfileCommon)(ProfileBase.Create(username)));
Line 30:       }
Line 31:   }
Line 32: 
```

它以前工作正常，我不知道我改变了什么。

我没有提到 Intor32（搜索了整个解决方案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:23:43.063

更改`System.Intor32`为`System.Int32`，这个文件是如何生成的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T20:26:40.330

在该部分查看您的`web.config`文件。`system.web/profile/properties`其中一个`<add ... />`元素将具有一个`type="System.Intor32"`属性。将其更改为`type="System.Int32"`，一切都应该没问题。

# java - 在 throws 函数中尝试/捕获

> ID：13519453
> 
> 赞同：-3
> 
> 时间：2012-11-22T20:15:47.970
> 
> 标签：java, exception, exception-handling, try-catch, throws

如果我将 try/catch 放在 throws 函数中，如果出现异常，哪个会运行？

1.  它是否在 catch 子句中执行任何操作，抛出异常或两者兼而有之？

2.  添加更多细节，如果内部范围中的异常是从另一个继承的，反之亦然怎么办？

3.  当 post 不包含参数时，此功能有什么作用？

例子 ：

```
 public void doPost(HttpServletRequest req, HttpServletResponse resp) 
        throws ServletException{
        int number;
    try {
            number = Integer.parseInt(getParameter(req,"number"));
        } catch (Exception e) {
    number = 5;
        }
    } 
```

其中 getParameter 是我的 BaseServlet 类中的一个函数，它扩展了 HttpServlet：

```
protected String getParameter(HttpServletRequest req, String parameter)
    throws ServletException {
    String value = req.getParameter(parameter);
    if (isEmptyOrNull(value)) 
        throw new ServletException("Parameter " + parameter + " not found");

    return value.trim();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:17:53.477

catch 子句将处理`Exception`try 块主体中抛出的任何内容，从而有效地使`throws`声明变得毫无意义。

换句话说，如果调用`getParameter`throws a `ServletException`,`number`将被设置为 5 并且不会抛出任何异常超出该 try-catch 语句的主体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T20:19:29.437

如果您选择同时**处理异常（使用 try/catch）和回避异常（使用 throws 子句）**，编译器会选择**处理异常**。在您的情况下，它将**捕获****异常**并分配`5`给`number`.

## 和一个建议：

在单个 catch 块中处理所有异常是一种不好的做法，即

```
catch(Exception e) 
```

始终捕获大多数特定异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T20:17:57.093

`getParameter()`将抛出 ServletException。中的 catch 子句`post(..)`将处理 try 块主体中抛出的任何异常

它将执行该行：

```
number = 5; 
```

但我不明白你用数字做什么......

我还将建议您将其重构为：

```
catch (ServletException e) {
    number = 5;
} 
```

仅捕获您期望的异常...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T20:18:10.823

它完全按照那里写的：

1.  `getParameter()`会抛出`ServletException`

2.  此异常将从`getParameter()`

3.  里面`try`/里面`catch`会`doPost()`被抓住

4.  `catch`块将通过调用来处理它`number = 5`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T20:18:57.617

您正在讨论所有异常，
所以如果一切正常。number 从 parseInt() 中获取值。

如果这会引发任何异常（通常是 NumberFormatException 或您的 ServeletException），那么您会遇到
异常原因并得到

**值 5**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T20:21:05.403

您的 try-catch 块将始终运行，除非您的 try 块引发 Throwable。

# jquery - 如何将事件 formAddNewRow 添加到可编辑的 Datatable 以创建 FineUploader 对象？

> ID：13519455
> 
> 赞同：1
> 
> 时间：2012-11-22T20:16:03.493
> 
> 标签：jquery, datatables, valums-file-uploader

我正在尝试将文件上传器添加到一个可编辑的 jquery dataTable (http://code.google.com/p/jquery-datatables-editable/)

我尝试在表单中添加一个 div，但fineUploader 保留了上次操作的状态。

```
$(document).ready(function() {
       $('#fine-uploader').fineUploader({
               request: {
                  endpoint: ...

<form id="formAddNewMedia" action="#" title="Agregar un elemento">
<div id="fine-uploader"></div>
<label for=.... 
```

有一种方法可以将所有 UI 元素重置为它们在初始化后立即存在的状态......但我认为 fileUploader 应该使用表单激活构建并在它关闭后销毁。

类似于回调 fnOnAddNewRow 的东西：

```
 var oTable = $('#media_table').dataTable({
        "sScrollY": "200px",
        "bScrollCollapse": true,
        "bPaginate": false,
        "sAjaxSource": "/ajax_library_media.txt",
        "bProcessing": true,
        "oLanguage": {
            "sUrl": "assets/js/dataTables.spanish.txt"
        },
        "bJQueryUI" : true
        }).makeEditable({

        sUpdateURL: "update_media.php",
                    sAddURL: "add_media.php",
                    fnOnAddNewRow (function() {
                        $('#fine-uploader').fineUploader({
                        request: {
                        endpoint: ... 
```

我认为可以在 jquery.dataTables.editable.js 中添加

```
 //Setup form to open in dialog
        oAddNewRowForm = $("#" + properties.sAddNewRowFormId);
        if (oAddNewRowForm.length != 0) {
            if (properties.oAddNewRowFormOptions != null) {
                properties.oAddNewRowFormOptions.autoOpen = false;
            } else {
                properties.oAddNewRowFormOptions = { autoOpen: false };
            }
            oAddNewRowForm.dialog(properties.oAddNewRowFormOptions);

            //Add button click handler on the "Add new row" button
            oAddNewRowButton = $("#" + properties.sAddNewRowButtonId);
            if (oAddNewRowButton.length != 0) {
                oAddNewRowButton.click(function () {
                    oAddNewRowForm.dialog('open');

                });
            } else {
                if ($(properties.sAddDeleteToolbarSelector).length == 0) {
                    throw "Cannot find a button with an id '" + properties.sAddNewRowButtonId + "', od placeholder with an id '" + properties.sAddDeleteToolbarSelector + "' that should be used for adding new row although form for adding new record is specified";
                } else {
                    oAddNewRowButton = null; //It will be auto-generated later
                }
            } 
```

使用 oAddNewRowForm.dialog('open'); 打开对话框的位置

任何人都有节省睡眠的想法？！

# cuda - nvcc：找不到命令

> ID：13519459
> 
> 赞同：5
> 
> 时间：2012-11-22T20:16:25.640
> 
> 标签：cuda, nvcc

我将 cuda sdk 5.0 安装到 /opt 甚至编译了所有示例，但我无法执行 nvcc。这是一些控制台输出： ![在此处输入图像描述](../Images/2374be47d5b9d632fbb51fbb674228c4.png) 我正在使用 linux mint 13。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T20:23:22.610

更新

我对 .bash_profile 进行了多次更改，现在找到了 nvcc。这是.bash_profile：

```
export LPATH=$LPATH:/usr/lib/nvidia-current:/opt/bin:/opt/lib64:/opt/lib
export LIBRARY_PATH=$LIBRARY_PATH:/usr/lib/nvidia-current:/opt/lib64:/opt/lib
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/lib/nvidia-current:/opt/lib64:/opt/lib
export PATH=$PATH:/opt/bin:/opt/lib64:/opt/lib 
```

# rest - 从 URL 覆盖请求 Content-Type 标头和派生类型

> ID：13519460
> 
> 赞同：1
> 
> 时间：2012-11-22T20:16:27.487
> 
> 标签：rest, http-headers, content-type

我对 REST API 的 HTTP 合规性有疑问。在设计 REST API 接口时是否建议覆盖/忽略请求正文中的“ *Content-Type* ”标头，而是从 URL 中提供的信息中派生内容类型？

例如，是否有理由允许以下示例：

```
POST /url.xml
Content-Type: application/x-www-form-urlencoded

<?xml version="1.0"?>
<xml>
...
</xml> 
```

在此工作流程中，内容类型由 URL 上的“.xml”扩展名确定，这是非标准的。一般来说，依靠非标准代替标准是不好的做法。但是，如果开发人员未指定，某些 REST API 客户端将自动添加默认内容类型。

有没有理由脱离标准并覆盖请求实体中的内容类型？这不会破坏网络上的互操作性吗？

# mysql - MySQL存储过程，仅在特定条件下更新

> ID：13519467
> 
> 赞同：2
> 
> 时间：2012-11-22T20:16:55.460
> 
> 标签：mysql, sql, stored-procedures

存储过程将接受 firstName、lastName、currentPostalCode 和 newPostalCode 作为参数。只有当有一个人具有给定的 firstName、lastName 和 currentPostalCode 时，我才想更新 postalCode 列。

这是怎么做到的？您是否使用子查询或 MySQL IF() 或其他东西？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:30:23.127

您不需要任何花哨的条件逻辑来执行此操作，只需`UPDATE`带有`WHERE`子句的常规语句即可。`WHERE`如果子句没有匹配任何行，则不会发生更新。

```
/* Update the records with matching name & postcode */
UPDATE  yourtable
  SET postalCode = 'newPostalCode'
WHERE
  /* If all 3 conditions don't match, nothing gets updated */
  firstName = 'firstName'
  AND lastName = 'lastName'
  AND postalCode = 'oldPostalCode' 
```

作为存储过程：

```
CREATE PROCEDURE updatePostalCode (
  IN in_firstName VARCHAR(64),
  IN in_lastName VARCHAR(64),
  IN in_oldPostalCode VARCHAR(16),
  IN in_newPostalCode VARCHAR(16)
)
BEGIN
  UPDATE yourtable 
  SET
    postalCode = in_newPostalCode 
  WHERE 
    lastName = in_lastName 
    AND firstName = in_firstName 
    AND postalCode = in_oldPostalCode;
END 
```

### 附录：如果你真的只想在只有一个匹配的情况下这样做......

要仅在恰好有一个匹配行（不是 2 个或更多）的情况下更新，您仍然可以使用普通的更新语句，在`WHERE`子句中添加一个额外的子查询

```
UPDATE  yourtable
  SET postalCode = 'newPostalCode'
WHERE
  /* If all 3 conditions don't match, nothing gets updated */
  firstName = 'firstName'
  AND lastName = 'lastName'
  AND postalCode = 'oldPostalCode'
  /* Result of count subquery = 1 */
  AND (
    SELECT COUNT(*) AS matched 
    FROM yourtable 
    WHERE firstName = 'firstName' AND lastName = 'lastName' AND postalCode = 'oldPostalCode'
  ) = 1 
```

### 附录 2 如果不完全匹配则错误退出：

```
CREATE PROCEDURE updatePostalCode (
  IN in_firstName VARCHAR(64),
  IN in_lastName VARCHAR(64),
  IN in_oldPostalCode VARCHAR(16),
  IN in_newPostalCode VARCHAR(16)
)
BEGIN
  DECLARE num_matched INT;
  SET num_matched = (SELECT COUNT(*) FROM yourtable WHERE firstName = 'firstName' AND lastName = 'lastName' AND postalCode = 'oldPostalCode');

  IF (num_matched <> 1) THEN 
     /* Trigger an error and exit */
     LEAVE updatePostalCode
  END IF

  /* Perform the UPDATE statement */
END 
```

# c# - 不支持协议“net.tcp”

> ID：13519468
> 
> 赞同：-1
> 
> 时间：2012-11-22T20:17:18.283
> 
> 标签：c#, visual-studio-2010, wcf, nettcpbinding

我正在将我的 wcf 托管从 Windows 服务更改为托管在 IIS 中。

我在我的解决方案中添加了一个 wcf 服务应用程序，我添加了对我的项目的引用并将 svc 文件编辑到这个

```
<%@ ServiceHost Language="C#" Debug="true"
Service="EFG.Acc.CashService.ServiceFactory.CashService" %> 
```

然后我已经配置`web.config`并定义了 netTcp 绑定和端点的绑定。

我已将我的 IIS 网站设置启用为 http.nettcp 的启用协议和相同的异常。

浏览我的 service.svc 文件时出现此异常：

```
**protocol 'net.tcp' is not supported. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 
Exception Details: System.InvalidOperationException: The protocol 'net.tcp' is not supported.
Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  
Stack Trace: 
[InvalidOperationException: The protocol 'net.tcp' is not supported.]
   System.ServiceModel.Activation.HostedTransportConfigurationManager.InternalGetConfiguration(String scheme) +98668
   System.ServiceModel.Activation.HostedAspNetEnvironment.GetBaseUri(String transportScheme, Uri listenUri) +24
   System.ServiceModel.Channels.TransportChannelListener.OnOpening() +12200164
   System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) +274
   System.ServiceModel.Channels.DelegatingChannelListener`1.OnOpen(TimeSpan timeout) +112
   System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) +318
   System.ServiceModel.Dispatcher.ChannelDispatcher.OnOpen(TimeSpan timeout) +72** 
```

这是我的 Web.config 文件

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="false" targetFramework="4.0" />
  </system.web>

  <system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding name="NetTcpBinding"
                 transactionFlow="true"
                 listenBacklog="100"
                 maxConnections="5000"/>
      </netTcpBinding>
    </bindings>
    <services>
      <service name="EFG.Acc.CashService.ServiceFactory.CashService">
        <endpoint address="net.tcp://localhost:8000" binding="netTcpBinding"
          bindingConfiguration="NetTcpBinding" name="netTcpEndPoint" bindingName="CashServiceTCP"
          contract="EFG.Acc.CashService.Contracts.Interfaces.ICashService" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:7000"/>

          </baseAddresses>
        </host>

      </service>
    </services>
    <protocolMapping>
      <add scheme="net.tcp" binding="netTcpBinding" bindingConfiguration="NetTcpBinding"/>
    </protocolMapping>
    <behaviors>
      <serviceBehaviors>
        <behavior>
           <!--To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment--> 
          <serviceMetadata httpGetEnabled="true"/>
           <!--To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information--> 
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <client>
      <endpoint address="net.tcp://localhost:8000/CashService" binding="netTcpBinding" bindingConfiguration="NetTcpBinding" contract="EFG.Acc.CashService.Contracts.Interfaces.ICashService" name="CashServiceTCP2" />
    </client>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />

  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:42:10.223

尝试仔细阅读：http: [//blogs.msdn.com/b/james_osbornes_blog/archive/2010/12/07/hosting-in-iis-using-nettcpbinding.aspx](http://blogs.msdn.com/b/james_osbornes_blog/archive/2010/12/07/hosting-in-iis-using-nettcpbinding.aspx)

+

*   您正在使用带有 http baseAddress 的 nettcpbinding

*   在测试时添加元数据端点

*   我多次使用与 IIS 的 nettcp 绑定，而且每次都没有“protocolMapping”

*   我建议仅在 baseAddress 中使用绝对地址（匹配协议 net.tcp://！）和相对 - 在端点地址中

# ruby-on-rails - Rails 中 if/else 部分渲染的快捷方式？

> ID：13519469
> 
> 赞同：2
> 
> 时间：2012-11-22T20:17:25.493
> 
> 标签：ruby-on-rails, partial-views

我在某处看到了类似的东西（特别是如果一个实体为零，则不显示部分），但我似乎无法复制该功能。有没有办法简写以下内容？

```
<% if @sales_orders.any? %>                             
<%= render @sales_orders %>                             
<% else %>                             
<%= render 'shared/no_records' %>
<% end %> 
```

就像是：

```
<%= render @sales_orders || 'no records found' %> 
```

或（伪，但你明白了）：

```
<%= @sales_orders ? render(@sales_orders) : render('shared/no_records') %> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T20:21:07.207

你和你的伪非常接近，我认为：

```
<%= render(@sales_orders.any? ? @sales_orders : 'shared/no_records') %> 
```

# xaml - Windows 8 中的主题转换 Z-Index

> ID：13519472
> 
> 赞同：3
> 
> 时间：2012-11-22T20:17:37.517
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我在重叠的元素上有主题转换（入口和内容设置偏移）。问题是当主题转换被购买到页面的前面时，动画元素不可靠地相互重叠，当它返回到正确的 z-index 时会导致令人讨厌的转换。

元素在可视树中的结构或应用于元素的 z-index 似乎并不重要，问题仍然存在。

非常感谢任何帮助 - 理想情况下，我希望避免编写故事板，但我对这种情况下的入口/内容转换感到满意！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:02:02.740

我决定了类似的问题：位置：相对；过渡：全部...（全部包括 Z-Index）我制作了 Z-Index:4 和“HOVERed”元素 Z-Index:2000。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T23:41:27.223

我自己也遇到了类似的问题。以下是您可以尝试的一些事情：

1.  确保在动画结束时观察到的“正确”z 顺序确实是正确的。如果物品具有您想要的 z 顺序，请在您的物品上贴上一些标签

2.  确保根据项目的 z 顺序将项目添加到控件中。如果您使用绑定，请确保您添加到集合中的项目按其 z-index 排列

3.  如果您使用的是 PrepareContainerForItemOverride，请确保您的绑定的逻辑是正确的

希望有帮助，米海

# java - Clickatell Connect API - 未找到 XML 数据

> ID：13519476
> 
> 赞同：0
> 
> 时间：2012-11-22T20:17:54.350
> 
> 标签：java, post, https, xml-parsing, clickatell

我正在尝试使用 Clickatell 的 Connect API ( [http://www.clickatell.com/downloads/Clickatell_Connect_API_User_Guide.pdf?cid=205655](http://www.clickatell.com/downloads/Clickatell_Connect_API_User_Guide.pdf?cid=205655) ) 来创建用户并发送短信。Clickatell 的 API 为您提供了一个特定的 URL，您必须将区分大小写的 XML 作为 HTTPS 表单帖子提交。

我写了以下简单的xml

```
<?xml version="1.0"?>
<CLICKATELLSDK>
<Action>get_list_country</Action>
</CLICKATELLSDK> 
```

我已经在线使用了各种代码示例（一些来自stackoverflow的答案，其他来自谷歌搜索 - 即[http://www.java-tips.org/other-api-tips/httpclient/how-to-send-an- xml-document-to-a-remote-web-server-using-http-5.html](http://www.java-tips.org/other-api-tips/httpclient/how-to-send-an-xml-document-to-a-remote-web-server-using-http-5.html)）关于如何将其作为 HTTPS POST 提交，但我总是得到以下响应。

```
<?xml version="1.0"?>
<CLICKATELLSDK>
<Result>Error</Result>
<Error>999</Error>
<Description>No XML Data found</Description>
<Timestamp>1353538744</Timestamp>
</CLICKATELLSDK> 
```

任何人使用 Clickatell 的 Connect API 可以帮助我，或者有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:38:08.393

我设法使用以下代码使其工作

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.HttpURLConnection;
import java.net.URL;

public class HttpPost {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        String postUrl = "https://connect.clickatell.com/[AuthenticationToken]";

            try {
                String tStatus = "";
                URL url = new URL(postUrl + "&XML=<clickatellsdk><action>get_list_country</action></clickatellsdk>");

                BufferedReader br = new BufferedReader(new InputStreamReader(url.openStream()));

                String line;
                while ((line = br.readLine()) != null)
                {
                    tStatus = line;
                    System.out.println(tStatus);
                }

            } catch (Exception e)
            {
                //Handle Exception
            }

    }

} 
```

如果您不正确，请告诉我，以便我们进一步解决！

# php - 具有多个连接的查询和返回的结果太多

> ID：13519478
> 
> 赞同：0
> 
> 时间：2012-11-22T20:18:01.293
> 
> 标签：php, mysql, database, jointable

我是 php 和 mysql 的新手，我正在尝试 2 天来创建一个 Web 应用程序，它可以从表单中存储有关用户的特定数据，而不是允许用户基于类似的稍微复杂的表单进行搜索。我让表单工作并输入到数据库，但我在从 mysql 接收数据时遇到问题，也许将来我也会使用搜索功能，但我还没有考虑太多。现在我专注于从 db 获取特定数据。

```
SELECT players.*, 
    brackets.name AS interested_in, 
    classes.name AS looking_for,
    tags.name AS tagged_with 
FROM players JOIN player_brackets ON (players.id = player_brackets.player_id) 
JOIN brackets ON (player_brackets.bracket_id = brackets.id) 
JOIN player_classes ON (player_brackets.player_id = player_classes.player_id) 
JOIN classes ON (player_classes.class_id = classes.id) 
JOIN player_tags ON (player_classes.player_id = player_tags.player_id) 
JOIN tags ON (player_tags.tag_id = tags.id) 
WHERE players.id = '18' 
```

我有这个工作正常的查询，但我从中获得的数据是数据库中数据的每一个组合，现在大约有 100 多个结果几乎相同。它将结果乘以数据库中的字段数，例如播放器 (1) * 括号 (3) * 类 (11) * 标签 (5)，它将输出 165 行几乎相同的数据，但字段括号、类的差异和标签。

如果我将结果分组，`players.id`我只会得到一行，但其他字段的数据会丢失。我想得到 1 行，它将包含所有这些（可能在一个数组中包含多个数据）。

DB 有 7 个表格 - 球员、标签、班级、括号和 3 个表格，其中包含球员 ID 和标签/班级/括号 ID 组合。

我一直在搜索网络和 SO，但没有什么真正帮助我。如果有人可以帮助我解决这个问题，那就太好了。感谢您的回复，我很抱歉我的英语不好，它不是我的主要语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:03:39.523

当您加入时，MySQL 将为您提供各种组合。

如您所见，您可以 GROUP BY，但它只会给您一种组合。

我认为您正在寻找一系列查询（“获取玩家 1 的所有括号”然后“获取括号 12 中玩家 1 的所有类”等）。

或者您可以在您的应用程序中智能地解析结果。

还有 GROUP_CONCAT，但这很少能满足任何人的需求（因为它作为一个字符串返回）。

# sql - 从 2 个表中选择查询 SQL

> ID：13519479
> 
> 赞同：0
> 
> 时间：2012-11-22T20:18:02.710
> 
> 标签：sql

好的，你好，我有 2 张桌子

路由表有

```
route ID, frequency, start destination, final destination 
```

和

操作表

```
Proportion, Operator name, Route ID 
```

我需要选择运营商名称为 Arriva 的路线 ID 和频率。

我将这个 SQL 放在一起，它可以工作并得到结果，但我不确定这是否是正确的做法。

```
SELECT route_number, frequency
FROM route, operates
WHERE route_ID = route_number
AND operator_name =  'Arriva' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:23:36.563

这是正确的方法，只是您的第一个 where 语句是错误的：

```
SELECT route_number, frequency
FROM route, operates
WHERE route_ID = **route_number**
AND operator_name =  'Arriva' 
```

它也应该是 route_ID （至少从你所说的）。为了使它工作，您需要为您的表命名，以便 SQL 知道您正在比较哪些列（因为两个表中的名称相同）。像这样：

```
SELECT 
    route_number, 
    frequency
FROM 
    route r, 
    operates o
WHERE 
    r.route_ID = o.route_number
    AND o.operator_name =  'Arriva' 
```

# java - 如何创建jar依赖？

> ID：13519481
> 
> 赞同：1
> 
> 时间：2012-11-22T20:18:06.847
> 
> 标签：java, eclipse

项目 P2 依赖于 P1，但反之则不然。我想用 P2 做一个罐子。一种方法是将 P2 导出到 jar，然后将 P1 和其他 jar 打包到 P2 中。

但是，我想在 P2 中不包含 P1 的情况下这样做。我该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:50:14.580

您是否阅读过这个问答：[如何在清单文件中指定依赖项，然后将其包含到我的 .jar 文件中？](https://stackoverflow.com/questions/2592115/how-can-i-specify-dependencies-in-the-manifest-file-and-then-to-include-it-into)我认为它可能对您的问题有用。在 P2 Manifest 文件中声明 P1 的依赖关系的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:42:44.717

只需将两者打包成罐子并交付即可。交付在类路径上运行您的程序 p2 和 p1 的批处理文件。

为什么不考虑使用 maven 或 gradle？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T20:21:06.290

实际上取决于 P2 的使用情况。通常你只需将 P2 打包到 jar 中，并在文档中声明依赖项。然后当实际使用发生时，有人需要在类路径中添加 P1 和 P2。

# facebook - 在 Windows Azure 中使用 Facebook 作为 IP 的联合身份验证

> ID：13519485
> 
> 赞同：0
> 
> 时间：2012-11-22T20:18:20.557
> 
> 标签：facebook, azure, acs, federated-identity

我的问题的所有答案都导致了一年前的文档（[http://msdn.microsoft.com/en-us/library/windowsazure/gg185919.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg185919.aspx)）不再正确 - “获取 Facebook 应用程序 ID 和Facebook Application Secret”描述了不能在今天的 Facebook 网站上为开发人员使用的过程。

我希望有 Facebook 经验的人能给我这个 7 步长过程的“当前版本”，描述为：

1.  [在http://facebook.com](http://facebook.com)创建一个 Facebook 帐户
2.  导航到[http://www.facebook.com/developers/](http://www.facebook.com/developers/) （*我的注释：这是错误的 - 网址应该是 developers.facebook.com*）
3.  在脸书上 | 开发人员页面，单击 + 设置新应用程序按钮，然后按照说明进行操作。（*什么指令*）
4.  在脸书上 | 编辑<>页面，点击左侧的Web Site链接。（*没有这样的链接*）
5.  复制应用程序 ID 和应用程序密钥。在下一步中将 Facebook 配置为 ACS 管理门户上的身份提供者时，您将使用这些
6.  指定命名空间的完全限定域名 (FQDN) URL，包括前导 HTTPS。您的命名空间会有所不同。
7.  单击保存更改按钮

第 6 步是最大的问题 - 它是将 Azure ACS 特定信息插入 Facebook 的世界，并且无法在 Facebook 应用程序表单创建中找到该字段所属的字段。显然，我对 Facebook 的应用程序创建一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:45:37.177

抱歉@nikivancic 无法亲自尝试，但我认为您正在寻找的是应用程序设置。

在Facebook

*   单击刚刚创建的应用程序右上角的编辑按钮
*   在左侧菜单的设置下，单击基本（您可能已经在那里）
*   在“选择您的应用如何与 Facebook 集成”下，单击“使用 Facebook 登录的网站”选项

这将显示一个文本框，用于输入登录时重定向到的 url - 我相信这是您需要在 ACS 中输入指向您的命名空间的 URL 的地方。

再次 - 很抱歉现在无法对其进行测试，但请尝试遵循此操作，看看是否有效

# c++ - 从二叉树中删除并找到一个节点

> ID：13519494
> 
> 赞同：2
> 
> 时间：2012-11-22T20:19:38.110
> 
> 标签：c++, binary-tree, treenode

我正在为普通的二叉树（不是搜索）创建“查找”和“删除”功能。下面是查找函数的代码：

```
bool Find_Node(FileItem * item, Node *current )  //function starts with root
{
    if (current->getNameItem() == item->getName() )  //getNameItem() retrieves the data name in node.
    {
        currentItem = current;   //I have set currentItem as an attribute ( pointer to a Node ) in the tree class. I created it to point to the node I want to find.
        return true;
    }
    Node* child [2];

    child[0] = current->getLeft();
    child[1] = current->getRight();

    bool res = false;

    for (int i = 0; res == false && i < 2 ; i++) 
    {   
        if(child[i] != NULL)
            res = Find_Node(item, child[i]);
    }
    return res;
} 
```

有没有更好的方法来查找节点？可能有人请帮助我删除功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:30:17.973

添加基本​​案例`NULL`以使逻辑简单。

```
bool Find_Node(FileItem * item, Node *current )
{
    if(current == NULL ) return false;
    if (current->getNameItem() == item->getName() ) {
        currentItem = current;
        return true;
    }
    return Find_Node(current->getLeft()) || Find_Node(current->getRight());
}

void Delete_Node(Node*& current)
{
    if(current == NULL) return;
    Delete_Node(current->getRight());
    Delete_Node(current->getLeft());
    delete current;
    current = NULL;
} 
```

如果我能看到 Node 的实现，我可以告诉你如何实现`swap`你需要的功能

如果树真的很大，这可能会导致堆栈溢出。但是可以通过将解决方案从递归解决方案更改为迭代解决方案来解决该问题。

# ios - performSelectorOnMainThread 调用太早

> ID：13519499
> 
> 赞同：0
> 
> 时间：2012-11-22T20:20:15.257
> 
> 标签：ios, xcode, uiimage, performselector

XCode 4.5.2；我正在从这样的远程服务器下载图像：

```
- (void)viewDidLoad
{
[super viewDidLoad];

NSOperationQueue *queue = [NSOperationQueue new];
NSInvocationOperation *operation = [[NSInvocationOperation alloc]
                                    initWithTarget:self
                                    selector:@selector(loadImage)
                                    object:nil];

[queue addOperation:operation];
}

- (void)loadImage{
self.theobject = [RemoteQuery loadObjectWithImage:self.imageKey];

[self performSelectorOnMainThread:@selector(displayImage) withObject:nil waitUntilDone:YES];
}

-(void)displayImage{
UIImage *image = [UIImage imageWithData: self.theobject.imageData];
[self.imageView setImage:image];

} 
```

这在 IOS 模拟器上运行良好，但在设备上不起作用；似乎在从 [RemoteQuery loadImage] 加载数据之前调用了 displayImage。在显示之前确保图像已正确加载的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:38:02.840

创建一个委托协议，该协议将在图像下载完成时回调原始对象。这个[NSOperation 教程](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)有更多关于如何做到这一点的细节

或者，使用`NSOperation`'s`completionBlock`来执行图像显示。

# sql-server - 在流中捕获选择性异常

> ID：13519500
> 
> 赞同：2
> 
> 时间：2012-11-22T20:20:21.373
> 
> 标签：sql-server, try-catch

某些操作失败时会产生多个异常。考虑以下：

```
use tempdb
go
create table x (i int, s char(32))
go
create table y (a int, xi int)
go
alter table y add constraint y_xi foreign key (xi) references x(i)
go 
```

生成：

> 消息 1776，级别 16，状态 0，第 1 行被引用的表“x”中没有与外键“y_xi”中的引用列列表匹配的主键或候选键。
> 
> 消息 1750，级别 16，状态 0，行 1 无法创建约束。请参阅以前的错误。

如果要围绕此操作包装 try/catch，则只能选择*最后一个*异常，而第一个实际上更有趣：

```
begin try
    alter table y add constraint y_xi foreign key (xi) references x(i)
end try
begin catch
    print error_number()
end catch 
```

生成 1750 - 这告诉我无法创建约束，但不知道为什么。1776 会更有用，但我不知道如何拿起它。

任何人的想法？

TIA-e！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T16:37:22.607

所以答案是无法做到。显然，SQL Server 2012 以某种方式根据本文解决了该问题：

[http://social.msdn.microsoft.com/Forums/sqlserver/en-US/3476a931-3db7-4017-9fbe-e082f2de2cb0/sql-server-trycatch-inner-exception-message-conundrum?forum=transactsql](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/3476a931-3db7-4017-9fbe-e082f2de2cb0/sql-server-trycatch-inner-exception-message-conundrum?forum=transactsql)

感谢@user3973227 指出这一点！

# string - 多重分裂

> ID：13519512
> 
> 赞同：2
> 
> 时间：2012-11-22T20:21:07.043
> 
> 标签：string, powershell, split

我需要更好的方法来做这件事有什么想法吗？

```
$strOutput = "800x600, 32 bits @ 60 Hz."

      # Initial split
$aSplitString = $strOutput.Split(",")

# Get Horizontal and Vertical Length
$aSplitString2 = $aSplitString[0].Split("x")
$strHorizontal = $aSplitString2[0]
$strVertical = $aSplitString2[1]
$aSplitString2 = $null

#Get Color Depth and Frequency
$aSplitString2 = $aSplitString[1].Split(" ")
$strColour = $aSplitString2[1]
$strFrequency = $aSplitString2[4] 
```

不喜欢在一个字符串上使用这么多拆分函数。我还能做什么？

在上面的示例中，我试图将各个分辨率大小、颜色深度和频率转换为它们的 on 变量；

水平 = 800 垂直 = 600 颜色 = 32 频率 = 60

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T20:27:41.180

我发现我们可以将一个字符数组传递给 split 函数。
因此，在一行中：

```
PS C:\Windows\system32> "800x600, 32 bits @ 60 Hz.".split(@("x",","," "))
800
600

32
bits
@
60
Hz. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T20:28:09.230

一种方法是：

```
$strOutput = "800x600, 32 bits @ 60 Hz."
$splitted = $strOutput -replace '\D',' ' -split '\s+'
$strHorizontal = $splitted[0] 
$strVertical = $Splitted[1]
$strColour = $splitted[2]
$strFrequency = $splitted[3] 
```

# javascript - BackboneJS collection.reset() 与 collection.fetch()

> ID：13519515
> 
> 赞同：16
> 
> 时间：2012-11-22T20:21:24.973
> 
> 标签：javascript, backbone.js

我已经阅读并阅读了关于这两种方法的文档，但是对于我的一生来说，为什么你可能会使用另一种方法？

有人可以给我一个基本的代码情况，一个是应用程序，另一个不是。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-23T05:51:55.777

[`reset`](http://backbonejs.org/#Collection-reset)使用您指定的模型数组设置集合：

```
collection.reset( [ { name: "model1" }, { name: "model2" } ] ); 
```

[`fetch`](http://backbonejs.org/#Collection-fetch)使用您为集合指定的 URL 从服务器检索集合数据。

```
collection.fetch( { url: someUrl, success: function(collection) {
    // collection has values from someUrl
} } ); 
```

* * *

[这是一个说明差异的小提琴。](http://jsfiddle.net/suN5n/5/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T05:48:24.760

我们假设您已经阅读了[文档](http://backbonejs.org/)，否则这里会有些混乱。

如果您查看[fetch](http://backbonejs.org/#Collection-fetch)和[reset](http://backbonejs.org/#Collection-reset)的文档，它说的是，假设您指定了- 的`url`属性，该属性`collection`可能指向某些服务器代码，并且应该返回一个`json`数组`models`，并且您希望`collection`填充`models`存在返回，您将使用`fetch`.

例如，您在集合 url 上从服务器返回以下 json：

```
[{
  id : 1, 
  name : "a"
 }, {
  id : 2, 
  name : "b"
 }, {
  id : 3, 
  name : "c"
 }] 
```

成功获取后，它将在您的集合中创建 3 个模型。如果您寻找`collection fetch` [此处](https://github.com/documentcloud/backbone/blob/master/backbone.js)的代码，您将看到 fetch 将获得响应，并且在内部将调用`reset`或`add`基于指定的选项。

所以，回到讨论，`reset`假设我们已经有了`json of models`，我们想要存储在集合中，我们将把它作为参数传递给它。在你的生活中，如果你想更新集合并且你已经在客户端拥有模型，那么你不需要使用`fetch`，`reset`会做你的工作。

因此，如果您想借助 reset 将相同的 json 填充到集合中，您可以执行以下操作：

```
var _self = this;
$.getJSON("url", function(response) { 
  _self.reset(response); // assuming response returns the same json as above
}); 
```

好吧，这不是要遵循的做法，因为这种情况`fetch`更好，它只是用于示例。

另一个重置示例在[文档](http://backbonejs.org/#Collection-reset)页面上。

希望它能给你一点想法，让你的生活更美好:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T20:50:19.120

reset() 用于用新数组替换集合。例如：

```
@collection.reset(@full_collection.models) 
```

但是会加载@full_collections 模型

```
@collection.reset() 
```

将返回空集合。并且 fetch() 函数返回模型的默认集合

# mysql - 选择多个表

> ID：13519516
> 
> 赞同：0
> 
> 时间：2012-11-22T20:21:34.827
> 
> 标签：mysql, sql, join

这是我要查询的数据库结构的一部分：

![数据库结构](../Images/f073c0ed30e0d04a79a1944f14b3bd0c.png)

关系如下：

*   article.art_author - user.usr_id
*   article.art_id - tag_article.rel_art_id
*   tag_article.rel_tag_id - tag.tag_id

如果可能，我想在一个查询中选择从选定用户（按 usr_id）或具有选定标签（按 tag_id）的文章。

我已经尝试过了，但没有给我想要的结果：

```
SELECT * FROM 
                ((article JOIN user on article.art_author = user.usr_id)
                JOIN
                tag_article on article.art_id = tag_article.rel_art_id)
                JOIN
                tag on tag_article.rel_tag_id = tag.tag_id
                WHERE
                article.art_lang = '$cur_lang'
                $sql_in
                ORDER BY
                article.art_date desc
                LIMIT $first_record, $range 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:28:18.803

```
select distinct a.art_id
from article a,
    user u,
    tag_article ta,
    tag t
where a.art_author=u.user_id
    and ta.rel_art_id = a.art_id
    and ta.rel_tag_id = t.tag_id
    and (u.usr_id in (<your selected users>) or t.tag_id in (<your selected tag>)) 
```

我写了所有的关节，所以你可以选择你想要的所有列，但如果你只需要文章数据，它可以更快地完成：

```
select a.art_id
    from article a,
    tag_article ta
where a.art_id=ta.rel_art_id
    and (a.art_author in (<your selected users>) or ta.rel_tag_id in (<your selected tags>)) 
```

# regex - 在 Sublime Text 2 语法定义中编写正则表达式和规则

> ID：13519517
> 
> 赞同：1
> 
> 时间：2012-11-22T20:21:36.383
> 
> 标签：regex, sublimetext2

我[对 Sblime 文本 2 的语法定义非常感兴趣](http://docs.sublimetext.info/en/latest/extensibility/syntaxdefs.html)

我已经学习了基础知识，但我不知道如何为 smth 编写 RE（和规则） `variable = sentense`，即`myvar = func(foo, bar) + baz`

我写不出比`^\s*([^=\n]+)=([^=\n]+\n)`（那行不通）更好的东西如何以正确的方式编写此 RE？

另外，我在为块定义 RE 时遇到了一些困难

```
IF i FROM .. TO ..
    ...
ELSE
    ...
END IF 
```

锄头写吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T03:06:53.580

在这种情况下，您必须编写一个解析器。正则表达式不起作用，因为模式可能会有所不同。当您说“变量=句子”时，您已经注意到了。为此，您可以使用 spoofax 或 javacup 进行语法定义。我会给你一个JavaCup的片段：

扫描仪问题：假设“变量”遵循模式：(_|[a-zA-Z])(_|[a-zA-Z])* 和“数字”为：([0-9])+ 请注意number 可以是任何小数或整数，但在这里我将其声明为该模式，假设我的语言仅处理整数（或该模式的任何含义:)）。

现在我们可以按照 JavaCUP 语法声明我们的语法。这或多或少像：

表达式 ::= 变量 "=" 句子

句子 ::= 句子 "+" 句子；
句子 ::= 句子“-”句子；
句子 ::= 句子 "*" 句子；
句子 ::= 句子 "/" 句子；

句子 ::= 数字；

...而且更进一步。

如果你从未有过任何编译器的类，它可能看起来很难看。另外，在解析器中避免无限循环有很多语法限制，具体取决于您使用的是哪个（RL 或 LL）。

无论如何，你的问题的真正答案是：你不能只用正则表达式做你想做的事，我需要更多的概念。

# django - SORL 缩略图 Django - 304

> ID：13519518
> 
> 赞同：0
> 
> 时间：2012-11-22T20:21:47.317
> 
> 标签：django, caching

我正在维护一个 Django 站点，该站点使用 SORL 生成书籍封面的缩略图。在搜索性能问题和带宽消耗问题时，我注意到要求书的缩略图总是提供文件，我从来没有得到 304-Not Modified。

有没有办法（除了提供静态文件）在客户端缓存这些图像？每次我访问相同的页面（和相同的拇指）时，我都希望看到 304 而不是 200。

Tx约里

# android - 使用 Android 意图播放多首歌曲

> ID：13519519
> 
> 赞同：2
> 
> 时间：2012-11-22T20:21:52.610
> 
> 标签：android, android-intent, audio-player, android-music-player

在我的应用程序中，我需要启动 Android 音乐播放器。而且，就目前而言，它可以完美运行：

```
Intent  intent = new Intent(android.content.Intent.ACTION_VIEW); 
File    file = new File(file_path);

intent.setDataAndType(Uri.fromFile(file), "audio/*");  
startActivity(Intent.createChooser(intent, "...")); 
```

但是用户不能使用“下一个”和“上一个”按钮来切换音乐。这就是为什么我尝试一次启动多首歌曲（一个播放列表）。而且我真的不知道该怎么做！给意图一个数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T20:34:31.317

据我所知，没有办法启动多个轨道。但是您可以使用 MediaPlayer 类来实现您的播放器。它也不支持多轨。所以你还必须做一个服务，使用 OnCompletionListener 来监听曲目完成时，开始下一个曲目。

此线程将有所帮助： [Android 媒体播放器如何在应用关闭时继续播放歌曲？](https://stackoverflow.com/questions/6668298/how-do-android-mediaplayers-continuing-playing-songs-when-app-is-closed)

还有这个： [启动默认音乐播放器，默认播放音乐](https://stackoverflow.com/questions/10329289/start-default-music-player-with-music-playing-by-default)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-13T05:53:08.210

是的，他们不是使用 intent 获取多首歌曲的直接方法。但您可以获取选定的歌曲。**通过您的代码一一播放。使用媒体播放器。** 在队列中设置歌曲。 **为了您的目的，您必须制作自己的媒体播放器。**

使用此代码选择多首歌曲[sourcetopickmultiplesongs](https://github.com/shujat89/androidMultiSongSelectGallery)；

存储选定的歌曲数组。

使用这段代码一个接一个地播放。

```
MediaPlayer mp1=MediaPlayer.create(getBaseContext(), R.raw.sound1);  
MediaPlayer mp2=MediaPlayer.create(getBaseContext(), R.raw.sound2);         

mp1.prepare();
mp2.prepare();   
mp1.start();
mp1.setNextMediaPlayer(mp2); 
```

希望这可以帮助 。

# python - Python中点积的元素平均值（numpy）

> ID：13519521
> 
> 赞同：2
> 
> 时间：2012-11-22T20:21:59.847
> 
> 标签：python, numpy, scipy

我有两个 numpy 矩阵（或稀疏等价物），例如：

```
>>> A = numpy.array([[1,0,2],[3,0,0],[4,5,0],[0,2,2]])
>>> A
array([[1, 0, 2],
       [3, 0, 0],
       [4, 5, 0],
       [0, 2, 2]])
>>> B = numpy.array([[2,3],[3,4],[5,0]])
>>> B
array([[2, 3],
       [3, 4],
       [5, 0]])

>>> C = mean_dot_product(A, B)
>>> C
array([[6   ,  3],
       [6   ,  9],
       [11.5, 16],
       [8   ,  8]]) 
```

在哪里`C[i, j] = sum(A[i,k] * B[k,j]) / count_nonzero(A[i,k] * B[k,j])`

有一种快速的方法可以在 numpy 中执行此操作吗？

一个非理想的解决方案是：

```
>>> maskA = A > 0
>>> maskB = B > 0

>>> maskA.dtype=numpy.uint8
>>> maskB.dtype=numpy.uint8

>>> D = replace_zeros_with_ones(numpy.dot(maskA,maskB)) 

>>> C = numpy.dot(A,B) / D 
```

谁有更好的算法？

此外，如果 A 或 B 是稀疏矩阵，则使它们变得密集（用 1 替换零）会使内存占用爆炸！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:15:44.213

为什么需要`replace_zeros_with_ones`？我删除此行并运行您的代码并获得正确的结果。

如果所有数字都不是负数，则只需一行即可：

```
np.dot(A, B)/np.dot(np.sign(A), np.sign(B)) 
```

# android - 自定义标题栏延迟

> ID：13519522
> 
> 赞同：0
> 
> 时间：2012-11-22T20:22:08.617
> 
> 标签：android, styles, delay, titlebar

我的应用程序使用创建为布局的自定义标题栏，并使用以下格式实现：

```
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
setContentView(R.layout.my_layout);
getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.my_custom_title);
super.onCreate(savedInstanceState); 
```

现在它使用常规主题不起作用`android:Theme.Light`，也没有，它们在被调用`android:Theme.Light.NoTitleBar`时都导致了一个致命的异常。`setContentView`所以我创建了一个自定义样式，如下所示：

```
<style name="MyWindowTitleBackground">
    <item name="android:background">#000000</item>
</style>

<style name="CustomTheme" parent="android:Theme.Light">
    <item name="android:windowTitleBackgroundStyle">@style/MyWindowTitleBackground</item>
    <item name="android:windowActionBar">false</item>
    <item name ="android:windowTitleSize">35dip</item>
</style> 
```

但是，每次启动应用程序时，在启动和显示带有自定义标题栏的实际布局之间会有一个小的延迟，在此延迟中，默认标题栏会显示其中包含应用程序名称。大约一秒钟后，当 Oncreate 完成时，自定义标题被加载并显示。

有没有什么办法解决这一问题？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:29:11.660

试着放

```
super.onCreate(savedInstanceState); 
```

在其他行之前，看看是否有效。

并把

```
setContentView(R.layout.my_layout); 
```

最后的。我似乎记得我的应用程序崩溃了，因为我的顺序错误。

# android - ActionBar 的操作项在某些设备上不起作用

> ID：13519527
> 
> 赞同：1
> 
> 时间：2012-11-22T20:22:48.457
> 
> 标签：android, spinner, android-actionbar, actionbarsherlock, android-spinner

`ActionbarSherlock`我正在开发一个用于向后兼容的应用程序，我目前在`Spinner`添加到`ActionBar`.

设想：

我正在使用`ActionBar.NAVIGATION_MODE_TABS`，每个选项卡都有`Fragment`自己的膨胀菜单。

我没有问题膨胀和填充菜单或`Spinner`s，但问题是`Spinner`当用户点击它时它没有展开。但是，当用户滑动到另一个时`fragment`，`Spinner`展开（并且显示在错误`fragment`的.`Spinner``fragment`

此问题仅发生在 <4.0.x 的设备上（未尝试 3.x）。在 >4.0.x 上进行测试时，它按预期工作。

我已经尝试调试并通过回调方法，但我无法弄清楚为什么会发生这种情况。这可能是旧版本 Android 中的错误，还是因为菜单等的处理方式不同？（不应该，因为我正在使用`ActionbarSherlock`）。

有谁知道为什么会这样？

**编辑：**

我注意到，无论菜单中的操作项是什么`fragments/tabs`，都不会首先添加到中。`ViewPager`第一个`tab`，即一旦`Activity`开始就激活的那个，从来没有这个问题。

只是我缺少某些东西，还是应该是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:29:01.290

试试这个，它可能对你有帮助

对于微调器

```
 <com.actionbarsherlock.internal.widget.IcsSpinner
     android:id="@+id/spinner_id_name"
     style="@style/your_style_name"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_margin="5dp"
     android:scrollbars="none" /> 
```

在 style.xml 你应用这个

```
 <style name="your_style_name">
            <item name="android:dropDownWidth">fill_parent</item>
            <item name="android:background">@drawable/spinner_background</item>
            <item name="android:popupBackground">@drawable/spinner_dropdown_background</item>
            <item name="android:divider">@color/gray_darkest</item>
            <item name="android:alignmentMode">alignBounds</item>
            <item name="android:dividerHeight">2dp</item>
            <item name="android:scrollbars">none</item>
            <item name="android:scrollbarAlwaysDrawVerticalTrack">false</item>
            <item name="android:scrollbarTrackVertical">@android:color/transparent</item>
            <item name="android:dropDownSelector">@android:color/holo_dark</item>
            <item name="android:requiresFadingEdge">none</item>
        </style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T10:54:50.627

我有一个非常相似的问题。在我的情况下，它`Activity`正在扩展另一个，并且“父”活动正在返回`false`功能`onPrepareOptionsMenu()`。这导致了 Android 2.x 上的错误行为，在 Android 4 上一切正常。当我更改代码以返回`true`所有内容时都是固定的。我注意到的另一件非常奇怪的事情是，非工作`ActionItem`图标比好的图标（在另一个`Activity`）更暗。

# .net - 具有硬颜色过渡的 .NET 画笔（类似于渐变）

> ID：13519528
> 
> 赞同：2
> 
> 时间：2012-11-22T20:22:49.087
> 
> 标签：.net, gdi+, brush, lineargradientbrush

我需要一个**可以**从一种颜色到另一种颜色的硬过渡，如下所示。我正在提供另一个控件的填充画笔，所以我需要一个画笔对象。

*我想要的是：*

![http://mechgt.com/dump/sample.png](../Images/8f2b6fca8c651bbe12a252afd4c85e28.png)

我尝试`LinearGradientBrush`了几种方法（参见下面的一个示例），但它不会产生强硬的线条；过渡仍然是渐变，线条模糊。

```
LinearGradientBrush brush = new LinearGradientBrush(pictureBox1.ClientRectangle, Color.Green, Color.Silver, 0f);
Blend blend = new Blend();
blend.Factors = new float[] { 0, 0, 1, 1 };
blend.Positions = new float[] { 0, .7f, .7f, 1 };
brush.Blend = blend; 
```

*我得到什么：*

![http://mechgt.com/dump/sample2.png](../Images/6fecdc76f27f2728ca72ef89d1f01763.png)

我如何定义一个可以做到这一点的画笔？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:19:00.597

为此，您可能需要使用`TexureBrush`.

将`TextureBrush`图像作为参数，这意味着您可以从磁盘加载现有图像，或者在内存中创建一个图像，您可以在其中绘制矩形等。

在以下示例中，GetTextureBrush 将创建实际的画笔。这是您定义颜色和形状的地方。我刚刚在你需要的车道上创建了一些东西，根据需要进行调整。

例如（VB.net）：

```
Private Sub DrawBrush()

    Dim g As Graphics = Me.CreateGraphics
    Dim bmp As Image = GetTexureBrush
    Dim b As New TextureBrush(bmp)

    g.FillRectangle(b, New Rectangle(0, 0, 200, 500))

    b.Dispose()
    bmp.Dispose()
    g.Dispose()

End Sub
Private Function GetTexureBrush() As Image

    Dim bmp As New Bitmap(100, 20)
    Dim g As Graphics = Graphics.FromImage(bmp)

    g.FillRectangle(Brushes.DarkGreen, New Rectangle(0, 0, 75, 20))
    g.FillRectangle(Brushes.Gray, New Rectangle(75, 0, 25, 20))

    g.Dispose()

    Return bmp

End Function 
```

C＃

```
private void DrawBrush()
{
    Graphics g = this.CreateGraphics;
    Image bmp = GetTexureBrush();
    TextureBrush b = new TextureBrush(bmp);

    g.FillRectangle(b, new Rectangle(0, 0, 200, 500));

    b.Dispose();
    bmp.Dispose();
    g.Dispose();

}
private Image GetTexureBrush()
{

    Bitmap bmp = new Bitmap(100, 20);
    Graphics g = Graphics.FromImage(bmp);

    g.FillRectangle(Brushes.DarkGreen, new Rectangle(0, 0, 75, 20));
    g.FillRectangle(Brushes.Gray, new Rectangle(75, 0, 25, 20));

    g.Dispose();

    return bmp;

} 
```

# ios - MFMailComposeViewController IOS

> ID：13519530
> 
> 赞同：1
> 
> 时间：2012-11-22T20:22:57.150
> 
> 标签：ios, xcode

目前我有一个 NSArray 的电子邮件，我打开一个视图来结束所有这些电子邮件的电子邮件：

```
MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];

mailer.mailComposeDelegate = self;

[mailer setSubject:@"App Support"];

NSArray *toRecipients = [NSArray arrayWithArray:emails];
[mailer setToRecipients:toRecipients];

NSString *emailBody = @"";
[mailer setMessageBody:emailBody isHTML:NO];

// only for iPad
mailer.modalPresentationStyle = UIModalTransitionStylePartialCurl;

[self presentModalViewController:mailer animated:YES]; 
```

有没有办法在不打开实际打开控制器的情况下向此列表发送电子邮件（用户无需按下发送按钮也无法更改消息）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:28:12.183

无法使用`MFMailComposeViewController`.

如果您想“静默”发送电子邮件，我之前使用过[SKPSMTPMessage](http://code.google.com/p/skpsmtpmessage/) - 一个 SMTP 客户端，可在 iOS 上使用，无需任何 UI 即可发送电子邮件。

如果需要，您可以设置一个专门用于发送邮件的 Gmail 帐户。

我为您创建了一个简单的演示。[在这里下载](https://www.yousendit.com/download/WUJiTGs1Qk44aVBxYk1UQw)。请注意，除了 SMTP 文件夹中的文件，您还需要链接到`CFNetwork.framework`项目中的 。

# c# - Caliburn Micro 从 1.1 版更改为 1.5.1 版？

> ID：13519534
> 
> 赞同：1
> 
> 时间：2012-11-22T20:23:21.503
> 
> 标签：c#, .net, wpf, mvvm, caliburn.micro

有谁知道，除了增加对 WinRT 和 Windows Phone 8 的支持外，Caliburn Micro 1.1 到 1.5.1 有哪些变化。

我需要此信息，因为我在我的项目中使用 Caliburn Micro 1.4 并希望将其更新到 1.5.1？

如果有任何重大变化，我会去争取。

命名约定有什么变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:32:37.147

这取自每个版本的 changes.txt：

## 1.2

> *   除了完整的 Caliburn.Micro 框架之外，对 EventAggregator 的改进以提高可测试性和重用性。
> *   为 SimpleContainer 启用基本子容器。
> *   对 nuget 安装脚本的一些改进。
> *   View/ViewModel 名称解析的改进和错误修复。
> *   修复了新 UriBuilder 中的一些 NRE。如果找不到视图，则显式抛出 NO。
> *   改进了搜索视图/视图模型的日志记录。
> *   修复了 WP7 版本的 Screen.OnViewReady 的错误。它现在始终如一地工作。
> *   改进 PropertyChangedBase 和 BindableCollection 以更好地支持序列化。
> *   将 IsInDesign 模式从 Bootstrapper 移到 Execute 类中。
> *   为振动和声音效果添加了 WP7 平台抽象，包括使窗口管理器在显示自定义模式对话框时播放声音。
> *   修复了 WindowManager 中与冒泡操作相关的一些错误。
> *   修复了 WPF 导航服务的一些问题。
> *   小重构以启用新的“功能包”。

## 1.3

> *   改进了 PropertyChangedBase 和 BindableCollection 的序列化
> *   使 WP7 UriBuilder 无需导航即可实际构建 Uri。
> *   向 Executor 添加了 SetUIThreadMarshaller 方法，以允许自定义框架的默认线程编组行为。
> *   为所有窗口管理器 API 添加了可选设置参数。
> *   更改 FrameAdapter 以在常规数据绑定发生之前将查询字符串参数注入 ViewModel。
> *   添加了一个新的 WinRT 项目。WinRT 现在支持 Execute、BindableCollection、PropertyChangedBase、ExtensionMethods、EventAggregator 和 SimpleContainer。
> *   修复了 Screen 中的一些 WPF 错误
> *   对 ViewModelLocator 和 ViewLocator 的大量改进和 API 增强，可以更轻松地自定义位置约定。
> *   修复了被取消和重用的协程中潜在的内存泄漏。
> *   启用约定绑定的设计时应用程序（初步支持）。要打开此功能，请将视图的 Bind.AtDesignTime 附加属性设置为 true。如果您使用 blend 的设计时数据生成，您可以选择替换 ViewLocator.ModifyModelTypeAtDesignTime 以执行到视图的自定义映射。虽然它不应该是必需的。
> *   将 ConventionManager.ConfigureSelectedItem 转换为委托以允许自定义。
> *   添加了 ConventionManager.ConfigureSelectedItemBinding 委托，旨在允许检查建议的绑定及其自定义或拒绝。
> *   添加了对 WP7 Mango 的支持
> *   添加了对 Silverlight 5 的支持
> *   对 NavigationService 进行的各种改进；改进导航、墓碑等。
> *   使用 TabControl 修复了一些 WPF 错误
> *   对墓碑机制和 IoC 容器之间的集成进行了一些改进。
> *   Bootstrapper 的 Application 属性不再全局可用，以帮助防止误用。
> *   ConventionManager API 中的一些重大更改与 ItemsControl 约定中的错误修复相关。
> *   启用覆盖 PhoneContainer 中的默认服务
> *   程序集现在标记为 CLSCompliant。
> *   向 ViewLocator 添加了一个新的 Func，称为“DeterminePackUriFromType”。此函数映射视图类型以打包 Uri 以在导航场景中使用。由于没有可靠的方法来从类型确定 Uri，因此提供了一个默认实现，该实现应该适用于大多数情况，但可以在其他情况下替换。此函数由 WP7 UriBuilder 内部使用。
> *   更新了 SL5 构建以使用新的本机 UpdateSourceTrigger。
> *   为绑定打开常规验证时启用 ValidatesOnExceptions。
> *   修复了一个长期存在的错误，当通过启用容器回收的虚拟化控件内部的 Bind.Model 属性应用约定时，该错误会导致问题。这可能还修复了与 Bind.Model 属性相关的其他一些间歇性问题。

## 1.3.1

> *   切换到语义版本控制。
> *   为设计时引导程序操作添加了一些异常处理。
> *   向 MessageBinder 添加了一个自定义转换器，以便我们可以处理从字符串到 DateTime 的转换。

## 1.4

这不包括changes.txt，所以我能找到的最好的是：

> 此版本包括跨所有平台的许多错误修复、对 nuget 支持的改进以及...最大的新闻...对 WinRT 和 WP8 的全面支持。

# java - List的目的是什么 ?

> ID：13519537
> 
> 赞同：39
> 
> 时间：2012-11-22T20:23:35.013
> 
> 标签：java, list, generics, void

我什至不知道这是可行的，但我在网上阅读一些代码时看到了一个带有这样签名的方法：

```
public List<Void> read( ... ) 
```

... 什么？有没有理由这样做？这还能`List`有什么用？据我所知，不可能实例化一个`Void`对象。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-22T20:28:27.027

此方法签名可能是作为某个泛型类的副产品创建的。

例如，`SwingWorker`有两个类型参数，一个用于最终结果，一个用于中间结果。如果您只是不想使用任何中间结果，`Void`则将其作为类型参数传递，从而导致某些方法返回`Void`- 即什么也没有。

如果有一个方法`List<V> returnAllIntermediateResults()`作为类型参数`SwingWorker`，它会创建一个方法，就像你在你的问题中发布的那样。`Void``V`

该代码将完全有效。您可以使用类型参数实例化`List`接口的任何实现（例如） 。但是一个类型可以拥有的唯一值是. 因此，如果实现允许元素，则列表只能包含s。`ArrayList``Void``Void``null``null``null`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-22T20:38:00.420

它可能有用的一种情况是，如果您想从函数返回一组返回值。说

```
static List<T> forEach(Func<A,T> func, List<A> items) {
   List<T> ret = new List<T>();
   for(int i = 0; i< items.length; i++) {
     ret.add(func.call(items[i]);
   }
   return ret;
}

public static void main() {
  ...
  List<Void> boringResult = 
   forEach(
    new Func<Void, Integer> {@override Void call(Integer i) {...}});
} 
```

没那么有用，但您可以看到需要它的情况。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-22T20:27:10.417

`List<Void>`很奇怪。它只能有`null`元素，因为您不能创建 type 的对象`Void`。我认为这样的事情没有实际用途。

`Void`是的一部分`java.lang`。这不是一个特殊的关键字或任何东西。它是一种“伪类型”（根据文档），用作占位符来表示`Class`对应于 的对象`void`，如`Class<Void>`. 从[文档中`Class`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html)：

> 原始 Java 类型（`boolean`、`byte`、`char`、`short`、`int`、`long`、`float`和`double`）和关键字`void`也表示为`Class`对象。

该类的`Void`存在主要是为了最后一部分，因此您可以编写：

```
Class<Void> voidType = void.class; // == Void.TYPE 
```

就像你可以写：

```
Class<Integer> intType = int.class; // == Integer.TYPE 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-22T20:32:18.790

我同意，这很奇怪。

如果您想扩展泛型类并从方法返回 void，我可以看到它的用途。我遇到了一个案例，我想使用`int`并且不得不使用，`Integer`因为 java 泛型不喜欢原始类型。

```
public interface ObjectUserPool<E, T> {
    public E useObject(T o);
}

public class NonReturningObjectUserPool extends ObjectUserPool<Void, Integer> {
    public Void useObject(Integer i);
} 
```

我认为这就是 java API 所说的，但老实说，我真的找不到`NonReturningObjectUserPool`.

# android - 如何强制关闭wifi和数据漫游

> ID：13519547
> 
> 赞同：1
> 
> 时间：2012-11-22T20:24:27.683
> 
> 标签：android

我想在android中手动关闭wifi和数据漫游。在处理完一些数据后，我想重新启用它。我怎样才能以编程方式做到这一点？

我只找到这个howto，但在我的android 4中不起作用。

[如何对 android 进行编程以查找特定网络？](https://stackoverflow.com/questions/11060414/how-do-i-program-android-to-look-for-a-particular-network)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:30:21.647

对于 wifi（需要`android.permission.CHANGE_WIFI_STATE`）：

```
WifiManager wm = (WifiManager) getSystemService(Context.WIFI_SERVICE);
wm.setWifiEnabled(true); 
```

对于数据（需要`android.permission.CHANGE_NETWORK_STATE`，从[这里](https://stackoverflow.com/questions/8354530/how-to-enable-data-connection-on-android-2-3)）：

```
ConnectivityManager mgr = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
Method dataMtd = ConnectivityManager.class.getDeclaredMethod("setMobileDataEnabled", boolean.class);
dataMtd.setAccessible(true);
dataMtd.invoke(mgr, true/false); 
```

# ios - purgeIdleCellConnections

> ID：13519550
> 
> 赞同：11
> 
> 时间：2012-11-22T20:24:45.077
> 
> 标签：ios

关于这个问题的“重复”状态：
这个问题是在 2012 年 11 月提出的，它包含对问题的详细描述，并有 3 个答案。
被称为“原始”的问题是在 2013 年 2 月（这个“重复”之后的 3 个月）提出的，没有详细的描述，只有 2 个答案。它的两个答案中最好的只是一个链接答案。

* * *

**为什么我在控制台中收到此消息？：**

```
purgeIdleCellConnections: found one to purge conn = (some object-ID) 
```

* * *

当我的应用程序启动时，我会向我的服务器发送一条消息。我用这行代码做到这一点：

```
@implementation AppStatus {
    NSMutableData*   activeDownload;
    NSURLConnection* Connection;
}

- (id) init {
    self = [super init];
    if (self) {
        activeDownload = nil;
        Connection     = nil;
    }
    return self;
}

- (void)sendStatus:(NSString*)url {
    NSString* escaped = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSURLConnection* conn =[[NSURLConnection alloc] initWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:escaped]] delegate:self];
    Connection = conn;
    NSLog(@"%s Connection=%@",__PRETTY_FUNCTION__,Connection);
} 
```

在同一个文件中，我有这个委托方法：

```
- (void)connection:(NSURLConnection*)connection didReceiveData:(NSData*)data {
    NSLog(@"%s connection=%@",__PRETTY_FUNCTION__,connection);
    [activeDownload appendData:data];
}

- (void)connection:(NSURLConnection*)connection didFailWithError:(NSError*)error {
    NSLog(@"%s connection=%@",__PRETTY_FUNCTION__,connection);
    activeDownload = nil;
    Connection = nil;
    //do nothing else; just ignore the error
}

- (void)connectionDidFinishLoading:(NSURLConnection*)connection {
    NSLog(@"%s Connection=%@",__PRETTY_FUNCTION__,Connection);
    NSString* answer = [[NSString alloc] initWithData:activeDownload encoding:NSUTF8StringEncoding];
    //do something usefull with the server's answer
    activeDownload = nil;
    Connection = nil;
} 
```

当我在真实设备（而不是模拟器）上运行此应用程序时，我在控制台中收到以下消息：

```
2012-11-22 20:41:51.309 BookMan[376:907] -[AppStatus sendStatus:] Connection=<NSURLConnection: 0x1dd7ff40>
2012-11-22 20:41:51.929 BookMan[376:907] -[AppStatus connection:didReceiveData:] Connection=<NSURLConnection: 0x1dd7ff40>
2012-11-22 20:41:51.935 BookMan[376:907] -[AppStatus connectionDidFinishLoading:] Connection=<NSURLConnection: 0x1dd7ff40>
purgeIdleCellConnections: found one to purge conn = 0x1dd8ff60 
```

purgeIdleCellConnections 消息在 connectionDidFinishLoading 消息之后大约 4 或 5 秒出现。

如您所见，purgeIdleCellConnections-message 的对象编号与我在应用程序中创建和使用的连接编号不同。

也许重要提示：只有当我在真实设备上运行应用程序时（带有 iOS 6.0.1 的 iPhone 4），我才会收到此消息。此设备使用 3G 连接，而不是 WIFI 连接。目前我没有 WIFI 网络来测试这是否也发生在 WIFI 连接上。
当我在模拟器上运行应用程序时，我没有收到此消息。

当我将方法 sendStatus: 更改为：

```
- (void)sendStatus:(NSString*)url {
    NSString* escaped = [url stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    //NSURLConnection* conn =[[NSURLConnection alloc] initWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:escaped]] delegate:self];
    //Connection = conn;
    NSLog(@"%s Connection=%@",__PRETTY_FUNCTION__,Connection);
} 
```

我在控制台中得到这个输出：

```
2012-11-22 20:45:11.927 BookMan[391:907] -[AppStatus sendStatus:] Connection=(null) 
```

当我不创建连接时，我没有收到 purgeIdleCellConnections 消息。

* * *

**那么这条消息是什么意思，为什么我会得到它？：**

```
purgeIdleCellConnections: found one to purge conn = (some object-ID) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T09:17:08.470

这意味着，一个空闲时间过长的连接已经关闭了它的 TCP 连接。这是一个基本机制，它的日志不应该像 Apple 在[Technical QA1774](https://developer.apple.com/library/ios/#qa/qa1774/_index.html#//apple_ref/doc/uid/DTS40012992)上所说的那样打扰您，它是一条错误地启用的调试消息。

实际上，此日志仅在清除**WWAN 连接时显示。**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-23T23:52:53.037

是的，操作系统通过蜂窝数据关闭活动连接，即仅 3G。您不应该使用 Wifi 连接看到这一点。似乎操作系统清除连接会增加一些时间来向服务器发送数据请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:47:47.013

在连接到蜂窝网络的设备上，我观察到这条调试消息来自 iOS 6.0 SDK。时间方面，我发现它与在我的应用程序中被终止的“活动”AJAX 调用相关。然而，证明任何事情都非常困难，因为这只发生在 UIWebView 中呈现网页时。我只是说我不认为这些信息是良性的。我认为它们可能表明 Apple 框架中的一个错误，该错误在终止连接时过于激进。很难对在 UIWebView 内运行的、进行 AJAX 调用的 javascript 进行检测，因此目前这一切都是高度推测性的。

# java - 同步线程 - 作业

> ID：13519560
> 
> 赞同：0
> 
> 时间：2012-11-22T20:25:44.940
> 
> 标签：java, multithreading, synchronization

我需要运行一个名为的 java 程序`ArrayHolder`，它将运行两个`Threads`. `ArrayHolder`会有一个`Array`. `ThreadSeven`将`Array`用 7 和`ThreadOne`1 覆盖其中的每个元素。执行后的结果应该是 7,1,7,1,7,1,7,1 等。我已经解决了这个问题，虽然我不喜欢我的解决方案并且是希望你能提出更好的方法。

ps：两个线程都必须写入所有索引。

```
public class ArrayHolder {

    private int[] array = {1, 2, 3, 4, 5, 6, 4, 8, 9, 10};

    public void writeInt(int pos, int num) {
        array[pos] = num;
    }

    public static void main(String[] args) {
        ArrayHolder holder = new ArrayHolder();
        ThreadSeven seven = new ThreadSeven(holder, null);
        Runnable one = new ThreadOne(holder, seven);
        Thread thread1 = new Thread(seven);
        Thread thread2 = new Thread(one);
        seven.setThread(one);

        thread1.start();
        thread2.start();

        holder.printArray();
    }

    private void printArray() {
        for (int i = 0; i < 10; i++) {
            System.out.println(array[i]);
        }
    }

public class ThreadSeven implements Runnable {
    private ArrayHolder array;
    private Runnable t;
    private int flag=0;
    @Override
    public void run() {
        for(int i=0;i<10;i++){
            array.writeInt(i, 7);

            flag=(flag+1)%2;
            if (flag==0){
                synchronized(t){
                    t.notify();
                }
            }else{
                synchronized(this){
                    try {
                        this.wait();
                    } catch (InterruptedException ex) {
                        Logger.getLogger(ThreadSeven.class.getName()).log(Level.SEVERE, null, ex);
                    }
                }
            }
        }
    }
    public ThreadSeven (ArrayHolder ar,Runnable t){
        array=ar;
        this.t=t;
    }
    public void setThread(Runnable t){
        this.t=t;
    }
}

public class ThreadOne implements Runnable {

    private ArrayHolder array;
    private Runnable t;
    private int flag = 0;

    @Override
    public void run() {
        for (int i = 0; i < 10; i++) {
            array.writeInt(i, 1);

            flag = (flag + 1) % 2;
            if (flag == 1) {
                synchronized (t) {
                    t.notify();
                }
            } else {
                synchronized (this) {
                    try {
                        this.wait();
                    } catch (InterruptedException ex) {
                        Logger.getLogger(ThreadSeven.class.getName()).log(Level.SEVERE, null, ex);
                    }
                }
            }
        }
    }

    public ThreadOne(ArrayHolder ar, Runnable t) {
        array = ar;
        this.t = t;
    }

    public void setThread(Runnable t) {
        this.t = t;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:51:29.747

ThreadSeven 和 ThreadOne 不需要是单独的类；看起来您只是复制/粘贴代码，然后将`7`in writeInt 更改为 `1`. 相反，您可以将此值参数化并将其传递给构造函数。然后你会得到类似的东西：

```
public class ThreadWriter implements Runnable {
    private final int numberToWrite;
    // ...
    public ThreadOne(ArrayHolder ar, Runnable t, int numberToWrite) {
        array = ar;
        this.t = t;
        this.numberToWrite = numberToWrite;
    }
    // ...
} 
```

另一点是你的两个线程必须相互了解；这不能很好地扩展。假设你的下一个作业你的老师说你必须处理三个写线程`1, 4, 7, 1, 4, 7, ...`；您将不得不更改`ThreadOne`and的实现`ThreadSeven`。您现在可以做出的更好的解决方案是让`ThreadWriter`s 本身更笨，并在`ArrayHolder`课堂上（或与中间`ThreadWriterManager`课堂）更多地管理他们的互动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:14:12.063

您的解决方案有一些问题，在我看来它不会打印正确的结果。

a）在打印结果数组之前，您无需等待线程完成

添加`thread1.join()`and `thread2.join()`before`holder.printArray()`以防它还没有。

b) 两个线程都立即开始写入，`array.writeInt(0, /* 1 or 7 */);`之后它们开始相互等待。第一个索引是否正确取决于运气。

c) 在`this.wait();`没有循环检查条件的情况下继续是不安全的，因为中断可能是由其他线程以外的其他东西引起的。我想在这里这样做是可以的，因为这只是一个练习。

d) 我看到一个潜在的死锁：假设两个线程仍在写入第一个索引。所以两者都不在同步块中。

必须通知另一个的线程这样做，写入下一个索引并进入它自己的等待块。但是第二个线程当时没有等待，所以`notify`第一个线程什么也没做。第二个线程也进入等待块。

现在两个线程互相等待，不再发生任何事情。

我没有一个很好的简单解决方案给你，因为这个问题非常复杂。

1 线程需要从索引 0 开始写入，然后等到 7 线程写入索引 0 和 1，现在 1 线程写入索引 1 和 2 并等待，依此类推。这是我认为可以确保两个线程都写入每个索引并且结果是 7-1-7-1-.... 的唯一方法。在内部同步访问`ArrayHolder`将非常棘手，因为它需要确保两者线程已以正确的顺序写入每个索引。

但是我认为您的总体想法还可以。你只需要确保它是安全的

# php - php - 如何访问 post 变量（$_POST 为空）

> ID：13519561
> 
> 赞同：5
> 
> 时间：2012-11-22T20:25:50.663
> 
> 标签：php, json, post

我正在开发一个系统，目前正在尝试实现另一个（外部）系统可以发布到某些数据的脚本，以便我可以存储它们。
我无法控制外部系统 - 我可以触发它来将数据发布到我的系统，并为其提供我的脚本 url。

在帖子发生时查看萤火虫，我可以看到发布的数据，如下所示：![在此处输入图像描述](../Images/40a53b6fe4cfdb991908bf4d7caafd31.png)

或（网址解码）

```
content={"sex":"male","person":{"name":["chris"],"mbox":["mailto:name.lastename@gmail.com"]}}  
&Content-Type=application/json  
&auth=DDE233H76BGN 
```

我的问题是，当试图在我的脚本中获取这些参数时，$_POST（和 $_REQUEST）总是空的！
我试过`var_dump($_POST)`or `echo file_get_contents("php://input");`，但我没有看到任何内容。

我在这里想念什么？
我不知道是否需要响应/请求标头才能从中获得一些东西，我在这里展示它们以防万一
![在此处输入图像描述](../Images/5aad01c8911035c65670b7eee24ff1c4.png)

**编辑：**
我的脚本现在由一行代码组成，例如：

```
<?php
    var_dump($_POST);
?> 
```

或者

```
<?php
   echo file_get_contents("php://input");
?> 
```

他们两个都没有给我任何东西：s

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T04:52:02.327

应该使用`$arr= json_decode($_POST['content']);`... 访问数据，但这里还有另一个问题。

**缺少一个细节：**

... firebug 如何向您显示从外部系统发送到您的网站的 $_POST 的内容（又名：请求不通过您的浏览器，但可能通过来自外部服务器的 CURL 请求）。显然，我在这里没有得到任何东西。

我看到的是您的网站发出的从您的浏览器（在 javascript 中）发送的 POST 请求。您的问题错过了一个关键细节，我只是不确定它是什么。

**暗示：**

尝试`echo 'test';`在您的 var_dump 之前放置一个，我感觉您可能没有调试我们在 Firebug 中看到的 Ajax POST 请求真正调用的页面。有点路由问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:38:02.903

让我们看看 RFC 1945 看看什么是“参数”

```
parameter      = attribute "=" value
attribute      = token
token          = 1*<any CHAR except CTLs or tspecials>
CTL            = <any US-ASCII control character
                    (octets 0 - 31) and DEL (127)> 
```

所以我想“Content-Type=application/json”不是 POST 的有效部分，因为“-”不是 CTL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T03:24:36.307

您应该尝试查看原始 POST 数据变量：

`echo $HTTP_RAW_POST_DATA;`

# ruby-on-rails - rails route 设置新路径

> ID：13519563
> 
> 赞同：1
> 
> 时间：2012-11-22T20:26:06.157
> 
> 标签：ruby-on-rails, routes

我是 Rails 新手，我正在尝试路由 `0.0.0.0:3000/ratings/list` 到控制器`ratings`和方法`list`

但相反，我将`index`方法`list`作为参数

我的 routes.rb 就是这样

```
resources :ratings
  match 'ratings/:won/update/:lost' => 'ratings#update'
  match 'ratings/list' => 'ratings#list' 
```

和耙路线是

```
ratings      GET    /ratings(.:format)                   ratings#index
             POST   /ratings(.:format)                   ratings#create
  new_rating GET    /ratings/new(.:format)               ratings#new
 edit_rating GET    /ratings/:id/edit(.:format)          ratings#edit
      rating GET    /ratings/:id(.:format)               ratings#show
             PUT    /ratings/:id(.:format)               ratings#update
             DELETE /ratings/:id(.:format)               ratings#destroy
                    /ratings/:won/update/:lost(.:format) ratings#update
ratings_list        /ratings/list(.:format)              ratings#list 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T20:38:24.310

最好的方法是使用收集路线

```
resources :ratings do
  collection do
    get 'list'
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T20:29:41.130

尝试

```
match 'ratings/list' => 'ratings#list' 
```

前

```
resources :ratings 
```

Rails 路线先到先得！

# mongodb - MongoDB 如果另一个表中的字段不为空，则可以插入

> ID：13519565
> 
> 赞同：1
> 
> 时间：2012-11-22T20:26:21.953
> 
> 标签：mongodb, database, nosql

例如

```
if(table1.customer1 != null)
then insert into table2 'customer1' 
```

这可以在 MongoDB 中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:48:12.353

唯一的方法是两阶段提交：[http ://docs.mongodb.org/manual/tutorial/perform-two-phase-commits/](http://docs.mongodb.org/manual/tutorial/perform-two-phase-commits/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:30:51.550

没有办法（在单个操作中）根据另一个文档的值（在相同或不同的集合中）更新一个集合中的文档。

您可以在应用程序代码中执行此操作，但不能保证是原子的。

# php - 在搜索结果中显示亚马逊图书的网站

> ID：13519573
> 
> 赞同：0
> 
> 时间：2012-11-22T20:26:59.503
> 
> 标签：php, amazon-web-services, web-deployment

我想创建一个带有亚马逊图书结果的网络书店，我知道如何使用本地数据库制作网站，但是如何在我的网络搜索结果中显示亚马逊图书，并在我的网站中显示亚马逊图书类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:55:25.077

这可以使用亚马逊 API 来完成。

[亚马逊 API 免费代码](http://freecode.com/projects/amazon_webservice_api)

或者

[亚马逊API](http://aws.amazon.com/sdkforphp/)

# c# - 使用 OleDB 将 ASP 网页中的一行数据插入 Access 数据库

> ID：13519576
> 
> 赞同：0
> 
> 时间：2012-11-22T20:27:16.220
> 
> 标签：c#, database, ms-access, parameters, oledb

我正在尝试将一行数据插入到我的 MS Access 数据库中。当我通过 VS 调试它时，它没有发现问题，但没有插入行。这个查询结果是没有插入任何行。我的日期是字符串，并且格式正确。我在参数列表中传递了 18 个值，必须有一种更简单的方法来做到这一点。是否有另一种方法可以为 OleDb 使用参数？我已经在我的方法下面发布了。你能看看我的语法是否正确吗？它仍然行不通。

这是我传递信息的地方：

```
rowsAdded = ((DataAccessLayer)Application["dbAccess"]).insert("Employees", txtLname.Text, txtFname.Text, txtTitle.Text, txtCourt.Text,
        txtAddress.Text, txtCity.Text, txtCountry.Text, txtHomePhone.Text, txtExtension.Text, int.Parse(txtReports.Text), txtPassword.Text,
        txtPostalCode.Text, txtNotes.Text, txtRegion.Text, txtHireDate.Text, txtBday.Text, upPhoto.FileName.ToString()); 
```

这是我用这种方法查询数据库的地方

```
public int insert(string tablename, string lname, string fname, string title, string toc, string address, string city,
    string country, string phone, string ext, int report, string pass, string postal, string notes, string region, 
    string hire, string birth, string photo)
{
    string tblName = tablename;
    string last = lname;
    string first = fname;
    string tlt = title;
    string tOfc = toc;
    string addy = address;
    string town = city;
    string reg = country;
    string phum = phone;
    string exten = ext;
    int rep = report;
    string pas = pass;
    string pc = postal;
    string note = notes;
    string regions = region;
    string hD = hire;
    string bD = birth;
    string pho = photo; 
    int rows = 0;
    int ID = 0;
    string insertString = "INSERT INTO @tablename ([EmployeeID],[LastName],[FirstName],[Title],[TitleOfCourtesy],[Address],[City]," +
    "[Country],[HomePhone],[Extension],[ReportsTo],[Password],[PostalCode],[Notes],[Region], [HireDate],[BirthDate],[Photo]) VALUES (" + 
    ID + ", @lname, @fname, @title, @toc, @addy, @city, @country," +
    "@phone, @ext, @report, @pass,  @postal, @notes,@region, @hire, @birth, @photo)";
    string queryLast = "Select @@Identity";      
    try
    {
        conn.Open();
        oleCommand = new OleDbCommand(insertString, conn);
        oleCommand.CommandText = queryLast;
        ID = (int)oleCommand.ExecuteScalar();

        oleCommand.Parameters.AddWithValue("@tablename", tblName);
        oleCommand.Parameters.AddWithValue("@lname", last);
        oleCommand.Parameters.AddWithValue("@fname", first);
        oleCommand.Parameters.AddWithValue("@title", tlt);
        oleCommand.Parameters.AddWithValue("@toc", tOfc);
        oleCommand.Parameters.AddWithValue("@addy", addy);
        oleCommand.Parameters.AddWithValue("@city", town);
        oleCommand.Parameters.AddWithValue("@country", reg);
        oleCommand.Parameters.AddWithValue("@phone", phum);
        oleCommand.Parameters.AddWithValue("@ext", exten);
        oleCommand.Parameters.AddWithValue("@report", rep);
        oleCommand.Parameters.AddWithValue("@pass", pas);
        oleCommand.Parameters.AddWithValue("@region", regions);
        oleCommand.Parameters.AddWithValue("@postal", pc);
        oleCommand.Parameters.AddWithValue("@notes", note);
        oleCommand.Parameters.AddWithValue("@hire", hD);
        oleCommand.Parameters.AddWithValue("@birth", bD);
        oleCommand.Parameters.AddWithValue("@photo", pho);
        oleCommand.ExecuteNonQuery();

        rows = (int)oleCommand.ExecuteNonQuery();

    }
    catch (Exception ex)
    {
        dbError = "Add Employee command Error: " + ex.Message;
    }
    finally
    {
        conn.Close();
    }
    return rows;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:41:09.743

在您的代码中，您不会`oleCommand`使用`CommandText`being执行`insertString`。所有三个执行都使用等于 的命令文本完成`queryLast`。

您传递`insertString`给`OleDbCommand`构造函数的事实并不意味着它会在您分配后以某种方式被记住

```
oleCommand.CommandText = queryLast; 
```

在此分配上，`oleCommand`忘记`insertString`并且只会执行其中的内容，`CommandText`直到您分配其他内容为止。

另一件事：`insertString`如果我没记错的话，执行可能会抛出异常，因为 sql 参数化不支持指定为参数的表名。

如果 EmployeeID 列是自动递增的 - 不要将其包含在插入中。再一次 - 你需要让你的步骤直：

1.  使用 insertString 创建命令，

2.  指定参数，

3.  执行插入，

4.  将 queryLast 分配给 CommandText，

5.  执行以获取最后一个 id。

# macos - OS X 服务器上的 VirtualBox 无法 ping 来宾操作系统网络适配器 IS 桥接

> ID：13519578
> 
> 赞同：0
> 
> 时间：2012-11-22T20:27:24.440
> 
> 标签：macos, virtualbox, ping, osx-server

我有一台运行 Windows 7 x64 Pro 实例的 Mac OS X 服务器。网络适​​配器处于桥接模式，我的路由器正在通过 DHCP 配置根据 VM 的 MAC 分配正确的 IP 地址，但即使从主机操作系统我也无法 ping 虚拟机的 IP ...

关于问题的任何想法？这与 Mac OS X Server 有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T23:04:07.447

XP也有类似的问题。原来是windows（来宾）防火墙阻止了ping。关闭防火墙（短暂地）允许 ping 工作。

# javascript - HTML 元素的本地 id-s

> ID：13519581
> 
> 赞同：6
> 
> 时间：2012-11-22T20:27:42.103
> 
> 标签：javascript, html, dom

我正在开发一种可以嵌入到各种网页中的 HTML+JS 控件。我对这些页面一无所知（好吧，我可以，但我不想）。该控件由一个根元素（例如 DIV）组成，其中包含子元素的子树。在我的脚本中，我需要访问子元素。问题是：如何标记这些子元素以区分它们？

直接的解决方案是使用 id-s。这里的问题是 id 在整个文档的范围内必须是唯一的，而我对将嵌入我的控件的文档一无所知。所以我不能保证我的 id-s 的唯一性。如果 id-s 不是唯一的，它会起作用（如果小心使用），但这不符合标准，所以我可以遇到一些新版本的浏览器的问题，例如。

另一种解决方案是使用“名称”属性。它不需要是唯一的——这很好。但同样，该标准只允许有限的元素类型集存在“名称”属性。例如，“名称”属性对 DIV 元素无效。

例如，我可以使用“类”属性。标准上好像没问题，意思上就不行了。“类”应该用于其他目的，这可能会造成混淆。

任何人都可以建议一些其他选项来为 HTLM 元素实现**本地**id-s 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T20:32:45.323

您可以使用 HTML5`data-*`属性，以便为它们提供具有正确含义的自定义名称：

[http://ejohn.org/blog/html-5-data-attributes/](http://ejohn.org/blog/html-5-data-attributes/)

和

[https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes](https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)

并执行以下操作：

```
<div data-localId="myID">
  ...
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T20:51:05.860

如果您对所有 ID 和/或类使用前缀，例如`myWidgetName_98345699-`发生冲突的可能性极小。

```
<div id="myWidgetName_98345699-container" class="myWidgetName_98345699-container"> 
```

jQuery 确实有会搜索 ID 的一部分的选择器，因此使用类似的常用名称`container`也可以避免使用。对 ID 的特定部分使用较长的字母数字组合也很聪明

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:49:06.447

通常，在网页中包含隐藏信息需要创造性的方法。例如：

*   在 HTML 元素属性中存储信息，例如 id、class、rel 和 title，从而覆盖属性的原始意图。
*   使用包含信息的`<span>`或`<div>`块，同时通过样式使这些块对用户不可见`(style="display: none;")`。
*   将 JavaScript 代码添加到网页以定义映射到 HTML ID 元素的数据结构。
*   将您自己的属性添加到现有的 HTML 元素（打破 HTML 标准本身，并依靠 HTML 浏览器忽略任何语法错误）。

上面的方法并不优雅，也不是好的编码实践，但好消息是 jQuery 有一个工具，可以以一种干净的、跨浏览器的方式简化数据与 DOM 元素的关联。

**使用自定义数据属性：**

> 任何以“data-”开头的属性都将被视为私有数据的存储区域（在最终用户看不到它的意义上是私有的 - 它不会影响布局或呈现。

1.  通过 html 定义自定义数据：

    ```
    <div class="bar" id="baz" data-id="foo">  
      ...
    </div> 
    ```

2.  将 data-id 关联到特定的 DOM 元素（jQuery）：

    ```
    $('#foo').data('id', 'baz'); 
    ```

3.  检索具有特定数据 ID 的元素：

    ```
    var $item = $('*[data-id="baz"]'); 
    ```

# c# - 如何通过 ID 获取 add 方法？

> ID：13519582
> 
> 赞同：0
> 
> 时间：2012-11-22T20:27:46.837
> 
> 标签：c#, entity-framework, generics

我有普通班。我需要通过 ID 创建方法获取 seingleOrDefault 吗？

这该怎么做？

```
public T GetByID(int id)
{
    _entities.Set<T>().Single(x => x.);
} 
```

一般类：

```
 public abstract class GenericRepository<C, T> : IGenericRepository<T>
        where T : class
        where C : DbContext, new()
    {

        private C _entities = new C();
        public C Context
        {

            get { return _entities; }
            set { _entities = value; }
        }

        public virtual IQueryable<T> GetAll()
        {

            IQueryable<T> query = _entities.Set<T>();
            return query;
        }

        public IQueryable<T> FindBy(System.Linq.Expressions.Expression<Func<T, bool>> predicate)
        {

            IQueryable<T> query = _entities.Set<T>().Where(predicate);
            return query;
        }

        public virtual void Add(T entity)
        {
            _entities.Set<T>().Add(entity);
        }

        public virtual void Delete(T entity)
        {
            _entities.Set<T>().Remove(entity);
        }

        public virtual void Edit(T entity)
        {
            _entities.Entry(entity).State = System.Data.EntityState.Modified;
        }

        public virtual void Save()
        {
            _entities.SaveChanges();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:39:19.037

如果您使用`DbContext`then 方法`Set<T>()`返回[`DbSet<T>`](http://msdn.microsoft.com/en-us/library/system.data.entity.dbset%28v=vs.103%29.aspx)而不是[`ObjectSet<T>`](http://msdn.microsoft.com/en-us/library/dd382816.aspx). `DbSet<T>`具有[`DbSet<T>.Find(params object[] keyValues)`](http://msdn.microsoft.com/en-us/library/gg696418%28v=vs.103%29.aspx)完全执行您要实现的方法的方法：

> 此方法使用主键值来尝试查找上下文跟踪的实体。如果实体不在上下文中，则将执行查询并针对数据源中的数据进行评估，如果在上下文或数据源中找不到实体，则返回 null。

用法：

```
public T GetByID(int id)
{
    return _entities.Set<T>().Find(id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:40:36.983

如果您想以通用方式执行此操作，则需要在`T`.

就像是

```
public interface IEntity
{
    int Id { get; set; }
}

public abstract class GenericRepository<C, T> : IGenericRepository<T>
    where T : class, IEntity
    where C : DbContext, new()
{
    public T GetByID(int id)
    {
        _entities.Set<T>().SingleOrDefault(x => x.Id == id);
    }

    ...

} 
```

# java - 从servlet接收ArrayList到jsp页面

> ID：13519583
> 
> 赞同：2
> 
> 时间：2012-11-22T20:27:49.130
> 
> 标签：java, model-view-controller, jsp, servlets

我想从 Servlet 接收 ArrayList 到 JSP 页面。

这是我在 Servlet 中所做的

将 arraylist 存储在 schoolarraylist 中

```
request.setAttribute("Arraylist", schoolarraylist); 
```

在 JSP(CreateStudent) 我试图访问 arraylist

```
<%ArrayList<SchoolBean> get= ( ArrayList<SchoolBean> )         

<%request.getAttribute("schoolarraylist"); %> 
```

我想要做的是将数据库中的学校列表加载到一个下拉框中，以便在此 JSP 中创建学生时显示。

这是我在标签之间写的代码

```
<%for (SchoolBean c : get) {%>

<option value="<%=c.getSchoolname()%>"> <%=c.getSchoolname()%>
</option>
<%} %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T21:24:38.870

[setAttribute(java.lang.String name, java.lang.Object o)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#setAttribute%28java.lang.String,%20java.lang.Object%29)`name`存储请求中调用的对象。因此，您正在存储一个名为“Arraylist”的对象。

[getAttribute(java.lang.String name)](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getAttribute%28java.lang.String%29)`name`检索从请求中调用的对象。所以你试图检索一个名为“schoolarraylist”的对象。

因此，请更改您的代码以设置与您用于检索它的名称相同的属性，例如：

```
request.setAttribute("schoolarraylist", schoolarraylist); 
```

调用属性无关紧要，但在设置和获取属性时使用的名称保持一致。

顺便说一句，您应该考虑使用标记库，例如[JSLT](http://www.oracle.com/technetwork/java/index-jsp-135995.html)。例如，如果您已将列表作为名为“schoolarraylist”的属性存储在请求中，则可以执行以下操作：

```
<c:forEach var="school" items="${schoolarraylist}">
    <option value="<c:out value='${school.schoolname}'/>"> <c:out value='${school.schoolname}'/>
    </option>
</c:forEach> 
```

# php - 提取多维数组的一部分的有效方法

> ID：13519589
> 
> 赞同：3
> 
> 时间：2012-11-22T20:28:15.537
> 
> 标签：php

我有一个看起来像这样的数组：

```
$a = [
    1 => [
        'title' => 'test',
        'items' => [
            5 => [
                'title' => 'hello',
                'items' => []
            ]
        ]
    ],
    2 => [
        'title' => 'second',
        'items' => [
            7 => [
                'title' => 'hello in second',
                'items' => []
            ]
        ]
    ],
    3 => [
        'title' => 'third',
        'items' => [
            10 => [
                'title' => 'hello in third',
                'items' => []
            ]
        ]
    ],
]; 
```

我需要一种方法来通过密钥提取其中的一部分，无论它们在树中的什么位置。我尝试了几种方法，但我不确定它们的效率如何。如果有帮助，我只需要提取那些有数字键的部分。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:50:22.417

尝试使用[SPL 迭代器：](http://www.php.net/manual/en/spl.iterators.php)

```
class KeyFinderFilterIterator extends FilterIterator {
    private $search = null;
    public function __construct($iterator, $search) {
        $this->search = $search;
        parent::__construct($iterator);
    }
    public function accept(){
        return $this->key() == $this->search;
    }
}

 $it = new KeyFinderFilterIterator(
      new RecursiveIteratorIterator(
           new RecursiveArrayIterator($a), 
           RecursiveIteratorIterator::SELF_FIRST
      ), 
      10
 );

foreach ($it as $key => $value) {
    var_dump($value);
} 
```

# git - git 分支切换和子模块

> ID：13519595
> 
> 赞同：2
> 
> 时间：2012-11-22T20:28:29.840
> 
> 标签：git

我有 2 个分支，`master`并且`secondary`它们通过合并定期保持同步`master => secondary.`

有一次，`master`有几个子模块被删除并重新添加了相同的子模块。

我现在正在尝试合并`master`，`secondary`但每当我尝试从 to 切换时`master`，`secondary`我都会在被覆盖的子模块上收到以下错误消息：

```
warning: unable to rmdir libs/AFNetworking: Directory not empty
warning: unable to rmdir libs/MBProgressHUD: Directory not empty
Branch secondary set up to track remote branch secondary from origin.
Switched to a new branch 'secondary' 
```

'master' 分支是这样开始的：

```
git clone repourl:master.git
cd project_directory
git submodule update --init <= in master at the moment
git checkout secondary 
```

# assembly - 这个操作中的 X 是什么？

> ID：13519596
> 
> 赞同：1
> 
> 时间：2012-11-22T20:28:31.660
> 
> 标签：assembly, avr

`X`下面的操作是什么？

```
ldiw    X, RAMTOP 
```

`ldiw`被定义为宏，取 2 个参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:31:38.413

它是由两个基址寄存器组成的 16 位寄存器的简写：

> X,Y,Z：间接地址寄存器
> 
> （X=R27:R26，Y=R29:R28 和 Z=R31:R30）

# java - Java 字符串三角形

> ID：13519597
> 
> 赞同：1
> 
> 时间：2012-11-22T20:28:31.700
> 
> 标签：java, string

```
import java.util.Scanner;
public class DrawTriangle
{
    public static void main(String[] args)
    {
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter a height");
    while (!scan.hasNextInt()) // while non-integers are present
    {
        scan.next();
        System.out.println ("Bad input. Enter an integer.");
    }
    int input = scan.nextInt();
    for (int x = 1; x <= input; x++)
    {
        for (int y = 0; y < input; y++)
        {
            System.out.print(" ");

            for (int z = 1; z < y; z++)
            {
                System.out.print("x");
            }

            System.out.println();
        }
    }
} 
```

}

我必须制作一个与用户指定的高度相关的 x 三角形。根本无法让它工作，任何帮助将不胜感激。谢谢！

抱歉应该澄清我需要它看起来像这样 -

```
 x
  xxx
 xxxxx 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:30:54.133

您不需要最多 3 级的嵌套循环。刚`2 levels`需。`One`为 遍历`columns`,`one`为 遍历`rows`.

因此，将循环更改为： -

```
 for (int x = 1; x <= input; x++)
    {
        for (int y = 0; y < x; y++)
        {
            System.out.print("x ");
        }
        System.out.println();
    } 
```

**更新 ： -**

对于等边三角形，您需要`x`在开始行之前再添加一个循环以打印空格。这是代码： -

```
 for (int x = 1; x <= input; x++)
    {
        for (int y = 0; y < input - x; y++) {
            System.out.print(" ");
        }
        for (int y = 0; y < x; y++) {
            System.out.print("x ");
        }
        System.out.println();
    } 
```

# php - 从 Facebook 好友中获取共同好友（MySQL 表）

> ID：13519598
> 
> 赞同：0
> 
> 时间：2012-11-22T20:28:39.837
> 
> 标签：php, mysql, facebook

我试图让两个人之间有共同的朋友。我将这些人的朋友保存在一个名为“朋友”的表中，其中包含以下字段：

编号 | facebook_id | 姓名 | uid | 时间戳

*   id = 记录的唯一 ID
*   facebook_id = 朋友的 facebook id
*   name = 朋友的名字
*   uid = 我网站上的用户 uid，它是保存在表格中的人的朋友
*   时间戳=不需要解释:-)

希望有意义，尝试了各种方法来获得朋友，但没有运气

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:27:01.200

我不知道使用子查询是否会更快或 mySQL 已经对其进行了优化。带有子查询的解决方案：

```
 SELECT f1.id, f1.name 
  FROM (SELECT id, name FROM friends WHERE uid=1) f1 
  JOIN (SELECT id, name FROM friends WHERE uid=2) f2 
  ON f1.id=f2.id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:48:57.623

如果 MySQL 有一个运算符，那就太好了`INTERSECT`，但是......

您可以抓住一个人的所有朋友：

```
SELECT id, name
FROM friends
WHERE uid = 1 
```

然后，您可以将此列表加入到朋友表中，为其他用户寻找相同的朋友：

```
SELECT f1.id, f1.name
FROM friends f1
  JOIN friends f2 on f1.id = f2.id
WHERE f1.uid = 1
and f2.uid = 2 
```

这是伪代码，但应该很接近。

# git - 尽管 SSH 密钥有效，但无法将 git repo 推送到 Heroku

> ID：13519601
> 
> 赞同：7
> 
> 时间：2012-11-22T20:28:52.563
> 
> 标签：git, heroku

有很多堆栈文章引用了与我得到的相同的错误消息。

我在另一台计算机上浏览了整个 heroku 设置文档，一切正常。不知道为什么这个不起作用，但我需要它。

当我运行时：

```
> git push -v heroku master

Pushing to git@heroku.com:lit-tor-7969.git
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

Stack 上的所有解决方案都涉及重置 ssh 密钥，我相信 ssh 密钥没问题。我在 Mac OSX 上运行：

```
heroku keys:clear
heroku keys:add 
```

所以在我看来，git 使用的是 /Users/bishopz/.ssh 密钥，而不是我在存储库文件夹中手动生成的密钥。

除了下面的答案，这篇文章似乎提供了很多见解： [Cannot push to Heroku because key指纹](https://stackoverflow.com/questions/8786564/cannot-push-to-heroku-because-key-fingerprint)

我尝试完全删除 .ssh 目录。我跑了

```
heroku keys:clear
ssh-add -D #to remove all ssh identities
ssh-keygen -t rsa -C "email@gmail.com" -f  ~/.ssh/id_rsa_heroku
ssh-add ~/.ssh/id_rsa_heroku
heroku keys:add ~/.ssh/id_rsa_heroku.pub
git push heroku master 
```

现在得到：

```
!  Your key with fingerprint 27:5f:64:4e:2e:f0:41:5b:62:a9:95:d2:02:df:27:85 is not authorized to access lit-tor-7969.
fatal: The remote end hung up unexpectedly 
```

对的回应

```
ssh -vvv git@heroku.com 
```

就是现在：

```
debug1: Host 'heroku.com' is known and matches the RSA host key.
debug1: Found key in /Users/bishopz/.ssh/known_hosts:1
debug1: ssh_rsa_verify: signature correct
debug1: Offering RSA public key: /Users/bishopz/.ssh/id_rsa_heroku
debug1: Server accepts key: pkalg ssh-rsa blen 279
debug1: Authentication succeeded (publickey).
Authenticated to heroku.com ([50.19.85.132]:22). 
```

任何帮助表示赞赏，如果有人可以发布适合我的答案，我将开始新的赏金。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T22:05:13.443

这个问题不是关于 git，而是关于 ssh。:)

Heroku 使用 git，它使用 ssh，它只允许通过公钥进行身份验证。（但我认为这已经很清楚了。）

`heroku keys:add`将公钥发送到heroku。除非您指定显式密钥，否则它将使用`~/.ssh/id_[rd]sa.pub`.

要成功进行身份验证，您需要提供匹配的私钥。除非另有说明，否则 ssh 将使用`~/.ssh/id_[rd]sa`，但如果权限太松，它将拒绝读取。（有关`man ssh`详细信息，请参阅文件部分。）

检查权限是否正常的一种简单方法是将密钥添加到代理： `ssh-add ~/.ssh/id_[rd]sa`

这应该将密钥添加到代理（使用 验证`ssh-add -L`）或抱怨权限错误。（如果一开始没有代理运行，您可以使用 'ssh-agent bash' 启动一个。）

将密钥添加到代理后，代理将负责身份验证，并且您的 git 应该能够毫无问题地连接。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T03:28:30.387

好的，我能够解决它。其中一些答案很有帮助。似乎发生了两件事。

首先，根据[这篇文章](https://stackoverflow.com/questions/8786564/cannot-push-to-heroku-because-key-fingerprint)，ssh 密钥已经被混淆了。通过删除 .ssh 目录解决了这个问题（当然，这删除了使用 .ssh 的其他东西的所有凭据，但以后可以重新创建这些凭据）：

```
heroku keys:clear
ssh-add -D #to remove all ssh identities
ssh-keygen -t rsa -C "email@gmail.com" -f  ~/.ssh/id_rsa_heroku
ssh-add ~/.ssh/id_rsa_heroku
heroku keys:add ~/.ssh/id_rsa_heroku.pub 
```

其次，根据对[本文](https://stackoverflow.com/questions/8917956/deploying-rails-to-heroku-unauthorized-public-key-access/9070685#9070685)的回答，在对 ssh 密钥进行故障排除的过程中，应用名称发生了某种变化。应用名称必须在 /repository_folder/.git/config 中手动编辑

为了获得正确的应用名称，我在网上登录了 heroku.com，然后更新了配置文件：

它包含

```
[remote "heroku"]
    url = git@heroku.com:my_new_app_name.git
    fetch = +refs/heads/*:refs/remotes/heroku/* 
```

感谢所有发布的建议！我很高兴终于踏上了开发新应用的道路！

- 更新 -

每次重新启动计算机时，我都必须重新运行此命令。我可以将其添加到我的 .profile 或其他任何内容中，但认为值得一提。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T03:08:01.203

取决于你的设置。你的 ~/.ssh/ 目录中可能有一个配置文件，用于设置在推送到 heruko 时要用作公钥的文件。

示例（`~/.ssh/config`）：

```
Host 127.0.0.1 #Use Heroku's IP
IdentityFile ~/.ssh/use_this_key 
```

因此，如果是这种情况，请更改 ~/.ssh/config 文件中的设置

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T19:54:19.690

> `.ssh`目录和存储库目录的权限都是 555

ssh 连接的重要因素是[组和其他权限](http://en.wikipedia.org/wiki/Filesystem_permissions#Notation_of_traditional_Unix_permissions)：

*   `/home/user/.ssh`
*   `/home/user`
*   `/home`

（将 /home/user 替换为您的主目录的实际路径）

这个想法是组和其他属性权限`.ssh` **及其所有父目录都不能是可写**的。

`555`.ssh 很好，虽然[建议使用 700](https://stackoverflow.com/questions/13425811/git-ssh-authentication/13428529#13428529)。
检查其父目录： 755 或 555 一直到`/`（没有“2”、“3”或“6”，表示组或其他的可写目录）。

# file - 在 cygwin 上链接到 OpenGL 时未定义的引用

> ID：13519602
> 
> 赞同：1
> 
> 时间：2012-11-22T20:29:00.730
> 
> 标签：file, opengl, linker, makefile

我在运行 Makefile 时遇到链接问题。我已经在 cygwin 上安装了 freeglut 并尝试构建我的项目。它在 MSVS 中工作正常，但出现以下错误：

```
g++ -static obj/MatrixDistortion.o obj/LookAt.o obj/MatrixT.o obj/Matrix2d.o obj/Camera.o obj/Grid.o obj/s_w_project.o obj/Scene.o -o SWproject -L/usr/lib -L/usr/X11/lib -L/lib/cygwin -L/usr/local/lib -lglut -lopengl32 -lglu32
obj/Grid.o:Grid.cpp:(.text+0xa36): undefined reference to `_glPushMatrix'
obj/Grid.o:Grid.cpp:(.text+0xa87): undefined reference to `_glMultMatrixd'
obj/Grid.o:Grid.cpp:(.text+0xaac): undefined reference to `_glTranslatef'
obj/Grid.o:Grid.cpp:(.text+0xab8): undefined reference to `_glClear'
obj/Grid.o:Grid.cpp:(.text+0xad7): undefined reference to `_glColor3f'
obj/Grid.o:Grid.cpp:(.text+0xae3): undefined reference to `_glBegin'
obj/Grid.o:Grid.cpp:(.text+0xb2c): undefined reference to `_glVertex3f'
obj/Grid.o:Grid.cpp:(.text+0xb4f): undefined reference to `_glVertex3f'
obj/Grid.o:Grid.cpp:(.text+0xbb4): undefined reference to `_glVertex3f'
obj/Grid.o:Grid.cpp:(.text+0xbd7): undefined reference to `_glVertex3f'
obj/Grid.o:Grid.cpp:(.text+0xc1e): undefined reference to `_glColor3f'
obj/Grid.o:Grid.cpp:(.text+0xc3d): undefined reference to `_glVertex3f'
obj/Grid.o:Grid.cpp:(.text+0xc5c): undefined reference to `_glVertex3f'
obj/Grid.o:Grid.cpp:(.text+0xc7b): undefined reference to `_glColor3f'
obj/Grid.o:Grid.cpp:(.text+0xc9a): undefined reference to `_glVertex3f'
obj/Grid.o:Grid.cpp:(.text+0xcb9): undefined reference to `_glVertex3f'
obj/Grid.o:Grid.cpp:(.text+0xcd8): undefined reference to `_glColor3f'
obj/Grid.o:Grid.cpp:(.text+0xcf7): undefined reference to `_glVertex3f'
obj/Grid.o:Grid.cpp:(.text+0xd16): undefined reference to `_glVertex3f'
obj/Grid.o:Grid.cpp:(.text+0xd1b): undefined reference to `_glEnd'
obj/Grid.o:Grid.cpp:(.text+0xd20): undefined reference to `_glPopMatrix'
obj/Grid.o:Grid.cpp:(.text+0xd25): undefined reference to `_glFlush'
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld: obj/Grid.o: bad reloc address 0xd in section `.text$_ZNSt4listIP6CameraSaIS1_EED1Ev[std::list<Camera*, std::allocator<Camera*> >::~list()]'
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld: final link failed: Invalid operation
collect2: ld returned 1 exit status
Makefile:14: recipe for target `SWproject' failed 
```

从编译器调用中可以看出，我已将库传递给 g++。

我是否必须单独安装 GL，但在这种情况下，为什么我不会收到错误消息`#include <GL/gl.h>`？

# java - JAVA写入Access数据库并检索和索引

> ID：13519604
> 
> 赞同：5
> 
> 时间：2012-11-22T20:29:11.713
> 
> 标签：java, ms-access, resultset

我正在将数据从 Java 写入 Windows 32 位上的 Access 数据库。当我写一条记录时，我需要检索行 ID/主键，以便我可以 a) 轻松更新记录，如果我愿意，并且 b) 将其他数据交叉引用到该记录。

当在 C 中做了类似的事情时，我可以制作一个可更新的游标，它允许我编写新记录并同时检索行 ID。使用 Java，看起来我应该能够做到这一点，但它会使用以下代码引发异常。

```
 con = openAccessDatabase();
    String selectString = "SELECT ID, RunCount FROM SpeedTable";
    try {
        PreparedStatement selectStatement = con.prepareStatement(selectString, 
                ResultSet.TYPE_SCROLL_INSENSITIVE,
                ResultSet.CONCUR_UPDATABLE);
        ResultSet idResult = selectStatement.executeQuery();
        int id;
        for (int i = 0; i < nWrites; i++) {
            idResult.moveToInsertRow();
            idResult.updateObject(1, null); // this line makes no difference whatsoever !
            idResult.updateInt(2, i);
            idResult.insertRow(); // throws java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver]Error in row
            id = idResult.getInt(1);
        }
        selectStatement.close();
    } catch (SQLException e) {
        e.printStackTrace();
    } 
```

我唯一能做的就是写一条新记录，然后运行一个不同的查询来取回 Row id ...

```
 String insertString = "INSERT INTO SpeedTable (RunCount) VALUES (?)";
    String idString = "SELECT ID FROM SpeedTable ORDER BY ID DESC";
    //      
    try {
        ResultSet idResult = null;
        PreparedStatement preparedStatement, idStatement;
        preparedStatement = con.prepareStatement(insertString,
                ResultSet.TYPE_FORWARD_ONLY,
                ResultSet.CONCUR_READ_ONLY);
        idStatement = con.prepareStatement(idString, 
                ResultSet.TYPE_FORWARD_ONLY,
                ResultSet.CONCUR_READ_ONLY);

        for (int i = 0; i < nWrites; i++) {
            // write the data into the database
            preparedStatement.setInt(1, i);
            preparedStatement.execute();
            // re-run the query to get the index back from the database. 
            idResult = idStatement.executeQuery();
            idResult.next();
            int lastIndex = idResult.getInt(1);
            idResult.close();
        } 
```

这可行，但当表中有超过 1000 条记录时，它变得非常慢。如果程序的两个部分同时开始编写，也存在返回错误 ID 的风险（不太可能但并非不可能）。

我知道至少有一个建议是不使用 Java 或不使用 Access，但它们不是选项。它也是免费开源软件包的一部分，所以我不愿意为任何东西付费。编写我自己的 C JNI 接口来提供我的应用程序所需的基本功能就更不吸引人了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:26:35.963

不确定这是否适用于 MS Access，但您可以尝试：

```
st.executeUpdate("INSERT INTO SpeedTable (RunCount) VALUES (1000)", Statement.RETURN_GENERATED_KEYS);
ResultSet rs = st.getGeneratedKeys();
rs.next();
long id = rs.getLong(1); 
```

# python - 来自不同应用程序的区域设置消息在模板中解析

> ID：13519605
> 
> 赞同：0
> 
> 时间：2012-11-22T20:29:16.467
> 
> 标签：python, django, internationalization

Django 应用程序可以有自己的消息文件，位于它们的目录中。并且，假设我有 2 个不同的应用程序，即不同地翻译相似的词。很明显，当在应用程序内部使用gettext时，它将由应用程序自己的消息文件进行翻译。当我在模板中使用 {%trans%} 标签时，如何预测将选择哪个翻译？渲染模板时，django 如何解决这个问题，是否有顺序或优先级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:01:22.943

如果是您开发的应用程序，确保使用正确翻译的最佳方法是在模板或代码中[指定上下文。](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#contextual-markers)从 Django 1.4 开始完全支持这一点。

# eclipse - Mylyn 提交默认消息丢失

> ID：13519610
> 
> 赞同：6
> 
> 时间：2012-11-22T20:29:52.207
> 
> 标签：eclipse, git, github, task, mylyn

我将 EGit 与 mylyn 一起使用。当我以前将代码提交到 git 存储库时，提交对话框将默认填充显示任务 ID、任务描述等的消息。

现在我再也看不到默认提交消息了​​。

我在网上查了一下，人们建议需要安装 EGit Mylyn 插件，而我确实安装了该插件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T06:03:04.397

您在*Preferences -> Mylyn -> Team -> Commit Comment Template*中是否有有用的价值，并且是否选中了该消息正上方的“使用任务上下文自动管理（更改集）”复选框？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:59:54.870

只有当您尝试签入至少一个在相关任务处于活动状态时已更改的文件并且您已激活此任务（蓝色球）时，才会显示提交消息。

此行为已在最后一个版本（3.7？）中进行了更改，然后才足以使任务处于活动状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T08:31:02.103

*如果您在Preferences -> Mylyn*下没有 Team 选项，则需要从[http://download.eclipse.org/mylyn/releases/latest安装 Mylyn 任务集中界面](http://download.eclipse.org/mylyn/releases/latest)

*完成后，为Commit Comment Template*设置一些合理的内容。我用

```
${connector.task.prefix} ${task.key}: 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-15T15:53:30.247

在为我们的错误跟踪器添加 Mylyn 连接器后，我在全新的 Eclipse 2021-12 安装中遇到了同样的问题。

问题是缺少插件，我做到了：

*   帮助 -> 安装新软件
*   在“使用”下选择相关版本
*   在“协作”下选择“Eclipse 的 Git 集成 - 以任务为中心的界面”
*   安装插件

奇怪的是，Eclipse 的“Java”版本会发生这种情况，但默认情况下捆绑插件的“企业”版本不会发生这种情况

# c++ - 没有在 C++ 中运行函数的默认构造函数？

> ID：13519614
> 
> 赞同：-2
> 
> 时间：2012-11-22T20:30:21.600
> 
> 标签：c++

我想在 main 中运行函数 Run，但由于没有默认构造函数，我不允许创建对象。当我尝试创建默认构造函数时，我收到消息，“错误”Game::Game int maxComponents)“没有提供以下初始化程序：”

```
//Game.h 
#pragma once
#include "GameComponent.h"
#include <time.h>
class Game
{
private:
    int componentCount;
    GameComponent** components;
    const int TICKS_1000MS;
public:

    Game(){}    //this does not work either
    Game(int maxComponents){}   //this does not work as my default constructor
    ~Game();
    void Add(GameComponent*);
    void Run();

};

//Game.cpp
#pragma once
#include "StdAfx.h"
#include "Game.h"
#include <iostream>
#include<time.h>
using namespace std;

void Game::Add(GameComponent*)
{
    components= new GameComponent*[componentCount];

}
void Game::Run()
{

    time_t rawtime;
    struct tm * timeinfo;

    time ( &rawtime );
    timeinfo = localtime ( &rawtime );      
    //cout << timeinfo->tm_hour<< ":" << timeinfo->tm_min << ":" << timeinfo->tm_sec << endl;

    for(int n=0;n<componentCount;n++)
    {
        components[n]->Update(timeinfo);

    }
}

Game::~Game()
{
}

//main.cpp
#include "stdafx.h"
#include <iostream>
#include "Game.h"
#include <time.h>

using namespace std;
int _tmain(int argc, _TCHAR* argv[])
{
    Game obj1;
    obj1.Run();
    system("pause");
    return 0;
} 
```

那么，我如何在这里创建一个默认构造函数呢？我也尝试过使用成员初始化，但不起作用。和复制构造函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T20:32:58.257

默认构造函数是不带参数的构造函数。因此，您应该声明一个如下所示的构造函数：

```
Game() { } 
```

您可以保留其他构造函数 - 普通函数重载适用于构造函数，因此当您指定单个整数参数时它将使用您的 Game(int) 构造函数，当您指定不指定参数时它将使用 Game()。

但是，在您的情况下`Game`包含一个`const int`成员 ( `TICKS_1000MS`)。因为它是`const`，所以它应该在构造函数中被初始化。所以你应该做这样的事情：

```
Game() : TICKS_1000MS(123) { } // replace 123 with whatever the value should be 
```

您需要为所有构造函数执行此操作。

拥有一个始终初始化为相同值的类的非静态 const 成员（与作为参数传入构造函数的值相反）有点愚蠢。考虑将其改为枚举：

```
enum { TICKS_1000MS = 123 }; 
```

或者，`static const`成员：

```
static const int TICKS_1000MS; 
```

并将其初始化为`Game.cpp`：

```
const int Game::TICKS_1000MS = 123; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T20:33:26.423

只要您定义了除默认构造函数之外的构造函数，就不再提供默认构造函数，因此您必须手动定义它：

```
public:
    Game() {}
    Game(int maxComponents){} 
```

现在你有一个默认构造函数和一个重载构造函数，它接受 1 个整数参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T20:33:58.103

您将需要创建默认的无参数构造函数。当您定义构造函数时，您将不再获得在幕后创建的默认值。

```
Game(){} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T20:33:31.290

在您的情况下，默认构造函数是不带任何参数的构造函数`Game(){}`。

您似乎没有使用构造函数参数，但如果使用，则必须提供默认值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T20:50:40.887

可能您可以按照这些思路进行操作，您的 Game 类需要在两个构造函数中初始化 const int ：

```
class Game
{
private:
    int componentCount;
    GameComponent** components;
    const int TICKS_1000MS;
public:

    Game(): TICKS_1000MS(100)
    {}    //this does not work either
    Game(int maxComponents): TICKS_1000MS(100)
    {}   //this does not work as my default constructor
    ~Game();
    void Add(GameComponent*);
    void Run();

}; 
```

正如其他人所指出的，您需要在 ctor 或初始化程序列表中初始化 const 数据。

# python - 如何复制定义函数以对其进行“n”变体？（Python）

> ID：13519618
> 
> 赞同：0
> 
> 时间：2012-11-22T20:30:50.587
> 
> 标签：python, arrays, function, copy

我需要制作此代码的“n”份副本：

```
ccfarray1=[]
def ccf1(binnum):
    for i in datarange:
        ccf=((a[i]-xbar)*(c[(i-binnum)]-ybar))/(norm*stdevx*stdevy)
        parray.append(ccf)
        calc=sum(parray)
    ccfarray1.append(calc)
    del parray[:]
    return ccfarray1 
```

因此，例如它的一份副本是：

```
ccfarray2=[]
def ccf2(binnum):
    for i in datarange:
        ccf=((a[i]-xbar)*(c[(i-binnum)]-ybar))/(norm*stdevx*stdevy)
        parray.append(ccf)
        calc=sum(parray)
    ccfarray2.append(calc)
    del parray[:]
    return ccfarray2 
```

因此每次创建一个新数组时，ccfarray'n'。

我需要这个大约 20 次，但复制和粘贴需要很多。是否有一个优雅的解决方案来编写这个代码，如果我需要更改我需要它的次数。

我需要很多这些，因为我把它们当作垃圾箱。如果 'binnum' 落在某个范围之间，那么我需要将它附加到不同的数组，而不是 binnum 落在不同的范围之间。

如果有代码可以在没有这么多代码的情况下做到这一点，那很好，但我不知道该怎么做！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:58:37.173

我不完全确定你想用你的函数做什么，但你可以在闭包内创建函数，然后将它们作为项目放入某个列表，如下所示：

```
def get_functions(count):
    ccfarrays=map(lambda: [], range(count))
    def get_nth_func(n):
        def ccf1(binnum):
            for i in datarange:
                ccf=((a[i]-xbar)*(c[(i-binnum)]-ybar))/(norm*stdevx*stdevy)
                parray.append(ccf)
                calc=sum(parray)
            ccfarray[n].append(calc)
            del parray[:]
            return ccfarray[n]
        return ccf1
    return map(get_nth_func, range(count) 
```

所以，如果你想要 20 个函数，你只需像这样创建它们：

```
f = get_functions(20) 
```

而不是这样称呼他们：

```
f[6](binnum) 
```

# expressionengine - 转换标题字段中的空格？

> ID：13519627
> 
> 赞同：0
> 
> 时间：2012-11-22T20:32:08.257
> 
> 标签：expressionengine

如何在每个单词之间输出带有“％20”的标题字段？由于空格，我的 mailto 链接无法验证，例如：

```
mailto:?subject=My Title 
```

我需要：

```
mailto:?subject=My%20Title 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:51:28.527

您需要做的是“URL 编码”标题（也就是说，您需要将任何无效字符转换为百分比编码，空格不是唯一的问题）。

Devot:ee 上的这个插件听起来应该可以解决问题：[URL 编码](http://devot-ee.com/add-ons/url-encode)

# java - java.awt.Robot 线程无法停止/销毁？

> ID：13519632
> 
> 赞同：3
> 
> 时间：2012-11-22T20:32:37.887
> 
> 标签：java, thread-safety, awtrobot

我使用 java.awt.Robot 制作了桌面远程控制应用程序，并且工作正常。应用程序集成在另一个应用程序系统中，所以我希望能够从外部系统启动/停止远程控制，但我发现了一个奇怪的问题 - 我无法停止机器人。

我尝试了几件事：在线程内运行它（所以我可以停止线程），使机器人对象为空而不是调用 System.gc() 但问题不在于引用它仍在运行的机器人线程（在所有其他线程被破坏之后）。在调试中我可以看到正在运行的线程：Daemon Thread [AWT-Windows] (Running)。

这是将重现我的问题的代码：

```
public class RobotDestroy {

  public static void main(String[] args) {

    try {
        Robot r = new Robot();
    } catch (AWTException e) {
        e.printStackTrace();
    }

    }

} 
```

有没有人经历过类似的事情？有什么解决办法吗？

谢谢

**编辑：**

这是在可以停止**但机器人实例仍在运行的线程中运行机器人的示例：**

```
public class RobotDestroy {

public static void main(String[] args) {

    RobotThread rt = new RobotThread();
    rt.start(); 

    try {
        //do some work before thread shut down
        Thread.sleep(5000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    rt.shutdown();          
}

private static class RobotThread extends Thread {

    public Robot robot;
    volatile boolean alive;

    public RobotThread(){
        try {
            this.robot = new Robot();
            this.alive = true;
        } catch (AWTException e) {
            e.printStackTrace();
        }
    }

    public void run(){

        while(alive){
            System.out.println("alive");
            try{
                robot.delay(5000);
                sleep(1000);

            }catch(Exception e){
                e.printStackTrace();
            }
        }           
    }

    public void shutdown(){
        this.alive = false;
        robot = null;
        System.out.println("shutdown");
    }       
} 
```

}

**编辑 2**

我尝试了医生杀手的建议，虽然这是一个很好的建议，但机器人线程仍在运行。证明它的最佳方法是在创建机器人实例之前和之后打印出线程：

```
 Set<Thread> threadSet = Thread.getAllStackTraces().keySet();
    Thread[] threadArray = threadSet.toArray(new Thread[threadSet.size()]);

    for (int i = 0; i < threadArray.length; i++) {
        System.out.println(threadArray[i].getName());
    } 
```

**更新：** 经过大量调试后，我意识到问题不在 java.awt.Robot 类中 - 是 java.awt.Toolkit 启动了 AWT-Window 线程，该线程在应用程序结束后仍然运行。Robot 对象具有 RobotPeer (java.awt.peer.RobotPeer)，它由以下方法返回： ((ComponentFactory)toolkit).createRobot(this, screen);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:37:41.453

通常你会在接收远程事件的线程的 while(true) 循环中放置一个标志，这样你就会有类似 while(isAlive) ...读取远程事件 ...如果远程事件断开连接，那么你就退出循环和机器人将不再获得命令。

机器人还活着，因为你的程序一直在调用它……你要停止循环

也包括在你的 RobotThread

```
import java.awt.AWTException;
import java.awt.Robot;
import java.util.LinkedList;

public class RobotDestroy {

    public static void main(String[] args) {
        //Set<Thread> threadSet = Thread.getAllStackTraces().keySet(); Thread[] threadArray = threadSet.toArray(new Thread[threadSet.size()]); for (int i = 0; i < threadArray.length; i++) { System.out.println("Init " + threadArray[i].getName()); }
        RobotThread rt = new RobotThread();
        rt.start(); 

        // Listen to the upcomming commands...and push them to the RobotThread

        rt.shutdown();          
    }

    private static class RobotThread extends Thread {

        public Robot robot;

        public RobotThread(){
            try {
                this.robot = new Robot();
            } catch (AWTException e) {
                e.printStackTrace();
            }
        }

        public void run(){
            Command currentCommand = getNextCommand();
            while(currentCommand.getType() != CommandType.KILL){
                // Process the command no sleep...
                // ...
                // ...

                currentCommand = getNextCommand();
            }

            System.out.println("DIED ");
        }

        private LinkedList<Command> commands = new LinkedList<Command>();

        enum CommandType {
            KILL,
            DO_SOMETHING
        }

        private synchronized Command getNextCommand() {
            while(commands.isEmpty()) {
                try {
                    System.out.println("WAITING");
                    wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            return commands.removeFirst();
        }

        public synchronized void pushCommand(Command comm) {
            commands.addLast(comm);
            notify();
        }

        public synchronized void shutdown(){
            commands.clear();
            pushCommand(new Command(CommandType.KILL));
            System.out.println("shutdown");
            //Set<Thread> threadSet = Thread.getAllStackTraces().keySet(); Thread[] threadArray = threadSet.toArray(new Thread[threadSet.size()]); for (int i = 0; i < threadArray.length; i++) { System.out.println("End " + threadArray[i].getName()); }
        }  

        class Command {
            private CommandType cmdType;
            public Command(CommandType type) {
                this.cmdType = type;
            }
            public CommandType getType() { return cmdType; }
        }
    }
} 
```

# javascript - 如何在javascript中过滤对象

> ID：13519639
> 
> 赞同：0
> 
> 时间：2012-11-22T20:33:34.653
> 
> 标签：javascript, jquery, object

我在 javascript 中工作并坚持理解对象。这是我的场景。

我有一个对象，其中又包含多个对象。

```
data {
"aa" : object
"bb" : object
"cc" : object
}

//expanding aa bb and cc

aa {
name : "a"
type : "static"
value : "123"
}

bb {
name : "b"
type : "dyn"
value : "343"
}

cc {
name : "c"
type : "dyn"
value : "545"
} 
```

现在我想要实现的是我有一个对象，它应该有那些类型为“dyn”的对象，所以我想要一个像这样的 reqdata 对象

```
reqdata {
"bb" : object
"cc" : object
} 
```

我已经编写了一个代码来执行此操作，但它无法正常工作，因为我的 reqdata 拥有所有数据。

```
 var reqData = $.each (data, function(key, d){
        if (type === "dyn")
            return d;                             
        }); 
```

任何人都可以指导我循环对象的正确有效方法。

感谢任何帮助和指导将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:39:51.720

您需要创建一个新对象，测试`type`属性，并将当前子对象分配给新对象，如果这`type`是您想要的。

```
 // v--- Holds the results
var newObj = {};
                       //   v--- The current sub-object
$.each(data, function(key, obj){
    if (obj.type === "dyn") // <-- Test its `type` property
        newObj[key] = obj;  // <--   and assign to `newObj` if it matches
}); 
```

您应该注意，`obj`当您将其分配给`newObj`. 您正在复制对 的引用`obj`。

这意味着`data`和`newObj`共享相同的对象。通过 所做的更改`data`可以从 观察到`newObj`，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:54:28.690

如果你习惯于函数式编程，你可以为对象编写自己的过滤函数：

```
function oFilter (obj, f) {
    var result = {};
    for (var x in obj) {
        if (
            obj.hasOwnProperty(x) &&
            f(x,obj[x])
        ) {
            result[x] = obj[x];
        }
    }
    return result;
} 
```

然后它会如你所料：

```
var reqData = oFilter(data, function(key,d){
    if (d.type === "dyn") return true;
    return false;
}); 
```

类似的地图：

```
function oMap (obj, f) {
    var result = {};
    for (var x in obj) {
        if (obj.hasOwnProperty(x)) {
            result[x] = f(x,obj[x]);
        }
    }
    return result;
} 
```

不过，Reduce 对对象没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T20:54:47.017

更短。

```
$(data).each( function(){
    if(this.type === 'dyn'){ doStuff(this); }
} ); 
```

现在，IMO，构造函数名称更接近于 JS 中的类型。我将使用函数构造函数名称“Dyn”构建这些对象并检查`<instance>.constructor.name`“Dyn”，但您必须针对 IE<=8 进行规范化，这涉及解析`<instance>constructor.toString()`，因此可能比它的价值更麻烦。

But if you want to understand JS objects. Ditch the jQuery until you do. Learn how to use:

```
for(var x in object){
    console.log('propertyLabel:' +x+', property:' + object[x]+'\n');
} 
```

Then go back to understanding how jQuery itself works. Lots of juicy stuff under the hood there.

# python - 如何解决迭代错误期间字典更改大小？

> ID：13519644
> 
> 赞同：15
> 
> 时间：2012-11-22T20:34:09.007
> 
> 标签：python, dictionary

我想在字典中弹出所有大值及其键，并保留最小的。这是我的程序的一部分

```
for key,value in dictionary.items():
    for key1, value1 in dictionary.items(): 
            if key1!= key and value > value1:
                dictionary.pop(key)             
    print (dictionary) 
```

这导致

```
RuntimeError: dictionary changed size during iteration 
```

我怎样才能避免这个错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-09-23T06:38:17.880

在 Python3 中，尝试

```
for key in list(dict.keys()):
    if condition:
        matched
        del dict[key] 
```

循环 dict 以更新其密钥时，还应注意 1 件事：

代码1：

```
keyPrefix = ‘keyA’
for key, value in Dict.items():
    newkey = ‘/’.join([keyPrefix, key])
    Dict[newkey] = Dict.pop(key) 
```

代码2：

```
keyPrefix = ‘keyA’
for key, value in Dict.keys():
    newkey = ‘/’.join([keyPrefix, key])
    Dict[newkey] = Dict.pop(key) 
```

code1/code2 的结果是：

```
{‘keyA/keyA/keyB’ : ”, ‘keyA/keyA/keyA’: ”} 
```

我解决这个意外结果的方法：

```
 Dict = {‘/’.join([keyPrefix, key]): value for key, value in Dict.items()} 
```

链接：[https ://blog.gainskills.top/2016/07/21/loop-a-dict-to-update-key/](https://blog.gainskills.top/2016/07/21/loop-a-dict-to-update-key/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-22T20:55:54.793

## 替代解决方案

如果您正在寻找字典中的最小值，您可以这样做：

```
min(dictionary.values()) 
```

如果不能使用 min，则可以使用 sorted：

```
sorted(dictionary.values())[0] 
```

## 为什么我会收到此错误？

在旁注中，您遇到的原因`Runtime Error`是在内部循环中您修改了外部循环所基于的迭代器。当`pop`外部循环尚未到达的条目并且外部迭代器到达它时，它会尝试访问已删除的元素，从而导致错误。
如果你尝试在 Python 2.7（而不是 3.x）上执行你的代码，实际上你会得到一个`Key Error`.

## 我该怎么做才能避免错误？

如果要根据迭代器修改循环内的*可迭代*对象*，*则应使用它的[深层副本](http://docs.python.org/2/library/copy.html#copy.deepcopy)。

 ** * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-22T21:02:49.590

您可以使用[copy.deepcopy](http://docs.python.org/2/library/copy.html)制作原始字典的副本，在更改原始字典时循环复制副本。

```
from copy import deepcopy

d=dict()
for i in range(5):
    d[i]=str(i)

k=deepcopy(d)

d[2]="22"
print(k[2])
#The result will be 2. 
```

你的问题是迭代你正在改变的东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T20:37:49.297

在循环期间记录密钥，然后在循环完成时执行 dictionary.pop(key) 。像这样：

```
for key,value in dictionary.items():
    for key1, value1 in dictionary.items(): 
            if key1!= key and value > value1:
                storedvalue = key
    dictionary.pop(key) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-22T20:57:05.880

这是解决它的一种方法：

1.  从字典中，得到一个键列表，按值排序
2.  由于此列表中的第一个键具有最小值，因此您可以使用它做任何您想做的事情。

这是一个示例：

```
# A list of grades, not in any order
grades = dict(John=95,Amanda=89,Jake=91,Betty=97)

# students is a list of students, sorted from lowest to highest grade
students = sorted(grades, key=lambda k: grades[k])

print 'Grades from lowest to highest:'
for student in students:
    print '{0} {1}'.format(grades[student], student)

lowest_student = students[0]
highest_student = students[-1]
print 'Lowest grade of {0} belongs to {1}'.format(grades[lowest_student], lowest_student)
print 'Highest grade of {0} belongs to {1}'.format(grades[highest_student], highest_student) 
```

这里的秘诀在于 sorted() 函数：我们不是按键排序，而是按值排序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T20:48:00.763

当我现在阅读您的循环时，您希望只保留单个最小元素，但不使用`min`. 因此，与您的代码现在执行的操作相反，检查是否 `value1 < minValueSoFar`，如果是，请将 key1 保持为 minKeySoFar。然后在循环结束时（如 Zayatzz 建议的那样），执行`dictionary.pop(minKeySoFar)`

顺便说一句，我注意到`key1!=key`假设一个相当长的列表，测试是不相关的并且计算效率低下。

```
minValueSoFar = 9999999;   # or whatever
for key,value in dictionary.items():
    if value < minValueSoFar:
        minValueSoFar = value
        minKeySoFar = key
dictionary.pop(minKeySoFar)   # or whatever else you want to do with the result 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-22T21:09:36.977

如果您只想保留具有最小值的键，我会首先找到该项目，然后创建一个仅包含它的新字典。如果你的字典是`d`，这样的事情会在一行中完成：

```
d = dict((min(d.items(), key=lambda item: item[1]),)) 
```

这不仅可以避免在迭代字典时更新字典的任何问题，而且可能比删除所有其他元素更快。

如果您出于某种原因必须就地进行修改，则以下方法会起作用，因为它会在修改字典之前复制所有键：

```
key_to_keep = min(d.items(), key=lambda item: item[1])[0]

for key in list(d):
    if key != key_to_keep:
        d.pop(key) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-05T06:44:00.863

迭代期间字典更改大小的替代解决方案：

```
for key,value in list(dictionary.items()):
    for key1, value1 in list(dictionary.items()): 
            if key1!= key and value > value1:
                dictionary.pop(key)             
print (dictionary) 
```

> 最好**谨慎使用！**使用此类代码时，因为`list(dictionary.items())`在编译器第一次进入循环时计算。因此，对字典所做的任何更改都不会影响当前循环内的进程。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-13T22:09:39.140

您可以使用要删除的值创建一个列表，然后运行第二个 for 循环：

```
for entry in (listofkeystopop):
        dictionary.pop(entry) 
```*

# objective-c - 静音 Cocoa 错误提示音

> ID：13519647
> 
> 赞同：3
> 
> 时间：2012-11-22T20:34:27.120
> 
> 标签：objective-c, macos, cocoa, keyboard, first-responder

我有一个 Cocoa 应用程序，它通过视图层次结构中的自定义视图捕获按键。这个视图实现了`keyUp`和`keyDown`方法，并且接收到按键。即便如此，Cocoa 还是坚持每次按键都播放系统错误音/叮当。有什么解决办法吗？

注意：虽然我试图让这个视图成为第一响应者，但它不起作用。这可能与它有关。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T21:27:57.837

如果您尝试将视图设置为第一响应者但未成功，则很可能是因为`NSView`返回`NO`. [`acceptsFirstResponder`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/NSResponder/acceptsFirstResponder)您可以让您的`NSView`子类覆盖`acceptsFirstResponder`以返回 YES：

```
- (BOOL)acceptsFirstResponder {
    return YES;
} 
```

那应该消除哔哔声。或者，您可以让`NSView`子类 override`NSResponder`的`performKeyEquivalent:`方法返回 YES，这也应该消除 NSBeeps：

```
- (BOOL)performKeyEquivalent:(NSEvent *)event {
    return YES;
} 
```

更新：

不知道该建议什么。我实际上写了一个“键盘清洁助手”应用程序，它的设计基本上是为了做一些类似于你想要的事情。（当我想清洁键盘时，我在笔记本电脑上使用了它，并且没有按数百次按键来随机重命名文件或导致重复的错误哔声）。

示例项目： http: [//www.markdouma.com/developer/KeyboardCleanerHelper.zip](http://www.markdouma.com/developer/KeyboardCleanerHelper.zip)

运行该应用程序，我根本无法让它发出哔哔声（通知呼叫已记录到控制台）。

# stm32 - 如何为 CAN 配置 STM32103 并将引脚重新映射到 PB8 和 PB9

> ID：13519648
> 
> 赞同：2
> 
> 时间：2012-11-22T20:34:31.603
> 
> 标签：stm32, can-bus

在这个阶段，我试图简单地使用 STM32F103 V8T6 上的 CAN 发送传输。该芯片是在我公司定制的板上实现的。查看原理图，我看到 CAN Tx 和 Rx 引脚被重新映射到 PB9 (Tx) 和 PB8 (Rx)。话虽如此，我已经能够成功地使用 LoopBack 模式（使用 STM "V3.5.0" 的最新示例），但无法让 Normal 模式正常工作。如果有人在我的初始配置中发现明显缺陷，可以告诉我吗？！我只包含了与配置相关的代码，省略了传输函数调用。

```
int main (void)
{

RCC_APB2PeriphClockCmd(RCC_APB2Periph_AFIO, ENABLE);

RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);

RCC_APB1PeriphClockCmd(RCC_APB1Periph_CAN1, ENABLE);

NVIC_InitTypeDef NVIC_InitStructure;

NVIC_InitStructure.NVIC_IRQChannel = USB_LP_CAN1_RX0_IRQn;

NVIC_InitStructure.NVIC_IRQChannel = CAN1_RX0_IRQn;

NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;

NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;

NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;

NVIC_Init(&NVIC_InitStructure);

 GPIO_InitTypeDef GPIO_InitStructure;

/* Configure CAN pin: RX */

GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8;

GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;

GPIO_Init(GPIOB, &GPIO_InitStructure);

/* Configure CAN pin: TX */

GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;

GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;

GPIO_Init(GPIOB, &GPIO_InitStructure);

// Remap2 is for PB8 and PB9

GPIO_PinRemapConfig(GPIO_Remap2_CAN1 , ENABLE);

} 
```

这是我的传输功能

```
void CAN_TransmitMyMsg(void)
{
  CAN_InitTypeDef        CAN_InitStructure;
  CAN_FilterInitTypeDef  CAN_FilterInitStructure;
  CanTxMsg TxMessage;
  uint32_t i = 0;
  uint8_t TransmitMailbox = 0;
  uint8_t status = 0;

  /* CAN register init */
  CAN_DeInit(CANx);
  CAN_StructInit(&CAN_InitStructure);

  /* CAN cell init */
  CAN_InitStructure.CAN_TTCM=DISABLE;
  CAN_InitStructure.CAN_ABOM=DISABLE;
  CAN_InitStructure.CAN_AWUM=DISABLE;
  CAN_InitStructure.CAN_NART=DISABLE;
  CAN_InitStructure.CAN_RFLM=DISABLE;
  CAN_InitStructure.CAN_TXFP=DISABLE;
  CAN_InitStructure.CAN_Mode=CAN_Mode_Normal;

  /* Baudrate = 125kbps*/
  CAN_InitStructure.CAN_SJW=CAN_SJW_1tq;
  CAN_InitStructure.CAN_BS1=CAN_BS1_2tq;
  CAN_InitStructure.CAN_BS2=CAN_BS2_3tq;
  CAN_InitStructure.CAN_Prescaler=48;
  CAN_Init(CANx, &CAN_InitStructure);

  /* CAN filter init */
  CAN_FilterInitStructure.CAN_FilterNumber=0;
  CAN_FilterInitStructure.CAN_FilterMode=CAN_FilterMode_IdMask;
  CAN_FilterInitStructure.CAN_FilterScale=CAN_FilterScale_32bit;
  CAN_FilterInitStructure.CAN_FilterIdHigh=0x0000;
  CAN_FilterInitStructure.CAN_FilterIdLow=0x0000;
  CAN_FilterInitStructure.CAN_FilterMaskIdHigh=0x0000;
  CAN_FilterInitStructure.CAN_FilterMaskIdLow=0x0000;  
  CAN_FilterInitStructure.CAN_FilterFIFOAssignment=0;
  CAN_FilterInitStructure.CAN_FilterActivation=ENABLE;
  CAN_FilterInit(&CAN_FilterInitStructure);

  /* transmit */
  TxMessage.StdId=0x11;
  TxMessage.RTR=CAN_RTR_DATA;
  TxMessage.IDE=CAN_ID_STD;
  TxMessage.DLC=2;
  TxMessage.Data[0]=0xCA;
  TxMessage.Data[1]=0xFE;

  TransmitMailbox=CAN_Transmit(CANx, &TxMessage);

  //wait until CAN transmission is OK
  i = 0;
  while((status != CANTXOK) && (i != 0xFFFF))               
  {
    status = CAN_TransmitStatus(CANx, TransmitMailbox);
    i++;
  }

} 
```

该资源很有帮助，但最终不足。

[STM32F103微控制器CAN报文](https://stackoverflow.com/questions/6195033/stm32f103-micro-controller-can-messages)

谢谢！

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:03:34.000

我有类似的问题。我的问题是错误选择了通信参数（时间量子和预分频器）

我以这种方式调试它：

*   我检查了 CAN 收发器的 RSS 引脚（我使用 MCP 2551 I/P）
*   我将其切换为环回，并使用示波器检查 TX 通道和 CANH 到 CANL 上的输出信号（如果输出配置正确）
*   我查看了 RCC 配置 - APB1 时钟的预分频器已更改为 2（我排除了 4）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T08:07:46.650

为了成功传输，CAN 控制器需要一个“确认”位，它是 CAN 协议的一部分。如果您的 CAN 监视器（由 NI 提供）处于侦听模式，则不会有确认位（！），因此您不会在发送端获得成功传输的指示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:04:14.393

GPIO_Remap2_CAN1 将 CAN1 外设重新映射到 PD0 和 PD1，而不是 PB8 和 PB9。你想要 GPIO_Remap1_CAN1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-04T10:41:37.987

STD 外围库已弃用，但由于我找不到更好的示例，因此我使用了您无法正常工作的代码作为基础。
最初，我的行为与它仅在环回中起作用的行为相同。删除重新映射到引脚 PB8 和 PB9**并**为 TX 引脚设置高速 GPIO 后，它开始工作。这是我对 PA11 和 PA12 的 GPIO 设置

```
RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);
/* Configure CAN pin: RX */
GPIO_InitTypeDef GPIO_InitStructure;
GPIO_InitStructure.GPIO_Pin = GPIO_Pin_11;
GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;
GPIO_Init(GPIOA, &GPIO_InitStructure);

/* Configure CAN pin: TX */
GPIO_InitStructure.GPIO_Pin = GPIO_Pin_12;
GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;
GPIO_InitStructure.GPIO_Speed = **GPIO_Speed_50MHz**;
GPIO_Init(GPIOA, &GPIO_InitStructure); 
```

其余的我保持不变。（除了更改`CANx`为`CAN1`）。

# ruby-on-rails - 这个查询效率不高

> ID：13519650
> 
> 赞同：0
> 
> 时间：2012-11-22T20:35:06.080
> 
> 标签：ruby-on-rails, postgresql, search

我有一个搜索字段，它从两个不同的表中查询三个不同的列：职位表中的“公司”和“行业”以及教育表中的“学校”。它成功返回所有满足输入搜索字段的所有字段的用户（使用 select_tag）。这是我的观点：

```
 <%= form_tag(search_path, :method => :get, :id => "people_search") do %>
    <div class="row-fluid">  
      <div class="span4">
        <table>
          <tr>
            <td>
              <div class="search-table" style="padding-left:55px">
                <%= select_tag "all", options_for_select((@visible_companies + @visible_industries + @visible_schools).uniq, params[:all]), { :placeholder => "Search by companies, industries and schools...", :multiple => true, :js => "if (evt.keyCode == 13) {form.submit();}" } %>
              </div>
            </td>
            <td>
              <%= submit_tag "Add", id: "send-button", style:"width:175px;" %>
            </td>
          </tr>
        </table>
      </div>
    <% end %>
  </div> 
```

和控制器：

```
 @visible_positions = Position.where{ is_visible.eq('true') }
    @visible_educations = Education.where{ is_visible.eq('true') }

    @visible_companies = @visible_positions.order("LOWER(company)").map(&:company).uniq
    @visible_industries = @visible_positions.order("LOWER(industry)").map(&:industry).uniq
    @visible_schools = @visible_educations.order("LOWER(school)").map(&:school).uniq

    @c = @visible_positions.where{company.in(my{params[:all]})}.map(&:user_id)
    @i = @visible_positions.where{industry.in(my{params[:all]})}.map(&:user_id)
    @s = @visible_educations.where{school.in(my{params[:all]})}.map(&:user_id)

    @C = @visible_positions.where{company.in(my{params[:all]})}.map(&:company)
    @I = @visible_positions.where{industry.in(my{params[:all]})}.map(&:industry)
    @S = @visible_educations.where{school.in(my{params[:all]})}.map(&:school)

    @blacklist = []    
    @cis = @c + @i + @s
    @experiences = ([@C,@I,@S].reject(&:empty?).reduce(:&))

    @cis.uniq.each do |user_id|

      unless @C.empty?
        @C.uniq.each do |company|
          unless Position.find_all_by_company(company).map(&:user_id).include?(user_id) || Position.find_all_by_industry(company).map(&:user_id).include?(user_id) || Education.find_all_by_school(company).map(&:user_id).include?(user_id)
            @blacklist << user_id
          end
        end
      end
      unless @I.empty?
        @I.uniq.each do |industry|
          unless Position.find_all_by_industry(industry).map(&:user_id).include?(user_id) || Position.find_all_by_company(industry).map(&:user_id).include?(user_id) || Education.find_all_by_school(industry).map(&:user_id).include?(user_id)
            @blacklist << user_id
          end
        end
      end
      unless @S.empty?
        @S.each do |school|
          unless Education.find_all_by_school(school).map(&:user_id).include?(user_id) || Position.find_all_by_company(school).map(&:user_id).include?(user_id) || Position.find_all_by_industry(school).map(&:user_id).include?(user_id)
            @blacklist << user_id
          end
        end
      end

    end

    unless @c.empty? && @i.empty? && @s.empty?
      @users = User.find(@cis - @blacklist)
    end 
```

搜索看起来像这样（注意单个字段），包括一个示例查询（注意 AND 过滤器...我是数据库中唯一适合所有搜索词的用户 ['dartmouth College' for school，'world health组织”代表公司，“互联网”代表行业]）：

![在此处输入图像描述](../Images/8fca29253a501e49031105edaf69792d.png)

我意识到这不是一个有效的查询，并且正在考虑加快速度的方法，但此时可以使用一些想法。

火鸡节快乐 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:37:34.900

根据您的描述，而不是理解您的代码，我想出了这样的事情

```
User.joins(:positions, :educations).where("lower(positions.company) like lower(?) and lower(positions.industry) like lower(?) and lower(educations.school) like lower(?) and positions.is_visible and educations.is_visible", "%#{company}%", "%#{industry}%", "%#{school}%") 
```

或者如果列中只有一个公司或行业

```
User.joins(:positions, :educations).where("(lower(positions.company) = lower(?) or lower(positions.industry) = lower(?)) and lower(educations.school) = lower(?) and positions.is_visible and educations.is_visible", company,industry, school) 
```

但是把很多行业、公司、学校作为参数会比较复杂，创建索引

```
create index positions_lower_company on positions (lower(company));
create index positions_lower_industry on positions (lower(industry));
create index educations_lower_school on educations (lower(school)); 
```

我希望它会有所帮助。

# android - 一个简单的 HTML 锚链接不会显示为 gmail 中收到的电子邮件中的链接

> ID：13519652
> 
> 赞同：2
> 
> 时间：2012-11-22T20:35:17.983
> 
> 标签：android, gmail, anchor, hyperlink

在此先感谢您的帮助。

我正在开发一个 Android 应用程序，作为其核心功能的一部分，它需要在用户之间发送电子邮件（点对点电子邮件，而不是垃圾邮件）。这些电子邮件需要包含一个链接，该链接将在用户单击时打开 Android 应用程序

我遇到的问题是：当我将这些电子邮件发送到 gmail 帐户时，链接显示为普通文本而不是链接。

这是我的代码

```
private void sendEmail(String recepientName, String recipientEmail) {
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);  
String aEmailList[] = {  recipientEmail };      
emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);  
emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "My Title");  
emailIntent.setType("text/html");  
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,  Html.fromHtml( 
"<!DOCTYPE html><html><body>" +
"<br>Dear " + recepientName + ",<br>" +
"Please <a href=\"myapp://" + "\"><font>click here</font></a></body></html>"));
startActivityForResult(emailIntent, EMAIL_REQUEST);
} 
```

我应该怎么做才能使这些链接在收到的 gmail 电子邮件中起作用？

再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:14:38.683

What I discovered was that somehow (probably with great talent) I got into Google's black list. this means that Google stripped the link out of my code and the users saw it as regular text

HERE IS THE REASONING:

My link looked like this: myAppName://parameter1/parameter2/Parameter3

The prefix ("myAppName://") allows Android to identify my App and launch it as you click on the link.

HOWEVER: When this link was sent to a gmail account, Google's servers were able to identify that this was an invalid link (pretty cool that they check that ha!!) and they stripped the link out.

The solution was to use a real URL for App identification and Launch: Something like: [http://myhost.com/parameter1/parameter2/Parameter3](http://myhost.com/parameter1/parameter2/Parameter3)

Hope that helps

android:scheme="http" and the appropriate android:host

# c# - 具有智能的在线 CodeEditor (C#)

> ID：13519656
> 
> 赞同：5
> 
> 时间：2012-11-22T20:35:40.967
> 
> 标签：c#, javascript, ide

CodeMirrow 中的 Google 搜索结果。我找不到 ac# 演示，也不确定它是否支持智能（或者是否可能）。

有谁知道任何支持智能/自动完成的（浏览器代码编辑器）项目。我正在寻找一个可以在我自己的网站上自由使用的项目。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-20T21:17:48.673

那么“.NET jsFiddle”呢？？？

[http://dotnetfiddle.net](http://dotnetfiddle.net)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T21:08:17.737

我认为您应该使用 CodeMirror，这是我所知道的唯一具有自动完成功能的。

您可以在此处查看演示：http: [//codemirror.net/demo/complete.html](http://codemirror.net/demo/complete.html)。

它是开源的并且是积极开发的，因此，您可以随时为改进做出贡献：[https](https://github.com/marijnh/CodeMirror) ://github.com/marijnh/CodeMirror 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:18:30.170

试试这个（有自动完成功能）

[http://www.coderun.com/ide/](http://www.coderun.com/ide/)

[https://compilr.com](https://compilr.com) （不确定自动完成）

# java - “对象断点” - 如何在具有复杂动态行为的大型代码库中调试对特定对象的访问？

> ID：13519658
> 
> 赞同：4
> 
> 时间：2012-11-22T20:35:44.877
> 
> 标签：java, eclipse, debugging, reflection

每隔一段时间，我就处于 Eclipse 调试模式，希望我可以简单地选择我当前正在检查/观察的对象，在其上放置某种“对象断点”，然后跳到下一行代码访问它。

现在，我知道我可以在类上设置断点，但我通常在内存中有数百甚至数千个实例，其中大多数都有很长的生命周期。他们经常进出框架。它们被包装到集合中，再次过滤和解包。简而言之：一个常规的大型应用程序。

通常我仍然通过寻找该对象的稀有特性、使用条件方法断点和大量知情猜测来找到问题。但是，我认为如果我有类似描述的功能，我有时会更快。

经过一番搜索，我发现的是[调试代理（向下滚动到示例）](http://docs.oracle.com/javase/1.3/docs/guide/reflection/proxy.html)。它是一个容器类，将使用 Java 反射 API 使自己看起来像包含的对象，因此您可以在应用程序中使用它来代替包含的对象。作为一个 InvocationHandler，DebugProxy 现在可以“拦截”包含的 Object 中的方法调用。

使用代理进行实际调试就像将这一行添加到您的应用程序一样简单。

```
IMyObject = (IMyObject) DebugProxy.newInstance(new MyObject()); 
```

然后我可以在 DebugProxies 源代码中设置断点。

然而，这种方法至少存在两个问题。

1.  它可以工作，但它仍然是一个 hack，并且缺少很多功能，例如过滤选项。
2.  Proxy-Object[不能向下转换为实现类](https://stackoverflow.com/questions/4767123/java-invocationhandler-and-a-singleton)。

2.问题比较严重。我能够将 DebugProxy 与 EMF 生成的类一起使用，并且在整个框架中遵循对象没有问题。但是，当我尝试调试不使用所有有趣类的接口的代码时，DebugProxy 将很快失败。

有人知道替代品吗？也许 Eclipse JDT 调试器已经有这样的功能，而我根本看不到它！？

我知道有 Java[工具 API](http://docs.oracle.com/javase/6/docs/technotes/guides/instrumentation/changes6.html)和 AspectJ 等框架。这些可以用来获得实际的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:14:40.550

我向 DebugProxy 添加了基本过滤并修改了输出，因此 Eclipse 控制台视图显示了指向调用代码行的链接： ![在此处输入图像描述](../Images/560c2b4c0c4200608dea9f309587ba3b.png)

不过，第二个问题仍未解决。我把[源代码放在了 GitHub 上](https://github.com/Treehopper/DebugHelper/tree/master/eu.hohenegger.debughelper/src/eu/hohenegger/debughelper)。也许有人会想出什么办法。

解决此问题的一种完全不同的方法是自动添加断点，并将当前的 hashCode() 与相关对象的 HashCode 进行比较。对于更了解 JDT 内部的人来说，这可能并不太难。

# php - 在php中拆分数据

> ID：13519659
> 
> 赞同：0
> 
> 时间：2012-11-22T20:35:51.700
> 
> 标签：php, jquery, wordpress

我在 PHP 中有一个名为 $link 的变量，它会重复自身，并且它的数据如下：

```
 http://www.ankinfos.com/our-portfolio/www.abc.com
     http://www.ankinfos.com/our-portfolio/www.cab.com
 http://www.ankinfos.com/our-portfolio/www.zzz.com

.
.
.
.
 http://www.ankinfos.com/our-portfolio/www.lal.com 
```

我想删除 www.abc.com 之前的文本或数据，使其变为

```
 http://www.ankinfos.com/our-portfolio/www.abc.com 
```

至

```
www.abc.com 
```

和 [http://www.ankinfos.com/our-portfolio/www.abc.com](http://www.ankinfos.com/our-portfolio/www.abc.com)

至

```
www.cab.com 
```

等等

请让我知道在 jquery 或 php 中的任何解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:40:43.737

我认为php中最简单的方法是

```
$url = "http://.../www.abc.com";
$url = explode('/', $url);
$yourUrl = $url[count($url) - 1]; 
```

至于JavaScript：

```
var url = "http://.../www.abc.com";
url = url.split("/");
var yourUrl = url[url.length - 1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:48:56.220

[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

```
$myArray = explode("http://www.ankinfos.com/our-portfolio/", $link);
array_shift($myArray);
print_r($myArray); 
```

这将爆炸每个 url（我假设它是恒定的）并删除它的第一个元素（因为分隔符位于开头，它将导致将空字符串作为第一项放置）。

现在，您可以迭代这些项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T20:41:09.470

`split()`在javascript中使用函数

```
var fullLink = "http://www.ankinfos.com/our-portfolio/www.abc.com";

var url = fullLink.split('/');
url = url[url.length-1]

alert(url)​ 
```

[http://jsfiddle.net/Gsruv/](http://jsfiddle.net/Gsruv/)

在`explode()`PHP 中

# jsf-2 - 带有面包屑复合组件的有序 JSF 分页

> ID：13519666
> 
> 赞同：1
> 
> 时间：2012-11-22T20:36:17.507
> 
> 标签：jsf-2, richfaces, ajax4jsf

我想将一个大表单拆分为几个复合组件（因为我重用了 CC）。一个主要页面（业务流程页面）必须允许用户浏览 4 个 CC。不一定按顺序排列。用户可以使用主页面的面包屑从 1 跳转到 4 - 或 - 使用箭头顺序来回导航。

要求：

1.  所有导航项（箭头和面包屑）都必须放在主页面上。
2.  绝不能重新加载主页面。仅限 CC。
3.  用户可以暂时离开网站而不会丢失所提供的数据（因为这些页面上有很多字段）。

什么是一流的方法？

Shell 我创建了@SessionScoped manged bean（控制器），它在 ah:panelGroup? 中呈现 CCs 实例？

```
<h:panelGroup id="businessProcessForm" layout="block">
    <my:composite rendered="#{controllerBean.navigateToCC}" />
</h:panelGroup>

<h:commandButton value="load previous CC" action="#{controllerBean.setNextCC('CC1')}">
    <f:ajax render="businessProcessForm" />
</h:commandButton>
<h:commandButton value="load next CC" action="#{controllerBean.setNextCC('CC3')}">
    <f:ajax render="businessProcessForm" />
</h:commandButton> 
```

如何设置面包屑的链接（必须根据CC的数量创建）？如何设置上一个/下一个链接？如何通过箭头或面包屑填充 h:panelGroup？

任何可靠的答案（包括Richfaces）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T14:14:43.647

很晚才提供答案。如果您有更好的替代方法在 JSF 和 RichFaces 中实现面包屑，请告诉我。

RichFaces 本身不提供任何类型的 BreadCrumbs 组件，例如 Trinidad 从 MyFaces 提供的组件。创建类似面包屑的结构的另一种方法是动态添加图像和链接，并将此网格绑定到支持 bean。当用户从一个页面导航到另一个页面时，特别是在执行某种操作之后，可以将新组件和相应图像添加到此网格中，然后可以重新渲染网格

# c# - 初始化包含其他对象数组的对象数组？

> ID：13519667
> 
> 赞同：0
> 
> 时间：2012-11-22T20:36:24.703
> 
> 标签：c#, arrays, class

我正在尝试声明一系列建筑物，但与每栋建筑物相关的楼层从未初始化。我想为与每个建筑物实例关联的每个楼层实例的数据成员提供值：

```
class Floor
{
    public int number;
    public int rooms;   
    //constructor
    Floor()
    {
        rooms = 5; 
        number= 0;           
    }
}

class Building
{
    public Floor[] floors= new Floor[6];
}

public partial class frmF2 : Form
{
    Building[] x = new Building[7];
    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:42:55.860

但它非常难看。

```
class Building
{
    Building()
    {
      floors = new Floor[6];
      for(int i=0; i<6;++i)
          floors[i] = new Floor();
    }

    public Floor[] floors;
} 
```

# java - 又一个“传递给持久化的分离实体”异常

> ID：13519669
> 
> 赞同：1
> 
> 时间：2012-11-22T20:36:48.987
> 
> 标签：java, hibernate

我有以下数据库模型：

```
A| 1..* ------ 0..1 | B 
```

与以下实体：

A：

```
@JoinColumn(name = "B", referencedColumnName = "id")
@ManyToOne
private B singleB; 
```

乙：

```
@OneToMany(mappedBy = "B")
private List<A> aList; 
```

然后我试图为A创建一个新的B：

```
...
b.prepareCreate(existingA);
dao.create();
... 
```

方法：

```
public void prepareCreate(A existingAObject) {
    b = new B();
    b.setAList(new ArrayList());
    b.getAList.add(existingAObject);
}

public void create() {
    getEntityManager().persist(b);
} 
```

然后它抛出异常。长话短说：我想为现有的 A 创建一个新的 B，但 Hibernate 正在尝试创建一个新的 A。我认为这是一个注释问题，但不确定如何。

更新：

向我们展示如何获得现有的 AObject。- 来自数据库（existingA = em.find(id)）；

还要意识到如果要保存 A 和 B 之间的关联，则必须设置 A.singleB，因为它是关联的拥有方。- 试过了，仍然得到异常

并向我们​​展示 B 实体的完整代码：它的 ID 是什么？它是如何产生的？

很简单：

```
public class B implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id", nullable = false)
    private Integer id;

    @OneToMany(mappedBy = "B")
    private List<A> aList;

    @XmlTransient
    public List<A> getAList() {
        return eventos;
    }

    public void setAList(List<A> aList) {
        this.aList= aList;
    } 
```

}

# javascript - 使用 jquery 和 asp.net 将数据发送到 javascript 中的函数

> ID：13519671
> 
> 赞同：1
> 
> 时间：2012-11-22T20:37:10.150
> 
> 标签：javascript, jquery, .net

你能帮我并告诉我如何将href发送到该代码中的数据：

```
$(".ad-gallery").on("click", ".ad-image", function () {
    $.fancybox({

        href: $(this).find("img").attr("src"), //here is the value i want to send
        titlePosition: 'outside',
        title: $(this).text(),
        'beforeShow': function () {
            var content = $('.fancybox-inner');  // for v2.x use : var content = $('.fancybox-inner');
            $('.fancybox-wrap').append('<div class="fancy_print"></div>'); // for v2.x use : $('.fancybox-wrap').append(...
            $('.fancy_print').bind("click", function () {

                var retVal = confirm("Are you sure you want to order it?");
                if (retVal == true) {
                        $.ajax({
                            type: "POST",
                            url: "WebForm1.aspx/coucou",
                            data: "{}",//$titre.serialize(),// and i want to give the value inside that data 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:55:27.897

在外部函数内部创建一个变量。

```
$(".ad-gallery").on("click", ".ad-image", function () {
    var $this = $(this),
       href = $this.find("img").attr("src");
    $.fancybox({
        href: href, //accessible here
        titlePosition: 'outside',
        title: $this.text(),
        'beforeShow': function () {
            //You can use href here
            var content = $('.fancybox-inner');  // for v2.x use : var content = $('.fancybox-inner');
            $('.fancybox-wrap').append('<div class="fancy_print"></div>'); // for v2.x use : $('.fancybox-wrap').append(...
            $('.fancy_print').bind("click", function () {
                //And here

                var retVal = confirm("Are you sure you want to order it?");
                if (retVal == true) {
                        $.ajax({
                            type: "POST",
                            url: "WebForm1.aspx/coucou",
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                            data: '{"href":"'+ href +'"}' 
```

[范围和闭包](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)

# php - 我的代码会变旧吗？再次使用几个月后，超过了最大执行时间

> ID：13519673
> 
> 赞同：0
> 
> 时间：2012-11-22T20:37:12.453
> 
> 标签：php, xml, xslt

我使用`stylesheet.xslt`and`paths.xml`来转换一些 RSS 提要并将它们输出到一个新创建的文件中`fid.xml`

这段代码几个月前工作正常，我决定今天再次上传。但是我得到一个

[2012 年 11 月 22 日 20:30:32 UTC] PHP 致命错误：在第 20 行的 /home/..../public_html/..../feeder.php 中超过了 30 秒的最大执行时间*（第 20 行是转变开始的地方）*

```
<?php

// create an XSLT processor and load the stylesheet as a DOM 
$xproc = new XsltProcessor();
$xslt = new DomDocument;
$xslt->load('feeder/stylesheet.xslt');    // this contains the code from above
$xproc->importStylesheet($xslt);

// your DOM or the source XML 

$dom = new DomDocument;
$dom -> load('feeder/paths.xml');

// do the transformation

if ($xml_output = $xproc->transformToXML($dom)) {
  file_put_contents('fid.xml', $xml_output);
} else {
    trigger_error('Oops, XSLT transformation failed!', E_USER_ERROR);
} 
?> 
```

# spring - 如何在初始页面加载时将用户重定向到 servlet 而不是索引文件？

> ID：13519675
> 
> 赞同：1
> 
> 时间：2012-11-22T20:37:39.297
> 
> 标签：spring, google-app-engine, servlets, webserver

这是我在 web.xml 中配置的内容：

```
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

但是，如果我将其更改为 servlet ：

```
<welcome-file-list>
    <welcome-file>myservlet</welcome-file>
</welcome-file-list> 
```

我收到 404 错误消息。

如何在初始页面加载时将用户重定向到 servlet 而不是索引文件？

servlet 基于 Spring ：

```
@Controller
public class MyController {

    @RequestMapping(value="redirect")
    public String displaySearch(Model model) {
        model.addAttribute("test" , "test");

        return "mypage";
    }

} 
```

我只需要默认调用“重定向”servlet。

编辑：spring dispatcher servlet 映射到 '/' url 模式，这也是不正确的吗？

```
 <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>

</servlet>
<servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:51:44.050

通过 servlet 映射，例如：

```
<servlet-mapping>
  <servlet-name>myservlet</servlet-name>
  <url-pattern>/</url-pattern>
</servlet-mapping> 
```

# google-apps-script - 如何传递错误条件

> ID：13519690
> 
> 赞同：1
> 
> 时间：2012-11-22T20:39:23.570
> 
> 标签：google-apps-script

在 Web 应用程序开发中，我想要一种一致的方式来捕获和报告错误情况。例如，数据库更新例程可能会检测到各种错误情况，理想情况下，我希望应用程序能够捕获它们并优雅地报告。下面的代码不起作用，因为抛出错误时未定义 retdiag...

```
function saveData(app,e) {
var db ;
var retdiag = ""; 
var lock = LockService.getPublicLock();
lock.waitLock(30000);
try {
// e.parameters has all the data fields from form
// re obtain the data to be updated
db = databaseLib.getDb();
var result = db.query({table: 'serviceUser',"idx":e.parameter.id});
if (result.getSize() !== 1) {
throw ("DB error - service user " + e.parameter.id);
}
//should be  one & only one
retdiag = 'Save Data Finished Ok'; 
}
catch (ex) {

retdiag= ex.message  // undefined!
}
finally {
lock.releaseLock();
return retdiag;
}
} 
```

GAS 是否有一个好的或最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:51:30.460

要拥有一个完整的错误对象，`message`您必须使用堆栈跟踪来构建一个，而不仅仅是抛出一个字符串。例如`throw new Error("DB error ...");`

现在，我通常实现的一种更“一致”的方式是将所有客户端调用包装到一个函数中，该函数将为我处理任何错误。例如

```
function wrapper_(f,args) {
  try {
    return f.apply(this,args);
  } catch(err) {
    ;//log error here or send an email to yourself, etc
    throw err.message || err; //re-throw the message, so the client-side knows an error happend
  }
}

//real client side called functions get wrapped like this (just examples)
function fileSelected(file,type) { return wrapper_(fileSelected_,[file,type]); }
function loadSettings(id) { return wrapper_(loadSettings_,[id]); }

function fileSelected_(file,type) {
  ; //do your thing
}

function loadSettings_(id) {
  ; //just examples
  throw new Error("DB error ...");
} 
```

# regex - 三个单词的正则表达式不起作用？

> ID：13519691
> 
> 赞同：0
> 
> 时间：2012-11-22T20:39:25.570
> 
> 标签：regex

我需要三个单词的正则表达式，用空格分隔。我试过这个：

```
>>>match = re.search('\w\s\w\s\w', 'cat dog mouse')
>>>match.group()
....
AttributeError: 'NoneType' object has no attribute 'group' 
```

不应该`\w\s\w\s\w`接受“word word word”吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T20:41:04.197

不，它只接受一个字母长的单词。您可能正在寻找`\w+`，而且很可能整个正则表达式应该`^\s*\w+\s+\w+\s+\w+\s*$`带有或不带有可选的周围空格`\s*`。

# ruby-on-rails - 使用 AJAX 在 RoR 中上传文件时出现“406 不可接受”

> ID：13519692
> 
> 赞同：0
> 
> 时间：2012-11-22T20:39:37.147
> 
> 标签：ruby-on-rails, ruby, ajax, render

这是我的观点：

```
<%= form_for item, :url => comment_item_path(item), :html => {:remote => true, 'portal-transform' => true, :multipart => true} do |f| -%>
    <%= f.fields_for :updates, Update.new, :index => nil do |m| -%>
        <%= m.text_area :comment %><br />
        <%= m.file_field :attachment %>
    <% end -%>
    <%= f.submit "Comment" %>
<% end -%> 
```

和控制器动作：

```
respond_to do |format|
  format.js do
    render :json => {}
  end
end 
```

当我提交仅`comment`输入 (text_area) 字段并将`attachment`(file_field) 字段保留为空白的表单时，它会完全呈现预期的内容。但是当我用 提交表单时`attachment`，结果是：

```
Completed 406 Not Acceptable in 56ms 
```

我出了什么问题？请指导。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:16:31.910

出于安全原因，浏览器不允许通过 AJAX 上传文件。但是，如果您将表单的 file_field 留空，则表单会正常提交而没有错误，这解释了您所看到的行为。

要在 Rails 3 中通过 AJAX 上传文件，您可以使用 Remotipart gem。

[http://os.alfajango.com/remotipart/](http://os.alfajango.com/remotipart/)

这是一个示例用法：

[http://thechangelog.com/post/7576700785/remotipart-rails-3-ajax-file-uploads-made-easy](http://thechangelog.com/post/7576700785/remotipart-rails-3-ajax-file-uploads-made-easy)

# android - NotificationManager.notify 抛出 IllegalArgumentException

> ID：13519695
> 
> 赞同：0
> 
> 时间：2012-11-22T20:40:04.027
> 
> 标签：android, notifications

我有一个`NotificationManager`成功创建一个`Notification`：

```
 private void showNotification() {
    Notification notification = new Notification(R.drawable.snog_icon, getString(R.string.sn_g_entering_beacon_mode_),
            System.currentTimeMillis());

    // The PendingIntent to launch our activity if the user selects this notification
    Intent i = new Intent(this, SnogActivity.class);
    i.putExtra("fromNotification", "yes");

    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, i, 0);

    notification.setLatestEventInfo(this, getString(R.string.sn_g_avalanche_buddy),
                   getString(R.string.beacon_mode_activated_), contentIntent);
    notification.flags |= Notification.FLAG_ONGOING_EVENT; // Notification.DEFAULT_ALL 

    // Send the notification.
    // We use a string id because it is a unique number.  We use it later to cancel.
    mNM.notify(R.string.service_started, notification);
} 
```

该部分工作正常，它显示了我的通知，当我点击通知时，正确的活动就开始了。稍后在应用程序中，我尝试通知一个简单的通知：

```
Notification not = new Notification(R.drawable.snog_icon, "checker", System.currentTimeMillis());
not.flags |= Notification.DEFAULT_ALL;

mNM.notify(R.string.checker, not); 
```

这会使应用程序在`notify()`通话中崩溃，并带有`IllegalArgumentException`. 我应该`NotificationCompat.Builder`根据相当多的互联网结果使用，但这甚至不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:50:33.053

您可以修复此异常，但我宁愿从一开始就使用 NotifcationCompat。它在兼容性包中可用，您必须通过右键单击 Eclipse 项目 > Android 工具 > 添加支持库来添加

在此之后，您将在项目中使用 NotificationCompat ...然后访问该站点：http: [//developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

那里有一些伟大而简单的例子。

祝你好运！

# asp.net-mvc - MVC 应用程序导致 IE9 使用旧标准

> ID：13519696
> 
> 赞同：10
> 
> 时间：2012-11-22T20:40:10.520
> 
> 标签：asp.net-mvc, internet-explorer-9

当我测试我在另一台机器上创建的新 asp.net MVC 应用程序时，布局不正确并且在 IE9 中看起来很奇怪。在查看开发工具时，模式/标准被设置为旧版本，甚至是兼容模式。我把它改回IE9，又好了。

但是当我重新打开网站时，它再次设置了这些值，这些值是否存在一些默认值，这些值会继续覆盖，还是我的应用程序出于某种原因导致这些值更改为旧版本？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-23T07:09:03.833

有一些机制，IE 浏览器家族使用它来猜测哪种渲染模式是最好的。有更多关于这个主题的阅读：

[X-UA-Compatible 设置为 IE=edge，但仍不停止兼容模式](https://stackoverflow.com/questions/6156639/x-ua-compatible-is-set-to-ie-edge-but-it-still-doesnt-stop-compatibility-mode)

因此，有一种方法可以说明您的目标是哪个 IE 版本。将此html标记作为第一个（实际上是第一个）在`<head>`元素之后`<title>`

```
<!DOCTYPE html>
<html>
  <head>
    <title>My Web</title>
    <meta http-equiv="X-UA-Compatible" content="IE=100" >
    ... 
```

内容应该是`contain="IE=8"`如果您的目标是 IE 8.0，IE=100 将适用于 IE 9.0++。

> 我读过这种行为不适用于 Intranet，但我的经验是不同的。关键是那个**`<meta>`元素必须是第一个**！第一种表示，*之前没有评论*。没有什么只是标题后的第一个。

*例如，我在代码中对服务器端进行了一些调查以检查它是什么版本，并将与浏览器相关的元数据 - 作为第一个元素*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-12T22:49:34.263

作为额外说明，在测试时可以将兼容性覆盖保存到本地浏览器。

来自（[http://answers.microsoft.com/en-us/ie/forum/ie9-windows_7/ie9-always-rendering-pages-in-ie7-compatibility/c0177b44-3950-e011-8dfc-68b599b31bf5](http://answers.microsoft.com/en-us/ie/forum/ie9-windows_7/ie9-always-rendering-pages-in-ie7-compatibility/c0177b44-3950-e011-8dfc-68b599b31bf5)）：

> 第 1 步：让我们关闭兼容性视图并检查。
> 
> 一个。打开互联网浏览器。
> 
> 湾。单击键盘上的 Alt 键。现在单击菜单栏中的工具。
> 
> C。选择兼容性视图设置。
> 
> d。取消在兼容性视图中显示所有网站的复选标记并关闭兼容性视图设置窗口。
> 
> 第 2 步：重置 Internet Explorer 设置并检查。
> 
> 参考： http: [//support.microsoft.com/kb/923737](http://support.microsoft.com/kb/923737)（本文也可用于internet explorer 9）

# kernel - 如何使用 WinDbg 创建内核转储

> ID：13519697
> 
> 赞同：9
> 
> 时间：2012-11-22T20:40:23.177
> 
> 标签：kernel, windbg, minidump

我正在使用 WinDbg 为 Windows 调试内核模式设备驱动程序。是否可以按需创建小型转储？

我的意思是，我的一个断点被击中，系统停止了。我想创建一个小型转储（假设只有堆栈）。是否有为此的 WinDbg 关键字？

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T21:18:56.567

当它到达断点时，您可以像这样编写一个小型转储：

```
bp myDLL!myFunc ".dump /ma c:\myDump.dmp;g" 
```

这将为您的函数添加一个断点并执行引号中的命令，这将写入一个带有大多数标志的小型转储，然后继续。

有关语法[的](http://msdn.microsoft.com/en-us/library/windows/hardware/ff538903(v=vs.85).aspx)更多信息，请参见[此处。](http://msdn.microsoft.com/en-gb/library/windows/hardware/ff562428(v=vs.85).aspx)`.dump``bp`

要在用户或内核模式下转储完整的内存：

```
.dump /f 
```

但`/ma`switch 实际上为用户模式提供了更多信息。

如果您收到错误消息：

```
Unable to create file 'c:\myDump.dmp' - Win32 error 0n5
    "Access is denied." 
```

尝试将文件写入 c:\users\public\ 目录。

```
.dump /f c:\users\public\myDump.dmp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-23T15:45:20.340

请注意，.dump 不能创建内核内存转储，只能创建完整或小内存转储（/f 或 /m）。要获得内核内存转储，您需要使用控制面板启用转储文件的写入，然后在调试器中使用 .crash 触发崩溃，这将导致转储文件被写入。

有关如何使用它的更多详细信息，请参阅 .crash 的 windbg 帮助，包括指向“创建内核模式转储文件”的链接。

# php - PHP：将表格行添加到 HTML 文件

> ID：13519701
> 
> 赞同：2
> 
> 时间：2012-11-22T20:40:45.477
> 
> 标签：php, html

我正在尝试将在 PHP 中生成的表格行添加到 HTML 文件中。实际上我已经用一个简单的 HTML 表单和一些 PHP 代码完成了这项工作，但我希望将新行添加到表格的**顶部**，而不是底部......（这将是一个待办事项列表我的作业，但没有复选框。）

这是PHP代码：

```
<?php
$file = fopen("index.php","a+") or exit("Unable to open file!");
$since = $_POST["since"];
$since2 = "<tr><td class=\"since\">$since</td>";
$due = $_POST["due"];
$due2 = "<td class=\"due\">$due</td></tr>\n";
$user = $_POST["user"];
$user2 = "<td class=\"content\">$user</td>";

if ($_POST["since"] <> "");
{
    fwrite ($file,"$since2$user2$due2");
}

fclose($file);
?> 
```

谁能帮我？（是的，我知道代码不干净，因为这是我第一次尝试编写 PHP。）

`tr`这是使用代码制作的示例：

```
<tr><td class="since">Thu 22th  Nov</td><td class="content">example</td><td class="due">Tue 27th  Nov</td></tr> 
```

我的主要观点是`tr`在顶部添加一个新的！非常感谢任何帮助！（我环顾四周，希望这个问题还没有被问到。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:11:02.660

有点短，但这*应该*可以解决问题（未经测试）

```
<?php
if (!emtpy($_POST['since']))//check using empty, it checks if postvar is set, and if it's not empty
{//only open the file if you're going to use it
    $file = fopen('index.php','a');//no need for read access, you're not reading the file ==> just 'a' will do
    $row = '<tr><td class="since"'.$_POST['since'].'</td>
            <td class="due">'.$_POST['due'].'</td>
            <td class="content">'.$_POST['user'].'</td></tr>';//don't forget to close the row
    fwrite ($file,$row);
    fclose($file);
}
?> 
```

顺便说一句，您的`if`陈述并没有完全消除它：

```
if ($_POST["since"]  <> "");
{ 
```

在 PHP 中`!=`并且`!==`是您要查找的运算符（也不相等），并且 if 语句后面没有分号。
您还将许多 post 变量分配给一个新变量，只是为了将它们连接成一个字符串，绝对没有必要这样做：

```
$newString = 'Concat '.$_POST['foo'].'like I did above';
$newString = "Same ".$_POST['trick'].' can be used with double quotes';
$newString = "And to concat an array {$_POST['key']}, just do this";//only works with double quotes, though 
```

*更新：*
在下面的评论中回答您的问题：[这是](http://php.net/manual/en/domdocument.loadhtml.php)解析 html 并附加/添加所需元素所需的内容：

```
$document = new DOMDocument();
$document->loadHTML(file_get_contents('yourFile.html'));
//edit dom here
file_put_contents('yourFile.html',$document->saveHTML()); 
```

花一些时间[在这里](http://www.php.net/manual/en/book.dom.php)了解如何在 DOM 中添加/创建/更改任意数量的元素。您可能感兴趣的方法是：`createDocumentFragment`、、`createElement`以及所有与 JavaScript 相似的方法：`getElementById`、、`getElementsByTagName`等等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T20:50:45.393

要将其添加到文件的开头，您可以读取其内容，将其添加到新行的末尾，然后将整个内容写回文件。

```
// read the original file
$original_list = file_get_contents("index.php");

// use the writing mode to overwrite the file
$file = fopen("index.php","w") or exit("Unable to open file!");

$since = $_POST["since"];
$since2 = "<tr><td class=\"since\">$since</td>";

$user = $_POST["user"];
$user2 = "<td class=\"content\">$user</td>";

$due = $_POST["due"];
$due2 = "<td class=\"due\">$due</td></tr>\n";

if ($_POST["since"] <> "");
{
    fwrite($file,"$since2$user2$due2$original_list");
}

fclose($file); 
```

这不是构建待办事项列表的最佳方式，但我们对您的作业和进一步改进答案的要求了解不够。

*另一个提示*：避免使用无意义的变量名，例如`$since2`and `$due2`，即使它们本质上是临时的。通过使用更好的名称，例如`$since_cell`and `$due_cell`，代码变得更容易理解，即使没有注释。

# sql - 在外键中选择一列

> ID：13519703
> 
> 赞同：0
> 
> 时间：2012-11-22T20:40:53.113
> 
> 标签：sql, foreign-keys

假设我在 SQL 中有两个表，其中 table1 有列 - id、name、sex。table2 有列 - eid、组、小时。“eid”列是 table2 中的外键，“id”列是 table1 上的主键。

假设我在表 2 中使用 'select * from table2 where hour=x' 进行搜索并得到一些结果。如何列出与搜索中的 id 相关联的人名（来自 table1）？

知道了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:49:44.410

```
SELECT T1.NAME FROM TABLE2 T2
   INNER JOIN TABLE1 T1 ON (T1.ID=T2.EID)
    WHERE T2.HOUR=X 
```

# java - 为什么 Swing 线程模型被认为是错误的，应该怎么做？

> ID：13519704
> 
> 赞同：7
> 
> 时间：2012-11-22T20:40:53.470
> 
> 标签：java, multithreading, swing

我多次听说 Java Swing 线程模型是错误的。我不完全理解为什么，我知道问题与您可以`Drawable`从主 UI 线程以外的另一个线程绘制 a 的事实有关。我知道有一些实用功能，例如`SwingUtilities.invokeAndWait`，`SwingUtilities.invokeLater`可以让您在 a 中进行绘画`Runnable`，而后者又由 Event Dispatcher 线程运行。我想这样可以确保绘制是同步完成的，并且不会使缓冲区处于不一致的状态。

**我的问题是**：“好”的 UI 工具包表现如何？采用了哪些解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T21:13:40.113

Brian Goetz 的[Java 并发实践](https://rads.stackoverflow.com/amzn/click/com/0321349601)，

**9.1 为什么 GUI 是单线程的？**：

> ...在过去，GUI 应用程序是单线程的，GUI 事件是从“主事件循环”处理的。现代 GUI 框架使用的模型略有不同：它们创建了一个专用的事件调度线程 (EDT) 来处理 GUI 事件。单线程 GUI 框架并不是 Java 独有的；Qt、NextStep、MacOS Cocoa、X Windows 和许多其他软件也是单线程的。这不是因为缺乏尝试。编写多线程 GUI 框架的尝试已经很多，但是由于竞争条件和死锁的持续问题，它们最终都到达了单线程事件队列模型，其中一个专用线程从队列中获取事件并将它们分派给应用程序-定义的事件处理程序...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T21:27:32.693

对于 SWT：[http ://book.javanb.com/swt-the-standard-widget-toolkit/ch05lev1sec7.html](http://book.javanb.com/swt-the-standard-widget-toolkit/ch05lev1sec7.html)

> SWT 实现了通常称为单元线程的单线程用户界面模型。在这个模型中，只有用户界面线程可以调用用户界面操作。这条规则是严格执行的。如果您尝试从用户界面线程外部访问 SWT 对象，您将收到 SWTException("Invalid thread access")。

所以 SWT 也是单线程的。但它需要额外的步骤来禁止在 UI 线程之外对 UI 进行任何更改。考虑 Swing 中的替代方案，允许从其他地方修改 UI，但迟早会产生意想不到的结果，这将使新手程序员感到困惑，然后他们将了解到 Swing 是单线程的“硬”方式。

此外，如果您的设计不清楚，您最终可能会遇到您认为自己处于正确线程但实际上并非如此的情况。您也可能无法可靠地判断哪些线程将访问特定的代码，但无论如何您自己的代码中可能存在严重的设计问题。

除此之外，我无法想象 Swing 的线程模型会被视为“错误”的其他原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T20:57:45.100

当前显示技术的实现方式，在屏幕上绘制像素始终是串行的。您需要每秒生成大约 30 张图像，并一张一张地绘制它们。

所以这幅画不需要多线程，因为你仍然需要在后台做一些同步。这实际上就是 Swing 正在做的事情——它使用一个名为 Event Dispatch Thread 的特殊线程来安排所有更改在下一张图像之前及时发生。

所以从技术上讲，Swing 是线程安全的，如果您使用 EDT 提交更改。这就是目的`invokeLater()`和`invokeAndWait()`方法。他们向 EDT 提交更改。

如果您不使用 EDT 并提交一些长时间运行的更改，例如在按下按钮后计算一些值，您会看到应用程序变得无响应，而不是重新绘制本身。因为 EDT 正忙于为您计算，没有时间安排重绘和其他活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T20:55:32.763

Swing 有一个线程，主要负责让用户与应用程序的图形部分进行交互。如果您只执行快速任务以响应用户发起的事件，您的应用程序将始终响应。

如果您从用户启动的事件执行长时间运行的任务，而不使用单独的线程来运行该任务，您可能会遇到问题 - 问题是，当任务运行时，应用程序将冻结。不会发生重绘，用户将无法与之交互，看起来应用程序只是将自己锁定了。

如果您在单独的线程中运行任务（例如，您正在下载一个页面并且您想通知用户下载已完成），那么您不能直接从该任务更新 Swing，而必须使用一个您在问题中提到的辅助方法。

创建这些任务是一个更加劳动密集型的过程，以便您的应用程序始终响应 - 但是如果您正在运行需要很长时间的东西（下载文件就是一个很好的例子），即使在任务被执行，你甚至可以让用户取消任务，只要任务本身允许。您可以使用模式对话框来防止用户在执行任务时执行任何其他操作（如果您想这样做），或者使用显示旋转轮或类似内容的进度对话框。但我想重要的是不要让用户认为应用程序只是无缘无故地“冻结”了。

# c# - 将字符串转换为 dd/mm/yyyy 形式的数据

> ID：13519706
> 
> 赞同：-3
> 
> 时间：2012-11-22T20:41:01.687
> 
> 标签：c#, .net

> **可能重复：**
> [将文本框中的字符串转换为 dd/mm/yyyy 日期](https://stackoverflow.com/questions/13519077/convert-string-in-a-text-box-to-dd-mm-yyyy-date)

当我尝试解析

```
DateTime.ParseExact("22/11/2012", "dd/mm/yyyy", CultureInfo.InvariantCulture).ToString(); 
```

我有 `1/22/2012 12:11:00 AM`

我想返回到完全相同的原始日期，即`22/11/2012`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:42:07.887

使用`"dd/MM/yyyy"`mm - 分钟，MM - 月

[在这里](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)检查模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:44:20.327

月份实际上是用“MM”引用的。[文档](http://www.w3.org/TR/NOTE-datetime)

# android - Android 4.2 中的操作栏图标大小

> ID：13519710
> 
> 赞同：7
> 
> 时间：2012-11-22T20:41:18.800
> 
> 标签：android, android-actionbar, android-icons

Android 4.2 中的操作栏图标大小是否发生了变化？我有一个 120x48px HDPI 图标，它在 Android 4.1 及更低版本中完美呈现。它仍然是。

但是，在任何 4.2 设备上，它都被压制为 48x48px，据我所见。或类似的东西; 这绝对是一个正方形。

有任何想法吗 ？谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T02:47:31.823

这并不理想，但您似乎可以通过使用自定义操作视图来解决此限制。

像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:id="@+id/log_in"
    android:title="Login"
    android:showAsAction="always"
    android:actionLayout="@layout/log_in_button"/>
</menu> 
```

其中@layout/log_in_button 指向一个布局文件，其中包含一个ImageButton，您的图标设置为src。

您必须在 OnCreateOptionsMenu 方法中绑定单击侦听器。这里有一个很好的例子：http: [//developer.android.com/guide/topics/ui/actionbar.html#ActionView](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView)。

我只是刚刚学会使用这种方法，所以我还不知道除了增加的复杂性之外是否有任何重大的失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T16:50:20.153

所以，我找到了一个答案，它有点老套但有效（TM）：

一般的想法是监听布局变化并将新的边界应用于可绘制对象。这可能看起来像这样：

```
public static void updateActionBar(final Activity activity) {
        if (Build.VERSION.SDK_INT >= 17) {
            try {
                final View content = activity.findViewById(android.R.id.content);
                if (content instanceof FrameLayout) {
                    final FrameLayout contentFrameLayout = (FrameLayout) content;
                    final ViewParent parent = contentFrameLayout.getParent();
                    if (parent instanceof LinearLayout) {
                        final LinearLayout parentLinearLayout = (LinearLayout) parent;
                        final Class<?> actionBarContainerClass = Class.forName("com.android.internal.widget.ActionBarContainer");
                        final Class<?> actionBarViewClass = Class.forName("com.android.internal.widget.ActionBarView");
                        final Class<?> actionMenuViewClass = Class.forName("com.android.internal.view.menu.ActionMenuView");
                        final Class<?> actionMenuItemViewClass = Class.forName("com.android.internal.view.menu.ActionMenuItemView");

                        for (int i = 0, childCount = parentLinearLayout.getChildCount(); i < childCount; i++) {
                            final View parentLinearLayoutChild = parentLinearLayout.getChildAt(i);
                            handleParentLinearLayoutChild(actionBarContainerClass, actionBarViewClass, actionMenuViewClass, actionMenuItemViewClass, parentLinearLayoutChild);
                        }
                    }
                }
            } catch (Exception e) {
                // Handle or ignore
            }
        }
    }

    private static void handleParentLinearLayoutChild(final Class<?> actionBarContainerClass, final Class<?> actionBarViewClass, final Class<?> actionMenuViewClass, final Class<?> actionMenuItemViewClass, final View parentLinearLayoutChild) {
        if (parentLinearLayoutChild instanceof FrameLayout && parentLinearLayoutChild.getClass().equals(actionBarContainerClass)) {
            final FrameLayout actionBarContainer = (FrameLayout) parentLinearLayoutChild;
            for (int i = 0, actionBarContainerChildCount = actionBarContainer.getChildCount(); i < actionBarContainerChildCount; i++) {
                final View actionBarContainerChild = actionBarContainer.getChildAt(i);
                handleActionBarContainerChild(actionBarViewClass, actionMenuViewClass, actionMenuItemViewClass, actionBarContainerChild);
            }
        }
    }

    private static void handleActionBarContainerChild(final Class<?> actionBarViewClass, final Class<?> actionMenuViewClass, final Class<?> actionMenuItemViewClass, final View actionBarContainerChild) {
        if (actionBarContainerChild instanceof ViewGroup && actionBarContainerChild.getClass().equals(actionBarViewClass)) {
            final ViewGroup actionBarView = (ViewGroup) actionBarContainerChild;
            actionBarView.setOnHierarchyChangeListener(new ViewGroup.OnHierarchyChangeListener() {
                @Override
                public void onChildViewAdded(final View parent, final View child) {
                    handleActionBarViewChild(child, actionMenuViewClass, actionMenuItemViewClass);
                }

                @Override
                public void onChildViewRemoved(final View parent, final View child) {
                }
            });
            for (int i = 0, actionBarViewCount = actionBarView.getChildCount(); i < actionBarViewCount; i++) {
                handleActionBarViewChild(actionBarView.getChildAt(i3), actionMenuViewClass, actionMenuItemViewClass);
            }
        }
    }

    private static void handleActionBarViewChild(final View child, final Class<?> actionMenuViewClass, final Class<?> actionMenuItemViewClass) {
        try {
            if (child instanceof LinearLayout && child.getClass().equals(actionMenuViewClass)) {
                final LinearLayout actionMenuView = (LinearLayout) child;
                actionMenuView.setOnHierarchyChangeListener(new ViewGroup.OnHierarchyChangeListener() {
                    @Override
                    public void onChildViewAdded(final View parent, final View child) {
                        handleActionMenuViewChild(child, actionMenuItemViewClass);
                    }

                    @Override
                    public void onChildViewRemoved(final View parent, final View child) {
                    }
                });
                for (int i = 0, actionMenuViewCount = actionMenuView.getChildCount(); i < actionMenuViewCount; i++) {
                    handleActionMenuViewChild(actionMenuView.getChildAt(i), actionMenuItemViewClass);
                }
            }
        } catch (Exception e) {
            // Handle or ignore
        }
    }

    private static void handleActionMenuViewChild(final View child, final Class<?> actionMenuItemViewClass) {
        try {
            if (child instanceof TextView && child.getClass().equals(actionMenuItemViewClass)) {
                final TextView menuViewChild = (TextView) child;
                final Drawable[] compoundDrawables = menuViewChild.getCompoundDrawables();
                final Drawable leftDrawable = compoundDrawables[0];
                final int intrinsicWidth = leftDrawable.getIntrinsicWidth();
                final int intrinsicHeight = leftDrawable.getIntrinsicHeight();
                leftDrawable.setBounds(0, 0, intrinsicWidth , intrinsicHeight );
                menuViewChild.setCompoundDrawables(leftDrawable, null, null, null);
                menuViewChild.setPadding(menuViewChild.getPaddingLeft(), 0, menuViewChild.getPaddingRight(), 0);
                menuViewChild.invalidate();
                menuViewChild.requestLayout();
            }
        } catch (Exception e) {
            // Handle or ignore
        }
    } 
```

然后，您必须在以下回调中在每个 Activity 中调用 updateActionBar（我建议创建一个从中扩展的抽象基础 Activity）：这个延迟（例如 200 毫秒）） onPrepareOptionsMenu （我发现如果您将其称为延迟（例如 200 毫秒），它会提高性能并减少闪烁（可绘制对象的大小变化））

这适用于我在 Nexus 7 和 Android 4.2 的 Nexus 10 上。您可以预期它会因未来的更新而失败，但至少目前它似乎可以工作。

# php - PHP null 比较如何区分多个空格

> ID：13519713
> 
> 赞同：0
> 
> 时间：2012-11-22T20:41:38.980
> 
> 标签：php, regex, string, null

我已经检查了许多关于堆栈溢出的相同主题的问题，但我仍然无法做到。如果我遗漏了一些非常琐碎的东西，请原谅。

我需要检查的是......变量是否不包含空（或多个空格）字符串？

但是当我使用 like 时`$a==NULL`，它​​将失败，因为`0`它是一个有效的字符串。

当我使用`is_null()`or时`$a===NULL`，它只会检查`""`但不会检查用户输入是否包含多个空格字符，例如`" "`.

我想可能是某种正则表达式在这里可能会有所帮助，但我不确定。请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:44:05.187

用于[`trim`](http://php.net/manual/en/function.trim.php)删除空白字符：

```
if (trim($my_str) === "") {
    // do things
} 
```

请记住尽可能使用[相同的比较运算符](http://php.net/manual/en/language.operators.comparison.php)以避免真实性问题（例如`"0"`充当错误值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:44:56.030

要检查用户是否提交了有效的字符串，我会这样做：

```
$str = trim($_POST['submitted_string']);
if(!empty($str)) {
  [...]
} 
```

# bash - 这些表达式在 unix 中代表什么？

> ID：13519714
> 
> 赞同：1
> 
> 时间：2012-11-22T20:41:43.637
> 
> 标签：bash, shell, scripting, sh

```
 # The **variable slicing** notation in the following conditional
  # needs some explanation: `${var#expr}` returns everything after
  # the match for 'expr' in the variable value (if any), and
  # `${var%expr}` returns everything that doesn't match (in this
  # case, just the very first character. You can also do this in
  # Bash with `${var:0:1}`, and you could use cut too: `cut -c1`. 
```

这实际上意味着什么？我能举个例子吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:03:52.030

这是一个简单的例子：

```
#!/bin/bash

message="hello world!"
var1="hello"
var2="world!"
echo "${message#$var1}"
echo "${message%$var2}"
echo "${message%???}"
echo "${message}" 
```

输出：

```
 world!
hello 
hello wor
hello world! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:03:04.623

你引用的解释根本不准确。此机制允许您从变量的值中删除前缀或后缀。

```
vnix$ v=foobar
vnix$ echo "${v#foo}"
bar
vnix$ echo "${v%bar}"
foo 
```

表达式可以是一个 glob，因此您不限于静态字符串。

```
vnix$ echo "${v%b*}"
foo 
```

还有 ## 和 %% 来修剪最长的匹配而不是最短的匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:19:54.640

问题中引用的文字是一个糟糕的解释。这是来自[sh 语言标准](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_06_02)的文本：

```
${parameter%word}
    Remove Smallest Suffix Pattern. The word shall be expanded to produce a pattern.
    The parameter expansion shall then result in parameter, with the smallest portion
    of the suffix matched by the pattern deleted.
${parameter%%word}
    Remove Largest Suffix Pattern. The word shall be expanded to produce a pattern. 
    The parameter expansion shall then result in parameter, with the largest portion
    of the suffix matched by the pattern deleted.
${parameter#word}
    Remove Smallest Prefix Pattern. The word shall be expanded to produce a pattern.
    The parameter expansion shall then result in parameter, with the smallest portion
    of the prefix matched by the pattern deleted.
${parameter##word}
    Remove Largest Prefix Pattern. The word shall be expanded to produce a pattern.
    The parameter expansion shall then result in parameter, with the largest portion
    of the prefix matched by the pattern deleted. 
```

# arrays - 矩阵中的累积和

> ID：13519717
> 
> 赞同：15
> 
> 时间：2012-11-22T20:42:01.223
> 
> 标签：arrays, performance, r, matrix, cumsum

我有一个矩阵

```
A= [ 1 2 4
     2 3 1
     3 1 2 ] 
```

我想逐行逐列计算它的累积总和，也就是说，我希望结果是

```
B = [ 1  3  7 
      3  8  13 
      6  12 19 ] 
```

关于如何在 R 中快速实现这一点的任何想法？（可能使用函数 cumsum）（我有巨大的矩阵）

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-22T20:50:15.880

单线：

```
t(apply(apply(A, 2, cumsum)), 1, cumsum)) 
```

基本观察是，您可以首先计算列上的累积和，然后计算行上该矩阵的累积和。

注意：在做行时，您必须转置结果矩阵。

你的例子：

```
> apply(A, 2, cumsum)
     [,1] [,2] [,3]
[1,]    1    2    4
[2,]    3    5    5
[3,]    6    6    7

> t(apply(apply(A, 2, cumsum), 1, cumsum))
     [,1] [,2] [,3]
[1,]    1    3    7
[2,]    3    8   13
[3,]    6   12   19 
```

关于性能：我现在知道这种方法扩展到大矩阵的效果有多好。在复杂性方面，这应该接近最优。通常，`apply`性能也没有那么差。

* * *

## 编辑

现在我开始好奇 - 哪种方法更好？一个简短的基准：

```
> A <- matrix(runif(1000*1000, 1, 500), 1000)
> 
> system.time(
+   B <- t(apply(apply(A, 2, cumsum), 1, cumsum))
+ )
       User      System     elapsed 
      0.082       0.011       0.093 
> 
> system.time(
+   C <- lower.tri(diag(nrow(A)), diag = TRUE) %*% A %*% upper.tri(diag(ncol(A)), diag = TRUE)
+ )
       User      System     elapsed 
      1.519       0.016       1.530 
```

因此：Apply 的性能优于矩阵乘法 15 倍。（只是为了比较：MATLAB 需要 0.10719 秒。）结果并不令人惊讶，因为`apply`-version 可以在 O(n^2) 中完成，而矩阵乘法将需要大约。O(n^2.7) 次计算。因此，如果 n 足够大，矩阵乘法提供的所有优化都应该丢失。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-22T15:54:32.930

这是使用 matrixStats 包和更大的示例矩阵的更有效的实现：

```
library(matrixStats)
A <- matrix(runif(10000*10000, 1, 500), 10000)

# Thilo's answer
system.time(B <- t(apply(apply(A, 2, cumsum), 1, cumsum)))
user  system elapsed 
3.684   0.504   4.201

# using matrixStats
system.time(C <- colCumsums(rowCumsums(A)))
user  system elapsed 
0.164   0.068   0.233 

all.equal(B, C)
[1] TRUE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-24T13:04:46.867

我的解决方案：函数 cumsum_row()（见下文）采用矩阵 M 并返回 M 行的累积和的矩阵。函数 cumsum_col() 对列做同样的事情。

```
cumsum_row <- function(M) {
  M2 <- c()
  for (i in 1:nrow(M))
    M2 <- rbind(M2, cumsum(M[i,]))
  return (M2)
}

cumsum_col <- function(M) {
  return (t(cumsum_row(t(M))))
} 
```

例子：

```
 > M <- matrix(rep(1, 9), nrow=3)
  > M
         [,1] [,2] [,3]
    [1,]    1    1    1
    [2,]    1    1    1
    [3,]    1    1    1

  > cumsum_row(M)
         [,1] [,2] [,3]
    [1,]    1    2    3
    [2,]    1    2    3
    [3,]    1    2    3 
```

# c# - 在什么事件上我应该假设 Windows 窗体是可见的？

> ID：13519718
> 
> 赞同：1
> 
> 时间：2012-11-22T20:42:03.997
> 
> 标签：c#, winforms

在基于 Windows 窗体而不是 WPF 的 C# 应用程序中。在向用户显示主表单后，我需要立即向用户显示 IP/端口对话框。

根据与服务器的连接，我需要在表单上显示某些控件并禁用其他控件。

最好的地方是什么？

我从 Activated 事件开始，但每次激活 Form 时都会调用它。有什么方法可以告诉我现在正在显示表格并且我现在可以显示连接表格？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T20:47:58.260

[`Form.Shown`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.shown.aspx)首次显示表单时触发该事件。这只会被解雇一次。

[`Form.Load`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.load.aspx)每次加载表单时都会触发该事件。每次显示表单时都会触发它。如果表单是您的应用程序中的主要（或唯一）表单，那么这只会触发一次。如果表单是子表单（或对话框），则每次打开对话框时都会触发。

[`Form.Activated`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activated.aspx)每次表单成为活动表单时都会触发该事件。在表单的生命周期中，这可能会发生多次。当任何子表单（或对话框）关闭时，它将为主表单触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T20:45:34.710

如果我理解正确，您正在寻找[Form.Shown](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.shown.aspx)事件。

# html - vbscript - 如何进行字符串替换？

> ID：13519725
> 
> 赞同：1
> 
> 时间：2012-11-22T20:42:39.023
> 
> 标签：html, vbscript, internet-explorer-9, favorites, mhtml

我使用这个 vbscript 代码将 IE9 中显示的页面保存为 mht 文件。要运行它，请将其放在收藏夹栏中，然后单击它。问题是它将保存页面，但文件名将以 ## 结尾，例如`homepage##.mht`。有谁看到如何删除文件名上的##？我看到它在逻辑中用于执行任务，但这很烦人，哈哈。

谢谢。

```
Set ies=CreateObject("Shell.Application").Windows()
For Each ie In ies
  If ie.ReadyState=4 Then If TypeName(ie.Document)="HTMLDocument" Then If ie.Document.hasFocus() Then Exit For
Next
If IsEmpty(ie) Then
For Each ie In ies
If ie.ReadyState<>4 Then
ElseIf TypeName(ie.Document)="HTMLDocument" Then
ie.Document.focus
If ie.Document.hasFocus() Then Exit For
End If
Next
End If
If IsEmpty(ie) Then
MsgBox "Not Found"
WScript.Quit
End If
href=ie.locationURL
Set a=ie.Document.createElement("a")
a.href=href
a.hash="##"
ie.Document.parentWindow.setTimeout "location.replace """ & a.href & """",0,"vbscript"
Do While ie.Document.parentWindow.location.hash<>"##"
WScript.Sleep 100
Loop
ie.ExecWB 4,1
ie.Document.parentWindow.location.replace href 
```

# database - 如何将具有别名表的表视为别名？

> ID：13519728
> 
> 赞同：1
> 
> 时间：2012-11-22T20:42:50.277
> 
> 标签：database, relational-database, alias, duplication

我目前有3张桌子：

```
Drug
  id
  name

DrugAlias
  drug_id
  name

Patient
  first_name
  last_name
  drug_alias_id 
```

Drug 跟踪科学名称（例如：对乙酰氨基酚），而 DrugAlias 是药物的子代，跟踪其他可能的名称（例如：阿司匹林、乙酰苯胺、乙酰氨基酚、扑热息痛等）。

患者可以服用一种药物，但我在 Patient 表中跟踪 DrugAlias 而不是 Drug，因为我希望能够记住患者喜欢称特定药物的名称。换句话说，我想记住病人叫对乙酰氨基酚阿司匹林。

问题是这不允许患者调用对乙酰氨基酚对乙酰氨基酚，除非我每次创建药物时都要创建一个与药物同名的药物别名，这会产生一些重复。

我想知道其他人是否有任何其他解决方案来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:05:14.187

```
Drug
  dr_id    PK
  dr_name  FK

DrugAlias
  dra_id    PK one to one with dr_id
  dra_name  
  dr_name   - from the Drug table

Patient
  pat_id    PK
  first_name
  last_name
  dra_id    FK
  dra_name  FK 
```

您的问题是结构和设计之一。波西米亚一句话就说得好。

这适用于具有关系数据库环境的设计。您可以使用正确的键、正确的连接和一个好的查询来实现您想要的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:50:46.517

坦率地说，我认为将真实姓名存储为别名的想法是一个绝妙的主意。

它简化了逻辑并反映了现实——这种药物可以在别名表中被称为任何东西。

父表我们用于报告，子表用于搜索。这对我来说很有意义。

那么，如果有一点点数据重复怎么办。删除重复引入了很多复杂性，几乎没有任何收获。此外，保持科学名称与别名相同的名称同步也不存在数据维护问题，因为科学名称永远不会改变。

# java - 尝试在 Android 上制作计时器

> ID：13519730
> 
> 赞同：0
> 
> 时间：2012-11-22T20:43:00.447
> 
> 标签：java, android

我正在尝试使用计时器和 sheduleAtFixedRate 方法在 Android 上制作计时器，但看起来在计时器的 run 方法中调用我的 textview 会使我的应用程序停止。我做错了什么？这是我的代码：

```
Button boton_iniciar;
TextView texto_cronometro;
Timer count;
int a = 0;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_cronometro);

    /**********************/
    boton_iniciar = (Button) findViewById(R.id.button1);
    texto_cronometro = (TextView) findViewById(R.id.textView1);
    count= new Timer("Contador");
    boton_iniciar.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            count.scheduleAtFixedRate(new TimerTask() {         
                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    a++;
                    texto_cronometro.setText(String.valueOf(a));
                }
            }, 100, 100);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:11:46.523

在runnable中操作界面控制。

参考代码：

```
private Handler handler = new Handler( );

private Runnable runnable = new Runnable( ) {
 public void run ( )
 {
 atextview.setText(String.valueOf(a));
 handler.postDelayed(this,1000); //if continue Timer,use this sentence.
 }
 };
 handler.postDelayed(runnable,1000); // begin Timer
 handler.removeCallbacks(runnable); //stop Timer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:23:37.750

所有更改或触摸 UI 对象的操作都应在 Thread UI 上运行。尝试：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_cronometro);

    /**********************/
    boton_iniciar = (Button) findViewById(R.id.button1);
    texto_cronometro = (TextView) findViewById(R.id.textView1);
    count= new Timer("Contador");
    boton_iniciar.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            count.scheduleAtFixedRate(new TimerTask() {         
                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    a++;
                    ActivityCronometro.this.runOnUiThread(new Runnable() {          
                    @Override
                    public void run() {
                        texto_cronometro.setText(String.valueOf(a));

                    }
                });

                }
            }, 100, 100);
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:24:09.730

您正在尝试在 ui 线程之外更新用户界面。

替换`texto_cronometro.setText(String.valueOf(a));`为：

```
<youractivityname>.this.runOnUiThread(new Runnable() {

    public void run() {
        texto_cronometro.setText(String.valueOf(a));
    }
}); 
```

# vb.net - 如何添加清除按钮以及如何添加标记列？

> ID：13519732
> 
> 赞同：2
> 
> 时间：2012-11-22T20:43:20.010
> 
> 标签：vb.net, datatable

```
Public Class FRM_GPACalculator

    Dim dt As New DataTable
    Dim j As Integer = 1
    Dim sumOfCreditHours As Double = 0
    Dim sumOfGPA As Double = 0

    Sub calculateGpa()
        sumOfCreditHours = 0
        sumOfGPA = 0
        For i As Integer = 0 To dt.Rows.Count - 1
            sumOfCreditHours = sumOfCreditHours + DGV_GpaCalculation.Rows(i).Cells("Credit Hours").Value
            sumOfGPA = sumOfGPA + DGV_GpaCalculation.Rows(i).Cells("GPA").Value
        Next
        LBL_TotalNumberOfSubjects.Text = j
        LBL_TotalCreditHour.Text = sumOfCreditHours
        LBL_TotalGPA.Text = sumOfGPA
        LBL_GPA.Text = sumOfGPA / sumOfCreditHours
    End Sub

    Private Sub BTN_ADD_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BTN_Add.Click
        Try
            Dim values() As Object = {j, TXT_SubjectName.Text.ToString(), CDbl(TXT_Grade.Text), CDbl(TXT_CreditHour.Text), CDbl(TXT_Grade.Text) * CDbl(TXT_CreditHour.Text)}
            dt.Rows.Add(values)
            DGV_GpaCalculation.DataSource = dt
            calculateGpa()
            j = j + 1
        Catch ex As System.Exception
            MsgBox(ex.Message)
        End Try
    End Sub

    Private Sub FRM_GPACalculator_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        dt.Columns.Add("Index", Type.GetType("System.String"))
        dt.Columns.Add("Subject Name", Type.GetType("System.String"))
        dt.Columns.Add("Grade", Type.GetType("System.String"))
        dt.Columns.Add("Credit Hours", Type.GetType("System.String"))
        dt.Columns.Add("GPA", Type.GetType("System.String"))
    End Sub

End Class 
```

我在 VB.NET 中创建了一个 GPA 计算器，您也可以看到代码！！

在这里，您必须输入您的学科名称、GPA 和学分，然后它会为您提供总 GPA、学分和 CGPA！

现在如何添加一个可以清除所有内容的清除按钮？当我们输入 GPA、Cridete Hours 和 Subject name 时，我添加了一个用于输入主题标记的文本文件，现在我如何在 DataTable 中添加 Marks 列以及如何计算 persentage？

请帮助我，我将非常感激！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:44:56.790

```
 Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
    dt.Rows.Clear()
    DataGridView1.Refresh()
 End Sub 
```

编辑没有看到你问题的第二部分。你能澄清那部分吗

# java - Lru Cache listView 图片问题

> ID：13519733
> 
> 赞同：1
> 
> 时间：2012-11-22T20:43:27.407
> 
> 标签：java, android, android-lru-cache

我的 ListView 在我的活动中有图像，在我添加 LRU 缓存之前效果很好。当我第一次加载（如果我不滚动它）同时加载图像时，第一个元素会在我加载的所有图像之间更改其图像。

我的 LRU 缓存看起来像

```
public class Image {
    private static LruCache<String, Bitmap>     mMemoryCache    = null;
    private static int                          cacheSize       = 1024 * 1024 * 10;

    private static class AsyncLoader extends AsyncTask<String, Void, Bitmap> {
        private ImageView   mTarget;

        public AsyncLoader(ImageView target) {
            this.mTarget = target;
        }

        @Override
        protected void onPreExecute() {
            mTarget.setTag(this);
        }

        @Override
        protected Bitmap doInBackground(String...urls) {
            String url = urls[0];

            Bitmap result = null;

            if (url != null) {
                result = load(url);

                if (result != null) {
                    mMemoryCache.put(url, result);
                }
            }

            return result;
        }

        @Override
        protected void onPostExecute(Bitmap result) {
            if (mTarget.getTag() == this) {
                mTarget.setTag(null);
                if (result != null) mTarget.setImageBitmap(result);
            }
        }
    }

    public static Bitmap load(String urlString) {
        if (urlString == null || urlString.length() == 0) return null;

        Bitmap bitmap = null;
        URL url = null;

        try {
            url = new URL(urlString);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }

        try {
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setDoInput(true);
            conn.connect();
            InputStream is = conn.getInputStream();
            bitmap = BitmapFactory.decodeStream(is);
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return bitmap;
    }

    public static void loadToView(String url, ImageView view) {
        if (url == null || url.length() == 0) return;
        if (mMemoryCache == null) {
            mMemoryCache = new LruCache<String, Bitmap>(cacheSize) {
                @Override
                protected int sizeOf(String key, Bitmap bitmap) {
                    return (bitmap.getRowBytes() * bitmap.getHeight());
                }
            };
        }

        Bitmap bitmap = getBitmapFromMemCache(url);
        if (bitmap == null) {
            final AsyncLoader task = (AsyncLoader) new AsyncLoader(view);
            view.setTag(task);
            task.execute(url);
        } else {
            view.setImageBitmap(bitmap);
        }
    }
} 
```

用法：

```
Image.loadToView("http://image_url", (ImageView) view.findViewById(R.id.img_thumbnail)); 
```

这就是我的 BaseAdapter getView 的样子

```
@Override
public View getView(final int position, View view, ViewGroup parent) {
    if (view == null) view = inflater.inflate(R.layout.list_item, null);

    ((TextView) view.findViewById(R.id.txt_name)).setText(filtered_data.get(position).name);

    Image.loadToView("http://graph.facebook.com/" + filtered_data.get(position).id + "/picture", (ImageView) view.findViewById(R.id.img_thumbnail));

    return view;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T19:07:50.760

我发现阅读了很多关于 listview 问题的图像，它与 listview 回收有关，一些相关的帖子：

*   [Android Listview AsyncTask 图片问题](https://stackoverflow.com/questions/4287412/android-listview-asynctask-image-problem)
*   [Android listview 图片加载问题](https://stackoverflow.com/questions/4977935/android-listview-image-loading-problem)

我添加的是 onPostExecute 方法中的 else 语句，如果标签不是在标签上设置的标签，我将取消它。

其固定代码

```
public class Image {
    private static LruCache<String, Bitmap>     mMemoryCache    = null;
    private static int                          cacheSize       = 1024 * 1024 * 10;

    private static class AsyncLoader extends AsyncTask<String, Void, Bitmap> {
        private ImageView   mTarget;

        public AsyncLoader(ImageView target) {
            this.mTarget = target;
        }

        @Override
        protected void onPreExecute() {
            mTarget.setTag(this);
        }

        @Override
        protected Bitmap doInBackground(String...urls) {
            String url = urls[0];

            Bitmap result = null;

            if (url != null) {
                result = load(url);

                if (result != null) {
                    mMemoryCache.put(url, result);
                }
            }

            return result;
        }

        @Override
        protected void onPostExecute(Bitmap result) {
            if (mTarget.getTag() == this) {
                mTarget.setTag(null);
                if (result != null) mTarget.setImageBitmap(result);
            } else if (mTarget.getTag() != null) {
                ((AsyncLoader) mTarget.getTag()).cancel(true);
                mTarget.setTag(null);
            }
        }
    }

    public static Bitmap load(String urlString) {
        if (urlString == null || urlString.length() == 0) return null;

        Bitmap bitmap = null;
        URL url = null;

        try {
            url = new URL(urlString);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }

        try {
            HttpURLConnection conn = (HttpURLConnection) url.openConnection();
            conn.setDoInput(true);
            conn.connect();
            InputStream is = conn.getInputStream();
            bitmap = BitmapFactory.decodeStream(is);
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return bitmap;
    }

    public static void loadToView(String url, ImageView view) {
        if (url == null || url.length() == 0) return;
        if (mMemoryCache == null) {
            mMemoryCache = new LruCache<String, Bitmap>(cacheSize) {
                @Override
                protected int sizeOf(String key, Bitmap bitmap) {
                    return (bitmap.getRowBytes() * bitmap.getHeight());
                }
            };
        }

        Bitmap bitmap = getBitmapFromMemCache(url);
        if (bitmap == null) {
            final AsyncLoader task = (AsyncLoader) new AsyncLoader(view);
            view.setTag(task);
            task.execute(url);
        } else {
            view.setImageBitmap(bitmap);
        }
    }
} 
```

我认为谷歌需要解决这个问题或提供更清洁的解决方法，因为（在我看来）谷歌在构建某些东西时失败，开发人员只需要关心构建自己的应用程序，而不是浪费时间寻找修复的方法sdk 问题

# delphi - 如何将“big endian”中接收到的数据解包到记录中？

> ID：13519736
> 
> 赞同：1
> 
> 时间：2012-11-22T20:43:44.810
> 
> 标签：delphi, delphi-xe3

我有记录

```
type
  Treply = record
    c: integer;
    b: integer;
    a: int64;
  end; 
```

我使用 UDP 协议从服务器接收数据，数据是“大端”

```
udp : TIdUDPClient;
received_data : TIdBytes;

udp.ReceiveBuffer(received_data); 
```

如何将 received_data 解码为正常的 int/int/int64 并将其放入记录 Treply ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:49:50.183

在这种情况下，由于记录没有填充，您可以简单地将缓冲区的内容复制到您的记录中。

```
var
  Reply: TReply;
....
Move(received_data[0], Reply, SizeOf(Reply)); 
```

然后您需要从网络字节顺序转换为主机字节顺序。而且您从上一个问题中知道如何做到这一点。

为确保您永远不会被记录填充/对齐问题所困扰，建议您打包任何传输到网络上的记录：

```
TReply = packed record
  .... 
```

`received_data`您还应该在调用之前检查包含正确数量的信息`Move`。

就个人而言，我可能会将您的记录构建成更强大的东西，利用 Indy 的功能在主机和网络字节顺序之间进行转换。

```
type
  TReply = packed record
    c: integer;
    b: integer;
    a: int64;
    function HostToNetwork: TReply;
    function NetworkToHost: TReply;
  end;

function TReply.HostToNetwork: TReply;
begin
  Result.c := GStack.HostToNetwork(Cardinal(c));
  Result.b := GStack.HostToNetwork(Cardinal(b));      
  Result.a := GStack.HostToNetwork(a);
end;

function TReply.NetworkToHost: TReply;
begin
  Result.c := GStack.NetworkToHost(Cardinal(c));
  Result.b := GStack.NetworkToHost(Cardinal(b));      
  Result.a := GStack.NetworkToHost(a);
end; 
```

将它们放在一起，您的反序列化代码如下所示：

```
if Length(received_data)<>SizeOf(Reply) then
  raise SomeException.Create('...');
Move(received_data[0], Reply, SizeOf(Reply));
Reply := Reply.NetworkToHost; 
```

# knockout.js - 使用带有服务器的 knockoutjs 已将数据发送到页面

> ID：13519742
> 
> 赞同：1
> 
> 时间：2012-11-22T20:44:32.467
> 
> 标签：knockout.js

我基本上在我的网站上使用 knockoutjs 进行表单验证。

问题是我更喜欢在页面**内**发送动态数据，而不是使用 ajax 加载它（如果我已经可以在 html 上发送数据，我认为做额外的请求没有意义）。

问题是我必须对从服务器发送的页面上的内容进行*“逆向工程”以填充我的 knockoutjs 模型。*我正在这样做（模型是一个用户，我有一个 html 表，页面上有我的所有用户）：

```
// Handler to prepopulate my viewmodel (list of users) with data from the page
ko.bindingHandlers.populateUsersFromTable = {
    init:function (element, valueAcessor, allBindingsAccessor, viewModel) {
        var collection = valueAcessor(),
            tableRows = $(element).find("tbody > tr"),
            numberOfRows = tableRows.length,
            tableCells,
            user,
            i;

        for (i = 0; i < numberOfRows; i++) {
            tableCells = $(tableRows[i]).children("td");
            user = new User({
                name:$(tableCells).find(".user-name").text(),
                email:$(tableCells).find(".user-email").text(),
                clt_pj:$(tableCells).find(".user-clt_pj").text(),
                admin:$(tableCells).find(".user-admin").text(),
                blacklisted:$(tableCells).find(".user-blacklisted").text(),
                fired:$(tableCells).find(".user-fired").text()
            });
            collection.push(user);
        }
    }
}

// User Model/ViewModel
function User(u) {
    var self = this;
    // data
    self.name = ko.observable(u.name || '');
    self.email = ko.observable(u.email || '');
    self.clt_pj = ko.observable(u.clt_pj || '');
    self.admin = ko.observable(u.admin || false);
    self.blacklisted = ko.observable(u.blacklisted || false);
    self.fired = ko.observable(u.fired || false);

    // view
    self.selected = ko.observable(false);
} 
```

它可以工作，但我不认为它是一个好的解决方案，因为代码依赖于 UI。

这样做的更好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:18:54.337

标准方法是让服务器在页面上填充 HTML，而不是让服务器将模型转换为与页面一起发送的 JSON。`select`它仍然在原始请求中，并且在许多情况下它实际上更小，因为 JSON 是一种非常紧凑的格式（对于大型列表尤其如此）。

例如，如果您使用的是 ASP.MVC，则可以将其放在视图的底部（任何服务器技术都允许您这样做，如果您使用其他东西，请告诉我，我将添加该示例代替):

```
var initialData = @Html.Raw(Json.Encode(Model)); 
```

然后稍后使用该数据来初始化您的视图模型，如下所示：

```
ko.applyBindings(new ViewModel(initialData)); 
```

然后淘汰赛将通过绑定处理 HTML。

# java - 复制包含数组列表的数组列表

> ID：13519746
> 
> 赞同：0
> 
> 时间：2012-11-22T20:45:10.690
> 
> 标签：java, copy

我有两个类，比如 Class Foo ， Cl​​ass Boo.Foo 类包含 Boo 类的数组列表。我需要创建 Foo 类的深层副本，并且我正在创建 Foo 本身的arraylist。我怎样才能做到这一点。

```
 Class Foo{
        ArrayList<Boo> boovar = new ArrayList<Boo>();
        }

        Class Boo{
        int x;
        void add_x(int y)
        {
            x=y;
        }   
        }

         ArrayList<Foo> foovar = new ArrayList<Foo>();

    ..adding elements to foovar. 
```

现在我想创建一个 Foo 类型的 ArrayList foovar1，这样它就是 foovar 中对象的**深层**副本。即，如果我修改 foovar 中的 boo 对象，例如删除 x 或添加元素，则在我访问 foovar1 时不应反映它。

我知道深度复制已经被打死了，但我真的找不到文章告诉我如何做到这一点。有人可以告诉我如何使用代码吗？

编辑：

我试图在 Foo 中创建一个复制构造函数，就像提到的评论之一，但我真的不知道如何通过 Foo 中的构造函数将 Boo 数组列表复制到另一个。更不用说我将如何在数组列表中循环 Foo 的实例来创建它的副本。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:47:46.527

首先，您需要在 Boo 类中创建一个复制构造函数：

```
Class Boo{
  int x;

  //copy constructor 
  public Boo (Boo sourceBoo){
    x = sourceBoo.x;
  }

} 
```

使用上述方法，您可以在 Foo 类中创建一个复制构造函数来复制其中包含的 Boos 数组：

```
Class Foo{
  ArrayList<Boo> boovar = new ArrayList<Boo>();

  //copy constructor
  public Foo(Foo sourceFoo){
    for (Boo aBoo:sourceFoo.boovar){
      boovar.add(new Boo(aBoo)); 
    }
  }

} 
```

现在，您可以遍历您的 Foo(s) 数组并将它们一一复制到一个新数组中。你可以定义一个方法来做到这一点：

```
public ArrayList<Foo> deepCopyFooList(ArrayList<Foo> sourceArray){
   ArrayList<Foo> targetList = new ArrayList<Foo>();
   for (Foo aFoo:sourceArray){
     targetList.add(new Foo(aFoo));
   }

   return targetList;
} 
```

所以要复制你的数组，你会：

```
ArrayList<Foo> foovar = new ArrayList<Foo>();
ArrayList<Foo> foovarCopy = deepCopyFooList(foovar); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:59:34.677

编辑：

```
List<Boo> newCopy = new ArrayList<Boo>(boovar);
newCopy.addAll(boovar); 
```

..如果 boovar 的元素是不可变的。如果没有，您应该使用 Boo 类的 clone() 方法。

# vb.net - 可以设计Form1类，但不是文件中的第一个类[...]

> ID：13519751
> 
> 赞同：12
> 
> 时间：2012-11-22T20:45:29.097
> 
> 标签：vb.net, visual-studio-2010

我是 vb.net 上的新手，我正在开发我的第一个应用程序......并在 msdn 中找到了一些示例代码，所以我只是用`Form1.vb`MSDN 中的内容替换了我的文件内容。当我回滚更改并尝试编译我的旧代码时，出现了数百个错误，当我切换到`Form1[Design]`选项卡时，我看到了这个：

> Form1 类可以设计，但不是文件中的第一个类。Visual Studio 要求设计人员使用文件中的第一个类。移动类代码，使其成为文件中的第一个类，然后再次尝试加载设计器。

我真的是 vb.net 和视觉工作室本身的新手，我不知道在这种情况下该怎么办，我的工作被毁了还是什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-22T20:48:54.937

那是因为您在 form1.vb 中的类定义之上添加了一些类或其他代码。删除它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-26T18:19:26.543

对我有用的是编辑 Form1.vb 和 Form1.Designer.vb 并放置在两个文件的开头：`Namespace Whatever`和两个文件的结尾：`End Namespace`. “Whatever”可以是程序中尚未使用的任何名称（或您已经在使用的现有命名空间的名称）。

# actionscript-3 - 在影片剪辑中查找影片剪辑的当前帧标签？

> ID：13519752
> 
> 赞同：0
> 
> 时间：2012-11-22T20:45:29.547
> 
> 标签：actionscript-3, movieclip

我正在制作游戏，我需要在影片剪辑中找到影片剪辑的 currentFrame。

这是应该发生的：

我有一个名为“kaas”的盒子（movieclip），里面有2个movieclip。在舞台开始时，它停留在 frameLabel "heel" 上。当您碰撞（跳转）到“kaas”时，它应该播放 frameLabel “kapot”，它会播放。如果 frameLabel "kapot" 的 currentFrame 是第 52 帧，它应该 removeChild "kaas" 这就是问题所在，我不知道如何检测当前的 framelabel "kapot"。

现在我尝试了用 currentFrame 和 currentFrameLabel 查看事物，但没有成功。

以下是目前的部分：

```
 if (player.hitTestObject(kaas)) {
                    yVel = 3;
                    player.x += xVel + 2;
                    kaas.gotoAndStop("kapot"); // als je het blokje raakt.
                    if (kaas.currentFrame == 52){ // this is the part where I try to check the current frame of "kapot".
                        removeChild(kaas);
                    }
                } 
```

我得到的错误是我不能指向一个空对象。（错误 #1009）。

现在我的问题是我将如何为此进行工作检查（if 语句）。

亲切的问候， 雷米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:28:34.353

几种可能的情况：

*   包含该对象的影片剪辑正在播放，更改为不再包含该对象的帧（因此属性变为`null`）

*   该对象在一帧中具有实例名称，但在另一帧中没有，因此`null`在播放第二帧时变为

*   代码的其他部分明确将其设置为`null`

*   您的目标是 Flash Player 9，其中显示对象与您的`gotoAndStop`调用异步加载。这意味着初始化对象需要一段时间，在此之前你会遇到空值。解决方案是针对 Flash Player 10 或 11（在发布设置 [++] 中更改`Ctrl`它`Shift`）`F12`。如果您确实需要以 Flash Player 9 为目标，[可以使用复杂的方法来确保可以访问属性](http://www.lecrabe.net/wordpress/?p=42)

（顺便说一句，你能翻译框架标签、注释和变量名吗？这会分散注意力，有时会隐藏有用的信息。）

# java - Servlet 在 Java 中通过 http 实现全双工？

> ID：13519755
> 
> 赞同：1
> 
> 时间：2012-11-22T20:45:52.917
> 
> 标签：java, http, jakarta-ee, servlets

是否有可能编写一个 servlet，它既可以让客户端连续发送数据，又可以在它认为合适的时候回答这个问题？

我试过了，但遇到了以下问题：

*   发送 CR/LF 时仅由 servlet 输入流接收的请求
*   它仅在指定内容长度时才有效（我事先不知道）
*   响应仅在请求完成后发送给客户端（我希望两个流独立运行）；注意：我对我的线程代码充满信心

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:20:55.357

> 是否可以编写一个 servlet，它既可以让客户端连续发送数据，又可以在它认为合适的时候回答这个问题？

[更新]

也许您正在寻找类似[WebSocket](http://en.wikipedia.org/wiki/WebSocket)的东西 （我还没有使用过，所以我不会在那里提供太多帮助）。

我目前坚持使用彗星方法来解决类似问题 - 想法是您在某处有一个传出消息队列，并在这些消息可用时进行长时间轮询以读取这些消息。它避免了您遇到的一些问题，例如，Content-Length 是事先知道的，因为在您获得某种类型的完整的、特定于应用程序的消息之前，您不会尝试提取信息。

[原来的]

是的。流行语是`comet`。快速谷歌`java comet`返回以下文章的链接，这可能会有所帮助：[http ://www.ibm.com/developerworks/web/library/wa-cometjava/](http://www.ibm.com/developerworks/web/library/wa-cometjava/)

# ruby - 为哈希红宝石中的哈希添加值

> ID：13519761
> 
> 赞同：-1
> 
> 时间：2012-11-22T20:46:37.903
> 
> 标签：ruby

我正在尝试做一个让我现在很难过的小实验。

我创建了新的哈希

```
tt = Hash.new() 
```

然后我用键在里面添加两个哈希：

```
tt.merge!(:in => Hash.new)
tt.merge!(:out => Hash.new) 
```

所以我有一个看起来像这样的哈希：

```
{
     :in => {},
    :out => {}
} 
```

现在我有另一个名为 res 的散列散列，我对其进行迭代并对每个散列执行一个 IF 语句：

```
res.each do  |x|
    if x[:id] == nil
        tt[:out].merge!(x)
    else 
        tt[:in].merge!(x)
end 
end 
```

然而，这只会将前一个哈希的最后一个值附加到新哈希的 out 和 in 中。

我想要做的是使用 IF 语句将新的哈希值放在 IN 或 OUT 的键下

所以它最终看起来像：

```
{
     :in => {{:1 => 1 ,:2 => 1 ,:3 => 1 ,:4 => 1 ,:5 => 1 },{:1 => 1 ,:2 => 1 ,:3 => 1 ,:4 => 1 ,:5 => 1 }},
    :out => {{:1 => 1 ,:2 => 1 ,:3 => 1 ,:4 => 1 ,:5 => 1 }, {:1 => 1 ,:2 => 1 ,:3 => 1 ,:4 => 1 ,:5 => 1 }}
} 
```

另外-我应该为此使用哈希还是数组？我想最终将其导出为 JSON。

例如，这有效。但不确定是否正确：

```
tt = Hash.new(:in => Hash.new, :out => Hash.new)
tt.merge!(:in => Array.new)
tt.merge!(:out => Array.new)
ap tt.class
res.each do  |x|
    if x[:id] == nil
        tt[:out] << x   
    else 
        tt[:in] << x
end 
end 
```

纳克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:51:06.317

这是不可能的。您说`{1,2,3,4,5}`的是哈希，但它*不是哈希*，而是数组。如果您没有特定的键与值相关联，那么您就没有类似哈希的数据。您使用数组的第二个版本是正确的（除了您使用`merge`... 见下文）。

另外，如果你想在哈希中添加一些东西，你应该使用`[]`操作符，而不是重复使用`merge`.

例如，这是错误的：

```
tt = Hash.new()
tt.merge!(:in => Hash.new)
tt.merge!(:out => Hash.new) 
```

你想要的是这个：

```
tt = Hash.new()
tt[:in] = Hash.new
tt[:out] = Hash.new 
```

或者更好的是，这个：

```
tt = { in: {}, out: {} } 
```

完整且正确的版本可能如下所示：

```
tt = Hash.new(in: [], out: [])

res.each do  |x|
  if x[:id].nil?
    tt[:out] << x   
  else 
    tt[:in] << x
end 
```

# java - 活动之间的全局对象

> ID：13519764
> 
> 赞同：1
> 
> 时间：2012-11-22T20:47:04.070
> 
> 标签：java, android, global-variables

目前我正在开发一个android应用程序，但我遇到了一个我无法解决的问题。我有 2 个活动。在其中一个中，我将 ArrayList 定义为公共静态。此列表用作列表视图的内容。在其他活动中，我想编辑该特定列表的项目，或者删除它们。

问题：在我的三星 Galaxy S II 上运行良好（Android 版本 4.0.4），但在其他设备上，如 SGSIII（我认为是 4.1），同步该列表时出现问题。所以基本上如果第二个活动完成并返回第一个活动，所有更改似乎都已撤消......

这是第一个活动中listview的更新功能的代码；此方法无法识别更改：

```
private void updateList() { 

    String[] values = new String[hatCommandList.size()];

    for(int i = 0; i < values.length;i++) {             

        values[i] = ((Command)hatCommandList.get(i)).getRealCommand();

    }           
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, values);     
    ListViewSentCommands.setAdapter(adapter);       
} 
```

如您所见，没有什么特别的。这里是我编辑“hatCommandList”的第二个活动的代码：

```
public void onClick(View v) {               
    SettingsActivity.hatCommandList.remove(position);                       
    finish();

} 
```

“位置”显然用于指向列表中的某个位置，它包含正确的值，我已经检查过了。

无论如何，我希望你能告诉我为什么它可以在某些设备上运行以及为什么它不能在某些设备上运行......

提前问候和感谢，蒂莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:02:06.003

不要这样做...

```
SettingsActivity.hatCommandList.remove(position); 
```

最重要的是，不要`public`在 an 中创建对象或方法`Activity`并尝试从任何其他 Android 应用程序组件中使用它们 - an`Activity`是一个具有生命周期的特例类，不应将其视为“普通”Java 类。

如果您想以这种方式共享数据，那么我建议您创建一个 POJO 帮助器类并将其保存在`ArrayList`那里。然后第二个`Activity`可以进行更改，当第一个`Activity`恢复时，让它检查数据更改并刷新适配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:55:12.997

同步您的列表：[如何创建同步的数组列表](https://stackoverflow.com/questions/3814325/how-to-create-synchronized-arraylist)

可能你遇到了比赛条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T20:54:09.983

好的，我发现了问题：

当第一个活动开始时，它会从文件中读取数据到该列表中。这发生在 onCreate 函数中。

现在的问题是，在我的带有 android 4.0.4 的 SGSII 设备上，当我顺利完成第二个活动时，焦点会恢复到第一个活动。

但是在带有 4.1 的 SGSIII 上，再次使用了 onCreate 方法，即使它实际上只是恢复。目前我不知道为什么，但我想这是一个可以解决的问题。

也许你可以给我一些提示，为什么 android sdk 的开发人员确实改变了，我该如何阻止它。

PS：我正在调用 startActivityForResult 方法来启动 2\. 活动以及 onActivityResult 函数。

# iphone - Objective-C，核心数据问题

> ID：13519766
> 
> 赞同：0
> 
> 时间：2012-11-22T20:47:18.073
> 
> 标签：iphone, objective-c, core-data, nsarray

我在我的 Iphone 应用程序中使用**Core-Data 。**在我的**核心数据**中，我有类似的东西；

[对象：表格，编号：2]

[对象：表格，编号：4]

[对象：窗口，编号：2]

[对象：窗口，编号：5]

[物件：椅子，数量：2]

[物件：椅子，数量：3]

我怎样才能得到一个表最小编号、窗口最小编号和椅子最小编号的 NSArray？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:28:08.077

直接取自苹果网站

[https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFetching.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFetching.html)

1）指定要获取的实体类型

```
NSManagedObjectContext *moc = [self managedObjectContext];
NSEntityDescription *entityDescription = [NSEntityDescription
    entityForName:@"Employee" inManagedObjectContext:moc];
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entityDescription]; 
```

2）指定你正在寻找的特征，（你可以忽略这个，因为你想要所有）

```
// Set example predicate and sort orderings...
NSNumber *minimumSalary = ...;
NSPredicate *predicate = [NSPredicate predicateWithFormat:
    @"(lastName LIKE[c] 'Worsley') AND (salary > %@)", minimumSalary];
[request setPredicate:predicate]; 
```

3) 指定顺序

```
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
    initWithKey:@"firstName" ascending:YES];
[request setSortDescriptors:@[sortDescriptor]];

NSError *error;
NSArray *array = [moc executeFetchRequest:request error:&error];
if (array == nil)
{
    // Deal with error...
} 
```

4）你得到一个排序的数组，所以......要么得到最后一个条目，要么得到第一个条目，这取决于你选择的顺序。

# list - 我如何将一大堆浮点数放入一个列表中，然后找到所有数字的最小公倍数？

> ID：13519768
> 
> 赞同：1
> 
> 时间：2012-11-22T20:47:46.903
> 
> 标签：list, python-3.x, lcm

我如何将一大堆浮点数放入一个列表中，然后找到所有数字的最小公倍数？

我的问题是我有一个包含太阳系信息的文本文件，我已经隔离了每个行星及其卫星的旋转周期值，我想找到所有周期的 LCM。问题是句点都是浮点数而不是整数，我无法列出它们。此外，我在开发 LCM 方程式时遇到了麻烦。任何帮助将不胜感激

约旦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:13:20.010

为什么不能列出花车清单？你使用的代码是什么？ `x = [2.2, 3.3, 6.9]`对我来说很好..

两个浮点数的最小公倍数是什么意思？对此有几种解释。查看关于它的 wiki 文章：[http ://en.wikipedia.org/wiki/Least_common_multiple](http://en.wikipedia.org/wiki/Least_common_multiple)

# html - 使用作为提交表格的替代品，有问题吗？

> ID：13519772
> 
> 赞同：5
> 
> 时间：2012-11-22T20:48:02.000
> 
> 标签：html, forms

`<button>`标签比输入更容易设置样式，我非常赞成使用它们。但是，我担心可能会出现一些问题。

来自 W3schools：`Note: If you use the <button> element in an HTML form, different browsers may submit different values. Use <input> to create buttons in an HTML form.`

我还读到 IE 的这个按钮有问题。我只是想将它们用作提交按钮的替代品，例如：

```
<form>
<input type="text" name="post"/>
<button type="submit">
</form> 
```

它们会像提交按钮一样工作，还是会遇到不支持的浏览器或其他问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T21:37:54.167

该`button`元素在 IE 中存在严重问题，它曾经有一个非常糟糕的实现。这仍然是一个令人担忧的问题。根据[MDN page on`button`](https://developer.mozilla.org/en-US/docs/HTML/Element/button)，IE 7 在这方面仍然很糟糕，提交时发送错误的数据。

但是，如果您的表单处理不依赖于`button`元素产生的 name=value 数据，那么`button type=submit`这些天是安全的。例如，当表单中只有一个这样的按钮时，您可能无论如何都不会使用 name=value 对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:06:08.757

我没有遇到任何 IE 问题`<button type="submit">`，而且更糟糕的是，您始终可以将`onclick`事件处理程序附加到它。

A`<button>`应该可以安全使用。

最后一点：w3schools 是一个错误且具有误导性的网站。您不应将其用作任何语言的参考。对于 PHP，有[PHP 手册](http://php.net)，对于 JavaScript，有[Mozilla Developer Network（或 MDN）](https://developer.mozilla.org/)。请参阅[http://w3fools.com](http://w3fools.com)以进一步了解为什么您不应该使用 w3schools。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T21:45:48.223

如果你使用

```
 <input type="submit" name="whatever" /> 

```

您可以放心，它与按钮对应物一样好用；你不会有浏览器不兼容的问题。
它同样具有风格。

希望这可以帮助。

# orientdb - 使用原生原始实现删除特定顶点及其所有边

> ID：13519773
> 
> 赞同：0
> 
> 时间：2012-11-22T20:48:03.463
> 
> 标签：orientdb

您好，我是 OrientDB 及其 java api 的新用户。我使用 GrapDatabase 的 Native 原始实现，因为我想要最大的性能。

如何使用 OrientDB SQL 删除特定顶点及其所有边？

假设顶点有一个字段 uid，我想删除 uid 为 12 的顶点及其所有边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:57:07.310

您可以执行如下命令：“删除 uid = 12 的顶点”。请继续关注，我们正在努力开发更快的新 API！

# android - 使用 ffmpeg 将 Android 框架的 .raw 文件编码为 .png 文件格式

> ID：13519774
> 
> 赞同：0
> 
> 时间：2012-11-22T20:48:04.520
> 
> 标签：android, python, ffmpeg, adb, screenshot

我使用了[源代码](http://kevin.c.krinke.ca/code/adb-screenshot/)中的脚本。它的作用是从移动（android）手机读取帧缓冲区信息并将其保存为 .raw 文件。然后它使用 ffmpeg 编码器创建 .png 文件。不幸的是，我得到的 png 图像就像（附在下面）。我尝试使用使用的“-pix_fmt”选项，并尝试使用 rgba 而不是该代码中使用的 rgb32（顺便说一句，它们都不起作用）。我使用另一个脚本 (ascreenshooter.py) 来分析此原始图像的标头以找到一些图像标头。它们被列为：

版本：1
bpp：32
大小：2088960
宽度：544
高度：960
red_offset：0
red_length：8
blue_offset：16
blue_length：8
green_offset：8
green_length：8
alpha_offset：0
alpha_length：8

请建议是否可以将此 .raw 图像文件编码为 png 格式。如果有可能比我应该使用的 ffmpeg 选项以及其他更有效的工具是否退出此编码过程。

根据要求采样原始图像：

[http://tabak.csc.ncsu.edu/arpit.raw](http://tabak.csc.ncsu.edu/arpit.raw)

![在此处输入图像描述](../Images/0df33b91ef0139e283f71f3bc8fbdcb1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:54:19.907

您知道脚本最终实际使用的是哪种图像采集工具吗？如果它使用`screencap`- 那么您可以只使用`screencap -p filename.png`将图像直接保存到`.png`文件中，而不必稍后进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-12T12:40:00.303

```
cd /mnt
adb pull /dev/graphics/fb0 fb0
#LOAD RAW

ffmpeg   -vcodec rawvideo   -f rawvideo   -pix_fmt rgb32   -s 1024x768   -i ./fb0     -f image2   -vcodec png screendump.png

##### 768x1024 PORTRAIT, 1024x768 LANDSCAPE 
```

# struts2 - 让一个 struts 动作什么都不做

> ID：13519777
> 
> 赞同：3
> 
> 时间：2012-11-22T20:48:20.757
> 
> 标签：struts2, struts-config

有没有办法让 struts 动作什么也不做？执行完操作后，我不想做任何事情。我继承的项目中的每一个动作（其中 794 个）都是`redirectAction`. 但我不想重定向。我只想保持在同一页面上。

我该怎么做才能保持在同一页面上？我想要喜欢

```
<result name="success" type="doNothing"></result> 
```

我可以做些什么来获得这种行为吗？甚至是假的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:26:26.997

返回`ActionSupport.NONE`。

用例是什么？一个不会返回任何东西的动作会做*什么*？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:12:28.917

Http 是一个请求/响应协议，你必须发送一些东西。当我在 ajax 页面上遇到类似情况时，我只需将 SUCCESS 返回码映射到返回码为 200 的 HttpResultHeader 类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:02:55.620

尝试让`ActionForward`执行方法返回 null 您通常会返回的位置。例如，`mapping.findForward("something");`- 只是返回`null;`。

# c# - HTTPWebRequest - “访问”页面 - C#

> ID：13519784
> 
> 赞同：0
> 
> 时间：2012-11-22T20:48:57.750
> 
> 标签：c#, http, httpwebrequest

好的，我已经阅读了很多页面来尝试找到我的问题的答案，但我没有任何运气。基本上我想在 C# 中使用 HTTPWebRequest 来访问网页。这是我到目前为止所拥有的，它似乎不起作用。Wireshark 也不显示任何返回的 cookie。假设我已经宣布了我需要取悦的一切：

```
private void cmdVisit_Click(object sender, EventArgs e)
    {

        url = textBox1.Text;

        string front = "http://";
        string prx = front + lstProxy.Items[x].ToString();

        WebProxy myProxy = new WebProxy(prx);
        CookieContainer cookieJar = new CookieContainer();
        HttpWebRequest request = HttpWebRequest.Create(url) as HttpWebRequest;

       request.Method = "GET";
       request.Proxy = myProxy;
       request.Referer = "http://anyrefererItypehere";
       request.CookieContainer = cookieJar;
       request.ContentType = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
       request.KeepAlive = true;
       request.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip, deflate");
       request.UserAgent = "Mozilla/5.0 (Windows NT 5.1; rv:10.0.2) Gecko/20100101 Firefox/10.0.2";
       request.Headers.Add(HttpRequestHeader.AcceptLanguage, "Accept-Language: en-us,en;q=0.5");
       request.Host = "anyblogItypehere.tumblr.com";

      HttpWebResponse webResponse;
      webResponse = (HttpWebResponse)request.GetResponse();

        Stream stream = webResponse.GetResponseStream();
        StreamReader reader = new StreamReader(stream, Encoding.UTF8);
        String responseString = reader.ReadToEnd();

        webResponse.Close();
        rtbSource.Text = responseString;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:05:00.970

一种从网页获取内容的简单方法（为清楚起见，省略了错误处理代码）：

```
 public static string GetContent(string uri)
 {
     using (WebClient client = new WebClient())
     {
         // Pretend to be IE6
         client.Headers.Add("user-agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");
         return client.DownloadString(uri);
      }
  } 
```

如果要指定代理，请使用客户端对象的 Proxy 属性。

# php - CakePhp 上传验证

> ID：13519785
> 
> 赞同：0
> 
> 时间：2012-11-22T20:49:01.803
> 
> 标签：php, forms, cakephp, cakephp-2.0

我一直试图让它工作了几个小时，无数的谷歌搜索并没有带来任何帮助。

我想知道是否有一种方法可以验证表单文件输入中的变量。因此，就像在“上传”表单中一样，我想确保上传 [名称] 不为空。我可以用 Cakephp 的模型验证来做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T07:00:38.923

Cakephp 无法验证文件输入字段。

您可以通过自定义验证规则来做到这一点，如下例所示

用于查看文件

```
<?php
    echo $this->Form->file('image');
    echo $this->Form->error('image');
?> 
```

对于模型文件

```
<?php
    public $validate = array(
        'image' => array(
            'rule' => array('chkImageExtension'),
            'message' => 'Please Upload Valid Image.'
        )
    );

    public function chkImageExtension($data) {
       $return = true; 

       if($data['image']['name'] != ''){
            $fileData   = pathinfo($data['image']['name']);
            $ext        = $fileData['extension'];
            $allowExtension = array('gif', 'jpeg', 'png', 'jpg');

            if(in_array($ext, $allowExtension)) {
                $return = true; 
            } else {
                $return = false;
            }   
        } else {
            $return = false; 
        }   

        return $return;
    }   
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-28T15:57:30.503

@Sunman Singh 的回答不再正确。

```
static Validation::extension(mixed $check, array $extensions = array('gif', 'jpeg', 'png', 'jpg')) 
```

> 此规则检查有效的文件扩展名，如`.jpg`或`.png`。`array`通过在表单中​​传递它们来允许多个扩展。

```
public $validate = array(
  'image' => array(
    'rule' => array(
          'extension',
           array('gif', 'jpeg', 'png', 'jpg')
      ),
      'message' => 'Please supply a valid image.'
  )
); 
```

* * *

```
static Validation::fileSize($check, $operator = null, $size = null) 
```

> 此规则允许您检查文件大小。您可以使用`$operator`来决定要使用的比较类型。`comparison()`这里也支持所有支持的运算符。`$_FILES`此方法将通过从键中读取 `tmp_name`如果`$check`是`array`并且包含该键来自动处理数组值：

```
public $validate = array(
  'image' => array(
      'rule' => array('fileSize', '<=', '1MB'),
      'message' => 'Image must be less than 1MB'
  )
); 
```

请参阅下面的链接以获取参考。无论如何，我建议您编写自己的函数以获得更高的安全性，但这些肯定可以为您节省一些时间

[http://book.cakephp.org/2.0/en/models/data-validation.html#Validation::extension](http://book.cakephp.org/2.0/en/models/data-validation.html#Validation::extension)

# html - 传单地图：为什么只为 L.Rectangle（jsbin 示例）捕获的单击（而不是鼠标悬停）事件？

> ID：13519791
> 
> 赞同：1
> 
> 时间：2012-11-22T20:49:22.457
> 
> 标签：html, hover, leaflet, cloudmade

![在此处输入图像描述](../Images/70e479f0ce8a37c09ce776a475fcb11d.png)

我正在使用 Leaflet 0.4.5 [http://leafletjs.com/reference.html#rectangle](http://leafletjs.com/reference.html#rectangle)，我将一堆 L.Rectangles 放在地图上，并附加鼠标单击和鼠标悬停事件处理程序（两个事件的一个处理程序) 正如您从这个演示中看到的那样：http: [//jsbin.com/ojupus/4/edit](http://jsbin.com/ojupus/4/edit)如果您将鼠标悬停在一个矩形上并按下 [d]/[delete] 或 [s] 键，则不会发生任何事情。您必须实际单击矩形。为什么？（使用 D：键删除框，S：键更改框的颜色）。

另一个明显的故障是，如果您使用图层控件关闭绘图覆盖，然后单击鼠标（使用 [d] 或使用 [s]），您可以删除或更改不可见的 L.Rectangle 的样式屏幕上。这是使用 FeatureGroups 的预期结果吗？我认为如果它不可见，它不应该为这些框获取事件（顺便说一下，很难找到包含 FeatureGroup），所以我不知道 FeatureGroup 是否可见）。

无论如何，请随意克隆 JSBIN 并告诉我您是否看到我遗漏的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T16:47:17.737

我现在正在使用 Leaflet v 0.6，它适用于鼠标悬停。

# javascript - 这个js函数有什么问题？

> ID：13519804
> 
> 赞同：-1
> 
> 时间：2012-11-22T20:50:21.697
> 
> 标签：javascript

我对 Javascript 相当陌生，并且无法制作生成随机密码的函数。当我单击一个按钮时，该函数被调用。空函数和 MD5 函数包含在不同的文件中。

```
function genPass(id) {
        if(!empty(id)) {
            var n = Math.ceil(Math.random()*(5*Math.random()));
            n = n.substring(0,7);
            //document.getElementById(id).value = n;
            document.write(n);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:53:58.283

random() 函数返回整数类型，也许你想先制作字符串？

你可以这样尝试：

```
...
var n = Math.ceil(Math.random()*(5*Math.random())).toString();
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:58:38.293

`n`不是字符串，因此您不能对其使用 substring 方法。要变成字符串，请使用`.toString()`几乎所有对象都有的方法：

```
var n = Math.ceil( ... ).toString(); 
```

随之而来的`n`将是 substring 方法。

# php - PHP 验证类 Quickie

> ID：13519810
> 
> 赞同：-2
> 
> 时间：2012-11-22T20:50:50.367
> 
> 标签：php, class, function

有一个简单的问题，我正在为个人项目建立一个大型网站，我想我正在查看用于验证表单和数据等的类和函数。

我猜我的问题是：

我可以使用一个类来容纳所有将根据传递的数据进行验证的函数吗？如果可以，我如何定位类中的某些函数（电子邮件地址、电话号码等）。

如果我的逻辑是正确的，它将如何以代码格式显示？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:03:19.033

您可以在类中静态定义验证函数。然后将此类包含在您需要的位置和位置。

```
class Validator {

    public static function validateEmail($email) {
        // validation logic for email
        // return true or false
    }

    public static function validatePhone($phone) {
        // validation logic for phone
        // return true or false
    }
}

// in a different file, where you want to use this class

require('validator.php');
$email = $_POST['email'];

if (Validator::validateEmail($email)) {
    // valid email
} else {
    // invalid email
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:27:55.863

我在 PHP 中创建了一个验证类来清理数据并将其放在我的[网站上](http://jdhnet.wordpress.com/2013/03/17/php-validation/)。它扩展了基于命令 filter_var 和 FILTER_VALIDATE_INT 等常量的标准验证功能。这些功能可以：

*   设置整数的上下边界
*   为浮点数设置上下边界
*   验证不同类型值的布尔值
*   设置字符串长度的上下边界
*   检查某个值是否是数组的一部分
*   ……

# python - 是什么导致 Tkinter 画布出现这种内存泄漏？

> ID：13519811
> 
> 赞同：0
> 
> 时间：2012-11-22T20:50:51.507
> 
> 标签：python, image, canvas, memory-leaks, tkinter

使用以下代码，当小行星图像在屏幕上移动时内存使用量迅速增加，然后随着图像移动到画布边缘之外停止增加。谁能解释为什么会这样？我想在我的程序中让图像无限期地在屏幕上移动，但它最终会耗尽我系统上的所有内存。

我是 python、Tk 和 Tkinter 的新手。关于 canvas.move(...) 或 canvas.update() 有什么明显的我遗漏的吗？我应该使用不同的方法来完成这项任务吗？谢谢。

```
from Tkinter import Tk, Canvas, Frame, BOTH, NW
import Image 
import ImageTk
from random import random

root = Tk()
f = Frame(root)
f.pack(fill="both", expand=True)
canvas = Canvas(f, width=1000, height=1000)
canvas.pack(fill=BOTH, expand=1)

image = ImageTk.PhotoImage(Image.open("asteroid01.png"))
sprites = []
for i in range(10):
    sprites.append(canvas.create_image(50*random(), 50*random(), image=image))

vel = {'x': 1, 'y': 1}
while True:
    for s in sprites:
        canvas.move(s, vel['x'], vel['y'])
    canvas.update() 
```

编辑：调用更新似乎是一种不好的做法，所以这里是按照建议更改的代码。但是，程序在图像移动时仍然会消耗内存，并且在关闭窗口之前不会释放内存。

```
from Tkinter import Tk, Canvas, Frame, BOTH, NW
import Image 
import ImageTk
from random import random

root = Tk()
f = Frame(root)
f.pack(fill="both", expand=True)
canvas = Canvas(f, width=1000, height=1000)
canvas.pack(fill=BOTH, expand=1)

image = ImageTk.PhotoImage(Image.open("asteroid01.png"))
sprites = []
for i in range(10):
    sprites.append(canvas.create_image(50*random(), 50*random(), image=image))

vel = {'x': 1, 'y': 1}

def move():
    for s in sprites:
        canvas.move(s, vel['x'], vel['y'])
    canvas.after(10, move)

move()
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:34:03.070

我的猜测是因为你在一个紧密的循环中调用更新。每次调用 update 都会有效地创建一个新的事件循环。这可能就是正在吞噬你的记忆的原因。

相反，将您的逻辑更改为如下所示（未经测试，但应该非常接近正确）：

```
def move():
    for s in sprites:
        canvas.move(s, vel['x'], vel['y'])
    canvas.after(10, move)
move() 
```

你第一次调用 move ，然后它会导致将来某个时候再次调用它自己。数字的大小（以毫秒为单位）决定了对象移动的速度。

如果您希望能够停止动画，您可以设置一个标志，然后在每次调用之前检查该标志`after`。

# ios - navigator.globalization.getLocaleName 未在 PhoneGap 2.2.0 上运行

> ID：13519812
> 
> 赞同：2
> 
> 时间：2012-11-22T20:50:52.287
> 
> 标签：ios, cordova, globalization

使用PhoneGap 2.2.0，它现在在核心中包含全球化，我`navigator.globalization.getLocaleName()`在iOS 上调用该函数，但它似乎没有运行。这是我的代码：

```
$('#home').bind('pageshow', function()
{
    navigator.globalization.getLocaleName(function(locale)
    {
        alert('locale: '+locale.value);
    },
    function(error)
    {
        alert('error occured: '+error);
    });
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:40:46.657

你应该把它放在 deviceready 事件中，如下所示：

```
 document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
            navigator.globalization.getLocaleName(function(locale)

 {
        alert('locale: '+locale.value);
    },
    function(error)
    {
        alert('error occured: '+error);
}

} 
```

# c# - C#，SQL Server - 在不指定数据源的情况下连接到本地服务器

> ID：13519813
> 
> 赞同：0
> 
> 时间：2012-11-22T20:50:56.233
> 
> 标签：c#, sql-server, connection-string

我正在编写 ac# 应用程序。我连接到后端 SQL Server 进行一些处理。但是我今天遇到了一个奇怪的问题。这是我的代码：

```
static void Main(string[] args)
{
    SqlConnection con = new SqlConnection("Integrated Security=true");
    con.Open();

    SqlCommand cmd = new SqlCommand("SELECT SERVERPROPERTY('ProductVersion')", con);
    cmd.CommandType = CommandType.Text;

    SqlDataReader reader = cmd.ExecuteReader();
    reader.Read();

    Console.WriteLine(reader.GetString(0));
    Console.Read();
} 
```

我没有在连接字符串中给出服务器名称，但它仍然连接到我的本地数据库并检索所需的数据。我想知道怎么做。默认数据源是否设置为本地计算机？“Integrated Security=true”是否与此有关？

有人可以解释一下吗？

谢谢， Sornakumar S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T21:02:41.677

查看 MSDN 上 ConnectionString 上的文档，您可以找到此信息

> 要连接到本地计算机，请为服务器指定“（本地）”。如果未指定服务器名称，将尝试连接到本地计算机上的默认实例。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T20:59:24.127

集成安全意味着它使用当前用户的用户名和密码连接到本地 SQL Server 实例。
如果没有它，您将不得不指定特定的服务器、用户名和密码。

顺便说一句，不要像在生产服务器上那样使用它，因为您可能会遇到错误。将 web.config 文件用于所有数据库设置。

希望这可以帮助。

# c# - 如何在视频中跟踪对象的运动并获取坐标 C#

> ID：13519815
> 
> 赞同：0
> 
> 时间：2012-11-22T20:51:00.980
> 
> 标签：c#, video

我想知道如何使用阈值、矩形、blobcounter 和侵蚀过滤器将帧相互比较，并获取帧中对象的坐标，然后将其作为变量发送到文件。我该怎么做？

# objective-c - AppDelegate 抱怨实现不完整，并在充满指针的调试视图中崩溃

> ID：13519817
> 
> 赞同：2
> 
> 时间：2012-11-22T20:51:02.913
> 
> 标签：objective-c, ios, cocoa-touch, cocoa, uiscrollview

我的代码有问题，在我开始添加 myImageView 代码之前它工作正常，但是 appDelegate 不完整的实现警告已经存在很长时间了。

我的 appDelegate.h

```
//
//  AppDelegate.h
//  drawern
//
//  Created by Marin Jelica on 2012-11-21.
//  Copyright (c) 2012 Marin Jelica. All rights reserved.
//

#import <UIKit/UIKit.h>

@class ViewController;

@interface AppDelegate : UIResponder <UIApplicationDelegate/*, UIScrollViewDelegate*/>
/*{
 //   IBOutlet UIScrollView *myScrollView;
 //   UIImageView *myImageView;
}*/

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ViewController *viewController;
/*
@property (strong, nonatomic) UIScrollView *myScrollView;

@property (strong, nonatomic) UIImageView *myImageView;
*/
-(void)setRed;
-(void)setGreen;
-(void)setBlue;
@end 
```

我的 appDelegate.M

```
//
//  AppDelegate.m
//  drawern
//
//  Created by Marin Jelica on 2012-11-21.
//  Copyright (c) 2012 Marin Jelica. All rights reserved.
//

#import "AppDelegate.h"

#import "ViewController.h"

@implementation AppDelegate

//@synthesize myImageView;
//@synthesize myScrollView;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   /* UIImage *myImage = [UIImage imageNamed:@"de_dust2.png"];
    myImageView = [[UIImageView alloc] initWithImage:myImage];

    myScrollView.contentSize = CGSizeMake(myImageView.frame.size.width, myImageView.frame.size.height);
    myScrollView.maximumZoomScale = 4.0;
    myScrollView.minimumZoomScale = 0.75;
    myScrollView.clipsToBounds = YES;
    myScrollView.delegate = self;
    // [myScrollView addSubview:myImageView];*/

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    [self.viewController setRed:1];
    [self.viewController setGreen:0];
    [self.viewController setBlue:0];
    [self.viewController setAlpha:1];
    [self.viewController checkRotation];
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later.
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    // Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
}

@end 
```

我的 viewController.h

```
//
//  ViewController.h
//  drawern
//
//  Created by Marin Jelica on 2012-11-21.
//  Copyright (c) 2012 Marin Jelica. All rights reserved.
//

#import <UIKit/UIKit.h>

@interface ViewController : UIViewController {

    CGPoint lastPoint;
    CGPoint moveBackTo;
    CGPoint currentPoint;
    CGPoint location;
    NSDate *lastClick;
    BOOL mouseSwiped;
    UIImageView *drawImage;
    UIImageView *frontImage;
}
- (IBAction)blueButton:(id)sender;
- (IBAction)greenButton:(id)sender;
- (void)checkRotation;

@property int red;
@property int green;
@property int blue;
@property int alpha;
@property int height;
@property int width;

@end 
```

我的 viewController.m

```
//
//  ViewController.m
//  drawern
//
//  Created by Marin Jelica on 2012-11-21.
//  Copyright (c) 2012 Marin Jelica. All rights reserved.
//

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize red;
@synthesize green;
@synthesize blue;
@synthesize alpha;
@synthesize height;
@synthesize width;

- (void)viewDidLoad
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    drawImage.image = [defaults objectForKey:@"drawImageKey"];
    drawImage = [[UIImageView alloc] initWithImage:nil];
    drawImage.frame = self.view.frame;
    [self.view addSubview:drawImage];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    width=3000;
    height=3000;
    // UIImage *image = [[UIImage alloc] init]

   /*
    UIImage *myImage = [UIImage imageNamed:@"de_dust2.png"];
    myImageView = [[UIImageView alloc] initWithImage:myImage];

    myScrollView.contentSize = CGSizeMake(myImageView.frame.size.width, myImageView.frame.size.height);
    myScrollView.maximumZoomScale = 4.0;
    myScrollView.minimumZoomScale = 0.75;
    myScrollView.clipsToBounds = YES;
    myScrollView.delegate = self;
    // [myScrollView addSubview:myImageView];*/
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];

    if ([touch tapCount] == 2) {
        drawImage.image = nil;
    }

    location = [touch locationInView:touch.view];
    lastClick = [NSDate date];

    lastPoint = [touch locationInView:self.view];
    lastPoint.y -= 0;

    [super touchesBegan: touches withEvent: event];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    mouseSwiped = YES;

    UITouch *touch = [touches anyObject];
    currentPoint = [touch locationInView:self.view];

    UIGraphicsBeginImageContext(CGSizeMake(width , height));
    [drawImage.image drawInRect:CGRectMake(0, 0, width, height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 2.0);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, alpha);
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());

    [drawImage setFrame:CGRectMake(0, 0, width, height)];
    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    lastPoint = currentPoint;

    [self.view addSubview:drawImage];
}

- (IBAction)blueButton:(id)sender {
    blue=1;
    red=0;
    green=0;
}

- (IBAction)greenButton:(id)sender {
 green=1;
    blue=0;
    red=0;   
}

- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    [self checkRotation];
}

-(void)checkRotation{

    NSLog(@"Width:%i", width);
    NSLog(@"Height:%i", height);

    UIInterfaceOrientation orientation = self.interfaceOrientation;
    if (orientation==UIInterfaceOrientationLandscapeRight || orientation == UIInterfaceOrientationLandscapeLeft) {
     //   width = 3000;
     //   height = 3000;

        [drawImage setFrame:CGRectMake(0, 0, width, height)];
     //   drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        lastPoint = currentPoint;

        [self.view addSubview:drawImage];
    }

    if (UIInterfaceOrientationIsPortrait(orientation)) {
     //   width = 3000;
     //   height = 3000;

        [drawImage setFrame:CGRectMake(0, 0, width, height)];
   //     drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        lastPoint = currentPoint;

        [self.view addSubview:drawImage];
    }
}

@end 
```

这是启动时崩溃时发生的情况的图像

![http://imgur.com/7uDTa](../Images/f24b2eca86d80bd279f4c493709716c2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:54:15.277

由于您在`appdelegate.h`文件中添加了以下方法定义，因此期望它在其中实现，`appdelegate.m`但编译器无法在那里找到它。这就是它显示该警告的原因。

```
-(void)setRed;
-(void)setGreen;
-(void)setBlue; 
```

您可以删除这些行或在 .m 文件中实现相同的行。

```
- (void)setRed {
  //set red color here
}

- (void)setGreen {
  //set green color here
}

- (void)setBlue {
  //set blue color here
} 
```

你需要改变这一行，

```
drawImage.image = [defaults objectForKey:@"drawImageKey"];
drawImage = [[UIImageView alloc] initWithImage:nil]; 
```

将其用作，

```
UIImage *image = //get the image from defaults.. Is [defaults objectForKey:@"drawImageKey"] returning NSData of UIImage object? If not create UIImage object using the return name from this key
//if it returns a string, you can do the following
UIImage *image = [UIImage imageNamed:[defaults objectForKey:@"drawImageKey"]];

drawImage = [[UIImageView alloc] initWithImage:image]; 
```

始终确保这`[super viewDidLoad];`是方法中的第一个调用。

```
- (void)viewDidLoad 
  {
     [super viewDidLoad]; 
```

# java - 未最大化时，线条被绘制在错误的位置

> ID：13519818
> 
> 赞同：2
> 
> 时间：2012-11-22T20:51:03.023
> 
> 标签：java, swing, graphics, awt

我已经扩展`JPanel`并覆盖了该`paint`方法，以便`JButton`在面板中某些 s 的位置之间绘制一些额外的线。但是，只有在 gui 最​​大化时才能正确绘制线条，否则它们会以完全错误的偏移量绘制。

绘制我正在使用的线（'rootNode'和'child'都是`JButton`，`g`是`Graphics`覆盖`paint`方法的参数）：

```
Point sourcePoint = new Point(rootNode.getLocation());
Point destPoint = new Point(child.getLocation());
SwingUtilities.convertPointToScreen(sourcePoint, rootNode.getParent());
SwingUtilities.convertPointToScreen(destPoint, child.getParent());
g.drawLine(sourcePoint.x, sourcePoint.y, destPoint.x, destPoint.y); 
```

未最大化时不正确的线条图片：[http](http://postimage.org/image/ws0yo9chf/) ://postimage.org/image/ws0yo9chf/ 最大化时正确的图片：http: [//postimage.org/image/fq84m5xmb/](http://postimage.org/image/fq84m5xmb/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:32:45.207

只是为了掩盖评论。在这种情况下，我认为您不想转换为屏幕坐标。

该方法的`Graphics`上下文`paintComponent(...)`很可能会为组件坐标系设置。

状态的 JavaDoc `Graphics.drawLine(...)`：

> 使用当前颜色在此图形上下文坐标系中的点 (x1, y1) 和 (x2, y2) 之间绘制一条线。

除非您通过`Graphics.translate(...)`或进行了更改，否则`Graphics2D.setTransform(...)`将为组件设置坐标系。

除了在错误的位置之外，转换为屏幕坐标还会产生根据窗口在屏幕上的位置改变线条位置的效果:)

# algorithm - 在忽略背景的情况下生成对象的直方图

> ID：13519821
> 
> 赞同：1
> 
> 时间：2012-11-22T20:51:14.753
> 
> 标签：algorithm, matlab, image-processing, opencv, octave

图像直方图的计算是一项简单的任务，大多数可用的语言或库都为此提供了函数。但是，如果我想从直方图的计算中排除图像背景（例如，假设有一个蒙版来裁剪图像中包含的对象），是否有函数允许您仅考虑图像的一部分来计算直方图由掩码定义？

**更新。**蒙版没有特定的形状，因为它是通过减去背景获得的：换句话说，蒙版的黑色像素标识背景，而白色像素标识对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:57:31.403

做

```
hist(im(mask)) 
```

或者取决于你的面具的定义方式

```
hist(im(~mask)) 
```

工作？

# javascript - 热门获取字段中的谷歌地图标记位置

> ID：13519822
> 
> 赞同：-1
> 
> 时间：2012-11-22T20:51:14.990
> 
> 标签：javascript, google-maps

我有这个代码

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script>
        $(document).ready(function () {
            // Define the latitude and longitude positions
            var latitude = parseFloat("00.000000");
            var longitude = parseFloat("00.000000");
            var latlngPos = new google.maps.LatLng(latitude, longitude);
            // Set up options for the Google map
            var myOptions = {
                zoom: 10,
                center: latlngPos,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            // Define the map
            map = new google.maps.Map(document.getElementById("map"), myOptions);
            // Add the marker
            var marker = new google.maps.Marker({
                position: latlngPos,
                draggable: true,
                map: map,
                title: "PC Pro Offices"
            });
        });
    </script> 
```

将标记的纬度和经度拖到一两个字段中后，如何获取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:22:07.697

好吧，我发现[这个](https://code.google.com/p/gmaps-samples-v3/source/browse/trunk/draggable-markers/draggable-markers.html?spec=svn49&r=49)......对于其他有同样问题的人。

# mysql - MySQL 导出脚本无法导入

> ID：13519827
> 
> 赞同：2
> 
> 时间：2012-11-22T20:51:50.823
> 
> 标签：mysql, phpmyadmin, mysql-workbench

我对 SQL 非常熟悉，但对 MySQL 很陌生……我将数据库导出到单个 .SQL 文件，现在由于报告的安全性和语法错误而无法导入它。

这是导出的示例：

```
DELIMITER $$
--
-- Procedures
--
DROP PROCEDURE IF EXISTS `calcGameTotal`$$
CREATE DEFINER=`root`@`localhost` PROCEDURE `calcGameTotal`(IN  gid INT, OUT ct BIGINT(20))
BEGIN 
/*redacted*/ 
END$$ 
```

首先，由于我没有以 root 身份登录，因此我收到了有关缺乏权限的抱怨，`DEFINER=root@localhost`因为我没有以*root*身份登录- 但我确实拥有 DROP/CREATE 权限。

其次，显然`--`是在导入时出现语法错误。在这种情况下，数据库中的过程如何没有问题，并且首先导出？

我认为这都是导出/导入的问题......我真的不想要所有这些`DEFINER`东西，除非我必须这样做。我正在使用 phpMyAdmin 和 MySQL Workbench - 有人可以解释我应该如何理解和解决这个问题吗？

# javascript - 在 JQuery 中选择具有单个类的元素

> ID：13519831
> 
> 赞同：7
> 
> 时间：2012-11-22T20:52:13.757
> 
> 标签：javascript, jquery, html

我希望能够选择所有只有一个（给定）类（没有其他）的元素

例如，假设我的页面看起来像这样

```
<html>
    <body>
        <div class="a"> </div>
        <div class="a b"></div>
        <div class="c"></div>
    </body>
</html> 
```

我希望能够只选择第一个元素 - 因为它只有一个类“a”，没有其他类。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T20:54:22.680

这个怎么样：

```
$('.a[class="a"]') 
```

或如@Hexa 所建议的那样：

```
$('div[class="a"]') 
```

[http://jsfiddle.net/taYWP/](http://jsfiddle.net/taYWP/)

@Hexa：它实际上是最快的！;-) [http://jsperf.com/attr-vs-attr-and-class](http://jsperf.com/attr-vs-attr-and-class)

# c# - ASP.NET MVC windows 身份验证集成

> ID：13519832
> 
> 赞同：1
> 
> 时间：2012-11-22T20:52:27.513
> 
> 标签：c#, asp.net-mvc, authentication, active-directory, asp.net-membership

我们有一个内部工作跟踪系统，可供 10 人左右使用。目前我们使用表单身份验证。登录表单由一个文本框组成，用户在其中输入他们的姓名，然后我们设置表单身份验证 cookie。没有密码。

```
FormsAuthentication.SetAuthCookie(userName, true); 
```

我们现在可以使用用户名保存到数据库并通过调用 User.Identity.Name 在各种控制器的屏幕上显示。

到目前为止，这种简单的方法已经完全足够了，但是现在我们已经准备好开始使用活动目录对用户进行身份验证了。我们希望用户能够使用他们的域用户名和密码登录。

所以我们启用 Windows 身份验证。

然而，问题是现在 User.Identity.Name 采用 DOMAIN\USER 格式。也有可能有一天，某个用户的域用户名将与我们的工作跟踪系统中的用户名不同。

为用户分配“作业跟踪器用户名”的最佳方法是什么，以便他们可以使用其域用户名登录，但作业跟踪器可以记录作业并使用不同的用户名显示人员姓名。

我知道我可以使用会话，或者我可以调用数据库，但是有更正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:13:24.170

首先决定将信息存储在哪里。这可以是数据库、Active Directory 或其他任何东西。然后决定如何维护它（例如管理 UI，可能受基于角色的安全性保护。或者如果它存储在 Active Directory 中，您可以将这项工作委派给您的 AD 管理员）。

之后进行查找很简单，并可能将查找到的值缓存在 Session 中，或者可能在 Cache 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:02:02.930

最后我切换到表单身份验证，因为 Windows 身份验证在某些安卓手机上不起作用。我还使用 ActiveDirectoryMembershipProvider 针对域对用户进行身份验证。有关更多信息，请参阅我关于此主题的其他问题。

# validation - 验证应用程序块 - 验证属性多个错误顺序

> ID：13519835
> 
> 赞同：0
> 
> 时间：2012-11-22T20:53:10.417
> 
> 标签：validation, enterprise-library, validation-application-bl

我正在玩 EL 验证应用程序块。使用属性进行验证时，不遵守验证顺序。例如：

```
public class Boat
{
    [Display(Name="License Plate")]
    [RequiredStringValidator]
    [RangeValidator(1,10)]        
    public String RegistrationNumber
    {
        get;
        set;
    } 
```

当我调用以下代码时：

```
Validator vt = CreateValidator(typeof(Boat), ruleSet);            
ValidationResults results = vt.Validate(instance); 
```

结果 [0] - 来自 StringLengthValidator 的错误结果 [1] - 来自RequiredStringValidator（自定义验证器）的错误

问题是顺序并不总是相同的。碰巧RequiredStringValidator 错误位于0 索引位置。似乎 .Net CLR 在使用**Attributes.GetCustomAttributes**检索它时不保证 Attributes 位置，这就是 VAB 获取属性属性的方式。

在此示例中，如果同一属性有 2 个错误，则应显示第一个属性错误（RequiredStringValidator），但有时会显示 StringLengthValidator 属性错误，因为它停留在 ValidationResults 的第一个位置。

使用 ASP.NET MVC 模型状态时会发生这种情况。

```
@Html.TextBoxFor(a => a.RegistrationNumber)
@Html.ValidationMessageFor(a => a.RegistrationNumber) 
```

如果出现错误，则仅当**RequiredStringValidator**验证器具有有效结果时才应出现**StringLengthValidator**消息。

 **任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:09:39.550

只需订购结果：

```
var results = (
    from result in vt.Validate(instance)
    orderby result.Validator.GetType()
    select result)
    .ToArray(); 
```**

# xml - 使用 xslt 将下一个子节点附加到父节点的内容

> ID：13519836
> 
> 赞同：0
> 
> 时间：2012-11-22T20:53:27.593
> 
> 标签：xml, xslt

我想将子节点附加到父节点中。

这是 XML。如果我在 order_h 下的 order_no 等于 order_h 中的以下 order_no，我想将 order_d 附加到 order_h

```
<document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <order>
    <order_h owner="GD" order_no="421424" profoma_po="421425">
      <order_d owner="GD" item_no="100000014" line_no="1" order_no="421424" color_code="730" manufacturer="100783">

          <Size_b assoc_id="69398" row_no="0" pct_ratio="PCT" total_pct="100" priority="0" ship_pack="BULK">
            <size_d assoc_id="69398" ship_pack="BULK" ctn_sku="5602060" size_code="XS" alloc_qty="18" plan_pct_ratio="23.5" row_no="0" sort_value="5"/>
          </Size_b>
      </order_d>
    </order_h>
    <order_h owner="GD" order_no="421424" profoma_po="421425">
      <order_d owner="GD" item_no="100000014" line_no="3" order_no="421424" color_code="002" manufacturer="100783">
      </order_d>
    </order_h>
    <order_h owner="GD" order_no="421424" profoma_po="421425">
      <order_d owner="GD" item_no="100000014" line_no="2" order_no="421424" color_code="257" manufacturer="100783">
      </order_d>
    </order_h>
  </order>
  <order>
    <order_h owner="GD" order_no="421425" profoma_po="421426">
      <order_d owner="GD" item_no="100000014" line_no="1" order_no="421425" color_code="730" manufacturer="100783">

      </order_d>
    </order_h>
    <order_h owner="GD" order_no="421425" profoma_po="421426">
      <order_d owner="GD" item_no="100000014" line_no="3" order_no="421425" color_code="002" manufacturer="100783">
      </order_d>
    </order_h>
    <order_h owner="GD" order_no="421425" profoma_po="421426">
      <order_d owner="GD" item_no="100000014" line_no="2" order_no="421425" color_code="257" manufacturer="100783">
                  </order_d>
    </order_h>
  </order>
  <order>
    <order_h owner="GD" order_no="421426" profoma_po="421427">
      <order_d owner="GD" item_no="100000015" line_no="1" order_no="421426" color_code="000" manufacturer="100783">
      </order_d>
    </order_h>
    <order_h owner="GD" order_no="421426" profoma_po="421427">
      <order_d owner="GD" item_no="100000015" line_no="3" order_no="421426" color_code="002" manufacturer="100783">
         </order_d>
    </order_h>
    <order_h owner="GD" order_no="421426" profoma_po="421427">
      <order_d owner="GD" item_no="100000015" line_no="2" order_no="421426" color_code="450" manufacturer="100783">
                  </order_d>
    </order_h>
  </order>
  <order>
    <order_h owner="GD" order_no="421427" profoma_po="421428">
      <order_d owner="GD" item_no="100000015" line_no="1" order_no="421427" color_code="000" manufacturer="100783">
        </order_d>
    </order_h>
    <order_h owner="GD" order_no="421427" profoma_po="421428">
      <order_d owner="GD" item_no="100000015" line_no="3" order_no="421427" color_code="002" manufacturer="100783">
      </order_d>
    </order_h>
    <order_h owner="GD" order_no="421427" profoma_po="421428">
      <order_d owner="GD" item_no="100000015" line_no="2" order_no="421427" color_code="450" manufacturer="100783">
      </order_d>
    </order_h>
  </order>
</document> 
```

我需要如下输出

```
<document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <order>
      <order_h owner="GD" order_no="421424" profoma_po="421425">
         <order_d owner="GD" item_no="100000014" line_no="1" order_no="421424" color_code="730" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000014" line_no="3" order_no="421424" color_code="002" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000014" line_no="2" order_no="421424" color_code="257" manufacturer="100783"/>
      </order_h>
   </order>
   <order>
      <order_h owner="GD" order_no="421425" profoma_po="421426">
         <order_d owner="GD" item_no="100000014" line_no="1" order_no="421425" color_code="730" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000014" line_no="3" order_no="421425" color_code="002" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000014" line_no="2" order_no="421425" color_code="257" manufacturer="100783"/>
      </order_h>
   </order>
   <order>
      <order_h owner="GD" order_no="421426" profoma_po="421427">
         <order_d owner="GD" item_no="100000015" line_no="1" order_no="421426" color_code="000" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000015" line_no="3" order_no="421426" color_code="002" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000015" line_no="2" order_no="421426" color_code="450" manufacturer="100783"/>
      </order_h>
   </order>
   <order>
      <order_h owner="GD" order_no="421427" profoma_po="421428">
         <order_d owner="GD" item_no="100000015" line_no="1" order_no="421427" color_code="000" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000015" line_no="3" order_no="421427" color_code="002" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000015" line_no="2" order_no="421427" color_code="450" manufacturer="100783"/>
      </order_h>
   </order>
</document> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:37:26.947

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="order_h|order_d/node()"/>

 <xsl:template match="order_h[1]">
  <xsl:copy>
   <xsl:apply-templates select=
    "@*|node()|following-sibling::*/node()"/>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时**（更正为格式良好的 XML 文档）：

```
<document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <order>
    <order_h owner="GD" order_no="421424" profoma_po="421425">
      <order_d owner="GD" item_no="100000014" line_no="1" order_no="421424" color_code="730" manufacturer="100783">

          <Size_b assoc_id="69398" row_no="0" pct_ratio="PCT" total_pct="100" priority="0" ship_pack="BULK">
            <size_d assoc_id="69398" ship_pack="BULK" ctn_sku="5602060" size_code="XS" alloc_qty="18" plan_pct_ratio="23.5" row_no="0" sort_value="5"/>
          </Size_b>
      </order_d>
    </order_h>
    <order_h owner="GD" order_no="421424" profoma_po="421425">
      <order_d owner="GD" item_no="100000014" line_no="3" order_no="421424" color_code="002" manufacturer="100783">
      </order_d>
    </order_h>
    <order_h owner="GD" order_no="421424" profoma_po="421425">
      <order_d owner="GD" item_no="100000014" line_no="2" order_no="421424" color_code="257" manufacturer="100783">
      </order_d>
    </order_h>
  </order>
  <order>
    <order_h owner="GD" order_no="421425" profoma_po="421426">
      <order_d owner="GD" item_no="100000014" line_no="1" order_no="421425" color_code="730" manufacturer="100783">

      </order_d>
    </order_h>
    <order_h owner="GD" order_no="421425" profoma_po="421426">
      <order_d owner="GD" item_no="100000014" line_no="3" order_no="421425" color_code="002" manufacturer="100783">
      </order_d>
    </order_h>
    <order_h owner="GD" order_no="421425" profoma_po="421426">
      <order_d owner="GD" item_no="100000014" line_no="2" order_no="421425" color_code="257" manufacturer="100783">
                  </order_d>
    </order_h>
  </order>
  <order>
    <order_h owner="GD" order_no="421426" profoma_po="421427">
      <order_d owner="GD" item_no="100000015" line_no="1" order_no="421426" color_code="000" manufacturer="100783">
      </order_d>
    </order_h>
    <order_h owner="GD" order_no="421426" profoma_po="421427">
      <order_d owner="GD" item_no="100000015" line_no="3" order_no="421426" color_code="002" manufacturer="100783">
         </order_d>
    </order_h>
    <order_h owner="GD" order_no="421426" profoma_po="421427">
      <order_d owner="GD" item_no="100000015" line_no="2" order_no="421426" color_code="450" manufacturer="100783">
                  </order_d>
    </order_h>
  </order>
  <order>
    <order_h owner="GD" order_no="421427" profoma_po="421428">
      <order_d owner="GD" item_no="100000015" line_no="1" order_no="421427" color_code="000" manufacturer="100783">
        </order_d>
    </order_h>
    <order_h owner="GD" order_no="421427" profoma_po="421428">
      <order_d owner="GD" item_no="100000015" line_no="3" order_no="421427" color_code="002" manufacturer="100783">
      </order_d>
    </order_h>
    <order_h owner="GD" order_no="421427" profoma_po="421428">
      <order_d owner="GD" item_no="100000015" line_no="2" order_no="421427" color_code="450" manufacturer="100783">
      </order_d>
    </order_h>
  </order>
</document> 
```

**产生想要的正确结果：**

```
<document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <order>
      <order_h owner="GD" order_no="421424" profoma_po="421425">
         <order_d owner="GD" item_no="100000014" line_no="1" order_no="421424" color_code="730" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000014" line_no="3" order_no="421424" color_code="002" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000014" line_no="2" order_no="421424" color_code="257" manufacturer="100783"/>
      </order_h>
   </order>
   <order>
      <order_h owner="GD" order_no="421425" profoma_po="421426">
         <order_d owner="GD" item_no="100000014" line_no="1" order_no="421425" color_code="730" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000014" line_no="3" order_no="421425" color_code="002" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000014" line_no="2" order_no="421425" color_code="257" manufacturer="100783"/>
      </order_h>
   </order>
   <order>
      <order_h owner="GD" order_no="421426" profoma_po="421427">
         <order_d owner="GD" item_no="100000015" line_no="1" order_no="421426" color_code="000" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000015" line_no="3" order_no="421426" color_code="002" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000015" line_no="2" order_no="421426" color_code="450" manufacturer="100783"/>
      </order_h>
   </order>
   <order>
      <order_h owner="GD" order_no="421427" profoma_po="421428">
         <order_d owner="GD" item_no="100000015" line_no="1" order_no="421427" color_code="000" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000015" line_no="3" order_no="421427" color_code="002" manufacturer="100783"/>
         <order_d owner="GD" item_no="100000015" line_no="2" order_no="421427" color_code="450" manufacturer="100783"/>
      </order_h>
   </order>
</document> 
```

**说明**：

正确使用和覆盖**[身份规则](http://dpawson.co.uk/xsl/sect2/identity.html)**。

# iphone - 如何将迭代对象添加到 NSMutableArray

> ID：13519837
> 
> 赞同：0
> 
> 时间：2012-11-22T20:53:30.263
> 
> 标签：iphone, core-data, nsmutablearray

当我调用 DidSelectRowAtIndexPath 时，我正在检查是否检查了单元格，如果是，请检查核心数据中的键。（此过程允许我将导航按钮从 nil 设置为 Add 如果选中项目）。我还想将所选项目放入一个数组（或集合）中，以便我可以在我的 Add 方法中调用它（以保存到核心数据）。我已经在头文件中声明了checkedArray，但它只将最后选择的单元格保存到数组中。这样做的正确方法是什么？

```
Athlete *checkedAthlete = (Athlete *)[self.fetchedResultsController objectAtIndexPath:indexPath];

[checkedAthlete setValue:[NSNumber numberWithBool:targetCustomCell.checked] forKey:@"athleteChecked"];

BOOL hasChecked = NO;
for (checkedAthlete in self.fetchedResultsController.fetchedObjects)
{
    BOOL isChecked = [[checkedAthlete valueForKey:@"athleteChecked"] boolValue];
    if (isChecked)
    {
        hasChecked = YES;

       checkedArray = [[NSMutableArray alloc] initWithObjects:checkedAthlete,nil];
        //NSLog(@"%@",checkedArray);
    }
} 
```

我还在标题中声明了 NSMutableSet 并尝试了：

```
 [testSet = [NSMutableSet set] addObject:checkedAthlete]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:15:31.657

在这条线上

```
checkedArray = [[NSMutableArray alloc] initWithObjects:checked athlete,nil]; 
```

您正在做的是创建一个包含一个项目的新数组并将其分配给`checkedArray`.

您要做的是创建一个数组/集合，然后向其中添加对象。

```
- (void)viewDidLoad;
{
  [super viewDidLoad];

  self.checkedArray = [NSMutableArray array];
} 
```

然后你做

```
[self.checkedArray addObject:checkedAthlete]; 
```

这是采用现有的可变数组/集并向其中添加一个新对象，就像您每次只使用一个项目创建一个新的可变数组/集一样

# c - Scanf将字符串输入解析为字符数组

> ID：13519840
> 
> 赞同：1
> 
> 时间：2012-11-22T20:53:47.580
> 
> 标签：c, char, scanf

我想在 2 个单独的数组中解析用户输入（使用 scanf）。g++ 编译没有错误，但我得到一个内存访问错误（核心转储）。（德语：“Speicherzugriffsfehler (Speicherabzug geschrieben)”）

```
char *top[10];
char *bottom[10];

for(i = 0; i < 5; i++){
    printf("Karte %d: Obere Werte? ", i );
    scanf( "%s", top[i] );
    printf( "Karte %d: Untere Werte? ", i);
    scanf( "%s", bottom[i] );
} 
```

这里有什么问题？我尝试使用`"stringcpy"`temp-var `("stringcpy(top[i], temp)")`，但它也不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T20:58:25.397

你还没有为你的字符串分配内存。您提供给 scanf 的参数是未初始化的指针。

`top[i] = "test"`分配一个指向您的变量的指针并使用有效值对其进行初始化。

相反，`scanf(..., top[i])`尝试写入 where`top[i]`点。但未`top[i]`初始化并指向某个随机位置，这会导致您的内存访问错误。

当您查看[man scanf](http://linux.die.net/man/3/scanf)时，您可以阅读以下内容

> Conversions
> ...
> s
> 匹配一系列非空白字符；

现在是重要的部分

> 下一个指针必须是一个指向字符数组的指针，它的长度足以容纳输入序列和自动添加的终止空字节 ('\0')。

因此，您必须通过分配一个数组`malloc()`或声明足够大的字符数组。

```
char top[10][21];
char bottom[10][21];
int i;
for(i = 0; i < 5; i++){
    printf("Karte %d: Obere Werte? ", i);
    scanf("%20s",top[i]);
    printf("Karte %d: Untere Werte? ", i);
    scanf("%20s",bottom[i]);
} 
```

和

```
scanf("%20s",top[i]); 
```

您限制读取的字符数，以防止缓冲区溢出

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T21:04:41.783

正如另一个答案所说，您必须为字符串分配位置。您想要一个顶部和底部字符串的数组，但`char * top[10]`您只为 10 个指针分配空间，而不是为字符串中的字符分配空间。起作用的原因`top[10] = "Hello"`是编译器隐式分配了字符串文字，编译器返回指向这些字符的指针。

```
char *top[10], *bottom[10];
for(i = 0; i < 5; i++)
{
    top[i] = malloc(100); // reserve room for string up to 100 chars
    printf("Karte %d: Obere Werte? ", i);
    scanf("%s",top[i]);
    bottom[i] = malloc(100);
    printf("Karte %d: Untere Werte? ", i);
    scanf("%s",bottom[i]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:10:16.813

你所拥有的是一个指针数组。您需要为数组中的每个指针分配内存。

您可以在之前执行以下操作`scanf`。

```
top[i] = malloc(sizeof(char)*255);
bottom[i] = malloc(sizeof(char)*255); 
```

使用后不要忘记释放。

```
free(top[i]);
free(bottom([i]); 
```

# wordpress - 如何更改 Wordpress 目录？

> ID：13519849
> 
> 赞同：0
> 
> 时间：2012-11-22T20:54:40.073
> 
> 标签：wordpress, subdirectory

如何更改 Wordpress 的目录，例如。/wp-admin 或 wp-login 不会弄乱任何内部文件？我以前尝试过，但我的 Wordpress 网站停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:28:46.897

这是“可能的”，但*你会* **弄乱内部文件**。

这已经在 WordPress StackExchange 中讨论过了。你会在这篇文章中找到很多链接和参考资料：
[我可以重命名 wp-admin 文件夹吗？](https://wordpress.stackexchange.com/q/106/12615).

这另一个可能有助于“白标”WordPress：
[隐藏网站正在使用 WordPress 的事实的步骤？](https://wordpress.stackexchange.com/q/1507/12615)

# ocaml - 使用 ocaml 以 10.000 为底数相加

> ID：13519850
> 
> 赞同：2
> 
> 时间：2012-11-22T20:54:42.547
> 
> 标签：ocaml

我尝试添加由列表表示的数字，例如：

```
0 = []
1 = [1]
2005 = [2005]
123456 = [3456; 12]
1234567890 = [7890; 3456; 12]
1000000001 = [1; 0; 10] 
```

所以`add [9999] [1] = [0;1]`

我已经这样做了：

```
let rec add l1 l2 =
match l1, l2 with
| n::l1', m::l2' -> if n+m < 10000 then
                        (n+m)::(add l1' l2')
                    else
                        begin
                            match l1', l2' with
                            | p::l1'', q::l2'' -> ((n+m) - 10000)::(add ((1+p)::l1'') l2')
                            | p::l1'', [] -> ((n+m) - 10000)::(add ((1+p)::l1'') l2')
                            | [], q::l2'' -> ((n+m) - 10000)::(add l1' ((1+q)::l2''))
                            | [], [] -> ((n+m) - 10000)::[1]
                        end
| [], [] -> []
| m::l1', [] -> m::(add l1' [])                    
| [], m::l2' -> m::(add [] l2') 
```

但它不适用于类似于`add [9999;9999] [1]` which give`[0; 10000]`而不是`[0;0;1]`.

随身携带有问题，但我找不到。

它适用于`add [8500;6000] [5600;452]`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T21:09:17.243

在我看来，您的案例假设数字始终小于或等于 9999，但是当有进位时，情况并非如此。因此，即使其中一个列表为空，您也需要检查 10000。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T21:48:58.860

问题在于您的非规范化表示，它可以临时创建大于 9999 的数字，这是您在所有地方都不期望的。这是一个带有显式进位的简单解决方案，可以避免该问题：

```
let base = 10_000
let rec add' xs ys c =
  match xs, ys with
  | [], [] -> if c = 0 then [] else [c]
  | [], zs | zs, [] -> add' [0] zs c
  | x::xs', y::ys' -> (x + y + c) mod base :: add' xs' ys' ((x + y + c) / base)
let add xs ys = add' xs ys 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T14:38:04.393

让我们看看您的代码中的问题。我已将我对问题的解释放在评论中：

```
let rec add l1 l2 =
   match l1, l2 with
   | n::l1', m::l2' -> if n+m < 10000 then
                       (n+m)::(add l1' l2')
                       else
                       begin
                         (* in all these cases you don't check if 1+p is > base *) 
                         match l1', l2' with
                          | p::l1'', q::l2'' -> ((n+m) - 10000)::(add ((1+p)::l1'') l2')
                          | p::l1'', [] -> ((n+m) - 10000)::(add ((1+p)::l1'') l2')
                          | [], q::l2'' -> ((n+m) - 10000)::(add l1' ((1+q)::l2''))
                          | [], [] -> ((n+m) - 10000)::[1]
                       end
   | [], [] -> []
   (* and the error above causes problem in these arms, since m can now be > base *)
   | m::l1', [] -> m::(add l1' [])
   | [], m::l2' -> m::(add [] l2') 
```

让我们先把特殊情况放在首位，用一个值替换文字常量，去掉多余的括号并修复进位错误。

```
let rec add l1 l2 base =
   match l1, l2 with
   | [], [] -> []
   | m::l1', []
   | [], m::l1' -> if m >= base then m-base::add l1' [1] base else m::l1'
   | n::l1', m::l2' -> let r = n + m in 
                       if r < base then
                         r::add l1' l2' base
                       else begin
                         match l1', l2' with
                          | [], []      -> [r-base ; 1]
                          | p::l1'', []
                          | [], p::l1'' -> r-base::add [] (1+q::l1'') base
                          | p::l1'', _  -> r-base::add (1+p::l1'') l2' base
                       end 
```

现在我们可以看到可以提取一些代码并将其转换为专用函数：

```
let rec add l1 l2 base =
   let rec carry = function 
    | [] -> []
    | [x] when x >= base -> [x-base;1]
    | x::y::l when x >= base -> x-base::carry (y+1::l)
    | l -> l
   in
   match l1, l2 with
   | [], [] -> []
   | l1, []
   | [], l1 -> carry l1
   | n::l1', m::l2' -> let r = n + m in
                       if r < base then
                         r::add l1' l2' base
                       else begin
                         match l1', l2' with
                          | [], []     -> [r-base ; 1]
                          | l1'', []
                          | []  , l1'' -> carry (r::l1'')
                          | p::l1'', _ -> r-base::add (1+p::l1'') l2' base
                       end 
```

现在您的代码应该可以使用保留的进位，并且可以使用任何自然基础。

# c# - 表单发布最佳实践

> ID：13519861
> 
> 赞同：1
> 
> 时间：2012-11-22T20:56:06.297
> 
> 标签：c#, asp.net-mvc

我正在编写我的第一个 ASP.NET MVC 4 应用程序，并且正在努力弄清楚我所做的是否是一种好方法、过度杀伤或只是愚蠢。

我知道有一百万种方法可以做事，但只是在寻找一些最佳实践指导。

基本上，我的索引视图呈现一个简单的表单，在 POST 上我正在创建一个 PDF，将其存储在会话和 ViewBag 中，并将其传递给 Confirm 操作。所有 Confirm 操作都用于显示视图 (Confirm.cshtml)。

有人可以在这里指导我吗？

**控制器**

```
public class HomeController : Controller
{
    //
    // GET: /Home/

    public ActionResult Index()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Index(FormCollection formCollection)
    {

        // Create PDF
        var doc = new Document();
        MemoryStream memoryStream = new MemoryStream();

        PdfWriter writer = PdfWriter.GetInstance(doc, memoryStream);

        doc.Open();
        doc.Add(new Paragraph("First Paragraph"));
        doc.Add(new Paragraph("Second Paragraph"));
        doc.Close();

        byte[] docData = memoryStream.GetBuffer(); // get the generated PDF as raw data

        // create id and store data in Session
        var id = Guid.NewGuid().ToString();
        Session[id] = docData;

        // store the id in ViewBag
        ViewBag.id = id;

        return View("Confirm");
    }

    // Handles the /Home/Confirm view
    public ActionResult Confirm()
    {
        return View();
    }

    public ActionResult Download(string id)
    {
        var docData = (byte[]) Session[id];

        if (docData == null) {
            return HttpNotFound();
        }

        Session[id] = null;

        return File(docData, "application/pdf", "test.pdf");
    }

} 
```

**看法**

```
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Confirm</title>
</head>
<body>
    <div>
        <a href="/Home/Download?id=@ViewBag.id">Download PDF</a>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T21:32:50.750

从 MVC 的角度来看：

使用 ViewModel 是一个很好的实践，请查看本教程。

[http://www.asp.net/mvc/tutorials/older-versions/nerddinner/use-viewdata-and-implement-viewmodel-classes](http://www.asp.net/mvc/tutorials/older-versions/nerddinner/use-viewdata-and-implement-viewmodel-classes)

**一些优点：**

视图模型将视图与模型类隔离开来，并允许模型独立于视图演化。

这可以在视图模板中实现类型安全、编译时检查和编辑器智能感知。

安全性，如果您将对象直接从 ORM 公开到视图，则可能会操纵 IsAdmin 等属性，使用视图模型可以限制这一点。

**我会在索引发布操作中更改的内容**

```
return View("Confirm"); 
```

到：

```
return RedirectToAction("Confirm"); 
```

因为：

Post/Redirect/Get (PRG) 是一种 Web 开发设计模式，可防止某些重复的表单提交

[http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

# javascript - 如何在给定文本上添加信息弹出窗口

> ID：13519862
> 
> 赞同：0
> 
> 时间：2012-11-22T20:56:06.890
> 
> 标签：javascript, html, css

我有一些书名选项，我想在鼠标悬停在每个书名上时添加一个弹出窗口，其中包含对该书的一些有意义的描述。弹出窗口应该出现在相应的书名上方并覆盖它。我不确定如何处理这个问题，也许 jQuery 可以提供帮助。我无法想象没有 Javascript，只使用 CSS 的解决方案。

HTML 如下所示（如有必要，可以更改）：

```
<tr><td>
<input type="radio" value="book1" name="download"> Book 1 <br>
<input type="radio" value="book2" name="download"> Book 2 <br>
<input type="radio" value="book2" name="download"> Book 3 <br>
</td></tr> 
```

在书 1、书 2 和书 3 上，鼠标悬停时应该会出现一个信息弹出窗口（包含页数、摘要等内容）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:23:22.347

您可以调整这种使用数据属性的内容作为工具提示内容的纯 CSS 方法：
[http ://www.impressivewebs.com/pure-css-tool-tips/](http://www.impressivewebs.com/pure-css-tool-tips/)

适用于 IE8+

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:03:33.327

[http://jquery.bassistance.de/tooltip/demo/](http://jquery.bassistance.de/tooltip/demo/)可能是最快的实现方式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T21:08:37.457

有许多 jQuery 工具提示插件可以帮助您实现这一目标。要使插件正常工作，通常您只需在 HTML 中添加一个“标题”属性。

查看其中一些[http://www.tripwiremagazine.com/2012/07/jquery-tooltip-plugin.html](http://www.tripwiremagazine.com/2012/07/jquery-tooltip-plugin.html)并选择 UI 符合您需要的那个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T21:09:41.547

我会建议你[喝醉的 jquery 插件](http://onehackoranother.com/projects/jquery/tipsy/)。修改后的版本也可以通过[bootstrap](http://twitter.github.com/bootstrap/javascript.html#tooltips)获得。

# mysql - 比较 MySQL 中的表数据

> ID：13519863
> 
> 赞同：0
> 
> 时间：2012-11-22T20:56:10.213
> 
> 标签：mysql, sql, select, optimization, compare

我需要确定一个表中缺少哪些记录，以另一个表进行比较。

我试过了：

```
SELECT * FROM tableA WHERE tableA.id NOT IN (SELECT tableB.id FROM tableB) 
```

当然，当数据很小但 tableA 和 tableB 都有超过 400k 的记录并且进程卡住时，它通常可以工作，有没有更优化的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:58:21.740

连接通常比 IN 和 NOT IN 子句快。尝试这个：

```
SELECT tableA.*
FROM tableA left join tableB on tableA.id = tableB.id
WHERE tableB.id is null 
```

# javascript - 执行作为变量给出的函数

> ID：13519864
> 
> 赞同：1
> 
> 时间：2012-11-22T20:56:12.360
> 
> 标签：javascript, function, variables, scope, this

我创建了以下对象：

```
function Calculator() { 
    //some code here, including object variables and functions, such as:
    this.add = function(x) {
       //again, irrelevant code
    }
    //similar methods
}

var calc = new Calculator(); 
```

然后，我尝试执行以下操作：

```
var met = calc.add;
met(5); 
```

但它没有用。

（我已经检查了所有内容 - 变量 'met' 的类型为 'function'，当我“提醒”它确定时，它会提醒正确的字符串 -`function(x){...}`等等。但是调用 met(7) 什么都不做，而调用`calc.add(7)`添加数字）

有谁知道为什么，或者我该如何解决？（我可以修复它吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:14:55.920

实际上，里面的功能`add`并不是无关紧要的。您遇到的问题是因为`this`javascript 中的行为方式。

当你这样称呼它时：

```
met(5); 
```

这和这样做是一样的：

```
window.met(5); // assuming browsers 
```

这意味着`this`in met 绑定到全局对象。所以它不起作用的原因是因为您尝试添加的任何变量都不存在于全局对象中。您可以简单地通过在全局对象中声明该变量来测试它（对于浏览器来说，它恰好是全局变量）：

```
var foo = {
    i = 0,
    incr = function(){ return ++this.i }
}
foo.incr(); // this works as expected

// now assign foo.incr to the global object:
var inc = foo.incr;
inc(); // this fails because window.i doesn't exist

// create i in window
i =0;
inc(); // now this works, maybe a bit unexpected 
```

如果您想简单地别名但仍对对象进行操作，`add`您有两个选择。首先是确保将其作为以下方法调用：`met``calc``add``calc`

```
var met = function(x) { return calc.add(x) };
met(5); 
```

这很简单，并且可以按预期工作。通过添加一个匿名函数包装器，我们可以调用`add`as `calc.add()`which make `this`bound to calc。

第二个是@Guffa 提到的：使用 call 或 apply 指向`this`任何你想要的：

```
var met = calc.add;
met.call(calc,5); 
```

要了解有关`this`javascript 工作原理的更多信息，请阅读以下内容：[Javascript 中的“this”关键字如何在对象文字中起作用？](https://stackoverflow.com/questions/13441307/how-does-the-this-keyword-in-javascript-act-within-an-object-literal/13441628#13441628)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:59:28.750

当您获得对方法的引用时，您只是获得了函数，它不再连接到对象。如果您调用该函数，`this`则不是对对象的引用，而是全局`window`对象，这就是函数中的代码不再起作用的原因。

要将其作为方法调用，您需要在调用时指定它应作为对象的方法运行：

```
met.call(calc, 5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:08:39.473

有用。你没有你认为你有的问题。

```
function Calculator() { 
    //some code here, including object variables and functions, such as:
    this.add = function(x) {
       alert('bob');
    }
    //similar methods
}

var met = new Calculator().add;

met();//'bob' 
```

正如其他人所建议的那样，您可能会遇到某种范围问题。met 应该可以访问在 add 方法之上建立的任何 var。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T21:16:35.353

您必须记住的是，每次调用函数时，它都好像**这**是一个隐藏参数，而不是在您调用函数时设置并保存在函数闭包中的东西。

当您调用 met(5) 时，以下内容将输出到控制台：

```
function Calculator() {
    y = 10; // set variable

    this.add = function(x) {
       console.log( this.y ); // => undefined as window object does not have y
       console.log( y ); // => 10 as function can access parent function's closure

       function printY( ) {
            console.log( y ); // => undefined as this function can only access parent function's closure and that does not contain a y variable.
       }
    }
} 
```

# java - 休眠/JPA；我可以将索引列表作为第一类实体吗？

> ID：13519867
> 
> 赞同：2
> 
> 时间：2012-11-22T20:56:43.960
> 
> 标签：java, hibernate, jpa

假设我有一个“Foos”表：

```
create table Foos (
  id number not null,
  index number not null,
  label varchar2(256)
); 
```

和类：

```
// Sans JPA cause I'm lazy
public class Foo {
  private int id;
  private int index;
  private String label;
} 
```

*如果*我有一个超类和适当的表/外键，我可以这样做：

```
@Entity
public class SuperFoo {
  private int id;

  @OneToMany(mappedBy="superFoo")
  @OrderColumn(name"index")
  private List<Foo> foos;
  // snip
} 
```

那会很好用。我可以在该列表中添加、删除和重新排序项目，只要我坚持，Hibernate 就会为我整理索引列`SuperFoo`。

但是，就我而言，**我没有 super class**。我只有我的`Foos`表，它代表一个可以任意排序的值列表。

虽然完全可以自己管理这个（即保存时自己填充索引，加载时按索引排序）我想知道：**有没有办法让hibernate / JPA为我管理这个？**

**Hibernate / JPA 是否支持索引列表作为第一类实体？**

# c# - 我应该如何使用 mvc/razor 实现具有“动态属性”的模型？

> ID：13519869
> 
> 赞同：3
> 
> 时间：2012-11-22T20:56:54.370
> 
> 标签：c#, asp.net-mvc, razor

您将如何使用 mvc/razor 实现具有“动态属性”的模型？我真的不确定“动态属性”是否是正确的术语。

场景：我有一个来自数据库的项目列表。然后从属性列表（也来自数据库）中为每个项目提供一组“属性”。

在我的项目模型中，我认为我应该有一个属性/属性的集合，对吗？就像是

```
public class Item
{

    public int ItemId { get; set; }
    public string ItemName{ get; set; }

    public virtual ICollection<Attribute> Attributes { get; set; }
}

public class Attribute
{
    public int AttributeId { get; set; }
    public string AttributeName { get; set; }
} 
```

我的目标是呈现一个视图，这样如果用户从下拉列表中选择一个项目，与所选项目关联的属性集将与相应的 html 输入元素（文本框或下拉列表）一起显示。

用户从下拉列表中选择项目时的示例 UI（假设它是“相机”）

*   相机
    *   品牌 - [文本框]
    *   模型 - [文本框]
    *   保修 - [保修期限下拉列表]

用户从下拉列表中选择项目时的示例 UI（假设它是“房子”）

*   房子
    *   建筑面积 - [文本框]
    *   房间数量 - [文本框]
    *   房间数量 - [文本框]

创建/编辑/删除像上面定义的属性这样的简单模型是没有问题的。让我失望的是实现上述“动态属性”的方式。

我来自 WebForms，但对 MVC 还是很陌生，所以放轻松好吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:00:44.827

这种方法的名称简称为 Entity-Attribute-Value 或 EAV。正如您毫无疑问地意识到，当您需要大量不同的元数据并且并非每个项目都有每个适用的部分或简单的数据不可用时，这是一种有用的方法。医疗行业经常使用它来构建患者记录。这是一篇关于它的维基百科文章：

[http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)

结合 ASP.Net MVC 搜索它，您可能会找到一堆关于如何正确实现它的好资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:46:35.717

事实证明，这可以像任何其他模型实现一样轻松完成。我只需要创建“项目模板”，其中包含与项目属性相关的属性和其他元数据。然后我要求用户选择一个“模板”，以便我可以相应地更新属性列表和视图。之后，用户现在可以为模板中的每个属性填写相应的值。生成的模型与项目模板不同，因此涉及部分视图和编辑器模板。

我知道这与问题无关，但我想值得一提的是，使用视图模型而不是域模型可以简化事情。很多。

为了让事情变得更容易，我必须做的另一件事是使用面向文档的存储而不是传统的关系数据库，因为我认为像这样的 EAV 类型的项目更适合 NoSQL。

我面临的下一个问题是如何根据[此处](https://stackoverflow.com/questions/14484200/how-can-i-do-a-data-type-validation-on-a-field-that-is-dependent-on-another-fiel)属性的数据类型来验证用户的输入。

# asp.net - ASP.NET 日期格式问题

> ID：13519870
> 
> 赞同：0
> 
> 时间：2012-11-22T20:57:04.790
> 
> 标签：asp.net, sql-server, datetime

我有一个 SQL Server 数据库，其中有一列日期为`2001-12-23`. insert 语句使用以下代码确保输入的格式正确：

```
var start_date_formatted = DateTime.ParseExact(start_date.Text, "dd-MM-yyyy", null); 
```

即使输入被格式化，因为`dd-MM-yyyy`它仍然在数据库中显示为`2001-12-23`.

我不明白的事实是，每当我从数据库中查询数据时，它都会返回格式正确的日期，`dd-MM-yyyy`即使它在数据库中显示为`yyyy-MM-dd`.

这没什么大不了的，因为我最终得到了我需要的格式。

问题是时间字符串被添加到我的日期生成的输出`23-12-2001 00:00:00`。我只需要日期，但无法弄清楚为什么要添加它以及为什么不能使用以下方法更改它：

```
DateTime.ParseExact(startdate, "dd-MM-YYYY", null); // string is not recognized as valid DateTime 
```

或者

```
.ToString("dd-MM-YYYY"); // no overload method ToString that takes 1 argument 
```

由于我是 asp.net 的新手，我想了解如何处理日期格式以及是否有任何一般配置设置需要并设置某些日期格式？

更新

```
var dt = BookingAccess.ManageBookingsDataTable();
            string id = string.Empty;
            string name = string.Empty;
            string startdate = string.Empty;
            string enddate = string.Empty;
            string full_string = string.Empty;
            if (dt.Rows.Count > 0)
            {
                for (int i = 0; i < dt.Rows.Count; i++)
                {
                    id = dt.Rows[i]["id"].ToString();
                    var sdate = dt.Rows[i]["start_date"];
                    name = dt.Rows[i]["Pet name"].ToString();
                    startdate = dt.Rows[i]["start_date"].ToString("dd-MM-yyyy"); // error is thrown here
                    enddate = dt.Rows[i]["end_date"].ToString();
                    full_string = startdate + " to " + enddate + " (" + name + ")";
                    CurrentBookings.Items.Add(new ListItem(full_string, id));
                }
            } 
```

这似乎也没有格式化日期：

```
startdate = string.Format("{0:dd/MM/yyyy}", dt.Rows[i]["start_date"].ToString()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:08:17.567

在 C# 中没有 Date 类型，因此所有日期都是 DateTime 类型的变量。因此，当您从 db 获取日期时，它会以时间 00:00:00 传输到 DateTime 变量

要从中获取字符串，您可以使用`ToString("dd-MM-yyyy")`：

```
var dt = DateTime.Now;
string dateinstring = dt.ToString("dd-MM-yyyy")); //it contains "23-11-2012" 
```

**更新：**

你的问题是你的数据表没有输入，所以你的开始日期是对象，而不是日期时间。您应该将其转换为 DateTime：

```
startdate = ((DateTime)dt.Rows[i]["start_date"]).ToString("dd-MM-yyyy"); 
```

如果您`dt.Rows[i]["start_date"]`不可为空，这将起作用，在其他情况下，您应该在转换之前检查它是否不为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:07:52.517

您不必担心 SQL Server 中 DateTime 的显示格式。在我的 SQL 管理工作室中，它们也显示为 2001-12-23，但在我的 Visual Studio 中显示为 23-12-2001。

您可能将列数据类型设置为`DateTime`. 如果未指定，这将添加时间 00:00:00。如果您只想存储日期，则可以指定类型，尽管在您的网站上`Date`格式化并不重要。`DateTime`

--

更新：

将数据库中的值转换为 DateTime，然后对其进行格式化：

```
DateTime date = Convert.ToDateTime(dt.Rows[i]["start_date"]); 
string startdate = date.ToString("dd-MM-yyyy"); 
```

# unix - 使用我的 root 帐户从远程服务器移动文件。无法使用我的其他管理员帐户编辑文件

> ID：13519875
> 
> 赞同：0
> 
> 时间：2012-11-22T20:57:15.177
> 
> 标签：unix, command

`scp`我使用我的帐户传输文件，`root`因为它不允许我使用我的其他管理员帐户`warren`。我也尝试使用我的`warren`帐户远程编辑文件，但不能，它仅适用于`root`. 这是为什么？我怎样才能改变它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:59:14.060

在 root 中使用 chown 将文件的所有者更改为 warren。

```
 chown warren /path/tofiles 
```

# wpf - WPF 绑定到数据集

> ID：13519877
> 
> 赞同：0
> 
> 时间：2012-11-22T20:57:22.643
> 
> 标签：wpf, data-binding

我将以下关系定义为强类型数据集：

![三通关系](../Images/9fcde9ac0739be80c09d51c8cbd92b5e.png)

让我们假设 Window 的 datacontext 绑定到 User 表的当前行。

我想绑定一个 DataGrid，以便为 ConfigOption 表中的每个项目显示一个复选框列表，我们假设 ConfigOption_Description 是一个字符串值，其中包含要在复选框旁边显示的名称。

对于适用于他们的每个配置选项，用户在 UserConfig 表中都有一条记录。配置值 (ConfigValue) 是一个布尔值。如果表中没有出现任何记录，则假定该值设置为 false - 即用户没有启用此选项。

我知道我可以将窗口的数据上下文绑定到我的当前用户并使用传递当前用户的 UserID 的转换器我可以确定应该为当前用户启用每个选项中的哪个（因此应该检查哪些复选框）。

我想知道是否有一种方法可以定义我的 CollectionViewSource：

```
<Window>
  <Window.Resources>
    <CollectionViewSource x:Key="cvsUsers" />
    <CollectionViewSource x:Key="cvsUserConfig" />
    <CollectionViewSource x:Key="cvsConfigOptions" />
  </Window.Resources>
  <DataGrid DataContext="cvsConfigOptions">
    <CheckBox Content="{Binding Path=[ConfigOption_Description]}" IsChecked="????" />
  </DataGrid>
</Window> 
```

我知道我可以使用转换器绑定 IsChecked，但肯定有一种方法可以利用表和它们之间已经定义的关系来绑定这些对象。

只是一个假设的抽象示例（不起作用）将是：

```
<DataGrid>
  <Checkbox Content="Option1" IsChecked="CurrentUser.Option1.ConfigValue" />
  <Checkbox Content="Option2" IsChecked="CurrentUser.Option2.ConfigValue" />
  <Checkbox Content="Option3" IsChecked="CurrentUser.Option3.ConfigValue" />
</DataGrid> 
```

# wordpress - Wordpress 自定义帖子类型在现有页面上显示自定义帖子类型列表

> ID：13519888
> 
> 赞同：0
> 
> 时间：2012-11-22T20:58:29.313
> 
> 标签：wordpress, custom-post-type

我创建了一个自定义帖子类型来记录数据，这些数据将在现有页面上显示为列表/表格。

数据不需要有它自己的页面。数据将显示在表格中的现有页面上。

我使用的是高级自定义字段：中继器，但由于数据集很大，该页面需要很长时间来处理管理部分中的数据。

我已经创建了自定义帖子，这里没有问题。

我只是不知道如何在现有模板中显示自定义帖子数据。

```
 <?php query_posts( array('post_type'=>array('page','Custom_Post_Type'))); ?> 
```

当我在循环之前添加此代码时，它会显示所有页面和所有自定义帖子类型。我只希望它显示单个页面+所有自定义帖子类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T22:01:00.083

试试这个代码，把它粘贴到你想要表格的地方。您可以访问循环内的所有帖子信息，而不仅仅是标题。

```
$the_query = new WP_Query( array( 'post_type' => 'Custom_Post_Type' ) );

while ( $the_query->have_posts() ) : $the_query->the_post();
    echo '<tr><td>';
    the_title();
    echo '</td></tr>';
endwhile;

wp_reset_postdata(); 
```

# ios - 无法更改以编程方式生成的 UIView 中的标签

> ID：13519889
> 
> 赞同：2
> 
> 时间：2012-11-22T20:58:30.663
> 
> 标签：ios, uiview, nib

我正在尝试使用以编程方式加载的 NIB 更改标签。我创建了一个`MyView`包含`UILabel*`命名的类，`myLabel`但是当我使用时`MyView`我无法更改`myLabel`：

**我的视图.h**

```
@interface MyView : UIView
{
    UIView *view;
    UILabel *myLabel;
}
@property (nonatomic, retain) IBOutlet UIView *view;
@property (nonatomic, retain) IBOutlet UILabel *myLabel; 
```

**我的视图.m**

```
@implementation MyView
@synthesize myLabel, view;

- (id)initWithFrame:(CGRect)frame
{
... 
```

所以当我初始化`MyView`

```
UIView *myView = [[MyView alloc] initWithFrame:CGRectMake(0,0,100,100)]; 
```

我无法更改标签，因为`myLabel`未标识：

```
myView.myLabel.text = @"New Label Text"; 
```

我知道我的逻辑或对`UIView`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T21:01:11.897

您需要将其声明为，

```
MyView *myView = [[MyView alloc] initWithFrame:CGRectMake(0,0,100,100)];
myView.myLabel.text = @"New Label Text"; 
```

如果您使用`UIView`，则表示它找不到`myLabel`在`UIView`类中命名的属性。由于您已在 的子类中声明了此属性`UIView`，因此您需要在此处使用子类名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:02:10.773

您需要将 myView 转换为 MyView，因为您将其声明为普通 UIView。试试这个：

```
((MyView *)self.myView).myLabel.text = @"New Label Text"; 
```

或者简单地将您的 myView 声明为类型 MyView 而不是 UIView

# java - 运行时或事务控制器或其他什么？

> ID：13519891
> 
> 赞同：1
> 
> 时间：2012-11-22T20:58:36.043
> 
> 标签：java, http, web-applications, jmeter, load-testing

我有一系列请求需要发送到服务器。
例如

```
Http-Request-1  
Http-Request-2  
Http-Request-3  
Http-Request-4  
Http-Request-5  
Http-Request-6  
Http-Request-7 
```

我需要验证这些请求是否已在 4 秒内得到处理。
我的意思是 JMeter 将开始发送第一个请求，服务器响应，发送第二个请求，服务器响应等，然后 JMeter 发送最后一个请求，服务器发回最后一个响应，但**总体而言**，此流程不得超过 4 秒去完成。我的意思是从 JMeter 发送第一个请求到它收到最后一个响应的时间。
如果需要 6 秒，我需要测试失败。
我不确定如何最好地模拟这个。
我是否应该将所有 HTTP 请求示例放在 a 下`Simple Contoller`并将其作为子级添加到`Runtime Contoller`with 中`Runtime=4`？
例子：

```
Runtime Controller (Runtime=4)  
|-       Simple Controller  
             |-Http-Request-1  
             |-Http-Request-2  
             |-Http-Request-3  
             |-Http-Request-4  
             |-Http-Request-5  
             |-Http-Request-6  
             |-Http-Request-7 
```

**还是**我应该以某种方式使用`Transaction Controller`with `Assertion Listener`？
这些是等价的吗？考虑到我还需要报告结果，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:52:37.470

使用事务控制器，参见示例：

![在此处输入图像描述](../Images/f7779f58815e224afec8193c653ddfdc.png)

和持续时间断言： ![在此处输入图像描述](../Images/37372d8517b969747ce8ce4e17e9b75f.png)

但请确定您是否正在模拟 web 应用程序以添加计时器来模拟用户暂停时间。

在我的示例中，我没有为简化而添加任何内容。另请注意，如果这些请求是 Ajax 调用的结果，则 JMeter 不会模拟这些请求的并行性，而是按顺序执行它们，这会影响响应时间。

# python - 确保两个正则表达式找不到相同的结果

> ID：13519894
> 
> 赞同：1
> 
> 时间：2012-11-22T20:58:43.783
> 
> 标签：python, regex

我正在尝试从字符串中解析出所有日期（可能以不同的形式编写）。问题是可能有一个日期以这种形式写`d/m -y`，例如 22/11 -12。但也可以用这种形式写一个`d/m`没有指定年份的日期。如果我在此字符串中找到包含较长形式的日期，我不希望再次以较短的形式找到它。这是我的代码失败的地方，它两次找到第一个日期（一次有年份，一次没有年份）。

我真的有两个问题：（1）这样做的“正确”方式是什么。看来我是从错误的角度来解决这个问题的。（2）如果我坚持这种方式，这条线`datestring.replace(match.group(0), '')`怎么没有删除日期，所以我再也找不到了？

这是我的代码：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import re

dformats = (
    '(?P<day>\d{1,2})/(?P<month>\d{1,2}) -(?P<year>\d{2})',
    '(?P<day>\d{1,2})/(?P<month>\d{1,2})',
    '(?P<year>\d{4})-(?P<month>\d{2})-(?P<day>\d{2})',
            )

def get_dates(datestring):
    """Try to extract all dates from certain strings.

    Arguments:
    - `datestring`: A string containing dates.
    """
    global dformats

    found_dates = []

    for regex in dformats:
        matches = re.finditer(regex, datestring)
        for match in matches:
            # Is supposed to make sure the same date is not found twice
            datestring.replace(match.group(0), '')

            found_dates.append(match)
    return found_dates

if __name__ == '__main__':
    dates = get_dates('1/2 -13, 5/3 & 2012-11-22')
    for date in dates:
        print date.groups() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T21:08:09.230

两种方式：

1.  使用单个正则表达式并使用 | 操作员将您的所有案例合并在一起：

    `expr = re.compile ( r"expr1|expr2|expr3" )`

2.  只查找单个实例，然后为下一次搜索传递一个“起始位置”。请注意，这会使事情复杂化，因为无论选择哪种格式，您都希望始终从最早的匹配开始。即，遍历所有三个匹配项，找出最早的匹配项，进行替换，然后以递增的起始位置再次执行。无论如何，这使得选项 1 更容易。

补充几点：

1.  确保您使用的是“原始字符串”：在每个字符串的前面添加一个“r”。否则 '\' 字符可能会被吃掉并且不会传递给 RE 引擎

2.  考虑使用“sub”和一个回调函数代替“repl”参数来进行替换，而不是 finditer。在这种情况下，“repl”被传递了一个匹配对象，并且应该返回替换字符串。

3.  如果未选择该替代方案，则“单个” re 中的匹配组将具有值 None ，从而可以轻松检测使用了哪个替代方案。

4.  除非您打算修改该变量，否则不应说“全局”。

这是一些完整的工作代码。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import re

expr = re.compile(
    r'(?P<day1>\d{1,2})/(?P<month1>\d{1,2}) -(?P<year>\d{2})|(?P<day2>\d{1,2})/(?P<month2>\d{1,2})|(?P<year3>\d{4})-(?P<month3>\d{2})-(?P<day3>\d{2})')

def get_dates(datestring):
    """Try to extract all dates from certain strings.

    Arguments:
    - `datestring`: A string containing dates.
    """

    found_dates = []
    matches = expr.finditer(datestring)
    for match in matches:
        if match.group('day1'):
            found_dates.append({'day': match.group('day1'),
                                 'month': match.group('month1') })
        elif match.group('day2'):
            found_dates.append({'day': match.group('day2'),
                                'month': match.group('month2')})
        elif match.group('day3'):
            found_dates.append({'day': match.group('day3'),
                                'month': match.group('month3'),
                                'year': match.group('year3')})
        else:
            raise Exception("wtf?")
    return found_dates

if __name__ == '__main__':
    dates = get_dates('1/2 -13, 5/3 & 2012-11-22')
    for date in dates:
        print date 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T21:08:39.800

您可以`negative look ahead`在您的第二个正则表达式中使用仅匹配那些`dates`没有跟随的那些`-year`： -

```
dformats = (
    r'(?P<day>\d{1,2})/(?P<month>\d{1,2}) -(?P<year>\d{2})',
    r'(?P<day>\d{1,2})/(?P<month>\d{1,2})(?!\s+-(?P<year>\d{2}))',
    r'(?P<year>\d{4})-(?P<month>\d{2})-(?P<day>\d{2})'
) 
```

因此，在正则`first`表达式中匹配的日期将不会在第二个中匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T21:10:08.223

您可以`sub`代替`find`：

```
def find_dates(s):

    dformats = (
        '(?P<day>\d{1,2})/(?P<month>\d{1,2}) -(?P<year>\d{2})',
        '(?P<day>\d{1,2})/(?P<month>\d{1,2})',
        '(?P<year>\d{4})-(?P<month>\d{2})-(?P<day>\d{2})',
    )    

    dates = []
    for f in dformats:
        s = re.sub(f, lambda m: dates.append(m.groupdict()), s)
    return dates 
```

# unity3d - Unity LoadImageIntoTexture() 在 WebPlayer 中不起作用

> ID：13519895
> 
> 赞同：1
> 
> 时间：2012-11-22T20:59:02.933
> 
> 标签：unity3d

我正在尝试使用 www.LoadImageIntoTexture(...) 在我的游戏中加载来自不同网站的图像，这适用于桌面和我的 iPad。虽然它不在网络播放器中。我收到以下错误：

您正在尝试从下载时出现以下错误的 www 流加载数据。由于未找到 crossdomain.xml 策略文件而被拒绝 UnityEngine.WWW:LoadImageIntoTexture(Texture2D)

这很清楚地解释了这个问题，尽管有一件奇怪的事情。在“ [Webplayer 的安全沙箱”中](http://docs.unity3d.com/Documentation/Manual/SecuritySandbox.html)的 Unity 文档中，有一个例外部分说：

您可以从没有 crossdomain.xml 文件的服务器下载图像。但是，您唯一可以对这些图像执行的操作是将它们用作场景中的纹理。不允许对它们使用 GetPixel()。您也不再被允许从屏幕上回读。两次尝试都将导致抛出 SecurityException。这里的理由是，只要内容开发人员无法访问它，就可以下载图像。因此，您可以将其显示给用户，但不能将图像的字节发送回其他服务器。

所以这说它是允许的......我做错了什么？或者这是一个错误？：秒

我要加载的链接是：[http](http://deckbox.org/mtg/Ponder/tooltip) ://deckbox.org/mtg/Ponder/tooltip （注意：如果你去这个链接，你会看到一堆文字，虽然它是一张图片，因为它确实可以在我的游戏的桌面版本中使用。）我也尝试了这个链接：[http](http://static.ddmcdn.com/gif/how-to-solve-cat-behavior-problems-2.jpg) ://static.ddmcdn.com/gif/how-to-solve-cat-behavior-problems-2.jpg这个确实有效。所以有什么问题的提示。最后，我还尝试了这个链接：[http](http://gatherer.wizards.com/Handlers/Image.ashx?name=Ponder&type=card) : //gatherer.wizards.com/Handlers/Image.ashx?name=Ponder&type=card 在浏览器中打开时会给出正确的图像，但不会加载到网络播放器中。 ..

所以，我对出了什么问题有一个模糊的想法，尽管不知道如何解决它。希望这里有人可以提供帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:38:55.197

~~当从服务器请求它时，您没有在工具提示图像上设置 mime 类型。这就是为什么它在浏览器中加载时显示为文本而不是图像的原因。Unity 无法判断它是图像，并认为您正在尝试从没有 crossdomain.xml 的站点下载二进制数据。~~

~~我认为~~如果您将该图像重命名为 tooltip.jpeg~~或在 http 标头中添加“image/jpeg”mime 类型~~它会起作用的。

更新：我终于开始做更多的测试，Unity 并不关心 mime 类型，*它只*关心文件扩展名。如果您没有跨域策略，它只会加载文件名以“.png”、“.jpg”或“.jpeg”结尾的图像，否则会被拒绝。

另一个说明 Unity 中的 WWW 类如何被破坏的例子是。

# c++ - c++中的表达式参数有什么用？

> ID：13519898
> 
> 赞同：2
> 
> 时间：2012-11-22T20:59:22.360
> 
> 标签：c++

我昨天阅读了 C++ 中的表达式参数：http: [//www.learncpp.com/cpp-tutorial/144-expression-parameters-and-template-specialization/](http://www.learncpp.com/cpp-tutorial/144-expression-parameters-and-template-specialization/)

我知道你为什么使用模板，但是当你可以使用构造函数来完成同样的事情时，为什么还要使用表达式参数呢？哦，还有一件事，模板是否由预编译器处理？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:08:49.910

简单示例 - C++11 数组（和 boost 之前类似）。 [http://en.cppreference.com/w/cpp/container/array](http://en.cppreference.com/w/cpp/container/array)

静态数组是不能使用变量但可以使用模板参数的一种情况。

在其他情况下，使用常量（模板参数）也可能更有效。

预处理器不接触模板，它只执行`#whatever`行、扩展宏、删除注释等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:06:22.780

当您使用模板类时，它将在编译时扩展，然后像普通类一样编译。在构造函数中使用表达式参数而不是参数的一个原因是表达式成为类型的一部分。因此，该类型的所有对象都将保证使用相同的值。

在您链接到的示例中：

```
// declare an integer buffer with room for 12 chars
Buffer<int, 12> cIntBuffer; 
```

cIntBuffer 是 Buffer 类的一个实例。保证有一个大小为 12 的 int 缓冲区。如果你有：

```
Buffer<int> cIntBuffer1(12); 
Buffer<int> cIntBuffer2(13); 
```

cIntBuffer1 和 cIntBuffer2 是相同类型的对象，但它们的缓冲区大小不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T21:19:09.363

您问题的第二部分首先：不，模板已编译；未经预处理。

关于第一部分，它们非常有用。在模板中具有强大功能的表达式参数的最佳（也是最简单）示例是静态数组的大小限制：

```
#include <iostream>

using namespace std;

template<typename T, size_t N>
void DoSomething(const T (&ar)[N])
{
    for (size_t i=0; i<N; ++i)
        cout << ar[i] << endl;
}

int main(int argc, char *argv[])
{
    int int_ar[] = { 1,2,3,4,5 };
    DoSomething(int_ar);

    char char_ar[] = {'a', 'b', 'c'};
    DoSomething(char_ar);

    std::string str_ar[] = {"This", "is", "a", "string", "array."};
    DoSomething(str_ar);

    return EXIT_SUCCESS;
} 
```

**输出**

```
1
2
3
4
5
a
b
c
This
is
a
string
array. 
```

如果没有表达式参数，这些事情是不可能的。它们非常有用，特别是对于需要缩小尺寸的东西。

# iphone - 如何使带有 SLComposeViewController 的 presentViewController 更快？

> ID：13519904
> 
> 赞同：4
> 
> 时间：2012-11-22T20:59:41.013
> 
> 标签：iphone, objective-c, twitter, slcomposeviewcontroller

我正在我的应用程序上打开 Twitter 撰写视图，但屏幕显示时间过长！

当用户点击 twitter 按钮时，我开始使用以下代码：

```
 if([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter])
{

    SLComposeViewController *tweet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];

    [tweet setInitialText:@"initial text "];

    [self presentViewController:tweet animated:YES completion:^
     {

     }];
} 
```

但显示屏幕需要 5 到 8 秒！对我来说，它太长了，我看到了即时可用的应用程序。这不是我的应用程序的问题，因为我创建了一个仅具有此功能的新项目，并且需要相同的功能。

所以我认为延迟是在屏幕实例化的那一刻，所以我决定在我的标题上声明我的推文屏幕并将这部分移动到 viewDidAppear：

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter])
{

tweet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];

[tweet setInitialText:@"initial text "]; 
```

和按钮方法是这样的：

```
if(tweet)
[self presentViewController:tweet animated:YES completion:^
 {

 }]; 
```

但它并没有变得更快。我正在使用 iPhone 4，并且我有一些应用程序可以非常快速地创建 twitter 撰写屏幕，有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T09:22:32.157

这个问题也困扰了我一整天！最后我得到了一些技巧来让 SLComposeViewController 看起来更快。似乎当我第一次加载 SLComposeVC 时，SLComposer 会在主线程中占用大量资源，但在那之后，它会毫无延迟地显得完全正常......所以我想也许我们需要加载 SLCompose在我们的视图控制器中查看（只需加载视图）和 viola.. SLComposerView 将直接呈现到视图中......

只需将此代码添加到您的 appdelegate

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{  ....

//loading the view...make twitter share dialog appear with no dellay
    if(NSClassFromString(@"SLComposeViewController") != nil){
        SLComposeViewController *composeViewController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
        [composeViewController view];
    }
   ...
} 
```

*   对不起，如果我的英语不完美，我不是本地人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-25T22:13:21.733

我有同样的问题——这让我发疯。我通过主队列上的 dispatch_async 修复了它

```
// Perform this on the main queue
__weak __typeof(self) weakSelf = self; 

dispatch_async(dispatch_get_main_queue(), ^{
    __strong __typeof(self) strongLocalSelf = weakSelf;

        SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
        [controller setInitialText:@"Share message"];
        [controller addURL:@"http://www.someURL.com"];
        [strongLocalSelf presentViewController:controller animated:NO completion:nil];

}); 
```

# ios - 解析shoutcast .pls 流以在iOS 中显示元数据

> ID：13519908
> 
> 赞同：4
> 
> 时间：2012-11-22T21:00:01.337
> 
> 标签：ios, metadata, shoutcast

我正在寻找一些解决方案来从我的流[http://vibesradio.org:8002/](http://vibesradio.org:8002/)中获取元数据信息，以显示在我正在开发的应用程序的 UILabel 中。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T20:24:41.187

这是答案，堆栈中有一些部分答案，所以我提交了完整的解决方案：

首先在 viewDidLoad 我们需要添加可观察的元数据对象：

```
 [playerItem addObserver:self forKeyPath:@"timedMetadata" options:NSKeyValueObservingOptionNew   context:NULL]; 
```

现在，我们只需要 UILabel 和一个函数来显示元数据，假设创建了 UIlabel nowPlaying，我们添加以下代码：

```
- (void) observeValueForKeyPath:(NSString*)keyPath ofObject:(id)object
                     change:(NSDictionary*)change context:(void*)context {

if ([keyPath isEqualToString:@"timedMetadata"])
{
    playerItem = object;

    for (AVMetadataItem* metadata in playerItem.timedMetadata)
    {
        NSLog(@"\nkey: %@\nkeySpace: %@\ncommonKey: %@\nvalue: %@", [metadata.key description], metadata.keySpace, metadata.commonKey, metadata.stringValue);
        NSString *edited = [metadata.stringValue stringByReplacingOccurrencesOfString:@"_" withString:@" "];
        self.nowPlaying.text = edited;
    }
  }
} 
```

就是这样，现在您应该显示您的流信息。

# debugging - 使用 webkit 调试 post 变量

> ID：13519909
> 
> 赞同：0
> 
> 时间：2012-11-22T21:00:02.537
> 
> 标签：debugging, post, webkit

Webkit 的 Web Inspector 非常好，但似乎没有一个好的方法来调试请求中的 POST application/x-www-form-urlencoded 变量。“查询参数”面板显示 GET 请求，但没有显示 POST。事实上，我可以看到请求确​​实是 POST 的唯一方法是请求标头具有 Content-Type 条目。

有没有办法*在 Webkit*中显示这些变量？例如调试插件、秘密隐藏首选项，或者只是能够检查正在发送的内容主体？

我知道这里可以使用诸如 Charles 之类的 HTTP 代理。如果我能提供帮助，我宁愿不使用其他工具。

# c# - 当列表类型未知时将 FieldInfo 值转换为列表

> ID：13519910
> 
> 赞同：2
> 
> 时间：2012-11-22T21:00:05.360
> 
> 标签：c#, list, reflection, system.reflection

我有以下内容：

```
 [Serializable()]
    public struct ModuleStruct {
        public string moduleId;
        public bool isActive;
        public bool hasFrenchVersion;
        public string titleEn;
        public string titleFr;
        public string descriptionEn;
        public string descriptionFr;
        public bool isLoaded;
        public List<SectionStruct> sections;
        public List<QuestionStruct> questions;
    } 
```

我创建了一个实例并填充它（内容与问题无关）。我有一个函数，它将实例化的对象作为一个参数，我们将其称为模块，并将该对象的类型作为另一个参数：`module.GetType()`.

然后，此函数将使用反射，并且：

```
 FieldInfo[] fields = StructType.GetFields();
    string fieldName = string.Empty; 
```

函数中的参数名称是`Struct`和`StructType`。

我遍历 中的字段名称`Struct`，提取不同字段的值 和 并对其进行处理。一切都很好，直到我到达：

```
 public List<SectionStruct> sections;
    public List<QuestionStruct> questions; 
```

该函数只知道`Struct`by的类型`StructType`。在VB中，代码很简单：

```
 Dim fieldValue = Nothing
    fieldValue = fields(8).GetValue(Struct) 
```

接着：

```
 fieldValue(0) 
```

获取列表部分中的第一个元素；但是，在 C# 中，相同的代码不起作用，因为`fieldValue`它是一个对象，而我不能`fieldValue[0]`对一个对象执行此操作。

那么，我的问题是，该函数只知道`Struct`by的类型`StructType`，如果可能的话，我如何在 C# 中复制 VB 行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T23:10:38.507

这里有一些（非常简单的）示例代码，这些代码非常清楚......我真的不想为你做所有事情，因为这可能是反思的一个很好的教训:)

```
private void DoSomethingWithFields<T>(T obj)
{
    // Go through all fields of the type.
    foreach (var field in typeof(T).GetFields())
    {
        var fieldValue = field.GetValue(obj);

        // You would probably need to do a null check
        // somewhere to avoid a NullReferenceException.

        // Check if this is a list/array
        if (typeof(IList).IsAssignableFrom(field.FieldType))
        {
            // By now, we know that this is assignable from IList, so we can safely cast it.
            foreach (var item in fieldValue as IList)
            {
                // Do you want to know the item type?
                var itemType = item.GetType();

                // Do what you want with the items.
            }
        }
        else
        {
            // This is not a list, do something with value
        }
    }
} 
```

# java - 重载 Java 函数并确定执行哪一个

> ID：13519914
> 
> 赞同：2
> 
> 时间：2012-11-22T21:00:16.060
> 
> 标签：java, function, overloading

关于重载函数，我还没有完全理解 Java 如何确定在运行时执行哪个函数。假设我们有一个像这样的简单程序：

```
public class Test {

    public static int numberTest(short x, int y) {
        // ...
    }
    public static int numberTest(short x, short y) {
        // ...
    }

    public static void main(String[] args) {
        short number = (short) 5;
        System.out.println(numberTest(number, 3));
    }

} 
```

我已经对此进行了测试——Java 使用了第一个 numberTest() 函数。为什么？为什么不使用第二个，或者更确切地说，为什么不显示编译器错误？

第一个参数是`short`，好吧。但第二个区分这两个功能。由于函数调用使用 just `3`，它可以是两者，不是吗？并且不需要类型转换。或者，每当我使用“3”作为时，Java 是否会应用类型转换`int`？它总是以`byte`然后转换为`short`然后`int`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T21:02:50.360

> 第一个参数很短，好吧。但第二个区分这两个功能。由于函数调用仅使用 3，它可能是两者，不是吗？

不，Java 中的整数文字总是要么`int`要么`long`。作为一个简单的例子，这段代码：

```
static void foo(short x) {
}

...
foo(3); 
```

给出这样的错误：

```
Test.java:3: error: method foo in class Test cannot be applied to given types;
        foo(3);
        ^
  required: short
  found: int
  reason: actual argument int cannot be converted to short by method invocation
  conversion
1 error 
```

从[JLS 的第 3.10.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1)：

> 如果整数文字以 ASCII 字母 L 或 l (ell) 为后缀，则它是 long 类型；否则它是 int 类型（§4.2.1）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T21:02:55.990

除非另有说明，否则该文字`3`将自动被视为一个。`int`您可以在此处找到更多信息：http: [//docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

# vmware - XenServer 替代 VMWare VSA？

> ID：13519915
> 
> 赞同：0
> 
> 时间：2012-11-22T21:00:25.950
> 
> 标签：vmware, high-availability, xen, san

我一直在研究可用于 VMware 平台的虚拟存储设备，将本地存储转换为复制存储。比如VMWare VSA。这些仍然需要扩展预算，全部包括在内

XenServer 的任何选项，允许在不使用外部 SAN 的情况下进行实时迁移、容错和高可用性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T18:05:27.660

您找到的任何解决方案都会使您的环境复杂化并使您的主机不受支持。您应该做的是使用共享存储，期间。

drbd 不是一个很好的解决方案，因为当您需要多个节点时它会中断。有一些理论上的方法可以做到这一点，但问题变得越多，您对 XenServer 系统本身的更改越多，您打开它的可能性就越大。

要更直接地回答您的问题，您可以使用 GFS/lustre 等共享文件系统，但您仍将花费大量时间和精力来有效地使您的系统不受支持并以不稳定的方式设置。购买 NAS/SAN :)

# javascript - 嵌入式 PDF - 打开页码而不重新加载文档

> ID：13519921
> 
> 赞同：6
> 
> 时间：2012-11-22T21:00:55.507
> 
> 标签：javascript, pdf

我使用 html 对象标签嵌入了一个 PDF 文档，并将其显示在网页的一个部分。另一部分包含链接的树视图（看起来像 PDF 的书签）。单击树视图中的链接会重新加载 PDF 文档并在正确的页面上打开它（页码包含在链接中）。有没有办法在不重新加载文档的情况下做到这一点？

换个说法，我正在寻找一个可以模仿书签行为的 JavaScript 函数——在不重新加载文档的情况下跳转到页码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T19:27:48.070

我认为 JavaScript 中没有本地方法可以提供该功能。你将需要一个图书馆。

最简单的方法是使用文档齐全的库在 JavaScript 中处理 pdf 文档。**[从这个意义上说， PDF.js](https://github.com/mozilla/pdf.js)**是一个非常好的项目，尽管它会呈现 pdf 本身，而不是使用 Acrobat Reader，这可能会给复杂的文档带来问题。

* * *

另一种使用**Adob​​e Acrobat**阅读器的解决方案是使用他们自己的[JavaScript API](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/js_api_reference.pdf)，在该链接之后，您将看到完整的 API 参考。引用该文件（第 254 页）：

> **页码**
> 
> 获取或设置文档的当前页面。将 pageNum 设置为特定页面时，请记住这些值是从 0 开始的。[...]

因此，如果您想转到文档的特定页面，您可以使用

```
this.pageNum = 6; 
```

这*应该*是应用程序上下文。在这里，您可以找到包含更多文档和示例的[在线 API 参考。](http://livedocs.adobe.com/acrobat_sdk/10/Acrobat10_HTMLHelp/wwhelp/wwhimpl/js/html/wwhelp.htm?href=JavaScript_SectionPage.70.1.html#1515775&accessible=true)

使用上述 JS API 的一些指南：

*   [http://blogs.adobe.com/pdfdevjunkie/web_designers_guide](http://blogs.adobe.com/pdfdevjunkie/web_designers_guide)
*   [http://cookbooks.adobe.com/post_Passing_information_actions_from_the_browser_to_an-18885.html](http://cookbooks.adobe.com/post_Passing_information_actions_from_the_browser_to_an-18885.html)
*   [http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_open_parameters_v9.pdf#page=5](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_open_parameters_v9.pdf#page=5)

# c# - 如何“翻转”数组？

> ID：13519923
> 
> 赞同：0
> 
> 时间：2012-11-22T21:00:59.703
> 
> 标签：c#, arrays, xna, flip

我有以下代码：

```
BlockTypes[,] BackupQuad = EditModeBlocks.ListOfBlocks; //Create Backup

for (int x = 0; x < 16; x++)
{
    for (int y = 0; y < 16; y++)
    {
        //Translate each point to the opposite side
        EditModeBlocks.ListOfBlocks[15 - x, y] = BackupQuad[x, y]; 
    }
} 
```

首先，它组成一个备份（`BackupQuad`），然后循环遍历备份阵列中的每个“块”。然后它从备份阵列中读取块并将其重写为原始阵列为 15 - X。（我也尝试了 16 - x，但没有工作）。它在大多数情况下都有效，但它会将一半复制到另一侧，删除那里的所有内容。 ![在此处输入图像描述](../Images/c65ac2239ef0872d99e92a458310f183.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T21:10:55.927

> 首先它组成一个备份（BackupQuad）

不，真的没有。*这只是引用*的副本。如果要获取实际*对象*的副本，则必须明确地这样做。例如：

```
BlockTypes[,] BackupQuad = (BlockTypes[,]) EditModeBlocks.ListOfBlocks.Clone(); 
```

# json - 如何填充 sencha xtemplates 表单 json 对象，（MVC 方法）

> ID：13519924
> 
> 赞同：0
> 
> 时间：2012-11-22T21:01:03.627
> 
> 标签：json, sencha-touch

我是 sencha 的新手，我正在尝试填充一些模板，如下所示：

模型：

```
Ext.define("GS.model.Oferta", {
        extend : 'Ext.data.Model',
        config : {
            fields : [{
                        name : "type",
                        type : "string"
                    }, {
                        name : "logo",
                        type : "string"
                    }, {
                        name : "description",
                        type : "string"
                    }, {
                        name : "product",
                        type : "string"
                    }]
        }
    }); 
```

店铺：

```
Ext.define("GS.store.BoxStore", {
        extend : 'Ext.data.Store',

    config: {
        storeId: 'boxStore',
        model : 'GS.model.Oferta',
        proxy : {
            type : 'ajax',
            url : 'TestData.json',
                reader: {
                    type:'json',
                    rootProperty: 'dataArr'
                }
        },
        autoLoad : true
    }
    }); 
```

模板：

```
Ext.define("GS.view.Box", {
        extend : 'Ext.Panel',
        requires : ['Ext.form.FieldSet'],
        layout : {
            type : 'absolute'
        },

        config : {
            tpl : Ext.XTemplate.from('tp1'),
            data:{}
        }

    }); 
```

控制器：

```
Ext.define('GS.controller.Main', {
 extend: 'Ext.app.Controller',
store: 'boxStore',

config : {
    stores: ['BoxStore'],
    models: ['Oferta'],

    refs : {????
    ????????    },
    control : {
??????????
        }
    }
},

    getData: function(list, index, element, record){
    this.getBox().push({
        xtype: 'panel',
        data :[record.get('type'), record.get('logo'), record.get('logo'),     record.get('product')],
        scrollable: true,
        styleHtmlContent: true
    });
},
//called when the Application is launched, remove if not needed
launch: function(app) {

}
}); 
```

HTML：

```
 <textarea id='tp1' class="tp1">
           <div class="product_small">
             <div class="type" id"type">

             </div>
             <div class="logo"><img src="resources/images/garbarino_logo.png" />
             </div>
             <div class="small_description">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
             </div>
             <div class="product">
                 <span style="color:rgb(0,193,209); font:bold 35px/40px Tahoma,Verdana;">1.700</span><span style="color:rgb(0,193,209); font:bold 13px/20px Tahoma,Verdana;"> puntos</span>
             </div>
            </div>
        </textarea> 
```

我如何设法填充模板？我应该尝试在控制器中创建一个盒子并将其设置在那里吗？

非常感谢伊格纳西奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:13:07.387

如果您想直接更新 tpl 的数据，请使用 setData 方法，否则您可能想尝试使用 Ext.DataView 而不是 Ext.Panel 并将数据视图直接链接到商店。很难说出究竟需要什么 - 您的示例代码显示您将一个新面板推送到 getBox（可能是具有模板的组件），但您正试图在没有模板的新面板上设置数据。

# xpages - 1 背景颜色

> ID：13519927
> 
> 赞同：0
> 
> 时间：2012-11-22T21:01:25.160
> 
> 标签：xpages

我正在尝试制作具有一种背景颜色的网页。例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
    xmlns:xc="http://www.ibm.com/xsp/custom"
    style="background-color:rgb(0,85,165)" disableTheme="true">
</xp:view> 
```

结果是一个页面顶部的 oneui v2 颜色从浅蓝色变为白色，然后是指定为背景颜色的颜色。我怎样才能得到我想要的结果？顺便说一句，当 xpage 不应用该颜色时，为什么他们可以选择背景颜色？

**编辑：** 在chrome中我发现了这个：servername/xsp/.ibmxspres/.mini/css/@Da&@Ib&2Tdcore.css&2TdcoreLTR.css&2TddefaultTheme.css&2TddefaultThemeLTR.css&2Tdxsp.css&2TdxspLTR.css&2TdxspSF.css.css

身体{颜色：RGB（34、34、34）；

背景图像：url（/domjava/xsp/theme/oneui/images/background.png）；}

当我取消标记此背景图像时，一切都会按应有的方式显示。我仍然不知道如何让它工作。

顺便说一句，我的“网页”的其余部分位于一个白色背景的面板中，我在其中使用 oneui。这个想法是在网页周围设置一个蓝色边框。该页面具有固定大小。屏幕的其余部分只是蓝色。（蓝色的数量取决于屏幕分辨率）也许有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:55:14.023

OneUI 布局由许多部分组成，每个部分都在一组相当复杂的 CSS 中定义了自己的格式。因此，您必须确定正确的选择器集和您自己的 CSS 来为每个元素定义背景颜色。第一步应该是使用 Chrome/IE 中的开发工具或 Firefox 中的 Firebug 来识别格式不正确的组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T02:19:04.317

您至少需要为以下元素设置背景颜色（可能更多）

.lotusContent .lotusMainContent .lotusColLeft .lotusColRight .lotusMain .lotusTitleBar .placeBar .lotusBanner

我建议两件事：

1）如果您想使用该背景 - 不要使用 OneUI。它在创建时考虑了主题，并且对主题的实现方式非常挑剔 - 弄乱 OneUI 主题非常困难。

2) 如果您要在页面上放置文本，请不要使用该颜色作为背景 - 任何文本对比色都将难以阅读并导致用户体验困难。查看此链接以获得使用颜色来提高可读性的一些帮助 - [http://www.1stwebdesigner.com/design/improve-website-readability-through-colors/](http://www.1stwebdesigner.com/design/improve-website-readability-through-colors/)

# google-app-engine - Appengine 中的丹麦语字符，数据存储区中的错误格式

> ID：13519928
> 
> 赞同：0
> 
> 时间：2012-11-22T21:01:50.570
> 
> 标签：google-app-engine, django-forms

我在数据存储中保存文本字符串时遇到问题，问题是特殊字符而不是丹麦字符“å”它保存了“=E5”，“ø”为“=F8”等等。我不明白的是，在我的本地开发服务器上它正确保存了字符串。

我能做什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:07:08.753

表单提交中的字符编码可能不正确（即在浏览器和 web 应用程序之间，而不是在 web 应用程序和数据存储之间）。尝试查看表单在发送时是否正确编码（检查请求标头，查看标头是否为`content-encoding`UTF-8 或其他）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:36:25.447

添加
appengine-web.xml

String str = "一些特殊字符字符串"; 使用以下内容持久化并从数据存储中检索 new String(str.getBytes("UTF8"), "UTF8")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:50:14.323

表单是否也在上传文件？[http://code.google.com/p/googleappengine/issues/detail?id=2749](http://code.google.com/p/googleappengine/issues/detail?id=2749)报告评论 21 中的解决方法已为我修复，我尚未尝试建议的较新版本的 webob最近的评论。

# linux - 使用 xinetd 接收传入连接时执行脚本

> ID：13519933
> 
> 赞同：3
> 
> 时间：2012-11-22T21:02:31.390
> 
> 标签：linux, shell, tcp, netcat, xinetd

我希望 xinetd 在某个端口收到连接时执行 shell 脚本。为此，请遵循本教程：[在此处输入链接描述][1]

不幸的是，整个事情都不起作用，因为我希望这就是我要向您展示我的配置的原因。

xinetd 调用的脚本位于/usr/local/bin。它可以毫无问题地执行：

```
#!/bin/bash
echo "connection received" 
```

/etc/xinetd.d/testservice 有这个内容：

```
service testservice
{
        disable         = no
        socket_type     = stream
        protocol        = tcp
        port              = 5900
        log_on_success += USERID 
        log_on_failure += USERID
        server          = /usr/local/bin/testservice
        user            = root
        instances       = UNLIMITED
        wait            = no
        log_type        = SYSLOG daemon debug
} 
```

在 /etc/services 我添加了这一行：

```
testservice        5900/tcp 
```

然后我重新启动了xinetd`service xinetd restart`

最后，我尝试连接到客户端：

```
nc host1 5900 
```

有人可以告诉我这里出了什么问题吗？

以下是 /var/log/syslog.1 中的一些行：

```
Nov 22 10:07:33 ubuntu1 xinetd[886]: Reading included configuration file: /etc/xinetd.d/chargen [file=/etc/xinetd.conf] [line=17]
Nov 22 10:07:33 ubuntu1 xinetd[886]: Reading included configuration file: /etc/xinetd.d/daytime [file=/etc/xinetd.d/daytime] [line=28]
Nov 22 10:07:33 ubuntu1 xinetd[886]: Reading included configuration file: /etc/xinetd.d/discard [file=/etc/xinetd.d/discard] [line=26]
Nov 22 10:07:33 ubuntu1 xinetd[886]: Reading included configuration file: /etc/xinetd.d/echo [file=/etc/xinetd.d/echo] [line=25]
Nov 22 10:07:33 ubuntu1 xinetd[886]: Reading included configuration file: /etc/xinetd.d/exec [file=/etc/xinetd.d/exec] [line=26]
Nov 22 10:07:34 ubuntu1 xinetd[886]: Reading included configuration file: /etc/xinetd.d/login [file=/etc/xinetd.d/login] [line=8]
Nov 22 10:07:34 ubuntu1 xinetd[886]: Reading included configuration file: /etc/xinetd.d/rexec [file=/etc/xinetd.d/rexec] [line=13]
Nov 22 10:07:34 ubuntu1 xinetd[886]: Reading included configuration file: /etc/xinetd.d/rexecd [file=/etc/xinetd.d/rexecd] [line=0]
Nov 22 10:07:34 ubuntu1 xinetd[886]: Reading included configuration file: /etc/xinetd.d/rlogin [file=/etc/xinetd.d/rlogin] [line=10]
Nov 22 10:07:34 ubuntu1 acpid: 33 rules loaded
Nov 22 10:07:34 ubuntu1 acpid: waiting for events: event logging is off
Nov 22 10:07:34 ubuntu1 xinetd[886]: Reading included configuration file: /etc/xinetd.d/rsh [file=/etc/xinetd.d/rsh] [line=10]
Nov 22 10:07:34 ubuntu1 xinetd[886]: Reading included configuration file: /etc/xinetd.d/shell [file=/etc/xinetd.d/shell] [line=11]
Nov 22 10:07:34 ubuntu1 xinetd[886]: Reading included configuration file: /etc/xinetd.d/time [file=/etc/xinetd.d/time] [line=11]
Nov 22 10:07:34 ubuntu1 xinetd[886]: removing chargen
Nov 22 10:07:34 ubuntu1 xinetd[886]: removing chargen
Nov 22 10:07:34 ubuntu1 xinetd[886]: removing daytime
Nov 22 10:07:34 ubuntu1 xinetd[886]: removing daytime
Nov 22 10:07:34 ubuntu1 xinetd[886]: removing discard
Nov 22 10:07:34 ubuntu1 xinetd[886]: removing discard
Nov 22 10:07:34 ubuntu1 xinetd[886]: removing echo
Nov 22 10:07:34 ubuntu1 xinetd[886]: removing echo
Nov 22 10:07:34 ubuntu1 xinetd[886]: removing time
Nov 22 10:07:34 ubuntu1 xinetd[886]: removing time
Nov 22 10:07:34 ubuntu1 xinetd[886]: bind failed (Address already in use (errno = 98)). service = exec
Nov 22 10:07:34 ubuntu1 xinetd[886]: Service exec failed to start and is deactivated.
Nov 22 10:07:34 ubuntu1 xinetd[886]: bind failed (Address already in use (errno = 98)). service = login
Nov 22 10:07:34 ubuntu1 xinetd[886]: Service login failed to start and is deactivated.
Nov 22 10:07:34 ubuntu1 xinetd[886]: bind failed (Address already in use (errno = 98)). service = shell
Nov 22 10:07:34 ubuntu1 xinetd[886]: Service shell failed to start and is deactivated.
Nov 22 10:07:34 ubuntu1 xinetd[886]: xinetd Version 2.3.14 started with libwrap loadavg options compiled in.
Nov 22 10:07:34 ubuntu1 xinetd[886]: Started working: 3 available services 
```

其他服务似乎在运行：

网络统计-an | egrep 'Proto|LISTEN'

```
Proto Recv-Q Send-Q Local Address           Foreign Address         State      
tcp        0      0 127.0.0.1:631           0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:512             0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:513             0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:514             0.0.0.0:*               LISTEN     
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN     
tcp6       0      0 ::1:631                 :::*                    LISTEN     
tcp6       0      0 :::22                   :::*                    LISTEN     
Proto RefCnt Flags       Type       State         I-Node   Path
unix  2      [ ACC ]     STREAM     LISTENING     10248    /run/user/user1/keyring-0bvpKQ/control
unix  2      [ ACC ]     STREAM     LISTENING     10250    /run/user/user1/keyring-0bvpKQ/ssh
unix  2      [ ACC ]     STREAM     LISTENING     8087     /tmp/.X11-unix/X0
unix  2      [ ACC ]     STREAM     LISTENING     10038    @/tmp/dbus-3MCEY0sgqz
unix  2      [ ACC ]     STREAM     LISTENING     689      @/com/ubuntu/upstart
unix  2      [ ACC ]     STREAM     LISTENING     7758     /var/run/cups/cups.sock
unix  2      [ ACC ]     STREAM     LISTENING     986      @/org/bluez/audio
unix  2      [ ACC ]     STREAM     LISTENING     10192    /tmp/.pcmanfm-socket--0-user1
unix  2      [ ACC ]     STREAM     LISTENING     8086     @/tmp/.X11-unix/X0
unix  2      [ ACC ]     SEQPACKET  LISTENING     882      /run/udev/control
unix  2      [ ACC ]     STREAM     LISTENING     913      /var/run/dbus/system_bus_socket
unix  2      [ ACC ]     STREAM     LISTENING     10028    /tmp/ssh-1PFvKafVKThh/agent.1507
unix  2      [ ACC ]     STREAM     LISTENING     34594    /tmp/.lxterminal-socket:0-user1
unix  2      [ ACC ]     STREAM     LISTENING     968      /var/run/avahi-daemon/socket
unix  2      [ ACC ]     STREAM     LISTENING     982      /var/run/sdp
unix  2      [ ACC ]     STREAM     LISTENING     10629    /tmp/.menu-cached-:0-user1
unix  2      [ ACC ]     STREAM     LISTENING     8433     /var/run/acpid.socket 
```

也许这也有帮助：

```
service xinetd restart
stop: Rejected send message, 1 matched rules; type="method_call", sender=":1.73" (uid=1000 pid=5311 comm="stop xinetd ") interface="com.ubuntu.Upstart0_6.Job" member="Stop" error name="(unset)" requested_reply="0" destination="com.ubuntu.Upstart" (uid=0 pid=1 comm="/sbin/init")
start: Rejected send message, 1 matched rules; type="method_call", sender=":1.74" (uid=1000 pid=5308 comm="start xinetd ") interface="com.ubuntu.Upstart0_6.Job" member="Start" error name="(unset)" requested_reply="0" destination="com.ubuntu.Upstart" (uid=0 pid=1 comm="/sbin/init") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-03T06:48:20.913

```
service testservice
{
    port            = 5900
    socket_type     = stream
    protocol        = tcp
    wait            = no
    user            = root
    server          = /usr/bin/testscript.sh       
    server_args     = test
} 
```

你是对的，我无法让你的工作。以上似乎。

确保 testscript.sh 设置为 +x 并在顶部包含 #!/bin/sh （在您的示例中确实如此）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T21:16:18.627

它对我在本地主机上尝试非常有效。你能做一个

```
tail -f /var/log/syslog | grep xinetd 
```

在重新启动 xinetd 服务时？还可以尝试在拥有 xinetd 的同一主机上运行 nc，看看它是否在 localhost 上工作。

# jquery - 使用生产服务器上的 jQuery tablesorter 插件对日期列进行排序不起作用

> ID：13519934
> 
> 赞同：0
> 
> 时间：2012-11-22T21:02:37.717
> 
> 标签：jquery, jquery-plugins, tablesorter, date-format

我在使用 ASP.NET 生成的表上使用[tablesorter 插件。](http://tablesorter.com/docs/)我的问题是有一列带有一些日期（格式= YYYY-MM-DD），并且分拣机只在我的本地机器上工作。在服务器上发布时，它不会。我打开调试模式，发现在本地机器上，自动检测到的列的类型是`isoDate`，而在生产机器上，它是`shortDate`.

**重要提示：**当您查看日期时，它看起来完全一样。例如：2010-11-15。没有区别。但我很确定机器本身的本地设置非常不同，因此必须解释为什么一个被认为是 isoDate 而另一个被认为是 shortDate。

我还验证了该插件包含这两种格式的分类器。我有最新版本，似乎没有人有这个错误。

我究竟做错了什么？

我已经尝试过强制使用 isoParser ：

```
$("#ChangeLogTable1").tablesorter({headers: { 0: { sorter: 'isoDate'}}}); 
```

***编辑***

我已经为此更改了我的代码（见下文）以强制“作为字符串”进行排序，它可以工作，因为我的日期格式给了我这种可能性，但如果格式为 dd-mm-yyyy，它将不起作用。所以我的问题仍然存在，但这是一种解决方法。

```
$(this).tablesorter({ headers: { 0: { sorter: 'text'} }}); 
```

***编辑 2***

这里是一些表格html，我只是把一些敏感数据换成了XXXX

```
<div style="width: 1300px">

        <table id="ChangeLogTable1" class="table tablesorter table-bordered"> 
        <thead>
            <tr>
            <th>Date de correction</th>
            <th>Correcteur</th>
            <th>BugID</th>
            <th>Catégorie</th>
            <th>Module</th>
            <th>Description de la correction</th>
            <th>Impact</th>
            <th>Rapporté par</th>
            <th>Demandé par</th>
            </tr>
        </thead>
        <tbody>

            <tr>
                <td width="125px"> 2012-10-10</a></td>
                <td width="100px"> XXXX</td>
                <td width="75px"> XXXX</td>
                <td width="100px"> XXXX </td>
                <td width="100px"> XXXX </td>
                <td width="300px"> XXXX </td>
                <td width="300px"> </td>
                <td width="100px"> XXXX </td>
                <td width="100px"> </td>
            </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:21:30.547

我要求 HTML 因为`isoDate`解析器只会在数据采用这种格式时自行设置`####/##/##`：

```
/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s); 
```

`shortDate`解析器只会在数据看起来像这样`##/##/####`或`##/##/##`：

```
/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s); // from tablesorter v2.0.5 
```

所以要么解析器代码被改变，要么 html 格式被错误地解释；但这并不能解释为什么选项中`isoDate`的设置`headers`不起作用。

第一行日期可能无意中具有与其他行不同的格式或某些内联 HTML（即，数字包含在样式跨度中），从而使检测在每列中使用哪个解析器的代码误解了数据。所以这就是为什么我问 HTML 是什么样子的。

我知道您共享了初始化代码，但我想我还应该询问是否还有其他未显示的配置选项正在使用，因为修改`textExtraction`函数也可能改变数据的处理方式。

# javascript - Facebook Feed 对话框弹出窗口在页面右侧打开

> ID：13519942
> 
> 赞同：0
> 
> 时间：2012-11-22T21:03:16.120
> 
> 标签：javascript, facebook

我正在使用我网站上的 Facebook 提要对话框来分享用户个人资料上的一些内容。这工作正常，但对话框弹出窗口一直在网页的右侧打开。是否可以将此弹出窗口定位到屏幕中心？

谢谢！

# java - 我如何编写一个总结起来的程序，从 1-9、10-19 等 txt 文件出现多少次？

> ID：13519944
> 
> 赞同：1
> 
> 时间：2012-11-22T21:03:30.777
> 
> 标签：java

我有一个明天必须完成的大学 JAVA 作业，我不知道如何解决这个问题。这是作业：

我有一个 .txt 包含：

```
2000
I
Achraf Belmokadem                    2355 22
Richard van Heuven van Staereling    1355 95
Shan Shan                            2315 100
=W
Wartie Zeggen                        4311 19
Melissa de Wit                       2041 99
Enes Goktas                          1195 74
-
2001
I
enz... 
```

该文件包含有关一个程序与不同学年的其他学生的其他程序的对比情况的信息。每个学年以“-”分隔。每一年都以一个数字开始，说明统计数据关注的年份。在此之后，该文件显示了该程序对不同专业的学生的表现如何。每项研究都由“=”分隔。接下来，声明每个单独的匹配项。首先，显示学生的姓名，后跟 TAB ('\t')。下一个数字显示程序必须考虑该玩家多长时间。最后一个数字是程序已征服的棋子百分比。（学生的节目玩游戏）

我的任务是打印程序以 0-9%、10-19% ... 90-100% 结束的频率。

这就是我来的多远..

```
void printNames(Scanner nameScanner) {
    nameScanner.useDelimiter("\t");

    String name = nameScanner.next();
    int thinkingTime = nameScanner.nextInt();
    int takenStones = nameScanner.nextInt(); 
```

我不知道如何使用扫描仪和定界符来总结这些数字并将它们分类为 1-9、10-19 ......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:58:52.870

如果逐行阅读您的文本然后解析这些行会更简单：

```
 Scanner sc = new Scanner(new File("test.txt"));
   while(sc.hasNextLine()) {
        String line = sc.nextLine();
        String[] ss = line.split("\t+");
        if (ss.length > 1) {
            String[] nn = ss[1].trim().split(" ");
            int n1 = Integer.valueOf(nn[0]);
            int n2 = Integer.valueOf(nn[1]);
            System.out.println(n1 + " " + n2);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:47:44.857

不要试图用这种蛮力的方法解决问题。您正在使用 OO 语言工作；利用它的特殊优势并设计一个类来保存特定年份的报告数据，将文件解析为该类的实例集合，并在该类上实现方法以返回您需要的信息。

# .net - 如何安全地阻止 .NET 线程

> ID：13519951
> 
> 赞同：0
> 
> 时间：2012-11-22T21:04:11.540
> 
> 标签：.net, multithreading, unit-testing, blocking

我有一个在指定时间后引发事件的类（它使用`System.Timers.Timer`内部）。在我的测试代码中，我创建了一个`Stopwatch`在创建类之前启动的，并设置事件的回调来停止它`Stopwatch`。然后，我*阻止了*直到`Not Stopwatch.IsRunning`。很简单，对吧？

我原来的阻止代码是

```
While Stopwatch.IsRunning
End While 
```

但我发现像这样的空while循环永远不会让我的回调触发！一旦我将调试代码放入while循环，它就起作用了！：

```
Dim lastSecond As Integer = 0
While sw.IsRunning
    If (Date.Now.Second > lastSecond) Then
         lastSecond = Date.Now.Second
         Console.WriteLine("blocking...")
    End If
End While 
```

是什么导致了这种奇怪的行为，更重要的是，我可以在阻止部分中放入允许事件触发的最简单代码是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T21:38:00.267

```
While Stopwatch.IsRunning
End While 
```

它是线程中的一大罪过，称为“热等待循环”。穿线有很多罪过，其中很多根本没有黄胶带，但这个特别阴险。主要问题是你让一个处理器核心一直烧红，在一个紧密的循环中测试 IsRunning 属性。

当您使用 x86 抖动时，这会引发一个非常讨厌的问题，它会在发布版本中生成代码，该代码会读取 cpu 寄存器中的 IsRunning 属性支持字段变量。并一遍又一遍地测试 cpu 寄存器值，而无需从字段中重新加载值。那是最终的死锁，它永远无法退出循环。您通过编辑代码或使用调试器将其从该模式中剔除。为避免这种情况，必须将属性的支持字段声明为*volatile*，但这不是您在 VB.NET 中可以做的事情，也不是正确的修复方法。

相反，您应该使用适当的同步对象，它可以让您向另一个线程发出信号通知发生了什么事。AutoResetEvent 是一个不错的选择，您可以像这样使用它：

```
Dim IsCompleted As New AutoResetEvent(False)

Private Sub WaitForTimer()
    IsCompleted.WaitOne()
    ''etc..
End Sub

Private Sub timer_Elapsed(ByVal sender As Object, ByVal e As EventArgs) Handles timer.Elapsed
    IsCompleted.Set()
    timer.Stop()
End Sub 
```

请注意 AutoResetEvent 也缺少黄色磁带。在另一个线程尚未调用 WaitOne() 时多次调用 Set() 会很糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:14:45.543

不要为此使用睡眠或旋转。研究信号：

```
WaitHandle.WaitOne 
```

> 阻塞当前线程，直到当前 WaitHandle 收到信号，使用 32 位有符号整数指定时间间隔并指定等待前是否退出同步域。

例子：

```
Imports System
Imports System.Threading
Imports System.Runtime.Remoting.Contexts

<Synchronization(true)>
Public Class SyncingClass
    Inherits ContextBoundObject

    Private waitHandle As EventWaitHandle

    Public Sub New()
         waitHandle = New EventWaitHandle(false, EventResetMode.ManualReset)
    End Sub 

    Public Sub Signal()
        Console.WriteLine("Thread[{0:d4}]: Signalling...", Thread.CurrentThread.GetHashCode())
        waitHandle.Set()
    End Sub 

    Public Sub DoWait(leaveContext As Boolean)
        Dim signalled As Boolean

        waitHandle.Reset()
        Console.WriteLine("Thread[{0:d4}]: Waiting...", Thread.CurrentThread.GetHashCode())
        signalled = waitHandle.WaitOne(3000, leaveContext)
        If signalled Then
            Console.WriteLine("Thread[{0:d4}]: Wait released!!!", Thread.CurrentThread.GetHashCode())
        Else
            Console.WriteLine("Thread[{0:d4}]: Wait timeout!!!", Thread.CurrentThread.GetHashCode())
        End If 
    End Sub 
End Class 

Public Class TestSyncDomainWait
    Public Shared Sub Main()
        Dim syncClass As New SyncingClass()

        Dim runWaiter As Thread

        Console.WriteLine(vbNewLine + "Wait and signal INSIDE synchronization domain:" + vbNewLine)
        runWaiter = New Thread(AddressOf RunWaitKeepContext)
        runWaiter.Start(syncClass)
        Thread.Sleep(1000)
        Console.WriteLine("Thread[{0:d4}]: Signal...", Thread.CurrentThread.GetHashCode())
        ' This call to Signal will block until the timeout in DoWait expires.
        syncClass.Signal()
        runWaiter.Join()

        Console.WriteLine(vbNewLine + "Wait and signal OUTSIDE synchronization domain:" + vbNewLine)
        runWaiter = New Thread(AddressOf RunWaitLeaveContext)
        runWaiter.Start(syncClass)
        Thread.Sleep(1000)
        Console.WriteLine("Thread[{0:d4}]: Signal...", Thread.CurrentThread.GetHashCode())
        ' This call to Signal is unblocked and will set the wait handle to 
        ' release the waiting thread.
        syncClass.Signal()
        runWaiter.Join()
    End Sub 

    Public Shared Sub RunWaitKeepContext(parm As Object)
        Dim syncClass As SyncingClass = CType(parm, SyncingClass)
        syncClass.DoWait(False)
    End Sub 

    Public Shared Sub RunWaitLeaveContext(parm As Object)
        Dim syncClass As SyncingClass = CType(parm, SyncingClass)
        syncClass.DoWait(True)
    End Sub 
End Class 

' The output for the example program will be similar to the following: 
' 
' Wait and signal INSIDE synchronization domain: 
' 
' Thread[0004]: Waiting... 
' Thread[0001]: Signal... 
' Thread[0004]: Wait timeout!!! 
' Thread[0001]: Signalling... 
' 
' Wait and signal OUTSIDE synchronization domain: 
' 
' Thread[0006]: Waiting... 
' Thread[0001]: Signal... 
' Thread[0001]: Signalling... 
' Thread[0006]: Wait released!!! 
```

在此处查看更多详细信息：http:
[//msdn.microsoft.com/en-us/library/kzy257t0.aspx](http://msdn.microsoft.com/en-us/library/kzy257t0.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:10:07.617

你可以尝试添加

```
Thread.Sleep(0) 
```

在你的紧密循环中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T21:10:42.070

如果确实需要主动等待，可以使用[SpinWait](http://msdn.microsoft.com/en-us/library/system.threading.spinwait.aspx)结构。

你的空循环不起作用的原因可能是因为编译期间的 JIT 看到这个循环是空的，并通过删除它来优化你的代码（只是猜测）。

# css - div 和 CSS：主要 div 中的 div 之间的间隔相同吗？即带红色背景的黄色 2x3 框之间的间隔相同

> ID：13519956
> 
> 赞同：0
> 
> 时间：2012-11-22T21:04:43.093
> 
> 标签：css, html

[我想要左边（蓝色页眉/页脚，绿色边，红色中间的东西，里面有 6 个盒子），我在这里](http://pastie.org/5420057)得到了右边的东西，即水平的东西。

![在此处输入图像描述](../Images/3033ab39aa6c845f8b5e8a6142e24f09.png)

如何将黄色框设为 3x2，红色背景和绿色/蓝色边？换句话说，我怎么能[在这里做这个布局？](https://i.stack.imgur.com/724c0.png)当我稍微改变布局时，我通常会发现黄色的东西之间的垫片不相等——如何用相等的垫片来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:18:48.843

这应该让你走上正轨

```
<html>
<style>
        .block{
                background-color:yellow;
                height:20px;
                width:300px;
                border:20px;
                display:inline;
                float: left;
                margin:10px;
        }
        #document{
                background-color:green;
        }
        #pitches{
                background-color:red;
                margin:auto;
                overflow:auto;
                width:700px;
                height:300px;
        }
        #header, div#footer{
                background-color:blue;
                height:200px;
                margin:auto;
                overflow:auto;
                width:900px;
        }
</style>

<body>
        <div id='document'>
                <div id='header'></div>
                <div id='pitches'>
                        <div class='block'></div>
                        <div class='block'></div>
                        <div class='block'></div>
                        <div class='block'></div>
                </div>
                <div id='footer'></div>
        </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:43:31.167

与 ul 一起使用

```
ul:background:red   
li:background:yellow 
```

会有用：

[http://jsfiddle.net/QVX7V/](http://jsfiddle.net/QVX7V/)

# c - 在 Windows 上编译符合 C99 的 .so

> ID：13519960
> 
> 赞同：0
> 
> 时间：2012-11-22T21:05:05.153
> 
> 标签：c, ruby, makefile, c99, c89

我正在使用 StarRuby ( [https://github.com/hajimehoshi/starruby](https://github.com/hajimehoshi/starruby) ) 库，并试图将最新版本编译为 .so 文件，以便在我的 ruby​​ 项目中进行链接。

但是，在获取编译所需的库，运行extconf.rb文件制作Makefile后，发现C代码不符合C90格式，更像是需要C99格式。

这是一个问题，因为 mingw 不使用 C99，而且我被困在 Windows 上。

如何将上述源代码编译成 .so 以便在 Windows 上使用 ruby​​？

生成文件：[http](http://pastebin.com/raw.php?i=i2ANc82g)
://pastebin.com/raw.php?i=i2ANc82g 生成文件 的确切输出可以在这里找到：[http](http://pastebin.com/raw.php?i=VpbmyLgy)
://pastebin.com/raw.php?i= VpbmyLgy 因为回滚到 libpng 1.2 ：[http ://pastebin.com/raw.php?i=TqdeADHY](http://pastebin.com/raw.php?i=TqdeADHY)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:08:22.047

将此行添加到您的 Makefile 中：

```
$CFLAGS += " -std=c99" 
```

# forms - Symfony 2 Form 创建用户并添加组

> ID：13519961
> 
> 赞同：3
> 
> 时间：2012-11-22T21:05:08.477
> 
> 标签：forms, symfony, entity

我想创建一个表单来添加用户：

```
$builder->add('firstname', 'text', array(
                    'required' => 'required'
                ))
                ->add('middlename')
                ->add('lastname')
                ->add('email', 'email')
                ->add('isActive'); 
```

但我还想添加一组。我有一个实体“Group”和一个表单“GroupType”。但是如何在我的所有组中添加一个选项以选择一个或多个？

我试过：

```
->add('groups', 'choice' ) 
```

但收到此错误：

```
Notice: Object of class Doctrine\Common\Collections\ArrayCollection could not be converted to int in /vendor/symfony/symfony/src/Symfony/Component/Form/Extension/Core/ChoiceList/ChoiceList.php line 457 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T23:48:02.800

要创建一个填充了数据库中所有组对象的选择字段，请使用“实体”字段。要启用多项选择（1+ 个选项），请使用“多个”选项。例如：

```
$builder->add('groups', 'entity', array(
    'class' => 'YourBundle:Group',
    'property' => 'name',
    'multiple' => true,
)); 
```

'property' 选项的值决定了显示哪个组字段。如果您需要对选择元素中的对象进行排序或显示对象的子集，请使用“query_builder”选项通过自定义查询加载选择。例如：

```
use Doctrine\ORM\EntityRepository;
// ...

$builder->add('groups', 'entity', array(
    'class' => 'YourBundle:Group',
    'property' => 'name',
    'multiple' => true,
    'query_builder' => function(EntityRepository $er) {
        return $er->createQueryBuilder('g')
                  ->orderBy('g.name', 'ASC');
    },
)); 
```

请参阅Symfony2 文档中的[实体字段类型](http://symfony.com/doc/master/reference/forms/types/entity.html)。

# mongodb - 关于 mongooseJs 中的 MongoDb 模式的困惑。如何改进它？

> ID：13519964
> 
> 赞同：0
> 
> 时间：2012-11-22T21:05:19.800
> 
> 标签：mongodb, mongoose

我这里有两份文件。

```
var UserSchema = new Schema({
        username: {
          type: String,
          validate: [required,"Username is required"],
          index: {unique: true}
        },
        email: {
            type: mongoose.SchemaTypes.Email,
            validate: [required, 'Email required'],
            index: { unique: true }
        },
        password: {
            type: String,
            validate: [required, 'Password required'],
        },
        socialauth:{
          type:[]
        },

        createdAt: {
            type: Date,
            'default': Date.now
        }
    }); 
```

用户TwitterSchema：

```
var UserTrwitterSchema = new Schema({

  authToken: {
      type: String,
      validate: [required,"authToken is required"],
      index: {unique: true}
    },

  authSecret: {
      type: String,
      validate: [required,"authSecret is required"],
      index: {unique: true}
    },
  apiKey: {
        type: String,
        validate: [required, 'Api Key is required'],
    }, 
}); 
```

我在这里的困惑是：好吧，我应该使用 apiKey 还是`user :ObjectId,`代替它。用户将是这里的外键。还是两者都做？在查询数据时，什么成本最低？我在这里使用了 apiKey，并且对所有其他模式都做了同样的事情。只是想要第二个意见，因为这与我创建关系数据库的方式完全不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:59:58.037

如果您打算接受具有其他凭据的用户（facebook ....），我不会创建单独的 twitter 架构

相反，我会创建一个配置文件集合，其中类型和凭据作为唯一密钥，并将用户数据（年龄、生物等）存储在用户 ollection 中。

```
profile = {
 _id : {type : "email", username : "Justin"},
 creds : {email : "foo@bar.com", pw : "hash"),
 user_id : ObjectId(xys)
}

profile2 = {
 _id : {type : "twitter", username : "JustinBieber"},
 creds : {token : "fatoken", secret : "hash" , key : "key"),
 user_id : ObjectId(xys) 
```

}

用户看起来像：

```
user = {
 _id : ObjectId(xys),
 bio : "really young guy",
 born : date(March 1, 1994)
 ...
} 
```

# c - C 程序 - srand()

> ID：13519965
> 
> 赞同：0
> 
> 时间：2012-11-22T21:05:28.943
> 
> 标签：c, srand

> **可能重复：**
> [初始化 srand 的推荐方法？](https://stackoverflow.com/questions/322938/recommended-way-to-initialize-srand)

在 c 中使用 srand() 时出现以下问题。

**我在循环中**调用 srand(time(NULL)) ，但循环**在 1**秒前结束，每次调用 rand() 时我都会得到相同的值。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:06:47.527

你为什么要`srand`循环调用？只需在程序开始时调用一次，然后调用`rand`任意次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T21:07:03.080

不要在循环中调用 srand 。你为什么做这个？

只需在循环外初始化一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T21:08:15.087

你只需要初始化`srand()`一次，然后你只需要用来`rand()`生成随机数。并生成随机数使用[更好的随机算法？](https://stackoverflow.com/questions/1912199/better-random-algorithm)

> 如果要生成 1 到 10 之间的随机整数，则应始终使用高位来执行此操作，如

```
j = 1 + (int) ( 10.0 * ( rand() / ( RAND_MAX + 1.0 ) ) ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T21:13:02.097

`srand`的目的是初始化随机数生成器。

它的参数称为种子。如果您两次提供相同的种子，您可以期望随机数生成器（随后调用`rand()`）返回相同的“随机”数序列。

在你的情况下，你不断地用相同的值调用 srand （直到第二次改变），所以 rand() 总是会返回相同的值。

您只需要调用`srand`一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T21:24:19.180

因为种子被绑定到 time() 中，这是自 unix 纪元以来的秒数，所以基本上你给它相同的种子，因为循环花费的时间不到一秒。

你应该做的是以微秒为单位获取时间。看看 gettimeofday() 如果你正在为 windows google microseconds win32 C 编写代码，你需要将它从双精度转换为整数所以只需执行此操作 (unsigned int)double * 100.0f;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T21:47:32.367

在您的帮助下，我找到了答案。

```
 struct timeval tv;
        gettimeofday(&tv,NULL);
        unsigned long time_in_micros = 1000000 * tv.tv_sec + tv.tv_usec;//find the microseconds for seeding srand()
        srand(time_in_micros); 
```

# javascript - 如何使用 JavaScript 正则表达式匹配换行符？

> ID：13519970
> 
> 赞同：4
> 
> 时间：2012-11-22T21:05:44.793
> 
> 标签：javascript, regex

我有这个表达：

```
$(document).ready(function(){
    $.validator.addMethod(
        "regex",
        function(value, element) {
            return this.optional(element) || /^(?!.*www)(?!.*http)(?!.*@)(?!.*\.com)(?!.*\.pt)(?!.*co\.uk).+$/i.test(value);
        },
        "Description field can not include e-mail and/or urls."
    );
    $("#regForm").validate();
}); 
```

如果我有这样的文本，我会收到错误，因为换行符

```
A Loja virtual possui uma vasta linha de bijouterias folheadas a ouro e prata. São produtos bastante procurados e com preços muito acessíveis(50% de desconto no atacado).
Ha mais de 10 anos no mercado de folheados.

Produtos de excelente qualidade. 
```

如果我有这个文本，没有换行符，它工作正常：

```
A Loja virtual possui uma vasta linha de bijouterias folheadas a ouro e prata. São produtos bastante procurados e com preços muito acessíveis(50% de desconto no atacado).Ha  mais de 10 anos no mercado de folheados.Produtos de excelente qualidade. 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T21:06:47.323

`.`默认情况下不匹配换行符。通常，`s`（称为`singleline`或`dotall`）修饰符会改变它。不幸的是，JavaScript 不支持它。

有一个（稍微冗长的）技巧可以解决这个问题。字符类`[\s\S]`匹配任何空格和任何非空格字符。即任何字符。所以你需要这样做：

```
/^(?![\s\S]*www)(?![\s\S]*http)(?![\s\S]*@)(?![\s\S]*\.com)(?![\s\S]*\.pt)(?![\s\S]*co\.uk)[\s\S]+$/i 
```

或者，（仅在 JavaScript 中）您可以使用“蜡烛运算符” `[^]`，它也匹配任何单个字符（因为它是空字符类的否定，即它匹配不在空集中的任何字符）。我猜你是否发现或多或少的可读性是一个品味问题：

```
/^(?![^]*www)(?![^]*http)(?![^]*@)(?![^]*\.com)(?![^]*\.pt)(?![^]*co\.uk)[^]+$/i 
```

# ios - 按钮在 ipad1 上不起作用，而在模拟器中正常工作

> ID：13519971
> 
> 赞同：0
> 
> 时间：2012-11-22T21:05:46.007
> 
> 标签：ios, ipad, button, simulator

我有一个用于 HTML Put 功能的测试应用程序。有一些按钮，例如发布数据的发布按钮，但它们都不执行它们的操作。您可以看到它们被按下等等，但选择器不起作用。在模拟器中它工作正常，但在我的 ipad1 上，当您按下任何按钮时，除了在按下时突出显示的按钮外，什么都没有发生。有人知道这里发生了什么吗？我想让按钮正常工作，即：它们应该执行给定的操作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:25:16.527

我有一个手势识别器。它在模拟器中工作，但在设备上不起作用。手势识别器将事件带走，因此没有任何反应。还需要这个工作：

`gestureRecognizer.cancelsTouchesInView = NO;`

我还需要将代理设置为手势识别器的自我。

# php - 如何以及如何登录 PHP

> ID：13519976
> 
> 赞同：0
> 
> 时间：2012-11-22T21:06:12.377
> 
> 标签：php, logging

嗯...我知道当网站处于生产状态并且错误报告关闭时记录错误是件好事。但是我实际上应该记录什么？我无法记录所有错误，因此我应该在代码中选择一些最可能出现错误的位置，并使用一些消息调用该函数来记录它。我应该使用 try-catch 来做到这一点吗？它实际上是最好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T21:18:50.380

您应该有几个级别的错误严重性，所有这些都以不同的方式处理：

*   调试级别消息仅用于调试，例如非常冗长地输出有关正在发生的所有事情的信息
*   信息级消息通知重要事件，例如“尝试联系 Web 服务”
*   通知并不罕见，但值得注意的事件
*   警告是需要纠正的问题，但不会立即引起问题
*   应详细记录错误并进行监控
*   严重错误是意外的紧急情况，应详细记录并可能自动通过电子邮件发送
*   警报需要立即关注，并应触发自动 SMS 通知
*   紧急情况应自动部署国民警卫队

您将所有这些不同类型的错误/事件散布在您的应用程序中。应记录通知和 up，应详细记录错误和 up（将系统状态转储到单独的文件中），对于严重错误和 up，应自动通知某人。

请参阅[https://github.com/Seldaek/monolog](https://github.com/Seldaek/monolog)以获得可以帮助您执行此操作的好组件。

# c# - Google-drive-sdk-samples，如何使用 SVN 获取

> ID：13519978
> 
> 赞同：0
> 
> 时间：2012-11-22T21:06:20.787
> 
> 标签：c#, google-drive-api

我正在尝试获取用于连接到 Google 驱动器的 .Net 示例，但是如何使用 SVN 获取它们？我找不到 SVN 的网址。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:16:02.520

看起来它不是托管在 svn 上，而是 Mercurial 上。从[源页面](https://code.google.com/p/google-drive-sdk-samples/source/checkout)：

> 使用以下命令获取 google-drive-sdk-samples 存储库的本地副本：

```
hg clone https://code.google.com/p/google-drive-sdk-samples/ 
```

# c++ - 在 C++ 和 Fortran 代码之间传递复数数组

> ID：13519981
> 
> 赞同：1
> 
> 时间：2012-11-22T21:06:28.657
> 
> 标签：c++, fortran, complex-numbers, fortran-iso-c-binding

我正在使用 C++ 和 Fortran 代码。C++ 代码需要调用 Fortran 子例程。Fortran 子例程的一个参数具有 Fortran 类型`complex`。

C++ 代码在一个文件中，而 Fortran 代码子例程在另一个文件中。我正在使用64 位`gcc`系统。`gfortran``GNU/Linux`

这是一个显示 Fortran 子例程声明的片段（以及一些附加行）：

```
SUBROUTINE  minp (AMP,L,L2,FMINP,PHI)
   REAL*4 AMP( L ),FMINP( L )
   COMPLEX PHI( L ) 
```

在 C++ 文件中，我知道传递给 Fortran 代码的参数需要通过引用传递，而不是通过值传递。Fortran 子例程在 C++ 代码（在源代码文件的顶部）中使用`extern`关键字声明为函数。

```
extern "C"
{
minp_ (float *amp, int &L, int &L2, float *fminp, complex *phi);

} 
```

但是，函数的最后一个参数是一个复杂的 C 数组。怎么可能：

1.  为 C/C++ 中的复杂数组分配内存以作为`phi`参数传递？
2.  将数组作为参数传递给 Fortran 子例程，以便 Fortran 代码可以使用内存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T21:50:36.473

对于 C（和通过 extern C 的 C++）和 Fortran 的接口，我建议使用 Fortran 的 ISO C 绑定。它提供了复杂类型，C_FLOAT_COMPLEX、C_DOUBLE_COMPLEX 和 C_LONG_DOUBLE_COMPLEX，以匹配 C 的类型。通过使用 ISO C 绑定并编写 Fortran 接口声明以匹配 C 代码，您将指示 Fortran 编译器匹配 C 编译器的调用约定。如果您将复杂类型与 ISO C 绑定一起使用，则处理数组与 float/double/long double 数组没有任何不同。gfortran 手册在“混合语言编程”一章中有示例，并在“内在模块”一章中描述了 ISO C 绑定的类型和内在过程。

# php - 如何设置持久cookie

> ID：13519982
> 
> 赞同：8
> 
> 时间：2012-11-22T21:06:42.520
> 
> 标签：php, cookies

我正在使用 php 代码并尝试设置 cookie，如下所示：

```
 setcookie("_GuestID",$userID,time() + (20 * 365 * 24 * 60 * 60)); 
```

我发现cookie在浏览器关闭后过期。我想让它坚持很长时间。我该怎么做。请提出您的建议。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T21:39:18.540

如前所述，检查 cookie 是否真的在您的浏览器中设置（您的语法似乎正确）。

只要您设置了 Cookie，它们就会一直存在。除非有特定的到期要求（通常要短得多），否则我一直使用一年作为一个周期。

使用 strtotime 函数使它们更易于阅读：

```
setcookie( "cookieName1", $value1, strtotime( '+1 year' ) );
setcookie( "cookieName2", $value2, strtotime( '+30 days' ) ); 
```

[在setcookie 手册页](http://php.net/manual/en/function.setcookie.php)上有很多关于如何使用它们的示例，值得花时间阅读。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-18T10:24:43.853

没有设置持久性 cookie 的特殊方法。它与您设置普通 cookie 的方式相同。 **具有到期日期的 Cookie 称为持久性 Cookie。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-07-20T05:33:11.017

让我们更好地理解 cookie...

有两种不同类型的 cookie - 会话 cookie 和持久 cookie。

*   如果 cookie 不包含过期日期，则将其视为会话 cookie。会话 cookie 存储在内存中，从不写入磁盘。当浏览器关闭时，cookie 将从此永久丢失。
*   如果 cookie 包含过期日期，则将其视为 **持久 cookie**。在到期日指定的日期，cookie 将从磁盘中删除

> ```
> $cookie_name = "Name";
> $cookie_value = "Amitesh";
> setcookie($cookie_name, $cookie_value, time() + (86400 * 30), "/"); // 86400 = 1 day 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-14T07:54:26.910

使用 strtotime 函数使它们更易于阅读：

setcookie("cookieName1",123545,time()+(strtotime('+1 year')));

# jquery - change() 后如何调用函数

> ID：13519985
> 
> 赞同：0
> 
> 时间：2012-11-22T21:06:47.427
> 
> 标签：jquery

我需要实现我在这里要求的原因有点令人费解，因为我正在使用一个已经有一些 jQuery 内容的 CMS。但基本上，当用户单击链接或从下拉列表中选择时，我需要调用 2 个函数（它们都做同样的事情），让我们称它们`foo()`为`bar()`.

当用户点击时，我可以让它工作：

```
$('.links').on("click", "a", function() {
    $(".dropdown select").change();
    bar();
    return false;
});

$(".dropdown select").change(function() {
    $("select option:selected").each(function () {
        foo();
    });
}); 
```

问题是 bar() 需要在`change()`事件之后调用。我不能`bar()`在 change() 事件中调用。当用户点击时，没有问题。但是我不知道如何`bar()`直接调用，`change()`但是当一切`change()`都完成时。

有没有办法添加某种回调`change()`？我尝试了几种不同的语法，但无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:16:26.727

```
$('.links').on('click', 'a', function(){
   myFunc(); 
   return false;
});
$('.dropdown select').on('change', myFunc);

function myFunc(){
  $('select option:selected').each(function(){
    foo();
  });
  bar();
} 
```

为什么不添加第三个函数来处理这种行为？（并且在技术上保持相同数量的函数调用，因为我们可以删除由 a 处理的匿名函数`select` `change`！）

# c# - 在 Linq 查询中使用动态列名

> ID：13519992
> 
> 赞同：3
> 
> 时间：2012-11-22T21:07:27.363
> 
> 标签：c#, linq, dynamic

```
foreach (Dimension dimensions in Enum.GetValues(typeof(Dimension)))
{
    var r = new ReferenceTable(dimensions).referenceItems;
    List<TVRawDataRecord> qry = TVRawDataList.Where(p => !r.Any(d => d.Value == p.BrandVariant))
                                             .ToList();                
    DimensionItem di = new DimensionItem(qry, dimensions);
    newDimensions.Add(di); 
 } 
```

我正在尝试创建一个 Linq 查询，将列表与`TVRawDataRecords`枚举中的列表进行比较，`Dimensions`并且没有匹配项，然后将它们添加到新`DimensionIem`列表中。这一切都很好，但我需要`p.BrandVariant`在我的`Where`语句中动态替换维度枚举值，因为维度值与`TVRawDataRecord`属性名称相同。这意味着我可以只用这几行代码来循环 8 个维度等。

有人可以解释我如何在 Where 语句中包含维度吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:55:09.457

首先，这确实是一件奇怪的事情。您应该首先考虑替代设计。现在有一对夫妇来找我。

**无论如何，您可以使用反射来实现您想要实现的目标。**，好吧几乎..

```
foreach (Dimension dimension in Enum.GetValues(typeof(Dimension)))
{
    var r = new ReferenceTable(dimension).referenceItems;
    var qry = TVRawDataList.Where(p => !r.Any(d => IsAMatch(p, dimension, d.Value)))
                           .ToList();     

    DimensionItem di = new DimensionItem(qry, dimension);
    newDimensions.Add(di); 
}

bool IsAMatch<T>(TVRawDataRecord obj, Dimension dimension, T valueToMatch)
{
    return valueToMatch == dimension.MapToTvRecordProperty<T>(obj);
}

T MapToTvRecordProperty<T>(this Dimension dimension, TVRawDataRecord obj)
{
    return obj.GetPropertyValue<T>(dimension.ToString());
}

T GetPropertyValue<T>(this TVRawDataRecord obj, string propertyName)
{
     var property = typeof(TVRawDataRecord).GetProperty(propertyName);
     if (property == null)
         return null; //or throw whatever

     return (T)property.GetValue(obj, null);
} 
```

严格未经测试，未经编译。但这应该可以让您了解它是如何完成的。您可以使`GetPropertyValue`函数更通用，但这是另一回事。函数中的`T`类型参数`Map`（将维度枚举映射到`TVRawDataRecord`类的属性）被传递，因为您需要知道属性的返回类型。

**我想说一个更好的替代设计只是制作一个简单的函数，使用 if else 逻辑返回正确的类型**。所以把`Map`函数改成这样：

```
T MapToTvRecordProperty<T>(this Dimension dimension, TVRawDataRecord obj)
{
    switch (dimension)
    {
        case Dimension.BrandVariant:
            return obj.BrandVariant;
        case Dimension.Creative:
            return obj.Creative;

        .....

        default:
            throw;
    }
} 
```

优点是即使将来您更改任何变量的名称，您的代码也不会中断（与反射方法不同）。但这里的问题是选择返回类型`T`。第二个示例无法编译，因为返回类型与返回的内容不匹配。如果所有属性都属于同一类型，那么您可以选择该类型。如果它真的很可变，那么您将不得不先将您的属性转换为 object 然后再转换为`T`，但仍然比反射更好！

**更好的方法是[为 property](https://stackoverflow.com/a/2820676/661933)或[enum](https://stackoverflow.com/a/11008926/661933)**指定属性。

**最重要的是 if`BrandVariant`和`Creative`etc 是它们自己的类，您可以让它们都实现一个接口，该接口将`Dimension`**在它们上具有只读属性，并且您可以访问电视记录属性的该属性以获得正确的维度值！

# c# - 也无法使用 webapi 用 Castle 实例化控制器

> ID：13519994
> 
> 赞同：0
> 
> 时间：2012-11-22T21:07:46.117
> 
> 标签：c#, asp.net-mvc, asp.net-web-api, castle-windsor, castle

我正在一个项目中使用 ApiControllers 和 Controllers（不是 webapi）和 Castle（来自 Nuget）

```
 internal class WebWindsorInstaller : IWindsorInstaller
    {
        public void Install(IWindsorContainer container, IConfigurationStore store)
        {
            container.Register(Component
                .For<RepositoryFactories>()
                .ImplementedBy<RepositoryFactories>()
                .LifestyleSingleton());

            container.Register(Component
                .For<IRepositoryProvider>()
                .ImplementedBy<RepositoryProvider>()
                .LifestylePerWebRequest());

            container.Register(Component
                .For<IProjUow>()
                .ImplementedBy<ProjUow>()
                .LifestylePerWebRequest());

            container.Register(Classes
                .FromAssemblyContaining<Api.CategoriesController>()
                .BasedOn<IHttpController>()
                .If(t => t.Name.EndsWith("Controller"))
                .LifestylePerWebRequest());

            container.Register(Classes
                .FromAssemblyContaining<CategoriesController>()
                .BasedOn<IController>()
                .If(t => t.Name.EndsWith("Controller"))
                .LifestylePerWebRequest());
        }
    } 
```

这在 global.asax (Application_Start)

```
var container = new WindsorContainer().Install(new WebWindsorInstaller());
GlobalConfiguration.Configuration.DependencyResolver = new WindsorDependencyResolver(container); 
```

这是 CategoriesController 的 Controller 构造函数

```
public class CategoriesController : ControllerBase
{
    public CategoriesController(IProjUow uow)
    {
        Uow = uow;
    }
} 
```

而ControllerBase继承自Controller

ApiController 定义如下：

```
public abstract class ApiControllerBase : ApiController
{
    protected IProjUow Uow { get; set; }
}

public class CategoriesController : ApiControllerBase
{
    public CategoriesController(IProjUow uow)
    {
        Uow = uow;
    }
} 
```

ApiController 工作正常，但另一个说：

没有为此对象定义无参数构造函数。

为什么？

提前致谢！吉列尔莫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T13:58:19.287

好的，菲尔的链接为我指明了正确的方向。如果有人遇到同样的问题，我会分享我的解决方案。

这应该在 Global.asax.cx 中（Application_Start 方法）

```
// Set the dependency resolver for Web API.
var webApicontainer = new WindsorContainer().Install(new WebWindsorInstaller());
GlobalConfiguration.Configuration.DependencyResolver = new WebApiWindsorDependencyResolver(webApicontainer);

// Set the dependency resolver for Mvc Controllers
Container = new WindsorContainer()
    .Install(new ControllersInstaller());
DependencyResolver.SetResolver(new MvcWindsorDependencyResolver(Container)); 
ServiceLocator.SetLocatorProvider(() => new WindsorServiceLocator(Container)); 
var controllerFactory = new WindsorControllerFactory(Container.Kernel); 
ControllerBuilder.Current.SetControllerFactory(controllerFactory); 
```

WebApiWindsorDependecyResolver

```
 internal class WebApiWindsorDependencyResolver : IDependencyResolver
    {
        private readonly IWindsorContainer container;

        public WebApiWindsorDependencyResolver(IWindsorContainer container)
        {
            if (container == null) { throw new ArgumentNullException("container"); }
            this.container = container;
        }

        public object GetService(Type t)
        {
            return this.container.Kernel.HasComponent(t) ? this.container.Resolve(t) : null;
        }

        public IEnumerable<object> GetServices(Type t)
        {
            return this.container.ResolveAll(t).Cast<object>().ToArray();
        }

        public IDependencyScope BeginScope()
        {
            return new ReleasingDependencyScope(this as IDependencyScope, this.container.Release);
        }

        public void Dispose()
        {
        }
    } 
```

MvcWindsorDependencyResolver

```
 internal class MvcWindsorDependencyResolver : IDependencyResolver
    {
        private readonly IWindsorContainer container;

        public MvcWindsorDependencyResolver(IWindsorContainer container)
        {
            this.container = container;
        }

        public object GetService(Type serviceType)
        {
            return container.Kernel.HasComponent(serviceType) ? container.Resolve(serviceType) : null;
        }

        public IEnumerable<object> GetServices(Type serviceType)
        {
            return container.Kernel.HasComponent(serviceType) ? container.ResolveAll(serviceType).Cast<object>() : new object[] { };
        }
    } 
```

控制器安装程序

```
public class ControllersInstaller : IWindsorInstaller
    {
        public void Install(IWindsorContainer container, IConfigurationStore store)
        {
            container.Register(FindControllers().Configure(c => c.LifestyleTransient()));

            container.Register(Component
                .For<RepositoryFactories>()
                .ImplementedBy<RepositoryFactories>()
                .LifestyleSingleton());

            container.Register(Component
                .For<IRepositoryProvider>()
                .ImplementedBy<RepositoryProvider>()
                .LifestylePerWebRequest());

            container.Register(Component
                .For<IProjUow>()
                .ImplementedBy<ProjUow>()
                .LifestylePerWebRequest());
        }

        private static BasedOnDescriptor FindControllers()
        {

            return AllTypes.FromThisAssembly()
                .BasedOn<IController>()
                .If(t => t.Name.EndsWith("Controller"));
        }
    } 
```

WebWindsorInstaller

```
 internal class WebWindsorInstaller : IWindsorInstaller
    {
        public void Install(IWindsorContainer container, IConfigurationStore store)
        {
            container.Register(Component
                .For<RepositoryFactories>()
                .ImplementedBy<RepositoryFactories>()
                .LifestyleSingleton());

            container.Register(Component
                .For<IRepositoryProvider>()
                .ImplementedBy<RepositoryProvider>()
                .LifestylePerWebRequest());

            container.Register(Component
                .For<IProjUow>()
                .ImplementedBy<ProjUow>()
                .LifestylePerWebRequest());

            container.Register(Classes
                .FromAssemblyContaining<Api.CategoriesController>()
                .BasedOn<IHttpController>()
                .If(t => t.Name.EndsWith("Controller"))
                .LifestylePerWebRequest());
        }
    } 
```

唯一我不太了解的事情（尽管这有效）是为什么我需要有两个类 DependencyResolver（WebApiWindsorDependencyResolver 和 MvcWindsorDependencyResolver）当它们几乎相同时。我可以摆脱其中之一吗？

如果我更改代码而不是

```
DependencyResolver.SetResolver(new MvcWindsorDependencyResolver(Container)); 
```

我写

```
DependencyResolver.SetResolver(new WebApiWindsorDependencyResolver(Container)); 
```

它说

```
The type Proj.UI.Cms.Infrastructure.WebApiWindsorDependencyResolver does not appear to implement Microsoft.Practices.ServiceLocation.IServiceLocator.
Parameter name: commonServiceLocator 
```

但是这两个类似乎共享相同的代码。

最好的祝福。吉列尔莫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T16:09:40.710

如果有人仍然遇到这个问题，解决方案是从 System.Web.Http.Dependencies 或 System.Web.Mvc 实现正确的 IDependencyResolver 接口。

有关答案，请参阅[https://stackoverflow.com/a/21459761](https://stackoverflow.com/a/21459761)。

# android - Webview 下载 PDF 到手机

> ID：13519997
> 
> 赞同：2
> 
> 时间：2012-11-22T21:07:57.460
> 
> 标签：android, file, pdf, webview, download

目前我正在尝试在我的 Webview 中显示一些“动态”PDF 文件。这些 PDF 从数据库加载并“流式传输”到浏览器中，这在所有 PC 浏览器甚至 Android 浏览器中都可以正常工作。我尝试了“content-type: application/pdf”甚至“application/octet-stream”，但都给出了相同的结果。

我尝试使用 HttpClient 和 HttpURLConnection 下载 PDF，但我尝试使用 getContentLength(); 和 getInputStream(); 一直说它只有100B。

因此，当我启动 PDF 意图时，Android 告诉我它不是正确的 PDF 文件。

只有当我使用 downloadListener 并将 URL 放入意图中（没有先下载）时，Webview 才会打开默认浏览器，它会立即自动开始下载。

所以我呈现 PDF 的方式似乎很有效。但是我尝试从 URL 获取流的方式没有。

关于这个主题的大量问题，遗憾的是很少有正确/有效的答案......

亲切问候！

编辑： URL 不是 www.xxx.com/file.pdf，而是 www.xxx.com/file.php?id=12345 所以当我在移动浏览器中打开 URL 时，浏览器开始下载它，但是下载我的 Webview 中的代码似乎可以看到/找到一个文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T14:03:37.097

我终于找到了解决方案！我需要通过 WebView 的身份验证 cookie！

所以添加以下代码解决了我的问题；

```
String cookie = CookieManager.getInstance().getCookie(url.toString());
if (cookie != null) connection.setRequestProperty("cookie", cookie); 
```

# javascript - 在 sinon 中监视咖啡脚本构造函数

> ID：13519999
> 
> 赞同：4
> 
> 时间：2012-11-22T21:08:09.377
> 
> 标签：javascript, testing, coffeescript, sinon, chai

我正在尝试验证咖啡脚本构造函数是否引发异常（使用 sinon 和 sinon-chai）。

```
class Animal
  constructor: ->
    throw "exception"

class Dog extends Animal 
```

如何正确创建间谍来验证实例化 Dog 是否引发异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:21:02.227

只需使用匿名函数在其中创建您的对象，这样您就可以将`expects`. 到目前为止不需要诗乃。

```
expect(-> new Animal()).to.throw(/message/) 
```

请注意，`throw`如果您抛出一个简单的字符串，chai 中的正则表达式总是会通过。只有在抛出 Error 对象时它才能正常工作。无论如何，抛出真正的错误总是更好。

```
class Animal
  constructor: ->
    throw new Error('message') # only this will assert the regexp above 
```

希望这可以帮助。