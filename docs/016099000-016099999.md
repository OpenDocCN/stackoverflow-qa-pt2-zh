# StackOverflow 问答 16099000-16099999

# eclipse - Eclipse 没有从表中创建 JPA 实体

> ID：16099010
> 
> 赞同：4
> 
> 时间：2013-04-19T07:01:31.157
> 
> 标签：eclipse, jpa

我正在使用 Eclipse Juno、Hibernate 4.0 和 MSSQL 2008。我已经创建了一个数据库，并且刚刚在 Eclipse 中完成了“表中的 JPA 实体”过程。大约一半的表没有被创建（即使我选择了那些表），但是这些类被添加到了 persistence.xml。

有没有其他人遇到过这个问题？你有解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-01T02:27:24.307

在我的例子中，数据库是 Oracle XE。所以我的情况有点不同，但可能对某人有帮助。

找出问题的最佳方法是检查 $workspace_location/.metadata/.log 文件中存在的工作区日志。就我而言，我发现有3个问题：

1) 原因：java.io.FileNotFoundException: $MiddlewarePath\oracle_common\modules\oracle.adf.share_11.1.1\adfsharembean.jar (访问被拒绝)

2) 原因：java.io.FileNotFoundException: $MiddlewarePath\oracle_common\modules\oracle.ldap_11.1.1\jremtool.jar (访问被拒绝)

3) !MESSAGE Unable to find JPA entity generation templates in pluginorg.eclipse.jpt.jpa.gen !STACK 1 Java Model Exception: Core Exception [code 275] A resource exists with a different case: '/TestJPAProjectFacetsEJB/src/main/ java/com/domainname/ejb/TestJPAProjectFacets'。

因此，我做了以下事情：

1) 为 jar 文件提供访问权限 2) 当我生成实体时，我将包名称指定为 com/domainname/ejb/testjpaprojectfacets/model。但我已经有一个包 com/domainname/ejb/TestJPAProjectFacets 因此出现错误。然后，我将现有的包重命名为全小写（com/domainname/ejb/testjpaprojectfacets）并且它起作用了。

谢谢，桑杰

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-14T18:46:11.553

My workaround was to use the JTDS JDBC Driver to connect to SQL Server database instead of the Microsoft SQL Server JDBC Driver

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:03:49.843

这听起来像 Eclipse DTP 错误[282206](https://bugs.eclipse.org/bugs/show_bug.cgi?id=282206)。Dali（提供您正在使用的实体生成向导的 Eclipse 项目）依赖 Eclipse DTP 项目从各种数据库服务器检索生成实体所需的元数据。您正在使用的 MS SQL Server“驱动程序”（即 DTP 用于使 MS SQL JDBC 驱动程序适应 DTP SPI 接口的插件 - 默认情况下，此插件是`org.eclipse.datatools.enablement.msft.sqlserver...`- DTP 开发人员喜欢有点混乱将这些插件称为“驱动程序”....）返回给 Dali 的元数据中存在错误，导致 Dali 无法生成实体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-12T06:40:04.993

我也遇到过这个问题。

我的解决方法 - 在 MySQL 中创建数据库并从那里生成实体。生成的实体类也适用于 SQL Server。没有遇到任何其他副作用（到目前为止）

# c - 如何杀死所有以c语言运行的线程？

> ID：16099013
> 
> 赞同：4
> 
> 时间：2013-04-19T07:01:41.203
> 
> 标签：c, multithreading, kill

我的程序中有一些线程正在运行。我想杀了他们。我能做些什么？另外，我想获取程序中运行的线程当前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:54:20.580

这个问题在这里不是很清楚。此外，最好用 [pthread_exit()](http://man.yolinux.com/cgi-bin/man2html?cgi_command=pthread_exit)终止线程。但是如果你仍然想杀死线程，你可以使用[pthread_kill()](http://man.yolinux.com/cgi-bin/man2html?cgi_command=pthread_kill)但检查它的返回值，因为它可能会失败，在这种情况下它会返回一个错误号，成功时它返回 0。而[pthread_self()](http://man.yolinux.com/cgi-bin/man2html?cgi_command=pthread_self)返回的线程 id当前正在运行的线程。如果您希望线程在特定状态或特定类型被取消，您可以使用[pthread_setcancelstate()](http://man.yolinux.com/cgi-bin/man2html?cgi_command=pthread_setcancelstate)和[pthread_setcanceltype(](http://man.yolinux.com/cgi-bin/man2html?cgi_command=pthread_setcanceltype) )。希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:23:12.147

您必须找出在某处创建线程的位置，例如线程句柄。为了杀死他们，你需要[`pthread_create`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_create.html)`(&pid....)` `pid`[`pthread_kill`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_kill.html)

要检查当前正在运行的线程，您可以使用[`pthread_self`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_self.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:15:16.607

保存创建线程的句柄。线程实现通常高度依赖于操作系统，提供更多信息。

对于 linux（您需要在创建时保存的句柄）： http: [//man7.org/linux/man-pages/man3/pthread_kill.3.html](http://man7.org/linux/man-pages/man3/pthread_kill.3.html)

可能有某种方法可以枚举进程的所有线程。但我认为没有必要，只需跟踪您的线程即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T12:53:41.930

杀死进程会自动杀死它已经启动的线程。但是要杀死特定线程，请获取 pthread_create 的 id 并在 pthread_kill 中使用它。这是一个有用的链接：

> [https://computing.llnl.gov/tutorials/pthreads/#PthreadsAPI](https://computing.llnl.gov/tutorials/pthreads/#PthreadsAPI)

# ruby-on-rails - 在 Ruby on Rails 中创建之后

> ID：16099015
> 
> 赞同：1
> 
> 时间：2013-04-19T07:01:42.267
> 
> 标签：ruby-on-rails, helper

在控制器中我的代码是

```
query = "insert into users (name, email,updated_at) values (#{name},#{email},now()) ON DUPLICATE KEY UPDATE updated_at=now()" 
```

> User.connection.execute（查询）

在模型中

```
after_create :change_updated_at

    def change_updated_at
     if !self.email.blank?
       chk_user = User.find_by_id(self.email)
       if !chk_user.blank? && chk_user.updated_at.blank?          
          chk_user.updated_at =Time.now
          chk_user.save!
       end
     end

end 
```

但它不起作用请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:13:09.410

不要直接运行您的查询，这非常不正常。让 rails 为您生成查询。通过自己运行，rails 无法知道您已经创建了记录，因此`after_create`不会调用过滤器。

将您的代码更改为：

```
User.create(name: name, email: email) 
```

然后它会运行。另外，不要自己更新“create_at”字段。如果您使用 rails 方法，它也会自动为您执行此操作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:19:31.897

您需要使用 params 对象输入属性。所以首先你需要新方法，然后创建方法（如果你对模型使用标准表单助手）：

```
def create
@user=User.new(params[:user])
#other code
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:30:21.723

您的查询应该替换为类似的内容。这将提供与使用 ON DUPLICATE KEY UPDATE 相同的功能

```
user = User.where("name = ? and email = ?", name, email)
if user.nil?
    user = User.new 
end
user.name = name
user.email = email
user.save 
```

因为您希望此功能即使是更新也能运行。您想使用`after_save`回调[http://apidock.com/rails/ActiveRecord/Callbacks/after_save](http://apidock.com/rails/ActiveRecord/Callbacks/after_save)

仅在`after_create`创建全新对象时调用。 [http://apidock.com/rails/ActiveRecord/Callbacks/after_create](http://apidock.com/rails/ActiveRecord/Callbacks/after_create)

活动记录提供的所有回调列表在这里 [http://apidock.com/rails/ActiveRecord/Callbacks](http://apidock.com/rails/ActiveRecord/Callbacks)

# java - 在不带 .xls 的 jdbc 中声明创建表名

> ID：16099017
> 
> 赞同：0
> 
> 时间：2013-04-19T07:01:50.427
> 
> 标签：java, mysql, jdbc

我用java制作了一个程序，它需要一个excel文件并将其数据存储在数据库中。当我说明文件在哪里时，它是这样的：

```
String filename = "test5.xls";

        String path = "C:\\Users\\myfiles\\Documents\\"; 
```

但是当我调用创建表并声明excel文件的文件名时，因为它是test.xls，mysql命令显示错误！创建表函数为：

```
try
            {
                String all = org.apache.commons.lang3.StringUtils.join(allFields, ",");
                String createTableStr = "CREATE TABLE " + "table5" + " (" + all + ")";

                System.out.println( "Create a new table in the database" );
                stmt.executeUpdate( createTableStr ); 
```

有没有办法在我创建表之前重命名文件或只读取没有.xls的“测试”？我的程序如下：

```
import java.io.FileInputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;

import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.commons.lang3.StringUtils;
import org.apache.poi.ss.usermodel.Cell;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

public class readexcel {

    public static void main (String[] args) throws Exception {

        //String filename = "C:\\Users\\myfiles\\Documents\\test5.xls";
        String filename = "test5.xls";
        String path = "C:\\Users\\myfiles\\Documents\\";

        List sheetData = new ArrayList();
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(path + filename);
            HSSFWorkbook workbook = new HSSFWorkbook(fis);
            HSSFSheet sheet = workbook.getSheetAt(0);

            Iterator rows = sheet.rowIterator();
            while (rows.hasNext()) {
                HSSFRow row = (HSSFRow) rows.next();
                Iterator cells = row.cellIterator();

                List data = new ArrayList();
                   while (cells.hasNext()) {
                   HSSFCell cell = (HSSFCell) cells.next();
                   data.add(cell);
                   }
                   sheetData.add(data);
            }

                   } catch (IOException e) {
                   e.printStackTrace();
                   } finally {
                   if (fis != null) {
                   fis.close();
                   }
                   }

    showExcelData(sheetData);
    HashMap<String,Integer> tFields = new HashMap();
    tFields = parseExcelData(sheetData);
    String str = getCreateTable(filename, tFields);

    }

    private static void showExcelData(List sheetData) {
//      HashMap<String, String> tableFields = new HashMap();
        for (int i=0; i<sheetData.size();i++){
          List list = (List) sheetData.get(i);
          for (int j=0; j<list.size(); j++){
              Cell cell = (Cell) list.get(j);
              if (cell.getCellType() == Cell.CELL_TYPE_NUMERIC)
              {
                  System.out.print(cell.getNumericCellValue());
              }
              else if(cell.getCellType()==Cell.CELL_TYPE_STRING)
              {
                  System.out.print(cell.getRichStringCellValue());
              }
              else if(cell.getCellType()==Cell.CELL_TYPE_BOOLEAN) {
                  System.out.print(cell.getBooleanCellValue());
              }
              if (j < list.size() - 1) 
              {
                  System.out.print(", ");
              }
          }
          System.out.println("");
        }
    }

    @SuppressWarnings({ "unchecked", "unused" })
    private static HashMap parseExcelData (List sheetData){

            HashMap<String,Integer> tableFields = new HashMap();
            List list = (List) sheetData.get(0);
            for (int j=0; j<list.size(); j++){
                Cell cell=(Cell) list.get(j);
                tableFields.put(cell.getStringCellValue(),cell.getCellType());
        }

            return tableFields;

        }

    private static String getCreateTable(String tablename, HashMap<String, Integer> tableFields){
        Iterator iter = tableFields.keySet().iterator();
        String str="";
        String[] allFields = new String[tableFields.size()];
        int i = 0;
        while (iter.hasNext()){
            String fieldName = (String) iter.next();
            Integer fieldType=(Integer)tableFields.get(fieldName);

            switch (fieldType){
                case Cell.CELL_TYPE_NUMERIC:
                    str=fieldName + " INTEGER";
                    break;
                case Cell.CELL_TYPE_STRING:
                    str= fieldName + " VARCHAR(255)";
                    break;
                case Cell.CELL_TYPE_BOOLEAN:
                    str=fieldName + " INTEGER";
                    break;
            }
            allFields[i++]= str;
        }
        try 
        {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = (Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/kainourgia","root", "root");
            Statement  stmt = con.createStatement();
            try
            {
                System.out.println( "Use the database..." );
                stmt.executeUpdate( "USE kainourgia;" );
            }
            catch( SQLException e )
            {
                System.out.println( "SQLException: " + e.getMessage() );
                System.out.println( "SQLState:     " + e.getSQLState() );
                System.out.println( "VendorError:  " + e.getErrorCode() );
            }
            try
            {
                String all = org.apache.commons.lang3.StringUtils.join(allFields, ",");
                String createTableStr = "CREATE TABLE " + "table5.xls" + " (" + all + ")";

                System.out.println( "Create a new table in the database" );
                stmt.executeUpdate( createTableStr );
            }
            catch( SQLException e )
            {
                System.out.println( "SQLException: " + e.getMessage() );
                System.out.println( "SQLState:     " + e.getSQLState() );
                System.out.println( "VendorError:  " + e.getErrorCode() );
            }
        }
        catch( Exception e )
        {
            System.out.println( ((SQLException) e).getSQLState() );
            System.out.println( e.getMessage() );
            e.printStackTrace();
        }
        return str; 
    }

    @SuppressWarnings({ "unused", "unused", "unused", "unused" })
    private Statement createStatement() {
        return null;
    }

} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:06:51.713

给出文件名

```
String filename = "test5.xls";
String path = "C:\\Users\\myfiles\\Documents\\";

File f = new File (path + filename);
System.out.println(f.getName());// gives only file name with out extension 
```

# javascript - HTML 和 JSP - 如何在不移动到另一个页面的情况下在表单上启动操作

> ID：16099018
> 
> 赞同：0
> 
> 时间：2013-04-19T07:01:54.737
> 
> 标签：javascript, html

我正在尝试创建一个 YouTube 网站，除了上下投票之外，一切都已经设置好了。

HTML 中有没有办法在不更改当前网页（例如用户当前正在观看视频）的情况下创建一个赞成和反对按钮，并启动一段代码或一个可以执行某些逻辑的 servlet？

谢谢大家，我对html非常缺乏经验，所以我对这一步感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:05:59.673

您可以通过在向服务器发送 AJAX 调用的按钮单击事件上运行一些 JavaScript 来做到这一点。

谷歌搜索一些 AJAX 调用的例子，这并不难。您将需要编写一些服务器端代码来处理赞成/反对投票请求，但请求是通过 AJAX 发送而不是通过在页面上提交表单这一事实并没有太大区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:12:08.107

由于您仅使用 HTML 来执行此操作。您需要将数据保存在数据库中，但要做到这一点，您需要使用 Jquery 魔术将数据发布到某些 Web 服务中并保存在数据库中。

```
[Working Demo http://jsfiddle.net/ukrs7/12/][1] 
```

您可以在上面的小提琴中看到 Upvote downvote JQuery 逻辑，

您需要通过保存在数据库中来增强这一点。

# azure - 在 Azure 错误中打开 .obj

> ID：16099019
> 
> 赞同：0
> 
> 时间：2013-04-19T07:01:58.443
> 
> 标签：azure, webgl, mime, .obj

当我`.obj`使用 Google chrome 在运行 Windows Server 2008 的 Windows Azure 中打开文件时，会出现错误（例如：localhost/obj/test.obj）

错误如下所示，请问我该如何解决这个问题？

`HTTP Error 404.3 - Not Found. The page you are requesting cannot be served because of the extension configuration. If the ``page is a script, add a handler. If the file should be downloaded, add a MIME map.`

# android - 同时在多台设备上播放一个多媒体内容？

> ID：16099021
> 
> 赞同：3
> 
> 时间：2013-04-19T07:02:17.850
> 
> 标签：android, wifi, dlna

我可以通过 DLNA 同时在两台或多台设备上发送和显示我的多媒体内容吗？

如果是，我该怎么做？例如，我希望我的电视、平板电脑能够同时播放与我的智能手机（LG Nexus 4）相同的多媒体内容。

如果没有，是否有任何其他协议（如 wifi）来执行此操作。任何方法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T07:07:01.733

android 设备的最佳实现，因为我认为从媒体服务器流式传输您的多媒体内容，然后多个设备可以同时播放

DLNA 还没有 android api[如何制作 DLNA android 移动应用程序？](https://stackoverflow.com/questions/6589010/how-to-make-a-dlna-android-mobile-application)

用于流式传输

[Android 视频流示例](https://stackoverflow.com/questions/5335731/android-video-streaming-example)

[http://developer.samsung.com/android/technical-docs/Android-Media-Streaming-Tutorial](http://developer.samsung.com/android/technical-docs/Android-Media-Streaming-Tutorial)

用于 android 到 android 通过 wifi 流式传输 通过 WiFi[从一部 android 手机到另一部的实时流视频](https://stackoverflow.com/questions/14401340/live-stream-video-from-one-android-phone-to-another-over-wifi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-19T20:44:52.790

我不确定 DLNA 播放器等，但我尝试通过 Youtube 流式传输我的内容。它非常易于设置和使用。

唯一的事情是确保您的电池已插入，或者只要它没有耗尽。Youtube 直播非常耗电。一些有用的链接

[Youtube 指南 / Link1](https://support.google.com/youtube/answer/2474026?hl=en)

Youtube 指南/链接 2 support.google.com/youtube/answer/2853700?hl=en

Youtube 指南/链接 3 support.google.com/youtube/answer/6273849?hl=en

祝你好运！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-17T13:32:57.623

AFAIK，DLNA 不支持跨多个设备查看同步内容。我发现的最佳解决方案是[VLC](http://www.videolan.org/vlc/index.html)作为通过 RTSP 流式传输视频的服务器。多个设备可以通过任何支持 RTSP 的视频客户端（如 VLC）查看流。对于 Android 设备[VLC for Android Beta](https://play.google.com/store/apps/details?id=org.videolan.vlc.betav7neon&hl=en)运行良好。

查看流的所有客户端都将被同步。

# c# - 输入文本文件，将文本添加到每一行，写入新文件 C#

> ID：16099024
> 
> 赞同：1
> 
> 时间：2013-04-19T07:02:36.537
> 
> 标签：c#, list, io

对于家庭作业，我必须为 MIPS 代码创建一个非常简化的汇编程序。所以我们接受一个 MIPS 指令的输入文件，然后输出一个包含输入代码相关二进制文件的文件。每行代码都必须映射到一个“内存”位置，该位置只是行前的一个十六进制值，但我们添加/分配这个“内存”。

因此，我想做的是从文本文件的每一行中读取，并且在前面我想附加一个值（十六进制的起始内存地址+（行号* 4）。然后我想重新读取文件。如果我需要读取整个文件，请创建一个分配了内存的新文件，然后读取该文件，这很好，但我想可能是不必要的。

我们的教授建议了一份清单，所以这是我目前所拥有的：

```
Console.WriteLine("Please enter the path to the input file:");
string inp = Console.ReadLine();
Console.WriteLine("Please enter the name of the new file:");
string otp = Console.ReadLine();
StreamReader inputFile = new StreamReader(inp);
StreamWriter outputFile = new StreamWriter(otp);
List<string> fileContents = new List<string>();
while ((inp = inputFile.ReadLine()) != null)
     fileContents.Add(inp); 
```

所以我的问题是：如何在该列表（fileContents）中每个项目的开头添加一个字符串？

***编辑：*** 对此的跟进：到目前为止，我已经设法完成所有这些工作，我已经引入了整个文档，将内存位置映射到每一行等。但是，我需要进一步编辑其中的一些行通过从其中删除一些信息来列出“inputLines”。

格式将始终为 [0] 内存地址 [1] 标签，或者，如果此行中没有标签，则为寄存器、操作等 [2]-[?] 寄存器、操作等。一旦我将内存映射到每一行，任何具有标签的行，我都想将其放入字典中，索引作为标签，内存地址作为包含的值，然后去掉标签。那么 - 我如何从包含它的任何行中删除该信息？

```
//go through each line, if any line's first "token" is a label, 
//put it in the dictionary as the index with the memory address as the value
//delete the label from the line
for (int i = 0; i < inputLines.Length; i++)
    {
       string[] token = inputLines[i].Split(new char[] { ' ', ',', '(', ')', ':' }, StringSplitOptions.RemoveEmptyEntries);
            string possibleLabel = token[1];
            if (opcodes.ContainsKey(possibleLabel) == false)
            {
                labeltable.Add(possibleLabel, token[0]);
                //at this point I want to delete the possibleLabel from the inputLines[i] and not deal with it anymore.
            }

        } 
```

那确实正确映射到我的字典，所以不用担心那部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:07:03.993

```
var inputLines = File.ReadAllLines(inputFilePath);
for (int i=0; i<inputLines.Length; i++)
    inputLines[i] = "Some Text" + inputLines[i]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:10:22.223

假设您的前缀在另一个列表中

```
var prefixes = new List<string>(/* som values */);

var ix = 0;

var result = fileContents.Select(x => string.Join(" ", prefixes[ix++], x)).ToArray(); 
```

如果您需要加入行号（来自字典）

```
var prefixes = new Dictionary<int, string>(); // Needs values

var result = new List<string>();

for (var i = 0; i < fileContents.Count; i++){
   string prefix;

   if (prefixes.TryGetValue(i, out prefix){ result.Add(string.Join(" ", prefix, fileContent[i])) }
   else { result.Add(fileContent[i]);}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:19:32.420

您可以使用 StringBuilder 作为 Faisal 代码的优化，否则它非常适合您的需求

```
Console.WriteLine("Please enter the path to the input file:");
string inp = Console.ReadLine();
Console.WriteLine("Please enter the name of the new file:");
string otp = Console.ReadLine();

System.Text.StringBuilder sb = new System.Text.StringBuilder();
string inputLines = System.IO.File.ReadAllLines(inp);
 for (int i = 0; i < inputLines.Length; i++)
     sb.Append("Some Text" + inputLines[i] + Environment.NewLine);

File.WriteAllText(otp, sb.ToString()) 
```

# c++ - 如何使用负值或零值格式化复数输出

> ID：16099027
> 
> 赞同：2
> 
> 时间：2013-04-19T04:56:47.467
> 
> 标签：c++, visual-c++

请我需要编写一个程序，从用户那里获取两个复数并输出它们的差。复数是 a+bi 形式的数字，其中 a 和 b 是实数，分别称为实部和虚部。因此，两个复数 a1+b1i 和 a2+b2i 之差为 (a1-a2)+(b1-b2)i。我把代码写成

```
#include<iostream>
using namespace std;

class cmp {
    private:
        double re, im;
    public:
        cmp(double a, double b) {re=a; im=b;}
        friend cmp operator+(cmp&, cmp&);
        void show() {cout<<re<<" + "<<im<<"i"<<endl;}
};

cmp operator+(cmp& p, cmp& q) {return cmp (p.re-q.re, p.im-q.im);}

main() {
    double m1, n1, m2, n2;
    cout<<"Give two complex numbers: "; cin>>m1>>n1; cout<<endl;
    cout<<"Give another two complex numbers: "; cin>>m2>>n2; cout<<endl;
    cmp c1(m1,n1);
    cmp c2(m2,n2);
    cmp c3=c1+c2;
    c3.show();

    system("PAUSE");
} 
```

但是，当您查看差异 (a1-a2)+(b1-b2)i 时，如果

1.  b2>b1，则差的虚部为负。例如 (10.5+2i)-(5+4i)=5.5-2i。但是，程序不能显示它，而是显示 5+-2i 。我的程序怎么可能是通常的数学格式？

2.  a1=a2 和/或 b1=b2, 0 显示在程序中，这与数学中的常用格式不同。例如，在数学上，(4+7i)-(4+5i)=(4-4)+(7-5)i=2i。但是这个程序会显示 0+2i。我该如何解决这个问题？

请我需要一个关于如何克服这些的线索。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T06:00:39.503

您只需要`show()`对这些特殊情况进行测试并明确处理它们。

*   如果其中一个组件为零，则仅显示另一个（并且不显示`+`）。
*   如果两者都为零，则显示为零。
*   `+`如果虚部为负，则不显示。
*   *正如 Jan Hudec 所提到*的，如果某些东西足够接近于零以至于它将打印为零，那么您可能还想确保将其视为零。

没有捷径可走；只是在那里放一些`if`陈述。

（我假设您这样做是出于教育目的，但如果不是，您应该知道[复数是 C++ 标准库的一部分](http://www.cplusplus.com/reference/complex/)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:26:12.237

在 C 语言中，您可以使用`+`flag 强制 + 或 - 登录数字。对于流，您需要自己处理这种情况。制作简单的功能没有什么比这更容易的了：

这是适用于任何实现 < 运算符和 << 运算符的模板版本：

```
template <typename T>
std::string forceSign(T number){
 std::string ret;
 std::stringstream helper;
 ret=(number<0)?'-':((0<number)?'+':'\0');
 helper<<number;
 helper>>ret;
 return ret
} 
```

然后你可以使用：

```
void show() {cout<<re<<" "<<forceSign(im)<<"i"<<endl;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:10:00.693

您可以像这样重写 show 函数

```
void show() {cout<<"("<<re<<") + ("<<im<<"i"<<")"<<endl;} 
```

（以便显示括号以使结果清晰）

或者你可以这样做，

```
 void show()
    {
        if (re==0 && im>0)
            cout<<re<<" + "<<im<<"i"<<endl;
        else if (re==0 && im<0)
            cout<<re<<" "<<im<<"i"<<endl;
        else if(im==0 && re>0)
            cout<<re<<" + "<<im<<"i"<<endl;
        else if(im==0 && re<0)
            cout<<re<<" + "<<im<<"i"<<endl;
        else
            cout<<re<<" + "<<im<<"i"<<endl;
    } 
```

这样，所有正值都将显示为前导“+”号，而负值将显示为“-”号。祝你好运！:)

# javascript - jQuery Hover 事件未绑定到子元素

> ID：16099031
> 
> 赞同：3
> 
> 时间：2013-04-19T07:02:59.200
> 
> 标签：javascript, jquery, html

我将悬停事件绑定到`li`标签（有关代码详细信息，请参见下面的代码或小提琴），即当我将鼠标悬停在 . 时`li`，我添加了更改`li`.

`li`标签有一个`a`标签，其中包含两个`span`带有文本的标签，当我将鼠标悬停在两个文本`span`标签上时，我没有看到悬停事件被执行。请看我的小提琴[http://jsfiddle.net/shmdhussain/JbVMv/](http://jsfiddle.net/shmdhussain/JbVMv/)。提前感谢您的帮助。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
     <title>Untitled Page</title>
     <link rel="stylesheet" type="text/css" href="css/reset.css"></link>
     <link rel="stylesheet" type="text/css"  href="css/mystyle.css"></link>

     <script src="/jquery-my.js" ></script>
    <script>
        jQuery(function($){
            var groupTab = $("ul").children("li");  
            groupTab.hover(function(){
            if(!($(this).children("a").hasClass("current")))
            {
                $(this).siblings("li").children("a").removeClass("hoverBG");            
                $(this).children("a").addClass("hoverBG");
            }                   
            });         
            groupTab.mouseout(function(){
                $(this).children("a").removeClass("hoverBG");               
            });
        });

    </script>
    <style>
        li{background-color:#DCDEDB;
            border:1px solid black;
            padding:20px;
        }
        .hoverBG{
            background-color:red;
        }
    </style>

</head>

<body>

    <div class="">
            <ul class="" id="">

                   <li class=" ">
                        <a class="current" href="#" >
                            <span class="">
                                MyName
                            </span>
                            <br>
                            <span class="">MyData</span>
                        </a>
                    </li>

                   <li class="" >
                        <a class="" href="#" >
                            <span class="">
                                MyName
                            </span>
                            <br>
                            <span class="">MyData</span>
                        </a>
                    </li>

                   <li class="" >
                        <a class="" href="#">
                            <span class="">
                                MyName
                            </span>
                            <br>
                            <span class="">MyData</span>
                        </a>
                    </li>
            </ul>

 </div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T07:13:07.473

[`.hover()`](http://api.jquery.com/hover/)jQuery 函数有两个参数，要在(mouseenter) 处执行的`hover`函数和要在`hover out`(mouseleave) 处执行的函数。你应该使用它而不是`mouseleave`

```
groupTab.hover(function () {
        if (!($(this).children("a").hasClass("current"))) {
            $(this).siblings("li").children("a").removeClass("hoverBG");
            $(this).children("a").addClass("hoverBG");
        }
    }, function () {
        $(this).children("a").removeClass("hoverBG");
    }); 
```

[演示](http://jsfiddle.net/pavloschris/JbVMv/4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T07:10:47.413

您可以使用 mouseenter 和 mouseleave 事件而不是 mouseover 和 mouseout

我编辑了你的例子：

[http://jsfiddle.net/JbVMv/1/](http://jsfiddle.net/JbVMv/1/)

```
jQuery(function($){
            var groupTab = $("ul").children("li");  
            groupTab.mouseenter(function(){
            if(!($(this).children("a").hasClass("current")))
            {
                $(this).siblings("li").children("a").removeClass("hoverBG");            
                $(this).children("a").addClass("hoverBG");
            }                   
            });         
            groupTab.mouseleave(function(){
                $(this).children("a").removeClass("hoverBG");               
            });
        }); 
```

[http://api.jquery.com/category/events/mouse-events/](http://api.jquery.com/category/events/mouse-events/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T07:12:59.287

如果要处理子项中的悬停状态，则需要使用[mouseenter](http://api.jquery.com/mouseenter/)和[mouseleave](http://api.jquery.com/mouseleave/)事件。

使用这两个事件的快捷方式也是使用[.focus(fn1, fn2)](http://api.jquery.com/focus/)，其中 fn1 是 mouseenter 回调， fn2 是 mouseleave 回调

```
jQuery(function($){
    var groupTab = $("ul").children("li");  
    groupTab.hover(function(){
        if(!($(this).children("a").hasClass("current")))
        {
            $(this).siblings("li").children("a").removeClass("hoverBG");            
            $(this).children("a").addClass("hoverBG");
        }                   
    },function(){
        $(this).children("a").removeClass("hoverBG");               
    });         
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/eADCL/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T07:17:16.453

我已更新您的代码以使用`mouseenter`和`mouseleave`事件。

[http://jsfiddle.net/mchail/uVsEQ/1/](http://jsfiddle.net/mchail/uVsEQ/1/)

此示例应该按您的预期工作。要学习的主要内容是，当您将鼠标悬停在其**子**`mouseout`元素之一上时，它将触发该元素。

 **`mouseout`在此处阅读有关事件传播以及与`mouseleave`此处的区别的更多信息： [https ://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/mouseout](https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/mouseout)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T12:38:46.490

我们可以使用 mouseover 和 mouseout 函数，如下例： //HTML

```
<div class="">
<ul class="" id="">
    <li class=" ">
        <a class="current" href="#" >
            <span class="">MyName</span>
            <br>
            <span class="">MyData</span>
        </a>
    </li>
    <li class="" >
        <a class="" href="#" >
            <span class="">MyName</span>
            <br>
            <span class="">MyData</span>
        </a>
    </li>
    <li class="" >
        <a class="" href="#">
            <span class="">MyName</span>
            <br>
            <span class="">MyData</span>
        </a>
    </li>
</ul>
</div> 
```

//CSS

```
<style type="text/css">
ul{
    list-style-type:none;
}
li{
    background-color:#DCDEDB;
    border:1px solid black;
    padding:20px;
}
.hoverBG{
    background-color:red;
}
</style> 
```

//jQuery

```
$(function(){
    $("ul").children("li").each(function() {    
        $(this).mouseover(function(){
            $(this).find('a').addClass('hoverBG');
        });
        $(this).mouseout(function(){
            $(this).find('a').removeClass('hoverBG');
        });
    });
}); 
```**

# php - How To Produce Multidimensional Array From While Loop?

> ID：16099033
> 
> 赞同：0
> 
> 时间：2013-04-19T07:03:09.357
> 
> 标签：php, mysql

I have this function :

```
function userKids(mysqli $Con, $Parent) {
    $stmt = $Con->prepare('SELECT KidsName, KidsAge, KidsGender FROM Kids WHERE Parent = ?');
    $stmt->bind_param('s', $Username);
    $stmt->execute();

    $Kid = null;
    $Kids = array();
    $stmt->bind_result($Kid, $KidsAge, $KidsGender);
    while($stmt->fetch()) {
        $Kids[] = $Kid;
    }
    return $Kids;
} 
```

currently my WHILE loop produce array like this :

```
Array ( [0] => john [1] => jane ) 
```

Now, how to produce multidimensional array so I can get the Age and Gender as well, like this :

```
Array
(
[john] => Array
  (
  [0] => 3
  [1] => male
  )
[jane] => Array
  (
  [0] => 2
  [1] => female
  )
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:04:43.093

Change the line:

```
$Kids[] = $Kid; 
```

To:

```
$Kids[$Kid] = array($KidsAge, $KidsGender); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:06:26.383

I recommend that you use an associative array for the second dimension as well. So:

```
$Kids[$Kid] = array('age' => $KidsAge, 'gender' => $KidsGender); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T07:12:21.297

replace the end of your code by:

```
$stmt->bind_result($KidName, $KidAge, $KidGender);
while($stmt->fetch()) {
    $Kids[$KidName] = array($KidAge,$KidGender);
}
return $Kids; 
```

# sql-server - 实体框架的性能差异与许多包括

> ID：16099036
> 
> 赞同：0
> 
> 时间：2013-04-19T07:03:17.697
> 
> 标签：sql-server, entity-framework-5

在我的应用程序中，我有一个使用 25 个包含的大查询。我知道这可能有点过分，但它并没有给我们带来太多问题并且工作正常。如果我使用 EF 生成的查询并在数据库中手动运行它大约需要 500 毫秒，而 EF 使用大约 700 毫秒的代码从数据库中获取数据并构建对象结构，这是完全可以接受的。

然而，问题出在生产服务器上。如果我在那里手动运行查询，我会看到大约 500 毫秒的时间使用来获取数据，但实体框架现在使用大约 11000 毫秒来获取数据和构建对象，这当然无论如何都不好。

所以我的问题是：当在数据库上手动触发的查询大致相同时，这些极端差异的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:27:21.137

我最终以更“手动”的方式使用实体框架。

因此`dbContext.Set<T>`，我不得不手动使用一系列`dbContext.Database.SqlQuery<T>("select something from something else")`. 经过一些痛苦的编码将所有对象绑定在一起后，我在有问题的机器上对其进行了测试，现在它在所有机器上都按预期工作了。

所以我不知道为什么它在某些机器上工作而不是在其他机器上工作，但是当有大量包含时，似乎 EF 在某些机器设置上存在问题。

# android - 如何在 android 中为三星 Galaxy Note2 创建模拟器？

> ID：16099043
> 
> 赞同：2
> 
> 时间：2013-04-19T07:03:33.590
> 
> 标签：android

我为谷歌nexus开发了一个应用程序(720*1280,4.7",Android 4.0版)

但我的客户端设备是三星 Note 2（也是 720*1280，但 5.5 英寸，Android 版本是 4.0）

他说图像越来越模糊。

如何创建模拟器来检查三星 Note。

是否可以在三星 Note 的图形布局中检查我的 xml？

当两个设备都是 720*1280 时，我真的无法理解为什么会发生这种变化。

请帮我创建图形布局视图以检查三星 Note，我该如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:38:14.890

请参阅此处注释 2 的规格：

[http://www.gsmarena.com/samsung_galaxy_note_ii_n7100-4854.php](http://www.gsmarena.com/samsung_galaxy_note_ii_n7100-4854.php)

然后您可以使用这些值创建一个 AVD：

*   屏幕尺寸 5.55"
*   分辨率 720w x 1280h
*   密度 xhdpi
*   内存 2 GiB

它们具有相同的分辨率，但正如您已经说过的，屏幕尺寸不同，这很可能是您的问题的原因。

# java - 在内存中存储大量图形数据（原理）

> ID：16099044
> 
> 赞同：-1
> 
> 时间：2013-04-19T07:03:36.550
> 
> 标签：java, .net, qt, graphic

我正在为 2D 绘图开发具有使用图层功能的简单应用程序。我尝试了不同的平台（.NET、Java、QT...），但我总是遇到同样的问题。我无法理解如何有效地将所有图形图层/图像/位图存储在内存中，尤其是当画布（存储图形数据的每个对象）尺寸很大（如 3000x3000 像素左右）时。我想除了将每一层存储为图像/位图对象（或任何仍会消耗大量内存的颜色数据数组）之外别无他法。

我已经尝试过的：

*   将所有图层对象直接存储在内存中。我可以快速访问这些对象，但是如果画布尺寸太大并且有很多图层对象，程序经常由于内存使用溢出而崩溃。
*   仅将“活动”层对象存储在内存中，同时将所有其他层缓存在硬盘上。但是每次用户绘制笔画以重建新的最终“可见”图像时，我仍然需要访问所有图层对象。而且当我从硬盘访问所有缓存的图层对象时，它真的很慢，因为我需要将它们一个一个地重新分配到内存中，然后将它们杀死。
*   压缩所有图层对象中的图形数据并将其存储在内存中。但是同样，当我每次需要重建最终的可见图像时，我都必须将图形数据逐个解压缩，这也很慢。

那么存储大量图形对象的正确方法是什么？像 Photoshop 这样的流行软件如何能够处理许多大图层并且仍然可以快速运行？有人知道吗？

- - 解决方案 - -

好的！感谢 evilruff，我解决了这个问题。看起来当我从缓存文件中读取一小部分所需的层时，内存分配的速度比我尝试分配整个层时快得多。

这是我所做的：

*   在图层对象初始化时，我在硬盘驱动器上创建新文件，填充零字节（透明像素）。这样，图层的图形数据就不会存储在内存中。
*   当我需要从图层对象获取位图/图像切片时，我会传递切片区域坐标。layer-object 中的方法创建新的空位图/图像并将其“位”替换为缓存文件的数据，从根据区域的正确步幅和位置开始。
*   在完成对位图/图像的所有操作后，我将其传递回另一个图层对象的方法，该方法使用位图/图像的新“位”更新缓存文件。之后，我只是从内存中刷新位图/图像。

工作速度非常快，内存中只分配了一个可见的位图/图像。

不好的一面：每一层的缓存文件仍然占用硬盘空间。但如今，当每个人都有大硬盘时，这并不重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:27:34.277

好吧，这取决于..您的图纸的性质是什么？它们最初是基于矢量的（例如地图、图表等）还是您使用一组栅格图像并将其作为一组图层？

# wordpress - wordpress 网站中的 home_url() 链接被重定向到其他一些 url

> ID：16099046
> 
> 赞同：0
> 
> 时间：2013-04-19T07:03:42.123
> 
> 标签：wordpress

我在wordpress（wordpress 3.5）中开发了一个网站，最初所有的链接都是这样的：`http://localhost:1053/wp` 后来，为了让其他计算机（内部网之外）可以访问它，我用一个类似的url映射它：`http://somesite.com/wp`

我在管理区域的**设置->常规**页面中更改了 WordPress 地址 (URL) 和站点地址 (URL)。我还更改了导航中的链接（在需要的地方）。

现在，问题是当我点击徽标（链接）时，它会将我重定向到其他一些网址（`http://somesite.com:1053/wp`）。搜索表单的操作也会发生这种情况。

我`<?php echo home_url(); ?>`在href中使用过。当我在页面源中检查它时，href 显示`http://somesite.com/wp` 但它仍然被重定向到`http://somesite.com:1053/wp`

所有其他相关链接都工作正常。

我不明白出了什么问题。

任何帮助将不胜感激。

谢谢

[解决了]

`<?php echo home_url(); ?>`我通过用 this替换语句解决了这个问题`<?php echo esc_url( home_url( '/' ) ); ?>`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:51:30.520

运行这个坏男孩：http: [//interconnectit.com/products/search-and-replace-for-wordpress-databases/](http://interconnectit.com/products/search-and-replace-for-wordpress-databases/)

它将在您的数据库上运行完整的查找和替换（旧 url 到新 url），以及更新序列化数组的长度。完成后请确保将其删除！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T05:20:34.010

我通过替换解决了这个问题

```
<?php echo home_url(); ?> 
```

经过

```
<?php echo esc_url( home_url( '/' ) ); ?> 
```

现在可以了。

# weblogic - 创建一个简单的表格

> ID：16099047
> 
> 赞同：-1
> 
> 时间：2013-04-19T07:03:45.917
> 
> 标签：weblogic, oracle-adf, jdeveloper

我正在寻找一些关于使用 Oracle ADF 和 JDeveloper 创建简单表单的教程。我无法在互联网上找到任何相关材料。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:10:36.227

您是否尝试过[http://oracle.com/JDev](http://oracle.com/JDev)？例如：http: [//download.oracle.com/docs/cd/E18941_01/tutorials/jdtut_11r2_55/jdtut_11r2_55_1.html](http://download.oracle.com/docs/cd/E18941_01/tutorials/jdtut_11r2_55/jdtut_11r2_55_1.html)

# iphone - 如何为现有的核心数据实体添加更多属性？

> ID：16099055
> 
> 赞同：24
> 
> 时间：2013-04-19T07:04:22.843
> 
> 标签：iphone, ios, core-data

我有一个使用核心数据的项目，我需要向现有实体（列）添加更多属性（列），如果我手动将属性添加到数据模型应用程序崩溃，这是由于我用来将数据插入表中的上下文保存之前

请帮助..谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-26T19:36:13.757

所以我的问题是我不知道这个持久存储协调器代码的去向。事实证明，`AppDelegate`当您在创建项目时选中“使用核心数据”时，它会在您的实现中自动创建。

[因此，从这里](https://stackoverflow.com/a/16099228/2124026)的第二个链接，您需要做的所有轻量级迁移（添加新属性等）如下：

1.  选择您的 .xcdatamodeld
2.  从菜单中，选择编辑器 -> 添加模型版本
3.  将新版本命名为您想要的任何名称，在“基于模型”中选择以前的版本
4.  在 .xcdatamodeld 的 File Inspector 中，选择 Model Version -> Current -> your new model version
5.  在 Project Navigator 中的 .xcdatamodeld 中选择新模型版本，然后对模型进行更改
6.  如果您更改了属性名称或类型，请创建映射模型，新文件 -> 核心数据 -> 映射模型 -> 选择源和目标模型版本
7.  更新新映射模型中的映射

如下更改您的 AppDelegate 持久存储协调器代码。

```
lazy var persistentStoreCoordinator: NSPersistentStoreCoordinator? = {
  var coordinator: NSPersistentStoreCoordinator? = NSPersistentStoreCoordinator(managedObjectModel: self.managedObjectModel)
  let url = self.applicationDocumentsDirectory.URLByAppendingPathComponent("<data model name>.sqlite")
  var error: NSError? = nil
  var failureReason = "There was an error creating or loading the application's saved data."
  let options = [
    NSMigratePersistentStoresAutomaticallyOption: true,
    NSInferMappingModelAutomaticallyOption: true]
  if coordinator!.addPersistentStoreWithType(NSSQLiteStoreType, configuration: nil, URL: url, options: options, error: &error) == nil {
      coordinator = nil
      // Report any error we got.
      var dict = [String: AnyObject]()
      dict[NSLocalizedDescriptionKey] = "Failed to initialize the application's saved data"
      dict[NSLocalizedFailureReasonErrorKey] = failureReason
      dict[NSUnderlyingErrorKey] = error
      error = NSError(domain: "YOUR_ERROR_DOMAIN", code: 9999, userInfo: dict)
      // Replace this with code to handle the error appropriately.
      // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
      NSLog("Unresolved error \(error), \(error!.userInfo)")
      abort()
  }

  return coordinator
}() 
```

因此，您只需在`addPersistentStoreWithType`调用中添加迁移选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T20:31:16.667

如果您只是向实体添加属性，则可以使用 Core Data 中的自动[轻量级迁移](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html)。

基本上，您要做的就是`NSDictionary`在添加持久商店时通过适当的选项传递实例。这是访问器方法末尾的代码片段`_persistentStoreCoordinator`：

```
NSNumber *optionYes = [NSNumber numberWithBool:YES];
NSDictionary *options = [NSDictionary dictionaryWithObjects:@[optionYes] forKeys:@[NSMigratePersistentStoresAutomaticallyOption]];
if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error]) {
    NSLog(@"Error opening persistent store: %@, %@", error, [error userInfo]);
    abort();
}
return _persistentStoreCoordinator; 
```

如果您的迁移对于轻量级迁移来说过于复杂，您会看到一个错误。否则迁移应该运行并且您的数据库将被更新以匹配您的新架构。

请注意，如果您在设备上实际执行此操作，则应首先备份 .sqlite 文件，以防迁移时出现问题。

# sql - 从 SQL 转换为 Linq

> ID：16099057
> 
> 赞同：0
> 
> 时间：2013-04-19T07:04:27.767
> 
> 标签：sql, linq

我对整个 Linq 故事很陌生，但我对 SQL 有很好的理解。

我需要重建从 SQL 到 Linq 的查询。我的 SQL 查询运行良好，到目前为止，我尝试用 Linq 自己做一些事情，但没有一个好的结果......

是否有人可以帮助我将此查询从 SQL 转换为 Linq？
我真的准备好在整个故事中学习新的东西了。如果你能知道为什么它在 linq 中会这样工作，那就太好了。

SQL 语句

```
SELECT TimeReport.EntryDate
     , SUM(TimeReport.Hours) AS Hours
     , SUM(BillingRate.HourlyRate * TimeReport.Hours) AS Amount
FROM BillingRate 
    INNER JOIN Activity 
        ON BillingRate.BillingRateId = Activity.BillingRateIt 
        INNER JOIN TimeReport 
            ON Activity.ActivityId = TimeReport.ActivityId 
                RIGHT OUTER JOIN Dossier 
                    ON TimeReport.DossierId = Dossier.DossierId
                    INNER JOIN LBU 
                        ON Dossier.LBUId = LBU.LBUId 
                    INNER JOIN BU 
                        ON Dossier.BUId = BU.BUId 

GROUP BY TimeReport.EntryDate
HAVING SUM(TimeReport.Hours) > 0
ORDER BY TimeReport.EntryDate desc 
```

我对 Linq 感到厌倦的地方

```
var x = (from br in ctx.BillingRate
                    join a in ctx.Activity on br.BillingRateId equals a.BillingRateIt
                    join tr in ctx.TimeReport on a.ActivityId equals tr.ActivityId

                    select br)
                  .GroupJoin(
                     (from d in ctx.Dossier
                       join l in ctx.LBU on d.LBUId equals l.LBUId
                       join b in ctx.BU on d.DossierId equals 
```

感谢您的帮助和快速答复。

我感谢每一个努力！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:19:45.577

当您有导航属性时，连接不是必需的。由于我不确切知道您的模型是什么样的，因此请使用以下内容作为起点并根据您自己的规格进行调整：

```
// starting with Dossier handles the right outer join condition
var timeRecordQuery = 
        from d in ctx.Dossier
        from tr in d.TimeReports
        // this handles the inner join conditions after the right outer join
        where d.LBUId.HasValue && d.BUId.HasValue
        // project what you want to use
        select new 
        {
            EntryDate = tr.EntryDate,
            Hours = tr.Hours,
            // simply use navigation properties, no need to join
            Amount = tr.Activity.BillingRate.HourlyRate * tr.Hours 
        };

var resultsQuery = from e in timeRecordQuery
                   // group by EntryDate
                   group e by e.EntryDate into g
                   // get sum of hours for each EntryDate value
                   let hours = g.Sum( x => x.Hours ) 
                   // having clause
                   where hours > 0
                   // project results
                   select new 
                   {
                       EntryDate = g.Key,
                       Hours = hours,
                       Amount = g.Sum( x => x.Amount ) 
                   }; 
```

# mongodb - 120 个 mongodb 集合与单个集合 - 哪个更有效？

> ID：16099058
> 
> 赞同：21
> 
> 时间：2013-04-19T07:04:39.013
> 
> 标签：mongodb, collections, sharding

我是 mongodb 的新手，我在 DB Schema 设计方面面临两难境地：

我应该创建一个集合还是将我的数据放入多个集合中（我想我们可以称之为这些类别）。

现在我知道有人问了很多这样的问题，但我相信我的情况有所不同，原因有两个：

*   如果我要收集很多系列，我将不得不创建大约 120 个，仅此而已。这在未来不会增长。
*   我知道我永远不需要查询或插入多个集合。我总是只需要查询一个，因为集合 X 中的文档与存储在其他集合中的任何文档都不相关。文档可能包含对数据库其他部分的引用（如 userId 等）。

所以我的问题是：这 120 个集合能否提高查询性能？在我的情况下，这是一个有用的优化吗？

还是我应该只进行单一收集+分片？

每个集合预计包含数百万个文档。如果只使用一个，它将存储数十亿个文档。

提前致谢！

- - - - 编辑：

感谢您的精彩回答。

事实上，这 120 个系列只是一个自制的限制，并不是真正的最佳选择：

集合中的数据与网络发布者有关。可能有数百万个（任何网站都可以加入）。

我想理想的情况是我可以为每个发布者创建一个集合（仅保存他们的数据）。但显然，由于 mongo 的限制，这是不可能的。

所以我想出了固定数量的集合的想法，至少以某种方式分发数据。比如：集合“A_XX”将保存名称以“A”开头的发布者的 XX 平台相关数据。等等。我们只支持其中的几个平台，所以 120 个集合应该绰绰有余。

在另一个网站上，有人建议使用许多数据库而不是许多集合。但这意味着开销，然后我将不得不使用/管理许多不同的连接。

你怎么看待这件事？有更好的解决方案吗？

抱歉，我的原始问题不够具体。

提前致谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-19T13:49:06.607

### 单分片集合

问题的编辑版本使实际要求更加清晰：您有一个可能会变得非常大的集合，并且您想要一种对数据进行分区的方法。人工收集限制是您自己计划的分区方案。

在这种情况下，我认为您最好使用单个集合并利用 MongoDB 的[自动分片](http://docs.mongodb.org/manual/sharding/)功能根据需要将数据和工作负载分配到多个服务器。多个集合仍然是一种有效的方法，但与利用核心 MongoDB 功能相比，它会使您的应用程序代码和部署变得不必要地复杂化。假设您[选择了一个好的 shard key](http://docs.mongodb.org/manual/core/sharded-cluster-internals/#shard-keys)，您的数据将在您的分片之间自动平衡。

您不必立即分片；您可以推迟决定，直到您看到您的工作负载实际上需要更多的写入规模（但知道在需要时可以选择该选项）。在决定分片之前，您还有其他选择，例如升级您的服务器（尤其是磁盘和内存）以更好地支持您的工作负载。相反，您不想等到系统被工作负载压垮后再进行分片，因此您肯定需要监控增长。我建议使用10gen 提供的免费[MongoDB Monitoring Service (MMS) 。](https://mms.10gen.com/)

> 在另一个网站上，有人建议使用许多数据库而不是许多集合。但这意味着开销，然后我将不得不使用/管理许多不同的连接。

多个数据库将显着增加管理开销，并且可能会过度杀伤并且可能对您的用例有害。存储是在数据库级别分配的，因此 120 个数据库将比具有 120 个集合的单个数据库消耗更多的空间。

### 固定数量的集合（原始答案）

如果您可以计划固定数量的集合（根据您的原始问题描述为 120 个），我认为采用这种方法比使用单一集合更有意义。

**注意**：下面的设计注意事项仍然适用，但是由于更新了问题以澄清多个集合是一种尝试的分区方案，因此对单个集合进行分片将是一种更直接的方法。

使用单独集合的动机是：

*   您的单个大型集合的文档可能必须包含一些集合子类型的指示，这可能需要添加到多个索引中，并且可能会显着增加索引大小。对于单独的集合，子类型已经隐含在集合命名空间中。

*   在集合级别启用分片。单个大型集合只为您提供“全有或全无”的方法，而单个集合允许您控制需要分片的数据子集并选择更合适的分片键。

*   您可以使用[`compact`](http://docs.mongodb.org/manual/reference/command/compact/)to 命令对单个集合进行碎片整理。 **注意：** `compact`是一个阻塞操作，因此对于 HA 生产环境的正常建议是部署副本集并使用滚动维护（即先压缩辅助节点，然后降级并压缩主节点）。

*   MongoDB 2.4（和 2.2）目前具有数据库级别的写锁粒度。在实践中，这对于绝大多数用例来说都不是问题，但是如果需要，多个集合可以让您更轻松地将高活动集合移动到单独的数据库中。

*   更进一步说 .. 如果您将数据放在单独的集合中，这些将能够利用集合级锁定的未来改进（请参阅MongoDB Jira 问题跟踪器中的[SERVER-1240](https://jira.mongodb.org/browse/SERVER-1240)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:52:43.843

这里的主要问题是，如果将集合分离到同一个数据库中，在当前 MongoDB 版本中将获得非常少的性能。要在单个集合设置上获得任何类型的额外性能，您需要将集合移出到单独的数据库中，然后您将有操作开销来判断您应该查询的数据库等。

所以是的，你可以轻松地进行 120 个集合，但是，由于以下原因，你目前不会真正获得任何东西：[https](https://jira.mongodb.org/browse/SERVER-1240) ://jira.mongodb.org/browse/SERVER-1240没有被实施（很快）。

在一个集合中容纳数十亿个文档还不错。我假设即使您将其存放在单独的集合中，它也可能不会在单个服务器上，就像对单个集合进行分片一样，因此在这种情况下，由于多服务器设置而导致的任何速度降低也无关紧要。

在我个人看来，使用单个集合在所有事情上都更容易。

# c - 在 CUDA 中使用带有结构数组的常量内存

> ID：16099060
> 
> 赞同：0
> 
> 时间：2013-04-19T07:04:54.290
> 
> 标签：c, struct, cuda, constants

我尝试将结构数组传递给常量内存，但我有同样的问题。首先，我的结构是：

```
#define point_size 1024

struct Point {
    short x;
    short y;

    Point (short xx, short yy){
        x = xx;
        y = yy;
    }

    Point (){
        x = 0;
        y = 0;
   }
}; 
```

当我使用以下声明时，出现编译错误：**无法为设备上的非空构造函数或析构函数生成代码**

```
__constant__ Point points_once[point_size]; 
```

当我使用以下声明时，这个奇怪的一面消失了。但是，它对我无效。

```
__constant__ Point *points_once[point_size]; 
```

我怎么解决这个问题。感谢您的帮助。我使用带有 compute_30 和 sm_30 配置的最新驱动程序和 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:56:26.027

这个问题本质上是这个问题的[副本](https://stackoverflow.com/questions/12115914/declaring-device-constant-in-terms-of-another-constant)。请查看那里的答案以解释为什么会发生这种情况。

作为一种解决方法，您可以使用其他答案中讨论的直接赋值的定义常量（即不在构造函数中），或者您可以简单地省略构造函数初始化，并使用单独的基于主机的例程来初始化`__constant__`区域您希望使用[cudaMemcpyToSymbol](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__MEMORY_1g2a229a704ade54887f7784e2e2dbd895)的值。

由于指针数组实际上并未分配结构存储，因此在您的第二个示例中未调用构造函数，并且没有问题，因此您看不到错误消息。

# php - phpexcel 在while循环中将行追加到一个单元格中

> ID：16099063
> 
> 赞同：1
> 
> 时间：2013-04-19T07:05:06.117
> 
> 标签：php, phpexcel

我有一个查询，它给了我 4 个记录集的输出，例如：

```
 |1  |Tree       |
    |2  |Apple      |
    |3  |Orange     |
    |4  |Strawberry | 
```

在我的 PHP 文件中，我正确地得到了这些输出。现在我想在像 A8 一样在一个 Excel 单元格中导出后获取所有这 4 个记录集，但我只得到最后一个记录集

```
 |4  |Strawberry | 
```

我不知道为什么它不起作用。这是我的代码：

```
 $MRabfrage = "SELECT motif_regularisation 
                        FROM regul_stock_devise
                        WHERE regul_stock_devise.date_regularisation = '$dreg'";

    $MRergebnis = mysql_query($MRabfrage) or die("Query failed with error: ".mysql_error());

    while($rowM = mysql_fetch_array($MRergebnis))
        {
            $motif        =   $rowM['motif_regularisation'];

            $objWorksheet->setCellValue('A8', $motif."\n");
            $objWorksheet->getStyle('A8')->getAlignment()->setWrapText(true);
            $rowM++;
        } 
```

如何解决这些问题？

提前 THX

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:31:15.860

Do you want to get this?

```
+--------+-----------+
|4       |Tree       |
|        |Apple      |
|        |Orange     |
|        |Strawberry |
+--------+-----------+ 
```

You need to append value, not overwrite it, in each iteration:

```
$prev_value = $objWorksheet->getCell('A8')->getValue();
$objWorksheet->setCellValue('A8', $prev_value.$motif."\n"); 
```

# ruby - Ruby 保留类方法名称

> ID：16099073
> 
> 赞同：0
> 
> 时间：2013-04-19T07:06:06.057
> 
> 标签：ruby

在 Ruby 中，有没有保留或具有默认含义的方法？我最近发现这`initialize`是一个。在命名我的方法时，我还应该注意哪些其他事项？（VI 没有给我其他 IDE 为保留名称提供的着色线索。）

特别是在其他语言中有意义的名称，如`run`, `main`, `toString`,`onExit`等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:08:48.863

您总是可以看到每个类默认实现的方法列表：

```
class Try
end

t = Try.new
puts t.methods.sort 
```

编辑：实际上您可能还想查看私有方法（在哪里`initialize`）：

```
puts t.private_methods.sort 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:10:31.637

[还可以在此处查看](http://www.java2s.com/Code/Ruby/Language-Basics/Rubysreservedwords.htm)保留关键字列表

如果你在 Rails 中工作，你可能还想看看[这个列表](https://reservedwords.herokuapp.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:29:40.300

你应该知道那些：

[`keywords`](http://www.ruby-doc.org/docs/keywords/1.9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-19T12:09:37.727

尽管没有什么可以阻止声明类似`public`or的方法`private`，但我强烈建议不要使用核心类中定义的任何方法名称，例如`Object`and `Module`。否则可能会发生奇怪的事情：

```
class Message
  def self.private
    puts 'private'
  end

  private
end

Message.private 
```

输出：

> 私人私人

类的私有类方法`Module`被重新定义为公共。

# javascript - 如何从 MVC 中的 javascript 调用服务器端函数？

> ID：16099074
> 
> 赞同：3
> 
> 时间：2013-04-19T07:06:15.083
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3

我正在对我的 MVC 应用程序进行修改，以禁止用户在单个会话中打开多个选项卡/窗口。为了做到这一点，我正在参考[**这篇文章（单击此处） 。**](http://www.codeproject.com/Articles/35859/Detect-and-prevent-multiple-windows-or-tab-usage-i?msg=4506432#xx4506432xx)本文是为 asp.net 编写的，而我需要为 ASP.NET MVC 实现此功能。我认为这一切在 MVC 中应该是可能的，但是，我不确定我应该怎么做才能重新编写它

```
if(window.name != "<%=GetWindowName()%>") 
```

GetWindowName() 是我在控制器中创建的函数，它从 Session 对象返回“WindowName”键的值。如何在上面的 javascript 中读取它的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T07:11:24.667

您可以为此编写一个控制器方法：

```
public ActionResult GetWindowName()
{
  Session["WindowName"] = 
    Guid.NewGuid().ToString().Replace("-", "");
  return Json(Session["WindowName"].ToString());
} 
```

然后通过ajax调用它：

```
$.get('@Url.Action("GetWindowName")', function(data){
    if(window.name != data) {
        // do what you need to do here
    }
}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T07:10:29.250

您可以为此使用ajax（jQuery）：

```
$.get('@Url.Action("GetWindowName")', function(result){
    if(window.name != result)
    //...
}); 
```

这是剃刀语法...

# silverlight - 为什么 Silverlight 5 不服从 HTTP 302 消息

> ID：16099078
> 
> 赞同：0
> 
> 时间：2013-04-19T07:06:25.810
> 
> 标签：silverlight, post, httpclient

我在 Silverlight 5 中编写了一个用 C# 编写的应用程序（使用 VWD 2012）。

此应用程序使用 HttpClient GetAsync 和 PostAsync 请求“登录”到网站（非常合法）。

但是..当我运行应用程序并遇到一个返回 HTTP 302 响应的网站（即“对象移至此处”）时，我的应用程序只是挂起并且不会“跟随”响应重定向到新 URL。

我怎么知道问题出在 Silverlight 5 上？

因为当我在 Silverlight 5 之外运行相同的应用程序（例如作为控制台应用程序）时，它可以正常工作。

我怎么知道是这些 302 消息有问题？

因为当我在 Silverlight 5 内部运行这个相同的应用程序到另一个不返回 302 的网站时，它可以正常工作。

我是否尝试使用 'catch (HttpRequestException hre)' 或仅使用 'catch' 来捕获错误？是的，但似乎没有发现或捕获错误 =:O((

以下是违规行：

```
try
{
    HttpResponseMessage response = await client.PostAsync(uriPOST, content); // This 'hangs'
}
catch (HttpRequestException hre)   // Nothing is ever caught
{
    Console.WriteLine(hre.ToString());
}
catch (Exception ex)               // Nothing is ever caught
{
    Console.WriteLine(ex.ToString());
} 
```

我有一个真正的安全证书附加到 Silverlight 5 应用程序（它工作得很好，因为我可以访问不返回 302 的网站）......

我在 HTTPClient 处理程序中将“AllowAutoRedirect”设置为“true”。

有任何想法吗？为什么这在 Silverlight 5 之外有效，但在 Silverlight 5 内无效？

# oop - 如何将类型标签附加到 Scheme 中的闭包？

> ID：16099081
> 
> 赞同：1
> 
> 时间：2013-04-19T07:06:33.133
> 
> 标签：oop, object, scheme

如何将任意标签附加到 Scheme 中的闭包？

以下是我想用它来做的几件事：

(1) 标记提供接口的闭包，为它们所代表的内容生成一个字符串，就像[@kud0h在](https://stackoverflow.com/users/2053774/kud0h)[这里](https://stackoverflow.com/questions/15892214)要求的那样。一般`->string`过程可能包括如下代码：

```
(display (if (stringable? x)
             (x 'string)
             x)
         str-port) 
```

(2) 更一般地，确定闭包是否是遵守通用对象接口规则的“对象”，或者可能告诉对象的类（类似于[@KPatnode在](https://stackoverflow.com/users/2062731/kpatnode)[此处](https://stackoverflow.com/questions/16051518/using-let-variables-in-a-lambda-in-scheme/16053212#16053212)询问的内容）。

我不能通过调用一个过程来查询它是否支持某个接口，因为如果它不支持一个已知的接口，调用该过程会产生不可预知的结果，很可能是运行时错误。

[Chez Scheme](http://www.scheme.com/csug8/objects.html#./objects:s60)具有允许您向符号添加键和值的过程`putprop`。`getprop`但是，闭包可以是匿名的，也可以绑定到不同的符号，因此我更愿意将调用约定标记附加到闭包本身，而不是绑定到的符号。

我现在唯一的想法是维护系统中所有“字符串”或“对象”闭包的全局哈希表。这似乎有点笨拙。有没有更简单、更优雅、更高效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:15:39.357

Racket 具有[适用的结构](http://docs.racket-lang.org/reference/procedures.html#%28def._%28%28lib._racket/private/base..rkt%29._prop~3aprocedure%29%29)：如果将实例用作函数，则可以为结构类型提供要调用的应用挂钩。

如果您想要一个更便携的解决方案，您可以使用哈希表将您的数据与某些过程相关联。但是，除非您的 Scheme 提供了弱哈希表，否则请记住，哈希表会阻止程序被垃圾收集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:55:55.943

我想你可能不想给程序本身贴标签，而是想看看[Racket 的对象系统](http://docs.racket-lang.org/guide/classes.html)，它有一个接口的概念。这听起来与您所追求的非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:12:43.873

你可以走极端并重新定义`lambda`语法。像这样的东西（但未经我测试）：

```
(define *properties* '())    ;; example only

(define-syntax lambda
  (let-syntax ((sys-lambda
                (syntax-rules ()
                  ((_ args body ...)
                   (lambda args body ...)))))
    (syntax-rules ()
      ((_ args body ...)
       (let ((func (sys-lambda args body ...)))
         (set! *properties*
               (cons (cons func '(NO-PROPERTIES))
                     *properties*))
         func))))) 
```

# ios - 如何为“评价此应用程序”ios 自定义 iRate 类

> ID：16099082
> 
> 赞同：1
> 
> 时间：2013-04-19T07:06:38.827
> 
> 标签：ios, uiview, irate

我不想将 uialertview 用于弹出窗口，这让用户有机会在 ios 上对应用程序进行评分。我想使用自定义的弹出窗口，但这没有出现。除了使用来自 Internet 的 iRate 类之外，我还创建了一个 xib，其中包含我想要显示的弹出窗口，并且我在 .h 中从 :NSObject 更改为 :UIViewController。我注释了 uialertview 的所有代码，并在将触发的方法 promptForRating 中，我使 xib 中的 uiview 可见，但显然 uiview 是 nil。

```
- (void)promptForRating
{
    rateView.hidden = NO;
} 
```

有人对让这个弹出窗口出现有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:09:16.797

我想我现在明白了.. 如果你想显示一个视图，它必须嵌入到一个视图控制器中。或者在另一个已经嵌入的视图中。

你能做的是

*   访问 UIApplication 的 sharedApplication
*   获取该 UIApplication 的所有 UIWindows（以相反的顺序，因为您的 myView 应该在顶部）
*   选择默认的 UIWindow
*   将您的 myView 添加为 UIWindow 的子视图

至少这是 SVProgressHUD 正在做的事情。

这是一些示例代码

```
if(!myView.superview){
    NSEnumerator *frontToBackWindows = [[[UIApplication sharedApplication]windows]reverseObjectEnumerator];

    for (UIWindow *window in frontToBackWindows)
        if (window.windowLevel == UIWindowLevelNormal) {
            [window addSubview:myView];
            break;
        }
} 
```

第一行是确保您的视图在 atm 不可见（在您的上下文中可能不需要）。要关闭视图，请将其从其父视图中删除。

# android - 如何在 Listview 中设置 OnClickListener 以发送到另一个活动

> ID：16099089
> 
> 赞同：5
> 
> 时间：2013-04-19T07:07:07.420
> 
> 标签：android, listview, onclicklistener

我正在制作一个使用 listview 的 android 应用程序，我有问题将 OnClickListener 放在我创建的 listview 中以便转到另一个活动，但我还没有找到解决方案。这是我的代码。

**CuacaNowActivity.java**

```
public class CuacaNowActivity extends Activity {

protected void onCreate(Bundle savedInstanceState) {

    ListView listViewKab;

    super.onCreate(savedInstanceState);
    setTitle("Jogja Now");
    setContentView(R.layout.cuacanow);

    KabupatenNow weather_data[] = new KabupatenNow[]{
        new KabupatenNow(R.drawable.ic_bantul, "Bantul"),
        new KabupatenNow(R.drawable.ic_gunungkidul, "Wonosari"),
        new KabupatenNow(R.drawable.ic_kulonprogo, "Wates"),
        new KabupatenNow(R.drawable.ic_sleman, "Sleman"),
        new KabupatenNow(R.drawable.ic_yogyakarta, "Yogyakarta")
    };

    KabupatenAdapter adapter = new KabupatenAdapter(this, R.layout.listkabupaten_row, weather_data);
    listViewKab = (ListView) findViewById(R.id.listViewKab);
    View header = (View) getLayoutInflater().inflate(R.layout.listviewheader, null);
    listViewKab.addHeaderView(header);
    listViewKab.setAdapter(adapter);
}
} 
```

**KabupatenAdapter.java**

```
public class KabupatenAdapter extends ArrayAdapter<KabupatenNow>{
Context context;
int layoutResourceId;
    KabupatenNow data[] = null;
    public KabupatenAdapter(Context context, int layoutResourceId, KabupatenNow[] data) {
        super (context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    //Viewing list Kabupaten in Yogyakarta with image in ListView
    public View getView (int position, View convertView, ViewGroup parent){
        View row = convertView;
        WeatherHolder holder = null;

        if (row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new WeatherHolder();
            holder.imgKabupaten = (ImageView) row.findViewById(R.id.imgKabupaten);
            holder.txtTitle = (TextView) row.findViewById(R.id.txtTitle);

            row.setTag(holder);
        }else{
            holder = (WeatherHolder) row.getTag();
        }

        KabupatenNow weather = data[position];
        holder.txtTitle.setText(weather.title);
        holder.imgKabupaten.setImageResource(weather.icon);
        return row;
    }

    static class WeatherHolder {
        ImageView imgKabupaten;
        TextView txtTitle;
    }
} 
```

**卡布帕滕现在**

```
public class KabupatenNow {

        public int icon;
        public String title;
        public KabupatenNow(){
            super();
        }

        public KabupatenNow(int icon, String title) {
            super();
            this.icon = icon;
            this.title = title;
        }
} 
```

这是xml代码

**cuacano.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/ic_background"
android:orientation="vertical" >

<ListView
    android:id="@+id/listViewKab"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:cacheColorHint="#00000000" >
</ListView>

</LinearLayout> 
```

**listviewheader.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<TextView
    android:id="@+id/txtHeader"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentTop="true"
    android:background="#8B0000"
    android:gravity="center_vertical"
    android:padding="10dp"
    android:text="Cuaca Kabupaten"
    android:textColor="#FFFFFF"
    android:textSize="22dp"
    android:textStyle="bold" />

</LinearLayout> 
```

**listkabupaten_row.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal" >

<ImageView
    android:id="@+id/imgKabupaten"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentTop="true"
    android:layout_marginBottom="5dp"
    android:layout_marginRight="15dp"
    android:layout_marginTop="5dp"
    android:gravity="center_vertical" />

<TextView
    android:id="@+id/txtTitle"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentTop="true"
    android:layout_marginBottom="5dp"
    android:layout_marginTop="5dp"
    android:gravity="center_vertical"
    android:textColor="#000000"
    android:textSize="22dp"
    android:textStyle="bold" />

</LinearLayout> 
```

listview 工作正常，但我想要的是当我点击菜单 Bantul 时，它会转到 BantulActivity 以及 Wonosari 和其他人。我可以这样实施我的项目吗？或者对我的项目有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:13:49.787

**在CuacaNowActivity.java**中添加这个

 **```
listViewKab.setOnItemClickListener(new OnItemClickListener() {
                        @Override
                        public void onItemClick(AdapterView<?> a, View v, int position,
                                long id) {

                     Intent intent = new Intent(CurrentActivity.this, TargetActivity.class);

                    startActivity(intent);
                            }
                    }); 
```

**编辑**

首先在`res/menu/main.xml`文件中添加项目以显示在我在`settings`这里添加的菜单中

前任：

**主要的.xml**

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/menu_settings"
        android:orderInCategory="100"
        android:showAsAction="never"
        android:title="@string/menu_settings"/>

</menu> 
```

然后在您的活动代码中：

```
 //it will show the menu
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    //it will open the new activity (Settings in my case) when selected
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

        boolean ret;
        try {

            if (item.getItemId() == R.id.menu_settings) {
                // Handle Settings
                Intent intent = new Intent(CurrentActivity.this, Settings.class);
                startActivity(intent);

                ret = true;

        } catch (Exception e) {
        }
        ret = super.onOptionsItemSelected(item);
        return ret;

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:09:56.917

对于`ListView`,`onClickListener`将不起作用，您需要实施`OnItemClickListener`

```
@Override
public void onItemClick(AdapterView<?> arg0, View view, int position, long arg3)
{
       // Perform operations based on the position.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:11:42.603

在项目点击列表中使用：

在 onCreate() 中试试这个`CuacaNowActivity`

```
listViewKab.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> parent, View view,int position, long id) {
  Intent in=new Intent(CuacaNowActivity.this,DetailActivity.class);
  startActivity(in)           
            }
        }); 
```**

# java - 在可展开列表视图中使用的按钮上设置侦听器

> ID：16099090
> 
> 赞同：0
> 
> 时间：2013-04-19T07:07:23.547
> 
> 标签：java, android, expandablelistview

我正在尝试使用可扩展列表。设计部分工作正常，但是当我在按钮上设置侦听器时，应用程序崩溃并显示一条消息：“不幸的是，您的应用程序已停止工作”。以下是供参考的应用程序详细信息，请如果有人知道如何在可扩展列表的父节点中的按钮上设置侦听器请告诉我。非常感谢提前：

应用程序清单文件：

```
<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.expandablelist.MyActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

主要活动 xml 布局文件：

```
 <LinearLayout
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
 <ExpandableListView 
  android:id="@+id/expandable_list"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:transcriptMode="alwaysScroll"
  android:cacheColorHint="#00000000"
  android:listSelector="@android:color/transparent">
 </ExpandableListView>
 </LinearLayout> 
```

父节点的xml布局文件：

```
 <LinearLayout
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:orientation="vertical" >
  <TextView
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:id="@+id/list_item_text_view"
   android:textSize="20sp"
   android:padding="10dp"
   android:background="#ff000000"
   android:textColor="#ffffffff"
   android:layout_weight="1"
   android:layout_marginLeft="35dp" />
  <Button
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:text="button"
   android:focusable="false"
   android:layout_gravity="right"
   android:focusableInTouchMode="false"
   android:id="@+id/button"/>

  </LinearLayout> 
```

子节点的xml布局文件：

```
 <LinearLayout
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:orientation="vertical" >

  <TextView 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:id="@+id/list_item_text_child"
   android:textSize="20sp"
   android:padding="10dp"
   android:background="#ff000000"
   android:layout_marginLeft="5dp"/>
  </LinearLayout> 
```

Mainactivity 命名为 Myactivity 代码：

```
package com.example.expandablelist;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.ExpandableListView;

public class MyActivity extends Activity {
private ExpandableListView mExpandableList;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_my);
mExpandableList = (ExpandableListView)findViewById(R.id.expandable_list);
ArrayList<Parent> arrayParents = new ArrayList<Parent>();
ArrayList<String> arrayChildren = new ArrayList<String>();
//here we set the parents and the children
for (int i = 0; i < 10; i++){
//for each "i" create a new Parent object to set the title and the children
Parent parent = new Parent();
parent.setTitle("Parent " + i);
arrayChildren = new ArrayList<String>();
for (int j = 0; j < 10; j++) {
arrayChildren.add("Child " + j);
}
parent.setArrayChildren(arrayChildren);
//in this array we add the Parent object. We will use the arrayParents at the       setAdapter
arrayParents.add(parent);
}

//sets the adapter that provides data to the list.
 mExpandableList.setAdapter(new MyCustomAdapter(MyActivity.this,arrayParents));

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_my, menu);
    return true;
}

} 
```

父类代码：

```
package com.example.expandablelist;
import java.util.ArrayList;
public class Parent {
// private String mTitle;
private String mTitle;
    private ArrayList<String> mArrayChildren;
    public String getTitle() {
  //return mTitle;
return mTitle;
}
 public void setTitle(String mTitle) {
   //this.mTitle = mTitle;
this.mTitle=mTitle;
  }

 public ArrayList<String> getArrayChildren() {
 //return mArrayChildren;
return mArrayChildren;
  }
  public void setArrayChildren(ArrayList<String> mArrayChildren) {
//this.mArrayChildren = mArrayChildren;
this.mArrayChildren=mArrayChildren;
  }

  } 
```

mycustomadapter 类的代码：

```
 package com.example.expandablelist;
  import java.util.ArrayList;

  import android.content.Context;
  import android.database.DataSetObserver;
  import android.view.LayoutInflater;
  import android.view.View;
  import android.view.ViewGroup;
  import android.widget.BaseExpandableListAdapter;
  import android.widget.TextView;

  public class MyCustomAdapter extends BaseExpandableListAdapter {
  private LayoutInflater inflater;
  private ArrayList<Parent> mParent;

  public MyCustomAdapter(Context context, ArrayList<Parent> parent){
  mParent = parent;
  //inflater = LayoutInflater.from(context);
  inflater=LayoutInflater.from(context);
  }

   @Override
   // //counts the number of group/parent items so the list knows how many times calls       getGroupView() method
  public int getGroupCount() {
  return mParent.size();
  }

  @Override
  //counts the number of children items so the list knows how many times calls    getChildView() method
 public int getChildrenCount(int i) {
 return mParent.get(i).getArrayChildren().size();
 }
 @Override
 //gets the title of each parent/group
 public Object getGroup(int i) {
 return mParent.get(i).getTitle();
 }

 @Override
 //gets the name of each item
  public Object getChild(int i, int i1) {
  return mParent.get(i).getArrayChildren().get(i1);
  }
  @Override
  public long getGroupId(int i) {
  return i;
  }

  @Override
  public long getChildId(int i, int i1) {
  return i1;
  }
  @Override
  public boolean hasStableIds() {
  return true;
  }

  @Override
  //in this method you must set the text to see the parent/group on the list
  public View getGroupView(int i, boolean b, View view, ViewGroup viewGroup) {

  if (view == null) {
  view = inflater.inflate(R.layout.list_item_parent, viewGroup,false);
  }
  TextView textView = (TextView) view.findViewById(R.id.list_item_text_view);
  //"i" is the position of the parent/group in the list
  textView.setText(getGroup(i).toString());
  //return the entire view
  return view;
  }

 @Override
 //in this method you must set the text to see the children on the list
 public View getChildView(int i, int i1, boolean b, View view, ViewGroup viewGroup) {
 if (view == null) {
 view = inflater.inflate(R.layout.list_item_child, viewGroup,false);
 }
 TextView textView = (TextView) view.findViewById(R.id.list_item_text_child);
  //"i" is the position of the parent/group in the list and 
 //"i1" is the position of the child
 textView.setText(mParent.get(i).getArrayChildren().get(i1));
 //return the entire view
 return view;
 }

 @Override
 public boolean isChildSelectable(int i, int i1) {
return true;
 }
 @Override
 public void registerDataSetObserver(DataSetObserver observer) {
 /* used to make the notifyDataSetChanged() method work */
 super.registerDataSetObserver(observer);
 }
} 
```

# c# - LINQ 中的隐式转换错误

> ID：16099091
> 
> 赞同：2
> 
> 时间：2013-04-19T07:07:25.900
> 
> 标签：c#, .net, linq

我有所有 ID 的列表。

//代码

```
List<IAddress> AllIDs = new List<IAddress>();
AllIDs= AllIDs.Where(s => s.AddressId.Length >= s.AddressId.IndexOf("_"))
              .Select(s => s.AddressId.Substring(s.AddressId.IndexOf("_")))
              .ToList(); 
```

我正在使用上述 LINQ 查询，但出现编译错误：

//错误

> 无法将类型 System.Collections.Generic.List 隐式转换为 System.Collections.Generic.List

我想`AddressId`根据字符“_”对成员字段进行子字符串操作。

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:09:55.697

您可以通过 where 找到所需的地址，然后从 id 中选择一些字符串。

```
s.AddressId.Substring(s.AddressId.IndexOf("_")) is string 
```

即 `Select(s => s.AddressId.Substring(s.AddressId.IndexOf("_"))).ToList()`；返回子字符串列表

只需将其删除并使用

```
AllIDs= AllIDs.Where(s => s.AddressId.Length >= s.AddressId.IndexOf("_")).ToList() 
```

作为

```
Where(s => s.AddressId.Length >= s.AddressId.IndexOf("_")) 
```

过滤 AllID 列表，但将它们保留为`IAddress`s

如果你重写是这样你应该能够看到问题是什么

你说

```
var items  = from addr in AllIds 
             where addr.AddressId.Length >= addr.AddressId.IndexOf("_") // filter applied
             select addr.AddressId.Substring(s.AddressId.IndexOf("_")); // select a string from the address

AllIDs = items.ToList(); // hence the error List<string> can't be assigned to List<IAddress> 
```

但你想要

```
var items  = from addr in AllIds 
             where addr.AddressId.Length >= addr.AddressId.IndexOf("_") // filter applied
             select addr;                        // select the address

AllIDs = items.ToList(); // items contains IAddress's so this returns a List<IAddress> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:17:16.740

如果你想`AddressId`用 Linq 查询更新，你可以这样做：

```
AllIDs.Where(s => s.AddressId.Length >= s.AddressId.IndexOf("_"))
      .ToList()
      .ForEach(s => s.AddressId = s.AddressId.Substring(s.AddressId.IndexOf("_"))); 
```

注意[.ForEach()](http://msdn.microsoft.com/fr-fr/library/vstudio/bwabdf9z.aspx)不是 Linq 扩展，而是 List<T> 类的方法。

由于 IndexOf 可能很耗时，请考虑缓存该值：

```
AllIDs.Select(s => new { Address = s, IndexOf_ = s.AddressId.IndexOf("_") })
      .Where(s => s.Address.AddressId.Length >= s.IndexOf_ )
      .ToList()
      .ForEach(s => s.Address.AddressId = s.Address.AddressId.Substring(s.IndexOf_ )); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:11:06.673

您的选择操作`.Select(s => s.AddressId.Substring(s.AddressId.IndexOf("_")))`不会修改您的对象，它将每个对象投影到一个子字符串。因此`.ToList()`返回一个`List<string>`.

# php - PHP计算格式化字符串中的元素

> ID：16099092
> 
> 赞同：-1
> 
> 时间：2013-04-19T07:07:30.767
> 
> 标签：php, arrays, string

这让我困惑了一天，所以我需要一些帮助。在给定的字符串中，例如以下：

```
$str = 'a:1:{s:8:"post_tag";a:5:{
i:460;a:5:{s:11:"wpseo_title";s:8:"demodemo";s:10:"wpseo_desc";s:8:"demodemo";s:13:"wpseo_bctitle";s:8:"demodemo";s:13:"wpseo_noindex";s:7:"default";s:21:"wpseo_sitemap_include";s:1:"-";}
i:459;a:5:{s:11:"wpseo_title";s:8:"testtest";s:10:"wpseo_desc";s:8:"testtest";s:13:"wpseo_bctitle";s:8:"testtest";s:13:"wpseo_noindex";s:7:"default";s:21:"wpseo_sitemap_include";s:1:"-";}
i:462;a:5:{s:11:"wpseo_title";s:7:"bikey77";s:10:"wpseo_desc";s:7:"bikey77";s:13:"wpseo_bctitle";s:7:"bikey77";s:13:"wpseo_noindex";s:7:"default";s:21:"wpseo_sitemap_include";s:1:"-";}
i:463;a:5:{s:11:"wpseo_title";s:7:"dimitra";s:10:"wpseo_desc";s:7:"dimitra";s:13:"wpseo_bctitle";s:7:"dimitra";s:13:"wpseo_noindex";s:7:"default";s:21:"wpseo_sitemap_include";s:1:"-";}
i:464;a:5:{s:11:"wpseo_title";s:8:"dimitra1";s:10:"wpseo_desc";s:8:"dimitra1";s:13:"wpseo_bctitle";s:8:"dimitra1";s:13:"wpseo_noindex";s:7:"default";s:21:"wpseo_sitemap_include";s:1:"-";}
}}'; 
```

如何计算以 i:XXX... 开头并以 ...;} 结尾的子字符串的数量？

子字符串示例：

`i:460;a:5:s:11:"wpseo_title";s:8:"demodemo";s:10:"wpseo_desc";s:8:"demodemo";s:13:"wpseo_bctitle";s:8:"demodemo";s:13:"wpseo_noindex";s:7:"default";s:21:"wpseo_sitemap_include";s:1:"-";}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:10:27.650

这是序列化数据，反序列化它

```
$arr = unserialize($str);
echo count($arr['post_tag']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:09:45.230

看起来你正在处理一个序列化数组，所以......

```
$data = unserialize($str);
echo count($data['post_tag']); 
```

# javascript - 检测主干模型更改以启用表单的保存按钮和更新模型

> ID：16099102
> 
> 赞同：2
> 
> 时间：2013-04-19T07:08:37.710
> 
> 标签：javascript, backbone-views

我的简单表单模板是这样的

```
<script type="text/template" id="template">
<form id="myForm " >
<fieldset>
    <label>Name</label>
    <input type="text" id="name" name="name" />
    <label>Age</label>
    <input type="text" id="age" name="age" />
            <input type="hidden" id="id" name="id"/>
</fieldset>
<a id="save" disabled >Save Changes</a> 
```

我的 bakbone 视图如下：

```
myView = Backbone.View.extend({
template: _.template( $("#template").html() ),
events: {
   "click #save" : "save",
},
bindings: {
        '#id': 'id',
        '#name': 'name',
        '#age': 'age'
},
initialize: function () {
    if(this.model){
        this.model.fetch();
    } 
    this.listenTo(this.model, 'all', this.render);
},
render: function () {           
    this.$el.html( this.template );
            this.stickit(); //used library http://nytimes.github.io/backbone.stickit/
},
save: function() {
    //how to do following
    //save model
    //if success, reset form to new value
    //if error, do not reset form and alert there is error in saving
} 
```

}

我的视图从这里初始化

```
RegionManager.show(new app.myView({
 model : new app.myModel(
 {id: 1})
})); 
```

在这里，我的表格成功地显示了带有姓名和年龄字段的表格。它们 [以禁用保存的形式](http://jsfiddle.net/AgnWS/)显示。这里表格被禁用。现在，当用户更改任何值时，它应该立即检测到并且应该启用保存按钮，并且应该看起来像这个[表单 save enabled](http://jsfiddle.net/LVxSq/)。只要用户将 y 附加到 mickey，就会启用此处的保存。现在，当用户单击保存时，如果成功则应保存，否则应提示错误。如果成功，它应该显示更新的表格。

我是骨干新手，并试图找出上述两种解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:41:41.717

一旦对表单进行了任何更改，stickit 将更新将触发更改事件的模型。您可以在`initialize`器以启用保存：

```
this.listenTo(this.model, 'change', function() { this.$('#save').prop('disabled', false); }); 
```

在保存时，您可以使用任何 jQuery ajax 回调和属性，因此您需要执行以下操作：

```
save: function() {
    if (!this.$('#save').prop('disabled')) {
        this.model.save({
            success: function() {
                // You don't really need to do anything here. If the model was changed in the
                // save process, then stickit will sync those changes to the form automatically.
            },
            error: function(model, xhr, options) {
                alert('Formatted error message. You can use the xhr.responseText, but that may not be user friendly');
            }
        });
    }
} 
```

另外，请查看我在原始帖子下的评论。

# java - 线程“主”org.springframework.beans.factory.BeanDefinitionStoreException 中的异常

> ID：16099105
> 
> 赞同：0
> 
> 时间：2013-04-19T07:08:48.923
> 
> 标签：java

这是我的主要课程，但它不起作用

main.java

```
package com.simpleclass;

import org.springframework.beans.factory.BeanFactory;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class Main {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        //load the beans.xml file from the project's classpath
        System.out.print("hi");
        ApplicationContext context =
            new ClassPathXmlApplicationContext(
                    "beans.xml");
        BeanFactory factory = (BeanFactory) context;    //build the factory

        //obtain the bean from factory
        HelloSpring helloSpring = (HelloSpring) factory.getBean("helloSpring");

        //Most of the heavy lifting is done by Spring, now use the helloSpring object as your wish
        helloSpring.sayHello();

    }

} 
```

豆类.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.springframework.org/schema/beans
 http://www.springframework.org/schema/beans/spring-beans-3.2.xsd">

 <bean id="helloSpring" class="com.simpleclass.HelloSpring">

 <property name="message" value="Hello Spring!" />
 </bean>

</beans> 
```

我想创建简单的 Spring 应用程序，但我可以启动应用程序，只需打印此错误发生的简单消息。谁能告诉我我需要做什么？谢谢

```
19 Apr, 2013 12:33:34 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [beans.xml]
Exception in thread "main" org.springframework.beans.factory.BeanDefinitionStoreException: Line 5 in XML document from class path resource [beans.xml] is invalid; nested exception is org.xml.sax.SAXParseException: Document root element "beans", must match DOCTYPE root "null".
org.xml.sax.SAXParseException: Document root element "beans", must match DOCTYPE root "null".
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.rootElementSpecified(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.handleStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.startElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$ContentDriver.scanRootElementHook(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at javax.xml.parsers.DocumentBuilder.parse(Unknown Source)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:126)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:125)
    at org.springframework.context.support.AbstractXmlApplicationContext.refreshBeanFactory(AbstractXmlApplicationContext.java:65)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:226)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:58)
    at com.simpleclass.Main.main(Main.java:17) 
```

# android - android - hackbook 的 Facebook 设置

> ID：16099111
> 
> 赞同：2
> 
> 时间：2013-04-19T07:09:10.913
> 
> 标签：android, facebook-graph-api

我是 facebook android sdk 的新手。我在示例中运行 Hackbook 应用程序，它运行良好。现在，我尝试使用 Hackbook App ID（即来自示例）检索 fb 帐户的帖子。这次它也工作正常。但是现在我在 fb 开发人员控制台中创建了该应用程序，并在 hackbook 中使用了该应用程序 ID 而不是旧 ID。这次我没有收到帖子的点赞和评论。为此，我在 fb 开发人员控制台中进行了操作。

1.  我在 facebook 开发人员中创建应用程序。
2.  我从 cmd 获取 keyhash 并将其设置在本机 android 应用程序中。
3.  我在权限选项卡中设置了 hackbook 中的所有权限，例如“offline_access”、“publish_stream”、“user_photos”、“publish_checkins”、“photo_upload”。

4.  为了检索帖子的点赞和评论，在 FB 中需要哪些权限以及我们为此做了什么？

5.  在下图中，默认情况下启用沙箱，在这种情况下，fb 登录不起作用。之后我将其设为禁用，然后只有 fb 登录在 th Hackbook 应用程序中工作。为什么？

![在此处输入图像描述](https://i.stack.imgur.com/CWpYM.png)

# python - 如何返回对应于字典中最小值的键列表

> ID：16099112
> 
> 赞同：8
> 
> 时间：2013-04-19T07:09:13.350
> 
> 标签：python, dictionary

假设我有一本总水果词典：

```
Fruits = {"apple":8, "banana":3, "lemon":5, "pineapple":2,} 
```

我希望输出是

```
["pineapple"] 
```

因为菠萝的价值最低。或者如果我有这个：

```
Colour = {"blue":5, "green":2, "purple":6, "red":2} 
```

输出将是：

```
["green","red"] 
```

因为绿色和红色的价值都最低。

那么如何返回字典中的最小值呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-19T07:17:06.957

可以做两遍：

```
>>> colour
{'blue': 5, 'purple': 6, 'green': 2, 'red': 2}
>>> min_val = min(colour.itervalues())
>>> [k for k, v in colour.iteritems() if v == min_val]
['green', 'red'] 
```

1.  找到字典值的最小值
2.  然后返回并提取该值所在的密钥...

另一种选择（需要一些导入，这意味着如果需要，您可以使用 n 个）-此代码只使用第一个（这将是最小值）：

```
from itertools import groupby
from operator import itemgetter

ordered = sorted(colour.iteritems(), key=itemgetter(1))
bykey = groupby(ordered, key=itemgetter(1))
print map(itemgetter(0), next(bykey)[1])
# ['green', 'red'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T07:22:24.723

我想说最好的选择是通过两次：

```
min_value = min(dict.values())
result = [key for key, value in dict.iteritems() if value == min_value] 
```

您可以通过显式循环进行单次传递：

```
result = []
min_value = None
for key, value in dict.iteritems():
    if min_value is None or value < min_value:
        min_value = value
        result = []
    if value == min_value:
        result.append(key) 
```

但这会更慢（可能在 PyPy 中除外）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T07:11:27.890

只是一个选择：

```
from collections import defaultdict
from operator import itemgetter

Fruits = {"apple":8, "banana":3, "lemon":5, "pineapple":2,}
Colour = {"blue":5, "green":2, "purple":6, "red":2}

def get_res(dVals):
    res = defaultdict(list)
    for k, v in dVals.items():
        res[v].append(k)
    return min(res.items(), key=itemgetter(0))[1]

print get_res(Fruits)
print get_res(Colour) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T07:24:53.133

```
colors = {"blue":5, "green":2, "purple":6, "red":2}# {"apple":8, "banana":3, "lemon":5, "pineapple":2,}

sorted_items = sorted(colors.items(), key=lambda t: t[1])
print (sorted_items)

min_val = sorted_items[0][1]

for t in sorted_items:
    if t[1] == min_val:
        print(t[0])
    else:
        break

--output:--
[('green', 2), ('red', 2), ('blue', 5), ('purple', 6)]

green
red 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T07:28:29.477

```
import itertools
def getmin(dictionary):
    gen = ((j,i) for i,j in dictionary.iteritems())
    items = sorted(gen)
    minimum = items.pop(0)
    rest = itertools.takewhile(lambda item:item[0]==minimum[0],items)
    return [x[1] for x in itertools.chain([minimum],rest)] 
```

此方法使用[schwartzian 变换](http://en.wikipedia.org/wiki/Schwartzian_transform)来利用本机排序（无需密钥）。它根据字典中键的值对项进行排序，取最小值，并取所有相同的项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-15T16:39:13.793

如我所见，它适用于这样的脏 lambda 函数：

```
min(Fruits,key=lambda x:Fruits[x]) 
```

我猜它只会返回一个值，但仍然相当不错。:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-03T13:52:31.163

```
ans =[min(Fruits, key=Fruits.get)]
print(ans) 
```

上面的代码在字典中查找与最小值对应的键。它找到 dictionary(Fruits) 的键，其中函数 Fruits.get(key) 等效于 Fruits[key] 返回最低可比较值。

对于具有最小值的多个键，首先从字典 Fruits 中获取最小值，然后使用 for 循环从字典中获取对应的键，如下所示。

```
min_value= min(Fruits.values())
ans= [key for key in Fruits if Fruits[key]==min_value]
print(ans) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-07-07T18:26:34.527

```
minimum = []      # creates empty list for all possible minimum keys
def min(dict):    # defines a function called minimum taking a argument dict
    m= min(dict.values())     # stating minimum value in dict
    for key, values in dict.items():     # iterating through key and values in items of dictionary
        if value == m:        # checking if value is minimum
            minimum.append(key)      # appending minimum values to the empty list created
    return minimum         # returning the list 
```

# android - 禁用 Android ListView 项目上的点击事件

> ID：16099113
> 
> 赞同：28
> 
> 时间：2013-04-19T07:09:17.023
> 
> 标签：android, listview, clickable

我正在尝试禁用列表视图上的多次单击事件，例如在按下第一次单击后，某些媒体会从 web 服务播放，而在播放时，其他项目需要`clickable==false`，在媒体播放后，其他列表项可以单击。

我正在尝试的是调用和`setClickable(true)`对象。`setClickable(false)``ListView`

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2014-05-29T12:27:53.253

在您的自定义 ArrayAdapter 覆盖 isEnabled 方法如下

```
@Override
public boolean isEnabled(int position) {
    return false;
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-04-19T07:23:00.060

使您自己的具有[AreAllItemsEnabled](http://developer.android.com/reference/android/widget/BaseAdapter.html#areAllItemsEnabled%28%29) () 返回 false 的 ArrayAdapter 子类，并定义[isEnabled(int position)](http://developer.android.com/reference/android/widget/BaseAdapter.html#isEnabled)以在您要禁用的项目中为给定项目返回 false。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-11-19T05:22:27.433

将此添加到 xml

```
android:listSelector="@android:color/transparent" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-15T12:14:32.773

为该列表创建适配器，并覆盖此方法

```
public boolean isEnabled(int position); 
```

然后`false`在您要禁用点击时返回

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-20T04:39:11.320

使用标志管理 Click 事件。

当您的媒体播放器运行时，使用此方法将 click 设置为 false。

```
setClickable(false); 
```

当您的媒体播放器停止或未运行或完成时，将该标志设置为默认值。

```
 setClickable(true); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-24T07:09:30.487

上面说的答案对我不起作用，所以我用`list.setEnabled(false)`它对我有用

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-07-12T16:20:14.357

在 onCreate 之前：

```
private long mLastClickTimeListViewItem = 0; 
```

防止多次单击 ListView 项

在listView的侦听器内创建onCreate之后，在我的例子中如下：

```
 listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            if (SystemClock.elapsedRealtime() - mLastClickTimeListViewItem < 1000){
                return ;
            }
            mLastClickTimeListViewItem = SystemClock.elapsedRealtime();

            //Do your remaining code magic below...
            ....
            ....

         } // end of onItemClick method   
    }); // end of setOnItemClickListner 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-01-21T19:15:24.820

listView.getChildAt(position).setEnabled(false);

listView.getChildAt(position).setClickable(false);

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-01-20T12:46:30.667

或者以简单的方式取消注册和注册**OnItemClickListener**可能是一个更好的主意。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-12-29T21:46:06.653

如果您想要的只是禁用可点击的项目并显示适当的选择器颜色，只需使用该行

android:listSelector="@android:color/transparent"

在布局文件（xml）中的列表视图中

# javascript - 如何检测一组元素中的哪一个低于窗口中心

> ID：16099116
> 
> 赞同：0
> 
> 时间：2013-04-19T07:09:26.483
> 
> 标签：javascript, jquery, positioning

寻找有关如何检测集合中的哪个元素当前位于视口中心的想法。

来自文档中相互堆叠的一组块级元素。如何检测其中哪些当前位于视口中心的假想固定位置十字准线下？

```
// 
```

起点：http: [//jsfiddle.net/Xbhcv/](http://jsfiddle.net/Xbhcv/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:31:47.643

First extract the centre position:

```
var center_x = Math.floor(window.innerWidth/2);
var center_y = Math.floor(window.innerHeight/2); 
```

Then iterate over all the elements you want to check and check if the `center_x` and `center_y` fall within them.

```
$(".detector").each(function(){
    x = $(this).offset().left;
    y = $(this).offset().top - $(document).scrollTop();
    w = $(this).width();
    h = $(this).height();
    if(center_x > x && center_y > y && center_x < x+w && center_y < y+h){
        // the $(this) element intersects with the centre
        $(this).attr('id')
    }
} 
```

and wrap this all in a `$(window).scroll` event.

[JSFiddle](http://jsfiddle.net/5XPQm/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:27:47.690

这可能更干净，但这基本上应该满足您的需要：

```
// How to get the id of the element .detector div currently under the crosshairs?
      var crosshairPositionTop = $(".crosshairs").offset().top,
                crosshairPositionLeft = $(".crosshairs").offset().left,
                detectorPositionTop, detectorPositionLeft;
        $(".detector").each(function() {
            detectorPositionTop = $(this).offset().top;
            detectorPositionLeft = $(this).offset().left;
            if (detectorPositionTop < crosshairPositionTop && detectorPositionLeft < crosshairPositionLeft) {
                console.log($(this).attr("id"))
            }
        }) 
```

[http://jsfiddle.net/Xbhcv/7/](http://jsfiddle.net/Xbhcv/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:40:18.353

这里有一些代码可以找到你的十字准线位置（绿色方块的确切中心），并循环遍历每个`detector`div 以查看哪个 div 包含它。它将包含的 div 打印到控制台并在屏幕上以红色突出显示。

[http://jsfiddle.net/mchail/Xbhcv/6/](http://jsfiddle.net/mchail/Xbhcv/6/)

# python - Z3：为什么这个数组理论使用返回 Unsat？

> ID：16099118
> 
> 赞同：0
> 
> 时间：2013-04-19T07:09:33.883
> 
> 标签：python, z3

我正在尝试用数组理论对内存访问进行建模。我有一个像下面这样的简单代码（Z3 python）

```
Mem = Array('Mem', BitVecSort(32), BitVecSort(32))

F = True
tmp = BitVec('tmp', 32)
tmp3 = BitVec('tmp3', 32)
F = And(F, tmp3 == Select(Mem, tmp))
tmp4 = BitVec('tmp4', 32)
F = And(F, tmp4 == (tmp3 - 1))
F = And(F, Mem == Store(Mem, tmp, tmp4))

s = Solver()
s.add(F)
print s.check() 
```

我想要 'Sat' 结果，但这个脚本返回 'Unsat'。

我认为这是因为我从 Mem 中读出，然后向它写入不同的值。这真的是我得到“Unsat”的原因吗？

如果是这样，我如何使用数组理论对内存访问进行建模？如何修复上述脚本，使其返回“星期六”？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:15:57.567

Why do you expect this query to return `Sat`?

Your query comes down to asking Z3 to find values for `Mem` and `t` such that `Mem[t] = Mem[t] - 1`, which is clearly not true of any value of `Mem` and `t` you can think of; so Z3 responds `Unsat`.

If you can tell us what property you're trying to satisfy, we can help you formulate it correctly.

# python - 从 os.system 调用 shell 命令不起作用

> ID：16099120
> 
> 赞同：0
> 
> 时间：2013-04-19T07:09:38.840
> 
> 标签：python, shell

我对 python 很陌生，我有这样的代码：

```
os.system(''' PROMPT_COMMAND="printf '%*s\n' "${COLUMNS:-$(tput cols)}" '' | tr ' ' -" ''') 
```

那个部分：

```
PROMPT_COMMAND="printf '%*s\n' "${COLUMNS:-$(tput cols)}" '' | tr ' ' -" 
```

确实打印`-`以填充外壳宽度。上述命令在命令提示符下按预期工作。但是当我在python中做的时候。我根本没有输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:32:47.630

There is no point of issuing this command at all.

As I understand it, you are just setting the environment variable `PROMPT_COMMAND` in order to make the shell execute it on every prompt.

But setting an environment variable has only an impact of a called shell, but not to the caller. You cannot change the environment of your parent process.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-19T07:18:10.207

这会做。正如我所看到的，问题在于引号：

```
import os

PROMPT_COMMAND = 'printf "%*s\n" "${COLUMNS:-$(tput cols)}" "" | tr " " -'
os.system(PROMPT_COMMAND) 
```

# mysql - 我什么时候需要更大的 bulk_insert_buffer_size

> ID：16099123
> 
> 赞同：2
> 
> 时间：2013-04-19T07:09:45.787
> 
> 标签：mysql, insert

我使用“加载数据...”将大数据加载到mysql，并将key_buffer_size设置为非常大的大小（32G）。现在，我发现插入并不像我想象的那样快，我将 bulk_insert_buffer_size 设置为 32M。

我使用 mysqltuner.pl 和类似脚本来确定是否需要更改变量的某些值，但我如何才能确定我需要更大的 bulk_insert_buffer_size？或者，我可以找出使用了多少大小的 mysql 吗？

顺便说一句，在文档中，它说：“这个变量限制了**每个线程**的缓存树的大小（以字节为单位）”。因此，如果我使用 10 个连接进行插入，是否需要 10*bulk_insert_buffer_size 内存？

# android - 来自 asynctask 的通用图像加载器使用

> ID：16099124
> 
> 赞同：0
> 
> 时间：2013-04-19T07:09:48.987
> 
> 标签：android, image, android-asynctask, loader, universal

我想使用来自 asynctask 的 UIL。

```
 import com.nostra13.universalimageloader.core.DisplayImageOptions;
    import com.nostra13.universalimageloader.core.ImageLoaderConfiguration;

    public class SingleAppDetail extends Activity {
        Button btnLogout;
        Button btShowProgress;
        // Progress Dialog
        private ProgressDialog pDialog;
        JSONparser jParser = new JSONparser();
        // Progress dialog type (0 - for Horizontal progress bar)
        public static final int progress_bar_type = 0;
        private static String file_url = "http://site.com/as.apk";
    JSONArray detalii = null;
    TextView app_Detail_title;
    Button app_price_button;
    TextView app_Description;
    ImageView app_Picture;
    View loadingPanelViev;
    View appDetailHeader;
    RatingBar appDetailRating;
    RatingBar rating_1;
    RatingBar rating_2;
    RatingBar rating_3;
    RatingBar rating_4;
    RatingBar rating_5;
    RatingBar rating_ff;
    TextView rating_ff_text;
    TextView rating_1_text;
    TextView rating_2_text;
    TextView rating_3_text;
    TextView rating_4_text;
    TextView rating_5_text;
    String[] imageUrls;
    ImageSwitcher appGallery;
    DisplayImageOptions options;
    com.nostra13.universalimageloader.core.ImageLoader ImageLoader;
    Gallery app_gallery;
    ArrayList<String> urlse = new ArrayList<String>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.app_detail);
        app_Detail_title = (TextView) findViewById(R.id.app_detail_title);
        app_price_button = (Button) findViewById(R.id.app_detail_price);
        app_Description = (TextView) findViewById(R.id.description_holder);
        app_Picture = (ImageView) findViewById(R.id.singleAppDetailImage);
        loadingPanelViev = (View) findViewById(R.id.loadingPanelAppDetailHeader);
        appDetailHeader = (View) findViewById(R.id.app_detail_header_content);
        appDetailRating = (RatingBar) findViewById(R.id.app_detail_rating);
        rating_1 = (RatingBar) findViewById(R.id.rating_1);
        rating_2 = (RatingBar) findViewById(R.id.rating_2);
        rating_3 = (RatingBar) findViewById(R.id.rating_3);
        rating_4 = (RatingBar) findViewById(R.id.rating_4);
        rating_5 = (RatingBar) findViewById(R.id.rating_5);
        rating_ff = (RatingBar) findViewById(R.id.rating_ff);
        rating_ff_text = (TextView) findViewById(R.id.rating_ff_text);
        rating_1_text = (TextView) findViewById(R.id.rating_1_text);
        rating_2_text = (TextView) findViewById(R.id.rating_2_text);
        rating_3_text = (TextView) findViewById(R.id.rating_3_text);
        rating_4_text = (TextView) findViewById(R.id.rating_4_text);
        rating_5_text = (TextView) findViewById(R.id.rating_5_text);
        // appGallery=(ImageSwitcher)findViewById(R.id.app_detail_gallery);
        app_gallery = (Gallery) findViewById(R.id.app_gallery);
        DisplayImageOptions defaultOptions = new DisplayImageOptions.Builder()
                .cacheInMemory().build();

        ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(
                getApplicationContext()).defaultDisplayImageOptions(
                defaultOptions).build();
        ImageLoader.getInstance().init(config);

        new loadAppMainDetails(getApplicationContext()).execute();
        new loadAppMainRating(getApplicationContext()).execute();
        new loadAppMainImages(getApplicationContext()).execute();
        Button download = (Button) findViewById(R.id.app_detail_price);
        download.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                new DownloadFileFromURL().execute(file_url);
            }
        });

    }

    /**
     * Showing Dialog
     * */
    @Override
    protected Dialog onCreateDialog(int id) {
        //this is ok
    }

    /**
     * Background Async Task to download file
     * */

    class DownloadFileFromURL extends AsyncTask<String, String, String> {
//this is ok
}

    class loadAppMainDetails extends
            AsyncTask<String, String, HashMap<String, String>> {
//this is ok
}

    class loadAppMainRating extends AsyncTask<String, String, String> { 
this is ok;
}
// here starts the problem
    class loadAppMainImages extends AsyncTask<String, String, String> {
        Context mContext;
        JSONArray appDetailPictures;
        String image_path;
        public loadAppMainImages(Context context) {
            super();
            this.mContext = context;
        }

        @Override
        protected String doInBackground(String... params) {
            Intent is = getIntent();
            String app_id = is.getStringExtra("element_id");
            List<NameValuePair> parameters = new ArrayList<NameValuePair>();
            parameters.add(new BasicNameValuePair("app_id", app_id));
            JSONObject json = jParser.makeHttpRequest(
                    "http://himbimarket.com/masterApp/get_app_pictures.php",
                    "POST", parameters);
            try {
                int success = json.getInt("success");
                if (success == 1) {
                    appDetailPictures = json.getJSONArray("images");
                    for (int i = 0; i < appDetailPictures.length(); i++) {
                        JSONObject c = appDetailPictures.getJSONObject(i);
                        // Storing each json item in variable
                        String picname = c.getString("picture");
                        image_path = "http://www.himbimarket.com/masterApp/"
                                .concat(picname);
                        urlse.add(image_path);
                    }

                }
            } catch (Exception e) {

                // TODO: handle exception
            }

            return null;
        }

        @Override
        protected void onPostExecute(String result) {

            Toast.makeText(getApplicationContext(), urlse.get(2),
                    Toast.LENGTH_LONG).show();

             app_gallery.setAdapter(new ImageGalleryAdapter());

        }

    }

    public class ImageGalleryAdapter extends BaseAdapter {

        @Override
        public int getCount() {
            return urlse.size();
        }

        @Override
        public Object getItem(int position) {
            return position;
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView imageView = (ImageView) convertView;
            if (imageView == null) {
                imageView = (ImageView) getLayoutInflater().inflate(
                        R.layout.item_gallery_image, parent, false);
            }

            ImageLoader.displayImage(urlse.get(position), imageView);
            return imageView;
        }
    }

    } 
```

我不明白为什么不工作。

错误代码如下：

```
 04-19 06:52:19.635: E/AndroidRuntime(1593): FATAL EXCEPTION: main
    04-19 06:52:19.635: E/AndroidRuntime(1593): java.lang.NullPointerException
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at com.himbi.market.SingleAppDetail$ImageGalleryAdapter.getView(SingleAppDetail.java:471)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:193)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.View.measure(View.java:15513)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1052)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:590)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.View.measure(View.java:15513)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.View.measure(View.java:15513)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.widget.ScrollView.measureChildWithMargins(ScrollView.java:1217)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.widget.ScrollView.onMeasure(ScrollView.java:321)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.View.measure(View.java:15513)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.View.measure(View.java:15513)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.View.measure(View.java:15513)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.View.measure(View.java:15513)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.Choreographer.doCallbacks(Choreographer.java:562)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.Choreographer.doFrame(Choreographer.java:532)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
    04-19 06:52:19.635: E/AndroidRuntime(1593):     at android.os.Handler.handleCallback(Handler.java:725) 
```

当他尝试加载 imageview 时，适配器出现问题。

这是 app_detail.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/app_detail_back_image" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:background="@drawable/app_detail_back_image"
            android:orientation="vertical" >

            <RelativeLayout
                android:id="@+id/loadingPanelAppDetailHeader"
                style="@style/GenericProgressBackground"
                android:layout_height="fill_parent" >

                <ProgressBar style="@style/GenericProgressIndicator" />
            </RelativeLayout>

            <LinearLayout
                android:id="@+id/app_detail_header"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:divider="@drawable/divider"
                android:paddingBottom="5dp"
                android:paddingLeft="5dp"
                android:paddingTop="5dp" >

                <ImageView
                    android:id="@+id/singleAppDetailImage"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/nopic" />

                <RelativeLayout
                    android:id="@+id/app_detail_header_content"
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent" >

                    <includes.TextResize
                        android:id="@+id/app_detail_title"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_alignParentTop="true"
                        android:maxLines="2"
                        android:text="First Application"
                        android:textColor="@color/himbi_apps_color"
                        android:textSize="22sp" />

                    <Button
                        android:id="@+id/app_detail_price"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_alignParentBottom="true"
                        android:layout_alignParentRight="true"
                        android:background="@drawable/app_detail_price_back"
                        android:text="Button" />

                    <TextView
                        android:id="@+id/app_detail_developer"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_below="@+id/app_detail_title"
                        android:text="TextView"
                        android:textSize="14sp" />
                </RelativeLayout>
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="150dp" >

                <Gallery
                    android:id="@+id/app_gallery"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical"
                    android:spacing="1dip" />
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <RelativeLayout
                    android:layout_width="fill_parent"
                    android:layout_height="match_parent" >

                    <RatingBar
                        android:id="@+id/app_detail_rating"
                        style="?android:attr/ratingBarStyleSmall"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content" />

                    <TextView
                        android:id="@+id/app_date"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentRight="true"
                        android:layout_alignParentTop="true"
                        android:text="Small Tijkjext"
                        android:textAppearance="?android:attr/textAppearanceSmall" />
                </RelativeLayout>
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <RelativeLayout
                    android:layout_width="fill_parent"
                    android:layout_height="match_parent" >

                    <TextView
                        android:id="@+id/description_holder"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_alignParentTop="true"
                        android:text="Description Holder" />
                </RelativeLayout>
            </LinearLayout>

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <RelativeLayout
                    android:layout_width="fill_parent"
                    android:layout_height="match_parent"
                    android:layout_marginLeft="20dp" >

                    <TextView
                        android:id="@+id/textView2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_alignParentTop="true"
                        android:text="@string/rating"
                        android:textAppearance="?android:attr/textAppearanceMedium"
                        android:textColor="@color/himbi_color" />

                    <RelativeLayout
                        android:id="@+id/relativeLayout1"
                        android:layout_width="100dp"
                        android:layout_height="100dp"
                        android:layout_margin="25dp"
                        android:layout_toRightOf="@+id/relativeLayout2" >

                        <TextView
                            android:id="@+id/rating_ff_text"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_alignRight="@+id/textView8"
                            android:layout_centerVertical="true"
                            android:gravity="center_horizontal"
                            android:text="4.5"
                            android:textAppearance="?android:attr/textAppearanceLarge"
                            android:textColor="@color/himbi_apps_color" />

                        <RatingBar
                            android:id="@+id/rating_ff"
                            style="?android:attr/ratingBarStyleSmall"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_below="@+id/rating_ff_text"
                            android:layout_centerHorizontal="true"
                            android:padding="2dp" />

                        <TextView
                            android:id="@+id/textView8"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:layout_alignParentLeft="true"
                            android:layout_alignParentTop="true"
                            android:background="#a0a0a0"
                            android:gravity="center_horizontal"
                            android:text="Rating"
                            android:textAppearance="?android:attr/textAppearanceMedium"
                            android:textColor="@color/header" />
                    </RelativeLayout>
                </RelativeLayout>
            </LinearLayout>
        </LinearLayout>

    </ScrollView> 
```

以及用于膨胀的 xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <Gallery xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/gallery"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:spacing="1dip" /> 
```

Android 版本是 4.0.1，UIL 是最新的。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T07:45:12.013

1) 确保在 Application 类中初始化 ImageLoader 实例：

```
public class MyApplication extends Application {
@Override
public void onCreate() {
    ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(getApplicationContext()).build();
    ImageLoader.getInstance().init(config);
}
} 
```

2）另外，在 Manifest 中定义这个类：

```
 < application
            android:name=".MyApplication">
            ......
/> 
```

3) 另外，在使用前初始化 imageLoader：

```
 imageLoader = ImageLoader.getInstance(); 
```

4）最后，使用它：

```
 imageLoader.displayImage(urlse.get(position), imageView); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:27:35.487

ImageLoader.getInstance().DisplayImage...

# iphone - FacebookSDK - 未知类型 ACAccountCredentialRenewResult 错误

> ID：16099127
> 
> 赞同：2
> 
> 时间：2013-04-19T07:09:54.543
> 
> 标签：iphone, ios6, ios4, facebook-ios-sdk, acaccount

`facebook SDK 3.5`我在我的 mac 中安装了新更新的。我学习了 facebook 开发者网站中给出的教程并将其集成到`facebook SDK`我的`XCode`项目中。

[Facebook SDK 链接](https://developers.facebook.com/ios/features/whats-new-ios-sdk-3.5/)

[教程链接](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)

我只是尝试运行 facebook 示例项目。但我得到的错误是

```
Parse Issue: Unknown Type ACAccountCredentialRenewResult Error 
```

并且**项目没有编译**。我已经看到它`ACAccountCredentialRenewResult`可以从`iOS 6`它本身获得。但 facebook 表示 SDK 与**iOS 4.3+**兼容。我正在尝试在**iOS 5.1 模拟器和 XCode 4.5**中运行该项目。任何人都可以帮助我摆脱这个问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T23:26:27.083

我不知道这是否是最终解决方案，但我将丢失的枚举放在了 FBsession.h 文件的顶部。

```
typedef enum {
   ACAccountCredentialRenewResultRenewed,
   ACAccountCredentialRenewResultRejected,
   ACAccountCredentialRenewResultFailed
} ACAccountCredentialRenewResult; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:15:18.440

使您的帐户框架可选并尝试。![在此处输入图像描述](https://i.stack.imgur.com/OX0mc.png)

# xml - 添加到现有文件时未格式化的 XML 节点

> ID：16099133
> 
> 赞同：0
> 
> 时间：2013-04-19T07:10:13.820
> 
> 标签：xml, formatting

每当我向文件中添加新节点时，我在尝试在 XML 文件中维护我的格式时遇到问题。例如，如果我最初从头开始创建 XML 文件，则格式正确，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Data>
  <Settings>
    <DropBoxLocation></DropBoxLocation>
    <ServerName></ServerName>
    <DatabaseName></DatabaseName>
    <Username></Username>
    <Password></Password>
    <OnlineFilename></OnlineFilename>
    <OfflineFilename></OfflineFilename>
    <EftposFilename></EftposFilename>
    <BankFilename></BankFilename>
    <POSFilename></POSFilename>
    <UnprocessedFilename></UnprocessedFilename>
    <SalesFilename></SalesFilename>
    <FileReadDelay></FileReadDelay>
  </Settings>
</Data> 
```

但是，每当我向预先存在的文件中添加新节点时，我都会在文件底部得到以下未格式化的条目：

```
<?xml version="1.0" encoding="utf-8"?>
<Data>
  <Settings>
    <DropBoxLocation></DropBoxLocation>
    <ServerName></ServerName>
    <DatabaseName></DatabaseName>
    <Username></Username>
    <Password></Password>
    <OnlineFilename></OnlineFilename>
    <OfflineFilename></OfflineFilename>
    <EftposFilename></EftposFilename>
    <BankFilename></BankFilename>
    <POSFilename></POSFilename>
    <UnprocessedFilename></UnprocessedFilename>
    <SalesFilename></SalesFilename>
    <FileReadDelay></FileReadDelay>
<SEOFilename></SEOFilename><LBossFilename></LBossFilename><ProcessesFilename></ProcessesFilename></Settings>
</Data> 
```

我添加新节点的代码如下所示：

```
Dim MyXML As New XmlDocument()
Dim MyXMLNode As XmlNode

        MyXML.PreserveWhitespace = True

        Try
            MyXML.Load(SettingsXMLFile)
            MyXMLNode = MyXML.SelectSingleNode("//Data/Settings/" & ElementName)
            If Not MyXMLNode Is Nothing Then
                MyXMLNode.InnerText = ElementValue.ToString
                MyXML.Save(SettingsXMLFile)
            Else
                Dim XMLRoot As XmlElement = MyXML.SelectSingleNode("//Data/Settings")
                Dim XMLChild As XmlElement = MyXML.CreateElement(ElementName)
                XMLChild.InnerText = ElementValue
                XMLRoot.AppendChild(XMLChild)
                MyXML.Save(SettingsXMLFile)
            End If

            MyXMLNode = Nothing
            MyXML = Nothing 
```

想知道是否有人可以提供帮助，因为我不确定是什么导致文件丢失格式。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T15:13:03.503

我遇到了类似的问题。我试图更新服务器上现有的（格式正确的）xml 文件。

下面的代码示例在 javascript 函数中

```
...
xml = '<?xml version="1.0" encoding="utf-8" ?>';
xml += '<root>';
xml += '<child_A>Hello World</child_A>';
xml += '<child_B>Good World</child_B>';
xml += '</root>';
... 
```

然后在 ASP 文件中，我尝试使用 appendChild 方法将新的 xml 节点添加到现有 xml 的根节点。添加到我的 xml 文件中的新节点未格式化，就像您的示例一样。一切都像一根长绳子一样连接在一起:(

经过数小时的研究和反复试验......

我的问题的解决方案...

```
...
xml = '<?xml version="1.0" encoding="utf-8" ?>';
xml += ' <root>';
xml += '   <child_A>Hello World</child_A>';
xml += '   <child_B>Good World</child_B>';
xml += ' </root>';
... 
```

在字符串中放置空格！？！无论如何，它在 FireFox 上对我有用，我需要确保它也适用于 IE。

我希望这会有所帮助。

# php - Magento：创建自定义块并在 cart.phtml 中使用

> ID：16099142
> 
> 赞同：1
> 
> 时间：2013-04-19T07:10:32.087
> 
> 标签：php, magento, magento-1.7

我正在尝试创建一个自定义 magento 块，以便我可以在我的 cart.phtml 上使用它。我已经看到了代码`$this->getChildHtml('totals');`。

我想知道我是否也可以创建一个自定义块然后像这样访问它

```
$this->getChildHtml('myblock'); 
```

任何人都可以指出我的方法或任何参考，因为我没有找到任何有用的资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T09:16:28.517

创建您的自定义块，为简单起见，我们将只使用 Mage 命名空间，因此我们不需要创建完整的模块，但是您也应该考虑创建自定义模块。

app/code/local/Mage/Checkout/Block/Myblock.php

```
class Mage_Checkout_Block_MyBlock extends Mage_Core_Block_Template
{
    public function test()
    {
        return 'testing';
    }
} 
```

app/design/frontend/default/default/layout/checkout.xml（使用您的模板配置文件）

```
<checkout_cart_index translate="label">
    <!-- other code is in here.. -->
    <reference name="content">
        <!-- other code will be here too -->
        <block type="checkout/cart_totals" name="checkout.cart.totals" 
               as="totals" template="checkout/cart/totals.phtml" />

        <!-- Add your block in here.. -->
        <block type="checkout/myblock" name="checkout.myblock" 
               as="myblock" template="checkout/cart/myblock.phtml" />
    </reference>
</checkout_cart_index> 
```

app/design/frontend/default/default/template/checkout/cart/myblock.phtml（或在您的模板自定义）

```
<?php echo $this->test() // shows "testing" ?> 
```

您可以根据需要在购物车块内使用子块

```
$this->getChildHtml('myblock'); 
```

# perl - 如何使 awk 在 perl 中工作？

> ID：16099143
> 
> 赞同：0
> 
> 时间：2013-04-19T07:10:32.573
> 
> 标签：perl, ssh, awk, command

在我的 perl 脚本中，这段代码：

```
system("ssh -q ullink\@130.45.56.217 \"echo 1 2|awk '{print \$2}'\""); 
```

awk 部分不起作用！预期结果是“1”，但现在是“1 2”我只是不知道如何让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:36:38.087

`awk`，无论您打算在远程主机上还是在本地运行它，都会产生不会去任何地方的输出。 `system()`不给你运行命令的输出，只给你返回状态。

*更新：是的，系统运行的命令仍然可以打印到 STDOUT。*

您需要反引号：

```
 my @output = `command here`;
 print @output; 
```

另外，请记住 Perl 几乎可以做任何事情`awk`。我更愿意在 Perl 中进行尽可能多的处理，并将外部系统命令保持在最低限度。但这取决于您在做什么，并且在某种程度上是个人喜好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:32:05.280

Why would you run `awk` on the remote host, or at all?

```
system(qq(ssh -q $UL_SERVER_LOGIN\@$UL_SERVER echo 1 2 | awk '{print $2}')); 
```

Or even better

```
print ((split (/\s+/,qx(ssh -q $UL_SERVER_LOGIN\@$UL_SERVER echo 1 2)))[1]); 
```

The concrete problem with your script is that the dollar sign requires a lot more escapes: it gets eaten by the remote shell; but if you escape it from the remote shell with a backslash, the backslash needs to be escaped from Perl, etc etc. It's a lot simpler if you use single quotes where you can.

```
system("ssh -q $UL_SERVER_LOGIN\@$UL_SERVER " .
    '"echo 1 2 | awk \'{ print \$2 }\'"'); 
```

# sql - 不使用 Max()/Greatest() 函数查找最大组值

> ID：16099145
> 
> 赞同：2
> 
> 时间：2013-04-19T07:10:40.437
> 
> 标签：sql, group-by, max

我一直在尝试这样做几个小时，但我一直得到一个空结果。到目前为止，我通过运行查询得到了下表

`select count(posts) from dbtable group by user`

```
user | posts
_____________
a   |   3
b   |   7
c   |   2
d   |   1
e   |   1 
```

如何在不使用 max()/greatest() 甚至 LIMIT 函数的情况下向用户显示最多的帖子。我运行上述查询的原始表有一个所有帖子的列表以及提交每个帖子的用户，我只是将它们分组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:56:01.160

```
select * from 
(
select user,count(posts) cnt from dbtable 
group by user
) t1
left join 
(
select user,count(posts) cnt from dbtable 
group by user
) t2 on (t1.user<>t2.user) and (t1.cnt<t2.cnt)

where t2.cnt is null 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!2/5feda/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:39:37.050

这是另一个可行的解决方案，但对于更大的表来说非常慢。我用一小部分 48 个条目对其进行了测试，它足够快，但是在一个有 200.000 条记录的表上，它运行了几个小时而没有完成。:)

```
select *
from
(
    select distinct column
    from table t0
    join table t1 on t0.key = t1.key
    where t0.column > t1.column
    order by t0.column desc
)
where rownum <= 1
; 
```

# xml - 在 BB10 中从 C++ 发送带有 XML 的 POST 请求

> ID：16099146
> 
> 赞同：0
> 
> 时间：2013-04-19T07:10:44.573
> 
> 标签：xml, post, blackberry-10

嗨，我想在 Blackberry 10 中从 C++ 发送一个带有 XML 的 HTTP Post 请求。

**如何发送请求？**

作为回应，我将再次收到一个我想要解析的 XML。

**谁能提供一些有关如何解析收到的 XML 的信息？**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:18:32.913

对于解析看看 QDomNode 及其衍生物 - [https://developer.blackberry.com/cascades/reference/qdomnode.html](https://developer.blackberry.com/cascades/reference/qdomnode.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T14:39:54.250

您可以使用[QNetworkAccessManager](https://developer.blackberry.com/cascades/reference/qnetworkaccessmanager.html)发送带有 XML 数据的发布请求。

# java - 安卓图像处理

> ID：16099148
> 
> 赞同：0
> 
> 时间：2013-04-19T07:10:47.563
> 
> 标签：java, android, image-processing

我目前正在开发一个需要图像处理的应用程序。我正在使用[本](http://xjaphx.wordpress.com/learning/tutorials/)教程。但是，有时图像处理不完美。它可能只处理图像的一半。我不知道为什么会这样。

所以我决定更改另一个库，是否有任何类似的库与我使用的当前库一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-11T15:00:16.197

您可以使用 Catalano 框架，它在桌面上像 Android 一样工作。

[http://code.google.com/p/catalano-framework/](http://code.google.com/p/catalano-framework/)

例子：

```
FastBitmap fb = new FastBitmap(bitmap);

//If you want to apply threshold
Grayscale g = new Grayscale();
g.applyInPlace(fb);

Threshold t = new Threshold(120);
t.applyInPlace(fb);

bitmap = fb.toBitmap(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T07:21:26.537

你可以试试[这个](https://code.google.com/p/jjil/)。它是一个Java图像处理库。它包括一个图像处理架构和 60 多个用于各种图像处理任务的例程

# postal-code - CLGeocoder 转发地理编码邮政编码

> ID：16099152
> 
> 赞同：0
> 
> 时间：2013-04-19T07:10:56.703
> 
> 标签：postal-code, clgeocoder

我目前正在对用户通过 clgeocoder 输入的邮政编码进行转发地理编码，但是我遇到了一些奇怪的行为。

例如，如果用户只输入一个字母“p”，有时会导致应用程序变得无响应，但是在以前的实现中（使用 google url 转换数据并返回）这个问题从未发生过。

我目前在邮政编码字段上进行了检查，以强制用户输入超过 1 个字母，但这似乎有点 hacky，如果收到无效数据，请求是否应该超时或返回错误？

我会坚持使用谷歌 api 转发地理编码，我正在使用这个网络链接，但它似乎停止工作： [http ://maps.google.com/maps/geo?q=address&output=csv](http://maps.google.com/maps/geo?q=address&output=csv)

然而，在查看了其他一些帖子后，我发现了这个链接 [http://maps.google.com/maps/geo?q=UKPOSTCODE&output=xml](http://maps.google.com/maps/geo?q=UKPOSTCODE&output=xml)

但我想知道是否可以使用谷歌网址来转换邮政编码，或者这是否违反了苹果的条款和协议？

最后一件事，这是我在使用 clgeocoder [http://mithin.in/2009/06/22/using-iphone-sdk-mapkit-framework-a-tutorial之前第一次使用的教程](http://mithin.in/2009/06/22/using-iphone-sdk-mapkit-framework-a-tutorial)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T10:05:39.007

谷歌的方法会起作用，我没有发现任何信息表明这会违反苹果协议，但我个人认为使用内置框架支持可能是最合适的选择方法。只要用户可以访问互联网，他们就可以主动搜索他们的邮政编码。一个字母邮政编码的失败是不可避免的，因为正在访问的数据库信息有限。

希望这对其他人有帮助。

# jekyll - 在 Jekyll GitHub Pages 中使用 Redcarpet 时表格不呈现？

> ID：16099153
> 
> 赞同：35
> 
> 时间：2013-04-19T07:11:00.303
> 
> 标签：jekyll, github-pages, redcarpet

从`maruku`引擎（默认）开始，写表就像

```
surround text, etc.

| Tables        | Are           | Cool  |
| ------------- |:-------------:| -----:|
| col 3 is      | right-aligned | $1600 |
| col 2 is      | centered      |   $12 |
| zebra stripes | are neat      |    $1 |

surround text... 
```

会正确渲染。

但是当我切换到`redcarpet`（添加`markdown: redcarpet`到`_config.yml`）时，表不再呈现，本地主机和 GitHub 页面上。

我做错什么了吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-21T00:46:15.450

仅添加`markdown: redcarpet`是`_config.yml`不够的，还需要`extensions`部分，例如

```
markdown: redcarpet
redcarpet:
  extensions: ["no_intra_emphasis", "fenced_code_blocks", "autolink", "tables", "with_toc_data"] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-23T16:44:39.580

对于这个问题，这里的重要扩展似乎是“表格”。

但是，如果您想要更多 Github 风格的降价，在[http://sholsinger.com/2014/03/jekyll-github-flavored-markdown](http://sholsinger.com/2014/03/jekyll-github-flavored-markdown)上列出了更多。

结合 neizod 的回答，我最终使用了。

```
markdown: redcarpet
redcarpet:
  extensions: ["no_intra_emphasis", "fenced_code_blocks", "autolink", "tables", "strikethrough", "superscript", "with_toc_data"] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-15T08:32:57.003

GitHub Pages 不再支持 markdown 引擎，`redcarpet`并且可能随时停止工作。

一个非常直接的解决方案是删除`markdown`站点`_config.yml`文件中的设置，而是在标题/文本和表格之间增加一行。

[您可以从github 帮助](https://help.github.com/articles/updating-your-markdown-processor-to-kramdown/)中获取更多信息，该解决方案取自此[问题](https://github.com/github/pages-gem/issues/123)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T09:30:58.597

[如何使用 Redcarpet 和 Markdown 渲染表格](https://stackoverflow.com/questions/12296453/how-to-render-table-with-redcarpet-and-markdown)

另外，我可以确认 [Kramdown](http://github.com/gettalong/kramdown) 会这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-15T22:59:37.790

对于几年后仍然遇到这种情况的任何人，这里有一个如何修复它的示例。

如果你的降价是这样的：

```
# My Favorite Books 
| Title | Description |
| ----- | ----------- |
| Attack Surface | A sci-fi book by Cory Doctorow showing how currently available tech can be used to oppress | 
```

它将在 github.org 上正常呈现，但无法在 github 页面上呈现。

解决方案是在表格上方添加一个空白行，如下所示：

```
# My Favorite Books 

| Title | Description |
| ----- | ----------- |
| Attack Surface | A sci-fi book by Cory Doctorow showing how currently available tech can be used to oppress | 
```

感谢 LT Chen 的[回答](https://stackoverflow.com/a/46753208/620699)让我走上了正轨。

# maven - 自定义 maven 程序集插件

> ID：16099154
> 
> 赞同：0
> 
> 时间：2013-04-19T07:11:00.503
> 
> 标签：maven, maven-assembly-plugin

我非常喜欢 Maven，因为它使一些事情变得非常简单，但有时我很难处理它的某些部分......虽然我搜索了网络，但我并没有让它按我想要的方式工作。

这是我当前的程序集配置：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <finalName>${project.name}_${project.version}</finalName>
                <outputDirectory>C:\temp\FundSteward\</outputDirectory>
                <appendAssemblyId>false</appendAssemblyId>
                <archive>
                    <manifest>
                        <mainClass>lu.aspecta.fundSteward.Main</mainClass>
                    </manifest>
                </archive>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

它在指定的目标文件夹中创建一个可运行的 jar；到目前为止，这正是我想要的。现在，我想将 log4j.properties 文件保存在目标文件夹中的 jar 文件旁边，这样我就可以在不再次打包 jar 的情况下对其进行调整。此外，它不应该装进罐子里，但我想保留在 /src/main/resources 中（像往常一样）。

我已经尝试过不同的方式（使用不同的程序集文件（将是首选方式），其他配置，...），但我无法让它按我想要的方式工作。

非常感谢每一个帮助甚至一点提示。

最好的问候，JR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-20T20:53:24.340

以防万一有人感兴趣，这就是我为解决此问题所做的工作。从多个 SO 来源报废的零件。:)

```
<build>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
                <targetPath>${project.build.directory}/${project.build.finalName}</targetPath>
                    <includes>
                        <include>log4j.properties</include>
                    </includes>
        </resource>
    </resources>

    ...

    <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
            <finalName>${project.name}</finalName>
            <outputDirectory>${project.build.directory}/${project.build.finalName}</outputDirectory>
                <appendAssemblyId>false</appendAssemblyId>
                <archive>
                    <manifest>
                        <mainClass>com.my.app.MyMain</mainClass>
                    </manifest>
                    <manifestEntries>
                        <Class-Path>.</Class-Path>
                    </manifestEntries>
                </archive>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
        </plugin>
</build> 
```

# sql - jdbc 连接错误：sqlserver.jdbc.SQLServerException：HTTP 状态 500

> ID：16099155
> 
> 赞同：0
> 
> 时间：2013-04-19T07:11:02.457
> 
> 标签：sql, database, jsp, sql-server-2005, jdbc

这可能是一个愚蠢的问题，但已经带走了我的睡眠..

我正在开发一个项目，它使用 JSP 通过 jdbc 连接器连接到 SQL Server 2005。下面给出了代码的相关部分（我认为）。

```
String user=request.getParameter("t1");
String pass=request.getParameter("t2");

int flag=0;
String userName = "sa";
String password = "abcdefgh";
String url = "jdbc:sqlserver://localhost:1433;databaseName=OnlineExam";
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
Connection con = DriverManager.getConnection(url, userName, password);
    try {
// Load the JDBC driver

 String query1 = "SELECT UserName,Password FROM LOGIN";
 Statement stmt = con.createStatement();
 ResultSet rs = stmt.executeQuery(query1);
 while (rs.next()) {
 String username=rs.getString(1);
 String passwordd=rs.getString(2);
 if(user.equals(username) && pass.equals(passwordd))
 {  
   flag=1;
 }

 }

 }
   catch (Exception e) {
   System.out.println(e.toString());
 } 
```

但是每当我尝试运行这个项目时，它都会出错

```
type Exception report

message

description
The server encountered an internal error () that prevented it from fulfilling this      
request.

exception
 javax.servlet.ServletException: com.microsoft.sqlserver.jdbc.SQLServerException:The  
 TCP/IP connection to the host  has failed. java.net.ConnectException: Connection    
 refused: connect

root cause
com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host  has   
failed. java.net.ConnectException: Connection refused: connect 
```

# jquery - 页面加载滑动div上的jquery，高度设置为自动

> ID：16099156
> 
> 赞同：0
> 
> 时间：2013-04-19T07:11:04.327
> 
> 标签：jquery, height, slidedown

我有一个 div，因为网站是响应式的，所以高度设置为 auto。这似乎破坏了下滑功能。有没有办法让 div 计算出高度然后向下滑动？这似乎是很多人的问题，但我还没有找到答案。有大神能帮帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:52:02.513

使用 jquery 你可以只使用[.height();](http://api.jquery.com/height/) 获取所选元素的当前高度的函数，如果没有更多代码，很难进一步帮助您。你可以使用[resize();](http://api.jquery.com/resize/) 使其运行的功能

# php - PHP中奇怪的类创建

> ID：16099159
> 
> 赞同：0
> 
> 时间：2013-04-19T07:11:08.853
> 
> 标签：php

我正在编写一些 PHP 代码并遇到了这一行，我不确定语法的含义。

```
$someclass = (new SomeClass())->someMethod(10); 
```

这里发生了什么？我习惯于看到类被实例化，并且方法被这样调用：

`$someclass = new SomeClass();` `$someClass->someMethod(10);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:13:50.220

该类已启动，但没有保留以后使用该类的参考。$someClass 将包含 someMethod(10) 返回的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:14:15.830

这只是同一事物的简写符号。假设您需要调用`bar`class 的方法`Foo`。为此，您需要实例化`Foo`：

```
$foo  = new Foo;
$data = $foo->bar(); 
```

但你真的没有兴趣`$foo`，你只是想要`$data`。简写语法只是实例化类然后调用方法，而不需要创建和保留变量`$foo`：

```
$data = (new Foo)->bar(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:14:47.413

我认为你只能在 php >= 5.4 中做到这一点。

该类被实例化，然后`someMethod`在新实例上调用。然后将`someMethod`函数的结果存储到`$someclass`. （顺便说一下，这个变量的标题具有误导性）

快速测试：

```
<?php
class SomeClass {
    public function someMethod($val) {
        return $val * 42;
    }
}

$someclass = (new SomeClass())->someMethod(10);
var_dump($someclass); 
```

输出：`int(420)`

[http://ideone.com/Vebt4d](http://ideone.com/Vebt4d)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T07:14:59.897

`new SomeClass()`返回指向类的新实例的指针。代码不是将其分配给变量，而是在新形成的实例中调用一个方法并返回该值。不保留新实例的句柄。如果它是 C++ 它会泄漏内存，但我很确定 PHP 会立即清理..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T07:16:25.280

这与以下内容相同：

```
$object1 = new SomeClass();
$someclass = $object1->someMethod(10); 
```

`$someclass`应该是 的返回值`someMethod`。实际值和类取决于如何`someMethod`编写。

在某些实践中，`someMethod`可能会返回对象实例本身。但这不是必须的。请`someMethod`仔细阅读。

# solr - 基于价格和城市的过滤让我很好奇

> ID：16099168
> 
> 赞同：0
> 
> 时间：2013-04-19T07:11:40.797
> 
> 标签：solr

我现在正在使用 mongodb，它肯定不适合过滤，所以我正在考虑在这种情况下使用 solr，让我好奇的是，在数据库中，如果我愿意对值进行排序或过滤，我应该添加复合索引以使过滤器更好，在solr中，我搜索了很多，有一个叫做copyField的东西，但我认为这不是我问题的答案，所以我的问题是，我应该过滤价格和城市，我应该按价格值对它们进行排序，我应该为此添加什么到我的架构中或者我应该怎么做？，我搜索了很多，但我找不到任何东西，谢谢 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:30:08.267

您需要在 schema.xml 中定义具有适当字段类型（字符串、浮点数）的字段

例如`<field name="cities" type="string" indexed="true" stored="true"/>`
，例如`<field name="prices" type="float" indexed="true" stored="true"/>`

如果字段有多个值，您可以将它们标记为多值。

然后您可以使用[fq](http://wiki.apache.org/solr/CommonQueryParameters#fq)过滤过滤结果

例如`fq=(cities:Mumbai AND prices:100)`

您也可以使用价格范围。

然后您可以使用[sort](http://wiki.apache.org/solr/CommonQueryParameters#sort)参数`sort=prices desc`

# android - Android 库项目 - 讨论 / 最佳方式

> ID：16099170
> 
> 赞同：1
> 
> 时间：2013-04-19T07:11:43.937
> 
> 标签：android

好的，这个线程将更像是对标题中提到的主题的讨论。我一遍又一遍地搜索整个主题，但没有找到适合我的好的/可接受的解决方案。

**设想**

假设我有一个 android 项目，我需要一个第三方库（例如[drag-sort-listview library](https://github.com/bauerca/drag-sort-listview)）。

**如何整合它？**

*没有 Git*

根据[官方文档](http://developer.android.com/tools/projects/projects-eclipse.html)和[这个](https://stackoverflow.com/questions/8248196/how-to-add-a-library-project-to-a-android-project)线程，我们应该这样做（简化！）：

1.  将项目导入 Eclipse（来自现有的 Android 源）
2.  转到您的项目属性 -> Android -> 添加库（从您的工作区）

*使用 Git*

3.  为第三方库制作一个 Git 子模块。在项目的文件夹中执行此操作（例如 myproject/thirdpartylibs/newLibrary）

4.  与上述步骤相同，但作为“现有源”选择您刚刚克隆到项目中的那个

**讨论**

对我来说：这根本不令人满意！

为什么？

首先：我不想在我的工作区中有一个库项目——我只是不关心它。我只是想使用它。我想要一个可以放入我的“libs”文件夹中的 JAR（如此[处](https://stackoverflow.com/questions/1334802/how-can-i-use-external-jars-in-an-android-project/6859020#6859020)所述）。可悲的是，您无法从库项目（[source](https://stackoverflow.com/questions/5014128/create-an-android-jar-library-for-distribution)）中创建罐子（或者是否有隐藏的方式？）。

其次：拉我项目的每个人都要手动生成第三方库的项目，然后添加到项目中。因此，如果有人只是拉动我的项目，除非他这样做，否则它将无法正常工作。如果你问我，那就太糟糕了..（或者我在这里遗漏了什么？）

第三：Git 子模块在大多数情况下看起来有点矫枉过正。将 JAR 放在 libs 文件夹中并完成它会容易得多。当然，这样做的工作量并不大，但它只是为您的项目增加了另一层“复杂性”。

**问题**

我是唯一一个因此而生气的人吗？

大男孩是如何做到的（如 CyanogenMod 等）？

为什么仍然有 JAR 库（例如[ORMLite](http://ormlite.com/)）？这仅仅是因为他们不需要android特定的资源和东西吗？或者有谁知道为什么他们可以用他们的库构建一个 JAR 而“所有”其他人不能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:19:45.557

> 我是唯一一个因此而生气的人吗？

不。

> 大男孩是如何做到的（如 CyanogenMod 等）？

CyanogenMod 是 AOSP Android 的一个完整分支，其工作级别低于 SDK 库。将它们与 Android 库项目进行比较并不是一个好主意。

> 为什么还有 JAR 库（例如 ORMLite）？

可以为不使用任何`R.*.*`资源的任何项目创建 JAR。您也可以从其他项目创建 JAR，但它们会以`ResourceNotFoundException`. 为了解决这个问题，您可以让用户将所有需要的 XML 资源添加到他们的项目中（就像 ACRA 所做的那样，如果您选择使用他们库的警报部分，则要求您添加 XML 字符串）。

> 或者有谁知道为什么他们可以用他们的库构建一个 JAR 而“所有”其他人不能？

因为他们不使用该`R`部分的 XML 资源。XML 资源*没有*捆绑到 JAR 中，因为 JAR 仅用于代码。Android 将所有 XML 资源编译成一个二进制文件，该文件单独包含在您的 apk 中。

# c++ - 如何开发桌面静态库以支持 Windows 应用商店应用

> ID：16099171
> 
> 赞同：0
> 
> 时间：2013-04-19T07:11:45.327
> 
> 标签：c++, porting

我必须迁移一个桌面静态库（用 VC++ 2010 编写）以支持 Windows Store App（用 VC++ 2012 编写）。问题是桌面静态库包含许多低级 i/o 函数，例如：Windows Store App 不支持的 open、fopen、read、write、seek。问题是：

1）我可以在Windows Store App上使用open，fopen，write函数吗？如果是，位置文件可以写在哪里？

2) 哪些函数可以交替使用 open、fopen、read、write、seek 函数？

感谢您的帮助。

# jquery - jQuery 调用远程 Web 服务

> ID：16099172
> 
> 赞同：1
> 
> 时间：2013-04-19T07:11:52.833
> 
> 标签：jquery, ajax, web-services

我正在尝试使用 jQuery 调用 Web 服务，并且阅读了很多示例，但不幸的是我无法使其工作。

我正在尝试为我的练习调用此 Web 服务：[http ://www.w3schools.com/webservices/tempconvert.asmx?op=CelsiusToFahrenheit](http://www.w3schools.com/webservices/tempconvert.asmx?op=CelsiusToFahrenheit)

这是我下面的代码，但无论我做什么，我都会收到错误 500（内部服务器错误）或 400 错误请求。

```
function GetIt(){
var divToBeWorkedOn = "#AjaxPlaceHolder";
var webMethod = "http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit?callback=?";
var parameters = 'POST /webservices/tempconvert.asmx/CelsiusToFahrenheit HTTP/1.1 Host: www.w3schools.com Content-Type: application/x-www-form-urlencoded Content-Length: 9 Celsius=5';
//var parameters = 'Celsius=5';
//var parameters = '<Celsius>5</Celsius>';

$.ajax({
    type: "POST",
    url: webMethod,
    data: parameters,
    contentType: "text/xml; charset=utf-8",//"application/json; charset=utf-8",
    dataType: "xml", //"json"
    success: function(msg) {    
        $(divToBeWorkedOn).html(msg.d);
    },
    error: function(e){
        $(divToBeWorkedOn).html("Unavailable");              
    }
});
} 
```

我不确定我应该如何传递参数...

任何人都可以描述问题出在哪里并使这个例子有效吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:19:27.763

尝试这个

```
function GetIt(){
  var divToBeWorkedOn = "#AjaxPlaceHolder";   
  var webMethod = "http://www.w3schools.com/webservices/tempconvert.asmx/CelsiusToFahrenheit?callback=?"; 
  var parameters = {'Celsius':'5'};

  $.ajax({
    type: "POST",
    url: webMethod,
    data: parameters,
    contentType: "text/xml; charset=utf-8",//"application/json; charset=utf-8",
    dataType: "xml", //"json"
    success: function(msg) {    
      $(divToBeWorkedOn).html(msg.d);
    },
    error: function(e){
      $(divToBeWorkedOn).html("Unavailable");              
    }
  });
} 
```

# php - 使用 sql 从 mysql 表中选择数据

> ID：16099173
> 
> 赞同：0
> 
> 时间：2013-04-19T07:11:56.287
> 
> 标签：php, javascript, html, mysql

我有网页，我希望用户在文本字段中输入任何数据，因此它应该在 mysql 表中检查，如果类别类似于用户输入的文本，那么这里显示的结果是我的 php 页面代码：

```
 <?php
   $host  = "surveyipad.db.6420177.hostedresource.com"; 
   $user  = ""; 
   $pass  = ""; 
   $database ="surveyipad"; 

   $linkID = mysql_connect($host, $user, $pass) or die("Could not connect to host."); 
   mysql_select_db($database, $linkID) or die("Could not find database."); 

  if (!function_exists('json_encode'))
  {
   function json_encode($a=false)
  {
  if (is_null($a)) return 'null';
  if ($a === false) return 'false';
  if ($a === true) return 'true';
  if (is_scalar($a))
  {
  if (is_float($a))
  {
    // Always use "." for floats.
    return floatval(str_replace(",", ".", strval($a)));
  }

  if (is_string($a))
  {
    static $jsonReplaces = array(array("\\", "/", "\n", "\t", "\r", "\b", "\f", '"'), array('\\\\', '\\/', '\\n', '\\t', '\\r', '\\b', '\\f', '\"'));
    return '"' . str_replace($jsonReplaces[0], $jsonReplaces[1], $a) . '"';
  }
  else
    return $a;
  }
   $isList = true;
   for ($i = 0, reset($a); $i < count($a); $i++, next($a))
  { 
  if (key($a) !== $i)
  {
    $isList = false;
    break;
  }
  }
 $result = array();
 if ($isList)
 {
  foreach ($a as $v) $result[] = json_encode($v);
  return '[' . join(',', $result) . ']';
 }
 else
 {
  foreach ($a as $k => $v) $result[] = json_encode($k).':'.json_encode($v);
  return '{' . join(',', $result) . '}';
 }
 }
 }

   $flu=$_POST['searchCode'];

 $query =mysql_query("SELECT * From catalog_Master WHERE category_Title LIKE '%".$flu."%' ");
 $rows = array();
 while($row = mysql_fetch_assoc($query)) {
 $rows[] = $row;
 }

 echo json_encode($rows);
 ?> 
```

html页面代码

```
 <HTML>
  <head>API TESTING</head>
  <body>
  <form  action="searchCatalog.php" method="post">
  <input type="text" value="enter category"/>
  <input type="submit" value="Enter To Get Value"/>
  </form>

  </body>
  </HTML> 
```

它显示如下错误

```
 Warning: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in /home/content/i/h/u/ihus235/html/cs/pah_brd_v1/productivo/searchCatalog.php on line 63 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:25:58.137

可能问题是你的查询有必要查看查询和mysql错误信息

请试试这个并发布输出

```
$query =mysql_query("SELECT * From catalog_Master WHERE category_Title LIKE '%".$flu."%' ") or die ("query error ".mysql_error()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:18:44.440

看起来`$query`可能有一些错误。这就是为什么没有什么可取的。此外，您的代码不安全。您在`$_POST`不将其转义以进行查询的情况下输入值。

***`mysql_*`***已弃用，您应该`PDO`改用。

`mysql_query()`使用后

```
echo mysql_error(); 
```

并报告它显示的内容。

# java - 当用户在 android 应用程序的文本框中键入位置时，在谷歌地图上显示多个位置并带有标记

> ID：16099178
> 
> 赞同：-1
> 
> 时间：2013-04-19T07:12:14.290
> 
> 标签：java, android

这是我添加的用于在地图上显示位置的代码。但从这里只显示一点。我需要添加多个点。请帮助我完成我的任务。

```
 View.OnClickListener handler = new View.OnClickListener(){
    public void onClick(View v) {

     switch (v.getId()) {
     case R.id.launchmap:                
     final EditText addressfield = (EditText) findViewById(R.id.address);                   
     String addressInput = addressfield.getText().toString(); // Get  input text
     Intent geoIntent = new Intent (android.content.Intent.ACTION_VIEW, Uri.parse ("geo:0,0?q=" +     addressInput)); // Prepare intent
     startActivity(geoIntent);  // Initiate lookupaddressInput 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:22:37.747

您正在使用 Intent 启动 Google Maps 或类似的地图应用程序。

例如，可用的 Intent 记录在[此处](http://www.openintents.org/en/node/62)和官方[Android 文档](http://developer.android.com/guide/appendix/g-app-intents.html)中。遗憾的是，没有记录在案的方法可以在地图上显示一个以上的位置。

如果您想显示带有多个标记的地图，您可能需要将[Google Maps Framework](https://developers.google.com/maps/documentation/android/)直接包含到您的应用程序中

# html - ajax 没有得到 servlet 响应 200 好的

> ID：16099179
> 
> 赞同：0
> 
> 时间：2013-04-19T07:12:14.800
> 
> 标签：html, ajax, servlets

我必须对 servlet 进行 ajax 调用并在 html 中更新页面的一部分。这是我的代码。

```
<html>
<head>
<script type="text/javascript">

function waitForStatus() {
              alert("link clicked");
              var xmlhttp;
              if (window.XMLHttpRequest)  {
                xmlhttp=new XMLHttpRequest();
                }
              else {
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }

               xmlhttp.onreadystatechange = function () {
                    if (xmlhttp.readyState==4 && xmlhttp.status == 200) {
                       alert("Received response text :::: "+ xmlhttp.responseText);
                       document.getElementById("response").innerHTML=xmlhttp.responseText;
                    }
                };
                xmlhttp.open("GET","test",true);
                xmlhttp.send(null);
           return true;
        }
</script>
</head>
<body>
<a href="TestWS.jnlp" onclick="waitForStatus()" >Download webstart & wait for status</a>
<p id="response"></p>
</body>
</html>

And my servlet is as follows:

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        for(int i = 0; i < 5; i ++) {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println("Slept :: "+ i);
        }
        System.out.println("Sending response now");
        response.setContentType("text/plain");
        response.setStatus(HttpServletResponse.SC_OK);
        PrintWriter out = response.getWriter();
        response.setHeader("Access-Control-Allow-Origin", "*");
        out.write("hello second servlet");
        out.close();

    } 
```

我可以在服务器日志上看到 servlet 正在发送 200OK。但是 ajax onreadystatechange 没有得到 xmlhttp.status == 200 并且它没有更新我的字段。我也准备好了状态 = 4。在萤火虫中，它没有显示收到 200 OK。我不知道我做错了什么。有人可以帮忙吗？此代码在 IE 上完美运行。但是在Firefox上，它根本不起作用。我正在从服务器加载 HTML。 `"http://localhost:8080/myproject/index.html"`并且`"http://localhost:8080/myproject/test"`在 IE 和浏览器上都可以正常工作。仅当我从 ajax 调用时，它才不起作用。

```
Regards,
Triveni 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:14:03.497

嘿，只需使用 href="#" 删除 href="TestWS.jnlp" 然后尝试。它将发送响应。

# ios6 - 如果用户拒绝推送通知 ios，则获取设备令牌

> ID：16099180
> 
> 赞同：1
> 
> 时间：2013-04-19T07:12:15.977
> 
> 标签：ios6, apple-push-notifications

我已将推送通知设置到我的新应用程序中。我听说这不是一个好方法，但我使用以下方式获取设备令牌：

```
- (void)application:(UIApplication *)application
didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)newDeviceToken
{

    NSString *deviceToken = [[newDeviceToken description] stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]];
    deviceToken = [deviceToken stringByReplacingOccurrencesOfString:@" " withString:@""];

    NSLog(@"###### DEVICE TOKEN = %@ #########",deviceToken); 

} 
```

对我来说一切都很好，但是我使用此令牌将用户登录到我的基地，但我有一个问题：如果用户拒绝接收推送通知，我如何获得设备令牌？如何在 App Delegate 之外获取设备令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:31:38.003

如果用户不同意接收推送通知，您将无法获取设备令牌。方法

```
- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error 
```

将被调用，但您无法从中获取令牌。

如果您正在寻找唯一标识符，则应考虑使用*identifierForVendor*。请参阅此处的文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/occ/instp/UIDevice/identifierForVendor](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/occ/instp/UIDevice/identifierForVendor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:27:20.517

即使用户拒绝接收推送通知，也会调用此方法。您可以使用 UIRemoteNotificationType 来获取用户选择。

```
- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
    NSLog(@"My token is: %@", deviceToken);

    UIRemoteNotificationType types = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];
    if (types == UIRemoteNotificationTypeNone){
        NSLog(@"User refused to receive push notifications");
    }else{
        NSLog(@"User agreed to receive push notifications");
    }
} 
```

对于第二个问题，您无法在此回调之外从 iOS 获取设备令牌。

# c# - 无法创建“闭包类型”类型的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）

> ID：16099188
> 
> 赞同：1
> 
> 时间：2013-04-19T07:12:39.317
> 
> 标签：c#

我在 SQL 服务器中有表名称 OtherEarningandDeduction 并且列数很少

```
 columns         dataType  
1). Id              guid     as primary key.
2). SalaryHeadId    guid     as FK.
3). Month           varchar 
4). AcademicYearId  guid     as FK
5). .....
6). .....
7). ..... 
```

我想检查表中是否存在相同的记录，所以我在 asp.net 中使用了 Linq。并限制为表中存在的那些记录插入记录。

manager 是实体的对象。

```
OtherEarningandDeduction obj =new OtherEarningandDeduction();

var dublicateCheck=manager.OtherEarningandDeduction.where(x=>x.SalaryHeadId==obj && x.month==obj.month && x.AcademicYearId==obj.AcademicYearId).toList(); 
```

我在上面的行中收到错误...

> 无法创建“闭包类型”类型的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

所以请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:24:54.403

我不是 100% 确定，但我认为问题在于您比较`x.SalaryHeadId`，`obj`而不是`obj.SalaryHeadId`。

我认为这会起作用：

```
var dublicateCheck=manager.OtherEarningandDeduction.where(x=>x.SalaryHeadId==obj.SalaryHeadId && x.Month==obj.Month && x.AcademicYearId==obj.AcademicYearId).toList(); 
```

在您的代码中，您试图将`SalaryHeadId`属性（字段）`x`与实例化对象进行比较，而不是实例化对象的`SalaryHeadId`属性（字段）。因此出现错误消息。

# 3d - 有没有类似3dsom,123d的软件？

> ID：16099189
> 
> 赞同：0
> 
> 时间：2013-04-19T07:12:49.240
> 
> 标签：3d, unity3d, 3dsmax, 3d-modelling, 3ds

我找不到一些用于将 2d 照片转换为 3d 模型的开源项目。欧特克提供的 3Dsom 或 123d 可以使用，但我无法支付。有人在使用类似他们的软件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:35:25.200

也许你可以试试[Make3D](http://make3d.cs.cornell.edu/)。我没有亲自使用它，所以我不能保证它。

# javascript - 使用 jQuery 重置单选按钮

> ID：16099190
> 
> 赞同：3
> 
> 时间：2013-04-19T07:12:50.067
> 
> 标签：javascript, jquery, html, radio-button

我有多个单选按钮。随机检查或选择单选按钮值后，我需要在单击按钮时将单选按钮重置为默认选中或选择的值。我的 HTML 代码如下。

### jQuery

```
function ResetRdo() {
    // Code to reset ?
} 
```

### HTML

```
<table>
    <tr>
        <td>
            <input type="radio" name="rdo1" value="a" checked="checked" />
            A
            <input type="radio" name="rdo1" value="b" />
            B
            <input type="radio" name="rdo1" value="c" />
            C
        </td>
    </tr>
    <tr>
        <td>
            <input type="radio" name="rdo2" value="1" />
            1
            <input type="radio" name="rdo2" value="2" checked="checked" />
            2
            <input type="radio" name="rdo2" value="3" />
            3
        </td>
    </tr>
    <tr>
        <td>
            <input type="radio" name="rdo3" value="1a" />
            1a
            <input type="radio" name="rdo3" value="2b"  />
            2b
            <input type="radio" name="rdo3" value="3c" checked="checked" />
            3c
        </td>
    </tr>
    <tr>
        <td>
            <input type="button" value="Reset" onclick="ResetRdo()" />
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T07:15:06.233

```
$('input[type=radio]').prop('checked', function () {
    return this.getAttribute('checked') == 'checked';
}); 
```

这是小提琴：http: [//jsfiddle.net/DNUdv/](http://jsfiddle.net/DNUdv/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-23T05:14:06.290

这可能会有所帮助。

```
$("input:checked").removeAttr("checked"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T07:19:07.450

您可以为每个单选按钮使用唯一的 ID，例如：

```
<input type="radio" name="rdo1" id="rdo1_a" value="a" checked="checked" /> 
```

现在在函数中：

```
function ResetRdo() {
    $("#rdo1_a").attr('checked') == 'checked';
} 
```

每组使用相同的案例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T07:19:53.233

您可以为复选框提供 id 然后执行

```
 function reset(){ 
   $("#id").attr('checked', 'checked');
  } 
```

# jquery - 最新 jquery colorbox v1.4.14 的问题

> ID：16099191
> 
> 赞同：0
> 
> 时间：2013-04-19T07:12:55.213
> 
> 标签：jquery, fancybox, colorbox

我们最近将 jquery colorbox 更新到了最新版本 v1.4.14。更新后，从颜色框中打开的 jquery UI 模态对话框/花式框内的字段（输入、选择）看起来像只读的。我们无法编辑/输入模式对话框字段的任何文本。

下面是我们用来打开颜色框和花式框（在颜色框内）的代码：

```
$.colorbox({ href: '/Contact/Save/' + Id, width: "1200px", height: "450px", title: 'Loan & Borrow ', overlayClose: false, escKey: false, onLoad: function () { $('#cboxClose').hide() }, onComplete: function () { $('#cboxClose').show() } });

$.fancybox({
        'width': 100,
        'height': 100,
        'transitionIn': 'elastic',
        'transitionOut': 'elastic',
        'speedIn': 600,
        'speedOut': 200,
        'overlayShow': true,
        'overlayOpacity': '0.9',
        'autoScale': false,
        'autoDimensions': false,
        'title': 'Quick Add',
        'titleShow': true,
        'titlePosition': 'over',
        'hideOnOverlayClick': false,
        'centerOnScroll': false,
        'href': '/Contact/_QuickAddLocation',
        'onComplete': function () {
            $("#fancybox-wrap").css({ 'top': '5px', 'bottom': 'auto' });
            $("#fancybox-content").css({ 'padding-top': '35px' });
        }
    }); 
```

它适用于 jquery colorbox 版本 v1.3.19。我们有最新版本 v1.4.14 的解决方法吗？请建议。

# c# - 如何确保 InvokeRequired 不会中止？

> ID：16099192
> 
> 赞同：1
> 
> 时间：2013-04-19T07:12:56.033
> 
> 标签：c#, multithreading, invokerequired

这是我的代码：

```
foreach (var pathCartella in folderList)
{
    try
    {
        // some operation

        if (txtMonitor.InvokeRequired)
        {
            txtMonitor.BeginInvoke(new MethodInvoker(delegate { txtMonitor.AppendText(pathCartella + Environment.NewLine); }));
        }
    }
    catch (Exception err)
    {
        // some operation
        return;
    }
} 
```

但我注意到，如果我捕捉到一个异常，`return`可以在所有`txtMonitor.InvokeRequired`都发送到 UI 之前采取行动，并且我丢失了一些“消息”。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:19:24.727

如果我正确理解您的要求，那么您可以使用 try/catch 块的第三部分 -[最后](http://msdn.microsoft.com/en-gb/library/fk6t46tz%28v=vs.71%29.aspx)

> finally 块对于清理在 try 块中分配的任何资源很有用。不管 try 块如何退出，控制总是传递给 finally 块。该声明采用以下形式：

因此，您的代码将更改为以下形式：

```
foreach (var pathCartella in folderList)
{
    try
    {
        // some operation

    }
    catch (Exception err)
    {
        // some operation
        return;
    }
    finally
    {
        if (txtMonitor.InvokeRequired)
        {
            txtMonitor.BeginInvoke(new MethodInvoker(delegate { txtMonitor.AppendText(pathCartella + Environment.NewLine); }));
        }
    }
} 
```

几个注意事项 - 你确定你只想运行它`InvokeRequired`吗`true`？例如，如果您通过简单的按钮单击运行它，而不是从后台线程运行它，那么代码`InvokeRequired`将`false`永远不会执行。

如果你想知道 finally 是否总是会被调用，那么这个问题已经被问过很多次了。请参阅[如果我从 C# 中的 try/finally 块返回，finally 中的代码是否总是运行？](https://stackoverflow.com/questions/10255774/if-i-return-out-of-a-try-finally-in-c-sharp-does-the-code-in-the-finally-always)例如。这有一些有趣的反例。

您可以考虑的另一个选择是简单地`throw`例外。您可以`pathCartella`作为错误消息的一部分传递，这样您就知道异常发生在哪条路径上，以及异常是什么。然后，您的呼叫者可以处理此问题。例如：

```
foreach (var pathCartella in folderList)
{
    try
    {
        // some operation

    }
    catch (Exception err)
    {
        // some operation

        //The original exception becomes the inner exception (so you can get original
        //error and stack trace etc). The new exception message contains the path.
        throw new Exception(
            String.Format("Failed to perform operation on '{0}'", pathCartella), 
            err);

    }

} 
```

# token - ANTLR：将标记与空格匹配

> ID：16099197
> 
> 赞同：3
> 
> 时间：2013-04-19T07:13:08.543
> 
> 标签：token, antlr3, lexer

我想将带有空格的表达式匹配为单个标记。以下是我的词法分析器规则：

```
HOUR : (INTEGER) ('hour'|'hours') ;
MINUTE : (INTEGER) ('min'|'minute'|'minutes') ;
INTEGER : '0' 'x' (HEXDIGIT)+ | (DIGIT)+ ;
fragment DIGIT    : '0'..'9';
fragment HEXDIGIT : 'a'..'f' | 'A'..'F' | DIGIT;
WS : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+ {skip()}; 
```

如果我使用“ **12hour** ”，我会得到**HOUR**令牌。但我使用“ **12 小时**”，得到 INTEGER 和“小时”。我该怎么做才能让词法分析器将整个“12 小时”作为单个 HOUR 令牌返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:23:19.077

> 如果我使用“12 小时”，我会得到 HOUR 令牌。但我使用“12 小时”，得到 INTEGER 和“小时”。

是的，这是预期的行为。那是因为`WS`仅从解析器规则中跳过。

> 我该怎么做才能让词法分析器将整个“12 小时”作为单个 HOUR 令牌返回？

`HOUR`在您的规则中包含空格字符：

```
// Don't use `WS` in this token, or `skip()` will be  
// invoked and this token will also be skipped!
HOUR : (INTEGER) SPACE* ('hour'|'hours') ;

WS : SPACE+ {skip();};

fragment SPACE : '\t' | ' ' | '\r' | '\n'| '\u000C'; 
```

或者，IMO 首选方式，为这样的事情创建一个解析规则：

```
hour : INTEGER HOUR;

HOUR : 'hour' | 'hours' ;
INTEGER : '0' 'x' (HEXDIGIT)+ | (DIGIT)+; 
```

# devexpress - 如何遍历 XtraBar 中的 DevExpress 菜单项？

> ID：16099200
> 
> 赞同：1
> 
> 时间：2013-04-19T07:13:24.310
> 
> 标签：devexpress

如何遍历 XtraBar 中的 DevExpress 菜单项？

我需要循环遍历 xtrabar 中的所有菜单项，如果满足某些条件，我需要在途中删除某些菜单项？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:27:30.910

尝试以下操作：

```
 foreach (DevExpress.XtraBars.BarItem item in bar.Manager.Items)
    {
       //Do sth.
    } 
```

# c# - 导航到从线程调用的 WPF 窗口

> ID：16099206
> 
> 赞同：0
> 
> 时间：2013-04-19T07:13:47.297
> 
> 标签：c#, wpf, mvvm-light

昨天我遇到了[如何从异步方法回调更新 c# wpf 中的 gui 的问题](https://stackoverflow.com/questions/16080355/how-to-update-gui-in-c-sharp-wpf-from-asynchronous-method-callback)

没有人帮助我，但我发现了一些有用的东西：

```
System.Threading.Thread th = new System.Threading.Thread(new System.Threading.ThreadStart(delegate
{
    this.TargetWindow = new MessageListsWindow();
}));
th.SetApartmentState(System.Threading.ApartmentState.STA);
th.Start(); 
```

今天换窗口有问题，因为那个操作有错误：

> 跨线程操作无效：控件从创建它的线程以外的线程访问。

当我从同步方法调用它时，代码可以工作，但是当我异步调用它时它不会。

换窗方法：

```
public void NavigateToWindow(CustomWindow targetWindow)
{
    CustomWindow currentWindow = findVisualParent<CustomWindow>(this);
    if(currentWindow != null)
    {
        currentWindow.Close();
        //targetWindow.Dispatcher.Invoke(new Action(() => targetWindow.Show()));
        //Application.Current.Dispatcher.BeginInvoke(new Action(() => targetWindow.Show()));
        //targetWindow.Dispatcher.Invoke(new Action(() => targetWindow.Show()));
        //currentWindow.Dispatcher.Invoke(new Action(() => targetWindow.Show()));
        targetWindow.Show();
    }
}
 private T findVisualParent<T>(DependencyObject child)
 where T : DependencyObject
    {
        // get parent item
        DependencyObject parentObject = VisualTreeHelper.GetParent(child);

        // we’ve reached the end of the tree
        if (parentObject == null) return null;

        // check if the parent matches the type we’re looking for
        T parent = parentObject as T;
        if (parent != null)
        {
            return parent;
        }
        else
        {
            // use recursion to proceed with next level
            return findVisualParent<T>(parentObject);
        } 
```

注释代码是我尝试过的，未注释的行适用于同步方法。我读过在 WPF 中这些问题由 dispatcher.invoke() 处理。在我使用的窗口控制表单中：

```
this.Invoke((MethodInvoker)delegate
{
    //changing UI
}); 
```

我不知道该怎么做才能让它工作。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:27:36.123

A`Dispatcher`具有线程亲和性——它为实例化它的线程提供服务。您已经创建了自己的线程，因此该线程将需要自己的调度程序。相反，您使用的是与另一个线程（您的主线程）关联的调度程序。

我看到你在评论中尝试了各种各样的东西，但不清楚你是否`findVisualParent`在尝试过的时候注释掉了。因此，我无法准确告诉您哪里出了问题，但可以告诉您，您正试图从一个未通过其调度程序创建的线程访问 UI 组件。

您需要跟踪您的代码并准确找到哪条线路失败，查看您所在的线程并验证您使用的是正确的调度程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:24:18.840

如果您使用这种方法，您应该先使用[CheckAccess()](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherobject.checkaccess.aspx)方法，然后再调用窗口上的方法来显示和关闭。

如果调用线程有权访问此对象，则 CheckAccess() 返回 true。否则它返回 false 并且您需要使用 Dispatcher 调度您的方法调用。

```
if(currentWindow != null)
    {
        if(currentWindow.CheckAccess()) {
          currentWindow.Close();
        }
        else {
          currentWindow.Dispatcher.BeginInvoke(DispatcherPriority.Normal,
            ()=>{currentWindow.Close();},null);
        }

        if (targetWindow.CheckAccess()) {
            targetWindow.Show();
          }
        else {
            targetWindow.Dispatcher.BeginInvoke(DispatcherPriority.Normal,
            ()=>{targetWindow.Show();},null);
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-30T20:18:15.167

我刚刚将 UI 调度程序保存在一个全局位置，当我想从一个线程切换时，我调用了这样的东西：

> 公共无效ChangetoWindow（）{
> 
> dispatcher.Invoke(() => navigationService.Navigate(new Window())); }

# ruby-on-rails - 轨道布局中的部分视图

> ID：16099214
> 
> 赞同：0
> 
> 时间：2013-04-19T07:14:10.603
> 
> 标签：ruby-on-rails, partial-views

我想在布局页面中呈现部分，即 application.html.erb 和变量。我在布局文件夹“_fellowshi_sider.html.erb”中创建了部分视图，然后在 application.html.erb 中添加了以下代码

```
<%= render  "layouts/fellowship_sider", :entries => @entries  %> 
```

我无法理解在哪里为 @entries 变量设置值。我在 application_controller 中编写了函数，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:24:01.057

如果此部分在您的布局中，那么您可能`@entries`在每次调用时都需要该对象，因此请检查应用程序控制器中的方法是否实际被调用，控制器中的前置过滤器将为每个操作执行此操作。

**应用控制器：**

```
class ApplicationController < ActionController::Base
  before_filter :get_entries

  def get_entries
    @entries = Entry.all
  end
end 
```

完成此操作后，您不需要将`@entries`变量传递给局部，您可以直接在局部视图中访问它。

**布局：**

```
<%= render "layouts/fellowship_sider" %> 
```

**_fellowship_sider.html.erb：**

```
<% @entries.each do |entry| %>
  <%= entry.foo %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:19:06.510

试试这个：

```
<%= render :partial => "layouts/fellowship_sider", :locals => {:entries => @entries } %> 
```

谢谢。

# process - 评测网编辑

> ID：16099215
> 
> 赞同：1
> 
> 时间：2013-04-19T07:14:11.470
> 
> 标签：process, editor, workflow, agent-based-modeling, petri-net

我正在寻找评估网的编辑器（E-net，Petri 网的扩展）。

就像是：

*   [管道 2](https://pipe2.sourceforge.net/)或
*   [WoPeD](http://woped.dhbw-karlsruhe.de/)或
*   [Yasper](http://www.yasper.org/)（但它不是开源的，仅适用于 Windows）。

我只发现[了这个问题](https://stackoverflow.com/questions/5015241/evaluation-nets-web-based-editor-searching-for-the-toolkit)，并没有发现任何关于他的作品的结果。

我正在使用评估网而不是 petri 网来对基于代理的协商协议进行建模，因为在本期中，图表更易于阅读。

# wcf - 无法从 IIS 中托管的多个绑定的服务中获取 wsdl

> ID：16099217
> 
> 赞同：0
> 
> 时间：2013-04-19T07:14:15.690
> 
> 标签：wcf, iis, wsdl

我有一个托管在 IIS7.5 中的 WCF 4.5 服务。该服务对 Net 3.5+ 客户端使用 netTcpBinding，对 Silverlight 5 客户端使用 basicHttpBinding。此绑定上的地址是特定的（**address="SL"**）。ServiceMetadata "httpGetEnabled" 设置为 true。现在我想从 BIRT 使用这个服务，所以我试图获取一个 wsdl 文件。我不知道要使用什么 URL，因为 IIS 拒绝了请求。

以下是配置文件中有趣的部分：

```
<system.serviceModel>
<serviceHostingEnvironment>
  <serviceActivations>
    <add factory="My.CustomServiceHostFactory" relativeAddress="~/My.AdminService.svc" service="My.AdminService" />
  </serviceActivations>
</serviceHostingEnvironment>
<services>
  <service name="My.AdminService">
    <endpoint address="SL" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_SL"
     name="BasicHttpBinding_IAcadmin" contract="My.AdminService.IAcadmin" />
    <endpoint address="" binding="netTcpBinding" bindingConfiguration=""
     contract="My.AdminService.IAcadmin">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration=""
     contract="IMetadataExchange" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" httpGetUrl=""/>
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

该服务在以下 URL 发布：

```
http://localhost/My.AdminService 
```

现在，如果我理解正确，WSDL 地址将是：

```
http://localhost/My.AdminService/My.AdminService.svc/SL/?wsdl 
```

此 URL 被 IIS 拒绝并出现 404 错误。

这似乎是 IIS 问题而不是 WCF 问题。无论如何，我使用的是正确的 URL 吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:19:41.733

你试过了`http://localhost/My.AdminService/SL`吗？这个文件夹存在吗？如果你把纯 html 放在那里 - 你可以在浏览器中打开它吗？

# excel - 如果 B1 为空，则删除 A1 单元格

> ID：16099221
> 
> 赞同：1
> 
> 时间：2013-04-19T07:14:22.090
> 
> 标签：excel

我需要 Office 2007 的 excel 公式。如果单元格`B1`为空，则`A1`通过删除`A1`单元格使其为空。我只想让 A1 为空不想删除整行。

如果`B1`不为空，则保持`A1`值不变。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:17:54.760

在单元格 A1 中插入：

```
=IF(ISBLANK(B1);"";"your value here") 
```

它检查： 如果字段 B1 为空，则插入一个空字符串 ( `""`)，否则插入 ( `"your value here"`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:19:44.040

您不能使用删除单元格的公式。此外，您不能有返回“空”的公式。但是，您可以在单元格 A1 中执行以下操作

```
=IF(ISBLANK(B1),"","Not blank") 
```

所以如果 B1 为空，A1 将是一个空字符串。但如果 B1 也是一个空字符串，那么该公式将使 A1 等于“非空白”。

或者，尽管如果 B1 也是空白，则不可能有一个单元格公式使单元格 A1 空白，但可以在 VBA 宏中执行此操作，例如以下

```
Sub TestCellB1()
    If VarType(Range("B1")) = vbEmpty Then
        Range("A1").ClearContents
    ElseIf VarType(Range("B1")) = vbString Then
        If Len(Range("B1")) = 0 Then
            Range("A1").ClearContents
        End If
    End If
End Sub 
```

如果 B1 为空白或 B1 为空字符串，该宏将清除 A1。要打开对宏的访问，在“流行”下的“Excel选项”对话框中，您需要选择“在功能区中显示开发人员选项卡”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:55:04.537

这个公式适用于我的工作

```
=IF(ISBLANK(B1),"",C1) 
```

我已将 A 列复制到 C。这就是它的工作原理。

# php - 如何将数据附加到 Zend_Auth 对象

> ID：16099227
> 
> 赞同：0
> 
> 时间：2013-04-19T07:14:41.160
> 
> 标签：php, zend-framework, zend-auth

祝大家好日子，

我有以下代码将存储数据附加到`Zend_Auth`对象

```
 $auth        = Zend_Auth::getInstance();

    $dbAdapter   = Zend_Db_Table::getDefaultAdapter();

    $authAdapter = new Zend_Auth_Adapter_DbTable(
    $dbAdapter,
                'account', 
                'email', 
                'password',
                'delete_flag=0'
    );
    //MD5(?) AND  .. add this along with the prev where condn of delete flag...

    $authAdapter->setIdentity($loginDataArray['email'])
    ->setCredential($loginDataArray['password']);

    $result = $auth->authenticate($authAdapter); 
    var_dump($result);

    if ($result->isValid()) {

        $authStorage = $auth->getStorage();

        // the details you wan to store in the session
        $userDetails = array();         

        $userDetails['account_id']    = $account_id;
        $userDetails['email']      = $loginDataArray['email'];

        $authStorage->write($userDetails);
} 
```

现在，我如何在会话的后期添加更多数据。以后如何编辑同一个 Zend_Auth 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:54:43.220

身份验证状态存储在注册的身份验证存储中。默认情况下这是 Zend_Session。你可以通过这个获得会话

```
$namespace = new Zend_Session_Namespace('Zend_Auth'); 
```

然后做这样的事情

```
$namespace->newname = "newvalue"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T08:17:08.903

好的，您不要“编辑” Zend_Auth 身份。你要么有身份，要么没有。您可以通过 Zend_Auth 对象设置、读取、写入或清除存储。

然而，我们中的许多人将相同的数据用于各种显示目的，因此通常有效的解决方案是在存储身份时将数据设置为不同的会话名称空间或注册表项，或者只是更新 Zend_Auth 创建为*chandresh _cool*的*会话*建议。

```
if ($result->isValid()) {

        $authStorage = $auth->getStorage();

        // the details you wan to store in the session
        $userDetails = array();         

        $userDetails['account_id']    = $account_id;
        $userDetails['email']      = $loginDataArray['email'];
        //add user data to registry
        $user = Zend_Registry::set('user', $userDetails);

        $authStorage->write($userDetails);
} 
```

如果您真的想做自己的事情，您可以通过实现来编写自己的存储适配器，或者您可以通过实现并在适配器中包含存储组件`Zend_Auth_Storage_Interface`来编写自己的 Auth适配器。`Zend_Auth_Adapter_Interface`

很多选择，祝你好运。

# c++ - 在 C++ 中对对进行排序时出现内存错误

> ID：16099229
> 
> 赞同：0
> 
> 时间：2013-04-19T07:14:45.697
> 
> 标签：c++, sorting, pointers, struct, coredump

我正在尝试`struct pairs { int i; int j; }`按 i 的值对对 ( ) 进行排序。排序后，我想存储对应的 j 数量最多的对。即 (1,3),(1,4),(2,5),(2,6),(2,7)。我有一个结构 els(int *i,int *j,int count),els[0] 应该有 2,5,,2,6,,2,7,,其中 2 将存储在 i,5,6 j.els[1] 中的 ,​​7 将有 1，它的对应项。在结构 els 中，当我使用对结构时，代码 os 运行良好，但是当我要处理两个单独的数组时，我得到 assert() coredumped 错误。

```
#include<iostream>
#include<time.h>
#include<stdio.h>
#include<math.h>
#include<stdlib.h>
struct pairs
{
    int i;
    int j;
};
struct els
{
        int *i;
    int *j;
    int count;
};
void sortpairs(struct pairs *p,int count);
void sortj(struct pairs *p,int count);
void swapp(struct pairs *p,struct pairs *q);
int random(int min,int max);
int elina(int el,int arr[],int siz);

int main()
{
    struct pairs *pp = new struct pairs[10];
    srand(time(0));
    for(int i = 0;i<10;i++)
    {
        pp[i].i = random(0,10);
        pp[i].j = random(0,10);
    }
    std::cout <<"BEFORE\n";
    for(int i = 0;i<10;i++)
    {
        std::cout << pp[i].i <<"       "<<pp[i].j<<"\n";
    }
    sortj(pp,10);
    std::cout << "Done Sorting\n";
    std::cout <<"AFTER\n";
    for(int i = 0;i<10;i++)
    {
        std::cout << pp[i].i <<"       "<<pp[i].j<<"\n";
    }
    sortpairs(pp,10);

    return 0;
}

void swapp(struct pairs *p,struct pairs *q)
{
    struct pairs temp;
    temp = *p;
    *p = *q;
    *q = temp;
}

int random(int min,int max)
{
    int n;
    n = rand()%(max - min) + min;
    return n;
}

int elina(int el,int arr[],int siz)
{
    for(int i = 0 ;i < siz;i++)
    {
        if(arr[i] == el)
            return i;
    }
    return -9;
}

void sortj(struct pairs *p,int count)
{
for(int i = 0 ; i < count - 1;i++)
    for(int j = i + 1;j < count;j++)
    {
        if(p[i].i > p[j].i)
            swapp(&p[i],&p[j]);
    }
}

void sortpairs(struct pairs *p,int count)
{
    int *arr = new int[count];
    int unqc = 0,az = 0,t;
    int  i;
    for(i = 0; i< count ;i++)
    {
        arr[i] = p[i].i;
        if(t = elina(arr[i],arr,i) < 0)
            unqc++;
    }
    az = i;
    std::cout <<"The Unique Elements are "<<unqc<<"\n";
    struct els *e = new struct els[unqc];
    int ec = 0;
    //e[0].i = new struct pairs[10];
    e[0].i = new int[10];
    e[0].j = new int[10];
    e[0].count = 0;
    for(int j = 0 ; j < count;j++)  
    {
        if(j > 0)
        {
            if(p[j].i == p[j-1].i)
            {
            //e[ec].p[count].i = p[j].i;
            //e[ec].p[count].j = p[j].j;
            e[ec].i[count] = p[j].i;
            e[ec].j[count] = p[j].j;
            e[ec].count++;
            }
            else
            {
            ec++;
            //e[ec].p = new struct pairs[10];
            e[ec].i = new int[10];
            e[ec].j = new int[10];
            e[ec].count = 0;
            //e[ec].p[count].i = p[j].i;
            //e[ec].p[count].j = p[j].j;
            e[ec].i[count] = p[j].i;
            e[ec].j[count] = p[j].j;
            e[ec].count++;
            }
        }
        else
        {
            //e[ec].p[count].i = p[j].i;
            //e[ec].p[count].j = p[j].j;
            e[ec].i[count] = p[j].i;
            e[ec].j[count] = p[j].j;
            e[ec].count++;
        }
    }
    for(int j = 0 ; j < unqc;j++)
    {
        std::cout << e[j].count <<"\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:23:14.593

在各个地方

```
 e[ec].i[count] = p[j].i;
        e[ec].j[count] = p[j].j; 
```

应该

```
 e[ec].i[e[ec].count] = p[j].i;
        e[ec].j[e[ec].count] = p[j].j; 
```

如果您使用`std::vector`了`new`then ，您会发现此代码更容易编写，并且错误和限制更少。

# python - 烧瓶蓝图文件结构

> ID：16099230
> 
> 赞同：3
> 
> 时间：2013-04-19T07:14:47.073
> 
> 标签：python, flask, blueprint

我对烧瓶蓝图有些烦恼

我的项目结构：

```
hw
...run.py
...sigcontoj
......__init__.py
......admin
.........__init__.py
.........views.py
.........models.py
......frontend
.........__init__.py
.........views.py
.........models.py 
```

运行.py：

```
from sigcontoj import create_app
from sigcontoj.frontend import frontend

app = create_app(__name__)

if __name__ == '__main__':
    print app.url_map
    print app.blueprints
    app.run(debug = True) 
```

sigcontoj__init__.py：

```
from flask import Flask
from flask.ext.sqlalchemy import SQLAlchemy
from sigcontoj.frontend import frontend

db = SQLAlchemy()

def create_app(name=__name__):
    app = Flask(name, static_path='/static')
    app.register_blueprint(frontend, url_prefix=None)
    app.secret_key = 'dfsdf1323jlsdjfl'
    app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///soj.db'
    db.init_app(app)
    return app 
```

sigcontoj\frontend__init__.py：

```
from flask import Blueprint

frontend = Blueprint('frontend', __name__, template_folder='templates') 
```

sigcontoj\前端\models.py：

```
from datetime import datetime
from sigcontoj import db

class News(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(256))
    content = db.Column(db.Text)
    publish_time = db.Column(db.DateTime, default=datetime.now())

    def __repr__(self):
        return '<News : %s>' % self.title 
```

sigcontoj\前端\views.py：

```
from sigcontoj.frontend.models import News
from sigcontoj.frontend import frontend

@frontend.route('/')
def index():
    news = News.query.all()[0:5]
    return "hello world" 
```

的输出`app.url_map`是

```
Map([' (HEAD, OPTIONS, GET) -> 静态>])
```

并且索引页是404。

我的代码有什么错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T22:26:22.927

您遇到的问题是，即使您导入了`frontend`蓝图，因为您从不导入`views`( `index`)`/`路由也从未注册过`frontend`. 如果您更新`sigcontoj/__init__.py`为 import `sigcontoj.frontend.views`：

```
from flask import Flask
from flask.ext.sqlalchemy import SQLAlchemy
from sigcontoj.frontend import frontend
import sigcontoj.frontend.views 
```

那么一切都应该工作。

# php - PHP登录系统 - 通过电子邮件或用户名使用户登录

> ID：16099233
> 
> 赞同：0
> 
> 时间：2013-04-19T07:14:52.040
> 
> 标签：php, mysql

我想问我如何只使用一个功能通过电子邮件或用户名登录用户。我试过这段代码

```
 function loginemail($username,$password)
{
    $timestamp = time();
    $time = date("d/m/y h:i:s a", $timestamp);
    $sql = mysql_query("SELECT * FROM users WHERE username ='$username'");
    $sql = mysql_query("SELECT * FROM users WHERE email ='$username'");
    $row = mysql_fetch_assoc($sql);
    $maintenance = mysql_query("SELECT * FROM settings");
    $row2 = mysql_fetch_assoc($maintenance);
    $main = $row2['maintenance'];

if($main == 1)
{
    if($row['password'] == $password && $row['username'] == $username)
    {
        $query = mysql_query("INSERT INTO log (id,username,time,action) VALUES 

(NULL,'$username','$time','Login')");
        if(!$query)
        {
            echo "FAILED";
        }
        else
        {
        $_SESSION['username'] = $row['username'];
        header('Location: /dash');
        }
    }
    elseif($row['password'] == $password && $row['email'] == $username && $row['rank'] == 5)
    {
        $user = $row['username'];
        $_SESSION['username'] = $row['username'];
        $_SESSION['email'] = $row['email'];
        header('Location: /user/chooser');
    }
    else
    {
        header("Location: /index/error");
    }
}
else
{
    if($row['password'] == $password && $row['username'] == $username)
    {
        $query = mysql_query("INSERT INTO log (id,username,time,action) VALUES 

(NULL,'$username','$time','Login')");
        if(!$query)
        {
            echo "FAILED";
        }
        else
        {
        $_SESSION['username'] = $row['username'];
        header('Location: /dash');
        }
    }
    elseif($row['password'] == $password && $row['email'] == $username)
    {
        $user = $row['username'];
        $_SESSION['username'] = $row['username'];
        $_SESSION['email'] = $row['email'];
        header('Location: /user/chooser');
    }
    else
    {
        header("Location: /index/error");
    }
}
} 
```

但它不适用于用户名部分。现在我已将代码更改为使用 php oop。所以这是我当前的代码。

```
class User {

    public function check($uname,$passwd)
    {
            $p=md5($passwd);
            $run=mysql_query("SELECT * FROM users WHERE username='$uname'");
            $user_data = mysql_fetch_array($run);
            $row=mysql_num_rows($run);
            if ($row == 1)
            {
                $_SESSION['login'] = true;                                                  $_SESSION['username'] = $user_data['username'];
                header('Location: /dash');
            }
            else
            {
                return FALSE;
            }
    }

    public function logout()
    {
        $_SESSION['login'] = FALSE;
            session_destroy();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:17:55.677

改变这个

```
$sql = mysql_query("SELECT * FROM users WHERE username ='$username'");
$sql = mysql_query("SELECT * FROM users WHERE email ='$username'");
$row = mysql_fetch_assoc($sql); 
```

至

```
$sql = mysql_query("SELECT * FROM users WHERE username ='$username' or email = '$username'");
$row = mysql_fetch_assoc($sql); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T07:23:21.787

尝试这个：

```
$user = mysql_query("SELECT * FROM users WHERE (username = '$username' OR email = '$email') AND password = '$password'"); 
```

**编辑**

由于输入的登录名是用户名或电子邮件，

```
$user = mysql_query("SELECT * FROM users WHERE (username = '$login_name' OR email = '$login_name') AND password = '$password'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:07:21.190

```
<form action="login.php" method="post">

    Username* <br/><input type="text" name="login_username" /><br/>
    Password* <br/><input type="password" name="login_pass" /><br/>

    <br/>
    <input type="submit" value="submit" />

</form> 
```

我做了这样的登录。和后端：

```
<?php
    $username = $_POST['login_username'];
    $pass = $_POST['login_pass'];

    define(MYSQL_HOST,"localhost");
    define(MYSQL_USER,"youruser");
    define(MYSQL_PASS, "yourpassword");

    include "classes/MySQL.class.php";

    $db = new MySQL();
    $db->Connect("localhost","youruser","yourpassword");
    $db->selectDb("testproject");

    if(!isset($_SESSION)) { session_start(); }

    $result = "SELECT * FROM `registration` WHERE `username` = '".$username."' and `pass` ='".md5($pass)."';";
    $db->Query($result) or trigger_error($db->Error());

    $row = $db->getRow();

    if(!empty($row))
    {
        $_SESSION['error_login']="You are a validated user.";
        header("Location: thx3.php");
    }
    else
    {
        $_SESSION['error_login']="Sorry, your credentials are not valid, Please try again.";
        header("Location: home.php");
    }

?> 
```

希望它会帮助你。当然你必须做出改变，但这对我来说非常有效。

# c# - 将 ASP.Net 网站翻译成另一种语言

> ID：16099234
> 
> 赞同：3
> 
> 时间：2013-04-19T07:14:54.507
> 
> 标签：c#, asp.net, translation

我需要将一个用英语制作的网站翻译成西班牙语（不需要多语言支持）。该网站将仅以西班牙语使用，因此无需费心实施“资源”或本地化。

需要翻译的文本位于两个位置：

*   HTML 页面中的静态
*   在代码后面，例如错误消息等。

其余数据（DB、XML 等）已经整理好。

**那么，如上所述，是否有任何工具或方法可以不费时地提取所有文本？** *提取的文本甚至不需要在键/值对中。我很乐意将提取的文本以一种简单的格式提取出来，每个文本都由一个新行分隔。*

将翻译的文本替换回其原始位置的方法会很好。但是，这不是必需的。我很乐意只提取所有内容。

请尽量坚持按原样回答问题（例如，使用谷歌显示网站的翻译版本等解决方案并没有真正的帮助！）。

非常感谢你。

（这是一个用 C# 编写的带有代码隐藏的 ASP.Net 网站）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T15:52:05.323

尽管您当前要求该网站仅翻译成西班牙语，但您永远无法知道您未来对其他语言的要求 - 由于这个和其他原因，默认的 ASP.NET 键/值对资源文件解决方案非常有意义。

在服务器上使用本地资源文件（在预设模式中有效地是 XML）可以避免每次页面加载时昂贵的数据库往返（尽管这可以通过输出缓存来缓解），并且可以很容易地发送你的短语用于翻译 - 所有短语都在同一个文件中的一个位置。鉴于 .NET 无处不在，有一系列工具可用于处理它们。甚至可以[使用 Bing 翻译资源文件，让您的翻译人员抢占先机](http://www.guysmithferrier.com/post/2009/09/Automatically-Translating-resx-Files-Using-Microsoft-Translator.aspx)。

考虑到在多个上下文中使用相同字符串的问题（可能需要或有必要为每个上下文以不同方式翻译文本 - 单词并不总是共享），使用键而不是匹配字符串文字很有意义不同语言中相同的可能含义）或大写等问题，您可能希望相同的字符串具有不同的大小写（尽管这在编程上不应该是一个不可克服的问题）。

最后，使用 ASP.NET 中的内置本地化 API 可以轻松地根据用户在其计算机上选择的区域设置更改语言和 UI（例如日期格式） - 并由浏览器在请求标头中发送。一位说西班牙语的访问者出现在您的网站上，并且它已经是西班牙语 - 无需寻找控件以根据标志或下拉列表更改语言。如果需要，这可以由您手动设置或覆盖，当然仅当您的站点*具有*适合该语言环境的资源文件时才适用，但这是一个非常强大的开箱即用功能。

如果您使用的是 ASP.NET Web 窗体，那么我肯定会推荐使用[Resharper 为您提取字符串到命名键的](http://www.jetbrains.com/resharper/webhelp/Resources__Refactorings__Move_to_Resource.html)建议，但您应该知道，如果您使用的是 ASP ，它还[不能使用 Razor 视图执行此](http://youtrack.jetbrains.com/issue/RSRP-316349)操作。 NET MVC 或网页 - 尽管在 MVC 的情况下它仍会提供从模型中移动字符串（并且确实鼓励您这样做）。

最后，请注意本地化不仅仅是语言——您的用户可能会使用不同的日期、数字、电话号码格式，甚至在某些情况下会使用不同的文本方向。这可能不适用于您的项目，但肯定需要注意。

# mongodb - 在 Lithium 中使用 MongoDB upsert

> ID：16099236
> 
> 赞同：1
> 
> 时间：2013-04-19T07:14:58.620
> 
> 标签：mongodb, lithium

我在使用 MongoDB 在 Lithium 中执行 upsert 时遇到了一点问题。更新工作正常，但它不会插入。我的代码是：

```
Feeds::update(
    array('data' =>
        array('user_id' => 
            array('$addToSet' => $user["_id"]) 
        )
    ), //what to change
    array('conditions' => 
        array('address' => $address)
    ), //where to change it
    array('upsert' => true)
); 
```

这应该对应于 MongoDB 查询：

```
db.osmblags.update( { "address" : "test address" }, { $addToSet : { "user_id" : "56" } }, { upsert : true } ); 
```

查询和 PHP 代码都不起作用。他们是 $addToSet 的替代品，它不允许 user_ids 数组中的重复项吗？

（对不起，我对 Lithium 和 Mongo 都是新手

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:49:59.480

的前两个参数似乎存在问题`update()`。这些参数用于数据和条件，因此您不需要传递的数组中的那些键。尝试这个。

```
Feeds::update(
    array('$addToSet' => 
        array('user_id' => $user["_id"]) 
    ), //what to change
    array('address' => $address), //where to change it
    array('upsert' => true)
); 
```

我不确定为什么查询不能直接在 MongoDB 中为您工作。这对我来说很好。

# html - 如何消除滚动文本跳转

> ID：16099247
> 
> 赞同：4
> 
> 时间：2013-04-19T07:15:50.103
> 
> 标签：html, css, firefox

我最近发现了一些问题，尝试了所有可能的方法，但没有任何成功。无论如何，让我们直奔主题：我有一些文本，并且我有一个强标题（即使用默认的强标签），我遇到了一些问题，由于某种原因，标题部分在向下滚动时会跳起来，虽然内容（正文）文本保持固定而不会跳起来，但我该如何解决这个问题？

这是我的标题文本的 CSS：

```
.title {
    display: inline-block;
    font-size: 16px;
    font-weight: bold;
    line-height: 16px;
    margin-bottom: 8px;
    max-width: 282px;
    white-space: nowrap;
} 
```

提前致谢！

**编辑：对不起，我在该代码中做了一些问题，这是重现相同问题的问题，即文本在滚动时跳转：**

[http://jsfiddle.net/WL67y/7/](http://jsfiddle.net/WL67y/7/)

截屏：

![在此处输入图像描述](https://i.stack.imgur.com/KIUJh.png)

**（左）**这是滚动前的标题文本，**（右）**滚动后或向下滚动时。

似乎我的FF有问题，不知道为什么，在屏幕上渲染似乎有问题，同样的事情发生在FF的一个插件中，即：Firebug。当我滚动时，代码似乎也跳到了那里。

整个问题：元素在 Firefox 中滚动时闪烁。闪烁一点。

**如果有人有解决方案或以前经历过类似的事情，并且知道如何解决，请提供解决方案或告诉我解决方案，我无法解决此问题，我无法解决此问题的原因是在过去的几个月里，我写了超过 4000 行 CSS**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:29:18.577

用于蓝线的设备可能存在问题。检查以确保它与您的其余标签匹配。(em, px, % 等)

# javascript - 将单词附加到前面的单词时，jQueryUI 自动完成不显示

> ID：16099250
> 
> 赞同：2
> 
> 时间：2013-04-19T07:16:03.353
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

在我的项目中，我在 TextField 中使用 jQuery UI Autocomplete 插件。我编写了以下代码，它工作正常：

```
<textarea id="result" rows="4" cols="50"></textarea> 
```

* * *

```
$('#result').autocomplete({
    source: sugData
}); 
```

现在我简单地解释一下这个问题：

如果有这样的话：

```
 I go to school
 I am a boy
 I play cricket 
```

然后当我输入`I`文本字段时，服务器将响应`go, am, play`并将其存储在`sugData`变量中。现在，当我在（附加）`go`之后开始输入时`I`，自动完成建议不会显示任何要填写的建议。我知道这是因为`I go`不等于存储在`sugData`ie中的数组中的任何可用数据`go, am, play`。

无论如何要解决这个问题？

**PS**：我将文本字段中的完整文本发送到服务器端，这是必要的。

**编辑**：如果我只考虑发送到服务器的最后一个词，那么服务器将响应`I`而不是`go, am, play`. 因此，不可能只修剪最后一个单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:22:15.450

代替静态对象，给源属性一个函数，将请求和响应函数作为参数。

*   使用 request.term 来获取源词。
*   过滤自己的 sugData 并将结果用作响应函数调用的参数。

有关作为函数实现的源的更多信息，请访问有关它的 jquery ui 文档。

# javascript - 如何在 forEach 或迭代中访问 Javascript 对象的成员

> ID：16099254
> 
> 赞同：-1
> 
> 时间：2013-04-19T07:16:18.900
> 
> 标签：javascript

我有一个名为 numObj 的对象，我创建了一个包含 numObj 对象数组的 numArrary。当我尝试使用 foreach 调用它的内部成员时，结果发现它无法访问。为什么？

```
 var numObj = function (num) {
        return {
            num:num
        }
    }
    var numArray = [];
    for (var i = 0; i < 3; i++) {
        numArray[i] = numObj(i);
    }
    numArray.forEach(
        function () {
            alert(this.num); //undefined
        }
    ); 
```

此外，当我获得更深层次的内在对象时，我在 VS 中失去了智能。任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:19:19.547

该条目作为第一个参数传递给`forEach`迭代器，因此：

```
numArray.forEach(
    function (obj) {    // Declare the argument
        alert(obj.num); // Use it
    }
); 
```

[`forEach`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.18)不`this`用于条目（例如，jQuery 的类似函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:28:44.387

尝试这个：

```
 var numArray = [{1:1},{2:2}];

   numArray.forEach(function(value,index){
         console.log(value,index,this);//{1:1},0 window
   }); 
```

`this`- 指窗户

[小提琴](http://jsfiddle.net/6V8Ft/)

# asp.net-mvc-3 - 如何在 asp.net MVC razor 中生成下拉列表

> ID：16099258
> 
> 赞同：13
> 
> 时间：2013-04-19T07:16:58.363
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4

在我的剃须刀中，我正在生成这样的下拉列表。

```
 @{
        var listItems = new List<ListItem> 
        { 
              new ListItem { Text = "Home To School", Value = "0" }, 
              new ListItem { Text = "School To Home", Value = "1" } 
        };
    }

@Html.DropDownList("Direction", new SelectList(listItems),new {onchange = "getAlldata()"}) 
```

由此生成的HTML是这样的

```
<select id="Direction" name="Direction" onchange="getAlldata()">
<option>Home To School</option>
<option>School To Home</option>
</select> 
```

但我想生成这样的 HTML

```
<select id="Direction" name="Direction" onchange="getAlldata()">
<option value="0">Home To School</option>
<option value="1">School To Home</option>
</select> 
```

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-19T07:29:31.033

Use it like this

```
@Html.DropDownList("Direction", new SelectList(listItems , "Value" , "Text"),new {onchange = "getAlldata()"}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T07:22:38.723

[以下](http://www.mikesdotnetting.com/Article/128/Get-The-Drop-On-ASP.NET-MVC-DropDownLists)是一些如何`DropDownList`使用 Razor 构建的示例，例如 using `SelectListItem`：

```
public ActionResult Index()
{
  var db = new NorthwindEntities();
  IEnumerable<SelectListItem> items = db.Categories
    .Select(c => new SelectListItem
                   {
                     Value = c.CategoryID.ToString(), 
                     Text = c.CategoryName
                   });
  ViewBag.CategoryID = items;
  return View();
} 
```

**编辑：**

检查这个：

```
@Html.DropDownList("Direction", new List<SelectListItem>
{
  new SelectListItem{ Text = "Home To School", Value = "0" },
  new SelectListItem{ Text = "School To Home", Value = "1" } 
},new {onchange = "getAlldata()"}) 
```

# java - Singleton 类中双重检查锁定模式的潜在问题

> ID：16099266
> 
> 赞同：3
> 
> 时间：2013-04-19T07:17:19.077
> 
> 标签：java, singleton, double-checked-locking

我相信我写的下面的 Singleton 类是`Thread Safe`.

在某些情况下，双重检查锁定模式显然可能会遇到问题（我已经看到人们警告过它，尽管这是不久前的事情，所以我现在只是在谷歌上搜索答案）

我现在不确定，我下面的 Singleton 类中的 Double Checked 锁定模式是否会有任何问题。我添加了双重检查锁定模式，以使程序运行得稍微快一些。

```
 public class CassandraAstyanaxConnection {

        private static CassandraAstyanaxConnection _instance;
        private static final Object syncObject = new Object();
        private AstyanaxContext<Keyspace> context;
        private Keyspace keyspace;
        private ColumnFamily<String, String> emp_cf;

       public static CassandraAstyanaxConnection getInstance() {
            if (_instance == null) {
                     synchronized(syncObject) {
                        if (_instance == null) {
                            _instance = new CassandraAstyanaxConnection();
                        }
                   }
            }
              return _instance;
       }

        /**
         * Creating Cassandra connection using Astyanax client
         *
         */
        private CassandraAstyanaxConnection() {

            context = new AstyanaxContext.Builder()
            .forCluster(ModelConstants.CLUSTER)
            .forKeyspace(ModelConstants.KEYSPACE)
            .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()      
                .setDiscoveryType(NodeDiscoveryType.RING_DESCRIBE)
            )
            .withConnectionPoolConfiguration(new ConnectionPoolConfigurationImpl("MyConnectionPool")
                .setPort(9160)
                .setMaxConnsPerHost(1)
                .setSeeds("127.0.0.1:9160")
            )
            .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()      
                .setCqlVersion("3.0.0")
                .setTargetCassandraVersion("1.2"))
            .withConnectionPoolMonitor(new CountingConnectionPoolMonitor())
            .buildKeyspace(ThriftFamilyFactory.getInstance());

            context.start();
            keyspace = context.getEntity();

            emp_cf = ColumnFamily.newColumnFamily(
                ModelConstants.COLUMN_FAMILY, 
                StringSerializer.get(), 
                StringSerializer.get());
        }

        /**
         * returns the keyspace
         * 
         * @return
         */
        public Keyspace getKeyspace() {
            return keyspace;
        }

        public ColumnFamily<String, String> getEmp_cf() {
            return emp_cf;
        }
    } 
```

我的代码在上面的 Singleton 类中是否存在双重检查锁定模式的问题？

以及创建单例类线程安全的最佳方法是什么。那么持有人类成语呢？我可以在我的单身课程中使用它吗？

我上面的单例类的任何示例都将帮助我更好地理解如何编写更好的线程安全单例类。

谢谢您的帮助。

**更新代码：-**

经过一些建议，我对代码进行了更改-

```
public class CassandraAstyanaxConnection {

   private static class ConnectionHolder {
       public static CassandraAstyanaxConnection connection = new CassandraAstyanaxConnection()
   }

   public static CassandraAstyanaxConnection getInstance() {
        return ConnectionHolder.connection;
   }

   /**
    * Creating Cassandra connection using Astyanax client
    *
    */
    private CassandraAstyanaxConnection() {

        context = new AstyanaxContext.Builder()
        .forCluster(ModelConstants.CLUSTER)
            .forKeyspace(ModelConstants.KEYSPACE)
            .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()      
                .setDiscoveryType(NodeDiscoveryType.RING_DESCRIBE)
            )
            .withConnectionPoolConfiguration(new ConnectionPoolConfigurationImpl("MyConnectionPool")
                .setPort(9160)
                .setMaxConnsPerHost(1)
                .setSeeds("127.0.0.1:9160")
            )
            .withAstyanaxConfiguration(new AstyanaxConfigurationImpl()      
                .setCqlVersion("3.0.0")
                .setTargetCassandraVersion("1.2"))
            .withConnectionPoolMonitor(new CountingConnectionPoolMonitor())
            .buildKeyspace(ThriftFamilyFactory.getInstance());

            context.start();
            keyspace = context.getEntity();

            emp_cf = ColumnFamily.newColumnFamily(
                ModelConstants.COLUMN_FAMILY, 
                StringSerializer.get(), 
                StringSerializer.get());
        }

        /**
         * returns the keyspace
         * 
         * @return
         */
        public Keyspace getKeyspace() {
            return keyspace;
        }

        public ColumnFamily<String, String> getEmp_cf() {
            return emp_cf;
        }
} 
```

让我知道这是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:28:02.243

我非常喜欢以下惰性初始化单例模式：

```
public final class CassandraAstyanaxConnection {

   ...

   private static class ConnectionHolder {
       public static CassandraAstyanaxConnection connection = new CassandraAstyanaxConnection()
   }

   public static CassandraAstyanaxConnection getInstance() {
        return ConnectionHolder.connection;
   }

   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:19:32.167

创建线程安全的单例类的最好方法是使用枚举

```
public enum CassandraAstyanaxConnection {

       INSTANCE;
       //fields

        public void initializeConnection() {
            //Move work from private constructor here.
        }

} 
```

我想这样的事情应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T07:30:03.237

您的 DCL 已损坏，_instance 必须是 volatile 才能正常工作

```
private static volatile CassandraAstyanaxConnection _instance; 
```

在您的情况下，最好的解决方案是

```
private static CassandraAstyanaxConnection _instance = new CassandraAstyanaxConnection();
...
public static CassandraAstyanaxConnection getInstance() {
    return _instance;
} 
```

因为 getInstance() 是唯一的公共方法，所以它是惰性的。只有当您调用 getInstance() 类时才会加载并创建实例。这就是 Holder 成语的含义。在您的情况下，您不需要它。整个班级都像那个成语一样工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T07:28:36.487

一个好的单身人士：

1- 上课`final`。

2-制作`static`实例`final`。

3-覆盖`readResolve()`以返回实例。

4-为了完美，从`clone()`.

5-同步`getInstance()`。

6-制作默认构造函数`private`。

按照[这个](http://www.javaworld.com/jw-02-2001/jw-0209-double.html)来看看双重检查锁定习语是否真的有效。

最好的方法是使用`enum`. 这种东西：

```
public enum DBConn{
 CON_INSTANCE;
 private CassandraAstyanaxConnection connection;
 public synchronized CassandraAstyanaxConnection getConnection(){
   if(connection == null){
      // instantiate a connection
   }
   return connection;
 }
} 
```

通过访问它`DBConn.CON_INSTANCE.getConnection();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T07:29:26.200

如果要对静态字段进行延迟初始化，最好的模式是“使用持有者类进行延迟初始化”：

```
public class CassandraAstyanaxConnection {
    private static class ConnectionHolder {
       static final CassandraAstyanaxConnection field = 
              new CassandraAstyanaxConnection();
    }

    public static CassandraAstyanaxConnection getInstance() { 
         return ConnectionHolder.field; 
    }
...
} 
```

在这种情况下，延迟初始化由 JVM 保证，在`ConnectionHolder`类加载之前不会初始化该字段。

# ios - 如何从 URL 方案中检索参数值

> ID：16099267
> 
> 赞同：3
> 
> 时间：2013-04-19T07:17:22.110
> 
> 标签：ios, unity3d

我一直在开发 iPad 应用程序。我们已经`myapp://?foo=1&bar=2`为我们的应用程序设置了 URL 方案（例如 ），这样当用户点击页面中的链接时，我们的应用程序将在 iPad 上打开。

问题是如何从代码中的 URL 方案中检索参数值？

有一些方法可以从应用程序入口点检索它，但我不知道应用程序的入口点在本机代码中的位置。我们通过 Unity3D 开发了该应用程序。那么有没有办法直接从 Unity 应用程序中检索参数值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:23:16.830

试试这样，也许它会帮助你：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    NSLog(@"url recieved: %@", url);
    NSLog(@"query string: %@", [url query]);
    NSLog(@"host: %@", [url host]);
    NSLog(@"url path: %@", [url path]);
    NSDictionary *dict = [self parseQueryString:[url query]];
    NSLog(@"query dict: %@", dict);
    return YES;
} 
```

# windows-phone-8 - 适用于 Windows (Phone) 8 应用程序的 libz 或/和 libpng

> ID：16099269
> 
> 赞同：0
> 
> 时间：2013-04-19T07:17:29.367
> 
> 标签：windows-phone-8, windows-8, zlib, libpng, libz

问题很简单。在为 W(P)8 构建时，您不能编译 .c 文件或使用旧的 C 语法代码（函数参数被指定两次的代码）。

Libpng 在 C++ 下很容易编译，因为它不使用旧的语法代码，但 libz 不是。我一直无法找到适合这些环境的 libz 替代品。

我尝试了 MiniZ，它缺少（不知道为什么）对 inflatereset 等函数的定义，然后我发现没有解决方案可以在 Windows Phone 8 下从本机 C++ 代码加载 pngs（您可以在 Windows 8 上使用 WIC，但该库不存在用于 ARM 构建）。

还有这个：[https](https://github.com/doo/ZIP-WinRT) ://github.com/doo/ZIP-WinRT但它使用托管类并且仅在您想提取 zip 文件时才有用。以前的 libz 依赖代码不会编译，我需要它来让 libpng 基本上编译。

如果您不知道这些标志的含义，请不要发表评论

“Windows 应用商店应用支持”

“使用 Windows 运行时扩展”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T19:50:19.893

zconf.h 中的“OF(args)”宏写入了额外的函数参数集。您应该能够通过将宏 OF(args) 定义为 () 来摆脱它们。您可以通过编译命令、makefile 或其他任何方式发送定义，或者您可以手动编辑 zconf.h 并放入

```
#define OF(args)  () 
```

就在之前

```
#ifndef OF /* function prototypes */ 
```

# c++ - 包括头文件与实现文件中的文件（C++）

> ID：16099271
> 
> 赞同：8
> 
> 时间：2013-04-19T07:17:38.990
> 
> 标签：c++, header, implementation

在头文件中包含头文件与在实现文件中包含头文件有什么区别？

这个

前任：

```
// test.h
#include"globals.h"

class Test
{
    Test();
}; 
```

对比

```
//test.cpp
#include"globals.h"

Test::Test()
{
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T07:21:18.170

一般原则是您希望尽可能合理地减少依赖关系，因此：

*   如果您的*接口*(.h) 引用了给定标头中的任何内容，则该标头需要在接口 (.h) 中#included

*   如果你只在你的*实现*（.cpp）中引用一个给定的头文件（而不是在你的接口中），那么你应该只在实现中#include那个头文件

*   您还应该尝试仅 #include 实际需要的标头，尽管这在大型项目的生命周期中可能难以维护

因此，对于上面的示例，如果您在 test.h 中没有引用 globals.h 中的任何内容，但在 test.cpp 中确实引用了它，那么#include 应该进入 test.cpp。如果您在 test.h 中引用 globals.h 中的任何内容，那么您需要 test.h 中的#include。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:25:07.200

如果您包含一些特定于实现的外部头文件，您最好将它们包含在 cpp 文件中，以减少头文件对 API 文件的依赖。在 cpp 文件中包含第三方标头是一种隐藏数据的好方法，这样图书馆用户就不会对您的参考资料了解太多。

将头文件包含在需要它们的地方是一种很好的做法，以增加代码的资格并使您的项目易于修改以供将来开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:21:18.890

没有区别。`.h`文件用于定义类和变量，而`.cpp`文件是实现。

我们用：

*   `#include <>`当 lib/h 文件在 lib 文件夹中可用时。
*   `#include ""`当它存在于当前文件夹中时..（未给出lib路径）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T07:22:37.753

唯一编译的是`.cpp`文件。

实际上，这不是真的，从 生成的文件`.cpp`被编译。

生成此其他文件时，`#include`指令有效地将包含文件的内容复制并粘贴到生成的文件中。

这就是正在发生的一切。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T07:24:03.527

据我所知，在源文件或头文件中包含头文件没有任何区别。请注意，#include 是一个预处理器宏，它所做的只是在包含头文件的位置替换头文件的内容。

在上面的示例中，如果 globals.h 看起来像这样，

```
#ifndef GLOBALS_H_
#define GLOBALS_H_

#define MYGLOBAL_VARIABLE 10

#endif /* GLOBALS_H_ */ 
```

预处理器完成其工作后的源文件将如下所示。

```
/* #include "globals.h" */
#ifndef GLOBALS_H_
#define GLOBALS_H_

#define MYGLOBAL_VARIABLE 10

#endif /* GLOBALS_H_ */

Test::Test()
{
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T07:27:04.820

`#include`是一个简单的文本替换。该行将替换为上述文件的内容。所以，如果你在 Bh 中包含 Ah，在 C.cpp 中包含 Bh，那么 Ah 的内容最终会被粘贴到 C.cpp 中。

我们通常会尽量避免这样的 headers-in-headers。通常可以使用前向声明来代替。例如`class Global;`。最大的例外是基类。定义派生类的标头必须包含基类的标头。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-19T07:27:44.683

如果您以标头和库的形式将代码作为 API 提供，那么您必须确保定义接口的头文件中不包含内部私有头文件。在这种情况下，您将所有私有文件包含在 CPP 文件中，该文件将被编译并位于 .lib 或 .a 或 .dylib 文件中。否则这对使用你的 API 的用户来说是个问题。

您应该确保包含在标头中的文件 globals.h 可以在包含 test.h 的位置访问。如果不是这种情况，则在 CPP 文件中包含 globals.h。

# object - 如何在 openCV 中使用 cascade.xml 进行对象识别

> ID：16099272
> 
> 赞同：0
> 
> 时间：2013-04-19T07:17:47.783
> 
> 标签：object, opencv, pattern-matching

我已经使用 haar 训练模块在 openCV 中生成了级联 xml。现在如何将它用于对象识别。？

请帮忙。！！_/_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:18:08.837

按照关于对象检测的 opencv[文档](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html?highlight=cascadeclassifier#CascadeClassifier)，您必须创建级联检测器对象和`::load`要应用的级联（您生成的 xml 文件）。 `::detectMultiScale`用于通过滑动不同尺度和大小的窗口并合并高置信度的接近样本来填充`std::vector<cv::Rect>`当前帧中检测到的对象。

代码[在这里](http://code.opencv.org/projects/opencv/repository/revisions/master/raw/samples/cpp/tutorial_code/objectDetection/objectDetection.cpp)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:31:12.737

如果您使用 haartraining，您可以使用“opencv_performance.exe”。你可以在“opencv\bin...\”中找到它，但如果你有 cascade.xml，这意味着你使用了 traincascade。没有已经构建的 bin 来检查您的级联。您可以在“opencv\samples\cpp\tutorial_code\objectDetection”中找到示例。

# core-data - 将多个属性保存到同一个核心数据实体

> ID：16099275
> 
> 赞同：0
> 
> 时间：2013-04-19T07:17:55.063
> 
> 标签：core-data, nsmanagedobject, nsmanagedobjectcontext

我是第一次使用核心数据并尝试学习核心数据。

从具有两个属性的员工示例开始。1.姓名 2.工资

现在我完成了从数据库加载数据所需的所有必要事情。我得到了我之前保存的值。

但问题是我只能保存员工表的一个属性。第一次我只保存了员工的姓名。然后当我成功时，我尝试用薪水保存名称然后我得到 [NSManagedObject setSalary:]: unrecognized selector sent to instance 0x7472d80 异常。

这是我的代码。

```
 - (IBAction)setBtnTouched:(id)sender {

     Employee *newEmp = [NSEntityDescription
                insertNewObjectForEntityForName:@"Employee"
                inManagedObjectContext:context];

    [newEmp setName:self.textFieldName.text];

    [emp addObject:newEmp];

/* this is the code that i added after success in saving for employee name.*/
    //[newEmp setSalary:self.textFieldSal.text];
    //[emp addObject:newEmp];
*/
     BOOL isSaved = [context save:nil];
  NSLog(@"is saved %d",isSaved);

NSLog(@"emp :%@",emp);

} 
```

我不明白我哪里出错了，因为两者都是同一实体的属性。

请写信给这个线程。

编辑：屏幕截图 ![在此处输入图像描述](https://i.stack.imgur.com/xZg69.png) 问候，paggyyy123

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:10:21.870

确保您的`NSManagedObject`子类包含正确的属性名称访问器。

```
// Employee.m
@dynamic Salary 
```

另外，请注意，您要将新员工添加到您的数组中`emp`两次。一旦属性完成，这两个将是相同的。

# javascript - Javascript：网页的 PDF 导出按钮

> ID：16099277
> 
> 赞同：6
> 
> 时间：2013-04-19T07:17:56.750
> 
> 标签：javascript

我想要任何指针或资源，我可以在哪里获得一个 java 脚本，该脚本允许我网站上的导出按钮将我的当前页面导出为 pdf。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T08:36:40.513

我认为没有允许创建 pdf 文件的 javascript 库。Mozilla 在 js 中实现了完整的 PDF 阅读器，并将其包含在最新的 Firefox 中，但这是一个庞大的库。**编辑**：有 jspdf 似乎能够做到这一点。

我认为您应该使用服务器端 PDF 引擎。

DOMPdf 是一个 PHP 库，它允许将带有 CSS、图像等的完整 HTML 渲染到 PDF 文档。它甚至有一个示例 php 脚本，它放在服务器上允许将提交的 html 转换为 PDF。

您的 javascript“按钮”应该只获取 document.getElementsByTagName('html')[0].innerHTML 并将该 HTML 发布到 DOMPdf 脚本。您应该从中获得或多或少正确的 PDF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:21:24.437

按照 Zend_Pdf 的链接：http: [//framework.zend.com/manual/1.12/en/zend.pdf.html](http://framework.zend.com/manual/1.12/en/zend.pdf.html)

您也可以尝试 jspdf：http: [//jspdf.com/](http://jspdf.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T07:40:04.500

我无法得到您的要求，我希望您需要获取网页的 pdf。

如果我的理解是正确的，请参考下面的链接

[http://www.hiqpdf.com/demo/ConvertHtmlToPdf.aspx](http://www.hiqpdf.com/demo/ConvertHtmlToPdf.aspx)

另请参阅现有的[ITextSharp HTML to PDF 帖子？](https://stackoverflow.com/questions/2822843/itextsharp-html-to-pdf)

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T08:53:46.187

为此目的使用[wkhtmltopdf 。](http://code.google.com/p/wkhtmltopdf/)我正在使用它来生成 html 页面的 pdf。

但是单独使用 javascript 是不可能的。您必须有一些服务器端代码。

# php - 通过 PHP 的 exec 在 Linux Web 服务器上执行二进制文件

> ID：16099278
> 
> 赞同：0
> 
> 时间：2013-04-19T07:17:59.037
> 
> 标签：php, linux, exec

### 更新

我的目录结构如下

```
http://domainname.com/developer/clientName/ppt/phantom/    // inside this phantom folder, all files are present 
```

在与 Bass Jobsen 聊天并查看服务器错误日志后，我发现日志中列出了这一点

```
[Tue Apr 23 08:31:34 2013] [error] [client xxx.xxx.xx.xxx] sh: line 1: 29443 
Segmentation fault /home/xyz/public_html/developer/clientName/ppt/phantom/phantomjs --version 2>&1 
```

==================================================== =================================

### 概括

我正在尝试在我的服务器上执行二进制文件。调用二进制文件`phantomJS`，主要用于创建网页的屏幕截图。

我登录到我的 cPanel 并找到有关我的服务器的以下信息：

```
Operating system : Linux
Architecture     : i686 
```

所以我继续`phantomjs-1.9.0-linux-i686.tar.bz2`从 phantomJS 网站下载。我上传了`phantomjs`位于`bin`下载文件夹内的文件（我刚刚上传了一个名为 的文件，`phantomjs`大小约为 38 MB。我假设我不需要下载附带的任何其他文件。那里是一个`examples`文件夹和一些`ReadMe`s和其他`.txt`文件）

我还将另外三个文件上传到存在的同一文件夹中`phantomjs`：

1.  `test.php`（这是将在浏览器中执行的主文件）
2.  `test.js`（其中包含启动 phantomjs 的代码）
3.  `createScreenshot.php`（其中包含输出一些 HTML 的代码）

所以所有文件都在同一个文件夹中。因此，不应该因为路径错误而出现问题。

### 测试.php

```
exec('phantomjs test.js'); 
```

### 测试.js

```
var page = require('webpage').create();
var url = 'createScreenshot.php';
page.open(url, function (status) {
    page.render('test.png');
    phantom.exit();
}); 
```

### 创建屏幕截图.php

```
echo '<h1>This should be converted to an image</h1>'; 
```

## 问题

现在，当我浏览到 时`www.mydomain.com/test/test.php`，我得到的只是一个空白页，这很好，因为唯一应该发生的是在`test`文件夹中创建图像，但这永远不会发生。没有错误被输出。我也试过把`error_reporting(E_ALL)`inside `test.php`，但仍然没有显示错误，只是一个空白页。

### 调试

我决定测试是否`exec`在我的服务器上启用。我这样做是通过使用

```
echo exec('whoami'); 
```

这打印出我的 cPanel 用户名。所以这个方法`exec`是有效的。

我做的下一件事是检查文件夹权限。`test`文件夹有`755`权限，所以也有`phantomjs`。我尝试将两者都更改为，`777`但这也无济于事。

这让我相信`phantomjs`文件有问题。我不知道下一步该尝试什么。我确信我从 phantomJS 网站 ( `phantomjs-1.9.0-linux-i686.tar.bz2`) 下载了正确的包。

我还能做些什么来调试这个问题吗？

### 更多调试

跑步

```
echo exec("ls -lh"); 
```

打印出来

```
-rw-r--r-- 1 abc abc 1.8K Apr 6 05:15 third-party.txt 
```

这`third-party.txt`是在保存`phantomjs`二进制文件的文件夹中，但我想知道为什么只打印了一个文件名。php 和 js 文件也与`third-party.txt`. 不过，在上面的输出中并不确定`1`代表什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-27T10:13:30.007

如果通过 FTP 上传二进制文件，它可能会由于 FTP 客户端更改文件内的行结尾而损坏。

要解决此问题，请将传输模式更改为二进制（在 FileZilla 中：传输 -> 传输类型 -> 二进制）。

[[资源]](https://code.google.com/p/wkhtmltopdf/issues/detail?id=289)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T10:05:24.900

When you use exec or any of its sister functions, try specifying the file with an **absolute** path -> exec, shell_exec, etc **DO NOT WORK** on my servers with a relative path.

If youre on shared hosting it'll be different of course, but something like:

```
exec('/var/www/html/script')
//or if youre on a shared server it would be something more like
exec('/user2342jh/www-docs/html') 
```

I went through a bit of a hair-pulling situation years ago working with this very type of thing.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T20:53:15.047

我已经尝试过您所做的相同操作。

测试.php：

```
<?
error_reporting(E_ALL);
ini_set('display_errors', 1);
echo exec('./phantomjs-1.9.0-linux-i686/bin/phantomjs ./test.js 2>&1');
exit; 
```

而不是`./`我也可以使用`$_SERVER['DOCUMENT_ROOT']`.

我的 test.js：

```
var page = require('webpage').create();
page.open('http://github.com/', function () {
page.render('github.png');
phantom.exit();
}); 
```

所有文件都在我的文档根目录 (/var/www/) 中。Test.php 从网络服务器运行，phantomjs 在通过 调用时也是如此`exec()`。运行网络服务器的用户（www-data 需要权限）来编写“github.png”。为此，我使用 chmod 0777 /var/www/。现在一切正常。

没有 chmod test.php 给我一个空白页。phantomjs 不会打印错误。

注意不要在生产环境中更改根目录的权限。为您的屏幕截图创建新目录并对其进行 chmod 并在 test.js 中更改保存路径

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T14:05:49.293

在运行 IMAGEMAGICK 库时，我遇到了类似的问题`exec`。奇怪的是**exec**似乎无法正确找到某些可执行文件的路径。因此，`convert`我不得不使用完整的应用程序路径，而不是只使用`/usr/bin/convert`。要查找完整的应用程序路径，请在终端中键入以下内容：

```
type -a YOUR_COMMAND 
```

另一个建议：使用 PHP 的**exec**命令的可选参数，这是手册中的定义：

```
string exec ( string $command [, array &$output [, int &$return_var ]] ) 
```

我能够在第三个参数的帮助下跟踪我的问题，它返回执行语句的状态。如果您获得 127 作为状态，您肯定必须使用应用程序的完整路径！

# c# - TFS 构建测试结果

> ID：16099280
> 
> 赞同：54
> 
> 时间：2013-04-19T07:18:03.143
> 
> 标签：c#, unit-testing, tfs, build, tfsbuild

我们正在开发 Visual Studio 2010 和 TFS 2010。我们有自己的 BuildTemplate，它是默认模板的副本，但有一些附加功能，例如（创建目录...），但重点是 DefaultTemplate 中的所有内容 -离开了。

我们已经编写了同样有效的“单元”测试。我已经制定了运行所有单元测试的构建定义。已阅读此处的信息 - [http://geekswithblogs.net/jakob/archive/2009/06/03/tfs-team-build-2010-running-unit-tests.aspx](http://geekswithblogs.net/jakob/archive/2009/06/03/tfs-team-build-2010-running-unit-tests.aspx) 以及许多其他地方。

构建运行完美，唯一不起作用的是构建摘要 - 测试结果，代码覆盖率，如上面的链接。

因此，当我在构建应用程序时查看活动日志时，它显示：

```
Run MSTest for Test Assemblies
c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\MSTest.exe /nologo /usestderr /testSettings:"C:\Builds\7\**Project**\**BuildName**\Sources\**ProgramName**\**ProgNameAndVersion**\Solutions\**SolutionName**\localtestrunDebug.testrunconfig" /searchpathroot:"C:\Builds\7\**Project**\**BuildName**\Binaries" /resultsfileroot:"C:\Builds\7\**Project**\**BuildName**\TestResults" /testcontainer:"C:\Builds\7\**Project**\**BuildName**\Binaries\**TestProjectName**.dll" /publish:"http://***:8080/tfs/MSLN" /publishbuild:"***:///Build/Build/14599" /teamproject:"**ProjectName**" /platform:"x86" /flavor:"**Release**" 
Loading C:\Builds\7\**Project**\**BuildName**\Sources\**ProgramName**\**ProgNameAndVersion**\Solutions\**SolutionName**\localtestrunDebug.testrunconfig...
Loading C:\Builds\7\**Project**\**BuildName**\Binaries\**TestProjectName**.dll...
Starting execution...

Results               Top Level Tests
-------               ---------------
Failed                ***.Test.***
Failed                ***.Test.***
Failed                ***.Test.***
Passed                ***.Test.***
Passed                ***.Test.***
Inconclusive          ***.Test.***
Inconclusive          ***.Test.***
Passed                ***.Test.***
<many other tests>
...
5/154 test(s) Passed, 147 Failed, 2 Inconclusive

Summary
-------
Test Run Failed.
Failed        147
Passed          5
Inconclusive    2
-----------------
Total         154
Results file:  C:\Builds\7\**Project**\**BuildName**\TestResults\***tfsbuild_***TFSBUILDER 2013-04-19 10_03_42_x86_Release.trx
Test Settings: Local Test Run 
```

并且在构建摘要的末尾是空白的：

1 个项目/解决方案已编译 无测试结果 无代码覆盖率结果

**为什么它不显示链接中的测试结果：http:** [//geekswithblogs.net/jakob/archive/2009/06/03/tfs-team-build-2010-running-unit-tests.aspx](http://geekswithblogs.net/jakob/archive/2009/06/03/tfs-team-build-2010-running-unit-tests.aspx)

我是 TFS 的初学者，所以请用简单的语言提供建议来帮助我 =)

此链接似乎已移至（2019-09-23 编辑）：[https ://blog.ehn.nu/2009/06/tfs-team-build-2010-executing-unit-tests/](https://blog.ehn.nu/2009/06/tfs-team-build-2010-executing-unit-tests/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-27T18:43:09.813

您可能没有查看测试结果所需的权限。请检查您的权限，例如使用 TFS 2010 电动工具或其他工具。使用 TFS Power Tool，您可以转到团队 > 团队项目设置 > 安全并检查您所在组的**查看测试运行**权限。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2018-02-13T19:06:29.947

您还可以将 .trx 文件复制到工作区。

# java - REST API 设计和改变“合同”？

> ID：16099282
> 
> 赞同：4
> 
> 时间：2013-04-19T07:18:04.900
> 
> 标签：java, api, rest

我正在设计 RESTful API。结果将采用 JSON 对象的形式。我不需要将 POJO 类中的所有字段都发送给客户端，所以我应该定义某种“合同”。

假设我有一个 Property 类，我为它定义了 id、name 和 address。稍后，我可能想在不影响客户的情况下将地址更改为 geoData。

有没有一些优雅的方式（模式）来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T07:34:38.393

为您的 REST 设计创建版本控制。当你开始创建新的实现时，使用新的 URI 来定义它。例如创建具有相似参数的新 URI，但版本不同：

*   OLD 实现 /ver1/retrieve/user（仍在维护中）
*   新实现 /ver2/retrieve/user

通过这样做，客户端仍然能够毫无问题地检索具有旧实现的用户。但是，当您决定再次更改实现时，最好冻结旧版本的 API（例如在实现 v3 API 时，您应该通知客户端不再支持旧版本 1 API）

更多信息可以在这里找到 ：

[如何对 REST URI 进行版本控制](https://stackoverflow.com/questions/972226/how-to-version-rest-uris)

[对 RESTful 服务进行版本控制](http://codebetter.com/howarddierking/2012/11/09/versioning-restful-services/)

# php - 如何处理大量数据以获得良好的性能？

> ID：16099283
> 
> 赞同：0
> 
> 时间：2013-04-19T07:18:08.150
> 
> 标签：php, mysql

我有一些大小为 1mb 到 2mb 的文件（我一次需要一个文件），我想使用这些文件加载​​到我的网站上`fopen()`，然后在网站上显示相关信息。我必须不时阅读这些文件以在文件中搜索并显示信息：

所以我想知道哪个选项在性能方面更好，

1.  我是否应该使用打开文件`fopen()`然后使用。

2.  我是否应该将文件数据转换为数组然后加载和使用。

3.  我是否应该将所有数据插入 MySQL，然后获取和使用。

4.  我是否应该加载/获取信息然后将其序列化，然后将其保存到文件中并将其用于所有未来用途。

或者是否有其他可用选项。

数据是这样的，大约有 30,000 行：

```
1000,Asther,Asther Path,0,50,,70,5,2,,5,FFF,7,2,,24,,45,,{ "is a good girl" },{},{} 
1001,Sinkn,Sinkn Keth,0,50,,70,,7,34,6,FFF,7,2,65,3,,67,,{ "Like flower" },{},{} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:23:36.267

如果你只有 1 个文件来加载数据，那么文件比 MySQL 更容易做。文件中的数组定义将是一个更好的选择（节省解析/反序列化的时间）。

如果你有很多文件，那么`fopen`逐个扫描目录和文件会很慢。将文件转换为数组/序列化数据并没有多大帮助。PHP 中的文件操作和目录扫描比 MySQL 慢。MySQL 会自动索引您的数据，因此对于任何复杂的搜索它都会比 PHP 更好。在这种情况下，MySQL 将是一个更好的选择。

# c# - 如何访问列表中对象的属性？

> ID：16099288
> 
> 赞同：0
> 
> 时间：2013-04-19T07:18:25.867
> 
> 标签：c#, .net, generic-list

我正在尝试从类型列表中获取属性并将它们放在另一个列表中。我不确定您如何遍历对象列表以访问属性。

例如：

```
List<images> myImages = new List<images>();

List<string> typeOfImage = new List<string>();

typeOfImage.Add(myImages.type); 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:20:20.683

尝试这个：

```
typeOfImage = myImages.Select(image => image.AnyPropertyYouNeed).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:20:28.527

```
if (myImages.Count < 0)
   typeOfImage.Add(myImage[0].GetType().ToString()); 
```

# jsf - JSF portlet 的顺序影响 ice:inputRichText 的呈现

> ID：16099290
> 
> 赞同：1
> 
> 时间：2013-04-19T07:18:40.207
> 
> 标签：jsf, liferay, portlet, icefaces

我有两个单独的 JSF portlet 战争，它们都有不同的库和配置。页面上的单个 portlet 工作正常，但是当我在同一页面上放置两个 portlet 并且如果首先放置使用 ice:inputRichText 的 portlet 时，RichText 不会呈现并抛出 js 错误，如下所示：

```
Uncaught TypeError: Cannot call method 'updateValue' of undefined 
```

虽然它工作正常，但使用richText 的portlet 放在最后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:45:42.990

您使用的是什么版本的 ICEfaces？

我使用 ICEfaces 已经有很长时间了，但我记得必须`<ice:portlet>`在 facelet 的根目录中包含一个标签，以确保每个 portlet 都具有正确的命名空间，因此 Javascript 不会在页面上的不同 portlet 之间发生冲突。

# single-sign-on - 在 Alfresco 中测试外部 SSO

> ID：16099293
> 
> 赞同：0
> 
> 时间：2013-04-19T07:18:49.007
> 
> 标签：single-sign-on, alfresco, alfresco-share

我将我的 alfresco 配置为使用外部 SSO。现在尝试通过在jsp页面中编写一个简单的java代码来测试它。代码在这里发布；

```
 URL url1 = new URL("http://localhost:8080/share/page"); 
        HttpURLConnection conn = (HttpURLConnection) url1.openConnection();
        conn.setRequestProperty("x-alfresco-remote-user", "admin"); 
        System.out.println("Request URL ... " + url1);
        for (int i = 0;; i++) { 
            String headerName = conn.getHeaderFieldKey(i);  
            String headerValue = conn.getHeaderField(i);   
            System.out.println(headerName + "===");  
            System.out.println(headerValue);  
            if (headerName == null && headerValue == null) {     break;   } 
        }
        String sessionValue = conn.getHeaderField("Set-Cookie").substring(0,conn.getHeaderField("Set-Cookie").indexOf(";"));
        sessionValue = sessionValue.substring(sessionValue.indexOf("=")+1);
        conn.setInstanceFollowRedirects(false);  
        HttpURLConnection.setFollowRedirects(false); 

        String newUrl = conn.getHeaderField("Location");

        String cookies = conn.getHeaderField("Set-Cookie");

        // open the new connnection again
        conn = (HttpURLConnection) new URL(newUrl).openConnection();
        conn.setRequestProperty("JSESSIONID", sessionValue);
        conn.addRequestProperty("_alfTest", "_alfTest");
        conn.addRequestProperty("_alfTest", "_alfTest");

        conn.addRequestProperty("alfUsername3", "admin");

        System.out.println("SECOND");
        for (int i = 0;; i++) { 
            String headerName = conn.getHeaderFieldKey(i);  
            String headerValue = conn.getHeaderField(i);   
            System.out.println(headerName + "===");  
            System.out.println(headerValue);  
            if (headerName == null && headerValue == null) {     break;   } 
        }

        conn.connect();
         dis = new BufferedReader( 
                                 new InputStreamReader(
                                     conn.getInputStream()));

        while ((myString = dis.readLine()) != null)
        {

            System.out.println(myString);
        }

        response.setHeader("JSESSIONID", sessionValue);
        response.setHeader("_alfTest", "_alfTest");
        response.setHeader("alfUsername3", "admin");
        response.sendRedirect(newUrl); 
        %> 
```

输出变得像：

```
 Request URL ... http://localhost:8080/share/page
        null===
        HTTP/1.1 302 Found
        Server===
        Apache-Coyote/1.1
        Set-Cookie===
        JSESSIONID=7F9DCDE35B45B91D245E3B544B29F8D2; Path=/share/; HttpOnly
        Cache-Control===
        no-cache
        Location===
        http://localhost:8080/share/page/user/admin/dashboard
        Content-Type===
        text/html;charset=utf-8
        Content-Language===
        en-US
        Content-Length===
        0
        Date===
        Fri, 19 Apr 2013 07:03:04 GMT
        null===
        null
        http://localhost:8080/share/page/user/admin/dashboard
        SECOND
        null===
        HTTP/1.1 200 OK
        Server===
        Apache-Coyote/1.1
        Set-Cookie===
        JSESSIONID=334D167D21B0910981804ECD14619D66; Path=/share/; HttpOnly
        Cache-Control===
        no-cache
        Content-Type===
        text/html;charset=utf-8
        Content-Language===
        en-US
        Transfer-Encoding===
        chunked
        Date===
        Fri, 19 Apr 2013 07:03:04 GMT
        null===
        null
        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">  ....... the full html content of logged in user home page goes here. 
```

但是通过 response.sendRedirect(newUrl); 重定向时 ，它再次询问用户名和密码。我怎样才能避免这种情况？需要在这里获取登录用户的主页。

# sql-server - sql-server插入语句输出子句不起作用

> ID：16099303
> 
> 赞同：0
> 
> 时间：2013-04-19T07:19:10.887
> 
> 标签：sql-server, insert, output

我做了一些研究，发现获取新插入行的 id 的最佳解决方案是输出子句。我是第一次使用插入语句输出子句，但无法弄清楚。

这是我的sql代码。这个sql有什么问题？

```
ALTER PROCEDURE [dbo].[MedBul_Insert_Message]      
                                              (@ParentID int, @MessageFrom varchar(500),@MessageTo varchar(500), @MessageSubject varchar(500),@MessageBody varchar(4000),@MessageIsRead int)
AS
BEGIN
    SET LANGUAGE Turkish;

Declare @message_id table (MessageID int);

insert into Messages output INSERTED.ID INTO @message_id (ParentID ,MessageFrom ,MessageSubject ,MessageBody ,MessageIsRead ) values(@ParentID ,@MessageFrom ,@MessageSubject ,@MessageBody ,@MessageIsRead );

END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T07:27:11.083

该`OUTPUT`子句应位于列列表*之后：*

```
insert into Messages (ParentID ,MessageFrom ,MessageSubject ,MessageBody ,MessageIsRead )
output INSERTED.ID INTO @message_id (MessageID)
values(@ParentID ,@MessageFrom ,@MessageSubject ,@MessageBody ,@MessageIsRead ); 
```

请参阅[`INSERT`](http://msdn.microsoft.com/en-gb/library/ms174335.aspx)文档。

（而且，显然，你需要对现在的内容*做*`@message_id`一些实际的事情，但我认为你还没有写或者只是没有在你的问题中显示，存储过程的其余部分）

# vbscript - 脚本任务在检查最后修改日期时锁定文本文件

> ID：16099316
> 
> 赞同：-1
> 
> 时间：2013-04-19T07:19:49.933
> 
> 标签：vbscript, ssis

我们有两台服务器，分别是 ServerA 和 ServerB。在 ServerA 中，一个包将从 FTP 加载文本文件，该文本文件由 ServerB 中的另一个包推送。这两个包几乎同时运行。

ServerA 中的包将在加载之前检查 FTP 中源文件的最后修改日期。如果最后修改日期与当前日期相同，它将加载文件。如果日期不同，它将等待 10 秒并检查最后修改的日期并将其与当前日期进行比较。这将一直发生，直到服务器 B 将最新文件推入 FTP 路径。我通过脚本任务完成了此操作。

问题是，如果服务器 A 中的脚本任务已经启动（开始每 10 秒检查一次最后修改日期）并且服务器 B 中的包试图将数据导出到同一个文件，它会抛出一个错误说`"The file is used by the another process"`。我该如何解决这个问题？请给我建议。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:58:46.140

有几种方法可以处理这个问题，例如：

*   在导入脚本中启用错误处理 ( `On Error Resume Next`) 并跳过导入，或者循环直到其他进程完成对文件的写入。请注意，错误处理是危险的，因为它会有效地抑制所有未明确处理的错误消息。仅在本地启用它，并在不再需要时立即禁用它 ( `On Error Goto 0`)。

*   让导出脚本创建一个锁定文件，在导出完成后将其删除，并让导入脚本在尝试导入数据文件之前检查是否缺少该锁定文件。

*   让导出脚本将数据导出到一个临时文件，并在导出完成后重命名该临时文件。

# javascript - 将字符串拆分为所需的格式并从中创建一个数组

> ID：16099321
> 
> 赞同：1
> 
> 时间：2013-04-19T07:20:12.843
> 
> 标签：javascript

我有一个字符串，我想在每个字符串之后将其中断`</div>` 并插入到数组中。以下是字符串。

```
"<DIV title='Run of Network' id='525000000'>Run of Network</DIV>
<div title='3dServer11' id='525001499'>3dServer11</div>" 
```

我想过使用`split()`函数，但由于这不是逗号分隔的字符串，我无法准确理解我应该如何打破字符串并生成一个数组。在数组中，我想要单个 div 条目，例如：

```
a[0] = <DIV title='Run of Network' id='525000000'>Run of Network</DIV>
a[1] = <div title='3dServer11' id='525001499'>3dServer11</div>" 
```

任何人都可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:27:39.003

我不建议您使用`split`方法拆分 HTML 字符串或[使用正则表达式对其进行解析](https://stackoverflow.com/a/1732454/1249581)。使用 DOM 方法操作元素总是更好：

```
var str = "<DIV title='Run of Network' id='525000000'>Run of Network</DIV>\
           <div title='3dServer11' id='525001499'>3dServer11</div>",
    div = document.createElement("div"),
    arr = [];

div.innerHTML = str;
arr = Array.prototype.slice.call(div.getElementsByTagName("div"));
arr = arr.map(function(e) { return e.outerHTML; });  // to create strings
                                                     // out of DOM elements
console.log(arr); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T07:26:01.260

尝试

```
<div id="container"></div>
<script>
$(document).ready(function () {
    var str = "<div title='Run of Network' id='525000000'>Run of Network</div><div title='3dServer11' id='525001499'>3dServer11</div>";
    $("#container").html(str);
    for (i = 0; i < $("#container").children().length; i++) {
        alert($("#container").children()[i].innerHTML);
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T07:55:36.213

**更新**：

如果您有一个想要执行相同操作的 DOM 元素，请编写一个小型 jQuery 插件：

```
(function($) {
    $.fn.splitDOMStringsByTag = function( selector ) {
        var resultsArray = [];

        this.find( '> ' + selector).each(function() {
            resultsArray.push( $(this)[0].outerHTML.replace( /[\s\n\r]+/g, ' ' ) );
        });

        return resultsArray;
    };
})( jQuery ); 
```

**这是如何工作的：**

假设你有以下 DOM

```
<ul id="abc">
    <li>One </li>
    <li>Two </li>
    <li>Three </li>
    <li>Three 
        <ul>
            <li>Three point five</li>
        </ul>
    </li>
    <li>Four </li>
</ul> 
```

然后，您将执行以下操作：

```
var myArray = $('#abc').splitDOMStringsByTag('li'); 
```

并得到以下输出

```
myArray; // console
["<li>One </li>", "<li>Two </li>", "<li>Three </li>", "<li>Three <ul> <li>Three point five</li> </ul> </li>", "<li>Four </li>"]

myArray[3] // console
"<li>Three <ul> <li>Three point five</li> </ul> </li>" 
```

* * *

**使用普通 JS 的旧答案**

```
var ipt = "<DIV title='Run of Network' id='525000000'>Run of Network</DIV><div title='3dServer11' id='525001499'>3dServer11</div>",
    dummyDiv = document.createElement("div"),
    divList = [],
    a = [];

dummyDiv.innerHTML = ipt;
divList = Array.prototype.slice.call(dummyDiv.getElementsByTagName("div"));

for (var i = 0; i < divList.length; i++) {
    a.push(divList[i]);
} 
```

这会给你你想要`a`的

```
a[0] = <DIV title='Run of Network' id='525000000'>Run of Network</DIV>
a[1] = <div title='3dServer11' id='525001499'>3dServer11</div> 
```

要获取字符串，只需使用`a[0].outerHTML`

```
a[0].outerHTML;

// Console Output
"<div title="Run of Network" id="525000000">Run of Network</div>" 
```

# java - 子查询结果不成功

> ID：16099322
> 
> 赞同：0
> 
> 时间：2013-04-19T07:20:14.627
> 
> 标签：java, sqlite, jdbc, subquery

我在 sqlite 查询结果中的子查询有问题。当执行以下查询成功返回 Sqlite 数据库中的结果但​​运行程序时它不返回任何值。我在下面的程序中做错了什么。请指教。

询问：

```
select * from (SELECT count(*), col2,col9,col4 FROM tbl_data_1  WHERE col4=6  AND col3 BETWEEN '2012-11-21' AND '2013-04-19' GROUP BY col2,col9,col4) as inr_qry where col2= '20016' and col9='3' 
```

java中的程序：

```
Vector<Vector> dataList = new Vector();
for (int i =0; i < listRows.size(); i++){
    Vector cols = new Vector();             
    cols.add(listRows.get(i));
    for (int j = 1; j < listColumns.size(); j++){
        // below query will be dynamic
        String inner_query = "select * from (SELECT count(*), col2,col9,col4 FROM tbl_data_1  WHERE col4=6  AND col3 BETWEEN '2012-11-21'               AND '2013-04-19' GROUP BY col2,col9,col4) as inr_qry where col2= '20016' and col9='3'";

        PreparedStatement data_st = database.getConnection().prepareStatement(inner_query);
        ResultSet data_rs = data_st.executeQuery();
        while (data_rs.next())  { // result not successful, result set not having records
            SLogger.printD("data_rs.getString(1): " +data_rs.getString(1));
            cols.add(data_rs.getString(1));
        }
    }
    dataList.add(cols);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:25:00.570

你不需要`PreparedStatement`。而是使用这个：

```
Statement stmt = database.getConnection().createStatement(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:23:15.920

听起来很奇怪，但正如预期的那样，你可以尝试使用

```
getInt(1) 
```

代替

```
getString(1) 
```

# sql - SQLite sql查询没有随机返回一条记录

> ID：16099333
> 
> 赞同：0
> 
> 时间：2013-04-19T07:20:52.240
> 
> 标签：sql, sqlite

每当我运行它时，我都希望从查询中获得不同的记录。但有些记录返回两次或更多。逻辑必须如何解决，以便在此查询的每个循环中随机获取一条记录？

`//Looping starts here`

```
SELECT * FROM(
SELECT *,ims_2012_modifiye.id AS imsID, ims_2012_modifiye.ilac_id AS ilacID, ims_2012_modifiye.ilac_adi_duzgun AS iaDuzgun 
FROM ims_2012_modifiye 
LEFT JOIN ilaclar ON ims_2012_modifiye.ilac_id=ilaclar.id WHERE ims_2012_modifiye.ilac_id NOTNULL AND ims_2012_modifiye.pk_2013_1qrt<1 AND ims_2012_modifiye.asil_listede_mi=1 AND ims_2012_modifiye.ilac_id 
NOT IN(SELECT ilac_id FROM piyasa_kontrol WHERE pk_yil IN (2010,2011,2012)) OR ims_2012_modifiye.oncelik_verilsin_mi=1 
LIMIT 10
)ORDER BY random() LIMIT 0,1
//Updating pk_2013_1qrt to 1 here
//Looping Ends here 
```

此外，我在每次查询后更新`pk_2013_1qrt`字段以`1`确保不会得到相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:23:30.540

你可以尝试

*   使用 GROUP BY
*   使用 DISTINCT

希望能帮助到你！

# php - 简单差异 CSS

> ID：16099336
> 
> 赞同：1
> 
> 时间：2013-04-19T07:21:04.593
> 
> 标签：php, html, css

抱歉，菜鸟问题，但有什么区别：

```
a.highlight{
color: blue;
} 
```

和

```
.highlight a{
color: blue;
} 
```

标记：

```
 <a href="#" class="highlight">Link</a> 
```

?

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T07:23:14.320

```
a.highlight 
```

这将选择具有类的锚`highlight`

什么时候：

```
.highlight a 
```

将选择作为具有类的元素的**后代**的锚点`highlight`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:22:55.187

a.highlight 选择具有该类的所有元素。.highlight a 选择作为具有该类的元素的后代的所有元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:22:52.873

```
 a.highlight{
        color: blue;
  } 
```

是班级亮点的主播

```
 .highlight a{
        color: blue;
  } 
```

编辑：

是由“highlight”类的东西所包含的锚点

对于您的标记，您需要第一条规则。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-04-19T07:27:41.260

事实上，这两种说法没有区别。稍后可以发现差异，例如，您需要使用 .highlight 类在块中设置多个链接的样式 - 然后选择第二个示例。但是，如果您没有阻止但只需要设置链接样式 - 那么最好使用第一个示例。

# jquery - 将包含 html 和 svg 元素的 div 渲染到画布

> ID：16099338
> 
> 赞同：1
> 
> 时间：2013-04-19T07:21:09.067
> 
> 标签：jquery, html, canvas, svg

我想在我的 html 页面中截取一个 div(container) 的屏幕截图。问题是容器可能同时包含 html 元素和 svg。我找到了几种将它们单独呈现到画布的方法，即如果只有 html 或 svg 存在，但如果它们都存在，我无法找到在画布上呈现容器的方法。有任何想法吗？如果解决方案是客户端，我会更喜欢。

# php - 如何检查 DOMElement setIdAttribute() 是否设置？

> ID：16099343
> 
> 赞同：1
> 
> 时间：2013-04-19T07:21:22.447
> 
> 标签：php, dom

假设我有以下代码。

```
$newdom = new DOMDocument();
$elem = new DOMElement('div');
$text = new DOMText('testing');

$elem = $newdom->importNode($elem,true);
$newdom->appendChild($elem);
$text = $newdom->importNode($text,true);
$elem->appendChild($text);
$elem->setAttribute('id','foo');
$elem->setIdAttribute('id',true);
$elem->setIdAttribute('id',true); //set twice will cause C14N() fail
echo $newdom->getElementById('foo')->C14N(); 
```

如果 setIdAttribute() 被调用两次，那么 C14N() 将不起作用。现在，我的问题是，如果我有一个 DOMElement 作为函数的输入，为了使 DOMElement 可以是 getElementById()，我需要 setIdAttribute()。但是既然不能设置两次，那么如何检查是否设置了呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:28:54.383

经过几个小时的尝试，就在这篇文章之后，我刚刚找到了解决方案。DOMAttr 中有 isId() 允许检查属性。

# c++ - 文件未显示在 cmd 提示符窗口中

> ID：16099344
> 
> 赞同：0
> 
> 时间：2013-04-19T07:21:23.710
> 
> 标签：c++, file

我对 c++ 相当陌生。我现在正在上一门关于结构和对象的介绍课。我们最后检查了文件，我想到了编写一个加密文本文件的程序。只是为了我自己的乐趣和知识（这不是家庭作业）。我还没有编写加密，它将是私钥，因为有人告诉我这是最简单的，这是我第一次尝试这样的事情。无论如何，我现在只是将代码编写为函数以确保它们工作，然后将它们放入类中并扩展程序。所以，现在我的代码将打开并写入一个文件。我想在加密之前查看我刚刚在cmd窗口中编写的文件，所以我知道我可以看到之前和之后。继承人的代码：

```
//This program will create, store and encrypt a file for sending over the inernet

#include<iostream>
#include<cstdlib>
#include<iomanip>
#include<string>
#include<fstream>
#include"fileSelect.h"

using namespace std;

void openFile(fstream &);
void readFile(fstream &);

int main() {
    //output file stream
    fstream outputStream;
    fstream inputStream;
    string fileName, line;

    openFile(outputStream);
    readFile(inputStream);

    system("pause");
    return 0;
}
//open file Def
void openFile(fstream &fout){
    string fileName;
    char ch;
    cout<<"Enter the name of the file to open: ";
    getline(cin, fileName);
    //try to open the file for writing
    fout.open(fileName.c_str(),ios::out);
    if(fout.fail()){
        cout<<"File, "<<fileName<<" failed to open.\n";
        exit(1);
    }
    cout<<"Enter your message to encrypt. End message with '&':\n";
    cin.get(ch);
    while(ch!='.'){
        fout.put(ch);
        cin.get(ch);
    }
    fout.close();
    return;
}

void readFile(fstream &fin){
    string fileName, line;
    cout<<endl;
    cout<<"Enter the name of the file to open: ";
    getline(cin, fileName);
    //check file is good
    if(fin.fail()){
        cout<<"File "<<fileName<<" failed to open.\n";
        exit(1);
    }

    cout<<"Opening "<<"'"<<fileName<<"'" <<endl;
    //cout<<"Enter the file to open: ";
    //cin>>fileName;
    fin.open(fileName.c_str(),ios::in);
    //readFile(inputStream);
    if(fin){
        //read in data
        getline(fin,line);
        while(fin){
            cout<<line<<endl;
            getline(fin,line);
        }

        fin.close();
    }
    else{
        cout<<"Error displaying file.\n";
    }

    return ;
} 
```

这将编译并运行。如果 openFile() 被注释掉并且 readFile() 函数被自己调用，文件将读取 openFile() 中写入的内容。它只是不会像我想要的那样一个接一个地做。这可能只是我缺少的一个简单修复，但现在它变得有点头疼。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:38:43.097

当您阅读要加密的消息时，您不会使用换行符。换行符保留在输入缓冲区中，将导致`getline(cin, fileName);`读取一个空的`fileName`.

您必须在阅读消息后首先跳过换行符

```
string tmp;
getline(cin, tmp); 
```

然后`getline()`in`readFile`将正常工作。

*旧时*：

*   你的提示说

    ```
    cout<<"Enter your message to encrypt. End message with '&':\n"; 
    ```

    但你测试`.`而不是`&`

    ```
    while(ch!='.'){ 
    ```

*   您将 an 传递`fstream`给`openFile`and `readFile`，但在这些函数中打开和关闭文件。您可以改用局部变量。

    代替

    ```
    void openFile(fstream &fout){
        ...
        fout.open(fileName.c_str(),ios::out); 
    ```

    你写

    ```
    void openFile(){
        ...
        fstream fout;
        fout.open(fileName.c_str(),ios::out); 
    ```

    甚至更短

    ```
    void openFile(){
        ...
        ofstream fout(fileName.c_str()); 
    ```

    此外，您必须更改`openFile()`.

    `readFile`和`fin`/[`ifstream`](http://www.cplusplus.com/reference/fstream/ifstream/)适当地工作。

# vb.net - 获取列的值并使用它来删除数据库中的记录

> ID：16099348
> 
> 赞同：0
> 
> 时间：2013-04-19T07:21:35.257
> 
> 标签：vb.net, ms-access-2007

我的数据库中有一个表，其中有一个布尔字段。我想检查它的值并进一步使用它来删除另一个表中的记录......

虚拟代码是这样的：

```
private sub del_Machine()

 Dim machine_srno as string
 Dim asql As String = ("SELECT * FROM Installation_det")
 cnnOLEDB.Open()
 Dim cmd As OleDb.OleDbCommand = New OleDb.OleDbCommand(asql, cnnOLEDB)
 Dim dr As OleDb.OleDbDataReader = cmd.ExecuteReader
 If dr.Read = True Then
    if IsTFT.checked=true then      ----------> IsTFT is a column in Installation_det table
     machine_srno=Machine.value ------------> Machine is also a field in database

    DeleteQuery = "DELETE * FROM new_table WHERE sr_no=@mach_srno"
            Dim cmd As OleDb.OleDbCommand = New OleDb.OleDbCommand(DeleteQuery,    cnnOLEDB)

            cmd.Parameters.AddWithValue("@mach_srno", machine_srno)
            cmd.ExecuteNonQuery()

end sub 
```

请帮助我进行实际编码...我认为这对数据表和数据集很有帮助，但不知道如何使用它..请给我建议代码...谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:39:43.933

从 DataReader 获取值，然后将它们用于您的查询

```
If dr.Read = True Then
    Dim isTFT = Convert.ToBoolean(dr("IsTFT"))
    Dim machine_srno = dr("Machine").ToString()
    if isTFT = True Then
        Dim DeleteQuery = "DELETE * FROM new_table WHERE sr_no=@mach_srno"
        Dim cmd As OleDb.OleDbCommand = New OleDb.OleDbCommand(DeleteQuery,    cnnOLEDB)
        cmd.Parameters.AddWithValue("@mach_srno", machine_srno)
        cmd.ExecuteNonQuery
    End If
ENd If 
```

# r - 使用 plyr （或其他）使用 seq 从其他 2 个变量创建变量的更好方法

> ID：16099351
> 
> 赞同：0
> 
> 时间：2013-04-19T07:21:58.977
> 
> 标签：r, plyr

我有一些包含入院和出院日期的数据，我需要（对于每个人和承认 ID #）创建一个从宽到长的数据框，其中包含人员和承认 ID，以及承认和出院之间的顺序指示介于入院和出院之间（包括入院和出院）的每一天的值。

我偶然发现了一种非常骇人听闻的方法，它利用了 dlply 如何命名它创建的列表中的项目；但是，我担心它*可能*容易出错。无论哪种方式，它都感觉很笨拙，我想知道是否有一种使用更少代码的更简洁的方法。

```
person <- c(1, 2, 3, 3)
admit <- c(1, 1, 1, 2)
admit.date <- as.Date(c("1/1/2010", "1/1/2010", "1/1/2010", "2/1/2010"), "%m/%d/%Y")
discharge.date <- as.Date(c("1/1/2010",  "1/1/2010", "1/1/2010", "2/1/2010"), "%m/%d/%Y") + c(1,2,2,2)
df1 <- data.frame(person, admit, admit.date, discharge.date)
df1 ## where I start

library(plyr)
los_seq <-  function(df) { seq(df$admit.date, df$discharge.date, 1)} 
lst1 <- dlply(df1, .(person, admit), los_seq)
vec1 <- unlist(lst1)
## now it gets really hackish
df2 <- data.frame(v1 = paste(names(vec1), vec1, sep="__"))
df2$person <- substr(df2$v1, 1, regexpr("\\.", df2$v1)-1)
df2$admit <- substr(df2$v1, regexpr("\\.", df2$v1)+1,  regexpr("\\.", df2$v1)+1)
df2$date <- as.Date(as.numeric(substr(df2$v1, regexpr("__", df2$v1)+2,  nchar(df2$v1))), origin="1970-01-01")
df2[,-1]  ##  this is how I need the result to look 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:32:15.153

如何使用类似以下的内容（因为您使用的是实际日期）：

```
SEQ <- df1$discharge.date - df1$admit.date + 1
df1[rep(row.names(df1), SEQ), 1:2]
#     person admit
# 1        1     1
# 1.1      1     1
# 2        2     1
# 2.1      2     1
# 2.2      2     1
# 3        3     1
# 3.1      3     1
# 3.2      3     1
# 4        3     2
# 4.1      3     2
# 4.2      3     2 
```

* * *

现在，要猜测您在评论中可能指的是什么，也许您也在寻找日期的顺序。

```
SEQ <- df1$discharge.date - df1$admit.date + 1
df2 <- df1[rep(row.names(df1), SEQ), 1:3]
df2$date <- df2$admit.date + sequence(SEQ)-1
df2[-3]
#     person admit       date
# 1        1     1 2010-01-01
# 1.1      1     1 2010-01-02
# 2        2     1 2010-01-01
# 2.1      2     1 2010-01-02
# 2.2      2     1 2010-01-03
# 3        3     1 2010-01-01
# 3.1      3     1 2010-01-02
# 3.2      3     1 2010-01-03
# 4        3     2 2010-02-01
# 4.1      3     2 2010-02-02
# 4.2      3     2 2010-02-03 
```

# visual-studio-2012 - 如何在使用安装的 Office 开发人员工具编辑 aspx 页面时修复 Visual Studio 2012 冻结

> ID：16099353
> 
> 赞同：1
> 
> 时间：2013-04-19T07:22:06.353
> 
> 标签：visual-studio-2012, ms-office

我正在使用 SharePoint 2013，因此我需要安装适用于 Visual Studio 2012 的 Office 开发人员工具。当我编辑与 Web 部件关联的 .aspx 页面时，Visual Studio 每隔一两分钟就会冻结几秒钟。我该如何解决这个问题？

**PS：** 我可以更改与 aspx 页面相关的默认编辑器，但我不喜欢这个解决方案，因为我想保存智能和语法高亮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T13:53:39.110

您可以用来诊断此问题的一种工具是 SysInternal 的**[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)**。我过去曾通过定期挂断来做到这一点。首先过滤Visual Studio 进程 devenv.exe 上的**文件和/或注册表操作。**寻找在挂断之前发生的最后几个，并使用该数据来进一步完善您的过滤和搜索。基于延迟的周期性，我的直觉说它与**后台编译**（即正在更新的 Intellisense 数据库）有关。因此，您可能希望进一步过滤**NCB**文件操作等。

# .net - asp.net 中 Ajax CalendarExtender 中的默认月份

> ID：16099369
> 
> 赞同：-1
> 
> 时间：2013-04-19T07:22:57.140
> 
> 标签：.net

我有两个名为“签入日期”和“签出日期”的文本框，具有 CalenderExtender 绑定。

我想在“CheckIn Date”的 TextChange 上的“CheckOut Date”中设置默认月份显示。

在“CheckOut”TextChange 事件中，我正在计算这两个文本框之间的天数。

请帮助我.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:16:57.643

将 CalenderExtende 的 SelectedDate 属性分配给您希望 Calender 显示的日期。

# windows-8 - Windows 8 许可证信息

> ID：16099372
> 
> 赞同：1
> 
> 时间：2013-04-19T07:23:02.897
> 
> 标签：windows-8, licensing, windows-store-apps

我有一个 Windows 8 应用程序，我现在想把它放在商店里。AppSimulator 工作正常（即使当我单击“确定”时我无法将 IsActive 设置为“true”......但会弹出 MsgDialog 'Thanks'），但我不知道 CurrentApp 是否正确。我已经读过 IsActive 将自动设置为 true 而无需在代码中分配它。

关于下面的代码，我只有两个问题：

1.  CurrentApp 的代码可以工作吗？

2.  由于当涉及到 CurrentApp 时我没有在 WindowsStoreProxy.xml 中分配任何内容，因为 Windows 会自动从商店加载此信息（不知道是否属实......我在某处读过），我怎么能说 ProductLicenses 在 WindowsStoreProxy.xml 中被称为“Premium”？在 CurrentAppSimulator 中这很容易，因为它从我的内部 XML 文件 in-app-purchase.xml 加载价格/名称/...，但是如何为真正的 App 设置 XML 文件？在 Windows 应用商店中？

* * *

```
#if DEBUG
    StorageFolder proxyDataFolder = await Package.Current.InstalledLocation.GetFolderAsync("data");
    StorageFile proxyFile = await proxyDataFolder.GetFileAsync("in-app-purchase.xml");
    licenseChangeHandler = new LicenseChangedEventHandler(InAppPurchaseRefreshScenario);
    CurrentAppSimulator.LicenseInformation.LicenseChanged += licenseChangeHandler;
    await CurrentAppSimulator.ReloadSimulatorAsync(proxyFile);
#endif

#if DEBUG
    LicenseInformation licenseInformation = CurrentAppSimulator.LicenseInformation;
    ListingInformation productListing = await CurrentAppSimulator.LoadListingInformationAsync();
#else
    LicenseInformation licenseInformation = CurrentApp.LicenseInformation;
    ListingInformation productListing = await CurrentApp.LoadListingInformationAsync();
#endif

ProductLicense productLicense = licenseInformation.ProductLicenses["Premium"];  
if (!productLicense.IsActive)       
{       
    Buy()
}
else
{
    //use full function
}

private async void Buy()
{
        #if DEBUG
            LicenseInformation licenseInformation = CurrentAppSimulator.LicenseInformation;
        #else
            LicenseInformation licenseInformation = CurrentApp.LicenseInformation;
        #endif
        if (!licenseInformation.ProductLicenses["Premium"].IsActive)
        {
            try
            {
                #if DEBUG
                    await CurrentAppSimulator.RequestProductPurchaseAsync("Premium", false);
                #else
                    await CurrentApp.RequestProductPurchaseAsync("Premium", false);
                #endif
                if (licenseInformation.ProductLicenses["Premium"].IsActive)
                {
                    try
                    {
                        MessageDialog msgDialog = new MessageDialog("Thanks for buying the app.");
                        await msgDialog.ShowAsync();
                    }
                    catch
                    {
                    }
                }
                else
                {
                    MessageDialog msgDialog = new MessageDialog("The purchase was cancelled.");
                    await msgDialog.ShowAsync();
                }
            }
            catch
            {
                MessageDialog msgDialog = new MessageDialog("Connection error.");
                msgDialog.ShowAsync();
            }
        }
        else
        {
            MessageDialog msgDialog = new MessageDialog("You already have this feature.");
            await msgDialog.ShowAsync();
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T17:24:31.173

您无需通过代码进行设置。CurrentAppSimulator 会自动完成。

只需检查您在 WindowsStoreProxy.xml 中的设置并确保将“IsTrial”设置为“假”-

```
<LicenseInformation>
    <App>
        <IsActive>true</IsActive>
        <IsTrial>false</IsTrial>
    </App>
    <Product ProductId="1">
        <IsActive>false</IsActive>
    </Product>
</LicenseInformation> 
```

# java - Java MySQL检查数据库中是否存在值

> ID：16099382
> 
> 赞同：12
> 
> 时间：2013-04-19T07:23:19.633
> 
> 标签：java, mysql, jdbc

我正在尝试检查我的数据库中是否已存在特定值。我正在使用 JDBC 从 java 独立应用程序访问数据库（用于将记录插入数据库工作的查询，因此我的设置和连接正常）。

```
String queryCheck = "SELECT * from messages WHERE msgid = " + msgid;
Statement st = conn.createStatement();
ResultSet rs = st.executeQuery(queryCheck); // execute the query, and get a java resultset

// if this ID already exists, we quit
if(rs.absolute(1)) {
     conn.close();
     return;
} 
```

我收到此错误（我的 SQL 语法显然有问题）：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'd-f05708071f8f' at line 1 
```

但是，如果我尝试在我的 MySQL 命令行中执行此命令，它会起作用！你能告诉我，我的陈述有什么问题吗？感谢您的任何提示！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-19T07:26:08.440

您需要`String`在 MySQL 中将 a 括在引号中，因此查询需要是

```
SELECT * from messages WHERE msgid = 'd-f05708071f8f'; 
```

不是

```
SELECT * from messages WHERE msgid = d-f05708071f8f; 
```

所以代码应该读

```
String queryCheck = "SELECT * from messages WHERE msgid = '" + msgid + "'"; 
```

我建议使用 a`PreparedStatement`来避免此类问题和任何 SQL 注入风险：

```
final String queryCheck = "SELECT * from messages WHERE msgid = ?";
final PreparedStatement ps = conn.prepareStatement(queryCheck);
ps.setString(1, msgid);
final ResultSet resultSet = ps.executeQuery(); 
```

使用字符串连接进行查询构建被认为是非常糟糕的做法。现在已经很久了。

此外，我建议使用`select count(*)`而不是完整`select *`的，因为这会返回更少的数据（想想 的大小`ResultSet`）并且 MySQL 也可以对其进行优化。

```
final String queryCheck = "SELECT count(*) from messages WHERE msgid = ?";
final PreparedStatement ps = conn.prepareStatement(queryCheck);
ps.setString(1, msgid);
final ResultSet resultSet = ps.executeQuery();
if(resultSet.next()) {
    final int count = resultSet.getInt(1);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-19T07:26:15.073

您需要使用绑定变量。

```
 PreparedStatement st = conn.prepareStatement(
    "SELECT * from messages WHERE msgid = ?");
 st.setString(1, msgid);
 ResultSet rs = st.executeQuery(queryCheck); 
```

或者进入手动报价，但这是有风险的。

除了防止 SQL 注入之外，如果您重复运行相同的查询，准备好的语句还应该提高性能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T07:26:08.000

由于 msgid 是一个 varchar，因此您需要用单引号将 where 子句中的值括起来。

```
String queryCheck = "SELECT * from messages WHERE msgid = '" + msgid + "'"; 
```

但是不推荐动态生成 SQL 字符串，因为它会使您的应用程序暴露于 sql 注入。

而是使用`PreparedStatement`：

```
 String queryCheck = "SELECT * from messages WHERE msgid = ?";
            PreparedStatement st = conn.prepareStatement(queryCheck);
            st.setString(1, msgid);
            ResultSet rs = st.executeQuery(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-19T07:26:15.140

在参数周围使用单引号：

```
"SELECT * FROM messages WHERE msgid = '" + msgid + "'"; 
```

或者更好地使用[准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-19T07:27:36.097

你可以试试这个：

```
String queryCheck = "SELECT * from messages WHERE msgid = '" + msgid + "'"; 
```

您错过了有关 msgid 的引号。（我假设**msgid**是`String`而不是`Integer`值。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-19T07:27:02.153

您需要使用单引号

```
SELECT * from messages WHERE msgid = 'd-f05708071f8f'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-29T16:30:45.860

```
String sql1 ="SELECT Time FROM monday_wednesday WHERE Time ='"+time.getSelectedItem()+"'";
pst=con.prepareStatement(sql1);
rs=pst.executeQuery();
if(rs.next()) {
    if(rs.getString("Time").equals(time.getSelectedItem())) {
        JOptionPane.showMessageDialog(null,"Time is already taken","",JOptionPane.INFORMATION_MESSAGE); 
    }
} else {
    String sql="INSERT INTO monday_wednesday(pfname,pmname,plname,Birthdate,Gender,Address,City,Contact,Contactperson,Time,Date)\n" + "VALUES ('"+txtFirstName1.getText()+"','"+txtMiddleName1.getText()+"','"+txtLastName1.getText()+"','"+d+"','"+gender.getSelectedItem()+"','"+ txtAddress.getText()+"','"+txtCity.getText()+"','"+txtContact.getText()+"','"+txtContactPerson1.getText()+"','"+time.getSelectedItem()+"','"+dateFormat.format(date)+"')";
} 
```

只是一个简单的重复输入算法

# php - 如何在 WordPress 上使用弹出消息？

> ID：16099386
> 
> 赞同：1
> 
> 时间：2013-04-19T07:23:31.057
> 
> 标签：php, wordpress

你能告诉我我可以用什么来在 wordpress 中输出消息（回声不起作用）吗？我一直`wp_die( __(……..))`用来输出消息。但是这段代码将终止我在 WordPress 页面中的 php 代码。

```
<?php
  $arr = array(1, 2, 3, 4);
  foreach ($arr as $value) 
  {
      $value = $value * 2;
      //Popup message here indicating the array value ?
  }
?> 
```

我正在`wp-comments-post.php`WordPress 中编辑文件。例如，当用户按下“发表评论”按钮时，上面的代码将运行并输出数组中的这 4 个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:57:59.377

问题是[`wp-comment-post.php`](https://github.com/WordPress/WordPress/blob/master/wp-comments-post.php)只包含**后端**代码。因此，如果您尝试回显或输出此文件中的任何内容，它将出现在您调用的 HTML 文件中，但很可能任何人都看不到它，因为它会被所有**前端**元素重叠。

我看到两种方法，你怎么能处理这个

1.  不要在`wp-comment-post.php`文件中输出/回显您想要的信息，而是将其分配给任何所需的变量（在`foreach`循环的情况下：将其分配给数组元素）。然后在适当的前端模板文件中回显它，例如在[`comments.php`](https://github.com/WordPress/WordPress/blob/master/wp-content/themes/twentythirteen/comments.php)您选择的主题的文件中。

2.  将您的信息作为[JavaScript`alert()`](https://www.google.com/search?q=javascript+alert+example)回显。这将创建一个小弹出窗口，您可以在其中显示您的信息。此处的限制：用户必须在其他任何事情发生之前单击弹出窗口。由于弹出窗口将在后端代码中调用，因此前端代码将在单击弹出窗口*后执行。*因此，弹出窗口会出现一个空白页面，单击它后，将建立页面的其余部分。

# xml - 可选元素或布尔属性

> ID：16099387
> 
> 赞同：0
> 
> 时间：2013-04-19T07:23:31.623
> 
> 标签：xml, solr

我正在定义一个 XML 模式，该模式将包含搜索查询信息，这些信息将被（重新）导入 Solr 进行处理。我要为查询结果保存的方面之一是它们是否被访问过，如果是的话，需要多长时间。现在我想知道如何最好地在我的结构中定义这些数据，我可以为“结果”元素使用属性，也可以添加一个可选的子元素来保存单击时的所有信息。

带有一个属性：

```
<result index="1" clicked="true">
    <timeViewed>45.21</timeViewed>
    <title>Alpha</title>
</result>
<result index="2" clicked="false">
    <title>Beta</title>
</result> 
```

带有子元素：

```
<result index="1">
    <clickInfo timeViewed="45.21"/>
    <title>Alpha</title>
</result>
<result index="2">
    <title>Beta</title>
</result> 
```

最后，按照[这个问题](https://stackoverflow.com/questions/1260254/optional-or-boolean-elements-to-specify-characteristics-in-xml-schema)：

```
<result index="1">
    <clicked timeViewed="45.21">true</clicked>
    <title>Alpha</title>
</result>
<result index="2">
    <clicked>false</clicked>
    <title>Beta</title>
</result> 
```

由于我会将大量这些 XML 文件索引到 Solr 和可能的 MongoDB 中，我想知道最有效的结构是什么。在将信息加载到数据库或索引之前，这些差异是否会对转换过程产生显着影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:26:59.397

我个人会选择这个属性，原因是

*   它总是清楚元素是否是 clicket （逻辑如“如果我不指定，则假设 A”是我不喜欢的东西）
*   xml 总是具有相同的结构，无论元素是否被访问，这可能看起来没什么大不了，但使解析更容易，更不容易出错
*   您可以节省空间，因为添加属性而不是新标签更便宜，但情况可能并非总是如此，因为这取决于单击元素的频率。

# vba - 在 VBA、excel 中声明变量并将其与高棉 unicode 字符串进行比较

> ID：16099389
> 
> 赞同：-1
> 
> 时间：2013-04-19T07:23:45.450
> 
> 标签：vba, excel, unicode

高棉unicode字符串与其他unicode字符不同，我们不能在Excel或MS Access的VBA编辑器上编写它。

如何声明变量并分配高棉 unicode 字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:23:45.450

当然，请参阅[在 excel 中在 vba 中声明 unicode 字符串](https://stackoverflow.com/questions/7269399/declaring-a-unicode-string-in-vba-in-excel)的答案，以帮助我们回答 Excel VBA 中的高棉 unicode 问题。

我使用工具：[http](http://rishida.net/tools/conversion/) ://rishida.net/tools/conversion/将高棉 unicode 字符串转换为十六进制，然后我添加到每个十六进制以通过 &H 在 VBA 中使用。

写入示例：ល.រ 到 VBA 变量中：

```
Dim myStr As String
myStr = ChrW(&H179B) & "." & ChrW(&H179A) 
```

帖子中的更多详细信息：http: [//ask.osify.com/qa/231](http://ask.osify.com/qa/231)

# python - 如何在 django 的包含标签中传递请求对象

> ID：16099391
> 
> 赞同：2
> 
> 时间：2013-04-19T07:23:50.040
> 
> 标签：python, django

我覆盖了管理`ChangeList`类，我在那里添加了我自己的函数，它需要像这样的请求对象

```
class MyChangeList(ChangeList):

    def sample(self, request):
        test = request.session["myvar"]
        return test 
```

在包含标签中我需要像这样使用

```
@register.inclusion_tag("admin/change_list_results.html")
def my_result_list(cl):
    """
    Displays the headers and data list together
    """
    myvar = cl.sample()
    num_sorted_fields = 0 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:31:29.107

传递`takes_context=True`给标签装饰器。

```
@register.inclusion_tag("admin/change_list_results.html", takes_context=True)
def my_result_list(context, cl):
    """
    Displays the headers and data list together
    """
    myvar = cl.sample(context['request'])
    num_sorted_fields = 0 
```

[文档](https://docs.djangoproject.com/en/1.5/howto/custom-template-tags/#inclusion-tags)

# ruby - 扩展模块和类变量访问？

> ID：16099395
> 
> 赞同：10
> 
> 时间：2013-04-19T07:23:58.570
> 
> 标签：ruby

我不明白为什么在以下示例中访问模​​块的类变量会失败：

```
module M
  @@xyz = 123
end
M.class_variables    # [:@@xyz]
M.class_variable_get :@@xyz    # 123 , so far so good

class C
  extend M
end
C.singleton_class.class_variables    # [:@@xyz]
C.singleton_class.class_variable_get :@@xyz # NameError:
                      # uninitialized class variable @@xyz in Class 
```

谁能解释为什么在单例类中类变量`@@xyz`突然无法访问/未定义`C`？

**更新：** 我用不同的 Ruby YARV 版本重新测试了上面的代码，发现它是最新的回归。

**更新 2：**

`Module#class_variables`在最新一代的 Ruby 中，方法的定义发生了变化。

*   Ruby 到 1.9.3 的定义是

    [类变量](http://ruby-doc.org/core-1.9.3/Module.html#method-i-class_variables)→ 数组

    返回 mod 中类变量名称的数组。

*   Ruby 2.0.0 最新稳定版

    [class_variables(inherit=true)](http://www.ruby-doc.org/core-2.0/Module.html#method-i-class_variables) → 数组

    返回 mod 中类变量名称的数组。这包括任何包含模块中的类变量的名称，除非继承参数设置为 false。

因此，在最新的 Ruby 版本中，`class_variables`默认情况下还返回包含模块的类变量。只是好奇这个功能有什么用，或者它是否仍然与“包含”`include`和不“包含”的模块有关`extend`。

谁能解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:02:39.730

不确定这些是否是答案，但我确实找到了这些

```
C::M.class_variables #=> ["@@xyz"]
# (but gives "warning: toplevel constant M referenced by C::M") 
```

和

```
class D
  include M
end
D.class_variables #=> ["@@xyz"] 
```

（这来自 Ruby 1.8.7，现在手头没有更高版本）。

`include`使模块的实例方法成为类的实例方法。根据 Pickaxe 的说法，“就好像模块成为使用它的类的超类一样”。

同时，`extend`打算将模块的方法添加到*对象*中；在类定义中调用时，它等效于`self.extend`. 似乎它们并不等同。

HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:46:05.030

这不是答案，只是对问题的一些评论。

如果我们`M`在类中包含模块`C`，则`C`获取定义在中的类变量`M`：

```
module M
  @@xyz = 123
end

class C
  include M
end

C.class_variables   #=> [:@@xyz]
C.class_variable_get(:@@xyz)  # 123 
```

调用`extend M`类定义等同于调用`include M`该类的特征类（或单例类）。

```
module M
  @@xyz = 123
end

eigenclass = class C
  class << self
    include M
    self
  end
end

eigenclass.class_variables            #=>[:@@xyz]
eigenclass.class_variable_get(:@@xyz) #=>NameError: uninitialized class variable @@xyz in Class 
```

似乎区别在于Ruby对普通类和特征类的处理方式不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:31:05.183

简而言之，您观察到的差异是因为模块的工作方式与类不同。不久前我向我的上级提出了这个问题：[Inheriting class methods from mixins](https://stackoverflow.com/questions/10692961/inheriting-class-methods-from-mixins)

我得出的结论是，虽然 Module 在某些方面类似于 Class，但在其他方面，Ruby 将其简单地视为普通对象。特别是，在其他对象（单例方法等）中被称为“类东西”的类（类方法、类变量......）只是被称为“单例东西”。模块的单例类在很多方面都有就像模块一样被视为普通对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T08:48:45.360

关于特定的代码示例，它在我的 Ruby 1.9.3p194 上的工作方式不同：

```
module M
  @@xyz = 123
end
M.class_variables    # [:@@xyz]
M.class_variable_get :@@xyz    # 123 , so far so good

class C
  extend M
end
C.singleton_class.class_variables    # [] - HERE BE THE DIFFERENCE
C.singleton_class.class_variable_get :@@xyz # NameError: 
```

当然，这就是我所期望的。C.singleton_class 是 Class Class 的直接子类，我在任何地方都没有看到你在 Class 或其后代上设置任何类变量......但我相信你的代码按照你在机器上编写的方式工作。

# string - 使用字符串名称创建变量

> ID：16099398
> 
> 赞同：17
> 
> 时间：2013-04-19T07:24:05.027
> 
> 标签：string, matlab, variables, variable-names

假设我想创建 10 个如下所示的变量：

```
x1 = 1;
x2 = 2;
x3 = 3;
x4 = 4;
.
.
xi = i; 
```

这是我打算做的简化版本。基本上我只想通过自动创建这些变量来节省代码行。是否有可能在 Matlab 中构造变量名？我的示例中的模式是`["x", num2str(i)]`. 但我找不到用该名称创建变量的方法。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-19T07:32:59.073

你可以用[eval](http://www.mathworks.com/help/matlab/ref/eval.html)来做，但你真的不**应该**

```
eval(['x', num2str(i), ' = ', num2str(i)]); %//Not recommended 
```

而是使用单元格数组：

```
x{i} = i 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T07:51:55.617

我也强烈建议在这种情况下使用元胞数组或结构。我认为它甚至会给你一些性能提升。

如果你真的需要这样做，Dan 会告诉你怎么做。但我也想指出该`genvarname`功能。它将确保您的字符串是有效的变量名。

编辑： genvarname 是核心 matlab 的一部分，而不是统计工具箱的一部分

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-17T14:18:15.983

```
for k=1:10
   assignin('base', ['x' num2str(k)], k)
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-26T10:15:57.023

虽然早就应该了，但我只是想添加另一个答案。

函数 genvarname 正是针对这些情况

如果您将它与 tmp 结构数组一起使用，则不需要 eval cmd

此链接中的示例 4 是如何做到的[http://www.mathworks.co.uk/help/matlab/ref/genvarname.html](http://www.mathworks.co.uk/help/matlab/ref/genvarname.html)

```
 for k = 1:5
   t = clock;
   pause(uint8(rand * 10));
   v = genvarname('time_elapsed', who);
   eval([v ' = etime(clock,t)'])
   end 
```

一切顺利

埃亚尔

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T07:54:09.700

如果其他人有兴趣，丹的答案的正确语法是：

```
eval(['x', num2str(i), ' = ', num2str(i)]); 
```

我的问题已经包含错误的语法，所以这是我的错。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-17T09:09:43.023

我需要这样的东西，因为如果您希望能够在仿真期间更改它们，您不能从 Simulink 块中的工作区引用结构（或我认为的单元数组）。

无论如何，对我来说这效果最好

```
assignin('base',['string' 'parts'],values); 
```

# java - 使用 Google Guava 格式化字符串

> ID：16099400
> 
> 赞同：2
> 
> 时间：2013-04-19T07:24:07.950
> 
> 标签：java, string, guava, pad

我正在使用 Google guava 格式化字符串并使用 BufferedWriter 将它们写入文本文件

```
import com.google.common.base.Strings;
import java.io.*;

public class Test {

    public static void main(String[] args) {
        File f = new File("MyFile.txt");
        String firstName = "STANLEY";
        String secondName = "GATUNGO";
        String thirdname = "MUNGAI";
        String location = "NAIROBI";
        String school = "STAREHE BOYS CENTRE";
        String yob= "1970";
        String marital = "MARIED";
        String texture = "LIGHT";

        try {
            BufferedWriter bw = new BufferedWriter(new FileWriter(f));
            if (!f.exists()) {
                f.createNewFile();
            }
           bw.write(Strings.padStart(firstName, 0, ' '));
           bw.write(Strings.padStart(secondName, 20, ' '));
           bw.write(Strings.padStart(thirdname, 20, ' '));
           bw.write(Strings.padStart(location, 20, ' '));
           bw.newLine();
           bw.write(Strings.padStart(school, 0, ' '));
           bw.write(Strings.padStart(yob, 20, ' '));
           bw.write(Strings.padStart(marital, 20, ' '));
           bw.write(Strings.padStart(texture, 20, ' '));

            bw.close();
        } catch (Exception asd) {
            System.out.println(asd);
        }
    }
} 
```

我的输出是 ![我的输出](https://i.stack.imgur.com/UHEaS.png)

我需要输出

![期望的输出](https://i.stack.imgur.com/9zKR3.png)

我从数据库和数据库接收字符串，上面的硬编码只是一个例子，我需要编写字符串，使第一个字符串的长度不影响第二个字符串的起始位置。我需要使用 Google Guava 从同一个位置开始以列方式编写它们。我也会欣赏例子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T07:36:50.393

# `String.format`

您可以简单地使用[String.format()](http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#format-java.lang.String-java.lang.Object...-)而不是[Guava](https://github.com/google/guava/wiki/StringsExplained)。它遵循[此处描述的 C](http://www.cplusplus.com/reference/cstdio/printf/) *printf*语法。我认为它可以满足您的需求。

```
String aVeryLongString="aaabbbcccdddeeefffggghh";
String aShortString="abc";
String anotherString="helloWorld";

String formattedString=String.format("%5.5s,%5.5s,%5.5s",aVeryLongString,aShortString,anotherString);

System.out.println(formattedString); 
```

输出 ：

```
aaabb,  abc,hello 
```

如您所见，长字符串被剪断，短字符串被填充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T08:31:57.477

既然你已经在类路径上有了番石榴。我将向你展示我的想法，但这可能过于简单，需要做更多的工作，即使不是太多。

您需要始终知道一行中字符串的最大大小。我实际上只计算了一个：

```
 private static final class SortBylenght extends Ordering<String>{
        @Override
        public int compare(String left, String right) {
            return Ints.compare(left.length(), right.length());
        }
    } 
```

然后计算最大值：

```
 ImmutableList<String> data = ImmutableList.of(firstName, school);
    SortBylenght sortBylenght = new SortBylenght();
    String maxString = sortBylenght.max(data);
    int maxSize = maxString.length(); 
```

然后打印：

```
 bw.write(Strings.padEnd(firstName, maxSize, ' '));
  for(int i=0;i<20;++i) bw.write(' ');
  //You need to pad the end here of course again like in the first row; 
  bw.write(secondName);
  bw.newLine();
  bw.write(Strings.padEnd(school, maxSize, ' '));
  for(int i=0;i<20;++i) bw.write(' ');
  //You need to pad the end here of course again like in the first row; 
  bw.write(yob); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T07:35:59.460

我不确定你能做到这一点，尽管我没有使用过 Google Guava。这是一个建议，将文件写入 CSV，一个逗号分隔的文件。为此，只需将您的输出更改为 MyFile.csv，然后在您写入的每个值后添加一个逗号“，”。该文件可以在任何电子表格程序中打开，每个值都在自己的单元格中，因此解决方案将很简洁。

如果这不起作用，即，如果它必须是一个txt文件，那么这里是另一个想法。循环遍历您必须编写的每个字符串，找到最长的字符串，然后通过添加空格将您拥有的每个其他字符串调整到该长度。

我希望这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T16:10:16.537

使用`padEnd()`，不使用`padStart()`。`padStart()`如果你想右对齐你的列。

# php - wordpress后限制长度

> ID：16099405
> 
> 赞同：2
> 
> 时间：2013-04-19T07:24:20.107
> 
> 标签：php, wordpress

大家好，我在 wordpress 中有一个站点，我想限制预览帖子的字符与默认值不同，例如仅 5 个字符。

这是我的 content-category.php 的一部分

```
<div class="entry-content">
    <?php 
    $excerpt = get_the_excerpt();
    if ( $use_excerpt == 'Content' ) {  
      the_content('<a style="margin-left: 5px;text-transform: uppercase;display: inline-block;" href="'. get_permalink($post->ID) . '"> '. __( 'Leggi Tutto' , 'color-theme-framework' ) .'</a>',true,'');
    }   
    else if ( $use_excerpt == 'Excerpt' && $excerpt != '' ){
      the_excerpt('',FALSE,'');
      echo '<a style="margin-left: 5px;display: inline-block;" href="' . get_permalink($post->ID) . '">' . __('Leggi Tutto', 'color-theme-framework') . '</a>';
    } ?>
</div><!-- entry-content --> 
```

这是我读过的摘录的一段functions.php是限制字符的功能，但我不明白如何将其更改为仅返回5个字符到新闻预览的内容

```
/*=======================================
    Content Width and Excerpt Redeclared
=======================================*/
if ( !isset( $content_width ) ) 
    $content_width = 980;

// Remove rel attribute from the category list
function remove_category_list_rel($output)
{
  $output = str_replace(' rel="category"', '', $output);
  return $output;
}

add_filter('wp_list_categories', 'remove_category_list_rel');
add_filter('the_category', 'remove_category_list_rel');

remove_action( 'wp_head', 'feed_links_extra', 3 ); 
remove_action( 'wp_head', 'feed_links', 2 );
remove_action( 'wp_head', 'rsd_link' );
remove_action( 'wp_head', 'wlwmanifest_link' );
remove_action( 'wp_head', 'index_rel_link' );
remove_action( 'wp_head', 'parent_post_rel_link', 10, 0 ); 
remove_action( 'wp_head', 'start_post_rel_link', 10, 0 );
remove_action( 'wp_head', 'adjacent_posts_rel_link', 10, 0 );
remove_action( 'wp_head', 'wp_generator' );

add_theme_support( 'automatic-feed-links' );

function new_excerpt_length($length) {
    return 30;
}
add_filter('excerpt_length', 'new_excerpt_length');

function new_excerpt_more($more) {
    return '...';
}
add_filter('excerpt_more', 'new_excerpt_more'); 
```

如何将我的新闻预览的字符限制为 5 个字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-03T10:10:08.803

有一个简单的方法，没有改变function.php

删除`<?php the_content();?>` 插入下面的代码

```
<?php echo substr(strip_tags($post->post_content), 0, 46);?> 
```

（将 46 更改为您想要的字符串长度）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:44:32.737

您的代码正在使用

```
function new_excerpt_length($length) {
    return 30;
}
add_filter('excerpt_length', 'new_excerpt_length'); 
```

上面的代码将摘录限制为单词数而不是字符数。

我从 WordPress Stackexchange 找到[了这个答案](https://wordpress.stackexchange.com/a/70924/28218)，它有代码来限制它的字符数。

# javascript - 如何在上传到服务器之前用 Javascript 解析 .zip 文件

> ID：16099406
> 
> 赞同：3
> 
> 时间：2013-04-19T07:24:39.913
> 
> 标签：javascript, jquery, django, file-upload

我有一种情况，用户可能必须上传多个文本文件，然后将其保存在文件系统中。我不想让用户多次重复相同的行为，而是让他们选择上传一个 zip 文件，其中文件以特定格式保存。

有两种方法可以做到这一点。

1.  要求他们上传一个 zip 文件。在服务器上解压文件并保存独立文件。如果我在内存中完成整个操作，则存在使用过多内存的风险，因此合乎逻辑的做法是将 zip 文件保存在文件系统上。但由于我们部署在 Amazon 上，这将涉及节省 S3，这会进一步增加从 EC2 到 S3 的延迟，而且我也不希望跟踪 Zip 文件的麻烦。

2.  其他选择是在客户端本身解压缩文件，然后单独上传文件，这样我就不需要跟踪 zip 文件。但我无法理解如何在客户端解压缩文件并遍历其中的多个文件/文件夹。

如果第一种方法有任何更简单/更简单的方法，我也对此持开放态度。后端在 Django 中。

真诚地感谢任何帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-19T07:34:11.053

为什么不让他们一次选择多个文件？[我在网上找到了这个例子](http://davidwalsh.name/multiple-file-upload)。您也可以将它与拖放相结合。我认为将多个文件拖到表单中，会比上传 ZIP 文件更舒服。[查看本文以阅读有关 JavaScript 文件 API 的更多信息](https://developer.mozilla.org/en-US/docs/DOM/File)。

# c++ - 如何在没有函数或数组的 C++ 中创建条形图

> ID：16099407
> 
> 赞同：0
> 
> 时间：2013-04-19T07:24:40.717
> 
> 标签：c++, loops, bar-chart, sentinel

在过去的 5 个小时里，我也尝试编写这个程序，到了一半才意识到我不能使用数组或函数、字符串等。

问题是我还需要创建一个程序来读取由标记值终止的整数值并显示单个数字（0-9）的条形图。该图表显示序列中每个数字的总出现次数。这是我到目前为止所拥有的

编辑：这是我修改后的代码

```
#include <iostream>
using namespace std;

int main()
{
   //initilise variables
    int num = 0, count0 = 0, count1 = 0,count2 = 0,count3 = 0,count4 = 0, 
count5 =0, count6 = 0,count7 = 0,count8 = 0,count9 = 0, value;
int SENTINEL = -1;

//get numbers till a -1 values has been entered
cout << "Please enter a number: ";
while(num != SENTINEL)
{
    cin >> num;

    //adds each occurrence of number entered
    switch(num)
{
    case 0:
        count0+= 1;
        break;
    case 1:
        count1+= 1;
        break;
    case 2: 
        count2+=1;
        break;
    case 3:
        count3+= 1;
        break;
    case 4:
        count4+= 1;
        break;
    case 5: 
        count5+= 1;
        break;
    case 6:
        count6+= 1;
        break;
    case 7:
        count7+= 1;
        break;
    case 8: 
        count8+= 1;
        break;
    case 9:
        count9+= 1;
        break;
    default:;
}
}

for(int rows = 0; rows < 10; rows++)
{
    cout << endl << rows << " | ";
    for(int c = 0; c < count0; c++)
    {
        {
            cout << "*" ;

        }
    }

} 
```

编辑：

我在为我的列获取 for 循环时遇到问题，也只在一行上输出 *。知道我应该改变什么吗？到目前为止，如果我输入 3 个零（count0=3），它将显示 3 个“*”，但在所有 9 行上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:46:12.387

你*可以*做什么：

1.  用函数和数组编写程序。
2.  通过将它们的代码放在调用它们的任何位置来擦除函数，记住正确设置参数。
3.  用 N 个变量替换数组，并用一个巨大的 switch/case 替换它们的访问：

    ```
     //arr[i] = 42;
     switch (i) {
     case 0: arr_0 = 42; break;
     case 1: arr_1 = 42; break;
     //...
     } 
    ```

您可以通过使用宏来促进两者，例如使用 Boost.Preprocessor 重复从 0 到 N 的情况

你*应*该做什么：说不。告诉您的老师，不使用该语言的最基本功能是胡说八道。但也许等到他接受你的解决方案之后;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:33:19.033

If you only need to count single digit numbers, then one way to go is to use 10 variables =) int count0, count1... etc... then you have almost array so, you can count input and then output counted values..

# php - 在变量中获取 URL，包括内部链接

> ID：16099418
> 
> 赞同：0
> 
> 时间：2013-04-19T07:25:15.680
> 
> 标签：php

我正在使用以下代码在变量中获取当前页面 URL。

```
echo $url=$_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
// Result: mywebsite/webpage.php 
```

一切顺利，直到这里。但是我的webpage.php 有一些内部链接。哪个使 URL 像这样

```
http://mywebsite/webpage.php#fragment-1 
```

因此，当用户在此页面上并刷新页面时。我也需要在 Result 中有 fragment-1，但它显示的结果与之前相同。那么如何从 url 获取 '#fragment-1' 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:26:38.690

你不能。哈希不会发送到 Web 服务器。

# jquery - 在 HTML 表格内单击获取按钮值

> ID：16099420
> 
> 赞同：0
> 
> 时间：2013-04-19T07:25:30.963
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我在 C# MVC 3 中创建了一个网格，并在网格的每一行中放置了一个删除按钮。

请看我下面的图片。

![在此处输入图像描述](https://i.stack.imgur.com/CGmwd.png)

删除按钮代码。

```
<td>
 <button id="removefromcart" type="button" name="removefromcart" 
          class="remove-cartitem" value="@(item.Id)"> </button></td> 
```

脚本 ：

```
<script type="text/javascript">
$(document).ready(function () {

    $('[name="removefromcart"]').click(function () {
        alert('clicked');
    });

}) 
```

我尝试提醒单击按钮的值。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:28:33.147

尝试这个：

```
$('.remove-cartitem').click(function () {
    alert($(this).attr('value'));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:28:59.363

`class` `attribute`dom元素的使用

```
<script type="text/javascript">
$(document).ready(function () {

$('.remove-cartitem').click(function () {
    alert($(this).val());
});

});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T07:29:23.017

```
 $('[name="removefromcart"]').click(function () {
        alert($(this).val());
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T07:36:46.320

你的按钮有一个 id，我想使用这个 ID 来获取 jquery 中的元素会更好。

此外，click() 函数已被弃用，您应该使用 on('click')，它允许您使用 off('click') 取消绑定事件。

```
$('#removefromcart').on('click', function() {
    alert( $(this).val() );
}); 
```

最好的方法是不使用 jQuery

```
document.getElementById('removefromcart').addEventListener('click', function() {
    alert( this.attributes.value.nodeValue );
}); 
```

希望这可以帮助 ：）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T07:39:42.863

只需获取 DOM 元素的值：

```
$('[name="removefromcart"]').click(function () {
    alert(this.value);
}); 
```

* * *

编辑 ：

`this.value`等价于`$(this).val()`或`$(this).attr('value')`但最快，因为我们只操作 DOM 属性（而不是 jQuery 对象）...

参见例如：[jsPerf](http://jsperf.com/jquery-vs-plain-javascript/3)

# c - 如何在 asm 内联语句中请求通用寄存器？

> ID：16099425
> 
> 赞同：0
> 
> 时间：2013-04-19T07:25:47.190
> 
> 标签：c, gcc, assembly, inline-assembly

有没有办法让 gcc 为 asm 内联内部使用分配一个寄存器？这是一个示例（在伪 asm 中），其中 r5 直接在 asm 中使用，但它可以是任何通用寄存器，它仅供内部使用，因此既不是输入也不是输出：

```
asm("load_immediate_value %%r5,0;"
    /* ... */
    "add_immediate_value %%r5,%%r5,42"
    /* ... */
    :
    :
    : "r5"); 
```

在这个例子中，我选择了寄存器 r5 并通过 clobber 列表告诉 gcc 我正在使用它。但是如果 r5 是一个 ABI 寄存器呢？我需要一种方法来简单地要求注册，而不必自己命名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:00:33.920

通常这样做的方式是：

```
static __inline__ void set_archctrl0(unsigned long val) {
    register unsigned long archctrl0 __asm__("archctrl0") = val;

    __asm__ __volatile__("" : "+r"(archctrl0) : : "cc", "memory");
} 
```

空*语句* `asm`只是为了强制编译器*不要*优化整个事情。

或者，一个更实际的例子，读取堆栈指针寄存器可以这样完成：

```
static __inline__ void * getSP(void) {
    register void * sp asm("sp");
    asm ("" : "=r"(sp));
    return sp;
} 
```

*将变量绑定*到特定寄存器的方法记录在 GCC 手册的[显式寄存器变量](http://gcc.gnu.org/onlinedocs/gcc/Explicit-Reg-Vars.html#Explicit-Reg-Vars)部分。

当然，如果编写特定于架构的寄存器需要自定义指令（即不能使用 CPU 通常用于初始化寄存器值的任何类型的“移动”或“加载”来完成），你宁愿需要类似的东西：

```
static __inline__ void set_archctrl0(unsigned long val) {
    __asm__ __volatile__("setarchctrl0 %0" : : "r"(val) : "cc", "memory");
} 
```

显然，所有这些仅适用于“正常”代码*未*使用的寄存器（即在平台 ABI 之外/由平台 ABI 明确保留为全局变量/作为不被编译代码触及的 regs）。

您不能以这种方式指示编译器“不使用通用寄存器”。据我所知，这在 gcc 中是不可能的。

# java - 无法在 JavaFX 中加载图像

> ID：16099427
> 
> 赞同：17
> 
> 时间：2013-04-19T07:25:49.887
> 
> 标签：java, javafx-2, javafx

我测试了这段代码以创建带有图像的对话框。

```
final int xSize = 400;
final int ySize = 280;
final Color backgroundColor = Color.WHITE;
final String text = "SQL Browser";
final String version = "Product Version: 1.0";

final Stage aboutDialog = new Stage();
aboutDialog.initModality(Modality.WINDOW_MODAL);

Button closeButton = new Button("Close");

closeButton.setOnAction(new EventHandler<ActionEvent>() {
    @Override
    public void handle(ActionEvent arg0) {
        aboutDialog.close();
    }
});

GridPane grid = new GridPane();
grid.setAlignment(Pos.CENTER);
grid.setHgap(10);
grid.setVgap(10);
grid.setPadding(new Insets(25, 25, 25, 25));

Image img = new Image("logo.png");
ImageView imgView = new ImageView(img);

grid.add(imgView, 0, 0);

grid.add(new Text(text), 0, 1);
grid.add(new Text(version), 0, 2);
grid.add(closeButton, 14, 18);

Scene aboutDialogScene = new Scene(grid, xSize, ySize, backgroundColor);
aboutDialog.setScene(aboutDialogScene);
aboutDialog.show(); 
```

我将图像文件放入目录`/src`中。但由于某种原因，图像没有显示。你能帮我纠正我的错误吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-19T11:56:55.260

只需替换此代码：

```
Image img = new Image("logo.png"); 
```

有了这个

```
Image img = new Image("file:logo.png"); 
```

文档参考。 [https://docs.oracle.com/javase/8/javafx/api/javafx/scene/image/Image.html](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/image/Image.html)

当您将 a 传递`String`给`Image`类时，可以通过**四种不同的方式**处理它（*从 docu 复制*）：

```
// The image is located in default package of the classpath
Image image1 = new Image("/flower.png");

// The image is located in my.res package of the classpath
Image image2 = new Image("my/res/flower.png");

// The image is downloaded from the supplied URL through http protocol
Image image3 = new Image("http://sample.com/res/flower.png");

// The image is located in the current working directory
Image image4 = new Image("file:flower.png"); 
```

`file:`前缀只是一个 URI 方案，或者换句话说，`http:`协议分类器的对应物。这也适用于文件浏览器或网络浏览器......;）

如需进一步参考，您可以查看文件 URI 方案的 wiki 页面：[https ://en.wikipedia.org/wiki/File_URI_scheme](https://en.wikipedia.org/wiki/File_URI_scheme)

快乐编码，

卡拉施

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-20T15:48:35.917

尝试这个：

```
img = new Image("/logo.png"); 
```

如果没有给出指示 URL 的协议部分（如*http:*或*file:*），则该文件应该驻留在默认包中。如果您希望它放入不同的包中，例如 com.my.images，您可以以类似路径的方式添加此信息：

```
img = new Image("/com/my/images/logo.png"); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-06-15T00:25:33.627

```
Image img = new Image("file:/logo.png"); 
```

或路径方式：

```
Image img = new Image("file:c:/logo.png"); 
```

或者

```
File f = new File("c:\\logo.png");
Image img = new Image(f.toURI().toString()); 
```

也可以使用：

```
new Image(file:src/logo.png) //root of project 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-07T15:45:06.337

这个功能：

```
Image image  = new Image(getClass()
        .getResourceAsStream("ChimpHumanHand.jpg")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-22T11:58:42.560

将图像复制并粘贴到源包（NetBeans IDE 中的源包）所在的文件夹中。然后

```
Image image = new Image("a1.jpg");
Image image = new Image("File:a1.jpg"); 
```

两者都可以。

# google-chrome - Chrome Web 检查器：查找和替换

> ID：16099428
> 
> 赞同：41
> 
> 时间：2013-04-19T07:25:54.737
> 
> 标签：google-chrome, google-chrome-devtools, web-inspector

Chrome Web Inspector 中是否有“查找和替换”功能？如果存在，我在哪里可以找到它？如果重要的话，我正在使用 Chrome 26.0.1410.64。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-19T07:33:33.563

本机没有内置任何内容。**如果您想更改输入字段中的文本，**有一个[`Search and Replace`](https://chrome.google.com/webstore/detail/search-and-replace/bldchfkhmnkoimaciljpilanilmbnofo)插件可能会有所帮助。

 **或者，如果您想在其中进行搜索和替换，`HTML`您可以*右键单击*→*编辑为 HTML*，`<body>`在*DevTools 元素面板*中选择所有带有`Ctrl`+的文本`a`，粘贴到您喜欢的编辑器中，在那里进行更改并将其粘贴回来。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2016-07-20T22:51:12.723

***取自labnol.org的[这个页面](http://www.labnol.org/internet/find-replace-text-in-web-pages/29080/)***

当您在网页上时，在 Windows 上按`Ctrl`++或在Mac上按`Shift`++打开 Chrome 开发人员工具中的控制台窗口。现在输入以下命令，将所有出现的单词 ABC 替换为 XYZ。`J``Cmd``Opt``J`

```
document.body.innerHTML = document.body.innerHTML.replace(/ABC/g, "XYZ")
document.head.innerHTML = document.head.innerHTML.replace(/ABC/g, "XYZ") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-02-15T11:41:05.593

### 如何明确显示编辑

由@Cfomodz 要求，我的答案建立在[@davem 的答案之上](https://stackoverflow.com/a/38492147/199400)：

> 当您在网页上时，在 Windows 上按`Ctrl`++或在Mac上按`Shift`++打开 Chrome 开发人员工具中的控制台窗口。`J``Cmd``Opt``J`

在 RegEx 的帮助下，您可以保留原始字符的数量，或者甚至更好地将其减少到统一的长度（以提供关于原始内容的更少线索），并使用可见的编辑符号，如 unicode“完整块”█ (U+2588 ）。例如，要编辑 HTML 正文中的所有电子邮件地址，请使用：

```
document.body.innerHTML = document.body.innerHTML.replace(/[A-Za-z.-]+@[A-Za-z.-]+/g, "███@██████.███&quot;) 
```

查看我的[RegEx 演示](https://regex101.com/r/jslyEg/1)以现场查看和尝试。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-20T06:10:01.843

要在 Sources 面板中的文件中搜索和替换，您可以使用快捷键 Ctrl+f**

# c++ - 从 QT 资源加载 openCV Haarcascade

> ID：16099442
> 
> 赞同：0
> 
> 时间：2013-04-19T07:26:31.047
> 
> 标签：c++, qt, opencv

我想将 openCV 级联添加到 QT 的资源管理中。但我失败了。

我已经测试了这段代码：

```
// load cascades
QUrl *location_cascade= new QUrl("qrc:/cascades/haarcascade_frontalface_alt.xml");
std::string file=location_cascade->toString().toStdString();
CvHaarClassifierCascade* cascade = (CvHaarClassifierCascade*)cvLoad( file); 
```

但比编译器说的：

```
cannot convert 'std::string* {aka std::basic_string<char>*}' to 'const char*' for argument '1' to 'void* cvLoad(const char*, CvMemStorage*, const char*, const char**)' 
```

有人有想法吗？

**更新** 当前该文件位于项目的源文件夹中。我可以通过相对路径访问这个文件吗？也许是指向 src.dir 的常数？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:55:56.647

编译器告诉你`cvLoad`应该是的第一个参数`const char*`，但你正在传递`std::string`。您需要将其称为`cvLoad(file.c_str())`.

但是，即使您设法编译了该代码，它也可能无法正常工作，因为 openCV 对 Qt 资源一无所知，并且无法打开具有该名称的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-25T14:44:06.640

即便如此，这个问题已经 2 岁了，我想分享我使用的解决方法。

```
QString sPath = QCoreApplication::applicationDirPath().append("/frontalface.xml")
QFile::copy(":/android-sources/OpenCV/haarcascade_frontalface_default.xml" , sPath);
cv::CascadeClassifier faceCascade = cv::CascadeClassifier(sPath.toStdString());
QFile::remove(sPath); 
```

它可以工作，但你必须绕道绕过本地硬盘。对于 android 应用程序仍然有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-22T11:39:31.060

```
using namespace cv;    
QFile xmlRes(":/new/cascades/res/cascade.xml");
    if (xmlRes.open(QIODevice::ReadOnly)) {
        QString data(xmlRes.readAll());
        FileStorage fs(data.toStdString().c_str(), FileStorage::MEMORY | FileStorage::FORMAT_XML);
        if (!cascade.read(fs["cascade"]))
            qDebug() << "ERROR: Could not read classifier cascade.";
    } 
```

# ios - iOS - UISwitch ignoring value from NSUserDefaults

> ID：16099444
> 
> 赞同：0
> 
> 时间：2013-04-19T07:26:34.193
> 
> 标签：ios, objective-c, xcode, nsuserdefaults, uiswitch

I gave it all but I just can't figure this one out... need your help please.
**What I am doing:**
I have an app with a navbar and a tableview as the main screen. Up top in the navbar I have placed a UISwitch (which changes the content of the tableview) and a settings button. The default state of the switch is off and when the user flips it, I check if all of his account info in the settings is filled out and based on that I either allow him to switch on or give him an alert (that he should fill out his account info first) and keep the switch off.
On the accountView in the seetings I have a "Save" button that if pressed, uses NSUserDefaults to store the info and also one string that saves as "true" if all account info is filled in (saved as FNAccountFiledKey). **My problem:**
Everytime I launch the app, the uiSwitch is for some strange reason evaluating the FNAccountFiledKey as if "true" even tho NSLog right before the if statement says it is set to "false". - the interesting thing is that if I go to the accountView, press the "Save" button and go back, the uiSwitch starts working as desired.

Here is my code:

the switchChanged method

```
{
NSString *accountInfo=[[NSUserDefaults standardUserDefaults]objectForKey:@"FNAccountFiledKey"];

NSLog(@"%@",accountInfo);

if (accountInfo==@"false") {

    [self.switch1 setOn:NO animated:YES];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Please fill out ALL your Account info first!" message:nil delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alert show];

} else { //if all account info is filled out proceed as usual

if (self.switch1.on) {
    self.tableView.rowHeight= 76;
} else {
    self.tableView.rowHeight= 590;
}

//reload data when switch is changed
    [[self tableView]reloadData];} 
```

and the code for the save button in the AccountView:

```
NSString *name=[nameField text];
NSString *surname=[surnameField text];
NSString *gender=[genderField text];
NSString *birth=[birthField text];
NSString *email=[emailField text];
NSString *phone=[phoneField text];

[[NSUserDefaults standardUserDefaults]setObject:name forKey:FNAccountNameKey];
[[NSUserDefaults standardUserDefaults]setObject:surname forKey:FNAccountSurnameKey];
[[NSUserDefaults standardUserDefaults]setObject:gender forKey:FNAccountGenderKey];
[[NSUserDefaults standardUserDefaults]setObject:birth forKey:FNAccountBirthKey];
[[NSUserDefaults standardUserDefaults]setObject:email forKey:FNAccountEmailKey];
[[NSUserDefaults standardUserDefaults]setObject:phone forKey:FNAccountPhoneKey];

NSString *tru=@"true";
NSString *fals=@"false";

if ((name.length>0)&&(surname.length>0)&&(gender.length>0)&&(birth.length>0)&&(email.length>0)&&(phone.length>0)) {
    [[NSUserDefaults standardUserDefaults]setObject:tru forKey:FNAccountFiledKey];
} else { [[NSUserDefaults standardUserDefaults]setObject:fals forKey:FNAccountFiledKey];
        }
NSLog(@"Account info complete: %@", [[NSUserDefaults standardUserDefaults]objectForKey:FNAccountFiledKey]); 
```

Does anyone have an Idea what could cause this behavior?
Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:28:06.773

try like this for comaparing string don't use `'=='` operator use like this isEqualToString .

```
if ([accountInfo isEqualToString:@"false"]) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:45:38.787

First thing that you should try is to replace the Logical Operator "==" with "isEqualToString:" like this

```
 if([accountInfo isEqualToString:[NSString stringWithFormat:@"false"]])
  {
       //Do your stuff here
  } 
```

also soon after you make any changes in the NSUserDefault , you must also synchronize it

```
 [[NSUserDefaults standardUserDefaults] synchronize]; 
```

# c# - 使用 LINQ 对列表中的项目进行排名

> ID：16099452
> 
> 赞同：8
> 
> 时间：2013-04-19T07:26:50.087
> 
> 标签：c#, .net, linq

我试图找出一种方法来对列表中的项目进行排名，并将结果保存在一个对象或另一个列表中。我知道 orderby 方法，但我不完全知道如何为每个项目创建相应的排名编号。

例如：

```
List<int> numbers = new List<int>();

numbers.Add(650);
numbers.Add(150);
numbers.Add(500);
numbers.Add(200); 
```

然后将结果从低到高或从高到低存储在这里：

```
public class NumberRank
{
    public int Number {get; set;}
    public int Rank {get; set;}

    public NumberRank(int number)
    {
        Number = number;
        Rank = ????????;
    }
} 
```

任何通过 LINQ 的解决方案？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-19T07:28:40.503

[Select](http://msdn.microsoft.com/library/vstudio/bb534869)扩展方法的重载之一返回索引：

> 通过合并元素的索引将序列的每个元素投影到新形式中。

您可以使用它来获得排名：

```
public class NumberRank
{
    public int Number {get; set;}
    public int Rank {get; set;}

    public NumberRank(int number, int rank)
    {
        Number = number;
        Rank = rank;
    }
}

List<int> numbers = new List();

numbers.Add(650);
numbers.Add(150);
numbers.Add(500);
numbers.Add(200);

numbers.OrderBy(n => n)
       .Select((n, index) => new NumberRank(n, index)); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-19T07:29:05.890

这应该这样做：

```
public class NumberRank
{
   public int Number {get; set;}
   public int Rank {get; set;}

   public NumberRank(int number, int rank)
   {
      Number = number;
      Rank = rank;
   }
}

class Test
{
   static void Main()
   {
      List<int> numbers = new List<int>();

      numbers.Add(650);
      numbers.Add(150);
      numbers.Add(500);
      numbers.Add(200);

      List<NumberRank> numberRanks = numbers.OrderByDescending(n => n).Select((n, i) => new NumberRank(n, i + 1)).ToList();

      // check it worked
      foreach(NumberRank nr in numberRanks) Console.WriteLine("{0} : {1}", nr.Rank, nr.Number);
      Console.ReadKey();  
   }
} 
```

要按升序排列（即最低数字在前），只需将 OrderByDescending 替换为 OrderBy。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-02T11:33:06.617

```
Function Rank(Of T As IComparable)(list As IEnumerable(Of T), item As T) As Integer
    Return list.Count(Function(x) x.CompareTo(item) < 0) + 1
End Function

Public Sub Main()
    Dim l = New Integer() {9, 1, 3, 8, 4, 6}
    Console.WriteLine("6 is the " & Rank(l,6) & "th element of ")
    Console.WriteLine([String].Join(" ", l))
End Sub

6 is the 4th element of
9 1 3 8 4 6 
```

或者，在 C# [http://dotnetfiddle.net/3ZGeJ1](http://dotnetfiddle.net/3ZGeJ1)

# java - 在 Jar 外读写文件

> ID：16099453
> 
> 赞同：-2
> 
> 时间：2013-04-19T07:26:54.550
> 
> 标签：java, io

我正在从我拥有的一堆 java 文件中制作我的第一个可执行跨平台 jar 文件。问题是，我需要从文件外的 txt 文件中读取一些值。这之前运行良好，我会在我的 .class 文件旁边放下说 txt 并调用

```
javac myClass this.txt 
```

现在这不起作用，我期望在所述类之外的输出也不起作用。

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:21:42.640

我发现这是答案：

使用 File reader 类，而不是使用带有 File ala 的 Scanner

```
Scanner scan= new scanner(new File("foo.txt")); //doesn't work

Scanner scan= new Scanner(new FileReader("foo.txt")); //does; 
```

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-23T01:33:57.503

我有一个类似的情况：希望我`*.jar`的文件访问所述文件旁边的目录中的`*.jar`文件。另请参阅[此答案](https://stackoverflow.com/questions/39081215/access-a-resource-outside-a-jar-from-the-jar)。

我的文件结构是：

```
./ - the root of your program
|__ *.jar
|__ dir-next-to-jar/some.txt 
```

我可以使用以下内容将文件（例如`some.txt`）加载到文件内的 InputStream 中`*.jar`：

```
InputStream stream = null;
    try{
        stream = ThisClassName.class.getClass().getResourceAsStream("/dir-next-to-jar/some.txt");
    }
    catch(Exception e) {
        System.out.print("error file to stream: ");
        System.out.println(e.getMessage());
    } 
```

然后随心所欲`stream`

# php - 更改表单的错误消息类？

> ID：16099458
> 
> 赞同：2
> 
> 时间：2013-04-19T07:27:01.503
> 
> 标签：php, cakephp, cakephp-2.0

我是 CakePHP 的新手。我尝试通过以下方式将默认类更改为`error-message`官方[文档](http://book.cakephp.org/1.3/en/The-Manual/Core-Helpers/Form.html)：`error`

```
<?php
echo $this->Form->create('Post', array(
    'inputDefaults' => array(
        'error' => array(
            'wrap' => 'small',
            'class' => 'error'
        )
    )
)); ?> 
```

但是当发生错误时，它仍然使用默认的`div.error-message`.

我还尝试为每个人设置代码`input`。但仍然没有效果：

```
$this->Form->input('title', array('error' => array('wrap' => 'small', 'class' => 'error'))); 
```

我正在使用 CakePHP 2.3.2

有什么解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T08:00:47.837

糟糕，我阅读了与 2.3 不兼容的 1.3 文档。

对于上面的 2.0 版本，我们需要在数组中添加`attributes`数组`error`：

```
<?php
echo $this->Form->create('Post', array(
    'inputDefaults' => array(
        'error' => array(
            'attributes' => array(
                'wrap' => 'small', 'class' => 'error'
            )
        )
    )
)); ?> 
```

谢谢

# c - 浮点数是 printf 错误的值

> ID：16099468
> 
> 赞同：0
> 
> 时间：2013-04-19T07:27:31.323
> 
> 标签：c, function, pointers, floating-point, printf

我有另一个浮点输出问题打印“1.#R”，我已将其缩小到重复值，所以我的问题是如何将值四舍五入到小数点后 2 位，以便我可以打印该值（但不使用“ %.2f")。这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>

void tax_deduction( float *total)
{
    float taxpercent = 1.20;
    float nationalInsurance = 1.175;
    *total = *total - 9000;
    *total = *total / taxpercent;
    *total = *total / nationalInsurance;
    *total = *total + 9000;

}

void hourly_rate(float *rate)
{
    int weeks = 52;
    float hours = 37.5;
    *rate = *rate /(float)weeks;
    *rate = *rate /hours;
}

int main()
{
   float wages;
   float hours = wages;
   printf("Please enter your wage: \n");
   scanf("%f",&wages);
   if(wages > 9000){
    tax_deduction(&wages);
   }
   hourly_rate(&hours);
   printf("wages after tax and NI: %.2f\n", wages);
   printf("wages per month: %.2f\n", wages / 12);
   printf("hourly rate: %.2f\n", hours);
   return 0;
} 
```

它在运行 hourly_rate 函数后的显示方式存在问题，就像我在底部将其编码为**printf("hourly rate: %.2f\n", (wages/52)/37/5);** 它可以工作，但这并不是我真正想要的编码方式。

谁能想到为什么这不能正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:31:59.423

你的问题不是`printf`. 您的问题是由于使用了未初始化的值，您的代码的算术不正确。

```
float wages; // wages not initialized
float hours = wages; // hours assigned that uninitialized value
printf("Please enter your wage: \n");
scanf("%f",&wages);
if(wages > 9000){
    tax_deduction(&wages);
}
hourly_rate(&hours); // hours still not initialized 
```

您未能初始化`hours`。

我的猜测是你的意思是`hours`在读入`wages`. 因此，将分配移动到`hours`代码中`wages`正确定义的位置。

```
float wages;
printf("Please enter your wage: \n");
scanf("%f",&wages);
if(wages > 9000){
    tax_deduction(&wages);
}
float hours = wages;
hourly_rate(&hours); 
```

`%.2f`您得到的奇怪输出是使用格式打印浮点 NaN 的结果。我还建议您将`if(wages > 9000)`测试移到`tax_deduction`. 正如您目前所拥有的那样，减税代码的那部分已泄漏到调用代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:32:20.560

是的，因为您`hours = wages`在将值读入工资之前进行了设置。这些是设置为相等的值，而不是引用。

如果您在 scanf 行之后插入小时 = 工资，它将起作用。

此外，就编码风格而言，在像这些简单的情况下，大多数程序员更喜欢使用函数的返回值，而不是发送指向已修改值的指针。这绝不是普遍的，但可能是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:05:54.350

要添加有关未初始化变量的其他答案：

您`printf()`正在尝试打印`1.#QNAN`（可能是因为未初始化变量的值恰好是“安静的 NAN”）。但是精度没有足够的空间，所以`1.#QNAN`字符串被“四舍五入”到`1.#R`. 有关此现象的详细信息，请参阅以下文章：

*   [-1.#IND 是什么意思？：对 Visual C 运行时库如何打印特殊浮点值的调查](http://blogs.msdn.com/b/oldnewthing/archive/2013/02/21/10395734.aspx)
*   [1#J 是什么意思？特殊值打印的一个奇怪的角落案例](http://blogs.msdn.com/b/oldnewthing/archive/2013/02/28/10397976.aspx)
*   [什么浮点值使 sprintf_s() 产生“1.#QO”？](https://stackoverflow.com/a/5951834/12711)

# mysql - 使用 web.py 有效地使用查询结果

> ID：16099477
> 
> 赞同：1
> 
> 时间：2013-04-19T07:27:42.820
> 
> 标签：mysql, web.py

我正在使用 web.py 来管理我的 Web 应用程序并使用 MySQL 作为数据库。我进行原始查询并获取结果，然后将其转换为列表并对其进行迭代。我需要将检索到的列推送到数组（或 Numpy 数组）中，然后使用 Matplotlib 进行绘图。一切正常，但我不确定我使用的方法是否最有效？代码是：

```
retrieved_data=list(db.query(query))
LEN=len(retrieved_data)
x=[0]*LEN
y=[0]*LEN
X=[None]*LEN
for i in range(0,LEN):
    x[i]=retrieved_data[i]["timestamp"]
    y[i]=retrieved_data[i][parameter]
    X[i]=datetime.datetime.fromtimestamp(x[i],pytz.timezone(TIMEZONE)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:16:29.147

如果只需要迭代一次，则不必转换 db.query 的结果。因此，您的特定示例可以稍微简化一些。

```
x, y, X = [], [], []
for item in db.query(query):
    x.append(item.timestamp)
    y.append(item[parameter])
    X.append(datetime.datetime.fromtimestamp(item.timestamp,
                                             pytz.timezone(TIMEZONE)) 
```

或者，如果您需要对相同的结果进行多次迭代，您可以使用`.list()`方法将其转换为列表。

```
retrieved_data = db.query(query).list() 
```

# javascript - 我想仅使用 javascript 将天数添加到特定日期

> ID：16099480
> 
> 赞同：-4
> 
> 时间：2013-04-19T07:27:50.007
> 
> 标签：javascript

我想仅使用 javascript 示例将天数添加到特定日期：

```
textbox1.text=10-04-2013
textbox2.text=30

textbox3.text=10-05-2013 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:29:25.193

You can use this

```
var yourDate= new Date();
var numberOfDaysToAdd = 6;
someDate.setDate(yourDate.getDate() + numberOfDaysToAdd); 
```

# objective-c - 从 ipad 中的横向视图显示模态视图控制器时，如何强制视图控制器的方向从纵向显示

> ID：16099482
> 
> 赞同：1
> 
> 时间：2013-04-19T07:27:56.603
> 
> 标签：objective-c, ipad, uiinterfaceorientation

我有一个应用程序，其中有两个视图控制器说 viewcontrollerA 和 viewcontrollerB。当 viewcontrollerA 以纵向模式加载时，我单击 viewcontrollerA 上的提交按钮 viewcontrollerB 以纵向模式显示。这工作正常。当 viewcontrollerA 以横向加载时模式，然后我单击提交我希望 viewcontrollerB 以纵向模式呈现，但目前它以横向模式显示。我想强制 viewcontrollerB 以纵向模式显示，即使它是从横向模式 viewcontroller 呈现的。这是我的代码：

这是 viewcontrollerA 的提交代码

```
-(IBAction)submit
{
    LoginNewViewController *lvc  =[[LoginNewViewController alloc] initWithNibName:@"LoginNewViewController" bundle:[NSBundle mainBundle]];
                [self presentModalViewController:lvc animated:YES];

} 
```

这是给 viewcontrollerB

```
- (BOOL)shouldAutorotate
{
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationMaskPortrait| UIInterfaceOrientationMaskPortraitUpsideDown);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:36:38.897

如果要在显示特定视图时更改方向，则应调用`[UIApplication setStatusBarOrientation:animated:]`按钮操作方法。

# python - Python Numpy中几个数组的元素乘法

> ID：16099488
> 
> 赞同：8
> 
> 时间：2013-04-19T07:28:27.260
> 
> 标签：python, numpy, multiplication

在编写一些 Quantum Mechanics 例程时，我发现了 Python 的 NumPy 的一个奇怪行为。当我将 NumPy 的乘法与两个以上的数组一起使用时，我会得到错误的结果。在下面的代码中，我必须写：

```
f = np.multiply(rowH,colH)
A[row][col]=np.sum(np.multiply(f,w)) 
```

这会产生正确的结果。然而，我最初的表述是这样的：

```
A[row][col]=np.sum(np.multiply(rowH, colH, w)) 
```

这不会产生错误消息，但会产生错误的结果。我认为我可以给 numpy 的乘法例程提供三个数组的错在哪里？

这是完整的代码：

```
from numpy.polynomial.hermite import Hermite, hermgauss
import numpy as np
import matplotlib.pyplot as plt

dim = 3
x,w = hermgauss(dim)
A = np.zeros((dim, dim))
#build matrix
for row in range(0, dim):
    rowH = Hermite.basis(row)(x)
    for col in range(0, dim):
        colH = Hermite.basis(col)(x)
        #gaussian quadrature in vectorized form
        f = np.multiply(rowH,colH)
        A[row][col]=np.sum(np.multiply(f,w))
print(A) 
```

**::NOTE::**此代码仅在**NumPy 1.7.0**及更高版本上运行！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-19T07:30:56.953

你的错在于没有阅读[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.multiply.html)：

> `numpy.multiply(x1, x2[, out])`

`multiply`正好需要两个输入数组。可选的第三个参数是一个输出数组，可用于存储结果。（如果未提供，则创建并返回一个新数组。）当您传递三个数组时，第三个数组被前两个数组的乘积覆盖。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-10-25T09:17:25.397

`np.ndarray`对于任何偶然发现这一点的人，应用形状n 的元素乘法的最佳方法`(d, )`是首先`np.vstack`将它们应用于`np.prod`第一个轴：

```
>>> import numpy as np
>>>
>>> arrays = [
...   np.array([1, 2, 3]),
...   np.array([5, 8, 2]),
...   np.array([9, 2, 0]),
... ]
>>>
>>> print(np.prod(np.vstack(arrays), axis=0))
[45 32  0] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-17T08:36:10.250

是的！就像对 np.arrays 做 *

```
import numpy as np
a=np.array([2,9,4])
b=np.array([3,4,5])
c=np.array([10,5,8])
d=a*b*c
print(d) 
```

生产：

```
[ 60 180 160] 
```

# forms - 如何在线预填PDF？

> ID：16099498
> 
> 赞同：0
> 
> 时间：2013-04-19T07:28:47.497
> 
> 标签：forms, pdf, pdf-generation, fpdf, pdflib

我从动态数据开始，然后填写一个空的 PDF 文件。如何使用动态数据填写 pdf？

* * *

编辑：我找到了一种用[FPDF.org](http://fpdpf.org)和[插件](http://www.fpdf.org/en/script/script93.php)填充 pdf 的方法。

1.  首先，使用 Acrobat Pro 或 LiveCycle 等软件将表单域添加到您的 PDF，然后使用 PDFtk 在线或离线准备 PDF：`pdftk modele.pdf output modele2.pdf`
2.  按照插件说明将数据放入数组并用JS填充pdf

在这里，我们得到了我们的 PDF 文件！

现在，我只需要将表单展平，以防止用户更改字段选项。有没有办法使用安装在我的共享主机上的 FPDF 或 PDFlib？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:04:22.913

你可以使用 pdftk 来做到这一点。例如。

```
pdftk form.pdf fill_form data.fdf output out.pdf flatten 
```

或者：

```
pdftk form.filled.pdf output out.pdf flatten 
```

# tsql - 如何使用先前查询的结果插入表中

> ID：16099507
> 
> 赞同：1
> 
> 时间：2013-04-19T07:29:13.263
> 
> 标签：tsql, sql-server-2008-r2

早上好。

我正在使用先前查询的结果填充多对多表，如下所示...

```
WITH Temp AS
(
    SELECT      UserID, Result 
    FROM        <Master_Table>
    WHERE       UserID IN (SELECT Name FROM Users)
)   
INSERT INTO UserDecisions 
    (User_Id, Decision_Id)
    VALUES
    (
        (SELECT Id FROM Users WHERE Temp.UserID = Users.Name),
        (SELECT Id FROM Decisions WHERE Temp.Result = Decisions.Name)
    ) 
```

在执行时，我收到如下错误。

```
Msg 4104, Level 16, State 1, Line 22
The multi-part identifier "Temp.UserID" could not be bound.
Msg 4104, Level 16, State 1, Line 23
The multi-part identifier "Temp.Result" could not be bound. 
```

请问你会如何解决这个问题？Temp 子查询是否需要是临时表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:31:49.787

你需要把它写成一个`SELECT`而不是一个`VALUES`子句：

```
WITH Temp AS
(
    SELECT      UserID, Result 
    FROM        <Master_Table>
    WHERE       UserID IN (SELECT Name FROM Users)
)   
INSERT INTO UserDecisions 
    (User_Id, Decision_Id)
    SELECT u.Id,d.Id
    FROM Temp t
    INNER JOIN Users u ON t.UserID = u.Name
    INNER JOIN Decisions d ON t.Result = d.Name 
```

# python - Click on IAccessible(MSAA) element without DefaultAction

> ID：16099513
> 
> 赞同：3
> 
> 时间：2013-04-19T07:29:24.657
> 
> 标签：python, ui-automation, msaa, iaccessible

I've been trying to create an automated test with MSAA on python using [pyMSAA](https://github.com/phus/pyMSAA)

I faced with a problem when a button does not have DefaultAction

```
b.accDoDefaultAction()

Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
  File "msaa.py", line 215, in accDoDefaultAction
    self.IAccessible._IAccessible__com_accDoDefaultAction(objChildId)
_ctypes.COMError: (-2147352573, 'Member not found.', (None, None, None, 0, None)
) 
```

I found out that the absence of DefaultAction is normal.

Is there any way to make a click(double-click) on such elements? Send some event, etc... I am thinking about clicking by coordinates, but it may be not a good idea.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T06:32:21.663

发送鼠标点击绝对是可能的（使用 SendInput 或 Python 等价物）。您首先要做的是验证您的可点击点实际上是指向您要点击的对象（即，可点击点可能被另一个窗口/控件遮挡）。

您可以使用[AccessibleObjectFromPoint](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317977%28v=vs.85%29.aspx)（这似乎被`msaa.point`pyMSAA 包装）来检查该点下的可访问对象实际上是否与您尝试单击的对象相同。

现在您可以检查中的各个点`accLocation`以找到您的可点击点。最好的起始点是中心；如果失败，请尝试在 x 和 y 方向上分别位于宽度（或高度，视情况而定）的 1/3、1/2、2/3 处。

# xml - TEI 和 XSLT：输出文件中没有内容

> ID：16099519
> 
> 赞同：0
> 
> 时间：2013-04-19T07:29:58.220
> 
> 标签：xml, xslt

我有一个按照 TEI“标准”构建的 xml 文档，也许你们中有些人知道。我制作了一个 XSLT 将其转换为另一个 XML 结构。

但是我遇到了一个问题。转换过程不会到达 XML 结构中的特定节点。

原始文档如下所示：

```
<TEI xmlns="http://www.tei-c.org/ns/1.0" xmlns:tgl="http://******/namespaces  /metadata/language/2010" xmlns:tei="http://www.tei-c.org/ns/1.0" xmlns:tns="http://*****/namespaces/metadata/core/2010" xmlns:tgr="http://*****/namespaces/metadata/agent/2010" xmlns:jxb="http://java.sun.com/xml/ns/jaxb" xmlns:tgs="http://*****/namespaces/metadata/script/2010" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xml:id="tg397" n="/Literatur/M/Birlinger, Anton/Märchen und Sagen/Sagen, Märchen, Volksaberglauben/3./299\. Von den Sternen/2\. [Die Sterne halten Viele für die Köpfe silberner Nägel]">
<teiHeader xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:a="http://www.*****/namespace/digibib/authors" xmlns:fn="http://www.w3.org/2005/xpath-functions">

<fileDesc>
    <titleStmt>
    <title> hshshhshs </title>
</titleStmt>
<publicationStmt>
   .... 
```

使用我的 XSLT，我尝试到达一些节点。因为它不是我尝试一个简单的例子，但我无法达到 . 这是 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:output method="xml" indent="yes" encoding="UTF-8"/>
    <!--<xsl:template match="/TEI">-->
 <xsl:template match="/">

        <add><doc>
            <field name="title">
                <xsl:value-of select="TEI/teiHeader/fileDesc/titleStmt/title"/>
            </field>-
        </doc></add>

 </xsl:template>
 </xsl:stylesheet> 
```

这是结果：

```
 <?xml version="1.0" encoding="UTF-8"?>
   <add>
   <doc>
    <field name="title"/>-

       </doc>
   </add> 
```

我希望你们中的某个人能帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:37:31.847

这是因为 TEI 文档以这一行开头

```
<TEI xmlns="http://www.tei-c.org/ns/1.0" 
```

这意味着文档中的所有元素，除非另外指定命名空间前缀，都在命名空间“” [http://www.tei-c.org/ns/1.0](http://www.tei-c.org/ns/1.0) “

但是，在您的 XSLT 文档中，您尝试选择没有命名空间的元素，因此它与 TEI 中具有命名空间的元素不匹配。

解决方案是首先在 XSLT 文档中声明相关的命名空间，使用您喜欢的任何前缀：

```
<xsl:stylesheet 
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
   xmlns:tei="http://www.tei-c.org/ns/1.0"
   version="1.0"> 
```

然后你可以像这样编写你的 XLST 语句

```
<xsl:value-of select="tei:TEI/tei:teiHeader/tei:fileDesc/tei:titleStmt/tei:title"/> 
```

# java - 直接在 JBoss 服务器上配置 javax.faces.FACELETS_REFRESH_PERIOD

> ID：16099528
> 
> 赞同：0
> 
> 时间：2013-04-19T07:30:42.303
> 
> 标签：java, jsf, jboss, web.xml, jboss-4.2.x

我们有一个现有的应用程序（*JSF 1.2*），打包成一个耳朵，在*JBoss 4.2*上运行。我们使用*JRebel*，并且为了能够自动检测 xhtml 文件中的更改，我们需要通过将其添加到 web.xml 来[禁用 Facelets 缓存](https://stackoverflow.com/questions/7512414/jsf-and-automatic-reload-of-xhtml-files)：

```
<context-param>
    <param-name>javax.faces.FACELETS_REFRESH_PERIOD</param-name>
    <param-value>0</param-value>
</context-param> 
```

然而，如果这个参数可以直接在 JBoss 服务器上完成，我会更喜欢，这可能吗？如果是这样，我在哪里配置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:30:11.797

添加它`/deploy/jboss-web.deployer/conf/web.xml`的方式与在 webapp 自己的`/WEB-INF/web.xml`.

# jquery - jquery 用特定位置验证错误放置

> ID：16099530
> 
> 赞同：4
> 
> 时间：2013-04-19T07:30:46.547
> 
> 标签：jquery, jquery-validate

我想用 jquery validate 验证我的表单，但我想把我的错误标签放到一个特定的地方。下面的示例显示放入`<span class="error_label"></span>`. 我的问题是如何在特定位置进行错误放置，下面有一个示例，请帮助我..谢谢？

```
<script>
$(document).ready(function (){
$("#fm_regis").validate({
    rules :{
        name: {
            required: true,
        },
    },
    errorPlacement: function(error, element) {      
        //$(element).next('span .error_label :first').html(error);
        //$('.error_label').html(error);
        //$('.error_label').html(error);
        $(element).closest('.error_label').html(error);
    },
    messages: {
        name: {
            required: "Please input a username",
        },
    }
});
});
</script>

    <form name="fm_regis" id="fm_regis">
    <table>   
      <tr>
         <td width="100">Nama</td>
         <td>:</td>
         <td><input type="text" name="name" id="name" size="30"/></td>
      </tr> 
      <tr>
         <td width="100"></td>
         <td></td>
         <td><span class="error_label"></span></td>
      </tr>
   </table>
     <input type="submit" value="Register"/>
   </form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:38:15.627

尝试这个：

```
$("#fm_regis").validate({
  rules :{
    name: {
      required: true,
    },
  },   
  errorLabelContainer: "#id-of-your-specific-place",
  // More of your code
}) 
```

并摆脱该`errorPlacement:`功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T07:41:25.087

在您的特定情况下，您可以执行以下操作：

```
$(element).closest('tr').next().find('.error_label').html(error); 
```

[http://jsfiddle.net/kqTQu/](http://jsfiddle.net/kqTQu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:37:37.713

不确定我是否正确理解了问题，请尝试更改此行

```
$(element).closest('.error_label').html(error); 
```

至

```
$(element).append( "<span class="error_label">" + error + "</span>") ; 
```

确保在启动验证之前删除所有错误标签

# c# - 具有多选功能的 PropertyGrid 中的 UITypeEditor

> ID：16099531
> 
> 赞同：3
> 
> 时间：2013-04-19T07:30:47.937
> 
> 标签：c#, winforms, propertygrid, uitypeeditor

我有一个自定义对象，可以通过自定义 TypeEditor（谈论 .NET、c# 和 winforms）从 PropertyGrid（DevExpress）进行编辑。

我的自定义 UITypeEditor 中的“入口点”是方法

```
public override object EditValue(ITypeDescriptorContext context,
                                 IServiceProvider provider,
                                 object value) 
```

当有人试图从 propertyGrid 编辑值时调用它。

一切正常，但我该如何处理多项选择？当有人在属性网格中选择两个对象时，值参数为空，有没有办法获取包含值的列表？或者有什么方法可以处理这种行为？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T07:40:21.657

在这种情况下， context.Instance 包含一个具有选定值的对象数组：

```
public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value)
{
    object[] selectedValues = (object[])context.Instance;
} 
```

# r - 如何将三列转换为一列

> ID：16099534
> 
> 赞同：1
> 
> 时间：2013-04-19T07:31:04.433
> 
> 标签：r

我有一个如下所示的数据集：

```
 V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15  
1   1  1  1  1  1  1  1  1  1   1   1   1   1   1   1  
2   1  1  1  1  1  1  1 -1 -1  -1  -1  -1  -1  -1  -1  
3   1  1  1 -1 -1 -1 -1  1  1   1   1  -1  -1  -1  -1 
4   1  1  1 -1 -1 -1 -1 -1 -1  -1  -1   1   1   1   1  
5   1 -1 -1  1  1 -1 -1  1  1  -1  -1   1   1  -1  -1  
6   1 -1 -1  1  1 -1 -1 -1 -1   1   1  -1  -1   1   1  
7   1 -1 -1 -1 -1  1  1  1  1  -1  -1  -1  -1   1   1  
8   1 -1 -1 -1 -1  1  1 -1 -1   1   1   1   1  -1  -1  
9  -1  1 -1  1 -1  1 -1  1 -1   1  -1   1  -1   1  -1  
10 -1  1 -1  1 -1  1 -1 -1  1  -1   1  -1   1  -1   1  
11 -1  1 -1 -1  1 -1  1  1 -1   1  -1  -1   1  -1   1  
12 -1  1 -1 -1  1 -1  1 -1  1  -1   1   1  -1   1  -1  
13 -1 -1  1  1 -1 -1  1  1 -1  -1   1   1  -1  -1   1 
14 -1 -1  1  1 -1 -1  1 -1  1   1  -1  -1   1   1  -1  
15 -1 -1  1 -1  1  1 -1  1 -1  -1   1  -1   1   1  -1  
16 -1 -1  1 -1  1  1 -1 -1  1   1  -1   1  -1  -1   1 
```

我想根据某些原则将前三个列组合成一个基础：

```
 1  1  1 →　1  
 1 -1 -1 →　2  
-1  1 -1 →　3  
-1 -1  1 →　4 
```

这是我第一次使用 R 语言。我不知道该怎么做。有没有人有一些简单的代码来做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:54:11.683

我假装你的数据框被称为`df`......

```
test <- apply(df[1:3], 1, paste, collapse="") # this will merge the numbers of the first 3
                                         # for each row

result <- sapply(test, switch, '111' = 1, '1-11' = 2, '-11-1' = 3, '-1-11' = 4) 
```

如果`result`是列表使用`unlist`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:52:44.113

鉴于前三列中有 8 种可能的值组合，您可能需要更具体地说明如何对组合结果进行编码。也就是说，这将提供从这些值到单个数字*的映射。*假设您的数据集是一个名为的数据框`dat`：

```
as.numeric(factor(do.call(paste, dat[1:3]))) 
```

# javascript - 从分钟中获取第二个数字

> ID：16099539
> 
> 赞同：-1
> 
> 时间：2013-04-19T07:31:18.133
> 
> 标签：javascript

我想做的只是从分钟中得到第二个数字。

所以如果分钟 i 01 我只得到 1。

如果分钟是 33 我只得到 3。

如果分钟我 59 我只得到 9。

我在 javascript 中有什么

```
var d = new Date();// get date

var m=d.getMinutes();//get minutes from date 
```

我不知道要从这里去吗？

有人可以帮助我朝着正确的方向前进吗？

我想我需要做类似的事情

```
 m%10 
```

但它没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:33:26.163

m%10 将满足您的需要

```
var m=33;

m%10 will give 3 // it will give the remainder 
```

或者`var m = d.getMinutes() % 10;`

[http://jsfiddle.net/SLD5n/2/](http://jsfiddle.net/SLD5n/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T07:34:08.167

`m%10`确实有效。

```
var d = new Date();// get date
var m=d.getMinutes();//get minutes from date

var secondDigit = m%10;//get second digit 
```

**小提琴：http:** [//jsfiddle.net/gAG76/1/](http://jsfiddle.net/gAG76/1/)

所以是的，我想这就是你需要的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T07:35:17.190

你可能想要这个：

```
var d = new Date();
var m = d.getMinutes() % 10; 
```

也许

```
var d = new Date();
var m = d.getMinutes();
var digit = m % 10; 
```

# windows-7 - Connection timed out issue in cfexchangeConnection

> ID：16099540
> 
> 赞同：2
> 
> 时间：2013-04-19T07:31:21.887
> 
> 标签：windows-7, coldfusion, exchange-server, coldfusion-9

I have windows 7 (32bit), ColdFusion 9 installed on my PC.
My email account is configured in outlook 2007 and it is working fine. But when I try to connect to an exchange server using `cfExchangeConnection` it is not getting connected. It is giving me an error saying:

> ```
> Error connecting to the server mail.domain.com.
> Error message from the server : Connection timed out: connect. 
> ```

My cfexchangeConnection code is:

```
<cfexchangeConnection 
    action="open" 
    username="name@domain.com" 
    protocol="https"  
    password="email_password" 
    server="mail.domain.com" 
    connection="conn1"> 
```

I have tried `cfmail` and it is working. How can I make `cfExchangeConnection` work in ColdFusion9?

# python - 按其中一个键的值拆分 dict

> ID：16099557
> 
> 赞同：3
> 
> 时间：2013-04-19T07:32:15.837
> 
> 标签：python, python-2.7

我有一本包含相同长度（但类型不同）的数据的字典，例如：

```
data = {
    "id": [1,1,2,2,1,2,1,2], 
    "info": ["info1","info2","info3","info4","info5","info6","info7","info8"],       
    "number": [1,2,3,4,5,6,7,8]
} 
```

现在我想把它分成两部分`id`，保留各自的`info`和`number`。也就是说，有两个 dicts`data1`和`data2`.

注意：这只是一个示例，字典中有多个键，我想避免使用键名，而是遍历所有键名。

什么是 Pythonic 的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:42:23.610

带有理解列表：

```
data1 = [ data["info"][idx] for idx, x in enumerate(data["id"]) if x == 1 ]
#data1 = ['info1', 'info2', 'info5', 'info7'] 
```

如果要恢复所有密钥：

```
data1 = [ { key : data[key][idx] for key in data.keys() }  for idx, x in enu
merate(data["id"]) if x == 1 ]
>>> data1
[{'info': 'info1', 'id': 1, 'number': 1}, {'info': 'info2', 'id': 1, 'number': 2
}, {'info': 'info5', 'id': 1, 'number': 5}, {'info': 'info7', 'id': 1, 'number':
 7}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:04:31.393

对于使用记录，我个人喜欢`numpy.recarray`.

```
In [3]: import numpy as np
In [4]: fields = data.keys()
In [8]: recs = zip(*[ lst for k, lst in data.iteritems() ])

In [9]: recs[0]
Out[9]: ('info1', 1, 1)
In [10]: recs[1]
Out[10]: ('info2', 1, 2)

In [21]: ra = np.rec.fromrecords(recs, names = fields )
In [17]: ra
rec.array([('info1', 1, 1), ('info2', 1, 2), ('info3', 2, 3), ('info4', 2, 4),
       ('info5', 1, 5), ('info6', 2, 6), ('info7', 1, 7), ('info8', 2, 8)], 
      dtype=[('info', 'S5'), ('id', '<i8'), ('number', '<i8')])

In [23]: ra[ra.id == 2]
rec.array([('info3', 2, 3), ('info4', 2, 4), ('info6', 2, 6), ('info8', 2, 8)], 
      dtype=[('info', 'S5'), ('id', '<i8'), ('number', '<i8')])

In [24]: ra[ra.id == 2].number
Out[24]: array([3, 4, 6, 8])

In [25]: ra[ra.id == 2][0]
Out[25]: ('info3', 2, 3)

In [26]: ra[ra.id == 2][0].number
Out[26]: 3 
```

如果要在字典中按 id 对记录进行分组，请执行以下操作：

```
{ id: ra[ra.id == id] for id in set(ra.id) } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:38:51.800

```
>>> from collections import defaultdict
>>> res = defaultdict(list)
>>> for ID,info in zip(data["id"],data["info"]):
    res[ID].append(info)

>>> res
defaultdict(<type 'list'>, {1: ['info1', 'info2', 'info5', 'info7'], 2: ['info3', 'info4', 'info6', 'info8']})
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T09:20:17.637

```
from collections import defaultdict

ids = data.pop('id')
databyid = defaultdict(lambda: defaultdict(list))

for id, values in zip(ids, zip(*data.values())):
    for kid, kval in enumerate(data.keys()):
        databyid[id][kval].append(values[kid]) 
```

如果您需要原始状态的数据（带有 id）：

```
 data['id'] = ids 
```

结果：

```
>>> databyid[1]
defaultdict(<type 'list'>, {'info': ['info1', 'info2', 'info5', 'info7'], 'number': [1, 2, 5, 7]})
>>> databyid[2]
defaultdict(<type 'list'>, {'info': ['info3', 'info4', 'info6', 'info8'], 'number': [3, 4, 6, 8]})
>>> 
```

# perl - 匹配 fasta 文件中的标头并使用新名称命名

> ID：16099559
> 
> 赞同：0
> 
> 时间：2013-04-19T07:32:17.103
> 
> 标签：perl, header, fasta

我有一个带有不同标题的fasta文件，像这样..

```
>Ar000001
>Ar000002
>Ar000003 
```

等等..现在我想把名字改成这样

```
>Ar000001 => >Bra000001
>Ar000002 => >Bra000002
>Ar000003 => >Bra000003 
```

等等.. 我写了一个 perl 脚本来做到这一点，但它不输出任何东西。我做错了什么。

```
open(INFILE, "test.fasta") or die "Error opening input file"; 
open(OUTFILE, ">", "test_out.fasta") or die "Error creating output file"; 

my $count = 1;
while (my @line = <INFILE>) 
{
    if (my $line[$count] =~ /^>/)
    {
        print OUTFILE ">Bra%.5d\n", $count;
        $count ++;
    }
} 
```

除了更改 fasta 标头名称并输出到新文件之外，我如何在每个 fasta 标头下也包含序列。在此先感谢.... Upendra

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-09T13:38:35.003

直接从命令行

```
perl -pe's/^>Ar/>Bra/' test.fasta > test_out.fasta 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:55:20.107

听起来这就是您实际需要做的所有事情：

```
open(my $INFILE, "<", "test.fasta") or die "Error opening input file: $!"; 
open(my $OUTFILE, ">", "test_out.fasta") or die "Error creating output file: $!"; 

while (my $line = <$INFILE>) 
{
    $line =~ s/^>Ar/>Bra/;
    print $OUTFILE $line;
} 
```

即用“>Bra”替换所有出现的“^>Ar”，并保持文件中的所有其他内容相同。

# asp.net - Favicon 在调试时不可见，但在部署到服务器时会显示

> ID：16099561
> 
> 赞同：0
> 
> 时间：2013-04-19T07:32:19.680
> 
> 标签：asp.net, favicon

我们的 favicon 在调试时不会出现，但它会在部署到服务器时出现。什么可能导致这种行为？

我们使用的代码是：

```
 <head>
     <title>Our Application Name</title>
     <link rel="icon" 
       type="image/x-icon"
      href="favicon.ico"/> 
 </head> 
```

该图像位于我们的根目录中，因此找到它应该没有问题。

**编辑**

这仅在IE9中调试时，在chrome或firefox中调试时正确显示ico

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:37:11.690

我建议您使用 fiddler 调试您的代码以查看确切的问题。在那里，您将看到 URL 是否正确，或者您是否有任何权限问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:28:25.937

问题如下：

代码在索引页中。但是在调试时，我将启动页面作为登录页面。基本上它没有进入索引页面并跳过它。

在服务器上时，它通过索引页面并被重定向到登录页面。这就是为什么我在服务器上看到它而不是在本地看到它的原因。

我认为它适用于所有浏览器但 IE 的原因实际上是一样的。我没有进入登录页面就进入了索引页面。

这更像是我的一个错误，但我希望有同样错误的人现在能更快地发现他们做错了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:40:52.630

另一件事要审查。您确定 favicon.ico 在您的 bin 文件夹中吗？也许，您的项目中有该图标，但它不在 bin\debug 文件夹中。

# iphone - Sort strings having numbers and characters

> ID：16099564
> 
> 赞同：0
> 
> 时间：2013-04-19T07:32:35.610
> 
> 标签：iphone, ios, objective-c

I have set of strings like this.

```
1 Wednesday, 3 Monday, 1 2 Tuesday 
```

Now I need to sort these considering only letters. The results will be

```
3 Monday, 1 2 Tuesday, 1 Wednesday 
```

The strings are sorted by considering substrings (Wednesday, Monday, Tuesday) so I got the result. How I can do that ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:55:01.840

使用 compareOptions，去掉选项中的 kCFCompareNumerically。

请参阅下一个 url： [排序字符串](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFStrings/Articles/ComparingAndSearching.html)

或试试这个：

```
#import <Foundation/Foundation.h>

int main (int argc, const char * argv[]) {

@autoreleasepool {

    NSArray *stringsArray = [NSArray arrayWithObjects:
                             @"string 1",
                             @"String 21",
                             @"string 12",
                             @"String 11",
                             @"String 02", nil];
    static NSStringCompareOptions comparisonOptions = NSCaseInsensitiveSearch |
    NSWidthInsensitiveSearch | NSForcedOrderingSearch;
    NSLocale *currentLocale = [NSLocale currentLocale];
    NSComparator finderSort = ^(id string1, id string2) {
        NSRange string1Range = NSMakeRange(0, [string1 length]);
        return [string1 compare:string2 options:comparisonOptions range:string1Range locale:currentLocale];
    };

    NSArray* sortedArray = [stringsArray sortedArrayUsingComparator:finderSort];
    NSLog(@"finderSort: %@", sortedArray);        
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:28:13.313

或者，如果您要排序的字符串**始终**是最后一个字符串（并且**总是**有一个最后一个字符串），您可以编写一个对最后一个字符串进行排序的比较器：

```
NSComparator lastStringSort = ^(id string1, id string2)
{
    NSArray* string1Components = [string1 componentsSeparatedByString:@" "];
    NSArray* string2Components = [string2 componentsSeparatedByString:@" "];
    return [[string1Components lastObject] compareToString:[string2Components lastObject]];
};

NSArray* sortedArray = [stringsArray sortedArrayUsingComparator:lastStringSort]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:06:55.893

尝试

```
NSArray *array = @[@"1 Wednesday",@"3 Monday",@"1 2 Tuesday"];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setDateFormat:@"EEEEE"];

NSArray *sortedArray = [array sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    NSCharacterSet *validCharacterSet = [NSCharacterSet letterCharacterSet];
    NSCharacterSet *unwantedCharecterSet = [validCharacterSet invertedSet];
    NSString *string1 = [(NSString *)obj1 stringByTrimmingCharactersInSet:unwantedCharecterSet];
    NSString *string2 = [(NSString *)obj2 stringByTrimmingCharactersInSet:unwantedCharecterSet];

    NSDate *date1 = [dateFormatter dateFromString:string1];
    NSDate *date2 = [dateFormatter dateFromString:string2];

    return [date1 compare:date2];

}]; 
```

**（“3 星期一”、“1 2 星期二”、“1 星期三”）**

# python - Fetch data returned by worker

> ID：16099570
> 
> 赞同：1
> 
> 时间：2013-04-19T07:33:08.613
> 
> 标签：python, multithreading, multiprocessing

How can i fetch the data returned by worker here??

```
import multiprocessing

def worker():

      """worker function"""
      return 'DATA'

if __name__ == '__main__':

      jobs = []
      for i in range(5):
          p = multiprocessing.Process(target=worker)
          print p
          jobs.append(p)
          p.start() 
```

OUTPUT :

```
DATA
DATA
DATA
DATA
DATA 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:38:00.890

您可以创建一个工人池并传入一些数据进行处理：

```
import multiprocessing

def worker(item):
    return item ** 2

if __name__ == '__main__':
    pool = multiprocessing.Pool(5)

    for result in pool.imap_unordered(worker, range(30)):
        print result 
```

# ios - Cancel UIGestureRecognizer when a button is tapped?

> ID：16099572
> 
> 赞同：1
> 
> 时间：2013-04-19T07:33:13.543
> 
> 标签：ios, objective-c, ios5, uigesturerecognizer

Is it possible to cancel a `UIGestureRecognizer` when I tap on a button?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T07:37:26.850

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch{
    // test if our control subview is on-screen
    if([gestureRecognizer isMemberOfClass:[UITapGestureRecognizer class]]){
        if ([touch.view isKindOfClass:[UIButton class]]) {
            return NO; // ignore the touch
        }
    }
    return YES; // handle the touch
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:43:24.953

试试这个方法：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer{

return whateverYouWant;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:58:18.397

是的你可以。您可以通过此代码添加和删除它。

```
-(IBAction) YourButtonAction {
  some code, that your button must to do
  self.yourButton removeGestureRecognizer: (yourRecognizer);
} 
```

# php - 如何在 Magento 1.7 中使用 magento 结构之外的 php 脚本添加产品

> ID：16099573
> 
> 赞同：0
> 
> 时间：2013-04-19T07:33:15.183
> 
> 标签：php, mysql, magento

我需要将产品从“POS Winward”软件导入我的 magento 商店。通过包括 MAGMI、自定义导入/导出在内的导入/导出产品模块后，我无法实现我的目的。

首先是否可行？如果是，您能告诉我在使用 CSV 或 XML 导入产品时需要更新的产品数据表、图像数据表、类别数据表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:04:02.110

我认为你没有对magmi进行足够的调查。

*   通过 datapump API，magmi 可以使用 PHP 数组作为 ingest 的输入，因此您可以随意填充它们。
*   Magmi 还具有 SQL 数据源，可以通过数据库上的 SQL 请求处理输入
*   当然，您也可以使用 CSV 导入

那么这更多的是了解如何访问 POS Winward 数据然后填充源的好列以便与 magmi 可导入列兼容以及（而不是最简单的部分）匹配产品的方法您的 magento 实例的数据模型（因为产品类型可配置/简单/分组和所有需要的属性以及必要的关联等概念）可能不存在于 POS Winward 数据模型中。

在后一种情况下，您需要定义“语义映射”规则并应用它们将一个“Winward POS 产品”转换为“Magento 产品”

没有灵丹妙药，但 magmi 可能是合适的枪；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:38:04.450

POS Winward 以 XML 格式导出数据。使用 XML Parser 并生成一个 csv 作为 Magento 可接受的格式。MAGMI 导入 csv 文件以导入产品。

确切地说，MAGMI 本身就是一个用于导入产品用途的强大工具。

# php - Jquery关联多维数组到PHP

> ID：16099576
> 
> 赞同：0
> 
> 时间：2013-04-19T07:33:19.230
> 
> 标签：php, jquery, multidimensional-array

寻找但找不到答案，尽管我确定我已经在我的程序的其他地方使用过这个。

我正在构建一个导航表单，它允许人们设置导航名称以及可选的副标题和面包屑值。

这些表单输入是动态创建的，如下所示：

```
<input name="menu[1][title]" value="Index" />
<input name="menu[1][subtitle]" value="Our home page" />
<input name="menu[1][crumb]" value="Home" />

<input name="menu[2][title]" value="Contact" />
<input name="menu[2][subtitle]" value="Get in touch" />
<input name="menu[3][crumb]" value="Contact" /> 
```

这些表单输入是在格式菜单[ID][TYPE] 中创建的。从那里我将使用 PHP 更新一个数据库，将菜单 ID 属性匹配到数据库表 ID，并将列更新到菜单 TYPE 属性。

我只是不知道如何获取输入并通过 Jquery/JSON 将它们发送到 PHP 脚本。主要是ID号将被动态创建。正要帮我的女朋友解锁她锁在车里的钥匙，所以我回来后会发布一个代码片段。

感谢您的反馈。在寻找了一种相对简单的方法来实现这一点后，我选择使用字符串，这意味着如果我以后添加菜单元素，我必须更新代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:41:01.270

您可以使用 jquery serialize() 函数将表单的所有数据发送到 PHP 页面。 [http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:39:59.287

> 我只是不知道如何获得输入

点击提交按钮。

> 主要是ID号将被动态创建

任何元素都可以随时查询其属性之一的值。

> 将它们发送到 PHP 脚本。

当用户提交表单时，名称/值对会自动发送到 php 脚本。为什么你需要做任何事情？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:57:01.560

我想最好的方法是从您的输入构建一个数组，然后使用 AJAX 将此数组发送到您的 PHP 脚本

我让你检查这个 jsFiddle：（我刚刚更新了它） [http://jsfiddle.net/ds52y/13/](http://jsfiddle.net/ds52y/13/)

```
$( function() { /* look in the jsFiddle */ }); 
```

希望这可以帮助 ：）

# google-app-engine - Tweepy App Engine 示例引发 401 异常

> ID：16099580
> 
> 赞同：2
> 
> 时间：2013-04-19T07:33:32.247
> 
> 标签：google-app-engine, oauth, twitter, twitter-oauth, tweepy

我在这里使用 tweepy google 应用程序引擎示例作为我的应用程序的基础：[https ://github.com/tweepy/examples/tree/master/appengine](https://github.com/tweepy/examples/tree/master/appengine)

get_authorization_url() 方法触发 401 未授权异常。

```
template.render('oauth_example/main.html', {
                "authurl": auth.get_authorization_url(),
                "request_token": auth.request_token
                }) 
```

在控制台中我得到：

```
TweepError: HTTP Error 401: Unauthorized 
```

使用 python 解释器中的库可以正常工作：

> > > 导入 tweepy
> > > 
> > > auth = tweepy.OAuthHandler(CONSUMER_KEY, CONSUMER_SECRET)
> > > 
> > > 打印 auth.get_authorization_url()

打印出一个有效的认证 url。但是示例中 MainPage 处理程序开头的相同代码失败了。

```
class MainPage(RequestHandler):

  def get(self):
    # Build a new oauth handler and display authorization url to user.
    auth = tweepy.OAuthHandler(CONSUMER_KEY, CONSUMER_SECRET)
    print auth.get_authorization_url() # EXCEPTION 401 Unauthorized 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T18:57:53.663

找到了解决方案

除了使用回调 URL 更新 tweepy 中的回调之外，还要在 dev.twitter.com 的 app 部分进行更新。

因此，您必须提供正确的回调 URL，而

```
auth = tweepy.OAuthHandler(CONSUMER_KEY, CONSUMER_SECRET, CALLBACK) 
```

以及在 twitter 应用程序部分。

# plugins - Jenkins 插件管理器：摘要不匹配错误

> ID：16099586
> 
> 赞同：2
> 
> 时间：2013-04-19T07:34:02.890
> 
> 标签：plugins, jenkins, digest, mismatch

我刚刚在 Ubuntu 12.04 (AMD64) 上安装了 Jenkins 1.511 和 JDK 1.6.0_38。当我刷新插件列表时，列表仍然为空。日志文件显示错误：

```
Apr 19, 2013 9:23:54 AM hudson.model.UpdateSite doPostBack 
SEVERE: <div class=error><img src='/static/0c7d9fdb/images/none.gif' height=16 width=1>Digest mismatch: 1Woxyt3oLgioZax7SGlbwYITc98= vs +JLZbigPye2eA9Fsv6sa3DW3q2s= in update site &#039;default&#039;</div> 
```

如何解决这个问题？是没有权限访问互联网的问题吗？我该如何解决？

我发现其他人有时会出现错误：[https](https://issues.jenkins-ci.org/browse/JENKINS-17029) ://issues.jenkins-ci.org/browse/JENKINS-17029但是没有建议。这个问题有时会莫名其妙地自行解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T07:55:06.613

这并不能解决问题，但它是一种解决方法：

1.  在 Jenkins wiki 上查找插件及其所有依赖项，例如[https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin)

2.  [从http://updates.jenkins-ci.org/download/plugins/](http://updates.jenkins-ci.org/download/plugins/)下载插件

3.  打开一个外壳：

    $ cd ~/下载

    $ sudo mv *.hpi /var/lib/jenkins/plugins

4.  `http://localhost:8080/restart`在浏览器中打开重启Jenkins

现在已安装的插件应该在 Manage Jenkins => Manage Plugins => Installed 选项卡下可见，即使可用插件选项卡仍然为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:00:28.293

[我在https://github.com/andrewcooke/jenkins](https://github.com/andrewcooke/jenkins)分叉了 Jenkins，并添加了在[https://issues.jenkins-ci.org/browse/JENKINS-17029?focusedCommentId=177580&page=com.atlassian.jira.plugin](https://issues.jenkins-ci.org/browse/JENKINS-17029?focusedCommentId=177580&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-177580)中描述的 hack [.system.issuetabpanels:comment-tabpanel#comment-177580](https://issues.jenkins-ci.org/browse/JENKINS-17029?focusedCommentId=177580&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-177580)（在摘要验证后继续，而不是引发错误 - 仅注释掉两行）。

如果你想部署那个版本，它只是当前开发主干的快照，删除了加密检查，克隆那个 repo，构建和部署。如果您安装了 maven，则构建非常容易 - 阅读 BUILDING.TXT 文件。

（它有效；我现在可以看到插件）。

# sql - ASP.NET MVC 4 将 3 个小数位值保存到 SQL Server 2005

> ID：16099588
> 
> 赞同：2
> 
> 时间：2013-04-19T07:34:08.977
> 
> 标签：sql, asp.net-mvc-4

我必须在 SQL Server 2005 中设置小数点后 3 位。我只能从模型部分设置它。但是在 sql server 中设置`Salary`属性的数据类型是`decimal`。

```
 When I set like

         public decimal Salary { get; set; } 
```

它将像 21000.000 而不是 21000 一样保存到数据库中。如果我输入 30000.75，那么它将被保存到 30000.750。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-10T10:59:52.230

我也陷入了同样的境地，终于找到了解决办法。您可以覆盖 DbContext.OnModelCreating() 方法并配置精度

```
公共类 ApplicationDbContext : IdentityDbContext
{
    受保护的覆盖无效 OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity().Property(c => c.AssociationFee).HasPrecision(18, 3);
    }
}

```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:24:07.743

试试这个，你也必须在编辑模式下设置。

```
 [DisplayFormat(DataFormatString = "{0:n3}", ApplyFormatInEditMode = true)]
 public decimal Amount { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:40:08.070

将此属性应用于模型中的属性：

```
[DisplayFormat(DataFormatString = "{0:#,##0}")] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T07:40:21.410

您可以使用 MVC DisplayFormat 属性：

[DisplayFormat 未应用于十进制值](https://stackoverflow.com/questions/7843099/displayformat-not-getting-applied-on-decimal-value)

或者出于显示目的，您可以使用字符串并执行以下操作：

```
Salary.ToString("F"); 
```

这将导致输出：`30000.75`

或者：

```
Salary.ToString("N"); 
```

这将导致输出：`30,000.75`

# iphone - UITableView，删除按钮

> ID：16099589
> 
> 赞同：0
> 
> 时间：2013-04-19T07:34:10.047
> 
> 标签：iphone, uitableview

在 iPhone 应用程序中。我想实现一个功能，允许用户删除**UITableView**中的一个部分。为此，我想使用与默认使用相同的按钮来删除**UITableViewCell**。

希望我不需要重新绘制它们。

如果可能的话，我怎样才能以编程方式获得这些按钮？

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:54:46.143

当我需要复制 Apple 创建的控件时，通常我只是搜索 Apple 正在使用的图像。为此，我使用 UIKit 图像提取器并寻找我感兴趣的资源

[https://github.com/0xced/UIKit-Artwork-Extractor](https://github.com/0xced/UIKit-Artwork-Extractor)

# sed - sed 命令美化 awk 命令的输出

> ID：16099591
> 
> 赞同：0
> 
> 时间：2013-04-19T07:34:14.333
> 
> 标签：sed, awk, cut

我有来自 awk 命令的以下输出..我想美化输出如下..是否有 sed 命令可以给我预期的输出？

```
CURRENT OUTPUT:-
    https://code-comp.com/308271
                                (there is white space line here)   
    https://code-comp.com/308270
    466197
    https://code-comp.com/308263
    470188
    https://code-comp.com/308262
    https://code-comp.com/308261 
```

以下是预期的输出

```
 EXPECTED OUTPUT:-
    https://code-comp.com/308271
    https://code-comp.com/308270 466197
    https://code-comp.com/308263 470188
    https://code-comp.com/308262
    https://code-comp.com/308261 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:30:37.827

这可能对您有用（GNU sed）：

```
sed -r ':a;$!N;/\nhttps:/!{s/\n/ /;ta};s/\s*(\n|$)/\1/;P;D' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:40:38.737

```
sed 'N; /\n[0-9]/s/\n/ /; s/\n$//' foo.txt 
```

*   在第二行读取
*   查找以数字开头的行，将其与上一行合并
*   删除空行

# firebase - 限制通过客户端从某个位置阅读儿童

> ID：16099593
> 
> 赞同：0
> 
> 时间：2013-04-19T07:34:23.803
> 
> 标签：firebase

```
var commentsRef = new Firebase('https://test.firebaseio.com/comments');
var last10Comments = commentsRef.limit(10);

//Rendering last 10 comments
last10Comments.on('child_added', function (snapshot) {

}); 
```

从客户端，**用户可以更改限制数量**，并可以呈现来自评论参考的所有评论。

有没有办法在某个位置的任何时间点将**阅读限制限制**为某个数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:10:41.387

不，目前没有办法围绕这种类型的数据限制设置 Firebase 安全规则。另一种可行的方法是让树的另一部分包含数据的非规范化部分，仅包含最后 10 条评论，仅此而已。

感谢您提出这个问题。我已将此添加到我们的内部跟踪器中，以便在我们设计 V2 安全 API 时牢记这一点。

# c# - 更改 MonthCalender 控件的语言

> ID：16099594
> 
> 赞同：2
> 
> 时间：2013-04-19T07:34:23.713
> 
> 标签：c#, .net, winforms

我正在尝试更改 Windows 窗体应用程序中“月历”控件的语言。我试过这个：

```
System.Globalization.CultureInfo ci = 
    new System.Globalization.CultureInfo("fr-FR");

System.Threading.Thread.CurrentThread.CurrentCulture = ci; 
```

但它未能改变语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:42:03.140

MonthControl**无法做到这**一点。您需要查看：[当您在 .NET Framework、Visual Studio 2005 或 Visual Studio .NET 中创建本地化应用程序时，DateTimePicker 和 MonthCalendar 控件不反映应用程序主执行线程的 CurrentUICulture 属性](http://support.microsoft.com/Default.aspx?scid=kb;en-us;889834&x=18&y=19)

> 出现此问题的原因是 DateTimePicker 控件和 MonthCalendar 控件是 Microsoft Windows 常用控件。因此，**操作系统的用户区域设置决定**了这些控件的用户界面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:48:53.140

MonthCalendar 是内置 Month Calendar 控件的包装器，该控件不支持除用户默认设置之外的区域设置。你可以试试[Culture Aware Month Calendar 和 DatePicker](http://www.codeproject.com/Articles/45684/Culture-Aware-Month-Calendar-and-Datepicker)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:46:18.373

**是**的，这是可能的**，但**似乎**没有对 c# 程序的内置支持**来支持[MonthCalendar 控件](http://msdn.microsoft.com/en-us/library/3ehzhyst.aspx)的本地化，如 MSDN 上的[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760913%28v=vs.85%29.aspx#localization)所示，它指向[LOCALE_USER_DEFAULT](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373901%28v=vs.85%29.aspx)以更改语言。

但是，如果您可以找到任何方法从 C++ 应用程序更改[LOCALE_USER_DEFAULT](http://msdn.microsoft.com/en-us/library/windows/desktop/dd373901%28v=vs.85%29.aspx)中的语言，以在运行时更改您的应用程序，如从 codeproject [here](http://www.codeproject.com/Articles/12568/Format-Date-and-Time-As-Per-User-s-Locale-Settings)和[here](http://www.codeproject.com/Articles/9600/Windows-SetThreadLocale-and-CRT-setlocale)中找到的那样，这应该会导致`MonthCalendar`控件的文化改变。

我希望它对你有帮助。

## 更新

我找到了一个用于更改的 VB.NET 程序`LOCALE_USER_DEFAULT`，您必须为此启用不安全编程并将其转换为 c#（如果我不将 vb 转换为 c#，我希望您不介意）

[参考 MSDN 论坛链接](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/70ae8e7e-915f-4d50-9996-9ed5f460c1ac/)，[这里还有一个阿拉伯日历](http://www.microsoft.com/middleeast/msdn/ArabicCalendar.aspx)

```
Private Declare Function GetLocaleInfo Lib "kernel32" Alias "GetLocaleInfoA" (ByVal Locale As Long, ByVal LCType As Long, ByVal lpLCData As String, ByVal cchData As Long) As Long
Private Declare Function SetLocaleInfo Lib "kernel32" Alias "SetLocaleInfoA" (ByVal Locale As Long, ByVal LCType As Long, ByVal lpLCData As String) As Long
Private Const LOCALE_USER_DEFAULT As Long = &H400
Private Const LOCALE_SSHORTDATE = &H1F

Private Function GetShortDateFormat() As String
Dim lngRet As Long
Dim strValue As String
Dim lngLength As Long
    lngRet = GetLocaleInfo(LOCALE_USER_DEFAULT, LOCALE_SSHORTDATE, strValue, lngLength)
    strValue = Space(lngRet)
    lngLength = lngRet
    lngRet = GetLocaleInfo(LOCALE_USER_DEFAULT, LOCALE_SSHORTDATE, strValue, lngLength)
    GetShortDateFormat = Left(strValue, lngLength - 1)
End Function

Private Function SetShortDateFormat(ByVal strFormat As String) As Boolean
Dim lngRet As Long
    lngRet = SetLocaleInfo(LOCALE_USER_DEFAULT, LOCALE_SSHORTDATE, strFormat)
    SetShortDateFormat = CBool(lngRet)
End Function

Private Sub Command1_Click()
    MsgBox GetShortDateFormat
End Sub

Private Sub Command2_Click()
    If SetShortDateFormat(Text1.Text) Then
        MsgBox "Short Date Format Changed"
    Else
        MsgBox "Changing Short Date Format failed"
    End If
End Sub 
```

# php - ftp 文件关闭操作出错

> ID：16099596
> 
> 赞同：3
> 
> 时间：2013-04-19T07:34:37.603
> 
> 标签：php, file, ftp

我正在使用 php 通过 ftp 访问文件。我的文件读取功能是：

```
function _rfile ($file = null) {
        if ( is_readable($file) ) {
            if ( !($fh = fopen($file, 'r')) ) return false;
            $data = fread($fh, filesize($file));
            fclose($fh);
            return $data;
        }
        return false;
    } 
```

我的一个 ftp 主机在此函数中的文件关闭操作中出现错误。

错误：

> fclose(): FTP 服务器错误 550:550 指定的网络名称不再可用。

此功能对其他一些 ftp 主机运行良好。

smb 可以建议解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T05:07:50.910

这可能是由于访问权限设置。

请看这个链接。 [http://forums.iis.net/t/1107644.aspx](http://forums.iis.net/t/1107644.aspx)

# magento - 选择客人结帐后的一页 magento 重定向到购物车

> ID：16099608
> 
> 赞同：0
> 
> 时间：2013-04-19T07:35:57.583
> 
> 标签：magento

我有奇怪的问题。在结帐单页中，我无法以访客身份或通过注册结帐，只能通过登录方法结帐。当我选择结帐作为访客或注册并单击提交 magento 重定向到购物车时。我在 magento 的新副本上尝试了复制模板，但无济于事。也许有人知道如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:50:08.810

启用登录系统并检查日志文件。也许你有一些代码错误（比如错误的函数名或结果），这会导致重定向。你做了一些定制吗？

# javascript - Android 将 JavaScript 代码绑定到 Android 代码不起作用？

> ID：16099611
> 
> 赞同：1
> 
> 时间：2013-04-19T07:35:59.877
> 
> 标签：javascript, android, string

我已经使用`JavaScript`代码来`android`使用此[文档](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)，但我不`String value`明白为什么我会遇到这个问题，任何人都对此有想法，请帮助我。

这是我的代码

```
 webview = (WebView) findViewById(R.id.webView);             
    webview.getSettings().setJavaScriptEnabled(true);   

    String html = " <input type='button' value='Say hello' onClick='showAndroidToast('Hello Android!')' />" +
            "<script type='text/javascript'>   function showAndroidToast(toast) { Android.showToast(toast); }</script>";     

    webview.loadDataWithBaseURL(null, html, "text/html", "UTF-8", null);    
    webview.addJavascriptInterface(new WebAppInterface(MainActivity.this), "Android"); 
```

`WebAppInterface`像这样的班级

```
public class WebAppInterface {
Context mContext;

/** Instantiate the interface and set the context */
WebAppInterface(Context c) {
    mContext = c;
}

/** Show a toast from the web page */
@JavascriptInterface
public void showToast(String toast) {
    Log.i(" ", " " + toast);
    Toast.makeText(mContext, toast, Toast.LENGTH_LONG).show();

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:41:15.910

这部分似乎不太可行：

```
'showAndroidToast('Hello Android!')' 
```

您的报价不会正确关闭。使用转义双引号代替外部：

```
\"showAndroidToast('Hello Android!')\" 
```

# android - onConfigurationChanged 永远不会被调用

> ID：16099624
> 
> 赞同：0
> 
> 时间：2013-04-19T07:36:49.317
> 
> 标签：android

**在清单中：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.app"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="17" />

<uses-feature android:name="android.hardware.camera" />
<uses-feature
    android:name="android.hardware.camera.front"
    android:required="false" />

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.app.MainActivity"
        android:configChanges="keyboardHidden|orientation|screenSize"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

**在 MainActivity 中：**

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    // TODO Auto-generated method stub
    super.onConfigurationChanged(newConfig);
    Toast.makeText(MainActivity.this,
            "newConfig.orientation = " + newConfig.orientation,
            Toast.LENGTH_LONG).show();
            //The above Toast never appears
} 
```

**完整的 MainActivity 代码：**

```
public class MainActivity extends Activity {
    private SurfaceView preview = null;
    private SurfaceHolder previewHolder = null;
    private Camera camera = null;
    private boolean inPreview = false;
    private boolean cameraConfigured = false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    preview = (SurfaceView) findViewById(R.id.preview);
    previewHolder = preview.getHolder();
    previewHolder.addCallback(surfaceCallback);
    previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

@Override
public void onResume() {
    super.onResume();

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
        Camera.CameraInfo info = new Camera.CameraInfo();

        for (int i = 0; i < Camera.getNumberOfCameras(); i++) {
            Camera.getCameraInfo(i, info);

            if (info.facing == Camera.CameraInfo.CAMERA_FACING_BACK) {
                camera = Camera.open(i);
            }
        }
    }

    if (camera == null) {
        camera = Camera.open();
    }
    // camera.setDisplayOrientation(90);
    startPreview();
}

@Override
public void onPause() {
    if (inPreview) {
        camera.stopPreview();
    }

    camera.release();
    camera = null;
    inPreview = false;

    super.onPause();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    new MenuInflater(this).inflate(R.menu.activity_main, menu);

    return (super.onCreateOptionsMenu(menu));
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if (item.getItemId() == R.id.camera) {
        if (inPreview) {
            camera.takePicture(null, null, photoCallback);
            inPreview = false;
        }
    }

    return (super.onOptionsItemSelected(item));
}

private Camera.Size getBestPreviewSize(int width, int height,
        Camera.Parameters parameters) {
    Camera.Size result = null;

    for (Camera.Size size : parameters.getSupportedPreviewSizes()) {
        if (size.width <= width && size.height <= height) {
            if (result == null) {
                result = size;
            } else {
                int resultArea = result.width * result.height;
                int newArea = size.width * size.height;

                if (newArea > resultArea) {
                    result = size;
                }
            }
        }
    }
    return (result);
}

private Camera.Size getSmallestPictureSize(Camera.Parameters parameters) {
    Camera.Size result = null;

    for (Camera.Size size : parameters.getSupportedPictureSizes()) {
        if (result == null) {
            result = size;
        } else {
            int resultArea = result.width * result.height;
            int newArea = size.width * size.height;
            if (newArea < resultArea) {
                result = size;
            }
        }
    }
    return (result);
}

private void initPreview(int width, int height) {
    if (camera != null && previewHolder.getSurface() != null) {
        try {
            camera.setPreviewDisplay(previewHolder);
        } catch (Throwable t) {
        }

        if (!cameraConfigured) {
            Camera.Parameters parameters = camera.getParameters();
            Camera.Size size = getBestPreviewSize(width, height, parameters);
            Camera.Size pictureSize = getSmallestPictureSize(parameters);

            if (size != null && pictureSize != null) {
                parameters.setPreviewSize(size.width, size.height);
                parameters.setPictureSize(pictureSize.width,
                        pictureSize.height);
                parameters.setPictureFormat(ImageFormat.JPEG);
                camera.setParameters(parameters);
                cameraConfigured = true;
            }
        }
    }
}

private void startPreview() {
    if (cameraConfigured && camera != null) {
        camera.startPreview();
        inPreview = true;
    }
}

SurfaceHolder.Callback surfaceCallback = new SurfaceHolder.Callback() {
    public void surfaceCreated(SurfaceHolder holder) {
        // no-op -- wait until surfaceChanged()
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        initPreview(width, height);
        startPreview();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // no-op
    }
};

Camera.PictureCallback photoCallback = new Camera.PictureCallback() {
    public void onPictureTaken(byte[] data, Camera camera) {
        new SavePhotoTask().execute(data);
        camera.startPreview();
        inPreview = true;
    }
};

class SavePhotoTask extends AsyncTask<byte[], String, String> {
    @Override
    protected String doInBackground(byte[]... jpeg) {
        File photo = new File(Environment.getExternalStorageDirectory(),
                "photo.jpg");
        if (photo.exists()) {
            photo.delete();
        }
        try {
            FileOutputStream fos = new FileOutputStream(photo.getPath());

            fos.write(jpeg[0]);
            fos.close();
        } catch (java.io.IOException e) {
        }
        return (null);
    }
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
    // TODO Auto-generated method stub
    super.onConfigurationChanged(newConfig);
    Toast.makeText(MainActivity.this,
            "newConfig.orientation = " + newConfig.orientation,
            Toast.LENGTH_LONG).show();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:22:04.080

这是因为您的设备上禁用了 AutoRotation :D :D

# c#-3.0 - C# 代码需要完美的输出和对齐

> ID：16099629
> 
> 赞同：-2
> 
> 时间：2013-04-19T07:37:17.973
> 
> 标签：c#-3.0

```
 class Base
    {
        public virtual void Method()
        {
            Console.WriteLine("Base method");
        }
    }
    class Derived : Base
    {
        public override void Method()
        {
            Console.WriteLine("Derived method");
        }
    }
    class MyClient
    {
        public static void Main()
        {

            Base b1 = new Derived();
            b1.Method(); // Displays 'Base Method' 
           Console.ReadLine();
        }
    } 
```

输出应该是什么？

它是怎么来的？请解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:49:13.120

输出应该是，并且*是*，`Derived Method。

因此，即使您引用`b1`为 a `Base`，运行时也知道它实际上是一个实例，`Derived`并将使用后者的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:01:09.140

它将显示“派生方法”。现在来看代码，你到底在做什么。看到你正在使用类构造函数`Class Myclient`创建一个类的对象。所以运行时将通过类，并创建一个类的实例。结果将是“派生方法”`B``Derived``derived``derived`

# android - 在 android 中获取 Facebook 好友

> ID：16099631
> 
> 赞同：0
> 
> 时间：2013-04-19T07:37:24.020
> 
> 标签：android, facebook

我正在开发一个 android 应用程序，我需要在其中使用 Facebook 登录并获取 Facebook 朋友。

我正在使用下面的代码来获取 facebook 朋友：

公共类 FriendsRequestListener 实现 RequestListener {

```
/**
 * Called when the request to get friends has been completed.
 * Retrieve and parse and display the JSON stream.
 */
public void onComplete(final String response) {
    try {
        // process the response here: executed in background thread
        Log.d("Facebook-Example-Friends Request", "response.length(): " + 
                response.length());
        Log.d("Facebook-Example-Friends Request", "Response: " + response);

        final JSONObject json = new JSONObject(response);
        JSONArray d = json.getJSONArray("data");
        int l = (d != null ? d.length() : 0);
        Log.d("Facebook-Example-Friends Request", "d.length(): " + l);

        for (int i=0; i<l; i++) {
            JSONObject o = d.getJSONObject(i);
            String n = o.getString("name");
            String id = o.getString("id");
        }

        // Only the original owner thread can touch its views

    } catch (JSONException e) {
        Log.w("Facebook-Example", "JSON Error in response");
    }
}

@Override
public void onComplete(String response, Object state) {
    // TODO Auto-generated method stub

}

@Override
public void onIOException(IOException e, Object state) {
    // TODO Auto-generated method stub

}

@Override
public void onFileNotFoundException(FileNotFoundException e, Object state) {
    // TODO Auto-generated method stub

}

@Override
public void onMalformedURLException(MalformedURLException e, Object state) {
    // TODO Auto-generated method stub

}

@Override
public void onFacebookError(FacebookError e, Object state) {
    // TODO Auto-generated method stub

} 
```

}

调用这个类的方法：

```
mAsyncRunner = new AsyncFacebookRunner(facebook);
                mAsyncRunner.request("me/friends", new FriendsRequestListener()); 
```

问题是我的代码在调用上述代码时没有做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-06-26T17:08:02.433

你可以使用这个 api [https://graph.facebook.com/v1.0/me/friends?fields=picture,id,username&limit=${limit}&access_token=${accessToken}](https://graph.facebook.com/v1.0/me/friends?fields=picture,id,username&limit=$%7Blimit%7D&access_token=$%7BaccessToken%7D)

这是一个 v1.0 api，它允许用户获取所有朋友列表

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-30T13:15:27.153

要获取您所有的 Facebook 好友列表，您需要获取“taggable_friends”

```
GraphRequestAsyncTask r = GraphRequest.newGraphPathRequest(fbToken,
        "/me/taggable_friends", new Callback() {

            @Override
            public void onCompleted(GraphResponse response) {
                //here you can parse the response
            }
        } 
```

`fbToken`是您登录时的令牌。但是，facebook 使用分页，因此您需要从好友请求中获取下一页和下一个值，以便解析它。

```
response.getJSONObject("paging").getString("next"); 
```

使用 StringRequest 获取下一页用户

```
StringRequest sr = new StringRequest(Request.Method.GET, next,
        new Response.Listener<String>() {
            @Override
            public void onResponse(String response) {

                JSONObject friends = null;
                try {
                    friends = new JSONObject(response);
                    parseResponse(friends);
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        }, new Response.ErrorListener() {
    @Override
    public void onErrorResponse(VolleyError error) {
    } 
```

查看完整代码 [Facebook 好友列表](https://github.com/sallySalem/Facebook-Friends-list)

# java - java.lang.IllegalArgumentException：比较方法违反了它的一般合同（不可重现）

> ID：16099638
> 
> 赞同：0
> 
> 时间：2013-04-19T07:37:37.673
> 
> 标签：java, collections, comparator

我正在尝试重现此异常（java.lang.IllegalArgumentException：比较方法违反其一般合同！）因为我需要调试一段代码，但下面的代码从不抛出它，

```
try {
  ArrayList al = new ArrayList();
  for (int i = 1; i <= 36; i++) {
    TypeAdapterSort t = new TypeAdapterSort();
    t.order = i;
    al.add(t);
  }
  System.out.println(al.size());
  Collections.sort(al, new Comparator() {
    public int compare(Object o1, Object o2) {
      TypeAdapterSort tas1 = (TypeAdapterSort) o1;
      TypeAdapterSort tas2 = (TypeAdapterSort) o2;
      if (tas1.order < tas2.order)
        return -1;
      else
        return 1;
    }
  });

} catch (Exception e) {
  System.out.println(e);
} 
```

此外，当我检查 JDK 代码时，似乎只有当要排序的集合的大小大于 32 时，Collections.sort 方法才会引发此异常？应该在代码块中进行哪些更改，以便 Collections.sort 抛出此异常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T07:42:42.287

这可能是你的问题

```
if (tas1.order < tas2.order)
    return -1;
else
    return 1; 
```

如果顺序相等，您将得到不同的结果，具体取决于哪个先进入比较器，这是不对的。

合同类似于 if A < B and B < C then A < C，但在您的情况下，这可能会被破坏，具体取决于传递参数的顺序。

尝试类似的东西

```
return tas1.order -tas2.order; 
```

这也解释了为什么您无法重现它，因为您的测试数据从不重复。尝试在您的测试数据中添加一些欺骗，看看您是否可以重现（显然在应用修复之前......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:42:12.473

如果对象相等，则永远不会返回 0。该库足够聪明，可以检测到这一点

# azure - 如何确定 Azure VM 是 VM 角色（预览版）还是虚拟机 (GA)

> ID：16099639
> 
> 赞同：0
> 
> 时间：2013-04-19T07:37:49.663
> 
> 标签：azure, virtual-machine

Windows Azure 中的 VM 角色预览版将于 2013 年 5 月 31 日结束，Microsoft 敦促将 VM 角色迁移到“正确”的通用虚拟机，如下所述：

[http://msdn.microsoft.com/library/3dae01d2-2397-47ed-a134-f9ffe58a9b52.aspx](http://msdn.microsoft.com/library/3dae01d2-2397-47ed-a134-f9ffe58a9b52.aspx)

但是我如何知道在 Azure 中运行的虚拟机中哪些是 VM 角色，哪些是 Windows Azure 虚拟机？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:50:14.090

我写了一篇可能有帮助的博文：我是否有需要迁移的 VM 角色？在[http://blogs.msdn.com/b/benjguin/archive/2013/04/19/do-i-have-vm-roles-that-i-should-migrate.aspx](http://blogs.msdn.com/b/benjguin/archive/2013/04/19/do-i-have-vm-roles-that-i-should-migrate.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:42:50.820

您可能很容易在门户中看到它，但一个简单的检查可能是在您的磁盘上存储一些东西并停止/删除并重新创建机器。如果文件不再存在，则意味着它是 VM 角色。我也相信您在新门户中看不到 VMRole（并且只能在旧门户中）

# android - Android：释放时删除未使用的资源

> ID：16099642
> 
> 赞同：1
> 
> 时间：2013-04-19T07:38:00.953
> 
> 标签：android, ant, android-resources

我已经看到可以在此处检测未使用的资源（尤其是占用一些空间的媒体资源）[android-remove-unused-resources-before-shipping](https://stackoverflow.com/questions/9865180/android-remove-unused-resources-before-shipping)和此处[remove-all-unused-resources-from-an-android-project](https://stackoverflow.com/questions/6373482/remove-all-unused-resources-from-an-android-project)。

**我想知道我们是否可以在ant 构建**文件中使用这些工具以便在构建**发布**包时**忽略它们？**

 **我正在使用 eclipse 和最新版本的 ADT 和 ant 来构建。

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:02:35.710

要删除未使用的资源，您可以使用 ADT 16 中的 Android Lint 工具。它不仅可以帮助您删除未使用的资源，还可以发现潜在的错误。

[http://tools.android.com/tips/lint](http://tools.android.com/tips/lint)

您还可以在发布模式下启用 proguard

ProGuard 工具通过删除未使用的代码并用语义模糊的名称重命名类、字段和方法来缩小、优化和混淆您的代码。结果是较小的 .apk 文件更难进行逆向工程。

[http://developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T08:36:08.920

在 Project Explorer > Android Tools > Run Lint > Watch the Lint Tab 上单击您的项目。

您可以在 Lint 选项卡上看到很多问题。并且，检查如下行...

![在此处输入图像描述](https://i.stack.imgur.com/8YdEc.png)

清除所有文件或任何资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-02T07:44:40.007

如果你喜欢 Linux 中的程序，那么 bash - 这就是你的全部。
但是对于 windows 或 mac，没有像 bash 这样的酷工具。这就是为什么你可以编写特殊的程序来删除使用 android sdk 工具的未使用资源 - Lint
你可以试试我的[程序](https://github.com/matzuk/RemovingAndroidUnusedResources)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T07:43:21.863

在 Eclipse 中，您可以使用 Lint。它在 ADT 包中**

# c++ - 如何评估自定义内存分配器的质量？

> ID：16099646
> 
> 赞同：2
> 
> 时间：2013-04-19T07:38:22.120
> 
> 标签：c++, c, testing, memory-management

在评估内存分配时应该检查哪些特征？

分配和解除分配的性能？简单的压力测试就足够了吗？如何检查分配的质量？

例如，我找到了 Oracle 对 [malloc](https://blogs.oracle.com/rweisner/entry/test_harness_for_malloc)的测试，但这只是 Oracle 对问题的看法。而且这个测试只针对多线程性能。

人们通常如何检查他们的分配器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T08:27:19.513

只是为了更多地关注“如何”，而不是“什么”，其他答案似乎都在处理。这就是我将如何做到的。

**第一步 - 使比较方法成为可能**

确定你看重的品质。列出清单，确定优先级，最后制定价值函数。

也就是说，在您的观点/案例中，找出哪些测量是最有用的质量指标。一些好的测量可能是分配内存块的平均时间、应用程序的总运行时间（如果适用）、平均帧速率、总或平均内存消耗......这一切都取决于您希望实现的目标。

然后，创建一个函数，根据测试运行的这些测量值，为您提供一个可用作质量度量的值。最简单的情况是简单地为每个测量确定一个权重因子。这些权重因子应该体现每个测量的重要性，如果它们使用不同的单位（例如平均分配时间的纳秒和平均内存消耗的字节），请尝试缩放它们以进行公平比较。

**第二步 - 设备测试场景**

这应该尽可能接近现实情况。最好的方法是您想要使用内存分配器的实际代码，并添加用于计算价值函数所需的所有测量值的代码。

**第三步 - 测试**

编写一堆不同的分配器并相互测试它们，以及默认或没有任何分配器（如果适用）。测量所有结果，计算每个结果的价值函数并根据结果对它们进行排名。请记住在执行性能测量时始终需要考虑的所有不同注意事项。

**第四步 - 评估和重新迭代**

看看不同的解决方案如何相互叠加。应用一些批判性思维。这些结果是否真的与您在测试期间对每个分配器质量的*体验相符？*如果结果与您认为看到的不符。

例如，如果一个看起来非常快并且总运行时间比其他的少半分钟的那个，得到一个平庸的分数.. 那么，是时候仔细检查你的方法了。也许您的测量中有错误？或者您可能需要重新评估您选择的价值函数...重复步骤 1 到 4，直到结果清晰并且看起来符合您测试它们的实际经验。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T07:58:14.753

通常，内存分配器的性能与在堆中查找和创建内存块的速度有关，具体取决于操作的内存块的大小。而且，（但最近），它在多线程分配的情况下是如何表现的。您可以在以下列表中找到有趣的研究和基准：

*   [ptmalloc - 多线程 malloc 实现](http://web.mit.edu/course/13/13.715/build/lam-7.1.3/share/memory/ptmalloc/)
*   [无锁内存分配器的基准](http://locklessinc.com/benchmarks_allocator.shtml)
*   [Linux 系统库中的动态内存分配器实现](http://www.dent.med.uni-muenchen.de/~wmglo/malloc-slides.html)
*   [FreeBSD 的可扩展并发 malloc(3) 实现](http://people.freebsd.org/~jasone/jemalloc/bsdcan2006/jemalloc.pdf)
*   ...可能还有很多其他人...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T07:52:31.567

我想我的回答不是天才，但是 - 这取决于。

如果您正在编写自定义内存分配器，您可能知道它的特点。例如。如果您希望分配器允许您快速分配大量小对象并且您并不真正关心内存使用开销，那么当您为大对象创建分配器并且想要节省尽可能多的内存时，您可能应该进行不同的测试即使以 CPU 时间为代价，这也是可能的。

压力测试总是好的，因为它可以帮助您找到一些竞争条件并检查您的分配器是否没有错误，但性能测试取决于您想要达到的目标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-23T11:17:41.393

以下是在优化/分析系统中的动态内存分配机制时应该考虑的指标。

*   *实现开销*- 保持分配的内部数据结构可操作需要多少内存。此外，如果这些结构随着时间的推移而增长或预先分配一次（两种方法都有优点和缺点，并且都是有效的）。
*   *操作效率*- 分配/释放内存块需要多长时间。在这里，分配通常是一个挑战，因为它几乎从来都不是一个恒定的时间，并且取决于先前分配的内存块的特性。释放块看起来很简单，但如果与内存碎片整理结合使用，则值得进一步关注（此处不再赘述）。
*   *线程安全*与分配本身的关系不大，而与在系统中使用某些解决方案的决定有关。基本上在这里，如果你没有线程 - 没有什么可担心的。如果您确实有线程 - 请确保您的分配在工作时不会被中断。
*   *内存碎片*- 分配内存的实际布局。这里有两个完全矛盾的要求在起作用——一旦在缓冲区中找到正确的位置就进行分配，或者确保尽可能少地产生碎片。前者速度快，而后者对资源更友好（也可能更慢）。
*   *垃圾收集*- 这是一个单独的主题和一个独立的研究领域，只是为了完整起见才提到它。重要的是要理解，即使您不打算经常释放分配的内存，GC 仍然可以用于帮助分析已分配的内存，为下一次有效的内存分配准备内部数据结构。可以说，空闲 CPU 时间是执行此管家任务的最佳时机。但是，此主题超出了此问题的范围。

# javascript - jquery javascript - 清除更改自动完成字段的复选框

> ID：16099648
> 
> 赞同：0
> 
> 时间：2013-04-19T07:38:32.813
> 
> 标签：javascript, jquery

我有以下脚本：

```
$("#product1").autocomplete({
     source: "get_sku_family",
     messages: {
         noResults: '',
         results: function () {}
     },

     select: function (event, ui) {
         var selectedObj = ui.item;

         $.post('get_as_09', 
             {
                 data: selectedObj.value
             }, 
             function (result) {
                 if (result[0] > 0) {
                     $('#h09_1').attr('checked', 'checked');
                 } else {
                     $('#h09_1').removeAttr('checked');
                 }
             }
         });
     }
}); 
```

这有一个自动完成字段，当输入文本时会提供来自数据库的选项。这行得通。然后在单击自动完成中的一个选项时，它会使用函数（`get_as_09`）查询数据库并根据结果检查复选框。

同样，这 100% 有效。

不过，我确实想要更改的是，当我在自动完成中输入一个新值时，它必须在应用新的数据库查找逻辑来选中复选框之前清除复选框。

我只是不知道在哪里添加`$('#h09_1').removeAttr('checked');`

谢谢并恭祝安康...

任何帮助表示赞赏

**更新**日普

```
if(data:selectedObj.value.length ==0 ){$('#h09_1').removeAttr('checked');};
 $.post('get_as_09', {data:selectedObj.value},function(result) { 

      if(result[0] > 0) {
          $('#h09_1').attr('checked','checked');
       } else {
          $('#h09_1').removeAttr('checked');
      }
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:44:40.953

在这条线之前

```
$.post('get_as_09', {data:selectedObj.value},function(result) { 
```

检查 data:selectedObj.value 的值是否为空。如果为空，则不需要发出 post 请求，只需取消选中复选框即可

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:26:46.150

如果你根据 keypress 事件在元素上附加一个事件监听器怎么办？像这样的东西：

```
$(selectedObj).one('keypress', function (e) {
    var checkbox = $('#h09_1');

    if (selectObj.val().length > 0) {
        checkbox.attr('checked', false);
    }

}); 
```

这样，您在清除之前就知道有人正在输入该字段。您可以在每次数据库查找后绑定事件侦听器。只是一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:43:28.653

如果你把之前

```
 $.post('get_as_09', {data:selectedObj.value},function(result) { 
```

所以每次在你把 smth 放进你的 $('#h09_1') 之前你都要清理它吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T07:45:05.873

尝试在 texbox 上进行更改事件意味着当您在自动完成中输入新值时，请在此处清除您要检查的任何内容

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T07:46:40.590

为什么不清除`on focus`自动完成字段的复选框。
这是有关此事件的文档[http://api.jqueryui.com/autocomplete/#event-focus](http://api.jqueryui.com/autocomplete/#event-focus)

正如你所说，一个 `$('#h09_1').removeAttr('checked');`就足够了。

```
focus: function( event, ui ) {
    $('#h09_1').removeAttr('checked');
} 
```

# vba - 基于 VBA 2010 中的字符中断字符串

> ID：16099651
> 
> 赞同：2
> 
> 时间：2013-04-19T07:38:47.230
> 
> 标签：vba, excel, substr

在 Excel 2010 中，使用 VBA，找到某个字符时如何拆分字符串？

假设`A1`=`"This is a | test of | the | emergency broadcast signal"` 我将其分配给一个变量，例如

```
strColumnA = Range("A" & CStr(currRow)).Value 
```

现在我想在工作表 2 的末尾追加 4 个新行。所有 A 列，如：

```
A1 = "This is a"
A2 = "test of"
A3 = "the"
A4 = "emergency broadcast signal" 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:57:59.967

使用它，因为不需要循环，离开`Application.Trim()`in 也很重要：

```
Sub test()

    Dim r As Variant, s As String
    s = [a1].Value
    r = Split(Application.Trim(s), "|")

    [b1].Resize(UBound(r, 1) + 1) = Application.Transpose(r)

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:41:05.543

利用`Split()`

```
Sub Sample()
    Dim Ret
    Dim strColumnA As String
    Dim i As Long

    strColumnA = "This is a | test of | the | emergency broadcast signal"
    Ret = Split(strColumnA, "|")

    For i = LBound(Ret) To UBound(Ret)
        Debug.Print Ret(i)
    Next i
End Sub 
```

# hibernate - 如何使用 HibernateJpaVendorAdapter 记录可粘贴的 DDL

> ID：16099653
> 
> 赞同：3
> 
> 时间：2013-04-19T07:38:51.050
> 
> 标签：hibernate, logging, spring-data-jpa, hbm2ddl

在以前的项目`hbm2ddl`中，我使用任务`hibernate3-maven-plugin`生成 DDL 代码 - 我在启用调试输出的情况下运行 maven 任务，并且 DDL 以可粘贴的方式记录到控制台。事实上，我使用此代码作为部署的初始迁移。配置是这样的：

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>hibernate3-maven-plugin</artifactId>
<version>3.0</version>
<configuration>
  <hibernatetool>
    <annotationconfiguration
      configurationfile="src/main/resources/db/database/config/annotatedhibernate.cfg.xml"
      propertyfile="src/main/resources/db/database/config/hibernate.properties" />
    <hbm2ddl drop="true" create="true" delimiter=";" format="true" console="true" outputfilename="output.ddl" />
  </hibernatetool>
</configuration> 
```

现在我发现`spring-data-jpa`并配置了它`HibernateJpaVendorAdapter`来生成我的 DDL 代码。很快我希望部署并喜欢将可粘贴的 DDL 代码记录到控制台（或某处），但我只知道如何设置和配置休眠日志记录，并且能够设置日志级别和内容 - 但美丽的 DDL 就像在maven 调试永远不会出现。如何使用 HibernateJpaVendorAdapter 启用它。当前配置如下：

```
<bean id="hibernateJpaVendorAdapter"
    class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
  <property name="generateDdl" value="true" />
  <property name="showSql" value="true" />
</bean>

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
  <property name="dataSource" ref="dataSource" />
  <property name="jpaVendorAdapter" ref="hibernateJpaVendorAdapter" />
  <property name="jpaProperties">
    <props>
      <prop key="hibernate.hbm2ddl.auto">create-drop</prop>
      <prop key="hibernate.show_sql">true</prop>
    </props>
  </property>
  <property name="packagesToScan" value="my.recipes.api.impl" />
</bean> 
```

# yuidoc - 如何为 yuidoc 添加 IgnorePath

> ID：16099656
> 
> 赞同：1
> 
> 时间：2013-04-19T07:39:25.533
> 
> 标签：yuidoc

在生成文档表单 yuidoc 时，我想忽略我项目的 lib 文件夹中下载的 javascript 库。我怎样才能把它放到我试过的忽略列表 `"ignorePaths": [ "./lib" ]`中 `"ignorePaths": [ "./lib/*.js" ]`，， `"ignorePaths": [ "lib" ]`

它仍然在编译我的 javascript 库文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T23:14:49.817

相反，请尝试使用`exclude`此处讨论的选项[https://github.com/yui/yuidoc/issues/5](https://github.com/yui/yuidoc/issues/5)

`"exclude" : ["lib"]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-24T20:28:13.467

*自从我昨天遇到这个问题以来，我正在添加一个更详细的答案，这可能对其他人有帮助。*

正如@slolife 提到的，你应该使用`"exclude"`.

的值`"exclude"`需要是逗号分隔目录的**字符串**（不是数组）。这可以通过您的 JSON 配置文件作为`"options"`或 作为命令行参数之一来完成。

# 单目录示例

**JSON 配置文件**

```
{
    "name": "My Project",
    "options": {
        "exclude": "lib"
    }
} 
```

**命令行**

```
yuidoc . -x "lib" 
```

# 多个目录示例

***注意：****列表中的目录之间没有空格*

**JSON 配置文件**

```
{
    "name": "My Project",
    "options": {
        "exclude": "lib,lib2"
    }
} 
```

**命令行**

```
yuidoc . -x "lib","lib2" 
```

*参考：http: [//yui.github.io/yuidoc/args/index.html](http://yui.github.io/yuidoc/args/index.html)*

# php - 如何在php中的函数中返回一个函数？

> ID：16099657
> 
> 赞同：0
> 
> 时间：2013-04-19T07:39:25.687
> 
> 标签：php, function

我想拥有在类（函数`setFunction`）中设置函数的功能。稍后我想获得`getFunction`可以从外部调用的函数（with）（指定参数等）。这是我尝试过的：

```
class Test
{
    var $function;

    function setFunction($foo)
    {
        $this->function = $foo;
    }

    function getFunction()
    {
        return $this->function;
    }

    function foo1($a)
    {
        print "foo1: ".$a."\n"; 
    }

    function foo2($b)
    {
        print "foo2: ".$b."\n"; 
        }

}

$oClass = new Test();
$oClass->setFunction($oClass->foo1);
$oClass->getFunction()('test'); # <--- line 32 
```

预期的输出是

```
foo1: test 
```

但我得到一个错误：

```
PHP Parse error:  syntax error, unexpected '(' in tester.php on line 32 
```

任何想法如何解决这个问题？以下是一些限制条件：

*   这必须适用于每个函数的任意参数。
*   要定义的函数总是在类本身中指定（如果有帮助的话）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:45:08.313

你必须使用[`call_user_func`](http://php.net/manual/en/function.call-user-func.php)：

```
$oClass = new Test();
$oClass->setFunction(array($oClass, 'foo1'));
call_user_func($oClass->getFunction(), 'test'); 
```

`array($oClass, 'foo1')`是一个[可调用](http://php.net/manual/en/language.types.callable.php)的，它表示`foo1`对类实例的方法的调用`$oClass`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T07:44:57.317

php 中的函数从来都不是一个对象。你不能这样做。

# php - 试图理解zend中的函数查询

> ID：16099660
> 
> 赞同：1
> 
> 时间：2013-04-19T07:39:36.700
> 
> 标签：php, zend-framework

```
/**
     * Prepares and executes an SQL statement with bound data.
     *
     * @param  mixed  $sql  The SQL statement with placeholders.
     *                      May be a string or Zend_Db_Select.
     * @param  mixed  $bind An array of data to bind to the placeholders.
     * @return Zend_Db_Statement_Interface
     */ 
    public function query($sql, $bind = array())
        {
            // connect to the database if needed
            $this->_connect();

            // is the $sql a Zend_Db_Select object?
            if ($sql instanceof Zend_Db_Select) {
                if (empty($bind)) {
                    $bind = $sql->getBind();
                }

                $sql = $sql->assemble();
            }

            // make sure $bind to an array;
            // don't use (array) typecasting because
            // because $bind may be a Zend_Db_Expr object
            if (!is_array($bind)) {
                $bind = array($bind);
            }

            // prepare and execute the statement with profiling
            $stmt = $this->prepare($sql);
            $stmt->execute($bind);

            // return the results embedded in the prepared statement object
            $stmt->setFetchMode($this->_fetchMode);
            return $stmt;
        } 
```

以上代码来自`Zend/Db/Adapter/Abstract.php`，虽然有注释，但我还是不明白 $bind 的用法。如果可能，请举例说明。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:45:28.627

`$bind`是参数化查询的数组参数：

```
// $bind with single param:
$obj->query('SELECT * FROM TableName WHERE IDColumn = ?', array(1));
// OR
$obj->query('SELECT * FROM TableName WHERE IDColumn = ?', 1); 
```

方法：

```
SELECT * FROM TableName WHERE IDColumn = 1 
```

* * *

```
// $bind with multiparams:
$obj->query('SELECT * FROM TableName WHERE somefield BETWEEN ? AND ?', array(10, 15)); 
```

方法：

```
SELECT * FROM TableName WHERE somefield BETWEEN 10 AND 15 
```

* * *

```
// $bind omitted at all:
$obj->query('SELECT * FROM TableName ORDER BY somefield'); 
```

方法：

```
SELECT * FROM TableName ORDER BY somefield 
```

* * *

如果`$sql`是 的实例`Zend_Db_Select`，那么它可能有一些自己的绑定。因此，如果提供`$bind`的是空/省略，则`$sql`' 绑定分配给它。

# c - 我怎样才能跳转到上半部分内核

> ID：16099665
> 
> 赞同：1
> 
> 时间：2013-04-19T07:39:45.653
> 
> 标签：c, kernel, virtual-memory, osdev, virtual-address-space

我目前正在构建更高半的内核，我的引导加载程序在物理地址 0x100000(1M) 处加载内核，并且身份映射已设置为 0-4MB。这是一个问题：我怎样才能跳转到更高的虚拟地址（例如 3GB）。

我用谷歌搜索了这个问题，发现了两种方法：一种是使用地址空间扭曲，一种是设置页面条目以将 3GB~3GB+4MB 映射到 0-4MB 然后“跳转”到更高的地址。我决定使用第二种方式，但找不到足够的信息来实现它。我反汇编了我的内核，发现所有的地址都是绝对的，所以我相信单个“jmp”指令是不够的。我能想到的唯一方法是在 3GB 以上的虚拟地址中有一个函数，我们在较低空间调用这个函数，然后我们将在高空间执行，这个函数永远不应该返回。如果这是真的，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T00:30:55.207

我的内核[K-OS](https://github.com/escortkeel/k-os)就是这样做的。

基本上，您需要编写一个链接描述文件来将您的整个内核转移到所需的“Higher-half”地址（请参阅[this](https://github.com/escortkeel/k-os/blob/master/kernel/src/linker.ld.S)）。然后，您需要附加一个小的汇编代码片段（参见[this](https://github.com/escortkeel/k-os/blob/master/kernel/src/loader.s)），这是内核的入口点。

这个片段应该**只使用相对地址**，并且应该为高半部分设置页表（将整个内核映射到您在链接描述文件中所说的位置）。最后，该片段应该 JMP 到“Higher-half”入口点，然后调用 C 代码。

# c# - 在不创建新类的情况下添加更多行为

> ID：16099669
> 
> 赞同：11
> 
> 时间：2013-04-19T07:40:02.353
> 
> 标签：c#, oop, design-patterns, design-principles

这是采访中被问到的问题。

> 有一个`Label`带有属性`Text`
> 的标签在一个页面中很简单`Label`，在其他页面中它可以处理以下任何一个或组合的操作
> Clickable
> Resizable
> Draggable
> 
> 你如何设计这个应用 OOP 设计原则和设计模式的标签组件？

我说我将创建以下内容：

```
public class Label
{
  public string Text{get;set;}
}
public interface IClickable
{
 void Click();
}

public interface IDraggable
{
 void Drag();
}
public interface IResizable
{
 void Resize();
} 
```

这样如果客户想要 Resizable Label

```
public class ResizableLabel:Label,IResizable
{
  ....
} 
```

同样的方式`ClickableLable`，`DraggableLabel`

但是，我觉得这是不正确的做法，因为我不想添加那些具体的类。我想避免使用`ClickableAndDraggableLabel`or `ClickableDraggableResizableLabel`。

是否有任何设计模式可以在不添加这些具体类的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T07:51:59.677

我会使用[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)。它在 .net 世界中广泛用于不同类型的流，例如，允许您为字节流编写加密的、压缩的、文本流包装器。类图取自wiki

![在此处输入图像描述](https://i.stack.imgur.com/rjawf.png)

您的情况的示例在实现中并不是那么微不足道，但是使用不需要其他类来实现新的编译行为：

```
// Define other methods and classes here
public class Label
{
    public string Text{get;set;}

    public virtual void MouseOver(object sender, EventArgs args) { /*some logic*/ }
    public virtual void Click(object sender, EventArgs args) {  /*some logic*/ }

    //other low level events
}

public class ClikableLabel : Label
{
    private Label _label;

    public ClikableLabel(Label label)
    {
        _label = label; 
    }

    public override void Click(object sender, EventArgs args) 
    {   
        //specific logic
        _label.Click(sender, args);
    }
}

public class DraggableLabel : Label
{
    private Label _label;

    public DraggableLabel(Label label)
    {
        _label = label; 
    }

    public override void Click(object sender, EventArgs args) 
    {   
        //specific logic
        _label.Click(sender, args);
    }
}
public class ResizableLabel : Label
{
    private Label _label;

    public ResizableLabel(Label label)
    {
        _label = label; 
    }

    public override void MouseOver(object sender, EventArgs args) 
    {   
        //specific logic
        _label.MouseOver(sender, args);
    }

    public override  void Click(object sender, EventArgs args) 
    {
        //specific logic
        _label.Click(sender, args);
    }
} 
```

现在你可以

```
var clickableDragableLabel = new ClikableLabel(new DraggableLabel(new Label{Text = "write me!"}));

var makeItResizable = new ResizableLabel(clickableDragableLabel); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:52:51.347

我不认为Interface可以解决您的问题。
我会做更像这样的东西：

首先，定义一个列出所有操作的枚举：

```
public Enum LabelAction{ None = 0, Clickable = 1, Resizable = 2, Draggable = 4 } 
```

对于定义多个枚举，您可以查看以下链接：

*   [如何在 C# 中传递多个枚举值？](https://stackoverflow.com/questions/1030090/how-do-you-pass-multiple-enum-values-in-c)
*   [枚举类型作为位标志](http://msdn.microsoft.com/en-us/library/cc138362.aspx)

然后在你的类标签中定义一个成员，采取行动：

```
public class Label
{
    private readonly LabelAction _action;
    private string Text { get; set; }

    public class Label(string text)
        : Label(text, LabelAction.None) { } 

    public class Label(string text, LabelAction action)
    {
        this.Text = text;
        this._action = action; 
    }

    public bool CanClick 
    { 
        get
        {
            return this._action & LabelAction.Clickable == LabelAction.Clickable;
        }
    }

    public bool CanResize { get { return this._action & LabelAction.Resizable == LabelAction.Resizable ;} }
    public bool CanDrag { get { return this._action & LabelAction.Draggable == LabelAction.Draggable ;} }

    public Click()
    {
       if(this.CanClick) { /* click */ }
       else { throw new Exception("Not clickable");}
    }
    public Drag()
    {
       if(this.CanDrag) { /* drag */ }
       else { throw new Exception("Not draggable");}
    }
    public Resize()
    {
       if(this.CanResize) { /* resize */}
       else { throw new Exception("Not resizable");}
    }
} 
```

用法：

```
var simpleLabel = new Label("simple");
var clickable = new Label("clickable", LabelAction.Clickable);
var clickableDraggable = new Label("clickable and draggable", LabelAction.Clickable | LabelAction.Draggable);

public void DoEvent(Label label)
{
    if(label.CanClick) label.Click();
    if(label.CanDrag) label.Drag();
    if(label.CanResize) label.Resize();
} 
```

如果您需要添加一个动作，您将必须向 Enum 添加一项，向类添加`LabelAction`一种方法`CanDo()`和一种方法。没有那么多。`Do()``Label`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T07:44:50.703

我只需要、 和的布尔属性`CanClick`，它们都默认为 true，并根据需要（或继承）为 false。`drag``resize`

构造函数如下

```
public Label(bool canClick = true, bool canDrag = true, bool canResize = true){} 
```

很有可能，如果他们扩展了一个类一次，它会在以后进一步扩展

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T08:52:26.633

我认为对于这种情况，没有必要重新发明轮子。即使问题明确要求 OOP，它也没有明确要求您忽略组件模型编程或基于事件的行为。这就是为什么我会遵循一种允许责任划分的方法，其中 Label 负责在单击或拖动时通知它，并且 SomeOtherComponent 可能会或可能不会侦听此类通知（事件）以执行其他逻辑。

请查看以下链接，了解这些用户操作的事件分派方法示例：

[拖放](http://msdn.microsoft.com/en-us/library/ms742859.aspx)

[标签类](http://msdn.microsoft.com/en-sg/library/system.windows.controls.label.aspx)

问候，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T07:45:50.820

好吧，您可以拥有一个实现所有接口并将其行为委托给具体策略类的基类。然后你将有一个 NullDraggable、nulResizeable、NullClickable 默认情况下什么都不做（所以你的基本标签不可点击、调整大小和可拖动）然后你创建不同的策略，如 Clickable、DoubleClickable、WidthResizeable 等......然后你传递你的组合想上你的课。通过这种方式，您可以获得许多易于在具有相同界面的其他组件中重用的小策略。通过使用复合模式，您可以拥有多种行为（例如，您可以同时拥有可点击和可双击）

不过，这可能有点过于ingeneered

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T08:15:53.823

我认为你过度思考了面试官的想法。如果案例一样简单实用，为了避免过度抽象的复杂性，那么这就足够了：

```
public class Label
{
    public string Text{get;set;}
}

public class ComlexLabel : Label
{
    Click();
    Drag();
    Resize();
} 
```

你可以对它进行任何操作。现在，如果对于挑战，您只需要一个具体实例并且需要单独类型的对象*才能仅执行*这些事情的组合，那么它再次简单 - 只是这次您必须创建类似的原型/接口：

```
public class Label
{
    public string Text{get;set;}
}

public interface Clickable
{
    Click();
}

public interface Resizable
{
    Resize();
}

public interface Dragable
{
    Drag();
}

public interface ClickableDragable : Clickable, Draggable
{

}

public interface ClickableResizable : Clickable, Resizable
{

}

public interface ResizableDragable : Resizable, Draggable
{

}

public interface ClickableDragableResizeable : Resizable, Clickable, Draggable
{

}

public class ComlexLabel : Lable, ClickableDragableResizeable
{
    Click();
    Drag();
    Resize();
} 
```

现在，您可以`ComlexLabel`通过创建提供所需功能的类型来获得实例。喜欢：

```
ResizableDragable rd = new ComlexLabel();
ClickableResizable cr = new ComlexLabel();
ClickableDragableResizeable cdr = new ComlexLabel(); 
```

现在`rd`，`cr`又`cdr`拥有了不同的能力。他们背后只有一个具体的例子。为了防止客户通过这样做获得完全特权

var cdr = 新的 ComplexLabel();

您应该将`ComplexLabel`构造函数设为私有并将任务分配给某个工厂。喜欢

```
var rd = Factory.GetResizableDragableLabel(); 
```

现在`rd`必须只是`ResizableDragable`没有`Click`功能..

# html - img 标签在 Firefox 中正确，但在 IE 中它在屏幕底部显示图像

> ID：16099671
> 
> 赞同：0
> 
> 时间：2013-04-19T07:40:05.640
> 
> 标签：html, internet-explorer

嗨，我的 html 中有以下代码。

```
<html>
    <tr>
    <td>
       some code here...
    </td>

    <td align="left" valign="top" width="35%">
        <img    src="http://ocs.landsend.com/lebowebcontent/images/global/marketing/TrueValue_SHIP_IMG.jpg" onerror='this.src="http://ocs.landsend.com/lebowebcontent/images/global/marketing/Stand_Ship_UPS_or_USPS.jpg";this.onerror=""' />
    </td> 

    </tr>
</html> 
```

图像必须显示在屏幕顶部的第二列，但它在 IE 的底部显示 .. 但它在 Firefox 和 chrome 中工作正常。

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:47:15.727

您缺少文档类型，并且 IE 不那么宽松。把它放在 html 代码的开头：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

# linux - Apache Tomcat 的 startup.sh 中的符号

> ID：16099678
> 
> 赞同：0
> 
> 时间：2013-04-19T07:40:21.417
> 
> 标签：linux, shell, tomcat, daemon

我一直在尝试制作自己的“守护程序”Java 线程。

我不能完全得到我想要的东西，所以我很好奇即使在我断开 ssh 连接后 Tomcat 是如何保持活力的。

所以我决定浏览一下 Tomcat 源文件，看看我是否能找到“魔法”。
在 startup.sh 中，我试图在 Internet 上找到一些看起来很奇怪的东西，但没有运气。

在启动.sh

```
 # resolve links - $0 may be a softlink
PRG="$0"

while [ -h "$PRG" ] ; do
  ls=`ls -ld "$PRG"`
  link=`expr "$ls" : '.*-> \(.*\)$'`
  if expr "$link" : '/.*' > /dev/null; then
    PRG="$link"
  else
    PRG=`dirname "$PRG"`/"$link"
  fi
done

PRGDIR=`dirname "$PRG"`
EXECUTABLE=catalina.sh

# Check that target executable exists
if $os400; then
  # -x will Only work on the os400 if the files are: 
  # 1\. owned by the user
  # 2\. owned by the PRIMARY group of the user
  # this will not work if the user belongs in secondary groups
  eval
else
  if [ ! -x "$PRGDIR"/"$EXECUTABLE" ]; then
    echo "Cannot find $PRGDIR/$EXECUTABLE"
    echo "The file is absent or does not have execute permission"
    echo "This file is needed to run this program"
    exit 1
  fi
fi 

exec "$PRGDIR"/"$EXECUTABLE" start "$@" 
```

1.  什么是'$0'？
2.  '$@' 是什么？

他们在做什么 ？
**编辑**
也许这真的与 OQ 没有太大关系，但我只是想分享我的发现。
分析了 Apache Tomcat 的源代码后，我想通了。我不确定这是否是 Tomcat 实际运行的方式。
我想要的是类似于守护进程的东西。
首先，您需要一个用 java 编写的启动器。在启动器中，创建一个进程并 exec("java yourDaemonToBe");
希望这可以帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:53:21.760

您正在运行的 shell 脚本的名称是`$0`argv 在数组中找到`$@`，即脚本的命令行参数。

# windows - Windows 7 和 8 上的 SysAnimate32

> ID：16099680
> 
> 赞同：-1
> 
> 时间：2013-04-19T07:40:31.050
> 
> 标签：windows, windows-7

此代码不再适用于 Windows 7 或 8。

它们不支持 SysAnimate32 控件吗？

有没有办法让它像以前在 Windows XP 上一样工作？

（我需要写更多细节，但我没有更多细节可谈：）

谢谢

```
#include <windows.h>
#include <CommCtrl.h>

HINSTANCE hInstance;

#define IDC_MYANIMATE 9

HWND CreateAnimationControl (HWND hParent)
{
    HWND hAnimation = Animate_Create( hParent, IDC_MYANIMATE, ACS_AUTOPLAY | WS_BORDER | WS_CHILD, hInstance);
    Animate_Open (hAnimation, "test.avi");
    ShowWindow (hAnimation, SW_SHOW);
    return hAnimation;
}

LRESULT CALLBACK WindowProcedure (HWND hWnd, UINT uiMsg, WPARAM wParam, LPARAM lParam)
{
    static HWND hAnimation = NULL;

    switch (uiMsg)
    {
        case WM_DESTROY:
             PostQuitMessage (0);
             break;

        case WM_CREATE:
             hAnimation = CreateAnimationControl (hWnd);
             break;

        case WM_SHOWWINDOW:
        if (wParam)
        {
            MoveWindow (hAnimation, 0, 0, 300, 300, TRUE);
            Animate_Play (hAnimation, 0, -1, -1);
        }
        break;
    }
    return DefWindowProc (hWnd, uiMsg, wParam, lParam);
}

int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpsCmdLine, int iCmdShow)
{
    WNDCLASSEX WindowClass;
    HWND hWnd;
    MSG uMsg;

    hInstance = GetModuleHandle (NULL);

    WindowClass.cbClsExtra = 0;
    WindowClass.cbSize = sizeof (WNDCLASSEX);
    WindowClass.cbWndExtra = 0;
    WindowClass.hbrBackground = CreateSolidBrush (RGB (0, 0, 0));
    WindowClass.hCursor = LoadCursor (NULL, IDC_ARROW);
    WindowClass.hIcon = LoadIcon (NULL, IDI_APPLICATION);
    WindowClass.hIconSm = LoadIcon (NULL, IDI_APPLICATION);
    WindowClass.hInstance = hInstance;
    WindowClass.lpfnWndProc = WindowProcedure;
    WindowClass.lpszClassName = "1";
    WindowClass.lpszMenuName = NULL;
    WindowClass.style = 0;

    if (!RegisterClassEx (&WindowClass))
    {
        MessageBox (NULL, "Window class registration has failed!", "Error:", MB_OK | MB_ICONERROR);
        return 0;
    }

    hWnd = CreateWindow ("1", "Win32 Animation Testing", WS_OVERLAPPEDWINDOW,
                          CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, NULL, NULL,
                          hInstance, NULL);
    if( ! hWnd )
    {
        MessageBox (NULL, "Window creation has failed!", "Error:", MB_OK | MB_ICONERROR);
        return 0;
    }

    ShowWindow( hWnd, SW_SHOW );
    UpdateWindow( hWnd );

    while( GetMessage( &uMsg, NULL, 0, 0 ) > 0 )
    {
        TranslateMessage( &uMsg );
        DispatchMessage ( &uMsg );
    }

    return ( int ) uMsg.wParam;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:37:40.383

不，当我在 Windows 8 上尝试使用 VS2012 编译的代码时，它仍然可以正常工作。一张截图来证明：

![在此处输入图像描述](https://i.stack.imgur.com/XufuF.png)

值得注意的是您缺少错误检查，您没有注意 Animate_Open() 的返回值。FALSE 返回表明它无法打开 .avi 文件。许多可能的原因，该功能没有比“无法做到”更好的诊断方法。

很难找到它可以处理的 .avi 文件，该控件非常陈旧，无法处理，只能处理最简单的。特别是，如 MSDN Library 所述，将无法打开同时具有音轨的 .avi 文件。我使用的测试是我从 Visual Studio 图像库 Animations/filecopy_16.avi 中挖出的一个非常简单的。

因此，在添加错误处理之后，基本检查是确保该文件实际上与您的 EXE 存在于同一目录中，并且它是一个非常简单的 .avi 文件，至少可以在 WMP 中播放。

# javascript - 伪静态 JavaScript 文件的正确标头

> ID：16099681
> 
> 赞同：0
> 
> 时间：2013-04-19T07:40:31.037
> 
> 标签：javascript, google-app-engine, python-2.7, browser-cache

我在 Google Appengine 上有一个 python 2.7 应用程序。其中一个 JS 文件是通过 python 脚本提供的，而不是标准的静态处理程序。app.yaml 配置如下所示：

```
- url: /js/foo.js
  script: python.js.write_javascript.app
  secure: optional 
```

对 foo.js 的请求是我们服务的代码片段客户端的一部分，位于他们的网站上，因此无法真正更新。python.js.write_javascript.app 基本上只是读取一个 JS 模板文件，替换一些客户特定的值并打印到浏览器。

我想知道的是，我们如何设置正确的标头以便正确缓存此请求。如果没有任何自定义标头，appengine 的默认设置是告诉浏览器永远不要缓存它。这显然是不可取的，因为它会给我们的应用程序带来不必要的负载。

理想情况下，我希望浏览器仅在模板更新后才发出新请求。另一种选择是缓存每个会话。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T20:56:44.287

出色地

看起来谷歌会自动处理这个问题。我只是使用正确的 JavaScript 标头打印它，但没有任何缓存标头，Google 的 CDN 会为我缓存它。我不确定默认的缓存生命周期是多少，但我没有看到通过实现它来增加实例或成本。

谷歌似乎只是为我处理它。

# c# - 单击自定义控件时选择 Lightswitch 网格中的项目

> ID：16099685
> 
> 赞同：0
> 
> 时间：2013-04-19T07:40:39.363
> 
> 标签：c#, silverlight, visual-studio-lightswitch

我有 Lightswitch 应用程序，并且那里有带网格的屏幕，在每一行中我都有我的自定义控件 - 带有链接到选定项目详细信息屏幕的图像，问题是如果我单击该控件，它不会选择控件所在的行，但它显示之前选择的行的详细屏幕..有什么帮助吗？

```
public void MouseClick(object sender, MouseButtonEventArgs e) {
  var objDataContext = (IContentItem)this.DataContext;
  var Screen = (Microsoft.LightSwitch.Client.IScreenObject)objDataContext.Screen;

  Screen.Details.Dispatcher.BeginInvoke(() => {
    Screen.Details.Methods["DoImageLinkEvent"]
          .CreateInvocation(null).Execute();
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:37:04.993

我解决了！！问题是我正在处理事件

```
MouseLeftButtonDown="MouseClick" 
```

但是后来选择了项目，所以现在处理它

```
MouseLeftButtonUp="MouseClick" 
```

它有效:)

# ruby-on-rails - 如何更改最后五条记录的数据的归档状态

> ID：16099690
> 
> 赞同：0
> 
> 时间：2013-04-19T07:41:01.900
> 
> 标签：ruby-on-rails, activerecord

我有一种情况，我想以 DESC 顺序显示最新的五条记录。如果这五条记录中有一条新记录，则 id=1 的记录的存档状态应更新为 true，现在应移至已存档页。我是一个新的 ruby​​ on rails 蜜蜂请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:50:33.220

使用模型创建和存储记录假设您正在使用具有多个字段来存储一些信息的 Post 模型。注意 id 属性和创建/更新字段是 Rails 自动为你创建的，你可以使用它们。您可以通过在应用目录的终端窗口中调用以下命令来创建模型

```
rails generate model Post author:string content:string #add any otehr attributes you wish, this is just an example. 
```

创建模型后，您将有地方存储所有记录。我将把存储任务留给你作为练习。现在，如果您想获得 5 个最新帖子，您需要创建一个方法，将 5 个最新帖子放入一个对象中。在您的控制器中，您必须定义一个新方法，该方法将返回一个 Post 对象数组包含 5 个最新帖子。

```
def get_last_5
@last_five = User.find(:all, :order => "created_at desc", :limit => 5)
return @last_five #maybe an overkill but just to be sure
end 
```

每次运行此方法时，它都会返回一个包含 5 个最新创建的对象的数组。您可以通过调用等方式访问`@last_five[0]`它们`@last_five[1]`。

祝你好运！

# python - 如何删除列表中的空字符串？

> ID：16099694
> 
> 赞同：23
> 
> 时间：2013-04-19T07:41:13.833
> 
> 标签：python, list

例如我有一句话

```
"He is so .... cool!" 
```

然后我删除所有标点符号并将其列在一个列表中。

```
["He", "is", "so", "", "cool"] 
```

如何删除或忽略空字符串？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-19T07:42:30.990

您可以使用[`filter`](http://docs.python.org/2/library/functions.html#filter), with`None`作为键函数，它过滤掉所有`False`ish 元素（包括空字符串）

```
>>> lst = ["He", "is", "so", "", "cool"]
>>> filter(None, lst)
['He', 'is', 'so', 'cool'] 
```

但是请注意，这`filter`在 Python 2 中返回一个列表，但在 Python 3 中返回一个生成器。您需要将其转换为 Python 3 中的列表，或使用列表解析解决方案。

`False`ish 价值观包括：

```
False
None
0
''
[]
()
# and all other empty containers 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-19T07:41:51.187

你可以像这样过滤它

```
orig = ["He", "is", "so", "", "cool"]
result = [x for x in orig if x] 
```

或者你可以使用`filter`. 在 python 3`filter`中返回一个生成器，从而`list()`将它变成一个列表。这也适用于 python 2.7

```
result = list(filter(None, orig)) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-19T07:43:31.647

您可以使用列表推导：

```
cleaned = [x for x in your_list if x] 
```

虽然我会使用正则表达式来提取单词：

```
>>> import re
>>> sentence = 'This is some cool sentence with,    spaces'
>>> re.findall(r'(\w+)', sentence)
['This', 'is', 'some', 'cool', 'sentence', 'with', 'spaces'] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-19T07:47:58.380

我会回答你*应该*问的问题——如何完全避免空字符串。我假设您执行以下操作来获取您的列表*：*

```
>>> "He is so .... cool!".replace(".", "").split(" ")
['He', 'is', 'so', '', 'cool!'] 
```

关键是你[`.split(" ")`](http://docs.python.org/2/library/stdtypes.html#str.split)用来分割空格字符。但是，如果您省略 的参数，则会`split`发生这种情况：

```
>>> "He is so .... cool!".replace(".", "").split()
['He', 'is', 'so', 'cool!'] 
```

引用文档：

> 如果 sep 未指定或为 None，则应用不同的拆分算法：连续空格的运行被视为单个分隔符，如果字符串具有前导或尾随空格，则结果将在开头或结尾不包含空字符串。

因此，您真的不需要为其他答案而烦恼（Blender 除外，这是一种完全不同的方法），因为 split 可以为您完成这项工作！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T07:43:01.340

```
>>> from string import punctuation
>>> text = "He is so .... cool!"
>>> [w.strip(punctuation) for w in text.split() if w.strip(punctuation)]
['He', 'is', 'so', 'cool'] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-19T07:43:13.013

您可以使用列表推导非常轻松地过滤掉空字符串：

```
x = ["He", "is", "so", "", "cool"]
x = [str for str in x if str]
>>> ['He', 'is', 'so', 'cool'] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-30T18:47:45.543

Python 3 返回一个`iterator`from `filter`，因此应该包含在对 list() 的调用中

```
str_list = list(filter(None, str_list)) # fastest 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-02T13:44:18.703

```
lst = ["He", "is", "so", "", "cool"]
lst = list(filter(str.strip, lst)) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-04-19T07:43:59.637

您可以使用`filter`.

```
a = ["He", "is", "so", "", "cool"]
filter(lambda s: len(s) > 0, a) 
```

# jsf - Primefaces contextMenu基于所选项目的不同菜单？

> ID：16099698
> 
> 赞同：0
> 
> 时间：2013-04-19T07:41:23.227
> 
> 标签：jsf, primefaces, datatable

我有一个`p:dataTable`我在我的应用程序中使用的，并且有一个关联的`p:contextMenu`.

我想知道，如何根据所选行使上下文菜单选项有所不同？

例如，我有一个 SENT 或 WAITING 的状态行。如果 SENT，我希望上下文菜单有一组选项，如果 WAITING，我希望上下文菜单说出其他选项。

这是如何处理素面的？似乎是基本功能。

# android - Android-应用程序崩溃 java.lang.IllegalArgumentException：视图未附加到窗口管理器

> ID：16099703
> 
> 赞同：0
> 
> 时间：2013-04-19T07:41:34.553
> 
> 标签：android, android-webview

开发的 Android 应用程序包括 Webview 以及进度条和对方向更改的支持，但我的应用程序崩溃生成以下错误：

> java.lang.IllegalArgumentException：视图未附加到窗口管理器

这是我的代码：-

```
protected ProgressDialog mSpinner;
        @Override
        protected void onCreate(Bundle savedInstanceState) {
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            mSpinner = new ProgressDialog(this);
            mSpinner.setMessage("Loading..Please Wait!");
            setContentView(R.layout.activity_main);
                    WebView myWebView = (WebView) findViewById(R.id.webview);
                    myWebView.loadUrl("http://www.google.com");}
            @Override
        public void onConfigurationChanged(Configuration newConfig){
            super.onConfigurationChanged(newConfig);
        }
    public class MyCustomWebViewClient extends WebViewClient {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                            view.loadUrl(url);
               return true;
            }

            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                super.onPageStarted(view, url, favicon);
               // Log.d("mytag","Page Loading Started"); 
                mSpinner.show();
            }

            @Override
            public void onPageFinished(WebView view, String url) {
                super.onPageFinished(view, url);

                    if ( mSpinner.isShowing()) {
                         mSpinner.dismiss();
             //Log.d("mytag","Page Loading finished");
                //mSpinner.dismiss();
            }
        } 
```

# abap - RFBVBIC2 实施 SAP 时更新程序文档说明 1737484

> ID：16099715
> 
> 赞同：1
> 
> 时间：2013-04-19T07:42:14.620
> 
> 标签：abap, sap-erp

我们更新了实现 SAP Note 1737484 的报告 RFBVBIC2（交易代码 BIC2）。此外，我们`RFBVBIC2-ITF.zip`在附件部分找到了一个 zip 文件“”。

程序文档未通过实施 SAP Note 进行更新。

尝试手动更新程序文档时，我们被要求“创建修改”，提供修改名称并在“模板类型”“原始文本”和“模板（带标题）”之间进行选择。

这样做时，新文档（另外：仅提供德语）将覆盖旧文档，并且不会提供任何其他语言的程序文档。

**我的问题：**实施此类程序文档更新的正确方法是什么？

谢谢！

# ruby-on-rails - 如何制作一个可以插入其他 Rails 应用程序的博客应用程序？

> ID：16099720
> 
> 赞同：0
> 
> 时间：2013-04-19T07:42:38.777
> 
> 标签：ruby-on-rails

我想为我拥有的一些应用程序提供博客功能，而不是将它们作为每个应用程序的一部分进行开发和维护，我想开发一个博客应用程序并将其直接插入其他应用程序并维护一个单一的代码库。

我应该采取什么方法来实现这一点？或者是否有一个已经这样做的宝石？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T08:26:23.173

Rails 引擎听起来是您最好的选择。引擎是为其宿主应用程序提供功能的应用程序。[引擎入门](http://guides.rubyonrails.org/engines.html)指南是一个很好的起点，它恰好可以指导您完成创建博客引擎的过程。有这样的引擎存在于野外，例如[Blogit](https://github.com/KatanaCode/blogit)。无论您做出什么决定，通读引擎指南都会让您很好地了解引擎的工作原理。

# c# - 如何将此字符串转换为日期时间？

> ID：16099723
> 
> 赞同：3
> 
> 时间：2013-04-19T07:42:48.850
> 
> 标签：c#, jquery, kendo-ui

如何将其转换为日期时间？

```
var datestring = "Thu Jun 09 2011 00:00:00 GMT+0530 (India Standard Time)" 
```

日期格式如`"09/06/2011"`. 我不介意是服务器端还是客户端。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T07:58:51.273

我认为 .Net 框架没有提供任何 BuiltIn 方法来解析这种格式的日期。您可以从字符串中删除时区的信息，然后将其解析为：

```
var datestring = "Thu Jun 09 2011 00:00:00 GMT+0530 (India Standard Time)";
DateTime dt = DateTime.ParseExact(datestring.Substring(0, 24),
                  "ddd MMM dd yyyy HH:mm:ss",
                  CultureInfo.InvariantCulture); 
```

稍后您可以将其格式化为：

```
string formattedDate = dt.ToString("dd/MM/yyyy"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:50:25.237

@Naidu，你可以自己做这个客户端。

如果您在 kendo ui 中工作，则可以选择日期格式，否则您可以使用纯 javascript

在 kendoUI 中：

```
var dateString = 'Thu Jun 09 2011 00:00:00 GMT+0530 (India Standard Time)';

// Date Formating in Kendo
alert(kendo.toString(new Date(dateString), 'dd/MM/yyyy')); 
```

在 javascript 中：

```
//  Date Formating in Javascript
var date = new Date(dateString);
alert(date.getDate() + '/' + Number(date.getMonth() + 1) + '/' + date.getFullYear()); 
```

两个输出都会按照您的要求给出结果（09/06/2011）。您还可以获取“日期与时间”

在此处参考 jsFiddle：http: [//jsfiddle.net/pTcJh/1/](http://jsfiddle.net/pTcJh/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:47:36.653

这将是一个机会：

```
string day = datestring.SubString(8, 2);
string month = datestring.SubString(4, 2);
switch(month)
{
    case "Jun":
        month = "06";
        break;
}
string year = datestring.SubString(11, 4);
string date = day + "/" + month + "/" + year; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T07:48:05.970

您是否尝试将此字符串放入 new Date(dateString) 的构造函数中？

它对我有用

```
new Date( datestring ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T07:51:41.143

您可以拆分字符串，因为每个字符在字符串中都有固定的位置

```
string splits[] = datestring.Split(' ');
//switch for month "Jun" = 6
string date = string.Format("{0}/{1}/{2}", splits[2], month, splits[3]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T07:51:47.150

也许这有帮助： http: [//www.codeproject.com/Articles/14743/Easy-String-to-DateTime-DateTime-to-String-and-For](http://www.codeproject.com/Articles/14743/Easy-String-to-DateTime-DateTime-to-String-and-For)

或者这个：[将字符串转换为日期时间](https://stackoverflow.com/questions/919244/converting-string-to-datetime-c-net)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-19T08:03:38.123

这就是我得出的结果（使用 Linqpad）：

```
String datestring = "Thu Jun 09 2011 00:00:00 GMT+0530 (India Standard Time)";
var d = datestring.Split(new char[] {' '}, 5).Take(4);
DateTime dt = DateTime.Parse(d.Aggregate((x, y) => x + " " + y));
dt.Dump(); 
```

结果：

```
09.06.2011 00:00:00 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-19T08:04:20.867

*好吧，我相信**.NET Framework*中没有直接的方法来解析这种字符串。

这是一个肮脏的方式:)

```
string datestring = "Thu Jun 09 2011 00:00:00 GMT+0530 (India Standard Time)";
string[] s1 = datestring.Split(new string[]{" "}, 6, StringSplitOptions.RemoveEmptyEntries);

string date = "";
for (int i = 0; i < 5; i++)
{
     date = date + s1[i] + " ";
}
date = date.TrimEnd();

DateTime yourdatetime = DateTime.ParseExact(date, "ddd MMM dd yyyy HH:mm:ss", CultureInfo.InvariantCulture);
Console.WriteLine(yourdatetime); 
```

输出会像；

```
6/9/2011 12:00:00 AM 
```

这是一个[`DEMO`](http://ideone.com/H7OGdp).

您可以从以下位置查看更多自定义日期格式[`Custom Date and Time Format Strings`](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-19T08:19:54.963

简短而简单，这应该可以解决问题：

*更新：从头开始，你甚至不需要我之前的格式提供程序。这似乎工作正常：*

```
var datestring = "Thu Jun 09 2011 00:00:00 GMT+0530 (India Standard Time)";
var date = DateTime.Parse(new string(datestring.Take(24).ToArray()));

date.ToString("dd/MM/yyyy"); 
```

# php - 将变量数组插入mysql数据库

> ID：16099725
> 
> 赞同：-2
> 
> 时间：2013-04-19T07:42:49.267
> 
> 标签：php, mysql, web-scraping

所以......我有这个回声声明：

```
echo 
$results['results'][0]['url'].','
.$results['results'][1]['url'].','
.$results['results'][2]['url'].','
.$results['results'][3]['url'].','
.$results['results'][4]['url'].','
.$results['results'][5]['url'].','
.$results['results'][6]['url'].','
.$results['results'][7]['url'].','
.$results['results'][8]['url'].','
.$results['results'][9]['url'].','

.$results['results'][0]['title'].','
.$results['results'][1]['title'].','
.$results['results'][2]['title'].','
.$results['results'][3]['title'].','
.$results['results'][4]['title'].','
.$results['results'][5]['title'].','
.$results['results'][7]['title'].','
.$results['results'][8]['title'].','
.$results['results'][9]['title'].','

.$results['results'][0]['desc'].','
.$results['results'][1]['desc'].','
.$results['results'][2]['desc'].','
.$results['results'][3]['desc'].','
.$results['results'][4]['desc'].','
.$results['results'][5]['desc'].','
.$results['results'][6]['desc'].','
.$results['results'][7]['desc'].','
.$results['results'][8]['desc'].','
.$results['results'][9]['desc']; 
```

这有效，并在我拥有的谷歌刮板中输出前 10 个 url、前 10 个标题和前 10 个描述（我向您展示这个以证明脚本有效）（有很多文件要显示，所以我不会在这里展示它们）。我想将数据输入到 mysql 数据库中。

这个回显，回显这样的值：对于某个关键字...</p>

```
    http://cars.mainetoday.com/,http://www.nowvauxhall.co.uk/,http://www.youtube.com/watch?v=nDvggf0ltVo,......

```

如您所见，它们都用逗号分隔，并准备输入到mysql数据库中。数据库的连接和选择由一个正在工作（或者我认为）的小脚本负责。（再一次，我不打算展示这些文件，因为它们都是连接的，它们大约有 5 或 6 个，而且它们很长），所以……这是我用来输入一行的输入代码桌子：

```
mysql_query(

"INSERT INTO  'seo'.'serp' (
`keyword` ,
`URL1` ,
`URL2` ,
`URL3` ,
`URL4` ,
`URL5` ,
`URL6` ,
`URL7` ,
`URL8` ,
`URL9` ,
`URL10` ,
`Title1` ,
`Title2` ,
`Title3` ,
`Title4` ,
`Title5` ,
`Title6` ,
`Title7` ,
`Title8` ,
`Title9` ,
`Title10` ,
`Description1` ,
`Description2` ,
`Description3` ,
`Description4` ,
`Description5` ,
`Description6` ,
`Description7` ,
`Description8` ,
`Description9` ,
`Description10`
)
VALUES (
'cars to sale',

".htmlentities($results['results'][0]['url']).",
".htmlentities($results['results'][1]['url']).",
".htmlentities($results['results'][2]['url']).",
".htmlentities($results['results'][3]['url']).",
".htmlentities($results['results'][4]['url']).",
".htmlentities($results['results'][5]['url']).",
".htmlentities($results['results'][6]['url']).",
".htmlentities($results['results'][7]['url']).",
".htmlentities($results['results'][8]['url']).",
".htmlentities($results['results'][9]['url']).",

".htmlentities($results['results'][0]['title']).",
".htmlentities($results['results'][1]['title']).",
".htmlentities($results['results'][2]['title']).",
".htmlentities($results['results'][3]['title']).",
".htmlentities($results['results'][4]['title']).",
".htmlentities($results['results'][5]['title']).",
".htmlentities($results['results'][6]['title']).",
".htmlentities($results['results'][7]['title']).",
".htmlentities($results['results'][8]['title']).",
".htmlentities($results['results'][9]['title']).",

".htmlentities($results['results'][0]['desc']).",
".htmlentities($results['results'][1]['desc']).",
".htmlentities($results['results'][2]['desc']).",
".htmlentities($results['results'][3]['desc']).",
".htmlentities($results['results'][4]['desc']).",
".htmlentities($results['results'][5]['desc']).",
".htmlentities($results['results'][6]['desc']).",
".htmlentities($results['results'][7]['desc']).",
".htmlentities($results['results'][8]['desc']).",
".htmlentities($results['results'][9]['desc'])); 
```

输入行似乎不喜欢表格……；）我也试过：

```
mysql_query(

"INSERT INTO  'seo'.'serp' (
`keyword` ,
`URL1` ,
`URL2` ,
`URL3` ,
`URL4` ,
`URL5` ,
`URL6` ,
`URL7` ,
`URL8` ,
`URL9` ,
`URL10` ,
`Title1` ,
`Title2` ,
`Title3` ,
`Title4` ,
`Title5` ,
`Title6` ,
`Title7` ,
`Title8` ,
`Title9` ,
`Title10` ,
`Description1` ,
`Description2` ,
`Description3` ,
`Description4` ,
`Description5` ,
`Description6` ,
`Description7` ,
`Description8` ,
`Description9` ,
`Description10`
)
VALUES (
'cars to sale',

".$results['results'][0]['url'].",
".$results['results'][1]['url'].",
".$results['results'][2]['url'].",
".$results['results'][3]['url'].",
".$results['results'][4]['url'].",
".$results['results'][5]['url'].",
".$results['results'][6]['url'].",
".$results['results'][7]['url'].",
".$results['results'][8]['url'].",
".$results['results'][9]['url'].",

".$results['results'][0]['title'].",
".$results['results'][1]['title'].",
".$results['results'][2]['title'].",
".$results['results'][3]['title'].",
".$results['results'][4]['title'].",
".$results['results'][5]['title'].",
".$results['results'][6]['title'].",
".$results['results'][7]['title'].",
".$results['results'][8]['title'].",
".$results['results'][9]['title'].",

".$results['results'][0]['desc'].",
".$results['results'][1]['desc'].",
".$results['results'][2]['desc'].",
".$results['results'][3]['desc'].",
".$results['results'][4]['desc'].",
".$results['results'][5]['desc'].",
".$results['results'][6]['desc'].",
".$results['results'][7]['desc'].",
".$results['results'][8]['desc'].",
".$results['results'][9]['desc']); 
```

仍然没有结果……但没有错误！？？？如果回声有效，为什么我不能插入行？？？为什么它没有显示任何错误？我已经为此工作了大约 15 个小时！我敢肯定这很简单...

我还尝试了 foreach 循环，其中 2 个，每个变量子集一个。没有错误，但没有插入行。

任何人都可以帮忙吗？谢谢，米格尔

像这样？

```
mysql_query(

"INSERT INTO  'seo'.'serp' (
`keyword` ,
`URL1` ,
`URL2` ,
`URL3` ,
`URL4` ,
`URL5` ,
`URL6` ,
`URL7` ,
`URL8` ,
`URL9` ,
`URL10` ,
`Title1` ,
`Title2` ,
`Title3` ,
`Title4` ,
`Title5` ,
`Title6` ,
`Title7` ,
`Title8` ,
`Title9` ,
`Title10` ,
`Description1` ,
`Description2` ,
`Description3` ,
`Description4` ,
`Description5` ,
`Description6` ,
`Description7` ,
`Description8` ,
`Description9` ,
`Description10`
)
VALUES (
'cars to sale',

'".htmlentities($results['results'][0]['url'])."',
'".htmlentities($results['results'][1]['url'])."',
'".htmlentities($results['results'][2]['url'])."',
'".htmlentities($results['results'][3]['url'])."',
'".htmlentities($results['results'][4]['url'])."',
'".htmlentities($results['results'][5]['url'])."',
'".htmlentities($results['results'][6]['url'])."',
'".htmlentities($results['results'][7]['url'])."',
'".htmlentities($results['results'][8]['url'])."',
'".htmlentities($results['results'][9]['url'])."',

'".htmlentities($results['results'][0]['title'])."',
'".htmlentities($results['results'][1]['title'])."',
'".htmlentities($results['results'][2]['title'])."',
'".htmlentities($results['results'][3]['title'])."',
'".htmlentities($results['results'][4]['title'])."',
'".htmlentities($results['results'][5]['title'])."',
'".htmlentities($results['results'][6]['title'])."',
'".htmlentities($results['results'][7]['title'])."',
'".htmlentities($results['results'][8]['title'])."',
'".htmlentities($results['results'][9]['title'])."',

'".htmlentities($results['results'][0]['desc'])."',
'".htmlentities($results['results'][1]['desc'])."',
'".htmlentities($results['results'][2]['desc'])."',
'".htmlentities($results['results'][3]['desc'])."',
'".htmlentities($results['results'][4]['desc'])."',
'".htmlentities($results['results'][5]['desc'])."',
'".htmlentities($results['results'][6]['desc'])."',
'".htmlentities($results['results'][7]['desc'])."',
'".htmlentities($results['results'][8]['desc'])."',
'".htmlentities($results['results'][9]['desc'])."')") 
```

不工作，没有错误...

还有连接文件：

```
<?php

$conn_error = 'Could not connect.';

$mysql_host = 'localhost';
$mysql_user = 'root';
$mysql_pass = '';

$mysql_db = 'seo';

if (!mysql_connect($mysql_host, $mysql_user, $mysql_pass)||!mysql_select_db($mysql_db)) {

die($conn_error);
}
echo 'connected';
?> 
```

就像您在页面顶部的回声中看到的那样，它在最后给出“连接”......

还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:46:51.307

您必须`'`像这样包含文本数据

```
'".htmlentities($results['results'][0]['url'])."',
^                                               ^ 
```

其他人也一样

# hadoop - hadoop作业的实际处理时间

> ID：16099727
> 
> 赞同：1
> 
> 时间：2013-04-19T07:42:56.700
> 
> 标签：hadoop, jobs, cloudera

我的集群当前被一个`A`需要很长时间并且具有*VERY_LOW*优先级的作业占用。

`B`我昨天开始另一份工作时`A`已经在运行，我认为它应该运行得很快。但是，我看到工作细节花了 47 分钟。我不认为这是实际的处理时间。我试图找出工作真正开始的时间。我在哪里可以看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:17:52.690

我似乎无法找到确切说明您所追求的任何地方，但您可以在端口 50030 上的作业跟踪器中查看作业，并查看各个映射器和减速器的详细信息。在那里，您可以看到每个单独的 mapper 和 reducer 从开始和结束时间完成任务所需的时间。

如果在您开始第二份工作时没有任何免费的映射器或减速器，那么在第一份工作释放它们之前，第二份工作将无法取得任何进展，这可能解释了为什么它声称需要这么长时间，因为他们可能没有实际上是同时运行的。作业开始的时间和第一个实际映射器启动的时间应该可以告诉您它是否只是在等待资源，这意味着您可以从整个 47 分钟中减去作业和映射器开始时间之间的时间段。

# iphone - iphone中无法访问magento REST API

> ID：16099730
> 
> 赞同：2
> 
> 时间：2013-04-19T07:43:12.523
> 
> 标签：iphone, magento, oauth, magento-1.7

当我尝试使用 iPhone 访问 REST API 时，我在 URL 中传递了以下参数并使用了**POST**和**GET**这两种方法，但它显示`Access Denied`。

```
oauth_version="1.0", 
oauth_signature_method="HMAC-SHA1",
oauth_nonce="B0dlzkfMWCAn0TJ", 
oauth_timestamp="1366280813",
oauth_consumer_key="klkjylsiozbv6vfdsqtuheqo3kmqqzv2",
oauth_token="t9pefrwylmg7webyepsqepotlhzbytkp",
oauth_signature="NeOwbCLUPbIyF9ErnHoFQOl9%2Bwo%3D" 
```

我曾使用 Firefox 和 Chrome 可用的 REST 客户端插件，REST API 使用 REST 客户端插件运行良好，但在 iPhone 中无法访问。

我正在为 oauth_timestamp、oauth_signature 和 oauth_nonce 生成一个随机值，然后 REST API 也正在显示`Access Denied`。

请提供建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T09:29:12.070

//这里 final_sign 是从以下过程生成的签名。

```
$nonce = substr(md5(uniqid('nonce_', true)),0,16);
$temprealm="http://magentohost/api/rest/products";
$realm=urlencode($temprealm);
$oauth_version="1.0";
$oauth_signature_method="HMAC-SHA1";
$oauth_consumer_key="dfddfgdgdfgddf6qgygmyvw7e3";
$oauth_access_token="fdgdfgfdgdfg357gimpdnuejvcbtk51ni";
$oauth_method="GET";
$oauth_timestamp=time();
$algo="sha1";
$key="sb88hfdihyg25ipt1by559yzbj2m3861&s7uhaheu8nrx961oxg6uc3os4zgyc2tm"; //consumer secret & token secret //Both are used in generate signature
$data="oauth_consumer_key=".$oauth_consumer_key."&oauth_nonce=".$nonce."&oauth_signature_method=".$oauth_signature_method."&oauth_timestamp=".$oauth_timestamp."&oauth_token=".$oauth_access_token."&oauth_version=".$oauth_version;

$send_data=$oauth_method."&".$realm."&".urlencode($data);
$sign=hash_hmac($algo,$send_data,$key,1); // consumer key and token secrat used here
$fin_sign=base64_encode($sign);

echo $fin_sign; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:11:06.827

根据您的问题，我了解到您对*签名*和*nonce使用***随机**值。后者会很好，但**随机签名**会导致接收者不相信你是合法的客户。

 ****所以，实际上，你得到了你请求的响应 (;-))。但这并不能解决您的问题。

您必须为 magento 系统生成一个**有效的签名**。****

# c++ - 从 'const char*' 到 'char' 的无效转换

> ID：16099731
> 
> 赞同：1
> 
> 时间：2013-04-19T07:43:12.550
> 
> 标签：c++, char, argument-passing

我目前正在研究一个杂项剧院座位计划！我刚刚开始通过 C++ 取得进展，但我无法弄清楚我在编码中不断遇到的这个错误。我目前正在尝试编码的是一种逐个字符输入“*”字符的方法，最终帮助我构建一个显示电影院座位表的功能。我非常接近完成名为 readSeating 的函数......虽然它有一些明显的问题。通常我可以非常有效地调试我的程序，但我就是想不通这个。请看一下我的代码，感受一下我的程序，并让我有任何想法。请保持答案简单一些；再说一次，我不是 C++ 高手

附言

抱歉显示整个代码...这是我的第一篇文章...我真的不知道该包含什么，不包含什么；我希望人们能够通过自己测试来感受这个程序......再次感谢！

```
/* 
* This is a program built by a team of students
* to help local movie theaters sell tickets
* 
* File: main.cpp
* Author(s):
*
* 
* Created on April 15, 2013, 11:10 AM
*/

#include <cstdlib>
#include <vector>
#include <string>
#include <fstream>
#include <iostream>
#include <cctype>
#include <iomanip>

using namespace std;

//Function Prototypes
void Title_Card();
void seating_prices();
void seating_chart();
void pick_seating();
void purchase_history();
void quit();
void update_file();
void Show_Menu();
void is_digit(int&);
void Admin_Menu();
void edit_seating_prices();
void edit_seating();
void quit_to_original();
void purchase_history_admin();

int readSeating (char, vector<char>&); //Reads SeatingChart.txt
int readPrices(string, vector<double>&); //Reads SeatingPrices.txt
vector<double> prices(15); //For SeatPrices.txt
vector<char> seating(450); //For SeatingChart.txt

//Actual Program
int main() {
Title_Card(); //Calls Title Page

readSeating("SeatingChart.txt", seating); //Reads SeatingChart.txt
readPrices("SeatPrices.txt", prices); //Reads SeatPrices.txt
Show_Menu(); //Shows Introductory Menu

system ("pause");
return 0;
}

//**************************************************************
// Definition of the ShowMenu function. Shows introductory menu*
// and controls where user ends up in the program.             *
//**************************************************************

void Show_Menu() {
int choice;
string password;

  cout << "Welcome to the our theater program! Made for a person" << endl;
  cout << "who is looking for seating, purchasing a ticket, and" << endl;
  cout << "searching for other miscellaneous things... We hope" << endl;
  cout << "you enjoy the program!" << endl << endl;
  cout << "Below is a list of options the user can choose from:" << endl << endl;
  cout << "1.\tSeating Prices" << endl;
  cout << "2.\tPick Seating" << endl;
  cout << "3.\tPurchase History" << endl;
  cout << "4.\tQuit" << endl << endl;
  cout << "Enter a choice... (1-4): ";
  cin >> choice;

  //Secret Administrator Access
  if (choice == 219){
     system ("cls");
     cout << "Enter the administrator password: ";
     cin >> password;

     if (password == "sterilegorilla")
        Admin_Menu();
     else {
        system ("cls");
        Show_Menu();
          }
  } 

  is_digit(choice);//is_digit function doesn't work atm

  while (choice < 1 || choice > 4){
        cout << endl << "You have entered an invalid choice!" << endl;
        cout << "Enter a choice... (1-4): ";
        cin >> choice;
        is_digit(choice); //is_digit function doesn't work atm
            if (choice == 219){
               system ("cls");
               cout << "Enter the administrator password: ";
               cin >> password;

                   if (password == "sterilegorilla")
                      Admin_Menu(); 

                      else {
                           system ("cls");
                           Show_Menu();
                           }     
                           }
     }

  switch (choice) {
         case 1:
              seating_prices();

         case 2:
              pick_seating();

         case 3:
              purchase_history();

         case 4:
              quit();
              }

}

//**************************************************************
// Definition of the seating_prices function. Displays to the  *
// user, SeatPrices.txt                                        *
//**************************************************************

void seating_prices(){
system ("cls");
cout << "The Current Seating Prices Are:" << endl << endl;
for (int count = 0; count < 4; count++){
cout << " " << setprecision(4) << showpoint <<  prices[count] << " | Row " << (count + 1) <<                         endl;
}
for (int count = 4; count < prices.size(); count++){
cout << "  " << setprecision(3) << showpoint <<  prices[count] << " | Row " << (count + 1) << endl;
}
cout << endl;
system ("pause");
system ("cls");
Show_Menu();
}

//**************************************************************
// Definition of the pick_seating function. Displays the       *
// current seating chart and allows the user to pick their seat*
//**************************************************************

void pick_seating(){  //Not Finished
system ("cls");
int row_choice;
int seat_choice;

cout << "The Current Seating Chart Is:" << endl;

 //Display Seating Chart

 //Picking your seat
cout << "Enter the row number you would like to be in (1-15): ";             
cin >> row_choice;
while (row_choice < 1 || row_choice > 15){
      cout << endl << "You have entered an invalid row number!" << endl;
      cout << "Enter the row number you would like to be in (1-15): ";
      cin >> row_choice;
      }

cout << "Enter the seat number you would like to have (1-30): ";
cin >> seat_choice;
while (seat_choice < 1 || seat_choice > 30){
      cout << endl << "You have entered an invalid seat number!" << endl;
      cout << "Enter the seat number you would like to have (1-30): ";
      cin >> seat_choice;
      }

cout << "Congratulations! You have picked your seat!" << endl << endl;
system ("pause");
system ("cls");
Show_Menu();
}

//**************************************************************
// Definition of the purchase_history function. Displays the   *
// current the total sum of all movie ticket purchases         *
//**************************************************************

void purchase_history(){         //Not finished
 system ("cls");
 system ("pause");
 system ("cls");
 Show_Menu();
}

//**************************************************************
// Definition of the quit function. Allows the user to quit the*
// program entirely                                            *
//**************************************************************

void quit(){
 update_file();
 exit(0);
 }

//**************************************************************
// Definition of the is_digit function. Designed to make it    *
// possible to enter only integers when asked for integers     *
//**************************************************************

void is_digit(int & input){      //Not working atm
 if (isdigit(input)){
     return;
     }
 if (isalpha(input)){
     cout << endl << "You have entered an invalid data type!" << endl;
     cout << "Enter a choice... (1-4): ";
     cin >> input;
     }
 if (isspace(input)){
     cout << endl << "You have entered an invalid data type!" << endl;
     cout << "Enter a choice... (1-4): ";
     cin >> input;
     }    
 }

//**************************************************************
// Definition of the update_file function. Designed to update  *
// the seating chart upon leaving the pick_seating function    *
//**************************************************************

void update_file(){  //Not finished

 //This function is supposed to
 //Update the seating chart
 //upon exit of the pick_seating function
 }

//**************************************************************
// Definition of the Admin_Menu function. Displays the         *
// administrator-based menu if user knows the code and password*
//**************************************************************

void Admin_Menu(){

  system ("cls");
  int choice = 0;

  cout << "Hello! This is the administrator version";
  cout << endl << "of the theatre program; mainly used for editing purposes." << endl << endl;
  cout << "Below is a list of options the administrator can choose from:" << endl << endl;
  cout << "1.\tEdit Seating Prices" << endl;
  cout << "2.\tEdit Seating" << endl;
  cout << "3.\tPurchase History" << endl;
  cout << "4.\tQuit to Original" << endl;
  cout << "5.\tQuit Program" << endl << endl;
  cout << "Enter a choice... (1-5): ";
  cin >> choice;

        while (choice < 1 || choice > 5){
        cout << endl << "You have entered an invalid choice!" << endl;
        cout << "Enter a choice... (1-5): ";
        cin >> choice;
        }

  switch (choice) {
         case 1:
              edit_seating_prices();

         case 2:
              edit_seating();

         case 3:
              purchase_history_admin();

         case 4:
              quit_to_original();

         case 5:
              quit();
         }
  }

//**************************************************************
// Definition of the edit_seating function. Administrator-only *
// function to edit the seating chart                          *
//**************************************************************

void edit_seating(){             //Not finished
 system ("cls");
 system ("pause");
 system ("cls");
 Admin_Menu();
 } 

//**************************************************************
// Definition of the edit_seating function. Administrator-only *
// function to edit the prices of the seats.                   *
// This will in turn, overwrite SeatPrices.txt                 *
//**************************************************************

void edit_seating_prices(){    //Not finished
 system ("cls");
 system ("pause");
 system ("cls");
 Admin_Menu();
 }

//**************************************************************
// Definition of the purchase_history_admin function.          *
// Administrator-only function designed to show admin the      *
// total sum of ticket sales... NOT EDITABLE                   *
//**************************************************************

void purchase_history_admin(){
 system ("cls");
 system ("pause");
 system ("cls");
 Admin_Menu();
 }

//**************************************************************
// Definition of the quit_to_original function. Administrator- *
// only function designed to return admin to original program  *
//**************************************************************

void quit_to_original(){
 system ("cls");
 Show_Menu();
 }

//**************************************************************
// Definition of the read_file function. Reads SeatPrices.txt  *
// and stores the pre-determined prices into a vector named    *
// prices.                                                     *
//**************************************************************

int readPrices(string myFile, vector<double>& vect) {

//input file
ifstream SeatPrices;                   

SeatPrices.open(myFile.c_str());

//if file cannot be found
if (!SeatPrices) 
cout << "Cannot find the file!" << endl;

for (int index = 0; index < vect.size(); index++){
    SeatPrices >> vect[index];   //Reading the file "SeatPrices.txt"
    }

SeatPrices.close();  //Closes the file
return 0;
}

//**************************************************************
// Definition of the readSeating function. Reads a text file   *
// with a seating chart in it.                                 *
//**************************************************************

int readSeating(char myFile, vector<char>& vect){           //Not EVEN CLOSE TO FINISHING

//input file
ifstream SeatingChart;
SeatingChart.open(myFile);

//if file cannot be found
if (!SeatingChart)
cout << "Cannot find the file!" << endl;

for (int index = 0; index < vect.size(); index++){
    SeatingChart >> vect[index];  //Reading the file "SeatingChart.txt"
    }

SeatingChart.close(); //Closes the file
return 0;
}

//**************************************************************
// Definition of the Title_Card function. Starts the program   *
// with a title card, showing a little introductory title      *
//**************************************************************

void Title_Card(){
 cout << endl << endl << endl << endl;
 cout << "\t\t" << "************************************************\n";
 cout << "\t\t" << "*               THEATER SEATING!               *\n";
 cout << "\t\t" << "*                                              *\n";
 cout << "\t\t" << "*     A program created by a team of three     *\n";
 cout << "\t\t" << "*     students to help small theaters sell     *\n";
 cout << "\t\t" << "*                 more tickets                 *\n";
 cout << "\t\t" << "*                                              *\n";
 cout << "\t\t" << "*              Team of Students:               *\n";
 cout << "\t\t" << "*                                              *\n";
 cout << "\t\t" << "*                *************                 *\n";
 cout << "\t\t" << "*                 ***********                  *\n";
 cout << "\t\t" << "*                *************                 *\n";
 cout << "\t\t" << "*                                              *\n";
 cout << "\t\t" << "************************************************\n";
 cout << endl << endl;
 system ("pause");
 system ("cls");
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:47:58.063

首先（*我认为这是你打算写的*）

```
int readSeating (char, vector<char>&); 
```

应该

```
int readSeating (char*, vector<char>&);
                    ^^^ 
```

期待`lvalue`第一个论点。这意味着它可能分配给它的东西。

但是，您将其称为

```
readSeating("SeatingChart.txt", seating); 
```

通过为第一个参数传递一个临时值。编译器想知道你不会为了让你临时通过而修改它。您可以通过声明类似的函数来告诉它您不会修改它。

```
int readSeating (const char*, vector<char>&);
                 ^^^^ 
```

* * *

同样适用

```
int readSeating(char myFile, vector<char>& vect) 
```

至

```
int readSeating(const char* myFile, vector<char>& vect) 
```

* * *

**我建议您应该继续将它们更改为`strings`.**

```
int readSeating (string, vector<char>&);
int readSeating(string myFile, vector<char>& vect) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:49:57.097

为你修好了。字符串文字（例如：“somestring”）属于“char const *”类型。它不能被视为一个字符。

```
/* 
* This is a program built by a team of students
* to help local movie theaters sell tickets
* 
* File: main.cpp
* Author(s):
*
* 
* Created on April 15, 2013, 11:10 AM
*/

#include <cstdlib>
#include <vector>
#include <string>
#include <fstream>
#include <iostream>
#include <cctype>
#include <iomanip>

using namespace std;

//Function Prototypes
void Title_Card();
void seating_prices();
void seating_chart();
void pick_seating();
void purchase_history();
void quit();
void update_file();
void Show_Menu();
void is_digit(int&);
void Admin_Menu();
void edit_seating_prices();
void edit_seating();
void quit_to_original();
void purchase_history_admin();

int readSeating (const char*, vector<char>&); //Reads SeatingChart.txt
int readPrices(string, vector<double>&); //Reads SeatingPrices.txt
vector<double> prices(15); //For SeatPrices.txt
vector<char> seating(450); //For SeatingChart.txt

//Actual Program
int main() {
Title_Card(); //Calls Title Page

readSeating("SeatingChart.txt", seating); //Reads SeatingChart.txt
readPrices("SeatPrices.txt", prices); //Reads SeatPrices.txt
Show_Menu(); //Shows Introductory Menu

system ("pause");
return 0;
}

//**************************************************************
// Definition of the ShowMenu function. Shows introductory menu*
// and controls where user ends up in the program.             *
//**************************************************************

void Show_Menu() {
int choice;
string password;

  cout << "Welcome to the our theater program! Made for a person" << endl;
  cout << "who is looking for seating, purchasing a ticket, and" << endl;
  cout << "searching for other miscellaneous things... We hope" << endl;
  cout << "you enjoy the program!" << endl << endl;
  cout << "Below is a list of options the user can choose from:" << endl << endl;
  cout << "1.\tSeating Prices" << endl;
  cout << "2.\tPick Seating" << endl;
  cout << "3.\tPurchase History" << endl;
  cout << "4.\tQuit" << endl << endl;
  cout << "Enter a choice... (1-4): ";
  cin >> choice;

  //Secret Administrator Access
  if (choice == 219){
     system ("cls");
     cout << "Enter the administrator password: ";
     cin >> password;

     if (password == "sterilegorilla")
        Admin_Menu();
     else {
        system ("cls");
        Show_Menu();
          }
  } 

  is_digit(choice);//is_digit function doesn't work atm

  while (choice < 1 || choice > 4){
        cout << endl << "You have entered an invalid choice!" << endl;
        cout << "Enter a choice... (1-4): ";
        cin >> choice;
        is_digit(choice); //is_digit function doesn't work atm
            if (choice == 219){
               system ("cls");
               cout << "Enter the administrator password: ";
               cin >> password;

                   if (password == "sterilegorilla")
                      Admin_Menu(); 

                      else {
                           system ("cls");
                           Show_Menu();
                           }     
                           }
     }

  switch (choice) {
         case 1:
              seating_prices();

         case 2:
              pick_seating();

         case 3:
              purchase_history();

         case 4:
              quit();
              }

}

//**************************************************************
// Definition of the seating_prices function. Displays to the  *
// user, SeatPrices.txt                                        *
//**************************************************************

void seating_prices(){
system ("cls");
cout << "The Current Seating Prices Are:" << endl << endl;
for (int count = 0; count < 4; count++){
cout << " " << setprecision(4) << showpoint <<  prices[count] << " | Row " << (count + 1) <<                         endl;
}
for (int count = 4; count < prices.size(); count++){
cout << "  " << setprecision(3) << showpoint <<  prices[count] << " | Row " << (count + 1) << endl;
}
cout << endl;
system ("pause");
system ("cls");
Show_Menu();
}

//**************************************************************
// Definition of the pick_seating function. Displays the       *
// current seating chart and allows the user to pick their seat*
//**************************************************************

void pick_seating(){  //Not Finished
system ("cls");
int row_choice;
int seat_choice;

cout << "The Current Seating Chart Is:" << endl;

 //Display Seating Chart

 //Picking your seat
cout << "Enter the row number you would like to be in (1-15): ";             
cin >> row_choice;
while (row_choice < 1 || row_choice > 15){
      cout << endl << "You have entered an invalid row number!" << endl;
      cout << "Enter the row number you would like to be in (1-15): ";
      cin >> row_choice;
      }

cout << "Enter the seat number you would like to have (1-30): ";
cin >> seat_choice;
while (seat_choice < 1 || seat_choice > 30){
      cout << endl << "You have entered an invalid seat number!" << endl;
      cout << "Enter the seat number you would like to have (1-30): ";
      cin >> seat_choice;
      }

cout << "Congratulations! You have picked your seat!" << endl << endl;
system ("pause");
system ("cls");
Show_Menu();
}

//**************************************************************
// Definition of the purchase_history function. Displays the   *
// current the total sum of all movie ticket purchases         *
//**************************************************************

void purchase_history(){         //Not finished
 system ("cls");
 system ("pause");
 system ("cls");
 Show_Menu();
}

//**************************************************************
// Definition of the quit function. Allows the user to quit the*
// program entirely                                            *
//**************************************************************

void quit(){
 update_file();
 exit(0);
 }

//**************************************************************
// Definition of the is_digit function. Designed to make it    *
// possible to enter only integers when asked for integers     *
//**************************************************************

void is_digit(int & input){      //Not working atm
 if (isdigit(input)){
     return;
     }
 if (isalpha(input)){
     cout << endl << "You have entered an invalid data type!" << endl;
     cout << "Enter a choice... (1-4): ";
     cin >> input;
     }
 if (isspace(input)){
     cout << endl << "You have entered an invalid data type!" << endl;
     cout << "Enter a choice... (1-4): ";
     cin >> input;
     }    
 }

//**************************************************************
// Definition of the update_file function. Designed to update  *
// the seating chart upon leaving the pick_seating function    *
//**************************************************************

void update_file(){  //Not finished

 //This function is supposed to
 //Update the seating chart
 //upon exit of the pick_seating function
 }

//**************************************************************
// Definition of the Admin_Menu function. Displays the         *
// administrator-based menu if user knows the code and password*
//**************************************************************

void Admin_Menu(){

  system ("cls");
  int choice = 0;

  cout << "Hello! This is the administrator version";
  cout << endl << "of the theatre program; mainly used for editing purposes." << endl << endl;
  cout << "Below is a list of options the administrator can choose from:" << endl << endl;
  cout << "1.\tEdit Seating Prices" << endl;
  cout << "2.\tEdit Seating" << endl;
  cout << "3.\tPurchase History" << endl;
  cout << "4.\tQuit to Original" << endl;
  cout << "5.\tQuit Program" << endl << endl;
  cout << "Enter a choice... (1-5): ";
  cin >> choice;

        while (choice < 1 || choice > 5){
        cout << endl << "You have entered an invalid choice!" << endl;
        cout << "Enter a choice... (1-5): ";
        cin >> choice;
        }

  switch (choice) {
         case 1:
              edit_seating_prices();

         case 2:
              edit_seating();

         case 3:
              purchase_history_admin();

         case 4:
              quit_to_original();

         case 5:
              quit();
         }
  }

//**************************************************************
// Definition of the edit_seating function. Administrator-only *
// function to edit the seating chart                          *
//**************************************************************

void edit_seating(){             //Not finished
 system ("cls");
 system ("pause");
 system ("cls");
 Admin_Menu();
 } 

//**************************************************************
// Definition of the edit_seating function. Administrator-only *
// function to edit the prices of the seats.                   *
// This will in turn, overwrite SeatPrices.txt                 *
//**************************************************************

void edit_seating_prices(){    //Not finished
 system ("cls");
 system ("pause");
 system ("cls");
 Admin_Menu();
 }

//**************************************************************
// Definition of the purchase_history_admin function.          *
// Administrator-only function designed to show admin the      *
// total sum of ticket sales... NOT EDITABLE                   *
//**************************************************************

void purchase_history_admin(){
 system ("cls");
 system ("pause");
 system ("cls");
 Admin_Menu();
 }

//**************************************************************
// Definition of the quit_to_original function. Administrator- *
// only function designed to return admin to original program  *
//**************************************************************

void quit_to_original(){
 system ("cls");
 Show_Menu();
 }

//**************************************************************
// Definition of the read_file function. Reads SeatPrices.txt  *
// and stores the pre-determined prices into a vector named    *
// prices.                                                     *
//**************************************************************

int readPrices(string myFile, vector<double>& vect) {

//input file
ifstream SeatPrices;                   

SeatPrices.open(myFile.c_str());

//if file cannot be found
if (!SeatPrices) 
cout << "Cannot find the file!" << endl;

for (int index = 0; index < vect.size(); index++){
    SeatPrices >> vect[index];   //Reading the file "SeatPrices.txt"
    }

SeatPrices.close();  //Closes the file
return 0;
}

//**************************************************************
// Definition of the readSeating function. Reads a text file   *
// with a seating chart in it.                                 *
//**************************************************************

int readSeating(const char* myFile, vector<char>& vect){           //Not EVEN CLOSE TO FINISHING

//input file
ifstream SeatingChart;
SeatingChart.open(myFile);

//if file cannot be found
if (!SeatingChart)
cout << "Cannot find the file!" << endl;

for (int index = 0; index < vect.size(); index++){
    SeatingChart >> vect[index];  //Reading the file "SeatingChart.txt"
    }

SeatingChart.close(); //Closes the file
return 0;
}

//**************************************************************
// Definition of the Title_Card function. Starts the program   *
// with a title card, showing a little introductory title      *
//**************************************************************

void Title_Card(){
 cout << endl << endl << endl << endl;
 cout << "\t\t" << "************************************************\n";
 cout << "\t\t" << "*               THEATER SEATING!               *\n";
 cout << "\t\t" << "*                                              *\n";
 cout << "\t\t" << "*     A program created by a team of three     *\n";
 cout << "\t\t" << "*     students to help small theaters sell     *\n";
 cout << "\t\t" << "*                 more tickets                 *\n";
 cout << "\t\t" << "*                                              *\n";
 cout << "\t\t" << "*              Team of Students:               *\n";
 cout << "\t\t" << "*                                              *\n";
 cout << "\t\t" << "*                *************                 *\n";
 cout << "\t\t" << "*                 ***********                  *\n";
 cout << "\t\t" << "*                *************                 *\n";
 cout << "\t\t" << "*                                              *\n";
 cout << "\t\t" << "************************************************\n";
 cout << endl << endl;
 system ("pause");
 system ("cls");
 } 
```

# mysql - mysql 在执行触发器时返回一个空的结果集

> ID：16099734
> 
> 赞同：0
> 
> 时间：2013-04-19T07:43:22.587
> 
> 标签：mysql, triggers

我正在尝试创建触发器，但我不知道为什么会收到此消息。我这样做是对的还是我做错了什么？当我尝试运行触发器时，我收到一条消息

```
# MySQL returned an empty result set (i.e. zero rows). 
```

这是我的触发器

```
 DROP TRIGGER IF EXISTS admin.catch_insert//

    CREATE TRIGGER admin.catch_insert BEFORE INSERT ON adminpanel.users
    FOR EACH ROW
    BEGIN
    INSERT INTO admin.usertrigger(cmd, time, cmd_user, email, phone_number) VALUES("INSERT", NOW(), CURRENT_USER(), new.email, new.phone_number);
    END
// 
```

是什么原因造成的，我做错了什么吗？有人可以向我解释我能做什么或我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:44:58.167

没有任何错误。

您收到的消息是成功 INSERT 语句后返回的标准消息。（它不会向您返回任何行，它只是在您的表中添加一个）

# c# - Windows 服务通信，套接字，c#

> ID：16099737
> 
> 赞同：1
> 
> 时间：2013-04-19T07:43:27.540
> 
> 标签：c#, windows, sockets, service

我正在编写需要安装在远程主机上的服务器端应用程序和 Windows 服务，该服务将 CPU 使用率返回给服务器端应用程序 - 这不是服务器端应用程序在远程主机上部署服务的问题。- 也，不是问题

**问题：** 但是当我不想硬编码IP地址时，如何在两者之间建立套接字连接？（为了可扩展性） - 我需要使用多播还是有一些迂回的方式来做到这一点？除了使用套接字之外，还有其他解决方案吗？- 我是编写 Windows 服务的新手。

我需要帮助弄清楚如何在不硬编码 IP 地址的情况下在服务器和服务之间进行通信。

先感谢您。

**我的解决方案：** 我创建了一个 Windows 服务，它读取一个带有服务器应用程序的 IP 和端口的 xml 文件。所以当我部署我的客户端应用程序时，我还创建了一个包含网络信息的 xml 文件。问候亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:48:47.707

现在很多通信平台都使用网络发现；有一篇关于 codeproject 的文章详细介绍了使用网络发现。

> 问题是，我不知道服务器运行在什么机器名上，事实上我希望它是灵活的，并且可以由用户选择。

似乎与[http://www.codeproject.com/Articles/16113/Retreiving-a-list-of-network-computer-names-using有关](http://www.codeproject.com/Articles/16113/Retreiving-a-list-of-network-computer-names-using)

你有没有想过使用 WCF？

[http://msdn.microsoft.com/en-us/library/ms731082.aspx](http://msdn.microsoft.com/en-us/library/ms731082.aspx)

关于多播，您可以让 WCF 服务器多播宣布它在网络上的可用性；请参阅[http://msdn.microsoft.com/en-us/library/dd456782.aspx](http://msdn.microsoft.com/en-us/library/dd456782.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T05:58:10.827

另一种解决方案可能是将服务创建为带有参数（端点 IP 地址）的控制台应用程序，然后将其与远程主机上的参数一起部署

# javascript - 逆向工程正在调用哪个 javascript/jquery 函数

> ID：16099738
> 
> 赞同：3
> 
> 时间：2013-04-19T07:43:28.530
> 
> 标签：javascript, jquery, html, reverse-engineering

我需要帮助确定在站点上进行客户端验证的内容。

网站上有一个 Web 表单，它在标记为电子邮件的字段（名为 Question2）上进行一些客户端验证。这是页面：[http](http://www.home-energy-analytics.co.uk/concrete5.6.1/index.php?cID=132) ://www.home-energy-analytics.co.uk/concrete5.6.1/index.php?cID=132 。

如果您将“1”添加到电子邮件字段，然后将焦点更改为另一个元素，您将看到边框变为红色。如果您尝试提交表单，客户端会阻止它，并显示一个看起来像绝对定位的 div 并带有文本“请输入电子邮件地址”的内容。似乎无法使用 firefox 或 firebug 检查此元素。我已经检查了所有内联脚本和单独文件中的脚本，但看不到这些验证在做什么。

看起来可能有一个脚本由客户端使用*ccm-base*脚本中的 ccm_addHeaderItem 函数动态创建，但我看不到该函数是如何被调用的，以便计算出任何动态创建的脚本的 URL。

你能找到进行这些验证的函数吗？

请注意，由于这是一个具体的网站，我在具体的论坛上询问过但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:10:26.743

This is a HTML5 feature. It will be implemented by browser default behavior. Check the example here [http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_input_type_email](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_input_type_email) This behaviour can be seen anywhere for a input field with type "email"

# python - 通过 try 和 except 使用属性的正确方法

> ID：16099742
> 
> 赞同：10
> 
> 时间：2013-04-19T07:43:43.087
> 
> 标签：python, properties

我有使用`@property`装饰器设置属性的类。它们使用其中的 try 和 except 子句充当 getter 和 setter。如果未设置属性，它将从数据库中获取数据并使用它来实例化来自其他类的对象。我试图使示例简短，但是用于实例化属性对象的代码对于每个属性都略有不同。它们的共同点是一开始的 try-except。

```
class SubClass(TopClass):

    @property
    def thing(self):
        try:
            return self._thing
        except AttributeError:
            # We don't have any thing yet
            pass
        thing = get_some_thing_from_db('thing')
        if not thing:
            raise AttributeError()
        self._thing = TheThing(thing)
        return self._thing

    @property
    def another_thing(self):
        try:
            return self._another_thing
        except AttributeError:
            # We don't have things like this yet
            pass
        another_thing = get_some_thing_from_db('another') 
        if not another_thing:
            raise AttributeError()
        self._another_thing = AnotherThing(another_thing)
        return self._another_thing

    ...etc...

    @property
    def one_more_thing(self):
        try:
            return self._one_more_thing
        except AttributeError:
            # We don't have this thing yet
            pass
        one_thing = get_some_thing_from_db('one') 
        if not one_thing:
            raise AttributeError()
        self._one_more_thing = OneThing(one_thing)
        return self._one_more_thing 
```

我的问题：这是一种正确的（例如pythonic）做事方式吗？对我来说，在所有内容之上添加 try-except-segment 似乎有点尴尬。另一方面，它使代码保持简短。或者有没有更好的方法来定义属性？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-19T07:53:00.297

只要您至少使用 Python 3.2，请使用`functools.lru_cache()`装饰器。

```
import functools
class SubClass(TopClass):

    @property
    @functools.lru_cache()
    def thing(self):
        thing = get_some_thing_from_db('thing')
        if not thing:
            raise AttributeError()
        return TheThing(thing) 
```

一个可快速运行的示例：

```
>>> import functools
>>> class C:
    @property
    @functools.lru_cache()
    def foo(self):
        print("Called foo")
        return 42

>>> c = C()
>>> c.foo
Called foo
42
>>> c.foo
42 
```

如果你有很多这些，你可以组合装饰器：

```
>>> def lazy_property(f):
    return property(functools.lru_cache()(f))

>>> class C:
    @lazy_property
    def foo(self):
        print("Called foo")
        return 42

>>> c = C()
>>> c.foo
Called foo
42
>>> c.foo
42 
```

[如果您仍在使用旧版本的 Python，则在ActiveState](http://code.activestate.com/recipes/578078-py26-and-py30-backport-of-python-33s-lru-cache/)上有一个功能齐全的 lru_cache 反向移植，尽管在这种情况下，您在调用它时没有传递任何参数，您可能可以用更简单的东西替换它。

@YAmikep 询问如何访问`cache_info()`. `lru_cache`有点乱，不过还是可以通过属性对象来访问的：

```
>>> C.foo.fget.cache_info()
CacheInfo(hits=0, misses=1, maxsize=128, currsize=1) 
```

# mysql - 如何查询mysql匹配必须包含a和b布尔值

> ID：16099749
> 
> 赞同：1
> 
> 时间：2013-04-19T07:44:05.383
> 
> 标签：mysql

我这里有问题。我想搜索该字段必须包含关键字的两个单词，例如我想搜索“Bridgs 185”假设我有一个这样的表

```
id |  NamaBarang
    -----------------------------
    1    Bridgs TURANZA 185
    2    Bridgs POTENZA 185
    3    Bridgs TURANZA 175
    4    Bridgs B250-B250 
```

我有查询是这样的

```
SELECT namaBarang FROM `barang` WHERE match(namaBarang) AGAINST ('+Bridgs* +185*') 
```

我也尝试

```
SELECT namaBarang FROM `barang` WHERE match(namaBarang) AGAINST ('+Bridgs +185') 
```

但它总是返回之前的所有表

我的问题是..当我使用关键字“Bridgs 185”搜索时，如何获得必须包含“Bridgs”和“185”的结果，结果应该是这样的..

```
id |  NamaBarang
-----------------------------
1    Bridgs TURANZA 185
2    Bridgs POTENZA 185 
```

之前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:48:27.277

尝试

```
where namaBarang like 'Bridgs%185' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:14:44.980

试试下面：

```
SELECT namaBarang FROM `barang` 
WHERE match(namaBarang) AGAINST ('+Bridgs +185' IN BOOLEAN MODE) 
```

# c++ - 客户端/服务器 C++ 之间的通信问题

> ID：16099750
> 
> 赞同：0
> 
> 时间：2013-04-19T07:44:06.277
> 
> 标签：c++, c, sockets, client-server, chat

我有一个客户端（c++）/服务器（c）程序，目前我很难在它们之间进行通信（我看不到客户端在服务器上说什么，反之亦然）。我也在尝试让这个项目多线程，或者至少接受来自客户端的多个连接。非常感谢所有帮助是与聊天有关的代码，您可以在[此处完整查看](http://pastebin.com/AQb6rfYX)

**客户：**

```
 recv(sockfd , server_reply , 2000 , 0);

    puts("Enter message :"); // asking for password
    scanf("%s" , message);
    send(sockfd , message , strlen(message) , 0);

    recv(sockfd, server_reply, 2000, 0);
    //Receive a reply from the server
    if( recv(sockfd , server_reply , 2000 , 0) < 0)
    {
        puts("recv failed");
    }

while( (read_size = recv(nsockfd , server_reply , 4000 , 0)) != 0)
  {

    puts("Enter message :"); // asking for password
    scanf("%s" , message);
    send(sockfd , message , strlen(message) , 0);

    recv(sockfd, server_reply, 2000, 0);

  } 
```

服务器

```
 char client_address[90];
    sprintf(client_address, "Welcome %s", inet_ntoa(addr_remote.sin_addr));

    char welc_msg[90] = "Welcome %s";
    char friend_msg[50] = "Hello little friend \n";
    char username[30] = "Enter user:";
    char pass[30] = "Enter pass: ";

    write(nsockfd , client_address , strlen(client_address)); // attempting to send client "Hello, (their ip address)"
    read_size = recv(nsockfd , client_message , 4000 , 0);

    read_size = recv(nsockfd , client_message , 4000 , 0);
printf( "%s", client_message);
printf( "\n");

//Receive a message from client
while( 1 )  //    while( (read_size = recv(nsockfd , client_message , 4000 , 0)) != 0)
{
    //clearing buffer
    memset(client_message, 0, sizeof(client_message));

    //taking received message and printing it
    read_size = recv(nsockfd , client_message , 4000 , 0);
        printf( "%s", client_message);
        printf( "\n");

    //Send the message back to client
   // write(nsockfd , server_message , strlen(server_message));

    if (strcmp(client_message , "Hello")) // condition for project
    {
        write(nsockfd, friend_msg, strlen(friend_msg));
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:00:22.327

当您调用系统函数时，请始终检查错误！在相关的情况下，还要检查部分写入/接收。例如，当您有此行时：

```
send(sockfd , message , strlen(message) , 0); 
```

你应该有这样的东西（未经测试，所以要自己考虑）：

（编辑：删除了不必要的重新发送循环以简化代码。如果你想看到它，请参阅编辑历史......）

```
int msglen = strlen(message);
fprintf(stderr, "debug: about to send %d bytes", msglen);

int sent = send(sockfd , message , msglen , 0);

if (sent == -1) { // for each function, read docs for error result
    perror("send message");
    // do some error handling
} else if (sent < msglen) {
    fprintf(stderr, "debug: partial send %d/%d\n", sent, msglen);
    // do some disconnect handling
} 
```

一旦你有正确的错误报告，如果你不能解决你的问题，然后用这个调试/错误信息更新问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:59:30.537

试试这个代码：Server.c

```
while (1) {
    //---- ACCEPT connection ------------------------------------
    sa = accept(s, 0, 0);                  // block for connection request  
    if (sa < 0) {
        printf("accept error %ld ", WSAGetLastError() ); 
        WSACleanup();
        return false;
    }
    else {
        printf("connection accepted");
    }
/*  gets(buf);
    bytesSent = send( s, buf, 10, 0 ); 
    printf( "Bytes Sent: %ld \n", bytesSent );*/

    //------------------------------------------------------------
    // Socket is now set up and bound. Wait for connection and process it. 

    //---- RECV bytes --------------------------------------------
    bytesRecv = recv( sa, recvbuf, 10, 0 );
    err = WSAGetLastError( );// 10057 = A request to send or receive data was disallowed because the socket is not connected and (when sending on a datagram socket using a sendto call) 
    if ( bytesRecv == 0 || bytesRecv == WSAECONNRESET ) {
      printf( "Connection Closed.\n");
      WSACleanup();
    }
    printf( "\nBytes Recv from Client: %s \n ", recvbuf );

    //-------------------------------------------------------------
//  if(bytesRecv != 0 || bytesRecv != WSAECONNRESET){

    bytesSent = send( sa, buf, 10, 0 ); 
    if(bytesSent == -1)
    {
        //break;
        puts("Error\n");
    }
    else
    {
    printf( "Bytes Sent: %ld \n", bytesSent );
    Sleep(1000);
    }
    closesocket( sa );
    } 
```

客户端.c

```
while(1) {
    //--- INITIALIZATION -----------------------------------
    wVersionRequested = MAKEWORD( 1, 1 );
    err = WSAStartup( wVersionRequested, &wsaData );

    if ( err != 0 ) {
        printf("WSAStartup error %ld", WSAGetLastError() );
        WSACleanup();
        return false;
    }
    //------------------------------------------------------

    //---- Build address structure to bind to socket.--------  
    target.sin_family = AF_INET; // address family Internet
    target.sin_port = htons (SERVER_PORT); //Port to connect on
    target.sin_addr.s_addr = inet_addr (IPAddress); //Target IP
    //--------------------------------------------------------

    // ---- create SOCKET--------------------------------------
    s = socket (AF_INET, SOCK_STREAM, IPPROTO_TCP); //Create socket
    if (s == INVALID_SOCKET)
    {
        printf("socket error %ld" , WSAGetLastError() );
        WSACleanup();
        return false; //Couldn't create the socket
    }  
    //---------------------------------------------------------

    //---- try CONNECT -----------------------------------------
    if (connect(s, (SOCKADDR *)&target, sizeof(target)) == SOCKET_ERROR)
    {
        printf("connect error %ld", WSAGetLastError() );
        WSACleanup();
        return false; //Couldn't connect
    }
    //-----------------------------------------------------------

    //---- SEND bytes -------------------------------------------

    bytesSent = send( s, buf, 10, 0 );
    printf( "Bytes Sent: %ld \n", bytesSent );
    Sleep(1000);

    if((bytesRecv = recv( s, recvbuf, 10, 0 )) == SOCKET_ERROR)
    {
        puts("Socket Error");
        err = WSAGetLastError( );// 10057 = A request to send or receive data was disallowed because the socket is not connected and (when sending on a datagram socket using a sendto call) 
    }
    else
    {
    if ( bytesRecv == 0 || bytesRecv == WSAECONNRESET ) {
      printf( "Connection Closed.\n");
      WSACleanup();
    }
    printf( "\nBytes Recv from Server: %s \n ", recvbuf );
    //closesocket( sa );
    }
    //------------------------------------------------------------
    closesocket( s );
    WSACleanup();
    } 
```

`The above code strictly for Windows.`

# ios - 尝试使用 alpha 设置颜色崩溃

> ID：16099751
> 
> 赞同：0
> 
> 时间：2013-04-19T07:44:10.197
> 
> 标签：ios, core-graphics, exc-bad-access, alpha, uicolor

我正在尝试将填充设置`UIColor`为`alpha`

```
glassColor = [[UIColor lightGrayColor] colorWithAlphaComponent:0.3].CGColor;
CGContextSetFillColorWithColor(context, glassColor);
... 
```

第二行与`EXC_BAD_ACCESS`.

关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T09:25:41.820

本质上，您的问题是 ARC 正在释放 UIColor，因为它没有被使用。您需要保留 CGColor 结构。您可以通过以下方式进行。

```
 CGColorRef aColorRef = CGColorRetain([[UIColor colorWithWhite:0.82 alpha:1.0] CGColor] );
 CGContextSetFillColorWithColor(context, aColorRef); 
```

使用完毕后不要忘记释放它：

```
 CGColorRelease(aColorRef); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T08:19:34.273

在 ARC 中尝试使用

```
 UIColor *glasscolor = [UIColor colorWithRed: red 
                                   green: green 
                                    blue: blue 
                                   alpha: your alpha value];// 
       [view setBackgroundColor:glasscolor]; 
```

例如非常浅的灰色

```
 UIColor *glasscolor = [UIColor colorWithRed:0.945 green:0.945 blue:0.945 alpha:1.0]
        [view setBackgroundColor:glasscolor]; 
```

# session - 会话或 cookie 混淆

> ID：16099752
> 
> 赞同：19
> 
> 时间：2013-04-19T07:44:16.523
> 
> 标签：session, servlets, cookies

我在一些网站上看到用户登录他们的帐户然后关闭浏览器。

关闭并重新打开浏览器后，他们的帐户仍然登录。

但是有些网站，不能那样做。

我很困惑它被认为是会话还是cookie？

如果我希望我的网站以这样的方式登录，是否必须设置`session.setMaxInactiveInterval()`或`cookie.setMaxAge()`？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-19T14:43:34.373

***此答案存在严重缺陷，请参阅评论。***

* * *

您的问题是关于*会话跟踪*。

**[第 1 部分]：会话对象**

HTTP 请求是单独处理的，因此为了在每个请求之间保留信息（例如，有关用户的信息），必须在服务器端创建一个*会话对象。*

有些网站根本不需要会话。用户无法修改任何内容的网站不必管理会话（例如，在线简历）。在这样的网站上，您不需要任何 cookie 或会话。

***创建一个会话：***

在 servlet 中，使用`request.getSession(true)`HttpServletRequest 对象中的方法创建一个新的 HttpSession 对象。请注意，如果您使用`request.getSession(false)`，如果尚未创建会话，则将返回*null 。*[查看此答案以获取更多详细信息](https://stackoverflow.com/questions/595872/under-what-conditions-is-a-jsessionid-created)。

***设置/获取属性：***

会话的目的是在每个请求之间保持服务器端的信息。例如，保留用户名：

```
session.setAttribute("name","MAGLEFF");
// Cast
String name = (String) session.getAttribute("name"); 
```

***销毁会话：***

如果长时间保持不活动状态，会话将自动销毁。[查看此答案以获取更多详细信息](https://stackoverflow.com/questions/10893727/how-to-properly-logout-of-a-java-ee-6-web-application-after-logging-in)。但是您可以手动强制销毁会话，例如在注销操作的情况下：

```
HttpSession session = request.getSession(true); 
session.invalidate(); 
```

**[第 2 部分]：所以...加入黑暗面，我们有 COOKIES 吗？**

饼干来了。

***JSESSIONID：***

*每次*使用`request.getSession()`. _ 为什么？因为在服务器端创建的每个会话都有一个 ID。除非您没有正确的 ID，否则您无法访问其他用户的会话。这个 ID 保存在 JSESSIONID cookie 中，并允许用户找到他的信息。[查看此答案以获取更多详细信息](https://stackoverflow.com/questions/10570043/where-is-jsessionid-stored-javaee)！

***JSESSIONID 什么时候被删除？***

JSESSIONID 没有过期日期：它是一个*会话 cookie*。与所有会话 cookie 一样，它会在浏览器关闭时被删除。如果您使用基本的 JSESSIONID 机制，那么在您关闭并重新打开浏览器后，会话将变得无法访问，因为 JSESSIONID cookie 已被删除。

请注意，客户端无法访问会话，但仍在服务器端运行。设置*MaxInactiveInterval*允许服务器在会话不活动时间过长时自动使会话无效。

***JSESSIONID的邪恶破坏***

只是为了好玩，有一天我在一个项目中发现了这段代码。它用于通过使用 javascript 删除 JSESSIONID cookie 来使会话无效：

```
<SCRIPT language="JavaScript" type="text/javascript">

    function delete_cookie( check_name ) {
        // first we'll split this cookie up into name/value pairs
        // note: document.cookie only returns name=value, not the other components
        var a_all_cookies = document.cookie.split( ';' );
        var a_temp_cookie = '';
        var cookie_name = '';
        var cookie_value = '';
        var b_cookie_found = false; // set boolean t/f default f
        // var check_name = 'JSESSIONID';
        var path = null;

        for ( i = 0; i < a_all_cookies.length; i++ )
        {
            // now we'll split apart each name=value pair
            a_temp_cookie = a_all_cookies[i].split( '=' );
            // and trim left/right whitespace while we're at it
            cookie_name = a_temp_cookie[0].replace(/^\s+|\s+$/g, '');
            // alert (cookie_name);

            // if the extracted name matches passed check_name
            if ( cookie_name.indexOf(check_name) > -1 )
            {
                b_cookie_found = true;
                // we need to handle case where cookie has no value but exists (no = sign, that is):
                if ( a_temp_cookie.length > 1 )
                {
                    cookie_value = unescape( a_temp_cookie[1].replace(/^\s+|\s+$/g, '') );
                    document.cookie = cookie_name + "=" + cookie_value +
                    ";path=/" +
                    ";expires=Thu, 01-Jan-1970 00:00:01 GMT";
                    // alert("cookie deleted " + cookie_name);
                }
            }
            a_temp_cookie = null;
            cookie_name = '';
        }
        return true;
    }
    // DESTROY
    delete_cookie("JSESSIONID");

</SCRIPT> 
```

[再看看这个答案](https://stackoverflow.com/questions/10570043/where-is-jsessionid-stored-javaee)。使用 JavaScript，可以读取、修改 JSESSIONID，使其会话丢失或被劫持。

**[第 3 部分]：关闭浏览器后保持会话**

> 关闭并重新打开浏览器后，他们的帐户仍然登录。但有些网站，不能这样做。我很困惑它被认为是会话还是cookie？

是饼干。

我们看到，当 Web 浏览器删除了 JSESSIONID 会话 cookie 时，服务器端的会话对象就丢失了。如果没有正确的 ID，就无法再次访问它。

> 如果我希望我的网站以这样的方式登录，是否必须设置 session.setMaxInactiveInterval() 或 cookie.setMaxAge()？

我们还看到这`session.setMaxInactiveInterval()`是为了防止无限期地运行丢失的会话。JSESSIONID cookie`cookie.setMaxAge()`也不会将我们带到任何地方。

**使用带有会话 ID 的持久 cookie：**

在阅读了以下主题后，我来到了这个解决方案：

*   BalusC[在用户登录Web应用程序时如何实现“保持登录”](https://stackoverflow.com/questions/5082846/java-ee-6-how-to-implement-stay-logged-in-when-user-login-in-to-the-web-appli/5083809#5083809)
*   [http://simple.souther.us/not-so-simple.html](http://simple.souther.us/not-so-simple.html) by Ben Souther；本@souther.us

主要思想是在一个 Map 中注册用户的会话，放入 servlet 上下文中。每次创建会话时，都会以 JSESSIONID 值为 key 将其添加到 Map 中；还会创建一个持久 cookie 来记住 JSESSIONID 值，以便在 JSESSIONID cookie 被销毁后找到会话。

当您关闭 Web 浏览器时，JSESSIONID 将被销毁。但是所有 HttpSession 对象地址都保存在服务器端的 Map 中，您可以使用保存在持久 cookie 中的值访问正确的会话。

首先，在您的 web.xml 部署描述符中添加两个侦听器。

```
<listener>
    <listener-class>
        fr.hbonjour.strutsapp.listeners.CustomServletContextListener
    </listener-class>
</listener>

<listener>
    <listener-class>
        fr.hbonjour.strutsapp.listeners.CustomHttpSessionListener
    </listener-class>
</listener> 
```

CustomServletContextListener 在上下文初始化时创建一个映射。此地图将注册用户在此应用程序上创建的所有会话。

```
/**
 * Instanciates a HashMap for holding references to session objects, and
 * binds it to context scope.
 * Also instanciates the mock database (UserDB) and binds it to 
 * context scope.
 * @author Ben Souther; ben@souther.us
 * @since Sun May  8 18:57:10 EDT 2005
 */
public class CustomServletContextListener implements ServletContextListener{

    public void contextInitialized(ServletContextEvent event){
        ServletContext context = event.getServletContext();

        //
        // instanciate a map to store references to all the active
        // sessions and bind it to context scope.
        //
        HashMap activeUsers = new HashMap();
        context.setAttribute("activeUsers", activeUsers);
    }

    /**
     * Needed for the ServletContextListener interface.
     */
    public void contextDestroyed(ServletContextEvent event){
        // To overcome the problem with losing the session references
        // during server restarts, put code here to serialize the
        // activeUsers HashMap.  Then put code in the contextInitialized
        // method that reads and reloads it if it exists...
    }
} 
```

CustomHttpSessionListener 在创建时会将会话放入 activeUsers 映射中。

```
/**
 * Listens for session events and adds or removes references to 
 * to the context scoped HashMap accordingly.
 * @author Ben Souther; ben@souther.us
 * @since Sun May  8 18:57:10 EDT 2005
 */
public class CustomHttpSessionListener implements HttpSessionListener{

    public void init(ServletConfig config){
    }

    /**
     * Adds sessions to the context scoped HashMap when they begin.
     */
    public void sessionCreated(HttpSessionEvent event){
        HttpSession    session = event.getSession();
        ServletContext context = session.getServletContext();
        HashMap<String, HttpSession> activeUsers =  (HashMap<String, HttpSession>) context.getAttribute("activeUsers");

        activeUsers.put(session.getId(), session);
        context.setAttribute("activeUsers", activeUsers);
    }

    /**
     * Removes sessions from the context scoped HashMap when they expire
     * or are invalidated.
     */
    public void sessionDestroyed(HttpSessionEvent event){
        HttpSession    session = event.getSession();
        ServletContext context = session.getServletContext();
        HashMap<String, HttpSession> activeUsers = (HashMap<String, HttpSession>)context.getAttribute("activeUsers");
        activeUsers.remove(session.getId());
    }

} 
```

使用基本表单按名称/密码测试用户身份验证。此 login.jsp 表单仅用于测试。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title><bean:message key="formulaire1Title" /></title>
    </head>
    <body>
        <form action="login.go" method="get">
            <input type="text" name="username" />
            <input type="password" name="password" />
            <input type="submit" />
        </form>
    </body>
</html> 
```

我们去吧。当用户不在会话中时，此 java servlet 将转发到登录页面，并在他处于会话时转发到另一个页面。它仅用于测试持久会话！

```
public class Servlet2 extends AbstractServlet {

    @Override
    protected void doGet(HttpServletRequest pRequest,
            HttpServletResponse pResponse) throws IOException, ServletException {
        String username = (String) pRequest.getParameter("username");
        String password = (String) pRequest.getParameter("password");
        // Session Object
        HttpSession l_session = null;

        String l_sessionCookieId = getCookieValue(pRequest, "JSESSIONID");
        String l_persistentCookieId = getCookieValue(pRequest, "MY_SESSION_COOKIE");

        // If a session cookie has been created
        if (l_sessionCookieId != null)
        {
            // If there isn't already a persistent session cookie
            if (l_persistentCookieId == null)
            {
                addCookie(pResponse, "MY_SESSION_COOKIE", l_sessionCookieId, 1800);
            }
        }
        // If a persistent session cookie has been created
        if (l_persistentCookieId != null)
        {
            HashMap<String, HttpSession> l_activeUsers = (HashMap<String, HttpSession>) pRequest.getServletContext().getAttribute("activeUsers");
            // Get the existing session
            l_session = l_activeUsers.get(l_persistentCookieId);
        }
        // Otherwise a session has not been created
        if (l_session == null)
        {
                    // Create a new session
            l_session = pRequest.getSession();
        }

            //If the user info is in session, move forward to another page
        String forward = "/pages/displayUserInfo.jsp";

        //Get the user
        User user = (User) l_session.getAttribute("user");

        //If there's no user
        if (user == null)
        {
                    // Put the user in session
            if (username != null && password != null)
            {
                l_session.setAttribute("user", new User(username, password));
            }
                    // Ask again for proper login
            else
            {
                forward = "/pages/login.jsp";
            }
        }
        //Forward
        this.getServletContext().getRequestDispatcher(forward).forward( pRequest, pResponse );

    } 
```

MY_SESSION_COOKIE cookie 将保存 JSESSIONID cookie 的值。当 JSESSIONID cookie 被销毁时，MY_SESSION_COOKIE 仍然存在会话 ID。

JSESSIONID 已随 Web 浏览器会话消失，但我们选择使用持久且简单的 cookie，以及放入应用程序上下文中的所有活动会话的映射。持久 cookie 允许我们在地图中找到正确的会话。

不要忘记 BalusC 制作的这些有用的方法来添加/获取/删除 cookie：

```
/**
 * 
 * @author BalusC
 */
public static String getCookieValue(HttpServletRequest request, String name) {
    Cookie[] cookies = request.getCookies();
    if (cookies != null) {
        for (Cookie cookie : cookies) {
            if (name.equals(cookie.getName())) {
                return cookie.getValue();
            }
        }
    }
    return null;
}

/**
 * 
 * @author BalusC
 */
public static void addCookie(HttpServletResponse response, String name, String value, int maxAge) {
    Cookie cookie = new Cookie(name, value);
    cookie.setPath("/");
    cookie.setMaxAge(maxAge);
    response.addCookie(cookie);
}

/**
 * 
 * @author BalusC
 */
public static void removeCookie(HttpServletResponse response, String name) {
    addCookie(response, name, null, 0);
}

} 
```

最后一个解决方案在 localhost 上使用 glassfish 进行了测试，在 windows 上使用 chrome 用于 webbrowser。它只依赖于一个cookie，你不需要数据库。但实际上，我不知道这种机制的局限性是什么。我只花了一夜的时间来解决这个问题，不知道它是好是坏。

**谢谢**

我还在学习中，如果我的答案有任何错误，请告诉我。谢谢，@+

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-05-15T07:44:31.567

正确答案有很多缺陷，请参阅我的评论。事情其实比较简单。您将需要一个持久数据存储（例如 SQL 数据库）。您也可以使用`ServletContext`，但用户将在服务器重新启动或应用程序重新部署后注销。`HashMap`如果您使用in ，请不要忘记正确同步，`ServletContext`因为它可能会被更多线程同时访问。

不要破解服务器的会话和它的 ID，它不在你的控制之下，如果在服务器过期原始会话后出现带有 JSESSIONID 的请求，一些服务器会更改会话 ID。滚动你自己的饼干。

基本上你需要：

*   自己的 cookie，不是持久的，具有安全的随机值
*   数据存储
*   a`javax.servlet.Filter`检查登录

过滤器实现可能如下所示：

```
public class LoginFilter implements Filter {

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, 
            FilterChain chain) throws IOException, ServletException {
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse resp = (HttpServletResponse) response;

        // Java 1.8 stream API used here
        Cookie loginCookie = Arrays.stream(req.getCookies()).filter(c -> c.getName()
                .equals("MY_SESSION_COOKIE")).findAny().orElse(null);

        // if we don't have the user already in session, check our cookie MY_SESSION_COOKIE
        if (req.getSession().getAttribute("currentUser") == null) {
            // if the cookie is not present, add it
            if (loginCookie == null) {
                loginCookie = new Cookie("MY_SESSION_COOKIE", UUID.randomUUID().toString());
                // Store that cookie only for our app. You can store it under "/", 
                // if you wish to cover all webapps on the server, but the same datastore
                // needs to be available for all webapps.
                loginCookie.setPath(req.getContextPath());
                loginCookie.setMaxAge(DAYS.toSeconds(1)); // valid for one day, choose your value
                resp.addCookie(loginCookie);
            }
            // if we have our cookie, check it
            else {
                String userId = datastore.getLoggedUserForToken(loginCookie.getValue());
                // the datastore returned null, if it does not know the token, or 
                // if the token is expired
                req.getSession().setAttribute("currentUser", userId);
            }
        }
        else {
            if (loginCookie != null)
                datastore.updateTokenLastActivity(loginCookie.getValue());
        }

        // if we still don't have the userId, forward to login
        if (req.getSession().getAttribute("currentUser") == null)
            resp.sendRedirect("login.jsp");
        // else return the requested resource
        else
            chain.doFilter(request, response);
    }

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }

    @Override
    public void destroy() {
    }

} 
```

用户登录后，您应该将 MY_SEESSION_COOKIE 的值与 一起添加到数据存储中，`userId`并在注销时将其删除。您还必须将到期日期存储到数据存储并在接受令牌之前对其进行检查，您不得依赖浏览器尊重 maxAge 属性。

并且不要忘记添加一些数据存储清理以防止未完成的 cookie 永远存在。

上面的代码没有在现实生活中测试过，可能会有一些怪癖，但基本的想法应该是可行的。它至少比公认的解决方案好很多。

# javascript - 淘汰赛示例模板示例不起作用

> ID：16099753
> 
> 赞同：0
> 
> 时间：2013-04-19T07:44:25.247
> 
> 标签：javascript, jquery, knockout.js

在以下代码中，为什么 jquery 模板不呈现？我以为模板是内置的？谢谢你

```
<script id="friendsTemplate" type="text/html">

    <ul>

        {{each(index,friend) friends}}

        <li>${ friend.name }</li>

        {{/each}}
    </ul>

</script> 
```

* * *

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="Scripts/knockout-2.2.1.js"></script>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <h1>details</h1>

        <p>first name: <input data-bind="value: firstName" /></p>
        <p>last name: <input data-bind="value: lastName" /></p>

        <p>full name: <span data-bind ="text: fullName"></span></p>

        <h2>friends</h2>
        <div data-bind="template: 'friendsTemplate'"></div>

        <script id="friendsTemplate" type="text/html">

            <ul>

                {{each(index,friend) friends}}

                <li>${ friend.name }</li>

                {{/each}}
            </ul>

        </script>

    </div>
    </form>
</body>
</html>

<script type ="text/javascript">

    function friend(name) {
        return {
            name: ko.observable(name)
        };
    }

    var viewModel ={
        firstName: ko.observable("bert"),
        lastName: ko.observable("smith"),
        friends:ko.observableArray([new friend('steve'),new friend('annie')])
    };

    viewModel.fullName = ko.dependentObservable(function () {
        return this.firstName() + " " + this.lastName();
    },viewModel);

    ko.applyBindings(viewModel);
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T08:12:37.533

jQuery.tmpl 支持是内置的，但是您需要参考 jQuery 和 jQuery.tmpl 以使其按照以下文档中的说明工作：[注 6：使用 jQuery.tmpl，一个基于字符串的外部模板引擎：](http://knockoutjs.com/documentation/template-binding.html)

> 默认情况下，Knockout 支持 jquery.tmpl。**要使用它，您需要按以下顺序引用以下库：**

```
<!-- First jQuery -->     <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<!-- Then jQuery.tmpl --> <script src="jquery.tmpl.js"></script>
<!-- Then Knockout -->    <script src="knockout-x.y.z.js"></script> 
```

如果您引用所有依赖项，您的代码应该可以正常工作：[Demo JSFiddle](http://jsfiddle.net/5jxKa/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:13:24.030

您需要将数据对象传递给您的模板。

```
data-bind="template: { name: 'friendsTemplate', data: $data }" 
```

查看[http://knockoutjs.com/documentation/template-binding.html](http://knockoutjs.com/documentation/template-binding.html)了解详情。

您使用 jQuery 模板有什么原因吗？以下更符合“典型”淘汰赛用法。此外，如果有重用，您应该只使用外部模板。这段代码很容易被内联。

```
<script id="friendsTemplate" type="text/html">
    <ul data-bind="friends">
        <li data-bind="text: name"></li>
    </ul>
</script> 
```

# ios - 更改字体时应用程序崩溃

> ID：16099761
> 
> 赞同：0
> 
> 时间：2013-04-19T07:44:52.747
> 
> 标签：ios, uifont

这就是我更改导航栏背景并尝试设置这样的字体的方式

```
UIImage *image = [UIImage imageNamed:@"header.png"];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];        

UILabel *tmpTitleLabel = [[UILabel alloc] initWithFrame:CGRectMake(120, 0, 100, 40)];
[tmpTitleLabel font:[UIFont systemFontOfSize:12]];  
// APP CRASH (IF I ERASH THIS ABOVE LINE THEN TITLE GET DISPLAYED AS FACEBOOK )

tmpTitleLabel.text = @"Facebook";
tmpTitleLabel.backgroundColor = [UIColor clearColor];

tmpTitleLabel.textColor = [UIColor whiteColor];

CGRect applicationFrame = CGRectMake(0, 0, 300, 40);
UIView * newView = [[[UIView alloc] initWithFrame:applicationFrame] autorelease];
[newView addSubview:imageView];
[newView addSubview:tmpTitleLabel];

[self.navigationController.navigationBar addSubview:newView]; 
```

我究竟做错了什么？我检查了很多答案，但这就是他们设置字体的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:48:05.827

`[tmpTitleLabel font:[UIFont systemFontOfSize:12]];`

这是错误的。您正在使用 getter 而不是 setter。你错过了`set`部分和资本`F`。

```
[tmpTitleLabel setFont:[UIFont systemFontOfSize:12]];
               ^^^^ 
```

或者像这样使用点语法：

```
tmpTitleLabel.font = [UIFont systemFontOfSize:12]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:48:34.943

像这样分配字体：

```
 tmpTitleLabel.font=[UIFont systemFontOfSize:12]; 
```

或使用 setFont: 方法

```
 [tmpTitleLabel setFont:[UIFont systemFontOfSize:12]]; 
```

# jpa-2.0 - 无法使用 glassfish3 在 derby 中创建 JPA 表

> ID：16099764
> 
> 赞同：0
> 
> 时间：2013-04-19T07:44:57.223
> 
> 标签：jpa-2.0, eclipselink, glassfish-3, derby

我正在尝试将使用 JPA (2.0) 的克隆数据库从旧数据库创建到 derby 中。JPA 实体是从现有数据库（我认为是 JDidea 工具）生成的，现在我使用 Eclipse + GlassFish3 + EclipseLink + Derby + JDK 6 来克隆该数据库以进行安全开发（和测试）。

但是我进入 glassfish 记录这些消息：

```
INFO: EclipseLink, version: Eclipse Persistence Services - 2.3.2.v20111125-r10461
INFO: file:/C:/siilo/glassfish3/glassfish/domains/domain1/eclipseApps/omaasiointi-web/WEB-INF/classes/PU_NAME login successful
WARNING: Multiple [2] JMX MBeanServer instances exist, we will use the server at index [0] : [com.sun.enterprise.v3.admin.DynamicInterceptor@22beebcd].
WARNING: JMX MBeanServer in use: [com.sun.enterprise.v3.admin.DynamicInterceptor@22beebcd] from index [0] 
WARNING: JMX MBeanServer in use: [com.sun.jmx.mbeanserver.JmxMBeanServer@62ccf439] from index [1] 

WARNING: PER01000: Got SQLException executing statement "CREATE TABLE "postikoodi" ("lrivino" BIGINT NOT NULL, "szkielikoodi" VARCHAR(255), "szkuntakoodi" VARCHAR(255), "szpostinumero" VARCHAR(255), "szpostitoimipaikka" VARCHAR(255), "sztimestamp" VARCHAR(255), "szuserid" VARCHAR(255), PRIMARY KEY ("lrivino"))": java.sql.SQLException: Table/View 'postikoodi' already exists in Schema 'APP'.
... 
```

并且有很多这样的信息。使用了多个相同的数据库，并且 EclipseLink 可能会尝试在所有数据库中创建所有表（出于什么原因，我想我会收到大量这些错误 => 它们似乎大致相同）。

我在 Eclipse 中创建了几个数据库连接，并检查了这些数据库中的“APP”模式是否为空，所以我不太明白这个错误。

在 persistence.xml 我定义了以下内容：

```
<persistence-unit name="PU_NAME" transaction-type="JTA">
    <jta-data-source>jdbc/__default</jta-data-source>
    <properties>
        <property name="eclipselink.target-database" value="org.eclipse.persistence.platform.database.DerbyPlatform"/>
        <property name="eclipselink.ddl-generation" value="drop-and-create-tables"/>
        <property name="eclipselink.ddl-generation.output-mode" value="database"/>
    </properties>
</persistence-unit> 
```

有什么建议吗？

# django - 如何在 gettext 中将 msgid 复制到 msgstr 以制作 django i18n/translation？

> ID：16099769
> 
> 赞同：4
> 
> 时间：2013-04-19T07:45:12.927
> 
> 标签：django, internationalization, translation, gettext, django-i18n

在用于 JavaScript“djangojs”的 Django i18n 中，存在一个错误的假设，即只有语言是英语 - [https://code.djangoproject.com/ticket/20280](https://code.djangoproject.com/ticket/20280)。

由于这个限制，如果我的语言不是英语，我必须在字符串提取后将所有 msgid 复制到 msgstr。我在网上搜索，但一无所获。

**有没有我可以在 *.po 文件上运行的工具，它将所有 msgid 复制到 msgstr？**

我需要将波兰语翻译成波兰语，因为如果我不这样做，Django 会将波兰语 JavaScript 翻译成英语——出了什么问题。欢迎您提出所有建议。

* * *

示例 - 波兰语 *.po：

```
msgid "Polski"
msgstr "" 
```

应该：

```
msgid "Polski"
msgstr "Polski" 
```

如果未完成： Polski = 波兰语无效：

如果完成了 Polski = Polski！

这是因为如果波兰语翻译为空，则 Django 先加载英语而不是更新翻译，即使不需要，也不会翻译任何内容。除英语以外的所有语言都应使用此技巧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-26T13:33:26.163

是的，它是 gettext 的一部分，称为 msgen： [http ://www.gnu.org/software/gettext/manual/html_node/msgen-Invocation.html](http://www.gnu.org/software/gettext/manual/html_node/msgen-Invocation.html)

# javafx - 使用 javafx 在记忆游戏中随机

> ID：16099771
> 
> 赞同：0
> 
> 时间：2013-04-19T07:45:22.187
> 
> 标签：javafx

我正在用 javafx 制作一个记忆游戏，但我有一个小问题，它一切正常，但它选择随机颜色的随机函数，但有时它选择三种相同的颜色。我已经启动了一个变量以使其工作，但请帮助我！我已经完成的部分：

```
for (aantalkaarten in [1..16]){
    var choice = RANDOM.nextInt(
        sizeof mogelijkewaarde);
    gekozenwaarde[aantalkaarten] = mogelijkewaarde[choice];
    for(x in [1..16]){
        if (gekozenkaart[aantalkaarten] == gekozenkaart[x]){
            counter ++;
        }    
        if (counter == 2){
            //HIER MOET IETS KOMEN WAARMEE JE DIE KAART DIE ALS
        //DERDE DIE KLEUR KRIJGT WEER OPNIEUW RANDOM EEN KLEUR KRIJGT
        } 
    } 
} 
```

和整个代码：

```
package newpackage;

import javafx.stage.Stage;
import javafx.scene.Scene;
import javafx.scene.text.Text;
import javafx.scene.text.Font;
import javafx.scene.shape.Rectangle;
import javafx.scene.paint.Color;
import javafx.scene.control.Button;
import java.util.Random;

var backColor = "lightblue";
var rectangle1: Rectangle;
var rectangle2: Rectangle;
var rectangle3: Rectangle;
var rectangle4: Rectangle;
var rectangle5: Rectangle;
var rectangle6: Rectangle;
var rectangle7: Rectangle;
var rectangle8: Rectangle;
var rectangle9: Rectangle;
var rectangle10: Rectangle;
var rectangle11: Rectangle;
var rectangle12: Rectangle;
var rectangle13: Rectangle;
var rectangle14: Rectangle;
var rectangle15: Rectangle;
var rectangle16: Rectangle;
var kaarten = ["", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red",];
var kaartzichtbaar = [true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true];
var gekozenkaart = [0, 0, 0];
var tekst = "beginnen maar";
var aantalclicks = 0;
var kaartkeuze = ["", ""];
var scene: Scene;
var button: Button;
var score = 0;
var gekozenwaarde = ["","","","","","","","","","","","","","","","",""];
var mogelijkewaarde = ["yellow","blue","white","grey","green","pink","magenta","orange"];
var RANDOM = Random{};
var counter =0;

for (aantalkaarten in [1..16]){
    var choice = RANDOM.nextInt(
        sizeof mogelijkewaarde);
    gekozenwaarde[aantalkaarten] = mogelijkewaarde[choice];
    for(x in [1..16]){
        if (gekozenkaart[aantalkaarten] == gekozenkaart[x]){
            counter ++;
        }    
        if (counter == 2){
            //HIER MOET IETS KOMEN WAARMEE JE DIE KAART DIE ALS
        //DERDE DIE KLEUR KRIJGT WEER OPNIEUW RANDOM EEN KLEUR KRIJGT
        } 
    } 
}

function KaartControle() {
    if (aantalclicks == 2) {
        if (kaartkeuze[0] == kaartkeuze[1]) {
            tekst = "goed bezig!";
            kaartzichtbaar[gekozenkaart[0]] = false;
            kaartzichtbaar[gekozenkaart[1]] = false;
            aantalclicks = 0;
            score++;
        }
    }
    else if (aantalclicks == 3) {
        tekst = "jammer!";
        kaarten[gekozenkaart[0]] = "red";
        kaarten[gekozenkaart[1]] = "red";
        kaarten[gekozenkaart[2]] = "red";
        aantalclicks = 0;
        score--;
    }
    if (score == 8) {
        tekst = "Hoera!! Het spel is voltooid";
    }
}

Stage {
    title: "Memory"
    scene: Scene {
        width: 500
        height: 300
        fill: bind Color.web(backColor)
        content: [
            Text {
                font: Font {
                    size: 16
                }
                x: 10
                y: 30
                content: bind tekst;
            }
            Text {
                font: Font {
                    size: 16
                }
                x: 250
                y: 30
                content: bind score.toString();
            }
            button = Button {
                        translateX: 300
                        translateY: 150
                        text: "reset"
                        visible: true
                        action: function() {
                            kaartzichtbaar = [true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true];
                            kaarten = ["", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red", "red",];
                            aantalclicks = 0;
                            score = 0;
                            for (aantalkaarten in [1..16]){
                                var choice = RANDOM.nextInt(
                                    sizeof mogelijkewaarde);
                            gekozenwaarde[aantalkaarten] = mogelijkewaarde[choice];
}
                        }
                    }
            //Kaart 1
            rectangle1 = Rectangle {
                        visible: bind kaartzichtbaar[1]
                        width: 50
                        height: 50
                        x: 10
                        y: 50
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[1])
                        onMouseClicked: function(event) {
                            if (kaarten[1] == "red") {
                                kaarten[1] = gekozenwaarde[1];
                                kaartkeuze[aantalclicks] = gekozenwaarde[1];
                                gekozenkaart[aantalclicks] = 1;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    }
            //Kaart 2
            rectangle2 = Rectangle {
                        visible: bind kaartzichtbaar[2]
                        width: 50
                        height: 50
                        x: 10
                        y: 110
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[2])
                        onMouseClicked: function(event) {
                            if (kaarten[2] == "red") {
                                kaarten[2] = gekozenwaarde[2];
                                kaartkeuze[aantalclicks] = gekozenwaarde[2];
                                gekozenkaart[aantalclicks] = 2;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    }
            //Kaart 3
            rectangle3 = Rectangle {
                        visible: bind kaartzichtbaar[3]
                        width: 50
                        height: 50
                        x: 10
                        y: 170
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[3])
                        onMouseClicked: function(event) {
                            if (kaarten[3] == "red") {
                                kaarten[3] = gekozenwaarde[3];
                                kaartkeuze[aantalclicks] = gekozenwaarde[3];
                                gekozenkaart[aantalclicks] = 3;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    }
            //Kaart 4
            rectangle4 = Rectangle {
                        visible: bind kaartzichtbaar[4]
                        width: 50
                        height: 50
                        x: 10
                        y: 230
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[4])
                        onMouseClicked: function(event) {
                            if (kaarten[4] == "red") {
                                kaarten[4] = gekozenwaarde[4];
                                kaartkeuze[aantalclicks] = gekozenwaarde[4];
                                gekozenkaart[aantalclicks] = 4;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    }
            //Kaart 5
            rectangle5 = Rectangle {
                        visible: bind kaartzichtbaar[5]
                        width: 50
                        height: 50
                        x: 70
                        y: 50
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[5])
                        onMouseClicked: function(event) {
                            if (kaarten[5] == "red") {
                                kaarten[5] = gekozenwaarde[5];
                                kaartkeuze[aantalclicks] = gekozenwaarde[5];
                                gekozenkaart[aantalclicks] = 5;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    }
            //Kaart 6
            rectangle6 = Rectangle {
                        visible: bind kaartzichtbaar[6]
                        width: 50
                        height: 50
                        x: 70
                        y: 110
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[6])
                        onMouseClicked: function(event) {
                            if (kaarten[6] == "red") {
                                kaarten[6] = gekozenwaarde[6];
                                kaartkeuze[aantalclicks] = gekozenwaarde[6];
                                gekozenkaart[aantalclicks] = 6;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    }
            //Kaart 7
            rectangle7 = Rectangle {
                        visible: bind kaartzichtbaar[7]
                        width: 50
                        height: 50
                        x: 70
                        y: 170
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[7])
                        onMouseClicked: function(event) {
                            if (kaarten[7] == "red") {
                                kaarten[7] = gekozenwaarde[7];
                                kaartkeuze[aantalclicks] = gekozenwaarde[7];
                                gekozenkaart[aantalclicks] = 7;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    }
            //Kaart 8
            rectangle8 = Rectangle {
                        visible: bind kaartzichtbaar[8]
                        width: 50
                        height: 50
                        x: 70
                        y: 230
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[8])
                        onMouseClicked: function(event) {
                            if (kaarten[8] == "red") {
                                kaarten[8] = gekozenwaarde[8];
                                kaartkeuze[aantalclicks] = gekozenwaarde[8];
                                gekozenkaart[aantalclicks] = 8;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    }
            //Kaart 9
            rectangle9 = Rectangle {
                        visible: bind kaartzichtbaar[9]
                        width: 50
                        height: 50 x: 130
                        y: 50
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[9])
                        onMouseClicked: function(event) {
                            if (kaarten[9] == "red") {
                                kaarten[9] = gekozenwaarde[9];
                                kaartkeuze[aantalclicks] = gekozenwaarde[9];
                                gekozenkaart[aantalclicks] = 9;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    }
            //Kaart 10
            rectangle10 = Rectangle {
                        visible: bind kaartzichtbaar[10]
                        width: 50
                        height: 50
                        x: 130
                        y: 110
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[10])
                        onMouseClicked: function(event) {
                            if (kaarten[10] == "red") {
                                kaarten[10] = gekozenwaarde[10];
                                kaartkeuze[aantalclicks] = gekozenwaarde[10];
                                gekozenkaart[aantalclicks] = 10;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    }
            //Kaart 11
            rectangle11 = Rectangle {
                        visible: bind kaartzichtbaar[11]
                        width: 50
                        height: 50
                        x: 130
                        y: 170
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[11])
                        onMouseClicked: function(event) {
                            if (kaarten[11] == "red") {
                                kaarten[11] = gekozenwaarde[11];
                                kaartkeuze[aantalclicks] = gekozenwaarde[11];
                                gekozenkaart[aantalclicks] = 11;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    }
            //Kaart 12
            rectangle12 = Rectangle {
                        visible: bind kaartzichtbaar[12]
                        width: 50
                        height: 50
                        x: 130
                        y: 230
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[12])
                        onMouseClicked: function(event) {
                            if (kaarten[12] == "red") {
                                kaarten[12] = gekozenwaarde[12];
                                kaartkeuze[aantalclicks] = gekozenwaarde[12];
                                gekozenkaart[aantalclicks] = 12;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    }
            //Kaart 13
            rectangle13 = Rectangle {
                        visible: bind kaartzichtbaar[13]
                        width: 50
                        height: 50
                        x: 190
                        y: 50
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[13])
                        onMouseClicked: function(event) {
                            if (kaarten[13] == "red") {
                                kaarten[13] = gekozenwaarde[13];
                                kaartkeuze[aantalclicks] = gekozenwaarde[13];
                                gekozenkaart[aantalclicks] = 13;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    }
            //Kaart 14
            rectangle14 = Rectangle {
                        visible: bind kaartzichtbaar[14]
                        width: 50
                        height: 50
                        x: 190
                        y: 110
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[14])
                        onMouseClicked: function(event) {
                            if (kaarten[14] == "red") {
                                kaarten[14] = gekozenwaarde[14];
                                kaartkeuze[aantalclicks] = gekozenwaarde[14];
                                gekozenkaart[aantalclicks] = 14;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    }
            //Kaart 15
            rectangle15 = Rectangle {
                        visible: bind kaartzichtbaar[15]
                        width: 50
                        height: 50
                        x: 190
                        y: 170
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[15])
                        onMouseClicked: function(event) {
                            if (kaarten[15] == "red") {
                                kaarten[15] = gekozenwaarde[15];
                                kaartkeuze[aantalclicks] = gekozenwaarde[15];
                                gekozenkaart[aantalclicks] = 15;
                                aantalclicks++;
                                KaartControle()
                            }
                        }
                    }
            //Kaart 16
            rectangle16 = Rectangle {
                        visible: bind kaartzichtbaar[16]
                        width: 50
                        height: 50
                        x: 190
                        y: 230
                        arcWidth: 10
                        arcHeight: 10
                        fill: bind Color.web(kaarten[16])
                        onMouseClicked: function(event) {
                            if (kaarten[16] == "red") {
                            kaarten[16] = gekozenwaarde[16];
                            kaartkeuze[aantalclicks] = gekozenwaarde[16];
                            gekozenkaart[aantalclicks] = 16;
                            aantalclicks++; KaartControle()
                        }
                    }
                }
            ]
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:26:15.780

嘻嘻，

Ik zie dat je ook nederlands bent en mn engels is niet zo goed :) Maar moet je die memorie voor school maken? Ik moet namelijk precies hetzelfde maken！Alleen ik heb het op een iets andere manier dan jij gedaan meet plaatjes en jij met gekleurde vakjes, maar ik heb het iets anders meet plaatjes gedaan maar het komt wel ongeveer op hetzelfde neer. Ik heb het met de shuffle functie gedaan en dan de namen van de plaatjes en bij mij komen ze geen 2keer。Ik weet niet of je via dit berichtjes kan sturen of dat je je mail wilt geven dan mail ik de code wel eventjes，希望 mijn leraar 是 erg goed in google en vind dat als het op internet staat ik het waarschijnlijk niet zelf gemaakt hebt:P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T12:34:08.373

看这段代码，可能有帮助：

```
 // Draws a random 100x100 rectangle in a random color.
import java.awt.*;
import java.util.*;
public class RandomRectangle {
public static void main(String[] args) {
DrawingPanel panel = new DrawingPanel(500, 500);
Graphics g = panel.getGraphics();
Random rand = new Random();
// choose random location
Point rectPoint = new Point();
rectPoint.x = rand.nextInt(500);
rectPoint.y = rand.nextInt(500);
// choose random color
int randomColor = rand.nextInt(3);
if (randomColor == 0) {
g.setColor(Color.RED);
} else if (randomColor == 1) {
g.setColor(Color.GREEN);
} else {
g.setColor(Color.BLUE);
}
g.fillRect(rectPoint.x, rectPoint.y, 100, 100);
}
} 
```

# c - C 的 regexec 匹配 '1111111' 到 '^[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\ .[0-9]\{1,3\}$'

> ID：16099780
> 
> 赞同：0
> 
> 时间：2013-04-19T07:45:46.750
> 
> 标签：c, regex

以下代码是我为我正在处理的一个更大项目的一部分编写的独立测试；它应该检测四重形式的 IPv4 地址（四个由句点分隔的最多三位数字）：

```
#include <stdlib.h>
#include <stdio.h>
#include <regex.h>
#include <sys/types.h>

int main (int argc, char * argv []) {
   regex_t regex;
    int ret;
    char * reg = "^[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}$";

    ret = regcomp(& regex, reg, REG_NEWLINE | REG_EXTENDED);
    if (ret) {
            printf("no compile\n");
    } else {
            printf("compile\n");
    }

    char ips [17];
    fgets(ips, 17, stdin);

    ret = regexec(& regex, ips, 0, NULL, 0);

    if (! ret) {
            printf("match\n");
    } else {
            printf("no match\n");
    }

    return 0;
} 
```

当我输入“1111111”并回车时，它会打印“y”。这似乎不对。

```
$ [name of compiled file]
comp
11111111
y
$ 
```

它还匹配更长的字符串；我还没过十点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:55:26.800

你有一个逃避问题：

```
"^[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}$" 
```

目前，您将点转义一次，这使它们成为点（正则表达式点类型）。此外，您不需要转义花括号。

# xml - 在 Marshaller 上设置 CharacterEscapeHandler 变量在 CXF 中无法按预期工作

> ID：16099783
> 
> 赞同：3
> 
> 时间：2013-04-19T07:45:55.950
> 
> 标签：xml, jaxb, cxf, marshalling

我正在使用 Apache CXF 在服务器端实现一些 WebServices。我必须实现一个 WebService，它返回一个字符串（Holder），其中一些值由制表符分隔。Apache CXF 将字符选项卡编码为选项卡，但我们的客户端（不能更改...）不接受它，只读取编码为 的选项卡 .

所以我试着简单地在字符串上做一个 replaceAll 来改变 \t 为 ，但 Marshaller 上的 escapeHandler 将其更改为 &#9; .

然后我尝试创建一个 customCharacterEscapeHandler 并在 marshall com.sun.xml.bind.marshaller.CharacterEscapeHandler 属性中设置。

```
<jaxws:endpoint 
  id="wsContainer" 
  implementor="com.xxxxx.xxxxx.xxxxx.webServices.impl.EOSWebServiceImpl"
  address="/ws" >

  <jaxws:dataBinding>   
      <bean class="org.apache.cxf.jaxb.JAXBDataBinding">
        <property name="marshallerProperties">
            <map>
                <entry key="jaxb.encoding" value="UTF-8"/> 
                <entry key="com.sun.xml.bind.marshaller.CharacterEscapeHandler" value-ref="customCharacterEscapeHandler"/>
            </map>        
        </property>
      </bean>
  </jaxws:dataBinding>

</jaxws:endpoint> 
```

我的 customCharacterEscapeHandler 是：

```
public class CustomCharacterEscapeHandler implements CharacterEscapeHandler {

    private final CharsetEncoder encoder;

    public CustomCharacterEscapeHandler(String charsetName) {
        this.encoder = Charset.forName(charsetName).newEncoder(); 
    }

    public void escape(char[] ch, int start, int length, boolean isAttVal, Writer out) throws IOException {
        int limit = start+length;
        for (int i = start; i < limit; i++) {
            switch (ch[i]) {
            case SoapUtils.SOAP_FIELD_SEP: //Cambios sobre el NioEscapeHandler para escapar tabuladores y saltos de linea
                out.write("&#09;");
                break;
            case SoapUtils.SOAP_RSEP:
                out.write("&#13;");
                break;
            case '&':
                out.write("&amp;");
                break;
            case '<':
                out.write("&lt;");
                break;
            case '>':
                out.write("&gt;");
                break;
            case '\"':
                if (isAttVal) {
                    out.write("&quot;");
                } else {
                    out.write('\"');
                }
                break;
            default:
                if( encoder.canEncode(ch[i]) ) {
                    out.write(ch[i]);
                } else {
                    out.write("&#");
                    out.write(Integer.toString(ch[i]));
                    out.write(';');
                }
            }
        }
    }
} 
```

这应该有效，但它没有，因为这个 escapeHandler 正确替换了制表符，但其他一些 escapeHandler 在此之后运行并再次替换 '&' 字符，所以我有 &#9; 再次 ...

我应该怎么做才能在客户端获得一个编码为 的标签？??

PS：我使用的是 Apache CXF 2.5.X

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-10T20:32:13.437

我也遇到了这个问题，根据我的观察，使用 CXF StaxOutInterceptor 的 XMLStreamWriter 似乎不支持 JAXB CharacterEscapeHandler。

我通过将自定义 org.codehaus.stax2.io.EscapingWriterFactory 注入到 StaxOutInterceptor 来解决这个问题。

下面是自定义 EscapingWriterFactory 的实现：

```
public class CustomXmlEscapingWriterFactory implements
org.codehaus.stax2.io.EscapingWriterFactory{
    public Writer createEscapingWriterFor(final Writer out, String enc)
            throws UnsupportedEncodingException {
        return new Writer(){

            @Override
            public void write(char[] cbuf, int off, int len) throws IOException {

              String escapedStr =   StringEscapeUtils.
                      escapeXml(new String(cbuf)).trim();

              out.write(escapedStr.toCharArray(), off, escapedStr.toCharArray().length);

            }

            @Override
            public void flush() throws IOException {
                out.flush();

            }

            @Override
            public void close() throws IOException {
                out.close();

            }

        };
    }

    public Writer createEscapingWriterFor(OutputStream out, String enc)
            throws UnsupportedEncodingException {
        throw new IllegalArgumentException("not supported");
    }
} 
```

这是注入自定义 EscapingWriterFactory 的 CXF 拦截器

```
public class CustomXmlEscapingWriterInterceptor extends AbstractPhaseInterceptor<Message> {

    public CustomXmlEscapingWriterInterceptor() {
        super(Phase.PRE_STREAM);
        addBefore(StaxOutInterceptor.class.getName());
    }

    @Override
    public void handleMessage(Message message) {

        WstxOutputFactory factory = new WstxOutputFactory();

        factory.setProperty(XMLOutputFactory2.P_TEXT_ESCAPER, new CustomXmlEscapingWriterFactory());

        message.put(XMLOutputFactory.class.getName(), factory);
    }
} 
```

# winapi - 从进程中删除管理员特权

> ID：16099787
> 
> 赞同：6
> 
> 时间：2013-04-19T07:46:15.757
> 
> 标签：winapi, uac, access-token, elevated-privileges, privilege-elevation

在这篇很棒的[MSDN 文章](http://msdn.microsoft.com/en-us/windows/ff420334.aspx)的帮助下，我的第一个想法是简单地检查进程是否使用提升的管理员组，并使用`AdjustTokenGroups()`我将管理员组设置为`SE_GROUP_USE_FOR_DENY_ONLY`. 不幸的是，我们无法修改当前运行进程的管理员组，因为它也具有`SE_GROUP_MANDATORY`属性，这使得它无法更改。

MSDN 文档对此有这样的说法：

该`AdjustTokenGroups`函数不能禁用结构中具有该`SE_GROUP_MANDATORY`属性的组`TOKEN_GROUPS`。改为使用`CreateRestrictedToken`。

所以，我完成了以下代码来实现这一点；

```
bool _IsNewProcessLaunched()
{
    HANDLE hToken = NULL;   
    bool hasRestarted = false;

    if (!OpenProcessToken( GetCurrentProcess(), 
        TOKEN_ASSIGN_PRIMARY | TOKEN_QUERY | TOKEN_DUPLICATE | TOKEN_ADJUST_GROUPS, 
        &hToken )) 
    {
        return hasRestarted;
    }

    PSECURITY_DESCRIPTOR pSID = NULL;
    SID_IDENTIFIER_AUTHORITY SIDAuth = SECURITY_NT_AUTHORITY;

    if(! AllocateAndInitializeSid( &SIDAuth, 2,
        SECURITY_BUILTIN_DOMAIN_RID,
        DOMAIN_ALIAS_RID_ADMINS,
        0, 0, 0, 0, 0, 0,
        &pSID) ) 
    {
        CloseHandle(hToken);
        hToken = NULL;
        return hasRestarted;
    }

    BOOL isAdmin = FALSE;
    BOOL ok = CheckTokenMembership(NULL, pSID, &isAdmin);

    // Create the SID structure for the administrator SID
    SID_AND_ATTRIBUTES adminSID = {0};
    adminSID.Sid = pSID;

    // Create a restricted token which denies the administrator group
    HANDLE restrictedToken;

    CreateRestrictedToken(hToken,RESTR,DISABLE_MAX_PRIVILEGE,&adminSID,NULL,NULL,NULL,NULL,&restrictedToken);

    //Create startup info
    STARTUPINFO si = {0};
    PROCESS_INFORMATION pi = {0};
    si.lpDesktop = L"winsta0\\default";
    si.cb = sizeof( si );

    // Get the current executables name
    TCHAR exePath[MAX_PATH];
    GetModuleFileName(NULL,exePath,MAX_PATH);

    // Start the new (non-administrator elevated) restricted process
    if( CreateProcessAsUser(restrictedToken,exePath,NULL,NULL,NULL,TRUE,NORMAL_PRIORITY_CLASS,NULL,NULL,&si,&pi) == 0)
        hasRestarted = false;
    else
        hasRestarted  = true;

    return hasRestarted;
} 
```

但是新进程仍然以**管理员**身份运行，而不是以**普通用户**身份运行。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T17:17:48.610

由于您正在限制调用进程的令牌，因此启动的进程将使用与调用进程相同的**用户帐户**运行，只是具有受限的权限。请记住，在 UAC 下，管理员在没有提升的情况下没有完整的管理员权限。 `CreateRestrictedToken()`创建具有受限权限的令牌。因此，即使用户可能是**管理员**，也不意味着启动的进程将以管理权限运行。

顺便说一句，有一个更简单的 API，称为[Safer API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms721849.aspx#safer_functions)，您可以使用它来代替`CreateRestrictedToken()`：

```
#include <WinSafer.h>

bool _IsNewProcessLaunched()
{
    // Create the restricted token.

    SAFER_LEVEL_HANDLE hLevel = NULL;
    if (!SaferCreateLevel(SAFER_SCOPEID_USER, SAFER_LEVELID_NORMALUSER, SAFER_LEVEL_OPEN, &hLevel, NULL))
    {
        return false;
    }

    HANDLE hRestrictedToken = NULL;
    if (!SaferComputeTokenFromLevel(hLevel, NULL, &hRestrictedToken, 0, NULL))
    {
        SaferCloseLevel(hLevel);
        return false;
    }

    SaferCloseLevel(hLevel);

    // Set the token to medium integrity.

    TOKEN_MANDATORY_LABEL tml = {0};
    tml.Label.Attributes = SE_GROUP_INTEGRITY; 
    // alternatively, use CreateWellKnownSid(WinMediumLabelSid) instead...
    if (!ConvertStringSidToSid(TEXT("S-1-16-8192"), &(tml.Label.Sid)))
    {
        CloseHandle(hRestrictedToken);
        return false;
    }

    if (!SetTokenInformation(hRestrictedToken, TokenIntegrityLevel, &tml, sizeof(tml) + GetLengthSid(tml.Label.Sid))))
    {
        LocalFree(tml.Label.Sid);
        CloseHandle(hRestrictedToken);
        return false;
    }

    LocalFree(tml.Label.Sid);

    // Create startup info

    STARTUPINFO si = {0};
    si.cb = sizeof( si );
    si.lpDesktop = L"winsta0\\default";

    PROCESS_INFORMATION pi = {0};

    // Get the current executable's name
    TCHAR exePath[MAX_PATH+1] = {0};
    GetModuleFileName(NULL, exePath, MAX_PATH);

    // Start the new (non-elevated) restricted process
    if (!CreateProcessAsUser(hRestrictedToken, exePath, NULL, NULL, NULL, TRUE, NORMAL_PRIORITY_CLASS, NULL, NULL, &si, &pi))
    {
        CloseHandle(hRestrictedToken);
        return false;
    }

    CloseHandle(hRestrictedToken);
    CloseHandle(pi.hThread);
    CloseHandle(pi.hProcess);

    return true;
} 
```

# php - 返回 Login.php 并进行一些更改

> ID：16099791
> 
> 赞同：0
> 
> 时间：2013-04-19T07:46:39.477
> 
> 标签：php, web

假设我有一个页面 login.php，其中包含用户名和密码字段。它当然也有一个提交按钮。我如何获得它，如果用户输入他/她的姓名和密码并点击提交，如果用户尚未验证，它将返回 login.php 但除了用户名和密码字段之外，还有一个激活字段为出色地？？示例代码将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:49:35.990

尝试重定向到`login.php?validation=true`，然后在 PHP中检查`$_GET['validation']`参数是否为`true`。如果不是，则不提供参数（您可能在 中`login.php`），或者不是`true`.

如果您不想让任何参数发送一个表单（带有操作 to `login.php`），其名称与您用于登录的名称不同，然后检查`login.php`表单是否已提交。（在这种情况下，它只是提交数据`POST`，而不是`GET`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:01:57.507

我想出了类似下面的东西，它没有经过测试，但它应该显示这个想法：

```
<?php
$showActivate = false;
if ( !empty($_POST) ) {

   // perform your username and password validation here
   // and set $userValid value
   ...

   if ( !$userValid ) {
      $showActivate = false;
   }

}
?>
<form action="login.php" method="POST">
 <input name="username"/>
 <input name="password"/
 <?php if ( $showActivate ):?>
  <input name="activation"/>
 <?php endif; ?>
</form> 
```

# ascii - MIPS 检查是否等于某个字符

> ID：16099793
> 
> 赞同：1
> 
> 时间：2013-04-19T07:46:50.787
> 
> 标签：ascii, mips

我正在尝试在 mips 中编写 srinf。首先，我试图计算有多少个字符。

```
sprintf:
    addi $sp, $sp, -12
    sw $ra, 8($sp)
    sw $s1, 4($sp)
    sw $s2, 0($sp)

        li      $s0, 0          # len = 1
        la      $s1, ($a1)        # s = str
test:
        lb      $s2, 0($s1)     # c = *s
        beqz    $s2, done       # if c == '\0', branch to "done"
        beq $s2, '5', done
        addi    $s0, $s0, 1     # len = len + 1
        addi    $s1, $s1, 1     # s = s + 1
        j       test

percent:

done:
        li      $v0, 1          # syscall code: print_int
        move    $a0, $s0
        syscall
        li      $v0, 11         # syscall code: print_char
        li      $a0, 10         # pass newline character
        syscall

        jr      $ra 
```

但是当有 %d 或 %c 等时，需要检查格式是否存在。

我如何检查这样的某个角色？我看到了 mips ascii [http://galia.fc.uaslp.mx/~luis/arquitectura_files/table.pdf](http://galia.fc.uaslp.mx/~luis/arquitectura_files/table.pdf)

但是 beq 会是什么样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:18:17.700

无需查阅 ASCII 表。任何值得使用的汇编程序都支持字符立即数。所以你可以这样做：

```
lbu $s2,($s1)
li $t0,'%'
bne $s2,$t0,not_percent_sign 
```

或者，如果您的汇编器支持带有立即数的分支伪指令：

```
lbu $s2,($s1)
bne $s2,'%',not_percent_sign 
```

# node.js - 在 TypeScript 中导入 Node.js npm 模块（node_modules）和声明

> ID：16099803
> 
> 赞同：5
> 
> 时间：2013-04-19T07:47:24.773
> 
> 标签：node.js, typescript

我认为直接从 node_modules 目录导入模块而不需要手动为其提供声明文件会很棒（让我们假设声明是由模块本身提供的）。我猜这个问题是声明附带的依赖项（文件路径可以相对于模块解析，但这会导致重复并且编译器无法处理）。目前使用节点模块非常不方便，因为从 npm 存储库进行简单安装是不够的，我们必须手动搜索声明并在我们的项目中提供它们。假设我们的项目依赖于 10 个节点模块（它们都有声明），一年后我们想更新它们。我们将不得不手动搜索新的声明并让' s 说我们有大约 20 个这样的项目（这将成为一场噩梦）。也许应该有一个选项可以直接从节点模块导入 .ts 文件？

你有什么建议吗？

这是 CodePlex 的重新发布，以听取您的意见...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T10:52:19.860

如果您使用 grunt-typescript，那么我有一个拉取请求，它至少为我解决了这个问题。见[https://github.com/k-maru/grunt-typescript/pull/36](https://github.com/k-maru/grunt-typescript/pull/36)

从拉取请求 README

# 使用 node_modules 中的模块（即 npm）

使用 npm 包的标准方法是提供一个定义文件，该文件将包指定到打字稿并从那里导入模块。

```
///<reference path="path/to/mod.d.ts" />
import mod = module('mod') 
```

typescript编译器会将 转换`import`为 nodejs `require`。

```
var mod = require('mod') 
```

这非常笨拙，因为您需要知道 npm 安装包的精确路径，并且当您处理多个级别的依赖项时，npm 可以将包置于几乎任何级别。

使用`node_modules`grunt 配置中的选项，您可以只 `import`使用 npm 包，而无需知道 npm 安装包的确切级别，只要它是在本地而不是全局安装的。

到`import`你的打字稿源中的一个 npm 模块做

```
import npmModule = module('node_modules/npmModule/foo') 
```

这主要是由于幸运的机会。Typescript 编译器将读取 typescript 定义文件`node_modules/npmModule/foo.d.ts`，如果它在通往根的途中的某个时间点存在，并且如果需要，生成的 javascript 文件将包含一个`require`for 。`npmModule/foo`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T20:11:23.430

我认为节点模块永远不会包含内置的打字稿支持。该语言仍然是 0.x 版本，官方描述为 alpha 版本。

尽管如此，还是有一些方法可以简化 typescript 的配置过程。Github 已经包含大量 .d.ts 文件，例如：

[https://github.com/borisyankov/DefinitelyTyped](https://github.com/borisyankov/DefinitelyTyped) 或 [https://github.com/soywiz/typescript-node-definitions](https://github.com/soywiz/typescript-node-definitions)

您可能想看看这个工具：[https](https://github.com/Diullei/tsd) ://github.com/Diullei/tsd 。我从未使用过它，但它似乎几乎就是你要找的东西。

此外，我听说 .d.ts 文件的官方数据库正在计划中。不幸的是，我找不到链接，但无论如何，这可能需要一段时间才能实现。

# haskell - Haskell：安装 hsc2hs

> ID：16099805
> 
> 赞同：2
> 
> 时间：2013-04-19T07:47:41.780
> 
> 标签：haskell

当我尝试使用命令安装 hsc2hs

> 阴谋集团安装 hsc2hs

返回以下错误：

```
Main.hs:14:0:
     fatal error: ../../includes/ghcconfig.h: No such file or directory
compilation terminated.
World file is already up to date.
cabal.exe: Error: some packages failed to install:
hsc2hs-0.67.20120610 failed during the building phase. The exception was:
ExitFailure 1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T07:53:49.987

`hsc2hs`与 GHC 一起分发。

如果您出于某种原因想要构建更新或修改的版本，则必须与 GHC 本身一起构建它。

# c++ - gzip 读取文件第一次成功，但第二次调用失败

> ID：16099814
> 
> 赞同：0
> 
> 时间：2013-04-19T07:48:11.853
> 
> 标签：c++, boost, io, gzip

我正在使用 boost gzip 来读取压缩文件。当我第一次调用它时，我的程序运行良好。但是当我第二次调用相同的函数时。它失败。我不知道为什么它只工作了一次。谢谢！

```
void readcheckfile(const char* _checkname,queue<Graphnode> &_q)
{

    int _dep;
    int _val;
    Graphnode currentNode;
    cout<<"hererererererer\n";
    fstream _checkfile(_checkname, fstream::in | fstream::binary);
    cout<<"tthererererererer\n";
    std::stringstream _data;
    boost::iostreams::filtering_streambuf<boost::iostreams::input> in;
    in.push(boost::iostreams::gzip_decompressor());
    in.push(_checkfile);
    boost::iostreams::copy(in, _data);

    cout<<"aaaatthererererererer\n";
    //fstream _checkfile;
    //_checkfile.open(_checkname,fstream::in);
    _data>>_dep;
    while(_data.good())
    {
        currentNode.depth=(unsigned char)_dep;
        _data>>_val;
        currentNode.x=(unsigned char)_val;
        for(i=0;i<16;i++)
        {
            _data>>_val;
            currentNode.state[i]=(unsigned char)_val;
        }
        _q.push(currentNode);
    }
    _checkfile.close();
    //exit(0);
} 
```

当我调用它两次时，终端返回：

```
hererererererer
tthererererererer
aaaatthererererererer

hererererererer
tthererererererer
libc++abi.dylib: terminate called throwing an exception

=====================================================================================
=   BAD TERMINATION OF ONE OF YOUR APPLICATION PROCESSES
=   EXIT CODE: 6
=   CLEANING UP REMAINING PROCESSES
=   YOU CAN IGNORE THE BELOW CLEANUP MESSAGES
===================================================================================== 
```

# ios - 隐藏在图像中的数据

> ID：16099816
> 
> 赞同：2
> 
> 时间：2013-04-19T07:48:25.357
> 
> 标签：ios, steganography

我正在使用[http://github.com/anirudhsama](http://github.com/anirudhsama)在图像中隐藏一个文本文件，它工作正常，我可以用我的程序再次提取文本文件。

但是当我以编程方式在 facebook、twitter 和电子邮件中共享图像时，该共享图像未正确解码，因此我无法取回文件。

我按如下方式检索图像：

```
UIImage *finalImageWithStegno = [UIImage imageWithContentsOfFile:fileName]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T23:59:35.133

我怀疑是上传到网站时的图像压缩。检查这一点的一种简单方法是在封面图像中隐藏一条消息（获取隐秘图像）。将图像上传到网站并下载。将原始的 stego 图像与下载的图像进行比较。如果它们不同（逐字节），那就是你的问题。

快速浏览一下代码，该应用程序似乎将数据隐藏在空间域中，这并不可靠。您的信息直接隐藏在图像像素中，如果它们发生变化（由于有损压缩、模糊等），您的信息将会丢失。对此的解决方案是将数据隐藏在频域中。另一种解决方案可能是上传具有未压缩文件类型的图像？我不太了解网站如何处理图像，因此第二个建议可能是不可能的。

在任何情况下，如果上传到网站会扭曲图像，请四处寻找可能为您服务的其他应用程序，除非您可以自己编码。然后我们可以进入细节。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:42:49.363

您的算法不稳健。使用变换域隐写术在重新编码时保留信息。您可以选择嵌入 DCT 系数或 DWT 系数以获得更好的鲁棒性。

# c# - 媒体播放器如何播放列表框中的所有文件？

> ID：16099821
> 
> 赞同：1
> 
> 时间：2013-04-19T07:48:43.400
> 
> 标签：c#, wpf, windows, media-player

我有一个列表框，其中包含所有必须播放的媒体文件。如何让媒体播放器一一播放？此代码播放 1 首歌曲，但 foreach 应该播放所有文件，但我怀疑这是因为它不会等到媒体结束.. 这段代码：

`Listbox = listBox3`

`listBox3Dict[s]`= 列表框中所有文件的字符串

```
 Dictionary<string, string> listBox3Dict = new Dictionary<string, string>();

>         private bool listbox3job()
>         {
>             AxWMPLib.AxWindowsMediaPlayer axWmp = wfh.Child as AxWMPLib.AxWindowsMediaPlayer;
>                 {
>                     foreach (var selected in listBox3.Items)
>                     {
>                         string s = selected.ToString();
> 
>                         if (listBox3Dict.ContainsKey(s))
>                         {
WMPLib.IWMPPlaylist playlist = axWindowsMediaPlayer1.newPlaylist("myPlaylist", string.Empty);
                            // you can add songs to url on for loop 
                            WMPLib.IWMPMedia temp = this.axWindowsMediaPlayer1.newMedia(listBox3Dict[s]); //Load media from URL. 
                            playlist.appendItem(temp); //Add song to playlist.
                            // after you add all songs set the new playlist
                            this.axWindowsMediaPlayer1.settings.autoStart = true; //not necessary
                            this.axWindowsMediaPlayer1.currentPlaylist = playlist; //Set media player to use the playlist.
>                         }
>                     }
> 
>                 return true;
>             }
>             return false;
>         } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:56:56.843

您可以做的是创建播放器列表并开始播放该列表

```
private bool listbox3job()
{

    AxWMPLib.AxWindowsMediaPlayer axWmp = wfh.Child as AxWMPLib.AxWindowsMediaPlayer;
    WMPLib.IWMPPlaylist playlist = axWmp.newPlaylist("myPlaylist", string.Empty);

    foreach (var selected in listBox1.Items)
    {
        string s = selected.ToString();
        if (listBox3Dict.ContainsKey(s))
        {
            WMPLib.IWMPMedia temp = axWmp.newMedia(listBox3Dict[s]); //Load media from URL. 
            playlist.appendItem(temp); //Add song to playlist.
        }
    }
    axWmp.settings.autoStart = true; //not necessary
    axWmp.currentPlaylist = playlist; //Set media player to use the playlist.
    return true;
} 
```

[http://www.timwylie.com/playlist.html](http://www.timwylie.com/playlist.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:50:37.457

早些时候，我正在处理列表中的一组语音文件。我使用了 PlayStateChange 事件。从此事件中，您可以找到 MediaEnded 状态，您可以在其中将播放文件重新分配给列表中的下一项。

# jquery - 带有缩略图预览的图像文件上传 - 如 Zurb - 不工作？

> ID：16099825
> 
> 赞同：1
> 
> 时间：2013-04-19T07:48:57.083
> 
> 标签：jquery, image, wordpress, upload, preview

这是我所拥有的：

我正在尝试实现 ZURB 文件上传器，但是无法上传文件。我想知道我的 upload.php 文件是否有问题。该网站在 wordpress 上运行，我正在使用的表单是用户配置文件创建过程的一部分。

这基本上是我想做的事情：

- 仅将图像文件作为较大表单的一部分上传

-该文件必须放在自定义文件夹中，并且可以在配置文件过程中存储在那里（用户需要几分钟才能输入所有信息）。

- 预览图像文件为缩略图

这是JQ：

```
$(document).ready(function(){

var thumb = $('img#thumb'); 

new AjaxUpload('imageUpload', {
    action: $('form#newHotnessForm').attr('action'),
    name: 'userfile',
    onSubmit: function(file, extension) {
        $('div.preview').addClass('loading');
    },
    onComplete: function(file, response) {
        thumb.load(function(){
            $('div.preview').removeClass('loading');
            thumb.unbind();
        });
        thumb.attr('src', response);
    }
}); 
```

});

这是html：

```
<div class="preview">
<img id="thumb" width="50px" height="50px" src="<?php bloginfo('template_url'); ?>/images/thumbnail.png" />
</div>
<span class="wrap hotness">
<form id="newHotnessForm" action="<?php bloginfo('template_url'); ?>/upload.php" enctype='multipart/form-data'>                     
    <input type="file" id="imageUpload" size="20" accept="image/*"/>
    <label>Upload your image</label>
</form> 
```

这是upload.php文件：

```
$allowedExts = array("gif", "jpeg", "jpg", "png");
$extension = end(explode(".", $_FILES['userfile']["name"]));
if ((($_FILES['userfile']["type"] == "image/gif") 
|| ($_FILES['userfile']["type"] == "image/jpeg") 
|| ($_FILES['userfile']["type"] == "image/jpg") 
|| ($_FILES['userfile']["type"] == "image/png")) 
&& ($_FILES['userfile']["size"] < 20000000) 
&& in_array($extension, $allowedExts)) {
  if ($_FILES['userfile']["error"] > 0)
    {
    echo "Return Code: " . $_FILES['userfile']["error"] . "<br>";
    }
  else
    {
echo "Upload: " . $_FILES['userfile']["name"] . "<br>";
echo "Type: " . $_FILES['userfile']["type"] . "<br>";
echo "Size: " . ($_FILES['userfile']["size"] / 1024) . " kB<br>";
echo "Temp file: " . $_FILES['userfile']["tmp_name"] . "<br>";

if (file_exists("http://mysite.com/wp-content/themes/mytheme/uploads/" . $_FILES['userfile']["name"]))
  {
  echo $_FILES['userfile']["name"] . " already exists. ";
  }
else
  {
  move_uploaded_file($_FILES['userfile']["tmp_name"], "http://mysite.com/wp-content/themes/mytheme/uploads/" . basename($_FILES['userfile']['name']));
  echo "Stored in: " . "http://mysite.com/wp-content/themes/mytheme/uploads/" . $_FILES['userfile']["name"];
   }
 }
} else {echo "Invalid file";} 
```

我想知道我是否在这里遗漏了什么。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T04:33:39.623

我终于有上传文件的东西了。

就是这样：

1-由 bodi0 进行了上述建议的更改（谢谢！）

2-用这个改变了我的upload.php文件：

```
$dirImagePath=dirname(__FILE__);
move_uploaded_file($_FILES['userfile']['tmp_name'], $dirImagePath.'/uploads/'.$_FILES['userfile']['name']); 
```

找到解决方案是多么痛苦啊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:58:08.580

设置`name`将发布到您的服务器的文件表单元素。在您的情况下，HTML 代码应该是：

```
<input type="file" id="imageUpload" name="userfile" size="20" accept="image/*"/> 
```

# c++ - 使用 patsubst 将一条路径转换为另一条路径

> ID：16099833
> 
> 赞同：1
> 
> 时间：2013-04-19T07:49:46.097
> 
> 标签：c++, c, makefile, pattern-matching

为了使我的项目的目录结构更有条理，我想将相同模块的源文件放入单独的目录中。所有对象文件都应放入`obj`目录中。我也不想在 obj 目录中复制源代码树，所以我正在寻找一种方法来从源文件中删除目录部分以使其进入 obj 路径。

所以这是当前版本，它要求 obj 目录与源目录具有相同的布局。

```
OBJDIR:= obj
SRCDIR:= src

SRC := propertyfile/propertyfile.cpp otheritems/file.cpp otheritmes/subtree/bla.cpp
OBJ := $(patsubst %.cpp, $(OBJDIR)/%.o, $(SRC)) 
```

更清楚地说：我的消息来源位于

```
src/propertyfile/*
src/otheritems/*
src/otheritmes/subtree/* 
```

等等。

objfiles 应该都在 obj 中，没有中间目录。使用上面的 patsubst，它只是将 src 部分替换为 obj 使 ie`src/propertyfile/propertyfile.cpp`变成`obj/propertyfile/propertyfile.o`但我想要的是`obj/propertyfile.o`

一个关于这些模式如何工作以及它接受哪些参数的良好解释的指针也会有所帮助。

更新：

到目前为止，我通过使用以下行取得了一些进展：

```
OBJ :=      $(addprefix obj/,$(notdir $(SRC:.cpp=.o))) 
```

但是现在构建规则不再起作用，因为名称不匹配，所以我需要一个也适用于构建规则的模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:55:17.130

实现此目的的一种方法是使用[vpath](http://www.gnu.org/software/make/manual/make.html#General-Search)。

另一种方式，例如：

```
OBJ := ${SRC:%.cpp=${OBJDIR}/%.o} 
```

# ruby-on-rails - Rails 教程第 9.3 章失败的测试

> ID：16099838
> 
> 赞同：0
> 
> 时间：2013-04-19T07:50:05.730
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

我查看了及格问题，但找不到可以解决我的问题的问题。我得到了这些失败的测试。我什至通过浏览器访问了用户索引页面，并看到了登录标题。

```
Failures:

1) authorization for non-signed-in users in the Users controller visiting the edit page 
 Failure/Error: it { should have_selector('title', text: 'Sign in') }
   expected css "title" with text "Sign in" to return something
 # ./spec/requests/authentication_pages_spec.rb:75:in `block (5 levels) in <top (required)>'

2) authorization for non-signed-in users in the Users controller visiting the user index 
 Failure/Error: it { should have_selector('title', text: 'Sign in') }
   expected css "title" with text "Sign in" to return something
 # ./spec/requests/authentication_pages_spec.rb:85:in `block (5 levels) in <top (required)>'

Finished in 4.65 seconds
69 examples, 2 failures

Failed examples:

rspec ./spec/requests/authentication_pages_spec.rb:75 # authorization for non-signed-in 
users in the Users controller visiting the edit page 

rspec ./spec/requests/authentication_pages_spec.rb:85 # authorization for non-signed-in 
users in the Users controller visiting the user index 
```

Authentication_pages_spec.rb

```
describe "authorization" do

  describe "for non-signed-in users" do
    let(:user) { FactoryGirl.create(:user) }

    describe "when attempting to visit a protected page" do
      before do
        visit edit_user_path(user)
        fill_in "Email",    with: user.email
        fill_in "Password", with: user.password
        click_button "Sign in"
      end

      describe "after signing in" do

        it "should render the desired protected page" do
          page.should have_selector('title', text: 'Edit user')
        end
      end
    end

    describe "in the Users controller" do

      let(:user) { FactoryGirl.create(:user) }

      describe "visiting the edit page" do
        before { visit edit_user_path(user) }
        it { should have_selector('title', text: 'Sign in') }
      end

      describe "submitting to the update action" do
        before { put user_path(user) }
        specify { response.should redirect_to(signin_path) }
      end

      describe "visiting the user index" do
        before { visit users_path }
        it { should have_selector('title', text: 'Sign in') }
      end
    end 
```

路由.rb

```
SampleApp::Application.routes.draw do
resources :users
resources :sessions, only: [:new, :create, :destroy]

root to: 'static_pages#home'

match '/signup', to: 'users#new'
match '/signin', to: 'sessions#new'
match '/signout', to: 'sessions#destroy', via: :delete

match '/help', to: 'static_pages#help'
match '/about', to: 'static_pages#about'
match '/contact', to: 'static_pages#contact' 
```

users_controllers.rb

```
 class UsersController < ApplicationController
      before_filter :signed_in_user, 
                    only: [:index, :edit, :update]
      before_filter :correct_user, only: [:edit, :update]

      def show
        @user = User.find(params[:id])
      end

      def new
        @user = User.new
      end

      def index
        @users = User.all
      end

      def edit
        @user = User.find(params[:id])
      end

      def update
        @user = User.find(params[:id])
        if @user.update_attributes(params[:user])
          flash[:success] = "Profile updated"
          sign_in @user
          redirect_to @user
        else
          render 'edit'
        end
      end

      def create
        @user = User.new(params[:user])
        if @user.save
          sign_in @user
          flash[:success] = "Welcome to the Sample App!"
          redirect_to @user
        else
          render 'new'
        end
      end

      private

      def correct_user
        @user = User.find(params[:id])
        redirect_to(root_path) unless current_user?(@user)
      end  
    end 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:17:18.210

您的 Authentication_pages_spec.rb 中缺少以下代码：

```
describe "authorization" do

  subject { page } # This line.

  describe "for non-signed-in users" do
    let(:user) { FactoryGirl.create(:user) }
    .
    .
    . 
```

请参阅[http://ruby.railstutorial.org/chapters/filling-in-the-layout#sec-pretty_rspec](http://ruby.railstutorial.org/chapters/filling-in-the-layout#sec-pretty_rspec)。

或者，更换

```
it { should have_selector('title', text: 'Sign in') } 
```

和

```
page.should have_selector('title', text: 'Sign in') 
```

# spring - 找不到 Spring Security 标记库

> ID：16099840
> 
> 赞同：37
> 
> 时间：2013-04-19T07:50:12.383
> 
> 标签：spring, spring-mvc, spring-security

当我把`<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags"%>`

我将收到以下错误：

```
The absolute uri: http://www.springframework.org/security/tags cannot be resolved in either web.xml or the jar files deployed with this application 
```

但是我的*/lib*文件夹中有*spring-security-taglibs-3.1.3*等。有谁知道我还缺少什么？

 ** * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-11-10T23:23:47.470

添加此依赖项为我修复了它（使用 3.1.X.RELEASE）：

```
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-taglibs</artifactId>
    <version>${your-version}</version>
</dependency> 
```

taglib 现在可以正常工作：

`<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-19T07:53:42.920

**确保包含以下依赖项**

```
<dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.1.2.RELEASE</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-aop</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>3.1.2.RELEASE</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-aop</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>3.1.2.RELEASE</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-aop</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>3.1.3.RELEASE</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-aop</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-29T23:14:56.693

我正在使用 jetty 9 (jetty-maven-plugin) 以上无济于事。所以将下面的代码添加到 WEB-INF/web.xml 中，它就像魅力一样：

```
<servlet>
        <servlet-name>jsp</servlet-name>
        <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
        <init-param>
            <param-name>fork</param-name>
            <param-value>false</param-value>
        </init-param>
        <init-param>
            <param-name>xpoweredBy</param-name>
            <param-value>false</param-value>
        </init-param>
        <load-on-startup>3</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>jsp</servlet-name>
        <url-pattern>*.jsp</url-pattern>
        <url-pattern>*.jspf</url-pattern>
        <url-pattern>*.jspx</url-pattern>
        <url-pattern>*.xsp</url-pattern>
        <url-pattern>*.JSP</url-pattern>
        <url-pattern>*.JSPF</url-pattern>
        <url-pattern>*.JSPX</url-pattern>
        <url-pattern>*.XSP</url-pattern>
    </servlet-mapping> 
```

另外添加到 jetty-context.xml 的问题依然存在：

```
<Configure class="org.eclipse.jetty.maven.plugin.JettyWebAppContext">
    <Call name="setAttribute">
        <Arg>org.eclipse.jetty.server.webapp.WebInfIncludeJarPattern</Arg>
        <Arg>^$|.*/spring-[^/]*\.jar$|</Arg>
    </Call>
</Configure> 
```*

# ios - iOS：HTML5 与 Three.js 开发

> ID：16099843
> 
> 赞同：11
> 
> 时间：2013-04-19T07:50:29.857
> 
> 标签：ios, html, 3d, three.js, webgl

我计划开发一个带有 Three.js 页面的 HTML5，这样我就可以使用它实现 3D 屏幕，并以跨平台方法轻松支持移动平台。我读到 Three.js 使用 WebGL，但是 iOS 和 Android 浏览器不支持它，所以我无法开发这样的组合应用程序。

有人可以建议，我是否可以使用 Three.js 页面开发 HTML5 以在 iOS 和 Android 应用程序上实现 3D 交互或不作为 Web 应用程序？如果没有，请给我官方链接，其中提到它不受支持。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-20T18:18:52.120

Three.js 可以在没有 WebGL 的情况下正常工作。您可以使用 Canvas 渲染器——它在 Three.js 文档中有所描述，我相信您可以使用 google 甚至 Bing 在 github 上找到它。它不如使用 WebGL 快，但没有人在日产 Sentra 上参加蒙特卡洛比赛。

您不应该期望在任何移动平台上都能获得高性能的 3D —— 主要是因为 javascript 的性能可能非常缓慢。尝试使用移动设备（有和没有 webgl）访问一些不同的 Three.js 示例，以了解性能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-16T07:38:35.730

我试图在我的 iPad Air 上运行 Three.js Canvas 演示，结果很糟糕。通常 Safari 会崩溃，即使渲染正常，它也会执行 2-3 fps。所以看起来它现在在 iOS 设备上非常原始

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-07T06:08:56.490

iOS Safari 和 Android Chrome 已经支持 WebGL 好几年了。

您可能指的问题是 Android 的 WebView 或 iOS 的 UIWebView（您可以放入本机应用程序以显示网页的控件）可能支持也可能不支持 WebGL。[从 Android 5.0 开始，WebViews 显然支持 WebGL，](https://stackoverflow.com/questions/15395245/enabling-webgl-support-for-android-webview)尽管人们[遇到了问题](https://stackoverflow.com/questions/35746920/android-webview-and-webgl)

另一种选择是使用类似[CocoonJS](https://www.ludei.com/cocoonjs/)的东西。他们显然为 Android 4.0+ 和 iOS 8+提供了[自定义 webview 实现。](http://docs.cocoon.io/article/webview-engines-differences/)

至于性能，three.js 在简单的移动场景中表现得很好。有很多例子。一般而言，移动设备上的 3D 需要相对于桌面，尤其是使用three.js 优化的资产（更低的多边形模型、更小的纹理、更简单的着色器、更少的灯光等...）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-01T00:43:42.653

iOS 和 Android 浏览器对 webgl 的支持不如 Web 浏览器，有时您可以减少渲染效果使其工作。通常这样做。对于应用程序，android webview 渲染能力较低。ios有更好的。

你可以在你的应用程序中插入一些渲染引擎，例如 XWalkView，这是我的一篇[**文章**](https://stackoverflow.com/a/40858878/6521116)，如何在我的 android4.2.0 应用程序中使用它来渲染 3D 模型。对于IOS，也有相关的解决方案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-07T21:28:28.557

此问题的所选答案建议使用**Three.js CanvasRenderer**，但如 Three.js 文档中所示**[，](https://threejs.org/docs/#examples/renderers/CanvasRenderer)** CanvasRenderer 已被弃用：

> 注意：Canvas 渲染器已被弃用，不再是 Three.js 核心的一部分。

需要注意的是，它仍然可以用于简单的 3d 场景，可以在 Github 上找到**[这里](https://github.com/mrdoob/three.js/blob/master/examples/js/renderers/CanvasRenderer.js)**

Androids WebView v36 及更高版本支持 WebGL，如下**[所示](https://developer.chrome.com/multidevice/webview/overview)**。或者，对于较旧的 Android Chrome 浏览器，可以通过在浏览器中键入：`chrome://flags`并选择出现在浏览器窗口中**启用 WebGL标题下的****启用**链接，或通过从 Android Google Play 商店更新 webview 来启用 WebGL。

 **自 iOS 8.0b 起，Mobile Safari 就支持 WebGL。

在[mobilehtml5.org](http://mobilehtml5.org/)，您可以查看哪些移动设备版本支持特定的 HTML5 功能：

[![移动 WebGL 支持](https://i.stack.imgur.com/ovjTg.png)](https://i.stack.imgur.com/ovjTg.png)

Sony Xperia Android 2.3 也支持 WebGL。**

# asp.net - 在 asp.net 中单击时图像未放大

> ID：16099847
> 
> 赞同：1
> 
> 时间：2013-04-19T07:50:40.377
> 
> 标签：asp.net, image

在我的页面中，我有一个大图像和一组小单元图像。大图像将在页面加载时加载。但是当我单击小图像时，它会放大并代替大图像显示。小图像显示在页面上。但它对点击它们没有影响

这是我的代码

```
 <div class="invDetailImage">
         <img id="imgenlarge" src="" runat="server" alt="" align="middle" style="max-height:380px; max-width:579px; vertical-align:middle;"/>
          <asp:Label runat="server" ID="lblerr"  Visible="false"  style="max-height:380px; max-width:579px; vertical-align:middle;font-size:large;"></asp:Label>
    </div>
    <!-- SMALL IMAGES -->
    <div class="invDetailPhotoBox" runat="server" id="photobox"> 
       <asp:Label runat="server" ID="lblphotos" Text="Select a photo below to view in the window above:"></asp:Label><br />
       <asp:Repeater runat="server" ID="rptrinventoryphotos"  onitemdatabound="rptrinventoryphotos_ItemDataBound">
            <ItemTemplate>
               <img id="imgInventory" src="" runat="server" alt='<%#Eval("ImagePath")%>' style="display:none;"  />
                 <div onclick="large('<%#Eval("ImagePath")%>')" style="float:left;clear:none; margin-left:-12px;">
                  <asp:Image ID="Image1" Visible="true"  runat="server" />
                 </div>
              </ItemTemplate>
        </asp:Repeater>
   </div>

<script type="text/javascript"> function large(src) { 
var str=src; document.getElementById("ctl00_ContentPlaceHolder1_imgenlarge").src = (str); 
} 

function loading(img) { img.src = "images/loading.gif"; } 
</script>

     protected void rptrinventoryphotos_ItemDataBound(object sender, RepeaterItemEventArgs e)
     {
        HtmlImage img1 =(HtmlImage) e.Item.FindControl("imgInventory");
        Image img = (Image)e.Item.FindControl("Image1");
        img.ImageUrl = "http://localhost:22525/DWLive/ImageResizeHandler.ashx?imgPath=" + img1.Alt + "&width=75&height=56";

        img.Style.Add("margin-left", "-12px");
        img.Style.Add("background-image", "url('images/loading9.gif')");
        img.Style.Add("background-repeat", "no-repeat");
        img.Style.Add("background-position", "center left");
        //img.Attributes.Add("onclick", "large('" + img1.Alt + "')");
        string[] a = img1.Alt.Split((@"/").ToCharArray());
      } 
```

有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:06:09.667

问题出在 JavaScript 中。我将其更改为：

```
<script type="text/javascript">

    function large(link) { 
        var str = link;
    }

    document.getElementById("ctl00_ContentPlaceHolder1_imgenlarge").src = (str); 
```

# java - 使用 android Facebook API（版本 3.0+）更新我的 Facebook 状态

> ID：16099849
> 
> 赞同：1
> 
> 时间：2013-04-19T07:50:55.467
> 
> 标签：java, android, facebook, status

我整晚都在想办法**用 android facebook API（版本 3.0+）更新我的 Facebook 状态。** 我看到很多关于这个的帖子，但是所有的帖子都是旧的，使用 facebook API 的 2.0 或更低版本，现在已经贬值了。我只需要一个关于简单请求和执行的简单示例（据我所知，这是你必须做的，我永远无法让它工作。我不确定我是否必须先授予权限或什么。

这是我尝试过的（不起作用）：

```
public void facebook()
{

    // start Facebook Login
    Session.openActiveSession(this, true, new Session.StatusCallback() {

        // callback when session changes state
        public void call(
            final Session session,
            SessionState state,
            Exception exception)
        {
            if (session.isOpened())
            {

                Request.newStatusUpdateRequest(
                    session,
                    "yolo!",
                    new Request.Callback() {

                        public void onCompleted(Response response)
                        {
                                 response.getRequest().executeAsync().execute(null);
                        }

                    });
            }
        }

    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T05:48:06.640

```
public void updateMyStatus(){

    Session.openActiveSession(MainActivity.this,true,new StatusCallback(){
        @Override
        public void call(Session session, SessionState state, Exception exception){

            if (session.isOpened()){

                Request.executeStatusUpdateRequestAsync(
                        session,
                        "Hello Social Networking Site",
                        new Request.Callback() 
                {
                    @Override
                    public void onCompleted(Response response) 
                    {
                        Toast.makeText(MainActivity.this,"Status updated",Toast.LENGTH_SHORT).show();
                    }
                });

            }
        }
    });
} 
```

# c# - Catel MVVM 结构

> ID：16099851
> 
> 赞同：2
> 
> 时间：2013-04-19T07:51:09.790
> 
> 标签：c#, wpf, mvvm, catel

我有一个简单的 WPF 应用程序，我使用 Catel (3.5) 框架来使用 MVVM。Visual Studio 中 Catel 的默认结构是：

```
Solution:
  Project:
    FolderView
    FolderViewModel
    FolderModel 
```

我想将结构更改为

```
Solution:
  ProjectView
  ProjectViewModel
  ProjectModel 
```

通过这种方式，我完全分离了 M-VM-V 并添加了参考。

我知道如果遵循命名约定，Catel 会自动扫描项目以查找 Viewmodel。

我无法在第二个结构上完成这项工作，任何建议都会被预处理。

**编辑**1：我在 App.xaml.cs 中添加了以下代码

```
var viewModelLocator = ServiceLocator.Default.ResolveType<IViewModelLocator>();
viewModelLocator.NamingConventions.Add("CatelV2ViewModel.ViewModels.[VW]ViewModel"); 
```

这对我不起作用，我不知道为什么。我确定我的程序集名称是正确的并且我以*ViewModel*结束我的类名。

**编辑**2：如果我添加以下代码，该应用程序可以工作：

```
viewModelLocator.Register(typeof(MainWindow), typeof(MainWindowViewModel)); 
```

但是我仍然想知道为什么当我添加 NamingConvention 时它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:03:20.827

Catel 使用了许多不同的命名约定。大多数情况下，它通过检查同一项目中的 /Views、/ViewModels、/Models 来做到这一点。

有关 Catel 中命名约定的更多信息，请访问文档：

[https://catelproject.atlassian.net/wiki/display/CTL/Naming+conventions](https://catelproject.atlassian.net/wiki/display/CTL/Naming+conventions)

您可能想要自定义[ViewLocator](https://catelproject.atlassian.net/wiki/display/CTL/ViewLocator)和[ViewModelLocator](https://catelproject.atlassian.net/wiki/display/CTL/ViewModelLocator)。

# android - android network stats: 维护有关打包传输/接收信息的简单方法

> ID：16099852
> 
> 赞同：0
> 
> 时间：2013-04-19T07:51:15.523
> 
> 标签：android, network-state

我有一个 android 应用程序来监视通过网络接收/传输的字节/数据包。我在文本视图中显示这些信息：

```
<TextView
            android:id="@+id/networkInfo"
            android:layout_below="@id/toggle_apn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:layout_marginTop="20dp"
            android:background="@drawable/back"
            android:gravity="left"
            android:textSize="25dip"
            android:text="Not connected" /> 
```

然后通过java代码：

```
mStartRX = TrafficStats.getTotalRxBytes();
mStartTX = TrafficStats.getTotalTxBytes();
mStartPRX=TrafficStats.getTotalRxPackets();
mStartPTX=TrafficStats.getTotalTxPackets();

if (mStartRX == TrafficStats.UNSUPPORTED || mStartTX == TrafficStats.UNSUPPORTED) {
    ...
}else{
    mHandler.postDelayed(mRunnable, 1000);
} 
```

mRunnable 运行方法是：

```
public void run() {
    TextView RX = (TextView)findViewById(R.id.networkInfo);
    long rxBytes = TrafficStats.getTotalRxBytes()- mStartRX;
long txBytes = TrafficStats.getTotalTxBytes()- mStartTX;
long rxPackets=TrafficStats.getTotalRxPackets()-mStartPRX;
    long txPackets=TrafficStats.getTotalTxPackets()-mStartPTX;

    RX.setText("Here I put the data above");
mHandler.postDelayed(mRunnable, 1000);
} 
```

问题是，当我恢复我的活动时，我必须“调用”处理程序，并且字节数从 0 重新开始。如何在我的活动的整个生命周期中轻松地跟踪值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:46:42.453

通过将 mstart 值保存到共享首选项中然后将它们恢复到“onResume”中来解决。

# c# - Exchange 和 PowerShell

> ID：16099853
> 
> 赞同：3
> 
> 时间：2013-04-19T07:51:19.077
> 
> 标签：c#, powershell, exchange-server-2010

我目前正在开发一个 Exchange 连接器并在 C# 中使用 PowerShell 脚本，如下所示：

```
public void Connect(string exchangeFqdn_, PSCredential credential_)
{
    var wsConnectionInfo = new WSManConnectionInfo(new Uri("http://" + exchangeFqdn_ + "/powershell"), 
                                            "http://schemas.microsoft.com/powershell/Microsoft.Exchange", credential_);

    wsConnectionInfo.AuthenticationMechanism = AuthenticationMechanism.Default;

    Runspace = RunspaceFactory.CreateRunspace(wsConnectionInfo);
    Runspace.Open();
} 
```

`Powershell`然后，我使用该对象执行我的脚本：

```
public override List<PSObject> ExecuteCommand(Command command_)
{
    List<PSObject> toreturn;
    PowerShell powershell = null;
    try
    {
        powershell = PowerShell.Create();
        powershell.Commands.AddCommand(command_);
        powershell.Runspace = Runspace;
        toreturn = new List<PSObject>(powershell.Invoke());
    }
    finally
    {
        if (powershell != null) 
            powershell.Dispose();
    }
    return toreturn;
} 
```

我可以使用以下命令添加邮箱：

```
Command command = new Command("New-Mailbox");
command.Parameters.Add("Name", name_);
command.Parameters.Add("OrganizationalUnit", ou_);
command.Parameters.Add("UserPrincipalName", upn_);
command.Parameters.Add("FirstName", firstname_);
command.Parameters.Add("Initials", initials_);
command.Parameters.Add("LastName", lastname_);
command.Parameters.Add("ResetPasswordOnNextLogon", false);
command.Parameters.Add("Password", secureString_); 
```

但是当我尝试删除此邮箱（或另一个邮箱）时，我遇到了一个问题：

```
Command command = new Command("Remove-Mailbox");
command.Parameters.Add("Identity", identity_);
command.Parameters.Add("Permanent", true); 
```

> System.Management.Automation.RemoteException：无法调用此函数，因为当前主机没有实现它。

我不明白。为什么我可以添加用户，但不能删除它？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:42:30.513

[感谢这个话题](https://stackoverflow.com/questions/4219095/running-a-powershell-command-in-c-sharp-errors-with-cannot-invoke-this-functio)，我找到了答案。

我改变了`Command`这样的对象：

```
 Command command = new Command("Remove-Mailbox");
        command.Parameters.Add("Identity", identity_);
        command.Parameters.Add("Permanent", true);
        command.Parameters.Add("Confirm", false); 
```

它就像一个魅力。谢谢 ！

我希望能帮助别人！

# php - 表格再打印一个单元格而不是新行

> ID：16099856
> 
> 赞同：0
> 
> 时间：2013-04-19T07:51:29.613
> 
> 标签：php, html

我试图将表格单元格的打印限制为每行 3 个。这在一个示例中有效，但当我尝试在站点的其他地方使用相同的代码时显然不起作用。这是代码：

```
$n=3;
                echo "<table cellpadding='10' cellspacing='10' style='margin-right:-70px;'><tr>"; 
                $users_count = count($users);

                for($i=0; $i<$users_count;$i++)
                {
                    $temp = array();
                    $temp = $users[$i];
                    echo "<td>";
                    echo "<div id='kitchen_box'>";

                        echo "<div id='kitchen_box_details'>";
                            echo "<h4>".$temp->fullname . "</h4><br>";
                            if(strcmp($temp->address, '') == 0)
                                echo $temp->city;
                            else
                                echo $temp->address.", ".$temp->city;
                        echo "</div>";      
                            echo "<div id='kitchen_box_pic'><img id='kitchen_image' src='".$temp->profilepic."' /></div>";
                    echo "</div>";
                    echo "</td>";

                    if($i != 0){
                        if($i % $n == 0 && $i != $users_count-1){
                            echo "</tr><tr>";
                        }
                        else{
                            echo ""; //if it is the last in the loop - do not echo
                        }
                    }
                }
                echo "</table>"; 
```

我不明白为什么这不起作用！我非常感谢您对此事的支持:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:01:51.570

您的代码有几个问题。但是您的主要问题是您使用的是从零开始的增量，而是进行了从 1 开始的检查。因此，您的结果表`$i!=0 && $i%$n==0`如下所示：

```
$i    $result
0    false
1    false
2    false
3    true 
```

所以，你看，结果关闭了第四个单元格之后的行，而不是第三个单元格。要解决此问题，请将行更改为：

```
if($i % $n == $n-1 && $i != $users_count-1){ 
```

您还应该在结束标签中包含一个结束`</tr>`标签`</table>`。

顺便说一句，您不应该为页面上的多个元素提供相同的 ID。您的每个标签`kitchen_box`和`kitchen_box_div`DIV 标签都将具有相同的 ID。如果您希望 CSS 使用此功能，请使用类。否则，您可以尝试将 $i 的值添加到每个 ID。

*根据要求挑剔：*

该行`$temp = array();`似乎有点毫无意义，特别是因为您不希望 $temp 成为一个数组，而是一个对象。

`else{ echo ""; }`线条也是多余的。

您现在不需要`if($i != 0)`检查，因为该案例将不再通过下一个测试。

否则代码对我来说似乎很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:02:38.193

我认为问题在于您的 $i 从零开始。

在创建新行之前，让我们看看您的条件：

```
if($i != 0){
                    if($i % $n == 0 && $i != $users_count-1) 
```

如果 $i = 0，则第一个条件不匹配。然后第二个不是 $i = 1 和 $i = 2。然后您的脚本在第一次匹配您的 if 条件之前在您的第一行中创建另一个 ...。

我想你可以在 for 指令开始之后移动这部分代码：

```
 for($i=0; $i<$users_count;$i++)
            {
                if($i != 0)
                {
                    if($i % $n == 0 && $i != $users_count-1){
                        echo "</tr><tr>";
                    }
                    else{
                        echo ""; //if it is the last in the loop - do not echo
                    }
                }

                // Echo your <td> ... </td>
            }
            echo "</tr></table>"; 
```

# android - twitter Uri Intent 为空

> ID：16099863
> 
> 赞同：0
> 
> 时间：2013-04-19T07:51:50.123
> 
> 标签：android, twitter

`WebView`重定向到 Twitter_Activity时无法获取 Uri

在`LoginButton`点击

```
private void loginToTwitter() {
        new AsyncTask<Void, Void, Void>(){
            @Override
            protected void onPreExecute() {
            super.onPreExecute();
                pbr =  new ProgressDialog(Twiiter_MainActivity.this);
                pbr.setMessage("Loding..");
                pbr.show();         
                checklogin = false;
            }

            @Override
            protected Void doInBackground(Void... params) {
                if (!isTwitterLoggedInAlready()) {
                    ConfigurationBuilder builder = new ConfigurationBuilder();
                    builder.setOAuthConsumerKey(TWITTER_CONSUMER_KEY);
                    builder.setOAuthConsumerSecret(TWITTER_CONSUMER_SECRET);
                    Configuration configuration = builder.build();
                    TwitterFactory factory = new TwitterFactory(configuration);
                    twitter = factory.getInstance();
                     try {
                        requestToken = twitter.getOAuthRequestToken(TWITTER_CALLBACK_URL);                      
                        allReadynew  = true;
                    } catch (TwitterException e) {
                        e.printStackTrace();
                    }

                } else {
                    // user already logged into twitter                 

                     checklogin = true;
                }
                return null;
            }
            protected void onPostExecute(Void result) {
                    try {                                           
                     if(pbr!=null){
                         pbr.dismiss();
                     }
                     Twiiter_MainActivity.this.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(requestToken.getAuthenticationURL())));
                     } catch (Exception e) {
                     e.printStackTrace();                    
                     }              

            };
        }.execute();
    } 
```

我在这里得到了请求令牌和所有东西，但是`webview`在登录 Twitter 帐户后重定向到然后。回到`Activity`我的下面`code`执行。

```
@Override
    protected void onResume() {
        super.onResume();
        init();
    }

private void init(){

        boolean chkNet = HotSpotSettings.isNetworkAvailable(mcontext);
        if (chkNet == true) {
            // Check if twitter keys are set
            if(TWITTER_CONSUMER_KEY.trim().length() == 0 || TWITTER_CONSUMER_SECRET.trim().length() == 0){
                // Internet Connection is not present
                UtilityCommon.showDialogwithTitle(mcontext,"Please set your twitter oauth tokens first!");          
                return;
            }

            if (isTwitterLoggedInAlready()) {               
               uri = getIntent().getData();
                    // Here I m getting Null value from Uri

            }           
        }else{
            UtilityCommon.showDialogwithTitle(mcontext, HotSpotSettings.NO_NETWORK);
            return;
        }       
    } 
```

`uri`来自`Null`，`Intent`请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T09:02:57.057

我会尝试重写这一行：

```
Twiiter_MainActivity.this.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(requestToken.getAuthenticationURL()))); 
```

对此：

```
Intent intent = new Intent(CurrentActivity.this, targetActivity.class);
intent.setData(Uri.parse(requestToken.getAuthenticationURL());
startActivity(intent); 
```

没有看到你班上的其他人，我不明白你为什么要调用`startActivity()`from 方法`twiiter_MainActivity.this`，因为看起来你应该完全有能力没有它。

# c++ - 用 C++ 保存文件没有写入数据

> ID：16099864
> 
> 赞同：0
> 
> 时间：2013-04-19T07:51:50.437
> 
> 标签：c++, ifstream, ofstream, poco-libraries

我有一个带有成员clientCache的类：

```
 public:
        LRUCache<string, string>* clientCache; 
```

缓存由以下方式启动：

```
 clientCache = new LRUCache<string, string>(3);

    //Reset cache to stored values if exist:
    ifstream ifs(this->cachePath.c_str(), ios::binary);

    // Verify that file exists
    if(ifs.good()){
        ifs.read((char *)&this->clientCache, sizeof(this->clientCache));
        printf("Persistent cache file loaded");
    } 
```

在析构函数中：

```
 ofstream ofs(this->cachePath.c_str(), ios::binary);
    ofs.write((char *)&this->clientCache, sizeof(this->clientCache));
    printf("Persistent cache file written with:");
    printf((char*)&this->clientCache); //-> Nothing gets printed 
```

尝试加载回上一步写入的文件失败：

```
 ifstream ifs(this->cachePath.c_str(), ios::binary);
    // Verify that file exists
    if(ifs.good()){
        ifs.read((char *)&this->clientCache, sizeof(this->clientCache));
        printf("Persistent cache file loaded");
    } 
```

打印输出真的应该是空的吗？这是不是保存失败的信号。LRUCache 类的内容（方法/成员）是否重要，即如果我尝试存储所有键值而不是整个实例的数据，我会更成功吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:08:45.317

你混合[`std::basic_ostream::write`](http://www.cplusplus.com/reference/ostream/basic_ostream/write/)和[`printf`](http://www.cplusplus.com/reference/cstdio/printf/?kw=printf)，它们是不相关的。`write`用于字符/字节数据的未格式化输出，而`printf`c[样式](/questions/tagged/c "显示标记为“c”的问题")格式化输出。

此外，您不能将类写入磁盘并以这种方式读回，因为对象的二进制布局，尤其是虚函数表的地址，可能因程序的一次运行与另一次运行不同。

在这种特殊情况下，您甚至可以只写入和读取指向动态内存的指针。当您读回指针时，它应该指向的内存可能不再被分配。

最好编写一个适当的输入和输出运算符，它只读取和写入所需的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:13:13.470

```
printf((char*)&this->clientCache); //-> Nothing gets printed 
```

我认为这不符合您的要求。假设`clientCache`是一个指针

```
LRUCache<string, string>* clientCache; 
```

发生的是打印指针值（这不应该工作），而不是存储在其中的对象。
无论如何，更好的方法是使用`<<`and`>>`运算符来写入和读取对象

# java - 初始化 log4j 中的警告

> ID：16099871
> 
> 赞同：2
> 
> 时间：2013-04-19T07:52:23.827
> 
> 标签：java, log4j

运行 struts 应用程序时出现以下错误。

```
13/04/19 12:42:21 log4j:WARN No appenders could be found for logger (org.apache.struts.util.PropertyMessageResources).
13/04/19 12:42:21 log4j:WARN Please initialize the log4j system properly.
13/04/19 12:42:21 log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

我的 log4j.properties 文件是：

```
log4j.threshold=ALL
log4j.rootLogger=ALL,DebugAppender,InfoAppender,RECEIPTAppender
#log4j.rootLogger=DEBUG,DebugAppender
log4j.category.DebugAppender.access=DEBUG
log4j.appender.DebugAppender=org.apache.log4j.DailyRollingFileAppender
log4j.appender.DebugAppender.Threshold=DEBUG
log4j.appender.DebugAppender.File=C:/APWD/ServerLogs/debug/assampwd.log
log4j.appender.DebugAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.DebugAppender.layout.ConversionPattern=%d |[%t]| %-5p |%c |- |%m|%n
#log4j.rootLogger=INFO,InfoAppender
log4j.category.InfoAppender.access=INFO
log4j.appender.InfoAppender=org.apache.log4j.DailyRollingFileAppender
log4j.appender.InfoAppender.Threshold=INFO
log4j.appender.InfoAppender.File=C:/APWD/ServerLogs/debug/assampwd.log
log4j.appender.InfoAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.InfoAppender.layout.ConversionPattern=%d |[%t]| %-5p |%c |- |%m|%n
#log4j.logger.com.ctmis.hibernate=ERROR, RECEIPTAppender
log4j.category.RECEIPTAppender.access=ERROR
log4j.appender.RECEIPTAppender=org.apache.log4j.DailyRollingFileAppender
log4j.appender.RECEIPTAppender.Threshold=ERROR
log4j.appender.RECEIPTAppender.File=C:/APWD/ServerLogs/debug/assampwd.log
log4j.appender.RECEIPTAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.RECEIPTAppender.layout.ConversionPattern=%d |[%t]| %-5p |%c |- |%m|%n 
```

我的 log4j.properties 文件位于 WEB-INF 文件夹中。我在 stackoverflow 中找到了类似的主题，但对我没有用，所以我发布了它。如果有人可以帮助我，我将不胜感激，这是一条警告消息，但会导致某些模块在应用程序中无法正常工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:57:19.953

您的 log4j.properties 文件需要位于[classpath 的根目录中](https://stackoverflow.com/questions/1485987/log4j-properties-file-where-to-put-it)。将文件复制到`WEB-INF/classes`您的战争文件内的文件夹中。

如果您使用的是 Maven，这应该涉及在运行打包命令之前将您的文件移动到项目的 src/main/resources 文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T16:01:53.053

log4j 配置文件需要位于类路径的根目录中。在 netbeans 中，当你创建一个 web 应用程序项目时，路径是 src\java。您可以通过右键单击项目 -> 属性 -> 源来查看源包文件夹。您可以将文件放在 src\java 文件夹中或创建一个新文件夹并从项目属性菜单中添加它。

# android - 输入类型文本错误的占位符值

> ID：16099872
> 
> 赞同：0
> 
> 时间：2013-04-19T07:52:24.367
> 
> 标签：android, html

我有这个输入字段

```
<input type="text" placeholder="Placeholder Text..." id="adddress" maxlength="80"/> 
```

但是，它显示了我在另一个网站上用手机输入的电子邮件地址，这是一种奇怪的行为。

我在stackoverflow上找到[了这个](https://code.google.com/p/android/issues/detail?id=24626)谷歌故障排除和[这个。](https://stackoverflow.com/questions/11576226/placeholder-text-for-an-input-type-number-does-not-show-in-webkit-ics)但两者似乎都有 type="number" 的问题。我将输入字段更改为此。

```
<input type="text" onfocus="this.type='number'" onblur="this.type='text'" placeholder="placeholder text"/> 
```

但它不起作用。它只发生在 Android 4.x 中。有没有人遇到过类似的情况，有什么建议给我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:58:22.913

如果有人有同样的问题：

```
Delete the formula data on the phone. (Adnroid 4.x Stock Browser.), it seems to solve the problem. 
```

# java - 在Android中使用不同的图像将对象旋转360度？

> ID：16099884
> 
> 赞同：1
> 
> 时间：2013-04-19T07:53:10.557
> 
> 标签：java, android, rotation, image-rotation

我正在创建一个 Android 应用程序来将 Car 的图像旋转 360 度。我想用同一对象（例如汽车）的不同图像文件旋转对象

这是我想在我的应用程序中实现的[**示例。**](http://www.cardekho.com/hyundai-eon-360-view.htm)

**是否可以在 Android 中旋转对象时使用不同的图像？**

**是否有任何 API 或类可用于此？**

这是我的安卓代码 -

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Matrix;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.ImageView;
public class MainActivity extends Activity implements OnTouchListener {

private ImageView dialer;
private float y=0;
public boolean onTouch(View v, MotionEvent event) {
    double r=Math.atan2(event.getX()-dialer.getWidth()/2, dialer.getHeight()/2-event.getY());
    int rotation=(int)Math.toDegrees(r);
    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            break;
        case MotionEvent.ACTION_MOVE:
            //x=event.getX();
            y=event.getY();
            updateRotation(rotation);
            break;
        case MotionEvent.ACTION_UP:
            break;
    }//switch       

    return true;

}//onTouch
private void updateRotation(double rot){
    float newRot=new Float(rot);
    Bitmap bitmap=BitmapFactory.decodeResource(getResources(),R.drawable.round_button_big);
    Matrix matrix=new Matrix();
    matrix.postRotate(newRot,bitmap.getWidth()/2,bitmap.getHeight()/2);
    if(y>250){
        Bitmap reDrawnBitmap=Bitmap.createBitmap(bitmap,0,0,bitmap.getWidth(),bitmap.getHeight(),matrix,true);
        dialer.setImageBitmap(reDrawnBitmap);
    }
    else{
        Bitmap reDrawnBitmap=Bitmap.createBitmap(bitmap,0,0,bitmap.getWidth(),bitmap.getHeight(),matrix,true);
        dialer.setImageBitmap(reDrawnBitmap);
    }
}
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    dialer = (ImageView) findViewById(R.id.imageView1);
    dialer.setOnTouchListener(this);
    }//onCreate

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:08:30.440

如果你有X张汽车不同角度的图片，你只需要在想改变ImageView的时候听onTouch。

我建议使用[LevelListDrawable](http://developer.android.com/reference/android/graphics/drawable/LevelListDrawable.html)并使用[setImageLevel](http://developer.android.com/reference/android/widget/ImageView.html#setImageLevel%28int%29)平滑地遍历它们。

# python - URL配置错误Django

> ID：16099885
> 
> 赞同：2
> 
> 时间：2013-04-19T07:53:13.683
> 
> 标签：python, django, urlconf

我有一个链接

```
 a href="editYou/{{costumer.slug}}" 
```

和 URL 部分

```
(r'editYou/<?P(costumerSlug>.*)/$', 'editYou'), 
```

指向方法

```
def editYou(request, costumerSlug): 
```

但 Django 显示错误：

```
The current URL, profile/editYou/es, didn't match any of these. 
```

你怎么帮我找出是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T07:56:53.717

你的模式错了，应该是

```
r'editYou/(?P<costumerSlug>.*)/$'
#         ^^^^
#   not   <?P(costumerSlug>.*) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:56:46.187

最好将您的网址命名为：

```
(r'editYou/(?P<costumerSlug>.*)/$', 'editYou', name="edit"), 
```

然后在您的模板中，您可以使用：

```
 a href="{% url edit costumer.slug %}" 
```

# html - Web SQl 数据库 我的数据库在哪里

> ID：16099897
> 
> 赞同：0
> 
> 时间：2013-04-19T07:54:14.563
> 
> 标签：html, web-sql

[我在http://www.tutorialspoint.com/html5/html5_web_sql.htm](http://www.tutorialspoint.com/html5/html5_web_sql.htm)找到了一个简洁的教程。听起来学习这个很好，但我找不到数据库的位置，我认为它创建了两个但我不确定。创建数据库的代码在这里没有给出路径：

```
 var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024); 
```

我正在使用本地存储，所以数据库必须在我的计算机上，但是在哪里？我在这里发现了一个类似的问题，但即使有回复，提问者仍然没有得到他的数据库的位置。我在 Chrome 中使用了“检查元素”，但它也没有给出位置。我知道数据库已经创建并且数据被写入和读取，因为代码表明了这一点。谢谢，保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:57:57.223

数据库文件的路径应该是这样的

C:\Users\USER_NAME\AppData\Local\PROVIDER_NAME\BROWSER_NAME\User Data\Default\databases\IP_ADDRESS

# vim - 在 Vim 中，进入新标签页时，如何忽略 BufEnter 事件？

> ID：16099898
> 
> 赞同：0
> 
> 时间：2013-04-19T07:54:23.127
> 
> 标签：vim

我有一些运行 Vimscript 函数的自动命令。该函数绑定到`TabEnter`and `BufEnter`。

但是，当有人进入一个新选项卡时，该函数会运行多次，因为两个 autocmds 都会触发（并且`TabEnter`似乎在`BufEnter`使用新缓冲区再次触发之前使用先前的“当前”缓冲区触发......我认为）。

无论如何，当有人进入新标签时，我怎样才能只运行一次我的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:08:04.833

您没有告诉我们什么时候需要触发您的功能；也许您的事件组合（`TabEnter`并且`BufEnter`有些不相关；如果两个选项卡中显示相同的缓冲区怎么办？）已关闭，并且可以通过选择其他事件来解决问题。

除此之外，您还可以：

*   将最后处理的缓冲区 ( `bufnr('')`) / window ( `winnr()`) / ... 存储在脚本局部变量中，如果相同，则短路您的函数
*   如果问题是您的函数延迟很长，请存储时间戳 ( `localtime()`) 并在时间过短时短路
*   如果您可以控制标签切换（但您可能没有），`:noautocmd`并且`:set eventigore+=...`可以解决此问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T12:54:34.637

我通过以下方式解决了这个问题：

*   `TabLocal`设置选项卡局部变量`TabEnter`，然后处理新选项卡中的所有缓冲区
*   `BufEnter`查找选项卡局部变量；如果存在，它将清除它并且不执行任何其他操作；如果不存在，它会处理缓冲区。

这是[我的代码](https://github.com/airblade/vim-gitgutter/blob/d420a445363bef98dc50fd622c5c96b202abd605/plugin/gitgutter.vim#L209-L217)。

# apache - 域配置 W WW 或 WWWW

> ID：16099900
> 
> 赞同：-1
> 
> 时间：2013-04-19T07:54:36.477
> 
> 标签：apache, dns, cpanel

您好，在 tomcat 上托管的一个 Web 应用程序有多个域。我的服务器由网络主机管理器和 cPanel 管理。如果您键入带或不带 www 的域，则此域已配置好并显示 Web 应用程序

现在我想做这个配置。如果有人键入 w.domain.com、ww.domain.com 或 wwww.domain.com 也转到 Web 应用程序。

我不知道我必须在哪里进行此配置。我必须使用 1,2 和 4 W 在 DNS 上添加 CNAME 注册吗？还是apache上的一些配置？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:15:13.660

两个都。CNAME 只是对 dns 系统将为您解析的 IP 记录的引用。Apache 服务器仍然看到“w”、“ww”或“ww”进入。

但是，Apache 很可能被配置为接受 *.domain.com，这意味着您不需要更改任何内容。

# android - zipalign' 未被识别为内部或外部命令

> ID：16099902
> 
> 赞同：11
> 
> 时间：2013-04-19T07:54:41.067
> 
> 标签：android

我写了一个安卓应用。我在 Windows 7 的 cmd 上键入 zipalign myApp.apk ，我得到：

```
zipalign' is not recognized as an internal or external command operable program or batch file 
```

问题是什么

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-10-21T18:14:09.470

`zipalign.exe`可以在构建工具中找到（我的 PC 中的路径是`C:\Users\[user name]\Developer\adt-bundle-windows-x86_64-20131030\sdk\build-tools`），在我的构建 19.1.0 和 20.0.0 文件夹中。如果找不到，请启动 Windows 资源管理器并搜索`zipalign.exe`，可能在 中`C:\`，除非您已安装在另一个驱动器中。

复制`zipalign.exe`到与 build-tools 相同级别的 tools 文件夹（在我的情况下，它是`C:\Users\[user name]\Developer\adt-bundle-windows-x86_64-20131030\sdk\tools`）。完成后，我可以成功编译。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-02-08T20:47:28.733

去

> Android/sdk/build-tools/VERSION/zipalign

将 zipalign.exe 复制到当前目录

然后运行它。例子：

[![在此处输入图像描述](https://i.stack.imgur.com/1JgEG.png)](https://i.stack.imgur.com/1JgEG.png)

[![在此处输入图像描述](https://i.stack.imgur.com/DvabT.png)](https://i.stack.imgur.com/DvabT.png)

现在要优化 APK，运行以下命令

E:\app 发布\J\JQuery 参考>zipalign -v 4 jquery-reference-unsigned.apk jq ueryReference.apk

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T07:55:48.463

您应该导航到其中包含 zipalign 可执行文件的目录。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-11T18:11:57.913

关于如何在不从 CMD 提示符添加路径变量的情况下运行 zipalign 的示例：

```
C:\Users\mywindowsusername\AppData\Local\Android\Sdk\build-tools\27.0.3\zipalign.exe -v -p 4 my-app-unsigned.apk my-app-unsigned-aligned.apk 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-12-14T13:31:32.867

Zipalign.exe 位于 /path/to/android/sdk/build-tools/sdk-number

在命令行中：

1.  导航到可以找到 zipalign.exe 的位置
2.  运行： zipalign -v -f 4 /full/path/to/apk/unaligned-apk.apk /full/path/to/new-aligned-apk.apk

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-11T17:38:54.300

你也可以试试这个：

1.在主搜索栏中搜索 zipaligned

2.复制到当前目录

3.运行你的命令而不改变任何东西

4.有效！:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-14T07:12:46.070

尝试这个

```
zipalign -v 4 app-release-unsigned.apk xxx.apk 
```

而是放在上面的命令前面

> ./

当您在终端中运行它时

```
\platforms\android\app\build\outputs\apk\release>./zipalign -v 4 app-release-unsigned.apk xxx.apk 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-02T22:53:18.880

如果您像我一样使用 powershell，请退出并使用标准的 windows 命令提示符，然后它将执行:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-21T06:24:43.187

将`zipalign`exe文件复制到`Android\Sdk\build-tools\`文件夹中并在环境变量中添加路径...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-20T17:31:45.037

我来自[ionic-doc](https://ionicframework.com/docs/deployment/play-store#signing-an-apk)，并且通过将其添加到`PATH`

```
/path/to/Android/sdk/build-tools/VERSION/zipalign 
```

# android - 如何在 Android 中使用共享内存 (IPC)

> ID：16099904
> 
> 赞同：5
> 
> 时间：2013-04-19T07:54:44.710
> 
> 标签：android, c, linux, shared-memory

我已经在 Linux 中编写了一个简单的共享内存 C 程序。
如何在 Android 中使用共享内存（或者我应该称之为“ashmem？”）？

我希望你能给我一个分步指南。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-14T03:09:41.917

这对我有用：
1）打开一个 MemoryFile 对象：mFile；
2) 创建一个服务，使用 mmap 将其映射到 ashem；
3) 使用 ParcelFileDescriptor pfd 将本机文件描述符 (fd) 返回到绑定到您的服务的客户端；
4）为接受fd的客户端创建JNI，并使用mmap映射成灰烬；
5) 使用这个 fd 创建 InputStream，现在客户端可以使用 InputStream 对象读/写相同的内存区域。
此[链接](https://vec.io/posts/andriod-ipc-shared-memory-with-ashmem-memoryfile-and-binder)显示如何将 MemoryFile 映射到 ashem。此[链接](http://bina-soft.blogspot.com/2013/09/shared-memory-in-android-applications.html)显示如何通过 AIDL 和 ParcelFileDescriptor 向客户端发送本机文件描述符 (fd) 到客户端。

在服务器端，您需要创建：
1) 通过 ParcelFileDescriptor 将本机 fd 传递给客户端的服务和 AIDL；2) 服务端执行映射的 JNI。

在客户端： 1) 绑定到服务的方法，然后调用服务获取本机fd；2) 将 fd 映射到 ashem 的 JNI。

然后服务和客户端可以读取/写入映射的内存区域。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T08:44:09.903

一个过程通过以下步骤创建一个新的 ashmem 区域：

(1) 打开设备文件“/dev/ashmem”并获取文件描述符。(2) 调用ASHMEM_SET_NAME ioctl 设置ashmem 名称。它似乎是虚拟设备文件，因此如果将其命名为“my_mem”，文件名将更改为“/dev/ashmem/my_mem”。(3) 调用 ASHMEM_SET_SIZE ioctl 设置 ashmem 大小，以字节为单位。

cutils 库有一个函数“ashmem_create_region”，它将这些步骤包装成一个函数调用：

```
int fd = ashmem_create_region("my_mem", PAGE_SIZE * 20); 
```

文件描述符可以与其他进程共享。Android 提供了一种特殊的方式来在表亲进程之间共享文件描述符，使用另一个名为“binder”的服务。然后每个进程都映射文件：

```
char *map = mmap(NULL, PAGE_SIZE * 20, PROT_READ|PROT_WRITE,
                                       MAP_SHARED, fd, 0); 
```

而且，瞧！即时共享内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:19:28.587

在 Android 中使用 binder IPC。我认为绑定器使用所有进程共享的内核内存进行进程间通信。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-17T00:32:18.013

好吧，如果你想使用共享内存 API，这里有一个解决方案 [https://github.com/pelya/android-shmem](https://github.com/pelya/android-shmem)

就像魔术一样，它完美地工作。您可以使用 shmget()、shmat() 和 shmdt() API 无缝地在独立进程中使用 android 中的共享内存。试试看。

# ruby - xpath从链接中选择文本和文本来自

> ID：16099906
> 
> 赞同：1
> 
> 时间：2013-04-19T07:54:51.587
> 
> 标签：ruby, xpath

我有以下代码，效果很好：

```
rows = diary_HTML.xpath('//*[@id="main"]/div[2]/table/tbody/tr')
food_diary = rows.collect do |row|
  detail = {}
  [
    ["Food", 'td[1]/text()'],   
    ["Calories", 'td[2]/text()'],
    ["Carbs", 'td[3]/text()'],
    ["Fat", 'td[4]/text()'],
    ["Protein", 'td[5]/text()'],
    ["Cholest", 'td[6]/text()'],
  ].each do |name, xpath|
    detail[name] = row.at_xpath(xpath).to_s.strip
  end
  detail
end 
```

但是，“食物”td 不仅包括文本，还包括我想从中获取文本的链接。

我知道我可以用它`'td[1]/a/text()'`来获取链接文本，但我该怎么做呢？

`'td[1]/a/text()' or 'td[1]/text()'`

**已编辑 - 添加了代码段。**

我试图`<tr class="meal_header"> <td class="first alt">Breakfast</td>`在第一行包含所有行，其他行包含其他常规 tds，同时不包括底行的 td1。

```
<tr class="meal_header">
  <td class="first alt">Breakfast</td>
  <td class="alt">Calories</td>
  <td class="alt">Carbs</td>
  <td class="alt">Fat</td>
  <td class="alt">Protein</td>
  <td class="alt">Sodium</td>
  <td class="alt">Sugar</td>
</tr>
<tr>  
<td class="first alt">            
  <a onclick="showEditFood(3992385560);" href="#">Hovis (Uk - White Bread (40g) Toasted With Flora Light Marg, 2 slice</a> </td>
  <td>262</td>   
  <td>36</td>
  <td>9</td>
  <td>7</td>
  <td>0</td>
  <td>3</td>
</tr>
<tr class="bottom">
  <td class="first alt" style="z-index: 10">
    <a href="/food/add_to_diary?meal=0" class="add_food">Add Food</a>
    <div class="quick_tools">
    <a href="#quick_tools_0" class="toggle_diary_options">Quick Tools</a>
    <div id="quick_tools_0" class="quick_tools_options hidden">
    <ul>
      <li><a onclick="showLightbox(200, 250, '/food/quick_add?meal=0&amp;date=2013-04-15'); return false;">Quick add calories</a></li>
     <li><a href="/meal/new?meal=0">Remember meal</a></li>
     <li><a href="/food/copy_meal?date=2013-04-15&amp;from_date=2013-04-14&amp;meal=0&amp;username=nickwild1">Copy yesterday</a></li>  
     <li><a href="#recent_meals_0" class="toggle_diary_options">Copy from date</a></li>             
     <li><a href="#recent_meals_copy_to_0" class="toggle_diary_options">Copy to date</a></li>
    </ul>
    </div>
   <div id="recent_meals_0" class="recent_meal_options hidden">
    <ul id="recent_meal_options_0">
    <li class="header">Copy from which date?</li>        
    <li><a href="/food/copy_meal?date=2013-04-15&amp;from_date=2013-04-14&amp;meal=0&amp;username=nickwild1">Sunday, April 14</a></li>
    <li><a href="/food/copy_meal?date=2013-04-15&amp;from_date=2013-04-13&amp;meal=0&amp;username=nickwild1">Saturday, April 13</a></li>
    </ul>
    </div>
    </div>
  </td>
  <td>285</td>
  <td>39</td>
  <td>9</td>
  <td>10</td>
  <td>0</td>
  <td>3</td>
  <td></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:28:52.220

简短的回答是： use `Nokogiri::XML::Element#text`，它将给出元素加上子元素的文本（`a`例如你的）。

您还可以清理该代码相当多：

```
keys = ["Food", "Calories", "Carbs", "Fat", "Protein", "Cholest"]
food_diary = rows.collect do |row|
  Hash[keys.zip row.search('td').map(&:text)]
end 
```

作为最后的提示，避免将 xpath 与 html 一起使用，css 更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:23:41.237

`text()`我认为当您在 xpath 中没有显式提取时，您可以通过更改逻辑来查看元素内容来实现这一点

```
rows = diary_HTML.xpath('//*[@id="main"]/div[2]/table/tbody/tr')
food_diary = rows.collect do |row|
  detail = {}
  [
    ["Food", 'td[1]'],   
    ["Calories", 'td[2]/text()'],
    ["Carbs", 'td[3]/text()'],
    ["Fat", 'td[4]/text()'],
    ["Protein", 'td[5]/text()'],
    ["Cholest", 'td[6]/text()'],
  ].each do |name, xpath|
    if xpath.include?('/text()')
      detail[name] = row.at_xpath(xpath).to_s.strip
    else
      detail[name] = row.at_xpath(xpath).content.strip
    end
  end
  detail
end 
```

您还可以在数组中添加一个符号，以描述您是如何提取数据的，并有一个`case`块来处理项目，具体取决于最后阶段要执行的操作`xpath`

请注意，您也可以通过递归遍历 xpath 返回的节点结构来做您想做的事情，但是如果您只想忽略标记、链接等，这似乎有点过头了。

# javascript - 获取 Javascript 中的文本框值（单个/多个字段）

> ID：16099908
> 
> 赞同：1
> 
> 时间：2013-04-19T07:54:52.487
> 
> 标签：javascript, html

我的页面中有一个名为“myField”的字段现在这是动态的所以有 2 种情况，即它可以只是 1 个字段；

```
<input type="text" name="myField" /> 
```

或者可以有如下2个字段；

```
<input type="text" name="myField" />
<input type="hidden" name="myField" /> 
```

我使用下面的代码来访问 JS 中的值；

```
document.forms[0].myField[0].value 
```

但是，如果只有一个字段（如第一种情况），则此方法不起作用

如何编写动态 JS 代码来处理相同的问题？它应该是跨浏览器兼容的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:56:58.733

是的，因为在第一种情况下您应该使用`document.forms[0].myField.value`.

我建议用[`getElementsByName()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)方法检索元素：

```
var val = document.getElementsByName("myField")[0].value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:57:20.313

更好的方法是给每个元素一个唯一的 ID，然后用

```
document.getElementById(id).value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:58:19.707

看看[JQuery](http://jquery.com)，[这里](http://www.w3schools.com/jquery/html_val.asp)有一些关于如何获取价值的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T07:59:48.170

前提是至少有一个元素名称“myField”

```
var count = document.forms[0].myField.length;
for(var i=0; i < count; i++){
    // do something with document.forms[0].myField[i].value
    console.log(document.forms[0].myField[i].value);
} 
```

小提琴：http: [//jsfiddle.net/HtrrT/](http://jsfiddle.net/HtrrT/)

# apache-poi - 在禁用显示注释的情况下在 apache poi（用于 .xlsx 文件）中创建单元格注释

> ID：16099912
> 
> 赞同：8
> 
> 时间：2013-04-19T07:54:56.813
> 
> 标签：apache-poi, xlsx, xssf

我正在尝试使用 apache poi 创建单元格注释。我可以创建评论，但默认情况下它们总是显示在 excel 中。我必须手动右键单击单元格并取消勾选显示评论以使其不可见（现在它们仅在我将鼠标悬停在单元格上时才会出现）。是否可以默认使单元格注释不可见（以便在用户将鼠标悬停在单元格上之前它们不会出现在 Excel 中。）

这是我使用的代码：

```
 Drawing drawing = cell.getSheet().createDrawingPatriarch();
    CreationHelper factory = cell.getSheet().getWorkbook().getCreationHelper();
    ClientAnchor anchor = factory.createClientAnchor();
    anchor.setCol1(cell.getColumnIndex());
    anchor.setCol2(cell.getColumnIndex() + 1);
    anchor.setRow1(cell.getRowIndex());
    anchor.setRow2(cell.getRowIndex() + 3);

    Comment comment = drawing.createCellComment(anchor);
    RichTextString str = factory.createRichTextString(message);
    comment.setVisible(Boolean.FALSE);
    comment.setString(str);

    cell.setCellComment(comment); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T23:59:28.987

帕罗克什。我已经执行了您给出的相同代码。默认情况下，我只收到关于悬停的评论。似乎不是代码问题，而是 Excel 设置问题。我已经在 excel 2010 中检查过。如果您有不同的版本，请检查类似的设置。

请检查主页 --> 选项 --> 高级 --> 显示...

应该选择“仅指标，悬停评论”单选按钮。

# java - 实体管理器中的重复键错误与正确的对象持续存在

> ID：16099916
> 
> 赞同：1
> 
> 时间：2013-04-19T07:55:19.487
> 
> 标签：java, jpa, eclipselink, derby, entitymanager

我有以下实体 TitleScreenFormat，当我这样做时，`entitymanager.commit` 我收到以下错误

```
Internal Exception: java.sql.SQLIntegrityConstraintViolationException:
The statement was aborted because it would have caused a duplicate key
value in a unique or primary key constraint or unique index identified
by 'SQL130418144233630' defined on 'S1_TITLESCREENFORMAT'. Error Code:
20000 Call: INSERT INTO s1_TitleScreenFormat
(titlescreenformat_titleid, titlescreenformat_format,
titlescreenformat_deliveryformat, TITLE_title_id) VALUES (?, ?, ?, ?)
    bind => [TitleId1, Format1, DeliveryFormat1, null] 
```

这是带有键的实体

```
@Entity
    @Table(name = "s1_TitleScreenFormat")
    public class TitleScreenFormat 
    {
        @Id 
        @Column(name = "titlescreenformat_titleid", length = 128)    
        private String TitleId;

        @Id 
        @Column(name = "titlescreenformat_deliveryformat", length = 128)    
        private String DeliveryFormat;

        @Id 
        @Column(name = "titlescreenformat_format", length = 128)    
        private String Format;

        private Title Title; 
```

这是我想要坚持的对象的实例

```
[0] TitleScreenFormat  (id=81)  
    DeliveryFormat  "DeliveryFormat1" (id=87)   
    Format  "Format1" (id=88)   
    Title   null    
    TitleId "TitleId1" (id=89)  
[1] TitleScreenFormat  (id=83)  
    DeliveryFormat  "DeliveryFormat2" (id=90)   
    Format  "Format2" (id=91)   
    Title   null    
    TitleId "TitleId2" (id=92)  
[2] TitleScreenFormat  (id=84)  
    DeliveryFormat  "DeliveryFormat3" (id=93)   
    Format  "Format3" (id=94)   
    Title   null    
    TitleId "TitleId3" (id=95)  
[3] TitleScreenFormat  (id=85)  
    DeliveryFormat  "DeliveryFormat4" (id=96)   
    Format  "Format4" (id=97)   
    Title   null    
    TitleId "TitleId4" (id=98)  
[4] TitleScreenFormat  (id=86)  
    DeliveryFormat  "DeliveryFormat5" (id=99)   
    Format  "Format5" (id=100)  
    Title   null    
    TitleId "TitleId5" (id=101) 
```

在persistence.xml 文件中，我使用以下配置

```
<property name="eclipselink.ddl-generation" value="drop-and-create-tables" /> 
```

我正在使用 Derby DB。

此错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:08:14.373

我认为您在数据库中再次插入相同的值。在持久化这些值之前，只需在数据库中检查一次，如果它们已经存在的话。

或者，您可以更改这些值并再次尝试提交。

# windows-phone-7 - 如何让我的磁贴打开无线切换菜单？

> ID：16099920
> 
> 赞同：0
> 
> 时间：2013-04-19T07:55:37.620
> 
> 标签：windows-phone-7

作为一个小型测试应用程序，我想创建一个为 wifi、蓝牙创建图块的应用程序。

通过单击这些磁贴之一，它的 Windows Phone 菜单应该打开吗？市场上有很多这样的应用程序，但它们如何绕过自己的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:57:58.373

启动您的应用程序后自动使用[`ConnectionSettingsTask`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394011%28v=vs.105%29.aspx)并触发它。您可以选择使用[`ConnectionSettingsType`](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.tasks.connectionsettingstype)枚举打开哪个连接设置。

# xmpp - 仅使用 cometd 的聊天应用程序就足够了吗？

> ID：16099921
> 
> 赞同：0
> 
> 时间：2013-04-19T07:55:45.853
> 
> 标签：xmpp, chat, openfire, cometd

我想创建一个只进行文本聊天的网络聊天应用程序。客户将与所有者交谈。所有者将看到可以与之聊天的可用客户，但客户看不到可用用户的列表，他只需单击链接并直接开始与所有者聊天。

所以我只用 cometd 和 jquery 开发了它，它工作正常。这将在实际应用程序中工作还是我应该考虑一些 XMPP 服务器（最好是 openfire）。它只是一个基于文本的聊天。使用 xmpp 和不使用 xmpp 服务器有什么优点和缺点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:01:09.687

您可以查看[CometD 基准测试结果](http://webtide.intalio.com/2011/09/cometd-2-4-0-websocket-benchmarks/)，以了解 CometD 在比您的情况更差的情况下的性能：在您的情况下，用户只是与所有者聊天，而在基准测试中，用户与许多其他人聊天。CometD 基准测试实际上是一个用于执行基准测试的普通聊天应用程序。

借助 WebSocket 传输，CometD 轻松实现了 100k 客户端的 50k 消息/秒，平均延迟为 4 毫秒。

我的经验是 CometD 在实际应用程序中运行良好，在您的情况下它可能比 XMPP 更简单。

查看 CometD[文档](http://docs.cometd.org/reference/)和[教程](http://docs.cometd.org/tutorials/)以开始使用。

# jquery - 如何从 JQuery 文件上传演示预览文件中删除 index.php

> ID：16099923
> 
> 赞同：0
> 
> 时间：2013-04-19T07:55:55.530
> 
> 标签：jquery, file, upload, demo, blueimp

我有一个照片上传网站，我最近在我的照片目录中添加了一个 index.php。但它也出现在我的 jQuery File Upload 中。如何删除它？

PS：见附图[在链接中]...

[http://www.pandhare.co.in/test/ERROR.png](http://www.pandhare.co.in/test/ERROR.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:08:36.647

您可以从文件列表中“删除”它。为此，您应该在构建列表功能上修复 php 脚本。如果文件名中有子字符串“.php”，则不要包含要列出的条目。

# c++ - 托管目标代码需要 '\clr' 选项：错误

> ID：16099926
> 
> 赞同：5
> 
> 时间：2013-04-19T07:55:57.370
> 
> 标签：c++, visual-studio-2010

当我尝试批量构建我的项目时，我在启用 clr 运行时支持时遇到了这个错误。

我的项目可以毫无问题地运行，并且我只在尝试进行批量构建时收到此错误。

我在 google 中进行了很多搜索，但大多数结果都是关于启用 clr 选项的。我想知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T08:53:18.783

这是您在调试项目时更改项目设置时会遇到的问题。设置按配置存储。一个常见的错误是对 Debug 配置进行更改，但忘记对 Release 配置进行相同的更改。当您尝试构建发布配置时会出现 Kaboom，就像您使用 Batch Build 时会发生的那样。

走慢点。项目+属性，配置属性，常规。请注意左上角标有“配置”的组合框。它现在可能说“活动（调试）”。将其更改为“发布”。并注意“公共语言运行时支持”设置在您来回翻转时如何变化。使它们相同，/clr。使用 Build + Configuration Manager 将 Release 构建为默认配置，并使用 Build + Build 进行构建。测试一下。

您更改的其他设置可能还需要针对发布版本进行更正。

# javascript - 如何使用javascript转换字节数组中图像的base64string？

> ID：16099927
> 
> 赞同：0
> 
> 时间：2013-04-19T07:55:59.103
> 
> 标签：javascript, extjs4

我想将我的base64字符串转换为字节数组，以便我可以将它发送到服务器以存储在数据库中......`document.getElementById('userImageId').src`在extjs中返回base64字符串，如`data:image/png;base64,iVBORw0KGgoAAAANSU...........`..我如何将它转换为字节数组？

# ios - iOS应用程序中的数据库：Sqlite vs XML + XPath？

> ID：16099930
> 
> 赞同：0
> 
> 时间：2013-04-19T07:56:06.053
> 
> 标签：ios, xml, sqlite, xpath, nsxmlparser

我的应用程序需要读取从 SQL 数据库导出的一些数据。除了阅读，应用程序还应该查询数据库，以便找到不同数据之间的关系。潜在地，数据量可能非常大。当然，一切都应该是响应式的，并且不会对用户体验产生负面影响。

这是我的疑问：我打算以 XML 格式导出数据库并使用 XPath 运行查询，但我不能 100% 确定这种方法是否足够有效，特别是如果数据库中的记录数在数千。

关于 XPath 在 iOS 中的效率和性能，你们能告诉我什么？对于大型 XML 数据库，这是一个好的解决方案吗？

Sqlite 会是一种更好、更有效的方法吗？通过使用 Sqlite，我是否冒着让我的应用程序变得沉重的风险？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:36:43.720

我的许多 iOS 应用程序都使用存储在 SQLite 数据库中的数据。我对 SQLite 数据库非常信任。

我的一些数据库在表中有超过 30000 个元素，应用程序会进行复杂的查询，例如按条件过滤/分组。它相当快。

创建 SQLite 数据的最佳方法是从原始数据库导出为 CSV，然后将数据导入新的 SQLite 数据库。 [你可以在这里找到一个例子。](http://phoenixdesign.fr/tutoriels/base-de-donnees/creation-base-sqlite)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:41:29.457

你绝对应该在 iOS 应用程序中使用 SQLite 而不是 XML。我会推荐这种数据库的最佳包装器：[https](https://github.com/ccgus/fmdb) ://github.com/ccgus/fmdb 使用 FMDB + 在后台线程中进行查询，应用程序的性能根本不应该受到影响，即使是大数据库。

# regex - 正则表达式替换小数后跟空格和字符

> ID：16099941
> 
> 赞同：0
> 
> 时间：2013-04-19T07:56:53.760
> 
> 标签：regex, string, text, full-text-search

我有一个大文件，需要查找和替换以下模式：

> f1 f2 0.989 f2 f3 0.878 f3 f4 0.9977 以此类推

我需要创建一个这样的文件：

> f1 f2 0.989,f2 f3 0.878,f3 f4 0.9977，以此类推

这意味着我需要找到字符串：decimal 后跟空格，然后 fx 并将其替换为 decimal,fx。查找和替换此表达式的正则表达式是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:10:13.707

试试这个：

```
find: ( [\d.]+) (?=f\d)
replace: $1, 
```

# php - 使 Cron 退出运行现有脚本

> ID：16099947
> 
> 赞同：1
> 
> 时间：2013-04-19T07:57:03.560
> 
> 标签：php, cron, cpanel

我正在运行一个不断在我的数据库上运行的脚本。无论如何 有必要每小时重新启动一次脚本。显然我不能自动做到这一点。我不想使用守护进程，它现在对我来说太复杂了。更简单的解决方案是使用 cron 作业，但最大的缺点是它不会停止最后一个脚本。脚本无限`while(true)`循环运行

但是，如果我在脚本中创建函数，这可能吗？

```
function exitScript()
{
  exit;
} 
```

然后在 Cron 工作中，如果我做类似的事情

```
php /home/Path/public_html/webservice/myScript.php exitScript and then
php /home/Path/public_html/webservice/myScript.php 
```

格式是什么，我如何使用 cron 作业一个接一个地运行，或者让另一个 PHP 这样做？

我需要建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:13:16.753

这是一个易于制作的小技巧，您可以使用..

第一个设置您的 cron 作业以每小时运行一次。

```
* */1 ..... cronjob.php 
```

第二在脚本开始时定义1个常数：

```
define('SCRIPT_START_TIME', time()); 
```

第三在您的退出脚本中设置一个条件检查以退出，如果从这个常量到当前时间过去了 59 分钟.. :)

```
function exitScript()
{
  if((time() - SCRIPT_START_TIME) > 59*60){
     exit();
  }
} 
```

4th at each while LOOP 启动退出脚本。

# if-statement - 没有 if 语句的编程？

> ID：16099948
> 
> 赞同：15
> 
> 时间：2013-04-19T07:57:12.947
> 
> 标签：if-statement, coding-style, functional-programming, conventions

我记得一段时间（可能是几年）前，我在 Stackoverflow 上读到了关于使用尽可能少的 if 测试进行编程的魅力。[这个问题](https://stackoverflow.com/questions/7264145/if-less-programming-basically-without-conditionals)有点相关，但我认为压力在于使用许多小函数，这些函数返回由测试确定的值，具体取决于它们收到的参数。一个非常简单的例子是使用这个：

```
int i = 5; 
bool iIsSmall = isSmall(i); 
```

`isSmall()`看起来像这样：

```
private bool isSmall(int number)
{
    return (i < 10);
} 
```

而不是仅仅这样做：

```
int i = 5;
bool isSmall;
if (i < 10) {
    isSmall = true;
} else {
    isSmall = false;
} 
```

（从逻辑上讲，这段代码只是示例代码。它不是我正在制作的程序的一部分。）

我相信这样做的原因是因为它看起来更好，并且使程序员更不容易出现逻辑错误。如果正确应用此编码约定，您将在任何地方几乎看不到 if-tests，除了在*唯一目的是执行该 test*的函数中。

现在，我的问题是：有没有关于这个约定的文档？有没有地方可以看到这种风格的支持者和反对者之间的激烈争论？我尝试搜索向我介绍此内容的 Stackoverflow 帖子，但我再也找不到了。

最后，我希望这个问题不会被否决，因为我不是在寻求解决问题的方法。我只是希望能听到更多关于这种编码风格的信息，并且可能会提高我将来会做的所有编码的质量。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-21T07:11:36.833

这整个“如果”与“否”的事情让我想到了[表达式问题](http://www.c2.com/cgi/wiki?ExpressionProblem)¹。基本上，观察到使用 if 语句或不使用 if 语句进行编程是封装和可扩展性的问题，有时最好使用 if 语句²，有时最好使用带有方法/函数指针的动态调度。

当我们想要建模某些东西时，需要担心两个轴：

1.  我们需要处理的输入的不同情况（或类型）。
2.  我们要对这些输入执行的不同操作。

实现这种事情的一种方法是使用 if 语句/模式匹配/访问者模式：

```
data List = Nil | Cons Int List

length xs = case xs of
  Nil -> 0
  Cons a as -> 1 + length x

concat xs ys = case ii of
  Nil -> jj
  Cons a as -> Cons a (concat as ys) 
```

另一种方法是使用面向对象：

```
data List = {
    length :: Int
    concat :: (List -> List)
}

nil = List {
    length = 0,
    concat = (\ys -> ys)
}

cons x xs = List {
    length = 1 + length xs,
    concat = (\ys -> cons x (concat xs ys))
} 
```

不难看出，使用 if 语句的第一个版本可以轻松地在我们的数据类型上添加新操作：只需创建一个新函数并在其中进行案例分析。另一方面，这使得向我们的数据类型添加新案例变得困难，因为这意味着要返回程序并修改所有分支语句。

第二个版本正好相反。向数据类型添加新案例非常容易：只需创建一个新“类”并告诉我们需要实现的每个方法做什么。但是，现在很难向接口添加新操作，因为这意味着为实现该接口的所有旧类添加新方法。

语言使用许多不同的方法来尝试解决表达式问题，并使向模型中添加新案例和新操作变得容易。但是，这些解决方案各有利弊³所以总的来说，我认为在 OO 和 if 语句之间进行选择是一个很好的经验法则，具体取决于您希望哪个轴更容易扩展内容。

**无论如何，回到你的问题**，我想指出几件事：

第一个是我认为摆脱所有 if 语句并用方法调度替换它们的 OO“口头禅”与大多数 OO 语言没有类型安全的代数数据类型有关，而不是与“如果statemsnts”不利于封装。由于类型安全的唯一方法是使用方法调用，因此鼓励您将使用 if 语句的程序转换为使用[访问者模式](https://en.wikipedia.org/wiki/Visitor_pattern)⁴或更糟的程序：将应该使用访问者模式的程序转换为使用简单方法分派的程序，因此可扩展性容易朝错误的方向发展。

第二件事是我不喜欢仅仅因为你可以将事物分解成函数。特别是，我发现所有函数只有 5 行并调用大量其他函数的风格很难阅读。

最后，我认为您的示例并没有真正摆脱 if 语句。本质上，您正在做的是使用从整数到新数据类型的函数（有两种情况，一种用于大，一种用于小），然后在使用数据类型时仍然需要使用 if 语句：

```
data Size = Big | Small

toSize :: Int -> Size
toSize n = if n < 10 then Small else Big

someOp :: Size -> String
someOp Small = "Wow, its small"
someOp Big   = "Wow, its big" 
```

回到表达式问题的观点，定义我们的 toSize / isSmall 函数的好处是我们将选择我们的数字适合什么情况的逻辑放在一个地方，并且我们的函数只能在之后的情况下操作。但是，这并不意味着我们已经从代码中删除了 if 语句！如果我们将 toSize 作为工厂函数，并且让 Big 和 Small 类共享一个接口，那么是的，我们将从代码中删除 if 语句。但是，如果我们的 isSmall 只返回一个布尔值或枚举，那么 if 语句的数量将与以前一样多。（并且您应该选择要使用的实现，具体取决于您是否希望更容易添加新方法或新案例 - 比如说 Medium - 将来）

* * *

1 - 问题的名称来自于你有一个“表达式”数据类型（数字、变量、子表达式的加法/乘法等）并且想要实现诸如评估函数和其他事物之类的事物的问题。

2 - 或者通过代数数据类型进行模式匹配，如果你想更安全的话......

3 - 例如，您可能必须在“调度员”可以看到它们的“顶层”上定义所有多方法。与一般情况相比，这是一个限制，因为您可以使用嵌套在其他代码中的 if 语句（和 lambdas）。

4 - 本质上是代数数据类型的“教堂编码”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:31:40.100

真的是约定俗成吗？是否应该仅仅因为可能会感到沮丧而杀死最少的 if 结构？

好的，if 语句往往会失控，尤其是随着时间的推移添加了许多特殊情况。一个又一个分支被添加，最后没有人能够理解每件事都做了什么，而不需要花费数小时的时间和几杯咖啡进入这个增长的意大利面条代码实例。

但是将所有内容放在单独的函数中真的是个好主意吗？代码应该是可重用的。代码应该是可读的。但是函数调用只是需要在源文件中进一步查找它。如果所有 if 都以这种方式放置，那么您就一直在源文件中跳来跳去。这是否支持可读性？

或者考虑一个不在任何地方重用的 if 语句。只是为了惯例，它真的应该进入一个单独的函数吗？这里也涉及一些开销。在这种情况下，性能问题也可能是相关的。

我想说的是：遵循编码约定是好的。风格很重要。但也有例外。只需尝试编写适合您项目的优质代码并牢记未来。最后，编码约定只是指导方针，它试图帮助我们在不强加任何东西的情况下生成好的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T02:07:51.357

我从来没有听说过这样的对流。无论如何，我不明白它是如何工作的。当然，拥有 a 的唯一`iIsSmall`目的是稍后对其进行分支（可能与其他值结合使用）？

我*所*听到的是一个论点，以避免像`iIsSmall` **at all**一样的变量。`iIsSmall`只是存储您所做的测试的结果，以便您以后可以使用该结果做出决定。那么为什么不直接`i`在需要做出决定的时候测试 的值呢？即，而不是：

```
int i = 5; 
bool iIsSmall = isSmall(i);
...
<code>
...
if (iIsSmall) {
    <do something because i is small>
} else {
    <do something different because i is not small>
} 
```

写吧：

```
int i = 5
...
<code>
...
if (isSmall(i)) {
    <do something because i is small>
} else {
    <do something different because i is not small>
} 
```

这样你就可以在分支点知道你实际分支的是什么，因为它就在那里。无论如何，在这个例子中这并不难，但如果测试很复杂，你可能无法在变量名中编码整个事情。

它也更安全。该名称`iIsSmall`没有误导性的危险，因为您更改了代码以便它正在测试其他内容，或者因为`i`在您调用后实际上已更改，`isSmall`因此它不再一定很小，或​​者因为有人刚刚选择了一个愚蠢的变量名称等，等等

显然，这并不总是有效。如果`isSmall`测试很昂贵并且您需要多次对其结果进行分支，那么您不希望多次执行它。您也可能不想多次复制该调用的代码，除非它是微不足道的。或者您可能希望返回标志以供不知道的调用者使用`i`（尽管您可以只返回`isSmall(i)`，而不是将其存储在变量中然后返回变量）。

* * *

顺便说一句，单独的函数在您的示例中没有任何保存。您可以像在函数中的 return 语句中一样轻松地将其包含`(i < 10)`在对变量的赋值中。即你可以很容易地编写- 正是这样避免了 if 语句，而不是单独的函数。代码的形式或总是很傻；只需使用or 。`bool``bool``bool isSmall = i < 10;``if (test) { x = true; } else { x = false; }``if (test) { return true; } else { return false; }``x = test``return test`

# html - CSS不适用于范围输入滑块

> ID：16099949
> 
> 赞同：3
> 
> 时间：2013-04-19T07:57:16.603
> 
> 标签：html, css, slider, range

我想在“垂直”中显示范围输入滑块。

我使用此代码显示垂直`-webkit-appearance: slider-vertical`它显示滑块但 css 不工作它显示普通输入范围滑块。

谁能帮我怎么做。

这是我的代码

```
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;"/>
    <title>How to style an HTML5 range input with CSS</title>
    <style type="text/css" media="screen">
        body {
            font-family: Helvetica, sans-serif;
            margin: 0;
            padding: 10px;
        }
        input[type='range'] {
            -webkit-appearance: slider-vertical !important;
            -webkit-border-radius: 10px;
            -webkit-box-shadow: inset 0 0 5px #333;
            background-color: #157DEC;
            display: block;
            height: 15px;
            left: 10px;
            margin: -100px 0 0 100px;
            position: absolute;
            right: 10px;
        }
        input[type='range']::-webkit-slider-thumb {
            -webkit-appearance:  none !important;
            -webkit-border-radius: 10px;
            background-color: #FFFFFF;
            background-image: -webkit-gradient(circular, left top, left bottom, from(##FFFFFF), to(#AAA));
            border: 1px solid #999;
            height: 33px;
            width: 33px;
        }
        #range {
            display: block;
            font-size: 200%;
            font-weight: bold;
            margin: -58px -12px 107px 4px ;
            text-align: center;
        }
        p {
            position: absolute;
            bottom: 0;
            left: 10px;
            font-size: 10px;
            right: 10px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="wrapper">
        <span id="range">0</span>
        <input type=range name=salary min="0" max="5" value="0" step="1" onchange="showValue(this.value)" />

    </div>
    <script type="text/javascript">
        function showValue(newValue) {
            document.getElementById("range").innerHTML=newValue;
        }
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T10:09:07.017

不要在你的CSS中身高。你强迫到一个固定的尺寸。

这是我对你的风格的建议

```
 body {
        font-family: Helvetica, sans-serif;
        margin: 0;
        padding: 10px;
        overflow:hidden;
    }
    input[type='range'] {
        -webkit-appearance: slider-vertical;/*comment this to see the result*/
        -webkit-border-radius: 10px;
        -webkit-box-shadow: inset 0 0 5px #333;
        background-color: #157DEC;
        display: block;
        /*height: 15px;*/
        left: 10px;
        /*margin: -100px 0 0 100px;*/
        /*position: absolute;*/
        right: 10px;
        margin-top:50px;
    }
    input[type='range']::-webkit-slider-thumb {
        -webkit-appearance:  none !important;
        -webkit-border-radius: 10px;
        background-color: #FFFFFF;
        background-image: -webkit-gradient(circular, left top, left bottom, from(##FFFFFF), to(#AAA));
        border: 1px solid #999;
       /* height: 33px;*/
        width: 33px;
    }
    #range {
        display: block;
        font-size: 200%;
        font-weight: bold;
        margin: -58px -12px 107px 4px ;
        text-align: center;
    }
    p {
        position: absolute;
        bottom: 0;
        left: 10px;
        font-size: 10px;
        right: 10px;
        text-align: center;
    } 
```

这里是小提琴的预览：http: [//jsfiddle.net/QXzLT/](http://jsfiddle.net/QXzLT/)

# backbone.js - 如何在 handlebar.js 中测试未定义的对象属性

> ID：16099953
> 
> 赞同：1
> 
> 时间：2013-04-19T07:57:31.283
> 
> 标签：backbone.js, handlebars.js

我有一个模型集合，其属性名为 start_time in seconds (0-60..)，如果未设置 start_time，则该属性未定义。

我很难测试这个属性是 0 还是 null/undefined，因为把手 #if 总是将它转换为 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:28:58.927

为什么不只使用骨干模型默认值？

```
YourModel = Backbone.Model.extend({
    defaults : {
        start_time = 'no start time'
    }
}); 
```

该字符串的计算结果应为 true，并且在初始化模型时，任何 null 或未定义的值都将设置为“无开始时间”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T10:57:07.577

如果您正在获取数据，您可以使用[collection.parse](http://backbonejs.org/#Collection-parse)在模型上设置一个新字段，您可以在视图中对其进行测试。

```
YourCollection = Backbone.Collection.extend({
  url: "/api/foo",
  parse: function(res) {        
    return _.map(res, function(source) {    
      obj = _.clone(source);
      obj.no_start = !obj.hasOwnProperty('start_time');
      return obj;
    });
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:25:44.513

在调用模板之前，您可以做一些工作：创建`start_time`一个字符串（'0' 为真）。

您还可以注册一个[助手](http://handlebarsjs.com/#helpers)：请参阅[把手模板中的布尔逻辑](https://stackoverflow.com/questions/14839375/boolean-logic-within-a-handlebars-template)。

应该给出如下内容：

```
Handlebars.registerHelper('if_all', function() {
  var args = [].slice.apply(arguments);
  var opts = args.pop();

  var fn = opts.fn;
  if(!args[0] && args[0] != 0) fn = opts.inverse;
  return fn(this);
}); 
```

# servicestack - DotNetOpenAuth 与 ServiceStack 身份验证

> ID：16099955
> 
> 赞同：1
> 
> 时间：2013-04-19T07:57:36.300
> 
> 标签：servicestack, dotnetopenauth

我对 ServiceStack 很陌生，所以如果我提出任何明显的问题，请原谅我的无知。

我有一个网站已经使用 dotnetopenauth 使用在线提供的普通示例对用户进行身份验证。有一个登录按钮，该按钮发布到此方法：

```
Public Sub ExecuteGoogleLogin()
    Dim Url As String = "https://www.google.com/accounts/o8/id"
    Dim OpenID As New OpenIdRelyingParty
    Dim HostedMeta As New HostMetaDiscoveryService() With {.UseGoogleHostedHostMeta = True}
    Dim ReturnUrl As String = Request.Url.ToString

    OpenID.DiscoveryServices.Insert(0, HostedMeta)

    Dim builder As New UriBuilder(ReturnUrl)
    Dim fetch As New FetchRequest()

    Dim Req = OpenID.CreateRequest(Url, Realm.AutoDetect, builder.Uri)

    fetch.Attributes.AddRequired(WellKnownAttributes.Contact.Email)
    fetch.Attributes.AddRequired(WellKnownAttributes.Name.First)
    fetch.Attributes.AddRequired(WellKnownAttributes.Name.Last)

    Req.AddExtension(fetch)

    Req.RedirectToProvider()
End Sub 
```

然后它将重定向回将检查响应的页面，例如

```
 Private Sub CheckOpenIDResponse()
    Dim Rp As New OpenIdRelyingParty
    Dim Resp = Rp.GetResponse()
    Dim Subsc As Subscriber

Select Case Resp.Status
            Case AuthenticationStatus.Authenticated
                Dim Fetch = Resp.GetExtension(Of FetchResponse)()

                Email = Fetch.GetAttributeValue(WellKnownAttributes.Contact.Email)
.... 
```

相当标准并且工作正常（目前仅支持谷歌）但它可以工作。我的 AppHost 工作正常，一些测试 Dto 按预期工作，现在只需要实现身份验证。所以我的问题是：

1.  如何使用 servicestack 的身份验证类（GoogleOpenIdOAuthProvider 等）将此准系统代码转换为工作？并彻底摆脱 dotnetopenauth。或者...
2.  在 ServiceStack 中，想办法使用 dotnetopenauth（或上面的代码）来实现身份验证。

也许我在 SS 文档中遗漏了一些明显的东西，但对于我的生活，我似乎无法弄清楚如何将它们放在一起。

为了从调用页面获取会话，我将我的用户对象（称为订阅者）包装在 CustomUserSession 中。

```
 Dim Ahost = ServiceStack.WebHost.Endpoints.EndpointHost.AppHost
    Dim Key = ServiceStack.ServiceInterface.SessionFeature.GetSessionKey()
    Dim Sess As CustomUserSession = Ahost.TryResolve(Of ServiceStack.CacheAccess.ICacheClient)().[Get](Of CustomUserSession)(Key) 
```

然后从这里我按照我的意愿使用会话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:42:24.097

不确定上面的代码如何与 ServiceStack 集成。有点偏见，但我会让 ServiceStack 使用`GoogleOpenIdOAuthProvider`. 此外，[SocialBootstrapApi](https://github.com/ServiceStack/SocialBootstrapApi)项目应该是一个很好的参考。

`'{servicestack path}/auth/googleopenid`下面的设置/配置为您提供了处理身份验证的 url 。

假设您安装了 ServiceStack ...

**Nuget 安装（或只是参考 ServiceStack.Authention.OpenId.dll** ）

**在 AppHost 中添加带有 GoogleOpenIdOAuthProvider 的 AuthFeature 插件**

```
public override void Configure(Funq.Container container)
{
    Plugins.Add(new AuthFeature(() => new AuthUserSession(), new IAuthProvider[] { new GoogleOpenIdOAuthProvider(new AppSettings())}));     
} 
```

**为 GoogleOpenIdOAuthProvider 添加一些特定的 url**

```
<appSettings>
<add key="oauth.GoogleOpenId.RedirectUrl" value="http://localhost" />
<add key="oauth.GoogleOpenId.CallbackUrl" value="http://localhost/api/auth/GoogleOpenId" /> 
</appSettings> 
```

**Web.config 中的大量配置。应与 ServiceStack.Authentication.OpenId 的 NuGet 安装一起添加**

```
<configsections>
    <sectionGroup name="dotNetOpenAuth" type="DotNetOpenAuth.Configuration.DotNetOpenAuthSection, DotNetOpenAuth">
      <section name="openid" type="DotNetOpenAuth.Configuration.OpenIdElement, DotNetOpenAuth" requirePermission="false" allowLocation="true" />
      <section name="oauth" type="DotNetOpenAuth.Configuration.OAuthElement, DotNetOpenAuth" requirePermission="false" allowLocation="true" />
      <section name="messaging" type="DotNetOpenAuth.Configuration.MessagingElement, DotNetOpenAuth" requirePermission="false" allowLocation="true" />
      <section name="reporting" type="DotNetOpenAuth.Configuration.ReportingElement, DotNetOpenAuth" requirePermission="false" allowLocation="true" />
    </sectionGroup>
  </configSections>

  <dotNetOpenAuth>
    <!-- This is an optional configuration section where aspects of dotnetopenauth can be customized. -->
    <!-- For a complete set of configuration options see http://www.dotnetopenauth.net/developers/code-snippets/configuration-options/ -->
    <openid>
      <relyingParty>
        <security requireSsl="false">
          <!-- Uncomment the trustedProviders tag if your relying party should only accept positive assertions from a closed set of OpenID Providers. -->
          <!--<trustedProviders rejectAssertionsFromUntrustedProviders="true">
                        <add endpoint="https://www.google.com/accounts/o8/ud" />
                    </trustedProviders>-->
        </security>
        <behaviors>
          <!-- The following OPTIONAL behavior allows RPs to use SREG only, but be compatible
                         with OPs that use Attribute Exchange (in various formats). -->
          <add type="DotNetOpenAuth.OpenId.RelyingParty.Behaviors.AXFetchAsSregTransform, DotNetOpenAuth" />
        </behaviors>
      </relyingParty>
    </openid>
    <messaging>
      <untrustedWebRequest>
        <whitelistHosts>
          <!-- Uncomment to enable communication with localhost (should generally not activate in production!) -->
          <!--<add name="localhost" />-->
        </whitelistHosts>
      </untrustedWebRequest>
    </messaging>
    <!-- Allow DotNetOpenAuth to publish usage statistics to library authors to improve the library. -->
    <reporting enabled="true" />
  </dotNetOpenAuth> 
```

**访问 AuthUserSession 数据**

在您的 ServiceStack 服务（继承自 Service 的类）中，您可以使用：

```
var sess = this.GetSession(); 
```

在 ServiceStack 之外，您可以执行以下操作：

```
var key = SessionFeature.GetSessionKey();
var sess = appHost.TryResolve<ICacheClient>().Get<AuthUserSession>(key); 
```

# c# - 如何确定字符串是否为用户 SID？

> ID：16099956
> 
> 赞同：13
> 
> 时间：2013-04-19T07:57:41.810
> 
> 标签：c#, windows

在 Windows 操作系统中，用户 SID 用字符串表示，例如：

> S-5-1-76-1812374880-3438888550-261701130-6117

有什么方法可以确定这样的字符串是有效的用户 SID？

谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-19T08:03:26.447

根据[Security Identifiers](http://msdn.microsoft.com/en-us/library/cc246018.aspx)的描述，SID 有以下形式（它有 1 到 14 个 subauthority 值）：

```
S-1-<identifier authority>-<sub1>-<sub2>-…-<subn>-<rid> 
```

您可以使用正则表达式来检查字符串是否与此模式匹配：

```
string input = "S-5-1-76-1812374880-3438888550-261701130-6117";
string sidPattern = @"^S-\d-\d+-(\d+-){1,14}\d+$";
bool isValidFormat = Regex.IsMatch(input, sidPattern); 
```

这将确保**输入字符串具有有效的格式**，但这并不能证明 SID 是有效的。正如评论中所建议的，如果您需要检查您是否有有效的 SID，您应该尝试获取帐户。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-16T13:06:13.347

我发现这种细微的变化很有帮助，它允许使用一些众所周知的安全标识符。例如，众所周知的 sid 所有人 S-1-1-0

```
^S-\d-(\d+-){1,14}\d+$ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-11T15:33:07.140

依靠正则表达式来检查 SID 是否有效并不是一个好主意。一方面，唯一有效的 SID 版本是 1，所以 `S-9-(\d+-){1,14}\d+` 当 9 不是有效版本时，这个正则表达式会认为是有效的。但是，如果有新的 SID 版本或什至全新的 SID 格式，将正则表达式修复为仅允许版本 1 将失败。更好的方法是让系统决定 SID 是否有效。只需这样做：

```
string notSureIfSID = "S-9-5-76-1812374880-3438888550-261701130-6117";
bool sidIsValid = false;
bool sidIsAccount = false;
try {
    SecurityIdentifier sid = new SecurityIdentifier(notSureIfSID);
    sidIsValid = true;
    sidIsAccount = sid.IsAccountSid();
}
catch (ArgumentException) {
    // Handle invalid SID
} 
```

如果 SID 格式无效（例如，如果版本不是 1 或子权限的数量超过 15 或小于 1），则构造函数将抛出 ArgumentException。如果您想检查 SID 是否是实际存在的帐户，只需调用`IsAccountSid`.`SecurityIdentifier`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-09T10:36:42.593

正则表达式应该是 "S-\d-\d-\d+-\d+-\d+-\d+-\w+"

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-17T22:07:48.733

如果需要检查 SID 是否为 SID，请使用[SecurityIdentifier](https://docs.microsoft.com/en-us/dotnet/api/system.security.principal.securityidentifier)内的构造函数`try\catch`。

这**不会**验证这个 sid 属于全世界的任何人\任何东西。

* * *

SID 是

*   总是从`S`
*   当前，始终继续`-1-` *（这是 SID 版本，只有一个）*
*   以不超过 6 个字节的单个[SID_IDENTIFIER_AUTHORITY](https://docs.microsoft.com/en-us/windows/win32/api/winnt/ns-winnt-sid_identifier_authority)继续，表示该值不超过`281474976710656`（15 个字符）
*   继续 [1..14]`-`分隔的[SID_IDENTIFIER_SUBAUTHORITY](https://docs.microsoft.com/en-us/windows/win32/api/securitybaseapi/nf-securitybaseapi-getsidsubauthority)不超过 4 个字节宽（最多 10 个字符）
*   可选择以 RID 结尾，`-`其宽度不超过 4 个字节（最多 10 个字符）

更详细的参考[MS-AZOD，第 1.1.1.2 章](https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-azod/)

# javascript - 如何显示从 .val() 获取的值

> ID：16099958
> 
> 赞同：0
> 
> 时间：2013-04-19T07:57:51.830
> 
> 标签：javascript, jquery, html-table

我在这里有这段代码，但它不起作用......我有一个文本输入，用户可以在其中键入任何数字。当用户单击添加时，它将向表中添加一个新行。单击删除时，该行将被删除。

我想跟踪索引并且它正在工作。但是，我还需要跟踪用户输入的数字，然后我可以使用该数字删除该行。但是，我无法将`textInput`其显示在桌子上......不确定显示它的正确方法是什么。请帮忙。

```
 var index=1;
 textInput = $('#outputTextInput').val();

 $('#outputAdd').click(function(){
                   index++;
                   $('#status_table tr:last').after('<tr id="output_newrow_'+textInput+'"><td>'+index+'</td><td id="type_row_'+index+'">type_row_'+textInput+'</td><td id="num_row_'+index+'">num row '+index+'</td><td><img class="image" src="static/OffLamp-icon.png" style="height:64px; width=64px"/></td></tr>');
                });
  $('#outputRemove').click(function(){

                    $('#status_table').find("#output_newrow_'+textInput+'").remove();
               }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T08:00:36.590

替换这个：

```
$('#status_table').find("#output_newrow_'+textInput+'").remove(); 
```

有了这个：

```
$('#status_table').find("#output_newrow_" + textInput).remove(); 
```

然后再试一次！

# javascript - 使用 Javascript 存储数据的替代方法

> ID：16099961
> 
> 赞同：0
> 
> 时间：2013-04-19T07:57:57.707
> 
> 标签：javascript, variables, local-storage, storage

我正在编写一个浏览器插件，该插件需要存储特定于用户的时间变量。唯一需要数据的js文件是“在每一页上”，不能真正做本地存储。为此，我需要一些替代方案的方向。

让我进一步解释一下事情是如何运作的。

**插件结构**

*   该插件在特定网站上从我的服务器调用一个 javascript 文件 - 称为 appScript.js

*   appScript.js 是我们的主文件，并在所选网站上放置图像。单击图像时，它会调用一个名为 iframe.php 的 iFrame，其中包含一个 main.js 文件。

*   从 iFrame 用户连接到 facebook，我们提取他们的 facebook ID 并将信息发送到 php 脚本，该脚本将一些数据存储在 mysql 表中。每个用户信息都位于 mySQL 上，使用他们的 facebook ID 作为索引。

appScript.js 需要保存一个特定于用户的变量。

**我对替代方案的想法**

*   在本地存储数据 - 当我在 appScript.js 上使用本地存储时，它会存储特定于 url 的数据，因此当在不同的 url 上调用 appScript.js 时无法访问。

*   将其存储在我的服务器上 - 有可能，但希望有更好的方法可以关闭，因为我希望插件尽可能少地影响浏览速度，除非单击图像并调用 iframe。（南非的速度不太快的）。它的工作原理是必须连接到 facebook，调用用户 ID，然后将其发送到服务器，等待响应然后对其采取行动，这可能需要时间并减慢用户的浏览体验。

*   以某种方式将数据存储在 iFrame.php 上 - 在调用 iFrame 之前我需要数据，这样就不会发生。

*   我想动态地将一个不可见的 iFrame 加载到可以使用本地存储的页面上，因为它会将其保存在我的服务器 URL 下，因此可以在任何页面上访问。唯一的问题是我还没有成功地使用不在 iframe 中的 appScript.js 从 iFrame 上保存的变量调用数据。（如果可能的话，有人可能会向我指出一个工作示例。我已经阅读了代码但未能成功实现它）

我很难过——我还能做什么？有任何想法吗？我已经用完了谷歌的关键字和学习技术。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:20:44.293

使用用户脚本（GreaseMonkey 等），有一个名为 GM_setVlaue、GM_getValue 的函数将以特定于脚本的方式保存（和获取）值。

如果您不想使用用户脚本，您可以查看插件源代码并查看它们如何在幕后加载/保存值。

# php - 如何在 symfony2 上添加自定义异常

> ID：16099962
> 
> 赞同：9
> 
> 时间：2013-04-19T07:57:57.733
> 
> 标签：php, symfony

我是 Symfony 的新手（使用 2.2 版）并尝试添加自定义异常侦听器。我已阅读以下链接，但无法使其正常工作。

*   [覆盖 Symfony 2 异常？](https://stackoverflow.com/questions/10336665/overriding-symfony-2-exceptions)
*   [Symfony2 自定义错误异常监听器 - 渲染模板或传递给控制器](https://stackoverflow.com/questions/13256252/symfony2-custom-error-exception-listener-rendering-templates-or-passing-to-a-c)

我要做的是创建一个自定义错误异常侦听器并从我的控制器和服务中使用它，

```
throw new jsonErrorException('invalid_params'); 
```

像这样显示 json twig 模板。（我正在为我的原生智能手机应用程序开发一个后台程序）

```
{"status": "error", "message": "invalid_params"} 
```

我已将我的 CustomEventListener 注册到我的 src/My/Bundle/Resources/config/services.yml 并创建了一个自定义异常类，如以下链接所示（[Overriding Symfony 2 exceptions？](https://stackoverflow.com/questions/10336665/overriding-symfony-2-exceptions)）但我收到错误

```
symfony exceptions must be valid objects derived from the exception base class 
```

我在这里做错了吗？谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-19T08:38:12.190

您可以使用“symfony 方式”创建自定义异常，让我们看看异常是如何在 symfony 中创建的：

首先创建您的 customExceptionInterface

```
namespace My\SymfonyBundle\Exception;
/**
 * Interface for my bundle exceptions.
 */
interface MySymfonyBundleExceptionInterface
{
} 
```

并创建您的`jsonErrorException`

```
namespace My\SymfonyBundle\Exception;

class HttpException extends \Exception implements MySymfonyBundleExceptionInterface
{
} 
```

不要犹豫，在 github 上浏览[symfony 的异常代码示例](https://github.com/symfony/symfony/tree/master/src/Symfony/Component/HttpKernel/Exception)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-05T07:40:17.157

我最近以下列方式在我的 Symfony2 服务中实现了一个自定义异常：

`MemberAlreadyExistsException.php`

```
<?php

namespace Aalaap\MyAppBundle\Services\Membership;

class MemberAlreadyExistsException extends \Exception
{

} 
```

`Subscriber.php`

```
<?php

namespace Aalaap\MyAppBundle\Services\Membership;
...
throw new MemberAlreadyExistsException(
    'The member you are trying to subscribe already'
    . ' exists in this list.'
);
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:59:36.753

您必须扩展 Exception 类，或者至少扩展 Symfony 的内部异常类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-17T07:19:19.233

我只需要添加`\`并且全局范围在 Symfony 服务中工作

```
namespace App\CoreBundle\Service;

class CurrencyExchange
{
    const RATES_XML = 'https://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml?849b4b329863b2d60bfd0de486e423c9';

    const RATES_XML_PATH = 'uploads/ecb_currencies.xml';

    /** @var array $rates */
    private $rates;

    public function __construct()
    {
        if (!is_file(self::RATES_XML_PATH)) {
            throw new \Exception('XML '.self::RATES_XML_PATH.' does not exists.');
        }

        if (1 > filesize(self::RATES_XML_PATH)) {
            throw new \Exception('XML '.self::RATES_XML_PATH.' is empty.');
        } 
```

# java - 实例化抽象类的子类

> ID：16099964
> 
> 赞同：1
> 
> 时间：2013-04-19T07:58:00.240
> 
> 标签：java, search, abstract-class, instance, subclass

我会直接进入它。下面是我在 AI 应用程序中实现的 GeneralSearch 类的代码片段，用于解决字谜。我想知道如何在抽象类中实例化子类。我觉得我已经在我的 BreadthFirstSearch 类以及调用它的超级构造函数的构造函数中实现了所有相关的抽象方法。（嵌套子类）

我知道你不能实例化一个抽象类，但是从以前的线程和信息中你可以用一个抽象超类实例化一个子类。

我尝试以下调用无济于事：

GeneralSearch bfs = new BreadthFirstSearch(now.getState(), info); //正确的参数

或者。

GeneralSearch bfs = GeneralSearch.BreadthFirstSearch(now.getState(), info);

收到的错误：1）BreadthFirstSearch 无法解析为类型 2）方法 BreadthFirstSearch(WordState, WordNodeInfo) 未定义为 GeneralSearch 类型

我似乎无法获得子类的有效实例化，因此我可以执行此类搜索。如果有人能对我的困惑和理解有所了解，那就太好了。（代码如下）

```
 public abstract class GeneralSearch {

  NodeInfo nodeInfo;
  ArrayList unvisited, visited;

  public GeneralSearch (State startState, NodeInfo nodeInfo) {
    this.nodeInfo = nodeInfo;
    unvisited = new ArrayList();
    unvisited.add(new Node(startState, new Actions()));
    visited = new ArrayList();
  }

  public Node search() {
      Actions moves;
      Action move;

      //Iterating through arrayList for unvisited and possible arcs
      Node visit, successor;

      if(unvisited.isEmpty()) return null;
      while( !unvisited.isEmpty() ) {
          visit = select();
          if(nodeInfo.isGoal(visit)) return visit;
          moves = visit.getState().getActions();

          Iterator<Action> it = moves.iterator();
          while(it.hasNext()) {
              successor = (Node) visit.clone();
              move = it.next();
              successor.getState().update(move);
              insert(successor);
          }
          visited.add(visit);
      }
      return null;
  }

  public abstract Node select ();

  public abstract void insert (Node node);

  public class BreadthFirstSearch extends GeneralSearch {

      public BreadthFirstSearch(State startState, NodeInfo nodeInfo) {
          super(startState, nodeInfo);
      }

      public Node select() {
          return (Node) visited.get(0);
      }

      public void insert(Node node) {
          unvisited.add(node);
      }
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:02:03.350

将 BreadthFirstSearch 类放在 GeneralSearch 类之外的单独文件中。

如果您想将其保留在那里，请尝试实例化`GeneralSearch.BreadthFirstSearch`而不是 just `BreadthFirstSearch`，但我什至不确定是否可以在它自己的父级中拥有一个子类。

在您的第二次尝试中，您缺少一个新语句：

```
GeneralSearch bfs = new GeneralSearch.BreadthFirstSearch(now.getState(), info); 
```

# openlayers - OpenLayers.Layer.ArcGIS93Rest 使用质量差的图像

> ID：16099966
> 
> 赞同：0
> 
> 时间：2013-04-19T07:58:04.893
> 
> 标签：openlayers, wms, arcgis-server, tiling

我有一个本地 ArcGIS 服务器 9.3.1。我启用了 WMS 和缓存（平铺）。我想使用 OpenLayers 显示切片，因为 ArcMap 无法打开自己的 REST 服务；(

使用 OpenLayers 效果很好，但瓷砖质量很差。航拍照片基础层（jpeg）非常像素化，覆盖也很糟糕，png8。

当我查看服务器上的平铺文件夹时，我看到图像正常，所以当 OpenLayers 打开它们时出现问题。

这是我的代码：

```
var mapOptions = {
    projection: new OpenLayers.Projection('EPSG:28992'),
    resolutions: [3440.64, 1720.32, 860.16, 430.08, 215.04, 107.52, 53.76, 26.88, 13.44, 6.72, 3.36, 1.68, 0.84, 0.42, 0.21, 0.105, 0.0525],
    div: "map",
    maxExtent: new OpenLayers.Bounds(634.5732789819,306592.8911594,1762242.253279,2068200.5711594),
    units: "m",
    numZoomLevels: 17,
    tileSize: new OpenLayers.Size(512,512),
    controls: []};

var map = new OpenLayers.Map('map', mapOptions);

var aerial= new OpenLayers.Layer.ArcGIS93Rest("aerial",
    "http://myServer/arcgis/rest/services/myMap/MapServer/export", 
    {layers: "show:0",
      type: "jpg",
      useScales: true,
      useAGS: true,
      transparent: false
    },
    { tileSize: new OpenLayers.Size(512,512),
      buffer: 2,      
      visibility: false,        
      isBaseLayer: true,
      transitionEffect: 'resize'
    }
);                    

var tiled = new OpenLayers.Layer.ArcGIS93Rest(Tiled",
    "http://myServer/arcgis/rest/services/MyMap/MapServer/export", 
    {layers: "show:56",
      type: "png8",
      useScales: true,
      useAGS: true,
      transparent: true
    },
    { tileSize: new OpenLayers.Size(512,512),
      buffer: 0,      
      visibility: false,        
      isBaseLayer: false,
      transitionEffect: 'resize'
    }
); 
```

边界和分辨率来自图层。有没有人建议如何在 OpenLayers 中显示来自 ArcGIS 的平铺 WMS 图层？

谢谢。

# excel - VLookup - Visual Basic - 如何设置范围

> ID：16099972
> 
> 赞同：2
> 
> 时间：2013-04-19T07:58:19.850
> 
> 标签：excel, excel-formula, vba

我`Vlookup`在单元格中设置了一个公式，`D5`用于检查单元格中`E5`的一些数据，执行`Vlookup`以下操作并返回结果：

```
=VLOOKUP(E5,StockCodesBBG!A:J,2,FALSE) 
```

我想做的是有一种方法可以自动计算我从`E5`下往上填充的行数，然后`Vlookup`为每个相应的单元格运行公式。

例如，假设我在 中有数据`E5,E6,E7`，我希望将公式应用到`D5,D6,D7`中。

我可以`Autofill`通过复制公式来解决这个问题，但它会留下一堆乱七八糟的`#N/A`值，列中没有任何东西`E`可供参考。如何避免单元格错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T08:25:05.290

您可以自动填充它，但同时处理它，`#N/A`这样您就不会看到那些令人讨厌的值:)

如果使用**xl2003**，请使用此

`=if(ISERROR(VLOOKUP(E5,StockCodesBBG!A:J,2,FALSE)),"",VLOOKUP(E5,StockCodesBBG!A:J,2,FALSE))`

或者

`=if(ISNA(VLOOKUP(E5,StockCodesBBG!A:J,2,FALSE)),"",VLOOKUP(E5,StockCodesBBG!A:J,2,FALSE))`

如果使用**xl2007+**，请使用此

`=IFERROR(VLOOKUP(E5,StockCodesBBG!A:J,2,FALSE),"")`

`ISERROR`查看有关, `ISNA`,的 Excel 帮助`IFERROR`

# java - 正则表达式拆分键=值

> ID：16099975
> 
> 赞同：4
> 
> 时间：2013-04-19T07:58:29.953
> 
> 标签：java, regex, string, split

我有一个这样的字符串：

```
KEY1=Value1, KE_Y2=[V@LUE2A, Value2B], Key3=, KEY4=V-AL.UE4, KEY5={Value5} 
```

我需要拆分它以获取带有键值对的 Map。中的值`[]`应作为单个值传递（`KE_Y2`是键和`[V@LUE2A, Value2B]`值）。

我应该使用什么正则表达式来正确拆分它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T08:10:28.983

There's a magic regex for the first split:

```
String[] pairs = input.split(", *(?![^\\[\\]]*\\])"); 
```

Then split each of the key/values with simply "=":

```
for (String pair : pairs) {
    String[] parts = pair.split("=");
    String key = parts[0];
    String value = parts[1];
} 
```

* * *

Putting it all together:

```
Map<String, String> map = new HashMap<String, String>();
for (String pair : input.split(", *(?![^\\[\\]]*\\])")) {
    String[] parts = pair.split("=");
    map.put(parts[0], parts[1]);
} 
```

Voila!

* * *

# Explanation of magic regex:

The regex says "a comma followed by any number of spaces (so key names don't have leading blanks), but only if the next bracket encountered is not a close bracket"

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T08:10:50.993

How about this:

```
Map<String, String> map = new HashMap<String, String>();
Pattern regex = Pattern.compile(
    "(\\w+)        # Match an alphanumeric identifier, capture in group 1\n" +
    "=             # Match =                                             \n" +
    "(             # Match and capture in group 2:                       \n" +
    " (?:          # Either...                                           \n" +
    "  \\[         #  a [                                                \n" +
    "  [^\\[\\]]*  #  followed by any number of characters except [ or ] \n" +
    "  \\]         #  followed by a ]                                    \n" +
    " |            # or...                                               \n" +
    "  [^\\[\\],]* #  any number of characters except commas, [ or ]     \n" +
    " )            # End of alternation                                  \n" +
    ")             # End of capturing group", 
    Pattern.COMMENTS);
Matcher regexMatcher = regex.matcher(subjectString);
while (regexMatcher.find()) {
    map.put(regexMatcher.group(1), regexMatcher.group(2));
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T08:09:13.537

Start with @achintya-jha's answer. When you split a String, it will give you an array (or something that acts like it) so you can iterate throught the pair of key/value and then you do the second split which is supposed to give you another array of size 2; you then use the first element as the key and the second as the value.

EDIT:

I dind't found useful link for what I meant (see the comments on the question) in JAVA, (there is plenty of them for C/C++ though) so I wrote it:

```
Map<String, String> map = new HashMap<String, String>();
String str = "KEY1=Value1, KE_Y2=[V@LUE2A, Value2B]], Key3=, KEY4=V-AL.UE4, KEY5={Value5}";     

final String openBrackets =  "({[<";
final String closeBrackets = ")}]>";

String buffer = "";
int state = 0;
int i = 0;      
Stack<Integer> stack = new Stack<Integer>(); //For the brackets

String key = "";

while(  i < str.length() ) {

    char c = str.charAt(i);

    //Skip any whitespace
    if( " \t\n\r".indexOf(c) > -1 ) {
        ++i;
        continue;
    }

    switch(state) {

    //Reading Key
    case 0:
        if( c != '=' ) {
            buffer += c;
        } else {
            //Go read a value.
            key = buffer;
            state = 1;
            buffer = "";
        }
        ++i;
        break;

    //Reading value
    case 1:

        //Opening bracket
        int pos = openBrackets.indexOf(c);
        if( pos != -1 ) {
            stack.push(pos);
            ++i;
            break;
        }

        //Closing bracket
        pos = closeBrackets.indexOf(c);
        if( pos != -1 ) {

            if( stack.size() == 0 ) {
                throw new RuntimeException("Syntax error: Unmatched closing bracket '" + c + "'" );
            }

            int pos2 = stack.pop();
            if( pos != pos2 ) {
                throw new RuntimeException("Syntax error: Unmatched closing bracket, expected a '"
                        + closeBrackets.charAt(pos2) + "' got '" + c );             
            }
            ++i;
            break;
        }

        //Handling separators 
        if( c == ',' ) {
            if( stack.size() == 0 ) {
                //Put the pair in the map.
                map.put(key, buffer);

                //Go read a new Key.
                state = 0;
                buffer = "";
                ++i;
                break;
            }                       
        }

        //else
            buffer += c;
            ++i;

        } //switch
} //while 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-19T08:00:45.620

1.  用 String.split(","); 分割给定的字符串
2.  现在用 String.split("="); 分割数组的每个元素；

# matrix - Can i switch X Y Z in a quaternion?

> ID：16099979
> 
> 赞同：11
> 
> 时间：2013-04-19T07:58:44.320
> 
> 标签：matrix, 3d, rotation, quaternions

i have a coordinate system where the Y axis is UP. I need to convert it to a coordinate system where Z is UP. I have the rotations stored in quaternions, so my question is : if i have a quaternion X,Y,Z can i switch the Y with the Z and get the result that Z is actually UP?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T11:36:17.667

Just swpping two axes in a quaternions? No this doesn't work because this flips the chirality. However if you flip the chirality and negate the quaternion's real part then you're back in the original chirality. In general form you can write this as

Q'(Q, i'j'k') = ε[i'j'k'] Q[w]_w + Q[i]_i + Q[j]_j + Q[k]_k

where

![Levi-Cevita Symbol Definition](https://i.stack.imgur.com/gWmvq.png)

is the totally antisymmetric tensor, known as the Levi-Cevita symbol.

This shouldn't be a surprise, as the i², j², k² rules of quaternions are defined also by the same totally antisymmetric tensor.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-24T23:40:37.177

I'm adapting my answer from [this post](https://stackoverflow.com/q/39098154/1468366) since the one here was the older and likely more generic one.

It's probably best to consider this in the context of how you convert angle and axis to a quaternion. In [Wikipedia](https://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation) you can read that you describe a rotation by an angle θ around an axis with unit direction vector (x,y,z) using

> q = cos(θ/2) + sin(θ/2)(xi + yj + zk)

Your post only tells us Y ↦ Z, i.e. the old Y direction is the new Z direction. What about the other directions? You probably want to keep X ↦ X, but that still leaves us with two alternatives.

1.  Either you use Z ↦ Y. In that case you change between left-handed and right-handed coordinate system, and the conversion is essentially a reflection.
2.  Or you use Z ↦ −Y, then it's just a 90° rotation about the X axis. The handedness of the coordinate system remains the same.

## Change of chirality

Considering the first case first. What does changing the coordinate system do to your angle and axis? Well, the axis coordinates experience the same coordinate swapping as your points, and the angle changes its sign. So you have

> cos(−θ/2) + sin(−θ/2)(xi + zj + yk)

Compared to the above, the real part does not change (since cos(*x*)=cos(−<em>x)) but the imaginary parts change their sign, in addition to the change in order. Generalizing from this, a quaternion `a + bi + cj + dk` describing a rotation in the old coordinate system would be turned into `a − bi − dj − ck` in the new coordinate system. Or into `−a + bi + dj + ck` which is a different description of the same rotation (since it changes θ by 360° but θ/2 by 180°).

## Preserved chirality

Compared to this, the second case of Z ↦ −Y maintains the sign of θ, so you only have to adjust the axis. The new *Z* coordinate is the old *Y* coordinate, and the new *Y* coordinate is the negated old *Z* coordinate. So `a + bi + cj + dk` gets converted to `a + bi − dj + ck` (or its negative). Note that this is just a multiplication of the quaternion by `i` or `−i`, depending on which side you multiply it. If you want to write this as a conjugation, you have θ=±45° so you get square roots in the quaternion that expresses the change of coordinate system.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-21T13:24:14.890

Try : Quaternion rotation = new Quaternion(X,Z,Y, -W); //i had to swap Z and Y due to

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T11:25:31.567

No, you cannot exchange y and z -- it will turn into a Left-Handed Coordinate system, if it was Right-Handed (and vice-versa).

You can, however, do the following substitution:

```
newX = oldZ
newY = oldX
newZ = oldY 
```

I suspect that what you *really* want is a simple rotation about the x axis. If that's why you want to switch y and z, then you should instead *apply a rotation of -90 degrees about the +x axis* (assuming you have a Right-Handed coordinate system).

# java - 如何使并发运行的线程？

> ID：16099986
> 
> 赞同：5
> 
> 时间：2013-04-19T07:59:31.593
> 
> 标签：java, multithreading, concurrency, runnable

我想让两个单独的线程运行不同类的两个不同实例，并且我希望它们同时执行运行命令。

我做了一个练习课来演示我遇到的问题。一名赛车手向前计数，另一名向后计数。

```
public class testCount {

    public static void main(String args[]) {
        testCount countCompetition = new testCount();
        countCompetition.run();
    }

    public void run() {
        (new Thread(new racer1())).start();
        (new Thread(new racer2())).start();
    }

    public class racer1 implements Runnable {
        public void run() {
            for(int x = 0; x < 100; x++) {
                System.out.println(x);
            }
        }
    }
    public class racer2 implements Runnable {
        public void run() {
            for(int y = 100; y > 0; y--) {
                System.out.println(y);
            }
        }
    }
} 
```

我的结果

```
1
2
... All the way to 100
100
100
99
... All the way back down
1 
```

我想要的是

```
1
100
2
99
3
98 
```

他们不需要像那样轮流工作，但他们确实需要同时工作，而不是一个接一个地工作。任何提示、建议或代码片段将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T08:51:24.883

我认为到目前为止所有的答案都没有抓住重点。

您现有的逻辑确实使您的两个线程都可以同时执行，但这并不明显，因为您的数字最多只能达到 100，并且执行通常会一次在特定线程中停留超过 1 条指令，否则会有一直在当前执行的线程之间切换的大量开销。在您的情况下，JVM 决定执行您的第一个线程足够长的时间，以便在“上下文切换”到第二个线程之前打印出 100 个数字。JVM 可能会选择以不同的方式执行线程，因此不能保证您看到的结果每次都相同。

如果您将数字增加到 1000，您将（可能）看到两个线程有​​些交错。您仍然会有大量运行，其中一个线程连续打印出很多数字，因为 JVM 在切换之前执行一个线程一段时间会更有效，而不是在每条指令之间切换上下文。

添加 Thread.sleep(1) 不是一个好的解决方案，因为您添加了不必要的延迟。当然，对于 100 个号码，这可能并不明显，但对于 10000 个号码，您会有 10 秒的延迟。

您是否有任何理由要求它们交错到比现在更高的程度？如果有那么您同时运行两个线程的简单模型是不够的。如果不是，那么只需让 JVM 决定运行线程的最佳顺序（在您给出的简单示例中，这意味着它们可能大部分时间都不会交错）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:02:39.883

只需`Thread.sleep(1);`在每个`racer`类中添加`System.out.println()`.

即它看起来像这样：

```
public class racer1 implements Runnable {
    public void run() {
        for(int x = 0; x < 100; x++) {
            System.out.println(x);
            try {
                Thread.sleep(1);
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T08:18:23.020

您需要编写一个基本的等待和通知系统。一项任务需要通知另一项他已经完成了这项工作。基本思想可以从下面的代码中得出。创建 2 个任务，一个向前计数，一个向后计数

```
Runnable task = new Runnable() {
  public void run() {
    System.out.println("woohooTwo");
    synchronized (t) {
      while (true) {
        System.out.println("---" + Thread.currentThread().getName() + "--" + t.i.getAndIncrement());
        t.notifyAll();

        try {
          Thread.sleep(1000);
          t.wait();
        } catch (InterruptedException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
        }
      }

    }
  }
}; 
```

# c# - Visual Studio 2010 中的拒绝服务 (DoS) 应用程序

> ID：16099994
> 
> 赞同：0
> 
> 时间：2013-04-19T07:59:49.287
> 
> 标签：c#, icmp, denial-of-service, flooding

这是一个冗长的问题，它可能很成熟，对不起，我是编程新手；我想设计一个基于控制台的应用程序来测试拒绝服务 (DOS) 攻击。假设`ping example.com -t -l 65000`是唯一需要在控制台中执行的事情。我希望控制台在后台运行。但我想说，5 个不同的控制台在后台执行 ICMP 泛洪。要杀死进程，我们需要手动杀死进程。测试将在实时环境中进行。我需要制作一个 .exe 文件以便在 Windows 上运行它。

我正在使用 MS Visual Studio 2010 在 c# 中构建程序，可以做什么？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-05T16:00:53.493

您是否试图通过 ping 请求杀死服务器？Ping 请求对服务器来说非常容易处理。理论上，您可以通过第 4 层攻击，淹没管道，但除了回显请求之外，您最好使用其他任何东西。

如果您尝试 DoS 攻击（我希望它仅用于研究），您可能需要查看部分 GET 请求。我已经设法对他们进行了非常有效的攻击，只要我想要，服务器就注定没有响应。尽管 HTTP 服务器没有响应，但 ping 请求始终返回完全相同的行程时间，就好像什么也没发生一样。

部分 GET / POST 请求，工作得很好，比现在应该的时间更长，似乎很难克服这个问题，Apache 很清楚这种情况。

我听说 IIS 对部分 POST 也有相同的反应，但对部分 GET 没有。

关于这项技术的一些数字：

~5000bytes/s，持续 2-3 秒，每 30 秒。那是带宽使用，基本上是偶尔 150 个 GET 请求。

apache 服务器的所有开放插槽立即填满。

很难检测到正在发生的事情，攻击期间 CPU 大约为 0.05%，网络连接也不是很紧张。

当然，几乎没有其他 HTTP 请求能够到达服务器。当服务器读取超时并且所有连接必须再次重新启动时，它们可以到达。

我还没有在用于 HTTP 连接的插槽超过 150 个的服务器上尝试过这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:07:27.030

```
System.Diagnostics.Process proc;

cmd = "/C ping example.com -t -l 65000";
for (i = 0; i < 5; i++)
{
    proc = new System.Diagnostics.Process();
    proc.EnableRaisingEvents = false;
    proc.StartInfo.FileName = "cmd";
    proc.StartInfo.Arguments = cmd;
    proc.Start();
} 
```

# c# - 如何使用图像创建自定义工具提示？

> ID：16099995
> 
> 赞同：3
> 
> 时间：2013-04-19T07:59:54.917
> 
> 标签：c#, custom-controls, tooltip, system.drawing

我想创建一个包含以下内容的自定义工具提示：

*   图片在右上角
*   左侧的文字

目前我有一个继承自 ToolTip Objekt 的类。

```
class CustomToolTip : ToolTip
{
    public CustomToolTip()
    {
        this.OwnerDraw = true;
        this.Popup += new PopupEventHandler(this.OnPopup);
        this.Draw += new DrawToolTipEventHandler(this.OnDraw);
    }

    private void OnPopup(object sender, PopupEventArgs e)
    {
        e.ToolTipSize = new Size(200, 100);
    }

    private void OnDraw(object sender, DrawToolTipEventArgs e)
    {

    }
} 
```

但我不知道如何在“OnDraw-Event”中显示带有文本的图像。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:05:40.730

看看这个[http://www.codeproject.com/Articles/42050/ToolTip-With-Image-C](http://www.codeproject.com/Articles/42050/ToolTip-With-Image-C) 应该足够解释

```
myImageRectangle = Rectangle.Inflate(myToolTipRectangle, -BORDER_THICKNESS, -BORDER_THICKNESS);
Image toolTipImage = Image.FromFile(filepath);        
if (toolTipImage != null)
    {
        myImageRectangle.Width = 200;
        myTextRectangle = new Rectangle(myImageRectangle.Right, myImageRectangle.Top, (myToolTipRectangle.Width - myImageRectangle.Right), myImageRectangle.Height);
        myTextRectangle.Location = new Point(myImageRectangle.Right, myImageRectangle.Top);
        e.Graphics.FillRectangle(myBackColorBrush, myTextRectangle);
        e.Graphics.DrawImage(toolTipImage, myImageRectangle);
        e.Graphics.DrawString(e.ToolTipText, myFont, 
        myTextBrush, myTextRectangle, myTextFormat);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:11:08.840

Please Try [GDI+](http://msdn.microsoft.com/en-us/library/windows/desktop/ms533802%28v=vs.85%29.aspx)

```
protected override void OnPaint(PaintEventArgs e)
{
    base.OnPaint(e);
    Image img = Image.FromFile("C:\filepath\filename.jpg");
    e.Graphics.DrawImage(img, 0, 0);
    var YourTipTextPoint = new Point(0,0);
    e.Graphics.DrawString("Hello World", SystemFonts.DefaultFont, Brushes.Black, YourTipTextPoint); 
} 
```

# jquery - 通过 jquery.ajax 发布表单数据时，一个现象让我很困惑

> ID：16099996
> 
> 赞同：2
> 
> 时间：2013-04-19T08:00:10.570
> 
> 标签：jquery, post

这是我的表格：

```
<form id="login_form">
    <table border="0">
        <tr>
            <td>username: </td>
            <td colspan="10">
                <input id="username" name="username" type="text" />
            </td>
        </tr>
        <tr>
            <td>password: </td>
            <td>
                <input id="passwd" name="passwd" type="password" />
            </td>
        </tr>
        <tr style="text-align:center">
            <td>
                <input id="login_submit" type="submit" title="submit" />
            </td>
            <td>
                <input type="reset" title="reset" />
            </td>
        </tr>
    </table>
</form> 
```

我的jQuery代码：

```
$(function(){
    jQuery("#login_submit").click(function() {
        jQuery.ajax({
            url:'./login/',
            type:'post',
            data:$("#login_form").serialize(),
            dataType:'html',
            async: false,
            success:function(backData)    {
                alert(data);
            },
            error:function(err){
                alert('error = ' + err);
            }
        });
    });
}); 
```

我感到困惑的是，当我访问 url: 时`http://192.168.0.3/CarKeeperServer/user/login.jsp`，单击提交按钮（该页面不会定向到新页面，因为 jquery 代码片段中没有重定向代码），并且 url 将更改为`http://192.168.0.3/CarKeeperServer/user/login.jsp?username=df&passwd=sd`，这是`exposes`我的用户名和密码就像在`GET`方法中一样。谁能解释为什么会发生这种情况以及解决方案是什么？非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T08:03:58.207

您需要通过调用 preventDefault 来阻止表单提交。您看到触发获取请求的原因是您没有阻止表单提交，即提交到您所在的当前页面。

默认情况下，表单使用该`get`方法将信息发送到服务器。见：[http ://www.w3.org/TR/html401/interact/forms.html#adef-action](http://www.w3.org/TR/html401/interact/forms.html#adef-action)

由于表单没有指定默认动作，它使用当前页面作为动作。这不是设计到 HTML 规范中的，而是由许多浏览器实现以维护遗留应用程序。请参阅：[对 HTML 表单的 action 属性使用空 URL 是一种好习惯吗？(动作="")](https://stackoverflow.com/questions/1131781/is-it-a-good-practice-to-use-an-empty-url-for-a-html-forms-action-attribute-a)

```
$(function(){
    jQuery("#login_submit").click(function(e) {
        jQuery.ajax({
            url:'./login/',
            type:'post',
            data:$("#login_form").serialize(),
            dataType:'html',
            async: false,
            success:function(backData)    {
                alert(data);
            },
            error:function(err){
                alert('error = ' + err);
            }
        });
        e.preventDefault();
    });
}); 
```