# StackOverflow 问答 13521000-13521999

# biztalk - BizTalk 正在尝试对 BizTalkDTADb 数据库运行“exec TDDS_GetColumnInfo @objectName=N'[dbo].[bam_xxx_PrimaryImport]'”

> ID：13521004
> 
> 赞同：0
> 
> 时间：2012-11-22T22:51:32.847
> 
> 标签：biztalk, biztalk-2010, biztalk-bam

我已经部署了我的 BAM 活动，它们（表/存储的过程）存在于 BAMPrimaryImport 数据库中。但是当进程运行时出现错误：

> TDDS 未能执行事件。找不到存储过程“dbo.bam_xxx_PrimaryImport”。**

我运行了 SQL Profiler，它显示它正在尝试针对**BizTalkDTADb**数据库运行以下命令！

```
exec TDDS_GetColumnInfo @objectName=N'[dbo].[bam_xxx_PrimaryImport]'** 
```

显然 bam_xxx_PrimaryImport 中不存在 BizTalkDTADb 。

那么为什么它试图对 BizTalkDTADb 数据库而不是 BAMPrimaryImport 运行该命令呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:48:51.317

这被称为**孤立跟踪配置文件**问题。你必须有

1.  创建了 BAM 活动
2.  使用 TPE 创建跟踪配置文件以从 Biztalk 应用程序中捕获数据
3.  稍后，您取消了 BAM 活动的部署。

解决方案是找到定义 BAM 活动的文件并使用 BM 重新部署活动。

这通常发生在您进行测试时 - 通过部署和取消部署您的 BAM 活动并更改您的跟踪配置文件。

**您可以在“ Biztalk 2009 中的 Pro Business Activity Monitoring - Apress** ”中阅读有关此内容的更多信息

# javascript - Tabs.url 未定义

> ID：13521009
> 
> 赞同：4
> 
> 时间：2012-11-22T22:53:29.643
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

我不知道我在这里做错了什么！我相信这应该有效。我正在编写一个 chrome 扩展，这应该获取当前选项卡的 url 并将 html 设置`#current-tab`为 url（用于测试目的）。代码成功到达回调，但是当我将 tab.url 放入警报框中时它说未定义，并且它没有将它的值放入`#current-tab`. 这是我的代码：

```
$('#get-tab').click(function(){
    chrome.tabs.query({"active" : true}, function(tab){
        for (var i = 0; i < tab.length; i++) {
            alert(tab[i].url);
            $('#current-tab').append(tab[i].url);
        };
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T22:56:37.007

`chrome.tabs.query`实际上返回一个对象数组`Tab`，因此您必须引用数组内部的选项卡（即使它只有一个`Tab`）：

```
$('#get-tab').click(function(){
chrome.tabs.query({"active" : true}, function(tab){
    for (var i = 0; i < tab.length; i++) {
        alert(tab[i].url);
        $('#current-tab').append(tab[i].url);
    };
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T06:19:07.117

我发现出了什么问题！显然您需要重新加载扩展来刷新对清单文件的更改！我后来添加了权限，但没有在扩展管理器中重新加载扩展，所以更改没有生效！我们现在正在滚动！

# java - JDOFatalUserException：非法参数（在 GAE J 上，但不在开发系统上）

> ID：13521010
> 
> 赞同：1
> 
> 时间：2012-11-22T22:53:29.590
> 
> 标签：java, google-app-engine, google-cloud-datastore, jdo

我正在 Google App Engine/Java 上开发一个应用程序。在我的开发环境中，应用程序运行良好，数据存储和检索成功。但是，在上传到应用程序引擎时，我不断收到错误“javax.jdo.JDOFatalUserException：非法参数”。从堆栈跟踪来看，这似乎发生在我调用 (List query.execute()).size() 时。相关的堆栈跟踪是。

```
2012-11-22 23:34:08.512
[s~qalmadev1/1.363360558551053190].<stderr>: javax.jdo.JDOFatalUserException: Illegal argument

W 2012-11-22 23:34:08.516
[s~qalmadev1/1.363360558551053190].<stderr>:    at org.datanucleus.api.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:488)

W 2012-11-22 23:34:08.516
[s~qalmadev1/1.363360558551053190].<stderr>:    at org.datanucleus.api.jdo.JDOAdapter.getApiExceptionForNucleusException(JDOAdapter.java:1107)

W 2012-11-22 23:34:08.516
[s~qalmadev1/1.363360558551053190].<stderr>:    at com.google.appengine.datanucleus.query.QueryExceptionWrappers$2.get(QueryExceptionWrappers.java:72)

W 2012-11-22 23:34:08.516
[s~qalmadev1/1.363360558551053190].<stderr>:    at com.google.appengine.datanucleus.query.RuntimeExceptionWrappingIterator.hasNext(RuntimeExceptionWrappingIterator.java:103)

W 2012-11-22 23:34:08.516
[s~qalmadev1/1.363360558551053190].<stderr>:    at com.google.appengine.datanucleus.query.LazyResult.resolveAll(LazyResult.java:120)

W 2012-11-22 23:34:08.516
[s~qalmadev1/1.363360558551053190].<stderr>:    at com.google.appengine.datanucleus.query.LazyResult.size(LazyResult.java:115)

W 2012-11-22 23:34:08.516
[s~qalmadev1/1.363360558551053190].<stderr>:    at com.google.appengine.datanucleus.query.StreamingQueryResult.size(StreamingQueryResult.java:151)

W 2012-11-22 23:34:08.516
[s~qalmadev1/1.363360558551053190].<stderr>:    at com.xxx.xxx.appengine.server.CreateEventServlet.doPost(CreateEventServlet.java:115) 
```

我的 CreateEventServlet 中的第 115 行是下面代码中的“if()”行

```
Query query = pm.newQuery("select from com.xxx.xxx.appengine.User "
        + "where key == :userid");
        List<User> result = (List<User>) query.execute(userid);
        if (result != null && result.size() > 0) { // Line 115
            user = result.get(0);
            USER_VALID = true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:51:50.420

发现了问题。

```
Query query = pm.newQuery("select from com.xxx. xxx.appengine.User "
    + "where key == :userid"); 
```

在查询中，“userid”指的是通过 KeyFactory.keyToString() 实现的 String。使用 KeyFactory.stringToKey() 将字符串转换回密钥解决了这个问题。

# php - Strip_tags 除了php中的href标签？

> ID：13521015
> 
> 赞同：0
> 
> 时间：2012-11-22T22:54:24.100
> 
> 标签：php

> **可能重复：**
> [去除所有 HTML 标签，允许的除外](https://stackoverflow.com/questions/6247035/strip-all-html-tags-except-allowed)

我有这个代码：

```
<?php echo strip_tags($row->message); ?> 
```

现在，我需要为**a href** html 标签添加异常`<a>`，因为现在所有标签都被丢弃了。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T22:57:41.220

```
strip_tags($row->message, '<a>'); 
```

第二个论点是针对例外情况提出的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T22:57:31.857

我想你的意思是去掉`a`标签以外的所有东西？以下是您的操作方法 - 提供一个带有异常的字符串作为参数编号 2（[文档](http://php.net/strip_tags/)）：

```
<?php echo strip_tags($row->message, '<a>'); ?> 
```

# .net - F# 电子邮件监听器

> ID：13521025
> 
> 赞同：4
> 
> 时间：2012-11-22T22:55:34.773
> 
> 标签：.net, service, f#, listener, imap

我想做一个收听 imap 邮箱的电子邮件监听器。我的基本想法是继续使用 imap 客户端轮询服务器，我将如何在 f# 中创建这种循环以及如何将程序变成可以干净地启动和停止的服务。此外，有没有比每隔几秒钟轮询一次 imap 服务器更好的方法来监听 imap 服务器？

**编辑**：

我发现这个问题回答了我关于创建服务的问题： [编写轮询 Windows 服务](https://stackoverflow.com/questions/7519755/writing-a-polling-windows-service)。但是问题仍然存在，这是收听 IMAP 邮箱的正确方法吗？会不会有什么可能的问题？

**编辑 2**

我一直在查看在 C# 中使用事件处理程序的 S22.Imap 但是我不确定如何在 F# 中实现它，基本上是这一行：

```
// We want to be informed when new messages arrive
Client.NewMessage += new EventHandler<IdleMessageEventArgs>(OnNewMessage); 
```

我想这就是程序保持活动状态的方式，它是否坐在这条线上等待事件？

代码的作者也把这个放在下面，我不太明白：

```
// Put calling thread to sleep. This is just so the example program does
// not immediately exit.
System.Threading.Thread.Sleep(60000); 
```

有人可以向我解释如何在 F# 中实现它吗？完整示例可[在此处](https://github.com/smiley22/S22.Imap/blob/master/Examples.md)获得。

**编辑 3**

不知道为什么这个问题被关闭了，也许编辑 2 的最后一句话没有被阅读。所以我的问题是：

有人可以向我解释如何在 F# 中实现事件处理吗？我在谷歌上找不到任何不适合 GUI 应用程序的东西。如何将上面的示例 C# 代码转换为 F# 中的内容？

任何对否决票的解释也将不胜感激，我最初的问题得到了一些人的部分回答，我为自己找到了一些答案，但还没有完全回答，这个问题只是演变成稍微不同的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:54:08.740

看起来您使用的 API 使这变得非常容易。`NewMessage`由于 IMAP 客户端提供事件，因此您无需实现自己的轮询。您引用的示例（*EDIT 2*）是一个控制台应用程序，因此调用`Thread.Sleep`阻止它立即退出。这不是 Windows 服务中的问题。该进程将由服务管理器保持活动状态。以下代码应该为您的服务提供工作基础。

```
open S22.Imap

type ImapService() =
  inherit System.ServiceProcess.ServiceBase()

  let mutable client = null

  override __.OnStart(_) = 
    client <- new ImapClient("imap.gmail.com", 993,
      "username", "password", AuthMethod.Login, true)
    client.NewMessage.Add(fun args ->
      let msg = client.GetMessage(args.MessageUID, FetchOptions.HeadersOnly)
      //do something with msg
      ()
    )

  override __.OnStop() = 
    client.Dispose() 
```

# objective-c - 传递给 NSOperation 的 NSDictionary 在调用的方法中为 null

> ID：13521026
> 
> 赞同：0
> 
> 时间：2012-11-22T22:55:53.430
> 
> 标签：objective-c, nsoperation, nsoperationqueue, nsinvocationoperation

我正在使用下面的代码将多个值传递给 NSOperation。

我已经定义了一个 NSDictionary 但我无法在调用的方法中访问它（它总是返回 null）。

下面是我调用该方法的代码

```
NSDictionary *params = [[NSDictionary alloc] initWithObjectsAndKeys:
@"key1", @"value1",
@"key2", @"value2",
nil];

NSOperationQueue *queue = [NSOperationQueue new];
NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(method:) object:params];
[queue addOperation:operation]; 
```

这是我的方法定义

```
- (void) method: (NSDictionary *) params {
     NSLog(@"value1: %@", [[params objectForKey:@"key1"] stringValue]);
} 
```

调用了名为*method*的方法，但是当我根据字典定义实际查看*value1*时，NSLog 始终打印为空。

我错过了什么吗？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T07:30:58.753

正如方法名称`initWithObjectsAndKeys`所示，在您的情况下，`@"key1"`是值/对象并且`@"value1"`是键。此外，对象中没有`stringValue`方法`NSString`。所以，试试：

```
NSLog(@"value1: %@", [params objectForKey:@"value1"]); 
```

# c++ - Qt 内存管理

> ID：13521029
> 
> 赞同：1
> 
> 时间：2012-11-22T22:56:13.213
> 
> 标签：c++, qt, memory

考虑以下代码段：

```
1: QPushButton *p_Button = new QPushButton(this); 
2: QPushButton myButton(this); 
```

**第 1 行**：*这*指的是 QWidget，因此在我的示例中 p_Button 是 QWidget 的子代：当 QWidget 死亡（超出范围？？）时，他的析构函数从堆中*删除*p_Button 并调用 p_Button 的析构函数。

**第 2 行**：与第 1 行相同，但 QWidget 的析构函数是否*删除*了 myButton，因为它的子元素也是 myButton？

如果我说错了，请纠正我并回答我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:12:44.170

是的，是的。如果 a`QObject`不是由 new 创建的，则它必须在其父级之前被销毁。否则，父母会删除孩子，程序可能会崩溃。

Qt 有一些关于[对象树和所有权](http://doc.qt.digia.com/qt/objecttrees.html)的很好的文档来解释这一点。

# c++ - 函数指针和成员函数指针指向标准函数的规则是什么？

> ID：13521030
> 
> 赞同：7
> 
> 时间：2012-11-22T22:56:16.697
> 
> 标签：c++, rules, standard-library, member-function-pointers, member-functions

将函数指针或成员函数指针指向标准函数的现有规则是什么？例如，像

```
auto p = &std::string::size; 
```

这合法吗？如果我明确地请求正确的类型，它或多或少是合法的，所以即使有额外的实现添加重载，它也会起作用`std::string::size`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T23:21:52.500

使用“正确的”类型并不能让事情变得更好：除了`virtual`函数之外，标准 C++ 库中的所有函数都可以有额外的参数，只要这些是默认的。由于函数也可以用额外的重载声明（同样是`virtual`函数除外），您最终可能会尝试为重载集分配一个变量。因此，代码不可移植，并且无法通过使用某种强制转换或某些签名而不是`auto`.

相关引用是 17.6.5.5 [member.functions] 第 1 段：

> 一个实现可以在一个类中声明额外的非虚拟成员函数签名：
> --- 通过将具有默认值的参数添加到成员函数签名；
> — 通过用两个或多个具有等效行为的成员函数签名替换具有默认值的成员函数签名；和
> — 通过为成员函数名称添加成员函数签名。

不过，我看不到非成员函数的类似权限。不确定将这些弄乱的权限隐藏在哪里，但我相对肯定这些也有一些狡猾的词。进一步看，根据 17.6.5.4 [global.functions] 第 3 段，似乎非成员函数受到更多限制：

> 实现不应声明具有附加默认参数的全局或非成员函数签名。

这意味着您至少可以在指定所需签名时获取非成员函数的地址*。*

# ruby-on-rails - 角色相关的关联

> ID：13521031
> 
> 赞同：3
> 
> 时间：2012-11-22T22:56:21.013
> 
> 标签：ruby-on-rails, ruby, database, database-design, activerecord

我正在开发我的第一个真正的 Rails 应用程序，用于在公司进行时间跟踪，并且遇到了数据库/模型设计问题。我的应用程序有一个用户模型和一个角色模型，它们通过 has_and_belongs_to_many 关联链接在一起。

角色之一是经理。一个经理可以有很多助理，助理可以有很多经理（尽管通常只有一个）。这种关系通过在 User 模型中表示为 manager_assistant_relationship 表示：

```
has_many :assistants, :through => :manager_assistant_relationships
has_many :managers, :through => :manager_assistant_relationships 
```

助理可以有很多班次（代表工作班次的不同模型），经理可以有很多客户（另一种为助理工作计费的模型）。更多的协会即将到来。

据我所知，唯一的解决方案是将所有这些关系放在 User 模型中，但是对此感觉有些不对劲，并且随着角色的增加和关联的增加，User 模型可能会变得臃肿，而且看起来也不直观，因为 User 只有如果他是经理，很多助手。我想要一些关于这种方法的潜在陷阱以及我应该考虑哪些替代方案的建议。

将 User 模型子类化为角色会是一个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:13:47.703

好消息，您在角色方面做得正确。

要回答您的问题，*不*，根据您的描述对 User 模型进行子类化不是一个好主意。如果你这样做了，它往往会导致棘手的关联自连接、STI（单表继承）、继承或类而不是模块的组合。使用角色要好得多。

它可以帮助您将用户视为一个人，而不是一个角色。所以 User 类只包含个人信息，例如姓名、生日、身高，可能还有电子邮件地址、登录密码等。将个人信息与时间跟踪角色分开。

要使用您的角色，您可以像以下伪代码那样建立模型关系：

```
 class Manager
   has_many :clients
 end

 manager = Manager.find(id)
 client = manager.clients.first 
```

或者像这个伪代码：

```
 class Assistant
   has_many :workshifts
 end

 assistant = Assistant.find(id)
 workshift = assistant.workshifts 
```

喜欢使用角色的其他充分理由是[基于角色的访问控制 (RBAC)](http://en.wikipedia.org/wiki/Role-based_access_control)和[数据上下文交互 (DCI)](http://www.artima.com/articles/dci_vision.html) ，如果您想了解这些。

# iphone - Objective-c 类初始化器执行多次

> ID：13521034
> 
> 赞同：0
> 
> 时间：2012-11-22T22:56:36.627
> 
> 标签：iphone, objective-c, ios, initializer

除非我误解了，否则 Apple 文档中的这个[**LINK**](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/clm/NSObject/initialize)明确指出类初始化程序“+ (void)initialize)”每个类只执行一次。

这是摘录：

> **特别注意事项**
> 
> initialize 每个类只调用一次。如果要对类和类的类别执行独立的初始化，则应实现加载方法。

但是，我的项目出现了一个奇怪的行为，并且初始化程序被执行了两次。所以我必须检查 _classContext 是否为空。我只有一个有这种方法的类。发生这种情况的可能原因是什么？

我正在使用 XCode 4.5.2 和 OS X 10.8.2。我有多个 iOS 模拟器，iPhone 5.1 和 6.0。

```
+ (void) initialize
{
    num++;
    NSLog([NSString stringWithFormat:@"Times: %i", num]);
    if(_classContext == nil)
        _classContext = [[myClass alloc] init];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:03:24.333

如果您有此类的子类，则会发生这种情况。`initialize`将为类和每个子类调用该方法。

编码该方法的正确`initialize`方法是：

```
+ (void)initialize {
    // Replace ThisClass with the actual class name
    if (self == [ThisClass class]) {
        // do initialization here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:32:04.083

+initialize 可以多次调用，并且在覆盖 +initialize 时应谨慎。

请阅读 bbum 的 weblog-o-mat 上的博文[+initialize Can Be Executed Multiple Times (+load not so much)](http://www.friday.com/bbum/2009/09/06/iniailize-can-be-executed-multiple-times-load-not-so-much/)。

# c# - 返回不同的数据类型 C#

> ID：13521040
> 
> 赞同：0
> 
> 时间：2012-11-22T22:57:25.020
> 
> 标签：c#, .net, object, return-type

我用许多不同的方法创建了一个类库（DLL）。并返回不同类型的数据（字符串字符串 [] 双双 []）。因此，我为包含不同数据类型的所有方法创建了一个名为 CustomDataType 的类，因此库中的每个方法都可以返回自定义类的对象，这样就能够返回多种数据类型，我已经这样做了：

```
public  class CustomDataType
{
    public double Value;
    public string Timestamp;
    public string Description;
    public string Unit;

   // special for GetparamterInfo
    public string OpcItemUrl;
    public string Source;
    public double Gain;
    public double Offset;
    public string ParameterName;
    public int ParameterID;

    public double[] arrayOfValue;
    public string[] arrayOfTimestamp;

    //
    public string[] arrayOfParameterName;
    public string[] arrayOfUnit;
    public string[] arrayOfDescription;
    public int[]    arrayOfParameterID;
    public string[] arrayOfItemUrl;
    public string[] arrayOfSource;
    public string[] arrayOfModBusRegister;
    public string[] arrayOfGain;
    public string[] arrayOfOffset; 
```

}

该库包含以下方法：

```
public CustomDataType GetDeviceParameters(string deviceName)
    {
        ......................
        code

      getDeviceParametersObj.arrayOfParameterName;  

      return getDeviceParametersObj;

    }

    public CustomDataType GetMaxMin(string parameterName, string period, string maxMin)
    {
        .....................................code

                        getMaxMingObj.Value             =   (double)reader["MaxMinValue"];
                        getMaxMingObj.Timestamp         =   reader["MeasurementDateTime"].ToString();
                        getMaxMingObj.Unit              =   reader["Unit"].ToString();
                        getMaxMingObj.Description       =   reader["Description"].ToString(); 

        return getMaxMingObj;
    }

    public CustomDataType GetSelectedMaxMinData(string[] parameterName, string period, string mode)
    {................................code

        selectedMaxMinObj.arrayOfValue          =   MaxMinvalueList.ToArray();
        selectedMaxMinObj.arrayOfTimestamp      =   MaxMintimeStampList.ToArray();
        selectedMaxMinObj.arrayOfDescription    =   MaxMindescriptionList.ToArray();
        selectedMaxMinObj.arrayOfUnit           =   MaxMinunitList.ToArray();
        return selectedMaxMinObj;

    } 
```

如图所示，不同的方法返回不同的数据类型，它对我来说很好，但是当我导入 DLL 并想要使用这些方法时，Visual Studio 会显示 CustomDataType 类中的所有数据类型作为所有方法的建议，即使返回不同数据。如下图所示。正如我们从图片中看到的，所有不同的返回数据的建议，用户可能会感到困惑并为某些方法选择错误的返回数据。所以我的问题是如何改进这一点。所以 Visual Studio 只建议每种方法的所属返回数据类型。

![在此处输入图像描述](../Images/2d12ba178a31903ab964b32caa43ca49.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T23:10:27.030

你采取了一种根本错误的方法。

将每个方法的返回类型设为包含相应数据的类型。一些方法可能有相同的返回类型；对于其他数据类型，可能只有一个返回该类型的方法。

在某些情况下，泛型可能会有所帮助 - 例如，如果您有不同的方法返回“最小值和最大值”，有时`long`，有时`int`，有时`float`或其他，那么您可以有一个`MinMax<T>`类型。

这应该给你提示：

> 并返回不同类型的数据

鉴于这些方法自然会“返回不同类型的数据”，你为什么要给它们全部*相同*的返回类型？

但是将所有内容都归入一种数据类型根本*不是*前进的方向。（它的效率也极低，但这是次要问题。）

下一步：摆脱那些公共字段，并改用属性。您应该考虑将某些类型设为不可变是否有意义，并且在您当前公开数组的地方，改为公开只读集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T23:11:42.737

如果您真的想使用您拥有的方法，我可能会建议使用动力学

```
public dynamic GetDeviceParameters(string deviceName)
    {
        ......................
        code

      getDeviceParametersObj.arrayOfParameterName;  

      return getDeviceParametersObj;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T23:10:37.857

你有点反对类型系统。我认为您的 CustomDataType 类会导致比它解决的问题更多的问题。

您应该为将要使用的每个组合创建类，或者使用`out`参数以便能够从方法返回多个值。

没有办法告诉 Visual Studio 根据返回的方法忽略某些属性。

# vb.net - 按降序对二维数组进行排序 vb.net

> ID：13521042
> 
> 赞同：0
> 
> 时间：2012-11-22T22:57:26.247
> 
> 标签：vb.net, sql-order-by

请你能帮我按第二列降序排序吗？

```
Dim ds As New DataSet()
conn.Open()

techSpeciality = LB_techFaultType.Text
techZone = LB_TechZone.Text

Dim strSQL As String = "SELECT Tech_ID, Last_Zone FROM Technician_List WHERE Availability=TRUE AND Speciality='" & techSpeciality & "' AND Last_Zone='" & techZone & "'"
Dim da As New OleDbDataAdapter(strSQL, conn)

da.Fill(ds)
'2D array
Dim values(ds.Tables(0).Rows.Count - 1, 2) As Integer

'for loop between 0 and all available technicians
For value As Integer = 0 To ds.Tables(0).Rows.Count - 1
'Tech_ID column
  values(value, 0) = ds.Tables(0).Rows(value).Item(0).value()
  'Zone column, converts negative value to a positive and minus' the selected techZone
  Math.Abs(values(value, 1) = techZone - ds.Tables(0).Rows(value).Item(1).value())
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:19:47.643

修改这一行：

```
Dim strSQL As String = "SELECT Tech_ID, Last_Zone" & _
                      " FROM Technician_List WHERE" & _
                      " Availability=TRUE AND Speciality='" & techSpeciality & _
                      "' AND Last_Zone='" & techZone & _
                      "' ORDER BY Last_Zone DESC" 
```

有关 ORDER BY 关键字的更多信息：http: [//www.w3schools.com/sql/sql_orderby.asp](http://www.w3schools.com/sql/sql_orderby.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:37:00.967

另一种选择是 do `ORDER BY 2 DESC`，而不是直接指定列名。

# regex - 正则表达式命令从所有文件中删除功能

> ID：13521046
> 
> 赞同：0
> 
> 时间：2012-11-22T22:57:36.413
> 
> 标签：regex, function, notepad++

我试图从我的所有工作文件中删除以下函数，同时保持第一个参数不变。第二个参数每次都会改变。

```
dotranslate( "Arg1", "Arg2" ) 
```

我正在尝试使用 Notepad++ 来做到这一点，但我似乎无法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:06:54.043

如果您的字符串可以包含转义引号，这将非常困难。如果没有，你可以这样做：

```
Find what: dotranslate\(\s*("[^"]*")\s*,\s*"[^"]*"\s*\)
Replace with: $1 
```

所以这将匹配`dotranslate(`，然后是可选空格，然后捕获一个字符串。字符串写为`"[^"]*"`。所以引用，尽可能多的非引用，然后再次引用。然后我们只匹配空格、逗号、空格、字符串、空格、右括号。

并将其替换为我们在第一组（也是唯一的）未转义括号中捕获的内容。这是第一个字符串。

如果`Args1`不应该是变量，只需将特定值写入捕获组。

# java - EJB / JSF java.lang.ClassNotFoundException: com.ericsantanna.jobFC.dao.DAOFactoryRemote from [Module "com.sun.jsf-impl:main" from local module loader

> ID：13521050
> 
> 赞同：1
> 
> 时间：2012-11-22T22:57:55.670
> 
> 标签：java, jsf-2, primefaces, dao, ejb-3.1

我是第一次使用 EJB 和 JSF，但我无法解决这个问题：

```
 20:23:12,457 Grave [javax.enterprise.resource.webcontainer.jsf.application] (http-localhost-127.0.0.1-8081-2) com.ericsantanna.jobFC.dao.DAOFactoryRemote from [Module "com.sun.jsf-impl:main" from local module loader @439db2b2 (roots: C:\jboss-as-7.1.1.Final\modules)]: java.lang.ClassNotFoundException: com.ericsantanna.jobFC.dao.DAOFactoryRemote from [Module "com.sun.jsf-impl:main" from local module loader @439db2b2 (roots: C:\jboss-as-7.1.1.Final\modules)] 
```

当我执行 selectOneMenu 或 commandButton click 之类的操作时，我得到了这个。

DAOFactory.class

```
@Singleton
@Remote(DAOFactoryRemote.class)
public class DAOFactory implements DAOFactoryRemote {

private static final long serialVersionUID = 6030538139815885895L;

@PersistenceContext
private EntityManager entityManager;

@EJB
private JobDAORemote jobDAORemote;

/**
 * Default constructor. 
 */
public DAOFactory() {
    // TODO Auto-generated constructor stub
}

@Override
public JobDAORemote getJobDAO() {
    JobDAO jobDAO = (JobDAO) jobDAORemote;
    jobDAO.setEntityManager(entityManager);

    return jobDAO;
} 
```

JobDAO.class

```
@Stateless
@Remote(JobDAORemote.class)
public class JobDAO implements JobDAORemote {

private static final long serialVersionUID = -5483992924812255349L;

private EntityManager entityManager;

/**
 * Default constructor. 
 */
public JobDAO() {
    // TODO Auto-generated constructor stub
}

@Override
public void insert(Job t) {
    entityManager.persist(t);
}

@Override
public Job findById(Class<Job> classe, Long id) {
    return entityManager.getReference(classe, id);
}

@Override
public Job findByName(Class<Job> clazz, String name) {
    return entityManager
            .createQuery("SELECT job FROM " + clazz.getName() + " job WHERE job.nome = :nome"
                , Job.class)
            .setParameter("name", name)
            .getSingleResult();
}
... 
```

TriggerFormBean.class

```
@ManagedBean
@ViewScoped
@Stateless
public class TriggerFormBean implements Serializable    {

private static final long serialVersionUID = -3293560384606586480L;

@EJB
private DAOFactoryRemote daoFactory;

@EJB
private TriggerManagerRemote triggerManagerRemote;
... 
```

triggerForm.xhtml（有问题的部分）

```
 </p:layoutUnit>
                            <p:layoutUnit id="eastConditionPanel" position="center" size="50%">
                                <p:panel header="Conditions to Release"  style="width:97%;height:97%;">
                                    <h:panelGrid columns="2" cellpadding="3">
                                        <h:outputLabel value="Condition Name:" for="conditionName" />
                                        <p:inputText id="conditionName" value="#{triggerFormBean.newCondition.name}" />
                                    </h:panelGrid>

                                    <p:commandButton value="Add Condition" update="conditionsToReleaseList" id="addConditionToRelease"  
                                        actionListener="#{triggerFormBean.addNewCondition}" />

                                    <p:orderList 
                                            id="conditionsToReleaseList" 
                                            value="#{triggerFormBean.trigger.conditionsToRelease}" 
                                            var="condition" 
                                            controlsLocation="none"  
                                            itemLabel="#{condition.name}" 
                                            itemValue="#{condition}" 
                                            iconOnly="true"
                                            style="width:97%;heigth:97%;"/>
                                  </p:panel>
                        </p:layoutUnit> 
```

在 TriggerFormBean.class 中，如果注释 daoFactory 我们得到与 triggerManagerRemote 相同的异常，两者都使用 @EJB 注释。

我不明白我的 DAOFactory 和“模块 com.sun.jsf-impl:main”之间的关系......

当我单击 commandButton 时发生异常，它仅从 inputText 获取文本，设置为 Condition 实例并添加到由 orderList 映射的 ArrayList。

设置：JBoss 7.1，Primefaces 3.4

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T09:15:38.577

我实际上也有同样的麻烦。奇怪地降级 JBoss 中的模块为我解决了这个问题：

```
<module xmlns="urn:jboss:module:1.1" name="javax.faces.api">
<dependencies>
    <module name="javax.el.api" export="true"/>
    <module name="javax.servlet.api" export="true"/>
    <module name="javax.servlet.jsp.api" export="true"/>
    <module name="javax.servlet.jstl.api" export="true"/>
    <module name="javax.validation.api" export="true"/>
</dependencies>

<resources>
    <resource-root path="jboss-jsf-api_2.1_spec-2.0.1.Final.jar"/>
    <!-- Insert resources here -->
</resources> 
```

代替 ：

```
<module xmlns="urn:jboss:module:1.1" name="javax.faces.api">
<dependencies>
    <module name="javax.el.api" export="true"/>
    <module name="javax.servlet.api" export="true"/>
    <module name="javax.servlet.jsp.api" export="true"/>
    <module name="javax.servlet.jstl.api" export="true"/>
    <module name="javax.validation.api" export="true"/>
</dependencies>

<resources>
    <resource-root path="jboss-jsf-api_2.1_spec-2.1.21.Final.jar"/>
    <!-- Insert resources here -->
</resources> 
```

不同之处在于使用的版本。我无法解释为什么。

希望这可以帮助

# java - 拖动JToolBar时如何保持Metal L&F

> ID：13521051
> 
> 赞同：1
> 
> 时间：2012-11-22T22:57:59.803
> 
> 标签：java, swing, look-and-feel, jtoolbar

在我们的应用程序中，我们使用金属 L&F。我们正在使用一个可浮动的 JToolBar；碰巧在执行拖动行为时，它会出现在 Windows L&F 中。

谁能告诉我在拖动 JToolBar 时如何保持 Metal L&F？

谢谢

PD 我们的 JToolBar 位于用户 BorderLayout 布局管理器的 JPanel 容器中。

也许我解释得不好我的问题。因此，我发布了一个取自 The Java Tutorials 的示例，让任何人了解我的应用程序会发生什么。

如果您执行以下代码，主 JFrame 将出现以海洋主题装饰；但是当我拖动 JToolBar 时，它的装饰不是海洋。我能做些什么？？。

提前谢谢了

```
package components;

/*
 * ToolBarDemo.java requires the following addditional files:
 * images/Back24.gif
 * images/Forward24.gif
 * images/Up24.gif
 */

 import java.awt.BorderLayout;
 import java.awt.Dimension;
 import java.awt.event.ActionEvent;
 import java.awt.event.ActionListener;
 import java.net.URL;
 import javax.swing.ImageIcon;
 import javax.swing.JButton;
 import javax.swing.JFrame;
 import javax.swing.JPanel;
 import javax.swing.JScrollPane;
 import javax.swing.JTextArea;
 import javax.swing.JToolBar;
 import javax.swing.SwingUtilities;
 import javax.swing.UIManager;
 import javax.swing.plaf.metal.MetalLookAndFeel;
 import javax.swing.plaf.metal.OceanTheme;

 public class ToolBarDemo extends JPanel
                          implements ActionListener {
         protected JTextArea textArea;
         protected String newline = "\n";
static final private String PREVIOUS = "previous";
static final private String UP = "up";
static final private String NEXT = "next";

public ToolBarDemo() {
    super(new BorderLayout());

    //Create the toolbar.
    JToolBar toolBar = new JToolBar("Still draggable");
    addButtons(toolBar);

    //Create the text area used for output.  Request
    //enough space for 5 rows and 30 columns.
    textArea = new JTextArea(5, 30);
    textArea.setEditable(false);
    JScrollPane scrollPane = new JScrollPane(textArea);

    //Lay out the main panel.
    setPreferredSize(new Dimension(450, 130));
    add(toolBar, BorderLayout.PAGE_START);
    add(scrollPane, BorderLayout.CENTER);
}

protected void addButtons(JToolBar toolBar) {
    JButton button = null;

    //first button
    button = makeNavigationButton("Back24", PREVIOUS,
                                  "Back to previous something-or-other",
                                  "Previous");
    toolBar.add(button);

    //second button
    button = makeNavigationButton("Up24", UP,
                                  "Up to something-or-other",
                                  "Up");
    toolBar.add(button);

    //third button
    button = makeNavigationButton("Forward24", NEXT,
                                  "Forward to something-or-other",
                                  "Next");
    toolBar.add(button);
}

protected JButton makeNavigationButton(String imageName,
                                       String actionCommand,
                                       String toolTipText,
                                       String altText) {
    //Look for the image.
    String imgLocation = "images/"
                         + imageName
                         + ".gif";
    URL imageURL = ToolBarDemo.class.getResource(imgLocation);

    //Create and initialize the button.
    JButton button = new JButton();
    button.setActionCommand(actionCommand);
    button.setToolTipText(toolTipText);
    button.addActionListener(this);

    if (imageURL != null) {                      //image found
        button.setIcon(new ImageIcon(imageURL, altText));
    } else {                                     //no image found
        button.setText(altText);
        System.err.println("Resource not found: "
                           + imgLocation);
    }

    return button;
}

public void actionPerformed(ActionEvent e) {
    String cmd = e.getActionCommand();
    String description = null;

    // Handle each button.
    if (PREVIOUS.equals(cmd)) { //first button clicked
        description = "taken you to the previous <something>.";
    } else if (UP.equals(cmd)) { // second button clicked
        description = "taken you up one level to <something>.";
    } else if (NEXT.equals(cmd)) { // third button clicked
        description = "taken you to the next <something>.";
    }

    displayResult("If this were a real app, it would have "
                    + description);
}

protected void displayResult(String actionDescription) {
    textArea.append(actionDescription + newline);
    textArea.setCaretPosition(textArea.getDocument().getLength());
}

/**
 * Create the GUI and show it.  For thread safety,
 * this method should be invoked from the
 * event dispatch thread.
 */
private static void createAndShowGUI() {
    //Create and set up the window.
    JFrame frame = new JFrame("ToolBarDemo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Add content to the window.
    frame.add(new ToolBarDemo());

    //Display the window.
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
    //Schedule a job for the event dispatch thread:
    //creating and showing this application's GUI.
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            setsLF();
        createAndShowGUI();
        }
    });
}

    /**
 *
 */
private static void setsLF() {
    try {
        UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());
        MetalLookAndFeel.setCurrentTheme(new OceanTheme());
        UIManager.setLookAndFeel(new MetalLookAndFeel());
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(ToolBarDemo.class.getName()).log (java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(ToolBarDemo.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(ToolBarDemo.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(ToolBarDemo.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    JFrame.setDefaultLookAndFeelDecorated(Boolean.TRUE);
    return;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:11:49.917

正如你所描述的，我做了一个小项目：

```
public class LafTest
{
    public static void main(String[] args)
    {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        frame.setSize(500, 500);

        JPanel panel = new JPanel(new BorderLayout());
        JToolBar toolbar = new JToolBar();

        toolbar.add(new JButton("button1"));
        toolbar.add(new JButton("button2"));

        panel.add(toolbar, BorderLayout.PAGE_START);

        frame.add(panel);

        frame.setVisible(true);
    }
} 
```

对我来说效果很好，JToolBar 一直都有 Metal-LAF​​。（操作系统：Windows 7 x64，java 版本“1.7.0_09”）

请将您的代码与此代码段进行比较。可能您在某处使用了 UIManager 类。如果您仍然无法解决此问题，您应该发布一些使用过的代码，也许还有一些关于您的操作系统和使用的 Java 版本的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:51:34.583

看起来现在工具栏的顶层容器是 JDialog 类型的，所以你也可以设置 lafDecoration ：

```
JFrame.setDefaultLookAndFeelDecorated(Boolean.TRUE);
JDialog.setDefaultLookAndFeelDecorated(true); 
```

适用于 jdk7 和 vista，未测试其他环境。

# java - 静态方法很慢

> ID：13521055
> 
> 赞同：6
> 
> 时间：2012-11-22T22:59:03.597
> 
> 标签：java, performance

我正在用java编写一个简单的游戏。我用 30 FPS 进行了碰撞测试，我必须得到窗口的大小。因为我无法访问 GUI 实例，所以我想我会创建一个共享实例，因为这在我来自的 Objective-C 中是相当标准的。

```
class GUI extends JFrame {
    private static GUI _sharedInstance;

    public static GUI sharedInstance() {
        if (_sharedInstance == null) {
            _sharedInstance = new GUI();
        }
        return _sharedInstance;
    }
} 
```

但由于某种原因，它真的很慢。然后我用大小的实例替换了共享实例`public static final`，它现在工作得很快，即使是 60 FPS 或更高。

谁能解释我为什么会这样？

**编辑**

所以`GUI.sharedInstance().getWidth()`我没有打电话，而是打电话`GUI.windowSize.width`。我已经使用了`public static final Dimension windowSize`。

**编辑**

这是碰撞检测。所以，`int width = GUI.kWindowWidth;`我`int width = GUI.sharedInstance().getWidth();`之前没有打电话，而是打电话。

```
// Appears on other side
if (kAppearsOnOtherSide) {
    int width = GUI.kWindowWidth;
    int height = GUI.kWindowHeight;

    // Slow
    // int width = GUI.sharedInstance().getWidth();
    // int width = GUI.sharedInstance().getHeight();

    Point p = this.getSnakeHead().getLocation();
    int headX = p.x;
    int headY = p.y;

    if (headX >= width) {
        this.getSnakeHead().setLocation(new Point(headX - width, headY));
    } else if (headX < 0) {
        this.getSnakeHead().setLocation(new Point(headX + width, headY));
    } else if (headY >= height) {
        this.getSnakeHead().setLocation(new Point(headX, headY - height));
    } else if (headY < 0) {
        this.getSnakeHead().setLocation(new Point(headX, headY + height));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T01:35:31.653

我知道这可能不是问题的真正答案，但竞争条件可能存在问题。我假设您正在尝试使用惰性/单例模式，因为 GUI 类的构建非常昂贵，并且您只需要一个实例。

现在，会发生什么？如果一个线程运行到`if`语句体中，它会创建一个新`GUI`实例。就在下一次分配之前，它被调度程序暂停。现在另一个线程弹出，看到它`_sharedInstance`仍然为空并创建另一个`GUI`实例（等等......）。

让我们假设只有两个线程。第一个线程运行到最后，第二个线程继续运行，现在您有了 GUI 类的两个实例。没有人说未分配的 GUI 实例被破坏或垃圾收集。这可以解释与使用 finally 并将 GUI 实例直接分配给`_sharedInstance`.

参见[http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)上的 Java 示例 双重检查锁定、内部类或枚举是您可以使用的方式。

# php - redirect to unique page

> ID：13521060
> 
> 赞同：0
> 
> 时间：2012-11-22T22:59:22.190
> 
> 标签：php

when I log in...i want to it to find my new $_SESSION variable and then reload into that page with all the selected data. But instead of [http://www.theqlick.com/findFriends/lesson.php?username=noahtheteacher](http://www.theqlick.com/findFriends/lesson.php?username=noahtheteacher)

I get this instead: [http://theqlick.com/findFriends/lesson.php?username=%3C?%20echo%20noahtheteacher;%20?%3E](http://theqlick.com/findFriends/lesson.php?username=%3C?%20echo%20noahtheteacher;%20?%3E)

Why is that? It isn't loading the correct page either...my code is below

The top of the page:

```
 $new_user = $_SESSION['user_login'];

        if (!isset($_SESSION["user_login"])) {
       echo "";
        }
      else
       {
     echo "<meta http-equiv=\"refresh\" content=\"0; url=lesson.php?username=<? echo $new_user; ?>\">";

         } 
```

The login actual html code:

```
 <h2>If your a teacher, login below ...</h2>
        <form action="lessons_login.php" method="post" name="form1" id="form1">
            <input type="text" size="40" name="user_login" id="user_login" class="auto-clear" title="Username ..." /><p />
            <input type="text" size="40" name="password_login" id="password_login" value="Password ..." /><p />
            <input type="submit" name="button" id="button" value="Login to your account">
        </form>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:07:46.563

正如@nelson 建议的那样，您在已经解析的行中有标签。因此，解释器不会将其解析为开始和结束标记，而是将其解析为要回显的字符。

我会进一步建议您使用双引号来打开和关闭您的行，然后在其中使用单引号，这样您就不必转义它们。然后，将 {} 放在变量周围以确保正确解析。

例如，

```
<?php
echo "<a href='www.example.com'>{$my_variable}</a>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:02:27.990

Replace your following line:

```
echo "<meta http-equiv=\"refresh\" content=\"0; url=lesson.php?username=<? echo $new_user; ?>\">"; 
```

for this one:

```
echo "<meta http-equiv=\"refresh\" content=\"0; url=lesson.php?username=$new_user\">"; 
```

As you don't need to use the `<? echo $new_user; ?>` syntax because that syntax is used to embedded php code inside html code, not in PHP itself as you were doing.

# css - CSS Multiple Background Positioning

> ID：13521061
> 
> 赞同：3
> 
> 时间：2012-11-22T22:59:29.540
> 
> 标签：css

I am currently working with the following code:

```
 body {
    background: url("image1") repeat fixed center top #000000;
    border: 0 none;
    color: #DBDBDB;
    font-family: Verdana;
    font-size: 9px;
    font-weight: normal;
    text-decoration: none;
  }

  inlineContent {
    background: url("image2") no-repeat scroll center top transparent !important;
    display: inline-block !important;
    height: 425px !important;
    left: -282px !important;
    margin: auto !important;
    position: absolute;
    right: 0 !important;
    top: -425px !important;
    width: 900px !important;
    z-index: -1 !important;
  } 
```

Where I have a general background (first line after body), and I have another image ontop of the background (lines after `inlineContent`). How would I be able to add another image, also ontop of the original background, with a different position than the the previous two images?

Thank you in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:06:36.710

你可以使用这种方式

```
inlineContent{
    background: url("image2") no-repeat scroll center top transparent !important, url("image3") no-repeat scroll right top transparent !important,;
    display: inline-block !important;
    height: 425px !important;
    left: -282px !important;
    margin: auto !important;
    position: absolute;
    right: 0 !important;
    top: -425px !important;
    width: 900px !important;
    z-index: -1 !important;
} 
```

您的问题也在这里得到解答：[我可以使用 CSS 制作多个背景图片吗？](https://stackoverflow.com/questions/423172/can-i-have-multiple-background-images-using-css)

这是一个很棒的教程，它是如何工作的：[http ://www.css3.info/preview/multiple-backgrounds/](http://www.css3.info/preview/multiple-backgrounds/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:39:16.820

您是否尝试过使用伪元素 :before 和 :after ？

例如：

```
inlineContent:before {
    content: "";
    position: ;
    top: ;
    left: ;
    z-index: ;
    display: inline-block;
    margin: ;
    width: ;
    height: ;
    background: url("image3") no-repeat scroll center top transparent;
} 
```

那里有很多好文章。[你可以从css-tricks.com](http://css-tricks.com/pseudo-element-roundup/)查看一篇文章，他描述了你可以用它们实现的所有很酷的东西。

**但更重要的问题是你为什么到处使用！important？**

# javascript - Jquery - 图片上传后查找元素

> ID：13521068
> 
> 赞同：0
> 
> 时间：2012-11-22T23:00:31.897
> 
> 标签：javascript, jquery

我正在使用[html5Uploader](http://www.igloolab.com/jquery-html5-uploader/)上传图片，一切正常。我感兴趣的部分如下：

上传图片后，新元素被添加到 DOM 中（为预览添加了**img**标签等）。创建此元素后，我需要能够附加点击事件。我该怎么做（检查此元素何时出现）？

**编辑：**

这是生成预览的代码：

```
$(function()
    {var fileTemplate="<div id=\"{{id}}\">";
    fileTemplate+="<div class=\"preview\"></div>";
    fileTemplate+="<div class=\"filename\">{{filename}}</div>";
    fileTemplate+="</div>";
    function slugify(text)
    {
        text=text.replace(/[^-a-zA-Z0-9,&\s]+/ig,'');
        text=text.replace(/-/gi,"_");text=text.replace(/\s/gi,"-");
        return text;
    }
$("#dropbox").html5Uploader({
    postUrl: "<?php echo base_url() ?>admin/image_upload",
onClientLoadStart:function(e,file)
    {var upload=$("#upload");
    if(upload.is(":hidden"))
        {upload.show();}
upload.append(fileTemplate.replace(/{{id}}/g,slugify(file.name)).replace(/{{filename}}/g,file.name));},
onClientLoad:function(e,file)
{$("#"+slugify(file.name)).find(".preview").append("<img class=img_upload title=\"" + file.name + "\" src=\""+e.target.result+"\" alt=\"\">");},
onServerLoad:function(e,file)
        {}
    }); 
```

这是我需要尝试附加**点击**事件的部分：

```
$('.preview').on('click', '.img_upload', function(){
var _val = textarea.val(),
img_src = '<img src="<?php echo IMG ?>vesti/' + $(this).attr('title') + '" />';
console.log(img_src);
textarea.val( _val + img_src );
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:14:28.573

您可以更改将图像附加到预览元素的代码

```
$("#" + slugify(file.name) ).find(".preview")
    .append( 
        $("<img class=img_upload title=\"" +
        file.name +
        "\" src=\"" + e.target.result + 
        "\" alt=\"\">").on("click", function( ) { // do stuff })
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:01:45.713

尝试检查元素何时出现有点愚蠢。某些东西正在使元素出现！然后附加处理程序，或者至少跟踪元素，以便以后附加任何内容。

您如何创建预览节点？

# java - 来自 Android 的 Http 连接

> ID：13521070
> 
> 赞同：1
> 
> 时间：2012-11-22T23:00:49.147
> 
> 标签：java, android, web-services, java-server

我正在尝试从 java android 程序连接到 http 网站。我正在尝试这段代码。但显然，代码没有通过“client.execute()”语句。我在执行后评论了一个返回语句，但它没有通过。我错过了什么吗？

我尝试了几乎相同的代码，但它没有用，所以我确实从 Newboston 复制了完全相同的代码，但它仍然不起作用。

（来自纽波士顿的代码。）

先感谢您。

```
public class GetMethodEx {

public String getInternetData() throws Exception{
    BufferedReader in=null;
    String data=null;

    try{
        HttpClient client=new DefaultHttpClient();
        URI website=new URI("http://www.mybringback.com");
        HttpGet request=new HttpGet();
        request.setURI(website);

        HttpResponse response=client.execute(request);

    //  if(data==null)
    //      return "bfdvhf";

        in =new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

        StringBuffer sb=new StringBuffer("");
        String l="";
        String nl=System.getProperty("line.separator");

        while((l=in.readLine())!=null){
            sb.append(l + nl);
            return "hfeuhfuie";

        }
        in.close();
        data=sb.toString();
        return data;
    }finally{
        if(in!=null)
        {
            try{
                in.close();
                return data;

            }
            catch(Exception e){
                e.printStackTrace();

            }

        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:15:47.773

您的应用程序是否崩溃/抛出异常`execute()`？如果是这样，您很可能会收到[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)异常 - 它与 UI 线程上的网络有关（即尝试直接在您的 Activity 类中进行网络连接）。您必须分离网络并异步运行此代码（通常使用`IntentService`or `AsyncTask`）。

有关更多信息，请参阅[本文](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)。

顺便说一句：下次总是用你的问题发布你的 logcat 输出

# opengl - 在 openGL 中渲染粒子的问题

> ID：13521071
> 
> 赞同：1
> 
> 时间：2012-11-22T23:00:50.290
> 
> 标签：opengl, glut

我开始使用 glut 在 OpenGL 中编写一个小粒子喷泉。我已经让粒子出现并在屏幕上反弹，就像我打算的那样。所以当我第一次运行程序时，我得到了这个

![在此处输入图像描述](../Images/d209c5df35c68c9581321aa57273170c.png)

并在大约 2 秒内更改为

![在此处输入图像描述](../Images/938f21f1c6d4f3f1acfc2e4245ea6c67.png)

我尝试弄乱代码以查看导致此问题的原因，但我无法解决它。

到目前为止，这就是我在程序中所拥有的

*   诠释主（）
*   init_particles() //初始化一切，在main中调用一次
*   无效激活_粒子（）；//激活粒子
*   void Adjust_particle() //设置粒子的速度和弹跳
*   void Render_particle() //渲染粒子，这个函数在DrawGLScene()函数中调用。

*   void idle()// 调用 Adjust_particles 和 Activate_particles 的空闲函数，后跟 glutPostRedisplay()

这是完整的代码：

```
// particle_fountain.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include<stdlib.h>
#include <stdio.h>
#include<Windows.h>
#include <time.h>
#include <GL\glut.h>
#include<GL\GLU.h>

#define MAX_PARTICLES 100
#define MAX_BOUNCE_COUNT 10
#define MAX_PARTICLE_AGE 50

//Colours
float R = 0.8f;
float G = 0.2f;
float B = 0.0f;
float cR = 0.001f;
float cG = 0.002f;
float cB = 0.003f;
float Size = 0.01f; //size for points
GLuint txParticle;
GLuint txPlane;

struct PARTICLE {
    float X,Y,Z; // Current position
    float sX,sY,sZ; // Current Speed/Movement
    float tX,tY,tZ; // Target Speed/Movement
    float R,B,G; // Particle Colour
    bool Active; // Is particle Active
    int Age; // Age of the particle
    int MaxAge; // Maximum Age before particle dies
    int BounceCount;
} Particles[MAX_PARTICLES];

void Init_Particles();
void Activate_Particles();
void Adjust_Particles();
void Render_Particles();
bool LoadBitmapTexture(char * FileName, GLuint &texid);
void idle();
void DrawGLscene();
void Reshape(GLsizei w, GLsizei h);

int main(int argc, char** argv){
    glutInit(&argc,argv);
    glutCreateWindow("Particle fountain");

    Init_Particles();
    glTranslatef(0.0f, -0.7f, 0.0f);
    glutDisplayFunc(Render_Particles);
    glutIdleFunc(idle);
    glutMainLoop();

}

void idle(){
    Activate_Particles();
    Adjust_Particles();
    glutPostRedisplay();
}

void Init_Particles(){

    int p;
    srand((int)time(NULL));
    for(p=0; p<MAX_PARTICLES; p++){
        Particles[p].Active = FALSE;
        Particles[p].tX = 0.0f;
        Particles[p].tY = -0.1f;
        Particles[p].tZ = 0.0f;
    }
}

void Activate_Particles(){
    int p;
    for(p=0; p<MAX_PARTICLES; p++){
        if(!Particles[p].Active){
            // Start the particle at 0,0,0 origin
            Particles[p].X = 0.0f;
            Particles[p].Y = 0.0f;
            Particles[p].Z = 0.0f;
            // The following lines set a random speed value
            Particles[p].sX = (((float)((rand() % 100) + 1)) /
                1000.0f) - 0.05f;
            Particles[p].sY = (((float)((rand() % 100) + 50)) /
                500.0f);
            Particles[p].sZ = (((float)((rand() % 100) + 1)) /
                1000.0f) - 0.05f;
            // We also activate the particle
            Particles[p].Active = true;
            // Set it's Age to zero
            Particles[p].Age = 0;
            // We also assign a max age to the particles
            Particles[p].MaxAge = MAX_PARTICLE_AGE;
            // We Also reset the bouncecount to zero
            Particles[p].BounceCount = 0;
            return;
        }
}
}

void Adjust_Particles(){
    int p;
    for(p=0; p<MAX_PARTICLES; p++){
        // We move the speed towards the target speed by 1/20 (5%)
        Particles[p].sX+= (Particles[p].tX - Particles[p].sX) / 20.0f;
        Particles[p].sY+= (Particles[p].tY - Particles[p].sY) / 20.0f;
        Particles[p].sZ+= (Particles[p].tZ - Particles[p].sZ) / 20.0f;
        // Then we adjust the position of
        // the particle by the new speed
        Particles[p].X+= Particles[p].sX;
        Particles[p].Y+= Particles[p].sY;
        Particles[p].Z+= Particles[p].sZ;
        // Now for the bounce code.
        if(Particles[p].Y < 0.0f){
            Particles[p].Y = 0.0f;
            Particles[p].sY = -Particles[p].sY;
            Particles[p].BounceCount++;
            if(Particles[p].BounceCount > MAX_BOUNCE_COUNT){
                Particles[p].Active = FALSE;
            }
        }
        // And finally the age check
        Particles[p].Age++;
        if(Particles[p].Age > Particles[p].MaxAge){
            Particles[p].Active = FALSE;
        }
    }

}

void Render_Particles(){
    int p;
    glBegin(GL_POINTS);
    for(p=0; p<MAX_PARTICLES; p++){
        if(Particles[p].Active){
            glColor4f(1.0f, 1.0f, 1.0f, 0.5f);
            glVertex3f(Particles[p].X,
                Particles[p].Y,
                Particles[p].Z);
        }
    }
    glEnd();
    glFlush();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:28:31.927

添加了 16ms 刷新和`glClear()`绘图前：

```
// g++ main.cpp -o main -lglut -lGL
#include <GL/glut.h>

#define MAX_PARTICLES 100
#define MAX_BOUNCE_COUNT 10
#define MAX_PARTICLE_AGE 50

struct PARTICLE 
{
    float X,Y,Z; // Current position
    float sX,sY,sZ; // Current Speed/Movement
    float tX,tY,tZ; // Target Speed/Movement
    float R,B,G; // Particle Colour
    bool Active; // Is particle Active
    int Age; // Age of the particle
    int MaxAge; // Maximum Age before particle dies
    int BounceCount;
} Particles[MAX_PARTICLES];

void Init_Particles()
{
    srand(0);
    for(unsigned int p=0; p<MAX_PARTICLES; p++)
    {
        Particles[p].Active = false;
        Particles[p].tX = 0.0f;
        Particles[p].tY = -0.1f;
        Particles[p].tZ = 0.0f;
    }
}

void Activate_Particles()
{
    for(unsigned int p=0; p<MAX_PARTICLES; p++)
    {
        if(!Particles[p].Active)
        {
            // Start the particle at 0,0,0 origin
            Particles[p].X = 0.0f;
            Particles[p].Y = 0.0f;
            Particles[p].Z = 0.0f;
            // The following lines set a random speed value
            Particles[p].sX = (((float)((rand() % 100) + 1)) / 1000.0f) - 0.05f;
            Particles[p].sY = (((float)((rand() % 100) + 50)) / 500.0f);
            Particles[p].sZ = (((float)((rand() % 100) + 1)) / 1000.0f) - 0.05f;
            // We also activate the particle
            Particles[p].Active = true;
            // Set it's Age to zero
            Particles[p].Age = 0;
            // We also assign a max age to the particles
            Particles[p].MaxAge = MAX_PARTICLE_AGE;
            // We Also reset the bouncecount to zero
            Particles[p].BounceCount = 0;
            return;
        }
    }
}

void Adjust_Particles()
{
    for(unsigned int p=0; p<MAX_PARTICLES; p++)
    {
        // We move the speed towards the target speed by 1/20 (5%)
        Particles[p].sX+= (Particles[p].tX - Particles[p].sX) / 20.0f;
        Particles[p].sY+= (Particles[p].tY - Particles[p].sY) / 20.0f;
        Particles[p].sZ+= (Particles[p].tZ - Particles[p].sZ) / 20.0f;
        // Then we adjust the position of
        // the particle by the new speed
        Particles[p].X+= Particles[p].sX;
        Particles[p].Y+= Particles[p].sY;
        Particles[p].Z+= Particles[p].sZ;
        // Now for the bounce code.
        if(Particles[p].Y < 0.0f)
        {
            Particles[p].Y = 0.0f;
            Particles[p].sY = -Particles[p].sY;
            Particles[p].BounceCount++;
            if(Particles[p].BounceCount > MAX_BOUNCE_COUNT)
            {
                Particles[p].Active = false;
            }
        }
        // And finally the age check
        Particles[p].Age++;
        if(Particles[p].Age > Particles[p].MaxAge)
        {
            Particles[p].Active = false;
        }
    }

}

void Render_Particles()
{
    Activate_Particles();
    Adjust_Particles();

    glClear( GL_COLOR_BUFFER_BIT );

    glBegin(GL_POINTS);
    for(unsigned int p=0; p<MAX_PARTICLES; p++)
    {
        if(Particles[p].Active)
        {
            glColor4f(1.0f, 1.0f, 1.0f, 0.5f);
            glVertex3f(Particles[p].X, Particles[p].Y, Particles[p].Z);
        }
    }
    glEnd();

    glutSwapBuffers();
}

void timer(int extra)
{
    glutPostRedisplay();
    glutTimerFunc(16, timer, 0);
}

int main(int argc, char** argv)
{
    glutInit(&argc,argv);
    glutInitDisplayMode( GLUT_RGBA| GLUT_DOUBLE );
    glutInitWindowSize( 640, 480 );    
    glutCreateWindow("Particle fountain");

    Init_Particles();
    glTranslatef(0.0f, -0.7f, 0.0f);
    glutDisplayFunc(Render_Particles);
    glutTimerFunc(0, timer, 0);
    glutMainLoop();
} 
```

# hibernate - 如何用 JPA 标准替换选择计数中的复合键

> ID：13521077
> 
> 赞同：1
> 
> 时间：2012-11-22T23:01:38.343
> 
> 标签：hibernate, jpa, jpa-2.0

在休眠[HHH-5419中发现了这个错误](https://hibernate.atlassian.net/browse/HHH-5419)

我需要了解如何用复合键（例如用星号）替换类型的根元素。

更新休眠，并使用 JPQL 不是答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T11:35:11.983

没关系。用它替换了复合键的查询：

```
 CriteriaBuilder qb = entityManager.getCriteriaBuilder();
    CriteriaQuery<Long> cq = qb.createQuery(Long.class);
    Root<T> root = cq.from(entityClass);
    if (root.getModel().getIdType() != null)
        cq.select(qb.count(root.get("someAnotherAttribute")));
    else
        cq.select(qb.count(root)); 
```

# javascript - D3 => NVD3.js 在同一页面上更新其他图表

> ID：13521080
> 
> 赞同：4
> 
> 时间：2012-11-22T23:01:50.997
> 
> 标签：javascript, d3.js, nvd3.js

[我想完成与NVD3 网站](http://NVD3.org)上相同的事情

当您单击一个图表时，其他图表会更新。

查看网站的 js，这就是神奇之处

```
chart.stacked.dispatch.on('areaClick.updateExamples', function(e) {
    setTimeout(function() {
      mainExample.update();
      exampleOne.update();
      //exampleTwo.update();
      exampleThree.update();
    }, 100);
  }) 
```

我不明白第一行中的“updatesExamples”是什么。它是一个函数，一个变量。我在代码的其他任何地方都找不到它。我已经将代码复制到我的应用程序中，但我相信这个词是让它工作的关键。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T23:51:24.000

`updatesExamples`是一个事件命名空间。你可以添加任何你想要的字符串。这是**d3.js的一个特性 在**[此处](https://github.com/mbostock/d3/wiki/Internals#wiki-d3_dispatch)查看文档。

多件事可以触发事件，并且对于代码组织，您可能想要命名事件。例如，在*NVD3中，如果您希望在单击***图例**时发生某些事情，您可以添加这样的事件处理程序

```
chart.legend.dispatch.on('legendClick.hi', function(e){
  console.log('legend was clicked', 'namespace:', 'hi');
}); 
```

这里，被监听的事件是`legendClick`，命名空间是`hi`。您可以添加另一个具有不同命名空间的处理程序，单击图例时也会触发该处理程序。

```
chart.legend.dispatch.on('legendClick.there', function(e){
  console.log('legend was clicked', 'namespace:', 'there');
}); 
```

命名空间是**可选**的，您可能只是将事件的名称传递给`on`方法。

```
chart.legend.dispatch.on('legendClick', function(e){
  console.log('legend was clicked', 'no namespace.');
}); 
```

您可以在此处的实时代码示例中使用它：http: [//nvd3.org/livecode/#codemirrorNav](http://nvd3.org/livecode/#codemirrorNav)

# javascript - loading source music files in jplayer with jquery

> ID：13521081
> 
> 赞同：0
> 
> 时间：2012-11-22T23:01:56.807
> 
> 标签：javascript, jquery, jplayer

i have this

```
<div class="sc_menu">
  <a href="#" m4v="/audio/01_Tribu.m4a" oga="/audio/01_Tribu.ogg" mp3="/audio/01_Tribu.mp3"><img src="/artistes/jean-luc_gergonne/jlgergonne_thumb.jpg" alt="/artistes/jean-luc_gergonne/jlgergonne.jpg"></a>
  <a href="#" m4v="/artistes/diez/diez_demo.m4a" oga="/artistes/diez/diez_demo.ogg" mp3="/artistes/diez/diez_demo.mp3"><img src="/artistes/diez/diez_130x195.jpeg" alt="/artistes/diez/diez.jpeg"></a>
</div> 
```

then on the same page, i have:

```
<div class="zen">
  <span class="player"></span>
  <span class="circle"></span>
  <span class="progress"></span>
  <span class="buffer"></span>
  <span class="drag"></span>
  <div class="button">
     <span class="icon play"></span>
     <span class="icon pause"></span>
  </div>
</div> 
```

part of my javascript is as follows:

```
 this.sliderMenu = function() {

    //and loads the jPlayer with the sound files for the Artist
    $list.find('.sc_menu img').bind('click',function(){
      var $this = $(this);
      var music;
        title = $this.text();
        mp = $this.attr("mp3");
        oga = $this.attr("oga");
        m4a = $this.attr("m4a");
        m4v = $this.attr("m4v");
        ogv = $this.attr("ogv");
        webmv = $this.attr("webmv");
        poster = $this.attr("poster");
        music = {
          title: title,
          mp: mp,
          oga: oga,
        }
        console.log(music);
        self.tsunamiPlayer(music);

      //clicking on a thumb, replaces the large image
      $('<img class="st_preview"/>').load(function(){
        var $this = $(this);

        var $currImage = $('#st_main').children('img:first');
        $this.insertBefore($currImage);

  // jPlayer
  this.tsunamiPlayer = function(music) {
    ///init screen
    var player = $(".zen .player");
    var no_of_tracks = $(".sc_menu a").length;
    player.jPlayer({
      ready: function () {
        $(this).jPlayer("setMedia", {
          m4a: m4a,
          mp3: mp,
          oga: oga
        });
      },
      swfPath: "/js/jplayer/Jplayer.swf",
      supplied: "m4a, mp3, oga"         
    }); 
```

when i click on the 'a' link img, i want to load the attributes into the jPlayer instance, but i only get an undefined when i console.log(music)

what is the correct way to do this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:15:11.513

`$(this)`处理程序中的变量引用元素，而您`img`的代码假装它是`a`元素，因此要修复它，请替换以下行：

```
$list.find('.sc_menu img').bind('click',function(){ 
```

对于这个：

```
$list.find('.sc_menu a').bind('click',function(e){
    e.preventDefault(); 
```

# flash - Where is flash's Secret Buffer, and can I kill it?

> ID：13521082
> 
> 赞同：0
> 
> 时间：2012-11-22T23:02:05.377
> 
> 标签：flash, buffer, live-streaming, netstream

Perhaps a more accurate and less catchy title would be: **Why does my live stream gain delay when the browser window is hidden, and how do I prevent/undo it?**

I'm sending a live stream (packaged as an FLV file) to a flash player via a NetStream, and when the browser window is hidden/minimized, a delay begins to accumulate such that the player is always some number of seconds behind what's happening live. I wish to prevent or otherwise get rid of this delay.

My issue is very similar to [this one](https://stackoverflow.com/questions/9266358/cancel-a-live-stream-fast-motion-catch-up-in-flash), with the exception that the "catch-up feature" isn't taking place in my stream.

What's confusing/frustrating about this is that there should be no room for all those seconds of buffered video. I believe I set all the NetStream variables appropriately:

```
 stream.backBufferTime = 0;
     stream.bufferTime = 0;
     stream.bufferTimeMax = 0;
     stream.maxPauseBufferTime = 0;
     stream.inBufferSeek = false; 
```

And yet still, all that video is getting buffered somewhere. It would be helpful to know where this buffer is and if there's a way to nuke it (or even to ask it politely to clear itself and stream from the most recent frame).

Currently, I try to work around the problem by doing a `NetStream.seek(10000000000)` call every five seconds--seeking way into the future, so that the stream just grabs the farthest forward keyframe and starts playing from there. This works well on Firefox and IE, but has no effect and does not neutralize the delay in Chrome. I have tried doing logarithmically increasing `seek()`s from the current position, keeping the value within the range of what's buffered, but this creates unacceptable 3-second hiccups in the playback.

Any information or suggested solutions would be appreciated. :)

# sql-server - How to generate scripts to recreate table using SQL Server Management Studio [Schema and data]?

> ID：13521085
> 
> 赞同：55
> 
> 时间：2012-11-22T23:02:19.997
> 
> 标签：sql-server, ssms, sql-server-2008

I have a table in a local SQL server database. I want to recreate this table in a hosted database.

What I want to do is to have a script that when run against the hosted database, this table is recreated with all the data, etc.

How do I create this script using SQL Server Management Studio? Thanks.

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-11-22T23:08:25.877

1- 打开 SQL 服务器管理工​​作室。

2-右键单击包含所需表的数据库。

3- 选择“任务 => 生成脚本...”。

4- 按照向导，选择要为其生成脚本的对象（表、视图、存储过程等...）。

5- 从下一步开始，单击“**高级**”，对于标记为“脚本数据类型”的节点，选择“**架构和数据**”。

![在此处输入图像描述](../Images/683da63fb21b48f4e2d7c901f73a6667.png)

6-保存您的脚本并微笑:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-12T14:33:53.473

```
select  'create table [' + so.name + '] (' + o.list + ')' + CASE WHEN tc.Constraint_Name IS NULL THEN '' ELSE 'ALTER TABLE ' + so.Name + ' ADD CONSTRAINT ' + tc.Constraint_Name  + ' PRIMARY KEY ' + ' (' + LEFT(j.List, Len(j.List)-1) + ')' END
from    sysobjects so
cross apply
    (SELECT 
        '  ['+column_name+'] ' + 
        data_type + case data_type
            when 'sql_variant' then ''
            when 'text' then ''
            when 'ntext' then ''
            when 'xml' then ''
            when 'decimal' then '(' + cast(numeric_precision as varchar) + ', ' + cast(numeric_scale as varchar) + ')'
            else coalesce('('+case when character_maximum_length = -1 then 'MAX' else cast(character_maximum_length as varchar) end +')','') end + ' ' +
        case when exists ( 
        select id from syscolumns
        where object_name(id)=so.name
        and name=column_name
        and columnproperty(id,name,'IsIdentity') = 1 
        ) then
        'IDENTITY(' + 
        cast(ident_seed(so.name) as varchar) + ',' + 
        cast(ident_incr(so.name) as varchar) + ')'
        else ''
        end + ' ' +
         (case when IS_NULLABLE = 'No' then 'NOT ' else '' end ) + 'NULL ' + 
          case when information_schema.columns.COLUMN_DEFAULT IS NOT NULL THEN 'DEFAULT '+ information_schema.columns.COLUMN_DEFAULT ELSE '' END + ', ' 

     from information_schema.columns where table_name = so.name
     order by ordinal_position
    FOR XML PATH('')) o (list)
left join
    information_schema.table_constraints tc
on  tc.Table_name       = so.Name
AND tc.Constraint_Type  = 'PRIMARY KEY'
cross apply
    (select '[' + Column_Name + '], '
     FROM   information_schema.key_column_usage kcu
     WHERE  kcu.Constraint_Name = tc.Constraint_Name
     ORDER BY
        ORDINAL_POSITION
     FOR XML PATH('')) j (list)
where   xtype = 'U'
AND name    NOT IN ('dtproperties') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T23:14:37.210

您可以使用生成脚本数据库任务来执行此操作。右键单击数据库 > 任务 > 生成脚本...选择“选择特定数据库对象”和所需的表。

在设置脚本选项页面上，单击高级。有一个选项“脚本的数据类型”，选择“架构和数据”。选择保存位置。下一个。下一个。结束。

这就是答案，但是，如果表包含大量数据，我建议使用 bcp out 或其他方法来导出数据。如果新服务器在同一网络上，您也可以选择它作为链接服务器。

该脚本方法将生成单独的插入语句。

# c - Segmentation Fault, Incrementing the values in pointers

> ID：13521087
> 
> 赞同：0
> 
> 时间：2012-11-22T23:02:35.707
> 
> 标签：c, pointers, segmentation-fault, fault

What am I missing? If I want to increment a counter in a separate function, why does it give me a segmentation fault?

```
int point(int *cow);

int main()
{
    int *cow = 0;
    point(cow);
    return(0);

}

int point(int *cow) {
    (*cow)++;
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T23:03:14.600

Dereferencing a null pointer is undefined behavior in C.

Maybe you wanted to do this instead:

```
int a = 0;
int *cow = &a;

point(cow); 
```

Note that the temporary pointer `cow` is not necessary and you can directly pass `&a` to `point` function.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T23:05:53.353

这样做的好方法如下：

```
void point (int *cow);

int main () {
    int cow = 0; // Create a simple int, not a pointer
    point (&cow); // Pass address (&) of your int
    return 0;
}

void point (int *cow) {
    (*cow)++;
} 
```

您不需要在 main 中有一个指针，只需将指针传递给您的增量函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T23:05:54.257

您正在尝试取消引用空指针，这肯定会使您的程序崩溃。您可能打算这样做：

```
int point(int *cow);

int main()
{
    int cow = 0;
    point(&cow);
    return(0);

}

int point(int *cow) {
    (*cow)++;
    return(0);
} 
```

在您的原始代码中，您创建了一个指向 int 的指针（即：int* cow），但您实际上从未创建一个 int 来存储您尝试递增的值。以下也是一个有效示例，它将我上面的代码更改与您的原始代码相结合：

```
int point(int *cow);

int main()
{
    int cow = 0;
    int* pCow = &cow;
    point(pCow);
    return(0);

}

int point(int *cow) {
    (*cow)++;
    return(0);
} 
```

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T23:06:54.600

```
int *cow = 0; 
```

将“cow”声明为指向整数的指针，然后将该指针赋值为零。然后将它传递给 point() ，它试图取消引用“0”，然后增加存储在该内存位置的任何值。

试试这个：

```
int x = 0;
int *cow = &x;
point(cow); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T23:09:08.370

（来自 wiki 的定义）分段错误（通常缩写为 segfault）、总线错误或访问冲突通常是尝试访问 CPU 无法物理寻址的内存。

`int *cow = 0;`

当程序试图访问上面指出的内存时，您会收到分段错误，因为它不是有效的地址。

# orm - Coldfusion ORM: Self join

> ID：13521089
> 
> 赞同：2
> 
> 时间：2012-11-22T23:02:47.063
> 
> 标签：orm, coldfusion, one-to-many, coldfusion-9, self-join

I'm trying to join my pages cfc to itself to show child pages:

```
<cfproperty
    name="children"
    fieldtype="one-to-many"
    cfc="page"
    linktable="ParentAndChild"
    fkcolumn="parent"
    inversejoinColumn="child"
    mappedby="pageId"
    ormtype="string"
    lazy="true"
    missingRowIgnored="true"
> 
```

I am getting the following error:

> could not retrieve collection size: [children#dev-home]

its mappedby pageid because the id column isn't used in parentandchild, its using its human readable id.

'dev-home' is the parents pageid.

The parentandchild table has two columns: 'parent' and 'child', these hold the page id's

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T19:27:35.690

我不确定你的错误。但我使用映射进行自联接，它工作正常。这些映射在 Page.cfc 中定义：

```
property
    name="Parent"
    fieldtype="many-to-one"
    cfc="Page"
    fkcolumn="fkpages"
;
property
    name="Children"
    fieldtype="one-to-many"
    cfc="Page"
    fkcolumn="fkpages"
    type="array"
    inverse="true"
    orderby="norder"
; 
```

这是数据模型。复选框的意思是：允许为空。

![在此处输入图像描述](../Images/129df7033000c081dbbe0f858c6925bf.png)

# mysql - How to use cfqueryparam and NOT NULL

> ID：13521090
> 
> 赞同：0
> 
> 时间：2012-11-22T23:03:03.367
> 
> 标签：mysql, coldfusion, notnull, cfqueryparam

I have 2 queries and I want to use the `<cfqueryparam>` tag on it but am not sure how to do it for this query:

```
 <cfif isdefined("FORM.chk3g")>
        ThreeG IS NOT NULL AND
    </cfif>

    <cfif isdefined("FORM.chkpolyphonic")>
        ringtonetype like '%polyphonic%' AND
    </cfif> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-29T23:00:31.297

尝试这样的事情

```
<cfif isdefined("FORM.chk3g")>
    ThreeG IS NOT NULL AND
</cfif>

<cfif isdefined("FORM.chkpolyphonic")>
    ringtonetype like <cfqueryparam cfsqltype="CF_SQL_VARCHAR" value="%polyphonic%"> AND
</cfif> 
```

# php - 具有不同访问级别的 PHP / Codeigniter 登录系统

> ID：13521095
> 
> 赞同：0
> 
> 时间：2012-11-22T23:03:24.473
> 
> 标签：php, security, codeigniter, session, login

我已经为一家使用非现场贝宝购物篮销售服装和珠宝的公司创建了一个网站。它有一个非常基本的定制 cms，目前只允许网站所有者自己登录。登录后，他可以添加/删除/编辑产品，并在网站首页管理基本的新闻提要。

我现在想扩展站点以允许非管理员用户注册，并让他们能够做一些事情，比如在新闻提要上发表评论，也能够在论坛上发帖等，但不希望他们可以访问管理员可以执行的操作。

我最初的想法是使用以下内容：

```
public function validate_user()
{
    $username = trim($this->input->post('username'));
    $password = trim($this->input->post('password'));
    $password_md5 = md5($password);

    //query database searching for user
    $this->db->where('username', $username);
    $query = $this->db->get('users');

    //if user found in database, set session info
    if ($query->num_rows() == 1) {
        $result = $query->row();
        $output['username'] = TRUE;

        //check if password correct
        if ($result->password == $password_md5) {
            $output['password'] = TRUE;
            if ($result->admin) {
                $admin = TRUE;
            } else {
                $admin = FALSE;
            }

            //set session data for user including validated status
            $data = array(
                'id' => $result->id,
                'username' => $result->username,
                'fname' => $result->fname,
                'lname' => $result->lname,
                'admin' => $admin,
                'validated' => TRUE
            );
            $this->session->set_userdata($data);
        } else {
            $output['password'] = FALSE;
        }
    } else {
        $output['username'] = FALSE;
    }
    return $output;
} 
```

我意识到，出于安全原因，在会话数据中存储布尔管理员状态值可能是一个坏主意，并且可能被利用。我将不胜感激有关我是否朝着正确的方向前进的一些建议，以及有关如何完成像我上面描述的那样的系统的任何建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:45:50.147

*   首先使用 codeigniter 表单验证 - 在发送到数据库之前确保您有正确的数据
*   我认为值得将检查用户名分解为自己的方法。如果返回 true，则调用检查密码等。这也将使其在以后更加灵活。
*   试着养成 XSS 清理表单输出的习惯，在字段名后面加上 TRUE

    ```
    $username = trim($this->input->post('username', TRUE)); 
    ```

*   当您想要通过电子邮件重置密码等操作时，请查看 Ion Auth [https://github.com/benedmunds/CodeIgniter-Ion-Auth](https://github.com/benedmunds/CodeIgniter-Ion-Auth)

# iphone - 从 url 加载图像到 uiimageview 使 iphone 应用程序性能变慢

> ID：13521097
> 
> 赞同：0
> 
> 时间：2012-11-22T23:03:40.717
> 
> 标签：iphone, objective-c, uiimageview

我正在为 iphone 开发一个 rss 提要应用程序，因为我有一个表格视图，当用户单击标题时，所有提要标题都将显示，详细视图将显示标题、描述和图像，但由于应用程序需要时间加载，因此面临性能问题因为图像`UIImageView`来自下面的图像 url，所以图像是我的代码。

```
NSURL *url = [NSURL URLWithString:imageURL];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImageView *subview = [[UIImageView alloc] initWithFrame:CGRectMake(110,10,100,80)];
[subview setImage:[UIImage imageWithData:data]]; 
[cell addSubview:subview];
[subview release]; 
```

在此代码中，imageurl 来自 rss 并处理`UIImageView`以显示图像。如果我删除此特定代码，则性能很好，因为所有数据都是文本。

那么如何从 url 获取图像并显示以`UIImageView`非常快速地控制而不损失性能或显示活动指示器，直到图像完全单独加载。请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T23:08:45.147

永远不要在主线程上执行网络调用。Apple 为此提供了一个有用的示例应用程序。`LazyTableImages`有关在后台加载图像的正确方法，请参阅示例应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T12:20:01.907

看看[这里](https://stackoverflow.com/a/19115912/2515572)

```
[DLImageLoader loadImageFromURL:imageURL
                          completed:^(NSError *error, NSData *imgData) {
                              imageView.image = [UIImage imageWithData:imgData];
                              [imageView setContentMode:UIViewContentModeCenter];

                          }]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T03:35:36.130

嗨，您还可以使用第三方类来解决您的问题，称为[AsyncImageView](https://github.com/nicklockwood/AsyncImageView)

或者您可以创建自己的类，该类具有[下载图像的NSURLConnectionDelegate](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html)

当由于同步 url 请求而导致 UI 锁定时，这些解决方案也可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T04:50:38.453

你可以试试这个

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0), ^(void) {
    [self loadImage];
});

-(void) loadImage
{
    NSURL *url = [NSURL URLWithString:imageURL];
    NSData *data = [NSData dataWithContentsOfURL:url];
    UIImageView *subview = [[UIImageView alloc] initWithFrame:CGRectMake(110,10,100,80)];
    [subview setImage:[UIImage imageWithData:data]];
    [cell addSubview:subview];
    [subview release];

} 
```

谢谢

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-19T11:45:45.633

你可以试试这个

```
//in .h file

 IBOutlet UIImageView *imgTest;

-(IBAction)buttonTapped:(id)sender;
-(void)LoadImage:(NSString *) irlString;
-(void)setImage:(NSData *) imgData;

//in .m file write the following code:

-(IBAction)buttonTapped:(id)sender
{
    [self performSelectorOnMainThread:@selector(LoadImage:) withObject:@"http://www.google.com/images/errors/logo_sm.gif" waitUntilDone:NO];
}

-(void)LoadImage:(NSString *) urlString
{
    NSURL *imgURL=[NSURL URLWithString:urlString];
    NSData *imgData=[NSData dataWithContentsOfURL:imgURL];
    [self performSelectorInBackground:@selector(setImage:) withObject:imgData];
}

-(void)setImage:(NSData *) imgData;
{
    imgTest.image=[UIImage imageWithData:imgData];
} 
```

希望这会帮助你。

# zend-framework - 主页的 Zend_Navigation 层次结构问题

> ID：13521098
> 
> 赞同：0
> 
> 时间：2012-11-22T23:03:46.860
> 
> 标签：zend-framework, zend-navigation

我正在使用 Zend_Navigation 构建菜单和面包屑，但`home`页面层次结构存在小问题。这是一个带有 XML 文件的 Zend_Navigation 的基本示例。

```
<config>
    <nav>
        <home>
            <label>Home</label>
            <controller>index</controller>
            <action>index</action>
        </home>

        <about>
            <label>About</label>
            <controller>about</controller>
            <action>index</action>
        </about>

        <contact>
            <label>Contact</label>
            <controller>contact</controller>
            <action>index</action>
        </contact>
    </nav>
</config> 
```

在菜单中，`about`and`contact`页面应与页面处于同一级别`home`（如下图所示）。这可以按预期工作，因为所有这些页面在导航 XML 文件中都处于同一级别。

```
<ul>
    <li>Home</li>
    <li>About</li>
    <li>Contact</li>
</ul> 
```

然而，在面包屑中，`about`and`contact`页面应该嵌套在`home`页面中。这意味着应该在`about`页面上显示以下面包屑：

```
Home > About 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:11:05.603

你做错了。面包屑显示导航的层次结构，因此如果您在“主页”页面下没有“关于”和“联系方式”，则无法使用面包屑以这种方式显示。

您可以构建为菜单和面包屑导航树分开导航树，或者使用面包屑视图修改的肮脏解决方法。

# node.js - 在 Node.js 中创建参数化“组件”的最佳方法是什么？

> ID：13521099
> 
> 赞同：1
> 
> 时间：2012-11-22T23:04:11.340
> 
> 标签：node.js, express

## 最初的问题

我的问题很容易被误解，所以我会举一个例子，或者更好的是，我会做一个比较。

考虑 ASP.NET Web 应用程序。在那里可以定义`ascx`组件。这些组件非常好，因为它们定义了具有一些更智能功能的可重用代码片段，这使得它们不仅仅是简单的代码片段……而是 Web 应用程序的参数化部分。

我的问题是，当然考虑到 Node.js 不是 ASP.NET：在 Node.js 中定义可重用组件（参数化）的最相似的解决方案是什么？

谢谢

### 对于那些不熟悉 ASP.NET

我知道并不是每个人都熟悉 ASP.NET。所以我将在这里详细说明我需要的东西。将参数传递给 html 或 jame 代码段是我可以在 Node.js 中做的事情，但我想做的是将我的 jam/html 代码写入文件（它包含一些 div 和其他内容），然后参考它在另一个jade/html文档中或在其中传递的一个参数中。

## 新修订的问题

当我被告知使用 mixins 来解决这个问题时，我开始寻找它们并尝试了一些，没关系，我设法完成了最简单的 mixins，但是当我不得不让事情变得更复杂时，mixins 开始了行为怪异。所以现在我想知道它们是否是我一直在寻找的解决方案。所以现在我将详细解释我想要实现的目标（因为我太笼统了）。

我有一个使用编写的网页`Jade`，我需要创建一个可以在整个页面中重用的组件。该组件只是一个包含文章的结构化 div。如果我用伪代码编写这个组件，它在`Jade`ish 语法中可能看起来像这样：

```
component article(@title, @subtitle, @articlebody, @writtenon)
.article
  .head {@title}
  .head {@subtitle}
  div(style='float:left;clear:both')
    .body
      {@articlecontent}
    .foot
      {@writtenon} 
```

因此，如您所见，我希望对这组代码进行参数化，以便可以在我的页面中像这样重用它：

```
doctype 5
html
  head
    title = title
  body
    .article('my first art', 'dummy subtitle', 'bla bla bla... lorem ipsum', '12/12/2012')
    .article('my second art', 'dummy subtitle', 'bla bla bla... lorem ipsum', '12/12/2012') 
```

等等...

还要考虑参数可能是长值。在我的示例中，其中一个参数是文章的正文。我需要在那里插入正文的html代码

我在网上搜索以了解如何执行此操作，但找不到任何教程或有效示例。

你能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T09:53:09.723

我对`ascx`文件不熟悉，所以我不知道这是否是您的想法，但是已经为 node.js 编写了不同的模板引擎，允许重用前端模板（类似 html 的文件）。例如，[Jade](http://jade-lang.com/)引擎中的[mixin](http://jade-lang.com/reference/#mixins)允许您将参数传递给模板。

# dotnetopenauth - 使用 DotNetOpenAuth AuthorizedTokenResponse 发送用户名

> ID：13521110
> 
> 赞同：2
> 
> 时间：2012-11-22T23:05:12.820
> 
> 标签：dotnetopenauth

我一直在关注 DotNetOpenAuth 库中的 Oauth Provider 示例。到目前为止一切都很好，已经在两个不同的站点中实现了消费者和提供者。

不过，我被困在一点点上。我想返回通常存在于 HttpContext.Current.User.Identity.Name 中的用户名以及 AuthorizedTokenResponse 的额外数据。（这类似于 twitter 在他们的 OAuth 响应中添加“screen_name”的方式）

```
else if ((requestAccessToken = request as AuthorizedTokenRequest) != null)
        {
            string userName = context.User.Identity.Name; // how do you tie this to the logged on user? I am soooo stupid.

            AuthorizedTokenResponse response = _oAuthServiceProvider.PrepareAccessTokenMessage(requestAccessToken);
            response.ExtraData.Add("screen_name", userName); 
            _oAuthServiceProvider.Channel.Send(response);
        } 
```

所以在这种情况下 HttpContext.Current.User.Identity.Name 在 HttpHandler 中为空。（我基本上已经从 dotnetopenAuth OAuth 示例中改编了 HTTPHandler。）

所以我不确定我是否在这里失去了情节，但我不知道如何获得经过身份验证的用户名。如果有帮助，那么用户肯定是以前登录过的，并且用户是在 TokenManager 的 AuthorizeRequestToken 方法中设置的（我的在内存中）。

那么，在我发回 AuthorizedTokenResponse 之前，有什么方法可以使用存储在 AuthorizeRequestToken 方法中的 DotNetOpenAuth 获取用户名？

# java - Axis2 Codegen 工具 - java.lang.reflect.invocationTargetException

> ID：13521111
> 
> 赞同：1
> 
> 时间：2012-11-22T23:05:13.293
> 
> 标签：java, eclipse, exception, wsdl, axis2

我`reflect.invocationTargetException`开始使用 Eclipse Juno，并尝试了不同的 Axis2 Codegen Tool 版本 - 1.6.2、1.6.3-SNAPSHOT、1.6.0。

我使用的 WSDL 文件可以在这里下载：http: [//soap.direct.yandex.ru/wsdl/v4/](http://soap.direct.yandex.ru/wsdl/v4/)

也许这是这种网络服务描述文件格式的问题。

请帮我解决这个问题！

# java - 带有来自mysql的数据的Android TextView？

> ID：13521116
> 
> 赞同：0
> 
> 时间：2012-11-22T23:06:06.253
> 
> 标签：java, php, mysql, json

.HttpClient 通过指定我的 PHP 文件的路径来发送命令来查询它似乎有效。将接收到的流转换为字符串也可以工作但最后不起作用......我不明白出了什么问题

我在一个纯Java项目中尝试同样的事情，导入所有需要json-lib等的包。它会转换数据，但在最后一步它失败了？！

服务器端：

```
<?php
    $Conn = mysql_connect("127.0.0.1","root","socrates");
    if (!$Conn)
        echo "not connected";
    $DbSelect = mysql_select_db("impetodb", $Conn);
    if (!$DbSelect)
    echo "db non connecté";
    $sql=mysql_query("select * from patients_infos ");

    while ($row=mysql_fetch_assoc($sql)) $output[]=$row;
    print (json_encode($output));

 mysql_close();

?> 
```

ANDROID App端：

```
package com.example.getdata3;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONObject;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.widget.TextView;

public class ConnexionSQLActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
   try 
   {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_connexion_sql);
       TextView myTextView = (TextView)findViewById(R.id.patientName);
       String result = "";

    try {

        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://10.0.2.2/index.php");
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        InputStream is = entity.getContent();

        try
          {
           BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"));
           StringBuilder sb  = new StringBuilder();
           String line = null;

           while ((line = reader.readLine()) != null){

               sb.append(line + "\n");
           }

           is.close();

           result = sb.toString();

          }catch (Exception e){
              Log.e("log_tag","Error converting result"+e.toString());
          }

    }catch (Exception e){
        Log.e("log_tag","Error in Http Connexion"+e.toString());
    }    

    try {
            JSONArray jArray = new JSONArray(result);

             for(int i=0; i<jArray.length(); i++)
             {
               JSONObject json_data = jArray.getJSONObject(i);
               myTextView.setText(json_data.getString("nom"));
               //r.add(json_data.getString("categorie"));   
               }

    } catch (Exception e) {
        Log.e("log_tag","Error parsing data"+e.toString());
    }

    }catch (Exception e){

    Log.e("ERROR","ERROR IN CODE"+e.toString());

   }    

}

} 
```

日志猫 >>>

```
 11-23 12:53:51.325: W/System.err(551): android.os.NetworkOnMainThreadException
11-23 12:53:51.335: W/System.err(551):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1084)
11-23 12:53:51.335: W/System.err(551):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:74)
11-23 12:53:51.335: W/System.err(551):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
11-23 12:53:51.335: W/System.err(551):  at libcore.io.IoBridge.connect(IoBridge.java:112)
11-23 12:53:51.335: W/System.err(551):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
11-23 12:53:51.335: W/System.err(551):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
11-23 12:53:51.335: W/System.err(551):  at java.net.Socket.connect(Socket.java:842)
11-23 12:53:51.335: W/System.err(551):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
11-23 12:53:51.346: W/System.err(551):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
11-23 12:53:51.346: W/System.err(551):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
11-23 12:53:51.346: W/System.err(551):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
11-23 12:53:51.346: W/System.err(551):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
11-23 12:53:51.346: W/System.err(551):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
11-23 12:53:51.346: W/System.err(551):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
11-23 12:53:51.346: W/System.err(551):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
11-23 12:53:51.346: W/System.err(551):  at com.example.getdata3.ConnexionSQLActivity.onCreate(ConnexionSQLActivity.java:37)
11-23 12:53:51.346: W/System.err(551):  at android.app.Activity.performCreate(Activity.java:4465)
11-23 12:53:51.346: W/System.err(551):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
11-23 12:53:51.355: W/System.err(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
11-23 12:53:51.355: W/System.err(551):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
11-23 12:53:51.355: W/System.err(551):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
11-23 12:53:51.355: W/System.err(551):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
11-23 12:53:51.355: W/System.err(551):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-23 12:53:51.355: W/System.err(551):  at android.os.Looper.loop(Looper.java:137)
11-23 12:53:51.355: W/System.err(551):  at android.app.ActivityThread.main(ActivityThread.java:4340)
11-23 12:53:51.355: W/System.err(551):  at java.lang.reflect.Method.invokeNative(Native Method)
11-23 12:53:51.365: W/System.err(551):  at java.lang.reflect.Method.invoke(Method.java:511)
11-23 12:53:51.365: W/System.err(551):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-23 12:53:51.365: W/System.err(551):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-23 12:53:51.365: W/System.err(551):  at dalvik.system.NativeStart.main(Native Method)
11-23 12:53:51.375: E/log_tag(551): Error converting resultandroid.os.NetworkOnMainThreadException
11-23 12:53:51.375: W/System.err(551): org.json.JSONException: End of input at character 0 of 
11-23 12:53:51.385: W/System.err(551):  at org.json.JSONTokener.syntaxError(JSONTokener.java:450)
11-23 12:53:51.385: W/System.err(551):  at org.json.JSONTokener.nextValue(JSONTokener.java:97)
11-23 12:53:51.395: W/System.err(551):  at org.json.JSONArray.<init>(JSONArray.java:87)
11-23 12:53:51.395: W/System.err(551):  at org.json.JSONArray.<init>(JSONArray.java:103)
11-23 12:53:51.395: W/System.err(551):  at com.example.getdata3.ConnexionSQLActivity.onCreate(ConnexionSQLActivity.java:70)
11-23 12:53:51.405: W/System.err(551):  at android.app.Activity.performCreate(Activity.java:4465)
11-23 12:53:51.405: W/System.err(551):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
11-23 12:53:51.405: W/System.err(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
11-23 12:53:51.405: W/System.err(551):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
11-23 12:53:51.415: W/System.err(551):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
11-23 12:53:51.415: W/System.err(551):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
11-23 12:53:51.415: W/System.err(551):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-23 12:53:51.415: W/System.err(551):  at android.os.Looper.loop(Looper.java:137)
11-23 12:53:51.415: W/System.err(551):  at android.app.ActivityThread.main(ActivityThread.java:4340)
11-23 12:53:51.415: W/System.err(551):  at java.lang.reflect.Method.invokeNative(Native Method)
11-23 12:53:51.415: W/System.err(551):  at java.lang.reflect.Method.invoke(Method.java:511)
11-23 12:53:51.415: W/System.err(551):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-23 12:53:51.425: W/System.err(551):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-23 12:53:51.425: W/System.err(551):  at dalvik.system.NativeStart.main(Native Method)
11-23 12:53:51.425: E/log_tag(551): Error parsing dataorg.json.JSONException: End of input at character 0 of 
11-23 12:53:51.575: D/gralloc_goldfish(551): Emulator without GPU emulation detected. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:54:28.110

此异常是由于在主线程上进行网络操作引起的。AsyncTask 应该可以帮助您解决问题。

这里有几个链接可以帮助你开始使用 AsyncTask：

*   [http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)
*   [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# c# - 如何检查WinForms中是否拖入了.mdb文件格式？

> ID：13521119
> 
> 赞同：1
> 
> 时间：2012-11-22T23:06:22.843
> 
> 标签：c#, winforms, drag-and-drop

我尝试下一个方法：

```
this.AllowDrop = true;
this.DragEnter += new System.Windows.Forms.DragEventHandler(Form_DragEnter);

void Form_DragEnter(object sender, DragEventArgs e)
{
     // here I need to check whether it access .mdb format
     if (e.Data.GetDataPresent(DataFormats.FileDrop))
     {
         e.Effect = DragDropEffects.Copy;
     }
     else
     {
         e.Effect = DragDropEffects.None;
     }
 } 
```

怎么查？在`DataFormats.`没有数据库格式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:36:40.000

```
string[] FileList;

if (e.Data.GetDataPresent(DataFormats.FileDrop))
{
    FileList = (string[])e.Data.GetData(DataFormats.FileDrop, false);
}
else if (e.Data.GetDataPresent(DataFormats.StringFormat))
{
    FileList = new string[] {e.Data.GetData(DataFormats.StringFormat, false).ToString()};
}
else
{
    return;
} 
```

然后遍历字符串数组[检查文件扩展名](http://msdn.microsoft.com/en-us/library/system.io.path.getextension.aspx)

# ruby-on-rails - 仅显示 f.label 覆盖 f.input 标签

> ID：13521123
> 
> 赞同：2
> 
> 时间：2012-11-22T23:06:46.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我目前有以下代码：

```
<div class = "span 3">
<%= f.label :volunteers, "Number of Volunteers" %>
<%= f.input :volunteers %>
</div> 
```

这就是网页上显示的内容：

Volunteers 志愿者人数 [#输入框在这里]

我想删除“志愿者”标签，因为它是自动插入的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T00:01:11.783

1.  试试这个：

    `<div class = "span 3"> <%= f.input :volunteers, :label => "Number of Volunteers" %> </div>`

2.  开始使用`simple_form`宝石。它会让你的生活轻松很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:53:38.513

你有没有尝试过：

```
<div class = "span 3">
  <%= f.label :volunteer, "Number of Volunteers" %>
  <%= f.input :volunteers %>
</div> 
```

你没有手机标签？你缺少代码吗？

# python - python替换列表中的项目

> ID：13521125
> 
> 赞同：5
> 
> 时间：2012-11-22T23:06:52.493
> 
> 标签：python, list, replace

嗨，我的问题与很久以前某个用户在这里发布的帖子有关：

[在 Python 列表中查找和替换字符串值](https://stackoverflow.com/questions/3136689/find-and-replace-string-values-in-python-list)

针对我的具体情况。我有一个这样的列表：

```
appl =  ['1', 'a', 'a', '2', 'a'] 
```

我只想用一个空格替换“a”的“单个未知”实例（它保持“a”曾经所在的位置）。我不确定如何只为一个角色做这件事。任何人都可以帮忙吗？提前致谢。

编辑：我应该提到我需要使用“索引”函数来首先定位“a”，因为它是一个不断变化的变量。然后我需要替换字符的代码。

EDIT2：很多人都假设索引为 2，但我想指出，字符的索引是未知的。此外，“a”将出现在列表中大约 20 次（将保持固定数量），但它们的位置会发生变化。我想根据用户输入替换“a”。这是我正在使用的实际列表：

```
track  [2] =   ["|","@","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"," ","|"] 
```

@ 是一个字符，| 是一个边框，“”是一个空格。用户输入输入以选择@向右移动多少，并显示一个新图像，显示@的新位置，@的旧位置被替换为空格。列表的长度保持不变。这是我的问题的背景。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T23:14:31.593

您可以通过遍历列表并存储其元素为的索引来简单地找到第二次出现的索引，`'a'`直到找到两个：

```
>>> appl = ['1', 'a', 'a', '2', 'a']
>>> idxs = (i for i,c in enumerate(appl) if c == 'a')
>>> next(idxs)
0
>>> appl[next(idxs)] = ''
>>> appl
['1', 'a', '', '2', 'a'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T23:12:32.660

您可以使用 index 以及循环来实现此目标。这是它的一个小功能：

```
def replace_element(li, ch, num, repl):
    last_found = 0
    for _ in range(num):
        last_found = li.index(ch, last_found+1)
    li[li.index(ch, last_found)] = repl 
```

利用：

```
replace_element(appl, 'a', 2, ' ') 
```

这个方法特别好，因为当字符不在列表中时它会抛出以下错误：

```
ValueError: 'a' is not in list 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T23:12:40.810

```
appl = ['1', 'a', 'a', '2', 'a']
a_indices = [i for i, x in enumerate(appl) if x == 'a']

if len(a_indices) > 1:
    appl[a_indices[1]] = ' ' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T23:19:44.043

首先，找到第一次出现的值：

```
>>> appl = ['1', 'a', 'a', '2', 'a']
>>> first = appl.index('a')
>>> first
1 
```

要找到第二个，从第一个位置加一个开始：

```
>>> second = appl.index('a', first+1)
>>> second
2 
```

然后将该位置设置为您想要的空间：

```
>>> appl[second] = ' '
>>> appl
['1', 'a', ' ', '2', 'a'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T00:47:43.807

`"|"`您的列表（带有, ）似乎`"@"`很短，并且`"@"`始终存在，只是在不同的位置。在这种情况下，您可以在一行中替换列表中第一次出现的`"@"`：`appl`

```
appl[appl.index("@")] = " " 
```

如果列表很大并且项目可能不存在：

```
i = next((i for i, x in enumerate(lst) if x == item), None)
if i is not None:
   lst[i] = replacement 
```

# c - 在 C 中使用 MPI_Type_vector 接收

> ID：13521129
> 
> 赞同：4
> 
> 时间：2012-11-22T23:06:58.757
> 
> 标签：c, multidimensional-array, parallel-processing, mpi

我有一个静态分配的二维数组 NxN，我想发送第`i`th 列（带有`i = 0 ... N-1`）。

我写的：

```
int main(int argc, char **argv) {

    int myrank, nprocs;
    int i,j;

    int matrix[N][N]={{1,2,3,4},{5,6,7,8},{9,10,11,12},{13,14,15,16}};
    int col[N];

    ...

    // Define type "column"
    MPI_Datatype column;
    MPI_Type_vector(N,1,N,MPI_INT,&column);
    MPI_Type_commit(&column);

    if(myrank==0){
        j=0;
        MPI_Send(&matrix[0][j],1,column,1,99,MPI_COMM_WORLD);
    }

    if(myrank==1){
        // **** FIRST MODE: Don't use "column" type *****
        MPI_Recv(col,N,MPI_INT,0,99,MPI_COMM_WORLD,&info);

        // **** SECOND MODE: Use "column" type *****
        // MPI_Recv(col,1,column_INT,0,99,MPI_COMM_WORLD,&info);

        printf("\nColumn: ");
        for(j=0;j<N;j++)
            printf("\n %d",col[j]);
    }

    MPI_Type_free(&column);
    MPI_Finalize();

    return 0;
} 
```

为什么第一种模式正确返回：

```
1 5 9 13 
```

第二次返回不正确？

```
1  -2  1980804601  1980804675 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T04:20:41.160

MPI 数据类型描述了数据的布局和数据量。因此，例如，您的列类型的计数 1 描述了 N 个整数，但 N 的计数也是如此`MPI_INT`。不同之处在于您的列类型（正确）描述了在大小为 NxN 的数组中跳转以提取列。使用该类型发送会提取 N 个 int，并将它们捆绑到一条消息中。

因此，当您发送时，您发送一种列类型来发送特定的 N 个整数，这些整数在您的数组中形成一列。但是到了接收的时候，虽然你仍然想接收 N 个整数，但是你将它接收到一个连续的 1d 整数数组（你的`col[]`数组）中，所以你只想接收 N个`MPI_INT`。如果您接收到列数据类型，您仍然会收到 N 个整数，但它们将被放入内存中，间隔 N 个整数（实际上，如果 N 足够大，您会得到一个段错误，因为您在外面写得很好你的 col 数组的边界）。这就是为什么当您收到一个列类型时，只有第一个数字是正确的；其余的都是垃圾，因为数组的其余部分仍未初始化。您的第二条数据 ,`5`将被写入 col 数组的末尾。

# android - Android AlarmManager 在长时间睡眠后停止工作

> ID：13521133
> 
> 赞同：1
> 
> 时间：2012-11-22T23:07:19.483
> 
> 标签：android, alarmmanager

我正在像这样启动 AlarmManager：

```
long systemTime = SystemClock.elapsedRealtime();
alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME, systemTime, intervalMillis, pendingIntent); 
```

一切正常，直到设备长时间进入睡眠状态，然后当设备唤醒时，警报将不再触发。这类似于[Android：长时间休眠后，AlarmManager 停止更新](https://stackoverflow.com/questions/13382967/android-after-a-long-sleep-alarmmanager-stops-updating)，[AlarmManager 停止运行](https://stackoverflow.com/questions/7410646/alarmmanager-stops-running)，但是我已经在使用`AlarmManager.ELAPSED_REALTIME`，所以它们没有帮助。

我不希望 AlarmManager 唤醒设备，但我确实希望它在设备唤醒时继续。我该如何解决？

# visual-studio-2012 - 使用不同的设置启动 Visual Studio

> ID：13521134
> 
> 赞同：2
> 
> 时间：2012-11-22T23:07:24.927
> 
> 标签：visual-studio-2012, settings

在使用 Visual Studio 2012 时，我在笔记本电脑上工作，并在 4 个屏幕（3x23 英寸和工作中的笔记本电脑屏幕）和家里的笔记本电脑屏幕之间切换。

我想有一种工作方式，我可以安排我的窗口（解决方案资源管理器、输出等）出现在其他显示器上，这样我的代码就有最大的空间，但我也希望能够在回家，不必每次都将窗户重新排列回合适的位置（然后在我上班时再重新排列）。

窗口位置是否与 Visual Studio 设置文件一起保存，是否可以使用特定设置文件启动 Visual Studio 2012？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T19:37:11.117

# java - 如何动态修改特征（例如LINE）的坐标？

> ID：13521136
> 
> 赞同：1
> 
> 时间：2012-11-22T23:07:46.093
> 
> 标签：java, geotools

我想改变一条线的坐标并用新的坐标动态绘制它。虽然可以更改值，但我没有成功用新坐标重新绘制。
我的示例代码和跟踪输出在这里..

TRACE-1:SimpleFeatureImpl:OSB_Line=[SimpleFeatureImpl.Attribute:the_geom=MULTILINESTRING ((32.56891053280672 39.98170079260158, 32.56195765663663 39.98391357917568)),

TRACE-2:SimpleFeatureImpl:OSB_Line=[SimpleFeatureImpl.Attribute:the_geom=MULTILINESTRING ((132.5689105328067 39.98170079260158,

```
public void modifySelectedFeatures(Set<FeatureId> idSet) {
    FilterFactory2 ff = CommonFactoryFinder.getFilterFactory2(null);
    MapContent mapContent = mapFrame.getMapContent();
    FeatureLayer layer = (FeatureLayer) mapContent.layers().get(0);
    Filter filter = ff.id(idSet);
    try {
        SimpleFeatureCollection fColl = (SimpleFeatureCollection) layer.getFeatureSource().getFeatures(filter);
        if (!fColl.isEmpty()) {
            SimpleFeatureIterator iterator = fColl.features();
            while (iterator.hasNext()) {
                SimpleFeature simpleFeature = iterator.next();
                System.out.println("TRACE-1:" + simpleFeature);
                Geometry geom = (MultiLineString) simpleFeature.getDefaultGeometry();
                Coordinate c = geom.getCoordinates()[0];
                c.setCoordinate(new Coordinate(c.x + 100.0, c.y, c.z));
                simpleFeature.setDefaultGeometry(geom);
                System.out.println("TRACE-2:" + simpleFeature);
            }
        }
    } catch (IOException e) {
        e.printStackTrace();  
    }
    mapFrame.getMapPane().repaint();
} 
```

# jquery - 如何在jQuery中在运行时设置回调函数

> ID：13521137
> 
> 赞同：1
> 
> 时间：2012-11-22T23:07:55.690
> 
> 标签：jquery, fancybox, fancybox-2, jquery-callback

有没有办法在运行时定义回调函数。这是我需要的。我正在使用fancybox。

```
$.fancybox.open({
            href : '#modal_div',
            minWidth:1150,
            minHeight:820,
            width:1150,
            height:820,
            autoResize:true,
            afterShow:function(){
                set_buttons();

            }
        }); 
```

在脚本的另一部分中，如果从服务器端接收到的值为“真”，则fancybox 关闭。我要定义一个回调“afterClose”，以便仅在服务器响应为真时才执行某些特定的事情，否则它应该简单地关闭。

```
$.post("user_action.php", {
                    delete_item:item_id,
                    rel:item_type
                }, function(data){
                            if(data=="true"){
                                $.fancybox.close()
                              //do some stuff afterClose
                            }
                            else{
                            $.fancybox.close()
                            }
                }
            }); 
```

所以我需要的只是在旅途中设置回调函数的方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:14:51.627

我可能没有正确理解您的问题。如果是这种情况，请修改您的 OP，我会再试一次。

您实际上已经处于回调函数中，并且您已经正确构建了 IF 测试以查看“数据”的值是否为真。

因此，您可以在您放置该评论的地方执行所需的操作 - 紧接在`$.fancybox.close();`指令之后。

注意：不要忘记该指令后面需要一个分号，对吧？

# java - 用线路输入捕捉错误/异常的好设计是什么？

> ID：13521138
> 
> 赞同：0
> 
> 时间：2012-11-22T23:08:07.643
> 
> 标签：java

我的代码是从 .txt 中读取行并解析这些输入。

输入是这种形式`<operation> <category> <name> <price> <quantity> <weight> <optional field1> <optional field2>`

电子产品有 2 个选项字段是否易碎 (F/NF) 和要运送到的状态，杂货有 1 个可选字段易腐烂 (P/NP)。这是行输入的一些示例

`insert clothing shirt 20.50 1 1`

`insert electronics PS3 300 1 5.2 F NM`

`insert groceries cabbage 2.00 5 1 NP`

我正在考虑编写一种`legalLine()`方法来处理输入中的错误

```
class sampleClass{
          public static void isLegalLine(String lineInput){
    Scanner s = new Scanner(lineInput);
    String operation = null;
    String category = null;
    String name = null;
    float price = 0;
    int quantity = 0;
    float weight = 0;
    String opt1 = null;
    String opt2 = null;
    try{
        operation = s.next(); 
        category = s.next();
        name = s.next();
        price = Float.parseFloat(s.next());
        quantity = Integer.parseInt(s.next());
        weight = Float.parseFloat(s.next());
        if (!operation.equalsIgnoreCase("insert")
                && !operation.equalsIgnoreCase("search")
                && !operation.equalsIgnoreCase("delete")
                && !operation.equalsIgnoreCase("update")
                && !operation.equalsIgnoreCase("print")) {
            System.out.println("invalid operation");
        }
        // more validations for variables category, name, price, quantity, weight goes here
        if(category.equalsIgnoreCase("electronics")){
            try{
                opt1 = s.next();
                opt1 = s.next();
            }catch(Exception e){

            }
        }else if(category.equalsIgnoreCase("groceries")){
            opt1 = s.next();
        }
    }catch (Exception e){
        //general catch for now
        e.getMessage();
    }
}

          public static void main(String[] args) 
      {
               FileReader freader = new FileReader(args[0]);
               BufferedReader bfrReader = new BufferedReader(freader);
               isLegalLine(bfrReader.readLine());

                //program does calculation for total price of input
} 
```

你看......我已经经历了将每个令牌设置为其各自变量的所有麻烦`isLegalLine()`，我怎样才能将这些信息传递回`main()`？这是处理输入行错误的好设计吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:15:50.577

由于您还需要处理它们，我看到的一个很好的解决方案是：

创建具有三个子类的 Product 类：服装、电子产品和杂货

然后让你的功能

```
public static Product isLegalLine(String lineInput) 
```

解析行后返回产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T23:49:52.633

我认为，逐行读取文件会更好。然后，您将对每一行应用正则表达式，因此您将获得您的参数 - 要么是强制性的，要么是可选的。

正则表达式将是这样的：

```
([\w\d\.]*)\s*([\w\d\.]*)\s*([\w\d\.]*)\s*([\w\d\.]*)\s*([\w\d\.]*)\s*([\w\d\.]*)\s*([\w\d\.]*)\s*([\w\d\.]*)\s* 
```

括号中的每个表达式都对应一个参数。代码示例如下：

```
String pattern = "([\\w\\d\\.]*)\\s*([\\w\\d\\.]*)\\s*([\\w\\d\\.]*)\\s*([\\w\\d\\.]*)\\s*([\\w\\d\\.]*)\\s*([\\w\\d\\.]*)\\s*([\\w\\d\\.]*)\\s*([\\w\\d\\.]*)\\s*";
Pattern p = Pattern.compile(pattern);
for(String str : strings) {
  Matcher m = p.matcher(str);
  m.find();
  if(m.matches()) {
     String operation = m.group(1);
     String category = m.group(2);
     ...
     float weight = Float.parseFloat(m.group(6));
     String opt1 = m.group(7);
     String opt2 = m.group(8);
  }
} 
```

然后，您只需检查操作是否存在（或不存在）可选参数，并在必要时生成错误。您可以通过返回一个值将任何信息传递回 main(...) 方法。返回值可以是任何你想要的。

# html - 需要此模式的正则表达式替换

> ID：13521140
> 
> 赞同：0
> 
> 时间：2012-11-22T23:08:18.750
> 
> 标签：html, regex, replace, textmate

我无法弄清楚如何让这个正则表达式替换工作。我正在使用 textmate 并试图得到这个：

```
title="cuba1" (could be any number range from 1-50 and any country name) 
```

替换为：

`data-group="cuba1, cuba" class="cuba`"

我有多个国家/地区有多个号码，这些号码可能会或可能不会出现在一个国家/地区（cuba1、cuba2 等）上，因为我将这些设置在区域上，有时我需要有一组区域。这将使我能够更快地实现它们，而无需手动执行此操作。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T23:16:43.897

正则表达式：

```
title="(([a-zA-Z]+)\d*)" 
```

替换：

```
data-group="$1, $2" class="$2" 
```

在记事本++中测试。不过，这些构造是相当标准的；应该适用于任何正则表达式实现。

编辑：附带通常的警告：正则表达式不适合 HTML

# python - 在 python 中从树构建语法

> ID：13521142
> 
> 赞同：2
> 
> 时间：2012-11-22T23:08:38.060
> 
> 标签：python, nltk, context-free-grammar, part-of-speech

我有一个文本语料库，其中包含用词性标签表示为树的句子。我想建立一个系统，可以从这个树形结构中学习概率语法。是否有任何内置的 python 模块可以解决这个问题，还是我必须构建一个解析器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:09:20.920

找不到一个。必须使用堆栈实现我自己的解析器。老实说，并没有太痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:22:31.603

您必须创建一个语法来解析您的文本。 [http://nltk.googlecode.com/svn/trunk/doc/book/ch08.html#fig-depgraph0](http://nltk.googlecode.com/svn/trunk/doc/book/ch08.html#fig-depgraph0)

然后使用带有此语法的 nltk 解析器解析您的文本。

# c# - 使用 C# 设置默认打印机页面大小

> ID：13521143
> 
> 赞同：0
> 
> 时间：2012-11-22T23:08:38.830
> 
> 标签：c#, windows, printing

> **可能重复：**
> [通过 C# 在 Windows 中设置默认打印机的属性](https://stackoverflow.com/questions/4819311/setting-the-properties-of-the-default-printer-in-windows-through-c-sharp)

我想使用 C# 在 Windows 的默认打印机中设置自定义页面大小，并且必须将这些更改设置为默认设置，以便以后使用它们进行打印。我试图改变 A3 的页面大小只是改变它的大小但徒劳无功。

`PrintDocument pd = new PrintDocument(); pd.DefaultPageSettings.PaperSize = new System.Drawing.Printing.PaperSize("A3", 100 , 100);`

请提供任何帮助。

# ruby-on-rails - ruby on rails 我正在尝试使用 find() 返回单个结果

> ID：13521148
> 
> 赞同：0
> 
> 时间：2012-11-22T23:09:07.637
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

> **可能重复：**
> [我想使用 .find() 和 Ruby on Rails 返回单个结果](https://stackoverflow.com/questions/13521603/i-want-to-return-a-single-result-using-find-with-ruby-on-rails)

这是我的代码

```
<%= f.select :user_id, User.find(:user_id).collect {|t|
    [t.user_name, t.id]} %> 
```

这给出了输出

```
Couldn't find User with id=user_id 
```

它似乎没有传递变量，而是将“user_id”作为字符串传递。

我只想让它将单个结果返回到选择列表或标签中

我对 ROR 还很陌生，我可能会以完全错误的方式解决这个问题。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T23:11:51.950

您将 :user_id 传递给 find 方法，这是一个符号，而不是用户 ID。

您必须传递一个数字才能找到，然后 find 将搜索具有该 ID 的记录。

另一个问题，你为什么在 find 的结果上调用 collect ？Find 只返回一行，而不是数组。

以下是您应该如何构建代码：

您应该将用户变量放入控制器，例如：

`@user = User.find(params[:id])`

请注意，如果找不到模型，find 会抛出异常，如您所见，请考虑使用 find_by_id 如果没有找到模型则返回 nil。

然后，您可以在视图中使用@user。

如果要显示仅包含用户的选择标签，请执行以下操作：

`<%= f.select, :user_id, options_for_select([[@user.user_name, @user.id]]) %>`

检查[http://guides.rubyonrails.org/form_helpers.html](http://guides.rubyonrails.org/form_helpers.html)以获取表单助手。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T23:17:00.293

ActiveRecord 中有一个方法：@user = User.find_by_id(params[:id])。它返回一个实例对象 @user ，您可以在其上调用 @user.name 。ruby 约定是这样的——如果你将@user 传递给一个方法，它接收一个ID 作为参数，你不必写@user.id，Rails 会完全理解你。

# html - CSS 在本地机器和服务器上的行为不同

> ID：13521154
> 
> 赞同：0
> 
> 时间：2012-11-22T23:09:42.310
> 
> 标签：html, css, django, amazon-ec2

这可能是一个愚蠢的问题，但我的远程 EC2 服务器上的 CSS 的行为与我的本地服务器不同。我的意思是当我加载页面并检查它时，遵循的 css 规则是不同的。我已经运行了collectstatic。以下是我的 main.css 中的代码

```
div.wrapper-home h2 {
  font-size: 24px;
  color: #FFFFFF;
  text-align: center;
  font-family: "Arimo", cursive, sans-serif;
} 
```

当我在远程服务器上运行它时，它在本地机器上完美加载它只为 h2 拾取 css，这是别的东西，而不是类 wrapper-home。任何人都可以指导我正确的方向，我可能会错过什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:59:45.023

在浏览器中使用“Inspect”或“Ins​​pect Element”（体面的浏览器具有这些开发人员工具），您应该能够找到不同案例的“Computed”样式——这也应该告诉您该样式的源文件.

源文件是您期望的文件吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:15:15.047

有一天，我在使用 Windows 时遇到了类似的问题。Windows 是不区分大小写的（文件系统），所以在桌面上我有一个 Style.css，在 HTML 中我包含了 style.css（在 Windows 上这很好用）。在服务器上（linux，区分大小写）这不起作用。

请详细说明您的案例、桌面系统、服务器系统、其他技术。也许您正在使用一些构建器或特定客户端，或者这发生在特定浏览器上？

# c++ - 可变参数模板作为模板参数：推导适用于 GCC，但不适用于 Clang

> ID：13521163
> 
> 赞同：22
> 
> 时间：2012-11-22T23:10:55.780
> 
> 标签：c++, gcc, c++11, clang, variadic-templates

在使用 GCC 4.7.2 和 Clang 3.1 编译一些 C++11 代码时，我遇到了一个问题，即 Clang 无法推断出 GCC 成功的模板参数。在更抽象的形式中，代码如下所示：

源/test.cc：

```
struct Element {
};

template <typename T>
struct FirstContainer {
};

template <typename T, typename U = Element>
struct SecondContainer {
};

template <template <typename> class Container>
void processOrdinary(Container<Element> /*elements*/) {
}

template <template <typename, typename> class Container>
void processOrdinary(Container<Element, Element> /*elements*/) {
}

template <template <typename, typename...> class Container>
void processVariadic(Container<Element> /*elements*/) {
}

int main() {
  // This function instantiation works in both GCC and Clang.
  processOrdinary(FirstContainer<Element>{});
  // This function instantiation works in both GCC and Clang.
  processOrdinary(SecondContainer<Element>{});
  // This function instantiation works in both GCC and Clang.
  processVariadic(FirstContainer<Element>{});
  // This function instantiation works in both GCC and Clang.
  processVariadic<SecondContainer>(SecondContainer<Element>{});
  // This function instantiation works in GCC but not in Clang.
  processVariadic(SecondContainer<Element>{});
  return 0;
} 
```

通过阅读第 14.3.3 节中的示例和标准第 14.8.2 节中的规范，我认为推论应该有效，但我不能肯定地说。这是我从构建中得到的输出：

```
mkdir -p build-gcc/
g++ -std=c++0x -W -Wall -Wextra -Weffc++ -pedantic -c -o build-gcc/test.o src/test.cc
g++  -o build-gcc/test build-gcc/test.o
mkdir -p build-clang/
clang++ -std=c++11 -Weverything -Wno-c++98-compat -c -o build-clang/test.o src/test.cc
src/test.cc:34:3: error: no matching function for call to 'processVariadic'
  processVariadic(SecondContainer<Element>{});
  ^~~~~~~~~~~~~~~
src/test.cc:21:6: note: candidate template ignored: failed template argument deduction
void processVariadic(Container<Element> /*elements*/) {
     ^
1 error generated.
make: *** [build-clang/test.o] Fel 1 
```

为什么结果不同？GCC 是否草率、Clang 愚蠢，我的代码是否包含未指定的行为或全部？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T06:57:37.680

Clang 正在尝试推断此调用的参数：

```
processVariadic(SecondContainer<Element>{}); 
```

由于`SecondContainer`有一个默认模板参数，这相当于：

```
processVariadic(SecondContainer<Element, Element>{}); 
```

`P`因此，它使用=`Container<Element>`和`A`=执行模板参数推导`SecondContainer<Element, Element>`。它可以立即推断出`Container`模板参数是`SecondContainer`。

接下来，它考虑模板参数。由于参数类型是完全解析的，Clang 认为参数必须有尽可能多的类型，否则推导不可能成功（它不考虑默认参数）。因此，它标志着扣除失败。

* * *

那么，应该发生什么？用 的话来说`[temp.deduct.type]p8`，

> 模板类型实参`T`、模板模板实参`TT`或模板非类型实参 i 可以推导出为`P`且`A`具有以下形式之一：
> `[...]`
> `TT<T>`
> `TT<i>`
> `TT<>`
> 其中 [...]`<T>`表示模板实参列表，其中至少一个实参包含 a `T`，`<i>`表示模板实参至少一个参数包含一个的列表，`i`并且`<>`表示没有参数包含一个`T`或一个的模板参数列表`i`。

为了匹配模板参数，我们转向`[temp.deduct.type]p9`：

> 如果`P`具有包含`<T>`or的形式`<i>`，则将相应模板参数列表的每个参数`Pi`与 的相应模板参数列表`P`的相应参数`Ai`进行比较`A`。

这里有两点需要注意。一个是该规则没有说明如果列表`Pi`和`Ai`是不同的长度（在这种情况下就是这样）会发生什么，并且常见的解释似乎是不检查不匹配的项目。另一个是无论如何都不应遵循此规则，因为 的形式`P`不包含`<T>`or `<i>`（它只包含`<>`，因为其中没有模板参数）。

* * *

So, Clang was wrong to reject this code. I've fixed it in [r169475](http://lists.cs.uiuc.edu/pipermail/cfe-commits/Week-of-Mon-20121203/069267.html).

# objective-c - 有没有办法只允许 UIViewControllers 遵守协议？

> ID：13521166
> 
> 赞同：1
> 
> 时间：2012-11-22T23:11:14.427
> 
> 标签：objective-c, ios, uiviewcontroller, objective-c-protocol

有没有办法做这样的事情（下面不起作用）：

```
@protocol ElementPicker <UIViewController>

- (id)initWithFile:(NSFileWrapper *)file andInfo:(NSString *)info;

@property (nonatomic, weak) NSObject<ElementPickerDelegate> *delegate;
@end 
```

所以实现“ElementPicker”的对象必须继承自`UIViewController`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T23:16:21.987

不能。协议只能扩展其他协议。您可以做的最接近的是将变量、属性或参数定义为`UIViewController`也遵守`ElementPicker`协议的。像这样的东西：

```
- (void)someMethod:(UIViewController<ElementPicker> *)controller {
} 
```

旁注 - 通常将委托定义为`id`，而不是`NSObject`。如：

```
@property (nonatomic, weak) id<ElementPickerDelegate> delegate; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T01:43:41.007

我不认为协议可以要求它是 a `UIViewController`，但是您可以通过设置要求委托是 a 来轻松实现这一点`UIViewController`：

`@property (nonatomic, weak) UIViewController<ElementPickerDelegate> *delegate;`

# python - Django {% url %} 当 url 带有以下参数时： url(r'^foo/ /$'，包括（一些.urls））

> ID：13521172
> 
> 赞同：4
> 
> 时间：2012-11-22T23:11:57.417
> 
> 标签：python, django, django-templates

我没有找到任何解决方案，如何使用以下配置获取模板中的 url（使用 Django1.3）：

*网址.py*

```
urlpatterns = patterns('',
    url(r'^/foo/(?P<parameter>\d+)/$', include('bar.urls'), name='foo-url'),
    ) 
```

包含的 url-conf：

*bar.urls.py*

```
urlpatterns = patterns('',
    (r'^/bar/$', 'bar.views.index'),
    url(r'^/bar/(?P<parameter2>\d+)/$', 'bar.views.detail', name='bar-url'),
    ) 
```

*bar.views.py*

```
def detail(request, parameter, parameter2):
    obj1 = Foo.objects.get(id=parameter)
    obj2 = Bar.objects.get(id=parameter2) 
```

现在我尝试使用以下方法获取模板中的 url：

```
{% url bar-url parameter=1 parameter2=2 %} 
```

我希望得到：**/bar/1/foo/2/**

在这种情况下可以使用 {% url %} 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T23:18:09.013

是的，您可以像这样获取您的网址：-

```
{% url 'bar-url' 1 2 %} 
```

但请注意，您的 url 配置实际上应该是这样的：-

*网址.py*

```
urlpatterns = patterns('',
    url(r'^/foo/(?P<parameter>\d+)/, include('bar.urls')),
) 
```

*bar.urls.py*

```
urlpatterns = patterns('',
    (r'^/bar/$, 'bar.views.index'),
    url(r'^/bar/(?P<parameter2>\d+)/$, 'bar.views.detail', name='bar-url'),
) 
```

`foo-url`除非您专门映射，否则没有：-

*网址.py*

```
urlpatterns = patterns('',
    url(r'^/foo/(?P<parameter>\d+)/$, 'another.views.foo', name='foo'),
    url(r'^/foo/(?P<parameter>\d+)/, include('bar.urls')),
) 
```

请注意，这`$`意味着正则表达式的结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:17:45.237

好吧，我通常为包含的 url 设置命名空间以简化过程：

在根 urlpatterns

> url(r'^articles/', 包括('articles.urls', namespace='articles')),

在文章/urls.py

> url(r'^(\d+)/$', 'read', name='read'),
> 
> url(r'^publish/$', 'publish', name='publish'),

然后在您的模板中，您只需键入：

> {% url 文章：阅读 1 %}
> 
> # 或者
> 
> {% 网址文章：发布 %}

更多关于[这里](https://docs.djangoproject.com/en/dev/topics/http/urls/#url-namespaces)的信息。

# game-physics - 如何将局部照明与反射和折射结合起来？

> ID：13521175
> 
> 赞同：1
> 
> 时间：2012-11-22T23:12:35.730
> 
> 标签：game-physics, raytracing

我正在研究光线追踪器，但我不确定如何将局部照明（phong）与反射和折射结合起来？我有用于计算的 TraceRay 函数：localLighting、reflectColor 和 refractColor。

在这一点上，我的最终颜色只是这三个的总和。但这样我得到的值超过 1，我不知道如何处理。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:16:09.203

这是两个独立的问题：如何处理反射/折射，以及如何处理大于 1 的颜色值。

我将首先解决第二个问题，因为它更容易。这不是错误，它是一种称为饱和度的效果，或者可能是过度曝光。它发生在胶片和数码相机中，也发生在你的眼睛里。问题很简单，您的感光器（对于眼睛，或数码相机中的 CCD，或胶片相机中的感光化合物）有太多的光能，以至于接收器已饱和至其最大输出值。换句话说，你可以继续向它注入更多的能量，但受体将无法输出任何更强的信号，所以它看起来还是一样的。因此，简单的解决方案是简单地将所有颜色值饱和为 1.0，这模仿了真实感光器中发生的情况。

当然，当这种情况发生在您的眼睛中时，您的瞳孔会收缩，因此不会有太多的光线进入，并且当摄影师拍摄过度曝光的照片时，出于同样的原因，他们可能会减小光圈或曝光时间。您可以在渲染器中执行相同的操作，只需将每个像素的颜色值除以固定数量即可。这类似于收缩瞳孔或限制曝光时间以减少到达每个受体的光能。

对于反射和折射，我知道的唯一方法是通过路径追踪。[此链接](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=11&ved=0CGcQFjAK&url=http://mid-autumn.googlecode.com/svn-history/r247/trunk/doc/metropolisTutorial.pdf&ei=8vK9UPO1KOKE2gW2kIHwBg&usg=AFQjCNGrM_YMGQ6Z0aDZ9xC3wJp1O5QvjA&cad=rja)上的 PDF描述了总体思路，以及一种相关的优化，称为 Metropolis Light Transport。本质上，您需要做的是递归光线投射：您需要继续从交叉点（即通常在该像素处渲染的点）投射光线，而不是仅仅从眼睛投射到像素中并进入场景随机进入场景以创建由多条线段组成的光路，每条线段连接场景中的两个交点，或者连接一个与您的眼睛或一个光源的交点。然后，您可以跟踪光源从每个点反射的路径，并计算进入路径的光（每种颜色的）有多少将在每个点反射到下一段。您可以使用模型的 BSDF 来计算这一点，该模型可以使用 Phong 或任何其他反射模型进行近似。最终结果告诉您有多少进入路径的光将到达当前像素。

对于每个像素，您需要构建许多这样的光路，并让它们都有助于该像素的渲染值。这再次模拟了一个真实的光学系统：来自场景的光线从各个不同方向的每个点反射，并从您可以通过场景找到的每条可能的路径进入您的眼睛。路径跟踪的想法是对这组所有可能的光路进行采样，以近似整个集合的贡献。

现在的关键是，您真正想要的是集合中所有路径的总和，而实际上不必跟踪每条路径（理论上它们的数量是无限的）。因此，您可以执行一个统计技巧：如果您将构建的每条路径的光值除以构建该特定路径的概率，则该商的*预期值*实际上是整个光值的总和一组路径，就像你想要的那样。当然，这只是期望值，所以用一条路径得到它的机会很小，但是如果你随机选择很多路径并执行相同的计算，然后对每条路径取这个商的平均值，你应该会收敛朝向所需的解决方案。

这就是一般的想法，我链接的文档详细介绍了如何计算每个路径的光值和概率，以及如何选择构建哪些路径的一些想法。请注意，可能令人困惑的是，您是根据概率构建路径的方式定义选择每条路径的概率的人。

# c++ - 将对齐声明说明符添加到返回类型有什么作用？

> ID：13521180
> 
> 赞同：2
> 
> 时间：2012-11-22T23:13:06.620
> 
> 标签：c++

我看到一些源代码定义了一个返回类型的函数，该函数具有这样的对齐说明符（对于 MSVC++）：

```
__declspec(align(SOMEALIGN)) return_type function_name() { ... } 
```

我已经用 128 的对齐方式进行了测试，并检查了函数内本地人的地址。如果我将`return_type`struct 更改为相当大的结构，我已经检查了函数的调用和分配的临时本地，并检查了函数的地址。没有一个是对齐的。所以我想知道，究竟什么是对齐的？

# java - 'equals()' 返回 false，但在地图中找到对象

> ID：13521184
> 
> 赞同：7
> 
> 时间：2012-11-22T23:13:25.477
> 
> 标签：java, map, equals, hashcode

我在搞乱一些 hashCode + equals + Map 的东西，发现了一些……奇怪的东西。

片段如下：

```
class Obj {
    String n;
    Obj(String n) {this.n = n;}

    public int hashCode() {return 0;}
    public boolean equals(Object o) {return false;} // no instance of this class 
                                                    // equals any other instance

} 
```

然后我做了这样的事情：

```
 java.util.Map<Obj,String> map = new java.util.HashMap<Obj,String>();
    Obj o1 = new Obj("1");
    Obj o11 = new Obj("1");
    Obj o2 = new Obj("2");

    map.put(o1,"val 1");
    map.put(o11,"val 2");
    map.put(o2,"val 3");

    p("size = " + map.size()); // obviously 3
    p(map.get(new Obj("1"))); // obviously null     
    p(map.get(o1)); // ... 
```

最后一行是奇怪的部分。最后一行返回`val 1`。怎么来的？该`equals`方法总是返回`false`。这是因为在调用`==`之前使用了运算符吗？`equals`

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T23:18:33.583

在[HashMap.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java)中，`get`方法是：

```
public V get(Object key) {
    if (key == null)
        return getForNullKey();
    int hash = hash(key.hashCode());
    for (Entry<K,V> e = table[indexFor(hash, table.length)];
         e != null;
         e = e.next) {
        Object k;
        if (e.hash == hash && ((k = e.key) == key || key.equals(k)))
            return e.value;
    }
    return null;
} 
```

该行`if (e.hash == hash && ((k = e.key) == key || key.equals(k)))`确实比较了`==`调用之前使用的键`equals`。这就是为什么你试图消除平等失败的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T23:18:13.443

哈希映射实现检查 == 和 equals 键的相等性。（如果 hashCode 相同）

[http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java#HashMap.get%28java.lang.Object%29](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java#HashMap.get%28java.lang.Object%29)

# jquery - 未捕获的类型错误：对象 [对象对象] 没有方法“验证”

> ID：13521185
> 
> 赞同：2
> 
> 时间：2012-11-22T23:13:34.417
> 
> 标签：jquery, forms, validation, typeerror

我确定我在某个地方遗漏了一些东西，但我看不到在哪里。我正在尝试使用 jQuery 验证脚本，但不断收到此错误。我很确定所有文件都在正确的位置等。这是在头：

```
<script src="scripts/jquery.min.js"></script>
<script src="scripts/jquery.validate.min.js"></script>
<script>
$(document).ready(function() {
    $('#form1').validate();
}); // end ready
</script> 
```

那么我的表格如下：

```
 <p>
    <label for="name">Your name:
    </label><br />
    <input name="name" type="text" class="required" title="Please enter your name." id="name" maxlength="80" />
  </p>

  <p>
    <label for="email">Your email address:</label><br /><input name="email" type="text" class="required email" title="Please enter a valid email address." id="email" maxlength="100" />
  </p>

  <p>
    <label for="phone">Your contact number:</label><br />
    <input name="phone" type="text" class="required" title="Please enter your phone number" id="phone" maxlength="50" />
  </p>

  <p>
    <label for="message">Message:<br />
    </label>
    <textarea name="message" id="message" cols="50" rows="5"></textarea>
  </p>
  <p>
    <input name="Submit" type="submit" class="form" id="Submit" value="Submit" style="width:100px" />
  </p>

</form> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T23:59:22.500

我刚刚遇到了这个问题，发现了两个导致此问题的问题：

我不小心在 HTML 文件的末尾添加了 jquery 引用以加快加载速度。将其移到我正在执行 .validate() 调用的上方解决了该问题。例子：

```
<script>
   $(document).ready(function(){
      $('#commentForm').validate();
   });
</script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script> 
```

我也有一个问题，我不小心加载了 jquery 两次，一次是在验证加载之后。例子：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script>
   $(document).ready(function(){
      $('#commentForm').validate();
   });
</script> 
```

这是我需要的：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<script>
   $(document).ready(function(){
      $('#commentForm').validate();
   });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T20:04:48.077

我在 Rails 项目中遇到了同样的问题。

删除文件夹后，我的问题得到了解决`public/assets`，因为这导致项目多次加载 jquery 库（原始库和预编译库）。

# javascript - 如何在 Flot 中绘制百分比堆栈图？

> ID：13521187
> 
> 赞同：1
> 
> 时间：2012-11-22T23:13:57.973
> 
> 标签：javascript, jquery, flot

我正在使用 Flot 为我的客户端 php 绘制图表。在一个图中，我需要百分比堆栈图，我发现 Flot 中有一个名为[Percentage Stack Plugin](https://github.com/skeleton9/flot.stackpercent)的插件。

我希望我的图表是这样的。

![预期百分比堆栈](../Images/70f2ada13b0be1f64864c248913e628e.png)

但是当我实现插件时，我得到了类似的东西。

![实际百分比堆栈](../Images/7243a1518a57b145e837c3a2309b7ddf.png)

我尝试了他们的示例并且工作正常。我认为这个问题与我传递的 JSON 数据有关。

我的 JSON 看起来像这样。

```
 [{"data":[[-64.483189655172,74.483189655172]],"label":"machine_52"},{"data":[[-142.91077586207,152.91077586207]],"label":"machine_23"},{"data":[[-220.57456896552,230.57456896552]],"label":"machine_90"},{"data":[[-304.05043103448,314.05043103448]],"label":"machine_48"},{"data":[[-388.56163793103,398.56163793103]],"label":"machine_98"}] 
```

X 值是正常运行时间百分比，Y 值是停机时间百分比。是那些值应该小于 100 来绘制图表。

我的 JS 代码如下所示。

```
 <script language="javascript" type="text/javascript">  

$(document).ready(function(){
$.getJSON('barLine.txt', function(json) {

    $.plot($("#placeholder"),json, { series: {
        stackpercent: true,
        bars: { show: true, barWidth: 0.6, fillColor: {colors:[{opacity: 1},{opacity: 1}]}, align: "center" }
    },
    xaxis: {max:100},
    yaxis:{tickSize : 1}});
});
});

</script> 
```

如何修复此错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:46:56.713

好的... stackpercent 插件如何更改您的数据？它所做的是将具有相同 x 值的所有内容的 y 值相加，然后根据该值创建百分比。

对于您的情况，您想要做的是有两个系列，一个包含所有正常运行时间值，一个包含所有停机时间值。您在每台机器上排列它们，因此两个系列中的 x = 0 是您其中一台机器的数据。

您的数据将如下所示：

```
[
     {"label":"Down Time ","data":[[0,64],[1, 142],[2,220],[3,304],[4,388]],"color":"#B41722"},
     {"label":"Running Time","data":[[0, 74], [1, 152],[2,230],[3,314],[4,398]],"color":"#6A9A3C"} 
] 
```

所以你可以看到我已经把你的`machine_52`数据分成两个系列的`-64.xxxxx`值，现在的值`[0,64]`和它对应`74.xxx`的是第二个系列中的`[0,74]`.

然后要将其连接到特定机器，请指定如下`xaxis.ticks`选项：

```
ticks: [[0,'Machine 52'],[1,'Machine 23'],[2,'Machine 90'],[3,'Machine 48'],[4,'Machine 98']] 
```

结果如下所示：http: [//jsfiddle.net/ryleyb/uSVvu/](http://jsfiddle.net/ryleyb/uSVvu/)

# javascript - 处理时区转换的 JavaScript 库

> ID：13521188
> 
> 赞同：14
> 
> 时间：2012-11-22T23:14:10.393
> 
> 标签：javascript, date, time, timezone

是否有可以处理时区转换的 javascript 库（并考虑 DST 规则和此类内容）？我知道有类似的问题，但我所见过的似乎都没有一个真正适合我的问题的答案。

我想在 A 时区创建一个日期并能够对其进行操作（添加天数、小时数等），然后将其转换为另一个时区 B。一定有很多人需要这种功能，所以我想应该有一些我还没有找到的图书馆。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T23:18:18.667

[MOMENT](http://momentjs.com/) - 一个 5kb 的 javascript 日期库，用于解析、验证、操作和格式化日期。

时刻（）。区域（）；这是您想要的功能。

你也可以试试[datejs](http://www.datejs.com/)，但是我更喜欢 moment 库，他们有很好的文档，并且维护了美味的代码。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-23T03:59:45.383

我想你想要这个：

[https://github.com/mde/timezone-js](https://github.com/mde/timezone-js)

解析器确实需要进行一些调整才能在没有该人放在一起的其他库的情况下运行（至少我上次使用它.. 五个月前？），但除此之外，这似乎是一个可靠的库。我已经在两个对时区非常敏感、流量大的商业网站上使用了它，并取得了巨大的成功。

有时它不能很好地与 jquery 的日期选择器和 momentjs（可能还有其他库）配合使用，因此请准备好调整这些库以使用 timezoneJS 的日期，或者具有 to/from 转换功能，以便您可以打开 timezonejs将日期转换为“正常”日期，反之亦然用于输入/输出。

*否则，作为示例，这将采用 Asia/Singapore 时区日期并将其转换为 America/Los_Angeles 日期，同时尊重该年*的夏令时。它使用免费提供的 Olson 时区文件，并将它们解析成真正准确的东西。

希望这能让你走上正确的道路。

- 编辑 -

忘记了 - 关于使用它的几个技巧。如果您有一组有限的时区，我强烈建议您通过告诉解析器仅使用这些时区来将它们取出 - 然后您不必加载所有时区的大文件。另外，我被踢了一次，因为 setHours、setMinutes 等不遵循 setHours(0, 0, 0, 0) 的 JS“规范”（即小时、分钟、秒、毫秒）。这里有一个增强请求：[https](https://github.com/mde/timezone-js/issues/48) ://github.com/mde/timezone-js/issues/48我不认为代码修改支持它会很困难，所以我希望我们会迟早会看到它合并..或者我可以自己做;）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-07T13:32:53.150

Moment 现在有一个专用库：[moment-timezone](http://momentjs.com/timezone/)。[您可以使用在线时区数据构建器](http://momentjs.com/timezone/data/)创建自己的 tzdata 。

就像 moment 一样，它的时区对应物很轻，而且它的 API 设计得很好。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-22T23:17:40.137

你可以看看这篇文章：[如何使用 jquery 获取用户时区？](https://stackoverflow.com/questions/8090549/how-to-get-user-timezone-using-jquery)

似乎您不需要任何库来转换时区。

-- 编辑（对于那些太容易阅读 Stackoverflow 上其他问题的答案的人）

您可以通过这种方式使用[标准 Date 对象](http://www.w3schools.com/jsref/jsref_obj_date.asp)：

```
var offset = (new Date).getTimezoneOffset()/60 
```

对于那些太容易阅读规范的人......

这将为您提供根据通用时间的小时：`var hour = (new Date).getUTCHours()` 这将为您提供根据当地时间的小时：`var hour = (new Date).getHours()`

现在明白了吗？

# machine-learning - Scikit 决策树可视化：错误值的含义

> ID：13521189
> 
> 赞同：5
> 
> 时间：2012-11-22T23:14:12.613
> 
> 标签：machine-learning, scikit-learn

我是机器学习的初学者，正在试验决策树。我正在查看决策树[http://scikit-learn.org/dev/_images/iris.svg](http://scikit-learn.org/dev/_images/iris.svg)的可视化，并想知道错误值的含义。是基尼指数还是信息增益还是什么？也会欣赏它直观的含义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T21:55:54.700

在这个具体示例中，节点的“错误”是到达该节点的所有示例的基尼指数。

通常，节点的“误差”取决于具体的杂质标准（例如分类的基尼系数或熵以及回归的均方误差）。

直观地，您可以将杂质标准（基尼系数和熵）都视为衡量多集的同质性的指标。如果多集合主要包含一种类型的元素（这也称为“纯”，因此称为“杂质标准”），则它是同质的。在我们的例子中，多集合的元素是到达相应节点的类标签。当我们分割一个节点时，我们希望得到的分区是纯的——这意味着类被很好地分离（一个分区主要包含一个类的实例）。

在`criterion="entropy"`二元分类的情况下，1.0 的错误意味着节点中有相同数量的正负样本（最不均匀的多集）。

您可以访问作为 a 基础的树数据结构，`DecisionTreeClassifier`或者`DecisionTreeRegressor`通过其`tree_`包含扩展类型的 on 对象的属性来访问`sklearn.tree._tree.Tree`。该对象将树表示为一系列并行的 numpy 数组。该数组`init_error`保存每个节点的初始误差；`best_error`如果节点是分裂节点，则保存两个分区的误差之和。有关更多详细信息，请参阅[https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/tree/_tree.pyx#L45](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/tree/_tree.pyx#L45)中的类文档。

# list - 更高级的组

> ID：13521206
> 
> 赞同：1
> 
> 时间：2012-11-22T23:15:50.490
> 
> 标签：list, haskell, grouping

我想以某种方式对列表进行分组，每个组尽可能大，并且最多包含 n 个不同的值（分组是贪婪的）。

例如：`groupN 2 [2,2,3,4,5,5,4,3,4,5]`应该是`[[2,2,3],[4,5,5,4],[3,4],[5]]`、`groupN 3 [2,2,3,4,5,5,4,3,4,5]`应该是`[[2,2,3,4],[5,5,4,3,4,5]]`和`group = groupN 1`。

我还没有想出一个很好的方法来实现它。你？解决方案应该尽可能通用，因为我需要更多的组条件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T23:40:25.970

您可以通过定义一个辅助函数来做到这一点，该函数从列表的头部获取适当的部分。就像是

```
splitNDistinct :: (Eq a) => Int -> [a] -> ([a],[a])
splitNDistinct n xs = go 0 [] xs
   where 
     go _ _ [] = ([], [])
     go count seen xs'@(x:xs)
      | x `elem` seen = let (taken, rest) = go count seen xs in (x:taken, rest)
      | count /= n = let (taken, rest) = go (count+1) (x:seen) xs in (x:taken, rest)   
      | otherwise = ([], xs') 
```

这给

```
> splitNDistinct 1 [1, 1,2, 1,2,3, 1,2,3,4]
([1,1],[2,1,2,3,1,2,3,4])
> splitNDistinct 2 [1, 1,2, 1,2,3, 1,2,3,4]
([1,1,2,1,2],[3,1,2,3,4])
> splitNDistinct 3 [1, 1,2, 1,2,3, 1,2,3,4]
([1,1,2,1,2,3,1,2,3],[4])
> splitNDistinct 4 [1, 1,2, 1,2,3, 1,2,3,4]
([1,1,2,1,2,3,1,2,3,4],[]) 
```

上面的函数记录了它之前见过的元素的数量和元素，然后只在之前见过的情况下取新元素，或者如果有新元素的空间。

（上面可以通过认识到两个递归情况`go`具有几乎相同的结构，除了递归调用中的值`count`和 in的差异。但分解`seen`可能很容易使函数不那么干净。）

`groupN`可以通过反复应用来实现`splitNDistinct`。

* * *

想一想，可以分别在with和的递归调用中定义`mapFst f (a,b) = (f a, b)`和替换- 表达式，这使得它们的相似性更加烦人。`let``go``mapFst (x:) $ go count seen xs``mapFst (x:) $ go (count+1) (x:seen) xs`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T14:14:12.790

编辑：正如 dbaupp 所说，我回答了一个不同的、更简单的问题。正确的理解产生

```
import Data.List
import qualified Data.Set as S

groupN :: Ord a => Int -> [a] -> [[a]]
groupN n (h:t) = reverse . fmap reverse . fst $
                 foldl' add ([[h]], S.singleton h) t
  where insHead (l:t) i = (i:l):t
        add (l, s) i
          | i `S.member` s = (insHead l i, s)
          | S.size s == n  = ([i]:l, S.singleton i)
          | True           = (insHead l i, S.insert i s) 
```

这是（我认为）正确且相当简洁，并且相对于其输入（O（n log m）对于m组唯一值和长度为n的输入列表以线性时间运行；理论最大值为O（n）使用具有恒定时间插入和查找的数据结构，我认为 dbaupp 的运行时间为 O(mn)。但是，我确实通过使用集合`Eq a`来加强条件，并牺牲惰性。`Ord a`

* * *

不正确的代码：

```
import Data.List

groupN :: Eq a => Int -> [a] -> [[a]]
groupN n = concatN n . group
  where concatN n l = case splitAt n l of
          (l, [])  -> return $ concat l
          (l1, l2) -> (concat l1):(concatN n l2) 
```

您可以使用来`genericSplitAt`放松一下。`Int``Integral`

# javascript - XMLHttpRequest onreadystatechange 语句后 Javascript Object Error 的回调行为

> ID：13521211
> 
> 赞同：-4
> 
> 时间：2012-11-22T23:16:10.680
> 
> 标签：javascript, jquery, replace, find

我想得到 h=Af?????????? 来自社交网站上的报告链接的价值。我用这个测试：http: [//jsfiddle.net/rtnNd/6/](http://jsfiddle.net/rtnNd/6/)来检索值，它在我测试时有效。

但我不希望用户与之交互。脚本必须自动检索页面并获取它的值。（我使用 Google Chrome Javascript 控制台进行测试）当我尝试使用以下编码时，它会拼写页面并分配给值 d 并找到 h 的值，但搜索/替换根本不起作用。为什么 getElementsByClassName 不起作用？

**使用 JQuery：**

```
function getParameterByName(name, path) {
        var match = RegExp('[?&]' + name + '=([^&]*)').exec(path);
        return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}

var URL = 'http://www.facebook.com/zuck';
xmlhttp = new XMLHttpRequest();
xmlhttp.open("GET", URL, true);
xmlhttp.setRequestHeader("Content-type", "application/xhtml+xml");
xmlhttp.send();
xmlhttp.onreadystatechange = function () {
       if (xmlhttp.status == 404) {
               result = error404;
       }
       if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
              var d = xmlhttp.responseText;
               var jayQuery = document.createElement('script');
               jayQuery.src = "//ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js";
               document.getElementsByTagName("head")[0].appendChild(jayQuery);
               var href = $($('.hidden_elem').d.replace('<!--', '').replace('-->', '')).find('.itemAnchor[href*="h="]').attr('href');
               var fbhvalue = getParameterByName('h', href);
               alert(fbhvalue);
       }
} 
```

我出现这个错误，“错误：未捕获的类型错误：无法调用未定义的方法'替换'”，即使我添加了 jquery。

**没有 JQuery：**

```
 function getParameterByName(name, path) {
        var match = RegExp('[?&]' + name + '=([^&]*)').exec(path);
        return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}
var URL = 'http://www.facebook.com/zuck';
xmlhttp = new XMLHttpRequest();

xmlhttp.open("GET", URL, true);
xmlhttp.setRequestHeader("Content-type", "application/xhtml+xml");
xmlhttp.send();
xmlhttp.onreadystatechange = function () {
        if (xmlhttp.status == 404) {
                // result = error404;
        }
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                d = xmlhttp.responseText;
                checker(d);
        }
}

function checker(i) {
        i.value = i;

        var hiddenElHtml = i.replace('<!--', '').replace('-->', '').find('.itemAnchor[href*="h="]').attr('href');

        var divObj = document.createElement('div');
        divObj.innerHTML = hiddenElHtml;

        var itemAnchor = divObj.getElementsByClassName('itemAnchor')[0];
        var href = itemAnchor.getAttribute('href');
        var fbId = getParameterByName('h', href);
        alert(fbId);

} 
```

当我运行它时，我得到一个名为“对象没有方法'find'”的错误。

为什么在调用 xmlhttp.onreadystatechange 语句后 getElementsByClassName、getParameterByName、Jquery、getAttribute 不起作用？请你指出我。有没有办法找出如何获得价值？感谢您阅读我的问题并回答！

更新：（如果我在个人资料页面上访问，在 Google Chrome 的 javascript 控制台中运行以下脚本，它会获得 h 值 - 但我真的不希望那样......我想指定用户个人资料名称，它必须自动检索并获取它的 h 值。）

```
 var jayQuery = document.createElement('script');
    jayQuery.src = "//ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js";
    document.getElementsByTagName("head")[0].appendChild(jayQuery);

    function getParameterByName(name, path) {
var match = RegExp('[?&]' + name + '=([^&]*)').exec(path);
return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
    }

    var href = $($('.hidden_elem')[1].innerHTML.replace('<!--', '').replace('-->', '')).find('.itemAnchor[href*="h="]').attr('href');
    alert(href);
    var fbId = getParameterByName('h', href);
    alert(fbId); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:27:46.460

您的“使用 jQuery”示例在不使用 jQuery 的情况下做了很多事情——这些事情 jQuery 做得很好。您可能想了解如何将 jQuery 与 AJAX 事件一起使用。[查看这些示例并尝试它们](https://stackoverflow.com/questions/13499559/make-div-text-change-on-click-based-on-php-data-using-ajax/13501242#13501242)。

一开始，jQuery 可能令人生畏。但是请继续查看[jQuery 网站](http://api.jquery.com)上的示例并尝试一下。查看我的一些旧帖子以获取更多示例。像你一样，在过去的几个月里，我不得不通过火来学习它。

并且不要忘记尝试 jQueryUI 示例——当您尝试对话框、选项卡、手风琴等时，您会高兴得手舞足蹈。

您可能还想分解一些复杂的 jQuery 语句，例如：

```
var href = $($('.hidden_elem').d.replace('<!--', '').replace('-->', '')).find('.itemAnchor[href*="h="]').attr('href'); 
```

像这样在链中添加 jQuery 方法：`$('#myElement').dothis(chain1).dothat(chain2).doanother();`输入和阅读速度很快，但很难排除故障。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:15:05.677

如果您在 facebook 之外使用此脚本，您肯定会得到[SOP](http://en.wikipedia.org/wiki/Same_origin_policy)，由于安全原因，请参阅：[Access Control Allow Origin not allowed by](https://stackoverflow.com/questions/9327218/access-control-allow-origin-not-allowed-by)

所以，假设你得到了**响应字符串** `xmlhttp.responseText`，所以你不能使用一些只适用于 DOM 对象的 JQuery 或 JavaScript 函数，但它只是纯字符串。例如，您使用`find()`, `attr()`, 方法不适用于字符串。你可以把它当作一个字符串来玩，仅此而已。

# command-line - Rails 已安装但无法正常工作

> ID：13521216
> 
> 赞同：1
> 
> 时间：2012-11-22T23:16:29.040
> 
> 标签：command-line, installation, ruby-on-rails-3.2, ubuntu-12.10

伙计们，

昨天我在 Ubuntu 12.10 上安装了 Rails 3.2 并创建了一个新项目来检查它。它工作正常。

今天我尝试创建一个新项目并收到以下消息（葡萄牙语版）：

O programa 'rails' pod ser encontrado nos seguintes pacotes:
* rails
* ruby​​-railties-3.2
Tente: sudo apt-get install <pacote selecionado>

就像是：

**在以下软件包中找不到程序“rails”：**
...
...
**尝试：sudo apt-get install <selected package>**

我运行命令**gem list**并列出了所有 gem，包括 Rails 之一。

我试图在网上搜索解决方案，但没有找到任何解决方案。

非常感谢您的帮助。

路易斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:58:02.700

只需添加`/home/(yourUser)/.gem/ruby/1.9.3/bin`到您的 PATH 变量

最简单的方法是将该行添加到您的 ~/.bashrc 并重新启动您的 shell：

```
export PATH=$PATH:/home/(yourUser)/.gem/ruby/1.9.3/bin 
```

记住`(yourUser)`用您的用户名替换并确保 ruby​​ 版本是正确的；）

# python - 如何使用 python-xlib 在所有工作区中搜索窗口？

> ID：13521217
> 
> 赞同：3
> 
> 时间：2012-11-22T23:16:33.930
> 
> 标签：python, workspace, xlib

我将创建一个 Python 脚本来搜索具有特定标题的窗口并将其置于顶部。我在当前工作区找到了如何做到这一点： [http ://ubuntuforums.org/showthread.php?t=1254376](http://ubuntuforums.org/showthread.php?t=1254376)

但我想在所有工作区都这样做。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T17:02:47.847

老问题，但我遇到了同样的问题。答案是要获取所有工作区上的窗口列表，您不应该测试窗口是否可见（删除“attrs.map_state == X.IsViewable”部分）。

```
display = Display()
root = display.screen().root
winid_list = root.get_full_property(self.NET_CLIENT_LIST_ATOM,
                                            X.AnyPropertyType).value
for winid in winid_list:
    win = self.display.create_resource_object('window', winid)
    transient_for = win.get_wm_transient_for()
    wmname = win.get_wm_name()
    if transient_for == None:
        if wmname != None and name in wmname:
            break 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-03T08:23:13.657

代码在查询树中搜索窗口并获取窗口对象，该对象稍后可用于获取查询所需的属性：

```
disp = Display() 
root = disp.screen().root    
children = root.query_tree().children    
for win in children:
    try:
        WinName = getProp(disp,win,'NAME') # or win.get_wm_name()
        PIDs = getProp(disp,win,'PID')
        WinPID = newPIDs[0]

        if WinName and WinName == DESIRED_NAME:
            print("found the window with pid: {} winName: {}  winId: {}".format(pid, newWinName,win.id))
            # Code to bringToTop
        print

    except Xlib.error.BadWindow:
        print("BadWindow error")

def getProp(disp,win, prop):
    p = win.get_full_property(disp.intern_atom('_NET_WM_' + prop), 0)
    return [None] if (p is None) else p.value 
```

# objective-c - 在 Objective-C 中，可以使用派生类“实例化”协议吗？

> ID：13521224
> 
> 赞同：0
> 
> 时间：2012-11-22T23:16:53.907
> 
> 标签：objective-c, cocoa

我用 Objective-C 编写了一个名为 的协议`BHIDataFormatter`，它由 `BHCsvDataFormatter`、`BHJsonFormatter`和`BHXmlFormatter`类实现。

作为主要的 .NET 开发人员，可以通过以下方式获得所需的实例：

```
IDataFormatter formatter;
if (csv) formatter = new CsvDataFormatter();
else if (json) formatter = new JsonFormatter();
else if (xml) formatter = new XmlDataFormatter();
else throw SomeException("Cripes"); 
```

基本上，我怎样才能在 Objecive-C 中做同样的事情？我试过了，虽然`BHIDataFormatter`是“未知类型”：

```
BHIDataFormatter* formatter;
if (csv) formatter = [[BHCsvDataFormatter alloc] init];
else if (json) formatter = [[BHJsonDataFormatter alloc] init];
else if (xml) formatter = [[BHXmlDataFormatter alloc] init];
else [[NSException exceptionWithName:@"SomeException" reason:@"Cripes" userInfo:nil] raise]; 
```

以下似乎可行，尽管它似乎太笼统（我宁愿明确使用`BHIDataFormatter`）：

```
Protocol* formatter = [[CsvDataFormatter alloc] init]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:18:48.150

您需要将变量声明为`id`符合协议的类型

```
id<BHIDataFormatter> formatter; 
```

那是指`id`向任何对象的指针，并且
您还声称该对象将符合`BHIDataFormatter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:25:33.183

正如保罗已经说过的，你需要使用

```
id<MyProtocolName> myNewVariable; 
```

这是一个很好的介绍：

[http://mauvilasoftware.com/iphone_software_development/2008/05/a-brief-intro-to-objective-cp.html](http://mauvilasoftware.com/iphone_software_development/2008/05/a-brief-intro-to-objective-c-p.html)

# ios - Flurry AppSpot 测试广告未出现在设备上

> ID：13521227
> 
> 赞同：0
> 
> 时间：2012-11-22T23:17:14.630
> 
> 标签：ios, flurry

我已按照他们的说明将 Flurry AppSpot 集成到我的 iOS 应用程序中。当我在模拟器上进行测试时，这一切似乎都运行良好，调用了所有正确的委托生命周期方法，并且一些测试广告出现在顶部横幅中。但是，当我尝试在真实设备上运行它时（我尝试了几种不同的类型），所有正确的调用都会被调用并且委托方法被调用，但是广告没有出现。我猜这两种模式之间应该没有任何区别，但似乎找不到任何信息来证实这一点。

有没有其他人尝试过集成 AppSpot 广告并且遇到同样的问题或者在真实设备上成功运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:47:11.827

删除了委托代码并重新开始工作。重新添加了委托代码，它继续工作。

# interface - 与迭代器接口？

> ID：13521231
> 
> 赞同：1
> 
> 时间：2012-11-22T23:17:48.843
> 
> 标签：interface, iterator, containers

给定一个具有一个或多个容器的类，与迭代器而不是容器接口是一种好习惯吗？（例如，对于希望浏览容器的客户端）

迭代器会以某种方式隐藏容器的实现，所以就我而言，我认为这是一个很好的做法。

但是我可能没有意识到将迭代器作为接口技术（如果有的话）提供给其他程序员/设计人员遇到的后果。

您对此有何看法？

# java - 将日期/字符串值从配置类传递给 widgetprovider

> ID：13521233
> 
> 赞同：0
> 
> 时间：2012-11-22T23:17:54.390
> 
> 标签：java, android, android-widget, android-appwidget

我正在尝试将小部件配置类中的字符串值传递给 appWidgetProvider 类。我读过你在类之间传递一个字符串，如下所示：

在当前活动中，创建一个意图

```
Intent i = new Intent(getApplicationContext(), ActivityB.class);
i.putExtra(key, value);
startActivity(i); 
```

然后在另一个活动中，检索这些值。

```
Bundle extras = getIntent().getExtras(); 
if(extras !=null) {
    String value = extras.getString(key);
} 
```

（对于“键”，我声明了一个字符串）

但是当将检索代码写入我的 appWidget 提供程序时，我会收到一条错误消息：方法 getIntent() 未为 Widget 类型定义

我该怎么办？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:51:02.750

我猜你的`Widget`类是应用小部件提供者类。你不能`getIntent()`在这里调用，因为`getIntent()`是`Activity`类的方法

但我不明白 - 您如何/为什么从您的配置活动中调用应用程序小部件提供程序？类接收的意图`AppWidgetProvider`是由 Android 框架创建的，而不是由您创建的。

# qt - 在 Qwt Plot 中保持 X 轴长度固定

> ID：13521245
> 
> 赞同：1
> 
> 时间：2012-11-22T23:19:21.183
> 
> 标签：qt, qwt

我正在制作一个应用程序，用于使用`Qt`&从串行端口绘制实时数据。我正在使用's方法`Qwt`在`QwtPlot`对象上绘制数据。由于我正在绘制大量数据，x 轴不断缩小，使图形在某些情况下变得丑陋时间。所以我在绘制 500 点后重新设置它。它变得更好但我仍然没有一直缩小到 500 点。我不希望那样。我需要x轴是静态的。任何解决方案？`QwtPlotCurve``setData(QVector<double>&,QVector<double>``QVector<double>`

这是部分代码供参考。

```
 d = new QVector<double>();
    t = new QVector<double>();
    curve = new QwtPlotCurve("My Plot");
    curve->setPen(QPen(Qt::red));
    curve->attach(ui->qwtPlot); 
```

绘图：

```
void MainWindow::plot(double val)
{
    if(d->size() < 500)
    {
      d->push_back(val);
      t->push_back(d->size());
    }
    else
    {
        d->clear();
        t->clear();
        d->push_back(val);
        t->push_back(d->size());

    }

    curve->setData(*t,*d);
    ui->qwtPlot->replot();
} 
```

`plot()`每次串行端口有新数据可用时，都会触发该方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:49:40.417

禁用自动缩放，参见 QwtPlot::setAxisScale()

# sqlite - NodeJS + AppJS + Sqlite3

> ID：13521246
> 
> 赞同：1
> 
> 时间：2012-11-22T23:19:23.040
> 
> 标签：sqlite, node.js, npm, node-gyp, appjs

我正在尝试将 SQLite3 模块构建到我的项目中。如果我运行 NPM install sqlite3 它会失败。这是我的 npm-debug.log 相关：

```
235 info install sqlite3@2.1.5
236 verbose unsafe-perm in lifecycle true
237 silly exec cmd "/c" "node-gyp rebuild"
238 silly cmd,/c,node-gyp rebuild,C:\NodeWorkbench\AppJS Workspace\template\data\node_modules\sqlite3 spawning
239 info sqlite3@2.1.5 Failed to exec install script
240 info C:\NodeWorkbench\AppJS Workspace\template\data\node_modules\sqlite3 unbuild
241 verbose from cache C:\NodeWorkbench\AppJS Workspace\template\data\node_modules\sqlite3\package.json
242 info preuninstall sqlite3@2.1.5
243 info uninstall sqlite3@2.1.5
244 verbose true,C:\NodeWorkbench\AppJS Workspace\template\data\node_modules,C:\NodeWorkbench\AppJS Workspace\template\data\node_modules unbuild sqlite3@2.1.5
245 info postuninstall sqlite3@2.1.5
246 error sqlite3@2.1.5 install: `node-gyp rebuild`
246 error `cmd "/c" "node-gyp rebuild"` failed with 1
247 error Failed at the sqlite3@2.1.5 install script.
247 error This is most likely a problem with the sqlite3 package,
247 error not with npm itself.
247 error Tell the author that this fails on your system:
247 error     node-gyp rebuild
247 error You can get their info via:
247 error     npm owner ls sqlite3
247 error There is likely additional logging output above.
248 error System Windows_NT 6.1.7600
249 error command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "sqlite3"
250 error cwd C:\NodeWorkbench\AppJS Workspace\template\data
251 error node -v v0.8.14
252 error npm -v 1.1.65
253 error code ELIFECYCLE
254 verbose exit [ 1, true ] 
```

我安装了 node-gyp 以及 python（我相信是 3.3）。谢谢您的帮助。我真的需要尽快解决这个问题，所以如果你能指出我的方向，我将不胜感激！

理想情况下，我想在我的项目中使用 Nano 和 couchdb。从前到后的 JSON 会很棒。但是 nano 在运行时抛出了 C++ 异常，所以我不得不重新编译堆栈并重新开始（当我安装 nano 时它重新编译了 AppJS，我假设在其中放入了一些错误的扩展并搞砸了整个工作）我的堆栈如下：

数据库 > AppJS（NodeJS 包含在其中）> SocketIO > AngularJS

这个项目的重点是组装一个我可以用来替代 server2go 的堆栈。我的公司在 server2go 方面存在严重的稳定性问题，包括数据丢失和数据库损坏（MyISAM with MySQL）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T02:00:20.407

找到了一个很好的解决方案。Persist 与 AppJS 完美配合，并具有出色的非阻塞 sqlite3 驱动程序。以防万一其他人想知道

# python - python范围问题

> ID：13521251
> 
> 赞同：1
> 
> 时间：2012-11-22T23:19:57.013
> 
> 标签：python, scope

我在使用 python 变量范围时遇到问题。

```
def getIP(data,address):
    header = Header.fromData(data,0);
    arcount = header._arcount   //at this point arcount is some non-zero number 
```

稍后在代码中（仍在方法getIP中）我想看看arcount是否为零：

```
...
    elif firstRR._type==RR.TYPE_NS:
    while(nscount!=0):
        print "arcount: ",arcount  //here it gives 0\. why?
        if(arcount!=0):
            print "arcount isn't 0"
        else:
            print "can't reach header" 
```

当我假设arcount不应该为零时，这会打印“无法到达标题”。为什么它没有看到arcount？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:30:50.577

因为 Python 是强类型的，既不`u'0'`也不`'0'`等于`0`.

# statistics - A/B 测试分区函数

> ID：13521252
> 
> 赞同：4
> 
> 时间：2012-11-22T23:20:02.540
> 
> 标签：statistics, ab-testing, hash-function, abtest

我想将我的用户分成几个组来运行 A/B 测试。

通常的方法是将每个用户随机分配到一个变体并存储关系直到 A/B 测试结束。但这将迫使我将该关联存储在某个地方，我想避免它。

由于用户已经在我的应用程序中注册，我希望有一个功能可以在我的测试中均匀地分布用户，这样我就可以在我的 A/B 测试中获得不偏斜的结果。

我应该使用哪种哈希函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T22:17:13.770

这篇 ACM 的[论文](http://www.exp-platform.com/documents/guidecontrolledexperiments.pdf)解释说 md5 是一个很好的散列函数，可以得到均匀分布和实验之间没有相关性：

> 我们发现只有密码散列函数 MD5 在实验之间没有产生相关性。SHA256（另一个加密哈希）接近，需要五向交互来产生相关性。.NET 字符串散列函数甚至未能通过双向交互测试。

# android - 使用一个 ic_launcher.png 而不是四个

> ID：13521256
> 
> 赞同：1
> 
> 时间：2012-11-22T23:20:39.530
> 
> 标签：android, icons

是否有任何理由（除了外观不同的图标）包含四种不同大小的启动器图标？我想如果我只在我的应用程序中包含一个图标（在 xhdpi 目录中），ldpi 设备只会使用 xhdpi 图标并适当地缩放它。

![在此处输入图像描述](../Images/49b0ff8dfc7b7ff184433f1c138b9645.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T23:28:14.330

> ldpi 设备只会使用 xhdpi 图标并适当地缩放它

正确的。而且您完全无法控制结果的质量。

因此，*如果*您尝试对图像（启动器图标或任何其他）进行此操作，并且*如果*结果在所有主要屏幕密度上都可以接受，那就去做吧。但是，可能存在一些图像，其中下采样导致的降级结果意味着您需要以其他密度提供自己的图像，这样您可以更好地控制结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:23:59.780

使用 4 而不是 1 的原因与您的应用程序上的任何其他图像相同（即，避免缩放并确保可绘制对象在任何设备上看起来都最好）。不同之处在于启动器图标很小，因此缩放不会产生如此大的影响（即，除非您非常注意它，否则不应该引起注意）。

我在我的大多数应用程序上也只使用了几个图标版本，尽管对于客户我会为每个 dpi 提供一个。

# c# - 移除 CSS 类 从后面的代码中标记 ASP.net

> ID：13521257
> 
> 赞同：9
> 
> 时间：2012-11-22T23:20:47.493
> 
> 标签：c#, asp.net, html, css

我向我的 li 标签添加了一个 css 类，如下所示：

```
liComPapers.Attributes.Add("class", "NoDisplay"); 
```

有没有办法从我的代码中其他地方的那个 li 标签中删除这个特定的类（NoDisplay）？

我已经尝试了以下代码，但它不起作用。

```
liComPapers.Attributes["class"] = ""; 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T23:31:41.863

如果我理解正确：

如果您只想删除`NoDisplay`，则可以将字符串的那部分替换为空字符串：

```
liComPapers.Attributes["class"] = liComPapers.Attributes["class"].Replace("NoDisplay", ""); 
```

* * *

但是，`.Add("class", "NoDisplay")`不会将新类添加到您的类属性。它将创建一个`class`值为 的新属性`NoDisplay`。因此，如果您的标记当前是：

```
<li class="myClass"></li> 
```

它会变成：

```
<li class="myClass" class="NoDisplay"></li> 
```

这是无效的标记。

要将新类附加到具有现有类的元素，您可以执行以下操作：

```
liComPapers.Attributes["class"] += " NoDisplay"; 
```

这将呈现：

```
<li class="myClass NoDisplay"></li> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-22T23:47:04.773

我刚刚制作了一个示例来测试您的代码，并发现以下部分将完全符合您的要求：

```
 var newClassValue = liTest.Attributes["class"].Replace("NoDisplay", "");
 liTest.Attributes["class"] = newClassValue; 
```

**测试和工作：** 如果（由于某种原因）上面的代码不起作用，我会推荐另一种方法，它类似于以前的方法，用另一种方法替换类值

```
var newClassValue = liTest.Attributes["class"].Replace("NoDisplay", "");
liTest.Attributes.Remove("class");
liTest.Attributes.Add("class",newClassValue); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-24T11:49:27.827

```
liComPapers.Attributes.Remove("class"); 
```

我们可以删除特定 li 标签的 CSS 属性

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-10T10:21:02.823

建议的方法

```
liComPapers.Attributes["class"] = liComPapers.Attributes["class"].Replace("NoDisplay", ""); 
```

将剪切另一个包含字符串`"NoDisplay"`并会导致错误的 css 类

例如

```
<li class="NoDisplay AnotherClass-NoDisplay"></li> 
```

变成

```
<li class=" AnotherClass-"></li> 
```

* * *

因此，更安全的解决方案是

```
liComPapers.Attributes["class"] = String.Join(" ", liComPapers.Attributes["class"]
                                        .Split(' ')
                                        .Where(x => x != "NoDisplay")
                                        .ToArray()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T23:30:59.463

尝试以下操作：

```
liComPapers.Attributes.Remove("class"); 
```

[AttributeCollection.Remove 方法](http://msdn.microsoft.com/en-us/library/system.web.ui.attributecollection.remove.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T23:31:08.667

您的代码似乎正确。检查此链接：[如何：为 ASP.NET 网页中的控件设置 HTML 属性](http://msdn.microsoft.com/en-us/library/7a9d6h4f%28v=vs.85%29.aspx)

你在使用回调/ajax 吗？也许你没有考虑到这一点..

尝试做一个只有一个控件的简单页面并放置一个按钮来执行回发，在按钮的单击事件（服务器端）上以与以前相同的方式分配属性。它应该有效。

# mongodb - 在 MongoDB Aggregate Framework 中将列合并为一个

> ID：13521259
> 
> 赞同：4
> 
> 时间：2012-11-22T23:20:58.370
> 
> 标签：mongodb, aggregation-framework

是否可以跨多列按值分组？

假设我每天存储人们之间的互动，并通过如下计数来跟踪 from's 和 to's。

```
db.collection = 
[
    { from : 'bob',   to : 'mary',   day : 1,  count : 2 },
    { from : 'bob',   to : 'steve',  day : 2,  count : 1 },
    { from : 'mary',  to : 'bob',    day : 1,  count : 3 },
    { from : 'mary',  to : 'steve',  day : 3,  count : 1 },
    { from : 'steve', to : 'bob',    day : 2,  count : 2 },
    { from : 'steve', to : 'mary',   day : 1,  count : 1 }
] 
```

这使我可以`'bob'`通过分组`from:`和求和来获得与任何人的所有交互`count:`。

现在我想获得用户的所有交互，所以基本上按`from:`和的值分组`to:`。本质上，总结`count:`每个名字，不管它是在`from:`还是`to:`

**[更新]**

所需的输出将是：

```
[
    { name : 'bob',   count : 8 },
    { name : 'mary',  count : 7 },
    { name : 'steve', count : 3 }
] 
```

最简单的方法是创建一个新列并在里面`names:`存储，然后，但这似乎很浪费。`from:``to:``$unwind`

有什么提示吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T11:37:43.467

> 是否可以跨多列按值分组？

是的，在 MongoDB 中可以跨不同列对值进行分组。

通过 MapReduce 非常简单。但是也可以使用聚合框架来做到这一点，即使您不存储参与者数组（如果您有两个参与者的名称数组，那么它只是一个 $unwind 和一个 $group - 很简单，我认为比 MapReduce 或您必须与当前模式一起使用的管道更优雅）。

与您的模式一起工作的管道：

```
db.collection.aggregate( [
{
    "$group" : {
        "_id" : "$from",
        "sum" : {
            "$sum" : "$count"
        },
        "tos" : {
            "$push" : {
                "to" : "$to",
                "count" : "$count"
            }
        }
    }
}
{ "$unwind" : "$tos" }
{
    "$project" : {
        "prev" : {
            "id" : "$_id",
            "sum" : "$sum"
        },
        "tos" : 1
    }
}
{
    "$group" : {
        "_id" : "$tos.to",
        "count" : {
            "$sum" : "$tos.count"
        },
        "prev" : {
            "$addToSet" : "$prev"
        }
    }
}
{ "$unwind" : "$prev" }
{
    "$group" : {
        "_id" : "1",
        "t" : {
            "$addToSet" : {
                "id" : "$_id",
                "c" : "$count"
            }
        },
        "f" : {
            "$addToSet" : {
                "id" : "$prev.id",
                "c" : "$prev.sum"
            }
        }
    }
}
{ "$unwind" : "$t" }
{ "$unwind" : "$f" }
{
    "$project" : {
        "name" : {
            "$cond" : [
                {
                    "$eq" : [
                        "$t.id",
                        "$f.id"
                    ]
                },
                "$t.id",
                "nobody"
            ]
        },
        "count" : {
            "$add" : [
                "$t.c",
                "$f.c"
            ]
        },
        "_id" : 0
    }
}
{ "$match" : { "name" : { "$ne" : "nobody" } } }
]); 
```

在您的示例输入中，输出为：

```
{
    "result" : [
        {
            "name" : "bob",
            "count" : 8
        },
        {
            "name" : "mary",
            "count" : 7
        },
        {
            "name" : "steve",
            "count" : 5
        }
    ],
    "ok" : 1
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:45:50.333

$unwind 可能很昂贵。这不是更容易查询吗？

```
db.collection = 
[
    { name : 'bob',   to : 'mary',   day : 1,  count : 2 },
    { name : 'mary',  from : 'bob',  day : 1,  count : 2 },
    { name : 'bob',   to : 'steve',  day : 2,  count : 1 },
    { name : 'bob',   from : 'steve',day : 2,  count : 1 },
    { name : 'mary',  to : 'bob',    day : 1,  count : 3 },
    { name : 'mary',  from : 'bob',  day : 1,  count : 3 },
    { name : 'mary',  to : 'steve',  day : 3,  count : 1 },
    { name : 'mary',  from : 'steve' day : 3,  count : 1 },
    { name : 'steve', to : 'bob',    day : 2,  count : 2 },
    { name : 'steve', from : 'bob',  day : 2,  count : 2 },
    { name : 'steve', to : 'mary',   day : 1,  count : 1 }
    { name : 'steve', from : 'mary', day : 1,  count : 1 }
] 
```

**[更新]**

使用您现有的结构，您可以使用 Map-Reduce 执行此操作，但这并不是真正的实时结果。总体上它会更慢，但可能比 AF 中的大规模 $unwind 操作更有效；

```
db.so.drop();
db.so.insert(
[
    { from: 'bob', to: 'mary', day: 1, count: 2 },
    { from: 'bob', to: 'steve', day: 2, count: 1 },
    { from: 'mary', to: 'bob', day: 1, count: 3 },
    { from: 'mary', to: 'steve', day: 3, count: 1 },
    { from: 'steve', to: 'bob', day: 2, count: 2 },
    { from: 'steve', to: 'mary', day: 1, count: 1 }
]);

db.runCommand(
    {
        "mapreduce": "so", // don't need the collection name here if it's above
        "map": function(){
            emit(this.from, {count: this.count});
            emit(this.to, {count: this.count});
        },
        "reduce": function (name, values) {
            var result = { count: 0 };
            values.forEach(function (v) {
                result.count += v.count;
            });

            return result;
        },
        query: {},
        out: { inline: 1 },
    }
); 
```

产生；

```
{
    "results" : [
            {
                "_id" : "bob",
                "value" : {
                    "count" : 8
                }
            },
            {
                "_id" : "mary",
                "value" : {
                    "count" : 7
                }
            },
            {
                "_id" : "steve",
                "value" : {
                    "count" : 5
                }
            }
    ],
    "timeMillis" : 1,
    "counts" : {
        "input" : 6,
        "emit" : 12,
        "reduce" : 3,
        "output" : 3
    },
        "ok" : 1
} 
```

# java - 静态变量Java的垃圾收集 - 内存不足

> ID：13521261
> 
> 赞同：2
> 
> 时间：2012-11-22T23:21:00.177
> 
> 标签：java, memory-leaks, garbage-collection

我们有一个应用程序可以完全缓存大量数据。**缓存作为静态映射**维护。

由于数据每天都会被一些批处理周期修改，所以我们在数据修改后刷新缓存。刷新缓存是通过创建新对象并将静态变量引用到这些新对象来完成的。因此，每天都会创建新对象并取消引用旧对象。

但问题是服务器堆内存不断增加，直到有一天它崩溃而没有内存异常。

我真的怀疑取消引用的对象是否被垃圾收集。

这是我的课。

```
Class CacheService {
 public static Map<String,Article> articleCache = null;

 public docache(){
     private Map<String,Article> tempArticleCache= new HashMap<String,Article>();

      //Caching stuff
       //finally
        articleCache = tempArticleCache; // i hope defreferencing takes place here.
 }

} 
```

每天都会调用函数 docache() 来更新缓存。任何人都可以帮助我在没有这个问题的情况下实现缓存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:26:30.687

**我怀疑旧地图仍然在某处被引用。**我建议您在下面尝试（不要每次都创建新地图，而是简单地清除现有地图并重新填充它）：

```
 public docache(){ 
           if(articleCache!= null){
                 //clear the elements of existing map
                 articleCache.clear();
           }else{
                 articleCache = new HashMap();
           }
           //do the map population
      } 
```

如果这也不起作用，那么在崩溃之前**拍摄内存快照并检查哪些确切的对象正在消耗您的堆。**这将更好地了解这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-19T17:40:22.770

尝试使用映射的 java.util.WeakHashMap。当您的对象不再被其他地方引用时，WeakHashMap 中的条目将被自动删除。

# c# - 当 mp3 列出艺术家时，TagLib Sharp 返回空白艺术家

> ID：13521262
> 
> 赞同：1
> 
> 时间：2012-11-22T23:21:17.003
> 
> 标签：c#, .net, id3, taglib-sharp

使用 TagLib Sharp 检索艺术家标签时，我遇到了一些问题。在我的 3000 多首歌曲中，有几百首为艺术家提供了一个空字符串。但是，在 Windows Media Player 和 Windows 资源管理器（在特约艺术家下）中，它们有一个列出的艺术家。以下

```
TagLib.File f = TagLib.File.Create(filepath);
Console.WriteLine(f.Tag.Performers.Length);
Console.WriteLine(f.Tag.AlbumArtists.Length); 
```

返回

```
0
0 
```

有人遇到过这个问题吗？我也尝试过使用 UltraID3，但艺术家的名字仍然是空白的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-25T21:35:41.463

[如果您使用诸如Mp3tag 之](http://mp3tag.de/en/index.html)类的专门标记程序查看这“几百首歌曲”中的一些，您应该会找到您在 WMP 或 Windows 资源管理器中看到的内容和“字段”。

在此[标签映射电子表格](https://docs.google.com/spreadsheet/ccc?key=0AoYQhIuWC-gcdHZwUDM3RGhneGMxSXpEX3pONXd6MWc&hl=en_US#gid=0)中，您将找到标签的比较。它显示了它们因各种原因而被命名的不同之处。也许您会在 WM/AlbumArtist 等 Windows Media 特定标签中找到您现有的信息？

# html - 使 display:table 填充水平空间而不设置宽度

> ID：13521265
> 
> 赞同：2
> 
> 时间：2012-11-22T23:21:34.883
> 
> 标签：html, css, floating

我在 2 个容器中有一些花车。容器需要包围浮动，但保持至少 100% 的高度，它们都是（容器>另一个容器>浮动）。

我已经尝试过最小高度，但显然最小高度需要一个具有精确高度的父级，而不是最小高度。所以它对两个容器都不起作用，只能在外部容器上工作。

在容器上显示 100% 高度的表格似乎可以满足我的要求，使它们至少 100% 高，但如果内容较长，则可拉伸。

问题：

Display:table 杀死容器的宽度。我不能将宽度设置为 100%，因为我需要稍后用边距定义它们的宽度。我需要它们表现得像普通的 div，占用所有可用的水平空间。

我的问题有解决方案吗？

[http://jsfiddle.net/Ka3TT/2/](http://jsfiddle.net/Ka3TT/2/)

我的代码：

```
<html>
    <body>
<div class="enclose2">
<div class="enclose1">
<div class="float">
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>
Float<br>

</div>
<div class="float">Float</div>
    <div class="float">Float</div>
</div>
</div>
</body>
</html>​ 
```

我的 CSS：

```
.float {
    width:100px;
    border:solid 1px black;
    float:left;
}
.enclose1, .enclose2 {
 height:100%;
display:table;
    background-color:#ccc;
}    
body, html {
    width:100%;
    height:100%;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:31:54.357

这取决于你以后的利润是多少，在没有这些信息的情况下，有点像在黑暗中拍摄，但你可以尝试使用类似的东西：

```
.float {
border:solid 1px black;
float:left;
height:100%;
width:29%;
margin-left:20px;
}
.enclose1, .enclose2 {
height:100%;
display:table;
background-color:#ccc;
width:100%;
}    
body, html {
width:100%;
height:100%;
} 
```

它使三列保持一致并将它们扩展到相同的高度，同时让 div 水平扩展以填满整个可用空间。我不确定你的边距到底是多少，如果封闭的 div 将在包装器内，或者完整的代码会是什么样子，所以你将不得不使用 enclose1 & 2 宽度和 .float 宽度和边距获得您正在寻找的合身。

注意：我可能也有点困惑，因为您说您希望它们占用所有可用的水平空间，但浮动上有固定的 100px 宽度，并且不想将包围设置为 100% 宽度 - 我已经完成了这个例子，但原理与固定的宽度和边距一起工作，就像这样：

```
.float {
width:33%;
border:solid 1px black;
float:left;
}
.enclose1 {
height:100%;
display:table;
background-color:#bbb;
width:800px;
margin:50px;
}   

body, html {
width:100%;
height:100%;
}
.enclose2 {
height:100%;
background-color:#ccc;
display:table;
} 
```

如果它只是你想要水平扩展的封闭类，浮动的固定宽度为 100px，你总是可以将整个东西放在一个包装器中，宽度为：100% 添加填充，然后将封闭设置为宽度 100%，这将起作用与将边距放置在 enclose 上的方式相同，但允许它水平扩展。

对不起，冗长的答案，但有点取决于最终目标是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T03:53:13.740

如果我得到你想要做的事情。我会将 a`display: table-cell`应用于浮动而不是浮动它。无论内容如何，​​这将使所有块的高度相同。

这是一个演示：http: [//jsfiddle.net/MadLittleMods/Ka3TT/4/](http://jsfiddle.net/MadLittleMods/Ka3TT/4/)

可能想更改类名...

```
.float {
    width:100px;
    border:solid 1px black;
    display: table-cell;
} 
```

# ruby-on-rails - 从 Ruby simple_form 菜单中获取选择项的值并计算结果

> ID：13521266
> 
> 赞同：0
> 
> 时间：2012-11-22T23:21:39.093
> 
> 标签：ruby-on-rails, ruby

我正在使用 simple_form 并且我有一个包含 3 个值的选择菜单，这些值会打印到索引中。我想知道获取用户设置的值的正确和最佳方法，然后计算当前有 3 种不同选择中的多少。

我是 ruby​​ 新手，所以这是一个很大的学习曲线，我们将不胜感激。

**在我的 _form.html.erb**

```
<%= f.input :menu, :as => :select, :collection => [ "Chocolate", "Cake", "Custard"] %> 
```

**我的 Index.html.erb**

```
<td><%= reply.menu %></td> 
```

**D b**

```
class CreateReplies < ActiveRecord::Migration
  def change
    create_table :replies do |t|
      t.string :name
      t.integer :menu
      t.boolean :rsvp, :default => false

      t.timestamps
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:56:28.190

1.  您正在寻求建立多对一的关系（对一个菜单的许多回复）
2.  将您的迁移更改为 t.integer :menu_id
3.  创建另一个名为 Menu 的模型，带有 id 和 ie 名称。

因此，请使用以下内容：

```
#  == Schema Information
#
#  Table name: replies
#
#  id          :integer          not null, primary key
#  menu_id     :integer
#  ...
#  created_at  :datetime         not null
#  updated_at  :datetime         not null

class Reply < ActiveRecord::Base
  attr_accessible :menu_id, etc.
  belongs_to :menu, :inverse_of => :replies # belongs_to because has the FK 
 ...
end

#  == Schema Information
#  
#  Table name: menus
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  created_at :datetime         not null
#  updated_at :datetime         not null

class Menu < ActiveRecord::Base
  attr_accessible :name
  has_many :replies, :inverse_of => :menu, :dependent => :nullify # the FK is in the reply
  accepts_nested_attributes_for :replies
end 
```

然后由于您使用的是 SimpleForm：

```
 <%= f.association :menu, :collection => Menu.all, :prompt => "- Select -"%> 
```

然后其他所有内容大部分都为您自动化（即，当您创建/更新回复时，它将获取发布的 menu_id 并相应地分配它。

如果我是你，我会深入研究[http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)。这是一个极好的资源。

更新：忘记了您的视图显示（如果您尝试显示您选择的菜单的名称 - 如果您尝试显示整个菜单，那是完全不同的场景）：

```
<td><%= @reply.menu.name %></td> 
```

# linux - 保存第一行 - Linux Shell 脚本

> ID：13521271
> 
> 赞同：1
> 
> 时间：2012-11-22T23:22:31.607
> 
> 标签：linux, bash, shell, scripting

我有一个文本文件，并试图在文件的第一行（或行）中提取数据，其中每个数据都保存为一个列表（因此每个点都保存在它自己的行上）在一个新文件中。

示例数据.txt：

```
Name  Col  Samp1  Samp2  Samp3  Samp4  Samp5  Samp6
Car1  Red   49.3   43.2   54.3   52.3   12.5   76.8
Car2  Blu   56.3   12.4   85.4   67.1   24.5   32.5
and so on.. 
```

我想要一个看起来像这样的新列表，并保存到一个名为 samps.txt 的新文件中：

```
Samp1
Samp2
Samp3
Samp4
Samp5
Samp6 
```

我对 shell 脚本非常陌生，可以使用任何人可以提供的所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:26:54.050

用于`read -a`将行读入[数组](http://tldp.org/LDP/abs/html/arrays.html)，然后用于`for`迭代数组元素。有关`help`更多详细信息，请参阅。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T23:29:06.493

这可以解决问题：

```
$ head -1 data.txt | grep -o 'Samp[0-9]*'

Samp1
Samp2
Samp3
Samp4
Samp5
Samp6 
```

**解释：**

1.  显示文件的第一行：`head -1 data.txt`

2.  `|`获取最后一个命令的输出并将其用作下一个命令的输入（称为管道）。

3.  打印给定的匹配项`regex`：`grep -o 'Samp[0-9]*'`

将`regex` `'Samp[0-9]*'`匹配`Samp`以任何数字开头的任何字符串。

要保存输出以`samps.txt`使用重定向运算符`>`：

`$ head -1 data.txt | grep -o 'Samp[0-9]*' > samps.txt`

这将适用于任何列标题，而不仅仅是匹配的列标题`'Samp[0-9]*'`：

`$ head -1 data.txt | grep -o '\w*' | tail -n +3 > samps.txt`

`grep -o '\w*'` 匹配单词并`tail -n +3`显示从第 3 行开始的所有行*（即不显示前两列标题）*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T23:36:10.040

将第一行读入变量

```
read -r FIRSTLINE < filename 
```

将字符串拆分为单词

```
WORDS=( $FIRSTLINE ) 
```

遍历单词并将它们输出到文件

```
for WORD in ${WORDS[@]}
do
  echo $WORD >> outputfilename
done 
```

在您的情况下，您想要删除前两列值。`${WORDS[@]:2`您可以在 for 语句中使用对数组进行切片。或者，您可以在将它们回显到文件之前测试 for 循环内的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T23:53:23.053

在处理带有字段的文本文件时，您可能会发现[awk是一个很有价值的工具：](http://www.grymoire.com/Unix/Awk.html)

```
awk 'NR==1 { for(i=3;i<=NF;i++) print $i }' file 
```

结果：

```
Samp1
Samp2
Samp3
Samp4
Samp5
Samp6 
```

解释：

```
NR is short for the number of rows.
NF is short for the number of fields in the row. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T00:57:17.963

只需使用 bash：

```
set -- $(head -1 data.txt)       # save the words in the first line as $1,$2,...
shift 2                          # discard the first two words
printf '%s\n' "$@" > samps.txt   # print each remaining word on its own line 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T07:26:37.897

我赞成 Ignacio Vazquez-Abrams 的回答，因为它是最好的选择，只使用 pure `bash`. 由于他没有给出一个完整的例子，这里有一个：

```
read -a samps < "myfile.txt"
printf "%s\n" "${samps[@]:2}" 
```

输出：

```
Samp1
Samp2
Samp3
Samp4
Samp5
Samp6 
```

# java - Java小程序：每次更改时捕获鼠标的坐标

> ID：13521276
> 
> 赞同：1
> 
> 时间：2012-11-22T23:23:17.350
> 
> 标签：java, applet, mouse

显然，我在学校的 Java 老师不知道 mouseMooved 和 mouseDragged 事件每隔几毫秒就会激活一次。我必须在进行活动时自己发现这一点。

我正在尝试制作一个可以在其中绘制内容的小程序。目前我可以用一个小的实心圆圈绘制。当我将鼠标移动得太快时，会出现大点，而不是线条。这是因为 mouseDragged 事件每隔几毫秒就会被调用一次。我想让这两个事件在每次鼠标坐标发生变化时都被调用，无论速度如何。

我不知道该怎么做。我也不知道正确的解决方案是否是在覆盖某种方法之后减少每次捕获之间的间隔。

每次鼠标更改时，如何绝对捕获鼠标位置的坐标？

编辑：

显然我不能让小程序在每次更改时都捕获坐标。我可以以某种方式减少捕获之间的时间（我可以提高捕获速度）吗？

# objective-c - Cocoa：发出 url 数据请求，运行本地 DOM-altering javascript，存储修改后的 html

> ID：13521281
> 
> 赞同：0
> 
> 时间：2012-11-22T23:23:59.423
> 
> 标签：objective-c, xcode, cocoa, nsurlconnection

假设我有一些来自网页的数据：

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:myurl]];
[request setHTTPMethod:@"GET"];
NSData* returnedData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:&error];
NSString* html = [[NSString alloc] initWithData:returnedData encoding:NSUTF8StringEncoding]; 
```

我还有一个本地 javascript 脚本，它对数据运行一些查询并修改 DOM。目前，为了实现这一点，我正在使用上面收到的 HTML，创建一个 webview 并将其加载到其中：

```
[NSString stringWithFormat:@"<script>%@</script>%@", myscript, html]; 
```

然后，我在 webview didFinishLoadForFrame 事件上调用

```
NSString* modifiedhtml = [sender stringByEvaluatingJavaScriptFromString: @"document.body.innerHTML"]] 
```

这给我留下了修改后的html，我可以随心所欲地使用它。然而 - 这看起来一点也不优雅，特别是因为只允许在主线程上创建 webviews，并且整个过程理想地会在后台线程中运行，而且，偶尔脚本会抛出错误并且 webview 加载事件不是调用所以我有越来越多的行专门用于处理此事件的超时。总而言之，这是一个丑陋的大烂摊子。

在一个理想的世界里，我会在第一遍应用这个 javascript 而不创建 webview。我一直在尝试各种事情，例如：

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:myurl]];
[request setHTTPMethod:@"GET"];
NSData* returnedData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:&error];
NSString* html = [[NSString alloc] initWithData:returnedData encoding:NSUTF8StringEncoding];
NSString* modifiedhtml = [request stringByEvaluatingJavaScriptFromString: myscript]]; 
```

其中脚本设置为返回页面但无济于事。

有什么建议可以比我现在更优雅、更有效地处理这个问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-23T16:18:36.860

为了避免使用 web 视图并假设您的 html 有`head`标签，您可以执行以下操作：

```
NSArray *tempArray = [html componentsSeparatedByString:@"<head>"];
NSString *modifiedHtml = [NSString stringWithFormat:@"%@<head>%@%@", [tempArray objectAtIndex:0], yourScriptString, [tempArray objectAtIndex:1]]; 
```

它会将您的脚本插入到现有`head`标签中。您应该使用通常的健全性检查来完成代码。

# php - 如何在页面完成渲染之前发送标题？

> ID：13521282
> 
> 赞同：0
> 
> 时间：2012-11-22T23:24:00.407
> 
> 标签：php, http-headers

> **可能重复：**
> [PHP 中的“警告：标头已发送”](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

在测试期间，我遇到了“标头已发送”的问题。但后来我想，这怎么可能发生？其中一个标头是 Content-Length，在整个 PHP 脚本完成之前它是未知的，它如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:25:26.020

在使用设置标题之前输出*任何内容*时，您会收到此消息`header()`。所以，确保你没有回显任何东西，没有 HTML，没有空格......在你设置标题之前什么都没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T23:26:51.507

您应该使用输出缓冲：

```
ob_start();
// write all your code here

header('Content-Length: ' . ob_get_length()); 
```

*到达脚本末尾时，输出缓冲会被隐式刷新*

我不确定，您可以尝试的一件事是停止`header()`通话，看看 PHP 是否会自动`Content-Length`为您设置。

也可以看看：[`ob_start()`](http://php.net/manual/en/function.ob-start.php)

**编辑**

如果你在谈论 PHP 是如何做到的，它并不总是写那个头文件。一旦输出缓冲区已满，它将在不设置显式长度标头的情况下刷新它。

另见： http: [//php.net/manual/en/outcontrol.configuration.php](http://php.net/manual/en/outcontrol.configuration.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T23:29:17.820

您必须先发送标头，然后再将任何其他内容发送到输出。一旦脚本产生任何内容 - 无论是页面的静态部分还是动态生成的输出 - PHP 发送标头后跟发送到输出的任何内容（除非您使用缓冲，在其他答案中提到）。

因此，您必须以文件开头`<?php`并确保它甚至不包含某些编辑器喜欢在文件内容正确之前放置的 BOM 字符。

# python - 很容易出错

> ID：13521286
> 
> 赞同：1
> 
> 时间：2012-11-22T23:24:44.573
> 
> 标签：python

英语不是我的强语，请体谅。

我想做的是制作一个由“~”符号组成的 3x3、4x4 或 5x5 矩阵，它将被“X”替换 3 次，

根据 x 和 y 输入给出的坐标，附加在 s=[]

例如，如果我有一个 3x3 矩阵

```
~~~
~~~
~~~ 
```

和坐标（0,0），

结果应该是：

```
X~~
~~~
~~~ 
```

尽管听起来很简单，但对我来说仍然不容易，即使我的代码对我来说似乎合乎逻辑，我也会遇到问题。

```
> IndexError: list index out of range 
```

这是我的代码：

```
a = []

n=0
while n<3 or n>5:
    n=int(raw_input("type matrix: "))
for i in range (n):
    for j in range (n):
        print "~",
    print "\n",
def zdruzi(a):
    for row in a:
        print " ".join(row)
zdruzi(a)

s = []
for i in range(3):
    x=int(raw_input("x: "))
    y=int(raw_input("y: "))
    s.append(int(x))
    s.append(int(y))
    a[int(x)][int(y)]="X"

    if (x<0) or (x>(n-1)):
        print "not good"
        break

    print a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:38:48.887

您尚未预先填充`a`. 阅读后`n`，执行以下操作：

```
a = [ [ '~' for _ in range(n) ] for _ in range(n) ] 
```

# python - 编码二进制数据，以便 \n 被转义

> ID：13521288
> 
> 赞同：1
> 
> 时间：2012-11-22T23:24:49.767
> 
> 标签：python, string, encoding, recursion

我正在尝试找出一种方法来编码/解码二进制数据，使换行符不是编码字符串的一部分。

这似乎是一个递归问题，但我似乎无法找到解决方案。

例如一个天真的实现：

```
>>> original = 'binary\ndata'

>>> encoded = original.replace('\n', '=n')
'binary=ndata'
>>> decoded = original.replace('=n', '\n')
'binary\ndata' 
```

如果`=n`原始字符串中已经存在 a 会发生什么？

```
>>> original = 'binary\ndata=n'

>>> encoded = original.replace('\n', '=n')
'binary=ndata=n'
>>> decoded = original.replace('=n', '\n')
'binary\ndata\n'  # wrong 
```

尝试逃避现有`=n`的，但如果已经有一个逃逸的会发生什么`=n`？

```
>>> original = '++nbinary\ndata=n'

>>> encoded = original.replace('=n', '++n').replace('\n', '=n')
'++nbinary=ndata++n' 
```

我怎样才能解决这个递归问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:44:40.883

解决方案

```
original = 'binary\ndata \\n'
# encoded = original.encode('string_escape')                   # escape many chr
encoded = original.replace('\\', '\\\\').replace('\n', '\\n')  # escape \n and \\
decoded = encoded.decode('string_escape') 
```

已验证

```
>>> print encoded
binary\ndata \\n
>>> print decoded
binary
data \n 
```

解决方案来自[How do I un-escape a backslash-escaped string in python?](https://stackoverflow.com/q/1885181/448474)

编辑：我也用你的临时经济编码写了它。原始的“string_escape”编解码器转义了反斜杠、撇号以及 chr(32) 以下和 chr(126) 以上的所有内容。两者的解码都是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T00:32:09.173

对可能包含“转义”字符的字符串进行编码的方法也是对转义字符进行转义。在 python 中，转义字符是一个反斜杠，但你可以使用任何你想要的。每次出现换行符或转义符时，您的成本是一个字符。

为避免让您感到困惑，我将使用正斜杠：

```
# original
>>> print "slashes / and /newline/\nhere"
slashes / and /newline/
here
# encoding
>>> print "slashes / and /newline/\nhere".replace("/", "//").replace("\n", "/n")
slashes // and //newline///nhere 
```

这种编码是明确的，因为所有*真正的*斜线都是双倍的；但它必须在一次通过中解码，因此您不能只使用两个连续调用`replace()`：

```
# decoding
>>> def decode(c):
    # Expand this into a real mapping if you have more substitutions
    return '\n' if c == '/n' else c[0]

>>> print "".join( decode(c) for c in re.findall(r"(/.|.)", 
                                         "slashes // and //newline///nhere"))
slashes / and /newline/
here 
```

请注意，输入中有一个实际值`/n`（以及换行符之前的另一个斜杠）：无论如何它都可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T02:02:04.193

如果您将一个包含 n 个符号（例如 ASCII）的字母表编码为一组较小的 m 个符号（例如，除了换行符之外的 ASCII），您必须允许编码的字符串比原始字符串长。

这样做的典型方法是将一个字符定义为“转义”字符；“转义”后面的字符表示编码字符。这种技术自 1940 年代以来一直用于电传打字机。这就是您在键盘上看到的“Esc”键的来源。

Python（和其他语言）已经在带有反斜杠字符的字符串中提供了这一点。换行符被编码为 '\n'（或 '\r\n'）。反斜杠会自行转义，因此文字字符串 '\r\n' 将被编码为 '\\r\\n'。

请注意，仅包含转义字符的字符串的编码长度将是原始字符串的两倍。如果这是不可接受的，您将不得不使用使用更大字母的编码来避免转义字符（可能比原始字符串长）或压缩它（也可能比原始字符串长）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T21:11:54.820

怎么样：

```
In [8]: import urllib

In [9]: original = 'binary\ndata'

In [10]: encoded = urllib.quote(original)

In [11]: encoded
Out[11]: 'binary%0Adata'

In [12]: urllib.unquote(encoded)
Out[12]: 'binary\ndata' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T23:34:04.543

如果您系统地对整个字符串进行编码，您最终不会转义它吗？说你所做的每个角色 chr(ord(char) + 1) 或类似的微不足道的事情？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T23:38:56.053

我对二进制数据没有很多经验，所以这可能完全关闭/效率低下/两者兼而有之，但这会解决您的问题吗？

```
In [40]: original = 'binary\ndata\nmorestuff'

In [41]: nlines = [index for index, i in enumerate(original) if i == '\n']

In [42]: encoded = original.replace('\n', '')

In [43]: encoded
Out[43]: 'binarydatamorestuff'

In [44]: decoded = list(encoded)

In [45]: map(lambda x: decoded.insert(x, '\n'), nlines)
Out[45]: [None, None]

In [46]: decoded = ''.join(decoded)

In [47]: decoded
Out[47]: 'binary\ndata\nmorestuff' 
```

同样，我确信有更好/更准确的方法 - 这只是从新手的角度来看。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-04T12:15:38.243

无[转义](https://github.com/kosarev/escapeless)编码专门设计用于从二进制数据中删除某些字符。在您仅删除`\n`角色的情况下，开销将小于 0.4%。

# c# - 在 .net 中创建不可变类型时，拥有公共字段是否有效？

> ID：13521289
> 
> 赞同：4
> 
> 时间：2012-11-22T23:24:59.367
> 
> 标签：c#, .net, immutability

因此，在设计不可变类时，它应该使用 get 属性吗？

```
public sealed class Person
{
    readonly string name;
    readonly int age;

    public Person(string name, int age)
    {
        this.name = name;
        this.age = age;
    }

    public string Name
    {
        get { return name; }
    }

    public int Age
    {
        get { return age; }
    }
} 
```

或者公开公共只读字段是否有效

```
public sealed class Person
{
    public readonly string Name;
    public readonly int Age;

    public Person(string name, int age)
    {
        Name = name;
        Age = age;
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T23:40:52.320

虽然这两个选项都会为您留下无法从外部更改字段的对象，但相同的准则适用于不可变对象，否则：

使用属性而不是公开你的字段仍然是一个优势；您没有检查任何输入值，但是，您的类型的未来版本可能会计算一些值，而不是直接从内部字段中读取它们。通过使用属性，您可以隐藏该实现细节，从而增加您对未来更改的灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:27:56.410

`public readonly`.net 中类字段的一个主要问题是，从外部代码的角度来看，`readonly`声明所做的唯一一件事就是用只读属性标记字段（我忘记了拼写和大小写）。尽管某些语言会在外部代码中尊重此类属性，但如果语言选择，则可以忽略此类属性。如果一个带有`public readonly`字段的对象暴露给用忽略只读属性的语言编写的代码，那么该代码可以像该属性不存在一样轻松地写入这些字段。

结构是另一回事。如果存储在字段中的结构`foo`具有自己的字段`boz`，则可以写入的代码可以写入`foo`，`foo.boz`而不能写入的代码`foo`不能写入`foo.boz`，*无论`boz`是公共的还是私有的，或者它是否打算是可变的或不可变*的。这是因为 if`foo1`是相同类型的结构，该语句`foo = foo1`不会`foo`引用与 相同的实例`foo1`，而是通过*改变所有公共和私有字段`foo`来匹配 中相应字段的值`foo1`*。

盒装值类型更糟糕；如果一个人有一个`Object`包含任何值类型的装箱实例，则该值可以用该类型的另一个替换。甚至像 . 这样的所谓不可变类型`Int32`，在装箱时也表现为可变引用类型。

因此，在使用结构类型时，应该通过将结构存储在精确结构类型的私有字段中来强制执行不变性。尝试使 struct 字段不可变可能会使该类型的实例更令人讨厌，但不会对 struct 实例的可变性或不变性产生实际影响。

# python - 列出 Web 服务 UpdateList 失败并显示“尝试使用已不存在的对象”

> ID：13521292
> 
> 赞同：4
> 
> 时间：2012-11-22T23:25:29.723
> 
> 标签：python, sharepoint-2010, suds

SharePoint 2010 列表 Web 服务 UpdateList 失败并显示“尝试使用已不复存在的对象”...但它确实存在。

我想更新现有字段的属性。出于演示目的，更新描述应该很容易。使用和扩展 haufe.sharepoint 0.1.9，我能够查询/更新项目和删除字段。我有信心在更新和删除期间观察到更改的列表正确地解决了问题。我相信该字段也得到了准确的处理，因为 a) 它可以被删除，并且 b) 如果我更改“名称”或“ID”，错误将变为“未找到具有该名称的字段”。

从 SUDS 转储 SOAP 消息，我可以显示不同的消息和结果。三个测试用例如下所示。首先是失败。第二个显示不匹配的名称会导致不同的错误。第三个显示如何按名称删除字段。

关于下一步去哪里的任何想法？除了能够删除同一字段之外，是否还有更新字段的特殊权限？虽然我是子网站所有者，但我不是 SharePoint 管理员或服务器管理员。因此，查看日志或安装自定义代码是困难的。这就是我使用 Python Web 服务方法的原因。我几乎完全被难住了。

谢谢，罗伯

**消息**：这应该可以更新“描述”字段，但不能。除了使用字段 ID 之外，我还尝试了 Name、DisplayName 和 StaticName，但均无济于事。MSFT 参考是：http: [//msdn.microsoft.com/en-us/library/lists.lists.updatelist%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/lists.lists.updatelist%28v=office.12%29.aspx)

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:ns0="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://schemas.microsoft.com/sharepoint/soap/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <ns1:UpdateList>
         <ns1:listName>D538A29D-6DD4-423A-9E7D-2697917BDA78</ns1:listName>
         <ns1:updateFields>
            <Fields>
               <Method ID="1">
                  <Field ID="08d8fb05-0de8-4e19-988c-e204ade07f47" Description="new desc"/>
               </Method>
            </Fields>
         </ns1:updateFields>
      </ns1:UpdateList>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

**故障**是：

```
<soap:Fault>
<faultcode>soap:Server</faultcode>
<faultstring>Exception of type 'Microsoft.SharePoint.SoapServer.SoapServerException' was thrown.</faultstring>
<detail>
<errorstring xmlns="http://schemas.microsoft.com/sharepoint/soap/">Attempted to use an object that has ceased to exist. (Exception from HRESULT: 0x80030102 (STG_E_REVERTED))</errorstring>
<errorcode xmlns="http://schemas.microsoft.com/sharepoint/soap/">0x80030102</errorcode>
</detail>
</soap:Fault> 
```

**消息**：期望找不到该字段并且没有。基本上，这证明了不正确的名称会导致不同的错误。

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:ns0="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://schemas.microsoft.com/sharepoint/soap/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <ns1:UpdateList>
         <ns1:listName>D538A29D-6DD4-423A-9E7D-2697917BDA78</ns1:listName>
         <ns1:updateFields>
            <Fields>
               <Method ID="1">
                  <Field ID="q08d8fb05-0de8-4e19-988c-e204ade07f47" Description="new desc"/>
               </Method>
            </Fields>
         </ns1:updateFields>
      </ns1:UpdateList>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

**消息**：能够像这样删除字段。这只是证明可以以某种方式成功地操纵该领域。

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:ns0="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://schemas.microsoft.com/sharepoint/soap/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <ns1:UpdateList>
         <ns1:listName>D538A29D-6DD4-423A-9E7D-2697917BDA78</ns1:listName>
         <ns1:deleteFields>
            <Fields>
               <Method ID="3">
                  <Field Name="myText"/>
               </Method>
            </Fields>
         </ns1:deleteFields>
      </ns1:UpdateList>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T02:28:40.690

# 这有效

更新和添加字段取得了进展！“脆弱”是用来描述 Lists.asmx Web 服务的一种方式。值得注意的是，字段属性是顺序相关的；类型需要放在第一位——猜猜微软的代码中可能有一个古怪的“if-tree”。此外，如果仅使用 DisplayName 可能会产生歧义，则需要 DisplayName 后跟 Name。

关键的调试技巧在类似的、添加了 GUI 的字段之后对以编程方式添加的字段进行建模。要发现正确的参数：

1.  通过 GUI 创建一个类似的字段
2.  将 suds 日志记录设置为调试级别。
3.  使用 haufe.sharepoint 的“service = Connector(url, username, password, list_id)”打开列表并检查返回的 SOAP 消息中的字段参数。
4.  使用这些属性来推动实验，记住某些字段是只读的，或者不适合 Microsoft 定义的外部使用。

以下是更新文本字段、更新计算公式字段、添加文本字段和添加计算字段的四个成功示例。希望这足以让我和其他人继续努力。注意： haufe.sharepoint 不支持这些附加方法或返回结果。所以......需要一些黑客攻击。

## 更新文本字段

类型必须是第一个属性。使用 DisplayName 后跟 Name 以避免与其他字段产生歧义。

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:ns0="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://schemas.microsoft.com/sharepoint/soap/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <ns1:UpdateList>
         <ns1:listName>D538A29D-6DD4-423A-9E7D-2697917BDA78</ns1:listName>
         <ns1:updateFields>
            <Fields>
               <Method ID="1">
                  <Field Type="Text" Name="myText" DisplayName="myText" Description="new desc"/>
               </Method>
            </Fields>
         </ns1:updateFields>
      </ns1:UpdateList>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

## 更新计算字段

类型必须是第一个属性。首先使用 DisplayName，然后使用 Name 以避免与其他字段产生歧义。

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:ns0="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://schemas.microsoft.com/sharepoint/soap/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <ns1:UpdateList>
         <ns1:listName>D538A29D-6DD4-423A-9E7D-2697917BDA78</ns1:listName>
         <ns1:updateFields>
            <Fields>
               <Method ID="1">
                  <Field Type="Calculated" DisplayName="myCalcAdd" Name="myCalcAdd" ResultType="Number" ReadOnly="TRUE">
                     <Formula>=Jan*0.5</Formula>
                     <FormulaDisplayNames>=Jan*0.5</FormulaDisplayNames>
                     <FieldRefs>
                        <FieldRef Name="Jan"/>
                     </FieldRefs>
                  </Field>
               </Method>
            </Fields>
         </ns1:updateFields>
      </ns1:UpdateList>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

## 添加文本字段

类型必须放在第一位。DisplayName vs Name 似乎是这两个属性中更重要的一个。

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:ns0="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://schemas.microsoft.com/sharepoint/soap/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <ns1:UpdateList>
         <ns1:listName>D538A29D-6DD4-423A-9E7D-2697917BDA78</ns1:listName>
         <ns1:newFields>
            <Fields>
               <Method ID="1">
                  <Field Type="Text" Name="myTextAdd" DisplayName="myTextAdd" Description="My first added field"/>
               </Method>
            </Fields>
         </ns1:newFields>
      </ns1:UpdateList>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

## 添加计算字段

类型必须放在第一位。DisplayName 是必需的，而 Name 不是。至少在以下情况下也需要 ResultType。

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:ns0="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://schemas.microsoft.com/sharepoint/soap/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <ns1:UpdateList>
         <ns1:listName>D538A29D-6DD4-423A-9E7D-2697917BDA78</ns1:listName>
         <ns1:newFields>
            <Fields>
               <Method ID="1" AddToView="">
                  <Field Type="Calculated" DisplayName="myCalcAdd" ResultType="Number">
                     <Formula>=Jan*0.5</Formula>
                     <FormulaDisplayNames>=Jan*0.5</FormulaDisplayNames>
                     <FieldRefs>
                        <FieldRef Name="Jan"/>
                     </FieldRefs>
                  </Field>
               </Method>
            </Fields>
         </ns1:newFields>
      </ns1:UpdateList>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

# .net - 试图获得 10 种色调范围内的颜色值

> ID：13521293
> 
> 赞同：-1
> 
> 时间：2012-11-22T23:25:32.247
> 
> 标签：.net, vb.net, visual-studio-2010, graphics, gdi+

在我的代码中，我获取给定坐标的像素颜色，然后检查该颜色是否与另一种颜色匹配。它效果很好，现在我希望能够检查它是否在 10 种左右的颜色或一定数量的色调范围内匹配。我不知道该怎么做。这是代码：

```
 Public Function GetPixelColor(ByVal x As Integer, ByVal y As Integer) As Color

    Dim sz As New Size(1, 1)
    Dim c As Color

    Using bmp As New Bitmap(1, 1)
        Using g As Graphics = Graphics.FromImage(bmp)

            g.CopyFromScreen(New Point(x, y), Point.Empty, sz)
            c = bmp.GetPixel(0, 0)

        End Using
    End Using

    Return c

End Function

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim fb As Color = GetPixelColor(TextBox1.Text, TextBox2.Text)
    If fb.ToArgb() = TextBox3.Text Then
        MessageBox.Show("Rock on dude")
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:34:02.733

我不知道您使用的语言，但听起来您需要计算颜色值之间差异的绝对值。

伪代码：

```
if( Abs(color1 - color2) > 10.0 )
  // do something 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:43:39.327

我会创建一个这样的函数并用两种颜色调用它：

```
Private Function CompareColors(ByVal Color1 As Color, ByVal Color2 As Color) As Boolean
    If Color1.ToArgb = Color2.ToArgb Then
        'perfect match
        Return True
    ElseIf Asc(Color1.R) > Asc(Color2.R) - 10 AndAlso Asc(Color1.R) < Asc(Color2.R) + 10 Then
        ' red is wrong
        Return False
    ElseIf Asc(Color1.G) > Asc(Color2.G) - 10 AndAlso Asc(Color1.G) < Asc(Color2.G) + 10 Then
        ' green is wrong
        Return False
    ElseIf Asc(Color1.B) > Asc(Color2.B) - 10 AndAlso Asc(Color1.B) < Asc(Color2.B) + 10 Then
        ' blue is wrong
        Return False
    ElseIf Asc(Color1.A) > Asc(Color2.A) - 10 AndAlso Asc(Color1.A) < Asc(Color2.A) + 10 Then
        ' alpha is wrong
        Return False
    Else
        Return True
    End If
End Function 
```

# feof - 我的循环复制了最后一个字符...（语言 C）（feof）（char by char）

> ID：13521298
> 
> 赞同：1
> 
> 时间：2012-11-22T23:26:07.957
> 
> 标签：feof

各位，

我正在尝试读取文本文件：

```
while(!feof(fp)){ 

    fscanf(fp, "%c", &c);

    printf("%c", c);

} 
```

但是......输出总是重复最后一个字符，我不知道为什么......：/

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T11:27:26.410

我也想知道，终于找到[答案](http://faq.cprogramming.com/cgi-bin/smartfaq.cgi?answer=1046476070&id=1043284351)了！

我无法更好地解释它，所以请查看链接

# c# - IFilter 更换

> ID：13521301
> 
> 赞同：7
> 
> 时间：2012-11-22T23:26:14.977
> 
> 标签：c#, .net, winapi, ifilter

我目前正在使用 IFilters 从各种文件（word、excel、tiff、pdf 等）中提取文本。我了解 IFilters 已在 Windows 8 中停止使用。是否有人对如何在不安装本机应用程序的情况下提取文本有任何建议？如果有任何用处，我正在使用 C# 和 .Net 4

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T16:20:39.107

`IFilter`没有停产。只有 Windows 索引服务停止使用 Windows Search 或 Microsoft Search Server。两者都继续使用 IFilter。

根据[这个文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd940431.aspx)，IFilter 的主要兼容性是它们支持`IPersistStream`接口。所有现代实现都应该避免 require `IPersistStorage`，因此它们不必自己访问磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:35:37.760

你能听从微软的建议吗？

来自[IFilter 的索引服务实现](http://msdn.microsoft.com/en-us/library/ms692582%28v=vs.85%29.aspx)：

> 从 Windows XP 开始不再支持索引服务，并且从 Windows 8 开始无法使用。相反，使用[Windows Search](http://msdn.microsoft.com/en-us/library/aa965362%28v=vs.85%29.aspx)进行客户端搜索，使用[Microsoft Search Server Express](http://go.microsoft.com/fwlink/p/?linkid=258445)进行服务器端搜索。

另请参阅[为 Windows 搜索开发过滤器处理程序](http://msdn.microsoft.com/en-us/library/dd940430%28v=vs.85%29.aspx)...

# php - 用户登录php后限制对登录页面的访问

> ID：13521302
> 
> 赞同：0
> 
> 时间：2012-11-22T23:26:22.980
> 
> 标签：php, redirect, login, restrict

我的移动网站上有一个登录页面，即 index.html，因此用户必须登录，这会将他们带到主站点，或者注册，这将让他们注册，然后登录并获得对主站点的访问权限。

有点像移动应用登录页面。

登录后如何阻止用户再次访问此页面？因为他们只需按手机上的后退按钮即可返回此页面。

理想情况下，我希望他们在登录后尝试访问此 index.php 页面以重定向回 home.php 页面。

在这里开始现场工作 - [http://m.cutecupcak.es](http://m.cutecupcak.es)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T23:31:26.390

使用会话或 cookie。

您将在登录时设置会话并检查您的 index.php 页面是否设置了会话。

会话的基本用法

```
<?php
session_start();

// Set the session
$_SESSION["loggedin"] = "yes";

// Check if the session exists or doesn't, in this case, it does.
isset($_SESSION['loggedin']){
echo "You're logged in";
}else{
echo "You're not logged in";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:11:55.723

以雅各布的回答为基础。

在登录时设置 cookie 或会话，并在注销时对其进行破坏。

在索引页面中。检查用户是否已登录，如果已登录，则将其重定向到成员页面。

此外，最好使用标头功能并禁用页面缓存，以便每次都针对服务器进行检查。

# haskell - Haskell，图形，将函数放入最一般的形式-> Eq

> ID：13521304
> 
> 赞同：0
> 
> 时间：2012-11-22T23:26:27.910
> 
> 标签：haskell

我想把 2 个函数 ( `color`and `check`) 放到最一般的形式 `Eq a => ...`中。但我不知道该怎么做。

这是一个非常简单的图：每个节点有 2 个邻居，任何相邻的节点必须有不同的颜色

```
color ::  [(Int, Int)] -> [(Int, Int)] -> Bool
color x [] = True
color a ((x,y):rest) =
    if check a x == check a y
    then False
    else color a rest

check :: [(Int, Int)] -> Int -> Int
check [] x = 999
check ((x,y):rest) p =
    if x == p
    then y
    else check rest p 
```

最后，`colors`给你`True`或`False`

```
Main> colors [('a',"purple"),('b',"green"),('c',"blue")] [('a','b'),('b','c'),('c','a')]
True

Main> colors [('a',"purple"),('b',"green"),('c',"purple")] [('a','b'),('b','c'),('c','a')]
False

Main> colors [('1',"purple"),('2',"green"),('3',"blue")] [('1','2'),('2','3'),('3','1')]
True

Main> colors [('1',"4"),('2',"5"),('3',"6")] [('1','2'),('2','3'),('3','1')]
True

Main> colors [('1',"4"),('2',"4"),('3',"5")] [('1','2'),('2','3'),('3','1')]
False 
```

欢迎任何帮助（+ 如果您可以将 x = 999 修复为 False）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T00:37:59.927

对于初学者，您不能将 概括`Int`为 an`Eq a`的原因是 999 硬编码在`check`. 如果你只是在其中留下一些随机值，你*必须*知道它的类型，所以你不能将函数推广到除此之外（好吧，在这种特殊情况下，你可以推广到`Eq a, Num a`，但不能更多）。

因此，答案是不要使用任意值，而是将返回值包装`check`成具有“失败”情况的类型，即`Maybe`.

重命名变量以遵循 Haskell 约定，并给函数一个更清晰的名称，我们得到：

```
canColor ::  Eq a => [(a, a)] -> [(a, a)] -> Bool
canColor _ [] = True
canColor xs ((x,y):rest) =
    if findNeighbour xs x == findNeighbour xs y
    then False
    else canColor xs rest

findNeighbour :: Eq a => [(a, a)] -> a -> Maybe a
findNeighbour [] _ = Nothing
findNeighbour ((x,y):rest) z =
    if x == z
    then Just y
    else findNeighbour rest z 
```

这里的想法是，如果它找不到任何东西，或者如果它找到 23（或它找到的任何东西） ，则`findNeighbour`返回。`Nothing``Just 23`

碰巧，`findNeighbour`已经定义了：它被称为`lookup`. 因此，您可以将代码重写为：

```
canColor ::  Eq a => [(a, a)] -> [(a, a)] -> Bool
canColor _ [] = True
canColor xs ((x,y):rest) =
    if lookup x xs == lookup y xs
    then False
    else canColor xs rest 
```

现在，我们注意到您基本上是针对列表中的所有项目检查谓词。有一个功能：`all`. 因此，我们可以将代码缩短为：

```
canColor ::  Eq a => [(a, a)] -> Bool
canColor xs = all (\(x, y) -> lookup x xs /= lookup y xs) xs 
```

# scala - 布尔谓词的较短形式

> ID：13521306
> 
> 赞同：3
> 
> 时间：2012-11-22T23:26:34.250
> 
> 标签：scala

> **可能重复：**
> [List.filter 中的下划线](https://stackoverflow.com/questions/7695270/underscore-in-list-filter)

这有效（按预期）：

```
List(true, false, true).filter(_ == true).foreach(println) 
```

但我不能这样写：

```
List(true, false, true).filter(_).foreach(println) 
```

为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T23:48:43.453

@sshaef 是对的，这是重复的。链接的答案*确实很*冗长，所以这是一个简单的答案：

您希望`list.filter(_)`扩展为类似 的`list.filter(x=>x)`内容，但 Scala 编译器将其视为`list.filter _`，这是完全不同的。结果是部分应用于`filter`您的列表，而不是使用身份功能过滤您的列表。当您在 REPL 中尝试时，这一点很明显：

```
scala> List(true, false, true).filter(_)
res0: (Boolean => Boolean) => List[Boolean] = <function1>

scala> List(true, false, true).filter _
res1: (Boolean => Boolean) => List[Boolean] = <function1>

scala> List(true, false, true).filter(x=>x)
res2: List[Boolean] = List(true, true)

scala> List(true, false, true).filter(identity)
res3: List[Boolean] = List(true, true)

scala> List(true, false, true).filterNot(!_)
res4: List[Boolean] = List(true, true) 
```

注意最后一种情况是如何工作的，因为我们`!`在 前面包含了运算符`_`，所以它知道您将它用作匿名参数，而不是使用它来部分应用函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T23:56:27.693

换个角度看，这取决于你的目标是什么，这同样简短：

```
for(a <- List(true, false, true) if a) println(a) 
```

# jquery - CSS 剪辑属性 - 是否有裁剪图像的替代方法？

> ID：13521319
> 
> 赞同：1
> 
> 时间：2012-11-22T23:28:19.473
> 
> 标签：jquery, css, gallery, thumbnails, crop

我有一个图片库，我希望将缩略图裁剪为 150 像素 x 150 像素。图像不是正方形的——它们是矩形并且大小不同，所以我不能将宽度和高度设置为 150 像素，因为图像都会被压扁和扭曲。

我想知道除了 CSS 剪辑属性之外，还有哪些其他方法可以对缩略图进行裁剪。是否有任何其他 CSS 解决方案或 jQuery 脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T23:32:27.463

您可以使用负边距来实现这一点。 [演示](http://jsfiddle.net/BPEhD/2/)

```
<p class="crop">
    <a href="http://templatica.com" title="Css Templates">
        <img src="http://blogs.sundaymercury.net/weirdscience/Animals_Cats_Small_cat_005241_.jpg" alt="css template" />
    </a>
</p> ​

.crop{
    float:left;
    margin:.5em 10px .5em 0;
    overflow:hidden; /* this is important */
    position:relative; /* this is important too */
    border:1px solid #ccc;
    width:300px;
    height:300px;
    }
.crop img{
    position:absolute;
    top:-200px;
    left:-200px;
    }​ 
```

本文提到了一些技术： [http ://cssglobe.com/3-easy-and-fast-css-techniques-for-faux-image/](http://cssglobe.com/3-easy-and-fast-css-techniques-for-faux-image/)

# php - jQuery EasyUI 选项卡 Ajax

> ID：13521327
> 
> 赞同：1
> 
> 时间：2012-11-22T23:29:14.650
> 
> 标签：php, jquery, cakephp, cakephp-1.3, jquery-easyui

我使用[jQuery EasyUI tabs](http://www.jeasyui.com/documentation/tabs.php)创建了一些选项卡。选项卡的内容由 Ajax 加载，因为我将`href`属性传递给我的选项卡，例如：

```
<div id="mytabs" class="easyui-tabs" style="width:500px;height:250px;">  
    <div title="Tab1" href="/app/controller/tab_content" style="padding:20px;">  
        tab1  
    </div>  
    <div title="Tab2" href="/app/controller/tab_content" style="padding:20px;">  
        tab2  
    </div>  
    <div title="Tab3" href="/app/controller/tab_content" style="padding:20px;">  
        tab3  
    </div>  
</div> 
```

正如您在上面看到的，每次选择一个选项卡时，都会`tab_content`调用包含要在选项卡面板中显示的内容的操作（/app/controller/tab_content 仅用于说明）。所有这些工作都很好，但我想要做的是在`tab_content.ctp`调用 url 时使一个变量可用于视图（而不将它作为 url 中的参数传递），例如：

```
/app/controller/tab_content/my_variable:test 
```

有什么方法可以在单击选项卡时将变量传递给我的视图而不将其传递给选项卡内容的 url？换句话说，我希望在单击选项卡时`my_variable`对视​​图可用。`tab_content.ctp`

注意：这是一个 cakephp 应用程序

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:26:08.637

你可能已经解决了这个问题，但我在 EasyUI 选项卡和远程内容方面遇到了类似的问题，我想我可以分享一下。我最终做的是

*   对于要传递的变量：将其声明为 a `window.variable`，即通过设置`window.my_variable = my_variable`
*   对于外部选项卡内容：通过外部文件中的 javascript 调用变量 - 由于 a`window.variable`具有全局范围，因此它也可用于动态加载的内容（请参阅[此](https://stackoverflow.com/a/11149036/1531565)答案）

希望这是有帮助的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T16:28:31.683

编辑`jquery.easyui.min.js`和搜索：

```
$.fn.panel.defaults 
```

改变方法：“get”到方法“post”

# sql-server - 在 CentOS java.lang.ClassNotFoundException 上运行 MSSQL JDBC 示例：com.microsoft.sqlserver.jdbc.SQLServerDriver

> ID：13521330
> 
> 赞同：1
> 
> 时间：2012-11-22T23:29:22.233
> 
> 标签：sql-server, jdbc, centos

我正在尝试运行[此处描述的 JDBC Microsoft SQL 连接示例](http://msdn.microsoft.com/en-us/library/windowsazure/gg715284.aspx)

```
import java.sql.*;

public class TestAzure {

   public static void main(String[] args) {

      try {
         Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
      }

      // Handle any errors that may have occurred.
      catch (Exception e) {
         e.printStackTrace();
      }
      finally {
         if (rs != null) try { rs.close(); } catch(Exception e) {}
         if (stmt != null) try { stmt.close(); } catch(Exception e) {}
         if (con != null) try { con.close(); } catch(Exception e) {}
      }
   }
} 
```

不幸的是，这失败了：

```
overlord@overlord-datanode1:~/Documents/hadoop/scripts/03_azure_sql$ java TestAzure -cp ./
java.lang.ClassNotFoundException: com.microsoft.sqlserver.jdbc.SQLServerDriver
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:169)
        at TestAzure.main(TestAzure.java:18) 
```

我试图在[此处的 JDBC 驱动程序描述中](http://msdn.microsoft.com/en-us/library/ms378526.aspx)找到解决方案。

我使用 -cp ./ 将类路径设置为本地目录。我也试过这个建议“看起来你需要将 jar 添加到类路径中 - 例如”java TestAzure -cp ./:./sqljdbc4.jar”

sqljdbc4.jar 在同一个文件夹中+我检查了这个类在里面：

```
overlord@overlord-datanode1:~/Documents/hadoop/scripts/03_azure_sql$ jar tf sqljdbc4.jar | grep SQLServerDriver
com/microsoft/sqlserver/jdbc/SQLServerDriver.class
com/microsoft/sqlserver/jdbc/SQLServerDriverPropertyInfo.class 
```

为什么找不到类？

# javascript - 是否可以使用 http://localhost 作为源加载 javascript 文件？

> ID：13521331
> 
> 赞同：1
> 
> 时间：2012-11-22T23:29:42.833
> 
> 标签：javascript, asp.net

是否可以加载`http://localhost`作为源的 JavaScript 文件？

前任：

`<script type="text/javascript" src="http://localhost:8081/signalr/hubs" language="javascript"></script>`

我在我的 asp.net Web 应用程序中使用这样的脚本。在我的计算机上本地运行时，它工作正常。

一旦我将 Web 应用程序放到实时服务器上并访问包含上述脚本的页面，该脚本的 GET 将返回“中止”状态。外部访问网站时是否可以使用此参考？

注意*：`http://localhost:8081/signalr/hubs`有一个名为 Hubs.js 的 JavaScript 脚本。从服务器上的浏览器导航到它会显示脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T23:31:00.443

`localhost`表示当前计算机。
如果浏览器与服务器位于同一台计算机上，则仅表示您的服务器。

# r - 结合时间序列对象和列表：包“termstrc”

> ID：13521334
> 
> 赞同：4
> 
> 时间：2012-11-22T23:30:11.287
> 
> 标签：r, list, sublist, quantitative-finance

R 包“termstrc”，专为术语结构估计而设计，是一个非常有用的工具，但它需要以一种特别尴尬的格式设置数据：列表中的列表。

**问题**：为了创建运行函数“dyncouponbonds”所需的重复子列表格式，在 R 外部或 R 内部准备和塑造数据的最佳方法是什么？

“dyncouponbonds”命令要求将数据设置在重复的子列表中，其中债券列表和这些债券的时间不变特征（我们称之为“债券列表”）附加了这些债券的一些时间 t 特征（价格和应计利息），并在时间 t+1 到 T 复制。

下面是一个时期的列表格式示例。“dyncouponbonds”命令要求在一个总括列表中为所有 T 个周期复制此格式。ISIN, MATURITYDATE, ISSUEDATE, COUPONRATE 在每个期间都是相同的。每个时期的价格、应计、现金流和今天都会有所不同。

```
R> str(govbonds$GERMANY)

List of 8
$ ISIN : chr [1:52] "DE0001141414" "DE0001137131" "DE0001141422" ...
$ MATURITYDATE:Class 'Date' num [1:52] 13924 13952 13980 14043 ...
$ ISSUEDATE :Class 'Date' num [1:52] 11913 13215 12153 13298 ...
$ COUPONRATE : num [1:52] 0.0425 0.03 0.03 0.0325 ...
$ PRICE : num [1:52] 100 99.9 99.8 99.8 ...
$ ACCRUED : num [1:52] 4.09 2.66 2.43 2.07 ...
$ CASHFLOWS :List of 3
..$ ISIN: chr [1:384] "DE0001141414" "DE0001137131" "DE0001141422" ...
..$ CF : num [1:384] 104 103 103 103 ...
..$ DATE:Class 'Date' num [1:384] 13924 13952 13980 14043 ...
$ TODAY :Class 'Date' num 13908 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T20:44:21.030

This a fairly advanced data manipulation question. R has many powerful data manipulation tools and you're not going to need to move away from R to prepare the (admittedly fairly obtuse) dyncouponbonds object. Indeed you actually shouldn't, because taking a structure from another language and then turning into dyncouponbonds will simply be more work.

The first thing I would make sure is that you are very familiar with the lapply function. You're going to be making plenty of use of it. You're going to be using it to create a list of couponbonds objects, which is what dyncouponbonds actually is. Creating couponbonds objects however is a little tougher, mainly because of the CASHFLOWS sublist which wants each cashflow associated with the bond's ISIN and with the date of the cashflow. For this you'll use lapply and some fairly advanced subscripting. The subset function will also come in handy.

This question also very much depends on where you will be getting the data from, and getting it out of Bloomberg is non-trivial, mainly because you will need to go back in history using the BDS function and "DES_CASH_FLOW" field for each bond to get its cashflows. I say history, because if you're using dyncouponbonds I'm assuming you will want to do historic yield curve analysis. You'll need to override the BDS function's "SETTLE_DT" field, to the value that you will have received for the bond using the BDP function and field "FIRST_SETTLE_DT", so that you get all the cashflows from the beginning of the bond's life (otherwise it'll only return from today, and that's no good for historic analysis). But I digress. If you're not using bloomberg I don't know where you'll get this data from.

You'll then need to get the static data for each bond, namely the maturity, the ISIN, and the coupon rate and the issue date. And you'll need historic price and accrued interest data. Again if using bloomberg, you'll use the BDP function for this with fields you'll see in the code, below, and the historic data function BDH which I have wrapped as bbdh. Assuming again that you're a bloomberg user, here is the code:

```
bbGetCountry <- function(cCode, up = FALSE) {
# this function is going to get all the data out of bloomberg that we need for a
# country, and update it if ncessary
    if (up == TRUE) startDate <- as.Date("2012-01-01") else startDate <- histStartDate 
    # first get all the curve members for history
    wdays <- wdaylist(startDate, Sys.Date()) # create the list of working days from startdate
    actives <- lapply(wdays, function(x) { 
        bds(conn, BBcurveIDs[cCode], "CURVE_MEMBERS", override_fields = "CURVE_DATE",
        override_values = format(x, "%Y%m%d"))
    })
    names(actives) <- wdays
    uniqueActives <- unique(unlist(actives)) # there will be puhlenty duplicates. Get rid of them
    # now get the unchanging bond data
    staticData <- bdp(conn, uniqueActives, bbStaticDataFields)
    # now get the cash flowdata
    cfData <- lapply(uniqueActives, function(x) {
        bds(conn, x, "DES_CASH_FLOW_ADJ", override_fields = "SETTLE_DT", 
            override_values = format(as.Date(staticData[x, "FIRST_SETTLE_DT"]), "%Y%m%d"))
    })
    names(cfData) <- uniqueActives
    # now for historic data
    historicData <- lapply(bbHistoricDataFields, function(x) bbdh(uniqueActives, flds = x, startDate = startDate))
    names(historicData) <- bbHistoricDataFields   # put the names in otherwise we get a numbered list
    allDates <- as.Date(index(historicData$LAST_PRICE)) # all the dates we will find settlement dates for for all bonds. No posix
    save(actives, file = paste("data/", cCode, "actives.dat", sep = ""))      #save all the files now
    save(staticData, file = paste("data/", cCode, "staticData.dat", sep = ""))
    save(cfData, file = paste("data/", cCode, "cfData.dat", sep = ""))
    save(historicData, file = paste("data/", cCode, "historicData.dat", sep = ""))
    #save(settleDates, file = paste("data/", cCode, "settleDates.dat", sep = ""))
    assign(paste(cCode, "data", sep = ""), list(actives = actives, staticData = staticData, cfData = cfData,    #
        historicData = historicData), pos = 1) 
```

}

the bbdh function I use above is wrapper around the Rbbg library's bdh function and looks like this:

```
bbdh <- function(secs, years = 1, flds = "last_price", startDate = NULL) {
        #this function gets secs over years from bloomberg daily data
            if(is.null(startDate)) startDate <- Sys.Date() - years * 365.25
            if(class(startDate) == "Date") stardDate <- format(startDate, "%Y%m%d") #convert date classes to bb string
            if(nchar(startDate) > 8) startDate <- format(as.Date(startDate), "%Y%m%d") # if we've been passed wrong format character string 
            rawd <- bdh(conn, secs, flds, startDate, always.display.tickers = TRUE, include.non.trading.days = TRUE,
                option_names = c("nonTradingDayFillOption", "nonTradingDayFillMethod"),
                option_values = c("NON_TRADING_WEEKDAYS", "PREVIOUS_VALUE"))
            rawd <- dcast(rawd, date ~ ticker) #put into columns
            colnames(rawd) <- sub(" .*", "", colnames(rawd)) #remove the govt, currncy bits from bb tickers
            return(xts(rawd[, -1], order.by = as.POSIXct(rawd[, 1])))
        } 
```

The country code comes from a structure which associates two letter names with bloomberg yield curve descriptions:

```
BBcurveIDs  <- list(PO = "YCGT0084 Index", #Portugal
                    DE = "YCGT0016 Index", 
                    FR = "YCGT0014 Index", 
                    SP = "YCGT0061 Index",
                    IT = "YCGT0040 Index",
                    AU = "YCGT0001 Index", #Australia
                    AS = "YCGT0063 Index", #Austria
                    JP = "YCGT0018 Index",
                    GB = "YCGT0022 Index",
                    HK = "YCGT0095 Index",
                    CA = "YCGT0007 Index",
                    CH = "YCGT0082 Index",
                    NO = "YCGT0078 Index",
                    SE = "YCGT0021 Index",
                    IR = "YCGT0062 Index",
                    BE = "YCGT0006 Index",
                    NE = "YCGT0020 index", 
                    ZA = "YCGT0090 Index",
                    PL = "YCGT0177 Index", #Poland
                    MX = "YCGT0251 Index") 
```

So bbGetCountry will create 4 different data structures, called actives, staticData, dynamicData, and historicData, all from the following bloomberg fields:

```
bbStaticDataFields <- c("ID_ISIN",
                      "ISSUER", 
                      "COUPON",
                      "CPN_FREQ",
                      "MATURITY",
                      "CALC_TYP_DES",                    # pricing calculation type 
                      "INFLATION_LINKED_INDICATOR",     # N or Y, in R returned as TRUE or FALSE
                      "ISSUE_DT",
                      "FIRST_SETTLE_DT",
                      "PX_METHOD",                      # PRC or YLD 
                      "PX_DIRTY_CLEAN",                 # market convention dirty or clean
                      "DAYS_TO_SETTLE",
                      "CALLABLE",
                      "MARKET_SECTOR_DES",
                      "INDUSTRY_SECTOR",
                      "INDUSTRY_GROUP",
                      "INDUSTRY_SUBGROUP")

bbDynamicDataFields <- c("IS_STILL_CALLABLE",
                        "RTG_MOODY",
                        "RTG_MOODY_WATCH",
                        "RTG_SP",
                        "RTG_SP_WATCH",
                        "RTG_FITCH",
                        "RTG_FITCH_WATCH")

bbHistoricDataFields <- c("PX_BID",
                          "PX_ASK",
                          #"PX_CLEAN_BID",
                          #"PX_CLEAN_ASK",
                          "PX_DIRTY_BID",
                          "PX_DIRTY_ASK",
                          #"ASSET_SWAP_SPD_BID",
                          #"ASSET_SWAP_SPD_ASK",
                          "LAST_PRICE",
                          #"SETTLE_DT",
                          "YLD_YTM_MID") 
```

Now you're ready to create couponbond objects, using all these data structures:

```
createCouponBonds <- function(cCode, dateString) {
    cdata <- get(paste(cCode, "data", sep = "")) # get the data set
    today <- as.Date(dateString)
    settleDate <- today
    daycount <- 0
    while(daycount < 3) {
        settleDate <- settleDate + 1
        if (!(weekdays(settleDate) %in% c("Saturday", "Sunday"))) daycount <- daycount + 1
    }
    goodbonds <- subset(cdata$staticData, COUPON != 0 & INFLATION_LINKED_INDICATOR == FALSE) # clean out zeros and tbills
    goodbonds <- goodbonds[rownames(goodbonds) %in% cdata$actives[[dateString]][, 1], ]
    stripnames <- sapply(strsplit(rownames(goodbonds), " "), function(x) x[1])
    pxbid <- cdata$historicData$PX_BID[today, stripnames]
    pxask <- cdata$historicData$PX_ASK[today, stripnames]
    pxdbid <- cdata$historicData$PX_DIRTY_BID[today, stripnames]
    pxdask <- cdata$historicData$PX_DIRTY_ASK[today, stripnames]
    price <- as.numeric((pxbid + pxask) / 2)
    accrued <- as.numeric(pxdbid - pxbid)
    cashflows <- lapply(rownames(goodbonds), function(x) {
        goodflows <- cdata$cfData[[x]][as.Date(cdata$cfData[[x]][, "Date"]) >= today, ]
        #gfstipnames <- sapply(strsplit(rownames(goodflows), " "), function(x) x[1]) dunno if I need this
        isin <- rep(cdata$staticData[x, "ID_ISIN"], nrow(goodflows))
        cf <- apply(goodflows[, 2:3], 1, sum) / 10000
        dt <- as.Date(goodflows[, 1])
        return(list(isin = isin, cf = cf, dt = dt))
    })
    isinvec <- unlist(lapply(cashflows, function(x) x$isin))
    cfvec <- as.numeric(unlist(lapply(cashflows, function(x) x$cf)))
    datevec <- unlist(lapply(cashflows, function(x) x$dt))
    govbonds <- list(ISIN = goodbonds$ID_ISIN, 
                     MATURITYDATE = as.Date(goodbonds$MATURITY),
                     ISSUEDATE = as.Date(goodbonds$FIRST_SETTLE_DT),
                     COUPONRATE = as.numeric(goodbonds$COUPON) / 100,
                     PRICE = price,
                     ACCRUED = accrued,
                     CASHFLOWS = list(ISIN = isinvec, CF = cfvec, DATE = as.Date(datevec)),
                     TODAY = settleDate)
    govbonds <- list(govbonds)
    names(govbonds) <- cCode
    class(govbonds) <- "couponbonds"
    return(govbonds)
} 
```

Take a close look at the cashflows <- lapply... function because this is where you'll create the sublist and is the core of the answer to your question, although of course, how this is done depends very much on how you have decided to build the intermediate data structures, and I have given you just one possibility. I realise that my answer is complex, but the problem is very complex. All the code you need is not in this answer either, a few helper functions are missing, but I am happy to provide them if you contact me. Certainly the skeleton of the core functions is all here, and actually, much of the problem is getting the data in the first place, and structuring it appropriately. You correctly surmise that some of the data is static for each bond, some of it is dynamic, and some of it is historical. So the dimensions of the intermediate datas structures are different for different pieces of the couponbonds objects. How you represent that is up to you, though I have used separate lists / data frames for each, linked via the bond IDs where necessary.

The function above will take a date string so you can do it for each of your historic data points, using the above-mentioned lapply, and hey "presto", dyncouponds:

```
spl <<- lapply(dodates, function(x) createCouponBonds("SP", x))
    names(spl) <<- lapply(spl, function(x) x$SP$TODAY)
    class(spl) <- "dyncouponbonds" 
```

There you go. You asked for it....

If you're not using bloomberg, your input data structures will be very different but, as I said starting out, get super familiar with lapply and sapply. OBviously there are many other ways this problem could be solved, but the above works for Bloomberg. If you understand this code, you'll surely know what you're doing for other data sources.

Finally please note that the [Rbbg](http://r.findata.org/) package from findata.org is used to interface to bloomberg.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T21:17:33.047

我的 2 美分，我一直在尝试用 new 来完成这项工作`Rblpapi`。我仍然有一些问题，`createCouponBonds`但我认为其他功能可以正确返回。不会解决整个问题，但至少可以解决部分问题。`BBcurveIDs, bbStaticDataFields, bbDynamicDataFields, bbHistoricDataFields`与上述相同。

```
bbGetCountry <- function(cCode, up = FALSE) {
  if (up == TRUE) startDate <- as.Date("2016-01-01") else startDate <- histStartDate 
  cal <- Calendar(weekdays=c("saturday", "sunday"))
  wdays <- as.list(bizseq(startDate, Sys.Date(), cal))
  actives <- lapply(wdays, function(x) { 
    bds(BBcurveIDs[cCode][[1]], "CURVE_MEMBERS", override = c(CURVE_DATE=format(x, "%Y%m%d")))
  })
  names(actives) <- wdays
  uniqueActives <- unique(unlist(actives))
  staticData <- bdp(uniqueActives, bbStaticDataFields)
  cfData <- lapply(uniqueActives, function(x) {
    bds(x, "DES_CASH_FLOW_ADJ", override = c(SETTLE_DT = format(as.Date(staticData[x, "FIRST_SETTLE_DT"]), "%Y%m%d")))
  })
  names(cfData) <- uniqueActives

  historicData <- lapply(bbHistoricDataFields, function(x) bbdh(uniqueActives, flds = x, startDate = startDate))
  names(historicData) <- bbHistoricDataFields
  allDates <- as.Date(index(historicData$LAST_PRICE))

  save(actives, file = paste("data_", cCode, "actives.dat", sep = ""))
  save(staticData, file = paste("data_", cCode, "staticData.dat", sep = ""))
  save(cfData, file = paste("data_", cCode, "cfData.dat", sep = ""))
  save(historicData, file = paste("data_", cCode, "historicData.dat", sep = ""))
  #save(settleDates, file = paste("data_", cCode, "settleDates.dat", sep = ""))
  assign(paste(cCode, "data", sep = ""), list(actives = actives, staticData = staticData, cfData = cfData,    #
                                              historicData = historicData), pos = 1)

} 
```

和 bbdh 功能：

```
bbdh <- function(secs, years = 1, flds = "last_price", startDate = NULL) {
  if(is.null(startDate)) startDate <- Sys.Date() - years * 365.25
  if(class(startDate) == "Date") stardDate <- format(startDate, "%Y%m%d")
  if(nchar(startDate) > 8) startDate <- format(as.Date(startDate), "%Y%m%d")
  rawd <- bdh(secs, flds, 
              startDate, 
              include.non.trading.days = FALSE,
              options = structure(c("PREVIOUS_VALUE", "NON_TRADING_WEEKDAYS"),
                                  names = c("nonTradingDayFillMethod","nonTradingDayFillOption")))
  rawd <- ldply(rawd, data.frame)
  colnames(rawd) <- c("sec", "date", "fld")
  rawd <- dcast(rawd, date ~ sec, value.var="fld")
  colnames(rawd) <- gsub(" Corp", "", colnames(rawd))
  return(xts(rawd[,-1], order.by=rawd[,1]))
} 
```

# r - R中是否有像bigmemory这样的包可以处理大型列表对象？

> ID：13521344
> 
> 赞同：3
> 
> 时间：2012-11-22T23:31:07.377
> 
> 标签：r, list, bigdata

我知道 R 包 bigmemory 在处理大型矩阵和数据帧方面效果很好。但是，我想知道是否有任何软件包或任何方法可以有效地处理大型列表。

具体来说，我创建了一个列表，其元素是向量。我有一个 for 循环，在每次迭代期间，多个值被附加到该列表中的选定元素（向量）。起初，它运行得很快，但是当迭代超过 10000 次时，它会逐渐变慢（一次迭代大约需要一秒钟）。我将经历大约 70000 到 80000 次迭代，之后列表会变得非常大。

所以我只是想知道在 bigmemory 包中是否有类似 big.list 的东西作为 big.matrix 可以加快整个过程。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T05:19:43.960

我不确定这是否是一个有用的答案，但您可以使用该`filehash`包以交互方式处理磁盘上的列表。

例如，这里有一些代码创建一个磁盘数据库，将一个预先分配的空列表分配给数据库，然后运行一个函数（获取当前时间）来填充数据库中的列表。

```
# how many items in the list?
n <- 100000
# setup database on disk
dbCreate("testDB") 
db <- dbInit("testDB")
# preallocate vector in database
db$time <- vector("list", length = n)
# run function using disk object
for(i in 1:n) db$time[[i]] <- Sys.time() 
```

在此过程中几乎没有使用 RAM，但是由于磁盘 I/O 持续不断，它**非常**慢（在我的某些测试中比在 RAM 中执行它慢两个数量级）。所以我不确定这种方法是否能很好地回答如何加快处理大对象的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-06T04:09:56.250

[`DSL`](https://cran.r-project.org/web/packages/DSL/index.html)包可能会有所帮助。该`DList`对象的作用类似于 R 列表的替代品。此外，它还提供了类似设施的分布式列表。

# paypal - PayPal 立即购买，获取付款信息

> ID：13521346
> 
> 赞同：0
> 
> 时间：2012-11-22T23:31:13.707
> 
> 标签：paypal

我有带有“PayPal 立即购买”按钮的网站。如何自动获取要付款的客户？

我需要获取价格、电子邮件和产品名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:09:41.203

您可以使用[即时付款通知](https://www.paypal.com/ipn)来接收有关您 PayPal 帐户的所有交易数据的实时 POST 通知。这将允许您自动执行诸如更新数据库、发送电子邮件通知、访问 3rd 方网络服务等任务。

# javascript - 如何用 jQuery 替换某个类中的 Div -content？

> ID：13521348
> 
> 赞同：0
> 
> 时间：2012-11-22T23:31:35.513
> 
> 标签：javascript, jquery, dom

```
<html>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script> 
        $("div.block").each(index){
            this.text('Fill this writing of divs with the classname "block"')} 
</script>

<body>
        <div>Not here</div> 
        <div class='block'>replace me -- not working, why?</div> 
        <div>Not here</div> 
        <div class='block'>replace me -- not working, why?</div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T23:32:22.037

您不需要使用每个 - 您可以在整个选择中调用 text 方法：

```
$("div.block").text('Fill this writing of divs with the classname "block"'); 
```

[顺便说一句，你上面的](http://api.jquery.com/each/)问题是你使用不正确

```
$("div.block").each(function(index, el){
    $(el).text('Fill this writing of divs with the classname "block"');
}); 
```

# asp.net-mvc - 将javascript参数传递给asp.net mvc中的部分视图

> ID：13521354
> 
> 赞同：2
> 
> 时间：2012-11-22T23:32:31.800
> 
> 标签：asp.net-mvc

假设我想要像下面的示例这样的部分视图

```
@Html.RenderAction("ListDocuments", "MultiFileAttachments", new { id = jsparameter }); 
```

在 jsparameter 中，我想作为 javascript 函数结果的参数传递。也许这不合逻辑，因为 javascript 在客户端上运行，但我怎样才能实现类似的功能？先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:41:06.627

如果您需要根据客户端的某些操作或操作确定的值来调用页面的一部分，那么您应该考虑使用 JavaScript（最好是[jQuery](http://jquery.com/)）和[Ajax](http://www.w3schools.com/ajax/default.asp)。

通过[jQuery-Ajax](http://api.jquery.com/jQuery.ajax/)，您可以轻松地通过 Contoler 调用 Partial 视图，并且由于它是一个常规的 HTTP 请求，您将能够传递您需要的所有参数。

使用代码：

```
@Html.RenderAction("ListDocuments", "MultiFileAttachments", new { id = jsparameter }); 
```

不可能，因为它在发送到客户端浏览器之前由服务器呈现。

# mysql - 使用sql结果指定要加入的表

> ID：13521355
> 
> 赞同：0
> 
> 时间：2012-11-22T23:32:41.817
> 
> 标签：mysql, sql, join, relational-database

有什么方法可以使用结果来指定要加入的表吗？

我想做类似的事情

```
SELECT id, some_number, ... FROM sometable NATURAL JOIN someothertable_$some_number; 
```

我知道在关系代数中没有这样的东西，所以我可能不会成功，我只是想问一下。

我不想使用任何 SQL 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:08:46.340

此处可运行示例：[http ://sqlfiddle.com/#!2/5e92c/36](http://sqlfiddle.com/#!2/5e92c/36)

为本示例设置表格的代码：

```
create table if not exists someTable 
(
  someTableId bigint not null auto_increment
  , tableId int not null
  , someOtherTableId bigint not null

  , primary key (someTableId)
  , index (tableId, someOtherTableId)
);

create table if not exists someOtherTable_$1
(
  someOtherTableId bigint not null auto_increment
  , data varchar(128) character set utf8

  , primary key (someOtherTableId)
);

create table if not exists someOtherTable_$2
(
  someOtherTableId bigint not null auto_increment
  , data varchar(128) character set utf8

  , primary key (someOtherTableId)
);

insert sometable (tableId, someOtherTableId) values (1, 1);
insert sometable (tableId, someOtherTableId) values (1, 2);
insert sometable (tableId, someOtherTableId) values (2, 2);
insert sometable (tableId, someOtherTableId) values (2, 3);

insert someothertable_$1(data) values ('table 1 row 1');
insert someothertable_$1(data) values ('table 1 row 2');
insert someothertable_$1(data) values ('table 1 row 3');

insert someothertable_$2(data) values ('table 1 row 1');
insert someothertable_$2(data) values ('table 1 row 2');
insert someothertable_$2(data) values ('table 1 row 3'); 
```

**静态解决方案**

如果您的表是固定的，这是一个解决方案（例如，在示例中，您只有 someOtherTable 1 和 2/您不需要在添加新表时自动更改代码）：

```
select st.someTableId
, coalesce(sot1.data, sot2.data)
from someTable st
left outer join someOtherTable_$1 sot1
on st.tableId = 1
and st.someOtherTableId = sot1.someOtherTableId
left outer join someOtherTable_$2 sot2
on st.tableId = 2
and st.someOtherTableId = sot2.someOtherTableId; 
```

**动态解决方案**

如果表的数量可能在运行时发生变化，您需要编写动态 SQL。当心：对于每一个连续的表，您都会受到性能影响。我不建议将其用于生产系统；但这是一个有趣的挑战。如果您可以描述您的工具集以及您希望实现的目标，我们也许可以为您提供一些关于更合适的前进方向的指示。

```
select group_concat(distinct ' sot' , cast(tableId as char) , '.data ') 
into @coalesceCols 
from someTable;

select group_concat(distinct ' left outer join someOtherTable_$', cast(tableId as char), ' sot', cast(tableId as char), ' on st.tableId = ', cast(tableId as char), ' and st.someOtherTableId = sot', cast(tableId as char), '.someOtherTableId ' separator '') 
into @tableJoins 
from someTable;

set @sql = concat('select someTableId, coalesce(', @coalesceCols ,') from someTable st', @tableJoins);

prepare stmt from @sql;
execute stmt; 
```

# javascript - 将 .css() 中的变量与 Jquery 一起使用

> ID：13521356
> 
> 赞同：2
> 
> 时间：2012-11-22T23:33:04.490
> 
> 标签：javascript, jquery

我遇到了一个我似乎无法解决的相当奇怪的问题。我试图在 .css() 中使用一个变量，但它不起作用。但是，如果我直接在 .css() 调用中输入“背景颜色”，它会这样做。是什么赋予了？

```
var css = that.data('css');
var targets = that.data('targets');
var value = that.val();
console.log(css + ' ' + targets + ' ' + value);
console.log(css === 'background-color');
    // returns true

$(targets).css({
    css: value
});
// Doesn't work!

$(targets).css({
    'background-color': value
});
// Works ok! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T23:43:35.613

您不能将变量用作对象文字中的键，请先创建对象，然后使用括号表示法添加属性

```
 var obj = {};
    obj[css] = value;
    $(targets).css(obj); 
```

或者干脆

```
 $(targets).css(css, value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T23:44:41.520

您不能将变量用作对象文字中的标识符。使用`{ css: value }`创建一个具有名为 属性的对象`css`，它不使用变量`css`。

创建一个对象并设置属性：

```
var o = {};
o[css] = value;
$(target).css(o); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T00:14:57.280

这也有效。尝试删除 .css() 中的花括号并使用逗号而不是冒号。

```
 var css = 'background-color';
    var targets = '#hellowhat';
    var value = '#000';

 $(""+ targets +"").css(
        css, value); 
```

# php - 有没有办法将整个范围传递给函数

> ID：13521357
> 
> 赞同：1
> 
> 时间：2012-11-22T23:33:19.770
> 
> 标签：php

在讨论这个问题的细节之前，我想指出我以前从未见过这样做，并且很想知道它是否真的可以做到，如果可以，如何去做。

我目前坐在模板加载器上，为了编写它，我选择稍微调整 HAML 文件格式并使用几个逻辑运算符扩展它 - 主要是循环。为了有效地做到这一点，我需要将参数列表传递给模板解析器......如果可能的话，我宁愿避免这种情况。在为替代方案集思广益时，这个想法出现了，也许，只是也许，可以引用调用函数的范围。

目前，我正在为文件调用模板解析器，如下所示。假设`test()`是一条路线。

```
function test() {
   $q = $UserModel->tether($userID)->fetchPermissions();
   Util::Templating()->parse("file.haml");
} 
```

我试图避免的是能够访问 $q 而不传递一个非常长的数组作为第二个参数。我最初的想法是，可能有一种方法`parse()`可以继承最初调用它的范围（此处，内部`test`）而不是拥有自己的范围。有没有办法解决这个问题，如果有，效率如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T23:47:47.427

还包括超全局变量：

```
$a = 'Hello World';
$b = range('A','Z');

$scopeVars = get_defined_vars();

var_dump($scopeVars);
test($scopeVars);

function test($scopeVars) {
    extract($scopeVars);

    echo '$a = '; var_dump($a);
    echo '$b = '; var_dump($b);
} 
```

**编辑**

就像一个实验，要消除超全局变量：

```
$a = 'Hello World';
$b = range('A','Z');

$scopeVars = get_user_defined_vars(get_defined_vars());

test($scopeVars);

function test($scopeVars) {
    extract($scopeVars);

    echo '$a = '; var_dump($a);
    echo '$b = '; var_dump($b);
}

function get_user_defined_vars($vars) {
    return array_diff_key(
        $vars, 
        array_flip(
            array('_SERVER','_GET', '_POST', '_REQUEST', '_FILES', '_COOKIE', '_ENV')
        )
    );
} 
```

但是删除超全局变量似乎确实让它变慢了一点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T23:43:39.710

所以我认为创建一个视图对象来设置它的属性而不是传递它可以工作。或者直接使用数组代替对象。例如：

```
function test() {
    $params = array();
    $params['var_1'] = 'qwe1';
    $params['var_2'] = 'qwe2';
    $params['var_3'] = 'qwe3';
    $params['var_4'] = 'qwe4';
    $params['q'] = $UserModel->tether($userID)->fetchPermissions();
    Util::Templating()->parse("file.haml", $params);
} 
```

# tomcat - Tomcat 无法启动应用程序并超时 - 日志中的最后一行只是单词“bad”

> ID：13521358
> 
> 赞同：1
> 
> 时间：2012-11-22T23:33:25.613
> 
> 标签：tomcat, grails

使用 grails run-war 时，我的 war 文件会构建，但服务器不会启动。

这是我正在使用的命令： `run-war -XX:MaxPermSize=256m -XX:PermSize=512m --stacktrace`

这是控制台输出中的错误：

```
| Building WAR file.....
| Done creating WAR target/SommelierServerTest-0.1.war
| Running Grails application
| Error Tomcat failed to start the app in 3000 seconds (see output in /Users/rentsls57/Uptown Network/UptownServer/branches/philBranch/target/tomcat-out.txt) (N
OTE: Stack trace has been filtered. Use --verbose to see entire trace.)
java.lang.RuntimeException: Tomcat failed to start the app in 3000 seconds (see output in /Users/rentsls57/Uptown Network/UptownServer/branches/philBranch/targe
t/tomcat-out.txt)
    at org.grails.plugins.tomcat.IsolatedWarTomcatServer.doStart(IsolatedWarTomcatServer.groovy:127)
    at org.grails.plugins.tomcat.TomcatServer.start(TomcatServer.groovy:102)
    at _GrailsRun_groovy$_run_closure5_closure12.doCall(_GrailsRun_groovy:176)
    at _GrailsRun_groovy$_run_closure5.doCall(_GrailsRun_groovy:153)
    at _GrailsRun_groovy.runWar(_GrailsRun_groovy:130)
    at _GrailsRun_groovy$_run_closure3.doCall(_GrailsRun_groovy:81)
    at RunWar$_run_closure1.doCall(RunWar.groovy:49)
| Error Server failed to start: java.lang.RuntimeException: Tomcat failed to start the app in 3000 seconds (see output in /Users/rentsls57/Uptown Network/Uptown
Server/branches/philBranch/target/tomcat-out.txt) 
```

以下是 tomcat-out.txt 日志文件中的一些相关行：

```
2012-11-22 17:07:08,394 [localhost-startStop-1] DEBUG context.GrailsContextLoader  - [GrailsContextLoader] Loading context. Creating parent application context
2012-11-22 17:07:12,944 [localhost-startStop-1] DEBUG xri.LocalXriResolver  - Initializing Discovery object...
2012-11-22 17:07:13,099 [localhost-startStop-1] DEBUG security.Init  - SignatureAlgorithm.register(http://www.w3.org/2001/04/xmldsig-more#hmac-ripemd160, org.apache.xml.security.algorithms.implementations.IntegrityHmac$IntegrityHmacRIPEMD160)    
2012-11-22 17:07:16,326 [localhost-startStop-1] DEBUG spring.BeanBuilder  - Configuring controller recommendation.RecommendationController
2012-11-22 17:07:17,243 [localhost-startStop-1] DEBUG searchable.SearchableGrailsPlugin  - Not found: Searchable
2012-11-22 17:07:17,243 [localhost-startStop-1] DEBUG searchable.SearchableGrailsPlugin  - Trying to load config from 'SearchableConfiguration.class'
2012-11-22 17:07:17,247 [localhost-startStop-1] DEBUG searchable.SearchableGrailsPlugin  - Not found: SearchableConfiguration
2012-11-22 17:07:17,248 [localhost-startStop-1] DEBUG searchable.SearchableGrailsPlugin  - Defining Compass and Compass::GPS beans
2012-11-22 17:07:17,291 [localhost-startStop-1] DEBUG searchable.SearchableGrailsPlugin  - Done defining Compass and Compass::GPS beans
2012-11-22 17:07:17,341 [localhost-startStop-1] INFO  ShiroGrailsPlugin  - Registering realm: grails.plugins.nimble.core.OpenIDRealm
2012-11-22 17:07:17,357 [localhost-startStop-1] INFO  ShiroGrailsPlugin  - Registering realm: grails.plugins.nimble.core.FacebookRealm
2012-11-22 17:07:17,357 [localhost-startStop-1] INFO  ShiroGrailsPlugin  - Registering realm: grails.plugins.nimble.core.LocalizedRealm
2012-11-22 17:07:17,892 [localhost-startStop-1] INFO  cache.CacheBeanPostProcessor  - postProcessBeanDefinitionRegistry start
2012-11-22 17:07:17,895 [localhost-startStop-1] DEBUG cache.CacheBeanPostProcessor  - updated Root bean: class [grails.plugin.cache.GrailsAnnotationCacheOperationSource]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null
2012-11-22 17:07:17,896 [localhost-startStop-1] INFO  cache.CacheBeanPostProcessor  - postProcessBeanFactory
2012-11-22 17:07:20,841 [localhost-startStop-1] WARN  util.GrailsUtil  - [WARNING] Property [first] of domain class grails.plugins.nimble.core.LevelPermission has type [java.lang.Object] and doesn't support constraint [minSize]. This constraint will not be checked during validation.
2012-11-22 17:07:21,251 [localhost-startStop-1] WARN  config.ConfigurationFactory  - No configuration found. Configuring ehcache from ehcache-failsafe.xml  found in the classpath: jar:file:/Users/rentsls57/.grails/2.1.1/projects/SommelierServerTest/war/WEB-INF/lib/ehcache-core-2.4.6.jar!/ehcache-failsafe.xml
2012-11-22 17:07:21,251 [localhost-startStop-1] DEBUG config.ConfigurationFactory  - Configuring ehcache from URL: jar:file:/Users/rentsls57/.grails/2.1.1/projects/SommelierServerTest/war/WEB-INF/lib/ehcache-core-2.4.6.jar!/ehcache-failsafe.xml
2012-11-22 17:07:21,251 [localhost-startStop-1] DEBUG config.ConfigurationFactory  - Configuring ehcache from InputStream
2012-11-22 17:07:21,292 [localhost-startStop-1] DEBUG config.BeanHandler  - Ignoring ehcache attribute xmlns:xsi
2012-11-22 17:07:21,292 [localhost-startStop-1] DEBUG config.BeanHandler  - Ignoring ehcache attribute xsi:noNamespaceSchemaLocation
2012-11-22 17:07:21,292 [localhost-startStop-1] DEBUG config.DiskStoreConfiguration  - Disk Store Path: /var/folders/v0/hb46n1754md6nyjh96p47tq40000gn/T/
2012-11-22 17:07:21,331 [localhost-startStop-1] DEBUG util.PropertyUtil  - propertiesString is null.
2012-11-22 17:07:21,333 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - No CacheManagerEventListenerFactory class specified. Skipping...
2012-11-22 17:07:21,369 [localhost-startStop-1] DEBUG ehcache.Cache  - No BootstrapCacheLoaderFactory class specified. Skipping...
2012-11-22 17:07:21,369 [localhost-startStop-1] DEBUG ehcache.Cache  - CacheWriter factory not configured. Skipping...
2012-11-22 17:07:21,370 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - No CacheExceptionHandlerFactory class specified. Skipping...
2012-11-22 17:07:21,586 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [grails.plugins.nimble.core.Permission]; using defaults.
2012-11-22 17:07:21,595 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file grails.plugins.nimble.core.Permission.data
2012-11-22 17:07:21,609 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: grails.plugins.nimble.core.Permission
2012-11-22 17:07:21,610 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'grails.plugins.nimble.core.Permission'.
2012-11-22 17:07:21,610 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: grails.plugins.nimble.core.Permission
2012-11-22 17:07:21,891 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [grails.plugins.nimble.core.Group]; using defaults.
2012-11-22 17:07:21,891 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file grails.plugins.nimble.core.Group.data
2012-11-22 17:07:21,900 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: grails.plugins.nimble.core.Group
2012-11-22 17:07:21,900 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'grails.plugins.nimble.core.Group'.
2012-11-22 17:07:21,900 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: grails.plugins.nimble.core.Group
2012-11-22 17:07:22,053 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [grails.plugins.nimble.core.ProfileBase]; using defaults.
2012-11-22 17:07:22,053 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file grails.plugins.nimble.core.ProfileBase.data
2012-11-22 17:07:22,054 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: grails.plugins.nimble.core.ProfileBase
2012-11-22 17:07:22,054 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'grails.plugins.nimble.core.ProfileBase'.
2012-11-22 17:07:22,054 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: grails.plugins.nimble.core.ProfileBase
2012-11-22 17:07:22,739 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [grails.plugins.nimble.core.Role]; using defaults.
2012-11-22 17:07:22,739 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file grails.plugins.nimble.core.Role.data
2012-11-22 17:07:22,750 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: grails.plugins.nimble.core.Role
2012-11-22 17:07:22,750 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'grails.plugins.nimble.core.Role'.
2012-11-22 17:07:22,750 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: grails.plugins.nimble.core.Role
2012-11-22 17:07:22,920 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [grails.plugins.nimble.core.UserBase]; using defaults.
2012-11-22 17:07:22,920 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file grails.plugins.nimble.core.UserBase.data
2012-11-22 17:07:22,921 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: grails.plugins.nimble.core.UserBase
2012-11-22 17:07:22,921 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'grails.plugins.nimble.core.UserBase'.
2012-11-22 17:07:22,921 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: grails.plugins.nimble.core.UserBase
2012-11-22 17:07:23,112 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [grails.plugins.nimble.core.Group.permissions]; using defaults.
2012-11-22 17:07:23,112 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file grails.plugins.nimble.core.Group.permissions.data
2012-11-22 17:07:23,112 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: grails.plugins.nimble.core.Group.permissions
2012-11-22 17:07:23,113 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'grails.plugins.nimble.core.Group.permissions'.
2012-11-22 17:07:23,113 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: grails.plugins.nimble.core.Group.permissions
2012-11-22 17:07:23,115 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [grails.plugins.nimble.core.UserBase.groups]; using defaults.
2012-11-22 17:07:23,115 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file grails.plugins.nimble.core.UserBase.groups.data
2012-11-22 17:07:23,116 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: grails.plugins.nimble.core.UserBase.groups
2012-11-22 17:07:23,116 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'grails.plugins.nimble.core.UserBase.groups'.
2012-11-22 17:07:23,116 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: grails.plugins.nimble.core.UserBase.groups
2012-11-22 17:07:23,117 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [grails.plugins.nimble.core.UserBase.permissions]; using defaults.
2012-11-22 17:07:23,118 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file grails.plugins.nimble.core.UserBase.permissions.data
2012-11-22 17:07:23,118 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: grails.plugins.nimble.core.UserBase.permissions
2012-11-22 17:07:23,118 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'grails.plugins.nimble.core.UserBase.permissions'.
2012-11-22 17:07:23,118 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: grails.plugins.nimble.core.UserBase.permissions
2012-11-22 17:07:23,123 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [grails.plugins.nimble.core.Role.groups]; using defaults.
2012-11-22 17:07:23,124 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file grails.plugins.nimble.core.Role.groups.data
2012-11-22 17:07:23,124 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: grails.plugins.nimble.core.Role.groups
2012-11-22 17:07:23,124 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'grails.plugins.nimble.core.Role.groups'.
2012-11-22 17:07:23,124 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: grails.plugins.nimble.core.Role.groups
2012-11-22 17:07:23,125 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [grails.plugins.nimble.core.Role.users]; using defaults.
2012-11-22 17:07:23,126 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file grails.plugins.nimble.core.Role.users.data
2012-11-22 17:07:23,136 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: grails.plugins.nimble.core.Role.users
2012-11-22 17:07:23,136 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'grails.plugins.nimble.core.Role.users'.
2012-11-22 17:07:23,136 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: grails.plugins.nimble.core.Role.users
2012-11-22 17:07:23,137 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [grails.plugins.nimble.core.Group.roles]; using defaults.
2012-11-22 17:07:23,137 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file grails.plugins.nimble.core.Group.roles.data
2012-11-22 17:07:23,146 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: grails.plugins.nimble.core.Group.roles
2012-11-22 17:07:23,146 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'grails.plugins.nimble.core.Group.roles'.
2012-11-22 17:07:23,146 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: grails.plugins.nimble.core.Group.roles
2012-11-22 17:07:23,148 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [grails.plugins.nimble.core.Group.users]; using defaults.
2012-11-22 17:07:23,148 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file grails.plugins.nimble.core.Group.users.data
2012-11-22 17:07:23,149 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: grails.plugins.nimble.core.Group.users
2012-11-22 17:07:23,149 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'grails.plugins.nimble.core.Group.users'.
2012-11-22 17:07:23,149 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: grails.plugins.nimble.core.Group.users
2012-11-22 17:07:23,150 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [grails.plugins.nimble.core.UserBase.roles]; using defaults.
2012-11-22 17:07:23,150 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file grails.plugins.nimble.core.UserBase.roles.data
2012-11-22 17:07:23,156 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: grails.plugins.nimble.core.UserBase.roles
2012-11-22 17:07:23,156 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'grails.plugins.nimble.core.UserBase.roles'.
2012-11-22 17:07:23,156 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: grails.plugins.nimble.core.UserBase.roles
2012-11-22 17:07:23,159 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [grails.plugins.nimble.core.Role.permissions]; using defaults.
2012-11-22 17:07:23,160 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file grails.plugins.nimble.core.Role.permissions.data
2012-11-22 17:07:23,163 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: grails.plugins.nimble.core.Role.permissions
2012-11-22 17:07:23,163 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'grails.plugins.nimble.core.Role.permissions'.
2012-11-22 17:07:23,163 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: grails.plugins.nimble.core.Role.permissions
2012-11-22 17:07:42,568 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [org.hibernate.cache.UpdateTimestampsCache]; using defaults.
2012-11-22 17:07:42,569 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file org.hibernate.cache.UpdateTimestampsCache.data
2012-11-22 17:07:42,570 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: org.hibernate.cache.UpdateTimestampsCache
2012-11-22 17:07:42,570 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'org.hibernate.cache.UpdateTimestampsCache'.
2012-11-22 17:07:42,570 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: org.hibernate.cache.UpdateTimestampsCache
2012-11-22 17:07:42,573 [localhost-startStop-1] WARN  hibernate.AbstractEhcacheRegionFactory  - Couldn't find a specific ehcache configuration for cache named [org.hibernate.cache.StandardQueryCache]; using defaults.
2012-11-22 17:07:42,573 [localhost-startStop-1] DEBUG factories.DiskOverflowStorageFactory  - Deleting data file org.hibernate.cache.StandardQueryCache.data
2012-11-22 17:07:42,574 [localhost-startStop-1] DEBUG ehcache.Cache  - Initialised cache: org.hibernate.cache.StandardQueryCache
2012-11-22 17:07:42,574 [localhost-startStop-1] DEBUG config.ConfigurationHelper  - CacheDecoratorFactory not configured for defaultCache. Skipping for 'org.hibernate.cache.StandardQueryCache'.
2012-11-22 17:07:42,574 [localhost-startStop-1] DEBUG hibernate.AbstractEhcacheRegionFactory  - started EHCache region: org.hibernate.cache.StandardQueryCache
2012-11-22 17:07:42,883 [localhost-startStop-1] DEBUG support.PluginAwareResourceBundleMessageSource  - Could not resolve any resources for plugin logging-2.1.1
java.io.FileNotFoundException: ServletContext resource [/WEB-INF/plugins/logging-2.1.1/grails-app/i18n/] cannot be resolved to URL because it does not exist
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
2012-11-22 17:07:42,885 [localhost-startStop-1] DEBUG support.PluginAwareResourceBundleMessageSource  - Could not resolve any resources for plugin core-2.1.1
java.io.FileNotFoundException: ServletContext resource [/WEB-INF/plugins/core-2.1.1/grails-app/i18n/] cannot be resolved to URL because it does not exist
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
2012-11-22 17:07:42,887 [localhost-startStop-1] DEBUG support.PluginAwareResourceBundleMessageSource  - Could not resolve any resources for plugin i18n-2.1.1
java.io.FileNotFoundException: ServletContext resource [/WEB-INF/plugins/i18n-2.1.1/grails-app/i18n/] cannot be resolved to URL because it does not exist
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
2012-11-22 17:07:42,889 [localhost-startStop-1] DEBUG support.PluginAwareResourceBundleMessageSource  - Could not resolve any resources for plugin codecs-2.1.1
java.io.FileNotFoundException: ServletContext resource [/WEB-INF/plugins/codecs-2.1.1/grails-app/i18n/] cannot be resolved to URL because it does not exist
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
2012-11-22 17:07:42,891 [localhost-startStop-1] DEBUG support.PluginAwareResourceBundleMessageSource  - Could not resolve any resources for plugin groovy-pages-2.1.1
java.io.FileNotFoundException: ServletContext resource [/WEB-INF/plugins/groovy-pages-2.1.1/grails-app/i18n/] cannot be resolved to URL because it does not exist
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
2012-11-22 17:07:42,892 [localhost-startStop-1] DEBUG support.PluginAwareResourceBundleMessageSource  - Could not resolve any resources for plugin url-mappings-2.1.1
java.io.FileNotFoundException: ServletContext resource [/WEB-INF/plugins/url-mappings-2.1.1/grails-app/i18n/] cannot be resolved to URL because it does not exist
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
2012-11-22 17:07:42,894 [localhost-startStop-1] DEBUG support.PluginAwareResourceBundleMessageSource  - Could not resolve any resources for plugin controllers-2.1.1
java.io.FileNotFoundException: ServletContext resource [/WEB-INF/plugins/controllers-2.1.1/grails-app/i18n/] cannot be resolved to URL because it does not exist
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
2012-11-22 17:07:42,916 [localhost-startStop-1] DEBUG support.PluginAwareResourceBundleMessageSource  - Could not resolve any resources for plugin filters-2.1.1
java.io.FileNotFoundException: ServletContext resource [/WEB-INF/plugins/filters-2.1.1/grails-app/i18n/] cannot be resolved to URL because it does not exist
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
2012-11-22 17:07:42,917 [localhost-startStop-1] DEBUG support.PluginAwareResourceBundleMessageSource  - Could not resolve any resources for plugin mime-types-2.1.1
java.io.FileNotFoundException: ServletContext resource [/WEB-INF/plugins/mime-types-2.1.1/grails-app/i18n/] cannot be resolved to URL because it does not exist
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
2012-11-22 17:07:42,918 [localhost-startStop-1] DEBUG support.PluginAwareResourceBundleMessageSource  - Could not resolve any resources for plugin domain-class-2.1.1
java.io.FileNotFoundException: ServletContext resource [/WEB-INF/plugins/domain-class-2.1.1/grails-app/i18n/] cannot be resolved to URL because it does not exist
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
2012-11-22 17:07:42,919 [localhost-startStop-1] DEBUG support.PluginAwareResourceBundleMessageSource  - Could not resolve any resources for plugin validation-2.1.1
java.io.FileNotFoundException: ServletContext resource [/WEB-INF/plugins/validation-2.1.1/grails-app/i18n/] cannot be resolved to URL because it does not exist
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
2012-11-22 17:07:46,459 [localhost-startStop-1] DEBUG association.Association  - Creating association, type: HMAC-SHA256 handle:  expires: Thu Nov 22 17:07:46 EST 2012
2012-11-22 17:07:46,491 [localhost-startStop-1] DEBUG xri.LocalXriResolver  - Initializing Discovery object...
2012-11-22 17:07:46,492 [localhost-startStop-1] DEBUG params.DefaultHttpParams  - Set parameter http.protocol.max-redirects = 0
2012-11-22 17:07:46,492 [localhost-startStop-1] DEBUG params.DefaultHttpParams  - Set parameter http.protocol.allow-circular-redirects = false
2012-11-22 17:07:46,492 [localhost-startStop-1] DEBUG params.DefaultHttpParams  - Set parameter http.socket.timeout = 10000
2012-11-22 17:07:46,492 [localhost-startStop-1] DEBUG params.DefaultHttpParams  - Set parameter http.connection.timeout = 10000
2012-11-22 17:07:46,492 [localhost-startStop-1] DEBUG params.DefaultHttpParams  - Set parameter http.protocol.cookie-policy = ignoreCookies
2012-11-22 17:07:46,492 [localhost-startStop-1] DEBUG association.Association  - Generated SHA256 MAC key: javax.crypto.spec.SecretKeySpec@fa77fcef
2012-11-22 17:07:46,492 [localhost-startStop-1] DEBUG association.Association  - Creating association, type: HMAC-SHA256 handle:  expires: Thu Nov 22 17:07:46 EST 2012
bad 
```

我不知道为什么 i18n 资源不存在，但这会导致服务器挂起吗？

最后一行只是“坏”。这意味着什么？当然，不是“好”。

我在 Mac 上使用带有 STS 2.9.2 的 Eclipse、Grails 2.1.1、Java 1.6，并使用 Groovy 1.8 进行编译。

提示：我刚刚从 Grails 1.3.6 升级到 2.1.1。该应用程序使用 grails run-app 运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:41:32.583

我的 DataSource.groovy 文件中有一个拼写错误，导致无法读取 dataSource{} 块，因此我的数据库的 url、driverClassName 等从未设置。嗬！

问题解决了。

# c++ - 从 std::map 中的向量获取数据

> ID：13521367
> 
> 赞同：1
> 
> 时间：2012-11-22T23:34:28.150
> 
> 标签：c++, opengl

我正在尝试编写一个从 .3ds 文件渲染模型的类，但我遇到了一个非常烦人的问题。我有一个从整数到双精度向量的映射

```
map<int, vector<double> > 
```

我用来映射具有不同材质属性的顶点。之后，我尝试遍历所有键并让 OpenGL 像这样渲染它们：

```
glPushMatrix();
glPushClientAttrib(GL_CLIENT_ALL_ATTRIB_BITS);
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);

for(map<int, vector<double> >::iterator iter = myMaterialVertices.begin(); iter != myMaterialVertices.end(); iter++)
{
    vector<double> test = iter->second;
    glVertexPointer(3, GL_DOUBLE, 0, test.data());
    //get the texture coords here
    glDrawArrays(GL_TRIANGLES, 0, iter->second.size() / 3);
}

glDisableClientState(GL_VERTEX_ARRAY);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);
glPopClientAttrib();
glPopMatrix(); 
```

不幸的是，每次调用 glDrawArrays 时都会出现错误，告诉我我正在尝试读取地址 0。我将此解释为存在空指针问题，因此我输入了测试向量以确保数据存在. 向量被正确加载但仍然给出相同的错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:20:00.460

由于在评论中提出了建议，因此我将提出答案。呼吁

```
glEnableClientState(GL_TEXTURE_COORD_ARRAY); 
```

导致 OpenGL 期望一个指向纹理坐标数组的指针。当没有指定时，它会抛出一个空指针异常（尝试读取 0x00000000）。这里的教训是不要启用客户端状态，除非您计划定义适当的指针。

# java - 有效地绘制大量粒子

> ID：13521368
> 
> 赞同：6
> 
> 时间：2012-11-22T23:34:34.547
> 
> 标签：java, performance, algorithm, graphics2d

我写了一个粒子系统小程序；目前我正在创建并分别绘制每个粒子。（这里是代码）

```
BufferedImage backbuffer;
Graphics2D g2d;

public void init(){
    backbuffer = new BufferedImage(WIDTH,HEIGHT,BufferedImage.TYPE_INT_RGB);
    g2d = backbuffer.createGraphics();
    setSize(WIDTH, HEIGHT);

    //creates the particles
    for (int i = 0; i < AMOUNTPARTICLES; i++) {
        prtl[i] = new particleO();
        prtl[i].setX(rand.nextInt(STARTX));
        prtl[i].setY(rand.nextInt(STARTY));
        prtl[i].setVel(rand.nextInt(MAXSPEED)+1);
        prtl[i].setFAngle(Math.toRadians(rand.nextInt(ANGLESPREAD)));

        }

    //other code
}

    public void update(Graphics g) {        

    g2d.setTransform(identity);

    //set background
    g2d.setPaint(BGCOLOUR);
    g2d.fillRect(0,0,getSize().width,getSize().height);
    drawp();
    paint(g);           
    }

public void drawp() {

    for (int n = 0; n < AMOUNTPARTICLES; n++) {

    if (prtl[n].getAlive()==true){
            g2d.setTransform(identity);
            g2d.translate(prtl[n].getX(), prtl[n].getY());
            g2d.setColor(prtl[n].getColor());

            g2d.fill(prtl[n].getShape());

            }
    }

} 
```

它的性能还不错，我可以用 20,000 个粒子获得约 40FPS（尽管我有一台不错的笔记本电脑）。但是在我添加了碰撞检测（见下文）之后，这个数字骤降到不到 2000 个，

```
public void particleUpdate(){
 for (int i = 0; i < AMOUNTPARTICLES; i++) {
        //other update code (posx, posy, angle etc etc)

          for (int j = 0; j < AMOUNTPARTICLES; j++) {

                if (i!=j && prtl[j].getAlive()==true){

                     if(hasCollided(i, j)){
                        prtl[i].setcolor(Color.BLACK);
                        prtl[j].setcolor(Color.BLACK);
     }
            }
  }

public boolean hasCollided(int prt1, int prt2){

        double dx = prtl[prt1].getX() - prtl[prt2].getX();
        double dy = prtl[prt1].getY() - prtl[prt2].getY();
        int edges =  prtl[prt1].getRadius() + prtl[prt2].getRadius();

        double distance = Math.sqrt( (dx*dx) + (dy*dy) );
        return (distance <= edges);

    } 
```

我已经搜索了很多将粒子绘制到屏幕上的更好方法，但这些示例要么让我感到困惑，要么不适用。

我正在做大量的计算（太多）。但是我想不出另一种方法，欢迎提出建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T23:44:09.163

首先，添加诸如碰撞检测之类的东西总是会占用大量内存。但是，让我们看看您的碰撞检测算法

```
public void particleUpdate(){
 for (int i = 0; i < AMOUNTPARTICLES; i++) {
        //other update code (posx, posy, angle etc etc)

          for (int j = 0; j < AMOUNTPARTICLES; j++) {

                if (i!=j && prtl[j].getAlive()==true){

                     if(hasCollided(i, j)){
                        prtl[i].setcolor(Color.BLACK);
                        prtl[j].setcolor(Color.BLACK);
                }
            }
  } 
```

假设只有 2 个粒子，1 和 2。您将检查，顺序为 1,1 1,2 2,1 2,2

事实是，在这种情况下，您只需要检查 1 与 2。如果 1 击中 2，则 2 也将击中 1。因此，更改您之前测试过的 for 循环跳过，以及相同的数字。

```
public void particleUpdate(){
 for (int i = 0; i < AMOUNTPARTICLES; i++) {
        //other update code (posx, posy, angle etc etc)

          for (int j = i+1; j < AMOUNTPARTICLES; j++) { 
```

我注意到的另一件事是您进行了`sqrt`操作，但只是为了与看起来像静态数字的内容进行比较。如果你去掉它，并将它与平方数进行比较，你会得到很大的改进，尤其是在你做了很多事情的时候。

```
 double distance_squared = ( (dx*dx) + (dy*dy) );
    return (distance <= edges*edges); 
```

继续寻找这样的改进。然后您可能会仔细查看其他选项，例如使用不同的类、线程等，这些都可能会改进系统。但请确保首先优化代码。这是我会尝试的其他事情的列表，大致按顺序排列。

1.  检查粒子 i 是否还活着，甚至在 i 进入视野后计算任何其他内容之前。
2.  快速通过对，如果它们接近，甚至会费心仔细检查。一种简单的方法是先检测它们是否在 x 和 y 维度内，然后再进行 sqrt 操作。总是先做最便宜的测试，然后再做复杂的测试。
3.  查看您的代码，看看您是否真的使用了所有计算出的值，或者您是否能够以某种方式减少操作次数。
4.  也许您可以使用粗笔划定期对图像进行聚类，然后仅细化通过初始聚类一段时间的对象，然后执行广泛的聚类算法。
5.  你可以线程碰撞检测。但是，如果您要这样做，您应该只执行线程检查以查看是否有碰撞，并且在所有这些线程完成后，更新视图上的对象。
6.  研究替代架构，这可能会加快一些速度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T23:44:12.767

绘画是一个复杂的过程，绘画请求可能由于多种原因被触发，操作系统可能想要更新窗口，重绘管理器可能想要重绘，程序员可能想要重绘。

在过程中更新粒子`paint`是个坏主意。您要做的是在单独缓冲区的单独线程中更新粒子。准备好后，请求负责绘制缓冲区的组件执行重新绘制，将缓冲区的新副本传递给重新绘制（您不想在开始更新到屏幕的缓冲区上进行绘制，您最终会弄脏油漆）。

很难从您的代码中分辨出来，但看起来您正在使用`java.awt.Applet`，就个人而言，我会升级到`javax.swing.JApplet`.

我会把这幅画移到`java.swing.JPanel`. Swing 组件提供双重缓冲（以及其他缓冲策略）。这个面板的唯一工作是在粒子引擎有一个新帧时在屏幕上绘制一个缓冲区。

粒子引擎负责更新所有粒子并将这些结果绘制到后备缓冲区（`BufferedImage`），然后将其交给面板，面板将制作副本并安排更新。

Swing 不是线程安全的。也就是说，您不应该从除 Event Dispatching Thread 之外的任何线程对 UI 进行更改。为此，您可能希望通读[Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)中的并发，以了解将屏幕外缓冲区重新同步到客户端的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T23:48:21.417

您正在检查与所有粒子碰撞的所有粒子，这是一个相当大的要求，大约为 n^2（2,000 个粒子意味着每帧有 4,000,000 个组合）。

问题不是java，而是算法。必须有更好的选择，但首先可以减少比较；如果您有最大速度 S 并且您的世界中的时间以 T 递增，则使用 T*S 您可以获得可以与您正在考虑的粒子碰撞的粒子的最大距离 D。将搜索减少到距离等于或小于该距离的那些粒子。也许将搜索限制在以粒子为中心且高度/宽度为 D 的正方形中会更容易（这将包括一些太远的粒子，但会使检查更容易）。

此外，在您的代码中，您正在检查 P1 与 P2 和 P2 与 P1 的冲突，这是相同的，这是您可以轻松避免的冗余。

# php - 在 Javascript 中使用 PHP？缩小 URL

> ID：13521371
> 
> 赞同：1
> 
> 时间：2012-11-22T23:34:50.697
> 
> 标签：php, javascript

我做了一个 url 收缩器，我目前有一个 Soundcloud Javascript API，可以输出歌曲的 url 链接。我试图用我的收缩器收缩它。收缩器使用以下方法工作：

```
<?php echo $bitly->shorten('http://google.com'); ?> //Equals google.com in short url format 
```

我试图在其中实现它的 javascript 代码是这样的：我会继续为您提供我已经尝试过的操作，但没有成功。

在我编辑之前：

```
 container.find('span.player-actions').html(
                '<a href="' + track.user.permalink_url + '" target="_blank">Soundcloud</a> | <a href="' + track.permalink_url + '/download" target="_blank">Download</a>'
        ); 
```

在我尝试之后：

```
container.find('span.player-actions').html(
                '<a href="' +  <?php echo $bitly->shorten('track.user.permalink_url'); ?> + '" target="_blank">Soundcloud</a> | <a href="' + track.permalink_url + '/download" target="_blank">Download</a>'
        ); 
```

任何建议，我都愿意接受。并且很想完成这项工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T23:57:19.000

这已经解释过了，但如果你是这个概念的新手，有一个简化的解释。

`<?php`在您的页面发送到用户的浏览器*之前*，您的代码中的标签会在服务器上进行处理。实际上浏览器永远不会收到这些标签 - 它们被服务器上的 PHP 输出替换，然后将生成的页面发送给用户。

由于某些错误，有时 PHP 代码会进入用户的浏览器，但它的行为与任何其他非标准标签一样 - 内容之间的内容`<?php`对`?>`访问者是不可见的。

另一方面，JavaScript 在用户浏览器中运行（在我们的例子中）PHP 已经输出的内容。当您使用 JavaScript 更改页面时，它不会被发送回服务器 - 实际上，服务器完全不知道这一点，因此它无法执行您的 JavaScript 输出的 PHP 代码。

为了获得类似的结果，您需要从 JavaScript 代码发送 AJAX 请求。它基本上是由您的 JavaScript 发起的另一个“页面请求”，但发生在后台，PHP 输出不会替换您当前的页面，而是到达您的 JavaScript 代码。这样，您的 JavaScript 输出的是 PHP*输出*而不是 PHP*代码*，这就是它可能的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T23:46:30.227

您不能在通过 javascript 生成的字符串上调用 PHP，因为 PHP 是服务器端并在客户端 JavaScript 之前执行。

如果要缩短此字符串，则必须对将返回缩小 url 的 php 页面进行 ajax 调用。

# javascript - JavaScript，“this”引用，从锚标记调用对象函数时

> ID：13521374
> 
> 赞同：2
> 
> 时间：2012-11-22T23:35:00.977
> 
> 标签：javascript, this

这是我的 JS 的简化版本：

```
var myObject = function() {
    return {
        functionOne: function() {
            //some other logic here
        },
        functionTwo: function() {
            var self = this;
            //some logic here
            //then call functionOne
            self.functionOne();
        }
    };
} 
```

然后我在我的html正文中有这个：

```
<a href="#" onclick="myObject.functionTwo()">click me</a> 
```

为什么我在单击链接时收到错误*Uncaught TypeError: Object [some url] has no method 'functionOne' ？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:37:08.010

您`myObject`是一个需要**调用**才能获取该对象的**函数**

 **```
<a href="#" onclick="myObject().functionTwo()">click me</a> 
```

为什么不直接定义`myObject`为一个对象：

```
var myObject = {
    functionOne: function() {
        //some other logic here
    },
    functionTwo: function() {
        var self = this;
        //some logic here
        //then call functionOne
        self.functionOne();
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T23:41:55.533

您看到的错误并不反映您显示的示例代码。

也就是说，以您使用代码的方式，您应该能够将其简化为：

```
var myObject = {
    functionOne: function() {
    },
    functionTwo: function() {
        this.functionOne();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T23:40:54.193

您需要的是立即执行您的功能。除此之外，您对**self**变量的声明使我认为​​您正在尝试创建一个闭包，以便您可以从 functionTwo 访问 functionOne。如果是这种情况，那么我认为以下是您所追求的：

```
var myObject = (function() {

    function func1( ) {
    }

    function func2( ) {
        func1();
    }
    return {
        functionOne: func1,
        functionTwo: func2
    };
}()); 
```**

# php - 来自多个数组的部分组合

> ID：13521375
> 
> 赞同：1
> 
> 时间：2012-11-22T23:35:04.767
> 
> 标签：php, arrays, combinations

我在计算存储在数组中的某些数据的“部分”组合（不是排列）的数量时遇到了一些麻烦。为简单起见，数据看起来像：

```
$test = array(
        array('1:1' => 'Option 1:1', '1:2' => 'Option 1:2', '1:3' => 'Option 1:3'),
        array('2:1' => 'Option 2:1', '2:2' => 'Option 2:2', '2:3' => 'Option 2:3'),
        array('3:1' => 'Option 3:1', '3:2' => 'Option 3:2', '3:3' => 'Option 3:3')
    ); 
```

但可以有任意数量的数组（最多 6 个），每个数组可以有 2 到 20 个选项。改变这种格式实际上是不可能的，因为它是遗留的并且基本上用于为下拉菜单提供动力（例如，想象一个服装店，其中数组 1 是尺寸，数组 2 是颜色，数组 3 是材料）。

我一直在使用一个简单的递归函数（今天早些时候在这里找到）来计算笛卡尔积：

```
$result = call_user_func_array('cartesian', $test);

function cartesian()
{
    $arrays = func_get_args();

    if(count($arrays) == 0)
    {
        return array(array());
    }

    $array      = array_shift($arrays);
    $recurse    = call_user_func_array(__FUNCTION__, $arrays);
    $return     = array();

    foreach($array as $key => $value)
    {
        foreach($recurse as $result)
        {
            $return[] = array_merge(array($key => $value), $result);
        }
    }

    return $return;
} 
```

经过少量后期处理：

```
$result = neaten($result);

function neaten($array_cartesian)
{   
    $names = array();

    foreach($array_cartesian as $array)
    {
        ksort($array);
        $config_string  = array();
        $name_string    = array();

        foreach($array as $config => $name)
        {
            $config_string[]    = $config;
            $name_string[]      = $name;
        }

        $names[implode(',', $config_string)] = implode(', ', $name_string);
    }

    return $names;
} 
```

产生类似的东西：

```
Array
(
    [1:1,2:1,3:1] => Option 1:1, Option 2:1, Option 3:1
    [1:1,2:1,3:2] => Option 1:1, Option 2:1, Option 3:2
    [1:1,2:1,3:3] => Option 1:1, Option 2:1, Option 3:3
    [1:1,2:2,3:1] => Option 1:1, Option 2:2, Option 3:1
    [1:1,2:2,3:2] => Option 1:1, Option 2:2, Option 3:2
    [1:1,2:2,3:3] => Option 1:1, Option 2:2, Option 3:3
    [1:1,2:3,3:1] => Option 1:1, Option 2:3, Option 3:1
    [1:1,2:3,3:2] => Option 1:1, Option 2:3, Option 3:2
    [1:1,2:3,3:3] => Option 1:1, Option 2:3, Option 3:3
    [1:2,2:1,3:1] => Option 1:2, Option 2:1, Option 3:1
    [1:2,2:1,3:2] => Option 1:2, Option 2:1, Option 3:2
    [1:2,2:1,3:3] => Option 1:2, Option 2:1, Option 3:3
    [1:2,2:2,3:1] => Option 1:2, Option 2:2, Option 3:1
    [1:2,2:2,3:2] => Option 1:2, Option 2:2, Option 3:2
    [1:2,2:2,3:3] => Option 1:2, Option 2:2, Option 3:3
    [1:2,2:3,3:1] => Option 1:2, Option 2:3, Option 3:1
    [1:2,2:3,3:2] => Option 1:2, Option 2:3, Option 3:2
    [1:2,2:3,3:3] => Option 1:2, Option 2:3, Option 3:3
    [1:3,2:1,3:1] => Option 1:3, Option 2:1, Option 3:1
    [1:3,2:1,3:2] => Option 1:3, Option 2:1, Option 3:2
    [1:3,2:1,3:3] => Option 1:3, Option 2:1, Option 3:3
    [1:3,2:2,3:1] => Option 1:3, Option 2:2, Option 3:1
    [1:3,2:2,3:2] => Option 1:3, Option 2:2, Option 3:2
    [1:3,2:2,3:3] => Option 1:3, Option 2:2, Option 3:3
    [1:3,2:3,3:1] => Option 1:3, Option 2:3, Option 3:1
    [1:3,2:3,3:2] => Option 1:3, Option 2:3, Option 3:2
    [1:3,2:3,3:3] => Option 1:3, Option 2:3, Option 3:3
)

27 total 
```

这很棒，并且正是笛卡尔函数应该做的。但是，我真正需要的输出是：

```
Array
(
    [1:1]       => Option 1:1
    [1:2]       => Option 1:2
    [1:3]       => Option 1:3
    [2:1]       => Option 2:1
    [2:2]       => Option 2:2
    [2:3]       => Option 2:3
    [3:1]       => Option 3:1
    [3:2]       => Option 3:2
    [3:3]       => Option 3:3
    [1:1,2:1]   => Option 1:1, Option 2:1
    [1:1,2:2]   => Option 1:1, Option 2:2
    [1:1,2:3]   => Option 1:1, Option 2:3
    [1:2,2:1]   => Option 1:2, Option 2:1
    [1:2,2:2]   => Option 1:2, Option 2:2
    [1:2,2:3]   => Option 1:2, Option 2:3
    [1:3,2:1]   => Option 1:3, Option 2:1
    [1:3,2:2]   => Option 1:3, Option 2:2
    [1:3,2:3]   => Option 1:3, Option 2:3
    [1:1,3:1]   => Option 1:1, Option 3:1
    [1:1,3:2]   => Option 1:1, Option 3:2
    [1:1,3:3]   => Option 1:1, Option 3:3
    [1:2,3:1]   => Option 1:2, Option 3:1
    [1:2,3:2]   => Option 1:2, Option 3:2
    [1:2,3:3]   => Option 1:2, Option 3:3
    [1:3,3:1]   => Option 1:3, Option 3:1
    [1:3,3:2]   => Option 1:3, Option 3:2
    [1:3,3:3]   => Option 1:3, Option 3:3
    [2:1,3:1]   => Option 2:1, Option 3:1
    [2:1,3:2]   => Option 2:1, Option 3:2
    [2:1,3:3]   => Option 2:1, Option 3:3
    [2:2,3:1]   => Option 2:2, Option 3:1
    [2:2,3:2]   => Option 2:2, Option 3:2
    [2:2,3:3]   => Option 2:2, Option 3:3
    [2:3,3:1]   => Option 2:3, Option 3:1
    [2:3,3:2]   => Option 2:3, Option 3:2
    [2:3,3:3]   => Option 2:3, Option 3:3
    [1:1,2:1,3:1]   => Option 1:1, Option 2:1, Option 3:1
    [1:1,2:1,3:2]   => Option 1:1, Option 2:1, Option 3:2
    [1:1,2:1,3:3]   => Option 1:1, Option 2:1, Option 3:3
    [1:1,2:2,3:1]   => Option 1:1, Option 2:2, Option 3:1
    [1:1,2:2,3:2]   => Option 1:1, Option 2:2, Option 3:2
    [1:1,2:2,3:3]   => Option 1:1, Option 2:2, Option 3:3
    [1:1,2:3,3:1]   => Option 1:1, Option 2:3, Option 3:1
    [1:1,2:3,3:2]   => Option 1:1, Option 2:3, Option 3:2
    [1:1,2:3,3:3]   => Option 1:1, Option 2:3, Option 3:3
    [1:2,2:1,3:1]   => Option 1:2, Option 2:1, Option 3:1
    [1:2,2:1,3:2]   => Option 1:2, Option 2:1, Option 3:2
    [1:2,2:1,3:3]   => Option 1:2, Option 2:1, Option 3:3
    [1:2,2:2,3:1]   => Option 1:2, Option 2:2, Option 3:1
    [1:2,2:2,3:2]   => Option 1:2, Option 2:2, Option 3:2
    [1:2,2:2,3:3]   => Option 1:2, Option 2:2, Option 3:3
    [1:2,2:3,3:1]   => Option 1:2, Option 2:3, Option 3:1
    [1:2,2:3,3:2]   => Option 1:2, Option 2:3, Option 3:2
    [1:2,2:3,3:3]   => Option 1:2, Option 2:3, Option 3:3
    [1:3,2:1,3:1]   => Option 1:3, Option 2:1, Option 3:1
    [1:3,2:1,3:2]   => Option 1:3, Option 2:1, Option 3:2
    [1:3,2:1,3:3]   => Option 1:3, Option 2:1, Option 3:3
    [1:3,2:2,3:1]   => Option 1:3, Option 2:2, Option 3:1
    [1:3,2:2,3:2]   => Option 1:3, Option 2:2, Option 3:2
    [1:3,2:2,3:3]   => Option 1:3, Option 2:2, Option 3:3
    [1:3,2:3,3:1]   => Option 1:3, Option 2:3, Option 3:1
    [1:3,2:3,3:2]   => Option 1:3, Option 2:3, Option 3:2
    [1:3,2:3,3:3]   => Option 1:3, Option 2:3, Option 3:3
)

63 total 
```

没有排列，只有部分组合。

据我所知，在 php 中没有问过这个特定的问题（虽然我不知道它被称为什么来搜索它，所以如果有的话，我深表歉意）。我会要求没有人过早地关闭这个问题作为重复，除非他们理解我想要实现的目标并且链接到的页面解决了这个确切的问题（不是这个问题使用字符串或排列或用另一种语言解决）。

代码： http: [//phpfiddle.org/main/code/2aw-awb](http://phpfiddle.org/main/code/2aw-awb)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T00:34:20.650

伦敦同胞！这是你要找的吗？

[http://phpfiddle.org/main/code/wy0-t6f](http://phpfiddle.org/main/code/wy0-t6f)

（请原谅可怕的结构、变量名和其他缺陷……太晚了。）

方法：从原始数组中获取所有可能的子数组组合，然后在每个数组上运行笛卡尔和整洁函数。结果数组应包含所有可能的排列（但仍需要排序）。

# php - 分页时的问题

> ID：13521378
> 
> 赞同：0
> 
> 时间：2012-11-22T23:36:21.183
> 
> 标签：php, url, pagination, append

我有一个有效的分页方法。如果我导航到第 2 页之外，或者使用“上一个”或“下一个”按钮，我的当前页面和总页面变量将附加到 URL，结果如下：

```
http://localhost/project/profile.php?s=0&p=2&s=1&p=2&select_genre=Sci-Fi&select_length=1-25&query=Submit 
```

注意额外的 s 和 p 分配

$s 定义起始页 $p 定义总页数

有没有办法防止 $s 和 $p 的值附加到 URL 中？

我确定问题在于我如何在下面 URL 的页面中携带 GET 值，我不确定如何更正它：

```
if($pages > 1)
{
    echo '<br /><p>'; //Add some extra space

    $current_page = ($start/$display) + 1;

    //If it's not the first page, make a PREV button

    if($current_page != 1)
    {
        echo '<a href=profile.php?s=' . ($start - $display) . '&p=' . $pages . '&' . http_build_query($_GET) . '"> Previous</a> ';
    }

    //Make all the numbered pages:

    for ($i = 1; $i <= $pages; $i++)
    {
        if($i != $current_page)
        {
            echo '<a href="profile.php?s=' . (($display * ($i - 1))) . '&p=' . $pages . '&' . http_build_query($_GET) . '">' . $i . '</a>';
        }
        else {
                 echo $i . ' ';
             }
    }//END FOR LOOP

    // If it's not the last page, make a Next button:

    if ($current_page != $pages)
    {
        echo '<a href="profile.php?s=' . ($start + $display) . '&p=' . $pages . '&' . http_build_query($_GET) . '"> Next</a>';
    }

    echo '</p>'; 
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T00:02:07.623

好吧，如果 $_GET 包含 s 或 p 你最终会加倍：

```
$clean = $_GET;
unset($clean['p']);    
unset($clean['s']);
echo '/someurl?' . http_build_query($clean); 
```

像这样的东西应该工作

# perl - 在 perl 中关闭多个输出管道而不阻塞每个输出管道

> ID：13521380
> 
> 赞同：4
> 
> 时间：2012-11-22T23:36:35.907
> 
> 标签：perl, unix, subprocess, pipe

我有一个 perl 脚本，它向多个子进程发送大量输出。我需要能够关闭所有管道的末端，然后等待子流程完成它们的工作。到目前为止，我只成功地关闭了每个管道并等待每个子进程一个一个完成。更具体地说，我正在做这样的事情：

```
for ($i=0;$i<24;$i++) {
    my $fh;
    open $fh, "|externalprogram $i";
    $fhs{$i}=$fh;
}

#...now I can write output to the pipes
while (moreworktodo()) {
    $whichone, $data = do_some_work();
    print $fhs{$whichone} $data;
}
#Now I just need to wait for all the subprocesses to finish.  However, they
#need to do a lot of work that can only begin when they've finished reading input.  So I need to close my end of the pipe to indicate I'm finished.
for ($i=0;$i<24;$i++) {
    my $file = $fhs{$i};
    close $file;  #unfortunately, this blocks until process $i finishes
    #meanwhile all the other processes are waiting for EOF 
    #on their STDIN before they can proceed.  So I end up waiting
    #for 24 processes to finish one-at-a-time instead of all at once
} 
```

让所有子进程迅速完成（关闭它们的标准输入）的一种方法是让我的脚本退出而不关闭（管道）文件句柄，但这并不好，因为脚本是需要子进程的更大工作的一部分'在继续之前实际完成的工作。

关闭每个子进程的标准输入（以便它们都可以完成工作）然后等待所有子进程完成后再继续的简单方法是什么？我试过分叉一个孩子来关闭每个管道，但这似乎不起作用——只有父母的“关闭”实际上关闭了子进程的标准输入并等待子进程完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T00:51:53.853

我会自己创建管道而不使用`open(P, "|external-program")`. 然后你可以关闭管道而不是等待子进程退出。

自己为子进程打开管道的示例：

```
sub spawn {
  my ($cmd) = @_;

  pipe(my $rp, $wp) or die "pipe failed: $!";

  my $pid = fork();
  die "fork: $!" unless defined($pid);
  if ($pid) {
    # parent
    close($rp);
    return ($wp, $pid);
  } else {
    # child
    close($wp);
    open(STDIN, "<&", $rp);
    exec($cmd) or die "exec: $!";
  }
}

sub main {
  $| = 1;
  my ($wp, $pid) = spawn("./child");
  for (1..10) {
    print {$wp} "sending $_\n";
  }
  close($wp);
  print "done\n";
 }

 main(); 
```

这是一个`close()`不等待孩子退出的示例子程序进行测试：

```
# file: ./child
while (<STDIN>) {
  print "got: $_";
  sleep(2);
} 
```

最后一个难题是异步等待子进程退出。这可以通过`$SIG{CHLD}`处理程序来完成，或者，这是一个简单的“join_children”函数：

```
my @child_ids = (1..24); # or whatever ids you want to use
my %pipe;                # hash map from child_id -> pipe handle

sub join_children {
  for my $id (@child_ids) {
    close( $pipe{$id} );
  }

  my $count = scalar(@child_ids);
  while ($count > 0) {
    wait;
    $count--;
  }
} 
```

# java - java中的复合模式

> ID：13521389
> 
> 赞同：1
> 
> 时间：2012-11-22T23:37:23.173
> 
> 标签：java, composite

我现在正在开发一个程序，该程序允许您创建形状（正方形、矩形和圆形），您还可以选择通过选择已创建的形状来创建复合形状......我正在使用两个观察者来观察这些形状。一种用于正方形/矩形，一种用于大圆形，这些观察者列出了形状的参考点和大小。创建复合形状时，如果复合形状中有正方形/矩形，则应在正方形/矩形框中列出组件。

我应该使用复合图案创建复合形状。所以基本上复合形状和我的圆形、正方形和矩形需要以同样的方式处理

我有一组称为形状的对象，复合形状是一个包含一组形状的对象。

我的问题是如何通过形状数组检查复合形状类型的对象，然后通过复合形状数组检查矩形或正方形的实例？

很抱歉没有包含代码，但我的程序有点大，有很多类

这是我用来检查正方形或矩形实例的方法……这两种方法属于两个不同的类。当形状只是简单形状但复合形状不显示时，这些形状会显示在右侧观察者窗口中。例如，如果我有一个包含 3 个形状的形状列表……形状 1 是一个大圆圈，形状 2 是复合形状，形状 3 是矩形。假设复合形状有 2 个正方形。现在这将显示大圆圈和矩形，但不会显示复合形状组件。我以为一旦我找到了compoundShape，instanceof 就会从 compundshape 数组中挑选出一个 instanceof 正方形或矩形

继承人的复合形状 toString 方法

```
public String toString(){
    String output="";
    output += "Compound Shape: /n";
    for (int i = 0; i< numShapes; i++){
        output += shapes[i].toString();
    }
    return output;
} 
```

这是我用来查找正方形或矩形实例的 do 方法

```
do {//squares rectangles
        currentShape = shapes.getShape();
        if (shapes.squareRectangleFinder())
            outputString1 += currentShape.toString();
    }while (shapes.next()); 
```

这是平方查找器方法

```
public boolean squareRectangleFinder() {
    if ((shapes[currentShape] instanceof Square)||(shapes[currentShape] instanceof Rectangle)){
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:47:25.390

我想这就是“复合模式”应该做的。根据[维基百科](http://en.wikipedia.org/wiki/Composite_pattern)：

> 客户应该忽略对象组合和单个对象之间的差异

在我的理解中应该这样做（getter/setter，省略添加/删除操作）：

```
interface Shape {
    public int getLeftmostCoordinate();
}

class Rectangle implements Shape {
    private int top;
    private int left;
    private int width;
    private int height;

    public int getLeftmostCoordinate() {
        return left;
    }
}

class Circle implements Shape {
    private int x;
    private int y;
    private int r;

    public int getLeftmostCoordinate() {
        return x - r;
    }
}

class CompoundShape implements Shape {
    private Shape[] shapes;

    public int getLeftmostCoordinate() {
        int left = shapes[0].getLeftmostCoordinate();

        for (int i=1; i<shapes.length; i++) {
            int candidate = shapes[i].getLeftmostCoordinate();
            if (candidate < left) {
                left = candidate;
            }
        }

        return left;
    }
} 
```

# c - 将 EOF 写入管道

> ID：13521393
> 
> 赞同：1
> 
> 时间：2012-11-22T23:38:01.553
> 
> 标签：c, pipe, eof, fgets

我有一个父母和一个孩子，想通过管道从父母向孩子写一个EOF……这是怎么工作的？

这是我的尝试：

---父代码---

```
if(dup2(parent_pipe[1], STDOUT_FILENO) == -1) { /*stdout gets closed and parent_pipe is duplicated with id of stdout*/
        error("Can't duplicate the write-end of the pipe to stdout!");
}
if(close(parent_pipe[0]) == -1) {
    error("Can't close read-end of the pipe!");
}

char blub[] = "EOF";
if(write(parent_pipe[1], blub, strlen(blub)) == -1) {
error("Failed to write the array");
} 
```

---子代码---

```
if(dup2(parent_pipe[0], STDIN_FILENO) == -1) { /*stdin gets closed and parent_pipe is duplicated with id of stin*/
    error("Can't duplicate the read-end of the pipe to stdin!");
}
/* close the write-end of the pipe */
if(close(parent_pipe[1]) == -1) {
    error("Can't close write-end of the pipe");
}

while(fgets(readbuffer, ROWLENGTH, stdin) != NULL) {
    printf("Received string: %s", readbuffer, nbytes);
} 
```

孩子等待EOF并且没有停止，我该如何解决这个问题？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T23:48:14.703

当要停止通信时，必须在父进程中关闭管道：

```
dup2(...);
...
write to child
...
close(parent_pipe[1]); 
```

# python - 从文本文件的行中提取数据

> ID：13521397
> 
> 赞同：6
> 
> 时间：2012-11-22T23:38:48.420
> 
> 标签：python, string, file, split, extract

我需要从文本文件的行中提取数据。数据是名称和评分信息，格式如下：

```
Shyvana - 12/4/5 - Loss - 2012-11-22
Fizz - 12/4/5 - Win - 2012-11-22
Miss Fortune - 12/4/3 - Win - 2012-11-22 
```

这个文件是由我的小python程序的另一部分生成的或丢失。然后我要求确认并将该数据写入新行的文件中，然后像这样在末尾附加日期。准备该数据的代码：

```
data = "%s - %s/%s/%s - %s - %s\n" % (
        champname, kills, deaths, assists, winloss, timestamp) 
```

基本上，我想在程序的另一部分读回该数据并将其显示给用户并使用它进行计算，例如特定名称随时间的平均值。

我是 python 新手，而且我对一般编程不是很有经验，所以我发现的大多数字符串拆分和格式化示例对我来说太神秘了，无法理解如何适应我在这里需要的东西，谁能帮忙? 我可以以不同的方式格式化写入的数据，因此令牌查找会更简单，但我希望它直接在文件中简单。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T23:52:56.620

下面会将所有内容读入以玩家名称为键的字典中。与每个玩家关联的值本身就是一个字典，充当记录，其中包含与项目关联的命名字段，这些字段被转换为适合进一步处理的格式。

```
info = {}
with open('scoring_info.txt') as input_file:
    for line in input_file:
        player, stats, outcome, date = (
            item.strip() for item in line.split('-', 3))
        stats = dict(zip(('kills', 'deaths', 'assists'),
                          map(int, stats.split('/'))))
        date = tuple(map(int, date.split('-')))
        info[player] = dict(zip(('stats', 'outcome', 'date'),
                                (stats, outcome, date)))

print('info:')
for player, record in info.items():
    print('  player %r:' % player)
    for field, value in record.items():
        print('    %s: %s' % (field, value))

# sample usage
player = 'Fizz'
print('\n%s had %s kills in the game' % (player, info[player]['stats']['kills'])) 
```

输出：

```
info:
  player 'Shyvana':
    date: (2012, 11, 22)
    outcome: Loss
    stats: {'assists': 5, 'kills': 12, 'deaths': 4}
  player 'Miss Fortune':
    date: (2012, 11, 22)
    outcome: Win
    stats: {'assists': 3, 'kills': 12, 'deaths': 4}
  player 'Fizz':
    date: (2012, 11, 22)
    outcome: Win
    stats: {'assists': 5, 'kills': 12, 'deaths': 4}

Fizz had 12 kills in the game 
```

或者，不要将大部分数据保存在字典中，这会使嵌套字段访问有点尴尬——`info[player]['stats']['kills']`你可以改用更高级的“通用”类来保存它们，这样你就可以编写`info2[player].stats.kills`了。

为了说明，这里使用我命名的类几乎是一样的，`Struct`因为它有点像 C 语言的`struct`数据类型：

```
class Struct(object):
    """ Generic container object """
    def __init__(self, **kwds): # keyword args define attribute names and values
        self.__dict__.update(**kwds)

info2 = {}
with open('scoring_info.txt') as input_file:
    for line in input_file:
        player, stats, outcome, date = (
            item.strip() for item in line.split('-', 3))
        stats = dict(zip(('kills', 'deaths', 'assists'),
                          map(int, stats.split('/'))))
        victory = (outcome.lower() == 'win') # change to boolean T/F
        date = dict(zip(('year','month','day'), map(int, date.split('-'))))
        info2[player] = Struct(champ_name=player, stats=Struct(**stats),
                               victory=victory, date=Struct(**date))
print('info2:')
for rec in info2.values():
    print('  player %r:' % rec.champ_name)
    print('    stats: kills=%s, deaths=%s, assists=%s' % (
          rec.stats.kills, rec.stats.deaths, rec.stats.assists))
    print('    victorious: %s' % rec.victory)
    print('    date: %d-%02d-%02d' % (rec.date.year, rec.date.month, rec.date.day))

# sample usage
player = 'Fizz'
print('\n%s had %s kills in the game' % (player, info2[player].stats.kills)) 
```

输出：

```
info2:
  player 'Shyvana':
    stats: kills=12, deaths=4, assists=5
    victorious: False
    date: 2012-11-22
  player 'Miss Fortune':
    stats: kills=12, deaths=4, assists=3
    victorious: True
    date: 2012-11-22
  player 'Fizz':
    stats: kills=12, deaths=4, assists=5
    victorious: True
    date: 2012-11-22

Fizz had 12 kills in the game 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T23:41:57.887

有两种方法可以从文本文件示例中读取数据。

**第一种方法**

您可以使用 python 的 csv 模块并指定您的分隔符是`-`.

见[http://www.doughellmann.com/PyMOTW/csv/](http://www.doughellmann.com/PyMOTW/csv/)

**第二种方法**

或者，如果您不想使用此 csv 模块，则可以`split`在将文件中的每一行作为字符串读取后简单地使用该方法。

```
f = open('myTextFile.txt', "r")
lines = f.readlines()

for line in lines:
    words = line.split("-")   # words is a list (of strings from a line), delimited by "-". 
```

因此，在上面的示例中，`champname`实际上将是`words`列表中的第一项，即`words[0]`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T23:45:42.173

您想使用 split (' - ') 来获取零件，然后可能再次获取数字：

```
for line in yourfile.readlines ():
    data = line.split (' - ')
    nums = [int (x) for x in data[1].split ('/')] 
```

应该在 data[] 和 nums[] 中得到你需要的所有东西。或者，您可以使用 re 模块并为其编写正则表达式。不过，这似乎还不够复杂。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-22T23:50:31.850

```
# Iterates over the lines in the file.
for line in open('data_file.txt'):
    # Splits the line in four elements separated by dashes. Each element is then
    # unpacked to the correct variable name.
    champname, score, winloss, timestamp = line.split(' - ')

    # Since 'score' holds the string with the three values joined,
    # we need to split them again, this time using a slash as separator.
    # This results in a list of strings, so we apply the 'int' function
    # to each of them to convert to integer. This list of integers is
    # then unpacked into the kills, deaths and assists variables
    kills, deaths, assists = map(int, score.split('/'))

    # Now you are you free to use the variables read to whatever you want. Since
    # kills, deaths and assists are integers, you can sum, multiply and add
    # them easily. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T23:49:02.923

首先，您将线路分成数据片段

```
>>> name, score, result, date = "Fizz - 12/4/5 - Win - 2012-11-22".split(' - ')
>>> name
'Fizz'
>>> score
'12/4/5'
>>> result
'Win'
>>> date
'2012-11-22' 
```

二、解析你的分数

```
>>> k,d,a = map(int, score.split('/'))
>>> k,d,a
(12, 4, 5) 
```

最后，将日期字符串转换为日期对象

```
>>> from datetime import datetime    
>>> datetime.strptime(date, '%Y-%M-%d').date()
datetime.date(2012, 1, 22) 
```

现在您已将所有部分解析并规范化为数据类型。

# iphone - 跟踪选定的单元格

> ID：13521399
> 
> 赞同：1
> 
> 时间：2012-11-22T23:38:55.813
> 
> 标签：iphone, ios, xcode

在我的应用程序中，用户根据他/她选择的单元格更改 tableView 中显示的字段。（仅供参考...我允许选择多个单元格。）就在用户按下后退按钮时，程序将所选单元格的 textLabel 复制到父 viewController 的占位符。

这是我的代码的相关部分：

```
- (void)willMoveToParentViewController:(UIViewController *)parent
{
int tempCount = 0;

for (int section = 0; section < 3; section++)
{
    int rowMax;

    if (section == 0)
        rowMax = 3;

    else if (section == 1)
        rowMax = 5;

    else if(section == 2)
        rowMax = 3;

    for(int row = 0; row < rowMax; row++)
    {
        NSIndexPath *tempIndexPath = [NSIndexPath indexPathForRow:row inSection:section];

        UITableViewCell *selectedCell = [self.tableView cellForRowAtIndexPath:tempIndexPath];

        if(selectedCell.accessoryType == UITableViewCellAccessoryCheckmark)
        {
            NSLog(@"tempCount = %d", tempCount);
            tempCount++;

            if (tempCount == 1)
                chosenFieldsViewController.field0.placeholder = selectedCell.textLabel.text;

            else if(tempCount == 2)
                chosenFieldsViewController.field1.placeholder = selectedCell.textLabel.text;

            else if(tempCount == 3)
                chosenFieldsViewController.field2.placeholder = selectedCell.textLabel.text;

        }
    }
}
} 
```

我意识到，如果向下滚动 tableView，选择单元格后，所选单元格不会在 parentVC 上显示为 placeHolder。根据我的分析，我认为一旦向下滚动，单元格就会从内存中删除。因此，尽管选择了单元格，但它们无法显示在父 VC 上。

如果是这样，为什么我在向上滚动时看到单元格被选中？

如果有人能建议我如何在用户滚动时跟踪选定的单元格，我将不胜感激。

谢谢。

**编辑 1**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];

if(selectedCell.accessoryType != UITableViewCellAccessoryCheckmark && count<3)
{
    selectedCell.accessoryType = UITableViewCellAccessoryCheckmark;
    count ++;
}

else if(selectedCell.accessoryType == UITableViewCellAccessoryCheckmark)
{
    selectedCell.accessoryType = UITableViewCellAccessoryNone;
    count--;
}

} 
```

**编辑 2**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

NSString *CellIdentifier = [NSString stringWithFormat:@"CellForRow%dSection%d",indexPath.row, indexPath.section];
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

cell.selectionStyle = UITableViewCellSelectionStyleNone; // VERY IMPORTANT

if (indexPath.section == 0)
{        
    switch(indexPath.row)
    {
        case 0:
            cell.textLabel.text = @"Class A";
            break;

        case 1:
            cell.textLabel.text = @"Class B";
            break;

        case 2:
            cell.textLabel.text = @"Class C";
            break;

        default:
            break;
    }
}

if(indexPath.section == 1)
{        
    switch(indexPath.row)
    {
        case 0:
            cell.textLabel.text = @"Class D";
            break;

        case 1:
            cell.textLabel.text = @"Class E";
            break;

        case 2:
            cell.textLabel.text = @"Class F";
            break;

        case 3:
            cell.textLabel.text = @"Class G";
            break;

        case 4:
            cell.textLabel.text = @"Class H";
            break;

        default:
            break;
    }
}

if(indexPath.section == 2)
{
    switch (indexPath.row)
    {
        case 0:
            cell.textLabel.text = @"Class I";
            break;

        case 1:
            cell.textLabel.text = @"Class J";
            break;

        case 2:
            cell.textLabel.text = @"Class K";
            break;

        default:
            break;
    }
}

return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:33:54.853

将字典声明为，

```
@property (nonatomic, retain) NSMutableDictionary *selectedTextListDict; 
```

在 viewDidLoad 中，

```
NSMutableDictionary *selectedTextListDict = [[NSMutableDictionary alloc] init]; 
```

然后将这些方法更改为，

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];

    if(selectedCell.accessoryType != UITableViewCellAccessoryCheckmark && count < 3)
    {
        NSString *rowKeyString = [NSString stringWithFormat:@"%d", indexPath.row];
        NSString *sectionKeyString = [NSString stringWithFormat:@"%d", indexPath.section];

        NSMutableDictionary *row = [self.selectedTextListDict valueForKey:sectionKeyString];
        if (!row) {
            row = [[NSMutableDictionary alloc] init];
        }
        [row setObject:selectedCell.textLabel.text forKey:rowKeyString];
        [self.selectedTextListDict setObject:row forKey:sectionKeyString];

        selectedCell.accessoryType = UITableViewCellAccessoryCheckmark;
        count ++;
    }

    else if(selectedCell.accessoryType == UITableViewCellAccessoryCheckmark)
    {

        NSString *rowKeyString = [NSString stringWithFormat:@"%d", indexPath.row];
        NSString *sectionKeyString = [NSString stringWithFormat:@"%d", indexPath.section];

        NSMutableDictionary *row = [self.selectedTextListDict valueForKey:sectionKeyString];
        [row removeObjectForKey:rowKeyString];

        if ([[row allKeys] count] == 0) {
            [self.selectedTextListDict removeObjectForKey:sectionKeyString];
        } else {
            [self.selectedTextListDict setObject:row forKey:sectionKeyString];
        }

        selectedCell.accessoryType = UITableViewCellAccessoryNone;
        count--;
    }
}

- (void)willMoveToParentViewController:(UIViewController *)parent
{
    NSArray *selectedTextSectionKeysList = [self.selectedTextListDict allKeys];
    NSArray *sortedSelectedTextSectionKeysList = [selectedTextSectionKeysList sortedArrayUsingSelector:@selector(intValue)];
    int tempCount = 0;

    for (NSString *sectionString in sortedSelectedTextSectionKeysList) {

        NSMutableDictionary *rowDict = [self.selectedTextListDict valueForKey:sectionString];

        if (rowDict) {

            NSArray *selectedTextRowKeysList = [rowDict allKeys];
            NSArray *sortedSelectedTextRowKeysList = [selectedTextRowKeysList sortedArrayUsingSelector:@selector(intValue)];

            for (NSString *rowString in sortedSelectedTextRowKeysList) {

                tempCount++;

                if (tempCount == 1)
                    chosenFieldsViewController.field0.placeholder = [rowDict valueForKey:rowString];

                else if(tempCount == 2)
                    chosenFieldsViewController.field1.placeholder = [rowDict valueForKey:rowString];

                else if(tempCount == 3)
                    chosenFieldsViewController.field2.placeholder = [rowDict valueForKey:rowString];
            }

        }
    }
} 
```

**编辑1：**

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"GoToModifyFieldsViewController"])
    {
        ModifyFieldsViewController *modifyFieldsViewController = segue.destinationViewController;
        modifyFieldsViewController.chosenFieldsViewController = self;

        field0.placeholder = @"";
        field1.placeholder = @"";
        field2.placeholder = @"";

        if(self.selectedTextListDict)
            self.selectedTextListDict = [[NSMutableDictionary alloc] init];
    }
} 
```

`ChosenFieldsViewController`在: as中声明一个字典，

```
@property (nonatomic, retain) NSMutableDictionary *selectedTextListDict; 
```

在 viewDidLoad 中，

```
selectedTextListDict = [[NSMutableDictionary alloc] init]; 
```

因此，而不是使用`self.selectedTextListDict`，使用：`chosenFieldsViewController.selectedTextListDict`in `ModifyFieldsViewController`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:52:44.407

- 如果是这样，为什么我在向上滚动时看到单元格被选中？

因为只要它们即将出现，它们就会自动创建。每次向上或向下滚动时，都会创建或重复使用单元格。当它们消失时，它们会被销毁或标记以供重复使用。

# database - Symfony2/Doctrine 和 PostgreSQL 通知/监听

> ID：13521402
> 
> 赞同：3
> 
> 时间：2012-11-22T23:39:16.160
> 
> 标签：database, postgresql, symfony, notifications, doctrine-orm

我正在 PostgreSQL 上编写一个数据库应用程序，它有两个部分：

1.  GUI - 用 Symfony/Doctrine 编写
2.  处理 - 用 C/libpq 编写

处理组件将在 GUI 插入表格后处理表格中的数据。但是，处理组件如何知道发生了变化？我的默认答案是使用 PostgreSQL 通知/侦听命令，因为我很想避免某种轮询。

问题：

1.  Symfony 应用程序有什么方法可以使用 postgresql notify 命令吗？Doctrine 支持 Native SQL 选择，但我不相信这是我需要的。

2.  还有其他想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T00:11:56.157

一个本地人`SELECT`应该是完全足够的。

虽然您通常使用该`NOTIFY`语句，但也可以调用该`pg_notify`函数以获得相同的效果。

```
SELECT pg_notify('key','payload'); 
```

您的工作人员可以`LISTEN key;`正常工作，并且将接收以这种方式生成的通知，就像`NOTIFY`使用时一样。

# arrays - 带有 bash for 循环的 SSH 命令选项

> ID：13521403
> 
> 赞同：3
> 
> 时间：2012-11-22T23:39:20.883
> 
> 标签：arrays, linux, bash, for-loop, ssh

我想符号链接两个数组的元素。例如，`array1 = (AAA BBB CCC DDD)`、`array2 = (001 002 003 004)`、`001->AAA`、和。 `002->BBB``003->CCC``004->DDD`

这是我写的shell脚本，但它不起作用，我无法弄清楚哪里出错了。

```
declare -a array1=(AAA BBB CCC DDD)
declare -a array2=(001 002 003 004)
num = ${#array1[@]}
ssh username@hostmachine 'for((i = 0 ; i < $num ; i++ )); do ln -sf ${array1[$i]} ${array2[$i]}; done' 
```

谁能给我一些提示/建议？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T00:04:23.440

您应该在 to 参数中包含所有 bash 代码`ssh`，如下所示：

```
ssh username@hostmachine 'declare -a array1=(AAA BBB CCC DDD); declare -a array2=(001 002 003 004); num = ${#array1[@]}; for((i = 0 ; i < $num ; i++ )); do ln -sf ${array1[$i]} ${array2[$i]}; done' 
```

因为否则 ssh bash 代码将无法访问您之前定义的数组，因为它们是在**您的**计算机中定义的，而不是在 ssh 中定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T23:43:27.057

乍一看，我会说您`done`在循环中缺少决赛：

```
ssh username@hostmachine 'for((i = 0 ; i < $num ; i++ )); do ln -sf ${array1[$i]} ${array2[$i]}; done' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T23:56:05.040

变量替换不会发生在单引号内。改用双引号：

```
declare -a array1=(AAA BBB CCC DDD)
declare -a array2=(001 002 003 004)
num=${#array1[@]}
ssh username@hostmachine "for((i = 0 ; i < $num ; i++ )); do ln -sf ${array1[$i]} ${array2[$i]}; done" 
```

# asp.net - 在 Controller 中构建模型

> ID：13521404
> 
> 赞同：1
> 
> 时间：2012-11-22T23:39:31.570
> 
> 标签：asp.net, asp.net-mvc, build, model, asp.net-mvc-4

我有一个链接可以打开一个对话框给用户添加它的配置文件。

我希望数据在隐藏字段中

控制器调用此视图，但我不确定如何在控制器中填充我的模型，然后使用此视图中的模型来设置值属性。

这是我的控制器，如您所见，我正在使用 ViewBag，但我不想那样做。

```
public ActionResult EditUser()
    {
        try 
        {
            MembershipUser membershipUser = Membership.GetUser(Request.QueryString["username"]);
            ViewBag.user = membershipUser;

            return PartialView();

        }
        catch (Exception e)
        {   
            return Content("Error: " + e);
        }
    } 
```

您能否帮助我了解如何构建我的模型并在我的视图中使用它？非常感谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T23:49:15.137

您所要做的就是将您创建的模型传递给视图/局部视图的调用。所以在你的例子中，而不是调用：

```
ViewBag.user = membershipUser 
```

你应该使用：

```
return PartialView(membershipUser); 
```

您只需要确保在您的视图中您`@model`在顶部有一个声明。它会是这样的：

```
@model MembershipUser;
<p>@Model.SomeField</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T23:56:45.333

您可以简单地将 传递`MembershipUser`给视图并将其用作模型。您的控制器操作方法将检索用户并将其返回给视图：

```
MembershipUser membershipUser = Membership.GetUser(Request.QueryString["username"]);
return PartialView("PartialViewName", membershipUser); // Specify the partial view name and pass the membership user as a model 
```

然后在您的视图中添加`@model`指令并访问以下属性`MembershipUser`：

```
@model MembershipUser

// If you want to use a hidden field for a property
@Html.HiddenFor(m => m.SomeProperty)

// Uses the default editor template for the data type to allow user to edit the property
@Html.EditorFor(m => m.SomeProperty)

 // If you just want to show the property
@Model.SomeProperty 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T07:49:28.190

您必须添加模型名称 UserModel 并在那里定义用户对象

```
 public class UserModel
        {   
            public User UserInfo { get; set; }

        } 
```

现在在 EditUser.cshtml 的 Partialview 顶部添加 @model UI.Web.App.Models.UserModel

之后也更改您的控制器代码-

```
public ActionResult EditUser()
    {
        try 
        {
            MembershipUser membershipUser = Membership.GetUser(Request.QueryString["username"]);
            UserModel usermodel=new UserModel();
            usermodel.UserInfo = membershipUser;
            return PartialView(usermodel);

        }
        catch (Exception e)
        {   
            return Content("Error: " + e);
        }
    } 
```

它将从控制器中删除视图包。希望这对您有所帮助，如果有任何问题，请告诉我。

# iphone - Phonegap 只针对 iPhone（不是 iPad）？

> ID：13521406
> 
> 赞同：20
> 
> 时间：2012-11-22T23:39:56.150
> 
> 标签：iphone, cordova

如何使 Phonegap Build 仅针对 iPhone（而不是 iPad）的应用程序？可能吗？

我没有使用 XCode。这是一个使用 Phonegap 构建的 HTML5/JS 应用程序。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-07-08T16:24:02.190

我知道这是旧的，但正确的答案不在这里；所以我添加它。我遇到了同样的问题，下面是您正在寻找的解决方案：

在您的 config.xml 中：

```
<preference name="target-device" value="handset" /> 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-11-23T06:49:13.527

Xcode 是 Apple 为 iOS 设备构建的官方工具。

**指定目标设备**

设备设置标识您希望应用程序在其上运行的设备类型。有两种设备类型：iPhone 和 iPad。iPhone 类型包括 iPhone 和 iPod touch 设备。iPad 类型包括 iPad 设备。

要指定您希望应用能够在其上运行的设备系列：

1.  在项目导航器中，选择项目。
2.  从项目编辑器的目标列表中，选择构建应用程序的目标，然后单击摘要。
3.  从“设备”弹出菜单中，选择 iPhone、iPad 或 Universal（针对两个系列）。

![在此处输入图像描述](../Images/96ffbc6a26cac383a4a1299764d46bd8.png) 有关为 iPhone、iPad 或这两种设备系列配置应用程序的更多信息，请参阅“<a href="https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks .html#//apple_ref/doc/uid/TP40007072-CH7" rel="nofollow noreferrer">高级应用技巧”。

**现在谈谈第二种选择**

即提交你的项目到[phonegap构建程序，](http://build.phonegap.com/)你必须关注这个[博客](http://build.phonegap.com/docs/ios-builds)。

在这篇博客中，他们清楚地提到：

“我们现在能够通过 Adob​​e® PhoneGap™ Build 为 iOS 设备的构建提供支持。完成 iOS 构建的过程与其他平台略有不同：所有 iOS 构建都需要由开发人员证书和配置文件签名配置文件，它与您的 Apple 开发人员帐户和您希望测试的设备相关联。本文档介绍了如何设置它。

注意：由于 PhoneGap Build 使用 Apple 的标准开发流程来构建应用程序，因此您需要注册他们的开发者计划才能在 PhoneGap Build 上构建 iOS 应用程序。您还需要一台 Mac 来配置您的证书和配置文件。”

您必须在 config.xml 中提及设备详细信息，并且 phonegap 团队也使用 xcode 为我们构建 iOS。

# stretch - 如何使网站水平拉伸

> ID：13521408
> 
> 赞同：-1
> 
> 时间：2012-11-22T23:40:18.053
> 
> 标签：stretch

我正在尝试使水平菜单栏在屏幕上完全伸展而没有任何间隙。到目前为止，它有点工作，但最左边有一个小差距。

下面是我的代码。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>New Design</title>
<link href="CSS/page2.css" rel="stylesheet" type="text/css" />
<link href="CSS/main.css" rel="stylesheet" type="text/css" />
</head>

<body>

<div id="main">
<div id="header">

<div id="menu">

<ul id="ulmenu">
<li>Home</li>
<li>Portfolio</li>
<li>About Me</li>
<li>Contact</li>
</ul>

</div>

<br />

</div>

<div id="content">
<br />
<br />
<br />

</div>

<br />
<br />

</div>

</body>
</html> 
```

CSS：

```
@charset "utf-8";
#main {
position: fixed;
margin-top: -17px;
height: 100%;
width: 100%;
margin-right: auto;
margin-left: auto;
float: left;
padding-left: -15px;
}
#main #header {
font-family: "Arial Black", Impact, Arial, sans-serif;
width: 100%;
height: 59px;
z-index: 30;
position: fixed;
margin-top: auto;
margin-left: auto;
background-color: #CCC;
margin-right: auto;
float: left;
}
#main #header #menu {
background-color: #960;
height: 50px;
position: relative;
width: 800px;
margin-right: auto;
margin-left: auto;
margin-top: -7px;
}
#main #header #menu ulmenu {
color: #FFF;
list-style-type: none;
margin-right: auto;
margin-left: auto;
text-align: center;
padding-top: 10px;
}
#main #header #menu ul li {
    display: inline;
text-align: center;
margin-right: 30px;
margin-left: 30px;
font-family: "Arial Black", Gadget, sans-serif;
color: #FC0;
font-size: 24px;
}
#main #content {
width: 900px;
margin-top: auto;
margin-right: auto;
margin-left: auto;
height: auto;
} 
```

从上面的代码来看，这是解决这个问题的最好方法吗？

链接到页面本身。

[http://carerra.ulmb.com/page2.html](http://carerra.ulmb.com/page2.html)

编辑：谢谢大家，现在可以使用了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:50:33.053

将“margin:0px”添加到您的正文中。那么侧面不应该有任何空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T23:53:48.607

尝试将其添加到您的样式表中；

```
body {
    margin: 0;
    padding: 0;
} 
```

# python - 安装适用于 Python 的 Facbeook SDK 时遇到问题

> ID：13521415
> 
> 赞同：3
> 
> 时间：2012-11-22T23:41:36.543
> 
> 标签：python, facebook, import, module

我已经从以下位置下载了 Facebook SDK：

> [https://github.com/pythonforfacebook/facebook-sdk/](https://github.com/pythonforfacebook/facebook-sdk/)

在我的 Python 安装文件夹中，我创建了一个名为 fb 的文件夹，并将 GitHub 中的文件提取到该文件夹​​中。然后我跑了：

> setup.py 安装

安装模块。但是，当我尝试运行时

> 从脸书导入脸书

在 Python Shell 中，我得到以下信息：

> >>> 从脸书导入脸书
> 
> Traceback（最近一次调用最后）：文件 pyshell#0，第 1 行，从 facebook 导入 Facebook ImportError：无法导入名称 Facebook

但是，当我只是从 facebook import * 写入时，我没有收到任何错误。

我没有采取什么步骤来使其正常工作？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T23:53:38.653

看起来您所做的一切都是正确的-您的问题是模块`Facebook`内部没有对象（请参见[此处](https://github.com/pythonforfacebook/facebook-sdk/blob/master/facebook.py)`facebook`的代码）。导入起作用的原因是因为这是导入所有名称的语法。从您的代码中，您应该能够简单地使用来调用您想要的内容。`*``facebook.<your_method>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T17:11:34.113

试试这个 sdk，它更简单易用，并且有详细的文档来帮助初学者 [Facebook python sdk](https://pypi.python.org/pypi/fb/0.3.0)

# processing - 让两个物体以相同的速度增长？

> ID：13521424
> 
> 赞同：0
> 
> 时间：2012-11-22T23:42:32.470
> 
> 标签：processing

我编写了这个程序，它工作正常，但茎和花的生长速度不同。我怎样才能使两者以相同的速度增长？我已经为此苦苦挣扎了一两天了，我知道这可能看起来很简单，但这对我来说很痛苦：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:00:48.147

您无法轻松同步这两个动画的原因是，茎是根据 frameCount 生长的，而花是根据不基于 frameCount 或 frameRate 的比率生长的。我已经修改了你的 Flower 类，很快就说明了问题出在哪里：

在`Flower.display()`方法中调用任何内容之前：

```
scale(-min((float)(frameCount)/250, 1), min((float)(frameCount)/250, 1)); 
```

这类似于您缩放茎的方式。

在`Flower.grow()`方法中：

```
factor = maxFactor;
sizes = maxSize; 
```

这很草率但很快。只是强制花以最大尺寸绘制，而上面的修改会缩放它。

这是完整的源代码，带有注释和注释掉的代码：

```
Stem myStem;
 Circle circles[];
 Flower flowers = new Flower();
 float scaleFactor=0.5;

 void setup() {
   size(floor(400*scaleFactor), floor(800*scaleFactor));
   myStem = new Stem(200, 800);
   flowers = new Flower (0, 0);
   //moved this to setup, no need to recreate each frame
   circles = new Circle[6];
   circles[0]  = new Circle(0, -40, 50, 50);
   circles[1]  = new Circle(0, -40, 50, 50);
   circles[2]  = new Circle(0, -40, 50, 50);
   circles[3]  = new Circle(0, -40, 50, 50);
   circles[4]  = new Circle(0, -40, 50, 50);
   circles[5]  = new Circle(0, 0, 50, 50);
   // also smooth only needs to be called once
   // unless ther is a noSmooth() somewhere
   smooth();
   }

   void draw() {

   float grow = 0;
   //translate(myStem.initalloX, myStem.initalloY);  
   myStem.drawStem();
   //set centre point
   translate(myStem.initalloX, ((frameCount>250)?myStem.initalloY-       500:myStem.initalloY-(2*frameCount)));
   if (frameCount>10) {
     flowers.grow();
     flowers.display();
     }
   } 

   class Stem { 
     int initalloX=200;
     int initalloY=800;

     Stem(int tempInitalloX, int tempInitalloY) {
      initalloX = tempInitalloX;
      initalloY = tempInitalloY;
     }

 void drawStem() {
   background(#0DBADB);
   scale(scaleFactor, scaleFactor);
   stroke (12, 149, 11);
   fill (12, 149, 11);
   strokeWeight(10);
   line(initalloX, initalloY, initalloX, ((frameCount>250)?initalloY-500:initalloY-(2*frameCount)));
   //stem1
   if (frameCount>101) {
      noStroke();
      translate(initalloX, initalloY-200);
      scale(min((float)(frameCount-100)/100, 1), min((float)(frameCount-100)/100, 1));
      beginShape();
      vertex(0, 0);
      bezierVertex(-40, -5, -30, -40, -80, -20);
      bezierVertex(-47, -16, -52, 8, 0, 0);
      endShape(CLOSE);
      scale(1/min((float)(frameCount-100)/100, 1), 1/min((float)(frameCount-100)/100, 1));
      translate(-initalloX, -(initalloY-200));
      noStroke();
    }
    //stem2
    if (frameCount>151) {
     //  noStroke();
     translate(initalloX, initalloY-300);
     scale(-min((float)(frameCount-150)/150, 1), min((float)(frameCount-150)/150, 1));
     beginShape();
     vertex(0, 0);
     bezierVertex(-40, -5, -30, -40, -80, -20);
     bezierVertex(-47, -16, -52, 8, 0, 0);
     endShape(CLOSE);
     scale(-1/min((float)(frameCount-150)/150, 1), 1/min((float)(frameCount-150)/150, 1));
     translate(-initalloX, -(initalloY-300));
     }
   }
 }

 class Circle {

   int c1 = 0;
   int c2 = -40;
   float c3 = 50;
   float c4 = 50;

   Circle(int tc1, int tc2, float tc3, float tc4) {
   c1 = tc1;
   c2 = tc2;
   c3 = tc3;
   c4 = tc4;
   }
  }

 class Flower {

 float centerX;
 float centerY;
 float posX;
 float posY;
 float maxSize = 51;
 float maxFactor = 40;
 float sizes = 0;
 float factor = 0;
 float speed = 0.17;

 Flower() {
 }
 Flower(float _centerX, float _centerY)
 {
  centerX = _centerX;
  centerY = _centerY;
 }
 void setCenter(float x, float y)
 {
  centerX = x;
  centerY = y;
 }
 void display()
 {
   // added line below
   scale(-min((float)(frameCount)/250, 1), min((float)(frameCount)/250, 1));
   for (int i = -18; i < 360; i+=72)
   {
      posX = centerX + cos(radians(i)) * factor;
      posY = centerY + sin(radians(i)) * factor;
     noStroke();
     fill(170, 14, 24); // blue
     ellipse(posX, posY, sizes, sizes);
   }
   fill(14, 17, 170);
   ellipse(centerX, centerY, sizes , sizes );
 }
 void grow()
 {
//   factor = (factor < maxFactor )?  factor + speed: maxFactor;
//   sizes = (sizes < maxSize )?  sizes + speed*1.3 : maxSize;
   // modified line below
   factor = maxFactor;
   sizes = maxSize;
 }
}// end of Flower 
```

# c# - XNA 原语未按预期呈现

> ID：13521425
> 
> 赞同：1
> 
> 时间：2012-11-22T23:42:32.760
> 
> 标签：c#, 3d, rendering, xna-4.0, primitive

我对 XNA 有一个奇怪的问题。

我一直在阅读以下教程： [http ://www.i-programmer.info/projects/119-graphics-and-games/1108-getting-started-with-3d-xna.html](http://www.i-programmer.info/projects/119-graphics-and-games/1108-getting-started-with-3d-xna.html)

我已经完成了教程，但我完成的立方体渲染如下： ![在此处输入图像描述](../Images/58d32b4c1ee79c651f0658b12d247f4e.png)

![在此处输入图像描述](../Images/a3ce2c804c689b702ca4e33593b60ff4.png)

![在此处输入图像描述](../Images/dc6aa7c561d79ed21189f77008970b6d.png)

如您所见，某些顶点不会根据立方体的旋转进行渲染。

如果移除旋转，立方体呈现如下： ![在此处输入图像描述](../Images/67a1030082e3dc75796421bc59df8c55.png)

我的完整代码如下（更新：这是固定代码，正确渲染）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace _3DTutorial {
    /// <summary>
    /// This is the main type for your game
    /// </summary>
    public class Game1 : Microsoft.Xna.Framework.Game {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;

        // Tut items
        private BasicEffect effect;
        private VertexPositionNormalTexture[] cube;
        private float angle = 0;

        public Game1() {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        /// <summary>
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// </summary>
        protected override void Initialize() {
            // TODO: Add your initialization logic here

            effect = new BasicEffect(graphics.GraphicsDevice);

            effect.AmbientLightColor = new Vector3(0.0f, 1.0f, 0.0f);
            effect.DirectionalLight0.Enabled = true;
            effect.DirectionalLight0.DiffuseColor = Vector3.One;
            effect.DirectionalLight0.Direction = Vector3.Normalize(Vector3.One);

            effect.LightingEnabled = true;

            Matrix projection = Matrix.CreatePerspectiveFieldOfView(
                (float)Math.PI / 4.0f,
                (float)this.Window.ClientBounds.Width / (float)this.Window.ClientBounds.Height,
                1f, 
                10f
            );

            effect.Projection = projection;
            Matrix V = Matrix.CreateTranslation(0f, 0f, -10f);
            effect.View = V;

            RasterizerState rs = new RasterizerState();
            rs.FillMode = FillMode.WireFrame;
            graphics.GraphicsDevice.RasterizerState = rs;

            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent() {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            // TODO: use this.Content to load your game content here

            cube = MakeCube();
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent() {
            // TODO: Unload any non ContentManager content here
        }

        /// <summary>
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Update(GameTime gameTime) {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
                this.Exit();

            // TODO: Add your update logic here

            angle = angle + 0.005f;
            if (angle > 2 * Math.PI) {
                angle = 0;
            }

            Matrix R = Matrix.CreateRotationY(angle) * Matrix.CreateRotationX(.4f);
            Matrix T = Matrix.CreateTranslation(0.0f, 0f, 5f);
            effect.World = R * T;

            base.Update(gameTime);
        }

        /// <summary>
        /// This is called when the game should draw itself.
        /// </summary>
        /// <param name="gameTime">Provides a snapshot of timing values.</param>
        protected override void Draw(GameTime gameTime) {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            // TODO: Add your drawing code here

            foreach (EffectPass pass in effect.CurrentTechnique.Passes) {
                pass.Apply();
                graphics.GraphicsDevice.DrawUserPrimitives<VertexPositionNormalTexture>(PrimitiveType.TriangleList, cube, 0, (cube.Length / 3));
            }

            base.Draw(gameTime);
        }

        protected VertexPositionNormalTexture[] MakeCube() {
            VertexPositionNormalTexture[] vertexes = new VertexPositionNormalTexture[36];
            Vector2 Texcoords = new Vector2(0f, 0f);

            // A square made of two triangles
            Vector3[] face = new Vector3[6];
            // First triangle - bottom left
            face[0] = new Vector3(-1f, -1f, 0.0f);
            // First triangle - top left
            face[1] = new Vector3(-1f, 1f, 0.0f);
            // First triangle - top right
            face[2] = new Vector3(1f, 1f, 0.0f);
            // Second triangle - top right
            face[3] = new Vector3(1f, 1f, 0.0f);
            // Second triangle - bottom right
            face[4] = new Vector3(1f, -1f, 0.0f);
            // Second triangle - bottom left
            face[5] = new Vector3(-1f, -1f, 0.0f);

            Matrix RotY90 = Matrix.CreateRotationY(-(float)Math.PI / 2f);
            Matrix RotX90 = Matrix.CreateRotationX(-(float)Math.PI / 2f);

            for (int i = 0; i <= 2; i++) {

                // Front face
                vertexes[i] = new VertexPositionNormalTexture(
                    face[i] + Vector3.UnitZ, 
                    Vector3.UnitZ,
                    Texcoords
                );
                vertexes[i + 3] = new VertexPositionNormalTexture(
                    face[i + 3] + Vector3.UnitZ,
                    Vector3.UnitZ,
                    Texcoords
                );
                // Back face
                vertexes[i + 6] = new VertexPositionNormalTexture(
                    face[2 - i] - Vector3.UnitZ,
                    -Vector3.UnitZ,
                    Texcoords
                );
                vertexes[i + 6 + 3] = new VertexPositionNormalTexture(
                    face[5 - i] - Vector3.UnitZ,
                    -Vector3.UnitZ,
                    Texcoords
                );

                // Left face
                vertexes[i + 12] = new VertexPositionNormalTexture(
                     Vector3.Transform(face[i], RotY90) - Vector3.UnitX,
                     -Vector3.UnitX, 
                     Texcoords
                );
                vertexes[i + 12 + 3] = new VertexPositionNormalTexture(
                    Vector3.Transform(face[i + 3], RotY90) - Vector3.UnitX,
                    -Vector3.UnitX, 
                    Texcoords
                );
                // Right face
                vertexes[i + 18] = new VertexPositionNormalTexture(
                    Vector3.Transform(face[2 - i], RotY90) + Vector3.UnitX,
                    Vector3.UnitX,
                    Texcoords
                );
                vertexes[i + 18 + 3] = new VertexPositionNormalTexture(
                    Vector3.Transform(face[5 - i], RotY90) + Vector3.UnitX,
                    Vector3.UnitX,
                    Texcoords
                );

                // Top face
                vertexes[i + 24] = new VertexPositionNormalTexture(
                    Vector3.Transform(face[i], RotX90) + Vector3.UnitY,
                    Vector3.UnitY,
                    Texcoords
                );
                vertexes[i + 24 + 3] = new VertexPositionNormalTexture(
                    Vector3.Transform(face[i + 3], RotX90) + Vector3.UnitY,
                    Vector3.UnitY,
                    Texcoords
                );
                // Bottom face
                vertexes[i + 30] = new VertexPositionNormalTexture(
                    Vector3.Transform(face[2 - i], RotX90) - Vector3.UnitY,
                    -Vector3.UnitY,
                    Texcoords
                );
                vertexes[i + 30 + 3] = new VertexPositionNormalTexture(
                    Vector3.Transform(face[5 - i], RotX90) - Vector3.UnitY,
                    -Vector3.UnitY,
                    Texcoords
                );

            }

            return vertexes;
        }
    }
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T23:51:32.963

我会把它放在评论中，但我还没有这样做的特权。

我没有在这里安装 XNA，所以我无法对此进行测试，但看起来你的脸被画成朝向错误的方向。

面总是有可见和透视的一面。穿过你的脸，把它们翻过来。当你这样做时，你会看到它们出现和消失。

# nginx - date.timezone 不适用于 nginx

> ID：13521427
> 
> 赞同：1
> 
> 时间：2012-11-22T23:42:59.760
> 
> 标签：nginx, timezone, php

我尝试在主 php.ini 文件中添加 date.timezone 指令，该文件位于 /etc/php.ini 我还使用 phpinfo(); 验证了它的位置。

这正是我添加的内容：

```
 date.timezone = "Europe/London" 
```

然后我重新启动了 nginx（服务 nginx 重新启动），但是当我再次回显 phpinfo() 时，时区仍然显示 UTC，我认为这是默认时区，并且在我设置时区之前，roundcube 不会让我安装，有什么想法吗？

**编辑** 刚刚停止 nginx，启动 apache 并且时区设置正确。所以这必须是 nginx 特定的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-27T16:00:51.717

编辑 php.ini 后重新启动 php 服务而不是 nginx 怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:19:15.567

不知道出了什么问题，但我相信 nGinx 可能配置错误。停止服务并运行 Apache 解决了它，但这只是暂时的。只是想我会发布让大家知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-07T05:09:12.917

时区在 Nginx 上运行良好的一种方法是在文件**www.conf**的最后一行输入它[通常位于 /etc/php5/fpm/pool.d/www.conf ；在 Ubuntu 安装示例中]，如下所示：

```
php_admin_value[date.timezone] = America/Sao_Paulo 
```

现在你只需重启你的 Linux

# drop-down-menu - Twitter Bootstrap 下拉菜单在点击时关闭

> ID：13521436
> 
> 赞同：6
> 
> 时间：2012-11-22T23:43:51.473
> 
> 标签：drop-down-menu, twitter-bootstrap

我没有让这个工作。下拉菜单一直在关闭。

我希望能够从下拉菜单中发送消息。

我将`bootstrap.js`,`bootstrap.css`和都包含`bootstrap-responsive.css`在标题中。

我怎样才能让这个下拉列表不关闭？

```
<head>
<script type='text/javascript'>//<![CDATA[
    $(window).load(function () {
        $('.dropdown-menu textarea a').click(function (e) {
            e.stopPropagation();
        });

    });

    function ShowDr(div) {
        $("#medr" + div).css("display", "block");
        $("#xdr" + div).focus();
    }

    //]]>  
</script>
</head>
<body>

 <ul class="nav">
   <li class="dropdown" data-dropdown="dropdown">
     <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">      Message 
     <b class="caret"></b></a>
     <ul class="dropdown-menu dropdown-menu-large">
        This is a message from the user John to Ann. If Ann wants to send an answer she will click the link. Then 
        the textarea will become visible. 
        <a href="javascript:void(0)" onclick="javascript:ShowDr('18')"><img src='/img/reply.gif'> Answer</a><br/>
        <div id="medr18" style="display:none" class="medr">            
            <li>
                <div style="padding:20px;">
                    <textarea name="xdr18" id="xdr18" class="textareasmall"></textarea> <br /><input type=button value="Send" class="btn btn-success btn-medium" onclick="GoM('2','Message sent')" />
                </div>
            </li>
         </div>
       </ul>     
   </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T01:47:52.483

您需要正确选择文本区域才能使该`stopPropagation()`方法起作用。尝试这个：

**JS**

```
$('.dropdown-menu textarea').click(function(e) {
    e.stopPropagation();
}); 
```

此外，您的 textarea 不能是元素的子`ul`元素，因此请将其包含在`li`列表项中。

演示：http: [//jsfiddle.net/ENWFy/](http://jsfiddle.net/ENWFy/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-18T08:18:10.250

自答案被接受以来已经过去了一段时间，但如果你想保持下拉菜单打开，如果它像一种对话框一样，我认为最好的方法是：

```
$('.dropdown').dropdown().on("hide.bs.dropdown", function(e) {
           if ($.contains(dropdown, e.target)) {
                e.preventDefault();
            //or return false;
            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T23:57:57.007

您缺少 <form> 标签：

```
<ul class="nav">
     <li class="dropdown" data-dropdown="dropdown">
        <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">    Message 
        <b class="caret"></b></a>
        <ul class="dropdown-menu dropdown-menu-large">
           <form>
             <textarea name="xd" id="xd" class="textareasmall"></textarea><br /><input type=button value="Send" class="btn btn-success btn-medium" onclick="GoM('2','Message sent')" />
           </form>
         </ul>     
    </li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-24T02:55:00.840

最好的答案是执行单击，因此它的行为与用户单击鼠标以隐藏下拉菜单的行为相同，为此，请将此快照代码添加到您的页面：

```
<script>
    $(document).ready(function () {
        $("li.dropdown ul.dropdown-menu li").click(function (event) {
            event.toElement.parentElement.click();
        })
    })
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-20T07:36:57.403

您可以一起省略下拉调用，引导下拉菜单在没有它的情况下工作。确保正确包装脚本，可以将其包含在页面的标题或正文中，尽管我个人更喜欢将其放在页面的正文中。

```
$('.dropdown-menu input, .dropdown-menu label').click(function(e) {
    e.stopPropagation();
}); 
```

# sql - 新触发，需要修改

> ID：13521440
> 
> 赞同：0
> 
> 时间：2012-11-22T23:45:05.790
> 
> 标签：sql, sql-server, triggers

两张表：

```
 Customer: Cus_ID, Status
    Payment: Pay_ID, Cus_ID, PaidOrNot 
```

要求是在将“Yes”设置为“PaidOrNot”时，然后自动将客户状态设置为“VIP”。

```
 CREATE TRIGGER AutoVIP

    AFTER UPDATE OR INSERT ON Payment

    BEGIN

        IF PaidOrNot = Yes
        THEN UPDATE Customer set Status = VIP

    END 
```

我对SQL语法不太熟悉，这个触发器似乎不起作用，你能帮我修改一下吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:51:18.107

对于 SQL Server，请尝试以下操作：

```
 CREATE TRIGGER AutoVIP
 ON Payment
 AFTER UPDATE, INSERT
 AS 
   BEGIN
     DECLARE @paid VARCHAR(5)
     DECLARE @custId INT
     SET @paid = (SELECT PaidOrNot FROM INSERTED)
     SET @custId = (SELECT Cus_ID FROM INSERTED)
     IF @paid = 'Yes'
     BEGIN
       UPDATE Customer set Status = 'VIP'
        where Cus_ID = @custId;
     END;
 END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T00:10:48.653

如果你尝试这个会发生什么？

我刻意试图让它尽可能不言自明。

```
CREATE TRIGGER AutoVIP
ON Payment
AFTER INSERT, UPDATE
AS
BEGIN
  DECLARE @PaidOrNot VARCHAR(3) -- Or whatever datatype it is really
  DECLARE @CustomerId INT -- Or whatever datatype it is
  SET @PaidOrNot = (SELECT PaidOrNot FROM INSERTED)
  SET @CustomerId = (SELECT Cus_ID FROM INSERTED)
  IF @PaidOrNot = 'Yes'
  BEGIN
    UPDATE Customer set Status = VIP WHERE Cus_ID = @CustomerId
  END
END 
```

# javascript - 从 ember-data 版本 4 升级到 8 时 hasMany 和属于问题

> ID：13521446
> 
> 赞同：2
> 
> 时间：2012-11-22T23:45:51.987
> 
> 标签：javascript, ember.js

我有一个 Item 有很多 Things 和 Thing belongsTo Item 关联。

我可以做 item.get("things")

但是当我尝试等相反的东西.get（“item”）时，我得到了null！

从 5 开始，这在现在的版本中是否有不同的工作方式？我还需要做什么/新的事情吗？有谁知道一个错误？

我已经设置了映射并且没有收到任何错误

请帮忙。

非常感谢瑞克

# linux - 在 Debian 与 CentOS 上安装 Perl 并出现 Makefile.PL 错误

> ID：13521456
> 
> 赞同：1
> 
> 时间：2012-11-22T23:47:39.820
> 
> 标签：linux, perl, centos, debian, packages

我试图弄清楚如何为 Perl 安装正确的 Debian 软件包。我收到以下错误：

```
Failed to read the configuration: Bad file descriptor at Makefile.PL line 8. 
```

我的 Makefile.PL 文件包含以下行至第 9 行：

```
use 5.008000;
use ExtUtils::MakeMaker;

# Read the parameters from Triceps Makefiles 
delete $ENV{MAKEFLAGS}; # these cause spurious messages from make
delete $ENV{MAKELEVEL};
my $TRICEPS_CONF = `make --quiet -f ../../cpp/Makefile.inc getconf`;
die "Failed to read the configuration: $!" if ($! != 0); 
```

如[http://www.directadmin.com/forum/showthread.php?t=43558&page=1](http://www.directadmin.com/forum/showthread.php?t=43558&page=1)所述，我正在尝试为当前版本的 Debian 找到等效的 apt-get install 命令：

```
yum install cpan
yum install perl-ExtUtils-CBuilder perl-ExtUtils-MakeMaker
cpan install ExtUtils::Install 
```

我正在尝试找到等效的 Debian 解决方案，但不确定要下载或安装哪些软件包。在 Debain 中正确执行此操作所需的确切 apt-get install 命令是什么？

这些 Perl 软件包没有像您期望的那样出现在 Debian 中 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:44:13.553

`$!`在检查它是否包含有用的东西之前，您正在使用它。代码应该是这样的：

```
die("Failed to read the configuration: " . (
   $? < 0    ? "Unable to launch: $!" :
   $? & 0x7F ? "Signal ".($? & 0x7F) :
   $? >> 8   ? "Exit ".($? >> 8) :
   "Unknown error"
)) if $?; 
```

# python - websocket 扩展位

> ID：13521457
> 
> 赞同：1
> 
> 时间：2012-11-22T23:47:43.283
> 
> 标签：python, http, websocket

我正在用 Python 编写一个 websocket 服务器实现，我对扩展协商的工作原理有点迷茫。当然有 Sec-WebSocket-Extensions 标头可供客户端请求扩展和服务器允许/拒绝它们。正是这些扩展与 RSV1、RSV2 和 RSV3 位的关系让我有些困惑。

deflate-frame 扩展使用 RSV1。我知道没有其他扩展。如果/当它们被创建时，它们将如何映射到 RSV1、RSV2 和 RSV3？为什么每个 WebSocket 帧都会传输这些信息？

我可能疏忽了没有用放大镜仔细研究 RFC，但我似乎找不到任何可以解释这一点的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:07:05.433

WebSocket 扩展在不同于 WebSocket 协议本身 (RFC6455) 的 RFC 中指定。

WebSocket 工作组“未采用”按帧压缩而不是按消息压缩：

*   [http://www.ietf.org/mail-archive/web/hybi/current/msg09816.html](http://www.ietf.org/mail-archive/web/hybi/current/msg09816.html)
*   [https://datatracker.ietf.org/doc/html/draft-ietf-hybi-permessage-compression-04](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-permessage-compression-04)

# c++ - 将世界、视图和投影矩阵传递给 Direct3D 中的着色器

> ID：13521459
> 
> 赞同：4
> 
> 时间：2012-11-22T23:47:54.533
> 
> 标签：c++, matrix, directx, shader, direct3d

我正在阅读有关 DirectX 的所有 MS 教程，我注意到它们总是将世界、视图和投影矩阵传递给该技术，然后在顶点着色器中将它们相乘。

是否有理由这样做，而不是在绘制之前将矩阵相乘，然后将单个 WVP 矩阵传递给着色器？这样矩阵将每帧相乘一次，而不是每个顶点一次，对吧？

提前致谢。

编辑：使用示例代码更新

微软教程：

```
matrix World;
matrix View;
matrix Projection;

struct VS_INPUT
{
    float4 Pos : POSITION;
    float4 Color : COLOR;
};

struct VS_OUTPUT
{
    float4 Pos : SV_POSITION;
    float4 Color : COLOR;
};

PS_INPUT VS( VS_INPUT input )
{
    VS_OUTPUT output;
    output.Pos = mul( input.Pos, World );
    output.Pos = mul( output.Pos, View );
    output.Pos = mul( output.Pos, Projection );
    output.Color = input.Color;

    return output;
} 
```

为什么不这样：

```
matrix WVP;

struct VS_INPUT
{
    float4 Pos : POSITION;
    float4 Color : COLOR;
};

struct VS_OUTPUT
{
    float4 Pos : SV_POSITION;
    float4 Color : COLOR;
};

PS_INPUT VS( VS_INPUT input )
{
    VS_OUTPUT output;
    output.Pos = mul( input.Pos, WVP );  
    output.Color = input.Color;

    return output;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T00:58:39.830

在此示例中，您对世界、视图和投影矩阵进行预乘的建议是有意义的，并且会更有效。对于这个简单的示例，我不确定为什么教程将它们分开。

有时将它们分开是有意义的（或者将世界矩阵分开并具有组合的视图投影矩阵）。例如，有时您可能希望在世界空间而不是对象空间中进行照明，因此您希望访问顶点着色器中的世界空间顶点位置。如果您正在执行某种实例化，您可能希望保持世界空间矩阵分开，并由 DeadMG 指出。在许多情况下，尽管您希望按照您的建议组合它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T23:56:40.140

因为每个对象的 World 矩阵都会发生变化。如果您将 WVP 矩阵传递给着色器，则每次重新绘制时都必须更改该矩阵 - 效率非常低，并且您将在 CPU 上将其相乘，这也将非常慢。另一方面，您可以在硬件实例化缓冲区中一次将所有世界矩阵发送到 GPU，然后在 GPU 上将它们全部相乘，这在现代 GPU 的规模上真的没有什么，然后发出一个 Draw称呼。

简而言之，当您添加硬件实例时，在着色器中执行此操作会*大大*提高效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T23:51:42.347

我认为每个矩阵都可以在每一帧中改变。除非您以相同的方式查看某些内容，否则如果您将相机视图放置在其他角度或坐标以观察世界/对象，则视图可能会发生变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T01:11:01.953

> 这样矩阵将每帧相乘一次，而不是每个顶点一次，对吧？

术语“每帧”在这里没有意义，为什么我们称它为顶点着色器？因为它是每个顶点的过程，所以无论您将 3 矩阵乘以单个矩阵的位置（在着色器外部或内部），每个顶点都应在绘制之前应用于该单个矩阵。而GPU是此类任务的更好选择，例如矢量/矩阵计算和其他图形处理。

# c++ - 强制控制台关闭时的互斥锁死锁

> ID：13521461
> 
> 赞同：1
> 
> 时间：2012-11-22T23:48:00.967
> 
> 标签：c++, multithreading, mutex

有时我会遇到互斥锁死锁（因为我正在使用互斥锁进行多线程处理），当我通过按下应用程序窗口工具栏上的叉号来强制我的 c++ 控制台应用程序（win32）退出时，但当我通过Windows 任务管理器。我不得不提一下，当我使用程序中的内置退出命令关闭应用程序时，这一切都很好，该命令正在退出我已经启动的所有线程。当我使用“蛮力”方法关闭程序时，我可以做些什么来防止死锁吗？

# facebook - 提要对话与显式共享

> ID：13521463
> 
> 赞同：6
> 
> 时间：2012-11-22T23:48:08.347
> 
> 标签：facebook, facebook-opengraph, feed

使用提要对话框与显式开放图共享的优缺点是什么？他们似乎在做或多或少相同的事情——在用户的时间轴上发布新闻故事，并可能在他朋友的新闻提要上发布。提要对话框更具侵入性，因为它有一个 facebook 弹出窗口。除此之外，facebook如何显示/区分两者是否有区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T13:41:14.990

主要区别在于它如何适合您的用户旅程。

Feed 对话框根本不需要用户安装您的应用程序，而 Open Graph 解决方案要求您的用户已经安装了您的应用程序并授予扩展权限，因此有两个弹出对话框，典型的下降率约为 50%。

这是否回答你的问题 ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:59:17.440

我想知道为什么绝大多数希望我分享故事的应用程序都采用 graphAPI 方法？有什么好处值得强迫我扩展权限？

也许他们指望这样一个事实，即如果我愿意第一次跳过篮球，我将更有可能在未来分享故事和/或允许他们代表我发帖。

# java - Android：FileObserver 不会收到有关 FS 更改的通知

> ID：13521464
> 
> 赞同：0
> 
> 时间：2012-11-22T23:48:11.920
> 
> 标签：java, android, service, fileobserver

我需要一直跟踪从整个文件系统中删除的图像和视频（即使我的 UI 应用程序没有运行），所以在手机启动后直接直到它关闭。为此，我正在使用服务和 FileObserver。不幸的是，下面附加的代码不起作用（我没有使用调试器来调试该方法

公共无效onEvent（int事件，字符串文件）

虽然我对 FS 做了一些更改......服务开始了，显然 onStarted() 方法被执行了......

请帮忙

```
public class DataChangeListener extends Service {

    private static Context context;

    @Override
    public IBinder onBind(Intent intent) {
        context = this;
        return null;
    }

    @Override
    public void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);
        context = this;

        FileObserver observer = new FileObserver("/") {

            @Override
            public void onEvent(int event, String file) {
                System.out.println();
            }
        };
        observer.startWatching();
    }

    @Override
    public boolean onUnbind(Intent intent) {
        return super.onUnbind(intent);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T23:57:18.177

> 我需要一直跟踪从整个文件系统中删除的图像和视频

除非您创建操作系统的修改版本，否则这是不可能的，因为您将无法始终保持服务运行。例如，用户可以随时摆脱您的服务。

> 不幸的是，下面附加的代码不起作用

首先，您对 没有读取权限`/`，这可能会干扰`FileObserver`操作。

[其次，您错过了`FileObserver`文档](http://developer.android.com/reference/android/os/FileObserver.html)中突出显示的段落：

> **警告**：如果 FileObserver 被垃圾回收，它将停止发送事件。为确保您继续接收事件，您必须保留对其他活动对象的 FileObserver 实例的引用。

您正在允许`FileObserver`垃圾收集。

# c++ - Freetype 和 OpenGL 的访问冲突

> ID：13521466
> 
> 赞同：1
> 
> 时间：2012-11-22T23:48:16.700
> 
> 标签：c++, freetype

当我运行我的程序时，窗口显示大约 3 秒（如预期的那样，背景为白色，但没有文本）然后中断，说在 FreeType 代码中存在访问冲突。我很确定这是加载字体，因为我的调试文本打印它找不到它，而且它也不能使用面部的宽度和高度，所以它返回一个错误。我试过将 arial.ttf 放在 .exe 目录、项目目录、任何地方。没有骰子。这是我的 main.cpp：

```
int main()
{
        int running = GL_TRUE;

        debug.Print("Program initialized...");
        window.Create( 800, 600, "OpenGL");

        TEXT text;

        while( running )
        {
                glClearColor( 1.0f, 1.0f, 1.0f, 1.0f );
                glClear( GL_COLOR_BUFFER_BIT );

                glEnable(GL_BLEND);
                glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

                text.Create("The quick brown fox jumps over the lazy dog", "arial.ttf", 300, 400, 1, 1, 1,   2/600, 2/800);

                glfwSwapBuffers();
        }

        glDeleteTextures(1, &tex);

        glDeleteProgram( shaderProgram );
        glDeleteShader( fragmentShader );
        glDeleteShader( vertexShader );

        glDeleteBuffers( 1, &vbo );

        debug.Print("Program terminated.");
} 
```

这是我的Text.h：

```
#ifndef _TEXT
#define _TEXT

#include "debug.h"
#include <GL/glew.h>
#include <GL/glfw.h>
#include <ft2build.h>
#include FT_FREETYPE_H

class TEXT
{
public:
        void Create(char* Text, char* fontName, int posx, int posy, int r, int g, int b, int sizex, int sizey);
};

#endif 
```

这是我的 Text.cpp：

```
#define GLEW_STATIC
#include "text.h"

const char* textvertexSource =
        "version 150\n"
        "in vec4 coord;"
        "out vec2 texcoord;"
        "void main {"
        "       gl_Position = vec4(coord.xy, 0, 1);"
        "       texcoord = coord.zw;"
        "}";

const char* textfragmentSource =
        "version  150\n"
        "in vec2 texcoord;"
        "uniform sampler2D tex;"
        "uniform vec4 color;"
        "void main() {"
        "       gl_FragColor = vec4(1, 1, 1, texture2D(tex, texcoord).a * color;"
        "}";

void TEXT::Create(char* text, char* fontName, int posx, int posy, int r, int g, int b, int sizex, int sizey)
{

        // OpenGL functions
        GLuint vbo;
        glGenBuffers(1, &vbo);
        glBindBuffer(GL_ARRAY_BUFFER, vbo);

        GLuint vertexShader = glCreateShader( GL_VERTEX_SHADER );
        glShaderSource( vertexShader, 1, &textvertexSource, NULL );
        glCompileShader( vertexShader );

        GLuint fragmentShader = glCreateShader( GL_FRAGMENT_SHADER );
        glShaderSource( fragmentShader, 1, &textfragmentSource, NULL );
        glCompileShader( fragmentShader );

        GLuint shaderProgram = glCreateProgram();
        glAttachShader( shaderProgram, vertexShader );
        glAttachShader( shaderProgram, fragmentShader );
        glBindFragDataLocation( shaderProgram, 0, "outColor" );
        glLinkProgram( shaderProgram );
        glUseProgram( shaderProgram );

        GLint posAttrib = glGetAttribLocation( shaderProgram, "coord" );
        glEnableVertexAttribArray(posAttrib);
        glVertexAttribPointer(posAttrib, 4, GL_FLOAT, GL_FALSE, 0, 0);

        GLint colAttrib = glGetAttribLocation( shaderProgram, "color" );
        glEnableVertexAttribArray(colAttrib);
        glVertexAttribPointer(colAttrib, 4, GL_INT, GL_FALSE, 0, 0);

        GLint uniform_tex = glGetUniformLocation(shaderProgram, "tex");

        GLuint tex;
        glActiveTexture(GL_TEXTURE0);
        glGenTextures(1, &tex);
        glBindTexture(GL_TEXTURE_2D, tex);
        glUniform1i(uniform_tex, 0);

        GLuint uniform_color = glGetUniformLocation(shaderProgram, "color");

        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

        glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

        // Actual font rendering
        FT_Library ft;

        if(FT_Init_FreeType(&ft))
                debug.Print("Could not initiate freetype library.");

        FT_Face face;
        if(FT_New_Face(ft, fontName, 0, &face))
        {
                debug.Print("Could not load font: ");
                debug.Print(fontName);
        }

        FT_Set_Pixel_Sizes(face, sizex, sizey);

        FT_GlyphSlot glyph = face->glyph;

        const char *p;

        for(p = text; *p; p++) {
                if(FT_Load_Char(face, *p, FT_LOAD_RENDER))
                        continue;

                glTexImage2D(
                  GL_TEXTURE_2D,
                  0,
                  GL_ALPHA,
                  glyph->bitmap.width,
                  glyph->bitmap.rows,
                  0,
                  GL_ALPHA,
                  GL_UNSIGNED_BYTE,
                  glyph->bitmap.buffer
                );

                float x2 = posx + glyph->bitmap_left * sizex;
                float y2 = -posy - glyph->bitmap_top * sizey;
                float w = glyph->bitmap.width * sizex;
                float h = glyph->bitmap.rows * sizey;

                GLfloat box[4][4] = {
                        {x2,     -y2    , 0, 0},
                        {x2 + w, -y2    , 1, 0},
                        {x2,     -y2 - h, 0, 1},
                        {x2 + w, -y2 - h, 1, 1},
                };

                glBufferData(GL_ARRAY_BUFFER, sizeof box, box, GL_DYNAMIC_DRAW);
                glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

                posx += (glyph->advance.x >> 6) * sizex;
                posy += (glyph->advance.y >> 6) * sizey;

                GLfloat color[4] = {r, g, b, 1};
                glUniform4fv(uniform_color, 1, color);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T03:02:48.983

我将尝试扩展我的评论。

在您的`while( running )`循环中，您调用`text.Create("The quick brown fox jumps over the lazy dog", "arial.ttf", 300, 400, 1, 1, 1, 2/600, 2/800);`. 当查看这个函数的细节时，它不仅仅是创建一个新的文本条目，它还初始化`FreeType`、加载`fonts`等等......

您希望您的游戏/模拟`FreeType`只初始化一次并`text.Create`返回一个将在您的游戏/模拟中持续存在的对象。

在该`while(running)`部分中，您应该调用`Render`对象上的方法以将其呈现在屏幕上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T12:31:37.280

问题是您使用 sizex 和 sizey 设置 FT_Set_Pixel_Sizes ，然后在为文本创建框时使用 sizex 和 sizey 来缩放框。

因此，如果您将 sizex 和 sizey 设置为 48，这也意味着您将文本框缩放 48，这是一种很大的方式，如果您将 sizex 和 sizey 设置为 1，那么您的字体的像素大小会非常小。

**修复：添加参数大小或高度和宽度以创建函数并将其用于 FT_Set_Pixel_Size**

前任。

```
void Create(char* Text, char* fontName, int posx, int posy, int r, int g, int b, int sizex, int sizey, int height, int width){
...
FT_Set_Pixel_Size(face, width, height); //Not sizex and sizey because thats what you are using to scale the text box
} 
```

# regex - 这个正则表达式有什么作用？

> ID：13521468
> 
> 赞同：2
> 
> 时间：2012-11-22T23:48:25.257
> 
> 标签：regex

下面的正则表达式有什么作用？

```
^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{4}$ 
```

特别是，该部分的目的是什么`\1`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T23:53:05.860

你应该看看[教程](http://www.regular-expressions.info/tutorial.html)。那里几乎没有任何先进的东西（除了`\1`你指出的）：

```
^         # the start of the string
\d        # a digit
{1,2}     # 1 or 2 of those
(         # start the first subpattern, which can later be referred to with \1
  \-      # a literal hyphen (there is no need for escaping, but it doesn't hurt)
|         # or
  \/      # a literal slash
|         # or
  \.      # a literal period
)         # end of subpattern
\d{1,2}   # one or two more digits
\1        # the exact same thing that was matched in the first subpattern. this
          # is called a backreference
\d{4}     # 4 digits
$         # the end of the string 
```

即，这断言输入字符串仅包含一个日期，不多不少，格式`ddmmyyyy`（或也可能是`mmddyyyy`），带有可能的定界符`.`，`-`或`/`（以及一致的定界符用法）。请注意，它不能确保*正确*的日期。月和日可以是从`00`到`99`。

**请注意**， 的确切含义`\d`取决于您使用的正则表达式引擎和文化。*通常*它的意思是`[0-9]`（任何 ASCII 数字）。但例如在 .NET 中，它也可以表示“任何代表数字的 Unicode 字符”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T23:52:57.820

1.  `^`字符串的开始
2.  `\d{1,2}`匹配 1 位或 2 位数字 (0-9)
3.  `(\-|\/|\.)`匹配“-”**或**“/”**或**“。”
4.  `\d{1,2}`再次匹配 1 或 2 位数字 (0-9)
5.  `\1`是一个**反向引用。**匹配第 3 组捕获的相同字符的另一个实例
6.  `\d{4}`匹配 4 位数字
7.  `$`字符串结束

这将匹配以下格式的日期。请注意，`dd`没有**检查**`mm`、 和`yyyy`范围，因此日期可能仍然无效。

 **```
d-m-yyyy
d/m/yyyy
d.m.yyyy 
```

`d`&`m`可以是 1位**或**2 位数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T23:53:41.073

它匹配：

*   一位或两位数
*   破折号、斜线或句号
*   一位或两位数
*   另一个分隔符，就像之前的那个
*   四位数

是对第一组匹配的`\1`值的反向引用，即`(\-|\/|\.)`。

例如：

```
2-14-2003
99.99.9999
1/2/0001 
```**

# java - Java RPN 计算器空指针问题

> ID：13521469
> 
> 赞同：0
> 
> 时间：2012-11-22T23:48:38.553
> 
> 标签：java, calculator, rpn

嗨，我已经设法解决了空指针问题。

现在我几乎已经让代码工作了，除非它正在评估我得到每个方程的答案为 15？

我的 TestClass 如下所示：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;
import java.util.StringTokenizer;

public class TestClass {

private static final int LEFT_ASSOC = 0;
private static final int RIGHT_ASSOC = 1;
static String OPERATORS1 = "+-*/()";

// Operators
private static final Map<String, int[]> OPERATORS = new HashMap<String, int[]>();
static {
    // Map<"token", []{precedence, associativity}>
    OPERATORS.put("+", new int[] { 2, LEFT_ASSOC });
    OPERATORS.put("-", new int[] { 2, LEFT_ASSOC });
    OPERATORS.put("*", new int[] { 3, LEFT_ASSOC });
    OPERATORS.put("/", new int[] { 3, LEFT_ASSOC });
    OPERATORS.put("(", new int[] {1, RIGHT_ASSOC});
    OPERATORS.put(")", new int[] {1, LEFT_ASSOC});
}

private static boolean isOperator(String token) {
    return OPERATORS.containsKey(token);
}

// Test associativity of operator token
private static boolean isAssociative(String token, int type) {
    if (!isOperator(token)) {
        throw new IllegalArgumentException("Invalid token: " + token);
    }

    if (OPERATORS.get(token)[1] == type) {
        return true;
    }
    return false;
}

// Compare precedence of operators.
private static final int cmpPrecedence(String token1, String token2) {
    if (!isOperator(token1) || !isOperator(token2)) {
        throw new IllegalArgumentException("Invalid tokens: " + token1
                + " " + token2);
    }
    return OPERATORS.get(token1)[0] - OPERATORS.get(token2)[0];
}

public static String[] infixToRPN(String[] inputTokens) {
    myArrayList<String> out = new myArrayList<String>();
    myStack<String> stack = new myStack<String>();
    // For each token
    for (String token : inputTokens) {
        StringTokenizer tokens = new StringTokenizer(token,OPERATORS1,true);
        while (tokens.hasMoreTokens()) {
             token = tokens.nextToken();

        }
        // If token is an operator
        if (isOperator(token)) {
            // While stack not empty AND stack top element
            // is an operator
            while (!stack.isEmpty() && isOperator(stack.peek())) {
                if ((isAssociative(token, LEFT_ASSOC) && cmpPrecedence(
                        token, stack.peek()) <= 0)
                        || (isAssociative(token, RIGHT_ASSOC) && cmpPrecedence(
                                token, stack.peek()) < 0)) {
                    out.add(stack.pop());
                    continue;
                }
                break;
            }
            // Push the new operator on the stack
            stack.push(token);
        }
        // If token is a left bracket '('
        else if (token.equals("(")) {
            stack.push(token); 
        }
        // If token is a right bracket ')'
        else if (token.equals(")")) {
            while (!stack.isEmpty() && !stack.peek().equals("(")) {
                out.add(stack.pop());
            }
            stack.pop();
        }
        // If token is a number
        else {
            out.add(token);
        }
    }
    while (!stack.isEmpty()) {
        out.add(stack.pop());
    }
    String[] output = new String[out.size()];
    return out.toArray(output);
}

public static double RPNtoDouble(String[] tokens) {
    myStack<String> stack = new myStack<String>();

    // For each token
    for (String token : tokens) {
        // If the token is a value push it onto the stack
        if (!isOperator(token)) {
            stack.push(token);
        } else {
            // Token is an operator: pop top two entries
            Double d2 = Double.valueOf(stack.pop());
            Double d1 = Double.valueOf(stack.pop());

            // Get the result
            Double result = token.compareTo("+") == 0 ? d1 + d2 : token
                    .compareTo("-") == 0 ? d1 - d2
                            : token.compareTo("*") == 0 ? d1 * d2 : d1 / d2;

            // Push result onto stack
            stack.push(String.valueOf(result));
        }
    }

    return Double.valueOf(stack.pop());
}

@SuppressWarnings("unused")
static public void main(String[] args) throws IOException {
    File file = new File("testEquations.txt");
    String[] lines = new String[10];

    try {
        FileReader reader = new FileReader(file);
        @SuppressWarnings("resource")
        BufferedReader buffReader = new BufferedReader(reader);
        int x = 0;
        String s;
        while ((s = buffReader.readLine()) != null) {
            lines[x] = s;
            x++;
        }
    } catch (IOException e) {
        System.exit(0);
    }
    // test printing string array
    for (String s : lines) {
        System.out.println("" + s);
        String[] output =infixToRPN(lines);
        System.out.println(RPNtoDouble(output));
    }

    for (String st : lines) {
        if (st != null) {
            StringTokenizer tokens = new StringTokenizer(st,OPERATORS1,true);
            while (tokens.hasMoreTokens()) {
                String token = tokens.nextToken();

            }

        }
    }

}

} 
```

我收到的输出是

```
49+62*61-36
15.0
4/64
15.0
(53+26)
15.0
0*72
15.0
21-85+75-85
15.0
90*76-50+67
15.0
46*89-15
15.0
34/83-38
15.0
20/76/14+92-15
15.0
5*10/3-1
15.0 
```

这来自以下输入文件：

```
49+62*61-36
4/64
(53+26)
0*72
21-85+75-85
90*76-50+67
46*89-15
34/83-38
20/76/14+92-15
5*10/3-1 
```

任何帮助都感激不尽。

感谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:57:34.753

如果您的行号是正确的，这是该行：

```
否则 if (token.equals("(")) {

```

所以显然令牌是空的。=> 检查这是否是事实，然后看看为什么会这样。

# c# - 弹出作为用户控件或模板化控件 Windows 8 / WinRT C#

> ID：13521474
> 
> 赞同：1
> 
> 时间：2012-11-22T23:49:10.850
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我想要一种在一个地方创建弹出控件的方法，例如用户控件。然后跨多个视图，我可以使用相同的弹出控件。

我认为解决方案可能是使用用户控件或模板控件。我从来没有使用过它们中的任何一个。

我可以将用户控件或模板控件用于弹出窗口吗？

有更好的解决方案吗？

我还应该提到我正在使用 C#/XAML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T00:11:21.190

您不能将 Control 模板直接应用于 Popup 控件，因此用户控件正是您所需要的。

只需创建一个包含您想要的所有内容和 UI 的用户控件，然后在您希望它出现的每个视图中的新弹出控件中重用该控件。

# java - 没有得到想要的结果，我很困

> ID：13521477
> 
> 赞同：0
> 
> 时间：2012-11-22T23:49:38.943
> 
> 标签：java, loops, nested-loops

我遇到了一个问题，它没有按应有的方式打印出来，并且无法弄清楚它是什么。

现在我的代码正在打印出这个：

> `***#`
> 
> `***##`
> 
> `***###`

当它应该像这样打印出来时：

> `***#`
> 
> `**##`
> 
> `*###`

这是我现在的代码：

```
import static java.lang.System.*;

public class Box
{
  private int size;

public Box()
{

}

public Box(int count)
{
    size = count;
}

public void setSize(int count)
{
    size = count;
}

public int getSize()
{
    return size;
}

public String toString()
{
    String output="";
    for(int i = 1; i <= size; i++)
    {
        for(int k = size; k >0; k--)
        {
            output += "*";
        }
        for(int j = size; j >size-i; j--)
        {
            output += "#";
        }
        output += "\n"; 
    }

    return output;
}
} 
```

和我的交叉引用跑步者类：

```
import static java.lang.System.*;

import java.util.Scanner;

public class Lab11e
{
 public static void main( String args[] )
 {
   Scanner keyboard = new Scanner(System.in);
    String choice="";
        do{
            out.print("Enter the size of the box : ");
            int big = keyboard.nextInt();
            //out.print("Enter a letter : ");
            //String value = keyboard.next();

                //instantiate a TriangleFour object
         Box box = new Box( big);
            //call the toString method to print the triangle
            System.out.println( box );

            System.out.print("Do you want to enter more data? ");
            choice=keyboard.next();
        }while(choice.equals("Y")||choice.equals("y"));
}
} 
```

我的想法是，我非常接近得到它，但就是不知道是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:29:11.517

```
 for(int i = 1; i <= size; i++)
    {
        // Using a single for to make sure we don't create too many items.
        // Also note the +1\. It seems that when size = 3, you want 4 chars
        // per line, so this take that extra char into account.
        for(int k = 0; k < size + 1; k++)
        {
            // Use an if to decide if we print * or #.
                // As 'i' gets bigger, we need to put less *, so
                // we subtract 'i' from the total size. This tells
                // when the midpoint has passed and we should start
                // writing #s.
            if (k <= size - i)
                output += "*";
            else
                output += "#";
        }

        output += "\n"; 
    } 
```

具有两个内循环的解决方案：

```
 for(int i = 1; i <= size; i++)
    {
        // Adds a number of * inversely proportional to the current
        // value of 'i'.
        for(int k = 0; k <= size - i; k++)
        {
            output += "*";
        }

        // Start adding # where we stopped the *.
        for(int j = size - i; j < size; j++)
        {
            output += "#";
        }

        output += "\n"; 
    } 
```

# facebook - Facebook Graph Api、限价和/或订单？

> ID：13521483
> 
> 赞同：8
> 
> 时间：2012-11-22T23:50:08.227
> 
> 标签：facebook, facebook-graph-api

是否可以将 FB Graph（页面）请求限制/过滤为：

> 1.  （页面的）类别？（例如 &category=restaurant）
> 2.  它拥有的喜欢的数量（最低阈值）
> 3.  它是否具有某些属性（例如，它必须具有 location.city 或者过滤 where location.city == "San Jose"）

是否可以对结果进行排序（例如按喜欢的数量递减？）

我以此为起点：

```
http://graph.facebook.com/search?q=california&type=page&fields=id,name,location,category 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T05:13:35.913

Facebook graph api 首先返回最新的对象。不幸的是，您无法订购退货的顺序。API 确实做到了最好，通过自己的逻辑计算相对性。

1.  limit : 要返回的对象数
2.  offset : 结果的起点

没有升序或降序的顺序。

您可以对某些对象使用 FQL，但这不适用于搜索。

要知道它是否受支持，只需将 url 输入浏览器并查看底部的分页部分。大多数支持的参数都在那里。

[http://graph.facebook.com/search?fields=id,name,location,category&q=california&limit=2&type=page](http://graph.facebook.com/search?fields=id,name,location,category&q=california&limit=2&type=page)

```
 "paging": {
      "next": "http://graph.facebook.com/search?fields=id,name,location,category&q=california&limit=2&type=page&offset=2&__after_id=108131585873862"
   } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T01:18:57.250

我不确定订单功能，但在这里您可以添加一个限制参数，如下所示：

[http://graph.facebook.com/search?q=california&type=page&fields=id,name,location,category&limit=2](http://graph.facebook.com/search?q=california&type=page&fields=id,name,location,category&limit=2)

# python - Python列表迭代和删除

> ID：13521484
> 
> 赞同：1
> 
> 时间：2012-11-22T23:50:22.727
> 
> 标签：python, list, python-2.7, iteration

> **我认为重复**
> 
> [迭代时从列表中删除项目](https://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python)
> 
> 最佳解决方案是：

```
somelist[:] = [tup for tup in somelist if determine(tup)] 
```

> 我不深入了解它是如何工作的，但似乎工作！
> 
> 现在我明白它是如何工作的！(2017/02/05)

我是一个 python 初学者，我发现在列表迭代和删除中可能有些奇怪。这是我的代码：

```
# -*- coding: utf-8 -*-s
#
# Fichier: testques.py
#

liste = [0,1,2,3,4,5,6,7,8,9]

cpt1=0
cpt2=0
cpt3=len(liste)

for i in liste:
    if i != 2:
        cpt1 += 1
    else:
        cpt2 += 1
        del liste[i]

print cpt1
print cpt2
print cpt3

>python test.py
8
1
10 
```

如您所见，8+1 不是 10。

我的事情是“i”只是对列表索引的引用。当我删除元素列表时，我删除的元素下面的所有元素都会上升一级，然后下一个元素不会被 for ... in 解析。

那么有人可以帮助我实现最终获得以下结果的目标：9 1 10

**在3 个答案后编辑** 我的目标不是计算等于 2 的元素数。

实际上，我的列表中的每个元素都是一个字典，我想删除每个字典的 xxx 键的值不完全是 7 位的所有列表项。之后我将在现在干净的列表上进行其他操作。这就是我试图实现的目标。

很抱歉在第一个问题中不够清楚。

这是我的真实代码：

```
cpt = 0
liste_longueur_totale = len(i)
liste_longueur_clean = 0
liste_delete = 0
numero = re.compile('^[0-9]{7}$')
for row in i:
    if re.match(numero, row['j_numero']):
        liste_longueur_clean += 1
        cpt += 1
    else:
        liste_delete += 1
        print liste_delete, '-', i[cpt]['j_id'], '-', i[cpt]['j_numero']
        del i[cpt]
        cpt += 1
print "%s : %s + %s" % (liste_longueur_totale,liste_longueur_clean,liste_delete )
print len(i) 
```

“i”是 703 个项目的列表。每一个都是一本字典。

当我运行它时，我得到以下结果：

```
703: 673 + 15
688 
```

当我在没有该行的情况下运行相同的代码时：

```
del i[cpt] 
```

我有以下结果：

```
703: 681 + 21
703 
```

事实上，我知道 21 个项目没有响应 re.match()

然后，我有点困惑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T23:54:43.150

忘记用艰难的方式去做吧。特别是如果您的列表不是那么长，以至于多次迭代它是一件大事。

```
cpt1 = sum(1 for x in liste if x != 2)
cpt2 = sum(1 for x in liste if x == 2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T23:56:19.873

您可以在迭代和从中删除元素之前简单地制作列表的副本：

```
liste = [0,1,2,3,4,5,6,7,8,9]

cpt1=0
cpt2=0
cpt3=len(liste)

# Just add [:] here. See explanation below.
for i in liste[:]:
    if i != 2:
        cpt1 += 1
    else:
        cpt2 += 1
        del liste[i]

print cpt1
print cpt2
print cpt3 
```

`list[:]`是复制列表的著名习语。它实际上是从第一个元素到最后一个元素的切片，其结果是返回一个包含原始元素所有元素的新列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T23:58:14.353

实际上 i 不是对列表索引的引用，它是列表项，因此当您删除它时，您会使列表更短，len(liste)=9，如果您只想要一个列表索引数组，请改用 enumerate(liste) ，虽然我没有看到删除索引的意义

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T00:09:13.380

如果您想计算列表中有多少个 2，您只需键入`print liste.count(2)`即可得到 1。要得到 9，您可以减去`len(liste) - liste.count(2)`或遵循 Ignacio 解决方案：`sum(1 for x in liste if x != 2)`。

# android - 如何在android项目中搜索方法或变量名？

> ID：13521485
> 
> 赞同：1
> 
> 时间：2012-11-22T23:50:23.610
> 
> 标签：android, eclipse, search

来自一个相对较新的人，谁能告诉我在处理大型项目时如何在 Eclipse 中进行方法或变量名搜索？有时我在团队中开始新事物时会感到迷茫。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T01:09:49.413

是的你可以。在 Eclipse 中，`Search`再次选择菜单`Search`。

在选项卡`Java Search`中，您可以选择要查找的内容（即方法、类型、包、字段...）以及搜索位置。

问候。

# sql - 如果值不存在，则将值插入列中

> ID：13521488
> 
> 赞同：2
> 
> 时间：2012-11-22T23:50:39.247
> 
> 标签：sql, oracle

我目前在 SQL plus 上运行，我有 2 个表。

如果我将值输入到部门 (nm_employees) 并且如果该值在部门 2 (nm_departments) 中不存在，那么我必须在 SQL 中编写一个 PL 以在部门 2 中输入值。我写了代码，但它不正确。有任何想法吗？

```
CREATE TABLE nm_employees(
name varchar(20),
dept varchar(20),
CONSTRAINT empPK PRIMARY KEY (dept)
);

CREATE TABLE nm_departments(
dept2 varchar(20),
CONSTRAINT departments FOREIGN KEY (dept2) REFERENCES nm_employees(dept)
);

INSERT INTO nm_employees values ('nancy','engineer');
IF NOT EXISTS (SELECT dept FROM nm_employees where dept='engineer'
)
THEN    
INSERT INTO nm_departments values ('engineer');
END IF; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T23:59:41.783

第一点是您不要对 SQL 使用花哨的引号。使用标准单引号 ( `'`)。

第二点是 IF..THEN 仅用于编程块，如触发器。在常规 SQL 批处理中，您可以使用**`INSERT...SELECT`**.

```
CREATE TABLE nm_employees(
name varchar(20),
dept varchar(20),
CONSTRAINT empPK PRIMARY KEY (dept)
);

CREATE TABLE nm_departments(
dept2 varchar(20),
CONSTRAINT departments FOREIGN KEY (dept2) REFERENCES nm_employees(dept)
);

INSERT INTO nm_employees values ('nancy','engineer');

INSERT INTO nm_departments
select 'engineer' from dual
WHERE NOT EXISTS (SELECT dept FROM nm_departments where dept2='engineer'); 
```

* * *

您在 EXISTS 测试中也有错误的表，您应该在其中检查**nm_departments**，而不是**nm_employees**。

对于它的价值，这看起来像是一个练习，所以这里有一些额外的提示：

1.  表之间的关系应该是`Employee [M] ->--|- [1] Department`，即员工属于一个部门，每个部门有很多员工
2.  外键应该在员工表引用部门中。这也意味着department表中的记录需要在employee中的记录之前创建
3.  员工中的主键（不使用代理键）应该是（姓名，部门）的组合。按照目前的定义，每个部门只能有一名员工

# c# - 不想在同一个位置敲击

> ID：13521490
> 
> 赞同：0
> 
> 时间：2012-11-22T23:50:51.067
> 
> 标签：c#, windows-phone-7, xna, touch

Xna wp7 游戏。

目前，这段代码让我每次点击都会产生球。

我想要的是，不要让用户在同一个位置点击。即强迫他不要在同一位置发送垃圾邮件。

```
foreach (TouchLocation location in TouchPanel.GetState())
{
    TouchLocation prevLocation;
    bool prevLocationAvailable = location.TryGetPreviousLocation(out prevLocation);

    if (location.State == TouchLocationState.Moved && prevLocation.State != TouchLocationState.Moved)
    {
        if (hitbox.Contains((int)location.Position.X, (int)location.Position.Y))
          releaseBalls();
    }
 } 
```

Hitbox 是一个被定义为整个屏幕的矩形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:43:13.537

您不能使用碰撞检测来为您执行此操作吗？

鉴于您有前一个抽头（球）的位置和新抽头的位置，您可以计算两个球是否重叠（它们的中心之间的距离小于球直径），甚至可以通过移动来补偿重叠球到前一个球旁边的有效位置。

您可能已经在跟踪所有球的位置，因此您可以扩展上述逻辑，将即将生成的球位置与您的 Hitbox 矩形内的所有球进行比较，并确保它们不重叠。

我的 2 美分 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:46:32.577

我解决了。我用我的触摸位置制作了一个小矩形。然后我检查它是否击中了我的新矩形。如果没有，请生成一个球。:D

# xslt - XSLT：使用键和条件的“选择值”？

> ID：13521492
> 
> 赞同：2
> 
> 时间：2012-11-22T23:51:12.627
> 
> 标签：xslt, xpath, xslt-2.0

这个问题来自上一个线程： [XSLT: Sorting based on sum of values from other nodes](https://stackoverflow.com/questions/13502321/xslt-sorting-based-on-sum-of-values-from-other-nodes)

我现在可以使用键从其他节点汇总我的数据。我似乎无法得到的是现在应用条件以在使用这些键时选择我所追求的数据所需的语法或方法。

这是我正在使用的简化 xml（从上一个修改以突出显示问题）：

```
<Horses>
    <Horse>
        <ID>1</ID>
        <Name>hrsA</Name>
        <SireID>101</SireID>
        <Age>3</Age>
        <Pace>
            <Stakes>20</Stakes>
            <Wins>0</Wins>
        </Pace>
    </Horse>
    <Horse>
        <ID>2</ID>
        <Name>hrsB</Name>
        <SireID>101</SireID>
        <Age>6</Age>
        <Pace>
            <Stakes>1600</Stakes>
            <Wins>9</Wins>
        </Pace>
    </Horse>
    <Horse>
        <ID>3</ID>
        <Name>hrsC</Name>
        <SireID>101</SireID>
        <Age>3</Age>
        <Trot>
            <Stakes>200</Stakes>
            <Wins>2</Wins>
        </Trot>
    </Horse>
    <Horse>
        <ID>4</ID>
        <Name>hrsD</Name>
        <SireID>101</SireID>
        <Age>4</Age>
        <Pace>
            <Stakes>50</Stakes>
            <Wins>0</Wins>
        </Pace>
        <Trot>
            <Stakes>100</Stakes>
            <Wins>1</Wins>
        </Trot>
    </Horse>
    <Horse>
        <ID>5</ID>
        <Name>hrsE</Name>
        <SireID>101</SireID>
        <Age>3</Age>
        <Pace>
            <Stakes>100</Stakes>
            <Wins>1</Wins>
        </Pace>
        <Trot>
            <Stakes>300</Stakes>
            <Wins>1</Wins>
        </Trot>
    </Horse>
</Horses>
<Sires>
    <Sire>
        <ID>101</ID>
        <Name>srA</Name>
        <LiveFoalsALL>117</LiveFoalsALL>
    </Sire>
</Sires> 
```

在一种情况下，我需要获得属于某个年龄的某个 Sire 的后代（马）。

在没有指定年龄的情况下，我使用了一个对赢得的赌注进行排序的密钥，如下所示（感谢 Dimitre）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:key name="kOffspring" match="Horse" use="SireID"/>

 <xsl:template match="/*">
  <xsl:apply-templates select="Sires/Sire">
   <xsl:sort select="sum(key('kOffspring', ID)/*/Stakes)"
             data-type="number" order="descending"/>
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="Sire">
    <!-- get the data I want -->
 </xsl:template>
</xsl:stylesheet> 
```

现在，在“获取我想要的数据”中，我试图只得到 3 岁的马（年龄 = 3）例如，只得到 srA 的 3 岁获胜后代（答案 = 2）我需要这样的东西在想：

```
<xsl:value-of select="count(key('kOffspring', ID)[Age=3]/*/Wins)"/> 
```

但这不起作用......或者我是否需要为我想使用的每个年龄创建一个新密钥，并使用一些条件语法（？），例如：

```
<xsl:key name="kOffspring" match="Horse[/Age=3]" use="SireID"/> 
```

如您所见，我真的不知道自己在做什么，或者是否有可能:-)

.

类似的另一种情况是需要计算有多少匹马是获胜者 - answer=4（不是获胜的数量，只是他们是否以速度或小跑获胜......第三种情况需要只是速度或小跑）。

我在 Sire 模板中尝试了这个：

```
<xsl:value-of select="count(key('kOffspring', ID)/*/Wins &gt; 0)"/> 
```

但这只会返回一个计数。

如果这里有任何专家可以帮助我继续前进，我将不胜感激。与其他编程语言相比，我发现 xslt 语法有点混乱且难以记住 - 我希望我能尽快掌握它，因为它非常强大。

问候，布莱斯斯坦伯格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T01:17:20.210

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:key name="kOffspring" match="Horse" use="SireID"/>

 <xsl:template match="/*">
  <xsl:apply-templates select="Sires/Sire">
   <xsl:sort select="sum(key('kOffspring', ID)/*/Stakes)"
             data-type="number" order="descending"/>
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="Sire">
     Sire <xsl:value-of select="concat(ID,' (', Name, ') Stakes: ')"/>
   <xsl:value-of select="sum(key('kOffspring', ID)/*/Stakes)"/>
     3 year old winning offspring: <xsl:value-of
     select="count(key('kOffspring', ID)[Age = 3 and */Wins > 0])"/>
     Offspring that ever were a winner: <xsl:value-of
      select="count(key('kOffspring', ID)[*/Wins > 0])"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML**（提供的片段，包含在单个顶部元素中以使其成为格式良好的 XML 文档）时：

```
<t>
    <Horses>
        <Horse>
            <ID>1</ID>
            <Name>hrsA</Name>
            <SireID>101</SireID>
            <Age>3</Age>
            <Pace>
                <Stakes>20</Stakes>
                <Wins>0</Wins>
            </Pace>
        </Horse>
        <Horse>
            <ID>2</ID>
            <Name>hrsB</Name>
            <SireID>101</SireID>
            <Age>6</Age>
            <Pace>
                <Stakes>1600</Stakes>
                <Wins>9</Wins>
            </Pace>
        </Horse>
        <Horse>
            <ID>3</ID>
            <Name>hrsC</Name>
            <SireID>101</SireID>
            <Age>3</Age>
            <Trot>
                <Stakes>200</Stakes>
                <Wins>2</Wins>
            </Trot>
        </Horse>
        <Horse>
            <ID>4</ID>
            <Name>hrsD</Name>
            <SireID>101</SireID>
            <Age>4</Age>
            <Pace>
                <Stakes>50</Stakes>
                <Wins>0</Wins>
            </Pace>
            <Trot>
                <Stakes>100</Stakes>
                <Wins>1</Wins>
            </Trot>
        </Horse>
        <Horse>
            <ID>5</ID>
            <Name>hrsE</Name>
            <SireID>101</SireID>
            <Age>3</Age>
            <Pace>
                <Stakes>100</Stakes>
                <Wins>1</Wins>
            </Pace>
            <Trot>
                <Stakes>300</Stakes>
                <Wins>1</Wins>
            </Trot>
        </Horse>
    </Horses>
    <Sires>
        <Sire>
            <ID>101</ID>
            <Name>srA</Name>
            <LiveFoalsALL>117</LiveFoalsALL>
        </Sire>
    </Sires>
</t> 
```

**产生想要的正确结果：**

```
 Sire 101 (srA) Stakes: 2370
 3 year old winning offspring: 2
 Offspring that ever were a winner: 4 
```

* * *

**或者，一个可能更有效的解决方案是使用另一个复合键，它的两个部分是`SireID`和`Age`：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:key name="kOffspring" match="Horse" use="SireID"/>
 <xsl:key name="kOffspringBySireIdAndAge" match="Horse"
  use="concat(SireID, '+', Age)"/>

 <xsl:template match="/*">
  <xsl:apply-templates select="Sires/Sire">
   <xsl:sort select="sum(key('kOffspring', ID)/*/Stakes)"
             data-type="number" order="descending"/>
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="Sire">
     Sire <xsl:value-of select="concat(ID,' (', Name, ') Stakes: ')"/>
   <xsl:value-of select="sum(key('kOffspring', ID)/*/Stakes)"/>
     3 year old winning offspring: <xsl:value-of
     select="count(key('kOffspringBySireIdAndAge', concat(ID, '+3'))
                       [*/Wins > 0]
                  )"/>
     Offspring that ever were a winner: <xsl:value-of
      select="count(key('kOffspring', ID)[*/Wins > 0])"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生相同的正确结果**：

```
 Sire 101 (srA) Stakes: 2370
 3 year old winning offspring: 2
 Offspring that ever were a winner: 4 
```

# facebook - 提交需要两个 Facebook 用户的 Open Graph 操作

> ID：13521495
> 
> 赞同：4
> 
> 时间：2012-11-22T23:51:20.760
> 
> 标签：facebook, submit, action, facebook-opengraph

我们正在开发一个具有两种用户类型的网站：TypeA 和 TypeB，并且我们要提交一些 Open Graph 操作。为了能够正确测试它们，必须通过 Facebook 登录创建每种类型的一个用户，因为这些操作是网站 Facebook 用户之间某些交互的结果。

但是，我们还没有找到太多关于涉及用户之间交互的 Open Graph 操作的信息。大多数信息是指用户与应用程序/网站本身交互时生成的操作。

在我们看来，Facebook 使用“开放图测试用户”来测试提交的操作，但正如我已经解释的那样，一个用户不足以测试我们的操作。

所以我的问题是：

*   我们对“开放图测试用户”的假设是否正确？
*   是否可以提交这种类型的 Open Graph 操作？
*   如果是这样，我们应该怎么做才能提交？
*   为了让 Facebook 能够测试我们的行为，我们需要做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T06:15:56.493

我认为根据[了解开放图批准提交流程](https://developers.facebook.com/docs/technical-guides/opengraph/submission-process/)，开放图中的每个操作项都规定了在我们提交时重现操作的步骤。

在这里，我们可以详细解释这些步骤，并且测试环境可以是实时/登台。

正如您所说，有两种类型的用户，您可以详细说明如何更改用户类型或注册为任一用户类型，然后他们可以测试。

正如您所知道的，使用应用程序设置，我们可以创建尽可能多的测试用户，我们也可以在 FB 中为他们加好友。我猜 FB 也会做同样的事情来测试黑白用户的交互。关键是您已经详细解释了如何在提交时进行测试。

# viterbi - 维特比解码问题

> ID：13521501
> 
> 赞同：3
> 
> 时间：2012-11-22T23:52:06.157
> 
> 标签：viterbi

在过去的几周里，我一直在尝试让 Viterbi C/C++ 解码器工作。由于某种原因，我无法让它工作。我最初是从 Phil Karn 的 FEC 库开始的： [http ://www.ka9q.net/code/fec/](http://www.ka9q.net/code/fec/)

但是这段代码不想为 64 位 Linux 编译。然后我找到了[http://www.spiral.net/software/viterbi.html](http://www.spiral.net/software/viterbi.html) ，它将生成针对 X86 架构优化的特殊 Viterbi 解码器。我可以让它工作并编译它来解码数据，但它不能正确解码数据。最后，我找到了另一个基于 Phil Karn 库的精简版本的库，名为 viterbi-3.0.1.tar（我不记得链接了）。

在 Matlab 中，我生成了三个测试数据集，全零、全一和长度为 2048 位的随机数据。Spiral 解码器正确解码零和一数据集，但不能正确解码随机数据。

我已将代码与测试数据测试放在此处。 [http://dl.dropbox.com/u/65739307/viterbicpp.tar.bz2](http://dl.dropbox.com/u/65739307/viterbicpp.tar.bz2)

# javascript - css 的 setTimeout 未运行

> ID：13521505
> 
> 赞同：3
> 
> 时间：2012-11-22T23:52:34.423
> 
> 标签：javascript, jquery, settimeout

我已经添加`setTimeout`了几个功能，其中一个运行良好，但另一个似乎根本没有运行。我不知道为什么，因为它完全一样。请在我的代码下面找到，任何帮助将不胜感激。

这是我正在查看的 setTimeout 行。这个工作正常。

```
var fctyhov = function (z) {
    $(deptmts[i]).hover(
        function(){
            $(fcultys[z]).stop(true).animate({color: col1});
            setTimeout(function(){$(z).css("text-shadow", tsh1);},100);},
        function(){
            $(fcultys[z]).stop(true).animate({color: col3});
            setTimeout(function(){$(z).css("text-shadow", tsh2);},100);}
    );
}; 
```

但是这个不

```
var facdth = function (y,x,w) {
    $(y).hover(
        function(){
            $(x).stop(true).fadeTo("fast", 1);
            $(w).stop(true).delay().animate({color:col1});
            $(y).stop(true).animate({color: col1});
            setTimeout(function(){$(y).css("text-shadow", tsh1);},100);},
        function(){
            $(x).stop(true).fadeTo("slow", 0);
            $(w).stop(true).delay().animate({color:col2});
            $(y).stop(true).animate({color: col3});
            setTimeout(function(){$(y).css("text-shadow", tsh2);},100);}
    );
}; 
```

**编辑** 我添加了一个允许 .animate({color}) 工作的插件。这些线路工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:23:27.997

感谢以上评论和帮助。早上不累的时候再看一遍，就更清楚了。我遇到的问题是在第一个声明中，我认为它是有效的。

`$(z).css`我在函数中调用的地方`setTimout`应该是`$(fcultys[z]).css`. 这是一个愚蠢的错误，请参阅下面的工作代码。

```
var fctyhov = function (z) {
    $(deptmts[i]).hover(
        function(){
            $(fcultys[z]).stop(true).animate({color: col1});
            setTimeout(function(){$(fcultys[z]).css("text-shadow", tsh1);},100);},
        function(){
            $(fcultys[z]).stop(true).animate({color: col3});
            setTimeout(function(){$(fcultys[z]).css("text-shadow", tsh2);},100);}
    );
}; 
```

# java - java：将算术表达式拆分为标记

> ID：13521514
> 
> 赞同：0
> 
> 时间：2012-11-22T23:53:45.217
> 
> 标签：java, string, stringtokenizer

你如何用空格分隔算术表达式，例如我有这个表达式 22+(33*1) 我想用相同字符串（返回字符串）中的运算符之间的空格来分割它们，比如 22 + ( 33 * 1 )我使用 StringTokenizer 的方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:06:42.623

你的规则比你想象的要简单。可能是正确的java：

```
expr = expr.replaceAll('+', ' + ')
           .replaceAll('-', ' - ')
           .replaceAll(')', ' ) ')
           //etc
           .replaceAll(' ', '  '); //remove any double spaces added. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:02:45.447

这并不容易。您必须解析表达式并建立一个标记树。你终于表现得像一个解析器。然后重新创建表达式并在每个元素之间插入一个空格。
尝试搜索解析算术表达式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T00:06:40.597

您可以使用多个`String.replaceAll`语句将运算符替换为带空格的运算符。

# r - 插入符号 RFE 中的第一个样本大小始终为 10 个条目

> ID：13521516
> 
> 赞同：0
> 
> 时间：2012-11-22T23:53:51.213
> 
> 标签：r, data-mining

我正在尝试使用 caret 包实现我的自定义功能以进行功能排名。问题是每次第一次调用摘要函数时，我只得到 10 个条目。这在这里不是问题，但在一个更大的数据集中，一个类只是所有条目的一小部分（比如 5%），它可能根本不会被选中

```
l = lmFuncs
l$summary = function (data, lev = NULL, model = NULL) 
{
  print(dim(data))
  if (is.character(data$obs)) 
    data$obs <- factor(data$obs, levels = lev)
  postResample(data[, "pred"], data[, "obs"])
}

rfe(data.frame(matrix(rnorm(100*3), ncol=3)), sample(2, 100, replace=T), sizes=1:3, rfeControl=rfeControl(functions=l, number=20)) 
```

输出：

```
[1] 10  2
[1] 32  3
[1] 32  3
[1] 32  3
[1] 40  3
[1] 40  3
[1] 40  3
[1] 37  3
[1] 37  3
[1] 37  3
... 
```

R会话信息：

```
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252    LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] pROC_1.5.4         kernlab_0.9-14     e1071_1.6-1        class_7.3-5        caret_5.15-044     foreach_1.4.0      cluster_1.14.3     reshape_0.8.4      plyr_1.7.1        
[10] lattice_0.20-10    Biobase_2.18.0     BiocGenerics_0.4.0

loaded via a namespace (and not attached):
[1] codetools_0.2-8 compiler_2.15.1 grid_2.15.1     iterators_1.0.6 tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:47:25.097

`rfe`，`train`并且`sbf`在执行任何模型函数之前都对汇总函数进行初步检查（以获取要检查的指标的名称等）。

这些函数做的第一件事就是随机抽取数据集的样本 (n = 10) 并运行汇总函数。

因此，这与您的实际建模过程无关。

最大限度

# javascript - PHP 加载时的预加载器

> ID：13521517
> 
> 赞同：-1
> 
> 时间：2012-11-22T23:53:58.413
> 
> 标签：javascript, jquery

我想在使用 ajax 加载 php 文件时添加一个预加载器。可以使用jquery吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:35:26.907

您可以使用 jQuery.ajax 的参数来完成此操作；将您的预加载器内容设置为标记并使 CSS 默认隐藏它，但在添加类时让它显示。

例如，假设我们有一个 div，它是我们的预加载器。在其中，我们有一条消息说“正在加载”。CSS3 将允许我们自动将 .preloader 类更改为 .preloader.show 的动画，然后我们所要做的就是从持有者中添加和删除这些类。

这将是标记：

```
<div class="preloader">
    <h1>Loading...</h1>
</div>​ 
```

然后是 CSS3：

```
 .preloader {
        /* written in CSS 3.0 */
        opacity: 0;
        font-size: 36px;

        -webkit-transition: 0.2s all;
         -khtml-transition: 0.2s all;
           -moz-transition: 0.2s all;
            -ms-transition: 0.2s all;
             -o-transition: 0.2s all;
                transition: 0.2s all;

        -webkit-transform: scale( 0.1 );
           -moz-transform: scale( 0.1 );
            -ms-transform: scale( 0.1 );
             -o-transform: scale( 0.1 );
                transform: scale( 0.1 );
    }
    .preloader.show {
        opacity: 1;

        -webkit-transition: 0.2s opacity;
           -moz-transition: 0.2s opacity;
            -ms-transition: 0.2s opacity;
             -o-transition: 0.2s opacity;
                transition: 0.2s opacity;

        -webkit-transform: scale( 1 );
         -khtml-transform: scale( 1 );
           -moz-transform: scale( 1 );
            -ms-transform: scale( 1 );
             -o-transform: scale( 1 );
                transform: scale( 1 );
    } 
```

最后是javascript：

```
$(function() {
    $.ajax({
        url: 'http://code.jquery.com/jquery-latest.js',
        dataType: 'script',
        beforeSend: function(evt) {
            if ( ! $('.preloader').is('.show') ) $('.preloader').addClass('show');
        },
        complete: function(jqXHR, textStatus) {
            // disable either here or at the end
            $('.preloader').removeClass('show');

            // handle error and success
        }
}); 
```

}); ​</p>

我为你上传了这个例子@JSFiddle，这里是来源：http: [//jsfiddle.net/8XP9r/15/](http://jsfiddle.net/8XP9r/15/)

这就是它的样子：http: [//jsfiddle.net/8XP9r/15/embedded/result/](http://jsfiddle.net/8XP9r/15/embedded/result/)

告诉我事情的进展！XD

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T00:04:54.047

当您发起请求时，您可以添加加载内容。使用`complete`回调函数，您可以删除加载的东西。这很简单。这是一个例子。

```
function loadSomething(url) {
    showLoading();

    $.ajax(url).complete(function(data) {
        hideLoading();

        console.log(data);
    });
} 
```

分别在哪里`showLoading()`和`hideLoading()`管理您的预加载器。

# c# - System.Timers.Timer 每秒最多只能提供 64 帧

> ID：13521521
> 
> 赞同：12
> 
> 时间：2012-11-22T23:54:17.557
> 
> 标签：c#, .net, winforms, timer

我有一个应用程序，它使用 System.Timers.Timer 对象来引发由主窗体（[Windows Forms](http://en.wikipedia.org/wiki/Windows_Forms)，C#）处理的事件。我的问题是，无论我将 .Interval 设置多短（甚至设置为 1 毫秒），我每秒最多只能获得 64 次。

我知道 Forms 计时器有 55 毫秒的精度限制，但这是 System.Timer 变体，而不是 Forms 变体。

该应用程序占用 1% 的 CPU，因此它绝对不受 CPU 限制。所以它所做的就是：

*   将定时器设置为 1&nsp;ms
*   当事件触发时，增加一个 _Count 变量
*   再次将其设置为 1&nsp;ms 并重复

_Count 每秒最多增加 64 次，即使没有其他工作可做。

这是一个“回放”应用程序，它必须复制传入的数据包，它们之间的延迟只有 1-2 毫秒，所以我需要能够可靠地每秒触发 1000 次左右的东西（尽管我会满足于 100 次，如果我受 CPU 限制，我不是）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T00:13:54.697

尝试[多媒体计时器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd742877%28v=vs.85%29.aspx)- 它们为硬件平台提供尽可能高的准确性。这些计时器以比其他计时器服务更高的分辨率安排事件。

您将需要以下 Win API 函数来设置计时器分辨率、启动和停止计时器：

```
[DllImport("winmm.dll")]
private static extern int timeGetDevCaps(ref TimerCaps caps, int sizeOfTimerCaps);

[DllImport("winmm.dll")]
private static extern int timeSetEvent(int delay, int resolution, TimeProc proc, int user, int mode);

[DllImport("winmm.dll")]
private static extern int timeKillEvent(int id); 
```

您还需要回调委托：

```
delegate void TimeProc(int id, int msg, int user, int param1, int param2); 
```

和定时器功能结构

```
[StructLayout(LayoutKind.Sequential)]
public struct TimerCaps
{
    public int periodMin;
    public int periodMax;
} 
```

用法：

```
TimerCaps caps = new TimerCaps();
// provides min and max period 
timeGetDevCaps(ref caps, Marshal.SizeOf(caps));
int period = 1;
int resolution = 1;
int mode = 0; // 0 for periodic, 1 for single event
timeSetEvent(period, resolution, new TimeProc(TimerCallback), 0, mode); 
```

和回调：

```
void TimerCallback(int id, int msg, int user, int param1, int param2)
{
    // occurs every 1 ms
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T09:34:20.157

你可以坚持你的设计。您只需将系统中断频率设置为以其最大频率运行。为了获得这一点，您只需在代码中的任何位置执行以下代码：

```
#define TARGET_RESOLUTION 1         // 1-millisecond target resolution

TIMECAPS tc;
UINT     wTimerRes;

if (timeGetDevCaps(&tc, sizeof(TIMECAPS)) != TIMERR_NOERROR) 
{
    // Error; application can't continue.
}

wTimerRes = min(max(tc.wPeriodMin, TARGET_RESOLUTION), tc.wPeriodMax);
timeBeginPeriod(wTimerRes); 
```

这将强制系统中断周期以最大频率运行。这是一个系统范围的行为，因此它甚至可以在一个单独的进程中完成。不要忘记使用

```
MMRESULT timeEndPeriod(wTimerRes ); 
```

完成后释放资源并将中断周期重置为默认值。有关详细信息，请参阅[多媒体定时器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743609%28v=vs.85%29.aspx)。

*您必须将每个调用`timeBeginPeriod`与对 的调用相匹配，并`timeEndPeriod`在两个调用中指定相同的最小分辨率。`timeBeginPeriod`只要每个调用与对 的调用匹配，应用程序就可以进行多次调用`timeEndPeriod`。*

因此，所有计时器（包括您当前的设计）都将以更高的频率运行，因为计时器的粒度会提高。在大多数硬件上可以获得 1 ms 的粒度。

以下是使用两种不同硬件设置 (A+B)的各种设置获得的*中断周期列表：*`wTimerRes`

![ActualResolution（中断周期）与 wTimerRes 的设置](../Images/c5f9a37f2bcb347b084773cae23f3e72.png)

很容易看出，1 ms 是一个理论值。实际分辨率以 100 ns 为单位。9,766 表示 0.9766 毫秒，即每秒 1024 次中断。（实际上它应该是 0.9765625，即 9,7656.25 100 ns 单位，但该精度显然不适合整数，因此会被系统四舍五入。）

很明显，ig 平台 A 并不真正支持由`timeGetDevCaps`（介于`wPeriodMin`和之间的值`wPeriodMin`）返回的所有周期范围。

**总结：**多媒体定时器接口可用于修改*系统范围*的中断频率。因此，所有计时器都会改变它们的粒度。系统时间更新也会相应地改变，它会更频繁地以更小的步长增加。**但是：**实际行为取决于底层硬件。自引入 Windows 7 和 Windows 8 以来，这种硬件依赖性已经小很多，因为引入了更新的计时方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T19:03:22.520

基于其他解决方案和评论，我整理了这段 VB.NET 代码。可以用表格粘贴到项目中。我理解@HansPassant 的评论是说只要`timeBeginPeriod`被调用，“常规计时器也会变得准确”。在我的代码中似乎不是这种情况。

我的代码在使用将计时器分辨率设置为最小值后创建了一个多媒体计时器 a `System.Threading.Timer`、 a`System.Timers.Timer`和 a 。多媒体定时器按要求以 1 kHz 运行，但其他定时器仍停留在 64 Hz。所以要么我做错了什么，要么没有办法改变内置 .NET 计时器的分辨率。`Windows.Forms.Timer``timeBeginPeriod`

**编辑**；更改代码以使用 StopWatch 类进行计时。

```
Imports System.Runtime.InteropServices
Public Class Form1

    'From http://www.pinvoke.net/default.aspx/winmm/MMRESULT.html
    Private Enum MMRESULT
        MMSYSERR_NOERROR = 0
        MMSYSERR_ERROR = 1
        MMSYSERR_BADDEVICEID = 2
        MMSYSERR_NOTENABLED = 3
        MMSYSERR_ALLOCATED = 4
        MMSYSERR_INVALHANDLE = 5
        MMSYSERR_NODRIVER = 6
        MMSYSERR_NOMEM = 7
        MMSYSERR_NOTSUPPORTED = 8
        MMSYSERR_BADERRNUM = 9
        MMSYSERR_INVALFLAG = 10
        MMSYSERR_INVALPARAM = 11
        MMSYSERR_HANDLEBUSY = 12
        MMSYSERR_INVALIDALIAS = 13
        MMSYSERR_BADDB = 14
        MMSYSERR_KEYNOTFOUND = 15
        MMSYSERR_READERROR = 16
        MMSYSERR_WRITEERROR = 17
        MMSYSERR_DELETEERROR = 18
        MMSYSERR_VALNOTFOUND = 19
        MMSYSERR_NODRIVERCB = 20
        WAVERR_BADFORMAT = 32
        WAVERR_STILLPLAYING = 33
        WAVERR_UNPREPARED = 34
    End Enum

    'http://msdn.microsoft.com/en-us/library/windows/desktop/dd757625(v=vs.85).aspx
    <StructLayout(LayoutKind.Sequential)>
    Public Structure TIMECAPS
        Public periodMin As UInteger
        Public periodMax As UInteger
    End Structure

    'http://msdn.microsoft.com/en-us/library/windows/desktop/dd757627(v=vs.85).aspx
    <DllImport("winmm.dll")>
    Private Shared Function timeGetDevCaps(ByRef ptc As TIMECAPS, ByVal cbtc As UInteger) As MMRESULT
    End Function

    'http://msdn.microsoft.com/en-us/library/windows/desktop/dd757624(v=vs.85).aspx
    <DllImport("winmm.dll")>
    Private Shared Function timeBeginPeriod(ByVal uPeriod As UInteger) As MMRESULT
    End Function

    'http://msdn.microsoft.com/en-us/library/windows/desktop/dd757626(v=vs.85).aspx
    <DllImport("winmm.dll")>
    Private Shared Function timeEndPeriod(ByVal uPeriod As UInteger) As MMRESULT
    End Function

    'http://msdn.microsoft.com/en-us/library/windows/desktop/ff728861(v=vs.85).aspx
    Private Delegate Sub TIMECALLBACK(ByVal uTimerID As UInteger, _
                                  ByVal uMsg As UInteger, _
                                  ByVal dwUser As IntPtr, _
                                  ByVal dw1 As IntPtr, _
                                  ByVal dw2 As IntPtr)

    'Straight from C:\Program Files (x86)\Microsoft SDKs\Windows\v7.1A\Include\MMSystem.h
    'fuEvent below is a combination of these flags.
    Private Const TIME_ONESHOT As UInteger = 0
    Private Const TIME_PERIODIC As UInteger = 1
    Private Const TIME_CALLBACK_FUNCTION As UInteger = 0
    Private Const TIME_CALLBACK_EVENT_SET As UInteger = &H10
    Private Const TIME_CALLBACK_EVENT_PULSE As UInteger = &H20
    Private Const TIME_KILL_SYNCHRONOUS As UInteger = &H100

    'http://msdn.microsoft.com/en-us/library/windows/desktop/dd757634(v=vs.85).aspx
    'Documentation is self-contradicting. The return value is Uinteger, I'm guessing.
    '"Returns an identifier for the timer event if successful or an error otherwise. 
    'This function returns NULL if it fails and the timer event was not created."
    <DllImport("winmm.dll")>
    Private Shared Function timeSetEvent(ByVal uDelay As UInteger, _
                                         ByVal uResolution As UInteger, _
                                         ByVal TimeProc As TIMECALLBACK, _
                                         ByVal dwUser As IntPtr, _
                                         ByVal fuEvent As UInteger) As UInteger
    End Function

    'http://msdn.microsoft.com/en-us/library/windows/desktop/dd757630(v=vs.85).aspx
    <DllImport("winmm.dll")>
    Private Shared Function timeKillEvent(ByVal uTimerID As UInteger) As MMRESULT
    End Function

    Private lblRate As New Windows.Forms.Label
    Private WithEvents tmrUI As New Windows.Forms.Timer
    Private WithEvents tmrWorkThreading As New System.Threading.Timer(AddressOf TimerTick)
    Private WithEvents tmrWorkTimers As New System.Timers.Timer
    Private WithEvents tmrWorkForm As New Windows.Forms.Timer

    Public Sub New()
        lblRate.AutoSize = True
        Me.Controls.Add(lblRate)

        InitializeComponent()
    End Sub

    Private Capability As New TIMECAPS

    Private Sub Form1_FormClosing(sender As Object, e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing
        timeKillEvent(dwUser)
        timeEndPeriod(Capability.periodMin)
    End Sub

    Private dwUser As UInteger = 0
    Private Clock As New System.Diagnostics.Stopwatch
    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) _
        Handles MyBase.Load

        Dim Result As MMRESULT

        'Get the min and max period
        Result = timeGetDevCaps(Capability, Marshal.SizeOf(Capability))
        If Result <> MMRESULT.MMSYSERR_NOERROR Then
            MsgBox("timeGetDevCaps returned " + Result.ToString)
            Exit Sub
        End If

        'Set to the minimum period.
        Result = timeBeginPeriod(Capability.periodMin)
        If Result <> MMRESULT.MMSYSERR_NOERROR Then
            MsgBox("timeBeginPeriod returned " + Result.ToString)
            Exit Sub
        End If

        Clock.Start()

        Dim uTimerID As UInteger
        uTimerID = timeSetEvent(Capability.periodMin, Capability.periodMin, _
                     New TIMECALLBACK(AddressOf MMCallBack), dwUser, _
                     TIME_PERIODIC Or TIME_CALLBACK_FUNCTION Or TIME_KILL_SYNCHRONOUS)
        If uTimerID = 0 Then
            MsgBox("timeSetEvent not successful.")
            Exit Sub
        End If

        tmrWorkThreading.Change(0, 1)

        tmrWorkTimers.Interval = 1
        tmrWorkTimers.Enabled = True

        tmrWorkForm.Interval = 1
        tmrWorkForm.Enabled = True

        tmrUI.Interval = 100
        tmrUI.Enabled = True
    End Sub

    Private CounterThreading As Integer = 0
    Private CounterTimers As Integer = 0
    Private CounterForms As Integer = 0
    Private CounterMM As Integer = 0

    Private ReadOnly TimersLock As New Object
    Private Sub tmrWorkTimers_Elapsed(sender As Object, e As System.Timers.ElapsedEventArgs) _
        Handles tmrWorkTimers.Elapsed
        SyncLock TimersLock
            CounterTimers += 1
        End SyncLock
    End Sub

    Private ReadOnly ThreadingLock As New Object
    Private Sub TimerTick()
        SyncLock ThreadingLock
            CounterThreading += 1
        End SyncLock
    End Sub

    Private ReadOnly MMLock As New Object
    Private Sub MMCallBack(ByVal uTimerID As UInteger, _
                                  ByVal uMsg As UInteger, _
                                  ByVal dwUser As IntPtr, _
                                  ByVal dw1 As IntPtr, _
                                  ByVal dw2 As IntPtr)
        SyncLock MMLock
            CounterMM += 1
        End SyncLock
    End Sub

    Private ReadOnly FormLock As New Object
    Private Sub tmrWorkForm_Tick(sender As Object, e As System.EventArgs) Handles tmrWorkForm.Tick
        SyncLock FormLock
            CounterForms += 1
        End SyncLock
    End Sub

    Private Sub tmrUI_Tick(sender As Object, e As System.EventArgs) _
    Handles tmrUI.Tick
        Dim Secs As Integer = Clock.Elapsed.TotalSeconds
        If Secs > 0 Then
            Dim TheText As String = ""
            TheText += "System.Threading.Timer " + (CounterThreading / Secs).ToString("#,##0.0") + "Hz" + vbCrLf
            TheText += "System.Timers.Timer " + (CounterTimers / Secs).ToString("#,##0.0") + "Hz" + vbCrLf
            TheText += "Windows.Forms.Timer " + (CounterForms / Secs).ToString("#,##0.0") + "Hz" + vbCrLf
            TheText += "Multimedia Timer " + (CounterMM / Secs).ToString("#,##0.0") + "Hz"
            lblRate.Text = TheText
        End If
    End Sub

End Class 
```

# java - Guava 缓存 refreshAfterWrite 混乱

> ID：13521523
> 
> 赞同：10
> 
> 时间：2012-11-22T23:54:38.407
> 
> 标签：java, caching, guava, future

我在使用 Guava Caches 时得到了我不太了解的结果。

我正在实现一个我想异步刷新的单键缓存。

我每秒都会访问缓存，并将 refreshAfterWrite 设置为 20 秒。我的加载/重新加载功能需要 5 秒。

如果我在加载/重新加载方法开始时打印出当前时间 - 我希望得到如下结果：

> 加载呼叫开始于 00:00:00
> 重新加载呼叫开始于 00:00:25
> 重新加载呼叫开始于 00:00:50

因此加载需要 5 秒，下一次写入将在 20 秒后触发（5+20=25）。该写入将在 50 秒 (25 + 5 + 20 = 50) 秒后发生..等等

相反，我得到：

> 加载呼叫开始于 00:00:00
> 重新加载呼叫开始于 00:00:25
> 重新加载呼叫开始于 00:00:30

这表明第二次重新加载直接发生在第一次重新加载完成处理之后。

我认为写入将在处理未来之后发生，因此下一次重新加载将安排在 20 秒之后？

我是否发现了一个错误，或者我对 refreshAfterWrite 的工作原理有根本的误解？

示例代码如下：

```
private static SimpleDateFormat format = new SimpleDateFormat("hh:mm:ss");

    public static void main(String[] args) throws ExecutionException, InterruptedException {

        final ExecutorService executor = Executors.newFixedThreadPool(3);

        final LoadingCache<String, Long> cache = CacheBuilder.newBuilder().maximumSize(1) //
                .refreshAfterWrite(20, TimeUnit.SECONDS)//
                .build(new CacheLoader<String, Long>() {//
                    public Long load(String key) {
                        return getLongRunningProcess("load", key);
                    }

                    public ListenableFuture<Long> reload(final String key, Long prevGraph) {
                        ListenableFutureTask<Long> task = ListenableFutureTask.create(new Callable<Long>() {
                            public Long call() {
                                return getLongRunningProcess("reload", key);
                            }
                        });
                        executor.execute(task);
                        return task;
                    }
                });

        while (true) {
            Thread.sleep(1000L);
            cache.get(CACHE_KEY);
        }
    }

    private static Long getLongRunningProcess(String callType, String key) {
        System.out.printf("%s call started at %s\n", callType, format.format(new Date()));
        try {
            Thread.sleep(5000L);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        return counter.getAndIncrement();
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T01:26:13.753

我*想*你找到了一个合法的错误。（我帮助维护`common.cache`。）

如果我正确地遵循事情，我相信事件链如下：

假设 get A 是第一个`get`导致刷新的，而 get B 是`get`之后的第一个。

*   获取 A 调用`scheduleRefresh`，它在执行程序中启动`refresh`任务。条目值引用被替换为`LoadingValueReference`，并`loadAsync`添加了一个等待重新加载完成的侦听器。
*   Get A reload 的分叉任务完成并获取锁。
*   接 B 电话`scheduleRefresh`。访问时间还没有更新，所以它继续，进入`insertLoadingValueReference`.
*   Get A 重新加载的分叉任务更新写入时间，并将值引用替换为 a `StrongValueReference`，因为加载已完成。锁被释放。
*   Get B 确定该值不在加载过程中，因此它继续启动新的重新加载。

（更新：提交[https://code.google.com/p/guava-libraries/issues/detail?id=1211](https://code.google.com/p/guava-libraries/issues/detail?id=1211)。）

# javascript - 基于域的 Javascript 引荐来源网址检查

> ID：13521526
> 
> 赞同：4
> 
> 时间：2012-11-22T23:55:04.913
> 
> 标签：javascript, referrer

我需要页面上的 JS 来检查引荐来源 - 上一页 - 是否来自同一个域。

带有 JS 的页面的 URL 格式如下：

[http://subdomain.site.com/dir/page?vs=123456](http://subdomain.site.com/dir/page?vs=123456)

可能有多个以前的页面。因此，JS 需要检查域是否匹配。

如果域不同，我想将用户发送到另一个页面。

这就是我试图开始的工作：

```
var matchHost = /^https?:\/\/.*\//;
var match = matchHost.exec(document.referrer);
var domain = "http://subdomain.site.com/dir/";   

if (match !== domain) {
window.location.href = domain;
} 
```

但并不完全奏效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:00:25.530

您可能根本不需要正则表达式。您知道您的域的字符长度，例如使用 url [http://example.com](http://example.com)计算字符，然后根据推荐的 url 域长度拆分字符串，然后将其与您的域 url 进行比较！就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T00:06:50.190

在您的情况下`match`是匹配字符串的数组。所以永远不会平等。你需要比较`match[0]`：

```
if (match.length== 0 || match[0]!== domain) ... 
```

或者你可以通过这样做完全避免正则表达式：

```
if (document.referrer.substr (0, domain.length).toLowerCase()!== domain) ... 
```

# android - GCM 通知未显示

> ID：13521528
> 
> 赞同：0
> 
> 时间：2012-11-22T23:55:35.390
> 
> 标签：android, google-cloud-messaging, android-notifications

我正在实现一个向 PHP 服务器发送消息的 Android 应用程序，然后生成 GCM 推送通知的 PHP 服务器将其定向到相关的注册 ID。问题是尽管 GCMIntentService 类收到了消息，但未显示通知，如附加的日志 cat 中所示

这是Android代码

```
public class GCMIntentService extends GCMBaseIntentService {

private static final String TAG = "===GCMIntentService===";
private static final String senderId = "*****";
String message;

public GCMIntentService() {
    super(senderId);
}

static void displayMessage(Context context, String message) {
    Intent intent = new Intent("guc.edu.iremote.DISPLAY_MESSAGE");
    intent.putExtra("message", message);
    context.sendBroadcast(intent);
}

@Override
protected void onRegistered(Context arg0, String registrationId) {
    Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
    // sets the app name in the intent
    registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
    registrationIntent.putExtra("sender", senderId);
    startService(registrationIntent);
    Log.i(TAG, "Device registered: regId = " + registrationId);
    displayMessage(getApplicationContext(), "Your device registred with GCM");

}

@Override
protected void onUnregistered(Context arg0, String arg1) {
    Intent unregIntent = new Intent("com.google.android.c2dm.intent.UNREGISTER");
    unregIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0));
    startService(unregIntent);
    Log.i(TAG, "unregistered = " + arg1);
     displayMessage(getApplicationContext(), "Unregistered");

}

@Override
protected void onMessage(Context context, Intent intent) {
    message = intent.getStringExtra( "message" );
     // message = intent.getExtras().getString("message");

  Intent notificationIntent=new     Intent(context,this.getApplicationContext().getClass());
  PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
  WakeLock wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK |     PowerManager.ACQUIRE_CAUSES_WAKEUP, "TAG");
  wl.acquire();
  displayMessage(context, message);
 generateNotification(context, message, notificationIntent);

final AlertDialog.Builder d = new AlertDialog.Builder(context);
//Use an activity object here
 d.setMessage(message) //Provide a message here... A string or a string ID will do
 .setCancelable(false) //If you want them to be able to dismiss with a Back button
 .setPositiveButton(R.drawable.navigationaccept, new DialogInterface.OnClickListener()     {
     AlertDialog dialog = d.create();
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub
        dialog.dismiss();

    }
}) 

 .create()
 .show();

}

@SuppressWarnings("deprecation")
private static void generateNotification(Context context, String message, Intent notificationIntent) {
     int icon = R.drawable.ic_launcher;
     long when = System.currentTimeMillis();

     NotificationManager notificationManager = (NotificationManager)
             context.getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(icon, message, when);

    notificationManager.notify(0, notification);

     String title = context.getString(R.string.app_name);
     // set intent so it does not start a new activity
     notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
             Intent.FLAG_ACTIVITY_SINGLE_TOP);
     PendingIntent intent =PendingIntent.getActivity(context, 0, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);
     notification.setLatestEventInfo(context, title, message, intent);
     notification.flags |= Notification.FLAG_AUTO_CANCEL;
     notificationManager.notify(0, notification);
    notification.defaults |= Notification.DEFAULT_SOUND;
   notification.defaults |= Notification.DEFAULT_VIBRATE;
  notification.ledARGB = 0xff00ff00;
 notification.ledOnMS = 300;
 notification.ledOffMS = 1000;
 notification.flags |= Notification.FLAG_SHOW_LIGHTS;
 }

@Override
protected void onError(Context arg0, String errorId) {
    Log.i(TAG, "Received error: " + errorId);
     displayMessage(arg0, getString(R.string.gcm_error, errorId));
}

@Override
protected boolean onRecoverableError(Context context, String errorId) {
     displayMessage(context, getString(R.string.gcm_recoverable_error,
                errorId));
    return super.onRecoverableError(context, errorId);

}
} 
```

这是日志猫

```
11-22 22:49:10.747: V/GCMBroadcastReceiver(6305): onReceive: com.google.android.c2dm.intent.REGISTRATION
11-22 22:49:10.747: V/GCMBroadcastReceiver(6305): GCM IntentService class:     guc.edu.iremote.GCMIntentService
11-22 22:49:10.747: V/GCMBaseIntentService(6305): Acquiring wakelock

11-22 22:49:10.838: V/GCMBaseIntentService(6305): Intent service name:       GCMIntentService-55975***5670-181

11-22 22:49:10.877: D/GCMBaseIntentService(6305): handleRegistration: registrationId = ****, error = null, unregistered = null
11-22 22:49:10.877: D/GCMRegistrar(6305): resetting backoff for guc.edu.iremote
11-22 22:49:10.907: V/GCMRegistrar(6305): Saving regId on app version 1
11-22 22:49:10.927: I/===GCMIntentService===(6305): Device registered: regId = ****
11-22 22:49:10.957: V/GCMBaseIntentService(6305): Releasing wakelock

11-22 22:49:13.087: V/GCMBroadcastReceiver(6305): onReceive: com.google.android.c2dm.intent.REGISTRATION
11-22 22:49:13.087: V/GCMBroadcastReceiver(6305): GCM IntentService class: guc.edu.iremote.GCMIntentService
11-22 22:49:13.087: V/GCMBaseIntentService(6305): Acquiring wakelock

11-22 22:49:13.388: V/GCMBaseIntentService(6305): Intent service name: GCMIntentService-559753615670-182
11-22 22:49:13.388: I/Choreographer(6305): Skipped 67 frames!  The application may be doing too much work on its main thread.
11-22 22:49:13.417: D/GCMBaseIntentService(6305): handleRegistration: registrationId = ****, error = null, unregistered = null
11-22 22:49:13.430: D/GCMRegistrar(6305): resetting backoff for guc.edu.iremote
11-22 22:49:13.430: V/GCMRegistrar(6305): Saving regId on app version 1

11-22 22:49:13.477: I/===GCMIntentService===(6305): Device registered: regId = ****
11-22 22:49:13.477: V/GCMBaseIntentService(6305): Releasing wakelock 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T06:21:10.957

试试这个代码...

```
 package com.gcm.demo;

    import static com.gcm.demo.CommonUtilities.SENDER_ID;
    import static com.gcm.demo.CommonUtilities.displayMessage;

    import android.app.IntentService;
    import android.app.Notification;
    import android.app.NotificationManager;
    import android.app.PendingIntent;
    import android.content.Context;
    import android.content.Intent;
    import android.util.Log;

    import com.google.android.gcm.GCMBaseIntentService;
    import com.google.android.gcm.GCMRegistrar;

    /**
     * {@link IntentService} responsible for handling GCM messages.
     */
    public class GCMIntentService extends GCMBaseIntentService {

        @SuppressWarnings("hiding")
        private static final String TAG = "GCMIntentService";

        public GCMIntentService() {
            super(SENDER_ID);
            Log.i(TAG, "================Inside GCMIntentService Constructor==============================");
        }

        @Override
        protected void onRegistered(Context context, String registrationId) {
            Log.i(TAG, "================Inside onRegistered Method==============================");
            Log.i(TAG, "Device registered: regId = " + registrationId);
            displayMessage(context, getString(R.string.gcm_registered));
            ServerUtilities.register(context, registrationId);
        }

        @Override
        protected void onUnregistered(Context context, String registrationId) {
            Log.i(TAG, "================Inside onUnRegistered Method==============================");
            displayMessage(context, getString(R.string.gcm_unregistered));
            if (GCMRegistrar.isRegisteredOnServer(context)) {
                ServerUtilities.unregister(context, registrationId);
            } else {
                // This callback results from the call to unregister made on
                // ServerUtilities when the registration to the server failed.
                Log.i(TAG, "Ignoring unregister callback");
            }
        }

        @Override
        protected void onMessage(Context context, Intent intent) {
            Log.i(TAG, "================Inside OnMessage Method==============================");
            Log.i(TAG, "Received message");
            String message = getString(R.string.gcm_message);
            displayMessage(context, message);
            // notifies user
            generateNotification(context, message);
        }

        @Override
        protected void onDeletedMessages(Context context, int total) {
            Log.i(TAG, "================Inside onDeletedMessages Method==============================");
            Log.i(TAG, "Received deleted messages notification");
            String message = getString(R.string.gcm_deleted, total);
            displayMessage(context, message);
            // notifies user
            generateNotification(context, message);
        }

        @Override
        public void onError(Context context, String errorId) {
            Log.i(TAG, "================Inside onError Method==============================");
            Log.i(TAG, "Received error: " + errorId);
            displayMessage(context, getString(R.string.gcm_error, errorId));
        }

        @Override
        protected boolean onRecoverableError(Context context, String errorId) {
            // log message
            Log.i(TAG, "================Inside onRecoverableError Method==============================");
            Log.i(TAG, "Received recoverable error: " + errorId);
            displayMessage(context, getString(R.string.gcm_recoverable_error,
                    errorId));
            return super.onRecoverableError(context, errorId);
        }

        /**
         * Issues a notification to inform the user that server has sent a message.
         */
        private static void generateNotification(Context context, String message) {
            Log.i(TAG, "================Inside generateNotification Method==============================");
            int icon = R.drawable.ic_stat_gcm;
            long when = System.currentTimeMillis();
            NotificationManager notificationManager = (NotificationManager)
                    context.getSystemService(Context.NOTIFICATION_SERVICE);
            Notification notification = new Notification(icon, message, when);
            String title = context.getString(R.string.app_name);
            Intent notificationIntent = new Intent(context, DemoActivity.class);
            // set intent so it does not start a new activity
            notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
                    Intent.FLAG_ACTIVITY_SINGLE_TOP);
            PendingIntent intent =
                    PendingIntent.getActivity(context, 0, notificationIntent, 0);
            notification.setLatestEventInfo(context, title, message, intent);
            notification.flags |= Notification.FLAG_AUTO_CANCEL;
            notificationManager.notify(0, notification);
        }

    } 
```

# python - 可视化表示该算法的最佳方式？

> ID：13521531
> 
> 赞同：0
> 
> 时间：2012-11-22T23:56:04.740
> 
> 标签：python

只是想知道直观地表示这个算法程序的最佳方式可能是什么？如果可能的话，我们想直观地表示最短路径和通过路由器的数据包吗？有任何想法吗？看着乌龟，似乎我们可以实现我们想要的。欢迎任何指点。谢谢。

试图直观地表示这一点：显示一组加权（数值）节点之间的最短路径。

```
from heapq import heappush, heappop # for priority queue
pq = []

class node:
    label = ''
    # adjacency list of the node 
    neighbors = [] # list of nodes
    distances = [] # distances to neighbors
    # for Dijkstra
    prevNode = None
    totalDistance = float('Inf')
    visited = False
    # constructor
    def __init__(self, label):
        self.label = label
        self.neighbors = []
        self.distances = []
        self.prevNode = None
        self.totalDistance = float('Inf')
        self.visited = False

# find the shortest paths to all nodes recursively
def dijkstra(node):
    # visit all neighbors and update them if necessary
    for i in range(len(node.neighbors)):
        n = node.neighbors[i]
        d = node.distances[i]
        if n.totalDistance > d + node.totalDistance:
            n.prevNode = node
            n.totalDistance = d + node.totalDistance
            heappush(pq, (n.totalDistance, n))
    node.visited = True

    (d, ne) = heappop(pq)
    if not ne.visited:
        dijkstra(ne)

# get the shortest path to the given node
def route(endNode):
    node = endNode
    labels = [endNode.label]
    # distances = []
    while node.label != node.prevNode.label:
        # distances.append(node.totalDistance - node.prevNode.totalDistance)
        node = node.prevNode
        labels.append(node.label)
    labels.reverse()
    return labels
    # distances.reverse()
    # return (labels, distances)

# create a graph
a = node('a')
b = node('b')
c = node('c')
d = node('d')
e = node('e')
f = node('f')
g = node('g')
graph = (a, b, c, d, e, f, g)

# create bidirectional edges of the graph
edges = []
edges.append((b, c, 3))
edges.append((d, e, 1))
edges.append((b, d, 2))
edges.append((c, e, 1))
edges.append((a, b, 1))
edges.append((a, d, 1))
edges.append((c, f, 1))
edges.append((e, f, 3))
edges.append((e, g, 1))

# create adjaceny list of neighbors for each node
for edge in edges:
    edge[0].neighbors.append(edge[1])
    edge[0].distances.append(edge[2])
    edge[1].neighbors.append(edge[0])
    edge[1].distances.append(edge[2])

# print the graph
print 'The graph:'
print
for n in graph:
    print 'Node: ', n.label
    print 'Neighbors:'
    for i in range(len(n.neighbors)):
        print n.neighbors[i].label, n.distances[i]
    print

# find the shortest paths to all neighbors starting w/ the given node
startNode = a
print 'Route start node:', startNode.label
startNode.prevNode = startNode
startNode.totalDistance = 0
dijkstra(startNode)

##print
##print 'The graph after Dijkstra:'
##print
##for n in graph:
##    print 'Node:', n.label
##    print 'totalDistance:', n.totalDistance
##    print 'prevNode:', n.prevNode.label
##    print

# print the shortest path to the given node
endNode = f
print 'Route end node:', endNode.label
print 'Route:', route(endNode)
print 'Total distance:', endNode.totalDistance 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T23:59:47.153

使用[pydot](http://code.google.com/p/pydot/)，并以不同的方式设置所选边缘的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:03:09.123

显示所有节点，它们之间的距离与它们之间的路径权重成正比。然后用一条有向线连接作为最短路径一部分的每一对。

您可以使用`networkx`和`graphvis`在 Python 中创建这样的图表。

# windows-store-apps - 在后面的代码中触发 UIElement Manipulation(Delta)

> ID：13521534
> 
> 赞同：1
> 
> 时间：2012-11-22T23:56:25.223
> 
> 标签：windows-store-apps, microsoft-metro, uielement

我正在构建一个 Windows 商店应用程序，我需要在后面的代码中触发 UIElement 的 Manipulation(Delta)，但没有设法这样做。这个想法是，用户可以从 TopAppBar 中选择一个 UIElement 并将其拖到 MainGrid（那里制作了该 UIElement 的副本），然后在 MainGrid 上随意放置它。

**它是如何工作的：** 在应用程序中，用户可以从 TopAppBar 拖动（使用操作）一个 UIElement(x)，当它退出 TopAppBar 时，一个新的 UIElement(y) 被放置在页面的 MainGrid 上，并且 TopAppBar 关闭。新的 UIElement(y) 的位置使指针位于它的中心。

用户现在应该能够继续拖动（使用操作）UIElement，但因此我需要触发新 UIElement(y) 的操作。

我尝试订阅 ManipulationStarting 事件，然后触发事件处理程序，但正如我所怀疑的那样，它失败了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:48:17.623

有人在 msdn 支持论坛上回答了这个问题。从后面的代码开始Manipulation似乎是不可能的。

# tomcat - Spring mvc tomcat 应用部署

> ID：13521542
> 
> 赞同：2
> 
> 时间：2012-11-22T23:57:26.797
> 
> 标签：tomcat, spring-mvc, nginx

我有一个工作的 spring mvc 应用程序。我想让它可供测试用户查看。我已经购买了域名/设置名称服务器和所有 dns 的东西。

我像这样通过本地主机访问我的应用程序：

```
localhost:8080/myApp 
```

但在现实世界中，我想像`mydomain.com`. 所以我搜索了很多，发现人们将 nginx 推荐为“最快”的这些东西。因此，使用以下配置安装了 nginx：

```
server {

  listen 80;

  server_name www.mydomain.com mydomain.com;
  location / {
        proxy_set_header X-Forwarded-Host $host;
        proxy_set_header X-Forwarded-Server $host;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_pass http://localhost:8080;
    }

} #end server 
```

**问题 ：**

当我访问时`mydomain.com`，我得到了那个众所周知的 tomcat 页面`If you're seeing this page via a web browser, it means you've setup Tomcat successfully. Congratulations!`。

如果我手动转到，`mydomain.com/myApp`那么一切都会按预期进行。

**问题 ：**

有没有办法让我配置它来执行以下操作：

`mydomain.com`当我输入转移到的地址栏时`mydomain.com/myApp`

或者我在这种情况下完全关闭。有更简单的方法吗？

**更新：**

根据 fvu 的建议，当我将 ROOT 更改为其他目录然后将我的 up 部署在 ROOT 目录中时，我从 tomcat 得到 404：

```
type Status report

message

description The requested resource is not available. 
```

我可以从服务器日志中检索此错误：

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.util.Log4jConfigListener
java.lang.IllegalStateException: Web app root system property already set to different value: 'webapp.root' = [/tomcat_9090/webapps/myApp/] instead of [/tomcat_9090/webapps/ROOT
/] - Choose unique values for the 'webAppRootKey' context-param in your web.xml files! 
```

**更新二：**

当我将配置更改为：

```
proxy_pass http://localhost:8080/myApp/; 
```

该网站看起来可以正常工作，但实际上并没有。链接不起作用，css/js 无法加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T23:25:26.003

如果您使用 配置**nginx**，`proxy_pass http://localhost:8080/myApp/;`唯一的问题是如何创建链接和资源，以便它们使用预期的 base-url 路径，而不是默认的 Tomcat Servlet 路径。

如果您能够使用**Spring Framework 3.1+**，新的**Profiles 功能**可以帮助根据活动配置文件定义不同的 base-url，就像其他 Web 框架一样：路径将在**runtime**中决定，具体取决于服务器或环境。

例如，假设至少有 2 个属性文件（production.properties 和 dev.properties）在每个属性文件上声明了 baseurl 字段：

*   生产属性

    ```
    baseurl = //yourdomain.com 
    ```

*   开发属性

    ```
    baseurl = //localhost:8080/myApp 
    ```

然后使用您最喜欢的 Spring 方式，为每个不同的环境加载属性，例如：

```
<util:properties id="properties" location="classpath:META-INF/default.properties" />
....
<beans profile="development">
    <util:properties id="properties" location="classpath:META-INF/dev.properties" />
</beans> 
```

使用前面的要求，您可以在任何 JSP 模板页面中定义**基本标记：**

```
<spring:eval expression="@properties['baseurl']" var="baseurl" />

<base href="${baseurl}/" /> 
```

最后，您可以将所有链接和资源声明为**相对路径**：

```
<link rel="stylesheet" href="css/app.css">
<script src="js/libs/jquery-1.7.1.min.js"></script>
<a href="">Home</a>
<a href="about">About</a>
... 
```

*如果由于任何原因您在使用基本标签*时遇到问题，您还可以使用 ${baseurl} 声明每个链接：`<link rel="stylesheet" href="${baseurl}/css/app.css">`

使用此解决方案，每台服务器都将拥有各自的活动配置文件，所有链接和资源都在运行时更新，正如预期的那样。

# c++ - 与模板专业化交朋友时可能出现 gcc 错误

> ID：13521546
> 
> 赞同：5
> 
> 时间：2012-11-22T23:57:48.830
> 
> 标签：c++, class, templates

在回答关于 SO 的另一个问题时，我发现 gcc 出现了一个有点可疑的编译器错误。有问题的片段是

```
template <class T> class A;
template <class T, class U>
void operator*(A<T>, A<U>);

template <class T>
class A {
    friend void ::operator*(A<T>, A<T>);
... 
```

最后一行给出了著名的警告

> 朋友声明“ `void operator*(A<T>, A<T>)`”声明了一个非模板函数

导致以后出现硬错误。完整的代码可以在[这里](http://ideone.com/IIFnd0)找到。

现在，问题是我认为这种行为不合适。[temp.friend]/1 中的标准说：

> 对于不是模板声明的友元函数声明：
> 
> — 如果朋友的名字是一个合格的或不合格的模板ID，朋友声明是指一个函数模板的特化，否则
> 
> — 如果朋友的名字是一个qualified-id，并且在指定的类或命名空间中找到了一个匹配的非模板函数，则朋友声明引用该函数，否则，
> 
> — 如果朋友的名字**是一个qualified-id，并且在指定的类或命名空间中找到了一个模板函数的匹配特化** ，则朋友声明引用该函数特化，否则，

[这是 C++03；C++11 包含类似的子句]

* * *

模板的特化由 [temp.spec]/4 定义：

> ...特化是实例化或显式特化的类、函数或类成员（14.7.3）。

和 [temp.fct.spec]/1：

> 从函数模板实例化的函数称为函数模板特化；函数模板的显式特化也是如此。模板参数*可以*显式指定...

[temp.arg.explicit]/2 说明了为函数规范指定模板参数列表：

> 引用函数模板的特化时，可以指定模板参数列表
> 
> ...
> 
> ——在朋友声明中。
> 
> 可以从显式模板参数列表中省略可以推导出的尾随模板参数（14.8.2）。如果所有的模板参数都可以推导出来，那么它们都可以被省略；在这种情况下，**空模板参数列表 <> 本身也可以省略**。

所以，[temp.fct.spec]/1，`::operator*<T,T>(A<T>, A<T>)`是一个函数模板特化；并且由于可以推导出模板参数，因此可以将其称为`::operator*(A<T>, A<T>)`。所以我得出结论，朋友声明中的限定 ID 表示函数模板特化。

* * *

我认为强调的条件得到满足；因此，friend 声明应该与具有操作符模板（隐式）特化的类友好。然而，gcc 不这么认为并继续第四个项目符号，它只涉及由 unqualified-ids 指定的朋友，*即使该朋友实际上是由一个qualified-id 命名的*。

在这种情况下，我的解释是正确的还是 gcc 正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:16:04.737

我相信 gcc 是正确的。

首先是当前的措辞：

> 如果朋友的名字是一个qualified-id，并且在指定的类或命名空间中找到了一个匹配的函数模板，那么朋​​友声明**指的是那个函数模板的推导**特化（14.8.2.6），否则

来自 [14.8.2.6 从函数声明中推导出模板参数]：

> 1**在其 declarator-id 指代函数模板的特化的声明中，执行模板参数推导以识别该声明所指的特化。** 具体来说，这是针对显式实例化 (14.7.2)、显式特化 (14.7.3) 和**某些友元声明** (14.5.4) 完成的。这也是为了确定释放函数模板特化是否与放置运算符 new (3.7.4.2, 5.3.4) 匹配。在所有这些情况下，P 是被视为潜在匹配的函数模板的类型，而 A 是声明中的函数类型或与 5.3.4 中描述的放置运算符 new 匹配的释放函数的类型。扣除按照 14.8.2.5 中的描述进行。
> 
> 2 如果对于这样考虑的一组函数模板，在考虑了偏序（14.5.6.2）之后没有匹配或有多个匹配，则推导失败，并且在声明的情况下，程序格式错误。

**在您的情况下，不**执行模板参数推导，因为 declarator-id 不引用专业化。我认为重要的部分是`whose declarator-id refers to a specialization`作为发生这种情况的条件。简而言之，您需要`<>`第一句话`14.8.2.6p1`发生（如果我没看错的话）。

**更新** 让我们分解一下这种情况下的 declarator-id 是什么：

```
qualified-id:
nested-name-specifier templateopt unqualified-id
:: identifier
:: operator-function-id
:: literal-operator-id
:: template-id 
```

从上面的语法可以看出，`void ::operator*(A<T>, A<T>)`is a`:: operator-function-id`而**不是 a** `:: template-id`。这意味着语法永远不能声明模板函数（如错误消息中所述）。要使其成为模板 ID，您必须使用`operator-function-id < template-argument-listopt>`语法。

# android - 不小心删除了 Android SDK Tools，现在 SDK Manager 无法启动

> ID：13521548
> 
> 赞同：0
> 
> 时间：2012-11-22T23:57:54.123
> 
> 标签：android, eclipse

我一直在使用 Android SDK 发布预览版，今天看到原来的 SDK 工具升级到了新版本。我没有安装新版本，而是点击了预览工具并删除了这两个包。现在，当我尝试运行 android sdk 管理器时，我在 Eclipse 中弹出一个“在 SDK 'C:\Users\Me\android-sdks\' 中找不到文件夹 'tools'。我该如何找回我的 sdk 管理器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T00:10:33.550

我建议重新安装 Android SDK。[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:11:33.507

只需从 Google 下载最新的 SDK 工具并重新安装即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T23:39:53.930

运行 eclipse.exe 不起作用（弹出一些 jni 错误）。我最终进入了我计算机上的 android-sdks 目录，并拿走了我从 .zip 下载的所有文件夹，然后将它们拖放到上面，它最终可以工作了。

# c# - 使用 Console.CursorLeft 进行控制台重定向

> ID：13521551
> 
> 赞同：5
> 
> 时间：2012-11-22T23:58:19.963
> 
> 标签：c#, console

> **可能重复：**
> [如何确定 Console.Out 是否已重定向到文件？](https://stackoverflow.com/questions/743885/how-can-i-determine-whether-console-out-has-been-redirected-to-a-file)
> [如何检测 Console.In (stdin) 是否已被重定向？](https://stackoverflow.com/questions/3453220/how-to-detect-if-console-in-stdin-has-been-redirected)

我们的系统当前正在使用一个`CursorLeft`函数来覆盖打印到控制台窗口的最后一个内容：

```
Console.CursorLeft = 0; 
```

这是必需的功能，因此我无法将其更改为每次只打印一个新行。

将控制台重定向到文本文件时，`IOException`会发生。我怎样才能让日志文件跳过显示这些输出或强制它把每个人都写出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:32:11.050

对我来说很明显控制台与文件不同。例如，您可以在控制台中使用颜色，当您将输出重定向到文件时，这些颜色会丢失。因此，不能保证重定向后所有控制台功能都可以保留。我建议质疑该要求，因为它似乎不可行。

无论如何，这里有一个基于下面相同 Win32API 的类似问题：[通过 java 运行 .net 控制台时“句柄无效”](https://stackoverflow.com/questions/327408/the-handle-is-invalid-when-running-net-console-via-java)

这是来自 MSDN 的文章，其中包含有关控制台如何工作的一些信息（在页面底部）：http: [//msdn.microsoft.com/en-us/library/system.console.aspx](http://msdn.microsoft.com/en-us/library/system.console.aspx)

要考虑的另一件事是，尽管您可能无法解决此问题，但您绝对可以重新构建您的应用程序，这样您就可以使用一些缓冲区类抽象与控制台的直接交互，该缓冲区类会累积您想要进行的所有更改虚拟缓冲区中的一行（或几行），然后仅在您确定所有更改都已完成并且该行不再更改时才对 Console.WriteLine 进行一次调用。

# java - Once again: Postgres driver not found on Heroku with Play 2.0/Java

> ID：13521552
> 
> 赞同：1
> 
> 时间：2012-11-22T23:58:23.903
> 
> 标签：java, postgresql, heroku, playframework

Dear Heroku/Play experts,

I'm new to Heroku and Play 2.0 (with Java) and am trying to get my first db-backed Heroku app up and running (I'm using the zentask app for learning purposes). I've been reading the related documents on stackoverflow and @James Ward's Play2torial very thoroughly but can't seem to find a solution to a problem I'm having:

When pushing my files to Heroku I always get a "Driver not found" error for the postgres driver - just as if it weren't installed on Heroku. I've pretty much tried everything that you, the experts, have proposed as solutions but nothing has worked. I even tried copying a jdbc driver jar into the `lib` folder to compensate for the missing `jdbc jar` but then I get some error concerning missing validation - this might be because I couldn't find the jar for `9.1-901-1.jdbc4` on the postgres website. In any case, your solutions suggest that this postgres driver should be there out of the box as the standard setup of Heroku so I'm getting a bit frustrated...

Hence, please find below the "driver not found error" with the files involved and the resulting error message.

I would be very, very grateful for your advice. Thanks a lot in advance! Best,

Horacio

* * *

Here are my files:

## `Procfile`:

```
web: target/start -Dhttp.port=${PORT} ${JAVA_OPTS} -Dconfig.resource=application.conf 
```

## `Build.scala`:

```
import sbt._
import Keys._

import PlayProject._

object ApplicationBuild extends Build {

    val appName         = "Myapp"
    val appVersion      = "1.0"

    val main = PlayProject(appName, appVersion, mainLang = JAVA)

    val appDependencies = Seq(
      "postgresql" % "postgresql" % "9.1-901-1.jdbc4"
    )
} 
```

## `application.conf`:

```
application.name=myapp

application.secret="some secret"

db.default.driver=org.postgresql.Driver

db.default.url="jdbc:postgresql://some URL"

ebean.default="models.*"

logger=ERROR

logger.play=INFO

logger.application=DEBUG 
```

error message:

```
2012-11-23T17:39:35+00:00 heroku[web.1]: State changed from crashed to starting
2012-11-23T17:39:41+00:00 heroku[web.1]: Starting process with command `target/start -Dhttp.port=${PORT} ${JAVA_OPTS} -Dconfig.resource=application.conf`
2012-11-23T17:39:42+00:00 app[web.1]: Play server process ID is 2
2012-11-23T17:39:43+00:00 app[web.1]: Oops, cannot start the server.
2012-11-23T17:39:43+00:00 app[web.1]: Configuration error: Configuration error [Driver not found: [org.postgresql.Driver]]
2012-11-23T17:39:43+00:00 app[web.1]:   at play.api.Configuration$.play$api$Configuration$$configError(Configuration.scala:71)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.api.Configuration.reportError(Configuration.scala:258)
2012-11-23T17:39:43+00:00 app[web.1]:   at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:194)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.api.db.BoneCPApi.play$api$db$BoneCPApi$$register(DB.scala:283)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.api.db.BoneCPApi$$anonfun$4.apply(DB.scala:386)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.api.db.BoneCPApi$$anonfun$4.apply(DB.scala:390)
2012-11-23T17:39:43+00:00 app[web.1]:   at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:194)
2012-11-23T17:39:43+00:00 app[web.1]:   at scala.collection.TraversableLike$class.map(TraversableLike.scala:194)
2012-11-23T17:39:43+00:00 app[web.1]:   at scala.collection.immutable.Set$Set1.foreach(Set.scala:86)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.api.db.BoneCPPlugin.play$api$db$BoneCPPlugin$$dbApi(DB.scala:211)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.api.db.BoneCPPlugin.onStart(DB.scala:240)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.api.Play$$anonfun$start$1.apply(Play.scala:60)
2012-11-23T17:39:43+00:00 app[web.1]:   at scala.collection.immutable.Set$Set1.map(Set.scala:73)
2012-11-23T17:39:43+00:00 app[web.1]:   at scala.collection.immutable.Set$Set1.scala$collection$SetLike$$super$map(Set.scala:73)
2012-11-23T17:39:43+00:00 app[web.1]:   at scala.collection.SetLike$class.map(SetLike.scala:93)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.api.db.BoneCPApi.<init>(DB.scala:386)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.api.Play$$anonfun$start$1.apply(Play.scala:60)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.api.Play$.start(Play.scala:60)
2012-11-23T17:39:43+00:00 app[web.1]:   at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.core.StaticApplication.<init>(ApplicationProvider.scala:51)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.core.server.NettyServer$$anonfun$main$5.apply(NettyServer.scala:153)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.core.server.NettyServer$.main(NettyServer.scala:152)
2012-11-23T17:39:43+00:00 app[web.1]:   at scala.collection.immutable.List.foreach(List.scala:45)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.core.server.NettyServer$.createServer(NettyServer.scala:132)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.core.server.NettyServer$$anonfun$main$5.apply(NettyServer.scala:152)
2012-11-23T17:39:43+00:00 app[web.1]:   at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
2012-11-23T17:39:43+00:00 app[web.1]:   at scala.Option.map(Option.scala:133)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.core.server.NettyServer.main(NettyServer.scala)
2012-11-23T17:39:43+00:00 app[web.1]: Caused by: java.lang.ClassNotFoundException: org.postgresql.Driver
2012-11-23T17:39:43+00:00 app[web.1]:   at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
2012-11-23T17:39:43+00:00 app[web.1]:   at java.security.AccessController.doPrivileged(Native Method)
2012-11-23T17:39:43+00:00 app[web.1]:   at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
2012-11-23T17:39:43+00:00 app[web.1]:   ... 24 more
2012-11-23T17:39:43+00:00 app[web.1]:   at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
2012-11-23T17:39:43+00:00 app[web.1]:   at java.lang.Class.forName(Class.java:264)
2012-11-23T17:39:43+00:00 app[web.1]:   at play.api.db.BoneCPApi.play$api$db$BoneCPApi$$register(DB.scala:281)
2012-11-23T17:39:43+00:00 app[web.1]:   at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
2012-11-23T17:39:43+00:00 app[web.1]:   at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
2012-11-23T17:39:43+00:00 app[web.1]:   at java.lang.Class.forName0(Native Method)
2012-11-23T17:39:44+00:00 heroku[web.1]: Process exited with status 255
2012-11-23T17:39:44+00:00 heroku[web.1]: State changed from starting to crashed
2012-11-23T17:40:19+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=SOME_URL.herokuapp.com fwd= dyno= queue= wait= connect= service= status=503 bytes= 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T22:30:08.147

thanks to the great Heroku support team I can give you the solution: Apparently, I didn't specify my appDependencies in my PlayProject. So I had to add my appDependencies to my PlayProject in Build.scala like this:

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA) 
```

I hope this helps everyone who runs into the same issue :)

Cheers, Horacio

# internet-explorer - Internet Explorer 中的 DOM 级别 3 XPath

> ID：13521554
> 
> 赞同：32
> 
> 时间：2012-11-22T23:58:41.867
> 
> 标签：internet-explorer, xpath, msxml, xmldom, dom3

我刚刚在我的 Windows 7 上安装了 IE10，我注意到，即使我很高兴来自 AJAX 请求的 XML 现在是兼容的 DOM 文档，*但仍然*`document.evaluate`不支持一个相当基本的功能。

 *更糟糕的是，由于这些 XML*不是*自定义的 Microsoft对象，因此`IXMLDocument`节点不再支持。**最后，IE10 似乎不支持 DOM Level 3 XPath 或 MSXML Xpath。**`selectNodes``selectSingleNode`

 **认真的，微软？有什么我想念的吗？

当然，我可以使用`querySelector`and `querySelectorAll`，但我不想失去相当多的向后兼容性。

**否则**，仍然可以使用这一行请求 MSXML 文档

```
try {xhr.responseType = "msxml-document";} catch(e) {} 
```

[如此处](http://blogs.msdn.com/b/ie/archive/2012/07/19/xmlhttprequest-responsexml-in-ie10-release-preview.aspx)所述，但我认为最后在 IE 中处理标准 DOM 文档也会很好。

那么，有没有办法在 IE10 中将 XPath 与标准 DOM 文档一起使用？

**更新 26/7/2013** IE11 还不稳定，但它*仍然*不支持`document.evaluate`. 如果它在稳定版本中不支持它，我怀疑它是否会*支持*它。不用说这是荒谬的。

我知道你可以在 DOM 节点中使用`querySelector`/ `All`，但它在 IE9 及更低版本中不支持，它仍然很常用，而且无论如何 XPath 比选择器更强大。

幸运的是（如果你可以这么说的话），你仍然可以设置`xhr.responseType = "msxml-document"`. 有那么一瞬间，我怕你再也做不到了……

**更新 23/11/2013** IE11 现在很稳定，但遗憾的是，它不支持`document.evaluate`. 随着重量级 XML 文档在 Web 应用程序中越来越少地使用 JSON 或其他轻量级符号格式，这已不再是一个问题，但仍然存在。

设置`responseType`属性仍然提供遗留的 XML 文档，所以我猜什么都不会丢失。不过，我不知道这是否会适用于 IE12。

**2015 年 8 月 15 日更新现在**听起来很荒谬，但 Edge 现在支持`document.evaluate`. 就在（几乎）一切都切换到 JSON 进行数据交换的时候。好吧，我想，迟到总比没有好。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-23T10:30:12.067

是的，IE =/ 中仍然没有 XPath 支持。

对我来说，可悲的是，在每个浏览器中使用最可靠的方法`document.evaluate`是通过库。

它被称为[**Wicked Good XPath**](https://github.com/google/wicked-good-xpath)，它是最近由 Google 编写的对旧的优秀[JavaScript-XPath](http://coderepos.org/share/wiki/JavaScript-XPath)库的重写。自发布以来，我一直在使用 Wicked Good XPath，并且对它非常满意（嗯，不如原生 XPath 支持多，但仍然如此）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-12T20:44:12.127

它是 Microsoft Edge build 10240+ 的一部分：modern.ie: [DOM Level 3 XPath](http://status.modern.ie/domlevel3xpath)

[IE Dev Channel](https://msdn.microsoft.com/en-us/library/ie/dn722334)有一个构建版本，您可以使用它来预览它：

*   [适用于 Windows 7 SP1 的 Internet Explorer 开发人员频道](http://www.microsoft.com/en-us/download/details.aspx?id=43360)

*   [适用于 Windows 8.1 的 Internet Explorer 开发人员频道](http://www.microsoft.com/en-us/download/details.aspx?id=43359)

它在内部使用[wicked-good-xpath](/questions/tagged/wicked-good-xpath "显示标记为 'wicked-good-xpath' 的问题")：

> 为了在不污染网页上下文的情况下支持 WGX，我们创建了一个单独的、隔离的脚本引擎，专用于 WGX。通过对 WGX 进行一些修改，为调用函数和访问结果提供入口点，我们将数据从页面编组到隔离引擎并使用 WGX 评估表达式。启用 WGX 以处理本机 XPath 查询后，我们看到在我们的新引擎呈现现代 Web 中缺少内容的网站立即获得收益

目前，MSDN 有一个迁移指南，其中推荐以下内容：

> 通常，除非您需要 XPath/XSLT 等功能，否则请尝试迁移到本机对象和 API；这可以通过将 responseText 传递给 DOMParser 来完成，而不是使用 responseXML var：
> 
> 如果仍然需要 MSXML API，可以更新功能检查以验证接收到的节点类型，以便选择正确的 API：

**参考**

*   [提高与 DOM L3 XPath 的互操作性](http://blogs.msdn.com/b/ie/archive/2015/03/19/improving-interoperability-with-dom-l3-xpath.aspx)
*   [本机 XML 对象类型和遗留网站](http://msdn.microsoft.com/en-us/library/ie/hh180177)
*   [IE10 Release Preview 中的 XMLHttpRequest responseXML](http://blogs.msdn.com/b/ie/archive/2012/07/20/10331683.aspx)
*   [IE9 Beta 中的 DOMParser 和 XMLSerializer](http://blogs.msdn.com/b/ie/archive/2010/10/15/domparser-and-xmlserializer-in-ie9-beta.aspx)
*   [DOMParser 和 XMLSerializer 演示](http://ie.microsoft.com/testdrive/HTML5/DOMParserXMLSerializer/Default.html)
*   [如何在 XSL 文档中包含客户端脚本函数](http://support.microsoft.com/kb/273793)
*   [文档 API 的详细信息 - Microsoft Edge 开发](https://developer.microsoft.com/en-us/microsoft-edge/platform/documentation/apireference/interfaces/document/)***

# android - 有意将单选按钮的值传递给其他活动？

> ID：13521556
> 
> 赞同：0
> 
> 时间：2012-11-22T23:59:26.397
> 
> 标签：android, android-intent, radio-button, radio-group

快速提问。我将如何使用意图将选中的单选按钮值传递给其他活动？我是否还需要使用共享偏好来保存价值？

我想做类似“当用户选择单选按钮（例如：红色，蓝色，绿色，黄色）并且所有文本视图的颜色将在所有活动中更改时。

```
public class Text_Colour extends Activity implements RadioGroup.OnCheckedChangeListener {

RadioButton rb1, rb2, rb3, rb4;
TextView tv2;
RadioGroup rg1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.colours);

    tv2 = (TextView)findViewById(R.id.textview2);
    rb1 = (RadioButton) findViewById(R.id.radioButton1);
    rb2 = (RadioButton) findViewById(R.id.radioButton2);
    rb3 = (RadioButton) findViewById(R.id.radioButton3);
    rb4 = (RadioButton) findViewById(R.id.radioButton4);
    rg1 = (RadioGroup) findViewById(R.id.radiogroup1);
    rg1.setOnCheckedChangeListener(this);

}

public void onCheckedChanged(RadioGroup rg1, int r) {

    // TODO Auto-generated method stub
    if (r==rb1.getId()) {
        tv2.setTextColor(Color.RED); 
    } 
    if (r==rb2.getId()) {
        tv2.setTextColor(Color.YELLOW); 
    } 
    if (r==rb3.getId()) {
        tv2.setTextColor(Color.GREEN); 
    } 
    if (r==rb4.getId()) {
        tv2.setTextColor(Color.BLUE); 
    } 

    else {
        tv2.setTextColor(Color.BLACK);
    }

} 
```

}

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:08:12.597

如果您正在谈论其中的一个应用程序和活动，那么我建议您使用`SharedPreferences`. 这是您需要做的：

1.  当单选按钮值更改时，将其保存在共享首选项中。
2.  让你的所有活动都监听`SharedPreferences`. 在这种情况下，一旦您更改颜色，所有正在运行的活动都会收到通知，以便他们更新其 UI。只是使用`SharedPreferences.registerOnSharedPreferenceChangeListener()`方法。
3.  `onCreate`每个活动都需要从共享首选项中读取颜色值并进行必要的 UI 工作。完毕！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T01:08:24.500

如果您希望单选按钮选择的更改将更新所有活动中所有 TextViews 的文本颜色，即使是正在运行的活动，您应该使用存储颜色的全局变量。这是在 Android 中创建类全局变量的一个[很好的示例](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables)，它适用于您的所有应用程序组件。

# php - 通过 twitter 登录解析 curl 响应为 false

> ID：13521578
> 
> 赞同：0
> 
> 时间：2012-11-23T00:03:07.640
> 
> 标签：php, curl, twitter, parse-platform

我正在尝试使用 curl 通过 twitter 实现登录解析，此链接中的指南： [https ://parse.com/docs/rest.html#users-signup](https://parse.com/docs/rest.html#users-signup)

```
curl -X POST \
-H "X-Parse-Application-Id: REMOVED" \
-H "X-Parse-REST-API-Key: REMOVED" \
-H "Content-Type: application/json" \
-d '{
    "authData": {
      "twitter": {
        "id": "12345678",
        "screen_name": "ParseIt",
        "consumer_key": "REMOVED",
        "consumer_secret": "REMOVED",
        "auth_token": "REMOVED",
        "auth_token_secret": "REMOVED"
      }
    }
  }' \
  https://api.parse.com/1/users 
```

**这是我在 PHP 中的实现代码：**

```
$ci = curl_init();
$data = '{"authData":{"twitter":{"id":"REMOVED","screen_name":"cat",
"consumer_key":"REMOVED",
"consumer_secret":"REMOVED",
"auth_token":"REMOVED",
"auth_token_secret":"REMOVED"}}}';

$header = array("X-Parse-Application-Id: REMOVED",
"X-Parse-REST-API-Key: REMOVED",
"Content-Type: application/json"
);
curl_setopt ($ci, CURLOPT_HTTPHEADER, $header);
curl_setopt($ci,CURLOPT_POST,true);
curl_setopt($ci,CURLOPT_POSTFIELDS,$data);
curl_setopt($ci,CURLOPT_URL,'https://api.parse.com/1/users');
 $response = curl_exec($ci);
var_dump($response);    
curl_close($ci); 
```

但是 var_dump($response) 的结果是假的。我不知道我的代码有什么问题。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:07:45.480

添加

```
curl_setopt($ci, CURLOPT_SSL_VERIFYPEER, false); 
```

在运行 exec() 之前；

用于调试的过程：

1.  在你之前`curl_close()`，使用`print_r(curl_getinfo())`. 这会告诉您有关 curl 会话的所有信息。
2.  你会看到你什么都没有回来，这意味着防火墙或其他限制到位，或者它拒绝你无效的标题。
3.  因此，在浏览器中输入 URL 并查看您是否需要凭据。所以 URL 是正确的，它不是防火墙。假设标头正在传递凭据（在此阶段）
4.  因此，您注意到它是 SSL，并且您没有获得 SSL 证书。因此，上面的选项告诉您忽略证书问题。那行得通，到此为止。（否则追查那个凭证问题）

# jquery - jQuery scrollTop 通过锚点保留浏览器历史记录

> ID：13521580
> 
> 赞同：1
> 
> 时间：2012-11-23T00:03:40.290
> 
> 标签：jquery, browser-history, scrolltop

我正在尝试在页面锚点之间添加平滑过渡。

在下面的代码中，转换正在工作，但浏览器历史记录不记得锚导航。使用浏览器后退按钮失败。删除`preventDefault()`使一切正常，但页面在从上一个页面位置滚动到目标标记内容之前闪烁。

我已经尝试过插件——比如[地址](http://www.asual.com/jquery/address/docs/)——但没有成功。那么，滚动浏览保留浏览器历史记录的锚点的简单方法是什么？

```
$('a').click(function(e) {
  e.preventDefault();

  var href = $(this).attr('href');
  $('html, body').animate({
     scrollTop: $(href).offset().top}, 'slow', 'swing'
  );
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:34:37.660

解决了[这个问题](https://stackoverflow.com/questions/12427965/jquery-smooth-scroll-issue-on-safari-mac-os)。答案暗示了一个不错的 jQuery 库：[smoothanchors](https://github.com/alextrob/SmoothAnchors)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:52:56.957

代替

```
 $("html,body").animate({ 
```

有了这个

```
 $("html:not(:animated),body:not(:animated)").animate({ 
```

使用与其他值不同的变量名称也是一种好习惯，例如 HREF 用于变量名称，也是链接属性。

# html - 如何为电子商务商店创建产品配置器？

> ID：13521581
> 
> 赞同：2
> 
> 时间：2012-11-23T00:03:44.780
> 
> 标签：html, magento, e-commerce, dynamic-html

我想为 eCommere 商店实现一个配置器。它基本上应该是这样的：[http](http://urbike.de/singlespeed/Konfigurator.html) ://urbike.de/singlespeed/Konfigurator.html 。

我在网页设计方面没有太多经验，我需要什么来为电子商务商店创建这样的配置器。有没有简单的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:15:57.040

在 magento 中执行此操作的最简单方法是

1.  创建一个简单的产品
2.  为每个选项（例如车架颜色、前叉、前轮...）添加“自定义选项”，并增加费用（如果有）
3.  使用以下 2 种方法之一创建图像
    1.  为每个可能的组合创建图像并使用文件命名约定（缺点 - 数千张图像）
    2.  为每种颜色的每个选项/层（例如前叉、前轮）创建一个透明图像，然后使用 css 将它们相互叠加（层必须按正确的顺序排列）
4.  创建 javascript 功能以根据当前选择更改图像，如果用户选择编辑购物车中的项目，则加载默认配置和重新加载当前选项
5.  您将不得不考虑您希望管理部分的直观程度。“管理员”用户是否能够在配置产品时上传所有这些图像并分配色板（或者只是将它们 ftp 到服务器）
6.  考虑一下您是想在订单确认时显示他们当前的配置图像还是只显示默认图像

您要完成的工作相当复杂，根据我过去创建更简单功能的经验，这将需要大量外部 js 编码和有关 magento 简单产品 js 如何工作的知识。

# java - 如何在while循环中读取带有空格的字符串（Java）

> ID：13521582
> 
> 赞同：1
> 
> 时间：2012-11-23T00:03:53.430
> 
> 标签：java, while-loop, whitespace, java.util.scanner

这总是让我头疼。我正在尝试在 while 循环中读取和保存字段“名称”和“疾病”的多字字符串。这是我的代码：

```
while(OR1.isFull() == false || OR2.isFull() == false)
{
    // prompt for next request
    System.out.println("Enter patient info:");

    // read patient info
    System.out.print("Name: ");
    String name = input.nextLine();
    input.nextLine();
    System.out.print("Malady: ");
    String malady = input.nextLine();
    input.nextLine();
    System.out.print("Priority: ");
    int priority = input.nextInt();

    // store patient info
    Patient patient = new Patient(name, malady, priority);

    OR1.add(patient);

} // end while

System.out.println("List of patients scheduled for Operating Room 1");
while(OR1.isEmpty() == false)
{
    // pop and print root
    System.out.print(OR1.remove());
} 
```

这是我的控制台输入和输出的样子：

输入患者信息：
姓名：John Doe
疾病：臀部骨折

优先级：6

安排在 1 号手术室的患者名单
患者： 疾病： 髋部骨折 优先级： 6

// 结束控制台输出。

请注意，它没有记录我为“Name”输入的值，并且在获得“Malady”后它提示输入额外的一行（要求我再次按 Enter 以获取下一个输入，“Priority ”）。

我已阅读[http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)上的文档。我尝试过 next() 和 nextLine() 的不同组合。我只是不明白。

**通过将代码更改为以下内容解决了问题：**

```
 // read patient info
        System.out.print("Name: ");
        input.nextLine();
        String name = input.nextLine();
        System.out.print("Malady: ");
        String malady = input.nextLine();
        System.out.print("Priority: ");
        int priority = input.nextInt(); 
```

虽然我仍然对这个愚蠢的扫描仪如何工作感到困惑 =/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:15:41.660

我相信它应该只适用于：

```
// read patient info
System.out.println("Name: ");
String name = input.nextLine();
System.out.println("Malady: ");
String malady = input.nextLine();
System.out.println("Priority: ");
int priority = input.nextInt(); 
```

也许问题出在 Patient 构造函数之类的东西上？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T04:37:44.757

通过将代码更改为以下内容解决了问题：

```
 // read patient info
    System.out.print("Name: ");
    input.nextLine();
    String name = input.nextLine();
    System.out.print("Malady: ");
    String malady = input.nextLine();
    System.out.print("Priority: ");
    int priority = input.nextInt(); 
```

# android - 来自一个 PagerTitleStrip 的两个 ViewPager。

> ID：13521584
> 
> 赞同：0
> 
> 时间：2012-11-23T00:04:11.120
> 
> 标签：android, android-viewpager

我有两个 ViewPager，中间有一个 PagerTitleStrip。我想要做的是滚动 ViewPager 之一，这将在完全相同的时间镜像到顶部。有人知道我会怎么做吗？

代码在这里：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tab1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<android.support.v4.view.ViewPager
    android:id="@+id/pager2"
    android:layout_width="fill_parent"
    android:layout_height="200dp"
    android:layout_marginBottom="-20dp" >

</android.support.v4.view.ViewPager>

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_below="@+id/pager2" >

    <android.support.v4.view.PagerTitleStrip
        android:id="@+id/pager_title_strip"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:background="@drawable/meatb"
        android:paddingBottom="2dp"
        android:paddingTop="9dp"
        android:textColor="#fff"/>

</android.support.v4.view.ViewPager> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T18:05:40.450

`onDrag`我没有找到为寻呼机设置“中间位置”的方法，因此在接收事件时似乎无法设置它。

但是，部分解决方案是向其中添加一个滚动侦听器`mPager.setOnPageChangeListener(..)`

并在发生这种情况时触发另一个页面转换：`mPager2.setCurrentItem(mPage1.getCurrentItem())` .

这是部分解决方案，因为它不会同时发生，因为当页面已经滚动时（可能）会触发事件。

如果您必须同时发生这种情况，那么您将需要一个可以控制其绘图或视图定位到像素的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:59:40.313

才意识到这个问题仍然没有答案，但这是我如何让它工作的：

```
 mViewPager2.setOnPageChangeListener(new OnPageChangeListener() {

        public void onPageSelected(int arg0) {

        }

        public void onPageScrolled(int arg0, float arg1, int arg2) {
            mViewPager.scrollTo(arg0*width + arg2, 0);
            currentPos = arg0;
        }

        public void onPageScrollStateChanged(int arg0) {
            mViewPager.setCurrentItem(currentPos,false);
        }
    });

    mViewPager.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View arg0, MotionEvent arg1) {
            return true;
        }
    }); 
```

# zen-cart - ZenCart 管理员分配 - 尝试允许多个管理员

> ID：13521586
> 
> 赞同：-1
> 
> 时间：2012-11-23T00:04:24.940
> 
> 标签：zen-cart

我对`ZenCart`. 我有一个目前可由 1 人管理的项目。那就是管理员是唯一管理该商店的人。我需要有客户执行小组。意味着管理员希望授予其他人成为客户主管的权利。他们将有权添加产品、管理产品等等。只有管​​理员有权管理高管。我的意思是版主插件。

他们有类似的东西吗？目前我正在使用 Core PHP 满足我的要求。与我项目的子部分集成。我想通过添加版主面板来减少管理员的工作量。请帮助我进行适当的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:01:20.323

我认为您正在寻找的是自 v1.5.0 以来添加的管理员配置文件功能。

虽然可以在旧版本的 Zen Cart 上安装旧插件（也称为管理员配置文件），但 v1.5.0 中的配置文件功能比旧插件提供的更有效。

# svg - 从 SVG 文件中提取相邻路径

> ID：13521591
> 
> 赞同：2
> 
> 时间：2012-11-23T00:05:14.000
> 
> 标签：svg

我有一个未分组的 SVG 文件，它有 3 个不同的图像，并且在 XML 文件中有自己的路径值。我想将此单个 SVG 文件分解为 3 个不同的 SVG 文件（每个图像一个）。所以基本上我应该能够找到 image#1 的所有路径并写入一个新文件，依此类推到其他文件。问题是，我怎样才能找到单个图像的路径。我知道我应该提取所有彼此相邻的路径......

注意：主 SVG 文件中的所有三个图像都没有相互接触。所以一个图像的路径不会与另一个重叠。

如果主 SVG 文件是分组的 SVG 文件。`<g>`我可以很容易地提取和`</g>`标签之间的路径。所以我的工作会很轻松。但是我拥有的文件未分组，因此我无法识别相邻的路径。

# gwt - 是否可以跨越单元格表 GWT 的标题

> ID：13521593
> 
> 赞同：2
> 
> 时间：2012-11-23T00:05:51.050
> 
> 标签：gwt, user-interface, celltable

我想在 CellTable 中创建一个标题，如下所示。

![在此处输入图像描述](../Images/c8c831aea10cd230fac249e1d53ab9e7.png)

我想到的解决方法是在表格上方添加一个带有“主标题”的面板。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T00:57:07.527

如果您使用 GWT 2.5，您可以使用自定义`CellTableBuilder`来添加您的*Main Title*标题行。

# objective-c - 为什么不能两次获取相同的数据？NSFetchedResultsController 为空

> ID：13521594
> 
> 赞同：0
> 
> 时间：2012-11-23T00:05:57.287
> 
> 标签：objective-c, core-data, xcode4.3, nsfetchedresultscontroller

我正在尝试获取我的数据，但结果是空的！
首先，我有一个表格，其中包含来自一个 NSFetchedResultsController 的数据。直到这里，我的代码是正确的，而且我知道我有数据。
但是，我过滤了那个 NSFetchedResultsController，所以我需要另一个 NSFetchedResultsController 没有过滤器的记录，我的意思是，我的所有记录。因此，我尝试使用另一个 NSFetchedResultsController 再次获取数据，使用相同的代码，但结果始终为空！！！。
这是我正在使用的功能：

```
+(NSFetchedResultsController*)fetchedResultsControllerForEntity:(NSString*)entityName titleKey:(NSString*)titleKey sectionNameKeyPath:(NSString*)sectionNameKeyPath{

      NSFetchRequest *request=[self fetchRequestForEntity:entityName titleKey:titleKey sectionNameKeyPath:sectionNameKeyPath];    

      return [[[NSFetchedResultsController alloc] initWithFetchRequest:request 
                                            managedObjectContext:[self managedContext] 
                                            sectionNameKeyPath:sectionNameKeyPath 
                                            cacheName:[NSString stringWithFormat:@"%@.%@.%@",entityName,sectionNameKeyPath,titleKey]]autorelease];
 }

+(NSFetchRequest *) fetchRequestForEntity:(NSString*)entityName titleKey:(NSString*)titleKey sectionNameKeyPath:(NSString*)sectionNameKeyPath{

    NSFetchRequest *request=[[[NSFetchRequest alloc]init]autorelease];
    request.entity=[NSEntityDescription entityForName:entityName inManagedObjectContext:[self managedContext]];
    NSSortDescriptor* titleSortDescriptor=titleKey?[[NSSortDescriptor alloc ]initWithKey:titleKey ascending:YES]:nil;
    NSSortDescriptor* sectionSortDescriptor=sectionNameKeyPath?[[NSSortDescriptor alloc ]initWithKey:sectionNameKeyPath ascending:YES]:nil;
    NSMutableArray * sortDescriptors=[[NSMutableArray alloc]init];
    if(sectionNameKeyPath){
        [sortDescriptors addObject:sectionSortDescriptor];
        [sectionSortDescriptor release];
    }
    if(titleKey){
        [sortDescriptors addObject:titleSortDescriptor];
        [titleSortDescriptor release];
    }

    request.sortDescriptors=sortDescriptors;
    [sortDescriptors release];

    request.fetchBatchSize=20;
    return request;
} 
```

我不明白，为什么如果我使用相同的代码，我的 NSFetchResultsController 是空的！！！
我试图从另一个实体获取数据，但结果也是空的......
为什么我失踪了？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:14:37.887

只需使用相同的`NSFetchedResultsController`. 只需更改其`fetchRequest`属性以反映您想要获取的数据。例如，要获取给定实体的所有实例，请使用

```
self.fetchedResultsController.fetchRequest.predicate = nil;
[self.fetchedResultsController performFetch:&error]; 
```

如果您`NSFetchedResultsControllerDelegate`设置正确，您的表格视图应该会自行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:31:02.237

我已经解决了我的问题。只需为 NSFetchedResultsController 对象重新声明 SET 方法：

```
-(void)setFetchedItems:(NSFetchedResultsController *)newFetchedItems{
    [fetchedItems release];
    fetchedItems=[newFetchedItems retain];
    [fetchedItems performFetch:NULL];
} 
```

我想这就是为什么我的对象总是空的。因为对象

# c - 使用文件描述符在 C 中读取文件

> ID：13521599
> 
> 赞同：3
> 
> 时间：2012-11-23T00:06:47.397
> 
> 标签：c, file, file-descriptor

我想使用文件描述符从文件中读取。由于分配规则，我不能使用它的名字。

我通过调用获得它`open`，它工作正常。此刻我知道我必须使用该`read()`函数才能从中读取。我的问题是该函数需要读取*的字节数*`read()`作为参数，并且我想每次从文件中读取一整行，所以我不知道要读取多少字节。

 *例如`fscanf()`，如果我使用它，它可以很好地处理一个简单的字符串，我可以根据需要收回整行。所以我的问题是：

有没有`fscanf()`可以用文件描述符而不是文件指针调用的函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T00:14:21.023

当您说“必须使用`read()`”时，我无法判断这是否是您对给定文件描述符`open()`或对某种分配的限制的情况的理解。

如果你有一个文件描述符，但你更喜欢`fscanf()`和朋友，使用从你的 fd`fdopen()`中获取 a`FILE *`并继续使用 stdio。

在内部，它使用像`read()`缓冲区这样的函数，然后在您`fscanf()`与朋友阅读它们时处理这些缓冲区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T00:14:29.307

你可以做的是一次读一个字符，直到你读完整行，然后检测到'/n'。因为这是作业，我就不给你写了。

然而，有几件事需要注意。

1.  您需要检查 EOF，否则，您可能会陷入无限循环。
2.  您应该声明一些读取字符的缓冲区，然后将其复制到缓冲区中。不知道您的输入是什么，我无法建议大小，除了说对于家庭作业，[256] 可能就足够了。
3.  你需要确保你的缓冲区不会溢出，即使你确实超过了它的长度。
4.  继续阅读，直到找到“/n”字符。然后处理您创建的行，并开始下一个。*

# ruby-on-rails - 我想使用 .find() 和 Ruby on Rails 返回单个结果

> ID：13521603
> 
> 赞同：2
> 
> 时间：2012-11-23T00:07:33.873
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个用户视图和一个出租视图。在我的出租视图中，我试图显示当前用户的姓名。我想我已经很接近了，但我无法解决最后一点。

这会在选择列表中返回我的所有用户

```
<%= f.select :user_id, User.find(:all).collect {|t|
    [t.user_name, t.id]} %> 
```

这将返回我当前的用户 ID

```
<%= f.number_field :user_id %> 
```

所以我想我可以做类似的事情

```
<%= f.select :user_id, User.find(:user_id).collect {|t|
    [t.user_name, t.id]} %> 
```

我只想在选择列表中返回当前用户，他们的 id 作为值，他们的名字在列表中。如果我执行上述操作，它会告诉我

```
Couldn't find User with id=user_id 
```

所以 user_id 被作为文字字符串传递，但我想传递 user_id 变量，它应该像 10 一样。我不知道如何将 user_id 作为变量传递。

我对 ROR 还很陌生，我可能会以完全错误的方式解决这个问题。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:33:18.603

`find()`想要一个变量，而不是一个符号。而且`:all`可能不是你想要的。您应该在控制器中编写一个方法，例如：

```
def user(u)
  @user = User.find(u)
end 
```

然后在视图中调用该方法或类似的方法（我不知道您在这里要做什么）：

```
<% user(current_user.id) %> 
```

然后，您将拥有一个`@user`可以玩的对象，即：

```
<%= f.select :user_id, [[@user.name, @user.id]] %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:36:30.883

我*认为*你应该能够做到：

```
<%= f.select :user_id, User.find(f.object.user_id).collect {|t| [t.user_name, t.id]} %> 
```

不过，这对我来说似乎有点奇怪。我也想过：

*   您的对象与相关用户有适当的关联，在这种情况下，您应该能够执行`f.object.user.user_name`and `f.object.user.id`。
*   如果您真的想要当前登录的用户，您可能应该询问您的身份验证框架/代码以供参考。例如，如果您使用的是 Devise，它将是`current_user`.

顺便说一句，我真的不明白为什么你想要一个只包含当前用户的选择列表 - 这绝对是你想要实现的目标，还是我误解了？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T02:09:46.957

我假设您有一个出租对象，您为此显示表单，我假设它是一个实例变量`@rental`，此外我假设您的`Rental`类内部存在以下关系

```
class Rental

  belongs_to :user

end 
```

然后你可以只写以下内容：

```
f.select :user_id, [[@rental.user.user_name, @rental.user.id]] 
```

希望这可以帮助。

`user_name`在一个相关但不太重要的注意事项上：有一个名为a的列真的很奇怪`user`：我会称该列为`name`，因为它无论如何都是用户的一部分。

# c# - 如何从 c# Visual Studio 2012 中的 endregion 标签跳转到区域标题？

> ID：13521604
> 
> 赞同：21
> 
> 时间：2012-11-23T00:07:43.403
> 
> 标签：c#, visual-studio, user-interface, keyboard-shortcuts, region

如果我有以下

```
#region
blah;
blahblah;
.....
moar;
#endregion 
```

如果我在屏幕上看到#endregion 标签，如何跳转到顶部#region 标签？

有捷径吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-23T00:17:42.720

`Ctrl`+`]`将在块的开始和结束之间跳转。我刚刚测试过，它适用于我在 VS2010 中的#region 块。

编辑：相关命令是[Edit.GoToBrace](http://msdn.microsoft.com/en-us/library/da5kh0wa.aspx#editors)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-23T04:55:27.107

答案是`Ctrl`+ `]`，正如@TheEvilPenguin 已经回答的那样。

但我想也为其他快捷方式添加这个[**很棒的链接**](http://www.dofactory.com/ShortCutKeys/ShortCutKeys.aspx)，这有助于加快 VS 中的日常任务。

将链接页面保存为系统中的 html，因为该链接将来可能会过期。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-12-14T09:52:21.927

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T00:51:47.493

我不相信 Visual Studio 中有标准的快捷方式。

在 Visual Studio 的选项对话框中，我在所有可用命令中搜索了包含“区域”一词的任何内容：

![区域命令](../Images/622e9597cbff3ca8e5fcaf5097c21e42.png)

但是没有找到任何与导航相关的东西，只是展开/折叠。

如果你有预算的话，像[Resharper](http://www.jetbrains.com/resharper/)和[CodeRush](http://www.devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)这样的插件可能会给你想要的东西。（除此之外，他们还做得更多。）

# validation - 如果下一步的确认字段，如何以多步形式验证确认？

> ID：13521605
> 
> 赞同：1
> 
> 时间：2012-11-23T00:07:45.020
> 
> 标签：validation, ruby-on-rails-3.2, formtastic, client-side-validation, multi-step

我使用`client_side_validations-formtastic`和`client_side_validations`宝石。

在我的模型中：

```
validates_presence_of :full_name, :parent_name
validates_confirmation_of :full_name, :parent_name, on: :create 
```

通知

```
= semantic_form_for @attendee ||= Attendee.new, validate: true do |f|
  = f.inputs do
    = f.input :full_name, label: "Attendee Full Name", validate: { confirmation: false }
    = f.input :parent_name, label: "Parent/Guardian Name", validate: { confirmation: false }
    = link_to image_tag("buttons/save.png"), "#new-attendee-confirm", id: "new_attendee_save", class: "fancybox"
    #new-attendee-confirm{:style => "width:600px;display: none;"}
      = render partial: "attendees/new_attendee_confirm", locals: {f: f } 
```

new_attendee_confirm

```
= f.input :full_name_confirmation, label: "Attendee Full Name"
= f.input :parent_name_confirmation, label: "Parent/Guardian Name"
= f.action :submit 
```

在`#new_attendee_save`我添加了用于多步表单验证的脚本（如果我`validates_confirmation_of`从模型中删除它会起作用）：

```
$("#new_attendee_save").bind("click", function (e) {
  //If the form is valid then go to next else don't
  var valid = true;
  // this will cycle through all visible inputs and attempt to validate all of them.
  // if validations fail 'valid' is set to false
  $('[data-validate]:input:visible').each(function () {
    var settings = window.ClientSideValidations.forms[this.form.id]
    if (!$(this).isValid(settings.validators)) {
      valid = false
    }
  });
  if (valid) {
    //code to go to next step
  }
  // if any of the inputs are invalid we want to disrupt the click event
  return valid;
}); 
```

我需要这个逻辑。用户在第一步填写表单，这会触发除确认之外的所有验证。接下来，用户单击保存按钮，它显示了一些协议，并作为签名提示输入孩子和父母的姓名。在这些字段中，验证应该适用于存在和确认。有没有办法实现这个场景？

以我的方式，如果我添加`validate: { confirmation: false }`到第一步它不起作用并且仍然显示消息与确认不匹配。

# c# - 无法在 WP 上调用必应翻译服务

> ID：13521607
> 
> 赞同：2
> 
> 时间：2012-11-23T00:08:00.227
> 
> 标签：c#, visual-studio-2012, wcf-data-services, windows-phone-8

迁移之后，微软在必应翻译上提供少量功能的美好时光已经一去不复返了。并且新帐户密钥仅对新服务根有效：

```
https://api.datamarket.azure.com/Data.ashx/Bing/MicrosoftTranslator/v1 
```

而不是类似的东西：

```
http://api.microsofttranslator.com/V1/SOAP.svc 
```

或者：

```
http://api.microsofttranslator.com/V1/SOAP.svc 
```

这还不是结束。当我尝试向它添加服务引用时，VS 只是说：

```
EntityType 'Microsoft.Translation' has no key defined. Define the key for this EntityType. 
```

或者在许可时抛出一些异常。

在此之前，我尝试使用订阅附带的 Helper 类。我花了很长时间修改用于 WP8 的代码 - 关于 System.Data.Services.Client 上的一些问题（客户端上的 WCF 5 引起的一些不兼容？）和异步调用。结果是：

```
System.InvalidOperationException:There is a type mismatch between the client and the service. Type 'Microsoft.Translation' is not an entity type, but the type in the response payload represents an entity type. Please ensure that types defined on the client match the data model of the service, or update the service reference on the client. 
```

我检查了响应，没有发现任何问题：

```
After the migration, gone are the good old days when Microsoft provides a handful of functions on Bing Translation. And new account keys are only valid to the new service root:

https://api.datamarket.azure.com/Data.ashx/Bing/MicrosoftTranslator/v1 
```

而不是类似的东西：

```
http://api.microsofttranslator.com/V1/SOAP.svc 
```

或者：

```
http://api.microsofttranslator.com/V1/SOAP.svc 
```

这还不是结束。当我尝试向它添加服务引用时，VS 只是说：

```
EntityType 'Microsoft.Translation' has no key defined. Define the key for this EntityType. 
```

或者在许可时抛出一些异常。

在此之前，我尝试使用订阅附带的 Helper 类。我花了很长时间修改用于 WP8 的代码 - 关于 System.Data.Services.Client 上的一些问题（客户端上的 WCF 5 引起的一些不兼容？）和异步调用。结果是：

```
System.InvalidOperationException:There is a type mismatch between the client and the service. Type 'Microsoft.Translation' is not an entity type, but the type in the response payload represents an entity type. Please ensure that types defined on the client match the data model of the service, or update the service reference on the client. 
```

我检查了响应，没有发现任何问题：

微软翻译 https://api.datamarket.azure.com/Data.ashx/Bing/MicrosoftTranslator/v1/Translate?Text='hello'&To='nl' 2012-11-22T23:20:10Z https://api .datamarket.azure.com/Data.ashx/Bing/MicrosoftTranslator/v1/Translate?Text='hello'&To='nl'&$skip=0&$top=1 翻译 2012-11-22T23:20:10Z 你好（抱歉，xml 无法正确显示。）

我什至尝试使用传统的方法访问 OData，但都是徒劳的。老实说有点气...

我已经用谷歌搜索了足够多的内容，但仍然找不到新的必应翻译界面的解决方案。有没有人和我有类似的问题？提前致谢。

我什至尝试使用传统的方法访问 OData，但都是徒劳的。老实说有点气...

我已经用谷歌搜索了足够多的内容，但仍然找不到新的必应翻译界面的解决方案。有没有人和我有类似的问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:29:41.483

这里有一个关于如何在 Windows Phone 7 中执行此操作的教程：http: [//blogs.msdn.com/b/translation/p/wp7translate.aspx](http://blogs.msdn.com/b/translation/p/wp7translate.aspx)

确保在 Azure 上正确获取您的客户端 ID 和客户端密码 - 为此在[https://datamarket.azure.com/developer/applications注册您的应用程序](https://datamarket.azure.com/developer/applications)

将客户端 ID 和客户端密码用于您在此处注册的应用程序，而不是用于整个 Azure 帐户的应用程序。

此外，如果您遇到错误，最好确保您的翻译订阅处于活动状态。您可以在以下位置进行检查： [https ://datamarket.azure.com/account/datasets](https://datamarket.azure.com/account/datasets)

# node.js - 如何让 grunt 任务将小胡子部分渲染到静态 HTML

> ID：13521608
> 
> 赞同：3
> 
> 时间：2012-11-23T00:08:00.860
> 
> 标签：node.js, handlebars.js, mustache, gruntjs, hogan.js

### 背景

我一直在使用带有 hogan.js 任务的 grunt.js 来为我们的内部文档构建静态 HTML。我边走边学 JavaScript，但我已经让任务足够好地用于布局和页面，但它确实有助于我们的工作流程让 hogan 任务将小胡子部分呈现为 HTML，如本要点中的示例：[https ://gist.github.com/4132781](https://gist.github.com/4132781)

### 当前设置和我想要完成的任务

我们所有的小胡子部分都在一个名为“partials”的文件夹中。理想情况下，当 grunt 构建运行时，hogan 任务将从 partials 文件夹中获取任何部分，并将它们插入到 HTML 中，无论它们被引用到哪里（也显示在 gist 中）。

### 我不想要的

我不想在任务或任务配置中定义每个部分。这行不通，我们有大约 200 个部分并且还在增长，所以我们需要让任务扫描一个文件夹并根据文件名或其他内容获取部分。我也不想使用不同的语言或构建工具。我们使用了 Jade、一些基于降价的文档构建器，以及其他一些。如果我们可以像描述的那样渲染局部，我们的状态会很好！

有可能做到这一点吗？提前感谢您的任何反馈

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T03:16:40.607

我正在查看您的代码，其中一些选项与您引用的文件名不匹配。

这是我更新您提供的代码以允许渲染部分的尝试：

### 咕噜声

src 是您正在构建的可能包含部分的页面列表。在这种情况下，components.mustache 将位于 'docs/components/templates/pages/components.mustache'

将布局选项更新为用于所有页面（包括 components.mustache）的 layout.mustache

将路径对象添加到具有部分文件夹路径的选项。所有这些部分都将被读取和编译并存储在 options.partials 中，以供以后在 grunt 任务中使用。

```
module.exports = function(grunt) {

  'use strict';

  // Project configuration
  grunt.initConfig({
    pkg: '<json:package.json>',
    meta: {
      banner:
      '/**\n' +
      '* <%= pkg.name %>.js v<%= pkg.version %> by @fat & @mdo\n' +
      '* Copyright <%= grunt.template.today("yyyy") %> <%= pkg.author %>\n' +
      '* http://www.apache.org/licenses/LICENSE-2.0.txt\n' +
      '*/'
    },

    // Build HTML docs from .mustache files
    hogan: {
      production: {
        src: 'docs/components/templates/pages/*.mustache',
        dest: 'docs/components/FILE.html',
        options: {
          title:      'Sellside',
          url:        'docs',
          setAccount: 'NA',
          setSiteId:  'NA',
          layout:     'docs/components/templates/layout.mustache',
          dev:        true,
          docs:       true,
          app:        false,
          website:    false,
          paths: {
            partials: 'docs/components/templates/partials/*.mustache'
          }
        }
      }
    }
  });

  // Load npm tasks.
  grunt.loadNpmTasks('grunt-contrib');

  // Load local tasks.
  grunt.loadTasks('tasks');

  grunt.registerTask('default', 'hogan');

}; 
```

### hogan.js

更新此任务以读取所有部分并编译它们。

正在更新帮助程序以将“body”部分（即编译页面）添加到 options.partials 列表中。

然后将 options.partials 传递给 hogan.render 方法，因此所有部分都可用于所有页面。

```
/*
 * Build HTML from mustache files
 * https://github.com/sellside/ui/grunt.js
 *
 * Copyright (c) 2012 Sellside
 * Authored by Jon Schlinkert
 */

module.exports = function(grunt) {

  // Grunt utilities.
  var task   = grunt.task,
    file     = grunt.file,
    utils    = grunt.util,
    log      = grunt.log,
    verbose  = grunt.verbose,
    fail     = grunt.fail,
    option   = grunt.option,
    config   = grunt.config,
    template = grunt.template,
    _        = utils._

  // external dependencies
  var fs   = require('fs'),
    hogan  = require('hogan');

  // ==========================================================================
  // TASKS
  // ==========================================================================
  grunt.registerMultiTask('hogan', 'Compile mustache files to HTML with hogan.js', function() {

    var data     = this.data,
      src        = grunt.file.expandFiles(this.file.src),
      dest       = grunt.template.process(data.dest),

      // Options are set in gruntfile
      defaults   = {
        production:  false,
        docs:        false,
        title:      'Sellside',
        setAccount: 'NA',
        setSiteId:  'NA',
        layout:     'docs/templates/layout.mustache',
        paths: {},
        partials: {}
      },

      options = _.extend(defaults, this.data.options || {})

      !src && grunt.warn('Missing src property.')
      if(!src) return false

      !dest && grunt.warn('Missing dest property')
      if(!dest) return false

    var done         = this.async()
    var srcFiles     = file.expandFiles(src)

    if(options.paths.partials) {

      var partials = grunt.file.expandFiles(options.paths.partials);
      log.writeln('Compiling Partials...');
      partials.forEach(function(filepath) {
        var filename = _.first(filepath.match(/[^\\\/:*?"<>|\r\n]+$/i)).replace(/\.mustache$/, '');
        log.writeln(filename.magenta);

        var partial = fs.readFileSync(filepath, 'utf8');
        options.partials[filename] = hogan.compile(partial);

      });
      log.writeln();
}

    try {
      options.layout   = fs.readFileSync(options.layout, 'utf8')
      options.layout   = hogan.compile(options.layout, {
        sectionTags: [{
          o: '_i',
          c: 'i'
        }]
      })
    } catch(err) {
      grunt.warn(err) && done(false)
      return
    }

    srcFiles.forEach(function(filepath) {
      var filename = _.first(filepath.match(/[^\\\/:*?"<>|\r\n]+$/i)).replace(/\.mustache$/, '')

      grunt.helper('hogan', filepath, filename, options, function(err, result) {
        err && grunt.warn(err) && done(false)
        if(err) return

        file.write(dest.replace('FILE', filename), result)
      })
    })

    done()
  })

  // ==========================================================================
  // HELPERS
  // ==========================================================================
  grunt.registerHelper('hogan', function(src, filename, options, callback) {
    log.writeln('Compiling ' + filename.magenta);

    var page                = fs.readFileSync(src, 'utf8'),
        html                = null,
        layout              = options.layout,
        context             = {};

        context[filename]   = 'active';
        context._i          = true;
        context.production  = options.production;
        context.docs        = options.docs;
        context.setAccount  = options.setAccount;
        context.setSiteId   = options.setSiteId;

    var title               = _.template("<%= page == 'Index' ? site : page + ' · ' + site %>")
    context.title           = title({
      page: _(filename).humanize().replace('css', 'CSS'),
      site: options.title
    })
    try {
      page = hogan.compile(page, {
        sectionTags: [{
          o: '_i',
          c: 'i'
        }]
      })

      options.partials.body = page;
      page = layout.render(context, options.partials)

      callback(null, page)
    } catch(err) {
      callback(err)
      return
    }
  })
}; 
```

需要注意的一件事是，如果要将数据传递到部分中，则需要将其添加到文件 layout.render 调用中的上下文对象中。

希望这一切都有意义并帮助您。

# xcode - Xcode 将程序的可执行文件或等效文件保存在哪里？

> ID：13521614
> 
> 赞同：8
> 
> 时间：2012-11-23T00:09:08.080
> 
> 标签：xcode

我正在尝试进行 I/O 重定向以从文件中获取输入到我的程序中。我需要知道可执行文件的位置才能将其输入终端。我在 Mac 上，使用 Xcode，在 C 中。另外，我只能使用终端来获取输入。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T00:11:42.383

转到 Xcode > 首选项 > 位置：

![在此处输入图像描述](../Images/ed2e693bab565676b0149c858223d7d5.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T00:17:34.953

我相信你正在寻找`~/Library/Developer/Xcode/DerivedData`。在较新版本的 Mac OS X 中，要进入 Library 文件夹，请打开 Finder，然后在菜单栏中按“Go”。菜单打开后，按 Option(alt) 键，Library 应该会出现。希望这可以帮助！

# c++ - C++ 项目组织（使用 gtest、cmake 和 doxygen）

> ID：13521618
> 
> 赞同：133
> 
> 时间：2012-11-23T00:09:56.867
> 
> 标签：c++, cmake, doxygen, googletest

我一般是编程新手，所以我决定从用 C++ 制作一个简单的向量类开始。但是，我想从一开始就养成良好的习惯，而不是稍后尝试修改我的工作流程。

我目前只有两个文件`vector3.hpp`和`vector3.cpp`. 随着我对一切变得更加熟悉，这个项目将慢慢开始增长（使其更像是一个通用线性代数库），所以我想采用“标准”项目布局，让以后的生活更轻松。所以环顾四周后，我发现了两种组织 hpp 和 cpp 文件的方法，第一种是：

```
project
└── src
    ├── vector3.hpp
    └── vector3.cpp 
```

第二个是：

```
project
├── inc
│   └── project
│       └── vector3.hpp
└── src
    └── vector3.cpp 
```

你会推荐哪个，为什么？

其次，我想使用 Google C++ 测试框架对我的代码进行单元测试，因为它看起来相当容易使用。您是否建议将此与我的代码捆绑在一起，例如在`inc/gtest`or`contrib/gtest`文件夹中？如果捆绑，您建议使用`fuse_gtest_files.py`脚本来减少数量或文件，还是保持原样？如果没有捆绑，如何处理这种依赖关系？

在编写测试时，这些通常是如何组织的？我正在考虑为每个类（`test_vector3.cpp`例如）创建一个 cpp 文件，但全部编译成一个二进制文件，以便它们可以轻松地一起运行？

由于 gtest 库通常是使用 cmake 和 make 构建的，我在想我的项目也像这样构建是否有意义？如果我决定使用以下项目布局：

```
├── CMakeLists.txt
├── contrib
│   └── gtest
│       ├── gtest-all.cc
│       └── gtest.h
├── docs
│   └── Doxyfile
├── inc
│   └── project
│       └── vector3.cpp
├── src
│   └── vector3.cpp
└── test
    └── test_vector3.cpp 
```

必须如何`CMakeLists.txt`查看才能仅构建库或库和测试？此外，我还看到了很多具有一个`build`和一个`bin`目录的项目。构建是否发生在构建目录中，然后二进制文件移出到 bin 目录中？测试和库的二进制文件会在同一个地方吗？或者将其结构如下更有意义：

```
test
├── bin
├── build
└── src
    └── test_vector3.cpp 
```

我还想使用 doxygen 来记录我的代码。是否可以使用 cmake 和 make 自动运行它？

很抱歉有这么多问题，但我还没有找到一本关于 C++ 的书可以令人满意地回答这些类型的问题。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-11-23T00:45:55.513

C++ 构建系统有点像魔法，项目越老，你能找到的奇怪东西就越多，所以出现很多问题也就不足为奇了。我将尝试一一解决这些问题，并提及有关构建 C++ 库的一些一般事项。

分离目录中的头文件和 cpp 文件。仅当您正在构建一个应该用作库而不是实际应用程序的组件时，这才是必不可少的。您的标头是用户与您提供的产品进行交互的基础，并且必须安装。这意味着它们必须位于子目录中（没有人希望大量标题以 top-level 结尾`/usr/include/`），并且您的标题必须能够将自己包含在这样的设置中。

```
└── prj
    ├── include
    │   └── prj
    │       ├── header2.h
    │       └── header.h
    └── src
        └── x.cpp 
```

效果很好，因为包含路径可以解决，并且您可以使用简单的通配符来安装目标。

捆绑依赖：我认为这在很大程度上取决于构建系统定位和配置依赖的能力，以及你的代码对单个版本的依赖程度。它还取决于您的用户的能力以及在他们的平台上安装依赖项的难易程度。CMake 带有一个`find_package`用于 Google 测试的脚本。这使事情变得容易得多。我只会在必要时进行捆绑，否则会避免。

如何构建：避免源内构建。CMake 使源代码构建变得容易，它使生活变得更加轻松。

我想您还想使用 CTest 为您的系统运行测试（它还附带对 GTest 的内置支持）。目录布局和测试组织的一个重要决定将是：你最终有子项目吗？如果是这样，您在设置 CMakeLists 时需要做更多的工作，并且应该将您的子项目拆分为子目录，每个子目录都有自己的`include`和`src`文件。甚至可能是他们自己的 doxygen 运行和输出（组合多个 doxygen 项目是可能的，但并不容易或漂亮）。

你最终会得到这样的东西：

```
└── prj
    ├── CMakeLists.txt <-- (1)
    ├── include
    │   └── prj
    │       ├── header2.hpp
    │       └── header.hpp
    ├── src
    │   ├── CMakeLists.txt <-- (2)
    │   └── x.cpp
    └── test
        ├── CMakeLists.txt <-- (3)
        ├── data
        │   └── testdata.yyy
        └── testcase.cpp 
```

在哪里

*   (1) 配置依赖、平台细节和输出路径
*   (2) 配置你要构建的库
*   (3) 配置测试可执行文件和测试用例

如果您有子组件，我建议添加另一个层次结构并为每个子项目使用上面的树。然后事情就变得棘手了，因为您需要决定子组件是搜索和配置它们的依赖关系，还是在顶层进行。这应根据具体情况决定。

Doxygen：在你成功完成了 doxygen 的配置舞蹈之后，使用 CMake`add_custom_command`添加一个 doc 目标是微不足道的。

这就是我的项目的最终结果，我也看到了一些非常相似的项目，但当然这不是万能的。

**附录**在某些时候，您会想要生成一个`config.hpp` 包含版本定义的文件，并且可能是对某个版本控制标识符（Git 哈希或 SVN 修订号）的定义。CMake 具有自动查找该信息并生成文件的模块。您可以使用 CMake`configure_file`将模板文件中的变量替换为`CMakeLists.txt`.

如果您正在构建库，您还需要一个导出定义来正确区分编译器，例如`__declspec`在 MSVC`visibility`上和 GCC/clang 上的属性。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-11-23T03:47:22.397

首先，您不能忽略一些常规的目录名称，这些名称是基于 Unix 文件系统的悠久传统。这些是：

```
trunk
├── bin     : for all executables (applications)
├── lib     : for all other binaries (static and shared libraries (.so or .dll))
├── include : for all header files
├── src     : for source files
└── doc     : for documentation 
```

坚持这种基本布局可能是个好主意，至少在顶层是这样。

关于拆分头文件和源文件（cpp），这两种方案都相当普遍。但是，我倾向于将它们放在一起，在日常任务中将文件放在一起更实用。此外，当所有代码都在一个顶级文件夹（即`trunk/src/`文件夹）下时，您会注意到所有其他文件夹（bin、lib、include、doc，可能还有一些测试文件夹）都在顶级，除了源外构建的“构建”目录是所有文件夹，其中仅包含构建过程中生成的文件。因此，只需要备份 src 文件夹，或者更好的是，将其保存在版本控制系统/服务器（如 Git 或 SVN）下。

当涉及到在目标系统上安装头文件时（如果你想最终分发你的库），CMake 有一个用于安装文件的命令（隐式创建一个“安装”目标，执行“make install”）您可以使用将所有标题放入`/usr/include/`目录中。我只是为此目的使用以下 cmake 宏：

```
# custom macro to register some headers as target for installation:
#  setup_headers("/path/to/header/something.h" "/relative/install/path")
macro(setup_headers HEADER_FILES HEADER_PATH)
  foreach(CURRENT_HEADER_FILE ${HEADER_FILES})
    install(FILES "${SRCROOT}${CURRENT_HEADER_FILE}" DESTINATION "${INCLUDEROOT}${HEADER_PATH}")
  endforeach(CURRENT_HEADER_FILE)
endmacro(setup_headers) 
```

`SRCROOT`我设置到 src 文件夹的 cmake 变量在哪里，并且是`INCLUDEROOT`我配置到标头需要去的任何地方的 cmake 变量。当然，还有很多其他的方法可以做到这一点，我敢肯定我的方法不是最好的。关键是，没有理由仅仅因为只需要在目标系统上安装头文件就将头文件和源分开，因为很容易，特别是使用 CMake（或 CPack），挑选和配置头文件以无需将它们放在单独的目录中即可安装。这是我在大多数图书馆看到的。

> Quote: 其次，我想使用 Google C++ 测试框架对我的代码进行单元测试，因为它看起来相当容易使用。您是否建议将此与我的代码捆绑在一起，例如在“inc/gtest”或“contrib/gtest”文件夹中？如果捆绑，您建议使用 fuse_gtest_files.py 脚本来减少数量或文件，还是保持原样？如果没有捆绑，如何处理这种依赖关系？

不要将依赖项与您的库捆绑在一起。这通常是一个非常可怕的想法，当我被困在试图构建一个这样做的库时，我总是讨厌它。这应该是你最后的手段，并提防陷阱。通常，人们将依赖项与他们的库捆绑在一起，或者因为他们针对糟糕的开发环境（例如，Windows），或者因为他们只支持所讨论的库（依赖项）的旧（不推荐）版本。主要的缺陷是您的捆绑依赖项可能与同一个库/应用程序的已安装版本冲突（例如，您捆绑了 gtest，但尝试构建您的库的人已经安装了更新（或旧）版本的 gtest，然后两者可能会发生冲突并使那个人非常头疼）。所以，正如我所说，这样做需要您自担风险，我会说只是作为最后的手段。要求人们在能够编译您的库之前安装一些依赖项比尝试解决捆绑的依赖项和现有安装之间的冲突要小得多。

> Quote: 在编写测试时，这些通常是如何组织的？我正在考虑为每个类（例如 test_vector3.cpp）创建一个 cpp 文件，但所有文件都编译为一个二进制文件，以便它们可以轻松地一起运行？

在我看来，每个类（或小的有凝聚力的类和函数组）一个 cpp 文件更常见和实用。但是，绝对不要将它们全部编译成一个二进制文件，以便“它们都可以一起运行”。这真是个坏主意。通常，当涉及到编码时，您希望尽可能多地拆分事物。在单元测试的情况下，您不希望一个二进制文件运行所有测试，因为这意味着您对库中的任何内容所做的任何微小更改都可能导致该单元测试程序几乎完全重新编译，而这只是等待重新编译的几分钟/几小时。只需坚持一个简单的方案：1 个单元 = 1 个单元测试程序。然后，

> Quote: 由于 gtest 库通常是使用 cmake 和 make 构建的，我在想我的项目也像这样构建是否有意义？如果我决定使用以下项目布局：

我宁愿建议这种布局：

```
trunk
├── bin
├── lib
│   └── project
│       └── libvector3.so
│       └── libvector3.a        products of installation / building
├── docs
│   └── Doxyfile
├── include
│   └── project
│       └── vector3.hpp
│_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
│
├── src
│   └── CMakeLists.txt
│   └── Doxyfile.in
│   └── project                 part of version-control / source-distribution
│       └── CMakeLists.txt
│       └── vector3.hpp
│       └── vector3.cpp
│       └── test
│           └── test_vector3.cpp
│_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
│
├── build
└── test                        working directories for building / testing
    └── test_vector3 
```

这里有几点需要注意。首先，你的 src 目录的子目录应该镜像你的 include 目录的子目录，这只是为了保持直观（另外，尽量保持你的子目录结构合理平坦（浅），因为文件夹的深层嵌套通常比其他任何事情都更麻烦）。其次，“include”目录只是一个安装目录，它的内容就是从 src 目录中挑选出来的任何头文件。

第三，CMake 系统旨在分布在源子目录中，而不是作为顶层的一个 CMakeLists.txt 文件。这使事情保持本地化，这很好（本着将事情分成独立部分的精神）。如果您添加新源、新标头或新测试程序，您只需在相关子目录中编辑一个小而简单的 CMakeLists.txt 文件，而不会影响其他任何内容。这也使您可以轻松地重组目录（CMakeLists 是本地的并且包含在被移动的子目录中）。顶级 CMakeLists 应该包含大部分顶级配置，例如设置目标目录、自定义命令（或宏）以及查找系统上安装的包。较低级别的 CMakeLists 应该只包含简单的标题列表、源列表、

> Quote: 如何将 CMakeLists.txt 看起来，以便它可以构建库或库和测试？

基本答案是 CMake 允许您从“all”（这是您键入“make”时构建的）专门排除某些目标，您还可以创建特定的目标包。我不能在这里做一个 CMake 教程，但你自己找出来是相当直接的。然而，在这种特定情况下，推荐的解决方案当然是使用 CTest，它只是一组额外的命令，您可以在 CMakeLists 文件中使用这些命令来注册许多标记为单元的目标（程序）-测试。因此，CMake 会将所有测试放在一个特殊的构建类别中，而这正是您所要求的，因此问题解决了。

> Quote: 另外，我也看到了相当多的项目有一个构建广告一个 bin 目录。构建是否发生在构建目录中，然后二进制文件移出到 bin 目录中？测试和库的二进制文件会在同一个地方吗？或者将其结构如下更有意义：

在源代码之外拥有一个构建目录（“源外”构建）确实是唯一明智的做法，这是当今事实上的标准。所以，就像 CMake 人推荐的那样，就像我遇到的每个程序员一样，肯定地，在源目录之外有一个单独的“构建”目录。至于 bin 目录，嗯，这是一个约定，坚持它可能是一个好主意，正如我在本文开头所说的那样。

> Quote: 我也想使用 doxygen 来记录我的代码。是否可以使用 cmake 和 make 自动运行它？

是的。这是不可能的，太棒了。根据您想要获得的花哨，有几种可能性。CMake 确实有一个 Doxygen 模块（即`find_package(Doxygen)`），它允许您注册将在某些文件上运行 Doxygen 的目标。如果你想做更多花哨的事情，比如更新 Doxyfile 中的版本号，或者为源文件自动输入日期/作者标记等等，这一切都可以通过一点 CMake 功夫来实现。通常，这样做将涉及您保留一个源 Doxyfile（例如，我放在上面的文件夹布局中的“Doxyfile.in”），它具有要被 CMake 的解析命令找到和替换的标记。在[我的顶级 CMakeLists 文件](https://github.com/mikael-s-persson/ReaK/blob/master/src/CMakeLists.txt)中，您会发现这样一个 CMake 功夫，它与 cmake-doxygen 一起做了一些花哨的事情。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-23T01:43:46.057

## 构建项目

我一般会赞成以下几点：

```
├── CMakeLists.txt
|
├── docs/
│   └── Doxyfile
|
├── include/
│   └── project/
│       └── vector3.hpp
|
├── src/
    └── project/
        └── vector3.cpp
        └── test/
            └── test_vector3.cpp 
```

这意味着您为您的库有一组非常明确定义的 API 文件，并且该结构意味着您的库的客户端可以执行

```
#include "project/vector3.hpp" 
```

而不是不太明确的

```
#include "vector3.hpp" 
```

我喜欢 /src 树的结构与 /include 树的结构相匹配，但这确实是个人喜好。但是，如果您的项目扩展为包含 /include/project 中的子目录，则通常有助于匹配 /src 树中的子目录。

对于测试，我倾向于让它们“靠近”他们测试的文件，如果你最终在 /src 中找到了子目录，那么如果其他人想要找到给定文件的测试代码，那么这是一个非常容易遵循的范例。

* * *

## 测试

> 其次，我想使用 Google C++ 测试框架对我的代码进行单元测试，因为它看起来相当容易使用。

Gtest 确实使用简单，并且在功能方面相当全面。它可以与[gmock一起使用](https://github.com/google/googlemock)很容易地我已经准备好接受这很可能是由于我自己的缺点造成的，但是 gmock 测试往往更难创建，而且更脆弱/难以维护。gmock 棺材中的一个大钉子是它真的不能很好地与智能指针配合使用。

这是对一个巨大问题的非常琐碎和主观的答案（可能并不真正属于 SO）

> 您是否建议将此与我的代码捆绑在一起，例如在“inc/gtest”或“contrib/gtest”文件夹中？如果捆绑，您建议使用 fuse_gtest_files.py 脚本来减少数量或文件，还是保持原样？如果没有捆绑，如何处理这种依赖关系？

我更喜欢使用 CMake 的[`ExternalProject_Add`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module:ExternalProject)模块。这避免了您必须将 gtest 源代码保留在存储库中，或将其安装在任何地方。它会自动下载并构建在您的构建树中。

请参阅我[在此处处理细节的答案](https://stackoverflow.com/a/9695234/424459)。

> 在编写测试时，这些通常是如何组织的？我正在考虑为每个类（例如 test_vector3.cpp）创建一个 cpp 文件，但所有文件都编译为一个二进制文件，以便它们可以轻松地一起运行？

好计划。

* * *

## 建造

我是 CMake 的粉丝，但与您的测试相关问题一样，SO 可能不是就此类主观问题征求意见的最佳场所。

> CMakeLists.txt 的外观如何才能仅构建库或库和测试？

```
add_library(ProjectLibrary <All library sources and headers>)
add_executable(ProjectTest <All test files>)
target_link_libraries(ProjectTest ProjectLibrary) 
```

该库将显示为目标“ProjectLibrary”，测试套件将显示为目标“ProjectTest”。通过将库指定为测试 exe 的依赖项，构建测试 exe 将自动导致库在过期时重新构建。

> 此外，我还看到很多项目都有构建广告 bin 目录。构建是否发生在构建目录中，然后二进制文件移出到 bin 目录中？测试和库的二进制文件会在同一个地方吗？

CMake 推荐“out-of-source”构建，即您在项目外部创建自己的构建目录并从那里运行 CMake。这可以避免使用构建文件“污染”您的源代码树，如果您使用的是 vcs，这是非常可取的。

您*可以*指定二进制文件在构建后移动或复制到不同的目录，或者默认在另一个目录中创建它们，但通常不需要。如果需要，CMake 提供了安装项目的综合方法，或者使其他 CMake 项目可以轻松“找到”项目的相关文件。

关于 CMake 自己[对查找和执行 gtest 测试](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module:FindGTest)的支持，如果您将 gtest 作为项目的一部分构建，这在很大程度上是不合适的。这`FindGtest`模块真正设计用于在您的项目之外单独构建 gtest 的情况。

CMake 提供了自己的测试框架 (CTest)，理想情况下，每个 gtest 案例都将添加为 CTest 案例。

但是，由`GTEST_ADD_TESTS`提供的`FindGtest`允许将 gtest 案例轻松添加为单个 ctest 案例的宏有点缺乏，因为它不适用于除`TEST`和之外的 gtest 宏`TEST_F`。 根本不处理使用,等的[值](https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#value-parameterized-tests)或[类型参数化](https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#type-parameterized-tests)测试。`TEST_P``TYPED_TEST_P`

这个问题没有我所知道的简单解决方案。获取 gtest 用例列表的最可靠方法是使用 flag 执行 test exe `--gtest_list_tests`。但是，这只能在构建 exe 后完成，因此 CMake 无法使用它。这让您有两种选择；CMake 必须尝试解析 C++ 代码以推断测试的名称（如果您想考虑所有 gtest 宏、注释掉的测试、禁用的测试，则极端不平凡），或者手动将测试用例添加到CMakeLists.txt 文件。

> 我还想使用 doxygen 来记录我的代码。是否可以使用 cmake 和 make 自动运行它？

是的-尽管我在这方面没有经验。CMake 提供[`FindDoxygen`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module:FindDoxygen)了这个目的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-07-02T07:36:54.660

除了其他（优秀的）答案之外，我将描述一个我一直用于相对**大型**项目的结构。
我不打算解决关于 Doxygen 的子问题，因为我只会重复其他答案中所说的内容。

* * *

### 基本原理

为了模块化和可维护性，该项目被组织为一组小单元。为了清楚起见，我们将它们命名为 UnitX，其中 X = A、B、C、...（但它们可以有任何通用名称）。然后组织目录结构以反映这种选择，必要时可以对单元进行分组。

### 解决方案

基本目录布局如下（单元内容稍后详述）：

```
project
├── CMakeLists.txt
├── UnitA
├── UnitB
├── GroupA
│   └── CMakeLists.txt
│   └── GroupB
│       └── CMakeLists.txt
│       └── UnitC
│       └── UnitD
│   └── UnitE 
```

`project/CMakeLists.txt`可能包含以下内容：

```
cmake_minimum_required(VERSION 3.0.2)
project(project)
enable_testing() # This will be necessary for testing (details below)

add_subdirectory(UnitA)
add_subdirectory(UnitB)
add_subdirectory(GroupA) 
```

和`project/GroupA/CMakeLists.txt`：

```
add_subdirectory(GroupB)
add_subdirectory(UnitE) 
```

和`project/GroupB/CMakeLists.txt`：

```
add_subdirectory(UnitC)
add_subdirectory(UnitD) 
```

* * *

现在来看不同单元的结构（我们以 UnitD 为例）

```
project/GroupA/GroupB/UnitD
├── README.md
├── CMakeLists.txt
├── lib
│   └── CMakeLists.txt
│   └── UnitD
│       └── ClassA.h
│       └── ClassA.cpp
│       └── ClassB.h
│       └── ClassB.cpp
├── test
│   └── CMakeLists.txt
│   └── ClassATest.cpp
│   └── ClassBTest.cpp
│   └── [main.cpp] 
```

对于不同的组件：

*   我喜欢将源 ( `.cpp`) 和标头 ( `.h`) 放在同一个文件夹中。这避免了重复的目录层次结构，使维护更容易。对于安装，只过滤头文件是没有问题的（尤其是使用 CMake）。
*   该目录的作用`UnitD`是稍后允许包含带有`#include <UnitD/ClassA.h>`. 此外，在安装本机时，您可以照原样复制目录结构。请注意，您还可以在子目录中组织源文件。
*   我喜欢一个`README`文件来总结该单元的内容并指定有关它的有用信息。
*   `CMakeLists.txt`可以简单地包含：

    ```
    add_subdirectory(lib)
    add_subdirectory(test) 
    ```

*   `lib/CMakeLists.txt`：

    ```
    project(UnitD)

    set(headers
        UnitD/ClassA.h
        UnitD/ClassB.h
        )

    set(sources
        UnitD/ClassA.cpp
        UnitD/ClassB.cpp    
        )

    add_library(${TARGET_NAME} STATIC ${headers} ${sources})

    # INSTALL_INTERFACE: folder to which you will install a directory UnitD containing the headers
    target_include_directories(UnitD
                               PUBLIC $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>
                               PUBLIC $<INSTALL_INTERFACE:include/SomeDir>
                               )

    target_link_libraries(UnitD
                          PUBLIC UnitA
                          PRIVATE UnitC
                          ) 
    ```

    在这里，请注意，没有必要告诉 CMake 我们想要和 的包含目录`UnitA`，`UnitC`因为在配置这些单元时已经指定了这一点。此外，`PUBLIC`将告诉所有依赖于`UnitD`它们的目标应该自动包含`UnitA`依赖项，而`UnitC`那时则不需要（`PRIVATE`）。

*   `test/CMakeLists.txt`（如果您想使用 GTest，请参见下文）：

    ```
    project(UnitDTests)

    add_executable(UnitDTests
                   ClassATest.cpp
                   ClassBTest.cpp
                   [main.cpp]
                   )

    target_link_libraries(UnitDTests
                          PUBLIC UnitD
    )

    add_test(
            NAME UnitDTests
            COMMAND UnitDTests
    ) 
    ```

* * *

### 使用谷歌测试

对于 Google Test，最简单的方法是它的源代码是否存在于您的源代码目录中，但您不必自己实际添加它。我一直在使用[这个项目](https://github.com/Crascit/DownloadProject)来自动下载它，我将它的使用包装在一个函数中以确保它只下载一次，即使我们有几个测试目标。

这个 CMake 函数如下：

```
function(import_gtest)
  include (DownloadProject)
  if (NOT TARGET gmock_main)
    include(DownloadProject)
    download_project(PROJ                googletest
                     GIT_REPOSITORY      https://github.com/google/googletest.git
                     GIT_TAG             release-1.8.0
                     UPDATE_DISCONNECTED 1
                     )
    set(gtest_force_shared_crt ON CACHE BOOL "" FORCE) # Prevent GoogleTest from overriding our compiler/linker options when building with Visual Studio
    add_subdirectory(${googletest_SOURCE_DIR} ${googletest_BINARY_DIR} EXCLUDE_FROM_ALL)
  endif()
endfunction() 
```

然后，当我想在我的一个测试目标中使用它时，我将以下行添加到`CMakeLists.txt`（这是上面的示例，`test/CMakeLists.txt`）：

```
import_gtest()
target_link_libraries(UnitDTests gtest_main gmock_main) 
```

# javascript - 如何从 chrome 扩展中获取 javascript 重页

> ID：13521619
> 
> 赞同：5
> 
> 时间：2012-11-23T00:10:05.527
> 
> 标签：javascript, jquery, google-chrome-extension

我正在开发一个扩展来获取用户可能在网站上访问的页面。我的扩展使用 jQuery.get() 来获取页面。这适用于像 amazon.com 这样的网站。

但是，如果用户登录 gmail 并且我尝试获取其他一些页面，例如“帐户设置”，我会得到一个不完整的页面。在该页面的某处，我收到以下消息：

“您的浏览器不支持 Javascript 或 Javascript 已被禁用。由于您的浏览器不支持 Javascript 或禁用了 Javascript，我们无法显示请求的页面。”

在这种情况下，有没有办法获取完整的页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T18:18:45.470

我最终打开了一个新标签并在该标签中获取页面。然后使用内容脚本，我分析页面数据。从用户将看到新打开的选项卡的意义上来说，这是一个问题。但它对用户也是透明的。

如果您正在使用 Jetpack 在 Firefox 上开发扩展，您可以使用 page-worker，它是一个不可见的页面并提供对 DOM 的访问。

# java - Java 小程序只返回 127.0.0.1

> ID：13521620
> 
> 赞同：1
> 
> 时间：2012-11-23T00:10:26.207
> 
> 标签：java, applet, ip-address

我创建了一个java小程序来获取本地IP，在网页中输入这个小程序，但它只返回IP 127.0.0.1。
我测试了我在 stackoverflow 上找到的一些答案，但没有一个有效。
有什么方法可以让 IP Local 成为真实的吗？
我已经看到它在一些网站上运行。
以下是我制作的代码：

```
import java.net.InetAddress;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.UnknownHostException;
import javax.swing.JApplet;
public class PegaIP extends JApplet {
    @Override
    public void init() {
        try {
            getAppletContext().showDocument (new URL("javascript:UpdateIP(\"" + InetAddress.getLocalHost().getHostAddress() + "\")"));
        } catch (UnknownHostException | MalformedURLException e) {
            System.err.println("Ocorreu erro na criação da GUI");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:20:06.080

我的猜测是你需要允许特定的操作工作，因为你在一个小程序中，文档指出：

> 如果有安全管理器，则使用本地主机名和 -1 作为其参数调用其 checkConnect 方法，以查看是否允许该操作。如果不允许该操作，则返回表示环回地址的 InetAddress。

要测试它是否正确，您应该在普通的 Java 应用程序中尝试它，如果 127.0.0.1 没有返回，那么问题就存在于安全管理器中。你也可以打电话试试

```
public void checkConnect(String host, int port) 
```

的当前安全经理，看看它是否引发了`SecurityException`.

阅读[此处](http://docs.oracle.com/javase/tutorial/security/tour1/index.html)了解有关小程序及其权限的更多信息。

# google-apps-script - Google 文档自定义刷新脚本

> ID：13521624
> 
> 赞同：0
> 
> 时间：2012-11-23T00:11:17.997
> 
> 标签：google-apps-script, google-sheets, calculated-field

我正在尝试编写一个脚本，该脚本允许我在 Google 完成计算后立即执行命令（即，我正在尝试将脚本添加到模仿某些 VBA“计算”功能的 Google 文档中）。

该脚本通过将范围转换为字符串并在该字符串中查找子字符串“Loading...”（或“#VALUE！”或“#N/A”）来工作。“while”循环应该休眠，直到在字符串中不再找到不需要的子字符串。

我将以下电子表格用作沙箱，代码在沙箱中似乎可以正常工作，只需搜索“正在加载...”：

[https://docs.google.com/spreadsheet/ccc?key=0AkK50_KKCI_pdHJvQXdnTmpiOWM4Rk5PV2k5OUNudVE#gid=0](https://docs.google.com/spreadsheet/ccc?key=0AkK50_KKCI_pdHJvQXdnTmpiOWM4Rk5PV2k5OUNudVE#gid=0)

然而，在其他情况下，我的单元格的值可能返回为“#VALUE！” 或“#N/A”，除了 Google 仍在加载/思考/计算之外的原因。这有什么办法？

```
 function onEdit() {

Refresh();

};

function Refresh () {

     var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Sheet1");
     var sheet2 = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Sheet2");

     // set the range wherever you want to make sure loading is done    

     var range = sheet.getRange('A:A')
     var values = range.getValues();

     var string = values.toString();

     var loading = "Loading";

                do
                  {
                  var randomWait = Math.floor(Math.random()*100+50); 
                  Utilities.sleep(randomWait);
                }
                while (string.search(loading) ==! null);

      range.copyTo(sheet2.getRange('A1'), {contentsOnly:true});

customMsgBox();

};

function customMsgBox() {
  Browser.msgBox("Data refreshed.");
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T18:29:13.980

而不是使用while循环来“睡眠”，您应该向文档添加一个事件处理程序，该处理程序捕获更新/刷新事件，然后运行您需要的任何数学/处理。

这是开始阅读事件的好地方：[https ://developers.google.com/apps-script/understanding_events](https://developers.google.com/apps-script/understanding_events)

但是，如果您在 API 文档中搜索事件处理程序，您可以快速获得一些示例代码...

# java - 用于循环遍历数组以打印一条语句 java

> ID：13521625
> 
> 赞同：0
> 
> 时间：2012-11-23T00:11:20.450
> 
> 标签：java

我的一段代码将获取一个 Patient 对象，并遍历一个存储 Patient 对象的数组，如果匹配，它将在 if 语句上打印出消息，这一切都很好。但是如果病人不在那里，我相信每次病人不在等候名单数组中时，else 段都会打印出来。我想要完成的是如果“你的病人不在等待名单上”打印一次，如果它不在数组中？知道怎么做吗？我试图想办法做到这一点，但我相信有一个简单的解决方案，我的大脑无法弄清楚。

```
public int findWaitingPosition (Patient patient)
{
    for (int i=0 ; i <= waitingList.length-1 ; i++)
    {
        if (waitingList[i].equals(patient))
        {
            System.out.println ("The patient is on waiting list: " + i+1);
        }
        else
        {
            System.out.println ("Your patient is not on the waiting list");
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T00:22:14.633

我会使用一个临时变量。此外，您的方法似乎应该返回患者在数组中的位置。在此代码段中，-1 表示未找到。

```
public int findWaitingPosition (Patient patient)
{
    int position = -1;
    for (int i=0 ; i <= waitingList.length-1 ; i++)
    {
        if (waitingList[i].equals(patient))
        {
            position = i;
            break;
        }
    }
    if (position >= 0)
        System.out.println ("The patient is on waiting list: " + i+1);
    else
        System.out.println ("Your patient is not on the waiting list");

    return position;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T00:18:01.977

您可以按如下方式更改循环：

```
boolean patientNotInList = true;
for (int i=0 ; i <= waitingList.length-1 ; i++)
{
    if (waitingList[i].equals(patient))
    {
        System.out.println ("The patient is on waiting list: " + i+1);
        patientNotInList = false;
        break; //you might want to break the loop once the object is found
    }
}
if(patientNotInList) {
    System.out.println ("Your patient is not on the waiting list");
} 
```

# php - PHP 范围问题或静态问题

> ID：13521628
> 
> 赞同：1
> 
> 时间：2012-11-23T00:11:34.350
> 
> 标签：php, static

我正在编写一个 PHP 类，并且在定义范围时遇到了相当大的麻烦。我在 SO 上阅读了很多关于这个概念的文章，但我似乎无法确定我的代码有什么问题。

```
class Logger {

    private static $logger ;
    private $res ;
    private $file ;
    private $mode ;

public static function getInstance() {
    if (!self::$logger) $instance = new self() ;
    self::$logger = $instance ;
    return self::$logger ;
}

private function initializeLogger( ) {

    $this->file = '/tmp/mydirectory/mylog.log' ;
    $this->res =  fopen($this->file, 'a') or exit("Can't open ".$this->file);
}

public function write( $message , $modeLevel ) {

    if ( !is_resource($this->res )) {
        $this->initializeLogger( ) ;
    }

    fwrite($this->res, "$message" . PHP_EOL);

}

public function close()
{
    fclose(self::$logger);
}
}

$log = Logger::getInstance();
$log.write( "WOW, it's working!!" , 1 ); 
```

此代码在运行时会产生： Call to undefined function write() in /var/www/myfile.php

关于如何创建可以以非静态方式引用的对象的任何建议，但

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T00:13:50.197

代替：

```
$log.write( "WOW, it's working!!" , 1 ); 
```

和：

```
$log->write( "WOW, it's working!!" , 1 ); 
```

`$log`是类的一个实例，`Logger`是`write`这个类的一个方法。

文档：[PHP 类和对象](http://php.net/manual/en/language.oop5.php)

# c - C 从标准输入读取行，按 Enter 结束

> ID：13521629
> 
> 赞同：1
> 
> 时间：2012-11-23T00:11:36.393
> 
> 标签：c

我正在用 C 编写一个项目程序，我有这样的输入：

```
 ............xcx............
  .........qeztodlea.........
  .......ecnedivorpuzy.......
  .....bqfjwxqindnrsatrs.....
  ....ucaamadisonoctoieax....
  ...ozkttqdxwltstaivcilex...
  ...ujknnakigzfasxninltxc...
  ..rabxaa...kohce...oelnyd..
  ..rithls...momrl...spayvh..

      honolulu
  oklahomacity
  charleston
  madison
  montgomery
  saltlakecity
  springfield 
```

第一组数据与第二组数据用空行分隔，我需要一次`Enter`处理它。

如果我在终端窗口中复制并粘贴此数据，`Enter`然后按 Ctr+D （这意味着输入结束）它工作正常，但如果只按`Enter`我仍然需要输入数据。我不明白要改变什么，所以只有首先`Enter`我会完成输入并继续我的程序？我知道这个问题听起来很愚蠢，但是在我使用的阅读行功能中`fgetc`，因为我需要检查一些字母，如果要使用例如`fgets`，它将首先停止`nl`，使用哪个功能？也许我没有得到什么，一般来说可能吗？

我已经有 rLine 读取线的功能（使用 fgetc ）：

```
char * rLine( int * length, int * ha ){
   char *buff = malloc( LMAX ), *old = buff;
   int count = 0, maxlen = LMAX, len = maxlen, c;

    while ( (c = fgetc( stdin ) ) != '\n' ){

       if ( c == EOF ) { *ha = R_EOF; break; }

       if ( /* some conditions for c */ ) *ha = R_FALSE;

    *buff ++ = c;
     count++;

     if ( -- len == 0 ){  
       len = maxlen;
       buff = (char *)realloc( old, maxlen *= 2 );
       old = buff;
       buff += count;
   }
 }
 *length = count;
 *buff = '\0';
 return old;
} 
```

，其中`ha`某种错误消息处理程序。肿瘤坏死因子

注意：好的，我发现输入端的驱动与`CTRL + D`组合相同。所以实际上检查`if ( c == EOF )`（或`c == '\0'`）对我来说很好。所以实际上这个问题现在可以结束了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:18:54.737

你熟悉`'\n'`换行和 `'\r\n'`回车吗？

添加此行并处理新行案例：

```
 if ( c == '\n' ) { // that is a new line } 
```

你看过这个帖子吗：

[如何从 C 中的控制台读取一行？](https://stackoverflow.com/questions/314401/how-to-read-a-line-from-the-console-in-c)

# python - 仅从模板中的 django 表单中获取一个字段

> ID：13521634
> 
> 赞同：8
> 
> 时间：2012-11-23T00:12:15.163
> 
> 标签：python, django, django-forms, django-templates

我有一个表格：

```
class FormLogin(forms.Form):
    email = forms.EmailField(max_length=150)
    name  = forms.CharField(max_length=20) 
```

我怎样才能在我的模板中只放电子邮件字段？我试过这个：

```
{{ form.fields.email }} 
```

但它返回`<django.forms.fields.CharField object at 0x00000000043BCEB8>`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-23T00:32:37.427

您可以使用：

```
{{ form.email }} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T04:16:39.407

你不需要使用`fields`. 利用：

```
{{ form.email }} 
```

# javascript - 使用 jQuery 将图像和文本从数组转换为 div？

> ID：13521639
> 
> 赞同：1
> 
> 时间：2012-11-23T00:13:00.870
> 
> 标签：javascript, jquery, dom, html

它返回`/dev/null`，为什么？我尝试用图像和一些文本填充新的 div。

```
<html>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<body>
    <div id='pitch'></div>
</body>
<script>
var v= new Array();
v[0] = new Array('h.png','Happy1!');
v[1] = new Array('hh.png','Happyy2!');
v[2] = new Array('hhh.png','Happyyy3!');

$(v).each(function(index,el){
        $(div.pitch).append("<div><img src='"+el[0]+"'>"+el[1]+"</div>");
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T00:20:00.820

您缺少选择器引号 '' 和 id hash

```
$('div#pitch').append("<div><img src='"+el[0]+"'>"+el[1]+"</div>"); 
```

# ruby-on-rails - 通过访问令牌应用程序获取用户信息

> ID：13521645
> 
> 赞同：0
> 
> 时间：2012-11-23T00:14:32.507
> 
> 标签：ruby-on-rails, facebook-graph-api, koala

我可以仅使用访问令牌应用程序通过 Graph API 获取并显示用户的图片吗？例如收集用户信息以在同一页面中显示它，当然这些用户已被接受 Web 应用程序的权限，然后是其他用户可以访问网络并查看所有这些用户的信息。所有这些只存储 facebook 的 ID，我的意思是，为了在同一页面中获取用户的信息，我想通过 API 进行调用并通过存储在数据库中的 facebook ID 检索他的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:36:03.457

您可以使用他/她的用户 ID 和应用程序访问令牌显示用户的公共数据，其中包括姓名和头像。

```
https://graph.facebook.com/<user_id> 
```

使用正确的用户 ID 在上述 URL 上提交 GET HTTP 请求将为您提供公开可用的数据。您可以添加字段以获取更多公开数据，例如个人资料照片。

# python - Python 导入错误

> ID：13521647
> 
> 赞同：2
> 
> 时间：2012-11-23T00:14:41.383
> 
> 标签：python, module, importerror

```
$ bin/python src/app/utils/loader.py newTasks checkForStuff 
Traceback (most recent call last):
  File "bin/python", line 135, in <module>
    execfile(__file__)
  File "src/app/utils/loader.py", line 154, in <module>
    module = __import__(args.module)
ImportError: No module named newTasks 
```

来自以下 loader.py：

```
if __name__ == '__main__':
    parser = argparse.ArgumentParser(description='Runs python')
    parser.add_argument('module', metavar='module', help="the target module")
    args = parser.parse_args()
    module = __import__(args.module) 
```

newTasks.py 与 loader.py 位于同一目录中。它适用于我的开发盒，我做了一个 svn 导出到登台，并且发生了上述情况。任何指针？

我能解决的唯一实质性区别是这次我用完了 virtualenv。

编辑：我将命令行更改为：

```
$ bin/python src/app/utils/loader.py utils.newTasks checkForStuff 
```

并且发现模块没问题。但我的下一个命令是调用其中一个模块函数`checkForStuff`：

```
parser.add_argument('func',metavar='function', help="the target function name")
...
func_param = getattr(module,args.func) 
```

现在它找不到功能了？

```
Traceback (most recent call last):
  File "bin/python", line 135, in <module>
    execfile(__file__)
  File "src/app/utils/loader.py", line 156, in <module>
    func_param = getattr(module,args.func)
AttributeError: 'module' object has no attribute 'checkForStuff' 
```

如果我进入 bin/python：

```
>>> import utils.newTasks as nt
>>> nt.checkForStuff
<function checkForStuff at 0x29b2f50> 
```

这很烦人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:28:38.843

`bin/python`不是您登台机器上的 python 二进制文件。检查它是否像普通 python 那样将脚本目录插入到 sys.path 中。

# sharepoint - 多服务器场上的自定义工作流操作部署

> ID：13521650
> 
> 赞同：0
> 
> 时间：2012-11-23T00:15:15.017
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-deployment

我创建了一个 wsp 解决方案，它创建了 2 个自定义工作流操作。我想将它部署到我的 2 个服务器场，其中有一个应用程序服务器和一个 Web 前端服务器。SPF Web 应用程序未在应用服务器上激活。

我的 Visual Studio 解决方案是这样的： - 一个创建 dll 的项目，动作代码在哪里。- 创建 wsp 包、功能等的一个项目。该包将另一个项目作为附加程序集引用。

我的问题是，当我使用部署服务器类型 WebFrontEnd 部署我的 wsp 包时，该功能仅安装在 wfe 上，我无法激活它。我在管理功能页面中看不到该功能（该功能是农场级别的）。当我将包的部署服务器类型更改为 ApplicationServer 时，我收到以下消息：

“此解决方案必须部署到应用程序服务器，而不是前端 Web 服务器。它不能包含范围为 Web 应用程序的资源。”

我做了一些测试。我从我的包中删除了额外的程序集，然后我可以将我的 wsp 解决方案部署为 ApplicationServer 类型（但不能使用我的自定义操作..）。然后我创建了一个没有任何内容的虚拟 dll，将其作为附加程序集添加到我的 sharepoint 包中，我意识到我无法再次将我的 wsp 部署为 ApplicationServer 类型。

那么，我可以从我的 wsp 解决方案中引用一个额外的程序集并仍然部署为 ApplicationServer 类型吗？

我该如何处理？任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:35:53.413

我又做了一次，我整天都在寻找答案，我终于在这里发布了一些东西，一小时后，我得到了答案。反正就是这里。

我使用 2 个 wsp 包独立部署了这两种解决方案。一个只是将 dll 部署到 gac 中（并且是 ApplicationServer），另一个是使用它而不自己部署它（并且是 WebFronEndServer）。现在我必须确保在使用另一个之前部署第一个......功能激活依赖项应该这样做。

问候。

# ruby-on-rails - 将 CSV 任务中的 Rake Tagging 标记为 SQLite？

> ID：13521653
> 
> 赞同：0
> 
> 时间：2012-11-23T00:16:00.787
> 
> 标签：ruby-on-rails, sqlite, ruby-on-rails-3.2, acts-as-taggable-on, rake-task

我有一个通过 ID 的 CSV 文件进行搜索的 rake 任务。然后我查询数据库以查看该 id 是否存在于我的数据库中。如果它存在，我使用 act_as_taggable 添加标签。该脚本运行良好，直到它到达第一个匹配项并尝试将标记写入我的 SQLite DB。我得到一个数据库锁定错误。我想知道我是否达到了 SQLite 的 I/O 限制并需要切换到成熟的 MySQL 数据库。

```
if defined?(Rails) && (Rails.env == 'development')
  Rails.logger = Logger.new(STDOUT)
end

require 'csv'
desc "Tag Voters that early voted from the Secretary of State Website"
task :tag_early => [:environment] do
  file ="db/AllAbsentees.csv"

  CSV.foreach(file, :headers=> true) do |row|
    @voter_id = row[1]
    puts "Working on Row" + row[1]
    @voter = Voter.where(:state_id => @voter_id).first()
    unless @voter.blank?
      @voter.tag_list = "2012_GEN_EARLY_VOTER"
      @voter.save()
      puts "Voter #" + @voter_id + "tagged"
    end
  end
end

    Voter Load (1.2ms)  SELECT "voters".* FROM "voters" WHERE "voters"."state_id" = '00008030' LIMIT 1
  ActsAsTaggableOn::Tag Load (0.2ms)  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 11944 AND "taggings"."taggable_type" = 'Voter' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
   (0.1ms)  begin transaction
   (0.4ms)  UPDATE "voters" SET "updated_at" = '2012-11-23 00:02:33.438114' WHERE "voters"."id" = 11944
  ActsAsTaggableOn::Tag Load (0.1ms)  SELECT "tags".* FROM "tags" WHERE (lower(name) = '2012_gen_early_voter')
  ActsAsTaggableOn::Tag Load (0.2ms)  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 11944 AND "taggings"."taggable_type" = 'Voter' AND (taggings.context = 'tags' AND taggings.tagger_id IS NULL)
  ActsAsTaggableOn::Tagging Exists (0.1ms)  SELECT 1 AS one FROM "taggings" WHERE ("taggings"."tag_id" = 19 AND "taggings"."taggable_type" = 'Voter' AND "taggings"."taggable_id" = 11944 AND "taggings"."context" = 'tags' AND "taggings"."tagger_id" IS NULL AND "taggings"."tagger_type" IS NULL) LIMIT 1
  SQL (1.4ms)  INSERT INTO "taggings" ("context", "created_at", "tag_id", "taggable_id", "taggable_type", "tagger_id", "tagger_type") VALUES (?, ?, ?, ?, ?, ?, ?)  [["context", "tags"], ["created_at", Fri, 23 Nov 2012 00:02:33 UTC +00:00], ["tag_id", 19], ["taggable_id", 11944], ["taggable_type", "Voter"], ["tagger_id", nil], ["tagger_type", nil]]
   (5053.1ms)  commit transaction
SQLite3::BusyException: database is locked: commit transaction
   (99.7ms)  rollback transaction
rake aborted!
SQLite3::BusyException: database is locked: commit transaction 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:49:18.117

SQLite 没有太多并发；对于要写入数据库的事务，必须没有其他读取或写入连接。

确保没有其他程序同时读取或写入 DB，并且您自己的程序中的所有 DB 访问都使用相同的数据库连接。

# python - satchmo mail.py 发送 html 电子邮件而不是文本电子邮件

> ID：13521655
> 
> 赞同：1
> 
> 时间：2012-11-23T00:16:09.090
> 
> 标签：python, django, registration, satchmo

对于我目前的 satchmo 商店，我想发送 html 电子邮件而不是所有 txt 电子邮件。从 satchmo_store 帐户注册码看，所有的电子邮件都是硬编码的，并且使用 .txt 格式而不是 html 格式。例如mail.py

```
"""Sends mail related to accounts."""

from django.conf import settings
from django.utils.translation import ugettext
from satchmo_store.mail import send_store_mail
from satchmo_store.shop.models import Config
from satchmo_store.shop.signals import registration_sender

import logging
log = logging.getLogger('satchmo_store.accounts.mail')

# TODO add html email template
def send_welcome_email(email, first_name, last_name):
    """Send a store new account welcome mail to `email`."""

    shop_config = Config.objects.get_current()
    subject = ugettext("Welcome to %(shop_name)s")
    c = {
        'first_name': first_name,
        'last_name': last_name,
        'site_url': shop_config.site and shop_config.site.domain or 'localhost',
        'login_url': settings.LOGIN_URL,
    }
    send_store_mail(subject, c, 'registration/welcome.txt', [email],
                    format_subject=True, sender=registration_sender) 
```

我知道您可以将最后一行更改为以下内容以使其正常工作：

```
send_store_mail(
    subject=subject,
    context=c,
    template='registration/welcome.txt',
    recipients_list=[email],
    format_subject=True,
    sender=registration_sender,
    template_html='registration/welcome.html') 
```

但是，我最好不要在不久的将来为了升级目的而触摸 Satchmo 应用程序中的代码。

有谁知道在不接触 satchmo 应用程序的情况下覆盖此功能或为所有注册相关功能启用 html 电子邮件的理想方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T21:06:03.240

我通过以下方式对 Satchmo 内部进行了类似的更改：

应该可以将 Satchmo 安装中的相关文件复制到您的 django 应用程序中。[如果您根据此建议](http://gosatchmo.com/2010/starting-a-new-store-real-world-project-layout/)设置 Satchmo 商店，则可能意味着将 satchmo/apps/satchmo_store/accounts/mail.py 复制到 /localsite/accounts/mail.py。这个想法是自动加载本地副本而不是原始副本。

在您的本地 mail.py 副本中，您可以替换 send_store_email() 函数。记下笔记，以便在 Satchmo 升级时记住所做的更改。很可能原始文件仍然是相同的，即使在未来的版本中，您的覆盖也将起作用。

在其他情况下，当您必须更改某些类行为时，您还可以将原始类子类化，其中一个仅更改相关方法，同时保留原始名称。

# sql-server-2008 - 从 SQL Server 2000 迁移到 2008 和 IIS6-IIS7 后，经典 ASP 的间歇性“超出当前范围”

> ID：13521657
> 
> 赞同：3
> 
> 时间：2012-11-23T00:16:27.900
> 
> 标签：sql-server-2008, asp-classic, iis-7.5

背景：我刚刚完成了将大约 50 个经典 ASP 站点从 IIS6/Sever 2003 和 SQL Server 2000 环境迁移到 nginx 负载平衡器后面的 2 台机器的新虚拟环境。每台 MS 机器都运行 IIS7.5 和 SQL Server 2008 R2。他们目前每个都有 6Gb 和 2 个 VCPU。数据库在镜像配置中设置（目前没有见证）。

在测试期间，所有站点似乎都正常运行。

一旦实时流量开始到达站点，很快就会发现初始资源分配（2Gb 和 1 VCPU 太低并且很快增加）。主要问题来自服务器上大约 10 个（可能包括最繁忙的）站点上发生的间歇性 ASP 错误。他们将从 ASP 错误中产生 500 响应

> *提供程序错误“8002000a”超出当前范围。*

所有研究都指出了诸如数字太大而无法放入整数变量之类的原因，并且有些人提到了与 SQL Server 2008 与 2000 相比的新实现的一些相关性`RAND`。`NEWINT()`似乎导致错误的存储过程相对简单，其中一些简单到接受单个`VARCHAR`参数（在限制范围内）并在表上执行单列选择。大多数甚至根本不涉及`INT`s，如果涉及，则值在范围内。

错误可能会在一台机器上出现一段给定的时间，而在同一时间另一台服务器不一定会出现错误，但有时会出现。一段时间后，错误将停止发生，这似乎也与过度过载的系统资源无关。

ASP 到数据库是通过使用 SQL Server Client 10 驱动程序的 DSN 完成的。该代码使用 ADODB 连接和命令对象。这段代码在以前的服务器上已经运行了 6 年多。数据库设置为兼容模式 80 (SQL Server 2000)。

任何人都可以阐明我应该在哪里尝试解决这个问题吗？如果有任何其他信息我可以分享，具体的代码片段等，请告诉我。

更新：我以为`UPDATEUSAGE`下面的答案已经得到了它，但不幸的是它稍后又恢复了。经过一番思考后，我有了以下想法…… IIS 有两个实例，彼此独立，它们都与单个数据库对话，无论它当时是否是本地的，它们都执行相同的同步代码使用长时间使用相同语法和有效变量的代码。由于通过 IIS 执行的 ASP 是这个等式中唯一不是单点的层，因为这就是我要去的地方。当问题再次发生时，我在显示错误的机器上重新启动了 IIS（这种情况通常只发生在两台服务器之一上）。重新启动 IIS 似乎可以解决问题。然后它发生在具有不同站点的另一台服务器上，

进一步阅读现在让我了解了应用程序池的“托管管道”模式。它们当前设置为“集成”。我做了一些阅读，我想知道是否应该将它们设置为经典以模拟 IIS6。有人对此有更多想法吗？

非常感谢埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:24:44.693

你是否：

(1) 更新使用计数器：在 SQL Server 的早期版本中，表和索引的行计数和页计数的值可能会变得不正确。要更正任何无效的行数或页数，`DBCC UPDATEUSAGE`请在升级后在所有数据库上运行。

(2) 重建所有索引

*   [从 SQL Server 2000 升级到 2008](http://mitch-wheat.blogspot.com.au/search?q=sql%20server%202008%20upgrade)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-06T23:13:18.403

我遇到了同样的问题，并将其追踪到我定义为长整数的数据库中的字段定义。我在那里的值有些像 53435534126262 ，立即将其更改为文本字段，问题就消失了

试试看？？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:39:59.503

我认为发布我的发现和解决这个问题的方法可能会很有用，因为我在网上找不到任何地方提到我遇到的相同情况。

我经历了许多步骤，每个步骤似乎都减少了错误的频率，但并没有消除它们。首先，我将数据库身份验证方法更改为 SQL 而不是基于 Windows。起初我将所有站点都更改为使用相同的登录名，但后来我将它们更改为都使用唯一的登录名。

我用服务包 2 和累积更新包 3 更新了 SQL Server。

如前所述，上述步骤降低了错误的频率，但并没有阻止它们。我开始浏览所有站点用来管理其数据库连接和使用存储过程的类。我遇到了`adocommand.parameters.refresh`我读到的这条线，当它被调用时，它会调用数据库以检索给定存储过程的参数，以便它们可以作为 ASP 中的对象访问，而不是必须是参数以特定顺序给出并手动为它们分配类型。在详细介绍此方法的 Microsoft 页面上，它有一个小脚注，上面写着

> Parameters.refresh 在某些情况下会失败或返回不完全正确的信息。Parameters.refresh 在 ASP 页面上使用时特别容易受到攻击。

这就是它所提供的全部内容，我找不到有关此的任何其他细节。我增加了我网站上的日志记录，以便在出错时输出 parameters.refresh 返回的内容。我在一个实例中发现了它，它从存储过程中返回了两个变量，名称正确，但变量类型不正确。他们本来应该是 a`VARCHAR`和 an`INT`但他们都回来了`CURRENCY`。显然，当您尝试将字符串分配给`CURRENCY`. 在解决问题之前，我只设法捕获了一个错误实例。

我发现似乎解决问题的唯一方法是从使用基于 ODBC 的驱动程序（DSN 或 DSNless）改为使用带有“PROVIDER”关键字的 SQL Native Client OLE DB 驱动程序。这有一个额外的好处，即在以前似乎没有工作时，它似乎启用了连接池。

更改为驱动程序的一个副作用是存储过程和 ASP 变得容易受到从存储过程返回的中间结果的影响，如果其中有多个语句并且它没有`SET NOCOUNT ON`在顶部显式设置。我没有尝试更新 1000 多个存储过程，而是发现`NOCOUNT`可以在数据库实例级别为所有解决此问题的数据库设置标志。

我希望这对某人有所帮助，因为我花了 3 周时间来追踪这个问题，这令人难以置信。如有任何进一步的问题，请随时提出，如果可以，我会提供帮助。

谢谢埃里克

# java - 为什么需要将数据库连接对象或连接池设为单例？

> ID：13521660
> 
> 赞同：0
> 
> 时间：2012-11-23T00:16:43.860
> 
> 标签：java, database, jakarta-ee, connection, singleton

我已经阅读了几篇关于单例示例的文章。而且我可以看到开发人员有时将数据库连接对象或连接管理器作为单例实现。在一些帖子中甚至建议使用数据库连接池。那么Singleton的意思就是创建一个单一的实例，所以基本上我们限制访问。例如打印机或硬件访问，记录器访问，我们尝试使用单例将用户的访问限制为一次一个。但是，在 DB 连接对象中使用单例的目的是什么？如果我能正确理解将数据库连接创建为单例，则意味着应用服务器将只有一个实例。这是否意味着只有一个用户可以访问数据库连接，而下一个用户必须等到连接关闭？请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:01:03.180

我认为您正确理解了将连接本身设为单例的含义。通常这不是一个好主意（尽管在某些非常特殊的情况下它可能有意义）。

使连接管理器或连接池成为单例是完全不同的。池本身将处理一组连接，它可以根据需要创建新的连接（达到限制）或重新使用已经使用和丢弃的连接。

同时拥有多个连接池会失去连接池的优势：

*   控制打开的连接总数会更难
*   一个池可能正在创建连接，而另一个池可能有可用的连接

希望这有助于澄清主题。您可能想阅读有关连接池的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:24:18.497

问：“但是，在 DB 连接对象中使用单例的目的是什么？”
答：（几乎总是）没有。所以你的想法是正确的。

问：“这是否意味着只有一个用户可以访问数据库连接，而下一个用户必须等到连接关闭？”
答：取决于（第一部分）和否（“和”之后的第二部分）。

在单线程应用程序中，一次只有一个用户会使用数据库，而另一个用户会等待，直到第一个用户的分派结束，但连接关闭时不会。连接关闭后，您需要创建另一个连接以使用数据库。

在多线程应用程序中，许多线程可能使用相同的连接实例，结果实际上取决于供应商的实现：可能会阻塞调度（有效地将您的应用程序转换为单线程应用程序）或抛出异常甚至是不同的东西。然而，

# javascript - 如何使用 jQuery 跟随 div 的光标？

> ID：13521661
> 
> 赞同：2
> 
> 时间：2012-11-23T00:16:53.047
> 
> 标签：javascript, jquery

我有一个圆形的 div，它使用 Javascript 跟随你的鼠标，但我希望它在碰到容器 div 的边缘时停止。我该怎么做？这是使用的 Javascript 即时消息：

```
var mouseX = 0, mouseY = 0;
$(document).mousemove(function(e){
mouseX = e.pageX;
mouseY = e.pageY;
});

// cache the selector
var follower = $("#follower");
var xp = 0, yp = 0;
var loop = setInterval(function(){
// change 12 to alter damping higher is slower
xp += (mouseX - xp) / 12;
yp += (mouseY - yp) / 12;
follower.css({left:xp, top:yp});

}, 30); 
```

这是我到目前为止所拥有的一切：[jsFiddle](http://jsfiddle.net/t_man/JUknN/9/)

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T00:27:03.450

您需要确定移动元素的限制......

```
var mouseX = 0, mouseY = 0, limitX = 150-15, limitY = 150-15;
$(window).mousemove(function(e){
   mouseX = Math.min(e.pageX, limitX);
   mouseY = Math.min(e.pageY, limitY);
}); 
```

`150`容器的宽度/高度在哪里，`15`光标的大小在哪里

[http://jsfiddle.net/fhmkf/](http://jsfiddle.net/fhmkf/)

# json - 使用ajax中的参数获取调用

> ID：13521663
> 
> 赞同：0
> 
> 时间：2012-11-23T00:17:05.893
> 
> 标签：json, jquery, cordova

这应该是一件容易的事。但这对我来说并不顺利。

只是为了提醒，尽管我不相信它有影响：我在 phonegap 中这样做。

我创建了一个 wcf 服务，将我的应用程序连接到数据库。我没有直接连接到 wcf 服务，而是制作了一个简单的 html 页面，该页面从 url 获取 GET 参数，并使用这些值连接到数据库

好的，我已经在网站上放置了一个名为 ajax_info.html 的测试文件，并且我的脚本运行良好。但是当我把上面的网址放进去时，它不会做任何事情。我将手机连接到提琴手，绝对没有任何反应......

这是我的脚本（感谢 wc3schools）。

```
 function loadXMLDoc()
    {
    var xmlhttp;
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
        }
      }
      var user= "something";
      var pass= "something";
    xmlhttp.open("GET", "http://XX.XX.XXX.XX:8080/wcf/site.html"+"?user="+user+"&pass="+pass,true);
    xmlhttp.send();
    } 
```

此代码根本不起作用：

```
function login(){
       $.ajax({

            type: "GET",
            url: "http://XX.XX.XXX.XX:8080/wcf/site.html",
            data: {"user":"something", "pass":"something"},
            // processData: true,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                        alert(msg);
                    },
            error: function (msg) {

                       $.each(msg, function() {
                            $.each(this, function(k, v) {
                                alert(v);
                            });
                        });
                    }

  });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:32:27.463

试试这个...

```
$.get("http://XX.XX.XXX.XX:8080/wcf/site.html", {"user":"something", "pass":"something"}, function() {
    alert("success");
  })
.success(function() { alert("second success"); })
.error(function() { alert("error"); })
.complete(function() { alert("complete"); }); 
```

问候。

# asp.net-mvc - 如何让 routelink 返回正确的 URL？

> ID：13521664
> 
> 赞同：4
> 
> 时间：2012-11-23T00:17:05.840
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, routelink

这是复制问题的程序。

1.  开始新的 mvc 4 项目。
2.  将以下行添加到“默认”路由之前的 RegisterRoutes() 方法

    ```
    routes.MapRoute(
            name: "Test",
            url: "Test/{action}",
            defaults: new { controller = "Test", action = "Index" }
    ); 
    ```

3.  将以下内容添加到 Index.cshtml 和 About.cshtml

    ```
    @Html.RouteLink("link to TestController", "Test") 
    ```

如您所见，生成的 html 代码对于 2 个页面是不同的。我希望 URL 是“/Test”，它为 Index.cshtml 正确呈现，但它成为 About.cshtml 的“/Test/About”。

我的问题是是否有任何记录的方式来生成相同的正确 URL。上面的例子只是为了演示目的而创建的。我想使用路由表信息来生成菜单。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T00:28:29.183

似乎引擎正在`action`从当前页面（“索引”，“关于”）设置路由值。因此，解决此问题的一种方法是“取消设置”该路由值：

```
@Html.RouteLink("link to Test Controller", "Test", new { action = String.Empty }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T07:38:15.413

注册您的路线

```
 routes.MapRoute(
                name: "TestUrl",
                url: "Test",
                defaults: new { controller = "TestController", action = "TestAction" }
            ); 
```

将以下内容添加到 TestAction.cshtml

```
 @Html.RouteLink("Test", "TestUrl") 
```

现在您的 URL 是 /Test，希望这会对您有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T22:22:53.090

最快的方法是只指定一个空白操作。

```
@Html.RouteLink("link to TestController", "", "Test") 
```

这将产生`/Test`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-28T16:00:43.977

对于那些到这里来寻找**.netcore razor page RouteLink**语法的人，不要使用 RouteLink 的“ **page** ”保留成员。正如一些人所建议的，它不适用于 routeValues 对象。相反，请使用以下格式：

```
<a asp-page="RazorPage">RazorPage</a> 
```

*这处理尾随和尾随正斜杠的缺失。*RazorPage 是页面的名称，在第一个“.”之后没有任何字符。

# python - python sys.argv 无法获取参数值？

> ID：13521671
> 
> 赞同：0
> 
> 时间：2012-11-23T00:17:43.673
> 
> 标签：python, python-3.x, python-2.7

我试图将一些变量传递给我的 python 代码。在我运行 python 脚本之后，变量是一个列表。这只是打印出 sys.argv。输出如下：

```
:~ xxx$ /var/folders/kg/qxxxxxd343433gq/T/Cleanup\ At\ Startup/pdTry-375321896.860.py.command ; exit;
var1, var2, var1, var2
the len argv is 1
/Users/xxx/python/pdTry.py
Traceback (most recent call last):
File "/Users/xxx/python/pdTry.py", line 58, in <module>
main()
File "/Users/xxx/python/pdTry.py", line 33, in main
print (sys.argv[1])
IndexError: list index out of range
logout 
```

您可以看到包含 var1 和 var2 的列表实际上打印了 2 次。但我可以得到值，len sys.argv 为 1。sys.argv[1] 没有值。有谁知道为什么？为什么长度是1，应该是2？arg[0] 是脚本名称，arg[1] 是我传递给它的变量列表？

代码很简单

```
 def main():
   os.system ('osascript up.scpt')
   #print (sys.argv)
   a= 'the len is '+str(len(sys.argv))
   print (a)
   print (sys.argv[0])
   print (sys.argv[1]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T00:28:37.173

请记住，python 中的列表从 0 开始。

```
List Length   : 1 2 3 4
Element number: 0 1 2 3
Data          : A B C D 
```

因此，当您的长度为 1 时，您只有 1 个元素 (argv[0])，这意味着 argv[1] 不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:20:40.467

老兄，

当您的长度为 1 时，您正在阅读 argv[[1]。长度数组如何有两项（读取第 0 项和第 1 项）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:33:09.983

您似乎遗漏了脚本的任何实际参数，这些参数可以添加到 sys.argv 列表中。在您发布的调用中，我没有看到传递给脚本的变量列表。如果分隔命令（脚本名称和 exit shell 内置）的分号被转义，那么您很可能会让 len(sys.argv) 等于 3（但我怀疑使用分号并以 sys 退出是您的初衷.argv 值）。

```
# simple test script
$ cat exittest.py
import sys
print(sys.argv, len(sys.argv))

# and some calls
$ python3.2 exittest.py
['exittest.py'] 1

$ python3.2 exittest.py \; exit
['exittest.py', ';', 'exit'] 3

# and for a similar call as you posted I ssh'ed to my localhost
# to test it with exit builtin
$ python3.2 exittest.py ; exit
['exittest.py'] 1 
```

# java - 在 Java 中获取当前日期（星期一、星期二等）

> ID：13521676
> 
> 赞同：11
> 
> 时间：2012-11-23T00:18:23.240
> 
> 标签：java

我正在开发一个程序，询问用户他们想在哪一天看到午餐菜单。他们可以按名称输入任何一天（星期一、星期二等）。这很好用，但我也希望他们能够输入“今天”，然后让程序获取当前日期，然后检查菜单中的该值。

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-23T00:26:06.210

您可以使用[`java.util.Calendar`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)：

```
Calendar calendar = Calendar.getInstance();
int dayOfWeek = calendar.get(Calendar.DAY_OF_WEEK); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-06-29T08:38:39.147

这是问题的确切答案，

```
Calendar calendar = Calendar.getInstance();
Date date = calendar.getTime();
System.out.println(new SimpleDateFormat("EE", Locale.ENGLISH).format(date.getTime()));
System.out.println(new SimpleDateFormat("EEEE", Locale.ENGLISH).format(date.getTime())); 
```

结果（今天）：

星期六

周六

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-08-17T14:44:49.657

从 Java 8 及其新的[java.time](https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)包开始：

```
DayOfWeek dayOfWeek = DayOfWeek.from(LocalDate.now()); 
```

或者

```
DayOfWeek dayOfWeek = LocalDate.now().getDayOfWeek(); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-10-26T10:58:46.563

爪哇 8：

```
LocalDate.now().getDayOfWeek().name() 
```

# perl - 从 BEGIN 块中调用 Perl 分支

> ID：13521677
> 
> 赞同：7
> 
> 时间：2012-11-23T00:18:35.410
> 
> 标签：perl, posix, fork

`fork`从`BEGIN`块中调用 Perl 时，我无法理解 Perl 中的行为。在[perlfork](http://perldoc.perl.org/perlfork.html)中，我读到了这个

> ## 开始块
> 
> 从块中调用时，`fork()`仿真将无法完全正常工作。`BEGIN`分叉的副本将运行`BEGIN`块的内容，但不会在块之后继续解析源流`BEGIN`。例如，考虑以下代码：
> 
> ```
> BEGIN {
>     fork and exit;      # fork child and exit the parent
>     print "inner\n";
> }
> print "outer\n"; 
> ```
> 
> 这将打印：
> 
> ```
> inner 
> ```
> 
> 而不是预期的：
> 
> ```
> inner
> outer 
> ```

但是，当我读到它时，这仅适用于`fork`被模拟的平台。由于我关心（并在 Linux 上测试代码），这应该不是问题，不是吗？

确实，如果我从该文档中复制示例代码

```
BEGIN {
    fork and exit;
    print "inner\n";
}
print "outer\n"; 
```

这就是我运行它时发生的事情

```
jirka@debian:~/xpath$ perl /tmp/test.pl
jirka@debian:~/xpath$ inner
outer 
```

这似乎是一致的。

但是，当我删除时，`exit`我希望同时拥有父进程和子进程。那并没有像我预期的那样表现。

这是我的新代码

```
BEGIN {
    fork;
    print "inner\n";
}
print "outer\n"; 
```

这是运行

```
jirka@debian:~/xpath$ perl /tmp/test.pl
inner
outer
jirka@debian:~/xpath$ inner 
```

我预计两个`inner`和两个`outer`。第二个`outer`不见了。

我的问题是，是什么导致了这种奇怪的行为，甚至如何描述它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T00:40:26.990

在我看来，孩子不再打开源文件（或者它只在父文件中缓冲？）

通过 -e 尝试代码成功。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T01:13:12.467

我的第一个猜测是父级在子级完成运行之前退出，导致它死亡（SIGPIPE？），但等待子级会产生相同的输出：

```
BEGIN {
   $pid = fork;
   print "inner\n";
}
print "outer\n";
waitpid $pid, 0 if $pid; 
```

输出：

```
inner
outer
inner 
```

所以确实，这似乎不可能完成。问题的原因是父和子共享指向源文件的相同文件指针。当一个从源文件中读取时，它会推进两者的文件指针。

例如，如果我阻止其中一个进程使用 进一步向下读取文件`__DATA__`，则另一个进程将继续读取过去`__DATA__`并在那里执行代码。如果我将以下内容附加到上述程序中：

```
__DATA__
...8KB of newlines...
die("boo!"); 
```

我得到：

```
inner
outer
inner
boo! at a.pl line 90. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-23T01:17:36.800

好的，问题似乎确实是孩子和父母踩着对方的源文件描述符。Strace 给出：

```
read(3, "BEGIN {\n        fork;\n\tprint \"in"..., 8192) = 67
_llseek(3, 46, [46], SEEK_SET)          = 0
_llseek(3, 0, [46], SEEK_CUR)           = 0
clone(Process 29716 attached
child_stack=0, flags=CLONE_CHILD_CLEARTID|CLONE_CHILD_SETTID|SIGCHLD, child_tidptr=0xb75329a8) = 29716
[pid 29715] write(1, "inner\n", 6inner
)      = 6
[pid 29715] read(3, "    print \"outer\\n\";\n", 8192) = 21
[pid 29715] read(3, "", 8192)           = 0
[pid 29715] close(3)                    = 0
...
write(1, "inner\n", 6inner
)                  = 6
read(3, "", 8192)                       = 0
close(3)                                = 0 
```

这似乎是由于父子共享单个文件读取指针这一事实造成的。来自[`man fork`](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)：

> *   子继承父的一组打开文件描述符的副本。子文件中的每个文件描述符与父文件中的相应文件描述符引用相同的打开文件描述（请参阅 open(2)）。这意味着两个描述符共享打开文件状态标志，**当前文件偏移量**，...

现在，这引出了一个问题：如何分离这些文件描述符的偏移量？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-23T03:15:55.663

我想知道你`inner`在最后提示后是如何打印的？

如果您仔细阅读文档

> 当从 BEGIN 块中调用时，fork() 仿真将无法完全正确地工作。分叉的副本将运行 BEGIN 块的内容，但不会在 BEGIN 块之后继续解析源流

它表示子进程将仅解析（并因此运行）`BEGIN`块的其余部分。所以孩子打印`inner`并且不再做。

如果没有`exit`调用，父进程会继续打印`inner`，随后会打印`outer`，所以您应该有

```
inner
inner
outer 
```

我希望我有一个 Unix 盒子来试试这个，但我回家后会这样做

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-23T08:04:55.913

> 我的问题是，是什么导致了这种奇怪的行为，甚至如何描述它。

实际上，当检查语法时（粗略地）执行**BEGIN**块。有许多阶段，例如`BEGIN`、`UNITCHECK`、和。所以当你做你的程序实际上还没有运行。`CHECK``INIT``END``fork()``BEGIN`

在`fork()`模拟的系统上，这是由内部 Perl 解释器状态引起的，因为程序处于早期启动状态（您的代码甚至没有编译！）。所以在模拟环境中，我认为 Perl 在编译后会丢弃模拟叉。

我认为要解决您必须将代码放入**INIT**块的问题。有关这些阶段的更多详细信息，请阅读[perlmod](http://perldoc.perl.org/perlmod.html)手册页。

# iphone - 如何在应用内购买升级的行为上更改应用图标或在设备上安装新应用？

> ID：13521686
> 
> 赞同：1
> 
> 时间：2012-11-23T00:20:21.433
> 
> 标签：iphone, ios, xcode, icons, in-app-purchase

我正在寻找一种方法让用户能够将他们的应用程序从免费应用程序升级到 pro/plus/HD 应用程序。我有一些应用内购买的经验，但对于这个客户，我需要调整应用图标（因为用户可以升级他们的应用）。

在 stackoverflow 上发现更改 Appicon 是不可能的，因为它在 App 中是沙盒环境（[链接](https://stackoverflow.com/questions/10515135/how-to-change-app-icon-within-in-app-purchase)）。

我看到了一些很酷的应用程序，它可以选择让一个新应用程序安装在用户的 iPhone 上，并带有一个新的应用程序图标。这一切都通过应用内购买实现。

谁能解释我或参考一些必要的步骤来满足我的需求？

编辑：

是否有可能创建一个应用程序，就像您将 safari 的链接添加到您的主屏幕一样，然后让这个功能作为我的应用程序的超链接？（使用共享密钥）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-23T01:22:41.567

如您所知，您无法更改应用程序图标。此外，您不能在用户设备上安装不是来自 App Store 的应用程序。您可以做的最好的事情是利用应用内购买，当购买完成后，将他们指向商店中应用的链接。但是，您的应用程序将不会被接受，并且专业版应用程序将免费在 App Store 上。您可以做的最好的事情是完全从图标中“免费”或拥有两个不同的应用程序。

# java - 同时杀死两个进程

> ID：13521687
> 
> 赞同：0
> 
> 时间：2012-11-23T00:20:28.033
> 
> 标签：java, process

我有一个任务，我必须创建一个进程的两个实例，而另一个进程必须在其中一个终止时终止。我只能在关闭创建的第一个进程时执行此操作，这是否意味着创建的进程具有某种层次结构，即使它们都是同一进程的子进程？

提前致谢。

```
ProcessBuilder pb = new ProcessBuilder(args);
Process proc_1 = pb.start();
Process proc_2 = pb.start();
System.out.println("Child is running...wait for child to terminate");

int exitValue_1 = proc_1.waitFor();
System.out.println("Child_1 finished with exit value -> " + exitValue_1);
if(exitValue_1==0) proc_2.destroy();

int exitValue_2 = proc_2.waitFor();
System.out.println("Child_1 finished with exit value -> " + exitValue_2);
if(exitValue_2==0) proc_1.destroy(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T00:38:57.803

> 这是否意味着创建的流程具有某种层次结构，

不，这只是您编写代码的方式。在第一个进程退出之前，您一直处于阻塞状态，不幸的是，如果第二个进程首先退出，您的代码将无法知道这一点。

由于 Java 没有为您提供“waitForEitherProcess”方法，我认为您需要进行轮询循环检查进程的状态。定期在每个进程上调用 exitValue，然后休眠几毫秒。如果 exitValue 返回一个 int，则该进程已终止。如果它抛出异常，它没有。使用它来决定哪个进程已经退出以及哪些需要被杀死。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T00:46:56.900

`Process#exitValue``IllegalThreadStateException`如果进程尚未退出，将抛出一个，你可以利用它。

```
ProcessBuilder pb = new ProcessBuilder(args);
Process proc_1 = pb.start();
Process proc_2 = pb.start();

boolean running = true;
while (running) {
    try {
        int exitValue = proc_1.exitValue();
        System.out.println("Child_1 finished with exit value -> " + exitValue);
        if(exitValue==0) {
            proc_2.destroy();
            running = false;
            break;
        }
    } catch (IllegalThreadStateException exp) {
    }
    try {
        int exitValue = proc_2.exitValue();
        System.out.println("Child_2 finished with exit value -> " + exitValue);
        if(exitValue==0) { 
            proc_1.destroy();
            running = false; 
            break;
        }
    } catch (IllegalThreadStateException exp) {
    }
} 
```

# sql - Rails：使记录过期

> ID：13521692
> 
> 赞同：0
> 
> 时间：2012-11-23T00:21:28.550
> 
> 标签：sql, ruby-on-rails-3

我试图在达到保存日期后使文章过期，即：

```
@articles = Article.where(:semiretirement => Date.today) 
```

我知道那行不通，但是我将如何写`after`而不是等于？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:53:41.853

怎么样：

```
@articles = Article.where('semiretirement <= ?', Date.today) 
```

这将找到`semiretirement`日期小于今天日期的所有文章。我相信这将是您想要使已过给定日期的文章过期的原因。

# php - 出现验证消息后，下拉菜单返回“请选择”选项

> ID：13521693
> 
> 赞同：0
> 
> 时间：2012-11-23T00:21:35.860
> 
> 标签：php, html

下面我有一个表单，其中包含几个文本输入、一个下拉菜单以及用于验证和成功的消息：

```
<?php

$getyear = (isset($_POST['year'])) ? $_POST['year'] : '';

$sql = "SELECT CourseId, CourseName FROM Course ORDER BY CourseId";

$sqlstmt=$mysqli->prepare($sql);

$sqlstmt->execute();

$sqlstmt->bind_result($dbCourseId, $dbCourseName);

$courses = array(); // easier if you don't use generic names for data

$courseHTML = "";
$courseHTML .= '<select name="course" id="coursesDrop">'.PHP_EOL;
$courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;

while($sqlstmt->fetch())
{
    $course = $dbCourseId;
    $coursename = $dbCourseName;
    $courseHTML .= "<option value='".$course."'>" . $course . " - " . $coursename . "</option>".PHP_EOL;

}

$courseHTML .= '</select>';

if((isset($_POST['registerbtn'])))
{
    $getfirstname = $_POST['firstname'];
    $getsurname = $_POST['surname'];
    $getcourse = $_POST['course'];

    if ($getfirstname)
    {
        if ($getsurname)
        {
            if ($getcourse)
            {
                // don't use $mysqli->prepare here
                $query = "SELECT StudentUsername FROM Student WHERE StudentUsername = ?";
                // prepare query
                $stmt=$mysqli->prepare($query);
                // You only need to call bind_param once
                $stmt->bind_param("s",$getid);
                // execute query
                $stmt->execute();
                // get result and assign variables (prefix with db)
                $stmt->bind_result($dbStudentUsername);
                //get number of rows
                $stmt->store_result();
                $numrows = $stmt->num_rows();

                if ($numrows == 1)
                {
                    $errormsg = "<span style='color: green'>Student has been Registered</span>";
                    $getfirstname = "";
                    $getsurname = "";
                    $getcourse = "";
                }
                else
                {
                    $errormsg = "An error has occured, Student has not been Registered";
                }
            }
            else
            {
                $errormsg = "You must select the Student's Course to Register";
            }
        }
        else
        {
            $errormsg = "You must enter in Student's Surname to Register";
        }

    }
    else
    {
        $errormsg = "You must enter in Student's First Name to Register";
    }
}

$form = "
<form action='" . htmlentities($_SERVER["PHP_SELF"]) . "' method='post'>
<table>
<tr>
<td></td>
<td id='errormsg'>$errormsg</td>
</tr>
<tr>
<td>First Name:</td>
<td><input type='text' name='firstname' value='$getfirstname' /></td>
</tr>
<tr>
<td>Surname:</td>
<td><input type='text' name='surname' value='$getsurname' /></td>
</tr>
<tr>
<td>Course:</td>
<td>{$courseHTML}</td>
</tr>
<tr>
<td></td>
<td><input type='submit' value='Register' name='registerbtn' /></td>
</tr>
</table>
</form>";

echo $form;

?> 
```

现在我遇到的问题实际上是下拉菜单。

如果出现成功消息，则显示课程下拉菜单的“请选择”选项，这很好，但如果用户提交表单并出现验证消息，下拉菜单将返回“请选择”选项。我希望它保留用户选择的最后一个选项。使用上面的代码如何实现这一点是可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T00:30:07.583

更改以下行：

```
$courseHTML .= "<option value='".$course."'>" . $course . " - " . $coursename . "</option>".PHP_EOL; 
```

对此：

```
if (isset($_POST['course']) && $course == $_POST['course'])
{
    $courseHTML .= "<option value='".$course."' selected='selected'>" . $course . " - " . $coursename . "</option>".PHP_EOL;
}
else
{
    $courseHTML .= "<option value='".$course."'>" . $course . " - " . $coursename . "</option>".PHP_EOL;
} 
```

这样做是检查电流`$course`是否等于`$_POST['course']`. 如果是，则将选项设置为`selected`。

**编辑 1**

您可以检查您的表单提交是否有效，并且该表单将在稍后通过以下内容：

```
$validSubmission = isset($_POST['registerbtn']) && $_POST['firstname'] && $_POST['surname'] && $_POST['course'];

while($sqlstmt->fetch())
{
    $course = $dbCourseId;
    $coursename = $dbCourseName;
    if (!$validSubmission && isset($_POST['course']) && $course == $_POST['course'])
    {
        $courseHTML .= "<option value='".$course."' selected='selected'>" . $course . " - " . $coursename . "</option>".PHP_EOL;
    }
    else
    {
        $courseHTML .= "<option value='".$course."'>" . $course . " - " . $coursename . "</option>".PHP_EOL;
    }
} 
```

# java - 跨并行继承层次结构访问方法

> ID：13521694
> 
> 赞同：1
> 
> 时间：2012-11-23T00:21:55.597
> 
> 标签：java, oop, inheritance

我已经到处寻找我的简单问题的答案，但我可能只是不理解所提供的解决方案，或者我没有按照正确的条款进行搜索。我有一个并行继承层次结构，有两个抽象基类，每个基类都可能有很多子类。伪UML：

```
 Node -----------> NodeData
        ^                   ^
        |                   |
        |                   |
    SpecialNode -----> SpecialNodeData 
```

由于一个类型的对象`Node`引用了一个类型的对象`NodeData`，当`SpecialNode`想要访问一个唯一的方法时`SpecialNodeData`，它不能。我理解这个错误，但我不确定如何修复它。我很想完全摆脱继承，但不确定如何并且仍然保留功能。我很欣赏任何见解（也许链接到有助于解决此类面向对象设计问题的教程？）

示例代码：

```
interface NodeData {
    // methods
}

class Node {
    protected NodeData data;

    public Node(NodeData data) {
        this.data = data;
}

    // methods that use the generic NodeData
}

class SpecialNodeData implements NodeData {
    int x;

    public SpecialNodeData(int x) {
        this.x = x;
    }

    /* Method unique to SpecialNodeData */
    public int getx() {
        return this.x;
    }

    // methods to implement generic NodeData
}

class SpecialNode extends Node {

    public SpecialNode(int x) {
        super(new SpecialNodeData(x));
    }

    public int getX() {
        return data.getX(); // gives Eclipse a sad face:
                            // "the method getX() is undefined for the type NodeData"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:28:05.370

处理这个问题的方法不止一种。立即想到两个，一个涉及泛型，另一个涉及协变返回类型。我建议后者：

```
class Node {
    // change this:
    private NodeData data;
    // add this:
    protected NodeData getData() {
        return this.data;
    }
}

class SpecialNode extends Node {
    // add this:
    protected SpecialNodeData getData() {
        return (SpecialNodeData)(super.getData());
    }
    // change this:
    public int getX() {
        return getData().getX();
    }
} 
```

这利用了 Java 使用协变返回类型定义覆盖方法的能力。

# jquery - 使用 AJAX 单击链接时从 PHP 文件加载内容

> ID：13521695
> 
> 赞同：0
> 
> 时间：2012-11-23T00:21:58.593
> 
> 标签：jquery, jquery-events

我正在尝试学习 ajax 以从 YQL 中获取结果。

我有“amz”部门。

这是我打算做的，

*   当我单击“amz”部门中的链接时

*   我会得到艺术家的名字并将其发送到 yahoo.php，它接受 $_GET["artist"] 并返回输出。

*   此输出必须使用 id="yah" 进行分区更新

我检查了 Firebug 以查看 GET 是否正常工作，但没有发送任何参数！

来自属性“name”的艺术家姓名警报正在工作，所以没有问题。

我被困住了！我不知道为什么这不起作用，请问有什么建议吗？

PS：这是一个 Facebook 应用程序。估计没什么区别！？

```
 <div id="amz"><!-- some links here --></div>

 $(document).ready(function(){
            $('#amz a').click(function(){               
            alert($(this).attr("name")); 
            var value = "artist=" + (this).attr("name");   
            var obj = $.get("yahoo.php",value,function(data){  
            $("#yah").html("data!");  
            alert('Load was performed.');
        })          
        .error(function() { alert("error"); })
        .complete(function() { alert("complete"); });        
        });
      }); 
```

* * *

解决了！问题：将脚本标签放在“head”中将它放在“body”之前并且可以工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:29:16.897

```
$(document).ready(function(){
   $('#amz').click(function() {
      var artistName = 'John';
      $.ajax({
         url: 'artist.php',
         type: 'get',
         data: {
            artist: artistName
         },
         sucess: function(response) {
            $('#yah').html(response);
         }
     });
   });
}); 
```

# email - 被扔进垃圾邮件的电子邮件 - 怎么了？

> ID：13521698
> 
> 赞同：0
> 
> 时间：2012-11-23T00:22:15.150
> 
> 标签：email

我尝试了很多方法来解决这个问题，将邮件扔到 gmail 中的垃圾邮件中......我设置了 Received: from，在它显示在 gmail 中之前，注释“noreply@odsantu.sk via lvps83-169-17-110\. dedicated.hosteurope.de"...现在我不知道，有什么问题...

```
Delivered-To: dobikos@gmail.com
Received: by 10.14.125.5 with SMTP id y5csp282730eeh;
        Thu, 22 Nov 2012 16:08:08 -0800 (PST)
Received: by 10.14.0.198 with SMTP id 46mr6776443eeb.21.1353629288333;
        Thu, 22 Nov 2012 16:08:08 -0800 (PST)
Return-Path: <anonymous@vipfp.eu>
Received: from vipfp.eu (lvps83-169-17-110.dedicated.hosteurope.de. [83.169.17.110])
        by mx.google.com with ESMTPS id a9si9044494eeo.114.2012.11.22.16.08.08
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 22 Nov 2012 16:08:08 -0800 (PST)
Received-SPF: neutral (google.com: 83.169.17.110 is neither permitted nor denied by best guess record for domain of anonymous@vipfp.eu) client-ip=83.169.17.110;
Authentication-Results: mx.google.com; spf=neutral (google.com: 83.169.17.110 is neither permitted nor denied by best guess record for domain of anonymous@vipfp.eu) smtp.mail=anonymous@vipfp.eu
Received: (qmail 13333 invoked by uid 33); 23 Nov 2012 01:08:07 +0100
To: dobikos@gmail.com
Subject: =?UTF-8?B?UG90dnJkZW5pZSBvYmplZG7DoXZreSBsaXN0dSBvZCBTYW4=?=  =?UTF-8?B?dHU=?=
X-PHP-Originating-Script: 0:SendmailMailer.php
MIME-Version: 1.0
X-Mailer: Nette Framework
Date: Fri, 23 Nov 2012 01:08:07 +0100
From: "OdSantu.sk" <noreply@odsantu.sk>
Message-ID: <hyzaah4290@odsantu.sk>
Content-Type: multipart/alternative;
    boundary="--------6p2unvd5n4"

----------6p2unvd5n4
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

.
.
.
contents
.
.
.

----------6p2unvd5n4
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: 8bit

.
.
.
contents
.
.
.

----------6p2unvd5n4-- 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T00:43:33.410

远离垃圾邮件过滤器有点像搜索引擎优化：它是一个移动的目标。

但是一些基础知识：

*   从已知主机名发送而不是随机 IP
*   在内容中包含用户详细信息（例如用户名、名字等）
*   确保 From 和 Reply-to 匹配
*   包括实际文本（空白或图像电子邮件通常显示为垃圾邮件）
*   不要包含看起来像恶搞的链接

有些网站可以跟踪您应该能够在 Google 上找到它们的最新趋势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:56:51.793

```
Received: from vipfp.eu (lvps83-169-17-110.dedicated.hosteurope.de. 
```

您的系统有一个与 HELO 不匹配的通用 rDNS 指针，这可能会触发垃圾邮件过滤器。在您的 vps 控制面板中也将您的 PTR 设置`vipfp.eu`为（或者如果控制面板中没有反向 dns 选项，请告诉您的 vps 主机为您执行此操作）

```
Received-SPF: neutral 
```

考虑添加 SPF

# copy - MS-DOS 命令不起作用（复制和擦除）

> ID：13521699
> 
> 赞同：1
> 
> 时间：2012-11-23T00:22:18.817
> 
> 标签：copy, dos, erase

我已经完成了这个 .bat 文件，将一些贴图和纹理从我的 USB 驱动器复制到阀门安装路径，但它不起作用，为什么？

```
@echo on
COPY \CS-Fix\Maps\*.* %PROGRAMFILES%\Valve\Half-Life\cstrike\maps
COPY \CS-Fix\Textures\*.* %PROGRAMFILES%\Valve\Half-Life\cstrike\
ERASE %PROGRAMFILES%\Valve\Half-Life\cstrike\maps\de_shipment.bsp
pause 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T00:28:16.397

`%PROGRAMFILES%`表示您使用的是 Windows，而不是 MS-DOS。

MS-DOS 是 Microsoft 的 DOS 变体，是 Windows 之前的操作系统。

无论如何，我疲倦的眼睛明显有两个主要问题：

*   可能有空格且未引用的路径。

*   可能没有对相关文件夹的写访问权限。

要解决第一个问题，请引用路径。

第二个问题只是 Windows Vista 及更高版本中的问题。

您可以通过从提升的命令提示符运行批处理文件来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:27:44.500

我假设批处理文件位于您的拇指驱动器上并正在运行。

需要引用路径吗？

```
@echo on
COPY "\CS-Fix\Maps\*.*" "%PROGRAMFILES%\Valve\Half-Life\cstrike\maps"
COPY "\CS-Fix\Textures\*.*" "%PROGRAMFILES%\Valve\Half-Life\cstrike\"
ERASE "%PROGRAMFILES%\Valve\Half-Life\cstrike\maps\de_shipment.bsp"
pause 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T00:26:27.607

你可能需要引用一些东西。%PROGRAMFILES% 可能会扩展到 C:\Program Files。尝试这样的事情：

```
@echo on
COPY "\CS-Fix\Maps\*.*" "%PROGRAMFILES%\Valve\Half-Life\cstrike\maps"
COPY "\CS-Fix\Textures\*.*" "%PROGRAMFILES%\Valve\Half-Life\cstrike\"
ERASE "%PROGRAMFILES%\Valve\Half-Life\cstrike\maps\de_shipment.bsp"
pause 
```

# python - Python重新加载错误

> ID：13521700
> 
> 赞同：0
> 
> 时间：2012-11-23T00:22:38.467
> 
> 标签：python, python-idle

我在 IDLE 中使用 Python，并且有一行`reload(sim_map_training)`. 但是，当我运行该文件时，它会显示`NameError: name 'sim_map_training' is not defined`，即使我确定我`sim_map_training.py`在与该文件相同的目录中有一个文件。我真的很困惑..可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:27:31.703

`sim_map_training`您正在重新加载的上下文中的名称必须引用该模块。只是写

```
import sim_map_training  # =  sim_map_training = sys.modules['sim_map_training']
reload(sim_map_training) 
```

会做。

# c - strerror 描述字符串

> ID：13521702
> 
> 赞同：10
> 
> 时间：2012-11-23T00:22:52.133
> 
> 标签：c, linux

C 函数`strerror`返回错误描述字符串，详见[**此处**](http://tutorialspoint.com/ansi_c/c_strerror.htm)。示例字符串

```
没有相应的文件和目录

```

问题是这些字符串在哪里定义？我浏览了我的头文件并没有看到任何东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T00:34:17.247

包含错误消息的头文件名为[`errmsg.h`](https://www.student.cs.uwaterloo.ca/~cs350/common/os161-src-html/errmsg_8h-source.html)

```
00012 const char *const sys_errlist[] = {
00013         "Operation succeeded",        /* 0 */
00014         "Invalid argument",           /* EINVAL */
00015         "Bad memory address",         /* EFAULT */
00016         "String too long",            /* ENAMETOOLONG */
00017         "Out of memory",              /* ENOMEM */
00018         "Input/output error",         /* EIO */
00019         "No such file or directory",  /* ENOENT */
00020         "Not a directory",            /* ENOTDIR */
00021         "Is a directory",             /* EISDIR */
00022         "File or object exists",      /* EEXIST */
00023         "Cross-device link",          /* EXDEV */
00024         "Try again later",            /* EAGAIN */
00025         "Illegal seek",               /* ESPIPE */
00026         "Unimplemented feature",      /* EUNIMP */
00027         "Device not available",       /* ENXIO */
00028         "No such device",             /* ENODEV */
00029         "Device or resource busy",    /* EBUSY */
00030         "Invalid/inappropriate ioctl",/* EIOCTL (ENOTTY in Unix) */
00031         "Directory not empty",        /* ENOTEMPTY */
00032         "Result too large",           /* ERANGE */
00033         "No space left on device",    /* ENOSPC */
00034         "Too many open files",        /* EMFILE */
00035         "Too many open files in system",/* ENFILE */
00036         "No such system call",        /* ENOSYS */
00037         "File is not executable",     /* ENOEXEC */
00038         "Argument list too long",     /* E2BIG */
00039         "Bad file number",            /* EBADF */
00040 }; 
```

如您所见，它取决于 libc 实现。但总体思路是相同的：某个数组包含从错误号到最大长度为 1024 字节的字符串的映射。

其他实现：

*   [http://emmanuel.varoquaux.free.fr/xos/viewfile.php?file=xos/usr/lib/libc/sys_errlist.c](http://emmanuel.varoquaux.free.fr/xos/viewfile.php?file=xos/usr/lib/libc/sys_errlist.c)
*   [http://cristi.indefero.net/p/uClibc-cristi/source/tree/07439d8df31d7fefe82ff127a1690193a34e9060/libc/string/sys_errlist.c](http://cristi.indefero.net/p/uClibc-cristi/source/tree/07439d8df31d7fefe82ff127a1690193a34e9060/libc/string/sys_errlist.c)

*   [http://fossies.org/dox/glibc-2.16.0/stdio-common_2errlist_8c_source.html](http://fossies.org/dox/glibc-2.16.0/stdio-common_2errlist_8c_source.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-23T00:31:33.917

它们被定义在 C 库中的某个地方，通常在一个`char*`名为`sys_errlist`length的全局数组中`sys_nerr`，至少在 Unix 系统上是这样。

因为以前编写的遗留程序`strerror`是标准化的，可以直接访问这个数组，所以即使在现代 GNU/Linux 和 Mac OS X 上仍然可以使用它以实现向后兼容性（尽管你真的不应该通过`perror`or访问它`strerror`）。

例如，这是[Mac OS X 10.8.2 对`sys_errlist`](http://opensource.apple.com/source/Libc/Libc-825.25/gen/errlst.c).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T00:26:23.220

它们通常很可能被定义并嵌入到您的 C 运行时库中，例如大多数类 unix 系统上的 libc。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T00:26:39.680

至少在一个典型的库中，它们将位于一个链接的目标文件中——通常是`strerror.o`（或`.obj`等）。如果你足够关心的话，稍微浏览一下库的源代码应该会打开它们。

# vb.net - 奇怪的运行时问题 VB.net

> ID：13521712
> 
> 赞同：0
> 
> 时间：2012-11-23T00:24:48.757
> 
> 标签：vb.net, winforms

我正在完成的 VB.net 程序存在以下问题。基本上我有两种形式。**Form1**和**技术人员**。表格 1 首先加载，是我的“主”页面。我想在**Form1**上引用 techs 中的变量。我公开声明了这个变量：

```
 Public jobID As String 
```

然后我在 Form1 上这样引用它：

暗淡作业作为字符串 = techs.jobID

这是我得到的错误：

```
An error occurred creating the form. See Exception.InnerException for details.  The error is: An error occurred creating the form. See Exception.InnerException for details.  The error is: The form referred to itself during construction from a default instance, which led to infinite recursion.  Within the Form's constructor refer to the form using 'Me.' 
```

谁能告诉我这里出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:42:05.710

尝试改变

```
Public jobID As String 
```

至

```
Public Shared jobID As String 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T00:55:14.447

实例化第一技术

```
Dim newtechs As New techs() 
```

然后，将 techs.jobID 分配给 Form1 下的字符串变量

```
Dim job As String = newtechs.jobID 
```

# objective-c - 将 NSString 与常量 #define 字符串进行比较：isEqualToString 或 ==？

> ID：13521715
> 
> 赞同：0
> 
> 时间：2012-11-23T00:25:06.477
> 
> 标签：objective-c, ios, nsstring

如果我需要将 NSString 属性与由 定义的常量字符串进行比较`#define`，我可以使用双等号吗？

我知道这`isEqualToString:`可行，但只是想知道是否`==`也可行，例如以下两种情况：

场景一：

```
#define BLA @"BLA"
NSString *str1 = BLA;
BOOL equal = self.someStr == BLA; 
```

场景二：

```
#define BLA @"BLA"
NSString *str1 = @"BLA";
BOOL equal = self.someStr == BLA; 
```

他们是一样的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T00:29:51.243

`==`并且`isEqualToString:`永远不一样。虽然`==`有时可能表现得好像它正在检查字符串中的实际字符，但这完全是偶然的。LLVM 编译器对字符串常量进行了大量优化，但是 LLVM 优化是一个实现细节，随时可能发生变化。

`isEqualToString:`- 比较字符串中的单个字符。 `==`- 直接指针比较。仅当两个`NSString`对象实际上是位于相同确切内存位置的相同实例时，才返回 true。

编辑：`#define`语句在编译器运行之前被评估（它们在预处理器中被评估）。`#define`语句进行直接搜索和替换，因此放置相同的东西而不是 a`#define`是完全相同的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T00:33:38.463

`==`比较两个地址是否相同。在某些特定情况下，两个短字符串可能就是这种情况，但并不可靠。

`isEqualToString:`实际上将字符串相互比较。

# linux - 在 bash 脚本中

> ID：13521723
> 
> 赞同：0
> 
> 时间：2012-11-23T00:26:28.590
> 
> 标签：linux, bash, unix, while-loop

我正在制作一个 bash 脚本。目标是：执行程序等待几秒钟重置程序并重复该过程。我做了2个脚本，但我不知道错误在哪里......

```
 #!/bin/bash
while true; 
do 
seg=`date +%M`;
if [[ "$seg" -eq "30" ]]; 
then killall sox;
echo "reset"; 
fi
done 
```

bash：错误 sintáctico cerca del elemento inesperado `;'

```
#!/bin/bash
while true;
do
nice -n-10 sox -q -V0 --multi-threaded -t alsa hw:2,0 -t alsa pcm.default && 
done 
```

bash：错误 sintáctico cerca del elemento inesperado `done'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:32:08.407

**脚本 #1 的问题：**

表示法`;`是在同一行上一个接一个地运行多个命令。Bash 语法要求`while`and`do`在单独的行上（与`if ...`and相同`then`，并由`;`if 在同一行上分隔。命令语句通常不会`;`以 bash 中的字符结尾。

更改您的代码：

```
#!/bin/bash
while true; 
do 
seg=`date +%M`;
if [[ "$seg" -eq "30" ]]; 
then killall sox;
echo "reset"; 
fi
done 
```

到：

```
#!/bin/bash
while true
do 
    seg=`date +%M`
    if [[ "$seg" -eq "30" ]]; then
        killall sox
        echo "reset"
    fi
done 
```

* * *

**脚本 #2 的问题：**

`&`表示将命令作为后台进程运行。`&&`用于条件命令链，如：“如果前面的命令`&&`成功，则运行后面的命令`&&`”

更改自：

```
#!/bin/bash
while true;
do
nice -n-10 sox -q -V0 --multi-threaded -t alsa hw:2,0 -t alsa pcm.default && 
done 
```

到：

```
#!/bin/bash
while true
do
    nice -n-10 sox -q -V0 --multi-threaded -t alsa hw:2,0 -t alsa pcm.default &
done 
```

# c# - 后缀计算器

> ID：13521724
> 
> 赞同：4
> 
> 时间：2012-11-23T00:26:36.433
> 
> 标签：c#, postfix-notation

用 C 语言制作一个控制台应用程序，通过利用堆栈来解决后缀表示法中的表达式，例如：

表达式：43+2* 答案：14

到目前为止我所做的：

```
using System;
using System.Collections;
using System.Linq;
using System.Text;

namespace ConsoleApplication7
{
class Program
{
    static void Main(string[] args)
    {
        string input = "23+";
        int counter = 0;
        Stack values = new Stack();

        while (counter < input.Length)
        {
            int temp1,
                temp2,
                answer;

            char x = char.Parse(input.Substring(counter, 1));

            if (  );
            else if (x == '+')
            {
                temp1 = (int)values.Pop();
                temp2 = (int)values.Pop();

                values.Push(answer = temp1 + temp2);
            }
            else if (x == '-')
            {
                temp1 = (int)values.Pop();
                temp2 = (int)values.Pop();

                values.Push(answer = temp1 - temp2);
            }
            else if (x == '*')
            {
                temp1 = (int)values.Pop();
                temp2 = (int)values.Pop();

                values.Push(answer = temp1 / temp2);
            }
            else if (x == '/')
            {
                temp1 = (int)values.Pop();
                temp2 = (int)values.Pop();

                values.Push(answer = temp1 * temp2);
            }

            counter++;

        }
        Console.WriteLine(values.Pop());
    }
} 
```

对于 if 语句，我可以使用什么作为条件来检查 x 是否为操作数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:19:13.583

您的示例输入是 2、3、+（等于 5）还是 23、+（无效输入）？我假设前者。那么，你会如何写两位数呢？您当前的方法似乎不支持这一点。我认为您不应该逐个字符地解析这个字符，而是首先将其拆分为单独的组件，也许使用识别数字和标点符号的正则表达式。举个简单的例子：`Regex.Matches("10 3+", @"(\d+|[\+\-\*/ ])")`拆分成`10`, `, `3`, 和`+`, 可以用你已有的代码很容易地解析和理解, (空格应该被忽略;它们只是我用来分隔数字的标点符号, 这样你就可以拥有多个-digit numbers) 和[`int.TryParse`](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)(or `double`，这需要更复杂的正则表达式模式，请参阅[匹配浮点数](http://www.regular-expressions.info/floatingpoint.html)对于该模式）查看输入是否为数字。`

 `您应该使用 a[`Stack<int>`](http://msdn.microsoft.com/en-us/library/3278tedw.aspx)来避免强制转换并使其在编译时安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:31:45.443

这肯定是错误的：

```
((int)Char.GetNumericValue(x) <= 0 && (int)Char.GetNumericValue(x) >= 0) 
```

我认为应该是

```
((int)Char.GetNumericValue(x) <= 9 && (int)Char.GetNumericValue(x) >= 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T05:48:49.077

我真的认为这更像是一次代码审查，但还是这样吧——首先：请**分开一些关注点**——你把所有东西都烤成了一个大杂烩——想想问题的各个部分，然后把它们放在不同的方法中开始。

然后：如果您无法解决孔问题，请先将其缩小：让用户为零件输入某种分隔符，或者现在假设他这样做了 - 空间就可以了。您可以稍后考虑如何处理没有前缀/后缀空格的运算符。所以尝试解析“2 3 +”而不是“23+”或“2 3+”......如果你这样做，你确实可以`String.Split`让你的生活更轻松！

至于如何识别操作数：非常容易 - 尝试`Double.TryParse`它会告诉您是否传递了一个有效数字，而您不必浪费时间自己解析数字

而不是在那里使用一段时间，您应该使用 for 甚至更好的 foreach - 哎呀，您甚至可以使用 LINQ 执行此操作`[Enumerable.Aggregate][1]`并获得 FUNctional :D

最后......如果开关完成这项工作，请不要使用这个 if/then/else mess ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T09:07:57.420

你可以说基本上*没有*操作数。甚至可以将数字视为将堆栈顶部乘以 10 并添加数字值的运算符；根据需要累积多个数字的值。然后，您只需要一个运算符，通过将零压入堆栈（可能是一个空格字符）来播种它。

[http://blogs.msdn.com/b/ashleyf/archive/2009/10/23/tinyrpn-calculator.aspx](http://blogs.msdn.com/b/ashleyf/archive/2009/10/23/tinyrpn-calculator.aspx)`

# c++ - BulletPhysics“setLinearVelocity”不动

> ID：13521730
> 
> 赞同：4
> 
> 时间：2012-11-23T00:27:39.590
> 
> 标签：c++, bulletphysics

我正在尝试使用 OpenGL 和 BulletPhysics 创建一个具有 RigidBody 的 FPS 播放器。唯一的问题是让盒子移动。我尝试使用 setLinearForce、applyForce 和许多其他方法，但就是不想移动。它仍然对碰撞做出响应，但如果它因为碰撞而移动（我正在扔一个球来测试它的物理特性）并且我按下键盘上的任何移动按钮，它就会停止。如果它是静止的，我按下按钮让它移动它就不会反应（保持静止）。

这是播放器的课程。

```
#ifndef PLAYER_H
#define PLAYER_H

#include <iostream>
#include <vector>

//BulletPhysics
#include "Bullet\src\btBulletDynamicsCommon.h"

//SDL and OpenGL
#include "Link\GLUT\include\glut.h"
#include "Link\GLUT\include\GL.h"
#include "Link\GLUT\include\GLU.h"
#include "Link\SDL\include\SDL.h"

using namespace std;

class Player
{
public:
    btRigidBody* body;
    btTransform t;
    btMotionState* motion;

    Player();
    ~Player();
    void init(btDynamicsWorld* world, float x, float y, float z, float mass);
    void RefreshPosition(float x, float z);
    void Render();
    void FreeMemory(btDynamicsWorld* world);
};

Player::Player(){}
Player::~Player(){}

void Player::init(btDynamicsWorld* world, float x, float y, float z, float mass)
{
    t.setIdentity();
    t.setOrigin(btVector3(x,y,z));
    btBoxShape* obj=new btBoxShape(btVector3(3/2.0, 7/2.0, 3/2.0));
    btVector3 inertia(0,0,0);
    if(mass!=0.0)
        obj->calculateLocalInertia(mass,inertia);

    motion=new btDefaultMotionState(t);
    btRigidBody::btRigidBodyConstructionInfo info(mass,motion,obj,inertia);
    body=new btRigidBody(info);

    body->forceActivationState(DISABLE_DEACTIVATION);
    body->setAngularFactor(0.0);
    body->setSleepingThresholds(0.0, 0.0);

    world->addRigidBody(body);  
}

void Player::RefreshPosition(float x, float z)
{
    body->getMotionState()->getWorldTransform(t);

    Uint8* state=SDL_GetKeyState(NULL);
    if(state[SDLK_w])
    {
        body->setLinearVelocity(btVector3(x*20, body->getLinearVelocity().y(), z*20));
    }

    body->getMotionState()->setWorldTransform(t);
    body->setCenterOfMassTransform(t);
}

void Player::Render()
{
    if(body->getCollisionShape()->getShapeType()!=BOX_SHAPE_PROXYTYPE)
        return;
    glColor3f(0.0, 1.0, 0.0);
    btVector3 extent=((btBoxShape*)body->getCollisionShape())->getHalfExtentsWithMargin();
    btTransform t;
    body->getMotionState()->getWorldTransform(t);   
    float mat[16];
    t.getOpenGLMatrix(mat);

    glPushMatrix();
        glMultMatrixf(mat); 
        glBegin(GL_QUADS);
            glVertex3f(-extent.x(), extent.y(), -extent.z());
            glVertex3f(-extent.x(), -extent.y(), -extent.z());
            glVertex3f(-extent.x(), -extent.y(), extent.z());
            glVertex3f(-extent.x(), extent.y(), extent.z());
        glEnd();
        glBegin(GL_QUADS);
            glVertex3f(extent.x(), extent.y(), -extent.z());
            glVertex3f(extent.x(), -extent.y(), -extent.z());
            glVertex3f(extent.x(), -extent.y(), extent.z());
            glVertex3f(extent.x(), extent.y(), extent.z());
        glEnd();
        glBegin(GL_QUADS);
            glVertex3f(-extent.x(), -extent.y(), -extent.z());
            glVertex3f(extent.x(), -extent.y(), -extent.z());
            glVertex3f(extent.x(), -extent.y(), extent.z());
            glVertex3f(-extent.x(), -extent.y(), extent.z());
        glEnd();
        glBegin(GL_QUADS);
            glVertex3f(-extent.x(), extent.y(), -extent.z());
            glVertex3f(extent.x(), extent.y(), -extent.z());
            glVertex3f(extent.x(), extent.y(), extent.z());
            glVertex3f(-extent.x(), extent.y(), extent.z());
        glEnd();
        glBegin(GL_QUADS);
            glVertex3f(-extent.x(), extent.y(), -extent.z());
            glVertex3f(-extent.x(), -extent.y(), -extent.z());
            glVertex3f(extent.x(), -extent.y(), -extent.z());
            glVertex3f(extent.x(), extent.y(), -extent.z());
        glEnd();
        glBegin(GL_QUADS);
            glVertex3f(-extent.x(), extent.y(), extent.z());
            glVertex3f(-extent.x(), -extent.y(), extent.z());
            glVertex3f(extent.x(), -extent.y(), extent.z());
            glVertex3f(extent.x(), extent.y(), extent.z());
        glEnd();
    glPopMatrix();
}

void Player::FreeMemory(btDynamicsWorld* world)
{
    world->removeCollisionObject(body);
    delete body->getMotionState();
    delete body->getCollisionShape();
}

#endif 
```

好的，这就是课程。请注意，RefreshPosition 有两个参数：x 和 z 位置（我不想更改 y 位置）。这两个变量代表玩家的方向（0 到 1），乘以 20 得到速度（最大值 = 20）。

我希望我给了你足够的信息......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-19T20:19:43.370

也许该对象变得不活跃，然后它不再移动。然后你必须再次激活它（在文档中搜索如何使用 setActivationState() 方法激活刚体）

当对象几乎停止时，它们会被停用。然后它们不会再次激活，直到另一个对象向它们施加力或者您以编程方式执行它。

# java - Java：像在 JavaScript 中一样将函数作为参数传递？

> ID：13521731
> 
> 赞同：3
> 
> 时间：2012-11-23T00:27:41.173
> 
> 标签：java

我正在尝试编写一个函数，因此我可以将一个函数作为参数传递，例如

```
public class HashFunction {
    private Function f;
    public HashFunction(Function f) {
        this.f=f;
    }
    public Integer hash(String s){
        return f(s);
    }
} 
```

所以我可以写代码

```
new HashFunction(function(String s){ return s.charAt(0)+0; }); 
```

就像在 javascript 中一样。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T00:46:01.460

与许多其他现代语言不同，目前 java 在语法上不支持“浮动代码块”（称为[*闭包*](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)）。

然而，这个*概念*可以通过使用[匿名类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)来实现，匿名类是“运行中”的实现声明，通常实现一个[接口](http://en.wikipedia.org/wiki/Interface_%28Java%29)，但也可以扩展一个类。

以下是您在 java 中编写示例的方法：

```
public interface Hasher {
    int getHash(String s);
}

public class HashFunction {
    private Hasher f;
    public HashFunction(Hasher f) {
        this.f=f;
    }
    public Integer hash(String s){
        return f(s);
    }
} 
```

然后使用：

```
new HashFunction(new Hasher() {
    public int getHash(String s) {return s.charAt(0)+0;}
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T00:32:57.427

在 Java 中不可能将函数作为参数传递，除非他们在最近的语言更改中添加了它。

Java 模式是使用所谓的匿名类，它实现具有所需行为的成员方法。

例如，请参阅：

[http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)

或者

[Java 中如何使用匿名（内部）类？](https://stackoverflow.com/questions/355167/how-are-anonymous-inner-classes-used-in-java)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T00:33:52.627

我觉得你可以使用interface，同样的方式like `Comparable`or `Comparator`interface，或者使用注解标记一些函数，然后使用反射调用它们

请检查[这个](https://stackoverflow.com/questions/2186931/java-pass-method-as-parameter)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T00:54:40.347

我只能支持其他答案。基本上，不可能将真正的引用传递给函数，比如在 JavaScript 或 Haskell 中，“一切都是函数”。

但是，如果您想在代码中加入一点“函数式”风格的编程，请查看[http://functionaljava.org/上的“函数式 Java”库](http://functionaljava.org/)

也许看看[Scala](http://scala-lang.org)也会有所帮助，因为它在 JVM 中运行，并且是一种非常成熟、即将到来的现代编程语言。在 Scala 中，您可以传递函数，它也可以与您现有的 Java 代码互操作。（有函数、函子、单子、列表推导......）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T01:22:54.790

函数在java中称为方法。你可以通过他们！
但这是高级java。使用 java.lang.reflection.Method 传递一个方法。
但是您不会对这种技术感到满意。

# javascript - 它不会悬停或让我单击画廊中的图像

> ID：13521733
> 
> 赞同：0
> 
> 时间：2012-11-23T00:27:48.800
> 
> 标签：javascript, jquery, css, hover, image

由于我已将这种裁剪效果 (http://jsfiddle.net/BPEhD/2/) 添加到画廊中的图像中，因此图像上没有悬停状态，也不会让点击它们。当我将鼠标悬停在它们上时会出现指针光标，但是当我单击它时它不会调出面板。我该如何解决这个问题？

HTML：

```
<div id="thumbsWrapper">
<div id="content">

<p class="crop">
<img src="image1.jpg" alt="image1.jpg"/></p>
<p class="crop">        
<img src="image2.jpg" alt="image2.jpg"/></p>
<p class="crop"> 
<img src="image1.jpg" alt="image1.jpg"/></p>

<div class="placeholder"></div>
</div>
</div>
<div id="panel">
<div id="wrapper">
<a id="prev"></a>
<a id="next"></a>
</div>
</div> 
```

CSS：

```
#thumbsWrapper{
position:relative;
height:100%;
width:100%;
left:0px;
right:0px;
}
#content{
position:relative;
height:100%;
width:100%;
left:0px;
display:none;
} 
.crop{
float:left;
margin:.5em 10px .5em 0;
overflow:hidden; /* this is important */
position:relative; /* this is important too */
border:1px solid #ccc;
width:200px;
height:200px;
}
.crop img{
position:absolute;
top:-50px;
left:-50px;
}
#content img{
float:left;
margin:5px 0px 5px 5px;
cursor:pointer;
opacity:0.4;
filter:progid:DXImageTransform.Microsoft.Alpha(opacity=40);
}
#panel{
background-color:#ddd;
width:100%;
position:fixed;
bottom:0px;
left:0px;
right:0px;
height:0px;
text-align:center;
z-index:999;
}
#panel img{
cursor:pointer;
position:relative;
border:1px solid #000;
-moz-box-shadow:0px 0px 10px #111;
-webkit-box-shadow:0px 0px 10px #111;
box-shadow:0px 0px 10px #111;
display:none;
} 
```

相关JS：

```
$(function() {
/* this is the index of the last clicked picture */
var current = -1;
/* number of pictures */
var totalpictures = $('#content img').size();
/* speed to animate the panel and the thumbs wrapper */
var speed   = 500;

/* show the content */
$('#content').show();

/*
when the user resizes the browser window,
the size of the picture being viewed is recalculated;
 */
$(window).bind('resize', function() {
    var $picture = $('#wrapper').find('img');
    resize($picture);
});

/*
when hovering a thumb, animate it's opacity
for a cool effect;
when clicking on it, we load the corresponding large image;
the source of the large image is stored as
the "alt" attribute of the thumb image
 */
$('#content > img').hover(function () {
    var $this   = $(this);
    $this.stop().animate({'opacity':'1.0'},200);
},function () {
    var $this   = $(this);
    $this.stop().animate({'opacity':'0.4'},200);
}).bind('click',function(){
    var $this   = $(this);

    /* shows the loading icon */
    $('#loading').show();

    $('<img alt="">').load(function(){
        $('#loading').hide();
        if($('#wrapper').find('img').length) return;
        current     = $this.index();
        var $theImage   = $(this);
        /*
        After it's loaded we hide the loading icon
        and resize the image, given the window size;
        then we append the image to the wrapper
        */
        resize($theImage);

        $('#wrapper').append($theImage);
        /* make its opacity animate */
        $theImage.fadeIn(800);

        /* and finally slide up the panel */
        $('#panel').animate({'height':'100%'},speed,function(){
            /* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:43:12.380

我认为问题在于您用于匹配图像标签的选择器。您正在使用仅选择所选元素的直接子元素的子选择器（请参阅[文档](http://api.jquery.com/child-selector/)）。由于（我猜）您已经`p`在图像周围添加了标签以应用裁剪效果，因此选择器不再返回图像。

尝试按如下方式更新您的代码：

```
$('#content img').hover(function () {
    var $this   = $(this);
    $this.stop().animate({'opacity':'1.0'},200);
} 
```

请注意，这将选择作为内容后代的所有元素`div`（请参阅[文档](http://api.jquery.com/descendant-selector/)），因此，根据您的操作，您可能需要考虑更具体的选择器。

只是一个友好的提示，但一个功能齐全的小提琴展示了这个问题会更容易帮助。

# c++ - 带有迭代器的 QVector 对象构造

> ID：13521745
> 
> 赞同：3
> 
> 时间：2012-11-23T00:28:55.517
> 
> 标签：c++, qt

不可能从像 C++ 向量这样的迭代器构造一个新的 QVector 对象吗？

```
QVector<double> new_vec(vec_old.begin()+100,vec_old.end()) 
```

当我尝试做这样的事情时出现错误。还有什么是从其他 QVector 的一部分构造新 QVector 对象的最佳方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T00:53:07.463

作为一种解决方法，您可以使用`fromStdVector`：

```
auto qv = QVector<double>::fromStdVector(std::vector<double>(
                         vec_old.begin() + 100, vec_old.end())); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T00:33:26.893

根据 Qt 文档，这是不可能的。

[QVector 类参考](http://doc.qt.digia.com/qt/qvector.html)

`QVector`回答你的第二个问题，从 other 的一部分创建一个`QVector`，我相信以下是最好的选择之一：

```
QVector<double> new_vec(vec_old.size-100);
double* dt = vec_old.constData;
dt += 100; // some pointer arithmetic.
new_vec.fill((*dt), vec_old.size-100); 
```

这只会复制从某个指定位置开始直到结束的数据，就像你写的一样。

# javascript - 使用按钮更新表中的特定行

> ID：13521746
> 
> 赞同：0
> 
> 时间：2012-11-23T00:28:59.847
> 
> 标签：javascript, php, mysql, html-table

我有一个显示数据库中所有条目的 html 表，因此每个条目都有一行。

我也有每一行的按钮。

当我单击按钮时，我想编辑与按下的按钮关联的行的值，并获取与该特定行相关的所有值。

```
<html>
<body>
<?php

$user="user";
$password="password";
$database="database";

$username=$_SESSION['username'];

mysql_connect(localhost,$user,$password);
@mysql_select_db($database) or die( "Unable to select database");

$query="SELECT * FROM table";
$result=mysql_query($query);
$num=mysql_numrows($result);

?>

<form id="view_admin" method="post">

<table id="my_table" class= "sample" >

<tr>
<td align="center"><strong><font face="Arial, Helvetica, sans-serif">Id</font></strong></td>
<td align="center"><strong><font face="Arial, Helvetica, sans-serif">Column1</font></strong></td>
<td align="center"><strong><font face="Arial, Helvetica, sans-serif">Status</font></td>
<td align="center"><strong><font face="Arial, Helvetica, sans-serif">Edit Status</font></td>
</tr>

<?php

$i=0;
while ($i < $num) {

$f0=mysql_result($result,$i,"id");
$f1=mysql_result($result,$i,"column1");
$f2=mysql_result($result,$i,"status");

?>

<tr>
<td align="center"><font face="Arial, Helvetica, sans-serif"><?php echo $f0; ?></font></td>
<td align="center"><font face="Arial, Helvetica, sans-serif"><?php echo $f1; ?></font></td>
<td align="center"><font face="Arial, Helvetica, sans-serif"><?php echo $f2; ?></font></td>
<td align="center"><input type="submit" name="approved" value="approve"> <input type="submit" name="refused" value="refuse"> </td>
</tr>

<?php
if (isset($_POST['approved'])) {
$query_update = "UPDATE main SET status='APPROVED' WHERE id ='$f0'";
$result_update=mysql_query($query_update);}
else if (isset($_POST['refused'])) {
$query_update = "UPDATE main SET status='REFUSED' WHERE id ='$f0'";
$result_update=mysql_query($query_update);
}
$i++;
}

mysql_close();

?>

</table>
</form>
</body>
</html> 
```

现在，当我按下按钮时，所有行都会更新。

我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T00:45:10.133

您可以在每个按钮集周围放置一个表单，并添加一个隐藏字段，其中包含要更新的字段的 id。

您还需要删除包装表格的表单标签。

现在只会提交一个 ID 和按下的按钮。

在表中：

```
<form id="view_admin" method="post">
  <input type="hidden" name="f0" value="<?php echo $f0; ?>">
  <input type="submit" name="approved" value="approve">
  <input type="submit" name="refused" value="refuse">
</form> 
```

稍后在 php 中：

```
$f0_submitted = (int) $_POST['f0'];
$query_update = "UPDATE main SET status='APPROVED' WHERE id ='$f0_submitted'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:50:23.387

您可以为每一行使用一个表单标签，并为每一行包含一个隐藏字段“id”。提交表单时，您可以通过在 MySQL 查询中使用“id”来更新当前行的值。

```
UPDATE table SET ... WHERE id = $_POST['id'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T00:53:06.740

首先，我认为您应该检查使用面向对象的 MySQL 命令。你这样做是痛苦的。

查看 ORM DB 层或至少使用 mysqli。[http://www.php.net/manual/en/mysqli.quickstart.statements.php](http://www.php.net/manual/en/mysqli.quickstart.statements.php)

您更新每一行的原因是因为您有一个带有一堆同名按钮的大表单。因此，单击其中任何一个就像单击所有这些。您的条件语句在每个循环中都是正确的。

相反，如果您想坚持在 PHP 中执行此操作，我会根据行的 id 创建提交名称。然后当页面发布并再次加载时，如果发布的值等于当前行 ID，则进行更新。

```
<form...>
  <input type='hidden' name='form_submitted' value='true' />
<?php
while(...)
{
  echo "<tr><td><input type='submit' name='update_{$row_id}' value='Update' /></td></tr>";
  if(!empty($_POST['form_submitted']) && isset($_POST['update_'.$row_id])) ...do update;
}
>? 
```

如果你只想要一个大表单，你可以走这条路，或者你可以为每一行做一个表单，其中隐藏类型和值对应于行 id。

# android - 在 android 2.3.3 中创建这样的按钮

> ID：13521748
> 
> 赞同：0
> 
> 时间：2012-11-23T00:29:02.887
> 
> 标签：android, button, styles

如何在 android 2.3.3 (Eclipse) 中创建这样的按钮：

![按钮](../Images/e116224b7296931179121f2bce5e6f7a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:30:46.517

您可以使用 HoloEverywhere。这是一个开源

[https://github.com/ChristopheVersieux/HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T00:33:39.923

您可以`ImageView`为此实现，创建具有全息效果的图像并将其`android:src="@drawable/holo_img"`放置在 imageview 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T05:15:45.450

尝试创建自定义按钮，您可以通过在 xml 文件中编码来创建任何形状，例如这里是我创建圆角按钮的代码

```
<?xml version="1.0" encoding="UTF-8"?>
    <shape      xmlns:android="http://schemas.android.com/apk/res/android"
                android:shape="rectangle">

        <solid   android:color="#FFFDD0"/>

        <corners    android:bottomLeftRadius="8dip"
                    android:topRightRadius="8dip"
                    android:topLeftRadius="8dip"
                    android:bottomRightRadius="8dip"
                    />
        <stroke android:width="1px" android:color="#000000" />

    </shape> 
```

根据您的要求更改此代码。

# c++ - 覆盖控制台输出的 operator<< 不适用于成员变量

> ID：13521752
> 
> 赞同：2
> 
> 时间：2012-11-23T00:29:36.193
> 
> 标签：c++, pointers, operator-overloading, iostream, ostream

我有一个 MyList 类，它覆盖`<<`操作员以便能够将自身记录到控制台：

```
class MyList {
public:
    vector<int> *numbers;
};
ostream& operator<<(ostream& os, MyList& l); 
```

执行：

```
ostream& operator<<(ostream& os, MyList& l) {
    for (int i = 0; i < l.numbers->size(); i++) {
        os << l.numbers->at(i);         
    }
    return os;
} 
```

在另一个类中，我有一个 MyList 类型的成员变量，我无法将它打印到控制台。有趣的是，本地 MyList 变量可以正常工作：

```
class A {
public:
    MyList list;
    void someMethod() const;
}; 
```

执行：

```
void A::someMethod() const {
    MyList local;
    // Set up local list.
    cout << "Local:" << local; // OK!
    cout << "Member:" << list; // ERROR!
} 
```

**这是错误消息：**

```
Invalid operands to binary expression ('basic_ostream<char,
std::__1::char_traits<char>>' and 'const MyList') 
```

Xcode 的自动修复建议参考`list`：

```
cout << "Member:" << &list; 
```

这将编译，但（显然）它打印的地址`list`而不是我的内容。我不明白这两个变量在操作员方面有什么区别`<<`。有人能解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T00:32:21.637

我不认为这是您的真实代码，但这是我的猜测：

```
ostream& operator<<(ostream& os, const MyList& l)
//                                 |
//                             note const 
```

要么是那个，要么是一些非常愚蠢的东西，比如忘记尾随`;`：

```
class A {
public:
    MyList list;
    void someMethod();
};  // <------- here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T00:34:18.217

看来，您`const`在几个地方省略了 a ：就目前而言，您的代码应该没问题。但是，如果您有`const`成员函数，则成员是`const`并且您不能将非`const`引用绑定到`const`对象。因此，输出运算符通常被声明为将`const&`第二个参数作为第二个参数：

```
std::ostream& operator<< (std::ostream& os, MyList const& l) {
    ...
} 
```

# google-chrome - chrome.webstore.install(); 不在经过验证的网站上工作

> ID：13521759
> 
> 赞同：1
> 
> 时间：2012-11-23T00:30:51.123
> 
> 标签：google-chrome, google-chrome-extension, chrome-web-store

当我尝试使用 chrome.webstore.install(); 在我经过验证的网站上为我的 chrome 扩展程序运行，它返回此错误

> 安装只能由 Chrome 网上应用店项目的已验证站点启动

即使该网站是该项目的经过验证的网站。

我确实在 head 标签中有指向该项目的链接：

```
<link rel="chrome-webstore-item" href="https://chrome.google.com/webstore/detail/oogdogaijchgbmakknkjcmimfgdpodil"> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:46:22.723

如果您验证域的所有权（例如[http://example.com](http://example.com)），您**只能**从任何子域或页面（例如[http://app.example.com](http://app.example.com)或[http://example. com/page.html](http://example.com/page.html) )。检查此验证。对 picbox.us 进行域验证后，您需要创建一个默认页面，例如[picbox.us\index.html](https://picbox.us/index.html)并将您的所有内容发布到那里，以运行 chrome 内联安装。

![在此处输入图像描述](../Images/2ecd6b096f764575474672412d98355b.png)

# android - 在 Play 商店中找不到我的 Android 应用

> ID：13521760
> 
> 赞同：1
> 
> 时间：2012-11-23T00:31:01.403
> 
> 标签：android, google-play

大约半小时前，我刚刚将我的第一个应用程序发布到了 Android 市场（非常激动，真的，但这既不是这里也不是那里：p）。我遇到的问题是我在 Playstore 上找不到它。我已经在我的电脑上搜索了所有选择的设备，以及我的手机和平板电脑——我在发布之前用它来测试应用程序。

我试过直接访问[https://play.google.com/store/apps/details?id=com.ptrprograms.asteroidbelt的链接](https://play.google.com/store/apps/details?id=com.ptrprograms.asteroidbelt)

如果有必要，我也可以提供我的清单文件。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:32:05.933

通过他们的系统传播需要一段时间。等几个小时，它就会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:35:42.100

你什么时候发布你的应用程序？考虑到有许多应用程序可能具有相似的名称，因此您必须向下滚动许多页面，并且需要大量时间才能使应用程序可用。尝试在不超过 3 天内使用您的帐户名搜索该应用程序。也许明天......我的朋友也有同样的问题，他们只是等着。

# php - 如何在 PHP 中使用三元运算符嵌套 if 和 else 语句？

> ID：13521761
> 
> 赞同：1
> 
> 时间：2012-11-23T00:31:00.547
> 
> 标签：php

我对使用这个三元运算符感到困惑，我可以很容易地获得 1 级 if 和 else 例如

```
($blah == $blah) ? blahblah : blahblahblah; 
```

但是如果条件是这样呢？

```
if($blah == blah1)
{ 
  echo $blah1;
}
else if($blah == blah2)
{
 echo $blah2;
}
else
{
 echo $blah;
} 
```

如何使用三元运算符进行转换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T00:33:01.973

```
<?php echo $blah == 'blah1' ? $blah1 : ($blah == 'blah2' ? $blah2 : $blah); ?> 
```

请注意如何将`else`包裹在括号中。这可以一次又一次地完成，尽管阅读起来会变得混乱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T00:34:12.260

嵌套三元组是个坏主意。提供它们是为了简洁。如果您有嵌套条件，则根据定义，您没有简洁性。

当你有一个简洁的陈述时，有些人甚至不喜欢使用它们。`if`就个人而言，我发现以下内容比基于 - 的替代方案更清晰易读。

```
echo $success ? 'Success' : 'Failure'; 
```

但我会犹豫做任何比这更复杂的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T00:34:22.527

($blah == $blah1) ？$blah1 : (($blah == $blah2) ? $blah2 : $blah);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T00:34:24.410

它会变成：

```
echo (($blah == $blah1) ? $blah1 : (($blah == blah2) ? $blah2 : $blah); 
```

# vb.net - Microsoft Report Viewer 2012 渲染和速度问题

> ID：13521764
> 
> 赞同：1
> 
> 时间：2012-11-23T00:31:38.127
> 
> 标签：vb.net, reportviewer

我有一个引用 Microsoft 报表查看器的 VB.Net 应用程序。

[我从http://www.microsoft.com/en-us/download/details.aspx?id=35747](http://www.microsoft.com/en-us/download/details.aspx?id=35747)安装了 Microsoft Report Viewer 2012 运行时

我添加了对已安装 dll 的引用，并在我的项目中删除了以前的 dll。

现在，当我查看报告时，渲染速度非常慢。有些报告过去需要 1 秒，现在需要 30 秒。渲染也缺少一些文本。

# php - Obj-C 中的正确常量

> ID：13521766
> 
> 赞同：0
> 
> 时间：2012-11-23T00:31:46.463
> 
> 标签：php, objective-c, constants

我似乎很难理解如何在 Objective-C 中使用 Class static consts。

我来自 PHP 背景，我真正想做的是相当于：

**我的对象.php**

```
<?
class MyObject {

    const A_VALUE = 1;
    const ANOTHER_VALUE = 2;

}
?> 
```

哪个可以像

```
MyObject::A_VALUE 
```

在课堂上像

```
self::A_VALUE 
```

我想在 Obj-C 中复制这种行为，但我知道语法有很大不同。

在 Objective-C 中

我想它看起来会类似于这个

**我的对象.h**

```
static int A_VALUE = 1;
static int ANOTHER_VALUE = 2;

@interface MyObject : NSObject; 
```

这在技术上有效，但它会引发大量关于未使用变量的警告

然而

**我的对象.h**

```
static NSString *A_VALUE = @"1";
static NSString *ANOTHER_VALUE = @"2";

@interface MyObject : NSObject; 
```

这可以正常工作。尽管没有在任何地方使用。

好吧，我不想使用一大堆字符串，这不仅感觉效率不高（尤其是当有很多字符串时），而且我讨厌查看我的代码并看到一堆

```
if( [value isEqualToString:A_VALUE] ) { 
```

只是。总的。可能会更糟，但是eww。我会选择：

```
if( value == A_VALUE ) { 
```

但是我现在所做的工作，但我有点茫然。

Objective C中制作consts（特别是int）的正确方法是什么

大家加油！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:38:25.710

你应该这样定义你的整数常量：

```
static const NSInteger kYourConstString = 4; 
```

和你的字符串：

```
static NSString *const kYourConstString = @"An example"; 
```

在您的 .m 文件中。该`static`关键字将使变量范围成为编译单元的本地变量：您的 .m 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:39:51.030

或者使用`enum`for`int`和`#define`for 字符串。

# javascript - 谷歌地图消失而不是更新

> ID：13521772
> 
> 赞同：0
> 
> 时间：2012-11-23T00:32:22.807
> 
> 标签：javascript, jsf-2, google-maps-api-3, primefaces

新加载的页面显示的地图就像定义在`initialize()`. 但是单击`<p:commandButton>`只是使其消失而不是更新位置。完成这项工作的一种解决方法是在 中重新初始化地图`codeAddress()`，但这只是低俗的，因为我看不出它的工作方式与[这里](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)的方式有什么不同。

jsf代码：

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
<h:head>
    <script
        src="https://maps.googleapis.com/maps/api/js?v=3&amp;sensor=false"></script>
</h:head>
<h:body>
    <h:outputScript library="js" name="test.js" />
    <body onload="initialize()" />

    <h:form id="geo">
        <p:inputText id="address" />
        <p:commandButton value="Geocode" oncomplete="codeAddress();"
            update=":geo" />
        <div style="height: 400px; width: 400px; float: right;"
            id="map_canvas"></div>
    </h:form>
</h:body>
</html> 
```

test.js：

```
var geocoder;
      var map;
      function initialize() {
        geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng(53.5510846, 9.99368179999999);
        var mapOptions = {
          zoom: 10,
          center: latlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

      }

      function codeAddress() {
        var address = document.getElementById('geo:address').value;

        geocoder.geocode( { 'address': address}, function(results, status) {
          if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            alert(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });
          } else {
            alert('Geocode was not successful for the following reason: ' + status);
          }

        });
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:03:49.587

我怀疑这是因为页面上重新加载。`return false;`在你的之后添加一个怎么样`oncomplete="codeAddress();`？

喜欢-

`<p:commandButton value="Geocode" oncomplete="codeAddress(); return false;" update=":geo" />`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:39:18.677

Cdeez answer helped me a lot. Replacing the `<h:form>`-code from the question with this did the trick:

```
<h:form id="geo">
    <p:inputText id="address" />
    <p:commandButton value="Geocode" oncomplete="codeAddress(); return false;" ajax="false"/>
</h:form>
    <div style="height: 400px; width: 400px; float: right;" id="map_canvas"></div> 
```

It's not great because for this solution I had to drop using ajax, but at least it works in a way. I am still open to better solutions.

# linux - 从 shell 脚本、cron 作业启动服务（新贵）

> ID：13521774
> 
> 赞同：1
> 
> 时间：2012-11-23T00:32:36.177
> 
> 标签：linux, shell, cron, centos, upstart

我正在尝试使用 cron 作业来调用我编写的运行状况检查脚本来检查我编写的 Web 应用程序 (api) 的状态（url 调用不足以测试全部功能，因此自定义运行状况检查）。健康检查应用程序有几个从 shell 脚本调用的端点（见下文），这个脚本重新启动我们正在检查的更大的网络应用程序。自然，我遇到了麻烦。

它是如何工作的：1）cron 作业每 60 秒运行一次 2）healthcheck 脚本由 cron 作业运行 3）healthcheck 脚本检查 url，如果 url 返回非 200 响应，它将停止并启动服务

什么有效：1）我可以以 ec2 用户身份运行脚本（healthcheck.sh） 2）我可以以 root 身份运行脚本 3）cron 作业调用脚本并运行，但它不会停止/启动服务（我可以通过观看 /tmp/crontest.txt 和 ps aux 看到这一点）。

这似乎完全是一个权限问题或一些我不知道的非常基本的 linux 问题。

* * *

我以 root 或 ec2-user (/tmp/crontest.txt) 运行时的日志：

```
Fri Nov 23 00:28:54 UTC 2012
healthcheck.sh: api not running, restarting service!
api start/running, process 1939 <--- it restarts the service properly! 
```

cron作业运行时的日志：

```
Fri Nov 23 00:27:01 UTC 2012
healthcheck.sh: api not running, restarting service! <--- no restart 
```

cron 文件（在 /etc/cron.d 中）：

```
# Call the healthcheck every 60s
* * * * * root /srv/checkout/healthcheck/healthcheck.sh >> /tmp/crontest.txt 
```

Upstart 脚本 (/etc/init/healthcheck.conf) - 这是用于 healthcheck 应用程序的，它提供了我们从 shell 脚本 healthcheck.sh 调用的端点：

```
#/etc/init/healthcheck.conf
description "healthcheck"
author "me"

env USER=ec2-user

start on started network
stop on stopping network

script
    # We run our process as a non-root user
    # Upstart user guide, 11.43.2 (http://upstart.ubuntu.com/cookbook/#run-a-job-as-a-different-user)
    exec su -s /bin/sh -c "NODE_ENV=production /usr/local/bin/node /srv/checkout/healthcheck/app.js" $USER
end script 
```

Shell 脚本权限：

```
-rwxr-xr-x 1 ec2-user ec2-user 529 Nov 23 00:16 /srv/checkout/healthcheck/healthcheck.sh 
```

外壳脚本（healthcheck.sh）：

```
#!/bin/bash

API_URL="http://localhost:4567/api"

echo `date`

status_code=`curl -s -o /dev/null -I -w "%{http_code}" $API_URL`
if [ 200 -ne $status_code ]; then
  echo "healthcheck.sh: api not running, restarting service!"
  stop api
  start api
fi 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T01:10:00.887

将启动/停止命令的路径添加到您的脚本：

```
#!/bin/bash

PATH=$PATH:/sbin/ 
```

或启动和停止命令的完整路径：

```
/sbin/stop api 
```

您可以使用 whereis 检查它们的路径：

```
$ whereis start
/sbin/start 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T00:56:20.663

[在另一个问题](https://stackoverflow.com/questions/6337854/shell-script-doesnt-execute-from-cron-job?rq=1)中找到答案！

基本上 cron 作业在有限的环境中运行，所以在“启动 [服务]”中，找不到启动命令！

修改脚本使其看起来像这样使它工作：

```
#!/bin/bash
PATH="/bin:/sbin:/usr/bin:/usr/sbin:/opt/usr/bin:/opt/usr/sbin:/usr/local/bin:/usr/local/sbin"
... 
```

# arrays - 为什么此代码仅将数组中的单个数据添加到菜单表中

> ID：13521777
> 
> 赞同：0
> 
> 时间：2012-11-23T00:32:58.123
> 
> 标签：arrays, object, joomla, menu

我能够`$data`从表单中获取数组，并且可以为每个项目生成数据......但是在使用 jTable 对象绑定和存储期间，它只保存最新的项目，为什么......我正在使用本机 JTableMenu 类来绑定和保存通过使用我自己的类，该类由本地类扩展。早期试验我使用数据库对象来保存带有 sql 语法的项目，但表的某些列仍然是空的 lft 和 rgt 来填充它们我使用了表对象，但它给出了这个问题。

整个代码如下：

```
function addcumulative($data){
    $db = JFactory::getDBO();
    $component = & JComponentHelper::getComponent('com_dratransport');
    $menus = array();
    $query = array();
    $countries = DraTransportHelperArrays::countries();
    $cities = DraTransportHelperArrays::cities();

    $title = array();
    $alias = array();
    $path  = array();
    $link = array();

    if(empty($data['parent_id']) && $data['parent_id'] == 0){
        $data['parent_id'] = 1;
    }else{
        $parent_id = explode('.',$data['parent_id']);
        $data['parent_id'] = $parent_id[1];
    }

    if(!empty($data['locationQuery'])){ //actually this part will be used
        $loc = ($data['locationQuery'] == 'countries') ? $countries : $cities['Turkey'] ;   

        foreach($loc as $k => $c){
            $query[0] = $data['general'];
            foreach($data as $key => $dat){
                if(!empty($dat) && strpos($key,'Query') !== false){
                    $v = explode('Q',$key);
                    if($v[0] !== 'location'){
                        $query[] = '&'.$v[0].'='.$dat;
                    }else{
                        $query[] = '&'.$dat.'='.$k;
                    }
                }
            }   
            $title[] = $data['viewQuery'].'-'.$k;
            $alias[] = $data['viewQuery'].'-'.$k;
            $path[] = $data['viewQuery'].'-'.$k;                
            $link[] = implode('',$query);
            $query = array();
        }

    }else{
        $query[0] = $data['general'];
        foreach($data as $key => $dat){             
            if(!empty($dat) && strpos($key,'Query') !== false){
                $v = explode('Q',$key);
                $query[] = '&'.$v[0].'='.$dat;
            }
        }
        $link[] = implode('',$query);
    }

    foreach($link as $n => $l){
        $menus[] = array(
                         'menutype'     =>  $data['menutype'],
                         'title'        =>  $title[$n],
                         'alias'        =>  $alias[$n],
                         'path'         =>  $path[$n],
                         'link'         =>  $link[$n],
                         'type'         =>  'component',
                         'published'    =>  1,
                         'parent_id'    =>  $data['parent_id'],
                         'level'        =>  1,
                         'component_id' =>  $component->id,
                         'access'       =>  $data['access'],
                         'params'       =>  $data['params'],
                         'language'     =>  '*'
                    );
    }

    $count = $data['count'] == 0 ? count($loc) : $data['count'];    
    foreach($menus as $menu){
        // Bind the data.
        $table  = $this->getTable();
        $table->bind($menu);                
        $table->store();            
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:23:33.660

是的，你完全正确。假设 $countries=array('England','France','Germany'); 然后我在模型中编写代码以在#__menu 表中生成链接。所以我写

```
foreach($countries as $country){
$link='index.php&option=com_mycomponent&view=members&type=1&countries='.$country;
$table->bind();
$table->save();
} 
```

我正在生成这样的链接，视图和查询中的类型值来自提交的表单，以使除国家/地区以外的所有菜单的参数都相同；我将所有参数分配给 manu 项，并将菜单项作为数组项分配给数组...以保存该表附带的嵌套数据库。

$menus->$each menu as $menus array item->menu item parameters

虽然表是在上面的代码代码中首次创建的，但只是添加了最后一个菜单项，但如果我将它放入 foreach 中，它会添加所有这些，但 parent_id 和 level 参数分配给 0 由本机代码设置，我将它们设置为 1

# git - 将 git 存储库向下移动到层次结构级别

> ID：13521782
> 
> 赞同：9
> 
> 时间：2012-11-23T00:33:35.567
> 
> 标签：git, version-control, repository, hierarchy

我现在已经搜索了几个小时，但即使它看起来是一个简单的问题，也找不到令人满意的答案。我基本上想要完成的是将我当前位于项目文件夹之外的 .git 目录向下移动到项目文件夹中。最佳情况下，这根本不应该改变存储库历史记录，尽管我不知道这是否真的可能。我想这样做的原因是一个与 IDE/项目类型相关的问题，我可以通过这种方式解决。

我感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-23T00:37:39.560

当然只是移动它，然后做一个

```
git add -A
git commit -m "moved project" 
```

在新的根。在数据方面不会有太大的变化。它只是要更改当前提交的树。所有对象都已经存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T00:53:28.540

如果您希望更改您的 git 存储库，使其始终看起来像您的文件位于新路径中，您可以重写类似于[此的历史记录](https://stackoverflow.com/a/3063008/13760)

否则，亚当的答案就是你想要的。

编辑：请注意，如果您或其他任何人可能已经将此存储库用作任何地方的子模块或子树，则不应使用它。

# ruby-on-rails - 删除使用自引用关联添加您的“朋友”

> ID：13521787
> 
> 赞同：1
> 
> 时间：2012-11-23T00:33:56.740
> 
> 标签：ruby-on-rails

我可以实现反向关系，所以如果 UserA 添加了 UserB，那么它会在 B 的配置文件中显示 UserA，反之亦然。但是，如果 UserA 添加了 UserB，我无法弄清楚如何让 UserB 将 UserA 作为朋友删除。我尝试了很多不同的方法，但是每次我更改某些内容时，都会将问题转移到其他地方！我不知道根本问题是否是：

*   一种。FriendshipsControllerdestroy方法是如何定义的
*   湾。我是否需要另一个控制器来专门处理 InverseFriendships 破坏
*   C。如果我需要自定义路线
*   d。如果以上所有内容都可以，但是我在视图中的代码（特别是 _suggested_connections 部分）正在调用错误的控制器和/或路由
*   e. 或以上都不是。

下面的代码片段：

```
class FriendshipsController < ApplicationController

      def destroy
        @friendship = current_user.friendships.find(params[:id])
        @friendship.destroy
        flash[:notice] = "Removed friendship."
        redirect_to current_user
      end 
```

在视图中

```
 <% @user.inverse_friends.each do |inverse_friendship| %>
      <li>
        <%= inverse_friendship.name %>
        <%= link_to "remove", @user.inverse_friendships, :method => :delete, :class => "btn-small btn-danger" %><br />
        <%= image_tag inverse_friendship.avatar(:thumb) %> 
```

我的模型：

```
class Friendship < ActiveRecord::Base
  belongs_to :user
  belongs_to :friend, class_name: 'User'
  attr_accessible :friend_id, :user_id
end 

 class User < ActiveRecord::Base

    has_many :friendships, dependent: :destroy
    has_many :friends, through: :friendships
    has_many :inverse_friendships, dependent: :destroy, class_name: "Friendship", foreign_key: "friend_id"
has_many :inverse_friends, through: :inverse_friendships, source: :user 
```

和路线：

```
 resources :friendships

  authenticated :user do
    root :to => 'home#index'
  end
  root :to => "home#index"
  devise_for :users, :controllers => { :registrations => :registrations }
  resources :users 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:16:42.073

您的主要问题是：

> 一种。FriendshipsControllerdestroy方法是如何定义的

您正在寻找`friendship`中的`current_user.friendships`，但它不存在。它在`inverse_friendships`。

您需要检查这两个关联，或者让控制器知道您正在寻找哪一个。后者可能更可取，因为尽管它们是同一类，但它们*是*不同的资源。可能是这样的：

```
# In routes, route inverse friendships to the same controller, but with a
# different path (I'm routing everything here, you may not need that.)
resources :friendships
resources :inverse_friendships, :controller => 'friendships'

# Then in your friendships controller, use the path to determine which 
# collection you're working with:
#
def destroy
  @friendship = collection.find(params[:id])
  # ...
end

# the other collection methods would use the same collection, if you needed them,
# for example:
def create
  @friendship = collection.build(params[:friendship])
  # ..
end

protected

# simple case statement here, but you get the idea
def collection
  case request.path
  when /\/inverse_friendships/ then current_user.inverse_friendships
  else current_user.friendships
  end
end 
```

最后，在您看来，您会走向反向友谊，例如：

```
<%= link_to "remove", inverse_friendship_path(friendship), :method => :delete %> 
```

正常的友谊可以使用较短的形式，或完整的命名路线：

```
<%= link_to "remove", friendship, :method => :delete %>
OR
<%= link_to "remove", friendship_path(friendship), :method => :delete %> 
```

* * *

**编辑：**搜索两个关联。

当然，如果您想保持简单，并且`inverse_friends`作为单独的资源没有其他用途，您可以随时...

```
def destroy
  id, cid = params[:id], current_user.id

  # search both associations (two queries)
  @friendship = current_user.friendships.find_by_id(id) ||
                  current_user.inverse_friendships.find(id)

  # or query friendship looking for both types
  @friendship = Friendship.
                  where("user_id = ? OR friend_id = ?", cid, cid).find(id)

  # ...
end 
```

# jquery - 如何使用jQuery为border-top-right-radius的水平和垂直半径设置动画

> ID：13521795
> 
> 赞同：0
> 
> 时间：2012-11-23T00:34:48.410
> 
> 标签：jquery, css, webkit, jquery-animate

是否可以对此进行动画处理：

```
border-radius: 0 0 120px 120px / 0 0 90px 90px; 
```

对此：

```
border-radius: 120px 120px 0px 0px / 90px 90px 0px 0px; 
```

使用 jQuery？

我尝试了以下方法，但无法使其正常工作：

```
$('div.smile').animate({
    borderTopLeftRadius: "120px 90px",
    borderTopRightRadius: "120px 90px",
    borderBottomLeftRadius: "0px",
    borderBottomRightRadius: "0px"
}); 
```

我意识到这是因为我一次只能为一个属性值设置动画......有什么方法可以分解`borderTopLeftRadius`为它的两个半径分量，例如`borderTopLeftRadiusHorizontal`和`borderTopLeftRadiusVertical`？

我将接受使用纯 jQuery 或 jQuery 插件的方法作为正确答案。

见：http: [//jsfiddle.net/adamtsiopani/9pASU/19/](http://jsfiddle.net/adamtsiopani/9pASU/19/)

非常感谢！:)

# 更新

我认为了解我想要实现的最终结果的上下文在这里很重要......我希望能够根据其他事件动态更改动画的长度/持续时间 - 最好即使是在动画中间即，我希望能够在动画发生之前、之后或期间加速、减慢或停止动画。我不确定这是否可能，或者我是否在做梦，但如果有人可以分享他们的经验，我将不胜感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:29:03.030

您可以使用 css3 和转换：

动画来自：

```
div.smile {
    /* your codes */
    border-radius: 0 0 120px 120px / 0 0 90px 90px;
    -webkit-transition: 2s all;
    -moz-transition: 2s all;
} 
```

至：

```
div.smile.animated {
    border-radius: 120px 120px 0px 0px / 90px 90px 0px 0px;
} 
```

js：

```
$this.find('div.smile').addClass('animated'); 
```

[看到这个](http://jsfiddle.net/9pASU/20/)

# ruby - 改变 activerecord 属性的值

> ID：13521797
> 
> 赞同：0
> 
> 时间：2012-11-23T00:35:30.813
> 
> 标签：ruby, activerecord

我有一个问题，我不确定如何解决它...

假设我有一个类 User < ActiveRecord::Base 并且我有属性 factor:int 这是我的数据库，我可以使用 User.find(x).factor 访问这个属性。

现在，我有另一个表，我已经更改了_attributes，但不是针对所有用户。

所以我想重写属性因子：当changed_attributes中有一个带有用户ID的条目时，User.factor将是新的，如果没有，旧的因子将被返回。

我知道这有效：

```
class User < ActiveRecord::Base
  def factor
    newfact=20
    newfact
  end
end 
```

但我不知道如何访问旧因子变量？谢谢 Dorijan 编辑：我找到了解决方案：read_attribute(:factor)

# flask - Flask + mod_wsgi 在源代码更改时自动重新加载

> ID：13521798
> 
> 赞同：12
> 
> 时间：2012-11-23T00:35:37.187
> 
> 标签：flask, wsgi

有谁知道如何`mod_wsgi`在任何模块发生更改时自动重新加载 Flask 应用程序？我试过`WSGIScriptReloading On`了，但没有运气。[官方文档](http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode)有点像熊......我想如果没有人知道，我会给它一个刺。提前致谢！

此外，如果它不能因语法错误（如 Flask 重新加载器）而永久崩溃，那就太好了。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-28T13:09:02.277

使用`mod_wsgi`,`WSGIScriptReloading`查找对`.wsgi`配置文件的更改，而不是代码。

我的工作流程是上传我的代码更改然后只是

```
$ touch MyWebApp.wsgi 
```

这会导致最后修改的文件时间戳更改并`mod_wsgi` 重新加载代码。

您可以通过将`.wsgi`文件保存在本地计算机上然后再次上传来“远程”执行此操作，或者我只是通过 SSH 执行此操作。

对于语法错误，您无能为力，代码要么正在运行，要么没有，但修复加上 a`touch`将使其再次运行。

如果您通过 FTP 工作，需要注意的一个问题是：确保*最后*`.wsgi`上传“接触”文件，否则它将尝试从错误的代码开始。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:36:33.160

我认为想要在生产中自动重新加载源代码是一个非常现实的情况。考虑一个环境，其中每个版本都部署了源，并且“生产”符号链接指向其中一个版本。每当您想发布较新版本时，只需将符号链接指向另一条路径。但是 apache 和 mod_wsgi 仍然从符号链接目录中收集文件，因此需要根据时间戳、大小或 w/e 建立重新加载机制。当然，一个应用程序可能不是问题，但是托管 15-20 个都在积极开发中的应用程序呢？在这种情况下，与每次重新启动 apache 相比，不自动重新加载源是一种纯粹的损失。

回到问题：如果您使用的框架（在本例中为 flask）没有用于自动重新加载源代码的插件或工具，那么 Graham 和 Malphas 描述的两个选项是您的最佳选择。要么触发 wsgi 进程重启，要么实现监控系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-19T13:20:57.270

您对添加 WSGIScriptReloading 指令是正确的。Flask 文档并没有使其 100% 清楚，但 Apache 会查找对您的 .wsgi 文件的更改。推荐的解决方案是在您的 .wsgi 文件上执行一个触摸命令，作为发布过程的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-17T09:41:49.127

对于生产我也更喜欢 apache mod_wsgi，而对于开发我使用烧瓶的内置服务器。我将 prod 和 dev 配置文件分开，并在 dev 配置中设置`debug`指令`True`，以便 Flask 可以自动检测和重新加载代码更改。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-03-06T18:39:03.773

这个问题的正确答案是`WSGIScriptReloading On`需要将其添加到`000-default.conf`当前`/etc/apache2/sites-enabled`文件夹中。

见下面的例子

```
<VirtualHost *:80>
        # The ServerName directive sets the request scheme, hostname and port that
        # the server uses to identify itself. This is used when creating
        # redirection URLs. In the context of virtual hosts, the ServerName
        # specifies what hostname must appear in the request's Host: header to
        # match this virtual host. For the default virtual host (this file) this
        # value is not decisive as it is used as a last resort host regardless.
        # However, you must set it for any further virtual host explicitly.
        #ServerName www.example.com

        ServerName sentiments.live
        ServerAdmin admin@sentiments.live
        DocumentRoot /var/www/html
        WSGIDaemonProcess flaskapp threads=5
        WSGIScriptAlias / /var/www/html/sentiments/flaskapp.wsgi

        <Directory sentiments>
                WSGIScriptReloading On
                WSGIProcessGroup sentiments
                WSGIApplicationGroup %{GLOBAL}
                Order deny,allow
                Allow from all
        </Directory> 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-23T09:30:13.400

你是什​​么意思'官方文件有点像熊'？包含的食谱有什么问题：

*   [http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode#Monitoring_For_Code_Changes](http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode#Monitoring_For_Code_Changes)

该文档还解释了为什么 WSGIScriptReloading 没有达到您的预期。

不，不可能因为语法错误而永久崩溃。它嵌入在 Apache 中，而 Apache 的全部意义在于保持运行。

听起来您不应该使用 Apache/mod_wsgi 进行开发。每个人都知道不应该在生产中使用自动源代码重新加载，所以无法想象你会想要这样做。*

# facebook - 如何获取喜欢我的网站（不是 facebook 网站）的 facebook 用户 ID

> ID：13521800
> 
> 赞同：1
> 
> 时间：2012-11-23T00:35:45.073
> 
> 标签：facebook, facebook-like

我正在对我的外部网站（非 Facebook）的某篇文章做出“我喜欢”的人进行抽奖。为了选择获胜者，我需要知道是谁制作了我喜欢的。

这个查询： [https://api.facebook.com/method/fql.query?query=select%20like_count%20from%20link_stat%20where%20url=](https://api.facebook.com/method/fql.query?query=select%20like_count%20from%20link_stat%20where%20url=) 'myWEBSITE'&format=json 只给我我喜欢的总数，但不是用户 ID

这个查询是完美的： [https ://api.facebook.com/method/fql.query?query=SELECT%20user_id%20FROM%20like%20WHERE%20object_id%3D%MY_object_ID&access_token=MY_ACCESS_TOKEN](https://api.facebook.com/method/fql.query?query=SELECT%20user_id%20FROM%20like%20WHERE%20object_id%3D%MY_object_ID&access_token=MY_ACCESS_TOKEN)

但是如何获取外部 url 的 OBJECTID？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T05:48:13.743

对象可以是任何东西，如视频、笔记、链接、照片或相册，但不能是任何 FB 页面或 Url。所以我想它不可能获取 URL 的用户 ID。

如果您在您的网站中使用 JS SDK / Like 插件来喜欢它，我认为您可以订阅一个事件，然后在他们立即喜欢它时使用一些 ajax 调用来获取这些用户 ID。

请参阅 Somnath Muluk 在[https://stackoverflow.com/a/13467793/269521中的回答](https://stackoverflow.com/a/13467793/269521)

# bash - 如何对多组线进行排序？

> ID：13521803
> 
> 赞同：3
> 
> 时间：2012-11-23T00:36:21.633
> 
> 标签：bash, sorting

在以下示例中，有 3 个元素需要排序：

1.  "[aaa]" 和它下面的 4 行（总是 4 行）形成一个单元。
2.  "[kkk]" 和它下面的 4 行（总是 4 行）形成一个单元。
3.  "[zzz]" 和它下面的 4 行（总是 4 行）形成一个单元。

只有遵循这种模式的行组才应该被排序；"[aaa]" 之前和 "[zzz]" 的第 4 行之后的任何内容都必须保持不变。

从：

```
This sentence and everything above it should not be sorted.

[zzz]
some
random
text
here
[aaa]
bla
blo
blu
bli
[kkk]
1
44
2
88

And neither should this one and everything below it. 
```

到：

```
This sentence and everything above it should not be sorted.

[aaa]
bla
blo
blu
bli
[kkk]
1
44
2
88
[zzz]
some
random
text
here

And neither should this one and everything below it. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:13:13.927

也许不是最快的:) [1] 但它会做你想做的事，我相信：

```
for line in $(grep -n '^\[.*\]$' sections.txt |
              sort -k2 -t: |
              cut -f1 -d:); do
  tail -n +$line sections.txt | head -n 5
done 
```

这是一个更好的：

```
for pos in $(grep -b '^\[.*\]$' sections.txt |
             sort -k2 -t: |
             cut -f1 -d:); do
  tail -c +$((pos+1)) sections.txt | head -n 5
done 
```

* * *

[1] 第一个在文件中的行数中类似于 O(N^2)，因为它必须一直读取到每个部分的部分。第二个可以立即找到正确的字符位置，应该更接近O（N log N）。

[2] 这让你相信每个部分总是正好有五行（标题加上后面的四行），因此`head -n 5`. 但是，如果有必要的话，用读取到但不包括以“[”开头的下一行的内容替换它真的很容易。

* * *

保留开始和结束需要更多的工作：

```
# Find all the sections
mapfile indices < <(grep -b '^\[.*\]$' sections.txt)
# Output the prefix
head -c+${indices[0]%%:*} sections.txt
# Output sections, as above
for pos in $(printf %s "${indices[@]}" |
             sort -k2 -t: |
             cut -f1 -d:); do
  tail -c +$((pos+1)) sections.txt | head -n 5
done
# Output the suffix
tail -c+$((1+${indices[-1]%%:*})) sections.txt | tail -n+6 
```

您可能希望从中创建一个函数或一个脚本文件，将sections.txt 更改为$1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:13:42.077

假设其他行中不包含 a `[`：

```
header=`grep -n 'This sentence and everything above it should not be sorted.' sortme.txt | cut -d: -f1`
footer=`grep -n 'And neither should this one and everything below it.' sortme.txt | cut -d: -f1`

head -n $header sortme.txt #print header

head -n $(( footer - 1 )) sortme.txt | tail -n +$(( header + 1 )) | tr '\n[' '[\n' | sort | tr '\n[' '[\n' | grep -v '^\[$' #sort lines between header & footer
#cat sortme.txt | head -n $(( footer - 1 )) | tail -n +$(( header + 1 )) | tr '\n[' '[\n' | sort | tr '\n[' '[\n' | grep -v '^\[$' #sort lines between header & footer

tail -n +$footer sortme.txt #print footer 
```

服务于目的。

请注意，主要的排序工作仅由第 4 个命令完成。其他行是保留页眉和页脚。

我还假设，在标题和第一个“[section]”之间没有其他行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T09:54:15.263

这可能对你有用（GNU sed & sort）：

```
sed -i.bak '/^\[/!b;N;N;N;N;s/\n/UnIqUeStRiNg/g;w sort_file' file
sort -o sort_file sort_file
sed -i -e '/^\[/!b;R sort_file' -e 'd' file
sed -i 's/UnIqUeStRiNg/\n/g' file 
```

排序后的文件将在`file`，原始文件在`file.bak`.

`[`这将按排序顺序显示以 4行开头和之后的所有行。

`UnIqUeStRiNg`可以是任何不包含换行符的唯一字符串，例如`\x00`

# java - 反转每句话

> ID：13521810
> 
> 赞同：0
> 
> 时间：2012-11-23T00:37:43.553
> 
> 标签：java, string, reverse, stringtokenizer

说我的输入是

> 现在是
> 所有好人来帮助党的时候了

输出将是：

> 时间是现在
> 党的援助来男人好一切

我想出了如何反转整个文本文件，但我需要逐句进行。目前我的代码正在输出这个：

> 派对的援助来男人好一切都是现在

代码是：

```
List<String> words = new ArrayList<String>();

while(sc.hasNextLine())
{
String line = sc.nextLine();
StringTokenizer st = new StringTokenizer(line);
while(st.hasMoreTokens())
{
words.add(st.nextToken());
}
}
for (int i = 0; i <words.size(); i++)
{
System.out.print(words.get(words.size()-i-1) + " ");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T00:46:53.893

如果您使用类的[`split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String))方法`String`来分割一条线，它会更简单，它是按空格分割的首选方式（而不是 using ，这在所有实际用途中都`StringTokenizer`被认为[已弃用）。](https://stackoverflow.com/questions/6983856/why-is-stringtokenizer-deprecated)此外，每行结束后换行都会出现问题 - 事实上，您应该使用*列表列表*，其中每个列表包含单行的单词。试试这个：

```
List<List<String>> words = new ArrayList<List<String>>();

while (sc.hasNextLine()) {
    String line = sc.nextLine();
    words.add(Arrays.asList(line.split("\\s+")));
}

for (List<String> list : words) {
    for (int i = list.size()-1; i >= 0; i--)
        System.out.print(list.get(i) + " ");
    System.out.println();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T00:40:19.610

您需要做的就是将 print 语句移到 while 循环中，并清除单词 ArrayList。这将在移动到下一行之前打印出每个句子，并确保列表清晰以开始存储下一个句子。

```
while(sc.hasNextLine())
{
  String line = sc.nextLine();
  StringTokenizer st = new StringTokenizer(line);
  while(st.hasMoreTokens())
  {
    words.add(st.nextToken());
  }
  for (int i = 0; i <words.size(); i++)
  {
    System.out.print(words.get(words.size()-i-1) + " ");
  }
  words.clear();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T00:41:21.637

将声明移动到`words`循环内 - 将其放在声明之后`StringTokenizer`。这将确保您每次阅读新句子时都会重新初始化单词列表。

# c# - 数组列表问题

> ID：13521811
> 
> 赞同：1
> 
> 时间：2012-11-23T00:37:47.297
> 
> 标签：c#, class, arraylist

所以我想在我的一个项目中使用几个 ArrayList，然后我去 msdn 网页寻找合成器。然而应用后，错误列表抛出了18个错误，其中16个是关于“WindowsFormsApplication7.clsAL”没有实现接口成员“System.ICloneable.Clone()”左右，其中2个是关于“类型或命名空间”找不到名称“ComVisibleAttribute”或“ComVisibleAttributeAttribute”（您是否缺少 using 指令或程序集引用？）”。这是我的代码：

```
using System;
using System.Collections;
using System.Collections.Generic;

namespace WindowsFormsApplication7
{
    [SerializableAttribute]

    class clsAL : IList, ICollection, IEnumerable, ICloneable
    {

   public ArrayList dir = new ArrayList();
      public ArrayList time = new ArrayList();
    }

    }
// 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T00:46:42.707

您可能看过[ArrayList Class](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.aspx)：

```
[SerializableAttribute]
[ComVisibleAttribute(true)]
public class ArrayList : IList, ICollection, 
      IEnumerable, ICloneable 
```

因此，显然您在代码中做了两件事：

1.  使用的变量`dir`和`time`类型`ArrayList`（你只需要这个）
2.  尝试重新实现`ArrayList`（绝对不同的任务，您不需要使用它`ArrayList`），将所有这些接口添加到类声明中。

要使用`ArrayList`，您不需要您的类来实现接口（和/或使用属性），由`Arrayist`. 因此，只需将它们从您的类声明中删除：

```
//all attributes removed
class clsAL //all interfaces removed
{
    public ArrayList dir = new ArrayList();
    public ArrayList time = new ArrayList();

} 
```

如果你的类必须实现某个接口，它应该包含实际的实现（显式或隐式）。请阅读[接口（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/ms173156.aspx)。

```
interface IFoo
{
    void FooMethod();
}

class Foo : IFoo
{
    public Foo() { }

    public void FooMethod()
    {
        //actual IFoo implementation by Foo
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:46:42.173

是的，我会说你错过了一些东西！

您正在实现一堆接口，但实际上并没有覆盖（甚至指定）这些接口所期望的任何东西。有点违背了实现接口的整个目的......

# javascript - 使用 Regex 和 JavaScript 转义括号、方括号和大括号

> ID：13521814
> 
> 赞同：0
> 
> 时间：2012-11-23T00:38:19.850
> 
> 标签：javascript, regex

我有像这个例子这样的 HTML：

```
<div class="code">
  function something(a, b) 
  {
     return 0;
  }
</div> 
```

`span`我想用of class包围所有括号、方括号和大括号`brackets`。像这样：

```
<div class="code">
  function something<span class="brackets">(a, b<span class="brackets">)</span> 
  <span class="brackets">{</span>
     return 0;
  <span class="brackets">}</span>
</div> 
```

到目前为止，我的 JavaScript/jQuery：

```
$('.code').each(function() {

  $(this).html(
    $(this).html().replace("???", '<span class="brackets">$1</span>')
  );

}); 
```

我真的不知道用什么代替`???`。我在互联网上能找到的任何东西都是人们想要在括号之间匹配而不是实际的括号本身。

为了清楚起见，我想替换`(`, `)`, `{`,`}`和`[`的所有实例`]`。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:49:01.003

您可以将它们全部填充到一个字符类中（匹配类中的任何单个字符）。字符类本身由方括号表示，因此您必须转义里面的那些（这只是部分正确，但这绝对是一个好习惯）：

```
/([(){}\[\]])/g 
```

外圆括号在那里，因此捕获的值实际上以`$1`. 在`g`那里，所有出现的地方都被替换了。

请注意，这不是字符串！不要用`"`. 只需按原样将其作为第一个参数提供`replace`：

```
...html.replace(/([(){}\[\]])/g, '<span class="brackets">$1</span>') 
```

顺便说一句，您可能应该遍历 DOM 中的所有文本节点并仅将替换应用于这些节点。否则，您可能会将该标记添加到属性值或注释中（或者更糟糕的是，嵌入 JavaScript 或 CSS）。

# java - 没有网络时共享打印机的 FileOutputStream

> ID：13521819
> 
> 赞同：1
> 
> 时间：2012-11-23T00:38:30.547
> 
> 标签：java, networking, printing, network-printers

我在 Windows XP 下使用 Java。为了在旧的 Epson 打印机上打印，我使用`FileOutputStream`. 例如：

```
ostream = new FileOutputStream(printer);
pstream = new PrintStream(ostream);

//reset default settings
pstream.print(ESC);
pstream.print(AT); 
```

要初始化，`FileOutputStream`我使用打印机的网络名称，例如`"\\Server\Printer"`. 如果计算机连接到网络，这可以正常工作，但如果没有可用的网络，我会收到`FileNotFoundException`消息“无法访问网络位置。有关网络故障排除的信息，请参阅 Windows 帮助”。**`Server`是我正在运行应用程序的计算机的名称。无论如何，如果我使用`"\\localhost\Printer"`我会得到同样的错误。**

我尝试了 Windows 文件资源管理器以查看是否出现此错误，以防这是 ​​Windows 问题。如果我尝试在`\\Server\Folder`未连接到网络的情况下输入某个本地共享文件夹 ( )，我会收到相同的错误。但是，**如果我编写`\\Server\Printer`文件资源管理器会打开打印机。**

那么，**当没有可用网络时****如何初始化呢？`FileOutputStream`**

**编辑：**我有几台打印机通过 LPT1 和 USB 端口连接到服务器。相同的程序在其他计算机上运行，​​这就是我使用打印机的共享名称的原因。但是，如果有人从网络上拔下服务器，我希望我的程序继续在服务器上正常工作。

我已经运行了多年，但几天前我想更换一个路由器，为此我断开了服务器的连接。然后，我收到了这个错误，但是由于打印机连接到服务器，因此无论网络是否可用，程序都应该在服务器上运行。

# c# - Windows服务自动启动和停止，异常处理问题

> ID：13521820
> 
> 赞同：4
> 
> 时间：2012-11-23T00:38:38.040
> 
> 标签：c#, .net, windows, service

我开发了一个 32 位服务，我在 Windows 7 Home Premium x64 中运行它。问题是当我启动它时，windows 给了我以下消息

> 本地计算机上的 WLConsumer 服务启动然后停止。如果某些服务没有被其他服务或程序使用，它们会自动停止。

我在事件日志中发现了以下消息

> 无法启动服务。System.ArgumentException：日志 WLConsumer 已在本地计算机上注册为源。在 System.Diagnostics.EventLogInternal.CreateEventSource(EventSourceCreationData sourceData) 在 System.Diagnostics.EventLogInternal.VerifyAndCreateSource(String sourceName, String currentMachineName) 在 System.Diagnostics.EventLogInternal.WriteEntry(String message, EventLogEntryType type, Int32 eventID, Int16 category, Byte[ ] rawData) 在 System.Diagnostics.EventLog.WriteEntry(String message, EventLogEntryType type) 在 WeblogicConsumerService.WeblogicConsumer.winEventlogMe(String logTxt, String logSrc, Char entryType) 在 C:\Program Files (x86)\CSI\WeblogicConsumerService\WeblogicConsumer。 cs：C 中 WeblogicConsumerService.WeblogicConsumer.OnStart(String[] args) 的第 136 行：

这是我在 OnStart() 方法中的代码块

```
 protected override void OnStart(string[] args)
    {
        #region WEBLOGIC CREDENTIALS
        try
        {
            //Weblogic URL
            this.url = Registry.LocalMachine.OpenSubKey(@"Software\CSI_WL").GetValue("URL").ToString();

            //Queue name
            this.qName = Registry.LocalMachine.OpenSubKey(@"Software\CSI_WL").GetValue("Queue").ToString();

            //Weblogic login name
            this.user = Registry.LocalMachine.OpenSubKey(@"Software\CSI_WL").GetValue("User").ToString();

            //Weblogic password
            this.pwd = Registry.LocalMachine.OpenSubKey(@"Software\CSI_WL").GetValue("Pwd").ToString();

            //Weblogic Connection Factory
            this.cfName = Registry.LocalMachine.OpenSubKey(@"Software\CSI_WL").GetValue("ConnectionFactory").ToString();

            //root folder
            this.rFolder = Registry.LocalMachine.OpenSubKey(@"Software\CSI_WL").GetValue("root").ToString();
        }
        catch (Exception e)
        {
            winEventlogMe(e.Message, "WLRegistryKeys", 'e');
        }
        #endregion

        winEventlogMe("Successful start", "SeriviceStartup", 'i');
        synchro.Enabled = true;
    } 
```

winEventLogMe 是我调用的日志记录方法。

```
 public static void winEventlogMe(string logTxt, string logSrc, char entryType)
    {
        #region Log
        //Log to event log

        EventLog theEvent = new EventLog("WLConsumer");
        theEvent.Source = logSrc;
        if (entryType == 'e')
            theEvent.WriteEntry(logTxt, EventLogEntryType.Error);
        else if (entryType == 'i')
            theEvent.WriteEntry(logTxt, EventLogEntryType.Information);
        else if (entryType == 'w')
            theEvent.WriteEntry(logTxt, EventLogEntryType.Warning);
        else
            theEvent.WriteEntry(logTxt, EventLogEntryType.Error);*/
        #endregion
    } 
```

当我在 OnStart() 方法中注释掉对 winEventLogMe() 方法的调用时，服务启动时不会出现错误。所以显然 winEventLogMe() 方法有问题。有人可以帮我找出问题所在，因为我现在完全不知道如何解决这个问题。

提前谢谢:)

* * *

@nick_w 我已按照您的建议编辑了我的代码，服务已成功启动。但是在停止它时，我收到以下消息：

> 未能停止服务。System.ArgumentException：源“WLConsumer2012”未在日志“ServiceStop”中注册。（注册在日志'SeriviceStartup'中。） " Source 和 Log 属性必须匹配，或者您可以将 Log 设置为空字符串，它会自动匹配 Source 属性。在 System.Diagnostics.EventLogInternal.VerifyAndCreateSource (String sourceName, String currentMachineName) 在 System.Diagnostics.EventLogInternal.WriteEntry(String message, EventLogEntryType type, Int32 eventID, Int16 category, Byte[] rawData) 在 System.Diagnostics.EventLog.WriteEntry(String message, EventLogEntryType type) 在 WeblogicConsumerService C中的.WeblogicConsumer.winEventlogMe(String logTxt, String logSrc, Char entryType)：

这是 OnStop() 方法

```
 protected override void OnStop()
    {
        winEventlogMe("Successful stop", "ServiceStop", 'i');
    } 
```

这些事件日志开始让我很困惑。我做过同样的方法登录其他服务，从来没有遇到过这样的问题。我怎么能在这个服务中得到这些错误，但它与我所做的所有其他错误并没有太大区别:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T01:16:32.620

我认为这是你的问题：

```
EventLog theEvent = new EventLog("WLConsumer"); 
```

从例外情况来看，我认为这`WLConsumer`是事件源的名称。这意味着您可能会更好：

```
EventLog theEvent = new EventLog(logSrc);
theEvent.Source = "WLConsumer"; 
```

这只是反过来使用参数。

如果我做一点反编译，会有这样的检查：

```
if (!EventLogInternal.SourceExists(logName, machineName, true)) 
```

在您的情况下，我认为此检查返回 true，这意味着它正在尝试创建一个名为`WLConsumer`但失败的日志，因为`WLConsumer`已注册为事件源。

**编辑：**

当我过去使用事件日志时，我将所有内容都写入源和日志的相同组合。在您的情况下，您似乎每次编写条目时都使用不同的源和日志组合。

来自[MSDN](http://msdn.microsoft.com/en-US/library/system.diagnostics.eventlog%28v=vs.90%29.aspx#2)（重点是我的）：

> 如果您写入事件日志，则必须指定或创建事件源。您必须拥有计算机的管理权限才能创建新的事件源。源将您的应用程序与事件日志注册为有效的条目源。**您一次只能使用 Source 写入一个日志。**源可以是任何随机字符串，但名称必须与计算机上的其他源不同。**源通常是应用程序的名称或另一个标识字符串。**尝试创建重复的 Source 值会引发异常。**但是，单个事件日志可以与多个源相关联。**

我的建议是这样的：

使用`WLConsumer`（或`WLConsumer2012`）作为您的来源，或者

1.  定义你自己的日志，“WLConsumerServiceEventLog”或其他东西；或者
2.  将日志留空。在这种情况下，它们会进入应用程序日志。

无论如何，标准做法似乎是在第一次运行您的服务之前做这样的事情，例如在安装程序中（直接从上面的链接复制）：

```
// Create the source, if it does not already exist. 
if(!EventLog.SourceExists("MySource"))
{
    //An event log source should not be created and immediately used. 
    //There is a latency time to enable the source, it should be created 
    //prior to executing the application that uses the source. 
    //Execute this sample a second time to use the new source.
    EventLog.CreateEventSource("MySource", "MyNewLog");
    Console.WriteLine("CreatedEventSource");
    Console.WriteLine("Exiting, execute the application a second time to use the source.");
    // The source is created.  Exit the application to allow it to be registered. 
    return;
} 
```

请注意评论中关于延迟的点。日志不一定会立即创建，因此在编写代码时要牢记这一点。您还可以使用[EventLogInstaller](http://msdn.microsoft.com/en-US/library/system.diagnostics.eventloginstaller%28v=vs.90%29.aspx)创建日志。如果您使用安装程序来部署服务，这可能是更简单的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:02:38.447

关键是不要重载 on start 方法，为了防止服务启动失败，通常 onstart 方法将主代码作为单独的线程启动

# gcc - ARM objcopy 导致空的二进制文件

> ID：13521823
> 
> 赞同：3
> 
> 时间：2012-11-23T00:38:58.653
> 
> 标签：gcc, arm, objcopy, eabi

如何`arm-none-eabi-objcopy`将我的文件复制/翻译`.axf`成`.bin`适合闪存到设备的文件`lm4tools`？

我有一个 ~20KB 的`.axf`文件编译并链接到`arm-none-eabi-*`. 对于任何有兴趣的人，这是与 Stellaris Launchpad 一起使用的。

我正在尝试修改[`stellaris-launchpad-template-gcc`](https://github.com/scompo/stellaris-launchpad-template-gcc)项目提供的示例以使用 C++ 代码进行编译。我已经设法让它生成一个格式的`.axf`文件`elf32-littlearm`（根据`.lst`文件），但是当我尝试做

```
arm-none-eabi-objcopy -v -O binary main.axf foo.bin 
```

要将其转换为可编程文件，`.bin`文件输出的大小为 0 字节。[这个问题](https://stackoverflow.com/questions/6553153/elf-file-thinks-its-small-but-its-large-can-not-generate-bin-and-hex-files)描述了一个类似的问题。我确信`.axf`文件是完整的，为什么我的`.bin`文件没有填充任何内容？如果我删除`-O binary`，该文件将被很好地复制。该目录是可写的，所有权限都很好。我已经尝试使用各种术语在 SO 和互联网的其余部分上进行搜索，所有这些都没有任何用处。以前好像没有人遇到过这个问题。

运行`arm-none-eabi-objdump -D main.axf`会在似乎是汇编程序中生成文件转储：

```
main.axf:     file format elf32-littlearm

Disassembly of section .debug_info:

00000000 <_end_text>:
       0:   00000082    andeq   r0, r0, r2, lsl #1
       4:   00000002    andeq   r0, r0, r2
       8:   01040000    mrseq   r0, (UNDEF: 4)
       c:   00000057    andeq   r0, r0, r7, asr r0
      10:   00000c04    andeq   r0, r0, r4, lsl #24
      14:   00002300    andeq   r2, r0, r0, lsl #6
    ...
      28:   08010200    stmdaeq r1, {r9}
      2c:   00000015    andeq   r0, r0, r5, lsl r0
      30:   00410103    subeq   r0, r1, r3, lsl #2
      34:   32010000    andcc   r0, r1, #0
      38:   00000048    andeq   r0, r0, r8, asr #32
    ...
      48:   69050404    stmdbvs r5, {r2, sl}
      4c:   0500746e    streq   r7, [r0, #-1134]    ; 0x46e
      50:   00000001    andeq   r0, r0, r1
      54:   46430100    strbmi  r0, [r3], -r0, lsl #2
    ... 
```

这是正确的，还是我什至没有正确编译，因为这似乎是某种汇编程序？

关于文件的一些信息`.axf`：

```
ELF Header:
  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF32
  Data:                              2's complement, little endian
  Version:                           1 (current)
  OS/ABI:                            UNIX - System V
  ABI Version:                       0
  Type:                              EXEC (Executable file)
  Machine:                           ARM
  Version:                           0x1
  Entry point address:               0x0
  Start of program headers:          52 (bytes into file)
  Start of section headers:          20372 (bytes into file)
  Flags:                             0x5000000, Version5 EABI
  Size of this header:               52 (bytes)
  Size of program headers:           32 (bytes)
  Number of program headers:         0
  Size of section headers:           40 (bytes)
  Number of section headers:         14
  Section header string table index: 11 
```

运行后`arm-none-eabi-readelf -lS main.axf`，不返回程序头：

```
There are 14 section headers, starting at offset 0x4f94:

Section Headers:
  [Nr] Name              Type            Addr     Off    Size   ES Flg Lk Inf Al
  [ 0]                   NULL            00000000 000000 000000 00      0   0  0
  [ 1] .debug_info       PROGBITS        00000000 000034 0019a6 00      0   0  1
  [ 2] .debug_abbrev     PROGBITS        00000000 0019da 0005ad 00      0   0  1
  [ 3] .debug_loc        PROGBITS        00000000 001f87 001796 00      0   0  1
  [ 4] .debug_aranges    PROGBITS        00000000 003720 000088 00      0   0  8
  [ 5] .debug_ranges     PROGBITS        00000000 0037a8 000130 00      0   0  1
  [ 6] .debug_line       PROGBITS        00000000 0038d8 00077d 00      0   0  1
  [ 7] .debug_str        PROGBITS        00000000 004055 000aa8 01  MS  0   0  1
  [ 8] .comment          PROGBITS        00000000 004afd 00003a 01  MS  0   0  1
  [ 9] .ARM.attributes   ARM_ATTRIBUTES  00000000 004b37 000039 00      0   0  1
  [10] .debug_frame      PROGBITS        00000000 004b70 000388 00      0   0  4
  [11] .shstrtab         STRTAB          00000000 004ef8 00009a 00      0   0  1
  [12] .symtab           SYMTAB          00000000 0051c4 000200 10     13  18  4
  [13] .strtab           STRTAB          00000000 0053c4 0000e0 00      0   0  1
Key to Flags:
  W (write), A (alloc), X (execute), M (merge), S (strings)
  I (info), L (link order), G (group), T (TLS), E (exclude), x (unknown)
  O (extra OS processing required) o (OS specific), p (processor specific)

There are no program headers in this file. 
```

# python - 我想使用 Python 字符串格式化表达式将数字格式化为百分比，但它失败了

> ID：13521824
> 
> 赞同：2
> 
> 时间：2012-11-23T00:39:09.840
> 
> 标签：python, python-2.7

Python 2.7.3

```
>>> print '%2.2f' % 0.1
0.10 
```

我的文档说类型 % 应该与类型 f 相同，只是输入乘以 100。

```
>>> print '%2.2%' % 0.1
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: not all arguments converted during string formatting 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T00:42:34.323

使用新的格式表达式，它具有您所指的格式化程序

```
print "{:%}".format(0.1)
#10.000000% 
```

如果你只想要整数部分，你可以使用精度规范

```
print "{:.0%}".format(0.1)
#10% 
```

见文档

[http://docs.python.org/2/library/string#formatspec](http://docs.python.org/2/library/string#formatspec)

稍微扩展一下，新格式说明符确实比旧格式说明符更强大。首先，按顺序或名称调用参数非常简单

```
"play the {instrument} all {moment}, even if my {instrument} is old".format(moment='day', instrument='guitar')
#'play the guitar all day, even if my guitar is old' 
```

然后，如文档中所见，可以访问对象的属性：

```
"the real component is {0.real} and the imaginary one is {0.imag}".format(3+4j)
#'the real component is 3.0 and the imaginary one is 4.0' 
```

远不止这些，但你可以在文档中找到它，这很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T00:44:07.583

```
print '%2.2%' % 0.1 
```

告诉它格式字符串 (%) 中有 2 个占位符，所以你有一个抱怨

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-26T16:22:27.950

遇到了这个问题。`.format`在 Python 3 中，您可以以与上述类似的方式简单地使用 fstrings（从而避免使用）。格式为：

```
print(f"{your_number:.n_decimals%}") 
```

例如。

```
>>> print(f"{0.0350:.2%}")
3.50% 
```

# ios - 递归调用 viewDidLoad，崩溃

> ID：13521825
> 
> 赞同：0
> 
> 时间：2012-11-23T00:39:31.857
> 
> 标签：ios, xcode

**在 loggerViewController.m 中：**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIView* mainView = [[UIView alloc] initWithFrame:[UIScreen mainScreen].bounds];
    [self.view addSubview:mainView]; // <-- Problem is here
} 
```

loggingViewController 是我的 appDelegate 的 iVar

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    .
    .
    loggingViewController = [[loggerViewController alloc] init];
    [loggingViewController.view setBackgroundColor:[UIColor blueColor]];
//    [loggingViewController loadView];
    [self.view addSubview:loggingViewController.view];

} 
```

我期待我的 AppDelegate 调用 loggingViewController，然后它会在里面设置它自己的子视图并且它会完成。但是相反， viewDidLoad 被递归调用，我不明白为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:01:47.757

试试这样

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    loggingViewController = [[loggerViewController alloc] init];
    self.window.rootViewController = loggingViewController;
    [self.window makeKeyAndVisible];
} 
```

递归调用的原因是您的`self.view`is `nil`，因此当您尝试将其添加为 appdelegate 视图的子视图时，它会一次又一次地尝试调用。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIView* mainView = [[UIView alloc] initWithFrame:[UIScreen mainScreen].bounds];
    [self.view setBackgroundColor:[UIColor blueColor]];
    [self.view addSubview:mainView];
} 
```

# javascript - 如何使用带有 on() 的 Jquery 将日期选择器添加到动态添加的 div

> ID：13521826
> 
> 赞同：0
> 
> 时间：2012-11-23T00:39:32.447
> 
> 标签：javascript, jquery

我正在向我正在创建的表单添加一个 div。我想用这个函数来做这个`on()`，但我似乎无法让它工作。据我了解，您必须使用事件，但是有没有办法从添加的 div 中创建事件。我一直在尝试的代码是带有“点击”事件的，但这并不是我真正想要的。在第一次单击后添加了日期选择器，但根本没有添加 buttonImage。我需要它在第一次点击时工作。这是我现在正在使用的代码：

```
 $('#switcher-panel').on('click', 'table tr td input', function(){
    $('.datepicker').datepicker({
      buttonImage: "images/calendar.png"
    });
  }); 
```

这是我正在使用的html：

```
<table class="table table-hover" data-controller="rank">
  <thead>
    <tr>
      <th colspan="4" align="left"><h2> Boy Scout Rank</h2></th>
    </tr>
    <tr>
      <th>Number</th>
      <th>Requirements</th>
      <th>Completed</th>
      <th>Date</th>
    </tr>
  </thead>
  <tbody>
    <tr data-name="one_li">
      <td>1</td>
      <td>
        Req
      </td>
      <td>
        <input class="datepicker"/>
      </td>
    </tr>
  </tbody>
</table> 
```

我不明白如何处理这个。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:07:51.147

从您上面的代码来看，看起来您并没有添加新的`<div />`

如果不是，则不需要添加事件（单击）处理程序 - [http://jsfiddle.net/ZNR7P/](http://jsfiddle.net/ZNR7P/)

你应该能够做到：

```
$(function() {

    $('.datepicker').datepicker();

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:17:51.217

```
$(function(){

    $('.datepicker').datepicker({
        showOn:"button", // or "both" if you want the input to trigger the datepicker too
        buttonImage: "images/calendar.png"
    });

}) 
```

# android - 在 ViewPager 中的片段上调用方法

> ID：13521830
> 
> 赞同：4
> 
> 时间：2012-11-23T00:40:16.707
> 
> 标签：android, android-fragments, android-fragmentactivity

我想做的就是调用我的 Fragment 类的函数。但我似乎无法找到一种方法来访问 ViewPager 中的片段实例。

我的活动的 xml：

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" /> 
```

没有所以我不能调用 findFragmentById() （可以吗？）我也不知道给 findFragmentByTag() 什么，它总是返回 null ：/

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-07-02T23:29:45.620

pagerAdapter.getItem(int) 方法通常会创建片段的新实例，但是，您可以使用 HashMap 来存储对现有片段的引用。

```
// ViewPagerAdapter
private HashMap<Integer, Fragment> fragmentHashMap = new HashMap<>();

@Override
public Fragment getItem(int position) {
    if (fragmentHashMap.get(position) != null) {
        return fragmentHashMap.get(position);
    }
    TabFragment tabFragment = new TabFragment();
    fragmentHashMap.put(position, tabFragment);
    return tabFragment;
} 
```

然后你可以找到你的片段来调用它的方法：

```
FragmentAdapter fa = (FragmentAdapter)viewPager.getAdapter();
TabFragment theFragment = (TabFragment)fa.getItem(index);
theFragment.customMethod(Object obj); 
```

您将必须跟踪哪个片段与哪个索引一起使用，因为您将它们转换为它们的特定类以便访问它们的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T00:52:22.957

ViewPager 应该有一个与之关联的 FragmentAdapter。因此，您可以执行以下操作：

```
FragmentAdapter fa = (FragmentAdapter)viewPager.getAdapter();
Fragment f = fa.getItem(index); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T21:29:34.487

我这样做了： http: [//tamsler.blogspot.fr/2011/11/android-viewpager-and-fragments-part-ii.html](http://tamsler.blogspot.fr/2011/11/android-viewpager-and-fragments-part-ii.html)

我不确定有没有更好的方法来做到这一点......

# javascript - Javascript向对象添加方法

> ID：13521833
> 
> 赞同：86
> 
> 时间：2012-11-23T00:40:37.270
> 
> 标签：javascript

假设我有一个`Foo`对象

如何通过添加`bar()`方法来扩展此对象并确保将来的实例`Foo`具有此方法？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-11-23T00:46:41.113

您需要将其添加到 Foo 的原型中：

```
function Foo(){}
Foo.prototype.bar = function(){}
var x = new Foo()
x.bar() 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-11-23T01:13:12.480

这一切都取决于您如何创建`Foo`，以及您打算如何使用`.bar()`.

首先，您是否为您的对象使用了构造函数？

```
var myFoo = new Foo(); 
```

如果是这样，那么您可以使用 扩展`Foo`函数的`prototype`属性`.bar`，如下所示：

```
function Foo () { /*...*/ }
Foo.prototype.bar = function () { /*...*/ };

var myFoo = new Foo();
myFoo.bar(); 
```

以这种方式，`Foo`now 的每个实例都可以访问 的***SAME***实例`.bar`。
也就是说：`.bar`将可以完全访问`this`，但在构造函数中***绝对无法访问***：`variables`

```
function Foo () { var secret = 38; this.name = "Bob"; }
Foo.prototype.bar = function () { console.log(secret); };
Foo.prototype.otherFunc = function () { console.log(this.name); };

var myFoo = new Foo();
myFoo.otherFunc(); // "Bob";
myFoo.bar(); // error -- `secret` is undefined...
             // ...or a value of `secret` in a higher/global scope 
```

以另一种方式，您可以定义一个函数来返回任何对象（不是`this`），并将`.bar`created 作为该对象的属性：

```
function giveMeObj () {
    var private = 42,
        privateBar = function () { console.log(private); },
        public_interface = {
            bar : privateBar
        };

    return public_interface;
}

var myObj = giveMeObj();
myObj.bar(); // 42 
```

以这种方式，您有一个创建新对象的函数。
这些对象中的每一个都有`.bar`为它们创建的函数。
每个`.bar`函数都可以通过所谓的***闭包***访问函数中返回其特定对象的“私有”变量。
每个`.bar`人仍然可以访问`this`，因为`this`当您调用函数时，like`myObj.bar();`将始终引用`myObj`（`public_interface`在我的示例中`Foo`）。

这种格式的缺点是，如果你要创建数百万个这样的对象，那也是数百万个 的副本`.bar`，这会占用内存。

您也可以在构造函数内部执行此操作，在构造函数`this.bar = function () {};`内部进行设置——同样，优点是对构造函数中的私有变量的闭包访问，缺点是增加内存需求。

所以第一个问题是：
您是否希望您的方法能够读取/修改无法通过对象本身（通过`this`或`myObj.X`）访问的“私有”数据？

第二个问题是：如果你给它们每个人自己的个人功能，而不是给他们一个分享，你是否制造了足够多的这些物品，以至于记忆将成为一个大问题？

例如，如果您`.draw`在高端 3D 游戏中为每个三角形和每个纹理赋予其自己的功能，那可能有点矫枉过正，而且在如此精致的系统中可能会影响帧率……

但是，如果您希望每页创建 5 个滚动条，并且您希望每个滚动条都能够设置其位置并跟踪它是否被拖动，而无需让所有其他应用程序都有权读取/设置这些相同的东西，那么假设它可能已经有 10,000 行（或更多）长，那么真的没有理由害怕 5 个额外的函数会杀死你的应用程序。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-23T00:45:52.963

有很多方法可以在 JavaScript 中创建像这样的可重用对象。Mozilla 在这里有一个很好的介绍：

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)

以下内容适用于您的示例：

```
function Foo(){
    this.bar = function (){
        alert("Hello World!");
    }
}

myFoo = new Foo();
myFoo.bar(); // Hello World​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-11-23T01:01:10.513

您可以使 bar 成为一种功能，使其成为一种方法。

```
Foo.bar = function(passvariable){  }; 
```

作为一个属性，它只会被分配一个字符串、数据类型或布尔值

```
Foo.bar = "a place"; 
```

# c# - C#动态逻辑门

> ID：13521837
> 
> 赞同：1
> 
> 时间：2012-11-23T00:41:44.830
> 
> 标签：c#

我正在开发一个允许用户从虚拟逻辑门构建数字电路的程序。每个门都是代表特定门类型的类的实例，例如，AND 类的外观如下：

```
public class andgate
{
    public andgate()
    {
        inputs = new bool[7];
        for (int i = 0; i < 7; i++) inputs[i] = true;
        output = (inputs[0] && inputs[1] && inputs[2] && inputs[3] && inputs[4] && inputs[5] && inputs[6]);
    }
    public bool[] inputs;
    public bool output;
} 
```

每个门都有七个输入，但并非所有输入都必须使用（即，对于具有三个输入的门，其余四个将只是“1”，无论如何都是与的中性元素）。每个输入都是对另一个门的输出或布尔数组（存储输入向量）的元素的引用，以便一个门生成的信号自动发送到下一个门。问题是我还需要在门内动态传输信号，即如果与门中的输入信号之一设置为 0，则输出自动具有 0 值。因此，当您将二进制向量输入到电路的输入时，它会改变电路输出的值。或者也许有比从单个门构建电路更简单的方法来模拟电路？我需要它来生成测试模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T00:55:15.833

将`output`属性设为只读：

```
public bool output
{
    get
    {
        return inputs.All(i => i);
    }
} 
```

无需对所有输入进行 AND 运算，只需检查是否有任何输入为假。

当然，您必须删除`output`构造函数中的赋值。这应该使您的`output`财产“动态”。

您可能还希望将输入更改为`bool?[]`，以便一个`null`值表示没有信号。然后，您必须将输入数组的初始化全部删除为 true，并将输出返回更改为：

```
return inputs.All(i => i.GetValueOrDefault(true)); 
```

在评论中编辑了 Tim S 的建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:00:37.833

为此，您应该使用属性来设置/获取输入，因为您可以在属性中执行额外的计算。您持有的状态变量应该是私有的。

```
public bool[] Inputs {
    set {
        inputs = value;
    }
}

public bool Output {
    get {
        return inputs[0] && inputs[1] ...
    }
} 
```

我会避免对 Inputs 属性执行此操作，因为公开数组实际上是公开有关类如何存储事物的信息，对于良好的 OOP，应尽可能避免这样做。例如，ReadOnlyCollection 可能更合适。

但是，我会重新考虑总体设计，并避免使用任意数量的输入，7\. 你从哪里变出这个值？

一种更简单的方法是假设一个门有 2 个值 - A 和 B，您可以在构造函数或单个属性中为其设置值。

然后，您可以利用二进制逻辑门上的操作是关联的这一事实，因此采用 a、b、c 的 AND 门等效于采用 a、b 并将其输出馈送到另一个也采用 c 的门。无论如何，这就是您在实践中构建电路的方式-您需要考虑的问题是门的延迟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T01:03:46.880

听起来您应该在门中添加事件，这样当它们的状态发生变化时，它们就能够通知依赖对象；像这样的东西：

```
public class AndGate
{

    private bool[] inputs;
    private bool output;

    public bool[] Inputs 
    {
        get
        {
            return this.inputs;
        }
        set
        {
            this.inputs = value; 
            UpdateOutput();     
        }
    }
    public bool Output
    {
        get
        {
            return this.output;
        }
    }

    public AndGate()
    {
        inputs = new bool[7];
        for (int i = 0; i < 7; i++) inputs[i] = true;
        UpdateOutput();
    }

    private void UpdateOutput()
    {
        bool original = output;
        output = true;
        for(int i=0; i<inputs.Length; i++)
        {
            output = output && inputs[i];
        }
        if (original != output)
        {
            OnChanged(EventArgs.Empty);
        }
    }

    public event GateStateChangedEventHandler StateChanged;  
    protected virtual void OnChanged(EventArgs e) 
    {
        if (StateChanged != null) 
        {
            StateChanged(this, e);
        }
    }

} 
```

# r - data.table - 加入 NA 键

> ID：13521843
> 
> 赞同：2
> 
> 时间：2012-11-23T00:42:27.433
> 
> 标签：r, data.table

> **可能重复：**
> [在 R 的 data.table 中选择 NA](https://stackoverflow.com/questions/12646172/select-na-in-a-data-table-in-r)

只是想知道这是 data.table 中的预期功能还是错误？

```
a = data.frame(a=c(NA,1),aa=c(0,11))
b = data.frame(a=c(1),bb=c(11))
merge(a,b,all.x=T,by="a")
   a aa bb
1  1 11 11
2 NA  0 NA

a = data.table(a=c(NA,1),aa=c(0,11))
b = data.table(a=c(1),bb=c(11))
merge(a,b,all.x=T,by="a")
    a aa bb
1: NA  0 11
2:  1 11 11 
```

同样的方式

```
setkey(b,a)
b[a]
    a bb aa
1: NA 11  0
2:  1 11 11 
```

我真的希望您在这种情况下使用 data.frame 获得的行为。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T02:56:38.267

请参阅 [FR#1043 Allow or disallow NA in keys?。](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=1043&group_id=240&atid=978).

这是一个已知问题，`NA`允许使用值，但您不能加入它们。

有关更详细的描述，请参阅[R 中的 data.table 中](https://stackoverflow.com/questions/12646172/select-na-in-a-data-table-in-r)的重复问题和答案Select NA

# java - 使用许多 editTexts 和 onclicklisteners 内存不足

> ID：13521844
> 
> 赞同：0
> 
> 时间：2012-11-23T00:42:30.913
> 
> 标签：java, android, memory, memory-management

我有一个应用程序，它的布局包含约 150 个 editText 和一个 mainActivity，其中每个 editText 都有一个 onClickListener，以及一个循环遍历它们并清除它们的按钮。

该应用程序运行良好，并且没有进行任何重大更改，我现在每次启动应用程序时都会收到以下 logCat 错误：

```
Out of memory on a 2903056-byte allocation. 
```

我在这里做的任何明显的不良做法会导致记忆丧失吗？

下面我的一些代码作为说明（这显然重复了很多次）

```
box0101.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            txtHint.setText(hintPrefix + onOneClick);
            return false;
        }
    });
    box0301.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            txtHint.setText(hintPrefix + onOneClick);
            return false;
        }
    });
    box0401.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            txtHint.setText(hintPrefix + onOneClick);
            return false;
        }
    });
    box0501.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            txtHint.setText(hintPrefix + onOneClick);
            return false;
        }
    });
    box0601.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            txtHint.setText(hintPrefix + onOneClick);
            return false;
        }
    }); 
```

还有一些引起循环的按钮点击监听器

```
 btnClear.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            clearBoard();               
        }
    });
    public void clearBoard() {
    final int ROW_COUNT = 14;
    final int COL_COUNT = 9;
    final String ROWS[] = {"01","02","03","04","05","06","07","08","09","10","11","12","13","14","15"};
    final String COLS[] = {"01","02","03","04","05","06","07","08","09","10"};

    for(int i=0; i<ROW_COUNT; i++) {
        for(int j=0; j<COL_COUNT; j++) {
            String a = ROWS[i];
            String b = COLS[j];
            int editTextId = getResources().getIdentifier("box" + a + b , "id", getPackageName());
            EditText et=(EditText)findViewById(editTextId);    
            et.setText("");
        }
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:55:15.200

不要为每个 EditText 使用 onTouch() 方法，而是使用 switch 语句为每个 EditText 创建一个案例，使用 EditText ID

```
public boolean onTouch(View v, MotionEvent event) {
        switch(v.getId())
        {
            case R.id.editTextID:
                //Do something, etc
        } 
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T00:58:17.880

正如@alex.veprik 提到的：尝试使用**one** `OnClickListener`，并将其分配给您的所有`EditText`-objects。如果你`OnClickListener`为每个`EditText`-object 创建一个新的，尽管它们都做同样的事情，这会占用你的大量内存。

例子）

```
View.OnTouchListener boxListener = new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        txtHint.setText(hintPrefix + onOneClick);
        return false;
    }
});

//boxes is a list of all your boxes
for(int i=0; i < boxes.size(); i++) {
    boxes.get(i).setOnTouchListener(boxListener);
} 
```

`EditText`将您的-objects 的创建放在一个循环中，并将所有框的列表仅存储在成员变量中也可能是明智的。因此，您现在只需要一个用于列表的变量，而不是 150 个变量，同时保留所有引用。（这不会影响你的内存问题，但它是很好的代码风格）

```
List<EditText> boxes = new ArrayList<EditText>();
for (int i = 0; i < NBR_OF_BOXES; i++) {
    boxes.add(new EditText());
} 
```

正如@zapl 建议的那样，使用内存分析器也可能很好。

# makefile - Makefile 编译不同目录下的 Fortran 源文件

> ID：13521847
> 
> 赞同：0
> 
> 时间：2012-11-23T00:42:51.460
> 
> 标签：makefile, fortran, dependency-management, directory

这是我的问题：我已经使用 Java 很多年了，并且喜欢有许多目录来分隔代码的不同区域。对于我当前的项目，我正在编写 Fortran 代码，它应该在 Windows 和 Unix/Linux 下编译。对于 Windows，我使用 Eclipse/Photran 和 MinGW/gfortran 工具来设置 Makefile。

这是所需的项目结构（类似于 Java 的深度嵌套树会更好）

```
dir1/src/*.f95
dir1/make/Makefile_lib1.any
dir1/make/Makefile_lib1.win
dir1/make/Makefile_lib1.unix

dir2/src/*.f
dir2/make/Makefile_lib2.any
dir2/make/Makefile_lib2.win
dir2/make/Makefile_lib2.unix

...

dir_main/src/*.f or *.f95
dir_main/make/Makefile_main.any
dir_main/make/Makefile_main.win
dir_main/make/Makefile_main.unix 
```

我想调用`make Makefile_main.unix`，它将设置任何 Unix 特定的变量，然后包括`Makefile_main.any`, `Makefile_lib1.any`, ...

（类似于在 Windows 上制作）

我到了可以看到给定目录中所有源文件的阶段，例如

```
SRCS  := $(wildcard $(SRC_DIR)/*.$(SRC_EXT)) 
```

现在我正在努力解决如何在 Fortran 95 中生成所有依赖项，每个源生成`*.o`和`*.mod`.

编译时有没有办法在目录之间切换，以便所有目标/依赖项的名称中都没有 dir-path？请注意，我是`make`从 Eclipse 项目所在的其他服务目录调用的。任何建议如何进行？

我真的不想采用通常的 Fortran 风格，即只有一个目录，其中包含所有乱七八糟的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:39:00.977

您可以采取两种主要策略。

您可以在每个子目录中放置一个 makefile 并让它支持诸如 等的目标`all`，`clean`然后使用来自顶级 makefile 的递归 make 调用`all`在每个子目录中创建相同的目标（例如）。

或者，您可以在一次 make 调用中处理这一切，而无需递归，但是您必须使用包含子目录名称的相对路径。就我个人而言，我认为它没有问题，并且我已经基于这种方法维护了一个 makefile 系统。

这是您可以在您的情况下执行的操作，假设`SRC`已正确设置为您需要编译的每个源的相对路径列表。

```
# This replaces the SRC_EXT suffix with .o in each filename
OBJ = $(SRC:%.$(SRC_EXT)=%.o)

$(BINARY_NAME): $(OBJ)
    ...link command...

%.o: %.$(SRC_EXT)
    ...compile command... 
```

# javascript - 脚本标签绑定方法 - JavaScript

> ID：13521848
> 
> 赞同：0
> 
> 时间：2012-11-23T00:43:01.233
> 
> 标签：javascript, javascript-events

以下代码未按预期工作。我正在使用“脚本标记绑定方法”来触发事件。你能解决这个问题吗？谢谢

```
<html>

    <head>

                <title>
                    Example
                </title>

    </head>

    <body>

        <input type="button" name="cmdScriptTag" value="Script Tag">

                <script language="javascript" For="cmdScriptTag" Event="OnClick">

                    alert("Script Tag Binding Method.");

                </script>

        </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:12:39.617

在您的代码中，您有：

```
> <script language="javascript" For="cmdScriptTag" Event="OnClick"> 
```

脚本元素的*语言*属性在 HTML 4 中已弃用，并在 HTML5 中删除。*type*属性在 HTML 4 中是必需的，在 HTML5 中是可选的。在实践中，这不是必需的，您可以使用：

```
<script>
  /* content */
</script> 
```

脚本元素的[*for*](http://msdn.microsoft.com/en-au/library/ie/ms533870%28v=vs.85%29.aspx)属性是 Microsoft 专有功能，它不属于任何标准，并且可能在 IE 之外根本不受支持（并且可能不受当前 IE 版本支持）。它在[DOM 2 HTML 规范](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-66979266)中保留供将来使用，但从未为脚本元素实现（据我所知）。它仅适用于 HTML 4.01 中的[标签元素，与](http://www.w3.org/TR/html401/interact/forms.html#adef-for)[HTML5](http://www.w3.org/TR/html5/the-label-element.html#attr-label-for)相同。

~~据我所知，从来没有*event*属性，它可能与*for属性有关，但都没有在*[MSDN](http://msdn.microsoft.com/en-us/library/ie/hh772960%28v=vs.85%29.aspx)中列出。~~

[*event*](http://msdn.microsoft.com/en-au/library/ie/ms533746%28v=vs.85%29.aspx)属性类似于*for*属性：它是一种 IE 功能，尚未广泛实施，它将脚本元素中的脚本与另一个元素的事件相关联。本质上，它与使用其他符合标准的方法将脚本与元素和事件相关联相同，但更笨拙。

在任何情况下，要将函数与将在元素接收到特定事件时调用的元素相关联，您可以使用多种方法。最强大和最广泛实施的是内联侦听器，例如：

```
<input type="button" name="cmdScriptTag" value="Script Tag"
 onclick="alert('Script Tag Binding Method.');"> 
```

虽然通常脚本主体放在由侦听器调用的函数中，例如

```
<script>
  function foo(){
      alert('Script Tag Binding Method.');
  }
</script>
<input type="button" name="cmdScriptTag" value="Call foo"
 onclick="foo();"> 
```

您还可以使用各种方法动态附加侦听器，例如[addEventListener ，](http://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget-addEventListener) [Mozilla 开发人员网络](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)(MDN)对此进行了说明。

# database - 设计卖点数据库

> ID：13521853
> 
> 赞同：0
> 
> 时间：2012-11-23T00:43:30.330
> 
> 标签：database, entity-framework, database-design

我正在为一家小商店建立一个数据库，客户可以在其中输入不同类型的付款。现在所有的付款都共享共同的列（例如金额、借方或贷方、付款日期等......），所以我决定制作一张付款表。

问题是一些付款可能与其他实体（表格）相关联（例如，与客户正在交易的经销商相关联的特定付款），而一些付款与任何表格无关。

正如我所看到的，这就像付款共享所有属性，除了某些付款可能具有其他表的外键。

问题：模拟这种情况的最佳方法？

# javascript - 我怎样才能把这个javascript变成一个函数？它已经是一个功能了吗？关于js结构的几个非常基础的问题

> ID：13521856
> 
> 赞同：3
> 
> 时间：2012-11-23T00:43:47.223
> 
> 标签：javascript, jquery, function

我正在学习 javascript，并正在尝试调整以下内容：

```
$('#myform').change(function() {
    if ($('#sv_I4b').attr('checked')||$('#sv_I4c').attr('checked')){
        $('#sv_I5').removeClass('hidden');
    } else {
        $('#sv_I5').addClass('hidden');
    }
}); 
```

成为一个函数，我可以调用不同的事件，例如页面加载等。

我还没有完全理解每个元素，但我知道：

```
 if ($('#sv_I4b').attr('checked')||$('#sv_I4c').attr('checked')){
        $('#sv_I5').removeClass('hidden');
    } else {
        $('#sv_I5').addClass('hidden');
    } 
```

是函数的核心“逻辑”：`if (condition) {then this} else {that}`

或多或少地了解那里发生了什么。哪个留下了边界javascript（有比这更好的术语吗？）：

`$('#myform').change(function() {...});`

**我的问题（以下是否属实等）：**

*   我认为美元表示它是 jQuery
*   我的表单的 id 显然与该表单中的事件有关（命名空间？）
*   [.change](http://api.jquery.com/change/) 似乎是一个触发器，它倾听...在#myform 中发生的任何变化？所以每次在#myform中发生变化时都会运行？这似乎效率低下
*   function() 我还不明白匿名或空函数的作用，只是将 {} 中包含的内容定义为函数？

我的目标：能够拥有类似的东西

```
function myfunction()
{
if ($('#sv_I4b').attr('checked')||$('#sv_I4c').attr('checked')){
        $('#sv_I5').removeClass('hidden');
    } else {
        $('#sv_I5').addClass('hidden');
    }
} 
```

进而

```
$(function() {myfunction}); 
```

所以我可以在页面加载时调用该函数，但我不想失去 .change 语法为我提供的功能（当用户与页面上的元素交互时它也会改变。

为普遍而繁琐的无知道歉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T00:49:26.417

你猜到了如何正确定义函数——也就是说，

```
function myfunction()
{
if ($('#sv_I4b').attr('checked')||$('#sv_I4c').attr('checked')){
        $('#sv_I5').removeClass('hidden');
    } else {
        $('#sv_I5').addClass('hidden');
    }
} 
```

工作得很好。然而，这：

```
$(function() {myfunction}); 
```

应该写成：

```
$(myfunction);  // Run on page load.
$('#myform').change(myfunction);  // ...and also run it when the form changes. 
```

但是，除非在脚本运行时表单存在，否则在页面加载之前第二行实际上不会起作用，因此您可能希望将其更改为：

```
$(function() {  // On page load, run this anonymous function:
    myfunction();  // Run the function now (where now, at this point, is page load).
    $('#myform').change(myfunction);  // ...as well as when the form changes.
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T01:11:22.473

*   **$**是**jQuery**的简写符号，本质上是 jQuery 框架的任何函数的命名空间。
*   my_form 是一个 DOM 选择器。$('#my_form') 将匹配的 DOM 元素包装为 jQuery 对象，添加各种有用的方法和属性。
*   **.change()**是一个事件侦听器，正如您所猜测的，它监视该 jQuery 对象上的更改事件。这有点低效 - 请看一下**.on()**。
*   匿名函数（闭包）最有用的行为是创建私有范围，这是 javascript 不提供的。

# iphone - 如何在应用程序购买中添加本地货币符号 - ios

> ID：13521857
> 
> 赞同：1
> 
> 时间：2012-11-23T00:43:50.337
> 
> 标签：iphone, ios, in-app-purchase

如何从 [https://github.com/ebutterfly/EBPurchase将本地货币符号添加到 Buy-Button](https://github.com/ebutterfly/EBPurchase)

```
[buyButton setTitle:[@"Buy Game Levels Pack " stringByAppendingString:productPrice] forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T01:22:12.623

如下代码将起作用：

```
SKProduct *product = ebp.validProduct; // epb is the EBPurchase object
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
[numberFormatter setLocale:product.priceLocale];
NSString *formattedPrice = [numberFormatter stringFromNumber:product.price]; 
```

`formattedPrice`将具有适当的货币格式。

您还应该使用`localizedTitle`and `localizedDescription`from`product`作为产品的标题和描述。这都是从您在 iTunes Connect 中设置的数据中获得的。

# php - 匹配的 XML 属性在 PHP if 语句中不匹配

> ID：13521858
> 
> 赞同：2
> 
> 时间：2012-11-23T00:43:54.550
> 
> 标签：php, xml

我试图通过一些 XML 循环并执行一个动作，如果一个属性值匹配或不匹配它在循环的前一次迭代中的值。

传入的数据已经按类排序。

这是一些示例 XML 和代码

```
<character_list>
    <character id="00001">
        <name first="Name1"/>
        <type class="Class A" classid="1"/>
    </character>
    <character id="00002">
        <name first="Name2"/>
        <type class="Class A" classid="1"/>
    </character>
    <character id="00003">
        <name first="Name3"/>
        <type class="Class B" classid="2"/>
    </character>
    <character id="00004">
        <name first="Name4"/>
        <type class="Class B" classid="2"/>
    </character>
    <character id="00005">
        <name first="Name5"/>
        <type class="Class B" classid="2"/>
    </character>
    <character id="00006">
        <name first="Name6"/>
        <type class="Class C" classid="3"/>
    </character>
    <character id="00007">
        <name first="Name7"/>
        <type class="Class D" classid="4"/>
    </character>
    <character id="00008">
        <name first="Name8"/>
        <type class="Class D" classid="4"/>
    </character>
</character_list> 
```

这是我的代码

```
<?php
$query = "data.xml";
$xml = file_get_contents($query);

try {
        $dataobj = NEW SimpleXMLElement($xml);
}

catch(Exception $e) {
        echo "Parsing error!  ".$e->getMessage()." in ".basename($e->getFile()).":".$e->getLine()."!";
        exit;
}

$lastclass = 0;

foreach ($dataobj as $xmldata) {

        $currentclass = $xmldata->type['classid'];

        if ($lastclass == $currentclass) {
                echo $xmldata->name['first']." ";
        }
        else
        {
                echo "<br>";
                echo $xmldata->type['class']." - ";
                echo $xmldata->name['first']." ";
        }

        $lastclass = $xmldata->type['classid'];
}

?> 
```

代码输出

```
Class A - Name1 
Class A - Name2 
Class B - Name3 
Class B - Name4 
Class B - Name5 
Class C - Name6 
Class D - Name7 
Class D - Name8 
```

预期产出

```
Class A - Name1 Name2 
Class B - Name3 Name4 Name5 
Class C - Name6 
Class D - Name7 Name8 
```

谁能看到我做错了什么以及如何纠正它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:10:13.340

只需将值转换为这样的字符串：

```
foreach ($dataobj as $xmldata) {

    $currentclass = (string) $xmldata->type['classid'];

    if ($lastclass == $currentclass) {
            echo $xmldata->name['first']." ";
    }
    else
    {
            echo "<br>";
            echo $xmldata->type['class']." - ";
            echo $xmldata->name['first']." ";
    }

    $lastclass = (string) $xmldata->type['classid'];
} 
```

没有强制转换，您正在比较 simplexml 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:59:06.417

假设传入的数据没有排序，因为无论如何您都不应该依赖 xml 中的物理排序，那么不要在处理时立即打印，而是存储在哈希或数组中。然后根据需要将它们分组打印出来。

# c# - .Net SSL/TLS 直通

> ID：13521860
> 
> 赞同：0
> 
> 时间：2012-11-23T00:44:18.387
> 
> 标签：c#, ssl, stream

我想做一个使用 SSL/TLS 的协议分析，幸运的是我可以安装自己的证书，DNS 部分不会成为问题。我的问题是我用什么来做到这一点。我考虑过使用 paros，但它会比它的价值更麻烦。所以我想我可以写两个 C# 应用程序。第一个是伪服务器，另一个是伪客户端。两者之间都有一个tcp连接，然后我可以使用wireshark。问题是，我对流的经验很少。因此，如果有人可以向我指出有用的文章，或者如果代码很短，那么一个示例会很棒。提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:05:41.203

对流进行读/写并不难，你不能只连接流，你需要有自己的代码来做到这一点。最好在它自己的线程上（或工作进程或任务或您需要的任何线程概念）。

```
public void ConnectStreams(Stream inStream, Stream outStream)
{
    byte[] buffer = new byte[1024];
    int bytesRead = 0;

    while((bytesRead = inStream.Read(buffer, 0, 1024)) != 0)
    {
        outStream.Write(buffer, 0, bytesRead);
        outStream.Flush();
    }
} 
```

基本上 Streams 对字节数组进行操作。当我们运行这一行时：

```
while((bytesRead = inStream.Read(buffer, 0, 1024)) != 0) 
```

我们基本上是在说，执行`Read`，`inStream`将读取的字节放入`buffer`索引处`0`（在缓冲区中）并读取最大`1024`字节数。

然后我们将返回值分配给`bytesRead`读取的实际字节数（在这种情况下） `0`，`1024`如果不等于 0，则继续循环。

然后我们简单地将它写回`outStream`包含数据的缓冲区和实际读取的字节数。我们执行刷新以实际强制输出输出而不是堆积在内部缓冲区中。

当流到达 EOF 时，`.Read`将返回 0，循环将退出，您可以继续。这就是您在最简单的级别上“连接”两个流的方式。

# jquery - $.when 不等待 Jstree 打开函数完成

> ID：13521864
> 
> 赞同：1
> 
> 时间：2012-11-23T00:45:37.513
> 
> 标签：jquery, jstree

我有一个 jstree 树，所有树项都是使用 ajax 调用加载到我的服务器以填充每个文件夹的子级。我正在尝试构建一个函数，该函数将向下钻取树并根据我传递给函数的内容选择一个子项。我目前正在使用以下函数来执行此操作，但我的 $.when(...).done(...) 函数没有等待打开发生，然后无法加载它下面的任何子级。

```
function openNodes(tree, nodesToOpenRaw, selectedNode) {
    var treeObj = $(tree);
    treeObj.one('loaded.jstree', function() {
        openNodesRaw(treeObj, nodesToOpenRaw, selectedNode);
    });
}

function openNodesRaw(tree, nodesToOpen, selectedNode) {
    if (tree.jstree('is_open', nodesToOpen[0])) {
        goToNextNode(tree, nodesToOpen, selectedNode);
    } else {
        $.when(tree.jstree("open_node", nodesToOpen[0])).done(function () {
            if (nodesToOpen[0] == null) {
                goToNextNode(tree, nodesToOpen, selectedNode);
                return;
            }
            goToNextNode(tree, nodesToOpen, selectedNode);
        });
    }
}

function goToNextNode(tree, nodesToOpen, selectedNode) {
    if (nodesToOpen.length > 0 && Object.prototype.toString.call(nodesToOpen) === '[object Array]') {
        var newNodesToOpen = nodesToOpen.slice(0);
        newNodesToOpen.shift();
        openNodesRaw(tree, newNodesToOpen, selectedNode);
    } else {
        tree.jstree("select_node", selectedNode, true);
        tree.unbind('ajaxSuccess');
    }
} 
```

为什么 $.when 函数要等待 tree.jstree("open_node",....) 的 ajax 调用完成，然后再继续执行下一个函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T01:13:41.243

`$.when()`期望它的参数是 jQuery $ [.Deferred](http://api.jquery.com/category/deferred-object/)。

大概`tree.jstree()`会返回其他东西。

# python - 碰撞矩形

> ID：13521865
> 
> 赞同：1
> 
> 时间：2012-11-23T00:41:25.820
> 
> 标签：python, pygame

我一直在研究这个游戏，但在碰撞检测方面我有一个问题。我可以检查碰撞并让它返回 True：

例子：

```
def collide(self, EnemyTank):
     tank_collision = pygame.sprite.collide_rect(self.rect, EnemyTank.rect)
     if tank_collision == True:
          return True 
```

然后让它执行如下操作：

```
if player.collide == True:
     e_tank_x += 0 
```

我是编程新手，所以请多多包涵，我正在尽我所能，任何意见或建议也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T00:52:08.680

我不是 pygame 的专家，但它听起来完全合法。我会在您的初始功能中带走中间人：

```
def collide(self, EnemyTank):
      return pygame.sprite.collide_rect(self.rect, EnemyTank.rect) 
```

你需要调整你使用的测试，因为你想实际检查碰撞，而你写它只是测试函数是否存在碰撞；）你也可以使用隐式测试，删除一些不必要的字符（最好的 abith 是最好早点学习）

```
if player.collide(EnemyTank):
     do your action here 
```

祝你游戏好运！

# android - 如何在 Eclipse 中修复我的 Android 项目？

> ID：13521872
> 
> 赞同：0
> 
> 时间：2012-11-23T00:46:41.350
> 
> 标签：android, eclipse, git, project

我已经从另一台 PC 的服务器上下载了我的项目，并将其导入到 Eclipse 中，但现在它确实运行了。

我已经在项目菜单中清理了项目，并修复了 Android 工具中的项目属性。

我收到这些错误：

```
Problems occurred when invoking code from plug-in: "org.eclipse.core.resources".

Android requires compiler compliance level 5.0 or 6.0\. Found '1.7' instead. Please use Android Tools > Fix Project Properties. 
```

修复项目属性不起作用。

我认为问题是相对路径。我有一个错误，例如 res' 不存在。

我在我的项目中在哪里设置这个相对路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:53:03.807

如何更改“编译器合规性级别”？

您可以找到-项目属性> java编译器

1.6 或 1.7 可能会解决您的问题...

# .net - 装箱后 Equals(...) 不返回相同的值

> ID：13521874
> 
> 赞同：0
> 
> 时间：2012-11-23T00:46:47.923
> 
> 标签：.net, vb.net, comparison, equals, value-type

请参阅以下代码：

```
Private Function EqualsNothing(ByVal item As Object) As Boolean
  Return item.Equals(Nothing)
End Function

Console.WriteLine(0.Equals(Nothing)) ' True
Console.WriteLine(EqualsNothing(0)) ' False 
```

我如何避免`Equals`在拳击结构后返回不同的东西？有什么方法可以调用原始`Equals`实现吗？

我知道`=`在这种情况下我可以使用运算符，但`EqualsNothing`应该同时使用类和结构。该`=`运算符不适用于 VB.NET 中的类，也不适用于未实现此运算符的结构。`Equals` **确实**适用于所有东西，但正如我上面演示的那样，`Equals`拳击后不会返回相同的东西。

那么，我应该如何重写`EqualsNothing`以使其适用于类和结构？

**编辑**：我尝试制作`EqualsNothing`通用，但这没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T01:06:50.593

我通常是一个 C# 人，所以我使用 Linqpad 用这段代码演示了这种行为：

```
dim a as object
dim b as object
dim i as object
a = 0.Equals(Nothing)
Console.WriteLine("a={0}", a.ToString())
i = 0
b = i.Equals(Nothing)
Console.WriteLine("b={0}", b.ToString()) 
```

将 0 放入对象 i 会强制框，就像调用方法一样。

结果，如问题所示：

```
a=True
b=False 
```

生成的 IL 为：

```
IL_0001:  ldc.i4.0    
IL_0002:  stloc.3     
IL_0003:  ldloca.s    03 
IL_0005:  ldc.i4.0    
IL_0006:  call        System.Int32.Equals
IL_000B:  box         System.Boolean
IL_0010:  stloc.0     
IL_0011:  ldstr       "a={0}"
IL_0016:  ldloc.0     
IL_0017:  callvirt    System.Object.ToString
IL_001C:  call        System.Console.WriteLine
IL_0021:  nop         
IL_0022:  ldc.i4.0    
IL_0023:  box         System.Int32
IL_0028:  stloc.2     
IL_0029:  ldloc.2     
IL_002A:  ldnull      
IL_002B:  callvirt    System.Object.Equals
IL_0030:  box         System.Boolean
IL_0035:  stloc.1     
IL_0036:  ldstr       "b={0}"
IL_003B:  ldloc.1     
IL_003C:  callvirt    System.Object.ToString
IL_0041:  call        System.Console.WriteLine
IL_0046:  nop 
```

如您所见，区别在于调用 Equals 的实现方式。在第一种情况下，调用 Int32.Equals（Int32 是一个 CLR 结构）。这是一个值等价检查。

在第二种情况下，调用 Object.Equals 进行引用比较——引用是否指向同一个对象？

您不应期望这些方法具有相同的行为。

我建议您需要问自己为什么要将整数与 Nothing 进行比较？它们永远不会是 Nothing，但对象可以，因此系统的行为是完全合适的。

同样，整数不能是空的。将它与 Nothing 进行比较几乎毫无意义——除了 CLR 类型系统有一个 Equals 必须返回某些东西的协定。

所以你应该做的是重新分析你正在做的事情，这样你就永远不会将纯整数与 Nothing 进行比较，也永远不会通过过程或函数的形式参数强制错误框。相反，将它们作为 Integer 按值传递，这样就不会发生装箱。

* * *

如果您绝对必须这样做，请进行两次重载。

```
Private Function EqualsNothing(ByVal item As Integer) As Boolean
Private Function EqualsNothing(ByVal item As Object) As Boolean 
```

CLR 语义将优先选择未装箱的整数。

我在凌晨 3:00 写这篇文章，所以没有检查上面的 VB 语法细节，因为这是对评论讨论的回应。

或者只是强制拆箱：

```
Private Function EqualsNothing(ByVal item As Object) As Boolean

   Dim int As Integer = item

   Return int.Equals(Nothing)
End Function 
```

再一次，它的late-- 语法没有被检查。这样做的风险是，如果对象不是整数，你会得到一个异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T01:01:05.017

您可以使用 IsNothing(object) 而不是使用 Equals

```
Private Function EqualsNothing(ByVal item As Object) As Boolean
 Return IsNothing(item)     
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T17:25:53.770

我不确定这是否适用于所有情况，但您可以尝试这种通用方法：

```
Sub Main
    Console.WriteLine(0.Equals(Nothing)) ' True
    Console.WriteLine(EqualsNothing(0)) 'True
End Sub

Private Function EqualsNothing(Of T)(ByVal item As T) As Boolean
  Dim i As T = Nothing
  Return (item.Equals(i))
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T11:28:00.817

使用类型化对象的魔力对你有利。

```
public function Compare(objLeft as Object,objRight as Object) as integer
    If TypeOf (objLeft) Is Integer Then
        return Cint(objLeft) = Cint(objRight)            
    ElseIf TypeOf (objLeft) Is DateTime Then
        'Your implementation here
    ElseIf TypeOf (objLeft) Is String Then
        'Your implementation here
    End If
end function 
```

这只是一个拆箱对象的问题，但可以扩展为支持您使用的任何类型。只是聪明点，把这个功能放在一个共享对象比较中，这样它就不会被复制粘贴到任何地方。

# php - 将 Magento 新产品 New.php 更改为基于 id 而不是 to & from date

> ID：13521877
> 
> 赞同：0
> 
> 时间：2012-11-23T00:47:08.320
> 
> 标签：php, magento, magento-1.5

我想改变 Magento 核心文件 New.php 将新产品调用到一个块中的方式。

该文件位于 app/code/core/Mage/Catalog/Block/Product/New.php - 我已将此文件复制到本地目录以防止更新。

感兴趣的内容是：

```
protected function _beforeToHtml()
    {
        $todayDate  = Mage::app()->getLocale()->date()->toString(Varien_Date::DATETIME_INTERNAL_FORMAT);

        $collection = Mage::getResourceModel('catalog/product_collection');
        $collection->setVisibility(Mage::getSingleton('catalog/product_visibility')->getVisibleInCatalogIds());

        $collection = $this->_addProductAttributesAndPrices($collection)
            ->addStoreFilter()
            ->addAttributeToFilter('news_from_date', array('or'=> array(
                0 => array('date' => true, 'to' => $todayDate),
                1 => array('is' => new Zend_Db_Expr('null')))
            ), 'left')
            ->addAttributeToFilter('news_to_date', array('or'=> array(
                0 => array('date' => true, 'from' => $todayDate),
                1 => array('is' => new Zend_Db_Expr('null')))
            ), 'left')
            ->addAttributeToFilter(
                array(
                    array('attribute' => 'news_from_date', 'is'=>new Zend_Db_Expr('not null')),
                    array('attribute' => 'news_to_date', 'is'=>new Zend_Db_Expr('not null'))
                    )
              )
            ->addAttributeToSort('news_from_date', 'desc')
            ->setPageSize($this->getProductsCount())
            ->setCurPage(1)
        ;

        $this->setProductCollection($collection);

        return parent::_beforeToHtml();
    } 
```

该文件通过从产品管理员中提取选项字段`New Product From`和日期字段来工作。`New Product To`考虑到我的目录大小和更新这些字段所需的手动管理，这很不方便。所以基本上我想更改功能以获取 MAX 产品 ID（即添加的最新产品）并在此之前运行到 100。这将列出商店中的 100 个最新产品。

我已经尝试过这样的事情，但没有奏效。

```
 $collection = $this->_addProductAttributesAndPrices($collection)
            ->addStoreFilter()
            ->addAttributeToFilter ('entity_id')
            ->addAttributeToSort('entity_id', 'desc')
            ->setPageSize($this->getProductsCount())
            ->setCurPage(1)
        ;

        $this->setProductCollection($collection);

        return parent::_beforeToHtml();
    } 
```

这只是试图根据产品 id (entity_id) 返回产品，但没有返回任何东西（它也没有给出任何 php 错误）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:36:10.557

尝试（删除->addAttributeToFilter（'entity_id'）...在 v1.7 上测试）

```
....
$collection = $this->_addProductAttributesAndPrices($collection)
        ->addStoreFilter()
        ->addAttributeToSort('entity_id', 'desc')
        ->setPageSize($this->getProductsCount())
        ->setCurPage(1);
... 
```

# python - Python：根据用户输入在运行时创建类的实例

> ID：13521878
> 
> 赞同：1
> 
> 时间：2012-11-23T00:47:11.267
> 
> 标签：python

我对python有点陌生，整天都在搜索这方面的信息。我希望能够询问用户他们想要多少个实例，并根据他们的输入，根据他们的要求创建尽可能多的类实例。

我还希望能够让每个实例的名称基于输入，例如询问人的姓名或其他内容。

```
NumPlayers = input("How many people are playing? ")
for i in range(0, int(NumPlayers)-1):
    name = input("What is your name? ")
    name = Player() 
```

这将类似于`John = Player()`但“约翰”将是用户给我们的任何名称，并且用户想要的玩家数量将有多少。

从我今天的研究来看，允许人们确定自己实例的名称似乎不是一个好主意，所以在这一点上，我在想更多的事情：

```
NumPlayers = input("How many people are playing? ")
for i in range(0, int(NumPlayers)-1):
    name = input("What is your name? ")
    Player+i = Player(name) 
```

`Player1 = Player("John")`对于更多玩家来说，这将与等相同。这是可能的吗？这真的难倒我。只是为了澄清一些事情，类本身已经在代码中，在提供的代码中 Player 是一个已经用方法和所有东西定义的类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T00:48:34.110

您正在寻找的是一个数据结构，特别是一个[list](http://docs.python.org/3/library/stdtypes.html#typesseq)。

```
no_players = input("How many people are playing? ")
players = []
for _ in range(int(no_players)):
    name = input("What is your name? ")
    players.append(Player(name)) 
```

这将产生一个列表`[Player(...), Player(...), ...]`。这可以在其他操作中被索引（ `players[2]`）或迭代（ ）。`for player in players:`我建议您阅读[文档](http://docs.python.org/3/library/stdtypes.html#typesseq)以获取更多信息。

[附带说明一下，使用列表](http://www.youtube.com/watch?v=pShL9DCSIUw)推导可以更好地构造一些列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:59:36.657

正如 Lattyware 建议的那样，您正在寻找一个将您的玩家放入的列表。我可以建议稍微修改一下您的程序，以接受尽可能多的玩家，只要他们输入一个新名称？

```
players = []
while True:
    playername = input("Insert a new player (empty to begin):")
    if playername:
        players.append(Player(playername))
    else:
        break 
```

# asp.net - WebClient 下载一个空文件

> ID：13521882
> 
> 赞同：3
> 
> 时间：2012-11-23T00:48:10.020
> 
> 标签：asp.net, web-services, webclient

```
Dim webClient As New WebClient()
webClient.DownloadFileAsync(New Uri(<<URL>>), <<Workstation Folder>>) 
```

使用上面的代码，可以通过 URL 下载文件。如果我从使用 Response.BinaryWrite 的 asp 页面下载文件，则已下载空文件。

有谁知道如何解决它？

使用时

```
webClient.DownloadFile 
```

我收到此错误消息：底层连接已关闭：接收时发生意外错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T14:39:05.803

您是否尝试过从 Web 浏览器（IE、Chrome、Firefox...）手动从 asp 页面下载文件？这样您可以检查错误是在客户端还是在服务器端。

也许在asp页面代码中您忘记在Response.BinaryWrite之后使用Response.End？

希望这个提示对你有帮助！

# webview - winrt：在 webview 中加载本地 html 及其资源

> ID：13521884
> 
> 赞同：3
> 
> 时间：2012-11-23T00:48:44.747
> 
> 标签：webview, microsoft-metro, windows-runtime

我目前正在开发一个 WinRT 应用程序，我从中加载本地 HTML 文件`Windows.Storage.ApplicationData.Current.LocalFolder`。我想知道加载嵌入在 HTML 文件中的图像、音频、视频、CSS、JavaScript 等资产的最佳方式是什么。

目前，我正在将这些文件写入其中，`Windows.ApplicationModel.Package.Current.InstalledLocation`但是一旦从商店部署应用程序或通过 Windows PowerShell 安装 AppPackage，就无法再访问这些文件，除非您将“Program Files/WindowsApps”文件夹的所有权更改为当前用户或“所有人”。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T05:55:16.873

我不确定你到底在问什么。唯一应该是`Windows.ApplicationModel.Package.Current.InstalledLocation`与您的 AppPackage 一起安装的文件，即是您的应用程序分发的一部分。您的应用不应该（甚至不允许）在其中存储任何文件。

运行时生成的任何文件都应存储在 和 之一中，`Windows.Storage.ApplicationData.Current.LocalFolder`具体取决于您希望它们的保存方式。此规则的唯一例外是当您希望用户甚至从您的应用程序外部访问这些文件时 - 那么您应该将它们放入库中（并要求访问它）或使用文件选择器向用户询问位置.`Windows.Storage.ApplicationData.Current.RemoteFolder``Windows.Storage.ApplicationData.Current.TempFolder`

编辑：

加载本地 HTML 资源非常有限，除非它们与应用程序一起分发，即它们存储在协议中`InstalledLocation`并通过`ms-appx-web`协议访问。如[文件](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview)所述，`WebView`控件不支持`ms-appdata`用于从或检索数据`LocalStorage`的协议：`RemoteStorage``TempFolder`

> 此外，WebView 不支持 ms-appdata: 方案，尽管它支持 ms-appx-web: 方案。这使您能够在项目中加载内容文件。

这或多或少会带走您在 C# 项目中的所有选项。您可以使用另一种 HTML 查看器控件，但我[只知道一个](https://mytoolkit.codeplex.com/wikipage?title=HtmlTextBlock)，它甚至还没有完成。

在 JavaScript 中，情况只是稍微好一点。`ms-appdata`协议仅[支持数据文件](http://msdn.microsoft.com/en-us/library/windows/apps/hh781215.aspx)：

> 有时，参考从 Internet 下载到应用程序本地 ApplicationData 存储的资源（通过 Windows 运行时 API）很有用。要引用此类内容，您必须使用方案“ms-appdata:”，以及 ApplicationData 本地存储中文件的路径。请注意，出于安全原因，您无法导航到已下载到此位置的 HTML，并且您无法运行任何可执行或潜在的可执行代码，例如脚本或 CSS。它适用于图像或视频等媒体。

这意味着您可以执行以下操作：

```
<img src="ms-appdata:///local/img/coal.jpg" /> 
```

但不是：

```
<iframe src="ms-appdata:///local/index.html" /> 
```

`ms-appdata`协议语法有[据可查](http://msdn.microsoft.com/en-us/library/windows/apps/hh781215.aspx)，以防您仍然会发现它的用途。

# python - 使用 web.py 的 update() 出错

> ID：13521890
> 
> 赞同：0
> 
> 时间：2012-11-23T00:49:20.067
> 
> 标签：python, python-2.7, web.py

我正在尝试通过带有 web.py 的表单 POST 更新数据库行，但出现 MySQL 语法错误。我一般是 Python 新手，所以请原谅我的新手问题。这是我正在运行的代码：

```
 def Update(webInput):
      db.update('category', where='category_name=' + webInput.category_name)
      return; 
```

我得到的错误是

`ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE category_name=' at line 1")`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:28:36.040

请[检查](http://webpy.org/docs/0.3/api#web.db)db.update 的文档。正确的调用是：

```
db.update('category', where='category_name = $category_name', vars=webInput, **webInput) 
```

假设`webInput`持有要设置的新数据。

`$category_name`在 where 子句中提取`vars`和清理（即使您的代码有效，它也容易受到 sql 注入的攻击）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T02:46:19.967

看起来您忘记传递要更新“类别”的数据。

尝试：

```
db.update('category', where='category_name=' + webInput.category_name, 'new data here') 
```

# java - javax.xml.ws.WebServiceException：找不到在 wsdl 中命名的服务

> ID：13521894
> 
> 赞同：0
> 
> 时间：2012-11-23T00:50:14.170
> 
> 标签：java, web-services, wsdl, cxf, tomcat7

我使用 CXF 2.7 和 tomcat 7。我使用 eclipse Juno 创建了一个 Web 项目，它公开了一些 Web 服务。在 tomcat 上部署后，我从浏览器获取 wsdl，一切看起来都很好。

然后我创建了第二个作为消费者的 Web 项目，并将其部署在 tomcat 上。当我尝试从消费者调用任何 Web 服务时，我收到以下错误：

[javax.xml.ws.WebServiceException：在 wsdl http://xxxx:8088/TaxisNetTestUI/services/UserSrvImplPort?wsdl](http://x.x.x.x:8088/TaxisNetTestUI/services/UserSrvImplPort?wsdl)中找不到名为 {http://service.example.com/}UserSrvImpl 的服务

我的服务调用示例是：

```
UserSrvImpl service = new UserSrvImpl();
UserSrvImplPortType client = service.getUserSrvImplPort();
client.register(ObjetValue); 
```

怎么了？

我的 wsdl 是： [WSDL 文件](https://docs.google.com/open?id=0BxuK2FNeTzsdeDJaSVQ2RHg2YnM)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:53:23.520

我猜你需要

```
UserSrv service = new UserSrvImpl();
UserSrvImplPortType client = service.getUserSrvImplPort();
client.register(ObjetValue); 
```

使用接口而不是实现类作为链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T16:01:38.310

我再次创建了 Web 服务，但这次我手动创建了我的界面。我创建了一个实现该接口的类，然后创建了 Web 服务，一切正常！

# c# - XAML LongListSelector 不更新项目模板大小

> ID：13521896
> 
> 赞同：0
> 
> 时间：2012-11-23T00:50:20.617
> 
> 标签：c#, silverlight, xaml, longlistselector

我有一个 LongListSelector 绑定到对象的 observablecollection 并点击 LongListSelector 会垂直扩展点击的项目。但是，当再次点击时（它会缩小项目），项目的高度保持在展开时的状态。这在列出的数据中留下了巨大的空白。当您再次扩展/收缩它时，问题就消失了，而且每个项目只发生一次，这真的很奇怪。我得到的结论是每个项目模板中的 LongListSelector 网格没有正确更新（它设置为自动）。

我环顾四周，一般的反应是在 itemtemplate 中重置 Grid 的大小。虽然我更喜欢更优雅的解决方案，因为这需要获取 Grid 并重置它的 Height 值。

这是 LongListSelector 的代码：

```
<phone:LongListSelector x:Name="all_items_list" Margin="0,0,-12,0" ItemsSource="{Binding All_Items}" Tap="item_list_Tap" ItemTemplate="{StaticResource all_down_template}"/> 
```

它是 ItemTemplate：

```
 <DataTemplate x:Key="all_down_template" x:Name="template">
            <Grid x:Name="grid" Margin="0,0,0,15">
                <!--Show this when shrunk-->
                <TextBlock Text="{Binding Name}" Style="{StaticResource PhoneTextExtraLargeStyle}" FontSize="19" Height="25" VerticalAlignment="Top" Margin="45,0,10,0" TextWrapping="Wrap"/>

                <!-- Show this when expanded -->
                <ProgressBar Value="{Binding Percent}" Foreground="{Binding ProgressBar}" BorderBrush="{Binding ProgressBar}" Margin="34,20,0,0" HorizontalAlignment="Left" Width="421" Height="25" Visibility="{Binding Visibility}" VerticalAlignment="Top"/> 
            </Grid>
    </DataTemplate> 
```

但在所有示例中，都没有使用 LongListSelector。我查看了 LongListSelector 中的所有功能，但似乎没有一个显示所选项目 ItemTemplate。注意：我可以在 LongListSelector 上使用 FindName，但这只会让我获得 DataTemplate（我已经可以使用它的 x:Name 访问它），并且从那里，我无法对 DataTemplate 做任何事情。

如果有人知道解决方案，那就太好了！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:55:00.927

我通过更改 Visibility 三次来解决此错误，等待每次之间的布局传递。我通过链接 SizeChanged 处理程序来做到这一点，如下所示。

```
private void OnToggleText(object sender, System.Windows.Input.GestureEventArgs e)
{
    Grid g = (Grid)sender;
    g.Children[1].Visibility = g.Children[1].Visibility == Visibility.Collapsed ? Visibility.Visible : Visibility.Collapsed;
    g.SizeChanged += g_SizeChanged;
}

void g_SizeChanged(object sender, SizeChangedEventArgs e)
{
    Grid g = (Grid)sender;
    g.SizeChanged -= g_SizeChanged;
    g.SizeChanged += g_SizeChanged2;
    g.Children[1].Visibility = g.Children[1].Visibility == Visibility.Collapsed ? Visibility.Visible : Visibility.Collapsed;
}

void g_SizeChanged2(object sender, SizeChangedEventArgs e)
{
    Grid g = (Grid)sender;
    g.SizeChanged -= g_SizeChanged2;
    g.Children[1].Visibility = g.Children[1].Visibility == Visibility.Collapsed ? Visibility.Visible : Visibility.Collapsed;
} 
```

# python - 如何使用 NLTK 正确进行多类分类？

> ID：13521898
> 
> 赞同：6
> 
> 时间：2012-11-23T00:50:33.997
> 
> 标签：python, machine-learning, nltk

所以，我正在尝试进行文本多类分类。我一直在阅读很多旧问题和博客文章，但我仍然无法完全理解其中的概念。

我也尝试了这篇博文中的一些例子。[http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/](http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/)

但是当涉及到多类分类时，我不太明白这一点。假设我想将文本分类为多种语言，法语、英语、意大利语和德语。我想使用 NaviesBayes，我认为它是最容易开始的。从我在旧问题中读到的内容来看，最简单的解决方案是使用一对多。因此，每种语言都有自己的模型。所以，我会有法语、英语和意大利语的 3 个模型。然后我会针对每个模型运行一个文本，并检查哪个模型的概率最高。我对么？

但是在编码方面，在上面的示例中，他有这样的推文，这些推文将被分类为正面或负面。

```
pos_tweets = [('I love this car', 'positive'),
              ('This view is amazing', 'positive'),
              ('I feel great this morning', 'positive'),
              ('I am so excited about tonight\'s concert', 'positive'),
              ('He is my best friend', 'positive')]

neg_tweets = [('I do not like this car', 'negative'),
              ('This view is horrible', 'negative'),
              ('I feel tired this morning', 'negative'),
              ('I am not looking forward to tonight\'s concert', 'negative'),
              ('He is my enemy', 'negative')] 
```

这是积极的还是消极的。那么，在为法语训练一个模型时，我应该如何标记文本？会是这样吗？所以这会是积极的吗？

```
[('Bon jour', 'French'),
   'je m'appelle', 'French'] 
```

负面的将是

```
[('Hello', 'English'), 
   ('My name', 'English')] 
```

但这是否意味着我可以只添加意大利语和德语并且只有一个模型可以支持 4 种语言？或者我真的不需要负数？

那么，问题是使用 ntlk 进行多类分类的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T01:39:50.483

不需要使用朴素贝叶斯的一对多方案——它是一个开箱即用的多类模型。只需向表示语言`(sample, label)`的分类器学习器提供一个对列表。`label`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-28T09:06:59.787

NLTK 中的分类器 ( [http://www.nltk.org/api/nltk.classify.html](http://www.nltk.org/api/nltk.classify.html) ) 可以有多种变体，了解细微差别很重要。

最简单的变体是两个类别之间的区别，例如正面与负面情绪、男性与女性。（[http://www.nltk.org/api/nltk.classify.html#module-nltk.classify.positivenaivebayes](http://www.nltk.org/api/nltk.classify.html#module-nltk.classify.positivenaivebayes)）

第二种变体是当您有多个类别（两个或更多）时，例如法语、德语或英语的文本，并且您假设每个文本都使用一种语言。请注意，NLTK 中的语言并未将其描述为“多类”，当您对此不熟悉时，这可能会产生误导，这是可以理解的。就这样想吧。分类器不会将一个文本分配给多个类别，例如德语和法语，而只会分配给一个类别。

最后是多分类器，它的不同之处在于给定的输入可以分配给多个类别，例如 50% 法语和 50% 德语或 40% 英语、30% 德语和 30% 法语。

# oracle - 数值或值错误：字符串缓冲区太小

> ID：13521899
> 
> 赞同：0
> 
> 时间：2012-11-23T00:50:41.237
> 
> 标签：oracle, oracle-apex, ora-06502

我在使用 oracle application express 中的这个简单查询时遇到了问题，并且收到了这个错误：

> 无法解析查询，请检查查询的语法。(ORA-06502: PL/SQL: 数字或值错误: 字符串缓冲区太小)"

```
SELECT E.EQUIPMENTID, E.EQUIPMENTDESCRIPTION
From EQUIPMENT as E
left outer join EQUIPMENT_CHECKOUT as EC 
on E.EQUIPMENTID = EC.EQUIPMENTID
WHERE EC.EQUIPMENTID is null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:19:33.507

我认为在这种情况下该错误可能会产生误导。指定表别名时不包括在内`AS`，即：

```
SELECT E.EQUIPMENTID, E.EQUIPMENTDESCRIPTION
From EQUIPMENT E
left outer join EQUIPMENT_CHECKOUT EC
on E.EQUIPMENTID = EC.EQUIPMENTID
WHERE EC.EQUIPMENTID is null 
```

顺便说一句：在 Apex 中，您可以在 SQL 命令窗口（在 SQL Workshop 中）尝试 SQL 语句，这通常会提供更好的语法错误信息。

# python-3.x - Python中的函数和字典

> ID：13521900
> 
> 赞同：0
> 
> 时间：2012-11-23T00:50:54.670
> 
> 标签：python-3.x

```
def build_dictionary(infile):  
    count_dict={}  
    for line in infile:  
        line=line.strip()  
        if len(line) and line[0]!="-":  
            lst=line.split(",")  
            lastname=lst[0].strip()  
            for lastname in lst:  
                if lastname not in count_dict:  
                    count_dict[lastname]=1  
                else:  
                    count_dict[lastname]=count_dict[lastname]+1  
                return count_dict  

def main():  
    import os.path  
    while True:  
        try:  
            name1=input("Enter input name:")  
            infile=open(name1,"r")  
            result=build_dictionary(infile)  
            print(result)  
            break  
        except:  
            print("Error in code")  

main() 
```

我有这个程序，我希望它获取一个包含姓氏、名字的文件，取姓氏并查看它们在字典中出现的次数。我唯一的问题是它计算第一个姓氏然后停止，为什么它没有遍历整个字典

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:07:04.757

用这个替换你的 build_dictionary 方法：

```
def build_dictionary(infile):
    count_dict={}
    for line in infile:
        line=line.strip()
        if len(line) and line[0]!="-":
            lst=line.split(",")
            lastname=lst[0].strip()
            if lastname not in count_dict:
                count_dict[lastname]=1
            else:
                count_dict[lastname]=count_dict[lastname]+1
    return count_dict 
```

# css - a:hover 上的 CSS3 动画

> ID：13521910
> 
> 赞同：3
> 
> 时间：2012-11-23T00:52:16.090
> 
> 标签：css, animation, href, css-animations

我是 CSS 新手，现在面临一个我无法摆脱的问题。我使用 css3 关键帧制作了动画。每当有人将其悬停时，此动画只会更改图像的旋转。现在我想把这张图片链接到一个网站，但是我这样做的方式，动画根本没有运行。

```
<div class="tunein"><a href="http://www.google.com/">
<img src="https://www.google.com/images/srpr/logo3w.png"></a></div>

.tunein{    
    position: absolute; 
    top: 40%;
    left: 10%;    
    display: block;
    -webkit-transform:rotate(12deg);
    -moz-transform:rotate(12deg);
}

.tunein a:hover{
    animation: rotate 0.5s ease-out;
    -moz-animation:rotate 0.5s ease-out; 
    -webkit-animation:rotate 0.5s ease-out; 
} 
```

js 小提琴为您服务：http: [//jsfiddle.net/9jMqc/](http://jsfiddle.net/9jMqc/)

当我将类标签添加到 a 元素中时，偏移量发生了巨大变化，但动画有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T00:56:35.673

我建议将事件移动到`<a>`链接上，因此按照[http://jsfiddle.net/9jMqc/2/移动它们](http://jsfiddle.net/9jMqc/2/)

```
.tunein a {
    display: block;
    -webkit-transform:rotate(12deg);
    -moz-transform:rotate(12deg);        
}

.tunein a:hover{
    animation: rotate 0.5s ease-out;
    -moz-animation:rotate 0.5s ease-out; 
    -webkit-animation:rotate 0.5s ease-out; 
} 
```

I think you were perhaps missing `display: block` on the `<a>` link previously - Just for reference, you shouldn't need to use `display: block` on `<div></div>`'s as that's their default unless otherwise declared in your CSS.

# android - 如何在特定时间内重复播放相同的声音？

> ID：13521912
> 
> 赞同：1
> 
> 时间：2012-11-23T00:52:28.757
> 
> 标签：android, android-mediaplayer, countdowntimer

这是我想要实现的目标：当用户按下“按钮 A”时，30 秒的“sound.mp3”开始反复播放 200 秒然后停止。“按钮 B”播放相同的声音 400 秒并停止。这是我最后一次尝试，使用 CountDownTimer （不确定这是否是最好的方法，甚至可能）：

```
public class MyClass extends Activity {

MediaPlayer player_test;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_rain);
    my_player();
}

public void my_player(){
        player_test = MediaPlayer.create(getApplicationContext(), R.raw.mysound);
        player_test.setLooping(true);
        player_test.start();
    }

public void onCompletion(MediaPlayer player_test) {
        player_test.stop(); 
            player_test.release(); 
        } 
});         

public void player_OnClick(View v) {

    switch (v.getId()) {
    case R.id.button_a:
          new CountDownTimer(200000, 1000) {       
                public void onTick(long millisUntilFinished) {
                    player_test.start();
                }       
               public void onFinish() {          
                   player_test.pause();
               }   
             }.start();
        break;
      case R.id.button_b:
          new CountDownTimer(400000, 1000) {       
            public void onTick(long millisUntilFinished) {
                player_test.start();       
            }       
           public void onFinish() {          
             player_test.pause(); }   
         }.start();
   break;
      }
} 
```

谢谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:04:08.097

这是一个很好的方法。但是，您应该修复代码中的一些问题：

*   不要调用`player_test.start()`您的`my_player()`方法，它会导致播放器在您的活动创建时开始播放。您应该只`player_test`在该方法中实例化对象。
*   不要`player_test.start()`调用`CountDownTimer`. 您只需调用一次即可开始播放。

`player_test.start()`每当单击任何按钮 A 或 B 时调用。

# wordpress - 根据容器大小调整字体大小

> ID：13521917
> 
> 赞同：1
> 
> 时间：2012-11-23T00:53:13.370
> 
> 标签：wordpress, dynamic, wordpress-theming, font-size

我正在调整一个 wordpress 主题，让整个页面的文本根据每个容器 div 的宽度进行缩放会很好。

到目前为止，所有宽度都以 % 为单位，但正如 w3c 所提到的，font-size 属性只考虑了父级的字体大小，而不是容器 div 的大小。

正如多个其他答案所暗示的那样，我可以使用 javascript 来做到这一点并定位每个容器 div，尽管从我的角度来看这是一个非常有用的答案并不适用于我的问题，因为我不知道所有可能的容器 id 或类，因为我必须考虑可能输出文本等的未来插件安装

那么还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T00:57:29.113

不是没有Javascript。CSS`font-size`基于行高的百分比，没有基于宽度的控件。

我强烈建议您更改您的设计。

如果您想尝试使用它，我不确定您对 Javascript 的熟练程度，但您可以遍历 DOM 节点，寻找共同条件，找到 DIV 的宽度，然后继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:57:17.340

一种可能的解决方案可能是仅针对 body 元素并更改其字体大小，这样每个字体大小都应因父元素的变化而适应。

这个解决方案结合媒体查询来定位最常见的屏幕尺寸应该是完美的。

基于此，我拼凑了以下（[http://jsfiddle.net/8TrTU/73/](http://jsfiddle.net/8TrTU/73/)）

```
function adaptFontSize() {
var defaultW = 100;
var defaultFontSize = 16;
var  width = parseInt($("#header").width());
var fontSize = (defaultFontSize * width)/defaultW+"px";

$("#page").css('font-size', fontSize);

// alert(width +" "+ defaultFontSize * width+ " " fontSize);
}
$(document).ready(adaptFontSize);
$(window).resize(adaptFontSize); 
```

意见？可能的改进？

# safari - Recapthca 未在 Safari 中显示

> ID：13521921
> 
> 赞同：0
> 
> 时间：2012-11-23T00:53:42.533
> 
> 标签：safari, captcha, recaptcha

回顾没有显示在我的 Mac 上。我正在使用recaptcha 库，所以我不知道发生了什么。知道这可能是什么吗？

这是链接：[http ://txtclub.co/members/register.php](http://txtclub.co/members/register.php)

# jquery - jquery easytabs - 如何使选项卡成为弹出链接？

> ID：13521922
> 
> 赞同：0
> 
> 时间：2012-11-23T00:54:07.767
> 
> 标签：jquery, html

这是我的导航，我使用 easytabs jquery 脚本：

```
 <!-- Navigation -->
        <div class="navigation">
            <ul class="tabs">
                <li><a href="#home">About Me</a></li>
                <li><a href="#cv" target="_blank">CV</a></li> 
                <li><a href="#research">Research</a></li>
                <li><a href="#teaching">Teaching</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </div>
        <!-- /Navigation --> 
```

我想将#cv 选项卡更改为 pdf 弹出链接。我曾尝试使用内联 jscript，但没有奏效。有什么解决办法吗？

[这就是你可以看到它的链接](http://www.eminli.net/test)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:13:04.757

将您的 easyTabs 初始化更改为：

```
$content.easytabs({
        tabs                :"> .navigation > ul > li:not(.external)",
        animate             : true,
        updateHash          : true,
        animationSpeed      :'normal',
    }); 
```

`external`然后在您的 CV 链接中添加一个类：

```
<ul class="tabs">
    <li><a href="#home">About Me</a></li>
    <li><a href="#cv" target="_blank" class="external">CV</a></li> 
    <li><a href="#research">Research</a></li>
    <li><a href="#teaching">Teaching</a></li>
    <li><a href="#contact">Contact</a></li>
</ul> 
```

# javascript - 如何在点击事件中打开 JQuery UI 组合框？

> ID：13521923
> 
> 赞同：1
> 
> 时间：2012-11-23T00:54:35.793
> 
> 标签：javascript, jquery-ui

当我点击它时，我试图打开一个 JQuery UI 组合框，基本上我想要的是：

```
$("#auto").bind("focus", function () {
    this.value = '';
    $(this).autocomplete("search", '');
});
​ 
```

[自动打开](http://jsfiddle.net/gEuTV/)

但是在组合框中。

问题是我无法获得要触发的焦点或单击事件。

我已经尝试了单击并绑定焦点事件：实际字段，由 jquery 创建的输入字段，但它们都没有工作。

我怎样才能让它在 JQueryUI ComboBox 中工作？

**更新**

我刚刚注意到，当我打开选项并将鼠标悬停在选项上时，我得到了事件触发器。但是，当我单击输入部分时，我想要再次触发它。

**代码 **

剃刀代码

```
<div class="editor-label">
            @Html.LabelFor(model => model.Lugar, "Nombre del Lugar")
        </div>
        <div class="editor-field">
            @Html.DropDownList("Lugar", String.Empty)
            @Html.ValidationMessageFor(model => model.Lugar)
        </div> 
```

JavaScript 代码

```
$("#Lugar").combobox(); 
```

活动

```
$("#Lugar").click(function () {
        alert("Handler for .click() called.");
    });

$("#Lugar-input").bind("focus", function ()
    {
        alert("a");
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:49:21.177

在单击事件中创建输入字段时添加对函数 openMethod 的调用

```
var input = this.input = $("<input>")
                    //.appendTo(wrapper)
                    .insertAfter( select )
                    .val(value)
                    .attr("title", "")
                    **.click(openmethod)** 
```

**函数开放方法**

```
var openmethod = function () {
                    // close if already visible
                    if (input.autocomplete("widget").is(":visible")) {
                        input.autocomplete("close");
                        return;
                    }

                    // work around a bug (likely same cause as #5265)
                    $(this).blur();

                    // pass empty string as value to search for, displaying all results
                    input.autocomplete("search", "");
                    input.focus();
                }; 
```

# asp.net-mvc - 如何在仅更新一小部分的同时将复杂对象保留在视图中

> ID：13521925
> 
> 赞同：11
> 
> 时间：2012-11-23T00:55:07.937
> 
> 标签：asp.net-mvc, asp.net-mvc-3, xml-serialization

我觉得这可能是一个基本问题！

我有一个复杂的对象，即一个包含其他对象列表属性的文档对象。它是通过反序列化一些 XML 创建的。

我想将整个模型传递给视图

```
Return ViewResult(MyDoc) 
```

在视图中编辑了一些属性。然后将控制权返回给 Post Controller：

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Index(Document myDoc) 
```

“myDoc”现在只代表我的表单字段。我怀疑这是 ModelBinding 在工作。所以我想我需要将我的复杂对象保存在隐藏字段中（示例会很棒）或作为会话对象。但是我有点困惑我的更新字段如何合并回持久对象（隐藏或会话）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T02:23:32.117

将那个大对象存储在视图中是否完全有必要？

似乎无法控制该`View`内容，因此您可能不想将所有数据发送到`View`. 似乎您正在应用一种基于 的思维方式`ViewState`，这与 MVC、恕我直言不太适合。

`View`和之间的通信`Controller`是通过 来完成`ViewModels`的，通常不需要存储任何大的序列化数据并在与服务器交互时来回进行。

您不能创建一个`ViewModel`仅代表视图（字段）的有用数据，并`Action`通过在 POST 期间接收该数据`ViewModel`，然后将您从视图获得的信息与您从 XML 加载的信息同步吗？只有在那个时候？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T02:27:57.423

你是对的，这是工作中的模型绑定。

当您使用 HtmlHelpers 时，绑定几乎会自动发生，例如：

```
@Html.TextboxFor(model => model.PropertyName) 
```

这条线实际上创造了一些像这样的东西：

```
<input type="textbox" id="Modelobject_PropertyName" name="ModelObject.PropertyName" /> 
```

然后，当您提交表单时，`DefaultModelBinder`能够反序列化 POST 值并创建给定类型的对象（至少它会尝试），如果找不到相应的条目，则该属性将为 null，如果条目没有对应的属性，它将被忽略（除非你有其他参数）。

您可以阅读这篇[文章](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)，它有点旧，但仍然非常准确。

例如：

假设您有一个简单的对象：

```
public class IndexModel
{
    public string MyProperty { get; set; }
    public bool MyCheckbox { get; set; }
} 
```

一个简单的控制器：

```
public class TestingController : Controller
{
    [OutputCache(Duration=0, NoStore = true)]
    public ActionResult Index()
    {
        return View(new IndexModel { MyProperty = "hi" });
    }

    [HttpPost]
    [OutputCache(Duration=0, NoStore = true)]
    public ActionResult Index(IndexModel model)
    {
        model.MyProperty += "!";
        ModelState.Clear();
        return View(model);
    }
} 
```

和一个简单的观点：

```
@model MvcApp.Models.IndexModel

@using (Html.BeginForm())
{
    <div>
        @Html.LabelFor(model => model.MyProperty)<p />
        @Html.TextBoxFor(model => model.MyProperty) 
    </div>
    <div>
        @Html.LabelFor(model => model.MyCheckbox)<p />
        @Html.CheckBoxFor(model => model.MyCheckbox)
    </div> 

    <input type="submit" />
} 
```

当您提交表单时，您将看到模型已完全重新创建。

如果您不想显示属性的实际值，但仍需要保留它：

```
@Html.HiddenFor(model => model.MyProperty) 
```

这将生成一个隐藏字段，该字段将被回发并因此保留。

快乐编码！

# ios - 核心数据错误

> ID：13521929
> 
> 赞同：0
> 
> 时间：2012-11-23T00:55:20.533
> 
> 标签：ios, xcode, core-data

我正在按照本书教程学习核心数据（Apress Pro Core Date for iOS 2nd Edition）。而且我认为我遵循正确，但遇到了一个我不知道如何解决的错误。代码张贴[在这里](https://dl.dropbox.com/u/81707637/OrgChart.zip)。

我不仅对纠正问题感兴趣，而且对您为找出问题所在所采取的步骤感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:07:32.020

错误消息是“无法使用 nil 模型创建 NSPersistentStoreCoordinator”，这表明您的`managedObjectModel`方法有问题。

首先，您将模型文件命名为“Model”，但该方法正在寻找一个名为“OrgChart”的文件，因此请重命名您的模型文件或更改`managedObjectModel`方法中的名称。

之后，它仍然不起作用，并且在`managedObjectModel`方法中设置断点表明它实际上从未被调用过。那是因为你有一个错字，你调用了方法`mangedObjectModel`而不是`managedObjectModel`. 添加缺失的 后`a`，您的应用程序应该运行。

# c++ - 输出中的垃圾值

> ID：13521931
> 
> 赞同：0
> 
> 时间：2012-11-23T00:55:54.200
> 
> 标签：c++

我有一个以下程序，在其中，我试图设置错误的位置，并且我在平均值、最小值和最大值中得到垃圾值。如果数组的输出是无效值，我们可以得到 NOVALUE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:42:19.507

当您有“错误的位置”时，您可以添加一个检查，然后使用标志或在平均值、最小值和最大值中存储不同的标志值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T00:57:11.617

不，你不能。修复您的程序，以免出现无效值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T01:03:21.700

你的问题表述得不好，但我想我知道你的意思。最好的是：不要向您的统计数据添加无效值。
这会破坏你的统计数据。

下一步：记录您在统计中添加了多少值。如果为 0，则统计为空。当您使用最大值或特殊值初始化最小值和最大值时，这一点尤其重要，当第一个实际值出现时，这些值将被覆盖。

# r - mlogit 中的错误：solve.default(H, g[!fixed]) 中的错误：系统在计算上是奇异的：倒数条件数 = 3.4767e-18

> ID：13521937
> 
> 赞同：7
> 
> 时间：2012-11-23T00:56:44.563
> 
> 标签：r

我有一个长格式的联合调查数据。前几行如下所示：

```
 ID alt choice size tar length brand flavor gender age yr_smoke num_smoke job
 1  1   1     no    1   1      1     1      1      2  35       10        20   1
 2  1   2     no    1   1      1     1      1      2  35       10        20   1
 3  1   3     no    1   1      1     1      1      2  35       10        20   1
 4  1   4     no    1   1      1     1      1      2  35       10        20   1
 5  1   5     no    1   1      1     1      1      2  35       10        20   1
 6  1   6     no    1   1      1     1      1      2  35       10        20   1 
```

我使用 mlogit.data 作为：

```
data_mlogit_ct1_test2 <- mlogit.data(data_mlogit_ct1_test1,choice="choice",
shape="long",alt.var="alt") 
```

转换后的数据的前几行如下所示：

```
 ID alt choice size tar length brand flavor gender age yr_smoke num_smoke job
   1.1  1   1  FALSE    1   1      1     1      1      2  35       10        20   1
   1.2  1   2  FALSE    1   1      1     1      1      2  35       10        20   1
   1.3  1   3  FALSE    1   1      1     1      1      2  35       10        20   1
   1.4  1   4  FALSE    1   1      1     1      1      2  35       10        20   1
   1.5  1   5  FALSE    1   1      1     1      1      2  35       10        20   1
   1.6  1   6  FALSE    1   1      1     1      1      2  35       10        20   1 
```

现在我正在尝试将 mlogit 拟合为：

```
 fit_mlogit_ct11 <- mlogit(choice~size+tar+length+brand+flavor, 
                           data_mlogit_ct1_test1,shape="long",chid.var="ID",
                           alt.var="alt",method="bfgs",heterosc=TRUE,tol=10) 
```

我收到了这个错误：

solve.default(crossprod(attr(x, "gradi")[, !fixed])) 中的错误：Lapack 例程 dgesv：系统完全是奇异的

然后我做了：

```
 fit_mlogit_ct11 <- mlogit(choice~size+tar+length+brand+flavor, data_mlogit_ct1_test2) 
```

现在我得到了：

solve.default(H, g[!fixed]) 中的错误：系统在计算上是奇异的：倒数条件数 = 3.4767e-18

有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T11:05:46.293

我认为问题在于您没有正确定义您的个人特定变量。根据包手册，当您使用 mlgit 功能构建模型时，您可以使用：| 将替代特定变量与单个特定变量分开。例如：

```
fit_mlogit_ct11 <- mlogit(choice~1|size+tar+length+brand+flavor, 
                           data_mlogit_ct1_test1,shape="long",chid.var="ID",
                           alt.var="alt",method="bfgs",heterosc=TRUE,tol=10) 
```

这只是说您的所有变量都是特定于个人的，并且您只接受替代特定的截距。但实际上正如上面已经提到的那样，您的数据看起来很奇怪，因为它们看起来相同，因为您只有单个特定变量。这最终会导致奇点（您的变量与 1 相互关联）。

# service - Web 托管的 Windows Workflows Services 4.5 的并行版本控制

> ID：13521938
> 
> 赞同：1
> 
> 时间：2012-11-23T00:57:05.827
> 
> 标签：service, workflow

我试图让并行工作流服务工作（遵循 MSDN 文章.. [http://msdn.microsoft.com/en-us/library/hh314045%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/hh314045%28v=vs.110%29.aspx)）。不幸的是，我坚持的工作流程中断了。它抛出了非常通用的异常，如下所示。

```
System.ServiceModel.FaultException: The workflow has been aborted.

at System.Runtime.AsyncResult.End[TAsyncResult](IAsyncResult result)

at System.ServiceModel.Activities.Dispatcher.ControlOperationInvoker.InvokeEnd(Object instance, Object[]& outputs, IAsyncResult result)

at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeEnd(MessageRpc& rpc)

at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage7(MessageRpc& rpc)

at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 
```

下面是步骤..

我已经使用框架 4.5 开发了示例工作流服务（也设置了定义标识）

命名为 CusotmerService.xamlx。

托管在 App Fabric 中

也更新了持久性存储架构 (SqlWorkflowInstanceStoreSchemaUpgrade.sql)

在开始对现有工作流定义进行更改之前，请完成以下更改

创建 App_Code 文件夹 -> 将现有工作定义（CustomerService.Xamlx）移至此文件夹。

并将其重命名为 CustomerServiceV1.xamlx。

然后，我对 CustomerService.xamlx 进行了更改（添加了一个额外的分配活动）

修改了定义标识（将版本更改为 2.0.0.0）

然后我发布了对 IIS 的更改（发布）（发布后也重新启动了 IIS..）

一旦我发布了对 IIS 的更改，持久的工作流就会中断。新实例工作没有任何问题..

我不确定它为什么坏了。有没有办法在 IIS / Appfabric 中发布并行工作流服务？我在这里做错什么了吗...请指教我..

感谢您的快速反应..

谢谢

迪帕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:23:55.697

a) 通读 MS 文档表明将 XAMLX 移动到 AppCode 文件夹是不正确的。应将其移至与服务同名的子文件夹：

在 App_Code 文件夹中创建一个与服务文件同名的新文件夹。如果服务的 xamlx 文件名为 MortgageWorkflow.xamlx，则该文件夹必须命名为 MortgageWorkflow。将原始服务的 xamlx 文件的副本放入此文件夹，并将其重命名为新名称，例如 MortgageWorkflowV1.xamlx

b) 要诊断中止的异常，通常您转到 AppFabric 服务配置并在 WCF 和 WF 上启用详细跟踪。你会在那里看到根本原因。

# c++ - 实现对象指针的模板化双向链表

> ID：13521945
> 
> 赞同：3
> 
> 时间：2012-11-23T00:57:45.323
> 
> 标签：c++, templates, pointers, doubly-linked-list

我对实现一个双向链表有点困惑，其中列表中的数据是指针。

我的链表类的私有部分如下所示：

```
 private:
    struct node {
      node* next;
      node* prev;
      T* o;
    };
    node* first; // The pointer to the first node (NULL if none)
    node* last;  // The pointer to the last node (NULL if none)
    unsigned int size_; 
```

如您所见，列表中充满了指向对象的指针，而不仅仅是普通的旧对象，这让我有点困惑。

以下是规范中的描述：

*请注意，虽然此列表是跨包含类型 T 模板化的，但它仅插入和删除指向 T 的指针，而不是 T 的实例。这确保 Dlist 实现知道它拥有插入的对象，如果列表，它负责复制它们被复制，如果列表被销毁，它必须销毁它们。*

这是我当前的 insertFront(T* o) 实现：

```
void Dlist::insertFront(T* o) {
  node* insert = new node();
  insert->o = new T(*o); 
  insert->next = first;
  insert->prev = last;
  first = insert;
} 
```

不过，这似乎是错误的。如果 T 没有复制构造函数怎么办？这如何确保列表中对象的唯一所有权？

我可以这样做：

```
insert->o = o; 
```

这似乎不安全，因为如果您有：

```
Object* item = new Object();
dlist.insertFront(item);
delete item; 
```

然后该项目也将被销毁列表。它是否正确？我的理解有问题吗？

谢谢阅读。

注意：虽然这看起来像家庭作业，但事实并非如此。我实际上是一个 java 开发人员，只是通过做一个老派项目来提高我的指针技能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T01:17:12.537

当你有一个指针容器时，你有以下两种使用场景之一：

1.  给容器一个指针，容器负责在删除包含结构时删除指针。

2.  一个指向容器的指针，但归调用者所有。当不再需要指针时，调用者负责删除指针。

上面的第 1 点非常简单。

在数字 2 的情况下，预计容器的所有者（可能也是调用者）将在删除项目之前从容器中删除项目。

我故意省略了第三个选项，这实际上是您在第一个代码示例中采用的选项。即分配一个新项目并复制它。我忽略它的原因是调用者可以这样做。

省略它的另一个原因是您可能需要一个可以采用非指针类型的容器。`T*`通过始终使用而不是要求它成为指针`T`可能不像您想要的那样灵活。有时您应该将其强制为指针，但我想不出对容器执行此操作的任何用途（在我的脑海中）。

如果您允许用户声明`Dlist<MyClass*>`而不是`Dlist<MyClass>`那么该列表的所有者隐含地知道它正在使用指针，这将迫使他们从上面假设场景编号 2。

无论如何，这是您的示例和一些评论：

* * *

**1.**`T`除非有很好的理由，否则不要分配新项目。这个原因可能只是封装。尽管我在上面提到你不应该这样做，但有时你可能想要这样做。如果没有复制构造函数，那么您的类可能是普通的旧数据。如果复制不是微不足道的，则应遵循[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。

```
void Dlist::insertFront(T* o) {
  node* insert = new node();
  insert->o = new T(*o);         //<-- Follow rule of three
  insert->next = first;
  insert->prev = last;
  first = insert;
} 
```

* * *

**2.**这是你通常会做的事情

```
insert->o = o; 
```

* * *

**3.**插入后不得删除您的项目。将所有权传递给您的容器，或者在您和容器都不再需要它时删除该项目。

```
Object* item = new Object();
dlist.insertFront(item);
delete item;                     //<-- The item in the list is now invalid 
```

# servlets - 如何防止静态资源被映射在 /* 上的前端控制器 servlet 处理

> ID：13521946
> 
> 赞同：18
> 
> 时间：2012-11-23T00:57:48.153
> 
> 标签：servlets

我有一个充当前端控制器的 servlet。

```
@WebServlet("/*") 
```

但是，这也处理 CSS 和图像文件。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-23T01:13:19.060

您有 2 个选项：

1.  使用更具体的 URL 模式，例如`/app/*`or `*.do`，然后让您的所有页面请求都匹配此 URL 模式。另请参阅[设计模式基于 Web 的应用程序](https://stackoverflow.com/questions/3541077/design-patterns-web-based-applications/3542297#3542297)

2.  与 1 相同，但要从请求 URL 中隐藏 servlet 映射；然后，您应该将所有静态资源放在一个公共文件夹中，例如`/static`or`/resources`并创建一个过滤器来检查请求 URL 是否与其不匹配，然后转发到 servlet。这是一个示例，它假设您的控制器 servlet 是 a`@WebServlet("/app/*")`并且过滤器是 a`@WebFilter("/*")`并且您的所有静态资源都在`/resources`文件夹中。

    ```
    HttpServletRequest req = (HttpServletRequest) request;
    String path = req.getRequestURI().substring(req.getContextPath().length());

    if (path.startsWith("/resources/")) {
        chain.doFilter(request, response); // Goes to default servlet.
    } else {
        request.getRequestDispatcher("/app" + path).forward(request, response); // Goes to your controller.
    } 
    ```

    另请参阅[在 /* 上映射全局前端控制器 servlet 时如何访问静态资源](https://stackoverflow.com/questions/870150/how-to-access-static-resources-when-using-default-servlet/3593513#3593513)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-02T13:54:11.460

我知道这是一个老问题，我猜@BalusC 的答案可能很好用。但是我无法修改正在处理的 JSF 应用程序的 URL，所以我只需检查路径并返回是否是静态资源：

```
 String path = request.getRequestURI().substring(request.getContextPath().length());
    if (path.contains("/resources/")) {
        return;
    } 
```

这对我来说很好。

# python - Django Tastypie - 仅包含对象详细信息的资源

> ID：13521947
> 
> 赞同：3
> 
> 时间：2012-11-23T00:58:11.143
> 
> 标签：python, django, rest, tastypie

在带有 Tastypie 的 Django 中，有没有办法配置资源以使其仅显示对象详细信息？

我想要一个`/user`返回经过身份验证的用户详细信息的 url，而不是包含单个用户对象的列表。我不想`/users/<id>`用来获取用户的详细信息。

这是我的代码的相关部分：

```
from django.contrib.auth.models import User
from tastypie.resources import ModelResource

class UserResource(ModelResource):

    class Meta:
        queryset        = User.objects.all()
        resource_name   = 'user'
        allowed_methods = ['get', 'put']
        serializer      = SERIALIZER      # Assume those are defined...
        authentication  = AUTHENTICATION  # "
        authorization   = AUTHORIZATION   # "

    def apply_authorization_limits(self, request, object_list):
        return object_list.filter(pk=request.user.pk) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T07:51:51.783

我能够通过使用以下资源方法的组合来做到这一点

*   [覆盖网址](http://django-tastypie.readthedocs.org/en/v0.9.11/resources.html#override-urls)
*   [apply_authorization_limits](http://django-tastypie.readthedocs.org/en/v0.9.11/resources.html#apply-authorization-limits)

**示例用户资源**

```
#Django
from django.contrib.auth.models import User
from django.conf.urls import url

#Tasty
from tastypie.resources import ModelResource

class UserResource(ModelResource):
    class Meta:
        queryset = User.objects.all()
        resource_name = 'users'

        #Disallow list operations
        list_allowed_methods = []
        detail_allowed_methods = ['get', 'put', 'patch']

        #Exclude some fields
        excludes = ('first_name', 'is_active', 'is_staff', 'is_superuser', 'last_name', 'password',)

    #Apply filter for the requesting user
    def apply_authorization_limits(self, request, object_list):
        return object_list.filter(pk=request.user.pk)

    #Override urls such that GET:users/ is actually the user detail endpoint
    def override_urls(self):
        return [
            url(r"^(?P<resource_name>%s)/$" % self._meta.resource_name, self.wrap_view('dispatch_detail'), name="api_dispatch_detail"),
        ] 
```

[Tastypie Cookbook](http://django-tastypie.readthedocs.org/en/v0.9.11/cookbook.html#using-non-pk-data-for-your-urls)中更详细地解释了使用主键以外的其他内容来获取资源的详细信息

# javascript - 编辑文本用户输入到文本框

> ID：13521949
> 
> 赞同：4
> 
> 时间：2012-11-23T00:58:29.640
> 
> 标签：javascript, textbox, replace

到目前为止，我有[这个 jsfiddle](http://jsfiddle.net/AbSh2/)

```
<p>Click the button to remove http:// and www. from input box belove below:</p>

<textarea id="demo" name="comments" cols="25" rows="5">
    http://www.google.com
</textarea><br>
<input type="submit" value="Submit" button onclick="myFunction(),myFunction2()" />
</form>

<script>
function myFunction()
{
    var str=document.getElementById("demo").innerHTML; 
    var n=str.replace("http://","");
    document.getElementById("demo").innerHTML=n;
}

function myFunction2()
{
    var str=document.getElementById("demo").innerHTML; 
    var m=str.replace("www.","");
    document.getElementById("demo").innerHTML=m;
}
</script>​ 
```

它适用于文本`pre`输入，但不会更改提交的文本。我敢肯定有一个简单的答案，我只是新手，无法解决或找到答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T01:02:28.030

您需要使用`.value`，而`textarea`不是`.innerHTML`。

`.innerHTML`仅查看元素中生成的 HTML。如果用户输入新内容，源不会改变。

但是，该值确实：

```
document.getElementById("demo").value = ... 
```

在你的小提琴中修复：

[http://jsfiddle.net/AbSh2/12/](http://jsfiddle.net/AbSh2/12/)

其他几个指针：

*   您不需要两个函数来执行该操作，因为您可以看到它可以在一个中完成。
*   您可以使用`type='button'`而不是提交，因为 Javascript 不关心表单提交（这只在服务器上很重要，它接收 POST 和 GET 数据。Javascript 不能）

您可以进一步简化您的功能，而无需到处保存字符串：

```
function myFunction() {
    var str=document.getElementById("demo").value;
    var n=str.replace("http://","");
    var m=n.replace("www.","");
    document.getElementById("demo").value=m;
} 
```

工作正常。你甚至可以做

```
function myFunction() {
    document.getElementById("demo").value = 
        document.getElementById("demo").value.replace("http://","").replace("www.","");
} 
```

但这有点混乱IMO，所以应该仅用于学习目的:)

# c# - 在这个 Outlook 2007 应用程序中，为什么没有触发 Explorers.NewExplorer 事件？

> ID：13521950
> 
> 赞同：1
> 
> 时间：2012-11-23T00:58:29.257
> 
> 标签：c#, .net, outlook

这是一些示例代码：

```
 private Outlook.Application applicationObject;
    public void OnConnection(object application, Extensibility.ext_ConnectMode connectMode, object addInInst, ref System.Array custom)
    {
        MessageBox.Show("on connection");
        applicationObject = (Outlook.Application)application;
        applicationObject.Explorers.NewExplorer += new Microsoft.Office.Interop.Outlook.ExplorersEvents_NewExplorerEventHandler(Explorers_NewExplorer);
    }

    void Explorers_NewExplorer(Microsoft.Office.Interop.Outlook.Explorer Explorer)
    {
        MessageBox.Show("new explorer");
    } 
```

“新资源管理器”消息永远不会出现在屏幕上，因为 NewExplorer 事件永远不会触发，即使我单击“在新窗口中打开”也是如此。

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:30:20.683

`Explorers`您订阅该事件的实例`NewExplorer`可能正在被垃圾收集。为防止这种情况发生，请通过实例变量保留对它的引用：

```
private Outlook.Application applicationObject;
private Outlook.Explorers explorers;

public void OnConnection(object application, Extensibility.ext_ConnectMode connectMode, object addInInst, ref System.Array custom)
{
    MessageBox.Show("on connection");
    applicationObject = (Outlook.Application)application;
    explorers = applicationObject.Explorers;
    explorers.NewExplorer += new Microsoft.Office.Interop.Outlook.ExplorersEvents_NewExplorerEventHandler(Explorers_NewExplorer);
} 
```

# javascript - 为引导 dateRangePicker 编写函数原型

> ID：13521953
> 
> 赞同：2
> 
> 时间：2012-11-23T00:59:17.787
> 
> 标签：javascript, jquery, datepicker

我是 Javascript 新手，正在尝试为 Dan Grossman 的引导主题 dateRangePicker（[https://github.com/dangrossman/bootstrap-daterangepicker](https://github.com/dangrossman/bootstrap-daterangepicker)）编写一个简单的函数原型。我将以下代码添加到 DateRangePicker.prototype

```
setStartDate: function (startDate) {            
    alert(startDate);
}, 
```

我创建我的 daterangepicker 如下

```
var daterange = $('#reportrange').daterangepicker(); 
```

但是当我打电话时：

```
daterange.setStartDate(new Date()); 
```

我收到一条错误消息，指出该对象不支持属性或方法“setStartDate”。

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T01:09:57.823

尝试这个：

```
var reportrange = $('#reportrange').daterangepicker(),
    daterange = reportrange.data('daterangepicker');
daterange.setStartDate(new Date()); 
```

jQuery 插件返回包含所选元素的 jQuery 对象，以实现可链接性。实际`DateRangePicker`对象存储为`data`选定元素的属性。

# events - 在 Firemonkey 中捕获 USB 插拔事件

> ID：13521955
> 
> 赞同：1
> 
> 时间：2012-11-23T00:59:23.173
> 
> 标签：events, event-handling, usb, firemonkey, c++builder-xe2

[RAD Studio XE3 / C++]
在这个阶段我有一个仅在 Windows 中运行的 FMX 项目，但我需要检测 USB 设备连接和断开时的事件。我有一个类似的 VCL 应用程序可以很好地做到这一点，但是 Application->HookMainWindow 没有在 FMX 中公开（仅 VCL）。

有没有一种优雅的方法来处理这个？还是我必须在我的 FMX 应用程序中加入一些 VCL 的东西才能让它工作？我想我必须把它抽象出来，这样我才能支持其他平台。与此同时，虽然我需要让 Windows 解决方案正常工作。

如果需要“VCL hack”，我将如何从我的 Fmx 应用程序中引用 vcl::Forms::Application ？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:15:01.973

这可以帮助，使用 TMessage 方式？

```
type
TMyMessageClass = class(TMessage)
MyProp1 : Integer;
MyProp2 : string;
end;

procedure MyForm.FormCreate(Sender: TObject);
begin
TMessageManager.DefaultManager.SubscribeToMessage(TMyMessageClass, Self.ProcessMessage);
end;

procedure MyForm.ProcessMessage(Sender : TObject; M : TMessage);
begin

if M is TMyMessageClass then
begin
//Do something
end;

end; 
```

从线程我做了类似的事情......

```
procedure TMyThread.Execute;
var
FMyMessage : TMyMessageClass;
begin

//stuff

Synchronize(
procedure
begin
FMyMessageClass := TMyMessageClass.Create;
FMyMessageClass.MyProp1 := 1;
FMyMessageClass.MyProp2 := 'Hello';
TMessageManager.DefaultManager.SendMessage(nil, FMyMessageClass);
end); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:57:57.520

我找到了一个解决方案，感谢[http://www.haogongju.net/art/1480814](http://www.haogongju.net/art/1480814) 能够附加一些文件会很好，但看起来它必须内联。

**系统事件.h**

```
#ifndef SystemEventsH
#define SystemEventsH
#include <System.Classes.hpp>
#include <FMX.Controls.hpp>
#include <FMX.Forms.hpp>
#include "DeviceChanged.h"
//---------------------------------------------------------------------------
class TSystemEvents : TObject
{
private:
    TDeviceChangedMethod pDeviceChangeHandler;
    TForm *pOwnerForm;
#ifdef _Windows
    HWND Hwnd;      // Save the window handle
    LONG OldWndProc;// And remember the old WndProc so we can put it back later
#endif
public:
    __fastcall TSystemEvents(TForm *_pForm);
    __fastcall ~TSystemEvents();
    __property TForm *OwnerForm = {read=pOwnerForm};
#ifdef _Windows
    LRESULT __stdcall MessageHandler(Winapi::Messages::TMessage &Message);
#endif // _Windows
    __property TDeviceChangedMethod DeviceChangeHandler={read=pDeviceChangeHandler,write=pDeviceChangeHandler};
};
extern TSystemEvents *SystemEvents;
#endif 
```

**系统事件.cpp**

```
#include <fmx.h>
#include <FMX.Platform.Win.hpp>
#pragma hdrstop
#include "SystemEvents.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#ifdef _Windows
LRESULT __stdcall WindowProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    if (SystemEvents == NULL)
    {
        return 0;
    }
    // This routine can't be a closure because the winapi needs to call it as
    // a LONGPTR.  So from here I can pass it into the SystemEvents object.
    Winapi::Messages::TMessage _Message;
    _Message.Msg = msg;
    _Message.WParam = wParam;
    _Message.LParam = lParam;
    return (LRESULT)SystemEvents->MessageHandler(_Message);
}
#endif //_Windows
__fastcall TSystemEvents::TSystemEvents(TForm *_pForm)
{
    pOwnerForm = _pForm;
    pDeviceChangeHandler = NULL;
#ifdef _Windows
    // Owner form handle is in FMX framework, but we want a Hwnd handle:
    Hwnd = FmxHandleToHWND(pOwnerForm->Handle);
    // Save the original WindowProc address
    OldWndProc = GetWindowLongPtr(Hwnd, GWL_WNDPROC);
    // Redirect the messages to my own function
    SetWindowLongPtr(Hwnd, GWL_WNDPROC, (LONG_PTR)&WindowProc);
#endif
}
__fastcall TSystemEvents::~TSystemEvents()
{
#ifdef _Windows
    // Very important we undo our hack before the app finishes
    SetWindowLongPtr(Hwnd, GWL_WNDPROC, OldWndProc);
#endif
}
LRESULT __stdcall TSystemEvents::MessageHandler(Winapi::Messages::TMessage &Message)
{
#ifdef _Windows
    if (Message.Msg == WM_DEVICECHANGE)
    {
        if (DeviceChangeHandler != NULL)
        {
            DeviceChangeHandler(this, new TDeviceChangedMessage(TDeviceChangedMessage::ParamForWin32wParam(Message.WParam)));
            return 1;
        }
    }
    return CallWindowProc((WNDPROC)OldWndProc, Hwnd, Message.Msg, Message.WParam, Message.LParam);
#endif
    return 0;
} 
```

**DeviceChanged.h**

```
#ifndef DeviceChangedH
#define DeviceChangedH
//---------------------------------------------------------------------------
typedef enum {Unknown = 0, DeviceNodesChanged} DeviceChangedParam;
class TDeviceChangedMessage
{
private:
    DeviceChangedParam eParam;
public:
    TDeviceChangedMessage(DeviceChangedParam _eParam)
    {
        eParam = _eParam;
    }
    __property DeviceChangedParam Param={read=eParam};
    static DeviceChangedParam __fastcall ParamForWin32wParam(WPARAM _wParam);
};
typedef void __fastcall (__closure *TDeviceChangedMethod)(System::TObject* Sender, TDeviceChangedMessage* M);
#endif 
```

**DeviceChanged.cpp**

```
#include <fmx.h>
#include <Dbt.h>
#pragma hdrstop
#include "DeviceChanged.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
DeviceChangedParam __fastcall TDeviceChangedMessage::ParamForWin32wParam(WPARAM _wParam)
{
    if (_wParam == DBT_DEVNODES_CHANGED)
        return DeviceChangedParam::DeviceNodesChanged;
    return DeviceChangedParam::Unknown;
} 
```

要使用它：

```
#include <SystemEvents.h>
TSystemEvents *SystemEvents;
// In Constructor:
{
    SystemEvents = new TSystemEvents(this);
    SystemEvents->DeviceChangeHandler = OnDeviceChanged;
}
// In Destructor:
{
    deletenullify(SystemEvents);
}
// Handler:
void __fastcall TMainForm::OnDeviceChanged(System::TObject* Sender, TDeviceChangedMessage *M)
{
    if (M->Param == DeviceChangedParam::DeviceNodesChanged)
    {
        OnUSBDeviceChanged();
    }
} 
```

为我工作。:)

# html - 响应式布局文本未调整大小

> ID：13521958
> 
> 赞同：0
> 
> 时间：2012-11-23T01:00:05.073
> 
> 标签：html, css, responsive-design

我正在尝试使用响应式网页设计制作网页，但我无法在浏览器窗口时调整文本大小。我正在关注 Ethan Marcotte 的“响应式网页设计”一书

这是我的样式表和 html 的一部分：

```
body {
font-size: 100%;
}
#nav-bar {
font-size: 1.0em;
}

<header>
    <div id="nav-bar">
        <nav>
            <ul>
                <li><a href="">Item1</a></li>
                <li><a href="">Item2</a></li>
                <li><a href="">Item3</a></li>
            </ul>
        </nav>
   </div>
</header> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-29T23:01:11.510

These new properties allow you to scale font sizes according to the viewport dimensions, i.e.

```
1vw is 1% of the viewport width
1vh is 1% of the viewport height
1vmin is the smallest of 1vw and 1vh 
```

For example, assume your browser viewport is set to 1,000 x 1,200 pixels:

```
1.5vw = 15px font size
1.5vh = 18px font size
1.5vmin = min(1.5vw, 1.5vh) = 15px font size 
```

The new units will revolutionize responsive design —

Source: [http://www.sitepoint.com/new-css3-relative-font-size/](http://www.sitepoint.com/new-css3-relative-font-size/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T01:11:43.213

您正在寻找使用 css3 媒体查询。即当浏览器宽度 < 980px 时，将字体大小更改为...

例如，

```
body {
     font-size: 100%;
}

#nav-bar {
     font-size: 1.0em;
}

@media (min-width: 980px) 
{ 
    #nav-bar { font-size: 2em } 
} 
```

有关快速概述，请参阅[http://cssmediaqueries.com/what-are-css-media-queries.html](http://cssmediaqueries.com/what-are-css-media-queries.html)。

# c++ - 从 getline() 返回的字符串是否以 null 结尾？

> ID：13521961
> 
> 赞同：6
> 
> 时间：2012-11-23T01:00:55.087
> 
> 标签：c++, string, getline

在谷歌搜索一段时间后我不太确定的一件事是返回的 getline() 字符串。希望在这里得到确认。

```
std::getline 
```

这个全局版本返回一个**std::string**所以它不一定是空终止的。一些编译器可能会附加一个 '\0' 而其他编译器不会。

```
std::istream::getline 
```

此函数返回一个**c 风格**的字符串，因此可以保证该字符串以空值结尾。

是对的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T01:10:04.360

空终止是一个仅适用于 C 字符串的概念；它不适用于`std::string`- 它们让您通过调用找到大小的对象`size()`，并且不需要空终止。但是，无论字符串的数据来自何处，从`std::string`的`c_str()`函数返回的字符串都是以空值结尾的。

C++11 标准`operator [pos]`在第 21.4.5.2 节中描述了先决条件：

> 返回：`*(begin() + pos)`如果`pos < size()`。否则，返回对`charT`具有 value类型的对象的引用`charT()`，其中修改对象会导致未定义的行为。

注意`pos < size()`, 而不是`pos <= size()`: 该标准明确允许`std::string`对象不具有空终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:03:11.653

> 表示 c 字符串结束的结束空字符会自动附加到 s 提取的数据之后。

# php - cakePHP 模型函数是如何工作的？

> ID：13521969
> 
> 赞同：2
> 
> 时间：2012-11-23T01:02:00.330
> 
> 标签：php, cakephp, cakephp-model

这是食谱中的示例：

```
class IngredientsController extends AppController {

    public function index() {
        //grab all ingredients and pass it to the view:
        $ingredients = $this->Ingredient->find('all');
        $this->set('ingredients', $ingredients);
    } 
```

所以看起来我们正在使用`find('all')`它们并将它们全部返回到索引中。我认为我们还可以创建一个名为的方法，该方法`frenchIngredients()`将返回所有法国成分。

我的问题是我是否必须为控制器的每个查找条件创建一个单独的函数？

我对 cakePHP 真的很陌生，所以也许我只是不明白它应该如何工作，但是我看到它的方式，我将不得不创建大量的函数和/或视图只是为了考虑查找条件的变化。

cakePHP 有那么糟糕还是我错过了什么？我认为这会使我的 PHP OOP 变得更容易，但实际上将某些工作转换为我不知道如何工作的东西似乎需要很多开销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:19:10.320

很高兴不需要为每个简单的条件查找创建一个函数。

该`find`函数接受多个参数（请参阅[Retrieving Your Data](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find)中的文档），其中一个参数是查找条件。

你想只取法国食材吗？假设您有成分的类别，并且“法国成分”类别的 ID 为 2，您可以这样做：

```
$this->Ingredient->find('all', array('conditions' => array('category_id' => 2))); 
```

传递给的条件`find`可能比这个简单的例子[复杂得多。](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#complex-find-conditions)

但是当然，当您有一些比简单的查找查询更复杂的逻辑时，在模型中创建函数通常是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:09:28.360

Cake 有很多“神奇”的功能。你`findBy<columName>`甚至可以做到`findAllBy<columName>`。您还可以链接列名，例如`findBy<colum1>And<colum2>`.

我建议你阅读他们[关于模型的烹饪书文章](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)。这本烹饪书是一个非常好的入门方式，并且可以获得有关框架可以为您做什么的信息。如果您想了解有关某个功能的更多信息，您可以随时查看他们更完整的[api 。](http://api21.cakephp.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T01:12:35.943

在 ZF 和 Codeigniter 等任何框架中，我认为这实际上是构建模型的过程。

在 CakePHP 的示例中，如果您使用 Bakery 创建它，那么您已经拥有此功能。每个模型都包含许多数据库功能，但您的工作是扩展它。并非所有东西都已在您的模型中制作。

我唯一能建议的是确保并确保在构建模型方法时不要多余。如果您认为“freshIngredients”与其他模型相同，您可以实现一个基本模型并将其扩展到您的新模型。就像使用“newItems”方法创建一个基本模型一样，它将返回新添加的项目或在您的部分中它是成分。

# c++ - C++ 在向量中存储对类成员的引用

> ID：13521970
> 
> 赞同：2
> 
> 时间：2012-11-23T01:02:19.507
> 
> 标签：c++, pointers, reference, openframeworks

考虑一个 Drag 对象：

```
class Drag {
public:
    Drag(ofVec3f _pos);
    ofVec3f pos;
} 
```

创建新实例时存储位置：

```
Drag::Drag(ofVec3f _pos) {
    pos = _pos;
} 
```

鼠标移动时更新位置：

```
void Drag::mouseMoved() {
    pos.x = ofGetMouseX();
    pos.y = ofGetMouseY();
} 
```

* * *

在应用程序的主类（openframeworks 中的 testApp）中：

```
class testApp : public ofBaseApp {
    public:
        vector<Drag> drags;
        vector<ofVec3f *> points;
} 
```

按下鼠标时创建一个 Drag 并将其位置存储在一个名为 points 的向量中：

```
void testApp::mousePressed(int x, int y, int button) {
    Drag drag = Drag(ofVec3f(ofGetMouseX(), ofGetMouseY(), 0));
    drags.push_back(drag);
    points.push_back(&drag.pos);
} 
```

现在，当拖动移动时，我可以看到它的位置更新，但 points[0] 没有改变：

```
void testApp::update(){
    if (!drags.size()) return;
    cout << drags[0].pos.x << ", " << drags[0].pos.y << endl;
    cout << &points[0]->x << ", " << &points[0]->y << endl;
} 
```

如果点的类型`vector<ofVec3f>`似乎是点[0] 是初始拖动[0].pos 的副本。如果是，`vector<ofVec3f *>`那么它似乎在内存上存储了一个等于 &drag 的地址。

如何使 points[0] 指向 drags[0].pos 并在 drags[0].pos.x 和 drags[0].pos.y 更新时更新其 x,y 值？

如何使 points[0] 成为对drags[0].pos的**引用？**

* * *

**编辑：**感谢 yonilevy 为我指明了正确的方向。这是使用 std::list 更新的工作示例：

```
// testApp.h
list<Drag> drags;
vector<ofVec3f *> points;

// testApp::mousePressed
drags.push_back(Drag(ofVec3f(ofGetMouseX(), ofGetMouseY(), 0)));
points.push_back(&drags.back().pos); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T01:14:19.997

您不能将引用存储在向量中，但可以存储`std::reference_wrapper<ofVec3f>`.

```
std::vector< std::reference_wrapper<ofVec3f> > v;
ofVec3f vec;
v.push_back(std::ref(vec)); 
```

存储指针也可以。您只需要使用`operator*`or正确取消引用它`operator->`。

```
std::vector< ofVec3f* > pv;
ofVec3f vec;
pv.push_back(&vec);
pv.front()->x; 
```

**关于地址相等**地址与拖动对象的地址相同是正常的。向量是第一个成员，因此它们具有相同的地址（仅保证 POD 类型实际上是这种情况）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T02:11:54.710

您的错误在于认为存储`&drag.pos`将帮助您跟踪`drag`' 的位置，而实际上您存储的地址在该范围结束时将变得毫无意义。由于`drag`是一个局部变量，存在于堆栈中，因此它将在创建它的范围结束时消失。`drag`即使在这种情况下您无法提供帮助时，也可以存储由向量创建的副本的地址`push_back`，因为一旦向量的物理大小增长并且必须将其所有内容移动到不同的位置，它也会变得无效记忆。

您可以做的是确保您推送到向量的实际 Drag 对象仍然是唯一的，方法是在堆上分配它并将指向它的（智能）指针推送到向量中。这样，您可以`pos`像您一样在向量中保留指向其内部的指针，并且只要另一个向量存在，它就会有效。

# objective-c - 使用 NSThread 时分析器报告的泄漏。该项目使用 ARC 为 Objective C 和 iOS 编译

> ID：13521974
> 
> 赞同：0
> 
> 时间：2012-11-23T01:02:55.910
> 
> 标签：objective-c, ios, memory, automatic-ref-counting, memory-leaks

这是我试图管理我的线程的方式

```
-(void)ExecuteThread {
  @autoreleasepool {

    bInsideDifferentThread = YES;
    //some code...
    bInsideDifferentThread = NO;
  }
  [NSThread exit];
}

-(void)ThreadCallerEvent {
  NSThread *myThread = [[NSThread alloc] initWithTarget:self     selector:@selector(ExecuteThread) object:nil];
  if (!bInsideThread)
  [myThread start];
  else
  {
    [myThread cancel];
  }
} 
```

我这样做是因为我不希望线程在它完成工作之前启动。问题是这会从分配的未释放内存中产生泄漏`[NSThread init]`

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:54:29.487

我运行了一个与您类似的片段，但无法检测到泄漏；但上下文几乎可以肯定是不同的。`myThread`当ARC超出范围时，我真的不确定ARC在您的示例中做了什么。一个典型的使用模式`NSThread`是：

```
[NSThread detachNewThreadSelector:@selector(executeThread)
                         toTarget:self
                       withObject:nil]; 
```

在这种情况下，您不负责直接处理要分离的线程。 *（注意：我将您的方法名称更改为使用驼峰式大小写，这是 Cocoa 中首选的方法和变量命名约定。）*

综上所述，管理线程[不再](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/ThreadMigration/ThreadMigration.html)是实现并发设计的首选方式。这是完全可以接受的；但苹果鼓励开发者迁移到 GCD。更好地考虑需要同时执行的工作单元。

在这种情况下，如果不更深入地了解您的需求，就很难知道直接使用线程可以为您提供哪些优势（如果有的话）；但我会考虑更仔细地查看并发队列/GCD。也许你可以简单地使用类似的东西：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    //  do your background work
}); 
```

并实现更清晰的并发设计并避免您现在看到的任何内存管理问题。

# python - 在代码中实现可选记录器

> ID：13521981
> 
> 赞同：18
> 
> 时间：2012-11-23T01:05:04.193
> 
> 标签：python, logging

我想在一个函数中实现一个可选的记录器。就像是：

```
def foo(arg1, arg2, arg3, logger=None):
    logger = logger or (lambda *x: None)

    ...
    self.logger.debug("The connection is lost.") 
```

我希望在存在记录器的情况下进行记录。否则，记录器的调试将无济于事。

基本上实现它的简单方法是将每个调试语句嵌套在一个`if logger`块中，但是当有许多调试语句时它看起来很混乱。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-23T09:13:08.207

几个选项：

**创建一个虚拟记录器（我最喜欢的）：**

```
logger = logger or logging.getLogger('dummy') #  without configuring dummy before. 
```

**创建一个具有一级`null`效果**的虚拟对象：

```
class DummyObject(object):
    def __getattr__(self, name):
        return lambda *x: None

logger = logger or DummyObject() 
```

**将每个调试语句嵌套在一个块中：**

```
if logger:
    logger.debug("abc") 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-10-04T20:48:33.260

自 Python 2.7 起，模块[`NullHandler`](https://docs.python.org/library/logging.handlers.html#logging.NullHandler)中包含了一个无操作：`logging`

```
import logging      
logging.getLogger('foo').addHandler(logging.NullHandler()) 
```

[请参阅为库配置日志记录](https://docs.python.org/howto/logging.html#configuring-logging-for-a-library)的文档。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-23T01:16:32.120

嗯，这就是[`logging`](http://docs.python.org/2/library/logging.html)模块的用途。[如何使用](http://docs.python.org/2/howto/logging.html)，[食谱](http://docs.python.org/2/howto/logging-cookbook.html)。

如果你真的想自己动手，我看到了一些选择：

*   **`self.logger`属性**。在构造对象或从基类继承时设置。每个对象都有自己的记录器，因此您可以对每个实例进行选择性记录。

*   **具有静态方法或独立模块的记录器类**。可以有什么都不做的默认方法，但用户可以在需要时用真正的处理程序替换它们。所有类都访问同一个对象或模块。失去粒度，但设置工作更少。

*   **[装饰师](https://stackoverflow.com/questions/739654/understanding-python-decorators)**。在您想要记录的每个方法上方放置一个`@log('message', LEVEL)`，这将在调用该方法时自动调用日志。相当干净，不太灵活。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T03:51:28.323

我认为您想要的是日志过滤，所以我的答案是关于如何简单地实现日志过滤。

Python 的日志包已经做到了这一点，你有很多方法来做日志过滤。

两种基本方式是：

*   日志级别过滤
*   记录器名称过滤

它们都使用日志记录的配置，因此可以轻松配置。

例如：

```
import logging

logging.basicConfig()  # easily setup a StreamHandler output

logging.getLogger("realm1").setLevel(logging.WARNING)
logging.getLogger("realm2").setLevel(logging.INFO)

def test():
    r1logger = logging.getLogger("realm1")
    r2logger = logging.getLogger("realm2")
    r1logger.info('r1 info')  # won't print
    r2logger.info('r2 info')  # will print

if __name__ == '__main__':
    test() 
```

因此，除非您需要运行时动态本地更改日志记录策略，否则使用带有仔细日志记录配置的默认记录器就足够了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-12-31T00:40:59.340

默认情况下，在`logging.getLogger`调用时用于构造新记录器的类是`logging.Logger`，默认情况下会将`propagate`属性设置为`True`([文档源](https://docs.python.org/3/library/logging.html#logging.Logger.propagate))。根据文件，

> 如果此属性 [ `propagate`] 评估为 true，则记录到此记录器的事件将传递给更高级别（祖先）记录器的处理程序，以及附加到此记录器的任何处理程序。

因此，只要记录器的父级之一具有一些重要的处理程序，@fcs 的答案就不会起作用，这很可能是因为根记录器都是记录器的父级，并且它几乎总是`StreamHandler`与`stderr`流一起使用。

以下简单修复将起作用：

```
import logging
null_logger = logging.getLogger('foo')
null_logger.addHandler(logging.NullHandler())  # read below for reason
null_logger.propagate = False
null_logger.error("error")  # This message will still go nowhere 
```

请注意，添加`logging.NullHandler`是必要的，因为如果任何处理程序都未处理日志记录，它将由`logging.lastResort`仍会发出此消息的处理程序处理`stderr`（自 Python 3.2 以来的行为）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-08T04:26:08.640

你还可以做什么，它比使用 NullHander 设置一个真正的记录器更短：

```
logger = Mock() 
```

# java - Axis2 ByteArray Web 服务以字符串形式返回

> ID：13521983
> 
> 赞同：1
> 
> 时间：2012-11-23T01:06:12.753
> 
> 标签：java, android, web-services, bytearray, axis2

我正在开发一个 Android 应用程序，它假设调用 Axis2 Web 服务（已经实现并正在运行），以前的开发人员以 Byte[] 是传递 Object 的常见形式。假设需要在 Axis2 中调用 Web 服务，它应该返回 List，Web 服务会将实例转换为 Byte[] 并返回 Byte[]，客户端会将其转换回来。

以下是该服务的片段：

```
public byte[] getMyPersonList() throws Exception {
    java.io.ByteArrayOutputStream baos = new java.io.ByteArrayOutputStream();
    java.io.ObjectOutputStream oos = new java.io.ObjectOutputStream(baos);
    oos.writeObject(new List<Person>());
    return (baos.toByteArray());
} 
```

在客户端中（不是我的 android 应用程序，而是由制作 Web 服务的同一个人开发的现有桌面应用程序）

```
byte[] buffer = (byte[]) serviceClient.invokeBlocking(methodName,
            new Object[] {}, new Class[] { byte[].class })[0];
java.io.ObjectInputStream ois = new java.io.ObjectInputStream(
            new java.io.ByteArrayInputStream(buffer));
return (List<Person>) ois.readObject(); 
```

invokeBlocking() 方法似乎自动将服务的返回值自动转换回 byte[]，但我在我的应用程序中做同样的事情时遇到了麻烦。

这是我通过浏览器手动调用服务时返回值的样子：

`<return> rO0ABXNyABNqYXZhLnV0aWwuQXJyYXlMaXN0eIHSHZnHYZ0DAAFJAARzaXpleHAAAAAJdwQAAAAKc3IAJ3dvcmtmbG9....................... </return>`

到目前为止，我所做的是直接将返回作为字符串获取并使用 getBytes()：

```
byte [] soapReturnBytes = resultsRequestSOAP.getPropertyAsString("return").getBytes();
ObjectInputStream ois = new ObjectInputStream(bais);
myPersonList= (List<Person>) ois.readObject(); 
```

但是我收到了流损坏错误，这可能意味着当我将其转换回来时它的内容根本不一样。

所以我的问题是：

1.  返回 Byte[] 时，Axis2 引擎如何将值转换为适合 SOAP 返回
2.  将这个“字符串化”值转换回 Byte[] 的方法是什么，以防万一我对 Web 服务无能为力（对 Web 服务没有修改）

非常感谢任何建议。

编辑：

正如建议的那样，我正在使用解码器来获得结果，但仍然没有运气：

```
String result = resultsRequestSOAP.getPropertyAsString("return");           
byte[] soapReturnBytes = Base64.decode(result, Base64.DEFAULT);
ByteArrayInputStream bais = new ByteArrayInputStream(soapReturnBytes);
ObjectInputStream ois = new ObjectInputStream(bais);
orgs = (List<Person>) ois.readObject(); 
```

我仍然收到同样的错误：

```
java.io.StreamCorruptedException: Wrong format: 0 
```

有什么建议吗？*变得沮丧*

编辑2：

我创建了另一个将字符串返回为 byte[] 的服务，在我的 Android 应用程序中，我收到了 byte[] 并将其转换回原始字符串。所以也许这与我使用 Stream 转换我的 Object <=> byte [] 的方式有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:07:26.240

> 返回 Byte[] 时，Axis2 引擎如何将值转换为适合 SOAP 返回

Java 类型`byte[]`映射到 XML Schema 类型`xsd:base64Binary`。这种转换称为 Base64 编码。

> 将这个“字符串化”值转换回 Byte[] 的方法是什么，以防万一我对 Web 服务无能为力（对 Web 服务没有修改）

您需要使用 Base64 解码器。有许多可用的 Java 实现，例如 Commons Codec。

# python - 在python中创建3D矩阵的2D投影

> ID：13521984
> 
> 赞同：1
> 
> 时间：2012-11-23T01:06:17.623
> 
> 标签：python, numpy, visualization, projection

简短版本：我有一个充满不同值的 NxNxN 矩阵。我想创建一个看起来完全一样的 2D 投影：http: [//tinyurl.com/bellfkn](http://tinyurl.com/bellfkn)（如果可能的话也可以 3D！）

长版：我用以下循环制作了一个维度为 NxNxN 的密度矩阵：

```
ndim = 512
massmat = np.zeros((ndim,ndim,ndim)) 
for i in range(0,npoints):
        massmat[int(x1[i]),int(y1[i]),int(z1[i])] = massmat[int(x1[i]),int(y1[i]),int(z1[i])] + mpart

densemat = massmat/volumeofcell 
```

massmat 是一个 numpy 数组。

所以基本上我现在有一个 NxNxN 矩阵，其中某些单元格在这种情况下包含密度（单位为 g/cm^3）。有没有办法将其转换为 2D 投影 - 密度的侧面视图，带有指示密集区域和较不密集区域的颜色条？

在 Matlab 中，我会这样做：

```
imageArray2Dmesh = mean(densemat, 3);
figure
sc(imageArray2Dmesh, 'pink') 
```

它给了我一个密度投影——我想用 Python 做同样的事情。有没有办法在 3D 投影中查看整个 NxNxN 矩阵？就像链接一样，但是是 3D 的。那很好啊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:31:17.743

您可以在 numpy 和 matplotlib 中使用非常相似的代码：

```
import numpy as np
import pylab as plt

imageArray2Dmesh = np.mean(mesh_reshape, axis=2);
plt.figure()
plt.pcolor(imageArray2Dmesh, cmap = ,cmap=plt.cm.pink)
plt.colorbar()
plt.show() 
```

您还有更多命令，但这只是由于 matlab 和 matplotlib 中的图形处理方法不同（提示：从长远来看，matplotlib 方式更好）

如果您希望从另一个方向进行项目，只需更改轴参数（请记住，python 的索引从 0 开始，而不是像 matlab 那样从 1 开始）。

对于从通用方向进行的投影……嗯，这要困难得多。

顺便说一句，如果您需要查看一些 3D 数据，我强烈建议您花一些时间来探索 mayavi。它仍然是一个 python 库，并且对于 3d 成像非常强大：

[http://docs.enthought.com/mayavi/mayavi/auto/examples.html](http://docs.enthought.com/mayavi/mayavi/auto/examples.html)

# url - cakephp url 命名参数数组

> ID：13521992
> 
> 赞同：0
> 
> 时间：2012-11-23T01:09:03.477
> 
> 标签：url, cakephp-1.3

假设我想将一堆参数传递给一个 url，例如：

```
http://localhost/my_app/my_controller/index/param1:1/param2:2/param3:3/param4:4 
```

ETC...

但是我的 url 是使用[Html Helper](http://book.cakephp.org/1.3/view/1448/url)`url`的方法构建的，如下所示：

```
$this->Html->url(array(
    'controller' => 'my_controller', 
    'action' => 'index',
    'param1' => 1, 
    'param2' => 2, 
    'param3' => 3, 
    'param4' => 4
)); 
```

我试图将我的参数构建到这样的数组中，并将其传递给我的 url，如：

```
$my_params = array(
    'param1' => 1, 
    'param2' => 2, 
    'param3' => 3, 
    'param4' => 4
);

$this->Html->url(array(
    'controller' => 'my_controller', 
    'action' => 'index',
    $my_params
)); 
```

但这不起作用。知道我该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T01:36:27.797

您打算做的事情不起作用，因为您只需将 $my_params与[array_merge](http://php.net/manual/en/function.array-merge.php)**合并**，而是将 $my_params 数组添加到数组中。

```
$url = array(
    'controller' => 'my_controller',
    'action' => 'index'
);

$my_params = array(
    'param1' => 1,
    'param2' => 2,
    'param3' => 3,
    'param4' => 4
);

$this->Html->url(array_merge($url, $my_params)); 
```

我希望它有帮助:)

# asp.net-mvc - MVC 中的 jQuery UI 模态对话框

> ID：13521993
> 
> 赞同：2
> 
> 时间：2012-11-23T01:09:06.123
> 
> 标签：asp.net-mvc, jquery-ui, jquery-ui-dialog

请原谅我这个简单的问题，但我很难理解这个问题。我有一个包含以下内容的视图（.cshtml）（根据此[示例](http://evolpin.wordpress.com/2011/04/26/asp-net-mvc-partial-view-and-ajax-real-world-example/)）：

```
<div id='dlgLogin'>
    <h1>Log in</h1>
    <table>
        <tr>
            <td>Username:</td>
            <td>@Html.TextBox("username")</td>
        </tr>
        <tr>
            <td>Password:</td>
            <td>@Html.Password("password")</td>
        </tr>
    </table>
</div>
<script type="text/javascript">
    $(function () {
        $("#dlgLogin").dialog({
            modal: true,
            autoOpen: true,
            resizable: false,
            buttons: {
                Login: function () {
                    // perform login
                    $.post("@Url.Action("Login", "Home")",
                    {
                        username: $('#username').val(),
                        password: $('#password').val()
                    },
                    function( data, status, xhr ) {
                        if(data.Success){
                            alert('great'); // do something
                            $('#dlgLogin').dialog("close");
                            $('#divLoginButton').load("@Url.Action("GetLoginButton", "Home")");
                        } else {
                            // do something else
                        }
                    });
                },
                Cancel: function () {
                    $(this).dialog("close");
                }
            }
        });
    });
</script> 
```

基本上，无论何时打开，视图都会始终加载到 jQuery UI 对话框中，也就是说，视图本身负责将自己的内容放置在 jQuery UI 对话框中。我这样做是为了覆盖`OnAuthorzation()`我的登录事件，并在用户需要登录时将其重定向到弹出窗口。我有 3 个问题：

**1.**当表单回传到服务器时，如何显示加载动画（.gif）？用这种方法？我知道如果我使用 an`Ajax.BeginForm`我可以指定一个`UpdateTargetId`在回发期间用作加载动画的区域，但是我将如何使用这种方法实现这种效果？

**2.**我如何将`success`事件附加和处理到上面的表单帖子？即当表单被回发到控制器的`Login`动作时。`Home`

**3.**我已经看到至少 3 或 4 种不同的方法在 MVC 中显示对话框。这样做的正确方法是什么？我在上面发布的方法是否被认为是好的/mvc 友好的做法，如果不是你推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:57:31.340

> 1 当表单回发到服务器时，我将如何显示加载动画（.gif）？

看看[ajaxSend](http://api.jquery.com/ajaxSend/)：

```
<div id="loader"></div>

$("#loader").bind("ajaxSend", function () {
    $(this).show();
}).bind("ajaxStop", function () {
    $(this).hide();
}).bind("ajaxError", function () {
    $(this).hide();
}); 
```

> 2 我如何将成功事件附加到上面的表单帖子中？

我不明白你在问什么。您在示例代码中附加了一个匿名函数来处理发送到服务器的帖子。

> 3 我已经看到至少 3 或 4 种不同的方法在 MVC 中显示对话框。这样做的正确方法是什么？

没有显示对话框的*最佳*方式。您可以使用您展示的方法与页面一起加载对话框内容，但我会`style="display: none;"`在对话框中添加一个`div`。另一种方法是在打开对话框时从部分视图中加载带有 ajax 的对话框内容。