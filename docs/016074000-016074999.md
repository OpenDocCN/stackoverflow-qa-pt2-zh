# StackOverflow 问答 16074000-16074999

# java - 基于 Web 的 CSV 导出的 Java IO 异常

> ID：16074009
> 
> 赞同：0
> 
> 时间：2013-04-18T03:32:35.253
> 
> 标签：java, browser, io

我的一个报告网页上有“下载到 csv”链接，.csv 文件的典型输出约为 4MB，通常需要大约 5 分钟才能完成运行查询并使用单个线程提供结果。

其中一位用户继续遇到此问题：

[com.jspbook.GZIPResponseWrapper:finishResponse] 异常：java.io.IOException：此输出流已关闭

在服务器日志中还引用了一个损坏的管道异常。

当用户遇到此错误时，我从服务器的角度注意到一切都按时完成。

对于用户，导出链接会无限旋转并且永远不会返回数据。

是什么导致了这个问题，有没有办法保持与浏览器的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:58:21.687

继续回答@Bhushan Bhangale-

如果服务器响应时间过长，则关闭连接。因此，在处理需要很长时间（创建响应）的这种情况下，选项之一是 -

1.  收到请求时，在服务器上启动 2 个线程
2.  一种是在超时间隔前 2-3 秒出现的一种计时器
3.  另一个实际触发对数据库的查询并创建一个 .csv 文件

请记住，获得请求的主线程必须等到上面启动的线程之一通知它。这可能不是一个好的做法，但在一些奇怪的情况下，没有其他选择。

现在，

1\. 如果第一个（定时器）线程在响应准备好之前完成，它只是设置一个标志，并向用户返回一条消息，表明服务器仍在处理请求

2.对于第二个线程，可能有两个条件 -

a. 响应（.csv 文件）在第一个线程设置标志之前准备好，因此它只是发回响应（文件）并取消计时器（第一个）线程
b。如果它发现设置了标志（这意味着响应已经发送），它要么忽略响应（可能是删除文件）或通过电子邮件发送文件（如果可以合并此类功能）

这些线程不能自己发回响应，它们必须通知将响应发送给用户的主线程。您需要设置适当的标志/值，以便主线程知道要发送的响应类型。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:46:30.503

检查服务器的连接超时设置。等待5分钟是很长的时间。

看起来连接超时或断开。当您的查询完成但连接已关闭时，服务器会尝试写入响应。

如果无法更快地生成，那么当文件通过Web 套接字或来自客户端的**连续轮询可用时，请寻求推送给用户。**

# google-plus - 从 Google+ SDK 获取流？

> ID：16074022
> 
> 赞同：3
> 
> 时间：2013-04-18T03:34:21.990
> 
> 标签：google-plus

当前的 Google+ SDK 平台是否支持从 Google+ 提取用户流，就像 facebook/twiter 新闻提要一样？我在文档中没有找到任何相关内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T15:09:26.527

您无法使用 API 完全重新创建 Google+ Steam。

[如果您使用plus.login](https://developers.google.com/+/api/oauth#scopes)范围来访问[people.list](https://developers.google.com/+/api/latest/people/list)方法，然后对该人员列表中返回的每个人使用[activity.list](https://developers.google.com/+/api/latest/activities/list) ，您可以获得用户的朋友公开帖子列表。然后，如果您想要评论，您可以为每个活动使用[comments.list](https://developers.google.com/+/api/latest/comments/list)。但同样不会为您重新创建真实的流，因为这只是公共数据。您也可能会错过一些帖子，例如公开的社区帖子，但不会进入这些 API。

根据您的应用程序尝试执行的操作，如果您只是尝试显示您自己的帖子的提要，这可能就足够了。但是，如果您尝试创建自己的 Google+ 客户端，这将不起作用，您很快就会用完配额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:26:20.937

目前，您可以使用 activities.list 为用户提取所有活动，这将返回用户发布并共享为公开的任何帖子。[您可以在https://developers.google.com/+/api/latest/activities/list](https://developers.google.com/+/api/latest/activities/list)了解更多相关信息。

# google-app-engine - 我们可以对 TransientError 做些什么还是表明服务器端问题？

> ID：16074026
> 
> 赞同：1
> 
> 时间：2013-04-18T03:34:47.543
> 
> 标签：google-app-engine, task-queue

`TransientError`将任务添加到 appengine 中的队列时，我们偶尔会看到错误（每天约 100 个） 。我们能做些什么来处理这些问题，或者更防御性地编写代码来避免它们？

我们收到的错误示例如下所示：

```
 File "/python27_runtime/python27_lib/versions/1/google/appengine/ext/deferred/deferred.py", line 268, in defer
    return task.add(queue, transactional=transactional)
  File "/python27_runtime/python27_lib/versions/1/google/appengine/api/taskqueue/taskqueue.py", line 1132, in add
    return self.add_async(queue_name, transactional).get_result()
  File "/python27_runtime/python27_lib/versions/1/google/appengine/api/apiproxy_stub_map.py", line 604, in get_result
    return self.__get_result_hook(self)
  File "/python27_runtime/python27_lib/versions/1/google/appengine/api/taskqueue/taskqueue.py", line 1927, in ResultHook
    raise _TranslateError(e.application_error, e.error_detail)
TransientError 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:13:25.097

TransientError 表示服务器端错误（例如，BigTable 过载且无响应）。您唯一能做的就是使用回退再试一次。

# c - 命令行参数的数据类型

> ID：16074027
> 
> 赞同：0
> 
> 时间：2013-04-18T03:34:53.437
> 
> 标签：c, attributes, typing

我正在努力将可执行程序转换为可以从主程序中调用的函数。按照目前的编写，可执行文件如下所示：

```
int main(int argc, char* argv[]){
    //do stuff
    if(setxattr(argv[4], tmpstr, argv[3], strlen(argv[3]), 0)){
        perror("setxattr error");
        exit(EXIT_FAILURE);
    }
    //do more stuff
} 
```

我可以按如下方式调用它并且它可以成功运行：

> ./set_attributes -s 加密 1 ~/text.txt

但现在我想把它移到另一个程序中嵌入的函数中。失败的部分是`strlen(argv[3])`. 我的新功能如下所示：

```
int set_encr_attr(char* fpath, int value) {

    char* userstr = NULL;

    /* Check that the value to set is either 0 or 1 */
    if (!( (value == 0) || (value == 1) )) {
        return -1;
    }

    //do stuff (including malloc(userstr)
    strcpy(userstr, XATTR_USER_PREFIX);

    /* Set attribute */
    if(setxattr(fpath, userstr, value, 1, 0)){
        perror("setxattr error");
        exit(EXIT_FAILURE);
    }

    return EXIT_SUCCESS;
} 
```

如您所见，我已将第四个参数替换为数字 1，因为我已经检查过传入的值是 0 还是 1，因此它的 strlen 必须为 1。我尝试了一些其他事情，但我总是得到这个错误：

> xattr_new.c：在函数“set_encr_attr”中：
> 
> xattr_new.c:52:2：警告：传递 'setxattr' 的参数 3 使指针从整数而不进行强制转换 [默认启用]
> 
> /usr/include/i386-linux-gnu/sys/xattr.h:40:12：注意：预期为“const void *”，但参数的类型为“int”</p>

当我玩这个时，我可以看到 strlen(argv[3]) == 1，所以我不明白为什么我不能用整数 1 替换它。至于打字问题，我试过了铸造（我认为这通常是一个坏主意），但我无法让它发挥作用。

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:42:33.507

在将参数传递给函数之前，您是否尝试过使用 atoi() 将参数转换为整数？我不清楚为什么你想将数字作为字符串传递，如果你不需要的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:45:21.923

`1`是一个整数，`"1"`是一个字符串，一个长度为 2 的字符数组，包含 ASCII 字符“1”（值 49），后跟一个空字节（终止符）。该函数不需要整数，它需要一个 char 指针。`strlen("1")`= 1，因为字符串由空字节分隔。

# python - 了解 Python 类中的变量范围

> ID：16074032
> 
> 赞同：1
> 
> 时间：2013-04-18T03:35:17.000
> 
> 标签：python, class, variables, scope

有人可以解释为什么这会失败：

```
class A:
   a = 42
   b = list(a + i for i in range(10)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:45:32.160

它失败是因为`a`不在生成器表达式可以看到的命名空间中。

这适用于 Python2 和 Python3。`a`带有默认参数的 lambda 是一种在生成器表达式可以看到的命名空间中获取引用的技巧。

```
>>> class A:
...    a = 42
...    b = (lambda a=a:list(a + i for i in range(10)))()
... 
>>> A.b
[42, 43, 44, 45, 46, 47, 48, 49, 50, 51] 
```

`b`在我看来，使用列表理解更清晰

```
...    b = (lambda a=a:[a + i for i in range(10)])() 
```

# java - 复杂多边形区域

> ID：16074037
> 
> 赞同：0
> 
> 时间：2013-04-18T03:35:47.373
> 
> 标签：java, arrays, area

cloneList = Point[]（放入构造函数的一系列点）我已经尝试了很多次来修复这个公式，但是我想要。该公式可在 [http://en.wikipedia.org/wiki/Shoelace_formula](http://en.wikipedia.org/wiki/Shoelace_formula)上找到。 index(i) 是一个同时具有 x 和 y 值的点。

```
public double getArea() {
    double area = 0;

    for (int i = 0; i < cloneList.length-1; i++){

    area += cloneList[i].getX()*cloneList[i+1].getY() - cloneList[i+1].getX()+cloneList[i].getY();

}

    area = area/2;
    //System.out.println(Math.abs(area));
return Math.abs(area);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:00:34.890

我不熟悉这个公式，但我会试一试......在我看来，你似乎没有正确遵循这个公式，这将是我的实现（基于我从 wiki 页面 xD 收集的内容）

```
public double getArea(){
    double area = 0;
    int n = cloneList.length;
    double firstSum = 0;
    double secondSum = 0;
    for(int i = 0;i< cloneList.length - 1;i++){
        firstSum+= cloneList[i].getX()*cloneList[i+1].getY();
        secondSum+= cloneList[i+1].getX()*cloneList[i].getY();
    }
    firstSum+=cloneList[cloneList.length-1].getX()*cloneList[0].getY();
    secondSum-=cloneList[0].getX()*cloneList[cloneList.length-1].getY();

    double finalSum = firstSum-secondSum;
    area = Math.abs(finalSum)/2;
    return area;

} 
```

# javascript - 添加到下拉菜单的javascript函数

> ID：16074041
> 
> 赞同：0
> 
> 时间：2013-04-18T03:36:15.470
> 
> 标签：javascript, drop-down-menu, insert

好的，假设我有一个如下所示的下拉菜单：

```
 <form action="" method="POST" name="myform">
            <select name="test_select">
                <option value="1">my val 1</option>
                <option value="3">my val 3</option>
                <option value="4">my val 4</option>
            </select>
            <input type="submit" value="test_button" name="test_button">
        </form> 
```

只是一个基本的菜单。如何使用功能搜索菜单并将值 2 添加到菜单中？我希望它最终看起来像这样：

```
 <form action="" method="POST" name="myform">
                <select name="test_select">
                    <option value="1">my val 1</option>
                    <option value="2">my val 2</option>
                    <option value="3">my val 3</option>
                    <option value="4">my val 4</option>
                </select>
                <input type="submit" value="test_button" name="test_button">
            </form> 
```

我尝试制作一个函数，以显示我想用这个去哪里。

```
<script>
        function addItems()
        {
            var option = document.createElement("option");

            option.text = "val 2"
            option.value = 2

            for (var i = 1; i < 3; i++; ) {
                if (document.getElementsByName.value < 2) {
                    option.text = "val 2"
                    option.value = 2
                }
            }

        }
    </script> 
```

如何使此功能起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:53:45.483

我稍微修改了您的代码以使其正常工作

```
function addItems()
    {
      var option = document.createElement("option");

      option.text = "val 2";
      option.value = 2;

      var select = document.getElementsByName('test_select');
      var firstGreater = null;
      if (select.length > 0)
      {
        for(var i = 0; i < select[0].children.length; i++)
        {
          if (select[0].children[i].value > 2)
          {
            firstGreater = select[0].children[i];
            break;
          }

        }
        if (firstGreater != null)
          select[0].insertBefore(option, firstGreater);
        else
          select[0].appendChild(option);
      }     

    } 
```

此片段不需要添加库，您可以[在 JSBin 上查看现场演示](http://jsbin.com/eterej/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:42:19.493

转到此链接可能会有所帮助

[http://www.electrictoolbox.com/javascript-add-options-html-select/](http://www.electrictoolbox.com/javascript-add-options-html-select/)

[使用 jQuery 向 <select> 添加选项？](https://stackoverflow.com/questions/740195/adding-options-to-a-select-using-jquery-javascript)

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:00:55.917

首先，你有很多语法错误。但是让我们从 HTML 开始。

```
<form action="" method="POST" name="myform">
    <select name="test_select" id="test_select">
        <option value="1">my val 1</option>
        <option value="3">my val 3</option>
        <option value="4">my val 4</option>
    </select>
    <input type="button" value="test_button" name="test_button" onclick="addItems();">
</form> 
```

为您的选择添加一个 id 属性，以便您能够在您的 javascript 代码中找到该元素。还将 onclick 回调添加到按钮，以便在单击按钮时调用该函数。我将类型从提交更改为按钮以避免重新加载页面。

这是代码：

```
function addItems() {
    var option = document.createElement("option");

    option.text = "my val 2"
    option.value = 2

    var combo = document.getElementById("test_select");

    var found = false;

    for (var i = 0; i < combo.length; i++) {
        if (parseInt(combo[i].value) > 2) {
            combo.add(option, combo[i]);
            found = true;
            break;
        }
    }

    if(!found) {
        combo.add(option, null);
    }

    return false;
} 
```

组合变量指向您的选择，因此您可以调用 length 来获取当前大小，也可以使用 [] 来获取给定位置的选项。

.add() 函数在作为第二个参数传递的选项之前添加新选项，如下所述：[.add()](http://www.w3schools.com/jsref/met_select_add.asp)

此代码假定您的选项已预先排序。

了解更多信息：

[HTML DOM 选择对象](http://www.w3schools.com/jsref/dom_obj_select.asp)

# python - SqlAlchemy：将继承的类型从一种转换为另一种

> ID：16074042
> 
> 赞同：16
> 
> 时间：2013-04-18T03:36:18.363
> 
> 标签：python, sqlalchemy, flask-sqlalchemy

假设我在同一个数据库表上有两种不同的类型（单表继承）：

```
class Employee(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    name = db.Column(db.String, nullable = False)
    discriminator = db.Column('type', String)
    __mapper_args__ = {'polymorphic_on': discriminator}

class Manager(Employee):
    __mapper_args__ = {'polymorphic_identity': 'manager'}
    division = db.Column(db.String, nullable = False)
    role = db.Column(db.String, nullable = False)

class Worker(Employee):
    __mapper_args__ = {'polymorphic_identity': 'worker'}
    title = db.Column(db.String, nullable = False) 
```

（是的，我使用的是 Flask-SqlAlchemy 而不是普通的香草）现在我该如何将一种声明性模型转换为另一种。也就是说，如果一个“工人”被提升为“经理”怎么办？我怎么做？我是否必须编写原始 SQL 才能做到这一点？

抱歉，如果之前有人问过这个问题，但我无法从 Google 中找到它。请注意，这是一个人为的例子。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-15T03:21:44.370

它很笨拙，并且会导致警告，但是您可以通过设置属性来蛮力修改鉴别器列：

```
john_smith = session.query(Employee).filter_by(name='john smith').one()
john_smith.discriminator = 'manager'
session.commit() 
```

这将导致警告，例如，

```
SAWarning: Flushing object <Worker at 0xdeadbeef> with incompatible polymorphic
identity 'manager'; the object may not refresh and/or load correctly
    mapper._validate_polymorphic_identity(mapper, state, dict_) 
```

你可以忽略它，只要你解决它会导致的问题。最*安全*的做法是在提交后立即关闭会话 ( `session.close()`) 或从中删除所有内容 ( `session.expunge_all()`)。

如果必须，您可以通过将 John 从会话中删除 ( `session.expunge(john_smith)`) 来单独解决 John 对象的问题。你必须小心。任何剩余的引用都`john_smith`将保留该对象，尽管谢天谢地他将被分离`session`并且您将不会被允许对它们做任何事情。

* * *

我也尝试了其他明显的选择。两者都不起作用，但都说明了 SQLAlchemy 的`Session`对象存储以及如何存储：

1.  `session.refresh(john_smith)`失败了

    ```
    InvalidRequestError: Could not refresh instance '<Worker at 0xdeadbeef>' 
    ```

    这是因为 SQLAlchemy 在数据库中查询 a `Worker`（不是 a `Employee`）并且找不到 John Smith 的名字，因为数据库现在知道 John 是由于他的`type`列中的新值而被提升的。

2.  `session.expire(john_smith)`成功但未能将 John 更新为新类，任何后续访问他都会导致

    ```
    ObjectDeletedError: Instance '<Worker at 0xdeadbeef>' has been deleted, or
    its row is otherwise not present. 
    ```

    SQLAlchemy 仍然认为 John 是 a `Worker`，并尝试将他作为 a 进行查询`Worker`。那是因为他还在坚持`session.identity_map`，看起来是这样的：

    ```
    {(saexample2.Employee, (1,)): <saexample2.Worker at 0xdeadbeef>} 
    ```

    所以有约翰，明确列为`Worker`对象。当您`expunge()`从会话中获得 John 时，字典中的此条目将被清除。当你`expire()`是他时，他的所有映射属性都被标记为过时，但他仍然存在于字典中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:25:49.320

我建议修改你的对象模型。对象模型将从重新思考中受益的一个迹象是，当一个对象与另一个对象的属性一样工作时。在这种情况下，`Worker.title`同样可以是“经理”。

此外，Manager.division 作为自己的对象 Division 效果更好。尤其是因为可以想象一个 Division 与 Worker 有一对多的关系。

可能是一个`Division`对象，其中一个`ForeignKey`管理器指向一个`Employee`对象。该`Employee`对象将具有标题属性；在 中，`Employee.__init__()`您可以手动检查员工是否是任何部门的经理，然后将 设置`Employee.title`为“经理” `__init__()`。

# mysql - mysql查询跟随系统

> ID：16074045
> 
> 赞同：0
> 
> 时间：2013-04-18T03:36:27.880
> 
> 标签：mysql, join

我有以下表格

`followTable`带柱子 `userid` `followingid`

和

`userTable`带柱子 `userid` `username`

现在要找出谁关注我，假设我是用户 1 我运行查询

```
SELECT userTable.username,  userTable.userid FROM userTable INNER JOIN followTable ON followTable.userid = userTable.userid   WHERE followTable.followingid = '1' order by followTable.datefollowed Desc 
```

所以我可以把它放进去并在php中排列一个回声

结果将是这样的

```
username     userid   

john           2

joe            5 
```

现在我想知道我是否通过使用相同的查询来关注用户，以便输出表是这样的

```
username      userid     followinguser
john             2           0
joe              5           1 
```

其中 0 表示我没有关注用户，1 表示我正在关注用户。

谁能指出我如何执行此查询的正确方向。我尝试使用自加入，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:03:01.760

```
 SELECT t1.userid,t1.username ,COALESCE(t2.followornot, 0) as followornot 
 from user t1 left join 
  (SELECT f.userid as fid,1 as followornot
  FROM follow f where f.followingid='youruseridhere' ) t2 on t1.userid=t2.fid 
```

[http://sqlfiddle.com/#!2/d45002/21](http://sqlfiddle.com/#!2/d45002/21)

# ruby-on-rails - 如何修复 #show 错误中的 NoMethodError？

> ID：16074049
> 
> 赞同：2
> 
> 时间：2013-04-18T03:36:41.440
> 
> 标签：ruby-on-rails, routing

我正在尝试通过链接访问特定评论：

```
<%= link_to "Full Review", review_path(review) %>< 
```

显示.html.erb：

```
 <%= @review.pro %> 
```

评论控制器.rb：

```
def show 
    @review = Review.find(params[:id])
end 
```

我在审查表中有一个名为 pro 的列，如迁移文件所示：

```
class CreateReviews < ActiveRecord::Migration
def change
  create_table :reviews do |t|
    t.string :pro
    t.string :con
    t.string :advice
    t.string :date
    t.string :role
    t.string :company

    t.timestamps
  end
end 
```

结尾

我得到的错误是：

```
undefined method `pro' for nil:NilClass
Extracted source (around line #1):

1: <%= @review.pro %> 
```

即使我在 show 方法中包含“puts @review”，rails 控制台中也不会返回任何内容。关于如何解决这个问题的任何建议？

当我在 show 方法中手动包含 Review.find(1) 时更新：

由评论控制器处理#show 作为 HTML 参数：{“id”=>“1”} 在布局/应用程序中呈现评论/show.html.erb（0.9 毫秒）在 3 毫秒内完成 500 内部服务器错误

ActionView::Template::Error (未定义方法`pro' for nil:NilClass): 1: <%= @review.pro %> app/views/reviews/show.html.erb:1:in`_app_views_reviews_show_html_erb___648582160945665650_70143359368840'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:57:21.243

看来您的`@review`变量为零。（可能您在这一行中没有得到匹配的记录`Review.find(params[:id])`）

避免此错误的一种方法是

```
<%= @review.try(:pro) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:45:38.240

Nil 异常是最难调试的。正如@sameera207 所建议的那样，您必须“遵循零”。

在您的控制器中，尝试

```
def show 
  @review = Review.find(params[:id])
  logger.info "Review: #{@review}"
  logger.info "Review is nil? #{@review.nil?}"
end 
```

如果您的`log/development.log`节目`Review is nil?: true`，那么您没有找到正确的记录。您的参数也应该显示在您的日志文件中。

# wcf - 使用 WCF、IIS 以及客户端身份验证进行传输安全性.. 是否可能？

> ID：16074052
> 
> 赞同：1
> 
> 时间：2013-04-18T03:36:51.657
> 
> 标签：wcf, ssl, certificate, iis-7.5

我可以在 SO 上找到一些类似的问题，但我不确定这个问题的答案。当我阅读有关此的不同帖子时，我变得越来越困惑。所以问这个让我满意。

我有一个托管在 IIS 上的 WCF 服务。我有一个连接到该服务并调用方法的客户端。我现在尝试使用证书来利用传输安全性。

在客户端我有一个配置

```
<bindings>
  <basicHttpBinding>
    <binding name="testBinding">
      <security mode="Transport">
        <transport clientCredentialType="Certificate"  proxyCredentialType="Basic"/>
      </security>
    </binding>
  </basicHttpBinding>
</bindings>

<behaviors>
  <endpointBehaviors>
    <behavior name="testBehavior">
      <clientCredentials>
        <clientCertificate storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" findValue="client007"/>
      </clientCredentials>
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

在服务器端我有一个配置

```
<behaviors>
  <serviceBehaviors>
    <behavior name="testServiceBehavior">
      <serviceMetadata httpsGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
      <serviceCredentials>
        <clientCertificate>
          <authentication certificateValidationMode="PeerTrust" trustedStoreLocation="LocalMachine"/>
        </clientCertificate>
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
</behaviors>

<bindings>
  <basicHttpBinding>
    <binding name="testServiceBinding">
      <security mode="Transport">
        <transport clientCredentialType="Certificate"/>
      </security>
    </binding>
  </basicHttpBinding>
</bindings> 
```

现在，我想要的场景是，只有将其公钥安装在服务器受信任的人上的客户端才能访问该服务。

但就我而言，无论我是否在受信任的人中安装公钥。我可以使用我自己创建的任何证书访问该服务。

我检查了匿名身份验证是否启用，是因为这个吗？当我禁用匿名访问时，我收到一条错误消息

> http请求未经客户端身份验证从服务器收到的身份验证是基本领域

如何确保只有公钥在服务器上的客户端才能访问该服务？

这种验证不适用于运输安全吗？请帮我。谢谢

# z3 - 为 Z3 提供简单的公理

> ID：16074053
> 
> 赞同：0
> 
> 时间：2013-04-18T03:36:52.477
> 
> 标签：z3

有没有办法告诉 Z3 一个逻辑公理可能适用于某种情况？例如，P(x) ==> \exists x P(x) 总是有效的。但是如果 P 足够复杂，那么 Z3 可能会感到困惑并说未知。

```
(declare-const size Int)
(declare-const h (Array Int Int))
(assert  (forall ((j Int) (k Int)) (=> (and (<= 0 k) (< k size) (<= 0 j) (< j size) (not (= k j))) (not (= (select h j) (select h k))))))
(assert (not (exists ((g (Array Int Int))) (forall ((j Int) (k Int)) (=> (and (<= 0 k) (< k size) (<= 0 j) (< j size) (not (= k j))) (not (= (select g j) (select g k))))))))
(check-sat) 
```

第一个断言说 h 是一个将不同整数从 0..size-1 映射到不同整数的数组。第二个断言说这样的数组不存在。是否可以在 SMT 文件中提供简单有效的公理，例如 P(x) ==> \exists x P(x) 来帮助 Z3？可能是我误解了这个例子中发生的事情。但是根据我有限的理解，如果Z3实例化我提到的公理，它可能会成功证明这个公式是不饱和的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:27:04.403

这似乎是一个触发问题，即 Z3 没有实例化存在量化的公理（也可能不是普遍量化的公理）。看看下面的简化示例：

```
(set-option :AUTO_CONFIG false)
(set-option :SMT.MBQI false)

(declare-fun f (Int) Bool)

(assert (forall ((x Int))
  (=> (<= 0 x) (f x))
))

(assert (not (exists ((x Int))
  (=> (<= 0 x) (f x))
)))

; (assert (f -10))

(check-sat) 
```

Z3（版本 4.3.2，64 位，构建哈希码 96f4606a7f2d）报告`unknown`，但如果您取消注释最后一个断言，它会报告`unsat`。因此，我假设 Z3 为这两个公理推断的模式是`:pattern ((f x))`，这意味着它`f x`必须在句法上发生，然后才能实例化公理。

您可以在 z3 指南中阅读有关[量词模式的更多信息。](http://rise4fun.com/Z3/tutorialcontent/guide#h28)

# jakarta-ee - 如何在 Vaadin 中将 ItemSorter 添加到表容器中？

> ID：16074056
> 
> 赞同：2
> 
> 时间：2013-04-18T03:37:18.457
> 
> 标签：jakarta-ee, sorting, containers, vaadin

我有一个从 BeanItemContainer 扩展的 Container 类。我想将 ItemSorter 添加到 DATE_CREATED 属性以按降序对值进行排序。

容器类。

```
public class NoteContainer extends BeanItemContainer<CaseNote> implements Serializable
{
    private static final long serialVersionUID = -5926608449530066014L;

    public static final String DATE_CREATED = "dateCreated";
    public static final String CREATED_BY = "createdBy";
    public static final String TEXT = "text";
    public static final String ACTION = "Action";

    public static final Object[] NATURAL_COL_ORDER = new Object[] {
        ACTION, DATE_CREATED, CREATED_BY, TEXT

    };

    public static final String[] COL_HEADERS_ENGLISH = new String[] {
        "ACTION", "Date Created/Updated", "Created/Updated By", "Note"
    };

    /**
     * Default Constructor.
     * 
     */
    public NoteContainer()
    {
        super(CaseNote.class);
    }
} 
```

CaseNote 是一个实体类，里面`DATE_CREATED` 是`java.util.Date`格式。

请提供适当的解决方案...

与[排序 vaadin 表相关](https://stackoverflow.com/questions/16064806/vaadin-table-must-sort-entries-in-chronological-order-descending-i-e-latest-at)

提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:36:37.537

BeanItemContainer 已经准备好轻松设置 ItemSorter 的一切。您可以使用此功能：

```
public void sort(Object[] propertyId, boolean[] ascending) 
```

因此，例如，您可以在容器中添加一个 sortByDate() 函数来执行此操作。这里有三个示例类。

豆子：

```
public class CaseNote {
private static final Random R = new Random();
private static final long Y_IN_MILLIES = 1000l * 60l * 60l * 24l * 365l;
private Date dateCreated = new Date(System.currentTimeMillis() - Math.round(R.nextDouble() * Y_IN_MILLIES));

private String text = UUID.randomUUID().toString();

public String getText() {
    return text;
}

public Date getDateCreated() {
    return dateCreated;
}
} 
```

容器：

```
public class NoteContainer extends BeanItemContainer<CaseNote> {

public NoteContainer() {
    super(CaseNote.class);
}

public void sortByDate() {
    sort(new String[] { "dateCreated" }, new boolean[] { false });
}
} 
```

测试界面：

```
public class TestUI extends UI {

@Override
protected void init(VaadinRequest request) {
    NoteContainer nc = new NoteContainer();
    for (int i = 0; i < 10; i++) {
        nc.addItem(new CaseNote());
    }
    nc.sortByDate();

    for (int i = 0; i < 10; i++) {
        nc.addItem(new CaseNote());
    }

    Table t = new Table("MyTable", nc);
    setContent(t);
}
} 
```

**注意：**调用 sortByDate() 函数后添加的 Items 不排序。如果您希望在每次插入后对项目进行排序，您可以覆盖 addItem() 函数，以便它们在添加项目后调用 sort()。

# android - onPageSelected 不适用于第一页

> ID：16074058
> 
> 赞同：59
> 
> 时间：2013-04-18T03:37:53.743
> 
> 标签：android, android-viewpager

我的寻呼机适配器（扩展 PagerAdepter）中有一个 textview。我用 MainActivity 的 onPageSelected 更新了这个文本视图。其位置 > 0 的更新文本视图，但启动页面（位置 0）不会在启动时更新。当我向前滑动然后向后滑动；它为位置 0 设置值，但我无法在开始时设置值。如何设置明星页面的价值？

```
public void onPageSelected(int position) {

             switch (position) {
                case 0: 

                     PagerAdapter.tv.setText("value"); // => doesnt work on start

                    break;

                            default:
                                   PagerAdapter.tv.setText("value");
                                         break;
}
} 
```

完整代码：

```
public class QuizStart extends SlidingFragmentActivity {
 @Override
        protected void onCreate(final Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

           this.setContentView(R.layout.activity_main);

              mPager = (ViewPager)findViewById(R.id.pager);         
            QuestionPagerAdapter mAdapter = new QuestionPagerAdapter();

            mPager.setAdapter(mAdapter);
            QuizStart.onPageSelected(0);

         mPager.setOnPageChangeListener(new OnPageChangeListener() {

            @Override
            public void onPageScrollStateChanged(int arg0) { }

            @Override
            public void onPageScrolled(int arg0, float arg1, int arg2) { }

            @Override
            public void onPageSelected(int position) {

             switch (position) {
                case 0: 

                     PagerAdapter.tv.setText("value"); // => doesnt work on start

                    break;

                            default:
                                   PagerAdapter.tv.setText("value");
                                         break;
                }
            }

        });
}
} 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-18T03:50:18.320

`onPageSelected(0)`您可以在创建时手动调用`OnPageChangeListener`以设置起始状态：

```
OnPageChangeListener pageChangeListener = new OnPageChangeListener() {
    @Override
    public void onPageScrollStateChanged(int arg0) { }

    @Override
    public void onPageScrolled(int arg0, float arg1, int arg2) { }

    @Override
    public void onPageSelected(int position) {

        switch (position) {
        case 0: 
            QuizStart.next.setText(getmycurrentpage()+"");
            break;

        default:

            QuizStart.next.setText(getmycurrentpage()+"");
            break;
        }
    }
});

   mPager.setOnPageChangeListener(pageChangeListener);
   // do this in a runnable to make sure the viewPager's views are already instantiated before triggering the onPageSelected call
   mPager.post(new Runnable()
   {
       @Override
       public void run() 
       {
           pageChangeListener .onPageSelected(viewPager.getCurrentItem());
       }
   }); 
```

**编辑**

现在它不会像**@metemet06**`Null Pointer exception`所指出的那样

 *** * *

## 回答 #2

> 赞同：54
> 
> 时间：2016-01-08T11:13:23.610

对我来说下一个代码

```
 viewPager.addOnPageChangeListener(myOnPageChangeListener); 
```

.

```
 ViewPager.OnPageChangeListener myOnPageChangeListener = new ViewPager.OnPageChangeListener() {

    //declare key
    Boolean first = true;

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        if (first && positionOffset == 0 && positionOffsetPixels == 0){
            onPageSelected(0);
            first = false;
        }
    }

    @Override
    public void onPageSelected(int position) {
        //do what need
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-25T08:16:51.480

我的解决方案是扩展寻呼机适配器并在其中创建一个接口。然后让适配器在创建适配器后只调用一次接口。在接口回调中，您可以调用 onPageChanged 方法而不会出现 nullpointerexception。将此类添加到您的项目中并从中扩展您的适配器。在将适配器设置为 viewpager 之前，不要忘记将侦听器设置为适配器。适配器类如下：

```
public abstract class ExtendedPagerAdapter extends FragmentPagerAdapter {

private boolean instantiated;
private AdapterListener adapterListener;

public interface AdapterListener {
    void onAdapterInstantiated();
}

public ExtendedPagerAdapter(FragmentManager fragmentManager) {
    this(fragmentManager, null);
}

public ExtendedPagerAdapter(FragmentManager fragmentManager, AdapterListener adapterListener) {
    super(fragmentManager);
    this.adapterListener = adapterListener;
    instantiated = false;
}

@Override
public void finishUpdate(ViewGroup container) {
    super.finishUpdate(container);
    if (!instantiated) {
        instantiated = true;
        if (adapterListener != null) {
            adapterListener.onAdapterInstantiated();
        }
    }
}

public void setAdapterInstantiatedListener(AdapterListener adapterListener) {
    this.adapterListener = adapterListener;
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-11T12:31:57.870

我通过在我的活动的 onCreate() 方法中添加应该为第一页执行的代码来解决我的应用程序中的问题。

它不是最漂亮的 hack 并且涉及一些冗余代码，但由于我只想在页面更改时加载一些文本数据，所以在我的情况下这是最简单的方法。

手动调用 onPageSelected() 会导致 NullPointerExceptions，正如上面其他评论中所述。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-20T15:03:47.807

您可能使用一些 AsyncTask 来加载数据集，并且很难确定哪个任务将是最后完成的。只有在最后一个任务完成后，当整个数据集完成时，您才能调用 OnPageSelected，因为它正在 UI 上对整个数据集进行刷新。

与其在第一次加载页面时手动调用 OnPageSelected 函数，不如以“正常”方式逐步构建 UI。稍后，当用户更改页面时，数据集应该是完整的并保存，以便在 OnPageSelected 函数中进行更新。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T04:03:05.303

在我看来，您真正想要做的是覆盖[`getPageTitle()`](http://developer.android.com/reference/android/support/v4/view/PagerAdapter.html#getPageTitle%28int%29)，然后在其他地方获取该页面标题并将其设置为 TextView 的文本。

这样，当您初始化活动时，初始化 PagerAdapter 并调用`getTitle(0)`. 这将为您提供第 0 页的标题。现在在 Activity 的文本视图中设置它。稍后，每当您更改页面时，只需调用`getTitle(newPosition)`并更新该 TextView。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-22T17:37:10.673

我的解决方案是扩展 ViewPager

```
class MyViewPager extends ViewPager {

    private List<OnPageChangeListener> _Listeners = new ArrayList<>();

    public MyViewPager(Context context) {
        super(context);
    }

    public MyViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public void addOnPageChangeListener(OnPageChangeListener listener) {
        super.addOnPageChangeListener(listener);
        _Listeners.add(listener);
    }

    @Override
    public void removeOnPageChangeListener(OnPageChangeListener listener) {
        super.removeOnPageChangeListener(listener);
        _Listeners.remove(listener);
    }

    @Override
    public void setCurrentItem(final int item) {
        if (item != getCurrentItem()) {
            super.setCurrentItem(item);
        } else {
            post(new Runnable() {
                @Override
                public void run() {
                    dispatchOnPageSelected(item);
                }
            });
        }
    }

    private void dispatchOnPageSelected(int position) {
        for (int i = 0, size = _Listeners.size(); i < size; i++) {
            OnPageChangeListener listener = _Listeners.get(i);
            if (listener != null) {
                listener.onPageSelected(position);
            }
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-08T07:41:12.873

因为我做了这里的建议但没有用，我将发布对我有用的方法是将实例化函数添加到 onPageScrolled，如下所示：

```
 @Override
   public void onPageScrolled(int arg0, float arg1, int arg2) {

           adapter.closeText(arg0, viewPager);

    } 
```

可能它起作用的原因是 onPagesScrolled 在 android 任务管理器的行下方被激活，因此我们通过跳过侦听器附件到视图来防止页面膨胀的不需要的情况。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-14T08:30:10.743

```
@Override
public void addOnPageChangeListener(@NonNull OnPageChangeListener listener) {
    super.addOnPageChangeListener(listener);
    if (getAdapter() != null && getAdapter().getCount() > 0) {
        post(() -> listener.onPageSelected(getCurrentItem()));
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-13T10:18:55.557

其实我找到了一个基于这个[答案](https://stackoverflow.com/a/20292064/2206688)的好方法。

问题是在`ViewPager`设置监听器时没有完全加载，第一页被调用但里面的片段`ViewPager`还没有完全初始化。

为了解决这个问题，我只保留一个变量来知道第一页是否被调用：

```
private boolean mFirstPageCalled = false; 
```

然后在监听器中：

```
@Override
public void onPageSelected(int position) {

    if(mFirstPageCalled) {
        // Do your thing
    } else {
        mFirstPageCalled = true;
    }
} 
```

最后要做的是处理丢失的第一页，这可以在`ViewPager`完全创建后完成：

```
 mViewPager.post(new Runnable(){
        @Override
        public void run() {
            // Do your thing
        }
    }); 
```

就我而言，我只是在这里调用当前显示的片段并对其进行处理：

```
Fragment currentFragment = mPagerAdapter.instantiateItem(mViewPager, mViewPager.getCurrentItem());
currentFragment.customAction(); 
```

该`post`方法只调用一次，非常适合处理第一页的情况。**

# kendo-ui - 剑道下拉宽度

> ID：16074059
> 
> 赞同：13
> 
> 时间：2013-04-18T03:38:04.227
> 
> 标签：kendo-ui, kendo-asp.net-mvc

嗨，有人能告诉我如何设置剑道下拉菜单的宽度吗？这是我的代码示例，它不起作用。这有什么不对吗？

```
$("#div1").kendoDropDownList({
    dataSource: items,
    dataTextField: "Name",
    dataValueField: "Id",
    Width : "250px"
}); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-18T06:27:56.413

kendoDropDownList 的配置没有属性宽度。见这里：[剑道文档](http://docs.kendoui.com/api/web/dropdownlist)

您可以做的是为正确的类设置样式。由于您希望确实知道下拉列表的位置，因此您可以指定选择器，使其不适用于所有下拉列表。

```
#myContainer .k-dropdown {
     width: 250px;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-12-09T18:49:19.627

如果应用了 MVC Razor DropDownList HTML helper/wrapper 语法，那么您可以使用方法 HtmlAttributes 来指定下拉列表的宽度，例如：

```
 @(Html.Kendo().DropDownList()                                                            .Name("myDDL")
.HtmlAttributes(new { style="width:100px" }) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-02-17T07:09:03.383

如果您必须为不同的控件提供不同的宽度，您可以按照以下方法为特定控件提供宽度。

```
$("#div1").width(250).kendoDropDownList({
    dataSource: items,
    dataTextField: "Name",
    dataValueField: "Id",
}) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-13T13:45:48.190

你也可以试试这个；

```
<script type="text/javascript">
  $(document).ready(function() {
    var kendoDropDown = $('#div1').data('kendoDropDownList');
    kendoDropDown.list.width(250);
  });
</script> 
```

更多文档可以[在](http://docs.telerik.com/kendo-ui/web/dropdownlist/overview#customize-the-width-of-the-dropdownlist)Telerik 的官方 API 参考中找到。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-14T20:33:17.903

最好用 CSS 来做

```
#div1 {     
    width: 250px;
} 
```

但将使用代码

```
$("#div1").width(250).kendoDropDownList({
    dataSource: items,
    dataTextField: "Name",
   dataValueField: "Id",
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-17T14:13:11.750

要保持浏览器设置的自动宽度：

```
$("select").each(function () {
    $(this)
        .width($(this).width())
        .kendoDropDownList();
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-27T13:58:10.567

这将 100% 有效，因为它对我有用，我尝试了上述解决方案，但它对我不起作用，所以我自己找到了这个 :)，我希望你们都能从中受益

```
#DivThatContainsTheDropdown .k-combobox{
width: 22em !important;
} 
```

# postgresql - 选择具有可重复日期时间 PostgreSQL 的记录

> ID：16074062
> 
> 赞同：0
> 
> 时间：2013-04-18T03:38:43.030
> 
> 标签：postgresql, datetime, intervals

我正面临着日历的这个问题。

我必须提取所有记录（事件）（通过选择）：1.特定日期，或 2.可重复日期

问题是普通日历显示整个月份（或特定时间范围），因此可以从子查询生成的子集中选择记录（并比较日期片段），即：

```
select (generate_series('2012-06-29 00:00:00',
                        '2012-07-03 00:00:00', 
                        '5 minutes'::interval))::timestamp; 
```

我必须构建一个日历视图，就像一个无限的事件列表，你可以向下滚动。所以我必须一个一个地显示事件。当我选择事件（即 2012-06-29 00:00:00 到 2012-10-29 00:00:00）时，语句将不考虑日期为 2012-10-30 00:00:00 的记录，这是意料之外的。

如何选择多个不连续的日期？

**数据库架构：**

```
CREATE TABLE "public"."events" (
"id" int4 DEFAULT nextval('events_id_seq'::regclass) NOT NULL,
"date" timestamp(6),
"date_repeat_interval" interval(6),
"date_repeat_start" timestamp(6),
"date_repeat_stop" timestamp(6),
"event_name" varchar(255) NOT NULL
)
WITH (OIDS=FALSE); 
```

在特定日期插入一些常规事件：

```
INSERT INTO "public"."events" VALUES ('1', '2013-04-18 14:04:39', null, null, null, 'Regular 1');
INSERT INTO "public"."events" VALUES ('2', '2013-04-19 14:04:50', null, null, null, 'Regular 2'); 
```

并插入一些间隔为 1 和 2 天的事件，并指定从和到日期的重复：

```
INSERT INTO "public"."events" VALUES ('3', null, '1 day', '2013-04-16 14:05:26', '2013-04-19 14:05:31', 'Repeatable 1');
INSERT INTO "public"."events" VALUES ('4', null, '2 days', '2013-04-17 14:05:49', '2013-06-15 14:05:53', 'Repeatable 2'); 
```

**问题：**

如何查询数据库范围内的所有事件：从现在到无限，限制为 10。它们按发生顺序发生，包括重复事件的多次发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T02:20:52.130

您可以使用递归 CTE 执行此操作。请注意，您确实需要为其添加限制，否则它会愉快地重复到无穷大。

```
WITH RECURSIVE event_calendar AS (
    SELECT id, coalesce("date", date_repeat_start) as e_date, event_name, 0 AS level
      FROM events
     UNION
    SELECT e.id, ec.e_date + date_repeat_interval, ec.event_name, ec.level + 1
      FROM events e
      JOIN event_calendar ec ON e.id = ec.id
     WHERE ec.level <= 10 and e.date_repeat_start is not null 
           and e.date_repeat_stop >= ec.e_date + date_repeat_interval
)
SELECT * FROM event_calendar order by e_date; 
```

# javascript - 源代码丢失。可用的缩小文件。如何取消压缩文件。

> ID：16074066
> 
> 赞同：1
> 
> 时间：2013-04-18T03:39:24.127
> 
> 标签：javascript, minify

我有一个缩小版本的 javascript 文件。我丢失了它的原始源代码。如何从我的缩小版本中恢复我的源代码？变量名称显示为 _1、_2 等。有没有一种方法可以将变量名称更改为有意义的名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T04:13:16.767

Minification must have just minified the script, but if the variable names have been changed that means you used some kind of an uglifier. There are several online tools available like [http://jsbeautifier.org/](http://jsbeautifier.org/) that'd help you unminify the code, but uglification can probably not be undone, so you've to rename all your variables manually.

Protip: Use a version control system like [Git](http://git-scm.com/) to keep your revisions/history and also take backups so that you don't loose your source code in future.

I understand strange issues occur, but hope you resolve them. Good Luck!

# asp.net - 从服务器下载文件

> ID：16074069
> 
> 赞同：0
> 
> 时间：2013-04-18T03:39:26.900
> 
> 标签：asp.net, download, ashx

我有一个 ASP.NET/C# 页面。它基本上有一个文本框来接受用户输入。数据在服务器上进行处理，并生成并保存文件。

最初，我使用`Response.TransmitFile()`. 但是，此过程会在下载文件时禁用页面上的 javascript。

因此，我设计了一个 .ashx 处理程序来帮助下载文件。

现在，页面上有两个按钮。用户单击一个以处理和创建文件。一旦页面回发，另一个按钮被启用并且应该被单击以下载文件（调用处理程序）。

我想知道的是如何连接按钮来调用处理程序？

注意：我需要将参数作为查询字符串发送给处理程序。此参数仅在后面的代码中可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:54:55.857

我知道您专门询问按钮，但您可以将第二个按钮设为超链接，而不是像按钮一样设置样式并将 NavigationUrl（或 href）设置为 .ashx 路径。我对您的处理程序的代码做了一些假设，但由于它是一个处理程序，您可以通过 HTTP GET 请求直接调用它。

```
<asp:HyperLink ID="lnkDownloadFile" runat="server" NavigationUrl="/File.ashx?Id=1" Text="Download File" /> 
```

或者

```
<a href="/File.ashx?Id=1">Download File</a> 
```

如果需要在代码隐藏中设置参数，可以在 Page_Load 等生命周期事件之一中设置：

```
protected void Page_Load(object sender, EventArgs e)
{
     lnkDownloadFile.NavigationUrl = string.Format("/File.ashx?Id={0}", MyParameterValue);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:08:01.750

如果您特别想要一个按钮，对于请求，您可以采用以下方法：

ASPX：

```
<asp:Button ID="btnDownloadFile" runat="server" OnClick="btnDownloadFile_Click" /> 
```

代码隐藏：

```
protected void btnDownloadFile_Click(object sender, EventArgs e)
{
    Response.Redirect(string.Format("/File.ashx?Id={0}", MyParameter);
} 
```

# javascript - Jquery 触发器和绑定是否与发布者和订阅者一样？

> ID：16074072
> 
> 赞同：0
> 
> 时间：2013-04-18T03:39:42.527
> 
> 标签：javascript, jquery

我已经使用 javascript 实现了简单的发布者和订阅者。现在我遇到了 jquery 触发器和绑定。触发和绑定与发布者和订阅者一样......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:39:55.560

是的，在某种程度上。事件处理`trigger()`和`bind()`使用是发布/订阅模式。但这些函数仅适用于 jQuery 对象，不适用于 JavaScript 对象。

# php - 同一页面上的 PHP 消息

> ID：16074077
> 
> 赞同：0
> 
> 时间：2013-04-18T03:40:14.037
> 
> 标签：php

嗨，我的代码中有类似的东西；

```
<html>
<head><title></title></head>
<body>
<form method="post" action="processMaster.php">
<input type="submit" id="testOne" name="testOne" value="Process me">
</form>
</body>
</html> 
```

processMaster.php 内容如下；

```
<?php
echo "Boom!";
?> 
```

现在这工作正常。

但我的问题是曾经的“繁荣！” 出现时，它会出现在单独的页面中（或出现在页面的所有其他元素均未显示的页面中。）

是否有可能/解决方法我可以在同一页面上打印消息，在那里我还可以看到“处理我”按钮太明显？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:43:00.027

processMaster.php 应包含以下内容：

```
<html>
<head><title></title></head>
<body>
<form method="post" action="processMaster.php">
<input type="submit" id="testOne" name="testOne" value="Process me">
</form>
<?php 
if($_POST['testOne'] != NULL){
  echo "Boom!"'
}
?>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:44:06.310

提交到同一页面使用

```
<form method="post" action=""> 
```

并检查是否存在 $_POST 变量来决定显示什么

# sql-server - T-SQL / SQL Server : 帮助计算账户从负余额变为正数的周转时间

> ID：16074082
> 
> 赞同：4
> 
> 时间：2013-04-18T03:41:20.063
> 
> 标签：sql-server, sql-server-2008, tsql

我需要帮助来计算任何帐户的周转时间，以便从负每日余额变为正数。例如，帐户 12345 在 2013 年 4 月 5 日为正数，但在 04/06、04/07、04/08（三天）的余额为负数，第四天变为正数。我想开发一个查询来计算周转时间（4 天）。

```
Account Number  Transaction Date    Daily Balance
    12345       4/1/2013            304
    12345       4/2/2013            -78
    12345       4/3/2013            -65
    12345       4/4/2013            12
    12345       4/5/2013            25
    12345       4/6/2013            -345
    12345       4/7/2013            -450
    12345       4/8/2013            -650
    12345       4/9/2013            105
    12345       4/10/2013           110
    110000      4/1/2013            150
    110000      4/2/2013            -15
    110000      4/3/2013            -56
    110000      4/4/2013            -35
    110000      4/5/2013            -15
    110000      4/6/2013            106
    110000      4/7/2013            500
    110000      4/8/2013            -150
    110000      4/9/2013            50
    110000      4/10/2013           100
    55544       4/1/2013            150
    55544       4/2/2013            120
    55544       4/3/2013            -145
    55544       4/4/2013            -250
    55544       4/5/2013            15
    55544       4/6/2013            20
    55544       4/7/2013            40
    55544       4/8/2013            50
    55544       4/9/2013            -10
    55544       4/10/2013           60 
```

我正在尝试从上表中获得以下结果。该查询将应用于具有数千行的事务表。因此，我需要帮助来构建一些有效的查询来计算以下结果。

```
Account Number  Turnover time for an account to become positive
12345           3
12345           4
110000          5
110000          2
55544           3
55544           2 
```

我正在使用 MS SQL 服务器版本 2008。

是的，有零。他们被认为是积极的。我的意思是当余额从负数变为0或正数时，将被视为营业额。

Fadi Hassan 提供的解决方案是最高效且易于实施的。尽管它有一个挑战，例如一开始账户余额为负数，但它不起作用。例如，当余额为-110、-40、0、10、90、30、0、-10、-20、0时，将不起作用。

![在此处输入图像描述](https://i.stack.imgur.com/JcVJN.jpg)

如果有人有更好的解决方案，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:16:15.440

假设版本 >= SQL Server 2005。有两件事要记住。1\. 零账户余额如何处理？2\. 查询四次扫描表。所以效率不是很高。

```
;WITH cte AS(
SELECT t1.AccountNumber, t1.TransactionDate, t1.DailyBalance, NextRowDailyBalance
FROM #Accounts t1
CROSS APPLY (SELECT TOP 1 DailyBalance AS NextRowDailyBalance FROM #Accounts t2 WHERE t1.AccountNumber = t2.AccountNumber AND t1.TransactionDate < t2.TransactionDate ORDER BY t2.TransactionDate)t
WHERE (DailyBalance < 0 AND NextRowDailyBalance>0) OR (DailyBalance > 0 AND NextRowDailyBalance < 0)
)
SELECT a1.AccountNumber, DATEDIFF(Day,a1.TransactionDate,t.NRTransactionDate) + 1 AS TurnOverDate
FROM cte a1
CROSS APPLY (SELECT TOP 1 TransactionDate AS NRTransactionDate FROM cte a2 WHERE a1.AccountNumber = a2.AccountNumber AND a1.TransactionDate < a2.TransactionDate ORDER BY a2.TransactionDate)t
WHERE a1.DailyBalance>0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:03:18.107

我希望这就是你要找的@prem（编辑）

```
 SELECT  *
FROM    (
        SELECT  a.[Account Number],
            a.[Transaction Date],
            a.[Daily Balance],
            DATEDIFF(dd, ISNULL(    (
                        SELECT  MAX(c.[Transaction Date])
                        FROM    Accounts c
                        WHERE   c.[Account Number] = a.[Account Number]
                            AND c.[Transaction Date] < a.[Transaction Date]
                            AND c.[Daily Balance] >= 0
                        ),
                        (
                        SELECT  DATEADD(dd, -1, MIN(c.[Transaction Date]))
                        FROM    Accounts c
                        WHERE c.[Account Number] = a.[Account Number]
                        )
                        ),
            a.[Transaction Date]) AS dat
        FROM    Accounts a
        WHERE a.[Daily Balance] >= 0
    ) t
WHERE   dat > 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-26T09:35:50.893

```
;WITH T
     AS (SELECT [Account Number],
                [Transaction Date],
                [Daily Balance],
                MAX([Transaction Date]) 
                          OVER (PARTITION BY [Account Number]) AS FinalAccountTransaction,
                ROW_NUMBER() 
                          OVER (PARTITION BY [Account Number] 
                                    ORDER BY [Transaction Date]) - 
                ROW_NUMBER() 
                          OVER (PARTITION BY [Account Number], 
                                             CASE WHEN [Daily Balance] < 1 THEN 1 END 
                                    ORDER BY [Transaction Date]) AS Grp
         FROM   DailyBalance)
SELECT [Account Number],
       MIN([Transaction Date])                                             AS Start,
       DATEDIFF(DAY, MIN([Transaction Date]), MAX([Transaction Date])) + 2 AS [Turnover time]
FROM   T
WHERE  [Daily Balance] < 1
GROUP  BY [Account Number],
          Grp,
          FinalAccountTransaction
/*If this is the final group then it is not followed by a positive so exclude*/
HAVING MAX([Transaction Date]) <> FinalAccountTransaction
ORDER  BY [Account Number],
          Start 
```

[SQL小提琴](http://www.sqlfiddle.com/#!3/65379/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T09:14:38.680

使用光标检查以下解决方案，相应地修改列名。希望这可以帮助你

```
-- CREATE temp table with rownum to add row numbers
CREATE TABLE #TurnOverTimeTaken
(
    rownum INT,
    Account_Number INT NULL,
    Daily_Balance INT
)

-- Insert data into the temp table with row number
INSERT INTO #TurnOverTimeTaken
SELECT 
   ROW_NUMBER() OVER(PARTITION BY  Account_Number ORDER BY Account_Number) AS rownum
  ,Account_Number
  ,Daily_Balance
FROM TurnOverTimeTaken

-- Create another temp table to display the result  
CREATE TABLE #Result
(
    Account_Number INT NULL,
    Total INT
)

DECLARE @rownum INT
DECLARE @Account_Number INT
DECLARE @Daily_Balance INT
DECLARE @CurrentVal INT

SET @CurrentVal = 0

--Cursor starts here
DECLARE CountCursor CURSOR 
FOR SELECT rownum, Account_Number, Daily_Balance FROM #TurnOverTimeTaken
OPEN CountCursor
FETCH NEXT FROM CountCursor INTO @rownum, @Account_Number, @Daily_Balance
WHILE @@FETCH_STATUS = 0 
BEGIN
    -- Check Daily_Balance is negative and rownumber is not equal to one and previous Daily_Balance > 0
    IF(@Daily_Balance < 0 AND @rownum <> 1 AND 
    (SELECT Daily_Balance FROM #TurnOverTimeTaken WHERE rownum=@rownum-1 AND Account_Number=@Account_Number) > 0)
    BEGIN
        SET @CurrentVal = @CurrentVal + 1
        INSERT INTO #Result VALUES(@Account_Number, @CurrentVal)
    END
    ELSE IF(@Daily_Balance < 0)
    BEGIN
        INSERT INTO #Result VALUES(@Account_Number, @CurrentVal)
    END

    FETCH NEXT FROM CountCursor INTO @rownum, @Account_Number, @Daily_Balance
END
CLOSE CountCursor
DEALLOCATE CountCursor

--SELECT * FROM #TurnOverTimeTaken

SELECT Account_Number,COUNT(Total)+1 FROM #Result
GROUP BY Account_Number,Total

DROP TABLE #TurnOverTimeTaken
DROP TABLE #Result 
```

# c++ - Dijkstra 算法伪代码

> ID：16074083
> 
> 赞同：1
> 
> 时间：2013-04-18T03:41:20.823
> 
> 标签：c++, algorithm, graph-algorithm, pseudocode, dijkstra

我正在尝试用 C++ 编写 Dijkstra 的算法，互联网上有无数的例子，但我似乎无法理解这些例子是如何工作的。我宁愿以对我有意义的方式来做，这样我就可以更好地理解算法。我知道算法本身应该如何工作，并且我已经编写了一些代码。我想知道是否有人可以指出我思维过程中的缺陷。我选择将我的图表表示为边列表。我将用伪代码编写，因为我的实际代码非常混乱：

```
class Node{
   vector<node> linkVector;           //links to other nodes, generated at random
   int cost;                     //randomly generated by constructor
   bool visited = false;
}

vector<node> edgelist;           //contains all nodes

int main(){
   create n Nodes
   add all nodes to edgeList
   for each node {
      randomly add WEIGHT nodes to linkVector
   }
findPath(initialNode)
}

int findPath(Node start, node want, int cost=0){   //returns cost from src to dest
if(start==want) return cost;
if(every node has been visited) return 0;        //this is in case of failure
Node result = getMinimumCost()    //finds node in linkVector with least cost
result.visited(true)  //so we don't get stuck in a loop
findPath(result, want, result.getCost() + cost);  //recursive call
} 
```

通过递归，我试图探索所有节点，直到找到我正在寻找的节点，然后返回并将级联返回返回到函数调用堆栈的顶部，同时将总成本加起来。

性能并不重要，但如果使用递归使其变得比需要的困难得多，我愿意重写我的代码。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T03:51:53.877

Dijkstra 的算法不是递归的。递归算法最终将是深度优先的，而 Dijkstra 的算法是**广度优先**搜索。

中心思想是你有一个未访问节点的*优先级队列。*每次迭代都将距离最短的节点拉离队列的前端并*访问*它。然后更新到每个未访问邻居的距离。

像这样的基于队列的算法不适合递归实现。搜索不会像深度优先搜索那样在尝试替代路径之前探索一条耗尽路径。它同时探索许多路径，只要它们是最便宜的路径就探索它们。一旦当前路径不再是最便宜的，它就会转移到另一条路径。递归不会让你从一个路径“跳跃”到另一个路径。

[您可以在Wikipedia 文章](http://en.wikipedia.org/wiki/Dijkstra's_algorithm)的图形中看到这种行为。

![在此处输入图像描述](https://i.stack.imgur.com/1rbKz.gif)

# android - 如何将视图从视图组移动到另一个视图组？

> ID：16074086
> 
> 赞同：-1
> 
> 时间：2013-04-18T03:41:35.660
> 
> 标签：android, android-layout

```
<LinearLayout
    android:id="@+id/linear1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FF4D00"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Button" />
</LinearLayout>

<LinearLayout
    android:id="@+id/linear2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FF4D00"
    android:orientation="vertical" >
</LinearLayout> 
```

我想将@button1 移动到@linear2 中，并且属于button1 的属性不能丢失，包括click lisener。然后，@linear1 将是空的。像切割操作。我能怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T03:51:19.117

您需要从您的活动类中务实地添加和删除按钮

这可能有助于 [从布局中添加和删除视图](https://stackoverflow.com/questions/3805599/add-delete-view-from-layout)

# replace - 使用 Powershell 脚本替换给定输入中第一次出现的文本

> ID：16074089
> 
> 赞同：0
> 
> 时间：2013-04-18T03:41:58.007
> 
> 标签：replace, powershell-3.0

以下代码有效，但它替换了它找到的所有文本。有没有办法只替换第一次出现。我已经尝试了 4 天。

请帮忙。

```
cls   
$fileName = "c:\test\bmsbackuplog.htm"  
$findstring=Select-string $fileName -Pattern "The backup of volume system reserved" -list 
$replacement = "<tr><td>Change using this line</td></tr>"    
$firstdata=$findstring[0].Line 
$both="$firstdata$replacement"  
$match ="The backup of volume system reserved*.*"  
(Get-Content ($fileName)) -replace $match,$both | Set-Content "c:\test\bmsbackuplog.htm" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:11:00.647

我会为此使用零宽度负后向断言：

```
$fileName = "c:\test\bmsbackuplog.htm"
$pattern = 'The backup of volume system reserved'
$replacement = '$1<tr><td>Change using this line</td></tr>' 
[io.file]::ReadAllText($fileName) -replace "(?<!$pattern[\s\S]*)($pattern)", $replacement 
```

# entity-framework - 如何在 Visual Studio 2012 中使用 .edmx 设计器创建模型？

> ID：16074094
> 
> 赞同：1
> 
> 时间：2013-04-18T03:42:44.697
> 
> 标签：entity-framework, database-design, visual-studio-2012, edmx-designer

我是 Entity Framework 5.0 的新手。我正在寻找有关如何在 Visual Studio 2012 中使用 .edmx 设计器创建数据库模型的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:53:10.323

这个视频是一个很好的教程：

> [我正在创建一个新数据库](http://msdn.microsoft.com/en-us/data/jj205424)
> 
> 使用 Model First 使用框和线定义模型，然后生成数据库。

* * *

这是有关该主题的 MSDN 文档：

[实体框架设计器](http://msdn.microsoft.com/en-us/library/bb399249%28v=vs.103%29.aspx)

从这个主文档中，您可以深入了解很多主题，包括您想要的主题。

# iphone - 将大量 UIImage 存储在动画文件中

> ID：16074100
> 
> 赞同：3
> 
> 时间：2013-04-18T03:43:22.923
> 
> 标签：iphone, ios

我正在尝试将大量 UIImage 存储到一个文件中并读取它。我正在考虑的选项是：

1.  将图像转换为 NSData 并将每个图像保存到相应的文件（“1.png”、“2.png”等），然后再读取它们。
2.  将图像转换为 NSData 并保存到一个大文件中，并将每个图像的开始位置存储在文件中。然后稍后打开文件并使用 NSFileHandle 的 seekToFileOffset 读取它们。

我正在考虑选项 2 的原因是因为我正在尝试使用这些图像实现动画。我不确定一次打开一个图像是否足够快以制作高帧率动画。还有可能有更好的方法我还不知道。我将不胜感激任何建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T19:58:33.927

iOS 5 在 UIImage 上有一个支持图像序列的方法。

```
+ (UIImage *)animatedImageNamed:(NSString *)name duration:(NSTimeInterval)duration 
```

该方法的使用文档在这里：

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T04:24:09.783

其他选择可能是

> 1.  您可以缓存图像并同时将其文件路径存储在 plist 文件中，并在必要时访问它。

它只是另一个建议考虑一下！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T01:19:06.687

你没有提到你想做动画的原因。那么在黑暗中拍摄，您是否考虑过使用 Cocos 2D 制作动画？这里有一个很棒的教程：

[http://www.raywenderlich.com/32045/how-to-use-animations-and-sprite-sheets-in-cocos2d-2-x](http://www.raywenderlich.com/32045/how-to-use-animations-and-sprite-sheets-in-cocos2d-2-x)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:40:15.860

无需过早地对其进行优化。

最简单且可能是最好的解决方案是为您上面提到的图像制定命名约定。我实际上会在帧号的左侧添加零，这样你也可以处理更高的帧数。

即IMG_0001.png、IMG_0002.png等

使用第一个图像创建一个 UIImageView 并创建一个 frameIndex 变量，您将使用它来跟踪当前动画帧并加载正确的图像。

然后安排一个 NSTimer 以您想要的速率运行（即 1/15 == 15FPS、1/30 == 30FPS 等），并在每次 NSTimer 调用选择器时将 UIImageView 上的当前图像替换为新图像。

这是一个简单的例子：

```
- (void)startAnimation
{
    self.currentFrame = 0;
    self.animationTimer = [NSTimer scheduledTimerWithTimeInterval:1/30.f
                                                           target:self
                                                         selector:@selector(_switchImage:)
                                                         userInfo:nil
                                                          repeats:YES];
} 
```

然后在`_switchImage`方法上：

```
- (void)_switchImage:(NSTimer*)timer
{
    NSString *filename = [NSString stringWithFormat:@"IMG_%04i", self.currentFrame];
    NSString *fullPath = [[NSBundle mainBundle] pathForResource:filename ofType:@"png"];
    @autoreleasepool {
        UIImage *image = [UIImage imageWithContentsOfFile:fullPath];
        if (image) {
            self.animationImageView.image = image;
            self.currentFrame = self.currentFrame + 1;
            // If for any reason we reach the last animation frame, loop back to the beginning of the animation
            if (self.currentFrame > kLastAnimationFrame)
                self.currentFrame = 0;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-29T20:12:20.797

有趣的。听起来你需要研究一些解决方案......我认为这完全取决于图像的数量、它们的大小、你希望它们出现的帧速率等

从最简单的解决方案开始，逐步解决，直到找到合适的解决方案。

加入另一种解决方案*（不是最简单的）*。多合一文件的一种变体。您可以使用`[NSData dataWithContentsOfMappedFile:]`它绕过文件的读取（通过缓冲区传递内容）并提供对字节的直接内存访问。

*请注意，此方法在 iOS5 中已被弃用，`dataWithContentsOfFile:`建议作为替代方法，`NSDataReadingMappedAlways`它的大哥的选项似乎是使用什么*

内存映射文件可以提供有趣的功能。[一旦我使用http://www.memention.com/blog/2011/05/04/That-old-thing.html](http://www.memention.com/blog/2011/05/04/That-old-thing.html)编写了一个文件`qsort()`排序`mmap()`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-18T06:19:19.983

另一种选择是： 1\. 创建数据库文件并将所有图像加载到其中。2.在安装时将数据库文件从assets文件夹复制到documents文件夹（如果使用phonegap/jquery，如果不是，我认为还有其他方法可以做到）。3\. 现在您可以在需要时使用图像，因为（只是猜测）数据库访问比文件访问快。

# parallel-processing - 在 Mule 中并行运行流程

> ID：16074104
> 
> 赞同：1
> 
> 时间：2013-04-18T03:43:47.890
> 
> 标签：parallel-processing, mule, kettle

我在 Mule 中有两个流程，我想并行运行。第一个流程应该使用 sftp 将文件从远程机器传输到本地目录（只要文件在远程目录中不断更新，这不会停止）。第二个流程必须通过调用 Pentaho 水壶转换/作业将文件中的数据更新/插入到数据库中（只要文件不断进入，也是连续的过程）。但是，当我运行我的流程时，它以某种方式通过第一个流程并且只尝试执行第二个流程。我怎样才能解决这个问题？这是我的骡子流：

```
<flow name="flow1">
  <sftp:inbound-endpoint
    address="sftp://username:password@ip_ddress:22/path"
    responseTimeout="1000" />
  <echo-component />
  <file:outbound-endpoint path="/path/to/OutputFolder" 
    responseTimeout="10000"/>
</flow>

<flow name="flow2"> 
  <custom-transformer class="org.transformation.kettle.InvokeMain" /> 
</flow> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:56:53.703

您的第二个流程应该有一个`file:outbound-endpoint`来拾取第一个流程删除的文件：

```
<flow name="flow1">
  <sftp:inbound-endpoint
      address="sftp://username:password@ip_ddress:22/path"
      responseTimeout="1000" />
  <logger level="INFO"
      message="#[message.payloadAs(java.lang.String)]" />
  <file:outbound-endpoint path="/path/to/OutputFolder" />
</flow>

<flow name="flow2"> 
  <file:inbound-endpoint path="/path/to/OutputFolder"
      fileAge="10000" />
  <custom-transformer class="org.transformation.kettle.InvokeMain" /> 
</flow> 
```

请注意，我已经：

*   `<echo-component />`用更现代的取代了超旧的`logger`。我记录了消息负载，我认为这是您的意图？
*   丢弃了无用`responseTimeout="10000"`的`file:outbound-endpoint`，
*   在入站文件端点上设置`fileAge`10 秒，以防止拾取仍由 SFTP 入站端点写入的文件。如果太大或太小，请调整值。

# spring - 使用 Spring JSF 2.0 Hibernate Maven 初始化 ManagedBean 时出错

> ID：16074105
> 
> 赞同：1
> 
> 时间：2013-04-18T03:44:04.967
> 
> 标签：spring, jsf, maven, jpa

我正在使用 JSF 2.0、Spring、Hibernate，并且在初始化 ManagedBean 时遇到问题。

这是错误：

```
SEVERE: Error Rendering View[/cadastroDeProdutoAdminSistemas.xhtml]
 com.sun.faces.mgbean.ManagedBeanCreationException: Não é possível criar instância     para·a classe: com.catalogor3e.controller.PesquisaSistemasAdminBean.
at com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:193)
at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:102)
at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:72)
at org.apache.el.parser.AstValue.getValue(AstValue.java:161)
at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
at javax.faces.component.UIData.getValue(UIData.java:731)
at org.primefaces.component.datatable.DataTable.getValue(DataTable.java:729)
at org.primefaces.component.api.UIData.getDataModel(UIData.java:575)
at javax.faces.component.UIData.getRowCount(UIData.java:356)
at org.primefaces.component.datatable.DataTableRenderer.encodeTbody(DataTableRenderer.java:579)
at org.primefaces.component.datatable.DataTableRenderer.encodeRegularTable(DataTableRenderer.java:220)
at   org.primefaces.component.datatable.DataTableRenderer.encodeMarkup(DataTableRenderer.java:192)
at   org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:74)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:55)
at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:43)
at org.primefaces.component.layout.LayoutUnitRenderer.encodeEnd(LayoutUnitRenderer.java:51)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
at   com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:424)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    Hibernate: select estado0_.id as id3_, estado0_.nome_estado as nome2_3_ from estado    estado0_
at   org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722)
       Caused by: java.lang.NullPointerException
at com.catalogor3e.controller.PesquisaSistemasAdminBean.<init>(PesquisaSistemasAdminBean.java:51)
 at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
 at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at java.lang.Class.newInstance0(Class.java:372)
at java.lang.Class.newInstance(Class.java:325)
at com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:188)
... 58 more 
```

这是我的 ManagedBean：

```
@ManagedBean(name="pesquisaSistemasAdminBean")
@SessionScoped
public class PesquisaSistemasAdminBean{

@ManagedProperty(value = "#{filtroEtiquetaCidadeSistemaBean}")    
private FiltroEtiquetaCidadeSistemaBean filtroEtiquetaCidadeSistemaBean;

@ManagedProperty("#{facadeService}")
private FacadeService service;

private DataModel<Sistema> listaSistemas ;

//variáveis para filtro
private int idCategoriaParaFiltro = -1;
private List<String> idsDeComponentesParaFiltro = new ArrayList<String>();
private int idFabricanteParaFiltro = -1;

public PesquisaSistemasAdminBean() {
    this.listaSistemas = new ListDataModel<Sistema>  (this.service.getServiceSistemas().filtrarSistemaConstrutivo(null, null, null, null, null));
}

//retorna todas as categorias(tipos) dos sistemas existentes no banco
public List<CategoriaSistema> getListaDeCategorias(){
    List<CategoriaSistema> listaDeCategorias = this.service.getServiceCategoriaDeSistemas().getTodasAsCategoriasDeSistemas();
    return listaDeCategorias;
}

public void filtrarSistemaConstrutivo(){
     CategoriaSistema categoriaDeSistema = null;
     Fabricante fabricante = null;
     ZonaBioclimatica zona = null;
     Etiqueta etiqueta = null;
     List<CategoriaCamada> listaDeCategoriasDeComponentes = null;
     if(this.idCategoriaParaFiltro != -1){
         categoriaDeSistema =  this.service.getServiceCategoriaDeSistemas().getCategoriaPeloID(idCategoriaParaFiltro);
     }
     if(this.idFabricanteParaFiltro != -1){
         fabricante = this.service.getServiceFabricante().getFabricantePeloID(idCategoriaParaFiltro);
     }
     if(this.filtroEtiquetaCidadeSistemaBean.getZonaBioclimaticaParaFiltro() != null){
         zona = this.filtroEtiquetaCidadeSistemaBean.getZonaBioclimaticaParaFiltro();
     }
     if(this.filtroEtiquetaCidadeSistemaBean.getIdEtiqueta() != -1){
         etiqueta = this.service.getServiceCidadeEstado().getEtiquetaPeloID(this.filtroEtiquetaCidadeSistemaBean.getIdEtiqueta());
     }

     if(!this.idsDeComponentesParaFiltro.isEmpty()){
         listaDeCategoriasDeComponentes = new ArrayList<CategoriaCamada>();
         for(int i = 0; i < idsDeComponentesParaFiltro.size(); i++){
             CategoriaCamada categoriaCamada = this.service.getServiceCategoriaDeComponentesConstrutivos().getCategoriaComponenteConstrutivoPeloId(Integer.parseInt(idsDeComponentesParaFiltro.get(i)));
             listaDeCategoriasDeComponentes.add(categoriaCamada);
         }
     }
     this.listaSistemas = new ListDataModel<Sistema>  (this.service.getServiceSistemas().filtrarSistemaConstrutivo(categoriaDeSistema, listaDeCategoriasDeComponentes, fabricante, zona, etiqueta));
}

//retorna todos os fabricantes existentes no banco
 public List<Fabricante> getListaFabricantes(){
    List<Fabricante> listaDeFabricantes = this.service.getServiceFabricante().listaDeTodosOsFabricantes();
    return listaDeFabricantes;
}

 ///gets e sets está implementado, mas economizei código aqui!!! 
```

这是我的 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.mycompany</groupId>
<artifactId>catalogo</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>war</packaging>

<name>catalogo</name>

<properties>
    <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
    <dependency>
<groupId>com.sun.faces</groupId>
<artifactId>jsf-api</artifactId>
<version>2.1.6</version>
</dependency>

  <dependency>
   <groupId>com.sun.faces</groupId>
   <artifactId>jsf-impl</artifactId>
   <version>2.1.10</version>
  </dependency> 

<dependency>
   <groupId>javax.servlet</groupId>
   <artifactId>jstl</artifactId>
   <version>1.2</version>
</dependency>

<dependency>
  <groupId>javax.persistence</groupId>
  <artifactId>persistence-api</artifactId>
   <version>1.0</version>
 </dependency>

 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>3.2.2.RELEASE</version>
    </dependency>
 <dependency>
   <groupId>org.springframework</groupId>
   <artifactId>spring-core</artifactId>
   <version>3.1.2.RELEASE</version>
 </dependency>

<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-expression</artifactId>
  <version>3.1.2.RELEASE</version>
</dependency>

<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-beans</artifactId>
  <version>3.1.2.RELEASE</version>
</dependency>

<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-aop</artifactId>
  <version>3.1.2.RELEASE</version>
</dependency>

<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-context</artifactId>
  <version>3.1.2.RELEASE</version>
</dependency>

<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-context-support</artifactId>
  <version>3.1.2.RELEASE</version>
</dependency>

<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-tx</artifactId>
  <version>3.1.2.RELEASE</version>
</dependency>

<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-jdbc</artifactId>
  <version>3.1.2.RELEASE</version>
</dependency>

<dependency>
  <groupId>org.springframework</groupId>
   <artifactId>spring-orm</artifactId>
  <version>3.1.2.RELEASE</version>
</dependency>

<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-web</artifactId>
  <version>3.1.2.RELEASE</version>
</dependency>

<dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate</artifactId>
            <version>3.2.6.ga</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.3.1.GA</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>3.3.2.GA</version>
            <type>jar</type>
        </dependency>

<dependency>
  <groupId>mysql</groupId>
  <artifactId>mysql-connector-java</artifactId>
  <version>5.1.15</version>
</dependency>

<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-api</artifactId>
   <version>1.6.1</version>
</dependency>

<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-simple</artifactId>
  <version>1.6.1</version>
</dependency>

<dependency> 
  <groupId>commons-collections</groupId>
  <artifactId>commons-collections</artifactId>
  <version>3.1</version> 
</dependency> 

<dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>4.10</version>
  <scope>test</scope>
</dependency>

<dependency>
   <groupId>org.hibernate</groupId>
   <artifactId>ejb3-persistence</artifactId>
   <version>1.0.1.GA</version>
</dependency>

<dependency>
  <groupId>javax.sql</groupId>
  <artifactId>jdbc-stdext</artifactId>
  <version>2.0</version>
</dependency>

<dependency>
  <groupId>javax.transaction</groupId>
  <artifactId>jta</artifactId>
  <version>1.0.1B</version>
</dependency>

<dependency>
  <groupId>org.primefaces</groupId>  
  <artifactId>primefaces</artifactId>
  <version>3.4.1</version>
</dependency>

<dependency>
  <groupId>org.primefaces.themes</groupId>
  <artifactId>all-themes</artifactId>
  <version>1.0.9</version>
</dependency>

<dependency>
<groupId>commons-fileupload</groupId>
<artifactId>commons-fileupload</artifactId>
<version>1.2.3-SNAPSHOT</version>
</dependency>
<dependency>
<groupId>commons-io</groupId>
<artifactId>commons-io</artifactId>
<version>2.5-SNAPSHOT</version>
</dependency>
<dependency>
<groupId>rome</groupId>
<artifactId>rome</artifactId>
<version>1.0</version>
</dependency>
<dependency>
<groupId>org.apache.poi</groupId>
<artifactId>poi</artifactId>
<version>3.7</version>
</dependency>   
<dependency>
<groupId>com.lowagie</groupId>
<artifactId>itext</artifactId>
<version>2.0.7</version>
</dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <type>jar</type>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <compilerArguments>
                    <endorseddirs>${endorsed.dir}</endorseddirs>
                </compilerArguments>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
                <failOnMissingWebXml>false</failOnMissingWebXml>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.1</version>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${endorsed.dir}</outputDirectory>
                        <silent>true</silent>
                        <artifactItems>
                            <artifactItem>
                                <groupId>javax</groupId>
                                <artifactId>javaee-endorsed-api</artifactId>
                                <version>6.0</version>
                                <type>jar</type>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
<repositories>

  <repository>
        <url>http://download.java.net/maven/2/</url>
        <id>jsf20</id>
        <layout>default</layout>
        <name>Repository for library Library[jsf20]</name>
    </repository>
    <repository>
        <url>http://repo1.maven.org/maven2/</url>
        <id>jstl11</id>
        <layout>default</layout>
        <name>Repository for library Library[jstl11]</name>
    </repository>
    <repository>  
        <id>prime-repo</id>  
        <name>PrimeFaces Maven Repository</name>  
        <url>http://repository.primefaces.org</url>  
        <layout>default</layout>  
    </repository> 

        <repository>
            <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
        <id>apache.snapshots</id>
        <name>Apache Snapshot Repository</name>
        <url>https://repository.apache.org/content/repositories/snapshots</url>
    </repository>
</repositories> 
```

这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" 
     xmlns="http://java.sun.com/xml/ns/javaee" 
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
     http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>

<welcome-file-list>
    <welcome-file>faces/index.xhtml</welcome-file>
</welcome-file-list>

<context-param>
    <param-name>primefaces.THEME</param-name>
    <param-value>bootstrap</param-value>
</context-param>

   <filter-mapping> 
   <filter-name>PrimeFaces FileUpload Filter</filter-name>  
   <servlet-name>Faces Servlet</servlet-name> 
   </filter-mapping>
   <filter> 
   <filter-name>PrimeFaces FileUpload Filter</filter-name>      
   <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class> 
   </filter>    

  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
  </context-param>
 <listener>
  <listener-class>
     org.springframework.web.context.request.RequestContextListener
  </listener-class>
 </listener>
 <listener>
  <listener-class>
     org.springframework.web.context.ContextLoaderListener
  </listener-class>
 </listener>

</web-app> 
```

这是我的 applicationContext.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
 <beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

  <!-- Seta anotaçoes para serem  <context:annotation-config />usadas pelo Spring -->
  <context:annotation-config />

  <!-- Define o pacote onde o Spring vai procurar por beans anotados --> 
  <context:component-scan base-package="com.catalogor3e.dao, com.catalogor3e.service"  />

  <!-- define que as transaçoes irao ser anotadas -->
  <tx:annotation-driven />

 <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/bancodedados"/>
    <property name="username" value="root"/>
    <property name="password" value="852456"/>
  </bean>

< bean id="entityManagerFactory"  class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="persistenceUnitName" value="catalogoPU" />
        <property name="dataSource" ref="dataSource" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="databasePlatform" value="org.hibernate.dialect.MySQLDialect" />
                <property name="showSql" value="true" /> 
            </bean>
        </property>
</bean>

<!-- Configuracao do gerente de transacoes do Spring -->
<bean id="transactionManager"   class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

</beans> 
```

拜托，有人可以帮我解决这个问题吗？

阿特，

迭戈·萨比诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:28:28.340

这是您的异常的根本原因，它是最底层的部分。这是最相关的：

```
Caused by: java.lang.NullPointerException
    at com.catalogor3e.controller.PesquisaSistemasAdminBean.<init>(PesquisaSistemasAdminBean.java:51) 
```

因此，`null`当代码尝试访问/调用它时，bean 的构造函数中有一些东西。让我们看一下构造函数：

```
public PesquisaSistemasAdminBean() {
    this.listaSistemas = new ListDataModel<Sistema>  (this.service.getServiceSistemas().filtrarSistemaConstrutivo(null, null, null, null, null));
} 
```

嘿，您正在尝试访问`service`声明为托管属性的内容。您似乎期望托管属性注入的工作方式如下：

```
PesquisaSistemasAdminBean pesquisaSistemasAdminBean; // Declare bean.
pesquisaSistemasAdminBean.setService(facadeService); // Set service.
pesquisaSistemasAdminBean = new PesquisaSistemasAdminBean(); // Invoke constructor. 
```

但这是不可能的。在构造实例之前，从技术上讲根本不可能将服务设置为实例变量。实际上，以下是真正发生的事情：

```
PesquisaSistemasAdminBean pesquisaSistemasAdminBean; // Declare bean.
pesquisaSistemasAdminBean = new PesquisaSistemasAdminBean(); // Invoke constructor.
pesquisaSistemasAdminBean.setService(facadeService); // Set service. 
```

这就解释了为什么服务仍在`null`构造函数中。如果您打算在 bean 构建后直接基于注入的依赖项执行一些业务逻辑，那么您应该使用带`@PostConstruct`注释的方法。

所以，你需要**替换**构造函数

```
public PesquisaSistemasAdminBean() {
    this.listaSistemas = new ListDataModel<Sistema>  (this.service.getServiceSistemas().filtrarSistemaConstrutivo(null, null, null, null, null));
} 
```

用一种`@PostConstruct`方法

```
@PostConstruct
public void init() {
    this.listaSistemas = new ListDataModel<Sistema>  (this.service.getServiceSistemas().filtrarSistemaConstrutivo(null, null, null, null, null));
} 
```

顺便说一句，方法名称完全由您选择。

# unix - echo "您还没有输入文件"

> ID：16074107
> 
> 赞同：1
> 
> 时间：2013-04-18T03:44:10.703
> 
> 标签：unix, if-statement, for-loop, echo

问题是我想回显一个字符串“你还没有输入文件”。

简而言之，如果用户在调用 Unix 脚本后没有输入任何内容，他们将收到该错误消息。

这是我的代码

```
for var in "$@"
do

file=$var

if [ $# -eq 0 ]
then
   echo "You have not entered a file"
elif [ -d $file ]
then
   echo "Your file is a directory"
elif [ -e $file ]
then
   sendToBin
else
  echo "Your file $file does not exist"
fi
done 
```

我无法弄清楚到底出了什么问题，我相信这是我的第一个 if 语句

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T04:14:34.287

If the user enters no arguments, then `$@` will be empty -- in other words, your loop runs 0 times. That check needs to happen outside the loop.

Additionally, with your `-d` and `-e` checks, you should quote `"$file"`, otherwise if the user entered an empty string as an arg, you will get unexpected behavior (it would be as if no arg had been passed, and in that case `-d` and `-e` actually will end up returning *true*).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:43:39.427

正如[FatalError](https://stackoverflow.com/users/1172428/fatalerror) [所暗示](https://stackoverflow.com/a/16074374/15168)`for`的那样，问题是当没有参数时你永远不会进入循环。

因此，您需要更多类似的东西：

```
if [ $# -eq 0 ]
then echo "You have not entered a file"
else
    for file in "$@"
    do
        if [ -d "$file" ]
        then echo "$file is a directory"
        elif [ -e "$file" ]
        then sendToBin # Does this need $file as an argument?  Why not?
        else echo "File $file does not exist"
        fi
    done
fi 
```

您可以决定错误消息是否应以脚本名称为前缀（`$(basename $0 .sh)`这是我通常使用的），以及是否应将它们发送到标准错误（`>&2`）。

# c# - 可以使用 LINQ 从字符串中提取关键字吗？

> ID：16074110
> 
> 赞同：4
> 
> 时间：2013-04-18T03:44:31.390
> 
> 标签：c#, string, linq

如果我有一个很长的文本字符串并且想要提取长度大于 4 个字符的单词并且在字符串中找到超过 4 次，那么 LINQ 可以这样做吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-18T03:48:16.083

你也许可以把它收紧，但我相信它会起到以下作用

```
var results = inputstring.Split()
                .Where(word => word.Length > 4)
                .GroupBy(word => word)
                .Where(grp => grp.Count() > 4)
                .Select(grp => grp.Key); 
```

当然，您需要决定如何处理可能出现的任何标点符号。

所以给定输入

```
var inputstring = @"The quick brown fox jumped over the lazy dog 
               The quick brown fox jumped over the lazy dog 
               The quick fox jumped over the lazy dog 
               The quick fox jumped over the lazy dog 
               The quick brown fox jumped over the lazy dog"; 
```

结果包含“quick”和“jumped”，因为唯一大于 4 个字符的其他单词（“brown”）只出现了 3 次。

# java - 发生 jdbc postgresql 事务错误

> ID：16074113
> 
> 赞同：0
> 
> 时间：2013-04-18T03:45:12.007
> 
> 标签：java, postgresql, jdbc, nullpointerexception

```
public class JDBC {

static Connection con;
static Statement stmt;

public static void main(String argv[]){

connect();
 con.setAutoCommit(false);

     // Statement s=  conn.createStatement();

       con.setTransactionIsolation(Connection.TRANSACTION_SERIALIZABLE);

        //set a Savepoint

        System.out.println("savepoint1");
        String SQL = "INSERT INTO Flight VALUES (1000, '22/7/2013', 'LGW', 'MAN', 10,40)";
        stmt.executeUpdate(SQL);

        Savepoint savepoint1 = conn.setSavepoint("Savepoint1");

        String SQL2 = "UPDATE Flight SET flightid = 500 WHERE Flightid = 1000";
        stmt.executeUpdate(SQL2);

        con.rollback(savepoint1);

        con.commit();
        System.out.println("end");
}

static void connect() throws SQLException, ClassNotFoundException, DataSourceException {
    try {
        // load database driver driver

        Class.forName(DataSource.getClassName());

        // connect to database from a given URL with a given username and
        // password

        Connection con = DriverManager.getConnection(DataSource.getURL(), DataSource.getUserName(), DataSource.getPassword());

        // create an SQL statement object
        stmt = con.createStatement();
    } catch (SQLException se) {
        con = null;
        stmt = null;
        throw (se);
    }
    }       
   }
} 
```

你好，我想了解如何使用保存点。但是每次我运行程序时..它都会出现空指针异常，表示错误发生在 con.setautocommit(false);

任何建议将不胜感激......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:01:55.327

很可能，您没有正确初始化`Connection con`变量。您没有显示那部分代码，因此我们无法为您提供更多帮助。

# java - getComponentAt() 找不到组件？

> ID：16074116
> 
> 赞同：1
> 
> 时间：2013-04-18T03:45:19.550
> 
> 标签：java, swing, jframe, contentpane

我正在使用 a`JFrame`设置纸牌游戏，使用扩展的卡片，`JLabel`以便可以在屏幕上拖动它们。但是，我的一个要求是我能够双击一张牌，它可以捕捉到 4 叠 A。这不是问题。造成问题的原因是我将它设置在一个数组中，以便 A 会到达与 A 的花色相对应的位置，然后如果将一张牌拖到那里，我会重新排列这些位置。如果双击，则 A 必须先到第一个位置（从左边开始），然后是第二个，依此类推。我曾计划用`getComponentAt()`找出第一个位置是什么，如果我可以将 ace 放在那里，如果不能，那么我会转到第二个位置，依此类推。出于某种原因，即使我将参数硬编码到`getComponentAt()`到我知道有一个组件的地方，它仍然返回 null。

这是我的代码的相关部分：

```
Container contentPane = getContentPane();
contentPane.setLayout(null);
...
for(int i = 0; i < 4; i++)
{
    aces[i] = new Card();
    aces[i].setBounds((i * 75) + 475, 25, 75, 100);
    contentPane.add(aces[i]);
    aces[i].setBorder(BorderFactory.createLineBorder(Color.BLACK, 3));
    aces[i].setSuit(i + 1);

}
System.out.println(contentPane.getComponentAt(475, 25)); 
```

`null`每次都会返回，无论我将坐标放在组件的哪个位置。有什么解释吗？

*更新的 SSCCE：这是主要课程，纸牌：

```
import java.util.*;
import javax.swing.*;
import java.awt.*;

public class Solitaire extends JFrame
{
    private Container contentPane;

    private Card aces[];

    public static void main(String args[])
    {
        Solitaire frame = new Solitaire();
        frame.setVisible(true);
    }

    public Solitaire()
    {
        super();

        contentPane = getContentPane();
        contentPane.setLayout(null);
        contentPane.setBackground(Color.GREEN.darker().darker());

        setTitle("Solitaire");
        setSize(800,800);
        setResizable(false);
        setLocation(250, 50);
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        play();
    }

    public void play()
    {
        contentPane.removeAll();

        aces = new Card[4];

        for(int i = 0; i < 4; i++)
        {
            aces[i] = new Card(0,i + 1);
            aces[i].setBounds((i * 75) + 475, 25, 75, 100);
            contentPane.add(aces[i]);
            aces[i].setBorder(BorderFactory.createLineBorder(Color.BLACK, 3));

        }
        for(int i = 0; i < contentPane.getComponents().length; i++)
        System.out.println(contentPane.getComponents()[i]);

        System.out.println(contentPane.getComponentAt(475, 25));
       repaint();
    }
} 
```

这是班级卡：

```
import javax.swing.*;
public class Card extends JLabel
{
    private int numb;

    private int value;

    private int suit;

    public Card(int n, int s)
    {
        super();
        numb = n;
        suit = s;
    }
} 
```

这是为我运行的，如果您需要更多来解决问题，请发表评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T04:10:47.007

使用有很多问题`getComponentAt`

第一个是，父容器必须实际实现和调整大小。如果没有，它将返回`null`。如果该位置不存在子项，则该方法能够返回容器本身。

然后我对子`Component#contains`组件进行测试以查看给定点是否直接在子组件内，但这希望将点转换到子组件的坐标空间中......

所以相反，我只是直接去了`getBounds`......

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.EventQueue;
import java.awt.Point;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestComponentLocation {

    public static void main(String[] args) {
        new TestComponentLocation();
    }

    public TestComponentLocation() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.pack();
                frame.setLocationRelativeTo(null);

                Container contentPane = frame.getContentPane();
                contentPane.setLayout(null);
                for (int i = 0; i < 4; i++) {
                    JPanel panel = new JPanel();
                    panel.setBounds((i * 75) + 475, 25, 75, 100);
                    System.out.println(panel.getBounds());
                    contentPane.add(panel);
                    panel.setBorder(BorderFactory.createLineBorder(Color.BLACK, 3));
                }
                System.out.println(getComponentAt(contentPane, new Point(475, 25)));
                System.out.println(getComponentAt(contentPane, new Point(100, 25)));

                frame.setVisible(true);

            }
        });
    }

    public Component getComponentAt(Container parent, Point p) {
        Component comp = null;
        for (Component child : parent.getComponents()) {
            if (child.getBounds().contains(p)) {
                comp = child;
            }
        }
        return comp;
    }
} 
```

# python - 用 open (name,"rb") as f 不需要关闭我对吗？

> ID：16074119
> 
> 赞同：1
> 
> 时间：2013-04-18T03:45:26.927
> 
> 标签：python

我注意到我可以打开这样的文件：

```
f=open("a.dat","rb") 
```

还有另一种方法：

```
with open("a.dat","rb") as f: 
```

在我看来，如果我使用第一个，我必须调用 f.close() 函数，而第二个方法则不需要。我对吗？或者会有更好的方法？在python中打开文件哪个最好？谢谢;-）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T03:52:33.830

是的，您不需要关闭文件，因为它是由`with`块处理的。如果在块结束之前发生异常，它将在异常被外部异常处理程序捕获之前关闭文件。

由于 python 2.5（`with`引入语句时）使用`with`带有文件操作的语句是一种更可取的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:05:43.913

我同意@ankit，因为与您一起使用无需记住释放有价值的资源，即使在例外情况下也是如此。有关详细信息，您可以查看此[文档](http://effbot.org/zone/python-with-statement.htm)。

干杯!

# php - php 获取 ajax 请求中发布的 id 的访问权限

> ID：16074122
> 
> 赞同：0
> 
> 时间：2013-04-18T03:45:41.530
> 
> 标签：php, javascript, jquery

如何访问通过 ajax 请求在我的 php.ini 中发布的数据。我的 ajax 请求正在返回一串数据，但我似乎无法访问作为 json 对象传递的变量。我该如何访问仅包含一个参数的 json 对象。

jQuery：

```
$.ajax({
    type:'POST', 
    url:"../../webservices/get_rating.php",
    data:JSON.stringify({product_id:id}),
    dataType:"html",
    success: function(data) {
        $('.ratings-content').append(data);
    }, error:function(data, status, xhr) {
        alert(data + "\r\n" + status + "\r\n" + xhr);   
    }
}); 
```

在我的 php 代码中，它是为了让我的 product_id 不起作用

PHP：

```
$product_id = (int)$_POST["product_id"];
echo $product_id; always returns 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:48:29.467

默认情况下，`$.ajax`在 中发送数据`GET`，您需要将 Type 参数设置为`POST`。此外，您没有设置将发布数据的 URL。

请检查此[链接](http://api.jquery.com/jQuery.ajax/)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:51:21.310

ajax 的默认值是 $_GET，因此最好在 ajax 端指定 POST 或在服务器端使用 GET

# objective-c - 成功登录 XCode 后如何重定向到新视图？

> ID：16074125
> 
> 赞同：1
> 
> 时间：2013-04-18T03:46:05.830
> 
> 标签：objective-c, xcode, redirect, uiviewcontroller

我正在尝试构建一个成功登录后重定向到主页的应用程序。我有两个视图控制器：`LoginViewController`和`DashboardViewController`. 我已经对登录部分进行了编码，并为仪表板创建了一个视图，但我不确定如何重定向到`DashboardViewController`成功登录后。我真的很感激一些帮助。

这是我的`LoginViewController.m`文件代码：

```
#import "LoginViewController.h"

@implementation LoginViewController

@synthesize userName,password,loginbutton,indicator;

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [super dealloc];
}

- (IBAction) loginButton: (id) sender
{
    // TODO: spawn a login thread

    indicator.hidden = FALSE;
    [indicator startAnimating];
    NSString *post =[NSString stringWithFormat:@"username=%@&password=%@",userName.text, password.text];

    NSString *hostStr = @"******";
    hostStr = [hostStr stringByAppendingString:post];
    NSData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: hostStr ]];
    NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];
    //NSLog(@"Result = '%@'", serverOutput); // look for space between quotes
    serverOutput = [serverOutput stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    if([serverOutput isEqualToString:@"Yes"]){

        UIAlertView *alertsuccess = [[UIAlertView alloc] initWithTitle:@"Congrats" message:@"You are authorized"
            delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];

        [alertsuccess show];
        [alertsuccess release];

        }
    else {
        UIAlertView *alertsuccess = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Username or Password Incorrect"
            delegate:self cancelButtonTitle:@"OK"otherButtonTitles:nil, nil];
        [alertsuccess show];
        [alertsuccess release];
        loginbutton.enabled = TRUE;

    }

    loginbutton.enabled = FALSE;
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [self.userName resignFirstResponder];
    [self.password resignFirstResponder];

} 
```

@结尾

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T03:52:08.517

首先`#import "DashboardViewController.h"`在你的文件中添加`loginViewContrller.m`文件

并创建`DashboardViewController`in 的对象

```
if([serverOutput isEqualToString:@"Yes"])
{
       DashboardViewController *newView = [[DashboardViewController alloc] init];
       [self presentModalViewController:newView animated:YES];

        UIAlertView *alertsuccess = [[UIAlertView alloc] initWithTitle:@"Congrats" message:@"You are authorized"
            delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];

        [alertsuccess show];
        [alertsuccess release];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:15:29.547

1) 设置`tag`为`alert`alertsuccess.tag = 1;

2）使用以下代码显示下一个`ViewController`

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (alertView.tag == 1 && buttonIndex == 0)
    {
         DashboardViewController *vcDashboard = [[DashboardViewController alloc] init];
         if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 6.0)
         {
             [self presentViewController:vcDashboard animated:YES completion:nil];
         }
         else
         {
             [self presentModalViewController:vcDashboard animated:YES];
         }
         [vcDashboard release];
    }
} 
```

# python - Python 检查 URL 流的状态

> ID：16074132
> 
> 赞同：0
> 
> 时间：2013-04-18T03:47:21.307
> 
> 标签：python

我正在尝试使用 python 来检查 MJPEG 流 url 是否存在。

我尝试了以下方法：

```
 connection = urlopen('http://localhost/videostream.cgi'), timeout=10)
 response = connection.getcode()
 connection.close() 
```

没有运气，它只是超时给出一个错误。

如果我在 firebug 或 chrome dev 工具栏中查看状态，则状态始终为“Pending”而不是“200”。

有没有办法检查以确保它不是 404 或其他错误？

干杯，本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:50:14.667

原来这是我的相机网络服务器。

# android - 如何在我的 Android 应用中使用 Google Calendar API？

> ID：16074139
> 
> 赞同：0
> 
> 时间：2013-04-18T03:48:30.937
> 
> 标签：android, google-api, google-calendar-api

我想从我的 Android 应用程序中使用 Google 日历。

我通读了文档，但它要求我为我的应用程序使用“签名证书指纹 SHA1”。

如何从 Eclipse ADT 为我的应用程序发布和调试版本生成 SHA1。

Eclipse ADT 会自动为我生成它吗？每次我尝试在模拟器中测试应用程序时它会生成一个新的吗？

注意：我在 SO 找到了一个相关问题，但答案并没有回答我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:59:05.677

[生成 SHA1 指纹的过程对于所有 Google 服务都是相同的，因此您可以按照在 Google API 控制台中启用 API 访问的](https://developers.google.com/+/quickstart/android#step_1_enable_the_google_api)分步说明进行操作，但请确保启用 Google Calendar API。您需要注册您的`debug.keystore`文件以进行调试构建和您的签名`keystore`文件以进行发布。

请注意，如果您的目标是 Ice Cream Sandwich (v14)+ 设备，您还可以使用[内置的 Calendar Provider](http://developer.android.com/guide/topics/providers/calendar-provider.html)，它为当前用户提供对设备日历的访问，包括 Google 日历。

# java - 是否有创建 JUnit 测试用例的程序？

> ID：16074142
> 
> 赞同：2
> 
> 时间：2013-04-18T03:48:49.890
> 
> 标签：java, unit-testing

我对 Java 开发相当陌生，今天是我第一次配对程序来创建测试用例。他们很友善地大声说出他们的想法，以解释为什么要完成某些事情（例如，创建带有参数的构造函数，而不仅仅是使用默认构造函数等）。

虽然我可能会保留我今天看到/听到的内容的 40%，但我想知道是否有一组步骤/指南可以遵循，最终结果是一个测试用例，这将是一个很好的起点。我知道通常的反应

1.  每个店铺都有自己的标准，
2.  有个人喜好和工具，
3.  取决于测试是针对您拥有的课程还是针对传统课程等。

无论哪种方式，我都想通了，并询问了 SO 成员。

以下是我记下的一些笔记的片段，以显示我的想法，就回应而言。

1.  使用 Mockito，您无法模拟使用方法创建的对象，因此请尝试获取构造函数来获取这些对象。这将允许您模拟它们，然后将它们传递给方法以便于测试。
2.  Mockito 不处理静态方法，但您可以创建一个调用静态方法的包装类。现在，这个新的包装类不使用任何静态方法，您的测试类将使用它而不是静态方法。这现在允许您使用 when/thenReturn 而无需直接处理静态方法。
3.  模拟时，在类级别声明将由所有测试用例使用的变量。然后在 setUp(); 中模拟这些类；这种方法可确保常用的模拟始终是已知状态，并且不会被先前的测试修改。
4.  说的还不够，使用好的变量名（例如 listWithOneCar、listWithNoCars 等）
5.  由于测试用例有时基于真值表，因此请尝试将其包含在测试方法名称中（例如，ensureCanDrive_Car_0_withValidKey_0()、ensureCanDrive_Car_1_withValidKey_1() 等）。如果您通过快速视觉扫描捕获了大量测试用例，这应该有助于您进行视觉扫描。完成后，只需添加边缘案例。
6.  'verify' 使用不足，请尝试在您的测试用例中使用更多。
7.  单个测试用例应该只包含测试用例之间不同的代码，并且没有重复的代码。这使得更容易理解和维护/扩展。

你明白了。这些只是来自我的笔记，但我想知道是否有人有一个进化的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:12:39.200

You have very different things in your list. And even for one of the topics a 'complete' list is probably not really possible. Most would make up a book, possible multiples. So here is my list of books (and other documentation) that make together a somewhat complete list.

*   Some seem to be about general good coding practices. For example the recommendation to use dependency injection via constructor (#1); The importance of good names (#4). It is hard to make a complete list about those, but there are some important books. I recommend

    *   Clean Code by Robert C. Martin

    *   The Pragmatic Programmer by Andrew Hunt and David Thomas

    *   Effective Java by Joshua Bloch

*   Some are about the limitations of Mockito, just go through the documentation and some blog posts about it. You might also want to look at PowerMock, which tries to fixes some (most?) technical limitations of Mockito and other mocking frameworks. Just reading what they did will improve your understanding of Mockitos limitations.

*   Some are about designing tests, making code testable and so on. You might consider the following books:

    *   xUnit Test Patterns: Refactoring Test Code by Gerard Meszaros

    *   Test Driven: TDD and Acceptance TDD for Java Developers by Lasse Koskela

    *   Test Driven Development: By Example by Kent Beck

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:24:24.683

您专注于单元测试的一个方面，即模拟。当您不能（或不想）想要测试该代码的一小部分时，您可以模拟 - 例如数据库查询或日志记录实用程序。

根据我的经验，单元测试有两种形式：集成和单元测试。

最重要的是，无论哪种类型的单元测试，您都必须了解：

*   *快乐路径*上的方法的行为是什么，以及
*   边缘情况下的行为是什么。

在编写单元测试时，我将使用 Mockito 之类的模拟库，但我不仅仅将自己排除在此之外。有时使用 Mockito 不适合您想要执行的测试（100 次中有 99 次在集成测试中。不要那样做。），但当我只想模仿来自用于快乐路径或边缘案例测试的重型 bean/object/DAO。

我对测试的偏好是将它们分成三个不同的部分：

*   我的给定，包括设置要测试的方法，包括模拟时的行为，
*   我的“当我这样做时”子句，它本质上只是执行该方法，并且
*   我的验证步骤，这涉及我测试结果的一个方面。

例如，假设我想测试此方法的行为。

```
public List<String> shortenNamesFromDatabase(final int maxLength) {
    List<String> names = dao.executeQuery("SELECT name from dbNames");
    List<String> result = new ArrayList<String>();
    for(String name : names) {
        result.add(name.substring(0, maxLength);
    }
    return result;
} 
```

我调用了数据库和一些转换逻辑。我不想费心验证*这一层*的数据库信息，所以我将它模拟出来。在集成测试中，我确定对数据库进行了调用，这会从数据库中获取每个名称。

```
//happy path test!
@Test
public void shortenNamesFromDatabase_namesAreOnly3CharactersLong() {
    //given
    final int length = 3;
    List<String> dbResult = Arrays.asList("Alpha","Beta", "Gamma", "Del", "Zeta12345");
    Dao daoMock = mock(Dao.class);
    when(daoMock.executeQuery("SELECT name from dbNames")).thenReturn(dbResult);
    SomeClass testObj = new SomeClass();

    //when
    List<String> result = testObj.shortenNamesFromDatabase(length);

    //then
    for(String name : result) {
        assertTrue("Name was too long!", length <= name.length());
    }
} 
```

假设现在我想测试一些极端情况的行为。如果我将最大长度设置为零，我会期待一大堆空字符串。不理想，但我最好确保边缘情况下的行为是我所期望的。

```
//edge-case-why-would-you-ever-do-this-for-real test
@Test
public void shortenNamesFromDatabase_zeroLengthStringsTransformed() {
    //given
    final int length = 0;
    List<String> dbResult = Arrays.asList("Alpha","Beta", "Gamma", "Del", "Zeta12345");
    Dao daoMock = mock(Dao.class);
    when(daoMock.executeQuery("SELECT name from dbNames")).thenReturn(dbResult);
    SomeClass testObj = new SomeClass();

    //when
    List<String> result = testObj.shortenNamesFromDatabase(length);

    //then
    for(String name : result) {
        assertTrue("Name was WAY too long!", length <= name.length());
    }
} 
```

注意测试没有真正改变吗？这是一件*好事*。使用单元测试，您一次只应该真正断言或验证一件事。对测试一个或两个边缘案例进行重大更改可能是代码异味。

编写测试时，请注意以下几点：

*   **代码异味：如果您的代码难以进行单元测试，您应该考虑重构。** 这将使测试工作更容易，并且您的代码更易于维护。

*   **不要假装高兴。只模拟你不需要验证的东西。** 我不需要验证数据库中的任何内容；不是查询的长度，不是我得到了我想要的确切名称，任何东西 - 所以我嘲笑它。我*确实*需要验证的是转换是否适当地进行了。

*   **遵循有关测试驱动开发、缺陷驱动测试和普通单元测试的常见做法。** [维基百科](http://en.wikipedia.org/wiki/Test-driven_development)是一个很好的起点，但也有关于该主题的书籍和闪存卡。

# python - 测试非整数（小数和字符串）

> ID：16074148
> 
> 赞同：1
> 
> 时间：2013-04-18T03:49:43.763
> 
> 标签：python, integer, syntax-error

嗨，我无法在我的 sript 中测试非整数。我正在尝试编写一个函数，如果数独有效则返回 True，否则返回 False。数独的 2 条规则： 1) 正方形的每一列都包含从 1 到 n 的整数中的每一个恰好一次。2) 正方形的每一行包含从 1 到 n 的每个整数恰好一次。我遇到的问题是函数“incorrect4”和“incorrect5”。Incorrect4 显示 True，即使它不是整数/整数，并且不正确 5 显示错误消息：+: 'int' 和 'str' 不支持的操作数类型。我尝试了多种测试整数的方法，但不正确的“1.5”的值仍然显示为 True。此外，我寻找了一个解决方案不受支持的操作数类型错误，但无法修复它。

```
correct = [[1,2,3],
       [2,3,1],
       [3,1,2]]
incorrect4 = [['a','b','c'],
          ['b','c','a'],
          ['c','a','b']]

incorrect5 = [ [1, 1.5],
           [1.5, 1]]

def check_sudoku(square):
    a = 0
    result = [sum(l) for l in square]
    sum_list = []

    all(type(item)==int for item in square)
    return True

    for col in range(len(square[0])):
        sum_list.append(sum(row[col] for row in square))
        if sum_list == result: return True
    return False 

    for row in range(len(square)):
        if sum(square[a]) == sum(square[a+1]):
            a += 1
            return True
    return False

print check_sudoku(correct)
print check_sudoku(incorrect4)
print check_sudoku(incorrect5) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:59:51.487

由于数独谜题必须有 1-9 之间的整数，因此您不希望通过一些其他疯狂的整数，例如 -4294967296。因此，我认为这样的检查是合适的：

```
d = 3  # edge-size of your sudoku
all(n in range(1, d**2) for row in sudoku_puzzle for n in row) 
```

Where`sudoku_puzzle`可以是列表列表，但您可以考虑使用 numpy 数组。

您仍然需要再次检查以确保您的尺寸`sudoku_puzzle`正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:27:30.593

您正在尝试将 sum() 应用于 int 以外的类型。

`all(type(item)==int for item in square) return True`

应该先到

`result = [sum(l) for l in square] sum_list = []`

并且对于两个嵌套的for循环，您可以维护一个标志，在每个循环中相应地将其设置为真/假，然后返回该标志，而不是在第一个循环之后立即返回一个布尔值

我也不确定你在 all 子句之后的缩进是否正确。如果没有错，程序将不会超出该行执行

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-18T04:03:20.453

如果您正在寻找的只是一个浮点函数，如果浮点数是整数，它将返回 true，那么它是内置在 python 中的。就在您迭代时，请确保将所有数字转换为浮点数，甚至整数。不是很理想，但效果很好！我将它用于机器学习中的交叉验证算法

```
number = float(some_number)
if number.is_integer():
     #this will execute if the variable is an integer
else:
    #this will execute if the variable is a float 
```

# javascript - 有没有办法从按钮打开 TinyMCE 弹出对话框？

> ID：16074149
> 
> 赞同：0
> 
> 时间：2013-04-18T03:50:02.887
> 
> 标签：javascript, jquery, tinymce, wysiwyg

我想让 TinyMCE 作为弹出对话框打开并加载指定的内容进行编辑。

我在 div 中有一些文本，单击按钮后，我希望打开 TinyMCE 以编辑文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:15:29.627

我相信您的模态弹出窗口需要像 Fancybox 这样的东西。其余的相当简单：

脚本（在 page1.htm 中）

```
<script>
$(document).ready(function() {
    $(".element").fancybox({
        fitToView   : false,
        width       : '500px',
        height      : '500px',
        autoSize    : false,
        closeClick  : false,
        openEffect  : 'none',
        closeEffect : 'none',

    });
});
</script> 
```

然后，您需要将整个 Load TinyMCE 代码和 textarea 代码（如在他们网站上的 TinyMCE 演示和他们的下载中）加载到外部页面（page2.htm）中，然后您需要调用 page2.htm作为 Fancybox 中的 iframe，不确定这是否是正确的方法，但它适用于 Chrome 和 FireFox：

```
<a class="element" data-fancybox-type="iframe" href="page2.htm"><input type="button" value="Your Value Text"></a> 
```

这些方面的东西应该做你想做的事。

# global-variables - 全局变量sencha touch 2.1

> ID：16074155
> 
> 赞同：5
> 
> 时间：2013-04-18T03:50:29.513
> 
> 标签：global-variables, sencha-touch-2.1

嗨，我需要定义一个全局变量以在我的应用程序的任何地方使用。我在**app.js**中声明了一个全局变量**baseUrl**。请参阅下面的 app.js

 **```
 //<debug>
Ext.Loader.setPath({
    'Ext': 'touch/src',//Location of the sencha touch source files
    'bluebutton': 'app',

});
//</debug>

Ext.application({
    name: 'bluebutton',//Application Path, all classes in you app. For eg blueButton.view.Main.case sensitive

    views: ['Main',

    'BlueButton.CouponMain',
    'BlueButton.CouponList',
    'BlueButton.CouponList2',
    'BlueButton.CouponList3',

    'BlueButton.TransactionMain',

    ],

   stores : [
   'BlueButton.GlobalVariable',

   ], 

    models : ['BlueButton.GlobalVariable',
    'BlueButton.MemberDetail',

     ],

    controllers: ['Main', 
    'BlueButton.MemberList', 

    ],

    requires: [
        'Ext.MessageBox',

    ],

    icon: {
        '57': 'resources/icons/Icon.png',
        '72': 'resources/icons/Icon~ipad.png',
        '114': 'resources/icons/Icon@2x.png',
        '144': 'resources/icons/Icon~ipad@2x.png'
    },

    isIconPrecomposed: true,

    startupImage: {
        '320x460': 'resources/startup/320x460.jpg',
        '640x920': 'resources/startup/640x920.png',
        '768x1004': 'resources/startup/768x1004.png',
        '748x1024': 'resources/startup/748x1024.png',
        '1536x2008': 'resources/startup/1536x2008.png',
        '1496x2048': 'resources/startup/1496x2048.png'
    },

    //--Global value--
    baseUrl: 'http://192.168.251.108:8080',
    //--Global value--

    launch: function() {

        // Destroy the #appLoadingIndicator element
        Ext.fly('appLoadingIndicator').destroy();

        // Initialize the main view

             var LoginLS = Ext.getStore('LoginLS');
             LoginLS.load();

             var record =  LoginLS.getAt(0);

            if(record != undefined){
                var sessionId = record.get('sessionId');
               if (sessionId !=undefined){
                        var mainView = Ext.getCmp("mainview");
                        if(!mainView){
                        mainView = Ext.create('bluebutton.view.Main');
                        }

                        Ext.Viewport.setActiveItem(mainView);  
               }
               else
               {
                        var loginView = Ext.getCmp("loginview");
                        if(!loginView){
                        loginView = Ext.create('bluebutton.view.Login');
                        }

                        Ext.Viewport.setActiveItem(loginView); 
                }
            }
            else{
                      var loginView = Ext.getCmp("loginview");
                        if(!loginView){
                        loginView = Ext.create('bluebutton.view.Login');
                        }

                        Ext.Viewport.setActiveItem(loginView); 

//                        //--Disable this line --
//                          var mainView = Ext.getCmp("mainview");
//                        if(!mainView){
//                        mainView = Ext.create('bluebutton.view.Main');
//                        }

//                        Ext.Viewport.setActiveItem(mainView);  
//                         //--Disable this line --

               }

//        Ext.create('bluebutton.view.TopMenuList');

    },

     init: function () {
        this.callParent(arguments);

    },

    onUpdated: function() {
        Ext.Msg.confirm(
            "Application Update",
            "This application has just successfully been updated to the latest version. Reload now?",
            function(buttonId) {
                if (buttonId === 'yes') {
                    window.location.reload();
                }
            }
        );
    }
}); 
```

模型.js

```
Ext.define('bluebutton.model.BlueButton.CouponList', {
    extend: 'Ext.data.Model',
    config: {
        idProperty: 'couponId',
        fields: [
            {  name: 'couponId'  },
            {  name: 'couponName'  },
            {  name: 'description'  },
            {  name: 'amount'  },
            {  name: 'couponType'  },

            {  name: 'merchant_bbID'  },
            {  name: 'sessionId'  },
            {  name: 'deviceId'  },

        ],

        proxy: {
            type: 'rest',
            url: bluebutton.app.baseUrl +'/WebCommon/rest/BBWebService/getCouponList',

            actionMethods: {
                create: 'POST',
                read: 'GET',
                update: 'PUT',
                destroy: 'DELETE'
            },

                      noCache: false, // get rid of the '_dc' url parameter

                    extraParams: {
                    sessionId: "1",
                      merchant_bbID: "merchant1",

                },

//            timeout:1000,
//            listeners: {
//                exception: function(proxy, response, operation) {
//                     alert("Connection Problem");
//                       Ext.Viewport.setMasked(false); // hide the load screen
//                       
//                  }
//               },

            reader: {
                type: 'json',
                 rootProperty: 'couponList'

            },

            writer: {
                type: 'json',

            },
        }

    }

}); 
```

然后我在我的 model.js 中使用了 basedUrl。当我使用浏览器查看时，它可以工作。但是当我使用**sencha app build testing**来编译我的应用程序时，

我使用浏览器打开，它显示了一条错误消息**Uncaught TypeError: Cannot read property 'baseUrl' of undefined**。任何的想法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-18T18:08:04.150

当您进行生产构建时，您的 sencha 应用程序中的所有文件都将被缩小，因此全局变量可能会丢失上下文。

有几种方法可以在您的 sencha 应用程序中声明全局变量

-> 第一种方法

在 util/Config.js 中声明一个全局变量

**实用程序/Config.js**

```
Ext.define('APP.util.Config', { 
    singleton : true,
    alias : 'widget.appConfigUtil',
        config : {
        baseUrl : 'xx.xx.xx.xxx',
    },
    constructor: function(config) {
        this.initConfig(config);
        this.callParent([config]);
    }
}) 
```

**app.js**的变化

 **```
requires : [ 'App.util.Config'] 
```

现在，您可以在您的应用程序中使用它，如下所示。

```
var baseUrl = App.util.Config.getBaseUrl(); 
```

* * *

第二种方法->

在类定义之前在 .js 文件中声明全局变量

```
var baseUrl;

Ext.define('classname,{Other things }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T16:22:46.933

一个简单的例子

在您的 app.js 中添加变量。要测试您的变量，请在您的 google chrome 控制台中键入 app.app.VariableName。Chrome 会为您自动完成。

```
Ext.application({
    name: 'app',

    /** 
     * Custom Variables
     * Use app.app.baseUrl to access the value
     */
    baseUrl : 'http://example.com',
    variable01 : 'foo',
    variable02 : 'bar',

    ...

}); 
```****

# web-applications - 如何将单用户 WebApp 扩展到多个用户

> ID：16074162
> 
> 赞同：0
> 
> 时间：2013-04-18T03:51:49.313
> 
> 标签：web-applications, resin, multiple-users

有一个类似的线程没有具体的解决方案，我认为最好开始一个新的。

我面临的情况是，我在 RESIN 中托管了一个 WebApp（就像我猜的 Tomcat）。到目前为止，我一直在使用 db4o 开发应用程序，因为我一个人，我需要尽快完成应用程序，我有一个用于用户的数据库和另一个用于单个用户（我）的应用程序数据的数据库，现在应用程序几乎完成我将要迁移到 postgresql 并且我正在认真考虑每个用户的数据库，即使数据库保存多个应用程序的数据，因为它将处理有点机密的数据，我认为拥有单独的数据库将是最好的（安全方面）。已经有一个基本的会话管理，可以在浏览器中存储用户数据，如 ID。但我想知道如何将它扩展到多个用户/数据库。

我正在考虑扩展保存上下文数据的侦听器类，以将正确的 db 对象传递给应用程序实例，或者为此目的设置一个过滤器。

。更新。

我想更深入地了解我目前拥有的东西。

我有：

包含对某些对象的引用的上下文，其中一个对象连接到数据库并检查用户和密码。

Presentation servlet (HttpServlet) 映射到具有 POST 到 /login 的登录表单的“/”。

登录 servlet (HttpServlet) 映射到“/login”，它检查 httpSession 用户密码属性与位于上下文中的相应对象是否匹配，如果匹配，则设置一个包含 USERID 的 httpSession 属性并将用户重定向到应用程序本身所在的位置在 /index-debug.html 如果没有，它会再次创建一个带有登录表单的新 html 页面。

映射到 /index-debug.html 的授权和身份验证过滤器验证 USERID 属性的 httpServletRequest 并检查用户是否有权访问应用程序。

最后是一个负责读取和写入 webApp 用户数据 DB 的 DB bean。当我在 webApp CP2JAVAWS 中执行某个方法时，将该方法与 bean 中的相应方法相匹配，问题是这个 bean 有一个静态数据库，到目前为止它只允许一个用户。

我想做的是以某种方式允许这个 DB bean 为每个用户实例化一次，并根据当前登录的用户读取和存储相应的数据。

每个用户一个数据库的想法目前已被放弃，但我不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:23:11.193

树脂！我已经有一段时间没有听说过 Resin 了，也没有使用过 Resin。=)

我已经看到 Stack Overflow 上经常出现每个系统用户拥有一个数据库的想法。反应通常是相同的——这不是一个好主意。

原因有很多，但我会坚持规模、可维护性和易变性。

**规模**

一些数据库对它们可以拥有的数据库数量有限制。我不知道单个 Postgres 实例可以拥有多少个数据库。

此链接（[https://dba.stackexchange.com/questions/23971/maximum-number-of-databases-for-single-instance-of-postgresql-9](https://dba.stackexchange.com/questions/23971/maximum-number-of-databases-for-single-instance-of-postgresql-9)）表示有人在一个实例上获得了 10,000 个数据库。

我想说随着时间的推移，一个网站获得一百万用户（当然不是全部活跃）并不少见。换句话说，我敢打赌你的用户数量会在某个时候打破 Postgres，每个用户只有一个数据库。

**可维护性**

假设您只需要 10,000 个用户，因此您可以创建 10,000 个数据库。当您想更新每个数据库中的表时会发生什么？推出这些更改很痛苦。

通常发生的情况是您将编写一个脚本来接触每个数据库，即使您对其进行了测试，脚本在中途死掉了，现在您被困在绝望的几分钟里，一半的表处于一种状态，另一半处于另一种状态状态。

或者更糟糕的是，数据库不同步并且具有与其他数据库不同的架构。现在，您可能拥有多个实时版本的“用户”数据库。

**挥发性**

用户是善变的。他们今天会注册，然后就再也不会回来了。他们将注册并在两年后再次登录。他们会因为忘记密码而创建多个帐户。

这将很快导致孤立的数据库。您需要（或想要）编写一个脚本来定期清理它们。

此外，一些更现代的数据库（如 MongoDB 和 Couchbase）实际上在创建数据库时会预先分配大部分磁盘/内存。我不相信 Postgres 会这样做，但这是需要考虑的事情。

**安全**

如果有人入侵了您的 Postgres 框，那么按数据库分隔用户对您没有帮助。它们可以在数据库之间移动，就像在表中的记录之间移动一样容易。最好只是很好地锁定数据库机器，然后让用户一起生活在一个表中。它更容易扩展，更容易维护，并且您可以管理波动性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T14:14:08.183

您提到 Postgres 作为数据库后端，并且具有称为模式的功能。这是您在数据库中拥有一个物理数据库和多个模式的情况。我的经验来自 Rails，但概念是相同的。这种方法避免了将人们的数据混合在同一组表中，这听起来像是您最关心的问题。我知道您使用的是 Java，但[请观看有关 Rails 中的多租户应用程序的演讲，以从 Guy Naor 那里](http://www.bestechvideos.com/2009/03/26/acts_as_conference-2009-writing-multi-tenant-applications-in-rails)了解其工作原理、权衡等方面的背景知识。

以下是一些具体步骤，可帮助您开始使用 Postgres 模式：

1.  Postgres 中有一个默认的公共模式。这将是您放置用户身份验证表和任何其他关于用户登录等的通用元数据表的地方。 [有关模式如何工作的更多信息，请参阅 Postgres 文档](http://www.postgresql.org/docs/9.2/static/ddl-schemas.html)
2.  为您将创建的每个模式（例如 user_001、user_002 等）提出一个命名约定。预先分配一堆空模式并设置所有表，当用户第一次注册或登录时，您为他们分配一个模式并将模式名称存储在公共模式和用户对象中的用户记录中你在 HttpSession 中。无需为第一次使用的用户运行表创建脚本——这会拖累 Web 应用程序的性能。您只需要保持领先于新用户的速度。例如，您可能有一堆空的 user_standby_1 ... user_standby_100 模式，然后当有人登录或注册时，您将运行以下 sql：

    `myquery = "ALTER SCHEMA user_standby_? RENAME TO user_?"; myquery.setString(1,standby_id); myquery.setString(2,user_id);`

3.  当您创建 DB bean 时（为此使用超类，见下文），从 HttpSession 的 User 对象中传递模式名称，然后在每个操作之前执行此 SQL 以仅将它们隔离到它们的模式：

    `myquery2 = "SET search_path TO ?";
    myquery2.setString(1,user.search_path);`

4.  如果您在公共中有一个空的完整架构，那么您希望从搜索路径中省略公共，否则您将在搜索路径中有 2 个同名的表。如果您希望`SET search_path TO user_001,public`在创建表后包含用户搜索路径，请从公共中删除所有数据表，而不是用户和您需要的任何元信息。

5.  为了维护，编写一个脚本，您可以通过命令行运行以删除空的 user_standby 模式，创建新的 user_standby 模式，并执行与 Rails [Migrations for Java](https://stackoverflow.com/questions/131020/migrations-for-java)相同的操作，以进行较小的表更改。
6.  对于大型维护活动，最好为每个用户创建新模式，例如 user_v2_001，然后编写脚本来迁移他们的数据。这取决于对表的更改有多复杂。

如果您采用替代路线并将所有用户数据放在一组表中，那么最好的方法是在*每个*表中都有 user_id 并编写您的 SQL 以*每次都*使用它。如果您使用传统的规范化并执行连接来获取您的 user_id，那么您最好确保您不会意外错过连接，否则用户将开始看到彼此的数据。

Postgres 模式功能允许您锁定用户仅访问他们自己的数据。搞清楚基础知识后，使用 Java 中的超类编写上面的步骤 3，这样每个 MyTableDBBean 都从 MasterDBBean 扩展，并使用超类构造函数将搜索路径隔离到用户的模式。然后，您的代码中只有 1 个地方可以完成此操作，并且您不必记住每个表或查询来执行业务逻辑以外的任何操作。

# jquery - 用两个表或元素附加数字时如何解决重叠？

> ID：16074165
> 
> 赞同：0
> 
> 时间：2013-04-18T03:51:59.897
> 
> 标签：jquery, html

当您从两个表中随机单击按钮时，数字不会在其自己的表上遵循顺序。这是我问题的主要问题。谢谢。这是 HTML 代码：

```
<table width="600px" id="project">
            <tr>
                <td>1</td>
                <td><textarea name="pro_1" cols="100" rows="2"></textarea></td>
            </tr>
            <tr>
                <td>2</td>
                <td><textarea name="pro_2" cols="100" rows="2"></textarea></td>
            </tr>
            <tr>
                <td>3</td>
                <td><textarea name="pro_3" cols="100" rows="2"></textarea></td>
            </tr>
            <tr>
                <td>4</td>
                <td><textarea name="pro_4" cols="100" rows="2"></textarea></td>
            </tr>
            <tr>
                <td>5</td>
                <td><textarea name="pro_5" cols="100" rows="2"></textarea></td>
            </tr>

        </table>

        <input id="addbtn" type="button" name="addbtn" value="ADD"> 
```

这是jQuery代码：

```
 $(document).ready(function() {
$("#addbtn").click(function(){
    var num=parseInt($("#project tr:last").text());
        num+=1;
            $("#project,textarea").append("<tr><td>"+num+"</td><td><textarea cols='100' rows='2'></textarea></td></tr>");
                });

$("#pub_addbtn").click(function(){
    var val=parseInt($("#pub tr:last").text());
        val+=1; 
            $("#pub,textarea").append("<tr><td>"+val+"</td><td><textarea cols='100' rows='2'></textarea></td></tr>");
                }); 
```

});

抱歉，这里有另一张桌子：

```
<table width="600px" id="pub">
            <tr>
                <td>1</td>
                <td><textarea name="pub_1" cols="100" rows="2"></textarea></td>
            </tr>
            <tr>
                <td>2</td>
                <td><textarea name="pub_2" cols="100" rows="2"></textarea></td>
            </tr>
            <tr>
                <td>3</td>
                <td><textarea name="pub_3" cols="100" rows="2"></textarea></td>
            </tr>
            <tr>
                <td>4</td>
                <td><textarea name="pub_4" cols="100" rows="2"></textarea></td>
            </tr>
            <tr>
                <td>5</td>
                <td><textarea name="pub_5" cols="100" rows="2"></textarea></td>
            </tr>

        </table>
        <input type="button" name="pub_addbtn" value="ADD" id="pub_addbtn"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:58:25.737

试试这个

```
$("#project").children("tbody").append("<tr><td>"+num+"</td><td><textarea cols='100' rows='2'></textarea></td></tr>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:58:43.347

从选择器中删除 ',textarea'。它应该是：

```
$("#project").append("<tr><td>"+num+"</td><td><textarea cols='100' rows='2'></textarea></td></tr>"); 
```

您将 附加`<tr>`到页面上的每个`<textarea>`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T03:59:31.160

## 试试这个：- [http://jsfiddle.net/aiioo7/JWG68/](http://jsfiddle.net/adiioo7/JWG68/)

# JS：

```
$(document).ready(function () {
    $("#addbtn").click(function () {
        var num = parseInt($("#project tr:last").text());
        num += 1;
        $("#project").append("<tr><td>" + num + "</td><td><textarea cols='100' rows='2'></textarea></td></tr>");
    });
    $("#pub_addbtn").click(function () {
        var val = parseInt($("#pub tr:last").text());
        val += 1;
        $("#pub").append("<tr><td>"+val+"</td><td><textarea cols='100' rows='2'></textarea></td></tr>");
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T03:59:42.303

你可以使用这个：

```
$("#addbtn").click(function(){
    var num = parseInt($("#project tr:last td:first").text(), 10) + 1;
    $("#project").append("<tr><td>"+num+"</td><td><textarea cols='100' rows='2'></textarea></td></tr>");
}); 
```

工作演示：http: [//jsfiddle.net/jfriend00/e3ddy/](http://jsfiddle.net/jfriend00/e3ddy/)

变化：

1.  它专门针对最后一行的第一列并从中获取文本。
2.  它只附加到表格，而不是文本区域。
3.  它指定`parseInt()`可靠性所需的基数。

您可以对其他按钮的代码进行类似的更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T04:01:27.527

只需使用[Index()](http://api.jquery.com/index/) ... 并修复一些选择器。**[http://jsfiddle.net/yHKrt/](http://jsfiddle.net/yHKrt/)**

假设您有 2 个表格和 2 个按钮，则导致此问题的代码存在问题。此代码修复它。

```
$("#addbtn").click(function () {

    var num = parseInt($("#project tr:last").index()) + 1;
    num += 1;
    $("#project").append("<tr><td>" + num + "</td><td><textarea cols='100' rows='2'></textarea></td></tr>");
});

$("#pub_addbtn").click(function () {

    var val = parseInt($("#pub tr:last").index()) + 1;
    val += 1;
    $("#pub").append("<tr><td>" + val + "</td><td><textarea cols='100' rows='2'></textarea></td></tr>");
}); 
```

# ios - 带有 OpenSSL 的 Objective-C - 无法设置 RSA 密钥

> ID：16074168
> 
> 赞同：4
> 
> 时间：2013-04-18T03:52:31.647
> 
> 标签：ios, objective-c, openssl

我正在尝试使用 OpenSSL 向应用程序添加 RSA 加密，但我无法加载证书。在我的应用程序中，公钥证书将从服务器分发，我需要获取该密钥并使用它来解密我的应用程序将扫描的加密条形码中的内容。

我之所以选择 OpenSSL 而不是安全库，是因为我还需要 ECDSA 验证，目前本机不支持该验证。

我尝试了多种方法来获取加载密钥。OpenSSL PEM_read_RSA_PUBKEY 方法需要一个文件指针。`EXC_BAD_ACCESS`但是，当我运行下面的代码时，一旦我尝试访问密钥，它就会崩溃。

```
NSString * path = [[NSBundle mainBundle] pathForResource:  @"public" ofType: @"pem"];
FILE *f = fopen([path cStringUsingEncoding:1],"r");
if (f == NULL)
    NSLog(@"%@", [path stringByAppendingString:@" not found"]);

RSA *rsa = PEM_read_RSA_PUBKEY(f,NULL,NULL,NULL);

fclose(f);

NSLog (@"%d KeyCheck", RSA_check_key(rsa)); 
```

我从 OpenSSL 库中包含以下标头

```
#include <openssl/opensslv.h>
#include <openssl/crypto.h>
#include <openssl/rsa.h>
#include <openssl/pem.h> 
```

我还有其他 OpenSSL 方法，例如 MD5、Base64 编码/解码、SHA1 和 ECDSA 代码工作正常，它只是传入让我难过的 RSA 证书！

public.pem 密钥文件包含此密钥：

```
-----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC+ynZ7EvJ0F+IoGmlme/j/MpH4
7BxrIuDTJCOS99j82IL3Ww9Ubm28yOMHYPdi23WPDhR80ugaBWAnmqUZWvYKjqd4
Z4D0sJ0NVW3DDgZ4gS57zFqlvGgdVhzaVimfs7qDxIJ1o8GMuXWseZV2ZpmIjdnF
ZBol5zZTqNfk89RNnQIDAQAB
-----END PUBLIC KEY----- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:37:11.210

您读取 RSA 公钥的程序很好。

问题在于

```
RSA_check_key 
```

[请在此处](http://www.openssl.org/docs/crypto/RSA_check_key.html)阅读有关 RSA_check_key的信息。

它不适用于公钥。您需要此功能的私钥。这就是它崩溃的原因，因为它确实有它的私钥。由于之前的回答给您带来不便，敬请见谅。

[http://www.openssl.org/docs/crypto/RSA_check_key.html](http://www.openssl.org/docs/crypto/RSA_check_key.html)

# ruby-on-rails - Heroku 上的 Rails 样式表

> ID：16074170
> 
> 赞同：11
> 
> 时间：2013-04-18T03:52:38.583
> 
> 标签：ruby-on-rails, heroku, stylesheet

在我的本地机器上，当我查看我的 Rails 应用程序时，我的样式表已成功链接，`/assets/stylesheets/`但在 Heroku 上，它可能更改为`/stylesheets/`目录`public`中并且不起作用！`public/stylesheets`如何让我的样式表在编译时移到？

**编辑：**

之后的文件目录`rake assets:precompile`

```
app
  assets
    stylesheets
      application.css
      application.min.css
      home.css
      home.css.scss
      home.min.css
      scaffolds.css
      scaffolds.css.scss
      scaffolds.min.css
      startups.css
      startups.css.scss
public
  assets
    application-3701cb84bbc3c20d5a7ec1aac608fbdb.js
    application-3701cb84bbc3c20d5a7ec1aac608fbdb.js.gz
    application-f7ff7ad51f3528ccca1b5c7f2d5b5915.css
    application-f7ff7ad51f3528ccca1b5c7f2d5b5915.css.gz
    manifest-ad3babc6c84cc0b38f1a98eb594b8235.json
    rails-afd7b40a0142ed24738b640e78388de4.png 
```

这是我的样式表链接`application.html.haml`：

```
stylesheet_link_tag "flat-ui", "home.min", media: "all" 
```

`gem flatui-rails`在我的 Gemfile`*= require flat-ui`中，在我的`application.css`文件中。

**编辑2：**

清除我的`public/assets`文件夹，添加`public/assets/*`到我的`.gitignore`并推送到我的 Heroku 存储库。在 slug 编译期间，Heroku 运行了资产管道并制作了`/assets/application-b2c82b0573602f3a368a26f36b99542b.css`它也链接到我网站的源代码中，但是样式没有加载，`The page you were looking for doesn't exist.`当我尝试导航到样式表时我得到了......现在怎么办？

这是我的`application.html.haml`：

```
!!! 5
%html
  %head
    %title StartupCrawler
    = stylesheet_link_tag "application", media: "all"
    = csrf_meta_tags
  = yield 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-18T04:13:40.583

Michael, I before you push to heroku try:

`rake assets:precompile`

This will precompile them in the public folder so that they can be served to Heroku. Let me know if that didn't work.

Also, make sure the following line exists in config/environments/production.rb

```
config.serve_static_assets = true 
```

Then of course

`git push heroku master`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T04:45:57.460

与其将已编译的资产签入 Git，不如先阅读以下内容：[https ://devcenter.heroku.com/articles/ruby-support#plugin-injection-in-rails-4](https://devcenter.heroku.com/articles/ruby-support#plugin-injection-in-rails-4)

您可以添加此宝石

> 宝石'rails_12factor'

或专门添加此宝石

> rails_serve_static_assets

或手动更改配置`config/environments/production.rb`

> config.serve_static_assets = true

# javascript - Express.js 中视频的持续时间：NaN

> ID：16074176
> 
> 赞同：0
> 
> 时间：2013-04-18T03:53:24.023
> 
> 标签：javascript, html, video, express, pug

我正在尝试在 Express.js 中获取视频的总持续时间。下面我在 Jade 中展示了我的代码。最初，我将视频包含在网页中。

```
video(width='320', height='240', controls='controls')
       source(src='/images/video.mp4', type='video/ogg', id='theVideo') 
```

然后我在单击按钮时调用以下函数。

```
function getCurrentTime() {
    var video = document.createElement('video');
    var time = video.duration;
    document.getElementById('myTime').value=time;
   } 
```

'myTime' 只是一个文本框。

```
input(id='myTime', size='5') 
```

但是当我运行视频时，我得到的持续时间是 NaN。我试图阅读一些关于为什么会发生这种情况的帖子，显然它与“字节”问题或发送标头或类似问题有关。有人可以向我解释发生这种情况的原因以及如何解决吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:05:38.957

尝试这个：

玉：

```
video(width='320', height='240', controls='controls', id='theVideo')
   source(src='/images/video.mp4', type='video/ogg') 
```

JS：

```
window.addEventListener('load', function(){
     var video = document.getElementById('theVideo');
     video.addEventListener('loadedmetadata', function() {
         console.log(Math.round(video.duration));
     });
}); 
```

# c - 使用 realloc 缩小结构内的字符串

> ID：16074177
> 
> 赞同：0
> 
> 时间：2013-04-18T03:53:29.117
> 
> 标签：c, string, memory-management, struct, realloc

我有一个关于使用 realloc 函数的小问题。假设我有：

```
typedef struct
{
  char* location;
  int temp;
  int numberOfRec;
 }TEMP; 
```

然后我在 main 中声明一个指向这个结构的指针并分配内存：

```
int main()
{ 
  TEMP* data = xCalloc (1, sizeof(TEMP));  //wrapper function
  data->location = xCalloc (20, sizeof(char)); //wrapper function

} 
```

现在，如果我在另一个函数中为 data->location 重新分配内存。我需要返回 TEMP* 数据的地址吗？

```
int main()
{

 someFunction(data); // Use this function or...
 //data = someFunction(data);
 ...
}
void someFunction(TEMP* data)
{
  ...
  data->location = xRealloc (data->location, 10 * sizeof(char));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:24:44.257

不，你没有。这是因为`data`是指向结构的指针。每当您通过`data`使用 '->' 运算符访问结构的元素时，您首先要取消引用指针。

例如，

`data->location`==>`(*data).location`

此外，当你这样做时，

`data->location = xRealloc (data->location, 10 * sizeof(char));`

如果 realloc 失败，您将泄漏内存并可能调用未定义的行为（如果您不包括 NULL 指针检查），因为`data->location`尚未`free`d 并且它将被分配给 NULL，因为`realloc`在失败时返回 NULL。

我建议您改为执行以下操作。

```
void *temp = NULL;
temp = xRealloc (data->location, 10 * sizeof(char));
if(temp == NULL)
{
    // realloc failed.
    free(data->location);
    data->location = NULL;
}
else
{
    // Continue
    data->location = temp;
} 
```

我为你编译了一个[最小的例子](http://ideone.com/30i4Z4)。

# ruby-on-rails - 在 Rails 中，未知模型的 URL 助手是什么？

> ID：16074178
> 
> 赞同：2
> 
> 时间：2013-04-18T03:53:31.693
> 
> 标签：ruby-on-rails, urlhelper

我试图在 Rails 中找到一个模型，我不一定知道 rake 任务中的类（所以它不在 .erb 中）。

我知道我可以这样做：

```
Rails.application.routes.url_helpers.<model>_path(model) 
```

但是如果我不一定知道模型怎么办？打开 model.class 或任何其他此类检查似乎不是 Rails-y。我只是在寻找模型的默认路径或 url。

编辑：为了澄清我所说的默认路径，它是你在做 link_to 时得到的 href；即，您可以这样做：

```
<%= link_to "my model", @model %> 
```

没有指定像 model_path 这样的 url 助手。这就是我要找的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T05:30:17.657

在内部，`link_to`调用`url_for`以获取给定参数的路径。

如果您`url_for`使用模型调用，它将进一步转发到`polymorphic_path`或`polymorphic_url`。

所以像这样的东西应该可以工作，如果你只想要路径

```
task :some_task => :environment do
  include Rails.application.routes.url_helpers

  # ...

  path  = polymorphic_path(some_model_instance) # => e.g. "/widgets/42"
end 
```

您也可以只使用`url_for`，但您必须定义`:host`选项。[看这里](https://stackoverflow.com/a/7020478/167996)了解更多

# excel - 遍历文件夹代码的下标超出范围

> ID：16074179
> 
> 赞同：1
> 
> 时间：2013-04-18T03:53:34.330
> 
> 标签：excel, vba

我正在尝试使用以下代码遍历文件夹。但是，我不断收到下标超出范围错误。谁能解释我能做些什么来解决这个问题？

```
Sub LoopThroughFolder()

    Const FileSpec As String = "*.xls"
    Dim y As Integer
    Dim MyFolder As String
    Dim MyFile As String
    Dim iDot As Integer
    Dim FileRoot As String
    Dim FileExt As String

    Dim ArrayData() As Variant

    For y = 2009 To 2030

        ReDim Preserve ArrayData(y, 12)
        MyFolder = ActiveWorkbook.Path & "\" & y & "\"

        i = 1
        MyFile = Dir(MyFolder & FileSpec)
        Do While Len(MyFile) > 0
            iDot = InStrRev(MyFile, ".")

            If iDot = 0 Then
                FileRoot = MyFile
                FileExt = ""
            Else
                FileRoot = Left(MyFile, iDot - 1)
                FileExt = Mid(MyFile, iDot - 1)
            End If

            MyFile = Dir
            ArrayData(y, i) = FileRoot
            MsgBox ArrayData(y, i)
            i = i + 1
        Loop

    Next y

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T04:12:07.267

根据这个 msdn[链接](http://msdn.microsoft.com/en-us/library/w8k3cys2%28v=vs.80%29.aspx)，您只能`ReDim Preserve`在数组的最后一个维度上，在您的情况下，您只能更改`12`in `ReDim Preserve ArrayData(y, 12)`。更改数组参数的顺序将解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:12:09.813

首先，正如@TheGreatCo 所提到的，您只能重新调整数组的最后一个维度。

`ReDim Preserve ArrayData(y, 12)`正在抛出错误，因为您正在尝试重新调整第一个维度。

尝试更改为：

`ReDim Preserve ArrayData(12,y)`

为了限制`i`，改变你说`Loop`的那句话：

`Loop While i <=12`

然而，这似乎仍然是矫枉过正。虽然它可能不会给你带来任何错误，但它肯定是低效的。您不需要`y`列（2030 列！！！），因为您从未分配任何内容，例如，ArrayData(12,1955)。

您需要修改迭代项目的方式并更有效地分配给数组。

我会建议：

`ReDim Preserve ArrayData(12,y-2009)`

然后，您将需要更改：

```
ArrayData(i,y) = FileRoot
MsgBox ArrayData(i,y-2009) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:22:31.063

既然你知道最大的值`y`是多少，为什么还要使用`ReDim`呢？这是非常低效的，因为如果没有额外的（连续的）可用空间，它涉及重新定位所有数据，以及复制内容。相反，做

```
ArrayData(2009 To 2030, 1 To 12) As Variant 
```

并且不要进行任何重新尺寸调整。

*但这并不能真正解决问题*，因为您的值`i`实际上是无限增长的值，并且您`ReDim`从不考虑更改`i`维度（始终为 12）。

根据您想要做什么，您可以考虑使用“集合”。使用集合，您可以指定任何字符串作为索引；`CStr(y)&"-"&CStr(i)`因此您可以使用...进行索引

或者，声明具有初始维度 (2,12) 的 Variant 类型的数组。当您找到文件根时，将相应的年份分配给 (1,i) 并将文件根分配给 (2,i)。现在您有一个不包含大量空元素的数组（高效），可以重新调整维度（沿第二维），并捕获原始数据的所有数据。实际上，您已经创建了自己的“稀疏数组”。

还有一个：

与我在上面的评论中提到的相反，当我尝试在`To`Excel VBA 中使用构造然后检查变量时，它似乎完全符合您的预期 - 但是一旦数组被重新调整是不可能的用上限和下限声明。

# algorithm - 显示列表中所有数字组合的算法

> ID：16074180
> 
> 赞同：2
> 
> 时间：2013-04-18T03:53:39.850
> 
> 标签：algorithm

我将如何构建一个递归函数来显示数字列表中符号的所有可能性，例如（5、3、12、9、15）。列表不会改变，只是每个数字的符号。

例如，结果将是：
(-5, 3, 12, 9, 15)
(-5, -3, 12, 9, 15)
(-5, -3, -12, 9, 15)
(-5 , -3, -12, -9, 15)

以此类推，直到显示此列表的所有组合。

我尝试了几种不同的方法，包括尝试从此处的其他类似问题中调整代码，但其中大多数都包括更改列表本身。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T04:08:55.087

生成所有可能的 5 元素二进制列表，例如`[0,0,0,0,0], [0,0,0,0,1], [0,0,0,1,0] .. [1,1,0,0,1] ... [1,1,1,1,1]`. 现在，对于这些列表中的每一个，请执行以下操作。

如果列表中第 x 位置有 1，则用原始列表中的负数替换该位置的数字。

现在的问题是：如何递归地生成所有 5 个布尔数字的列表（二叉树？）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T04:38:43.887

实现递归函数时，需要考虑两种情况：基本情况和递归情况。

在基本情况下，函数不会递归调用自身。在这种情况下它可能会做一些工作，或者它可能什么都不做，因为所有的工作都已经完成了。

在递归的情况下，该函数会做一些工作以使自己更接近目标，然后递归地调用自己以完成其余的工作。

这是一种解决递归函数问题的方法。

在递归情况下，“一点工作”是将列表中一个数字的符号设置为正数，并将**该**数的符号设置为负数。我们需要在两个赋值之后递归，因为我们需要为每个符号生成组合。

在基本情况下，所有数字都设置了符号，所以我们只打印数字列表。

例如，在 Python 中，我们可以首先设置函数以获取数字列表，以及需要其符号集的下一个数字的索引。首先，下一个数字是列表中的第一个数字，在索引 0 处：

```
def allSignCombinations(numbers, nextNumberIndex=0): 
```

基本情况发生在`nextNumberIndex`等于 时`len(numbers)`，这意味着没有数字需要设置它们的符号：

```
 if nextNumberIndex == len(numbers):
        print numbers 
```

否则，我们会做“一点点工作”。我们将下一个数字的符号设置为正数和负数，并对每个符号进行递归。当我们递归时，我们告诉下一个调用从列表中的下一个数字开始工作，如果有的话：

```
 else:
        numbers[nextNumberIndex] = abs(numbers[nextNumberIndex])
        allSignCombinations(numbers, nextNumberIndex + 1)
        numbers[nextNumberIndex] = -numbers[nextNumberIndex]
        allSignCombinations(numbers, nextNumberIndex + 1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T04:24:33.893

基于 Dilawar 的回答，我提供了一个（大量）pythonic 实现（Python 语言）：

```
numbers = (5, 3, 12, 9, 15)

for n in range(2**len(numbers)):   # for all possible combinations (power of two)
    binrep = bin(n)[2:]            # get the binary representation as string
    binstring = str(binrep).ljust(5,'0')   # pad with left zeros
    binlist = map(int, reversed([c for c in binstring]))  # convert to a list of integers
    # apply element-wise multiplication with transformed (0,1) => (-1,1)
    print [numbers[n] * (binlist[n]*2 -1) for n in range(len(numbers))] 
```

# c# - 调用通用方法的类 - 委托？

> ID：16074181
> 
> 赞同：0
> 
> 时间：2013-04-18T03:53:43.573
> 
> 标签：c#, multithreading, class

我有一个创建 BackgroundWorker 的表单。然后，worker 做一些工作，并在忙碌时执行 ReportProgress 将消息发送回 UI。然后我将这些消息记录到 UI。ReportProgress 由线程中的一个方法完成，我称之为“通知”。

但是，在线程中，我调用了一个静态类来完成文件访问类型的工作。该静态类还需要报告进度......所以我需要调用调用静态类的线程类的 Notify 方法 - 但是，我无法访问调用类中的方法。

所以，UI 创建线程......并且线程使用一个类，但我需要从静态类调用类中的 Notify 方法。我怎样才能做到这一点？

这是我的尝试。这个想法是尝试使用委托......但是，我被困在实际使用委托中。:)

在我的线程类中，我有一个方法：

```
public void Notify(string message, Constants.ErrorLevel errorLevel)
{
    var su = new StatusUpdate {StatusMessage = message, ErrorLevel = 0};
    _bw.ReportProgress(0, su);
} 
```

这是有效的。它很好地向调用 UI 报告。

我现在在这个类中创建了一个委托：

```
public delegate bool NotificationsDelegate(object MessageHolder); 
```

我已将用于处理文件管理的静态类更改为非静态类，并希望在创建时将该委托传递给文件管理器类：

```
public class FileManager
{
private readonly NotificationsDelegate _notifications;

public FileManager(NotificationsDelegate notifications)
{
    _notifications = notifications;
}

private void SendMessageBack(string p, ConsoleColor consoleColor)
{
    var su = new StatusUpdate {ErrorLevel = 0, StatusMessage = p};
    _notifications(su);
} 
```

所以，我创建它，并传递通知委托......然后在我的“SendMessageBack”方法中，希望调用委托（称为_notifications）。

但这就是我卡住的地方。委托尚未分配给通知方法。我是新来的事件，所以猜测我的方式。但是，有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:51:06.767

如果您计划在线程之间共享 FileManager 类的一个实例，那么是的，您绝对必须在每次调用它时传入一个委托实例。如果您在每个“线程类”中创建 FileManager 类的新实例，那么您可以在您编写的 ctor 中为 FileManager 提供委托。

```
public delegate void NotifyDelegate(string message, Constants.ErrorLevel errorLevel);

public class BackgroundWorker {
    public BackgroundWorker() {
        _fileMgr = new FileManager(Notify);
    }

    public void Notify(string message, Constants.ErrorLevel errorLevel) {
        // do stuff
    }
}

public class FileManager {
    public FileManager(NotifyDelegate notification) {
        _notification = notification;
    }

    public void SendMessageBack() {
        _notification("foo", 0);
    }
} 
```

如果您愿意，您可以只使用 lambda 并避免直接创建委托：

```
public class FileManager {
    public FileManager(Action<string, Constants.ErrorLevel> notifyAction) {
        _notification = notifyAction;
    }

    public void SendMessageBack() {
        _notification("foo", 0);
    }
}

public class BackgroundWorker {
    public BackgroundWorker() {
        _fileMgr = new FileManager((a, b) => Notify(a, b));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:38:25.547

我不确定我是否在关注你在做什么，但我会看看一个基于事件的通知系统，用于`Notify`从你的文件访问工作类中调用你的方法。我假设您的文件访问工作类被调用`FileManager`并且它是一个实例类。

首先，创建一个自定义`EventArg`类来存储您想要在`FileManager`类发出的通知中中继的数据。`DoNotify`在您的类中创建一个`FileManager`使用此自定义`EventArg`类的事件，并在您希望更新该`Notify`方法时调用该事件（在使用您的状态数据填充它之后）。

当您实例化`FileManager`对象时订阅`DoNotify`事件并在其处理程序中调用您的`Notify`方法：

```
public class FileManager
{
    public event EventHandler<NotifyEventArgs> DoNotify;

    private void DoSomethingInterestingMethod() {
        //...

        // Let listeners know something interesting happened.
        var doNotify = DoNotify;
        if (doNotify != null) {
            doNotify(this, new NotifyEventArgs(errorLevel, message));
        }

       //...
    }
}

public class NotifyEventArgs : EventArgs
{
    public NotifyEventArgs(int errorLevel, string statusMessage) {
        ErrorLevel = errorLevel;
        StatusMessage = statusMessage;
    }

    public int ErrorLevel { get; private set;}
    public string StatusMessage { get; private set; }
} 
```

然后在您的 BackgroundWorker 线程（在`DoWork`(?) 中）创建一个或多个`FileManager`对象并订阅该`DoNotify`事件：

```
var fm = new FileManager();
fm.DoNotify += FileManager_Notify; 
```

并在 DoNotify 处理程序中调用您的`Notify`方法：

```
void FileManager_Notify(object sender, NotifyEventArgs e) {
    Notify(e.ErrorLevel, e.StatusMessage);
} 
```

我不完全确定你的一些实现细节，所以我希望我已经足够清楚地让你评估这种方法并决定它是否适合你。

# ios - 是否有私有 API 可用于访问 SIM 工具包？

> ID：16074190
> 
> 赞同：2
> 
> 时间：2013-04-18T03:54:18.500
> 
> 标签：ios, jailbreak, iphone-privateapi

我正在调查哪些 API 可用于访问 SIM 工具包，有什么存在吗？

（是的，我知道任何使用此类 API 都不允许将应用提交到应用商店）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:02:52.430

1）你可以看看CoreTelephony框架（反汇编它）。它在 SimToolkit 周围有很多功能，例如：

*   CTServerConnectionCopySimToolkitMenu
*   CTServerConnectionSelectSimToolkitMenuItem 等等。

2）您可以在/System/Library/SpringBoardPlugins/SimToolkitUI.servicebundle/SimToolkitUI查看（反汇编）

您将能够看到那里使用了哪些功能（您将看到 #1 中的很多功能）

# c# - c# wpf 使用 Dispatcher 从 BlockingCollection 更新 UI 源

> ID：16074191
> 
> 赞同：0
> 
> 时间：2013-04-18T03:54:20.023
> 
> 标签：c#, wpf, user-interface, dispatcher, blockingcollection

这是我的问题。
我在 BlockingCollection 中加载了一些 BitmapImages

```
 public void blockingProducer(BitmapImage imgBSource)
    {
        if (!collection.IsAddingCompleted)
            collection.Add(imgBSource);
    } 
```

加载发生在背景工作线程中。

```
 private void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        String filepath; int imgCount = 0;

        for (int i = 1; i < 10; i++)
        {
            imgCount++;

            filepath = "Snap";
            filepath += imgCount;
            filepath += ".bmp";

            this.Dispatcher.BeginInvoke(new Action(() =>
            {
                label1.Content = "Snap" + imgCount + " loaded.";
            }), DispatcherPriority.Normal);

            BitmapImage imgSource = new BitmapImage();
            imgSource.BeginInit();
            imgSource.UriSource = new Uri(filepath, UriKind.Relative);
            imgSource.CacheOption = BitmapCacheOption.OnLoad;
            imgSource.EndInit();

            blockingProducer(imgSource);
        }
    } 
```

调试这部分代码一切正常，现在问题来了...

完成加载图像后，我想在 UI 中一张一张地显示它们。我正在使用调度程序来执行此操作，但我总是收到消息，告诉我被调用的线程无法访问该对象，因为它属于不同的线程。

```
 public void display(BlockingCollection<BitmapImage> results)
    {
        foreach (BitmapImage item in collection.GetConsumingEnumerable())
        {
            this.Dispatcher.BeginInvoke(new Action(() =>
            {
                this.dstSource.Source = item;
                Thread.Sleep(250);
            }), DispatcherPriority.Background);
        }
    } 
```

debug 指责错误在这里

```
 this.dstSource.Source = item; 
```

我正在尝试一切，但无法找出问题所在。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:34:17.297

您必须[`Freeze`](http://msdn.microsoft.com/en-us/library/ms557735.aspx)在加载图像后调用以使其他线程可以访问它们：

```
BitmapImage imgSource = new BitmapImage();
imgSource.BeginInit();
imgSource.UriSource = new Uri(filepath, UriKind.Relative);
imgSource.CacheOption = BitmapCacheOption.OnLoad;
imgSource.EndInit();
imgSource.Freeze(); // here 
```

* * *

据我了解该`BitmapCacheOption.OnLoad`标志，它仅在从流中加载 BitmapImage 时有效。[BitmapCacheOption](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.cacheoption.aspx)中的备注部分说：

> 如果您希望关闭用于创建 BitmapImage 的流，请将 CacheOption 设置为 BitmapCacheOption.OnLoad。默认的 OnDemand 缓存选项保留对流的访问，直到需要图像为止，并且清理由垃圾收集器处理。

从 Uri 创建的 BitmapImage 可以异步加载（请参阅[`IsDownloading`](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.isdownloading.aspx)属性）。因此，`Freeze`可能无法在此类 BitmapImage 上调用，因为在 EndInit 之后下载可能仍在进行中。我想它仍然适用于您的情况，因为您正在从文件 Uris 加载 BitmapImages，这似乎是立即完成的。

为了避免这个潜在的问题，您可以只从 FileStream 创建 BitmapImage：

```
var imgSource = new BitmapImage();

using (var stream = new FileStream(filepath, FileMode.Open))
{
    imgSource.BeginInit();
    imgSource.StreamSource = stream;
    imgSource.CacheOption = BitmapCacheOption.OnLoad;
    imgSource.EndInit();
    imgSource.Freeze();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:13:13.293

对于未来的读者，这是我用来解决问题的代码。

```
 public void display(BlockingCollection<BitmapImage> collection)
    {
        if (collection.IsCompleted || collection.Count != 0)
        {
            BitmapImage item = collection.Take();
            this.Dispatcher.BeginInvoke(new Action(() =>
            {
                this.dstSource.Source = item;

            }), DispatcherPriority.Normal);
        }
        else
        {
            dispatcherTimer.Stop();
        }
    }

    public void dispatcherTimer_Tick(object sender, EventArgs e)
    {
        display(collection);
    }

    public void configureDispatcherTimer()
    {
        dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
        TimeSpan interval = TimeSpan.FromMilliseconds(150);
        dispatcherTimer.Interval = interval;
    } 
```

# objective-c - 如何在播放列表中拖放 mp3 歌曲

> ID：16074199
> 
> 赞同：0
> 
> 时间：2013-04-18T03:55:39.593
> 
> 标签：objective-c, macos, drag-and-drop, playlist, nsoutlineview

我正在开发一个基于 Mac 桌面的应用程序，使用`NSOutlineView`. 我知道如何拖放`NSTableView`，但我不知道如何根据附件图像（*如 iTunes 应用程序*）拖放播放列表，我正在拖动播放列表 2 中的一些歌曲。

![将歌曲拖入播放列表2](https://i.stack.imgur.com/6jOls.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T05:45:07.040

在从 NSTableView 中选择歌曲时，将选择的歌曲 id 存储在一个数组中。之后，当鼠标到达 NSOutlineView 时，以下委托方法将调用该时间用户可以添加到播放列表表中......

```
-(NSDragOperation)outlineView:(NSOutlineView *)outlineView validateDrop:(id<NSDraggingInfo>)info proposedItem:(id)item proposedChildIndex:(NSInteger)index{
    return YES;
} 
```

和

```
- (BOOL)outlineView:(NSOutlineView *)ov acceptDrop:(id <NSDraggingInfo>)info item:(id)item childIndex:(NSInteger)childIndex{
    return YES;
} 
```

# cakephp - 无法使用 cakephp 登录

> ID：16074202
> 
> 赞同：0
> 
> 时间：2013-04-18T03:56:08.883
> 
> 标签：cakephp, authentication

我无法在 cakephp 中使用 Auth 登录。stackoverflow 上有一些与此类似的帖子，但是这些答案似乎对我不起作用。

我创建了一个类似的注册表单，它可以与 Auth 一起使用，但需要登录，$this->Auth->login(); 在 UsersController 中返回 false。

Auth 使用正确的 userModel，并且用户名字段更改为电子邮件。（注意：当我到处使用用户名而不是电子邮件时，它也不起作用）。该数据库有一个表用户，其中包含一个电子邮件和一个密码字段。密码字段使用以下方法进行散列/加密：AuthComponent::password()

// 应用控制器

```
class AppController extends Controller {

    public $helpers = array('Html', 'Form');
    public $components = array(
        'Session',
        'Auth');

    public function beforeFilter() {
        $this->Auth->userModel = 'User';
        $this->Auth->fields = array('username' => 'email', 'password' => 'password');
        $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
        $this->Auth->loginRedirect = array('controller' => 'users', 'action' => 'index');
    }
} 
```

// 用户控制器

```
class UsersController extends AppController{
  var $name = 'Users';
  var $helpers = array('Html', 'Form');

  function beforeFilter()
  {       
    parent::beforeFilter();
    // tell Auth not to check authentication when doing the 'register' action
    $this->Auth->allow('register');
  }

  function login(){
      if (isset($this->data['User'])) {
        $this->Auth->login();
        debug('tried');
      }
  } 
```

// 登录.ctp

```
<?php
    echo $this->Form->create('User',array('action'=>'login'));
    echo $this->Form->input('email');
    echo $this->Form->input('password');
    echo $this->Form->end('Login');  

?> 
```

// 用户.php

```
<?php
class User extends AppModel{

    var $name = 'User';
}
?> 
```

我只使用 cakephp 几天，所以这可能是一个简单的错误，但是我现在正在搜索它几个小时，但我仍然没有找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:13:16.067

设置属性喜欢`$this->Auth->userModel`并且`$this->Auth->fields`不会在 2.x 中对您有任何好处。您需要使用`$this->Auth->authenticate`属性来指定 userModel 和 fields 选项。阅读有关 Auth 配置的[2.x 手册以获取更多信息。](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)

# codeigniter - 如何从控制器获取数据以查看

> ID：16074206
> 
> 赞同：0
> 
> 时间：2013-04-18T03:56:38.150
> 
> 标签：codeigniter

我在控制器中有功能

```
function test() {
        $data['lang'] = read_file(APPPATH . "language/bahasa/english.php");
        $this->load->view('test', $data);
    } 
```

英文.php

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

$lang['content.home'] = 'Home';
$lang['content.about_us'] = 'About Us';
$lang['content.team'] = 'Team';
$lang['content.contact'] = 'Contact us'; 
```

如何在视图中获取数据 $lang['content.home'] = 'home'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:00:50.990

为什么要编写自己的检索语言文件的方法？有一个[语言课程](http://ellislab.com/codeigniter/user-guide/libraries/language.html "语言班")可以为您处理这个问题。

使用`$this->load->view('test', $data)`是将属性`$data`放入您的视图的正确方法。也就是说，如果您的`read_file()`使用正常，则视图中的数据将位于`$lang['content.home']`等。

# android - 如何在android中处理网络请求

> ID：16074208
> 
> 赞同：1
> 
> 时间：2013-04-18T03:56:52.567
> 
> 标签：android, networking

我想在网上画一些要求的东西，那么这是核心实现（绘制逻辑省略）：

```
public abstract class AbstractBasicDataHandler extends AbstractHandler{
    private DataProvider tp = new DataProvider();

    @Override
    protected void onReadyToDraw(Canvas c,int params) {
        byte[] data = tp.getDrawableData(params);
        doRender(c, data);
    }

    protected abstract void doRender(Canvas c, byte[] data);
} 
```

将`AbstractBasicDataHandler`完成数据请求的工作，然后任何子类`AbstractBasicDataHandler`将只专注于渲染工作，如下所示：

```
public class AnyClass extends AbstractBasicDataHandler{
    @Override
    doRender(Canvas c, byte[] data){
        //render according to the data
    }
} 
```

然而问题是数据请求是一项耗时的工作，这意味着数据可能不会立即返回。

那么有什么经验可以满足这种要求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:46:15.700

是的，您可以使用`Asynctask`它在其中执行其网络操作`doInBackground()`并在其中执行您的 UI 操作`postExecute()`。

# jquery - 这段代码是什么意思？（jQuery）

> ID：16074213
> 
> 赞同：2
> 
> 时间：2013-04-18T03:57:29.640
> 
> 标签：jquery

我正在阅读一个插件并且可以理解这部分

```
$('<ul />', {
    'class': settings.ulClass,
    html: albumItem.join('')
}).appendTo($this); 
```

1.  这是什么 html: `albumItem.join('')`。是否`html`定义了关键字或用户？我无法搜索，因为任何`html`返回的词都太笼统了

2.  这是与此类似的选择`$('p').appendto($this)`吗？如果是这样，我在哪里可以搜索这个的语法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T03:58:37.453

[.join()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)是 Array 对象的本机方法，它将数组的所有元素连接成一个字符串。

假设`albumItem`是一个数组，`albumItem.join('')`将连接数组中的所有元素以创建一个字符串，其中连接字符为空字符串。

前任：

```
var albumItem = ['one', 'two', 'three'];
albumItem.join('') // will give 'onetwothree' 
```

你的代码

```
$('<ul />', {
            'class': settings.ulClass,
            html: albumItem.join('')
        }).appendTo($this); 
```

将创建一个`ul`返回类的元素`settings.ulClass`并将数组的内容`albumItem`作为子元素，并且该元素将附加到引用的元素`$this`

演示：[小提琴](http://jsfiddle.net/arunpjohny/am7hk/1/)

# html - div 向右对齐：滚动条不正确

> ID：16074215
> 
> 赞同：0
> 
> 时间：2013-04-18T03:57:40.310
> 
> 标签：html, css, web

我有这样的标记：

```
<div id="MainDiv" style="position: fixed; width: 100%; height: 100%;">
    <div id="Log" style="float: right; max-height:100%; overflow: scroll;">
        (some filling text)
    </div>
</div> 
```

它工作正常，除了 Log 的垂直滚动条仅显示一半（FF，Chrome）。
任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:00:48.037

这几乎可以肯定是因为身体有一个边缘。删除它，它应该可以工作。

```
body
{
    margin:0;
} 
```

这是 JS Bin：http: [//jsbin.com/ajicox/1/](http://jsbin.com/ajicox/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:38:37.213

您还必须将填充设置为 0。不同的浏览器有不同的设置。

> 身体{边距：0；填充：0；}

```
Working example: http://jsfiddle.net/Ngkam/ 
```

# php - 如何测试/使用 Zend Framework + Zend Server

> ID：16074216
> 
> 赞同：0
> 
> 时间：2013-04-18T03:57:49.760
> 
> 标签：php, zend-framework

我已经在我的计算机上安装了 Zend Framework + Zend Server。我正在使用 win 7。但我该如何使用/测试它？例如。我怎么能在脚本下面运行来做测试？

```
<?php
$date=new Zend_Date();
echo $date; 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T04:49:50.810

尝试这个

如何使用 php 应用程序部署

[http://www.zend.com/en/products/server/getting-started/hello-world-sample#behind-the-code](http://www.zend.com/en/products/server/getting-started/hello-world-sample#behind-the-code)

[http://www.zend.com/products/server/faq#faqD2](http://www.zend.com/products/server/faq#faqD2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:19:50.137

你安装在zend服务器和你的php文件复制并粘贴C：//zend服务器/www（或）root然后打开浏览器输入它localhost然后在url中输入文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T06:35:57.093

将您的测试文件粘贴到此位置 - User_Home_Dir/zend/Apache2/htdocs/

# javascript - 访问使用 Cordova 编写的文件

> ID：16074217
> 
> 赞同：0
> 
> 时间：2013-04-18T03:57:53.327
> 
> 标签：javascript, cordova, ibm-mobilefirst

我在 worklight 中使用 Cordova 文件 API 创建了一个文件。写事件完成后，我想读取文件。我尝试在 writer.onwriteend 事件中编写函数调用 readAsText()。但是文件没有被读取。“独家”选项与此有关吗？一切正常，直到读取（），然后没有错误，没有消息..但我认为它没有读取文件。但是一旦**reader.onloadend 事件**发生错误：

> 读取错误 {"type":"error","bubbles":false,"cancelBubble":false,"cancelable":false,"lengthComputable":false,"loaded":0,"total":0,"target" :{"fileName":"file://C:\Users\IBM_ADMIN\cordova\filesystem\persistent\RQM\ExecutionResult.xml","re​​adyState":2,"result":null,"error":{"code ":1},"onloadstart":null,"onprogress":null,"onload":null,"onabort":null}}

这是我的代码：

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0,
        onFileSystemSuccess, fail);

function onFileSystemSuccess(fileSystem) {
alert("Created File system ");
fileSystem.root.getFile("ExecutionResult.xml", {
    create : true,
    exclusive : true
}, gotFileEntry, fail);
function gotFileEntry(fileEntry) {
fileEntry.createWriter(gotFileWriter, fail);
}
function gotFileWriter(writer) {
writer.write(JsonData);

writer.onwriteend = function(evt) {
    readAfterWriting();
};
}
function readAfterWriting(){
    fileSystem.root.getFile("ExecutionResult.xml", {
        create : false,
        exclusive : false
    }, gotFile, fail);

};
} 
function gotFile(file) {
readAsText(file);
}
function readAsText(file) {
var reader = new FileReader();
reader.onloadend = function(evt) {
    console.log("Read as text");
    console.log(evt.target.result);
};
reader.readAsText(file);
} 
```

这是发生错误的代码。文件名显示为 22。这里是显示的行.. **var callbackId = v.id;**

```
window.addEventListener("message", function(e){
    _consoleLog("*****PG BC***** " + e.domain + " said: " + e.data);
    var r = e.data;

    // If a result was returned
    _consoleLog("typeof result=" + (typeof r) + " r=" + r);
    if (r.length > 0) {
        // if ((typeof r == "string") && (r.length > 0)) {
        _consoleLog("Result from exec=<" + dumpObj(r, '', ' ', 2) + ">");
        eval("var v=" + r + ";");
        var callbackId = v.id;
        var cast = v.cast;
        // var temp = "+cast+"("+this.getJSONString() + ");\n"
        if (cast) {
            // _consoleLog("CAST==="+"var
            // temp="+cast+"("+JSON.stringify(v.message)+");\n");
            // eval("var temp="+cast+"("+JSON.stringify(v.message)+");\n");
            // _consoleLog("***** CAST:"+" var temp="+cast+"("+r+");");
            eval("var temp=" + cast + "(" + r + ");");
            v = temp;
        }
        // _consoleLog("After CAST="+dumpObj(v, '', ' ', 3));

        // If status is OK, then return value back to caller
        if (v.status === Cordova.callbackStatus.OK) {

            // If there is a success callback, then call it now with
            // returned value
            if ((typeof(Cordova.callbacks[callbackId]) != 'undefined') 
                && (Cordova.callbacks[callbackId] != null)) {
                if (Cordova.callbacks[callbackId].success) {
                    try {
                        Cordova.callbacks[callbackId].success(v.message);
                    } catch (e) {
                        _consoleLog("Error in success callback: " + callbackId + " = " + e);
                    }

                    // Clear callback if not expecting any more results
                    if (!v.keepCallback) {
                        delete Cordova.callbacks[callbackId];
                    }
                }
            }
            return v.message;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:44:33.547

这是一些符合您期望的代码：

```
<!DOCTYPE html>
<html>
<head>
<title>FileReader Example</title>
<meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<script type="text/javascript" charset="utf-8">

    onWLReady = function() {
        // Wait for PhoneGap to load
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    var wlInitOptions = {
        onSuccess : onWLReady,
        connectOnStartup : false
    };

    if (window.addEventListener) {
        window.addEventListener('load', function() {
            WL.Client.init(wlInitOptions); }, false);
    } else if (window.attachEvent) {
        window.attachEvent('onload',  function() {
            WL.Client.init(wlInitOptions);
         });
    }

    function log(txt){
        var p = document.createElement('p');
        document.getElementById("log").appendChild(p);
        p.appendChild(document.createTextNode(txt));
    }

    // PhoneGap is ready
    //
    function onDeviceReady(){
        log("onDeviceReady");
    }

    function readFile() {
        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0,
            function(fileSystem) {
                fileSystem.root.getFile("ExecutionResult.xml", {
                     create : false, exclusive: false
                },
                function(fileEntry){
                    fileEntry.file(function(file) {
                        readDataUrl(file);
                        readAsText(file);
                    },
                    fail);
                },
                fail);
        }, fail);
    }

    function writeFile() {
        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0,
            function(fileSystem) {
            fileSystem.root.getFile("ExecutionResult.xml", {create: true,     exclusive: true},
                    function(fileEntry) {
                        fileEntry.createWriter(
                            function(writer) {
                                writer.onwriteend = function(evt) {
                                    readFile();
                                };
                            writer.onwritestart =     function(evt){
                                    log("onwritestart");
                                };
                                writer.onwrite = function(evt){
                                    log("onwrite");
                                };
                                writer.onerror = function(evt){
                                    log("onerror");
                                };
                                writer.write("JSonData");
                            },
                            fail);
                        }
                        , fail);
            },
            fail);
    }

    function readDataUrl(file){
        var reader = new FileReader();
        log("readDataUrl...");
        reader.onloadstart = function(evt){
            log("onloadstart: " + evt.target.result);
        };
        reader.onload = function(evt){
            log("onload: " + evt.target.result);
        };
        reader.onloadend = function(evt){
            log("onloadend: " + evt.target.result);
        };
        reader.onerror = function(evt){
            log("onerror: " + evt.target.result);
        };
        reader.readAsDataURL(file);
    }

    function readAsText(file) {
        var reader = new FileReader();
        log("readAsText...");
        reader.onloadstart = function(evt){
            log("onloadstart: " + evt.target.result);
        };
        reader.onload = function(evt){
            log("onload: " + evt.target.result);
        };
        reader.onloadend = function(evt){
            log("onloadend: " + evt.target.result);
        };
        reader.onerror = function(evt){
            log("onerror: " + evt.target.result);
        };
        reader.readAsText(file);
    }

    function fail(error) {
        log("fail: "+ evt.target.error.code);
    }
</script>
</head>
<body id="content">
    <button onclick="writeFile();">Write and read file</button>
    <p id="log"></p>
</body>
</html> 
```

希望这可以帮助...

# maven - 默认使用 maven 静态编译 .groovy

> ID：16074219
> 
> 赞同：2
> 
> 时间：2013-04-18T03:58:14.203
> 
> 标签：maven, groovy

我现在在我们的项目中使用 maven 编译 .groovy

我的 pom.xml 是

```
 <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <encoding>UTF-8</encoding>
                <compilerId>groovy-eclipse-compiler</compilerId>
                <verbose>true</verbose>
                <compilerArguments>
                    <configscript>/tmp/aa.groovy</configscript>
                </compilerArguments>
                <fork>true</fork>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>org.codehaus.groovy</groupId>
                    <artifactId>groovy-eclipse-compiler</artifactId>
                    <version>2.7.0-01</version>
                </dependency>
                <dependency>
                    <groupId>org.codehaus.groovy</groupId>
                    <artifactId>groovy-all</artifactId>
                    <version>${groovy.version}</version>
                </dependency>
            </dependencies>
        </plugin> 
```

有没有类似的东西

[http://groovy.codehaus.org/Advanced+compiler+configuration](http://groovy.codehaus.org/Advanced+compiler+configuration)

groovyc -configscript src/conf/config.groovy src/main/groovy/MyClass.groovy

所以我可以默认以静态方式编译我的 groovy

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T14:14:22.930

你可以使用蚂蚁

```
 <plugin>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <execution>
                    <id>compile</id>
                    <phase>compile</phase>
                    <configuration>
                        <tasks>
                            <mkdir dir="${basedir}/src/main/groovy"/>
                            <taskdef name="groovyc" classname="org.codehaus.groovy.ant.Groovyc">
                                <classpath refid="maven.compile.classpath"/>
                            </taskdef>
                            <mkdir dir="${project.build.outputDirectory}"/>
                            <groovyc destdir="${project.build.outputDirectory}" 
                                     srcdir="${basedir}/src/main/groovy/" 
                                     listfiles="true"
                                     configscript="${basedir}/src/config/config.groovy">
                                <classpath refid="maven.compile.classpath"/>
                            </groovyc>
                        </tasks>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

和 config.groovy

```
withConfig(configuration) {
   ast(groovy.transform.CompileStatic)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T21:32:02.720

我知道我在这里复活了一个旧线程，但我遇到了你的问题，并认为如果我们在 GMavenPlus 中这样做会非常酷，所以我打开了一个[Jira](http://jira.codehaus.org/browse/GMAVENPLUS-10)并开始搞乱它。我已经[提交](https://github.com/groovy/GMavenPlus/commit/e557ff0e6a6b928a5d84bc9179d3d0262d82af00)了此功能的第一次通过，如果您能在我们的下一个版本之前对其进行测试，我将不胜感激。为了您的方便，我部署了一个新[快照。](https://nexus.codehaus.org/content/repositories/snapshots/org/codehaus/gmavenplus/gmavenplus-plugin/1.1-SNAPSHOT/)

# c# - 将两步 LINQ 查询转换为单个 LET 查询？

> ID：16074220
> 
> 赞同：2
> 
> 时间：2013-04-18T03:58:18.963
> 
> 标签：c#, linq

我目前有以下代码：

```
var data = /* enumerable containing rows in your table */;
var part = "X";
var items = new HashSet<int>(data
    .Where(x => x.PartName == part)
    .Select(x => x.ItemName));
var query = data.Where(x => items.Contains(x.ItemName)); 
```

`items`查找 data 中具有特定`PartName`.

`query`返回该项目的数据中的所有记录。

我需要将它转换成一个 LET 语句（或其他东西），我可以在另一个更大的 LINQ 查询中使用它。

例如，如果我的数据如下（记录）：

```
ItemName PartName
1        A
1        B
2        A
3        C 
```

我正在寻找带有“A”部分的项目，我需要最终结果是：

```
1        A
1        B
2        A 
```

一个建议是做这样的事情：

```
let a = data.GroupBy(x => x.ItemName)
            .Where(g => g.Any(x => x.Partname == part))
            .Select(g => new
                {
                    ItemName = g.Key,
                    PartNames = g.Select(x => x.PartName)
                }) 
```

但是 (let a) 中返回的数据与预期结果不匹配，这将返回如下内容：

```
1        A,B    // list of parts for that item
2        A 
```

而且我需要保持与上图相同的预先存在的结构。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T04:04:20.543

听起来像您需要`SelectMany`的组：

```
 data.GroupBy(x => x.ItemName)
            .Where(g => g.Any(x => x.PartName == part))
            .SelectMany(g => g); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:01:06.743

```
var data = /* enumerable containing rows in your table */;
var part = "X";
var query = data.Where(x => data
    .Where(d => d.PartName == part)
    .Any(d => d.ItemName == x.ItemName)); 
```

# gwt - 无法弄清楚为什么我不能将 GWT 应用程序部署到 Apache Tomcat 7

> ID：16074224
> 
> 赞同：0
> 
> 时间：2013-04-18T03:58:36.157
> 
> 标签：gwt, tomcat, tomcat7, gwt-rpc

首先，我尝试按照教程部署我的应用程序。经过一番摆弄和失败后，我想我应该运行 GWT 示例联系人项目，看看它是否可以在我的 Tomcat 上使用 RPC 调用。再次，没有运气。我所做的是创建一个示例应用程序（使用 Eclipse 向导时）编译，在开发服务器上运行一次，然后查看它是否有效。

然后我获取war文件夹的内容，对其进行压缩，将其重命名为 SampleApp.war，将其部署到 Apache 上，然后解压缩。我有一个名为 SampleApp 的文件夹。其中有.html、.css、WEB-INF。我尝试做 localhost:8080/SampleApp/SampleApp.html 但它不起作用。

> 类型状态报告
> 
> 消息 /SampleApp/SampleApp.html
> 
> 描述 请求的资源 (/SampleApp/SampleApp.html) 不可用。

我不知道该怎么做。我试图做一个简单的例子并让它工作，但我做不到。帮助！

更新：[无法将 servlet 示例 GWT 应用程序部署到 Apache Tomcat 7](https://stackoverflow.com/questions/16096617/cannot-deploy-servlet-sample-gwt-app-to-apache-tomcat-7)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T04:42:49.983

要在 tomcat 上部署 gwt 应用程序，您必须使用 ANT 创建 war 文件。

按照此链接创建war文件，然后将该war文件放在tomcat的webapps文件夹中，它肯定会工作。

[http://blog.elitecoderz.net/gwt-and-tomcat-create-war-using-eclipse-to-deploy-war-on-tomcat/2009/12/](http://blog.elitecoderz.net/gwt-and-tomcat-create-war-using-eclipse-to-deploy-war-on-tomcat/2009/12/)

# iphone - 如何检测“想使用您当前的位置”选择动作？

> ID：16074228
> 
> 赞同：2
> 
> 时间：2013-04-18T03:58:53.143
> 
> 标签：iphone, ios, gps, cllocationmanager

正如我们所知`CLLocationManager`，在警报许可的情况下可以用来获取当前位置：“MyAppName”想要使用您的当前位置”|“不允许”|“允许”。我们如何检测到之后的选择动作用户选择“不允许”或“允许”？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T04:03:56.810

```
-(void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:   (CLAuthorizationStatus)status {

    if (status == kCLAuthorizationStatusDenied) {
        // Don't Allow
    }
    else if (status == kCLAuthorizationStatusAuthorized) {
        //Allow
    }
} 
```

实现`CLLocationManagerDelegate`和使用这个委托方法

# wpf - 双击标题时禁用最大化 WPF 窗口

> ID：16074229
> 
> 赞同：4
> 
> 时间：2013-04-18T03:59:02.147
> 
> 标签：wpf, window, double-click, wndproc, maximize

**如何在双击标题时禁用最大化 WPF 窗口并保持调整大小可用？**

* * *

我知道*ResizeMode*禁用最大化，但它也阻止调整表单大小

```
ResizeMode="CanMinimize" 
```

我知道如何删除最大化和最小化按钮，但仍然可以通过双击标题来最大化。

在 WinForms 中可以轻松实现。只需将*FormBorderStyle*从*None*设置为*FixedSingle*或*Fixed3D*。但这不再是 WPF 中的选项。

* * *

PS 我正在尝试一些技巧来处理 WM_GETMINMAXINFO、WM_SYSCOMMAND 等。但[似乎它不起作用](https://stackoverflow.com/a/18707977/968003)......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-08T16:51:09.830

我有一个类似的问题。我的窗口没有任何窗体边框或标题栏，但可以移动（使用鼠标）。问题是如果用户将窗口移动到屏幕的顶部边缘，那么 Windows 会自动将窗口最大化。

`StateChanged`我设法通过将以下处理程序附加到窗口的事件来解决这个问题。

```
private void OnWindowStateChanged(object sender, EventArgs e)
{
    if (this.WindowState == WindowState.Maximized)
    {
        this.WindowState = WindowState.Normal;
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-07T21:32:19.977

很好的解决方案，我在 MSDN 的一点帮助下在 WPF 窗口中检测非客户端鼠标活动。

当用户双击非客户区时，调用 if 将阻止`handled = true`窗口最大化`WndProc`。`msg == WM_NCLBUTTONDBLCLK`

```
myClass()  //c'tor
{
  InitializeComponent();
  SourceInitialized += new EventHandler(myClass_SourceInitialized);  
}

void myClass_SourceInitialized(object sender, EventArgs e)
{
    System.Windows.Interop.HwndSource source = System.Windows.Interop.HwndSource.FromHwnd(new System.Windows.Interop.WindowInteropHelper(this).Handle);
    source.AddHook(new System.Windows.Interop.HwndSourceHook(WndProc));
}

int WM_NCLBUTTONDBLCLK { get { return 0x00A3; } }

private IntPtr WndProc(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
{
    if (msg == WM_NCLBUTTONDBLCLK)
    {
        handled = true;  //prevent double click from maximizing the window.
    }

    return IntPtr.Zero;
} 
```

有用的 MSDN 参考： [https ://social.msdn.microsoft.com/Forums/vstudio/en-US/f54dde25-b748-4724-a7fe-a355b086cfd4/mouse-event-in-the-nonclient-window-area](https://social.msdn.microsoft.com/Forums/vstudio/en-US/f54dde25-b748-4724-a7fe-a355b086cfd4/mouse-event-in-the-nonclient-window-area)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-23T09:40:42.500

在遇到这个问题并研究了这个 SO question 之后，我认为答案是不够的。删除标题栏后，双击靠近窗口顶部时，窗口仍会最大化。

我选择了删除标题栏并禁用双击窗口的方法。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        MouseDoubleClick += (sender, args) =>
        {
            args.Handled = true;
        };
    }
} 
```

在我的应用程序中，我使用的是从**MetroWindow**而不是**Window**继承的 MahApps.Metro，但是上面的示例在这两种情况下都适用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-26T02:06:16.610

*WPF*没有禁用最大化窗口的本机方法（与*WinForms*不同）。因此，请考虑以下关键点：

**1.隐藏最大化按钮**

使用*WinAPI*是一种可行的方法，但仅用于隐藏最大化按钮。使用以下内容：

```
[DllImport("user32.dll")]
private static extern int GetWindowLong(IntPtr hWnd, int nIndex);
[DllImport("user32.dll")]
private static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);

private const int GWL_STYLE = -16;
private const int WS_MAXIMIZEBOX = 0x10000;

private void Window_SourceInitialized(object sender, EventArgs e)
{
    var hwnd = new WindowInteropHelper((Window)sender).Handle;
    var value = GetWindowLong(hwnd, GWL_STYLE);
    SetWindowLong(hwnd, GWL_STYLE, (int)(value & ~WS_MAXIMIZEBOX));
} 
```

**2\. 手动处理最大化**

上面的代码仍然允许最大化（例如通过双击窗口的标题）。

*WPF*无法控制标题栏的行为。如果要更改双击行为，则需要删除标题栏并创建自己的标题栏。看看它是如何在[MahApps.Metro](http://mahapps.com/MahApps.Metro/)中完成的-[链接到示例](https://github.com/MahApps/MahApps.Metro/blob/master/MahApps.Metro/Themes/MetroWindow.xaml)。之后处理双击事件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T05:13:44.803

这对你有用吗？

```
public partial class MainWindow : Window
 {
    public MainWindow()
   {

    InitializeComponent();
    this.SizeChanged += MainWindow_SizeChanged;
   }    
    void MainWindow_SizeChanged(object sender, SizeChangedEventArgs e)
    {

      if (this.WindowState == WindowState.Maximized)
      {
       this.WindowState = System.Windows.WindowState.Normal;
      }

}
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-10T10:28:03.653

另一个简单（但丑陋）的解决方案：

```
// inside a Window class
protected override void OnPreviewMouseDoubleClick(MouseButtonEventArgs e)
{
    base.OnPreviewMouseDoubleClick(e);

    const int titleHeight = 30;
    var position = e.GetPosition(this);

    if (position.Y <= titleHeight)
    {
        e.Handled = true;
    }
} 
```

注意：用户仍然可以使用标题栏上的上下文菜单最大化窗口/将窗口移动到屏幕的上边缘。

# perl - 如何修复错误以将前缀和后缀添加到文本文件中的某些数字集

> ID：16074231
> 
> 赞同：0
> 
> 时间：2013-04-18T03:59:30.567
> 
> 标签：perl

如何为从文本文件中获得的一组数字添加前缀和后缀。我已经编写了代码，但它显示了一些错误。

我的文本文件包含数字

```
1
2
3
4
5
6 
```

输出应该像

```
 3r_1.pdb
                                3r_2.pdb
                                .
                                .
                                3r_6.pdb 
```

该程序：-

```
open(FILE,"text.txt");
open(OUT,">output.txt");
while($file=<FILE>)
{
$f= "3r_";
$e= ".pdb";
chomp($file);
print OUT "$f$file$e\n";

} 
```

我无法理解错误实际上在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T04:09:39.843

由于模式是相同的，我会这样做：

```
use strict;
use warnings;

open(my $in, "<", "text.txt") or die $!;
open(my $out, ">", "output.txt") or die $!;

while (my $line = <$in>)
{
  chomp ($line);
  print $out "3r_" . $line . ".pdb\n";
}

close ($in);
close ($out); 
```

你应该永远`use strict; use warnings;`。在现代 Perl 中，最好也对文件使用三参数 open。它更清晰，让程序更有效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:47:40.140

也许以下内容会有所帮助：

```
use strict;
use warnings;

while (<>) {
    chomp;
    print "3r_$_.pdb\n";
} 
```

用法：`perl script.pl text.txt >output.txt`

这让 Perl 可以处理文件 i/o，也就是说，您不需要`open`或`close`任何文件。*text.txt*中的每一行都被读取和`chomp`编辑。Perl 的默认标量`$_`用于创建最终文件名。

# php - array_diff 没有返回预期的结果

> ID：16074233
> 
> 赞同：3
> 
> 时间：2013-04-18T03:59:34.363
> 
> 标签：php, arrays

我在这里阅读了一些教程，但没有一个能返回我需要的内容。我有两个数组。

```
$arrayA = array(1960,1961,1963,1962,1954,1953,1957,1956,1955);
$arrayB = array(1949,1960,1961,1963,1962,1954,1953,1957,1956,1955); 
```

但是，当我运行 array_diff 时，它返回一个空数组。

```
$diff = array_diff($arrayA, $arrayB); 
```

但我希望它返回 1949。我的代码有什么错误？

编辑：由于切换变量不起作用，我为 3 个数组（A、B 和 diff）做了 var_dump，这是 pastebin [http://pastebin.com/tn1dvCs3](http://pastebin.com/tn1dvCs3)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T04:02:27.830

`array_diff`[根据文档](http://php.net/manual/en/function.array-diff.php)，通过查找第一个数组中不在第二个数组中的元素来工作。尝试反转您的呼叫：

```
$diff = array_diff($arrayB, $arrayA); 
```

为了看到这一点，让我们看一个更易于管理但等效的示例：

```
$arrayA = array(1960);
$arrayB = array(1949,1960);

$diff = array_diff($arrayB, $arrayA);
var_dump($diff); 
```

这产生：

```
[mylogin@aserver ~]$ vim test.php
[mylogin@aserver ~]$ php test.php
array(1) {
  [0]=>
  int(1949)
} 
```

请注意，这使用了您尝试获得的功能的最小演示示例。通过在实际实现中丢弃不必要的数据，您可以更快地解决您遇到的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T04:01:52.693

> 返回一个数组，其中包含 array1 中不存在于任何其他数组中的所有条目。

所以：

```
$diff = array_diff($arrayB, $arrayA); 
```

会给你你想要的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T04:01:25.617

`array_diff`在调用中交换变量：

```
<?php
$arrayA = array(1960,1961,1963,1962,1954,1953,1957,1956,1955);
$arrayB = array(1949,1960,1961,1963,1962,1954,1953,1957,1956,1955);

$diff = array_diff($arrayB, $arrayA);

var_dump($diff);
?> 
```

显示：

```
array(1) { [0]=> int(1949) } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T04:02:51.340

给，

```
$diff = array_diff($arrayB, $arrayA); 
```

有 的结果`1949`，即元素`$arrayB`有和`$arrayA`没有。

IE

```
$arrayA = array(1960,1961,1963,1962,1954,1953,1957,1956,1955);
$arrayB = array(1949,1960,1961,1963,1962,1954,1953,1957,1956,1955);

$diff = array_diff($arrayB, $arrayA);

print_r($diff ); 
```

[在这里测试](http://writecodeonline.com/php/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T04:17:21.350

你可以在这里阅读文档[http://php.net/manual/pt_BR/function.array-diff.php](http://php.net/manual/pt_BR/function.array-diff.php)

```
$diff = array_diff($arrayB, $arrayA);
print_r($diff); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-26T03:10:34.167

```
$a = '5,6,'; 
$b = '6,6,'; 
$a_array = explode(',',$a); 
$b_array = explode(',',$b);
$result = array_diff($b_array,$a_array); 
var_dump($result); 
```

但是，当我运行 array_diff 时，它返回一个空数组。

```
$result = array_diff($b_array,$a_array); 
```

但我希望它返回 6。我的代码有什么错误？

# php - 如何为博客制作多个标签系统？

> ID：16074234
> 
> 赞同：0
> 
> 时间：2013-04-18T03:59:36.610
> 
> 标签：php, mysql

我的数据库设置如下：

```
posts
    post_id; primary_key
    title;
    content;
    date;
tags
    tag_id; primary_key
    post_id;
    tag_name; 
```

在这个博客中，我让用户发布他们自己的标签，比如 YouTube。所以可以说，我让用户在输入框中输入标签。例如，用户类型：Cat Dog Food。

我希望 PHP 将输入转换为数组并将其存储在这样的数据库中。

```
tags

    tag_id | post_id | tag_name
        1       1       Cat
        2       1       Dog
        3       1       Food 
```

我认为我们可以使用explode()将该字符串转换为数组。但是，如何构建查询以按照我想要的方式存储到数据库中？

我基本上希望 PHP 分解每个标签，并将每个标签存储在单独的行中。

我正在使用 while 循环将每个标签拉到帖子中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:08:21.173

使用`foreach`循环。IE

```
$string= "cat,lion";
$array= explode(",",$string);
foreach($array as $tag)
{
  mysql_query("INSERT INTO tags(tag_id,post_id,tag_name) VALUES('','$post_id','$tag')"); // run query to insert into tags table. $post_id is the corresponding post_id you have.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:08:40.170

那么有一个不同的`tags`表来存储你的标签。它基本上有 2 列 - `tag_id | tag_name`。然后在两列上都有一个使用复合主键调用`post_tags`的表。`post_id | tag_id`

然后，您可以使用逗号分隔标签（而不是空格，以便标签可以根据需要包含空格），使用`explode()`数组`foreach`将它们先存储在`tags`表中，然后再存储在`post_tags`表中。

您可以`tag_name`在`tags`表中设置唯一索引以防止重复标记，并且`post_tags`表中的主复合索引将防止任何重复`post_id | tag_id`行。

# linux - 斯坦福 POS Tagger 不标记中文文本

> ID：16074238
> 
> 赞同：5
> 
> 时间：2013-04-18T04:00:16.210
> 
> 标签：linux, nlp, stanford-nlp, pos-tagger

我正在使用 Stanford POS Tagger（第一次），虽然它正确标记了英语，但即使更改模型参数，它似乎也无法识别（简体）中文。我忽略了什么吗？

我已经从这里下载并解压了最新的完整版本：http: [//nlp.stanford.edu/software/tagger.shtml](http://nlp.stanford.edu/software/tagger.shtml)

然后我将示例文本输入到“sample-input.txt”中。

> 这是一个测试的句子。这是另一个句子。</p>

然后我简单地运行

> ./stanford-postagger.sh models/chinese-distim.tagger sample-input.txt

预期的输出是用词性标记每个单词，但它会将整个文本字符串识别为一个单词：

> 从标注器 models/chinese-distim.tagger 加载默认属性
> 
> 从 models/chinese-distim.tagger 中读取 POS 标记器模型 ... 完成 [3.5 秒]。
> 
> 这是一个测试的句子。这是另一个句子。#NR
> 
> 以每秒 30.30 个单词的速度标记 1 个单词。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T21:14:31.310

我终于意识到这个 pos 标记器中不包含标记化/分段。在将它们提供给标记器之前，这些单词似乎必须用空格分隔。对于那些对中文最大熵分词感兴趣的人，这里有一个单独的包可用：

[http://nlp.stanford.edu/software/segmenter.shtml](http://nlp.stanford.edu/software/segmenter.shtml)

感谢大家。

# javascript - 在 Google 地图中添加标记 - Ruby on Rails

> ID：16074242
> 
> 赞同：0
> 
> 时间：2013-04-18T04:00:25.543
> 
> 标签：javascript, google-maps, google-geocoder

请帮助我克服这个问题。
我有存储谷歌地图（lat，lng）的一些点的数据库，我想在谷歌地图中显示它们。
这是我的控制器

```
@location = SharedInfo.all 
```

这是视图中的javascript

```
function DisplayTraficCir(loca) {
for (var location in loca){
  var myLatLng = new google.maps.LatLng(location.latitude,location.longitude)
  var marker = new google.maps.Marker({
    position: myLatLng,
    map: map
  });
}
// map.setCenter(location);
} 
```

我通过以下方式调用了这个函数：

```
DisplayTraficCir(<%@location%>); 
```

我不知道为什么它不起作用。也许它根本不执行“for”语句中的代码块。
谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:07:14.660

地图 API 不是 Ruby API。它是一个 JavaScript API。

你说你正在调用这样的 JavaScript 函数：

```
DisplayTraficCir(<%@location%>); 
```

但事实并非如此。那是您的*Ruby*模板代码，而不是您的 JavaScript 代码。

您正在尝试一次调试两个问题。相反，一次调试一个问题：

1.  如何让 Maps API 与 JavaScript、CSS 和 HTML 一起工作。Ruby、Rails 和您的服务器代码根本不参与*其中*。

2.  一旦你有了工作的 JavaScript、CSS 和 HTML 代码，如何从 Rails 生成这些代码。

换句话说，要调试您的 JavaScript 代码，请查看*JavaScript*代码，而不是生成它的 Ruby 代码。

您可以在任何浏览器中使用开发人员工具调试 JavaScript 代码。铬特别好。一件简单的事情是在相关函数调用之前立即插入此语句：

```
debugger; 
```

然后在打开 Chrome 开发人员工具的情况下加载您的页面，它将在 JavaScript 调试器中停止在该行。然后你可以查看变量，查看浏览器看到的实际代码，逐行跟踪你的代码，以及各种类似的好东西。

*这样做时，请完全*忘记您的 Rails 代码。在这一点上根本不相关。浏览器永远不会看到该代码，它看到的只是Ruby 代码*生成的 JavaScript。*

像这样将这个调试任务分成两个独立的部分，这样更容易弄清楚发生了什么。

# javascript - 寻找第 10001 个素数 - Project Euler

> ID：16074244
> 
> 赞同：0
> 
> 时间：2013-04-18T04:00:44.963
> 
> 标签：javascript, arrays, primes

我试图找到第 10,001 个素数。我看过其他人写的代码，但我不太明白它的意思。我用 JavaScript 编写了一些代码，在其中尝试使用 Eratosthenes 筛。我不确定问题是什么。看起来它应该可以正常工作，但我得到了错误的答案。

```
var compute = function() {
var prime = [2,3,5,7,11,13,17,19];
for(var i=20; i<=80000;i++) {
if(i%2!==0 && i%3!==0 && i%5!==0 && i%7!==0 && i%11!==0 && i%13!==0 && i%17!==0 &&      i%19!==0) {
 prime.push(i);
  }
 }  
 console.log(prime[10000]);
};

 compute(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T04:28:50.003

这是一个简单的方法，但要找到百万分之一

（在某些机器中甚至是千分之一）

你需要用超时把它切碎，

或将其发送给网络工作者以防止锁定。

你只需要检查主要除数，当你收集它们时，

因为每个数字都是素数的乘积

或者本身就是素数。

```
function nthPrime(nth){
    var P= [2], n= 3, div, i, limit,isPrime;
    while(P.length<nth){
        div= 3, i= 1;
        limit= Math.sqrt(n)+1;
        isPrime= true;
        while(div<limit){
            if(n%div=== 0){
                isPrime= false;
                div= limit;
            }
            else div= P[i++] || div+ 2;
        }
        if(isPrime) P.push(n);
        n+= 2;
    }
    return P[P.length-1];
} 
```

**警报（nthPrime（10001））；**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T04:17:07.643

您的代码没有实现 Eratosthenes 的筛子。您必须执行以下步骤（来源：[http](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes) ://en.wikipedia.org/wiki/Sieve_of_Eratosthenes ）：

1.  创建一个从 2 到 n 的连续整数列表：(2, 3, 4, ..., n)。
2.  最初，让 p 等于 2，即第一个素数。
3.  从 p 开始，以 p 为增量向上计数，并在列表中标记每个大于 p 本身的数字。这些将是 p 的倍数：2p、3p、4p 等；请注意，其中一些可能已经被标记。
4.  在未标记的列表中找到第一个大于 p 的数字。如果没有这样的号码，请停止。否则，现在让 p 等于这个数（即下一个素数），然后从步骤 3 开始重复。

如果要找到第 10001 个素数，则必须选择足够大的 n，以使生成的数组至少包含 10001 个元素，然后选择第 10001 个元素作为结果。

# java - 实现 2 个搜索栏 - 两者都修改完全相同的文本？

> ID：16074252
> 
> 赞同：0
> 
> 时间：2013-04-18T04:01:09.717
> 
> 标签：java, android, layout, seekbar

我正在尝试实现第二个搜索栏，但出于某种奇怪的原因，当搜索栏移动时，它们都在修改相同的文本。我上下查看了源代码，但无法识别问题（我知道我忽略了一些非常简单的东西——有人能发现吗？）

爪哇：

```
 private long rowID; 
     private EditText nameEt;
     private EditText capEt;
     private EditText codeEt;
     private TimePicker timeEt;
     private TextView ssidTextView;
     private TextView sbTv;
     private SeekBar bar;
     private SeekBar bar2;
     private SeekBar bar;
     private SeekBar bar2;
     private TextView textProgress,textAction;
     private TextView textProgress2,textAction2;

       public void onCreate(Bundle savedInstanceState) 
       {
          super.onCreate(savedInstanceState); 
          setContentView(R.layout.add_country);
          bar = (SeekBar)findViewById(R.id.seekBar1);
          bar.setOnSeekBarChangeListener(this);
          bar2 = (SeekBar)findViewById(R.id.seekBar2);
          bar2.setOnSeekBarChangeListener(this);

          textProgress = (TextView)findViewById(R.id.textViewProgress);
          textProgress2 = (TextView)findViewById(R.id.textViewProgress2);

          textAction = (TextView)findViewById(R.id.textViewAction);
          textAction2 = (TextView)findViewById(R.id.textViewAction2);

      }

       @Override
       public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromUser) {     

        textProgress.setText(progress+"MBPS");
       }

        public void onProgressChanged2(SeekBar seekBar2, int progress,
                boolean fromUser) {

        textProgress2.setText(progress+"MBPS"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:22:41.027

这是一个完整的解决方案

**活动**

```
public class MainActivity extends Activity implements SeekBar.OnSeekBarChangeListener{

    SeekBar bar1;
    SeekBar bar2;
 TextView textProgress1,textProgress2;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            bar1=(SeekBar)findViewById(R.id.seekBar1);
            bar2=(SeekBar)findViewById(R.id.seekBar2);
            bar1.setOnSeekBarChangeListener(this);
            bar2.setOnSeekBarChangeListener(this);
            textProgress1=(TextView)findViewById(R.id.textView1);
            textProgress2=(TextView)findViewById(R.id.textView2);
        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            switch (seekBar.getId()) {
            case R.id.seekBar1:
                textProgress1.setText(progress +" MBPS");
                break;
          case R.id.seekBar2:
              textProgress2.setText(progress +" MBPS");
                break;
            default:
                break;
            }
        }
        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
        }
        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
        }
 } 
```

**活动主XML**

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center" >

<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="39dp" 
    />

<SeekBar
    android:id="@+id/seekBar2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/seekBar1"
    android:layout_marginTop="38dp" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/seekBar1"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="38dp"
    android:text="TextView Progrss 1" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/seekBar1"
    android:layout_marginTop="19dp"
    android:text="TextView Progrss 2"  />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:10:12.837

这里调用的唯一函数是第一个函数：

```
@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {    
    textProgress.setText(progress+"MBPS");
} 
```

在此函数中，您应该检查传递了哪个 SeekBar 并做出相应的反应：

```
@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {     
    if (seekBar.equals(bar)) {//do something for bar}
    else if (seekBar.equals(bar2)) {//do something for bar2}
} 
```

如果您的布局是在 XML 中定义的（无论如何您都应该在像这样的简单应用程序中这样做），然后比较 SeekBars id：

```
@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {     
    if (seekBar.getId() == R.id.seekbar_1) {//do something for bar}
    else if (seekBar.getId() == R.id.seekbar_2) {//do something for bar2}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:02:42.503

您的代码中的错误在于 seekbar 侦听器调用的方法是上面带有**@override**表示法的方法。

我的解决方案将在搜索完成后更改文本，如果您需要实时更改，例如：一旦开始搜索就更改文本，

实现以下方法......

[ [http://developer.android.com/reference/android/widget/SeekBar.OnSeekBarChangeListener.html#onProgressChanged(android.widget.SeekBar](http://developer.android.com/reference/android/widget/SeekBar.OnSeekBarChangeListener.html#onProgressChanged(android.widget.SeekBar) , int, boolean)][1] 并使用下面指定的相同逻辑...

实施

```
@override
public void onStopTrackingTouch(SeekBar s){
   switch (arg0.getId()) {
    case R.id.seekBar1:
        setText("ONE");
                    break;
    case R.id.seekBar2:
        setText("TWO");
                    break;  
    default:
        break;        
    } 
```

}

我希望这能解决问题。

# actionscript-3 - 在 AS3 中评估 ComboBox.SelectedIndex 是否大于 -1（无选择）

> ID：16074254
> 
> 赞同：0
> 
> 时间：2013-04-18T04:01:24.907
> 
> 标签：actionscript-3, flash-cs6

我想评估用户是否在组合框中选择了任何内容，以便我可以在其下方创建一个新的组合框。我在别处读到该`SelectedIndex`值`-1`相当于用户未触及的组合框，因此我基于此假设。

这是我的代码：

```
function displayCarbs(event:MouseEvent):void {
            _ingredientWizard.visible = false;
            _categoryCarbs = new CategoryCarbs();
            addChild(_categoryCarbs);
            'positioning'
            _categoryCarbs.x = stage.stageWidth / 2 - _categoryCarbs.width / 2;
            _categoryCarbs.y = stage.stageHeight / 2 - _categoryCarbs.height / 2;
            _categoryCarbs.btn_goback.addEventListener(MouseEvent.CLICK, addNewIngredient)
            addChild(myComboBox);
            myComboBox.prompt="Choose your carbs";
            myComboBox.x= _ComboBoxXPosition;
            myComboBox.y = _ComboBoxYPosition;
            myComboBox.width = _ComboBoxWidth;
            myComboBox.height = _ComboBoxHeight;
            myComboBox.dataProvider = new DataProvider(myItems);
               trace("test1");
            if (myComboBox.selectedIndex > -1) {
                trace("test2");
                addChild(myComboBox);
                myComboBox.y = _ComboBoxYPosition + _SubsequentComboBoxIncrement;
                myComboBox.x = _ComboBoxXPosition;
                myComboBox.width = _ComboBoxWidth;
                myComboBox.height = _ComboBoxHeight;

            }
        } 
```

不幸的是，我的第二个跟踪没有到达输出窗口，我想不出我的`if`陈述有什么问题，或者我可能只是有点厚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:06:39.897

您正在测试`myComboBox.selectedIndex`小于 -1。

相反，请测试以下任何一项：

*   `selectedIndex == -1`
*   `selectedIndex < 0`
*   `selectedIndex <= -1`

# x++ - Global::Checkpower 方法中的 _isMexican 布尔值是什么？

> ID：16074276
> 
> 赞同：1
> 
> 时间：2013-04-18T04:03:17.007
> 
> 标签：x++, dynamics-ax-2012, axapta

很简单，这个方法有什么用，_isMexican 是什么？我的在线搜索被证明是徒劳的。

[http://msdn.microsoft.com/en-us/library/global.checkpower.aspx](http://msdn.microsoft.com/en-us/library/global.checkpower.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T17:55:33.217

这与 Dynamics AX 如何将数字货币值转换为文本有关。

尝试使用以下内容在 AOT 中创建一个新作业：

```
static void Job1(Args _args)
{
    info(Global::numeralsToTxt_ES(120000.45,GenderMaleFemale::Female,0,"MXN",1,0));
} 
```

参数如下：

1.  货币金额
2.  性别
3.  附上（不确定）
4.  ISO 货币代码
5.  isMexican 布尔值
6.  isCheck 布尔值

当 isMexican = 1 时，它会输出以下结果：**Ciento veste mil 45/100**

isMexican = 0，它输出这个结果：**CIENTO VEINTE MIL con CUARENTA Y CINCO centimos**

所以基本上，这是一个将货币金额翻译成给定语言的文本格式化程序。一些语言或国家有他们希望书面形式出现的特定方式，布尔值会影响它。

CheckPower 方法是此逻辑的一部分，它递归调用自身以迭代给定货币（十亿、百万等）的所有幂，每次将正确的单词添加到货币字符串中。

# php - Symfony 1.4 style form field with errors

> ID：16074282
> 
> 赞同：0
> 
> 时间：2013-04-18T04:04:02.223
> 
> 标签：php, validation, symfony-1.4

I want to change the background color of my field when an error occurs.

In Java Struts, I can do something like this:

```
<s:textfield name="parameter" cssClass="normal_css_class" cssErrorClass="class_on_error" cssErrorStyle="style_on error"/> 
```

I want to be able to perform something like above. The tag renders the field cssErrorClass when the field parameter has errors. No more additional Javascript is required.

Currently I have the following (very dirty) code in my template:

```
<?php if($form['bill_to']->hasError()): ?>
  <?php echo $form['bill_to']->render(array('style' => 'background-color: red')) ?>
<?php else: ?>
  <?php echo $form['bill_to']->render() ?>
<?php endif; ?>
<?php echo $form['bill_to']->renderError() ?> 
```

The above code works but is there a way to implement it so that I just have to call:

```
<?php echo $form['bill_to']->render() ?> 
```

and it will then perform the setting of the styles? I'm thinking of overriding the render() method but I am not sure if it is the right approach.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:17:39.507

You can extend the sfWidgetFormSchemaFormatter class like this:

```
class sfWidgetFormSchemaFormatterCustom extends sfWidgetFormSchemaFormatter
{
    protected
        $rowFormat                  = "<div class=\"%row_class%\">%label% %field% %hidden_fields% %help%</div>",
        $helpFormat                 = "%help%",
        $errorRowFormat             = "",
        $errorListFormatInARow      = "\n%errors%\n",
        $errorRowFormatInARow       = "<span class=\"error\">%error%</span>\n",
        $namedErrorRowFormatInARow  = "%error%\n",
        $decoratorFormat            = "%content%";

    public function formatRow($label, $field, $errors = array(), $help = '', $hiddenFields = null)
    {
        $row = parent::formatRow(
            $label,
            $field,
            $errors,
            $help,
            $hiddenFields
        );

        return strtr($row, array(
            '%row_class%' => (count($errors) > 0) ? ' error' : '',
        ));
    }
}// decorator class 
```

and apply it to a form inside it's configure() method like this:

```
class myForm extends sfForm
{
    public function configure()
    {
        // ....

        $formatter = new sfWidgetFormSchemaFormatterCustom($this->widgetSchema);
        $this->widgetSchema->addFormFormatter('custom', $formatter);
        $this->widgetSchema->setFormFormatterName('custom');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:50:45.367

You may want to look into form formatters, see [http://www.symfony-project.org/api/1_4/sfWidgetFormSchemaFormatter](http://www.symfony-project.org/api/1_4/sfWidgetFormSchemaFormatter).

A formformatter object can be obtained with `$this->getWidgetSchema()->getFormFormatter()` when you are in the configure method of your sfForm.

# desire2learn - 获取请求的价分页

> ID：16074283
> 
> 赞同：1
> 
> 时间：2013-04-18T04:04:12.323
> 
> 标签：desire2learn, valence

我有几个关于分页的问题。

1.  可以强制分页吗？
2.  是否可以控制分页（例如请求 200 条记录的页面）？
3.  如果 1 和 2 的答案是否定的，那么发生分页时的阈值是多少？
4.  分页是否稳定（同一实体上相同数量的记录将始终分页或不分页）？

谢谢，

弗拉德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T13:02:16.457

1.  在特定的 API 调用中使用分页时会强制分页：无论它找到多少记录，该调用将始终以页面形式返回数据。对于默认不分页的调用，您不能请求分页。呼叫要么分页，要么不分页。

2.  您目前无法请求更改数据页的大小；对于使用页面的每个调用，分页集中每个页面中返回的记录数是固定的（*理论上*页面大小可以随每个此类调用而变化，实际上，它（当前）不会）。

3.  没有阈值：调用中的数据要么在分页结果集中返回，要么不返回。如果匹配结果的数量小于页面大小，则调用仍应返回分页结果集结构内的单个数据页面，并设置一个属性以指示没有更多数据页面可用。

4.  是的，它是稳定的：您可以相信带有分页结果的调用将始终返回分页结果，并且页面中返回的结果数量将保持不变（只要您的服务的产品版本不变：产品升级*可能会*改变分页结果中数据页的大小）。

您不应该编写无法应对页面大小变化或需要知道页面大小是多少的代码（因为可以在*不更改 API 合约版本的情况下*随新产品版本而变化），但可以安全地编写代码，假设 API 调用*A*的返回将始终被分页（如果文档说它返回分页结果）。

# sql - 如果条件sql的case之间存在语句

> ID：16074287
> 
> 赞同：1
> 
> 时间：2013-04-18T04:05:26.387
> 
> 标签：sql, case

在我的存储过程的中间，我有以下代码片段：

```
case
  when l.codeleasestatuscode = '5' and priorleaseid is null 
  and l.leaid in(select col1 from Waitlisthousehold)
then '2'
else l.codeleasestatuscode
end 
```

但是，我必须从 Waitlisthousehold 表中进行选择的最终条件存在问题。并非所有数据库都有该表。所以我希望在表存在时包含最后一个条件。但是当我尝试这样做时出现错误：

```
case
when l.codeleasestatuscode = '5' and priorleaseid is null
IF EXISTS(select * from information_schema.tables where table_name='WaitlistHousehold')
  begin
    and l.leaid in(select col1 from Waitlisthousehold)
  end
then '2'
else l.codeleasestatuscode
end 
```

那么我该如何正确地做到这一点呢？

此代码段位于 from 语句中（从 table1 a join table2 b on a.id=b.id and case when..）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T04:39:29.730

您可以在您的子句中使用另一种情况来检查表是否存在

```
CASE
WHEN l.codeleasestatuscode = '5' and priorleaseid is null
    CASE WHEN EXISTS(SELECT * FROM information_schema.tables WHERE table_name='WaitlistHousehold')
        THEN
            CASE WHEN l.leaid in(select col1 from Waitlisthousehold) THEN '2' 
            ELSE l.codeleasestatuscode END
        ELSE '2' END          
    THEN '2'END
ELSE l.codeleasestatuscode
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:17:59.247

您不能像这样在 select 语句中添加 if 。你可以这样做：

```
IF EXISTS(select * from information_schema.tables where table_name='WaitlistHousehold')
  BEGIN
  SELECT whatever,
  case
  when l.codeleasestatuscode = '5' and priorleaseid is null
    and l.leaid in(select col1 from Waitlisthousehold)
  then '2'
  else l.codeleasestatuscode
  end AS whatever1
  FROM wherever
  END
ELSE
  BEGIN
  SELECT whatever,
  case
  when l.codeleasestatuscode = '5' and priorleaseid is null
  then '2'
  else l.codeleasestatuscode
  end AS whatever1
  FROM wherever
  END 
```

# javascript - jQuery slideToggle 回调函数和toggleclass

> ID：16074291
> 
> 赞同：1
> 
> 时间：2013-04-18T04:06:03.463
> 
> 标签：javascript, jquery

HTML

```
<div class="a">
    <div class="b">CLICK</div>
    <div class="c"></div>
</div>
<div class="a">
    <div class="b">CLICK</div>
    <div class="c"></div>
</div>
<div class="a">
    <div class="b">CLICK</div>
    <div class="c"></div>
</div> 
```

jQuery

```
$('.c').hide();
$('.b').click(function(){
    $(this).next('.c').fadeToggle();

    if($('.b').eq(0).is(this)){
    $(this).toggleClass('yellow');
}
}); 
```

**[在线样本](http://jsfiddle.net/nMskf/)**

我如何制作一次`slideToggle`完成然后开始`toggleclass`，就像第一个盒子一样，我希望它在 fadeToggle 完成后变为黄色

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T04:09:00.647

您可以使用`fadeToggle`的回调函数：

工作演示：http: [//jsfiddle.net/Kqc2B/](http://jsfiddle.net/Kqc2B/)

```
$('.b').click(function () {
    var that = this;
    $(this).next('.c').fadeToggle(function() {
        if ( $('.b').eq(0).is(that) ) {
            $(that).toggleClass('yellow');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:09:33.173

您可以使用[fadeToggle](http://api.jquery.com/fadeToggle/)提供的完整回调选项，一旦动画完成，它将被调用

```
$('.c').hide();
$('.b').click(function(){
    var $this = $(this);
    $this.next('.c').fadeToggle(function(){
        if($('.b').eq(0).is($this)){
            $this.toggleClass('yellow');
        }
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/XXGvP/)

# jms - 异常后骡子不回滚JMS消息

> ID：16074295
> 
> 赞同：0
> 
> 时间：2013-04-18T04:06:32.870
> 
> 标签：jms, mule

我的流程使用基于 cron 表达式的消息，并且我特意添加了一个 groovy 代码来抛出异常以测试 JMS 回滚。回滚不会将已使用的消息返回到队列中。我在这里错过了什么吗？

这是 mule 流，它应该在遇到异常后回滚 mule 消息。

```
<jms:activemq-connector name="jmsConnector" specification="1.1" brokerURL="tcp://localhost:61616" />
<jms:endpoint name="testqueue" queue="test.queue" connector-ref="jmsConnector" />

<flow name="quartzBasedDelivery">
    <quartz:inbound-endpoint jobName="deliveryJob" cronExpression="0 0/1 * * * ?">
        <quartz:endpoint-polling-job>
            <quartz:job-endpoint ref="testqueue" />
        </quartz:endpoint-polling-job>
    </quartz:inbound-endpoint>
    <logger message="QUARTZ found message for delivery #[payload]" level="INFO" />
    <scripting:component>
               <scripting:script engine="groovy">
                    throw new java.lang.RuntimeException();
                </scripting:script>
    </scripting:component>
    <file:outbound-endpoint path="/test/out" outputPattern="message-[function:dateStamp].txt" />
    <logger message="Message deliverd" level="INFO" />
</flow>

<flow name="copyFile">
    <file:inbound-endpoint  path="/test/in"/>
    <byte-array-to-string-transformer /> 
    <logger message="COPYFILE found message for test queue #[payload]" level="INFO" />
    <jms:outbound-endpoint queue="test.queue"/> 
</flow> 
```

这是此流程引发的异常 -

```
 Exception stack is:
1\. null (java.lang.RuntimeException)
  sun.reflect.NativeConstructorAccessorImpl:-2 (null)
2\. java.lang.RuntimeException (javax.script.ScriptException)
  org.codehaus.groovy.jsr223.GroovyScriptEngineImpl:323 (http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/script/ScriptException.html)
3\. Failed to invoke ScriptComponent{quartzBasedDelivery.component.559022270}. Component that caused exception is: ScriptComponent{quartzBasedDelivery.component.559022270}. Message payload is of type: String (org.mule.component.ComponentException)
  org.mule.component.AbstractComponent:148 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/component/ComponentException.html)
********************************************************************************
Root Exception stack trace:
java.lang.RuntimeException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T12:49:02.750

在您的情况下，JMS 消息不会由 a 重新传递到原始队列，`Rollback Exception Strategy`因为您有一个`Quartz`入站端点，它不是事务性的或可靠的。您可以配置一个`Catch Exception Strategy`并明确地重新传递消息。请注意这些情况，因为您可以创建无限循环。

来源： [回滚异常策略](http://www.mulesoft.org/documentation/display/current/Rollback+Exception+Strategy)

高温高压

# c++ - 用户输入字符串流，然后需要转换成字符串传入函数参数

> ID：16074297
> 
> 赞同：0
> 
> 时间：2013-04-18T04:06:52.693
> 
> 标签：c++, string, stringstream

我试图向用户询问字符串流，然后将其转换为字符串，以便我可以将其传递给函数参数。我怎样才能做到这一点 ？：

```
string Nm;
stringstream ss;
cout << " Please enter where the charge was made " << endl;
                 cin >> Nm;
                 ss.str();
                 cca.doCharge(Nm); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:24:24.057

您是要求将实际流传递给函数还是字符串？以下通过流：

```
std::string str;
std::stringstream ss;

std::getline(std::cin, str);
ss.str( str );

cca.doCharge(ss); 
```

这传递了字符串：

```
cca.doCharge(str); 
```

# sql - SQL Server：奇怪的执行计划

> ID：16074306
> 
> 赞同：2
> 
> 时间：2013-04-18T04:07:23.380
> 
> 标签：sql, sql-server, sql-server-2008

我有一些在 SQL Server 2008 Standard 上运行的 ETL 代码。处理相对少量的行（约 50,000 行）并将其加载到临时表中。然后我执行插入查询以复制更大的表中不存在的行（~1,000,000+ 行）。临时表包含与目标表相同的主键和聚集索引。

```
create table #NewClaims(ExtractDate datetime, SiteName nvarchar(50), SiteCd nvarchar(50), ContractTypeCd nvarchar(50), 
ClaimRateType nvarchar(50), ClaimRateTypeCd nvarchar(50), ClaimStatus nvarchar(50), ClaimStatusCd nvarchar(50), 
CreationDt datetime, StatusDt datetime, ClaimID nvarchar(50), SeqNum int, CreationUserID nvarchar(50), 
SpecialClaimInd nvarchar(50), JobSeekerID nvarchar(50), InvoiceNum nvarchar(50), JobID nvarchar(50), JobRefId int,
RecoveryReason nvarchar(50), ClaimAmount money, GSTAmount money, ApprovedAmount money, ClaimCurrencyInd nvarchar(50), 
EmployerID nvarchar(50), BaseRateType nvarchar(50), BaseRateTypeCd nvarchar(50)
constraint PK_NewClaims primary key clustered(ClaimID, ClaimStatusCD)); 
```

这是将临时表记录加载到目标中的 SQL

```
insert into dbo.Claim(
ExtractDate, SiteName, SiteCd, ContractTypeCd, ClaimRateType, ClaimRateTypeCd, ClaimStatus, ClaimStatusCd, CreationDt, 
StatusDt, ClaimID, SeqNum, CreationUserID, SpecialClaimInd, JobSeekerID, InvoiceNum, JobID, JobSeqNum, RecoveryReason, 
ClaimAmount, GSTAmount, ApprovedAmount, ClaimCurrencyInd, EmployerID, BaseRateType, BaseRateTypeCd
)
select 
n.ExtractDate,  n.SiteName, n.SiteCd, n.ContractTypeCd, n.ClaimRateType, n.ClaimRateTypeCd, n.ClaimStatus, n.ClaimStatusCd, 
n.CreationDt, n.StatusDt, n.ClaimID, n.SeqNum, n.CreationUserID, n.SpecialClaimInd, n.JobSeekerID, n.InvoiceNum, n.JobID, 
n.JobRefId, n.RecoveryReason, n.ClaimAmount, n.GSTAmount, n.ApprovedAmount, n.ClaimCurrencyInd, n.EmployerID, n.BaseRateType, 
n.BaseRateTypeCd
from #NewClaims as n
left join dbo.Claim as c on n.ClaimID = c.ClaimID and n.ClaimStatusCd = c.ClaimStatusCd
where c.ClaimID is null 
```

当我运行它时，执行计划会做一些不寻常的事情。它拒绝使用 dest 表上的 PK 聚集索引，并尝试使用**任何其他**可用的索引。奇怪的是，它使用这个索引来检索 ClaimID 和 StatusCd。如果我一个一个地禁用 dest 表上的索引，执行计划将继续尝试使用其他索引，直到我禁用除集群之外的所有索引，此时它最终放弃并使用它，但会产生一堆位图操作。发生这种情况时查询运行得更快。

我还尝试添加索引提示：with (index(1))。这个提示使它像我预期的那样工作，使用索引并且运行速度比非提示版本快得多。强制索引查找在执行计划中显示标量运算符 - 这是否表明存在问题？

```
Seek Keys[1]: Prefix: [ESD4].[dbo].[Claim].ClaimID, [ESD4].[dbo].[Claim].ClaimStatusCd = Scalar Operator([tempdb].[dbo].[#NewClaims].[ClaimID] as [n].[ClaimID]), Scalar Operator([tempdb].[dbo].[#NewClaims].[ClaimStatusCd] as [n].[ClaimStatusCd]) 
```

有什么我想念的吗？我不喜欢强制 SQL 使用特定的执行计划，因为索引提示通常会适得其反。

**更新**

*   重新计算表统计信息没有帮助
*   从左连接更改为“不存在的地方”不会影响所用索引的选择，但它确实稍微改变了计划。而不是哈希匹配（左连接），它现在正在做哈希匹配（左反半连接），这可能更快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T18:59:19.917

没有更多信息很难说，但你可以测试一下。有时，获取要插入表变量 (@PKIDs) 的 PK ID 的输出可能会更快，然后在更新语句中使用“select ... from #newClaims inner join @PKIDs”。没有计划和数据集很难说，但也许在你的情况下它会有所帮助。如果你内连接，你可以使用 PK 的索引提示。#NewClaims 表也可能只需要 ClaimID 和 ClaimStatusCd 的 PK，从而减少构建 #NewClaims 的时间。

```
declare @PKIDs table (ClaimID INT PRIMARY KEY)

insert into @PKIDs (ClaimID)
select distinct n.ClaimID
from #NewClaims as n
where not exists (select 1 from dbo.Claim as c where c.ClaimID = n.ClaimID and n.ClaimStatusCd = c.ClaimStatusCd)

insert into dbo.Claim(
ExtractDate, SiteName, SiteCd, ContractTypeCd, ClaimRateType, ClaimRateTypeCd, ClaimStatus, ClaimStatusCd, CreationDt, 
StatusDt, ClaimID, SeqNum, CreationUserID, SpecialClaimInd, JobSeekerID, InvoiceNum, JobID, JobSeqNum, RecoveryReason, 
ClaimAmount, GSTAmount, ApprovedAmount, ClaimCurrencyInd, EmployerID, BaseRateType, BaseRateTypeCd
)
select 
n.ExtractDate,  n.SiteName, n.SiteCd, n.ContractTypeCd, n.ClaimRateType, n.ClaimRateTypeCd, n.ClaimStatus, n.ClaimStatusCd, 
n.CreationDt, n.StatusDt, n.ClaimID, n.SeqNum, n.CreationUserID, n.SpecialClaimInd, n.JobSeekerID, n.InvoiceNum, n.JobID, 
n.JobRefId, n.RecoveryReason, n.ClaimAmount, n.GSTAmount, n.ApprovedAmount, n.ClaimCurrencyInd, n.EmployerID, n.BaseRateType, 
n.BaseRateTypeCd
from #NewClaims as n
join @PKIDs as pkids on pkids.ClaimID = n.ClaimID 
```

# android - jsonException:End of input at character 1 of

> ID：16074315
> 
> 赞同：-1
> 
> 时间：2013-04-18T04:08:10.123
> 
> 标签：android

![End of input at character 1 of](https://i.stack.imgur.com/s7m4O.jpg)

im making a listview and using JSONObject for array purposes but im getting this error i dont know how to fix it i dont even know where my exception takes place when i run my program it simply end and doesnt not show any result this is my java file i hope someone can find the exception

```
@Override
            protected ArrayList<TodayDetails> doInBackground(Void... params) {
                    try {
                            // Create a new HTTP Client
                            DefaultHttpClient defaultClient = new DefaultHttpClient();
                            // Setup the get request
                            HttpGet httpGetRequest = new HttpGet("http://api.androidhive.info/contacts");

                            // Execute the request in the client
                            HttpResponse httpResponse = defaultClient
                                            .execute(httpGetRequest);
                            // Grab the response
                            BufferedReader reader = new BufferedReader(
                                            new InputStreamReader(httpResponse.getEntity()
                                                            .getContent(), "UTF-8"));
                            String result = reader.readLine();
                            JSONObject object = new JSONObject(result);
                            JSONArray Jarray = object.getJSONArray("contact");
                            for (int i = 0; i < Jarray.length(); i++) {
                               JSONObject Jasonobject = Jarray.getJSONObject(i);

                                    today_details = new TodayDetails();
                                    today_details.setId(Jasonobject.getInt("id"));
                                    today_details.setName(Jasonobject.getString("name"));
                                    today_details.setEmail(Jasonobject.getString("email"));
                                    today_details.setAddress(Jasonobject.getString("address"));
                                    today_details.setGender(Jasonobject.getString("gender"));
                                    today_details.setPhone(Jasonobject.getInt("phone"));
                                    today_details.setHome(Jasonobject.getInt("home"));
                                    today_details.setMobile(Jasonobject.getInt("mobile"));
                                    today_details.setOffice(Jasonobject.getInt("office"));

                                    search_results.add(today_details);
                       }
        } catch(Exception e){
           e.printStackTrace();
        }
        return search_results;
    }
    protected void onPostExecute(ArrayList<TodayDetails> search_results) {
        if(WeatherToday.this.pd != null){
            WeatherToday.this.pd.dismiss();
        }
        ArrayList<TodayDetails> today_details = search_results;
        list_view_main = (ListView)findViewById(R.id.todaylist);
        list_view_main.setAdapter(new TodayListAdapter(getApplicationContext(), today_details));
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:26:56.467

**SANITARY CHECK** When working with JSON

Check for an error on the JSON side. This is a useful link for json validation.

[Jsonlint](http://www.jsonlint.com)Try this link to validate your JSON,JUST COPY/PASTE YOUR JSON and check if its valid or not

If its valid then post it over here , may be then will be able to help you more.

If Its not Valid...Well then everything will just be fine :-)

**CODE CHECK**

1.  Add the complete json by reading it line by line into a StringBuilder
2.  Call toString and pass the resulting JSOn as a String to the JSONObject obj=new JsonObject(String) function.
    1.  So Now if you get an exception then something bad in your json check it via the above mention link.
    2.  If it works fine , then iterate the jsonObject for the array , array of object or whatever.

I hope you'll find this useful

# Update

Using the Gson library is quite useful as json gets bigger.It handles every thing for you.Abstract in nature, and provides some static method for you to retrieve the json or make one.

Here's a gist of a programs that i made for json parsing using Gson library.

[Gson demo programs](https://gist.github.com/raul1991/bad859e48c60f9e3fc62)

# Help articles

[Blog help](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)

[Gson Official](http://code.google.com/p/google-gson/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:12:16.647

The first thing I can see is that you want "contacts" not "contact":

```
 JSONArray Jarray = object.getJSONArray("contact"); 
```

From:

```
{
"contacts": [
    {
            "id": "c200", 
```

And none of that weather stuff is in that JSON either. So obviously there are many things that can fail.

*EDIT*: I see you got rid of the weather bits. Heh

*EDIT 2*: However, it seems like whatever is printing that logcat output DOES care about the weather.

*EDIT 3*: You're reading *just one line* of the JSON, which is `{`. That's not proper JSON. Read the full output.

```
 String result = reader.readLine(); 
```

# c# - System.Threading.Timer 未触发

> ID：16074329
> 
> 赞同：0
> 
> 时间：2013-04-18T04:09:29.060
> 
> 标签：c#, timer

在 DLL 中，我有一个类用于`System.Threading.Timer`定期执行特定方法。我在我的 WINFORM 应用程序中使用这个 DLL，但计时器没有触发。

即使我维护对此计时器的引用，它也只执行一次。

关于为什么这个计时器不起作用的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:19:22.790

您要么需要将 AutoReset 属性设置为 true，要么每次经过时再次调用 Start()。

# java - 可编辑的 JCombobox 和按键监听器

> ID：16074334
> 
> 赞同：-1
> 
> 时间：2013-04-18T04:10:24.950
> 
> 标签：java, swing, jdbc, autocomplete, jcombobox

如何在 jcombobox 中添加关键事件侦听器，以便它接受整个字符串作为 ex。如果我添加“S”，它应该在数据库中搜索以“s”开头的字符串。如果没有结果，那么它应该等待用户在组合框中键入其他字符以获得类似的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:35:47.387

您可以选择自己实现它，也可以使用`Java2sAutoTextField`or `Java2sAutoComboBox`。它们都易于使用。
您只需提供一个`java.util.List<>`包含从数据库中提取的数据的数据，它就会为您完成自动完成的任务。
为了更好地了解，请在此处查看我的问题：[Implementing auto complete in Java - 我做得对吗？](https://stackoverflow.com/questions/14849176/implementing-auto-complete-in-java-am-i-doing-it-right)

您还可以选择使用[GlazedLists](http://www.glazedlists.com/documentation/tutorial)
我相信我已经充分回答了您的问题 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:14:05.190

Check if this helps-

```
 comboBox.addKeyListener(new KeyAdapter() {
        @Override
        public void keyReleased(KeyEvent ke) {
            // get the text typed and search for it
            // get the text from combo box, and not from the key event
        }
    }); 
```

# unix - 试图返回一个简单的 echo 语句

> ID：16074339
> 
> 赞同：1
> 
> 时间：2013-04-18T04:11:19.340
> 
> 标签：unix, if-statement, echo

我想输出“您还没有输入文件”。

如果用户在调用 Unix 脚本后没有输入任何内容，他们将收到该错误消息。

```
for var in "$@"
do

file=$var

if [ $# -eq 0 ]
then
   echo "You have not entered a file"
elif [ -d $file ]
then
   echo "Your file is a directory"
elif [ -e $file ]
then
   sendToBin
else
  echo "Your file $file does not exist"
fi 
```

我无法弄清楚到底出了什么问题，我相信这是我的第一个 if 语句

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:22:30.623

我会这样重写：

```
#!/bin/bash

if (( $# == 0 )); then
    echo "You have not entered a file"
else
    for file in "$@"; do
        if [ -d "$file" ]; then
            echo "Your file is a directory"
        elif [ -e "$file" ]; then
            echo sendToBin "$file"
        else
            echo "Your file $file does not exist"
        fi
    done
fi 
```

要点：

*   脚本的结构应该是首先检查是否传递了任何参数。如果没有，请打印适当的消息。否则处理每个参数。所以做一个`if ... else for ...`。

*   对于算术，我使用[算术评估](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Arithmetic)。该手册对所有这些都可以在哪里使用感到困惑，但是您可以这样做`if (( ... ))`并且也可以使用 C-style `for (( i = 0; i < n; i++ ))`。

*   `$file`始终用引号括起任何变量： `"$file"`. 如果文件名中有空格这样简单的东西，否则它将中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:25:24.423

`$#`仅在对位置参数进行循环的 a 中运行检查`for`- 也就是说，由于循环，只有在非零`[ $# -gt 0 ]`时才会运行。`$#`尝试将检查移出循环。

（另外，你的大部分`$file`s 应该被引用（`"$file"`）。）

# wordpress - Apache多虚拟主机用户权限

> ID：16074343
> 
> 赞同：0
> 
> 时间：2013-04-18T04:11:41.010
> 
> 标签：wordpress, apache, permissions

我安装了 webmin，我在其中创建新的虚拟主机和新用户来管理这些站点。

我的流程是：

1.  创建一个新用户。(/home/用户名/)
2.  以新用户身份登录 SSH，并创建一个 webroot 文件夹 (/home/nameofuser/www/)
3.  创建一个指向该 webroot 的虚拟主机 (home/nameofuser/www/)

问题在于 apache www-data 用户不是文件的所有者。但是，如果我让 webmin 为我创建 webroot，用户/组将变为 www-data:www-data 但新用户无法创建文件/文件夹。

为什么这是一个问题的一个例子是，当我尝试安装 wordpress 时，它无法安装插件或创建日志文件等文件。

我应该如何在我的 webroot 文件夹上和/或内部设置权限

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:32:35.917

在上述情况下，最简单的方法是将需要访问 Webmin 创建的文件夹/文件的所有用户添加到 www-data 组，您可能必须为用户目录提供 664。这应该可以解决访问问题，但是如果列表的用户增长，因此对 webroot 的访问权限也在增长。vhosts 和多用户的真正解决方案是 [apache2-mpm-itk](http://mpm-itk.sesse.net/)这是一个更好的解决方案，但需要一点阅读。

# c++ - 如何将欧拉角转换为前、上、右向量

> ID：16074344
> 
> 赞同：4
> 
> 时间：2013-04-18T04:11:44.093
> 
> 标签：c++, opengl, 3d, glm-math

我需要一个给定 Yaw、Pitch 和 Roll 的函数，可以在“世界坐标”中生成 Front（或 Look At）、Right 和 Up 向量。

在我的特定世界空间中，从原点 (0,0,0) 开始，X 向左为正，Z 为远离观察者/原点的正数，Y 为向上正数。

例如，给定...（以度为单位的角度）

*   yaw=0，pitch=0，roll=0，预期输出为：

    *   前面 = (0.0,0.0,1.0)
    *   对 = (-1.0,0.0,0.0)
    *   向上 = (0.0,1.0,0.0)
*   yaw=90，pitch=0，roll=0，预期输出为：

    *   前面 = (1.0,0.0,0.0)
    *   对 = (0,0,0.0,1.0)
    *   向上 = (0.0,1.0,0.0)
*   yaw=0，pitch=90，roll=0，预期输出为：

    *   前面 = (0.0,1.0,0.0)
    *   对 = (-1.0,0.0,0.0)
    *   向上 = (0.0,0.0,-1.0)
*   yaw=0，pitch=0，roll=90，预期输出为：

    *   前面 = (0.0,0.0,1.0)
    *   右 = (0.0,1.0,0.0)
    *   向上 = (1.0,0.0,0.0)

我正在使用的语言是 C++，如果最有意义的话，我很乐意使用 glm 来解决这个问题。如果我可以通过四元数到达那里，我也可以使用该解决方案，因为我发现了其他教程，这些教程描述了如何从欧拉角获得四元数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:21:11.653

这是一个完整的工作示例。它不是很像 C++。您可能想要使用真正的矩阵类，但出于演示目的应该没问题。从您的问题中不清楚的一件事是轮换顺序，但这很容易改变。

```
#include <iostream>
#include <cmath>
#include <cstdlib>

typedef float Float;
typedef Float Axis[3];
typedef Axis Axes[3];

static void copy(const Axes &from,Axes &to)
{
  for (size_t i=0; i!=3; ++i) {
    for (size_t j=0; j!=3; ++j) {
      to[i][j] = from[i][j];
    }
  }
}

static void mul(Axes &mat,Axes &b)
{
  Axes result;
  for (size_t i=0; i!=3; ++i) {
    for (size_t j=0; j!=3; ++j) {
      Float sum = 0;
      for (size_t k=0; k!=3; ++k) {
        sum += mat[i][k]*b[k][j];
      }
      result[i][j] = sum;
    }
  }
  copy(result,mat);
}

static void getAxes(Axes &result,Float yaw,Float pitch,Float roll)
{
  Float x = -pitch;
  Float y = yaw;
  Float z = -roll;
  Axes matX = {
    {1,     0,     0 },
    {0, cos(x),sin(x)},
    {0,-sin(x),cos(x)}
  };
  Axes matY = {
    {cos(y),0,-sin(y)},
    {     0,1,      0},
    {sin(y),0, cos(y)}
  };
  Axes matZ = {
    { cos(z),sin(z),0},
    {-sin(z),cos(z),0},
    {      0,     0,1}
  };
  Axes axes = {
    {1,0,0},
    {0,1,0},
    {0,0,1}
  };

  mul(axes,matX);
  mul(axes,matY);
  mul(axes,matZ);

  copy(axes,result);
}

static void showAxis(const char *desc,const Axis &axis,Float sign)
{
  std::cout << "  " << desc << " = (";
  for (size_t i=0; i!=3; ++i) {
    if (i!=0) {
      std::cout << ",";
    }
    std::cout << axis[i]*sign;
  }
  std::cout << ")\n";
}

static void showAxes(const char *desc,Axes &axes)
{
  std::cout << desc << ":\n";
  showAxis("front",axes[2],1);
  showAxis("right",axes[0],-1);
  showAxis("up",axes[1],1);
}

int main(int,char**)
{
  Axes axes;
  std::cout.setf(std::ios::fixed);
  std::cout.precision(1);
  getAxes(axes,0,0,0);
  showAxes("yaw=0, pitch=0, roll=0",axes);
  getAxes(axes,M_PI/2,0,0);
  showAxes("yaw=90, pitch=0, roll=0",axes);
  getAxes(axes,0,M_PI/2,0);
  showAxes("yaw=0, pitch=90, roll=0",axes);
  getAxes(axes,0,0,M_PI/2);
  showAxes("yaw=0, pitch=0, roll=90",axes);
  return 0;
} 
```

# google-cloud-storage - Windows 7x64 Professional 上的 gsutil 错误

> ID：16074345
> 
> 赞同：0
> 
> 时间：2013-04-18T04:11:54.557
> 
> 标签：google-cloud-storage

**Windows 7x64 专业版**

gsutil 错误：

```
C:\Users\Chris>gsutil.py ls
Failure: invalid literal for int() with base 10: ''. 
```

我已经根据安装 gsutil 文档验证了所有设置。

我做错了什么，或者安装文档有什么问题需要更正以使其正常工作？

**Python版本：2.7.4**

***编辑：***

这是 gsutil 调试开关的输出：

```
C:\>python C:\gsutil\gsutil -D ls
***************************** WARNING *****************************
*** You are running gsutil with debug output enabled.
*** Be aware that debug output includes authentication credentials.
*** Do not share (e.g., post to support forums) debug output
*** unless you have sanitized authentication tokens in the
*** output, or have revoked your credentials.
***************************** WARNING *****************************
Traceback (most recent call last):
File "C:\gsutil\gsutil", line 72, in <module>
gslib.__main__.main()
File "C:\gsutil\gslib\__main__.py", line 151, in main
  command_runner.RunNamedCommand('ver')
File "C:\gsutil\gslib\command_runner.py", line 92, in RunNamedCommand
  if self._MaybeCheckForAndOfferSoftwareUpdate(command_name, debug):
File "C:\gsutil\gslib\command_runner.py", line 160,
  in_MaybeCheckForAndOfferSoftwareUpdate
last_checked_ts = int(f.readline())
ValueError: invalid literal for int() with base 10: '' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:53:21.700

您能否尝试使用以下命令运行 gsutil：

```
python gsutil ls 
```

（此外，您似乎将主 gsutil 脚本重命名为 gsutil.py。当然欢迎您随意更改代码，但在寻求支持时，我们需要您使用分布式 gsutil，无需重命名或其他修改.)

如果您在如上所述运行时仍然存在问题，请将以下输出发送给我们：

```
python gsutil -D ls 
```

执行此操作时，请编辑输出中“授权：”标题的值。

谢谢，

Mike Schwartz，谷歌云存储团队

# php - 搜索字符串用数组的值替换单词

> ID：16074347
> 
> 赞同：0
> 
> 时间：2013-04-18T04:12:00.097
> 
> 标签：php, arrays, string

这个想法是在字符串中搜索某些单词并根据特定数组将它们更改为其他内容。让我告诉你我的意思。

```
$string = "hello buddy, I'm your friend or maybe a fellow"; 
```

让我们说`friends`是一个发誓的词。我想把这个词改成我想要的。所以我做了这个：

```
$swears = array(
"friend" => "fri**d",
"buddy"  => "bu**y",
"fellow" => "fe**ow"
); 
```

我想根据数组的键搜索字符串并将其替换为它的值。我确实在网上搜索过，我得到的只是根据数组键替换数组中的值。所以在尝试之后我想出了这个：

```
$string = "hello buddy, I'm your friend or maybe a fellow";  

$swears = array(
"friend" => "fri**d",
"buddy"  => "bu**y",
"fellow" => "fe**ow"
);

$foreach  = $string; 
foreach($swears as $bad => $good){
$foreach       = str_replace($bad,$good,$foreach);
$filtered =  $foreach;
 }
echo $filtered; 
```

我知道它有效，但有没有一种简单的方法让我觉得我把整个事情复杂化了。如果我很好，是否可能会导致问题，如果我有大字符串，或者需要时间来处理它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T04:14:17.150

[`str_replace`](http://php.net/manual/en/function.str-replace.php)可能会提供`array`搜索词和替换词`array`：

```
<?php
$string = "hello buddy, I'm your friend or maybe a fellow";

$swears = array(
    "friend" => "fri**d",
    "buddy"  => "bu**y",
    "fellow" => "fe**ow"
);

echo str_replace(array_keys($swears), array_values($swears), $string);
?> 
```

显示：

```
hello bu**y, I'm your fri**d or maybe a fe**ow 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:33:18.140

问题是您选择将单词和替换作为键和值放在一个数组中。更简单的方法是使用 2 个索引数组。

```
$words = array( 'friend', 'buddy', 'fellow' );
$replacements = array( 'fri**nd', 'bu**dy', 'fe**ow' );

$result = str_replace( $words, $replacements, $yourString ); 
```

这样您就不必使用`array_keys`.

如果您绝对想将搜索/替换存储在关联数组中，在这种情况下不要使用`str_replace`和使用`strtr`：

```
$swears = array(
    "friend" => "fri**d",
    "buddy"  => "bu**y",
    "fellow" => "fe**ow"
);

$filtered = strtr($string, $swears); 
```

# html - 内容可编辑的文本编辑器

> ID：16074358
> 
> 赞同：12
> 
> 时间：2013-04-18T04:12:46.103
> 
> 标签：html, wysiwyg, contenteditable

我已经尝试了几个 HTML 编辑器，包括 TinyMCE、CKEditor 和现在的 NicEdit。NicEdit 在一个方面很好——它很容易定制。但是，我发现它们都倾向于生成非常糟糕的 HTML。不一定是这样，而是因为它们在正确解释无效的用户操作方面做得并不多，例如在没有首先做出选择的情况下尝试设置样式。

以包含类似内容的 HTML 结尾太容易了

```
<span style='color:#ff0000'><span style='color:#ff0000'><span style='color:#ff0000'>Red</span></span></span> 
```

我是否认为这几乎是内容可编辑概念的限制？如果目的是电子邮件或论坛上的帖子，那么糟糕的 HTML 并不重要，但如果生成的 HTML 必须在网页的上下文中使用，那么它就会变得相当不舒服。如果所有这些都是正确的，还有哪些选择？也许是基于 Flash 的插件编辑器，它可以生成更好的 HTML 并更努力地解释用户想要做什么？

我认为原则上可以研究生成的输出并在需要时清除六角形跨度之间的所有内容，但这可能是一项艰巨的任务。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-18T14:32:28.630

一开始我应该提到我是一个CKEditor核心开发人员，因此我的意见可能并不完全客观:)。

HTML 编辑 AFAIK 的状态在过去几年没有改变。浏览器供应商几乎没有花时间修复错误 - 时间如此之少，以至于[CKEditor trac](http://dev.ckeditor.com)上由浏览器问题引起的大多数最古老的错误仍然有效，而且我们创建的大多数 hack 仍然需要。我不仅仅指我们仍然支持的 IE 7 或 8，因为事实上 IE 可能不是最差的。我没有准确地检查过，但我认为由于最近 IE 版本中对 DOM API 的全面改进，它们可能比其他浏览器需要更少的 hack，因为它的编辑支持似乎是最稳定和最完整的。例如，Webkit 浏览器需要最丑陋的 hack（请参阅：[Webkit 错误](https://bugs.webkit.org/show_bug.cgi?id=15256)和[已关闭的 CKEditor 票证](http://dev.ckeditor.com/ticket/1272)），这个错误已有**5 年历史**. 更重要的是 - 这不是边缘情况或不太可能的情况 - 这个问题使得创建整个选择范围成为不可能 - 例如在空的内联元素 IIRC 内。

因此，与一般的 Web 技术不同，HTML 编辑站在 10 年前的位置。相同的错误，相同的缺失功能，相同的...标记。猜猜这个`fontName`命令创建了什么？`<font face="">`- 是的，不是开玩笑。至少浏览器在这里非常一致......但是一致性很快就消失了。

规格呢？有一个[草案](https://dvcs.w3.org/hg/editing/raw-file/tip/editing.html)，但它根本没有帮助 - 它只是标准化当前状态，我们知道这看起来不太好。和 AFAICS，草案已经死了。

还有一件事让我担心——剪辑的方向。Google`contenteditable`在 Gmail 中使用（不，Google Docs 不是基于`contenteditable`），所以它不关心 HTML 输出。Apple 在他们的 iOS 电子邮件应用程序和 MacOS 邮件应用程序中重用了 HTML 编辑组件（因为我看到了相同的特定行为）。Mozilla 在 Thunderbird 中重用 Gecko，如果 Microsoft 在 Outlook 中也这样做，我不会感到惊讶。他们都不关心 HTML 输出。这些引擎是用来理解每一个废话而不是修复它，而 HTML 编辑草案就是关于它的。

多亏了这一切，我们才能看到像[这样的](http://dev.ckeditor.com/ticket/9998)**新**问题。在[Blink/Webkit 错误报告](https://code.google.com/p/chromium/issues/detail?id=226941)中，我总结了按下退格键时所有不正确的结果（来自我们的 POV - 关心 HTML 的开发人员）。它被设计成看起来不错（虽然它不是），但 HTML 和编辑 API 并不重要。

## 我不在乎这个。我需要一个编辑器！

所有这些的解决方案是在浏览器之后修复所有内容和/或用我们自己的替换它们的本机实现。在过去的 1.5 年里，我几乎一直致力于过滤和规范化输入和输出。在 CKEditor 4.0 中，我们重写了整个粘贴和 HTML 插入过程，在最近发布的 CKEditor 4.1 中，我们引入了[高级内容过滤器](http://docs.ckeditor.com/#!/guide/dev_advanced_content_filter)，它使输入数据适应编辑器配置。因此，启用的功能越少，HTML 中允许的功能就越少。检查[此示例](http://nightly.ckeditor.com/13-04-18-07-42/standard/samples/datafiltering.html)- 尝试粘贴/编写/创建糟糕的 HTML。

当然，还有改进的余地。例如，我们无法在编辑期间立即过滤数据。如果浏览器（如 Webkit）造成混乱，我们可以在输出上修复它，但实际上我们还没有决定这样做，因为过滤是一个非常复杂的过程并且可能会破坏性能。我们限制输入和用户操作，因此有一天我们将实现自己的退格/删除处理程序，以防止浏览器弄乱我们的 HTML。这是唯一的解决方案，这就是为什么只有 2 或 3 个优秀的所见即所得编辑器的原因。

**无论如何，浏览器的 HTML 编辑实现几乎没有任何变化，但所见即所得的编辑器世界发生了很大变化。如果您根据几年前的经验，我建议您再次检查它们。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-11T14:08:54.233

花了很多时间试图找到确保我从所见即所得编辑器中获得生产级 HTML 的方法后，我想我应该在这里分享我的结果，以使遇到此线程的任何人受益。

非常简短的建议 - 不要浪费你的时间。内容可编辑编辑器永远不会交付任何接近生产级 HTML 的东西。像 Reinmar 这样的人已经做了很多工作来最小化这种情况，但是用户很容易将处理可编辑内容的底层浏览器代码扔到头上。

你最好使用 BBCode 标记。100% 防弹选项是让用户编辑 BBCode 并严格控制他/她在任何时候可以做什么。我已经在我自己的项目中做到了这一点，但是让非技术用户使用任何描述的标记的问题是一个棘手的问题。将您自己的所见即所得界面用于 BBCode 编辑是一项不可轻率的工作。[幸运的是，以SCEditor](http://www.sceditor.com/)的形式提供帮助。山姆在这里做得非常出色。请注意 - 由于 WYSIWYG 位仍然依赖于可编辑的内容，因此出现的内容仍可能包含一些“浓汤”位。但是，清理起来相对容易。

# php - checking json array with my value to do operation otherwise other operation

> ID：16074359
> 
> 赞同：0
> 
> 时间：2013-04-18T04:12:50.597
> 
> 标签：php, javascript, jquery

consider i have an json array like this

```
["map14","map20","map21","map22","map23","map24","map25","map31","map32","map33","map34","map35","map36","map37","map40","map41","map42","map46","map49","map50"]

```

with this json array i need to check if my passed value exists need to do some operation or otherwise some other operation....

javascript code:

```
function pop(e,id) { 
$.getJSON( 'layoutcheck.php', { some_get_var: 1 }, function(output){
    var i=0, total = output.length;
    for ( i = 0; i < total; ++i ) {
if(isArray(output[i]==id)) {

// do soome stuff if the value exists in the database
      }
else{
// if not exists some other operation
 }
    }
});
}
</script> 
```

layoutcheck.php will fetch the information from the database and create a json array..

but the code fails to display output.. please rectify me ..

thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:17:05.410

`isArray()`不会检查对象是否在数组中，而是检查对象是否是数组。

这意味着`output[i]==id`（`true`或`false`）被选中。它们总是*不是*数组；这意味着您将始终进入`else`条件的一部分。

您可以尝试使用类似的东西：

```
if(output.indexOf(id) != -1) {
    // do soome stuff if the value exists in the database
}
else{
    // if not exists some other operation
} 
```

而不是你的`for`循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:24:47.650

如果您想知道是否`id`在数组`output`中，请使用 Javascript 的内置`indexOf()`方法：

```
if (output.indexOf(id) != -1) {
    // do soome stuff if the value exists in the database
} else {
    // if not exists some other operation
} 
```

按照您编写它的方式，您将为不匹配`else`的每个值执行该子句。`output``id`

# bigdata - splunk vs cordys operations intelligence

> ID：16074360
> 
> 赞同：0
> 
> 时间：2013-04-18T04:13:03.217
> 
> 标签：bigdata, splunk

Can Cordys Operations Intelligence (COI) be an alternative to Splunk?

I have not used COI, however looking at the videos and documents it seems very similar to what Splunk can do in terms of providing Operations Intelligence from real time big data.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:12:59.337

从概念上讲，Cordys Operations Intelligence (COI) 和 Splunk 的不同之处在于 COI 使用 Excel 作为计算引擎。在 COI 中，实时数据被馈送到（现有的）Excel 工作表，结果可以在 SharePoint 等应用程序中进行可视化和监控。Splunk 有自己的索引数据存储和计算引擎。这意味着业务用户或域所有者需要学习新工具，而不是简单地使用 Excel 和 SharePoint 等众所周知的办公应用程序。

（作者在 Cordys 工作）

# c# - DataBind in C# - selectedvalue of ComboBox to Object property of a class

> ID：16074361
> 
> 赞同：0
> 
> 时间：2013-04-18T04:13:08.093
> 
> 标签：c#, winforms, data-binding, combobox, selectedvalue

I'm facing some problem with databinding in C# windows Form project. I used .Net Framework 4 client profile. And IDE is visual studio 2010 express edition for C#. I have a class as below.

```
public myClass()
    {
        name = string.Empty;
        dataType = DataTypes.Bool;  //property with enum created by me
        isList = false;
        filterValue = new object();
    } 
```

then I have a profile.csv file. In one of my form, I have a combobox and its datasource is datatable which include data from csv file.

```
private void form_load()
{
 ComboBox comboBox = new ComboBox();
 this.Controls.Add(comboBox);
 comboBox.Name = attribute.Name.Replace(" ", string.Empty);
 comboBox.DisplayMember = attribute.Name;
 comboBox.DataSource = attributeValueDataSource.Tables[tableName].DefaultView;
 comboBox.SelectedIndex = 0;
} 
```

Then I do data binding on this combo box to my class. As my data binding is in another method different from above and combo box is created dynamically, I found my combo box by it's name in below method.

```
private void Method_1
{
control = this.Controls.Find(attrName, true); 
ComboBox specificControl = (ComboBox)control[0]; Binding attributeBinding = 
new Binding(SelectedValue, attributeSelectionController.FilterAttributeModels[attributeCount] , FilterValue, true, DataSourceUpdateMode.OnPropertyChanged, string.Empty, F); 
attributeBinding.ControlUpdateMode =   ControlUpdateMode.OnPropertyChanged;   specificControl.DataBindings.Add(attributeBinding);
 } 
```

It seems fine till that state. But when binding event invoke and program flow go to the set property method, the value.GetType() return system.data.datarowview as type of selectedValue of combobox item instead of string or integer or any other datatype. I have tried to set value member for combox while I set datasource to its. But no help. Any one can help on it? I need urgent solution.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:54:27.067

终于可以找出问题所在了。在表单加载方法中，我更改了以下行的顺序。

```
comboBox.DisplayMember = attribute.Name; 
comboBox.DataSource = attributeValueDataSource.Tables[tableName].DefaultView; 
```

作为

```
comboBox.DataSource = attributeValueDataSource.Tables[tableName].DefaultView;
comboBox.DisplayMember = attribute.Name;
combox.ValueMember = attribute.Name; 
```

然后它工作。:)

**感谢帮助我的朋友。

# php - 如何在不发布的情况下检索codeigniter中的数据？

> ID：16074362
> 
> 赞同：0
> 
> 时间：2013-04-18T04:13:11.377
> 
> 标签：php, codeigniter, http-post

我想获取欢迎管理站点（crud）的会话 fname，对于会话用户名，我已经有了它，因为它已经 delclare `$_SESSION['username'] = $this->input->post('username');`，我的问题是如何从数据库中创建会话 fname？

数据库 SQL

```
CREATE TABLE IF NOT EXISTS `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(30) NOT NULL,
  `password` varchar(32) NOT NULL,
  `fname` varchar(30) DEFAULT NULL,
  `lname` varchar(30) DEFAULT NULL,
  PRIMARY KEY (`id`)
) 
```

控制器

```
<?php if(!defined('BASEPATH')) exit('Tidak ada akses!');

class C_login extends CI_Controller{

    function __construct(){
    session_start();
    parent::__construct();
    $this->load->model('m_user'); 
}

public function index(){
    if(isset($_SESSION['username'])){
        redirect('crud');
    }

    $this->form_validation->set_rules('username','Username','required');
    $this->form_validation->set_rules('password','Password','required');
    if ($this->form_validation->run() == TRUE){
        $this->load->model('m_user');
        $result = $this->m_user->cek_login(
            $this->input->post('username'),
            $this->input->post('password')
        );
            if($result == TRUE){
                $_SESSION['username'] = $this->input->post('username');
                redirect('crud');
            }
        }
        $this->load->view('login/v_form');
    }

    public function daftar(){
        $data = array(
                        'username' => $this->input->post('username'),
                        'password' => md5($this->input->post('password)')),
                        'fname' => $this->input->post('fname'),
                        'lname' => $this->input->post('lname')
                        );
        $this->m_user->tambah_user($data);
        $this->load->view('login/v_daftar',$data);
    }

    public function logout(){
        session_destroy();
        $this->index();
    }
} 
```

模型

```
<?php if(!defined('BASEPATH')) exit('Tidak ada access!');

class M_user extends CI_Model{

function __construct(){
    parent::__construct();  
}

function cek_login($username,$password){
    $query = $this->db->where('username',$username)
                      ->where('password',md5($password))
                      ->limit(1)
                      ->get('users');

        if ($query->num_rows() > 0){
            return $query->row_array();
        }
        else{
            return FALSE;
        }
    }

    function tambah_user($data){
        return $this->db->insert('users', $data);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:07:35.497

首先，您不应该将输入发布到会话中，您应该首先根据数据库对其进行验证。您的输入应针对 SQL 注入等进行清理。

我个人会使用 CI 的会话库来执行此操作（您需要在自动加载配置中自动加载它）

然后在您的模型中按照这些方式进行操作，或者您可以将 $data 发送到控制器并从那里将其添加到会话中。

```
if ($query->num_rows() === 1){
           $row = $query->row();

           $data = array (
              'username'=> $row->id,
              'fname' => $row->fname
           );
          $this->session->set_userdata($data);
        } 
```

然后，如果你想使用会话，你需要像这样调用它

```
echo $this->session->userdata('username'); 
```

这将回显您的用户 ID，您可以随意使用它。

# android - Implicit intent call scan

> ID：16074364
> 
> 赞同：0
> 
> 时间：2013-04-18T04:13:17.693
> 
> 标签：android, android-intent

I am new to Android development. And I am trying build an app which scans all installed Apps for implicit intend calls. So if an application has implicit call then this app shows the name of the apps. Can someone provide me some concept on how to do it? If this not possible, then is it possible to notify when application gets called implicitly?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:18:28.457

您可以通过查询获取所有已安装应用程序的列表，`PackageManager`还可以获取每个包的启动意图。（即带有类别的包`Intent.CATEGORY_LAUNCHER`

```
final PackageManager pm = getPackageManager();
//get the list of all installed packages.
List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);

for (ApplicationInfo packageInfo : packages) {
    Log.d(TAG, "Installed package :" + packageInfo.packageName);
    Log.d(TAG, "Launcher Activity :" + pm.getLaunchIntentForPackage(packageInfo.packageName)); 
} 
```

# java - Map reducing algorithm

> ID：16074367
> 
> 赞同：1
> 
> 时间：2013-04-18T04:13:43.567
> 
> 标签：java, list, map

How can I `reduce` a `Map<Integer, List<Integer>>`?

Let a `reduce`'d map be a map for which each `Integer` value of `List<Integer>` is unique and not duplicated.

Example:

Map A:

```
 0 --> (0)
 1 --> (1, 2) 
 2 --> (2, 1) 
```

would reduce to:

```
 0 --> (0)
 1 --> (1, 2) 
```

or

```
 0 --> (0)
 2 --> (2, 1) 
```

Notice that either deletion of key 1 or 2 is acceptable since it produces a `reduced` map.

**EDIT**: When an element maps to itself, it should remain separate, such as `0 --> 0`. However, when multiple values have Integer's in common, they should be merged.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:21:50.910

尝试这个

```
class ReducedMap extends HashMap<Integer, List<Integer>> {
    private Set<Set<Integer>> set = new HashSet<Set<Integer>>();

    @Override
    public List<Integer> put(Integer key, List<Integer> value) {
        Set<Integer> set = new HashSet<Integer>(value);
        if (!this.set.add(set)) {
            return new ArrayList<Integer>(set);
        }
        return super.put(key, value);
    }
      ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:49:07.777

保留一个 ArrayList，我们称之为“合并”。

您应该使用 HashSet 来检测重复值。检查元素（列表中的值）是否在 HashSet 中，如果是则忽略它，否则将其放入 HashSet 并将其添加到“合并”ArrayList。

显然，您必须在此逻辑的开头添加一个案例，以不考虑元素是否映射到自身。

该算法将如下所示：

1.  声明一个名为“ret”的 Map> 和一个名为“merged”的 ArrayList 和一个名为“duplicate_checker”的 HashSet

2.  对于输入 Map 中的每个 List

    2.1 如果映射到自身，则放入“ret”

    2.2 否则，对于当前列表中的每个元素，如果它不在“duplicate_checker”中，则将其放在那里并将其添加到“合并”中

3.  将“合并”改为“撤消”

4.  返回“ret”

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:53:34.140

像这样的东西应该工作。

**版本 #2，第一个有错误**。

我会使用**Pair**类，因为我们将从地图中提取所有条目并将它们放在**Pair**的向量中。

```
private static class Pair {

    public Pair(Integer k, List<Integer> l) {

        this.k = k;
        this.s = new HashSet<Integer>();
        this.s.addAll(l);
    }

    public Integer k;
    public Set<Integer> s;
} 
```

接下来，我们需要一个方法来检查两个集合是否有一些共同的元素。

```
public static boolean intersect(Set<Integer> a, Set<Integer> b) {

    Set<Integer> tmp = new HashSet<Integer>(a);
    tmp.retainAll(b);

    return !tmp.isEmpty();
} 
```

reduce 方法接受一个映射并返回一个新的缩减映射。

```
public static Map<Integer, List<Integer>> reduce(Map<Integer, List<Integer>> m) { 
```

**首先，我们将地图转换为Pair**数组；这将允许有效地迭代和消除键。

```
 int cnt = 0;
    Pair[] entries = new Pair[m.size()];

    for (Integer k : m.keySet()) {

        List<Integer> l = m.get(k);
        entries[cnt] = new Pair(k, l);
        ++cnt;
    } 
```

然后我们针对任何其他条目测试每一**对；**如果它们有共同的元素，我们删除后者，但首先我们将其合并到前者中。

```
 for (int i = 0; i < m.size(); ++i) {

        for (int j = i + 1; j < m.size(); ++j) {

            if (entries[i] != null && entries[j] != null && intersect(entries[i].s, entries[j].s)) {

                Set<Integer> si = entries[i].s;
                Set<Integer> sj = entries[j].s;

                si.addAll(sj);
                entries[j] = null;
            }
        }
    } 
```

最后，我们将数组转换回映射，跳过删除的元素。

```
 Map<Integer, List<Integer>> r = new HashMap<Integer, List<Integer>>();

    for (int i = 0; i < m.size(); ++i)
        if (entries[i] != null)
            r.put(entries[i].k, new ArrayList<Integer>(entries[i].s));

    return r;
} 
```

# asp.net - 移除 List 的元素 在 asp.net 中使用视图状态

> ID：16074368
> 
> 赞同：0
> 
> 时间：2013-04-18T04:13:52.970
> 
> 标签：asp.net, viewstate

我遇到了一个关于视图状态的问题。这是我的代码：

```
public List<int> ListId
{
     get
     {
         return (List<int>)ViewState["ListId"];
     }
     set
     {
         ViewState["ListId"] = value;
     }
 }
protected void btAdd_Click(object sender, EventArgs e)
{
    ViewState.Remove("ListId");
    foreach (TreeNode tn in tvFAQ.CheckedNodes)
    {
        if (tn.Checked)
        {
            Id = tn.ValuePath;
            ListId = PassId.ListId(Id);
        }
     }
     if(ListId!=null)
     {
        ListById();
     }
} 
```

在函数 ListById() 中，我将使用“ListId.Count”，但无法删除 ListId 的元素，因此当我在页面中执行此操作时，ListId 的元素将自动增加，直到我关闭页面。单击“添加”按钮后，请帮我删除 ListId 的元素。太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:27:37.630

它应该被删除。

你可以试试这个

```
ViewState["ListId"] = null; 
```

# postgresql - PostgreSQL 9.2 - Convert TEXT json string to type json/hstore

> ID：16074375
> 
> 赞同：69
> 
> 时间：2013-04-18T04:14:48.177
> 
> 标签：postgresql, postgresql-9.2

I have a `TEXT` column containing valid JSON string.

```
CREATE TABLE users(settings TEXT);

INSERT INTO users VALUES ('{"language":"en","gender":"male"}');
INSERT INTO users VALUES ('{"language":"fr","gender":"female"}');
INSERT INTO users VALUES ('{"language":"es","gender":"female"}');
INSERT INTO users VALUES ('{"language":"en","gender":"male"}'); 
```

I want to transform some fields into a query-able format.

A `REGEXP_REPLACE` for each field would do (`language` field and `gender` field). But since it's valid JSON, is there way to:

*   Convert into JSON type
*   Convert into hstore type
*   Or any other feasible ways

SQLFiddle: [http://sqlfiddle.com/#!12/54823](http://sqlfiddle.com/#!12/54823)

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2014-04-17T01:11:22.087

```
SELECT cast(settings AS json) from users; 
```

**7年后编辑**

我强烈建议您不要使用非结构化列，除非您的数据是非结构化的。RDBMS 有很长的路要走。我们搭建了一个相当大的平台，将用户设置作为一个json列，最终变成了一个需要多年后清理的垃圾抽屉

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2014-10-02T07:58:15.087

或者以比 Reza 最短的方式：

```
SELECT settings::json FROM users; 
```

然后，例如选择语言：

```
SELECT settings::json->>'language' FROM users; 
```

有关[官方文档](http://www.postgresql.org/docs/9.3/static/functions-json.html)的更多详细信息。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-07-18T17:09:13.393

这是[Postgresql 的解决方案：Converting TEXT columns to JSON](http://baudehlo.com/2014/04/28/postgresql-converting-text-columns-to-json/)：

```
ALTER TABLE table1 ALTER COLUMN col1 TYPE JSON USING col1::JSON; 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-02-01T20:43:32.483

所以我遇到了文本是 JSON 的问题。如果您有此问题，请改用此查询。其中 COLUMN 是包含 JSONB 或 JSON 数据类型的列，ATTRIBUTE 是 JSON 的属性，它是一个字符串，您希望将其转换为 JSON。

文本将如下所示，"{\"junk5\": 283774663, \"junk2\": 0, \"junk1\": 1218478497, \"junk3\":1923, \"junk4\": 63278342}"

```
SELECT CAST(TRIM(both '"' from jsonstring) as JSON)
FROM (
    SELECT REPLACE(cast(COLUMN->'ATTRIBUTE' as text), '\"', '"')
    as jsonString from TABLE where cast(COLUMN->'ATTRIBUTE' as text)LIKE '%\\%'
) as JSON_CONVERTING 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-08-06T09:47:41.407

如果您的列已经是 json 并且在其根级别包含字符串，则该`::jsonb`列将不起作用。这是一个将此类字符串转换为 JSON 的衬垫：

```
SELECT (settings #>> '{}')::jsonb -> 'language' from users; 
```

我在[这里找到了这个答案](https://simplernerd.com/escaped-json-string-to-object/)

`#>>`该语句首先通过给定空路径的运算符将根级字符串提取为文本。请注意，简单地将此类字符串转换为文本 ( `::text`) 是行不通的，因为它会转义所有引号。接下来，将提取的字符串解析为 json 对象 ( `::jsonb`)。

此查询的另一种版本是将 json 字符串放入数组中，然后将其第一个元素提取为文本：

选择 cast(json_build_array(settings)->>0 as json)

要解决此问题，您还可以使用以下命令将所有带有根级别字符串的字段转换为 json：

```
UPDATE users
SET
    settings = settings #>>'{}'::jsonb
WHERE settings ->> 'language' is  NULL 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-27T09:12:02.287

如果您需要对其进行索引，请创建一个不可变函数，该函数将 json 作为输入并以 pl 语言生成您想要作为输出的字段，例如：

```
create function extract_language(text) returns text as $$
  -- parse $1 as json
  -- return $1.language
$$ language whatever immutable; 
```

然后在表达式上添加一个索引：

```
create index users_language on users(extract_language(settings)); 
```

然后，该索引将（可能）用于以下查询：

```
select * from users where extract_language(settings) = 'en'; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-08-07T19:14:14.497

添加到另一条评论，这是一个查询中的单行符（无需更新）

```
regexp_replace(trim(both '"' from settings::text), '\\"', '"', 'g')::json as column_name; 
```

# python - 如何让 Python 分析器工作？

> ID：16074376
> 
> 赞同：6
> 
> 时间：2013-04-18T04:15:21.590
> 
> 标签：python, profiler

我正在尝试按照此处的说明进行操作：http: [//docs.python.org/2/library/profile.html#module-cProfile](http://docs.python.org/2/library/profile.html#module-cProfile)

具体来说，这部分：

```
import cProfile, pstats, io
pr = cProfile.Profile()
pr.enable()
... do something ...
pr.disable()
s = io.StringIO()
ps = pstats.Stats(pr, stream=s)
ps.print_results() 
```

我已经确定 print_results 不是 Stats 类的真实方法，它似乎也不存在于任何地方。这是我当前的代码：

```
import cProfile, pstats, io
def foo(request):
    pr = cProfile.Profile()
    pr.enable()
    pass
    pr.disable()
    s = io.StringIO()
    ps = pstats.Stats(pr, stream = s)
    f = open('/profstats', 'a')
    ps.print_stats()
    f.write(s.getvalue())
    s.close()
    f.close() 
```

当前结果是：TypeError at /inspection-summary/ unicode argument expected, got 'str'

（输出看起来像这样，因为我使用 Django 来调用有问题的代码）。

那么有谁知道我怎样才能让探查器实际工作？我只是希望它按预期进行分析，然后将结果打印到文件中，以便稍后在执行后查看结果。我可以让 dump_stats 工作，但它产生的文件是垃圾。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T08:03:03.070

事实上，profile/pstats 模块的 API 看起来相当特别。我认为该行`ps.print_results()`应该是通用行，即应该写为`ps.call_some_methods_to_print_the_result()`，但这确实不清楚。至于`dump_stats()`它实际上保存了一个可以稍后重新加载的二进制文件。

这是一个对我有用的例子：

```
import cProfile, pstats
pr = cProfile.Profile()
pr.enable()
...
pr.disable()

f = open('x.prof', 'a')
sortby = 'cumulative'
pstats.Stats(pr, stream=f).strip_dirs().sort_stats(sortby).print_stats()
f.close() 
```

有效值为`sortby`：调用、累积、文件、行、模块、名称、nfl（用于名称/文件/行）、pcalls、stdname、时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-27T23:27:00.877

2.7手册中示例中的问题似乎是使用StringIO。当我按照 Armin Rigo 的建议使用真实文件时，该更改可以避免错误。查阅我注意到的 doc re [StringIO](http://docs.python.org/2.7/library/stringio.html#module-StringIO)

> StringIO 对象可以接受 Unicode 或 8 位字符串，但将两者混合可能需要小心。如果两者都使用，则无法解释为 7 位 ASCII（> > 使用第 8 位）的 8 位字符串将导致调用 getvalue() 时引发 UnicodeError。

此处未调用 getvalue()，失败的语句位于 pstats.py 中，可能是 print_stats() 执行中的第一次打印尝试，后面还有几个：

```
 print >> self.stream, indent, self.total_calls, "function calls", 
```

我看不到哪个打印参数导致了问题，也看不到如何让 StringIO 接受 print_stats 试图给它的任何内容——但是，如果您只是完全省略流，则输出会出现在 stdout反正：

```
pr.enable()
(do the thing)
pr.disable()
pstats.Stats(pr).print_stats() 
```

如果标准输出足够好，就是这样。

# c++ - How to get executables using premake?

> ID：16074378
> 
> 赞同：0
> 
> 时间：2013-04-18T04:15:43.480
> 
> 标签：c++, build, g++, premake

sorry if this question is too naive but i'm new to using build tools as previously i used visual studio's default build tool( just right click and select build ).

Now i am working with linux, and want to develop a cross platform application.I'm now using premake as i've heard that it is "insanely" cross platform compatible. I made the premake.lua but i am unable to find what should be the appropriate name for the toolset parameter if i want to compile using g++( i believe it stands for the compiler ) in the command:

premake --target toolset

I checked the link: [http://premake.sourceforge.net/what_is_premake](http://premake.sourceforge.net/what_is_premake) and many others they give the toolset name for gcc, code::blocks etc but not for g++.Secondly even if i give toolset name as cb-ow, for Cde::Blocks. I don't get the executables, i get the .cbw files

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:17:33.083

您很可能根本不需要指定工具集。做就是了：

```
premake4 gmake 
```

它将使用默认工具集（Linux 上的 GCC）。

哦，我还应该提到你正在使用 Premake 3，这在这一点上*已经*过时了。在此处查看 4.x 的内容：http: [//industriousone.com/premake](http://industriousone.com/premake)。

# android - Out of memory exception on SQLite database operation

> ID：16074379
> 
> 赞同：2
> 
> 时间：2013-04-18T04:15:55.027
> 
> 标签：android, sqlite, listview, out-of-memory

I have a custom listview where each list item has 5 entries and these entries come from SQLite database. There are such 8 list-items in this listview. My code for custom adapter is:

```
public class VaccinListAdapter extends BaseAdapter
    {

        private Context context;
        private List<VaccinInfoPOJO> vaccinInfo;

        public VaccinListAdapter(Context c,List<VaccinInfoPOJO> list)
        {
            context=c;
            vaccinInfo=list;
        }
        @Override
        public int getCount() {
            return vaccinInfo.size();
        }

        @Override
        public Object getItem(int pos) {
            return vaccinInfo.get(pos);
        }

        @Override
        public long getItemId(int i) {
            return i;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup viewGroup) {

            ViewHolder holder;

            VaccinInfoPOJO entry=vaccinInfo.get(position);
            if (convertView == null) {
                LayoutInflater inflater = (LayoutInflater) context
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView = inflater.inflate(R.layout.vaccin_list_style, null);
                holder=new ViewHolder();
                holder.diseasevalue=(TextView)convertView.findViewById(R.id.vaccin_lv_disease);
                holder.animals=(TextView)convertView.findViewById(R.id.vaccin_lv_animalnames);
                holder.vaccinname= (TextView)convertView.findViewById(R.id.vaccin_lv_vaccinname);
                holder.dosevalue=(TextView)convertView.findViewById(R.id.vaccin_lv_dosagevalue);
                holder.timevalue= (TextView)convertView.findViewById(R.id.vaccin_lv_timevalue);
                convertView.setTag(holder);
            }
             else {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.diseasevalue.setText(entry.getDisease());

            holder.animals.setText(entry.getAnimal());

            holder.vaccinname.setText(entry.getVaccine());

            holder.dosevalue.setText(entry.getDose());

            holder.timevalue.setText(entry.getTime());

            return convertView;
        }

    } 
```

And I am using this ViewHolder class as suggested [here](http://www.youtube.com/watch?v=wDBM6wVEO70):

```
 static class ViewHolder
    {
           TextView diseasevalue,animals,vaccinname,dosevalue,timevalue;

    } 
```

I am getting Out of memory exception after a long stream of this grow heap sequence::

```
04-18 09:42:46.033: DEBUG/dalvikvm(370): GC_CONCURRENT freed 45K, 21% free 10597K/13255K, external 1055K/1567K, paused 10ms+10ms
04-18 09:42:48.154: INFO/dalvikvm-heap(370): Clamp target GC heap from 17.901MB to 16.000MB
04-18 09:42:48.154: DEBUG/dalvikvm(370): GC_CONCURRENT freed 68K, 18% free 12622K/15303K, external 1055K/1567K, paused 10ms+11ms
04-18 09:42:48.673: INFO/dalvikvm-heap(370): Clamp target GC heap from 18.030MB to 16.000MB
04-18 09:42:48.673: DEBUG/dalvikvm(370): GC_CONCURRENT freed <1K, 18% free 12754K/15367K, external 1055K/1567K, paused 11ms+12ms
04-18 09:42:48.893: INFO/dalvikvm-heap(370): Clamp target GC heap from 18.030MB to 16.000MB
04-18 09:42:48.893: DEBUG/dalvikvm(370): GC_FOR_MALLOC freed 0K, 18% free 12754K/15367K, external 1055K/1567K, paused 219ms
04-18 09:42:48.893: INFO/dalvikvm-heap(370): Clamp target GC heap from 16.030MB to 16.000MB
04-18 09:42:48.893: INFO/dalvikvm-heap(370): Grow heap (frag case) to 16.000MB for 24-byte allocation
04-18 09:42:49.194: INFO/dalvikvm-heap(370): Clamp target GC heap from 18.030MB to 16.000MB
04-18 09:42:49.194: DEBUG/dalvikvm(370): GC_FOR_MALLOC freed 0K, 18% free 12754K/15367K, external 1055K/1567K, paused 219ms
04-18 09:42:49.204: INFO/dalvikvm-heap(370): Forcing collection of SoftReferences for 24-byte allocation
04-18 09:42:49.414: INFO/dalvikvm-heap(370): Clamp target GC heap from 18.015MB to 16.000MB
04-18 09:42:49.414: DEBUG/dalvikvm(370): GC_FOR_MALLOC freed 14K, 18% free 12740K/15367K, external 1055K/1567K, paused 212ms
04-18 09:42:49.414: INFO/dalvikvm-heap(370): Clamp target GC heap from 16.015MB to 16.000MB
04-18 09:42:49.794: INFO/dalvikvm-heap(370): Clamp target GC heap from 18.015MB to 16.000MB
04-18 09:42:49.794: DEBUG/dalvikvm(370): GC_CONCURRENT freed 0K, 18% free 12740K/15367K, external 1055K/1567K, paused 6ms+6ms
04-18 09:42:50.014: INFO/dalvikvm-heap(370): Clamp target GC heap from 18.015MB to 16.000MB
04-18 09:42:50.014: DEBUG/dalvikvm(370): GC_FOR_MALLOC freed 0K, 18% free 12740K/15367K, external 1055K/1567K, paused 214ms
04-18 09:42:50.014: INFO/dalvikvm-heap(370): Clamp target GC heap from 16.016MB to 16.000MB
04-18 09:42:50.014: INFO/dalvikvm-heap(370): Grow heap (frag case) to 16.000MB for 60-byte allocation
04-18 09:42:50.314: INFO/dalvikvm-heap(370): Clamp target GC heap from 18.016MB to 16.000MB
04-18 09:42:50.314: DEBUG/dalvikvm(370): GC_FOR_MALLOC freed 0K, 18% free 12740K/15367K, external 1055K/1567K, paused 223ms
04-18 09:42:50.324: INFO/dalvikvm-heap(370): Clamp target GC heap from 16.016MB to 16.000MB
04-18 09:42:50.324: INFO/dalvikvm-heap(370): Grow heap (frag case) to 16.000MB for 8-byte allocation
04-18 09:42:50.724: INFO/dalvikvm-heap(370): Clamp target GC heap from 18.016MB to 16.000MB
04-18 09:42:50.724: DEBUG/dalvikvm(370): GC_CONCURRENT freed 0K, 18% free 12740K/15367K, external 1055K/1567K, paused 16ms+5ms
04-18 09:42:50.994: INFO/dalvikvm-heap(370): Clamp target GC heap from 18.015MB to 16.000MB
04-18 09:42:50.994: DEBUG/dalvikvm(370): GC_FOR_MALLOC freed <1K, 18% free 12740K/15367K, external 1055K/1567K, paused 247ms
04-18 09:42:51.004: INFO/dalvikvm-heap(370): Clamp target GC heap from 16.016MB to 16.000MB
04-18 09:42:51.004: INFO/dalvikvm-heap(370): Grow heap (frag case) to 16.000MB for 24-byte allocation
04-18 09:42:51.304: INFO/dalvikvm-heap(370): Clamp target GC heap from 18.016MB to 16.000MB
04-18 09:42:51.304: DEBUG/dalvikvm(370): GC_FOR_MALLOC freed 0K, 18% free 12740K/15367K, external 1055K/1567K, paused 226ms
04-18 09:42:51.314: INFO/dalvikvm-heap(370): Clamp target GC heap from 16.016MB to 16.000MB
04-18 09:42:51.314: INFO/dalvikvm-heap(370): Grow heap (frag case) to 16.000MB for 24-byte allocation
04-18 09:42:51.724: INFO/dalvikvm-heap(370): Clamp target GC heap from 18.016MB to 16.000MB
04-18 09:42:51.724: DEBUG/dalvikvm(370): GC_CONCURRENT freed 0K, 18% free 12740K/15367K, external 1055K/1567K, paused 20ms+6ms
04-18 09:42:51.934: INFO/dalvikvm-heap(370): Clamp target GC heap from 18.016MB to 16.000MB
04-18 09:42:51.934: DEBUG/dalvikvm(370): GC_FOR_MALLOC freed 0K, 18% free 12740K/15367K, external 1055K/1567K, paused 207ms
04-18 09:42:51.934: INFO/dalvikvm-heap(370): Clamp target GC heap from 16.016MB to 16.000MB
04-18 09:42:51.934: INFO/dalvikvm-heap(370): Grow heap (frag case) to 16.000MB for 8-byte allocation 
```

Where to go now? Any help would be appreciable.

**EDIT::**

I had made a huge silly mistake. When I was running a loop to fill the Arraylist with data the loop was like:

```
for(cursor.moveToFirst();!cursor.isAfterLast();cursor.moveToFirst()) 
```

here the last moveToFirst was getting this loop into infinite state. I changed it to moveToNext. Whoa...God bless me.!!!

# mysql - 如何使用列值创建额外的列？

> ID：16074383
> 
> 赞同：2
> 
> 时间：2013-04-18T04:16:15.470
> 
> 标签：mysql, sql, pivot

我遇到以下问题

我有一张这样的桌子

```
+------+---------+------------+
| imei | channel |  sys_date  |
+------+---------+------------+
| 1111 |unknown01| 2013-04-15 |
| 2222 |unknown02| 2013-04-15 |
| 3333 |unknown03| 2013-04-15 |
| 4444 |unknown01| 2013-04-16 |
| 5555 |unknown02| 2013-04-17 |
| 6666 |unknown02| 2013-04-17 |
+------+---------+------------+ 
```

现在我需要写一个这样的 SQL 让结果（让通道的值作为额外的列）

```
+----------+---------+---------+---------+
| sys_date |unknown01|unknown02|unknown03|
+----------+---------+---------+---------+
|2013-04-15|    1    |    1    |    1    |
|2013-04-16|    1    |    0    |    0    |
|2013-04-17|    0    |    2    |    0    |
+----------+---------+---------+---------+ 
```

我不知道这个sql，所以我需要帮助，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:19:47.713

你可以使用`CASE`它

```
SELECT sys_date
,SUM(CASE channel WHEN 'unknown01' THEN 1 ELSE 0 END) AS unknown01
,SUM(CASE channel WHEN 'unknown02' THEN 1 ELSE 0 END) AS unknown02
,SUM(CASE channel WHEN 'unknown03' THEN 1 ELSE 0 END) AS unknown03
FROM Table1
GROUP BY sys_date 
```

### [看到这个 SQLFiddle](http://www.sqlfiddle.com/#!2/10bc2/2)

如果您不知道频道的数量，您可以使用此动态查询：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'SUM(case when channel = ''',
      channel,
      ''' then 1 else 0 end) AS ',
      channel
    )
  ) INTO @sql
FROM Table1;

SET @sql = CONCAT('SELECT sys_date, ', @sql, '
                  FROM Table1 
                  GROUP BY sys_date');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

### [看到这个 SQLFiddle](http://www.sqlfiddle.com/#!2/10bc2/17)

# r - Specify different types of missing values (NAs)

> ID：16074384
> 
> 赞同：13
> 
> 时间：2013-04-18T04:16:19.470
> 
> 标签：r, base, missing-data, missing-features

I'm interested to specify types of missing values. I have data that have different types of missing and I am trying to code these values as missing in R, but I am looking for a solution were I can still distinguish between them.

Say I have some data that looks like this,

```
set.seed(667) 
df <- data.frame(a = sample(c("Don't know/Not sure","Unknown","Refused","Blue", "Red", "Green"),  20, rep=TRUE), b = sample(c(1, 2, 3, 77, 88, 99),  10, rep=TRUE), f = round(rnorm(n=10, mean=.90, sd=.08), digits = 2), g = sample(c("C","M","Y","K"),  10, rep=TRUE) ); df
#                      a  b    f g
# 1              Unknown  2 0.78 M
# 2              Refused  2 0.87 M
# 3                  Red 77 0.82 Y
# 4                  Red 99 0.78 Y
# 5                Green 77 0.97 M
# 6                Green  3 0.99 K
# 7                  Red  3 0.99 Y
# 8                Green 88 0.84 C
# 9              Unknown 99 1.08 M
# 10             Refused 99 0.81 C
# 11                Blue  2 0.78 M
# 12               Green  2 0.87 M
# 13                Blue 77 0.82 Y
# 14 Don't know/Not sure 99 0.78 Y
# 15             Unknown 77 0.97 M
# 16             Refused  3 0.99 K
# 17                Blue  3 0.99 Y
# 18               Green 88 0.84 C
# 19             Refused 99 1.08 M
# 20                 Red 99 0.81 C 
```

If I now make two tables my missing values (`"Don't know/Not sure","Unknown","Refused"` and `77, 88, 99`) are included as regular data,

```
table(df$a,df$g)
#                     C K M Y
# Blue                0 0 1 2
# Don't know/Not sure 0 0 0 1
# Green               2 1 2 0
# Red                 1 0 0 3
# Refused             1 1 2 0
# Unknown             0 0 3 0 
```

and

```
table(df$b,df$g)
#    C K M Y
# 2  0 0 4 0
# 3  0 2 0 2
# 77 0 0 2 2
# 88 2 0 0 0
# 99 2 0 2 2 
```

I now recode the three factor levels `"Don't know/Not sure","Unknown","Refused"` into `<NA>`

```
is.na(df[,c("a")]) <- df[,c("a")]=="Don't know/Not sure"|df[,c("a")]=="Unknown"|df[,c("a")]=="Refused" 
```

and remove the empty levels

```
df$a <- factor(df$a) 
```

and the same is done with the numeric values `77, 88,` and `99`

```
is.na(df) <- df=="77"|df=="88"|df=="99"

table(df$a, df$g, useNA = "always")       
#       C K M Y <NA>
# Blue  0 0 1 2    0
# Green 2 1 2 0    0
# Red   1 0 0 3    0
# <NA>  1 1 5 1    0

table(df$b,df$g, useNA = "always")
#      C K M Y <NA>
# 2    0 0 4 0    0
# 3    0 2 0 2    0
# <NA> 4 0 4 4    0 
```

Now the missing categories are recode into `NA` but they are all lumped together. Is there a way in a to recode something as missing, but retain the *original* values? I want R to thread `"Don't know/Not sure","Unknown","Refused"` and `77, 88, 99` as missing, but I want to be able to still have the information in the variable.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-21T10:55:53.940

据我所知，base R 没有内置的方法来处理不同的`NA`类型。*（**编辑：**它确实：`NA_integer_`、`NA_real_`、`NA_complex_`和`NA_character`。见`?base::NA`。）*

一种选择是使用这样做的包，例如“ [memisc](http://cran.r-project.org/web/packages/memisc/index.html) ”。这是一些额外的工作，但它似乎可以满足您的需求。

这是一个例子：

首先，您的数据。我已经制作了一份副本，因为我们将对数据集进行一些非常重要的更改，并且备份总是很好。

```
set.seed(667) 
df <- data.frame(a = sample(c("Don't know/Not sure", "Unknown", 
                              "Refused", "Blue", "Red", "Green"),
                            20, replace = TRUE), 
                 b = sample(c(1, 2, 3, 77, 88, 99), 10, 
                            replace = TRUE), 
                 f = round(rnorm(n = 10, mean = .90, sd = .08), 
                           digits = 2), 
                 g = sample(c("C", "M", "Y", "K"), 10, 
                            replace = TRUE))
df2 <- df 
```

让我们考虑变量“a”：

```
df2$a <- factor(df2$a, 
                levels = c("Blue", "Red", "Green", 
                           "Don't know/Not sure",
                           "Refused", "Unknown"),
                labels = c(1, 2, 3, 77, 88, 99)) 
```

加载“memisc”库：

```
library(memisc) 
```

现在，将变量“a”和“b”转换为`item`“memisc”中的 s：

```
df2$a <- as.item(as.character(df2$a), 
                  labels = structure(c(1, 2, 3, 77, 88, 99),
                                     names = c("Blue", "Red", "Green", 
                                               "Don't know/Not sure",
                                               "Refused", "Unknown")),
                  missing.values = c(77, 88, 99))
df2$b <- as.item(df2$b, 
                 labels = c(1, 2, 3, 77, 88, 99), 
                 missing.values = c(77, 88, 99)) 
```

通过这样做，我们有了一个新的数据类型。比较以下内容：

```
as.factor(df2$a)
#  [1] <NA>  <NA>  Red   Red   Green Green Red   Green <NA>  <NA>  Blue 
# [12] Green Blue  <NA>  <NA>  <NA>  Blue  Green <NA>  Red  
# Levels: Blue Red Green
as.factor(include.missings(df2$a))
#  [1] *Unknown             *Refused             Red                 
#  [4] Red                  Green                Green               
#  [7] Red                  Green                *Unknown            
# [10] *Refused             Blue                 Green               
# [13] Blue                 *Don't know/Not sure *Unknown            
# [16] *Refused             Blue                 Green               
# [19] *Refused             Red                 
# Levels: Blue Red Green *Don't know/Not sure *Refused *Unknown 
```

我们可以使用这些信息来创建按照您描述的方式运行的表格，同时保留所有原始信息。

```
table(as.factor(include.missings(df2$a)), df2$g)
#                       
#                        C K M Y
#   Blue                 0 0 1 2
#   Red                  1 0 0 3
#   Green                2 1 2 0
#   *Don't know/Not sure 0 0 0 1
#   *Refused             1 1 2 0
#   *Unknown             0 0 3 0
table(as.factor(df2$a), df2$g)
#        
#         C K M Y
#   Blue  0 0 1 2
#   Red   1 0 0 3
#   Green 2 1 2 0
table(as.factor(df2$a), df2$g, useNA="always")
#        
#         C K M Y <NA>
#   Blue  0 0 1 2    0
#   Red   1 0 0 3    0
#   Green 2 1 2 0    0
#   <NA>  1 1 5 1    0 
```

缺少数据的数字列的表的行为方式相同。

```
table(as.factor(include.missings(df2$b)), df2$g)
#      
#       C K M Y
#   1   0 0 0 0
#   2   0 0 4 0
#   3   0 2 0 2
#   *77 0 0 2 2
#   *88 2 0 0 0
#   *99 2 0 2 2
table(as.factor(df2$b), df2$g, useNA="always")
#       
#        C K M Y <NA>
#   1    0 0 0 0    0
#   2    0 0 4 0    0
#   3    0 2 0 2    0
#   <NA> 4 0 4 4    0 
```

* * *

作为奖励，您可以生成 nice `codebook`s：

```
> codebook(df2$a)
========================================================================

   df2$a

------------------------------------------------------------------------

   Storage mode: character
   Measurement: nominal
   Missing values: 77, 88, 99

            Values and labels    N    Percent 

    1   'Blue'                   3   25.0 15.0
    2   'Red'                    4   33.3 20.0
    3   'Green'                  5   41.7 25.0
   77 M 'Don't know/Not sure'    1         5.0
   88 M 'Refused'                4        20.0
   99 M 'Unknown'                3        15.0 
```

* * *

但是，我也建议您阅读@Maxim.K 关于缺失值真正构成[的评论。](https://stackoverflow.com/questions/16074384/r-specify-different-types-of-missing-values#comment22949272_16076252)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T06:46:20.113

要保留原始值，您可以在编码 NA 信息的位置创建新列，例如：

```
df <- transform(df,b.na = ifelse(b %in% c('77','88','99'),NA,b))
df <- transform(df,a.na = ifelse(a %in% 
                        c("Don't know/Not sure","Unknown","Refused"),NA,a)) 
```

然后你可以做这样的事情：

```
 table(df$b.na , df$g)
    C K M Y
  2 0 0 4 0
  3 0 2 0 2 
```

另一个不创建新列的选项是使用`exclude`这样的选项，将不需要的值设置为 NULL，（与缺失值不同）

```
table(df$a,df$g,
      exclude=c('77','88','99',"Don't know/Not sure","Unknown","Refused")) 
       C K M Y
  Blue  0 0 1 2
  Green 2 1 2 0
  Red   1 0 0 3 
```

您可以定义一些全局常量（即使不推荐）来对您的“缺失值”进行分组，并在程序的其余部分中使用它们。像这样的东西：

```
B_MISSING <- c('77','88','99')
A_MISSING <- c("Don't know/Not sure","Unknown","Refused") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-24T15:07:14.490

如果您愿意坚持使用数值，那么`NA`, `Inf`, `-Inf`, 和`NaN`可用于不同的缺失值。然后，您可以使用`is.finite`它们来区分它们和正常值：

```
x <- c(NA, Inf, -Inf, NaN, 1)
is.finite(x)
## [1] FALSE FALSE FALSE FALSE  TRUE 
```

`is.infinite`,在这里也很有用`is.nan`。`is.na`

我们可以有一个特殊的打印函数，以更有意义的方式显示它们，甚至创建一个特殊的类，但即使没有，上面也会将数据分为有限值和多个非有限值。

# excel - 使用 VBA 从 Excel 中提取 Outlook 邮件正文文本

> ID：16074387
> 
> 赞同：0
> 
> 时间：2013-04-18T04:16:30.730
> 
> 标签：excel, vba, outlook

我有大量的 Outlook .msg 和 Outlook .eml 文件保存到共享网络文件夹（即 Outlook 外部）。我正在尝试在 Excel 中编写一些 VBA，从每个文件中提取主题，发件人，抄送，收件人，发送时间，发送日期，邮件正文文本并将这些信息有序导入 Excel 单元格

主题 发送者 CC 接收者 SentTime SentDate

回复：.. Mike Jane Tom 2013 年 1 月 23 日 12:00:00

我对 word 文档做了类似的事情，但我很难“了解” .msg 文件中的文本。

到目前为止，我有下面的代码。我喜欢认为我至少在正确的轨道上，但我被困在我试图设置对 msg 文件的引用的那一行。任何建议将被认真考虑...

```
Dim MyOutlook As Outlook.Application
Dim MyMail As Outlook.MailItem

Set MyOutlook = New Outlook.Application

Set MyMail = 

Dim FileContents As String

FileContents = MyMail.Body 
```

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T15:54:45.997

所以我已经能够让它与保存在 Outlook 之外的 .msg 文件一起使用。但是，由于我无法访问 Outlook Express，我目前无法保存任何 .eml 文件。这是我想出的一个 Sub，它将 Subject、Sender、CC、To 和 SendOn 插入到 Excel 工作表中，从第 2 行第 1 列开始（假设第 1 行有标题行）：

```
Sub GetMailInfo(Path As String)

    Dim MyOutlook As Outlook.Application
    Dim msg As Outlook.MailItem
    Dim x As Namespace

    Set MyOutlook = New Outlook.Application
    Set x = MyOutlook.GetNamespace("MAPI")

    FileList = GetFileList(Path + "*.msg")

    row = 1

    While row <= UBound(FileList)

        Set msg = x.OpenSharedItem(Path + FileList(row))

        Cells(row + 1, 1) = msg.Subject
        Cells(row + 1, 2) = msg.Sender
        Cells(row + 1, 3) = msg.CC
        Cells(row + 1, 4) = msg.To
        Cells(row + 1, 5) = msg.SentOn

        row = row + 1
    Wend

End Sub 
```

它使用如下定义的 GetFileList 函数（感谢[电子表格](http://spreadsheetpage.com/index.php/tip/getting_a_list_of_file_names_using_vba/)页面.com ）

```
Function GetFileList(FileSpec As String) As Variant
'   Taken from http://spreadsheetpage.com/index.php/tip/getting_a_list_of_file_names_using_vba/
'   Returns an array of filenames that match FileSpec
'   If no matching files are found, it returns False

    Dim FileArray() As Variant
    Dim FileCount As Integer
    Dim FileName As String

    On Error GoTo NoFilesFound

    FileCount = 0
    FileName = Dir(FileSpec)
    If FileName = "" Then GoTo NoFilesFound

'   Loop until no more matching files are found
    Do While FileName <> ""
        FileCount = FileCount + 1
        ReDim Preserve FileArray(1 To FileCount)
        FileArray(FileCount) = FileName
        FileName = Dir()
    Loop
    GetFileList = FileArray
    Exit Function

'   Error handler
    NoFilesFound:
        GetFileList = False
End Function 
```

应该相当简单，如果您需要更多解释，请告诉我。

编辑：您还必须添加对 Outlook 库的引用

！

Z

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:27:26.703

假设您知道，或者可以计算 .msg 的完整文件名和路径：

```
Dim fName as String
fName = "C:\example email.msg"

Set MyMail = MyOutlook.CreateItemFromTemplate(fName)` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-16T19:34:36.933

' 下面的代码将能够处理来自 Outlook 的几乎所有邮件，' 除了我不知道为什么您正在处理由 Exchange Server 生成的邮件，例如“邮件传递系统”。在这一点上，它看起来确实不是一个“真正的消息”。如果您尝试阅读它，则对象“olItem”“始终为空”。但是，如果您收到此警报“邮件传递系统”并将其转发给自己，然后尝试阅读它，它确实可以正常工作。不要问我为什么，因为我不知道。我只是认为这个“邮件传递系统”'第一次它是一个警报而不是消息，图标也发生了变化，它'不是一个信封图标，而是一个成功与否的传递图标。如果您有任何想法如何处理它，请告知

```
Set olApp = New Outlook.Application
Set olNamespace = olApp.GetNamespace("MAPI")

Set olInbox = olNamespace.GetDefaultFolder(olFolderInbox).Folders("mFolder")

On Error Resume Next

i = 5
cont1 = 0
Sheet2.Cells(4, 1) = "Sender"
Sheet2.Cells(4, 2) = "Subject"
Sheet2.Cells(4, 3) = "Received"
Sheet2.Cells(4, 4) = "Recepient"
Sheet2.Cells(4, 5) = "Unread?"
Sheet2.Cells(4, 6) = "Link to Report"

For Each olItem In olInbox.Items

    myText = olItem.Subject
    myTokens = Split(myText, ")", 5)
    myText = Mid(myTokens(0), 38, Len(myTokens(0)))
    myText = RTrim(myText)
    myText = LTrim(myText)
    myText = myText & ")"
    myLink = ""

    myArray = Split(olItem.Body, vbCrLf)
    For a = LBound(myArray) To UBound(myArray)
         If a = 4 Then
           myLink = myArray(a)
           myLink = Mid(myLink, 7, Len(myLink))
         End If
    Next a

    Sheet2.Cells(i, 1) = olItem.SenderName
    Sheet2.Cells(i, 2) = myText
    Sheet2.Cells(i, 3) = Format(olItem.ReceivedTime, "Short Date")
    Sheet2.Cells(i, 4) = olItem.ReceivedByName
    Sheet2.Cells(i, 5) = olItem.UnRead
    Sheet2.Cells(i, 6) = myLink
    olItem.UnRead = False
    i = i + 1

Next 
```

# python - 让垂直网格线出现在 matplotlib 的线图中

> ID：16074392
> 
> 赞同：105
> 
> 时间：2013-04-18T04:17:10.157
> 
> 标签：python, matplotlib, pandas

我想在我的绘图上同时获得水平和垂直网格线，但默认情况下只出现水平网格线。我正在使用`pandas.DataFrame`python 中的 sql 查询来生成带有 x 轴日期的线图。我不确定为什么它们没有出现在日期上，我试图寻找答案但找不到。

我用来绘制图表的只是下面的简单代码。

```
data.plot()
grid('on') 
```

data 是包含来自 sql 查询的日期和数据的 DataFrame。

我也尝试添加下面的代码，但我仍然得到相同的输出，没有垂直网格线。

```
ax = plt.axes()        
ax.yaxis.grid() # horizontal lines
ax.xaxis.grid() # vertical lines 
```

有什么建议么？

![在此处输入图像描述](https://i.stack.imgur.com/nsdzO.png)

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-04-18T04:19:16.840

您可能需要在调用中提供布尔参数，例如使用`ax.yaxis.grid(True)`而不是`ax.yaxis.grid()`. 此外，由于您同时使用它们，因此您可以组合成`ax.grid`，这对两者都有效，而不是对每个维度都执行一次。

```
ax = plt.gca()
ax.grid(True) 
```

那应该让你解决。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2014-09-12T02:23:47.900

`plt.gca().xaxis.grid(True)`证明是我的解决方案

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2018-01-03T12:51:34.437

[根据 matplotlib 文档](https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.grid.html#matplotlib.axes.Axes.grid)，`Axes`类`grid()`方法的签名如下：

> Axes.grid(b=None, which='major', axis='both', **kwargs)
> 打开或关闭轴网格。
> 
> `which`可以是“major”（默认）、“minor”或“both”，以控制是否影响主要刻度网格、次要刻度网格或两者都受到影响。
> 
> `axis`可以是 'both' （默认）、'x' 或 'y' 来控制绘制哪组网格线。

因此，为了同时显示 x 轴和 y 轴的网格线，我们可以使用以下代码：

```
ax = plt.gca()
ax.grid(which='major', axis='both', linestyle='--') 
```

这种方法让我们可以更好地控制网格线的显示内容。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-11-16T03:07:03.953

也许这可以解决问题： [matplotlib, define size of a grid on a plot](https://stackoverflow.com/questions/10453770/matplotlib-define-size-of-a-grid-on-a-plot)

```
ax.grid(True, which='both') 
```

事实是网格正在工作，但在 00:00 只有一个 v-grid，而在其他地方没有网格。我遇到了同样的问题，在很多天中，11 月 1 日只有一个网格。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-03-31T13:29:09.393

简短回答（阅读下文了解更多信息）：

```
ax.grid(axis='both', which='both') 
```

[![在此处输入图像描述](https://i.stack.imgur.com/MYzD2.png)](https://i.stack.imgur.com/MYzD2.png)

你所做的是正确的，它应该工作。

但是，由于您示例中的**X**轴是**DateTime**轴，因此**主要**刻度线（很可能）仅出现在 X 轴的两端。其他可见的刻度线是**次要**刻度线。

默认情况下，该`ax.grid()`方法在主要刻度线上绘制网格线。因此，您的情节中不会出现任何内容。

使用下面的代码突出显示刻度线。专业将是蓝色，而未成年人是红色。

```
ax.tick_params(which='both', width=3)
ax.tick_params(which='major', length=20, color='b')
ax.tick_params(which='minor', length=10, color='r') 
```

现在要强制网格线也出现在次要刻度线上，将 传递`which='minor'`给方法：

```
ax.grid(b=True, which='minor', axis='x', color='#000000', linestyle='--') 
```

或简单地用于`which='both'`绘制主要和次要网格线。这是一条更优雅的网格线：

```
ax.grid(b=True, which='minor', axis='both', color='#888888', linestyle='--')
ax.grid(b=True, which='major', axis='both', color='#000000', linestyle='-') 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-07-10T08:46:33.487

仅适用于水平线

```
ax = plt.axes()        
ax.yaxis.grid() # horizontal lines 
```

这有效

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-30T01:40:17.597

尝试：

```
plt.grid(True) 
```

这会打开日期系列的水平和垂直网格，主要刻度线在正确的位置。

使用 Python3/MatPlotLib 3.4.3

# java - 比较Java中的日期

> ID：16074398
> 
> 赞同：0
> 
> 时间：2013-04-18T04:18:05.770
> 
> 标签：java, string, date, compare, compareto

我已经阅读了日期函数，但我想不出解决问题的最佳方法。

我有几个来自数据库的日期`String`，我想将它与可能的当前日期进行比较。我正在使用`compareTo`，但使用此函数时出现问题，我猜这是因为我正在比较字符串。

这是我的功能：

```
public int dateCompare(String today, String date2){
    return today.compareTo(date2);
} 
```

当我在示例日期中使用它时：

```
dateCompare("04/19/2013","04/18/2013"); 
```

它返回 1，当我将第一个参数的值更改为它时，`"04/20/2013"`它仍然返回 1。

请帮忙...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T04:26:45.963

错误在于方法，

```
public int dateCompare(String today, String date2){
    return today.compareTo(date2);
} 
```

您将其视为 dateComparison，但请查看方法参数 String、String。

所以你实际上是在比较两个字符串。

您应该首先将这些字符串转换为日期...

喜欢，

```
public Date parseDate(String dateStr) {
    DateFormat df = new SimpleDateFormat("MM/dd/yyyy");
    return df.parse (dateStr);
}

public int dateCompare(String today, String date2){
    return (parseDate(today)).compareTo(parseDate(date2));
} 
```

**编辑 ：**

修改为多种格式：

```
public Date parseDate(String dateStr, String parsingFormat) throws SomeParsingException {
    DateFormat df = new SimpleDateFormat("MM/dd/yyyy");
    return df.parse (dateStr);
}

public Date parseDate (String dateStr) throws SomeException  {
    Date d1 = null;
    try {
        d1 = parseDate(dateStr, "MM/dd/yyyy");
    } catch (SomeParsingException  ex) {
        try {
           d1 = parseDate(dateStr, "MM-dd-yyyy");

        } catch (SomeParsingException  ex) {
             try {
                 d1 = parseDate(dateStr, "MM.dd.yyyy");
             } catch(SomeParsingException  ex) {
                 throw SomeException ("Unparseable date");
             }
        }
    }
   return d1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:23:59.043

Java有一个`Date`对象。您应该改用它。

```
import java.util.Calendar;
import java.util.Date;

public class CompareDates {

    public static void main(String[] args) {
        // Create a calendar, this will default to today
        Calendar cal = Calendar.getInstance();
        // Subtract 1 day
        cal.add(Calendar.DATE, -1);
        // Compare the result (1)
        System.out.println(dateCompare(new Date(), cal.getTime()));
        // Add 2 days
        cal.add(Calendar.DATE, 2);
        // Compare the result (-1)
        System.out.println(dateCompare(new Date(), cal.getTime()));            
    }

    public static int dateCompare(Date today, Date date2) {
        System.out.println("Compare " + today + " with " + date2);
        return today.compareTo(date2);
    }
} 
```

您也可以只使用`Date`API 并使用`before`和`after`...

```
Date now = new Date();

Calendar cal = Calendar.getInstance();
cal.add(Calendar.DATE, -1);
System.out.println(now + " isBefore " + cal.getTime() + " = " + now.before(cal.getTime()));
System.out.println(now + " isAfter " + cal.getTime() + " = " + now.after(cal.getTime()));
cal.add(Calendar.DATE, 2);
System.out.println(now + " isBefore " + cal.getTime() + " = " + now.before(cal.getTime()));
System.out.println(now + " isAfter " + cal.getTime() + " = " + now.after(cal.getTime())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-19T16:18:34.450

这是我用过最快的......

```
Calendar cal1 = Calendar.getInstance();
Calendar cal2 = Calendar.getInstance();
cal1.setTime(date1);
cal2.setTime(date2);
boolean sameDay = cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR) && cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR); 
```

# java - 我使用 charAt 的循环不起作用

> ID：16074400
> 
> 赞同：0
> 
> 时间：2013-04-18T04:18:36.557
> 
> 标签：java

我需要这个循环的帮助。基本上我想做的是运行一个循环。当数组字符串 champs 包含字符“B”作为其首字母时，它将同时显示时间和冠军。

有人能告诉我我做错了什么或者为什么它没有出现吗？我从中收到的输出只是“Time Champs”

```
public static void displayTeam(short[] time, String[] champs){
    System.out.println("time     Champs");
    for(int a= 0; a < time.length; a++){
        char fletter=champs[a].charAt(0);
        if("B".equals(fletter)){
            System.out.println(time[a] + "     " + champs[a]);
        }
    }
} 
```

感谢所有帮助和贡献的人。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-18T04:21:46.130

替换这个：

```
if("B".equals(fletter)) 
```

有了这个：

```
if('B' == fletter) 
```

`==`用于原始值是安全的，例如`char`.

由于`fletter`是 a `char`，因此您的代码所发生的事情相当复杂。乍一看，人们可能想知道这甚至是如何编译的。发生的事情是以`String.equals`a`Object`作为参数。因为`fletter`是 a `char`，所以它被[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)成一个`Character`对象。然后 String`"B"`检查它是否等于它的参数，注意到它的参数甚至不是 a `String`，并返回`false`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T04:22:02.020

这不起作用，因为 String 和 char 之间存在差异。不同之处在于一个是原始值，一个不是，并且通过使用双引号而不是单引号，您正在创建一个字符串而不是字符使用单引号:)

# c# - 使用 Async 和 Await 进行异步编程

> ID：16074401
> 
> 赞同：10
> 
> 时间：2013-04-18T04:18:38.707
> 
> 标签：c#, .net-4.0, async-await, c#-5.0, async-ctp

我正在浏览本教程，了解如何在 c# 中进行异步编程，但遇到了一个我不知道如何解决的错误。这是链接： http: [//msdn.microsoft.com/en-us/library/hh191443.aspx](http://msdn.microsoft.com/en-us/library/hh191443.aspx)，错误是：

```
Cannot find all types required by the 'async' modifier.  
Are you targeting the wrong framework version, or missing a reference to an assembly? 
```

我的目标是 .NET 4.0 框架，但不确定是否需要任何其他程序集。

这是代码：

```
public async Task<string> AccessTheWebAsync(Class1 class1, Class2 class2)
{
  // GetStringAsync returns a Task<string>. That means that when you await the 
  // task you'll get a List<string> (urlContents).
  Task<string[]> listTask = GetList(class1);

  // send message task

  // You can do work here that doesn't rely on the string from GetStringAsync.
  //CompareService();

  // The await operator suspends AccessTheWebAsync. 
  //  - AccessTheWebAsync can't continue until getStringTask is complete. 
  //  - Meanwhile, control returns to the caller of AccessTheWebAsync. 
  //  - Control resumes here when getStringTask is complete.  
  //  - The await operator then retrieves the string result from getStringTask. 
  string[] listContents = await listTask;

  // The return statement specifies an integer result. 
  // Any methods that are awaiting AccessTheWebAsync retrieve the length value. 
  return listContents;
}

public Task<string[]> GetList(Class1 class1)
{
    var taskArray = Task<string[]>.Factory.StartNew(() => GenerateResults(class1));
    return taskArray;
}
public string[] GenerateResults(Class1 class1)
{
    string[] results = new string[2];
    results[1] = "";
    results[2] = "";
    return results;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T05:09:12.690

> 我的目标是 .NET 4.0 框架，但不确定是否需要任何其他程序集

可以`async/await`在 .NET 4.0 中运行代码而无需安装 .NET 4.5，[包括或引用`AsyncCtpLibrary.dll`自 Async CTP](https://stackoverflow.com/questions/15338907/where-can-i-find-a-tpl-dataflow-version-for-4-0/15972581#15972581)。在 Windows XP 上安装 .NET 4.5 或 Visual Studio 2012 是不可能的，并且没有安装 .NET 4.5 的 .NET 4.0 与安装了 .NET 4.5 的 .NET 4.0 不同。
例如，阅读以下讨论：

*   在 MSDN 论坛上：[“如果我以 .net 4.0 为目标，但在具有 .net 4.5 的机器上运行，.net 4.0 WPF 错误仍然存​​在吗？”](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/c05a8c02-de67-47a9-b4ed-fd8b622a7e4a/)

我不建议在没有 .NET 4.5 的机器上使用 Nuget 来获取 .NET 4.0 的扩展，因为它确实为错误的 .NET 4.5 或来自 .NET 4.5 的 .NET 4.0 带来了兼容包，与没有 .NET 4.5 的 .NET 4.0 不兼容

但是您的代码有语法错误

你应该在方法声明中有返回类型`Task<string[]>`，而不是你的，即你应该写： `Task<string>``AccessTheWebAsync()`

```
public async Task<string[]> AccessTheWebAsync(Class1 class1, Class2 class2)() 
```

代替

```
public async Task<string> AccessTheWebAsync(Class1 class1, Class2 class2)() 
```

为了让这个方法返回 type 的值`string[]`：

```
return listContents;//where listContents is declared as string[] type 
```

**更新：**
检查 OP 的代码在我[真正的 .NET 4.0（没有 .NET 4.5 和 VS2012）具有异步 CTP 的 Windows XP 机器上运行此更正后](https://stackoverflow.com/questions/15338907/where-can-i-find-a-tpl-dataflow-version-for-4-0/15972581#15972581)

为什么我的回答被否决了？匿名...

很明显，如果 OP 提出这样的问题，他没有安装 .NET 4.5。如果不安装 VS2012，他将无法使用 引用[“Async for .NET Framework 4、Silverlight 4 和 5，以及 Windows Phone 7.5 和 8 1.0.16 的异步”的](http://nuget.org/packages/Microsoft.Bcl.Async)[异步目标包](http://blogs.msdn.com/b/lucian/archive/2012/04/24/async-targeting-pack.aspx)，而后者在 Wondows XP 和 Nuget 上根本不可能在 VS2010 中带来错误的包不兼容且无法在未安装 .NET 4.5 的情况下在 .NET 4.0 上使用

在可能的情况下检查了很多次

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-30T07:38:14.130

在***NuGet 管理器***中搜索**async**并安装**Microsoft Async以在**[.net4](/questions/tagged/.net4 "显示标记为“.net4”的问题")中运行/编码***`async``await`***

 ***[![](https://i.stack.imgur.com/YWExR.png)](https://i.stack.imgur.com/YWExR.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-07T14:52:44.567

您必须使用`BCL.Async`此处描述的库： [Using async without .net 4.5](http://blogs.msdn.com/b/bclteam/archive/2012/10/19/using-async-await-without-net-framework-4-5.aspx)***

# html - 多次尝试后，网站上的菜单栏未居中

> ID：16074402
> 
> 赞同：0
> 
> 时间：2013-04-18T04:18:49.663
> 
> 标签：html, css

我在一个没有居中的网站上有一个菜单栏。我到处都试过 text-align:center ，玩弄边距和位置，但无论屏幕大小如何，我似乎都无法让文本与主标题对齐。你们介意看看吗？

[http://jsfiddle.net/9sqkL/](http://jsfiddle.net/9sqkL/)

```
 <title>Test</title>
                <link rel="stylesheet" type="text/css" href="style.css">
                <link href='http://fonts.googleapis.com/css?family=Lato:300,700' rel='stylesheet' type='text/css'>
      </head>

      <body>
             <h1 style="text-align: center;">Test</h1>

      <div>
                <ul id="nav">
                <li ><a href="#" style="color:rgb(56,162,188);">HOME</a></li>
                <li ><a href="#" style="color:rgb(123,176,26);">PROJECTS</a></li>
                <li ><a href="#" style="color:rgb(243,45,93);">RESUME</a></li>
                <li ><a href="#" style="color:rgb(234,49,20);">CONTACT</a></li>
                <li ><a href="#" style="color:rgb(237,103,14);">ABOUT</a></li>
      </ul>
      </div> 
```

CSS：

```
h1, h2, h3, h4, h5, h6 {
      color: #26363d;
      font-family: "Lato", sans-serif;
      font-weight: 300;
      line-height: 1.3em;
}
h1 {
      font-size: 60;
}
h2 {
      font-size: 25px;
}
h3 {
      font-size: 21px;
}
h4 {
      font-size: 19px;
}
h5 {
      font-size: 17px;
}
h6 {
      font-size: 15px;
}
body {
      font-family: "Lato", sans-serif;
      background-image: url("background.png");
}

#nav {
    float: left;
width: 100% !important;
margin: 0 auto;
padding: 0;
list-style: none;
    }
#nav li {

    float: left;
    }
#nav ul li {
     display: inline;
}
#nav li a {
    display: block;
    padding: 8px 15px;
    text-decoration: none;
    font-weight: bold;
    border-right: 1px solid #ccc;
            }
#nav li a:hover {
    color: #c00;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:22:10.820

您正在使用`float: left;`，`width: 100%`这是错误的，因此您需要删除 100% 宽度，以便您可以使用`margin: auto;`并且不需要`float: left;`，因为您需要将菜单栏居中

此外，您需要一个固定的宽度，`#nav`以便您可以`margin: auto;`用于水平居中，当您添加元素时，只需更改`#nav`.

到目前为止，我一直保留`550px`以便您可以进行相应更改，我更改的唯一 CSS 是`#nav`

```
#nav {
    width: 550px;
    margin: auto;
    padding: 0;
    list-style: none;
} 
```

[**演示**](http://jsfiddle.net/9sqkL/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:25:58.960

有两个选项可以**定义您的父 div 宽度**而不是您可以定义**`magin:0 auto;`**

**像这样**

```
.mianNavcon{width:600px;margin:0 auto; // define your website } 
```

**HTML**

```
<div class="mianNavcon">
                <ul id="nav">
                <li ><a href="#" style="color:rgb(56,162,188);">HOME</a></li>
                <li ><a href="#" style="color:rgb(123,176,26);">PROJECTS</a></li>
                <li ><a href="#" style="color:rgb(243,45,93);">RESUME</a></li>
                <li ><a href="#" style="color:rgb(234,49,20);">CONTACT</a></li>
                <li ><a href="#" style="color:rgb(237,103,14);">ABOUT</a></li>
      </ul>
      </div> 
```

**[演示一](http://jsfiddle.net/rohitazad/9sqkL/4/)**

## ------------------

**第二个选项是**删除你的`ID nav`浮动`width`，现在定义

```
display inline-block; 
```

像这样

```
.mianNavcon{text-align:center;}
#nav {
       display:inline-block;
    padding: 0;text-align:left;
    list-style: none;
        } 
```

**[演示-2](http://jsfiddle.net/rohitazad/9sqkL/3/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:26:46.290

设置一个明确的绝对宽度，比如 481px (min) on`#nav`和 remove `float:left`。[演示](http://cssdeck.com/labs/acuw2bkq)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T04:25:08.127

您已经`float: left;`确定`ul`了导致问​​题的原因。您可以`display: inline-block;`使用`li`'s 和 add `text-align: center;`on`ul`以使导航内的所有项目居中。这样，您甚至不必在`ul`.

**[工作演示](http://cssdeck.com/labs/yiwp4j1q)**

如果您在 上指定固定宽度，`ul`则只需执行`margin: 0 auto;`.

希望有帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T05:03:07.367

如果您要使其具有响应性，那么您需要使用百分比来确定宽度和字体大小，请查看下面的链接。

您还需要使用媒体查询。

我给了 li 的宽度，当你浮动任何元素时，你甚至应该清除它。

```
#nav li {
  float: left;
  width: 20%;
  text-align: center;
  font-size: 85%;
}

/*to clear floating LI*/
#nav ul:after {
  visibility: hidden;
  display: block;
  font-size: 0;
  content: " ";
  clear: both;
  height: 0;
} 
```

[http://jsfiddle.net/madhuri2987/9sqkL/5/](http://jsfiddle.net/madhuri2987/9sqkL/5/)

希望这可以帮助！

# ruby-on-rails - mongoid .limit 在 mongoid 3.1.x 中不起作用

> ID：16074404
> 
> 赞同：13
> 
> 时间：2013-04-18T04:18:55.933
> 
> 标签：ruby-on-rails, mongodb, mongoid

我在带有 mongoid 3.1.0 和最新 3.1.3 的 rails 中尝试了类似的方法。.limit 不起作用。在它下面应该返回 1 行，但它会返回所有 (4)

代码：

```
@go = Gallery.limit(1)
logger.info "count: #{@go.count}" 
```

输出：

```
 count: 4
 MOPED: 54.234.11.193:10055 QUERY database=mongohqtestdatabase collection=galleries selector=  {"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (276.2010 
```

小姐）

哪个版本的 mongoid 适合 limit() ？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-19T16:12:09.200

该`limit`命令工作正常，但由于某种原因`count`忽略了限制。如果将其转换为数组，您会看到限制有效。

```
Array(Gallery.limit(1)).length  # this gives 1 
```

此外，如果您实际遍历对象，您会发现限制正在起作用。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-10-14T02:00:23.003

正如官方[Mongoid 回答](https://jira.mongodb.org/browse/MONGOID-2981)中所建议的那样，我们应该使用`Gallery.limit(1).count(true)`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-19T20:20:50.453

对于 Mongoid 5，`CollectionView#count`更改的参数：

```
 # Get a count of matching documents in the collection.
    #
    # @example Get the number of documents in the collection.
    #   collection_view.count
    #
    # @param [ Hash ] options Options for the count command.
    #
    # @option options :skip [ Integer ] The number of documents to skip.
    # @option options :hint [ Hash ] Override default index selection and force
    #   MongoDB to use a specific index for the query.
    # @option options :limit [ Integer ] Max number of docs to return.
    # @option options :max_time_ms [ Integer ] The maximum amount of time to allow the
    #   command to run.
    #
    # @return [ Integer ] The document count.
    #
    # @since 2.0.0 
```

所以你可以做类似的事情

```
collection.count(limit: 1) # => 1 
```

# ruby-on-rails - Rails 视图中外键记录的名称

> ID：16074406
> 
> 赞同：0
> 
> 时间：2013-04-18T04:19:01.243
> 
> 标签：ruby-on-rails

如何在 Rails 视图中找到外键的记录名称？

例如，我有一个列出以下内容的视图：

```
<% @cycles.each do |cycle| %>
  <tr>
    <td><%= cycle.name %></td>
    <td><%= cycle.program.try(:name) %></td>
    <td><%= cycle.previous_cycle_id %></td>
    <td><%= cycle.next_cycle_id %></td> 
```

例如`cycle.previous_cycle_id`，我希望它打印出循环的名称，而不是打印出 1，所以循环一。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:23:07.583

除非您将前一个循环的名称存储在当前循环中（或内存中的其他位置），否则您必须查询数据库才能找到该名称。在你的情况下

```
<%= Cycle.find(cycle.previous_cycle_id).name %> 
```

# java - 在 Android 中遇到文件 I/O 问题

> ID：16074408
> 
> 赞同：0
> 
> 时间：2013-04-18T04:19:21.827
> 
> 标签：java, android, file-io

这是我的代码：

```
 String path = "/data/data/edu.bfit.readwritedemo/files/test.txt";
    FileInputStream fis;
    File file = new File(this.getFilesDir().getAbsolutePath() + path);
    try {
            fis = new FileInputStream(file);
            sBuffer = new StringBuffer();
            BufferedReader dataIO = new BufferedReader(new InputStreamReader(fis));
            while((strLine = dataIO.readLine()) != null)    
                sBuffer.append(strLine + "\n");
            strLine.substring(0,4);
            dataIO.close();
            fis.close();
            Toast.makeText(ActivityOne.this, "read successful!!", Toast.LENGTH_SHORT).show();
    } catch (IOException e) {
        Toast.makeText(ActivityOne.this, "read failed!!", Toast.LENGTH_SHORT).show();
        e.printStackTrace();
    } 
```

该文件一直无法打开。我觉得问题出在路径上，这就是我感到困惑的地方。我出于测试目的手动创建了 test.txt 并将其存储在项目根目录中的一个目录中。我将此目录命名为文件，这是我要为文件对象指向的路径。我对这一切都错了吗？我的主要目标是能够读取 Android 系统上的系统文件并搜索子字符串。在此先感谢，我为墙上的文字道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:33:07.377

使用类似这样的东西...这将转到“下载”文件夹，但您可以将该变量更改为其他系统变量。

```
文件路径=Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS);
文件 textFile = new File(path, "test.txt");
```

# c# - 使用 C# 将 BMP 图像转换为 PNG。阿尔法通道改变？

> ID：16074410
> 
> 赞同：2
> 
> 时间：2013-04-18T04:19:24.967
> 
> 标签：c#, image

我有具有 alpha 通道透明度的位图图像。我正在将此 BMP 图像转换为 PNG 格式。这是我的代码：

```
string tmp = @"c:\mypath\imageName";
using (Bitmap changeFormat = new Bitmap(tmp+".bmp"))
{
    changeFormat.Save(tmp + ".png", ImageFormat.Png)
} 
```

一切正常。我现在有一个 PNG 图像，但 alpha 通道现在是白色而不是透明的（它在 BMP 图像中）。

Ps：测试窗口 XP，在窗口 7 中打开时的 PNG imgae 没问题。并用 Gimp soft 打开。

# delphi - 在 Delphi 中返回本地 IXmlDocument 的克隆 XmlNode 是否安全？

> ID：16074411
> 
> 赞同：1
> 
> 时间：2013-04-18T04:19:30.430
> 
> 标签：delphi, xmldocument

我在德尔福 XE2 上。我有一个通用函数，它接受一个 XML 字符串并返回根 IXmlNode 的 CloneNode。它应该用于将 XMLDocument 的设置通用化。函数内部简单地使用一个局部变量 IXMLDocument 并调用 NewXMLDocument 之类的东西并修改一些解析选项。

但我发现偶尔访问外部返回的克隆节点的字段会产生 AV，主要是在访问 ChildNodes 字段时。

出现这样的问题是因为局部变量 IXMLDocument 在函数结束时超出范围，因此接口引用计数机制释放了它，而忽略了它是否有任何克隆节点？

# c++ - 尝试理解 C++ 中的基本正则表达式函数

> ID：16074412
> 
> 赞同：0
> 
> 时间：2013-04-18T04:19:38.963
> 
> 标签：c++, regex, expression

多年来，我已经在 Perl 中完成了正则表达式，现在正尝试在 C++ 中使用它们。虽然有一些问题。我想解析一个字符串，例如`translate(0.0,-572.36218)`并获取 2 个数值。

这是我到目前为止所拥有的：

```
std::cmatch m;
std::regex e("([-|\.|0-9]*),([-|\.|0-9]*)" );  

std::regex_search ("translate(0.0,-572.36218)",m,e);
float xTransform = atof(m[1].first);
float yTransform = atof(m[2].first); 
```

但是，当我查看调试器中的值时，我看到的是：

```
m[0].first = "0.0,-572.36218)"
m[1].first = "0.0,-572.36218)"
m[3].first = "-572.36218)"; 
```

如果我使用正则表达式调试工具（如 The Regex Coach），我可以看到我的正则表达式在语法上是正确的。我想我只是不知道我这样做是否正确，或者如何从`cmatch`实例中提取我需要的数据。

更新：我一定真的错过了一些东西，因为如果我将正则表达式更改为：

```
std::regex e("([0-9])"); 
```

m 返回只有 2 个条目，每个条目的第一个元素 = "0.0,-572.36218)"。为什么这与括号匹配是超出我的。而且 [0-9] 似乎没有效果..它只匹配每个字符。非常令人毛骨悚然。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T04:28:17.040

你应该用过`\\.`. 当您使用`\.`时，它匹配整个字符串 - 因为`\.`被 C 转义为 simple `.`。后来`.`乘以`*`in`[-|.|0-9]*`以匹配任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:38:32.883

其他人已经指出需要避开 RE 中的反斜杠。C++11 提供了一种替代方案：原始字符串文字。例如：

```
std::regex e(R"(([-|\.|0-9]*),([-|\.|0-9]*))"); 
```

请注意，这里的开始分隔`"(`符是，结束分隔符是`)"`，所以我在你的字符串中添加了一个额外的“（”和“）”。

在定义 RE 时，大量使用`\`使得原始字符串文字特别方便。

# python - Python如何训练朴素贝叶斯分类器

> ID：16074414
> 
> 赞同：2
> 
> 时间：2013-04-18T04:19:41.413
> 
> 标签：python, classification

我需要一个分类器来将评论分类为正面或负面。对于每个文档，我已经完成了停用词过滤和词形还原，并计算了每个术语的 tf-idf 并将它们存储到 doc_bow 中，如下所示为每个文档。

```
doc_bow.append((term,tfidf)). 
```

现在，我想训练分类器，但我不知道该怎么做。[我从http://streamhacker.com/2010/10/25/training-binary-text-classifiers-nltk-trainer/](http://streamhacker.com/2010/10/25/training-binary-text-classifiers-nltk-trainer/)找到了一个例子，但我仍然无法理解。td-idf 将如何使用或影响分类器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:34:28.670

我对这方面知之甚少，但我可以分享我所了解的。如果我错了，请纠正我。从我从链接中看到的，没有提到使用 tf-idf 分数进行分类。您应该查看[链接](http://streamhacker.com/2010/05/10/text-classification-sentiment-analysis-naive-bayes-classifier/)以了解如何使用朴素贝叶斯分类器。一般来说，代码看起来像这样（我从那个链接中获取了这个代码段）

```
import nltk.classify.util
from nltk.classify import NaiveBayesClassifier
from nltk.corpus import movie_reviews

def word_feats(words):
    return dict([(word, True) for word in words])

negids = movie_reviews.fileids('neg')
posids = movie_reviews.fileids('pos')

negfeats = [(word_feats(movie_reviews.words(fileids=[f])), 'neg') for f in negids]
posfeats = [(word_feats(movie_reviews.words(fileids=[f])), 'pos') for f in posids]

negcutoff = len(negfeats)*3/4
poscutoff = len(posfeats)*3/4

trainfeats = negfeats[:negcutoff] + posfeats[:poscutoff]
testfeats = negfeats[negcutoff:] + posfeats[poscutoff:]
print 'train on %d instances, test on %d instances' % (len(trainfeats), len(testfeats))

classifier = NaiveBayesClassifier.train(trainfeats) 
```

每个训练实例都是特征字典和类标签的元组，例如，它可以是`({"sucks":True, "bad":True, "boring":True}, "Negative")`

至于数字属性，我认为一种常见的方法是将它们分类为低/中/高等类别。

关于`TF-IDF`分数，我不是很确定。我认为一种方法是它们可用于功能选择，例如，如果您没有。of features 太大，您可以将前 n 个单词作为特征。

# iphone - UIPageViewController - 视图控制器上的透明区域混合错误

> ID：16074421
> 
> 赞同：1
> 
> 时间：2013-04-18T04:20:20.363
> 
> 标签：iphone, ios, ipad, uikit, uipageviewcontroller

有没有办法告诉 UIPageViewController 不要对 alpha 值为 0 的像素进行阴影或混合？现在这些区域显示为半透明，看起来非常糟糕。

更好的是指定我自己的阴影路径的方法。

![例子](https://i.imgur.com/5IQE0UG.png)

# constraints - Neo4j 客户端：如果已经达到最大关系数，我们可以抛出异常吗？

> ID：16074422
> 
> 赞同：0
> 
> 时间：2013-04-18T04:20:27.280
> 
> 标签：constraints, relationship, neo4jclient

如果我有一对多的关系，比如 1 Vehicle 有 1 到 4 个轮子，如果有人试图打电话

graphClient.Create(wheel, new VehicleHasWheel(vehicle.Reference));

我们可以期望 graphClient 抛出一个异常，所以我们的汽车上没有 5 个轮子吗？

我们可以将关系 CarHasWheel 的最大值定义为 4。

现在，如果我必须检查约束，我需要手动查询数据库以获取现有轮子，然后决定是否应该创建另一个轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:10:30.783

Neo4j 没有在框中提供这些类型的约束，因为它没有办法指定这样的模式。

您可以通过 Cypher 查询进行突变来实现类似的解决方案：

```
START ...
WHERE ...
CREATE ... 
```

这将您的两个查询（决定，然后变异）集成为一个。

要知道是否创建了某些内容，请将其返回：

```
START ...
WHERE ...
CREATE ...
RETURN ... 
```

# php - 日期选择器 + PHP + MySQL

> ID：16074423
> 
> 赞同：0
> 
> 时间：2013-04-18T04:20:56.690
> 
> 标签：php, mysql, date, datepicker

在同一页面中，我有一个日期选择器和以下代码：

```
 <?php

$query = mysqli_query($conn, " SELECT * FROM divulgacaoEventos ORDER BY datepicker ") or die(mysqli_errno("Não há registro de eventos."));
$row = mysqli_num_rows($query);
if($row != 0){
    while ($evento = mysqli_fetch_object($query)){

        echo "Evento: ".$evento->eventName."<br/>";
        echo "Local: ".$evento->local."<br/>";
        echo "Cidade: ".$evento->cidadeEstado."<br/>";
        echo "Data: ".$evento->datepicker."<br/>";
        echo "Hora: ".$evento->hour."<br/>";
        echo "Atrações: ".$evento->atracoes."<br/>";
        echo "Contato: ".$evento->contato."<br/>";
        echo "R$: ".$evento->valorIngresso01." ".$evento->tipoIngresso01."<br/>";
        echo "R$: ".$evento->valorIngresso02." ".$evento->tipoIngresso02."<br/>";
        echo "R$: ".$evento->valorIngresso03." ".$evento->tipoIngresso03."<br/>";
        echo "R$: ".$evento->valorIngresso04." ".$evento->tipoIngresso04."<br/>";

        echo "<br/>";

    }
    }else{
        echo "No registers.";
        }
?> 
```

所有数据都正常显示，我可以按日期排序结果，但我想与 datepicker 关联，并且仅在单击日期时显示数据（按日​​期排序）。我尝试了一些数组函数，但失败了。也尝试过 onSelect 但没有成功。我会很感激你的帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:25:29.657

~~您必须在查询中添加`DESC`或`ASC`您想要的任何内容..~~

 ~~```
SELECT * FROM divulgacaoEventos ORDER BY datepicker 
```~~ 

应该

```
SELECT * FROM divulgacaoEventos ORDER BY datepicker DESC 
```

 ~~# **更新：**

您根据所选日期表示数据的概念略有不同，您要做的是，只需检测日期选择事件并将 AJAX 请求发送到您的 PHP 页面，其中包含一些数据，如所选日期`DATE`并显示您想要的结果。

**并确保您也熟悉 jQuery**。[jQuery 阿贾克斯](http://api.jquery.com/jQuery.ajax/)

查看帮助您在选择日期后生成 AJAX 请求的链接。

[Jquery UI Datepicker onclick 事件](https://stackoverflow.com/questions/10396480/jquery-ui-datepicker-onclick-event)~~

# c++ - 大整数除法 - Knuth 算法 D

> ID：16074424
> 
> 赞同：1
> 
> 时间：2013-04-18T04:20:58.043
> 
> 标签：c++, integer-division

我必须使用 Knuth 的算法 D（编程艺术第 2 卷）使用大整数除法将任何数字（无论大小）除以另一个数字，`74839234`例如`72548`.

我做了两个数组来表示这些数字

```
n[] = {7,4,8,3,9,2,3,4}
d[] = {7,2,5,4,8} 
```

我试图得到这样的输出：

```
q[] = {1,0,3,1}
r[] = {4,2,2,4,6} 
```

我真的不知道从哪里开始。任何帮助或指导将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T09:07:06.230

在 D1 你有`d=1`，所以设置

```
n[]={0,7,4,8,3,9,2,3,4} 
```

`n = 5`, `m = 3`.

此外，步骤 D4 中存在形式错误：（第二行）应该是...

`minus q(hat) times (v1, v2, ..., vn)b TIMES b ** (m - j)`.

在这里，** 表示“力量”（便于书写的 Fortran 风格）。当然，`b = 10`这里，所以

`times b ** (m - j)`将减数左移到适当的位置进行减法。

# iphone - 标签未显示且图像未保存

> ID：16074425
> 
> 赞同：1
> 
> 时间：2013-04-18T04:21:14.490
> 
> 标签：iphone, ios, objective-c, ios5, ios4

我在工具栏上创建了 UILabels，但是当我尝试在 iOS 4.3 版上使用它时，它没有显示出来。

标签在部署目标为 6 时显示，但当部署目标更改为 4.3 时，它不起作用..

和

我正在使用保存按钮将图像保存在 iOS 4.3 中，但它给出了错误（即图像未保存）。（在 iOS 5.0 ,5.5 ,6.0 和 6.1 中它工作正常）。

我正在使用这些代码来保存图像（我正在使用的任何一个）。

```
 UIImage *viewImage = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:self.imageURL]]];
NSLog(@"UIImage : %@",viewImage);
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

[library writeImageToSavedPhotosAlbum:[viewImage CGImage] orientation:(ALAssetOrientation)[viewImage imageOrientation] completionBlock:^(NSURL *assetURL, NSError *error){

    if (error) {
        NSLog(@"error");
    } else {
        NSLog(@"URL IS  %@", assetURL);
        [self assignDictonary:viewImage withURL:assetURL withMediaType:@"public.image"];

    }
}];
    [library release]; 
```

或者

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,(unsigned long)NULL), ^(void) {
    UIImageWriteToSavedPhotosAlbum([UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:self.imageURL]]], self, @selector(image:didFinishSavingWithError:contextInfo:), nil);
}); 
```

任何人都可以建议我必须做些什么来在工具栏上显示这些标签并保存适用于 iOS 上所有版本的图像代码..（即 4.3、5.0、5.1、6.0、6.1）..

# android - Android - 以编程方式将文件上传到 .NET 服务器，带有元数据

> ID：16074427
> 
> 赞同：0
> 
> 时间：2013-04-18T04:21:23.033
> 
> 标签：android, .net, http, upload

我知道这个问题似乎有点具体，但我原以为这是一个很常见的场景。我的目标是将图像（~8 mb）上传到服务器。服务器运行 .NET（我相信没有 php），但我不仅需要上传文件，还需要传递一些文本信息。我该怎么做？我的客户端和服务器代码会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:16:32.057

我使用`.Net`WebService 上传`Database`文件。同样，您可以将其用于`Image`上传。

[项目链接](https://github.com/Abhan/SoapWithoutKSoap)

下载这个演示。

在该包中添加这些文件。

`1\. OutputStream.java`

```
package com.abhan.example;

public class OutputStream extends java.io.FilterOutputStream {

    public final static int ENCODE = 1;
    public final static int DO_BREAK_LINES = 8;
    private final static int MAX_LINE_LENGTH = 76;
    private final static byte NEW_LINE = (byte)'\n';
    private final static byte WHITE_SPACE_ENC = -5;
    private boolean encode;
    private int     position;
    private byte[]  buffer;
    private int     bufferLength;
    private int     lineLength;
    private boolean breakLines;
    private byte[]  b4;
    private boolean suspendEncoding;
    private int     options;
    private byte[]  decodabet;

    public OutputStream( java.io.OutputStream out ) {
        this( out, ENCODE );
    }

    public OutputStream( java.io.OutputStream out, int options ) {
        super( out );
        this.breakLines   = (options & DO_BREAK_LINES) != 0;
        this.encode       = (options & ENCODE) != 0;
        this.bufferLength = encode ? 3 : 4;
        this.buffer       = new byte[ bufferLength ];
        this.position     = 0;
        this.lineLength   = 0;
        this.suspendEncoding = false;
        this.b4           = new byte[4];
        this.options      = options;
        this.decodabet    = Base64.getDecodabet(options);
    }

    @Override
    public void write(int theByte) 
    throws java.io.IOException {
        if( suspendEncoding ) {
            this.out.write( theByte );
            return;
        }

        if( encode ) {
            buffer[ position++ ] = (byte)theByte;
            if( position >= bufferLength ) { 
                this.out.write( Base64.encode3to4( b4, buffer, bufferLength, options ) );
                lineLength += 4;
                if( breakLines && lineLength >= MAX_LINE_LENGTH ) {
                    this.out.write( NEW_LINE );
                    lineLength = 0;
                }
                position = 0;
            } 
        } else {
            if( decodabet[ theByte & 0x7f ] > WHITE_SPACE_ENC ) {
                buffer[ position++ ] = (byte)theByte;
                if( position >= bufferLength ) {
                    int len = Base64.decode4to3( buffer, 0, b4, 0, options );
                    out.write( b4, 0, len );
                    position = 0;
                }
            }   
            else if( decodabet[ theByte & 0x7f ] != WHITE_SPACE_ENC ) {
                throw new java.io.IOException( "Invalid character in Base64 data." );
            } 
        }   
    }  

    @Override
    public void write( byte[] theBytes, int off, int len ) 
    throws java.io.IOException {
        if( suspendEncoding ) {
            this.out.write( theBytes, off, len );
            return;
        }

        for( int i = 0; i < len; i++ ) {
            write( theBytes[ off + i ] );
        } 
    } 

    public void flushBase64() throws java.io.IOException  {
        if( position > 0 ) {
            if( encode ) {
                out.write( Base64.encode3to4( b4, buffer, position, options ) );
                position = 0;
            } 
            else {
                throw new java.io.IOException( "Base64 input not properly padded." );
            } 
        } 
    }  

    @Override
    public void close() throws java.io.IOException {
        flushBase64();
        super.close();
        buffer = null;
        out    = null;
    } 

    public void suspendEncoding() throws java.io.IOException  {
        flushBase64();
        this.suspendEncoding = true;
    } 

    public void resumeEncoding() {
        this.suspendEncoding = false;
    }
} 
```

`2\. Utils.java`

```
package com.abhan.example;

import java.io.BufferedInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.GregorianCalendar;
import android.os.Environment;

public class Utils {

    public static boolean checkExternalStorageAvailable() {
        boolean mExternalStorageAvailable = false;
        String state = Environment.getExternalStorageState();
        if(state.equals(Environment.MEDIA_MOUNTED)) {
            mExternalStorageAvailable = true;
        } else if(state.equals(Environment.MEDIA_MOUNTED_READ_ONLY)) {
            mExternalStorageAvailable = false;
        } else if(state.equals(Environment.MEDIA_NOFS)) {
            mExternalStorageAvailable = false;
        } else if(state.equals(Environment.MEDIA_SHARED)) {
            mExternalStorageAvailable = false;
        } else if(state.equals(Environment.MEDIA_UNMOUNTABLE)) {
            mExternalStorageAvailable = false;
        } else if(state.equals(Environment.MEDIA_UNMOUNTED)) {
            mExternalStorageAvailable = false;
        } else if(state.equals(Environment.MEDIA_REMOVED)) {
            mExternalStorageAvailable = false;
        } 

        return mExternalStorageAvailable;
    }

    public static String dataDirectory() {
        String dataDir = null;
        if(checkExternalStorageAvailable()) {
            dataDir = Environment.getDataDirectory().getAbsolutePath();
        }
        return dataDir;
    }

    public static boolean createDirectory(final String dirName) {
        boolean isDirectoryCreated = false;
        if(checkExternalStorageAvailable()) {
            File dirFile = new File(dirName);
            if(!dirFile.exists()) {
                dirFile.mkdirs();
                isDirectoryCreated = true;
            }
        }

        return isDirectoryCreated;
    }

    public static boolean deleteDirectory(final String dirName) {
        boolean isDirectoryDeleted = false;
        if(checkExternalStorageAvailable()) {
            File dirFile = new File(dirName);
            if(!dirFile.exists()) {
                isDirectoryDeleted = false;
            } else {
                dirFile.delete();
                isDirectoryDeleted = true;
            }
        }

        return isDirectoryDeleted;
    }

    public static String todayDate(final String providedFormat) {
        String returnedDateString = null;
        try {
            Calendar calendar = new GregorianCalendar();
            DateFormat dateFormat = new SimpleDateFormat(providedFormat);
            returnedDateString = dateFormat.format(calendar.getTime());
        } catch (Exception e) {
            e.printStackTrace();
        }

        return returnedDateString;
    }

    public static byte[] convertDatabaseFileToArray(final String filePath) {
        InputStream inputStream = null;
        ByteArrayOutputStream byteOutputStream = null;
        try {
            inputStream = new BufferedInputStream(
                    new FileInputStream(new File(filePath)), 8192);
            byte[] buffer = new byte[8096];
            byteOutputStream = new ByteArrayOutputStream();
            int length = 0;
            while((length = inputStream.read(buffer)) != -1) {
                byteOutputStream.write(buffer, 0, length);
            }
            if(inputStream != null) {
                inputStream.close();
            }
            if(byteOutputStream != null) {
                byteOutputStream.flush();
                byteOutputStream.close();
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return byteOutputStream.toByteArray();
    }
} 
```

`3\. Base64.java`

要下载此文件，您可以使用[GrepCode](http://grepcode.com/) Search。

根据您在 Web 服务中的需要使用编码字节/字符串`Base64`并将其传递给您的参数。

在`MainActivity.java`更改以下内容。

```
final String filePath = Utils.dataDirectory() + File.separator + "data"
                + File.separator + MainActivity.this.getPackageName() 
                + File.separator + "databases" + File.separator + "My_DB";
final String todayDate = Utils.todayDate("Your_Preferred_Format");
final String param0 = "http://121.121.121.121/mWebService/Abhan.asmx";
final String param1 = "121.121.121.121";
final String param2 = "http://localhost/mWebService/UploadFile";
final String param3 = getTopOfHeader()
+ "<UploadFile xmlns=\"http://localhost/mWebService\">"
                + "<FileArray>" + Base64.encodeBytes(Utils.convertDatabaseFileToArray(filePath)) + "</FileArray>" 
                + "<Filename>" + todayDate + "_1234567890_My_DB.db" + "</Filename>" 
                + "<Number>1234567890</Number>" 
                + "</UploadFile>"
                + getBottomOfHeader(); 
```

在这个演示中，我使用了`Local Service`. 请将其更改为您的`Live`或`Local`Web 服务。此外，我还在`Database`. `\data\data\databases\My_DB`您可以删除不必要的代码。

运行演示。

谢谢。

# asp.net-mvc - IIS7.5 - 在一个域下托管 ASP.NET MVC 应用程序和 ColdFusion 应用程序

> ID：16074429
> 
> 赞同：0
> 
> 时间：2013-04-18T04:21:45.470
> 
> 标签：asp.net-mvc, coldfusion, iis-7.5, coldfusion-10

我们正在开发和部署一个 ASP.NET MVC 应用程序，该应用程序将提供新功能以最终替换一个 ColdFusion 应用程序，我们仍然需要在同一个域下保持活跃。我们如何在 IIS 中进行设置？ColdFusion 应用程序已在 IIS 中设置并运行。我们只需要让 MVC 应用程序中的几个页面也处于活动状态。已经考虑过 URL 重写，但有大量 URL 需要考虑。有人提到摆弄处理程序。除了今晚重写 ColdFusion 应用程序的其余部分之外，我们欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T05:11:12.170

在发布此问题后，我们团队中的某个人合并了站点代码（ColdFusion 和 ASP.NET MVC），并让 IIS 处理程序负责运行它们。

# algorithm - 计算机视觉/增强现实：如何在视觉上叠加 3D 对象？

> ID：16074434
> 
> 赞同：1
> 
> 时间：2013-04-18T04:22:02.760
> 
> 标签：algorithm, graphics, computer-vision

我正在尝试创建一个示例应用程序，我可以在其中覆盖相机屏幕上的 3d 对象。它们将被放置在特定点，并在用户移动相机以改变视角时重新绘制每一帧。

从本质上讲，我希望复制这个：[http ://www.youtube.com/watch?v=EEstFtQbzow](http://www.youtube.com/watch?v=EEstFtQbzow)

这是我更准确地表述问题的尝试：考虑在初始对象放置时给定一个初始图像矩阵（代表所有 X、Y 像素坐标）。放置后，需要分析每个后续视频帧以重新定位已放置的对象，以便在给定新视角的情况下正确重新绘制（叠加）它。

我有一点计算机视觉方面的背景，但我不确定如何完成这项特定任务。作为参考，我要创建的示例应用程序将适用于 Android，因此如果有人知道现有代码，我也可以利用它。但是，我非常愿意被引导到描述我需要实现的算法的学术论文。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T10:07:53.327

你应该看看[Vuforia](https://developer.qualcomm.com/mobile-development/mobile-technologies/augmented-reality)，一个由 Qualcomm 开发的移动 SDK。它是免费的，并提供了许多工具来将增强现实添加到您的应用程序中。

据我所知，这也是来自 Augment 的人（在您的视频中）在他们的应用程序中使用的东西！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:15:27.723

这是计算机视觉中一个众所周知的问题。您可以参考各种论文，包括执行同步定位和映射 (SLAM) 的系统，这些系统可能使用捆绑调整或基于过滤器的跟踪。阅读有关这些主题的热门论文将使您深入了解现实世界中的相机和跟踪。

总而言之，您需要在每一帧中获取相机的 6D 位姿，即您需要确定*相机*在现实世界中的位置（平移）和指向的位置（旋转）。这通常是通过首先跟踪场景中的显着特征，估计它们的 3D 位置，然后使用这些特征的感知运动来计算每一帧中的相机姿势来完成的。您需要在现实世界中定义一个原点（您不能将相机用作您要解决的问题的原点），并至少有 4 个已知/测量点作为参考。在您问题中包含的视频中，Augment 似乎使用印刷图案来获取初始相机姿势。然后他们跟踪现实世界中的特征以继续跟踪姿势。

一旦有了相机姿势，就可以使用投影在现实世界中定位 3D 对象。相机姿势被编码为基本/基本相机矩阵，使用它您可以将世界上的任何 3D 点转换为相机帧中的 2D 位置。因此，要在现实世界中渲染一个虚拟 3D 点，例如在 (x, y, z)，您将使用相机矩阵将 (x, y, z) 投影到 2D 点 (u, v)。然后在从相机获得的图像上渲染点。对要渲染的对象的每个点执行此操作，然后就完成了：)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T13:31:45.297

这是一个经典的问题。在电影视觉效果 (VFX) 行业中，它被称为匹配移动。它归结为解决给定图像序列的运动结构 (SfM) 问题，并专门估计相机内在参数和相对于任意原点的每一帧的位置/姿势（例如，在序列的第一帧）。

相关搜索词：“sfm”、“matchmoving”、“bundle adjust”、“ceres solver”。

谷歌的 Ceres 捆绑调节器已经开源，包括一个 Android 端口（在最近的版本中支持“球形”相机模式）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-29T23:43:28.013

这是关于如何使用 Metaio SDK 构建家具用例的分步教程（也是免费的，带有小水印-但它也有自己的渲染引擎，因此您可以使用或不使用统一本机代码）[http： //dev.metaio.com/sdk/tutorials/interactive-furniture/](http://dev.metaio.com/sdk/tutorials/interactive-furniture/)

独特之处在于，虽然您展示的视频中的示例仅限于使用标记，但 Metaio 的 sdk 允许您使用 SLAM 环境跟踪、图像/标记跟踪或 GPS 坐标跟踪来增强 3D 对象 - 也就是您可以使用或不使用标记来执行相同的操作。

有关跟踪配置 + 教程 + 实时网络研讨会 + 示例代码的所有其他信息都可以通过上面的链接找到。

希望这可以帮助。

# bit-manipulation - 错误代码 OR'd 一起

> ID：16074438
> 
> 赞同：0
> 
> 时间：2013-04-18T04:22:27.167
> 
> 标签：bit-manipulation

我无法弄清楚这一点，我可以使用一些帮助。因此，某些硬件的数据表显示“报告的错误代码是每个检测到的错误的 OR'd 结果。错误代码在表 3 中给出。”

表 3 是

```
0x00 -> No error
0x01 -> Power error
0x02 -> Receiver error
0x03 -> Transmitter error 
```

然后数据表显示了一个示例。

```
Example :
(ETV001T0C) + checksum -> Test status 0x0C (Rx and Tx error) 
```

0C 是错误字节。所以我的第一个问题是——我的数学错了吗？我不知道他们从哪里得到 0C。我很确定 0x02 | 0x03 = 0x03。其次，即使是 0C，您如何找出其中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T04:25:16.903

该表实际上给出了操作员使用的*位移位置*`<<`。

```
1 << 0x00 = 0001b (?) -> No error
1 << 0x01 = 0010b -> Power error
1 << 0x02 = 0100b -> Receiver error
1 << 0x03 = 1000b -> Transmitter error 
```

使用 python 作为计算器：

```
>>> (1 << 2) | (1 << 3)
12
>>> hex((1 << 2) | (1 << 3))
'0xc' 
```

# r - R ggplot2中心对齐多行标题

> ID：16074440
> 
> 赞同：23
> 
> 时间：2013-04-18T04:22:35.727
> 
> 标签：r, ggplot2

如果我有一个标题

```
... +
ggtitle('Something\nSomething Else\nSomething Else') 
```

有什么办法可以让每条线居中对齐而不是左对齐？

```
...+
theme(plot.title=element_text(hjust=0.5)) 
```

在中心给我文本，但左对齐。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-18T04:41:28.583

would this work for you,

```
# install.packages("ggplot2", dependencies = TRUE)
require(ggplot2)

DF <- data.frame(x = rnorm(400))
m <- ggplot(DF, aes(x = x)) + geom_histogram()
m + labs(title = "Vehicle \n Weight-Gas \n Mileage Relationship \n 
                 and some really long so that you can seee it's centered") + 
     theme(plot.title = element_text(hjust = 0.5)) 
```

![enter image description here](https://i.stack.imgur.com/uROWg.png)

sorry about the typos in the plot title …</p>

# java - 从控制台运行没问题，从 Eclipse 错误

> ID：16074442
> 
> 赞同：0
> 
> 时间：2013-04-18T04:22:47.900
> 
> 标签：java, eclipse

我对 Eclipse 快要发疯了。我编写了使用外部 jar 的简单测试类。当我从 Eclipse 运行时，它使用本机库 .dll，命令运行。这是我的堆栈跟踪：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: C:\Program Files\YAZ\bin\yaz4j.dll: The specified procedure could not be found
    at java.lang.ClassLoader$NativeLibrary.load(Native Method)
    at java.lang.ClassLoader.loadLibrary1(ClassLoader.java:1939)
    at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1864)
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1854)
    at java.lang.Runtime.loadLibrary0(Runtime.java:845)
    at java.lang.System.loadLibrary(System.java:1084)
    at org.yaz4j.Connection.<clinit>(Connection.java:56)
    at ru.Test.testConnection(Test.java:20)
    at ru.Test.main(Test.java:15) 
```

但是当我像这样从控制台运行这段代码时

```
java -cp "bin;C:\Program Files\YAZ\java\yaz4j.jar" ru.Test 
```

一切都很完美！这是相同的代码。**它如何在控制台中工作而不在 Eclipse 中工作？**

这里我如何将这个引用的 jar 插入到我在 Eclipse 中的项目中： ![在此处输入图像描述](https://i.stack.imgur.com/Nwvst.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:30:45.573

当本地方法无法链接时，您收到的消息是可怕的。我可以想到几个可能给出此消息的根本原因：

1.  从 Eclipse 加载时，该 DLL 没有加载其他一些依赖的 DLL。这由 Windows PATH 环境变量控制，当您在 Eclipse 中运行时，它可能会有所不同。
2.  这是一个 32 位 DLL，您在 Eclipse 下使用 64 位 JVM 运行，但从命令行运行 32 位（反之亦然）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T00:34:51.850

我有同样的问题，你需要 JDK 而不是 JRE 构建路径库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T10:55:29.967

几天来，我一直在努力解决完全相同的问题，现在尝试在我的项目中使用 YAZ 工具包。问题是本机库可以在各种测试计算机上正确加载，但不能在我的个人 PC 上。

**简而言之：**问题的原因是JVM加载了不正确的**libxml2.dll**和**libxslt.dll**依赖库。

当我从 IDE 启动 JVM 时，它开始在以下位置查找本机库：

1.  (jdk_home_dir)\jre\bin。在加载依赖库（除了主要的 yaz4j.dll 之外）时，在所有其他测试计算机上以某种方式**跳过**了此步骤。这样测试计算机就不会加载错误的 dll。
2.  (jdk_home_dir)\bin
3.  如果您设置 -Djava.library.path 参数，它将在此步骤中查找该目录
4.  %SystemRoot%\system32
5.  %系统根%
6.  为项目设置的工作目录（如果有）。**由于未知原因，在我的个人 PC 上跳过**了此步骤，但在所有其他测试计算机上都有效。
7.  路径％

[我已经通过使用Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)弄清楚了这一点。请注意，步骤 1 和 2 可以互换。

**名为yaz4j.dll**的 YAZ 工具包主 DLL对工具包中的其他 dll 进行二次调用：**libxml2.dll**和**libxslt.dll**（以及其他）。我的 JVM 在**(jdk_home)\jre\bin**目录中找到它们。它们似乎与 Java 捆绑在一起，并且与 YAZ 工具包中的那些明显不同。这意味着在这些 dll 中找不到 yaz4j.dll 调用的过程。这样就会抛出 UnsatisfiedLinkException。

无论环境 %path% 变量或 -Djava.library.path 开关如何，我的 JVM 似乎总是首先在**(jdk_home)\jre\bin中搜索本机库。**替换该目录中的 dll 可能会破坏一些 JVM 本机功能，因此我不建议这样做。

所以最后需要做的就是弄清楚如何让 JVM 加载正确的**libxml2.dll**和**libxslt.dll**库。

重新编译**yaz4.dll**以使其指向重命名的**libxml2.dll**和**libxslt.dll**可能是一个潜在的解决方案。

# c# - 如何以编程方式创建事件接收器？

> ID：16074443
> 
> 赞同：1
> 
> 时间：2013-04-18T04:22:48.983
> 
> 标签：c#, sharepoint-2010, event-receiver

我们正在以编程方式创建内容数据库、网站集和库。然后我们在文档库中上传文档。一旦以编程方式创建列表，我们想在 C# 中以编程方式（不使用 Visual Studio）创建事件接收器？还想以编程方式激活它们。有没有办法做到这一点？您能否提供任何代码，通过它我将获得分步指南？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:23:47.143

如果您可以在 Visual Studio 中使用事件接收器模板，并且为所需事件定义 C# 代码可能会解决您的目的。就像 ItemAdded 事件接收器一样，我做了如下简单的事情：

```
 public override void ItemAdded(SPItemEventProperties properties)
    {
        if (properties.ListTitle.Equals("cl2"))
        {
            using (SPSite site = properties.OpenSite())
            {
                using (SPWeb web = site.RootWeb)
                {
                    string sytr = web.Url.ToString();
                    string s = web.PortalUrl.ToString();
                    string sq = web.ServerRelativeUrl.ToString();
                    string str = site.Url.ToString();
                    SPListItem _currentItem = properties.ListItem;
                    cItem["Title"] = "Test";
                    cItem.Update();
                    base.ItemAdded(properties);
                }
            }
        }
    } 
```

# javascript - Node.innerHTML 以小写形式给出标签名称

> ID：16074446
> 
> 赞同：5
> 
> 时间：2013-04-18T04:23:19.053
> 
> 标签：javascript, dojo, innerhtml

我正在迭代**NodeList**以获取**Node**数据，但是在使用**Node.innerHTML**时，我正在获取小写的标签名称。

*实际标签*

```
<Panel><Label>test</Label></Panel> 
```

*作为*

```
<panel><label>test</label></panel> 
```

我需要这些标签。是否有可能用正则表达式得到它？我将它与道场一起使用（道场有什么办法吗？）。

```
var xhrArgs = {
            url: "./user/"+Runtime.userName+"/ws/workspace/"+Workbench.getProject()+"/lib/custom/"+(first.type).replace(".","/")+".html",
            content: {},
            sync:true,
            load: function(data){
                var test = domConstruct.toDom(data);
                dojo.forEach(dojo.query("[id]",test),function(node){
                    domAttr.remove(node,"id");
                });
                var childEle = "";
                dojo.forEach(test.childNodes,function(node){
                    if(node.innerHTML){
                            childEle+=node.innerHTML;
                    }
                });
                command.add(new ModifyCommand(newWidget,{},childEle,context));
            }
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:44:21.573

您不能指望`.innerHTML`保留原始 HTML 的确切性质。事实上，在某些浏览器中，不同的引号、大小写、属性顺序等存在显着差异（尽管生成相同的结果）......

最好不要依赖大小写的保存并调整你的javascript来处理不确定的大小写。

当然可以使用正则表达式进行不区分大小写的搜索（“i”标志将其搜索指定为不区分大小写），尽管使用直接 DOM 访问/搜索而不是 innerHTML 搜索通常要好得多。在我们提供一些代码之前，您必须告诉我们更多关于您到底想要做什么的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:29:06.733

如果您尝试将标签名称的第一个字符大写，则可以使用：

```
var s = 'panel';
s.replace(/(^.)(.*)/,function(m, a, b){return a.toUpperCase() + b.toLowerCase()}); // Panel 
```

或者，您可以使用字符串操作（可能比正则表达式更有效）：

```
s.charAt(0).toUpperCase() + s.substring(1).toLowerCase(); // Panel 
```

以上将输出任何输入字符串，其中第一个字符为大写，其他所有字符为小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:10:12.617

用正则表达式来解决这个问题需要我一点时间，但你可以使用它：

```
 var str = '<panel><label>test</label></panel>';
    chars = str.split("");
    for (var i = 0; i < chars.length; i++) {
        if (chars[i] === '<' || chars[i] === '/') {
           chars[i + 1] = chars[i + 1].toUpperCase();
        }
    }
    str = chars.join(""); 
```

[jsFiddle](http://jsfiddle.net/chris6334/JwsT4/8/)

我希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:57:21.783

这没有经过彻底测试，效率极低，但在控制台中运行得非常快：（也是 jquery，但它可以轻松转换为纯 javascript/DOM）

[在 jsFiddle](http://jsfiddle.net/CnuFh/)

```
function  tagString (element) {
    return $(element).
            clone().
            contents().
            remove().
            end()[0].
            outerHTML.
            replace(/(^<\s*\w)|(<\/\s*\w(?=\w*\s*>$))/g,
                    function (a) {
                        return a.
                               toUpperCase();
                    }).
            split(/(?=<\/\s*\w*\s*>$)/);
}

function capContents (element) {
    return $(element).
            contents().
            map(function () { 
                   return this.nodeType === 3 ? $(this).text() : capitalizeHTML(this);
            })
}

function capitalizeHTML (selector) {
    var e = $(selector).first();
    var wrap = tagString(e);
    return wrap[0] + capContents(e).toArray().join("") + wrap[1];
}

capitalizeHTML('body'); 
```

另外，除了是一个很好的锻炼（在我看来），你真的需要这样做吗？

# unix - 反向读取序列

> ID：16074447
> 
> 赞同：-1
> 
> 时间：2013-04-18T04:23:26.090
> 
> 标签：unix, sequence, reverse

我这里有个问题：

如果我有如下的链序列，如何反向读取这个链（unix）？

输入：CCTTTATCTTTATCTAG 所需输出：GATCTATTTCTATTTCC

谢谢您的帮助。=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:49:14.237

```
echo "CCTTTATCTTTATCTAG" | rev
GATCTATTTCTATTTCC 
```

rev 是你想要的。

一个相关的命令是 tac，它反转文件的行顺序。

# javascript - 如何使用javascript替换数组项中的字符？

> ID：16074448
> 
> 赞同：0
> 
> 时间：2013-04-18T04:23:35.043
> 
> 标签：javascript, html, javascript-events

我有一个像这样动态的数组项**["{text: "US"}", "{text: "Mexico"}", "{text: "Brazil"}"]**。我需要将此 char **"{**替换为 this char **{** and this char **}"** this char **}**。最后替换后，我需要这样的输出**[{text: "US"}, {text: "Mexico"}, {text: "Brazil"}]**。如果它是单个对象意味着我可以替换。但是对于数组列表没有得到。我已经尝试如下，这个不起作用如何实现这个？非常感谢。谢谢你。

```
dynamicSubRegions =["{text: "US"}", "{text: "Mexico"}", "{text: "Brazil"}"];
var dynamicSubRegionsFinal = dynamicSubRegions[dynamicSubRegions.indexOf('"{')] = '{'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:46:20.153

我假设，您正在尝试将`string`值转换为`json`对象。

json 键的格式存在问题，必须将其包装`""`为[JSON.parse(...)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)方法的有效输入，该方法可以将字符串转换为有效的 json 对象。

```
var array = ["{text: \"US\"}", "{text: \"Mexico\"}", "{text: \"Brazil\"}"];

array.forEach(function(value, key){
    array[key] = JSON.parse(value.replace('{text:', '{"text":'));
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/XtAGd/2/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T04:32:56.297

您的数组语法错误并且双引号不在变量内

```
dynamicSubRegions =["{text: \"US\"}", "{text: \"Mexico\"}", "{text: \"Brazil\"}"];
alert(dynamicSubRegions[0]); 
```

[http://jsfiddle.net/dftgY/](http://jsfiddle.net/dftgY/)

# aem - Adobe CQ5.5-如何使用API 显示页面缩略图

> ID：16074449
> 
> 赞同：1
> 
> 时间：2013-04-18T04:23:40.623
> 
> 标签：aem

我已经使用 Sidekick >Page properties>Images 选项卡为我的页面配置了图像。现在我想在我的一个 jsp 中获取我的这个页面图像（缩略图）。有人可以给我可以用来实现此目的的 api 类和方法的指针或代码片段。

谢谢，拉吉夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T20:53:27.340

我建议使用默认图像组件作为示例 - /libs/foundation/components/image。

但是，如果您要将代码放入特定页面类型的组件中，则代码应如下所示：

```
if (currentNode.hasNode("image")) {
    String imagePath = currentNode.getNode("image").getPath();
    Resource imageRes = resourceResolver.getResource(imagePath);
    image = new Image(imageRes);

    image.loadStyleData(currentStyle);
    image.setSelector(".img");

    if (!currentDesign.equals(resourceDesign)) {
        image.setSuffix(currentDesign.getId());
    }
    image.draw(out);
} 
```

但请记住，即使您设置了图像，也并不意味着它会显示 - 如果您使用页面属性的默认页面对话框，它只会显示损坏的图像。这是因为 CQ 中存在一个错误，即图像的 sling:resourceType 属性未设置，因此不会显示。这是因为放在图像上的 .img 选择器不知道要做什么，除非它被指向具有 .img 选择器定义的资源类型，因此它可以正确渲染图像。

我上传了一个包，您可以将其用作默认 /libs/foundation/components/page 组件对话框问题的修补程序，以便在您上传图像时实际设置资源类型。[您可以从我的Google Drive](https://docs.google.com/file/d/0B4HE1y0v3uzAcWVfMGFhT1gyUG8/edit?usp=sharing)中找到/下载该软件包

希望这会有所帮助。如果您需要更多帮助，请告诉我。

**编辑**

如果您尝试从另一个页面上的一个页面获取页面属性图像，您只需要使用资源解析器。你应该在 CQ 中有一个可用的，所以这基本上是代码：

```
Resource imageRes = resourceResolver.getResource(pathFromYourDialog);
Image image = new Image(imageRes); 
```

其余的都是一样的——你只是给它一个不同的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T14:42:27.813

我认为 Nicholaus 的 EDIT 回答更符合您的迫切需求。如果用户通过对话框（即 DAM 图像）为您提供缩略图的路径。

您可以简单地创建图像，或者如果它具有 DAM 信息，您可以将其作为 DAM 资产加载并提取必要的信息。

```
Image image = new Image();
Resource imageResource = resourceResolver.getResource(imageUrl);
Asset imageAsset = imageResource.adaptTo(Asset.class);

Map<String, Object> valueMap = imageAsset.getMetadata();

long width = Long.parseLong(valueMap.get("tiff:ImageWidth").toString());
long height = Long.parseLong(valueMap.get("tiff:ImageLength").toString());
Object titleObject = valueMap.get("tiff:ImageTitle");
String title = (titleObject == null) ? null : titleObject.toString();

if (title != null)
{
  image.setTitle(title);
}

image.setWidth(width);
image.setHeight(height);
image.setUrl(imageUrl); 
```

对于 Nicholaus 的建议，这有点冗长，Image 类将根据您传递的 Resource 创建自己。（实际上为此支持 Nicholaus，我们可以进行一些优化）。

另一个更简单的选择是只使用用户通过的 src，如果您所做的只是设置缩略图。我猜您可以安全地执行以下操作：

在java中：

```
String thumbSrc = properties.get("thumbSrc", "defaultThumbnail.path");
if (!thumbSrc.isEmpty())
{
  pageContext("thumbSrc", thumbSrc);
} 
```

在jsp中：

```
<img alt="thumbnail" src="${thumbSrc}"/> 
```

或者如果你不想在java中做任何事情，你可以做类似的事情

```
<c:if test="${not empty properties.thumbSrc}">
  <img alt="thumbnail" src="${properties.thumbSrc}"/>
</c:if> 
```

为了在 jsp 中获得与第一部分相同的结果，您需要将其包装在一个选择中，因为在发送到视图之前将其通过一些处理可以更容易地设置默认值。

# maven - Primefaces 3.3、POM、tomcat 7.0.39 和 Jboss 作为 EAP 5.1

> ID：16074454
> 
> 赞同：0
> 
> 时间：2013-04-18T04:24:06.543
> 
> 标签：maven, jboss, primefaces, tomcat7, pom.xml

我正在使用 primefaces 3.3 和 JSF 2.0。而下面pom的结构，当我生成war时，只在tomcat 7.0.39上运行（工作）。我想知道我需要更改 pom 以供在 JBoss EAP 5.1 中运行的战争。

**错误：19:19:53,125 SEVERE [config] 部署期间的严重错误：com.sun.faces.config.ConfigurationException：未正确配置工厂“javax.faces.context.ExternalContextFactory”。在 com.sun.faces.config.processor.FactoryConfigProcessor.verifyFactoriesExist(FactoryConfigProcessor.java:305) 在**

*   下面生成的 O 战争在 JBoss EAP 5.1 中不起作用

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>
<groupId>com.mkyong.core</groupId>
<artifactId>OtimizacaoProcessoInterno</artifactId>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>

<name>OtimizacaoProcessoInterno</name>
<url>http://maven.apache.org</url>

<dependencies>

    <!-- PrimeFaces -->
    <dependency>
        <groupId>org.primefaces</groupId>
        <artifactId>primefaces</artifactId>
        <version>3.3</version>
    </dependency>

    <!-- JSF -->
    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-api</artifactId>
        <version>2.1.11</version>
    </dependency>
    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-impl</artifactId>
        <version>2.1.11</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
    </dependency>

    <!-- EL -->
    <dependency>
        <groupId>org.glassfish.web</groupId>
        <artifactId>el-impl</artifactId>
        <version>2.2</version>
    </dependency>

</dependencies>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-eclipse-plugin</artifactId>
            <configuration>
               <wtpversion>2.0</wtpversion>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:56:00.507

您可以将您的 Maven 模块打包为 ear。因此将您的包装更改为

```
<packaging>ear</packaging> 
```

如果你想自定义你的 ear 文件，你可以使用[maven-ear-plugin](http://maven.apache.org/plugins/maven-ear-plugin/usage.html)。

# .htaccess - 带有包含变量的原始 php url 的 Htaccess 重定向 url

> ID：16074455
> 
> 赞同：1
> 
> 时间：2013-04-18T04:24:07.003
> 
> 标签：.htaccess, mod-rewrite

我目前正在使用重写所有 URL 的 CMS，目前我有一个这样的 URL：

```
http://www.domain.com/folder/?user=user1 
```

我希望将其重写为： `index.php?r=search&term=$1`

像这样的东西会起作用吗？

```
RewriteRule ^/?user=(.*) index.php?r=search&term=$1 [L] 
```

好像给我添麻烦了。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:03:50.560

查询字符串不是 URI 路径的一部分，在规则中测试它。它位于 QUERY_STRING 变量中。

你可以试试这个：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING} user=([^/]+)/?  [NC]
RewriteRule ^folder/?  /index.php?r=search&term=%1  [L,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:44:46.723

尝试（未测试）

```
RewriteEngine On
Options +FollowSymLinks
RewriteRule ^folder1/?user=(.*)$ index.php?r=search&term=$1 [R=301,L] 
```

# php - 使用 wifi 连接时从本地主机发送邮件

> ID：16074456
> 
> 赞同：-2
> 
> 时间：2013-04-18T04:24:07.840
> 
> 标签：php, email

我应该做些什么改变，`php.ini`以便我可以从本地主机发送邮件。我正在使用大学 wifi。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:37:19.080

试试这个，然后让我知道错误，然后我会告诉你需要在 php.ini 中做哪些更改

```
<?php
                    error_reporting(0);
            require_once "Mail.php";

            $from="from email"; //enter email of sender
            $to="recepient email"; //enter to email
            $subject="subject";

            $body="content";

            $host="ssl://smtp.gmail.com";
            $port="465";
            $username="your gmail account user name";
            $pwd="your gmail account password";

            $headers = array ('From' => $from,
                            'To' => $to,
                            'Subject' => $subject);

            $headers["Content-Type"] = 'text/html; charset=UTF-8';

            $smtp = Mail::factory('smtp',
                                   array ('host' => $host,
                                             'port' => $port,
                                             'auth' => true,
                                             'username' => $username,
                                             'password' => $pwd));

            //Send Email using pear sned option
            $mail = $smtp->send($to, $headers, $body);

                //If any errors occurs

                  if (@PEAR::isError($mail)) {
                    echo("<p>" . $mail->getMessage() . "</p>");
                  }
                  else {
                       echo("<p>Message successfully sent!</p>");

                  }         

?> 
```

如果您使用的是 xampp，则 pear 已经安装，您需要更改 php.ini。

**首先，您需要将 extension=php_openssl.dll 取消注释到 php.ini 文件中。如果你没有在 php.ini 文件中找到这一行，那么从这里复制它并将其粘贴到 php.ini 并重新启动你的 apache 服务器。这是以下警告的正确解决方案：

警告：无法连接到 smtp.gmail.com:465 [SMTP：无法连接套接字：连接被拒绝（代码：-1，响应：）]**

# ios - 如何从 iPA 二进制文件中获取硬编码信息

> ID：16074457
> 
> 赞同：5
> 
> 时间：2013-04-18T04:24:09.173
> 
> 标签：ios

我在应用程序二进制文件上尝试了字符串..但它显示以下错误：字符串：对象：格式错误的对象（未知加载命令 19）

从 iOS 应用程序的二进制文件中读取硬编码信息的任何其他方式

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T04:30:13.617

1.  IPA 文件不是二进制文件。这是一个 ZIP 存档，您必须将其解压缩才能获得应用程序包目录，其中包含实际的可执行文件。

2.  即使那个可执行文件格式也不正确。它使用下载它的用户的 AppleID 进行加密。您需要先对其进行解密，然后才能在其上运行`strings`（您可以为此使用一些流行的 iOS 应用程序破解工具）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-05T05:26:52.223

要从 ipa 获取硬编码字符串，请执行以下步骤：

*   [从这里](https://github.com/KJCracks/Clutch/releases)获取离合器。

*   `Clutch <ipaToDecrypt>`使用 Clutch ( )解密应用程序

*   解压解密后的ipa，得到app bundle目录。

*   在其中找到可执行文件，然后对二进制文件运行 strings 命令。( `strings <app-binary>`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-26T02:26:43.440

这已经很老了，但是我遇到了一个特殊的问题，我试图在启用了 Bitcode 的应用程序中找到硬编码的字符串，并且我已经建立了一个存档以导出到 AppStore。最终的 .ipa 文件像往常一样解压缩，其中包含 Payload/appname.app/appname 处的二进制文件，但`strings`类似的工具无法处理它。相反，我使用了以下命令：

`segedit Payload/appname.app/appname -extract __LLVM __bundle llvm.xar xar -xf llvm.xar llvm-dis 1`

您需要安装 llvm 工具（例如 brew install llvm）来获得 llvm-dis。这会生成一个名为 1.ll 的文件，其中清楚地包含我正在寻找的硬编码字符串（以及非常易读的伪源）。如果 1.ll 中没有任何内容，请查看是否有名为 2、3、4 等的文件并`llvm-dis`在它们上运行。

但是，对于实际从 AppStore 下载的 ipa，您将需要使用越狱设备，您可以在其中运行离合器等。

# vb.net - 在与菜单项交互时发送回表单

> ID：16074459
> 
> 赞同：0
> 
> 时间：2013-04-18T04:24:13.050
> 
> 标签：vb.net, drop-down-menu, menuitem

我有两种形式，一种是 frmMain，另一种是 frmDatasets。这个想法是 frmDatasets 用于管理应用程序的数据集（它是一个用于比较排序算法的程序）。我在 frmDatasets 上有一个带有一些项目的 MenuStrip。我刚刚决定将添加数据集项目更改为一个下拉菜单，其中包含从文件加载一个或根据某些参数生成一个的选项。一切顺利；只需添加项目，交换一些图标，并更改事件处理程序的签名以处理右键单击事件。

除了当我运行程序时，第一次单击 Add Datasets 顶级项会将 frmDatasets 发送到后面，显示一个非活动的 frmMain。再次单击该项目将照常显示下拉菜单。

如果我改为单击另一个顶级菜单项，则效果很好。但是，只需将鼠标悬停在“添加数据集”项上，就会发生“发送回”的事情。

我说“发送到后面”，但实际上只是将它放在 frmMain 后面。它仍然位于 Visual Studio 和 Firefox 等其他窗口的前面。

有谁知道这个表格到底是怎么回事？

编辑：如果我将 frmDatasets 显示为模式对话框，它会停止整个“发送到后面”的事情，但我仍然必须单击菜单项两次才能显示列表。

EDIT2：覆盖 onClick 事件以调用 mnuAddDatasetDropDown.ShowDropDown 消除了双击问题，但如果我将表单保留为模式对话框，这只是一个解决方案。仍然被送回。覆盖 mouseEnter 并没有做任何事情来解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T02:51:09.987

将 frmDatasets 的 TopMost 属性从其设计视图设置为“真”解决了我遇到的所有问题。不幸的是，没有关于发生了什么的见解，但如果其他人遇到这个问题，那么希望它也对他们有用。

# php - 将 HybridAuth 与 Javascript SDK 相结合？

> ID：16074460
> 
> 赞同：1
> 
> 时间：2013-04-18T04:24:15.563
> 
> 标签：php, javascript, facebook, sdk, hybridauth

（从[https://groups.google.com/forum/?hl=en&fromgroups=#!topic/hybridauth/CWo2R9suYts](https://groups.google.com/forum/?hl=en&fromgroups=#!topic/hybridauth/CWo2R9suYts)转发）

从 Facebook 开始，我正在尝试使用提供商 Javascript SDK 登录并让 HybridAuth “了解”它。任何帮助，将不胜感激。

我首先在传递给视图的数据中包含配置 ID，以便在调用 Javascript 登录函数时使用它们。所以在Hybrid_Auth类的GetProviders函数中间，我加了：

```
if(array_key_exists('keys', $params) && array_key_exists('id', $params['keys']))
$idps[$idpid]['id'] = $params['keys']['id']; 
```

我的 Javascript 包括这样的内容：

```
FB.init({
appId:'<?php echo $providers['Facebook']['id']; ?>',
cookie:true,
status : true,
xfbml:true
}); 
```

到目前为止，一切都很好。

但是在登录后（即 FB.login()）当然 HybridAuth 不知道也没有用户信息。

然后为了“强制”它，我尝试通过 Ajax 调用“.../hauth/login/Facebook”方法：

```
$.ajax({
type: "POST",
url: ".../hauth/login/Facebook",
cache: false,
... 
```

不幸的是，HybridAuth 中的许多“重定向”似乎使这不起作用。我什至在 Ajax 调用中添加了“data: {ajax:true}”，并尝试修改 HyrbidAuth 以在 $_POST['ajax'] 存在时不重定向。那似乎也没有做到。（我什至删除了 redirect() 函数末尾的“die();”，但无济于事。）

我想我要么走在正确的轨道上，要么我需要添加一个新的 HybridAuth 方法来检测和存储已经存在的所有或特定连接的数据。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T17:30:42.087

我尝试了几种使用 Javascript SDK 登录提供程序并将其与 HyrbidAuth 集成的方法。没有一个解决方案是非常漂亮的，并且每个都需要我更改难以维护的 HybridAuth。我最终确定最好的解决方案是遵循 HybridAuth 中包含的“小部件”示例。

我没有使用小部件，但代码显示了一种使用 Javascript 打开和关闭单独的小窗口的方法。该窗口的 URL 包含服务器调用 HybridAuth 的“身份验证”方法的信息，该方法重定向到提供者的登录/批准页面。

效果基本相同：用户停留在同一页面上，同时在单独的“窗口”中向提供者进行身份验证。

# c# - 如何使用实体框架和 SimpleMembership 播种注册和登录数据

> ID：16074477
> 
> 赞同：1
> 
> 时间：2013-04-18T04:25:30.080
> 
> 标签：c#, entity-framework, asp.net-mvc-4, simplemembership

在 MVC-4 中使用 SimpleMembership 提供程序，我正在尝试为少数用户播种注册详细信息，如下所示

```
public class ContextInitializer : DropCreateDatabaseAlways<AccountsContext>
{
    protected override void Seed(AccountsContext context)
    {
        base.Seed(context);
        context.UserProfiles.Add(new UserProfile { UserId = 1, UserName = "admin" });
        context.UserProfiles.Add(new UserProfile { UserId = 2, UserName = "user1" });            
    }
} 
```

但我无法设置`password`& `confirmPassword`，因为在 UserProfile 类中找不到它们。它们位于 RegisterModel 类中，无法直接从 AccountsContext 访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:01:37.667

如果您使用的是内置 MembershipProvider

使用 System.Web.Security.Membership 来管理 UserProfile

```
MembershipUser newUser = Membership.CreateUser("admin", "p@ssword");
UserProfile profile = (UserProfile)ProfileBase.Create(newUser.UserName);
//.. update profile then save in context 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T06:19:30.133

你不能这样做吗？

```
SimpleMembershipProvider _membership = Membership.Provider;
_membership.CreateUserAndAccount("username", "password"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T06:36:32.043

这应该工作：[更多细节在这里](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)。[这里也可能重复](https://stackoverflow.com/questions/12662587/how-to-initialize-database-with-entity-framework-and-membership-tables)

```
protected override void Seed(EfDb context)
    {
        WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);

        if (!Roles.RoleExists("Administrator"))
        {
            Roles.CreateRole("Administrator");
        }

        if (!WebSecurity.UserExists("john"))
        {
            WebSecurity.CreateUserAndAccount("john", "secret");
        }

        if (!Roles.GetRolesForUser("john").Contains("Administrator"))
        {
            Roles.AddUsersToRoles(new[] { "john" }, new[] { "Administrator" });
        }

    } 
```

# iphone - 上传到应用商店是否需要构建

> ID：16074478
> 
> 赞同：1
> 
> 时间：2013-04-18T04:25:41.327
> 
> 标签：iphone, ios, app-store, application-loader

我已准备好将我的应用上传到 appStore。我读了这个[http://soulwithmobiletechnology.blogspot.in/2011/03/how-to-create-app-on-app-store.html](http://soulwithmobiletechnology.blogspot.in/2011/03/how-to-create-app-on-app-store.html)

但是这篇文章说在创建所有内容后选择存档，在单击存档之前是否需要构建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T04:31:48.950

**不。**

当您单击存档时，它将构建并创建新的 ipa 文件。比您必须从档案屏幕提交申请。有关更多信息，请参阅屏幕截图

![在此处输入图像描述](https://i.stack.imgur.com/OnA20.png)

# java - 原语与包装类初始化

> ID：16074480
> 
> 赞同：3
> 
> 时间：2013-04-18T04:25:52.590
> 
> 标签：java

如下声明 int 有什么区别。哪些情况适合不同类型的使用

```
int i     = 20;
Integer i = 20;
Integer i = new Integer(20); 
```

**请注意**：我仔细观察，发现 first 将创建原始 int。Second 将执行自动装箱，Third 将在内存中创建引用。

我正在寻找一个场景，它清楚地解释了我应该何时使用第一种、第二种和第三种整数初始化。互换使用是否会对性能产生任何影响

谢谢您的回复。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T04:36:03.833

第一种情况的初始化是一个简单的常量赋值。没什么有趣的……除了这是一个被分配的原始值，原始值没有“身份”；即`int`值的所有“副本”`20`都是相同的。

第二种和第三种情况更有趣一些。第二种形式是使用“拳击”，实际上相当于：

```
Integer i = Integer.valueOf(20); 
```

该[`valueOf`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#valueOf%28int%29)方法*可以*创建一个新对象，也可以返回对先前存在的对象的引用。（事实上​​，JLS 保证`valueOf`将缓存`Integer`-128..+127 ...范围内的数字值）

相比之下，`new Integer(20)` *总是*创建一个新对象。

如果您习惯于`Integer`使用`==`. 在一种情况下`==`，`true`如果您比较“20”的两个实例。在另一种情况下，它保证是`false`。

教训：用于`.equals(...)`比较包装器类型 not `==`。

* * *

关于使用哪个的问题：

*   如果`i`是`int`，请使用第一种形式。
*   如果`i`是`Integer`，则第二种形式是最好的……除非您*需要*一个`!=`指向其他实例的对象。装箱（或显式调用`valueOf`）减少了小值的对象分配量，是值得优化的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T04:35:31.843

在没有赋值的情况下声明原语将采用默认值。

但是包装类是引用类型，所以没有赋值它们将是`null`. `NullPointerException`如果在没有赋值的情况下使用，这可能会导致抛出 a 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T04:33:32.273

我能想到的一种情况是当您在`Hibernate`. 如果您使用 Integer ，则可以检查 null （假设该列允许`null`值）。如果您使用原语并且数据库中的值为空，我猜它会引发错误。

# ruby-on-rails - have_selector 测试页面标题不起作用

> ID：16074482
> 
> 赞同：1
> 
> 时间：2013-04-18T04:26:24.227
> 
> 标签：ruby-on-rails, rspec, title

我有以下代码用于测试

```
require 'spec_helper'

describe PagesController do
render_views

describe "GET 'home'" do
 it "returns http success" do
  get 'home'
  response.should be_success
 end

 it "should have the right title" do 
  get 'home'
  response.should have_selector("title", :content => "Ruby on Rails Tutorial Sample App | Home")
 end
end 
```

但是当我运行 rspec spec/ 时，我在验证页面标题时出错。我已将 home.html.erb 修改为此

```
<!DOCTYPE html>
<html>
<head>
    <title>Ruby on Rails Tutorial Sample App | Home</title>

</head>
<body>
    <h1>Sample App Home Page</h1>
    <p>Find me in app/views/pages/home.html.erb</p>
</body>
</html> 
```

我有 rspec 版本 2.13.0 水豚版本 2.1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:28:48.877

尝试：

```
response.should have_content "Ruby on Rails Tutorial Sample App | Home" 
```

# c# - 如何使用 Downloadfile 将图像保存到特定文件夹

> ID：16074483
> 
> 赞同：1
> 
> 时间：2013-04-18T04:26:32.383
> 
> 标签：c#, webclient

```
for (int counter = 0; counter <= temparray.Length - 1; counter = counter + 1)
{
    if ((counter < temparray.Length + 2) && (temparray[counter] == "><img") &&    (temparray[counter + 1] == "id='header-img'"))
    {
        string j = temparray[counter + 2];

        int startIndex = j.IndexOf('"') + 1;

        int length = j.IndexOf('"', startIndex) - startIndex;

        string jj = (j.Substring(startIndex, length));

        client.DownloadFile(jj, @"C:\image.png");
    }
} 
```

我得到了保存为名为 的字符串的图像的 URL `jj`，但是我试图将它保存到任何文件夹中但没有成功。

# python - Python Tkinter 按钮回调

> ID：16074486
> 
> 赞同：3
> 
> 时间：2013-04-18T04:26:40.087
> 
> 标签：python, button, callback, tkinter

当我单击由 for 循环创建的每个按钮时，我试图打印出按钮编号。以下是我尝试过的。

```
import Tkinter as tk
root=tk.Tk()

def myfunction(a):
        print a

for i in range(10):
    tk.Button(root,text='button'+str(i),command=lambda:myfunction(i)).place(x=10,y=(10+(25*i)))
root.mainloop() 
```

但不是打印出每个按钮编号，而是每次都给我最后一个按钮编号。有什么我可以做的，这样当我单击按钮 1 时，它会为 2 打印 1,2 ，依此类推？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-16T22:25:34.820

简单的解决方法是在每次创建 lambda 函数时使用 i 的当前值初始化 lambda 函数。这可以使用另一个虚拟变量 j 的 Python 默认值来完成。

```
command = lambda j=i: myfunction(j) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T05:09:04.790

Blender 的答案是一个聪明的解决方案，但如果您被函数抽象所迷惑，这是另一种可能的方法。它实际上只是创建了一个映射，保存在 中`buttons`，从小`Button`部件到它们的正确数字。

```
import Tkinter as tk
root = tk.Tk()

def myfunction(event):
    print buttons[event.widget]

buttons = {}
for i in range(10):
    b = tk.Button(root, text='button' + str(i))
    buttons[b] = i # save button, index as key-value pair
    b.bind("<Button-1>", myfunction)
    b.place(x=10,y=(10+(25*i)))
root.mainloop() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:36:10.250

这是因为`i`在您的匿名函数中是指计数器变量，而不是值：

```
from __future__ import print_function

x = [lambda: print(i) for i in range(10)]

for f in x:
    f() 
```

这会产生 10 个连续`9`s 的输出。

为了解决这个问题，你必须使用两个`lambda`s 和 shadow`i`和*第二个*函数（它创建你的第一个函数）：

```
from __future__ import print_function

x = [(lambda i: (lambda: print(i)))(i) for i in range(10)]

for f in x:
    f() 
```

虽然在这一点上，你最好只创建一个命名函数：

```
def my_command(i):
    def inner_function():
        return my_function(i)

    return inner_function 
```

并像这样使用它：

```
tk.Button(root, text='button' + str(i), command=my_command(i)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-10T16:54:28.860

问题是 tk 中的 Button 命令忽略了任何参数，因此在 mycommand(data) 之类的数据被忽略。

我经常使用按钮，并决定将 tk Button 子类化以包含数据。我称它为 DataButton 并添加了一个数据成员（在本例中为索引号）。这样，当单击它时，它会传回其数据。（索引号）现在，只要我希望它保存诸如索引甚至消息之类的信息，我就会使用 DataButton。

# ios - 使 dispatch_async 中的 NSTimer 无效

> ID：16074489
> 
> 赞同：2
> 
> 时间：2013-04-18T04:27:01.933
> 
> 标签：ios, objective-c, objective-c-blocks, nstimer

我正在创建一个游戏，在游戏中我需要一个计时器。

我工作得很好，但是当我滚动地图时它会停止，然后当我完成滚动时它会重新开始。我用 dispatch_async 解决了这个问题。这是代码

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

                timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self  selector:@selector(timeNext) userInfo:nil repeats:NO];

                [[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];

                [[NSRunLoop currentRunLoop] run]; 
            }); 
```

定时器：

```
__block NSTimer *timer; 
```

但是如果应用程序进入后台，我需要停止这个时间（当它激活时它会再次启动）。

通过这种方式，我可以滚动地图并且计时器运行良好，我尝试：

```
- (void)timeNext {
    [timer invalidate];
    } 
```

并没有工作。有谁知道如何阻止它？或任何其他想法来完成这项任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T04:56:47.880

不要在全局队列的线程上创建计时器，然后在该线程上启动运行循环。

只需在主线程（主运行循环）上创建计时器，并将其添加到跟踪运行循环模式。可以将计时器添加到多个运行循环模式。

```
timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self  selector:@selector(timeNext) userInfo:nil repeats:NO];
[[NSRunLoop currentRunLoop] addTimer:timer forMode:UITrackingRunLoopMode]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:47:03.607

如果您使用 UIScrollView 在游戏世界中滚动，则在滚动跟踪触摸时计时器将暂停 - 您需要设置计时器以在不同模式下使用它 -`UITrackingRunLoopMode`例如

```
[[NSRunLoop currentRunLoop] addTimer:timer forMode:UITrackingRunLoopMode]; 
```

代替

```
[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode]; 
```

这将允许您的计时器在滚动等控件跟踪用户的触摸时触发事件。

[编辑]

您创建计时器，例如通过

```
+ (NSTimer *)timerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)yesOrNo; 
```

然后将此计时器添加到运行循环（基本上，您应该将其添加到您的应用程序主运行循环）：

```
NSTimer* timer = [NSTimer timerWithTimeInterval:1./60\. target:self selector:@selector(tick) userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:timer forMode:UITrackingRunLoopMode]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T06:04:06.347

我使用`NSRunLoopCommonModes`而不是`UITrackingRunLoopMode`，一切看起来都很好。主线程ui操作将不再阻塞`tick`功能。

```
NSTimer* timer = [NSTimer timerWithTimeInterval:1./60\. target:self selector:@selector(tick) userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; 
```

# javascript - 使用 Elastic Image Slideshow 从图像中提取数据标题，并将其显示在页面上

> ID：16074494
> 
> 赞同：0
> 
> 时间：2013-04-18T04:27:31.320
> 
> 标签：javascript, jquery

我正在使用[Elastic Image Slideshow](http://tympanus.net/codrops/2011/11/21/elastic-image-slideshow-with-thumbnail-preview/)脚本，并且想为每个图像添加数据标题文本，然后将当前显示的图像的文本显示到幻灯片之外的 div 中（基本上在页面的不同部分。）

我找到[了这个脚本](http://blog.fraser-hart.co.uk/add-captions-to-jquery-cycle/)，可以使用 jQuery 循环，并尝试修改它以使其工作，但我运气不佳。

好的，我找到了这个小提琴：http: [//jsfiddle.net/Snfst/6/](http://jsfiddle.net/Snfst/6/)并将其修改为：

```
 $('img').hover(function(){
      $('#caption').html($(this).data('caption'))
   }); 
```

现在的问题是如何让它加载而不必将鼠标悬停在图像上，并且只显示当前显示图像的数据？

我正在尝试进行这项工作的页面可能会更好地显示我正在尝试做的事情：http: [//diguiseppi.com/Brad/Andy/portfolio-web-design.html](http://diguiseppi.com/Brad/Andy/portfolio-web-design.html)

# django - django中的过滤器：每个用户的最后一篇文章

> ID：16074498
> 
> 赞同：3
> 
> 时间：2013-04-18T04:27:55.957
> 
> 标签：django, django-models, tastypie

我有 2 个模型， Author 和 Post ，如何制作一个过滤器，可以在一行中选择每个 Author 的最后一篇文章（按 id 字段）？，对我来说不好的方法是：

```
authors = Author.objects.all()
queryset = []
for author in authors:
    posts = Post.objects.filter(author=author).order_by('-id')
    if loc:
        queryset.append(posts[0]) 
```

具体来说，这是为了过滤我的 Tastypie 资源“PostResource”，这个过滤器只能给我每个用户的最后一篇文章，按创建排序

## 带有 okm 答案和美味派自定义过滤器的完整解决方案：

```
class LocationResource(ModelResource):
    user = fields.ForeignKey(AccountResource,'user' )
    class Meta:
        queryset = Location.objects.all().order_by('-id')
        resource_name = 'location'
        #excludes = ['id',]
        list_allowed_methods = ['post','get']
        authentication = ApiKeyAuthentication()
        authorization= Authorization()
        filtering = {'user': ALL_WITH_RELATIONS}

    def obj_create(self, bundle, **kwargs):
        if bundle.request.method == 'POST':
            return super(LocationResource, self).obj_create(bundle, user=bundle.request.user)

    def apply_authorization_limits(self, request, object_list):
        return object_list.filter(user=request.user)

    def dehydrate(self, bundle):
        return bundle

    def build_filters(self, filters=None):
        if filters is None: #if you don't pass any filters at all
            filters = {}

        orm_filters = super(LocationResource, self).build_filters(filters)

        if('only_lasts' in filters):

            query = filters['only_lasts']

            sqs = Location.objects.values('user_id').annotate(max_id=models.Max('id')).values('max_id')

            orm_filters["pk__in"] = sqs

        return orm_filters 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T16:04:27.630

阅读有关在 SQL 中按组获取顶行[的博客文章。](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)

如帖子中所述，您可以使用`IN`或`JOIN`。

举个`IN`例子：

```
SELECT * FROM post_table 
WHERE id IN (SELECT MAX(id) AS max_id FROM post_table GROUP BY author_id); 
```

SQL 可以在 QuerySet 中编写为：

```
Post.objects.filter(pk__in=
    Post.objects.order_by().values('author_id').annotate(
        max_id=models.Max('id')).values('max_id')) 
```

的`QuerySet`模式`SELECT MAX(id) AS max_id FROM post_table GROUP BY author_id`是：

```
Model.objects.order_by().values(...).annotate(foo=...).values('foo')
^------------^----------^-----------^-----------------^------------^
    \            \           \            \                \
base queryset     \        GROUP BY        \           SELECT column
or manager      remove possible           annotation part
                useless ordering          Min/Max/... 
```

此外，您可以直接包装 SQL `queryset.raw()`。如果选择`JOIN`版本，`.raw()`方式就更清晰了。

请注意，该`IN`子句在您的数据库后端可能存在性能问题，如果性能至关重要，您需要分析和调整索引。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-18T05:41:41.330

```
a = Author.objects.get(pk=1)
#next line will give you the latest post of this particular author
latest_post = a.post_set.latest('id') 
```

# c - 在C中转换IP地址

> ID：16074502
> 
> 赞同：0
> 
> 时间：2013-04-18T04:28:23.253
> 
> 标签：c, ip, ip-address

我有：

```
192.168.1.1 
```

我怎样才能转换它？

我尝试使用 sscanf 拆分 IP 地址，例如：

```
sscanf(hostaddress,"%d.%d.%d.%d", &d1, &d2, &d3, &d4); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T04:29:24.583

> 我有一个 IP 地址 [...] 如何将其转换为长地址？

您正在寻找功能[`inet_pton(3)`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/inet_ntop.html)。

```
unsigned char buf[sizeof(struct in_addr)]
rc = inet_pton(AF_INET, "192.168.1.1", buf); 
```

并且`rc`应该是 1 表示成功。返回码 0 或 -1 表示错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:30:33.103

您可以使用[`inet_addr`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738563%28v=vs.85%29.aspx)：

```
unsigned long addr = inet_addr("192.168.1.1"); 
```

# magento - 在 Magento 中按类别限制订单数量或按类别添加额外运费

> ID：16074503
> 
> 赞同：1
> 
> 时间：2013-04-18T04:28:24.793
> 
> 标签：magento

我对 Magento 有疑问。

我有一个类别，客户每次订单只能从该类别中购买一种产品。我已成功设置产品设置中只能添加一项​​。但是，如果客户返回该类别，他仍然可以在该类别中添加另一个产品。假设他从A类中选择了产品A，他可以返回到A类选择产品B。我想要的是任何时候，对于那个订单，他只能从A类中购买一个产品。

如果这是不可能的，如果从该类别中选择了超过 1 个产品，我希望增加额外的运费。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:16:45.993

请参阅[Magento：每个订单限制类别中的 3 个产品](https://stackoverflow.com/questions/15345619/magento-limit-3-products-from-category-per-order)

为事件创建观察者`checkout_cart_product_add_after`

```
 <events>
        <checkout_cart_product_add_after>
            <observers>
                <enableduplicateproductstatus>
                    <type>singleton</type>
                    <class>limitcartproductbycategory/observer</class>
                    <method>cartlimit</method>
                </enableduplicateproductstatus>
            </observers>
        </checkout_cart_product_add_after>
    </events> 
```

创建：app/code/local/MagePal/LimitCartProductByCategory/Model/Observer.php

```
class MagePal_LimitCartProductByCategory_Model_Observer 
{

    public function cartlimit(Varien_Event_Observer  $observer)
    {
        $category_ids = array();

        $quote = Mage::getSingleton('checkout/session')->getQuote();
        foreach($quote->getAllVisibleItems() as $item){
              $product = Mage::getModel('catalog/product')->load($item->getId());
              $product_category_ids = explode(",", $product->getCategoryIds());
              //$product_category_ids = $product->getCategoryIds();

              array_push($category_ids, $product_category_ids);
        }

        $justAdded = $observer->getQuoteItem();

        $productJustAdded = Mage::getModel('catalog/product')->load($justAdded->getId());

        //total the category id in $category_ids
        //if $productJustAdded->getCategoryIds exist in $category_ids, 
        //then check to see if category id count greater than 3
        // if true then add error msg and try setting the qty to 0

        return $this;
    }
} 
```

# grails - 无法在 src/groovy 中注入 grails 应用程序上下文

> ID：16074505
> 
> 赞同：0
> 
> 时间：2013-04-18T04:28:32.263
> 
> 标签：grails, grails-plugin

我已经创建了自定义事件侦听器，该侦听器扩展了 AbstractPersistenceEventListener，如 Grails 文档[http://grails.org/doc/latest/guide/GORM.html](http://grails.org/doc/latest/guide/GORM.html)中所述，但是它工作正常。如果执行以下操作，我将无法在此侦听器中注入服务。

```
 def context = ServletContextHolder.servletContext.getAttribute(GrailsApplicationAttributes.APPLICATION_CONTEXT)
def myService = context.myService 
```

“上下文”返回 null。

任何想法可能是什么问题。谢谢ps Grails 2.1.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T13:31:17.870

注册时将 applicationContext 作为构造函数参数传递给 Listener。

# caching - 在 Coldfusion/cfWheels 中缓存不经常更改的查询

> ID：16074508
> 
> 赞同：0
> 
> 时间：2013-04-18T04:28:50.297
> 
> 标签：caching, coldfusion, coldfusion-9, cfwheels

我正在查看[findAll中的缓存功能](http://cfwheels.org/docs/1-1/function/findall)cfWheels 的功能。我有点担心使用它。我的查询不会花很长时间，我绝对需要它们，但总是欢迎提高速度。我从查询的缓存中得到 10 毫秒，否则大约需要 100 毫秒。我想知道的是，当条目发生更改时，我希望在下次运行时清除缓存。框架中似乎没有任何机制或标志允许这样做，所以我必须自己设置和清除标志，这很可能最终不得不从数据库中读取。我希望我可以将缓存设置一整天并在需要时进行更新，这是否严重误导？我很可能不会继续开发任何功能以允许此应用程序的缓存，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:33:21.980

可以通过重新加载应用程序来清除缓存。这不是您正在寻找的答案，而是一种解决方案，这是另一种方法。添加新的数据库记录后，您可以`<CFHTTP>`通过发送 URL 来重新加载应用程序。`<CFHTTP>`如果您通过管理站点添加记录，那么您可以使用 重新加载您的公共站点`<cfhttp>`。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T05:50:25.467

更准确地说，每当您在数据库中创建新条目时，使用 cfhttp 标签重新加载应用程序。

# python - 使用 Django 的联合提要

> ID：16074509
> 
> 赞同：0
> 
> 时间：2013-04-18T04:28:51.713
> 
> 标签：python, django, django-models, django-forms, django-views

如何使用 Django 使用 Syndication Feeds 从其他网站导入详细信息。我是 Django python 的新手。在我的博客中，我需要使用提要概念。请为此举一些例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:06:20.683

这应该是一个好的开始：[向您的 Django 应用程序添加 RSS 提要](http://www.rt-coding.com/blog/view/adding-rss-feeds-your-django-application.html)。

另外，请务必阅读[django 联合提要框架](https://docs.djangoproject.com/en/1.5/ref/contrib/syndication/)

# java - Datagramsocket：receive(...) 如何处理数据包的碎片

> ID：16074513
> 
> 赞同：4
> 
> 时间：2013-04-18T04:29:06.440
> 
> 标签：java, networking, udp, datagram

我从我的教授那里得知，使用 UDP 套接字发送的数据报包在较低层会被分段，并且*可能*以多个数据包的形式到达接收端。例如，如果我在数据报包中发送 1000 字节的数据，在接收端它*可能*以 2 字节、500 字节、12 字节等形式到达。因此，他建议做多个receive(...)来接收发送方发送的整个1000字节数据包。

后来，当我浏览数据报套接字接收（...）的Java文档时，有一行内容如下：“此方法阻塞，直到接收到数据报。...”是否意味着接收到整个数据报包并且当我们使用Java时不需要进行多次接收（即使理论上是这样）？

请。阐明。如果每个数据包的多个接收（...）是解决此问题的唯一选择，请。就如何做到这一点提出建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T05:05:39.900

任何调用`receive()`都会给你一个完整的数据包 - 片段处理发生在套接字下面的两层中。碎片和碎片整理发生在网络/互联网层 ( [IP](http://en.wikipedia.org/wiki/Internet_Protocol) )，因此套接字永远不会看到碎片，而只会接收完整和完整的 UDP/TCP 数据包（只有完整的数据包被发送到侦听端口）。

所以，不，你不需要多个`receive()`来获取单个数据包，但你应该知道 UDP 是不可靠的，所以如果一个片段在网络层丢失（并且在某些情况下，如果它无序到达），你赢了'无法获取数据包。

您可能还想检查方法[`getReceiveBufferSize()`](http://docs.oracle.com/javase/6/docs/api/java/net/DatagramSocket.html#getReceiveBufferSize%28%29)，[`setReceiveBufferSize()`](http://docs.oracle.com/javase/6/docs/api/java/net/DatagramSocket.html#setReceiveBufferSize%28int%29)如果您在接收数据包时遇到问题 - 如果缓冲区大小小于数据包大小，则不能保证您可以接收数据包。

# c# - 此 linq to xml 查询中的一些问题，同时获取元素中某些属性的值

> ID：16074514
> 
> 赞同：0
> 
> 时间：2013-04-18T04:29:15.310
> 
> 标签：c#, xml-parsing, linq-to-xml

我有这个 app.config 文件：

```
 <?xml version="1.0" encoding="utf-8" ?>
 <configuration>
  <appSettings>

    <add key="domain" value="localhost"/>

    <add key="hostname" value="hostpc"/>

 </appSettings>
 </configuration> 
```

我正在使用此 LINQ to XML 查询来获取名为“域”的键的值。例如，当我说我想获取名为“domain”的键的值时，它应该给我“localhost”：

```
var domain = (from appNode in xmlElement.Elements("add")
                     where appNode.Attribute("key").Value == "domain"
                     select appNode.Attribute("value")); 
```

但是我的查询缺少一些东西，任何人都可以识别我缺少什么或如何使它变得更好，它目前不起作用。

注意：我只想使用 linq to xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:38:40.233

尝试使用这个：

```
 XElement doc = XElement.Load("ConsoleApplication1.exe.config");

    var domain = (from appNode in doc.Element("appSettings").Elements("add")
                  where appNode.Attribute("key").Value == "domain"
                  select appNode.Attribute("value").Value).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:47:30.560

我按原样使用了您的 app.config 文件内容，使用以下代码编写了一个基于控制台的小型应用程序：

```
class Program
{
    static void Main(string[] args)
    {
        // Create the query 
        var nodes = from appNode in XElement.Load("App.config").Descendants("appSettings").Elements()
                    where appNode.Attribute("key").Value == "domain"
                    select appNode;

        var element = nodes.FirstOrDefault();
        string value = element.Attribute("value").Value;

        Console.WriteLine(value);

        //Pause the application 
        Console.ReadLine();
    }
} 
```

输出是：本地主机

希望这可以帮助。如果它在您的机器上不起作用，请分享错误详细信息。

# dns - 重定向或重写非 www/wildcard 到 www.domain.com

> ID：16074518
> 
> 赞同：1
> 
> 时间：2013-04-18T04:29:24.860
> 
> 标签：dns, amazon-web-services, web-hosting

我想将非 www thats domain.com 重定向到 www.domain.com。我知道有很多人已经在这里发布了同样的问题。我经历了其中的大部分，意识到我的情况略有不同。我在带有负载均衡器的 AWS EC2 实例上运行我的电子商务应用程序，并且 DNS 停在 53 号路由中。最近我们与 Akamai 集成，因此我们不得不更改 CNAME 并将域名更改为 domain.com www.domain.com，以便我们可以通过 Akamai 为客户提供服务。但是我们面临的问题是我们无法将 domain.com 重定向到 www.domain.com。由于 Route53 并不是所有的 301 重定向，我们将我们的域重新停放给了具有域转发功能的 Godaddy。我也尝试使用域转发进行重定向，但它似乎对我们帮助不够。

目前我们正在使用 wwwzier.com 重定向流量，计划有一个 .htaccess。由于它与网站之间的交易预计加载速度更快，我们不能进行服务器级别的重定向或重写。

还有什么其他方法可以实现相同的目标。

请帮助我，因为我一个星期以来一直在与这场大火作斗争。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T05:09:53.263

我所做的是设置一个运行 apache 的微型实例。微型实例免费一年。我在安全组中直接向它开放了 80 端口。然后为其分配一个弹性IP。然后我将我的域的 A 记录指向该 IP。对于微型实例，我刚刚选择了我认为的 amazon linux ami。我通过 SSH 登录并将以下 .htaccess 放入 /var/www。

/var/www 通常是刚刚设置的 apache 服务器的默认网页。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

这基本上将所有whatever.com重定向到他们的www.whatever.com等价物。

因此，现在对于您想要重定向到 www 的任何域，您只需将该域的 A 记录设置为您的微实例的弹性 ip，并且 htaccess 会将任何内容重定向到 www 版本，以便指向您的 ELB 的 cname 可以生效。

# php - Mysql_insert_id() 无法从第一个查询中获取值并在第二个查询中使用它。两个查询都用于插入但在两个不同的表中

> ID：16074519
> 
> 赞同：-1
> 
> 时间：2013-04-18T04:29:28.170
> 
> 标签：php, mysql

我想使用**MySQL_insert_id**从第一个查询中获取一个值，该查询具有一个名为**PropertyImageID**的自动增量，这是我的**属性**表中的最后一列，并且我的第二个表中的**PropertyImageID**相同，即**propertyimages**的第一列并使用它在第二个查询中插入第二个表中的值。

但它给出了这个错误信息：

> 警告：mysql_insert_id() 期望参数 1 是资源，布尔值在 on..line 31

这是我的代码（我没有在查询中编写自动增量列）：

```
<?php
    require_once('db.php');
    @$PropertyName=$_POST['pname'];
    @$PropertyStatus=$_POST['pstatus'];
    @$PropertyID=$_POST['propertyid'];
    if(isset($_FILES['file_upload']))
    {

    $propertyquery="INSERT INTO properties(PropertyID, PropertyName,   PropertyStatus) 
    VALUES('$PropertyID', '$PropertyName', '$PropertyStatus')";
    $propertyqueryrun=mysql_query($propertyquery) or die(mysql_error());

      if($propertyqueryrun)
         {
         echo '<br><br> The Property Information Insertion was Successfully';
         }
              else
         {
                  echo '<br><br> Property Insertion Failed';
         }

    $shuff=str_shuffle("ABD6565LSLFKDSAJFD");

    mkdir("upload/$shuff");

    $files=$_FILES['file_upload'];

    for($x = 0; $x < count($files['name']); $x++)
    {
      $name=$files['name'][$x];

      $tmp_name=$files['tmp_name'][$x];

         if(move_uploaded_file($tmp_name, "upload/$shuff/".$name))
         {
        $result=mysql_query($propertyquery)------>First query;

        $id=mysql_insert_id($result) or die(mysql_error());

         $imagequery="INSERT INTO propertyimages(PropertyImageID, ImageName, 

    ImagePath)   VALUES('**$id**', '$name', 'upload/$name')";

             $imagequeryrun=mysql_query($imagequery);

             echo 'Image '. $name .' Uploaded Successfully <br>';
         }
         else
         {
             echo 'uploading images failed failed';
         }

    }

    }
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>
</head>
<body>
    <form action="" method="POST" enctype="multipart/form-data">
    <label>PropertyName:<br /></label>
    <input type="text" name="pname" /><br />
    <label>PropertyStatus:<br /></label>
    <input type="text" name="pstatus" /><br />
    <label>PropertyID:<br /></label>
    <input type="text" name="propertyid" /><br />
    <input type="file" name="file_upload[]" multiple="multiple" / size="7"><br /><br />
    <input type="submit" value="Submit Form" />
    </form>
    <a href="home.php">Display Images</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T04:33:48.053

无需在`mysql_insert_id()`. 您可以在`last inserted id`不传递`$propertyqueryrun`值的情况下使用。

```
$id = mysql_insert_id() or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:33:20.867

改变这个

```
$id=mysql_insert_id($propertyqueryrun) or die(mysql_error()); 
```

至

```
$id=mysql_insert_id() or die(mysql_error()); 
```

不需要传递查询参数，它只需要可选的链接参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:34:33.560

你应该在插入查询之后声明它并且你指定了错误的参数

```
<?php
    require_once('db.php');
    @$PropertyName=$_POST['pname'];
    @$PropertyStatus=$_POST['pstatus'];
    @$PropertyID=$_POST['propertyid'];
    if(isset($_FILES['file_upload']))
    {

    $propertyquery="INSERT INTO properties(PropertyID,PropertyName,PropertyStatus) 
    VALUES('$PropertyID', '$PropertyName', '$PropertyStatus')";
    $propertyqueryrun=mysql_query($propertyquery) or die(mysql_error());
   $insert_id=mysql_insert_id();
      if($propertyqueryrun)
         {
         echo '<br><br> The Property Information Insertion was Successfully';
         }
              else
         {
                  echo '<br><br> Property Insertion Failed';
         }

    $shuff=str_shuffle("ABD6565LSLFKDSAJFD");

    mkdir("upload/$shuff");

    $files=$_FILES['file_upload'];

    for($x = 0; $x < count($files['name']); $x++)
    {
      $name=$files['name'][$x];

      $tmp_name=$files['tmp_name'][$x];

         if(move_uploaded_file($tmp_name, "upload/$shuff/".$name))
         {
         $id= $insert_id;

         $imagequery="INSERT INTO propertyimages(PropertyImageID,ImageName, 

    ImagePath)   VALUES('$id','$name','$name')";

             $imagequeryrun=mysql_query($imagequery);

             echo 'Image '. $name .' Uploaded Successfully <br>';
         }
         else
         {
             echo 'uploading images failed failed';
         }

    }

    }
    ?> 
```

# qt - 如何避免 QComboBox 下拉列表中的项目重叠，字体较大

> ID：16074520
> 
> 赞同：2
> 
> 时间：2013-04-18T04:29:32.913
> 
> 标签：qt, qcombobox, qtstylesheets

我想使用带有`QComboBox`. 我尝试使用样式表设置字体大小：

```
*{font-size: 22pt} 
```

`QComboBox`这确实会改变字体大小，但下拉列表中项目之间的间距最终会重叠。如何获得大字体并获得正确的行间距？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T04:57:51.990

**可以通过对QComboBox QAbstractItemView**`QComboBox`应用相关更改来更改下拉列表的样式，如下例所示：

 **```
QComboBox QAbstractItemView
{
   color:#ccc;
   background-color:#333;
   border:none;
   selection-background-color:#1c1c1c;
   selection-color: #ccc; 
   height: 30px;
} 
```**

# django-haystack - Django-haystack 不更新索引

> ID：16074529
> 
> 赞同：2
> 
> 时间：2013-04-18T04:30:48.410
> 
> 标签：django-haystack, xapian

使用[django-haystack 2.0.0](http://haystacksearch.org/)和 xapian-haystack 2.0.0，从 1.1.5 迁移所有代码，如[docs](http://django-haystack.readthedocs.org/en/latest/migration_from_1_to_2.html)中所述。现在我的 search_indexes.py 看起来像：

```
from haystack import indexes
from app.models import Post

class PostIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)

    def get_model(self):
        return Post

    def index_queryset(self, using=None):
        """Used when the entire index for model is updated."""
        return self.get_model().objects.filter(visible=True) 
```

但是当我去rebuild_index时，它说：

> 您确定要继续吗？[是/否] 是
> 
> 因为您这么说，所以从您的索引中删除所有文档。删除所有文件。

冗长：

```
Skipping '<class 'django.contrib.auth.models.Permission'>' - no index.
Skipping '<class 'django.contrib.auth.models.Group'>' - no index.
...
Skipping '<class 'app.models.Post'>' - no index. 
```

所以，我不知道为什么 haystack 不索引这个模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T05:11:53.530

您必须实际将字段添加到索引中，因此在“文本”下添加：

```
post1 = indexes.CharField(model_attr='postfield1', null=True) 
```

然后在您的 post_text.txt 索引文件模板中：

```
{{object.post1}} 
```

现在它应该可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-22T05:35:48.067

您尚未在您的

> search_indexes.py

文件。你必须这样做：

```
class PostIndex(indexes.SearchIndex, indexes.Indexable):
text = indexes.CharField(document=True, use_template=True)
data = indexes.CharField(model_attr='data', blank=True, null=True)

def get_model(self):
    return Post

def index_queryset(self, using=None):
    """Used when the entire index for model is updated."""
    return self.get_model().objects.filter(visible=True) 
```

然后创建一个目录结构，如`templates/search/indexes/'app_name'/post_text.txt`. 现在运行命令`./manage.py rebuild_index`。

# c# - 如何使用存储在 PicturesLibrary 中的图像为 GridApp 模板创建 SampleDataSource？

> ID：16074534
> 
> 赞同：2
> 
> 时间：2013-04-18T04:31:37.050
> 
> 标签：c#, windows-8

我正在尝试为 GridApp 创建数据源。我使用 GetFilesAsync() 从 PicturesLibrary 获取图像。我修改了 SampleDataSource.cs：在数据结构中我使用 StorageFile imagePath 而不是字符串 imagePath。当然，我编写了一个代码，它使用 IRandomAccessStream 从 StorageFile 创建 BitmapImage，而不是从 Uri 创建 BitmapImage。

所以这段代码可以编译但它不起作用。这里的原因是：异步方法 GetFilesAsync() 不会阻塞主线程。GroupedItemsPage.xaml.cs 在 GetFilesAsync() 提供必要信息之前询问 SampleDataSource。这会导致异常 TypeInitializationException。

显而易见的解决方案是使用 GetFilesAsync() 的同步模拟。但也有一些新问题：

1.  从 KnownFolders.PicturesLibrary 同步获取文件似乎是不可能的。
2.  这完全是个坏主意，因为如果我有大量图片，那么 GroupedItemsPage 的生成将导致严重冻结。

那么，我该如何解决这个问题呢？我只问解决方案的概念。我应该如何组织我的应用程序的架构？

# facebook - 是否有应用程序、网站或任何方式来搜索某人所有标记的 Facebook 或 Instagram 照片？

> ID：16074536
> 
> 赞同：1
> 
> 时间：2013-04-18T04:31:43.353
> 
> 标签：facebook, search, tags, tagging, instagram

我想找到一种方法来搜索某人所有标记的 Facebook 或 Instagram 照片？

我找到了很多搜索主题标签和主题的方法，但这不是我想要做的。我想搜索并显示所有带有用户名/句柄标签的照片。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T05:44:08.933

我一直在构建一个工具，可以让你搜索你和你朋友的 Facebook 照片。你可以在这里找到它：[http ://www.phemories.com](http://www.phemories.com)

# compiler-construction - 如何让 CMake 在系统 PATH 上使用默认编译器？

> ID：16074537
> 
> 赞同：9
> 
> 时间：2013-04-18T04:31:45.703
> 
> 标签：compiler-construction, cmake

目前，我从我的构建目录调用 CMake，如下所示：

CXX="/opt/gcc-4.8/bin/g++" cmake ..

让 CMake 使用这个特定的编译器。否则，它使用操作系统默认编译器。

我的 PATH`/opt/gcc-4.8/bin`在其他所有内容前面都有“”。那么，有没有办法在“`CMakeLists.txt”文件中指定在路径上使用默认的g++，而不是预先设置环境变量？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T10:06:30.987

CMake 尊重`PATH`环境变量的设置，但优先考虑通用编译器名称`cc`和`c++`. 要确定 CMake 在 UNIX 下默认使用哪个 C 编译器，请运行：

```
$ which cc 
```

要确定默认的 C++ 编译器，请运行：

```
$ which c++ 
```

如果生成指向 的符号链接，`c++`CMake应默认使用 GCC 4.8。`/opt/gcc-4.8/bin``/opt/gcc-4.8/bin/g++`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-30T02:10:45.740

`cc`而不是的位置决定了要使用`c++`哪个cmake。`c++`因此，例如，如果您有`/usr/local/bin/c++`but `/usr/local/bin/cc`，cmake 仍然会拾取`/usr/bin/c++`，而不是`/usr/local/bin/c++`。在这种情况下，创建`/usr/local/bin/cc`指向指向的符号链接`/usr/local/bin/gcc`将使 cmake 使用`/usr/local/bin/c++`.

另一种方法是将项目的语言显式设置为 C++：

`project(foo CXX)`

# asp.net - 当我的网站更改其目录时如何配置或处理 iis

> ID：16074541
> 
> 赞同：0
> 
> 时间：2013-04-18T04:31:59.530
> 
> 标签：asp.net, asp.net-mvc, iis

我过去开发和部署asp.net mvc应用程序时，我的代码是这样的：

1.  `<script src="../../Scripts/jquery-1.4.4.min.js" type="text/javascript"> </script>`

2.  `<img src="../../Content/images/logout.png"/>`

3.  `<div class="menu_home" style="background-image:url('../../Content/images/menu_home.png');background-color:#919191;"></div>`

4.  `$.ajax({ type: "get", url: "/Home/Details", data: { id: id }, success: function (jsonResult) {//something}});`

我在本地使用casini进行测试或将网站部署在iis根目录中时没有问题。

现在，当我在 iis 根目录中添加应用程序时，将应用程序移动到新应用程序中，我必须重写代码，例如 3：

```
`<img src="url.Content("~/Content/images/logout.png")" /> ` 
```

在 4

```
 $.ajax({
    type: "get",
    url: "myWeb/Home/Details",
    data: { id: id },
    success: function (jsonResult) {//something}}); 
```

有没有一种简单的方法可以做到这一点？例如：在 IIS 中配置一些东西或处理一些东西？我的iis版本是7.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:10:20.403

`url`您应该像这样在属性中定义 URL ：

```
url: '@Url.Action(<action name>, <controller name>)' 
```

在您的情况下，URL 将是这样的：

```
url: '@Url.Action("Details", "Home")' 
```

# linux - Shell 脚本帮助查找和替换字符串

> ID：16074543
> 
> 赞同：0
> 
> 时间：2013-04-18T04:32:00.070
> 
> 标签：linux, shell, unix

我有一个配置文件作为 hive-site.xml

一个配置元素是；

```
 <property>
    <name>hadoop.embedded.local.mode</name>
    <value>true</value>
  </property> 
```

我想通过 shell 脚本将“true”更改为“false”。但是在文件中有很多配置元素，例如；

```
 <value>true</value> 
```

标签。

因此，据我所知，我用来查找和替换字符串的“sed”命令在这里很难使用。感谢是否有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:15:02.937

显然有很多方法可以做到这一点，但为什么不试试 awk (gawk) 呢？

```
#!/bin/bash

gawk \
'        
    BEGIN {
        FLAG = 0;
    }

    /hadoop.embedded.local.mode/ {
        FLAG = 1;
    }

    />[     ]*true[     ]*</ {
        if (FLAG == 1) {
            FLAG = 0
            gsub("true", "false")
        }
    }

    {
        print
    }
' "$@" 
```

调用上述脚本：

```
<script> hive-site.xml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:08:13.000

这可能是 XPath 和合理的 XML 库的工作。直接从 shell 脚本执行此操作将创建一个复杂且可能脆弱的解决方案。我将使用`python`和流行的`lxml`库作为示例：

```
from lxml import etree

tree = etree.fromstring('''
  <property>
    <name>hadoop.embedded.local.mode</name>
    <value>true</value>
  </property>
''')

e = tree.xpath('//property[name="hadoop.embedded.local.mode"]/value')[0]
e.text = 'false'
print etree.tostring(tree) 
```

基本上，如果它包含具有该值的元素，则选择任何属性节点（文档中的任何位置）`<name>`，然后选择该值元素。然后，您可以根据自己的喜好修改元素的内容并再次打印为字符串。XPath 是标准的，所以大致相同的代码也应该在其他实现中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:48:45.743

您可以给出整个块并进行更改。

```
sed -i '/s/<property><name>hadoop.embedded.local.mode<\/name><value>true<\/value<\/property>
/<property><name>hadoop.embedded.local.mode<\/name><value>false<\/value><\/property>/' 
hive-site.xml 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-28T16:38:15.440

如果您要更改的值始终在下一行，您可以先获取所需元素的行号

```
NUMBER=$(grep -n "<desired element>" filename | awk -F: '{print $1}') 
```

然后递增到下一行

```
let NUMBER="NUMBER + 1" 
```

然后使用 sed 或 ex 修改值，在这些情况下我更喜欢 ex，因为它消除了对临时文本文件的需要。

```
{
print "${NUMBER}s/true/false/"
print "wq"
} | ex filename 
```

# c# - 使用转换器 XAML 的“System.Exception”类型异常

> ID：16074544
> 
> 赞同：0
> 
> 时间：2013-04-18T04:32:12.000
> 
> 标签：c#, xaml, windows-phone-8, ivalueconverter

我在我的 Windows Phone 应用程序中使用 XAML 中的 IValueConverter。我的代码

```
<TextBlock Margin="0,0,10,0"
           Text="{Binding Score, Converter={StaticResource SecondsToMinutesHour}}"
           Foreground="{Binding DeviceID, Converter={StaticResource FontForegroundConverter}}"
           FontWeight="{Binding DeviceID, Converter={StaticResource FontWeightConverter}}"
           Grid.Column="3" /> 
```

但是转换器引发了这个错误

`An exception of type 'System.Exception' occurred in System.Windows.ni.dll and wasn't handled before a managed/native boundary`

分数是一个类型字符串，我的转换器类如下

```
public class SecondsToMinutesHour : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        int secs = int.Parse(value.ToString());
        TimeSpan ts = TimeSpan.FromSeconds(secs);

        return String.Format("{0:D2}:{1:D2}:{2:D2}",
                        ts.Hours,
                        ts.Minutes,
                        ts.Seconds);
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:59:18.143

我想通了..我必须在该部分中包含`SecondsToMinutesHour`转换器的参考`Application.Resources`

```
....  
<Application.Resources>
    <settings:AppSettings x:Key="AppSettings" />
    <app:SecondsToMinutesHour x:Key="SecondsToMinutesHour" />
.... 
```

# javascript - 在 href 中使用 javascript 导航到不同 html 页面的 div 部分

> ID：16074546
> 
> 赞同：0
> 
> 时间：2013-04-18T04:32:19.623
> 
> 标签：javascript, html

我正在使用 javascript 函数跳转到当前 html 页面（system_details.html）上的 div 部分：

```
<a href="javascript:show_processor()">Processor</a>
<a href="javascript:show_ram()">RAM</a> 
```

但是，我想`show_ram()`从不同的 html 页面（index.html）直接导航到 system_details.html 页面的功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:36:07.470

给出链接和 id `<a href="javascript:show_ram()" id="ram">RAM</a>`。使用这样的哈希将其添加`id`到 URL 的末尾`index.html#ram`。

然后使用[jQuery](http://jquery.com/)做这样的事情：

```
$(document).ready(function(){
  if(window.location.hash) $('#' + window.location.hash).click();
}); 
```

这会将散列后的 URL 的最后一部分作为`id`要单击的链接的 ，然后调用`click()`具有指定 的链接`id`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T04:34:12.947

使用 ajax 概念。从 index.html 页面加载数据

# c# - 找到两个凸多边形之间的接触点

> ID：16074548
> 
> 赞同：0
> 
> 时间：2013-04-18T04:32:34.813
> 
> 标签：c#, 2d, polygon, physics, collision

好的，所以我正在尝试为体验创建一个简单的 2d 多边形物理引擎。这是我已经知道的（以及想要了解的人的来源：

-如何使用 SAT 方法确定多边形是否相交（[http://elancev.name/oliver/2D%20polygon.htm](http://elancev.name/oliver/2D%20polygon.htm)）

-如何通过找到最小平移轴来找到碰撞的法线

-如何通过 implulse ( [http://chrishecker.com/Rigid_Body_Dynamics#articles](http://chrishecker.com/Rigid_Body_Dynamics#articles) )响应碰撞

然而，有一件事一直在逃避我。即如何找到两个相交多边形之间的接触点。我打算上传一张简单的图片来帮助说明我的意思，但似乎我还不能这样做。

具体来说，我想要帮助的是：

- 确定哪些边和/或点正在碰撞

- 这包括多边形相交的时间

- 获取每个接触点的矢量位置

我真的很感激这方面的任何事情，因为我一直在寻找很长一段时间都没有运气。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:09:24.287

在做了更多的挖掘之后，我找到了我想要的东西。我找到了一个写得很好的例子（在 C# 中），它是一种称为多边形裁剪的技术。此方法在世界坐标中找到接触点。它经历了多种不同情况的所有步骤和代码实现。

这是网址： http: [//www.codezealot.org/archives/394](http://www.codezealot.org/archives/394)

# html - 带有 html 元素的 Web 浏览器上的提交按钮

> ID：16074559
> 
> 赞同：1
> 
> 时间：2013-04-18T04:33:37.830
> 
> 标签：html, vb.net, web

好的，所以这个网站[http://dogwars.com/app/](http://dogwars.com/app/)

我正在制作一个应用程序，您可以在其中登录和东西。

但是网站上的登录按钮：

```
<div style="margin-left: 77px; margin-top: 20px; height: 40px;">
   <a href="#" onclick="document.getElementById('loginForm').submit();" class="button"><span>Login</span></a>
  </div> 
```

对于我在 VB.net 上的自动提交按钮，我使用这个：

```
If curElement.GetAttribute("onclick").Equals("document.getElementById('loginForm').submit();") Then
            curElement.InvokeMember("click")
        End If 
```

但它不会自动登录，我很困惑为什么它不会..？
有人可以帮我吗？这是我的完整代码：

```
Public Class Form1

Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click

    WebBrowser1.Navigate("http://dogwars.com/app/")

End Sub

Private Sub WebBrowser1_DocumentCompleted(ByVal sender As System.Object, ByVal e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted

    Dim theElementCollection As HtmlElementCollection = WebBrowser1.Document.GetElementsByTagName("input")

    For Each curElement As HtmlElement In theElementCollection

        Dim controlName As String = curElement.GetAttribute("name").ToString

        If controlName = "email" Then

            curElement.SetAttribute("Value", TextBox1.Text)

        ElseIf controlName = "password" Then

            curElement.SetAttribute("Value", TextBox2.Text)

        End If

    Next

    theElementCollection = WebBrowser1.Document.GetElementsByTagName("input")
    For Each curElement As HtmlElement In theElementCollection
        If curElement.GetAttribute("onclick").Equals("document.getElementById('loginForm').submit();") Then
            curElement.InvokeMember("click")
        End If
    Next
End Sub

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-01T13:27:52.733

您使用 HTML 元素使事情变得过于复杂。这是你应该做的：

```
 WebBrowser1.Navigate("http://dogwars.com/app/")

            Do Until WebBrowser1.ReadyState = WebBrowserReadyState.Complete
                Application.DoEvents()
            Loop

            WebBrowser1.Document.GetElementById("email").SetAttribute("value",TextBox1.Text())
            WebBrowser1.Document.GetElementById("password").SetAttribute("value",TextBox2.Text())
            WebBrowser1.Document.GetElementById("submit").InvokeMember("click") 
```

这可能应该有效，但我还没有测试过。

# c - 如何从文件中提取一行的一部分？

> ID：16074560
> 
> 赞同：0
> 
> 时间：2013-04-18T04:33:38.577
> 
> 标签：c, file

我真的是 C 的新手，如果这是一个愚蠢的问题，我很抱歉，但假设我有一个包含以下内容的文件：

```
1 abc
2 def
3 ghi 
```

如果我传入一个像 3 （或字符？）这样的整数，该函数将返回一个“ghi”字符串。我不知道如何做到这一点。

```
void testFunc(int num)
{
        FILE *fp;
        fp = fopen("testfile.txt", "r"); 

        if(strstr??????
} 
```

是的..我不知道我在做什么。任何人都可以提供任何指导吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T04:39:34.357

你可以点击这个链接，你也可以做一点谷歌。它真的很简单，您应该尝试一次。 [使用 fgetc() 逐行读取 c 文件](https://stackoverflow.com/questions/4293475/reading-c-file-line-by-line-using-fgetc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:33:37.590

使用**fgets**读取每一行使用**sscanf**将每一行的第一个和第二个元素保存到变量中测试数字是否 = 3，如果是则打印单词。

手册页应该为您提供使用**fgets**和**sscanf所需的所有信息**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:39:04.270

试试这个代码

```
void testFunc(int num)
{
     FILE *file = fopen ( "testfile.txt", "r" );
     char line [ 128 ]; /* or other suitable maximum line size */
    if ( file != NULL )
    { 
            while ( fgets ( line, sizeof(line), file ) != NULL ) /* read a line */
            {
               fputs ( line, stdout ); /* write the line */
            }
    fclose ( file );
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T07:41:39.500

```
//input:num, output:string, string is call side cstring area.
void testFunc(int num, char *string){
    FILE *fp;
    int n;

    fp = fopen("data.txt", "r"); 
    while(2==fscanf(fp, "%d %s ", &n, string)){
        if(num == n){
            printf("%s\n",string);
            break;
        }
    }
    fclose(fp);
    return;
} 
```

# php - PNG - 保持透明度

> ID：16074567
> 
> 赞同：1
> 
> 时间：2013-04-18T04:34:44.160
> 
> 标签：php, image-processing, png, gd, alpha

我正在尝试重新设计我的网站，以便我原来的方形、基于平铺的图像渲染可以更像是图像的剪切......以摆脱那种网格图案。

这是它最初的样子......

![在此处输入图像描述](https://i.stack.imgur.com/A6HzJ.jpg)

这是我要做什么的粗略模型：

![在此处输入图像描述](https://i.stack.imgur.com/9nJ7A.jpg)

所以我重新保存了一个透明背景的图像缩略图......我只想让狗显示，而正方形是透明的，它将在下面显示网站的背景。

![在此处输入图像描述](https://i.stack.imgur.com/GGVjZ.jpg)

然而，当我在页面上渲染它时，它的背景是黑色的。

![在此处输入图像描述](https://i.stack.imgur.com/7sOSx.jpg)

我检查了我的 CSS 以查看是否有某种 img 类或渲染漫画的类......甚至引导程序查看可能将背景颜色分配给黑色的位置（并且还搜索了十六进制代码000000），但没有找到...

然后我发现它与我的缩略图脚本重新采样 png 的方式有关......因为我得到了所谓透明图像的黑色背景，我责怪`imagecreatetruecolor()`哪个`returns an image identifier representing a black image of the specified size.`.

我尝试在这里关注[Cheekysoft](https://stackoverflow.com/questions/32243/can-png-image-transparency-be-preserved-when-using-phps-gdlib-imagecopyresample)关于在重新采样后保持透明度的问题......但它没有用......他的两个要点是：

```
imagealphablending( $targetImage, false );
imagesavealpha( $targetImage, true ); 
```

我发现如果我`$img = imagecreatefrompng($image_file);`在调整大小/重新采样之前放置它，它会透明地显示......这就是我想要的......但不是在我重新采样之后。

**Thumbnailer.php 代码：**

```
 <?php
#Appreciation goes to digifuzz (http://www.digifuzz.net) for help on this

$image_file = $_GET['img']; //takes in full path of image
$MAX_WIDTH = $_GET['mw'];
$MAX_HEIGHT = $_GET['mh'];
global $img;

//Check for image
if(!$image_file || $image_file == "") { 
    die("NO FILE."); 
}

//If no max width, set one
if(!$MAX_WIDTH || $MAX_WIDTH == "") { 
    $MAX_WIDTH="100"; 
}

//if no max height, set one
if(!$MAX_HEIGHT || $MAX_HEIGHT == "") { 
    $MAX_HEIGHT = "100"; 
}

$img = null;
//create image file from 'img' parameter string
if( preg_match('/\.jpg$/',$image_file) || preg_match('/\.jpeg$/',$image_file) ){ 
    $img = imagecreatefromjpeg($image_file); 
} else { 
    $img = imagecreatefrompng($image_file); 
} 

//if image successfully loaded...
if($img) {
    //get image size and scale ratio
    $width = imagesx($img);
    $height = imagesy($img);

    //takes min value of these two
    $scale = min($MAX_WIDTH/$width, $MAX_HEIGHT/$height);

    //if desired new image size is less than original, output new image
    if($scale < 1) {
        $new_width = floor($scale * $width);

        $new_height = floor($scale * $height);

        $tmp_img = imagecreatetruecolor($new_width, $new_height);

        //copy and resize old image to new image
        imagecopyresampled($tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

        //replace actual image with new image
        $img = $tmp_img;
    }
}
//set the content type header
header('Content-Type: image/png', true); 

imagealphablending( $img, false );
imagesavealpha( $img, true );
imagepng($img); 

imagedestroy($img);

?> 
```

任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:25:24.227

在重新采样/调整图像大小之前，您需要在目标图像上调用 imagealphablending()：

```
//copy and resize old image to new image
imagealphablending($tmp_img, false);
imagecopyresampled($tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height);
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:25:29.317

创建图像后，您将 alphablending 和 traparent 代码放置在下面。只需将它们放在您的 createresample 行和带有 imagecreatefrompng 创建的图像的透明图像之前。

```
imagealphablending( $tmp_img, false );
imagesavealpha( $tmp_img, true );
imagecopyresampled($tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height); 
```

或者您可以尝试以下

```
$img = ImageCreateFromPNG($image_file);
$tmp_img = imagecreatetruecolor($new_width,$new_height);
imagecolortransparent($tmp_img, imagecolorallocate($tmp_img, 0, 0, 0));
imagecopyresampled($tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height); 
```

# ios - 带有ARC的Objective C中的对象数组

> ID：16074569
> 
> 赞同：1
> 
> 时间：2013-04-18T04:34:50.667
> 
> 标签：ios, objective-c, c, nsarray, automatic-ref-counting

我正在编写一个我想加快速度的应用程序。我想到的一种方法是从使用`NSArray`和`NSMutableArray`使用直接的 c 样式指针数组切换。

我曾天真地尝试过：

```
MyObject** objects = (MyObject**) malloc(N/2*sizeof(MyObject*)) 
```

这会在使用 ARC 时报告编译器错误，因为它不知道如何处理 ** 对象；这可以通过添加桥指令来解决。

我的问题是如何处理此内存以及如何混合 C 和`Objective-C`对象进行内存管理。

两种解决方案是

```
MyObject* __weak* objects = (MyObject* __weak*) malloc(N/2*sizeof(MyObject*));

MyObject* __strong* objects = (MyObject* __strong*) malloc(N/2*sizeof(MyObject*)); 
```

这两个数组之间有什么区别，完成后如何释放/释放它们。是否`NSArrays`已优化到不会导致加速的程度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T04:43:27.463

> NSArrays 是否已优化到不会导致其加速的程度？

是的。

你应该在 Instruments 中分析你的代码——即使你大量使用数组，你也会发现你的代码大部分时间都花在了 NSArray 方法以外的地方，比如`-objectAtIndex:`.

更进一步，*您*应该真正能够告诉*我们*NSArray 是否已充分优化，您不需要对其进行改进。如果您希望通过替换 NSArray 来加速您的代码，您应该已经对您的代码进行了概要分析并确定了昂贵的部分。不要只是猜测需要改进的地方；测量它。

# javascript - iframe 的延迟加载在 IE7 中不起作用

> ID：16074571
> 
> 赞同：0
> 
> 时间：2013-04-18T04:35:14.287
> 
> 标签：javascript, jquery, html, iframe, lazy-loading

```
<style>
.desgin_iframe_dimn {
background: white;
height: 500px;
width: 500px;
}
</style>
<iframe scrolling="no" id="lazy" class="desgin_iframe_dimn" data-src="http://www.google.com"></iframe>
<p class="lazy">Click Here</p>
<script>
function LazyLoadIframe() {
$('.lazy').click(function() {
    $('#lazy').attr('src', function() {
        return $(this).data('src');
    });
});

$('#lazy').attr('data-src', function() {
    var src = $(this).attr('src');
    $(this).removeAttr('src');
    return src;
});

}
LazyLoadIframe();
</script> 
```

演示在这里[jsfiddle](http://jsfiddle.net/amitshah02/KK2X3/11)

上面的代码在其他浏览器中也可以在 IE9 和 IE8 中运行良好，但在 IE7 中则不行。我该如何解决 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:06:21.867

我不知道为什么你的代码中有这部分：

```
$('#lazy').attr('data-src', function() {
    var src = $(this).attr('src');
    $(this).removeAttr('src');
    return src;
}); 
```

但是由于`#lazy`has no `src`，这可能是在 IE7 上破坏它的部分。其他浏览器可能会工作，因为这段代码是在 html 中声明 iframe 之前执行的。

我想你想要的是这样的：

**HTML**

在这里，我将 data-src 移动到可点击的位置`<p>`：

```
<iframe scrolling="no" id="lazy" class="desgin_iframe_dimn"></iframe>
<p class="lazy" data-src="http://www.wikipedia.com/">Click Here</p> 
```

**Javascript**

```
$(function() {
    $('.lazy').click(function() {
        $('#lazy').attr('src', $(this).data('src'));
    });
}); 
```

在`$(function() { });`文档加载时执行的位置。不要只是在 HTML 中间调用一个函数，总是考虑使用`$(function() {});`

我也不明白你为什么这样做，`function() { return $(this).data('src') }`而你可以这样做`$(this).data('src')`，所以我也更正了。

[jsFiddle在这里](http://jsfiddle.net/63rSL/)

# data-binding - 在不使用 SharedDateSource 的情况下应用图表中的网格更改？

> ID：16074576
> 
> 赞同：6
> 
> 时间：2013-04-18T04:36:02.810
> 
> 标签：data-binding, charts, kendo-ui, kendo-grid

在我的项目中，网格和图表具有相同的数据源，但需要在页面加载中显示图表上的所有数据并在按钮单击中显示网格数据。

但之前我们使用共享数据源，因此可以轻松地在图表中应用网格更改。现在为网格和图表使用单独的变量并应用`"AutoBind=true"`图表，`"AutoBind=false"`两者都不起作用，网格更改必须应用于图表。

如何给出网格和图表的关系？

[这是小提琴](http://jsfiddle.net/5bchz/108/)：

```
var sharedDataSource = new kendo.data.DataSource({
    type: "odata",
    transport: {
        read: "http://demos.kendoui.com/service/Northwind.svc/Orders"
    },
    schema: {
        model: {
            fields: {
            OrderDate: { type: "date" }
            }
        }
    } 
});
var DataSource = new kendo.data.DataSource({
    type: "odata",
    transport: {
        read: "http://demos.kendoui.com/service/Northwind.svc/Orders"
    },
    schema   : {
        model: {
            fields: {
                OrderDate: { type: "date" }
            }
        }
    }   
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T15:56:25.440

使用共享数据源是正确的方法。这是满足您要求的固定代码：http: [//jsfiddle.net/vojtiik/kappG/2/](http://jsfiddle.net/vojtiik/kappG/2/)。autoBind 属性需要布尔值而不是字符串（例如：true 不是“true”）。

```
autoBind: true, 
```

# mysql - 错误查询 MySQL 选择日期最旧或最新的记录

> ID：16074581
> 
> 赞同：0
> 
> 时间：2013-04-18T04:36:10.403
> 
> 标签：mysql, date, max, min

我需要知道如何获取访问代码 (IdAccess) 某个用户（使用 IdUser 标识）使用不同查询从表*AccessTbl进行的最旧（或更近）访问日期。*每个用户。

```
CREATE TABLE AccessTbl ( 
IdAcess VARCHAR(16) UNIQUE NOT NULL, 
IdUser VARCHAR(16) NOT NULL,
TheDate DATE NOT NULL 
);
INSERT INTO AccessTbl (IdAcess, IdUser, TheDate) VALUES 
('A00', '0', '1983-12-30'), 
('A01', '0', '2004-09-09'), 
('A02', '1', '2013-02-01'), 
('A03', '1', '2012-05-09'), 
('A04', '2', '1983-12-30'), 
('A13', '2', '2013-03-01'), 
('A05', '2', '2004-09-09'), 
('A06', '3', '2013-02-01'), 
('A07', '3', '2012-05-09'), 
('A08', '4', '1983-12-30'), 
('A09', '4', '2004-09-09'), 
('A10', '5', '2013-04-01'), 
('A12', '5', '2013-03-01'), 
('A11', '5', '2012-05-01'); 
```

例子：

最新的用户 5 是“A10”和最旧的“A11” 最近的用户 4 是“A09”和最旧的“A08”

但是，我只需要一个查询中所有用户的所有最新日期。

我试过...

```
SELECT IdAcess, IdUser, TheDate
FROM AccessTbl
WHERE (
  TheDate IN (SELECT MAX(TheDate) FROM AccessTbl  GROUP BY IdUser)
)  GROUP BY IdUser; 
```

但是我有：

```
+---------+--------+
| IdAcess | IdUser |
+---------+--------+
| A01     | 0      |
| A02     | 1      |
| A05     | 2      |  //BAD!!!!! must be A13
| A06     | 3      |
| A09     | 4      |
| A10     | 5      |
+---------+--------+
6 rows in set (0.13 sec) 
```

后来，我尝试了：

按 IdUser 从 AccessTbl 组中选择 IdAcess、IdUser、MAX(TheDate)；

拥有...

```
+---------+--------+--------------+
| IdAcess | IdUser | MAX(TheDate) |
+---------+--------+--------------+
| A00     | 0      | 2004-09-09   | //Must be A01
| A02     | 1      | 2013-02-01   | 
| A04     | 2      | 2013-03-01   | //Must be A13
| A06     | 3      | 2013-02-01   |
| A08     | 4      | 2004-09-09   | //Must be A09
| A10     | 5      | 2013-04-01   |
+---------+--------+--------------+
6 rows in set (0.00 sec) 
```

感谢您的宝贵帮助。

**安**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:47:04.763

如果您想同时获取最旧和最新的，则需要使用子查询将现有日期（由 IdUser 过滤）与选定的最小和最大日期进行比较。

```
SELECT IdAcess
FROM AccessTbl
WHERE IdUser = ?
AND (
  TheDate IN (SELECT MAX(TheDate) FROM AccessTbl WHERE IdUser = ?)
  OR TheDate IN (SELECT MIN(TheDate) FROM AccessTbl WHERE IdUser = ?)
) 
```

[http://sqlfiddle.com/#!2/38594/20/0](http://sqlfiddle.com/#!2/38594/20/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:47:41.090

`LEFT JOIN`您可以使用;执行最新或最旧的操作

获取用户的最新条目`5`；

```
SELECT *
FROM AccessTbl a
LEFT JOIN AccessTbl b
  ON a.TheDate < b.TheDate AND a.IdUser = b.IdUser
WHERE b.TheDate IS NULL AND a.IdUser = '5' 
```

要获得最旧的，只需将其翻转`<`为`>`;

```
 ON a.TheDate > b.TheDate AND a.IdUser = b.IdUser 
```

要一次获取*所有*用户的最新行，只需跳过 IdUser 条件；

```
SELECT *
FROM AccessTbl a
LEFT JOIN AccessTbl b
  ON a.TheDate < b.TheDate AND a.IdUser = b.IdUser
WHERE b.TheDate IS NULL 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/4b0e68/21)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:56:39.037

只是一种方式：

```
SELECT IdAcess AS Oldest, (SELECT IdAcess FROM AccessTbl
                           WHERE IdUser = 5
                           ORDER BY TheDate DESC LIMIT 1) AS Newest
FROM AccessTbl
WHERE IdUser = 5
ORDER BY TheDate ASC LIMIT 1 
```

这是要测试的 SQL Fiddle：[http ://sqlfiddle.com/#!2/4b0e68/36](http://sqlfiddle.com/#!2/4b0e68/36)

* * *

`IdAcess`要在一个查询中为每个用户获取最新信息，请执行以下操作：

```
SELECT *
FROM AccessTbl a
LEFT JOIN AccessTbl b
  ON a.TheDate < b.TheDate AND a.IdUser = b.IdUser
WHERE b.TheDate IS NULL
ORDER BY a.IdUser 
```

**结果**

```
IDACESS     IDUSER     THEDATE
A01         0          September, 09 2004 00:00:00+0000
A02         1          February, 01 2013 00:00:00+0000
A13         2          March, 01 2013 00:00:00+0000
A06         3          February, 01 2013 00:00:00+0000
A09         4          September, 09 2004 00:00:00+0000
A10         5          April, 01 2013 00:00:00+0000 
```

这是要测试的 SQL Fiddle：[http ://sqlfiddle.com/#!2/4b0e68/44](http://sqlfiddle.com/#!2/4b0e68/44)

# javascript - 获取时间显示动画当前运行的持续时间

> ID：16074584
> 
> 赞同：0
> 
> 时间：2013-04-18T04:36:18.303
> 
> 标签：javascript, jquery, html, animation

在 jquery 中，我使用以下代码：

```
 j=-(i)
  if(j%2==1)
  {
    $("#caption1").hide();
    $("#caption1").fadeIn(1000);
    $('#main_div').hide();
    $('#main_div').show(5000);
  }
   }
 if(i%2==0)
 {
    $("#caption1").hide();
    $("#caption1").fadeIn(1000);
    $('#main_div').hide();
    $('#main_div').show(5000);
 } 
```

在显示动画时，我希望动画的持续时间完成？

例如：

我设置它显示动画 5 秒。

显示动画现在开始。

2 秒动画完成[剩余 3 秒]

在这种情况下，我需要在按钮单击时完成此持续时间 [2 秒]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:57:25.267

记下动画开始的时间：

```
var animationStarted = new Date();
$('#main_div').show(5000);
.... 
```

当您需要显示已经过去了多少时间时，取当前时间并减去上一步中保存的时间。

```
var now = new Date();
var elapsed = ( now.getTime() - animationStarted.getTime() ) / 1000; 
```

演示：http: [//jsfiddle.net/NZGU6/](http://jsfiddle.net/NZGU6/)

# java - 是否有任何工具可以从 JSON 生成字符串？

> ID：16074587
> 
> 赞同：-3
> 
> 时间：2013-04-18T04:36:59.413
> 
> 标签：java, android, json

我怀疑是否有任何在线工具可以从 JSON 生成字符串。例如，我有这个 JSON：

```
 {
    "my_json": [
      {
        "number": 20,
        "name": "androider",
      },
      {
        "id": 3432,
        "name": "other_name",
      }
    ]
  } 
```

如果我想用这个值在我的代码中声明一个字符串，那么我必须写很多引号才能让我的 JSON 采用字符串可接受的格式。

所以我想知道是否有一些工具可以生成这个字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:42:31.620

一些不错的选择是：

*   [杰克逊](http://jackson.codehaus.org/)
*   [格森](https://code.google.com/p/google-gson/)

他们已经内置了方法来以有效的方式完成您需要做的任何事情......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:11:09.970

我无法从原始问题中完全说出您想要什么，但我假设您正在尝试输出一个 Java 字符串，其中包含您生成的一些 JSON。

您应该使用 JSONObject 和 JSONArray 来完成此操作。

要创建此 JSON：

```
{
    "my_json": [
      {
        "number": 20,
        "name": "androider",
      },
      {
        "id": 3432,
        "name": "other_name",
      }
    ]
} 
```

您应该使用以下代码：

```
JSONObject a = new JSONObject();
a.put("number", 20);
a.put("name", "androider");

JSONObject b = new JSONObject();
b.put("id", 3432);
b.put("name", "other_name");

JSONArray array = new JSONArray();
array.put(a);
array.put(b);

JSONObject root = new JSONObject();
root.put("my_json", array);

// convert the root object to a string with 4 spaces of indentation
String json = root.toString(4); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:47:29.080

正如 Angel 所说，Jackson 和 Gson 是两个很酷的库。Gson 非常易于使用，而 Jackson 具有更好的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T04:51:36.520

在这里尝试，通过下面提到的答案 [How to convert String to JSONObject in Java](https://stackoverflow.com/questions/5245840/how-to-convert-string-to-jsonobject-in-java)

简而言之，

```
Using org.json library:

JSONObject jsonObj = new JSONObject("{\"phonetype\":\"N95\",\"cat\":\"WP\"}"); 
```

这里放上你自己的字符串。

编辑：试试这里， [http](http://www.mkyong.com/java/json-simple-example-read-and-write-json/) ://www.mkyong.com/java/json-simple-example-read-and-write-json/ 创建一个Json对象，JSONObject jsonobj = new JSONObject(); 使用... josnobj.put() 放置您的数据

# c# - 我想返回对象的子列表和原始列表的总大小

> ID：16074590
> 
> 赞同：-3
> 
> 时间：2013-04-18T04:37:24.500
> 
> 标签：c#, java, jakarta-ee

我想返回对象的子列表和原始列表的总大小。

在这种情况下，我可以使用 MAP 吗？

例子 ：-

```
Map<Integer,String> sample(){
List<String> list = new ArrayList<String>(0);

for(i=0;i<50;i++)
list.add(i+"");

List<String> sublist = list.sublist(0,10);
Integer totalsize = list.size();
Map<Integer,String> map = new Hashmap<Integer,List>(0);
map.put(totalsize,sublist);
return map;
} 
```

否则我可以返回一个 POJO 对象来将这些信息返回给调用函数。

我需要一个性能方面的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:05:00.677

如果您使用的是 C#，则可以使用该`ArraySegment<T>`结构。它也包含原始数组的引用。您可以在[msdn中找到详细信息](http://msdn.microsoft.com/en-ca/library/1hsbd92d.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:31:20.520

您需要一个 Map 来存储具有两个不同键的原始列表的子列表和大小，这是满足要求的 java 中的代码...

```
Map<Integer, String> sample() {
    Map map = new HashMap();
    List<String> list = new ArrayList<String>(0);

    for ( int i = 0; i < 50; i++)
        list.add(i + "");

    List<String> sublist = list.subList(0, 10);
    Integer totalsize = list.size();

    map.put("sublist", sublist);
    map.put("original_list_length", totalsize);

    return map;
} 
```

# r - 创建一条曲线以拟合 xy 数据，其中 X 是分类的

> ID：16074591
> 
> 赞同：3
> 
> 时间：2013-04-18T04:37:37.740
> 
> 标签：r, histogram, curve-fitting, density-plot

我有一个来自标记动物的潜水行为数据集，我正在努力为数据拟合曲线，我认为主要是因为在这种情况下 X 变量是分类的，而不是连续的数据。让我介绍一下背景：

我的数据集有 14 个变量的 184 个观察值：

```
 tagID    ddmmyy Hour.GMT.Hour.Local.  X0   X3   X10   X20   X50    X100   X150  X200  X300  X400
1     122097   250912     0            9   0.0  0.0   0.3  12.0   15.3   59.6   12.8  0.0    0    0
2     122097   260912     0            9   0.0  2.4   6.9  5.5    13.7   66.5   5.0   0.0    0    0
3     122097   260912     6            15  0.0  1.9   3.6  4.1    12.7   39.3   34.6  3.8    0    0
4     122097   260912     12           21  0.0  0.2   5.5  8.0    18.1   61.4   6.7   0.0    0    0
5     122097   280912     6            15  2.4  9.3   6.0  3.4    7.6    21.1   50.3  0.0    0    0
6     122097   290912     18           3   0.0  0.2   1.6  6.4    41.4   50.4   0.0   0.0    0    0 
```

我感兴趣的变量是`X0:X400`. 这些是深度箱，这些值表示动物在该深度箱中度过的那段时间的总时间百分比。所以在第一行，它在 0-3 米之间花费了 0% 的时间，在 100-150 米之间花费了 59.6% 的时间，等等。在我最后一个问题的一些答案的帮助下，我计算了该动物在每个深度箱中花费的平均时间百分比：

```
diving.means <- colMeans(diving[, -(1:4)])
lowerIntervalBound <- gsub("X", "", names(diving)[-(1:4)])
lowInts <- as.numeric(lowerIntervalBound)
plot(x=factor(lowInts), y=diving.means, xlab="Depth Bin (Meters—Lower Bound)", ylab="% Time Spent") 
```

这为我提供了这个情节：

![在此处输入图像描述](https://i.stack.imgur.com/LV0VG.jpg)

不幸的是，因为我的数据是平均值（单个值），而不是频率，我无法弄清楚如何将它们绘制为直方图......这既不是这里也不是那里，因为我可以轻松地将这些作为值输入并制作如有必要，需要的情节..但这现在可以通过分析来解决。

现在我想比较多种动物和不同的时间箱。我最终会制定一个系统来衡量在垃圾箱中花费的时间以获得平均深度以进行统计比较，但现在我只想在视觉上、定性地比较它们，以及生成可以在演示文稿中使用的图，并最终出版物。我想做的是创建一条代表我的“直方图”的密度曲线，然后将来自多个场景的这些曲线绘制在一个图上进行比较。但是，我似乎无法使用该`density()`功能进行这项工作，因为我没有频率数据。我已经计算了密度，作为每个箱中花费的时间百分比......但它们在我的数据集中没有以原始格式表示为类别的频率，

这是我的数据的样子：

```
> diving.means
          X0           X3          X10          X20          X50         X100         X300         X400           X150         X200 
 3.330978261  3.299456522  8.857608696 17.646195652 30.261413043 29.356521739  6.445108696  0.664130435    0.135869565  0.001630435 
```

或者：

```
> df<-data.frame(lowInts, diving.means)
> df
 lowInts diving.means
X0         0  3.330978261
X3         3  3.299456522
X10       10  8.857608696
X20       20 17.646195652
X50       50 30.261413043
X100     100 29.356521739
X150     150  6.445108696
X200     200  0.664130435
X300     300  0.135869565
X400     400  0.001630435 
```

我想要制作的东西看起来或多或少是这样的（从出版物中随机抽取——轴与我的数据无关）：

![在此处输入图像描述](https://i.stack.imgur.com/seQ6z.png)

然后能够隔离曲线并将它们绘制在一起。

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:13:11.837

你已经有频率，所以`hist`不能使用。您可以将`plot`样条插值用于密度：

```
df <- read.table(text=" lowInts diving.means
X0         0  3.330978261
X3         3  3.299456522
X10       10  8.857608696
X20       20 17.646195652
X50       50 30.261413043
X100     100 29.356521739
X150     150  6.445108696
X200     200  0.664130435
X300     300  0.135869565
X400     400  0.001630435")

require(splines)
dens <-predict(interpSpline(df[,1], df[,2]))
plot(df[,1], df[,2], type="s", ylim=c(0,40))
lines(dens, col="red",lwd=2) 
```

![在此处输入图像描述](https://i.stack.imgur.com/5GL8a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:37:08.953

我认为你想要一个阶梯函数。

您可以使用`stepfun`来创建此功能。

我会以长格式工作，然后你可以为中位数或平均值创建阶梯函数

```
# assuming your data is called `diving`
library(data.table)
DTlong <- reshape(data.table(diving), varying = list(5:14), direction = 'long', 
  times = c(0,3,10,20,50,100,150,200,300,400), 
  v.names = 'time.spent', timevar = 'hours')

DTsummary <- DTlong[,c(mean.d = mean(time.spent), 
          setattr(as.list(fivenum(time.spent)), 'names',c('min','lhinge','median','uhinge','max'))),
       by=list(hours, midhours, upperhours)] 
```

## 基础 R 步乐趣

```
f.median <- DTsummary[, stepfun(hours, c(0,median))]
f.uhinge <- DTsummary[, stepfun(hours, c(0,uhinge))]
f.lhinge <- DTsummary[, stepfun(hours, c(0,lhinge))]

plot(f.median, main = 'median time spent', xlim = c(0,500), do.points = FALSE) 
```

![在此处输入图像描述](https://i.stack.imgur.com/D6reX.png)

## 使用 ggplot2

```
ggplot(DTsummary, aes(x = hours)) + geom_step(aes(y = median)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/woAPW.png)

# php - 在另一个页面上的表单中使用 process.inc.php 中的函数

> ID：16074596
> 
> 赞同：-1
> 
> 时间：2013-04-18T04:38:07.123
> 
> 标签：php

我正在尝试创建一个具有（现在使用表格进行格式化的表格。

```
<form action="addcontent()" method="POST" class="formleft">
     <table>
        <tr>
            <td></td>
            <td><input type="hidden" id="id"/></td>
        </tr>
        <tr>
            <td>Page:</td>
            <td><input type="text" id="page"/></td>
        </tr>
        <tr>
            <td>Information:</td>
            <td><textarea id="info"></textarea></td>
        </tr>
        <tr>
            <td></td>
            <td><input type="submit" id="submit" value="Add Content">
        </tr>
     </table>
</form> 
```

如何使用内部调用的`addcontent()`函数`process.inc.php`？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:39:57.660

*   `action`不应该是函数`filename`名

    动作="process.inc.php"

*   如果你想调用这个函数，那么你必须`onSubmit`在提交表单时使用表单标签来调用这个函数

    onSubmit="addcontent()"

*   为了在其他文件中包含内容，请`process.inc.php`使用以下代码

    include_once("文件路径/process.inc.php");

# installation - 如果未在命令行上明确指定，则自动将安装前缀设置为自定义路径

> ID：16074598
> 
> 赞同：35
> 
> 时间：2013-04-18T04:38:33.263
> 
> 标签：installation, cmake, prefix

对于一些内部测试，我希望安装前缀默认为构建目录的子目录，除非用户明确覆盖。我知道用户可以通过以下方式指定安装前缀：

```
$ cmake -DCMAKE_INSTALL_PREFIX=/foo/bar .. 
```

但是如果用户*没有*指定这个，它应该默认为，例如`${PWD}/installed`。

该变量`CMAKE_INSTALL_PREFIX`已设置为`/usr/local`，因此我不能在设置之前检查它是否未设置/为空。

我当前的解决方案是添加一个自定义开关，用户必须调用它来指定`CMAKE_INSTALL_PREFIX`变量得到尊重：

```
option(ENABLE_INSTALL_PREFIX "Install build targets to system (path given by '-DCMAKE_INSTALL_PREFIX' or '${CMAKE_INSTALL_PREFIX}' if not specified)." OFF)
if ( ENABLE_INSTALL_PREFIX )
    set (CMAKE_INSTALL_PREFIX installed CACHE PATH "Installation root")
else()
    set (CMAKE_INSTALL_PREFIX installed CACHE PATH "Installation root" FORCE)
endif() 
```

我的问题是：

(a) 除了需要传递给 CMake 才能`CMAKE_INSTALL_PREFIX`生效的额外标志的烦恼之外，上述是否存在任何问题？

(b) 是否有更好、更清洁、更健壮、更惯用和/或更少烦人的方式来实现上述目标？

谢谢。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-18T07:22:39.990

[`CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT`](https://cmake.org/cmake/help/latest/variable/CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT.html)如果`CMAKE_INSTALL_PREFIX`没有明确指定，CMake 设置布尔变量并初始化为其默认设置。您可以通过以下方式覆盖它：

```
if (CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT)
    set (CMAKE_INSTALL_PREFIX "${CMAKE_BINARY_DIR}/installed"
           CACHE PATH "default install path" FORCE)
endif() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T07:05:13.330

几年前，我想尝试同样的事情。不幸的是，我永远找不到完全令人满意的解决方案。相反，我选择使用正则表达式来检查是否`CMAKE_INSTALL_PREFIX`匹配默认值。

例如，在 Windows 上，我使用以下内容`install`在构建目录中创建目录：

```
if ( CMAKE_INSTALL_PREFIX MATCHES "^C:/Program Files" )
    # Override to an "Install" directory in the current build-dir
    message( STATUS "    Install-prefix was at default -> forcing it to the build-dir" )
    message( STATUS "        'set( CMAKE_INSTALL_PREFIX ${CMAKE_CURRENT_BINARY_DIR}/install )'" )
    set( CMAKE_INSTALL_PREFIX ${CMAKE_CURRENT_BINARY_DIR}/install )
endif ( CMAKE_INSTALL_PREFIX MATCHES "^C:/Program Files" ) 
```

这个结构的最大问题是你可以手动指定 CMake 应该安装到`C:\Program Files`. 当我使用 NSIS 安装程序分发我的工具时，这不是问题（对我来说）。

也许你可以在 Unix 上尝试类似的东西。

# android - 在android中尝试通过获取textview的宽度和高度来创建图像

> ID：16074601
> 
> 赞同：0
> 
> 时间：2013-04-18T04:38:53.857
> 
> 标签：android, canvas, textview

我已经动态创建了布局和 textview，并将 textview 宽度设置为某个值，并将 hieght 设置为 fill_parent。

在做的时候

```
 tv = new TextView(this);
    tv.setLayoutParams(new LayoutParams(500, LayoutParams.WRAP_CONTENT));
    tv.setText("Hello world how are you whats up whats up hows life is good oh great");
    tv.setTextColor(Color.BLACK);
    tv.setBackgroundColor(Color.TRANSPARENT);
    tv.setTextSize(24);
    ll.addView(tv);
    this.setContentView(ll); 
```

它很好地显示内容并正确包装

你好，世界，你好吗，怎么样，生活多么美好，哦，太棒了

但是当我尝试提取此文本视图的宽度和高度并尝试创建相同宽度和相同高度的图像时，它会通过部分切割正确单词 y 来生成更小宽度的图像。

```
 bitmap = Bitmap.createBitmap(tv.getWidth(),tv.getHeight(),Config.RGB_565);

    canvas=new Canvas(bitmap);
    canvas.drawARGB(255,0,255,0);
            paint.setStyle(Style.FILL);
    paint.setColor(Color.BLUE);
    paint.setAntiAlias(true);
    paint.setTypeface(Typeface.SERIF);
    paint.setTextSize((int) 24);
            canvas.drawText(tv.getText().toString().substring(0,44),0,27, paint);
    canvas.drawText(tv.getText().toString().substring(tv.getLayout().getLineStart(1),tv.getLayout().getLineStart(2)),0,48, paint);
    canvas.drawText(tv.getText().toString().substring(tv.getLayout().getLineStart(2),tv.getLayout().getLineStart(3)),0,48+24, paint);
    canvas.save(); 
```

有什么问题。

我也试过这个

```
bitmap = Bitmap.createBitmap(tv.getWidth(),tv.getHeight(),Config.RGB_565);
        canvas=new Canvas(bitmap);
        canvas.drawARGB(255,0,255,0);
        final TextPaint paint = new TextPaint(Color.BLUE);
        paint.setStyle(Style.FILL);
        paint.setAntiAlias(true);
        paint.setTypeface(Typeface.SERIF);
        paint.setTextSize((int) 24);
        canvas.save();
        StaticLayout sl= new StaticLayout(tv.getText().toString(), paint, bitmap.getWidth(), android.text.Layout.Alignment.ALIGN_NORMAL, 1.0f, 0.0f, false);
        sl.draw(canvas); 
```

但结果我得到了一条切割文本的线和一个下划线。请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:43:14.780

TextViews 自动换行。根据设计，DrawText 没有。如果需要，则需要使用 StaticLayout 进行包装。

# java - 利用 JPA 命名查询

> ID：16074602
> 
> 赞同：1
> 
> 时间：2013-04-18T04:38:57.680
> 
> 标签：java, jpa

当我从 NetBeans 中的数据库创建实体类时，它使我可以选择从持久字段创建命名查询。因此，我看到这些命名查询列在我的 Entity 类的顶部。

这些查询到底是什么，我如何利用/“调用”它们？

我知道这个问题比 SO 上的首选问题更普遍，所以我很高兴接受一个指向回答这些问题的教程的链接，但我自己一直找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T04:47:23.560

看

*   [JPA 命名查询](http://www.objectdb.com/java/jpa/query/named)

如果你有：

```
@NamedQuery(name="Country.findAll", query="SELECT c FROM Country c")
public class Country {
  ...
} 
```

用于：

```
TypedQuery<Country> query = em.createNamedQuery("Country.findAll",Country.class);
List<Country> results = query.getResultList(); 
```

也可以看看：

*   [注释类型 NamedQuery](http://www.eclipse.org/eclipselink/api/2.0/javax/persistence/NamedQuery.html)
*   [教程：使用 JPA 构建 Web 应用程序 (JSF)](http://wiki.eclipse.org/EclipseLink/Examples/JPA/JSF_Tutorial)

# javascript - 如何使用 CSS 或 jQuery 或 JavaScript 对齐箭头

> ID：16074611
> 
> 赞同：1
> 
> 时间：2013-04-18T04:39:43.707
> 
> 标签：javascript, jquery, css

我正在尝试创建如下所示的内容：

![四个箭头彼此相对放置； 向上箭头位于顶部，左侧位于左侧，右侧位于右侧，向下位于底部。 中间的空间是空的。](https://i.stack.imgur.com/EGFXR.png)

但是，我只能让它看起来像这样：

![四个箭头连续：左、上、下、右。](https://i.stack.imgur.com/RtaFK.png)

这是我正在使用的代码。

```
<div style="position:fixed;z-index:1;">
   <a class="left" href="javascript:{}"><img src="images/leftarrow.png"/></a> 
   <a class="top" href="javascript:{}"><img src="images/uparrow.png"/></a>
   <a class="bottom" href="javascript:{}"><img src="images/downarrow.png"/></a>
   <a class="right" href="javascript:{}"><img src="images/rightarrow.png"/></a>
</div> 
```

我怎样才能让它看起来像我想要的那样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:11:25.190

不确定这对您的需求有多好，因为它使用了更多的定位。请检查。

[http://jsfiddle.net/RFHrp/](http://jsfiddle.net/RFHrp/)

```
 a.left {
    top: 20px;
    left: 15px;
}
a.right {
    top: 20px;
    left: 55px;
}
a.top {
    top: 0px;
    left: 35px;
}
a.bottom {
    top: 45px;
    left: 35px;
}
.left, .right, .top, .bottom {
    position: absolute;
    margin-left: 50%;
    cursor: pointer;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T05:53:52.680

一个完全不同的解决方案是使用单个图像作为精灵。这可以更有效，因为它减少了 http 请求。

**HTML**

```
<div style="position:fixed;z-index:1;">
    <div class="arrowContainer">
        <a class="left" href="javascript:{}">L</a>
        <a class="top" href="javascript:{}">U</a>
        <a class="bottom" href="javascript:{}">D</a>
        <a class="right" href="javascript:{}">R</a>
    </div>
</div> 
```

**CSS**

```
.arrowContainer 
{
    position:relative;
    width:50px;
    height:50px;
}

.arrowContainer a
{
   background-image:url(http://i.stack.imgur.com/RtaFK.png);
    background-repeat:no-repeat;
    text-indent:-9999px;
    display:block;
    width:20px;
    height:20px;
    position: absolute; 
}

.arrowContainer .top 
{    
    top: -2px; 
    left: 15px;
    background-position: -24px top;    
}

.arrowContainer .left
{
    top: 15px;
    left: 0;
}
.bottom {
    bottom: 0;
    left: 15px;
    background-position: -52px 2px; 
}

.right {
    top: 15px;
    right: 0;
    background-position: -76px top; 
} 
```

您可能需要调整元素和/或背景图像的位置，但这是一个好的开始。

如果要添加背景颜色，请使用具有透明背景的图像。

小提琴：http: [//jsfiddle.net/tqH3m/1/](http://jsfiddle.net/tqH3m/1/)

**更新**

最好不要使用图像。您可以使用纯 css 并将背景颜色应用于容器。HTML与上面相同

**CSS**

```
.arrowContainer 
{
    position:relative;
    width:50px;
    height:50px;
    background-color:#CCC;
}

.arrowContainer a
{
    text-indent:-9999px;
    display:block;
    width:0;
    height:0;
    position: absolute; 
}

 .top 
{    
    top: 0; 
    left: 15px;  
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 10px solid black;
}

 .top:hover 
{    
    border-bottom: 10px solid #F00;
}

.left
{
    top: 15px;
    left: 0;    
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent; 
    border-right:10px solid black; 
}

.left:hover
{
    border-right:10px solid #F00; 
}

.bottom {
    bottom: 0;
    left: 15px;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 10px solid black;
}

.bottom:hover {
    border-top: 10px solid #F00;
}

.right {
    top: 15px;
    right: 0;
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent;
    border-left: 10px solid black;
}

.right:hover {
    border-left: 10px solid #F00;
} 
```

小提琴：http: [//jsfiddle.net/tqH3m/2/](http://jsfiddle.net/tqH3m/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:44:19.530

## css

```
.left{

   left:

   top:

} 
```

像上面一样为所有类设置值

查询：

```
$('.left').css({'left':0,'top':0}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T04:53:36.353

您可以将 CSS 位置用于第二张和第三张图像吗？你必须做这样的事情。

```
.top {position: absolute; top: <some value>; left: <some value>}
.bottom {position: absolute; top: <some value>; left: <some value>} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T05:08:16.630

最后我使用以下代码解决了我的问题。但我不知道我是否可以使用这种方式。但它对我有用。

```
<div style="position:fixed;z-index:1;background-color:yellow;border-radius:4px;">
 <div  style="float:left;margin-top:10px;">
 <a class="left" href="javascript:{}"><img src="images/leftarrow.png"/></a> 
 </div>
 <div style="width:23px;float:left;">
 <a class="top" href="javascript:{}"><img src="images/uparrow.png"/></a>
 <a class="bottom" href="javascript:{}"><img src="images/downarrow.png"/></a>
 </div>
 <div style="float:left;margin-top:10px;">
 <a class="right" href="javascript:{}"><img src="images/rightarrow.png"/></a>
 </div>
</div> 
```

# android - 接收短信时如何获取联系人姓名

> ID：16074617
> 
> 赞同：3
> 
> 时间：2013-04-18T04:41:13.023
> 
> 标签：android, sms, broadcastreceiver

我有以下代码来接收短信，我正在尝试获取联系人姓名。

```
package com.example.smsTest;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.provider.ContactsContract.PhoneLookup;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SmsReceiver extends BroadcastReceiver {
    private SQLiteAdapter mySQLiteAdapter;

    @Override
    public void onReceive(Context context, Intent intent) {
        mySQLiteAdapter = new SQLiteAdapter(context);
        mySQLiteAdapter.openToRead();

        Message message = null;

        Bundle extras = intent.getExtras();
        if (extras == null)
            return;

        Object[] pdus = (Object[]) extras.get("pdus");
        for (int i = 0; i < pdus.length; i++) {
            SmsMessage SMessage = SmsMessage.createFromPdu((byte[]) pdus[i]);
            String sender = SMessage.getOriginatingAddress();
            String body = SMessage.getMessageBody().toString();

            message = mySQLiteAdapter.createMessage(sender, body);

            // A custom Intent that will used as another Broadcast
            Intent in = new Intent("SmsMessage.intent.MAIN").putExtra(
                    "get_msg", sender + ":" + body);

            // To display a Toast whenever there is an SMS.
            Toast.makeText(context, body, Toast.LENGTH_LONG).show();

            Uri personUri = Uri.withAppendedPath( ContactsContract.PhoneLookup.CONTENT_FILTER_URI, SMessage.getOriginatingAddress());  

            Cursor cur = context.getContentResolver().query(personUri, new String[] { PhoneLookup.DISPLAY_NAME }, null, null, null );  

            if( cur.moveToFirst() ) {  
                         int nameIndex = cur.getColumnIndex(PhoneLookup.DISPLAY_NAME);  

                         String PersonName = cur.getString(nameIndex); 

                         Toast.makeText(context, PersonName, Toast.LENGTH_LONG).show();
            }
            cur.close();

            // You can place your check conditions here(on the SMS or the
            // sender)
            // and then send another broadcast
            context.sendBroadcast(in);

            // This is used to abort the broadcast and can be used to silently
            // process incoming message and prevent it from further being
            // broadcasted. Avoid this, as this is not the way to program an
            // app.
            this.abortBroadcast();
        }
    }
} 
```

这是我添加的导致我的应用程序崩溃的代码：

```
Uri personUri = Uri.withAppendedPath( ContactsContract.PhoneLookup.CONTENT_FILTER_URI, SMessage.getOriginatingAddress());  

Cursor cur = context.getContentResolver().query(personUri, new String[] { PhoneLookup.DISPLAY_NAME }, null, null, null );  

if( cur.moveToFirst() ) {  
             int nameIndex = cur.getColumnIndex(PhoneLookup.DISPLAY_NAME);  

             String PersonName = cur.getString(nameIndex); 

             Toast.makeText(context, PersonName, Toast.LENGTH_LONG).show();
}
cur.close(); 
```

我刚刚修改了此[链接](https://stackoverflow.com/questions/4359564/how-to-get-the-contacts-display-name-in-sms-uri)答案中的代码。

现在应用程序在收到短信时崩溃。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T06:14:16.057

试试这个代码

在广播接收器中

```
 public class SMSReceiver  extends BroadcastReceiver{

 String str = "";    
 String no = "";
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub

     Bundle bundle = intent.getExtras();  
        SmsMessage[] msgs = null;
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                

                str += msgs[i].getMessageBody().toString();
                str += "\n";    
                no = msgs[i].getOriginatingAddress();

                //Resolving the contact name from the contacts.
                Uri lookupUri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(no));
                Cursor c = context.getContentResolver().query(lookupUri, new String[]{ContactsContract.Data.DISPLAY_NAME},null,null,null);
                try {
                    c.moveToFirst();
                 String  displayName = c.getString(0);
                String ContactName = displayName;   
                Toast.makeText(context, ContactName, Toast.LENGTH_LONG).show();

                } catch (Exception e) {
                    // TODO: handle exception
                }finally{
                    c.close();
                }

            }
        }
    }
} 
```

您必须使用 intentfilter 在清单中注册此广播接收器

```
 <receiver android:name="SMSReceiver">

         <intent-filter> 
             <action android:name= "android.provider.Telephony.SMS_RECEIVED" />
         </intent-filter> 

    </receiver> 
```

另外，您必须添加用户权限，例如

```
<uses-permission android:name="android.permission.SEND_SMS"/>
<uses-permission android:name="android.permission.RECEIVE_SMS"/>
<uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

# ruby-on-rails - 用设计嵌套资源

> ID：16074619
> 
> 赞同：1
> 
> 时间：2013-04-18T04:41:38.310
> 
> 标签：ruby-on-rails, devise

这是我的路线文件。

```
devise_for :users, :path => 'accounts'

resources :users do
  resources :articles
end 
```

如何在主页上显示用户的所有文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:47:27.263

试试这个（HAML）：

```
- current_user.articles.each do |article|
  = article.name 
```

您必须确保在您的`articles_controller`.

# java - Java 访问修饰符的可访问性范围

> ID：16074621
> 
> 赞同：3
> 
> 时间：2013-04-18T04:41:42.113
> 
> 标签：java, access-modifiers

Java 具有私有、受保护和公共访问修饰符。你能解释一下这些修饰符的可访问性范围吗？

如何访问不同包中的受保护成员？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-18T04:45:56.523

为了更好地理解你需要看到这个

```
Access Modifiers

                   Same Class      Same Package            Subclass     Other packages
public               Y                Y                      Y                   Y
protected            Y                Y                      Y                   N
no access modifier   Y                Y                      N                   N
private              Y                N                      N                   N 
```

这里重要的区别是`Default`和`protected`。
**默认值：**永远不能在包外访问
**受保护：**仅当且仅当类是子类时才能在包外访问。
**编辑：**因为你的问题的答案也一样*`You can access the protected member by make your class a sub class of the class , in which protected member is defined`*

# ruby-on-rails - 如何使用 rails 控制台从表中删除列

> ID：16074630
> 
> 赞同：65
> 
> 时间：2013-04-18T04:42:45.763
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2, rails-migrations

使用 rails 迁移可以轻松移除列。

```
class SomeClass < ActiveRecord::Migration
  def self.up
    remove_column :table_name, :column_name
  end
end 
```

我想知道是否有任何方法可以使用控制台从表中删除列。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-04-18T04:50:22.433

您可以`up`直接在方法中运行代码`rails console`：

```
>> ActiveRecord::Migration.remove_column :table_name, :column_name 
```

如果您已经有一个迁移文件，例如“ `db/migrate/20130418125100_remove_foo.rb`”，您可以这样做：

```
>> require "db/migrate/20130418125100_remove_foo.rb"
>> RemoveFoo.up 
```

如果你只是想做`rake db:migrate`，试试这个：

```
>> ActiveRecord::Migrator.migrate "db/migrate" 
```

# java - 为什么将 Math.min() 用于 x、y 坐标和 math.abs() 是个好主意

> ID：16074631
> 
> 赞同：3
> 
> 时间：2013-04-18T04:42:47.857
> 
> 标签：java

为什么使用方法（对于矩形）使用`Math.min()`xy 坐标和宽度和高度是个好主意？`Math.abs()`我认为 xy 坐标总是正数，所以我很困惑为什么它很重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T04:49:27.963

x,y 坐标表示矩形在平面上的位置；它们可以是负数，因为矩形可以放置在相对于原点的任何位置（即 0,0 位置）。

矩形的高度和宽度必须为正，因为实际上没有定义负长度。

`Math.min`考虑到这一点，使用位置和`Math.abs`维度是有意义的。

# vb.net - 在循环中间关闭我的应用程序时出错

> ID：16074633
> 
> 赞同：-1
> 
> 时间：2013-04-18T04:42:57.477
> 
> 标签：vb.net, do-while

这是我的循环代码：

```
Do While potsStatus = True
Dim ForeGroundHwnd As IntPtr = GetForegroundWindow
Dim MySearchWinow As IntPtr = FindWindow(Nothing, SearchWindow)
If ForeGroundHwnd = MySearchWinow Then
    If rbQ.Checked = True Then
        keybd_event(vbKeyQ, 0, 0, 0)
        keybd_event(vbKeyQ, 0, KEYEVENTF_KEYUP, 0)
        Thread.Sleep(1)
    ElseIf rbW.Checked = True Then
        keybd_event(vbKeyW, 0, 0, 0)
        keybd_event(vbKeyW, 0, KEYEVENTF_KEYUP, 0)
        Thread.Sleep(1)
    ElseIf rbE.Checked = True Then
        keybd_event(vbKeyE, 0, 0, 0)
        keybd_event(vbKeyE, 0, KEYEVENTF_KEYUP, 0)
        Thread.Sleep(1)
    ElseIf rbR.Checked = True Then
        keybd_event(vbKeyR, 0, 0, 0)
        keybd_event(vbKeyR, 0, KEYEVENTF_KEYUP, 0)
        Thread.Sleep(1)
    End If
End If 
```

问题是当循环正在运行并且我退出/关闭它遇到错误的应用程序时，进程仍然存在并且循环永远不会结束。我唯一能做的就是在任务管理器中手动停止该进程。我希望有人可以帮助我。

编辑：解决。我在表单关闭事件中使循环为假。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:33:54.323

查看您的代码，我看不到您设置`potsStatus`为 false 的任何地方（另一方面，您无需说`Do While potsStatus = True`，您只需说`Do While potsStatus`）。你需要做的是有一些机制让你的循环知道它需要停止。

因此，在您的表单关闭事件中，您可以设置`potsStatus`为 false（假设它是表单范围的变量）。这种看起来会是一个很好的`Thread`候选者，尽管我不能肯定地说对代码没有更好的了解。

# python - 将python datetime插入mysql表

> ID：16074639
> 
> 赞同：0
> 
> 时间：2013-04-18T04:43:29.040
> 
> 标签：python, mysql

我有一个 Python 日期，比如

```
2013-04-04T18:56:21Z 
```

我想将它存储到我的 mysql 数据库中。

我试过了

```
self.start_at = datetime.strptime(self.start_at.split(".")[0], "%Y-%m-%dT%H:%M:%S") 
```

但我收到一个错误

```
ValueError: unconverted data remains: Z 
```

请告诉我如何将上述日期转换为 mysql 可接受的格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:57:01.773

在这种情况下，这将起作用。

```
>>> from datetime import datetime
>>> start_at = '2013-04-04T18:56:21Z'
>>> datetime.strptime(start_at , "%Y-%m-%dT%H:%M:%SZ")
datetime.datetime(2013, 4, 4, 18, 56, 21) 
```

T & Z 字符是否始终采用您的日期格式，还是每次都更改？如果这些分隔符有一些变化，你应该这样做：

```
>>> from datetime import datetime
>>> start_at = '2013-04-04T18:56:21Z'
>>> datetime.strptime(start_at[0:10] + ' ' + start_at[11:19], "%Y-%m-%d %H:%M:%S")
datetime.datetime(2013, 4, 4, 18, 56, 21) 
```

# html - 将左框文本包裹在右浮动周围，保持标记语义，IE>=8

> ID：16074643
> 
> 赞同：1
> 
> 时间：2013-04-18T04:43:39.753
> 
> 标签：html, css

我们想要什么：

```
div a text div a text  | div b text |
div a text div a text  | div b text |
div a text div a text  | div b text |
div a text div a text div a text diva
div a text div a text div a text diva
div a text div a text div a text diva 
```

我们有什么：

```
<div id="a">
    <h3>...</h3>
    <p>...</p>
    <p>...</p>
</div>

<div id="b">
    <h3>...</h3>
    <p>...</p>
</div> 
```

如果两个 div 中内容的**顺序必须保持给定的顺序**（注意内容是可变的），如何才能实现我们想要的（并在 IE8 中工作......）？

`Div b`具有固定宽度，可变高度，并且 和 的容器 div`div a`具有`div b`固定宽度。

**编辑 1**

我发现了在上面插入虚拟 div 的技术，将`div a`其宽度设置为`div b`，使用 JS 计算高度`div b`并将其应用于虚拟 div，将虚拟 div 向右浮动，然后绝对定位`div b`在虚拟 div 的顶部。这是我发现在不使用高级 CSS3`div a`和`div b`不使用高级 CSS3 的情况下保持内容顺序的唯一方法......

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T14:01:18.443

将以下示例调整为您想要的宽度：[http ://cdpn.io/heDJu](http://cdpn.io/heDJu)

# windows-phone-7 - Windows Phone 7 中的同步呼叫

> ID：16074646
> 
> 赞同：1
> 
> 时间：2013-04-18T04:43:59.057
> 
> 标签：windows-phone-7, httpwebrequest, webclient, ivalueconverter, manualresetevent

我知道我无法在 Windows Phone 7 中进行真正的同步调用。但是，我试图至少阻止线程处理，直到进行异步调用或超时。我尝试了以下方法，但似乎我的应用程序只是忽略了它，放弃了呼叫，并且没有返回。任何想法为什么？

我正在尝试在绑定期间使用值转换器更新值。

```
public ManualResetEvent _event;

public void GetSync()
{
    _event = new ManualResetEvent(false);

    var wc = new WebClient();
    wc.OpenReadCompleted += new OpenReadCompletedEventHandler(ReadCompleted);
    wc.OpenReadAsync(new Uri("My URL"));

    // block until async call is complete
    _event.WaitOne(5000);
}

private void ReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    var serializer = new XmlSerializer(typeof(MyFormatter));
    // The property below is accessed back in the Value Converter for binding
    StronglyTypedObject = (StObject)serializer.Deserialize(e.Result);
    _event.Set();
} 
```

# ios - 如何将数据传递给ios中的父类？

> ID：16074647
> 
> 赞同：3
> 
> 时间：2013-04-18T04:44:13.607
> 
> 标签：ios, objective-c, delegation

我是**Objective-C**的初学者。如果我的问题很愚蠢，请原谅。

在 my`root view controller A`中，我添加了一个`subview`B。在 b 中还会有另一个`subview C`. C 包含另一个`subview D`. 如何在`A from D`. 我知道我们可以使用**委托**将数据传递给`parent controller`. 但我的问题是，我是否需要创建代表哪些调用`C from D`和另一个调用`B from C`等等？或者有没有直接调用方法的方法`A from D`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T04:59:36.540

> 但我的问题是，我是否需要创建一个从 D 调用 C 的委托和另一个从 C 调用 B 的委托，依此类推？

视图控制器的工作是管理它的视图和该视图的所有子视图。如果您有一个需要向视图控制器发送消息的视图，例如当用户更改其值时需要在某处发送消息的控件，那么视图控制器应该知道它就在那里。在这种情况下，视图控制器可以在加载视图层次结构时将自己（或其他适当的对象）设置为所述子视图的委托或目标，如下所示：

```
- (void)viewDidLoad
{
    self.needControl.delegate = self;
} 
```

这样，有需要的控件就不需要知道作为其委托的对象的任何信息。它没有假设对象是视图控制器，或者它的父视图，或者其他任何东西。它所关心的只是它有一个委托，并且它的委托实现了必要的方法。反过来，这可以帮助您保持代码更加灵活和可维护，甚至可以重用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T04:52:56.877

> 我是否需要创建一个从 D 调用 C 的委托和另一个从 C 调用 B 的委托，依此类推？ **不**

您可以使用单个委托从 D 调用 A 中的方法。根据您的评论，我了解到 B、C、D 是 UIView 控制的根视图控制器。所以这项工作很简单，您需要在创建每个子视图时将委托设置为其根视图控制器。
1\. 视图 B 是从根视图控制器本身创建的，所以**viewB.delegate = self**
2\. 视图 C 是从视图 B 创建的，所以**viewC.delegate = self.delegate**
3\. 对视图 D 也重复同样的操作

现在您的所有视图都由您的委托 rootViewController 控制。
最后[这个答案](https://stackoverflow.com/questions/15361391/trigger-a-method-in-uiviewcontroller-from-its-view/15363649#15363649)将帮助您完成任务

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T04:55:56.433

您应该构建您的代码，以便 D 类根本不知道 A 类存在。

在 iOS/Mac 编程中有一些常见的特定技术：

*   D 类有一个委托属性，并在其上调用方法。当只有一个对象可以接收委托方法时使用它，这对于询问是否应该立即启用或禁用它的按钮特别有用。使用界面生成器将视图的委托设置为您的 A 类实例。
*   类 D 应该有一个“目标”属性（类型`id`）和一个“动作”属性（类型`SEL`），并将动作消息/选择器发送到目标对象。当视图具有触发的特定单个操作时很有用，例如按下按钮时，或者用户在文本字段中按下 Enter 键。使用界面生成器将视图的目标和操作设置为您的 A 类实例。
*   D 类将消息和元数据发送到 [NSNotificationCenter defaultCenter]，A 类告诉通知中心它想要观察这些通知。当发生某些事情时可能需要通知许多对象时很有用，例如当文本字段接收或失去键盘焦点时。
*   类 D 具有一个或多个属性，只要该属性的值发生更改，就会发送 Key Value Observing 通知。A 类会告诉 Key Value Observing 系统，它想知道 D 类的特定属性何时发生变化。当您特别关心某些数据时，这很有用，例如当文本字段的值发生变化时。

所有这些技术在堆栈溢出或 Apple 官方文档中都有更详细的描述。

B 类和 C 类也不应该知道 A 类存在。A 类应该知道如何找到其他对象，除非您可以使用界面生成器（前两个选项允许这样做）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T04:50:50.933

将您的`A_viewCon.h`文件添加到您的`D_viewCon.h`文件中

创建对象`A_viewCon`并正确设置`@property`和`@synthesize`。

调用`A_viewCon`in`D_viewCon`编写以下代码的方法。

```
[self.objectOFA_viewCon performSelector:@selector(MethodNameOFA_viewCon) withObject:nil afterDelay:0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T04:54:02.460

你可以注册A类来观察一个`NSNotification`like ->

`- (void)addObserver:(id)observer selector:(SEL)aSelector name:(NSString *)aName object:(id)anObject;`

并`NSNotifications`从 D 类的对象发布，例如 ->

`- (void)postNotificationName:(NSString *)aName object:(id)anObject userInfo:(NSDictionary *)aUserInfo;`

这样您就不需要保留引用/委托，并且您仍然可以在活动对象之间进行通信。

# c++ - C++ STL 找不到嵌套类的比较器

> ID：16074649
> 
> 赞同：2
> 
> 时间：2013-04-18T04:44:25.660
> 
> 标签：c++, stl, inner-classes, nested-class, name-lookup

我希望这段代码可以工作，但它无法用 GCC 编译。如果您将内部类取出，它会编译。

```
#include <algorithm>

template <typename T>
struct Outer
{
  struct Inner
  {
    int x;
  };
  Inner vec[3];
};

template <typename T>
bool operator <(const typename Outer<T>::Inner& lhs, const typename Outer<T>::Inner& rhs)
{
  return lhs.x < rhs.x;
}

int main()
{
  Outer<int> out;
  Outer<int>::Inner in;
  std::lower_bound(out.vec, out.vec + 3, in);
} 
```

GCC 4.4 有这样的说法：

```
...
bits/stl_algo.h:2442: error: no match for ‘operator<’ in ‘* __middle < __val’ 
```

GCC 4.7 打印了更多的东西，包括上面的，以这个结尾：

```
...
bits/stl_algobase.h:957:4: note: couldn't deduce template parameter ‘T’ 
```

我愿意相信它不是格式良好的 C++，但为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T04:46:00.387

如果您超载特定`operator<`的`int`问题将消失：

```
bool operator<(const typename Outer<int>::Inner& lhs, 
               const typename Outer<int>::Inner& rhs)
{
    return lhs.x < rhs.x;
} 
```

更简单的解决方案是`operator<`在内部定义`Inner`：

```
template<typename T>
struct Outer
{

    struct Inner
    {
        int x;

        bool operator<(const Inner& obj) const
        {
            return x < obj.x;
        }

    };
    Inner vec[3];
}; 
```

此外，这只是一个快速的解决方案。我的答案不是*为什么*编译器在模板模式下的嵌套情况下找不到`operator<`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T05:55:47.693

这是另一种解决方法。为什么不使用自定义比较器？

```
template <typename T>
struct Comparer
{
    bool operator()(const typename Outer<T>::Inner& lhs, const typename Outer<T>::Inner& rhs)
    {
        return lhs.x < rhs.x;
    }
};

int main()
{
    Outer<int> out;
    Outer<int>::Inner in;
    std::lower_bound(out.vec, out.vec + 3, in, Comparer<int>());
} 
```

希望这对你有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-29T20:49:34.223

您提到的问题是编译器无法推断出模板参数`T`。这是因为 typename Outer::Inner 是 T 的*非推导上下文*上下文。

当模板参数仅在非推导上下文中使用时，模板参数推导不考虑它。详细信息在 C++ 标准 (2003) 的第 14.8.2.4 节。

为什么？如果您将 Outer 专业化为：

```
template <>
struct Outer<int>
{
   struct Inner
   {
       double y;
   };
   Inner vec[3];
}; 
```

编译器无法推断 Outer::Inner 是否应该引用此定义或前一个定义。

现在，到解决方案。有几个可能的解决方案：

1.  将 operator< 移动到 Inner 内部并使其成为友元函数。
2.  [像M M.](https://stackoverflow.com/a/16074663/440060)建议的那样在 Inner 中定义 operator< 。
3.  由[Johannes Schaub 建议 - litb](https://stackoverflow.com/a/8308245/440060)：从由内部参数化的 CRTP 基础派生内部。然后将参数类型设为 CRTP 类，并将参数引用强制转换为派生的内部类，其类型由您推导出的模板参数给出。

我尝试了[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)方法，因为它听起来很酷！：

```
template <typename Inner>
struct Base
{
};

template <typename T>
struct Outer
{
  struct Inner : Base<Inner>
  {
    T x;
  };
  Inner vec[3];
};

template <typename T>
bool operator< (const Base<T>& lhs, const Base<T>& rhs)
{
  return static_cast<const T&>(lhs).x < static_cast<const T&>(rhs).x;
} 
```

[相关](https://stackoverflow.com/a/3830652/440060)答案：[1、2、3](https://stackoverflow.com/a/1268905/440060) [_](https://stackoverflow.com/a/8308245/440060) _

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-30T13:21:08.920

Mar0ux 的回答非常好。您可以在此处找到更多信息：

[Stephan T. Lavavej: Core C++, 2 of n](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Core-C-/Stephan-T-Lavavej-Core-C-2-of-n "Stephan T. Lavavej: Core C++, 2 of n")

您应该观看整个视频系列 - 它包含很多有用的信息，但您可能会从第 34 分钟左右开始回答您的问题。Stephen 提到了一个需要牢记的基本规则：

`::`是模板实参推演的砖墙，即`T`无法推演左侧的模板实参。

# objective-c - 如何查找 NSString 中是否存在确切的子字符串

> ID：16074657
> 
> 赞同：0
> 
> 时间：2013-04-18T04:45:17.783
> 
> 标签：objective-c, nsstring

我怎样才能找到一个精确`substring`的是否存在于`NSString`.

目前假设一个`string "1000 * RoomTemperature"`，我想检查“RoomTemperature”是否存在。

`["1000 * RoomTemperature" rangeOfString:"RoomTemperature"].location != NSNotFound` 这会给我`TRUE`。但如果我检查`["1000 * RoomTemperature" rangeOfString:"Temperature"].location != NSNotFound`. 这也将返回我`TRUE`。

我的要求是获得`FALSE`第二种情况。请帮我解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:58:46.327

尝试使用以下代码。只有当单词存在时才会返回true，如果不存在则返回false

> ```
> NSString *str =  @"1000 * RoomTemperature";
> NSArray *array = [str componentsSeparatedByString:@" "];
> return [array containsObject:@"RoomTemperature"]; 
> ```

# android - 无法在 Gingerbread 上执行翻译和 alpha 动画

> ID：16074660
> 
> 赞同：1
> 
> 时间：2013-04-18T04:45:44.417
> 
> 标签：android, animation

我有以下动画资源：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator"
    android:shareInterpolator="true">
    <translate
        android:duration="@integer/animation_time"
        android:fromXDelta="0%" 
        android:toXDelta="0%" 
        android:fromYDelta="0"
        android:toYDelta="10%"  />
    <alpha
        android:duration="@integer/animation_time"
        android:fromAlpha="1.0"
        android:toAlpha="0.0" />
</set> 
```

我在对话框上设置了这个动画，所以当对话框被关闭时，它会稍微向下移动并淡出。这适用于 Android 3.0+，但在 3.0 之前的设备上，动画的 alpha 部分没有任何作用。如果我将持续时间设置为更长的时间，对话框不会立即消失，所以看起来它正在运行，对话框并没有消失。如果我注释掉翻译，或者将翻译上的 toYDelta 值设置为 0（这样就没有任何翻译），那么 alpha 在 2.3.4 上工作，只是当对话框移动时它不会消失。

知道这是为什么吗？我在 HTC Evo 3d 上遇到了这个问题，它确实有可用于 4.0 的更新，但我还没有更新，所以我可以将它用作测试设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:33:04.203

我在共享插值器时遇到了问题。尝试为每个动画设置一个插值器，而不是使用`android:shareInterpolator`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T12:23:21.347

使用浮点数的 Alpha 动画仅在 API 级别 11 中引入。 setAlpha(int) 动画从 API 级别 1 开始就存在。我不确定这是否会像对内置方法一样适用于 XML，但您可以尝试使用整数值“1”和“0”而不是浮点数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T20:46:45.253

您可以执行一个动画，它只会将 alpha 设置为特定的浮点值。我怀疑这有点耗费资源，因为每次设置 alpha 时都必须使用动画。

```
public void setLayoutAlpha(float alpha, View v){
    AlphaAnimation alphaAnim = new AlphaAnimation(alpha, alpha);
    alphaAnim.setFillAfter(true);
    alphaAnim.setFillEnabled(true);
    v.startAnimation(alphaAnim);
} 
```

可以这样称呼。

```
setLayoutAlpha(1f,viewToChangeAlpha); 
```

这就是我用来创建 swipeToDismiss 布局的方法，该布局具有在 3.0 之前工作的淡入淡出视图

希望它适用于您需要使用它的任何用途。

# android - android中的图像按钮和文本视图数组

> ID：16074667
> 
> 赞同：0
> 
> 时间：2013-04-18T04:46:16.607
> 
> 标签：android, textview, imagebutton

我正在尝试创建一个数组，其中每个项目都有一个图像按钮，并且该图像按钮下方将是 center 的文本视图。谁能告诉我如何做到这一点。我尝试了下面的代码，但没有得到它的工作

```
but=new ImageButton(this);
but.setFocusableInTouchMode(true);
but.setId(1);
imbrelp= new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
rel.addView(but,imbrelp);
tv= new TextView(this);
tvrelp= new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
tvrelp.addRule(RelativeLayout.BELOW, but.getId());
tvrelp.addRule(RelativeLayout.CENTER_HORIZONTAL, but.getId());
rel.addView(tv, tvrelp);
setContentView(rel); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:45:09.800

我会避免尝试在代码中创建 RelativeLayout。对于您想做的事情来说，这将太混乱了。相反，为您的单个项目创建一个 xml 布局文件，然后为数组中的每个项目扩展它。

res/layout/main.xml 中的容器布局：

```
<LinearLayout
  android:id="@+id/container"
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical" >

</LinearLayout> 
```

res/layout/item.xml 中的项目布局：

```
<RelativeLayout
  android:layout_width="match_parent"
  android:layout_height="wrap_content" >

  <ImageButton
    android:id="@+id/image_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/my_image" />

  <TextView
    android:id="@+id/text_view"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/image_button"
    android:layout_centerHorizontal="true"
    android:text="@string/my_text" />

</RelativeLayout> 
```

您活动中的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
  setContentView(R.layout.main);

  ViewGroup container = (ViewGroup) findViewById(R.layout.container);

  LayoutInflater inflater = LayoutInflater.from(this);

  Item[] items = getMyArrayOfItems();
  for (Item i : items) {
    View itemView = inflater.inflate(R.layout.item, container, false);
    ImageButton button = (ImageButton) itemView.findViewById(R.id.image_button);
    TextView textView = (TextView) itemView.findViewById(R.id.text_view);

    // TODO set the text and images

    container.addView(itemView);
  }
} 
```

# http - 如何从 angularjs 调用外部休息服务？

> ID：16074668
> 
> 赞同：1
> 
> 时间：2013-04-18T04:46:17.197
> 
> 标签：http, rest, angularjs

我正在尝试使用 $http 服务从角度调用外部 REST 服务。
问题是我被困在 $http.get 方法上，因为每次我调用
其余服务时，我都会收到一个 status = 0 的
错误，并且错误回调的 data 参数中没有任何信息。

到目前为止，我已经尝试在端口 5000 上调用本地服务运行：这应该返回一个带有属性和值的 json 对象。另一种方法是调用[http://api.flickr.com/services/rest/?method=flickr.test.echo&name=test](http://api.flickr.com/services/rest/?method=flickr.test.echo&name=test)希望得到答案。对于他们两个，我都得到了同样的错误：我之前提到过。调用是从一个注入了 http 服务的角度控制器发出的。谢谢。`$http.get('http://`localhost`:5000/ping')`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T19:23:23.083

你有没有尝试过：

```
 $http({method: 'GET', url: 'someURL'}).
            success(function(data, status, headers, config) {
                //set view model or do something.

            }).
            error(function(data, status, headers, config) {

            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-08T17:33:28.183

由于 $http 返回一个 Promise，您可以使用该`.then()`方法在 Promise 解决时记录您的结果，或者在出现任何错误时记录错误：

```
$http.get('http://localhost:5000/ping')
    .then(function(returnedJson) {
        console.log(returnedJson.data);
    })
    .catch(console.error) // or $log.error if you are using $log from Angular 
```

请注意，干净的 JSON 响应是通过记录对象的`.data`属性获得的`returnedJson`。由于它是一个 Promise，它包含与使用 Web 服务无关的其他信息。

另请注意，您要使用的 Web 服务也应该与您的 Angular 应用程序位于同一域中，否则您可能会遇到跨域错误，除非该服务通过公开跨域策略来允许从外部网站使用。

（在此处查找更多信息：[有人可以发布格式良好的 crossdomain.xml 示例吗？](https://stackoverflow.com/questions/213251/can-someone-post-a-well-formed-crossdomain-xml-sample)）

如果是这样的话，这篇文章应该会有所帮助：

[jQuery AJAX 跨域](https://stackoverflow.com/questions/3506208/jquery-ajax-cross-domain)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-17T20:15:58.703

如果有参数，请确保您已正确传递参数。
一般语法应如下所示：

```
$http.get('../link/yourApplication/searchBySomeNumber?someNum='+$scope.someNum+'&asOfDate='+asOfDate+'&status=undefined') 
            .success(function(data, status, headers, config) {
                //your code
                console.log('Data return successful');
            })
            .error(function(data, status, headers, config) {
                $scope.status = status;
                alert('Info Error');
                console.log('Group Info Error');
            }); 
```

# python - 如何运行我在 Centos 5.3 上安装的其他版本的 python

> ID：16074671
> 
> 赞同：1
> 
> 时间：2013-04-18T04:46:27.320
> 
> 标签：python, centos5

我的 Centos 5.3 Final 上安装了两个不同版本的 python。默认版本为 2.4.3，新版本为 2.6.8。

```
[root@localhost bin]# ls py*
pydoc  pydoc26  pygtk-demo  python  python2  python2.4  python26  python2.6
[root@localhost bin]# python -V
Python 2.4.3
[root@localhost bin]# python26 -V
Python 2.6.8 
```

我喜欢使用新的，但 python 仍然指向旧的。

```
[root@localhost Desktop]# python -V
Python 2.4.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:57:51.553

尝试`which python`，并让您`python`链接到新的 2.6.8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:13:17.957

可以使用thkang提到的方法，但是如果你想回到python2.4.3版本呢？解决方案是使用 virtualenv，您可以使用两个版本测试您的脚本或应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T07:32:50.307

操作系统可能使用 Python 2.4。因此，您不应该为 root 更改它，但如果 root 的任何脚本必须使用新版本，则在顶部使用：

```
#/usr/bin/env python2.6 
```

对于普通用户，您可以在 ~/bin 中创建链接，如果它在您的路径中：

```
cd ~/bin
ln -s $(which python2.6) python 
```

如果 ~/bin 不在您的路径中，请将其添加到 ~/.bashrc：

```
if [ -d ~/bin ] ; then
    PATH=~/bin:"${PATH}"
fi 
```

# javascript - AngularJS 策略来防止类的无样式内容闪现

> ID：16074673
> 
> 赞同：54
> 
> 时间：2013-04-18T04:46:30.823
> 
> 标签：javascript, dom, angularjs, interpolation, fouc

我有一个 AngularJS 项目，我想在类名的页面加载期间防止 FOUC。我读过关于 ng-template 的内容，但这似乎只对标签内的内容有用。

```
<body class="{{ bodyClass }}"> 
```

我希望它在页面加载时成为“登录”。有什么策略吗？还是我只需要捏造它并将其加载为“登录”并手动使用 javascript 来调整这个实例的 DOM。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-18T06:13:47.307

您正在寻找的是`ng-cloak`.
您必须像这样添加它：

```
<body class="{{ bodyClass }}" ng-cloak> 
```

这将防止不必要的闪烁。
[链接到有关此的文档。](http://docs.angularjs.org/api/ng.directive:ngCloak)

编辑：
根据文档，建议将下面的代码段放入您的 CSS 文件中。

> “为了获得最佳效果，angular.js 脚本必须加载到 html 文档的 head 部分；或者，上面的 css 规则必须包含在应用程序的外部样式表中。”

```
[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
    display: none !important;
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-03-19T21:06:48.027

您面临的问题之一是浏览器将`<body>`在 AngularJS 加载并开始操作 DOM 之前显示元素。其他人所说的`ng-class`是正确的，它会应用正确的类，但在 Angular 准备好之前你仍然需要不显示任何内容。

在以前版本的 Angular 中，您可以这样做：

```
<body style="display:none" ng-show="true" ng-class="{{bodyClass}}"> 
```

然而，在最近的版本中，这不起作用，因为`ng-show`它的可见性是通过添加和删除`ng-hide`类来实现的（这比元素属性更具体）

我最近一直在做的是这样的：

```
<head>
...
    <style> <!-- Or you could include this in an existing style sheet -->
        .ng-cloak {
            display: none !important;
        }
    </style>    
</head>
<body class="ng-cloak" ng-cloak ng-class="{{bodyClass}}"> 
```

这样做意味着`<body>`将立即被`ng-cloak`类的样式隐藏。当 Angular 启动时，它会处理所有的指令 include`ng-class`和`ng-cloak`，所以你的`<body>`元素将拥有正确的类并且是可见的。

在这里阅读更多[ng-cloak 指令](http://docs.angularjs.org/api/ng/directive/ngCloak)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-23T02:46:58.400

纯 CSS 中的 flash 问题有一个解决方案，它是防弹的。为您的应用程序根元素的类添加以下内容。此解决方案按处理顺序工作：所有内容都隐藏在 CSS 中，加载 angular，然后 CSS 显示应用程序根目录。我喜欢使用它，因此如果页面上有其他非角度元素，它们将首先呈现，使页面看起来加载速度更快。

```
/* in your CSS file in head */
.myApp {
    display:none;
}

<div class="myApp" ng-app="myApp"></div> 
```

在正文结束之前添加您的脚本引用和一些内联 CSS：

```
<script language="javascript" type="text/javascript" src="angular.min.js"></script>
<style>
.myApp {
    display:block;
}
</style>
</body> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-30T09:07:48.027

而不是使用类，你应该使用**ng-class**

```
<body ng-class="{{ bodyClass }}"> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-26T15:41:00.163

我注意到有时甚至 ng-cloak 似乎也不起作用。也许我做错了什么。

```
<body ng-cloak class="{{ bodyClass }}"> 
```

我还做了一件类似于@mbokil 的小事，你可以默认隐藏元素。通过使用针对具有属性 ng-cloak 的任何元素的属性选择器，您可以使用角度指令。这有几个好处，但主要好处是一旦 angular 触发它会删除此属性，这将触发重绘。

```
<style>
  [ng-cloak] {
    display:none;
  }
</style> 
```

# python - Django form_valid 不起作用

> ID：16074679
> 
> 赞同：2
> 
> 时间：2013-04-18T04:47:24.967
> 
> 标签：python, django

我是 django 的新手。任何人都可以帮助我使用此代码。我正在尝试计算 2 DateField 之间的持续时间然后保存。

```
class EmployeeCreate(CreateView):
    model = Employee
    form_class = EmployeeCreateForm
    success_url = "/employee-list/"

    def form_valid(self, form):
        self.object.total_leave = (self.object.to_date - self.object.from_date).days +1
        self.object.save()
        return HttpResponseRedirect(self.get_success_url()) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T05:05:04.770

有几个问题

1.  你应该使用`form.instance`而不是`self.object`
2.  调用超级方法

因此，将您的代码更新为：

```
def form_valid(self, form):
    form.instance.total_leave = (self.instance.to_date - self.instance.from_date).days +1
    form.instance.save()
    return super(EmployeeCreate, self).form_valid(form) 
```

参考文档[使用基于类的视图处理表单](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-editing/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T07:06:47.657

因为`CreateView`首先您必须保存表单才能获取对象。

不要将对象持久化到数据库以进行进一步的定制（`commit=False`）。

然后更改对象以满足您的要求。最后将对象保存在数据库中并返回重定向响应。

```
def form_valid(self, form):
    self.object = form.save(commit=False)
    self.object.total_leave = (self.object.to_date - self.object.from_date).days + 1
    self.object.save()
    return HttpResponseRedirect(self.get_success_url()) 
```

另请查看以下基本`form_valid`实现`ModelFormMixin`：

```
def form_valid(self, form):
    self.object = form.save()
    return super(ModelFormMixin, self).form_valid(form) 
```

然后`super(ModelFormMixin, self).form_valid(form)`链接到`FormMixin`：

```
def form_valid(self, form):
    return HttpResponseRedirect(self.get_success_url()) 
```

因此，我们将这两个步骤结合在一种方法中。

# visual-studio-2012 - Visual Studio 类图创建者无法显示关联 C++

> ID：16074686
> 
> 赞同：0
> 
> 时间：2013-04-18T04:47:43.703
> 
> 标签：visual-studio-2012, uml

当我尝试在 Visual Studio 2012 Ultimate 中将成员变量显示为关联时，出现错误：

无法显示为关联，因为找不到“ServerNetwork*”：尝试以下操作之一：-确保“ServerNetwork*”是现有类型。- 如果在您的项目之外定义了“ServerNetwork*”，请确保您在解决方案资源管理器中放置了正确的引用。

我的代码编译并运行，因此我确定 ServerNetwork* 是一种类型，并且在解决方案资源管理器中被引用。

我认为这与 ServerNetwork.hpp 和 ServerNetwork.cpp 未正确包含在项目中有关，因为我也有 ClientNetwork.hpp 和 ClientNetwork.cpp，它们在类图中都显示得很好。

# ruby-on-rails - 验证嵌套属性

> ID：16074689
> 
> 赞同：-1
> 
> 时间：2013-04-18T04:47:48.593
> 
> 标签：ruby-on-rails

当我进入编辑页面时，我在 Rails 3.2.8 中使用嵌套表单，当您添加嵌套属性并将其设为空并提交表单时，嵌套属性未经过验证，并且不显示这些如何操作的消息以嵌套形式验证嵌套属性

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:32:17.610

让我们考虑您的代码如下：

用户模型：

```
class User < ActiveRecord::Base  
  has_one :company      
  attr_accessible :first_name, :last_name     
  validates :first_name, :presence => true   
  validates :last_name, :presence => true   
  accepts_nested_attributes_for :Company   
end 
```

用户模型有一家公司，假设我们要接受用户公司的嵌套属性。

公司型号：

```
class Company < ActiveRecord::Base
   belongs_to :User
   attr_accessible :company_name, :address
   validates :company_name, :presence => true
   validates :address, :presence => true
end 
```

公司模型具有公司名称和地址。您可以从用户视图中接受公司属性，并在用户保存时检查验证，即用户和公司。如果任何验证失败，您将在用户中获得它为此添加以下行到您的用户视图

```
<% if @user.errors.any? %>
        <div id="error_explanation">
          <div class="alert alert-error">
            The form contains <%= pluralize(@user.errors.count, "error") %>.
          </div>
          <ul>
            <% @user.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
            <% end %>
          </ul>
        </div> 
   <% end %> 
```

# javascript - 如何从浏览器中的文本中删除可见的 HTML 语法？

> ID：16074690
> 
> 赞同：1
> 
> 时间：2013-04-18T04:47:56.503
> 
> 标签：javascript, html, api, parsing, amazon

我们正在从 Amazon API 中提取编辑评论，其中包含一些不应显示的内联 HTML 语法。

我们怎样才能最简单地删除显示给查看者的额外 HTML 语法？可能使用一些javascript？

[如果您在Bulbtrip.com](http://bulbtrip.com)上单击灯泡上的“查看详细信息”后查看评论，您可以看到一个示例。

谢谢！亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:52:34.707

尝试使用这个

```
var actualString = "<span>Some Text</span> Some other Text <br/> sfahgukasfg <p > ";
removedHTMLTagsString = actualString .replace(/<[^>]+>/ig,"");
alert(removedHTMLTagsString ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:40:07.960

To remove the tags themselves you can use a non-greedy regex.

```
s = s.replace(/\<.*?\>/g, ' ') 
```

will replace all `<tags>` in a string with a single space.

# jquery - Dreamweaver 中的 jQuery 帮助

> ID：16074693
> 
> 赞同：-1
> 
> 时间：2013-04-18T04:48:16.757
> 
> 标签：jquery, dreamweaver

我是 HTML/jQuery 新手，我正在努力解决一个问题。我的目标是，当您单击一个框（#boxone）时，图像会出现在另一个框（#boximage）中。

我不确定我的代码是否有错误或 Dream Weaver 加载它的问题。非常感谢任何帮助！

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js">

$(document).ready(function() {
    $('#boxone').click(function(){
        $("#boximage").attr('src',"http://i.minus.com/iPbqANEnXrXtb.png");
    return false;
    });
});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:53:41.800

您需要将 jQuery 代码包装在自己的`<script>`标签中：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

<script type="text/javascript">
    $(document).ready(function() {
        $('#boxone').click(function(){
            $("#boximage").attr('src',"http://i.minus.com/iPbqANEnXrXtb.png");
            return false;
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:50:19.713

用于交换现有图像的 url 的代码，如果要更改 div 内的图像，则需要更改背景图像，或将图像附加到 div

```
$('#boximage').css("background-image", "url(http://i.minus.com/iPbqANEnXrXtb.png)");

$('#boximage').prepend('<img src="http://i.minus.com/iPbqANEnXrXtb.png" />') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:53:08.727

您错过了第一行中的结束脚本标签...并在第二个中添加了起始脚本标签..

它应该是

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {
  $('#boxone').click(function(){
    $("#boximage").attr('src',"http://i.minus.com/iPbqANEnXrXtb.png");
    return false;
  });
});
</script> 
```

# drop-down-menu - python gtk vte 有办法填充下拉菜单吗？

> ID：16074696
> 
> 赞同：0
> 
> 时间：2013-04-18T04:48:47.020
> 
> 标签：drop-down-menu, gtk3, vte

**编辑：看起来 im_append_menuitems 不是获取弹出菜单的功能。Vte 继承自 Gtk.Widget 因此获取菜单的方法可能是连接到鼠标右键单击并生成自定义菜单。我将对此进行调查，如果它有效，那将是答案。**

我将**gtk3**与**python**一起使用。

打开在 python gtk 中创建的 vte 窗口时，除了右键单击下拉菜单外，我可以执行终端所期望的所有正常操作。

在 C 文档中有**vte_terminal_im_append_menuitems ()**。

我还没有尝试过，因为它需要一个**GtkMenuShell**，而我只使用了 GtkMenu。所以我使用它可能会遇到问题。

该文档不是最适合边缘情况的文档，而且我使用的 python 并不总是正确绑定。我在 python 中尝试过的一些抽象 gtk 类也给我带来了麻烦。

我想知道是否有比 GtkMenuShell 更简单的方法。

如果不是 GtkMenuShell 的例子会有所帮助。

与此同时，我将尝试自己做。如果我很快想出代码，我会把它作为答案发布。

# java - 无法在数组类型上调用 getRecords(int)

> ID：16074697
> 
> 赞同：0
> 
> 时间：2013-04-18T04:48:52.087
> 
> 标签：java, android, arrays, int

无论我尝试什么，我似乎都无法克服这个错误 - 我已经尝试删除 int 值（我似乎应该这样做），但这只会导致更多的编译器错误。

有什么建议么？

```
 void processIntent(Intent intent) {
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(
                NfcAdapter.EXTRA_NDEF_MESSAGES);
    // only one message sent during the beam
    NdefMessage[] msg =  new NdefMessage[rawMsgs.length];
    for (int i = 0; i < msg.length; i++) {
        msg[i] = (NdefMessage) rawMsgs[i];
        // record 0 contains the MIME type, record 1 is the AAR, if present
        beamMsg.setText(new String(msg.getRecords(1).getPayload()));
        beamMsg2.setText(new String(msg.getRecords(1).getPayload()));
    }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:06:51.923

快速浏览一下位于[此处](http://developer.android.com/reference/android/nfc/NdefMessage.html#getRecords%28%29)的文档，您的语法似乎已关闭。

要引用特定的记录索引，代码应如下

```
msg.getRecords()[1].getPayload() 
```

虽然也可能存在逻辑错误，但您应该这样`msg[i]`调用

```
msg[i].getRecords()[1].getPayload() 
```

# php - 测试页面是否在 PHP 函数中的 iframe 中

> ID：16074700
> 
> 赞同：-1
> 
> 时间：2013-04-18T04:49:07.583
> 
> 标签：php, function, iframe

如何调用函数来测试用户是否在 PHP 函数中的 iframe 中？我知道测试它的唯一方法是在 Javascript 中，当我尝试使用 PHP 将它作为 JS 函数传递时，它似乎不起作用`echo '<script type="text/javascript"> ... </script>';`

我想将此添加到检查用户是否被授权的函数中，因为我需要根据他们是否在 iframe 中将他们引导到不同的登录页面。这个函数在一个单独的文件中（因为它几乎在网站上的每个页面上都被调用）所以我不认为我可以在直接的 JS 中做到这一点。

*我试图调用的 JS 函数*

```
 var isInIFrame = (window.location != window.parent.location)

 function test_iframe() {
 if (isInIFrame === "true") {
 window.location.href = "sign_in_iframe.html";
 }
 else {     
 window.location.href = "sign_in.html";
 } 
```

PHP 函数

```
function is_user_logged(){
    if ( session_id() == ''){
        session_start();
    }
    if(!isset($_SESSION['SESS_USER_ID']) ) {
    $logged = "false";
    header("location: sign_in.html");
    exit();
    } else {
    $logged = "true";
    return $logged;
    }           
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T04:51:31.907

`isInIFrame === "true"`是你的问题。`===`是一个严格的比较，所以`true !== "true"`，因为一个是布尔值而另一个是字符串。

我只是摆脱它或使用`if (isInIFrame)`：

```
function test_iframe() {
    if (window.location != window.parent.location) {
       window.location.href = "sign_in_iframe.html";
    } else {
       window.location.href = "sign_in.html";
    }
} 
```

另外，请查看这个问题以获得更可靠的框架检测方法：[如何识别网页是在 iframe 中加载还是直接加载到浏览器窗口中？](https://stackoverflow.com/questions/326069/how-to-identify-if-a-webpage-is-being-loaded-inside-an-iframe-or-directly-into-t)

# unix - 使用 inode 编号重命名文件 [UNIX]

> ID：16074707
> 
> 赞同：1
> 
> 时间：2013-04-18T04:49:46.557
> 
> 标签：unix, rename, linode

在将文件移动到目录之前，我只是试图通过附加下划线和所述文件的 inode 号来重命名文件。

描述是：

> 为避免回收站中的名称冲突，请将文件名更改为原始名称，后跟下划线，后跟文件的 inode。例如，如果删除了一个名为“f1”且索引节点为 1234 的文件，则该文件将在回收站中命名为 f1_1234。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:13:42.303

如果*并行*可用，这很容易：

```
ls f* | parallel 'mv {} newDir/{}_`stat -c%i {}`' 
```

# java - 在 JTextPane 中获取段落样式

> ID：16074709
> 
> 赞同：0
> 
> 时间：2013-04-18T04:49:53.090
> 
> 标签：java, swing, styles, jtextpane

我正在使用文本编辑器`JTextPane`，我需要为某些单词添加颜色，但我希望如果用户单击已经着色的区域，则使用该颜色（段落样式）而不是逻辑样式进行绘制。我一直在寻找，`getParagraphAttributes`但我无法将段落样式作为财产。

如何获得段落样式`JTextPane`？

```
private Style getColor(String token) { 
    if (token.equals("while")) 
        return editor.getStyle("blue"); 
    return editor.getLogicalStyle(); //At this point I want current not logical if it's Possible. 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:26:57.520

尝试使用

```
((StyledDocument)textPane.getDocument()).getParagraphElement(position).getAttributes(); 
```

# c - 用于检查是否正在检查函数的返回值的宏

> ID：16074713
> 
> 赞同：2
> 
> 时间：2013-04-18T04:50:00.053
> 
> 标签：c, function, macros, void-pointers, c-preprocessor

我有一个功能

```
void *custom_get_value(ObjectPtr) 
```

此函数传统上从不用于返回 NULL。它可以返回以下任何值

```
uint32_t
int32_t 
uint64_t 
int64_t
uint8_t 
```

由于该函数从未用于返回 NULL 我有很多代码

```
 *(uint32_t*)custom_get_value(ObjectPtr)

                    OR

      *(uint64_t*)custom_get_value(ObjectPtr) 
```

最近我们决定修改

```
void *custom_get_value(ObjectPtr) in such a way that it can return NULL.So all occourances of the above scenario (de-referencing to specific types without checking the return value) can result in segmentation fault. 
```

我可以使用一些宏来识别代码中返回值的所有位置吗

```
void *custom_get_value(ObjectPtr) 
```

没有被检查。如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-11T00:05:05.633

您不能轻易地编写一个宏来跟踪一个值在返回后会发生什么，因为数据流分析在某种程度上超出了预处理器的能力。但是，有一种有用的技术旨在帮助解决此类情况，即将您要检查的函数定义为自引用宏：

```
#define custom_get_value(...) (0, custom_get_value(__VA_ARGS__)) 
```

这个例子本身并没有做任何事情，但它展示了一些有用的东西：当宏名称作为其自己的替换列表的一部分出现时，名称的嵌套出现被“涂成蓝色”并且不会第二次扩展。因此，通过将现有函数名称定义为宏，除了保​​留原始调用。

然后你有几个选择，例如：

```
#define custom_get_value(...) ({ \
    _Pragma("message \"custom_get_value called\""); \
    custom_get_value(__VA_ARGS__); \
}) 
```

...如果您使用的是 GCC 或 Clang，则应`custom_get_value`在编译时列出每个调用点的文件和行号。（`#pragma message`语句表达式形式都是非标准的 GCC 扩展——但如果你只打算在清理旧调用时使用它，也许没关系？一旦检查了所有调用，你就可以删除非标准代码。）

或者改为应用运行时消息：

```
#define custom_get_value(...) \
    custom_wrap(custom_get_value(__VA_ARGS__), __FILE__, __LINE__)

void * custom_wrap(void * val, char * f, int l) {
    printf("custom_get_value called in %s on line %d\n", f, l); return val;
} 
```

...每次调用函数时都会让您发疯，但至少是标准的。

您甚至可以使用一个函数包装所有调用，该函数使结果指针再次保证为非空，尽管这可能不是处理这种情况的最佳方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-11T03:14:22.540

将新函数命名为`custom_get_value_ex`并删除旧函数。然后您的编译器会非常友好地指出旧函数的所有用途，以便您查看它们。

通常，当您更改已在使用的函数的语义时，最好检查对函数的所有调用。

也许您可以将其中一些调用包装在更易于维护的包装器中，例如

```
inline uint32_t custom_get_uint32(.....) 
{  
     void *value = custom_get_value(.....);
     if ( !value )
          return 0;   // or some other error handling
     return *(uint32_t *)value;
} 
```

然后，如果您`custom_get_value`再次更改，则只需使用此包装器即可。

甚至更整洁的是具有获取您感兴趣的项目的功能：

```
inline uint32_t get_propeller_setting(.....)
{
     void *value = custom_get_value(PROPELLER_SETTING,........)
     // ....
} 
```

然后，您可以对每个值何时返回空指针进行特定处理。

# video - FFMPEG+video+video.js 不显示视频

> ID：16074714
> 
> 赞同：1
> 
> 时间：2013-04-18T04:50:04.263
> 
> 标签：video, drupal-7, ffmpeg, video.js

我有一个视频内容类型，我想向用户展示视频。为此，我下载了视频模块和 video.js。我已经在 apache serv 中成功安装了 ffmpeg 转码器![在此处输入图像描述](https://i.stack.imgur.com/hSHMn.png)

现在我去管理员/配置/媒体/视频。使用播放器选项卡，我为 mp4 视频和 video.js 选择 HTML5 播放器来运行 HTML5 视频，如下所示：-

![在此处输入图像描述](https://i.stack.imgur.com/6WzFH.png)

现在我转到视频内容类型并添加视频字段，并将视频上传作为其类型并保存。视频已成功转换，但单击播放按钮后没有任何反应。

![在此处输入图像描述](https://i.stack.imgur.com/KxDlw.png)

在这方面需要你的帮助。

# php - PHP 对象范围

> ID：16074717
> 
> 赞同：2
> 
> 时间：2013-04-18T04:50:27.013
> 
> 标签：php, oop, scope

有人可以向我解释 PHP 中对象范围的概念吗？我对 PHP 中的对象非常陌生，我问的原因是因为我能够在 if 语句中创建一个对象，然后在 if 语句的范围之外访问该对象。

例子：

```
 //only create object if some condition is met
   if ($conditionTrue){
      $myBook = new Book('PHP for Dummies','softcopy'); 
    }

   $myBook.read(); 
```

我会认为这会产生一个错误，但它没有。

**我的问题的一些背景**

我试图弄清楚如何根据满足的条件确定要调用哪个构造函数。唯一可以想象的方法是引入一个`if statement`但这样做，我认为会强加`scope`它没有的问题，我只是想知道为什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:54:21.533

在 PHP 中，if 没有自己的作用域。所以是的，如果你在 if 语句或块内定义了一些东西，那么它就像你在外部定义它一样可用（当然，假设块内或 if 语句内的代码可以运行）。对于有关 PHP 范围的更多信息，请阅读[变量范围](http://php.net/manual/en/language.variables.scope.php)手册页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T04:59:25.790

这种情况会在其他语言中产生错误，例如**`JAVA,C#`**. 但在`PHP`这种情况下不会发生。

因为`PHP`我们可以在**任何地方创建变量**，而无需先初始化变量，然后再为其赋值。

在这种情况下，当您为其分配值时`$myBook`，首先会初始化`$myBook`全局范围的变量。因此，当您访问`$myBook`外部`if`块时，它已经存在于文档的全局范围内，因此您可以访问它而不会产生错误。

上面的场景有一些限制，比如变量的初始化位置，例如（**在函数内，在类内**）。

# java - 如何在java中使用不同的类函数

> ID：16074718
> 
> 赞同：-1
> 
> 时间：2013-04-18T04:50:33.680
> 
> 标签：java, class

嗨，我是 java 新手，我不确定如何在 java 中使用类函数。我的老师给了我们point2d课程，并希望我们在那里使用该功能。有一个函数调用 distanceTo

```
// return Euclidean distance between this point and that point
public double distanceTo(final Point2D that) {
    final double dx = this.x - that.x;
    final double dy = this.y - that.y;
    return Math.sqrt(dx*dx + dy*dy);
} 
```

我不确定我应该如何实现这一点。这是我的代码

```
public static int calc(int amount)
{
      for (int t = 0; t < amount; t++)
       {
          double current = 0;
          double x = StdRandom.random();
          double y = StdRandom.random();
          Point2D p = new Point2D(x, y);
          if ( current < distanceTo(Point2D p ) )
          {
          } 
```

我尝试使用`distanceTo(p)`，`distanceTo(Poin2D)`但没有任何效果。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:55:12.183

由于它是一个类函数，因此您还需要引用该类的实例。在这种情况下，类似

```
Point2D b;
p.distanceTo(b);  // Invoke distanceTo on b from the point of view of p 
```

这是因为您的方法需要引用 2 个对象。调用对象`p`和传递的对象`b`，在您的函数中分别称为`this`和`that`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:52:40.243

`public static int calc(int amount)`是`static`，`distanceTo`不是。

对于 not being `static`，`distanceTo`需要一个对象的封闭实例，例如：`new Point2D().distanceTo(...)`。

然后你可以打电话`distanceTo`给你一些`Point2D`你已经拥有的，说`p2`：

```
p2.distanceTo(p); 
```

或者您可以尝试`distanceTo`变成一个`static`方法，该方法将接收两个点作为参数：

```
public static double distanceTo(final Point2D one, final Point2D that) {
    final double dx = one.x - that.x;
    final double dy = one.y - that.y;
    return Math.sqrt(dx*dx + dy*dy);
} 
```

并使用以下方法调用它：

```
distanceTo(p, p2); 
```

^(PS .：作为替代方案，也许您的解决方案是变成`calc`非静态的。你应该试试，也许。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:55:30.017

要调用类的非静态方法，请使用`.`运算符。

要调用`distanceTo`，请使用以下语法：

```
p.distanceTo(p); 
```

如果它是静态的，则使用带`.`运算符的类名

```
Point2D.distanceTo(p); 
```

# ruby-on-rails - 在rails分页中设置jquery移动属性

> ID：16074719
> 
> 赞同：0
> 
> 时间：2013-04-18T04:50:43.750
> 
> 标签：ruby-on-rails, ruby, jquery-mobile, will-paginate

我的应用程序有一个移动页面，它使用 jquery 移动“可折叠”数据角色来隐藏 Microposts（Hartl 的教程），直到用户单击它们展开。

我还使用修改后的分页来呈现分页链接。 [https://gist.github.com/jugyo/3135120](https://gist.github.com/jugyo/3135120)

```
<div data-role="collapsible">
  <h3>Show Microposts (<%= @user.microposts.count %>)</h3>
  <ul data-role="listview">
    <%= render @microposts %>
  </ul>
  <%= will_paginate @microposts, 
    renderer: WillPaginate::ActionView::JqueryMobilePaginateLinkRenderer,
    previous_label: 'Prev',
    next_label: 'Next'
  %>
</div> 
```

我的问题是：如何向分页点击添加事件？我希望在第一次加载页面时使用 data-role="collapsible" 折叠列表（默认），但是当我单击下一步（或稍后，上一个）时，我希望可折叠容器添加 data-collapsed= “false”属性，以便列表打开。（单击下一步并再次进入折叠列表没有意义）

我是否将其放在具有分页代码的 rb 中？如果是这样，我如何引用页面元素？还是我在某处放了一些 jquery ......？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:12:53.673

您可以在分页中添加`class`或。`id`我将添加一个`id`：

```
<%= will_paginate @microposts, 
  renderer: WillPaginate::ActionView::JqueryMobilePaginateLinkRenderer,
  id: 'my_pagination',
  previous_label: 'Prev',
  next_label: 'Next'
%> 
```

然后给你的主 div 某种标识符：

```
<div data-role="collapsible" id="my_list"> 
```

现在您可以使用 jQuery 手动激活它：

```
$("#my_pagination").click(function() { 
    $("#my_list").data("collapsed", $("#my_list").data('collapsed') == 'false' ? 'true' : 'false') 
 }); 
```

# mysql - 在 mysql 中选择 Count 查询

> ID：16074729
> 
> 赞同：0
> 
> 时间：2013-04-18T04:51:40.623
> 
> 标签：mysql, sql, count

我在 MySQL 中有一张表，如下所示。

```
State marketId 
CA     Ind
CO     Ind
CA     Grp
CA     Grp 
```

我想选择数据作为计数和计数总数（应如下所示）。

```
State marketId Count totalCountInd  totalCountGrp
  CA     Ind    1        2               2
  CO     Ind    1
  CA     Grp    2 
```

目前我正在使用以下查询。那没有给出正确的输出。

```
select state, marketId, count(*) as 'count', (select count(1) from BatchReport where marketId='Ind') as 'total' from  BatchReport group by state,marketId  having marketId='Ind'  
union  
select state, marketId, count(*) as 'count1', (select count(1) from BatchReport where marketId='Grp') as 'total1' from BatchReport group by state,marketId  having marketId='Grp' 
```

请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:08:48.740

您想要实现的不是使用 SQL 检索数据的好（和理想）方法：

您正在尝试同时检索两个不同的记录。您应该检索具有不同查询的那些：

首先检索每个 state 和 marketId 的计数：

```
SELECT State, marketId, COUNT(marketId) AS Count
FROM BatchReport
GROUP BY State, marketID 
```

会给你

```
| STATE | MARKETID | COUNT(MARKETID) |
--------------------------------------
|    CA |      Grp |               2 |
|    CA |      Ind |               1 |
|    CO |      Ind |               1 | 
```

然后检索每个 marketId 的总数：

```
SELECT
SUM(CASE MarketID WHEN 'Ind' THEN 1 ELSE 0 END) AS totalCountInd 
,SUM(CASE MarketID WHEN 'Grp' THEN 1 ELSE 0 END) AS totalCountGrp
FROM BatchReport 
```

会给你

```
| TOTALCOUNTIND | TOTALCOUNTGRP |
---------------------------------
|             2 |             2 | 
```

或者，您还可以像这样在行中获取每个 MarketId 的总数：

```
SELECT
MarketId, COUNT(MarketID) AS Count
FROM BatchReport
GROUP BY MarketId; 
```

输出：

```
| MARKETID | COUNT |
--------------------
|      Grp |     2 |
|      Ind |     2 | 
```

### [看到这个 SQLFiddle](http://www.sqlfiddle.com/#!2/93c9fb/14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:59:00.183

试试这个

```
SELECT State, marketId, totalCount
    ,CASE WHEN rownum = 1 THEN (SELECT COUNT(marketId) FROM BatchReport WHERE marketId = 'Ind') END AS totalCountInd
    ,CASE WHEN rownum = 1 THEN (SELECT COUNT(marketId) FROM BatchReport WHERE marketId = 'Grp') END AS totalCountGrp 
FROM 
(
    SELECT @rownum:=@rownum+1 'rownum',B.* FROM
    (
      SELECT State, marketId, COUNT(marketId) AS totalCount
      FROM BatchReport
      GROUP BY State, marketID
    ) B, (SELECT @rownum:=0) r

) Result_BatchReport 
```

**编辑**

检查这个[SQLFiddle](http://www.sqlfiddle.com/#!2/93c9fb/47)

# django - django 内容类型和文件大小限制

> ID：16074730
> 
> 赞同：0
> 
> 时间：2013-04-18T04:51:52.187
> 
> 标签：django, python-2.7

--**模型.py** --

```
class resmodel(models.Model):
    fname = models.CharField(max_length=20)
    lname = models.CharField(max_length=20)
    file_header = models.CharField(max_length=20)
    upload_file = ContentTypeRestrictedFileField(
                    upload_to='documents', ]
                    content_types=['documents/msword', 'documents/pdf', 'documents/vnd.oasis.opendocument.text'],
                    max_upload_size=5242880,blank=True, null=True)
    imag = models.ImageField(upload_to='images') 
```

**--views.py** -- _

```
def resview(request):
    if request.method == "POST":
        fname = request.POST.get('fname')
        lname = request.POST.get('lname')
        file_header = request.POST.get('file_header')
        upload_resume = request.FILES['upload_resume']
        imag = request.FILES['im']

        if upload_file and imag:
            details = resmodel(file_header=file_header, fname=fname, lname=lname, upload_file=upload_file, imag=imag)
            details.save()

        return HttpResponseRedirect('/profile/save/success/')
    else:
        return render_to_response('file.html') 
```

--**文件.html** --

```
<form action="." method="post" enctype="multipart/form-data">{% csrf_token %}
<table border="0" align="center" cellsapcing="1" cellspadding="1">

    <tr>
        <td colspan="2"><h3> Personal Information</h3></td>

        <td>First Name</td>
        <td><input type="text" name="fname" /></td>
        <td>Last Name</td>
        <td><input type="text" name="lname" /></td>
        <td>Resume Header<sub>(250 words max)</sub></td>
        <td><input type="text" name="file_header"></td>
        <td>Upload Resume<sub>(.doc/.docx, rtf, pdf, txt)</sub></td>
        <td><input type="file" name="upload_resume" ></td>
        <td>Upload image</td>
        <td><input type="file" name="im" ></td>

        <td>
            <input type="submit" value="SUBMIT">&nbsp;&nbsp;
            <input type="reset" value="RESET">
        </td>
    </tr>
</table>
</form> 
```

对于“ContentTypeRestrictedFileField”，我[点击了这个链接](http://nemesisdesign.net/blog/coding/django-filefield-content-type-size-validation/)

但在这里我可以上传 imag 和 upload_file 字段中的所有文件和文件夹。如何限制这个？谁能帮我解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:36:54.040

您必须使用表单验证。

```
from django.forms import models as model_forms

def resview(request):
    if request.method == "POST":
        form_class = model_forms.modelform_factory(resmodel)
        form = form_class(request.POST)
        if form.is_valid():
            details = form.save()
        return HttpResponseRedirect('/profile/save/success/')
    else:
        return render_to_response('file.html') 
```

但请注意，这是基本的表单用法。

将来您应该将表单传递给模板上下文并用表单数据填充模板以显示表单输入、标签和验证错误。

更多文档在这里[从模型创建表单](https://docs.djangoproject.com/en/1.5/topics/forms/modelforms/) 和这里[使用表单](https://docs.djangoproject.com/en/1.5/topics/forms/)

# javascript - 动态应用 css 样式

> ID：16074731
> 
> 赞同：0
> 
> 时间：2013-04-18T04:51:53.873
> 
> 标签：javascript, css

你好，我从 xml 文件中提取样式属性名称（在本例中为颜色和字体），所以最后我有变量`style1=color`和`style2= font`；

但是当我编写以下代码时 - 它不起作用 - 程序说这`style1`是未定义的。我该如何改变呢？

```
var header=document.createElement("div");
    header.setAttribute("id", "header1");

   header.style.style1=headerstyles[i].nodeValue; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:01:50.537

由于`style1`是一个保存实际 css 属性名称（如颜色/字体）的变量，因此您不能使用`.`（点）运算符，您需要使用`[]`来指定属性。

```
header.style[style1]=headerstyles[i].nodeValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:58:00.947

因为风格本身就是一个对象。你想要的是：

header.style.setAttribute('color','red');

但 IE 不支持样式对象的 setAttribute。

所以使用完全支持的跨浏览器：

header.style.cssColor = '红色';

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T04:58:55.213

你需要使用

```
header.style.color
&
header.style.fontFamily, header.style.fontSize 
```

更改您提到的样式。

您还可以使用[CSS 文本](https://stackoverflow.com/questions/981619/setting-a-whole-style-string-to-an-element-from-javascript-not-individual-style)

```
header.style.cssText 
```

# jsf - 将 Spring Security 与 JSF 集成导致重定向循环

> ID：16074732
> 
> 赞同：0
> 
> 时间：2013-04-18T04:51:55.047
> 
> 标签：jsf, spring-security, redirect-loop

我有一个使用 JSF 创建的自定义登录页面。但是，一旦我运行应用程序，我就会收到错误消息“Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。”

这是我的`web.xml`：

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>
            /WEB-INF/applicationContext.xml
            /WEB-INF/applicationContext-security.xml
  </param-value>
</context-param>

<!-- Enable Spring Security -->
<filter>
 <filter-name>springSecurityFilterChain</filter-name>
 <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<!-- Allow login pages with JSF which redirects to security check,
 therefore we have to add the forward entry here -->
<filter-mapping>
  <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
 </filter-mapping> 
```

和我的`applicationContext-security.xml`

```
<http auto-config='true' use-expressions="true" access-denied-page="/index.xhtml">
    <intercept-url pattern="/jsf/admin_*" access="hasRole('ADMIN')"/>
    <intercept-url pattern="/jsf/pm_*" access="hasRole('PM')"/>
    <intercept-url pattern="/jsf/la_*" access="hasRole('ACCOUNT_APPROVER')"/>
    <intercept-url pattern="/jsf/bc_*" access="hasRole('BILLING_CONTACT')"/>
    <intercept-url pattern="/**" access="hasRole('USER') or hasRole('ADMIN') or hasRole('PM')"/> 
    <form-login login-processing-url="/j_spring_security_check" login-page="/login.xhtml" />
</http>

<authentication-manager>
    <authentication-provider user-service-ref='myUserDetailsService'>
        <password-encoder hash="sha"/>
    </authentication-provider>
</authentication-manager>    

<beans:bean id="myUserDetailsService" class="lk.mazarin.wcplus.security.WcUserDetailsServiceWrapper">
    <beans:property name="wcUserDAO" ref="wcUserDAO"/>       
</beans:bean> 

<beans:bean id="wcPasswordEncoder" class="org.springframework.security.authentication.encoding.ShaPasswordEncoder"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:02:34.727

请不要在登录 URL 上添加授权。请将以下内容添加到您的 applicationContext-security.xml：`<intercept-url pattern="/login*" filters="none" />`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:22:51.853

正如@Michael 所指出的，您需要从登录页面中删除安全限制。该`filters`属性已被弃用，在最新版本的 Spring Security 中还有另一种方法：

```
<http ...>
    ....
    <!-- This line goes BEFORE /** pattern -->
    <intercept-url pattern="/login.xhtml*" access="permitAll" />
    ....
    <intercept-url pattern="/**" access="hasRole('USER') or hasRole('ADMIN') or hasRole('PM')"/> 
    ...
</http> 
```

# objective-c - UI 控件可以同时是 Outlet 和 Action 吗？

> ID：16074742
> 
> 赞同：-1
> 
> 时间：2013-04-18T04:52:55.630
> 
> 标签：objective-c, interface-builder

我正在处理一项 cs193p 任务。他们要求在分配应用程序的 UI 中添加分段控件。

当用户在分段开关上选择不同的选项时，需要发生某些事情。这表明它需要是一个动作。

同时，当用户与应用程序中的另一个 UI 元素交互时，需要禁用分段开关。这表明开关也需要是一个插座，以便我们可以在控制器中引用它，因为即使用户没有直接与它交互，我们也需要修改它的状态。

我将开关添加为动作和插座。我的应用程序开始崩溃。所以我想知道是不是因为一个控件被添加为一个动作和出口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:52:55.630

我的应用程序崩溃的原因一定是一个完全不同的问题。这与我将开关添加为动作和插座这一事实无关。我撤消了我最近的一些更改并重新添加了开关，应用程序没有崩溃。开关作为一个动作和一个插座工作得很好。

TLDR：您可以添加一个控件并使其既是动作又是出口。完全合法。

# jquery - 如何协调 jQuery 和 CSS？

> ID：16074744
> 
> 赞同：0
> 
> 时间：2013-04-18T04:52:56.523
> 
> 标签：jquery, html, image, css

在[之前](https://stackoverflow.com/questions/15809999/css-border-image-critical)关于边框图像的帮助下，我正确地进行了自定义框架。
这是一个快照：
![使用 CSS 的边框图像](https://i.stack.imgur.com/TpmJA.png)

这是我的代码：

带有内联 CSS 的 HTML：

```
<div class="image-border" style="border-width: 10px; -moz-border-image: url(images/frame.png) 10 10 10 10 repeat;   -webkit-border-image: url(images/frame.png) 10 10 10 10 repeat; -o-border-image: url(images/frame.png) 10 10 10 10 repeat; border-image: url(images/frame.png) 10 10 10 10 repeat;">
     <img src="images/product-img.jpg" alt="Product Image With Specifications" width="277" height="auto"/>
</div> <!-- .image-border --> 
```

其他外部 CSS：

```
.image-border img{
    margin: 5% 5%;
    max-width: 340px;
    border: 1px solid #686868;
    }

.image-border{
    background: #999;
    padding: 20px;
    border: 10px solid #000;
    max-width: 370px;
    box-shadow:inset 0 0 10px #000;
    /* BORDER IMAGE FOR DYNAMIC USE */
    border-style: solid;    
    } 
```

现在我需要我的管理员用户动态地执行此操作。在艺术商店中，会有一些框架（管理员用户将上传它们），访问者用户只需单击一个框架，它就会相应地包装图像。

问题是：要做这样的事情我需要使用 jQuery。但是典型的 jQuery 使用`<img/>`标签并在一个到另一个之间切换。有一些*thumb-frame.jpg*和一些*frame.jpg*。当我单击拇指框时，JS 只需删除文件名的*“拇指”*部分并加载*frame.jpg*。切换适用`<img/>`于`<img/>`标记。但这`border-image`是一个 CSS 属性，而不是 HTML 的`<img/>`属性。

我试过**[这个](http://blog.chapagain.com.np/jquery-animate-and-transfer-effect-with-image/)**。

问题来了：

*   **如何协调 jQuery 与 CSS 属性？**

我想到的一件事是，为每种类型的框架加载一个单独的 CSS 类。但无法理解如何进行。

有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:39:57.780

您的问题有几种解决方案。这里只是其中的几个：

*   **jQuery 的`.css`功能：**
    正如@Ishank 指出的，您可以使用该`.css`功能直接更改元素的css。该函数有许多语法，可以在 http://api.jquery.com/css/ 阅读。对于您的特定问题，以下语法可能是最佳选择。
    例如

```
//Sets Properties. Replace "url(..." with an empty string "" to reset property
$('.image-border').css({
    '-webkit-border-image': "url(/properties/border-image-1.png) 30 30 round",
    '-moz-border-image': "url(/properties/border-image-1.png) 30 30 round",
    '-ms-border-image': "url(/properties/border-image-1.png) 30 30 round",
    '-o-border-image': "url(/properties/border-image-1.png) 30 30 round",
    'border-image': "url(/properties/border-image-1.png) 30 30 round"
}); 
```

*   **jQuery`.addClass`和`.removeClass`函数：**
    顾名思义，这两个函数允许您添加和删除类。所以解决问题的一种方法是（使用更具体的选择器）
    `$('.image-border').removeClass('image-border');`
*   **jQuery`.wrap`和`.unwrap`函数**
    这两个函数允许您在选定对象周围包裹一个新元素或删除选定对象的父级。我不会真的推荐这个选项，因为我个人避免重复从 dom 中添加/删除元素。但是您可以通过在取消选择的对象上使用 unwrap 来实现这一点，然后用 div 包装单击的 img。
    例如

```
$('.image-border img').unwrap();
$('#newimg').wrap("<div class='image-border' style='border-width: 10px; -moz-border-image: url(images/frame.png) 10 10 10 10 repeat;   -webkit-border-image: url(images/frame.png) 10 10 10 10 repeat; -o-border-image: url(images/frame.png) 10 10 10 10 repeat; border-image: url(images/frame.png) 10 10 10 10 repeat;'>"); 
```

这些只是解决您问题的众多方法中的几种。我会推荐`.addClass`/`.removeClass`解决方案，因为它是最干净的，因为所有样式都保持不变，并且您只处理类。让我知道这一切是否有意义，是否有帮助:)

# ruby-on-rails - 无法批量分配受保护的属性：rails 嵌套模型中的works_attributes、educations_attributes

> ID：16074747
> 
> 赞同：0
> 
> 时间：2013-04-18T04:53:04.070
> 
> 标签：ruby-on-rails, nested-forms

我正在尝试使用嵌套工作和教育模型保存名为申请人的模型。保存模型时，我得到：

> 无法批量分配受保护的属性：works_attributes、educations_attributes 错误。

对于 nil:NilClass 的未定义方法“klass”，我也收到错误消息。我正在使用 Rails 3.2。

我的型号代码：

```
applicant.rb

class Applicant < ActiveRecord::Base
  attr_accessible :first_name, :last_name, :location, :email, :mob_no, :alternative_no, :linkedin, :facebook, :twitter, :message, :resume, :job_id
  has_many :works, :dependent => :destroy
  has_many :educations, :dependent => :destroy
  accepts_nested_attributes_for :works, :reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true

  accepts_nested_attributes_for :educations, :reject_if => lambda { |a| a[:content].blank? }, :allow_destroy => true

end

work.rb

class Work < ActiveRecord::Base
  attr_accessible :applicant_id, :company_name, :description, :end_month, :end_year, :start_month, :start_year, :title
  belongs_to :applicant
end

education.rb

class Education < ActiveRecord::Base
  attr_accessible :applicant_id, :end_month, :end_year, :institution_name, :major, :start_month, :start_year, :title
  belongs_to :applicant
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:56:25.347

尝试包括这样的工作和教育属性..

```
class Applicant < ActiveRecord::Base
  attr_accessible :works_attributes, educations_attributes 
```

# c++ - 可可消息泵？

> ID：16074748
> 
> 赞同：2
> 
> 时间：2013-04-18T04:53:07.350
> 
> 标签：c++, macos, cocoa, objective-c++

我正在尝试实现一个 Cocoa 消息泵。我对 Cocoa API 没有太多经验，但我设法使用`NSApp nextEventMatchingMask`.

这种方法的问题是我没有得到所有的事件，而且我所做的似乎只适用于主窗口，而不是窗口上的任何小部件。

我的 UI 是在代码中生成的（没有 nib），我没有使用 Cocoa runLoop（因此需要消息泵）。我试图将所有 Objective-C++ 和 Cocoa 代码保持在最低限度。

需要循环所有传入的事件并将它们分派到适当的函数以根据对象和事件处理它们。

这是显示我的意思的伪代码（以及我所拥有的，主要是，除了它只执行“主窗口”事件）

```
event = GetNextEvent();
while (event)
{
    if(event->type == MOUSE_DOWN) 
    { mouse_down(event->target); }
    event = GetNextEvent();
} 
```

在 OS X 上有一些技巧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:19:26.177

对不起，但正如评论中已经提到的 -

尝试使用 Cocoa 模仿**Classic Mac OS 7**风格的运行循环并不是一个好主意，因为 AppKit 中的几乎所有内容（计时器、通知、事件、队列……）都依赖`NSRunLoop`于**每个线程**中存在的“正确”一个可可应用程序。

您可以在 CocoaDev或[NSRunLoop 文档上查看](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSRunLoop_Class/Reference/Reference.html)[此页面以](http://cocoadev.com/wiki/RunLoop)获取更深入的信息。

对于简约的 Cocoa 示例应用程序，请查看“ *Cocoa With Love* ”博客上的这篇精彩博文：
**[Minimalist Cocoa programming](http://www.cocoawithlove.com/2010/09/minimalist-cocoa-programming.html)**

# apache - 是否可以有条件地设置标题？

> ID：16074750
> 
> 赞同：18
> 
> 时间：2013-04-18T04:53:19.513
> 
> 标签：apache, .htaccess, cache-control, mod-headers

仅当来自 google（.com/.ru/.co.uk/.co.in/ 等）时，我才想`.htaccess`执行以下代码。`http_referer`这可能吗？

```
<filesMatch ".(jpg|jpeg|png|gif)$">
FileETag None
<ifModule mod_headers.c>
Header unset ETag
Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
Header set Pragma "no-cache"
Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
</ifModule>
</FilesMatch> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-18T05:42:58.890

好吧，我发现您可以使用 mod_rewrite 以不同的方式设置标头，从而更容易：

```
RewriteCond %{HTTP_USER_AGENT} !(googlebot|bingbot|Baiduspider) [NC]  
RewriteCond %{HTTP_REFERER} google [NC]  
RewriteRule ^.*$ - [ENV=LONGCACHE:true]
Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate" env=LONGCACHE
Header set Pragma "no-cache" env=LONGCACHE
Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT" env=LONGCACHE 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-01-05T13:02:33.457

请注意，您可以将条件放入 Header 命令本身，以[ap_expr](http://httpd.apache.org/docs/current/expr.html)格式（不需要 mod_rewrite）：

```
Header set Pragma "no-cache" "expr=%{HTTP_USER_AGENT}=~/(googlebot|bingbot|Baiduspider)/i && %{HTTP_REFERER}=~/google/i" 
```

（在您的特定情况下不是很有用，因为您需要添加 3 个标题）

# android - InputStream.Read(byte) 返回 ioexception : 操作取消

> ID：16074757
> 
> 赞同：0
> 
> 时间：2013-04-18T04:53:45.830
> 
> 标签：android, bluetooth, inputstream, ioexception

我开发了一个应用程序，它通过蓝牙将 android 设备与工具连接起来。我已经在它们之间建立了联系，但是我对 IOException 有一些问题。它说错误是操作取消。这是我的程序的一个简短部分。

```
protected void connect(BluetoothDevice device) {

    try {
        Log.d(TAG, "³¢ÊÔÁ¬½Ó");
        // Create a Socket connection: need the server's UUID number of
        // registered
        Method m = device.getClass().getMethod("createRfcommSocket",
                new Class[] { int.class });
        socket = (BluetoothSocket) m.invoke(device, 1);
        socket.connect();
        Log.d(TAG, ">>Client connectted");
        inputStream = socket.getInputStream();
        outputStream = socket.getOutputStream();
        final byte[] bytes = new byte[2048];            
        int read = -1;

        while (true) {
            synchronized (obj1) {
                Log.d("masuk while","masuk");

                 // I got the problem here ----!!!!!

                read = inputStream.read(bytes);

                 // -------------------END -----------

                Log.d(TAG, "read:" + read);
                if (read > 0) {
                    final int count = read;
                    String str = SamplesUtils.byteToHex(bytes, count);
                    // Log.d(TAG, "test1:" + str);

                    String hex = hexString.toString();

                    if (hex == "") {
                        hexString.append("<--");
                    } else {
                        if (hex.lastIndexOf("<--") < hex.lastIndexOf("-->")) {
                            hexString.append("\n<--");
                        }
                    }
                    hexString.append(str);
                    hex = hexString.toString();
                    Log.d(TAG, "test2:" + hex);
                    if (hex.length() > maxlength) {
                        try {
                            hex = hex.substring(hex.length() - maxlength,
                                    hex.length());
                            hex = hex.substring(hex.indexOf(" "));
                            hex = "<--" + hex;
                            hexString = new StringBuffer();
                            hexString.append(hex);
                        } catch (Exception e) {
                            e.printStackTrace();
                            Log.e(TAG, "e", e);
                        }
                    }
                    _handler.post(new Runnable() {
                        public void run() {
                            if (cbxHexView.isChecked()) {
                                sTextView.setText(hexString.toString());
                            } else {
                                                                    //if(!bufferStrToHex(hexString.toString(),false).contains("--")){

                                sTextView
                                        .setText(bufferStrToHex(
                                                hexString.toString(), false)
                                                .trim());
                                temp.put(idxTemp, bufferStrToHex(hexString.toString(),false));
                                idxTemp++;
                            }
                            Log.d(TAG, "ScrollY: " + mScrollView.getScrollY());   
                            int off = sTextView.getMeasuredHeight() - mScrollView.getHeight();   
                            if (off > 0) {   
                                mScrollView.scrollTo(0, off);   
                            }    
                        }
                    });
                }
            }

        }

    } catch (Exception e) {
        Log.e(TAG, ">>", e);
        Log.d("error catch:",e.toString());
        return;
    } finally {
        if (socket != null) {
            try {
                Log.d(TAG, ">>Client Socket Close");
                socket.close();
                socket = null;
                this.finish();
                return;
            } catch (IOException e) {
                Log.e(TAG, ">>", e);
            }
        }
    }

} 
```

实际上，我在使用 2.x 或 3.x 的 android 版本之前已经尝试过，它是有效的。但是，我尝试使用 4.0.4，出现问题。我对此感到困惑。谢谢您的帮助。

--UPDATE LOG CAT--- 这是我正在运行的程序的日志猫

```
04-18 13:07:08.562: E/MonitorActivity(7448): >>
04-18 13:07:08.562: E/MonitorActivity(7448): java.io.IOException: Operation Canceled
04-18 13:07:08.562: E/MonitorActivity(7448):    at android.bluetooth.BluetoothSocket.readNative(Native Method)
04-18 13:07:08.562: E/MonitorActivity(7448):    at android.bluetooth.BluetoothSocket.read(BluetoothSocket.java:333)
04-18 13:07:08.562: E/MonitorActivity(7448):    at  android.bluetooth.BluetoothInputStream.read(BluetoothInputStream.java:96)
04-18 13:07:08.562: E/MonitorActivity(7448):    at java.io.InputStream.read(InputStream.java:163)
04-18 13:07:08.562: E/MonitorActivity(7448):    at com.iteadstudio.MonitorActivity.connect(MonitorActivity.java:320)
04-18 13:07:08.562: E/MonitorActivity(7448):    at com.iteadstudio.MonitorActivity$3.run(MonitorActivity.java:135)
04-18 13:07:08.562: D/error catch:(7448): java.io.IOException: Operation Canceled
04-18 13:07:08.562: D/MonitorActivity(7448): >>Client Socket Close
04-18 13:07:08.572: A/libc(7448): @@@ ABORTING: INVALID HEAP ADDRESS IN dlfree
04-18 13:07:08.572: A/libc(7448): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1) 
```

当我点击错误时，它直接指向我上面提到的语句。在读取 = inputstream.read(bytes); 希望这将是明确的帮助。

# jsf-2 - Rich Faces Rich：Primefaces中的clientId？

> ID：16074761
> 
> 赞同：1
> 
> 时间：2013-04-18T04:53:54.767
> 
> 标签：jsf-2, primefaces, richfaces

有谁知道primefaces中是否有richfaces rich:clientId的等价物？

例如，如果我想获取我的字段的完整客户端 ID：用户名。

'#{rich:clientId('username'), 我如何在 primefaces 中做到这一点？这是因为我想动态获取该字段的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:17:44.603

你可以试试：

```
<h:form id="fm">
        <p:panel id="zzz">
            <p:outputPanel id="opa"/>
        </p:panel>
        #{p:component('zzz')}
        #{p:component('opa')}
    </h:form> 
```

我得到输出：

```
 fm:zzz 
    fm:opa 
```

# javascript - 从 OpenStreetMap 下载瓷砖的 Javascript 代码？

> ID：16074762
> 
> 赞同：0
> 
> 时间：2013-04-18T04:53:55.140
> 
> 标签：javascript, maps, offline, openstreetmap

我需要从 OpenStreetMap 下载一个小区域图块。我需要它在 Javascript 中。所以，我可以在需要时下载它们。我见过一些像 JTile Downloader 这样的磁贴下载器，它们是独立的应用程序。如何将它们下载到文件夹中，以便我可以使用任何地图 api（如传单、Openlayers 等）访问它们，

请给我一个解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:17:42.613

你想在浏览器中运行 javascript 吗？比使用 javascript 将文件下载到本地文件系统是不可能的（只是谷歌它）。

如果您可以使用 nodejs 之类的环境运行代码，则可以非常轻松地下载文件： [如何使用 Node.js 下载文件（不使用第三方库）？](https://stackoverflow.com/questions/11944932/how-to-download-a-file-with-node-js)

# c - 在 C 中创建二叉树时，Mac 上出现总线错误 10

> ID：16074768
> 
> 赞同：-1
> 
> 时间：2013-04-18T04:54:43.313
> 
> 标签：c, macos, pointers, data-structures, binary-tree

当我尝试使用 C 中的结构创建二叉树时出现总线错误。请建议我一个解决此总线错误的解决方案。我在 Mac OSX 上编译。

```
#include <stdio.h>
#include <stdlib.h>

struct node {
    int data;
    struct node* left;
    struct node* right;
};

struct node* NewNode(int data) { 
  struct node* inode ;
  inode->data = data; 
  inode->left = NULL; 
  inode->right = NULL;
  printf("%d\n", inode->data);
  return(inode); 
}

struct node* insert(struct node* node ,int data){ 
    if(node == NULL)
        return(NewNode(data)); 
    else{
        if(data <= node->data)
            node->left = insert(node->left, data);
        else
            node->right = insert(node->right, data);
        return(node);
    }

}

struct node* build123a() { 
  struct node* root = newNode(2); 

  struct node* lChild = newNode(1); 
  struct node* rChild = newNode(3);
  root->left = lChild; 
  root->right= rChild;

  return(root); 
}

int main(void) {

    build123a();    

} 
```

输出：总线错误 10

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:12:00.153

在您的`newNode`函数中，您正在定义结构指针`struct node* inode`但不分配它。然后访问它来存储数据，这是不正确的。

`inode`将具有随机值（作为地址），当访问该地址时，您可能会遇到总线错误。

您需要在函数中分配内存，例如

```
 struct node* NewNode(int data) { 
      struct node* inode ;
      inode = malloc(sizeof(*inode)); //allocate memory
      inode->data = data; 
      inode->left = NULL; 
      inode->right = NULL;
      printf("%d\n", inode->data);
      return(inode); 
  } 
```

# ios - 5 月 1 日新的 iTunes 提交规定

> ID：16074769
> 
> 赞同：0
> 
> 时间：2013-04-18T04:54:51.773
> 
> 标签：ios, retina-display, iphone-5

1）iPhone 5（4寸屏）

根据iOS人机界面指南第51页的解释，我们不应该使用额外的空间来显示额外的栏或横幅。但是，我们希望让额外的空间更具艺术性，以提高游戏的设计质量。事实上，我们打算用漂亮的设计图案来装饰空间。通过这样做，我们确信我们可以为我们的客户提供丰富的游戏体验。实施这件艺术品有什么问题吗？

2) 视网膜显示

我们认为我们应该让我们现有的图像资源（应用程序图标、AppStore 的应用程序图标、启动图像）适应 Retina 显示。

此外，我们可能需要为所有文件添加@2ⅹ 后缀，并将所有图像资源扩展到 200%。我们想了解有关满足 Retina Display 标准的要求的详细信息。我们应该怎么做？

有人知道从 5 月 1 日起生效的 MINIMUM 规定吗？这是我的第一个问题。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:33:08.783

# 1) 我认为为 iphone 5 添加艺术品不会有任何问题。但请确保它不会破坏 iPhone 4 的外观和感觉（3.5 英寸屏幕）

# 2）这是解释视网膜图像的苹果规范

iPhone -> 应用程序图标（必需） 非视网膜：57 x 57 像素 视网膜：114 x 114 像素 (@2x)

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW5](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW5)

[http://www.idev101.com/code/User_Interface/launchImages.html](http://www.idev101.com/code/User_Interface/launchImages.html)

您需要注意的另一点是确保删除 [uidevice currentdevice uniqueidentifier]（在 iOS 5 中已弃用）

谢谢，森希尔

# java - java - 设计模式 - 使用静态变量继承

> ID：16074770
> 
> 赞同：0
> 
> 时间：2013-04-18T04:54:59.963
> 
> 标签：java, oop, design-patterns

我有一个 Person 类，它扩展了我的 Record 类，我想将数据库表名、列和列类型定义为 Person 类中的静态变量。我想做类似以下的事情，但我做不到，因为我不能在不在方法中时修改对象（我认为？这里是 java noob）。

```
class Person extends Record{
    protected static final String dbTable = "people";
    protected static LinkedHashMap<String, String> dbColumns = new LinkedHashMap<String, String>();
    dbColumns.put("id","integer");
    dbColumns.put("name", "text");
} 
```

我可以执行以下操作，但它看起来很乱而且可读性不强，特别是如果我的表有几列

```
class Person extends Record{
    protected static final String dbTable = "people";
    protected static final String[] dbColumns= {"id","name"};
    protected static final String[] dbColumnTypes= {"integer","text"};

} 
```

我不想在构造函数中定义这些，因为我想要父类（记录）中的静态方法，我可以执行以下操作来获取人员记录列表

```
List<Person> people = Person.getAll(); 
```

我最初的想法是在我的 Record 类中创建以下抽象方法，并且它们在 Person 类中的实现将返回适当的静态变量。

```
public abstract String getTableName();
public abstract String[] getColumnNames();
public abstract String[] getColumnTypes(); 
```

但我不能这样做，因为我的静态方法 getAll() 不能引用非静态方法。我如何让我的静态方法 getAll() 知道这些静态变量存在于扩展类中并且可以使用它们？

我知道有一个正确的方法可以做到这一点，我只是想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:59:52.897

在 Java 中，您可以在类中执行静态初始化程序块。它们看起来像这样：

```
static
{
    dbColumns.put("id","integer");
    dbColumns.put("name", "text");
} 
```

静态初始化程序块在使用类之前运行一次 - 在程序启动和加载类之间的任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:03:10.273

你可以用抽象方法做你正在做的事情，然后你需要做的就是将你的静态 getAll() 更改为类似于 getAll(Record record) 并让它调用这些方法。

你在正确的轨道上。我会避免依赖于类本身之外的任何东西的静态事物，而是个人公开可能调用私有或受保护静态字段的实例方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T05:25:25.263

您可以考虑使用枚举。您还可以使用接口在各种基于 Db 的类之间提供抽象。

```
interface DbColumn{
  String getName();
  String getType();
}

enum PersonDbColumns implements DbColumn {
  ID("integer"),
  NAME("text");

  PersonDbColumns(String type) {
    this.type=type;
  }

  private String type;

  String getName() {
    return this.toString();
  }

  String getType() {
    return type;
  } 

} 
```

您可以向每列添加更多字段。如果您不填充枚举的所有元素，您将获得编译时错误的优势，前提是您使用构造函数进行初始化。您必须从字符串`valuOf()`中`Class.getEnumConstants()`获取枚举或从给定表中获取所有列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T05:19:41.187

最好的做法是让 Utility 类包含所有这些东西方法和变量作为静态变量。Utility 类通常没有构造。你也可以使用静态块

```
 static {
   initialize your static variables here
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T05:21:54.983

您的类 Record 包含`static final`变量。无需使用 getter 方法来获取 ststic 变量的值。据我了解，您计划在 getAll() 方法中调用数据库查询。你应该简单地使用访问静态变量`Classname.variable_name`

```
Record.dbTable;
Record.dbColumns;
Record.dbColumnTypes; 
```

# java - 二维字符数组扫雷游戏循环

> ID：16074776
> 
> 赞同：0
> 
> 时间：2013-04-18T04:55:35.610
> 
> 标签：java, text, char, multidimensional-array, minesweeper

我是一名 Comp Sci 学生，正在学习 Comp Sci。现在我们正在做一个年终项目，这是一个使用 java 的基于文本的扫雷游戏。对于第一部分，我们假设将 5x5 扫雷板表示为 2 D 字符数组，并手动添加炸弹位置，然后更新指示相邻炸弹的数字。然后我们创建将代表的板的第二个表示细胞是否已被揭示。

之后我们需要编写以下方法：

**print Board(char[][] board, Boolean[][] is Revealed)**：以文本形式将扫雷板打印到屏幕上。请记住，印制板应反映已显示哪些单元格。

**reveal Cell(int row, int col, Boolean[][] game board, char[][] answers board)**：在要显示单元格时适当修改状态数组，同时根据扫雷的规则。

然后我们必须编写一个包含这两种方法的主游戏循环，同时检查玩家是赢还是输。

我已经完成了印刷板和显示单元的方法，我只需要制作一个游戏板和游戏循环来测试它。

我们不能大声使用 java.lang 之外的类或模块（不要导入任何库）。

这是我的代码：
public static void main(String[] args) {

```
char[][]answerboard= {{'B', '1', '0', '1', 'B'},
                      {'1', '1', '1', '2', '1'},
                      {'0', '1', 'B', '2', '1'},
                      {'1', '1', '1', '2', 'B'},
                      {'B', '1', '0', '1', '1'}};
// Initialized answer board: This is the board that shows what is inside each cell. I need to create a second 2d array representation that shows which cells have been revealed.
int row , col ;
for (row = 0; row < answerboard.length; row++){
     for (col = 0; col < answerboard[1].length; col++)
     System.out.print(answerboard[row][col]);
     System.out.println();

    }

}
  public static void printBoard(char[][] board, boolean[][] isRevealed) 
    {
        for(int i=0; i < board.length; i++)
        {
                for(int j=0; j<=board[0].length; j++)
                {
                        if(isRevealed[i][j]=true)
                        System.out.print(board[i][j]+" ");//prints hidden char
                        else
                        if(isRevealed[i][j]= false)
                        System.out.print("- ");
                }
                System.out.println(" ");
        }
 }

    public static void revealCell(int row, int col, boolean[][] gameboard, char[][]answersboard) {
    System.out.println(row + " " + col);
    if(row < 0|| row >=answersboard.length ||col < 0|| col > answersboard[0].length){
        System.out.println("bad input");
        return;
    }

    if(answersboard[row][col] == 'B'){
        gameboard[row][col] = answersboard[row][col];
        return;
    }
    if(answersboard[row][col] == '1'||answersboard[row][col] == '2'){
        gameboard[row][col] = answersboard[row][col];
        return;
    }

    if(answersboard[row][col] == '0'){
        gameboard[row][col] = answersboard[row][col];
        for(int i = row-1; i <= row +1; i++){
            for(int j = col-1; j<= col +1;j++){
                revealCell(i,j, gameboard, answersboard);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:26:37.930

不太确定你的问题是什么......是的，看起来不像你问的问题。

只是一个建议，也许创建一个`MineSweeperBoard`类可能是个好主意，并让这些都是该类的公共非静态方法。老师们总是希望看到一年级学生掌握面向对象编程并能够从问题中解脱出来。

编辑。此外，您可能不应该`System.out.println(...)`在您的方法中包含应该在游戏板状态下工作的东西。这会产生副作用并打破每个方法想法的一项任务。而是让处理输入/输出的任何方法在调用此方法之前决定输入是否合适。理想情况下，`IllegalArgumentExceptions`如果有人确实向方法提供了错误数据，您会抛出这些方法，但您可能还没有涉及到这一点。

祝你项目和考试的其余部分好运！！

# titanium - 捆绑包在 TideSDK 中不起作用

> ID：16074778
> 
> 赞同：2
> 
> 时间：2013-04-18T04:55:49.143
> 
> 标签：titanium, tidesdk

我已经使用**TideSDK(1.3.1-beta) 和 TideSDK developer(1.4.2)** 为 Windows 平台开发了一个简单的桌面应用程序。我将我的应用程序打包为捆绑包。它在我的机器上运行良好。但它显示以下**错误消息**时我**在其他机器上执行它。**

在另一台机器上执行期间的错误消息

**此应用程序无法启动，因为应用程序配置不正确。重新安装应用程序可能会解决此问题**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-25T19:04:19.593

Same issue appeared just today. Try installing vc redist 2010 + vc redist 2012\. It helped in my case

# asp.net - 以编程方式设置 JWPlayer 播放数据库中的文件

> ID：16074782
> 
> 赞同：2
> 
> 时间：2013-04-18T04:56:04.010
> 
> 标签：asp.net, vb.net, jwplayer

我在页面加载时有一个查询字符串，用于获取 JWPlayer 的文件名和缩略图。但是，它没有获取文件名或缩略图名。从后面的 VB 代码中，我无法将其转移到我的 aspx 页面一定是有原因的。请参阅代码：

```
Code Behind (VB):
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    Dim videoName As String = Request.QueryString("FileName")
    Dim thumb As String = Request.QueryString("Thumb")
End Sub 
```

现在我需要将这些字符串变量放入 JWplayer 脚本的 .ASPX 页面中，但它们没有

```
.ASPX:
<div id='container'></div>
<script type="text/javascript" src="~/player/jwplayer.js</script>
<script type="text/javascript">
        jwplayer("container").setup({                
            file: videoName,
            flashplayer: '~/player/player.swf',
            volume: 35,
            width: 480,
            height: 270,
            skin: '~/player/skins/skin.zip',
            image: thumb,                
        })
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:04:37.700

这就是我解决的问题

```
Code Behind (VB):

Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
   Dim videoName As String = Request.QueryString("FileName")
   Dim thumb As String = Request.QueryString("Thumb")
   Dim dur As String = Request.QueryString("Duration").ToString()

    txt1.Text = "~contents/published/" & videoName.ToString()
    txt2.Text = "~/contents/thumbs/" & thumb.ToString()
    txt3.Text = dur.ToString()

End Sub 
```

现在要将查询字符串的值传递给 JWPlayer javascript，我必须在 JW 脚本中添加一个 javascript 函数，并将其命名为 codeAddress()。在 LongTail 网站或教程或我发现的 Internet 上的其他任何地方都找不到此类文档。

```
.ASPX:
<script type="text/javascript">
        function codeAddress() {
            var dootoo = document.getElementById('<%=txt1.ClientID%>').value;
            var doothree = document.getElementById('<%=txt2.ClientID%>').value;
            var doofour = document.getElementById('<%=txt3.ClientID%>').value;
            jwplayer("container").setup({
                duration: doofour,
                file: dootoo,
                flashplayer: '~/player/player.swf',
                skin: "~/player/skins/newtubedark.zip",
                volume: 35,
                width: 685,
                height: 385,
                image: doothree,

            })
        }
        window.onload = codeAddress;
    </script>
<asp:textbox id="txt1" runat="server" style="display:none;"></asp:textbox>
    <asp:textbox id="txt2" runat="server" style="display:none;"></asp:textbox>
    <asp:textbox id="txt3" runat="server" style="display:none;"></asp:textbox> 
```

# c# - 简单的 Windows 窗体数据绑定

> ID：16074783
> 
> 赞同：1
> 
> 时间：2013-04-18T04:56:12.507
> 
> 标签：c#, winforms, data-binding

假设我的表单中有一个字符串属性（并且表单没有实现 INotifyPropertyChanged）。我还创建了一个 BindingSource 并将其 DataSource 设置为表单。然后我将一个文本框绑定到表单上的 String 属性（间接地，使用 BindingSource）。

问题1：我在运行时更改文本框中的值时，为什么不在String属性的setter中打断点？我认为将控件绑定到 String 属性将允许这个方向的更新（GUI -> 成员数据）自动发生

问题 2：当 GUI 以外的东西更改 String 属性时，如何触发另一个方向（成员数据 -> GUI）的更新？我不想实现 INotifyPropertyChanged 接口并将 NotifyPropertyChanged 添加到设置器。我认为通过使用 BindingSource 的 ResetBindings 我至少可以手动触发它

```
public partial class Form1 : Form
{
    private String m_blah;
    public String Blah
    { 
        get
        {
            return m_blah;
        }
        set
        {
            m_blah = value;
        }
    }

    public Form1()
    {
        InitializeComponent();
        textBox1.DataBindings.Add(new Binding("Text", bindingSource1, "Blah",true,DataSourceUpdateMode.OnValidation));
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Blah = "Clicked!";
        this.bindingSource1.ResetBindings(false); //expecting the GUI to update and say "Clicked!"
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T05:02:16.260

```
this.bindingSource1.DataSource = this; 
```

我认为您忘记分配数据源。

# java - 递归打印斐波那契数列

> ID：16074784
> 
> 赞同：1
> 
> 时间：2013-04-18T04:56:12.810
> 
> 标签：java, recursion, fibonacci

我正在尝试使用递归打印斐波那契数列，但我的代码并未结束递归。你能告诉我我是否遗漏了什么吗？我认为第二次递归正在进入无限循环，我无法弄清楚它为什么会发生

```
class Main
{
  public static void main (String[] args) 
  {
      int k=7;
      int x=0,y=1;
      fib(x,y,k,0);
      return;

  }

  public static void fib(int x,int y,int k,int cnt)
  {
      int z;
      if(cnt>k)
      return;

      if(cnt<=k)
      {
          z=x+y;
          x=y;
          y=z;
          System.out.println("value is"+z);

          fib(x,y,k,cnt++);

      }

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:05:45.347

您似乎不了解斐波那契数的概念。请阅读[维基百科文章](http://en.wikipedia.org/wiki/Fibonacci_number)。以下是该函数的代码。

```
public static int fib(int n)
{
    if(n == 0 || n == 1)
        return n;

    return fib(n-1) + fib(n-2);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:04:33.260

问题是*后*增量：

```
 fib(x,y,k,cnt++); 
```

这会将原始值传递`cnt`给递归调用，*然后将其*递增。

如果您`cnt`在 的开头打印 的值`fib()`，您会看到它始终为零。

一个简单的解决方法是将调用更改为

```
 fib(x,y,k,cnt+1); 
```

此外，您的斐波那契数编号有点奇怪（我会说第七个数字是 8，而您的代码认为它是 34）。

最后，我可能值得注意的是，第二个`if`是不必要的。

# bash - Bash：如何从参数设置变量，并使用默认值

> ID：16074786
> 
> 赞同：37
> 
> 时间：2013-04-18T04:56:21.233
> 
> 标签：bash, shell, unix

很明显，使用 shell 脚本，这种事情可以通过多种方式（比大多数编程语言更多）来完成，因为所有不同的变量扩展方法和程序，如`test`and`[`和`[[`等。

现在我只是在寻找

```
DIR=$1 or . 
```

这意味着，我的 DIR 变量应该包含在第一个 arg 或当前目录中指定的内容。

这 和 有什么区别`DIR=${1-.}`？

我发现连字符语法令人困惑，并寻求更具可读性的语法。

为什么我不能这样做？

```
DIR="$1" || '.' 
```

我猜这意味着“如果 $1 为空，则分配仍然有效（DIR 变为空），因此无效命令'。' 永远不会被处决。”

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-04-18T05:11:36.847

我在这里看到几个问题。

1.  “我能写出真正反映这种逻辑的东西吗？”</p>

    是的。有几种方法可以做到这一点。这是一个：

    ```
    if [[ "$1" != "" ]]; then
        DIR="$1"
    else
        DIR=.
    fi 
    ```

2.  “这和 有什么区别`DIR=${1-.}`？”

    语法`${1-.}`扩展为`.`if `$1`is unset，但扩展为`$1`if `$1`is set — 即使`$1`设置为空字符串。

    语法`${1:-.}`扩展为`.`如果`$1`未设置或设置为空字符串。它`$1`仅在`$1`设置为空字符串以外的其他内容时才会扩展。

3.  “为什么我不能这样做？ `DIR="$1" || '.'`”</p>

    因为这是 bash，而不是 perl 或 ruby​​ 或其他一些语言。（原谅我的冷嘲热讽。）

    在 bash 中，`||`分隔整个命令（从技术上讲，它分隔管道）。它不分隔表达式。

    所以`DIR="$1" || '.'`意味着“执行`DIR="$1"`，如果以非零退出代码退出，则执行`'.'`”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T05:00:02.647

这个怎么样：

```
DIR=.
if [ $# -gt 0 ]; then
  DIR=$1
fi 
```

`$#`是给脚本的参数数量，`-gt`意思是“大于”，所以你基本上设置`DIR`为默认值，如果用户指定了一个参数，那么你设置`DIR`为那个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-19T16:57:14.270

我使用了一个简单的辅助函数来使这样的分配看起来更干净。下面的函数接受任意数量的参数，但返回第一个不是空字符串的参数。

```
default_value() {
    # Return the first non-empty argument
    while [[ "$1" == "" ]] && [[ "$#" -gt "0" ]]; do
        shift
    done
    echo $1
}
x=$(default_value "$1" 0) 
```

# ruby-on-rails - PaperTrail 和批处理版本控制

> ID：16074787
> 
> 赞同：1
> 
> 时间：2013-04-18T04:56:23.847
> 
> 标签：ruby-on-rails, paper-trail-gem

在我的 Rails 应用程序中，我有一系列可以在页面上重新排序的对象（每个对象保存其相对于页面上其他对象的位置）。我想对这些对象的排列方式进行一些版本控制，以便我可以实现撤消/重做按钮。

我认为[PaperTrail](https://github.com/airblade/paper_trail) gem 可能是保存这些对象如何排序的树结构的好选择，但问题是当用户重新排列对象时，某些对象的位置可能会改变，而其他对象的位置可能不会改变，而 PaperTrail 仅似乎在对象已更改时保存版本。我真正想要的是可以保存模型中所有对象状态快照的东西。有什么办法可以强制 PaperTrail 保存一个版本，这样我就可以调用类似的东西

```
@objects.each do |object|
    @object = object.versions.scoped.last
    @version = Version.find(@object)
    @version.reify.save!
end 
```

撤消更改？还是有更好的方法来实现这一点？

例如（我正在对二维数组进行排序）：

在进行更改之前：

```
name   | position | ancestry
Step 0 |    0     |   0
Step 1 |    1     |  371
Step 2 |    2     |  371 
```

进行更改后：

```
name   | position | ancestry
Step 0 |    0     |   0
Step 1 |    1     |  371
Step 2 |    2     |  371/374 
```

尝试撤消后：

```
name   | position | ancestry
Step 0 |    0     |   0
Step 1 |    2     |  371
Step 2 |    2     |  371 
```

请注意，对于第 1 步，位置应该是 1，但是由于对象在重新排列之前和之后没有改变，它恢复到最后保存的唯一版本，这是不正确的。

# android - android_stubs_current_intermediates 目录中的.java 文件是如何生成的？

> ID：16074794
> 
> 赞同：5
> 
> 时间：2013-04-18T04:57:03.640
> 
> 标签：android, android-source, android-build

Android 构建过程为 android.jar 中的每个类生成（？）Java 存根，并将它们存储在以下目录中：

`./out/target/common/obj/JAVA_LIBRARIES/android_stubs_current_intermediates/src/`

例如，`java/lang/`上述目录的子目录包含java.lang.*类对应的.java文件，而`android/app/'子目录包含android.app.*类对应的.java文件。这些 .java 文件不包含实际代码，而只是带有虚拟主体的签名。

我假设这些 .java 文件是使用工具从实际源代码生成的。我的问题是，这个工具是什么，它是否可以在 Android 构建过程之外使用？

我想使用该工具为非 Android Java 类生成存根。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T11:15:05.913

这里的“存根”是运行 javadoc 工具生成的框架 API 存根。

> 在大多数情况下，当我们谈到Android中的stub文件时，我们指的是aidl工具生成的java文件。例如，请参阅[如何在 android 中生成存根？- 堆栈溢出](https://stackoverflow.com/questions/1264530/how-to-generate-stub-in-android)

特别是，Android 构建系统包含一个名为 makefile `droiddoc.mk`，可用于生成文档、java API 存根和 API xml 文件，它实际上调用 javadoc。
`droiddoc.mk`下`build/core`。其中`build/core/config.mk`有一个名为的变量`BUILD_DROIDDOC`，以便更容易包含`droiddoc.mk`.

看一下`droiddoc.mk`，它调用了javadoc：

```
javadoc \
            \@$(PRIVATE_SRC_LIST_FILE) \
            -J-Xmx1280m \
            $(PRIVATE_PROFILING_OPTIONS) \
            -quiet \
            -doclet com.google.doclava.Doclava \
            -docletpath $(PRIVATE_DOCLETPATH) \
            -templatedir $(PRIVATE_CUSTOM_TEMPLATE_DIR) \
            $(PRIVATE_DROIDDOC_HTML_DIR) \
            $(addprefix -bootclasspath ,$(PRIVATE_BOOTCLASSPATH)) \
            $(addprefix -classpath ,$(PRIVATE_CLASSPATH)) \
            -sourcepath $(PRIVATE_SOURCE_PATH)$(addprefix :,$(PRIVATE_CLASSPATH)) \
            -d $(PRIVATE_OUT_DIR) \
            $(PRIVATE_CURRENT_BUILD) $(PRIVATE_CURRENT_TIME) \
            $(PRIVATE_DROIDDOC_OPTIONS) \
    && touch -f $@ 
```

存根什么都没有，对吧？不用担心，注意有一个`PRIVATE_DROIDDOC_OPTIONS`变量，并且

```
PRIVATE_DROIDDOC_OPTIONS := $(LOCAL_DROIDDOC_OPTIONS) 
```

AOSP 中的许多 Android.mk 文件，例如`framework/base/Android.mk`，都包含`include $(BUILD_DROIDDOC)`生成文档。中`framework/base/Android.mk`，有一段代码：

```
LOCAL_DROIDDOC_OPTIONS:=\
                $(framework_docs_LOCAL_DROIDDOC_OPTIONS) \
                -stubs $(TARGET_OUT_COMMON_INTERMEDIATES)/JAVA_LIBRARIES/android_stubs_current_intermediates/src \
                -api $(INTERNAL_PLATFORM_API_FILE) \
                -nodocs

LOCAL_DROIDDOC_CUSTOM_TEMPLATE_DIR:=build/tools/droiddoc/templates-sdk

LOCAL_UNINSTALLABLE_MODULE := true

include $(BUILD_DROIDDOC) 
```

`LOCAL_DROIDDOC_OPTIONS`包含一个`-stubs`选项。它最终会放入 droiddoc.mk 使用的 javadoc 命令中。

但是，我们可能会注意到 javadoc 不包含任何选项，例如`-stubs`. 关键是您可以使用 doclet 自定义 Javadoc 工具输出的内容和格式。Javadoc 工具有一个默认的“内置” doclet，称为标准 doclet，它生成 HTML 格式的 API 文档。您可以修改或子类化标准 doclet，或编写自己的 doclet 以生成 HTML、XML、MIF、RTF 或您想要的任何输出格式。

我们可以使用该`-doclet`选项来指定我们自定义的 doclet。droiddoc.mk 中的 javadoc 命令使用`-doclet com.google.doclava.Doclava`. 该 doclet 接收该`-stubs`选项。

查看下的 Doclava 实现`external/doclava/src/com/google/doclava/Doclava.java`

```
 else if (a[0].equals("-stubs")) {
    stubsDir = a[1];
  } else if (a[0].equals("-stubpackages")) {
    stubPackages = new HashSet<String>();
    for (String pkg : a[1].split(":")) {
      stubPackages.add(pkg);
    }
  } 
```

它接收 -stubs 选项。以下是它处理 stubsDir 的方式。

```
// Stubs
if (stubsDir != null || apiFile != null || proguardFile != null) {
  Stubs.writeStubsAndApi(stubsDir, apiFile, proguardFile, stubPackages);
} 
```

并跟踪 stub 文件的实现`Stubs.writeStubsAndApi`，你可以看到为什么存根文件中的内容是这样的。

您甚至可以编写自己的 java 文件并生成您的存根，就像`build/tools/droiddoc/test`.

# css - 调整图像大小，保持两种尺寸的比例

> ID：16074796
> 
> 赞同：0
> 
> 时间：2013-04-18T04:57:09.193
> 
> 标签：css, image, resize, alignment

我有一个关于最后阶段的照片博客，这是我正在努力解决的最后一个问题。布局在右侧有固定的菜单栏，内容在右侧流动。当照片从图库页面打开到它自己的页面时，它应该被调整大小，以便任一侧不超过（例如）70% 的可用空间。但不仅如此。它还应该位于右侧内容 div 的水平和垂直中心。在这一点上，一切正常，除了当图像是肖像时，它会越过屏幕。

这是否可以仅通过 CSS 来满足未激活 JS 的少数百分比？如果不是，那不是交易破坏者。

的HTML：

```
<div id="wrapper">
  <div id="left_column">
  </div>
  <div id="right_column_post">

      <div id="post_container">

        <img src="img.jpg" width="1000" height="750"/>

      </div>

  </div>

</div> 
```

CSS：

```
#left_column {
    position: fixed;
    top: 0;
    bottom: 0; 
    left: 0;
    z-index:100;
    width: 240px;
    height: 100%;
    overflow: hidden;

}

#right_column_post{
    height: 100%;
    width:auto;
    margin-left:240px;
    position: relative;
}

#post_container {
    width:100%;
    height:100%;
    display: block; 
    vertical-align: middle;
    text-align:center;
}

#post_container:before {
  content: '';
  display: inline-block;
  height: 100%;
  vertical-align: middle;
  margin-right: -0.25em; /* Adjusts for spacing */
}

#post_container img{
    max-width:70%;
    height:auto;
    display: inline-block;
    vertical-align: middle;
    margin:auto;
    position:relative;
} 
```

这很接近： http: [//jsfiddle.net/jcAGj/](http://jsfiddle.net/jcAGj/)但如果按原样实施，它会破坏布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:18:39.700

我让它工作了……有点。我做了一个精简的测试页，它可以工作：

[http://tomiphotography.com/wp-content/themes/Photomi/Test/post-2.html](http://tomiphotography.com/wp-content/themes/Photomi/Test/post-2.html)

但是，当我在主 WP 页面中使用相同的 css 时，图像比例变得混乱，图像没有居中？？？？：

[http://tomiphotography.com/?p=176](http://tomiphotography.com/?p=176)

:(

知道 WP 中可能会覆盖一些 CSS 吗？

HTML：

```
<body>

<div id="wrapper">
  <div id="left_column">
  </div>

  <div id="right_column_post">

      <div id="post_container">

            <img src="http://tomiphotography.com/wp-content/uploads/2013/04/Ruka-viimeinen.jpg"/>

    </div>

  </div>

</div>

</body> 
```

CSS：

```
 html {
    height: 100%;
    padding:0;
    margin:0;
}

body {
    background-color: #000000;
    height: 100%;
    padding: 0;
    margin: 0;

    background: url(img/bg.jpg);
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-position: bottom left;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}

#wrapper {
    float: left;
    height: 100%;
    width:100%;
    padding:0;
    margin:0;
}

#left_column {
    position: fixed;
    top: 0;
    bottom: 0; 
    left: 0;
    z-index:100;
    width: 240px; 
    height: 100%;
    overflow: hidden; 
    background-color:#ff0000;

}

#right_column_post{
    height: 100%;
    width:auto;
    margin-left:240px;
    position: relative;
}

#post_container  {
  position:fixed !important;
  position:absolute;
  margin:auto;
  text-align:center;
  top:8%;
  right:80px;
  bottom:10%;
  left:320px;
}
#post_container img {
    max-width:100%;
    max-height:100%;    
    padding:4px;
    background-color:#fff;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:18:03.107

我不确定您实际上在寻找什么，但是如果您想以纵横比调整图像大小，则不要同时提供最大宽度和最大高度，如果您这样做，那么它会在某个时候失去其纵横比。

你可以给宽度：100%；

在这里我以百分比给出宽度

```
 #left_column {
    position: fixed;
    top: 0;
    bottom: 0; 
    left: 0;
    z-index:100;
    width: 40%;
    height: 100%;
    overflow: hidden;
    background:red;

}

#right_column_post{
    height: 100%;
    width:50%;
    margin-left:45%;
    position: relative;
}

#post_container {
    width:90%;
    height:100%;
    display: block; 
    vertical-align: middle;
    text-align:center;
}

#post_container:before {
  content: '';
  display: inline-block;
  height: 100%;
  vertical-align: middle;
  margin-right: -0.25em; /* Adjusts for spacing */
} 
#post_container img{
    width:100%;
    max-width:100%;
    display: block;
    vertical-align: middle;
    margin:0 auto;
    position:relative;
} 
```

检查此链接：/*新链接*/

[http://jsfiddle.net/madhuri2987/jcAGj/2/](http://jsfiddle.net/madhuri2987/jcAGj/2/)

希望这就是你要找的。

# java - 如何在bluecove中重启蓝牙服务？

> ID：16074799
> 
> 赞同：3
> 
> 时间：2013-04-18T04:57:16.220
> 
> 标签：java, sockets, bluetooth, bluecove

我有桌面和安卓应用程序，它们通过蓝牙连接（在桌面端我使用 Bluecove 2.1.1 库）。桌面应用程序创建蓝牙服务，然后 android 应用程序连接到它。我想从桌面和 android 端添加注销功能。例如，在桌面应用程序用户单击断开连接时，桌面应用程序和安卓应用程序都会重置它们的连接，并且应该能够再次连接。这是桌面端的蓝牙服务代码：

```
public class BluetoothService
{
    private static final String serviceName = "btspp://localhost:"
            // + new UUID("0000110100001000800000805F9B34F7", false).toString()
            // + new UUID("0000110100001000800000805F9B34F8", false).toString()
            + new UUID("0000110100001000800000805F9B34F9", false).toString()
            + ";name=serviceName";
    private StreamConnectionNotifier m_service = null;
    private ListenerThread m_listenerThread;
    private DataOutputStream m_outStream;

    public BluetoothService()
    {
        Open();
    }

    public void Open()
    {
        try
        {
            assert (m_service == null);
            m_service = (StreamConnectionNotifier) Connector.open(serviceName);
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }

    public void Start()
    {
        try
        {
            StreamConnection connection = (StreamConnection) m_service
                    .acceptAndOpen();
            System.out.println("Connected");

            m_listenerThread = new ListenerThread(connection);
            Thread listener = new Thread(m_listenerThread);
            listener.start();
            m_outStream = new DataOutputStream(connection.openOutputStream());
        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void Send(String message)
    {
        assert (m_listenerThread != null);
        try
        {
            m_outStream.writeUTF(message);
            m_outStream.flush();
            System.out.println("Sent: " + message);
        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void Close()
    {
        try
        {
            m_service.close();
            m_listenerThread.Stop();
            m_listenerThread = null;
            m_outStream.close();
            m_outStream = null;
            m_service = null;
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }
}

class ListenerThread implements Runnable
{
    private DataInputStream m_inStream;
    private boolean m_isRunning;
    public ListenerThread(StreamConnection connection)
    {
        try
        {
            this.m_inStream = new DataInputStream(connection.openInputStream());
            m_isRunning = true;
        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        ;
    }

    public void run()
    {
        while (m_isRunning)
        {
            try
            {
                assert (m_inStream != null);
                if (m_inStream.available() > 0)
                {
                    String message = m_inStream.readUTF();
                    System.out.println("Received command: " + message);
                    CommandManager.getInstance().Parse(message);
                }
            }
            catch (IOException e)
            {
                System.err.println(e.toString());
            }
        }
    }

    public void Stop()
    {
        m_isRunning = false;
        try
        {
            m_inStream.close();
        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

为了重新启动服务，我这样做：

```
 BluetoothService::Close();
    BluetoothService::Open();
    BluetoothService::Start(); 
```

但似乎我无法重新连接。也许我应该创建不同名称的服务？

# css - CSS位置选择框被覆盖

> ID：16074800
> 
> 赞同：0
> 
> 时间：2013-04-18T04:57:23.393
> 
> 标签：css, position

我想在`Programs`菜单下有下拉选择框，但它已被覆盖，请参考附图：

![在此处输入图像描述](https://i.stack.imgur.com/ZBrH8.jpg)

**编辑：** 这是我的选择框代码

```
<div class="slide" style="width:738px;">
    <div class="n_title_black" style="padding-left:0;">PROGRAMS</div>
    <div class="inner-main_content3" style="height:420px;padding:10px 0;">

    <div style="text-align: right; margin: 0px; padding: 0px; position: absolute; top: 90px; left: -6px; z-index: 9;" id="selectGenre">
    Genre:
    <select onchange="this.form.submit()" id="filterGenre" name="filterGenre" style="width:220px">
        <option selected="selected" value="all">All</option>
        <option value="7">Info/Edutainment</option>
        <option value="8">News/Investigation</option><option value="12">Life Style</option>
    </select>

    // php code below to loop video's thumb

</div> 

</div>
</div> 
```

由于某种原因，我不能简单地将框添加到`Programs`菜单中，我希望这里有人可以解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:36:34.987

我猜你没有`position`为元素设置正确的属性试试这个：

```
<div class="slide" style="width:738px;">
    <div class="n_title_black" style="padding-left:0; position:relative;">PROGRAMS</div>
    <div class="inner-main_content3" style="height:420px;padding:10px 0;position:ralative;">

    <div style="text-align: right; margin: 0px; padding: 0px; position: absolute; top:   
          10px; left: 0px; z-index: 9;" id="selectGenre">
    Genre:
    <select onchange="this.form.submit()" id="filterGenre" name="filterGenre" style="width:220px">
        <option selected="selected" value="all">All</option>
        <option value="7">Info/Edutainment</option>
        <option value="8">News/Investigation</option><option value="12">Life Style</option>
    </select>

    // php code below to loop video's thumb

       </div> 

   </div>
</div> 
```

# python - Pyside 安装失败 (Python 2.7.4)

> ID：16074801
> 
> 赞同：2
> 
> 时间：2013-04-18T04:57:24.643
> 
> 标签：python, pip, pyside

我刚刚升级到 Ubuntu 13.04（测试版），尝试使用 pip 将 pyside 安装到 Virtualenv（python 2.7.4）时出现错误：

```
error: Failed to locate the Python library /usr/lib/libpython2.7.so.1 
```

有人有想法么？我已经尝试过以前的版本以及开发版本，但仍然没有运气。

**编辑：post_install 的控制台日志**

```
(monster)tony@tonyubuntu:~/Downloads/pyside-setup$ python pyside_postinstall.py -install
PySide package found in /home/tony/Downloads/pyside-setup/PySide...
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/QtUiTools.so to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/QtCore.so to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/QtTest.so to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/QtHelp.so to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/QtXml.so to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/QtSql.so to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/QtGui.so to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/shiboken to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/QtDeclarative.so to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/QtSvg.so to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/QtNetwork.so to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/QtScriptTools.so to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/QtScript.so to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/QtWebKit.so to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/phonon.so to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/QtXmlPatterns.so to /home/tony/Downloads/pyside-setup/PySide.
Patched rpath in /home/tony/Downloads/pyside-setup/PySide/QtOpenGL.so to /home/tony/Downloads/pyside-setup/PySide.
PySide package successfully installed in /home/tony/Downloads/pyside-setup/PySide... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T06:52:31.887

我是 pyside 设置脚本的作者。我将在 ubuntu 13.04 上测试构建脚本。您使用的是 32 位还是 64 位版本？

**更新 1**：修复了 Ubuntu 13.04 的 pyside 构建脚本。您需要从 git repo 克隆最新的 pyside-setup 并按如下方式构建（注意 --qmake 参数）：

```
$ git clone https://github.com/PySide/pyside-setup.git pyside-setup
$ cd pyside-setup
$ python setup.py bdist_egg --qmake=/usr/bin/qmake-qt4 
```

然后按如下方式安装 PySide 发行版：

```
$ sudo easy_install dist/PySide-1.1.3dev-py2.7.egg
$ sudo python pyside_postinstall.py -install 
```

我没有使用 pip，因为我更喜欢构建一次 egg 并根据需要安装多次问候 R。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T16:19:19.970

另一种方式：

```
sudo ln -s /usr/lib/x86_64-linux-gnu/libpython2.7.so.1 /usr/lib/ && pip install PySide 
```

# c++ - 在多个文件中使用时包含全局向量时出错

> ID：16074806
> 
> 赞同：1
> 
> 时间：2013-04-18T04:57:45.310
> 
> 标签：c++

```
// Main.cpp
#include <iostream>
#include "common.h"
#include "second.cpp"
#include <vector>

int main(){
  global = 10;
  ip.push_back("TestTest");
  std::cout << global << std::endl;
  TestClass t;
  t.print();
}

//common.h
#ifndef GLOBAL_H
#define GLOBAL_H
#include <vector> 
#include <string>
extern int global;
extern std::vector<std::string> ip ; 
#endif

// second.cpp

#include <iostream>
#include "common.h"

int global;

class TestClass{

  public:
    void print();};
void TestClass::print(){
  global++;
  std::cout << "Global: "<<global << std::endl;
  std::cout << "IP String: "<<ip[0] << std::endl;
}

// Console Error
ubuntu:deleteme$ g++ main.cpp
/tmp/ccoJpYRl.o: In function `TestClass::print()':
main.cpp:(.text+0x55): undefined reference to `ip'
/tmp/ccoJpYRl.o: In function `main':
main.cpp:(.text+0xdd): undefined reference to `ip'
collect2: error: ld returned 1 exit status 
```

当我只使用`int global`变量时，上述方法有效。但是，当我向其中添加一个向量`ip`时，`common.h`我得到了显示的错误。

这似乎是一件基本的事情，但无法得到答案。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:05:43.713

你没有定义`std::vector<std::string>`. 使用 extern，您只需声明它是全局的，但在另一个地方定义。您应该在您的`int global`in下添加定义`second.cpp`

```
// second.cpp

#include <iostream>
#include "common.h"

int global;
std::vector<std::string> ip;

class TestClass{ 
```

顺便说一句，您不应该使用全局变量。

# php - 将 iOS 图像上传到 PHP

> ID：16074811
> 
> 赞同：0
> 
> 时间：2013-04-18T04:58:20.777
> 
> 标签：php, ios

我目前正在尝试将图像从我的 iOS 应用程序上传到 php 后端。我在网上跟踪了样本；但是，我收到一个 PHP 错误代码 3 (UPLOAD_ERR_PARTIAL)。谁能帮我吗？我正在使用 [NSURLConnection sendAsynchronousRequest:queue:completionHandler]。

我读过一些人禁用了 Connection 标头，但这也不起作用。我应该检查服务器端的东西吗？

```
<?
$uploaddir = '';      //Uploading to same directory as PHP file
$file = basename($_FILES['userfile']['name']);
$uploadfile = $uploaddir . $file;

if ($_FILES['userfile']['error'] === UPLOAD_ERR_OK) {

} else {
    die("Upload failed with error code " . $_FILES['userfile']['error']);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:03:33.103

您可以使用 iOS 的 POST/GET 方法在 php 上上传/发送任何数据。

对于 post 方法

[HTTP Post 方法 php 和 ios](https://stackoverflow.com/questions/16057660/http-post-method-php-and-ios/16057759#16057759)

获取方法

[http://codewithchris.com/tutorial-how-to-use-ios-nsurlconnection-by-example/](http://codewithchris.com/tutorial-how-to-use-ios-nsurlconnection-by-example/)

对彼此而言

[如何发送 POST 和 GET 请求？](https://stackoverflow.com/questions/7673127/iphone-sdk-xcode-4-2-ios-5-how-do-i-send-a-json-to-url-post-and-get-resolv)

# android - Android开发，从字符串数组中检索值

> ID：16074812
> 
> 赞同：0
> 
> 时间：2013-04-18T04:58:28.000
> 
> 标签：android

我的 xml 中有这个数组

```
<string-array name = "locations">
    <item value = "KDLH">Duluth International Airport</item>
    <item value = "KBJI">Bemidji</item>
    <item value = "KAUM">Austin Municipal</item> 
    <item value = "KBDE">Baudette International Airport</item>
    <item value = "KBBB">Benson Municipal</item>  
    <item value = "KCBG">Cambridge Municipal</item>
    <item value = "KCQM">Cook Municipal Airport </item>
    <item value = "KCOQ">Cloquet</item> 
    <item value = "KTOB">Dodge Center Airport </item>
    <item value = "KEVM">Eveleth</item>
    <item value = "KLXL">Little Falls</item>
    <item value = "KMML">Marshall</item>
    <item value = "KANE">Minneapolis / Blaine </item> 
    <item value = "KLVN">Minneapolis, Airlake Airport</item>
    <item value = "KMSP">Minneapolis-St. Paul</item>
</string-array> 
```

我试图在选择项目而不是文本时检索值。我该怎么做呢？目前我只能通过这样做来检索文本。我目前只能检索选定的文本，而不是 value 属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T05:04:53.673

对此并没有很好的解决方案。这是我通常的做法。

```
<string-array name="locations">
    <item>Duluth International Airport</item>
    <item>Bemidji</item>
    <item>Austin Municipal</item>
    <item>Baudette International Airport</item>
    <item>Benson Municipal</item>
    <item>Cambridge Municipal</item>
    <item>Cook Municipal Airport </item>
    <item>Cloquet</item>
    <item>Dodge Center Airport </item>
    <item>Eveleth</item>
    <item>Little Falls</item>
    <item>Marshall</item>
    <item>Minneapolis / Blaine </item>
    <item>Minneapolis, Airlake Airport</item>
    <item>Minneapolis-St. Paul</item>
</string-array>

<string-array name="location_values">
    <item>KDLH</item>
    <item>KBJI</item>
    <item>KAUM</item>
    <item>KBDE</item>
    <item>KBBB</item>
    <item>KCBG</item>
    <item>KCQM</item>
    <item>KCOQ</item>
    <item>KTOB</item>
    <item>KEVM</item>
    <item>KLXL</item>
    <item>KMML</item>
    <item>KANE</item>
    <item>KLVN</item>
    <item>KMSP</item>
</string-array> 
```

然后你可以从`location-values`数组中提取值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:24:25.293

尽管我更喜欢 McCracken 的回答，但您可以使用一些特殊格式存储每一对，以便以后解析。

例子：

```
<string-array name = "locations">
    <item>KDLH:Duluth International Airport</item>
    <item>KBJI:Bemidji</item>
    ...
</string-array> 
```

接着：

```
String location = context.getResources().getStringArray(R.array.locations)[index];
String[] pieces = location.split(":");
String code = pieces[0]; // KDLH
String name = pieces[1]; // Duluth International Airport 
```

# delphi - 是否有用于获取英文时区名称的 Windows API 例程？

> ID：16074815
> 
> 赞同：3
> 
> 时间：2013-04-18T04:58:54.157
> 
> 标签：delphi, winapi, timezone, windows-xp-sp3

Windows`GetTimeZoneInformation`函数返回`StandardName`，`DaylightName`结果 TIME_ZONE_INFORMATION 结构的成员根据当前用户默认 UI 语言进行本地化。我以为我在某处看到了一种以英语获取名称的方法，而与用户 PC 运行的语言无关（但我找不到它......）。

有谁知道这是否可以做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-08T14:22:18.430

使用 SetThreadUILanguage。

我只能举一个 C++ 的例子。

```
LANGID en = MAKELANGID(LANG_ENGLISH, SUBLANG_ENGLISH_US);
SetThreadUILanguage(en);

TIME_ZONE_INFORMATION tzi;
GetTimeZoneInformation(&tzi);

MessageBoxW(NULL, tzi.StandardName, tzi.DaylightName, MB_OK); 
```

# neo4j - 使用密码删除neo4j 1.6中的关系

> ID：16074817
> 
> 赞同：1
> 
> 时间：2013-04-18T04:59:14.787
> 
> 标签：neo4j, cypher

我认为这是一个简单的问题，但我无法找到答案。我尝试了各种方法来使用密码删除 neo4j 1.6 中的关系，但出现错误。

```
start n = node(1) match n-[r:KNOWS]-m delete r; 
```

我想删除所有类型为 KNOWS 的关系，但出现错误 -

```
==> SyntaxException: expected return clause
==> "start n = node(1) match n-[r:KNOWS]-m delete r;  " 
```

即使我给

```
start n = node(1) match n-[r:KNOWS]-m delete r return count(r); 
```

它不起作用。

注意：在 neo4j 1.8 上没有看到上述问题，但我必须以某种方式在 neo4j 1.6 上运行查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:13:36.247

至少使用 1.6，您将无法通过 Cypher 执行此操作

变异密码从 1.8 开始可用。您可能必须使用 API 来删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T04:17:38.477

在花费一些时间为大量节点执行此操作的最佳方法之后，将数据文件夹从 neo4j 1.6 实例移动到 neo4j 1.8 实例并运行密码查询是最快的方法，并且优于在 neo4j-shell/调用上运行 javascript REST API。

# sql - 我可以在没有 group by 的情况下编写这个 group by 查询吗？

> ID：16074825
> 
> 赞同：0
> 
> 时间：2013-04-18T04:59:56.937
> 
> 标签：sql, sql-server, sql-server-2008

我写了查询来查找每个客户下了多少个订单？我想现在可以在不使用 Group by 子句的情况下编写相同的查询吗？使用某种子查询和连接。

```
SELECT c.CustomerID, count(si.CustomerID)
from Customer c LEFT OUTER join SalesInvoice si
ON si.CustomerID = c.CustomerID
GROUP by c.CustomerID 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T05:01:04.163

```
SELECT c.CustomerID, count(si.CustomerID) OVER(PARTITION BY c.CustomerID)
from Customer c LEFT OUTER join SalesInvoice si
ON si.CustomerID = c.CustomerID 
```

# java - 我可以将参数从属性文件传递给 Android Apk 吗？

> ID：16074829
> 
> 赞同：0
> 
> 时间：2013-04-18T05:00:23.220
> 
> 标签：java, android, android-intent

我需要在外部将字符串传递给 Android apk。目前我的应用程序正在开发中，所以我还没有在 Google Market 上部署它。有没有办法从属性文件等外部文件将参数传递给apk？如果是，请说明程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:09:27.327

如果您只需要它用于开发，只需在 SD 卡上放置一个文件。

```
final File tmpFile = new File("/sdcard/myparam.txt");
try {
    FileInputStream s = new FileInputStream(tmpFile);
    ... 
```

使用`adb push myparam.txt /sdcard/`和`adb pull /sdcard/myparam.txt`在桌面和设备之间传输它。

假设 SD 卡已安装以及使用硬编码文件名当然是不正确的，但它仅用于开发。

如果您需要从另一个应用程序传递参数，请存储在 Intent 中（假设您是两个应用程序的作者）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-16T23:33:18.533

实际上 android 使用 Intent 而不是 cmd args。例如，要将字符串从您的应用程序传递到另一个应用程序，您可以...

```
String str = "Test";
Intent intent = new Intent(this,externalApp);
intent.putExtra("str",str);
startActivity(intent); 
```

另一边的应用程序会...

```
Intent intent = getIntent();
String str = getStringExtra("str"); 
```

# git - 无法推送到 Bitbucket 上的 Git 存储库

> ID：16074832
> 
> 赞同：164
> 
> 时间：2013-04-18T05:00:38.240
> 
> 标签：git, bitbucket, git-bash

我创建了一个新的存储库，但遇到了一个奇怪的错误。我以前在 Bitbucket 上使用过 Git，但我刚刚重新格式化，现在我似乎无法让 Git 工作。完成提交后，我不得不将我的电子邮件和姓名添加到全局变量中，但随后它提交得很好。

当我尝试使用命令时

```
git push origin master 
```

它不起作用。我收到这条消息：

```
$ git push origin master
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

我在这里不知所措。我与之共享此存储库的朋友，可以很好地访问它并很好地推送它，但我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：246
> 
> 时间：2014-09-30T21:15:54.207

为那些刚开始在 Windows 上使用 Git 和 BitBucket 以及不熟悉 Bash 的人编写这篇文章（因为在搜索问题中的错误消息时，这既是一个常见问题，也是一个高排名的 Google 结果）。

对于那些不介意 HTTPS 并且正在寻找快速修复的人，请滚动到此答案的底部以获取**FOR THE LAZY下的说明**

对于那些希望解决实际问题的人，请按照以下说明进行操作：

**尽快修复 SSH 问题**

这是一组源自 VonC 链接的 URL 的指令。它被修改为尽可能有弹性和简洁。

*   不要键入`$`或任何不以开头的行`$`（这`$`意味着这是您在 GitBash 中键入的内容）。

*   打开 GitBash

如果您还没有设置您的全局信息：

```
$ git config --global user.name "Your Name"
$ git config --global user.email "you@example.com" 
```

检查 OpenSSH：

```
$ ssh -v localhost
OpenSSH_4.6p1, OpenSSL... 
```

看到类似的东西吗？

*   是：继续。
*   否：跳至**FOR THE LAZY**部分或关注 VonC 的链接文章。

查看您是否已经生成了密钥：

```
$ ls -a ~/.ssh/id_* 
```

如果有两个文件，则可以跳过下一步。

```
$ ssh-keygen 
```

将所有内容保留为默认值，输入密码。您现在应该使用以下命令看到结果：

```
$ ls -a ~/.ssh/id_* 
```

检查现有的配置文件：

```
$ ls -a ~/.ssh/config 
```

如果您得到结果，请检查此文件以获取错误信息。如果不存在文件，请执行以下操作：

```
$ echo "Host bitbucket.org" >> ~/.ssh/config
$ echo " IdentityFile ~/.ssh/id_rsa" >> ~/.ssh/config 
```

确认内容：

```
$ cat ~/.ssh/config

Host bitbucket.org
 IdentityFile ~/.ssh/id_rsa 
```

*   “IdentityFile”之前的单个空格是必需的。

每次运行 GitBash 时检查您是否正在启动 SSH 代理：

```
$ cat ~/.bashrc 
```

*   如果您看到一个名为 的函数`start_agent`，则此步骤已经完成。
*   如果没有文件，请继续。
*   如果有一个文件不包含这个函数，那么你就处于一个棘手的境地。附加到它可能是安全的（使用下面的说明），但它可能不是！如果不确定，请在按照以下说明操作之前备份 .bashrc 或跳至**FOR THE LAZY**部分。

在 GitBash 中输入以下内容以创建 .bashrc 文件：

```
$ echo "SSH_ENV=$HOME/.ssh/environment" >> ~/.bashrc
$ echo "" >> ~/.bashrc
$ echo "# start the ssh-agent" >> ~/.bashrc
$ echo "function start_agent {" >> ~/.bashrc
$ echo "    echo \"Initializing new SSH agent...\"" >> ~/.bashrc
$ echo "    # spawn ssh-agent" >> ~/.bashrc
$ echo "    /usr/bin/ssh-agent | sed 's/^echo/#echo/' > \"\${SSH_ENV}\"" >> ~/.bashrc
$ echo "    echo succeeded" >> ~/.bashrc
$ echo "    chmod 600 \"\${SSH_ENV}\"" >> ~/.bashrc
$ echo "    . \"\${SSH_ENV}\" > /dev/null" >> ~/.bashrc
$ echo "    /usr/bin/ssh-add" >> ~/.bashrc
$ echo "}" >> ~/.bashrc
$ echo "" >> ~/.bashrc
$ echo "if [ -f \"\${SSH_ENV}\" ]; then" >> ~/.bashrc
$ echo "     . \"\${SSH_ENV}\" > /dev/null" >> ~/.bashrc
$ echo "     ps -ef | grep \${SSH_AGENT_PID} | grep ssh-agent$ > /dev/null || {" >> ~/.bashrc
$ echo "        start_agent;" >> ~/.bashrc
$ echo "    }" >> ~/.bashrc
$ echo "else" >> ~/.bashrc
$ echo "    start_agent;" >> ~/.bashrc
$ echo "fi" >> ~/.bashrc 
```

验证文件是否已成功创建（您的文件应该只在“您的用户名”出现的地方有所不同）：

```
$ cat ~/.bashrc
SSH_ENV=/c/Users/yourusername/.ssh/environment

# start the ssh-agent
function start_agent {
    echo "Initializing new SSH agent..."
    # spawn ssh-agent
    /usr/bin/ssh-agent | sed 's/^echo/#echo/' > "${SSH_ENV}"
    echo succeeded
    chmod 600 "${SSH_ENV}"
    . "${SSH_ENV}" > /dev/null
    /usr/bin/ssh-add
}

if [ -f "${SSH_ENV}" ]; then
     . "${SSH_ENV}" > /dev/null
     ps -ef | grep ${SSH_AGENT_PID} | grep ssh-agent$ > /dev/null || {
        start_agent;
    }
else
    start_agent;
fi 
```

*   关闭 GitBash 并重新打开它。
*   您应该被要求输入密码（对于您之前生成的 SSH 文件）。
*   如果没有提示，您要么没有设置密码，要么 GitBash 没有运行 .bashrc 脚本（这很奇怪，所以请考虑查看它的内容！）。如果您在 Mac(OS X) 上运行它，`.bashrc`默认情况下不会执行 -`.bash_profile`是。要解决此问题，请将此代码段放入您的`.bash_profile`：`[[ -s ~/.bashrc ]] && source ~/.bashrc`

如果你没有输入密码，你会在启动 GitBash 时看到如下内容：

```
Initializing new SSH agent...
succeeded
Identity added: /c/Users/yourusername/.ssh/id_rsa (/c/Users/yourusername/.ssh/id_rsa) 
```

以下应返回结果：

```
$ ssh-add -l 
```

但是，如果您从以下位置获得以下信息`ssh-add -l`：

```
Could not open a connection to your authentication agent. 
```

它没有产生 SSH 代理，您的 .bashrc 可能是原因。

如果在启动 GitBash 时看到：

```
Initializing new SSH agent...
sh.exe": : No such file or directory 
```

这意味着您在回显到文件时忘记使用 \ 转义 $（即变量已扩展）。重新创建你的 .bashrc 来解决这个问题。

验证代理是否正在运行并且您的密钥已添加：

```
$ ssh-add -l 
```

应该返回与此类似的内容：

```
2048 0f:37:21:af:1b:31:d5:cd:65:58:b2:68:4a:ba:a2:46 /Users/yourusername/.ssh/id_rsa (RSA) 
```

运行以下命令以获取您的公钥：

```
$ cat ~/.ssh/id_rsa.pub 
```

（它应该返回以“ssh-rsa ......”开头的东西

*   单击 GitBash 窗口图标
*   单击编辑
*   单击标记
*   使用鼠标突出显示公钥（包括前导`ssh-rsa`位和尾随`== youremail@yourdomain.com`位）
*   右键单击窗口（执行复制）
*   将您的公钥粘贴到记事本中。
*   删除所有换行符，使其只有一行。
*   按`CTRL+A`然后`CTRL+C`将公钥再次复制到剪贴板。

通过执行以下步骤，使用 BitBucket 配置您的私钥：

*   打开浏览器并导航到[BitBucket.org](https://bitbucket.org)站点
*   登录[BitBucket.org](https://bitbucket.org/account/signin/)
*   点击你的头像（右上角）
*   点击管理账户
*   单击 SSH 密钥（在左侧菜单的安全性下）
*   单击添加密钥
*   输入`Global Public Key`标签
*   粘贴您从记事本复制的公钥

`Global Public Key`现在应该可以在您的键列表中看到一个条目。

*   返回到 GitBash
*   cd 进入包含您的项目的目录
*   **将您的来源更改为 SSH 变体（如果您运行FOR THE LAZY**步骤，则不会）

检查你的遥控器：

```
$ git remote -v 
```

切换到 SSH 网址：

```
$ git remote set-url origin git@bitbucket.org:youraccount/yourproject.git 
```

检查一切是否正常：

```
$ git remote show origin 
```

您应该看到如下内容：

```
Warning: Permanently added the RSA host key for IP address '...' to the list of known hosts.
* remote origin
  Fetch URL: git@bitbucket.org:youruser/yourproject.git
  Push  URL: git@bitbucket.org:youruser/yourproject.git
  HEAD branch: master
  Remote branch:
    master tracked
  Local ref configured for 'git push':
    master pushes to master (fast-forwardable) 
```

**完毕！**

您可以选择使用 HTTPS 而不是 SSH。它将要求您在远程操作期间输入密码（在您输入一次后它会暂时缓存）。以下是配置 HTTPS 的方法：

**懒人**

您应该按照 VonC 的描述修复 SSH 问题；但是，如果您急于提交并且没有*工具/时间/知识*来立即生成新的公钥，请将*您*的来源设置为 HTTPS 替代方案：

```
> https://accountname@bitbucket.org/accountname/reponame.git 
```

使用 GUI 工具，例如[TortoiseGit](https://code.google.com/p/tortoisegit/)或[命令行工具](http://git-scm.com/downloads)。

[这是此替代原始 URL 的文档。](https://confluence.atlassian.com/display/BITBUCKET/Use+the+SSH+protocol+with+Bitbucket)

如果不存在，则添加原点的命令行：

```
git remote add origin https://accountname@bitbucket.org/accountname/reponame.git 
```

更改现有来源的命令行：

```
git remote set-url origin https://accountname@bitbucket.org/accountname/reponame.git 
```

注意：您的帐户名不是您的电子邮件。

您可能还想设置您的全局信息：

```
git config --global user.name "Your Name"
git config --global user.email "you@example.com" 
```

然后再次尝试推送（无需再次提交）

```
git push origin master 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2015-01-19T21:46:23.890

如果您忘记将私钥添加到[`ssh-agent`](https://linux.die.net/man/1/ssh-agent). 这样做：

```
ssh-add ~/.ssh/id_rsa 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-04-18T05:58:59.750

[正如詹姆斯所](https://stackoverflow.com/users/8974088/james)[评论](https://stackoverflow.com/questions/16074832/cannot-push-to-git-repository-on-bitbucket/16075520#comment120435197_16075520)的，2021 年更新：

> 我必须将我的密钥添加到**工作区**，而不是基于“每个存储库”。
> 
> 由于这些键是只读的，并且工作区的键允许推送。
> 
> ```
> bitbucket.org/<my-workspace>/workspace/settings/ssh-keys 
> ```
> 
> 只需确保从子存储库中删除相同的密钥，否则您将无法将其添加到工作区。

* * *

原始答案（2013）：

重新格式化意味着您可能删除了您的公共和私人 ssh 密钥（在 ~/.ssh 中）。

您需要重新生成它们并在您的 BitBucket 配置文件上发布您的公共 ssh 密钥，如“[使用 Bitbucket 使用 SSH 协议](https://confluence.atlassian.com/display/BITBUCKET/Use+the+SSH+protocol+with+Bitbucket)”中所述，在“使用[GitBash 为 Git 设置 SSH](https://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Git) ”之后。

帐户-> 管理帐户-> SSH 密钥：

![http://solvedproblems.hydex11.net/_media/solved-problems/crazy-problems/bitbucket_manage_account.png](https://i.stack.imgur.com/safZ7.png)

然后：

![http://solvedproblems.hydex11.net/_media/solved-problems/crazy-problems/bitbucket_add_ssh.png](https://i.stack.imgur.com/0Y2RB.png)

^(图片来自“[将 Mercurial/BitBucket 与 JetBrains 软件集成](http://solvedproblems.hydex11.net/solved-problems/crazy-problems/integrating-mercurial-bitbucket-intellij)”)

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2016-11-18T05:01:34.983

我通过使用命令删除远程解决了这个问题：

```
git remote remove origin 
```

然后尝试使用 https url 而不是 ssh 添加远程

```
git remote add origin httpsUrl 
```

它要求提供 github 凭据。输入凭据，然后尝试使用以下命令推送到 git：

```
git push origin master 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-04-11T08:07:44.440

只需要 ~/.ssh 目录下的配置文件
ref ：[https://confluence.atlassian.com/bitbucket/set-up-ssh-for-git-728138079.html](https://confluence.atlassian.com/bitbucket/set-up-ssh-for-git-728138079.html)
在配置文件中添加波纹管配置

```
Host bitbucket.org
 IdentityFile ~/.ssh/<privatekeyfile> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-08-10T12:53:46.870

我有同样的问题。我的 SSH 密钥设置正确。我像这样解决了这个问题。

在 Bitbucket 中创建新项目后，使用克隆。在终端中输入克隆命令，它应该将空项目克隆到您的计算机。之后，您可以将文件复制到此目录并开始提交并推送到 bitbucket。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-01T14:05:11.263

两个小的澄清可能会拯救我所经历的困惑：

# 1 - HTTPS 和 SSH 的连接 URL 不同

通过 https 连接时，您使用

```
https://your_account_name@bitbucket.org/owner-account/repo-name.git 
```

但是，通过 SSH 连接时，帐户名称*始终*为“git”

```
ssh://git@bitbucket.org/owner-account/repo-name.git 
```

尝试在前面使用您的帐户名连接到 SSH 将导致原始发布者收到的错误。这就是您如何连接到 git@ 进行测试，然后错误地尝试使用您的用户名并看到错误。

# 2 - 通过团队帐户的 SSH 密钥将在 2017 年弃用

如果您在团队帐户上设置 SSH 密钥，他们建议将它们切换到个人帐户。避免 e 的有用提示

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-08-19T12:39:11.767

这可能不是每个人的情况，但我仍然在这里回答，以防有人有同样的原因。基本上我有两个 Bitbucket 帐户，每个帐户都有两个不同的公钥。通过运行，`ssh -Tv bitbucket.org`我设法看到我的笔记本电脑正在发送不正确的密钥（但由于两个公钥都在 bitbucket 中注册，密钥仍然被批准，然后因为密钥链接到另一个无权访问 repo 的帐户我是推，推被拒绝）。

所以我按照本指南进行操作，我的问题就消失了：[https ://blog.developer.atlassian.com/different-ssh-keys-multiple-bitbucket-accounts/](https://blog.developer.atlassian.com/different-ssh-keys-multiple-bitbucket-accounts/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-10-06T10:35:44.690

Git 更改了它的一些 repo 说明 - 检查您是否已将本地 repo 连接到 Git 云 - 检查每个步骤以查看是否错过了任何步骤。

Git 文档[https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh] 如果您更喜欢以下文档 - 它还很远更详细且值得一读，以了解为什么总结了以下步骤。

我的 Git 清单：-

1.  master 分支已更改为 main
2.  如果你已经初始化了你的 repo 并且想从头开始，取消跟踪 git 以`$rm -rf .git`递归方式删除 git
3.  检查您没有使用“Apple Git”。键入`which git`它应该说`/usr/local/bin/git`- 如果您使用 Homebrew 安装 git`$brew install git`
4.  为提交配置您的姓名和电子邮件地址（确保使用您在 Github 注册的电子邮件地址）：

```
$git config --global user.name "Your Name"
$git config --global user.email "you@example.com" 
```

*   配置 git 以跟踪文件名的大小写变化：

```
$git config --global core.ignorecase false 
```

如果您犯了错误，您可以更新文件`$ls -a`以找到文件，然后`$open .gitignore`对其进行编辑、保存并关闭。

5.  使用 SSH 密钥将本地链接到存储库。SSH 密钥是一种无需密码即可识别受信任计算机的方法。
    生成新密钥的步骤

*   `ssh-keygen -t rsa -C "your_email@example.com"`通过键入SAVE THE KEY生成新的 SSH 密钥
*   系统将提示您输入文件以保存密钥和密码。两个步骤都按回车键，两个选项都留空（默认名称，没有密码）。
*   将新密钥添加到 ssh-agent： `ssh-add ~/.ssh/id_rsa`
*   通过登录 Github，访问**Account settings**并单击**SSH keys** ，将您的 SSH 密钥添加到 GitHub 。单击**添加 SSH 密钥**

您也可以通过单击您的个人资料图像和左侧导航中的编辑键来找到它。

*   使用终端命令将密钥复制到剪贴板： `pbcopy < ~/.ssh/id_rsa.pub`

*   在**Title**字段中输入可以识别您机器的内容，例如*YOUR_NAME 的 MacBook Air*

*   在**Key**字段中，只需点击`cmd`+`V`即可粘贴您之前创建的密钥 -*不要在密钥中添加或删除字符或空格*

*   单击**添加密钥**并通过键入以下内容检查终端中的所有内容： `ssh -T git@github.com`

    您应该看到以下消息：

    ```
    Hi YOUR_NAME! You've successfully authenticated, but GitHub does not provide shell access. 
    ```

现在您的本地计算机已连接到云，您可以在线或在本地计算机上创建一个 repo。Git 已将分支 main 的名称更改为 master。链接存储库时，使用 HTTPS 密钥比使用 SSH 密钥更容易。虽然您最初需要 SSH 链接存储库以避免问题中的错误。

```
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

按照您现在在您的 repo 上获得的步骤进行操作 - GitHub 添加了一个额外的步骤来创建一个分支（编写时间为 2020 年 10 月）。

*   在命令行上创建一个新存储库 echo "# testing-with-jest" >> README.md git init git add README.md git commit -m "first commit" git branch -M main git remote add origin — **（使用HTTPS url 不是 SSH)** git push -u origin main

*   从命令行推送现有存储库 git remote add origin **（使用 HTTPS url 而不是 SSH）** git branch -M main git push -u origin main

如果你弄错了，你总是可以通过从本地机器的 git 文件夹中删除初始化`$rm -rf .git`并重新开始来重新开始 - 但首先检查没有遗漏上述步骤是有用的，并且始终是最好的事实来源是文档——即使阅读和理解需要更长的时间！

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-11-01T21:06:21.797

按照 Atlassian 教程完成 ssh，并确保将私钥粘贴到配置文件中，而不是存储库中：)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-03-04T14:54:00.360

如果您使用的是 SourceTree（我使用的是 2.4.1），我找到了一种更简单的方法来生成 SSH 密钥并将其添加到我的 Bitbucket 设置中。这为我解决了这个问题。

1.  在 SourceTree 中，转到首选项。
2.  转到“帐户”选项卡并选择您的帐户。
3.  应该有一个选项可以生成 SSH 密钥并将其复制到剪贴板。
4.  复制后，在浏览器中转到 Bitbucket。转到 [头像] -> Bitbucket 设置。
5.  转到 SSH 密钥。
6.  单击添加密钥
7.  粘贴您复制的密钥。

我收到了一封来自 Bitbucket 的确认电子邮件，说明 SSH 密钥已添加到我的帐户中。

作为参考，在 macOS 上，使用终端，您可以使用以下命令查看为您的设备生成的密钥。这是您生成的密钥的存储位置。

```
ls -la ~/.ssh 
```

正如其他人所说，这个文档帮助了我：[使用 Bitbucket Cloud 的 SSH 协议](https://confluence.atlassian.com/bitbucket/use-the-ssh-protocol-with-bitbucket-cloud-221449711.html)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-06-05T22:47:01.507

我正在使用 macOS，虽然我在下次尝试推送时在 bitbucket 中设置了我的公钥，但我得到了

> 存储库访问被拒绝。
> 
> 致命：无法从远程存储库中读取。
> 
> 请确保您具有正确的访问权限并且存储库存在。

我要做的是第 2 步。按照[Bitbucket SSH 密钥设置指南](https://confluence.atlassian.com/bitbucket/set-up-an-ssh-key-728138079.html)中的说明，尤其是第 3 步，**将密钥添加到 ssh-agent ：**

> （仅限 macOS）为了让您的计算机在每次重新启动时记住您的密码，请打开（或创建）~/.ssh/config 文件并将以下行添加到文件中：
> 
> 主机 *
> UseKeychain 是

希望它可以帮助遇到同样问题的 mac 用户。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-05-17T14:05:29.517

对于错误：

[错误] **存储库访问被拒绝。通过部署密钥进行的访问是只读的。致命：无法从远程存储库中读取。请确保您具有正确的访问权限并且存储库存在。**

[错误] **致命：无法从远程存储库中读取。**

[错误] **致命：找不到“https”的远程助手**

我按照以下步骤解决了：

首先安装这个依赖：

```
$ yum install expat expat-devel openssl openssl-devel 
```

然后删除 git：

```
$ yum remove git git-all 
```

现在在最后一个版本上构建并安装 Git，在这种情况下：

```
$ wget https://github.com/git/git/archive/v2.13.0.tar.gz
$ tar zxf v.2.13.0.tar.gz
$ cd git-2.13.0/ 
```

然后进行配置：

```
$ make configure
$ ./configure --with-expat --with-openssl 
```

最后像这样安装：

```
$ make 
$ make install install-doc install-html install-info 
```

就是这样，现在使用 https 配置您的仓库：

```
$ git remote add origin https://github.com/*user*/*repo*.git
# Verify new remote
$ git remote -v 
```

如果您在远程服务器中配置了 ssh 密钥，则必须将其删除。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-12-11T14:58:41.887

我发现 git 命令行并不喜欢我的选美生成密钥（Windows 10）。

查看我在[Serverfault上的回答](https://serverfault.com/a/887533/120710)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-03-18T00:51:40.420

我有这个问题，我以为我疯了。我已经使用 SSH 20 年了。自 2012 年以来通过 SSH 和 git ......但为什么我不能在我的家用计算机上获取我的 bitbucket 存储库？

好吧，我有两个 bitbucket 帐户，并且在我的代理中加载了 4 个 SSH 密钥。即使我的 .ssh/config 配置为使用正确的密钥。当 ssh 初始化连接时，它正在使用它们以便将它们加载到代理中。所以我正在登录我的个人 bitbucket 帐户。

然后在尝试获取 repo 时出现 Forbidden 错误。说得通。

我从代理中卸载了密钥

`ssh-add -d ~/.ssh/personal_rsa`

然后我可以获取回购。

...后来我发现我可以强制它只使用指定的身份

```
 Host bitbucket.org-user2
     HostName bitbucket.org
     User git
     IdentityFile ~/.ssh/user2
     IdentitiesOnly yes 
```

我不知道最后一个选项`IdentitiesOnly`

来自 bitbucket 文档本身

[https://blog.developer.atlassian.com/different-ssh-keys-multiple-bitbucket-accounts/](https://blog.developer.atlassian.com/different-ssh-keys-multiple-bitbucket-accounts/)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-05-11T09:29:13.120

当存储库不存在时，也会出现此错误。我尝试了所有答案，直到我看到回购名称缺少破折号

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-08-10T18:37:57.077

我在一个存储库中遇到了同样的错误——突然间，当我尝试推送提交时，所有其他存储库都可以正常工作。问题似乎出在 SSH 密钥上（正如您从之前的评论中已经知道的那样） - 在 bitbucket 上转到`View Profile`然后单击`Manage Account`。

在左侧单击，`SSH Keys`然后在 ~/.ssh/ 目录下添加您系统上的那个。

如果您还没有生成一个 - 请使用其中一篇文章中的说明，但请确保您使用默认的 id_dsa.pub 文件或自定义命名的文件，稍后`-i`在您使用密钥路径时需要该选项连接即

```
ssh -i ~/.ssh/customkeyname username@ip_address 
```

一旦您将本地密钥添加到您在 bitbucket 的帐户中，您就可以开始与您的存储库进行交互。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-06-13T16:18:08.870

这可能是由于 SSH 代理（和/或 BitBucket）中有多个 SSH 密钥造成的。查看[Atlassian 文档以了解解决方法](https://blog.developer.atlassian.com/different-ssh-keys-multiple-bitbucket-accounts)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2017-01-30T08:05:38.627

我发现最适合我的解决方案是将推送分成更小的块。

并从提交中删除大屏幕截图图像文件（10mb+）

安全性最终不是问题，更多的是关于 bin 文件的限制

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-12-09T19:20:27.487

我收到了这个错误

> 远程主机关闭与 bitbucket.org 的连接。致命：无法从远程存储库中读取。请确保您拥有正确的访问权限。

然后我尝试了

> git config --global user.email "you@example.com"

没有引号工作。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2019-08-19T08:53:02.033

试试看嘛

```
git remote add origin <HTTP URL> 
```

# ruby-on-rails - 如何从 Rails 中的远程服务器数据库中提取数据？

> ID：16074834
> 
> 赞同：4
> 
> 时间：2013-04-18T05:00:47.740
> 
> 标签：ruby-on-rails, ruby, dbi, remote-server

我正在使用 tiny_tds 连接到远程数据库，它仅用于 MySQL 和 Sql 服务器。他们是否有任何其他可用的 gem 可以访问任何供应商数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:15:36.100

您不了解数据库访问的工作原理。

我们使用驱动程序与数据库通信。数据库供应商有不同的用于连接的协议，因此驱动程序会处理它。

在该层之上，我们将有一个与驱动程序对话的 API。这就像 DBI，它知道如何与不同的司机交谈。我们仍然必须使用数据库的查询语言进行编写，但 DBI 给了我们一些优势。从一个数据库转换到另一个数据库很痛苦，因为通常所有查询都会更改，并且“标准”之间的不一致会出现。

在该层之上，我们会有 ActiveRecord 或 Sequel 之类的东西，它们是 ORM，并且大多与 DBM 无关。它们允许我们使用一致的语言来定义我们与数据库的连接、创建查询和处理交互。如果我们想与不同的数据库管理器交谈，我们安装驱动程序，更改连接字符串，其余的应该可以工作。

这是一个巨大的时间节省和“非常好的事情”。您可以将 SQLite 用于您的概念验证，并将 PostgreSQL、MySQL 或 Oracle 之类的东西用于您的生产系统，而无需更改查询。通常只有 DSN/连接字符串会改变。

通读 Sequel 的“[连接到数据库](http://sequel.rubyforge.org/rdoc/files/doc/opening_databases_rdoc.html)”文档以了解 ORM 可以做什么，以及“ [Sequel: The Database Toolkit for Ruby](http://sequel.rubyforge.org/rdoc/files/README_rdoc.html) ”和“ [Cheat Sheet](http://sequel.rubyforge.org/rdoc/files/doc/cheat_sheet_rdoc.html) ”以了解 Sequel 可以做什么。

# php - Magento 下拉组选择客户注册

> ID：16074835
> 
> 赞同：0
> 
> 时间：2013-04-18T05:00:49.130
> 
> 标签：php, xml, magento, magento-1.7

我正在尝试在 Magento 客户注册页面上进行组选择下拉菜单。我已经完成了以下所有操作：

将以下代码插入到 template/persistent/customer/form/register.phtml 中：

```
<label for="group_id" style='margin-top:15px;'><?php echo $this->__('Which group do you belong to? (select "Pet Owner" if you are uncertain)') ?><span class="required">*</span></label>
            <div style='clear:both'><p style='color:red;'>Note: DVM/DACVO and Institution accounts require administrative approval.</p></div>
            <div class="input-box" style='margin-bottom:10px;'>
                    <select style='border:1px solid gray;' name="group_id" id="group_id" title="<?php echo $this->__('Group') ?>" class="validate-group required-entry input-text" />
                        <?php $groups = Mage::helper('customer')->getGroups()->toOptionArray(); ?>
                        <?php foreach($groups as $group){ ?>
                            <?php if ($group['label']=="Pet Owner" || $group['label']=="DVM / DACVO" || $group['label']=="Institution"){?>
                                <option value="<?php print $group['value'] ?>"><?php print $group['label'] ?></option>
                            <?php } ?>
                        <?php } ?>
                    </select>
                    </div> 
```

然后在 createPostAction() 中的 /app/code/local/Mage/Customer/controllers/AccountController.php 中执行以下操作：

```
$customer->setGroupId($this->getRequest()->getPost(‘group_id’)); 
```

最后在添加组 ID 的 /app/code/local/Mage/Customer/etc/config.xml 中添加以下内容：

```
 <fieldsets>
            <customer_account>
                <prefix>
                    <create>1</create>
                    <update>1</update>
                    <name>1</name>
                </prefix>
                <firstname>
                    <create>1</create>
                    <update>1</update>
                    <name>1</name>
                </firstname>
                <middlename>
                    <create>1</create>
                    <update>1</update>
                    <name>1</name>
                </middlename>
                <lastname>
                    <create>1</create>
                    <update>1</update>
                    <name>1</name>
                </lastname>
                <suffix>
                    <create>1</create>
                    <update>1</update>
                    <name>1</name>
                </suffix>
                <email>
                    <create>1</create>
                    <update>1</update>
                </email>
                <password>
                    <create>1</create>
                </password>
                <confirmation>
                    <create>1</create>
                </confirmation>
                <dob>
                    <create>1</create>
                    <update>1</update>
                </dob>
                <group_id><create>1</create><update>1</update></group_id>
                <taxvat>
                    <create>1</create>
                    <update>1</update>
                </taxvat>
                <gender>
                    <create>1</create>
                    <update>1</update>
                </gender>
            </customer_account> 
```

我已经对其进行了多次测试，每个客户仍被添加为默认客户组。你能看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-17T04:59:19.160

```
<script type="text/javascript">
$(document).on('change','#country',function() {
var param = 'country='+$('#country').val();
$.ajax({
    showLoader: true,
    url: YOUR_URL_HERE,
    data: param,
    type: "GET",
    dataType: 'json'
}).done(function (data) {
    //data.value has the array of regions
}); 
```

});

将此脚本添加到您的 js 文件中。

```
public function getCountries()
{
    $country = $this->directoryBlock->getCountryHtmlSelect();
    return $country;
} 
```

在你的块中使用 \Magento\Customer\Model\ResourceModel\Group\Collection 和上面的代码。

```
<div class="field group_id required">
        <label for="group_id" class="label"><span><?php echo __('Group') ?></span></label>
        <div class="control">
            <select name="group_id">
                <?php foreach ($groups as $key => $data) { 
                    ?>
                <option value="<?php 
                echo $data['value']; ?>"><?php echo $data['label']; ?></option>
                <?php }?>
            </select>
        </div>
    </div> 
```

并在 phtml 文件中添加上述字段。我知道这是一个旧帖子，但提供解决方案以防万一有人需要它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-14T07:30:42.577

使用 /app/code/local/Mage/Customer/controllers/AccountController.php 创建您自己的模块。如果您的模块名称为 Custom 和命名空间 Mymodule，请在您的 congig.xml 中添加以下代码。

```
<global>
    <fieldsets>
        <customer_account>
            <group_id><create>1</create><update>1</update></group_id>
        </customer_account>
    </fieldsets>
</global>
<frontend>  
<routers>
 <customer>
    <args>
        <modules>
            <Mymodule_Custom before="Mage_Customer_AccountController">Mymodule_Custom</Mymodule_Custom>
        </modules>
    </args>
  </customer>
</routers> 
```

这将覆盖您的 AccountController。现在找到控制器的以下代码。

```
<?php 

require_once(Mage::getModuleDir('controllers','Mage_Customer').DS.'AccountController.php');
class Mymodule_Custom_AccountController extends Mage_Customer_AccountController
{
public function createPostAction()
{
$session = $this->_getSession();
    if ($session->isLoggedIn()) {
        $this->_redirect('*/*/');
        return;
    }
    $session->setEscapeMessages(true); // prevent XSS injection in user input
    if (!$this->getRequest()->isPost()) {
        $errUrl = $this->_getUrl('*/*/create', array('_secure' => true));
        $this->_redirectError($errUrl);
        return;
    }

    $customer = $this->_getCustomer();

    try {
        $errors = $this->_getCustomerErrors($customer);

        if (empty($errors)) {
            if($this->getRequest()->getPost('group_id')){ 
            $customer->setGroupId($this->getRequest()->getPost('group_id'));
            } else {
                $customer->getGroupId(); 
            }
            $customer->cleanPasswordsValidationData();
            $customer->save();
            $this->_dispatchRegisterSuccess($customer);
            $this->_successProcessRegistration($customer);
            return;
        } else {
            $this->_addSessionError($errors);
        }
    } catch (Mage_Core_Exception $e) {
        $session->setCustomerFormData($this->getRequest()->getPost());
        if ($e->getCode() === Mage_Customer_Model_Customer::EXCEPTION_EMAIL_EXISTS) {
            $url = $this->_getUrl('customer/account/forgotpassword');
            $message = $this->__('There is already an account with this email address. If you are sure that it is your email address, <a href="%s">click here</a> to get your password and access your account.', $url);
            $session->setEscapeMessages(false);
        } else {
            $message = $e->getMessage();
        }
        $session->addError($message);
    } catch (Exception $e) {
        $session->setCustomerFormData($this->getRequest()->getPost())
            ->addException($e, $this->__('Cannot save the customer.'));
    }
    $errUrl = $this->_getUrl('*/*/create', array('_secure' => true));
    $this->_redirectError($errUrl);

}

}

?> 
```

希望这对你有用。

# radio-button - ttk 单选按钮是否可以默认设置为 Toolbutton 样式？

> ID：16074837
> 
> 赞同：0
> 
> 时间：2013-04-18T05:01:22.807
> 
> 标签：radio-button, default, tk, ttk

我可以为单个单选按钮设置 Toolbutton 样式：

```
#!/bin/sh
# \
exec /usr/bin/wish "$0" "$@"
set X11 /usr/X11/include/X11/bitmaps
image create bitmap LeftImage -file "$X11/left_ptr"
image create bitmap RightImage -file "$X11/right_ptr"
ttk::radiobutton .left -variable Foo -image LeftImage -style Toolbutton
ttk::radiobutton .right -variable Foo -image RightImage
pack .left .right 
```

但我不知道如何让它们默认都具有 Toolbutton 样式，即，无需为每个单独指定它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:18:28.673

您可以设置“TRadiobutton”的样式，这是单选按钮的默认样式。

# sql - 无法将 NULL 值插入数据库

> ID：16074840
> 
> 赞同：2
> 
> 时间：2013-04-18T05:01:49.393
> 
> 标签：sql, postgresql, jpa-2.0, sql-insert, native-sql

我们使用 JPA 在 prostges 数据库中加载/持久化我们的实体。在一种情况下，我必须使用本机查询来持久化一个实体。下面是代码：

```
String sql = "INSERT INTO recording (id,creationdate,duration,endtime,filemaninfocomplete,lastupdated,packagesdeletetime,rcinfocomplete,"
                + "rcrecordingkept,recordstate,recordingtype,starttime,tenantid,recordingnode_id,transcription_id) "
                + "VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";
Query query = getEntityManager().createNativeQuery(sql);
query.setParameter(1, recording.getId());
query.setParameter(2, new Date(), TemporalType.TIMESTAMP);
query.setParameter(3, recording.getDuration());
query.setParameter(4, recording.getEndtime(), TemporalType.TIMESTAMP);
query.setParameter(5, recording.isFileManInfoComplete());
query.setParameter(6, new Date(), TemporalType.TIMESTAMP);
query.setParameter(7, recording.getPackagesDeleteTime(), TemporalType.TIMESTAMP);
query.setParameter(8, recording.isRcInfoComplete());
query.setParameter(9, recording.isRcRecordingKept());
query.setParameter(10,recording.getRecordState() != null ? recording.getRecordState().toString() : RecordState.DEFAULT);
query.setParameter(11,recording.getRecordingType()!= null ? recording.getRecordingType().toString() : null);
query.setParameter(12,recording.getStarttime(), TemporalType.TIMESTAMP);        
query.setParameter(13,recording.getTenantId());        
query.setParameter(14,recording.getRecordingNode() != null ? recording.getRecordingNode().getId() : null);        
query.setParameter(15, recording.getTranscription() != null ? recording.getTranscription().getId() : null);        
query.executeUpdate(); 
```

插入有效，除非“getPackagesDeleteTime”返回空值。在这种情况下，将显示以下消息：

```
Caused by: org.postgresql.util.PSQLException: FEHLER: Spalte »packagesdeletetime« hat Typ timestamp without time zone, aber der Ausdruck hat Typ character varying
  Hinweis: Sie müssen den Ausdruck umschreiben oder eine Typumwandlung vornehmen.
  Position: 252 
```

（IE：

```
ERROR: column "packagesdeletetime" has type timestamp without time zone, but the expression is of type character varying
Hint: You must rewrite the expression or typecast. 
```

)

生成的语句如下所示：

```
INSERT INTO recording(id,creationdate,duration,endtime,filemaninfocomplete,lastupdated,packagesdeletetime,rcinfocomplete,rcrecordingkept,recordstate,recordingtype,starttime,tenantid,recordingnode_id,transcription_id) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
bind => [0c850391-cae9-4ac2-9381-b252167fa239, 2013-04-18 08:38:00.704, 20240, 2013-04-18 08:37:24.131, false, 2013-04-18 08:38:00.704, null, false, true, DEFAULT, VOICE, 2013-04-18 08:37:03.891, f56251a7-44df-4151-aa0d-7c3fc538f621, null, null] 
```

一些提示我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:21:34.027

实体中的相应字段必须使用以下注释：

@Column(可为空=真)

还要检查表中的相应列是否允许 NULL（没有 NOT NULL 约束）。如果这没有帮助，请发布您的实体的代码。

# get - WebAPI 无法正确转换为模型绑定对象

> ID：16074842
> 
> 赞同：1
> 
> 时间：2013-04-18T05:01:53.467
> 
> 标签：get, asp.net-web-api

我正在使用带有 MVC4 的 WebAPI，执行如下所示的 http 获取：

```
api_version=2&products=[{"id":97497,"name":"iPad"}]&pageno=1 
```

映射到此调用的 get 操作控制器的签名是：

```
[HttpGet]
public string Get([FromUri] ProductRequest request){ ... } 
```

问题是传递到上述 Get 操作方法的 ProductRequest 对象包含产品的空值，而所有其他值都正常。

所以它似乎很难将 products=[{"id":97497,"name":"iPad"}] 转换为正确的对象类型，其定义为：

`public IEnumerable<Products> products { get; set;}`在 ProductRequest 模型和 Products 类中看起来像：

```
public int id { get; set; }
public string name { get; set; } 
```

作为附加信息，当使用带有 POST 而不是 GET 的相同调用时，它工作正常，对象被正确转换。

那么，我做错了什么，如何让http GET正确地将查询参数转换为传入的模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:04:36.433

你可以通过 url 来做，但你不使用 JSON。您的 URL 应如下所示：

```
api_version=2&products[0].id=97497&products[0].name=iPad&pageno=1 
```

如果您想在同一个请求中添加更多产品，您可以增加数组索引：

```
{urlasabove}&products[1].id=4234&products[1].name=iPadmini 
```

这对您的要求很好，但很快就会失控。对于 GET 请求中的复杂对象，您可以考虑改用 POST。或者，您可以在 GET 正文中包含参数，但这不一定是最好的主意。请参阅有关[此 SO 问题](https://stackoverflow.com/questions/978061/http-get-with-request-body)的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T00:00:19.360

我认为您在 HTTP POST 和 HTTP GET 之间感到困惑，这就是您将产品设为 null 的原因。你可以看看[GET 和 POST 有什么区别](https://stackoverflow.com/a/3477374/861114)

基本上，我认为您可以使用**TempData**，但它有利有弊，并且取决于您如何使用它的上下文。

# sql - 如何根据同一列的两个相等条件检索记录？

> ID：16074843
> 
> 赞同：0
> 
> 时间：2013-04-18T05:01:54.637
> 
> 标签：sql, oracle, hibernate, oracle10g, hql

我有一个表，其中包含 ID（主键，编号）、名称（varchar）、值（编号）和键（编号）。我想检索所有键 = 1 和键 = 2 的记录。我可以使用不等于条件（！=）编写查询，但这会使查询很长。这就是我尝试过的

```
SELECT * FROM USER_DETAILS WHERE NAME='sam' AND
KEY != 3 AND KEY != 4 AND KEY != 5 AND KEY != 6 AND KEY != 7 AND KEY != 8 AND 
```

等等。你能建议我一个 Oracle 查询，我可以检索 key=1 和 key=2 的记录，而不是检查不等于条件。

更新：正如答案中所建议的，我想知道 Hibernate 是否支持 IN

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:03:13.817

```
SELECT * FROM USER_DETAILS
WHERE
KEY=1 OR KEY=2 
```

或者

```
SELECT * FROM USER_DETAILS
WHERE
KEY IN (1,2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T06:49:55.353

在 Hibernate 中支持 IN OPERATOR。您应该编写以解决您的问题的查询是：

`SELECT * FROM USER_DETAILS WHERE NAME='sam' AND KEY IN (1,2)`

# android - AIDL 中的阻塞/同步函数调用

> ID：16074846
> 
> 赞同：0
> 
> 时间：2013-04-18T05:02:39.530
> 
> 标签：android

我正在开发一个 android 服务，该服务为应用程序提供了 AIDL 接口，现在应用程序使用 AIDL 接口调用函数 GetData()，该函数在 Service 中实现，它执行一些网络操作，连接到服务器并获取一些数据，这个网络事务发生在后台线程中，问题是我希望函数 GetData() 在网络操作完成之前不返回，结果来自服务器，我想将其返回到 GetData()，GetData 函数立即返回，网络操作在后台线程中继续并行运行，如何避免这种情况，在主线程中也不能调用网络操作。我读到了countDownlatch，这是唯一可能的解决方案吗？

```
 Service Main Thread

                            GetData
                                 GetDataFromServer-----------> in Background thread
      /*this is problem */  GetData returns;                         |
                                                                     |
                                                                     |
                                                              communication in progress
                                                                     |
                                                                     |
                                                                     |
      /*I want GetData should return here <-------------------transaction complete 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:26:20.437

创建一些接口并在您的类中实现该接口，并在来自网络的响应将数据传递给该接口对象后将该接口对象传递给该特定服务。

我认为这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:20:56.117

你可以从 AsyncTask 调用 startService。我在最近的地方应用程序中可能会遇到同样的问题，需要来自谷歌地图的数据。`enter code here`

```
protected void getLocationAndUpdatePlaces(boolean updateWhenLocationChanges) {
// This isn't directly affecting the UI, so put it on a worker thread.
AsyncTask<Void, Void, Void> findLastLocationTask = new AsyncTask<Void, Void, Void>() {
  @Override
  protected Void doInBackground(Void... params) {
    // Find the last known location, specifying a required accuracy of within the min distance between updates
    // and a required latency of the minimum time required between updates.

  // start a service that require data from web.

  }
};
findLastLocationTask.execute(); 
```

`

# java - Java：在服务器上下文之外下载文件

> ID：16074848
> 
> 赞同：0
> 
> 时间：2013-04-18T05:02:46.840
> 
> 标签：java, jsp, servlets, download

我需要在服务器上下文之外的目录中保存文件并下载文件。我正在使用`Apache Tomacat` 我可以在应用程序的 webapps 目录中的目录中执行此操作

如果我的目录结构如下，

```
--src
--WebContent
    -- uploaddir
         -- myfile.txt 
```

然后我可以简单地下载。

```
 <a href="uploaddir/myfile.txt" target="_blank">download</a> 
```

但是，问题是当文件在其他目录中时说`d:\\uploadedfile\\myfile.txt`

那么我将无法下载它，因为资源不在上面的服务器上下文中。

我有 uuid 映射的文件路径，例如，

`d:\\uploadedfiles\\myfile.txt <-> some_uuid`

然后我想下载文件，点击以下，

```
 <a href="filedownloadservlet?ref_file=some_uuid">download</a> 
```

那么，当文件在服务器上下文之外时，如何使文件可下载，我听说过`getResourceAsStream()`可以做到这一点的方法，但是有人会帮助我如何做到这一点，可能是简单的代码片段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:30:45.793

试试下面的代码，你可以在 filedownloadservet 中编写它。从请求参数中获取文件名，然后读写文件。

如果您需要进行一些安全检查，请在处理请求之前进行。

```
File file = new File("/home/files", "file name which user wants to download");

response.setContentType(getServletContext().getMimeType(file.getName()));
response.setContentLength(file.length());

BufferedInputStream inputStream = null;
BufferedOutputStream outputStream = null;

try {
    inputStream = new BufferedInputStream(new FileInputStream(file));
    outputStream = new BufferedOutputStream(response.getOutputStream());

    byte[] buf = new byte[2048];
    int len;
    while ((len = inputStream.read(buf)) > 0) {
        outputStream.write(buf, 0, len);
    }
} finally {
    if (outputStream != null) { 
        try {
            outputStream.close();
        } catch (IOException e) {
            //log it
        }
    }
    // do the same for input stream also
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:44:05.693

在这里我找到了答案，

```
 response.setContentType("application/msword");
 response.setHeader("Content-Disposition","attachment;filename=downloadname.doc");
 File file=new File("d:\\test.doc");
 InputStream is=new FileInputStream(file);
 int read=0;
 byte[] bytes = new byte[BYTES_DOWNLOAD];
 OutputStream os = response.getOutputStream();
 while((read = is.read(bytes))!= -1){
  os.write(bytes, 0, read);
 }
 os.flush();
 os.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:20:25.910

基本路径不适用于 HTML，如果基本路径也被您的 Web 服务器公开，它看起来不像这里的情况。

要下载任意文件，您需要使用 FileInputStream 打开文件（并用缓冲的输入流包围它），读取一个字节，然后将该字节从您的 servlet 发送到客户端。

然后是安全问题，谷歌也应该这样做（基本上不授予访问任何文件的权限，而只授予要共享的文件，根据需要审核下载等。

再次在您的 servlet 中设置 mime 类型等，然后打开输入流并将字节写入输出流到客户端

# android - 使用设备加速度计android计算用户速度和距离

> ID：16074851
> 
> 赞同：1
> 
> 时间：2013-04-18T05:03:02.507
> 
> 标签：android, performance, accelerometer

嗨，我正在开发小型 android 应用程序，我想在其中计算用户使用设备加速度计覆盖的用户速度和距离。所以我做了什么，我在 1 分钟的时间范围内采集了加速度样本。从加速度计我得到 xy 和 z 坐标。我取了 x 坐标值并取其平均值。并据此计算用户的速度。

但它没有给出适当的价值。有没有办法做到这一点？如何做到这一点，这样它会给我很好的近似值？我通过以下方式做到了这一点：

```
// sum of no samples of acceleration points 
sum_acc = sum_acc+event.values[0];
// avg of acc
avg_acc = sum_acc/no_of_samples;
// speed of user 
speed = avg_acc*time_frame;
// distance
distance = speed*time; 
```

我需要更好更准确的结果。需要帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-21T23:46:01.787

你说速度和距离，

对于**Speed**，不使用加速度计，而是在给定的时间间隔内发出 Location 请求，在该时间间隔内获取两个位置并将其转换为英里，然后将位置除以时间间隔。从那里，你有你的速度。要提出位置请求并获取更新，请点击此[链接](https://developer.android.com/training/location/receive-location-updates.html)，

对于**距离**，使用 Geolocator api 并在给定的时间间隔后请求设备的当前位置，将所覆盖的距离相加，即可得到总距离。

# java - 需要 2 个单选按钮，但每个按钮都在 SWT 中的不同复合组中

> ID：16074855
> 
> 赞同：-3
> 
> 时间：2013-04-18T05:03:24.413
> 
> 标签：java, swt

我需要 2 个单选按钮，但每个按钮都在 SWT 中的不同复合组中。我需要在其中进行单选。请帮我写代码。（**不需要**使用swing ButtonGroup）

```
 Shell shell = new Shell(display);
    Default = new Group(shell,SWT.RADIO);
    Default.setText("Default");
    Default.setLayout(new RowLayout(SWT.HORIZONTAL));
    compbutton = new Button(Default,SWT.RADIO);
    compbutton.setText("Play against Computer");
    pl2button = new Button(shell,SWT.RADIO);
    pl2button.setText("Player1 Vs Player2"); 
```

当我尝试选择单选按钮时，两者都被选中。我只需要其中一个被选中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:32:18.387

如果您不想使用，可以按照以下方法`ButtonGroup`

*   将选择操作侦听器 ( `button.addSelectionListener`) 添加到两个按钮
*   在第一个按钮的动作监听器中，清除第二个按钮
*   同样在第二个按钮的动作监听器中，清除第一个按钮

# android - 拆分数组在android中不起作用

> ID：16074858
> 
> 赞同：-3
> 
> 时间：2013-04-18T05:03:37.960
> 
> 标签：android

我正在分割一个字符串，中间有一些示例文本。但它不是分裂。请帮助我哪里出错了

```
String[] str;

parts[1] = "loopstWatch out this is testingloopstThis makes the difference";
str = parts[1].trim().split("loopst"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:44:52.270

```
String[] arr;
                arr = "loopstWatch out this is testingloopstThis makes the difference".trim().split("loopst");
                Log.e("Data arr[0]",":"+arr[0]);
                Log.e("Data arr[1]",":"+arr[1]);
                Log.e("Data arr[2]",":"+arr[2]); 
```

**输出**

```
 arr[0] :""
arr[1] :"Watch out this is testing"
arr[2] :"This makes the difference" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:49:29.727

我认为你是在倒退。

您想先拆分，然后在索引 1 处获取片段，然后修剪，然后将 str 设置为等于结果：

```
String s = "loopstWatch out this is testingloopstThis makes the difference";
String str = s.split("loopst")[1].trim();

// str should be equal to "Watch out this is testing" 
```

# ruby - 使用数组作为 ruby 哈希键的用例

> ID：16074859
> 
> 赞同：2
> 
> 时间：2013-04-18T05:03:44.487
> 
> 标签：ruby, arrays, hash

Ruby 允许使用数组作为哈希键，如下所示：

```
hash1 = {1 => "one", [2] => 'two', [3,4] => ['three', 'four']} 
```

我不清楚这将是什么常见的用例。如果人们可以分享一些有用的真实场景，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:45:40.397

为什么要将数组存储为哈希键的一个很好的例子是用于记忆。

这是一个将数组作为哈希键如何有用的示例：

```
def initialize(*args)
  @memoizer ||= {}
  return @memoizer[args] if @memoizer[args]
  # do what you will with the args in this initializer, 
  # then create a new instance for the future.
  @memoizer[args] = some_calculation(args)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T05:54:49.403

我认为你在这里把事情复杂化了。不是允许数组作为键，而是*几乎任何*对象都可以是键。来自[精美手册](http://ruby-doc.org/core-2.0/Hash.html)：

> 哈希是一个类似于字典的唯一键及其值的集合。也称为关联数组，它们与数组类似，但在数组使用整数作为索引的情况下，哈希允许您使用任何对象类型。
> [...]如果和方法被覆盖以提供有意义的行为，
> 则用户定义的类可以用作哈希键。`hash``eql?`

请注意，[`hash`](http://ruby-doc.org/core-2.0/Object.html#method-i-hash)and[`eql?`](http://ruby-doc.org/core-2.0/Object.html#method-i-eql-3F)都在 Object 中，所以几乎所有你会遇到的东西都会有它们，因此可以是 Hash 中的键。对于某些任意对象，默认实现可能没有太大意义，但它们仍然存在。

有时，通用性比人为地将您的选项限制在语言设计者可以看到的用途更容易。甚至[Java](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Map.html)也没有那么严格。

我想我想说的是我认为你问错了问题。你应该问的问题是：

> 为什么要禁止使用 Array 作为 Hash 键？

这是 Ruby，默认情况下（几乎）所有东西都是允许的，所以这个问题的答案是我们不想人为地限制你的选择，这里有很多可能性，去做一些奇妙和意想不到的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:42:43.340

如果密钥具有某种结构，您可能希望直接使用它：

```
{
  %w[John Travolta] => :foo,
  %w[Olivia Newton John] => :bar,
} 
```

黑白棋/黑白棋棋盘的初始状态

```
Hash.new(:green).merge{
  [4, :d] => :white,
  [4, :e] => :black,
  [5, :d] => :black,
  [5, :e] => :white,
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-18T05:09:05.570

从您的示例看来，它似乎可以用于更有效地存储大型和/或稀疏矩阵。如您所见，如果 3 和 4 共享相同的值，则可以将它们“压缩”为单个引用。可能有更正式的数据结构会使用它，但是自从我使用“正式”数据结构以来已经有一段时间了，所以我想不出任何临时的。

# android - 错误 (1, -2147483648) 无法播放此视频

> ID：16074868
> 
> 赞同：1
> 
> 时间：2013-04-18T05:04:42.713
> 
> 标签：android, video, format, adt

我正在尝试播放已添加到`raw`文件夹中的 .mp4 视频文件。结果是我总是`error (1, -2147483648)`在 LogCat 中得到一个。

经过一些研究，我注意到这是由不受支持的编解码器/格式引起的。但是最近两天我根据[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)在 Adob​​e Premiere 中渲染了视频？在所有支持的格式和更多。结果总是一样的：我收到错误和“无法播放此视频”。当应用程序启动时。

我的 JAVA 代码是这样的：

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
       getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

       VideoView vv = (VideoView) findViewById(R.id.videoView);

       String fileName = "//BioLab/res/raw/sequence";

       vv.setVideoURI(Uri.parse(fileName));
       vv.start();

    }
} 
```

主要活动是这样的：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

<VideoView android:layout_height="wrap_content" 
        android:layout_width="wrap_content" 
        android:id="@+id/videoView"/>

</RelativeLayout> 
```

我看过他们播放全屏视频的游戏，比如公司徽标视频。他们是怎么做到的呢？必须有一个通用的方法。

注意：我在 java 代码中使用路径 `"//BioLab/res/raw/sequence"`，因为如果我使用 `"/BioLab/res/raw/sequence.mp4"`或者`“android.resource://” + getPackageName() +”/”+R.raw.video`我得到另一个错误

日志猫：`error opening trace file: No such file or directory (2)`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-18T05:21:23.750

`error (1, -2147483648)`通常意味着您提供 MediaPlayer 的链接（在您的情况下为 videoview）无效或文件已损坏。
您尝试从 RAW 文件夹中获取文件的方式很可疑。
尝试以下。
我假设您尝试播放的文件的名称是序列。**

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
       getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
        setContentView(R.layout.activity_main);

       VideoView vv = (VideoView) findViewById(R.id.videoView);
       String path = "android.resource://" + getPackageName() +"/"+ R.raw.sequence;
       Log.d("TAG", path);

       Uri url=Uri.parse(path);

       vv.setVideoURI(url);
       vv.start();
       vv.requestFocus();

    }
} 
```

# actionscript-3 - FDT - 新的 Flash 项目在哪里？

> ID：16074873
> 
> 赞同：2
> 
> 时间：2013-04-18T05:05:18.537
> 
> 标签：actionscript-3, flash-cs6, fdt

到目前为止，我一直在使用 sublime text 2 进行所有编码，并使用 flash pro cs6 进行编译。我在 actionscript 3 上做得很好。我一直在使用 mvc 设计模式并使用诸如 admobs 和electroserver 之类的外部库。我得到fdt并想要的真正原因是因为我想播放我下载的文档类是mxml的源文件。

尽管我看到他们在每个教程中都说“哦，只需单击新的 Flash 项目”。问题是虽然没有选择“flash project”只有actionscript project和fdt project或fla。

在 flash ide 中，我将使用一个 .fla 作为“shell”来发布，并使用另一个 .fla 以及从其 swf 嵌入到 as3 中的资产。我确定这不是在 fdt 中设置文件的方法，但我不知道正确的方法，甚至不知道正确的开始方法。

也许我没有找到正确的页面，但该网站上的文档似乎很薄弱。有没有好的教程可以帮助我开始编译项目？谢谢

专门针对从 Flash ide 过渡到 fdt 的人的教程也会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:22:01.897

我可能是错的，但是从这个 IDE 中，你不能编译 fla。取而代之的是，它提供了另一种构建项目的方法。您必须启动“new FDT Project”，选择基类并设置必须编译的主类。结果，这种方法更加灵活和方便。

# libcurl - libcurl 7.26.0：每个 http 响应末尾的垃圾

> ID：16074875
> 
> 赞同：0
> 
> 时间：2013-04-18T05:05:19.410
> 
> 标签：libcurl, cocos2d-x

我正在使用 cocos2d-x 游戏引擎开发游戏。游戏从服务器获取大量数据。所以为了减少加载时间和数据消耗，我使用了 gzip 编码。

`curl_easy_setopt(curl, CURLOPT_ACCEPT_ENCODING, "gzip,deflate");`

但奇怪的是，我在每个 http 响应结束时看到垃圾，当我不使用 gzip 时，每个 http 响应都可以，并且在 http 响应结束时没有垃圾。

请提出可能导致此问题的原因。您的帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:35:55.953

尝试

```
curl_easy_cleanup(curl); 
```

和

```
curl_global_cleanup(); 
```

在您完成发送请求后`curl_easy_perform()`，然后查看此错误是否仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T08:37:24.007

我在 C 语言中使用相同的库遇到了相同的错误。

```
 curl_easy_setopt(curl, CURLOPT_POSTFIELDS, postString);
    curl_easy_setopt(curl, CURLOPT_POSTFIELDSIZE, strlen(postString)); 
```

您可以尝试确保 POSTFIELDS 的长度与 POSTFIELDSIZE 相同。

# php - 使用 PHP 解码全文

> ID：16074876
> 
> 赞同：0
> 
> 时间：2013-04-18T05:05:22.347
> 
> 标签：php, html-entities, htmlspecialchars

我有需要解码的输出，它被传递到 PHP 页面，如下所示：

```
&lt;img src=&#039;http://freetopwallpaper.com/wp-content/gallery/puppy-pic/puppy wallpaper-hd-19.jpg&#039; class=&#039;blog-image&#039; /&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi augue lorem, semper eget varius non, aliquam vel felis. Aliquam erat volutpat. Suspendisse pellentesque, ipsum sed vulputate consequat, ligula nisi tincidunt lacus, eget pretium sapien felis sed arcu. Vivamus ligula leo, interdum in vestibulum eget, malesuada nec diam. Mauris interdum metus vel purus dapibus non feugiat risus ultricies. Morbi semper convallis purus at varius. Mauris et lacinia lorem. Quisque id lacus sem cartomizer.

&amp;lt;strong&amp;gt;Proin facilisis lacus in nisi laoreet rutrum. Praesent ligula magna, interdum gravida egestas a, posuere at ante. Sed est neque, rhoncus et mattis in, cursus at risus. Sed in quam purus. Mauris vitae dui est, quis consequat lacus. Proin mollis congue erat in adipiscing. Quisque ultricies pulvinar fringilla. Cras vitae quam neque. Fusce mattis elit nec lacus volutpat atomizer pretium fermentum sed nisl. Proin sed urna non erat blandit feugiat nec non ante. Fusce eu diam quis tellus aliquam sodales. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Morbi vehicula leo ut tellus pulvinar vulputate. Donec imperdiet blandit fringilla.&amp;lt;/strong&amp;gt; 
```

当我运行或者`html_entities_decode()`它`htmlspecialchars_decode()`以纯文本而不是 HTML 输出时。此外，`&amp;lt;strong&amp;gt;`标签以原始状态输出，而不是转换为`<strong>`s。

我已经搜索过，但没有找到任何东西。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:13:30.990

尝试：

```
<?php
$buffer = <<<STR
&lt;img src=&#039;http://freetopwallpaper.com/wp-content/gallery/puppy-pic/puppy wallpaper-hd-19.jpg&#039; class=&#039;blog-image&#039; /&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi augue lorem, semper eget varius non, aliquam vel felis. Aliquam erat volutpat. Suspendisse pellentesque, ipsum sed vulputate consequat, ligula nisi tincidunt lacus, eget pretium sapien felis sed arcu. Vivamus ligula leo, interdum in vestibulum eget, malesuada nec diam. Mauris interdum metus vel purus dapibus non feugiat risus ultricies. Morbi semper convallis purus at varius. Mauris et lacinia lorem. Quisque id lacus sem cartomizer.

&amp;lt;strong&amp;gt;Proin facilisis lacus in nisi laoreet rutrum. Praesent ligula magna, interdum gravida egestas a, posuere at ante. Sed est neque, rhoncus et mattis in, cursus at risus. Sed in quam purus. Mauris vitae dui est, quis consequat lacus. Proin mollis congue erat in adipiscing. Quisque ultricies pulvinar fringilla. Cras vitae quam neque. Fusce mattis elit nec lacus volutpat atomizer pretium fermentum sed nisl. Proin sed urna non erat blandit feugiat nec non ante. Fusce eu diam quis tellus aliquam sodales. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Morbi vehicula leo ut tellus pulvinar vulputate. Donec imperdiet blandit fringilla.&amp;lt;/strong&amp;gt;
STR;

echo htmlspecialchars_decode(htmlspecialchars_decode($buffer, ENT_QUOTES));
?> 
```

可能您在某处对实体进行了双重编码。因为`PHP 5.4.5`它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:01:48.167

用这个。

```
<?php
$btest = '&lt;img src=&#039;http://freetopwallpaper.com/wp-content/gallery/puppy-pic/puppy wallpaper-hd-19.jpg&#039; class=&#039;blog-image&#039; /&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi augue lorem, semper eget varius non, aliquam vel felis. Aliquam erat volutpat. Suspendisse pellentesque, ipsum sed vulputate consequat, ligula nisi tincidunt lacus, eget pretium sapien felis sed arcu. Vivamus ligula leo, interdum in vestibulum eget, malesuada nec diam. Mauris interdum metus vel purus dapibus non feugiat risus ultricies. Morbi semper convallis purus at varius. Mauris et lacinia lorem. Quisque id lacus sem cartomizer.
&amp;lt;strong&amp;gt;Proin facilisis lacus in nisi laoreet rutrum. Praesent ligula magna, interdum gravida egestas a, posuere at ante. Sed est neque, rhoncus et mattis in, cursus at risus. Sed in quam purus. Mauris vitae dui est, quis consequat lacus. Proin mollis congue erat in adipiscing. Quisque ultricies pulvinar fringilla. Cras vitae quam neque. Fusce mattis elit nec lacus volutpat atomizer pretium fermentum sed nisl. Proin sed urna non erat blandit feugiat nec non ante. Fusce eu diam quis tellus aliquam sodales. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Morbi vehicula leo ut tellus pulvinar vulputate. Donec imperdiet blandit fringilla.&amp;lt;/strong&amp;gt;';

echo $b = html_entity_decode($btest,ENT_QUOTES,"ISO-8859-1");
?> 
```

# c++ - 是否使用“新”创建对象之间的区别。

> ID：16074877
> 
> 赞同：2
> 
> 时间：2013-04-18T05:05:26.600
> 
> 标签：c++, object

这两种说法有什么区别？

```
stringstream *myStream = new stringstream(s); 
```

和

```
stringstream myStream(s); 
```

我听说首先返回一个指针并“动态”分配内存。但我并不真正理解其中的区别。

先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T05:09:42.247

如果您在函数内部，在这种情况下：

```
stringstream myStream(s); 
```

myStream 在堆栈上分配。它将在作用域结束时自动销毁。它也非常有效。

在这种情况下：

```
stringstream *myStream = new stringstream(s); 
```

myStream 是指向在堆上分配的对象的指针。当你调用它时它会被销毁`delete myStream`。

大多数时候你想使用堆栈。它很高效，内存会自动为您释放。它也恰好是更少的类型。

有时你需要更多的控制。您希望一个函数创建一个对象并使其存在，直到您明确删除它。这些情况应该很少见，对于现代 C++，您应该使用 unique_ptr 或 shared_ptr 之类的东西来简化内存管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:11:31.423

> 我听说首先返回一个指针并“动态”分配内存。但我并不真正理解其中的区别。

这是正确的。您的程序可以使用几种类型的内存：

*   静态/全局内存，在编译时分配，在程序的整个生命周期中使用用于该变量的相同地址

*   堆栈内存，它是函数/作用域的本地变量，因此变量在进入作用域时创建，并在作用域退出时自动销毁。相对于栈指针的地址是在编译时计算出来的，所以非常高效快速，例如：

    if (int x = f()) std::cout << x; // x 在 "if" 范围内，但在这一行之后它被销毁了

*   自由存储（堆）内存，它是动态分配的，这意味着可以创建变量的内存地址是在运行时计算的，并且取决于已经进行了哪些其他动态内存请求。这是相对较慢的，并且是手动的，因为您必须有一个匹配`delete`来销毁对象并释放内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T05:15:04.267

在第一种情况下：`stringstream *myStream = new stringstream(s);`

您的对象存储在内存有限的堆栈上，如果您以这种方式分配非常大的对象（其成员也分配在堆栈上并且具有一些疯狂的大小的对象），您可能会出现堆栈溢出。您可能会感觉到这种限制，尤其是在资源有限的嵌入式系统中。

此外，一旦程序超出范围，堆栈上分配的对象的析构函数就会被调用，这使得它们在许多情况下不实用。因此，通常首选使用关键字将`new`对象存储在堆上，并且对象存储在堆内存中，其大小大致受限于您的可用 RAM。但是，在这种情况下，您需要在正确的位置删除对象，否则可能会导致内存泄漏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T05:10:03.447

当您用于`new`获取指向新对象的指针时（第一种情况），您必须`delete`在一段时间后显式地使用此指针。如果你不这样做，你将有内存泄漏。

在第二种情况下，您无需担心这一点 - 对象将在离开当前范围后通过调用其析构函数自动处置。

# android - 活动组中的谷歌地图视图版本 2

> ID：16074883
> 
> 赞同：0
> 
> 时间：2013-04-18T05:05:46.323
> 
> 标签：android, google-maps

您好，我有包含活动组的基于选项卡的应用程序。在一个活动组中，我有一个子活动，我必须在其中显示地图并绘制多个位置，作为服务器的响应，由于不再支持谷歌地图版本 1，我必须使用 oogle 地图版本 2 但当我使用下面给出的这个 xml 时，我会得到 xml inflate Infalte that Fragments

java.lang.RuntimeException：无法启动活动 ComponentInfo{com.teks.googlemaps/com.teks.googlemaps.MainActivity}：android.view.InflateException：二进制 XML 文件第 13 行：膨胀类片段时出错

```
 <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_centerHorizontal="true"
                            android:layout_centerVertical="true" />

                        <fragment
                            android:id="@+id/map"
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"

                            class="com.google.android.gms.maps.SupportMapFragment"
                            />

                    </RelativeLayout> 
```

要添加更多规范，我已经添加了 google play services 。在 android 2.2 中制作了 api 密钥和我的目标设备

请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:10:28.810

您需要使用 FragmentActivity 才能使 SupportMapFragment 工作。

顺便提一句。ActivityGroup 已被弃用超过 2 年。

# jquery - jsp 从数据库中动态选择选项

> ID：16074884
> 
> 赞同：0
> 
> 时间：2013-04-18T05:05:54.940
> 
> 标签：jquery, jsp

我`students`在 mysql 数据库中调用了表，其中存在班级、学生姓名等。

我想在jsp中使用选择选项，这样当且仅当首先选择班级时，在选择班级后立即通过检索记录，该特定班级的所有学生姓名应自动（动态）显示在另一个选择下拉列表中数据库。

这里我想使用servlet进行数据库连接，并通过jsp访问所有数据库记录`getAttribute()`

```
<select>class
   <option>1</option>
   <option>2</option>
   .....
</select> 
<select>Student
   <option>1</option>
   <option>2</option>
   .....
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:11:10.367

当您更改“班级”组合框（从第一个组合框传递您的班级名称）并使用返回的数据填充您的第二个学生组合框时，使用 ajax 调用来检索数据。

# c# - 如何在 Windows Phone 项目中导入 C++ dll

> ID：16074887
> 
> 赞同：1
> 
> 时间：2013-04-18T05:06:05.323
> 
> 标签：c#

我在 C++ 中创建了一个 DLL 文件。我想将它导入到我的 Windows Phone 项目中。我遵循了来自不同来源的许多说明，即使我运行我的代码，我也收到以下错误：

> 尝试访问该方法失败：rough.MainPage.Add(System.Int32, System.Int32)。

我的 windows phone c# 代码在这里：

```
*//Here is C# code for Windows Phone
namespace testRsa
{
    using System.Runtime.InteropServices;

    public partial class MainPage : PhoneApplicationPage
    {
        [DllImport("myfunc.dll", EntryPoint = "Add", CallingConvention =          CallingConvention.StdCall)]
        static extern int Add(int a, int b);

        // Constructor
        public MainPage()
        {
            InitializeComponent();
            int result = Add(27, 28);
            System.Diagnostics.Debug.WriteLine(7);
        }
    }
} 
```

我的 dll .h 文件在这里：

```
#include "stdafx.h"
#include "myfunc.h"
#include <stdexcept>

using namespace std;

double __stdcall Add(double a, double b)
{
    return a + b;

} 
```

我的 Dll .cpp 文件在这里：#include "stdafx.h" #include "myfunc.h" #include

```
using namespace std;
double __stdcall Add(double a, double b)
{
    return a + b;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T08:42:55.010

要将使用 C++ 导入 C# 项目，您必须使其在托管代码中可见。为此，您应该在新建项目菜单的 Visual C++ 部分下创建一个新的“Windows Phone Runetime”组件。例如，您可以将项目命名为“Dll”。

创建项目后，您可以修改源代码，使其看起来像这样。

dll.cpp：

```
#include "Dll.h"

namespace ns {

    double Cpp_class::cppAdd(double a, double b)
    {
        return a + b;
    }
} 
```

DLL.h：

```
#pragma once

namespace ns {
    public ref class Cpp_class sealed /* this is what makes your class visible to managed code */
    {
        public:
            static double cppAdd(double a, double b);
    };
} 
```

编译它以验证您没有做错任何事情。完成后，创建一个新的 Windows Phone 应用程序项目（在新项目菜单中的 Visual C# 下。右键单击解决方案名称并选择“添加”>“添加现有项目”，选择您的 Dll 项目。完成此操作后，右键单击 Windows Phone 应用程序项目，选择“添加引用”，在“解决方案”选项卡下，您将看到您的 Dll 项目。

如果您正确执行了所有这些操作，您现在可以通过“使用”它在 Windows Phone 应用程序的 C# 部分中使用您的本机代码：

```
using Dll;

[...]
ns.Cpp_class.Add(1,3); 
```

请记住，如果您不添加引用，您将无法使用该组件。

我真的希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:36:49.390

Windows 7 Phone 不支持平台调用和 C++/CLI。

但是，您可以在 Windows 8 Phone 上使用它。当然，在 Windows 8 上，您可能应该只用 C++ 编写整个应用程序——更好的电池寿命和性能。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681687(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681687(v=vs.105).aspx)

# javascript - 模拟 Windows 的 WScript 对象的 javascript 库？

> ID：16074889
> 
> 赞同：1
> 
> 时间：2013-04-18T05:06:26.977
> 
> 标签：javascript, emulation, wsh

我正在寻找 WScript 对象的 javascript 模拟。我首先创建了这样一个对象并定义了像 WScript 对象一样工作的方法和属性。我的目标是包装我需要的功能，然后将其引向不同的方向。

这样做的原因是为了避免对大量 JScript 脚本进行大规模更改。我宁愿简单地将“WScript”与（例如）“MyWScript”进行全局交换，并将所有“.Echo”和“.StdOut.Write”等东西留给新对象的同名处理程序处理。

我没有看到的是扩展 WScript 对象本身。

与其重新发明轮子，不如在某个地方有 WScript 克隆/类似/模拟？

**之后**

WScript 对象似乎无法扩展。例如，不像字符串。

**几天后**

嘿，如果有的话，我什至会采用 JScript.NET 实现！

# python - 使用 Python 和 PLY 的递归下降解析器

> ID：16074890
> 
> 赞同：2
> 
> 时间：2013-04-18T05:06:48.043
> 
> 标签：python, parsing, recursive-descent

我为我的非常基本的问题道歉，但是，我真的在这里挣扎。我需要做一个递归下降解析器。我正在使用 Python 并使用 PLY。我的语法如下：

<列表> → (<序列>) | ()

<序列> → <列表元素> , <序列> | <列表元素>

<列表元素> → <列表> | 数字

看起来像这样吗？我走远了吗？最终目标是将列表读入数据结构，然后将其打印出来。

```
定义 p_list(p)
    '列表：“（”序列“）” | "("")"'

定义 p_sequence(p)
    'sequence : list_el","sequence | list_el'

定义 p_list_el(p)
    'list_el：列表 | 数字'

```

如果有人想知道完整的解决方案是什么，我会尽快发布。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T10:06:59.290

这就是我的做法：

```
tokens = ("LBRACKET", "RBRACKET",
          "INTEGER", "FLOAT", "COMMA") # So we can add other tokens
t_LBRACKET = r'\('
t_RBRACKET = r'\)'
t_INTEGER = r'\d+'
t_FLOAT = r'\d+\.\d+'
t_COMMA = r','

def p_list(p):
    """list : LBRACKET sequence RBRACKET
            | LBRACKET RBRACKET"""
    if len(p) == 4:
        p[0] = p[2]
    else:
        p[0] = None

def p_number(p):
    """number : INTEGER
              | FLOAT"""
    p[0] = p[1]

def p_sequence(p):
    """sequence : list_el COMMA sequence
                | list_el"""
    if len(p) == 4:
        p[0] = p[1] + p[3]
    else:
        p[0] = p[1]        

def p_list_el(p):
    """list_el : number
               | list"""
    p[0] = p[1] 
```

编辑：
关于额外标记的快速解释：脚本中的所有内容最终都应该归结为您定义的标记或字符（因此添加是合法的）。通过将它们全部指定为标记，它更易于阅读和使用。

# php - PHP：使用外部文件登录

> ID：16074891
> 
> 赞同：0
> 
> 时间：2013-04-18T05:06:50.227
> 
> 标签：php, redirect, login

我在使用外部登录文件时遇到问题。基本上我想去一个外部登录 php 页面并验证表单。验证表单后，我想重定向回上一页并开始会话。我遇到的问题是我的会话没有启动（即它不会将登录表单更改为注销按钮）。我的代码在下面。提前致谢。

索引.php

```
<?
    session_start();
    include('phpFunctions/databaseConnect.php');
    include('phpFunctions/reusableFunctions.php');
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />
        <title>Unnamed classifieds site</title>
        <script type="text/javascript" src="js/formValidation.js"></script>
    </head>
    <body>
        <div class="wrapper">
            <div class="login">
                <? if(isset($_GET['error'])){$error = $_GET['error'];} ?>
                <span id="error_message" class="error"><? if(isset($error)){echo $error;} ?><span id="login_error"></span></span>
                <? login(); ?>
            </div>
            <div class="mainLogo">
                <? mainLogo(); ?>
            </div>
            <div class="search_form">
                <span id="error_message" class="error"><span id="search_error"></span></span>
                <? search(); ?>
            </div>
            <div class="footer">
                <? footer(); ?>
            </div>
        </div>
    </body>
</html> 
```

登录.php

```
<?

    include('phpFunctions/databaseConnect.php');
    $error = array();

    $email = $_POST['email'];
    $password = $_POST['password'];

    if(empty($email) || empty($password)){
        $error[] = 'Please fill in the form!';
    }else if(!preg_match('/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/',$email)){
        $error[] = 'Your email is not in the correct format!';
    }else if(strlen($password) < 6){
        $error[] = 'Your password must be at least 6 characters long!';
    }else{
        $hashPass = md5($password);

        $query_user = mysql_query("SELECT * FROM users WHERE email='$email' AND password='$hashPass'") or die(mysql_error());
        $num_rows = mysql_num_rows($query_user);

        if($num_rows == 1){
           while($row = mysql_fetch_array($query_user)){
               $_SESSION['id'] = $row['id'];
               header('Location:index.php');
           }
        }else{
            $error[] = 'Sorry no user with that email or password!';
        }
    }

    if(!empty($error)){
        foreach($error as $key => $values){
            $error_message.= "$values";
        }

        header('Location: index.php?error='.  urlencode($error_message));
    }

?> 
```

# ruby-on-rails - 一个模型的表格，另一个模型的视图

> ID：16074893
> 
> 赞同：0
> 
> 时间：2013-04-18T05:06:52.267
> 
> 标签：ruby-on-rails

我正在编写一个简单的 rails 应用程序，我目前有 2 个模型 Location User，它们与 Message 模型具有相同的关系。即Location有很多消息，User有很多消息，Message属于User和Location。我目前正在尝试添加一个表单以在我的位置显示视图上创建一条新消息。这是一些代码：

```
app/views/locations/show.html.erb:

<h1><%= @locaton.name %></h1>
<p><%= @location.location %></p>
<p><%= @location.discription %></p>
<%= link_to "Find a Different Location", crags_path %>

<h2> Messages
<ul>
    <% @location.messages.each do |message|%>
    </li>
        <h3><%=message.user.username%></h3>
        <p><%=message.content%></p>
    </li>
    <% end %>
</ul> 
```

位置控制器：

```
class LocationsController < ApplicationController

def index
    @locations = Location.all
end

def show
    @location = Location.find(params[:id])
end

def new
    @Location = Location.new
end

def create
    @location = Location.new(
        name: params[:location][:name],
        location: params[:location][:location],
        discription: params[:location][:discription])
    @location.save
    flash.notice = "#{@location.name} Created!"
    redirect_to location_path(@crag)
end

def edit
    @location = Location.find(params[:id])
end

def update
    @location = Location.find(params[:id])
    @location.update_attributes(params[:location])

    flash.notice = "#{@location.name} Updated!"

    redirect_to crag_path(@location)
end

def destroy
    @location = Location.find(params[:id])
    @location.destroy
    flash.notice = "#{@location.name} deleted."
    redirect_to locations_path
end

end 
```

消息控制器

```
class MessagesController < ApplicationController

def new
    @message = Message.new
end

  def create
    @message = current_user.messages.build(
                          content: params[:message][:content])
    redirect_to crags_path                   
  end

end 
```

我试图包含在 location/show.html.erb 中的部分表单

```
<%= form_for(@message) do |f| %>
<p>
    <%= f.label "Leave a Message" %>
    <%= f.text_area :content %>
</p>
<%= f.submit "submit" %>
<% end %> 
```

当我尝试包含部分内容时，出现以下错误

```
undefined method `model_name' for NilClass:Class 
```

我假设表单正在尝试与位置控制器通信，因为它位于位置视图中，并且由于它无法在位置控制器中找到实例@message，因此它不知道该怎么做。我正在尝试弄清楚如何将消息控制器中的此表单包含在位置视图中。如果我为 new_message_path 创建一个视图，它工作正常，我再次猜测，因为它在消息视图中运行，所以它引用回消息控制器。

我还想知道是否有任何方法可以创建一条消息，该消息既链接到 current_user 又链接到表单所在的位置（或者希望当我找出最后一个问题时。消息对象具有 location_id 属性，怎么做我使用我当前所在的页面（带有 url /locations/location_id）将消息链接到该位置？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:21:31.527

首先，您需要将`@message`变量实际设置为控制器中的新消息：

```
# locations_controller.rb
def show
  @location = Location.find(params[:id])
  @message = @location.messages.build(user_id: current_user.id)
end 
```

Using`@location.messages.build`将自动为新消息填充`location_id`with ，我们也在此处设置。`@location.id``user_id`

有了这些，您应该能够在您的页面中构建表单（尽管您可能需要添加一些隐藏字段来存储`user_id`and `location_id`for `@message`）。

完成后，你也可以修剪你的`messages_controller`。除非您希望有一个额外的页面来创建与位置无关的新消息，否则您可能会摆脱您的`new`操作（和路线）。然后，您可以将`create`操作简化为：

```
# messages_controller.rb
def create
  @message = Message.new(params[:message])
  if @message.save
    # whatever you want to do on successful save, for example:
    flash[:success] = "Message created."
    redirect_to location_path(@message.location_id)
  else
    # whatever you want to do if saving fails
  end
end 
```

# ibm-mobilefirst - IBM Worklight - 适用于开发人员的 Worklight Studio 的限制

> ID：16074897
> 
> 赞同：1
> 
> 时间：2013-04-18T05:07:14.313
> 
> 标签：ibm-mobilefirst, worklight-studio

Worklight Studio for developer 是否有任何记录在案的限制？或者 Worklight Studio for developer 和购买产品后提供的 Worklight Studio 之间有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:01:49.180

@Alastair Pitts：[IBM Worklight Studio](http://www-01.ibm.com/software/mobile-solutions/worklight/components/mobile-development-platform/)是 Eclipse IDE 的插件，允许您为[IBM Worklight Mobile Application Platform](http://www-01.ibm.com/software/mobile-solutions/worklight/)开发应用程序。

[IBM Worklight Developer/Consumer/Enterprise 版本](http://pic.dhe.ibm.com/infocenter/wrklight/v6r0m0/topic/com.ibm.worklight.help.doc/getstart/c_wl_editions.html)之间的区别是：

**开发商：**

*   开发者版仅供开发使用，免费下载
*   不包含[应用程序真实性功能](http://pic.dhe.ibm.com/infocenter/wrklight/v6r0m0/topic/com.ibm.worklight.help.doc/dev/c_ibm_worklight_app_authentication_overview.html)

**消费者/企业：**

*   企业版的定价指标与企业对企业 (B2E) 采购模式一致。
*   消费者版的定价指标与企业对消费者 (B2C) 购买模式一致。
*   包含[应用程序真实性功能](http://pic.dhe.ibm.com/infocenter/wrklight/v6r0m0/topic/com.ibm.worklight.help.doc/dev/c_ibm_worklight_app_authentication_overview.html)

# php - socialengine 与外部 php 网站的集成

> ID：16074899
> 
> 赞同：1
> 
> 时间：2013-04-18T05:07:16.237
> 
> 标签：php, integration, socialengine

我正在使用社交引擎作为社交网络网站，同时我们正在使用 php CodeIngiter MVC 完成另一个网站。现在我们想将社交引擎与我们的网站集成。我们仅将 Social-engine DB 用于我们的 php 网站。

当我们登录我们的网站时，它也应该自动登录到社交引擎。我不知道从哪里开始？有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:37:03.400

可能您应该创建自定义登录操作（默认登录操作在 application/modules/User/controllers/AuthController.php 中）并使用 AJAX 启动它，但这种方式不太好，因为您可能会遇到不可预知的会话问题或其他问题。更好的方法是创建将由用户启动的登录操作。用户将单击按钮（如 facebook 或 twitter 登录按钮）并使用您已经登录的 php 网站中的数据启动自定义登录操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T04:12:54.560

我会建议您为社交引擎登录以及您的 php 网站创建一些 API。这样，它会帮助你。

因为，我们针对一个客户端的移动原生应用程序，我们使用了这种方法并且它工作正常。

# java - 使用 arraycopy 从数组中删除一个项目

> ID：16074901
> 
> 赞同：1
> 
> 时间：2013-04-18T05:07:51.520
> 
> 标签：java, arrays

我在使用 arraycopy 从我的数组中删除一个项目时遇到问题。我有两种方法 find （定位要删除的项目的索引）和 delete （删除）。它不会删除任何东西。先感谢您。

```
 public void find(Comparable value2){
    Scanner sc = new Scanner(System.in);
    Comparable value = value2;

    if (empty() == true){
        System.out.println("The array is empty");

    }
    else{
    int bsValue = Arrays.binarySearch(sa,value);
    System.out.println("The index is: " + bsValue);
    delete(bsValue);
    }
    }

 public void delete(int bs){
     int location = bs;   
     Comparable[] tempArray = new Comparable[sa.length -1];
     System.arraycopy(sa, 0, tempArray, 0, location);
     if (sa.length != location){
         System.arraycopy(sa, location +1 , tempArray, location, sa.length - location - 1);
     }      
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:16:37.807

您 allocate `tempArray`，将数据复制到其中，然后放弃引用。结果，原始数组 ( `sa`) 保持原样。

大概您打算`sa`指出新数组：

```
sa = tempArray; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:23:40.103

通过深度复制 sa 创建 tempArray 的新对象，这将为您完成工作

# android - 权限在android中的广播中不起作用

> ID：16074902
> 
> 赞同：0
> 
> 时间：2013-04-18T05:07:53.657
> 
> 标签：android, android-broadcast

我在这里注册了我的 .Reciever_

```
<receiver 
    android:name=".Reciever_"
    android:permission="com.paad.MY_BROADCAST_PERMISSION">
    <intent-filter >
        <action android:name="com.paad.action.NEW_LIFEFORM_"/>
    </intent-filter>
</receiver> 
```

我想`android:permission`在我的代码中使用它，但它不起作用。

我在我的代码中使用此权限

```
String requiredPermission = "com.paad.MY_BROADCAST_PERMISSION"; 
```

我想发送我订购的广播。

```
sendOrderedBroadcast( new Intent("com.paad.action.NEW_LIFEFORM_") , requiredPermission ) ; 
```

程序控制不在 OnRecieve() 方法内部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:13:58.530

检查下面的链接与您的问题相同....

[如何在android中的广播发送者和接收者中设置权限](https://stackoverflow.com/questions/11770794/how-to-set-permissions-in-broadcast-sender-and-receiver-in-android)

在广播发送者的**清单**中，应该声明一个新的权限：

```
<permission android:name="com.paad.MY_BROADCAST_PERMISSION"></permission>

<uses-permission android:name="com.paad.MY_BROADCAST_PERMISSION"/> 
```

它和你的代码一样

```
<receiver 
    android:name=".Reciever_"
    android:permission="com.paad.MY_BROADCAST_PERMISSION">
    <intent-filter >
        <action android:name="com.paad.action.NEW_LIFEFORM_"/>
    </intent-filter>
</receiver> 
```

谢谢

# javascript - 将 localStorage 值传递给输入字段时出现问题

> ID：16074903
> 
> 赞同：1
> 
> 时间：2013-04-18T05:07:55.663
> 
> 标签：javascript, html

好的，所以我在尝试将存储在本地存储中的值传递到输入字段时遇到问题。我发现了另一个线程（[将 javascript 变量值传递到输入类型隐藏值](https://stackoverflow.com/questions/7764154/pass-a-javascript-variable-value-into-input-type-hidden-value)中），它显示了如何做到这一点，但它仍然对我不起作用，我不知道我做错了什么。我的整个代码都在下面，但我把它分开了，以便更容易找到真正重要的部分。

```
 <html>
    <head>
<title>Location details</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<script type="text/javascript"> 
```

这是我试图将存储的值传递到字段但没有运气的地方。

```
 document.getElementById("plat").value = localStorage.latitude;
    document.getElementById("plon").value = localStorage.longitude;

    function fileSelected() {            
        var file = document.getElementById("fileUpload").files[0];
        if (file) {
            var fileSize = 0;
            if (file.size > 1024 * 1024) {
                fileSize = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + 'MB';
            }
            else {
                fileSize = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';
            }

            document.getElementById("fileName").innerHTML = 'Name: ' + file.name;
            document.getElementById("fileSize").innerHTML = 'Size: ' + fileSize;
            document.getElementById("fileType").innerHTML = 'Type: ' + file.type;
        }
    }

    function uploadFile() {
        var id = new formData();
        id.append("fileUpload", document.getElementById("fileUpload").files[0]);
        var xhr = new XMLHttpRequest();
        xhr.upload.addEventListener("progress", uploadProgress, false);
        xhr.addEventListener("load", uploadComplete, false);
        xhr.addEventListener("error", uploadFailed, false);
        xhr.addEventListener("abort", uploadCancelled, false);
        xhr.open("POST", "snap.php");
        xhr.send(id);
    }

    function uploadProgress(evt) {
        if (evt.lengthComputable) {
            var percentComplete = Math.round(evt.loaded * 100 / evt.total);
            document.getElementById("progressNumber").innerHTML = percentComplete.toString() + '%';
        }
        else {
            document.getElementById("progressNumber").innerHTML = 'unable to compute';
        }
    }

    //==================================================================
    // These events are raised when the server sends back a response
    //==================================================================
    function uploadComplete(evt) {

        alert(evt.target.responseText);
    }

    function uploadFailed(evt) {
        alert("Therew as an error attempting to upload the file.");
    }

    function uploadCancelled(evt) {
        alert("The upload has been cancelled by the user or the browser dropped the connection.");
    }
</script>
</head>
<body>
     <div>
    <form id="form1" enctype="multipart/form-data" method="post" action="scripts/snap.php"> 
```

这是我的输入字段。他们在我看来很好。

> ```
>  <p>
>             <input id="plat" type="text" value="" />
>             <input id="plon" type="hidden" value="" />
>         </p>
>         <div class="row">
>             <label for="fileUpload">Select an image to Upload</label><br />
>             <input type="file" name="fileUpload" id="fileUpload" onchange="fileSelected();" />
>         </div>
>         <div id="filename"></div>
>         <div id="fileSize"></div>    
>         <div id="fileType"></div>
>         <div class="row">
>             <input type="button" onclick="uploadFile()" value="Upload" />
>         </div>
>         <div id="progressNumber"></div>
>     </form>
> </div>
> </body>
> </html> 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:34:58.847

在加载 dom 内容之前尝试您正在调用脚本的这段代码：

```
 document.addEventListener('DOMContentLoaded', function () {
        document.getElementById("plat").value = localStorage.latitude;
        document.getElementById("plon").value = localStorage.longitude;
    }, false);

    function fileSelected() {
        var file = document.getElementById("fileUpload").files[0];
        if (file) {
            var fileSize = 0;
            if (file.size > 1024 * 1024) {
                fileSize = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + 'MB';
            }
            else {
                fileSize = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';
            }

            document.getElementById("fileName").innerHTML = 'Name: ' + file.name;
            document.getElementById("fileSize").innerHTML = 'Size: ' + fileSize;
            document.getElementById("fileType").innerHTML = 'Type: ' + file.type;
        }
    }

    function uploadFile() {
        var id = new formData();
        id.append("fileUpload", document.getElementById("fileUpload").files[0]);
        var xhr = new XMLHttpRequest();
        xhr.upload.addEventListener("progress", uploadProgress, false);
        xhr.addEventListener("load", uploadComplete, false);
        xhr.addEventListener("error", uploadFailed, false);
        xhr.addEventListener("abort", uploadCancelled, false);
        xhr.open("POST", "snap.php");
        xhr.send(id);
    }

    function uploadProgress(evt) {
        if (evt.lengthComputable) {
            var percentComplete = Math.round(evt.loaded * 100 / evt.total);
            document.getElementById("progressNumber").innerHTML = percentComplete.toString() + '%';
        }
        else {
            document.getElementById("progressNumber").innerHTML = 'unable to compute';
        }
    }

    //==================================================================
    // These events are raised when the server sends back a response
    //==================================================================
    function uploadComplete(evt) {

        alert(evt.target.responseText);
    }

    function uploadFailed(evt) {
        alert("Therew as an error attempting to upload the file.");
    }

    function uploadCancelled(evt) {
        alert("The upload has been cancelled by the user or the browser dropped the connection.");
    } 
```

# asp.net - EnableViewState="false" 不起作用，为什么 asp.net 视图状态会自动解码并存储在浏览器中

> ID：16074904
> 
> 赞同：1
> 
> 时间：2013-04-18T05:08:05.560
> 
> 标签：asp.net, viewstate, state

我使用了 asp.net 文本框并设置

> EnableViewState="假"

然后我运行我的代码并输入一些示例文本并强制执行回发（这意味着单击按钮）然后文本框控件保留该值。

我的代码有什么问题？

如何禁用视图状态？

```
<asp:TextBox ID="TextBox1" EnableViewState="false" runat="server"></asp:TextBox>
<asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" /> 
```

然后我还有一个疑问。

**为什么asp.net视图状态自动解码并存储在浏览器中。**我读了一些文章，文章说这是出于安全目的。

用户提供她/他的信息，他将使用特定的浏览器并维护浏览器，然后为什么要对视图状态进行编码。解码视图状态的另一个原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:21:06.587

好吧，关于您的第一个问题，这在开始时可能会令人困惑。文本框只是实现 IPostBackDataHandler 接口的类。

可以在这里找到一个很好的解释——http [://www.codeproject.com/Articles/378180/View-State-for-TextBox-and-other-controls-that-imp](http://www.codeproject.com/Articles/378180/View-State-for-TextBox-and-other-controls-that-imp)

关于您关于视图状态加密的第二个问题，那么您必须知道访问该页面的用户不仅仅是可以查看视图状态的用户。页面也会在未加密的频道上发布，因此任何通过网络查看的人都可以访问它。此外，用户永远不能被信任。

我给你的建议是详细了解 msdn 上的视图状态。从长远来看，它将对您有所帮助。

# android - 活动开始时，Android 应用程序在 logcat 中退出且没有任何错误

> ID：16074908
> 
> 赞同：1
> 
> 时间：2013-04-18T05:08:13.423
> 
> 标签：android, android-activity, crash, logcat

我已经创建了一个键盘，它应该在单击按钮时启动，但它不会在三星平板电脑上启动我的应用程序刚刚退出，logcat 中没有任何错误，但我的应用程序在模拟器上正常工作。下面是我在按钮的 onclicklistener 中的代码

```
String you = "http://www.youtube.com/results?search_query=";
Intent i= new Intent("web.browser.gk.Keyboard");
i.putExtra("websearch", you);
i.putExtra("period", period);
startActivityForResult(i,REQUEST_CODE); 
```

谁能帮我找出问题

# javascript - Javascript - 如何更新元素内部 html？

> ID：16074911
> 
> 赞同：0
> 
> 时间：2013-04-18T05:08:33.397
> 
> 标签：javascript, jquery, html

我有这样的事情：

```
var stopwatch = function (item) {
   window.setInterval(function () {
                item.innerHtml = myInteger++;
        }, 1000);
} 
```

此代码应该显示`myInteger`，但它没有更新`item`. 为什么（`item`里面是一个带有文本的div）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T05:14:30.523

可能有很多原因（我们需要查看更多代码），但这里有一个工作示例：

```
var myInteger = 1,
stopwatch = function (item) {
    window.setInterval(function () {
        item.innerHTML = myInteger++;
    }, 1000);
}
stopwatch(document.querySelector('div')); 
```

重要变化：

*   打电话`stopwatch`（你可能会这样做）
*   `- innerHtml` `+innerHTML`（案件很重要）。设置不会出错`innerHtml`；它会设置该属性，你不会注意到任何东西。
*   初始化`myInteger`.

[http://jsfiddle.net/Q4krM/](http://jsfiddle.net/Q4krM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:16:26.393

试试这个代码：

```
var stopwatch = setInterval(function (item) {
    item.innerHtml = myInteger++;
}, 1000); 
```

这应该工作

# javascript - 如何在 D3 中导入 json 数据？

> ID：16074914
> 
> 赞同：4
> 
> 时间：2013-04-18T05:08:50.647
> 
> 标签：javascript, json, d3.js

如何在 D3 中导入 json 文件？

我做了`d3.json("temp.json");`

但是我如何在进一步的代码中访问这个数据集？

到目前为止，我已经尝试过：

```
var data=d3.json("temp.json"); 
```

但是使用 .data(data) 在其余代码中不起作用。例如，这里

```
var rows = g.selectAll("g.row")
.data(data)
.enter().append("g")
.attr({
  "class": "row",
  "transform": function(d, i) {
    var tx = 170 + i * squareWidth;
    var ty = 150;
    return "translate(" + [tx, ty] + ")"
  }
}); 
```

它无法访问数据。我将 json 复制粘贴到变量中，它工作正常。所以数据本身没有问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T05:23:51.713

该函数[`d3.json()`](https://github.com/mbostock/d3/wiki/Requests#wiki-d3_json)是异步的。`data`因此，在读取变量之前，您必须等待接收到数据。这就是为什么在处理异步数据时，做法是在`d3.json()`函数 内部做所有事情

```
d3.json("temp.json", function(error, data){
    //use data here
})
// do not use data anymore 
```

# html - 让 div 充当框架

> ID：16074921
> 
> 赞同：3
> 
> 时间：2013-04-18T05:09:15.930
> 
> 标签：html, css

我有以下 HTML 组。

```
<div id="item-groups">
<!-- Section to select product types -->

<div class="item-group-button">
<!-- Item Group Selection Button -->
<h3>Beverage</h3>
</div>
<div class="item-group-button">
<!-- Item Group Selection Button -->
<h3>Tobacco</h3>
</div>
</div> 
```

我为上述元素设计了以下 CSS ..

```
#item-groups{
height: 75px;

}

.item-group-button{
    width:130px;
    height:40px;
    float:left;
    margin:17px 0px 0px 20px;
    border-radius:10px;
    background:#4e5154;
}

.item-group-button h3{
    padding:0px;
    margin:8px 0px 0px 29px;
    color:white;
} 
```

如何设计 CSS 以便 item-groups div 可以充当框架。稍微解释一下，item-group-buttons 是从数据库加载的，元素的数量取决于数据库记录的数量。当元素超过一定限度时，多余的元素就会失序。我怎样才能阻止这个？我经历了一种方法，使其他元素位置绝对，然后所需的元素可以充当框架。但就我而言，这是不可能的。

我尝试删除 item-groups 元素的宽度限制，但没有用！

更新：

![按钮更少](https://i.stack.imgur.com/BwZr3.png)

![有更多按钮](https://i.stack.imgur.com/rN5De.png)

如您所见，第一张图像显示正确，但第二张图像显示按钮越多，其他元素就会乱序。我怎样才能解决这个问题。我希望按钮粘在一行而不是转到第二行。

使用html框架时，当有更多的元素要显示时，会有一个滚动条！如何在 Div 中使用该功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:38:56.140

这是一个简单的 CSS 技巧，可以使用以下代码完成。

对于父元素：

```
#item-groups{
height: 80px;
width: inherit;
overflow-x: scroll; <-- Make the scrolling horizontal
white-space: nowrap; <-- Handle the white space in the element 
} 
```

对于子元素：

```
.item-group-button{
width: 130px;
height: 40px;
margin: 17px 0px 0px 20px;
border-radius: 10px;
background: #4e5154;
    display: inline-block; <-- this will display the excess elements in a line
} 
```

从子元素中删除浮动是必要的。

谢谢你们的努力！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:04:53.190

要获得滚动条，您可以`overflow-x: scroll;`在容器上使用，它允许其中的元素扩展超出其边界，并在发生这种情况时创建滚动条。

我想指出，对于菜单，这可能不是最佳选择。滚动条不能很好地与设计相吻合。我看到两种选择：

1.  如果容器无法容纳按钮，请重新调整按钮大小。基本上，您将定义`max-width:`属性，并给它们一个百分比`width:`，因此所有按钮看起来都很正常，直到溢出。显然，这可能是标签的问题。您可能需要对`overflow-x: hidden;`标签文本进行处理以使其看起来正确。或者试试。. .

2.  Create your own scrolling. If you are comfortable with a little JavaScript, you can use `overflow-x: hidden;` and `position: relative;` on the container, then have a "slider" inside of it that holds the buttons, and has `position: absolute;`. Then, on either end of the container would be hover-buttons, that would trigger JS to adjust the position of the slider, thus scrolling. This will only work if JS is enabled, though you can simply fall back to the `overflow-x: scroll;` method in such a case. The advantage here is that everything looks nice and uniform.

我通常会尽量避免使用强制滚动条，因为每个操作系统/浏览器都会以非常不同的方式呈现它们。现在您*可以*设置滚动条的样式，因为 CSS3 提供了许多伪元素来处理它们。不幸的是，浏览器支持很粗略，并且需要特殊的浏览器特定代码，这意味着它确实不是一个很好的选择。

# ios - iOS Dropbox SDK 加载缩略图和文件夹内的文件数

> ID：16074922
> 
> 赞同：1
> 
> 时间：2013-04-18T05:09:19.883
> 
> 标签：ios, dropbox, dropbox-api

大家好，我正在开发一个应用程序，它可以从任何内容管理系统中调出整个文件夹和文件结构，目前我已经完成了 Box 和 sharepoint 集成。我现在正在寻找同步 Dropbox。在 DBMetaData 类中，我有属性

```
BOOL thumbnailExists;
NSArray* contents;
NSString* icon; 
```

1.  我想在这里做的第一件事是我想加载文件的缩略图，我没有得到一个图标属性返回一个字符串的东西，比如'page_white_acrobat'（我认为它会返回一个 url 或者我可以下载的东西缩略图）。有什么方法可以使用 Dropbox sdk 带来缩略图。我还上传了一个 .mp4 文件和 .png 文件，当我在 chrome 中打开保管箱时它们会显示缩略图，但在 SDK 中 thumbnailExists 属性返回 NO。

2.  其次，我想要子文件夹的数量和文件夹的文件，我尝试访问文件夹 DBMetaData 对象的内容属性，它返回 nil。SDK中是否有任何方法可以计算文件夹中的文件数量或任何解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T16:30:38.410

1.  似乎 Dropbox 只是提供了他们使用的图标的名称。你不能下载它，所以你应该检查这个字符串并使用你的应用程序包中的资源。

2.  DBMetadata 对象的内容将为空，直到您实际请求在该路径加载元数据。

此代码将使您开始使用子目录。

```
-(void)restClient:(DBRestClient *)client loadedMetadata:(DBMetadata *)metadata
{
    // LOAD METADATA OF SUBDIRECTORIES
    for (DBMetadata *node in metadata.contents) {
        if (node.isDirectory) {
            [_restClient loadMetadata: node.path];
        }
    }

    // GET COUNT OF DIRECTORY CONTENTS
    if (metadata.isDirectory) {
        NSLog(@"%@ contains %d files and folders", metadata.path, metadata.contents.count);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-09T00:07:24.543

要列出路径或目录的内容，您需要调用 DBRESTClient 对象的以下方法：

```
 - (void)loadMetadata:(NSString*)path; 
```

然后调用以下委托回调（请参阅方法主体的代码以下载列出目录中每个文件的缩略图）：

```
 - (void)restClient:(DBRestClient*)client loadedMetadata:(DBMetadata*)metadata
 {
     for (DBMetadata *file in metadata.contents)
     {
         // 1\. Use the DBMetadata * file object to do things like: add a table-view cell for the file.
         [self.filesListView addCellForFile: file];
         // 2\. Request thumbnail for each file
         NSString *localThumbnailPath = [self localThumbnailPathForFile: file]; // create a local-file-path for the thumbnail
         [dbRestClient loadThumbnail: file.path ofSize:@"l" intoPath:localThumbnailPath];
     }
 } 
```

在上述方法中， loadThumbnail:ofSize:intoPath: 方法将导致调用以下委托回调：

```
 - (void)restClient:(DBRestClient*)client loadedThumbnail:(NSString*)localPath 
```

从中，您必须使用给定的 localPath 来使用下载的缩略图更新您的 UI。

# ruby - Ruby CSV 枚举混淆

> ID：16074923
> 
> 赞同：0
> 
> 时间：2013-04-18T05:09:35.500
> 
> 标签：ruby, csv

这怎么行不通？CSV 在那里并且有值，我在顶部有“需要“csv”和时间，那里很好。问题似乎与`csv.each`实际做任何事情有关。

它返回

```
=> [] is the most common registration hour

=> [] is the most common registration day   (Sunday being 0, Mon => 1 ... Sat => 7) 
```

如果我可以提供更多信息，请告诉我。

```
@x = CSV.open \
'event_attendees.csv', headers: true, header_converters: :symbol

def time_target
y = []
@x.each do |line|
    if line[:regdate].to_s.length > 0
        y << DateTime.strptime(line[:regdate], "%m/%d/%y %H:%M").hour
        y = y.sort_by {|i| grep(i).length }.last
    end
end
puts "#{y} is the most common registration hour"
y = []
@x.each do |line|
    if line[:regdate].to_s.length > 0
        y << DateTime.strptime(line[:regdate], "%m/%d/%y %H:%M").wday
        y = y.sort_by {|i| grep(i).length }.last
    end
end
puts "#{y} is the most common registration day \
(Sunday being 0, Mon => 1 ... Sat => 7)"
end 
```

制作所有 'y's '@y's 并没有修复它。

这是我正在使用的 CSV 示例：

> ,RegDate,first_Name,last_Name,Email_Address,HomePhone,街道,城市,州,邮政编码
> 
> 1,11/12/08 10:47,Allison,Nguyen,arannon@jumpstartlab.com,6154385000,3155 19th St NW,Washington,DC,20010
> 
> 2,11/12/08 13:23,SArah,Hankins,pinalevitsky@jumpstartlab.com,414-520-5000,2022 15th Street NW,Washington,DC,20009
> 
> 3,11/12/08 13:30,Sarah,Xx,lqrm4462@jumpstartlab.com,(941)979-2000,4175 3rd Street North,Saint Petersburg,FL,33703

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:46:28.340

试试这个来加载你的数据：

```
def database_load(arg='event_attendees.csv')
  @contents = CSV.open(arg, headers: true, header_converters: :symbol)
  @people = []
  @contents.each do |row|
    person = {}
    person["id"] = row[0]
    person["regdate"] = row[:regdate]
    person["first_name"] = row[:first_name].downcase.capitalize
    person["last_name"] = row[:last_name].downcase.capitalize
    person["email_address"] = row[:email_address]
    person["homephone"] = PhoneNumber.new(row[:homephone].to_s)
    person["street"] = row[:street]
    person["city"] = City.new(row[:city]).clean
    person["state"] = row[:state]
    person["zipcode"] = Zipcode.new(row[:zipcode]).clean
    @people << person
  end
  puts "Loaded #{@people.count} Records from file: '#{arg}'..."
end 
```

# php - 如何使用 WGET 或 Perl 下载使用 PHP/JavaScript 内容编码的 HTML

> ID：16074924
> 
> 赞同：0
> 
> 时间：2013-04-18T05:09:36.787
> 
> 标签：php, html, perl, unix, wget

我有一个要下载和解析的 URL：

```
http://diana.cslab.ece.ntua.gr/micro-CDS/index.php?r=search/results_mature&mir=hsa-miR-3131&kwd=MIMAT0014996 
```

问题是当我通过`wget`以下方式使用 unix 下载时：

```
$ wget [the above url] 
```

它给了我与我在浏览器上看到的内容不同的内容（即，基因列表不存在）。

以编程方式执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:21:10.757

我刚刚使用 PHP 进行了测试，并将其与基因列表一起拉出来就好了

```
<?php
echo file_get_contents('http://diana.cslab.ece.ntua.gr/micro-CDS/index.php?r=search/results_mature&mir=hsa-miR-3131&kwd=MIMAT0014996');
?> 
```

你有访问 PHP 的权限吗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:21:29.920

```
#/usr/bin/perl

use WWW::Mechanize;
use strict;
use warnings;

my $url = "http://diana.cslab.ece.ntua.gr/micro-CDS/index.php?r=search/results_mature&mir=hsa-miR-3131&kwd=MIMAT0014996";

my $mech = WWW::Mechanize->new();
$mech->agent_alias("Windows IE 6");

$mech->get($url);
#now you have access to the HTML code via $mech->content(); 
```

强烈建议处理 HTML 代码`use HTML::TreeBuilder::XPath`（或其他 HTML 解析模块）

# iphone - Facebook：获取特定日期的 Facebook 消息？

> ID：16074926
> 
> 赞同：1
> 
> 时间：2013-04-18T05:09:56.840
> 
> 标签：iphone, ios, facebook, facebook-graph-api, facebook-fql

我想获取 facebook 的消息而不是**Feeds**。我已经搜索过它，但没有找到解决方案。

我也同样研究了 FQL，但没有找到任何有用的东西。

是否可以从 facebook 获取特定日期的消息？或者只是消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T10:24:48.127

您可能会在特定时间使用 fql API 在线程（会话会话）顶部获得最新的 facebook 消息，例如

```
SELECT snippet, recent_authors, updated_time FROM thread WHERE folder_id = 0 AND updated_time=1364564697 
```

此外，您可能会在特定时间使用线程内的 API 收到 Facebook 消息。如

```
SELECT body, created_time FROM message WHERE thread_id=1774741570083 AND created_time=1348806942 
```

> 对于你的问题。是的。可以按特定日期从所有收件箱消息中获取 facebook 消息（按日期，而不是按时间，根据您的要求）。**例如，获取从“Thu Aug 23 00:00:00 GMT+0800 (MYT)”到“Fri Aug 24 00:00:00 GMT+0800 (MYT)”的**所有收件箱消息

 **```
SELECT body, created_time FROM message WHERE thread_id IN (SELECT thread_id FROM thread WHERE folder_id = 0) AND (created_time>=1345651200 AND created_time<1345737600) 
```

> **更新**：
> 
> 要检索发件人姓名和个人资料照片，您可以执行

```
{"query1":"SELECT author_id, body, created_time FROM message WHERE thread_id IN (SELECT thread_id FROM thread WHERE folder_id = 0) AND (created_time>=1345651200 AND created_time<1345737600)","query2":"SELECT id, name, pic_square FROM profile WHERE id IN (SELECT author_id FROM #query1)"} 
```

> **更新**： **HTTP GET 请求**示例，引用 fql 查询，附加到
> 
> [https://graph.facebook.com/fql?format=json&q=](https://graph.facebook.com/fql?format=json&q=)
> 
> 之后，在末尾附加**&access_token=YOUR_USER_ACCESS_TOKEN**：
> 
> [https://graph.facebook.com/fql?format=json&q=%7B%22query1%22%3A%22SELECT+author_id%2C+body%2C+created_time+FROM+message+WHERE+thread_id+IN+%28SELECT+thread_id +FROM+线程+WHERE+folder_id+%3D+0%29+AND+%28created_time%3E%3D1345651200+AND+created_time%3C1345737600%29%22%2C%22query2%22%3A%22SELECT+id%2C+name%2C +pic_square+FROM+profile+WHERE+id+IN+%28SELECT+author_id+FROM+%23query1%29%22%7D&access_token=](https://graph.facebook.com/fql?format=json&q=%7B%22query1%22%3A%22SELECT+author_id%2C+body%2C+created_time+FROM+message+WHERE+thread_id+IN+%28SELECT+thread_id+FROM+thread+WHERE+folder_id+%3D+0%29+AND+%28created_time%3E%3D1345651200+AND+created_time%3C1345737600%29%22%2C%22query2%22%3A%22SELECT+id%2C+name%2C+pic_square+FROM+profile+WHERE+id+IN+%28SELECT+author_id+FROM+%23query1%29%22%7D&access_token=) **ACCESS_TOKEN****

# google-chrome - 每个文件名后的 Chrome 开发者工具编号？

> ID：16074927
> 
> 赞同：0
> 
> 时间：2013-04-18T05:09:58.933
> 
> 标签：google-chrome, numbers, google-chrome-devtools

![在此处输入图像描述](https://i.stack.imgur.com/cNMQE.jpg)

我正在使用开发人员工具调试我的网站，如果您参考我的图像，则有 2 个styles.css 相互覆盖。

不过这很奇怪，因为我记得我只附加了一个 style.css 文件，但它却显示了 2 个 style.css。我已经检查了位置，但正是指向具有相同 css 文件的相同路径（但 css 的内容不同。）

我能发现的唯一区别是 Devtools 显示的 css 文件名后面的数字

```
style.css:839
style.css:190 
```

它实际上意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:30:31.450

它是文件（style.css）中存在的选择器的行号。在第 190 行，您为选择器添加了样式（提供的支持）。在同一个文件中，您在第 839 行为同一个选择器添加了样式

看看 Chrome 开发工具，它有更多功能：[参考这个链接](https://developers.google.com/chrome-developer-tools/docs/elements-styles)

# jsp - 道场和春天

> ID：16074935
> 
> 赞同：0
> 
> 时间：2013-04-18T05:11:10.610
> 
> 标签：jsp, servlets, spring-mvc, dojo

我创建了一个**JSP**，我通过它调用**Dojo**对话（单击按钮）。

但是对话的代码，即

```
<div>
................... 
</div> 
```

存在于同一页面上。

因此，我无法在 JSP 和 Dojo 对话之间**插入控制器**（Servlet）。

请建议一种在 Dojo 对话和 JSP 之间插入控制器的便捷方法。

谢谢 Vishal Saxena

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:09:25.023

然后我想您想使用该`href`属性（然后它将从外部页面-> JSP 加载对话框中的内容）。

示例代码：

```
<div data-dojo-type="dijit/Dialog" title="My external dialog" href="yourJsp.html">
    ....
</div> 
```

这是你的意思吗？

**编辑**：在您的控制器中，您将其映射为：

```
@Controller
public class MainController {

        @RequestMapping(value = "/yourJsp.html")
        public String getDialog(ModelMap model) {
                ... // Do your stuff
        }
} 
```

# iphone - Webview 在 iPhone sdk 中显示一个 HTML 文件

> ID：16074939
> 
> 赞同：0
> 
> 时间：2013-04-18T05:11:26.660
> 
> 标签：iphone, html, ios, uiwebview

我的本地资源包中有三个 HTML 文件。我需要将其显示为读者。所以我使用网络视图来显示使用以下代码，

```
- (void)viewDidLoad
{
     [super viewDidLoad];
     totalArray=[[NSMutableArray alloc]init];
     [totalArray addObject:@"file1"];
[totalArray addObject:@"file2"];
[totalArray addObject:@"file3"];
    NSLog(@"totalArray count:%d",[totalArray count]);

    for (int i=0;i<3;i++)
{
    NSLog(@"i count:%d",i);

   NSString *bundlePath = [[NSBundle mainBundle] bundlePath];
       NSURL *bundleBaseURL = [NSURL fileURLWithPath: bundlePath];
       NSLog(@"webview %@", bundlePath);
   NSString *filePath1= [[NSBundle mainBundle] pathForResource:[totalArray objectAtIndex:i] ofType:@"html"];
       NSLog(@"filePath1:%@",filePath1);
       [htmlView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:filePath1]]];
    }
} 
```

总计数为 3，当前索引计数和文件路径。但它仍然只显示我的第一个 html 文件。我的另外两个文件丢失了。这里可能是什么问题？请帮助我。感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:46:07.987

对于本地文件 url，您必须`fileURLWithPath:`使用`NSURL`. `[[NSBundle mainBundle] URLForResource: withExtension:]`此外，您可以使用方法从捆绑包中获取文件 url 。此外，我认为在循环中加载 url 不是一个好主意，您应该尝试其他方法，例如在按钮操作上加载 url。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T06:23:02.383

您需要等到文件加载完毕，循环不是好主意，相反，您可以使用下面的代码实现相同的目的。使用 fileURLWithPath 加载本地文件。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    count = 0;
    totalArray=[[NSMutableArray alloc]init];
    [totalArray addObject:@"file1"];
    [totalArray addObject:@"file2"];
    [totalArray addObject:@"file3"];      
    [_htmlView setDelegate:self];
    NSString *filePath1= [[NSBundle mainBundle] pathForResource:[totalArray objectAtIndex:count] ofType:@"html"];
    NSURL *url = [NSURL fileURLWithPath:filePath1];
    [_htmlView loadRequest:[NSURLRequest requestWithURL:url]];

}

- (void)webViewDidFinishLoad:(UIWebView *)webView{
    count++;
    if (count < 3) {

        NSString *filePath1= [[NSBundle mainBundle] pathForResource:[totalArray objectAtIndex:count]
                                                             ofType:@"html"];
        NSLog(@"filePath1:%@",filePath1);
        NSURL *url = [NSURL fileURLWithPath:filePath1];
        [_htmlView loadRequest:[NSURLRequest requestWithURL:url]];
    }

} 
```

# php - Facebook api php 获取我被标记的朋友照片

> ID：16074943
> 
> 赞同：4
> 
> 时间：2013-04-18T05:11:34.000
> 
> 标签：php, facebook, api

我想获取标记了我的特定朋友照片，以及标记了同一位朋友的照片。我正在使用 fql，类似这样的东西，其中 $_POST[friend_id] 以前是从带有我所有列出的朋友：

```
$facebook_login = "0";
$user = $facebook->getUser();
$perms = array('scope' => 'email,user_photos,read_mailbox');

if ($user) {
  try {
    $user_profile = $facebook->api('/me');
$facebook_login = "1";
  } catch (FacebookApiException $e) {
    $user = null;
  }

} else {
    die('<script>top.location.href="'.$facebook->getLoginUrl($perms).'";</script>');
}

//friend photos that I'm tagged in
$query = "SELECT id FROM photo WHERE from = $_POST[friend_id] AND tags IN ($user)";
$result = $facebook->api(array(
  'method' => 'fql.query',
  'query' => $query,
));

echo sprintf('<pre>%s</pre>', print_r($result,TRUE));

//my photos with my friend tagged in
$query = "SELECT id FROM photo WHERE from = $user AND tags IN ($_POST[friend_id])";
$result = $facebook->api(array(
  'method' => 'fql.query',
  'query' => $query,
));

echo sprintf('<pre>%s</pre>', print_r($result,TRUE)); 
```

我可以这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T00:09:39.060

Try the following queries:

To get your friend's photos where you're tagged:

```
$friend_id = $_POST['friend_id'];
$query = "SELECT object_id 
          FROM photo 
          WHERE owner=$friend_id AND 
                object_id IN (SELECT object_id FROM photo_tag WHERE subject=me())"; 
```

Your photos where your friend is tagged:

```
$query = "SELECT object_id 
          FROM photo 
          WHERE owner=me() AND 
                object_id IN (SELECT object_id FROM photo_tag WHERE subject=$friend_id)"; 
```

# javascript - 如何为 windows phone 创建 .XAP 扩展文件

> ID：16074947
> 
> 赞同：2
> 
> 时间：2013-04-18T05:12:02.050
> 
> 标签：javascript, windows-phone-7, cordova, windows-phone-8

我使用 phoneGap 创建了一个新的 Windows 8 JavaScript 项目，

我的问题是如何在 Bin 文件夹中获取 .XAP 扩展文件，因为这是在 Windows 设备上运行我的应用程序所必需的。

还告诉我一件事，还有其他解决方案可以制作这个 .XAP 扩展文件。由于使用 javascript，我没有得到 .XAP 扩展文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:32:04.453

首先，您需要检查您是否已针对[windows 8](http://docs.phonegap.com/en/2.2.0/guide_getting-started_windows-8_index.md.html#Getting%20Started%20with%20Windows%208)或[windows phone 8](http://docs.phonegap.com/en/2.2.0/guide_getting-started_windows-phone_index.md.html#Getting%20Started%20with%20Windows%20Phone)进行了配置。

如果您将它编译为 Windows Phone 项目，那么您可以从您的项目中获取 XAP。Bin>>调试>>你的项目.XAP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:26:20.373

您必须使用 Visual Studio 将其编译为 Windows Phone 项目。或者使用 Adob​​e PhoneGap Build 服务，它允许您将代码作为 zip 文件发送到“云”。他们将构建您的应用程序，返回 IPA、APK、XAP 和其他原生包。

# c++ - WinHttpCrackUrl 中的错误 12006

> ID：16074949
> 
> 赞同：-2
> 
> 时间：2013-04-18T05:12:33.803
> 
> 标签：c++, dll, winhttp

我正在尝试从变量构建地址。所以我可以将它传递给`WinHttpOpenRequest`.

```
 char *uNameAddr = (char*) ExeBaseAddress + 0x34F01C;
    printf("%s \n", uNameAddr);

    string url = "http://xxxx.xxxx.com/xxxx/?u=";
    string username = uNameAddr;

    string combine = url + username;

    cout << combine << endl;
    //http://xxxx.xxxx.com/xxxx/?u=MyUsername <--

    URL_COMPONENTS urlComp;
    LPCWSTR pwszUrl1 = (LPCWSTR)combine.c_str();
    DWORD dwUrlLen = 0; 
```

然后我必须在这里传递它：

```
hRequest = WinHttpOpenRequest( hConnect, L"GET", urlComp.lpszUrlPath,
                               NULL, WINHTTP_NO_REFERER,
                               WINHTTP_DEFAULT_ACCEPT_TYPES,
                               0); 
```

`urlComp.lpszUrlPath`应该`http://xxxx.xxxx.com/xxxx/?u=MyUsername`

有什么建议吗？我的应用程序在处理该部分时崩溃。

* * *

错误

```
 12006       ERROR_INTERNET_UNRECOGNIZED_SCHEME
             The URL scheme could not be recognized or is not supported. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:47:33.793

```
LPCWSTR pwszUrl1 = (LPCWSTR)combine.c_str(); 
```

`std::string::c_str`返回`const char *`。[`LPCWSTR`是`const wchar_t *`](http://msdn.microsoft.com/en-us/library/cc230352.aspx)。

转换为`LPCWSTR`对编译器和你自己撒谎，`combine.c_str()`返回的**不是**指向宽字符串的指针。

`std::wstring`使用表示宽字符串可能会取得更好的成功。

考虑阅读[Windows API 中的 Unicode 以](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374089%28v=vs.85%29.aspx)获取更多信息。

# mysql - MySQL #1243 给 EXECUTE 的未知准备好的语句处理程序 (stmt)

> ID：16074952
> 
> 赞同：6
> 
> 时间：2013-04-18T05:12:55.760
> 
> 标签：mysql, sql

我在我安装的 MySQL 版本上遵循本[教程，但它给我一个错误：](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html)

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(IF(property_name = ''',
      property_name,
      ''', value, NULL)) AS ',
      property_name
    )
  ) INTO @sql
FROM
  properties;
SET @sql = CONCAT('SELECT item_id, ', @sql, ' FROM properties GROUP BY item_id');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

我将它粘贴到 phpMyAdmin 的 SQL 编辑器上。

我听从了建议。没有显示错误，但结果如下：

```
SELECT item_id
,MAX(IF(property_name = 'color', value, NULL)) AS color
,MAX(IF(property_name = 'size', value, NULL)) AS size
,MAX(IF(property_name = 'weight', value, NULL)) AS weight 
FROM properties GROUP BY item_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T21:31:23.953

如果您可以访问 MySQL 命令行，我想您会发现您的 SQL 代码很好（只要`@sql`不等于`NULL`），问题出在 phpMyAdmin 上。另一个想法是将代码包装在一个存储过程中，然后`CALL`是该过程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-14T23:02:49.880

`DEALLOCATE PREPARE stmt;`在查询运行之前，您需要从查询中删除。

`DEALLOCATE`在它有机会运行之前取消该语句。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-23T06:26:23.640

[在MySQL Workbench](https://www.mysql.com/products/workbench/)中试试这个。我在 phpMyAdmin 中遇到了同样的问题，我在 Workbench 中尝试过，它工作正常。

# python - 带有递归的井字游戏（Python）

> ID：16074953
> 
> 赞同：0
> 
> 时间：2013-04-18T05:12:57.613
> 
> 标签：python, recursion, tic-tac-toe

我不知道如何将这些功能结合在一起以形成一个硬人工智能，它永远不会输。我应该以某种形式或方式使用递归，并且这些函数名称和合同是预先编写的，我填写了实际定义。后来用谷歌搜索了很多，我找不到任何相关的东西。有什么想法吗？

```
"""

State S2 is a *successor* of state S1 if S2 can be the the
next state after S1 in a legal game of tic tac toe.

safe: state -> Bool
successor: state x state -> Bool

1\. If S is over, then S is safe if 'x' does not have 3 in a row in S.
2\. If it is o's move in S, then S is safe iff at least one successor of S is safe.
3\. If it is x's move in S, then S is safe iff all successors of S are safe.

A *stateList* is a list of states. 
"""

# safe: state-> Bool
#
# A state S is *safe* if player 'o' can force a win or tie from S.

def safe(S):
    if over(S): return not threeInRow('x',S)
    if turn(S)=='o': return someSafeSuccessor(S)
    if turn(S)=='x': return allSafeSuccessors(S)

def threeInRow(p,S):
    if p == 'x':
        if all(t in S[0] for t in (1,2,3)):
            return True
        elif all(t in S[0] for t in (4,5,6)):
            return True
        elif all(t in S[0] for t in (7,8,9)):
            return True
        elif all(t in S[0] for t in (1,4,7)):
            return True
        elif all(t in S[0] for t in (2,5,8)):
            return True
        elif all(t in S[0] for t in (3,6,9)):
            return True
        elif all(t in S[0] for t in (1,5,9)):
            return True
        elif all(t in S[0] for t in (3,5,7)):
            return True
    else:
        if all(t in S[1] for t in (1,2,3)):
            return True
        elif all(t in S[1] for t in (4,5,6)):
            return True
        elif all(t in S[1] for t in (7,8,9)):
            return True
        elif all(t in S[1] for t in (1,4,7)):
            return True
        elif all(t in S[1] for t in (2,5,8)):
            return True
        elif all(t in S[1] for t in (3,6,9)):
            return True
        elif all(t in S[1] for t in (1,5,9)):
            return True
        elif all(t in S[1] for t in (3,5,7)):
            return True

# someSafeSuccessor: state -> Bool
#
# If S is a state, someSafeSuccessor(S) means that S has
# at least one safe successor.

def someSafeSuccessor(S):
    flag = False
    # flag means we have found a safe successor
    for x in successors(S):
        if safe(x): flag = True
    return flag

# allSafeSuccessors: state -> Bool
#
# If S is a state, allSafeSuccessors(S) means that every
# successor of S is safe.
def allSafeSuccessors(S):
  flag = True
  for x in successors(S):
    if not safe(x): flag = False
  return flag    

# successors: state -> stateList
#
# successors(S) is a list whose members are all of the successors of S.
def successors(S):
  stateList=[]
  for i in range(1,10):
    if empty(i,S):
      stateList.extend(S[0],S[1]+[i])
  return stateList 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:26:00.967

跟进我的评论。

在描述 minimax（/alpha-beta 修剪）算法时可视化的树不是“真正的树”，因为您在内存中构建了整个树。它是一棵概念树，首先测试每个移动深度的结果，记下每个叶子（alpha、beta 等）的分数并将它们向上传播。

注意这句话，深度优先。这意味着您的递归 minimax-implementing 函数首先调用它自己可以做的第一步。首先是它可以采取的第一步调用自己。依此类推，直到达到最大深度或最终移动，然后返回。您可以通过这个逻辑看到，除了现在正在考虑的单个移动链之外，您在内存或任何外部存储中永远不会有更多的板（并且，在每个级别，您将遍历可能的移动列表）它 - 所以还有关于你有多远的记忆等）。

tl;dr 通过进行深度优先的极小极大递归，除了单个递归函数之外，您不会创建任何新函数。

# bash - Bash：根据一些分隔符拆分字符串并将每个分隔符存储在一个变量中

> ID：16074954
> 
> 赞同：2
> 
> 时间：2013-04-18T05:12:58.347
> 
> 标签：bash, shell, scripting, sed, awk

```
113050050/CS101/mysql_java.pdf

```

以上是我的字符串，它存储在变量'line'中

```
line="113050050/CS101/mysql_java.pdf" 
```

现在我想`$line`根据分隔符拆分`/`并将每个单独的部分存储在一个变量中

```
var1=113050050
var2=CS101
var3=mysql_java.pdf 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T05:27:51.863

```
$ IFS=/ read var1 var2 var3 <<< "$line" 
```

结果

```
$ echo $var1
113050050

$ echo $var2
CS101

$ echo $var3
mysql_java.pdf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:42:45.500

这可能对您有用：

```
line="113050050/CS101/mysql_java.pdf"
var=(${line//\// })
var1=${var[0]}
var2=${var[1]}
var3=${var[2]} 
```

正如@chepner 指出的那样，如果`$line`变量中存在空格，这将失败，也许更安全的解决方案是使用`IFS`变量：

```
line="113050050/CS101/mysql_java.pdf" O="$IFS" IFS='/' var=($line) IFS="$O" 
```

# javascript - 继承自 javascript 中的 DOM Element 对象！这段代码有什么问题？

> ID：16074956
> 
> 赞同：3
> 
> 时间：2013-04-18T05:13:01.993
> 
> 标签：javascript, dom, element, prototypal-inheritance

我正在尝试从 DOM Element 对象继承，当我创建对象时所有代码都运行良好，但是当我尝试调用 appendChild() 方法时，它给出了一个错误消息：

```
MyObject doesn't have an appendChild method 
```

这是我的代码：

```
var content=document.createTextNode("This was dynamically created");
function MyObject(tagName){
    Element.constructor.call(this,tagName);
    this.prototype=Element.prototype;
    this.prototype=Object.defineProperties(this.prototype,{
       newMethod:function(){
       //dosomething

       }
    });
}
var newObj=new MyObject("div");
newObj.appendChild(content); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T05:49:50.617

尽管您做错了*（稍后会详细介绍）*，但您最终还是试图传递一个继承自 DOM 元素而不是 DOM 元素本身的对象。这是不允许的。

看起来它应该可以工作，但是 DOM 元素和 DOM 方法是宿主对象。它们不会按照您对本机对象所期望的所有相同规则进行操作。该`.appendChild()`方法需要一个元素，而不是别的。所以你试图做的事情是行不通的。

* * *

关于您的继承方法，这是完全不正确的。您不会修改`.prototype`正在创建的新对象的属性。您修改`.prototype`构造函数的。它只完成一次，然后从构造函数创建的所有新对象都继承自分配给该构造函数`.prototype`属性的对象。

因为没有继承方式，所以没有`.appendChild()`方法。下面的代码修复了它，但由于上面给出的原因，它仍然无法工作。

```
function MyObject(tagName){
    Element.call(this, tagName);
}

MyObject.prototype=Object.create(Element.prototype);

Object.defineProperties(MyObject.prototype,{
   newMethod: {
       value:function(){
           //dosomething
       }
   }
}); 
```

您的属性描述符语法也错误，所以我修复了它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T08:02:48.743

这是因为调用 Element 的构造函数并不会创建 DOM Element 对象的实例，而是尝试设置由 DOM Element 对象的构造函数设置的属性，例如

```
function MyObject(tagName){
Element.constructor.call(this, tagName);
}
var newObj=new MyObject("div"); 
```

不会创建`tagName`类似于我们创建 DOM Element 对象实例时可用的属性，并且

```
alert("Tag Name is set to "+newObj.tagName); 
```

将显示

```
Tag Name is set to undefined 
```

因为构造函数试图设置它但它不能因为没有`tagName`属性但是如果我`Element.constructor.call(this, tagName);`用`document.createElement(tagName)`你替换会得到结果

```
Tag Name is set to DIV 
```

# android - 在android中没有得到完整的http响应

> ID：16074959
> 
> 赞同：2
> 
> 时间：2013-04-18T05:13:22.043
> 
> 标签：android

我正在尝试从 ulr 获取 json 数据。

我正在 Firefox 海报插件中测试 url 工作正常，得到充分响应。

但是在**android 中没有得到完整的 http 响应。**

**这是我的代码**

```
HttpClient client = new DefaultHttpClient();
HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); // Timeout
                                                                        // Limit
HttpResponse response;
JSONObject json = new JSONObject();

try {
    HttpPost post = new HttpPost(API.ALL_PROPERTY_BUY);

    /*
     * json.put("fId", fname); json.put("fId", lname);
     */
    StringEntity se = new StringEntity(json.toString());
    se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE,"application/json"));
    post.setEntity(se);
    response = client.execute(post);

    /* Checking response */
    if (response != null) {
        InputStream in = response.getEntity().getContent(); // Get the
                                                            // data in
                                                            // the
                                                            // entity
        // System.out.println("Response is:"+ in.toString());
        InputStreamReader isr = new InputStreamReader(in);
        BufferedReader br = new BufferedReader(isr);

        String s = new String();
        temps = new String();
        while ((s = br.readLine()) != null) {
            System.out.println("response is :" + s);

        }

    }

} catch (Exception e) {
    e.printStackTrace();

} 
```

我也在从谷歌搜索并尝试代码但没有解决我的问题。

请任何人帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:33:14.017

尝试这个...

```
 StringBuffer stringBuffer = new StringBuffer();
            while ((s = br.readLine()) != null) {
                stringBuffer.append(s);
            }

 System.out.println("response is :" + stringBuffer); 
```

有时它不会在控制台上打印完整响应，但您会在变量中得到完整响应......

**解决方案：Logcat 或控制台上未显示完整数据**

# msbuild - msbuild 复制到项目元数据中定义的多个位置

> ID：16074966
> 
> 赞同：1
> 
> 时间：2013-04-18T05:14:02.077
> 
> 标签：msbuild, metadata

我有一个带有元数据的项目，我想复制以执行一些操作，结果发生在多个位置，例如，我想将文件复制到多个位置：

```
<ItemGroup>
  <MyItem Include="myFile.txt">
   <Out>c:\blah;c:\test</Out>
  </MyItem>
</ItemGroup> 
```

如果它们不存在，我将如何设置目标来创建 c:\blah 和 c:\test，然后将 myFile.txt 复制到 c:\blah\myFile.txt 和 c:\test\myFile.txt

如果我想在清理期间清理它们，我还想获取完整输出路径的列表（c:\blah\myFile.txt 和 c:\test\myFile.txt）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:36:54.957

如果您不想更改 ItemGroup 的结构，则需要处理您有一个嵌套的 ItemGroup（MetaDataElement Out）。因此，您需要将 ItemGroup MyItem 批处理到目标，并且您可以在其中批处理 Out。我做了一个小示例项目：

```
<?xml version="1.0" encoding="utf-8"?> 
<Project DefaultTargets="CopyFiles" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5">
 <ItemGroup>
  <MyItem Include="myFile.txt">
   <Out>c:\blah;c:\test</Out>
  </MyItem>
  <MyItem Include="myFile2.txt">
   <Out>c:\blah2;c:\test2</Out>
  </MyItem>
 </ItemGroup>

 <Target Name="CopyFiles"
      Inputs="%(MyItem.Identity)"
      Outputs="%(MyItem.Identity)\ignore_this.msg">

  <PropertyGroup>
   <File>%(MyItem.Identity)</File>
  </PropertyGroup>

  <ItemGroup>
   <Folders Include="%(MyItem.Out)" />
  </ItemGroup>

  <Message Text="%(Folders.Identity)\$(File)" />    
 </Target>
</Project> 
```

输出将是：

```
Project "D:\TEMP\test.proj" on node 1 (default targets).
CopyFiles:
c:\blah\myFile.txt
c:\test\myFile.txt
CopyFiles:
c:\blah2\myFile2.txt
c:\test2\myFile2.txt
Done Building Project "D:\TEMP\test.proj" (default targets).
Build succeeded.
0 Warning(s)
0 Error(s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:20:45.100

这个怎么样：

```
<Target Name="CopyFiles">

    <!--The item(s)--> 
    <ItemGroup>
      <MyItem Include="myFile.txt"/>
    </ItemGroup>

    <!--The destinations--> 
    <ItemGroup>
      <MyDestination Include="c:\blah"/>
      <MyDestination Include="c:\test"/>
    </ItemGroup>

    <!--The copy--> 
    <Copy SourceFiles="@(MyItem)" DestinationFolder="%(MyDestination.FullPath)" />
    <ItemGroup>
      <FileWrites Include="%(MyDestination.FullPath)\*" />
    </ItemGroup>

    <!--The output -->
    <Message Text="FileWrites: @(FileWrites)" Importance="high"/>

</Target> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:07:49.867

您想要做的是一个名为[MSBuild Batching](http://msdn.microsoft.com/en-us/library/ms171473.aspx)的概念。它允许您将项目列表划分为不同的批次，并将每个批次分别传递到一个任务中。

```
<Target Name="CopyFiles">
    <ItemGroup Label="MyFolders">
    <Folder Include="c:\blah" />
    <Folder Include="C:\test" />
</ItemGroup>
    <Copy SourceFiles="myFile.txt" DestinationFolder="%(Folder.Identity)\">
        <Output TaskParameter="CopiedFiles" ItemName="FilesCopy" />
    </Copy>
</Target> 
```

# python - 吉时利的 PyVISA IV 扫描

> ID：16074969
> 
> 赞同：0
> 
> 时间：2013-04-18T05:14:20.103
> 
> 标签：python, visa, gpib

我正在尝试使用 Keithley 和 PyVISA 进行 IV 曲线测量。我在[Keithley 网站](http://www.keithley.com/support/keidoc_searchresult?keyword=2400&item_type=Example%20Program)上找到了一个 Matlab[示例](http://www.keithley.com/support/data?asset=13157)，但有一个部分我无法理解。

```
% Used the serail poll function to wait for SRQ
val = [1];          % 1st instrument in the gpib object, not the gpib add
spoll(obj1,val);    % keep control until SRQ
fprintf(obj1,':TRAC:DATA?') 
```

这个串行轮询功能究竟是做什么的？`spoll`我在 PyVISA 中没有这个功能，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T00:47:21.410

串行轮询通常在更高级别的驱动程序中实现。只是用 SCPI *STB 重复查询？或等效的总线命令。

PyVISA`read_stb(vi)`调用 VISA 的`viReadSTB(vi)`. 有了它，您可以进行自己的投票。

编辑：

[read_stb](http://pyvisa.sourceforge.net/vpp43.html#read-stb)来自 PyVISA 的低级模块。要使用低级调用，您需要传递从仪器对象获得的[vi字段。](http://pyvisa.sourceforge.net/pyvisa.html#mixing-with-direct-visa-commands)

[这里](http://pyvisa.sourceforge.net/pyvisa.html#a-more-complex-example)有一个很好的示例，但请务必为您的仪器及其状态模型使用适当的 SCPI 命令。

状态轮询取决于在测量开始之前设置的状态和事件寄存器。您可以设置仪器以指示样品可用或测量已完成。

如果总线是 GPIB (IEEE 488.2)，那么 PyVISA 的 wait_for_srq 函数将起作用，因为在 GPIB 上，SRQ 是总线信号之一。示例中也显示了该代码。

# php - 我自己的 SQL 语法错误

> ID：16074971
> 
> 赞同：-2
> 
> 时间：2013-04-18T05:14:32.547
> 
> 标签：php, mysql, sql

我的代码是。

```
$newModel = "INSERT INTO models (id," . 
    " firstname," .
    " lastname," .
    " email," .
    " password," .
    " group," .
    " phone," .
    " timeofday," .
    " dayofweek," .
    " address," .
    " city," .
    " state," .
    " zip," .
    " gender," .
    " hair," .
    " eye," .
    " birthday," .
    " birthmonth," .
    " birthyear," .
    " bustshirt," .
    " cup," .
    " waist," .
    " hips," .
    " waist," .
    " hips," .
    " weight," .
    " inches," .
    " dressjacket," .
    " workxp," .
    " twitter," .
    " facebook," .
    " joindate," .
    " instagram," .
    " imdb," .
    " parentid," .
    " error) VALUES (".
    PrepSQL($modelid) . ", " .
    PrepSQL($firstname) . ", " .
    PrepSQL($lastname) . ", " .
    PrepSQL($email) . ", " .
    PrepSQL($password) . ", " .
    PrepSQL($group) . ", " .
    PrepSQL($phone) . ", " .
    PrepSQL($timeofday) . ", " .
    PrepSQL($dayofweek) . ", " .
    PrepSQL($address) . ", " .
    PrepSQL($city) . ", " .
    PrepSQL($state) . ", " .
    PrepSQL($zip) . ", " .
    PrepSQL($gender) . ", " .
    PrepSQL($hair) . ", " .
    PrepSQL($eyes) . ", " .
    PrepSQL($bday) . ", " .
    PrepSQL($bmonth) . ", " .
    PrepSQL($byear) . ", " .
    PrepSQL($bust) . ", " .
    PrepSQL($cup) . ", " .
    PrepSQL($waist) . ", " .
    PrepSQL($hips) . ", " .
    PrepSQL($weight) . ", " .
    PrepSQL($height) . ", " .
    PrepSQL($dressjacket) . ", " .
    PrepSQL($workxp) . ", " .
    PrepSQL($twitter) . ", " .
    PrepSQL($facebook) . ", " .
    PrepSQL($joindate) . ", " .
    PrepSQL($instagram) . ", " .
    PrepSQL($imdb) . ", " .
    PrepSQL($parentid) . ", " .
    PrepSQL($error) . ")";

mysql_query($newModel) or die(mysql_error()); 
```

它射出一个错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“组、电话、时间、工作日、地址、城市、州、邮编、性别、头发、眼睛”附近使用正确的语法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T05:16:02.063

`group`是[MySQL 中的保留字](https://dev.mysql.com/doc/refman/4.1/en/reserved-words.html)。您必须将其包装在反引号中：

```
`group`,
phone 
```

等等

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T05:16:07.350

`GROUP`是保留关键字，恰好是您的列的名称。为避免语法错误，您需要使用反引号对其进行转义。例如，

```
`group` 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

如果您有修改表的权限，请将非保留关键字的列名更改为避免再次出现问题。

* * *

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# python-3.x - Python 或 Pygame 可以创建单独的文件以保存游戏进度吗？

> ID：16074972
> 
> 赞同：2
> 
> 时间：2013-04-18T05:14:40.947
> 
> 标签：python-3.x, pygame

我正在制作一个我希望可以保存的游戏。有没有办法对 python 或 pygame 进行编程，以便它创建一个记录玩家进度的记事本（或类似的东西）文件？我对python相当陌生，所以请简单解释一下。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:28:24.610

您可以使用[Pickle](http://docs.python.org/2/library/pickle.html)将变量序列化到文件中。

# c++ - 在 C++ 中解析文件并忽略某些字符

> ID：16074980
> 
> 赞同：0
> 
> 时间：2013-04-18T05:15:16.223
> 
> 标签：c++, string, parsing

我正在尝试解析具有以下信息的文件

```
test_wall ; Comments!!
je,5
forward
goto,1
test_random;
je,9 
```

我应该忽略“;”之后的评论 并继续下一行。当有逗号时，我试图忽略逗号并存储第二个值。

```
string c;
int a;

c=getChar();

ifstream myfile (filename);
if (myfile.is_open())
{
   while ( c != ';' && c != EOF)
   {
       c = getchar();
       if( c == ',')
       {
         a= getChar();
       }

   }
}
myfile.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:18:54.670

这是一些代码。我不完全确定我是否正确理解了这个问题，但如果不是，希望这会让你朝着正确的方向前进。

```
ifstream myfile (filename);
if (myfile.is_open())
{
   // read one line at a time until EOF
   string line;
   while (getline(myFile, line))
   {
       // does the line have a semi-colon?
       size_t pos = line.find(';');
       if (pos != string::npos)
       {
           // remove the semi-colon and everything afterwards
           line = line.substr(0, pos);
       }
       // does the line have a comma?
       pos = line.find(',');
       if (pos != string::npos)
       {
           // get everything after the comma
           line = line.substr(pos + 1);
           // store the string
           ...
       }
   }
} 
```

我将注释为“存储字符串”的部分留空，因为我不确定您想在这里做什么。可能您要求在存储之前将字符串转换为整数。如果是这样，请添加该代码，或者询问您是否不知道该怎么做。其实别问了，*搜索*栈溢出，因为那个问题已经被问了几百遍了。

# sockets - 将libev与非阻塞套接字一起使用时如何检查是否建立了连接

> ID：16074981
> 
> 赞同：2
> 
> 时间：2013-04-18T05:15:26.770
> 
> 标签：sockets, libev

我有一些关于如何处理连接超时的代码使用 libev，如下所示（请参阅[http://lists.schmorp.de/pipermail/libev/2011q2/001365.html](http://lists.schmorp.de/pipermail/libev/2011q2/001365.html)）：

```
sd = create_socket()
set_socket_nonblock(sd)
connect("127.0.0.1", port) // connect to an invalid port
ev_io_init(&w_io, connect_cb, sd, EV_WRITE)
ev_io_start(...)
ev_timer_init(&w_timer, timeout_cb, 5.0, 0)
ev_timer_start(...) 
```

并在某个地方执行 ev_run。调用了 connect_cb，在这个回调函数中我用 EV_ERROR 检查了 revents，结果没有错误。这很奇怪，因为我提供了一个不在本地机器上监听的无效端口号。无论如何，我尝试在connect_cb函数中发送一条消息，得到一个错误111，这意味着连接被拒绝。我很困惑！使用非阻塞套接字时如何检查连接是否正确建立？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:06:29.217

如果连接发生一些错误，getsockopt 是可能的方法：

```
int err;
socklen_t len = sizeof(err);
getsockopt(sd, SOL_SOCKET, SO_ERROR, &err, &len);
if (err) {
    // error happen
} else {
    connection is OK
} 
```

# css-float - 灯箱对齐问题

> ID：16074983
> 
> 赞同：0
> 
> 时间：2013-04-18T05:15:42.513
> 
> 标签：css-float, alignment, lightbox

在按钮上单击我打开灯箱。我在上面显示内容。灯箱工作正常。在高分辨率中，灯箱的对齐方式是屏幕的中心。如果我在正常分辨率 1024 * 768 中看到相同的内容。灯箱显示在屏幕左侧。我想在屏幕中央显示它任何分辨率。我正在使用以下CSS。

```
.white_content_note {
        display: none;
        position: absolute;
        width: auto;
        height: auto;
        padding: 15px 25px;
        opacity:1.00;
        border: 2px solid #c90000;
        background-color: #ffffff;
        z-index:1002;
        border-radius: 10px 10px 10px 10px;
        top:165px;
        margin:0;
        font-family:Calibri;
        right:455px;
        behavior:url(images/PIE.htc);   
    } 
```

即使我尝试位置：相对；边距：50px 自动；

它不工作。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:43:12.090

您应该使用相对设置进行右对齐：right:455px;

并将位置也更改为相对。

# asp.net-mvc - 英文邮件显示类似中文的字符

> ID：16074984
> 
> 赞同：1
> 
> 时间：2013-04-18T05:15:47.547
> 
> 标签：asp.net-mvc, character-encoding, postal

我正在使用[Postal](https://github.com/andrewdavey/postal)发送带有 HTML 和文本部分的电子邮件。

当电子邮件发送到 Gmail 时，它会正确显示。但是，当它显示在至少两个其他电子邮件系统（Mail Enable 的 webmail 界面和客户端的未知系统）中时，文本会呈现为类似于中文的内容。当客户端将电子邮件转发回 Gmail 帐户时，“中文”渲染也可见。

生成的示例电子邮件：

```
X-Sender: no-reply@thecompany.com
X-Receiver: therecipient@thecompany.com
MIME-Version: 1.0
From: no-reply@thecompany.com
To: therecipient@thecompany.com
Date: 17 Apr 2013 22:11:25 -0700
Subject: Some Subject
Content-Type: multipart/alternative;
 boundary=--boundary_0_83808b99-ef32-4f47-8835-ba4a435a2141

----boundary_0_83808b99-ef32-4f47-8835-ba4a435a2141
Content-Type: text/plain; charset=utf-16
Content-Transfer-Encoding: base64

MIME ENCODED CONTENTS HERE==
----boundary_0_83808b99-ef32-4f47-8835-ba4a435a2141
Content-Type: text/html; charset=utf-16
Content-Transfer-Encoding: base64

MIME ENCODED CONTENTS HERE=
----boundary_0_83808b99-ef32-4f47-8835-ba4a435a2141-- 
```

显然，Gmail 以某种方式解决了编码问题，但其他电子邮件服务器却没有，但究竟是什么问题？

被`charset`指定为`utf-16`。Postal（或 MVC 引擎）实际上是否生成`utf-8`输出？如何控制输出的编码和/或`charset`电子邮件标头中指定的编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:03:32.817

可以通过添加标头将字符编码显式设置为 utf-8

```
Content-Type: text/plain; charset=utf-8
and
Content-Type: text/html; charset=utf-8 
```

有关更多信息，请参阅[本文](https://github.com/andrewdavey/postal/issues/21)。

注意：文章中有错别字。该`text/plain`行缺少分号。这在上面的例子中得到了纠正。

# r - R：无法保存剧情

> ID：16074985
> 
> 赞同：2
> 
> 时间：2013-04-18T05:15:54.977
> 
> 标签：r, plot, ggplot2, save

我正在生成一个可以在 RMarkdown 输出中看到的图，但是每当我尝试保存它时，我得到的只是一个空白（白色）图像。我只是在情节之前和之后添加以下两行

```
png("Output.png")
#Plot code
dev.off() 
```

它正在工作。突然它停止工作了。有人可以帮我吗？

# 编辑

当我这样做时`pdf`

```
pdf("output.pdf")
#plot code
dev.off() 
```

我收到错误消息：

```
There was error opening this document. This document cannot be opened because it has no pages. 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T05:54:50.920

根据我认为我是对的评论，您需要打印结果`ggplot2`对象以显示绘图，另请参阅 R FAQ 7.22。

# iphone - 带有 STT 的 AVCaptureSession（语音转文本）

> ID：16074988
> 
> 赞同：2
> 
> 时间：2013-04-18T05:16:14.383
> 
> 标签：iphone, ios, objective-c, avcapturesession

我正在使用`AVCapture`Session 录制视频，同时我正在使用**STT**（*google Speech to text api*）将语音转换为文本。当我单击说话按钮然后相机冻结时，我遇到了问题。任何正确的答案都是可以接受的。提前致谢 。

启动相机

```
-(void)viewDidLoad;

     if ([[self captureManager] setupSession]) {
            // Create video preview layer and add it to the UI
            AVCaptureVideoPreviewLayer *newCaptureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:[[self captureManager] session]];
            UIView *view = [self videoPreviewView];
            CALayer *viewLayer = [view layer];
            [viewLayer setMasksToBounds:YES];

            CGRect bounds = [view bounds];
            [newCaptureVideoPreviewLayer setFrame:bounds];

            if ([newCaptureVideoPreviewLayer isOrientationSupported]) {
                [newCaptureVideoPreviewLayer setOrientation:AVCaptureVideoOrientationLandscapeLeft|AVCaptureVideoOrientationLandscapeRight];
            }

            [newCaptureVideoPreviewLayer setVideoGravity:AVLayerVideoGravityResizeAspectFill];

            [viewLayer insertSublayer:newCaptureVideoPreviewLayer below:[[viewLayer sublayers] objectAtIndex:0]];

            [self setCaptureVideoPreviewLayer:newCaptureVideoPreviewLayer];
            [newCaptureVideoPreviewLayer release];

            // Start the session. This is done asychronously since -startRunning doesn't return until the session is running.
            dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                [[[self captureManager] session] startRunning];
            });

            [self updateButtonStates];
    }

       - (BOOL) setupSession
  {
      BOOL success = NO;

        // Set torch and flash mode to auto
     if ([[self backFacingCamera] hasFlash]) {
    if ([[self backFacingCamera] lockForConfiguration:nil]) {
        if ([[self backFacingCamera]       isFlashModeSupported:AVCaptureFlashModeAuto]) {
            [[self backFacingCamera] setFlashMode:AVCaptureFlashModeAuto];
        }
        [[self backFacingCamera] unlockForConfiguration];
    }
}
   if ([[self backFacingCamera] hasTorch]) {
    if ([[self backFacingCamera] lockForConfiguration:nil]) {
        if ([[self backFacingCamera] isTorchModeSupported:AVCaptureTorchModeAuto]) {
            [[self backFacingCamera] setTorchMode:AVCaptureTorchModeAuto];
        }
        [[self backFacingCamera] unlockForConfiguration];
    }
}

// Init the device inputs
   AVCaptureDeviceInput *newVideoInput = [[AVCaptureDeviceInput alloc]  initWithDevice:[self frontFacingCamera] error:nil];
AVCaptureDeviceInput *newAudioInput = [[AVCaptureDeviceInput alloc] initWithDevice:[self audioDevice] error:nil];

// Setup the still image file output
AVCaptureStillImageOutput *newStillImageOutput = [[AVCaptureStillImageOutput alloc] init];
NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys:
                                AVVideoCodecJPEG, AVVideoCodecKey,
                                nil];
[newStillImageOutput setOutputSettings:outputSettings];
[outputSettings release];

// Create session (use default AVCaptureSessionPresetHigh)
AVCaptureSession *newCaptureSession = [[AVCaptureSession alloc] init];

// Add inputs and output to the capture session
if ([newCaptureSession canAddInput:newVideoInput]) {
    [newCaptureSession addInput:newVideoInput];
}
if ([newCaptureSession canAddInput:newAudioInput]) {
    [newCaptureSession addInput:newAudioInput];
}
if ([newCaptureSession canAddOutput:newStillImageOutput]) {
    [newCaptureSession addOutput:newStillImageOutput];
}

[self setStillImageOutput:newStillImageOutput];
[self setVideoInput:newVideoInput];
[self setAudioInput:newAudioInput];
[self setSession:newCaptureSession];

[newStillImageOutput release];
[newVideoInput release];
[newAudioInput release];
[newCaptureSession release];

// Set up the movie file output
NSURL *outputFileURL = [self tempFileURL];
AVCamRecorder *newRecorder = [[AVCamRecorder alloc] initWithSession:[self session] outputFileURL:outputFileURL];
[newRecorder setDelegate:self];

// Send an error to the delegate if video recording is unavailable
if (![newRecorder recordsVideo] && [newRecorder recordsAudio]) {
    NSString *localizedDescription = NSLocalizedString(@"Video recording unavailable", @"Video recording unavailable description");
    NSString *localizedFailureReason = NSLocalizedString(@"Movies recorded on this device will only contain audio. They will be accessible through iTunes file sharing.", @"Video recording unavailable failure reason");
    NSDictionary *errorDict = [NSDictionary dictionaryWithObjectsAndKeys:
                               localizedDescription, NSLocalizedDescriptionKey, 
                               localizedFailureReason, NSLocalizedFailureReasonErrorKey, 
                               nil];
    NSError *noVideoError = [NSError errorWithDomain:@"AVCam" code:0 userInfo:errorDict];
    if ([[self delegate] respondsToSelector:@selector(captureManager:didFailWithError:)]) {
        [[self delegate] captureManager:self didFailWithError:noVideoError];
    }
}

[self setRecorder:newRecorder];
[newRecorder release];

success = YES;

return success;
} 
```

# javascript - 关于这个和自我在javascript中

> ID：16074990
> 
> 赞同：4
> 
> 时间：2013-04-18T05:16:17.647
> 
> 标签：javascript, node.js, closures

我知道“自我”的魔力。但是看看 nodejs 的这个片段（不完整）。

```
Socket.prototype.connect = function(options, cb) {
......
  var self = this;
  var pipe = !!options.path;

  if (this.destroyed || !this._handle) {
    this._handle = pipe ? createPipe() : createTCP();
    initSocketHandle(this);
  }

  if (typeof cb === 'function') {
    self.once('connect', cb);
  }

  timers.active(this);

  self._connecting = true;
  self.writable = true;
......
} 
```

我的理解是我们必须使用 self 来创建一个闭包。这些行中没有闭包，但作者在将其分配给 self 后使用了这两个闭包。这里有什么不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T05:34:22.483

在您在这个特定代码示例中显示的内容中，甚至没有理由拥有`self`变量，因为没有其他函数范围可能需要访问`this`.

一些开发人员有一致的方法或约定来创建一个局部变量，例如`self`并为其分配值`this`just 以便他们可以在需要时在闭包中使用它。该`self`变量也可以最小化，`this`因为它可以重命名为一个字符的变量名称，但`this`不能重命名。

`self`在任何情况下，这里的功能如果被删除并且只`this`用于这个特定的方法，就不会受到影响。

我自己的个人约定是仅定义`self`是否确实需要它，这与我用于其他局部变量的逻辑相同，然后我只在需要它的闭包内使用它。

# google-bigquery - 使用 Google BigQuery 执行查询期间超出资源

> ID：16074993
> 
> 赞同：3
> 
> 时间：2013-04-18T05:16:36.580
> 
> 标签：google-bigquery

执行此查询时，我遇到了“查询执行期间超出资源”错误：

```
SELECT date_time,Atok,Segment,
COUNT(Distinct GoogId) AS DistUsers,
SUM(CASE WHEN EventType=1 THEN 1 ELSE 0 END) AS CntImp,
SUM(CASE WHEN EventType=2 THEN 1 ELSE 0 END) AS CntClick,
SUM(CASE WHEN EventType=3 THEN 1 ELSE 0 END) AS CntVisit,
SUM(CASE WHEN EventType=4 THEN 1 ELSE 0 END) AS CntConv,
FROM LogData.unified_logs
GROUP EACH BY 1,2,3; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T20:43:00.860

Count distinct 是罪魁祸首...您应该能够创建一个子查询，该子查询通过计算不同的用户来执行一个额外的组（每个）。

# c# - 为什么三元运算符不以这种方式工作？

> ID：16074994
> 
> 赞同：2
> 
> 时间：2013-04-18T05:16:37.613
> 
> 标签：c#, .net, logic, ternary-operator

为什么它不编译？以下代码有什么问题？

```
(_DbContext == null) ? return _DbContext = new ProductAndCategoryEntities() : return _DbContext; 
```

如果我根据它是否编译来重申它：

```
 if (_DbContext == null)
                   return _DbContext = new ProductAndCategoryEntities();
               else return _DbContext; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T05:25:59.627

`:`条件表达式中两边的东西是*表达式*，而不是语句。他们必须评估一些价值。 `return (anything)`是一个语句而不是一个表达式（例如，你不能说`x = return _DbContext;`），所以它在那里不起作用。

`new ProductAndCategoryEntities()`不过，`_DbContext`两者似乎都是表达式。因此，您可以将 移到`return`条件表达式的外部。

```
return (_DbContext == null) ? (_DbContext = new ProductAndCategoryEntities()) : _DbContext; 
```

虽然，在这种情况下，最好输掉`?:`并用顺子`if`。

```
if (_DbContext == null) _DbContext = new ProductAndCategoryEntities();
return _DbContext; 
```

这更简单一些。返回赋值的值通常看起来有点粗略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T05:19:33.467

三元运算符的工作原理如下：

```
return (_DbContext == null) ? new ProductAndCategoryEntities() : _DbContext; 
```

**编辑**：在您的情况下，您需要`_DbContext`分配，因此您需要第二条语句来执行此操作：

```
_DbContext = _DbContext ?? new ProductAndCategoryEntities();
return _DbContext; 
```

（感谢@Andrei Zubov 提醒我`??`操作员）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T05:25:00.493

@muratgu 的回答是正确的。

但是，如果您将变量与 null 进行比较，那么编写如下行会更简洁：

```
return _DbContext ?? new ProductAndCategoryEntities(); 
```

在我看来，这完全一样，并且更紧凑和可读。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T05:33:51.153

正如*ByteBlast*建议的那样，您可以这样做：

```
 if (_DbContext == null)
                return (_DbContext = new ProductAndCategoryEntities());
            else return _DbContext; 
```

或者，您可以考虑使用“??” 操作员。例如：

```
return _DbContext ?? new ProductAndCategoryEntities(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-18T05:36:45.320

好吧，我发现这段代码很棒，实际上并没有回答我的问题，但是我从中学到了一些新东西……任何批评者都将不胜感激。

```
 return _DbContext ?? (_DbContext = new ProductAndCategoryEntities()); 
```

# html - HTML 中的文本区域显示代码而不是呈现和格式化

> ID：16074998
> 
> 赞同：0
> 
> 时间：2013-04-18T05:17:01.823
> 
> 标签：html, css

我以前做过 textareas ，但这个简直要了我的命。文本区域显示的是 html 代码，并且没有正确地 css'ed。所以在实际的窗口中，我得到了 textarea 元素的代码，它也显示了我的其余代码，而不是渲染它。没有 textarea 标签，一切都很好。

```
<article>
<form method="POST" name="form9" action="<?php echo $_SERVER['PHP_SELF']; ?>">
    <label for="firstName">First Name <sup>*</sup></label>
    <input type="text" id="firstName" name="firstName" required />

    <label for="lastName">Last Name <sup>*</sup></label>
    <input type="text" id="lastName" name="lastName"/>

    <label for="wrstyle">Writing Style <sup>*</sup></label>
    <textarea placeholder="Please, briefly describe your writing style." type="text" id="wrstyle" name="wrstyle"</textarea>

    <label for="submit" class="centerit" title="Click here to register your account">
    <input type="submit" name="submit" value="Sign Up" />
                </label>
                <p class="notice"><sup>*</sup> denotes a required field.</p>

</form>
</article> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:19:09.810

您没有关闭 textarea 的开始标签（您丢失了`>`）：

[http://jsfiddle.net/Bvk92/](http://jsfiddle.net/Bvk92/)

还值得注意的是[`<textarea>`没有`type`属性。](http://www.w3.org/community/webed/wiki/HTML/Elements/textarea)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:21:35.120

您忘记关闭文本区域的标签.......

```
 <article>
    <form method="POST" name="form9" action="<?php echo $_SERVER['PHP_SELF']; ?>">
        <label for="firstName">First Name <sup>*</sup></label>
        <input type="text" id="firstName" name="firstName" required />

        <label for="lastName">Last Name <sup>*</sup></label>
        <input type="text" id="lastName" name="lastName"/>

        <label for="wrstyle">Writing Style <sup>*</sup></label>
        <textarea placeholder="Please, briefly describe your writing style." type="text" id="wrstyle" name="wrstyle"></textarea>

        <label for="submit" class="centerit" title="Click here to register your account">
        <input type="submit" name="submit" value="Sign Up" />
                    </label>
                    <p class="notice"><sup>*</sup> denotes a required field.</p>

    </form>
    </article> 
```